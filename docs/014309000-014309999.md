# StackOverflow 问答 14309000-14309999

# node.js - Node+Express+Jade：只有layout.jade在渲染

> ID：14309003
> 
> 赞同：1
> 
> 时间：2013-01-13T22:37:49.263
> 
> 标签：node.js, express, pug

我有一条路线定义为

```
server.get('/', function (req, res) {
    console.log('INDEX!');
    res.render('index.jade', {
        locals: {
            title: 'Your Page Title',
            description: 'Your Page Description',
            author: 'Your Name'
        }
    });
}); 
```

并且`index.jade`定义为：

```
div hello world!! 
```

但是`http://localhost:8081/`我所看到的只是布局，没有“hello world！”。我什至没有在我的视图中扩展布局......为什么会这样？

`INDEX!` *正在*渲染到我的控制台，所以我知道它正在走这条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:45:19.457

删除`.jade`：

```
res.render('index', {
    locals: {
        title: 'Your Page Title',
        description: 'Your Page Description',
        author: 'Your Name'
    }
}); 
```

还要确保您的视图配置设置正确：

```
server.set('views', __dirname + '/views');
server.set('view engine', 'jade'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:48:17.963

我需要添加

```
server.set("view options", { layout: false }); 
```

告诉`express`不要自动使用默认布局。我猜是因为我的视图没有定义`content`块（在我的布局中使用）我的内容都没有出现；只有布局。

# c# - 多维数组到 MVC 控制器

> ID：14309007
> 
> 赞同：8
> 
> 时间：2013-01-13T22:38:11.490
> 
> 标签：c#, asp.net-mvc, jquery

我有以下控制器方法

```
 public ActionResult Export(string [,] data, string workbookName)
    {
        ExcelWorkbook workbook = new ExcelWorkbook();
        workbook.AddRows(data);

        return new FileStreamResult(workbook.SaveSheet(), "application/vnd.ms-excel")
        {
            FileDownloadName = workbookName
        };
    } 
```

它采用二维数组并输出到工作表。

到目前为止，当使用 json 数组从 jquery 发布时，我无法在 data 参数中获取除 null 之外的任何内容。有谁知道填充数据参数所需的 json 的正确格式。我在 Jquery 1.7.2 上。

这是我的jQuery

```
 var arguments = {};

    arguments.data = [["1"], ["2"], ["3"]];
    arguments.workbookName = "test";

    //Populate arrayOfValues 
    $.ajax({
        type: "POST",
        url: '/Excel/Export',
        datatype: "json",
        traditional: true,
        data: arguments,
        success: function (data) {
            alert(data);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T01:57:46.323

使用锯齿状数组而不是多维数组可能会更好。我在使锯齿状阵列正常工作方面取得了更大的成功。Explosion Pills 也是对的，dataType 是响应的类型。`JSON.stringify`通过在数据上使用并指定 contentType ，我能够使用 json 请求来完成这项工作`application\json`：

控制器：

```
 public ActionResult Test(string[][] fields, string workbookName)
    {
        var cr = new JsonResult();
        cr.Data = fields;
        return cr;
    } 
```

JS：

```
var arguments = {};

arguments.fields = new Array(3);
arguments.fields[0] = new Array(3);
arguments.fields[1] = new Array(3);
arguments.fields[2] = new Array(3);

arguments.fields[0][0] = "hello";

arguments.workbookName = "test";

//Populate arrayOfValues 
$.ajax({
    type: "POST",
    url: '/Home/Test',
    dataType: "json",
    contentType: 'application/json',
    traditional: true,
    data: JSON.stringify(arguments),
    success: function (data) {
        alert(data);
    }
}); 
```

# ruby - 用于多个单词的 Ruby pig 拉丁语翻译器

> ID：14309008
> 
> 赞同：3
> 
> 时间：2013-01-13T22:38:15.327
> 
> 标签：ruby

我正在努力用 ruby​​ 创建一个猪拉丁语翻译器。它适用于大多数单词，但我在一次使用多个单词时遇到了一些麻烦。例如，当您输入单词“apple”时，您会得到“appleay”，但如果输入了多个单词，则不会翻译它们。我一直在寻找解决方案，但一无所获。这里的其他一些线程对让我走到这一步非常有帮助。任何提示将非常感谢。

我还在 if/else 语句中添加了几个例外，以允许正确翻译“quiet”和“square”，其中“qu”被认为是辅音。

在此先感谢您的帮助！

```
def translate (word)
  alpha = ('a'..'z').to_a
  vowels = %w[a e i o u]
  consonants = alpha - vowels

  if vowels.include?(word[0..0])
    word + 'ay'
  elsif consonants.include?(word[0..0]) && consonants.include?(word[1..1])
    word[2..-1] + word[0..1] + 'ay'
  elsif word[0..1] == "qu" 
    word[2..word.length]+"quay"
  elsif word[0..2] == "squ"
     word[3..word.length]+"squay"
  else consonants.include?(word[0])
    word[1..-1] + word[0..0] + 'ay'
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:41:02.387

你可以这样做：

```
Alpha = ('a'..'z').to_a
Vowels = %w[a e i o u]
Consonants = Alpha - Vowels

def translate(word)
  if Vowels.include?(word[0])
    word + 'ay'
  elsif Consonants.include?(word[0]) && 
    Consonants.include?(word[1])
    word[2..-1] + word[0..1] + 'ay'
  elsif word[0..1] == "qu" 
    word[2..-1]+"quay"
  elsif word[0..2] == "squ"
     word[3..-1]+"squay"
  else Consonants.include?(word[0])
    word[1..-1] + word[0..0] + 'ay'
  end
end

puts "Enter some text to translate"
text = fgets
puts text.split.map(&method(:translate)).join(' ') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T15:21:02.557

把它分解成多种方法怎么样？即，一种将字符串分解为单词的方法，然后将这些单词发送到另一种方法进行翻译，然后再将它们连接在一起并给出输出。

```
def translator(sentence)
  words_to_translate = sentence.split(" ")
  translated_words = words_to_translate.map {|word| translate_word(word)}
  translated_sentence = translated_words.join(" ")
end

def translate_word(word)
  ...code here
  return a word
end 
```

# .net - 如何确保调用析构函数？

> ID：14309010
> 
> 赞同：0
> 
> 时间：2013-01-13T22:38:28.930
> 
> 标签：.net, c++-cli

我有一个 System::Windows::Forms::UserControl 的子类，它分配一些必须在析构函数中释放的非托管资源。它通过 WindowsFormsHost 在 WPF 应用程序中使用。如果控件在应用程序中至少显示一次，则将调用它的析构函数。但是，如果创建了控件的实例但从未显示，则只会调用终结器。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:06:50.557

CLI 类包装器`IDisposable`默认实现。如果您不调用您的实例，则*不会*`MyCLIClass::Dispose()`调用析构函数。我不是 WPF 专家，但是当你展示你的控件时，你必须传递一个对处理控件处置的其他类的引用。如果你不这样做，它永远不会被调用。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:22:46.157

调用 IDisposable::Dispose() 调用你的 ~destructor。这是一个*可选*调用，必须由其他代码显式调用。当您将控件添加到容器（如窗体或面板）的控件集合中并且容器得到正确处理时，您将得到它。当用户通过单击关闭按钮关闭窗口时，这通常是自动的。

许多“自动”不起作用的场景。臭名昭著的是当您通过调用 Controls::Remove/At() 或 Controls::Clear() 方法自己删除控件时。当您刚刚使用 gcnew 创建实例但实际上从未通过将其添加到容器控件中使其可见时，它肯定不会是自动的。ControlsCollection 类无法完成它的工作。

*可选*调用需要由保证*调用*来支持。当需要释放非托管资源时，您必须**始终实现 !finalizer。**因此，无论出于何种原因，当使用您的控件的代码跳过可选调用时，它们永远不会被泄露。*稍后*将调用!finalizer 。*

# javascript - 关于图片库的 javascript 代码的问题

> ID：14309012
> 
> 赞同：0
> 
> 时间：2013-01-13T22:38:47.050
> 
> 标签：javascript, image, gallery

我试图理解这个我应该用于图片库的 javascript 代码。

我试过搜索，但没有找到任何对我有用的东西。我对javascript语言相当陌生。

我希望获得帮助以了解我如何准确地获取此代码以显示 HTML 文档中的图片。我在html中写什么？

```
var imgArray = ["pic1.jpg" , "pic2.jpg" , "pic3.jpg", "pic4.jpg"];
var galleryString = "";

for (var i = 0; i < imgArray.length; i++) {
GalleryString += "<img src=\" " + imgArray[i] + "\" />";
}

document.getElementById("galleryDiv").innerHTML = galleryString; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:41:33.040

你只是有一个错字：`GalleryString`应该是`galleryString`. JavaScript 标识符区分大小写，因此`GalleryString`也是`galleryString`不同的变量。`imgArray`修复该问题后，您应该会看到`galleryDiv`.

# c++ - boost::asio 如何实现定时数据包发送功能？

> ID：14309013
> 
> 赞同：1
> 
> 时间：2013-01-13T22:38:48.637
> 
> 标签：c++, windows, networking, timer, boost-asio

我有一个服务器应用程序，它使用 boost::asio 的异步读/写函数与连接的客户端进行通信（直到它们断开连接）。

到目前为止一切都很好，但我想实现某种定时方法，服务器在经过一定时间后自行发送数据包。

我主要遵循[boost::asio 网站](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)上的教程/示例，所以我的程序基本上与给定示例具有相同的结构。

我试图通过创建一个 asio::deadline 计时器对象并将其传递给我已经通过调用 io_service.run() 像这样“调用”的 io_service 对象来实现此功能：

```
asio::deadline_timer t(*io, posix_time::seconds(200));
t.async_wait(boost::bind(&connection::handle_timed, 
                this, boost::asio::placeholders::error)); 
```

handle_timed 处理程序如下所示：

```
void connection::handle_timed(const system::error_code& error)
{
    //Ping packet is created here and gets stored in send_data

    async_write(socket_, asio::buffer(send_data, send_length), 
                boost::bind(&connection::handle_write, this, boost::asio::placeholders::error));
} 
```

但是我遇到的问题是，deadline_timer 没有等待给定的时间，他几乎立即进入处理函数并想要发送数据包。

就像他一接触到异步操作就处理它，这当然不是我想要的。

是不是我不能在使用 io_service.run() 调用 io_service 对象后添加新的“对象”？或者也许我必须在之后专门将它包含在 io_service 对象的工作队列中？

此外，我无法理解如何在不与我拥有的正常消息流量混淆的情况下实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:50:50.843

您可以随时添加工作`io_service`。您应该检查`async_wait()`回调中的错误，在我看来您`deadline_timer`超出了范围

```
asio::deadline_timer t(*io, posix_time::seconds(200));
t.async_wait(boost::bind(&connection::handle_timed, 
                this, boost::asio::placeholders::error));
...
// t goes out of scope here 
```

你应该让它成为你`connection`班级的成员，就像`socket_`. 或者，`boost::enable_shared_from_this`在完成处理程序中使用并保留一份副本：

```
const boost::shared_ptr<asio::deadline_timer> t(new asio::deadline_timer(*io, posix_time::seconds(200)));
t.async_wait(boost::bind(&connection::handle_timed, 
                this, boost::asio::placeholders, t)); 
```

和你的完成处理程序

```
void connection::handle_timed(
    const system::error_code& error,
    const boost::shared_ptr<asio::deadline_timer>& timer
    )
{
    //Ping packet is created here and gets stored in send_data

    async_write(socket_, asio::buffer(send_data, send_length), 
                boost::bind(&connection::handle_write, this, boost::asio::placeholders::error));
} 
```

# cocoa-touch - Xcode：设置更多导航控制器按钮的颜色

> ID：14309015
> 
> 赞同：1
> 
> 时间：2013-01-13T22:39:03.443
> 
> 标签：cocoa-touch, xcode4, delegates, uinavigationcontroller

我有一个带有五个以上标签的标签栏应用程序，这意味着有一个“更多”部分。我在更多部分有一个自定义背景，但我一生无法弄清楚如何将“编辑”按钮和“后退”按钮的颜色从其他视图更改为黑色。我假设这将在 appDelegate 文件中？

# python - Py2exe - 可执行图标不显示

> ID：14309016
> 
> 赞同：1
> 
> 时间：2013-01-13T22:39:08.840
> 
> 标签：python, py2exe

我正在尝试为使用 Py2exe 用 Python 编写的应用程序构建二进制文件。这是我的示例 setup.py：

```
from distutils.core import setup
import py2exe

setup(
    windows = [{ "script": "app.py", "icon_resources": [(1, "appicon.ico")]}],
    options = {
        "py2exe" : {
            "dll_excludes": ["MSVCP90.dll"]
        }
    }
) 
```

虽然 .exe 已编译并正常工作，但未显示图标。使用 Resource Hacker 打开 .exe 时，我可以看到该图标在那里，但保存在“0”而不是“1”中。当我将图标手动保存到正确的插槽中时，它可以工作。我做错了什么？

# php - 提供的资源不是有效的 SSH2 SFTP 资源

> ID：14309017
> 
> 赞同：1
> 
> 时间：2013-01-13T22:39:14.733
> 
> 标签：php, libssh2

```
<?php
$ssh = ssh2_connect('domain.tld');
ssh2_auth_password($ssh, 'username', 'password');

$start = microtime(true);
$sftp = fopen('ssh2.sftp://'.$ssh.'/home/username/1mb', 'w');

fwrite($sftp, str_repeat('a', 1024 * 1024));
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds"; 
```

该代码片段给了我一个

> PHP 警告：fopen()：提供的资源不是有效的 SSH2 SFTP 资源...

错误。为什么？

```
$sftp = fopen('ssh2.sftp://username:password@domain.tld:22/home/user/1mb', 'w'); 
```

那个工作得很好，但如果你在做公钥认证，它就行不通，例如。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-07T12:45:58.150

正如评论中提到的 hakre 你应该使用

```
$ssh = ssh2_connect('domain.tld');
$resSftp= ssh2_sftp($ssh);
$sftp = fopen('ssh2.sftp://'.$resSftp.'/home/username/1mb', 'w'); 
```

# google-chrome - 在 browserAction 中获取非 http 页面的文本选择

> ID：14309025
> 
> 赞同：1
> 
> 时间：2013-01-13T22:39:56.913
> 
> 标签：google-chrome, google-chrome-extension

我正在编写一个谷歌浏览器扩展，它是浏览器中当前文本选择的剪辑。当我使用 时`chrome.contextMenus`，我什至可以为本地和 Chrome 内部页面（例如 about:version）获取文本选择，因为它具有方便的`OnClickData.selectionText`属性。

使用内容脚本是没有问题的，因为它不能注入本地/内部页面。

如果我使用 browserAction，如何获取本地网页和内部页面的当前文本选择？目前可能不可能，但我可能会错过一些解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:09:18.303

`chrome-extension://`是 chrome 的自定义协议，它限制了它的使用。

但是，如果你有

*   `chrome://newtab`
*   `chrome://bookmarks`
*   `chrome://history` 在您的内部页面列表中，您可以使用覆盖页面获取文本选择。用您自己的页面覆盖这些（或使它们看起来相似）并从这些页面中获取所有事件或文本选择。

**前任：**

```
"chrome_url_overrides":{
    "newtab":"mypage.html"
} 
```

`mypage.html`您的自定义页面在哪里。

除了`newtab`,`bookmarks`和`history`pages 到目前为止，没有任何方法可以通过直接或间接方法获取文本选择。

您可以`content scripts`用于所有独立的 html 页面，以获取文本选择！

# 参考

*   [覆盖页面](http://developer.chrome.com/extensions/override.html)

### PS：如果您希望获取数据而不是 DOM 事件，则所有内部页面都有单独的 API。

# linux - Bash脚本：两次之间的分钟差

> ID：14309032
> 
> 赞同：15
> 
> 时间：2013-01-13T22:40:18.307
> 
> 标签：linux, bash, shell, datetime

我有两个时间字符串；例如。同一天的“09:11”和“17:22”（格式为hh:mm）。如何计算这两者之间的时间差（以分钟为单位）？

标准`date`库能做到这一点吗？

例子：

```
#!/bin/bash

MPHR=60    # Minutes per hour.

CURRENT=$(date -u -d '2007-09-01 17:30:24' '+%F %T.%N %Z')
TARGET=$(date -u -d'2007-12-25 12:30:00' '+%F %T.%N %Z')

MINUTES=$(( $(diff) / $MPHR )) 
```

考虑到 hh:mm 中的小时和分钟，是否有更简单的方法来执行此操作

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T22:54:08.060

一个纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")解决方案：

```
old=09:11
new=17:22

# feeding variables by using read and splitting with IFS
IFS=: read old_hour old_min <<< "$old"
IFS=: read hour min <<< "$new"

# convert hours to minutes
# the 10# is there to avoid errors with leading zeros
# by telling bash that we use base 10
total_old_minutes=$((10#$old_hour*60 + 10#$old_min))
total_minutes=$((10#$hour*60 + 10#$min))

echo "the difference is $((total_minutes - total_old_minutes)) minutes" 
```

另一种使用的解决方案`date`（我们使用小时/分钟，所以日期并不重要）

```
old=09:11
new=17:22

IFS=: read old_hour old_min <<< "$old"
IFS=: read hour min <<< "$new"

# convert the date "1970-01-01 hour:min:00" in seconds from Unix EPOCH time
sec_old=$(date -d "1970-01-01 $old_hour:$old_min:00" +%s)
sec_new=$(date -d "1970-01-01 $hour:$min:00" +%s)

echo "the difference is $(( (sec_new - sec_old) / 60)) minutes" 
```

见[http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-14T15:44:23.937

我会将日期转换为 UNIX 时间戳；您可以减去以秒为单位的差异，然后除以 60：

```
#!/bin/bash

MPHR=60    # Minutes per hour.

CURRENT=$(date +%s -d '2007-09-01 17:30:24')
TARGET=$(date +%s -d'2007-12-25 12:30:00')

MINUTES=$(( ($TARGET - $CURRENT) / $MPHR )) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-27T17:48:21.137

这是我的做法：

```
START=$(date +%s);
sleep 1; # Your stuff
END=$(date +%s);
echo $((END-START)) | awk '{printf "%d:%02d:%02d", $1/3600, ($1/60)%60, $1%60}' 
```

真的很简单，在开始时取秒数，然后在结束时取秒数，并以分钟：秒为单位打印差异。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-09T02:42:57.810

我一直在寻找几秒钟的解决方案。在这里找到：[如何计算 bash 脚本中的时间差？](https://stackoverflow.com/questions/8903239/how-to-calculate-time-difference-in-bash-script)

```
#!/bin/bash
string1="10:33:56"
string2="10:36:10"
StartDate=$(date -u -d "$string1" +"%s")
FinalDate=$(date -u -d "$string2" +"%s")
date -u -d "0 $FinalDate sec - $StartDate sec" +"%H:%M:%S" 
```

在这里，我在 Gilles 的解决方案中添加了几秒钟：

```
function countTimeDiff() {
    timeA=$1 # 09:59:35
    timeB=$2 # 17:32:55

    # feeding variables by using read and splitting with IFS
    IFS=: read ah am as <<< "$timeA"
    IFS=: read bh bm bs <<< "$timeB"

    # Convert hours to minutes.
    # The 10# is there to avoid errors with leading zeros
    # by telling bash that we use base 10
    secondsA=$((10#$ah*60*60 + 10#$am*60 + 10#$as))
    secondsB=$((10#$bh*60*60 + 10#$bm*60 + 10#$bs))
    DIFF_SEC=$((secondsB - secondsA))
    echo "The difference is $DIFF_SEC seconds.";

    SEC=$(($DIFF_SEC%60))
    MIN=$((($DIFF_SEC-$SEC)%3600/60))
    HRS=$((($DIFF_SEC-$MIN*60)/3600))
    TIME_DIFF="$HRS:$MIN:$SEC";
    echo $TIME_DIFF;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-13T22:55:58.013

```
MPHR=60
CURRENT=09:11
TARGET=17:22
echo $(( ( 10#${TARGET:0:2} - 10#${CURRENT:0:2} ) * MPHR + 10#${TARGET:4} - 10#${CURRENT:4} )) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-28T20:50:53.287

```
STARTTIME=$(date +%s) 
```

您的代码：

```
ENDTIME=$(date +%s)
secs=$(($ENDTIME - $STARTTIME))
printf 'Elapsed Time %dh:%dm:%ds\n' $(($secs/3600)) $(($secs%3600/60)) $(($secs%60)) 
```

# vb6 - 如何将 MouseWheel 支持添加到复合控件？

> ID：14309034
> 
> 赞同：0
> 
> 时间：2013-01-13T22:40:41.723
> 
> 标签：vb6

我有一个相当复杂的用户控件。它有一个包含整个控件的滚动条。如何向控件添加 MouseWheel 支持？我是否必须对整个控件进行子类化并收听`WM_MOUSEWHEEL`消息？或者，还有更好的方法？

# c++ - 检查字符串是否包含非字母数字字符

> ID：14309035
> 
> 赞同：0
> 
> 时间：2013-01-13T22:40:42.527
> 
> 标签：c++, string, character, non-alphanumeric

我正在尝试编写一个函数，该函数将字符串作为参数并检查该字符串是否**仅包含一个非字母数字字符**，如果是这种情况，则返回 true，如果不是，则返回 false。

例如：

```
'Alex's' would return true. 
James..Warner would return false. 
```

我当前的代码如下，但我觉得它不起作用。因为我在其他地方有一个计数，基本上是真实的。使用包含字符串的地图完成。对于正在输入的单词，我得到的计数值太高了。

```
bool Class3::filter(string word)
    {
        string s = word;
        int len = s.size();

        for (int i=0; i<len; i++)
        {   if(!isalnum(s[i])){
            return true;}
            else{return false;}  
        }
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T22:45:51.887

您可以使用`std::count_if`然后检查该值是否大于1。

```
int i = std::count_if(str.begin(),str.end(),[](char c){ return !(std::isalnum(c)); });
return i > 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T22:43:34.737

您的程序仅在查看单个字符后做出决定；它不能那样工作！当您看到字符是字母数字时，您`false`立即返回，而不查看其余字符。要修复，请移动循环`return false` *外部。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T23:00:44.843

其他人评论了您描述问题的糟糕程度，并向您抛出了您可能不理解的复杂的基于模板的代码。我强烈建议您阅读它；模板功能强大、有用，而且是一种很棒的编程技术。缺点是你必须先学习它们。

这是一个非面向模板的解决方案：

```
bool class3::filter(string word)
{
    //You aren't mutating word, so don't waste your time
    //(or memory) by copying it.  In fact, I'd (strongly)
    //recommend you utilize a constant pass by reference,
    //because by default that's what you're already doing,
    //so you were taking a copy of a copy.  Waste of memory!

    //Just init a count variable.
    int count=0;

    //Set up your for loop...
    for(int i=0; i<word.size(); i++)
    {
        if(!isalnum(word[i]))
        {
            //If a character doesn't match, increment your counter
            count++;
                            //If you want to, you can return false here if count>1 to improve efficiency -- depends on your end goal.
        }
    }
    //If you want exactly one non-alphanumeric, then return this.
    return count==1;
    //Or if it's a maximum of one non-alphanumeric, then...
    return count<=1;
    //Or you could generalize by returning a count of non alphanumerics -- remember to change the return type!
    return count;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T23:41:47.837

和下一个人一样“低效”。

```
#include <string>
#include <algorithm>
#include <functional>
#include <cctype>

// return 'true' if there is one-and-only-one non-alphanumeric character
// in the given std::string parameter. If there are NO non-alphanumeric
// characters, OR more than one, then return 'false'.
bool filter(const std::string& s)
{
    function<bool(char)> is_not_alnum([](char c)->bool{ return !isalnum(c); });
    string::const_iterator first = find_if(s.begin(), s.end(), is_not_alnum);
    return first != s.end() && (find_if(first+1, s.end(), is_not_alnum) == s.end());
} 
```

发布只是为了让我也可以因为“我不会这样做”的原因而被否决。我宁愿和罪人一起笑，也不愿和圣徒一起哭。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-13T22:44:52.617

您可以[`std::count_if`](http://en.cppreference.com/w/cpp/algorithm/count)与 结合使用[`std::isalnum`](http://en.cppreference.com/w/cpp/string/byte/isalnum)。

```
bool filter(const std::string word)
{
  return std::count_if(word.begin(), word.end(), [](char c){ return !(std::isalnum(c));}) > 1;
} 
```

需要注意的是，该算法会检查字符串中的所有字符。这可能是也可能不是性能问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-13T22:51:03.177

你可以使用`std::count_if`and `lambda`：

```
bool filter(const std::string& s)
{
  if (std::count_if(s.begin(), s.end(), [](char c){ return !std::isalpha(c); }) == 1)
  {
    cout << s << ": contains one non-alpha charectors" << endl;
    return false;
  }

 cout << s << ": string contains alpha charectors only" << endl;
 return true;      
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-01-13T22:43:47.607

您没有计算代码中非字母数字字符的数量，对吗？您只需在第一个字符上返回 true 或 false 。

除非你数数，否则你不会找到答案。但是，您可以在第二个非字母数字处停止。

由于您似乎需要编写代码的练习，这里有一些伪代码：

```
int nonalphas = 0;
for ( char in string )
    if ( char is nonalpha )
        nonalphas++;
        if ( nonalphas > 1 )
            break;
return nonalphas == 1; 
```

# .htaccess - 考虑 URL 的两个部分的 htaccess 重写规则，例如 example.com/place/name

> ID：14309046
> 
> 赞同：0
> 
> 时间：2013-01-13T22:41:33.557
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我正在尝试创建一个`.htaccess` `rewrite rule`由我的 URL`http://example.com/place/name`处理的位置，以便调用该文件`place.php`并且它具有可用的参数`name`。

我很有信心只用 重写一个部分`RewriteRule ^place$ place.php [L]`，但是我不确定如何实现上面概述的两部分过程。

第一`place`部分将始终引用三个静态文件中的一个，第二个名称部分将是未知的并且每个请求都不同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:32:12.673

您可以在根目录中的一个 .htaccess 文件中尝试此操作

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  .*/([^/]+)/([^/]+)/?   [NC]
RewriteRule .*       %1.php?t=%2                   [L] 
```

# c# - 使用await阻碍了程序的进程

> ID：14309047
> 
> 赞同：0
> 
> 时间：2013-01-13T22:41:39.647
> 
> 标签：c#, asynchronous, windows-8

我正在编写一个适用于 Windows 8 的应用程序，该应用程序需要获取特定站点的 HTML。当我将它编码到 MainPage 中的按钮事件中时，它运行良好。但是，当我尝试在我的班级“乐队”中这样做时：

```
 public Band(String Name)
    {
        this.Name = Name;
        GetHtmlDocument();
        GenerateId();
        GetAlbumDocument();
        GenerateLogo();
        GeneratePhoto();
        CreateAlbumList();
    }

    private async void GetHtmlDocument()
    {
        HttpClientHandler handler = new HttpClientHandler();
        HttpClient client = new HttpClient(handler as HttpMessageHandler) { BaseAddress = new Uri(@"http://www.metal-archives.com/bands/" + Name) };
        var r = await client.GetAsync(client.BaseAddress);
        string html = null;
        if (r.IsSuccessStatusCode) html = await r.Content.ReadAsStringAsync();
        HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
        document.LoadHtml(html);
        DocumentBand = document;
    } 
```

它来到

```
var r = await client.GetAsync(client.BaseAddress); 
```

行，然后从`GenerateId()`构造函数中的方法继续。但是为了处理`GenerateId()`方法，`GetHtmlDocument()`方法必须完成。在这种情况下我该怎么办？

我的主要语言是 Java，而且我对 C# 还很陌生，因此可能存在巨大的编码或命名错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:49:09.343

尽管您的函数 GetHtmlDocument 具有异步签名，但并未针对该签名调用它。

您在函数中调用 client.GetAsync()。这会将控制权交还给调用函数，在这种情况下是 Band 的构造函数，而无需等待结果。

将呼叫更改为

```
await GetHtmlDocument() 
```

应该使事情同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:29:29.667

我会做这样的事情：

```
 public Band(String Name)
    {
        this.Name = Name;
    }

    public async Task Init()
    {
        await GetHtmlDocument();
        GenerateId();
        GetAlbumDocument();
        GenerateLogo();
        GeneratePhoto();
        CreateAlbumList();
    }

    // Note Task Return type
    private async Task GetHtmlDocument()
    {
        HttpClientHandler handler = new HttpClientHandler();
        HttpClient client = new HttpClient(handler as HttpMessageHandler) { BaseAddress = new Uri(@"http://www.metal-archives.com/bands/" + Name) };
        var r = await client.GetAsync(client.BaseAddress);
        string html = null;
        if (r.IsSuccessStatusCode) html = await r.Content.ReadAsStringAsync();
        HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
        document.LoadHtml(html);
        DocumentBand = document;
    } 
```

从您的代码中，您必须单独调用 init ：

```
 Band band = new Band("name");
 await band.Init(); 
```

有一个单独的`Init()`函数的原因是因为`async`并且`await`不能在构造函数内部使用。

# javascript - 哪个ArrayBufferView

> ID：14309049
> 
> 赞同：15
> 
> 时间：2013-01-13T22:41:45.537
> 
> 标签：javascript, html, blob, filewriter, arraybuffer

我正在通过 XHR 检索 ArrayBuffer，并希望使用 FileWriter 将其保存到 FileSystem API。FileWriter 需要一个 Blob，而 Blob 构造函数不会采用 ArrayBuffer，它采用 ArrayBufferView。

有很多 ArrayBufferViews 可供选择，我怎么知道哪个是正确的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T02:27:15.527

在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/ArrayBufferView)，您可以找到所有可用子类的概述`ArrayBufferView`：

```
Type         | Size | Description                           | Equivalent C type
-------------+------+---------------------------------------+------------------
Int8Array    | 1    | 8-bit twos complement signed integer  | signed char
Uint8Array   | 1    | 8-bit unsigned integer                | unsigned char
Int16Array   | 2    | 16-bit twos complement signed integer | short
Uint16Array  | 2    | 16-bit unsigned integer               | unsigned short
Int32Array   | 4    | 32-bit twos complement signed integer | int
Uint32Array  | 4    | 32-bit unsigned integer               | unsigned int
Float32Array | 4    | 32-bit IEEE floating point number     | float
Float64Array | 8    | 64-bit IEEE floating point number     | double 
```

基本上，这列出了数组的每个项目将占用的内存空间，以及它是普通数字还是 FP 数字。我不确定您熟悉哪些语言，但如果它也涵盖 Java，那么它基本上与您在`byte[]`, `short[]`, `int[]`, `float[]`and `double[]`(Java 总是签名的，所以这部分无关紧要）。

我们知道，像图像这样的二进制数据通常表示为字节数组。short/int/long 数组也可以，但是这样会浪费内存空间。如果你将一个100KB的图像（注意“B”代表字节，即8位）存储在一个int数组而不是字节数组中，那么它会占用400KB的内存，浪费了300KB。因此，最小的 ,`Int8Array`就内存空间而言已经足够了。如果您想以编程方式遍历它（在这种情况下不太可能）作为无符号数组，那么您可以选择`Uint8Array`每个项目都保存值`0`to`255`而不是值`-128`to 的地方`127`。

这是一个 copy'n'paste'n'runnable 启动示例，它从服务器下载图像文件，将其保存到临时本地存储空间并将其呈现为`<img>`正文（该部分需要小 jQuery）。此示例假定该`image.png`文件位于与从以下位置下载 JS（或 HTML，如果 JS 是内联的）文件相同的基本文件夹中：

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(window.TEMPORARY, 1024*1024, startDownload, errorHandler);

var errorHandler = function(error) {
    console.log('FS error: ' + error);
}

var xhr = new XMLHttpRequest();
xhr.open('GET', 'image.png', true);
xhr.responseType = 'arraybuffer';

function startDownload(fileSystem) {
    xhr.onload = function(event) {
        var content = new Int8Array(this.response);
        fileSystem.root.getFile('/image.png', { 'create': true }, function(fileEntry) {
            fileEntry.createWriter(function(fileWriter) {
                fileWriter.onwriteend = function(event) {
                    $('body').append('<p>Image successfully downloaded:</p>')
                             .append('<p><img src="' + fileEntry.toURL() + '"/></p>');
                };

                var blob = new Blob([content], { type: 'image/png' });
                fileWriter.write(blob);
            }, errorHandler);
        });
    }

    xhr.send();
} 
```

请注意，就[当前](http://caniuse.com/#feat=filesystem)状态而言，这仅适用于 Chrome。

# shell - 如何将公共文件下载到服务器？

> ID：14309053
> 
> 赞同：-1
> 
> 时间：2013-01-13T22:42:17.127
> 
> 标签：shell, command-line, ssh, command, putty

我正在尝试通过 SSH 将此文件直接下载到我的服务器： [http ://chromium-browser-source.commondatastorage.googleapis.com/chromium.r176602.tgz](http://chromium-browser-source.commondatastorage.googleapis.com/chromium.r176602.tgz)

我需要使用什么命令来执行此操作？

我看到的所有文档都只是在教如何使用 SSH 从一台服务器连接到另一台服务器，但我不需要这样做，因为这个文件当然是可以公开下载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:44:35.067

尝试这样做：

```
wget http://chromium-browser-source.commondatastorage.googleapis.com/chromium.r176602.tgz 
```

或使用卷曲

# algorithm - 3D 三角棱镜最近点

> ID：14309056
> 
> 赞同：1
> 
> 时间：2013-01-13T22:42:25.550
> 
> 标签：algorithm, geometry

我有一个 3D 非退化三角形，其正面和背面由顶点缠绕确定。这个三角形与深度*d*一起描述了一个直角三棱柱*（三角形的背面是“内部”，另一个三角形面是隐式定义的）。

给定第四个点，我需要检查该点是否在棱镜内，如果是，则在给定三角形面的表面上找到离它最近的点。

笔记：

*   [这个问题](https://stackoverflow.com/questions/8332732/how-can-i-find-out-if-point-is-in-triangle)很相似，但不是我想要的。
*   **不一定*是直角三角形脸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:54:27.810

使用[https://stackoverflow.com/a/8361714/15472](https://stackoverflow.com/a/8361714/15472)中的答案来查找一个点是否在三角形上方，您可以先检查它是否在底部三角形上方，然后是否在顶部三角形下方（此处为反向缠绕），如果两者都是正确的，那么您现在知道它介于两者之间。最近的点要么是它在顶部的投影，要么是它在底部的投影。也就是说，如果您知道如何解决[我如何才能确定点是否在 3D 三角形内？](https://stackoverflow.com/questions/8332732/how-can-i-find-out-if-point-is-in-triangle)，你可以轻松解决这个问题。

进行旋转以解决 2D 问题可能在计算上更有效；检查（现在单个）三角形是否包含该点，然后再次旋转以检查到两个投影中的每一个的距离。

# android - SurfaceHolder 实现

> ID：14309062
> 
> 赞同：1
> 
> 时间：2013-01-13T22:42:33.527
> 
> 标签：android, android-camera

我想做我自己的 SurfaceHolder 实现。它不是 SurfaceHolder.Callback 实现。

目前我正在从 SurfaceView 获取我的 SurfaceHolder，它工作正常。前任。：

```
mHolder = mSurfaceView.getHolder(); 
```

但是我需要重写这个holder的一些方法，所以我需要实现一个SurfaceHolder。

android.view.SurfaceHolder 类只是一个抽象接口，所以我不能扩展它我需要实现它。

问题：

有没有人完全实现了 SurfaceHolder 类？

# xcode - OSX 中的 64 位构建 - 不一致的 malloc 错误

> ID：14309065
> 
> 赞同：2
> 
> 时间：2013-01-13T22:42:40.610
> 
> 标签：xcode, macos, 64-bit, malloc, 32bit-64bit

我在 Xcode 中遇到了一个非常不一致的错误：

```
malloc: *** error for object 0x1041146f8: incorrect checksum for freed object - object was probably modified after being freed. *** set a breakpoint in malloc_error_break to debug 
```

我知道这不是我的直接代码，因为 32 位构建工作得很好（架构设置为标准 32/64，仅构建活动架构设置为否）。它偶尔也会正常工作，我什至不更改评论，但只有大约 %10 的时间。

我已经使用断点跟踪了错误，有时它发生在 ivar 上，例如：myClass = new MyClass，但有时它发生在删除不相关的 ivar 时。我已经尝试在创建新实例之前将 myClass 设置为 null 但这没有帮助，而且我很茫然，因为我不完全了解缓存、寄存器、堆和堆栈（这可能会深入了解原因这正在发生）。

这是我遇到错误的地方的一些代码。请注意，每组代码行都是不同的地方和类，错误可能会或可能不会发生。

错误 1

```
void functionA() {
    // bunch of unrelated code
    if (aAinterpFilter)
        delete aAinterpFilter;

    // this is where the first error sometimes happens
    aAinterpFilter = new InterpFilter((Window::Sinc::LP*)filterDesign, aAinterpFactor);
} 
```

错误 2

```
Window::Sinc::LP::~LP ()
{
    // the z delete is where the error sometimes happens
    delete[] z;
    delete[] kernel;
} 
```

错误 3

```
void AAOsc :: setPhase(double phase) {
    if (phase < 0.0) phase = 0.0;
    if (phase > 1.0) phase = 1.0;

    // this is where the error rarely happens, but it does sometimes.
    osc->tickInfo->curvPhase = static_cast<uint>(phase * 4294967296.0);
} 
```

任何可能指向解决方案的想法将不胜感激。

GW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:19:01.963

您需要在建议的函数上添加断点`malloc_error_break()`。运行应用程序并让调试器在该函数上中断。退后一两个堆栈帧，您将看到操作系统认为已释放您已修改的变量。然后，您需要弄清楚该变量之前可能在哪里被释放。

如果您有一块您`malloc`编辑然后写入的内存并且您不小心在返回的指针*之前*`malloc`写入了几个字节，这也可能发生。您可以通过打开[警卫 malloc](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-MallocOptions/_index.html)并使其再次发生来抓住它。

# c# - 从字符串数组中删除所有空元素

> ID：14309072
> 
> 赞同：40
> 
> 时间：2013-01-13T22:43:00.000
> 
> 标签：c#, .net, vb.net, linq, list

我有这个：

```
List<string> s = new List<string>{"", "a", "", "b", "", "c"}; 
```

我想在`("")`不使用`foreach`语句的情况下快速（可能通过 LINQ）从中删除所有空元素，因为这会使代码看起来很难看。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-13T22:45:21.880

您可以使用[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)：

C＃

```
s.RemoveAll(str => String.IsNullOrEmpty(str)); 
```

VB.NET

```
s.RemoveAll(Function(str) String.IsNullOrEmpty(str)) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-13T22:46:39.423

*[`List.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)*用with[*`String.IsNullOrEmpty()`*](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)方法检查；

> 指示指定的字符串是 null 还是 Empty 字符串。

```
s.RemoveAll(str => string.IsNullOrEmpty(str)); 
```

这是一个*[`DEMO`](http://ideone.com/dYU07Z)*.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-13T22:46:09.753

```
s = s.Where(val => !string.IsNullOrEmpty(val)).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-26T05:15:01.033

我写下面的代码来删除空白值

```
List<string> s = new List<string>{"", "a", "", "b", "", "c"};
s = s.Where(t => !string.IsNullOrWhiteSpace(t)).Distinct().ToList(); 
```

# linux - 修改自旋锁时面临依赖问题

> ID：14309082
> 
> 赞同：1
> 
> 时间：2013-01-13T20:00:29.093
> 
> 标签：linux, kernel, c, dependencies

我想在 2.6.36.4 的 spinlock.h 中修改 spin_lock & spin_unlock API。我想为每个核心添加一个计数器，以便每次在核心上获取锁时，它的计数器在调用 spin_lock 时递增和递减。在任何时候，我都可以获得每个核心的 lock_depth。

我尝试通过添加每个 CPU 变量来做到这一点。使用`DECLARE_PER_CPU(int, crnt_lck_depth)`但要做到这一点，我不得不`#include percpu.h`反过来`#includes spinlock.h`

所以我通过创建一个数组并写入相应的索引来解决这个问题，但要做到这一点，我需要执行线程的 cpu using `cpu_id()`，我再次遇到了相同的依赖问题。

这是我到目前为止在 spinlock.h 中所做的

```
static int ctr_lock_depth[24];                                                       
EXPORT_SYMBOL(ctr_lock_depth);//ctr_depth is used by my module

/* from smp.h */                                                                                     
extern int raw_smp_processor_id(void);                                               
static inline void spin_lock(spinlock_t *lock)                                       
{                                                                                    
        int cpu;                                                                     
        raw_spin_lock(&lock->rlock);                                                 
        cpu = raw_smp_processor_id();                                                
        ctr_lock_depth[cpu]++;                                                       
}     
static inline void spin_unlock(spinlock_t *lock)                                     
{                                                                                    
        int cpu ;                                                                    
        raw_spin_unlock(&lock->rlock);                                               
        cpu = raw_smp_processor_id();                                                
        ctr_lock_depth[cpu]--;                                                       
} 
```

这些是我得到的警告/错误

```
include/linux/spinlock.h:292:1: warning: data definition has no type or storage class
include/linux/spinlock.h:292:1: warning: type defaults to ‘int’ in declaration of ‘EXPORT_SYMBOL’
include/linux/spinlock.h:292:1: warning: parameter names (without types) in function declaration
include/linux/timex.h:76:17: error: field ‘time’ has incomplete type
In file included from include/linux/ktime.h:25:0,
                 from include/linux/timer.h:5,
                 from include/linux/workqueue.h:8,
                 from include/linux/pm.h:25,
                 from /usr/src/linux-2.6.36.4.kvm-rr/arch/x86/include/asm/apic.h:6,
                 from /usr/src/linux-2.6.36.4.kvm-rr/arch/x86/include/asm/smp.h:13,
                 from include/linux/spinlock.h:62,
                 from include/linux/seqlock.h:29,
                 from include/linux/time.h:8,
                 from include/linux/stat.h:60,
                 from include/linux/module.h:10,
                 from include/linux/crypto.h:21,
                 from arch/x86/kernel/asm-offsets_64.c:8,
                 from arch/x86/kernel/asm-offsets.c:4:
include/linux/jiffies.h:257:10: warning: "NSEC_PER_SEC" is not defined
include/linux/ktime.h:84:6: error: ‘NSEC_PER_SEC’ undeclared (first use in this function)
include/linux/time.h:240:23: error: conflicting types for ‘ns_to_timeval’
include/linux/ktime.h:294:22: note: previous implicit declaration of ‘ns_to_timeval’ was here 
```

有什么不对吗？有没有其他更简单的方法来做同样的事情。

谢谢， 莎朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T05:51:35.860

正如其他用户所提到的，`lockdep`可以为您进行此类分析。`Lockdep`是 linux 内核中已经存在的功能（无需修补），用于检测`deadlocks`内核代码内部。此外，它还提供与锁定、等待时间、保持时间、锁链等相关的其他重要统计信息，这些统计信息可能有助于提高系统性能。

从[文档](https://www.kernel.org/doc/Documentation/lockdep-design.txt)中：

“锁验证器是做什么的？它“观察”并映射所有动态发生的锁定规则（由内核对自旋锁、rwlock、互斥锁和 rwsem 的自然使用触发）。每当锁定验证器子系统检测到新的锁定场景时，它都会根据现有规则集验证此新规则。如果此新规则与现有规则集一致，则透明添加新规则，内核继续正常运行。如果新规则可能造成死锁场景，则打印出此条件。”</p>

另外，这篇文章指出了如何使用它：[How to use lockdep feature in linux kernel for deadlock detection](https://stackoverflow.com/questions/20892822/how-to-use-lockdep-feature-in-linux-kernel-for-deadlock-detection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:37:00.700

查看同样在进行锁分析的 lockdep 实现。

# javascript - fs.readFile 函数响应未定义...有什么想法吗？

> ID：14309083
> 
> 赞同：4
> 
> 时间：2013-01-13T22:44:10.260
> 
> 标签：javascript, node.js, function, console

我正在运行一个简单的 readfile 命令，用于视频教程，这与教师保存的代码完全相同...

```
var fs = require("fs");
console.log("Starting");
fs.readFile("./sample.txt", function(error, data) {
console.log("Contents: " + data);
});
console.log("Carry on executing"); 
```

我在与此 js 文件相同的文件夹中有 sample.txt，在 sample.txt 文件中我有“这是此文本文档的示例输出”，不幸的是，我得到一个“未定义”作为数据变量的输出在代码中。

如果有人对为什么会发生这种情况有任何见解，如果有人能提供帮助，那就太好了......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:32:29.873

尝试先检查文件是否存在：

```
var fs = require("fs");
console.log("Starting");

fs.exists("./sample.txt", function(fileok){
  if(fileok)fs.readFile("./sample.txt", function(error, data) {
    console.log("Contents: " + data);
  });
  else console.log("file not found");
});
console.log("Carry on executing"); 
```

如果不存在，请检查路径、文件名和扩展名，因为您的代码没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T05:39:01.193

根据您从哪里运行它，`./sample.txt`解析的根可能会有所不同。

为确保它相对于您的模块进行解析，请执行以下操作：

```
var fs = require("fs");
var path = require('path');

var sampleTxt = path.join(__dirname, 'sample.txt');

console.log("Starting");
fs.readFile(sampleTxt, function(error, data) {
  if (error) return console.error(error);
  console.log("Contents: " + data);
});
console.log("Carry on executing"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-19T21:24:50.057

即使文件存在为什么 Node.js 的 fs.readFile() 函数总是返回 undefined 只有在使用 console.log(data) 时它才显示值。下面的例子

```
 var content
    function myReadFile(filepath){
    fs.readFile(filepath,'utf8', function read(err, data) {
    if (err) {
      throw err;
    }
    content = data
    console.log(content); // Only this part of it returns the  value 
                          // not the content variable itself 
    })
    return content;
    } 
```

# google-chrome-extension - 网上商店中的 Chrome 扩展程序说明

> ID：14309085
> 
> 赞同：5
> 
> 时间：2013-01-13T22:44:15.887
> 
> 标签：google-chrome-extension

关于 chrome 扩展的描述，我有些不明白。[这里](https://developer.chrome.com/extensions/manifest.html#description)
提到，清单中的描述应该只包含少于 32 个字符的纯字符串，但我希望像 Chrome Web Store 上的任何人一样对我的扩展有更长的描述。所以我在仪表板上提供了更长的描述，但我仍然可以在网上商店看到简短的描述。似乎从未使用过我在仪表板页面上设置的描述。

1）谁能告诉我如何为我的扩展设置一个长描述？

第二个问题是我想将该描述国际化，到目前为止我只对清单文件中的描述集使用 i18n 机制。

2) 假设我能够设置显示在 Chrome Web Store 上的长描述，我怎样才能使它适用于不同的语言？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T11:02:26.107

如前所述，长描述是 Webstore 列表的一部分。

请查看本指南，为您的项目[应用 i18n](https://developer.chrome.com/webstore/i18n)。

具体来说，只要您的网店商品支持 i18n，[就可以](https://developer.chrome.com/webstore/i18n#longDescription)从“编辑商品”页面编辑所有支持语言的详细描述。您将在顶部看到一个选择器：

![语言环境选择](../Images/d3438193c27c9da654bfa08d5df3febe.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-08T06:49:27.010

发布扩展时输入长描述，而不是在清单中。

# html - 是否可以创建多个输入选择器

> ID：14309088
> 
> 赞同：1
> 
> 时间：2013-01-13T22:44:39.260
> 
> 标签：html

如何`input type="text"`使用`<select></select>`选项创建。换句话说，我希望有一个可以输入文本的字段，但如果我愿意，我可以从所有值的下拉列表中选择选项，就像使用`select`标签一样。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:56:01.630

如果您想允许使用建议/预定义选项进行自由文本输入，那么我鼓励您查看 HTML5 datalist 元素（请参阅[https://developer.mozilla.org/en-US/docs/HTML/Element/ datalist](https://developer.mozilla.org/en-US/docs/HTML/Element/datalist) ) 正是为此目的而设计的。

由于浏览器对此的支持仅限于较新版本的浏览器（在 Safari、iOS 或 Android 中根本不可用），您可能希望使用 JQuery UI 自动完成之类的东西来填充它（参见[http://jqueryui.com/自动完成/](http://jqueryui.com/autocomplete/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:46:32.477

不是作为内置的 html 控件，不是。您需要使用输入字段和包含下拉值的另一个元素（例如 div 或列表）创建一个，并使用 javascript 将组件部分粘合在一起。谷歌周围有很多关于如何做到这一点的教程。

# c# - C# ASP.NET 单点登录实现

> ID：14309090
> 
> 赞同：86
> 
> 时间：2013-01-13T22:44:52.260
> 
> 标签：c#, asp.net, single-sign-on

作为我们下一个版本的一部分，我的任务是为我们的客户实施单点登录。流程存在如下：

1.  用户使用学校提供给他/她的学生ID/密码登录他们学校的主要门户系统。
2.  用户点击我公司产品的链接。
3.  用户会被自动带到仪表板页面，就像他们刚刚通过我们网站上的登录表单登录一样。

因此，有两种机制可以让用户通过我们的网站进行身份验证：

1.  来到我们产品的主页，并使用我们存储在本地系统中的电子邮件/密码登录。
2.  使用学生已经使用学生 ID 和密码登录学校主系统的单点登录。

如果我们的产品实现是在 ASP.NET 中（而不是 Java/Ruby），我们应该使用 CAS、JOSSO 还是其他第三方单点登录产品？或者，对于我们作为 .NET 公司的我们来说，是否有一些可用于 .NET 环境的东西？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-13T23:13:47.320

为 .NET 应用程序实现 SSO 有多种选择。

在线查看以下教程：

**单点登录基础**，*2012 年 7 月*

[http://www.codeproject.com/Articles/429166/Basics-of-Single-Sign-on-SSO](http://www.codeproject.com/Articles/429166/Basics-of-Single-Sign-on-SSO)

**GaryMcAllisterOnline：ASP.NET MVC 4、ADFS 2.0 和第 3 方 STS 集成 (IdentityServer2)**，*2013 年 1 月*

[http://garymcallisteronline.blogspot.com/2013/01/aspnet-mvc-4-adfs-20-and-3rd-party-sts.html](http://garymcallisteronline.blogspot.com/2013/01/aspnet-mvc-4-adfs-20-and-3rd-party-sts.html)

第一个使用 ASP.NET Web 窗体，而第二个使用 ASP.NET MVC4。

如果您的要求允许您使用第三方解决方案，也可以考虑使用 OpenID。**有一个名为DotNetOpenAuth**的开源库。

有关详细信息，请阅读 MSDN 博客文章[使用 Universal Providers 将 OpenAuth/OpenID 与您现有的 ASP.NET 应用程序集成](https://devblogs.microsoft.com/aspnet/integrate-openauthopenid-with-your-existing-asp-net-application-using-universal-providers/)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-19T15:02:08.433

我迟到了，但对于选项 #1，我会选择 [IdentityServer3](https://github.com/IdentityServer/IdentityServer3) (.NET 4.6 或更低版本) 或[IdentityServer4](https://github.com/IdentityServer/IdentityServer4) (与[Core](https://docs.asp.net/en/latest/intro.html)兼容)。

您可以在应用程序中重用现有的用户存储并将其插入 IdentityServer 的用户存储。然后客户端必须指向您的 IdentityServer 作为开放 id 提供者。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-01-23T17:17:14.047

有几个开箱即用的 SSO 支持的身份提供程序，还有一些第三方**服务。

*** 第三方服务的唯一问题是他们可能会按用户/月收费，这可能非常昂贵。*

一些可用的工具和用于 .NET 的 API 包括：

*   [授权0](https://auth0.com/)
*   [IdentityServer](https://www.identityserver.com/upcoming-products)的 IdentityExpress （带有管理 UI）
*   [集中身份服务](https://www.centrify.com)
*   [Okta 身份 (SAML 2.0)](https://www.okta.com)
*   [OneLogin](https://www.onelogin.com/)

如果您决定使用您的实现，您可以使用以下按编程语言分类的框架。

**C＃：**

*   IdentityServer3（OAuth/OpenID 协议，**OWIN/Katana**）
*   IdentityServer4（OAuth/OpenID 协议，**ASP.NET Core**）
*   Okta 的 OAuth 2.0

**JavaScript：**

*   护照-openidconnect (node.js)
*   oidc 提供程序 (node.js)
*   openid 客户端（node.js）

**Python：**

*   pyoidc
*   Django OIDC 提供者

我会使用[Auth0](https://auth0.com/)作为服务，因为它对前 7000 名用户免费，支持多种语言，而且不需要做太多事情。但是，如果您需要更健壮、管理自己和更便宜的解决方案，我会配置 IdentityServer4 和 ASP.NET Core 应用程序，并根据需要添加身份验证提供程序。

Auth0 和 IdentityServer4 解决方案都使用**OAuth/OpenID**协议，还支持 WS-Federation 和 SAML 2.0 集成。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-16T18:18:57.867

[免责声明：我是贡献者之一]

我们构建了一个非常简单的免费/开源组件，为 ASP.NET 应用程序添加了 SAML 支持[https://github.com/jitbit/AspNetSaml](https://github.com/jitbit/AspNetSaml)

基本上它只是一个简短的 C# 文件，您可以将其放入项目中（或通过 Nuget 安装）并将其与您的应用程序一起使用

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-01T08:59:27.147

UltimateSAML SSO 是符合 OASIS SAML v1.x 和 v2.0 规范的 .NET 工具包。它提供了一种优雅而简单的方法，可以为您的 ASP.NET、ASP.NET MVC、ASP.NET Core、桌面和服务应用程序添加对单点登录和单点注销 SAML 的支持。轻量级库可帮助您使用单个凭据条目提供对云和 Intranet 网站的 SSO 访问。

[详细的 UltimateSAML SSO 审查可以在这里找到](http://www.thedownloadplanet.com/reviews/review-saml-single-sign-on-for-asp-net/)

# c - 打印部分字符数组......有点扭曲

> ID：14309093
> 
> 赞同：1
> 
> 时间：2013-01-13T22:45:04.257
> 
> 标签：c, string, printf, arrays

所以我知道有很多关于在 C 中只打印 char 数组段的问题，我已经阅读了它们，虽然我的问题本质上是相似的，但我的问题有一个小转折。鉴于下面的代码，我如何只打印出`fmt`数组的前四个字符？我不允许更改`fmt`，因此我必须使用`VAL`来指定我只想打印值、新行和一个空格。

```
#define VAL 4
int main() {
   char fmt[10] = "%d\n   ";
   int value = 1;
   printf(fmt, value);
} 
```

编辑：

这只是我代码的一小部分，因为我觉得这就是所有必要的。如果需要更多，我将提供我的其余代码。

编辑2：

限制：没有新变量&必须使用 VAL 来指定要打印多少 fmt 数组。

EDIT3（完整问题）：

填写程序中缺少的部分，不添加任何变量声明。要求用户选择他/她想要如何打印输入的整数值。（如果您不了解它们，请查找 printf 的整数格式说明符。）使用指定的格式说明符字母打印之前输入的整数，然后返回，然后再次提示输入另一个格式字母（尽管不是新整数）。低于复杂性限制是挑战的主要部分。灵活选择哪种类型的循环，以及如何读取格式说明符字符。另外，请注意，如果格式字符串中的 %c 之前有空格，则 scanf 在读取字符时会跳过空格。并且，该 VAL 定义有一个重要用途，包括消除输出中的虚假空白。最后，甚至不要*考虑*使用大开关或 if-else 块来执行此操作。

```
#include <stdio.h>
#define VAL 4  // You might want this

int main() {
   char fmt[10] = "%d\n   "; // Quickly initializes fmt array 
   int value;

   printf("Enter an integer: ");
   scanf("%d", &value);
   //from here below is my code, above code is pre-provided
   printf("Enter a format specifier (x, X, c, d, i, o, or q to quit): ");
   scanf(" %c", &fmt[1]);

   while (fmt[1] != 'q') {
      printf("%4s", fmt, value);
      printf("Enter a format specifier (x, X, c, d, i, o, or q to quit): ");
      scanf(" %c", &fmt[1]);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:46:46.787

> 我如何只打印出我的 fmt 数组的前四个字符

怎么样：

```
printf("%4s", fmt); 
```

> 它不起作用，因为我需要变量值来告诉 fmt 中的 %d 要打印什么

选项：

*   `snprintf`使用长度打印到单独的字符串 ( )`4`
*   处理您的号码，直到它包含适当的位数，然后打印

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T22:53:50.433

添加到 cnicutars 非常好的答案，我只想指出，如果数组不是 const，你可以改变它：

```
char saved = fmt[4];
fmt[4] = '\0';
printf (fmt, value);
fmt[4] = saved; 
```

**编辑**

> 正如我在原始问题中指定的那样，无法更改数组。

是的，好吧...我误读并认为原始的 const 格式字符串不能更改。尽管如此，我认为这些信息可能对其他人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:11:06.920

从输入读取值后，打印可能是：

```
printf("%.*s", VAL, fmt, value); 
```

# javascript - 每次刷新只运行一个 jQuery 事件

> ID：14309094
> 
> 赞同：0
> 
> 时间：2013-01-13T22:45:08.100
> 
> 标签：javascript, jquery

每次刷新页面只运行一个 jQuery 事件。我在做什么错了？

```
$("#contact_link_email").on("click",function(){
  $("#contact-form").replaceWith('<h2>Email heading</h2>');
});

$("#contact_link_facebook").on("click",function(){
  $("#contact-form").replaceWith('<h2>Facebook heading</h2>');
});

$("#contact_link_twitter").click(function(){
  $("#contact-form").replaceWith('<h2>Twitter heading</h2>');
});

$("#contact_link_gplus").click(function(){
  $("#contact-form").replaceWith('<h2>GPlus heading</h2>');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:47:36.173

一旦其中一个事件运行，`$("#contact-form")`就不会引用任何内容。如果您想用某些东西替换它，请尝试使某些东西具有相同的`id`.

# php - 多个服务的 MySQL 数据库设置

> ID：14309096
> 
> 赞同：0
> 
> 时间：2013-01-13T22:45:13.327
> 
> 标签：php, mysql, sql, database, database-design

我正在开展一项新业务，提供大约 30 种不同的服务。我正在尝试找出使用 MySQL 和 PHP 对所有 30 项服务进行“轻松访问”的最佳方式。在这一点上，我正在设置我的数据库，我想确保我朝着正确的方向前进。这是我到目前为止提出的概念：

```
Create Table customers (customer_id)
Create Table orders (order_id, customer_id, product_id)
Create Table logo_design (logo_id, customer_id, order_id, product_id)
Create Table web_design (web_id, customer_id, order_id, product_id) 
```

所以我的想法是，对于每个新客户，他们将被分配一个唯一的客户 ID。对于他们购买的每项服务，此 ID 都会保留在他们身边。我遇到困难的地方是说客户订购了 3 种不同的服务。如何显示他们购买的 3 项服务，而无需进行一百万次不同的循环或验证检查？真正连接所有表格以便于访问的最佳方式是什么？

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:48:23.790

关系数据库通常在客户表和服务表之间有一个表。称它为 customer_ordered_services 也许

它只是掌握客户和他们想要的服务的关键

在您的示例中，此中间表中将有三行来反映他们想要的三种服务

```
customerId 1, serviceId 1
customerId 1, serviceId 2
customerId 1, serviceId 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:50:00.357

在我看来，您希望加入表格并按某个客户 ID 进行过滤。看看这个例子让你开始：

```
SELECT *
FROM   customers AS c
       INNER JOIN orders AS o
           ON c.customer_id = o.customer_id
WHERE c.customer_id = CustomerIDGoesHere 
```

您可以加入任意数量的表

```
FROM table1
     JOIN table2
         ON table1.column = table2.column
     JOIN table3
         ON table2.column = table3.column
     JOIN table4
         ON table1.column = table4.column 
```

# php - 正则表达式，匹配 php 中的任何内容 (\r|\n|.)*

> ID：14309103
> 
> 赞同：0
> 
> 时间：2013-01-13T22:45:32.467
> 
> 标签：php, regex

我有一个包含各种文本段的大量字符串。通过这些字符串的部分方式有两个等号' `==`'。

`{{Description`如果在等号之后，我想匹配' '。

我计划的方式是`'/==(\r|\n|.)*\{\{Description/i'`

但这会在运行正则表达式时导致 SEGFAULT。

如果没有，我还能如何构建一个正则表达式来匹配上述内容`(\r|\n|.)*`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T22:47:47.910

`.*`如果您添加修饰符，它将起作用`s`。此外，`{`具有特殊含义（引入数字量词），因此应该对其进行转义。最后，`*`大概应该是偷懒了，不然会找LAST的样子`{{Description`

```
/==.*?\{\{Description/is 
```

# node.js - 为什么我的 node.js 应用程序在我没有打开终端时偶尔会挂起？

> ID：14309107
> 
> 赞同：6
> 
> 时间：2013-01-13T22:46:01.967
> 
> 标签：node.js, tmux

我有一个通过 SSH 运行的 nodejs 应用程序：

```
$ tmux
$ node server.js 
```

这将在 tmux 会话中启动我的节点应用程序。

显然，我并没有一直打开 SSH 会话。

我一直在发现，有时我的应用程序可能会处于无法提供任何页面的状态。这可能与应用程序本身有关，或者可能只是断开连接不佳的 SSH 会话。

无论哪种方式，只需登录 SSH，运行：

```
$ tmux attach 
```

将焦点放在窗格上会使所有内容再次响应。

* * *

我认为 node.js 的全部意义在于一切都是非阻塞的——那么这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:47:32.037

当窗格处于复制模式时，*tmux*不会从其 tty 读取。如果某个在 tty 中“运行”的程序继续生成输出，那么操作系统的 tty 缓冲区最终将填满并导致写入进程/线程阻塞。我不知道 Node.js 的内部结构，但它可能不会期望写入 stdout/stderr 会阻塞：这些[`console`函数](http://nodejs.org/api/stdio.html)似乎没有回调，所以它们实际上可能会阻塞。

因此，如果在您的 SSH 连接断开时运行它的窗格处于复制模式，Node.js 很可能最终被阻止。

如果您需要确保非阻塞日志记录，那么您可能希望将您的 stdout 和 stderr 重定向（或 tee）到一个文件并使用类似的东西`less`查看以前的日志（避免*tmux*的复制模式，因为它可能会导致阻塞）。

也许是这样的：

```
# Redirect stdout/stderr to a file, running Node.js in the background.
# Start a "less +F" on the log so that we immediately have a "tail" running.
node app.js >>app.log 2>&1 & less +F app.log 
```

或者

```
# This pane will act as a 'tail -f', but do not use copy-mode here.
# Instead, run e.g. 'less app.log' in another pane to review prior logs.
node app.js 2>&1 | tee -a app.log 
```

或者，如果您使用的是日志库，它可能有一些东西可以用来自动写入文件。

# c++ - 用于运动检测的opencv代码中的错误

> ID：14309111
> 
> 赞同：2
> 
> 时间：2013-01-13T22:46:21.827
> 
> 标签：c++, visual-studio-2010, opencv, machine-learning, computer-vision

我正在寻找人体运动跟踪的实现，还讨论了使用差分分析和 lukas kanade 光学方法从多个视频帧中提取的[多个运动对象检测。](http://sundararajana.blogspot.ca/2007/05/motion-detection-using-opencv.html)

我找到了科学论文，发现我们必须使用连接组件[过滤连接组件](http://www.bukisa.com/articles/267697_filtering-connected-components)来进行连续运动跟踪，但我不明白如何进行这个过程。我所需要的只是[骨骼](http://www.inf.u-szeged.hu/~palagyi/skel/skel.html)化轨迹和人类步态运动的坐标。

我在 Opencv 和 C++ 中工作，但在我的情况下，opencv 中用于对象检测的文档还不够。我来自医学背景，需要这是儿科医生项目的一部分。

我找到了这段代码[运动检测](http://sundararajana.blogspot.ca/2007/05/motion-detection-using-opencv.html)并试图执行它（不知道它是否检测并跟踪运动）。但是，它返回了这些错误，我很困惑，因为这些错误是微不足道的，其他评论提到它们能够运行此代码。但我无法减轻这些错误，也无法理解它们发生的原因。我正在使用 OpenCv2.3，以下是错误

1.  无法打开源文件 stdafx.h
2.  警告 C4996：“fopen”：此函数或变量可能不安全。考虑改用 fopen_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。
3.  错误 C2086：“CvSize imgSize”：重新定义
4.  错误 C2065：“临时”：未声明的标识符
5.  错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
    *   错误 C2365：“cvReleaseImage”：重新定义；以前的定义是'function' 1> c:\opencv2.3\opencv\build\include\opencv2\core\core_c.h(87) ：见'cvReleaseImage'的声明
6.  错误 C2065：“差异”：未声明的标识符
7.  错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
8.  错误 C2365：“cvReleaseImage”：重新定义；以前的定义是'function' 1> c:\opencv2.3\opencv\build\include\opencv2\core\core_c.h(87) ：见'cvReleaseImage'的声明
9.  错误 C2065：“greyImage”：未声明的标识符
10.  错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
11.  错误 C2365：“cvReleaseImage”：重新定义；以前的定义是“功能”
12.  \opencv2.3\opencv\build\include\opencv2\core\core_c.h(87) ：请参阅“cvReleaseImage”错误 C2065 的声明：“movingAverage”：未声明的标识符 - 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int -error C2365: 'cvReleaseImage' : redefinition; 之前的定义是 'function' -1> c:\opencv2.3\opencv\build\include\opencv2\core\core_c.h(87) ：参见 'cvReleaseImage' 的声明 -error C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int -error C2365: 'cvDestroyWindow' : redefinition; 以前的定义是“功能”
13.  c:\opencv2.3\opencv\build\include\opencv2\highgui\highgui_c.h(136) : 见 'cvDestroyWindow' 的声明
14.  错误 C2440：“正在初始化”：无法从“const char [10]”转换为“int”-1> 没有可以进行此转换的上下文-错误 C2065：“输入”：未声明的标识符-错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
15.  错误 C2365：“cvReleaseCapture”：重新定义；之前的定义是'function' -1> c:\opencv2.3\opencv\build\include\opencv2\highgui\highgui_c.h(311) : 见'cvReleaseCapture' 的声明 -error C2065: 'outputMovie' : undeclared identifier
16.  错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int -error C2365: 'cvReleaseVideoWriter' : redefinition; 以前的定义是 'function' -1 c:\opencv2.3\opencv\build\include\opencv2\highgui\highgui_c.h(436) ：参见 'cvReleaseVideoWriter' 的声明 -error C2059：语法错误：'return' == ======== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

**代码**

```
// MotionDetection.cpp : Defines the entry point for the console application.
//

// Contourold.cpp : Defines the entry point for the console application.
//
#include "stdafx.h"

#include "iostream"
#include "stdlib.h"

// OpenCV includes.
#include "cv.h"
#include "highgui.h"
#pragma comment(lib,"cv.lib")
#pragma comment(lib,"cxcore.lib")
#pragma comment(lib,"highgui.lib")

using namespace std;

int main(int argc, char* argv[])
{

//Create a new window.
cvNamedWindow("My Window", CV_WINDOW_AUTOSIZE);

//Create a new movie capture object.
CvCapture *input;

//Assign the movie to capture.
//inputMovie = cvCaptureFromAVI("vinoth.avi");

char *fileName = "E:\\highway.avi";
//char *fileName = "D:\\Profile\\AVI\\cardriving.wmv";
input = cvCaptureFromFile(fileName);
//if (!input)

//cout << "Can't open file" << fileName < ;

//Size of the image.
CvSize imgSize;
IplImage* frame = cvQueryFrame(input);
CvSize imgSize = cvGetSize(frame);

//Images to use in the program.
IplImage* greyImage = cvCreateImage( imgSize, IPL_DEPTH_8U, 1);
IplImage* colourImage;
IplImage* movingAverage = cvCreateImage( imgSize, IPL_DEPTH_32F, 3);
IplImage* difference;
IplImage* temp;
IplImage* motionHistory = cvCreateImage( imgSize, IPL_DEPTH_8U, 3);

//Rectangle to use to put around the people.
CvRect bndRect = cvRect(0,0,0,0);

//Points for the edges of the rectangle.
CvPoint pt1, pt2;

//Create a font object.
CvFont font;

//Create video to output to.
char* outFilename = argc==2 ? argv[1] : "E:\\outputMovie.avi";
CvVideoWriter* outputMovie = cvCreateVideoWriter(outFilename,
CV_FOURCC('F', 'L', 'V', 'I'), 29.97, cvSize(720, 576));

//Capture the movie frame by frame.
int prevX = 0;
int numPeople = 0;

//Buffer to save the number of people when converting the integer
//to a string.
char wow[65];

//The midpoint X position of the rectangle surrounding the moving objects.
int avgX = 0;

//Indicates whether this is the first time in the loop of frames.
bool first = true;

//Indicates the contour which was closest to the left boundary before the object
//entered the region between the buildings.
int closestToLeft = 0;
//Same as above, but for the right.
int closestToRight = 320;

//Keep processing frames...
for(;;)
{
//Get a frame from the input video.
colourImage = cvQueryFrame(input);

//If there are no more frames, jump out of the for.
if( !colourImage )
{
break;
}

//If this is the first time, initialize the images.
if(first)
{
difference = cvCloneImage(colourImage);
temp = cvCloneImage(colourImage);
cvConvertScale(colourImage, movingAverage, 1.0, 0.0);
first = false;
}
//else, make a running average of the motion.
else
{
cvRunningAvg(colourImage, movingAverage, 0.020, NULL);
}

//Convert the scale of the moving average.
cvConvertScale(movingAverage,temp, 1.0, 0.0);

//Minus the current frame from the moving average.
cvAbsDiff(colourImage,temp,difference);

//Convert the image to grayscale.
cvCvtColor(difference,greyImage,CV_RGB2GRAY);

//Convert the image to black and white.
cvThreshold(greyImage, greyImage, 70, 255, CV_THRESH_BINARY);

//Dilate and erode to get people blobs
cvDilate(greyImage, greyImage, 0, 18);
cvErode(greyImage, greyImage, 0, 10);

//Find the contours of the moving images in the frame.
CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* contour = 0;
cvFindContours( greyImage, storage, &contour, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE );

//Process each moving contour in the current frame...
for( ; contour != 0; contour = contour->h_next )
{
//Get a bounding rectangle around the moving object.
bndRect = cvBoundingRect(contour, 0);

pt1.x = bndRect.x;
pt1.y = bndRect.y;
pt2.x = bndRect.x + bndRect.width;
pt2.y = bndRect.y + bndRect.height;

//Get an average X position of the moving contour.
avgX = (pt1.x + pt2.x) / 2;

//If the contour is within the edges of the building...
if(avgX > 90 && avgX < 250)
{
//If the the previous contour was within 2 of the left boundary...
if(closestToLeft >= 88 && closestToLeft <= 90)
{
//If the current X position is greater than the previous...
if(avgX > prevX)
{
//Increase the number of people.
numPeople++;

//Reset the closest object to the left indicator.
closestToLeft = 0;
}
}
//else if the previous contour was within 2 of the right boundary...
else if(closestToRight >= 250 && closestToRight <= 252)
{
//If the current X position is less than the previous...
if(avgX < prevX)
{
//Increase the number of people.
numPeople++;

//Reset the closest object to the right counter.
closestToRight = 320;
}
}

//Draw the bounding rectangle around the moving object.
cvRectangle(colourImage, pt1, pt2, CV_RGB(255,0,0), 1);
}

//If the current object is closer to the left boundary but still not across
//it, then change the closest to the left counter to this value.
if(avgX > closestToLeft && avgX <= 90)
{
closestToLeft = avgX;
}

//If the current object is closer to the right boundary but still not across
//it, then change the closest to the right counter to this value.
if(avgX < closestToRight && avgX >= 250)
{
closestToRight = avgX;
}

//Save the current X value to use as the previous in the next iteration.
prevX = avgX;
}
//Save the current X value to use as the previous in the next iteration.
prevX = avgX;
}

//Write the number of people counted at the top of the output frame.
cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.8, 0.8, 0, 2);
cvPutText(colourImage, _itoa(numPeople, wow, 10), cvPoint(60, 200), &font, cvScalar(0, 0, 300));

//Show the frame.
cvShowImage("My Window", colourImage);

//Wait for the user to see it.
cvWaitKey(10);

//Write the frame to the output movie.
cvWriteFrame(outputMovie, colourImage);
}

// Destroy the image, movies, and window.
cvReleaseImage(&temp);
cvReleaseImage(&difference);
cvReleaseImage(&greyImage);
cvReleaseImage(&movingAverage);
cvDestroyWindow("My Window");

cvReleaseCapture(&input);
cvReleaseVideoWriter(&outputMovie);

return 0;

} 
```

*   请帮助解决错误和问题。
*   如何进行可能通过骨架化方法返回轨迹坐标的运动（人类）跟踪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T01:49:35.533

就我尝试编译代码而言，我可以发现大约 3-4 个错误。

1.  你不需要`#include "stdafx.h"`。
2.  `imgSize`你在你使用的那一行重新声明`cvGetSize(frame)`。
3.  最后一个括号不匹配。
4.  您可以检查该函数`_itoa()`，因为它未在代码中声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T02:29:04.070

1.）我想你已经直接从网站上复制了代码（如果我错了，请纠正我..）。但是，由于您使用的是 OpenCV 2.3，因此大多数 API 都位于不同的模块中。您应该拥有的以下内容是...

```
#include <opencv/core/core.hpp>
#include <opencv/highgui/highgui.hpp>
#include <opencv/imgproc/imgproc.hpp> 
```

和各自的图书馆。

2.) 对于过滤连接的组件，您可以使用[cvblob 库](http://code.google.com/p/cvblob/)。我认为 OpenCV 提供的旧 Blob 库是使用 VC 6 构建的，所以可能是需要的`stdafx.h`

3.) 慢慢检查代码是否有一些语法和重新声明错误。

**编辑代码**

```
#include <iostream>
#include "stdlib.h"

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include "cv.h"
#include "highgui.h"

using namespace std;
using namespace cv;

int main(int argc, char* argv[])
{
    cvNamedWindow("My Window", CV_WINDOW_AUTOSIZE);
    CvCapture *input;

    //char *fileName = "E:\\highway.avi";
    input = cvCaptureFromCAM(0);

    //input = cvCaptureFromFile(fileName);

    CvSize imgSize;
    IplImage* frame = cvQueryFrame(input);
    imgSize = cvGetSize(frame);

    IplImage* greyImage = cvCreateImage( imgSize, IPL_DEPTH_8U, 1);
    IplImage* colourImage;
    IplImage* movingAverage = cvCreateImage( imgSize, IPL_DEPTH_32F, 3);
    IplImage* difference;
    IplImage* temp;
    IplImage* motionHistory = cvCreateImage( imgSize, IPL_DEPTH_8U, 3);

    CvRect bndRect = cvRect(0,0,0,0);

    CvPoint pt1, pt2;

    CvFont font;

    char* outFilename = argc==2 ? argv[1] : "E:\\outputMovie.avi";
    CvVideoWriter* outputMovie = cvCreateVideoWriter(outFilename,
    CV_FOURCC('F', 'L', 'V', 'I'), 29.97, cvSize(720, 576));

    int prevX = 0;
    int numPeople = 0;

    char wow[65];

    int avgX = 0;

    bool first = true;

    int closestToLeft = 0;
    int closestToRight = 320;

    for(;;)
        {
        colourImage = cvQueryFrame(input);

        if( !colourImage )
            {
            break;
            }
        if(first)
            {
            difference = cvCloneImage(colourImage);
            temp = cvCloneImage(colourImage);
            cvConvertScale(colourImage, movingAverage, 1.0, 0.0);
            first = false;
            }
        else

            {
            cvRunningAvg(colourImage, movingAverage, 0.020, NULL);
            }

        cvConvertScale(movingAverage,temp, 1.0, 0.0);

        cvAbsDiff(colourImage,temp,difference);

        cvCvtColor(difference,greyImage,CV_RGB2GRAY);

        cvThreshold(greyImage, greyImage, 70, 255, CV_THRESH_BINARY);

        cvDilate(greyImage, greyImage, 0, 18);
        cvErode(greyImage, greyImage, 0, 10);

        CvMemStorage* storage = cvCreateMemStorage(0);
        CvSeq* contour = 0;

        cvFindContours( greyImage, storage, &contour, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE );

        for( ; contour != 0; contour = contour->h_next )
        {
            bndRect = cvBoundingRect(contour, 0);
            pt1.x = bndRect.x;
            pt1.y = bndRect.y;
            pt2.x = bndRect.x + bndRect.width;
            pt2.y = bndRect.y + bndRect.height;

            avgX = (pt1.x + pt2.x) / 2;

        if(avgX > 90 && avgX < 250)
        {
            if(closestToLeft >= 88 && closestToLeft <= 90)
                {
                if(avgX > prevX)
                    {
                    numPeople++;
                    closestToLeft = 0;
                    }
                }
            else if(closestToRight >= 250 && closestToRight <= 252)
                {
                if(avgX < prevX)
                    {
                    numPeople++;
                    closestToRight = 320;
                    }
                }
            cvRectangle(colourImage, pt1, pt2, CV_RGB(255,0,0), 1);
         }

        if(avgX > closestToLeft && avgX <= 90)
            {
            closestToLeft = avgX;
            }

        if(avgX < closestToRight && avgX >= 250)
            {
            closestToRight = avgX;
            }

        prevX = avgX;
        prevX = avgX;

        }

        cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.8, 0.8, 0, 2);
        cvPutText(colourImage, _itoa(numPeople, wow, 10), cvPoint(60, 200), &font, cvScalar(0, 0, 300));
        cvShowImage("My Window", colourImage);

        cvWaitKey(10);
        cvWriteFrame(outputMovie, colourImage);

    }

    cvReleaseImage(&temp);
    cvReleaseImage(&difference);
    cvReleaseImage(&greyImage);
    cvReleaseImage(&movingAverage);
    cvDestroyWindow("My Window");

    cvReleaseCapture(&input);
    cvReleaseVideoWriter(&outputMovie);

return 0;

} 
```

它至少可以正确编译...它有一些运行时错误...我现在没有调试器来跟踪它...尝试一下...我也在尝试它..

# android - Android：Asynctask 的 doInBackground 方法在长时间延迟后被调用

> ID：14309123
> 
> 赞同：11
> 
> 时间：2013-01-13T22:47:36.443
> 
> 标签：android, android-asynctask

我一直在尝试从 url 下载视频，我已经在 asynctask 的 doInBackground() 中实现了我的下载方法，但是 doInBackground 方法需要很长时间才能被调用（5-10 分钟），我正在使用另一个 asynctask在我被指示下载视频活动的活动中下载图像，并且工作正常。我的 onPreExecute 方法正在按时调用，但之后 doInBackground 需要将近 5-7 分钟才能启动。我将非常感谢提供的任何帮助。这是我的代码

```
btnDownloadLQ.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) 
            {
                try
                {
                    new DownloadVideoTask().execute(videoURL);

                }
                catch(Exception e)
                {
                    Log.e("Vidit_TAG","I got an error",e);
                }
            }
        });

private class DownloadVideoTask extends AsyncTask<String, String, String> 
    {

        @SuppressWarnings("deprecation")
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(DIALOG_DOWNLOAD_PROGRESS);
        }

        protected String doInBackground(String... urls) 
        {
            int i=0;
            try
            {
                URL url = new URL (urls[0]);
                InputStream input = url.openStream();

                try {
                    //The sdcard directory e.g. '/sdcard' can be used directly, or 
                    //more safely abstracted with getExternalStorageDirectory()
                    String root = Environment.getExternalStorageDirectory().toString();
                    File storagePath = new File(root + "/vidit");    
                    storagePath.mkdirs();
                    OutputStream output = new FileOutputStream (new File(storagePath,title+".mp4"));
                    try 
                    {
                        byte[] buffer = new byte[1024];
                        int bytesRead = 0;
                        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) 
                        {
                            output.write(buffer, 0, bytesRead);
                        }
                    }
                    catch(Exception e)
                    {   
                        Log.e("Vidit_TAG","I got an error",e);
                    }
                    finally 
                    {
                        output.close();
                    }
                }
                catch(Exception e)
                {
                    Log.e("Vidit_TAG","I got an error",e);
                }
                finally 
                {
                    input.close();
                    //tvTitle.setText("Completed");
                }

            }
            catch(Exception e)
            {
                Log.e("Vidit_TAG","I got an error",e);
            }

            return null;
        }

        @SuppressWarnings("deprecation")
        @Override
        protected void onPostExecute(String unused) 
        {
            dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
            alertbox(title);
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T00:23:33.137

确保没有其他 asyncTasks 正在运行，如果需要，可以取消它们。

在大多数 android 版本上，asyncTask 在单个后台线程上运行，并且应该只运行小任务。

如果任务可能花费太长时间（或有多个任务），请考虑取消它们或使用替代方法（如使用[API 上描述的](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)executeOnExecutor ）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-15T09:14:55.790

迟到的答案，但肯定有帮助

如果您使用最低 API 级别 >=11 试试这个

```
 //new YourAsyncTask().execute(); -- replace this with following line
 new YourAsyncTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); //use this 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:53:27.973

我面临同样的问题，尽管它没有每次都发生。

您可以使用传统线程作为替代方案并自己处理 UI 更改

# jquery - 使用 Jquery 将文本文件加载到 Div

> ID：14309130
> 
> 赞同：0
> 
> 时间：2013-01-13T22:48:30.920
> 
> 标签：jquery, text, hyperlink

我创建了这个脚本：

```
 <script>function txtload () {$(".divbody").load("maintxt/information1.txt");}</script> 
```

我正在使用这样的链接：

```
<a href="#" onclick="ChangeImage(), txtload ()">Information 1</a> 
```

我需要更改脚本以创建多个 href 为每个链接加载不同的文本：

```
<a href="#" onclick="ChangeImage(), txtload ()">Information 1</a>
<a href="#" onclick="ChangeImage(), txtload ()">Information 2</a>
<a href="#" onclick="ChangeImage(), txtload ()">Information 3</a>
<a href="#" onclick="ChangeImage(), txtload ()">Information 4</a> 
```

你能帮我吗？我尝试从脚本中删除“”并将其放在 href 本身中......不知道我在做什么......

认为这应该有效。请给我你的意见：

```
<script>function txtload () {$(".divbody").load("maintxt/" + filename);}</script>

<a href="#" onclick="ChangeImage(), txtload ("information1.txt")">Information 1</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:54:09.823

你可以使用一个参数

```
<script>
    function txtload ( url ) {
        $(".divbody").load( url );
    }
</script> 
```

然后在你的 html 中：

```
<a href="#" onclick="txtload('url to your text file')">Information 1</a> 
```

或者，如果您真的希望在您的 href 中使用它：

```
<a href="your url" onclick="txtload(this.href); return false;">Information 1</a> 
```

在您的代码中还有一个`ChangeImage`您没有在任何地方解释过的函数。我只是在我的例子中忽略了它。

另一种实际上更好的方法是这个脚本：

```
$("a.some_class_for_these_links").on("click", function (e) {
    e.preventDefault();
    $(".divbody").load( this.href );
}); 
```

然后这个html

```
<a href="your url" class="some_class_for_these_links">Information 1</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:56:45.243

如果你打算使用 jQuery，那么使用内联脚本是没有意义的`onclick`；

为链接提供一个通用类，您可以使用`href`来分配要加载的文件。

```
<a href="maintxt/information1.txt" class="load_link">Information 1</a> 
```

然后在 jQuery 中：

```
$(function(){

   $('.load_link').click(function(){
       ChangeImage();
       /* "this" is actual link clicked*/
       $(".divbody").load(this.href);
        /* prevent browser opening new page*/
        return false;

  })
}) 
```

如果用户禁用了 javascript，他们仍然可以访问数据，因为它在`href`并且单击链接将允许他们查看文本文件。搜索引擎机器人也是如此

# xcode - 与多个包共享框架的单个副本

> ID：14309131
> 
> 赞同：3
> 
> 时间：2013-01-13T22:48:39.937
> 
> 标签：xcode, cocoa, frameworks, xpc

我有一个在我的应用程序中使用的框架，以及包含在应用程序包中的一些 XPC 服务。如何将所有捆绑包链接到应用程序的 Frameworks 文件夹中包含的框架的单个副本（而不是将框架复制到每个捆绑包）？所有的服务和应用程序都是沙盒的，所以我不确定 XPC 服务是否能够访问主应用程序包中的框架，因为它会在沙盒之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:03:29.980

你看过`@rpath`吗？这一切都假设您可以更改框架的构建设置（需要针对 OS X 10.5 或更高版本）。

1.  设置框架安装路径和名称。
    *   `INSTALL_PATH = @rpath`
    *   `LD_DYLIB_INSTALL_NAME = @rpath/$(PRODUCT_NAME).$(WRAPPER_EXTENSION)/$(PRODUCT_NAME)`
2.  设置应用程序和 XPC 的运行路径搜索路径，以便包含框架。
    *   对于应用程序：`LD_RUNPATH_SEARCH_PATHS = @loader_path/../Frameworks/`
    *   对于 XPC 服务：`LD_RUNPATH_SEARCH_PATHS = @loader_path/../../../../Frameworks`
    *   如果需要，可以将运行路径搜索路径设置为多个值。

有关更多信息，`@rpath`请参阅 Dave Dribin 的帖子“<a href="http://www.dribin.org/dave/blog/archives/2009/11/15/rpath/" rel="nofollow noreferrer">使用@rpath：为什么以及如何”和 Mike Ash 的周五问答“<a href="http://www.mikeash.com/pyblog/friday-qa-2009-11-06-linking-and-install-names.html" rel="nofollow noreferrer">链接和安装名称”。

*编辑：我自己在几个项目中使用过它并且它有效。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T01:34:29.553

这可以使用`install_name_tool`. 例子：

```
install_name_tool -change @executable_path/../Frameworks/MyFramework.framework/Versions/A/MyFramework @executable_path/../../../../Frameworks/MyFramework.framework/Versions/A/MyFramework "$BUILT_PRODUCTS_DIR/MyApp.app/Contents/XPCServices/com.me.MyApp.SomeXPC.xpc/Contents/MacOS/com.me.MyApp.SomeXPC" 
```

更多信息[在这里](http://osiris.laya.com/coding/dylib_linking.html)。

# actionscript-3 - 有什么方法可以根据它在舞台上的 x 位置来引用子对象的 x 位置？

> ID：14309132
> 
> 赞同：0
> 
> 时间：2013-01-13T22:48:43.880
> 
> 标签：actionscript-3

我目前正在开发一个动作脚本游戏，并且正在尝试设置阶段边界；然而，玩家对象是舞台对象的子对象；当引用 player.x 时，我得到它在关卡对象本身内的 x 位置。本质上，我想做的是；

```
if (player.x < stage.x.0) {
player.x = stage.x.0
} 
```

有什么简单的方法可以做到这一点，或者我应该简单地确保播放器对象始终在舞台上，而不是作为子对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:03:28.523

您可以使用[localToGlobal()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)方法将 Point (flash.geom.Point) 从一个对象的坐标转换为舞台坐标。通过要求子对象转换玩家的位置：

```
var playerPosition:Point = new Point(subobject.player.x, subobject.player.y);
var playerPositionOnStage:Point = subobject.localToGlobal(playerPosition); 
```

或者，因为一个新的点在 0 处，默认为 0，通过要求玩家对象本身将其转换为全局坐标：

```
var playerPositionOnStage:Point = subobject.player.localToGlobal(new Point()); 
```

# java - 其他 OS 系统中的 CMD 命令

> ID：14309135
> 
> 赞同：0
> 
> 时间：2013-01-13T22:48:59.343
> 
> 标签：java, linux, windows, command, cmd

> **可能重复：**
> [在 java 程序中执行另一个 jar](https://stackoverflow.com/questions/1320476/execute-another-jar-in-a-java-program)

我正在制作一个从 Java 文档运行并运行 Java 文档的程序。我正在使用 Windows 和

```
Process pr = Runtime.getRuntime().exec(
   "cmd /c start cmd.exe /c \"cd %appdata%\\.gknl && java -jar launcher.jar\""
); 
```

对我来说很好，但在 linux、Mac 等上它不会工作，

有人可以帮我修复其他操作系统吗？

注意：我已经检查了操作系统...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:04:35.407

`cmd.exe`是 Windows shell 可执行文件，您需要使用 Linux/Mac shell 之一：

```
ProcessBuilder pb = new ProcessBuilder(
        "sh", "-c",
        "cd $appdata/.gknl && java -jar launcher.jar");
pb.start(); 
```

如果`launcher.jar`在类路径上，则应该可以从调用应用程序启动主应用程序类，但无需使用`Process/ProcessBuilder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:53:09.433

Linux：

```
Process pr = Runtime.getRuntime().exec(new String[]{"csh","-c","cd " + appdata +"\.gknl &&  java -jar launcher.jar"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T22:56:17.623

在 Linux/Unix 中，您想使用 sh。这将在大多数系统上链接到 bash、zsh 或 csh。

我 95% 确定 sh 也在 Mac 上，但我需要拔掉我的 Raspberry Pi 并将所有东西放回我的 Mac Mini 以进行验证。

# c++ - 将数组传递给 C++ 中的函数

> ID：14309136
> 
> 赞同：82
> 
> 时间：2013-01-13T22:49:01.980
> 
> 标签：c++

```
#include <iostream>
using namespace std;

void printarray (int arg[], int length) {
    for (int n = 0; n < length; n++) {
        cout << arg[n] << " ";
        cout << "\n";
    }
}

int main ()
{
     int firstarray[] = {5, 10, 15};
     int secondarray[] = {2, 4, 6, 8, 10};
     printarray(firstarray, 3);
     printarray(secondarray, 5);

     return 0;
} 
```

此代码有效，但我想了解数组是如何传递的。

当`printarray`从主函数调用该函数时，将传递数组的名称。数组名是指数组第一个元素的地址。这怎么等同`int arg[]`？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-13T22:49:59.717

语法

```
int[] 
```

和

```
int[X] // Where X is a compile-time positive integer 
```

完全一样

```
int* 
```

在函数参数列表中时（我省略了可选名称）。

此外，当传递给函数（而不是通过引用传递）时，数组名称衰减为指向第一个元素的指针，因此两者都`int firstarray[3]`衰减`int secondarray[5]`为`int*`s。

当您使用相同的索引时，数组取消引用和使用下标语法（下标语法是`x[y]`）的指针取消引用也会产生相同元素的左值。

这三个规则结合起来使代码合法并按您的期望工作；它只是将指针传递给函数，以及在数组衰减到指针后您无法知道的数组长度。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-13T22:52:58.417

我只想添加这个，当您访问数组的位置时

`arg[n]`

是相同的

`*(arg + n)` than 表示从 de arg 地址开始的 n 的偏移量。

`arg[0]`也会如此`*arg`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-03-10T22:29:42.290

这个问题已经得到解答，但我想我会用更精确的术语和对 C++ 标准的引用添加一个答案。

这里发生了两件事，*数组参数被调整为指针参数*，*数组参数被转换为指针参数*。这是两种完全不同的机制，第一种是对参数实际类型的调整，而另一种是标准转换，它引入了一个指向第一个元素的临时指针。

**对函数声明的调整：**

[dcl.fct#5](http://eel.is/c++draft/dcl.fct#5)：

> 在确定每个参数的类型后，将任何类型为“T 数组”(...) 的参数调整为“指向 T 的指针”。

所以`int arg[]`调整为`int* arg`。

**函数参数的转换：**

[转换数组#1](http://eel.is/c++draft/conv.array#1)

> “NT 数组”或“T 的未知边界数组”类型的左值或右值可以转换为“指向 T 的指针”类型的纯右值。应用临时实现转换。结果是指向数组第一个元素的指针。

所以在 中`printarray(firstarray, 3);`，“3 int 数组”类型的左值`firstarray`被转换为“指向 int 的指针”类型的纯右值（临时），指向第一个元素。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-13T22:51:10.853

`firstarray`并`secondarray`在传递给 . 时转换为指向 int 的指针`printarray()`。

`printarray(int arg[], ...)`相当于`printarray(int *arg, ...)`

但是，这并不特定于 C++。C 具有将数组名称传递给函数的相同规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-24T04:09:25.860

简单的答案是数组总是通过引用传递，而 int arg[] 只是让编译器知道期待一个数组

# database - 博伊斯鳕鱼和寻找候选键

> ID：14309138
> 
> 赞同：1
> 
> 时间：2013-01-13T22:49:28.983
> 
> 标签：database, database-normalization, functional-dependencies, bcnf, candidate

在理解 boyce codd 和找到候选键方面需要绝望的帮助。我在这里找到了一个链接[http://djitz.com/neu-mscs/how-to-find-candidate-keys/](http://djitz.com/neu-mscs/how-to-find-candidate-keys/)我已经理解了大部分但我卡住了

例如

(ABCDEF)

AB → CDE

BCD → A

公元前 → 公元

BD → E

据我从链接中了解的权利，我知道您从左侧找到只有 B 的公共集，从右侧找到没有的公共集

现在我该去哪里？我知道所有候选集都会有 B，但我需要在那之后找到候选集的指导。有人用简单的语言解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:49:09.830

链接的文章写得不是特别好。（这是一个观察，而不是批评。作者的第一语言不是英语。）我会尝试重写算法。这不是*我*告诉你如何做到这一点。这是我对原作者如何告诉你这样做的解释。

1.  识别既不在任何 FD 的左侧也不在右侧的属性。
2.  识别仅位于任何 FD 右侧的属性。
3.  识别仅位于任何 FD 左侧的属性。
4.  结合步骤 1 和 3 中的属性。
5.  计算来自步骤 4 的属性的闭包。如果闭包包含*所有*属性，则来自步骤 4 的属性构成唯一的候选键。（无论有多少个候选键，每个候选键都*必须*包含这些属性。）
6.  识别步骤 4 和步骤 2 中未包含的属性。
7.  计算第 4 步中的属性的闭包*加上*第 6 步中所有可能的属性组合。

因此，对于您发布的 FD，您最终会得到这个。

1.  {F}
2.  {}
3.  {B}
4.  {高炉}
5.  {BF} 的闭包是 {BF}。这还不是所有属性。（但每个候选键*必须*包含 {BF}。）
6.  {ACDE}
7.  计算这些属性集的闭包。
    *   {ABF}
    *   {CBF}
    *   {DBF}
    *   {EBF}
    *   {ACBF}
    *   {ADBF}
    *   {AEBF}
    *   {CDBF}
    *   {CEBF}
    *   {DEBF}
    *   {ACDBF}
    *   {ADEBF}
    *   {CDEBF}

如果我得到了正确的组合，每个候选键都将在步骤 7 的可能性中找到。在您的示例中，有 3 个候选键。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-18T04:14:47.743

[http://www.sroede.nl/projects/fdhelper.aspx](http://www.sroede.nl/projects/fdhelper.aspx)

这将有助于'只需将您的关系和 FD 的点击生成在底部

# ruby-on-rails-3 - 数据未出现在表格中

> ID：14309145
> 
> 赞同：1
> 
> 时间：2013-01-13T22:50:24.107
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我有一个简单的表格，可让您选择用户并选择医院。表单成功提交。但是，当我查看 index.html.erb 时，它如下所示：[imgur][1]。知道为什么“全名”和“医院”没有出现吗？

```
 <div class="field">
      <%= f.label :booking_reference %>
      <br/>
      <%= f.text_field :booking_reference %>
    </div>

    <div class="field">
      <%= fields_for :User do |user| %>
          <%= user.collection_select :user_id, User.all, :id, :full_name %>

      <% end %>
    </div>

    <div class="field">
      <%= fields_for :hospital do |hosp| %>
          <%= hosp.collection_select :hospital_id, Hospital.all, :id, :name %>
      <% end %>
    </div>

    <div class="actions">
      <%= f.submit %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:02:38.060

那岂不是像

```
<div class="field">
      <%=  f.collection_select :hospital_id, Hospital.all, :id, :name %>
</div> 
```

和

```
<div class="field">
      <%= f.collection_select :user_id, User.all, :id, :full_name %>
</div> 
```

?

否则你会破坏表单助手。

如有疑问，请在此处查看 api：[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

# python - Django South：检测是否在生产中应用了虚假迁移

> ID：14309147
> 
> 赞同：3
> 
> 时间：2013-01-13T22:50:50.370
> 
> 标签：python, django, django-south

我正在将 South 添加到具有许多安装的现有应用程序中，但是由于安全原因，我无法访问生产环境。
我们只能提供 Python 安装脚本，这些脚本将由通常不了解 Django、South 等的人运行。

我知道对于现有安装，任何未来的升级都必须从执行开始：

```
manage.py syncdb
manage.py migrate --all 0001 --fake 
```

并且任何新安装都将从以下内容开始：

```
manage.py syncdb
manage.py migrate -all 
```

有什么方法可以检测是否已经以与数据库无关的方式（可能是 Django 本身）应用了南初始迁移（例如，通过检测 south_migfationhistory 表是否存在）？
我想做的是：

```
(pseudocode)
db = database.connect(dbname, user, password)
if db.table_existst('south_migrationhistory'):
  execute 'manage.py syncdb'
  execute 'manage.py migrate --all'
else:
  execute 'manage.py syncdb'
  execute 'manage.py migrate --all 0001 --fake'
  execute 'manage.py migrate --all' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:43:32.237

为了将来参考，这就是我最终这样做的方式：

```
if args.settings_dir not in sys.path:
  sys.path.append(args.settings_dir)

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

#try to query db for existing objects, e.g. user groups
#in order to detect if we are upgrading an existing installation
from django.db.utils import DatabaseError
try:
  from django.contrib.auth.models import Group
  tmp = len(Group.objects.all()) #evaluate to force db query
  updating = True
except DatabaseError as e:
  updating = False

#try to query db for South migrations in order to detect if South was already applied
#in this installation (if not then accessing MigrationHistory will throw an excepion)
try:
  from south.models import MigrationHistory
  has_south = bool(len(MigrationHistory.objects.all()))
except ImportError as e:
  print 'ERROR: Error importing South migration history: ' + str(e)
  print 'Exiting'
  exit(1)
except DatabaseError as e:
  has_south = False

#syncdb to create south_migrationhistory table, portal models will not be synced
from django.core.management import execute_from_command_line
argv = ['manage.py', 'syncdb', '--settings=settings', '--pythonpath=' + args.settings_dir]
execute_from_command_line(argv)

#if we are updating existing installation and South wasn't already applied
#then initial migration has to be 'faked' in order to sync with existing tables
if updating and not has_south:
  print 'INFO: Faking initial database migration...'
  argv = ['manage.py', 'migrate', '--all', '0001', '--fake',
          '--settings=settings', '--pythonpath=' + args.settings_dir]
  execute_from_command_line(argv)

#run normal migrations
print 'INFO: Applying database migrations...'
argv = ['manage.py', 'migrate', '--all',
        '--settings=settings', '--pythonpath=' + args.settings_dir]
execute_from_command_line(argv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T04:31:50.783

解决您的情况实际上是 South 的一张出色门票：

[http://south.aeracode.org/ticket/430](http://south.aeracode.org/ticket/430)

该票建议创建一个标志`--autofake-first`，它将确定是否存在任何初始表，如果存在，将伪造第一次迁移，但正常运行其余的。如果您刚刚将应用程序转换为 South，这是完美的，但您需要将此更改作为远程或持续部署策略的一部分。

它已经开放了 3 年，虽然它已经实施了一段时间，但它正在等待合并。如果您想要此功能，请随时评论该问题 ;-)

# c++ - 等价集中的分区

> ID：14309149
> 
> 赞同：0
> 
> 时间：2013-01-13T22:50:56.670
> 
> 标签：c++, python, algorithm, dynamic-programming

我有一个简单的、无方向的树`T`。我应该找到一个命名的路径`A`和另一个命名的路径`B`，`A`并且`B`没有公共顶点。目的是最大化`Len(A)*Len(B)`.

我认为这个问题类似于分区问题，除了在分区问题中你有一个集合，但在这里你有一个等价集。解决办法是找到两条不相交的路径`Len(A) ~ Len(B) ~ [n-1/2]`。这是正确的吗？我应该如何实现这样的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:25:36.800

我认为如果路径长度只是路径中链接的数量（因此链接没有权重），那么动态编程解决方案几乎是易于处理的。

从叶子向上工作。在每个节点上，您需要跟踪限制在该节点处具有根的子树的最佳解决方案对，并且对于每个 k，具有在该节点终止的长度为 k 的路径和最大长度的第二个路径的最佳解决方案在该节点下方的某个地方并且不接触路径。

给定节点的所有后代的此信息，您可以为该节点生成类似的信息，然后按照自己的方式到达路由。

如果您考虑实际上只是一行节点的树，您会看到需要这么多信息。一行节点的最佳解决方案是将其一分为二，因此，如果您仅在该行的长度为 2n + 1 时制定了最佳解决方案，那么您将没有长度为 2n 的行所需的构建块+ 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:53:28.083

首先。我认为您以错误的方式看待这个问题。据我了解，您有一个与[图表](http://en.wikipedia.org/wiki/Graph_theory)相关的问题。你所做的是

> 1.  建立一个最大生成树并找到长度 L。
> 2.  现在，你说两条路径不能有任何共同的顶点，所以我们必须删除一条边来归档它。我假设图中的每条边的重量都是 1。因此，在删除一条边后，两条路径 A 和 B 的总和为 L-1。现在的问题是您必须删除一条边，以使 len(a) 和 len(b) 的乘积最大化。您可以通过移除 L 的 et most 'middel' 中的边缘来做到这一点。为什么，问题与优化具有固定周长的矩形的面积相同。可以在[此处](http://www.youtube.com/watch?v=0hqi7gls2pI)找到有关该主题的简短 youtube 视频。

请注意，如果您的边权重不等于 1，那么您将遇到一个更难的问题，因为可能存在不止一个最大生成树。但是您也许可以以不同的方式拆分它们，如果是这种情况，请给我回信，然后我会考虑解决方案，但是我手头没有。

祝你好运。

# spreadsheet - 根据单元格值从工作表中获取数据

> ID：14309152
> 
> 赞同：0
> 
> 时间：2013-01-13T22:51:08.380
> 
> 标签：spreadsheet

我有一个有多个工作表的电子表格，第一个是“主工作表”。随后的工作表名称与“主工作表”的 A 列中的值相同。

例如：主表 A5 列 = 12345 A6 列 = 23456

我想从工作表“12345”（B10）中获取单元格“主工作表”（B5）的值（“主工作表”（A5）中的值）和单元格“主工作表”（B6）的值来自工作表“ 23456"（B10）。

随着“主表”的不断增长，我需要通过一个公式来做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:04:10.820

您的符号看起来好像您没有使用 MS Excel，但如果您是，这应该可以解决您的问题。

您将需要使用 INDIRECT 功能。它将字符串转换为对单元格的引用。

这意味着您可以执行以下操作（在 Main Sheet 的 B1 中）：

```
=INDIRECT(CONCATENATE("'", 'Main Sheet'!A1, "'!B10")) 
```

假如说：

```
'Main Sheet'!A1 == abc123 
```

该公式将为您提供以下内容：

```
'abc123'!B10 
```

# javascript - 在 JavaScript 中“抛出”警告？

> ID：14309154
> 
> 赞同：2
> 
> 时间：2013-01-13T22:51:24.447
> 
> 标签：javascript, firefox

在 FireFox 中，有一个可爱的小错误控制台 [Ctrl+Shift+J]，我可以在其中通过从 JavaScript 中抛出错误来添加错误。有没有办法显示警告或消息？我不是说`console.warn()`，我真的希望它在错误控制台中，我只是希望它有一个警告标记而不是错误标记。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T22:53:56.270

JavaScript 中没有警告之类的东西。所有错误都是致命的。

`console.warn`将在实现它的浏览器中，在控制台中打印警告级别的消息（类似于格式错误的 HTML 或安全警告）。

就个人而言，我只想写`console.log("Warning: It's late and I'm drunk.");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:00:21.837

JavaScript 有许多内置的错误构造函数，例如`Error()`、`SyntaxError()`、`TypeError()`和 等，它们与`throw`语句一起使用。这些对象包含有关错误的有趣信息，例如创建对象的构造函数的名称属性，或传递给对象的消息。

JavaScript 的有趣之处在于你可以抛出任何你想要的对象。因此，基于此概念，您可以执行类似的操作`throw {name: "some name", message: "some message", remedy: callback}`，在顶级`try/catch`语句中捕获此错误并使用`console.log`.

希望这可以帮助。

# perl - Perl - 关于解引用的正确语法的两个问题

> ID：14309155
> 
> 赞同：3
> 
> 时间：2013-01-13T22:51:29.330
> 
> 标签：perl, syntax, dereference

作为一个新手，我正在尝试使用来自 atlanta perl mongers 的材料来探索 perl 数据结构，可在此处获得[Perl Data Structures](http://perlcabal.org/~util/YAPC/YAPC_2011_data_structures/perl_data_structures.pdf)

这是我编写的示例代码，与其他两个 pragma`01.pl`相同，`02.pl`但`01.pl`包含两个 pragma: `use strict; use warnings;`。

```
#!/usr/bin/perl

my %name = (name=>"Linus", forename=>"Torvalds");
my @system = qw(Linux FreeBSD Solaris NetBSD);

sub passStructure{
  my ($arg1,$arg2)=@_;

  if (ref($arg1) eq "HASH"){
    &printHash($arg1);
  }
  elsif (ref($arg1) eq "ARRAY"){
    &printArray($arg1);
  }

  if (ref($arg2) eq "HASH"){
    &printHash($arg2);
  }
  elsif (ref($arg2) eq "ARRAY"){
    &printArray($arg2);
  }
}

sub printArray{
  my $aref = $_[0];

  print "@{$aref}\n";
  print "@{$aref}->[0]\n";
  print "$$aref[0]\n";          
  print "$aref->[0]\n";
}

sub printHash{
  my $href = $_[0];

  print "%{$href}\n";
  print "%{$href}->{'name'}\n";
  print "$$href{'name'}\n";
  print "$href->{'name'}\n";
}

&passStructure(\@system,\%name); 
```

上述文件中提到的几点我误解了：

**第 1** 页 44 提到这两种语法结构：`"$$href{'name'}"`并且`"$$aref[0]"`永远不应该用于访问值。为什么 ？似乎在我的代码中它们工作正常（见下文），而且 perl 抱怨使用`@{$aref}->[0]`as deprecated，那么哪一个是正确的？

**第 2** 页 45 提到没有`"use strict"`和使用`"$href{'SomeKey'}"`when`"$href->{'SomeKey'}"`应该使用，`%href`是隐式创建的。所以如果我理解得很好，下面的两个脚本都应该打印“Exists”

```
 [pista@HP-PC temp]$ perl -ale 'my %ref=(SomeKey=>'SomeVal'); print $ref{'SomeKey'}; print "Exists\n" if exists $ref{'SomeKey'};'
    SomeVal
    Exists

    [pista@HP-PC temp]$ perl -ale '                              print $ref{'SomeKey'}; print "Exists\n" if exists $ref{'SomeKey'};' 
```

但第二个不会，为什么？

两个开头提到的脚本的输出：

```
[pista@HP-PC temp]$ perl 01.pl 
Using an array as a reference is deprecated at 01.pl line 32.
Linux FreeBSD Solaris NetBSD
Linux
Linux
Linux
%{HASH(0x1c33ec0)}
%{HASH(0x1c33ec0)}->{'name'}
Linus
Linus
[pista@HP-PC temp]$ perl 02.pl 
Using an array as a reference is deprecated at 02.pl line 32.
Linux FreeBSD Solaris NetBSD
Linux
Linux
Linux
%{HASH(0x774e60)}
%{HASH(0x774e60)}->{'name'}
Linus
Linus 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:35:38.447

很多人认为`$$aref[0]`丑`$aref->[0]`而不丑。其他人不同意；前一种形式没有任何问题。

`@{$aref}->[0]`另一方面，这是一个错误，碰巧有效，但已被弃用，可能不会继续存在。

您可能想阅读[http://perlmonks.org/?node=References+quick+reference](http://perlmonks.org/?node=References+quick+reference)

一个包变量`%href`是简单地通过提及这样一个没有`use strict "vars"`效果的散列来创建的，例如通过`->`省略`$href->{'SomeKey'}`. 这并不意味着创建了特定的密钥。

更新：查看 Perl Best Practices 参考资料（这本书激发了更多的盲目采用和更少的实际想法，而不是作者预期的），它特别推荐这种`->`形式以避免留下印记的可能性，从而导致上面提到的问题第 45 页。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:58:19.297

Perl 有普通的数据类型和对数据类型的*引用*。重要的是，您要了解它们之间的区别，无论是在含义上还是在语法上。

```
Type   |Normal Access | Reference Access | Debatable Reference Access
=======+==============+==================+===========================
Scalar | $scalar      | $$scalar_ref     |
Array  | $array[0]    | $arrayref->[0]   | $$arrayref[0]
Hash   | $hash{key}   | $hashref->{key}  | $$hashref{key}
Code   | code()       | $coderef->()     | &$coderef() 
```

使用该`$$foo[0]`语法访问 hashrefs 或 arrayrefs 被认为是不好的原因是（1）双符号看起来像标量 ref 访问令人困惑，并且（2）这种语法隐藏了使用引用的事实。取消**引用**箭头`->`的意图很明确。[我在这个答案](https://stackoverflow.com/a/14101945/1521179)中介绍了为什么使用`&`印记不好的原因。

这`@{$aref}->[0]`是非常错误的，因为您要取消引用对数组的引用（根据定义，它不能是引用本身），然后用箭头取消引用该数组的第一个元素。有关正确的语法，请参见上表。

将散列插入字符串很少有意义。哈希的字符串化表示已填充和可用存储桶的数量，因此可以告诉您有关负载的信息。这在大多数情况下没有用。此外，不将`%`字符视为字符串中的特殊字符允许您使用`printf`……</p>

关于 Perl 数据结构的另一个有趣的事情是知道何时创建了散列或数组中的新条目。通常，访问一个值不会*在*该散列或数组中创建一个槽，除非您使用该值作为引用。

```
my %foo;
$foo{bar}; # access, nothing happens
say "created at access" if exists $foo{bar};
$foo{bar}[0]; # usage as arrayref
say "created at ref usage" if exists $foo{bar}; 
```

输出：`created at ref usage`。

实际上，arrayref 就位，因为`undef`在某些情况下您可以将值用作引用。然后这个 arrayref 填充散列中的槽。

如果没有`use strict 'refs'`，变量（但不是该变量中的槽）就会出现，因为全局变量*只是*代表命名空间的哈希中的条目。`$foo{bar}`与 相同 与`$main::foo{bar}`相同`$main::{foo}{bar}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:48:21.673

`$arg->[0]`与表单相比，表单的主要优点是`$$arg[0]`第一种类型更清楚地知道发生了什么……`$arg`是一个 ARRAYREF，您正在访问它所引用的数组的第 0 个元素。

初读时，第二种形式可以解释为`${$arg}[0]`（取消引用 ARRAYREF）或`${$arg[0]}`（取消引用 of 的第一个元素`@arg`。

当然，只有一种解释是正确的，但我们都有那些日子（或夜晚）在看代码，我们不太记得顺序运算符和其他句法设备是在什么情况下工作的。此外，如果有的话，混乱会加剧是额外的取消引用级别。

防御性的程序员往往会错误地努力使他们的意图明确，我认为这`$arg->[0]`是对该代码意图的更明确的表示。

至于哈希的自动创建......它只是将被创建的哈希（以便 Perl 解释器检查密钥是否存在）。未创建密钥本身（自然...您不想创建要检查的密钥...但是如果存储桶不存在，您可能需要创建将保存该密钥的存储桶. 这个过程被称为自动存活，你可以[在这里](http://www.perlmonks.org/?node_id=691557)阅读更多关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:04:35.377

我相信您应该以 @{$aref}[0] 或 $aref->[0] 的形式访问数组。

`print`语句不实例化对象。隐式创建的意思是您不需要在分配变量之前预定义变量。由于`print`未分配变量，因此不会创建。

# java - java的iterator.remove()如何翻译成python？

> ID：14309160
> 
> 赞同：2
> 
> 时间：2013-01-13T22:52:12.960
> 
> 标签：java, python, concurrency, iterator

我有一个需要迭代的 python 集，对于每个元素，检查它是否满足约束，如果满足，请将其删除并将其添加到另一个可能已经非空的集合中。我可以将它添加到缓冲区，然后在循环完成后，遍历缓冲区并从集合中删除其内容，但必须有更好的方法来做到这一点。

这是我正在尝试做的事情：

```
for elem in S:
  if (P(elem)):
    S.remove(elem)
    T.add(elem) 
```

这行不通。

这是可行但不干净的修复程序：

```
B = set()
for elem in S:
  if (P(elem)):
    B.add(elem)
    T.add(elem)
for elem in B:
  S.remove(elem) 
```

编辑：最好的解决方案似乎是：

```
for elem in S.copy():
  if (P(elem)):
    S.remove(elem)
    T.add(elem) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:54:47.913

对于列表，在迭代之前创建一个副本：

```
for elem in S[:]: 
```

其中`[:]`切片符号创建完整列表的副本。在迭代列表时，您不能以其他方式从列表中删除元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:56:29.880

一种选择是使用列表推导来创建`T`然后删除`T`from中的所有元素`S`。

```
T = set([elem for elem in S if P(elem)])
S = S - T 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T22:57:25.897

如果迭代列表两次并`P()`为每个项目调用两次不是问题，这将是最易读的解决方案::

```
T = [x for x in S if P(elem)]
S = [x for x in S if not P(elem)] 
```

# ember.js - Emberjs：防止后退按钮进入另一个状态

> ID：14309163
> 
> 赞同：3
> 
> 时间：2013-01-13T22:52:28.633
> 
> 标签：ember.js, ember-data

当状态描述在模态/弹出窗口中呈现的视图时，我们理想地希望用户仅通过提供的选项（即保存或取消按钮）导航离开它。

当您在设计应用程序时考虑到状态并使用模式来呈现某些状态（新建、编辑...）的视图时，后退按钮会出现一个真正的问题。

有没有办法侵入状态历史记录，以防止在需要时通过后退按钮进入状态。

# php - sudo 与 libssh2

> ID：14309165
> 
> 赞同：3
> 
> 时间：2013-01-13T22:52:35.677
> 
> 标签：php, libssh2

```
<?php
$ssh = ssh2_connect('domain.tld'); 
ssh2_auth_password($ssh, 'username', 'password');

$shell = ssh2_shell($ssh);
echo fread($shell, 1024*1024);
fwrite($shell, "sudo ls -la\n");
$output = fread($shell, 1024*1024);
echo $output;
if (preg_match('#[pP]assword[^:]*:#', $output)) {
    fwrite($shell, "password\n");
    echo fread($shell, 1024*1024);
} 
```

所做的只是显示横幅和提示。它实际上并没有给我 ls -la 命令的输出。在 phpseclib 上它工作得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:30:27.710

我编写了一个 SSH 包装器（[https://github.com/bubba-h57/PHP-SSH2](https://github.com/bubba-h57/PHP-SSH2)）来方便我自己的许多 PHP 脚本，这些脚本需要通过 SSH 连接到远程服务器，并且经常遇到这个问题。

我用这个咒语解决了它：

```
echo <password> | sudo -S <command> 
```

您可能看起来像：

```
fwrite($shell, "echo $mySudoPassword | sudo -S ls -la\n"); 
```

我每次使用 sudo 时都会输入密码，无论我是否需要它。

使用我自己的包装器，它看起来像：

```
require_once 'SSH2.php';
// Test Unix
$username = 'someuser';
$password = 'somepwd';
$host = 'somenixhost.com';
$port = 22;
$ssh2 = new My_SSH2($host, $port);
$ssh2->authPassword( $username, $password);
$ssh2->setPrompt(':~#'); // Set initial expected prompt
$ssh2->openShell();
$ssh2->setPrompt("MYCUSTOMSSHPROMPT> "); // Create a unique, easily found prompt
$ssh2->exec("PS1='MYCUSTOMSSHPROMPT> '"); // Execute the command.
echo $ssh2->exec('cd /var/www') . "\n";   // Change directories.
echo $ssh2->exec("echo $password | sudo -S ls -la\n") . "\n"; // Print LS
echo "\n===================Begin History=============\n";
echo $ssh2->getHistory();
$ssh2->disconnect();
echo "\n===================end=============\n";
exit; 
```

# authentication - 检查用户是否已登录的最安全方法是什么？

> ID：14309166
> 
> 赞同：2
> 
> 时间：2013-01-13T22:52:45.363
> 
> 标签：authentication, logging, struts2

我已经阅读了很多问题，例如我的问题标题，但没有一个能给我解决方案。

我正在实现一个网站（使用 struts2 框架），但我不知道检查用户是否已经登录的最安全方法是什么。我的网站有支付功能，所以我真的应该小心这一点。

我读过的所有解决方案都是这样的：

```
// Is there a "user" object stored in the user's HttpSession?
    Object user = session.getAttribute (USER_HANDLE);
    if (user == null) {
        // The user has not logged in yet.
    }
    else {
       // the user has logged in
    } 
```

我想知道是否有一些坏人可以创建一个像用户对象这样的假会话对象，然后可以在没有有效密码的情况下登录系统？

我也想知道是不是实践方法，在每个需要登录的页面，***不只是检查用户对象不为空，还要检查数据库中的用户名和密码***？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:25:56.200

也许你应该使用像[spring security](http://jtechspace.blogspot.com/2012/07/integrating-struts2-with-spring.html)或 Apache Shiro 这样的安全框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:24:34.403

安全问题始终基于您的要求，简单来说就是您想要哪种安全性，因为关于 Web 有不同的安全层。但是正如您所提到的，您可以使用 Struts2-Interceptors 来实现这一点，因为它为您提供了在调用动作之前和之后执行一些基本操作的术语。例如参考[这个链接](http://www.2bloggers.com/2010/12/struts-2-with-login-interceptor.html)。

# google-app-engine - 如何与 appengine-magic 中本地运行的数据存储服务交互？

> ID：14309167
> 
> 赞同：1
> 
> 时间：2013-01-13T22:52:51.060
> 
> 标签：google-app-engine, clojure, appengine-magic

我正在使用 appengine-magic 设置 Web 应用程序，或多或少如[http://www.digitalbricklayers.com/2012/03/geotasklist-in-jquery-mobile-and.html](http://www.digitalbricklayers.com/2012/03/geotasklist-in-jquery-mobile-and.html)中所述。该示例适用于我的本地计算机，位置和任务被添加到本地数据存储等。

我的问题是是否可以在交互式开发期间从 REPL 中与数据存储进行交互，例如调用 (ds/save! ...) 等？我问是因为当我尝试时，我得到：

NullPointerException 没有为此线程注册 API 环境。
com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId (DatastoreApiHelper.java:108)

无论我使用基于 eclipse+逆时针的设置还是基于 emacs+slime 的设置，我都会收到此错误。

谢谢，约阿希姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:35:25.557

有很多方法可以做到这一点。

最简单的方法是转到管理控制台 (http://localhost:/_ah/admin) 并单击“交互式控制台”。

我使用 django-nonrel，它带有一个启动交互式 shell（manage.py shell）的命令。但是，如果您不使用 django-nonrel，那么设置它有点涉及。我怀疑大部分必要的东西都在 django-nonrel 的 setup_env() 函数中找到：[https](https://github.com/django-nonrel/djangoappengine/blob/develop/djangoappengine/boot.py) ://github.com/django-nonrel/djangoappengine/blob/develop/djangoappengine/boot.py 让它全部工作很痛苦， 祝你好运。

我 99% 的时间使用的解决方案是使用 pdb 并强制解释器在我需要进行一些调试的应用程序中的某个点中断。有关说明，请参阅此：http: [//eatdev.tumblr.com/post/12076034867/using-pdb-on-app-engine](http://eatdev.tumblr.com/post/12076034867/using-pdb-on-app-engine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:23:58.423

只要应用程序正在运行，appengine-magic 就可以让您使用 App Engine 服务（如数据存储）；请参阅[https://github.com/gcv/appengine-magic#app-engine-services](https://github.com/gcv/appengine-magic#app-engine-services) - 只要您`ae/start`的应用程序，它应该可以工作。

# java - Java键监听器按下一次

> ID：14309177
> 
> 赞同：0
> 
> 时间：2013-01-13T22:53:40.307
> 
> 标签：java, keyboard, awt, keylistener

我的程序中有一个按键监听器，对于大多数按键，我希望用户能够按住按键。但是截图的关键我希望用户能够按住键但它只需要一个截图有什么想法吗？

```
package me.bevilacqua.game;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class InputHandler implements KeyListener{

    private boolean[] keys = new boolean[120];
    public boolean up , down , left , right , screen_shot;

    public void tick() {
        up =  keys[KeyEvent.VK_UP] || keys[KeyEvent.VK_W];    //Will be Jump
        down =  keys[KeyEvent.VK_DOWN] || keys[KeyEvent.VK_S];  //Will not be down but maybe slide or better yet action key or maybe shoot
        left =  keys[KeyEvent.VK_LEFT] || keys[KeyEvent.VK_A];
        right =  keys[KeyEvent.VK_RIGHT] || keys[KeyEvent.VK_D];    
        screen_shot = keys[KeyEvent.VK_F5] || keys[KeyEvent.VK_BACK_SLASH];
    }

    public void keyPressed(KeyEvent e) {
        keys[e.getKeyCode()] = true;
    }

    public void keyReleased(KeyEvent e) {
        keys[e.getKeyCode()] = false;
    }

    public void keyTyped(KeyEvent e) {  
    }
} 
```

编辑：

为什么这不起作用：

```
package me.bevilacqua.game;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Timer;

public class InputHandler implements KeyListener{
private boolean[] keys = new boolean[120];
public long current , last = -1;
public boolean up , down , left , right , screen_shot;
public boolean shotFlag = true; //True if allowed

public void tick() {
    up =  keys[KeyEvent.VK_UP] || keys[KeyEvent.VK_W];    //Will be Jump
    down =  keys[KeyEvent.VK_DOWN] || keys[KeyEvent.VK_S];  //Will not be down but maybe slide or better yet action key or maybe shoot
    left =  keys[KeyEvent.VK_LEFT] || keys[KeyEvent.VK_A];
    right =  keys[KeyEvent.VK_RIGHT] || keys[KeyEvent.VK_D];    
    screen_shot = keys[KeyEvent.VK_F5];
}

public void keyPressed(KeyEvent e) {
    if(e.getKeyCode() != KeyEvent.VK_F5) keys[e.getKeyCode()] = true;
    else if (e.getKeyCode() == KeyEvent.VK_F5 && shotFlag) {
        keys[e.getKeyCode()] = true;
        shotFlag = false;
    }

}

public void keyReleased(KeyEvent e) {
    keys[e.getKeyCode()] = false;
    if(e.getKeyCode() == KeyEvent.VK_F5) shotFlag = true;
}

public void keyTyped(KeyEvent e) {  
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:05:45.887

据我了解，当按住相应的键时，与每个键关联的操作都会重复，并且即使按住相应的键，您也希望阻止其中一个操作重复。`keyPressed()`我认为您可以使用在调用时设置的附加标志来解决此问题。然后`screen_shot`仅在设置`tick()`此标志*并且*每次`tick()`调用该标志都未设置时才设置（当然在读取其值之后）。或者，您可以仅在设置标志并且您正在设置标志时取消设置`screen_shot`标志。我不认为这有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T10:17:52.420

你可以这样尝试：

```
public boolean up = false;
public boolean down = false;
public boolean left = false;
public boolean right = false;    
public boolean screen_shot = false;

//...

f.addKeyListener(new KeyAdapter()
        {
            public void keyPressed(KeyEvent e)
            {
                if (e.getKeyCode() == KeyEvent.VK_D)
                {
                    right = true;
                }
                if (e.getKeyCode() == KeyEvent.VK_A)
                {
                    left = true;
                }
                if (e.getKeyCode() == KeyEvent.VK_S)
                {
                    down = true;
                }
                if (e.getKeyCode() == KeyEvent.VK_W)
                {
                    up = true;
                }
                if (e.getKeyCode() == KeyEvent.VK_F5)
                {
                    screen_shot = true;
                }
            }
            public void keyReleased(KeyEvent e)
            {
                if (e.getKeyCode() == KeyEvent.VK_D)
                {
                    right = false;
                }
                if (e.getKeyCode() == KeyEvent.VK_A)
                {
                    left = false;
                }
                if (e.getKeyCode() == KeyEvent.VK_S)
                {
                    down = false;
                }
                if (e.getKeyCode() == KeyEvent.VK_W)
                {
                    up = false;
                }
                if (e.getKeyCode() == KeyEvent.VK_F5)
                {
                    screen_shot = false;
                }
            }
//...

@Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        this.setBackground(Color.white);
        g.drawImage(character, characterLocation.x, characterLocation.y, this);

        if (right)
        {
            characterLocation.x += 1;
        }
        if (left)
        {
            characterLocation.x -= 1;
        }
        if (down)
        {
            characterLocation.y += 1;
        }
        if (up)
        {
            characterLocation.y -= 1;
        }
        if (screen_shot)
        {
            BufferedImage shot = character.createScreenCapture(new Rectangle(100,100));
        }
        repaint();
    }   
} 
```

可能无法达到标准，因为您可能必须更改上面屏幕截图的“if”语句。

# android - 当前位置 Google 地图版本 2

> ID：14309179
> 
> 赞同：0
> 
> 时间：2013-01-13T22:53:47.200
> 
> 标签：android, google-maps

几天来，我一直在尝试简单地打开谷歌地图并让它动画到我的位置。我搜索了 Google 和 StackOverFlow 并尝试了无数的东西，但我仍然无法完成看似简单的任务。有人可以为我指出正确的方向以获取有效的教程或提供任何指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:22:28.293

有2种方式：

1.  [使用Local-Base 服务](https://stackoverflow.com/questions/6095919/android-how-to-get-current-location-latitude-and-longitude)获取您当前的位置。然后绘制到地图
2.  试试这个地图选项：

    mmap.setMyLocationEnabled(true);

# php - 访问无效 URL 时如何从 PHP 更新 IP 阻止列表

> ID：14309182
> 
> 赞同：0
> 
> 时间：2013-01-13T22:53:59.683
> 
> 标签：php, .htaccess, block

我的客户在同一物理专用服务器上拥有多个网站。通常，蛮力攻击会尝试访问一个网站上的无效 URL，然后继续访问其他网站。

有没有办法在一个网站上捕获无效的 url 请求并更新同一服务器上所有网站的共享阻止列表？

我读到这个：[如何使用基于 PHP/MySQL 的脚本来禁止网站的 IP 块？](https://stackoverflow.com/questions/10938865/how-do-i-use-a-php-mysql-based-script-to-ban-ip-blocks-from-a-website)并且正在寻找一种方法来更新我可以在每个站点上自动包含的某种文件，以减少恶意活动的影响，也许可以在 cron 上清理该文件。

对于这种情况有什么想法或最佳实践吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:01:15.567

如果您有服务器访问权限，我更喜欢[http://www.fail2ban.org](http://www.fail2ban.org)。当您没有时，我会在 htaccess 中将重定向到 php 为 404 或其他内容，脚本会记录请求错误的频率，并且在 10 或之后...请求您阻止 ip。

但是在服务器上这样做真的更好，所以apache不需要回答所有这些请求..

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:14:14.573

虽然我对此有严重的保留意见，但我们的服务器管理员安装了[PSAD](http://cipherdyne.org/psad/)，它“似乎”可以工作 - 目前有很多关于中文（基于中国的 IP 地址，当然可以是任何地方的代理）的警报。只是要清楚你知道你在阻止什么以及为什么。

提示：将电子邮件警报的警报级别设置为 4+（或关闭电子邮件警报），否则您每天会收到数千个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:17:02.097

我想你可以使用这样的东西：

假设您只分配了以下要访问的链接。

假设您通常有一个类似这样的网址，`site.com/index.php?id=`如果您只想让人们访问`id=homepage`或`about-us`，，`service``contact`

```
$id = $_GET['id'];
switch($id){

case "homepage";
echo //do something
break;

case "about-us";
include('about.php');
break;

case "service"; 
echo  //something;
break;

case "contact";
echo //something
break;

default: 
get_ip_and_ban(); // initiate a function, that records and bans IP
break; 

} 
```

* * *

更新 - （如何在多个服务器之间共享 IP ..）或类似的东西

好的，这就是如何获取 IP .. 或者我将如何获取 IP。

```
function get_ip() {

    if(!empty($_SERVER['HTTP_CLIENT_IP'])) 
        { $ip=$_SERVER['HTTP_CLIENT_IP']; }
            elseif(!empty($_SERVER['HTTP_X_FORWARD_FOR']))
                {$ip=$_SERVER['HTTP_X_FORWARD_FOR'];}
                    else {$ip=$_SERVER['REMOTE_ADDR'];}
                        return $ip;

} 
```

所以，`get_ip();`是一个获取 ip 的函数，现在，你可以将任何试图访问错误链接的人插入到数据库中。因此，在完成之后让我们创建一个简单的函数来检查数据库中是否存在坏 IP。假设`$allowed_ip`是来自数据库的一组错误 IP，此函数将检查是否存在其中一个错误 IP，如果存在，则以下函数将阻止用户访问该页面。

```
function access_directive($allowed_ip){

    if(get_ip() === $allowed_ip)
     {exit("Dude, You are blocked. Get Lost"); }

} 
```

现在为了简单起见，我将尝试仅阻止 `<?php echo access_directive("127.0.0.1"); ?>`位于页面顶部的 localhost，并将阻止在`access_direcive();`

您需要创建一个数据库来存储错误的 ip，然后在您的页面顶部使用上述功能或类似功能来阻止其他人。

# c++ - cin 缓冲区中残留的垃圾

> ID：14309183
> 
> 赞同：0
> 
> 时间：2013-01-13T22:54:06.047
> 
> 标签：c++

我需要防止缓冲区中留下的垃圾在输入开关盒菜单的值时被用于由用户输入的菜单调用的函数中。

菜单代码

```
void menu()
{
bool done = false; 
string input;
while(!done)
{
    cout << "Welcome to the DVD database." << endl;
    cout << "1\. Add A DVD" << endl;
    cout << "2\. Delete a DVD." << endl;
    cout << "3\. Edit a DVD." << endl;
    cout << "4\. List By Category." << endl;
    cout << "5\. Retrieve by a DVD by Title." << endl;
    cout << "6\. Display collection by year" << endl;
    cout << "7\. Display collection by title" << endl;
    cout << "-999\. Exit program" << endl;
    cout << "Please choose an option by entering the corresponding number" << endl;
    cin >> input;
    int value = atoi(input.c_str());
    switch(value)
    {
        case 1:addDVD(); break;
        case 2:deleteDVD(); break;
       // case 3:editDVD(); break;
        case 4:listByCategory();break;
        case 6:displayByYear();break;
        case 7:displayByTitle();break;
        case -999: writeToFile(); exit(0); break;
        default : cout <<"Invalid entry"<< endl; break;
    }
}
}

void retrieveByTitle()
{
string search;
int size = database.size();
int index = 0;
bool found = false;
cin.ignore();
cout << "Please enter the title of the DVD you would like to retrieve: " << endl;
getline(cin,search);
cout << search;
while(!found && index<size)
{
    if(database.at(index)->getTitle().compare(search)==0)
    {
        cout << database.at(index)->toString();
        break;
    }
}
cout << endl;
} 
```

如果在菜单中输入 5，程序将跳过方法中的用户输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:10:29.593

**与交互式用户**打交道时**输入时，您应该使用 std::getline()**

 **每次按 <enter> 时，std::cin 都会刷新到应用程序。所以这是你应该从用户那里读取数据的逻辑垃圾。

```
std::string answer;
std::cout << "Question:\n";
std::getline(std::cin, answer); 
```

这将为您提供用户为响应上一个问题而提供的所有内容。

一旦你有了输入，你应该得到你认为输入的值。一旦你有了这个，你应该检查输入中是否有任何其他垃圾（如果有然后中止并重试），否则验证你期望的数据。

如果你期望一个整数；

```
std::stringstream linestream(answer);
int               value;
std::string       junk;

if ((answer >> value)) && (!(answer >> junk)))
{
    // If you got data
    // and there was no junk on the line you are now good to go
} 
```

在您的具体示例中，已经有一种简单的方法可以做到这一点：

```
std::getline(std::cin, input);
int value = boost::lexical_cast<int>(input);  // throws an exception if there is not
                                              // an int on the input (with no junk) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:14:36.530

此代码有效，但是如果您消除“ [cin.ignore()](http://www.cplusplus.com/forum/beginner/9148/) ”，它会遇到您描述的相同问题，这会删除被 cin >> 运算符忽略的额外分隔符：

```
#include <iostream>
#include <climits>
using namespace std;

int main() {
    string a, b;
    while (true) {

        cout << "write 'x' to exit: " << endl;
        cin >> a;
        if (a == "x") {
            break;
        }       
        cout << "read '" << a << "'" << endl;

        cout << "now write a line: " << endl;
        cin.clear();          // clears cin status
        cin.ignore(INT_MAX);  // clears existing, unprocessed input

        getline(cin, a);
        cout << "read '" << a << "'" << endl;
    }

    return 0;
} 
```**

# wcf - WCF、wsHttpBinding 和 ws-addressing：字段 肥皂消息中缺少

> ID：14309194
> 
> 赞同：2
> 
> 时间：2013-01-13T22:55:13.747
> 
> 标签：wcf, wshttpbinding, ws-addressing

我使用 wsHttpBinding 实现了一个 wcf Web 服务。SOAP 消息完美地包含了一些重要的 ws 寻址字段，包括 wsa:MessageID、wsa:ReplyTo、wsa:To 和 wsa:Action。

问题是 SOAP 消息中缺少 wsa:From 字段。当我使用 wsHttpBinding 时，有什么方法可以在肥皂消息中添加 wsa:From 吗？

谢谢，

# javascript - 获取选定内容的 HTML，包括选定内容

> ID：14309197
> 
> 赞同：1
> 
> 时间：2013-01-13T22:55:30.003
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)

在 jQuery 中，我目前正在使用它来获取一些 HTML：

`var content = $("tr#add-ingredients-over-here").html();`

但是，我实际上需要将其包含`tr`在选定的 HTML 中。我不知道该怎么做。之后我还需要用其他一些 HTML 替换它。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:57:52.703

您正在寻找的是元素的*outerHTML*。你可以试试这个：

```
var content = $("#add-ingredients-over-here")[0].outerHTML; 
```

当前所有浏览器都支持此功能。Firefox 是最后一个在 Firefox 11（2012 年 3 月）中添加对此支持的；所有其他浏览器已经支持这一点至少 4 年了。如果你必须支持比[这个 stackoverflow 线程](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)更旧的浏览器，那么它有一个基于 jQuery 的实现，可以在任何地方工作：

```
jQuery.fn.outerHTML = function() {
    return $(this).length > 0 ? $(this).clone().wrap('<div />').parent().html() : '';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:05:05.430

另一种完全跨浏览器的方法。克隆 tbody，删除除所需行之外的所有内容并从中检索 html

```
var content = $("#add-ingredients-over-here")
                   .parent().clone().find('tr:not(#add-ingredients-over-here)').remove()
                    .end().html() 
```

`clone()` 编辑：如果你需要全部，为什么不能只使用`TR`？克隆可以作为 jQuery 对象插入到另一个表中

```
/*copy whole row to another table*/
$('#otherTable').append( $("#add-ingredients-over-here").clone() ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T22:58:10.530

尝试

```
$("tr#add-ingredients-over-here").parent().html(); 
```

它将首先检索父级，然后返回其 HTML 内容

# iphone - 在 OpenGL-ES 中战斗 Z 战斗

> ID：14309200
> 
> 赞同：1
> 
> 时间：2013-01-13T22:55:42.567
> 
> 标签：iphone, ios, opengl-es, 3d

我有一个使用 OpenGL ES 完成的 3D iPhone 游戏。

这是一个很大的世界，但是我需要近距离绘制一些微小的第一人称视角位，因此我无法减小 glFrustumf() 进一步扩展的深度范围（zNear 与 zFar）。

当表面相遇以进行 Z 战斗时，我将它们稍微分开以防止它们闪烁。在有用和需要的情况下，我还让相机的距离决定了我调整它们的距离。

大部分都可以，但是有些东西的透视会受到分离的影响，并且使分离变小会导致闪烁。我很想把表面涂得更近。

有什么办法可以提高深度缓冲精度，这样表面就可以在没有更窄深度范围的情况下靠得更近？

如果没有，有没有其他方法可以解决这个问题？

我仍在应用程序中使用 OpenGL ES 1.1，但如果值得，我愿意升级。

谢谢你的帮助。

* * *

这是我创建深度缓冲区的方法...

在初始化方法中：

```
// Create default framebuffer object. The backing will be allocated for the current layer in -resizeFromLayer
glGenFramebuffersOES(1, &defaultFramebuffer);
glGenRenderbuffersOES(1, &colorRenderbuffer);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, colorRenderbuffer);

//Added depth buffer
glGenRenderbuffersOES(1, &depthRenderbuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer); 
```

在 resizeFromLayer 方法中：

```
// Allocate color buffer backing based on the current layer size
glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:layer];
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

//Added depth buffer
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight); 
```

这是我创建截锥体的方法...

```
const GLfloat  zNear = 2.2;
const GLfloat  zFar = 30000;
const GLfloat  fieldOfView = 60.0;
GLfloat size = zNear * tanf(degreesToRadian(fieldOfView) / 2.0);

if (LANDSCAPE) { //for landscape clip & aspect ratio.
    //parameters are: left, right, bottom, top, near, far
    glFrustumf(-size/(backingWidth/backingHeight),
               size/(backingWidth/backingHeight),
               -size, size,
               zNear, zFar);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:59:33.817

显然 OpenGL ES 1.x 不支持 32 位深度缓冲区。

此外，iOS 似乎不支持 16 位深度缓冲区，所以使用`GL_DEPTH_COMPONENT16_OES`只是表现为 24 位，这就是为什么我在使用时没有看到任何改进的原因`GL_DEPTH_COMPONENT24_OES`！

`GL_DEPTH_BITS`我在尝试将深度缓冲区设置为 16 位后通过检查确认了这一点：

```
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);

GLint depthBufferBits;
glGetIntegerv(GL_DEPTH_BITS, &depthBufferBits );
NSLog(@"Depth buffer bits: %d", depthBufferBits ); 
```

输出：

`Depth buffer bits: 24`

哦，好吧，至少现在我知道了。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:35:38.210

标准答案围绕使用[`glPolygonOffset`](http://www.khronos.org/opengles/sdk/1.1/docs/man/glPolygonOffset.xml). 这样做是在与缓冲区中已有的值进行比较之前，为多边形深度值添加一个偏移量。偏移量的计算考虑了屏幕深度和角度，因此它与您的世界的大小无关，并且不会影响要绘制的像素的身份。

问题是决定何时使用它。例如，如果您的场景是许多离散对象，没有统一的广泛数据结构（例如四叉树或 BSP 树），那么您可能必须使用桶系统之类的东西来发现对象非常接近（相对到他们的距离）并给更近的地方一个碰撞。如果问题是单个网格的内部问题，并且您没有更高级别的结构，那么显然问题会更复杂。

另一方面，如果您的场景完全或绝大多数是静态的，那么像 BSP 树这样的结构甚至可以在不需要深度缓冲区的情况下完成大部分绘图，这可能是一个优势。在绝望的最后，您可以使用深度书写从前到后渲染，但不进行比较，然后将移动的对象作为额外的层；在实践中，这会给你大量的透支（尽管 PVS 解决方案会有所帮助）与现代早期深度剔除的前后对比——尤其是在像 PowerVR 这样的基于延迟切片的渲染器上——所以这又不是一个容易的胜利。

作为一个单独的想法，有什么方法可以简化遥远的几何？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T21:47:30.557

对我有用的是调整远近值。远近值之间的差异定义了深度缓冲区的精确程度。举个例子。假设您有 10000 的远距离和 500 的近距离。总深度为：9500 使用 16 位 DepthBuffer，您有 65536 种可能的深度组合。（根据 GPU 和 OpenGl 实现，这个值是用不同的几何图形计算的）然后每个空间单位大约有 65536/9500 ~= 7 个可能的深度。然后您将获得 1/7 ~= .14 的深度精度。如果您的对象之间的距离为 0.14 或更小，您可能会遇到 z-fighting。在现实生活中，这更复杂，但想法是一样的。

也许您的远值太长而您不需要它。增加近值也有助于在更靠近相机的物体（更可见的物体）中进行 z-fighting。

# python - 使用 Tkinter 为我的游戏创建菜单

> ID：14309216
> 
> 赞同：0
> 
> 时间：2013-01-13T22:57:42.773
> 
> 标签：python, tkinter, pygame

我需要帮助使用 Tkinter 为我的游戏创建一个菜单，主要是一个播放按钮。我正在使用 Pygame，如果这有什么不同的话。

```
from pygame import *
import random
from datetime import datetime

startTime = datetime.now()

class Sprite:
    def __init__(self, xpos, ypos, filename):
        self.x = xpos
        self.y = ypos
        self.bitmap = image.load(filename)
        self.bitmap.set_colorkey((0, 0, 0))
    def set_position(self, xpos, ypos):
        self.x = xpos
        self.y = ypos
    def render(self):
        screen.blit(self.bitmap, (self.x, self.y))

def Intersect(s1_x, s1_y, s2_x, s2_y):
    if (s1_x > s2_x - 32) and (s1_x < s2_x + 32) and (s1_y > s2_y - 32) and (s1_y < s2_y + 32):
            return 1
    else:
        return 0

init()
screen = display.set_mode((640, 480))
key.set_repeat(1, 1)
display.set_caption('PyInvaders')
backdrop = image.load('data/backdrop.bmp')
enemies = []
x = 0

for count in range(10):
    enemies.append(Sprite(50 * x + 50, 50, 'data/enemy.bmp'))
    enemies.append(Sprite(50 * x + 50, 100, 'data/enemy.bmp'))
    x += 1

hero = Sprite(304, 400, 'data/hero.bmp')
ourmissile = Sprite(0, 480, 'data/heromissile.bmp')
enemymissile = Sprite(0, 480, 'data/enemymissile.bmp')
sandwich = Sprite(304, 20, 'data/sandwich.bmp')

quit = 0
score = 0
enemyspeed = 4

while quit == 0:
    screen.blit(backdrop, (0, 0))

    for count in range(len(enemies)):
        enemies[count].x += + enemyspeed
        enemies[count].render()

    if len(enemies) > 0 and enemies[-1].x > 590:
        enemyspeed = -4
        for count in range(len(enemies)):
            enemies[count].y += 5

    if len(enemies) > 0 and enemies[0].x < 10:
        enemyspeed = 4
        for count in range(len(enemies)):
            enemies[count].y += 5

    if ourmissile.y < 479 and ourmissile.y > 0:
        ourmissile.render()
        ourmissile.y -= 5

    if enemymissile.y >= 480 and len(enemies) > 0:
        enemymissile.x = enemies[random.randint(0, len(enemies) - 1)].x
        enemymissile.y = enemies[0].y

    if Intersect(hero.x, hero.y, enemymissile.x, enemymissile.y):
        quit = 1
        print "...where mah sammich."

    for count in range(0, len(enemies)):
        if Intersect(ourmissile.x, ourmissile.y, enemies[count].x, enemies[count].y):
            score += 1
            ourmissile.y = 480
            del enemies[count]
            break

    if Intersect(ourmissile.x, ourmissile.y, enemymissile.x, enemymissile.y):
        ourmissile.y = 480
        enemymissile.y = 480

    if len(enemies) == 0:
        sandwich.y += 2
        if Intersect(hero.x, hero.y, sandwich.x, sandwich.y):
            score += 10
            quit = 1
            print "YEEEEE GOT ME MAH SAMMICH!"

    for ourevent in event.get():
        if ourevent.type == QUIT:
            quit = 1
        if ourevent.type == KEYDOWN:
            if ourevent.key == K_RIGHT and hero.x < 590:
                hero.x += 3
            if ourevent.key == K_LEFT and hero.x > 10:
                hero.x -= 3
            if ourevent.key == K_SPACE:
                ourmissile.x = hero.x
                ourmissile.y = hero.y

    enemymissile.render()
    enemymissile.y += 5
    hero.render()
    sandwich.render()
    display.update()

print "You scored", score, "/30"
print "It took you", (datetime.now() - startTime), "to play the game." 
```

[Pastebin 上的代码](http://pastebin.com/xCH0VbVV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:52:39.663

Pygame 和 Tkinter 不融合。您的 UI 应该由一个或另一个提供 - 您甚至可以在窗口（非全屏）pygame 应用程序中使用 Tkinter 弹出瞬态对话框，但这并不常见。

在运行任何 pygame 代码、停止 Tkinter 主循环并启动 pygame 之前，可以显示配置/游戏 estart 对话框。

否则，为了获得一致的体验，您应该在项目中添加一个使用 Pygame 进行游戏内使用的 GUI。（因为纯 pygame 不支持按钮、菜单、文本条目等）。检查[http://www.pygame.org/wiki/gui](http://www.pygame.org/wiki/gui)是否适合您。

# java - 带填充的矩形圆交点

> ID：14309221
> 
> 赞同：1
> 
> 时间：2013-01-13T22:58:32.633
> 
> 标签：java

我有以下方法可以很好地测试矩形是否与圆相交。我怎么能修改它说提供一个额外的参数，填充，这意味着矩形和圆形需要彼此相距一定数量的像素？

```
public static boolean rectangleCircleIntersection(RectangleRegion rect, CircularRegion circle, int padding) {
        int circleDistance_x = PsyMath.abs((circle.getX()+circle.getRadius()) - (rect.getX()+rect.getWidth()/2));
        int circleDistance_y = PsyMath.abs((circle.getY()+circle.getRadius()) - (rect.getY()+rect.getHeight()/2));

        if (circleDistance_x > (rect.getWidth()/2 + circle.getRadius())) { return false; }
        if (circleDistance_y > (rect.getHeight()/2 + circle.getRadius())) { return false; }

        if (circleDistance_x <= (rect.getWidth()/2)) { return true; } 
        if (circleDistance_y <= (rect.getHeight()/2)) { return true; }

        int cornerDistance_sq = (int)Math.pow((circleDistance_x - rect.getWidth()/2),2) +
                             (int)Math.pow((circleDistance_y - rect.getHeight()/2),2);

        return (cornerDistance_sq <= (int)Math.pow(circle.getRadius(),2));
    } 
```

这是我的尝试，但我不太相信它是正确的：

```
public static boolean rectangleCircleIntersection(RectangleRegion rect, CircularRegion circle, int padding) {
        int circleDistance_x = PsyMath.abs((circle.getX()+circle.getRadius()) - (rect.getX()+rect.getWidth()/2));
        int circleDistance_y = PsyMath.abs((circle.getY()+circle.getRadius()) - (rect.getY()+rect.getHeight()/2));

        if (circleDistance_x > (rect.getWidth()/2 + circle.getRadius() + padding)) { return false; }
        if (circleDistance_y > (rect.getHeight()/2 + circle.getRadius() + padding)) { return false; }

        if ((circleDistance_x+padding) <= (rect.getWidth()/2)) { return true; } 
        if ((circleDistance_y+padding) <= (rect.getHeight()/2)) { return true; }

        int cornerDistance_sq = (int)Math.pow((circleDistance_x - rect.getWidth()/2),2) +
                             (int)Math.pow((circleDistance_y - rect.getHeight()/2),2);

        return (cornerDistance_sq <= (int)Math.pow(circle.getRadius(),2));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:05:05.697

代替使用 rect.getWidth() 和 rect.getHeight，您可以将填充添加到宽度和高度以及新的填充尺寸。

```
const int PADDING = 5;
int rectHeight = rect.getHeight() + PADDING;
int rectWidth = rect.getWidth() + PADDING;

//use rectHeight and rectWidth for calculation now 
```

编辑：要考虑左侧的填充，您应该调整计算中使用的位置，

```
int posX = rect.getX() - PADDING/2;
int posY = rect.getY() - PADDING/2;
int rectHeight = rect.getHeight() + PADDING/2;
int rectWidth = rect.getWidth() + PADDING/2; 
```

仅供参考，您对填充所做的基本上是在当前矩形周围创建一个更大的矩形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:15:22.047

您可以安全地填充圆圈，然后检查它们是否相交。填充矩形不太好，因为填充矩形的角将是 sqrt(2) 乘以远离原始矩形角的填充。

所以，假设上面的代码运行良好，并且半径是一个 int，你会得到：

```
public static boolean rectangleCircleIntersection(RectangleRegion rect, CircularRegion circle, int padding) {
    int paddedRadius = circle.getRadius() + padding;
    int circleDistance_x = PsyMath.abs((circle.getX()+paddedRadius) - (rect.getX()+rect.getWidth()/2));
    int circleDistance_y = PsyMath.abs((circle.getY()+paddedRadius) - (rect.getY()+rect.getHeight()/2));

    if (circleDistance_x > (rect.getWidth()/2 + paddedRadius)) { return false; }
    if (circleDistance_y > (rect.getHeight()/2 + paddedRadius)) { return false; }

    if (circleDistance_x <= (rect.getWidth()/2)) { return true; } 
    if (circleDistance_y <= (rect.getHeight()/2)) { return true; }

    int cornerDistance_sq = (int)Math.pow((circleDistance_x - rect.getWidth()/2),2) +
                         (int)Math.pow((circleDistance_y - rect.getHeight()/2),2);

    return (cornerDistance_sq <= (int)Math.pow(paddedRadius,2));
} 
```

# php - 错误，在mysql中使用多个WHERE

> ID：14309225
> 
> 赞同：0
> 
> 时间：2013-01-13T22:58:51.443
> 
> 标签：php, mysql

我在准备好的语句中使用多个 WHERE 子句尝试访问 mysql 数据时出错。这是生成sql异常的代码（参数索引超出范围（2>参数数量，即1）；

```
"SELECT Arrived_time, Closed_time FROM ? 
WHERE (\"Year  = ?\n) AND (\"Month = ?\n) AND (\"Day = ?)" 
```

我输入了三个参数。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:33:04.030

如前所述，您需要指定表名并使用正确的引用：

```
"SELECT `Arrived_time`, `Closed_time` FROM TABLENAME
WHERE (`Year`  = ?) AND (`Month` = ?) AND (`Day` = ?)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:10:38.560

`"Year"`命名列、`"Month"`和时缺少右引号`"Day"`：

```
"SELECT Arrived_time, Closed_time FROM ? 
WHERE (\"Year\"  = ?\n) AND (\"Month\" = ?\n) AND (\"Day\" = ?)" 
```

在您的版本中，数据库将寻找一个名为的列`"Year = ?\n) AND ("`

# php - 加入 3 个表 - 如何遍历结果？

> ID：14309230
> 
> 赞同：0
> 
> 时间：2013-01-13T22:59:13.413
> 
> 标签：php, mysql

我有这个 sql 语句加入 3 个表：

```
SELECT * FROM `int_news` 
                       LEFT JOIN tl_member ON int_news.member_id = tl_member.id
                       LEFT JOIN tl_news ON int_news.news_id = tl_news.id 
```

3个表是这样的：

表1（int_news）ID、member_id、news_id

表 2 (tl_member) id, firstname, lastname

表 3 (tl_news) id, 标题

到目前为止一切顺利，但似乎我脑子里有一个大黑洞，让我无法解决如何输出这样的结果

对于每个“标题”，我想要所有姓氏，例如

```
headline 1       Jonny
                 Walker
                 Jim

headline 2       Knopf
                 Jon
                 Doe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:04:45.970

听起来您看起来像一个枢轴，因此如果您按标题对查询进行分组，它将每个姓氏显示为一列。

我发现这个关于 mysql 枢轴的好教程可能对你有所帮助[http://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

```
headline 1       Jonny    Walker    Jim

headline 2       Knopf    Jon       Doe 
```

这是一个可以做到这一点的循环 *原谅我的 php 已经有一段时间了。

```
$curHeadline = "";

while ( $db_field = mysql_fetch_assoc($result) ) {

    if($curHeadline != $db_field['headline'])
    {
        $curHeadline = $db_field['headline'];
        print $curHeadline . $db_field['ID']
    }

    print $db_field['lastName'] . "<BR>";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T23:22:52.840

这样的事情会模糊地反映你的情况吗？

```
<?php

$sql = "
    SELECT
        `int_news`.`ID` AS `int_news_ID`, 
        `int_news`.`member_id`, 
        `int_news`.`news_id`, 
        `t1_member`.`id` AS `t1_member_id`, 
        `t1_member`.`firstname`,
        `t1_member`.`lastname`,      /* desired */
        `t1_news`.`id` AS `t1_news_id`, 
        `t1_news`.`headline`         /* desired */
    FROM
        `int_news` 
    LEFT JOIN `tl_member` ON `int_news`.`member_id` = `tl_member`.`id`
    LEFT JOIN `tl_news` ON `int_news`.`news_id` = `tl_news`.`id`
";

$res = mysql_query($query);

$arrHeadings = array();
while($row = mysql_fetch_assoc($res)) {
 // We want to output the results in groups of headings
 $arrHeadings[$row['heading']][] = $row;
}

// Don't forget to cleanse for html output (unlike below)
// Loop through the headers
foreach($arrHeadings as $heading=>$arrRow) {
 echo '<dl>';
 echo '<dt>'.$heading.'</dt>';
 echo '<dd>';

 // Loop through rows with the same header
 foreach($arrRow as $index=>$dbRow) {
  echo $dbRow['lastname'].'<br />';
 }

 echo '</dd>';
 echo '</dl>';
}

?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T23:44:24.123

试试这个 mysql ：

```
SELECT tlnews.headline, GROUP_CONCAT(tl_member.last_name)
FROM `int_news`  LEFT JOIN tl_member ON int_news.member_id = tl_member.id
                 LEFT JOIN tl_news   ON int_news.news_id   = tl_news.id
GROUP BY 1;

Expected Output:

headline1  Johnny,Walker,Jim
headline2  Knopf,Jon,Doe
... 
```

# c++ - 什么是 CppCheck 的 Windows 等效项？

> ID：14309233
> 
> 赞同：6
> 
> 时间：2013-01-13T22:59:25.300
> 
> 标签：c++, memory-leaks, cppcheck

我有一个极端的问题。

我已经在游戏上工作了大约两年（20000+ 行代码），最近我注意到大量的内存泄漏。问题是我无法追踪每一个，因为我的游戏太大了......

我四处搜索并注意到 CppCheck 在我的情况下会很有用，但问题是因为我使用的是 Windows，所以我不能使用 CppCheck（仅适用于 linux）。

我想知道是否有一个库或插件与 CppCheck 的 windows 等效，或者可能是一种在 windows 上使用 CppCheck 的方法。

我提出的所有可能性，以及其他问题的解决方案（例如对 std::deque 使用智能指针等）意味着我的程序很小或更合适：重写我的整个程序，我-真的-不想做...

IDE：代码块 10.05

编译器：MinGW 3.81 GCC 4.4.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:14:12.007

CppCheck 也适用于 Windows（查看 SourceForge 上的下载）。CppCheck 只是一个静态检查工具（它会分析您的源代码以发现一些潜在问题）。为了找到真正的内存泄漏，可能需要使用一些实际运行代码的调试工具（例如，查看 Google 的[Dr. Memory](https://code.google.com/p/drmemory/)）。

# svn - 如何将 SVN 转储文件导入 SourceForge？

> ID：14309235
> 
> 赞同：0
> 
> 时间：2013-01-13T22:59:49.620
> 
> 标签：svn, sourceforge, svndump

我目前在私有 SVN 主机上有一个项目，我想将它转移到我刚刚创建的 SourceForge 项目。我已经导出了当前存储库的转储文件，现在我正在尝试将其加载到我的新项目中。[我在此页面](https://sourceforge.net/apps/trac/sourceforge/wiki/SVN%20adminrepo)底部找到了如何操作的说明，但我之前从未使用过 shell 帐户、SSH、PUTTY 或任何此类东西，所以我有点迷茫。

首先说明说“将转储文件上传到交互式外壳”。我该怎么做呢？有没有我想在 PuTTY 中使用的命令，或者有没有办法可以将文件 FTP 到某个地方？

其次，当我尝试使用下面的命令检查我的存储库时，我收到一个错误“存储库锁定失败”。

```
adminrepo --checkout svn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:25:28.073

“将转储文件上传到交互式 shell”这句话在提及您期望的普通 shell 时毫无意义。我从未使用过 SF，但在浏览了您链接的页面后，我希望这就是他们的意思：

系统 shell.sourceforge.net 似乎提供了一个授予 ssh 访问权限的帐户。所以 a) 很可能它是一个普通的 linux 系统，b) 你可能可以使用 scp 或 sftp 协议将文件上传到该系统上的主目录。然后您可以使用 ssh 登录并使用该文件。您可以为此使用 putty，尽管 putty 是我见过的最糟糕的 ssh 实现。

ftp 肯定是不支持的。这是 70 世纪的协议。对所有管理员来说绝对不安全和恐惧。停止使用它，切换到 sftp。

# magento - 在 customer_register_success 事件之后从观察者更新客户数据

> ID：14309237
> 
> 赞同：1
> 
> 时间：2013-01-13T23:00:11.117
> 
> 标签：magento

从观察者设置客户组 ID 时遇到问题。该事件正在通过 customer_register_success 事件创建新用户。该事件被传递给我的观察者，例如

```
 public function registrationSuccess(Varien_Event_Observer $observer) {

        // extract customer data from event
        $customer = $observer->getCustomer()->getData();

        Mage::log('COOKIES', json_encode($_COOKIE));

        // a cookie should have been set with the membership id
        if (isset($_COOKIE['membership_account_id'])) {

            Mage::log('COOKIE SET, ASSOCIATING MEMBERSHIP');

            // associate new account with membership, and upgrade user to membership status
            $this->associateMembership($customer['entity_id'], $_COOKIE['membership_account_id']);

        }

    } 
```

然后调用 associateMembership 方法来更新组 ID，并设置一个名为 rms_id的*自定义客户属性：*

```
public function associateMembership($customer_id, $account_id) {

        // load customer model
        $customer = Mage::getModel('customer/customer')->load($customer_id);

        Mage::log('CUSTOMER DATA: ' . json_encode($customer->toArray()));

        // upgrade customer to membership level, and set custom rms_id attribute
        $customer
            ->setWebsiteId(Mage::app()->getWebsite()->getId())
            ->setGroupId(4)
            ->setRmsId($account_id);

        // save
        try {
            $customer->save();
            Mage::log('ACCOUNT ASSOCIATED: CUSTOMER ID = ' . $customer_id . ' ACCOUNT ID = ' . $account_id);
        } catch (Exception $ex) {
            Mage::log($ex);
        }

    } 
```

由于某种原因，没有错误回来。我得到了正确的用户 ID，一切似乎都在工作。但是，未设置该组，我的自定义 ID 也未设置。

我应该使用另一个允许保存的事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:59:45.127

在加载客户之前尝试加载网站 ID

```
$customer = Mage::getModel('customer/customer')
$customer->setWebsiteId(Mage::app()->getWebsite()->getId());
$customer->load($customer_id); 
```

`customer_register_success`将客户数据保存在自定义观察者中后将重新保存

还要`customer_register_success`传递客户数据，因此您不需要重新加载它。

见 /app/code/core/Mage/Customer/controllers/AccountController.php

```
Mage::dispatchEvent('customer_register_success',
    array('account_controller' => $this, 'customer' => $customer)
); 
```

尝试

```
public function registrationSuccess(Varien_Event_Observer $observer) {

    // extract customer data from event
    $customer = $observer->getCustomer();

    Mage::log('COOKIES', json_encode($_COOKIE));

    // a cookie should have been set with the membership id
    if ($membership_account_id = Mage::getModel('core/cookie')->get('membership_account_id')) {
        Mage::log('COOKIE SET, ASSOCIATING MEMBERSHIP');

        $customer->setGroupId(4)
                 ->setRmsId($membership_account_id);
    }
    return $this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:54:20.010

尝试在加载前设置客户网站 ID。例如

```
$customer = Mage::getModel('customer/customer')
    ->setWebsiteId(Mage::app()->getWebsite()->getId())
    ->load($customer_id); 
```

也尽量放死；在 $customer->save() 之后；在测试时 - 在这种情况下，您将确定在您之后没有其他任何东西会更改客户数据（可能是其他一些观察者）。

# html - 似乎无法设置低于 0.583em 的字体大小？

> ID：14309239
> 
> 赞同：0
> 
> 时间：2013-01-13T23:00:24.997
> 
> 标签：html, css

在我正在测试的某些浏览器中，我似乎无法将正文字体大小设置为小于 0.583em。是否有限制或有人遇到过这个？它是故意作为显示小字体效果的设计程序的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:06:01.720

大多数浏览器都有最小字体大小，并且会将任何较小的文本四舍五入到这个最小值。此最小值的值通常是用户可配置的，默认值取决于浏览器。

如果您使用的浏览器设置了最小字体大小，则无法覆盖它。对不起。您可能必须改用图像。

# php - MySQL搜索名字和姓氏

> ID：14309240
> 
> 赞同：0
> 
> 时间：2013-01-13T23:00:32.587
> 
> 标签：php, mysql, ajax

好的，我有一个名为的数据库表，`players`每个玩家都有一个名字和姓氏。然后我有一个 PHP Ajax 搜索工具，我调用它来搜索玩家。例如...在输入框中，有人键入`James`，并且在表格中有一行分别包含姓名和`James`姓氏`Smith`。

我做这个`$check = mysql_query("SELECT * FROM`球员`WHERE`姓`LIKE '%$name%' OR`姓`LIKE '%$name%' LIMIT 0, 10") or die(mysql_error());`

它返回至少 10 个带有名字或姓氏`like`的关键字`James`。但是，如果我键入`James Smith`，尽管它在表中，但我得到的结果为零。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:11:54.237

```
SELECT * FROM players WHERE CONCAT(forename, ' ', surname) = '$name' OR forename LIKE '%$name%' OR surname LIKE '%$name%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:02:28.187

将名称拆分为空格，以便查询运行两次（如果有一个空格）

查询将针对两个名称运行

```
$nameBits = explode($name," "); 
```

为每个 $nameBits 运行查询

```
surname LIKE '%$nameBits[$i]%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:53:19.490

您使用的是 InnoDB 还是 MyISAM？如果您使用 MyISAM，您可以创建一个包含组合名称的字段，然后使用全文索引进行搜索。因此，假设您添加了一个名为 combine_names 的新字段，您将像这样搜索它

```
SELECT * FROM table WHERE match(combined_names) against('John Smith'); 
```

这将找到任何包含 John 或 Smith 的行，您可以将其更改为仅匹配那些包含您将添加加号的部分的行，如下所示：

```
SELECT * FROM table WHERE match(combined_names) against('+John +Smith'); 
```

这是 MySQL 站点上的文档，您可以在其中找到更多信息：

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

# c# - 如何在加载 ASP 页面时自动运行方法？

> ID：14309241
> 
> 赞同：0
> 
> 时间：2013-01-13T23:00:33.037
> 
> 标签：c#, javascript, asp.net, webpage

我有一个页面在加载时显示以下内容：

```
<div>
  <img src="loading.gif" alt="Loading" /> Generating PDF Document, please wait.
<div> 
```

同时，我想自动运行这个方法后面的代码：

```
private void GeneratePdf()
{
    ...
} 
```

最后，我想在方法完成后将用户重定向到`File.pdf`路径。`GeneratePdf()`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:06:26.640

您需要按照[此处](http://www.w3schools.com/aspnet/aspnet_events.asp)`Page_Load`的说明使用该事件。此外，[这](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)是对页面生命周期的一个很好的解释。你应该看看它。以下是来自上述链接的一些示例代码：

```
<script runat="server">//This script runs on the server and dishes up some output for the page.
Sub Page_Load
lbl1.Text="The date and time is " & now()
End Sub
</script>

<html>
<body>
<form runat="server">
<h3><asp:label id="lbl1" runat="server" /></h3>//This generates the textbox that will be given a value from the above script.
</form>
</body>
</html> 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:09:10.260

我建议将 GeneratePDF 与 ajax 一起使用，因此您可以使用

```
$.ajax({
url: '/pdf/fiele_to_generate_pdf.aspx',
type: 'POST',
contentType: "application/json; charset=utf-8",
data: $.toJSON(jsonObj),
processData: false,
dataType: 'html',    
async: false,
success: function(html) {
    window.location.href = '/pdf/example.pdf';      
}}); 
```

所以加载你可以使用jquery，有一个名为BlockUI的好[插件你可以在你的ajax调用之前使用它。](http://jquery.malsup.com/block/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:15:26.733

您可以使用 asp:Timer 控件来指示何时应调用您的代码隐藏

```
<asp:Timer runat="server" ID="timer1" Interval="3000" OnTick="timer1_Tick"></asp:Timer> 
```

然后实现 Timer 的 Tick 事件。这将在标记中指定的 3 秒（3000 毫秒）后调用

```
protected void timer1_Tick(object sender, EventArgs e)
{
    GeneratePdf();
    Response.Redirect("~/somepath/generatedPDF.pdf");
} 
```

# javascript - 为表单添加进度条

> ID：14309243
> 
> 赞同：-3
> 
> 时间：2013-01-13T23:01:04.267
> 
> 标签：javascript, html

你好。向此表单添加进度条的最佳方法是什么？

```
<form action="upload.php" method="post" enctype="multipart/form-data">
<center><p> <input type='file' size='58' style='height: 30px; font-size: 18px' name='filename'></p>
<input type='image' src='<?php echo $menu_upload_button; ?>'>
</form> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:02:10.457

我会使用 jQuery 进度条[http://docs.jquery.com/UI/API/1.8/Progressbar](http://docs.jquery.com/UI/API/1.8/Progressbar)

# c++ - 编译时强制执行 constexpr 函数评估的单个表达式助手可能吗？

> ID：14309245
> 
> 赞同：4
> 
> 时间：2013-01-13T23:01:20.087
> 
> 标签：c++, c++11, macros, variadic-templates, constexpr

[@cyberpunk_](https://stackoverflow.com/users/1392142)正在尝试实现某些目标并对此提出了一些问题，但所有的追逐都归结为：

是否可以构建一个工具来强制对`constexpr`函数进行编译时评估？

```
int f(int i) {return i;}
constexpr int g(int i) {return i;}

int main()
{
    f(at_compilation(g, 0));
    int x = at_compilation(g, 1);
    constexpr int y = at_compilation(g, 2);
} 
```

在所有情况下，`at_compilation`强制对`g`.

`at_compilation`不需要是这种形式。

### 要求

*   允许任何（数字本机）文字类型作为 constexpr 函数的输入。
    *   这也可以根据函数参数类型进行硬编码。
*   允许任何（数字本机）文字类型作为输出，这是 constexpr 函数调用的结果。
    *   这也可以根据函数返回类型进行硬编码。

### 愿望

*   减少宏的使用，但不要害怕使用。
*   是通用的（不是硬编码的类型）。
*   支持任何文字类型。最后，任何数字本机文字类型都是必需的。

### 相关问题：

1.  [constexpr 函数何时在编译时进行评估？](http://isocpp.org/blog/2013/01/when-does-a-constexpr-function-get-evaluated-at-compile-time-stackoverflow)
2.  [强制在编译时评估常量表达式？](https://stackoverflow.com/q/14294271/1000282)
3.  [将任何函数作为模板参数传递？](https://stackoverflow.com/q/14297971/1000282)
4.  [它在 C++11 标准中的什么地方指定了在翻译过程中何时可以评估 constexpr 函数？](https://stackoverflow.com/q/13571749/1000282)

### 带有相关代码示例的答案：

*   [**1**](https://stackoverflow.com/a/14248304/1000282)
*   [**2**](https://stackoverflow.com/a/14297002/1000282)
*   [**3**](https://stackoverflow.com/a/14306843/1000282)（这个有一个说明性的`AT_COMPILATION`宏）

所有代码示例都有关于要求的限制。

清楚地解释这在 C++ 中是如何不可行的也是一个很好的答案。

我怀疑这是不可能的基于[@K-ballo](https://stackoverflow.com/users/927034) / [@Herb Sutter的](https://stackoverflow.com/users/1661064) [回答](https://stackoverflow.com/a/14248310/1000282)，其中指出“并且结果也用于常量表达式”。这不是我以前关于`constexpr`函数的概念的一部分，我首先认为只需将文字（或其他编译时输入）作为参数传递就足以保证（按标准）它在编译时被评估。

已经假设 constexpr 函数的目的是它们可以在必要时适合常量表达式情况，例如在数组边界中。没关系。鉴于此，这个问题是关于将它们用作编译时间计算的工具的黑客攻击。不管是好事还是坏事，都无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:30:59.350

我相信这是不可能的，因为编译器只需要计算在编译时使用的值，并且没有可以使用类类型值的每个部分的通用表达式。初始化私有成员的计算甚至可能无法强制执行，因为您将依赖公共 constexpr 成员函数来使用结果。

如果您可以通过以下方式访问对象表示

```
static_cast< char const * >( static_cast< void const * >( & const_value ) ) 
```

那么就可以对计算结果进行校验和（并将结果用作整数常量表达式），从而强制编译器执行所有没有实际意义的计算。但是在常量表达式中不允许转换 from `void *`to `char *`，并且同样试图用 a 完成相同的操作`union`。即使允许，如果构造函数留下一个未初始化的字节，在常量表达式中也禁止使用未初始化的值。

因此，即使 C++ 有更好的自省工具，仍然不可能恢复 constexpr 函数执行的工作，以便人为地使用某些成员而不是其他成员。

为了清楚起见（即使它重复了这个问题），没有理由想要这个。该语言已经要求检查是否*可以*在编译时计算所有内容（如果需要），并且强制编译器非延迟计算纯值的唯一效果是使其变慢并使用更多内存。

# 编辑（问题被彻底改变）

如果您有多个返回标量类型的函数，并希望确保其中一些函数在某些参数下作为常量表达式工作，那么使用`static_assert`.

```
constexpr int g(int i) {return i;}
int i = 5;
static_assert( g( 3 ) == 0, "failure 1" );
static_assert( g( i ) == 5, "failure 2" ); 
```

如果您不想修复结果值，请丢弃它们。（不幸的是，GCC[可能会优化掉](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55986)此类表达式的非常数部分，因此您可能需要在该平台上做一些更巴洛克的事情。

```
static_assert( g( i ) == 5 || true, "failure only if not constexpr" ); 
```

至于将其封装到宏中，其他相关问题似乎解决了很多问题。如果您想扩展其中一个答案或修复特定错误，最好解释该错误，而不是要求我们阅读大量文献并从头开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-03T04:19:54.283

感谢 C++17 (lambda constexpr, auto template parameter, inline as valid template non-type value) 我们现在有了一个解决方案：

```
//implementation
#include <utility>

template<auto X>
using constant = std::integral_constant<decltype(X), X>;

template<class T>
constexpr auto to_constant(T f) //should use && but clang has a bug that would make +f fail
{
   constexpr auto ptr = +f; //uses conversion operator to function pointer
   return constant<ptr>{}; //not yet implemented for gcc ("no linkage"), working with clang
}    

#define constexpr_arg(...) to_constant([]{ return __VA_ARGS__; })

//userland
template<auto Func>
constexpr void func(constant<Func>)
{
   constexpr decltype(auto) x = Func();
   static_assert(x == 3.14);
}

int main()
{
   func(constexpr_arg(3.14));
} 
```

证明它正在工作：[https ://godbolt.org/g/vWbyjE](https://godbolt.org/g/vWbyjE)

此外，此版本不适用于所有情况（主要是如果宏的参数使用非 constexpr 值但仍会产生 constexpr 结果）。

对于此类用例：[https ://godbolt.org/g/DRZ5JM](https://godbolt.org/g/DRZ5JM)

对于 gcc 版本（目前如此便携）：

```
//implementation
template<class T>
struct constant
{
   static constexpr decltype(auto) value = T::getPtr()();
};

template<class T>
constexpr auto to_constant(T&& f) //remove the && if you want to be also compatible with clang
{
   constexpr auto ptr = +f; //uses conversion operator to function pointer
   struct A
   {
      static constexpr auto getPtr() { return ptr; }
   };
   return constant<A>{};
}    

#define constexpr_arg(...) to_constant([]{ return __VA_ARGS__; })

//userland
template<class Constant>
constexpr void func(Constant&&)
{
   static_assert(Constant::value == 3.14);
}

int main()
{
   func(constexpr_arg(3.14));
} 
```

[https://godbolt.org/g/LBCYfi](https://godbolt.org/g/LBCYfi)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T02:27:34.790

使用`std::integral_constant`：

```
int x = std::integral_constant<int, g(0)>::value;
f(std::integral_constant<int, g(1)>::value); 
```

如果 g(n) 在编译时没有被计算，这段代码将不会编译。

# entity-framework - 实体框架中的并发性、原子性和隔离性

> ID：14309247
> 
> 赞同：1
> 
> 时间：2013-01-13T23:01:56.610
> 
> 标签：entity-framework, concurrency, transactions, ef-code-first, isolation-level

基于一些定期和同时传入的数据，我正在执行一项操作，该操作将向表中插入新行，或更新同一表中的现有行。是否插入或更新行取决于现有行的状态。因此，该操作的结果将受到该操作之前运行的影响，并影响后续运行。我需要使用事务、锁或其他东西来确保原子性/隔离性。Entity Framework 似乎有很多选择和注意事项（而且我一般也是数据库方面的新手），我不知道我应该朝哪个方向发展。TransactionScope、BeginTransaction、环境交易？可序列化或可重复读取？SaveChanges 和 AcceptAllChanges？我什至需要做一些特别的事情吗？可以添加新行的事实让我特别担心幻影行，尽管我几乎不明白这意味着什么。任何有关该主题的指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:08:35.460

本教程可能对您有所帮助 - [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an- asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

引用：

> **悲观并发（锁定）**
> 
> 如果您的应用程序确实需要防止并发场景中的意外数据丢失，那么一种方法是使用数据库锁。这称为悲观并发。例如，在从数据库中读取一行之前，您请求锁定以进行只读或更新访问。如果您锁定一行以进行更新访问，则不允许其他用户锁定该行以进行只读或更新访问，因为他们将获得一份正在更改的数据副本。如果您锁定一行以进行只读访问，其他人也可以将其锁定为只读访问，但不能锁定更新。管理锁有一些缺点。编程可能很复杂。它需要大量的数据库管理资源，并且随着应用程序用户数量的增加（也就是说，它不能很好地扩展），它可能会导致性能问题。由于这些原因，并非所有数据库管理系统都支持悲观并发。Entity Framework 没有为它提供内置支持，本教程也不会向您展示如何实现它。
> 
> **乐观并发**
> 
> 悲观并发的替代方案是乐观并发。乐观并发意味着允许并发冲突发生，然后在发生时做出适当的反应。例如，John 运行部门编辑页面，将英语部门的预算金额从 $350,000.00 更改为 $100,000.00。（约翰管理一个竞争部门，并希望为自己的部门腾出资金。）*

教程中的两个模型都有代码示例。

# c# - 串口数据精确时间戳

> ID：14309249
> 
> 赞同：0
> 
> 时间：2013-01-13T23:02:03.030
> 
> 标签：c#, serial-port

我正在做一个项目，该项目需要我从连接到编码器（带有 QSB 的美国数字 S5 光轴编码器）的串行端口读取的每个数据条目的精确时间（毫秒）。

我将编码器安装在一辆小推车上，用它来计算推车的速度。

这是我到目前为止所做的：

1.  连接到串行端口并将命令写入 QSB 以告诉编码器流数据。此处可用的命令：

    www.usdigital.com/assets/general/QSB%20Commands%20List_1.pdf www.usdigital.com/assets/general/QSB%20Applications%20Examples.pdf

2.  使用 readline() 读取接收到的数据。

3.  将所有数据行放入一个 StringBuilder 并将其输出到文件中。

当我将输出值阈值和间隔速率设置为尽可能快时，我能够在 1ms 之间获取数据条目。这是我得到的：

```
----time stamp(h/m/s/ms)-------value 
```

具有正确时间戳的数据：[https ://www.dropbox.com/s/pvo1dz56my4o99y/Capture1.JPG](https://www.dropbox.com/s/pvo1dz56my4o99y/Capture1.JPG)

但是，有突然的“跳跃”，当数据连续时大约 200 毫秒（我正在匀速滚动购物车）

时间戳不正确的数据：[https ://www.dropbox.com/s/sz3sxwv4qwsb2cn/Capture2.JPG](https://www.dropbox.com/s/sz3sxwv4qwsb2cn/Capture2.JPG)

这是我的代码：

```
private void buttonOpenEncoderPort_Click(object sender, EventArgs e)
    {
        serialPortEncoder.Write("S0E\r\n");//start streaming data
        System.Threading.Thread.Sleep(500);
        serialPortEncoder.Write("W0B0\r\n");//set threshold to 0 so the encoder will stream data a the interval I set.
        System.Threading.Thread.Sleep(500);
        serialPortEncoder.Write("W0C0000\r\n");//set output interval to 0 so it will stream as fast as possible
        System.Threading.Thread.Sleep(1500);
        backgroundWorkerEncoder.RunWorkerAsync();}
        //I am using a background worker to pull data out.

 private void backgroundWorkerEncoder_DoWork(object sender, DoWorkEventArgs e)
    {
        while (serialPortEncoder.IsOpen)
        {
            if (serialPortEncoder.BytesToRead != 0)
            {
                try
                {
                    String s = serialPortEncoder.ReadLine();//read from encoder
                    LazerBucket.Add(getCurrentTimeWithMS(timeEncoder) + "-----" + s + "\r\n");//put one line of data with time stamp in a List<String>
                    richTextBoxEncoderData.BeginInvoke(new MethodInvoker(delegate()
                    {
                        richTextBoxEncoderData.Text = s; })); //update UI

                }
                catch (Exception ex) { MessageBox.Show(ex.ToString()); }                   
            }

        }
    }

private String getCurrentTimeWithMS(DateTime d)//to get time
    {
        StringBuilder s = new StringBuilder();
        d = DateTime.Now;
        int hour = d.Hour;
        int minute = d.Minute;
        int second = d.Second;
        int ms = d.Millisecond;
        s.Append("  ----" + hour.ToString() + ":" + minute.ToString() + ":" + second.ToString() + ":" + ms.ToString());
        return s.ToString();
    } 
```

如果有人能找到时间跳跃的原因，我会很高兴。200ms 太多了，不容忽视。

```
EDIT: 
```

正如建议的那样，我试过了，`Stopwatch`但仍然有 200 毫秒的延迟。但是当我一起打印时间戳和 BytesToRead 时，我发现缓冲区中的数据随着 readLine() 的执行而减少。最终 BytesToRead 将下降到个位数，这就是延迟发生的地方。我正在寻找有关如何实现线程的更好解决方案。以及延迟的解释。也许我读得很快，所以缓冲区跟不上我？

```
EDIT: 
```

问题解决了。请参阅下面的答案。不过感谢您的回复。秒表真的很有帮助。现在我正在尝试确定事件驱动或轮询是否更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T01:54:03.120

在网上进行了一番无休止的研究后，我找到了延迟的原因。设备管理器--->端口---->高级---->将延迟更改为1毫秒即可解决问题。我现在正在使用单独的线程轮询数据。它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:49:29.880

您使用的是 C# 4.5 吗？如果是这样，我强烈建议使用`async`/ `await`over `BackgroundWorker`。

此外，`DateTime`对于*实时*应用程序来说也不是很准确。我建议`DateTime`严格作为*开始时间*，然后使用`Stopwatch`in`System.Diagnostics`来获取自*开始时间*以来*经过*的时间。

 *```
private void backgroundWorkerEncoder_DoWork(object sender, DoWorkEventArgs e)
{
  var startTime = DateTime.Now;
  var stopwatch = Stopwatch.StartNew();

  while (serialPort.IsOpen && !backgroundWorker.CancellationPending)
  {
    if (serialPort.BytesToRead > 0)
    {
      try
      {
        var line = serialPort.ReadLine();
        var timestamp = (startTime + stopwatch.Elapsed);

        var lineString = string.Format("{0}  ----{1}", 
                                       line,
                                       timestamp.ToString("HH:mm:ss:fff"));

        // Handle formatted line string here.
      }
      catch (Exception ex)
      {
        // Handle exception here.
      }
    }
  } 
```

至于*200 毫秒*的差异，可能是多种因素。也许它`BackgroundWorker`的优先级较低，并且没有像您希望的那样获得尽可能多的 CPU 时间。也可能是任何一个或实际串行设备本身的*I/O*端的东西。`SerialPort`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:37:26.910

当您想要精确测量时，您不应该使用 DateTime。现在，请尝试使用秒表。[如此处](https://stackoverflow.com/q/307582/1974021)和[此处](https://stackoverflow.com/a/2143784/1974021)详述，DateTime 是准确的，但不精确到毫秒。如果您需要精度**和**准确度，请在开始测量并从秒表获取偏移量时保存 DateTime.Now。

 **虽然 200 毫秒似乎是一个很长的延迟 - 即使对于 DateTime 也是如此 - 秒表确实可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T02:01:22.823

对我来说，操作系统似乎 [in your way]。

我建议以下。

1.  在单独的进程（或服务）或优先级高于正常的单独线程中从端口读取数据

2.  将原始（！）数据存储在具有准确时间戳的队列中，以供以后处理。这个“任务”应该尽可能轻，以避免 GC 或调度程序启动并停止它，即使是最少量的时间。例如，没有字符串连接或格式。这些操作会耗费时间并给内存带来压力。

3.  在单独的线程或进程中处理该数据。如果该时间保持一段时间，则不会造成真正的伤害，因为时间戳是准确的。

简而言之; 将读取与处理分离。

Imo 库存版本的 Windows 太多 IO 绑定（它喜欢并拥抱交换的概念），不适合 RT 进程。在 diff 框上使用 diff OS 来读取并将其发送到 Winbox 进行进一步处理可能也是一个考虑的选项（最后的手段？）***

# openssl - 使用 openssl 为 localhost 创建 csr

> ID：14309252
> 
> 赞同：3
> 
> 时间：2013-01-13T23:02:30.257
> 
> 标签：openssl, csr

我正在使用 openssl （在 Windows 上）创建一个 csr 以使用（测试试用）证书。我以前从未这样做过，我有一个问题：创建私钥后，您创建了一个 csr 文件，并要求您提供个人信息。它要求您做的一件事是 Common Name，即域名。我目前只运行本地主机。我正在练习如何创建一个 https:// 网站。

问题：我可以通过执行 localhost:82 之类的操作来创建有效的 csr 吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:08:50.337

简单的答案：打开你的`hosts`文件 (C:\Windows\System32\drivers\etc\hosts) 并想出一个花哨的域名：

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#       ::1             localhost
127.0.0.1       localhost

127.0.0.1       example.com  # <<< Your fancy domain goes here !!! 
```

然后，告诉您的网络服务器将 HTTPS 请求提供给`example.com`.

# asp.net-mvc - MVC：访问控制器中的显示名称属性

> ID：14309255
> 
> 赞同：2
> 
> 时间：2013-01-13T23:03:20.347
> 
> 标签：asp.net-mvc, parameters

是否可以访问控制器中参数的显示名称？例如，假设我将参数定义为

```
public class Class1
{
  [DisplayName("First Name")]
  public string firstname { get; set; }
} 
```

我现在希望能够在我的控制器中访问 firstname 的显示名称。就像是

```
string name = Model.Class1.firstName.getDisplayName(); 
```

有没有类似的方法`getDisplayName()`可以用来获取显示名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:58:23.773

首先，您需要获取一个表示该属性的 MemberInfo 对象。您将需要进行某种形式的反思：

```
MemberInfo property = typeof(Class1).GetProperty("Name"); 
```

（我使用的是“旧式”反射，但如果您可以在编译时访问该类型，也可以使用表达式树）

然后您可以获取属性并获取 DisplayName 属性的值：

```
var attribute = property.GetCustomAttributes(typeof(DisplayNameAttribute), true)
      .Cast<DisplayNameAttribute>().Single();
string displayName = attribute.DisplayName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:11:43.153

[在此链接](https://stackoverflow.com/q/5474460/807223)中找到了答案。我创建了一个 Html 帮助类，将其命名空间添加到我的视图 web.config 并在我的控制器中使用它。所有在[链接中描述](https://stackoverflow.com/q/5474460/807223)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T16:10:59.753

枚举的显示名称是这样的

这是示例

```
public enum Technology
{
  [Display(Name = "AspNet Technology")]
  AspNet,
  [Display(Name = "Java Technology")]
  Java,
  [Display(Name = "PHP Technology")]
  PHP,
} 
```

和这样的方法

```
public static string GetDisplayName(this Enum value)
{
var type = value.GetType();

var members = type.GetMember(value.ToString());
if (members.Length == 0) throw new ArgumentException(String.Format("error '{0}' not found in type '{1}'", value, type.Name));

var member = members[0];
var attributes = member.GetCustomAttributes(typeof(DisplayAttribute), false);
if (attributes.Length == 0) throw new ArgumentException(String.Format("'{0}.{1}' doesn't have DisplayAttribute", type.Name, value));

var attribute = (DisplayAttribute)attributes[0];
return attribute.GetName();
} 
```

而你的控制器是这样的

```
public ActionResult Index()
{
  string DisplayName = Technology.AspNet.GetDisplayName();

  return View();
} 
```

**对于类属性，请按照此步骤**

```
public static string GetDisplayName2<TSource, TProperty> (Expression<Func<TSource, TProperty>> expression)
    {
        var attribute =   Attribute.GetCustomAttribute(((MemberExpression)expression.Body).Member, typeof(DisplayAttribute)) as DisplayAttribute;
        return attribute.GetName();
    } 
```

并像这样在您的控制器中调用此方法

```
// Class1 is your classname and firstname is your property of class
string localizedName = Testing.GetDisplayName2<Class1, string>(i => i.firstname); 
```

# android - 在 Android 中使用 NanoHTTPD

> ID：14309256
> 
> 赞同：34
> 
> 时间：2013-01-13T23:03:27.837
> 
> 标签：android, file, http, nanohttpd

我正在尝试使用 NanoHTTP 来提供 HTML 文件。然而，NanoHTTP 相对没有文档，而且我是 Android 新手。我的问题是，我在哪里存储 html 文件，以及如何具体地使用 NanoHTTP 提供它。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-08T15:23:06.023

一个迟到的答案，但可能对其他人有用。

这是一个简单的 hello Web 服务器，与您所要求的不完全一样，但您可以从这里继续。下面的程序假设你`www`在 SD 卡的根目录下有一个目录，`index.html`里面有一个文件。

主要活动`Httpd.java`：

```
package com.inforscience.web;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import java.io.*;
import java.util.*;

public class Httpd extends Activity
{
    private WebServer server;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        server = new WebServer();
        try {
            server.start();
        } catch(IOException ioe) {
            Log.w("Httpd", "The server could not start.");
        }
        Log.w("Httpd", "Web server initialized.");
    }

    // DON'T FORGET to stop the server
    @Override
    public void onDestroy()
    {
        super.onDestroy();
        if (server != null)
            server.stop();
    }

    private class WebServer extends NanoHTTPD {

        public WebServer()
        {
            super(8080);
        }

        @Override
        public Response serve(String uri, Method method, 
                              Map<String, String> header,
                              Map<String, String> parameters,
                              Map<String, String> files) {
            String answer = "";
            try {
                // Open file from SD Card
                File root = Environment.getExternalStorageDirectory();
                FileReader index = new FileReader(root.getAbsolutePath() +
                        "/www/index.html");
                BufferedReader reader = new BufferedReader(index);
                String line = "";
                while ((line = reader.readLine()) != null) {
                    answer += line;
                }
                reader.close();

            } catch(IOException ioe) {
                Log.w("Httpd", ioe.toString());
            }

            return new NanoHTTPD.Response(answer);
        }
    }

} 
```

显然这个`NanoHTTPD`类必须在同一个包中。

您需要在`AndroidManifest.xml`.

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

并读取外部存储权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

**编辑：**要访问服务器，请使用您设备的 IP 打开您的网络浏览器，例如`192.168.1.20:8080`.

**笔记：**

*   在 Android 2.3 中测试
*   80 端口的使用仅限于 root 用户 ( [http://www.mail-archive.com/android-developers@googlegroups.com/msg47377.html](http://www.mail-archive.com/android-developers@googlegroups.com/msg47377.html) )。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T12:45:28.877

相当不错的源代码可以在这里找到： [https ://github.com/Teaonly/android-eye](https://github.com/Teaonly/android-eye)

检查存储 html 和 JavaScript 文件的 assets 文件夹 [https://github.com/Teaonly/android-eye/tree/master/assets](https://github.com/Teaonly/android-eye/tree/master/assets)

TeaServer - 服务器实现 [https://github.com/Teaonly/android-eye/blob/master/src/teaonly/droideye/TeaServer.java](https://github.com/Teaonly/android-eye/blob/master/src/teaonly/droideye/TeaServer.java)

MainActivity - 服务器初始化 [https://github.com/Teaonly/android-eye/blob/master/src/teaonly/droideye/MainActivity.java](https://github.com/Teaonly/android-eye/blob/master/src/teaonly/droideye/MainActivity.java)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-18T02:45:43.380

更新`WebServer`了适用于当前 NanoHTTPD 版本的类（参见 rendon 的回复）：

```
private class WebServer extends NanoHTTPD {

    public WebServer() {
        super(8080);
    }

    @Override
    public Response serve(IHTTPSession session) {
        String answer = "";
        try {
            // Open file from SD Card
            File root = Environment.getExternalStorageDirectory();
            FileReader index = new FileReader(root.getAbsolutePath() +
                    "/www/index.html");
            BufferedReader reader = new BufferedReader(index);
            String line = "";
            while ((line = reader.readLine()) != null) {
                answer += line;
            }
            reader.close();

        } catch(IOException ioe) {
            Log.w("Httpd", ioe.toString());
        }

        return newFixedLengthResponse(answer);
    }

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-31T08:31:26.763

看看我如何提供 HTML 文件和其他类型的文件。我有一个扩展 Nanohttpd 类的 AndroidWebServer 类。这是我的回复方法 -->

```
 public Response serve(IHTTPSession session) {
    String uri=session.getUri();
    String msg = "<html><body><h1>Hello server</h1>\n";

    File [] arrayfile;

    int i=0;

    try{
        session.parseBody(new HashMap<String, String>());
    }catch (ResponseException | IOException r){
        r.printStackTrace();
    }

    Map<String, String> parms = session.getParms();
    if (parms.get("username") == null) {
        msg += "<form action='?' method='get'>\n  <p>Your name: <input type='text' name='username'></p>\n" + "</form>\n";
    } else {
        msg += "<p>Hello, " + parms.get("username") + "!</p>";
    }
    msg += "<br><br><a href='/Open_rap'>Open Image of Lionel Messi</a><br><br>";
    msg += "<br><br><a href='/files'>Browse Files</a><br><br>";
    msg += "<br><br><a href='/getmethod'>GET METHOD OPERATION</a><br><br>";
    msg += "<br><br><a href='/postmethod'>POST METHOD OPERATION</a><br><br>";
    msg += "<br><br><a href='/jquery'>JQUERY OPERATION</a><br><br>";
    if(uri.equals("/hello")){
            String response="Hello World";
            return  newFixedLengthResponse(response);
    }
    else if(uri.equals("/getmethod")){
        String html="<html><head><h1>Welcome to the Form</h1><head/><body>";

        if(parms.get("name")==null){
            html +="<form action='' method='get'> \n " +
                    "<p>Enter Your Name:</p> <input type='text' name='name'>" +
                    "</form>" +
                    "</body>";
        }
        else{
            html +="<p>Hello Mr. "+ parms.get("name") +"</p>"+
                    "</body> ";
        }

        html +="</html>";
        return newFixedLengthResponse(html);

    }
    else if(uri.equals("/postmethod")){
        String html="<html><head><h1>Welcome to the Form</h1><head/><body>";
        Map<String, String> files = new HashMap<String, String>();
        Method method = session.getMethod();
        String postParameter="";

        html +="<form action='' method='post'> \n " +
                "<p>Enter Your Name:</p> <input type='text' name='name'>" +
                "</form>";

        if (Method.POST.equals(method) || Method.PUT.equals(method)) {
            try {
                session.parseBody(files);
            } catch (IOException ioe) {
                try {
                   // return newFixedLengthResponse(Response.Status.INTERNAL_ERROR, MIME_PLAINTEXT, "SERVER INTERNAL ERROR: IOException: " + ioe.getMessage());
                } catch (Exception e) {
                    e.printStackTrace();
                    Log.d("Exception", e.getMessage());
                }
            } catch (ResponseException re) {
                try {
                   // return newFixedLengthResponse(re.getStatus(), MIME_PLAINTEXT, re.getMessage());
                } catch (Exception e) {
                    e.printStackTrace();
                    Log.d("Exception", re.getMessage());
                }
            }
        }
        html +="</body></html>";
        String postBody = session.getQueryParameterString();
        postParameter = session.getParms().get("name");
        Log.d("Postbody",postBody+"\n"+postParameter);
        if(postParameter!=null){
            String html1="<html><head><h1>"+ postParameter +"</h1><head></html>";
            return newFixedLengthResponse(html1);
        }
        return newFixedLengthResponse(Response.Status.OK,"text/html",html);
    }

    else if(uri.equals("/Open_rap")){

        File root= Environment.getExternalStorageDirectory();
        FileInputStream fis = null;
        File file = new File(root.getAbsolutePath() + "/www/messi.jpg");
        Log.d("Path",root.getAbsolutePath());
        try{
            if(file.exists())
            {
                fis = new FileInputStream(file);

            }
            else
                Log.d("FOF :", "File Not exists:");
        }catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }

        return newFixedLengthResponse(Response.Status.OK,"image/jpeg",fis, file.length() );
    }
  else {
        return newFixedLengthResponse(msg + "</body></html>\n");
    }

} 
```

如您所见，我已经实现了 GET 和 POST 方法。您可以在这部分代码`uri.equals("/getmethod")`和`uri.equals("/getmethod")`.
此外，您可以看到部分 --> `uri.equals("/openrap")` ，这里我将 JPG 文件提供给客户端的浏览器，并且图像存在于`/www/`文件夹的内部目录中。
如果您有任何疑问，请联系我。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-04T02:35:02.517

试试这个... 创建 2 个包（活动，实用程序），仅用于组织 在活动中创建类 MainActivity.java 在实用程序中创建类 AndroidWebServer.java

```
package awserverfatepi.com.activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiManager;
import android.support.design.widget.CoordinatorLayout;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.v4.content.ContextCompat;
import android.support.v7.app.AlertDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

import awserverfatepi.com.R;
import awserverfatepi.com.util.AndroidWebServer;

public class MainActivity extends AppCompatActivity {

    private static final int DEFAULT_PORT = 8080;

    private AndroidWebServer androidWebServer;
    private BroadcastReceiver broadcastReceiverNetworkState;
    private static boolean isStarted = false;

    private CoordinatorLayout coordinatorLayout;
    private EditText editTextPort;
    private FloatingActionButton floatingActionButtonOnOff;
    private View textViewMessage;
    private TextView textViewIpAccess;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initGui();
        setIpAccess();
        floatingActionButtonOnOff = (FloatingActionButton) findViewById(R.id.floatingActionButtonOnOff);
        floatingActionButtonOnOff.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (isConnectedInWifi()) {
                    if (!isStarted && startAndroidWebServer()) {
                        isStarted = true;
                        textViewMessage.setVisibility(View.VISIBLE);
                        floatingActionButtonOnOff.setBackgroundTintList(ContextCompat.getColorStateList(MainActivity.this,
                                R.color.colorGreen));
                        editTextPort.setEnabled(false);
                    } else if (stopAndroidWebServer()) {
                        isStarted = false;
                        textViewMessage.setVisibility(View.INVISIBLE);
                        floatingActionButtonOnOff.setBackgroundTintList(ContextCompat.getColorStateList(MainActivity.this,
                                R.color.colorRed));
                        editTextPort.setEnabled(true);
                    }
                } else {
                    Snackbar.make(coordinatorLayout, getString(R.string.wifi_message), Snackbar.LENGTH_LONG).show();
                }
            }
        });

        initBroadcastReceiverNetworkStateChanged();
    }

    private void initGui() {
        coordinatorLayout = (CoordinatorLayout) findViewById(R.id.coordinatorLayout);
        editTextPort = (EditText) findViewById(R.id.editTextPort);
        textViewMessage = findViewById(R.id.textViewMessage);
        textViewIpAccess = (TextView) findViewById(R.id.textViewIpAccess);
    }

    private boolean startAndroidWebServer() {
        if (!isStarted) {
            int port = getPortFromEditText();
            try {
                if (port == 0) {
                    throw new Exception();
                }
                androidWebServer = new AndroidWebServer(port);
                androidWebServer.start();
                return true;
            } catch (Exception e) {
                e.printStackTrace();
                Snackbar.make(coordinatorLayout, "A porta " + port + " não está funcionando, por favor altere para outra no intervalo" +
                        " entre 1000 e 9999.", Snackbar.LENGTH_LONG).show();
            }
        }
        return false;
    }

    private boolean stopAndroidWebServer() {
        if (isStarted && androidWebServer != null) {
            androidWebServer.stop();
            return true;
        }
        return false;
    }

    private void setIpAccess() {
        textViewIpAccess.setText(getIpAccess());
    }

    private void initBroadcastReceiverNetworkStateChanged() {
        final IntentFilter filters = new IntentFilter();
        filters.addAction("android.net.wifi.WIFI_STATE_CHANGED");
        filters.addAction("android.net.wifi.STATE_CHANGE");
        broadcastReceiverNetworkState = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                setIpAccess();
            }
        };
        super.registerReceiver(broadcastReceiverNetworkState, filters);
    }

    private String getIpAccess() {
        WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
        int ipAddress = wifiManager.getConnectionInfo().getIpAddress();
        final String formatedIpAddress = String.format("%d.%d.%d.%d", (ipAddress & 0xff), (ipAddress >> 8 & 0xff),
                (ipAddress >> 16 & 0xff), (ipAddress >> 24 & 0xff));
        return "http://" + formatedIpAddress + ":";
    }

    private int getPortFromEditText() {
        String valueEditText = editTextPort.getText().toString();
        return (valueEditText.length() > 0) ? Integer.parseInt(valueEditText) : DEFAULT_PORT;
    }

    public boolean isConnectedInWifi() {
        WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        NetworkInfo networkInfo = ((ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
        if (networkInfo != null && networkInfo.isAvailable() && networkInfo.isConnected()
                && wifiManager.isWifiEnabled() && networkInfo.getTypeName().equals("WIFI")) {
            return true;
        }
        return false;
    }

    public boolean onKeyDown(int keyCode, KeyEvent evt) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if (isStarted) {
                new AlertDialog.Builder(this)
                        .setTitle(R.string.warning)
                        .setMessage(R.string.dialog_exit_message)
                        .setPositiveButton(getResources().getString(android.R.string.ok), new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                finish();
                            }
                        })
                        .setNegativeButton(getResources().getString(android.R.string.cancel), null)
                        .show();
            } else {
                finish();
            }
            return true;
        }
        return false;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        stopAndroidWebServer();
        isStarted = false;
        if (broadcastReceiverNetworkState != null) {
            unregisterReceiver(broadcastReceiverNetworkState);
        }
    }

} 
```

在 AndroidWebserver.java

```
package awserverfatepi.com.util;
import java.util.Map;
import fi.iki.elonen.NanoHTTPD;

public class AndroidWebServer extends NanoHTTPD {

    public AndroidWebServer(int port) {
        super(port);
    }

    public AndroidWebServer(String hostname, int port) {
        super(hostname, port);
    }

    @Override
    public Response serve(IHTTPSession session) {
        String msg = "<html><body><h1>Hello World</h1>\n";
        Map<String, String> parms = session.getParms();
        if (parms.get("username") == null) {
            msg += "<form action='?' method='get'>\n  <p>Seu nome: <input type='text' name='username'></p>\n" + "</form>\n";
        } else {
            msg += "<p>Hello, " + parms.get("username") + "!</p>";
        }
        return newFixedLengthResponse( msg + "</body></html>\n" );
    }
} 
```

不要忘记 Manifest.xml

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

最后

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/coordinatorLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="150dp"
            android:scaleType="centerCrop"
            android:src="@drawable/header" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@color/colorPrimaryLight"
            android:gravity="center"
            android:orientation="vertical">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal">

                <TextView
                    android:id="@+id/textViewIpAccess"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="http://000.000.000.000:"
                    android:textColor="@android:color/white"
                    android:textSize="20sp"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/editTextPort"
                    android:layout_width="60dp"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:hint="8080"
                    android:inputType="numberDecimal"
                    android:maxLength="4"
                    android:text="8080"
                    android:textColor="@android:color/white"
                    android:textSize="20sp"
                    android:textStyle="bold" />

            </LinearLayout>

            <TextView
                android:id="@+id/textViewMessage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:layout_marginRight="50dp"
                android:layout_marginTop="50dp"
                android:gravity="center"
                android:text="@string/message"
                android:textColor="@android:color/white"
                android:textSize="18sp"
                android:visibility="invisible" />

        </LinearLayout>

    </LinearLayout>

    <android.support.design.widget.FloatingActionButton
        android:id="@+id/floatingActionButtonOnOff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom"
        android:layout_margin="16dp"
        android:elevation="4dp"
        android:src="@drawable/on_btn"
        app:backgroundTint="@color/colorRed" />

</android.support.design.widget.CoordinatorLayout> 
```

# .htaccess - max_input_vars 在 PHP 5.2.17 中受限

> ID：14309258
> 
> 赞同：8
> 
> 时间：2013-01-13T23:03:32.670
> 
> 标签：.htaccess

我的托管服务提供商使用的是 PHP 5.2.17，我在将 max_input_vars 设置为 1000 时遇到问题

我正在使用 Prestashop 并且翻译不起作用。

我试图添加到.htaccess：

```
php_value max_input_vars 6000
php_value suhosin.post.max_vars 6000
php_value suhosin.request.max_vars 6000 
```

之后我无法访问我的页面，我得到页面未找到错误？

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-06T10:21:18.457

它应该工作，如果你添加

```
php_value max_input_vars 6000
php_value suhosin.post.max_vars 6000
php_value suhosin.request.max_vars 6000 
```

到你的`.htaccess`.

可以肯定的是，网络服务器可以读取您创建的 .htaccess 文件，并且该文件中没有其他拼写错误。

如果你得到一个空白页，请检查 apache 的错误日志是否有错误：

```
tail -f /var/log/apache2/error.log & 
```

如果您有权限：在重新启动 apache 时也检查系统日志是否有错误：

```
tail -f /var/log/syslog &
sudo apache2ctl restart 
```

# virtualbox - Virtualbox 上的 Android-x86：eth0 网络不可用

> ID：14309259
> 
> 赞同：0
> 
> 时间：2013-01-13T23:03:32.907
> 
> 标签：virtualbox, android-x86

> **可能重复：**
> [如何在 VirtualBox for Android 2.3 上设置网络](https://stackoverflow.com/questions/9257668/how-to-setup-network-on-virtualbox-for-android-2-3)

我正在尝试在 VirtualBox 上运行 android-x86-2.2-r2-eeepc.iso。这几乎是完美的，但我无法设置网络。即使在 VirtualBox 中正确配置，网络适配器也无法识别（我有其他虚拟机，它们工作得很好）。

**配置：**

*   虚拟盒子 4.2.6
*   android-x86-2.2-r2-eeepc.iso

**VirtualBox 的网络适配器配置：**

*   eth0 桥接网络适配器（英特尔 Wifi Link 1000 BGN）

**尝试在 android 机器内设置网络时：**

```
# netcfg eth0 up
action 'up' failed (No such device)
# netcfg
lo        UP     127.0.0.1     255.0.0.0        0x0000000049 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:51:02.560

当您说其他虚拟机时，它们也是Android的吗？这个问题似乎与上[一个问题](https://stackoverflow.com/questions/10069121/no-network-in-android-x86-on-virtualbox-4-1-2)相似。

# exception - Laravel 4 无法捕获异常

> ID：14309262
> 
> 赞同：8
> 
> 时间：2013-01-13T23:03:42.707
> 
> 标签：exception, exception-handling, laravel

我试图隔离这个问题（在我的应用程序之外产生它），但我不能。

```
try {
    $has_cache = Cache::has($cache_key);
}
catch (DecryptException $e) {
    echo "No biggie";
    exit;
} 
```

我也试过 a `catch (Exception $e)`，同样的事情发生了。

使用这段代码，我在第二行得到一个 DecryptException。这怎么会发生，它在 try 块中？

就像我说的，我试图在一个干净的项目上做同样的事情，但它发现了异常，所以我问我在哪里搞砸了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T13:58:54.160

如果您的应用程序是*命名空间*的，则需要使用

```
catch(\Exception $e);
// or preferably
catch(\RuntimeException $e); 
```

同样，我认为`DecryptException`您要捕获的名称是命名空间，`Illuminate\Encryption`因此您需要

```
catch(\Illuminate\Encryption\DecryptException)
// or use "use" somewhere before the try/catch
use \Illuminate\Encryption\DecryptException 
```

**请记住**，Laravel 4 仍然是**alpha**或**pre-beta**（显然他们自己也不确定），所以它绝不是稳定的，可能不是生产的最佳选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-10T05:57:20.440

对于 laravel 5.1，您应该编写（通常在文件开头带有其他使用语句）：

```
use Illuminate\Contracts\Encryption\DecryptException; 
```

在 catch 语句之前：

```
try {
    $data = \Crypt::decrypt($key);
} catch (DecryptException $e) {
    echo 'caught exception';
    exit();
} 
```

参考： [https](https://laravel.com/docs/5.1/encryption) ://laravel.com/docs/5.1/encryption - 在“解密一个值”下

可能对其他人有帮助。

# c# - 为什么 C# 中的类没有循环布局问题？

> ID：14309264
> 
> 赞同：8
> 
> 时间：2013-01-13T23:04:00.320
> 
> 标签：c#, class, struct, circular-dependency, cyclic-reference

```
public struct Unit
{
    Unit u;
} 
```

> 原因：
> 
> 'Unit' 类型的结构成员 'Unit.u' 在结构布局中导致循环。

但

```
public class Unit
{
    Unit u;
} 
```

编译。我理解我认为的问题。引用一个`Unit`对象时会形成一个无限循环，因为它必须初始化另一个成员`Unit`等等。但是为什么编译器只限制问题`structs`呢？问题不是也一直存在`class`吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-13T23:05:59.010

问题在于*布局*。

当`Unit`是一个结构时，a 的任何值`Unit`都必须包含另一个相同类型（因此大小相同）的值，无穷无尽。这不可能。我想您可能会争辩说，在没有其他字段的情况下，字段 for`Unit`不应该占用内存，因此您*可以将*其包含在自身中 - 但我相信 CLR 的工作方式可确保所有结构至少占用 1 个字节......

当`Unit`是一个类时，一个`Unit`对象只需要包含对另一个对象的*引用。*`Unit`没有存储问题，并且值可以为 null 开始。

可以这样想：你不能有一所房子包含另一所用相同蓝图建造的房子，但你当然可以有一所房子包含一张纸，上面有类似房子的地址......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:07:10.743

类是引用类型，所以我想不同之处在于在`class`示例中，它只需要保存对另一个实例的引用。对于您`struct`的值类型，它需要再次包含整个结构，因此是无限循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T23:15:01.907

会`struct`自动使用一个值初始化，因此在您的示例中，一个`Unit`值包含一个`Unit`值，该值包含一个值，该`Unit`值包含一个`Unit`值，等等...

您的`class`示例仅初始化对 的引用`null`，它没有无限回归。但是，如果您执行以下操作，您会遇到类似的问题：

```
class Unit
{
   Unit mUnit = new Unit();
} 
```

现在，构造 a`Unit`构造 a `Unit`，构造 a`Unit`等......在这种情况下，如果/当您尝试实例化`Unit`对象时，您将遇到运行时堆栈溢出异常。

我认为您可以`struct`通过使用可为空的类型来避免该问题，但问题仍然存在。我相信这是因为`struct`当设置为`null`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T23:07:18.110

因为`Struct`是`value type`。`Unit`可以保持价值本身吗？我认为这是不可能的。

但什么时候`Unit`是`class`，`class`是`reference type`。`Unit`object 可以持有对另一个对象的*引用*`Unit`。没事。

# javascript - BASIC Javascript 滑块/翻转没有 JQUERY

> ID：14309270
> 
> 赞同：1
> 
> 时间：2013-01-13T23:04:32.443
> 
> 标签：javascript

我正在努力学习`JavaScript`。

所以我可以构建自己的滑块、翻转、非常棒`JavaScript`的网络东西 :) - 无需使用插件等。

我希望有人可以指导我自己构建这些 - 教程`Jsfiddle`等有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:07:17.037

像这样的东西？

[http://symmetrycode.com/super-easy-javascript-slider-tutorial/](http://symmetrycode.com/super-easy-javascript-slider-tutorial/)

这是谷歌搜索“javascript滑块教程”的第一个发现。我建议您使用 Google 来处理您所追求的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:14:52.090

这个看起来是用 css 和 html5 编写的，使用 type 标记

```
type="range" 
```

[http://developerdrive.com/demo/slider_control/demo.html](http://developerdrive.com/demo/slider_control/demo.html)

# objective-c - 切换视图控制器时如何保留 UIDatePicker 和 UITextField 值？

> ID：14309271
> 
> 赞同：1
> 
> 时间：2013-01-13T23:04:34.563
> 
> 标签：objective-c, retained-in-memory

我有两个视图控制器。视图控制器 #2 具有 a`UIDatePicker`和 a `UITextField`。

如果我回到 View Controller #1 然后再回到 View Controller #2，UIDatePicker 已经丢失了之前选择的日期，并且 UITextField 是空白的。

它是这样初始化的：

```
@property (retain, nonatomic) IBOutlet UIDatePicker *datepick; 
```

我正在使用 Push Segue 进入第二个视图控制器并使用以下方法返回：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

如何“保存” UIDatePicker 日期和 UITextField 值，以便在返回该视图控制器时始终存在？

我搜索并找到了意见、假设和建议，但没有解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:17:06.297

发生这种情况是因为（如果您正确管理内存）第二个视图控制器在您弹出它时被释放（返回到第一个）。所以当你想回到它时，你实际上创建了一个带有默认值的全新实例。

一种解决方案是确保您从视图控制器 1 对视图控制器 2 有一个强引用。在第一个视图控制器中添加一个属性：

```
@property (nonatomic, retain) SecondViewController *mySecondViewController; 
```

实现getter：

```
- (SecondViewController *)mySecondViewController {
    if (!mySecondViewController) {
        mySecondVieWController = [[SecondViewController alloc] init...];
    }
    return mySecondViewController;
} 
```

然后当你想展示它时：

```
[self.navigationController pushViewController:self.mySecondViewController animated:YES]; 
```

第一次调用它时，`mySecondViewController`仍然是`nil`，所以 getter 初始化它。下次调用 getter 时，它只会返回相同的实例。

不要忘记在 dealloc 中释放视图控制器。顺便说一下，考虑使用[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

这种方法实现起来相对容易，但它有一个缺点，即第二个视图控制器保存在内存中，即使不再需要它也是如此。

另一种方法是将选定的日期或文本传递回您的第一个视图控制器（可能通过自定义委托协议），并且下次您想要呈现第二个视图控制器时，您将这些值传递给它以设置日期和文本.

# ruby-on-rails - Rails 脚手架生成器 ID

> ID：14309277
> 
> 赞同：0
> 
> 时间：2013-01-13T23:04:49.240
> 
> 标签：ruby-on-rails, ruby, erb

我使用脚手架生成器生成标题（字符串）和正文（内容），因此我可以创建“帖子”。

当我生成这个模型时，有没有办法可以`<%= posts.id %>`这样：

```
<% @posts.each do |post| %>
  <div id="<%= posts.id %>">
    <%= post.title %>       
  </div>
<% end %> 
```

## 更新

为混乱道歉。我的意思是当你生成一个模型时，它是否带有一个 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:06:08.113

以你想要的方式修改视图，你不需要保持它们在脚手架之后的样子。脚手架（和所有其他发电机）只是为了让您的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:06:29.083

您正在引用不存在的“帖子”。

@posts 是帖子的集合，因此也没有 id。

不过，每个帖子都有一个 id，因此您可以在该块内执行 post.id ，就像您拥有 post.title （单数）一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:08:18.837

您可以这样做`<%= div_for post %>`会给您帖子ID，或将您的更改`posts.id`为`post.id`

# actionscript-3 - 舍入 AS3 的大数

> ID：14309282
> 
> 赞同：2
> 
> 时间：2013-01-13T23:05:16.853
> 
> 标签：actionscript-3, actionscript, rounding

我有一个巨大的数字，例如 1.98726575488820e+30，我想将它四舍五入为这种形式：地板 + “。” （不带引号）+五位尾数+“e+...”（如果有e）但我不知道该怎么做。在这种情况下：1.98727e+30。

请多多帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:55:08.497

[Number.toPrecision](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Number.html#toPrecision%28%29)会给你一个这样的字符串：

```
var hugeNumber:Number = Number("1.98726575488820e+30");
var rounded:String = hugeNumber.toPrecision(6);
trace(rounded); // "1.98727e+30" 
```

# encryption - 人们如何攻击加密文件？

> ID：14309283
> 
> 赞同：3
> 
> 时间：2013-01-13T23:05:32.410
> 
> 标签：encryption, aes

我最近一直在阅读文件加密，并且在许多地方我看到警告说加密文件很容易被人们解密，无论加密算法强度如何。

但是，我无法理解有人会如何尝试解密加密文件。

例如，假设您有一个加密文件，并且您想知道它的内容。您不知道用于加密文件的密钥是什么，也不知道使用的加密算法。你做什么工作？（假设此示例的加密算法是对称密钥算法，例如 AES-256，即使用密钥加密的文件，需要所述密钥对其进行解密）。

此外，如果您知道使用的加密算法，您的方法将如何改变？（假设在这种情况下使用的加密算法是 AES-256，带有随机密钥 + salt）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:51:08.927

有两种方法可以回答这个问题，从字面意义上来说，完美的加密系统是如何受到攻击的，以及现实世界的系统是如何受到攻击的。当您开始更多地了解密码学时，您会发现的最大问题之一是选择算法是很容易的部分。管理这些密钥的方式变得异常困难。

攻击基本原语的方式取决于算法的类型。对于由对称密码（如[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard) ）加密的数据，您使用[蛮力攻击](http://en.wikipedia.org/wiki/Brute-force_attack)。也就是说，您有效地尝试了所有可能的键，直到找到正确的键。不幸的是，除非物理定律发生变化，否则无法尝试所有可能的 256 位密钥。来自维基百科：`"A device that could check a billion billion (10^18) AES keys per second would in theory require about 3×10^51 years to exhaust the 256-bit key space"`

[关于遇到看似加密的文件的问题，不知道使用的方法，这是一个被称为区分攻击](http://en.wikipedia.org/wiki/Distinguishing_attack)的难题。所有现代算法的要求之一是它们的输出应该与随机数据无法区分。如果我在 AES 和 Twofish 下加密某些东西，然后给你一些随机数据，没有任何其他信息（如标题），你就无法区分它们。话虽如此....

你问算法知识如何改变方法。密码学家通常做出的一个假设是，算法知识根本不应该影响安全性，它应该完全取决于密钥。通常，您使用的任何协议都会告诉您算法规范。如果这不是公开的，互操作性将是一场噩梦。例如，[密码套件是 SSL 等协议支持的算法集。](http://en.wikipedia.org/wiki/Cipher_suite)[NIST FIPS](http://csrc.nist.gov/publications/PubsFIPS.html)和[NSA Suite B](http://www.nsa.gov/ia/programs/suiteb_cryptography/)是由联邦政府标准化的算法，大多数人都遵循。

但在实践中，大多数密码系统都有更大的问题。

*   [糟糕的随机数生成](http://en.wikipedia.org/wiki/Random_number_generator_attack)：密码学需要非常好的、不可预测的随机数生成器。糟糕的随机数生成器会完全破坏安全性，例如[Netscape 的 SSL 实现](http://www.cs.berkeley.edu/~daw/papers/ddj-netscape.html)。您也有像[Debian RNG](http://www.schneier.com/blog/archives/2008/05/random_number_b.html)错误这样的示例，其中开发人员更改代码以满足内存泄漏警告，这最终导致 Debian 为每个系统生成相同的证书密钥。

*   [定时攻击](http://en.wikipedia.org/wiki/Timing_attack)：某些操作在计算机上执行的时间比其他操作要长。有时，攻击者可以观察到这种延迟并推断出秘密值。这[已](http://crypto.stanford.edu/~dabo/abstracts/ssl-timing.html)通过通过本地网络远程恢复服务器的私钥来证明。

*   [对主机的攻击](http://en.wikipedia.org/wiki/Cold_boot_attack)：攻击密码系统的一种方法是攻击主机。通过冷却内存，可以在您控制的机器中保存和检查其内容。

*   [橡胶软管密码分析](http://en.wikipedia.org/wiki/Rubber-hose_cryptanalysis)：也许是最简单的攻击之一，除非他们透露钥匙，否则你会以身体伤害或监禁来威胁当事人。关于法院是否可以强迫你透露加密密钥，有很多[有趣的判例法。](http://en.wikipedia.org/wiki/Key_disclosure_law)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:11:41.653

以基本的蛮力攻击为例。您要求软件尝试 1 个字符到 15 个字符与 az AZ 0-9 之间的每个组合，然后等待。软件将从 0 到 10... 开始，然后是 0a、0b、0c，直到找到密码。[维基百科](http://en.wikipedia.org/wiki/Brute-force_attack)会给你更多的细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:14:42.823

AES256 实际上是牢不可破的。

来自[http://www.wilderssecurity.com/showthread.php?t=212324](http://www.wilderssecurity.com/showthread.php?t=212324)：

> 我认为没有任何可信的推测可以证明任何机构都可以破坏正确实施的 AES。没有已知的密码分析攻击，实际上暴力破解 AES-256 可能在我们的任何一生中都超出了人类的能力范围。让我们假设 56 位 DES 可以在 1 秒内被暴力破解，这从一开始就是一个荒谬的假设。那么 AES-256 将需要 2^200 秒，即 5 x 10^52 年。因此，您可以看到，如果 AES 没有任何已知的弱点，即使使用量子计算，这在我们的任何一生中都是完全不可能的。大约 50 亿年后，在我们获得足够的计算能力以在没有已知弱点的情况下暴力破解 AES-256 之前，我们的太阳将爆炸。如果从未发现 AES 的弱点，那么绝对没有理由寻找除 AES 之外的另一种密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T00:03:34.157

我部分同意 Andrew，部分同意 Jeremy。

在这种情况下，如果正确生成了加密密钥（随机生成或基于复杂密码、良好的密钥派生函数和随机盐），那么 AES256 实际上是牢不可破的（正如安德鲁所说）

另一方面，如果未正确生成密钥。例如，只需 4 位 PIN 密码的直接哈希，蛮力可能非常有效。

关于“您不知道用于加密文件的密钥是什么，也不知道使用的加密算法。”

在大多数情况下，加密文件具有指定某些内容（用于加密文件、加密算法或其他内容的应用程序）的页眉或页脚。

您可以尝试通过填充来找出算法（例如 3DES 有填充，而 AES 有不同的填充）

# maven - gradle中的maven父pom依赖管理

> ID：14309290
> 
> 赞同：1
> 
> 时间：2013-01-13T23:06:16.053
> 
> 标签：maven, gradle, dependency-management

在 Maven 中，您可以在依赖管理部分声明依赖版本。假设我有这样的 pom 来管理我所有项目的某些库的默认版本（所以我不必一遍又一遍地重复它们，这样我就可以确保我所有项目的一致性）。

然后我有多个项目（项目 A 和项目 B）将这个 pom 设置为父 pom。如果在项目AI中要使用spring.jar，并且我在A的父pom的依赖管理中定义了spring.jar，我就不用再在A的pom中定义spring版本，我只要定义它依赖spring即可。到目前为止还可以，如何在 gradle 中也很简单（http://stackoverflow.com/questions/9547170）

我想知道的是这种情况：
想象一下spring 3.0依赖于hibernate 3.0。在 A 的父 pom 中，我已经在 3.1 版本的依赖管理部分定义了休眠依赖，但没有在那里定义 spring。Spring在A的pom中定义（3.0版本）。项目 A 的 maven 中的依赖关系解析将导致获取 spring 3.0 和 hibernate 3.1 - 因为尽管 spring 3.0 依赖于 hibernate 3.0，但 A 的父 pom 的依赖管理覆盖了 hibernate 版本，因此将使用 3.1。

有没有办法在gradle中定义类似的东西？请注意，我不必在 A 的 pom 中专门指定 hibernate，而且它也没有在 A 的父 pom 中指定为依赖项 - 它仅在 A 的父 pom 的依赖管理部分中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-04T22:29:13.970

io.spring.dependency [-management](https://spring.io/blog/2015/02/23/better-dependency-management-for-gradle)插件允许您使用 Maven bom 来控制构建的依赖项：

```
buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath "io.spring.gradle:dependency-management-plugin:0.5.3.RELEASE"
  }
}

apply plugin: "io.spring.dependency-management" 
```

接下来，您可以使用它来导入一个 Maven bom：

```
dependencyManagement {
  imports {
    mavenBom 'io.spring.platform:platform-bom:1.1.4.RELEASE'
  }
} 
```

现在，您可以在不指定版本号的情况下导入依赖项：

```
dependencies {
  compile 'org.springframework:spring-orm'
  compile 'org.hibernate:hibernate-core'
} 
```

# css - 媒体查询：如何不针对 Ipad

> ID：14309298
> 
> 赞同：0
> 
> 时间：2013-01-13T23:06:52.787
> 
> 标签：css, media-queries, landscape-portrait

我知道有很多关于媒体查询的话题，但今晚我被困在这个问题上：

我的目标是许多智能手机，特别是三星 Galaxy S3：

```
@media screen and (max-device-width: 720px), (min-device-width: 721px) { .. } 
```

它适用于肖像和风景！但我不知道为什么，这样我也瞄准了**Ipad 横向模式**，我不想这样做！如果我更喜欢将 Ipad 的纵向视图与智能手机一起定位！明确地说，我想要实现的是有 2 个版本的网站，默认是最大宽度 960px 的布局和一个更小的版本，非常适合智能手机，也适合 Ipad 和其他平板电脑纵向.. 现在移动版在智能手机上运行，​​但在 Ipad 上几乎没有......

我知道我可以直接针对 Ipad，但我不想复制许多与桌面相同的 css 规则！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:49:01.997

问题似乎与您的媒体查询的语法有关。您使用了逗号而不是，`and`我认为您的最大/最小方式错误。对于 CSS 媒体查询，a`,`是 OR 分隔符，而`AND`需要多个查询为真。

您的媒体查询应如下所示：

`@media screen and (min-device-width: 720px) and (max-device-width: 721px) { .. }`

或者写得更简洁，你可以使用特定的`device-width`：

`@media screen and (device-width: 720px) { .. }`

使用此方法，您可以使用逗号定位 Galaxy S3 纵向和横向，即：

`@media screen and (device-width: 720px), (device-width: 1280px) { .. }`

# java - 用户点击一级时获取小程序加载图片

> ID：14309301
> 
> 赞同：0
> 
> 时间：2013-01-13T23:07:02.947
> 
> 标签：java, applet

> **可能重复：**
> [在 JApplet 中添加图像](https://stackoverflow.com/questions/8325389/adding-image-in-japplet)

我将我的程序编译到一个小程序的类文件中，它通过 java 运行和工作，但是当我将它添加到我的 html 网页中时，它不会加载图片，我将所有图片以及类和 html 页面放在一个文件中它会加载小程序，我可以单击一级它只是不会绘制图片。这是我的代码。

```
 import javax.swing.JApplet;

    import javax.swing.*;

    import java.awt.*;
   import java.awt.event.*;

    import java.awt.Graphics;

    import javax.swing.ImageIcon;
    import javax.swing.JPanel;

    public class MainApplet extends JApplet {

public void init()
{
    LabelFrame frame = new LabelFrame();
}

public  class LabelFrame {

    public LabelFrame( ) 
    {

        int x = 500;
        // final LoadingPictures panel=new LoadingPictures();

        setSize(x,500);
        setLocation(350,200);

        setVisible(true);

        JMenuBar menubar = new JMenuBar();
        setJMenuBar(menubar);

        JMenu Change = new JMenu("Pick a Level");
        menubar.add(Change);
            JMenu Move = new JMenu("Move keys");
        menubar.add(Move);

        JMenu Options = new JMenu("Options");
        menubar.add(Options);

        JMenu About = new JMenu("About");
        menubar.add(About);

        JMenu Select = new JMenu("Select");
        menubar.add(Select);

        final JMenuItem black = new JMenuItem("Black BackGround");
        Options.add(black);

        final JMenuItem blue = new JMenuItem("Blue BackGround");
        Options.add(blue);

        final JMenuItem yellow = new JMenuItem("Yellow BackGround");
        Options.add(yellow);

        final JMenuItem green = new JMenuItem("Green BackGround");
        Options.add(green);

        final JMenuItem white = new JMenuItem("White BackGround");
        Options.add(white);

        JMenuItem info = new JMenuItem("infomation");
        About.add(info);

        JMenuItem Level2 = new JMenuItem("Level 1");
        Change.add(Level2);

        final JRadioButton redBlock = new JRadioButton("redblock");

        final JButton moveleft = new JButton("Left");
        final JButton moveright = new JButton("Right");

        Select.add(redBlock);

        Move.add(moveleft);
        Move.add(moveright);

        Level2.addActionListener(new ActionListener()
        {   
            public void actionPerformed(ActionEvent event1)
            {

                final LoadingPictures levelpics1 = new LoadingPictures(1);

                add(levelpics1);

                //levelpics1.setVisible(false);
                //levelpics1.setVisible(true);
                revalidate();
                //repaint();

            //Move the redblock right
                redBlock.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent rightselect)
                    {
                        moveright.addActionListener(new ActionListener()
                    {   
                        public void actionPerformed(ActionEvent right)
                        {
                            if (LoadingPictures.topone ==400)
                            {
                                JOptionPane.showMessageDialog(null, "You have won the level now move to next level");
                            }
                            else
                                {LoadingPictures.topone+= 50;

                            levelpics1.repaint();}

                        }});
                    }});

                //Move the redblock left
                redBlock.addActionListener(new ActionListener()
                {   
                    public void actionPerformed(ActionEvent leftselect)
                    {
                        moveleft.addActionListener(new ActionListener()
                    {   
                        public void actionPerformed(ActionEvent left)
                        {
                            if (LoadingPictures.topone == 0)
                            {
                                JOptionPane.showMessageDialog(null, "Can not move left anymore");

                            }
                            else
                            {
                                LoadingPictures.topone-= 50;

                            levelpics1.repaint();
                            }

                        }});
                    }});

                  int delay3 = 500; //milliseconds
                  ActionListener taskPerformer3 = new ActionListener() {
                      public void actionPerformed(ActionEvent evt) {

                          if(LoadingPictures.level2topleft == 0)
                            {
                                LoadingPictures.level2topleft+=325;
                                levelpics1.repaint();
                            }

                            else 
                            {
                                LoadingPictures.level2topleft-=25;
                                levelpics1.repaint();
                            }

                      }
                  };
                  new Timer(delay3, taskPerformer3).start();

                  int delay2 = 1000; //milliseconds
                  ActionListener taskPerformer2 = new ActionListener() {
                      public void actionPerformed(ActionEvent evt) {

                          if(LoadingPictures.topleftone == 0)
                            {
                                LoadingPictures.topleftone+=325;
                                levelpics1.repaint();
                            }

                            else 
                            {
                                LoadingPictures.topleftone-=25;
                                levelpics1.repaint();
                            }

                      }
                  };
                  new Timer(delay2, taskPerformer2).start();

                int delay11 = 750; //milliseconds
                  ActionListener taskPerformer11 = new ActionListener() {
                      public void actionPerformed(ActionEvent evt) {

                          if(LoadingPictures.level2topfor4block == 300)
                            {
                                LoadingPictures.level2topfor4block-=300;
                                levelpics1.repaint();
                            }

                            else 
                            {
                                LoadingPictures.level2topfor4block+=25;
                                levelpics1.repaint();
                            }

                      }
                  };
                  new Timer(delay11, taskPerformer11).start();

                black.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        levelpics1.setBackground(Color.black);

                    }});
                blue.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        levelpics1.setBackground(Color.blue);

                    }});
                yellow.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        levelpics1.setBackground(Color.yellow);

                    }});
                green.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        levelpics1.setBackground(Color.green);

                    }});
                white.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent event)
                    {
                        levelpics1.setBackground(Color.white);

                    }});

            }

        });

        info.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent event)
            {   
                JOptionPane.showMessageDialog(null,"•This is our     Final project for computer programming 3 \n" +
                                                "•\n•Based off of the " +
                                                "game by KIRA GAmes called UnBlock Me");
                            }});

    }

}

public static class LoadingPictures extends JPanel{

    ImageIcon block2vertical = new ImageIcon ("2block.jpg");
    ImageIcon block4vertical = new ImageIcon("4block.jpg");
    ImageIcon redblock = new ImageIcon("redblockhorizontal.jpg");

    ImageIcon Level2block4 = new ImageIcon("Level2block4.jpg");
    ImageIcon Level2block2 = new ImageIcon("Level2block2.jpg");
    static  int top = 0;
    static  int topone = 0;
    static  int topleft = 200;
    static int level2topleft = 200;
    static int topleftone = 225;
    static int topfor4blockvertical = 150;
    static int level2topfor4block = 150;
    private int j;
    public LoadingPictures(int i)
    {
        super();
        j = i;

    }
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        if (j == 1)
        {

            g.drawImage(redblock.getImage(),topone,200,this);
           g.drawImage(Level2block4.getImage(),350,level2topfor4block,this);
        g.drawImage(Level2block2.getImage(),100,level2topleft,this);
            g.drawImage(Level2block2.getImage(),200,topleftone,this);

        }
        else if(j == 2)
        {

        }
    }

}
     } 
```

这是我在加载小程序的 html 中的代码行

```
 <applet code ="MainApplet.class" height = "500" width = "500"></applet> 
```

# cakephp - 在 Cake 2.x 中使用多个插件时如何声明两个 $actsAs 变量实例

> ID：14309306
> 
> 赞同：1
> 
> 时间：2013-01-13T23:07:26.687
> 
> 标签：cakephp

我正在使用“cakedc search”和“meioupload”插件，我目前使用以下方式加载它们：

```
CakePlugin::load('MeioUpload');
CakePlugin::load('Search'); //in the bootstrap.php file. 
```

我需要能够让一个模型同时使用这两个插件，任何人都可以建议一种在同一模型中两次声明 $actsAs 变量的方法，以避免在“error.log”文件中出现以下错误：

```
Error: Fatal Error (64): Cannot redeclare Event::$actsAs 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:37:49.433

您可以根据需要为每个模型使用尽可能多的行为：

```
public $actsAs = array('Behavior1', 'PluginName.Behavior2', ...); 
```

我不太明白你的问题是什么。

# c# - 如果用户在内联编辑期间没有输入值，则将默认值 null 设置为 dev express 网格中的单元格

> ID：14309309
> 
> 赞同：1
> 
> 时间：2013-01-13T23:07:41.477
> 
> 标签：c#, asp.net-mvc, gridview, devexpress, inline-editing

这是从索引中调用的局部视图。在模型中，JobStatusSortOrder 设置为可为空的双精度。在这里，如果用户在内联编辑期间没有输入任何值，我如何将值默认设置为 null。我曾尝试寻找默认文本等选项，但找不到任何可以帮助我的选项。有人可以帮我吗？谢谢！

```
@model MyProject.Web.ViewModels.ProjectStatusListViewModel

@using MyProject.Data.Models;
@using System.Web.UI.WebControls;
@using DevExpress.Web.Mvc.UI;
@using DevExpress.Web.ASPxEditors;
@using DevExpress.Web.Mvc;
@using DevExpress.Web.ASPxGridView;

@{
Html.EnableClientValidation(true);

var grid = Html.DevExpress().GridView(
    settings =>
    {
        settings.Name = "gvProjectStatus";
        settings.KeyFieldName = "JobStatusID";
        settings.Width = Unit.Pixel(1080);
        settings.CallbackRouteValues = new { Controller = "Maintenance", Action = "ProjectStatusMasterPartial" };
        settings.ClientSideEvents.BeginCallback = "function(s,e){e.customArgs['id'] = '" + ViewContext.RouteData.Values["JobStatusID"] + "'}";

        settings.SettingsEditing.AddNewRowRouteValues = new { Controller = "Maintenance", Action = "JobStatusInlineAddNewPartial" };
        settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "Maintenance", Action = "JobStatusInlineEditPartial" };
        settings.SettingsEditing.DeleteRowRouteValues = new { Controller = "Maintenance", Action = "JobStatusInlineDeletePartial" }; 

        settings.SettingsEditing.Mode = GridViewEditingMode.Inline;
        settings.SettingsBehavior.ConfirmDelete = true;

        //Command column
        settings.CommandColumn.Visible = true;
        settings.CommandColumn.NewButton.Visible = true;
        settings.CommandColumn.DeleteButton.Visible = true;
        settings.CommandColumn.EditButton.Visible = true;
        settings.CommandColumn.Caption = "Actions";
        settings.CommandColumn.Width = 60; //Width is actually 100 not 60

        //for filtering
        settings.Settings.ShowFilterRow = true;
        settings.Settings.ShowFilterRowMenu = true;
        settings.CommandColumn.ClearFilterButton.Visible = true;

        settings.Columns.Add(column =>
        {
            column.FieldName = "JobStatusID";
            column.Caption = "JobStatusID";
            column.Visible = false;
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "SiteID";
            column.Caption = "SiteID";
            column.Visible = false;
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "JobStatusName";
            column.Caption = "Status Description";
            column.Settings.AllowAutoFilter = DefaultBoolean.True;
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "JobStatusCurrent";
            column.Caption = "Is Current";
            column.ColumnType = MVCxGridViewColumnType.CheckBox;
            column.Settings.AllowAutoFilter = DefaultBoolean.False;
        });

        settings.Columns.Add(column =>
        {
            column.FieldName = "JobStatusSortOrder";
            column.Caption = "Sort Order";
            column.Settings.AllowAutoFilter = DefaultBoolean.False;
        });
    });
}@grid.Bind(Model.JobStatus.ToList()).GetHtml() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T00:44:17.653

试试这个：

```
@{
Html.EnableClientValidation(true);

var grid = Html.DevExpress().GridView(
    settings =>
    {
        //your code
        //Add this code to initialize the rows for a New Row
        settings.InitNewRow = (sender, e) =>
        {
                e.NewValues["JobStatusSortOrder"] = 0; // set the default value as 0
        };
    });
}@grid.Bind(Model.JobStatus.ToList()).GetHtml() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:55:14.673

由于它是数字类型，因此 DevExpress 网格中的任何空值都应等于数据结构中的 null。你不能只检查空字符串的编辑值，然后在发送到数据层之前将它们设置为 null 吗？

# java - 更改标签时Android失去触摸事件

> ID：14309310
> 
> 赞同：0
> 
> 时间：2013-01-13T23:07:58.730
> 
> 标签：java, android, touch, android-view, gesture

我有一个带有 2 个选项卡的 TabActivity，其中包含一个响应 Scale 和 Scroll 事件的控件。

当我启动我的应用程序时，它从 Tab 1 开始，我可以缩放和滚动第一个 Tab 活动中显示的视图。

当我再次切换到选项卡 2 时，我可以缩放和滚动第二个选项卡活动中显示的视图。

一切看起来都不错。

当我突然切换回第一个选项卡时，我无法再缩放或滚动。如果我再次切换回第二个，那么那个工作正常。就好像触摸焦点被第二个选项卡上的视图所占据，并且从未被放弃。

我什至尝试过重新初始化我的 GestureDetectors，以防当一个 Activity 进入后台时它们以某种方式被破坏。

我试过以下代码无济于事：

```
public void onPause()
{
    super.onPause();
    mView.clearFocus();
}

public void onResume()
{
    super.onResume();
    mView.requestFocus();
    mView.InitGestureDetectors( this );
} 
```

InitGestureDetectors 只需执行以下操作：

```
public void InitGestureDetectors( Context ctx )
{
    mScaleGestureDetector   = new ScaleGestureDetector( ctx, new ScaleGestureListener() );
    mGestureDetector        = new GestureDetector( ctx, new GestureListener() );
} 
```

当我随后切换标签时，谁能告诉我如何让我的触摸手势再次工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:41:05.927

我最终找到了问题的根源。这是由用于在您更改选项卡时创建过渡动画的自定义 OnTabChangeListener 引起的。由于某种原因，这导致当视图移入后台时可见性状态未设置为 GONE。所以我添加了一个自定义 AnimationListener 以在 onAnimationEnd 和 onAnimationStart 中适当地设置可见性标志。

```
outAnim.setAnimationListener( new Animation.AnimationListener()
{
    public void onAnimationEnd( Animation animation )
    {
        outView.setVisibility( View.GONE );
    }

    public void onAnimationRepeat( Animation animation )
    {
    }

    public void onAnimationStart( Animation animation )
    {
        inView.setVisibility( View.VISIBLE );
    }
} ); 
```

现在我的触摸事件正在按我的预期处理！

# iphone - 表格单元格显示在表格视图的错误部分

> ID：14309317
> 
> 赞同：0
> 
> 时间：2013-01-13T23:08:57.673
> 
> 标签：iphone, objective-c, xcode, core-data

DataModel.h 代码文件

```
#import "DataModel.h"
#import <CoreData/CoreData.h>
#import "SettingsEntity.h"
#import "Constants.h"

@implementation DataModel

NSManagedObjectContext *managedObjectContextEntity;
NSManagedObjectContext *managedObjectContextMessage;
NSManagedObjectModel *managedObjectModel;
NSPersistentStoreCoordinator *persistentStoreCoordinator;
NSEntityDescription *theSettingsEntity;
NSEntityDescription *theMessagesEntity;

-(id) init
{

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"SOW" withExtension:@"momd"];
    managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    NSError *error = nil;

    NSURL *storeURL = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] URLByAppendingPathComponent:[Constants SQLLiteDB]];

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:managedObjectModel];

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    if (persistentStoreCoordinator != nil) {
        managedObjectContextEntity = [[NSManagedObjectContext alloc] init];
        [managedObjectContextEntity setPersistentStoreCoordinator:persistentStoreCoordinator];

        managedObjectContextMessage = [[NSManagedObjectContext alloc] init];
        [managedObjectContextMessage setPersistentStoreCoordinator:persistentStoreCoordinator];
    }

    theSettingsEntity = [NSEntityDescription entityForName:@"SettingsEntity" inManagedObjectContext:managedObjectContextEntity];
    theMessagesEntity = [NSEntityDescription entityForName:@"MessageEntity" inManagedObjectContext:managedObjectContextMessage];

    return self;
}

-(void) SaveSetting: (SettingsEntity *)setting
{
    NSError *error = nil;

    if (managedObjectContextEntity != nil) {
        if ([managedObjectContextEntity hasChanges] && ![managedObjectContextEntity save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
        else {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Confirmation" message:@"Settings were saved successfully." delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
            [alert show];
        }

    }
}

-(void) SaveMessage: (MessageEntity *)message
{
    NSError *error = nil;

    if (managedObjectContextMessage != nil) {
        if ([managedObjectContextMessage hasChanges] && ![managedObjectContextMessage save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }

}

-(NSArray *) GetSettingsResult
{

    NSManagedObjectContext *context = managedObjectContextEntity;
    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    [request setEntity:theSettingsEntity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"enteredDateTime" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [request setSortDescriptors:sortDescriptors];

    NSArray *results = [context executeFetchRequest:request error:nil];

    return results;
}

-(SettingsEntity *) GetSettingsEntity
{
    SettingsEntity *settingsEntity = [NSEntityDescription 
                                      insertNewObjectForEntityForName:[theSettingsEntity name] 
                                      inManagedObjectContext:managedObjectContextEntity];
    return settingsEntity;
}

-(NSArray *) GetMessageResult
{
    NSFetchRequest *request = [self GetMessageFetchRequest];
    NSArray *results = [managedObjectContextMessage executeFetchRequest:request error:nil];

    return results;
}

-(NSFetchRequest *) GetMessageFetchRequest
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    [request setEntity:theMessagesEntity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sentDateTime" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [request setSortDescriptors:sortDescriptors];

    return request;
}

-(NSFetchedResultsController *)  GetMessageFetchResultsController
{
    NSFetchRequest *fetchRequest = [self GetMessageFetchRequest];
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContextMessage sectionNameKeyPath:@"typeMessage" cacheName:nil];
    return aFetchedResultsController;
}

-(MessageEntity *) GetMessageEntity
{
    MessageEntity *mEntity = [NSEntityDescription 
                                      insertNewObjectForEntityForName:[theMessagesEntity name] 
                                      inManagedObjectContext:managedObjectContextMessage];
    return mEntity;
}

@end 
```

HistoryTableView 代码文件如下：

```
#import "HistoryTableViewController.h"
#import "MessageEntity.h"
#import "DataModel.h"
#import "HistoryDetailViewController.h"
#import "Constants.h"

@interface HistoryTableViewController ()
 - (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;
@end

@implementation HistoryTableViewController

//todo: zulfiqar review this line of code.
@synthesize fetchedResultsController = __fetchedResultsController;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem = self.editButtonItem;

    //todo: get fetched controller here.. and reuse it every where in rest of this class.

}

/* faisal code starts here */
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{

    NSFetchedResultsController *c = [self fetchedResultsController];
    NSArray *titles = [c sectionIndexTitles];
    NSString *title = titles[section];

    if ([title isEqualToString:@"E"])
    {
        return [Constants Email];
    }
    else if([title isEqualToString:@"T"])
    {
        return [Constants Text];
    }
    else
    {
        return [Constants Call];
    }
}

- (NSArray *)sectionIndexTitlesForTableView: (UITableView *)aTableView
{
    NSFetchedResultsController *c = [self fetchedResultsController];
    return [c sectionIndexTitles];
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSFetchedResultsController *c = [self fetchedResultsController];
    id<NSFetchedResultsSectionInfo> sectionInfo = c.sections[section];
    return sectionInfo.numberOfObjects;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSFetchedResultsController *c = [self fetchedResultsController];
    return c.sections.count;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{

    NSIndexPath *path = self.tableView.indexPathForSelectedRow;
    HistoryDetailViewController *hdvc = segue.destinationViewController;
    NSFetchedResultsController *c = [self fetchedResultsController];
    MessageEntity *message = (MessageEntity *)[c objectAtIndexPath:path];
    hdvc.currentMessageEntity = message;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source
/*
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSFetchedResultsController *c = [self fetchedResultsController];
    id <NSFetchedResultsSectionInfo> sectionInfo = c.sections[section];

    return sectionInfo.numberOfObjects;
}
*/
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSFetchedResultsController *c = [self fetchedResultsController];

    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell"];// %d_%d",indexPath.section,indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier  forIndexPath:indexPath];
    MessageEntity *message = (MessageEntity *)[c objectAtIndexPath:indexPath];
    cell.textLabel.text = message.typeMessage;

    return cell;
    /*

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EEE. MMM. dd, yyyy HH:mm"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    NSFetchedResultsController *c = [self fetchedResultsController];
    MessageEntity *message = (MessageEntity *)[c objectAtIndexPath:indexPath];
    NSString *sentDateTime = [dateFormat stringFromDate:message.sentDateTime];

    NSString *contactAdd;

    NSLog(message.typeMessage);
    if ([message.typeMessage isEqualToString:[Constants Email]])
    {
        contactAdd = message.toEmailAddress;
    }
    else
    {
        NSString *unformatted = message.toPhoneNumber;
        NSArray *stringComponents = [NSArray arrayWithObjects:[unformatted substringWithRange:NSMakeRange(0, 3)],
                                     [unformatted substringWithRange:NSMakeRange(3, 3)],
                                     [unformatted substringWithRange:NSMakeRange(6, [unformatted length]-6)], nil];

        contactAdd = [NSString stringWithFormat:@"(%@) %@-%@", [stringComponents objectAtIndex:0], [stringComponents objectAtIndex:1], [stringComponents objectAtIndex:2]];
    }

    NSString *header = [[NSString alloc] initWithFormat:@"%@",contactAdd];
    NSString *detail = [[NSString alloc] initWithFormat:@"%@ on %@", message.sentName, sentDateTime];

    cell.detailTextLabel.text = detail;
    cell.textLabel.text = header;

    return cell;
     */
}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        NSFetchedResultsController *c = [self fetchedResultsController];
        NSManagedObject *object = [c objectAtIndexPath:indexPath];
        NSManagedObjectContext *context = self.fetchedResultsController.managedObjectContext;
        [context deleteObject:object];
        NSError *error = nil;
        if (![context save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }

    }   
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // The table view should not be re-orderable.
    return NO;
}

- (void)tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView reloadData];

}

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }    
    DataModel *data = [[DataModel alloc]init];
    NSFetchedResultsController *aFetchedResultsController = [data GetMessageFetchResultsController];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}  

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

我的历史表视图如下所示：

![在此处输入图像描述](../Images/b68a093c94175f18834b0f993861f96e.png)

```
**Q. Why Email and Call are getting into wrong section?** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:22:18.543

如果`sectionNameKeyPath`为 fetched results 控制器设置 a ，则还必须将第一个排序描述符添加到使用相同键（或生成相同相对排序的键）的 fetch 请求中。

因此，`sectionNameKeyPath:@"typeMessage"`您应该为键“typeMessage”添加一个排序描述符：

```
NSSortDescriptor *sort1 = [[NSSortDescriptor alloc] initWithKey:@"typeMessage" ascending:YES];
NSSortDescriptor *sort2 = [[NSSortDescriptor alloc] initWithKey:@"sentDateTime" ascending:NO];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sort1, sort2, nil];
[request setSortDescriptors:sortDescriptors]; 
```

# php - 在javascript中调用php值

> ID：14309319
> 
> 赞同：1
> 
> 时间：2013-01-13T23:09:06.717
> 
> 标签：php, javascript, jquery

当谈到 Javascript 时，我有点新手，我正在尝试找到一种方法，可以将 php 值传递给 javascript/jquery 函数。

```
<script type="text/javascript">
$(document).ready(function() {
    $('div#audit_admin_tabs').slideTabs({
            contentAnim: 'slideH',
            contentAnimTime: 600,
            contentEasing: 'easeInOutExpo',
            tabsAnimTime: 300,
            buttonsFunction:'click',
            tabSaveState:true,
            autoHeight:true,
            urlLinking:false        
        });
});
</script> 
```

我有一个值调用 $audit_id，它的值来自上一页的 $_GET。我想将它添加到 audit_admin_tabs。我努力了...

```
div#audit_admin_tabs<? echo $audit_id; ?> 
```

但我意识到这行不通，因为 php 是服务器端，而 javascript 不是。我也尝试过回显整个函数，以便添加 php 值，但这也不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:13:25.903

```
div#audit_admin_tabs<?php echo $_GET['audit_id']; ?> 
```

当您想要获取参数时，您可以使用 $_GET['yourparam']

格雷茨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:02:44.357

你有错误的标签。它是 <?php ?> ... 不是 <? ?> ... 正如 Franco 所提到的，您需要使用 $_GET['audit_id'] （或者只使用 $_REQUEST['audit_id'] 因为这将负责从 $_GET 或 $_POST 获取值）。

回答您对 javascript 是客户端但 PHP 是服务器端的疑问 :: 是的，您的理解是正确的，但是在这种情况下，首先 PHP 会发挥它的魔力，因此里面的代码将被替换为它应该是的任何内容，然后生成的 javascript 将提供给浏览器。之后，浏览器将执行生成的 javascript。

所以，简而言之，它应该工作。

# ruby-on-rails - 从其他控制器访问和添加记录

> ID：14309321
> 
> 赞同：0
> 
> 时间：2013-01-13T23:09:24.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个模型

```
class Rcomment < ActiveRecord::Base
  attr_accessible :comment, :rating

  belongs_to :recipe
  belongs_to :user
end 
```

我正在尝试通过食谱的显示视图添加评论。我用虚拟数据填充了 rcomment 表，它通过以下方式显示良好：

```
@recipe = Recipe.find(params[:id])
@comments = @recipe.rcomments 
```

所以我尝试了@newcomments = @recipe.rcomments.build(params[:recipe])

但它根本不起作用，出现错误：#<#:0x25ccd10> 的未定义方法 `rcomments_path'

如何让它显示可用的 form_for？

```
%= form_for(@newcomments) do |f| %>

      <%= f.label :Comments %>
      <%= f.text_field :comment%>

      <%= f.label :ratings %>
      <%= f.text_field :rating %>

      <%= f.submit "Submit Comment", class: "btn btn-large btn-primary" %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:36:27.063

您已经创建了一个用于创建 Rcomment 的表单，但您的 routes.rb 中没有 rcomments 条目。但是，我认为最适合您的问题的是通过食谱创建 rcomments。您可以使用`accepts_nested_attributes_for`和来做到这一点`fields_for`。

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

所以，像这样——

在您的食谱模型中，添加：

```
attr_accessible :rcomments_attributes
accepts_nested_attributes_for :rcomments 
```

在你的 recipes#show 视图中：

```
<%= form_for(@recipe) do |f| %>
  <% f.fields_for :rcomments do |cf| %>
    <%= cf.label "Comments" %>
    <%= cf.text_field :comment%>

    <%= cf.label "Ratings" %>
    <%= cf.text_field :rating %>
  <% end %>

  <%= f.submit "Submit Comment", class: "btn btn-large btn-primary" %>
<% end %> 
```

# c++ - QSqlQuery 没有正确回答

> ID：14309330
> 
> 赞同：0
> 
> 时间：2013-01-13T23:10:25.573
> 
> 标签：c++, sqlite, qt, qsqlquery

我试图用 Qt 创建一个 SQLite 数据库，我做到了！我将我的数据库称为“ **prova_db** ”，它包含下表：

```
marker_db

id     site (columns)
0      www.google.it
1      www.youtube.it
2      www.facebook.it 
```

然后，我尝试查询我的 prova_db。这是代码：

```
int main () {
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("prova_db");
    if (!db.open()) { printf("DB doesn't exist\n");}
    else  {
        QSqlQuery query1;
            query1.exec( "SELECT site FROM marker_db WHERE id = 1");

        int i = query1.numRowsAffected();
        printf("result row: %d\n", i);
        while(query1.next()){
            QString str = query1.value(0).toString();
            printf("result: %s\n", str);
        }
    }
    db.close();
return 0;
} 
```

结果是：

```
result row : 0
result : (strange char) 
```

相反，结果应该是：

```
result row: 1
result : www.youtube.it 
```

我在哪里做错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:23:21.807

我认为您有错误的期望：结果告诉您查询*更改*`numRowsAffected()`了多少行。您的查询不会改变任何内容，因此结果应该是或者未定义。因此，您不应该期望第一个输出是. 请改用该方法来找出与您的查询匹配的行数。*`0``risultato riga: 1``size()``SELECT`*

 *第二个问题是您将一个`QString`对象传递给`printf()`，它需要一个指向以空值结尾的`char`值数组的指针（当您使用`%s`格式说明符时）。您需要将`QString`对象转换为指向 C 字符数组的指针。*

# php - PHP中的时间戳和逻辑

> ID：14309331
> 
> 赞同：1
> 
> 时间：2013-01-13T23:10:25.687
> 
> 标签：php, logic, timestamp

我正在构建一个查询 GPS 坐标和时间戳表的系统。最终目标是向用户提供 GPS 点列表，这些点在他们到达某个点前一小时或一小时后记录。

现在我像这样从数据库中取出一组附近的点，然后通过将这些附近的点与我之前预选的点进行比较来对它们进行逻辑处理

```
$getnear = mysql_query("SELECT id, latitude, longitude, SQRT(
POW(69.1 * (latitude - $latitude), 2) +
POW(69.1 * ($longitude - longitude) * COS(latitude / 57.3), 2)) AS distance
FROM geolocalQ HAVING distance < 0.0311 ORDER BY distance") or die(mysql_error());
$neartable = array();

while($row = mysql_fetch_assoc($getnear)) {
$neartable[$row['id']] = $row['id'];
} 
```

我希望能够根据时间运行该数组的每个元素的逻辑。所以像：

```
$time=abs($querytime-$mytime)
if ($time<=1 hour) {
#Perform action
} 
```

如何以这种格式从我的数据库中添加、减去和逻辑比较时间戳 2013-01-13 18:07:54 日期并不重要，所有计算都是在每天结束之前完成的，所以理论上我可以存储上午 12 点后数分钟内的数据。所以 1am 将被存储为 60， 2:30 被存储为 150，等等......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:29:18.913

看起来您可以让数据库执行日期时间操作并过滤结果。

这些[函数](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html)应该对 MySQL 有所帮助。

# macos - 如何让应用访问以前被拒绝的帐户？

> ID：14309335
> 
> 赞同：2
> 
> 时间：2013-01-13T23:11:07.357
> 
> 标签：macos, social-framework

我一直在使用 Accounts 框架，在测试期间我拒绝了应用程序访问 Accounts。现在，每次运行以下代码时都会返回 Denied。

```
[[self accountStore] requestAccessToAccountsWithType:twitterType options:nil completion:^(BOOL granted, NSError *error) {
    if (granted) {
        accounts = [[self accountStore] accountsWithAccountType:twitterType];
    } else if (error != nil) {
        NSLog(@"Failed to list Twitter accounts %@", error);
    } else {
        NSLog(@"Access denied");
    }
}]; 
```

糟糕的是我不知道在哪里重置它，谷歌搜索也无济于事。我已经看到如何在 iOS 上修复它，但我正在运行 Mac 应用程序并且该解决方案不适用。

Account Framework API 文档根本没有帮助。

掌脸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:19:32.370

想通了，我找到了一个名为**“~/Library//Application Support/com.apple.TCC/TCC.db”的应用程序ID的文件**

这是一个 sqlite3 文件，所以运行**sqlite3 "~/Library//Application Support/com.apple.TCC/TCC.db"然后在****"access" 表**中搜索您的应用程序，删除该行，如果您再次可以访问。

如果这没有帮助，还有一个名为**~/Library/Accounts/Accounts3.sqlite**的文件，其中包含您的应用程序的**ZAUTHORIZATION 表。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-19T16:20:01.137

由于大公司和其他公司的高调黑客攻击，提议的解决方案不再有效。该解决方案从未得到支持，是对黑客的邀请。正确的做法是使用 Apple 提供的工具：`tccutil`.

因此，请执行以下操作：

1.  打开`Terminal`.
2.  Run `tccutil reset <service> [bundle_id]`，其中`<service>`可以是`AddressBook`或 ，`Calendar`或者`All`带有要重置的捆绑包的可选 ID。

例子：

```
tccutil reset All com.apple.Terminal 
```

# r - 在 R 中绘图的对数刻度 y 轴中显示 0

> ID：14309336
> 
> 赞同：2
> 
> 时间：2013-01-13T23:11:16.720
> 
> 标签：r

因为 y 值太小，我需要对 y 轴使用对数刻度来显示差异。在数据中，一些条目没有任何值 (0)。有没有办法在 y 轴上显示“0”？

```
y=c(0.1, 0.001, 0.00001, 0.0000001, 0.000000001, 0)
x=c(1, 2, 3, 4, 5, 6)
plot(x, y, log="y"); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:08:21.343

我发现自己在做类似的事情，但也完全不同。对于在这里偶然发现的人来说，我所做的可能会有一些用处。

我遇到的问题是我有非常大的数字，我想以对数刻度显示，但也有一些零。我使用了条形图并将 NA 用于 0。事实证明，NA 被留作空白空间，我认为在这种情况下是有道理的。我举了一个只有 10 个数字的例子，但 R 似乎可以很好地处理更多值的缩放：

```
values<-c(100000, 100, 2, 5, NA, NA, 2, 1, NA, 1)
barplot(values, names=1:length(values), log="y") 
```

![说明性图像](../Images/96fc3d63c59387d730dc83fc3272b1ec.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:45:54.680

如果我正确理解您的问题，您想要的是 0（零），只是为了显示在 y 轴上

这个怎么样

```
y=c(0.1, 0.001, 0.00001, 0.0000001, 0.000000001, 0.0000000001)
x=c(1, 2, 3, 4, 5, 6)
plot(x, y, log="y",yaxt="n")
axis(2,at=c(0.1, 0.001, 0.00001, 0.0000001, 0.000000001, 0.0000000001) ,labels=c(0.1, 0.001, 0.00001, 0.0000001, 0.000000001,"0")) 
```

![在此处输入图像描述](../Images/35d873fda5c8ca9594abeaff957219fa.png)

在`plot` `yaxt="n"`禁用y轴的绘制然后我手动绘制y轴`axis`并使用参数设置`ticks`位置`at`。然后我将我拥有的最低值（在你的情况下为 0.0000000001）设置为**字符** `"0"`（在`label`参数处）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:13:08.010

选择一些最小值，并用它来表示 0：

```
m <- min(y[y!=0])/10
plot(x, pmax(y, m), log="y") 
```

![在此处输入图像描述](../Images/7678e3385d5be0862ca4d3171d80bce8.png)

# ruby-on-rails-3 - 如何通过这个例子实现 has_many :through 关系

> ID：14309337
> 
> 赞同：0
> 
> 时间：2013-01-13T23:11:18.883
> 
> 标签：ruby-on-rails-3, has-many-through

我一直在寻找类似的问题，但我仍然不明白如何实现这种关系。我当然有三个模型：

```
class Recetum < ActiveRecord::Base
    attr_accessible :name, :desc, :duration, :prep, :photo, :topic_id
    has_many :manifests
    has_many :ingredients, :through => :manifests
end

class Ingredient < ActiveRecord::Base
  attr_accessible :kcal, :name, :use, :unity
  has_many :manifests
  has_many :recetum, :through => :manifests
end

class Manifest < ActiveRecord::Base
  attr_accessible :ingredient_id, :quantity, :receta_id
  belongs_to :recetum
  accepts_nested_attributes_for :ingredient
  belongs_to :ingredient
end 
```

直肠将是一个配方（脚手架时的拼写错误），这个配方可能有一种或多种成分（已经在数据库上）。因此，当我创建一个新的直肠时，我需要创建新的直肠，并在清单中为用户输入的每种成分插入一条记录。

我现在需要一些关于视图和控制器的帮助，我如何创建带有成分字段的直肠表单，更重要的是我必须修改直肠控制器。

任何建议或帮助将不胜感激，因为这部分对我的项目至关重要，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:52:01.633

你有几个选项，主要取决于你想在你的视图中做什么。你想显示一组数量`max_ingredients`还是你希望它是完全动态的？动态案例肯定对用户来说看起来更好，但它确实会产生一些更复杂的代码。

这是一个很好的 RailsCast，它解释了如何通过 JavaScript 动态地做到这一点：

[http://railscasts.com/episodes/74-complex-forms-part-2](http://railscasts.com/episodes/74-complex-forms-part-2)

不幸的是，并不是每个人都在启用 JavaScript 的情况下运行，因此您可能需要考虑以静态方式进行。

`accepts_nested_attributes_for`首先，我认为您的模型不需要`Manifest`。但是，我确实认为您的`Recetum`模型中需要它。如果您要使用静态路由，您可能还需要设置一个`reject_if`选项。

```
accepts_nested_attributes_for :manifests, reject_if: :all_blank 
```

完成此操作后，您需要添加`manifests_attributes`到您的`attr_accessible`.

使用静态路由，您需要预先构建一些`manifests`. 在你的`new`控制器中，你会想要这样的东西：

```
max_ingredients.times do
  @recetum.manifests.build
end 
```

在你的和你的`edit`和的错误路径中`create`，`update`你可能想要：

```
(max_ingredients - @recetum.manifests.count).times do
  @recetum.manifests.build
end 
```

最后，您的视图将需要一些方法来设置成分。我现在假设一个选择框。

```
f.fields_for :manifests do |mf|
  mf.label :ingredient_id, "Ingredient"
  mf.collection_select :ingredient_id, Ingredient.all, :id, :name 
```

您可能希望通过列表或表格添加某种格式。

希望这足以让您入门。

# c# - 将 c# for 循环写入页面

> ID：14309348
> 
> 赞同：1
> 
> 时间：2013-01-13T23:13:17.107
> 
> 标签：c#

我正在努力学习 C#。我发现很多教程都写入控制台，但我想在 Web 应用程序的上下文中练习它，并以某种控制（文字、标签或其他东西）将我的结果写入页面. 我从一个简单的 FizzBu​​zz 程序开始，但由于某种原因，它只打印循环中的最后一个数字 (99)。有什么想法可以将每次迭代写到页面上吗？提前致谢

我的代码：

```
<asp:Literal ID="myLit" runat="server"></asp:Literal>

namespace practice
{
    public partial class fizzbuzz_csharp : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            for (int i = 0; i < 100; i++)
            {
                myLit.Text = i.ToString();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:16:36.887

您正在将文本直接写入控件而不是附加它。在循环结束时，之前的值被覆盖，只显示最后一个

将其更改为

```
MyLit.Text += i.ToString + "<BR />" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:15:43.033

您总是在循环中覆盖控件的`Text`属性。`Literal`这就是为什么你只看到最后一个。您可以使用 a[`ListBox`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listbox.aspx)代替：

```
for (int i = 0; i < 100; i++)
{
    myListBox.Items.Add(i.ToString());
} 
```

您也可以附加`<br />`以包装每一行，尽管这在 web.xml 中不是很好的做法。

```
for (int i = 0; i < 100; i++)
{
    myLit.Text += i.ToString() + "<br />";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T23:16:08.250

您正在覆盖`myLit.Text`循环的每次迭代，因此其最终值为`"100"`. 你想追加到`myLit.Text`。为了提高效率，这可能最好通过使用类似的东西来完成 a`System.Text.StringBuilder`然后将最终结果分配给`myLit.Text`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:25:08.057

将循环内部更改为

```
myLit.Text += i.ToString() + "<br />"; 
```

# emacs - 如何知道何时使用括号

> ID：14309350
> 
> 赞同：2
> 
> 时间：2013-01-13T23:13:27.010
> 
> 标签：emacs, elisp

我正在阅读[An Introduction to Programming in Emacs Lisp](http://www.gnu.org/software/emacs/emacs-lisp-intro/)，我看到以下内容：

此代码有效：

```
(message "The name of this buffer is: %s." (buffer-name)) 
```

而这个失败：

```
(message "The name of this buffer is: %s." buffer-name) 
```

但是，此代码有效：

```
(message "The value of fill-column is %d." fill-column) 
```

而这个失败：

```
(message "The value of fill-column is %d." (fill-column)) 
```

我的问题是为什么？`buffer-name`和 和有什么不一样`fill-column`？我怎么知道什么时候使用括号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:14:55.390

简单地说 -`buffer-name`是一个函数（返回一个字符串）并且`fill-column`是一个变量（计算为一个整数）。

所有 Lisp 方言中的函数调用都应该用括号括起来。

要查看 Emacs 中某个函数的详细信息，请按`C-h f function-name RET`。要查看 Emacs 中变量的详细信息，请按`C-h v variable-name RET`。

# servicestack - ServiceStack：使用 HttpResponse 时出现空异常

> ID：14309351
> 
> 赞同：2
> 
> 时间：2013-01-13T23:13:27.133
> 
> 标签：servicestack

我一直很喜欢 ServiceStack 中的干净约定，但是最近遇到了一个令人烦恼的问题。用户加载“创建”页面以创建“广告”，然后发布表单数据。术语服务器应处理发布的数据并在成功后重定向用户。

我用调试器运行它。POST 方法完成没有错误，但是服务完成后服务器总是返回错误：

```
Object reference not set to an instance of an object. AT 
```

`CompiledRazorTemplates.Dynamic.dfdcdedabeabca.Execute() at ServiceStack.Razor.Templating.TemplateService.ExecuteTemplate[T](T model, String name, String defaultTemplatePath, IHttpRequest httpReq, IHttpResponse httpRes) at ServiceStack.Razor.RazorFormat.ProcessRazorPage(IHttpRequest httpReq, ViewPageRef razorPage, Object dto, IHttpResponse httpRes) at ServiceStack.Razor.RazorFormat.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, Object dto) at ServiceStack.WebHost.Endpoints.Formats.HtmlFormat.&lt;&gt;c__DisplayClass1.&lt;SerializeToStream&gt;b__0(IViewEngine x) at System.Linq.Enumerable.Any[TSource](IEnumerable`1 个来源，功能`2 predicate) at ServiceStack.WebHost.Endpoints.Formats.HtmlFormat.SerializeToStream(IRequestContext requestContext, Object response, IHttpResponse httpRes) at ServiceStack.Common.Web.HttpResponseFilter.SerializeToStream(IRequestContext requestContext, Object response, Stream responseStream) at ServiceStack.Common.Web.HttpResult.WriteTo(Stream responseStream) at ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions.WriteToOutputStream(IHttpResponse response, Object result, Byte[] bodyPrefix, Byte[] bodySuffix) at ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions.WriteToResponse(IHttpResponse response, Object result, ResponseSerializerDelegate defaultAction, IRequestContext serializerCtx, Byte[] bodyPrefix, Byte[] bodySuffix)`

我已经将代码归结为这一点以隔离问题：

```
 [Route("/ad/create", Verbs = "GET")]
public class AdCreateViewModelCriteria
{
}

[Route("/ad/create", Verbs = "POST")]
public class AdCreate
{
    //some things
}

public class AdCreateService:Service
{
//the error occurs AFTER this method is complete
    public object Post(AdCreate ac)
    {
        try
        {
            //do some stuff
            return new HttpResult()
                       {
                           StatusCode = HttpStatusCode.Redirect,
                           Headers ={{HttpHeaders.Location, "/home"}}
                       };
        }
        catch (Exception e)
        {
            return new HttpResult(e)
                       {
                           StatusCode = HttpStatusCode.InternalServerError
                       };
        }
    }

    [DefaultView("adcreate")]
    public object Get(AdCreateViewModelCriteria criteria)
    {
        return AdCreateViewModel.Load(criteria,Db);
    }
} 
```

# c# - 不会发送邮件消息 - C#

> ID：14309352
> 
> 赞同：0
> 
> 时间：2013-01-13T23:13:27.020
> 
> 标签：c#, email

好的; 我似乎无法发送邮件消息。我将其作为控制台应用程序运行：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;

namespace Email
{
    class Program
    {
        static void EMail(string ToAddress, string Subject, string Body, string FromAddress, string Host, int Port, string Username, string Password)
        {
            System.Net.Mail.SmtpClient SMTPClient = new System.Net.Mail.SmtpClient(Host, Port);
            System.Net.Mail.MailMessage Message = new System.Net.Mail.MailMessage();
            Message.To.Add(new System.Net.Mail.MailAddress(ToAddress));
            Message.From = new System.Net.Mail.MailAddress(FromAddress);
            Message.Body = Body;
            Message.Subject = Subject;
            SMTPClient.EnableSsl = true;
            SMTPClient.Credentials = new System.Net.NetworkCredential(Username, Password);
            SMTPClient.Send(Message);
            SMTPClient.SendCompleted += new System.Net.Mail.SendCompletedEventHandler(FinishedSending);
        }
        static void FinishedSending(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
        {
            Console.WriteLine("DONE!");
        }
        static void Main(string[] args)
        {
            EMail("***********", "Hi!", "This is a test, Sent from a C# application.", "******", "smtp.gmail.com", 465, "****************", "**************");
            Console.ReadLine();
        }
    }
} 
```

我没有收到任何错误，我没有在我的 gmail 帐户中收到它，也没有写“完成！”。我已经允许端口 465，传出和传入。在端口 465 上远程登录 smtp.gmail.com 会导致一个空白的命令提示符窗口。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:17:31.177

如果没有例外，电子邮件应该通过。

它没有打印“完成！” 因为您在调用方法**后**正在挂钩事件。`Send()`在调用 send**之前挂上。**

编辑：是的，应该是`SendAsync`。发送是同步的。

也可以按以下顺序尝试这些参数：

```
smtpClient.EnableSsl = true;
smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
smtpClient.UseDefaultCredentials = false;
smtpClient.Credentials = (...) 
```

此代码适用于我，在一个新的 Winforms 应用程序中：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        static void smtpClient_SendCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
        {
            var state = e.UserState;
            //"Done"
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var smtpClient = new SmtpClient("smtp.gmail.com", 587)
            {
                EnableSsl = true,
                DeliveryMethod = SmtpDeliveryMethod.Network,
                UseDefaultCredentials = false,
                Credentials = new NetworkCredential("myEmail@gmail.com", "mypassword")
            };

            var message = new MailMessage("myEmail@gmail.com", "myEmail@gmail.com", "Subject", "body");

            smtpClient.SendCompleted += new SendCompletedEventHandler(smtpClient_SendCompleted);
            smtpClient.SendAsync(message, new object());

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T18:50:02.383

转到任务 -> 操作 -> 编辑操作并将“开始于（可选）”设置为可执行文件所在的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:58:04.973

我认为 System.Net.Mail.SmtpClient::Send() 可能没有应有的同步。我在由任务计划程序运行的 powershell 脚本中使用这个类。从 powershell 控制台运行脚本时，我总是收到该消息。但是，当将脚本作为计划任务运行时，我不会。

我通过在发送后让脚本休眠 1 秒解决了这个问题——我怀疑 SMTP 会话被脚本结束时关闭的 powershell 杀死，从交互式会话运行它时不会发生这种情况。

我知道这很草率，但我还没有找到更好的方法来确保它真的完成了。也许有一个必须刷新的缓冲区？

另一种方法可能是在发送实际消息后使用虚假消息调用 Send()。我发现如果我这样做，消息会一直发送。这仍然很草率，但我发现它没有那么草率，因为它实际上更有可能需要在发送之前刷新缓冲区，而等待任意时间肯定不会导致它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T04:22:33.947

它不起作用的原因是因为您的目标是端口 465。将 EnableSsl 与端口 25（尽管不是 Gmail）或端口 587 一起使用应该适合您。

SmtpClient 类不支持端口 465 上的 SMTPS，或 Microsoft 在很多地方称之为“隐式 SSL”。EnableSsl 属性控制在建立未加密连接后类是否会查找和使用 STARTTLS 命令。

根据[Microsoft SmtpClient.EnableSsl 属性文档](https://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl(v=vs.110).aspx)：

> SmtpClient 类仅支持 RFC 3207 中定义的基于传输层安全的安全 SMTP 的 SMTP 服务扩展。在这种模式下，SMTP 会话在未加密的通道上开始，然后客户端向服务器发出 STARTTLS 命令以切换到使用 SSL 进行安全通信。有关详细信息，请参阅 Internet 工程任务组 (IETF) 发布的 RFC 3207。
> 
> 另一种连接方法是在发送任何协议命令之前预先建立 SSL 会话。此连接方法有时称为 SMTP/SSL、SMTP over SSL 或 SMTPS，默认使用端口 465。当前不支持使用 SSL 的替代连接方法。

如果您确实需要通过端口 465 使用 SMTPS，则可以使用已弃用的 System.Web.Mail 类在幕后使用 CDONTS 的解决方案，例如[https://stackoverflow.com/a/1014876](https://stackoverflow.com/a/1014876)。

# html - 如何将文本与 twitter 按钮对齐？

> ID：14309353
> 
> 赞同：0
> 
> 时间：2013-01-13T23:13:42.813
> 
> 标签：html, css

如何将文本与 twitter 按钮对齐？

这就是我希望它对齐的方式：

![](../Images/0deb558c6d835b4f4b82d2a803c4f4df.png)

这是代码：

```
<div class="pull-right">
            <p>text <b>text</b> <iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/follow_button.1357735024.html#_=1358118140271&amp;id=twitter-widget-0&amp;lang=it&amp;screen_name=test&amp;show_count=true&amp;show_screen_name=true&amp;size=m" class="twitter-follow-button" style="width: 214px; height: 20px;" title="Twitter Follow Button" data-twttr-rendered="true"></iframe>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:19:27.143

[`vertical-align`](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)CSS 属性似乎是您正在寻找的。

这是我制作[的代码的工作示例。](http://jsfiddle.net/X4YRA/)

# azure - 安装 Azure SDK 1.8 时，云模板未安装在 VS2012 中

> ID：14309360
> 
> 赞同：1
> 
> 时间：2013-01-13T23:14:33.560
> 
> 标签：azure, visual-studio-2012

我有 Windows 8 和 Visual Studio 2012 的全新安装，没有以前的版本。安装 Azure SDK 1.8 后，没有为 .Net 4 或 4.5 框架安装模板。我们如何安装 SDK 的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:39:47.763

您需要适用于 Visual Studio 的 Windows Azure 工具，可在此处找到：http: [//www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

但我建议您尝试通过 WPI 进行完整安装（这会安装所有必需的组件）： http: [//go.microsoft.com/fwlink/ ?LinkId=254364&clcid=0x409](http://go.microsoft.com/fwlink/?LinkId=254364&clcid=0x409)

# php - 需要帮助以防止 sql 注入

> ID：14309364
> 
> 赞同：0
> 
> 时间：2013-01-13T23:14:44.780
> 
> 标签：php, mysql

嗨，我有以下声明

```
function count_rows($table_name, $condition = null, $debug = false)
{
    $query_result = $this->query("SELECT count(*) AS count_rows FROM " . $this->db_prefix . $table_name . " " . $condition, $debug);
    $count_rows = $this->sql_result($query_result, 0, 'count_rows');

    return $count_rows;
} 
```

我一直在使用 sql injection me addon for firefox，它给了我错误

运行脚本时出现Mysql错误：

```
The query you are trying to run is invalid
Mysql Error Output: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '))' at line 2
SQL Query: SELECT count(*) AS count_rows FROM database_auctions a WHERE a.active=1 AND a.approved=1 AND a.deleted=0 AND a.list_in!='store' AND a.catfeat='1' AND a.closed=0 AND (a.category_id IN ()) 
```

如何针对 sql 注入清理此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:19:45.773

正如您在查询的这一部分附近看到的那样：

`AND (a.category_id IN ())`

您实际上并没有给它一个子查询/值列表。您需要这样做以确定结果是否包含指定的 category_id。

为了帮助防止 sql 注入，我建议使用 PHP 的 mysqli 扩展。我相信他们支持准备好的陈述。通过使用prepared statements，您放弃了字符串连接的使用，服务器“准备”了sql语句，因此查询只发送到服务器一次，然后在您实际执行SQL查询时只发送参数。

[http://php.net/manual/en/class.mysqli-stmt.php](http://php.net/manual/en/class.mysqli-stmt.php)

[http://php.net/manual/en/mysqli-stmt.prepare.php](http://php.net/manual/en/mysqli-stmt.prepare.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:23:11.367

看起来，当您通过时，`$contidion`您忘记了在`a.category_id IN ()`parentesis 之间的某些东西应该是值。为了避免 SQL 注入检查[这个](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# mkmapview - “mapView:didUpdateUserLocation:”未调用

> ID：14309367
> 
> 赞同：0
> 
> 时间：2013-01-13T23:14:56.583
> 
> 标签：mkmapview

我想实现该方法：“mapView:didUpdateUserLocation:”...奇怪的是，当我测试应用程序（甚至在设备上）时，似乎没有调用该方法。我已经设置了地图视图委托，完成：

```
[myMap setUserTrackingMode:MKUserTrackingModeFollow];
[myMap.delegate mapViewWillStartLocatingUser:myMap]; 
```

但它没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:46:01.140

你不应该自己调用 mapViewWillStartLocatingUser，如果你给你的 mapView 一个委托，然后告诉地图视图开始显示用户的位置，它就会被调用。

# css - 如何使用 CSS 设置提交按钮的样式？

> ID：14309373
> 
> 赞同：1
> 
> 时间：2013-01-13T23:15:44.597
> 
> 标签：css, forms, button, submit, styling

所以我希望我的提交按钮的宽度与我的其他输入字段不同。我正在尝试这样做，但提交按钮仍然具有相同的宽度。请帮忙！这是我的CSS：

```
 #logon {
        position: absolute;
        margin-left: 60%;
        top: 10px;

    }
    #logon input { 
        display: inline;
     border: 1px solid #d1d1d1;
font: bold 12px Arial,Helvetica,Sans-serif;
color: #bebebe;
width: 150px;
padding: 6px 15px 6px 35px;

text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
-webkit-transition: all 0.7s ease 0s;
-moz-transition: all 0.7s ease 0s;
-o-transition: all 0.7s ease 0s;

    }
        #logon input.button { 
        display: inline;
     border: 1px solid #d1d1d1;
font: bold 12px Arial,Helvetica,Sans-serif;
color: #bebebe;
width: 50px;
padding: 6px 15px 6px 35px;

text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
-webkit-transition: all 0.7s ease 0s;
-moz-transition: all 0.7s ease 0s;
-o-transition: all 0.7s ease 0s;

    } 
```

还有我的 HTML：

```
 <div id="logon"><form action="login_r.php" method="POST"> <input name="myusername" type="text" size="40" placeholder="Username..." /> <input name="mypassword" type="password" size="40" placeholder="Password..." /><input type="button" value="Log In"></form></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:18:35.277

正确的属性选择器是：

```
#logon input[type='button'] 
```

但是，如果您要提交表单，则应该是`<input type="submit" />`，在这种情况下，您需要

```
#logon input[type='submit'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:18:06.627

选择`.button`器用于“按钮”**类。**您的`<input>`元素上没有类。你可以试试这个：

```
input[type=button] { whatever } 
```

就我个人而言，我`<button type=submit>`更喜欢它，`<input type=submit>`因为它在内容（如小图标等）方面更加灵活。

# macos - 为什么在 64 位应用程序中运行的 32 位插件中内存分配/释放会失败，但在 32 位应用程序中不会？

> ID：14309375
> 
> 赞同：3
> 
> 时间：2013-01-13T23:16:08.237
> 
> 标签：macos, plugins, new-operator, 32bit-64bit, delete-operator

我正在为 Windows 和 Mac（VST 和 AU）开发音频插件，我遇到了仅在 64 位主机 DAW（在我的情况下为 Reaper）中打开插件时出现的问题操作系统 10.8。

该插件是一个通用二进制构建，在 32 位主机中运行良好，但在 Reaper 64 位中打开它会导致它在分配过滤器对象的随机新/删除指令上崩溃。我尝试将其构建为 64 位插件只是为了进行测试，但同样的事情发生了。

什么可能导致这种情况发生？

编辑：这是崩溃报告的屏幕截图： ![在此处输入图像描述](../Images/735168383b1507f7383403729265d86c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:35:22.503

我发现使用 64 位主机时导致随机内存错误的问题。有一个 memset 函数引用指针的大小，声明为浮点数，以清除其内容。当然，在 64 位主机上，指针大小为 64 位，因此 memset 函数破坏了堆，从而导致反复无常的内存错误。

这是 memset 函数：

```
float *z;
//...
memset(z, 0, sizeof(z)*size); 
```

目的是如果 z 最终声明为双精度，则此函数将自动调整分配的内存块。我忽略了在 64 位上下文中会发生什么。

# linux - 在 ARM 上的 Linux 上运行 MPI (OpenMPI) 应用程序时出现问题

> ID：14309386
> 
> 赞同：1
> 
> 时间：2013-01-13T23:17:43.240
> 
> 标签：linux, arm, mpi, openmpi

我正在尝试按照[本教程](http://www.linux-mag.com/id/5759/#install-openmpi)在基于 ARM 的 Ubuntu 11.10 系统上构建和运行 MPI 应用程序。

在我的PC机上安装open-mpi环境时，示例程序运行良好。但是，在 ARM 机器上尝试相同的操作，终端挂断，我需要从第二个终端终止 MPI 进程才能释放它。

我在两台机器上使用 apt-get 安装的 MPI 包都是`mpi-default-dev`和`mpi-default-bin`，所以我假设这些包已经尽可能地更新了。

本教程中的第一个示例程序使每个进程都打印一条带有一些信息的“hello”消息。在 PC 上，我收到来自所有 8 个进程的消息（尽管在单核上运行），然后程序结束。在 ARM 上，我根本没有得到任何输出。该程序在启动后立即卡住。

**知道出了什么问题吗？我什至不确定从哪里开始调试这个？**

**更新：**我尝试删除 OpenMPI 包并安装替代 MPICH2 包 - 但结果是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:36:55.540

Ubuntu 11.10 没有附带用于 ARM 的功能性 Open MPI 实现（尽管它可能附带了非功能性的实现）。Ubuntu 12.04 做到了。

我建议从源代码构建您自己的 Open MPI - 可在[http://www.open-mpi.org/software/ompi/v1.6/](http://www.open-mpi.org/software/ompi/v1.6/)获得，除非您可以更新到更新版本的 Ubuntu。

[或者，您可以使用https://bugs.launchpad.net/ubuntu/+source/openmpi/+bug/949044](https://bugs.launchpad.net/ubuntu/+source/openmpi/+bug/949044)中指出的修复程序重建 11.10 软件包。

# javascript - AngularJS - $http 和通知服务

> ID：14309389
> 
> 赞同：3
> 
> 时间：2013-01-13T23:17:58.970
> 
> 标签：javascript, angularjs

我正在尝试在 angularJS 上构建一个简单的通知服务：

```
angular.module("my.services", [])
    .service("NotificationsService", function() {

        this.show  = function(message, options) {
            // display a notification
        };

        this.error = function(message) {
            this.show({...});
        }

        ...

    }); 
```

当服务器返回嵌入在 api 中的“通知”数组时，这将被触发：

```
{
    notifications: [{type: "error", message: "Error message"}, ...],
    data: [item1, item2, ...]
} 
```

现在我想将我的服务插入 $http，但我找不到这样做的方法！...

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T00:14:14.293

使用[Response 拦截器](http://docs.angularjs.org/api/ng.$http)，并将您的`NotificationsService`注入其中：

```
angular.module("my.services", [], function ($httpProvider) {

    $httpProvider.responseInterceptors.push(function (NotificationsService) {

        function notify ( response ) {
            angular.forEach(response.notifications, function ( obj ) {
                NotificationsService.show( obj );
            });
            return response;
        }

        return function ( promise ) {
            return promise.then(notify, notify);
        }
    });

}); 
```

# c# - 从选定进程读取传出数据包

> ID：14309393
> 
> 赞同：3
> 
> 时间：2013-01-13T23:18:10.643
> 
> 标签：c#, tcp, packet-capture

是否可以从 C# 中的选定进程读取传出数据包？如果是，我应该使用什么 api？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T01:41:53.583

我假设您正在尝试做类似于*WireShark*或*Winsock Packet Editor*的事情。

简短的回答是**否定**的。绝对没有内置功能的命名空间或程序集。

很长的答案是**肯定的，但你必须弄脏你的手。**您很可能不得不制作一个*C++ DLL*注入到进程中以“窥探”它。但是，您可以通过*C#接口此**DLL*并使您的接口全部在*.NET*中。

 **您的第一步是创建*C++ DLL*，它只需要一些导出：

```
bool InitialzeHook()
{
  // TODO: Patch the Import Address Table (IAT) to overwrite
  //       the address of Winsock's send/recv functions
  //       with your SpySend/SpyRecv ones instead.
}

bool UninitializeHook()
{
  // TODO: Restore the Import Address Table (IAT) to the way you found it.
}

// This function will be called instead of Winsock's recv function once hooked.
int SpySend(SOCKET s, const char *buf, int len, int flags)
{
  // TODO: Do something with the data to be sent, like logging it.

  // Call the real Winsock send function.
  int numberOfBytesSent = send(s, buf, len, flags);

  // Return back to the calling process.
  return numberOfBytesSent;
}

// This function will be called instead of Winsock's recv function once hooked.
int SpyRecv(SOCKET s, char *buf, int len, int flags)
{
  // Call the real Winsock recv function to get the data.
  int numberOfBytesReceived = recv(s, buf, len, flags);

  // TODO: Do something with the received data, like logging it.

  // Return back to the calling process.
  return numberOfBytesReceived;
} 
```

这一切中最困难的部分是修补**导入地址表**（IAT）的功能。关于如何遍历它并在其中查找函数导入有各种资源。**提示：**您必须按**序号**而不是名称来修补*Winsock*导入。

 **查看[深入了解 Windows PE 格式（第 2 部分）](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)和[C++ 代码示例](http://www.governmentsecurity.org/forum/topic/32819-printing-import-table-pe-file-format/)。

完成所有这些后，您必须将您制作的*DLL*注入目标进程。这是执行此操作的*C++*伪代码（在我脑海中）：

```
// Get the target window handle (if you don't have the process ID handy).
HWND hWnd = FindWindowA(NULL, "Your Target Window Name");

// Get the process ID from the target window handle.
DWORD processId = 0;
DWORD threadId = GetWindowThreadProcessId(hWnd, &processId);

// Open the process for reading/writing memory.
DWORD accessFlags = PROCESS_VM_OPERATION | 
                    PROCESS_VM_READ | 
                    PROCESS_VM_WRITE | 
                    PROCESS_QUERY_INFORMATION;

HANDLE hProcess = OpenProcess(accessFlags, false, processId);

// Get the base address for Kernel32.dll (always the same for each process).
HMODULE hKernel32 = GetModuleHandleA("kernel32");

// Get the address of LoadLibraryA (always the same for each process).
DWORD loadLibraryAddr = GetProcAddress(hKernel32, "LoadLibraryA");

// Allocate some space in the remote process and write the library string to it.
LPVOID libraryNameBuffer = VirtualAllocEx(hProcess, NULL, 256, 
                                          MEM_COMMIT | MEM_RESERVE,
                                          PAGE_EXECUTE_READWRITE);

LPCSTR libraryName = L"MySpyLibrary.dll\0";
DWORD numberOfBytesWritten = 0;
BOOL writeResult = WriteProcessMemory(hProcess, libraryNameBuffer,
                                                (LPCVOID)libraryName,
                                                strlen(libraryName) + 1,
                                                &numberOfBytesWritten);

// Create a thread in the remote process, using LoadLibraryA as the procedure,
// and the parameter is the library name we just wrote to the remote process.
DWORD remoteThreadId = 0;
HANDLE hRemoteThread = CreateRemoteThread(hProcess, NULL, 0,
                                          (LPTHREAD_START_ROUTINE)loadLibraryAddr,
                                          libraryNameBuffer,
                                          0, &remotThreadId);

// Wait for our thread to complete and get the exit code (which is the return value).
DWORD loadedLibraryAddr = 0;
BOOL waitResult = WaitForSingleObject(hRemoteThread, INFINITE); 
BOOL exitResult = GetExitCodeThread(hRemoteThread, &loadedLibraryAddr);

// TODO: Check that it was loaded properly
// if(lodadedLibraryAddr == NULL) { ... }

// Cleanup our loose ends here.
VirtualFreeEx(hProcess, libraryNameBuffer, 256, MEM_RELEASE);
CloseHandle(hRemoteThread);
CloseHandle(hProcess); 
```

*不过，您可以通过C# 平台调用*(pInvoke)执行相同的操作。如何记录数据并将数据传输回*C#*监控程序取决于您。您可以在*C#*中使用一些*进程间通信*，例如[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)。`NamedPipeClientStream`

 *但是，这会做到这一点，而且美妙的部分是它几乎适用于任何程序。同样的技术可以应用于任何类型的嗅探，而不仅仅是*Winsock*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:07:50.260

当然你可以......但前提是该进程对它的侦听器有一个“公共钩子”。否则，您将不得不创建一个嗅探器：调试可执行文件，找到套接字发送缓冲区的偏移量并将读取器连接到它。通过类似防火墙的应用程序更容易做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:39:27.237

您可以使用 TPL 数据流来做到这一点。*****

# c# - 使用 Json.Net，如何将大量文本流式传输到单个 json 属性？

> ID：14309394
> 
> 赞同：1
> 
> 时间：2013-01-13T23:18:15.687
> 
> 标签：c#, stream, json.net

我需要构建一个`JObject`具有单个属性的，该属性可能包含大量文本。我从流中读取此文本，但我不知道如何将其写入单个`JToken`.

这是我到目前为止所尝试的：

```
using (var stream = new MemoryStream())
{
    using (var streamWriter = new StreamWriter(stream))
    {
        // write a lot of random text to the stream
        var docSize = 1024 * 1024;
        var rnd = new Random();
        for (int i = 0; i < docSize; i++)
        {
            var c = (char) rnd.Next('A', 'Z');
            streamWriter.Write(c);
        }
        streamWriter.Flush();
        stream.Seek(0, SeekOrigin.Begin);

        // read from the stream and write a token
        using (var streamReader = new StreamReader(stream))
        using (var jTokenWriter = new JTokenWriter())
        {
            const int blockSize = 1024;
            var buffer = new char[blockSize];
            while (!streamReader.EndOfStream)
            {
                var charsRead = streamReader.Read(buffer, 0, blockSize);
                var str = new string(buffer, 0, charsRead);
                jTokenWriter.WriteValue(str);
            }

            // add the token to an object
            var doc = new JObject();
            doc.Add("Text", jTokenWriter.Token);

            // spit out the json for debugging
            var json = doc.ToString(Formatting.Indented);
            Debug.WriteLine(json);
        }
    }
} 
```

这只是一个概念证明。当然，实际上，我将从其他地方获取流（例如，文件流）。数据可能非常大——数百兆字节。所以只使用字符串是不可能的。

这个例子不起作用。令牌中只剩下最后一个读取的块。如何将值写入令牌并将其附加到先前写入的内容而不是替换它？

有没有更有效的方法来做到这一点？

澄清一下 - 正在编写的文本*尚未*采用 json 格式。它更接近人类可读的文本。如果您编写纯字符串值，它将需要经历相同的转义和格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:10:39.003

经过大量研究，我相信答案是“做不到”。

真的，我认为一个非常大的字符串的单个 JValue 是应该避免的。相反，我将其分解为存储在 JArray 中的较小值。

如果我错了，请发布更好的答案。谢谢。

# haskell - 为什么在模式匹配时这在 Haskell 中是一个有用的警告？“已定义但未使用”

> ID：14309396
> 
> 赞同：20
> 
> 时间：2013-01-13T23:18:30.587
> 
> 标签：haskell, pattern-matching, warnings

在为一个函数定义多个模式匹配时，例如如下：

```
1: takeTree 0 tree                           = Leaf
2: takeTree levels (Leaf)                    = Leaf
3: takeTree levels (Branch value left right) = Branch value (takeTree... 
```

我特别收到两个警告：

> Source.hs:1：警告：已定义但未使用：`tree'
> 
> Source.hs:2：警告：已定义但未使用：`levels'

不过，我并没有立即相信这些是有用的警告。如果我的代码是：

```
1: takeTree 0 _                              = Leaf
2: takeTree _ (Leaf)                         = Leaf
3: takeTree levels (Branch value left right) = Branch value (takeTree... 
```

其中，修复了警告，我现在发现它的可读性要差得多，并且混淆了我期望作为输入值的语义。

为什么`Defined but not used`在我的详尽模式中每个参数实际上至少使用一次时，这里根本是一个合理的警告？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-14T00:29:47.730

如果某件事足够重要而可以命名，那么它就必须足够重要以供使用，这种假设在许多编码风格中都是合理的。

但你也可以吃蛋糕：

```
takeTree 0 _tree                           = Leaf
takeTree _levels (Leaf)                    = Leaf
takeTree levels (Branch value left right)  = Branch value (takeTree... 
```

The leading underscore in the name signals to **both** the human reader and the compiler that the name is not intended to be used in this equation, but the name being longer than a single underscore can still convey more meaning to the human.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-13T23:46:53.017

我犯了这个警告指出的编码错误。简化示例：

```
fun x xs = go xs
  where
    go []      = ... 
    go (y:xs') = f y (go xs) 
```

当然，递归调用应该`xs'`作为参数，并且“已定义但未使用”的警告会捕捉到这一点。对我来说，将 _ 用于未使用的匹配项是值得的。

编译器无法猜测您的意图，并且您在另一个匹配项中使用该参数这一事实并不意味着您无意在生成警告的匹配项中使用它。毕竟，你*可以*使用`tree`，所以你没有使用的警告是合理的。

另请参阅 Ben 的答案：您可以使用`_name`名称但仍会抑制警告。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-13T23:24:57.373

编译器试图建议您使用某种编码风格。如果你不喜欢它（很公平），有一种方法可以避免这个问题。参见例如：

[如何[暂时]抑制“已定义但未使用”的警告？](https://stackoverflow.com/questions/8221201/how-to-temporarily-suppress-defined-but-not-used-warnings)

至于事情的实质（这是否是一个有用的警告）：在这种情况下命名变量的缺点是它表明名称对编译器有意义，而实际上它们没有意义。正如您正确指出的那样，好处是它们*对*人类有意义。基本上有一个权衡，这是相当主观的。重要的是，如果需要，您可以获得所需的行为。

# clojure - ring clojure 的目录浏览器中间件

> ID：14309400
> 
> 赞同：9
> 
> 时间：2013-01-13T23:19:03.080
> 
> 标签：clojure, ring

是否有任何可用的 ring 中间件可以模仿像 apache 这样的标准文件服务器处理路由的方式

所以处理程序看起来像这样：

```
(wrap-dir "resources/public/") 
```

这与

```
(wrap-file "resources/public/") 
```

但也会输出目录列表。

# ruby-on-rails - 具体来说，视图助手会混入哪个类？

> ID：14309402
> 
> 赞同：0
> 
> 时间：2013-01-13T23:19:12.113
> 
> 标签：ruby-on-rails

我读到的所有内容都说视图助手会混入视图中，但是它们会混入**哪个类，具体来说是什么？**

参考：

1.  [http://guides.rubyonrails.org/getting_started.html#view-helpers](http://guides.rubyonrails.org/getting_started.html#view-helpers)
2.  [为什么私有辅助方法仍然可以在视图中访问？](https://stackoverflow.com/questions/12835367/why-can-private-helper-methods-still-be-accessed-in-views)
3.  [辅助类是否混入控制器？](https://stackoverflow.com/questions/6726553/do-helper-classes-get-mixed-into-the-controller)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:47:59.333

控制器有一个[`view_context`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/abstract_controller/rendering.rb#L75)，它是 的一个实例[`view_context_class`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/abstract_controller/rendering.rb#L51)，它（默认情况下）是一个`ActionView::Base`由[`ActionView::Base.prepare`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/action_view/base.rb#L173). 助手被混合到这些视图上下文类中。

视图上下文也是控制器实例变量“神奇地”成为视图中的实例变量的地方。

# ios - 设置两个新创建的 Core Data 对象的关系

> ID：14309404
> 
> 赞同：1
> 
> 时间：2013-01-13T23:19:30.013
> 
> 标签：ios, xcode, core-data

一个非常简单的问题，我找不到答案。我有我的核心数据实体子类 -`Area`并且`GPS`我正在使用来自 JSON 文件的数据设置它们。这似乎很好。但是如何设置两个新创建的实体对象之间的关系呢？

```
 NSManagedObjectContext *context = [self managedObjectContext];
    Area *area = [NSEntityDescription
                                  insertNewObjectForEntityForName:@"Area"
                                  inManagedObjectContext:context];

    GPS *gps = [NSEntityDescription
                                 insertNewObjectForEntityForName:@"GPS"
                                 inManagedObjectContext:context];

    NSDictionary *attributes = [[area entity] attributesByName];

    for (NSString *attribute in attributes) {
        for (NSDictionary * tempDict in jsonDict) {  
            id value = [tempDict objectForKey:attribute];

            if ([value isEqual:[NSNull null]]) {
                continue;
            }

            if ([attribute isEqualToString:@"latitude"] || [attribute isEqualToString:@"longtitude"]) {
                [gps setValue:value forKey:attribute];
            }
            else {
                [area setValue:value forKey:attribute];
            }
        }

        [area setAreaGPS:gps]; // Set up the relationship
        } 
```

从`Area`到的关系名称`GPS`是`areaGPS`

错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unacceptable type of value for to-many relationship: property = "areaGPS"; desired type = NSSet; given type = GPS; value = <GPS: 0x369540> 
```

我已经`[area setAreaGPS:gps];`在几个示例中看到了这种语法，但显然我不明白如何正确使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:25:55.560

您已将关系设置为一对多关系。根据您定义区域的方式，这可能是也可能不是一个好的选择。如果一个区域可以有多个与之关联的 GPS 对象，那么你很好。那么你需要改变的只是你`[area setAreaGPS:gps]`：

```
NSMutableSet *mutableGPS = [area.areaGPS mutableCopy];
[mutableGPS addObject:gps];
[area setAreaGPS:mutableGPS]; 
```

如果您只希望一个 GPS 对象与一个 Area 对象相关联，则必须将关系更改为不是一对多关系，而是一对一关系。在这种情况下，您不需要更改任何代码（重新生成`NSManagedObject`子类除外）。

# ant - 将命令行参数传递给 ant

> ID：14309406
> 
> 赞同：5
> 
> 时间：2013-01-13T23:19:36.927
> 
> 标签：ant, command-line-arguments

我在蚂蚁方面相对较新，在学校我有一个任务要做一个构建文件。我的问题之一是将其名称（或路径）作为 ant 参数的文件复制到“/foldercopy”。我需要做类似的事情：

蚂蚁cpfile文件.txt

所以ant会将file.txt复制到/foldercopy。我在谷歌上搜索了很多，但我只能找到带有“-Darg”的东西，但我的老师说它不正确。有什么办法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T00:08:57.517

普通命令行参数`ant`被认为是目标名称，所以如果你想将参数传递给你的目标，你需要使用属性，通过`-D`：

```
ant -Dfile=file.txt cpfile 
```

并`${file}`在 build.xml中访问该值

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-11-26T15:32:44.920

这将帮助您：

```
<target name="copytask" >
  <copy file="file.txt" todir="path-od-dir" failonerror="false" />

</target> 
```

# php - php获取空目录修改时间？

> ID：14309410
> 
> 赞同：0
> 
> 时间：2013-01-13T23:19:52.603
> 
> 标签：php

我可以使用递归方法 ( `scandir`) 获取目录修改时间，但如果目录为空或新的空目录由以下人员创建`mkdir`：

```
mkdir('newdir');
// how get 'newdir' modification time 
```

我搜索了类似的帖子和谷歌页面，但问题没有解决

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:21:37.980

您正在寻找[`filemtime`](http://php.net/manual/en/function.filemtime.php)：

```
echo date ('F d Y H:i:s', filemtime('newdir')); 
```

# php - 在命令行错误上运行 PHPUnit

> ID：14309411
> 
> 赞同：0
> 
> 时间：2013-01-13T23:20:17.310
> 
> 标签：php, phpunit

我在命令行上运行它：`phpunit --version`

我收到以下错误：

```
PHP Warning:  require_once(File/Iterator/Autoload.php): failed to open stream: No such file or directory in /usr/lib/php/pear/PHPUnit/Autoload.php on line 45
PHP Fatal error:  require_once(): Failed opening required 'File/Iterator/Autoload.php' (include_path='.:/Users/dennismonsewicz/pear/share/pear:/usr/local/share/pear:/usr/lib/php/pear/PHPUnit') in /usr/lib/php/pear/PHPUnit/Autoload.php on line 45 
```

还有其他人遇到这些问题吗？当我尝试通过命令行运行测试时，它也会给我带来问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:00:40.710

结束了我的 include_path 的问题

这是我更新的包含路径

```
include_path = ".:/php/includes:/usr/lib/php/pear" 
```

# jquery - 功能完成后检查

> ID：14309414
> 
> 赞同：1
> 
> 时间：2013-01-13T23:20:37.870
> 
> 标签：jquery

当单击链接以提供漫画书样式效果时，我加载了一个 div 的偏移量。每个偏移量都会激活其他动画以提供更动态的感觉。

我现在正在寻找更改它，以便从偏移量 0 移动到偏移量 2 将通过偏移量 1 移动。为了增加复杂性，我不希望在这种情况下偏移量 1 处的辅助动画消失。

因此，问题是我需要激活滑动功能，然后在当前功能完成后再次激活它。有没有办法让我知道这一点？此外，是否有一种简单的方法来反转动画，以便下次他们去那个偏移量时它会发生？

如果我以错误的方式解决这个问题，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:12:25.747

如果您使用该`.data('obj',{currentPosition:index});` 方法，您可以在元素上创建一个`.data()`对象并让您的动画查询它以查看它们的“位置”，从 0 到您在漫画书序列中需要的任何项目。将您的动画建立在从 0=>however 开始的索引上，然后`currentPosition`使用动画中的回调参数更新动画完成的时间。

那个方向会有帮助吗？如果您可以提供一些示例代码（简单或其他），我们可能会找到一种将其绑定的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:13:12.497

您的问题的核心似乎是javascript代码的流程。您将需要使用回调函数。如果向函数添加回调变量，则可以在函数运行后执行代码：

```
function foo(callback) {
    // some code you want to execute

    // then run the callback function
    if (typeof(callback) == "function")
        callback();
}

function bar() {
   // some code you want to execute after foo is finished
} 
```

现在你可以`bar()`像这样在 foo 完成后运行：

```
foo(bar); 
```

# javascript - 将javascript中的数字压缩为二进制格式

> ID：14309416
> 
> 赞同：0
> 
> 时间：2013-01-13T23:21:11.380
> 
> 标签：javascript, compression

我需要以尽可能少的数据将以下内容转换为二进制格式（以及以后的恢复）。

```
my_arr = [
        [128,32 ,22,23],
        [104,53 ,21,25],
        [150,55 ,79,23],
        [104,101,23,8 ],
        [57 ,117,13,21],
        [37 ,135,21,20],
        [81 ,132,23,6 ],
        [81 ,138,7 ,8 ],
        [97 ,138,7 ,8 ]... 
```

数字不超过 399

如果我为每个数字使用 0（连续 8 个 0 = 8）并使用 1 作为分隔符，第一行如下所示： 010010000000011000100110010011001000 这对于像 99 这样的数字来说真的很长

如果我将每个数字填充为三位数字并将每个数字依次转换为实际二进制，则第一行如下所示： 000100101000000000110010000000100010000000100011 每个数字有 12 个字符。

由于第一个字符永远不会是 4 或更高，我可以通过将 0 视为 00、1 视为 01、2 视为 10 和 3 视为 11 来保存两个数字。因此每个数字 10 个字符总的来说这将大小减小到大约 90% 的第一个选项（平均）但有更短的方法吗？

编辑：是的，作为 1 和 0 的字符串......它不需要比原始整数短......只是使用 2 个符号的最短可能编写方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:36:43.127

如果这些值均匀分布在 0 到 399 之间，那么一个很好的编码方式是取三个值并将它们编码为一个以 400 为基数的三位整数。即 val1 + 400*val2 + 400*400*val3。然后该整数将很好地适合 26 位。四个连续的 26 位值将适合 13 个字节。然后你得到每个值的平均 13/12 字节。

除非值的分布有偏差，或者存在重复或相关性，否则您将能够做到这一点，在这种情况下，您可以进一步压缩它们。

处理细节，可以使用编码序列中的字节数来确定值的个数，可能不是三的倍数。如果它不是三的倍数，那么最后会有一个或两个值，每个值都简单地编码为九位。由于从 18 位到 26 位相加需要 8 位，因此计数没有歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:34:35.247

一个好的起点是创建由 1 和 0 组成的恒定长度块，这使您可以轻松解码字符串。

二进制中的 400 是 110010000，这需要 9 个字符来将每个数字编码为其二进制表示，零填充到恒定长度。

编码第一行：

```
var padTo9 = function( bin ){ 
    while( bin.length<9 ){ bin = "0" + bin; } 
    return bin; 
}
[128,32 ,22,23].map( function(i){ return padTo9( i.toString(2) ) }).join('');

/* result:
"010000000000100000000010110000010111"
*/ 
```

解码

```
"010000000000100000000010110000010111".match(/[0-1]{9}/g).map( function(i){ return parseInt( i, 2 ) });
/* result:
[128, 32, 22, 23]
*/ 
```

我认为获得更短字符串的唯一方法是使用可变块长度，这需要添加一些控制符号来告诉解码器以下数字以特定数量的字符编码。但是这些符号必须大于 400 并且仍然有 9 个字符长，所以我认为考虑到数据的随机分布，这无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-14T14:55:34.903

max 399：2**9是(2**n)>=399的最小实例，每个数可以存储为9位；将每个转换为二进制，并连接

# video - Monotouch - MoviePlayer 永远不会超越“正在加载...”

> ID：14309420
> 
> 赞同：0
> 
> 时间：2013-01-13T23:21:51.630
> 
> 标签：video, xamarin.ios, mpmovieplayercontroller

我下载了 MonoTouch 示例“PlayMovieRecipe”，它运行良好。

然后，我创建了一个带有“MoviePlayer”页面的小应用程序（使用 Storyboard）。我从示例应用程序中复制了示例代码，但是当我运行它时，它似乎启动了电影播放器​​，但从未超出“正在加载...”。示例文件 (sample.m4v) 位于应用程序的根目录中。这是我使用的代码：

命名空间测试 { 公共部分类 DetailViewController ： UIViewController { MPMoviePlayerController 电影播放器​​；公共 DetailViewController（IntPtr 句柄）：基（句柄）{}

```
 public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        this.btnPlayMovie.TouchUpInside += delegate {
            moviePlayer = new MPMoviePlayerController (NSUrl.FromFilename ("sample.m4v"));
            View.AddSubview (moviePlayer.View);
            moviePlayer.SetFullscreen (true, true);
            moviePlayer.Play ();
        } ;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:31:19.490

在添加子视图之前尝试明确设置文件类型 (moviePlayer.SourceType = MPMovieSourceType.File;)。我还为播放器使用了一个框架，它可以更多地控制显示高度、宽度等，因为视频可以被捏合/缩放到全屏。此外，请确保您的视频在其设置中设置为“内容”（右键单击构建操作）。干杯!

# tomcat - 构建可扩展的 xml 桥接处理平台

> ID：14309422
> 
> 赞同：1
> 
> 时间：2013-01-13T23:22:12.367
> 
> 标签：tomcat, jetty, grizzly, throughput

我正在构建接收来自 Internet 的请求、连接到本地可用的搜索平台并获取一些 XML 的中间件。

然后，它更改此 XML、修剪它并更改为其他格式（可能是 JSON）并将其发送回调用应用程序。

我正在考虑使用以下技术堆栈来实现这一点。

Tomcat + 普通的旧 servlet

我想尽可能提高每箱的吞吐量（四核、双 CPU、32GB 内存），我怀疑 tomcat 可能不是最好的选择，我可能会更好地使用 Jetty 或灰熊还是其他我不知道的？有没有人有一些比较数据或轶事证据表明他们将从哪种技术开始？

如果没有，我想我应该先用我自己的测试数据集对它们进行基准测试。*叹*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:33:57.813

流血边缘，但有一些很好的扩展指标：[RestExpress](https://github.com/RestExpress/RepoExpress)

如果您可以使用非 Java，则可能需要考虑[node.js](http://nodejs.org/)

# java - 在 Android 上隐藏鼠标指针

> ID：14309425
> 
> 赞同：11
> 
> 时间：2013-01-13T23:22:21.850
> 
> 标签：java, android, mouse-cursor, ouya

我正在为 OUYA 和 Android 编写游戏，并且正在使用 OUYA 控制器上的触控板。当你触摸它时，鼠标指针会出现，我找不到隐藏它的方法。我认为这对于 Android 上网本上的游戏也是一个问题。

有没有人找到一种与光标交互而不仅仅是监听事件的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T16:11:25.513

这不会隐藏鼠标，但它至少有助于防止触摸事件干扰您的操纵杆处理代码——我知道这不是一个合适的解决方案，但仍然可以帮助登陆此页面的人：

```
public boolean onGenericMotionEvent(MotionEvent event) {
    if ( (event.getSource() & InputDevice.SOURCE_CLASS_JOYSTICK) != 0) {
        //handle the event
        return true;
    }
    else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:31:05.040

Android 目前不公开任何隐藏鼠标光标的功能。每当您有外部指点设备（即 USB/蓝牙鼠标、触控板等）时，只要您与设备交互，屏幕上就会出现鼠标指针。

不幸的是（从 JB 4.2.2 开始）这意味着没有修改过的 ROM 是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-06T17:46:02.440

现在可以[请求捕获指针](https://developer.android.com/training/gestures/movement#pointer-capture)。您需要明确请求捕获：

```
fun onClick(view: View) {
    view.requestPointerCapture()
} 
```

如文件所述：

> Android 通常从鼠标以外的源传递指针事件，但鼠标指针不再可见。

您可以通过覆盖来处理指针事件`onCapturedPointerEvent`：

```
override fun onCapturedPointerEvent(motionEvent: MotionEvent): Boolean {
    // Get the coordinates required by your app
    val verticalOffset: Float = motionEvent.y
    // Use the coordinates to update your view and return true if the event was
    // successfully processed
    return true
} 
```

或注册一个事件处理程序`OnCapturedPointerListener`：

```
myView.setOnCapturedPointerListener { view, motionEvent ->
    // Get the coordinates required by your app
    val horizontalOffset: Float = motionEvent.x
    // Use the coordinates to update your view and return true if the event was
    // successfully processed
    true
} 
```

完成后释放指针由您决定：

```
override fun onClick(view: View) {
    view.releasePointerCapture()
} 
```

我知道这个问题的上下文可能总体上不适用（即：欧亚开发），但这是我自己研究如何做到这一点时的第一个搜索结果。所以我想我会更新答案！

# java - ResultSet.TYPE_SCROLL_INSENSITIVE 产生错误

> ID：14309426
> 
> 赞同：1
> 
> 时间：2013-01-13T23:22:25.967
> 
> 标签：java, sql-server

我正在使用 sql server 数据库进行 Java 项目，一旦我使用

```
stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

我收到错误消息“不支持游标类型/并发组合”。

有人知道为什么会这样吗？在我使用此代码之前，一切正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T06:35:31.357

尝试这个

```
 Statement st = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, 
                      ResultSet.CONCUR_READ_ONLY); 
```

# ios - paymentQueueRestoreCompletedTransactionsFinished: vs updatedTransactions:

> ID：14309427
> 
> 赞同：8
> 
> 时间：2013-01-13T23:22:28.320
> 
> 标签：ios, objective-c, in-app-purchase

我正在恢复已完成的交易（重复）

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

并且在

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

我得到了应用程序恢复的历史交易列表，但是方法：

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

甚至没有被调用一次，所以我想知道我应该使用哪个？我做了一些研究，发现该`updatedTransactions:`方法应该与检查事务状态一起使用，但如果我得到一个恢复的事务列表，将它们全部视为事务是没有意义的。我应该使用哪一个？只`paymentQueueRestoreCompletedTransactionsFinished`给我最新的一个（即沙盒订阅在几分钟后到期，我得到了测试时进行的历史交易的完整列表，在`updatedTransactions`）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T05:31:08.913

有一个关于使用 StoreKit 的优秀 WWDC 视频，它是 WWDC2012 Session 302。

要隔离每次购买，您的`updatedTransactions`方法可能如下所示：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

        for (SKPaymentTransaction *transaction in transactions) {

            switch(transaction.transactionState) {
                case SKPaymentTransactionStatePurchased:
                    // Unlock content
                    //... Don't forget to call `finishTransaction`!
                    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                    break;
                case SKPaymentTransactionStatePurchasing:
                    // Maybe show a progress bar?
                    break;
                case SKPaymentTransactionStateFailed:
                    // Handle error
                    // You must call finishTransaction here too!
                    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                    break;
                case SKPaymentTransactionStateRestored:
                    // This is the one you want ;)
                    // ...Re-unlock content...
                    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                    break;
             }
         }
} 
```

一旦您确定购买正在恢复，您就可以提供您认为合适的内容 - 最好通过从该 switch 语句中调用一个单独的方法并将交易作为参数传递。当然，实施取决于您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:16:17.657

1.  如果适用，请致电或`[[SKPaymentQueue defaultQueue] addTransactionObserver:self]`等效。`(void)viewDidLoad`
2.  然后调用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`。
3.  `(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`将通过（2）相应地调用。

如果您不调用 (1) 中的方法，应用程序将永远不会到达 (3) 来恢复事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-24T19:59:10.420

我有同样的问题，paymentQueueRestoreCompletedTransactionsFinished 从来没有被调用过。我通过进入设置中的 iTunes 和 Aoo 商店进行修复，然后退出沙盒测试帐户并再次尝试。在被提示在恢复时再次登录后，下次按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-26T15:44:03.127

来自苹果文档：

> paymentQueueRestoreCompletedTransactionsFinished：支付队列处理完所有可恢复交易后调用此方法。您的应用程序不需要在此方法中执行任何操作。

# python - Python单元测试启动值

> ID：14309435
> 
> 赞同：0
> 
> 时间：2013-01-13T23:23:38.480
> 
> 标签：python, unit-testing

对不起，如果这个问题很愚蠢。我创建了一个单元测试类，它需要从外部获取给定的输入和输出。因此，我想应该启动这些值。但是，我在以下代码中遇到了一些错误：

代码：

```
import unittest
from StringIO import StringIO

##########Inputs and outputs from outside#######
a=[1,2]
b=[2,3]
out=[3,4]
####################################
def func1(a,b):
    return a+b

class MyTestCase(unittest.TestCase):
    def __init__(self,a,b,out):
        self.a=a
        self.b=b
        self.out=out
    def testMsed(self):
        for i in range(self.tot_iter):
            print i
            fun = func1(self.a[i],self.b[i])
            value = self.out[i]
            testFailureMessage = "Test of function name: %s iteration: %i expected: %i != calculated: %i" % ("func1",i,value,fun)
            self.assertEqual(round(fun,3),round(value,3),testFailureMessage)

if __name__ == '__main__':
    f = MyTestCase(a,b,out)

from pprint import pprint
stream = StringIO()
runner = unittest.TextTestRunner(stream=stream, verbosity=2)
result = runner.run(unittest.makeSuite(MyTestCase(a,b,out)))
print 'Tests run', result.testsRun 
```

但是，我收到以下错误

```
Traceback (most recent call last):
  File "C:testing.py", line 33, in <module>
    result = runner.run(unittest.makeSuite(MyTestCase(a,b,out)))
  File "C:\Python27\lib\unittest\loader.py", line 310, in makeSuite
    return _makeLoader(prefix, sortUsing, suiteClass).loadTestsFromTestCase(testCaseClass)
  File "C:\Python27\lib\unittest\loader.py", line 50, in loadTestsFromTestCase
    if issubclass(testCaseClass, suite.TestSuite):
TypeError: issubclass() arg 1 must be a class 
```

谁能给我一些建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:17:34.507

问题的根源是这一行，

```
result = runner.run(unittest.makeSuite(MyTestCase(a,b,out))) 
```

unittest.makeSuite 需要一个*类*，而不是一个类的实例。所以只是 MyTestCase，而不是 MyTestCase(a, b, out)。这意味着您不能以您尝试的方式将参数传递给您的测试用例。您可能应该将代码从**init**移动到 setUp 函数。在 setUp 中访问 a、b 和 out 作为全局变量，或者查看[此链接](https://stackoverflow.com/questions/5336626/giving-parameters-into-testcase-from-suite-in-python)以获取有关将参数传递给单元测试的信息。

顺便说一句，[这](http://hg.python.org/cpython/file/d904a741afde/Lib/unittest/loader.py)是问题所在的python中的源文件。阅读可能会有所帮助。

# php - 如何从 Amazon Product Advertising API 解析 stdclass 对象？

> ID：14309436
> 
> 赞同：1
> 
> 时间：2013-01-13T23:23:55.837
> 
> 标签：php, parsing, stdclass, amazon-product-api

我将如何解析以下内容以获取从亚马逊[产品广告 API](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)`description`检索到的产品的、`title`、 商品编号等？

我使用了以下内容，但不一致。

```
$response  = $client->responseGroup('Small,Images')->category('Books')->search($search);

foreach ($response->Items->Request->Item as $message) {
    echo $message->Description;

} 
```

下面的输出：也可以在[pastebin](http://pastebin.com/wKPPVyTc)上找到。下面的代码是输出。我想从对象中选择标题、描述和 url 数据，最好是数组格式。

有任何想法吗？

```
 object(stdClass)#6 (2) {
  ["OperationRequest"]=>
  object(stdClass)#7 (4) {
    ["HTTPHeaders"]=>
    object(stdClass)#8 (1) {
      ["Header"]=>
      object(stdClass)#9 (2) {
        ["Name"]=>
        string(9) "UserAgent"
        ["Value"]=>
        string(26) "PHP-SOAP/5.3.2-1ubuntu4.18"
      }
    }
    ["RequestId"]=>
    string(36) "cbcaa978-487c-4d83-8986-6a641b7d9c00"
    ["Arguments"]=>
    object(stdClass)#10 (1) {
      ["Argument"]=>
      object(stdClass)#11 (2) {
        ["Name"]=>
        string(7) "Service"
        ["Value"]=>
        string(19) "AWSECommerceService"
      }
    }
    ["RequestProcessingTime"]=>
    float(0.081366)
  }
  ["Items"]=>
  object(stdClass)#12 (5) {
    ["Request"]=>
    object(stdClass)#13 (2) {
      ["IsValid"]=>
      string(4) "True"
      ["ItemSearchRequest"]=>
      object(stdClass)#14 (3) {
        ["Keywords"]=>
        string(9) "airplanes"
        ["ResponseGroup"]=>
        array(2) {
          [0]=>
          string(5) "Small"
          [1]=>
          string(6) "Images"
        }
        ["SearchIndex"]=>
        string(5) "Books"
      }
    }
    ["TotalResults"]=>
    int(21343)
    ["TotalPages"]=>
    int(2135)
    ["MoreSearchResultsUrl"]=>
    string(237) "http://www.amazon.com/gp/redirect.html?camp=2025&creative=386001&location=http%3A%2F%2Fwww.amazon.com%2Fgp%2Fsearch%3Fkeywords%3Dairplanes%26url%3Dsearch-alias%253Dstripbooks&linkCode=sp1&tag=xxxxxxxxxxxxxxbet-20&SubscriptionId=AKIAII3UF3HPAPY3SMDQ"
    ["Item"]=>
    array(10) {
      [0]=>
      object(stdClass)#15 (8) {
        ["ASIN"]=>
        string(10) "0789465213"
        ["DetailPageURL"]=>
        string(205) "http://www.amazon.com/Big-Book-Airplanes-DK-Publishing/dp/0789465213%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0789465213"
        ["ItemLinks"]=>
        object(stdClass)#16 (1) {
          ["ItemLink"]=>
          array(7) {
            [0]=>
            object(stdClass)#17 (2) {
              ["Description"]=>
              string(17) "Technical Details"
              ["URL"]=>
              string(215) "http://www.amazon.com/Big-Book-Airplanes-DK-Publishing/dp/tech-data/0789465213%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [1]=>
            object(stdClass)#18 (2) {
              ["Description"]=>
              string(20) "Add To Baby Registry"
              ["URL"]=>
              string(211) "http://www.amazon.com/gp/registry/baby/add-item.html%3Fasin.0%3D0789465213%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [2]=>
            object(stdClass)#19 (2) {
              ["Description"]=>
              string(23) "Add To Wedding Registry"
              ["URL"]=>
              string(214) "http://www.amazon.com/gp/registry/wedding/add-item.html%3Fasin.0%3D0789465213%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [3]=>
            object(stdClass)#20 (2) {
              ["Description"]=>
              string(15) "Add To Wishlist"
              ["URL"]=>
              string(215) "http://www.amazon.com/gp/registry/wishlist/add-item.html%3Fasin.0%3D0789465213%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [4]=>
            object(stdClass)#21 (2) {
              ["Description"]=>
              string(13) "Tell A Friend"
              ["URL"]=>
              string(180) "http://www.amazon.com/gp/pdp/taf/0789465213%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [5]=>
            object(stdClass)#22 (2) {
              ["Description"]=>
              string(20) "All Customer Reviews"
              ["URL"]=>
              string(184) "http://www.amazon.com/review/product/0789465213%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
            [6]=>
            object(stdClass)#23 (2) {
              ["Description"]=>
              string(10) "All Offers"
              ["URL"]=>
              string(186) "http://www.amazon.com/gp/offer-listing/0789465213%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0789465213"
            }
          }
        }
        ["SmallImage"]=>
        object(stdClass)#24 (3) {
          ["URL"]=>
          string(60) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL75_.jpg"
          ["Height"]=>
          object(stdClass)#25 (2) {
            ["_"]=>
            string(2) "75"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#26 (2) {
            ["_"]=>
            string(2) "56"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["MediumImage"]=>
        object(stdClass)#27 (3) {
          ["URL"]=>
          string(61) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL160_.jpg"
          ["Height"]=>
          object(stdClass)#28 (2) {
            ["_"]=>
            string(3) "160"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#29 (2) {
            ["_"]=>
            string(3) "120"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["LargeImage"]=>
        object(stdClass)#30 (3) {
          ["URL"]=>
          string(53) "http://ecx.images-amazon.com/images/I/51G392LNnWL.jpg"
          ["Height"]=>
          object(stdClass)#31 (2) {
            ["_"]=>
            string(3) "500"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#32 (2) {
            ["_"]=>
            string(3) "376"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["ImageSets"]=>
        object(stdClass)#33 (1) {
          ["ImageSet"]=>
          object(stdClass)#34 (7) {
            ["SwatchImage"]=>
            object(stdClass)#35 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL30_.jpg"
              ["Height"]=>
              object(stdClass)#36 (2) {
                ["_"]=>
                string(2) "30"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#37 (2) {
                ["_"]=>
                string(2) "23"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["SmallImage"]=>
            object(stdClass)#38 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL75_.jpg"
              ["Height"]=>
              object(stdClass)#39 (2) {
                ["_"]=>
                string(2) "75"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#40 (2) {
                ["_"]=>
                string(2) "56"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["ThumbnailImage"]=>
            object(stdClass)#41 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL75_.jpg"
              ["Height"]=>
              object(stdClass)#42 (2) {
                ["_"]=>
                string(2) "75"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#43 (2) {
                ["_"]=>
                string(2) "56"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["TinyImage"]=>
            object(stdClass)#44 (3) {
              ["URL"]=>
              string(61) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL110_.jpg"
              ["Height"]=>
              object(stdClass)#45 (2) {
                ["_"]=>
                string(3) "110"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#46 (2) {
                ["_"]=>
                string(2) "83"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["MediumImage"]=>
            object(stdClass)#47 (3) {
              ["URL"]=>
              string(61) "http://ecx.images-amazon.com/images/I/51G392LNnWL._SL160_.jpg"
              ["Height"]=>
              object(stdClass)#48 (2) {
                ["_"]=>
                string(3) "160"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#49 (2) {
                ["_"]=>
                string(3) "120"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["LargeImage"]=>
            object(stdClass)#50 (3) {
              ["URL"]=>
              string(53) "http://ecx.images-amazon.com/images/I/51G392LNnWL.jpg"
              ["Height"]=>
              object(stdClass)#51 (2) {
                ["_"]=>
                string(3) "500"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#52 (2) {
                ["_"]=>
                string(3) "376"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["Category"]=>
            string(7) "primary"
          }
        }
        ["ItemAttributes"]=>
        object(stdClass)#53 (4) {
          ["Author"]=>
          string(13) "DK Publishing"
          ["Manufacturer"]=>
          string(11) "DK CHILDREN"
          ["ProductGroup"]=>
          string(4) "Book"
          ["Title"]=>
          string(21) "Big Book of Airplanes"
        }
      }
      [1]=>
      object(stdClass)#54 (8) {
        ["ASIN"]=>
        string(10) "0753459159"
        ["DetailPageURL"]=>
        string(211) "http://www.amazon.com/Amazing-Airplanes-Machines-Tony-Mitton/dp/0753459159%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0753459159"
        ["ItemLinks"]=>
        object(stdClass)#55 (1) {
          ["ItemLink"]=>
          array(7) {
            [0]=>
            object(stdClass)#56 (2) {
              ["Description"]=>
              string(17) "Technical Details"
              ["URL"]=>
              string(221) "http://www.amazon.com/Amazing-Airplanes-Machines-Tony-Mitton/dp/tech-data/0753459159%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [1]=>
            object(stdClass)#57 (2) {
              ["Description"]=>
              string(20) "Add To Baby Registry"
              ["URL"]=>
              string(211) "http://www.amazon.com/gp/registry/baby/add-item.html%3Fasin.0%3D0753459159%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [2]=>
            object(stdClass)#58 (2) {
              ["Description"]=>
              string(23) "Add To Wedding Registry"
              ["URL"]=>
              string(214) "http://www.amazon.com/gp/registry/wedding/add-item.html%3Fasin.0%3D0753459159%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [3]=>
            object(stdClass)#59 (2) {
              ["Description"]=>
              string(15) "Add To Wishlist"
              ["URL"]=>
              string(215) "http://www.amazon.com/gp/registry/wishlist/add-item.html%3Fasin.0%3D0753459159%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [4]=>
            object(stdClass)#60 (2) {
              ["Description"]=>
              string(13) "Tell A Friend"
              ["URL"]=>
              string(180) "http://www.amazon.com/gp/pdp/taf/0753459159%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [5]=>
            object(stdClass)#61 (2) {
              ["Description"]=>
              string(20) "All Customer Reviews"
              ["URL"]=>
              string(184) "http://www.amazon.com/review/product/0753459159%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
            [6]=>
            object(stdClass)#62 (2) {
              ["Description"]=>
              string(10) "All Offers"
              ["URL"]=>
              string(186) "http://www.amazon.com/gp/offer-listing/0753459159%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0753459159"
            }
          }
        }
        ["SmallImage"]=>
        object(stdClass)#63 (3) {
          ["URL"]=>
          string(60) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL75_.jpg"
          ["Height"]=>
          object(stdClass)#64 (2) {
            ["_"]=>
            string(2) "75"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#65 (2) {
            ["_"]=>
            string(2) "74"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["MediumImage"]=>
        object(stdClass)#66 (3) {
          ["URL"]=>
          string(61) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL160_.jpg"
          ["Height"]=>
          object(stdClass)#67 (2) {
            ["_"]=>
            string(3) "160"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#68 (2) {
            ["_"]=>
            string(3) "157"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["LargeImage"]=>
        object(stdClass)#69 (3) {
          ["URL"]=>
          string(53) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL.jpg"
          ["Height"]=>
          object(stdClass)#70 (2) {
            ["_"]=>
            string(3) "500"
            ["Units"]=>
            string(6) "pixels"
          }
          ["Width"]=>
          object(stdClass)#71 (2) {
            ["_"]=>
            string(3) "491"
            ["Units"]=>
            string(6) "pixels"
          }
        }
        ["ImageSets"]=>
        object(stdClass)#72 (1) {
          ["ImageSet"]=>
          object(stdClass)#73 (7) {
            ["SwatchImage"]=>
            object(stdClass)#74 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL30_.jpg"
              ["Height"]=>
              object(stdClass)#75 (2) {
                ["_"]=>
                string(2) "30"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#76 (2) {
                ["_"]=>
                string(2) "29"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["SmallImage"]=>
            object(stdClass)#77 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL75_.jpg"
              ["Height"]=>
              object(stdClass)#78 (2) {
                ["_"]=>
                string(2) "75"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#79 (2) {
                ["_"]=>
                string(2) "74"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["ThumbnailImage"]=>
            object(stdClass)#80 (3) {
              ["URL"]=>
              string(60) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL75_.jpg"
              ["Height"]=>
              object(stdClass)#81 (2) {
                ["_"]=>
                string(2) "75"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#82 (2) {
                ["_"]=>
                string(2) "74"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["TinyImage"]=>
            object(stdClass)#83 (3) {
              ["URL"]=>
              string(61) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL110_.jpg"
              ["Height"]=>
              object(stdClass)#84 (2) {
                ["_"]=>
                string(3) "110"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#85 (2) {
                ["_"]=>
                string(3) "108"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["MediumImage"]=>
            object(stdClass)#86 (3) {
              ["URL"]=>
              string(61) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL._SL160_.jpg"
              ["Height"]=>
              object(stdClass)#87 (2) {
                ["_"]=>
                string(3) "160"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#88 (2) {
                ["_"]=>
                string(3) "157"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["LargeImage"]=>
            object(stdClass)#89 (3) {
              ["URL"]=>
              string(53) "http://ecx.images-amazon.com/images/I/51VcEPd9jqL.jpg"
              ["Height"]=>
              object(stdClass)#90 (2) {
                ["_"]=>
                string(3) "500"
                ["Units"]=>
                string(6) "pixels"
              }
              ["Width"]=>
              object(stdClass)#91 (2) {
                ["_"]=>
                string(3) "491"
                ["Units"]=>
                string(6) "pixels"
              }
            }
            ["Category"]=>
            string(7) "primary"
          }
        }
        ["ItemAttributes"]=>
        object(stdClass)#92 (4) {
          ["Author"]=>
          array(2) {
            [0]=>
            string(11) "Tony Mitton"
            [1]=>
            string(10) "Ant Parker"
          }
          ["Manufacturer"]=>
          string(10) "Kingfisher"
          ["ProductGroup"]=>
          string(4) "Book"
          ["Title"]=>
          string(36) "Amazing Airplanes (Amazing Machines)"
        }
      }
      [2]=>
      object(stdClass)#93 (8) {
        ["ASIN"]=>
        string(10) "0061143812"
        ["DetailPageURL"]=>
        string(214) "http://www.amazon.com/In-Cockpit-Inside-History-Making-Aircraft/dp/0061143812%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0061143812"
        ["ItemLinks"]=>
        object(stdClass)#94 (1) {
          ["ItemLink"]=>
          array(7) {
            [0]=>
            object(stdClass)#95 (2) {
              ["Description"]=>
              string(17) "Technical Details"
              ["URL"]=>
              string(224) "http://www.amazon.com/In-Cockpit-Inside-History-Making-Aircraft/dp/tech-data/0061143812%3FSubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0061143812"
            }
            [1]=>
            object(stdClass)#96 (2) {
              ["Description"]=>
              string(20) "Add To Baby Registry"
              ["URL"]=>
              string(211) "http://www.amazon.com/gp/registry/baby/add-item.html%3Fasin.0%3D0061143812%26SubscriptionId%3DAKIAII3UF3HPAPY3SMDQ%26tag%3Dxxxxxxxxxxxxxxbet-20%26linkCode%3Dsp1%26camp%3D2025%26creative%3D386001%26creativeASIN%3D0061143812"

etc.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:11:47.560

首先你可以打印响应数组以数组格式查看然后获取你想要的元素，下面的例子:)

```
echo '<pre>';
print_r($response); 
echo '</pre>';

foreach($response['Items']['Item'] as $item)
{

    echo 'asin :'.$item[ASIN].'<br>';
    echo 'Title :'.$item[ItemAttributes][Title].'<br>';
    echo '<image src="'.$item[MediumImage][URL].'">';

} 
```

# android - android 应用程序是否能够从连接的 WiFi 热点 AP 检索位置信息？

> ID：14309437
> 
> 赞同：0
> 
> 时间：2013-01-13T23:23:59.370
> 
> 标签：android, location, wifi

想知道如何`Lat/Long`检索我的移动设备连接到公共 WiFi 热点 AP 之一的特定位置的信息。那么，我的程序获取数据并继续查找位置信息以发起 E911 呼叫或发送任何呼叫的位置信息？如果可能，请告诉我们如何做到这一点？是否有任何特定的 Android API 可以这样做？如果可能，请提供详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:37:56.373

您无法从 WiFi 热点获取位置方向（实际上 WiFi 热点本身并不知道它的位置）。

但是，有些数据库包含 WiFi 热点 MAC 地址和位置之间的映射。因此，您的应用程序应该获取有关 WiFi 热点的信息，然后转到该数据库之一。

例如，看看这个： [http ://en.wikipedia.org/wiki/Skyhook_Wireless](http://en.wikipedia.org/wiki/Skyhook_Wireless)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:38:56.140

可以在 android 中通过 GPS 或您的互联网访问（无论是 wifi 还是 3G）使用各种方式检索位置，最棒的是在 android 中，将从设备上的任何应用程序检索到的最后一个位置将被保存，您实际上可以进行比较您当前检索到的位置与以前的位置，看看它是否更好或更准确。

[这](http://developer.android.com/guide/topics/location/strategies.html)是一个链接，可以让您更好地了解位置如何与 android 一起使用。

# php - gmaps.js 循环遍历地址并添加标记

> ID：14309438
> 
> 赞同：1
> 
> 时间：2013-01-13T23:24:03.860
> 
> 标签：php, javascript, mysql, google-maps

我想使用 gmaps.js 循环遍历全球 50 多个地址并向地图添加标记。感谢对另一个问题的出色回答，我认为我已经解决了。

[gmaps.js - 遍历元素并添加标记](https://stackoverflow.com/questions/13079795/gmaps-js-loop-through-elements-and-add-markers)

简而言之，使用那里的确切答案（现场示例[http://jsfiddle.net/w8bvR/3/](http://jsfiddle.net/w8bvR/3/)）。

脚本面

```
 var map = new GMaps({
    div: '#mapCanvas',
    lat: 0,
    lng: 52,
    zoom: 13,
    width: '600px',
    height: '400px'
});

var popupTemplate = '<div class="popupText"><h3>%1</h3><p>%2</p></div>';
var location = $('#location').text();

$('.blist p').find('br').replaceWith(', ');

$(".blist").each(function() {
    var title = $(this).find("h3").text();
    var address = $(this).find("p.address").text();
    GMaps.geocode({
        address: address,
        callback: function(results, status) {
            if (status == 'OK') {
                var latlng = results[0].geometry.location;
                map.setCenter(latlng.lat(), latlng.lng());
                map.addMarker({
                    lat: latlng.lat(),
                    lng: latlng.lng(),
                    title: title,
                    infoWindow: {
                        content: popupTemplate.replace('%1',title).replace('%2',address)
                    }
                });
            }
        }
    });
}); 
```

HTML 端

```
 <div id="mapCanvas"></div>
<h1 id="location">Phuket, Thailand</h1>

<div class="blist">
    <h3>APK Resort</h3>
    <p class="address">95 Ratchapratanusorn road<br>Kathu<br>Patong Beach 83150<br>Phuket<br></p>
</div>

<div class="blist">
    <h3>Patong Bay House</h3>
    <p class="address">160/5 Phungmuang Sai kor Rd<br>Phuket<br>Patong Beach 83150<br>Kathu<br></p>
</div>

<div class="blist">
    <h3>Bel Aire Resort</h3>
    <p class="adress">59/1-3 Sainamyen Rd Patong Kathu<br>Phuket<br>Patong Beach 8310<br>T<br></p>
</div> 
```

但是由于某种原因，当我从我的 mysql 获取地址 viva PHP 并创建 50+ 时，无论从我创建的 mysql 中选择什么顺序或选择，它都只会添加 11 个标记来映射。我有点不明白为什么它将自己限制为 11，因为谷歌 API 声称至少在那个级别上没有限制。任何帮助表示赞赏。

看到我正在从 mysql/php 获取，我确信还有一种更优雅的方式，但也没有专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:07:37.313

问题是代码没有检查 OVER_QUERY_LIMIT 错误并适当地处理它。如果不处理这种情况，您将收到大约 10 个来自地理编码服务的响应（如您所见）。

# html - 目标空白的 w3c 验证

> ID：14309446
> 
> 赞同：-3
> 
> 时间：2013-01-13T23:25:28.010
> 
> 标签：html, w3c

有没有人知道解决 w3c 有效目标空白锚点的方法？对此有点抓挠，似乎找不到解决方案。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:53:29.663

`target=_blank`是完全有效的 HTML5。[在W3 验证器](http://validator.w3.org)中尝试以下 HTML 文档

```
<!doctype html>
<head><title>blank</title></head>
<body><p>A link to <a href="http://example.com" target="_blank">Example</a>...</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:31:22.470

1.0 transitional 包含一些旧的 html 标签，包括 target="_blank" 所以你可以尝试使用这个 doctype

```
<!DOCTYPE html PUBLIC "-//w3c//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhmtl1/DTD/xhmtl1-transitional.dtd"> 
```

# java - 每 1 分钟将该设备的位置坐标插入数据库

> ID：14309449
> 
> 赞同：1
> 
> 时间：2013-01-13T23:25:31.130
> 
> 标签：java, android, location, android-location, locationlistener

我正在开发应用程序，我需要`location`在每个`1 minute`特定的`device/user`.

假设如果用户在应用程序打开时正在移动，那么他的坐标应该在每个`1 minute`. 因此，我有我的 Web 服务设置，可以将数据插入 MySql 数据库。我已经在插入部分测试了我的 WebService，它工作正常。

但我遇到的问题是 - 我不认为它会在每个`1 minute`. 谁能告诉我为什么每次都没有发生`1 minute`？如果下面的代码有任何问题，任何人都可以通过提供一些示例来帮助我解决上述问题吗？

任何想法都会有很大帮助。

```
private final String id = UUID.randomUUID().toString();
private final String sampleURL = ServerInfo.getServiceURL() + "/insert";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

    locationListener = new GPSLocationListener();

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            60000, 
             0, 
            this.locationListener);

} 
```

下面是实现的类`LocationListener`。

```
private class GPSLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));
                }
     // Below code is used to insert into database
            String userId = id;
            String mLatitude = Double.toString(location.getLatitude());
            String mLongitude = Double.toString(location.getLongitude());
            String mProvider = location.getProvider();
            String mHasAltitude = Boolean.toString(location.hasAltitude());
            String mAltitude = Double.toString(location.getAltitude());
            String mHasSpeed = Boolean.toString(location.hasSpeed());
            String mSpeed = Float.toString(location.getSpeed());
            String mHasBearing = Boolean.toString(location.hasBearing());
            String mBearing = Float.toString(location.getBearing());
            String mHasAccuracy = Boolean.toString(location.hasAccuracy());
            String mAccuracy = Float.toString(location.getAccuracy());

            WebServiceTask wst = new WebServiceTask(WebServiceTask.POST_TASK,
                    getApplicationContext(), "Posting data...");

            wst.addNameValuePair("user_id", userId);
            wst.addNameValuePair("mlatitude", mLatitude);
            wst.addNameValuePair("mlogitude", mLongitude);
            wst.addNameValuePair("mprovider", mProvider);
            wst.addNameValuePair("mhasAltitude", mHasAltitude);
            wst.addNameValuePair("mAltitude", mAltitude);
            wst.addNameValuePair("mhasspeed", mHasSpeed);
            wst.addNameValuePair("mspeed", mSpeed);
            wst.addNameValuePair("mhasbearing", mHasBearing);
            wst.addNameValuePair("mbearing", mBearing);
            wst.addNameValuePair("mhasaccuracy", mHasAccuracy);
            wst.addNameValuePair("maccuracy", mAccuracy);

            // This will insert into database
            wst.execute(new String[] { sampleURL });

    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

**注意： -** 它正在插入数据库，但它没有完全或大约在我需要的时间间隔内插入`1 minute`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:37:58.640

这个问题可能是由几个问题引起的，这些问题不是您作为程序员直接控制的。想到的一些是

1.  网络可能不可用，因此无法将定位数据发送到您的应用程序。

2.  一个行为不端的应用程序正在占用 CPU 时间，并且操作系统不会在您想要的时间间隔内中断它。

一般来说，在专为多任务处理而设计的设备上获得准确的时间几乎是不可能的。根据您可以接受的误差范围，以“近似”时间间隔获取数据也可能存在问题。

# wpf - FlowDocument 显示的自动宽度

> ID：14309451
> 
> 赞同：3
> 
> 时间：2013-01-13T23:25:39.300
> 
> 标签：wpf, flowdocument

在我的应用程序中，我正在生成一个包含多段文本的 FlowDocument。

使用[FlowDocumentScrollViewer](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentscrollviewer.aspx)，我可以在我的 UI 中显示文档。如果文档对于可用空间来说太长，FlowDocumentScrollViewer 会完成它的工作并引入一个垂直滚动条。都好。

如果我使用[FlowDocumentPageViewer](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentpageviewer.aspx)响应来显示额外的文本页面，也按照设计。

但是，我想要在我的应用程序中让查看器变得更广泛。

因此，对于短文档，查看器很窄（例如，大约 360 像素，一列文本），但对于较长的文档，查看器更宽（例如，大约 720 像素，两列文本）。更长的文档将扩展到三列，依此类推。

我见过很多做这种事情的 WinRT 应用程序 - [The New Zealand Herald](http://apps.microsoft.com/webpdp/en-gb/app/the-new-zealand-herald/5bf5ecca-30d3-4fc9-8542-e0ded824b94d)有一个应用程序。但是，我正在使用常规的 WPF 并最终被难住了。

**如何显示 FlowDocument 以便它一次全部可见 - 没有滚动条，没有分页，只有多列文本延伸？**

我为什么要这个？我在一个页面上显示了几条不同的信息，我希望有一个水平滚动条来平移整个区域，而不是为每条单独的滚动条。例如，我通过使用 WrapPanel 作为 ItemsPanelTemplate 让我的 ListBoxes 以这种方式工作 - 当一列的项目太多时，另一列打开并且列表框变得更宽以容纳。

# linux - Linux 设备驱动程序错误

> ID：14309452
> 
> 赞同：3
> 
> 时间：2013-01-13T23:25:49.120
> 
> 标签：linux, embedded, driver, device

我有一个嵌入式系统，并且我为硬盘控制器开发了一个设备驱动程序。当我使用 insmod 插入驱动程序时，出现以下错误。

警告：在 fs/sysfs/dir.c:455 sysfs_add_one+0xb0/0xdc() sysfs：无法创建重复的文件名 '/block/xsa'

```
Call Trace:
[<c00040ac>] microblaze_unwind+0x54/0x78
[<c0003db8>] show_stack+0x120/0x158
[<c0003df8>] dump_stack+0x8/0x20
[<c000fd40>] warn_slowpath_common+0x80/0xbc
[<c000fe08>] warn_slowpath_fmt+0x28/0x40
[<c00d51dc>] sysfs_add_one+0xa4/0xdc
[<c00d5cd4>] create_dir+0x80/0x100
[<c00d5fa0>] sysfs_create_dir+0x138/0x16c
[<c01586cc>] kobject_add_internal+0xc4/0x1dc
[<c0158920>] kobject_add_varg+0x4c/0x78
[<c0158e88>] kobject_add+0x68/0x80
[<c0187420>] device_add+0xac/0x56c
[<c014da98>] register_disk+0x48/0x1b8
[<c014e014>] add_disk+0x110/0x2c8
[<c805c7c4>] bean_of_probe+0x25c/0x324 [bean]
[<c018b9d0>] platform_drv_probe+0xc/0x24
[<c018a2c4>] driver_probe_device+0xe0/0x1b8
[<c018a61c>] __driver_attach+0x68/0xb4
[<c01890d4>] bus_for_each_dev+0x50/0xa8
[<c018a080>] driver_attach+0x18/0x30
[<c0189bac>] bus_add_driver+0xc4/0x2a0
[<c018aad8>] driver_register+0xf0/0x1ac
[<c018bd00>] platform_driver_register+0x58/0x70
[<c805e050>] bean_init+0x50/0xbc [bean]
[<c00002f4>] do_one_initcall+0x11c/0x220
[<c0047504>] sys_init_module+0x84/0x200
SYSCALL 
```

---[ end trace 56a543209f1c03c6 ]--- kobject_add_internal 对带有-EEXIST 的xsa 失败，不要尝试在同一目录中注册具有相同名称的东西。内核堆栈：

我了解它正在尝试使用已注册到紧凑型闪存卡的名称 xsa。我的问题是内核如何决定应该使用的名称？如果有人可以帮助我，因为我刚刚开始使用 Linux。

谢谢

乔恩

# php - 如果页面包含 2 个提交按钮，如何构建页面

> ID：14309455
> 
> 赞同：2
> 
> 时间：2013-01-13T23:25:57.207
> 
> 标签：php, html

我有一个页面，它分为 3 个部分，带有 2 个提交按钮：

**第 1 部分：**包含一个模块下拉菜单。用户从下拉菜单中选择选项并提交。每次提交时，它都会更改第 2 部分，并且隐藏第 3 部分。提交后下拉菜单返回`Please Select`选项。

**第 2 部分：**包含评估下拉菜单，仅在用户提交第 1 部分后出现。当用户从评估下拉菜单中选择选项并单击提交按钮提交此部分时，下拉菜单返回`Please Select`并出现第 3 部分。每次提交第 2 部分时，第 3 部分都会更改，并带有不同的选项。

**第 3 部分：**显示第 2 部分的详细信息。仅根据从第 2 部分选择和提交的评估显示和更改。如果用户从第 1 部分提交，则隐藏此部分。

我的问题是什么是正确的结构才能匹配我上面所说的。我的意思是，if 语句在哪里，if 语句中的内容以及何时关闭 if 语句？

下面是我的代码，问题是如果我单击第 2 部分中的提交按钮，而不是显示第 3 部分，它只会删除第 2 部分并仅显示第 2 部分所在的第 3 部分，所以我认为我的页面结构不正确。我评论了每个部分的位置。

```
 //PART 1

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
    <tr>
    <th>Module: 
    <select name="modules" id="modulesDrop">
    <option value="">Please Select</option>
    <option value="1">Art</option>
    <option value="2">ICT</option>
    <option value="3">Business</option>
    </select>
    </th>
    </tr>
    </table>
    <p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
    </form>

    <?php

    if (isset($_POST['moduleSubmit']) || isset($_POST['sessionSubmit'])){   

    //PART 2

    if($_POST['modules'] == ''){
    $pHTML = "<span style='color: red'>Please Select a Module</span>";
    }else if($sqlnum == 0){
    $pHTML = "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
    } else{

    $sessionHTML = '';
    $sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
    $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;       
    $sessionHTML .= '<option value="one">AAA</option>'.PHP_EOL;     
    $sessionHTML .= '<option value="two">AAB</option>'.PHP_EOL;     
    $sessionHTML .= '<option value="three">AAC</option>'.PHP_EOL;  
    $sessionHTML .= '</select>';  

    $assessmentform = "
    <form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
    <p id='warnings'>{$pHTML}</p>
    <p><strong>Assessments:</strong> {$sessionHTML} </p>   
    <p><input id='sessionSubmit' type='submit' value='View Assessment Details' name='sessionSubmit' /></p>
    </form>";

    echo $assessmentform;

     }
        }

    if (isset($_POST['sessionSubmit'])) {

    //PART 3

if($_POST['session'] == ''){
$sHTML = "<span style='color: red'>Please Select a Session</span>";
} else{

    $sessiondetails ="
    <p id='warnings'>{$sHTML}</p>
    <p>You have selected an Assessment where the details will be displayed here:</p>
    ";  

    echo $sessiondetails;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:39:20.350

您确实需要分离数据逻辑（即您要求 PHP 做什么）和呈现（您要求 HTML 做什么）。我会用 PHP 功能打开您的脚本，确定您要显示的内容，然后将您的 HTML 放入单独的 phtml 文件中。

我还包括一个隐藏字段，指示用户当前正在执行的步骤。这将允许您执行以下操作：

```
<?php
   if (isset($_POST['step'] && $step = $_POST['step']) {
      // The user has submitted a form
   } else {
      // They're fresh visitors
      $step = 0;
   }
?>

<!-- HTML markup here -->

<form method="post">

   <input type="hidden" name="step" value="<?=$step + 1?>">

   <? if ($step == 2): ?>

       <? if (!$_POST['modules']): ?>
           <span style='color: red'>Please Select a Module</span>
       <? elseif (!$sqlnum): ?>
           <span style='color: red'>Sorry, You have No Assessments under this Module</span>
       <? endif; ?>

   <? endif; ?>

   <? // etc. etc. ?>

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:01:20.047

这是一个如何使用 jQuery 执行此操作的示例。这是使用您的代码的最小示例：

```
 <!DOCTYPE html>
<html lang="en">
  <head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
// JavaScript Document
$(function()
    {
     $('#form_one').submit(function()
        {
            $('#form_one_error').css("display","none");
            var Modules = $('#modulesDrop').val();
            if(Modules)
            {
                $('#select_two').css("display","block");
                return false;
            }
        $('#form_one_error').css("display","block");
         return false;    
        });
    $('#form_two').submit(function()
        {
            $('#form_two_error').css("display","none");
            $('#select_two').css("display","block");
            var Ses = $('#sessionsDrop').val();
            if(Ses)
            {
                $('#select_three').css("display","block");
                return false;
            }
        $('#form_two_error').css("display","block");
         return false;    
        });
});
</script>  
</head>
  <body>
<div align="left" id="form_one_error" style="display:none;">
<font color="#FF0000">Please Select A Module</font>
</div>

<form action="" id="form_one">
<b> Module:</b> 
    <select name="modules" id="modulesDrop">
    <option value="">Please Select</option>
    <option value="1">Art</option>
    <option value="2">ICT</option>
    <option value="3">Business</option>
    </select>
<p><input type="submit" value="Submit Module"/></p>
</form>

<div align="left" id="form_two_error" style="display:none;">
<font color="#FF0000">Please Select Assessments</font>
</div>

<div align="left" id="select_two" style="display:none;">
<form action="" id='form_two'>
<b>Assessments:</b>
<select name="session" id="sessionsDrop">
    <option value="">Please Select</option>      
    <option value="one">AAA</option>    
    <option value="two">AAB</option>    
    <option value="three">AAC</option> 
 </select>
<p><input id='sessionSubmit' type='submit' value='View Assessment Details' name='sessionSubmit' /></p>
</form>
</div>

<div align="left" id="select_three" style="display:none;">
You have selected an Assessment where the details will be displayed here:
</div>  

  </body>
</html> 
```

# seo - 我网站上的这些链接会对搜索引擎索引产生负面影响吗？

> ID：14309456
> 
> 赞同：0
> 
> 时间：2013-01-13T23:26:14.803
> 
> 标签：seo

我设置了我的站点，以便用户可以输入栏的名称作为 URI，并且我站点中的链接以相同的方式构建。

例如`triadbarspecials.com/bars.php?id=234546456`，我将链接设置为，而不是`triadbarspecials.com/somebarname`。

我正在使用 .htaccess 指向正确的页面。最好在我的网站链接中使用上面的第一个 url，还是搜索引擎机器人能够处理上面的第二个 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:29:39.050

搜索引擎将能够完美地处理第二个变体。实际上，使用这种“会说话”的 URL 通常被称为“搜索引擎友好的 URL”。这是由于用户仅通过查看 URL 就可以看到某个 URL 背后的内容。以类似的方式，搜索引擎可以使用路径作为关键字。

只需确保大多数（或如果可能的话；所有）URL 都是唯一的。提供完全相同内容的页面越多（搜索引擎通常不会看到重定向到同一页面），这对您的页面来说就越糟糕。只要内容是独特的和/或不同的，这是完全可以的（如前所述；或多或少推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:51:55.627

这是常见的做法，尽管 URL 通常被屏蔽，因此您永远看不到 ID 号。

只要您使用正确的 htaccess 重定向（请参阅[本指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)或[本](http://www.branded3.com/blogs/htaccess-mod_rewrite-ultimate-guide/)指南），那么您就不会有任何问题。

# ios - 从objective-c中的主线程返回值

> ID：14309458
> 
> 赞同：5
> 
> 时间：2013-01-13T23:26:17.177
> 
> 标签：ios, objective-c, multithreading, ios6

我正在开发一个需要在后台线程中构建一些图像的应用程序。在此过程中的某个时刻，我需要从 UITextView 获取文本。如果我调用 UITextview.text，我会收到警告说我的辅助线程不应该纠缠 UIKit

这一切都很好，但我需要文本，我无法找到一种合理的方式从主线程中获取所述文本。

我的问题是：有没有人想出一种从后台线程中获取 UI 元素属性的好方法，或者，是否有好的方法首先避免这样做？

我把这个东西放在一起，它成功了，但感觉不太对劲：

```
@interface SelectorMap : NSObject

@property (nonatomic, strong) NSArray *selectors;
@property (nonatomic, strong) NSArray *results;

@end

@interface NSObject (Extensions)
- (NSArray *)getValuesFromMainThreadWithSelectors:(SEL)selector, ...;
- (void)performSelectorMap:(SelectorMap *)map;
@end 
```

和实施：

```
#import "NSObject+Extensions.h"

@implementation SelectorMap
@synthesize selectors;
@synthesize results;
@end

@implementation NSObject (Extensions)

- (void)performSelectorMap:(SelectorMap *)map
{
    NSMutableArray *results = [NSMutableArray arrayWithCapacity:map.selectors.count];

    for (NSString *selectorName in map.selectors)
    {
        SEL selector = NSSelectorFromString(selectorName);
        id result = [self performSelector:selector withObject:nil];
        [results addObject:result];
    }

    map.results = results.copy;
}

- (NSArray *)getValuesFromMainThreadWithSelectors:(SEL)selector, ...
{
    NSMutableArray *selectorParms = [NSMutableArray new];

    va_list selectors;
    va_start(selectors, selector);

    for (SEL selectorName = selector; selectorName; selectorName = va_arg(selectors, SEL))
        [selectorParms addObject:NSStringFromSelector(selectorName)];

    va_end(selectors);

    SelectorMap *map = [SelectorMap new];
    map.selectors = selectorParms.copy;

    [self performSelectorOnMainThread:@selector(performSelectorMap:) withObject:map waitUntilDone:YES];

    return map.results;
}

@end 
```

我这样称呼它：

```
NSArray *textViewProperties = [textView getValuesFromMainThreadWithSelectors:@selector(text), @selector(font), nil]; 
```

获取字体不会给出与获取文本相同的警告，但我认为最好保持一致。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-13T23:29:53.333

我尽可能避免任何类型的元编程。它完全破坏了编译器对您的代码进行仔细检查的能力，并且它往往是不可读的。

```
 __block NSString* foo;
 dispatch_sync(dispatch_get_main_queue(), ^{
      foo = [textField ...];
  }); 
```

请注意，如果不使用 ARC，您可能希望在块中`copy`使用字符串，`retain`然后在本地线程中使用。`release``autorelease`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:32:42.883

您可以在主线程上使用 performSelector，也可以使用 GCD 在主队列上调度。

```
[self performSelectorOnMainThread:@selector(updateText:) withObject:nil waitUntilDone:YES]; 
```

GCD 看起来像：

```
dispatch_queue_t main = dispatch_get_main_queue();

dispatch_sync(main, ^{
  // read and assign here
}); 
```

这是有关该主题的相关帖子：

[GCD、线程、程序流程和 UI 更新](https://stackoverflow.com/questions/7290931/gcd-threads-program-flow-and-ui-updating/7291056#7291056)

# java - 摆脱数组中的空值。爪哇

> ID：14309461
> 
> 赞同：1
> 
> 时间：2013-01-13T23:26:45.647
> 
> 标签：java, arrays, loops, while-loop

我不太确定，问题出在哪里。代码工作正常，但是，在我输入几个词后，即：

猫

猫

结尾

它向我展示了：

猫

猫

无效的。

我的猜测是字符串 k 或数组的大小。所以我想，我需要以某种方式输入“结束”工作，对吗？

```
public static void main(String[] args) {
  Scanner sc = new Scanner(System. in );

  String type;
  String word;
  String words[] = new String[100];
  int i = 1;

  String k = "end";
  System.out.println("Type a word: ");
  word = sc.next();

  while (word.compareToIgnoreCase(k) != 0) {

    words[i] = word;
    i = i + 1;
    word = sc.next();
  }

  System.out.println("What type A,B,C:");
  typ = sc.next();

  if (typ.equals("B")) {
    int lenght = words.length;
    lenght = i + 1;
    i = 1;
    while (i < lenght) {
      System.out.print(words[i]);
      System.out.println();

      i = i + 1;
    }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:33:23.827

您只需要将最后一个单词添加到数组中：

```
while (word.compareToIgnoreCase(k) != 0) {

  words[i] = word;
  i = i + 1;
  word = sc.next();
}
words[i] = word; // Add the last item entered 
```

顺便说一句，我建议使用 a`List<String>`而不是 a`String[]`并调用`words.add(word)`. 一方面，这意味着您不必跟踪索引 ( `i`)。更重要的是，列表可以随心所欲，并且您只会使用所需的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:54:10.517

```
String type;
  String word;
  String words[] = new String[100];
  int i = 0;

  String k = "end";
  System.out.println("Type a word: ");
  word = sc.next();
words[i] = word;

  while (word.compareToIgnoreCase(k) != 0) {    
    i = i + 1;
    word = sc.next();
    words[i] = word;
  }

  System.out.println("What type A,B,C:");
  typ = sc.next();

  if (typ.equals("B")) {
    int lenght = words.length;
    i = 0;
    while (i < lenght-1) {
      System.out.print(words[i]);
      System.out.println();

      i = i + 1;
    }
  }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:34:21.147

数组从“0”开始，而不是“1”。

```
// Better
int i = 0
...
while (word.compareToIgnoreCase(k) != 0) {
    words[i++] = word;
    word = sc.next();
}

i = 0;
while (i < length) {
  System.out.print(words[i++]);
  System.out.println();
} 
```

关于您的逻辑有几件事我不明白，但我假设您可能每次都想添加一个“单词”。

而且我几乎可以肯定您可能想从索引“0”开始，并在“length-1”处停止。因为“array[length]”和所有后续元素将默认为“null”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:36:22.907

您的问题是，在第一个循环中，您将事物添加到数组中，您在完成分配后会增加计数器。这意味着您最后的索引表示长度 + 1。

所以你从 1 开始（尽管 Java 数组从 0 开始，所以你永远不会为数组中的第一个条目赋值，不确定这是否是故意的）。

因此，当您添加 Cat 时，索引变为 2。

再往下，然后将长度加 1，与

长度 = 我 + 1;

最简单的答案是删除这一行，尽管您可以进行许多其他重构来减少其中的代码量。

# java - 为什么servlet重定向很快？

> ID：14309463
> 
> 赞同：0
> 
> 时间：2013-01-13T23:26:58.840
> 
> 标签：java, javascript, servlets

我想知道为什么 servlet 中的`JavaScript`重定向比重定向更好。

另外我想知道为什么`JavaScript`重定向很慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:30:27.907

大多数服务器端重定向是使用`Location: http://www.example.com` [HTTP 标头](http://en.wikipedia.org/wiki/HTTP_location)（和 302 代码）实现的。当浏览器在标题中读取此内容时，它（应该）立即停止正在执行的操作并开始获取该页面。

当它在 JavaScript 中实现时，通常（取决于您如何实现）整个页面必须在 JavaScript 执行以开始重定向之前加载（或至少下载）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:28:56.830

从 servlet 发送的重定向（301 或 302 状态）只是一个标头，因此浏览器不必加载任何其他内容或解析任何 html 或 javascript

# php - 文件路径和目录名中的空格（__File__）

> ID：14309464
> 
> 赞同：0
> 
> 时间：2013-01-13T23:27:01.003
> 
> 标签：php, wordpress

Wordpress / PHP 相关问题。

我有一个 Wordpress 插件，用于`dirname(__File__)`从主题文件夹中检索一些 .js 文件。

主题文件夹的名称中有一个空格，即：“我的主题”。

`dirname(__File__)`似乎忽略了空间并试图加载 /`MyTheme/script.js`所以找不到脚本。

任何帮助纠正这个问题（不从目录名称中删除空格）将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:42:17.963

首先，正如其他人所说，文件路径中的空格不好。其次，WordPress 插件永远不应与特定主题相关联。

如果插件是特定于主题的，您应该将其包含在主题的 functions.php 中，这样您就可以轻松访问主题中的所有内容

# javascript - 加入或查找两个 JSON 数据集

> ID：14309466
> 
> 赞同：0
> 
> 时间：2013-01-13T23:27:43.863
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui

我有两个使用 getJSON jquery 从服务器获取的以下结构的 JSON 数据。

```
countrylist = [
    { "Country": "United States", "Code": "us" }, 
    { "Country": "Belgium", "Code": "be" }, 
    { "Country": "Argentina", "Code": "ar" },
    .
    .
    .
]

citylist = [
    { "City": "Abernant", "ContryCode": "us", "CityId"=1 }, 
    { "City": "Academy Park", "ContryCode": "be", "CityId"=2}, 
    { "City": "Abernathy", "ContryCode": "ar","CityId"=3 },
    .
    .
    .
] 
```

我需要在我的 div 中显示城市、国家我如何从 Citylist 对象中的国家列表中查找国家代码并放置其完整国家。所以我可以显示

```
Abernant, United States
Academy Park, Belgium
Abernathy, Argentina 
```

到目前为止我有这个代码

```
 $.getJSON('../GetCountrylist', function (data) {
    var countryList =data;
  });

  $.getJSON('../GetCitylist', function (data) {
    //this is where i need to Join the data
    //for each data dispaydata= data.City ',' + Country
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:47:23.543

您可以`countrylist`使用`countrylist.Code`作为属性进行转换。使获得国家成为一项微不足道的任务。

```
var countries = {};
$.each(countrylist, function(i, country){
  countries[ country.Code ] = country.Country;
}); 
```

现在，您可以迭代`citylist`并从`countries`.

```
$.each(citylist, function(j, city){
  console.log(city.City + "," + countries[ city.ContryCode ]);
}); 
```

[看这里。](http://jsfiddle.net/RzgR8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T12:23:06.427

您可以使用[Alasql](http://github.com/agershun/alasql) JavaScript 库来做到这一点。

这是一个主要的运营商：

```
var data = alasql('SELECT city.City, country.Country FROM ? AS city \
     JOIN ? AS country ON city.CountryCode = country.Code',[citylist, countrylist]); 
```

在 jsFiddle试试[这个示例](http://jsfiddle.net/agershun/tyuv0r02/2/)。

Alasql 可以直接下载 JSON 数据到 SELECT 语句中：

```
alasql("SELECT city.City, country.Country \
     FROM JSON('../GetCountrylist') AS city \
     JOIN JSON('../GetCitylist') AS country \
     ON city.CountryCode = country.Code",[], function(data){
    // use data
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:45:53.120

这是一个可能的解决方案`$.extend`：

```
var countrylist = [{ "Country": "United States", "Code": "us" }, { "Country": "Belgium", "Code": "be" }, {"Country": "Argentina", "Code": "ar" }],
        citylist = [{ "City": "Abernant", "Code": "us", "CityId":1},{ "City": "Academy Park", "Code": "be", "CityId": 2},{ "City": "Abernathy", "Code": "ar","CityId":3 }],
        newArray = [];  

$.each(citylist, function(idx,val){
   var code = val.Code;
   $.each(countrylist,function(x,valu){
        if(valu.Code === code){
          newArray.push($.extend({},valu,val));
        } 
      });  
    });     

    console.log(newArray); 
```

[http://jsfiddle.net/3j5Aw/](http://jsfiddle.net/3j5Aw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:38:39.937

```
var cityList = [];
var countryList = [];

// Assumption: You get countryList populated before calling this one
$.getJSON('../GetCitylist', function (data) {
 cityList = data;

 var outputString = '';
 for(var i in cityList) { // these are each objects ?
  // Assumption: You have no spaces in your property names
  outputString += cityList[i].City + ',';
  // You could also use cityList[i]['City'] if you expect spaces in your property
  // names - same below - choose the accessor method that's most appropriate to
  // your data
  for(var j in countryList) { // these are also objects ?
    if(countryList[j].Code === cityList[i].CountryCode) {
      outputString += countryList[j].Country;
    }
  }
  outputString += '<br />';
 }
 $('.selector').html(outputString);
}); 
```

# java - 当用户只想打印使用情况时，如何避免所需选项的 ParserException？

> ID：14309467
> 
> 赞同：7
> 
> 时间：2013-01-13T23:27:56.207
> 
> 标签：java, apache-commons-cli

所以我有一个`Options`实例，其中包括其他选项（注意`isRequired()`）：

```
 options.addOption(OptionBuilder
                .withLongOpt("seq1")
                .withDescription("REQUIRED : blah blah")
                .hasArg().isRequired().create());
        options.addOption(OptionBuilder
                .withLongOpt("seq2")
                .withDescription("REQUIRED : blih blih")
                .hasArg().isRequired().create());
        options.addOption(new Option("?", "help", false,
                "print this message and exit")); 
```

当我调用时`parser.parse(args)`抛出异常，如果`seq1`并且`seq2`不存在 - 但我想让它打印我的消息并且没有抛出异常 - 怎么办？这自然会引发 NPE `line.hasOption("help")`：

```
CommandLine line = null;
try {
    CommandLineParser parser = new GnuParser();
    // parse the command line arguments
    line = parser.parse(options, args);
} catch (ParseException e) {
    if (line.hasOption("help")) { //NPE
        usage(0);
    }
    System.err.println("Parsing failed.  Reason: " + e.getMessage());
    usage(1);
}

private static void usage(int exitCode) {
    // automatically generate the help statement
    HelpFormatter formatter = new HelpFormatter();
    formatter.printHelp("Smith Waterman", OPTIONS, true);
    System.exit(exitCode);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T11:23:56.993

[从这里](https://stackoverflow.com/a/10798771/281545)改编的解决方案

```
private static final Options OPTIONS = new Options();
private static final Options HELP_OPTIONS = new Options();
OPTIONS.addOption(OptionBuilder
        .withLongOpt("seq1")
        .withArgName("file1")
        .withDescription(
                "REQUIRED : the file containing sequence 1")
        .hasArg().isRequired().create());
// etc
final Option help = new Option("?", "help", false,
        "print this message and exit");
HELP_OPTIONS.addOption(help);
OPTIONS.addOption(help);
// later
CommandLineParser parser = new GnuParser();
CommandLine line = parser.parse(HELP_OPTIONS, args, true); // true so it
// does not throw on unrecognized options
if (line.hasOption("help")) {
    usage(0); // calls exit
}
line = parser.parse(OPTIONS, args); 
```

如果有更优雅的东西出现，我很乐意接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:59:00.160

根据您的使用情况，这可能有用也可能没用。我的如下：

*   我有一个包装程序（称为“控制器”）
*   控制器可以运行许多命令（称为“任务”）
*   每个命令都有自己独特的命令行参数集

例如：

```
$ controller startall -rsrc foo -dir bar -where baz 
```

使用参数完成的第一件事是确定命令是什么。为此，我设置了一个 TaskFactory，它查看第一个参数，去掉任何前导连字符，然后查看它是否是已知任务。我有一个“帮助”任务，可以让我的用户执行以下操作：

```
$ controller -help 
```

和

```
$ controller help 
```

每个任务还​​有一个帮助选项，所以用户可以：

```
$ controller startall -help 
```

不过，这可能对您没有帮助。我会发布一个替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-16T13:58:31.213

我在解析之前使用了以下检查以确保`-h`或`--help`否决其他所有内容。

```
// check if help is requested
if (Arrays.asList(args).contains("-h")
        || Arrays.asList(args).contains("--help")) {
    usage(0); // print usage with exit 0
}
// parse options 
```

不是最好的解决方案，但它满足我的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T04:33:23.863

正如您所发现的，Commons CLI 不处理选项间依赖关系。在您的情况下，该选项修改了and`--help`的要求。`seq1``seq2`

唯一真正的解决方案是使所有选项都不是必需的，并在命令行解析完成后自己进行依赖关系验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T15:15:10.913

扩展您选择的解析器以忽略未知选项：

[Apache Commons CLI 选项解析器可以忽略未知的命令行选项吗？](https://stackoverflow.com/questions/6049470/can-apache-commons-cli-options-parser-ignore-unknown-command-line-options)

然后解析参数两次，一次用于`-help`参数，一次用于普通参数。第一次通过你应该传递“忽略”标志，第二次你不应该。

或者，对选项进行两次解析，一次查找`-help`并捕获（并忽略）`MissingOptionException`，然后再次使用常规参数。

# javascript - 我需要将一个项目从堆栈中弹出到一个变量中，并将原始变量推送到另一个数组中

> ID：14309472
> 
> 赞同：0
> 
> 时间：2013-01-13T23:28:34.980
> 
> 标签：javascript, function, stack, push, javascript-objects

我有 2 个数组和一个变量。我可以将一个项目推送到一个变量中，然后再次单击，将其添加到一个数组中。但是，我有另一个按钮，可以将该数组中的一个项目移回变量中，然后将变量移动到另一个数组中。我的代码适用于第一部分，但是我的函数现在确实加载了第二部分，请问有什么帮助吗？

这部分似乎不起作用

```
<INPUT type=button value="Back" onClick='txtPop.value = popBackStack();showStack(theList);pushForStack(curUrl);
showStack2(theList2);'> 
```

整个代码如下：

```
<HTML>
<HEAD>
<TITLE>Stacking up!</TITLE>
<SCRIPT>

var backStack = new Array(); 
var forStack = new Array();
var curUrl = document.getElementById("txtPop");

function pushStack(newVal) {
backStack.push(curUrl);
curUrl = newVal;
}

function pushForStack(newVal) {
CurUrl = newVal;
forstack.push(curUrl);
}

function popBackStack() {
var popVal = backStack.pop();  
if (popVal == undefined)
  return "Nothing left!";
else
return popVal
}

function popForStack() {
var popVal = forStack.pop();
if (popVal == undefined)
  return "Enter a new URL";
else
return popVal;
}

function showStack(theSelect){
theSelect.options.length = 0;
for (var i = 0; i < backStack.length; i++){
  var theOption = new Option(backStack[i]);
  theSelect.options[theSelect.options.length] = theOption;
}
}

function showStack2(theSelect){
theSelect.options.length = 0;
for (var i = 0; i < forStack.length; i++){
  var theOption = new Option(forStack[i]);
  theSelect.options[theSelect.options.length] = theOption;
}
}
 </SCRIPT>

</HEAD>
<BODY>
<FORM>
<table width="104%" height="364" border="5" cellpadding="3" cellspacing="3">
<tr>
<th width="30%" height="78" scope="col"><p>
<INPUT type=button value="Back" onClick='txtPop.value =     popBackStack();showStack(theList);pushForStack(curUrl);
showStack2(theList2);'></p></th>
<th width="46%" scope="col"><p>
<center>
<INPUT type=text name=txtPush>
<INPUT type=button value="Push"   onClick='pushStack(txtPush.value);txtPush.value="";txtPop.value = curUrl;   showStack(theList);'>
</center>
</p></th>
<th width="24%" scope="col"><p><INPUT type=button value="Forward" onClick="txtPop.value      = popBackStack();showStack2(theList2);"></p></th>
</tr>
<tr>
<td><p><center>
<SELECT name="theList" size=12>
</SELECT>
</center></p></td>
<td><p><center><INPUT type=textki name=txtPop size=25></center></p></td>
<td><center>
<SELECT name="theList2" size=12>
</SELECT>
</center></td>
</tr>
</table>
</FORM>
<p>&nbsp;</p>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:44:49.573

尝试将 curUrl 变成一个新数组并从 backStack 弹出到 curUrl，然后将 curUrl 弹出到 forStack。

```
curUrl = new Array () 
```

# maven - 在 gradle 中重用 maven uber.pom

> ID：14309475
> 
> 赞同：4
> 
> 时间：2013-01-13T23:29:00.377
> 
> 标签：maven, gradle

在我公司，我们使用 maven 作为默认构建工具。我们还有“uber.pom”，其中定义了依赖管理部分中一些常用库的默认版本（以确保我们项目之间的一致性）。我们所有的项目都将此 pom 引用为 parent.pom。在我们的一个项目中，我们决定使用 gradle。我想知道是否有某种方法可以引用“uber.pom”，这样我们就不必为 gradle 再次定义相同的版本属性。我不想最终保持 uber.pom 和 gradle.properties 同步。我假设我可以编写一些插件来解析 uber.pom 并获取版本，然后将其设置到我的 gradle 项目中，但我想确保没有更好、更直接的方法来实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:16:55.737

Gradle 目前没有内置支持从 Uber POM 获取构建信息。您必须编写自己的插件。

# css - Zurb Orbit：在图像上添加文本

> ID：14309481
> 
> 赞同：3
> 
> 时间：2013-01-13T23:29:35.423
> 
> 标签：css, zurb-foundation, orbit

我想为每张幻灯片添加一个标题和说明，如下所示：

![在此处输入图像描述](../Images/4b349003e3869b245816f3c18255cda6.png)

```
 <!-- Header -->
  <div id="featured">
      <img src="http://cf2.imgobject.com/t/p/w780/fI3ucpgaVKOUcQ82vhgWmWuLlg2.jpg">
      <img  src="http://cf2.imgobject.com/t/p/w780/dAc3Ob868XGnAX8uOptb7HWx0In.jpg">
      <img  src="http://cf2.imgobject.com/t/p/w780/2fwHVLvh6kdwCujsMwtNmwRJAf1.jpg">   
  </div>

<script type="text/javascript">
    $(window).load(function() {

       $('#featured').orbit();
    });
  </script> 
```

我尝试过使用“字幕”，但没有得到相同的效果。我该怎么办？

[Zurb 基金会轨道](http://foundation.zurb.com/docs/orbit.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:24:55.137

我现在正在与 Foundation 合作，所以我会尽力帮助您。因为在您的反馈会有所帮助之前我还没有这样做。

首先在您的 App.js 中为流体轨道添加这一行：

```
$('#featuredContent').orbit({ fluid: '800x800' }); 
```

800x800 是您的轨道滑块宽度和高度。

然后在您的 App.css 中添加以下内容：

```
#featuredContent .back {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
} 
```

它在您的 .js 文件中引用您的 #featuredContent 并添加一个 .back 类，我们将在 HTML 代码中使用该类：

```
<div id="featuredContent">
  <div>
    <h4>This is a content slider.</h4>
    <p>Each slide holds arbitrary content, like text or actions.</p>
    <img class="back" src="/images/test.jpg" />
  </div>
  <div>
    <h4>We can include text and buttons, like this!</h4>
    <p>We take no responsibility for what happens if you click this button.</p>
    <p><a href="http://www.youtube.com/watch?v=dQw4w9WgXcQ" class="button" target="_blank">Rock My World!</a></p>
    <img class="back" src="/images/test.jpg" />
  </div>
  <div>
    <h4>We can include text and buttons, like this!</h4>
    <p>We take no responsibility for what happens if you click this button.</p>
    <p><a href="http://www.youtube.com/watch?v=dQw4w9WgXcQ" class="button" target="_blank">Rock My World!</a></p>
    <img class="back" src="/images/test.jpg" />
  </div>
</div> 
```

我想这应该可以解决问题，并在背景中放置带有标题（H4）和描述（P）的图片。您还可以使用以下方法自定义 css 中标题和描述的位置：

```
#featuredContent p {
} 
```

和

```
#featuredContent h4 {
} 
```

# c++ - 令人困惑的 C++ 循环

> ID：14309484
> 
> 赞同：-1
> 
> 时间：2013-01-13T23:29:51.537
> 
> 标签：c++, loops

我正在尝试为终端中的 C++ 程序创建以下结构：

```
Menu:
   [1] Add Number
   [2] View Numbers
   [3] View Average

[CHOICE 1] 
   - Add a Number to array
   - Once finished, show Menu again so user can select another action
[CHOICE 2] 
   - View all numbers in array
   - Once finished, show Menu again so user can select another action
[CHOICE 3] 
   - View average of all numbers in array
   - Once finished, show Menu again so user can select another action 
```

我不确定如何设置它。当用户输入每个菜单项的相应编号时，就会出现相应的信息。这很容易，使用 if 语句来查找用户输入的数字。

但是，当我尝试再次显示菜单以便用户可以选择另一个操作时，我的问题就出现了。我认识到这里需要某种循环，但我不知道该怎么做。

你能帮我建立一个如何开始的基本结构吗？我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:32:17.853

将代码分解为单独的函数：

```
enum Action { AddNumber, ViewNumbers, ViewAverage, Quit, Error };

Action show_menu_and_read_user_input();   // write this!

int main()
{
    std::vector<int> numbers;

    for (bool again = true; again; )
    {
        switch (show_menu_and_read_user_input())
        {
            case Error:
                std::cout << "Sorry, I did not understand.\n";
                break;

            case Quit:
                std::cout << "Goodbye!\n";
                again = false;
                break;

            // ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:43:19.977

在非常基础的层面...

```
for(;;)
{
    // Display the menu
    cout << "Menu:\n"
            "   [1] Add Number\n"
            "   [2] View Numbers\n"
            "   [3] View Average\n";

    // Ask user for input
    int choice;
    cin >> choice;

    // Take action
    if( choice == 1 ) {
        // ...
    } else if( choice == 2 ) {
        // ...
    } else if( choice == 3 ) {
        // ...
    } else {
        cout << "Invalid choice\n";
    }
} 
```

这是一个无限循环，因为您的菜单似乎没有“退出”选项。我用`if`语句而不是 a 来说明这一点`switch`，因为作为初学者很容易被混淆`switch`并意外地遇到问题。

一步一步=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:38:52.737

将您的菜单条目分解为功能，以保持一切清洁且易于掌握（目前）。

这可以扩展很多，创建某种菜单处理等，但我会坚持这样的事情：

```
void mainmenu() {
    int choice;
    do {
        std::cout << "Menu\n[1] -> Add Number\n[2] -> View Numbers\n[3] -> View Average\n[0] -> Quit" << std::endl;
        std::cin >> choice;
        // now perform actions based on the choice
        switch (choice) {
        case 1:
            addanumber();
            break;
        case 2:
            printnumbers();
            break;
        case 3:
            printaverage();
            break;
        }
    } while (choice); // loop as long as the choice isn't 0 (i.e. user wants to exit)
} 
```

正如 Kerrek 在评论中提到的，这并不能真正检查用户是否真的选择了任何整数值。这使代码有点复杂，但一般来说是一个很好的做法（如果你忽略这些事情，事情扫描会变得讨厌）：

将`cin >> choice;`上面替换为：

```
if (!(std::cin >> choice)) {
    choice = -1; // if input provide an invalid choice so the menu just shows again
    // also clear the input buffer of leftovers
    std::cin.clear(); // clear the buffer
    std::cin.ignore(1000, '\n'); // read any leftover chars till a line break (user hit return key)
} 
```

# c++ - Qt 在外部目录中找不到 DLL 文件

> ID：14309486
> 
> 赞同：0
> 
> 时间：2013-01-13T23:30:11.367
> 
> 标签：c++, qt, dll, qt5

我一直在研究一个需要 SiLabs dll 的 QT（版本 5.0.0 mscv2010）项目：

对于外部目录中的 DLL：

```
`win32: LIBS += -L$$PWD/../../../test_devices/lib/SiLabs/ -lSiUtil`
`INCLUDEPATH += $$PWD/../../../test_devices/lib/SiLabs`
`DEPENDPATH += $$PWD/../../../test_devices/lib/SiLabs` 
```

但是，当我将程序放在 Dependency Walker 下时，它发现 SiUtil.dll 丢失

现在，当我将项目文件和 SiUtil.dll 位置更改为构建文件夹中的 lib 文件夹时：

```
`win32: LIBS += -L$$PWD/lib/SiLabs/ -lSiUtil`
`INCLUDEPATH += $$PWD/lib/SiLabs`
`DEPENDPATH += $$PWD/lib/SiLabs` 
```

有用！

这很烦人，因为我们试图共享库文件并避免重复

谢谢

# php - php表单进度条不起作用

> ID：14309491
> 
> 赞同：-2
> 
> 时间：2013-01-13T23:31:34.797
> 
> 标签：php, html

有人可以在此代码中发现错误，它没有显示上传进度。

```
<form action="upload.php" method="post" enctype="multipart/form-data">
<center><p> <input type='file' id='upload_id' size='58' style='height: 30px; font-size: 18px' name='filename'></p>
<input type='image' src='<?php echo $menu_upload_button; ?>' onclick="function set() { f=document.getElementById('progress_iframe'); f.style.display='block'; f.src='uploadprogress.php?id=<?=$upload_id?>';} setTimeout(set);">
<iframe id="progress_iframe" src="" style="display:none;" scrolling="no" frameborder="0"></iframe>
</form> 
```

输入的函数是这样的：

```
function set() { 
   f=document.getElementById('progress_iframe'); 
   f.style.display='block'; 
   f.src='uploadprogress.php?id=<?=$upload_id?>';
} 
setTimeout(set); 
```

上传进度.php：

```
<META HTTP-EQUIV='REFRESH' CONTENT='1;URL=?id=<?=$_GET['id']?>'>
Upload progress:<br />
<?php
    if(!$_GET['id']) die;
    $info = uploadprogress_get_info($_GET['id']);
    $kbytes_total = round($info['bytes_total'] / 1024);
    $kbytes_uploaded = round($info['bytes_uploaded'] / 1024);
    echo $kbytes_uploaded.'/'.$kbytes_total.' KB';
?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:49:00.030

对于初学者，我建议您在 HTML 中使用 $_GET['id'] 进行返工，因为这是安全漏洞的载体（点击该 URL 并传递一些讨厌的东西）。也许检查一个整数并以这种方式清理来自 $_GET['id'] 的响应。

另外，如果我可以建议，如果您连接到消除 iframe 的同一站点，因为您可以通过 ajax 更新页面上的适当元素，而无需使用 iframe（这将更快、更高效，如它不必每次都加载整页）。

但是，如果您保留此方法，您的 javascript 函数将永远不会在您的页面上结束，因为您的超时函数永远不会结束。你可以这样做：

```
var timer = setTimeout(
clearTimeout(timer); 
```

一个快速的猜测是uploadprogress.php 在不同的目录中，你给它一个相对的URL，而不是一个完整的URL。尝试切换它（如果它在您服务器上的 htdocs/foo/bar 目录中，请将其设置为 /foo/bar/uploadprogress.php

最后，setTimeout 中的时间参数是必需的。你需要包括它。在您的 setFunction 中弹出 console.log 或警报，以帮助您查看该函数被调用的频率。

# scala - Scala 柯里化与部分应用函数

> ID：14309501
> 
> 赞同：84
> 
> 时间：2013-01-13T23:32:45.140
> 
> 标签：scala, functional-programming, currying

我意识到这里有几个关于***什么是***柯里化函数和部分应用函数的问题，但我问的是它们有什么不同。举个简单的例子，这是一个查找偶数的柯里化函数：

```
def filter(xs: List[Int], p: Int => Boolean): List[Int] =
   if (xs.isEmpty) xs
   else if (p(xs.head)) xs.head :: filter(xs.tail, p)
   else filter(xs.tail, p)

def modN(n: Int)(x: Int) = ((x % n) == 0) 
```

因此，您可以编写以下代码来使用它：

```
val nums = List(1,2,3,4,5,6,7,8)
println(filter(nums, modN(2)) 
```

返回：`List(2,4,6,8)`。但我发现我可以这样做：

```
def modN(n: Int, x: Int) = ((x % n) == 0)

val p = modN(2, _: Int)
println(filter(nums, p)) 
```

这也返回：`List(2,4,6,8)`.

所以我的问题是，两者之间的主要区别是什么，你什么时候会使用一个而不是另一个？这是否只是一个示例过于简单，无法说明为什么要使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-14T09:42:49.633

[在Plasty Grove 链接的答案](https://stackoverflow.com/a/8650639/1287554)中已经很好地解释了语义差异。

不过，就功能而言，似乎没有太大区别。让我们看一些例子来验证这一点。首先，一个正常的功能：

```
scala> def modN(n: Int, x: Int): Boolean = ((x % n) == 0)
scala> modN(5, _ : Int)
res0: Int => Boolean = <function1> 
```

所以我们得到了一个带 的部分应用`<function1>`，`Int`因为我们已经给了它第一个整数。到现在为止还挺好。现在来咖喱：

```
scala> def modNCurried(n: Int)(x: Int): Boolean = ((x % n) == 0) 
```

使用这种表示法，您会天真地期望以下内容起作用：

```
scala> modNCurried(5)
<console>:9: error: missing arguments for method modN;
follow this method with `_' if you want to treat it as a partially applied function
          modNCurried(5) 
```

因此，**多参数列表**符号似乎并没有立即创建一个柯里化函数（假设是为了避免不必要的开销），而是等待您明确声明您希望它柯里化（该符号还有[其他一些优点](https://stackoverflow.com/a/4684598/124257)）：

```
scala> modNCurried(5) _
res24: Int => Boolean = <function1> 
```

这与我们之前得到的完全一样，所以这里没有区别，除了符号。另一个例子：

```
scala> modN _
res35: (Int, Int) => Boolean = <function2>

scala> modNCurried _
res36: Int => (Int => Boolean) = <function1> 
```

这演示了如何部分应用“普通”函数会导致一个函数接受所有参数，而部分应用具有多个参数列表的函数会创建一个函数链，**每个参数列表**一个，所有函数都返回一个新函数：

```
scala> def foo(a:Int, b:Int)(x:Int)(y:Int): Int = a * b + x - y
scala> foo _
res42: (Int, Int) => Int => (Int => Int) = <function2>

scala> res42(5)
<console>:10: error: not enough arguments for method apply: (v1: Int, v2: Int)Int => (Int => Int) in trait Function2.
Unspecified value parameter v2. 
```

可以看到，因为第一个参数列表`foo`有两个参数，所以柯里化链中的第一个函数有两个参数。

* * *

总之，就功能而言，部分应用的函数与柯里化函数并没有真正的不同。这很容易验证，因为您可以将任何函数转换为咖喱函数：

```
scala> (modN _).curried
res45: Int => (Int => Boolean) = <function1

scala> modNCurried _
res46: Int => (Int => Boolean) = <function1> 
```

* * *

# 后经

**注意：**您的示例`println(filter(nums, modN(2))`在没有下划线的情况下工作的原因`modN(2)`似乎是 Scala 编译器只是假设下划线是为了方便程序员。

* * *

**另外：**正如@a​​sflierl 正确指出的那样，Scala 在部分应用“正常”函数时似乎无法推断类型：

```
scala> modN(5, _)
<console>:9: error: missing parameter type for expanded function ((x$1) => modN(5, x$1)) 
```

而该信息可用于使用多参数列表表示法编写的函数：

```
scala> modNCurried(5) _
res3: Int => Boolean = <function1> 
```

[这个答案](https://stackoverflow.com/q/8063325/124257)显示了这如何非常有用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-14T14:25:15.663

柯里化与元组有关：*将一个接受元组参数的函数转换为接受 n 个单独参数的函数，反之亦然*。记住这一点是区分 curry 与部分应用程序的关键，即使在不完全支持 curry 的语言中也是如此。

```
curry :: ((a, b) -> c) -> a -> b -> c 
   -- curry converts a function that takes all args in a tuple
   -- into one that takes separate arguments

uncurry :: (a -> b -> c) -> (a, b) -> c
   -- uncurry converts a function of separate args into a function on pairs. 
```

部分应用是将*函数应用于某些参数的能力，为剩余的参数产生一个新函数*。

如果您只是认为柯里化是与元组有关的转换，那么很容易记住。

在默认柯里化的语言（例如 Haskell）中，区别很明显——您必须实际做一些事情才能在元组中传递参数。但是大多数其他语言，包括 Scala，默认情况下都是非咖喱的——所有的参数都作为元组传递，所以 curry/uncurry 的用处要小得多，也不那么明显。人们甚至最终认为部分应用和柯里化是一回事——只是因为它们不能轻易地表示柯里化函数！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-14T20:49:00.997

多变量函数：

```
def modN(n: Int, x: Int) = ((x % n) == 0) 
```

柯里化（或柯里化函数）：

```
def modNCurried(n: Int)(x: Int) = ((x % n) == 0) 
```

因此，与柯里化相比，它不是部分应用的功能。这是多变量函数。与部分应用函数相媲美的是柯里化函数的调用结果，它是一个与部分应用函数具有相同参数列表的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T18:00:06.343

只是为了澄清最后一点

> 另外：正如@a​​sflierl 正确指出的那样，Scala 在部分应用“正常”函数时似乎无法推断类型：

如果所有参数都是通配符，Scala 可以推断类型，但在其中一些被指定而一些没有被指定时则不能。

```
scala> modN(_,_)
res38: (Int, Int) => Boolean = <function2>

scala> modN(1,_)
<console>:13: error: missing parameter type for expanded function ((x$1) => modN(1, x$1))
       modN(1,_)
              ^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-01T14:02:27.200

迄今为止我能找到的最佳解释：[https ://dzone.com/articles/difference-between-currying-amp-partially-applied](https://dzone.com/articles/difference-between-currying-amp-partially-applied)

> **Currying：**将具有多个参数的函数分解为一系列单参数函数。请注意，Scala 允许将一个函数作为参数传递给另一个函数。
> 
> **函数的部分应用：**传递给函数的参数少于其声明中的参数。当您为函数提供的参数较少时，Scala 不会抛出异常，它只是应用它们并返回一个新函数，其中包含需要传递的其余参数。

# emacs - Emacs：如何在自动填充模式下启用悬挂缩进？

> ID：14309502
> 
> 赞同：0
> 
> 时间：2013-01-13T23:32:56.260
> 
> 标签：emacs, indentation

在自动填充模式下，我希望 emacs 自动填充带有悬挂缩进的段落，如下所示：

```
This is an example of hanging indented
    paragraph. The first line is indented
    less than the following lines in a
    paragraph.

Another paragraph starts from here, and
    lines are broken. 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:26:00.077

只需手动缩进第二行。然后当你点击`M-q`整个段落时，就会按照你想要的方式缩进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:27:51.320

您可以通过将以下行放入 .emacs 文件来自动实现您想要的效果：

```
(setq adaptive-fill-function '(lambda () "    ")) 
```

行尾的字符串是悬挂缩进的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T17:49:07.737

您可以使用`M-x set-fill-prefix`默认绑定到`C-x .`（即 Cx 之后的句点或句号）以交互方式执行此操作。

手动，*仅一次*，缩进单个段落的第二行，当您的光标（点）位于该位置时，按`C-x .`。从现在开始，所有自动填充都会相应地缩进第一行之后的任何内容。

为了重置行为，将光标移动到行首并`C-x .`再次调用。

作为奖励，您不限于将此填充前缀限制为空格。例如，您可以包含注释符号或垂直线或您的 $PS1。

您可能还对`M-x auto-fill-mode`哪些切换*自动*换行和对齐方式感兴趣。这将使您不必手动选择区域和键入`M-q`。

如果您真的想花哨，您可以为此编写自己的自定义函数，并将变量设置`normal-auto-fill-function`为指向您的函数。

# android - TableLayout中的Android ViewSwitcher单元格神奇地移动和隐藏

> ID：14309504
> 
> 赞同：2
> 
> 时间：2013-01-13T23:33:16.190
> 
> 标签：android, android-layout, android-tablelayout, viewswitcher

我有一个 ViewSwitcher 布局，它用作 TableLayout 中的一个单元格。

ViewSwitcher 包含两个视图，我在第一个孩子上实现了 OnClickListener 以便在单击时切换视图。

问题是，当单击 TableRow 的一个单元格时，视图会切换，但同一行上的所有其他单元格都会神奇地调整大小。

*   示例 1：

视图显示：

![没有动作画面](../Images/b9d20eb276aa38394e8ab9c325fb0bc4.png)

当我单击左侧单元格时，它给出：

![选择左侧单元格](../Images/5bc69c0d3d54d813779ef61bfb3c278f.png)

当我最终单击正确的单元格时，它会给出：

![选择正确的单元格](../Images/eb3edaac5f44b2f1db087485095a3eb5.png)

*   示例 2：

视图显示：

![没有动作画面](../Images/b9d20eb276aa38394e8ab9c325fb0bc4.png)

当我单击正确的单元格时，它会给出：

![选择正确的单元格](../Images/c11c85718b4de14f903cc6b456864ae5.png)

当我最终单击左侧单元格时，它给出：

![选择左侧单元格](../Images/eb3edaac5f44b2f1db087485095a3eb5.png)

我的屏幕截图质量不是很高，但可以看到未被点击的单元格被截断，就好像它在父视图下从几个像素向下移动一样。

证明是底部没有显示绿色边框。

我在这里截取了层次结构查看器的屏幕截图，例如第 1 步第 2 步：

![在此处输入图像描述](../Images/9d05ed87ecf2d137ef71168f19f8f56c.png)

*   背景上带有细红色边框的大矩形是表格行。
*   左边有白色边框的矩形是被点击的单元格（ViewSwitcher）。
*   带有强烈红色边框的红色矩形是混乱的单元格（ViewSwitcher）。

因此，您可以看到它已被移动到其原始位置下方几个像素，这在表格行内的顶部形成了一个空白区域，并且单元格的底部不可见。

我真的不知道发生了什么，所以如果你有一个想法或者你想尝试，这里是代码：

活动：

```
package my.app;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.ViewSwitcher;

public class SampleActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        LayoutInflater mInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        TableLayout table = (TableLayout) mInflater.inflate(R.layout.content, null);
        TableRow row = new TableRow(this);

        ViewSwitcher cell1 = (ViewSwitcher) mInflater.inflate(R.layout.cell, null);
        cell1.findViewById(R.id.cell_view).setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                ((ViewSwitcher) v.getParent()).showNext();
            }
        });
        row.addView(cell1);

        ViewSwitcher cell2 = (ViewSwitcher) mInflater.inflate(R.layout.cell, null);
        cell2.findViewById(R.id.cell_view).setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                ((ViewSwitcher) v.getParent()).showNext();
            }
        });
        row.addView(cell2);

        table.addView(row);
        setContentView(table);
    }
} 
```

布局内容.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</TableLayout> 
```

布局cell.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ViewSwitcher xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/cell"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
android:background="@drawable/cellborder"
android:padding="1px"
    >
    <TextView
        android:id="@+id/cell_view"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@drawable/select"
        android:text="TextView" />
    <EditText
        android:id="@+id/cell_edit"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:hint="EditText" />
</ViewSwitcher> 
```

如果你还想要颜色，还有drawables：

边框.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape= "rectangle"
    >
    <solid android:color="#FFFFFFFF"/>
    <stroke android:width="1dp"  android:color="@android:color/holo_green_light"/>
</shape> 
```

选择.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true" >
        <shape>
            <gradient
                android:startColor="@android:color/white"
                android:endColor="@android:color/white"/>
        </shape>
    </item>

    <item android:state_focused="true" android:state_pressed="true">
        <shape>
            <gradient
                android:startColor="@android:color/holo_blue_light"
                android:endColor="@android:color/holo_blue_dark"/>
        </shape>
    </item>

    <item android:state_pressed="true">
        <shape>
            <gradient
                android:startColor="@android:color/holo_green_light"
                android:endColor="@android:color/holo_green_dark"/>
        </shape>
    </item>

    <item>
        <shape>
            <gradient
                android:startColor="@android:color/holo_orange_light"
                android:endColor="@android:color/holo_orange_dark"/>
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:37:03.187

我用线性布局包围了你 cell.xml 中的每个组件，它解决了你的问题。试试看：

```
 <?xml version="1.0" encoding="utf-8"?>
   <ViewSwitcher xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/cell"
   android:layout_width="fill_parent"
   android:layout_height="50dp"
   android:background="@drawable/cellborder"
   android:padding="1px" >

   <LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" >

   <TextView
       android:id="@+id/cell_view"
       android:layout_width="fill_parent"
       android:layout_height="50dp"
       android:background="@drawable/select"
       android:text="TextView" />

   </LinearLayout>

   <LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" >

           <EditText
           android:id="@+id/cell_edit"
           android:layout_width="fill_parent"
           android:layout_height="50dp"
           android:hint="EditText" />
    </LinearLayout>

</ViewSwitcher> 
```

# css - CSS水平绝对位置和垂直相对位置

> ID：14309505
> 
> 赞同：6
> 
> 时间：2013-01-13T23:33:18.647
> 
> 标签：css, html

我有一个居中的 div。子 div（红色）应该与居中的 div 重叠。这完全没有问题。

现在我想要一个跟随重叠 div（绿色）的 div 正确垂直定位（在重叠之后）。那么有没有可能混合绝对定位和相对定位呢？

这是我的代码：

HTML：

```
<div id="container">
  blubb
    <div id="overlap">
        Content goes here.
    </div> 
    <div id="after">
        after.
    </div> 
</div> 
```

CSS：

```
#container{
    width:100px;
    height:400px;
    background:#ccc;
    margin:0 auto;
}

#overlap{
    position:absolute;
    left:0;
    right:0;
    height:100px;
    background:red;
    color:white;
}

#after{
    position:relative;
    height:100px;
    background:green;
    color:white;
} 
```

这里还有一个 jsfiddle 的链接：

[http://jsfiddle.net/XLfkn/](http://jsfiddle.net/XLfkn/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:12:18.130

不，在最新版本的 CSS 中没有这样的东西。绝对定位是全有或全无。你不能让某物绝对定位于它的水平位置，而不是它的垂直位置。

根据您的需求，有几种选择。一种方法是简单地将“之后”放在“重叠”中：

```
<div id="container">
  blubb
    <div id="overlap">
        Content goes here.
        <div id="after">
            after.
        </div> 
    </div> 
</div> 
```

如果您需要单独的边框和背景颜色，只需将“内容放在此处”包装起来。在另一个 div 中，像这样：

```
<div id="container">
  blubb
    <div id="overlap">
        <div id="before">
            Content goes here.
        </div>
        <div id="after">
            after.
        </div> 
    </div> 
</div> 
```

你绝对可以定位`#overlap`和拥有`#before`和`#after`要么`fixed`或`relative`。您需要从本质上拆分`#overlap`样式，以便保留一些样式，`#overlap`但将背景等内容移至`#before`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:20:33.720

由于在您的示例`overlap`中具有固定高度，您可以偏移`after`相同的数量：

```
#after{
    position:relative;
    height:100px;
    background:green;
    color:white;
    margin-top:100px;
} 
```

例如：http: [//jsfiddle.net/XLfkn/14/](http://jsfiddle.net/XLfkn/14/)

当然，如果`overlap`要具有动态高度，这是行不通的。

# ios - 无法使用 nil 模型读取帖子创建 NSPersistentStoreCoordinator，无法修复

> ID：14309509
> 
> 赞同：0
> 
> 时间：2013-01-13T23:33:27.923
> 
> 标签：ios, core-data, nspersistentstore

我不确定发生了什么，开始出现模型版本错误，在阅读了这里的一些选项后，我最终删除并再次创建了模型（很多痛苦）。但是，现在我收到“无法使用 nil 模型创建 NSPersistentStoreCoordinator”错误。

我希望在这里阅读大多数帖子（尝试了很多方法但没有奏效）。当我发现文件在哪里（iPhoneSimulator）时，我检查了应用程序的内容，并没有在其中找到任何 mom 或 momd 文件。所以我复制到捆绑包，确保它在编译资源中，重置模拟器，清理并再次加载，但没有找到它（以及优雅的应用程序崩溃）。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:58:48.067

不知道发生了什么，我一定是以某种方式损坏了数据库。我刚刚创建了一个新项目（同名，不同目录），再次创建了核心数据模型（您可以将实体从旧版本复制并粘贴到新版本，但请确保重新连接关系）。然后生成 nsmanagedobject 类。

然后我复制了所有其他文件、类等......之后它工作得很好。

# java - 按下回车键时文本字段中的 KeyListener 未触发

> ID：14309510
> 
> 赞同：6
> 
> 时间：2013-01-13T23:33:29.690
> 
> 标签：java, swing, awt, listener, keylistener

我正在尝试制作一个可以在java中将华氏温度转换为摄氏度的程序。在程序中，我有 2 个标签和 1 个文本字段用于输入。我想在用户输入温度并按下时转换温度`Enter`。为此，我在我的文本字段中添加了一个关键侦听器，但它不起作用。当我按下`Enter`听众时，根本不会开火。

这是我的代码。

```
public class TempConv extends JFrame{

private JLabel info;
private JLabel result;
private JTextField input;
private String outcome;

public TempConv(){

    super("Temperature Converter");
    setLayout(new BorderLayout());

    info = new JLabel("Enter Fahrenheit Temperature");
    add(info, BorderLayout.NORTH);

    input = new JTextField(12);
    add(input, BorderLayout.CENTER);

    result  = new JLabel("Temperature in Celcius is: " + outcome);
    add(result, BorderLayout.SOUTH);

    input.addKeyListener(
            new KeyListener(){

                public void keyPressed(KeyEvent e){

                    if(e.getKeyChar() == KeyEvent.VK_ENTER){

                        outcome = input.getText();
                    }       
                }
            }
        );
}

public static void main(String[] args) {

    TempConv ftc = new TempConv();
    ftc.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ftc.setLocationRelativeTo(null);
    ftc.setSize(370, 100);
    ftc.setVisible(true);

}

} 
```

**编辑：**它适用于 ActionListener 但我需要使用匿名类。如果没有匿名类，它会以`Enter`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:36:30.247

尝试使用 e.getKeyCode() 而不是 e.getKeyChar()。常量 KeyEvent.VK_ENTER 是一个 int，而不是一个 char。

换句话说：

```
if(e.getKeyCode() == KeyEvent.VK_ENTER){
      outcome = input.getText();
} 
```

代替

```
if(e.getKeyChar() == KeyEvent.VK_ENTER){
      outcome = input.getText();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T06:18:56.203

首先，您需要实现 KeyListener 中的所有方法。你还没有实现 keyTyped 和 keyReleased。另一件事是您应该检查键代码而不是键字符，因为“Enter”字符不可见，因此最好检查键代码是否等于 KeyEvent.VK_ENTER。最后一件事是当您按 Enter 时更新结果字符串变量，但您没有在任何地方显示它，因此您需要在结果 JLabel 上设置文本。您还忘记了进行转换。我的解释可能令人困惑，但以下是代码：

```
import java.awt.BorderLayout;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class TempConv extends JFrame{

private JLabel info;
private JLabel result;
private JTextField input;
private String outcome;

public TempConv(){

    super("Temperature Converter");
    setLayout(new BorderLayout());

    info = new JLabel("Enter Fahrenheit Temperature");
    add(info, BorderLayout.NORTH);

    input = new JTextField(12);
    add(input, BorderLayout.CENTER);

    result  = new JLabel("Temperature in Celcius is: " + outcome);
    add(result, BorderLayout.SOUTH);

    input.addKeyListener(
            new KeyListener(){

                @Override
                public void keyPressed(KeyEvent e){

                    if(e.getKeyCode() == KeyEvent.VK_ENTER){
                        outcome = input.getText();
                        double celsius = (((Double.valueOf(outcome)) - 32) * 5 / 9 );
                        result.setText("Temperature in Celcius is: " + celsius);
                    }       
                }

                @Override
                public void keyTyped(KeyEvent e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void keyReleased(KeyEvent e) {
                    // TODO Auto-generated method stub

                }
            }
        );
}

public static void main(String[] args) {

    TempConv ftc = new TempConv();
    ftc.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ftc.setLocationRelativeTo(null);
    ftc.setSize(370, 100);
    ftc.setVisible(true);

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T12:21:17.283

迟到的答案，但我尝试使用问题中的代码并且 KeyPressed 确实触发了，但是因为 JLabel 没有更新，你假设 KeyEvent 没有被触发。

刚过

```
outcome = input.getText(); 
```

添加

```
result.setText("Temperature in Celcius is: " + outcome); 
```

所以标签会自行更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T21:19:18.880

按钮不需要 a `KeyListener`（在大多数情况下不应该使用它们），它们使用 an`ActionListener`来响应所有激活事件，包括`Enter`鼠标点击和键盘快捷键，这是一个更加简化的 API。

有关详细信息，请参阅[如何使用按钮、复选框和单选按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)、[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)以及[如何使用动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

您还可以将按钮设置为“默认”按钮，该按钮可以在未聚焦时激活（只要当前聚焦的组件不使用/消耗该`Enter`键）

有关更多详细信息，请参阅[`JRootPane#setDefaultButton`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JRootPane.html#setDefaultButton(javax.swing.JButton))以及[如何使用根窗格](https://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-11T23:29:06.867

这应该有效

```
if (e.getKeyChar() == 10) {
    System.out.println("enter");
 } 
```

输入 ASCII 码为 10 而 KeyEvent.VK_ENTER 为回车返回 13

# c# - 您可以在设置类中返回存储的字符串吗？

> ID：14309511
> 
> 赞同：0
> 
> 时间：2013-01-13T23:33:36.037
> 
> 标签：c#, string, class

```
public object ReturnSqlScript(string token)
{
    object script = "";
    Type settingsType = typeof(Settings);
    foreach (var propertyInfo in settingsType.GetProperties())
       {
           try
                {
                    if (propertyInfo.Name.Contains(token))
                    {
                        script = propertyInfo.GetValue(propertyInfo, null);
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
      }
            return script;
} 
```

我有一堆存储在设置中的 SQL 脚本，此方法允许我通过将其与令牌（例如`SqlScript2`）匹配来获取它们的名称，但是当我尝试获取存储在`SqlScript2`其中的字符串值时，将返回“System.String SqlScript 2" 而不是存储在其中的值。我可以调整`GetValue`方法以返回我存储的字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:49:09.407

查找文档，但您尝试过吗？

```
var script = Settings.Default[token].ToString(); 
```

我已经在[这里](https://stackoverflow.com/a/13868951/4068)回答过了。

# python - 所有可能的数值表达式

> ID：14309515
> 
> 赞同：0
> 
> 时间：2013-01-13T23:34:29.627
> 
> 标签：python, combinatorics, catalan

一个完全没用的问题：我买了一个数字游戏，它是由两个黑色骰子加上 5 个彩色骰子组成的。两个黑色的组成一个 2 位数字，范围从 11 到 66，另外 5 个是您可以使用的数字，将它们以所有可能的数字表达式与任务结合以获得目标数字。

比如黑40+2：目标42

彩色 5 3 6 2 4，可以通过 5 3 + 6 * 4 2 + - 获得目标（使用 RPN，因为它避免了括号）。

现在我想用我的袖珍电脑在我们玩游戏的时候找到最佳答案。

我必须说我还没有真正考虑过解决方案，我只是寻找关于寻找参数排列的部分，但是如何从中生成可能的表达式？我会使用 RPN 并枚举所有可能的表达式“形状”，然后用 +-*/ 填充空格。

我不认识枚举表达式形状的问题。

输出将是这样的： .....xxxx ....x.xxx ...x..xxx ..x...xxx ....xx.xx ...xxxx ..x..x .xx ...xx..xx ..xx.xx ....xxx.x ...x.xx.x ..x..xx.x ...xx.xx ..xxxx

像： ..xx...xx ...xxx..x ..x.xx..x ..x.xx..x 是无效的，因为第二个或第三个运算符会找到一个操作数。

我可以使用硬编码列表，但它看起来真的很难看！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T00:20:59.303

我认为您正在寻找的是大小为 5 的完整二叉树的枚举。（此类对象的计数是第五个[加泰罗尼亚数字](http://en.wikipedia.org/wiki/Catalan_number)，即 14。）。枚举是直截了当的，基于加泰罗尼亚数的标准递归：
![http://upload.wikimedia.org/math/2/f/1/2f17435a71394ce667ab694b27341560.png](../Images/ac58e22d031b77af205643e0c0769dde.png)
对于每个 (i, 5-i)，生成所有带`i`叶子的树和所有带`5-i`叶子的树，以及每个集合中一棵树的每个组合，通过创建一个根节点来构造一棵新树，该根节点的左孩子来自第一个集合，右孩子来自第二个集合。如果不想使用树，直接使用 RPN：

```
# Produces all possible RPN layouts with n values and n-1 binary operators,
# representing values as '#' and operators as '+'
def RPN(n):
  if n == 1:
    yield '#'
  for i in range(1,n):
    for left in RPN(i):
      for right in RPN(n - i):
        yield left + right + '+' 
```

当然，也有一元运算符。如果你允许这些，它会变得更加复杂。

请注意，您可以直接修改上述内容以直接插入参数；不是将 n 划分为 (i, ni)，而是将 n 值集合的所有分区划分为两个非空子集。（否则，您可以找到一组数字的所有排列，并将它们插入生成的 RPN 表达式。）

然后“所有”您需要做的是插入所有可能的运算符序列（如果您只允许 +、-、* 和 / 那么您有 4 ⁴ = 256 种可能性）。

因此，如果这五个数字不同，您将得到 14 * 5！* 4 ⁴ = 430080 个要测试的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:49:07.603

枚举不同数字块数量的问题是您可以应用于集合的分区数[http://en.wikipedia.org/wiki/Partition_of_a_set](http://en.wikipedia.org/wiki/Partition_of_a_set)

# android - ExifInterface 和 VM 中止导致奇怪的致命崩溃

> ID：14309521
> 
> 赞同：3
> 
> 时间：2013-01-13T23:35:23.660
> 
> 标签：android, exif

ExifInterface 发生了奇怪的致命崩溃。导致崩溃的行是这样的，非常简单（Foto.java:341）：

```
ExifInterface exif = new ExifInterface(filename); 
```

我只得到一些图片的崩溃。更奇怪的是，如果我看到一张普通图片的exif，关闭程序，再打开程序看到有问题的图片，我就得到了上一张图片的exif。相当的诡计。

知道是什么原因造成的吗？轨迹轨迹如下。

```
01-13 21:23:42.148: W/dalvikvm(10868): JNI WARNING: received null jstring
01-13 21:23:42.148: W/dalvikvm(10868):              in Landroid/media/ExifInterface;.getAttributesNative:(Ljava/lang/String;)Ljava/lang/String; (GetStringUTFChars)
01-13 21:23:42.148: I/dalvikvm(10868): "main" prio=5 tid=1 NATIVE
01-13 21:23:42.148: I/dalvikvm(10868):   | group="main" sCount=0 dsCount=0 obj=0x40c6e460 self=0x12938
01-13 21:23:42.148: I/dalvikvm(10868):   | sysTid=10868 nice=0 sched=0/0 cgrp=default handle=1075021096
01-13 21:23:42.148: I/dalvikvm(10868):   | schedstat=( 618641072 82163138 362 ) utm=57 stm=4 core=1
01-13 21:23:42.148: I/dalvikvm(10868):   at android.media.ExifInterface.getAttributesNative(Native Method)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.media.ExifInterface.loadAttributes(ExifInterface.java:204)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.media.ExifInterface.<init>(ExifInterface.java:121)
01-13 21:23:42.148: I/dalvikvm(10868):   at com.floritfoto.apps.xvf.Foto.printexif(Foto.java:341)
01-13 21:23:42.148: I/dalvikvm(10868):   at com.floritfoto.apps.xvf.Foto$3.onLongClick(Foto.java:449)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.view.View.performLongClick(View.java:3656)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.view.View$CheckForLongPress.run(View.java:14270)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.os.Handler.handleCallback(Handler.java:605)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.os.Handler.dispatchMessage(Handler.java:92)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.os.Looper.loop(Looper.java:137)
01-13 21:23:42.148: I/dalvikvm(10868):   at android.app.ActivityThread.main(ActivityThread.java:4507)
01-13 21:23:42.148: I/dalvikvm(10868):   at java.lang.reflect.Method.invokeNative(Native Method)
01-13 21:23:42.148: I/dalvikvm(10868):   at java.lang.reflect.Method.invoke(Method.java:511)
01-13 21:23:42.148: I/dalvikvm(10868):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-13 21:23:42.148: I/dalvikvm(10868):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-13 21:23:42.148: I/dalvikvm(10868):   at dalvik.system.NativeStart.main(Native Method)
01-13 21:23:42.148: E/dalvikvm(10868): VM aborting
01-13 21:23:42.148: A/libc(10868): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:03:30.107

new ExifInterface(null) 将导致 SIGSEGV。

这里的答案相同：[Android Bitmap Fatal signal 11 (SIGSEGV)](https://stackoverflow.com/questions/14221136/android-bitmap-fatal-signal-11-sigsegv)

# c++ - 模板和 is_same() 不起作用？

> ID：14309525
> 
> 赞同：1
> 
> 时间：2013-01-13T23:35:47.360
> 
> 标签：c++, templates

```
if (std::is_same<T, float>::value)
    {
        float a;
        somefunc_float(x,len,&a);
    } 
```

上面的代码来自一个模板，它接受一个指针 x，它可以是一些原始数据类型的指针（例如 x 是`double *`, `float *`or `int *`），并且`somefunc_float`来自一个库，只能接受一个特定的数据类型`x`（`float *`在上面的例子中)，编译器总是给我错误，告诉我输入数据类型（x）不正确，好像表达式`std::is_same<T, float>::value`根本不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:43:49.310

问题的描述并不完全清楚，但我想我理解你想要做什么：你在模板函数中包含一个代码块，测试可以在编译时执行，并期望编译器会丢弃该块而不编译它。

模板不能那样工作。当一个模板被实例化时，整个模板都会被检查和编译，并且代码必须是正确的，然后优化器才能丢弃代码块（在这种情况下它可能会丢弃）。

获得该行为的常用方法是提供使用不同类型调用的模板（或非模板重载）的多个实现。编译器将在调用位置分派给适当的实现，然后忽略其余部分。

* * *

在未来版本的 C++（可能是 C++17）中，有一些功能提案`static if`可以支持您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-09T08:48:20.970

现在我们有了 C++17，您的方法变得有效。但是，需要进行小的语法更正：

```
// is_same_v is an alias for is_same<...>::value
if constexpr (std::is_same_v<T, float>) {  
    float a;
    somefunc_float(x,len,&a);
} 
```

有关更多信息，请参阅[if 的文档。](https://en.cppreference.com/w/cpp/language/if)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:46:04.693

类型是*静态*确定的，所有被实例化的模板代码都必须编译，即有意义。`if`即使条件为假，语句的内容也必须有意义。

尝试这样的事情：

```
template <typename T> execute_if_float(T) { }

execute_if_float(float x) { somefunc_float(x); }

template <typename T> void myCode(T x)
{
    // ...

    execute_if_float(x);

    // ...
} 
```

# java - java中可能抛出异常的方法的try/catch块

> ID：14309531
> 
> 赞同：1
> 
> 时间：2013-01-13T23:36:41.613
> 
> 标签：java, exception

什么时候将一个方法放在一个`try/catch`块中而不是关键的块中？

例如，如果我们有`Pattern.compile()`方法并且我们知道它可以抛出异常`IllegalArgumentException`并且`PatternSyntaxException`. 我们应该把这个方法放在一个`try/catch`块中吗？我知道`try/catch`当我们知道方法会失败时应该使用 a 。但是，在这种情况下`try/catch block`应该使用 a ，对吗？我们如何决定是否使用 a `try/catch`，因为每个方法如果失败都会抛出异常？有时编译器会提示我们对某些方法使用 a `try/catch`，但对于某些方法，我们必须自己决定。有哪些因素可以帮助我们做出决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:46:17.697

你把`try catch`你知道如何处理异常的地方。

例如，您正在从控制台读取数据并以与 I/O 相同的方法执行一些算术运算。在这种情况下，您的方法应该控制异常，通知用户错误，并要求更多数据（或更正的相同数据）。

在另一种情况下，您编写了一个执行相同操作的方法。有一次，你的一种表达被另一种分开。在除以 0 的情况下该怎么办？最有可能的是，让异常传播回来。调用方法（在某种程度上）将知道失败是否意味着程序崩溃，某个操作无法执行但其他操作可能执行，或者必须忽略数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:52:00.580

让我简单解释一下。

你不需要一直使用 try 和 catch 。当您有任何可能因错误而终止程序的进程时，请使用 try 和 catch。例如文件读写。除此之外，您可以使用`ifs`

# javascript - 无法通过 javascript 和 XUL 访问 flash 功能

> ID：14309535
> 
> 赞同：0
> 
> 时间：2013-01-13T23:37:22.057
> 
> 标签：javascript, flash, embed, xul, typeerror

我目前正在尝试制作一个 Firefox 扩展，但我无法弄清楚我的错误是什么。

实际上，我在我的 xul 代码中嵌入了一个 flash 应用程序，以便访问 javascript 代码中的一些 flash 功能。

认为这种东西适用于基本的 html 页面，当我尝试使用我的 xul 代码中的 flash 函数时，我遇到了“TypeError：[flash function] is not a function”错误。

我不知何故是 xul 编码的初学者：有人能指出我的错误吗，我将不胜感激。

这是我的 xul 文件：

```
<overlay id="extension-overlay" xmlns:html="http://www.w3.org/1999/xhtml" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
    <script src="overlay.js"/>
    <window id="main-window">
        <toolbaritem id="extension-fontlist_container" persist="width">
            <html:embed hidden="true" wmode="transparent" id="extension-fontlist" height="1px" width="1px" menu="false" src="FontList.swf" allowscriptaccess='always' align='center' flashvars="" type="application/x-shockwave-flash" />
        </toolbaritem>

        <statusbar id="status-bar">
            <statusbarpanel id="my-panel" label="&gathering;" onload="Extension.onMenuItemCommand(event);"/>
        </statusbar>
    </window>
</overlay> 
```

这是我的javascript代码：

```
var Extension = {
    onMenuItemCommand: function() {
        var flashObj = document.getElementById("extension-fontlist");
        var fontArr=flashObj.getDeviceFonts();
        var font="";
        for (var key in fontArr){
            var fontName = fontArr[key];
            fontName = fontName.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
            font+=fontName+"; ";
        }
        // ...
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:17:28.920

我想你必须打开 flash 对象

```
var flashObj = XPCNativeWrapper.unwrap(document.getElementById("extension-fontlist")); 
```

# jquery - 如果选中复选框，则从文本字段中删除文本

> ID：14309538
> 
> 赞同：0
> 
> 时间：2013-01-13T23:37:43.063
> 
> 标签：jquery

我有 2 个单选按钮 (A,B) 作为运输选项和一个用于输入电话号码的输入文本字段。选择 A 后，我需要在文本区域内显示自定义帮助文本（“需要电话”）。如果选择了按钮 B - 应该没有帮助文本。

如果选择 A，则应在用户单击文本字段内部并键入数字后删除帮助文本。如果选择了任何选项并填充了文本字段。它应该保持这种状态。

我的代码有效，但如果用户选择 A 选项并在 B 选项之后不输入任何内容，则不会删除帮助文本。

```
$(document).ready(function () {
  $('input#edit-quote-option-flatrate-3---0').change(function () {
    if ($('input#edit-quote-option-flatrate-3---0').is(":checked")) {

  $('.default').each(function () {
    var defaultVal = ('tel');
    $(this).focus(function () {
      if ($(this).val() == defaultVal) {
        $(this).removeClass('active').val('');
      }
    })
      .blur(function () {
      if ($(this).val() == '') {
        $(this).addClass('active').val(defaultVal);
      }
    })
      .blur().addClass('active');
  });
    } else {

        $('.default').removeClass('active').val('');

    }
  });
}); 
```

完整代码在这里[http://jsfiddle.net/NKcFs/2/](http://jsfiddle.net/NKcFs/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:48:19.350

你有没有尝试过：

```
$('.a').click(function () {
    var t = $('textarea');
    if (!t.val()) t.val('phone required');
    t.focus(function () {
       if (this.value == 'phone required') this.value = '';
    });
    t.blur(function () {
       if (!this.value) this.value = 'phone required';
    });
    $('.b').removeAttr('checked');
});
$('.b').click(function () {
    var t = $('textarea');
    if (!t.val() || t.val() == 'phone required') t.val('');
    $('.a').removeAttr('checked');
}); 
```

[在这里](http://jsfiddle.net/6ULG5/5)工作 jsFiddle 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:50:31.583

尝试为将值设置为空白的第二个选项添加更改处理程序...这就是您想要做的，对吧？

```
 $('#edit-quote-option-flatrate-3---1').change(function(){  
    $('.default').each(function () {
      if($(this).val() == 'tel'){ // if the user didn't change it, clear the field
          $(this).val('');
      }
    });
  }); 
```

在这里摆弄：http: [//jsfiddle.net/gcmDu/1/](http://jsfiddle.net/gcmDu/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:52:05.683

取消选择特定单选按钮时不会触发更改事件。完成这项工作的最简单方法是将更改事件的选择器更改为：

```
$('input[name="quote-option"]').change(function () { ... }); 
```

这会将更改事件添加到共享名称“quote-option”的所有单选按钮，因此也会在选择 B 时触发。

此外，您需要在选择 A 选项时取消绑定您绑定的事件。因此，当您选择选项 B 时，请执行以下操作：

```
$('.default').unbind('blur').unbind('focus'); 
```

[在这里](http://jsfiddle.net/NKcFs/11/)更新了 jsFiddle 。

# android - AnimationDrawable 创建一个无限循环

> ID：14309551
> 
> 赞同：0
> 
> 时间：2013-01-13T23:39:26.543
> 
> 标签：android, infinite-loop, animationdrawable

![在此处输入图像描述](../Images/90229901beccb4115a96446ac79a4ab7.png)![在此处输入图像描述](../Images/a1d6b73e4cd70a927d5183199fd2d42d.png)

我正在使用 AnimationDrawable 创建逐帧效果，我想在图像更改时，圆点一起更改，我的代码创建一个无限循环，如果我下车，`While(mframeAnimation.isRunning())`那么它只检查一次值并停止。

**问题：**

那么我应该怎么做才能创建一个无限检查，一个监听器或类似的东西来改变图像时的圆圈？

```
 private void selectDot(int arg2) {
            // TODO Auto-generated method stub
            for(int i=0;i<imageView.length;i++){
              if(i==arg2) imageView[i].setImageResource(R.drawable.black_circle);
              else imageView[i].setImageResource(R.drawable.gray_circle);
             }
        }

        class Starter implements Runnable {
            public void run() {
                mframeAnimation.start();
                while(mframeAnimation.isRunning()){
                    // Get the frame of the animation
                    Drawable currentFrame, checkFrame;
                    currentFrame = mframeAnimation.getCurrent();

                    int frameNumber;
                    // Checks the position of the frame
                    for (int i = 0; i < mframeAnimation.getNumberOfFrames(); i++) {
                        checkFrame = mframeAnimation.getFrame(i);
                        if (checkFrame == currentFrame) {
                            frameNumber = i;
    //                      Toast.makeText(getActivity(), Integer.toString(frameNumber), Toast.LENGTH_SHORT).show();
                            selectDot(frameNumber);
                            break;
                        }
                    }
                    }
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:18:24.117

[这](http://kevinrohling.wordpress.com/2011/01/25/using-a-slide-transition-with-viewflipper/)是我应用的 ViewFlipper 以获得我的轮播效果，我稍微调整了动画以使其完全符合我想要的效果。所以是的 ViewFlipper 是你的答案。

# php - 始终在服务器上加载 php 文件，而无需手动调用它

> ID：14309553
> 
> 赞同：0
> 
> 时间：2013-01-13T23:39:55.027
> 
> 标签：php, apache, include, server-side-includes

任何人都知道我如何在服务器上自动加载 PHP 文件。我不知道这是否是我可以在 .htaccess 中做的事情或如何做。

基本上，我有一个 php 文件，我希望每次都加载它，而无需实际从任何特定文件调用它或将其包含在特定文件中。

我有一个 autoload.php 文件，其中包含每个页面需要的一些功能和信息

因此，我不想在每个页面上都执行 require 或 include ，而是希望每次有人访问我页面上的站点时自动加载此文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:42:15.053

如果您没有任何其他类型的框架逻辑来在每个请求上通过同一文件路由流量，您可以使用 htaccess 和 auto_prepend 在每次访问时包含一个 php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:00:24.807

为什么不在 PHP 中使用 include_path 指令？

# jquery - JS/JQuery：如何以循环方式多次切换类？

> ID：14309556
> 
> 赞同：0
> 
> 时间：2013-01-13T23:40:35.250
> 
> 标签：jquery, css, class, if-statement

如何以循环的方式多次切换项目的类别？我尝试了以下1/3成功的各种组合。第一次切换点击有效（news->part），第二次点击无效（part->easy），第三次无效（easy->news）。提前谢谢。

**HTML**

```
<td class="news">Click on me!<td>
<td class="news">Click on me too!<td> 
```

***CSS***

```
.news { border: 3px solid red ; }
.part { border: 3px solid orange ; }
.easy { border: 3px solid green ; } 
```

**查询：**

```
$("td").click(function () {
  if (        $("td").hasClass('news')) {
    $(this).removeClass("news").addClass('part');   /* click 1: works*/
  } else if ( $("td").hasClass('part')) {
    $(this).removeClass('part'  ).addClass('easy'); /* click 2: doesn't*/
  } else {
    $(this).removeClass('easy'  ).addClass('news'); /* click 2: doesn't*/
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:44:31.223

**Javascript**

```
$("td").click(function () {
  if ($(this).hasClass('news')) {
    $(this).removeClass("news").addClass('part');   /* click 1: works*/
  } else if ( $(this).hasClass('part')) {
    $(this).removeClass('part'  ).addClass('easy'); /* click 2: doesn't*/
  } else {
    $(this).removeClass('easy'  ).addClass('news'); /* click 2: doesn't*/
  }
}); 
```

示例：http: [//jsfiddle.net/sRvcK/](http://jsfiddle.net/sRvcK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:43:23.123

在 if 块中，您应该使用`this`as well 而不是`$("td").hasClass('news')`，如下所示

```
if ($(this).hasClass('news')) {
   //Do your thing...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:46:26.637

```
$("td").click(function () {

  var $this = $(this);

  if ($this.hasClass('news')) {

    $this.removeClass('news').addClass('part');

  } else if ($this.hasClass('part')) {

    $this.removeClass('part').addClass('easy');

  } else {

    $this.removeClass('easy').addClass('news');

  }
}); 
```

# orchardcms - 果园分类术语 Autoroute 令牌

> ID：14309558
> 
> 赞同：2
> 
> 时间：2013-01-13T23:41:22.480
> 
> 标签：orchardcms, orchardcms-1.6

我正在尝试为 Orchard 1.6 中的博客文章创建自定义 URL。我想将分类部分术语作为 URL 的一部分。

```
http://my-site.com/my-blog/section-term/my-post 
```

使用分类法，我可以轻松地列出博客文章并将其分成各自的部分，而不会有任何麻烦。

我尝试使用的自动路由规则是：

```
{Content.Container.Path}/{Content.Fields.BlogPost.Section}/{Content.Slug} 
```

第一部分`{Content.Contianer.Path}`不是那么重要，如果它更容易，我可以不做；但是`{Content.Fields.BlogPost.Section}`根本不会产生任何东西。

难道我做错了什么？或者这是我需要报告的错误？

谢谢，里斯。

**更新**

好吧，所以我看起来还不够努力，已经为这个提交了一个错误：http: [//orchardtaxonomies.codeplex.com/workitem/61](http://orchardtaxonomies.codeplex.com/workitem/61)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T01:43:08.347

这在变更集 2bd61b0ec84a 中尚未解决。

问题也未解决：Orchard Taxonomies Module commit e688a1b34b01 Mar 10, 2012（1.x 分支）

*   果园分类模块提交 2bedcd7ba4f3 2013 年 2 月 20 日（默认分支）
*   果园提交 71d81e849620 2013 年 7 月 9 日（1.x 分支）
*   果园提交 f65d032a9b0c 2013 年 4 月 30 日（默认分支）

我的测试是通过以下步骤进行的：

*   创建名为“test”的分类
*   使用字段名称“testfield”将分类字段“test”附加到内容类型“Page”
*   在“testfield”下选中“只允许选择一个术语”
*   在自动路由（在“页面”内容类型内）下选中“编辑内容时自动生成”
*   在发布选择了分类的页面之间尝试了自动路由模式中的所有以下标记：

    *   {Content.Fields.Page.testfield}/{Content.Slug}
    *   {Content.Fields.Page.testfield.Terms}/{Content.Slug}
    *   {Content.Fields.Page.testfield.Terms:0}/{Content.Slug}
    *   {Content.Fields.Page.test}/{Content.Slug}
    *   {Content.Fields.Page.test.Terms}/{Content.Slug}
    *   {Content.Fields.Page.test.Terms:0}/{Content.Slug}

[通过使用https://orchardtaxonomies.codeplex.com/workitem/61](https://orchardtaxonomies.codeplex.com/workitem/61)中的以下帖子，我设法让分类令牌在当前未发布的 1.7 版本中工作（我认为它也适用于 1.6）：

*   mrtn_t 写于 2 月 19 日上午 7:33
*   BrentCarter 于 4 月 30 日凌晨 4 点 24 分写道

澄清一下，当您添加分类标记时，请确保您使用分类的字段名称，而不是分类名称本身（除非分类名称和字段名称的名称相同，那么您就可以了）。

# c# - 用c#序列化，用Ruby反序列化，可以吗？

> ID：14309559
> 
> 赞同：-3
> 
> 时间：2013-01-13T23:41:31.687
> 
> 标签：c#, ruby, serialization, deserialization

有没有办法使用 C# 将对象序列化为文件，然后再从我使用 Ruby 语言构建的另一个应用程序中反序列化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:55:56.113

JSON。

这就是它的用途，我确信两种语言都可以读写。

编辑：我在两秒钟内发现了两件事让你开始：[Ruby JSON 库](http://flori.github.com/json/)和[JSON .NET](http://james.newtonking.com/projects/json-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:54:51.020

如果将它序列化为 XML，那么在 Ruby 中反序列化它应该没有问题。谷歌可以为您指出一个宝石来处理它。

如果您使用 IronRuby，它使用与 c# 相同的 .NET 程序集。如果是这样，那么这个过程应该（理论上）是透明的。

# vhdl - VHDL 字符集生成

> ID：14309560
> 
> 赞同：1
> 
> 时间：2013-01-13T23:41:32.797
> 
> 标签：vhdl, fpga, hdl

我需要从字符集中生成所有可能的组合。

```
"abcdefghijklmnopqstuvxyz" 
```

生成的模式应该像这样输出。

```
a
b
...
z
aa
ab
...
az
ba
... 
```

这将在长度为 8 的情况下完成。即`a=>zzzzzzzz`。我已经通过用 C 编写一个示例来解决这个问题，并为此使用了递归函数。我知道它写得又快又脏，但希望你能有所了解。

```
#include <stdio.h>
#include <string.h>

#define WIDTH 8
char *charset = "abcdefghijklmnopqrstuvxyz";

void charset_r(int width, int pos, char *s)
{
    char buf[WIDTH];
    char *p = charset;

    while(*p!='\0')
    {
        strcpy(buf, s);
        if(pos<width)
        {
            strncat(buf, p, 1);
            printf("%s\n", buf);
            charset_r(width, pos+1, buf);
        }
        p++;
    }
}

int main(void)
{
    int i;
    for(i=0;i<=WIDTH;i++)
        charset_r(i,0,"");
} 
```

我的问题是双重的：

1.  我应该在 VHDL 中使用递归吗？
2.  如果没有，我该如何解决这个问题？

更新：

因此，最终目标是合成代码并将值输出到时钟端口。据我了解，通过阅读评论递归可能是深度 2 之外的一个坏主意，因此最好以其他方式解决它，而不使用递归。

由于除了递归之外，我无法以任何其他方式思考这个问题（似乎无法弄清楚），任何指针或建议（甚至代码！）将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T15:00:07.927

您最好将其视为硬件问题而不是软件问题。您有八个状态变量——序列中的每个字符一个。如果您为每个字符使用 5 位计数器，那么您可以表示所有字符 [az]，加上一个空状态（可能为零）以知道何时不输出该字符。

然后，您需要某种状态机来按照一组简单的规则递增计数器：“始终递增计数器 0。如果计数器 0 为 26，则将其设置为 0 并递增计数器 1……等等”。这将推动你的内部状态。

然后创建一个输出进程，查看计数器并决定及时输出哪个字符（或者如果计数器没有增加到零以上，则根本不输出字符）。如果您将字符连续输出，此过程将花费不同的时间来执行，因此它可能会充当推进状态机的触发器。

这里没有代码，只是方法的概述。但是我认为，如果您按照这些思路考虑它，它将对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:00:30.817

您可以将每个字符组合视为以 26 为基数的数字（即序列中的字符数）。这样，每个数字都隐含地告诉你后面的字符串序列。您可以将数字转换为基数 26 并获取字符串。当然，您需要对每个长度的字符串重复此过程。我已经为您编写了一个简单的代码来演示这个想法。您可以使用可综合的语言子集在 VHDL 中实现它。

```
for( int i = 1 ; i<= 8 ; ++i )
{
    for( int j = 0 ; j < pow(26,i) ; ++j )
    {
           foo( j , i  );
    }
}

void foo( int num , int len)
{
    char digits[len+1];
    // convert num from base 10 to base 26 and fill digits array with proper values in range 0-25
    toBase26(num,digits,len);
    digits[len] = '\0';
    for( int i = 0 ; i < len ; ++i )
    {
              digits[i] = digits[i] + 97 ; //  97 == 'a'
    }
    // do proper thing with your sequence

} 
```

# php - PHP 在 Dreamweaver 中工作，但无法在浏览器上运行

> ID：14309561
> 
> 赞同：0
> 
> 时间：2013-01-13T23:41:36.430
> 
> 标签：php, windows, iis, dreamweaver

我的 PHP 代码在 Dreamweaver 中运行并且还连接到数据库，但我的问题是当我在本地浏览器上运行相同的文件时，它想要下载文件并且 PHP 代码没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:44:05.560

PHP 只能在服务器端处理。您将需要设置一个 Web 服务器来运行该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:44:22.377

PHP 是一种服务器端语言。它必须在与您在 Dreamweaver 中使用的目录相同的目录中运行。如果 PHP 文件在另一个目录中，您不能复制它并期望它能够工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:44:43.557

您是否通过文件系统访问文件？

即地址栏看起来像`C:\website\index.php`

如果不是这样，这可能是您设置网络服务器的方式（如果有的话）的问题。请发布有关服务器的更多信息，我将更新此答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:48:22.620

PHP 是服务器端脚本，查看此脚本的方法是在 DreamWeaver 上编写脚本，然后使用可在 XAMPP 中找到的 Apache/PHP 堆栈在本地查看新创建的脚本

[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

安装它，然后导航到

> 本地主机或 127.0.0.1

通过您的网络浏览器

Web 目录将是：

> C:\xampp\htdocs

如果您在安装过程中没有配置其他内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T23:49:04.987

**尝试使用地址http://localhost/youphpfilename.php**在“本地浏览器”中加载

# mysql - 无论列名如何，都选择主键？

> ID：14309563
> 
> 赞同：3
> 
> 时间：2013-01-13T23:42:00.297
> 
> 标签：mysql

我只是想知道是否有任何方法可以使用`WHERE`子句中的主键选择一行，而不必知道键列的名称。

我建议的 PHP 函数如下：

```
function getData($table,$key,$asarray=false) {
    $sql = mysql_query("select * from `".$table."` where primary='".$key."'");
    if( !$asarray) return mysql_fetch_assoc($sql);
    $ret = [];
    while($row = mysql_fetch_assoc($sql)) $ret[] = $row;
    return $ret;
} 
```

*几点注意事项：*

 *1.  `$table`仅来自代码内部的文字字符串，绝不来自外部来源。
2.  出于此问题的目的，假设`$key`已正确转义。
3.  我不在乎`mysql`PHP 5.5 中已弃用，因为我使用的是 PHP 5.4
4.  出于同样的原因，这`$ret = []`是定义数组的一种完全有效的方法——我这样说是因为在我的最后一个问题中，人们告诉我，由于这种语法，我的代码无法正常工作。* 

*现在，我当前的实际工作代码有一个关联数组，将表名映射到它们对应的主键字段名。我只是想知道是否有一种自动化的方法可以做到这一点，最好是不涉及查询的方法`INFORMATION_SCHEMA`，`SHOW CREATE TABLE`或者`SHOW INDEXES`.*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:00:15.623

不，在不知道或查询主键列的情况下，没有自动化的方法可以做到这一点。

*请注意，主键可能不止一列！*

我在 Zend Framework 1.0 中实现了这种通用的 find-by-primary-key 方法。我们必须为表网关类编写代码来发现表的主键和所有其他列。

`DESC`用作更快的替代方法或`SHOW CREATE TABLE`查询`INFORMATION_SCHEMA`. 这些`SHOW`命令只是映射到针对 的查询`INFORMATION_SCHEMA`，这可能会产生很高的成本，因为它会触发 InnoDB 表重新读取表的一部分以刷新内存中的统计信息（[除非您设置 innodb_stats_on_metadata=0](http://www.mysqlperformanceblog.com/2011/12/23/solving-information_schema-slowness/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:02:04.327

这将需要再次调用 mysql 服务器，但这应该可以为您提供所需的内容：

```
SHOW KEYS FROM table WHERE Key_name = 'PRIMARY' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T00:20:56.007

我将 Zend Framework 1 用于此类事情。

只需从 Zend_Db_Table 对象执行 find() 并传递您想要的键，如下所示：

```
$table = new Zend_Db_Table($table);
$rows = $table->find($key); 
```*

# c++ - 以我的方式向后写一个字符串，有时会导致额外的输出，与字符 'w' 相关

> ID：14309565
> 
> 赞同：0
> 
> 时间：2013-01-13T23:42:16.347
> 
> 标签：c++, string, iostream

这让我很困惑，简单的代码：

```
int main()
{
    typedef std::string::size_type stype;
    std::cout << "What is your first name?\n";
    std::string first,second,fullname;
    std::cin >> first;
    std::cout << "What is your second name?\n";
    std::cin >> second;
    char * backwards;
    fullname = first + " " + second;
    stype fnsize = fullname.size();    
    backwards = new char [fnsize];
    stype b = 0;
    for(stype a = fnsize; a != 0; --a)
    {
       backwards[b++] = fullname[a - 1];
    }
    std::cout << backwards << std::endl;
    return 0;
} 
```

大部分时间都有效，但是当我写一个像我自己的名字*stanislaw terziev*时，我得到一个输出*veizret walsinatsslaw*而不是*veizret walsinats*

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:45:15.950

我猜你忘记了 null 终止符`'\0'`，你需要：

```
backwards = new char [fnsize+1];
backward[fnsize] = '\0'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T23:54:22.200

您的代码中有两个问题。

首先，您要`backwards`允许`fnsize + 1`结束字符串终止（对于 C 样式字符串是必需的，不包含在`std::string::size()`方法返回值中）。

`backwards`其次，制作字符的最后一个元素`'\0'`（字符串字符的结尾）。没有这个，`std::cout`不知道 char* '结束'在哪里，所以你有时会得到垃圾字符。也就是说 std::cout 会一直输出字符，直到碰到`'\0'`.

您还可以查看其他几个选项：

1.  倒转 a`std::string`并使用`append(fullname[a-1])`
2.  利用`std::reverse`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:51:26.547

您可以更干净地执行此操作，而无需自己管理内存（或担心 nul 终止符）：

```
#include <string>
#include <iostream>

int main()
{
    std::cout << "What is your first name?\n";
    std::string first, second;
    std::cin >> first;
    std::cout << "What is your second name?\n";
    std::cin >> second;
    std::string fullname(first + " " + second);
    std::string backwards(fullname.rbegin(), fullname.rend()); // use reverse iterator
    std::cout << backwards << std::endl;
    return 0;
} 
```

# android - 如何删除所有以相同文本开头的日历事件而不删除其他日历事件？

> ID：14309569
> 
> 赞同：2
> 
> 时间：2013-01-13T23:42:45.137
> 
> 标签：android, calendar, cursor

“[删除日历条目](https://stackoverflow.com/questions/5806174/delete-calendar-entries)”链接解决了我删除日历中所有条目的问题。
看一下代码：

```
Cursor cursor;
cursor = resolver.query(eventsUri, new String[]{ "_id" }, "calendar_id=" + calendarId, null, null);
while(cursor.moveToNext()) {
        long eventId = cursor.getLong(cursor.getColumnIndex("_id"));
        resolver.delete(ContentUris.withAppendedId(eventsUri, eventId), null, null);
} 
```

但我只想删除描述列中以相同文本开头的日历事件。注意：描述仅以相同的文本开头。
我认为问题出在以下行：

```
cursor = resolver.query(eventsUri, new String[]{ "_id" }, "calendar_id=" + calendarId, null, null); 
```

如何修改查询以在描述列中返回以相同文本开头的所有行（例如“这是由...创建的”）？

# jquery - Jquery TreeView 展开节点

> ID：14309575
> 
> 赞同：1
> 
> 时间：2013-01-13T23:43:26.480
> 
> 标签：jquery

我在对话框中呈现了一个 TreeView。使用对话框我有一个清除选择按钮，我的问题是如何将树视图恢复到默认的未展开状态。

目前，如果我展开树视图中的节点并点击清除按钮并再次打开对话框，树视图仍然展开。

在我的 Dailog 框 Javascript 文件的 document.ready 上，我有以下内容来初始化树视图。我应该把它放在一个函数中，然后在对话框中的清除按钮上，再次调用这个函数来重置？

JS文件

```
//This load the tree view on document ready

$("#parts ul").treeview({
  persist: "location",
  collapsed: true,
  prerendered: false
});

Clear: function () {
  $('#partTreeView :checked').removeAttr('checked');
  $("#PartDisplay").text('');
  $("#inputReps").text('');
  $("#parts").attr("style", "display:inline;");
  $("#inputParts").attr("style", "display:none;");
  PartDialog.dialog("destroy");
  //Toggle/Un-expand tree view here if already expanded here
} 
```

查看 HTML

```
<!-- This div opens the dialog box -->
<div class="bodyContent"> 
  <span class="leftContent">
    @Html.Label("Select Parts")
  </span>
  <span class="rightContent">
    <span id="PartChildDialogLink" class="treeViewLink">Click here to Select Parts</span>
    <br />
    <span id="PartDisplay"></span>
    @Html.HiddenFor(model => model.PartDescription)
    <input id="ServiceEntryID" type="hidden" value="0" />
  </span>
</div>

<!-- This div contains the dialog box and the tree viwe rendered inside of it -->
<div id="partTreeView" title="Dialog Title" style="font-size: 10px; font-weight: normal; overflow: scroll; width: 800px; height: 450px; display: none;">
  <div id="parts">
    <!-- This line renders the treeview just fine -->
    @Html.RenderTree(CacheHelper.Parts(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "part")
  </div>
  <div id="inputParts" style="display: none;"></div>
  <div id="inputPartTemp" style="display: none;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:53:37.243

树视图可以有树视图`control`。这`control`由树视图脚本绑定到 3 个操作`collapse tree`：`expand tree`和`toggle tree`。

树视图`control`必须是一个包含 3 个锚链接的元素，每个操作一个。

要添加树视图，请在树视图`control`下方或上方添加以下 HTML：

```
<div id="myTreeviewcontrol">
  <a href="#"> collapse </a><a href="#"> expand </a><a href="#"> toggle </a>
</div> 
```

如果您不希望用户能够`collapse/expand/toggle`并且只计划以编程方式折叠树，则可以删除锚标记之间的文本以具有“不可见”控件。

要让树视图脚本了解控件，以便将 3 个操作绑定到它，请将以下内容添加到树视图中：

```
$("#parts ul").treeview({
    persist: "location",
    collapsed: true,
    prerendered: false,
    control: "#myTreeviewcontrol"
}); 
```

现在要以编程方式折叠树，您只需触发 中的第一个链接`control`，如下所示：

```
$('#myTreeviewcontrol a:eq(0)').click(); 
```

* * *

[**演示**](http://jsfiddle.net/cbuYj/)- 以编程方式折叠树

* * *

> 在上面的 DEMO 中，我将文本留在了锚点中，因此您也可以根据需要使用它们。我在树的底部添加了一个按钮，单击该按钮时，将通过以编程方式触发控件的折叠链接来折叠树

* * *

### 应用这些更改

* * *

将这些更改应用于您的代码将涉及对您的 HTMLview 和脚本的更改。

你的观点改变：

```
<div id="partTreeView" title="Dialog Title" style="font-size: 10px; font-weight: normal;
            overflow: scroll; width: 800px; height: 450px; display: none;">

  <!-- You could insert Tree View Controller here -->
  <div id="myTreeviewcontrol">
    <a href="#"></a><a href="#"></a><a href="#"></a>
  </div>

  <div id="parts">
    //This line renders the treeview just fine 
    @Html.RenderTree(CacheHelper.Parts(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "part")
  </div>
  <div id="inputParts" style="display: none;"></div>
  <div id="inputPartTemp" style="display: none;"></div>
</div> 
```

您的脚本更改：

```
// Let the treeview know "who" your controller is
$("#parts ul").treeview({
  persist: "location",
  collapsed: true,
  prerendered: false,
  control: "#myTreeviewcontrol" // <-- Assign id of controller to control option
}); 
```

现在您的树视图和树视图控制器已绑定，并且控制器知道单击折叠链接时要折叠的树视图。

```
// Tell your controller to collapse the tree
Clear: function () {
  $('#partTreeView :checked').removeAttr('checked');
  $("#PartDisplay").text('');
  $("#inputReps").text('');
  $("#parts").attr("style", "display:inline;");
  $("#inputParts").attr("style", "display:none;");
  PartDialog.dialog("destroy");
  //Toggle/Un-expand tree view here if already expanded here
  $('#myTreeviewcontrol a:eq(0)').click(); //<-- Tell the treeview controller to collaps the treeview it is bound to
} 
```

添加最后一行会触发树视图控制器中第一个链接的单击事件，导致控制器折叠它已关联的树视图。

* * *

### 补充说明

* * *

树视图脚本将始终期望您指定为的元素内有 3 个链接，`control`并且始终以与开头提到的完全相同的顺序绑定操作。

*   第一个链接 = 折叠树
*   第二个链接 = 展开树
*   第三个链接 = 切换树

查看[**jQuery TreeView 源**](https://raw.github.com/jzaefferer/jquery-treeview/master/jquery.treeview.js)代码，下面的代码显示了它是如何工作的（在函数的底部，您可以看到它是如何触发链接的）：

```
// factory for treecontroller
function treeController(tree, control) {
  // factory for click handlers
  function handler(filter) {
    return function () {
      // reuse toggle event handler, applying the elements to toggle
      // start searching for all hitareas
      toggler.apply($("div." + CLASSES.hitarea, tree).filter(function () {
        // for plain toggle, no filter is provided, otherwise we need to check the parent element
        return filter ? $(this).parent("." + filter).length : true;
      }));
      return false;
    };
  }
  // click on first element to collapse tree
  $("a:eq(0)", control).click(handler(CLASSES.collapsable));
  // click on second to expand tree
  $("a:eq(1)", control).click(handler(CLASSES.expandable));
  // click on third to toggle tree
  $("a:eq(2)", control).click(handler());
} 
```

# php - 如何在 DDD 中实现分页？

> ID：14309578
> 
> 赞同：4
> 
> 时间：2013-01-13T23:43:28.617
> 
> 标签：php, domain-driven-design

我有用户和组。每个用户可以有任意数量的组。我想以分页形式显示用户组，一次 n 个组。我知道如何实现一个普通的分页，但是我不知道如何将它集成到我的领域驱动设计**中（并且不会导致以后的代码重复）**。我希望它像这样工作：

```
$adapter = new DatabaseAdapter(...);
$userRepository = new UserRepository($adapter);
$user = $userRepository->fetchById(1);
$groups = $user->getGroups()->getRange($offset, $limit); 
```

对于其他域实体也是如此：

```
$projects = $user->getProjects()->getRange($offset, $limit);
... 
```

简化后，我的代码如下所示：

```
class Group
{
    private $_id;
    private $_name;

    public function __construct($id, $name) {
        $this->setId($id);
        $this->setName($name);
    }

    public function setId() {
        $this->_id = $id;
    }

    public function getId() {
        return $this->_id;
    }

    public function setName($name) {
        $this->_name = $name
    }

    public function getName() {
        return $this->_name;
    }
}

class Groups
{
    private $_elements = array();

    public function __construct(array $groups) {
        foreach($groups as $group) {
            if(!($group instanceof Group)) {
                throw new Exception();
            }
            $this->_elements[] = $group;
        }
    }

    public function toArray() {
        return $this->_elements;
    }
}

class GroupMapper
{
    private $_adapter;

    public function __construct(DatabaseAdapterInterface $adapter) {
        $this->_adapter = adapter;
    }

    public function fetchById($id) {
        $row = $this->_adapter->select(...)->fetch();
        return $this->createEntity($row);            
    }

    public function fetchAll() {
        $rows = $this->_adapter->select(...)->fetchAll();
        return $this->createEntityCollection($rows);
    }

    private function createEntityCollection(array $rows) {
        $collection = array();
        foreach($rows as $row) {
            $collection[] = $this->createEntity($row);
        }
        return $collection;
    }

    private function createEntity(array $row) {
        return new Group($row['id'], $row['name']);
    }
}

class User
{
    private $_id;
    private $_name;
    private $_groups;

    public function getId() {
        return $this->_id;
    }

    public function setName($name) {
        $this->_name = $name;
    }

    public function getName() {
        return $this->_name;
    }

    public function setGroups($groups) {
        $this->_groups = $groups;
    }

    public function getGroups() {
        return $this->_grous;
    }
}

class UserRepository
{
    private $_userMapper = null;
    private $_groupMapper = null;

    public function __construct(DatabaseAdapterInterface $adapter) {
        $this->_groupMapper = new GroupMapper($adapter);
        $this->_userMapper = new UserMapper($adapter);
    }

    public function fetchById($id) {
        $user = $this->_userMapper->fetchById($id);
        if($user) {
            $groups = $this->_groupMapper->fetchAllByUser($id);
            $user->setGroups($groups);
        }
    }

    public function fetchAll() {
        ...
    }
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T00:07:32.420

在 DDD 中，这通常是通过直接在存储库上提供分页查询方法来实现的。如果一个组严格来说是用户聚合的子实体，那么只需向用户存储库添加一个查询方法。如果一个组是它自己的聚合，则将该方法添加到组存储库。此外，这是一个严格只读的场景，可能专门用于 UI，因此它不是核心域的一部分 - 它更多的是技术问题。

另一种方法是使用可以注入集合代理的 ORM，该集合代理在后台对数据库执行命令。这些方法通常比它们的价值更麻烦，并且使域代码更难以推理和维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T04:58:36.440

我对此的看法是根本不查询您的域模型。通过查询您的域，您将立即遇到问题。一旦你意识到你并不总是需要所有的`Order`数据，或者你并不总是需要加载`OrderLine`实例，`Order`那么你就知道你已经进入了那个雷区:)

一开始可能看起来很奇怪，但就像你有一个`UserRepository`获取域模型的方法一样，你可能必须`UserQuery`获取读取的数据。您可以查看 CQRS（命令/查询职责分离），但从针对您的用例的简单查询开始就足够了。

您应该很快意识到一些非规范化数据可能会有所帮助，此时您可以开始引入 CQRS。

# javascript - 无法访问 JSON 中的变量

> ID：14309579
> 
> 赞同：0
> 
> 时间：2013-01-13T23:43:30.360
> 
> 标签：javascript, json

我觉得很愚蠢。我得到了这个字符串：

```
var myString = "({"week":{"@attributes": "Some stuff"}});"; 
```

不，我将其解析为 JSON：

```
var myobject = JSON.parse(myString); 
```

然后我试图通过以下方式访问它：

```
myobject.week or myobject["week"] 
```

无论哪种方式都行不通。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:46:14.180

这不是一个有效的 json 字符串。您必须删除 () 和 ;

```
{"week":{"@attributes": "Some s***"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:53:55.987

这不是有效的 JavaScript：

```
var myString = "({"week":{"@attributes": "Some stuff"}});"; 
```

因为在字符串中使用了无效的引号。

这将作为一个有效的 javscript 字符串工作：

```
var myString = '({"week":{"@attributes": "Some stuff"}});'; 
```

而且，如果你想用 解析它`JSON.parse()`，你应该像这样删除外部括号和分号：

```
var myString = '{"week":{"@attributes": "Some stuff"}}';
var myobject = JSON.parse(myString);
console.log(myobject.week); 
```

# ruby-on-rails - Rails 错误：未初始化的常量 User::Nil

> ID：14309589
> 
> 赞同：0
> 
> 时间：2013-01-13T23:44:54.240
> 
> 标签：ruby-on-rails, error-handling

当您看到类似“未初始化的常量 User::Nil”之类的错误时，这是​​什么意思？

我认为这与我的授权模型与用户模型连接有关...我正在通过 FB 设置登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:54:11.100

听起来你在`nil`某个地方错误地大写了。

```
class Foo
  def bar
    Nil
  end
end

Foo.new.bar
# => NameError: uninitialized constant Foo::Nil 
```

# javascript - 检测浏览器窗口/选项卡何时不在前台

> ID：14309596
> 
> 赞同：1
> 
> 时间：2013-01-13T23:45:58.820
> 
> 标签：javascript, focus

我想跟踪某个网页何时处于（或不在）前台。

我已经尝试过[Page Visibility API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API#Use_cases)，我可以使用它来确定我的页面是否是其窗口的当前活动选项卡。但我还需要知道我的页面窗口何时不在前台（尽管是该窗口的活动窗口）。

这是我可以使用 javascript 检测到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:51:56.917

您可以使用 hasFocus 事件，当它在前台（活动或不活动）时发送到服务器的 ajax 调用。[这里](https://stackoverflow.com/questions/8235139/how-can-it-be-detected-if-a-page-is-on-background-or-foreground-with-jquery-java)有更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:53:32.390

我为此使用`focus`和事件，您可以使用 JQuery`blur`跨浏览器进行操作。`$(window)`您的需求似乎不需要 Page Visibility API，因为您只关心选项卡（和窗口）是否具有实际焦点。

# python - Python 编程：未定义全局名称“is_within”。我正在为列表使用过滤器

> ID：14309598
> 
> 赞同：2
> 
> 时间：2013-01-13T23:46:10.903
> 
> 标签：python, list, filter, global, defined

```
class wordlist:
    def is_within(word):
        return 3 <= (len(word)) <= 5
    def truncate_by_length(wordlist):
        return filter(is_within, wordlist)
    newWordlist = truncate_by_length(['mark', 'daniel', 'mateo', 'jison'])
    print newWordList 
```

基本上它的作用是，给定一个单词长度的最小值和最大值（在给定的示例中分别为 3 和 5），它应该打印一个新的单词列表，这些单词在给定原始长度的这些长度内。例如上面，给定单词 mark、daniel、mateo 和 jison，它应该打印仅包含 mark、mateo 和 jison 的新列表。

每当我运行它时，我都会收到以下信息：

```
Traceback (most recent call last):
  File "C:/Users/Makoy/Documents/AMC 125/sample.py", line 1, in <module>
    class wordlist:
  File "C:/Users/Makoy/Documents/AMC 125/sample.py", line 6, in wordlist
    newWordlist = truncate_by_length(['mark', 'daniel', 'mateo', 'jison'])
  File "C:/Users/Makoy/Documents/AMC 125/sample.py", line 5, in truncate_by_length
    return filter(is_within, wordlist)
NameError: global name 'is_within' is not defined 
```

对不起，如果我听起来很菜鸟等等，但我一个月前才开始学习 Python，而且我是一个完全的初学者。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:47:23.467

如果您在类方法定义中调用类方法，则需要调用“self”（因此，在您的示例中为 self.is_within）。类方法的第一个参数也应该是“self”，它指的是类的这个实例。查看[Dive into Python](http://www.diveintopython.net/object_oriented_framework/defining_classes.html)以获得很好的解释。

```
class wordlist:
    def is_within(self, word):
        return 3 <= (len(word)) <= 5
    def truncate_by_length(self,wordlist):
        return filter(self.is_within, wordlist)

wl = wordlist()    
newWordList = wl.truncate_by_length(['mark', 'daniel', 'mateo', 'jison'])
print newWordList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:30:32.183

虽然 timc 的答案解释了为什么您的代码会出现错误以及如何修复它，但您的课程的当前设计相当糟糕。您的 wordlist 类仅包含两种对外部数据进行操作的方法 - 通常无需为此创建类，您可以直接在模块的全局范围内定义它们。wordlist 类的更好设计是这样的：

```
class wordlist():
    def __init__(self, wlist):
        #save the word list as an instance variable
        self._wlist = wlist

    def truncate_by_length(self):
        #truncante the word list using a list comprehension
        self._wlist = [word for word in self._wlist if 3 <= len(word) <= 5]

    def __str__(self):
        #string representation of the class is the word list as a string
        return str(self._wlist) 
```

像这样使用它：

```
w = wordlist(['mark', 'daniel', 'mateo', 'jison'])
w.truncate_by_length()
print w 
```

# python - python检查最后一个数字之前的一个是否是奇数

> ID：14309603
> 
> 赞同：0
> 
> 时间：2013-01-13T23:46:29.837
> 
> 标签：python, python-2.7

我有一个字符串：

```
i = '12345678901' 
```

如何检查（使用python）字符串中最后一个数字之前的一个是偶数还是奇数？

在上面的字符串中，我希望函数返回或打印“偶数”。
我找到了一些示例，但它们是用 C 语言编写的，我不知道如何在 Python 中使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:52:53.077

有（至少）两种方法可以做到这一点：

方法一：

获取索引 -2 处的字符并对其进行 intify 并用 2 检查其模数

```
In [119]: i = '12345678901'

In [120]: int(i[-2])%2
Out[120]: 0

In [121]: int(i[-1])%2
Out[121]: 1 
```

方法二：

intify `i`，然后除以 10 和 mod 除以 10 得到倒数第二个数字并点头 2 确定它是偶数还是奇数

```
In [122]: i = 12345678901

In [123]: (i/10)%10
Out[123]: 0

In [124]: ((i/10)%10)%2
Out[124]: 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:06:58.313

单线：

```
f = lambda s: 'odd' if int(s[-2]) % 2 else 'even' 
```

输入测试：

```
>>> i = '12345678901'
>>> f(i)
'even'
>>> i = '12345678931'
>>> f(i)
'odd' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:53:05.197

这很容易实现，你只需要一点点切片，模运算符（`%`）就可以了。

```
i = '12345678901'

second_last = i[-2]

if int(second_last) % 2 == 0:
    print("Even")
else:
    print("Odd") 
```

输出：

```
Even 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T23:53:07.960

```
i = '12345678901'
print int(i[-2]) % 2 == 1
# False 
```

要让它打印偶数或奇数，您需要这样做：

```
if int(i[-2]) % 2 == 0:
    print 'Even'
else:
    print 'Odd' 
```

您还可以使用由语句`1`解释为的事实（并且is ）：`True``if``0``False`

```
if int(i[2]) % 2:  #if int(i[-2]) % 2 returns 1
    print 'Odd'
else:
    print 'Even' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T23:53:25.320

第 1 步：获取倒数第二个数字：

```
last_digit = i[-2] 
```

第2步：奇怪吗？

```
is_odd = last_digit in '13579' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T23:54:01.067

这从获取数据切片开始，请参阅[解释 Python 的切片表示法](https://stackoverflow.com/questions/509211/the-python-slice-notation)以获得切片的良好解释。官方文档不是那么明显。

您可以使用负数从末尾开始切片。一旦你有了切片，你需要检查它是否是一个数字，找到它的 nmeric 值，看看它是否是偶数。

编码留给读者作为练习。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-24T12:14:34.323

```
(i % 10) & 1 
```

如果奇数返回**1**，如果偶数返回**0**

代码 -

```
print "even" if not ((int(i) / 10) % 10) & 1 else "" 
```

# javascript - 带有 DIV 类而不是图像的 Javascript 基本滑块

> ID：14309604
> 
> 赞同：0
> 
> 时间：2013-01-13T23:46:30.100
> 
> 标签：javascript, slider

我如何为此使用 div 而不是 IMAGES 标签。我试过`getElementsByTagName("div")`了，但它们在一个`#slider-content`div 中。所以我无法从 slide1 slide2 - div 类中获取它们。谢谢。

```
 window.onload = function() {

    function e(eel) {
return document.getElementById(eel);
    }

    function t(tel) {
return document.getElementsByTagName(tel);
    }

   // SLIDER
   var slider = e('slider'),
        sliderImages = slider.getElementsByTagName('img'),
        noOfImages = sliderImages.length,
        wheee, n = 0,
        sliderContent = e('slider-content'),
        move,
        imgWidth = (100 / noOfImages) + "%";

   function sliderInit() {
  sliderContent.style.width = (noOfImages * 100) + "%";
   for (var i = 0; i < noOfImages; i++) {
    sliderImages[i].style.width = imgWidth;
}
   }

   wheee = {
slide: function() {
        move = setInterval(function() {
        if (n < (noOfImages-1)) n++;
        else n = 0;
        sliderContent.style.marginLeft = "-"+n+"00%";
    }, 3000);
},

stop: function() {
    window.clearInterval(move);
}
   }

  wheee.slide();
  sliderInit();

  sliderContent.onmouseover = wheee.stop;
  sliderContent.onmouseout = wheee.slide;
  } 
```

html:

```
 <div id="slider">
    <div id="slider-content">

        <div class="slide1">This is slide one</div><!-- slide one -->
        <div class="slide2">This is slide two</div><!-- slide one -->
        <div class="slide3">This is slide three</div><!-- slide one -->

    </div><!-- slide content -->
</div><!-- slider --> 
```

CSS：

```
 #slider-content{
-webkit-transition:all 1s ease-in-out;
-moz-transition:all 1s ease-in-out;
    -ms-transition:all 1s ease-in-out;
    -o-transition:all 1s ease-in-out;
    transition:all 1s ease-in-out;
   }
   .slide1{
background: #ff143f;
   }
   .slide2{
background: #424242;
   }
   .slide3{
background: #ff00d2;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:58:48.773

使用直接的 JavaScript，最简单的方法可能是为要控制的 div 添加一个名称（即`<div name="slider"></div>`），然后使用

```
sliderImages = slider.getElementsByName('slider'), 
```

您的其余代码应该可以使用它。

# android - 在 Android 中解析日期时出现意外的副作用

> ID：14309607
> 
> 赞同：9
> 
> 时间：2013-01-13T23:47:12.717
> 
> 标签：android, android-date

在各种 Android 项目中，我使用以下静态函数来解析日期，例如`1900-12-31`. 当然，这个函数应该是确定性的——但事实证明不是。为什么？

通常，它会将 date 解析`2010-10-30`为包含该值的正确`Date`实例。但是我注意到，当我`IntentService`同时运行并解析一些日期时，此函数将与上面相同`1983-01-20`的日期解析为 ，这是`IntentService`. 这怎么可能发生？

```
public static Date dateFromString(String dateStr) {
    SimpleDateFormat mDateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.getDefault());
    SimpleDateFormat mDateTimeFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ", Locale.getDefault());
    Date dateOut = null;
    try {
        if (dateStr != null) {
            if (dateStr.length() == 7) {
                if (dateStr.startsWith("--")) {
                    dateStr = "0000"+dateStr.substring(1);
                }
            }
            else if (dateStr.length() == 6) {
                if (dateStr.startsWith("-")) {
                    dateStr = "0000"+dateStr;
                }
            }
            else if (dateStr.length() == 5) {
                dateStr = "0000-"+dateStr;
            }
            else if (dateStr.matches("[0-9]{2}\\.[0-9]{2}\\.[0-9]{4}")) {
                dateStr = dateStr.substring(6, 10)+"-"+dateStr.substring(3, 5)+"-"+dateStr.substring(0, 2);
            }
            else if (dateStr.matches("[0-9]{2}\\/[0-9]{2}\\/[0-9]{4}")) {
                dateStr = dateStr.substring(6, 10)+"-"+dateStr.substring(3, 5)+"-"+dateStr.substring(0, 2);
            }
            else if (dateStr.matches("[0-9]{8}")) {
                dateStr = dateStr.substring(0, 4)+"-"+dateStr.substring(4, 6)+"-"+dateStr.substring(6, 8);
            }
            if (dateStr.length() >= 20) {
                String dateTimeStr = dateStr.trim();
                if (dateTimeStr.endsWith("Z")) {
                    dateTimeStr = dateStr.substring(0, dateTimeStr.length()-1)+"+0000";
                }
                if (dateStr.charAt(10) == ' ') {
                    dateTimeStr = dateStr.substring(0, 10)+"T"+dateStr.substring(11);
                }
                try {
                    dateOut = mDateTimeFormat.parse(dateTimeStr);
                }
                catch (Exception e2) {
                    dateOut = mDateFormat.parse(dateStr);
                }
            }
            else {
                dateOut = mDateFormat.parse(dateStr);
            }
        }
    }
    catch (Exception e) {
        dateOut = null;
    }
    return dateOut;
} 
```

**编辑：**我在我开始做这项工作`Activity`的地方进行解析。在's中，启动了一个后台服务，它执行相同的工作。当我关闭应用程序 (onStop()) 并快速重新启动它 (onCreate()) 时，两者似乎同时运行并且发生错误。`onCreate()``AsyncTask``Activity``onStop()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T03:35:51.120

的文档[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)说：

> SimpleDateFormat 不是线程安全的。用户应该为每个线程创建一个单独的实例。

你去吧。只需`SimpleDateFormat`在每个线程中分别创建对象并将其传递给方法即可。

# php - 使用 MySQL 数据库中的值填充 HTML 下拉列表并使其“选中”，同时列表中有其他选项

> ID：14309614
> 
> 赞同：1
> 
> 时间：2013-01-13T23:48:02.230
> 
> 标签：php, html, mysql, forms, drop-down-menu

假设我有一个 HTML 下拉菜单，

```
<p>General Medical History: 
<select name="otherproblem">
    <option value="Nothing">Nothing</option>
    <option value="Allergy: Penicillin">Allergy: Penicillin</option>
    <option value="Aspirin">Aspirin</option>
    <option value="Erythromycin">Erythromycin</option>
    <option value="Latex or Rubber Products">Latex or Rubber Products</option>
    <option value="Codeine">Codeine</option>
    <option value="Tetracycline">Tetracycline</option>
    <option value="Germicides/Pesticides, Foods">Germicides/Pesticides, Foods</option>
    <option value="Other">Other</option>
    <option value="Asthma">Asthma</option>
    <option value="Bleeding Disorders">Bleeding Disorders</option>
    <option value="Diabetes">Diabetes</option>
    <option value="Epilepsy">Epilepsy</option>
    <option value="GI disorders">GI disorders</option>
    <option value="Heart disease">Heart disease</option>
    <option value="Hepatitis">Hepatitis</option>
    <option value="Jaundice">Jaundice</option>
    <option value="Liver disease">Liver disease</option>
    <option value="Neoplasm">Neoplasm</option>
    <option value="Psychiatric Problems">Psychiatric Problems</option>
    <option value="Respiratory diseases">Respiratory diseases</option>
    <option value="Rheumatic fever">Rheumatic fever</option>
</select>
</p> 
```

通过选择其中一个选项，我将特定值作为 VARCHAR 添加到数据库中。

现在我要给他们回电话，比如说进行编辑，所以我需要将输入的数据返回到同一个表单，在那里我可以将所有其他内容检索到文本框中。但我不知道如何从数据库中获取值并在此下拉列表中选择它。我所能做的就是将检索到的值从 db 保存到一个名为的变量中， `$otherproblem`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:51:34.863

您可以将每个选项标签修改为如下所示：

```
<option value="Nothing" <?=$otherproblem === 'Nothing' ? 'selected="selected"' : ''?>>Nothing</option> 
```

每个人都应该将数据库中的值与选项标签的值进行比较，如果它们相等，则添加选定的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:52:51.560

通常，您也会从数据库中加载选项列表。您将遍历列表并动态构建`<option>`标签。当您这样做时，您将创建的选项值与从先前提交中检索到的值进行比较，如果它们匹配，则将“selected”属性添加到选项标记中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:54:47.690

这是一种方法：

```
<?php

$otherproblem = "Aspirin";

$dropdown = array(
    "Nothing",
    "Allergy: Penicillin",
    "Aspirin",
    "Erythromycin",
    "Latex or Rubber Products",
    "Codeine",
    "Tetracycline",
    "Germicides/Pesticides, Foods",
    "Other",
    "Asthma",
    "Bleeding Disorders",
    "Diabetes",
    "Epilepsy",
    "GI disorders",
    "Heart disease",
    "Hepatitis",
    "Jaundice",
    "Liver disease",
    "Neoplasm",
    "Psychiatric Problems",
    "Respiratory diseases",
    "Rheumatic fever"
);

?>
<p>General Medical History: 
<select name="otherproblem">
    <?php foreach ($dropdown as $name): ?>
        <option <?php if ($otherproblem == $name) print('selected="selected"');?> value="<?php print($name);?>"><?php print($name);?></option>
    <?php endforeach; ?>
</select>
</p> 
```

**方式二：**

```
<?php
    $otherproblem = "Erythromycin";
?>
<p>General Medical History: 
<select name="otherproblem">
    <option <?php if($otherproblem == "Nothing"){print('selected="selected"');}?> value="Nothing">Nothing</option>
    <option <?php if($otherproblem == "Allergy: Penicillin"){print('selected="selected"');}?> value="Allergy: Penicillin">Allergy: Penicillin</option>
    <option <?php if($otherproblem == "Aspirin"){print('selected="selected"');}?> value="Aspirin">Aspirin</option>
    <option <?php if($otherproblem == "Erythromycin"){print('selected="selected"');}?> value="Erythromycin">Erythromycin</option>
    <option <?php if($otherproblem == "Latex or Rubber Products"){print('selected="selected"');}?> value="Latex or Rubber Products">Latex or Rubber Products</option>
    <option <?php if($otherproblem == "Codeine"){print('selected="selected"');}?> value="Codeine">Codeine</option>
    <option <?php if($otherproblem == "Tetracycline"){print('selected="selected"');}?> value="Tetracycline">Tetracycline</option>
    <option <?php if($otherproblem == "Germicides/Pesticides, Foods"){print('selected="selected"');}?> value="Germicides/Pesticides, Foods">Germicides/Pesticides, Foods</option>
    <option <?php if($otherproblem == "Other"){print('selected="selected"');}?> value="Other">Other</option>
    <option <?php if($otherproblem == "Asthma"){print('selected="selected"');}?> value="Asthma">Asthma</option>
    <option <?php if($otherproblem == "Bleeding Disorders"){print('selected="selected"');}?> value="Bleeding Disorders">Bleeding Disorders</option>
    <option <?php if($otherproblem == "Diabetes"){print('selected="selected"');}?> value="Diabetes">Diabetes</option>
    <option <?php if($otherproblem == "Epilepsy"){print('selected="selected"');}?> value="Epilepsy">Epilepsy</option>
    <option <?php if($otherproblem == "GI disorders"){print('selected="selected"');}?> value="GI disorders">GI disorders</option>
    <option <?php if($otherproblem == "Heart disease"){print('selected="selected"');}?> value="Heart disease">Heart disease</option>
    <option <?php if($otherproblem == "Hepatitis"){print('selected="selected"');}?> value="Hepatitis">Hepatitis</option>
    <option <?php if($otherproblem == "Jaundice"){print('selected="selected"');}?> value="Jaundice">Jaundice</option>
    <option <?php if($otherproblem == "Liver disease"){print('selected="selected"');}?> value="Liver disease">Liver disease</option>
    <option <?php if($otherproblem == "Neoplasm"){print('selected="selected"');}?> value="Neoplasm">Neoplasm</option>
    <option <?php if($otherproblem == "Psychiatric Problems"){print('selected="selected"');}?> value="Psychiatric Problems">Psychiatric Problems</option>
    <option <?php if($otherproblem == "Respiratory diseases"){print('selected="selected"');}?> value="Respiratory diseases">Respiratory diseases</option>
    <option <?php if($otherproblem == "Rheumatic fever"){print('selected="selected"');}?> value="Rheumatic fever">Rheumatic fever</option>
</select>
</p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T00:08:16.013

您有两种选择，一种是按照以下方式加载列表：

```
<?
    $otherproblem = "Erythromycin";
?>
<p>General Medical History: 
<select name="otherproblem">
<?
$result = mysql_query("query to get the list of options");
while($row=mysql_fetch_array($result)){
if(strcmp($row['Problem'],$otherproblem)===0){ $selected = 'selected="selected"'; } else { $selected = ""; }
?>
<option <?=$other?> value="<?=$row['Problem'];?>"><?=$row['Problem'];?></option>
<? } ?> 
```

很脏，但它可以按照您当前的设置方式工作。您也可以通过简单地在列表顶部选择项目，然后像这样的完整列表来装配它：

```
<?
    $otherproblem = "Erythromycin";
?>
<p>General Medical History: 
<select name="otherproblem">
<option selected="selected" value="<?=$otherproblem;?>"><?=$otherproblem;?></option>
<?
$result = mysql_query("query to get the list of options");
while($row=mysql_fetch_array($result)){
?>
<option value="<?=$row['Problem'];?>"><?=$row['Problem'];?></option>
<? } ?> 
```

有很多更简洁的方法可以做到这一点，但是在没有看到你如何提取数据的情况下，这两个选项无论如何都可以工作。

# facebook - 通过 Open Graph API 发布时，Facebook 墙贴图片不会呈现

> ID：14309618
> 
> 赞同：7
> 
> 时间：2013-01-13T23:48:46.917
> 
> 标签：facebook, image, facebook-graph-api, facebook-wall

当通过 Open Graph API 制作墙贴时，Facebook 需要一种方法在墙贴中呈现图像。

当我将此链接复制并粘贴到 facebook.com 上的 Facebook UI 并以这种方式发布时，墙上的帖子最终看起来像这样：

![FB墙贴中成功渲染的图像](../Images/ccfd45ac748b679bbabcf574a9f35b7f.png)

但是，当我尝试使用 Facebook Python 库以编程方式访问我的墙时，使用以下代码，图像不会呈现：

```
graph = GraphAPI(valid_access_token)
graph.put_wall_post(message='https://s3.amazonaws.com/dotellapptest/review_photos/enlarged/811..OJUzXI76Rw6J2Zj_vZyWNw.png') 
```

产生这个：

![不成功的 Facebook 墙贴与图像](../Images/4b4e1e11ca9d675d6f35b5a401723299.png)

如何使用 Facebook API 在我的墙贴中嵌入图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T00:07:42.323

通过附件使用`link`字段而不是字段`message`

```
def put_wall_post(self, message, attachment={}, profile_id="me"):
    """Writes a wall post to the given profile's wall.

    We default to writing to the authenticated user's wall if no
    profile_id is specified.

    attachment adds a structured attachment to the status message
    being posted to the Wall. It should be a dictionary of the form:

        {"name": "Link name"
         "link": "http://www.example.com/",
         "caption": "{*actor*} posted a new review",
         "description": "This is a longer description of the attachment",
         "picture": "http://www.example.com/thumbnail.jpg"}

    """
    return self.put_object(profile_id, "feed", message=message,
                           **attachment) 
```

[https://github.com/pythonforfacebook/facebook-sdk/blob/master/facebook.py#L142](https://github.com/pythonforfacebook/facebook-sdk/blob/master/facebook.py#L142)

[http://developers.facebook.com/docs/reference/api/user/#links](http://developers.facebook.com/docs/reference/api/user/#links)

# html - 阻止 div 导致父浮动扩展到 100%

> ID：14309626
> 
> 赞同：1
> 
> 时间：2013-01-13T23:49:25.850
> 
> 标签：html, css, css-float

我有一个右浮动、流体宽度的 div，它很好地位于另一个流体宽度、非浮动的列旁边。

一切正常，直到我将另一个流体宽度 div 放入该右浮动列中，此时它扩展为 100% 并将非浮动列放在其下方。我唯一能做的就是给导致问题的 div 一个固定的像素宽度，但我不想这样做，因为它需要扩展到它的父浮点数，但不能超出这个范围。这是问题的一个例子：

```
 <div style="overflow:hidden;width:800px;">
    <div style="min-width:600px;min-height:200px;float:right;background:#FAA;">
    <div id="floatContent" style="max-width:88%;">Here's some long string of text that makes the width of the parent float expand out to 100% of *its* parent, rather than shrinking the content to its original width (100% minus the width of the non-floated element</div>
  </div>
    <div style="min-width:200px;min-height:200px;background:#CCC;">Some non-floated content</div>
</div> 
```

有任何想法吗？非常感谢。

[**JSFiddle 链接**](http://jsfiddle.net/rv7PM/1/)

# iphone - 使用自定义视图控制器加载游戏中心匹配

> ID：14309628
> 
> 赞同：2
> 
> 时间：2013-01-13T23:49:42.590
> 
> 标签：iphone, ios, objective-c, xcode

我制作了一款游戏中心回合制游戏，并且一直在使用苹果标准游戏概览屏幕。它工作得很好，但现在我也在使用自定义视图控制器，所以我可以从我的应用程序中获取游戏中心。我在他的付费 iOS 5 书中使用了 ray wenderlich 。

我的游戏每次都用 12 个字母更新游戏字符串，但是它在自定义视图控制器中无法正确运行，自定义视图控制器总是错过最后 12 个字母，但是当我在苹果视图控制器中打开游戏时，会加载正确的字符串。所以这不是因为我发送字符串的方式。

要加载比赛，我使用一个按钮：

```
-(void)loadAMatch:(GKTurnBasedMatch *)match {
[vc dismissViewControllerAnimated:NO completion:nil];
[[GCTurnBasedMatchHelper sharedInstance] turnBasedMatchmakerViewController:nil didFindMatch:match];
} 
```

有没有人知道我为什么会遇到这个问题，如果需要更多代码来清除某些东西，请告诉我。

# vb.net - Visual Basic .substring 错误

> ID：14309629
> 
> 赞同：0
> 
> 时间：2013-01-13T23:49:45.430
> 
> 标签：vb.net

我是 VB 新手，我在使用以下代码时遇到了一些问题。

```
 Dim random As String = "asfdgasfdgasfdgasfd11"
    Dim length As Integer = Nothing

    length = random.Length
    Console.WriteLine(random.Length)
    Console.WriteLine(length)
    Console.WriteLine()
    Console.WriteLine()
    Console.ReadLine()

    If length <= 20 Then
        Console.WriteLine(random.Substring(0, length))
    ElseIf length <= 40 Then
        Console.WriteLine(random.Substring(0, 20))
        Console.WriteLine(random.Substring(20, length))
    End If

    Console.ReadLine() 
```

错误：

> " 在 mscorlib.dll 中发生了“System.ArgumentOutOfRangeException”类型的未处理异常
> 
> 附加信息：索引和长度必须引用字符串中的位置“

我认为错误是由于 ( `20`, `length`)) 而发生的。我试图将长度分配给一个变量，这样程序就不会崩溃，除非尝试的是特定数量的字符。

我试图拥有任何给定长度的变量，如果它大于 20 个字符，则每行只打印 20 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:59:52.970

> 附加信息：索引和长度必须引用字符串中的位置

这才是重点。在您的第二个 WriteLine 中，您要求打印`random`从第 20 个字符开始的字符串（起始索引正常，有 21 个字符），但随后它要求打印 21 个字符（长度 = 21）。
是的，startindex + length = 41 超出了字符串限制

你可以尝试用

```
Console.WriteLine(random.Substring(20, length - 20)) 
```

或引入一次打印 20 个字符的 while 循环

```
length = random.Length
Console.WriteLine(random.Length)
Console.WriteLine(length)
Console.WriteLine()
Console.WriteLine()
Console.ReadLine()

Dim curStart = 0 
Dim loopCounter = 0
while(curStart < random.Length)
    Console.WriteLine(random.Substring(curStart, System.Math.Min(20, length - 20 * loopCounter)))
    curStart = curStart + 20
    loopCounter = loopCounter + 1
End While 
```

# jquery - 创建多个实例时，jQuery 的 Datepicker 如何摆脱使用单个唯一 ID 的问题？

> ID：14309630
> 
> 赞同：-3
> 
> 时间：2013-01-13T23:49:48.830
> 
> 标签：jquery, jquery-ui, uniqueidentifier

我一直在对 jQuery 的 Datepicker 插件进行一些研究。我很好奇他是如何创建节点并修改它们的。

我发现很有趣：

```
@ 113:   this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')); 
```

bindHover 函数的考虑并不重要，它接受引用并委托一些事件，例如鼠标悬停等。

有趣的是 id 属性，它说 this._mainDivId 所以我检查了它并...

```
@ 34:       this._mainDivId = 'ui-datepicker-div'; // The ID of the main datepicker division 
```

没有使用唯一的 id，它是一个集合 id。我认为它必须是独一无二的，因为通常一个页面上使用的日期选择器不止一个。

这是 jQuery，它必须是一个好习惯......我只是不知道为什么或如何这有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:57:23.453

这是通过向两个输入添加日期选择器生成的 html。请参阅以下示例：http: [//jsfiddle.net/AC5Py/](http://jsfiddle.net/AC5Py/)

```
<body>
<input id="picker1" class="hasDatepicker">
<input id="picker2" class="hasDatepicker">
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" style="position: absolute; top: 21px; left: 168.7px; z-index: 1; display: block;">
</body> 
```

似乎只有一个日期选择器组件被添加到页面中，并且它被指定为页面上建立的日期选择器的每个输入重用。基本上，他们正在重用为日历生成的标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T23:57:48.047

查看源代码，看起来虽然页面上可能有许多 datepicker 实例，但一次只打开一个 datepicker 窗口（[参见示例](http://jqueryui.com/datepicker/#date-range)）。每个日期选择器都使用相同的`dpDiv`元素来显示其内容，因此 div 被赋予一个唯一的 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T23:57:01.607

当您通过 jquery 将 datepicker 添加到输入时，它是这样完成的

```
$('#startDate').datePicker({..}); 
```

唯一的 id 是`startDate` jquery 将在呈现特定日期选择器时处理 id 和类的更改。一次只能显示一个日期选择器，我不会担心具有相同 id 的不同元素，只要您不自己给它们相同的 id - 一切都会好起来的

# java - 如何在 BroadcastReceiver 中打开数据库

> ID：14309631
> 
> 赞同：1
> 
> 时间：2013-01-13T23:49:56.577
> 
> 标签：java, android, broadcastreceiver, listener

我创建了一个类来管理 SQLite 数据库。其部分代码如下：

```
public class Database extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "name";
private static final int DATABASE_VERSION = 1;

public Database (Context ctx) {
    super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
} 
```

然后我创建了另一个类，它是一个 SMS 监听器（扩展`BroadcastReceiver`）。在此类内部，我无法使用以下命令创建数据库：

```
db = new Database(this); 
```

因为我收到此错误消息：

```
The constructor Database(SmsListener) is undefined 
```

我应该如何更改代码才能从`SmsListener`类内部打开数据库连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:51:35.243

您的`onReceive()`方法`BroadcastReceiver`通过`Context`了，使用它。

```
@Override
public void onReceive(Context context, Intent intent){
    db = new Database(context);
    //more stuff
} 
```

另请注意，在 a`BroadcastReceiver`中，您只能保证 10 秒的执行时间，之后，Android 可能会杀死您的 Receiver。所以要快速处理你正在做的事情，如果数据库操作很长，请考虑使用单独的`Thread`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:05:54.283

您的`Database`构造函数将 a`Context`作为其唯一参数。错误消息告诉您这`this`是一个`SmsListener`which doesn't extend `Context`。

# c++ - 默认参数对象何时被销毁？

> ID：14309633
> 
> 赞同：6
> 
> 时间：2013-01-13T23:50:23.713
> 
> 标签：c++, destructor

```
void foo(const Object & o = Object()) {
      return;
} 
```

在上面的函数中，什么时候应该调用 ~Object ？当函数退出或在调用站点周围的块结束时？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T23:53:12.037

默认参数将在包含函数调用的完整表达式的末尾被销毁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T00:25:42.817

为了详细说明*大卫*所说的，标准在第**12.2 节 [class.temporary]**中说：

> 在两种情况下，临时对象在与完整表达式结束时不同的点被销毁。[...]第二个上下文是引用绑定到临时的。引用绑定到的临时对象或作为引用绑定到的子对象的完整对象的临时对象在引用的生命周期内持续存在，但以下情况除外：
> 
> *   ...
> *   临时绑定到函数调用 (5.2.2) 中的引用参数将持续存在，直到包含调用的完整表达式完成。
> *   ...

因此，它们既不会在函数退出时也不会在包含调用的块结束时被销毁，而是在包含函数调用的完整语句的末尾（简单地说，在函数调用后的第一个分号处，在调用上下文中）。

**编辑：**所以说我们得到了：

```
int foo(const Object & o = Object());

some_stuff();    
std::cout << (foo() + 7);
other_stuff(); 
```

这大致相当于以下内容（注意概念范围块）：

```
some_stuff(); 
{
    Object o;             // create temprorary
    int i = foo(o);       // and use it
    int j = i + 7;        // do other things
    std::cout << j;       // while o still alive
}                         // finally destroy o
other_stuff(); 
```

**编辑：正如***迈克尔*在他的评论中指出的那样，我给出的这个*“语句/分号”类比是对**“完整表达”*一词的简化，在某些情况下它有点不同，比如他的例子：

```
if(foo()) bar(); 
```

调用之前会破坏临时`bar`的，因此与表达式语句不同：

```
foo() ? bar() : 0; 
```

但是尽管如此，*“分号”*类比通常是一个很好的选择，即使完整表达式不一定与语句相同（可以由多个完整表达式组成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:57:33.687

我认为这段代码不应该编译。您不能将引用绑定到临时文件，除非它是`const`. 如果它是`const`临时的，则应保持活动状态，直到函数表达式结束。与在其中定义的局部变量相同。

# web-services - 如何使用 FLEX 解析 SOAP 响应

> ID：14309648
> 
> 赞同：2
> 
> 时间：2013-01-13T23:52:00.533
> 
> 标签：web-services, actionscript-3, apache-flex, actionscript, soap-client

我的 Flex 应用程序正确调用了 Web 服务，但它没有填充下拉框。

根据我的研究，问题出在名称空间上，但仍不确定如何解决。

运行应用程序后，下拉框为空。

我的java代码

```
package com.Services;

import com.classes.*;

import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebResult;

@WebService (name="Hellos",    
targetNamespace="http://localhost:8081/Mywebservice2/services/Hellos")  
public class Hellos {

    @WebMethod
    public @WebResult (name="customers",partName="customers") Customer[] mycustomers()  
   {
        System.out.println("Retriving customers....");
        Customer[] cus = new Customer[2];
        cus[0] = new Customer("Jack", 28);
        cus[1] = new Customer("Ben", 29);
        return cus;
    }
} 
```

flex 应用程序的网络监视器功能显示响应如下

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/xml;charset=utf-8
Transfer-Encoding: chunked
Date: Thu, 10 Jan 2013 04:23:55 GMT

<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope 
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soapenv:Body>
    <mycustomersResponse xmlns="http://Services.com">
      <mycustomersReturn>
          <age>28</age>
          <name>Jack</name>
      </mycustomersReturn>
      <mycustomersReturn>
          <age>29</age>
          <name>Ben</name>
      </mycustomersReturn>
   </mycustomersResponse>
 </soapenv:Body>
</soapenv:Envelope> 
```

我的弹性代码如下

```
<fx:Script>

    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        protected function  
                    dropDownList2_creationCompleteHandler(event:FlexEvent):void
        {
            mycustomersResult2.token = hellos.mycustomers();
        }

    ]]> 
</fx:Script>

    <fx:Declarations>

    <hellos:Hellos id="hellos" fault="Alert.show(event.fault.faultString + '\n' 
             + event.fault.faultDetail)"
             showBusyCursor="true"/>

    <s:CallResponder id="mycustomersResult2"/>

</fx:Declarations>

 <s:FormItem label="Label">
  <s:DropDownList id="dropDownList2"
       creationComplete="dropDownList2_creationCompleteHandler(event)"
       labelField="age">
       <s:AsyncListView list="{mycustomersResult2.lastResult}"/>
  </s:DropDownList>
  </s:FormItem> 
```

**当我改变**

```
<s:AsyncListView list="{mycustomersResult2.lastResult}"/> 
```

**至**

```
<s:AsyncListView list="   
               {mycustomersResult2.lastResult.mycustomersResponse.mycustomersReturn}"/> 
```

它给出了以下错误

```
Error: Unknown Property: 'mycustomersResponse'.
    at mx.collections::ListCollectionView/http://www.adobe.com/2006/actionscript/flash/proxy::getProperty()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:870]
    at mx.binding::PropertyWatcher/updateProperty()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:338]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.binding::Watcher/wrapUpdate()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\Watcher.as:192]
    at mx.binding::PropertyWatcher/updateParent()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:239]
    at mx.binding::Watcher/updateChildren()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\Watcher.as:138]
    at mx.binding::PropertyWatcher/updateProperty()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:347]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.binding::Watcher/wrapUpdate()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\Watcher.as:192]
    at mx.binding::PropertyWatcher/eventHandler()[E:\dev\4.5.1\frameworks\projects\framework\src\mx\binding\PropertyWatcher.as:375]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.rpc::CallResponder/set lastResult()
    at mx.rpc::CallResponder/result()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\CallResponder.as:120]
    at mx.rpc::AsyncToken/http://www.adobe.com/2006/flex/mx/internal::applyResult()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AsyncToken.as:239]
    at mx.rpc.events::ResultEvent/http://www.adobe.com/2006/flex/mx/internal::callTokenResponders()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\events\ResultEvent.as:207]
    at mx.rpc::AbstractOperation/http://www.adobe.com/2006/flex/mx/internal::dispatchRpcEvent()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AbstractOperation.as:244]
    at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::resultHandler()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AbstractInvoker.as:318]
    at mx.rpc::Responder/result()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\Responder.as:56]
    at mx.rpc::AsyncRequest/acknowledge()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AsyncRequest.as:84]
    at DirectHTTPMessageResponder/completeHandler()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\messaging\channels\DirectHTTPChannel.as:451]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:52:12.203

响应 xml 格式的命名空间似乎有问题：

```
<mycustomersResponse xmlns="http://Services.com"> 
```

只需在代码中的任何位置编写：

```
namespace ns = "http://Services.com";
use namespace ns; 
```

我用给定的 xml 编写了演示：

```
var xml:XML = <soapenv:Envelope 
      xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
      xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
     <soapenv:Body>
        <mycustomersResponse xmlns="http://Services.com">
          <mycustomersReturn>
              <age>28</age>
              <name>Jack</name>
          </mycustomersReturn>
          <mycustomersReturn>
              <age>29</age>
              <name>Ben</name>
          </mycustomersReturn>
       </mycustomersResponse>
     </soapenv:Body>
    </soapenv:Envelope> 

    namespace ns = "http://Services.com";
    use namespace ns;

    namespace ns_soapenv = "http://schemas.xmlsoap.org/soap/envelope/";
    use namespace ns_soapenv;

    trace(xml.Body.mycustomersResponse.mycustomersReturn.length()); //output 2 
```

解析得很好。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:30:29.337

您不必解析它，`WebService`该类会为您完成。

```
<s:WebService result=" soapResultHandler(event) ">
    <!-- do stuff here -->
</s:WebService>

<fx:Script>
    <![CDATA[
        private function soapResultHandler( e:ResultEvent ):void {
            //do stuff to e.result in here
        }
    ]]>
</fx:Script> 
```

该`ResultEvent.result`对象是自动解析为单个动态对象的 XML。您可以轻松地遍历它以获取所需的任何详细信息。值得注意的是，如果单个级别的 XML 文档有多个相同标记名称的实例，那么将有一个`ArrayCollection`(not `Array`, mind) 而不是一系列这些对象。

查看[ResultEvent#result LiveDocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/ResultEvent.html#result)

# c# - 从 C# 方法中的存储过程中获取返回值

> ID：14309650
> 
> 赞同：1
> 
> 时间：2013-01-13T23:52:14.520
> 
> 标签：c#, stored-procedures

我正在使用 Visual Studios 2010 创建带有数据库的 ac# Web 应用程序。我的目标是让 default.aspx 调用 ac# 类，该类运行一个存储过程，从表中选择一个条目并返回它。这是代码：

```
'The stored procedure.  I want it to send back the name it gets from doing
'the query to the c# class.
ALTER PROCEDURE getName (@id int)
AS
BEGIN
SET NOCOUNT ON;

--   
SELECT name FROM tableA where id = @id;

END 
Return
//Here's the c# class I'm using.
public class student
{
    public string name;
    public int id;

    public student()
    { }

    public String doQuery(int id)
    {
        SqlConnection conn = null;

        try
        {
             conn = new SqlConnection("Server =(local); Database = Database1.mdf;
   Integrated Security = SSPI");
            conn.Open();
            SqlCommand cmd = new SqlCommand("getName", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlParameter param = new SqlParameter("@id", SqlDbType.Int);
            param.Direction = ParameterDirection.Input;
            param.Value = id;
            cmd.Parameters.Add(param);
            //This is some code from when I tryed return value
            //SqlParameter reVal = cmd.Parameters.Add("@name", SqlDbType.VarChar);
            //reVal.Direction = ParameterDirection.ReturnValue;

            //before using ExecuteScalar I tried ExcuteNonQuery with the commented    
            //out code
            name = (string)cmd.ExecuteScalar();

            //name = (String)cmd.Parameters["@name"].Value;

            conn.Close();
        }

        catch(Exception)
        {}
        return name;
    }
} 
```

运行我的程序不会返回错误，它根本不会在名称中放置任何值。我缺少什么将 sql 过程中选择的名称放入我的 c# 类中的 name 变量中。我希望我能清楚地表达我的问题。

编辑1：我没有在catch中放任何东西，因为还没有决定用什么来查看它是否出错。当尝试失败时，我将其更改为 make name = "error"，这就是我得到的，这就是我得到的。我还尝试在 sql server 管理中运行“exec getName 5, others”。我有点不清楚在运行 exec getName 时使用什么作为第二个参数，因为第二个参数假设只是输出，但似乎仍然需要运行它。它只是说命令执行成功，但不显示 id 5 的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T01:30:24.997

问题出在您的连接字符串中：除非您有奇怪的命名约定，否则您指定的是数据库文件名而不是数据库本身的名称。

尝试将这部分连接字符串：`Database = Database1.mdf;`更改为`Database = Database1;`.

如果您对连接字符串中的有效或无效内容感到困惑，您始终可以使用[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)，它会在您设置正确的属性后为您创建适当的连接字符串。

您还可以使用[SqlConnection.ConnectionString](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)文档中指定的属性列表作为包含示例的参考。

最后，我强烈推荐以下最佳实践：

1) 使用带有连接和命令的块来确保它们被正确关闭和处理。

2) 不要将名称直接分配给 ExecuteScalar 的结果，以防它返回为 DBNull.Value

3) 永远不要忽略异常，除非您在代码中记录了这样做的原因。

以下是所有上述建议的快速重写：

```
 try
        {
            using (var conn = new SqlConnection("Server =(local); Database = Database1; Integrated Security = SSPI"))
            {
                conn.Open();
                using (var cmd = new SqlCommand("getName", conn))
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    var param = new SqlParameter("@id", SqlDbType.Int);
                    param.Direction = ParameterDirection.Input;
                    param.Value = id;
                    cmd.Parameters.Add(param);

                    var oResult = cmd.ExecuteScalar();
                    if ((oResult != null) && (oResult != DBNull.Value))
                    {
                        name = (string)oResult;
                    }
                }
                conn.Close();
            }
        }

        catch (Exception)
        { 
            //  Do something with the exception here, don't just ignore it
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:13:39.673

我建议对*SQL*语句使用`async`/`await`模式。幸运的是，它不需要太多重构。

 *看看这是否适合你：

```
public async Task<string> QueryGetNameAsync(int id)
{
  using (var dbConn = new SqlConnection("..."))
  using (var command = new SqlCommand("getName", dbConn))
  {
    try
    {
      command.CommandType = CommandType.StoredProcedure;
      command.Parameters.AddWithValue("@id", id);

      await dbConn.OpenAsync();

      var result = await command.ExecuteScalarAsync();
      dbConn.Close();

      var name = result as string;          
      return name;
    }
    catch (Exception ex)
    {
      // Handle exception here.
    }
  }
} 
```

你可以这样称呼它：

```
private async void DoLookup_Clicked(object sender, EventArgs e)
{
   var id = int.Parse(idText.Text);
   var name = await QueryGetNameAsync(id);
} 
```

或者，可以在*SQL*`OUTPUT`中使用参数，但您必须将存储过程调整为如下所示：

 *```
ALTER PROCEDURE getName
(
  @id int, 
  @name varchar(100) OUTPUT
)
AS
BEGIN
SET NOCOUNT ON;

SELECT @name = name FROM tableA where id = @id;

END 
```

那么您的*C#*函数将类似于：

```
public async Task<string> QueryGetNameAsync(int id)
{
  using (var dbConn = new SqlConnection("..."))
  using (var command = new SqlCommand("getName", dbConn))
  {
    try
    {
      command.CommandType = CommandType.StoredProcedure;
      command.Parameters.AddWithValue("@id", id);
      command.Parameters.Add("@name", SqlDbType.VarChar, 100);
      command.Parameters["@name"].Direction = ParameterDirection.Output;

      await dbConn.OpenAsync();
      await command.ExecuteNonQueryAsync();
      dbConn.Close();

      var name = command.Parameters["@name"].Value as string;          
      return name;
    }
    catch (Exception ex)
    {
      // Handle exception here.
    }
  }
} 
```**

# java - 从 mysql 数据库中选择记录

> ID：14309651
> 
> 赞同：0
> 
> 时间：2013-01-13T23:52:15.923
> 
> 标签：java, mysql, sql

我正在尝试从我的数据库中选择数据，但我没有得到某个字段，而是得到了“”。我的表名是位置，它看起来像这样：

id - int，位置 - varchar 和时间 - 时间戳。

我想根据时间选择最后一个位置，这是我的代码：

```
this.select = this.conn.createStatement();
ResultSet result = select.executeQuery("SELECT location FROM locations ORDER BY time DESC Limit 1");
result.next();
System.out.println(result.getString(1)); 
```

我提醒你输出是“”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:37:57.800

要识别结果集中的列，您可以使用：

```
result.getString("location"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:11:12.983

你试过了吗？

```
System.out.println(result.getString(0)); 
```

# mysql - 在 Windows 8 中使用 Xampp 设置 MySQL 工作台

> ID：14309653
> 
> 赞同：1
> 
> 时间：2013-01-13T23:52:29.637
> 
> 标签：mysql, windows-8, xampp, mysql-workbench

我正在尝试重新开始 PHP 和 MySQL 开发，因为我发现 MySQL 现在允许存储过程。我在 Oracle 数据库上使用这些，并使用 PL/SQL 开发人员来创建它们。我一直在为 MySQL 寻找类似的接口，并被指向 MySQL 工作台的方向。我正在使用 Xampp 作为我的测试服务器设置，并希望将 MySQL Workbench 链接到此服务器上的 MySQL，但是我被困在安装的某个阶段。我正在尝试创建一个新的服务器实例，并且在测试数据库连接方面已经成功，但是在下一页它要求我为此机器设置“Windows 配置参数”并且未能发现 MySQL 服务。我已确保 Apache 服务器和 MySQL 服务都在 Xampp 中运行，但不明白为什么找不到 MySQL 服务并且没有显示。有没有其他人在尝试使用 MySQL Workbench 时遇到过这个问题，如果是，你是如何设法让它启动和运行的？我使用的是 Windows 8，不知道这是否是找不到服务的原因。如果这是一个非常简单的问题，并且答案很简单，我深表歉意，但是我之前只使用过 PHPMyAdmin，它的设置相对简单。

![未找到服务](../Images/06221c4812636aa2cd7a38e149af144a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:05:52.110

我发现打包的 *AMP 系统存在问题。他们并不总是按照其他应用程序期望的方式安装东西。例如，MAMP 系统不适用于 Python。在 Windows 上安装 Apache、PHP 和 MySql 非常容易（其中两个已经在 Mac 和 Linux 上）

如果您使用标准的 MySql 安装，那么安装 Workbench 应该没有问题，我已经在 Windows 和 Mac 上完成了。

我有时发现它有点不稳定，它不会连接到旧版本的服务器，并且在运行长脚本时往往会崩溃。它也没有很好的查询用户界面，像 PLSQL Developer 到 TOAD 这样的好程序会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:43:58.603

服务检测相当简单。它期望该服务的名称中包含“MySQL”。计划稍后对此进行改进。现在将您的服务重命名为“MySQL Xampp”之类的名称。

# c++ - ubuntu命名空间cv错误上的opencv

> ID：14309654
> 
> 赞同：0
> 
> 时间：2013-01-13T23:52:31.857
> 
> 标签：c++, opencv

嗨，我构建了我的代码，我收到错误消息

./src/view.o: In function `cv::Mat::MSize::MSize(int*)': /home/burak/desktop/workspace/deneme/Debug/../src/view.cpp:13: multiple definition of`main' ./src/deneme.o:/home/burak/desktop/workspace/deneme/Debug/../src/deneme.cpp:12: 首先在这里定义 collect2: 错误: ld 返回 1 退出状态 make: *** [deneme] 错误 1

我的代码是

```
#include <opencv2/core/core.hpp> 
#include<opencv2/highgui/highgui.hpp>
#include<cv.h>
#include<iostream>

using namespace cv;
using namespace std;

int main( int argc, char** argv )
{
if( argc != 2)
{
 cout <<" Usage: display_image ImageToLoadAndDisplay" << endl;
 return -1;
}

Mat image;
image = imread(argv[1], CV_LOAD_IMAGE_COLOR);   // Read the file

if(! image.data )                              // Check for invalid input
{
    cout <<  "Could not open or find the image" << std::endl ;
    return -1;
}
///// Show Image... and main return 0 /// 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:07:43.787

你有两个`main()`函数（一个在`view.cpp`第 13 行，一个在`deneme.cpp`第 12 行）。您只能`main()`在命名空间之外拥有一个功能（即作为您的入口点）。

# php - k2 额外字段翻译问题

> ID：14309655
> 
> 赞同：1
> 
> 时间：2013-01-13T23:52:35.760
> 
> 标签：php, joomla, joomla1.5, joomla-extensions, joomla-k2

我有一个问题会摧毁我的想法......我不是 PHP 开发人员，所以我找不到任何方法来解决它......

我正在使用 K2（从 2.5.7 更新的 v 2.6.2）用于 CCK（带有大量自定义模板）和部署在 Joomla 1.5.26 安装上的 Joomfish（2.1.7）。

我正在使用以下代码（在我的模板中）以按名称（K2 2.5.7）获取我的个人 k2 额外字段：

```
$extraFld = array();
if ( $this->item->extra_fields ) {
  foreach ( $this->item->extra_fields as $key=>$extraField ) {
    $extraFld[ $extraField->name ] = $extraField->value;
   }
} 
```

然后我像这样取它：

```
echo "<li class=\"dinning-cuisine\"><span>" . JText::_('Cuisine') . "</span><br />" . $extraFld['Cuisine'] . "</li>\n"; 
```

但从 2.6.2 版本开始，可以选择直接获取额外的字段名称和值：

$this->item-extraFields->ALIASNAME->name $this->item-extraFields->ALIASNAME->value

如 K2 2.6.2 What is new 文档中所述。

问题如下：

我有一个希腊语（默认）和英语语言环境的双语网站。

我在默认语言环境“Πεδίο 1”中创建了一个别名为“field1”的额外字段

如果我尝试翻译它，我唯一的选择是将其名称翻译为“额外字段 1”（不同于其别名）...

然后在我的自定义模板中，如果我尝试像这样获取它：

```
$this->item->extraFields->field1->value 
```

只有希腊语言环境有效。在英语语言环境中，我收到一个 NULL 值！

有什么相关的经验和解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:28:27.473

尝试这样做：

**细绳：**

```
JText::_('CUISINE') //should always be Capital letters 
```

**翻译（语言文件）：**

```
CUISINE=Cuisine 
```

我不确定您使用哪个文件来翻译字符串，但是当您将此代码添加到模板 index.php 时，请将翻译字符串添加到**en-GB.tpl_tamplatename.ini**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:23:43.683

经过大量测试后，我认为在多语言网站中，使用别名检索单个额外字段值是行不通的。至少对于 Joomla 1.5 来说不是...

应该工作的代码是：

$this->item-extraFields->ALIASNAME->value

我有一个默认语言“希腊语”和第二语言“英语”的网站。

我有一个以希腊语“Πεδίο 1”命名的额外字段，别名为“field1”。

我已将这个额外的字段（使用 Joomfish）用英语翻译为“字段 1”...

如果我尝试使用以下方法获取其值：

$this->item-extraFields->field1->value

该代码仅适用于默认语言“希腊语”，但不适用于英语。

# graphics - 如何使从物体推进的弹丸向Unity3d中的特定点移动？

> ID：14309669
> 
> 赞同：2
> 
> 时间：2013-01-13T23:53:43.663
> 
> 标签：graphics, unity3d

我有一个移动的物体，当你按下 shift 键时，它会从它身上发射一个弹丸

我希望我的弹丸移动到特定点 (0,0,10)

我已经尝试了以下代码，但它不起作用

```
if (Input.GetKey("right shift")||Input.GetKey("left shift")) {
            Rigidbody clone;
            clone = Instantiate(projectile1, transform.position, transform.rotation) as Rigidbody;
            clone.velocity=new Vector3(0,0,10); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:03:52.267

如果您想要一个恒定的速度，请改用 MoveTowards：MoveTowards(pointA, pointB, delta) 在 pointA-pointB 线中返回一个点，与 pointA 相距较远的增量单位 - 并钳制到 pointB，因此它永远不会超出目标点。

```
if (Input.GetKey("right shift")||Input.GetKey("left shift")) {
            Rigidbody clone;
            clone = Instantiate(projectile1, transform.position, transform.rotation) as Rigidbody;
            clone.position = Vector3.MoveTowards(transform.position, new Vector3(0,0,10), Time.deltaTime * speed); } 
```

其中速度以米（或单位）每秒为单位。

# java - 通过属性 java 在列表中排序帖子

> ID：14309670
> 
> 赞同：0
> 
> 时间：2013-01-13T23:53:44.550
> 
> 标签：java, list, sorting, collections

是否可以间接排序 List 中的元素（在 Java 7 中）？假设列表元素是具有属性（Post 类型的属性）id、文本、时间戳（从 1970 年开始的毫秒 - 只是数字类型 long）的 post 元素。这些帖子存储在数据库（MySQL）中，它们是不同 SELECT 的结果。这是因为帖子是 twitter 上的推文——添加用户的帖子、用户关注的用户帖子以及其他一些帖子。这个想法是做一些选择，每个得到结果作为列表，这些列表将被添加到一个列表中，我想按属性（时间戳）排序。是否有任何简单的方法可以通过此属性（时间戳）间接排序（从高到低 - 拥有最新到最旧的帖子）？我知道 List 具有属性排序，我可能应该对此做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:56:49.707

您可能想要使用 a `Set`，更具体地说是 a [`SortedSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)（它的基本实现是 a [`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)），而不是 a `List`。但是，这将要求您的 post 类实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)自身。

当然，总是可以选择`ORDER BY`在数据库级别。这样您就可以使用经典的`List`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T23:56:08.890

您可以使用 Order By 子句查询数据库以按时间戳顺序获取结果，然后您不必在 java 端进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:56:28.313

有两种方法可以做到这一点。您可以通过使用`ORDER BY column`或使用可比较和比较器对对象进行排序来从查询中执行此操作。链接=

> [http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

# oop - 面向对象设计原则抽象

> ID：14309674
> 
> 赞同：3
> 
> 时间：2013-01-13T23:54:12.430
> 
> 标签：oop, abstraction, object-oriented-analysis

在阅读抽象时，我遇到了以下声明

“抽象仅捕获与当前视角相关的对象的那些细节”

例如。从驾驶员的角度来看，汽车类将是

```
 public class Car
  {
     void start();
     void applybrakes();
     void changegear();
     void stop();
   } 
```

从机械师的角度来看，汽车类将是

```
 public class Car
  {
     void changeOil();
     void adjustBrakes();
   } 
```

我的问题是，在设计系统时，我们是为一个用户视角（驾驶员或机械师）设计，还是我们可以为多个用户视角设计并根据用户类型进一步抽象？

希望我的问题很清楚。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:59:44.353

根据您的用例，您可能需要为多个用户设计。在您的示例中，如果您的汽车将由机械师和驾驶员使用，那么您不能只忽略一组用户。在这种情况下，您仍然可以使用接口抽象细节。

你可以这样设计你的对象：

```
interface IDrivable {
    void start();
    void applyBrakes();
    void changeGear();
    void stop();
}

interface IFixable {
    void changeOil();
    void adjustBrakes();
}

public class Car : IDrivable, IFixable {
    // implement all the methods here
} 
```

现在，当一个机械师想要这辆车时，你不给他一个`Car`对象，而是给他一个`IFixable`对象。同样，驱动程序得到一个`IDrivable`对象。这可以同时为两组用户保持相关的抽象。

```
class Driver {

    private IDrivable car;

    public Driver(IDrivable car) {
        this.car = car;
    }

    public driveCar() {
        this.car.start();
        this.car.accelerate();

        //this is invalid because a driver should not be able to do this
        this.car.changeOil();
    }
} 
```

同样，技工将无法访问接口中的方法`IDrivable`。

您可以在此处阅读有关[接口](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)的更多信息。尽管这是 MSDN 链接并使用 C#，但所有主要语言都支持接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:06:27.423

我认为您可能从“角度”推断得太多。我不会在这里将视角视为一个人或用户，而是一个有利位置。这里的视图概念可能甚至不是一个好的比喻。我们在这里真正谈论的是我们用来组成较大对象的较小对象之间的责任划分。

这个想法的重点是解耦和模块化。您需要可以拉出和替换的对象，而无需更改它们周围的一切。所以你希望你的对象是连贯的，因为它们的方法和变量是密切相关的。

在对象之间的接口-客户端关系方面，您可能能够从用户隐喻中获得一些信息。

# javascript - Internet Explorer 中的 mousemove 问题

> ID：14309678
> 
> 赞同：5
> 
> 时间：2013-01-13T23:54:39.223
> 
> 标签：javascript, internet-explorer

`<img>`当事件目标位于元素上方且缺少背景时，Internet Explorer 不会触发 onmousemove 事件。

但是当目标有背景时，它会注册事件。有人对此有解释吗？我在 IE10、IE9 和 IE8 中有相同的行为。

在这里小提琴：http: [//jsfiddle.net/xSpqE/2/](http://jsfiddle.net/xSpqE/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:45:50.957

正如 OP 询问的原因，这是我的突破：

视觉上更容易解释，所以首先让我们在`img`s 中添加一个点击处理程序：

```
$('img').click(function() {
  $('.pageX').text('img clicked!');
}); 
```

[**小提琴**](http://jsfiddle.net/xSpqE/25/)

很公平。您在 Chrome/Firefox/非 IE 浏览器中单击图像，因为绝对定位`div`覆盖它，所以什么都不会发生。

现在在IE上试试。的`img`点击处理程序被触发！因此，它表明 IE 通过绝对定位的“透明”（无内容或背景）元素推动元素。更有趣的是，相对定位的元素会遇到同样的问题，并且设置`z-index`任一/两个元素也不会解决它。当然，由于图像在叠加层之上，它不会触发叠加层的`mousemove`事件。

一种解决方法是为叠加层提供一些“填充”，例如`background:rgba(0,0,0,0)`将强制 IE 将绝对定位的元素保持在顶部。[**小提琴**](http://jsfiddle.net/xSpqE/26/)。如果您需要支持不支持 rgba 的浏览器，请使用 1x1px 透明 gif 作为背景。

我从未在任何规范中看到此定义，也从未正式报告为错误。没有内容或背景的绝对定位元素没有任何逻辑或理由遭受此 z-index 问题，因此我将其称为另一个 IE 错误。也许在[微软论坛](http://social.technet.microsoft.com/Forums/en/ieitprocurrentver/threads)上报告它会有用。

另外，相关问题：[IE bug: absolute-positioned element with a non-transparent background color](https://stackoverflow.com/questions/4378497/ie-bug-absolutely-positioned-element-with-a-non-transparent-background-colour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:31:23.440

又一个 IE 失败了！这更像是一种解决方法而不是答案，但它似乎工作正常：

```
var is_ie = $.browser.msie;
if(is_ie){
    $('.main img').mousemove(function(e){
        $('.pageX').text('pageX: '+e.pageX);
    }
} 
```

这是对`$('.overlay').mousemove`功能的补充，所以也要保留它，当然`is_ie`检查是可选的。

# apache-camel - Camel sftp 组件在升级后开始失败

> ID：14309679
> 
> 赞同：1
> 
> 时间：2013-01-13T23:54:41.820
> 
> 标签：apache-camel, jsch

我将骆驼从 2.8.0 升级到 2.10.3 版本，我的 sftp 组件开始失败。Afaik，sftp 组件默认使用逐步，并且在升级之前更改目录没有问题。

下面是我在骆驼/jsch 上看到的日志条目

> 20130113 15:28:54,509 INFO [Camel (camel-1) thread #0 - file://../test_outbound/] RemoteFileProducer[193]：连接并登录到：Endpoint[sftp://sftp-user@localhost /incoming?disconnect=true&privateKeyFile=xyz.ppk&privateKeyFilePassphrase= ****** ] 20130113 15:28:54,528 WARN [Camel (camel-1) thread #0 - file://../test_outbound/] RemoteFileProducer[71]: 写入文件失败与：无法将目录更改为：home 20130113 15:28:54,528 DEBUG [Camel (camel-1) thread #0 - file://../test_outbound/] RemoteFileProducer[86]：断开连接：端点 [sftp:// sftp-user@localhost/incoming?disconnect=true&privateKeyFile=xyz.ppk&privateKeyFilePassphrase= ******] 20130113 15:28:54,529 INFO [Camel (camel-1) thread #0 - file://../test_outbound/] SftpOperations$JSchLogger[259]: JSCH -> 从 localhost 端口 22 断开连接 20130113 15:28:54,529 INFO [连接线程 localhost 会话] SftpOperations$JSchLogger[259]: JSCH -> Caught an exception, 由于套接字关闭而导致主循环

不知道为什么会这样？任何想法表示赞赏，谢谢。

cd 适用于 v2.8.0

> 20130114 18:42:52,956 INFO [Camel (camel-1) thread #0 - sftp://user@host/outgoing] RemoteFileConsumer[133]：连接并登录到：sftp://user@host:22 20130114 18 :42:52,956 TRACE [Camel (camel-1) thread #0 - sftp://user@host/outgoing] SftpOperations [339]: getCurrentDirectory() 20130114 18:42:52,959 TRACE [Camel (camel-1) thread # 0 - sftp://user@host/outgoing] SftpConsumer [68]: doPollDirectory from absolutePath: 传出, dirName: null 20130114 18:42:52,959 TRACE [Camel (camel-1) thread #0 - sftp://user@主机/传出] SftpOperations [348]：changeCurrentDirectory（传出）20130114 18：42：52,959 TRACE [骆驼（camel-1）线程＃0 - sftp：//user@host/outgoing] SftpOperations [389]：更改目录：传出20130114 18:42:52,966 TRACE [骆驼 (camel-1) 线程 #0 - sftp://user@host/outgoing] SftpConsumer [81]：轮询目录：传出 20130114 18:42:52,966 TRACE [Camel (camel-1) thread #0 - sftp://user@host/outgoing] SftpOperations[415]: listFiles(.) 20130114 18:42:52,982 TRACE [Camel (camel-1) 线程 #0 - sftp://user@host/outgoing] SftpConsumer [94]：在目录中找到 2：传出 20130114 18:42:52,982 TRACE [Camel (camel-1) 线程 #0 - sftp： //user@host/outgoing] SftpOperations[348]: changeCurrentDirectory(/home/sftp-user) 20130114 18:42:52,982 TRACE [Camel (camel-1) thread #0 - sftp://user@host/outgoing] SftpOperations[389]：更改目录：/ 20130114 18:42:52,988 TRACE [Camel (camel-1) 线程 #0 - sftp://user@host/outgoing] SftpOperations[389]：更改目录：home 20130114 18:42 ：52,994 TRACE [骆驼（camel-1）线程＃0-sftp：//user@host/outgoing] SftpOperations [389]：更改目录：sftp-user 20130114 18:42：53,000 调试 [Camel (camel-1) 线程 #0 - sftp://user@host/outgoing] GenericFileConsumer[84]：轮询花费 0.044 秒：传出

并以 2.10.3 失败

> 20130114 19:15:53,530 INFO [Camel (camel-1) thread #0 - file://../test_outbound/] RemoteFileProducer[193]：连接并登录到：Endpoint[sftp://user@host/incoming ?disconnect=true&knownHostsFile=known_hosts&privateKeyFile=sftp-user.ppk&privateKeyFilePassphrase= ******&separator=Auto] 20130114 19:15:53,530 TRACE [Camel (camel-1) thread #0 - file://../test_outbound/] SftpOperations[305]: buildDirectory(incoming,false) 20130114 19:15:53,530 TRACE [骆驼 (camel-1) 线程 #0 - file://../test_outbound/] SftpOperations[372]: getCurrentDirectory() 20130114 19:15:53,670 TRACE [骆驼 (camel-1) 线程 #0 - 文件：/ /../test_outbound/] SftpOperations[381]: changeCurrentDirectory(/home/sftp-user) 20130114 19:15:53,670 TRACE [Camel (camel-1) thread #0 - file://../test_outbound/] SftpOperations [372]：getCurrentDirectory() 20130114 19:15:53,670 TRACE [Camel (camel-1) 线程 #0 - file://../test_outbound/] SftpOperations[430]：更改目录：\ 20130114 19:15:53,749 TRACE [Camel (camel-1) thread #0 - file://../test_outbound/] SftpOperations[430]: 改变目录: home 20130114 19:15:53,796 WARN [Camel (camel-1) thread #0 - file://../test_outbound/] RemoteFileProducer[71]：写入文件失败：无法将目录更改为：home

看起来分隔符很糟糕，但我尝试了所有 3 个选项（Windows、Unix、Auto）......没有一个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:23:33.837

被接受为错误并已修复，请参阅

[https://issues.apache.org/jira/browse/CAMEL-5970](https://issues.apache.org/jira/browse/CAMEL-5970)

# winrt-xaml - 当指针使用 winrt-xaml 在 Windows 商店应用程序中进入 ListView 时，如何启用滑动？

> ID：14309680
> 
> 赞同：1
> 
> 时间：2013-01-13T23:54:47.023
> 
> 标签：winrt-xaml

当在 ListView 中选择一个项目时，位于 ListView 右侧的 WebView 控件中会显示不同的内容。目前，我必须再次单击所选项目才能在列表中滑动。我希望通过简单地将鼠标指针悬停在 ListView 上滑动即可。我没有触摸屏。我正在使用带有触摸板的笔记本电脑，它可以理解滑动手势。

# objective-c - NStableview setDatasource EXC_BAD_ACCESS

> ID：14309685
> 
> 赞同：3
> 
> 时间：2013-01-13T23:55:11.173
> 
> 标签：objective-c, cocoa, nstableview

我试图使用 NSarray 创建一个带有 NSTableView 的简单菜单。当我将数据源设置为我创建的类时，我得到 EXC_BAD_ACCESS 错误。奇怪的是，它在 macruby 中工作？实现文件：

```
@implementation TableArray

- (id) init
{
    self = [super init];
    if(self) {
        arr = [NSArray arrayWithObjects:@"hey", @"what", @"there", nil];
    }
    return self;
}

- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView 
{
    return [arr count];
}

- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn      *)aTableColumn row:(NSInteger)rowIndex
{
    return [arr objectAtIndex:rowIndex];
}

@end 
```

标题：

```
@interface TableArray: NSObject <NSTableViewDataSource> {
   NSArray *arr;    
} 

- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView;
- (id) tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn  *)aTableColumn row:(NSInteger)rowIndex;
@end 
```

在应用程序委托中：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    TableArray *arr = [[TableArray alloc] init];
    [tv setDataSource:arr];
    [tv reloadData];
} 
```

和委托标头：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {
   IBOutlet NSTableView *tv;
}

@property (assign) IBOutlet NSWindow *window;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:54:32.670

我打赌你启用了 ARC（可能是 GC）。NSTableView 维护对其数据源的弱引用，而您没有维护对其数据源的强引用，因此 ARC 在您完成之前释放您的数据源。

请注意，像这样浮动的数据源非常罕见。它几乎可以肯定是应用程序控制层的一部分，因为数据源是表和底层数据存储之间的管道。

它可能在 MacRuby 下工作，因为代码略有不同或因为实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:50:09.477

知道你在哪里初始化 *tv 会很有用。我假设您已将其放置在一些在应用程序启动时加载的 NIB 文件中。
然后，您应该放入`IBOutlet NSTableView *tv;`一个 ViewController，最好是一个子类`UITableViewController`。tableView 参考/插座属于那里。此外，将 viewController 本身用作 dataSource 并在 Interface Builder 中建立连接会更容易。

# ruby-on-rails - 如何在模型中验证来自控制器的数据

> ID：14309688
> 
> 赞同：5
> 
> 时间：2013-01-13T23:56:16.807
> 
> 标签：ruby-on-rails, forms, validation, model-view-controller, activemodel

所以我有一些数据是从控制器中的另一个 Rails 应用程序中提取的，我们称之为 ExampleController，我想在允许向导进入下一步之前验证它是否存在于我的模型中，我不太清楚如何我应该这样做（**我知道直接从控制器获取这些数据到模型中违反 MVC 我正在寻找从控制器获取数据的最佳解决方法**）。数据必须来自控制器，因为获取它的方法包含在 ApplicationController 中，但是如果这更容易，我可以在 Awizard 控制器中执行此操作。（我也不能使用宝石）

**请对问题提出某种建议，而不是解释为什么这不是我已经意识到但不能以其他方式做的事情的正确方法。**

* * *

**示例控制器**

这是否应该呈现数据然后检查它在其他地方是否为空白？

```
class ExampleController < ApplicationController

  def valid_data?            
    data = #data could be nil or not
    if data.blank?
      return false
    else
      return true
  end

end 
```

* * *

**我的模型 - (models/awizard.rb)**

如何使用有效数据？示例控制器中的方法？在我的验证中。

```
class AWizard
include ActiveModel::Validations
include ActiveModel::Conversion
include ActiveModel::Dirty
include ActiveModel::Naming

#This class is used to manage the wizard steps using ActiveModel (not ActiveRecord)

attr_accessor :id
attr_writer :current_step  #used to write to current step
define_attribute_methods [:current_step] #used for marking change

validate :first_step_data, :if => lambda { |o| o.current_step == "step1" };

def first_step_data
  #What should i put here to check the valid_data? from the examplecontroller
end

def initialize(attributes = {})
   attributes.each do |name, value|
     send("#{name}=", value)
   end
end

def current_step
  @current_step || steps.first
end

def steps
  %w[step1 step2 step3] #make list of steps (partials)
end

def next_step
  current_step_will_change! #mark changed when moving stepped
  self.current_step = steps[steps.index(current_step)+1] unless last_step?
end

def previous_step
  current_step_will_change! #mark changed when moving stepped
  self.current_step = steps[steps.index(current_step)-1] unless first_step?
end

def first_step?
  current_step == steps.first
end

def last_step?
  current_step == steps.last
end

def all_valid?
  steps.all? do |step|
    self.current_step = step
    valid?
  end
end

def step(val)
  current_step_will_change!
  self.current_step = steps[val]
end

def persisted?
  self.id == 1
end

end 
```

* * *

还是我需要将此添加到此视图中？

**(/views/awizard/_step1.html.erb)**

```
<div class="field">
  <%= f.label 'Step1' %><br />
  #This is the step I want to validate
</div> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:16:56.903

我可能误解了这个问题，因为我的答案很简单。然而，这是一个不求助于元编程的解决方案，而是向导（它创建的类而不是对象）是一个单例/常量的事实。

```
class ExampleController < ApplicationController

  def valid_data?            
    data = #data could be nil or not
    result = data.blank?
    Awizard.valid_data= result
    result
  end

end

class Wizard
  cattr_accessor :valid_data

  def valid_data?
    self.class.valid_data
  end
end 
```

如果在使用通过 step_one 的向导之前必须调用课程 ExampleController#valid_data。

## 更新：关于全局状态问题的推理

（由@Valery Kvon 提出）

论点是 Wizard 对应用程序是全局的，@wizard 实例将依赖于全局状态，因此封装得不好。但是来自另一个站点的数据在您的应用程序范围内*是全局的。*因此，拥有数据的向导蜂并没有不匹配。相反，它可以被视为一个特征。

一个例子。奇才魔法只在满月时有效。应用程序 SkyReport 发送数据：

```
:full_moon => true 
```

如果他们需要继续其权力的第 2 步，它会影响第 1 阶段中的所有巫师。因此依赖全局状态`Wizard.valid_data?`正是我们想要的......

*但是*，如果每个向导都有来自 Gandalf 应用程序的个人消息，那么我们将要强制调用 Gandalf 的数据，但解决方案更简单：

```
# in example_controller.rb
before_filter :set_wizard_data, :only => [:create, :update]
....
def set_wizard_data
  @wizard = Wizard.find params[:id]
  @wizard.valid_data= valid_data
end 
```

但这再次意味着 Gandalf.app 知道（某些）@wizard 并且从问题的呈现方式来看，来自其他站点的数据非常不可知！

这里的问题是我们对应用程序、它的要求和底层逻辑了解不够，无法决定什么是好或不好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:06:57.443

与模型共享控制器级别数据的唯一方法是通过外部访问器。使用元编程，您可以欺骗将其传递给模型实例的方式。

# 控制器

```
def valid_data?            
  data = #data could be nil or not
  result = data.blank? ? false : true
  instance_eval <<-EOV
    def AWizard.new(*args)
      super(*args).tap {|aw| aw.external_valid = #{result}}
    end
  EOV
  result
end 
```

# 模型

```
class AWizard
  attr_accessor :external_valid

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  validate :first_step_data, :if => lambda { |o| o.current_step == "step1" };

  def first_step_data
    # :external_valid would be true or false according to a valid_data?. Nil would be if valid_data? has not been called
    if external_valid == false
      errors.add ...
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:22:56.230

所以我尝试编辑并添加到@charlysisto 问题，因为这最接近答案，但它不起作用所以这是我使用的解决方案，正如建议的答案是将数据从控制器发送到模型（虽然使用视图调用控制器方法遗漏的答案）这是我的解决方案

**模型**- 模型/awizard.rb

```
class Awizard
  include ActiveModel::Validations

  cattr_accessor :valid_data

  validate :data_validation :if => lambda { |o| o.current_step == "step1" }

  def data_validation
    if self.valid_data == false || self.valid_data.blank?
      errors.add(:valid_data, "not found")
    end
  end

  #Other wizard stuff

end 
```

**查看**- 向导/_step1.html.erb

```
<div class="field">
  <% f.label "valid data? %>
  <% @_controller.valid_data %> #Call controller method to send data to model
</div> 
```

**控制器**

```
class AwizardController < ApplicationController

  def valid_data
    data = #data from elsewhere
    if !data.blank?
      Awizard.valid_data = true
    else
      Awizard.valid_data = false
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:50:34.710

您可以将来自控制器的数据作为参数传递给模型中的验证方法。

在你的模型/awizard.rb

```
def valid_for_step_one?(some_external_data)
  #validation logic here
end 
```

这样在您的控制器中，您可以调用：

```
model.valid_for_step_one?(data_from_controller) 
```

如果您可以描述您从控制器获得的数据，那也是很好的。它与模型向导有什么关系？

因为另一种选择是将外部数据设置为模型的属性。然后您可以从那里在您的验证功能中使用它。

# postgresql - Heroku 运行 rake db:seed 无法删除数据库错误

> ID：14309689
> 
> 赞同：1
> 
> 时间：2013-01-13T23:56:27.547
> 
> 标签：postgresql, heroku, rake

在本地播种良好的 Rails 应用程序不会在 Heroku 上播种。

*   它会做一个成功的`heroku pg:reset HEROKU_POSTGRESQL_BLACK_URL`
*   它会做一个成功的`heroku run db:migrate`
*   它会成功`heroku run rake db:migrate:status`（一切看起来都不错）

应用程序运行，但不会播种。

它不会成功`db:seed`

错误是：

```
dbcuqurj68jdre already exists
Couldn't drop dbcuqurj68jdre : #<PG::Error: FATAL:  permission denied for database "postgres"
DETAIL:  User does not have CONNECT privilege. 
```

无法弄清楚那个，因为我能够完成全部

```
heroku pg:reset HEROKU_POSTGRESQL_BLACK_URL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:24:10.617

通过更新我们的 seed.rb 文件来解决。...我们错过了伪造的宝石。

# iframe - 是否可以有一个没有背景的（iframed）SoundCloud 小部件？

> ID：14309696
> 
> 赞同：1
> 
> 时间：2013-01-13T23:57:11.097
> 
> 标签：iframe, widget, soundcloud

我正在尝试做一个真正最小的播放器——只有一个播放按钮，另一个按钮可以放大到一个全尺寸的播放器。（[小提琴](http://jsfiddle.net/sprugman/zsUBK/)。）

据我所知，没有办法摆脱按钮后面的白色背景。（在实际情况下，背景是带纹理的图像，因此仅将 iframe 的 bg 颜色更改为其他纯色将不如拥有透明（无边框）小部件理想。

小提琴代码：

HTML

```
<div id="player-controls"><a href="#zoom" onclick="$('#player-container').toggleClass('enlarged'); return false"><span>zoom player</span></a></div>
<div id="player-container">
  <iframe width="450" height="450" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fplaylists%2F3036975"></iframe>
</div> 
```

CSS

```
body {
  position: relative;
  background: black;
  margin: 10px
}

#player-container {
  position: absolute;
  top: 1.5em;
  height: 36px;
  width: 36px;
  overflow: hidden;
  transition: width, height;
  transition-duration: .5s;
  -webkit-transition: width, height;
  -webkit-transition-duration: .5s;
  -moz-transition: width, height;
  -moz-transition-duration: .5s;
  -o-transition: width, height;
  -o-transition-duration: .5s;
}
#player-container.enlarged {
  width: 450px;
  height: 450px;
}
#player-container iframe {
  position:absolute;
  top: -11px;
  left: -177px;
  transition: top, left;
  transition-duration: .5s;
  -webkit-transition: top, left;
  -webkit-transition-duration: .5s;
  -moz-transition: top, left;
  -moz-transition-duration: .5s;
  -o-transition: top, left;
  -o-transition-duration: .5s;
}
#player-controls {
  position: absolute;
  top: 0;
}
#player-controls a {
  color: white;
}
#player-container.enlarged iframe {
  top: 0;
  left: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-23T16:39:51.270

那家伙使用 SoundCloud API、一些 JavaScript 和 CSS [http://codepen.io/nickcolley/pen/uoCIy找到了一个“hacky”解决方案](http://codepen.io/nickcolley/pen/uoCIy)

```
$(document).ready(function(){

  var player = SC.Widget($('iframe.sc-widget')[0]);
  var pOffset = $('.player').offset();
  var pWidth = $('.player').width();
  var scrub;

  player.bind(SC.Widget.Events.READY, function() {
    setInfo();
    player.play();
  }); //Set info on load

  player.bind(SC.Widget.Events.PLAY_PROGRESS, function(e) {
    if( e.relativePosition < 0.003 ) { setInfo(); }
    //Event listener when track is playing
    $('.position').css('width', ( e.relativePosition*100)+"%");
  });

   $('.player').mousemove(function(e){ //Get position of mouse for scrubbing
    scrub = (e.pageX-pOffset.left);
  });

  $(document).on('keydown', function(e){
    switch(e.keyCode){
      case 32:
        player.toggle(); 
      break;
      case 39:
        player.next();
      break;
      case 37:
        player.prev();
      break;
    }
  });

  $('.player').click(function(){ //Use the position to seek when clicked
    $('.position').css('width',scrub+"px");
    var seek = player.duration*(scrub/pWidth); 

    //Seeking to the start would be a previous?
    if ( seek < player.duration * .05 ) {
      player.prev();
    } else if ( seek > player.duration * .99 ) {
      player.next();
    } else {      
      player.seekTo(seek);
    }

  });

   function setInfo() {
    player.getCurrentSound(function(song) {
      console.log(song);

      $('.waveform').css('background-image', "url('" + song.waveform_url + "')");    
      $('.player').css('background-image', "url('" + song.artwork_url.replace('-large', '-t500x500') + "')");

      var info = song.title;
      $('.info').html(info);

      player.current = song;
    });

    player.getDuration(function(value){
      player.duration = value;
    });

    player.isPaused(function(bool){
      player.getPaused = bool;
    });
  }   

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:41:28.623

不，不幸的是，目前不可能有自定义和透明背景。

# ruby-on-rails-3 - 使用 Rails 搜索进行地理编码

> ID：14309702
> 
> 赞同：4
> 
> 时间：2013-01-13T23:57:49.233
> 
> 标签：ruby-on-rails-3, geolocation

我一直在使用 Google Maps API 进行一些基于位置的搜索（对我而言，这更像是一个结构性问题，而不是对映射 api 的任何批评）

例如，如果用户搜索“加拿大维多利亚”，它将按预期显示“加拿大维多利亚”的结果。但是，如果用户搜索“加拿大”，Google 会返回该国中部的经度和纬度，这对于正确居中地图至关重要。但是，它不会显示任何结果，因为最近的位置距离 google 返回的位置太远。我正在过滤掉大约 20 英里外的结果。

Google Maps API 能否返回任何我可以用来判断用户是否输入了州或国家/地区名称的信息？如果没有，是否有人开发了解决方案？

理想情况下，我想避免仅按最近的位置对结果进行排序。当用户搜索“美国”时，我不希望“西班牙”的项目出现在列表底部。我会尝试在搜索之前确定查询是州还是国家，但鉴于国家和地区名称的可能拼写不同，这似乎是一项非常艰巨的任务。如果我只期待英文拼写，那将是一种更容易的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:37:38.290

假设这是一个站点上的表单，它有一个控制器解析表单并将请求发送到 Google 的 API，您可以将表单分解为地址、城市、州和国家/地区（如果需要）表单元素，然后生成地址和城市必填字段。

我正在使用 Google Places API 构建的网站采用类似的方法，它似乎对我有用。

# python - 从主窗口传递参数到弹出的Qdialog窗口

> ID：14309703
> 
> 赞同：1
> 
> 时间：2013-01-13T23:57:49.880
> 
> 标签：python, python-2.7, pyqt, pyqt4

我有从主窗口打开的 Qdialog：

```
Dialog = myDialog(self) 
```

这是新打开的对话框中的代码：

```
class myDialog(QtGui.QDialog, Ui_DialogCalibration):
def __init__(self, parent=None):
    super(myDialog, self).__init__(parent)
    self.setupUi(self) 
```

如何将参数（lint）从主窗口传递到这个新窗口，比如

```
Dialog = myDialog(self, listInformation) 
```

然后在 myDialog 类中使用该列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:23:48.557

```
class myDialog(QtGui.QDialog, Ui_DialogCalibration):
    def __init__(self, parent=None, listInfo):
        super(myDialog, self).__init__(parent)
        self.listInfo = listInfo
        self.setupUi(self) 
```

然后，当您创建 时`myDialog`，您可以将列表添加为参数。当你需要在你的内部使用它时`myDialog`，你可以将它作为`self.listInfo`.

**编辑：**进一步扩展评论：

如果你有`def __init__(self, parent=None, listInfo=None)`，你会称它为`Dialog = myDialog(parent=self, listInfo=listInfo)`. 如果你有它，`def __init__(self, parent, listInfo)`你会做`Dialog = myDialog(self, listInfo)`的。希望你能看到这里的模式。

# ruby-on-rails - rails heroku 部署错误：预编译资产

> ID：14309716
> 
> 赞同：1
> 
> 时间：2013-01-14T00:00:00.340
> 
> 标签：ruby-on-rails, deployment, heroku

我的 rails 应用程序在 localhost 中运行良好，但未能在 heroku 上部署。我已经搜索/尝试了与资产预编译相关的原因（例如：heroku run rake assets:precompile），但显然这些方法似乎没有给出任何积极的结果。

这是heroku日志

```
``2013-01-13T23:21:36+00:00 app[web.1]:         Called from: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.
2013-01-13T23:21:36+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-01-13T23:21:36+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-01-13T23:21:37+00:00 app[web.1]: [2013-01-13 23:21:37] INFO  WEBrick 1.3.1
2013-01-13T23:21:37+00:00 app[web.1]: [2013-01-13 23:21:37] INFO  WEBrick::HTTPServer#start: pid=2 port=17458
2013-01-13T23:21:37+00:00 app[web.1]: [2013-01-13 23:21:37] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-01-13T23:21:37+00:00 heroku[web.1]: State changed from starting to up
2013-01-13T23:21:38+00:00 heroku[web.1]: Process exited with status 137
2013-01-13T23:21:39+00:00 app[web.1]: 
2013-01-13T23:21:39+00:00 app[web.1]: 
2013-01-13T23:21:39+00:00 app[web.1]: => Call with -d to detach
2013-01-13T23:21:39+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:17458
2013-01-13T23:21:39+00:00 app[web.1]: => Booting WEBrick
2013-01-13T23:21:39+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-01-13T23:21:39+00:00 app[web.1]: Started GET "/" for 81.83.230.107 at 2013-01-13 23:21:39 +0000
2013-01-13T23:21:39+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-01-13T23:21:39+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2013-01-13T23:21:39+00:00 app[web.1]:   Rendered static_pages/home.html within layouts/application (29.9ms)
2013-01-13T23:21:39+00:00 app[web.1]: Completed 500 Internal Server Error in 73ms
2013-01-13T23:21:39+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "bootstrap-responsive", :media => "all" %>
2013-01-13T23:21:39+00:00 heroku[router]: at=info method=GET path=/ host=safe-plateau-7008.herokuapp.com fwd=81.83.230.107 dyno=web.1 queue=0 wait=0ms connect=1ms service=869ms status=500 bytes=643
2013-01-13T23:21:39+00:00 app[web.1]: ActionView::Template::Error (bootstrap-responsive.css isn't precompiled):
2013-01-13T23:21:39+00:00 app[web.1]:     3: <head>
2013-01-13T23:21:39+00:00 app[web.1]: 
2013-01-13T23:21:39+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2013-01-13T23:21:39+00:00 app[web.1]:     9: 
2013-01-13T23:21:39+00:00 app[web.1]:     4:   <title>Leanbrewsite</title>
2013-01-13T23:21:39+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2013-01-13T23:21:39+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___3282064974730572949_33935860'
2013-01-13T23:21:39+00:00 app[web.1]: 
2013-01-13T23:21:39+00:00 app[web.1]: 
2013-01-13T23:21:39+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2013-01-13T23:26:47+00:00 heroku[slugc]: Slug compilation started
2013-01-13T23:27:04+00:00 heroku[api]: Release v13 created by didier@leanbrew.com
2013-01-13T23:27:04+00:00 heroku[api]: Deploy 197fc85 by didier@leanbrew.com
2013-01-13T23:27:04+00:00 heroku[web.1]: State changed from up to starting
2013-01-13T23:27:05+00:00 heroku[slugc]: Slug compilation finished
2013-01-13T23:27:07+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-01-13T23:27:08+00:00 app[web.1]: [2013-01-13 23:27:08] ERROR SignalException: SIGTERM
2013-01-13T23:27:08+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-01-13T23:27:11+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 56864`
2013-01-13T23:27:18+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-01-13T23:27:18+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-01-13T23:27:18+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-01-13T23:27:18+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-01-13T23:27:20+00:00 heroku[web.1]: Process exited with status 137
2013-01-13T23:27:23+00:00 app[web.1]:         SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
2013-01-13T23:27:23+00:00 app[web.1]:         This poses a security threat. It is strongly recommended that you
2013-01-13T23:27:23+00:00 app[web.1]:         provide a secret to prevent exploits that may be possible from crafted
2013-01-13T23:27:23+00:00 app[web.1]:         cookies. This will not be supported in future versions of Rack, and
2013-01-13T23:27:23+00:00 app[web.1]: 
2013-01-13T23:27:23+00:00 app[web.1]:         future versions will even invalidate your existing user cookies.
2013-01-13T23:27:23+00:00 app[web.1]:         Called from: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.
2013-01-13T23:27:23+00:00 app[web.1]: 
2013-01-13T23:27:25+00:00 app[web.1]: [2013-01-13 23:27:25] INFO  WEBrick 1.3.1
2013-01-13T23:27:25+00:00 app[web.1]: [2013-01-13 23:27:25] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-01-13T23:27:25+00:00 app[web.1]: [2013-01-13 23:27:25] INFO  WEBrick::HTTPServer#start: pid=2 port=56864
2013-01-13T23:27:28+00:00 heroku[web.1]: State changed from starting to up
2013-01-13T23:27:29+00:00 app[web.1]: => Booting WEBrick
2013-01-13T23:27:29+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:56864
2013-01-13T23:27:29+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-01-13T23:27:29+00:00 app[web.1]: => Call with -d to detach
2013-01-13T23:27:29+00:00 app[web.1]: 
2013-01-13T23:27:29+00:00 app[web.1]: 
2013-01-13T23:27:29+00:00 app[web.1]: Started GET "/" for 81.83.230.107 at 2013-01-13 23:27:29 +0000
2013-01-13T23:27:31+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-01-13T23:27:35+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2013-01-13T23:27:36+00:00 app[web.1]:   Rendered static_pages/home.html within layouts/application (246.2ms)
2013-01-13T23:27:36+00:00 app[web.1]: Completed 500 Internal Server Error in 948ms
2013-01-13T23:27:36+00:00 app[web.1]: 
2013-01-13T23:27:36+00:00 app[web.1]: 
2013-01-13T23:27:36+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2013-01-13T23:27:36+00:00 app[web.1]: 
2013-01-13T23:27:36+00:00 app[web.1]: ActionView::Template::Error (bootstrap-responsive.css isn't precompiled):
2013-01-13T23:27:36+00:00 app[web.1]:     4:   <title>Leanbrewsite</title>
2013-01-13T23:27:36+00:00 app[web.1]:     3: <head>
2013-01-13T23:27:36+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2013-01-13T23:27:36+00:00 app[web.1]:     9: 
2013-01-13T23:27:36+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "bootstrap-responsive", :media => "all" %>
2013-01-13T23:27:36+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2013-01-13T23:27:36+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___2492136347222149984_29076580'
2013-01-13T23:27:36+00:00 heroku[router]: at=info method=GET path=/ host=safe-plateau-7008.herokuapp.com fwd=81.83.230.107 dyno=web.1 queue=0 wait=8ms connect=23ms service=7130ms status=500 bytes=643
2013-01-13T23:38:35+00:00 app[web.1]: 
2013-01-13T23:38:35+00:00 app[web.1]: Started GET "/" for 81.83.230.107 at 2013-01-13 23:38:35 +0000
2013-01-13T23:38:35+00:00 app[web.1]: 
2013-01-13T23:38:35+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2013-01-13T23:38:35+00:00 app[web.1]:   Rendered static_pages/home.html within layouts/application (0.3ms)
2013-01-13T23:38:35+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2013-01-13T23:38:35+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2013-01-13T23:38:35+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2013-01-13T23:38:35+00:00 app[web.1]:     3: <head>
2013-01-13T23:38:35+00:00 app[web.1]: 
2013-01-13T23:38:35+00:00 app[web.1]: ActionView::Template::Error (bootstrap-responsive.css isn't precompiled):
2013-01-13T23:38:35+00:00 app[web.1]:     4:   <title>Leanbrewsite</title>
2013-01-13T23:38:35+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2013-01-13T23:38:35+00:00 app[web.1]:     9: 
2013-01-13T23:38:35+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___2492136347222149984_29076580'
2013-01-13T23:38:35+00:00 app[web.1]: 
2013-01-13T23:38:36+00:00 heroku[router]: at=info method=GET path=/ host=safe-plateau-7008.herokuapp.com fwd=81.83.230.107 dyno=web.1 queue=0 wait=0ms connect=9ms service=25ms status=500 bytes=643
2013-01-13T23:38:35+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "bootstrap-responsive", :media => "all" %>
2013-01-13T23:38:35+00:00 app[web.1]:
`` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:39:43.707

Rails 默认只创建一个 application.js 和一个 application.css。如果你想要多个目标文件，不知道你是怎么做的！

看起来您已经设置好只生成一个 application.js 和一个 application.css 文件。因此，所有引导程序都将在您的 application.css 中，这意味着我认为您不需要单独包含引导程序 css。尝试删除 boostrap css 标签，看看会发生什么。

如果这不起作用，我会查看公共/资产。Rails 对您的 application.js 和 application.css 很满意，我怀疑这是因为它们存在于 public/assets 中，而 bootstrap-responsive.css 不存在。所以这就是我开始调试的地方。

# php - 防止 PHP 打开 documentroot 以上的文档

> ID：14309719
> 
> 赞同：0
> 
> 时间：2013-01-14T00:00:18.903
> 
> 标签：php, permissions, document-root

希望有人可以对此有所了解。

我的 php 脚本目前可以通过使用诸如 require_once(../../passowrds.php); 之类的相对路径打开文档根目录上方的文件；

1）无论如何强制在文档根目录上方打开绝对路径？

2）访问文档根目录以上文件的最安全方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T00:01:36.457

> 无论如何要强制在文档根目录上方打开绝对路径？

我将其解释为“是否可以使用相对路径来防止以上 docroot 访问？”。答案是：据我所知，没有手动验证路径字符串（寻找过多的“..”等）

> 访问文档根目录上方文件的最安全方法是什么？

这取决于您对“最安全”的定义；你的情况是什么，这可能会导致问题？

但是，一个好的开始是验证控制它的任何用户输入，而不是简单地执行例如`require_once($_GET["file"])`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T00:23:33.280

写入要求文件的最安全方法**$a = 'samplevalue';** 和上面写的哪个passowrds.php； **if($a != 'samplevalue'){ header('位置：[http](http://www.example.com/) ://www.example.com/ '); }**

**密码.php：**

```
if($r_key != 'a23b24c25samplekey' or empty($r_key)){ header('Location: http://www.example.com/'); exit(); } // r_key not equal a23b24c25samplekey or empty forward main page
bla.. bla.. bla.. 
```

**示例.php：**

```
 $r_key = 'a23b24c25samplekey';
  require_once(../../passowrds.php); 
```

并且可以用于相对路径；

```
 $path = $_SERVER['DOCUMENT_ROOT'];
   $path .= "/yourfolder/passowrwds.php";
   require_once($path); 
```

要求一次（../../passowrds.php）；比 $path = $_SERVER['DOCUMENT_ROOT']; 最安全 $path .= "/yourfolder/passowrwds.php"; 需要一次（$路径）；

# ruby-on-rails - 在rails中添加两个数据库条目的表单

> ID：14309721
> 
> 赞同：1
> 
> 时间：2013-01-14T00:00:36.250
> 
> 标签：ruby-on-rails

我正在尝试使用两种类型的数据创建一个数据库。

1) 具有自身属性（例如地址）的公寓楼 2) 具有自身属性（例如价格、大小）的单元（属于建筑物）

我想知道我是否可以为两个数据库提供一个包含表单的页面？

前任。创建新建筑的表格，并直接在页面上添加新的单元信息。

```
<%= form_for(@building) do |f| %>

  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.label :address %>
  <%= f.text_field :address %>

  <%= f.label :contact %>
  <%= f.email_field :contact %>
  <br>
      <%= form_for(@unit) do |f| %>

  <%= f.label :bedrooms %>
  <%= f.text_field :bedrooms %>

  <%= f.label :price %>
  <%= f.text_field :price %>

  <%= f.label :building_id %>
  <%= f.text_field :building_id %>
  <br>
  <%= f.submit "Create building", class: "btn btn-large btn-primary" %>
<% end %>   
<% end %> 
```

但我知道这只会创建新建筑，而不是与它们相关的单位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:36:32.710

您不能在表单中包含表单 - 您必须使用所谓的[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

我假设一个建筑物有很多单元，一个单元属于一个建筑物。那么你的代码需要如下：

## 建造

```
class Building < ActiveRecord::Base
  attr_accessible :units_attributes
  has_many :units, :dependent => :destroy
  accepts_nested_attributes_for :units, :reject_if => lambda { |a| a[:bedrooms].blank? }, :allow_destroy => true
end 
```

## 单元

```
class Unit < ActiveRecord::Base
  belongs_to :building
end 
```

## 形式

注意`fields_for`表单助手（非常不言自明）：将以下内容放入表单中：

```
<%= f.fields_for :units do |builder| %>
  <%= builder.label :bedrooms %>
  <%= builder.text_field :bedrooms %>
  # etc
<% end %> 
```

当您重新加载页面时，您会看到您的表单可能还没有包含任何单位字段。这是因为表单内的建筑实例还没有任何单位 - 在控制器中执行以下操作以查看单位字段：

```
3.times { @building.units.build } 
```

现在您应该在表单中看到三组单位字段。如果您填写并提交表格，它们将被保存为该建筑物的子级 - 如果您将它们留空，它们将不会。`:reject_if => lambda { |a| a[:bedrooms].blank? }`建筑模型内部负责处理：如果卧室字段留空，则不会保存单元。

这就是你所需要的！

如果这有点太快了，看看[这个 railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)。

此外，查看这个名为[nested_forms](https://github.com/ryanb/nested_form)的很棒的 gem ，它为您提供了动态添加和删除嵌套表单字段的链接（允许您摆脱控制器中繁琐的额外行）。

# ruby-on-rails - rails 3系统命令不起作用

> ID：14309725
> 
> 赞同：3
> 
> 时间：2013-01-14T00:01:17.197
> 
> 标签：ruby-on-rails, system

这是问题所在。在开发中的 Rails 控制器中运行“系统”命令时，它的行为与预期的一样，在生产中运行命令时它不执行任何操作。

例如以下命令：

```
system 'rails g migration user_generated_migration' 
```

甚至：

```
system 'ls' 
```

在本地（开发中）工作，但在服务器（生产环境）上，他们什么都不做。

我是否在配置文件中遗漏了一些东西，production.rb 可能吗？还是应该在服务器上启用一些东西？

**更新：**

生产环境是默认设置，可能对缓存的处理方式有显着变化：

```
config.cache_store = :dalli_store, ENV['MEMCACHE_SERVERS'] 
```

它通过乘客在 apache 服务器上运行。我怀疑这与apache用户拥有什么权利有关？我在服务器领域没有太多经验，所以我不知道要给你什么确切的细节。

# php - Google-api-php 刷新令牌返回 invalid_grant

> ID：14309726
> 
> 赞同：8
> 
> 时间：2013-01-14T00:01:19.003
> 
> 标签：php, google-api, google-api-php-client

我几乎搜索了谷歌第一页的所有结果。但似乎找不到答案。我正在使用 Google API 的 refresh_token 并收到：

```
Error refreshing the OAuth2 token, message: '{ "error" : "invalid_grant" } 
```

我在做什么。第一：我正在创建并存储到 google api 的持久连接：

```
$client = new Google_Client();
$client->setClientId('xxxxxx-s73q0pa41aq3i2kcpatmpas6e6kkp99h.apps.googleusercontent.com');
$client->setClientSecret('xxxxxxxxxxxx');
$client->setRedirectUri('http://xxxxxxxx/generaterefreshtoken.php');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));
$client->setAccessType('offline');

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['token']);
  $client->revokeToken();
}

if ($client->getAccessToken()) {

    $jsonarray = json_decode($client->getAccessToken());
    $arrGoogleAuth['access_token']=$jsonarray->access_token;
    $arrGoogleAuth['refresh_token']=$jsonarray->refresh_token;
    //filewrite

    $myFile = "refreshtoken.conf";
    $fh = fopen($myFile, 'w') or die("can't open file");
    fwrite($fh, $client->getAccessToken());
    fclose($fh);

    /*

    die();

    $service = new Google_DriveService($client);
    $file = new Google_DriveFile();
    $file->setTitle('My document.txt');
    $file->setDescription('A test document');
    $file->setMimeType('text/plain');

    $data = file_get_contents('document.txt');

    $createdFile = $service->files->insert($file, array(
          'data' => $data,
          'mimeType' => 'text/plain',
        ));

    print_r($createdFile);
*/

  // The access token may have been updated lazily.
  $_SESSION['token'] = $client->getAccessToken();
} else {
  $auth = $client->createAuthUrl();
  header("Location: $auth");
} 
```

所以基本上一切都会运行，并且令牌存储在文本文件中：

```
{
"access_token":"xxxxxxxxxxxxxxxN4U0ys2wy5monxs0Xh5fu5ayKL0OIENo-d1sN6g3YA",
"token_type":"Bearer",
"expires_in":3600,
"refresh_token":"xxxxxxxxxxxxDON-l90BNUcJgnkfZWDfg",
"created":1358120143
} 
```

当我尝试使用以下代码进行身份验证时：

```
$client = new Google_Client();
$client->setClientId($googleDriveConfig['clientid']);
$client->setClientSecret($googleDriveConfig['clientsecret']);
$client->setRedirectUri(curPageURL);
$client->setScopes(array('https://www.googleapis.com/auth/drive'));
$client->refreshToken(file_get_contents('../_config/refreshtoken.conf'));
$client->authenticate(); 
```

我收到以下错误：刷新 OAuth2 令牌时出错，消息：'{“error”：“invalid_grant”}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-24T18:50:49.280

如果您在令牌未过期时尝试刷新，您将收到“invalid_grant”错误。

而不是这个：

```
$client->refreshToken(file_get_contents('../_config/refreshtoken.conf')); 
```

用这个：

```
$client->setAccessToken(file_get_contents('../_config/refreshtoken.conf')); 
```

一旦你的令牌过期，你刷新应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T07:30:00.473

invalid_grant 表示授权码已被使用（在 中可用`$GET['code']`）或在 Google API 控制台中配置的应用程序类型无效。

在 Google API 控制台中注册您的应用程序时，请确保选择“Web 应用程序”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T10:20:36.417

对我有用的功能如下

$client->setAccessType("refresh_token");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T03:38:10.390

我遇到了类似的问题，对我来说问题是我的系统时钟（在我运行代码的 Docker VM 内部）与实时不同步。因此，您请求的令牌的创建日期在过去或将来太远，而 OAuth 将拒绝该令牌。

[我是从这里](https://stackoverflow.com/a/36201957/426794)的报告中得知的。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-05-21T16:19:34.703

在进行身份验证之前，必须有如下内容：

```
$client->grantType("refresh_token") 
```

# calendar - 在 rails 3.2.9 中使用 simple_calendar gem 时出现错误

> ID：14309728
> 
> 赞同：1
> 
> 时间：2013-01-14T00:01:32.863
> 
> 标签：calendar, gem, ruby-on-rails-3.2

我想通过 gem包含[simple_calendar 。](https://github.com/excid3/simple_calendar)gem 在我的 gemfile 中。

我将这段代码写到我的视图中：

```
<%= calendar @events do |event| %>
  <div><%= link_to event.title, event %></div>
<% end %> 
```

和模型中的这段代码

```
attr_accessible :event_start_time

def start_time
  event_start_time
end 
```

调用视图我收到此错误消息

```
undefined method `sunday?' for Tue, 01 Jan 2013:Date 
```

今天不是 1 月 1 日，而是 1 月 14 日（我对这个错误消息感到困惑）

有没有人为我的问题提供解决方案？

非常感谢，

皮特

# html - 如何使导航栏全宽

> ID：14309729
> 
> 赞同：6
> 
> 时间：2013-01-14T00:01:34.267
> 
> 标签：html, css

我想让我的导航栏延伸到浏览器的边缘。我可以通过按像素指定宽度来做到这一点，但是当我让 width="100%" 它不起作用+它在底部显示滚动条.....所以我怎样才能让它伸展到窗口大小水平浏览器？

**这是** [演示](http://www.henny.bugs3.com/test.php/)

```
<html>
<head>

<style type="text/css">

body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
#nav {
    float: left;
    font: bold 12px Arial, Helvetica, Sans-serif;
    border: 1px solid #121314;
    border-top: 1px solid #2b2e30;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 0px;
    overflow: hidden;
    width:100%;

}

#nav ul {
    margin:0;
    padding:0;
    list-style:none;
}

#nav ul li {
    float:left;
}

#nav ul li a {
    float: left;
    color:#d4d4d4;
    padding: 15px 97px;
    text-decoration:none;
    background:#3C4042;
    background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(59,63,65)), color-stop(0.55, rgb(72,76,77)), color-stop(0.78, rgb(75,77,77)) );
    background: -moz-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
    background: -o-linear-gradient( center bottom, rgb(59,63,65) 9%, rgb(72,76,77) 55%, rgb(75,77,77) 78% );
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1) inset, 0 0 5px rgba(0, 0, 0, 0.1) inset;
    border-left: 1px solid rgba(255, 255, 255, 0.05);
    border-right: 1px solid rgba(0,0,0,0.2);
    text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.6);
}

#nav ul li a:hover,
#nav ul li:hover > a {
    color: red;
    background:#3C4042;
    background: -webkit-gradient( linear, left bottom, left top, color-stop(0.09, rgb(77,79,79)), color-stop(0.55, rgb(67,70,71)), color-stop(0.78, rgb(69,70,71)) );
    background: -moz-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
    background: -o-linear-gradient( center bottom, rgb(77,79,79) 9%, rgb(67,70,71) 55%, rgb(69,70,71) 78% );
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2), 0 -1px #000;

}

#nav li ul a:hover, 
#nav ul li li:hover > a  {
color: #2c2c2c;
    background: #5C9ACD;
    background: -webkit-gradient( linear, left bottom, left top, color-stop(0.17, rgb(61,111,177)), color-stop(0.51, rgb(80,136,199)), color-stop(1, rgb(92,154,205)) );
    background: -moz-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
    background: -o-linear-gradient( center bottom, rgb(61,111,177) 17%, rgb(80,136,199) 51%, rgb(92,154,205) 100% );
    border-bottom: 1px solid rgba(0,0,0,0.6);
    border-top: 1px solid #7BAED9;
    text-shadow: 0 1px rgba(255, 255, 255, 0.3);
}

 #nav li:hover ul {
    left: auto;
}

#nav li li:hover ul {
    visibility:visible;
}

</style>
</head>
<body>
<div id="nav" > 
<ul > 
<li width="300px" ><a href="#">Home</a></li> 
<li><a href="#">Sell</a> 

<li><a href="#">Services</a> 

<li><a href="#">Contact Us</a></li> 
<li><a href="#">Sign In/Register</a></li> 
</ul> 
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:52:21.887

我质疑你尝试设置 'ul li a' 而不是 'ul li' 元素的样式。正如上面提到的那样，给每个 li 元素 20%，用 'box-sizing:border-box' 设置所有样式，你就可以开始了；）在这里你可以看到解决方案：[http ://codepen.io/czaras/pen /Auqtn](http://codepen.io/czaras/pen/Auqtn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:08:29.450

宽度指定内容的宽度。填充和边框大小被添加到指定的宽度。如果您希望它*包括边框*为 100%，则必须删除您的边框。

请参阅此图：

```
 _______________________
|  margin               |
|  ___________________  |
| |  border           | |
| |  _______________  | |
| | |  padding      | | |
| | |  ___________  | | |
| | | |  content  | | | |
| | | |___________| | | |
| | | |           | | | |
| | | |<- width ->| | | |
| | |_______________| | |
| |___________________| |
|_______________________| 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-28T06:20:14.100

只需将主体边距设为 0%

`body{ margin: 0%; }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T00:09:27.853

`#nav`是 100% 宽度，但各个按钮不会占用您想要的空间，因为它们符合其文本的宽度 ( `width:auto`)。获得您正在寻找的效果（对于任意数量的按钮）的最简单方法是使用`table`100% 宽度的 a。更复杂的方法是给每个按钮一个相等的百分比宽度，这样按钮的数量加起来就是 100%。你有5个按钮，所以你可以穿上`width:20%;`。`#nav ul li`您还需要消除此样式上的 97px 左右填充并选择更小的值。

要处理底部的滚动条，请指定`box-sizing: border-box;`on `#nav`。

# python - 尝试使用 Mac OS X 终端将对象分配给 Python 中的类时出现语法错误

> ID：14309730
> 
> 赞同：0
> 
> 时间：2013-01-14T00:01:34.963
> 
> 标签：python, class, object, terminal

我正在学习 python 编程，我只是通过简单的练习。其中一个让我创建一个类，如下所示：

```
class MyFirstClass:
    Pass 
```

这就对了。我保存了这个，然后当我尝试在 Mac 终端中使用 python3.3 导入文件并分配一个对象时：

```
a = MyFirstClass() 
```

我收到语法错误。我没有正确运行程序吗？我已经在 IDLE 中执行了这个任务，但是当我在终端中使用 Python 时它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T00:05:30.957

Python 区分大小写。 `Pass`应该是`pass`。

# regex - 如何更改函数调用的格式但保持输入相同

> ID：14309732
> 
> 赞同：0
> 
> 时间：2013-01-14T00:01:40.147
> 
> 标签：regex, vim, latex, vi

如何在我的文档中将所有 \cite{something} 实例更改为 [@something]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:19:43.913

我会这样做：

```
:%s#\v\\cite\{([^}]+)\}#[@\1]#g 
```

`\cite{something}`请注意，如果您在同一行中有多个标志，则最后一个“g”标志将很重要。

由于您想替换所有实例，我会用“g”来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:05:52.397

用这个正则表达式查找：`\\cite\{([^\}]+)\}`
并替换为：`[@\1]`

# css - 在浏览器调整大小时增加字体大小

> ID：14309734
> 
> 赞同：0
> 
> 时间：2013-01-14T00:01:58.880
> 
> 标签：css

有没有办法在浏览器调整大小时设置`font-size` **动态更改**`css`？

我用媒体查询设置了断点。在第一个断点处，字体大小为`1em`. 在另一个断点上，文本放大到`2em`.

字体大小调整仅发生在断点上。我正在寻找将硬币容器宽度设置为百分比时所达到的效果（当您调整浏览器大小时，它会自动调整大小。）

有没有办法让文本从一个断点动态放大到另一个断点**而不**使用 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:59:27.273

可以实现，参见演示[CSS 过渡 & 媒体查询](http://static.elliotjaystocks.com/css-transitions-media-queries/demo2.html)和文章[添加过渡](http://elliotjaystocks.com/blog/css-transitions-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:11:47.553

如果要根据窗口大小更改字体大小 onresize，则需要将 javascript 处理程序绑定到窗口大小调整事件。如果你只想在两个状态之间做动画，你可以使用 CSS3 动画，f.ex：

```
-webkit-transition:font-size 1s ease-out; 
```

[http://jsbin.com/uyitut/1](http://jsbin.com/uyitut/1)

此示例使用触发器按钮来演示转换，但您可以添加多个媒体查询。这是每 100px 一个 mq 的一个相当尴尬的例子：http: [//jsbin.com/uyitut/5](http://jsbin.com/uyitut/5)但它有点工作。

# php - PHP访问父类中的类对象

> ID：14309736
> 
> 赞同：0
> 
> 时间：2013-01-14T00:02:12.800
> 
> 标签：php, object

这应该很容易..有人可以为我解释一下语法吗？

我有一个控制器，它实例化一个引导类（新关键字），它实例化配置类。

然后控制器实例化一个扩展引导类的起始页类。在起始页类中，我试图访问引导（父）类中的配置对象。

这甚至可以做到吗？还是 startpage 必须直接实例化引导程序？实例化扩展引导程序的起始页是否覆盖引导程序？还是我的语法错了？

控制器（索引页）

```
try {
    if (!include($paths['root'] . $paths['framework'] . '/core/AutoLoader.php')) {
        throw new Exception ('<b>Error - AutoLoader is missing</b>');
    }
    $loader   = new AutoLoader($paths);
    $appStack = new BootStrap($paths);
    $app      = new StartPage();
    $app->start();
} catch (Exception $e) {
    echo
        '<p><b>EXCEPTION</b><br />Message: '
        . $e->getMessage()
        . '<br />File: '
        . $e->getFile()
        . '<br />Line: '
        . $e->getLine()
        . '</p>';
} 
```

引导类：

```
class BootStrap {
    protected $config;

    /**
     * --------------------------------------------------------------------------
     ** GETTERS
     * --------------------------------------------------------------------------
     *
     */
    public function getConfig() { return $this->config; }

    /**
     * --------------------------------------------------------------------------
     * __construct()
     * PUBLIC method
     * = Starts a new session, loads stylesheets, loads classes
     * --------------------------------------------------------------------------
     *
     */
    public function __construct($paths) {

        /**
         * --------------------------------------------------------------------------
         * load Config class
         * --------------------------------------------------------------------------
         *
         */
        try {
            if (!class_exists('Config')) {
                throw new Exception ('<b>Error - Configuration class is missing</b>');
            }
            $this->config      = new Config();
        } catch (Exception $e) {
            echo
                '<p><b>EXCEPTION</b><br />Message: '
                . $e->getMessage()
                . '<br />File: '
                . $e->getFile()
                . '<br />Line: '
                . $e->getLine()
                . '</p>';
        }
    }
} 
```

起始页类：

```
class StartPage extends BootStrap {

    /**
     * --------------------------------------------------------------------------
     * __construct()
     * PUBLIC method
     * = Starts a new session, loads stylesheets, loads classes
     * --------------------------------------------------------------------------
     *
     */
    public function __construct() {
    }

    /**
     * --------------------------------------------------------------------------
     * Start()
     * PUBLIC method
     * = loads the web page
     * --------------------------------------------------------------------------
     *
     */
    public function Start() {

        // path to includes
        $inc_path = $this->paths['root'] . $this->paths['medium'];

        // instantiate page, html header
        $charset     = $this->config->getCharset();
        $title       = $this->config->getTitle();
        $description = $this->config->getDescription();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:13:21.120

一旦你给出`StartPage`了它自己的`__construct()`方法，你就有效地“隐藏”了`Bootstrap`它，完全覆盖了它。所以`$foo = new StartPage()` **只**运行类中的`__construct()`代码`StartPage`。

为了同时`__construct()`在父类中运行代码`Bootstrap`，您必须添加一个显式调用，使用`parent::__construct()`.

如果您想知道为什么 PHP 不为您执行此操作，如果它是自动的，以下是您无法执行的三件事：

1.  通过选择何时调用来在父构造函数*之前*和*之后*运行代码`parent::__construct()`。
2.  用其他东西替换整个构造函数逻辑，同时仍然继承类的其余部分。
3.  将始终相同的值传递给父构造函数/可以由子类自动选择，但需要显式提供给父类。

**编辑：**总结下面的进一步说明，创建父 ( `Bootstrap`) 类的特定实例不会对以后创建同一类或其子类 ( `StartPage`) 的其他实例产生任何影响；每个都是一个单独的对象，将`__construct`独立调用。

如果您希望多个`StartPage`对象引用`Bootstrap`该类的一个特定实例，那么继承不是正确的机制。相反，您需要通过某种形式的依赖注入将创建的`Bootstrap`实例传递给每个实例。`StartPage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:11:04.450

尝试实现子类的构造函数并显式调用父类的构造函数。

```
public function __construct() {
    parent::__construct();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T00:13:08.253

在起始页中：

```
protected $config;

public function __construct() 
{
   $this->config = $this->getConfig();
} 
```

或者，按照 xelber 的回答，使用`parent::__construct();`

# google-api - Google Scripts API：如何将 onEdit 函数应用于每个电子表格？

> ID：14309737
> 
> 赞同：3
> 
> 时间：2013-01-14T00:02:15.107
> 
> 标签：google-api, google-apps-script, google-docs, google-sheets, gdata-api

我编写了一个小函数来创建一些菜单，并将其与我在 Google Drive 中的电子表格的 onOpen() 事件一起注册，以便在打开特定电子表格时触发操作并自动显示菜单。但有一个问题。我希望 Google Drive/Docs 中的每一个电子表格都能做到这一点。甚至是我下周创作的那些。当然，我不想经历为每个特定文档注册触发器的过程。

有没有办法说“嘿，我帐户中的每个电子表格都会在 onOpen 上触发此功能”？这似乎是一个非常有用的功能。

如果这是不可能的，Zend 的 GData API for PHP 能否以某种方式远程运行电子表格上的脚本？由于我所有的电子表格都来自 PHP Web 应用程序，因此我可以通过从 PHP 触发执行来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:39:56.927

如果您愿意更改创建新电子表格的方式，而不是“创建新”，那么您应该能够在未来的所有电子表格中实现这一点。

*   `onOpen()`使用您的代码创建一个空白电子表格。保存。

*   要制作具有您的菜单的新电子表格，请选择您的“模板”电子表格，使用`More - Make a Copy`，然后重命名该副本。

复制电子表格时，还会复制任何包含的脚本。（不幸的是，它被命名为“...的副本”，但这并不影响功能。）

备选方案：您还可以使用带有您希望将来更改的功能的脚本库，并让模板脚本调用它们。（通过“管理库...”对话框添加的库将包含在副本中。）

# google-app-engine - 典型的 Google AppEngine 内容应用程序的典型“每百万请求成本”是多少？（例如 CMS、论坛等）

> ID：14309739
> 
> 赞同：4
> 
> 时间：2013-01-14T00:03:06.680
> 
> 标签：google-app-engine, cloud-hosting

我们有一个平均有 30 QPS（*每秒查询*）的应用程序，我们的成本约为每小时 1 美元，这给出了**我们的 GAE 成本的粗略数字：每百万个请求 1 美元**。

大约一半的请求是提供内容（*给真正的客户和搜索引擎的机器人*），另一半是更新实体、重置缓存、预生成一些 HTML 等的延迟任务。我们不再使用后端（我们做了但发现在部署期间同步太难了，并且将所有内容都移到了任务队列中并且没有回头）。

只是想知道它与其他人相比如何？普通的？太多了？很好？

我在问我们团队中有一个新成员之前，他正在激动我们的成本太高，我们需要迁移到我们自己的独立服务器。

我是 StackOverflow 的新手，不确定我是否应该/可以披露相关网站的名称（*如果允许，我很乐意提供*）。

# opengl - 高性能 OpenGL 2D 形状动画库

> ID：14309740
> 
> 赞同：0
> 
> 时间：2013-01-14T00:03:11.830
> 
> 标签：opengl, animation, layout, vbo, graph-visualization

我正在寻找一个高性能库，它可以绘制大量（10 甚至 100 万）相对简单的矢量形状（圆形、弧形或圆角矩形），用于 2D 图形布局的可视化。

我希望能够只传输动画开始和停止几何体，然后在 GPU 上“生成”插值动画。

在每一帧，我想通过简单地更新全局插值参数（通常从 0 到 1）来最小化从 CPU 到 GPU 的数据量。

由于我想基于 OpenGL，我相信顶点缓冲区对象 (VBO) 是我应该选择的。

我选择的语言是 C++11，我的平台是 Ubuntu 12.10。

能够将高质量的文本与形状叠加在一起是一大优势。

您应该推荐哪些库/API？

我相信 oglplus 是一个很好的候选人，但我不确定它是否对我的任务来说太低了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:09:57.500

如果你是 OpenGL 的初学者，你会遇到一些困难。这是完全可行的，但它需要一些高级技巧。你需要

*   实例化
*   顶点着色器中的曲线插值基于您从包含动画控制点的“纹理”获取的值，由每个实例的 ID 索引
    *   为了使曲线插值适用于更复杂的运动，您必须能够将曲线分割成段（或补丁）并索引到这些段中。

在处理实例化之前，您至少应该知道如何使用 OpenGL 绘制简单的形状以及如何编写顶点着色器。这并不难，但第一次这样做通常会产生奇怪的结果，因为你错过了一些索引。

> 您应该推荐哪些库/API？

我建议首先学习所需的智能工具，这样使用这样的库就不会以货物崇拜编程而告终。

你需要

*   线性代数
*   多元微积分
*   非线性插值
    *   多项式
    *   贝塞尔样条
*   四元数（用于球面线性插值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:45:59.967

除了这里已经说过的，如果你以 NVidia 卡为目标，你应该看看[NVidia 路径扩展](https://developer.nvidia.com/content/accelerated-path-rendering-opengl-nvidia-path-rendering-sdk)。它基本上允许你直接在 GPU 上加载和渲染矢量形状，而不需要三角等。这里的缺点是你应该为此过程使用固定管道（如果使用现代 OpenGL 将配置文件设置为兼容性）。但优点是易于使用和分辨率独立。

# api - LiveLeak：API / 视频元数据

> ID：14309746
> 
> 赞同：1
> 
> 时间：2013-01-14T00:04:04.590
> 
> 标签：api, video, embed

我能找到的关于 LiveLeak API 的唯一一点帮助就是 Stackexchange 上的这个问题：[CURL: grabbing liveleak video](https://stackoverflow.com/questions/12246223/curl-grabbing-liveleak-video)

如果我只有视频 URL（例如[http://www.liveleak.com/view?i=numbered_videoid](http://www.liveleak.com/view?i=numbered_videoid)），有没有办法在不拉动整个页面的情况下获取视频元数据？理想情况下是 xml 还是 json？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:53:21.223

LiveLeak 的“API”充其量只是他们的 RSS 提要。

`&ajax=1`我能做的最好的事情是通过附加到 url来下载某个 videoid 的“内部”页面：

```
http://mobile.liveleak.com/view?i=100_1338007444&ajax=1 
```

这节省了**10.06** KB 的带宽（约 32%）。

# actionscript-3 - 具有相同类实例的两个按钮在 Flash 中的行为是否不同？

> ID：14309747
> 
> 赞同：0
> 
> 时间：2013-01-14T00:04:33.747
> 
> 标签：actionscript-3, flash, button

假设我在 Flash 中调用了这个特定的按钮类，`cont_button`它应该用于跳出循环，但我想多次使用该类。有没有办法给这个类的每个实例一些参数，以便它知道它需要去哪个帧？

例子：

我`cont_button`在第 200 帧上有一个实例，并且在 200 和 210 之间有一个循环。这将`cont_button`执行一个`gotoAndPlay(211)`. 但后来我在第 315 帧上有另一个按钮实例，并且在 315 和 325 之间有一个循环。有没有办法让它通过使用变量知道它具体需要转到哪个帧？还是我必须为每个人制作一个动作脚本文件？

ActionScript 很新，所以我很感激帮助，如果你们推荐的 AS3 有很好的编码参考，我会很乐意查看这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:44:31.520

正如您所说，您需要将参数传递给按钮的每个实例。有很多不同的方法可以做到这一点，但我很想通过实例名称来做到这一点。

您可以将每个按钮命名为*loopBreakTo211*、*loopBreakTo326*等等，然后在您的按钮类中有：

```
var breakFrame:Number = Number(name.replace("loopBreakTo", ""));
(parent as MovieClip).gotoAndPlay(breakFrame); 
```

诚然，这不是一种非常健壮的方法（例如，如果按钮命名不正确并且 breakFrame 最终为 NaN，它将中断，因此您可能需要为此添加检查），但它将参数与实例而不是在时间线某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:46:05.797

当然，这是可能的。一种方法是使帧编号成为类变量，当单击按钮时，它们引用存储在其中的任何值，而不是硬编码的数字。为了更好地了解，您可以发布按钮类的相关部分吗？

# asp.net - 从 asp 控件之外的资源文件中打印字符串

> ID：14309748
> 
> 赞同：0
> 
> 时间：2013-01-14T00:05:14.550
> 
> 标签：asp.net, webforms

我在 App_GlobalResources 文件夹中有一个资源文件，我想打印一些字符串，例如图像的 alt 文本和 href 链接的标题。我知道这可以使用 asp.net 控件来完成，用于 asp:Image 和 asp:Hyperlink 然后用 <%$ 打印字符串，但我想做的是使用普通的 HTML a href 和 img 标签，然后打印资源串在里面。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:07:53.413

是的，使用

```
 <img src="..." runat="server" id="myUniqueID" /> 
```

可以在代码隐藏中访问，`<asp:Image />`就像

大多数具有 runat 属性和唯一 ID 的 HTML 元素都可以从视图状态中访问，就像 asp: 元素一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:15:01.343

使用 CSS 媒体选择器来区分屏幕 CSS 和打印 CSS。

[本文](http://www.alistapart.com/articles/goingtoprint/)给出了一个超链接示例。不过，这可能不适用于所有浏览器。

# ruby - 从 ruby 中的进程 ID 获取进程状态和退出代码

> ID：14309755
> 
> 赞同：2
> 
> 时间：2013-01-14T00:06:24.167
> 
> 标签：ruby, process, pid

我想在 Ruby 中创建 s 子进程来运行和与其他程序交互，我需要使用`Process.spawn`，因为`Open3.popen3`在 Windows 中不起作用。`Open3.popen3`为您提供了一个不错的等待线程对象，它允许您检查进程是否已通过 完成`wait_thr.status`，一旦完成，您就可以通过`wait_thr.value.exitstatus`.

`Process.spawn`只给你`pid`，所以我需要一种从进程ID中获取数据的方法。我查看了`Process`and`Kernel`模块，一无所获。`Process::Status`有我需要的一切，但我找不到任何关于如何从 pid 创建一个的信息。

我如何知道该过程何时完成以及它的退出状态是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:17:55.807

我相信你可以使用[win32-api gem](https://rubygems.org/gems/win32-api)

然后，您可以使用 win32 API 中的[GetExitCodeProcess](http://msdn.microsoft.com/en-us/library/ms683189%28v=vs.85%29.aspx)函数。

# ios - 当我使用 xcodebuild 和 xcrun 创建 Enterprise Build 时，为什么我的 Settings.bundle 不会更新？

> ID：14309757
> 
> 赞同：1
> 
> 时间：2013-01-14T00:06:38.723
> 
> 标签：ios, objective-c, xcode, xcodebuild

几个月来一直在运行没有问题的脚本构建，而不是使用 XCode 来完成它。当我使用 XCode 创建构建时，该构建具有最新版本的 Settings.bundle。

以下是关键命令：

```
xcodebuild -workspace Proj_Name.xcworkspace -sdk "iOS 6.0" -scheme Proj_Name CODE_SIGN_IDENTITY="$DISTRIBUTION_CERTIFICATE" PROVISIONING_PROFILE="${PROVISONNING_PROFILE}" 
xcodebuild -workspace Proj_Name.xcworkspace -sdk "iOS 6.0" -scheme Proj_Name CODE_SIGN_IDENTITY="$DISTRIBUTION_CERTIFICATE" PROVISIONING_PROFILE="${PROVISONNING_PROFILE}" archive
xcodebuild -workspace Proj_Name.xcworkspace -sdk "iOS 6.0" -scheme Proj_Name CODE_SIGN_IDENTITY="$DISTRIBUTION_CERTIFICATE" PROVISIONING_PROFILE="${PROVISONNING_PROFILE}" -configuration release

/usr/bin/xcrun -sdk iphoneos PackageApplication -v "${PROJECT_BUILDDIR}/Proj_Name.app" -o "${BUILD_HISTORY_DIR}/Proj_Name.ipa" --sign "$DISTRIBUTION_CERTIFICATE" --embed "${PROVISONNING_PROFILE}" 
```

我是否缺少重建 Settings.bundle 或类似性质的命令？

# php - 嵌套视图中的增量变量

> ID：14309758
> 
> 赞同：4
> 
> 时间：2013-01-14T00:06:55.533
> 
> 标签：php, laravel

在laravel框架中，我有几个嵌套视图如下

```
<mainview>
  loop @include <sub-view>
    loop @include <sub-sub-view> 
```

我想保持一个计数器有多少子子视图。实际上，它变成了一个行计数器。我不确定在哪里声明/初始化这个变量（$sub-sub-view-counter），以及在哪里增加它。无论我把它放在哪里，它都不能被每个视图看到和增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:05:16.207

这可能有点像黑客，但除非没有更好的办法出现......

您将需要一个*辅助*函数或一个*对象*（最简单的方法是将其放入模型中）。为了演示，我选择了对象变体，因为我相信它更容易处理，最重要的是更容易扩展到您的需求。这也隐式地支持多个计数器，因为值是按对象保存的（您必须跳过几圈才能通过函数获得此功能）。

```
class Counter
{
    private $count = 0;

    public function inc()
    {
        return ++$this->count;
    }
} 
```

因此，对于这个特定的实现，您必须在*某处*创建它。您可以在包含子视图之前在父视图中的某处放置这样的行，或者使用该`with()`方法从 PHP 注入它。

```
<?php $counter = new Counter(); ?> 
```

您像往常一样包含子视图（请记住使用`include`，而不是`render`保留`$counter`变量）我使用`for`循环进行测试，但您当然可以使用您想要的任何变体。

```
@for($i=0; $i<10; $i++)
    @include('home.sub')
@endfor 
```

最后你可以在子视图中调用它

```
<span>{{ $counter->inc() }}</span> 
```

您可以使用工厂轻松扩展此模型以从应用程序中的任何位置获取计数器值，但对于您的用例，这个基本变体应该足够了。

# ios - 提醒应用底部周uiscrollview

> ID：14309760
> 
> 赞同：0
> 
> 时间：2013-01-14T00:07:06.610
> 
> 标签：ios, uiscrollview, uicollectionview, infinite-scroll

我试图弄清楚如何模仿这种控制。我尝试使用 IAInfintegridview，但自定义它太复杂了。

我试图实现的是与可选择的工作日完全相同的控制。

对不起英语

**编辑：** 我会尝试更具体。我正在尝试创建一个由 7 个 uiviews 组成的水平 uiscrollview。一周中的每一天。这个卷轴的两边都是无限的，所以你可以滚动整个日历。

uiscrollview 中的每个 uiview 都将是可触摸的，并将向其代表发送一条消息，表明它已被按下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:40:36.200

对于您的无限 uiscrollview，实现 uiscrollviewdelegate 并尝试以下操作：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender {
    CGFloat pageWidth = scrollView.frame.size.width;
    int currentPage = floor((scrollView.contentOffset.x - pageWidth/2)/pageWidth) + 1;
    if (currentPage==0) {
        [scrollView scrollRectToVisible:CGRectMake(scrollView.frame.size.width * [dayOfWeek count],0,scrollView.frame.size.width,scrollView.frame.size.height) animated:NO];
    } else if (currentPage==([myCovers count]+1)) {
        [scrollView scrollRectToVisible:CGRectMake(scrollView.frame.size.width,0,scrollView.frame.size.width,scrollView.frame.size.height) animated:NO];
    }
    [self adjustDataInScrollviewHere];
} 
```

# c# - 窗口窗体的C#透明背景

> ID：14309770
> 
> 赞同：6
> 
> 时间：2013-01-14T00:07:55.540
> 
> 标签：c#, winforms, transparent

我已经[在winforms上看到了透明背景？](https://stackoverflow.com/questions/4387680/transparent-background-on-winforms)

它不能解决我的问题。我正在使用相同的方法来尝试实现透明度

```
 public Form1()
    {
        this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        InitializeComponent();
        this.BackColor = Color.FromArgb(0, 0, 0, 0);
    } 
```

但这给出了灰色背景，不透明。如何获得真正透明的背景（注意，透明度键解决方案不提供透明背景，当我使用小于 255 的 alpha 通道进行绘制时，它与设置的表单背景颜色混合，而不是实际背景）？我想用 alpha < 255 绘制到屏幕的某些区域并与背景（而不是表单）混合。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-14T00:09:37.883

我很久以前的做法是为表单背景找到一个未使用的颜色，然后为其设置透明度键：

```
this.BackColor = Color.Magenta;
this.TransparencyKey = Color.Magenta; 
```

其他方式有：

*   创建一个背景图像，用特定颜色绘制它的透明区域并将其设置为 BackgroundImage... 形式，然后将 TransparencyKey 设置为该颜色。
*   用空方法覆盖 OnPaintBackground 方法。

[编辑] 正如马里奥所说，通常键的默认透明颜色是洋红色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-04T05:58:05.633

这是使winform的透明背景最好的方法。

在此之后：

```
public partial class frmTransparentBackcolor : Form
{
    public frmTransparentBackcolor()
    {
        InitializeComponent();
        //set the backcolor and transparencykey on same color.
        this.BackColor = Color.LimeGreen;
        this.TransparencyKey = Color.LimeGreen;
    }
    protected override void OnPaintBackground(PaintEventArgs e)
    {
        e.Graphics.FillRectangle(Brushes.LimeGreen, e.ClipRectangle);
    }
} 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T01:22:55.793

您可以使用图片来完成这项工作。图片边界颜色为红色，接下来使用这段代码

```
this.TransparencyKey = Color.Red; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-18T06:06:13.920

```
public partial class TransprtScrcn : Form
    {
        public TransprtScrcn()
        {
            InitializeComponent();
            this.BackColor = Color.Red;
            this.TransparencyKey = Color.Red;
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            e.Graphics.FillRectangle(Brushes.Red, e.ClipRectangle);
        }
    }
} 
```

# java - 返回数组和循环

> ID：14309776
> 
> 赞同：0
> 
> 时间：2013-01-14T00:09:30.557
> 
> 标签：java, arrays, methods

我是 Java 新手，被分配设计一个程序，该程序从文件中获取输入并将其插入到数组的某些部分，然后导出该数据。我有将文件读入字符串数组的代码。

两个问题：

1.）如何创建一个循环来创建一个带有空白数据的编号列表？（请参阅下面的代码片段）我正在尝试创建一个如下所示的列表：

```
1 0000 0000 00000 ...
2 0000 0000 00000 ... 
```

您在下面看到我的循环有什么问题吗？

```
for (int x = 0; x < array.length; x++) {
        array[x] = Integer.toString(y);
        y++;
            while (x < 16) {
            x++;
            array[x] = "00000";
            }
    } 
```

2.) 我可以使用一种方法返回两个数组值吗？我想填充两个数组，然后返回它们的值以用于其他方法。我找到了一种可以使用的方法，但我不确定如何正确实施它。我在下面有一个代码片段：

```
 public static Object[] rtrStr() {
    //...blah blah
    return new Object[]{array1, array2};} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:15:29.170

2) 如果您愿意，您可以返回一个（或`List`）数组：

```
public static String[][] rtrStr() {
    // ...blah blah
    String[][] arr = new String[][2]; // syntax might not be exactly correct

    arr[0] = array1;
    arr[1] = array2;
} 
```

**注意：**我不确定上述行的确切语法，但这个想法是合理的。就个人而言，我更喜欢使用 a`List`代替。

话虽如此，您应该考虑每个数组中数据的含义。创建一个包装数组并阐明语义的自定义类可能是有意义的。这也使得从任何方法返回数组或列表变得更容易，因为元素将是新自定义类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:26:55.577

> 您在下面看到我的循环有什么问题吗？

是的，多个：你的代码就是我所说的坏代码。即使它可以满足您的要求（我不确定），对于这样一个简单的任务也很难理解。

1.  您正在使用`x`and`y`作为反变量名称。当涉及多个计数器时不要这样做！很难准确理解什么计数器在计算什么。
2.  您的内循环与外循环的反变量相混淆。如果这是设计使然，请**永远**不要这样做。它使代码非常难以理解。

此外，如果数组应该包含类似于示例输出中的表（行和列），则需要一个二维数组。

* * *

> 我可以使用一个方法返回两个数组值吗？

是的，为什么不？您实际上返回的**是一个包含****两个**值的数组。但是，您不能**从**单个方法返回**两个数组。**

# java - Java JIT 编译器是否会牺牲性能来支持集合？

> ID：14309780
> 
> 赞同：-6
> 
> 时间：2013-01-14T00:10:04.140
> 
> 标签：java, arrays, performance, collections, jit

考虑以下两个代码示例。所有基准测试都是在用于计算采样执行时间平均值的容器之外完成的。在我的机器上，运行 Windows 7 和 JDK 1.6，我看到示例 2 中的平均执行时间比示例 1 慢了近 1,000 倍。我可以推测的唯一解释是编译器正在优化 LinkedList 使用的一些代码以其他一切的损害。有人可以帮我理解这一点吗？

示例 1：使用数组

```
public class TimingTest 
{

    static long startNanos, endNanos;
    static long[] samples = new long[1000];

    public static void main(String[] args) 
    {
    for (int a = 0; a < 100; a++) 
    {
        for (int numRuns = 0; numRuns < 1000; numRuns++) 
        {
            startNanos = System.nanoTime();
            long sum = 0;
            for (long i = 1; i <= 500000; i++) 
            {
                sum += i % 13;
            }
            endNanos = System.nanoTime() - startNanos;
            samples[numRuns] =(endNanos);
        }
        long avgPrim = 0L;
        for (long sample : samples) 
        {
            avgPrim += sample;
        }
        System.out.println("Avg: " + (avgPrim / samples.length) );
        }
    }
} 
```

示例 2：使用 LinkedList

```
public class TimingTest 
{

    static long startNanos, endNanos;
    static List<Long> samples = new LinkedList<Long>();

    public static void main(String[] args) 
    {
        for (int a = 0; a < 100; a++) 
        {
            for (int numRuns = 0; numRuns < 1000; numRuns++) 
            {
                startNanos = System.nanoTime();
                long sum = 0;
                int index = 0;
                for (long i = 1; i <= 500000; i++) 
                {
                    sum += i % 13;
                }
                endNanos = System.nanoTime() - startNanos;
                samples.add(endNanos);
            }
            long avgPrim = 0L;
            for (long sample : samples) 
            {
                avgPrim += sample;
            }
            System.out.println("Avg: " + (avgPrim / samples.size()));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:51:50.727

这里出了点问题：当我运行数组版本时，我得到的平均执行时间为 20000 纳秒。我的 2 GHz CPU 在那个时候执行 500000 次循环迭代是完全不可能的，因为这意味着平均循环迭代需要 20000/500000 = 0.04 ns，或 0.08 个 cpu cpu 周期......

主要原因是您的时序逻辑中的错误：在数组版本中，您可以

```
int index = 0; 
```

对于每个时间，因此

```
samples[index++] =(endNanos); 
```

将始终分配给第一个数组元素，将所有其他元素保留为默认值 0。因此，当您取数组的平均值时，您会得到最后一个样本的 1/1000，而不是所有样本的平均值。

实际上，如果您将 index 声明移到循环之外，则不会报告两个变体之间的显着差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:43:04.970

这是您的代码的真实运行（为了清楚起见，重命名了类，并`a < 1`为了时间的缘故将每个类中的外部 for 循环剪掉了）：

```
$ for f in *.class
do
  class=$(echo $f | sed 's`\(.*\)\.class`\1`')
  echo Running $class
  java $class
done
Running OriginalArrayTimingTest
Avg: 18528
Running UpdatedArrayTimingTest
Avg: 41111273
Running LinkedListTimingTest
Avg: 41340483 
```

显然，您最初的担忧是由@meriton 指出的错字引起的，您在问题中更正了该错字。我们可以看到，对于您的测试用例，数组和 LinkedList 的行为几乎相同。一般来说，对 LinkedList 的插入非常快。由于您使用 Meriton 的更改更新了您的问题，但没有更新您声称前者比后者快得多的说法，因此您不再清楚您在问什么；但是我希望您现在可以看到，在这种情况下，两种数据结构的行为都相当相似。

# javascript - 老实说很难解释..我使用 a=b 之类的东西，然后是 a++，但是 b 会改变。除了，这些是数组

> ID：14309784
> 
> 赞同：0
> 
> 时间：2013-01-14T00:10:54.857
> 
> 标签：javascript, html, arrays

好吧，我的简短易懂的解释可以是这样的。我有 2 个数组，`FilterList`并且`GamesReset`. 每当我使用此功能并使用复选框和下拉菜单过滤掉一些游戏时，该功能都会以`FilterList=GamesReset;`. 在我过滤掉游戏的年龄之前，这个功能似乎工作正常。该函数永远不会触及`GamesReset`，除非它类似于`while(i<GamesReset.length){}`or `FilterList=GamesReset;`。我过滤游戏时使用的唯一工具是`FilterList.splice(i,1);`. 现在，`GamesReset`据我所知，绝对不应该改变。我让它重置`FilterList`，然后根据需要过滤掉的内容，它会开始从`FilterList`. 我遇到的问题是，`GamesReset`也被过滤掉了。其中，根本没有任何意义。所以就像我的标题一样，就像说`b=0;`, `a=b;`, `a++;`, 现在`b`等于 1。

现在，我认为这是我可以揭示这个问题的最好/最短的方法，而不会因为我向人们解释事情的坏习惯而过度使用它。如果有人想查看正在发生的事情，我目前有一个网页可用，因为`GamesReset`如果我是你，我也不知道发生了什么，~~在这里 (url 已删除，阅读编辑)~~。要使错误正常工作，只需将年龄更改为 10 而不选中任何框。底部段落是`GamesReset`数组（`<br>`用于分隔每个数组），它是我只更改时更改的那个`FilterList`在 JavaScript 中。与我上面提到的相比，如果您查看页面源代码，实际代码可能会有些偏差，但几乎 100% 相同。我还希望在没有 url 的情况下在此页面上提供代码，但我无法弄清楚如何使用包含的 html 标记来做到这一点。

实际上，这里是 JavaScript 函数。当我的问题被拒绝时，我刚刚弄清楚了 4 个空格。

```
function SearchFilter() {
  Games = GamesReset;
  plat = document.getElementById('platformcheck').checked;
  rpg = document.getElementById('rpgcheck').checked;
  puzz = document.getElementById('puzzlecheck').checked;
  hybo = document.getElementById('hybocollectcheck').checked;
  ages = document.getElementById('agescheck').value;
  if ((!plat) && (!rpg) && (!puzz) && (!hybo)) {
    FilterList = Games;
  } else {
    FilterList = [];
    i = 0;
    while (i < Games.length) {
      Set = '';
      Set = Games[i];
      Set = Set.split('</>');
      StrFind = Set[0];
      if (
        (plat && (StrFind.search(',platform,') > -1)) || (rpg && (StrFind.search(',rpg,') > -1)) || (puzz && (StrFind.search(',puzzle,') > -1)) || (hybo && (StrFind.search(',hybocollect,') > -1))) {
        FilterList.push(Games[i]);
      }
      i++;
    }
    // so by now, we should have the filtered array
  }
  //seperate filter for ages
  i = 0;
  while (i < FilterList.length) { //The problem should definitely start here
    Set = '';
    Set = FilterList[i];
    Set = Set.split('</>');
    StrFind = Set[1];
    if ((Math.abs(StrFind)) > ages) {
      FilterList.splice(i, 1);
    } else {
      i++;
    }
  }
  GL.innerHTML = GamesReset.join('<br>');
} 
```

提醒一下，当年龄过滤器工作时，问题就开始了。而它唯一能做的就是`FilterList.splice(i,1);`。但它最终改变了`GamesReset`。添加时我稍微更改了此功能`Games=GamesReset;`，但这是另一个尝试确保`GamesReset`不会像 一样被过滤的测试`FilterList`，但它仍然存在。

编辑：我删除了我的网址，因为答案肯定解释了一切，所以现在不需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:17:35.713

分配时不会复制数组，两个变量将引用相同的数据。这是一篇详细介绍此问题的帖子：[Copying array by value in JavaScript](https://stackoverflow.com/questions/7486085/copying-array-by-value-in-javascript)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T00:17:56.840

这很有意义，因为变量只是对内存中对象的引用。一个对象可以有多个引用。考虑一下：

```
var a = { foo: 'bar' };
var b = a;

// b is now a reference to a and they both point to the same object

b.foo = 'doe';
alert( a.foo ); // alerts doe 
```

数组也是如此。所以当你这样做时，`FilterList = GamesReset`你不是在复制数组——你只是将同一个数组分配给另一个变量。对任一参考所做的任何突变或更改都将反映在所有参考中。

要创建数组的副本，您可以使用`slice`：

```
FilterList = GamesReset.slice(); 
```

# mysql - 如何在mysql中“ident_current”？

> ID：14309795
> 
> 赞同：4
> 
> 时间：2013-01-14T00:12:22.013
> 
> 标签：mysql

我在 MSSQL 中使用此代码：

```
SELECT IDENT_CURRENT('customers'); 
```

当我在 MySQL 中尝试它时它不起作用。我在网上寻找答案，但找不到任何对我有用的东西。上述 TSQL 的 MySQL 等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T00:16:58.423

我想你正在寻找这个：

```
SELECT LAST_INSERT_ID('customers'); 
```

但`LAST_INSERT_ID()`并非在所有情况下都是如此，所以更好地使用：

```
SELECT MAX('id') FROM customers; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T00:16:31.777

在 MySQL 中，您可以使用`LAST_INSERT_ID(expr)`

*   [LAST_INSERT_ID(expr)](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T16:38:13.887

我不知道你是否仍然需要它，但它可能会对某人有所帮助。:)

我遇到了同样的问题，需要从我的表中获取下一个 id（auto_increment 编号），而无需添加新行且不使用 MAX() 或 LAST_INSERT_ID()，因为它只会返回最后一个可见记录而不是真实记录下一个自动增量。

我找到的解决方案是从 table_schema 中获取 auto_increment，如下所示：

```
SELECT  AUTO_INCREMENT
FROM    information_schema.TABLES
WHERE   (TABLE_NAME = 'your_table') 
```

希望它可以帮助某人，就像它帮助了我一样。*对不起英语不好，我来自巴西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-11T21:46:18.803

```
SELECT LAST_INSERT_ID(); 
```

To learn more about this function: [http://dev.mysql.com/doc/refman/5.6/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.6/en/information-functions.html#function_last-insert-id)

In order for this to work as intended, the 'ID' column must be set to "UNIQUE".

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-14T03:23:58.207

如果您使用某种身份（递增 ID）列，则以下内容应该有效；

```
Select top 1 ID from TBLNAME
order by ID DESC 
```

# php - 如何在 php 上使用 cURL 发布 XML 文件？

> ID：14309796
> 
> 赞同：1
> 
> 时间：2013-01-14T00:12:25.493
> 
> 标签：php, xml, post, curl

我在我的计算机上使用本地服务器，我正在尝试制作 2 个 php 脚本来发送和接收 xml 文件。

要发送 xml 文件，我使用以下代码：

```
<?php
  /*
   * XML Sender/Client.
   */
  // Get our XML. You can declare it here or even load a file.
  $file = 'http://localhost/iPM/books.xml';
  if(!$xml_builder = simplexml_load_file($file))
  exit('Failed to open '.$file);

  // We send XML via CURL using POST with a http header of text/xml.
  $ch = curl_init();
  // set URL and other appropriate options
  curl_setopt($ch, CURLOPT_URL, "http://localhost/iPM/receiver.php");
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_builder);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
  curl_setopt($ch, CURLOPT_REFERER, 'http://localhost/iPM/receiver.php');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $ch_result = curl_exec($ch);
  curl_close($ch);
  // Print CURL result.
  echo $ch_result;
?> 
```

要接收 xml 文件，我使用以下代码：

```
<?php
  /*
   * XML Server.
   */
  // We use php://input to get the raw $_POST results.
  $xml_post = file_get_contents('php://input');
  // If we receive data, save it.
  if ($xml_post) {
    $xml_file = 'received_xml_' . date('Y_m_d-H-i-s') . '.xml';
    $fh       = fopen($xml_file, 'w') or die();
    fwrite($fh, $xml_post);
    fclose($fh);
    // Return, as we don't want to cause a loop by processing the code below.
    return;
  }
?> 
```

当我运行 post 脚本时，出现此错误：

```
Notice: Array to string conversion in C:\xampp\htdocs\iPM\main.php on line 17 
```

指的是行：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_builder); 
```

我不知道到底是做什么的。我收到的 xml 文件已创建，但是当我打开它时，我得到了这个：

```
XML Parsing Error: syntax error
Location: file:///C:/xampp/htdocs/iPM/received_xml_2013_01_14-01-06-09.xml
Line Number 1, Column 1: 
```

我试图评论这个特定的行，因为我认为问题出在那儿，但是当我运行我的帖子脚本时，我得到了这个错误：

```
Request entity too large!

The POST method does not allow the data transmitted, or the data volume exceeds the capacity limit.

If you think this is a server error, please contact the webmaster. 

Error 413 
```

但 xml 文件只有 5kbs，所以这不是问题。

有谁知道我应该在这里做什么？我要做的就是制作一个脚本来发送一个xml文件和一个脚本来接收它并将其保存为xml。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T01:09:28.543

`curl_setopt($ch, CURLOPT_POSTFIELDS, $foo)`设置您的请求正文，即要发布的数据。它期望`$foo`是一组键值对作为数组提供：

```
$foo = array(
    'foo' => 'some value',
    'bar' => 2
); 
```

或作为百分比编码的字符串：

```
$foo = 'foo=some%20value&bar=2' 
```

相反，您提供`$xml_builder`的变量是`SimpleXMLElement`由`simplexml_load_file($file)`.

试试这个：

```
$postfields = array(
    'xml' => $your_xml_as_string; // get it with file_get_contents() for example
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields); 
```

然后在接收端：

```
$received_xml = $_POST['xml']; 
```

# ios - 向 UIScrollView 添加内容

> ID：14309798
> 
> 赞同：1
> 
> 时间：2013-01-14T00:12:28.637
> 
> 标签：ios, objective-c, xcode, uiscrollview

我正在尝试将 web 视图放在滚动视图中的图像下方。此代码导致空白屏幕。我敢肯定这非常简单（我是初学者），但有人能指出我的错误吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = [self.detailItem title];
    //self.webView = [[UIWebView alloc] init];
    //self.imageView = [[UIImageView alloc] init];
    UIImage* image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[self.detailItem imageURL]]]];

    self.imageView.image = image;
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[self.detailItem url]]]];

    [self.scrollView addSubview:self.imageView];
    [self.scrollView addSubview:self.webView];
    self.imageView.frame = CGRectMake(0, 770, 320, 230);
    [self.webView setFrame:CGRectMake(0, 0, 320, 770)];
    CGFloat scrollViewHeight = 1000.0f;
    /*
    for (UIView* view in scrollView.subviews)
    {
        NSLog(@"%f",view.frame.size.height);
        scrollViewHeight += view.frame.size.height;

    }
    */
    [scrollView setContentSize:(CGSizeMake(320, scrollViewHeight))];
    NSLog(@"%f", self.imageView.frame.size.height);
    NSLog(@"%f", self.webView.frame.size.height);

    [self configureView];
} 
```

从.h

```
@interface DetailViewController : UIViewController <UIScrollViewDelegate>{
    UIScrollView* scrollView;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

@property (strong, nonatomic) id detailItem;
@property (nonatomic, strong) UIWebView *webView;
@property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@property (nonatomic, strong) UIImageView *imageView;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:14:23.150

在给定的代码中，您没有初始化 self.scrollView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:01:06.063

通过重新初始化这些值，您将丢失对 ivar 的原始引用，并且您没有设置框架，因此它们的高度值为 0，这就是您的滚动视图没有变得更大的原因：

```
self.webView = [[UIWebView alloc] init];
self.imageView = [[UIImageView alloc] init]; 
```

尝试将它们更改为仅在值为 nil 时进行初始化

```
if(self.webView == nil){
    self.webView = [[UIWebView alloc] init];
}
if(self.imageView == nil){
    self.imageView = [[UIImageView alloc] init];

}

//set frames for subviews
UIImage *remoteLoadedImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[self.detailItem imageURL]]];
[[self.imageView setFrame:CGRectMake(0,0,remoteLoadedImage.size.width, remoteLoadedImage.size.height)];
[self.imageView.image = remoteLoadedImage];
//i'm setting an arbitrary height and width
[self.webView setFrame:CGRectMake(0,self.imageView.frame.size.height+5, 320, 450)]; 
```

# java - 网络提供商生成一个位置的 2 个副本

> ID：14309799
> 
> 赞同：5
> 
> 时间：2013-01-14T00:12:34.393
> 
> 标签：java, android, gps, geolocation

如果我通过网络提供商生成的 null 值，我会尝试首先通过 gps 提供商生成位置。我的问题是网络提供商两次生成相同的位置。我将信息发送到数据库，它以相同的时间（相同的秒数！）发送相同的位置。这是一些代码：

```
gpsLocation = requestUpdatesFromProvider(LocationManager.GPS_PROVIDER, R.string.not_support_gps);
networkLocation = requestUpdatesFromProvider(LocationManager.NETWORK_PROVIDER, R.string.not_support_gps);
    // Update the UI immediately if a location is obtained.
if (gpsLocation != null) 
    updateUILocation(gpsLocation);
else
    updateUILocation(networkLocation); 
```

这是 requestUpdateFromProvider：

```
private Location requestUpdatesFromProvider(final String provider, final int errorResId) 
{
    Location location = null;
    if (mLocationManager.isProviderEnabled(provider)) 
    {
        mLocationManager.requestLocationUpdates(provider, TEN_SECONDS, TEN_METERS*2, listener);
        location = mLocationManager.getLastKnownLocation(provider);
    } 
    else
    {
        Toast.makeText(this, errorResId, Toast.LENGTH_LONG).show();
    }
    return location;
} 
```

这是更新UILocation：

```
private void updateUILocation(Location location) 
{
    // We're sending the update to a handler which then updates the UI with the new location.
    Message.obtain(mHandler,
            UPDATE_LATLNG,
            location.getLatitude() + ", " + location.getLongitude()).sendToTarget();

    // Bypass reverse-geocoding only if the Geocoder service is available on the device.
    if (mGeocoderAvailable) 
        doReverseGeocoding(location);
} 
```

这是处理程序：

```
 mHandler = new Handler() 
    {
        public void handleMessage(Message msg) 
        {
            if(msg.what == UPDATE_ADDRESS) //UPDATE_ADDRESS = 1
            {
                LocationService.this.address = (String) msg.obj; // update a string that show the user address
                new SendLocation(LocationService.this.id,(String)msg.obj);//send the info to the db.
            }
        }
    }; 
```

SendLocation 正在做它应该正确做的事情，所以你不应该注意它。

**编辑**

我忘了说第一段代码是从构造函数调用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T18:50:50.973

如果创建重复位置不是您的错，那么只需调用一个同步`forwardLocation(Location loc)`方法，该方法存储最后接收到的位置的时间戳。当最后存储的时间戳等于前一个时间戳时，此方法应忽略位置。

# c# - WPF。文本框和密码框中的背景帮助文本

> ID：14309800
> 
> 赞同：2
> 
> 时间：2013-01-14T00:12:34.307
> 
> 标签：c#, wpf

我正在编写一个基于 WPF 的应用程序，但我遇到了问题。我已经搜索了几个星期的答案，但仍然找不到解决方案。问题是：我无法显示带有提示的背景文本。我正在使用自己的书面风格并尝试通过触发器显示文本。这是我制作的代码示例：

```
<Style TargetType="{x:Type TextBox}" x:Key="DCTextBox">           
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#21346b"/>
            <Setter Property="FontFamily" Value="Fonts/#BankGothic Md BT"/>            
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Border CornerRadius="5" BorderThickness="6" BorderBrush="#21346b" Background="White" >
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter> 
            <Style.Resources>
                    <VisualBrush x:Key="HelpBrush" Opacity="0.4" Stretch="None" AlignmentX="Left" >
                        <VisualBrush.Visual>
                            <TextBlock FontStyle="Italic" Text="Type or select from list" Background="Black"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
            </Style.Resources>         
            <Style.Triggers>
                <Trigger Property="Text" Value="{x:Null}">
                    <Setter Property="Control.Background" Value="{StaticResource HelpBrush}"/>
                </Trigger>
                <Trigger Property="Text" Value="">
                    <Setter Property="Control.Background" Value="{StaticResource HelpBrush}"/>
                </Trigger>
            </Style.Triggers> 
        </Style> 
```

请告诉我可能是哪里的问题？哦，还有一个问题：是否可以使用类似的方法在密码框中输出背景文本？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:05:07.243

我做了一些更正，对我来说效果很好。

```
 <Style TargetType="{x:Type TextBox}" x:Key="DCTextBox">
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="#21346b"/>
        <Setter Property="FontFamily" Value="Fonts/#BankGothic Md BT"/>
        <Style.Resources>
            <VisualBrush x:Key="HelpBrush" Opacity="0.4" Stretch="None" AlignmentX="Left" >
                <VisualBrush.Visual>
                    <TextBlock FontStyle="Italic" Text="Type or select from list" Foreground="Black"/>
                </VisualBrush.Visual>
            </VisualBrush>
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="Text" Value="{x:Null}">
                <Setter Property="Background" Value="{StaticResource HelpBrush}"/>
            </Trigger>
            <Trigger Property="Text" Value="">
                <Setter Property="Background" Value="{StaticResource HelpBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:47:55.453

如果我理解正确，您想要的是一个 TextBox，它在为空且未聚焦时显示一些文本，以告诉用户如何处理它。为此，我建议创建一个从 TextBox 继承的新控件，因此当您设置样式时，您不会影响应用程序中的所有 TextBox。向其添加 DependencyProperty，以便您可以在 XAML 中设置帮助文本。

```
public class MyTextBox : TextBox
{
    public static DependencyProperty LabelTextProperty =
        DependencyProperty.Register(
            "LabelText",
            typeof(string),
            typeof(MyTextBox));
 } 
```

定义你的风格，在这种情况下我会这样做（我只会发布相关部分，你可以自己让它看起来很漂亮）：

```
 <Style x:Key="{x:Type local:MyTextBox}" TargetType="{x:Type local:MyTextBox}">
 <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyTextBox}">

     <ControlTemplate.Triggers>
                    <Trigger Property="IsKeyboardFocusWithin" Value="True">
                        <Setter Property="Visibility" TargetName="LabelText" Value="Hidden" />
                    </Trigger>
                    <Trigger Property="HasText" Value="True">
                        <Setter Property="Visibility" TargetName="LabelText" Value="Hidden" />
                    </Trigger>
     </ControlTemplate.Triggers>
           </ControlTemplate>
 </Setter.Value>
 </Style> 
```

你像这样使用它：

```
<Local:MyTextBox LabelText="This is the tip for the user" Text="{Binding SomeProperty}"/> 
```

关于密码框，我没有尝试过，但它应该可以正常工作。如果 LabelText 显示为“xxxxxxxxx”，我相信您会找到解决方法（出乎意料，我可以考虑在 PasswordBox 内创建一个 TextBlock 类型的 DependencyProperty，使用 Tip 字符串设置其内容，然后隐藏/显示整个事情）。

最后一个建议：当你只想显示一个文本时，不要花费使用 VisualBrush 的费用，这在资源方面是过度的，并且在某些情况下你可能会得到一个糟糕的渲染。希望这会有所帮助，问候！

# php - 来自类函数的 OOP PHP 输出数据

> ID：14309802
> 
> 赞同：0
> 
> 时间：2013-01-14T00:12:58.487
> 
> 标签：php, mysql, pdo

我在一个类中有一个函数可以查询 MySQL 数据库中的数据，它将从数据库中获取大约 10 行。

示例代码：

```
<?php

 class details {

 public function detailsRetrieve() { 
    try {

        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

        $sql = "SELECT * FROM table";
        $result = $con->query($sql);

        while($row = $result->fetch(PDO::FETCH_ASSOC)) {
        $1 = $row['row1'];
        $2 = $row['row2'];
        $3 = $row['row3'];
        $4 = $row['row4'];

        }

    $con = null;   

    }catch(PDOException $e) {

    echo $e->getMessage();

    }
 }   
     }
     ?> 
```

现在工作正常并从数据库中获取数据。我已将课程包含在一个单独的页面中，如下所示：

```
 <?php
    include("class/details.php"); 
    $class = new details();
    $class->detailsRetrieve();
    ?> 
```

我怎样才能在这个新页面上实际输出变量 (1,2,3,4)？

我知道如果我在函数内部回显这些变量中的每一个，它们将通过使用上面的代码自动显示在新页面上，但是我可以在页面上我需要的位置分别输出每个变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:18:30.160

您需要`detailsRetrieve()`返回值。然后您可以在您的页面中访问它们。

```
public function detailsRetrieve() { 
    try {

        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

        $sql = "SELECT * FROM table";
        $result = $con->query($sql);

        $results = array();
        while($row = $result->fetch(PDO::FETCH_ASSOC)) {
            $results() = $row;
        }

    $con = null;   

    }catch(PDOException $e) {

    echo $e->getMessage();

    }
 }   

 $details = $class->detailsRetrieve();

 foreach ($details as $row) 
 {
     echo 'row 1: ' . $row['row1'] . '<br>';
     echo 'row 2: ' . $row['row2'] . '<br>';
     echo 'row 3: ' . $row['row3'] . '<br>';
     echo 'row 4: ' . $row['row4'] . '<br>';
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:19:22.070

班级

```
class details {

    public function detailsRetrieve() { 
        try {

            $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
            $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

            $sql = "SELECT * FROM table";
            $result = $con->query($sql);

            while($row = $result->fetch(PDO::FETCH_ARRAY)) {
                $ret[] = array('1' => $row['row1'],
                '2' => $row['row2'],
                '3' => $row['row3'],
                '4' => $row['row4']);
            }

        $con = null;   

        if (!empty($ret)) return $ret;
        return array();

        }catch(PDOException $e) {

            echo $e->getMessage();

        }
    }   
}
?> 
```

第二个文件：

```
<?php

$det = new details();
$arr = $det->detailsRetrive();

print("<pre>");
print_r($arr);
print("</pre>");

?> 
```

# java - Android TimePickerDialog - 只工作一半（字面意思）

> ID：14309803
> 
> 赞同：1
> 
> 时间：2013-01-14T00:13:04.540
> 
> 标签：java, android, time, datepicker, timepicker

Mac OS-X

带 ADT 的 ECLIPSE

安卓

......

问题：当我选择时间时，比如 06:00，它会将时间设置为 18:00，当我选择时间 18:00 时，它会将时间设置为 06:00。我似乎无法弄清楚为什么。

......

逻辑

获取当前日期实例。

OnClickListener 设置为 ButtonImage。

OnClick 使用 2 个参数（一个 TextView，当前日期实例）调用 showTimeDialog。

TimePicker 对话框在 09:00 的设定时间显示。

TimeSet 设置日历 activeTime 的时间并更新 TextView

.....................

其他新信息

好的，发生了这么奇怪的事情，现在我的代码似乎可以工作，但上次我检查它是在 24:00 之前，它的行为与描述的一样。它现在可以工作，英国的时间是 00:20。我不知道这是否与它有关，但如果有任何变化，我会更新这篇文章。

附加新信​​息 2

我的代码似乎在 00:00 - 12:00 之间工作，但从 12:00 - 24:00 却不行。我难住了。。

......

这是我的代码：

```
 /////// SETUP TIME

    //  capture our View elements for the start time function
    startTimeDisplay = (TextView) findViewById(R.id.editText2);
    endTimeDisplay = (TextView) findViewById(R.id.editText3);
    startPickTime = (ImageButton) findViewById(R.id.imageButtonStartTime);
    endPickTime = (ImageButton) findViewById(R.id.imageButtonEndTime);

    // Use the current time as the default values for the time picker
    startTime = Calendar.getInstance();
    endTime = Calendar.getInstance();
    startTime.get(Calendar.DATE);
    endTime.get(Calendar.DATE);

    // add a click listener to the button
    startPickTime.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showTimeDialog(startTimeDisplay, startTime);
        }
    });

    /* add a click listener to the button   */
    endPickTime.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showTimeDialog(endTimeDisplay, endTime);
        }
    });
}
@Override
protected Dialog onCreateDialog(int id) {

    getTime(activeTime);
    int hr = activeTime.get(Calendar.HOUR_OF_DAY);
    int mn = activeTime.get(Calendar.MINUTE);

    Log.d(TAG, "first hr..." +hr);
    Log.d(TAG, "first mn..." +mn);

    switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, dateSetListener, activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
        case TIME_DIALOG_ID:
            return new TimePickerDialog(this, timeSetListener, THE_HOUR, THE_MINUTE, true);
    }
    return null;
}

@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    super.onPrepareDialog(id, dialog);

    getTime(activeTime);
    int hr = activeTime.get(Calendar.HOUR_OF_DAY);
    int mn = activeTime.get(Calendar.MINUTE);

    Log.d(TAG, "second hr..." +hr);
    Log.d(TAG, "second mn..." +mn);

    switch (id) {
        case DATE_DIALOG_ID:
            ((DatePickerDialog) dialog).updateDate(activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
            break;
        case TIME_DIALOG_ID:
            ((TimePickerDialog) dialog).updateTime(THE_HOUR, THE_MINUTE);
            break;
    }
}

public void showTimeDialog(TextView timeDisplay, Calendar date) {
    activeTimeDisplay = timeDisplay;
    activeTime = date;
    showDialog(TIME_DIALOG_ID);
}

private OnTimeSetListener timeSetListener = new OnTimeSetListener() {
    @Override
    public void onTimeSet(TimePicker view, int hour, int minute) {
        activeTime.set(Calendar.HOUR, hour);
        activeTime.set(Calendar.MINUTE, minute);
        updateTimeDisplay(activeTimeDisplay, activeTime);
        unregisterTimeDisplay();
    }
};

private void updateTimeDisplay(TextView timeDisplay, Calendar date) {

    //convert Calendar to Unix Time
    long activeTimeUnixTime = (long) (date.getTimeInMillis());

    //convert Unix Time to Date
    java.util.Date startTimeDate = new java.util.Date(activeTimeUnixTime);

    //convert Date to SimpleDateFormat and convert to String
    SimpleDateFormat formatter2;
    formatter2 = new SimpleDateFormat("kk:mm", Locale.UK);
    String stringTime = formatter2.format(startTimeDate);

    timeDisplay.setText(stringTime);
}

private void unregisterTimeDisplay() {
    activeTimeDisplay = null;
    activeTime = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:26:32.990

**解决方案：**

**我的 onTimeSetListener onTimeSet() 方法使用 HOUR 而不是 HOUR_OF_DAY。**

好的，所以我被困在这个问题上很长时间了，但最终弄清楚了。但是因为我对 Android 和日历很陌生，所以差异暗示了我。

Calendar.HOUR 对于 17:00 是 5，因为它是下午的第 5 个小时。Calendar.HOUR_OF_DAY 在 17:00 返回 17。所以这里是正确的代码：

```
private OnTimeSetListener timeSetListener = new OnTimeSetListener() {
    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        activeTime.set(Calendar.HOUR_OF_DAY, hourOfDay);
        activeTime.set(Calendar.MINUTE, minute);
        updateTimeDisplay(activeTimeDisplay, activeTime);
        unregisterTimeDisplay();
    }
}; 
```

# simplemodal - 从另一个页面加载的simplemodal链接不起作用

> ID：14309810
> 
> 赞同：1
> 
> 时间：2013-01-14T00:13:44.587
> 
> 标签：simplemodal

我在页面上有几个 simplemodal 实例，一切正常（很棒的脚本！）。

我现在从另一个页面动态加载页面的标题，以便于更新目的（使用[这个](https://stackoverflow.com/questions/4101770/load-content-of-a-div-on-another-page)脚本）。

标题中的“联系”链接应该加载一个模态，但由于它是动态加载的，所以模态不会触发。

有问题的页面演示在[这里](http://homepages.ihug.co.nz/~wardtaka/test/nycoed/league_dropdowns.html)。

“联系”链接位于标题的右侧。从中加载标头的文件在[这里](http://homepages.ihug.co.nz/~wardtaka/test/nycoed/header-page.html)。

我尝试将simplemodal javascript（当前位于主页html的底部）添加到头文件来自的页面中，但没有成功。标题（下拉菜单）中还有其他 javascript 操作仍然可以正常工作。“规则”和“位置”按钮是工作模式的示例。

有人对此有任何想法吗？

对我在一般的 Javascript/编程方面的无能表示歉意

编辑：与未动态加载链接（因此正常运行）的页面相比，一个区别似乎是如果这有帮助，则未加载点击事件。有人有什么想法吗？这么小烦人的事情阻止了这个网站的发展！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:54:57.643

您面临的问题与动态加载的内容上的事件绑定有关。

有很多方法可以解决这个问题，但最好的选择是查看 jQuery 中的[.on()](http://api.jquery.com/on/)函数。

# sql - 在 Sqlite 中查询以删除 blob 重复

> ID：14309813
> 
> 赞同：1
> 
> 时间：2013-01-14T00:14:16.820
> 
> 标签：sql, sqlite, blob

我需要运行删除查询以从表中删除特定 blob 列重复的所有行

我可以依靠 blob 的大小来验证它吗？

有什么建议如何存档吗？

表格示例：

```
ID int
TheName varchar(50)
Content Blob 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:26:05.840

您应该使用 Blob 的哈希（可以使用 SHA256 或 md5）再添加一列（我们称之为 ContentHash）。然后使用新列，您可以轻松识别重复项并将其删除。

使用 Blob 大小是非常不可靠的方式，您可以删除具有相同内容大小的不同帖子。如果可以接受，请使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:48:02.853

SQLite 像处理任何其他字段一样处理 blob，因此您可以使用比较或`GROUP BY`列`Content`。

要查找重复记录，可以将所有相同的 blob 分组在一起，并检查每个组中的记录数；然后从每个组中获取一个 ID：

```
SELECT max(ID)
FROM MyTable
GROUP BY Content
HAVING count(*) >= 2 
```

使用它作为子查询，您实际上可以删除这些记录：

```
DELETE FROM MyTable
WHERE ID IN (SELECT max(ID)
             FROM MyTable
             GROUP BY Content
             HAVING count(*) >= 2) 
```

（如果有三次或更多，您将不得不多次执行此操作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:56:03.567

1.  使用 SELECT DISTINCT 并将所有记录提取到临时表中。
2.  截断第一个表。
3.  选择从临时表到第一个表的所有记录。

# ruby - 为什么Ruby使用yield？

> ID：14309815
> 
> 赞同：15
> 
> 时间：2013-01-14T00:14:35.677
> 
> 标签：ruby

我是红宝石的新手。我使用了很多允许高阶函数的 C# 和 JavaScript，而且我通常每天都使用它们。

Ruby 对我来说似乎有点奇怪。一个`each`函数可能如下所示：

```
def each
    @items.each do |item|
        yield(item)
    end
end

items.each { |item| puts item } 
```

然而，Ruby 也有一些对高阶函数的支持。上面的内容可以重写为：

```
def each(proc)
    @items.each do |item|
        proc.call item
    end
end

items.each -> (item) { puts item }        # Or...
items.each lambda { |item| puts item } 
```

甚至：

```
def each(&proc)
    @items.each do |item|
        proc.call item
    end
end

# No difference in syntax.
items.each { |item| puts item } 
```

这与大多数其他语言更接近，并且只是长了几个字符。而不是显式传递一个块，一切似乎都使用`yield`.

`yield`本身看起来很疯狂、神奇和神秘。毕竟，它会去调用的起源并在调用之后立即抓取一个块。这看起来很奇怪和不自然，而且我不知道此功能在另一种语言中的任何相似之处。

那么有什么关系`yield`呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T01:25:42.757

# 产量是语法糖

这个产量的例子：

```
def do_something_for_each(array)
  array.each do |el|
    yield(el)
  end
end 
```

只是语法糖：

```
def do_something_for_each(array, &block)
  array.each do |el|
    block.call(el)
  end
end 
```

选择您喜欢的语法并随心所欲地使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T01:11:58.100

### Yield 将对象传递给方法的块

> [Yield 是] 转到调用的来源并在调用后立即抓取一个块。

并不真地。`yield`将参数传递给块；它不会“抢块”或用它做任何事情。换句话说，这：

```
def foo; yield self; end
foo { |x| x.inspect }                                       
# => "main" 
```

在这里，`yield`除了将参数传递给传递给方法的块之外，什么也不做`foo`。每个 Ruby 方法都支持一个可选块——除非一个块实际上是强制性的——所以唯一的“魔法”是该语言允许传递一个块，即使它没有明确声明为方法签名的一部分。

### 进一步的例子

要查看此隐式签名的实际效果，请考虑以下内容：

```
def foo; puts block_given?; end
foo { |x| x.inspect } 
```

这将打印“true”并返回`nil`，这是该`puts`方法的预期返回值。

当然，没有`yield`块根本不会做任何事情。例如：

```
def foo; end
foo { |x| x.inspect }
# => nil 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T00:22:10.303

一个优点`yield`是它还允许您使用`next`(like `continue`) 和`break`. 在其他语言中，对于`next`，您可能必须使用`return`，而对于`break`，您可能必须（ab）使用异常。可以说，为这些操作提供内置支持会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-21T05:06:00.080

在大多数情况下，您使用 **yield**直接在方法中执行该块。

**块直接传递给方法，然后方法可以用yield**关键字回调到块。

```
def a_method(a, b)
a + yield(a, b)
end
a_method(1, 2) {|x, y| (x + y) * 3 } # => 10 
```

当您回调该块时，您可以为其参数提供值，就像您在调用方法时所做的那样。此外，与方法一样，块返回它评估的最后一行代码的结果。

# symfony - 为每个响应添加标头

> ID：14309818
> 
> 赞同：11
> 
> 时间：2013-01-14T00:15:42.497
> 
> 标签：symfony, silex

如何使用 Silex 为每个响应“自动”添加标头？

到目前为止，我必须对每个回复进行以下操作：

```
$app->post('/photos'), function () use ($app) {
    return $app->json(array('status' => 'success'), 200, array('Access-Control-Allow-Origin' => '*'));
}); 
```

相反，我想使用 before 过滤器`Access-Control-Allow-Origin: *`自动发送每个请求：

```
// Before
$app->before(function () use ($app) {
    $response = new Response();
    $response->headers->set('Access-Control-Allow-Origin', '*');
});

// Route
$app->post('/photos'), function () use ($app) {
    return $app->json(array('status' => 'success')); // <-- Not working, because headers aren't added yet.
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T09:00:07.460

您可以使用`after`应用程序中间件，这是方法签名：

```
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

$app->after(function (Request $request, Response $response) {
    // ...
}); 
```

这样您就可以获得可以自由修改的 Response 对象。

# java - 静态 InetAddress.getLoopbackAddress() 返回什么？

> ID：14309819
> 
> 赞同：7
> 
> 时间：2013-01-14T00:15:57.367
> 
> 标签：java, network-programming, java-7

Java 7 为该类添加了一个新的静态方法`java.net.InetAddress`：

```
static InetAddress getLoopbackAddress()
Returns the loopback address. 
```

现在我想知道结果中将包含什么地址，IP4 或 IP6 的地址。

[文档](http://download.java.net/jdk7/archive/b123/docs/api/java/net/InetAddress.html#getLoopbackAddress())在这个主题上有点模糊：

> 返回的 InetAddress 将表示 IPv4 环回地址 127.0.0.1 或 IPv6 环回地址 ::1。返回的 IPv4 环回地址只是 127 格式的众多地址之一*。*.*

Java 如何决定是返回`127.0.0.1`还是 IPv6 挂件`::1`？

还是它们都由同一个 InetAdress 对象表示？

结果总是一样吗？这取决于我的网卡吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-05T07:32:34.507

我相信这里给出的其他答案是错误的。

默认情况下，Java*更喜欢 IPv6 堆栈*（如果可用），但*更喜欢 IPv4 地址*。注意细微的差别。这由`java.net.preferIPv4Stack`和`java.net.preferIPv6Addresses`系统属性控制，两者都默认为 false。

因此，`InetAddress.getLoopbackAddress()`几乎总是会返回一个 IPv4 地址。您必须将`java.net.preferIPv6Addresses`系统属性设置`true`为才能使其返回 IPv6 地址。

我在 JDK 源代码中看不到此方法的结果有任何操作系统依赖性。我想不出Java不会（使用默认设置）为此方法返回IPv4地址的操作系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T01:09:01.013

`.getLocalHost()`首先，和 这个方法有一个根本的区别：将获取使用*机器名*`.getLocalHost()`注册的地址，而将返回仅限本地的环回地址。*`.getLoopbackAddress()`*

 *至于返回的地址，它取决于操作系统。`-Djava.net.preferIPv4Stack=true`但是，您可以通过传递给 JVM 参数或使用以下命令来影响 JVM 优先使用 IPv4 ：

```
System.setProperty("java.net.preferIPv4Stack" , "true"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T00:02:34.270

如果您有 IPv6 堆栈并且 Java 未配置为首选 IPv4，它将返回 ::1。

否则它将返回 127.0.0.1。*

# php - undefined 是 php 中的数据类型吗？

> ID：14309820
> 
> 赞同：2
> 
> 时间：2013-01-14T00:16:06.610
> 
> 标签：php, types, undefined

`undefined`php中的数据类型是什么？另外，如何检查它（在变量上，是否未定义）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T00:18:24.697

PHP 中没有“未定义”的数据类型。您可以检查是否使用 设置了变量[`isset`](http://php.net/manual/en/function.isset.php)，但这无法区分根本未设置的变量和具有`null`值的变量：

```
var_dump(isset($noSuchVariable)); // false

$nullVariable = null;
var_dump(isset($nullVariable)); // also false 
```

但是，您可以使用一个技巧[`compact`](http://php.net/manual/en/function.compact.php)来确定变量是否已定义，即使其值为`null`：

```
var_dump(!!compact('noSuchVariable')); // false
var_dump(!!compact('nullVariable')); // true 
```

**[活生生的例子](http://ideone.com/fGqjhm)**。

两者`isset`和`compact`技巧也同时适用于多个变量（使用逗号分隔的列表）。

`null`在处理数组键时，您可以轻松区分值和完全缺失：

```
$array = array('nullKey' => null);

var_dump(isset($array['nullKey'])); // false
var_dump(array_key_exists($array, 'nullKey')); // true 
```

**[活生生的例子](http://ideone.com/bZgihi)**。

在处理对象属性时，也有[`property_exists`](http://php.net/manual/en/function.property-exists.php)，这相当于`array_key_exists`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T00:17:13.347

不，未定义不是 PHP 中的数据类型。`null`您检查是否在 PHP中设置了变量（即以前定义的和未定义的） [`isset()`](http://php.net/isset)：

```
if( isset( $foo)) { 
    echo "Foo = $foo\n";
} else {
    echo "Foo is not set!\n";
} 
```

从文档中，`isset()`将：

> 确定变量是否已设置且不为 NULL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T00:20:49.523

`NULL`是未定义变量的隐含值。[`isset`](http://php.net/isset)将不起作用，因为它忽略了初始化为`=NULL`.

要探测变量是否真的存在，您必须使用一种解决方法：

```
if (in_array("varname", array_keys(get_defined_vars()))) { 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T00:17:49.687

要检查是否定义了变量，您可以尝试以下操作：

```
<?php
if(isset($myvar)){
echo 'your variable is set as' . $myvar;
}else{
echo 'your variable is not set';
}
?> 
```

另外据我所知，“未定义”不是 PHP 中的数据类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T00:21:39.807

没有未定义，但有`null`不同的是。但`undefined`不是有效的数据类型，需要定义所有变量。经过：

```
$Foo = "Test"; 
if (isset($Foo))
{
 echo "Variable Is Defined";
}
else
{
 echo "Variable Is not Defined";
}

if (isset($UndefinedVar))
{
 echo "Variable Is Defined";
}
else
{
echo "Variable Is Not Defined";
} 
```

您对每个语句的输出将是：

> 1) 定义变量
> 
> 2) 变量未定义

* * *

如果未定义的变量是 PHP 或任何编程语言中的有效数据类型，则需要能够使用变量，因为本质上......它们已经在使用中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T22:42:26.887

（可能有点过头了）

*这是模仿您自己的未定义*类型的两种相当“简单”的方法。由于函数调用的一些开销，它可以在您的代码中使用，而无需使用关键字[global](http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global)。

```
<?php
class undef1{function __toString(){return 'undefined';}}
function undef1(){
    static $C;
    if($C===null){$C = new undef1();}
    return $C;
}

echo 'undef1 in string context : '; var_dump( undef1().'');
echo 'undef1 in boolean context: '; var_dump( !!undef1() );
echo 'undef1 compared to itself: '; var_dump( (undef1() === undef1()) );

class undef2 extends SimpleXMLElement{function __toString(){return 'undefined';}}
function undef2(){
    static $C;
    if($C===null){$C = new undef2('<C/>');}
    return $C;
}

echo 'undef2 in string context : '; var_dump( undef2().'');
echo 'undef2 in boolean context: '; var_dump( !!undef2() );
echo 'undef2 compared to itself: '; var_dump( (undef2() === undef2()) );
?> 
```

输出（PHP 5.3.23）：

```
undef1 in string context : string(9) "undefined" // :)
undef1 in boolean context: bool(true)            // :(
undef1 compared to itself: bool(true)            // :)

undef2 in string context : string(0) ""    // :( ?
undef2 in boolean context: bool(false)     // :)
undef2 compared to itself: bool(true)      // :) 
```

在任何一种情况下，让事物感觉像 JavaScript 似乎都很棘手。

为了使对象评估为布尔值 false，第二个解决方案使用PHP 处理*SimpleXMLElement 对象的方式进行*[破解](https://stackoverflow.com/questions/6113387/how-to-create-a-php-class-which-can-be-casted-to-boolean-be-truthy-or-falsy)。但是，如果某些代码更改了*undef2*对象的 XML 值，那么同样的 hack 可能会适得其反。

 **可悲的是，神奇的函数 __ *toString()*在扩展 SimpleXMLElement 类时变得[毫无用处。](http://www.tuxradar.com/practicalphp/6/14/5)也许还有另一个要重载的函数将返回一个自定义字符串，但我找不到它。虽然也许一个空字符串实际上更实用。

有[PECL 运算符重载](http://pecl.php.net/package/operator)可能会使*undef1*类评估为布尔值 false，但扩展是 beta 版，可能不适用于您的 PHP 代码。

*杂项说明：*

似乎*未定义*的类型对于实现 ArrayAccess 的自定义类很有意义，其中可以：

*   *如果$value* === *undefined*则忽略元素的创建
**   如果未定义键或索引，则返回*undefined**

 *在上面的示例中，该类不限于单例。如果你愿意，你可以让它表现得这样： [在 PHP5 中创建单例设计模式](https://stackoverflow.com/questions/203336/creating-the-singleton-design-pattern-in-php5/203359#203359)***

# android - 仅从具有具体化路径的表中选择直接后代

> ID：14309821
> 
> 赞同：4
> 
> 时间：2013-01-14T00:16:17.483
> 
> 标签：android, sql, sqlite, materialized-path-pattern

我正在尝试使用“物化路径”模式将目录结构存储在 Android 应用程序的 SQLite 数据库中。我的单个表有一个主键字段，即文件路径，如下所示：

```
PATH(PK)
/sdcard/foo
/sdcard/bar
/sdcard/foo/music
/sdcard/foo/films
/sdcard/bar/photos 
```

我想获取 /sdcard 目录的直接子项列表。我知道如何使用以下 SQL 获取 /sdcard 的所有（间接）后代：

```
WHERE PATH LIKE '/sdcard/%' 
```

它返回所有行。但是获取顶级子级的 SQL 是什么，所以只返回：

```
/sdcard/foo
/sdcard/bar 
```

这个问题的答案可能会提供洞察力，但我的 SQL 不够强大，无法理解“Scrum Meister 的回应： [基于 mysql 中的路径进行选择”](https://stackoverflow.com/questions/6337560/selecting-based-on-path-in-mysql)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T00:28:06.140

怎么样

```
WHERE PATH LIKE '/sdcard/%' and PATH not like '/sdcard/%/%' 
```

# spring - Spring MVC 和 Hibernate - 如何实现分页？

> ID：14309826
> 
> 赞同：0
> 
> 时间：2013-01-14T00:16:53.877
> 
> 标签：spring, hibernate, spring-mvc, pagination

我已经看到了一些关于该主题的相关问题，例如： [How to implement pagination in Spring MVC 3](https://stackoverflow.com/questions/2245035/how-to-implement-pagination-in-spring-mvc-3)

但在我看来，所有数据都是先加载的，然后再设置页面大小......如果数据库中有数千条记录会发生什么？

我一直在寻找一个明确的例子，但我没有成功。此外，是否有不同的方式来实现分页，使用 Spring 或 Hibernate？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:45:06.507

Spring Roo 为您注释为活动记录的实体生成此代码：

```
@PersistenceContext
EntityManager entityManager;

public static List<Subject> findSubjectEntries(int firstResult, int maxResults) {
    return entityManager().createQuery("SELECT o FROM Subject o", Subject.class).setFirstResult(firstResult).setMaxResults(maxResults).getResultList();
} 
```

# c++ - 有没有一种聪明的方法可以将整数中的位“加倍”？

> ID：14309834
> 
> 赞同：8
> 
> 时间：2013-01-14T00:17:50.990
> 
> 标签：c++, math, binary

假设我有二进制数`0b00110101`。

是否有一组微不足道的算术运算会产生`0b0000111100110011`，其中第一个单词的每一位都重复两次？

是否存在这样一个微不足道的函数来重复位 3、4 或 N 次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T02:06:08.560

看看这个文件：

[https://web.archive.org/web/20140629081102/http://www-graphics.stanford.edu/~seander/bithacks.html#InterleaveBMN](https://web.archive.org/web/20140629081102/http://www-graphics.stanford.edu/~seander/bithacks.html#InterleaveBMN)

它描述了交错两个 16 位数字，并且将其扩展到 32 位数字（这将创建一个 64 位数字）相当简单。您只需将模式继续一个额外的周期。像这样：

```
static const unsigned long long B[] = {
    0x5555555555555555,
    0x3333333333333333,
    0x0F0F0F0F0F0F0F0F,
    0x00FF00FF00FF00FF,
    0x0000FFFF0000FFFF
};
static const unsigned int S[] = {1, 2, 4, 8, 16};

unsigned long long x; // x must initially fit inside 32 bits
unsigned long long z; // z gets the result of x interleaved with itself

x = (x | (x << S[4])) & B[4];
x = (x | (x << S[3])) & B[3];
x = (x | (x << S[2])) & B[2];
x = (x | (x << S[1])) & B[1];
x = (x | (x << S[0])) & B[0];

z = x | (x << 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:23:15.210

我会做一张桌子——这可能是最快的方法。

你当然可以这样做：

```
 int doublebits(int x)
 {
     int y = 0;
     int bit = 0;
     while(x)
     {
        if (x & 1)
            y |= 3 << bit;
        bit += 2;
        x >>= 1;
     }
     return y;
 } 
```

对于一个 8 位数字，您最多可以向下移动 8 次，向右移动 8 次以生成新数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:01:10.683

好的，这一次我相信已经找到了正确的顺序：

[http://oeis.org/search?q=3%2C12%2C15%2C48&sort=&language=&go=搜索](http://oeis.org/search?q=3%2C12%2C15%2C48&sort=&language=&go=Search)

他们建议生成它的一种方法是递归：

a(2n) = 4a(n), a(2n+1) = 4a(n) + 3。

这绝不是微不足道的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T02:11:26.253

看[这里](http://graphics.stanford.edu/~seander/bithacks.html#InterleaveTableObvious)，似乎这些技术要么需要 LUT，要么需要循环。所以，我认为最优雅的方式是`y = x`在计算之前设置时使用“明显方式”（链接）。

```
unsigned short x;   // Interleave bits of x and y, so that all of the
unsigned short y;   // bits of x are in the even positions and y in the odd;
unsigned int z = 0; // z gets the resulting Morton Number.

x = INPUT_PATTERN;
y = x;

for (int i = 0; i < sizeof(x) * CHAR_BIT; i++) // unroll for more speed...
{
  z |= (x & 1U << i) << i | (y & 1U << i) << (i + 1);
} 
```

是的，我知道它不一定是 OP 要求的“聪明”解决方案，但到目前为止，其他答案也包括循环/递归，所以为什么不试一试......

# java - JLabel 不会与 JPanel.setLayout(null) 一起显示。为什么？

> ID：14309837
> 
> 赞同：1
> 
> 时间：2013-01-14T00:18:09.713
> 
> 标签：java, swing, jpanel, jlabel, null-layout-manager

我想在地图上显示许多不同的标签，所以我在面板中使用空布局，并为每个标签调用 setLocation。但是，出于某种原因，标签没有显示。如果我删除 pan.setLayout(null)，那么标签会出现在面板的顶部中心。为什么 null 布局不能与 setPosition 一起使用？

```
package mapa;

import java.awt.*;
import javax.swing.*;

public class Mapa extends JFrame {
  private static JPanel pan;
  private static JLabel lab;

  public Mapa() {
  }

  private static void createAndShowGUI() {
    Mapa frame = new Mapa();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    lab = new JLabel("TEXTO");
    lab.setBackground(Color.black);
    lab.setForeground(Color.white);
    lab.setOpaque(true);
    lab.setVisible(true);

    pan = new JPanel();
    pan.setLayout(null);
    pan.setPreferredSize(new Dimension(640,480));
    pan.add(lab);
    lab.setLocation(100, 100);

    frame.getContentPane().add(pan, BorderLayout.CENTER);
    frame.pack();
    frame.setVisible(true);
  }

  public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        createAndShowGUI();
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T00:22:58.900

这是绝对定位（或`null`布局）的问题。它要求您设置所有组件的大小，否则它们将保持默认的零大小并且不会出现。这就是为什么使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)总是更好的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:22:59.853

您必须明确设置标签的大小；尝试使用`setBounds`而不是`setLocation`. 例如，`lab.setBounds(100,100,200,30);`也不需要调用`setVisible(true);`标签。

除非有充分的理由使用空布局并且您确切地知道自己在做什么，否则始终应该从使用布局管理器开始。

# ios - 安全地存储应用内购买

> ID：14309839
> 
> 赞同：1
> 
> 时间：2013-01-14T00:18:22.353
> 
> 标签：ios, security, encryption, app-store, in-app-purchase

我正在我的应用程序中实现应用内购买，但我有一个无法解决的问题。为了实现，我阅读了几个教程，但所有这些都使用相同的系统来保存是否购买了产品。

```
[[NSUserDefaults standardUserDefaults] setBool: YES forKey:transaction.payment.productIdentifier]; 
```

这很简单，但不安全。使用没有越狱的 iPad，我在没有特殊技能的情况下设法将值从 FALSE 更改为 TRUE。

那么，有没有一种简单的方法来加密这些数据？另一种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:58:32.397

您应该将此类信息存储在您的服务器中，并确保您的应用程序与其进行安全通信。

# cocoa - 为什么我的 Cocoa WebView 不能显示浏览文件对话框？

> ID：14309849
> 
> 赞同：0
> 
> 时间：2013-01-14T00:20:37.253
> 
> 标签：cocoa, webview

我正在创建一个只显示某些网站（oDesk 和 Trello）的[自定义浏览器。](http://odeskdesktop.swdevbali.com)

![自定义浏览器](../Images/9a09bf2a7e819517704ce8b0765967c1.png)

我使用 Web View 来显示它，将它嵌入到选项卡控件中。但我现在意识到，如果它需要文件附件，它并没有显示浏览文件对话框。

有什么解决方法吗？或者，这是 WebView 控制器的限制吗？

编辑：我已经检查过了，它发生在任何需要文件附件的站点（好吧，实际上只是测试 gmail 和[odesk ）。](http://www.odesk.com)当我点击它时，什么也没有发生。没有打开浏览对话框。这两张照片：oDesk 附件： ![桌面](../Images/b11f9163e0be694982fc298c39bf82c4.png)

邮箱附件：

![邮件](../Images/b9ee5cc2fda96bac4ae25d65aa4067f7.png)

编辑这是加载相关网站的代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[webViewOdesk mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.odesk.com"]]];
    [[webViewTrello mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://trello.com"]]];
    [[webViewGmail mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://gmail.com"]]];
    [[webViewGoogle mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];

    [window setReleasedWhenClosed:NO]; 
} 
```

我在这里添加了另外两个网站：gmail 和 google

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T07:30:49.427

OSX webkit 默认不为您实现浏览器面板，您需要设置 UI 委托并自己制作。

```
- (void)webView:(WebView *)sender runOpenPanelForFileButtonWithResultListener:(id < WebOpenPanelResultListener >)resultListener
{
    NSOpenPanel* openDlg = [NSOpenPanel openPanel];

    [openDlg setCanChooseFiles:YES];

    [openDlg setCanChooseDirectories:NO];

    // process the files.

    if ( [openDlg runModal] == NSOKButton )
    {
        NSArray* URLs = [openDlg URLs];
        for (int i = 0; i <[URLs count]; i++) {
            NSString *filename = [[URLs objectAtIndex:i]relativePath];
            [resultListener chooseFilename:filename];
        }
    }

} 
```

# ruby-on-rails - Ruby On rails：使用 Rails 生成

> ID：14309851
> 
> 赞同：1
> 
> 时间：2013-01-14T00:20:51.347
> 
> 标签：ruby-on-rails

我正在尝试`rails generate`通过运行来生成集成测试

```
rails generate integration_test static_pages 
```

但是，它没有调用 rspec 并在 spec/requests 目录中创建 static_pages_spec.rb ，而是向我显示了这个错误：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:181:in `default_controller_and_action': 缺失:co
ntroller (ArgumentError)
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1304:in `new'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1270:in `each'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:1270:in `match'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:507:in `map_method'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/mapper.rb:469:in `get'
  来自 C:/Sites/rails_projects/sample_app/config/routes.rb:2:in `block in top (required)>'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.10/lib/action_dispatch/routing/route_set.rb:260:in `draw'
  来自 C:/Sites/rails_projects/sample_app/config/routes.rb:1:in `'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:245:in `load'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:245:in `block in load'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:236:in `load_dependency'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:245:in `load'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:40:in `each'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:40:in `load_paths'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:16:in `reload!'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:26:in `block in updater'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/file_update_checker.rb:78:in `call'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.10/lib/active_support/file_update_checker.rb:78:in `execute'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application/routes_reloader.rb:27:in `updater'
  来自 C:in `execute_if_updated' 来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1 0/lib/rails/application/finisher.rb:66:in `阻止'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `instance_exec'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:30:in `run'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:55:in `block in run_initializers'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `each'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/initializable.rb:54:in `run_initializers'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application.rb:136:in `initialize!'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/railtie/configurable.rb:30:in `method_missing'
  来自 C:/Sites/rails_projects/sample_app/config/environment.rb:5:in `'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application.rb:103:in `require'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/application.rb:103:in `require_environment!'
  来自 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.10/lib/rails/commands.rb:25:in `'
  来自脚本/rails:6:in `require'
  来自脚本/rails:6:in `'

```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:17:47.680

我刚刚遇到了同样的问题。我输入`root`了我的 routes.rb 文件并忘记添加一个参数。如果我提出`get`或`post`没有任何论据，我会看到同样的事情发生。

请务必检查您的路线！

# git - 在脚本中删除本地 git 分支行为异常

> ID：14309852
> 
> 赞同：1
> 
> 时间：2013-01-14T00:20:54.340
> 
> 标签：git, branch

根据我的流程，我将新更改推送到我的服务器 new_release 分支，然后服务器上的脚本负责应用新版本。在服务器上执行脚本时，git repo 有两个分支——master 和 new_release。在给定点，脚本执行以下操作：

```
#reset changes on the master branch
echo "Resetting master changes..."
git reset --hard HEAD
if [ $? -ne 0 ]; then
    echo "Error: Cannot reset master changes"
    exit 1
fi

#remove untracked files
echo "Removing untracked new files..."
git clean -fd
if [ $? -ne 0 ]; then
    echo "Error: Cannot clean the repository"
    exit 1
fi

#merge changes from new_release into master
echo "Merging master with the new_release..."
git merge new_release --ff-only
if [ $? -ne 0 ]; then
    echo "Error: Cannot merge changes from new_release into master"
    exit 1
fi

#remove new release branch
echo "Deleting the new_release branch..."
git branch –d new_release
if [ $? -ne 0 ]; then
    echo "Error: Cannot remove the new_release branch"
    exit 1
fi 
```

但是，一旦我执行脚本，我会看到“git branch -d new_release”而不是删除本地分支，而是将其留在那里，然后创建了一个名为“d”的新分支！

此外，我看到有关该新“d”分支的以下输出：

```
$ git branch
* master
new_release
d

$ git branch -d d
error: remote branch 'd' not found.
$ git show-branch d
fatal: bad sha1 reference d 
```

我在脚本中做错了什么？还有人可以帮助我从那个错误中恢复并摆脱那个“d”分支吗？它在我的生产服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:25:09.560

首先，+1 用于**准确**显示您所做的事情，因为如果您在不显示实际脚本的情况下描述了您*希望它做什么，我就不会明白这一点。*很好的问题写作。

您是否从网上复制了该脚本的部分内容？

这不会像您认为的那样做：

```
git branch –d new_release 
```

那不是`-d`它`–d`是一个不同的字符（它是一个三字节的 UTF8 字符，而不是 ASCII 45。）所以你创建了一个名为的新分支`–d`并且有趣的破折号字符没有出现在你的终端上，可能是因为你'没有在您的终端设置中使用 UTF-8 语言环境，所以它只是显示为`d`. 你不能再次摆脱它的原因`git branch -d d`是它真的被称为`–d`not `d`。

所以要修复脚本，将脚本更改为`-d`它应该删除分支。

要删除不需要的分支，请尝试：

```
git branch -d –d
git push origin :–d 
```

第一个命令在本地删除它，第二个命令远程删除它。这是假设分支名称是“-d”，而不是删除第一个字符的其他东西，但我认为它应该可以工作。

# viewmodel - 如何使用 MVVMCross 构建视图模型

> ID：14309854
> 
> 赞同：8
> 
> 时间：2013-01-14T00:20:57.180
> 
> 标签：viewmodel, structure, mvvmcross, decouple, sphero-api

我正在迈出 MvvmCross 框架的第一步，我正在尝试确定项目和类结构方面的最佳方法。我现在最关心的是决定如何组织我的视图模型以便在它们之间共享数据，同时遵循 mvvm 指导。

我有关于视图和各自视图模型（主要和配置）的简单示例。主视图有一些控件绑定到视图模型中的属性。配置视图使用户能够更改文本颜色、列表中的项目数量等......当用户更改配置时，这应该反映在主视图中。

我的第一种方法是创建单独的视图和视图模型。但是如何通知主视图配置已更改？[我在Github/Slodge](https://github.com/slodge/BallControl)下看到了 Sphero 项目，我意识到视图模型可以直接引用其他视图。这样，每次配置更改时通知主视图相当容易。但这不是 mvvm 推荐的解耦视图模型的偏差吗？

我能否就处理这种类型的类结构的最佳方法获得一些见解？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T08:58:23.457

> the best way to approach this type of class structuring

In my opinion, the most important measure for "the best way" is to choose a way that means your app works.

* * *

The example you've looked at - sphero ball control - has examples both of independent view models (home, gangnam, about, sphero, etc), and it has an example of some view models that know about each other - the sphero view model and it's sub view models.

In this particular case, the reason those view models all know about each other is because they are all part of a single display - they are designed to sit together inside a single grid, pivot, or tabbed UI. To assist with them cooperating I've given them references to each other via IParent and IChild interfaces.

> isn't this a deviation of the decoupled viewmodels that mvvm recommends?

I admit this does mean that the design isn't perfectly decoupled, and that if I need to move or reuse those child vm's in the future, then I might need to do a little code refactoring - but right now the design works well for me, and I personally am happy do that refactoring in the future if I need to.

* * *

> My biggest concern now is to decide how should I organize my viewmodels in order to share data between them and at the same time to follow the mvvm guidance

If you are building a composite (tabbed) view and you're not happy using aggregated view models (like the sphero vm and it's subviews), then please don't.

I'm sure the same effect could have been achieved in sphero using one big view model, using multiple view models communicating via a messenger or using multiple view models communicating via one or more custom services.

For the particular example you give - of a configuration and main view, I don't think this fits the tabbed scenario - and I would probably code this using a messenger - that would provide me with a flexible mechanism for broadcasting and receiving change notifications around various parts of the app.

However, other designs are definitely available and viable - eg you could easily just ask the view model to refresh its configuration each time its shown (doing this would require hooking into onnavigatedto, viewwillapear and on resume calls in the views).

* * *

In summary:

*   I agree with your general goal of writing independent view models and making them communicate via services.
*   in the case of a main page and a settings page, I probably would use 2 separate vm's and a messenger
*   In the case of tabbed/pivot UIs I personally have broken away from that perfect paradigm - but there's nothing in mvx that forces you to follow me

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:03:10.230

在我使用 MvvmCross 构建的项目中，我决定使用视图模型来表示视图（屏幕）及其状态。我的视图模型使用 ISQLiteConnectionFactory 连接到 SQLite 数据库。我使用存储在 SQLite 数据库中的模型来表示项目中事物的状态。我的视图模型从 SQLite 数据库中获取模型，分析它们并做出反应。

例子。我有一个屏幕，用户可以在其中标记他/她想要在设备上下载一段数据。我的模型有一个标志是应该下载还是已经下载了那条数据。当我打开另一个负责下载数据的屏幕时，它会查看 SQLite 中是否有任何模型被标记为下载并对其做出反应。

这就是我决定在视图模型之间共享数据的方式。优点是数据始终保存在数据库中，强制关闭应用程序不会导致数据丢失（或未按预期发生）。

# javascript - 如何提醒（）一个img的URL？

> ID：14309856
> 
> 赞同：0
> 
> 时间：2013-01-14T00:20:59.183
> 
> 标签：javascript, popup

我正在尝试通过 JavaScript 弹出一个弹出窗口，以弹出 img 标签定义的 IMG URL`src=`

我不知道怎么称呼它。

```
alert(document.getElementById("my_image").src); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:28:02.427

最好使用以下`getAttribute()`功能：

```
var imageSource = document.getElementById("my_image").getAttribute('src');
alert(imageSource); 
```

Using`getAttribute()`比简单的 using 更适合您的应用程序`element.src`，因为它将返回属性内显式定义的值，而不是解析后的值。

在此处查看比较> [http://jsfiddle.net/9dAjL/](http://jsfiddle.net/9dAjL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:26:12.380

这段代码很好

```
 alert(document.getElementById("my_image").src); 
```

我会写得更像这样

```
 var imageSrc = document.getElementById("my_image").src;
 alert(imgSrc); 
```

但毫无疑问，它很好，我猜你没有正确地将它附加到点击事件或任何事件，这里是 onload 事件

```
 window.onload = function() {
     var imageSrc = document.getElementById("my_image").src;
     alert(imgSrc);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T00:29:30.833

有不同的方法。试试这些：

```
<script type="text/javascript">
window.onload = function()
{
    alert(document.getElementById("my_image").src);
    alert(document.getElementById("my_image").getAttribute('src'));
}
</script>

<img src="http://localhost/test.jpg" id="my_image" /> 
```

更具体地告诉你需要什么。

或者您可以使用名称：

```
<script type="text/javascript">
window.onload = function()
{

    alert(document["ima"].src);
}
</script>

<img src="http://localhost/ima.jpg" name="ima" /> 
```

# xml - 与 DITA 的关系

> ID：14309860
> 
> 赞同：0
> 
> 时间：2013-01-14T00:21:58.453
> 
> 标签：xml, documentation, dita

我正在尝试在一系列概念文档之间建立关系。因此，给定三个文档“A”、“B”和“C”，我希望它们分别显示如下内容：

> # 一个 ...
> 
> ## 相关概念
> 
> *   乙
> *   C

由于某种原因，以下内容无法正常工作：

```
<reltable>
    <relrow>
        <relcell>
            <topicgroup collection-type="family">
                <topicref href="topics/a.dita" type="concept"/>
                <topicref href="topics/b.dita" type="concept"/>
                <topicref href="topics/c.dita" type="concept"/>
            </topicgroup>
        </relcell>
    </relrow>
</reltable> 
```

以下工作，但这肯定是不正确的：

```
<reltable>
    <relrow>
        <relcell>
            <topicgroup collection-type="family">
                <topicref href="topics/a.dita" type="concept"/>
                <topicref href="topics/b.dita" type="concept"/>
                <topicref href="topics/c.dita" type="concept"/>
            </topicgroup>
        </relcell>
        <relcell>
            <topicgroup collection-type="family">
                <topicref href="topics/a.dita" type="concept"/>
                <topicref href="topics/b.dita" type="concept"/>
                <topicref href="topics/c.dita" type="concept"/>
            </topicgroup>
        </relcell>
    </relrow>
</reltable> 
```

我正在使用XMLMind的开源[DITA 转换器。](http://www.xmlmind.com/ditac/what_is_ditac.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:15:14.530

您可以阅读有关 reltables 的 DITA 1.2 规范：

[http://docs.oasis-open.org/dita/v1.2/os/spec/langref/reltable.html#reltable](http://docs.oasis-open.org/dita/v1.2/os/spec/langref/reltable.html#reltable)

规范还包含一个示例。规格说明如下：

在输出时，应将链接添加到同一行但不在同一单元格中的主题。

因此，您的主题需要位于不同的单元格和同一行中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:22:27.453

请注意，DITA Open Toolkit 没有规定的限制，您的第一个代码可以正常工作。

但是，您可以在关系表的上下文之外使用@collection-type 属性。在该工具支持 DITA 规范的范围内，这甚至可以使用 DITA 转换器工具。

您没有说明您的可交付成果是在线帮助主题还是 PDF。如果您正在生成帮助主题，您可以在导航地图中包含此代码：

```
<topicgroup collection-type="family" toc="no">
    <topicref href="topics/a.dita" type="concept"/>
    <topicref href="topics/b.dita" type="concept"/>
    <topicref href="topics/c.dita" type="concept"/>
</topicgroup> 
```

结果是创建了主题之间的链接，但导航中不会列出主题的新实例。

当然，如果这三个主题已经是导航中父节点的唯一子节点，您可以简单地将@collection-type 属性添加到父节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T15:01:18.813

由于 DITAC 转换器具有该限制，我建议将其作为错误报告给 DITAC。也就是说，您还可以创建一个看起来像这样的 reltable，以便它可以在 DITAC 中工作

```
<reltable>
    <relrow>
       <relcell>
           <topicref href="topics/a.dita" type="concept"/>
        </relcell>
        <relcell>
            <topicref href="topics/b.dita" type="concept"/>
        </relcell> 
        <relcell>
            <topicref href="topics/c.dita" type="concept"/>
     </relrow>
</reltable> 
```

在 DITA-OT 中，所有这 3 个主题都将相互指向，并被分类为概念主题。它应该在 DITAC 中同样工作。根本不需要 @collection-type 属性。

从语义上讲，我更喜欢在通过元素中的@collection-type 属性表示的 reltable 中查看我的关系，所以我很清楚发生了什么。

HTH。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:08:03.627

看来这实际上是 XML Mind 对 DITA 转换器工具的一个不幸限制：

> ## 生成链接
> 
> 属性 collection-type，无论其值如何，都在 reltable 元素中被忽略。

参考：[http ://www.xmlmind.com/ditac/_distrib/doc/manual/limitations.html](http://www.xmlmind.com/ditac/_distrib/doc/manual/limitations.html)

# java - Swing GUI 渲染缓慢？

> ID：14309861
> 
> 赞同：-1
> 
> 时间：2013-01-14T00:21:58.627
> 
> 标签：java, swing, awt

嘿，我有以下代码，其中有 10 个 jbutton。问题是每次我单击按钮时，它都会执行设置自身 setVisible(flase) 的操作，但与此同时，它旁边的组件也会消失。但是，如果我只是将鼠标悬停在技术上仍然可见的组件上，它们就会再次变得可见。例如。如果我编译程序并运行它，程序可以工作，但我必须将鼠标悬停在组件上才能使它们可见（我不希望这样）。一旦组件可见，如果我单击按钮 1，则按钮 1 的操作是设置 one.setVisible(false);。它确实如此，但一旦完成，按钮 2 也会随之消失。但是，如果我将鼠标悬停在 button2 上，它会重新出现在屏幕上，但如果我将鼠标悬停在 button1 上，它就不会再次出现。正如我所做的那样，它消失了。

```
package dealORnodeal;

import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JTextArea;

public class Deal extends JFrame implements ActionListener
{
private Container contentPane = getContentPane();
private JButton one = new JButton("1"),two = new JButton("2"),three = new JButton("3"),
        four = new JButton("4"),five = new JButton("5"),ones = new JButton("6"),twos = new JButton("7"),
                threes = new JButton("8"),fours = new JButton("9"),fives = new JButton("10");
private JTextArea text = new JTextArea(266,103);
private JMenu menu1 = new JMenu("JumpTo");
private JMenuBar bar1 = new JMenuBar();
private ImagePanel bg = new ImagePanel(new ImageIcon("bg.jpg").getImage());
public Deal()
{

    paintComponent(getGraphics());
}
public void paintComponent(Graphics g)
{

    setTitle("Deal Or No Deal");
    setSize(800,850);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setLayout(null);
    contentPane.add(bg);

    JMenuItem item1;

    item1 = new JMenuItem("Start Game");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Rules");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Credits");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Menu");
    item1.addActionListener(this);

    menu1.add(item1);
    bar1.add(menu1);
    setJMenuBar(bar1);

    //GAME CODE
    text.setBounds(266, 200, 266,103);
    text.append("Welcome to The World ");

    one.setBounds(25,151,195,55);
    one.setBackground(new Color(255,215,0));
    one.addActionListener(this);

    two.setBounds(25,251,195,55);
    two.setBackground(new Color(255,215,0));
    two.addActionListener(this);

    three.setBounds(25,347,195,55);
    three.setBackground(new Color(255,215,0));
    three.addActionListener(this);

    four.setBounds(25,447,195,55);
    four.setBackground(new Color(255,215,0));
    four.addActionListener(this);

    five.setBounds(25,547,195,55);
    five.setBackground(new Color(255,215,0));
    five.addActionListener(this);

    ones.setBounds(583,151,195,55);
    ones.setBackground(new Color(255,215,0));
    ones.addActionListener(this);

    twos.setBounds(583,251,195,55);
    twos.setBackground(new Color(255,215,0));
    twos.addActionListener(this);

    threes.setBounds(583,347,195,55);
    threes.setBackground(new Color(255,215,0));
    threes.addActionListener(this);

    fours.setBounds(583,447,195,55);
    fours.setBackground(new Color(255,215,0));
    fours.addActionListener(this);

    fives.setBounds(583,547,195,55);
    fives.setBackground(new Color(255,215,0));
    fives.addActionListener(this);

    Container contentPane2 = new Container();

    add(one);
    add(two);
    add(three);
    add(four);
    add(five);
    add(ones);
    add(twos);
    add(threes);
    add(fours);
    add(fives);
    add(text);

    //GAME CODE END
    invalidate();
    setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) 
{

    //Game Boxes Response
    if(e.getSource()==one)
    {
        one.setVisible(false);
    }
    if(e.getSource()==two)
    {
        two.setVisible(false);
    }
    if(e.getSource()==three)
    {
        three.setVisible(false);
    }
    if(e.getSource()==four)
    {
        four.setVisible(false);
    }
    if(e.getSource()==five)
    {
        five.setVisible(false);
    }
    if(e.getSource()==ones)
    {
        ones.setVisible(false);
    }
    if(e.getSource()==twos)
    {
        twos.setVisible(false);
    }
    if(e.getSource()==threes)
    {
        threes.setVisible(false);
    }
    if(e.getSource()==fours)
    {
        fours.setVisible(false);
    }
    if(e.getSource()==fives)
    {
        fives.setVisible(false);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:32:40.257

这`paintComponent(getGraphics());`不是绘画的方式。这也不是如何将组件添加到容器中的。

你永远不能依赖`getGraphics`返回一个有效的图形上下文。摆脱`paintComponent`方法，简单地从构造函数构造 UI。

（个人），这`private Container contentPane = getContentPane();`不是一个好主意。如果其他开发人员调用会发生什么`setContentPane`？

`null`布局管理器因与你的 UI 搞混而臭名昭著，你最好使用一个或多个布局管理器......个人......

否则，我似乎无法复制您的问题...

# jquery - jQuery Validation errorPlacement 不起作用

> ID：14309863
> 
> 赞同：0
> 
> 时间：2013-01-14T00:22:20.397
> 
> 标签：jquery, validation

jQuery Validation`errorPlacement`方法未触发。事实上，唯一触发的方法是`showErrors`. 我想我错过了一些东西。代码如下。

```
 errorContainer: '#error-messages',
    showErrors: function (errors) {
        $("#error-messages").dialog({
            modal: true,
            title: 'Errors',
            buttons: {
                Ok: function () {
                    $(this).dialog("close");
                }
            }
        });
        return true;
    },
    errorLabelContainer: "#error-messages ul",
    wrapper: "li",
    errorPlacement: function (error, element) {
        if (element.attr('name') == 'a') {      
            error.appendTo($('#restErrorDate'));
        }
    },
    debug: true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:30:38.650

我相信`errorLabelContainer`会胜出`errorPlacement`的。前者旨在在一个地方显示所有错误，使后者变得多余，因此不被使用。

在您的情况下，您想要`UL`其父级中的所有错误`ID=error-messages`

# nhibernate - NHibernate 标准和预测

> ID：14309864
> 
> 赞同：2
> 
> 时间：2013-01-14T00:22:29.840
> 
> 标签：nhibernate, nhibernate-criteria

我的实体如下：

(1) Course (with details) (2) Student (with details) (3) StudentEnrolment（学生到课程的一对多映射）

现在我正在尝试创建一个投影类（称为 CourseSummary），其中包含课程的几个字段以及该课程中的学生总数（称为 TotalEnrolments）。在下面的代码中，我也包含了课程的校园（尽管与我的问题无关）。

我已经到达这里：

```
 var courseSummaries = session.CreateCriteria<Course>()
               .CreateAlias("Campus", "cmp")
               .SetProjection(Projections.ProjectionList()
                                  .Add(Projections.Property("CourseId"), "CourseId")
                                  .Add(Projections.Property("StartDate"), "StartDate")
                                  .Add(Projections.Property("EndDate"), "EndDate")
                                  .Add(Projections.Property("cmp.CampusId"), "CampusId")
                                 //What here for "TotalEnrolments"?
                                  ).SetResultTransformer(Transformers.AliasToBean<Course>())
               .List<Course>(); 
```

但是我应该如何加入 StudentEnrolment 类并从中获取相关记录的总数？

我是 NHibernate 世界的新手，因此我的问题可能是非常初步的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:29:17.413

```
var courseSummaries = session.CreateCriteria<Course>("c")
       .CreateAlias("Campus", "cmp")
       .SetProjection(Projections.ProjectionList()
           .Add(Projections.Property("CourseId"), "CourseId")
           .Add(Projections.Property("StartDate"), "StartDate")
           .Add(Projections.Property("EndDate"), "EndDate")
           .Add(Projections.Property("cmp.CampusId"), "CampusId")
           .Add(Projections.Subquery(DetachedCriteria.For<Student>()
               .Add(Restriction.Eq("Course.Id", "c.Id"))
               .SetProjections(Projections.RowCount()), "TotalStudents")
       )
       .SetResultTransformer(Transformers.AliasToBean<CourseSummary>())
       .List<CourseSummary>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:36:42.157

在经历了 Firo 的回答并自己做了一些调整之后，我解决了它，如下所示：

```
var courseSummaries = session.CreateCriteria<Course>("c")
   .CreateAlias("Campus", "cmp")
   .SetProjection(Projections.ProjectionList()
       .Add(Projections.Property("CourseId"), "CourseId")
       .Add(Projections.Property("StartDate"), "StartDate")
       .Add(Projections.Property("EndDate"), "EndDate")
       .Add(Projections.Property("cmp.CampusId"), "CampusId")
       .Add(Projections.Subquery(DetachedCriteria.For<StudentEnrolment>("s")
           .Add(Restriction.EqProperty("s.Course.CourseId", "c.CourseId"))
           .SetProjections(Projections.RowCount()), "TotalStudents")
   )
   .SetResultTransformer(Transformers.AliasToBean<CourseSummary>())
   .List<CourseSummary>(); 
```

# c# - 存储六个单位的最小可能方法

> ID：14309865
> 
> 赞同：2
> 
> 时间：2013-01-14T00:22:34.953
> 
> 标签：c#, bit-shift

如果我有数字 1、2、3、4、5 和 6，并且我想以尽可能最小的方式存储它们的某种组合，我会怎么做？

例如，我可能想要存储 1、4 和 5。或者可能是 2、4、5 和 6。或者甚至可能是所有六个数字。我将始终至少有一个需要存储的号码。我想我可能已经看到通过位移实现了这一点，但我并不完全理解它是如何工作的。对于它的价值，我的最终目标是节省绝对最大的空间，因为这些值需要存储在具有极小存储空间的硬件设备上。

编辑 - - - - - - - - - - - - - - - - - - - -

感谢大家提出的所有伟大建议。我只是想澄清一下，我的应用程序中的实现不一定需要尽可能小，只要我理解并且对我身后的另一个开发人员有意义。最重要的是能够以尽可能最小的方式表示这些值，因为我最终必须用其他几个值构建一个字节数组，并将其全部写入存储空间非常有限的设备。再次感谢大家的精彩建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T00:26:53.127

```
[Flags]
public enum NumberEnum : byte
{
    None = 0,
    One = 1,
    Two = 2,
    Three = 4,
    Four = 8,
    Five = 16,
    Six = 32
};

public string ExampleMethodWithNumberCombinationsAsAEnum(NumberEnum filterFlags = 0)
{
 if ((filterFlags & NumberEnum.One) == NumberEnum.One)
 {
    //Do something with one
 }

 if (((filterFlags & NumberEnum.One) == NumberEnum.One) && ((filterFlags & NumberEnum.Two) == NumberEnum.Two))
 {
    //Do something with one & two
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:32:03.120

你说过你需要节省空间，但你没有提到 RAM。这是一种需要更多虚拟内存的方法，但可以让您编写更简单的代码。

```
readonly Dictionary<int, int> _dictionary =
        Enumerable.Range(1, 6).ToDictionary(i => i, i => 1 << i - 1);

int GetFlags(params int[] ints)
{
    //Do checks on the dictionary, etc.
    return ints.Aggregate(0, (current, i) => current | _dictionary[i]);
} 
```

然后，您可以通过以下方式使用代码：

```
var a = 1;
var b = 4;
var c = 5;
var result = GetFlags(a, b, c); 
```

或者，`GetFlags`可以通过以下方式重写的主体：

```
var result = 0;
foreach (var i in ints)
    result |= _dictionary[i];
return result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T00:37:49.080

```
[Flags]
public enum UIntEnum : byte
{
    None = 0x0,
    One = 0x1,
    Two = 0x2,
    Three = 0x4,
    Four = 0x8,
    Five = 0x10,
    Six = 0x20
};

public static class UIntEnumExtensions
{
    public static Boolean ContainsOne(this UIntEnum enum)
    {
        // For .NET < 4.0
        // return ((enum & UIntEnum.One) == UIntEnum.One);
        // For .NET >= 4.0
        return enum.HasFlag(UIntEnum.One);
    }

    public static Boolean ContainsTwo(this UIntEnum enum)
    {
        // For .NET < 4.0
        // return ((enum & UIntEnum.Two) == UIntEnum.Two);
        // For .NET >= 4.0
        return enum.HasFlag(UIntEnum.Two);
    }

    // And so on...

    public static List<UInt32> GetComponents(this UIntEnum enum)
    {
        List<UInt32> values = new List<UInt32>();

        if (enum.ContainsOne())
            values.Add((UInt32)1);

        if (enum.ContainsTwo())
            values.Add((UInt32)2);

        // And so on...
    }
} 
```

然后，例如：

```
UIntEnum enum = UIntEnum.Two | UIntEnum.Six;

if (enum.ContainsSix())
    Console.WriteLine("Enum contains Six!");

foreach (UInt32 value in enum.GetComponents())
    Console.WriteLine("Enum contains " + value.ToString() + "!"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T00:49:15.160

您可以使用字节的六位来存储组合，这意味着您可以在每个字节中存储组合的三分之一和三分之一，或者在三个字节中存储四种组合：

```
+--------+--------+--------+
|12345612|34561234|56123456|
+--------+--------+--------+ 
```

要将值数组转换为 6 位值：

```
public static int GetCombination(int[] combination) {
  int n = 0;
  foreach (int a in combination) {
    switch (a) {
      case 1: n |= 1;
      case 2: n |= 2;
      case 3: n |= 4;
      case 4: n |= 8;
      case 5: n |= 16;
      case 6: n |= 32;
    }
  }
  return n;
} 
```

要将其中四个值组合成三个字节：

```
public static byte[] PackCombinations(int[] values) {
  byte[] result = new byte[3];
  result[0] = (byte)((values[0] << 2) | (values[1] >> 4));
  result[1] = (byte)((values[1] << 4) | (values[2] >> 2));
  result[2] = (byte)((values[2] << 6) | (values[3]));
  return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T00:29:47.747

不难想象你可以将它存储在一个`bool`s 数组中。现在，考虑一下，什么是一点？一个位可以代表两种状态，就像一个`bool`. 现在，整数由位组成。我所知道的 C# 可用的最小的一个是`byte`. A`byte`有八位。您可以将其中一个位用于您必须存储的每个数字。让我们从最低有效位到最高有效位编号。我们可以将 1 的存在存储在第 0 位中，将 2 存储在第 1 位中，将 3 存储在第 2 位中，等等。现在我们有了数据的表示。

我们如何打包数据？你提到了位移，你是对的。您可能想要使用位移，但您可能还需要使用一些其他操作；尤其是`~`(NOT)、`&`(AND) 和`|`(OR)。

总之，你会有这样的事情：

```
byte flags = 0;

// Let's add 2.
flags |= 1 << (2 - 1);

// Is 2 in it?
if(flags & (1 << (2 - 1)) != 0) {
    // Yes.
}else{
    // No.
}

// Let's remove 2.
flags &= ~(1 << (2 - 1)); 
```

这是如何运作的？如果`1`（位位置 0 中的 1）表示`1`存在，我们可以将其左移位位置时间以在该位位置获得 1。将两个字节进行或运算将得到集合的并集；ANDing 将采取交叉点。`a & ~b`从 中删除所有设置的`b`位`a`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T00:30:57.867

*如果*C# 可以处理 C++ STL 的东西（不知道），请参阅`std::bitset`-[一个参考](http://www.cplusplus.com/reference/bitset/bitset/)。

否则，是的，只需一个热位就可以将它们全部放在一个字节中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T17:30:13.463

您可以尝试以下存储算法。它只需要一个 6 位的盒子。

```
class StorageBox
    {
        bool[] box = new bool[] { false, false, false, false, false, false };

        public void Addtobox(int number)
        {
            if (number<7 && number >0)
                box[number - 1] = true;
        }

        public string WhatIsinBox()
        {
            string result = "";

            for (int i = 0; i <= 5; i++)
            {
                if (box[i])
                    result = result + (i+1).ToString() + ",";

            }
            return result.Substring(0, result.Length - 1);
        }

        public void ClearBox()
        {
            box = new bool[] { false, false, false, false, false, false };
        }
    }

    class ExecuteSample
    {
        static void Main(string[] args)
        {
            var box = new StorageBox();

            box.Addtobox(5);
            box.Addtobox(3);
            box.Addtobox(4);

            Console.WriteLine(box.WhatIsinBox());

            Console.Read();
        }

    } 
```

# c - 在数组中查找总和最接近或等于给定数字的 5 个元素

> ID：14309869
> 
> 赞同：2
> 
> 时间：2013-01-14T00:23:02.557
> 
> 标签：c, arrays, algorithm

我需要一些提示来找到返回`5`总和最接近或等于给定数字的元素的算法。

这些元素是大于的数字，`0`并且在尝试获取给定数字时应仅“使用”一次。

假设我们有一个数组`{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}`和我们想要得到的数字`21`。它应该返回`{2, 3, 4, 5, 7}`。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:03:44.543

```
ok n loops all begin with counts = 0 (in this case n = 5 )
all loops end at MainArraySize (in this case MainArraySize = 10)

int RequiredSum = ValueOfRequiredSum;
int CurrentSum = 0;
int CurrentClosestSum = 0;
int[] Finalindexesrequired = int[5]{0,0,0,0,0};

//U might want to add Duplicates 
duplicate_count ++;
int[5][] FinalindexesRequiredDuplicates= new int[5][];

for(int loopcount1 = 0, loopcount1++, loopcount < MainArraySize-1)
{
for(int loopcount2 = 0, loopcount2++, loopcount < MainArraySize-1)
{..
..
..
for(int loopcount5 = 0, loopcount5++, loopcount < MainArraySize-1)
{

-------------------------------------
Now this is all inside the 5th loop
//Process logic here
//Looping for first time
if(CurrentSum = 0)
{Currentsum = MainArray[loopcount1] + MainArray[loopcount2] + .... + MainArray[loopcount5]
CurrentClosestSum = CurrentSum
FinalindexesRequired[0] = loopcount1;
FinalindexesRequired[1] = loopcount2;
..
..
FinalindexesRequired[4] = loopcount2;
}

Currentsum = MainArray[loopcount1] + MainArray[loopcount2] + .... + MainArray[loopcount5]

if((RequiredSum - CurrentSum) < (RequiredSum - CurrentClosestSum))
{
//Am gonna change the indexes because the currentsum ITERATION is closer
FinalindexesRequired[0] = loopcount1;
FinalindexesRequired[1] = loopcount2;
..
..
FinalindexesRequired[4] = loopcount2;

//If u wanted the duplicates also, since u came to a fresher ITERATION
Reset the duplicatecount to 0 and remove all duplicates because they aint valid anymore
}

//What u Might want to Add is this
if((Requiredsum - CurrentSum) = (RequiredSum - CurrentCosestSum))
{
//Hey we got Duplicates
duplicate_count ++;
FinalindexesRequiredDuplicates[0][duplicate_count] = loopcount1;
FinalindexesRequiredDuplicates[1][duplicate_count] = loopcount1;
..
..
FinalindexesRequiredDuplicates[5][duplicate_count] = loopcount1;
}

}

-------------------------------- End of 5th loop
}}}}}

//FINALLY AFTER EXITING I THINK U HAVE UR ANSWER IN

MAINARRAY[FINALINDEXESREQUIRED[0]]
MAINARRAY[FINALINDEXESREQUIRED[1]]
MAINARRAY[FINALINDEXESREQUIRED[2]]
MAINARRAY[FINALINDEXESREQUIRED[3]]
MAINARRAY[FINALINDEXESREQUIRED[4]]

//IN CASE OF DUPLICATES U HAVE UR ANSWER IN
set 1:
MAINARRAY[FINALINDEXESREQUIRED[0]]
MAINARRAY[FINALINDEXESREQUIRED[1]]
MAINARRAY[FINALINDEXESREQUIRED[2]]
MAINARRAY[FINALINDEXESREQUIRED[3]]
MAINARRAY[FINALINDEXESREQUIRED[4]]

other sets:
MAINARRAY[FinalindexesRequiredDuplicates[0][0...n]]
MAINARRAY[FinalindexesRequiredDuplicates[1][0...n]]
MAINARRAY[FinalindexesRequiredDuplicates[2][0...n]]
MAINARRAY[FinalindexesRequiredDuplicates[3][0...n]]
MAINARRAY[FinalindexesRequiredDuplicates[4][0...n]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:26:13.390

如果目标是 21，为什么不应该返回 {2,3,4,5,7} 而不是 {2,3,4,5,6}？非常混乱...

如果我的理解是正确的，这个问题可以通过DP解决。它与背包问题非常相似。时间复杂度为 O(n*S) 其中 n 是数组的大小，S 是您的目标

# c++ - 计算恒定二维 c 数组中的行数

> ID：14309877
> 
> 赞同：4
> 
> 时间：2013-01-14T00:24:53.413
> 
> 标签：c++, c

计算数组中的元素数量很容易：

```
int myarr[] ={1,2,3};
int myarrsize = sizeof(myarr)/sizeof(myarr[0]); 
```

但是，如何计算二维数组中的行数？

```
int my2Darr[][3]={{1,2,3},{4,5,6}};
int my3DarrRows = ??? 
```

是否可以？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T00:26:29.540

一样的方法。所以要么：

```
sizeof(my2Darr)/sizeof(my2Darr[0]) 
```

或者：

```
sizeof(my2Darr[0])/sizeof(my2Darr[0][0]) 
```

取决于你所说的“行”是什么意思。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T00:42:56.383

除非您指定已经知道其大小的第二个数组大小，否则您的代码将无法编译：

```
int my2Darr[][3]={{1,2,3},{4,5,6}};
             ^^^ 
```

所以问题来了 ***如何计算二维数组中的行数？***

```
template <class T, unsigned N, unsigned N1>
int length(T (&)[N][N1])
{
    return N;
} 
```

如果您想要列大小，请`N1`改为返回

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T00:25:51.877

```
sizeof(arr[0])/sizeof(arr[0][0]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-19T18:51:10.070

**有效的是**

sizeof(数组)/sizeof(数组[0]);

**下面的一个不起作用** sizeof(array[0])/sizeof(array[0][0]);

# cuda - 如何使用 CUDA Thrust 用下一个非缺失值填充数组中的缺失值？

> ID：14309881
> 
> 赞同：1
> 
> 时间：2013-01-14T00:25:45.107
> 
> 标签：cuda, gpgpu, thrust

通过将 CUDA Thrust 的[包含性扫描](http://docs.thrust.googlecode.com/hg/group__prefixsums.html#ga7109170b96a48fab736e52b75f423464)与`max`运算符一起使用，我能够用前一个非缺失值（即左侧的最后一个非缺失值）填充缺失值。

但是如何使用下一个非缺失值（右侧）填充？因此，例如，`0`用作我的缺失值标记：

```
 Input: [0 1 0 0 4 0 6 0]
 Fill missing from left: [0 1 1 1 4 4 6 6]
Fill missing from right: [0 1 4 4 4 6 6 6]   <- want 
```

*（请注意，如果最后一个元素丢失，则恢复为`0`从左侧填充 final s。）*

我尝试了反向的包容性扫描，它产生`[0 6 6 6 6 6 6 6]`了 for `max`，而不是预期的结果。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:53:19.020

`max()`从左到右扫描时对升序值起作用的原因是当前最大值将始终高于您的`0`缺失元素，因此它成为填充缺失元素的正确值，即使它有一个“记忆”来所有从一开始的方式。

如果您只是从右到左扫描，`max()`则不再有效，因为您有一个递减范围。

因此，您似乎需要使用`rbegin()`和`rend()`从右到左扫描，此外，使用 MAX_INT 作为占位符和`min()`运算符。

```
Input: [MAX_INT 1 MAX_INT MAX_INT 4 MAX_INT 6 MAX_INT]
Fill missing from right: [1 1 4 4 4 6 6 MAX_INT] 
```

然后，您需要在左右两侧为您的特殊情况捏造一些东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T02:29:17.227

函子`FillMissing`表示如果元素为0，则将其替换为前一个元素，否则保留它。使用反向迭代器时，“前一个”表示正确的迭代器。

```
#include <thrust/device_vector.h>
#include <thrust/scan.h>
#include <iterator>

template<class T>
struct FillMissing
{
    __host__ __device__ T operator()(const T& res, const T& dat)
    {
        return dat == T(0) ? res : dat;
    }
};

int main()
{
    thrust::device_vector<double> vec(8);
    vec[1] = 1;
    vec[4] = 4;
    vec[6] = 6;

    thrust::inclusive_scan(
            vec.rbegin(), vec.rend(),
            vec.rbegin(),
            FillMissing<double>());

    thrust::copy(
            vec.begin(), vec.end(),
            std::ostream_iterator<double>(std::cout, " "));
    std::cout << std::endl;
} 
```

输出。

```
1 1 4 4 4 6 6 0 
```

您可能需要额外的代码来处理尾随的 0

# ios - iOS 支持同一应用的广告与无广告版本

> ID：14309882
> 
> 赞同：1
> 
> 时间：2013-01-14T00:25:47.213
> 
> 标签：ios, xcode, iad, ads

我在 appstore 上有一个付费应用程序，它没有返回太多收入。
所以我制作了一个免费的新版本，但它包含广告。现在有两个问题。

1）我想提醒“如果你想要无广告版本，请按这里”。在这里，用户将被告知费用（1 美元），然后他们可以“注册”并获得无广告版本。现在百万美元的问题是：这是使用“应用内购买”完成的吗？

2）我如何为之前购买过该应用程序的用户“辩解”？现在它是免费的，也许如果他们与我联系，我可以在 inApp 中“注册”他们？？

提前致谢。

编辑：
1）如果用户购买了“inApp purchase”，我如何检查我的应用程序代码？
2）有没有人知道一种方法来检查用户是否是“在应用程序出现广告之前已付费的老用户”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:36:26.930

这真的很简单。

如果您有两个应用程序（一个免费的、受广告支持的应用程序和一个“PRO”无广告应用程序），那么您只需鼓励免费应用程序的用户升级到付费应用程序，并附上付费应用程序的链接应用程序的 iTunes App Store 位置。

如果您只有一个应用，那么您可以使用应用内购买来隐藏广告。

但是，如果您只有一个应用程序，它曾经是付费且无广告的，而您已将其更改为免费但受广告支持，则为该应用程序付费的所有现有客户现在都可以看到广告（假设他们有升级）并且没有实际的方法可以在没有他们付费的情况下将无广告版本归还。

除非，您提前计划好，并在最终付费、无广告版本中留下了一些代码，上面写着“将我标记为付费”（尽管即使这样也可能无法在重新安装或跨设备安装后继续存在） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:42:17.293

答案：
1) 无广告版本应通过应用内购买进行管理，并通过 StoreKit（Apple SDK 托管）或您选择的不同托管（在线服务器）进行管理。
2）为了保留“老”客户，您应该进行更新（仍然付费且没有广告），在其中添加一个 plist 文件并将其复制到“文档”文件夹，并在发布后等待几个月。这应该给付费用户一个更新的机会。之后，您发布带有广告的免费版本，并且仅在 plist 不存在时才添加广告。这将在 95% 的情况下为您提供帮助。
PS：5%的剩余案例是如果客户选择将应用程序全部删除并重新下载。

希望能帮助其他有同样问题的人:)

# python - Python 作为脚本或模块运行？

> ID：14309886
> 
> 赞同：-1
> 
> 时间：2013-01-14T00:26:26.637
> 
> 标签：python, python-3.x

我如何知道我的脚本是作为独立脚本还是模块运行？因为如果它作为独立脚本运行，我需要在我的代码中做一些不同的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:27:19.790

你可以这样做：

```
if __name__ == '__main__':
    #stuff you want to do as a standalone script 
```

解释器检查脚本是否是正在运行的主文件。如果它正在被导入，那么`if`块中的部分将不会执行。

# c++ - ld使用Waf的时候找不到库，不使用Waf的时候可以找到

> ID：14309888
> 
> 赞同：0
> 
> 时间：2013-01-14T00:26:40.503
> 
> 标签：c++, linker-errors, ld, waf

我正在尝试构建我的项目。我已经将 libuv 编译`./libuv`为`libuv.a`（所以库的相对路径是`./libuv/libuv.a`）。

当我直接使用clang时，它可以工作：

```
$ clang++ src/**/*.cpp -std=c++11 -L./libuv -luv -I./libuv/include -I./include 
```

但是，当我使用 Waf 构建时，我收到一个链接器错误，表明 ld 找不到 libuv：

```
$ CXX=clang++ ./waf configure && ./waf build
...
[2/2] cxxprogram: build/src/uv/loop.cpp.1.o -> build/a.out
/usr/bin/ld.gold: error: cannot find -luv
...
Build failed
 -> task in 'a.out' failed (exit status 1): 
    {task 140349441167440: cxxprogram loop.cpp.1.o -> a.out}
['clang++', 'src/uv/loop.cpp.1.o', '-o', '~/sf/build/a.out', '-Wl,-Bstatic', '-Llibuv', '-luv', '-Wl,-Bdynamic'] 
```

我的 wscript 相当简单：

```
def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
    conf.load('compiler_cxx')

def build(bld):
    bld.program(
        source=bld.path.ant_glob('src/**/*.cpp'),
        target='a.out',

        includes=['include', 'libuv/include'],
        stlibpath=['libuv'],
        stlib=['uv'],

        cxxflags=['-std=c++11']
    ) 
```

为什么在通过 Waf 调用时找不到库，而在不使用 Waf 时一切正常（我怀疑它与`-Wl,-Bstatic`标志有关，但我不确定）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:13:58.287

指定库目录的完整路径使其工作：

```
stlib=['uv'],
stlibpath=[os.path.join(os.getcwd(), 'libuv')], 
```

哦，链接器真是太糟糕了。

# android - SherlockDialogFragment 膨胀布局？

> ID：14309892
> 
> 赞同：0
> 
> 时间：2013-01-14T00:27:07.400
> 
> 标签：android, android-layout, actionbarsherlock

我正在使用 ActionBarSherlock 和 SherlockDialogFragment。我的项目有一个小问题，我想在 sherlockdialogfragment 中显示其他布局，一切正常，我的问题是，如果我使用 imageadapter，只要我知道它应该在 imageadapter 中使用“this”..但在公共场合静态“this”不能用，怎么可能？？我不明白如何在 sherlockdialogfragment 中显示布局..这是我的问题..

```
 ((GridView) gridView).setAdapter(new ImageAdapter(this, MOBILE_OS)); 
```

这是我的完整代码

```
 public static class MyDialogFragment extends SherlockDialogFragment {
        int mNum;
        static MyDialogFragment newInstance(int num) {
            MyDialogFragment f = new MyDialogFragment();
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);
            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments().getInt("num");
            int style = DialogFragment.STYLE_NORMAL, theme = 0;
                style = DialogFragment.STYLE_NO_FRAME;
                theme = android.R.style.Theme;

            setStyle(style, theme);

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
                    final String[] MOBILE_OS = new String[] { "Android", "iOS",
                    "Windows", "Blackberry" };

            View v = inflater.inflate(R.layout.pen_content, container, false);
    View gridView = v.findViewById(R.id.gridView1);
    ((GridView) gridView).setAdapter(new ImageAdapter(this, MOBILE_OS));
            return v;
        }

    } 
```

我应该怎么做才能修复我的代码...谢谢...

编辑....我的问题解决了..但我再问一个....如果我想从 gridview 事件单击中获得值，我该怎么办？我添加 setOnClickListener 但我收到错误...

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
                    final String[] MOBILE_OS = new String[] { "Android", "iOS",
                    "Windows", "Blackberry" };

               View v = inflater.inflate(R.layout.pen_content, container, false);
           View gridView = v.findViewById(R.id.gridView1);
           ((GridView) gridView).setAdapter(new ImageAdapter(getSherlockActivity(), MOBILE_OS));
            gridView.setOnClickListener(new OnItemClickListener() {
                 public void onItemClick(AdapterView<?> parent, View v,
                 int position, long id) {
                     Toast.makeText(getSherlockActivity(),((TextView)v.findViewById(R.id.grid_item_label)).getText(), Toast.LENGTH_SHORT).show();
                    }
                   });
                    return v;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:30:35.990

改变

```
((GridView) gridView).setAdapter(new ImageAdapter(this, MOBILE_OS)); 
```

所以它是

```
((GridView) gridView).setAdapter(new ImageAdapter(getSherlockActivity(),MOBILE_OS)); 
```

您似乎有类型不匹配， a `SherlockFragment`does not extend `Context`，您的 ImageAdapter 可能需要它。

要*尝试*回答您编辑的问题：

```
((GridView)gridView).setOnItemClickListener(new OnItemClickListener() {
                 public void onItemClick(AdapterView<?> parent, View v,
                 int position, long id) {
                     Toast.makeText(getSherlockActivity(),((TextView)v.findViewById(R.id.grid_item_label)).getText(), Toast.LENGTH_SHORT).show();
                    }
                   }); 
```

设置侦听器时，您仍然需要使用 GridView 类。你应该像这样从头开始投射：

```
GridView gridView = (GridView) v.findViewById(R.id.gridView1); 
```

# javascript - 使用私钥的 Javascript RSA 解密

> ID：14309894
> 
> 赞同：1
> 
> 时间：2013-01-14T00:27:09.353
> 
> 标签：javascript, rsa, public-key-encryption, encryption, private-key

您好，我有我在 Javascript 中设置的这个脚本：

```
<!DOCTYPE html>
    <html lang="en">
            <head>
            <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
            <script language="JavaScript" type="text/javascript" src="jsbn.js"></script>
            <script language="JavaScript" type="text/javascript" src="rsa.js"></script>
            <script language="JavaScript">

                function encryptData(){
                    var pem ="-----BEGIN PUBLIC KEY-----\
                    MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC+tii3IwzHa4i142kAB0dRVXoXA2Q8oF48UgMA\
                    AV54+JDED5iVyJK1s7J/xGi4U3+9sRoraE7bS19Nihs5DuYa0gsbKs/5jXOtKiw94fAtMyJTcX0d\
                    SzZhJKcX9vEzI27Hdu1rNFY64Ixz3KjrG1N/pXHtwjE1Ira5XZdTezx0wwIDAQAB\
                    -----END PUBLIC KEY-----";
                    var key = RSA.getPublicKey(pem);
                    var message = "some text to RSA encrypt";
                    var encryptedMessage = RSA.encrypt(message, key);
                    $('#RSAMessageEncrypted').html(encryptedMessage);
                }
            </script>
            </head>
        <body onload=encryptData();>
        <form>
            <strong>RSA encrypted Message :</strong> <textarea rows="10" cols="100"   id="RSAMessageEncrypted"></textarea><br>
        </form> 
        </body>
    </html> 
```

我的文本区域充满了我使用上面的公钥在 RSA 中加密的消息。

加密的消息是：

```
oH1JVWIT7MOH4ObCjFlBuFcAUvooSZANMokFy5jApSi8n0ABVc9vwXP2EFl2x5+UColU6s2VAU+RsZPV4ZgZu3+GhN9pDUb1ZMVyYRECDy/7h+mE+UdDZTPwP1TAcBrspL/XM6+q6mJfUWbEKfR/2vyNUhBxpt6QOhVaI29aHfU= 
```

我的问题如下：如何使用派生此公钥的私钥对解密我的消息？有没有解密的库？

我的私钥是：

```
-----BEGIN RSA PRIVATE KEY-----
MIICXQIBAAKBgQC+tii3IwzHa4i142kAB0dRVXoXA2Q8oF48UgMAAV54+JDED5iVyJK1s7J/xGi4
U3+9sRoraE7bS19Nihs5DuYa0gsbKs/5jXOtKiw94fAtMyJTcX0dSzZhJKcX9vEzI27Hdu1rNFY6
4Ixz3KjrG1N/pXHtwjE1Ira5XZdTezx0wwIDAQABAoGBAJY4Gd4XZ6t1Epxi4oQ5N33jXGXgMAZp
M5FD8EUCzw1ujWlB96iT8qvZPdLSPMJkUwxyAfELGoI13n3POR46lBhRpYKkTZm1UmEBscdO2B9w
B7YUM9caJG4TgWBKxD8KLriQANnXZrv9zNGx4Cs0USeQgWuDfgkBF+PvL5AVq+jRAkEA+O0MNvBM
kGtGCLt/V34jiivGs9HtXKSJY6vI60GYZYB7D3SniYVUsMocC+O3vyqdpMiO/szfLTAWdXB2yl3Q
VwJBAMQhmQkT57rJ07SS40t1HGonryrmGF3BcHw9sVCijZF/jrbKeL5XmhnbCr9Lhy/InepcSRFI
Pqzj32w0timLi3UCQCVsliKIXCp2RlA3yDxiNXunezc7v4DnJ9S5VfqwoPXZrCa1th6B0irGKBNN
iCmQgaTtljoOmRsVGLtNTj68ff8CQGeiLR/b0bUkEeY3OzzS27nH0EoFnNhlbw9m9btauR0pXnp9
j8FbvoRs9kfQG9WG1tJQAxfLqbpnCdY+IAbhwkUCQQDOIrm78sSuVL+U6f98P2eDSzhKgnepEEVJ
u5iBs3lT5T+p+Xov6DPLd13Pm7Lyppj8S7pW/1CwkTVwW+U3O2kj
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T00:51:47.310

首先，我希望这不是您将在生产中使用的 RSA 私钥。

关于在 JavaScript 端进行加密/解密，有各种库，例如[Standford 的 JSBN RSA Encryption 库](http://www-cs-students.stanford.edu/~tjw/jsbn/)和[ohdave.com 的 RSA in JavaScript 实用程序](http://www.ohdave.com/rsa/)，用于进行简单的加密/解密，但您对这些工具甚至您的架构的主要关注是表现。除非绝对必要并且没有其他解决方法，否则我不会使用 JavaScript 进行 RSA 加密。

# php - PHP/mysql 未按预期检索

> ID：14309897
> 
> 赞同：2
> 
> 时间：2013-01-14T00:27:42.737
> 
> 标签：php, mysql, sql, forms, login

我正在使用 mysql 在 PHP 中编写登录脚本（是的，我知道它已被弃用），但是我在从数据库中检索信息时遇到了问题。我有另一个输入信息的脚本，效果很好，但是在检索时，它似乎不起作用。

当我说它不起作用时，我的意思是我用来从数据库中获取信息的检索函数似乎没有正确传递信息，或者我没有使用它正确传递的内容。无论哪种方式，问题是，它应该检索包含电子邮件、密码、名字和姓氏的 User 类型的对象。

下面是完成所有工作的 PHP 文件的简化版本，以及可能/可能不是问题的检索函数。当我运行它时，我得到的只是一个页面，上面写着“名字是”，仅此而已，而不是显示存储的名字。

至于故障排除：

*   我已经确认 get_firstname() 函数有效，但在以下情况下它不会返回任何内容。
*   我还确认我的其他 getter 函数也是如此。
*   我已经确认检索功能正在返回“某物”。我通过让它返回一个字符串而不是一个用户来进行测试，它按预期返回，并且 PHP 文件能够使用它。
*   我已经确认数据库确实已经存储了我要求的信息。
*   我已经运行了一个查询，直接在检索函数中询问完全相同的内容，并让它返回我想要的内容。

这是代码：

```
<?php
include_once '/home/Databases/User.php';
include_once '/home/Databases/dbUser.php';
include_once '/home/Databases/dbInfo.php';
connect();

$email = mysql_real_escape_string($_GET['email']);
$password = mysql_real_escape_string($_GET['password']);
$rememberme = mysql_real_escape_string($_GET['remember']);

// does this user exist?
$confirm = retrieve_dbUserByEmail($email);
$name = $confirm->get_firstname();

// if they do exist
if($confirm != false) {
    echo "First name is ".$name;
}

// if user doesn't exist
else {
    header('Location: index.php?login=nonexistant');
    exit();
}
?> 
```

这是 retrieve_dbUserByEmail 函数：

```
function retrieve_dbUserByEmail($email){
    connect();
    $email = mysql_real_escape_string($email);
    $query = "SELECT * FROM dbUser WHERE email = '".$email."' LIMIT 1";
    $result = mysql_query($query);
    if ($result==null ) {
       mysql_close();
       return false;
    }
    $result_row = mysql_fetch_assoc($result);
    $user = new User($result_row['id'], $result_row['email'], $result_row['password'], $result_row['firstname'],$result_row['lastname']);
    mysql_close();
    return $user;
} 
```

**要回答一些已经提出的问题，retrieve 函数不会返回 false，只转义字符串一次并不能消除错误，并且看到的“connect()”函数成功连接到 SQL 服务器（已验证）。另外，如果它有用（尽管我无法想象为什么），我将在下面摆出我的 User 对象类。**

```
<?php
class User {
    private $id;            // Unique User ID
    private $email;         // User Email
    private $password;      // Password
    private $firstname;     // First Name
    private $lastname;      // Last Name

    //Constructor Function
    function __construct($id, $email, $password, $firstname, $lastname) {
        $this->id = $id;
        $this->email = $email;
        $this->password = $password;
        $this->firstname = $firstname;
        $this->lastname = $lastname;
    }

    //Getter Functions
    function get_id() {
        return $this->id;
    }
    function get_email() {
        return $this->email;
    }
    function get_password() {
        return $this->password;
    }
    function get_firstname() {
        return $this->firstname;
    }
    function get_lastname() {
        return $this->lastname;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:23:34.540

`print_r($result_row)`我会通过在 之前添加一个来调试它，`new User(...)`以确认你认为你得到的就是你实际得到的。

我也可能在再次`print_r($confirm)`返回后使用`retrieve_dbUserByEmail()`来确认您认为您得到的就是您实际得到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:04:55.387

# 编辑：

我找出了我遇到的问题的原因；错误出现在我的表格中。我还没有完全弄清楚为什么它不起作用，但由于某种原因，表单似乎在提交时没有正确地发布变量。感谢所有查看我的代码的人！

# java - 尝试读取 UI 以保留活动数据

> ID：14309898
> 
> 赞同：0
> 
> 时间：2013-01-14T00:27:43.690
> 
> 标签：java, android

由于我的应用程序没有任何不由 UI 表示的数据，因此我尝试读取 UI 小部件，以便在屏幕旋转等事件发生时恢复底层“模型”对象的状态。它似乎不适用于 EditText，但适用于 Spinners，这似乎很奇怪。以下是一些代码片段：

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ....
    metalSpinner = (Spinner) findViewById(R.id.metal_spinner);
    ....
    lengthText = (EditText) findViewById(R.id.length_edittext);
    ....
    createAndInitializeModel();
}

private void createAndInitializeModel() {
    vdropModel = new VdropModel();
    ....
    String al = (String) (metalSpinner.getSelectedItem());
    vdropModel.setAlum(al.equals("Aluminum"));
    ....
    if (!(lengthText.getText().toString().equals(""))) {
        vdropModel.setLengthInFeet(Double.parseDouble(lengthText.getText()
                .toString()));
    }
} 
```

由于某些对我来说并不明显的原因，createAndInitializeModel() 中的“if”语句在屏幕方向更改发生后将始终评估为 false，即使小部件仍在显示一个值，并且 vdropModel 也不会恢复。但是 Spinner 小部件的值确实会恢复。这对我来说没有意义，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:47:44.333

在清单中，将活动的配置更改设置为此

```
android:configChanges="orientation" 
```

# c# - SimpleMembershipProvider - 密码加密

> ID：14309900
> 
> 赞同：2
> 
> 时间：2013-01-14T00:27:45.407
> 
> 标签：c#, asp.net-mvc, authentication, encryption

我使用 SimpleMembershipProvider 作为我的数据库提供程序。

我已经添加了新功能来通过继承来改进这个提供程序。

现在我想创建一个类似“ChangeEmail”的功能，但在此之前检查输入的密码是否正确。

所以我必须加密输入的密码并将结果与​​我的数据库中的条目进行比较。

问题是：

**SimpleMembershipProvider 以什么方式加密密码？**

我试过：

```
Crypto.HashPassword(currentPassword); 
```

数据库中的结果类似但不一样。

PasswordFormat 属性设置为 MembershipPasswordFormat.Hashed。

例如，注册时生成的“123456”哈希：

```
AIYlAKcmDaABMw1PVx1kheZq2KXkhVs4QjO7MnwfHPcTBjnmRobRqJzWYHYO/S4T7w== 
```

这通过 Crypto.HashPassword：

```
AG+md+0W2EuV9BzUdohkYMK547jB5ochvxeVKYQTkls0UQ+3W0BWPHnFoffiIn2byw== 
```

它看起来像相同类型的编码，但为什么结果不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:48:45.987

`Crypto.HashPassword`每次调用都会生成一个新的盐，因此每次输出都会不同。验证使用`Crypto.VerifyHashedPassword`。

或者`Rfc2898DeriveBytes`直接使用。这允许您调整散列成本，并且可以避免使用大于本机大小（20 字节）的散列。

# php - 如何动态定义数组索引？

> ID：14309901
> 
> 赞同：0
> 
> 时间：2013-01-14T00:27:56.060
> 
> 标签：php, arrays, dynamic, indexing

我有一个 PHP 游戏，它使用 MySQL 表（历史记录）来跟踪用户以及他们知道答案的次数，例如：

```
username answer
-------- ------
user1    answer1
user2    answer2
user1    answer3 
```

等等，我想用这张表来打印最好的球员，所以我试图实现一个像这样的数组

```
public function getBestPlayers($hrows) /*history_rows*/
{
$ray=array();
$hlen = count($hrows);

for($i=0;$i<$hlen;$i++)
{
    $curnick = $hrows[$i]['knower'];
    $ray[$curnick]; //my attempt to "set" the index
    if($ray[$curnick]!=NULL)
    {
        $ray[$curnick]++;
    }
    else
    {
        $ray[$curnick]=1;
    }
}//for
$ray = sort($ray);
return $ray;
}//getBestPlayers() 
```

所以最后我有`$ray['user1'] = 2 , $ray['user2'] = 1`等等。但这会产生错误“未定义的索引：user1”。我该怎么办？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:34:11.097

你应该让 MySql 为你做这件事，这样会更快更容易：

```
SELECT username, COUNT(*) AS score FROM tbl GROUP BY username ORDER BY score DESC 
```

这将返回表单的结果集

```
username score
-------- ------
user1    2
user2    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:40:56.240

您应该放弃这一`$ray[$curnick];`行，因为您不能（也不应该）尝试像这样声明数组索引。此外，您可能希望替换`if($ray[$curnick]!=NULL)`为`if(isset($ray[$curnick]))`which 不会尝试访问该位置的数组，而只会检查它是否已设置。

除此之外，您的代码可以工作，但是，将统计信息的集合卸载到数据库可能是一个好主意。

# php - 从 PHP 服务器上收到的原始位图字符串生成缩略图

> ID：14309905
> 
> 赞同：0
> 
> 时间：2013-01-14T00:28:16.457
> 
> 标签：php, encoding, bitmap

我正在将 base 64 字符串中的全尺寸位图 (500x500) 发送到 PHP 服务器。当我收到数据时，我想对其进行解码并生成两个 JPEG：一个是原始大小，一个是较小的（缩略图）。这是我的原始代码：

```
<?php
    $base=$_POST['originalImage']; // Bitmap in 500x500
    $binary=base64_decode($base);

        // ?? How to generate binary for bitmap in 200x200?
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:34:06.760

将该二进制字符串作为文件保存到服务器，然后进行谷歌搜索。您会发现大量教程，其中还包括示例代码，您可以像这样复制和粘贴[http://webcheatsheet.com/php/create_thumbnail_images.php](http://webcheatsheet.com/php/create_thumbnail_images.php)

如果您想正确执行此操作，我建议您使用[https://github.com/avalanche123/Imagine](https://github.com/avalanche123/Imagine)，这是一个非常好的 php 5.3 OOP 图像处理库，适用于不同的引擎。

这是一个使用 Imagine 生成缩略图的简单示例：

```
$imagine = new Imagine\Gd\Imagine();
// or
$imagine = new Imagine\Imagick\Imagine();
// or
$imagine = new Imagine\Gmagick\Imagine();

$size    = new Imagine\Image\Box(40, 40);

$mode    = Imagine\Image\ImageInterface::THUMBNAIL_INSET;
// or
$mode    = Imagine\Image\ImageInterface::THUMBNAIL_OUTBOUND;

$imagine->open('/path/to/large_image.jpg')
    ->thumbnail($size, $mode)
    ->save('/path/to/thumbnail.png')
; 
```

# javascript - Javascript - 帮助在 2 个数组/堆栈之间移动

> ID：14309919
> 
> 赞同：0
> 
> 时间：2013-01-14T00:30:43.667
> 
> 标签：javascript, html, arrays, list, stack

我有 2 个数组和一个变量。我可以将一个项目推送到一个变量中，然后再次单击，将其添加到一个数组中。但是，我有另一个按钮，可以将该数组中的一个项目移回变量中，然后将变量移动到另一个数组中。我的代码适用于第一部分，但是我的函数现在确实加载了第二部分，请问有什么帮助吗？

这部分似乎不起作用

```
<INPUT type=button value="Back" onClick='txtPop.value = popBackStack();showStack(theList);pushForStack(curUrl);
showStack2(theList2);'> 
```

整个代码如下：

```
<SCRIPT>
    var backStack = new Array();
    var forStack = new Array();
    var curUrl = document.getElementById("txtPop");

    function pushStack(newVal) {
      backStack.push(curUrl);
      curUrl = newVal;
    }

    function pushForStack(newVal) {
      CurUrl = newVal;
      forstack.push(curUrl);
    }

    function popBackStack() {
      var popVal = backStack.pop();
      if (popVal == undefined) return "Nothing left!";
      else return popVal
    }

    function popForStack() {
      var popVal = forStack.pop();
      if (popVal == undefined) return "Enter a new URL";
      else return popVal;
    }

    function showStack(theSelect) {
      theSelect.options.length = 0;
      for (var i = 0; i < backStack.length; i++) {
        var theOption = new Option(backStack[i]);
        theSelect.options[theSelect.options.length] = theOption;
      }
    }

    function showStack2(theSelect) {
      theSelect.options.length = 0;
      for (var i = 0; i < forStack.length; i++) {
        var theOption = new Option(forStack[i]);
        theSelect.options[theSelect.options.length] = theOption;
      }
    }
 </SCRIPT>

<table width="104%" height="364" border="5" cellpadding="3" cellspacing="3">
<tr>
<th width="30%" height="78" scope="col"><p>
<INPUT type=button value="Back" onClick='txtPop.value =     popBackStack();showStack(theList);pushForStack(curUrl);
showStack2(theList2);'></p></th>
<th width="46%" scope="col"><p>
<center>
<INPUT type=text name=txtPush>
<INPUT type=button value="Push"   onClick='pushStack(txtPush.value);txtPush.value="";txtPop.value = curUrl;   showStack(theList);'>
</center>
</p></th>
<th width="24%" scope="col"><p><INPUT type=button value="Forward" onClick="txtPop.value      = popBackStack();showStack2(theList2);"></p></th>
</tr>
<tr>
<td><p><center>
<SELECT name="theList" size=12>
</SELECT>
</center></p></td>
<td><p><center><INPUT type=textki name=txtPop size=25></center></p></td>
<td><center>
<SELECT name="theList2" size=12>
</SELECT>
</center></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:40:21.093

您的代码中有许多问题

1.  该调用`document.getElementById('txtPop')`应该不返回任何内容，因为您没有具有该 ID 的元素。*您有一个具有该名称*的元素，但没有*id*。
2.  你试图推`curUrl`入堆栈，但是`curUrl`（正确初始化时）是一个元素，而不是一个值......我不相信这就是你想要做的。
3.  您的点击处理程序太复杂了，无法放入元素属性中。将它们放入自己的函数中，然后使用函数名称附加它们...查看一些有关事件处理的教程以获得更好的方法，例如 www.w3.org/wiki/Handling_events_with_JavaScript。**请**不要遵循 w3schools 教程。他们比坏更糟糕。

# node.js - 分离 Node.js 服务器和客户端

> ID：14309920
> 
> 赞同：25
> 
> 时间：2013-01-14T00:30:49.183
> 
> 标签：node.js, express

假设我正在编写一个带有服务器和客户端的 Web 应用程序。

*   **服务器**用作 API，并使用express[框架](http://expressjs.com/)。
*   **客户端**只是一个`node-static`提供静态 javascript/html 文件的应用程序。

我希望能够单独部署它们，彼此独立 - 或同时部署两者。

这是我设想的目录结构：

```
 /my-app
     app.js
     /server
         server.js
     /client
         client.js 
```

我希望能够以 3 种不同的方式运行它：

1.  仅在某个端口（例如 3000）上运行服务器（API）：

    ```
    my-app/server> node server.js
    ...Server listening on localhost:3000/api 
    ```

2.  只运行客户端（即从 /client 目录提供静态文件）：

    ```
    my-app/client> node client.js
    ...Server listening on localhost:4000/client 
    ```

3.  在同一端口上运行服务器和客户端（通过单个 node.js 实例）：

    ```
    my-app> node app.js
    ...Server listening on localhost:5000 
    ```

这可能在节点中吗？配置它的正确方法是什么？

我开始如下：

```
/////////////
// server.js
/////////////
// Run the server if this file is run as script
if(module.parent){
   app.listen("3000/client")  
}

/////////////
// client.js
/////////////
var static = require('node-static');
var file = new(static.Server)('.');
var app = require('http').createServer(function (request, response) {
  request.addListener('end', function () {
    file.serve(request, response);
  });
});
if(module.parent){
   app.listen("4000/client");
}

/////////////
// app.js
/////////////
server = require("server/server.js")
server.app.listen("5000/api")

client = require("client/client.js")
client.app.listen("5000/client")  <--- ????? 
```

我不确定如何在我的**app.js中连接****客户端**和**服务器**，以便它们都从同一个端口/进程/线程等提供服务......

 ***注意：请原谅代码，它未经测试并且可能不正确。我是 node.js 的新手*

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T01:08:19.983

您可以在从同一个脚本启动服务器和客户端时实例化一个[`connect`](https://github.com/senchalabs/connect)（的核心）服务器实例，并让它将请求路由到url 开始的时间和其他地方。`express``node-static``public``connect`

就像是

```
var connect = require('connect');
server = connect.createServer();
server.use('/public', client.handler_function);
server.use(server.express_handler_function); 
```

应该做。您需要公开`function(request, response)`in`client.js`以便可以通过它来引用它`client.handler_function`，并对 express 应用程序执行相同的操作（请参阅文档）。

例如，将函数置入`client.js`将涉及以下内容：

```
var static = require('node-static');
var file = new(static.Server)('.');
var handler = function (request, response) {
  request.addListener('end', function () {
    file.serve(request, response);
  });
};
var app = require('http').createServer(handler);
if(module.parent){
   app.listen(4000);
   console.log("Server (static) listening on 4000")
}
module.exports = { handler_function: handler }; 
```

这样你就可以`handler`做到：

```
var client = require('client'); // this returns the object you've set to `module.exports` in `client.js`
[...]
server.use('/public', client.handler_function); 
```

## 其他方法

我上面详述的内容似乎最接近您想要的内容（基于您上次编辑中的说明）。不过，还有其他选择：

*   保留基于站点根目录的静态和快速生成的 url，例如`example.com/a_statically_served_script.js`and `example.com/api_endpoint`；首先尝试提供静态文件，如果找不到，您会将请求发送到基于 express 的应用程序

*   使用`app.js`脚本在不同的端口（或 unix 域套接字）上启动两个服务器，并在它们前面使用[node-proxy](https://github.com/nodejitsu/node-http-proxy)（或类似的东西，甚至 nginx/apache 作为反向代理）

## 同根

对于第一种方法，您需要添加一个错误处理程序，`file.serve`例如

```
file.serve(request, response, function(e, res) {
    if (e && (e.status == 404)) {
        // if the file wasn't found
        if (next) {
            next(request, response);
        }
    }
} 
```

`next`应该是脚本中的一个变量，在`client.js`直接运行脚本时未设置，但它是在需要脚本时（查看文档以了解节点中的模块和导出如何工作） - 设置时，`next`指的是一个函数接受`(req, res)`并喂它们来表达（查看有关如何执行此操作的 express 文档）。

## 评论

请记住，这不是一个详尽的答案：它只是一些关于要查找哪些文档以及可以使用哪些技术来解决问题的指针。

值得记住的是，在节点中，请求处理程序通常由`function(request, response)`. 这个习惯用法在`connect`/ `express`to中扩展`funciton(request, response, next)`：这里表示通过 安装到服务器的处理程序链中`next`的下一个可用处理程序（形式为） 。`function(request, response)``server.use(handler)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-28T18:50:24.570

我对 OP 有类似的要求，但不需要单独执行小节......我只想要单独的文件夹，因为我不喜欢在服务器的代码文件夹中嵌套客户端代码。从技术上讲，这样做是不可能避免的，所以我在文件系统中创建了一个抽象级别来缓解我的困扰。这是我的项目的根：

```
-client
-server
-node_modules
-app.js 
```

`client`包含`public`通常会的所有内容（所有要提供的客户端文件），即至少`index.html`.

`server`可能是也可能不是 Node 模块（在我的情况下它不一定是）。这是您的应用程序特定的服务器代码。您可以重新`require`使用与底层相同的文件`app.js`，因为它不会产生任何影响并且可以正常工作。

`node_modules`显然是 Node 所需要的，最好留在项目的根目录，因为这样任何`require`s`server`都可以向上搜索项目文件夹层次结构，[以在根目录找到这个通用的模块存储库](http://nodejs.org/api/modules.html#modules_file_modules)。

`app.js`仅包含以下内容：

```
var path = require('path');
var express = require('express');
app = express();
require('./server/server.js');

app.use(express.directory(path.join(__dirname, '/'))); //optional, directory browsing
app.use(express.static(path.join(__dirname, '/')));
app.use(express.errorHandler());

app.listen(process.env.PORT || 5000); 
```

...如您所见，根脚本中的代码最少。所有非常重要的，特定于应用程序的

请注意，该变量`app`未*使用*`var`. 通过避免`var`，我们将其设为全局并允许在内部轻松访问它`server.js`。

因此，如果还不清楚的话，你会这样做`node app`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T01:27:38.950

使用反向代理怎么样`Nginx`？

您可以轻松地将两个节点应用程序绑定到一个端口，还有许多其他优点。

[http://wiki.nginx.org/Main](http://wiki.nginx.org/Main)**

# iphone - iOS UICollectionView 放大居中的单元格

> ID：14309925
> 
> 赞同：3
> 
> 时间：2013-01-14T00:31:26.717
> 
> 标签：iphone, ios, core-graphics, uicollectionview, uicollectionviewcell

我的 UICollectionViewFlowLayout 子类没有正确放大 UICollectionView 中心的单元格。相反，当我水平滚动时，我的 UICollectionViewCell 会消失并重新出现。**我的猜测是问题出在 ACTIVE_DISTANCE 值上。什么是 ACTIVE_DISTANCE 以及如何在以下代码中使用它？**

我正在关注 WWDC 2012 Lecture Advanced UICollectionView 提示，他们的代码看起来像这样......

```
#define ITEM_SIZE 200
#define ACTIVE_DISTANCE 200
#define ZOOM_FACTOR 0.3

-(id) init {
self = [super init];
if (self) {
    self.itemSize = CGSizeMake(ITEM_SIZE, ITEM_SIZE);
    self.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    self.minimumLineSpacing = 50;
}
return self;
}

-(NSArray*) layoutAttributesForElementsInRect:(CGRect)rect {
NSArray* array = [super layoutAttributesForElementsInRect:rect];
CGRect visibleRect;
visibleRect.origin = self.collectionView.contentOffset;
visibleRect.size = self.collectionView.bounds.size;
for (UICollectionViewLayoutAttributes* attributes in array) {
    if (CGRectIntersectsRect(attributes.frame, rect)) {
        CGFloat distance = CGRectGetMidX(visibleRect) - attributes.center.x;
        CGFloat normalizedDistance = distance / ACTIVE_DISTANCE;
        if (ABS(distance) < ACTIVE_DISTANCE) {
            CGFloat zoom = 1 + ZOOM_FACTOR*(1 - ABS(normalizedDistance));
            attributes.transform3D = CATransform3DMakeScale(zoom, zoom, 1.0);
            attributes.zIndex = round(zoom);
        }
    }
}
return array;
} 
```

在我的代码中，我的 init 方法看起来像

```
-(id) init {
self = [super init];
if (self) {
}
return self;
} 
```

我的视图控制器中的委托方法如下所示

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
return CGSizeMake(260, 390);
} 
```

我的 ACTIVE_DISTANCE 值应该是多少？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:04:25.330

我解决了这个问题。缩放为 0.3 时，我的单元格将开始相互重叠。一旦它们与不同的细胞重叠，它们就会消失。通过将缩放减少到大约 0.05，它解决了问题！

# mysql - 从mysql表中获取最后插入的数据，按类别过滤

> ID：14309926
> 
> 赞同：0
> 
> 时间：2013-01-14T00:31:41.653
> 
> 标签：mysql, sql

我的数据库中有一个表，它有 4 列

```
ID
CATEGORY
NAME
DATA 
```

我如何检索最后插入的值，`DATA`其过滤条件为`CATEGORY`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:42:13.153

试试这个

```
 select * from your_table where ID = Max(ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:43:28.867

目前尚不清楚您是想要给定类别的最后一个值，还是按类别，所以这里有两种解决方案：

对于给定的类别：

```
select data from mytable
where category = ?
order by id desc
limit 1; 
```

对于所有类别：

```
select category, data
from (select * from mytable 
    order by id desc) x
group by category; 
```

请注意，第二个查询是一个 mysql-only 解决方案，但由于这是一个 mysql 问题，这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T00:44:03.793

假设 id 是一个自动递增的 id 你需要类似的东西：

```
Select data from mytable
Where category = :mycategory
Order by id desc
Limit 1 
```

# android - IabHelper 的应用内计费问题

> ID：14309928
> 
> 赞同：2
> 
> 时间：2013-01-14T00:32:08.687
> 
> 标签：android, in-app-billing

我正在使用应用内计费教程开始实施。

*   我下载了示例应用程序
*   从开发者控制台获取我的密钥
*   在我的清单中放置适当的权限
*   将aidl文件和所有util java文件放入我的项目中，并将以下代码实现到我的onCreate事件中......

    ```
    if (GooglePlayVersion)
    {
        try
        {   
        mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
               public void onIabSetupFinished(IabResult result) {
                  if (!result.isSuccess())
                     // Oh noes, there was a problem.
                     debugLog("Problem setting up In-app Billing: " + result, 0);          
                  debugLog("IAB got bound", 0); 
               }
            });
        }
        catch (Exception e){
            debugLog("iab exception " + e.getMessage(), 1);
        }
    } 
    ```

我的应用程序在 mHelper.startsetup 行上运行。没有例外。当我逐步完成时，一旦我离开那一行，调试就永远不会进入下一行。我的应用程序永远不会启动。当然，如果我将 GooglePlayVersion 设置为 false 一切运行正常。

编辑：自从我昨天的帖子以来，我发现 mHelper.startSetup 行确实引发了异常。 `Stored Exception Found Binder invocation to an incorrect interface [Ljava.lang.StackTraceElement;@405a8478`.

我发现其他人的帖子有这个例外，有人建议我的aidl文件可能与计费界面不匹配。我从下载的 trivialdrivessample 程序中获得了aidl 文件，仅更改了包行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T05:54:37.603

您不应更改aidl 文件的包名。将aidl 文件放在*com.android.vending.billing*包下的src 目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-09T17:46:09.470

尽管我一步一步按照 Google Android 网站的说明进行操作，但我遇到了同样的问题。他们没有明确和正确地提到在哪里更改包名称。所以为了解决这个问题，如果你把 .aidl 文件移动到 com.myawesome.app.main，那么你不仅要更改所有文件头中的包声明，还要更改 labHelper 内的这一行.java 文件：

```
Intent serviceIntent = new Intent("com.myawesome.app.main.InAppBillingService.BIND"); 
```

您不想要的默认值是：

```
Intent serviceIntent = new Intent("com.android.vending.billing.InAppBillingService.BIND"); 
```

这为我修复了它，希望它也能为你修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T17:59:33.680

Gary，您似乎在应用内计费方面遇到了启动挑战。这不是一个新问题。应用内计费是一个真正的痛苦开始工作。很多人都很难让它工作。我建议你先让它独立工作。然后将项目的工作部分集成到您的代码中。我推荐[这个](http://mcondev.wordpress.com/2011/06/26/integrate-in-app-billing-just-3-lines-of-code-in-your-app/)。

其他链接可以在stackoverflow上找到，我暂时不去搜索。

# php - 如何使用 PHP 和外部 .txt 自动填充 HTML 表单字段

> ID：14309930
> 
> 赞同：0
> 
> 时间：2013-01-14T00:32:21.453
> 
> 标签：php, forms, autocomplete, fulfillment, txt2tags

主要问题是：我有一个包含世界上所有机场的 .txt，并且像每个机场一样，有一个包含纬度和经度数据的坐标，如下所示：

国际民航组织纬度经度

SAWH-54.843334 -68.295556

SAWE-53.777500 -67.750000

SCDW-53.610700 -70.470525

SCFM-53.253611 -70.319167

国际民航组织代码是每个机场都有的代码。是否可以制作一个表格，当我输入国际民航组织代码时，纬度，经度会自我实现，在我的虚拟服务器上阅读这个 .txt？

# html - 将动态高度 div 定位在可见屏幕部分的顶部？

> ID：14309937
> 
> 赞同：3
> 
> 时间：2013-01-14T00:33:42.827
> 
> 标签：html, css, positioning, css-position

我有一个 div，我希望向下滑动并淡入和向下滑动（与 twitter 引导模式非常相似）。

为此，我希望使用固定在可见视口上方的位置来定位 div。

问题是，我不知道 div 的大小（垂直），所以我不能只使用`top: -(height of div)px`.

那么，如何使用动态高度 div 做到这一点？

```
 /-------------\
      |             |
      | Dynamic Div |
      |             |
\-----\-------------/-------/
|                           |
|         VIEWPORT          |
|                           |
/---------------------------\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:55:19.617

这个想法是将你想要滑动的实际元素，我们称之为 twitterbar，我对 twitter 一无所知，但它听起来很酷，放入一个包装器 div。

因此，您将带有基本 css: 的 twitterbar 放在带有基本 css:`position: absolute;margin-top:-100%;`的包装器 div 中`position: fixed;`。现在您需要将 twitterbar 的 margin-top 属性从 -100% 逐渐变为 0%。

您可以使用 CSS3 制作动画，这很酷，但在 2013 年初并非所有用户都支持。或者您可以使用 Javascript 制作动画，如果您觉得懒惰：jQuery。这是另一个问题，我不会为你解决。

以 HTML 为例（其中有一些无用的样式，但我希望它能证明它有效），您可以手动更改 margin-top 的百分比以显示它有效。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            #dynamic
            {
                position: absolute;
                margin-top: -50%;
                border: 4px dashed red;
                width: 100px;
                height: auto;
            }
            #wrapper
            {
                position: fixed;
                border: 4px dashed blue;
                width: 100px;
                height: auto;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div id="dynamic">Dynamic<br />height<br />content</div>
        </div>
    </body>
</html> 
```

PS。我希望我正确理解了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:08:39.220

我只在 Chrome 中尝试过，但它似乎可以按您的意愿工作：

```
<!doctype html>
<html>
<head>
<style>
  .hidden {
    background: red;
    width: 200px;
    position: fixed;
    bottom: 99%;
  }
</style>
</head>
<body>
  <div class="main">
    <div class="hidden">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam lacus ligula, accumsan id imperdiet rhoncus, dapibus vitae arcu. Nulla non quam erat, luctus consequat nisi. Integer hendrerit lacus sagittis erat fermentum tincidunt. Cras vel dui neque. In sagittis commodo luctus. Mauris non metus dolor, ut suscipit dui. Aliquam mauris lacus, laoreet et consequat quis, bibendum id ipsum. Donec gravida, diam id imperdiet cursus, nunc nisl bibendum sapien, eget tempor neque elit in tortor.
    </div>
  </div>
</body>
</html> 
```

基本上，据我了解，`bottom`设置绝对定位元素的底部与其包含块之间的距离。在这种情况下，您希望它是 100%。在上面的示例中，我将其设置为 99%，因此我可以看到它实际上只是在窥视窗口的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-30T17:04:25.210

您可以使用转换来执行此操作：

```
 <!doctype html>
    <html>
    <head>
    <style>
      .hidden {
        position: absolute;
        top:0;
        width:100%;
        left:0;
        right: 0;
        transform: translateY(-100%);
      }
      .hidden.show {
        transform: translateY(0%);
      }
    </style>
    </head>
    <body>
      <div class="main">
        <div class="hidden">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam lacus ligula, accumsan id imperdiet rhoncus, dapibus vitae arcu. Nulla non quam erat, luctus consequat nisi. Integer hendrerit lacus sagittis erat fermentum tincidunt. Cras vel dui neque. In sagittis commodo luctus. Mauris non metus dolor, ut suscipit dui. Aliquam mauris lacus, laoreet et consequat quis, bibendum id ipsum. Donec gravida, diam id imperdiet cursus, nunc nisl bibendum sapien, eget tempor neque elit in tortor.
        </div>
      </div>
    </body>
    </html> 
```

在此处添加和删除类`.show`以查看它的工作： [https ://jsfiddle.net/tprfdL21/](https://jsfiddle.net/tprfdL21/)

# ruby-on-rails - 动态部分

> ID：14309939
> 
> 赞同：0
> 
> 时间：2013-01-14T00:34:10.677
> 
> 标签：ruby-on-rails

我正在尝试制作一个表格来创建一个新产品。在页面的顶部，我希望能够选择它是什么类型的产品，并且完成的表单将在下面填充正确的字段（并且在任何时候，都可以更改产品类型）

我的假设是我应该使用 jQuery 和 AJAX 为每个渲染一个不同的部分 - 也就是说，如果用户选择一种产品类型，那么相应的表单会加载一个具有适当表单的部分，而无需刷新页面。

就像我之前的帖子一样，我的第一个问题是确保这在 Rails 社区中是可以接受的。

然而，具有讽刺意味的是，我的问题不在于 AJAX 或 jQuery，而是部分问题。我为“衬衫”创建了一个名为“_shirt.html.erb”的部分，如下所示：

```
<% form_for(:shirt, :url => { :action => 'save_to_session' } ) do |f| %>
<table summary="Shirt form fields">
<tr>    
    <th>Shirt Size S:</th>
</tr>
<tr>
    <td><%= f.select(:size_s, 0..99) %> </td>
</tr>
</table>

  <%= submit_tag("Create Item") %>  
<% end %> 
```

在我看来，我只是想用

```
<%= render "shirt" %> 
```

但是当页面加载时，它不会加载表单。除了布局中的链接外，正文是空的。我在网上看了看，找不到这有什么问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:44:04.860

以这种方式呈现表单不一定是“常规的”，但如果您的应用程序需要此功能，那么我不会让 rails 让您使用某个功能。在我看来，你当然应该尽可能地遵循 Rails 约定，但不应该让它成为限制因素。

至于未呈现的表单，我相信您只需`=`在表单标签中添加一个，它应该是：

```
<%= form_for(:shirt, :url => { :action => 'save_to_session' } ) do |f| %> 
```

代替

```
<% form_for(:shirt, :url => { :action => 'save_to_session' } ) do |f| %> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:49:55.863

如果你想渲染一个部分，你不必指定 :partial 关键字吗？

```
<%= render :partial => "shirt" %> 
```

# c# - 使用 selenium 时如何管理命令执行速度？

> ID：14309941
> 
> 赞同：1
> 
> 时间：2013-01-14T00:34:16.357
> 
> 标签：c#, selenium

我希望能够改变鼠标在硒中移动的速度。

我找到了`DefaultSelenium`类，但这不是静态的，我不知道如何使用它来设置单个 webdrivers 的延迟。

谁能给我指出一个如何在 selenium 中设置执行速度的好例子，最好是在 c# 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:34:38.707

简短的回答，你不能。WebDriver 没有提供管理它的内在方法。您可以通过使用`Actions`该类将单个鼠标移动分解为多个步骤来模拟这样的事情，在步骤之间暂停一小段时间。

# php - 替换应该在mysql还是php中完成？

> ID：14309943
> 
> 赞同：0
> 
> 时间：2013-01-14T00:34:48.163
> 
> 标签：php, mysql, replace

为了减少下载数据的大小，我想用代码替换数据的一些重复部分，在客户端重新转换。

替换应该在 mysql 查询中还是在 PHP 中完成，还是有关系？

在 mysql 中：

```
SELECT IF(SUM(val)=16,0,CONCAT("[",GROUP_CONCAT(TRIM(TRAILING ".000" FROM val) ORDER BY itm),"]")) 
```

PHP：

```
$q=str_replace("1.000","1",$q);
$q=str_replace("[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]","0",$q); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:35:20.593

MySQL 将比 PHP 更快，并使您的代码更简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T00:40:48.830

无论你选择在哪里做，都不要内联。将其包含在一个函数中，这样您就可以在不破坏实际查询的情况下重用和操作逻辑，反之亦然。

我会用我对 PHP 代码的投票，因为当你明天切换到 somethingElseDB 时，你不需要想办法在完全不同的 SQL 语法上实现相同的逻辑。我认为 PHP 实现也更容易阅读。

# javascript - jQuery 驱动的图像滑块头痛

> ID：14309948
> 
> 赞同：0
> 
> 时间：2013-01-14T00:35:38.143
> 
> 标签：javascript, jquery, css, html, jquery-plugins

我一直在尝试找出一个问题大约 3 个小时，但我真的不明白为什么这个插件不起作用。有问题的插件名为 Blueberry，是一个使用 jQuery 的图像滑块。

该插件在演示文件夹中完美运行（在本地运行）。但是当我尝试将代码复制并粘贴到我的工作网站时，它只显示项目符号，但不显示主图像。

*   所有样式表和 javascript 文件都以正确的顺序包含在内
*   单击源代码中的链接时，图像可以正确打开
*   从源代码中单击时，样式表和 javascript 也仍然有效
*   标记在 HTML 方面是正确的

以下是我网站的源代码。假设所有链接都有效并且位于正确的目录中。

（我真的尽量不做广告，但我不能发布这么多源代码，有问题的源代码在这里[。http://web.zesty-designs.co.uk](http://web.zesty-designs.co.uk)）

非常感谢您阅读此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:39:50.107

改变这个：

```
<link rel="stylesheet" href="http://web.zesty-designs.co.uk/public/packages/blueberry/jquery.blueberry.js"> 
```

你必须有

```
 <script type="text/javascript" src="http://web.zesty-designs.co.uk/public/packages/blueberry/jquery.blueberry.js"></script> 
```

浏览器输出错误`Uncaught TypeError: Object [object Object] has no method 'blueberry'`。

这意味着没有这样的对象，所以你有 JS 以 css 风格调用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:40:37.287

控制台窗口在您的站点上读取此错误：

```
 Uncaught TypeError: Object [object Object] has no method 'blueberry' 
```

查看您的 JavaScript 并确保您的脚本已正确加载。

# php - Wordpress get_avatar 功能无法正常工作

> ID：14309952
> 
> 赞同：0
> 
> 时间：2013-01-14T00:36:28.513
> 
> 标签：php, wordpress

我的代码这样做，列出了当前类别中发布的作者。但`get_avatar`功能不正常工作。我正在使用简单的本地头像插件。它正在工作 author.php 没有任何问题。但是当我使用这个代码时，它列出了相同和错误的作者图片（我最新的作者图片。[你可以看这张图片](http://www.screencast.com/t/O02Y5bOx4y0)）

我的代码：

```
<?php if (is_category()) {?>
<?php
$current_category = single_cat_title(“”, false);
$author_array = array();
$args = array(
'numberposts' => -1,
'category_name' => $current_category,
'orderby' => 'author',
'order' => 'ASC'
);
$cat_posts = get_posts($args);
foreach ($cat_posts as $cat_post) :
if (!in_array($cat_post->post_author,$author_array)) {
$author_array[] = $cat_post->post_author;
}
endforeach;
foreach ($author_array as $author) :
$auth = get_userdata($author)->display_name;
$autid= get_userdata($author)->ID;
echo get_avatar( get_the_author_email(), '32' );
echo "<a href='?author=";
echo $autid;
echo "'>";
echo $auth;
echo "</a>";
echo "<br />";
endforeach;
?>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:59:21.260

将其更改`echo get_avatar( get_the_author_email(), '32' );`为`echo get_avatar( $autid, '32' );`

`get_the_author_email()`在当前`loop`的 wordpress 中返回作者的电子邮件，而不是从您的`foreach`循环中返回。

# r - 手动 alpha 比例 exp(-x)

> ID：14309953
> 
> 赞同：4
> 
> 时间：2013-01-14T00:36:32.513
> 
> 标签：r, ggplot2

我有一个数据框`pp`，其中包含一个`nearby_distance`我想映射到`alpha`aes 的变量，这样`nearby_distance`等于的值`0`对应于完全可见性，`nearby_distance`接近无穷大的值对应于接近完全透明的 alpha。

我可以定义一个新变量`pp$alphavar <- exp(-pp$nearby_distance)`并`alphavar`用作我的`alpha`aes。这种方法可以满足我需要的转换，但图中显示的图例不会是有意义的单位。我怎样才能创建一个手动的 alpha 比例来完成这个所需的转换？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T07:09:30.793

`x`制作了包含,`y`和`nearby_distance`值的示例数据框。

```
pp<-data.frame(x=1:200,y=1:200,nearby_distance=seq(0,9.95,0.05)) 
```

`scales`如果现有的不符合您的需要，则可以在库中定义您自己的值转换（请参阅 参考资料`?trans`）。因此无需在原始数据框中进行转换。使用转换，值被转换，然后用于绘图和定义中断。然后将中断进行反向转换以制作图例中的标签。

```
library(ggplot2)
library(scales)

negexp_trans <- function(){
  trans_new('negexp', function(x) exp(-x), function(x) -log(x))
} 
```

`scale_alpha_continuous()`用于获取情节的新转换。

```
ggplot(pp,aes(x,y,alpha=nearby_distance))+geom_point(size=5) + scale_alpha_continuous(trans = 'negexp') 
```

![具有自定义 alpha 缩放的示例图](../Images/6d66aedb6a8c7dd10cc999f866e82153.png)

# python - 如何解决 UnicodeWarning 问题？

> ID：14309954
> 
> 赞同：2
> 
> 时间：2013-01-14T00:36:36.210
> 
> 标签：python, unicode, ascii

我花了大约四个小时研究“UnicodeWarning: Unicode unequal comparison”问题。通常，几个小时后，我可以自己回答最棘手的问题，但这里并非如此。当然，我的意思是对我自己来说“棘手”。;-)

我知道类似的问题在网上和这个网站上都有回答，但是太菜鸟无法很好地理解答案对我一点帮助都没有。也许对我来说最好的方法就是让某人指出我的代码中需要更改的内容。

我在 Windows XP 上使用 Python 2.5。

**我能弄清楚的**

我知道我的问题与我试图比较苹果和橙子（或 Unicode 和 ASCII，或类似的东西，比如字节）有关。我不知道解决这个问题的实用方法。

**这是我的代码：**

```
# coding: iso-8859-1
import sys
from easygui import *

actual_answer = "pureté"
answer_given = enterbox("Type your answer!\n\nHint: 'pureté'")

if answer_given == actual_answer:
    msgbox("Correct! The answer is 'pureté'")
else:
    msgbox("Bug!") 
```

**这是我收到的错误消息：**

> UnicodeWarning: Unicode 相等比较未能将两个参数转换为 Unicode - 将它们解释为不相等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:46:57.707

首先，请阅读： [http ://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

`iso-8859-1` 然后 -在任何系统中处理 Python 时，您都不应该真正使用编码 -`utf-8`改为使用。

第三，您的`easygui`组件返回一个 unicode 对象而不是字节字符串。在上面的代码中解决这个问题的最简单方法是使`actual_answer`变量成为一个 unicode 对象，但在引号前加上一个“u”，例如：

```
actual_answer = u"pureté" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:49:44.323

这是一个返回正确`utf-8`格式的函数：

```
 def utf8(str):
      return unicode(str, 'latin1').encode('utf-8') 
```

另外，您是否尝试过使用 unicode 转义？

```
print "puret\u00E9".decode("unicode_escape") 
```

例如，您可以将其应用于您的代码，如下所示：

```
# coding: iso-8859-1
import sys
from easygui import *

actual_answer = "puret\u00E9".decode("unicode_escape")
answer_given = enterbox("Type your answer!\n\nHint: " + actual_answer)

if answer_given == actual_answer:
    msgbox("Correct! The answer is " + actual_answer)
else:
    msgbox("Bug!") 
```

有关 Unicode Escapes 的更多详细信息，请参阅 Python 文档。 [http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)

# php - 如果 Eval 被认为是邪恶的，那么

> ID：14309955
> 
> 赞同：0
> 
> 时间：2013-01-14T00:36:40.727
> 
> 标签：php, eval

> **可能重复：**
> [php 中的 eval 什么时候是邪恶的？](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)
> [什么时候（如果有的话） eval 不是邪恶的？](https://stackoverflow.com/questions/3499672/when-if-ever-is-eval-not-evil)

正如我的问题所述，[eval](http://php.net/manual/en/function.eval.php)直接将内容作为 PHP 脚本运行。

这将用于什么原因；人们`eval();`甚至考虑使用一个邪恶的功能。

当它是一个非常不可用/不安全的函数时，为什么它仍然在 PHP 中？

# sql - MS Access SQL 查询创建

> ID：14309956
> 
> 赞同：1
> 
> 时间：2013-01-14T00:37:23.023
> 
> 标签：sql, ms-access

正如您在附加的数据库文件中看到的那样，我有两个表（我附加了一个旧的 ms 访问文件 .mdb 和同一个文件的新版本 .accdb）

一个表有一个数字主键字段和一个参考字段。

另一个表将引用（例如 1.1.1 或 1.1.2）作为主键字段。

我需要进行一个 sql 查询，该查询将在第一个表的字段中获取相应的引用，并从引用表中粘贴这些引用的描述。

例如，“TableToBeQueried”表的第一个条目是：

```
RecordID References
       1 1.1.1; 1.1.2 
```

因此，sql 查询理论上会从引用表中返回 1.1.1 和 1.1.2 引用描述，它们是：

```
This is the first reference
This is the second reference 
```

下载：[http ://www.mediafire.com/?6ppbztsx82mvmal,ny93tln8f097jpp](http://www.mediafire.com/?6ppbztsx82mvmal,ny93tln8f097jpp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:48:06.807

`TableToBeQueried`未标准化，这使您的问题更具挑战性。`RecordID`使用包含和的每个组合的行的联结表会更容易`Paragraph`：

```
RecordID Paragraph
       1 1.1.1
       1 1.1.2 
```

但是，如果您坚持现在所拥有的，那是可以做到的。

```
SELECT
    t.RecordID,
    t.Description,
    t.References,
    r.Paragraph,
    r.Description
FROM
    TableToBeQueried AS t,
    [References] AS r
WHERE
         '; ' & [t].[References] & ';'
    Like '*; ' & [r].[Paragraph] & ';*'
ORDER BY
    t.RecordID,
    r.Paragraph; 
```

这适用于在 Access 应用程序会话（SQL89 模式）内运行的查询。但是，如果您使用 OleDb 从外部 Access（SQL92 模式）运行此查询，请将通配符从 更改`*`为`%`.

这些是该查询返回的前 2 行：

```
RecordID t.Description References    Paragraph r.Description
       1 Description 1 1.1.1; 1.1.2  1.1.1     This is the first reference
       1 Description 1 1.1.1; 1.1.2  1.1.2     This is the second reference 
```

# ios - iPad：在横向呈现 UIImagePickerController 会在关闭时旋转我的其他视图控制器

> ID：14309961
> 
> 赞同：3
> 
> 时间：2013-01-14T00:38:06.897
> 
> 标签：ios, objective-c, ipad, uiimagepickercontroller, uimodalpresentationstyle

我`UIImagePickerController`在 iPad 上展示一个带有`UIImagePickerControllerSourceTypeCamera`. 我知道其他`UIImagePickerControllerSourceType`选项需要在 a 中呈现`UIPopoverController`，但我怀疑相机应该是。

话虽如此，我正在从模态视图控制器呈现相机，该控制器呈现为`formSheet`. 有时当我展示选择器时，它会向下移动几个像素，就像状态栏将其向下推：

![在此处输入图像描述](../Images/476981588aaa15dccf45b9e301464157.png)

接下来，当我关闭选择器时，它已将我`formSheet`的模式旋转为纵向模式，但底层`UISplitViewController`仍处于横向模式：

![在此处输入图像描述](../Images/026882f102c64cf3da9e5076415d8202.png)

这里发生了什么？`UIImagePickerController`从模态表单中呈现 a 时，我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:36:21.650

我发现了问题所在。我的`UINavigationController`子类中有以下内容：

```
// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

删除解决了问题！

# ruby-on-rails - Time.zone.parse 未正确转换

> ID：14309962
> 
> 赞同：0
> 
> 时间：2013-01-14T00:38:13.510
> 
> 标签：ruby-on-rails, ruby, datetime, timezone

在我的开发中：

```
str = "Sat Jan 12 2013 14:00:00 GMT-0500"
Time.zone.parse(str).utc 
```

输出：

```
2013-01-12 19:00:00 UTC 
```

在我的制作中（appfog）：

```
2013-01-12 14:00:00 UTC 
```

我怎样才能让它不忽略时区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:19:39.960

[`Time.zone.parse`](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse)将传递的时间解释为当前系统时区，丢弃字符串中的时区信息：

```
require 'active_support/all'

`date '+%Z %z'`.strip
#=> "EST -0500"
Time.zone = 'MST'
Time.zone.parse('Fri, 31 Dec 1999 14:00:00 HST -10:00')
#=> Fri, 31 Dec 1999 12:00:00 MST -07:00 
```

请注意，正如预期的那样，解析的时间以 MST 为单位，但它已将其调整为两个小时前 - 这是 EST（系统时区）和 MST（ActiveSupport 的`Time.zone`）之间的偏移量。不过，这可能是一个错误，因为删除时区“名称”可以按预期工作：

```
Time.zone.parse('Fri, 31 Dec 1999 14:00:00 -10:00')
#=> Fri, 31 Dec 1999 17:00:00 MST -07:00 
```

由于您最终只是转换为 UTC，因此您可能只想使用[`DateTime.parse`](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-parse)：

```
DateTime.parse('Fri, 31 Dec 1999 14:00:00 HST -10:00').utc
#=> Sat, 01 Jan 2000 00:00:00 +0000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:04:10.540

摆脱“GMT”位 - 它可能会使解析器感到困惑：

```
str = "Sat Jan 12 2013 14:00:00 -0500"
Time.zone.parse(str).utc 
```

# mysql - 在多个连接表和相关表中查找特定结果

> ID：14309963
> 
> 赞同：1
> 
> 时间：2013-01-14T00:38:50.500
> 
> 标签：mysql, sql, database, search

我无法用抽象的术语解释我的问题。这是一个非常简单的问题，但我需要通过这个非常明显的例子。它是完全组成的，因此应该与类似的应用程序相当。

我们有一堆包含用户信息的表格，所有表格都是我认为已标准化的表格，有些值只是通过 ID 引用到其他表格。

我正在使用 mySQL （以及带有 mysqli 扩展名的 PHP - 以防万一，我对此表示怀疑）

因此，例如，这是我所拥有的：

```
table user_data

=====================================================
|| User_ID || Name || age || gender || location_ID ||
=====================================================
|| U000001 || Paul || 30  || m      || L00001      ||
|| U000002 || John || 20  || m      || L00001      ||
|| U000003 || Mike || 25  || m      || L00002      ||
|| U000004 || Anna || 25  || f      || L00003      ||

table user_personal_info

============================================
|| User_ID || color || food  || profession||
============================================
|| U000001 || red   || pizza || architect ||
|| U000002 || blue  || pasta || policeman ||
|| U000003 || green || steak || plumber   ||
|| U000004 || pink  || salad || teacher   ||

table locations

========================================================
|| location_ID || country || state      || city       ||
========================================================
|| L00001      || USA     || New York   || New York   ||
|| L00002      || USA     || New York   || Buffalo    ||
|| L00003      || USA     || California || Sacramento ||
|| L00004      || Canada  || Ontario    || Toronto    ||
|| L00005      || Canada  || Quebec     || Montreal   ||

table user_activities

=========================================
|| activity_ID  || user_ID || priority ||
=========================================
|| A0003        || U000001 || 5        ||
|| A0005        || U000001 || 4        ||
|| A0004        || U000002 || 2        ||
|| A0006        || U000002 || 1        ||
|| A0001        || U000003 || 3        ||
|| A0002        || U000004 || 4        ||
|| A0001        || U000004 || 1        ||
|| A0003        || U000004 || 5        ||

table activities

=================================
|| activity_ID  || description ||
=================================
|| A0001        || surfing     ||
|| A0002        || exercising  ||
|| A0003        || baseball    ||
|| A0004        || theater     ||
|| A0005        || dancing     ||
|| A0006        || reading     || 
```

好的，你明白这个概念，对吧？

为了显示每个条目，我制作了以下 mySQL 语句，然后在 PHP 中循环遍历结果集，依此类推：

```
SELECT * FROM user_data
JOIN user_personal_info USING (User_ID) 
```

为了也显示他们最喜欢的活动是什么，我还必须这样做：

```
SELECT * FROM user_activities 
WHERE user_ID = (current user_id) 
```

当然，我必须通过附加查询来翻译活动 ID 代表什么以及位置 ID 代表什么......

*（顺便说一句：有没有人对如何显示所有用户以及与他们关联的所有字段有更好的建议，而不是进行两次查询？）*

现在我想建立一个彻底的搜索功能来找到非常具体的用户。我会知道如何使用 PHP 过滤我的结果，但这需要我首先下载整个数据库，而且一旦数据库中有几千个用户，这可能需要很长时间。

*我知道如何找到来自特定*位置（location_ID=L00001 左右）的男性、女性或两者的用户，喜欢食物或颜色的用户......我知道如何分配关于年龄的规则（=，> , <...)。我知道 LIKE %?% 参数。

我的问题是：

**我如何找到来自某个国家或某个州的所有用户？**
*我如何要求 mySQL 只显示那些用户，谁的 location_ID 与 location_ID 数组中的一个匹配？*

**如何找到所有具有一项和/或更多特定活动的用户？** *我如何要求 mySQL 只显示那些用户，谁的活动数组至少匹配数组中的所有活动（那将是 AND 版本）？* *我如何要求 mySQL 只显示那些用户，谁的活动数组包含数组中的至少一个活动（即 OR 版本）？*

现在真正重要的问题是：

***如何将这些陈述与上面的正常陈述结合起来？*** 含义：*我如何找到来自纽约州的所有喜欢冲浪、男性和喜欢 PIZZA 的用户？* 或者 *我如何找到来自美国的所有喜欢阅读和跳舞、超过 30 岁并且喜欢绿色的用户？* 或者 *我如何找到来自加利福尼亚州萨克拉门托的水管工和女性的所有用户？*

等等等等这些例子显然是无穷无尽的！

我相信有人会告诉我“你应该研究这个关键字”。但是因为我无法以简洁的方式表达我的问题，所以我没有成功找到很多信息......

**更新：**

感谢你的回答。有人指出了一些有用的事情，以下是我不知道但现在要做的事情的摘要：

*   更有效地利用 JOIN
*   IN 运算符
*   GROUP BY 运算符与 HAVING COUNT() 结合
*   和子选择

感谢您向我指出这些事情！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:42:28.840

好吧，我认为您要查找的关键字之一是`IN`运算符。

```
SELECT * FROM locations WHERE country IN ('USA', 'Canada', 'Denmark') 
```

将返回 IN 子句中的值之一与国家字段匹配的所有行。所以就像这样写：

```
SELECT * FROM locations WHERE country = 'USA' OR country = 'Canada' OR country = 'Denmark' 
```

至于你的其他问题：

**有没有人对如何显示所有用户和与他们关联的所有字段有更好的建议，而不是执行两个查询？**

只需将它们全部连接在一起，例如：

```
SELECT * FROM user_data
JOIN locations ON user_data.location_ID = locations.location_ID
JOIN user_personal_info ON user_data.User_ID = user_personal_info.User_ID
JOIN user_activities ON user_personal_info.User_ID = user_activities.User_ID
JOIN activities ON user_activities.activity_ID = activities.activity_ID 
```

当然，取决于您使用的结构`LEFT JOIN`或`RIGHT JOIN`等。简单地通过 检索所有数据也不是一个好习惯`SELECT *`，而是只选择您需要的字段。此外，您可以/应该创建一个/多个表示您需要的连接数据的视图并从中选择。

**我如何找到来自某个国家或某个州的所有用户？**

```
SELECT user_data.* FROM user_data
JOIN locations ON user_data.location_ID = locations.location_ID
WHERE locations.country = 'USA' AND state = 'New York' 
```

取决于您如何从用户那里获取数据以及如何为 PHP 中的语句准备数据。例如，假设您的用户搜索一个国家，并且您通过 post 方法获得它：

```
<?php
  $country = sanitize($_POST['country']);  // assuming a sanitation function for user input
  // whether by doing a sub-select
  $sql = "SELECT user_data.* FROM user_data WHERE user_data.location_ID = (SELECT locations.location_ID FROM locations WHERE locations.country LIKE '%{$country}%')";

  // or doing a join
  $sql = "SELECT user_data.* FROM user_data JOIN locations ON user_data.location_ID = locations.location_ID WHERE locations.country LIKE '%{$country}%'";
?> 
```

当然，同样的原则也适用于状态。

**如何找到所有具有一项和/或更多特定活动的用户？**

在这里，您需要加入活动表并使用 IN 运算符，如上所示。

**如何将这些陈述与上面的正常陈述结合起来？**

以您为例*，我如何找到来自纽约州的所有喜欢冲浪、男性和喜欢 PIZZA 的用户？*

```
SELECT user_data.* FROM user_data
 JOIN locations ON user_data.locations_ID = locations.location_ID
 JOIN user_activities = user_data.User_ID = user_activities.user_ID
 JOIN activities ON user_activities.activity_ID = user_activities.activity_ID
WHERE locations.sate = 'New York'
  AND activities.description IN ('surfing')
  AND user_data.gender = 'm'
  AND user_personal_info.food = 'pizza' 
```

希望这会有所帮助并让您朝着正确的方向前进。

**更新**

当然这里的 IN 运算符可以用 代替`description = 'surfing'`，因为它只是一个值。你是对的，如果你添加另一个值，就像`description IN ('surfing', 'reading')`它意味着`surfing OR reading`. 因此，如果您想吸引所有参与其中的用户，`surfing AND reading`我想我会使用子选择来做到这一点：

```
SELECT user_data.* FROM user_data
 WHERE user_data.User_ID IN (
   SELECT user_activities.user_ID FROM user_activities
     JOIN activities ON user_activities.activity_ID = activities.activity_ID
    WHERE activities.description IN ('surfing', 'reading')
   GROUP BY user_activities.activity_ID
     HAVING COUNT(user_activities.user_ID) = 2
 ) 
```

因此，子选择意味着：计算出现“冲浪”或“阅读”的每个用户 ID，如果计数等于 2（意味着它们都匹配），则检索用户 ID。外部选择只是从子集的每个用户中选择数据。

现在，我没有对此进行测试，因此可能会有所不同。并且可能有更简单的方法。至少你可以做一些事情来简化这个查询，就像我之前提到的那样创建一个视图并从中进行选择。

# jquery - Rails 中的数据表——如何摆脱“无法重新初始化数据表”错误

> ID：14309964
> 
> 赞同：0
> 
> 时间：2013-01-14T00:38:57.583
> 
> 标签：jquery, ruby-on-rails, datatables

我将 DataTables 与我的 Rails 应用程序一起使用。

出于某种原因，DataTables/JQuery 似乎认为我正在尝试重新初始化 DataTable。每当我加载使用 DataTables 的页面时，都会出现以下错误：

```
DataTables warning (table id = 'DataTables_Table_0'): Cannot reinitialise DataTable.
To retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy 
```

为什么会这样？据我所知，我的页面只加载一次脚本，我知道它每页只生成一个表格元素......

**/application/views/layouts/application.html.haml**：

```
!!!
%html
  %head
    = javascript_include_tag "application"
  %body
    = yield 
```

**/application/views/reports/index.html.haml**：

```
%table
  %thead
    %tr
      %th Short Name
      %th Controls
  %tbody
    - @reports.each do |report|
      %tr
        %td= link_to report.full_name, report_path(report)
        %td
          = link_to "Edit", edit_report_path(report)
          \|
          = delete_link "Delete", report_path(report) 
```

我很确定我已经正确设置了资产管道......

**/assets/javascripts/application.js**：

```
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require html5shiv
//= require_tree . 
```

而且我很确定我正确地调用了 DataTables ......

**/assets/javascripts/tables.js.coffee**：

```
jQuery ->
  $('table').dataTable
    sPaginationType: "full_numbers"
    bJQueryUI: true 
```

而且我认为我的任何宝石都不会导致这种行为：

**宝石文件**：

```
source "http://rubygems.org"

gem "rails", "3.2.11"
gem "activesupport"
gem "actionmailer"
gem "mail"
gem "railties"
gem "compass"
gem "pg"
gem "sass"
gem "sass-rails"
gem "haml"
gem "haml-rails"
gem "susy"
gem "jquery-rails"
gem "google-analytics-rails"
gem "declarative_authorization"
gem "authlogic"
gem "simple_form"
gem "country-select"
gem "rails3-generators"
gem "hirb"
gem "debugger"
gem "redis"
gem "RedCloth"
gem "friendly_id"
gem "high_voltage"
gem "validatious"
gem "houdini"
gem "rspec-rerun"
gem "html5shiv-rails"
gem "normalize-rails"
gem "simple-navigation"
gem "thin"

group :development do
  gem "taps"
  gem "better_errors"
  gem "binding_of_caller"
end

group :test do
  gem "capybara"
  gem "rspec-rails"
  gem "database_cleaner"
  gem "launchy"
  gem "spork", "0.9.2"
  gem "respec"
end

group :assets do
  gem "better_errors"
  gem "sass-rails"
  gem "coffee-rails"
  gem "compass-rails"
  gem "compass-susy-plugin"
  gem "fancy-buttons"
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
  gem "jquery-ui-rails"
  gem "uglifier"
end 
```

**更新**：我知道这*与*资产管道有关，因为 Heroku 上生产中的相同代码（之后`rake assets:precompile`）不会导致它在开发中引起的问题（应用程序为我即时组装资产） .)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T10:11:50.573

如果在使用数据初始化表之前触发 dataTables js，则可能会发生此错误。尝试移动您的

= javascript_include_tag “应用程序”

到页面底部。

======

```
!!!
%html
  %head

  %body
    = yield
    = javascript_include_tag "application" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T07:05:05.523

尝试整理如下

```
$('selector').dataTable({...}); 
```

1\. 大部分情况下，您应该使用 ID 代替选择器，

2.  实际问题是您不应该使用重复的 ID，或者如果您使用类作为选择器，则不应将该类用于多个元素（听起来很烦人），因此最好将选择器用作 ID（ID 不应该重复元素）

# php - 如何使用行查询结果作为链接，然后根据该结果创建新页面

> ID：14309965
> 
> 赞同：0
> 
> 时间：2013-01-14T00:39:02.150
> 
> 标签：php, forms, session, search, cookies

这是我返回表单搜索结果的 PHP 文件：

```
<table style="padding:3px;text-align:center;text-color:#817679;" width="825px">

<tr class="tborder">

<td width="150px" class="blockhead"><b>Level</b></td>
<td width="225px" class="blockhead"><b>Monster Name</b></td>
<td width="150px" class="blockhead"><b>Race</b></td>
<td width="150px" class="blockhead"><b>Ratio</b></td>
<td width="150px" class="blockhead"><b>HP</b></td>

</tr>

<tr>

<?php
mysql_connect ("localhost", "root","")  or die (mysql_error());
mysql_select_db ("energized");

$term = $_POST['term'];

$sql = mysql_query("select * from bestiary where name like '%$term%'");

while ($row = mysql_fetch_array($sql)){

echo '  <tr class="tborder2">
    <td width"150px">'. $row['name'] .'</td>
    <td width"225px">'. $row['level'] .'</td>
    <td width"150px">'. $row['race'] .'</td>
    <td width"150px">'. $row['ratio'] .'</td>
    <td width"150px">'. $row['HP'] .'</td>
    </tr>
 ';
}

?>
    </td>

</tr>

</tbody></table> 
```

我的索引页面上有一个表格，它显示了数据库行中的所有名称，其中包括搜索的字符，因此搜索“fi”将返回所有名称，其中这些字符按顺序排列。我的问题在于搜索结果。

```
<td width"150px">'. $row['name'] .'</td> 
```

我希望上述结果是指向新页面的 html 链接，该页面显示该列中的所有行。目前，搜索查询只为每个结果返回 5 行值。我显然不想为每个搜索结果显示我的数据库的 15 行。

那么我怎样才能做到这一点，以便您单击结果“名称”，它将带您进入一个包含该“名称”的所有行信息的新页面？

我需要每个“名称”搜索结果的链接。我知道这涉及将变量从一页转移到另一页，但我不知道如何为所有搜索结果执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:13:27.660

您需要创建 URL：

```
 <a href="page.php?term=<?php echo urlencode($row['name']) ?>"><?php echo $row['name'] ?></a> should do it, given the code you specified. 
```

这是为您的页面设置 GET`term`参数。您必须切换`$_POST['term']`为`$_GET['term']`or `$_REQUEST['term']`，因为如果`$_POST`没有表单，您将无法轻松填充。

# java - 如何一次在多个表中添加行？

> ID：14309966
> 
> 赞同：0
> 
> 时间：2013-01-14T00:39:07.450
> 
> 标签：java, mysql, netbeans, phpmyadmin

我在 netbeans 中制作了一个 java 程序，它在我的数据库中执行不同的查询。我在表中添加数据时遇到问题。它在前两个表中插入数据，但也不在第三个表中。这是代码：

```
String sql="INSERT INTO  `adresa` (`ID` ,`TARA` ,`JUDET` ,`LOC` ,`CPOSTAL` ,`STRADA` ,`NR` ,`BLOC` ,`SC` ,`APT`) VALUES (?,?,?,?,?,?,?,?,?,?)";
    pst=conn.prepareStatement(sql);
    pst.setString(1, ID.getText());
    pst.setString(2, tara.getText());
    pst.setString(3, judet.getText());
    pst.setString(4, loc.getText());
    pst.setString(5, cpostal.getText());
    pst.setString(6, strada.getText());
    pst.setString(7, nr.getText());
    pst.setString(8, bloc.getText());
    pst.setString(9, sc.getText());
    pst.setString(10, apt.getText());
    pst.execute();

String sql2="INSERT INTO  `pbd`.`buletin` (`CNP` ,`DATAN` ,`SEX` ,`SERIENRB` ,`DATAEMIT` ,`DATAEXP`) VALUES (?,?,?,?,?,?);";
pst.setString(1, CNP.getText());
pst.setString(2, datan.getText());
pst.setString(3, sex.getText());
pst.setString(4, serienrb.getText());
pst.setString(5, dataemit.getText());
pst.setString(6, dataexp.getText());
pst.executeBatch();

String sql3="INSERT INTO  `pbd`.`persoana` (`ID` ,`CNP` ,`NUME` ,`PRENUME` ,`NATIONALITATE` ,`VIU`) VALUES (?,?,?,?,?,?);";
pst.setString(1, ID.getText());
pst.setString(2, CNP.getText());
pst.setString(3, nume.getText());
pst.setString(4, prenume.getText());
pst.setString(5, nationalitate.getText());
pst.setString(6, viu.getText());
pst.executeBatch(); 
```

以下是表格信息：

![在此处输入图像描述](../Images/a3e98e353cd0a68fb0c7e443e1647b76.png)

我认为查询是错误的或表格的概念，但我不确定。请告诉我你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T01:33:09.113

您需要将 sql2 和 sql3 的代码更改为

```
pst.close();
String sql2="INSERT ...
pst=conn.prepareStatement(sql2);
...
pst.executeUpdate();

pst.close();
String sql3="INSERT ...
pst=conn.prepareStatement(sql3);
...
pst.executeUpdate(); 
```

executeBatch 在这种情况下无关紧要，它只能用于同一 SQL 的不同参数集。

# java - 如何使用操作符号（,-,*,/）与自定义对象进行交互？

> ID：14309967
> 
> 赞同：0
> 
> 时间：2013-01-14T00:39:11.460
> 
> 标签：java, operators

我在 AP Comp Sci A，我们正在做一个名为“网格世界”的案例研究。基本上，网格上存在移动（或不移动）的虫子和岩石。这些“演员”中的每一个都有一个“位置”，即他们的（行、列）绳索以及他们的方向。编写“网格世界”的人制作了它，因此您可以添加位置 togethe4。

如果“演员”朝上，这将导致它朝右：

```
 new Location l = myLocation + Location.HALF_RIGHT; 
```

如何对其他对象执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T00:41:48.630

```
myLocation 
```

那是一个整数。

```
Location.HALF_RIGHT 
```

那是一个整数。您不能向对象添加 + 和 - 功能，但可以添加“添加”和“减法”方法。

此外，您的代码甚至无法编译。我想你的意思是：

```
l = new Location(myLocation + Location.HALF_RIGHT); 
```

或者，如果您的结果位置是 int：

```
l = myLocation + Location.HALF_RIGHT; 
```

# java - 我想检查并运行以下代码，但它给了我预期的错误标识符

> ID：14309968
> 
> 赞同：-6
> 
> 时间：2013-01-14T00:39:28.933
> 
> 标签：java

谁能告诉我为什么程序无法在第三部分执行，即当我传递复制构造函数时？它说在 Stud(studs) 附近预期的标识符

```
class Stud
{
String name;
int rollno;
double per;

Stud()
 {
  name="";
  rollno=0;
  per=0.0;
 }

Stud(String n,int rn,double p)
 {
  name=n;
  rollno=rn;
  per=p;
 }

Stud(Studs)
 {
  name=s.name;
  rollno=s.rollno;
  per=s.per;
 }

void display()
{
 System.out.println(name+ "\t" +rollno+ "\t" +per);
}
}

class StudApp14
 {
  public static void main(String a[])
   {
    Stud s1=new Stud();
    Stud s2=new Stud("Amit",501,65.0);
    Stud s3=new Stud(s2);
    s1.display();
    s2.display();
    s3.display();
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:41:20.587

问题是这个构造函数

```
Stud(Studs)
 {
  name=s.name;
  rollno=s.rollno;
  per=s.per;
 } 
```

它应该是（您在类型和变量名之间缺少空格）：

```
Stud(Stud s)
 {
  name=s.name;
  rollno=s.rollno;
  per=s.per;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:47:13.387

错误在此构造函数中：

```
Stud(Studs)
{
  name=s.name;
  rollno=s.rollno;
  per=s.per;
} 
```

你的意思是：

```
Stud(Stud s)
{
  name=s.name;
  rollno=s.rollno;
  per=s.per;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T00:43:26.200

螺柱（螺柱）{ name=s.name; rollno=s.rollno; 每=s.per；什么是“螺柱”？它没有定义。

也许你的意思是

```
Stud (Stud s ) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T00:49:10.167

编译器认为“Studs”是一种类型并且缺少标识符。因此，如果您严格遵循编译器错误并决定通过添加如下标识符来修复它：

```
Stud(Studs s) 
```

然后你会得到一个错误说：

```
error: cannot find symbol 
```

这意味着编译器搜索类型“Studs”但找不到它。

更多关于 java 类型、值和变量的信息：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-4.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)

# wpf - 如何接受焦点 C# WPF UserControl

> ID：14309969
> 
> 赞同：6
> 
> 时间：2013-01-14T00:39:41.543
> 
> 标签：wpf, user-controls, focus

我正在尝试创建一个日期编辑用户控件，但使用 TextBlock 而不是 TextBox，因为我想要一个输入上下文而不是管理六个可能的焦点。

如何接受焦点？我尝试将 Focusable 设置为 TRUE，但似乎还不够。我还需要做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T00:50:03.200

听起来你需要设置`KeyboardFocus`元素

例子：

```
<UserControl x:Class="MyControl"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
       mc:Ignorable="d" 
       d:DesignHeight="300" d:DesignWidth="300"
       FocusManager.IsFocusScope="True"
       FocusManager.FocusedElement="{Binding ElementName=mytextBlock}">
    <Grid>
       <TextBox Name="mytextBlock" />
    </Grid>
</UserControl> 
```

或者在代码后面：

```
FocusManager.SetFocusedElement(this, mytextblock);
Keyboard.Focus(mytextblock); 
```

# visual-studio-2010 - 缺少目录“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC”它在哪里？VC 2010 Express 安装后

> ID：14309973
> 
> 赞同：0
> 
> 时间：2013-01-14T00:40:01.587
> 
> 标签：visual-studio-2010, windows-8, visual-studio-2012

我正在使用 Visual Studio 2012 Ultimate 运行 Windows 8 X64 I。我安装了 Visual c++ express，当我查看目录时遇到 lib 缺少链接器错误，我发现安装从未安装任何库，它甚至没有创建 C:\Program Files (x86)\Microsoft Visual Studio 10.0\ VC目录..

我也尝试过卸载，删除旧的 C:\Program Files (x86)\Microsoft Visual Studio 10 目录并重新安装 vis2010 pro 版本，甚至是终极版。但仍然没有创建库。如果我查看我以前的 Visual Studio 2012 安装，我会看到 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\Lib 在那里，但不管我做什么我都无法得到我的 Visual Studio 2010 安装以安装我需要的库

请帮忙。它快把我逼疯了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:43:26.657

请检查您的 Visual Studio 2010 的安装盘。您可能已经安装在 D 盘和 VC 中，其子文件夹可能存在于 D:\Program Files (x86)\Microsoft Visual Studio 10/VC....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T08:07:25.310

此文件夹：“C:\Program Files (x86)\Microsoft Visual Studio 10.0”由 Visual Studio 2012 安装。

# php - 使用 jQuery 调整 PHP GD 图像大小和裁剪

> ID：14309974
> 
> 赞同：1
> 
> 时间：2013-01-14T00:40:05.087
> 
> 标签：php, jquery, gd, crop, jcrop

只是想在我的网站上放置一个简单的缩略图裁剪器。jQuery插件jCrop抓取坐标发给PHP就好了，我测试过了。问题是当 PHP 裁剪它时，它只会给我留下一个文件大小为“0”的空图像。这是PHP：

```
//GRAB DIMENSIONS
        //COORDINATES OF CROPPER BOX
        $getDimX = htmlspecialchars(trim(urldecode($_POST['valX'])));
        $getDimY = htmlspecialchars(trim(urldecode($_POST['valY'])));
        //WIDTH AND HEIGHT OF CROPPER BOX
        $getDimW = htmlspecialchars(trim(urldecode($_POST['valW'])));
        $getDimH = htmlspecialchars(trim(urldecode($_POST['valH'])));
        //SQUARE THUMBNAIL DIMENSIONS
        $targ_w = $targ_h = 150;

        //DIRECTORIES
        $src = '../users/'.$_SESSION['userName'].'/temp/defaultPicTempResizePng.png';
        $defaultDir = '../users/'.$_SESSION['userName'].'/default/defaultPic.png';

        $img_r = imagecreatefrompng($src);
        $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

        imagecopyresampled($dst_r,$img_r,0,0,$getDimX,$getDimY,
        $targ_w,$targ_h,$getDimW,$getDimH);

        imagepng($dst_r, $defaultDir, 100);

        $JSONData = array('true', ' '); 
    echo json_encode($JSONData); 
```

经过一番谷歌搜索，我发现有些人需要图像的原始宽度和高度。如果需要的话，这很容易获得并使用 jQuery 发送到 php，但是如果需要，我在哪里输入呢？不确定这是否是我做错了，或者我的 php.ini 中有什么不正确的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:01:57.787

您是否考虑过使用[timthumb](http://code.google.com/p/timthumb/)？它只是 1 个脚本，如果您传递正确的参数，它会为您完成所有工作。例如（未测试），如果您想要如下图像：

```
width = 100
height = 75
quality = 90%
crop x = 0
crop y = 0
crop width = 100
crop height = 75 
```

您只需向以下内容提出请求：

```
http://yourserver.com/timthumb.php?src=path/to/image.png&w=100&h=75&q=90&cx=0&cy=0&cw=100&ch=75 
```

这将生成一个 100x75 的图像缩略图，从左上角开始。Timthumb 与 jCrop 完美集成，我也在一个项目中使用过它。

# java - 使用 Java 图形绘制带有线条的圆圈

> ID：14309980
> 
> 赞同：1
> 
> 时间：2013-01-14T00:40:58.167
> 
> 标签：java, geometry, awt, java-2d

我有一个有趣的问题。使用Java图形，我想画一个圆圈，圆圈中有平行线，它们之间有一些预先定义的间隙常数。圆具有已知的 x 和 y 位置以及半径。这些线应该从圆的中心开始，并且应该向外移动。例如，

![在此处输入图像描述](../Images/124ce323d93fccc54db53bde12fa377b.png)

我想最简单的方法是先画线来填满整个正方形，如下所示：

![在此处输入图像描述](../Images/6d54284d4883f16081ecb66db2cfe64f.png)

然后也许画4个多边形并用白色填充它们。4个多边形标记如下：

![在此处输入图像描述](../Images/76997ba1c4fe7761177fad7872df8b66.png)

如您所见，在这种情况下，多边形由左顶点 (x,y) 定义，宽度和高度边缘由圆的半径定义，然后是 (x+radius, y+radius) 的弧.

**需要反馈：**

1.  甚至可以在 Java 中绘制这样的多边形吗？
2.  这个逻辑有意义吗？这对你来说似乎更容易？
3.  另一种方法是以某种方式确定构成圆的像素并使用这些像素绘制线条。但这对我来说似乎很乱。你同意？
4.  你能想到另一种方法吗？

**重要提示：**请注意，虽然此解决方案具有垂直线，但应根据某个角度 theta 定义这些线。也就是说，它们可以倾斜（但都相互平行）。

如果有人可以提供实际绘制的代码，我将永远感激不尽！！:)

```
public void draw(Graphics g, int x, int y, int radius, int lineGap, int lineThickness, int theta) {
   //g = the graphics object
   //x,y = the top left coordinate of the square
   //radius = the radius of the circle, the width of the rectangle, the height of the rectangle
   //lineGap = the gap in between each of the lines
   //lineThickness = the thickness of the lines in pixels
   //theta = the angle that the lines should be at, relative to the y axis
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T00:52:57.220

使用 ol' [Pythagorean Thereom](http://en.wikipedia.org/wiki/Pythagorean_theorem)，这个简单的代数如下...... ![y 根据 x 和 r](../Images/2e24778aad3c3db701de7053d6ac47ac.png)

**r**是圆的半径。
**x**是一个变量，您将在圆中进行迭代，您可以通过知道半径和间距轻松计算出增量。

知道每条线的高度（以及它们的 x 位置），将与圆心平行的垂直线居中将不会是一个挑战（如果您的放置坐标像通常那样指定左上角，您将想要放置它在`y = circle_center - (line_length / 2)`

另请注意，如果您确实通过左上角指定垂直线的坐标，则在计算 x 坐标时需要考虑它们的粗细。
这非常简单，使用圆圈建议的 x 值。
`true_x = suggested_x - (line_width / 2)`

**请参阅其他更明智的答案来处理有角度的线**

**这个过程仍然作为使用剪辑找到每条线的确切域/范围的敏感性的演示**（因为我在它上面浪费了我的生命）。

![在此处输入图像描述](../Images/e391b8bfbd43adb3c79257fc5140f617.png) ![在此处输入图像描述](../Images/39c3cf9f50d9fb70d3ef31da0cb32529.png) ![在此处输入图像描述](../Images/2d6728d8b3be82b5bfdfe5d0cebe947b.png) ![在此处输入图像描述](../Images/af1095935e3ad178362db2752b695cf9.png) 这就是我的乐趣结束的地方。 ![在此处输入图像描述](../Images/90c18de0005cf5b65d7222b238b272cb.png)

哎呀！将最后一个 m 替换为 'tan(theta)'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T01:01:07.487

简单更改图形剪辑...

![在此处输入图像描述](../Images/16a20601173420a3d541e9d3f0e1bf72.png)

```
public class SimplePaint02 {

    public static void main(String[] args) {
        new SimplePaint02();
    }

    public SimplePaint02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int radius = Math.min(getWidth(), getHeight());
            int x = (getWidth() - radius) / 2;
            int y = (getHeight()- radius) / 2;

            BufferedImage buffer = new BufferedImage(radius, radius, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = buffer.createGraphics();

            Ellipse2D circle = new Ellipse2D.Float(0, 0, radius, radius);
            Shape clip = g2d.getClip();
            g2d.setClip(circle);
            int gap = getWidth() / 10;
            g2d.setColor(Color.RED);
            for (int index = 0; index < 10; index++) {

                g2d.drawLine(index * gap, 0, index * gap, radius);

            }
            g2d.setClip(clip);
            g2d.setColor(Color.BLUE);
            g2d.draw(circle);
            g2d.dispose();
            g.drawImage(buffer, x, y, this);
        }

    }

} 
```

**更新**

我应该指出，你不应该修改任何渲染到屏幕的图形上下文的剪辑，这会严重破坏屏幕渲染；）

**更新#2**

显示使用 an`AffinTransformation`来支持旋转的示例...

![在此处输入图像描述](../Images/c41cfc912521e7ad5481b9fb2194939b.png)

```
public class CirlceDraw {

    public static void main(String[] args) {
        new CirlceDraw();
    }

    public CirlceDraw() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int radius = Math.min(getWidth(), getHeight());
            int x = (getWidth() - radius) / 2;
            int y = (getHeight() - radius) / 2;

            BufferedImage buffer = new BufferedImage(radius, radius, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = buffer.createGraphics();

            Ellipse2D circle = new Ellipse2D.Float(0, 0, radius, radius);
            Shape clip = g2d.getClip();
            g2d.setClip(circle);
            AffineTransform at = g2d.getTransform();
            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(33), radius / 2, radius / 2));
            int gap = getWidth() / 10;
            g2d.setColor(Color.RED);
            for (int index = 0; index < 10; index++) {

                g2d.drawLine(index * gap, 0, index * gap, radius);

            }
            g2d.setTransform(at);
            g2d.setClip(clip);
            g2d.setColor(Color.BLUE);
            g2d.draw(circle);
            g2d.dispose();
            g.drawImage(buffer, x, y, this);
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T00:48:46.100

我会使用三角函数。

你的`x`线由与原点（圆心）的角度的余弦给出。所以，`arccos(x)`会给你哪个是角度。

获得角度后，您可以使用 sinus`sin`函数获得其最大高度。

当然，所有 java trig 函数都使用弧度（360 度 = 2*PI 弧度）。

# hibernate - 带有几何的杰克逊 JSON 视图

> ID：14309981
> 
> 赞同：3
> 
> 时间：2013-01-14T00:41:11.313
> 
> 标签：hibernate, geometry, jackson, spatial

我在 PostgreSQL DB + PostGIS 上使用 Spring + Hibernate `Geometry`，它在 DB 上执行 CRUD 操作并使用 Jackson JSON 视图返回 JSON 输出。在我添加`Geometry`. 当我检查对象时，搜索返回正确的输出，但是在创建结果的 JSON 表示时似乎存在问题，该结果具有`Geometry`. 我得到这样的东西：

```
org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: This method does not support GeometryCollection arguments (through reference chain: java.util.ArrayList[0]->com.tutorial.jquery.model.State["geom"]->com.vividsolutions.jts.geom.MultiPolygon["boundary"]->com.vividsolutions.jts.geom.MultiLineString["boundary"]->com.vividsolutions.jts.geom.MultiPoint["boundary"]->com.vividsolutions.jts.geom.GeometryCollection["boundary"]); nested exception is org.codehaus.jackson.map.JsonMappingException: This method does not support GeometryCollection arguments (through reference chain: java.util.ArrayList[0]->com.tutorial.jquery.model.State["geom"]->com.vividsolutions.jts.geom.MultiPolygon["boundary"]->com.vividsolutions.jts.geom.MultiLineString["boundary"]->com.vividsolutions.jts.geom.MultiPoint["boundary"]->com.vividsolutions.jts.geom.GeometryCollection["boundary"])
at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.writeInternal(MappingJacksonHttpMessageConverter.java:195)
at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:179)
at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:148)
at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:90)
at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:189)
at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:69)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:122)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: org.codehaus.jackson.map.JsonMappingException: This method does not support GeometryCollection arguments (through reference chain: java.util.ArrayList[0]->com.tutorial.jquery.model.State["geom"]->com.vividsolutions.jts.geom.MultiPolygon["boundary"]->com.vividsolutions.jts.geom.MultiLineString["boundary"]->com.vividsolutions.jts.geom.MultiPoint["boundary"]->com.vividsolutions.jts.geom.GeometryCollection["boundary"])
at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:215)
at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:180)
at org.codehaus.jackson.map.ser.SerializerBase.wrapAndThrow(SerializerBase.java:128) 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-23T14:29:04.507

您可以为 jackson 的几何类型注册自定义序列化器，例如，请参阅[Custom Jackson Serializer for a specific type in a specific class](https://stackoverflow.com/questions/23252918/custom-jackson-serializer-for-a-specific-type-in-a-particular-class)。问题是，你希望它如何呈现为 json？通过 WKT 还是其他什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T15:50:07.420

我有以下错误，被其他后续错误隐藏：

```
org.codehaus.jackson.map.JsonMappingException: This method does not 
support GeometryCollection arguments (through reference chain: 
com.mapflow.exposure.model.wrapper.DefaultWrapper["result"]->
java.util.ArrayList[0]->com.mapflow.exposure.model.poi.SimplePoint["geom"]->
com.vividsolutions.jts.geom.Point["boundary"]->
com.vividsolutions.jts.geom.GeometryCollection["boundary"]) 
```

原因看起来我们在 Weblogic 环境中使用了 Jackson 库（我们在 Tomcat 中使用了另一个运行良好的库）并且它无法处理几何属性。

我们`@JsonIgnore`在实体和它的 getter 中添加了属性声明：

```
import org.codehaus.jackson.annotate.JsonIgnore;
@JsonIgnore
private Geometry geom;
(...)
@JsonIgnore
public Geometry getGeom() {
    return geom;
} 
```

我可以在这个问题中看到其他更复杂的方法，但我自己没有尝试过：

[来自vividsolutions JTS的几何在创建JSON时失败](https://stackoverflow.com/questions/29884324/geometry-from-vividsolutions-jts-fails-when-creating-json)

# php - Symfony2 注册 MySQL soundex 失败？

> ID：14309983
> 
> 赞同：3
> 
> 时间：2013-01-14T00:41:13.813
> 
> 标签：php, mysql, symfony, doctrine-orm

尝试注册 soundex 函数会导致：

> [语法错误] 第 0 行，第 106 列：错误：预期的字符串结尾，得到 'SOUNDEX'

### 类定义：

```
use Doctrine\ORM\Query\AST\Functions\FunctionNode;

/**
 * SoundexFunction ::= "SOUNDEX" "(" StringPrimary  ")"
 */
class SoundexFunction extends FunctionNode
{
    public $stringExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->$stringExpression = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);

    }
    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'SOUNDEX(' .
            $this->$stringExpression->dispatch($sqlWalker) .
        ')';
    }
} 
```

### config.yml 片段：

```
orm:
    auto_generate_proxy_classes: "%kernel.debug%"
    entity_managers:
      default:
        auto_mapping: true
        dql:
          string_functions:
            soundex: Mana\ClientBundle\DQL\SoundexFunction 
```

### 查询功能：

```
protected function getMatches($incoming) {
    $em = $this->getDoctrine()->getManager();
    $fname = $incoming['fname'];
    $sname = $incoming['sname'];
    $sql = "select id, active, fname, sname, dob, phys_addr, phys_city
        from ManaClientBundle:Client where SOUNDEX(fname) = SOUNDEX(:fname) and
        SOUNDEX(sname) = SOUNDEX(:sname)
        order by sname, fname";
    $query = $em->createQuery($sql)
        ->setParameters(array(
            'fname' => $fname,
            'sname' => $sname,
        ));
    return $query->getResult();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T01:21:49.330

Geo，不知道为什么它不适合你。我用 QueryBuilder 试了一下，效果很好。但是，我确实必须用 替换您的`$this->$stringExpression`用法`$this->stringExpression`。

编辑：

我刚刚在一个裸应用程序中测试了您的代码，问题不在于 SOUNDEX，而在于您的 SQL。尝试为您的实体分配 SQL 别名：

```
$sql = "select client.id, client.active, client.fname, client.sname, client.dob, client.phys_addr, client.phys_city
        from ManaClientBundle:Client client where SOUNDEX(client.fname) = SOUNDEX(:fname) and
        SOUNDEX(client.sname) = SOUNDEX(:sname)
        order by client.sname, client.fname"; 
```

# php - 如何两次插入同一张表？

> ID：14309984
> 
> 赞同：0
> 
> 时间：2013-01-14T00:41:16.697
> 
> 标签：php, mysql, forms, if-statement, insert

我正在创建一个预订系统（机场出租车公司），该系统最初创建一个存储客户联系方式和账单详细信息等的预订，然后使用 ID 将旅程信息发布到另一个表中，如果包含返回详细信息，则创建另一个与回程记录在同一个JOBS表中。我正在使用 IF 语句来检查是否已提交退货详细信息。但是，它只插入第一个旅程，而不是返回。请参阅下面的代码。

有任何想法吗？

我也很欣赏我很可能会以一种奇怪的方式来实现我的结果，因此也欢迎任何批评和指点。

谢谢

```
<?php

$customer_title          =  $_POST['customer_title'];
$customer_first_name     =  $_POST['customer_first_name'];
$customer_last_name      =  $_POST['customer_last_name'];
$billing_address         =  $_POST['billing_address'];
$customer_tel            =  $_POST['customer_tel'];
$customer_mobile         =  $_POST['customer_mobile'];
$customer_email          =  $_POST['customer_email'];
$passengers              =  $_POST['passengers'];
$cases                   =  $_POST['cases'];
$return_flight_number    =  $_POST['return_flight_number'];
$price                   =  $_POST['price'];
$pickup_date             =  $_POST['pickup_date'];
$pickup_time             =  $_POST['pickup_time'];
$pickup_address          =  $_POST['pickup_address'];
$pickup_destination      =  $_POST['pickup_destination'];
$return_date             =  $_POST['return_date'];
$return_time             =  $_POST['return_time'];
$return_pickup           =  $_POST['return_pickup'];
$return_destination      =  $_POST['return_destination'];
$booking_notes           =  $_POST['booking_notes'];

$booking_status          =  Confirmed;
$account_number          =  9999;
$authorised              =  N;

$booking_date            = 0;
$null_date               = '0000-00-00'; 

include('../assets/db_connection.php');

mysql_select_db("airporthopper");

mysql_query("INSERT INTO bookings(customer_name, billing_address, account_number, contact_tel, contact_mob, contact_email,
            party_pax, party_cases, booking_notes, price, booking_agent, booking_date, booking_status, authorised)
VALUES('$customer_title $customer_first_name $customer_last_name', '$billing_address', $account_number, '$customer_tel', '$customer_mobile', '$customer_email', '$passengers', '$cases', '$booking_notes', '$price', 'Danny Green', '$booking_date',
    '$booking_status', '$authorised'   )");

$booking_ref = mysql_insert_id();

mysql_query("INSERT INTO jobs(booking_ref, pickup_date, pickup_time, pickup_address, destination_address, scheduled)VALUES('$booking_ref', '$pickup_date', '$pickup_time', '$pickup_address', '$pickup_destination', 'N')");

if ($return_date != $null_date) {
mysql_query("INSERT INTO jobs(booking_ref, pickup_date, pickup_time, pickup_address, destination_address, return, scheduled)VALUES('$booking_ref', '$return_date', '$return_time', '$return_pickup', '$return_destination', 'Y' , 'N')");
 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:20:39.813

而不是“如果（$return_date！= $null_date）{”，使用：

```
if (strtotime($return_date) > 0) { 
```

我还希望“jobs”表中的“booking_ref”列没有与之关联的**唯一索引。**

# xml - opf:file-as 在 EPUB 3.0 中不允许？

> ID：14309986
> 
> 赞同：0
> 
> 时间：2013-01-14T00:41:33.530
> 
> 标签：xml, namespaces, epub, ibooks

我正在编写一本电子书，但似乎无法使该`file-as`属性起作用。

这是我的 opf 文件的样子（当然是缩小了）：

```
<package
  xmlns='http://www.idpf.org/2007/opf' version='3.0'
  xmlns:dc='http://purl.org/dc/elements/1.1/' unique-identifier='uuid'>

  <metadata
    xmlns:opf='http://www.idpf.org/2007/opf'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>

    …

    <dc:creator opf:file-as='Surname, Forename'>Forename Surname</dc:creator>

    …

  </metadata>

  …

</package> 
```

`opf`EPUB 3.0 中不允许使用属性还是我错误地指定了命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:35:16.547

你正在寻找类似的东西

```
<meta refines="#author" property="file-as">Author, John</meta> 
```

其中 'author' 是 dc:creator 元素的 ID。

# php - preg_match 和正则表达式根据部分字符串选择完整字符串

> ID：14309988
> 
> 赞同：-1
> 
> 时间：2013-01-14T00:41:35.523
> 
> 标签：php, regex, preg-match

我有一个包含此标记的 html。

```
<font class="count">Total count is: 20</font> 
```

我如何使用 preg_match 来获取总计数线，`20`在这种情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:44:24.230

这很简单：

```
$string = '<font class="count">Total count is: 20</font>';

preg_match('/Total count is:\s+(\d+)/', $string, $match);

echo $match[1]; // 20 
```

否则，如果您想`<font>`在其他 HTML 中查找标记以提取字体节点的文本部分，然后获取节点值末尾的数字，请使用 DOM 方法。

这是另一种娱乐方式：

```
$string = '<font class="count">Total count is: 20</font>';

$string = filter_var($string, FILTER_SANITIZE_NUMBER_INT);

echo $string; // 20 
```

还有一个：

```
$string = '<font class="count">Total count is: 20</font>';

$string = ltrim(strrchr(strip_tags($string), ' '));

echo $string; // 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:46:05.837

您可以使用

```
$foo = '<font class="count">Total count is: 20</font>';
preg_match('/<font class="count">Total count is: (\d+)</font>/', $foo, $matches);
echo $matches[1]; 
```

但最好使用 HTML 解析器来获取 html 元素的内容，然后对其应用正则表达式。

# cuda - 如何在 CUDA 上实现深度递归

> ID：14309997
> 
> 赞同：4
> 
> 时间：2013-01-14T00:42:42.177
> 
> 标签：cuda

在 CUDA（数千级）上实现深度递归的最有效方法是什么，如果递归是为了遍历树状数据结构，在哪里可以找到代码示例？

我刚刚使用 Cuda Dynamic Parallelism 在 K20 GPU 上实现了递归，但发现由于参数 cudaLimitDevRuntimeSyncDepth 有 24 个级别的限制

我想达到最大值。大数据的速度和扩展。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T01:11:15.803

根据我的经验，在 CUDA 中管理递归的最可靠和最有效的方法是手动管理递归堆栈并“扁平化”函数。例如，如果您正在遍历二叉树，它看起来像这样：

```
while (!stack.isEmpty()) {
  Node n = stack.pop();
  ... //do stuff with n
  if (!n.isLeaf()) {
    stack.push(n.left());
    stack.push(n.right());
  } 
} 
```

上述技术可以帮助任何代码（CUDA 或单线程 CPU）。堆栈功能必须由您实现，因为您不想使用 STL。

* * *

下一步 - 更具体到 CUDA - 将评估每个节点是否需要由单独的线程处理，或者是否可以将整个扭曲或块甚至整个网格分配给它。根据这一点，它`stack`应该位于本地、共享或全局内存空间中，并且其成员函数应该在相应的执行单元（线程/块/网格）中表现一致。

请注意，如果您希望`stack`在本地内存中使用每个线程，您将使用大量内存（10000 个线程 x 1000 最大深度递归），并且您可能会遇到很多线程分歧，从而降低您的性能。

另一方面 --- 每个块`stack`将需要更少的内存，但`__syncthreads()`将需要。

如果每个节点有足够的并行工作，我强烈建议对节点进行 per-warp 或 per-block 处理。

* * *

最后，如果您在共享内存中有堆栈，但您发现需要为每个 Warp 工作，您可以考虑使用原子操作 for `push`and`pop`并引入工作窃取技术来更好地平衡您的工作在 Warp 之间。如果您需要通过在全局内存中使用单个堆栈来进行每个节点的块处理，也可以进行工作窃取。

* * *

**编辑：** 如果您需要向上走树，在将其向下处理后，您可以稍后将向上的方向推入树中。

```
struct StackEntry {
    Node* node;
    bool goingUp;
};

while (!stack.isEmpty()) {
  StackEntry entry = stack.pop();
  ... //do stuff with entry.node
  if (!entry.goingUp && !entry.node->isLeaf()) {
    stack.push(StackEntry(entry.node->left(),false));
    stack.push(StackEntry(entry.node->right(),false));
    stack.push(StackEntry(entry.node,true));
  } 
} 
```

假设每个节点都有一个指向其父节点的指针（或者您可以在结构中引入这样的指针`StackEntry`），您可以将参数向上传递到树中。

但是请注意，这会在堆栈中的条目之间引入依赖关系。只要只有一个执行单元（线程/块/网格）从堆栈中推入/弹出，这很好。但是，如果一个堆栈由许多执行程序共享，使用前面讨论的工作窃取算法，它可能会破坏依赖关系。必须采取额外的措施来防止这种情况发生。

您可能想要重新组织确切`StackEntry`存储的内容以及将元素推入堆栈的时间。上述方法不是唯一的一种！