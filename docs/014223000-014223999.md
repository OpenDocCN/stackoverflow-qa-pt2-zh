# StackOverflow 问答 14223000-14223999

# iphone - iPhone 的 GHUnit 测试问题

> ID：14223005
> 
> 赞同：0
> 
> 时间：2013-01-08T19:57:31.390
> 
> 标签：iphone, unit-testing

我正在使用第三方框架 GHUnit 进行单元测试，创建的项目添加了 GHUnit 框架和其他需要的框架。我在那个导入库 GHUnit 和需要编写测试用例的类中创建了一个名为 TestCases 的类。

我需要为 40 个类编写测试用例。我是否需要在一个类中编写所有测试用例。

我需要为 testCase 创建每个类吗？如果是，那么当我尝试在单独的 testCase1,testCase2....testCase40 中创建新类时，它无法显示那些 testCases1 testCase2 ...testCase40

IT 向我显示了一个 tableview 和运行按钮，并且只有第一个 testCases 方法，它没有向我显示剩余的 testCases 类方法。在这种情况下请指教。我需要为此采取什么行动

@Advance 谢谢大家。，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T05:35:03.867

# nuget - NuGet不在项目中添加对dll的引用

> ID：14223012
> 
> 赞同：0
> 
> 时间：2013-01-08T19:58:09.517
> 
> 标签：nuget

我有一个包含大约 5 个项目的解决方案，包括一个 Silverlight 客户端。

通过 NuGet，我在解决方案级别添加 VS 11 的 Async Targeting Pack 并选择所有项目。

它在所有非 Silverlight 项目中添加了参考，但不是 SL 项目。解决方法是手动添加引用。

这是 NuGet 的失败吗？NuGet 包失败？还是我做错了什么？

Caliburn.Micro 和 SL 包也会发生同样的情况。

然而，如果我从一个全新的干净项目开始，一切都会按预期工作。

我尝试删除 .nuget 和包文件夹，并手动删除项目引用，这似乎清除了所有内容，但是在重新添加包时我仍然遇到上述问题。

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:32:54.633

您使用的是哪个版本的 Silverlight？我注意到[NuGet 包](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack)仅针对 NET40、NET45 和 SL5，因此如果您使用 Silverlight 4，则不会将引用添加到您的 SL4 项目中。

# apache-flex - Flex 应用程序未在 VPN 中加载

> ID：14223014
> 
> 赞同：-1
> 
> 时间：2013-01-08T19:58:15.160
> 
> 标签：apache-flex, loading, vpn

我的 Flex 应用程序没有加载到 VPN 网络中。

```
Error message: Connection Problems: Channel.Connect.Failed   
    error NetConnection.Call.Failed: HTTP:  
  Failed: url: ‘http://172.16.46.246/PASSUS/messagebroker/amf’   
    -[RPC Fault faultString=”Send failed” faultCode=”Client.Error.MessageSend”   
                faultDetail=”Channel.Connect.Failed   
  error NetConnection.Call.Failed: HTTP:  
    Failed: url: http://XX.XX.XX.XX/PASSUS/messagebroker/amf’”]* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:13:24.520

在 services-config.xml 中更改您的频道网址：

```
"/PASSUS/messagebroker/amf" 
```

不要使用 IP 地址。您可以在此处查看[迁移到生产服务器的详细信息](https://stackoverflow.com/questions/8022155/moving-to-production-server/14373832#14373832)

在这里[发送失败错误](http://blog.themidnightcoders.com/index.php/2011/07/26/flex-remoting-urls-and-understanding-the-send-failed-error/)

# machine-learning - 如何评估特征选择方法？

> ID：14223020
> 
> 赞同：2
> 
> 时间：2013-01-08T19:58:37.000
> 
> 标签：machine-learning, weka, feature-extraction, feature-selection

**你好，**

如何为给定的数据集（文本数据）选择最适合的特征选择方法？

例如，在 Weka 中，有几种属性选择方法（CfsSubsetEval、ChiSquaredAttributeEval、...等）和几种搜索方法（bestfirst、greedy、ranker ...等）。

**我的问题：**我怎么知道哪种属性选择方法和搜索方法最适合给定数据集？！

**我的猜测：**我应该在应用特征选择过滤器后使用交叉验证来测试数据集吗？例如，这意味着如果我有 10 种属性选择方法和 10 种搜索方法，我将需要执行 100 次交叉验证测试，然后选择准确度最高的配置！！！！！！！！！我在这里假设我只针对一个分类器进行测试。那么如果我有 2 个分类器（SMO 和 J48），我需要执行 200 次交叉验证测试吗？！

如果我误解了什么，请纠正我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T22:34:45.047

您可以尝试信息增益或主成分分析，以确定哪些特征为您的分类添加最多（信息增益）或具有最高方差（PCA）。

您也可以使用您提到的技术。但是无论您做什么，您都必须对其进行评估以查看它的效果，这可能会很痛苦或很有趣，具体取决于您的看法:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:47:31.527

有不同种类的特征选择，包括过滤器和包装器方法。过滤器方法是独立于分类器的技术，用于根据距离、相关性或互信息选择特征。我建议您检查[FEAST](http://www.cs.man.ac.uk/~gbrown/fstoolbox/)工具和[mRMR](http://penglab.janelia.org/proj/mRMR/)。

关于基于特定分类器性能的包装器模型，您无需枚举您拥有的所有搜索方法。您修复了一种搜索方法并应用您帖子中建议的比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T10:01:24.170

您应该在整个数据集上构建模型，然后执行特征选择 (FS)。如果您有多个模型，您可以通过参考 RMSE 或 MSE 来缩放特征重要性。如果您熟悉 R，请尝试使用 google 搜索“随机森林和特征选择”。

# javascript - MVC：使用视图的字符串变量作为 javascript 函数调用的参数

> ID：14223035
> 
> 赞同：0
> 
> 时间：2013-01-08T19:59:21.697
> 
> 标签：javascript, function, razor, parameters

如何在视图（cshtml）中调用 javascript 函数并传递一些字符串变量（在视图中定义）用作函数调用的参数？

假设函数 javascriptFunction 使用 2 个参数。我通常将其称为`javascriptFunction('param1', 'param2')`. 但现在我想传递一些变量。

```
string y = "this is a string"
string x = "another"
javascriptFunction(y, x) 
```

我试过 javascriptFunction(@y, @x), javascriptFunction('@y', '@x') 但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:09:51.240

您必须区分 javascript 代码和服务器端代码。还要编码你的 javascript 字符串：

```
@{
string y = "this is a string";
string x = "another";
}

<script type="text/javascript">
    function javascriptFunction(first,second)
    {
        alert(first+' '+second);
    }

    javascriptFunction(@Html.Raw(Json.Encode(y)), @Html.Raw(Json.Encode(x)));
</script> 
```

[在 JavaScript 中使用 Razor](https://stackoverflow.com/questions/4599169/using-razor-within-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:04:06.227

您可以使用此链接中的答案加载一些变量并将它们传递给您的函数。

[ASP.NET MVC 在 JavaScript 中使用 ViewData](https://stackoverflow.com/questions/5863094/asp-net-mvc-using-viewdata-in-javascript)

# android - Android 错误：WARN/Looper 忽略唤醒读取管道上的意外 epoll 事件 0x10

> ID：14223042
> 
> 赞同：4
> 
> 时间：2013-01-08T19:59:55.747
> 
> 标签：android, java-native-interface

我正在为使用本机库的 Android 开发游戏。在过去一周左右的时间里，我有时会在我的 logcat 中收到很多这样的警告：

01-08 13:46:20.390: WARN/Looper(6100): 忽略唤醒读取管道上的意外 epoll 事件 0x10。01-08 13:46:20.410: WARN/Looper(6100): 忽略唤醒读取管道上的意外 epoll 事件 0x10。01-08 13:46:20.410: WARN/Looper(6100): 忽略唤醒读取管道上的意外 epoll 事件 0x10。01-08 13:46:20.410: WARN/Looper(6100): 忽略唤醒读取管道上的意外 epoll 事件 0x10。

我经常使用从本机调用的 AsyncTask 在后台下载许多文件。我没有找到任何相关的东西。我应该在导致这种警告的代码中检查什么？谢谢你的帮助！

# jquery - 更新 JQuery Tablesorter 过滤器函数

> ID：14223044
> 
> 赞同：3
> 
> 时间：2013-01-08T20:00:02.363
> 
> 标签：jquery, jquery-plugins, tablesorter

我正在使用最新版本的 JQuery Tablesorter，并应用了 Filter 小部件。在两列中，我使用过滤器函数在过滤器中显示一个下拉列表，允许用户从所有可用值中进行选择。

```
 widgetOptions: {
            filter_functions: {
                3: true,
                4: true
            }
        } 
```

当页面加载并初始填充表格时，这些功能正常工作。为我的两列中的每一列创建一个下拉列表，它包含所有值。选择一个值会正确过滤该值。

但是，当页面运行时将新行动态添加到表中时，我的问题就出现了。添加包含新值的新行时，下拉菜单中的值不会刷新。触发“更新”、“更改”等似乎不起作用。

在运行时将新行添加到表中时，是否有办法动态更新此标准过滤器函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:31:33.823

嗯，这似乎是过滤器小部件的问题。我已经修复它并[更新了 tablesorter 存储库](http://mottie.github.com/tablesorter/docs/)（现在是 v2.7.2）

[这是一个演示](http://jsfiddle.net/Mottie/abkNM/187/)，显示它现在可以工作:)

感谢您报告此问题！

注意：我无法在没有任何代码的情况下提交此答案，因此您应该这样更新表格：

```
$('table')
    .find('tbody').append(newRow)
    .trigger('update'); 
```

# sql-server - 如何防止 SQL Server 2008 存储过程将换行符写入文件？

> ID：14223047
> 
> 赞同：0
> 
> 时间：2013-01-08T20:00:07.823
> 
> 标签：sql-server, sql-server-2008, stored-procedures

这是我们到目前为止所拥有的，它有效，但它会在文件中写出换行符。如果可能，我们希望不发送 CRLF 字符。

```
set @dosvar = @JobNumber
set @doscmd2 = 'ECHO' + @dosvar +' >> \\test1\websites\testcontrol\js\misc1.js'

Exec master..xp_cmdshell @doscmd2 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:02:39.877

你可以试试[这个技巧](http://www.devtrends.com/index.php/echo-without-carriage-return-or-line-feed-cr-lf/)：

```
'echo/|set /p="' + @dosvar +'" >> \\test1\websites\testcontrol\js\misc1.js' 
```

如果您运行此批处理文件：

```
@echo off
echo/|set /p="a"
echo/|set /p="b"
echo/|set /p="c" 
```

它打印：

```
abc 
```

所以它似乎工作。

# r - grep() 函数

> ID：14223057
> 
> 赞同：0
> 
> 时间：2013-01-08T20:00:38.863
> 
> 标签：r, regex, web-scraping

我做了一些网络抓取，并有一个字符串 my_html 和我想要的链接

我想要`grep()`并尝试过（my_html 的一个例子，它要长得多）

```
my_html <- 'stuff more stuff ...
<TD ><A CLASS=my_link HREF=\"https://www.stuff.com/secure-bin/my_club/myrep.cgi/tpw9109.cry?scrtpw9109.cry\">
other stuff
<p> www.google.com </p>
end'

my_pattern <- "<TD><A CLASS=my_link HREF=*>"
grep(my_pattern,x=my_html,value=TRUE) 
```

这让我

```
character(0) 
```

我认为问题与模式中的特殊字符有关，但我不知道补救措施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:09:48.110

```
> sub( '(^.+HREF=\\\")(.+)(\".+)', "\\2", my_html)
[1] "https://www.stuff.com/secure-bin/my_club/myrep.cgi/tpw9109.cry?scrtpw9109.cry" 
```

`HREF=\"`基本上在使用 2 个反斜杠表示单个反斜杠和`\"`表示双引号之前丢弃任何内容。然后包括下一个双引号之前的任何内容作为第二个匹配部分，以及从该标记到结尾的任何内容作为第三部分。所以它应该只返回中间匹配部分（如果存在的话）。

# python - hg verify 不返回 0 或 1

> ID：14223062
> 
> 赞同：1
> 
> 时间：2013-01-08T20:00:47.147
> 
> 标签：python, mercurial, popen

根据帮助

```
$ hg -v help verify
hg verify

verify the integrity of the repository

    Verify the integrity of the current repository.

    This will perform an extensive check of the repository's integrity,
    validating the hashes and checksums of each entry in the changelog,
    manifest, and tracked files, as well as the integrity of their crosslinks
    and indices.

    Returns 0 on success, 1 if errors are encountered. 
```

控制台输出

```
>>> from subprocess import Popen, PIPE
>>> p = Popen(['hg', 'verify', '-R', 'sample-master'], stdout=PIPE, stdin=PIPE)
>>> out, err = p.communicate()
>>> out
'checking changesets\nchecking manifests\ncrosschecking files in changesets and manifests\nchecking files\n2186 files, 214 changesets, 3055 total revisions\n'
>>> err
>>> """-q is quite suppress output"""
>>> p = Popen(['hg', 'verify', '-R', 'sample-master', '-q'], stdout=PIPE, stdin=PIPE)
>>> out, err = p.communicate()
>>> out
'' 
```

我现在破坏了`.hg/store`

```
>>> out, err = Popen(['hg', 'verify', '-R', 'sample-master', '-q'], stdout=PIPE, stdin=PIPE, stderr=PIPE).communicate()
>>> out, err
('', ' data/req.txt.i@119: missing revlog!\n 119: empty or missing req.txt\n req.txt@119: 8befed264a2f in manifests not found\n3 integrity errors encountered!\n(first damaged changeset appears to be 119)\n') 
```

我没有看到 0 或 1。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:01:55.133

您正在寻找[进程返回码](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode)：

```
p = Popen(['hg', 'verify', '-R', 'natrium-master', '-q'], stdout=PIPE, stdin=PIPE)
out, err = p.communicate()
print p.returncode 
```

该文档是指该过程的[存在状态](http://en.wikipedia.org/wiki/Exit_status)。

# exchange-server - 用于连接交换服务器、发现 DAG、创建邮箱数据库等的最佳开发技术......（最好在 C#..net 中）

> ID：14223064
> 
> 赞同：0
> 
> 时间：2013-01-08T20:00:48.793
> 
> 标签：exchange-server, exchangewebservices, exchange-server-2010

我是使用 Exchange 服务器进行开发的新手。我正在尝试以编程方式执行诸如连接交换服务器、发现和创建数据库可用性组 (DAG)、在 DAG 中发现和创建邮箱数据库等操作。

我看到很少有 PowerShell cmdlet 可以执行上述操作。我想知道用于上述事情的最佳开发技术是什么？我可以使用 EWS 管理 API 吗？

该技术应与 Exchange Server 2010 和 2013 兼容，最好与 .net 兼容（C# - 请注意我正在尝试管理远程交换服务器）

问候，

梦想家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:19:55.000

管理 Exchange 服务器的唯一选项是在 c# 中包装 Exchange 管理 shell cmdlet 并调用它们。

请参阅[http://social.msdn.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/155504b3-ffe3-4bdf-887a-1e61842a8697](http://social.msdn.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/155504b3-ffe3-4bdf-887a-1e61842a8697)了解更多详情。

谢谢你，梦想家

# ios - 使用两个 IPA 捆绑的 iOS 应用程序

> ID：14223071
> 
> 赞同：0
> 
> 时间：2013-01-08T20:01:08.573
> 
> 标签：ios, ios6

我正在探索从我的两个应用程序（app1.ipa 和 app2.ipa）中创建捆绑应用程序的可能性。是否可以创建一个 shell 应用程序（bundle.ipa），它会根据用户选择使用各自的 ipa（app1.ipa 或 app2.ipa）加载 app1 或 app2？或者我是否必须合并两个应用程序上的源代码和资产才能创建捆绑应用程序？基本上，是否可以在 ipa 中加载 ipa？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:05:22.880

不可以。创建具有多个二进制文件的应用程序是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:28:10.163

与其尝试拥有多个 .ipa（我很确定这是不可能的），不如创建一个类，应用程序可以通过该类自省该人是否已为该应用程序付费。因此，如果他们有，该功能是可用的，如果没有......它不可用。

使用 Facebook 的 SDK 集成作为其工作原理的参考：在应用程序可以从用户的 Facebook 检索项目之前，应用程序必须确保用户已使用 Facebook 登录。

我希望我知道一个更精确的例子，但老实说，这应该给你所有的要点。

# javascript - 为自动计算的数字设置小数位以使用 Javascript 显示

> ID：14223073
> 
> 赞同：1
> 
> 时间：2013-01-08T20:01:14.503
> 
> 标签：javascript

脚本

```
<script type="text/javascript">
    function updatesum() {
    document.add_new_report.total.value = (document.add_new_report.cheque.value -0) + (document.add_new_report.cash.value -0);
    }
    </script> 
```

输入字段

```
<input type="text" name="cheque" id="cheque" onChange="updatesum()" />
<br>
<input type="text" name="cash" id="cash" onChange="updatesum()" /> 
```

结果字段

```
<input type="text" id="total" readonly="readonly" name="total"  /> 
```

如果我输入**100.100**支票和**200**现金，总显示为**300.1**但我想显示**300.100** 怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:04:32.337

试试这个：

```
document.add_new_report.total.value = ((document.add_new_report.cheque.value -0) + (document.add_new_report.cash.value -0)).toFixed(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:24:42.330

您需要使用`.toFixed()`方法

[参考](http://www.mredkj.com/javascript/nfbasic2.html)

> ```
> function updatesum() {
> document.add_new_report.total.value = 
>   (
>     (document.add_new_report.cheque.value -0) 
>     + (document.add_new_report.cash.value -0)
>     ).toFixed(3);
> } 
> ```

[小提琴示例](http://tinkerbin.com/PXOKVY6i)

# c# - 不要在目录列表视图中显示隐藏文件

> ID：14223076
> 
> 赞同：0
> 
> 时间：2013-01-08T20:01:29.617
> 
> 标签：c#, winforms, listview

我有生成我计算机的 listview 目录的代码。当我打开 C 目录时，它显示 $RECYCLE.Bin。反正有没有它不显示这些文件的地方？

```
foreach (string dir in folders)
{
    dirData[0] = dir.ToString();
    dirData[1] = dir.Length.ToString();
    dirData[2] = File.GetLastAccessTime(dir).ToString();
    ListViewItem lv = new ListViewItem(dirData, imageList1.Images.Count - 1);
    lv.Tag = dir;

    imageList1.Images.Add(BlackFox.Win32.Icons.IconFromExtensionShell(".*", BlackFox.Win32.Icons.SystemIconSize.Small).ToBitmap());

    listView1.SmallImageList = imageList1;
    listView1.Items.Add(lv);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:11:36.917

```
var dirs = Directory.GetDirectories(@"C:\")
             .Select(d => new { Attr = new DirectoryInfo(d).Attributes, Dir = d })
             .Where(x => !x.Attr.HasFlag(FileAttributes.System))
             .Where(x => !x.Attr.HasFlag(FileAttributes.Hidden))
             .Select(x => x.Dir)
             .ToList(); 
```

这不仅会忽略`System+Hidden`目录，`C:\$Recycle.Bin`而且还会忽略病毒扫描程序使用的`C:\$AVG8.VAULT$`非目录。`System`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:12:38.857

对列表视图项目运行迭代并删除它们扩展为 .bin 的项目。

您可以使用这段代码（化名）找到 .bin：

```
for(int i=0;i<items_count;i++)
{
  if(listview1.items[i].Substring(listview1.items[i].length-3,listview1.items[i].length)=="bin")
   listview1.items.remove(i);
} 
```

另一个化名：如果你想概括这一点，你应该使用这样的文件属性类作为列表视图项：

```
string filePath = listview1.items[i];

// get file attributes
System.IO.FileAttributes fileAttributes = System.IO.File.GetAttributes(filePath); 
```

现在您应该检查 fileAttributes 是否隐藏，删除相应的项目。

注意：下一次，请发送一些您的代码行，这更好地解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:25:20.367

像这样的东西应该工作

```
var folders = Directory.GetDirectories(@"C:\")
.Where(d => !new DirectoryInfo(d).Attributes.HasFlag(FileAttributes.System | FileAttributes.Hidden));

foreach (string dir in folders)
{
   ..... 
```

让我扩展答案，因为有些人可能会觉得难以理解，这将忽略`SystemHidden`目录。

IE：

`"C:\\$Recycle.Bin"`

`"C:\\Documents and Settings"`

`"C:\\System Volume Information"`

如果您想忽略所有隐藏目录，您可以简单地`FileAttributes.System`从 linq 语句中省略该属性，但这会导致丢失目录，例如我不确定您想要`ProgramData` 的目录。`ListView`

# asp.net - ASP.NET catch{} 部分触发没有任何异常

> ID：14223078
> 
> 赞同：1
> 
> 时间：2013-01-08T20:01:43.557
> 
> 标签：asp.net, try-catch

我有一个小问题。在这段代码中，总是有 catch{} 部分触发。即使抛出任何异常。我检查了调试器，没有例外是抛出，但不知何故来自 catch{} 的代码正在触发，它将我转移到 google.com。如果我从 catch{} 注释代码，Page 运行良好。有人知道这是为什么吗？这让我很生气。谢谢

```
protected void Button5_Click(object sender, EventArgs e)
    {
        if (Page.IsValid == true)
        {
            try
            {
                conn = new MySqlConnection("Server=localhost;Port=3306;Database=ewidencja;Uid=webuser;Pwd=web1;");
                conn.Open();
                MySqlDataAdapter mda = new MySqlDataAdapter();
                mda.SelectCommand = new MySqlCommand("select id from pacjenci where pesel='" + Session["pesel"].ToString() + "';", conn);
                int id_pacjenta = (int)mda.SelectCommand.ExecuteScalar();
                int id_lekarza=Int32.Parse(DropDownList1.SelectedValue);
                mda.InsertCommand = new MySqlCommand("insert into planowane_wizyty (id_pacjenta, id_lekarza, data_wizyty) values(" + id_pacjenta + ", " + id_lekarza + ", '" + Calendar1.SelectedDate.ToString().Substring(0,10)+" "+ ListBox1.SelectedItem.Value + "');", conn);
                if (mda.InsertCommand.ExecuteNonQuery() == 1)
                    Response.Redirect("wizyty.aspx");
                else
                    Response.Redirect("info.aspx");
            }
            catch (Exception ex)
            {
                Response.Redirect("http://www.google.com");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:10:41.610

`Response.Redirect`可以扔一个`ThreadAbortException`。然后这会命中外部异常处理程序，触发第二个`Response.Redirect`.

请参阅[为什么 Response.Redirect 会导致 System.Threading.ThreadAbortException？](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)

更重要的是，这是数据访问代码不应与 UI 行为如此紧密混合的原因之一。调试这样的代码很困难，单元测试几乎是不可能的，并且可重用性很低。

看起来您的查询是通过字符串连接构造的，这很容易受到 SQL 注入的影响。改为参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:06:52.997

您正在使用的 Response.Redirect 的重载将始终尝试停止当前线程。这会导致您看到的异常。`System.Threading.ThreadAbortException`

有一个重载可用：`Response.Redirect(string url, bool endResponse)`允许您使用`endResponse`参数控制是否结束当前线程。

话虽如此，您可以捕获此特定错误并忽略它。下面的建议只是您可以实施的几个解决方案之一。这完全取决于你想要做什么。

```
protected void Button5_Click(object sender, EventArgs e)
    {
        if (Page.IsValid == true)
        {
            try
            {
                conn = new MySqlConnection("Server=localhost;Port=3306;Database=ewidencja;Uid=webuser;Pwd=web1;");
                conn.Open();
                MySqlDataAdapter mda = new MySqlDataAdapter();
                mda.SelectCommand = new MySqlCommand("select id from pacjenci where pesel='" + Session["pesel"].ToString() + "';", conn);
                int id_pacjenta = (int)mda.SelectCommand.ExecuteScalar();
                int id_lekarza=Int32.Parse(DropDownList1.SelectedValue);
                mda.InsertCommand = new MySqlCommand("insert into planowane_wizyty (id_pacjenta, id_lekarza, data_wizyty) values(" + id_pacjenta + ", " + id_lekarza + ", '" + Calendar1.SelectedDate.ToString().Substring(0,10)+" "+ ListBox1.SelectedItem.Value + "');", conn);
                if (mda.InsertCommand.ExecuteNonQuery() == 1)
                    Response.Redirect("wizyty.aspx");
                else
                    Response.Redirect("info.aspx");
            }
            catch (System.Threading.ThreadAbortException)
            {
                //do nothing. This is an expected error stemming from Response.Redirect
            }
            catch (Exception ex)
            {
                Response.Redirect("http://www.google.com");
            }
        }
    } 
```

# xslt - 选择具有特定后代的节点

> ID：14223079
> 
> 赞同：2
> 
> 时间：2013-01-08T20:01:46.143
> 
> 标签：xslt, xpath

我有一个包含多个 div 的 xhtml 页面。这：

```
 <xsl:template match="div[@class = 'toc']"> 
```

选择我感兴趣的 div（它们都包含无序列表 - ul）。现在我只想选择那些包含两级 ul 元素的 div。

一般来说：如何选择具有特定类型子节点的节点？

我试过这样的事情：

```
<xsl:apply-templates select="body/div[@class = 'toc']/ul/li/ul" />

                   ...

<xsl:template match="div[@class = 'toc']/ul/li/ul">    
  <xsl:apply-templates mode="final_template" select="../../.."/> 
</xsl:template>

<xsl:template name="final_template" match="div">
        ...
</xsl:template> 
```

但它不起作用。更重要的是，我相信必须有比我更清洁的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:06:19.387

通常，要选择具有某些子节点的节点：

```
NodeToSelect[childName] 
```

要选择具有某些后代的节点：

```
NodeToSelect[.//descendantName] 
```

请根据您的情况尝试此路径：

```
div[@class = 'toc'][.//ul//ul] 
```

对于 XSLT，这可能是一个不错的方法：

```
<xsl:apply-templates select="body/div[@class = 'toc'][.//ul//ul]" mode="twoUlDescendants" />

                   ...

<xsl:template match="div" mode="twoUlDescendants">    
   <!-- Work with div here. -->
</xsl:template> 
```

您可以将模式“twoUlDescendants”的名称更改为更准确地描述这些特定 div 的用途的名称。

# jquery-mobile - JQM 问题淘汰赛

> ID：14223081
> 
> 赞同：0
> 
> 时间：2013-01-08T20:01:59.607
> 
> 标签：jquery-mobile, knockout.js

我正在尝试使用 JQM 和 Knockout 构建一个可移动的 Web 应用程序。在我的 Knockout 脚本运行后，我试图在其中获得一些风格。

```
<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
        //Some Code
</form>
<form action="" data-bind="template: { 'if': startVM, data: startVM }">
   //Some Code
</form> 
```

这或多或少是我的淘汰赛脚本

```
var masterViewModel = {
    loginVM: ko.observable(),
    startVM: ko.observable(),
    projektUnterbrechen: ko.observable(),
    logout: ko.observable(),
    projectStartVM: ko.observable()

};
 var LoginVM = function () {
        var self = this;
        self.showDetails = function () {
            if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
                masterViewModel.loginVM(null);
                masterViewModel.startVM(new StartVM());

            }
    };

    var StartVM = function () {
     //Some Code
    }; 
```

现在添加后

```
<script src="../../Scripts/jquery.mobile-1.2.0.js" type="text/javascript"></script> 
```

对于我的项目，我的淘汰赛不再起作用了。好像我的 masterViewModel 没有更新！例如我试过这个：

```
var LoginVM = function () {
        var self = this;
        self.showDetails = function () {
            if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
                masterViewModel.loginVM(null);
                masterViewModel.startVM(new StartVM());
                alert(masterViewModel.startVM()==null) //Messagebox displays "false"    
            }
    };
var StartVM = function () {
 alert(masterViewModel.startVM()==null) //Messagebox displays "true" 
}; 
```

这个starnge问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:56:55.597

一旦初始化，JQM 将改变 DOM，使许多默认的 ko 绑定变得无用。可以编写自定义绑定来解决这些问题。很难说这里的实际问题是什么，但这应该给你一些阅读的东西。

这是一篇有用的文章：[http ://www.scottlogic.co.uk/blog/colin/2012/10/integrating-knockout-and-jquerymobile/](http://www.scottlogic.co.uk/blog/colin/2012/10/integrating-knockout-and-jquerymobile/)

# php - 如何根据一组键有效地提取子数组

> ID：14223083
> 
> 赞同：1
> 
> 时间：2013-01-08T20:02:01.567
> 
> 标签：php, arrays

我有一个数组数组 $data。

和

```
print_r($data); 
```

返回

```
大批 （
[1401] => 数组（[0] => 94 [1] => 2 [2] => 159）
[1402] => 数组（[0] => 94 [1] => 2 [2] => 50 [3] => 23 [4] => 159）
[1403] => 数组（[0] => 94 [1] => 2 [2] => 50）
[1404] => 数组（[0] => 94 [1] => 90 [2] => 50 [3] => 23）
[1405] => 数组（[0] => 94 [1] => 90）
[1406] => 数组（[0] => 94 [1] => 90 [2] => 23）
[1407] => 数组（[0] => 94 [1] => 90 [2] => 50）
)
```

键是一组数字。我需要从这个数组中提取一个子数组，它只有存储在另一个变量中的键。

```
$toextract=array(1402,1406); 
```

除了用循环一个一个地构建新数组之外，还有一种更简单的方法。我将需要多次运行此命令，因此快速非常重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:04:43.630

```
 $result = array_intersect_key($data, array_flip(array(1402, 1406)); 
```

[`array_intersect_key()`](http://php.net/array-intersect-key)

# ruby-on-rails - 如何为 Rails 应用程序提供 A 名称/子域重定向？

> ID：14223084
> 
> 赞同：0
> 
> 时间：2013-01-08T20:02:02.287
> 
> 标签：ruby-on-rails, dns, subdomain

我有一个带有[http://mydomain.com/hello](http://mydomain.com/hello)页面的 Rails 应用程序。

我还希望将其镜像到[http://a.usersdomain.com](http://a.usersdomain.com)，以便此 URL 显示相同的应用程序、数据库等。

我想象的将类似于 Tumblr 允许您在 title.tumblr.com 和 usersdomain.com 上托管博客的方式。这可以通过rails应用程序实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:36:20.760

您可以很容易地允许用户在您的域上设置子域。只需使用您的 DNS 提供商设置一个通配符子域，您就可以让 rails 应用程序完成其余的工作。

所以`anything.myurl.com`会去你的rails应用程序。然后，您可以有一种方法来获取子域并识别用户/站点或其他任何内容。

正如 Jason 在他的回答中提到的那样，可以将拥有自己域的用户重定向到给定的子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:32:06.387

您可以在域的 DNS 管理中心上使用 A 条目。您可以将子域指向`a`托管您的 rails 应用程序的服务器的 IP 地址。如果您没有静态 IP 地址（如默认情况下的 Heroku），您可以使用 CNAME 条目并将子域指向`a`Heroku 设置的“域”区域中列出的项目，或直接指向当前 URL，如 tumblr。例如在 Heroku 上：

子域：`a`=>`myapp.herokuapp.com`

或 tumblr/其他托管网址

您域`a`上的子域 =>`title.tumblr.com`

或您的示例：

=>`a`上的子域`usersdomain.com``mydomain.com`

希望这可以帮助！

# powershell - 使用 Powershell/curl 检查 http 标头的问题

> ID：14223087
> 
> 赞同：2
> 
> 时间：2013-01-08T20:02:09.500
> 
> 标签：powershell, curl, command-prompt

事实证明，这比我想象的要困难得多（而且可能比它应该的要难）。

我试过 Cygwin+curl，但它无法运行（Cygwin 永远找不到 curl.exe，但我确实做了一个包检查，它就在那里）。

我已经使用命令提示符为 Windows 尝试了 curl，它可以工作。但是我有很多 url 来检查和单独执行它们只是没有时间效率。[我不知道如何通过 cmd 提示符告诉 curl 使用此处](http://www.christopheryee.org/bulk-url-checker-curl/)提到的文件（因为没有“xargs”）。

我也尝试过使用 PowerShell，但这也是有问题的。[当我在这里](http://scriptolog.blogspot.com/2007/08/query-http-status-codes-and-headers.html)尝试遵循选项 1时

尝试运行时出现错误`$xHTTP.open("GET",$url,$false)`：

> 使用“3”参数调用“open”的异常：“未指定的错误（来自 HRESULT 的异常：0x80004005 (E_FAIL)）”

同样使用 PowerShell，我完全不知道如何让它使用包含 url 的文件。我对 PS 的了解非常有限（如不存在）。

这里最好弄清楚如何让命令提示符/curl 使用文件，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:23:06.140

使用 PowerShell V3 有一种更直接的方法：

```
PS> Get-Content .\urls.txt
http://www.cnn.com
http://www.msn.com

PS> Get-Content urls.txt | Foreach { Invoke-WebRequest -Uri $_ -Method HEAD }

StatusCode        : 200
StatusDescription : OK
Content           :
RawContent        : HTTP/1.1 200 OK
                    Vary: Accept-Encoding
                    Connection: Keep-Alive
                    Cache-Control: max-age=60, private
                    Content-Type: text/html
                    Date: Tue, 08 Jan 2013 20:21:46 GMT
                    Expires: Tue, 08 Jan 2013 20:22:46 GMT...
Forms             : {}
Headers           : {[Vary, Accept-Encoding], [Connection, Keep-Alive], [Cache-Control, max-age=60, private],
                    [Content-Type, text/html]...}
... 
```

要处理 404，请使用 try/catch，例如：

```
PS> Get-Content urls.txt | 
        Foreach {try {Invoke-WebRequest -Uri $_ -Method HEAD} catch { "Oops - $_"}} 
```

要重定向到文件，这对我有用：

```
PS> Get-Content urls.txt | 
        Foreach {try {Invoke-WebRequest -Uri $_ -Method HEAD} catch { "Oops - $_"}} > 
        $home\Desktop\foo.txt 
```

# matlab - 在matlab中包括4个图像作为不同的面板

> ID：14223088
> 
> 赞同：1
> 
> 时间：2013-01-08T20:02:12.707
> 
> 标签：matlab

我正在尝试将 4 个已经存在的图像包含在一个新图像中，在 matlab 中完成和创建，就像一张拼贴画一样，在新图像中，4 个图像彼此相邻，接壤。我真的不知道从哪里开始。你能帮帮我吗？在matlab中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:32:28.690

如果您不希望图像之间有空白，另一种选择是将图像组合成一个矩阵。

IE：

```
image([I1 I2; I3 I4]) 
```

当然，图像必须具有相同的大小才能正常工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:33:36.613

实际上，除了 Hassan 的建议之外，我还可以使用 subplot 和 subimages 轻松实现我的目的。例如。

```
 subplot(2,2,1)
    imshow(I1)
    subplot(2,2,2)
    imshow(I2) 
```

谢谢你的帮助 ：）。

# cakephp - CakePHP 按相关性搜索

> ID：14223089
> 
> 赞同：1
> 
> 时间：2013-01-08T20:02:22.650
> 
> 标签：cakephp, sorting, search, cakephp-2.1, relevance

我正在开发一个招聘网站，我想通过相关性搜索招聘广告，例如，我有职位名称、job_text 等字段。现在假设一个人搜索 cakephp，我想先得到 cakephp 的结果，然后他们说 php 也匹配，但 cakephp 显然是最相关的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:57:12.940

我的建议是您应该为排序目的运行多个查询。

例如，首先您使用 找到 title 为 php 的职位`order by title desc`，然后运行查询以查找职位关键字中出现“php”的职位，最后您可以运行查询以查找其中 description 包含单词“php”的职位它。

然后，您可以组合这些查询的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T14:45:38.953

我发现在那个阶段做我想做的最好的方法是与 apache solr 或一些类似的搜索引擎集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:04:47.407

如果您想按相关性进行排序，*则*必须提出一些标准来为您定义相关性并进行计算。例如，如果某篇文章获得更多浏览量，它*可能*比另一篇文章更相关，因为它被更多人看到。将该数字与其他一些变量（平均评分，例如，如果有评分功能）结合起来，根据它们计算相关性值，将其存储在您的表中并按相关性值字段排序。每次用于计算的变量之一发生更改时更新它，或者每天通过 cron 作业执行一次，这完全取决于您的要求和性能。

# asp.net-mvc-3 - 在 MVC3 必填字段中点击非字符键会触发验证？

> ID：14223098
> 
> 赞同：0
> 
> 时间：2013-01-08T20:03:24.897
> 
> 标签：asp.net-mvc-3, validation, model, asp.net-mvc-validation

我注意到在登录视图中，当用户输入他们的电子邮件地址并快速切换到密码字段时，MVC3 所需的属性验证会触发。我拥有的代码非常大，但我已经能够用一个非常简单的页面来重现它。它类似于以下内容：

我有一个非常基本的视图，附有模型。该模型有 2 个属性，这两个属性都具有 [Required] 属性。如果您聚焦一个，并按下任何不输入任何字符的键（例如，Shift、Esc 等），所需的验证就会触发，并且我会收到错误消息，指出该字段是必需的，即使我没有输入什么都没有。

有谁知道如何防止这种早期验证被触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:57:55.030

所以我所做的是我使用以下代码禁用了这些输入字段的 keyup 事件：

```
<script type="text/javascript">
    $(document).ready( function() {
        $("input[data-val-required]").keyup(function () {
            return false;
        });
    });
</script> 
```

这允许客户端验证仅在用户点击提交按钮时关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:21:17.340

同意 gdordon - 禁用/修复任何 jquery 验证。此外，您可以通过禁用 Unobtrusive Validation（在 web.config 中）来禁用此行为 - 这通常启用并使用 jquery 进行客户端验证。

# c# - 在不使用 System.Windows.Forms.Form 类的情况下创建一个窗口？

> ID：14223100
> 
> 赞同：1
> 
> 时间：2013-01-08T20:03:39.973
> 
> 标签：c#, windows, forms, system

**在不使用 System.Windows.Forms.Form 类的情况下创建一个窗口？**

继续我之前的一个问题，我将如何实现这一目标？我会在屏幕上画画吗？难吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:05:17.643

您避免使用您提到的 Windows 窗体类，而只使用[System.Windows.Window](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)（这是 WPF 窗口）创建一个没有 Windows 窗体类的窗口 - 但我怀疑这不是您想要的答案......

窗口创建通常使用 Windows API 完成 - Windows 窗体（和 WPF 的主窗口）包装[Windows API 调用](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468925%28v=vs.85%29.aspx)以创建窗口（即：[CreateWindowEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)）。当然，如果您愿意，您可以自己 P/Invoke 这些调用，但实际上没有理由这样做。

# ruby-on-rails - 在 Heroku 上运行 Catarse

> ID：14223109
> 
> 赞同：0
> 
> 时间：2013-01-08T20:04:07.470
> 
> 标签：ruby-on-rails, heroku

我刚刚将我的 Catarse 应用程序部署到 Heroku，需要有关错误日志的帮助。该应用程序将不会加载。我已经运行了迁移并设置了所有必要的插件。这是我的日志输出 这个应用程序在本地运行得很好，在我推送到 Heroku 之前我没有遇到任何问题。

```
2013-01-08T19:54:21+00:00 heroku[web.1]: State changed from starting to up
2013-01-08T19:55:20+00:00 app[web.1]: Dalli/SASL authenticating as app10788718%40heroku.com
2013-01-08T19:55:20+00:00 app[web.1]:
2013-01-08T19:55:20+00:00 app[web.1]:
2013-01-08T19:55:20+00:00 app[web.1]: Dalli/SASL: Authenticated
2013-01-08T19:55:20+00:00 app[web.1]: Started GET "/en" for 66.37.82.222 at 2013-01-08 19:55:20 +0000
2013-01-08T19:55:24+00:00 app[web.1]:
2013-01-08T19:55:24+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: compass/reset.
2013-01-08T19:55:24+00:00 app[web.1]: Load path: Sass::Rails::Importer(/app/app/assets/stylesheets/application.css.sass)
2013-01-08T19:55:24+00:00 app[web.1]:   (in /app/app/assets/stylesheets/a
pplication.css.sass)):
2013-01-08T19:55:24+00:00 app[web.1]: ** [Airbrake] Failure: Net::HTTPClientError
2013-01-08T19:55:24+00:00 app[web.1]: ** [Airbrake] Environment Info: [Ruby: 1.9.2] [Rails: 3.2.7] [Env: production]
2013-01-08T19:55:24+00:00 app[web.1]: Your account is being provisioned or no longer active.
2013-01-08T19:55:24+00:00 app[web.1]: ** [Airbrake] Response from Airbrake:
2013-01-08T19:55:24+00:00 app[web.1]:
2013-01-08T19:55:24+00:00 app[web.1]:   app/views/layouts/application.html.slim:25:in `_app_views_layouts_application_html_slim___1907562053076719698_60592900'
2013-01-08T19:55:24+00:00 app[web.1]:
2013-01-08T19:55:24+00:00 app[web.1]:     26:     /[if lt IE 9]
2013-01-08T19:55:24+00:00 app[web.1]:
2013-01-08T19:55:24+00:00 app[web.1]: Completed 500 Internal Server Error in 1030ms
2013-01-08T19:55:24+00:00 app[web.1]: Processing by ProjectsController#index as HTML
2013-01-08T19:55:24+00:00 app[web.1]:   Parameters: {"locale"=>"en"}
2013-01-08T19:55:24+00:00 app[web.1]:     22:       meta property="fb:app_id" content=Configuration['site.facebook_app_id']
2013-01-08T19:55:24+00:00 app[web.1]:     23:       meta property="og:description" content==(t('projects.index_header.title') + '. ' +  t('projects.index_header.subtitle'))
2013-01-08T19:55:24+00:00 app[web.1]:     27:       = javascript_include_tag "http://html5shiv.googlecode.com/svn/trunk/html5.js"
2013-01-08T19:55:24+00:00 app[web.1]:     24:
2013-01-08T19:55:24+00:00 app[web.1]:     25:     = stylesheet_link_tag 'application', :media => 'screen, projection'
2013-01-08T19:55:24+00:00 app[web.1]:   app/assets/stylesheets/application.css.sass:1
2013-01-08T19:55:24+00:00 app[web.1]:     28:     = yield :js_templates
2013-01-08T19:55:24+00:00 app[web.1]:   Rendered projects/_recommended_header.html.slim (77.0ms)
2013-01-08T19:55:24+00:00 app[web.1]:   Rendered projects/index.html.slim within layouts/application (291.9ms)
2013-01-08T19:55:27+00:00 app[web.1]:
2013-01-08T19:55:27+00:00 app[web.1]:
2013-01-08T19:55:27+00:00 app[web.1]:
2013-01-08T19:55:27+00:00 app[web.1]:
2013-01-08T19:55:27+00:00 app[web.1]: Started GET "/" for 66.37.82.222 at 2013-01-08 19:55:27 +0000
2013-01-08T19:55:27+00:00 app[web.1]: Processing by ProjectsController#index as HTML
2013-01-08T19:55:27+00:00 app[web.1]: Redirected to http://catarse-lake.herokuapp.com/en
2013-01-08T19:55:27+00:00 app[web.1]: Filter chain halted as :detect_locale rendered or redirected
2013-01-08T19:55:27+00:00 app[web.1]: Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
2013-01-08T19:55:28+00:00 heroku[router]: at=info method=GET path=/en host=catarse-lake.herokuapp.com fwd=66.37.82.222 dyno=web.1 queue=0 wait=0ms connect=2ms service=193ms status=500 bytes=728
2013-01-08T19:55:27+00:00 app[web.1]: Started GET "/en" for 66.37.82.222 at 2013-01-08 19:55:27 +0000
2013-01-08T19:55:28+00:00 app[web.1]:   Rendered projects/_recommended_header.html.slim (1.8ms)
2013-01-08T19:55:28+00:00 app[web.1]: ** [Airbrake] Failure: Net::HTTPClientError
2013-01-08T19:55:28+00:00 app[web.1]: ** [Airbrake] Environment Info: [Ruby: 1.9.2] [Rails: 3.2.7] [Env: production]
2013-01-08T19:55:28+00:00 app[web.1]: ** [Airbrake] Response from Airbrake:
2013-01-08T19:55:28+00:00 app[web.1]: Your account is being provisioned or no longer active.
2013-01-08T19:55:28+00:00 app[web.1]:
2013-01-08T19:55:28+00:00 app[web.1]:   Parameters: {"locale"=>"en"}
2013-01-08T19:55:28+00:00 app[web.1]:   Rendered projects/index.html.slim within layouts/application (11.8ms)
2013-01-08T19:55:28+00:00 app[web.1]:
2013-01-08T19:55:28+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: compass/reset.
2013-01-08T19:55:28+00:00 app[web.1]: Load path: Sass::Rails::Importer(/app/app/assets/stylesheets/application.css.sass)
2013-01-08T19:55:28+00:00 app[web.1]:   (in /app/app/assets/stylesheets/application.css.sass)):
2013-01-08T19:55:28+00:00 app[web.1]:     22:       meta property="fb:app_id" content=Configuration['site.facebook_app_id']
2013-01-08T19:55:28+00:00 app[web.1]:     23:       meta property="og:description" content==(t('projects.index_header.title') + '. ' +  t('projects.index_header.subtitle'))
2013-01-08T19:55:28+00:00 app[web.1]:     24:
2013-01-08T19:55:28+00:00 app[web.1]:     25:     = stylesheet_link_tag 'application', :media => 'screen, projection'
2013-01-08T19:55:28+00:00 app[web.1]:     26:     /[if lt IE 9]
2013-01-08T19:55:28+00:00 app[web.1]:     27:       = javascript_include_tag "http://html5shiv.googlecode.com/svn/trunk/html5.js"
2013-01-08T19:55:28+00:00 app[web.1]:     28:     = yield :js_templates
2013-01-08T19:55:28+00:00 app[web.1]:   app/assets/stylesheets/application.css.sass:1
2013-01-08T19:55:28+00:00 app[web.1]:   app/views/layouts/application.html.slim:25:in `_app_views_layouts_application_html_slim___1907562053076719698_60592900'
2013-01-08T19:55:28+00:00 app[web.1]:
2013-01-08T19:55:28+00:00 app[web.1]:
2013-01-08T19:55:28+00:00 app[web.1]: Completed 500 Internal Server Error in 51ms
2013-01-08T19:55:28+00:00 app[web.1]: Processing by ProjectsController#index as HTML
2013-01-08T19:55:27+00:00 heroku[router]: at=info method=GET path=/ host=catarse-lake.herokuapp.com fwd=66.37.82.222 dyno=web.1 queue=0 wait=0ms connect=1ms service=10ms status=302 bytes=102
2013-01-08T19:55:24+00:00 heroku[router]: at=info method=GET path=/en host=catarse-lake.herokuapp.com fwd=66.37.82.222 dyno=web.1 queue=0 wait=2ms connect=2ms service=4406ms status=500 bytes=728 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:40:46.173

所以这里的问题是在production.rb

这一行 config.action_mailer.default_url_options = {host: ::Configuration[:host] }

正在引发未初始化的常量配置并阻止资产编译器运行。

所以我删除了这条线，一切都很好。欢迎评论为什么以及如何修复

# objective-c - 离线游戏中心 iOS 成就

> ID：14223114
> 
> 赞同：9
> 
> 时间：2013-01-08T20:04:24.773
> 
> 标签：objective-c, ios, game-center, achievements

试图找出在离线模式（例如打开飞行模式）的情况下使用 Game Center 中的成就的最佳方式。

据我了解，iOS 5+ 中的 Game Center 负责离线提交的成就和分数。它就像一个代理缓存，并在用户下次在线时将它们提交到在线游戏中心。考虑到这一点，我就是这样做的：

在**用户身份验证**成功时，我加载成就并将它们存储在字典中。

```
[GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *gcAchievments, NSError *error)
{
    if (error) { ..skipped ..}
    //This dictionary will store current achievments, so that we didn't submit them
    //once more and didn't show notification.
    achievments = [[NSMutableDictionary alloc] initWithCapacity:gcAchievments.count];

    //Storing achievments in dictionary
    for(GKAchievement *a in gcAchievments)
        [achievments setObject:a forKey:a.identifier];       
}]; 
```

稍后当我**提交新成就**时，我会在字典中检查成就，如果成就已经完成，则不提交。如果我提交成就，我还将它添加到`achievments`字典（内存中）以立即反映该成就已经提交。

```
GKAchievement *cachedAchievment = [achievments objectForKey:identifier];
if (cachedAchievment && cachedAchievment.percentComplete >= 100)
{
    //Already unlocked this achievment.
    return;
}

GKAchievement *achievement = [[GKAchievement alloc] initWithIdentifier: identifier];
if (achievement)
{
    achievement.percentComplete = percent;
    [achievement reportAchievementWithCompletionHandler:^(NSError *error)
     {
         if (!error)
         {
             //Flagging achievment as completed locally to avoid achieving it second time and showing notification.
             [achievments setObject:achievement forKey:achievement.identifier];

             //Now shoing notification banner.
             GKAchievementDescription * desc = [achievmentsDescriptions objectForKey:achievement.identifier];
             [[GKAchievementHandler defaultHandler] notifyAchievement:desc];
         }
         else
         {
             NSLog(@"Error in reporting achievements: %@", error);
         }
     }];
} 
```

这种方法允许我在游戏代码中触发提交，而无需担心我会提交两次成就或显示两次通知横幅。

当 Game Center 在线时，Everyting 工作正常。但如果我离线，我有两个问题。

1.  加载代码返回错误并且初始字典中`achievments`没有填充已经完成的成就，这意味着每次用户启动游戏时，他/她都会再次收到每个成就的通知横幅，即使它已经被授予。然后将其放入字典后不会显示，但我不想在每次游戏开始时都显示一次成就。

2.  我不确定当用户上线时离线提交的成就是否会到达游戏中心。我可以使用持久存储（如数据库）在游戏启动之间存储成就状态来解决问题 #1，但是当 Game Center 在线时我应该重新提交它们吗？我如何检测 Game Center 是否真的在线，因为即使离线`reportAchievementWithCompletionHandler`完成也没有错误，所以我无法检测它是否未提交。这是我的测试方式，我打开了飞行模式，解锁了一些成就，然后关闭了飞行模式，成就无法进入游戏中心，尽管这可能是“沙盒”问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T08:54:58.077

为您提到的“成就解锁”添加持久存储，并为每个成就存储“成功提交到游戏中心”标志。然后，在线时，检查`loadAchievementsWithCompletionHandler`启动时的结果，并定期查看每个成就`unlocked && !submitted`是否实际到达游戏中心，如果没有则重新提交。

# css - 网站右侧不需要的边距

> ID：14223117
> 
> 赞同：-4
> 
> 时间：2013-01-08T20:04:43.007
> 
> 标签：css

我正在尝试使我的网站跨浏览器和分辨率兼容，但由于某种原因，当调整窗口大小时，我的网站右侧出现奇怪的空白？如果它在我的原生 1600x900 res 中全屏就好了，我已经设置`min-width: 100%`了横幅、导航选项卡和顶部的蓝条等元素。

![在此处输入图像描述](../Images/958c587f517cdeaa885cb03960b6384c.png)

CSS：

```
body { background-color:#F5F5F5; font-family:Verdana, Geneva, sans-serif; font-size:14px; margin: 0px auto; border-top: 15px solid #003663; }
.header { padding:0px 10px 0px 10px; height:170px; margin:0 auto; width:1050px; margin-top:0px; }
.container { width: 1025px; margin: 0 auto; }

div.menubar { background: #ccc; width: 100%; min-width: 100%;}
div.banner-image { overflow: hidden; width: 100%; height: 100%; z-index: 1; } 
```

图片横幅的 HTML：

```
 <div class="menubar">
        <div class="container">
            <ul id="topnav">
                    <?php
                    Template::Show('core_navigation.tpl');
                    ?>
            </ul>
        </div>
    </div>

            <div class="banner-image">
                <div class="slicebox-wrapper">
                    <ul id="sb-slider" class="sb-slider">
                        <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab1.jpg" alt="image1"/></li>
                        <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab2.jpg" alt="image2"/></li>
                    </ul>   
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:09:51.020

如果 div 的背景没有固定的最小宽度，这是一个常见问题。百分比没有帮助。背景不会显示在滚动区域中。你需要给它`min-width: ..px`

使其最小宽度：1050px，因为您的标题使用 1050px。

# iphone - 目标-c：当我创建自定义类的多个实例时，委托对象参数被覆盖

> ID：14223122
> 
> 赞同：1
> 
> 时间：2013-01-08T20:05:00.263
> 
> 标签：iphone, objective-c, xcode

**编辑：我为浪费时间道歉，错误与我正在做的事情无关，而是我的代码中的一些逻辑让我相信这是原因。自从使用他的想法通过整个 AuthorSelectionView 以及他关于更正 NSNumer 错误的说明以来，我授予 Kevin 正确答案。对于那个很抱歉。**

我已经想了好几个小时，甚至搁置了一天，仍然无法弄清楚......

我的情况如下：

我创建了一个实现“UIView”的自定义类，并将这个类变成了一个协议，如下所示：

**自定义 UIView h 文件**

```
@protocol AuthorSelectionViewDelegate <NSObject>
-(void)AuthorSelected:(NSNumber *)sender;
@end

#import <UIKit/UIKit.h>

@interface AuthorSelectionView : UIView

@property (nonatomic,assign) id<AuthorSelectionViewDelegate> delegate;

@property (strong,retain) NSNumber *authorID;

- (id)initWithFrame:(CGRect)frame withImage:(UIImage *)img withLabel:(NSString *)lbl withID:(int)authorID ;

@end 
```

**实施...**

```
 - (id)initWithFrame:(CGRect)frame withImage:(UIImage *)img withLabel:(NSString *)lbl withID:(int)authorID
    {
        self = [super initWithFrame:frame];
        if (self) {
            self.authorID = [[NSNumber alloc] initWithInt:authorID]; //used to distinguish multiple instances of this class in a view.

            ...

        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, FRAMEWIDTH, FRAMEHEIGHT)];
        [button addTarget:self action:@selector(CUSTOMBUTTONCLICK) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:button];
    }
return self;
}

    - (void) CUSTOMBUTTONCLICK
    {
        [self.delegate performSelector:@selector(AuthorSelected:) withObject:self.authorID];
    } 
```

**现在我的委托对象中的方法被调用得很好，但我的主要问题是当我有多个 AuthorSelected 类的实例时，**正在传递的对象发生了什么事alloc'd ..（NSNumber authorID）。我对它有一些奇怪的行为。传递的值似乎几乎是随机的，但我正在检测某种模式，其中传递的值迟到了..

这很令人困惑，所以我试着解释一下：我创建了 AuthorSelected 视图的两个实例，一个带有 authorID=1，另一个带有 authorID=2。

在第一次按下时，假设我按下第一个按钮，我会按预期得到 1。

在第二次按下时，如果我按下第一个自定义按钮，我会得到“1”，但如果我按下第二次，我仍然会得到 1。

第三次，任何一个按钮都会返回“2”

我觉得这是指针的一些问题，因为这对我来说一直是一个弱点，但是任何帮助将不胜感激，因为我似乎无法弄清楚这一点。

谢谢！

**编辑：**

```
as requested here is how I create the AuthorSelectionView Objects...

AuthorSelectionView * asView01 = [[AuthorSelectionView alloc]
initWithFrame:CGRectMake(0, 0, FRAMEWIDTH, FRAMEHEIGHT)
withImage:userPic1
withLabel:randomUserName
withID:1];

asView01.delegate = self;

AuthorSelectionView * asView02 = [[AuthorSelectionView alloc]
initWithFrame:CGRectMake(0, 0, FRAMEWIDTH, FRAMEHEIGHT)
withImage:userPic2
withLabel:randomUserName2
withID:2];

asView02.delegate = self; 
```

**一个可能很重要的细节：**

一旦我单击这些自定义视图之一，我的代码设置为（现在）调用运行上述 AuthorSelectionView alloc 代码的方法，以便我可以使用相同的布局刷新屏幕，但使用不同的 userpic/userName . 这是糟糕的设计，我知道，但现在我只想让基本功能正常工作，然后会担心重绘。我提到了这个花絮，因为我知道objective-c的“层”视图像画布上的油漆一样相互叠加，并且想到也许当我点击我认为可能是我的第二个按钮时，它真的“点击”了下层并提取不正确的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:11:38.450

您对问题的描述有点令人困惑，但是您`init`的这一行显然是错误的：

```
self.authorID = [self.authorID initWithInt:authorID]; 
```

在`-init`中，您的属性`self.authorID`默认为`nil`，因此表达式`[self.authorID initWithInt:authorID]`等价于`[nil initWithInt:authorID]`，其计算结果为`nil`。所以你实际上应该`nil`在你的行动中看到。你可能是想说`self.authorID = [NSNumber numberWithInt:authorID]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:11:48.487

代替 ：

```
self.authorID = [self.authorID initWithInt:authorID]; 
```

放 ：

```
self.authorID = [NSNumber numberWithInt:authorID]; 
```

或者

```
self.authorID = [[NSNumber alloc] initWithInt:authorID]; 
```

编辑 ：

您的代码中没有错误或警告吗？我看不到您在 init 方法中返回 self 对象（“return self;”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:16:04.217

你错过了 alloc 消息，所以这个消息：

```
self.authorID = [self.authorID initWithInt:authorID]; 
```

发送到 nil 目标，因为 self.authorID 尚未分配。

所以先分配它，然后使用init方法，或者混合这两条消息。更快的语法允许这样做：

```
self.authorID= @(authorID); 
```

**编辑**

我看不到您在哪里初始化委托，如果您没有初始化它，甚至不应该调用该方法。显示您在其中创建 AuthorSelectionView 对象并设置委托的代码。

# jquery - FlexiGrid“无项目”，响应清楚地显示数据

> ID：14223125
> 
> 赞同：0
> 
> 时间：2013-01-08T20:05:16.453
> 
> 标签：jquery, ajax, vb.net, flexigrid

表格可见，看起来不错，列标题出现，但在“处理中，请稍候...”的瞬间后，状态变为“无项目”。检查 DOM 中的响应显示数据正在从 Web 服务正确返回，格式如下：

```
<?xml version="1.0" encoding="utf-8"?>
<MyDataClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <Page>1</Page>
  <Rows>
    <MyDataRow>
      <request_id>13073</request_id>
      <status>501</status>
      <req_by_user_id>herbjm</req_by_user_id>
    </MyDataRow>
    ...
    ....
  </Rows>
</MyDataClass> 
```

这是有问题的flexigrid javascript：

```
$('#report').flexigrid({
    url: 'reportdata.asmx/rptPendingServerRequestsFlexi',
    dataType: 'xml',
    colModel: [
        { display: 'ID', name: 'request_id', width: 40, sortable: true, align: 'center' },
        { display: 'Status', name: 'status', width: 180, sortable: true, align: 'left' },
        { display: 'Requested By', name: 'req_by_user_id', width: 120, sortable: true, align: 'left' }
    ],
    searchitems: [
        { display: 'ID', name: 'request_id' },
        { display: 'Status', name: 'status', isdefault: true },
        { display: 'Requested By', name: 'req_by_user_id' }
    ],
    sortname: "request_id",
    sortorder: "desc",
    usepager: false,
    title: 'Server Requests',
    useRp: false,
    rp: 30,
    showTableToggleBtn: false,
    singleSelect: true
}); 
```

对于奖励积分，即使分页已禁用，我如何显示页脚？

**更新：**我检查了 DOM 的 flexigrid 演示，这里是他们返回的 XML 的格式：

```
<?xml version="1.0" encoding="utf-8"?>
<rows>
    <page>1</page>
    <total>239</total>
    <row id='1'>
        <cell>1</cell>
        <cell>501</cell>
        <cell>Steve</cell>
    </row>
    <row id='2'>
        <cell>2</cell>
        <cell>501</cell>
        <cell>Fred</cell>
    </row>
</rows> 
```

我猜这就是为什么它不起作用？要了解我是如何构建响应的，请参阅以下问题：[vb.net return json object with multiple types？](https://stackoverflow.com/questions/14203171/vb-net-return-json-object-with-multiple-types/14205299#14205299)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:11:18.320

根据我在[这里](http://www.kenthouse.com/blog/2009/07/fun-with-flexigrids/)和其他几个位置找到的各种信息，flexigrid 要求 XML 具有特定格式：

```
rows - the row definition
  page - the current page number
  total - the total count of rows in this collection
  row - the row, with a unique property called id
    cell - each row must contain cells in the order that they are displayed on the grid 
```

由于 MyDataClass 是由于[您之前的问题](https://stackoverflow.com/questions/14203171/vb-net-return-json-object-with-multiple-types/)而生成的，因此这里是这些类的更新版本，它们将产生所需的输出：

```
<XmlType("rows")> _
Public Class MyDataClass

    <XmlElement("page")> _
    Public Property Page As Integer

    <XmlElement("total")> _
    Public ReadOnly Property Total As Integer
        Get
            If Me.Rows IsNot Nothing Then
                Return Me.Rows.Count
            Else
                Return 0
            End If
        End Get
    End Property
    <XmlElement("row")> _
    Public Property Rows As List(Of MyDataRow)

    ' Parameterless constructor to support serialization.
    Public Sub New()
        Me.Rows = New List(Of MyDataRow)
    End Sub
    Public Sub New(wPage As Integer, ds As DataSet)
        Me.New()

        Me.Page = wPage

        For Each oRow As DataRow In ds.Tables(0).Rows
            Dim oMyRow As New MyDataRow

            oMyRow.Id = CInt(oRow("id"))
            oMyRow.Name = CStr(oRow("Name"))

            Me.Rows.Add(oMyRow)
        Next

    End Sub
End Class

<XmlType("row")> _
Public Class MyDataRow
    <XmlAttribute("id")> _
    Public Property Id As Integer

    Private m_cCells As List(Of MyDataCell)

    <XmlIgnore()> _
    Public WriteOnly Property Name As String
        Set(value As String)
            Me.AddCell("Name", value)
        End Set
    End Property

    <XmlElement("cell")> _
    Public ReadOnly Property Cells As List(Of MyDataCell)
        Get
            Return m_cCells
        End Get
    End Property

    ' Parameterless constructor to support serialization
    Public Sub New()
        m_cCells = New List(Of MyDataCell)
    End Sub

    Public Sub AddCell(sCellName As String, sCellValue As String)
        m_cCells.Add(New MyDataCell(sCellName, sCellValue))
    End Sub
End Class

Public Class MyDataCell
    <XmlIgnore()> _
    Public Property Name As String
    <XmlText()> _
    Public Property Value As String

    ' Parameterless constructor to support serialization
    Public Sub New()

    End Sub
    Public Sub New(sCellName As String, sCellValue As String)
        Me.New()
        Me.Name = sCellName
        Me.Value = sCellValue
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:29:13.863

伙计们看看这个 flexiuigrid 的演示

[http://flexidemo.ranjitjena.com/](http://flexidemo.ranjitjena.com/)

# django - 重复的模型表单在模型表单集中没有验证 - django

> ID：14223126
> 
> 赞同：0
> 
> 时间：2013-01-08T20:05:17.570
> 
> 标签：django, modelform

我有一个模型表单，用户可以提交它以将信息保存到数据库中。我想用 ModelFormset 对其进行扩展，以便用户可以同时查看和提交具有不同信息的多个相同模型表单。但是，我的 POST 数据未绑定到 ModelFormset，因此 ModelFormset 在`is_valid()`. 我看到有相关的数据`request.POST.copy()`，它只是

视图.py

```
def create(request):
    if request.method == 'POST':
        post_data = request.POST.copy()
        print "POST DATA"
        print post_data
        for i in post_data:
            print i
        formSet = WorkOrder_Form(post_data)
        print "FORMSET"
        print formSet
        if formSet.is_valid():
            formSet.save()
        else:
            print 'INVALID'
        return HttpResponseRedirect('/Shelling/') 
    else:
        formSet = formset_factory(WorkOrder_Form, extra=1)
        return render_to_response('create.html',{'WorkOrder_Form':formSet}, context_instance=RequestContext(request)) 
```

模板：（create.html）

```
{% load url from future %}
<a href="{% url 'index' %}"> Return to Index </a></li>
<br>
<br>
<form action="{% url 'create' %}" method="post"> {% csrf_token %}

{% for WorkOrder in WorkOrder_Form %}
    {{ WorkOrder.as_ul }}
    <br>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:20:49.957

您正在使用模型表单，因此您应该使用[`modelformset_factory`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)而不是`formset_factory`. `create`您可以在视图之外创建表单集类。然后，您需要在视图的`GET` *和* `POST`分支中实例化表单集。

放在一起，你有以下（未经测试，所以可能有一些错别字！）

```
WorkOrderFormSet = formset_factory(WorkOrder_Form, extra=1)

def create(request):
    if request.method == 'POST':
        post_data = request.POST.copy()
        formset = WorkOrderFormSet(data=post_data, queryset=WorkOrder.objects.none())
        if formset.is_valid():
            formset.save()
        else:
            print 'INVALID'
        return HttpResponseRedirect('/Shelling/') 
    else:
        formset = WorkOrderFormSet(queryset=WorkOrder.objects.none())
        return render_to_response('create.html',{'formset':formset}, context_instance=RequestContext(request)) 
```

在模板中：

```
{% for form in formset %}
    {{ form.as_ul }}
{% endfor %} 
```

# ruby-on-rails - 亚马逊云端自定义原点轨道

> ID：14223132
> 
> 赞同：2
> 
> 时间：2013-01-08T20:05:41.007
> 
> 标签：ruby-on-rails, amazon-cloudfront

我刚刚了解到，您可以使用 Amazon Cloudfront 支持 Rails 应用程序的静态资产（HTML、CSS、JS、IMAGES）……我在这里阅读了一篇很好地描述了该过程的文章。

[http://blog.codeship.io/2012/05/18/Assets-Sprites-CDN.html](http://blog.codeship.io/2012/05/18/Assets-Sprites-CDN.html)

我对这个 CDN 设置有几个问题：

1> 我有几乎相同的用例，但我不想从 CloudFront CDN 提供我所有的静态预生成（半动态）html ......我有大约 2 亿个 html 文件 ~7Kb ......所以大约1333 GB！！（rails 上的搜索引擎）.. 但是，我的站点用户经常请求这些文件中的只有 10%.. 所以这是一个更易于管理的 130 GB（长尾）。每次离开 CloudFront 时，130 GB 的成本约为 77 美元/月（考虑到请求成本和一点余地）。但 1300 GB 的成本约为 770 美元/月。我想少付 90% 的费用，并且只缓存数据经常被访问..

2> 我可以只缓存在云端，即我经常访问的 10% 的数据集吗？并根据需要从我的服务器提供其余部分？

3> 在美好的一天，使用您当前的设置，我的云端将只有 133GB 的数据流出（假设每个经常访问的文件只有 1 个请求）。但是在糟糕的一天，假设一个爬虫请求我所有的链接..它将有 1333GB 的数据..我怎么能不多付呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:30:34.097

Cloudfront 专为资产缓存而非内容而设计。原因很简单：URL。

当您使用 cloudfront 时，您将资产 url 更改为 cloudfront 为您生成的任何主机。这对于静态资产来说没问题，但是缓存内容是地狱，特别是由 rails 动态生成的内容。

也就是说，永远不要使用任何 CDN 进行内容缓存，这没有意义，维护起来很麻烦。

# asp.net-mvc-3 - 处理 Global.asax 中的一些错误

> ID：14223133
> 
> 赞同：1
> 
> 时间：2013-01-08T20:05:44.223
> 
> 标签：asp.net-mvc-3, httpexception

我在 .NET4 和 MVC3 (razor) 上有一个 Web 应用程序。

我想在 Global.asax 中处理我的应用程序错误。我创建了 application_error 函数。

我注意到并发现了一些错误。

当我尝试在线添加断点 `Response.Clear();`并且该错误是通用的时，其中一个在 Application_Error 中返回此字符串。

我怎样才能找到我的代码或我的代码的一部分？

我的代码：

```
protected void Application_Error()
    {
        var exception = Server.GetLastError();
        var httpException = exception as HttpException;
        Response.Clear();
        Server.ClearError();
    } 
```

httpException 上的错误：

```
{System.Web.HttpException (0x80004005): File does not exist.
  at System.Web.StaticFileHandler.GetFileInfo(String virtualPathWithPathInfo, String 
  physicalPath, HttpResponse response)
  at System.Web.StaticFileHandler.ProcessRequestInternal(HttpContext context, String 
  overrideVirtualPath)
  at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, 
  AsyncCallback callback, Object state) at   
  System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionSt
ep.Execute()
 at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& 
 completedSynchronously)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:40:22.593

我找到了解决方案

```
string errorLocation = Request.Path; 
```

Application_Error() 中的这个语法告诉你问题出在哪里:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T09:29:40.043

只是为了说明我对这个例外的经验，在我的情况下，原因是没有指定网页作为网站的起始页。

# java - 使用导入的类混淆 Java JAR 文件

> ID：14223134
> 
> 赞同：1
> 
> 时间：2013-01-08T20:05:44.187
> 
> 标签：java, eclipse, ant, proguard

我想使用 ProGuard 混淆和优化 Java JAR 文件。JAR 文件是用于 JDBC 和 SQLite 的自编写类和导入类的集合。

导入的类不必被混淆，但可以优化。拥有一种混淆所有并优化所有配置的配置以及一种仅优化和混淆我的代码并使导入的类保持不变的配置会很好。

我做了一些研究并尝试了不同的配置来实现这一点，但失败了，ProGuard 显示许多警告和几个错误，我尝试更改脚本没有效果或效果很小。

我在 Eclipse 中开发并使用 Ant`build.xml`文件来完成这项工作。

有人知道这应该怎么做吗？

**这是我的 Ant 构建文件：**

```
<?xml version="1.0" ?>
<project name="Ant-ProGuard-Build" default="main" basedir=".">
<!-- Sets variables which can later be used. -->
<!-- The value of a property is accessed via ${} -->
<property name="src.dir" location="src" />
<property name="build.dir" location="build" />
<property name="dist.dir" location="dist" />
<property name="docs.dir" location="docs" />
<property name="lib.dir" location="lib" />

<!-- Define external resources -->
<taskdef resource="proguard/ant/task.properties"
classpath="C:\eclipse\ProGuard-4.8\lib\proguard.jar" />

<target name="main" depends="compile, jar, obfuscate"
    description="Create project">
</target>

<echo>-== Creating project ==-</echo>

<!-- Compiles the java code (including the usage of library for JUnit -->
<target name="compile" description="Compile target">
    <javac srcdir="${src.dir}" destdir="${build.dir}">
    </javac>
</target>

<!--Creates the deployable jar file  -->
<target name="jar" depends="compile">
    <jar destfile="${dist.dir}\Myprogram_Ant.jar" basedir="${build.dir}">
        <manifest>
            <attribute name="Main-Class" value="se.me.myprogram.main.ProgMain" />
        </manifest>
        <zipgroupfileset dir="./lib" includes="**/*.jar" />
    </jar>    
</target>

<target name="obfuscate" depends="compile, jar"
    description="Obfuscate compiled classes">
    <proguard>
        -libraryjars "${java.home}\lib\rt.jar"
        -libraryjars "${lib.dir}\mysql-connector-java-5.1.22-bin.jar"
        -libraryjars "${lib.dir}\sqlite-jdbc-3.7.15-SNAPSHOT.jar"
        -injars      "${dist.dir}\StockWatch_Ant.jar"
        -outjars     "${dist.dir}\StockWatch_ProGuard.jar"

        # All entry points will be in this package
        -keep public class se.me.myprogram.main.*
        -keepclassmembers public class se.me.myprogram.main.ProgMain {
                    public static void main(java.lang.String[]);
        }

        # Keep the imported classes public
        -keep public class com.mysql.**
        -keep public class org.**
    </proguard>
</target>

<echo>---------- Creation of project is done! ----------</echo> 
```

**我得到的错误是：**

```
 Buildfile: C:\ECLIPSE-WORKSPACE\MyProgram\Ant_ProGuard_Build.xml
     [echo] -== Creating project ==-
     [echo] ---------- Creation of project is done! ----------
compile:
[javac] C:\ECLIPSE-WORKSPACE\MyProgram\Ant_ProGuard_Build.xml:29: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
jar:
obfuscate:
 [proguard] ProGuard, version 4.8
 [proguard] Reading program jar [C:\ECLIPSE-WORKSPACE\MyProgram\dist\MyProgram_Ant.jar]
 [proguard] Reading library jar [C:\Program Files\Java\jre7\lib\rt.jar]
 [proguard] Warning: com.mysql.jdbc.integration.c3p0.MysqlConnectionTester: can't find superclass or interface com.mchange.v2.c3p0.QueryConnectionTester
 [proguard] Warning: com.mysql.jdbc.integration.jboss.ExtendedMysqlExceptionSorter: can't find superclass or interface org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
 [proguard] Warning: com.mysql.jdbc.integration.jboss.MysqlValidConnectionChecker: can't find superclass or interface org.jboss.resource.adapter.jdbc.ValidConnectionChecker
 [proguard] Warning: org.sqlite.SQLite: can't find superclass or interface org.ibex.nestedvm.UnixRuntime
 [proguard] Warning: com.mysql.jdbc.integration.c3p0.MysqlConnectionTester: can't find referenced class com.mchange.v2.c3p0.C3P0ProxyConnection
 [proguard] Warning: com.mysql.jdbc.integration.jboss.ExtendedMysqlExceptionSorter: can't find referenced class org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
 [proguard] Warning: com.mysql.jdbc.log.Slf4JLogger: can't find referenced class org.slf4j.LoggerFactory
 .
 80 lines... with same message : "[proguard] Warning: ......: can't find referenced class ....."
 .
 [proguard] Warning: org.sqlite.SQLite: can't find referenced class org.ibex.nestedvm.Runtime$CPUState
 [proguard] Warning: org.sqlite.SQLite: can't find referenced class org.ibex.nestedvm.Runtime$CPUState
 [proguard] Note: com.mysql.jdbc.SQLError calls '(java.sql.SQLException)Class.forName(variable).newInstance()'
 [proguard] Note: com.mysql.jdbc.CallableStatement accesses a constructor '<init>(com.mysql.jdbc.MySQLConnection,com.mysql.jdbc.CallableStatement$CallableStatementParamInfo)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.CallableStatement { CallableStatement(com.mysql.jdbc.MySQLConnection,com.mysql.jdbc.CallableStatement$CallableStatementParamInfo); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4CallableStatement { JDBC4CallableStatement(com.mysql.jdbc.MySQLConnection,com.mysql.jdbc.CallableStatement$CallableStatementParamInfo); }'
 [proguard] Note: com.mysql.jdbc.DatabaseMetaData accesses a constructor '<init>(com.mysql.jdbc.MySQLConnection,java.lang.String)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaData { DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaDataUsingInfoSchema { DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaData { JDBC4DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaDataUsingInfoSchema { JDBC4DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4PreparedStatement { JDBC4PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.PreparedStatement { PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.StatementImpl { StatementImpl(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard] Note: com.mysql.jdbc.DatabaseMetaData accesses a constructor '<init>(com.mysql.jdbc.MySQLConnection,java.lang.String)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaData { DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaDataUsingInfoSchema { DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaData { JDBC4DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaDataUsingInfoSchema { JDBC4DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4PreparedStatement { JDBC4PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.PreparedStatement { PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.StatementImpl { StatementImpl(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard] Note: com.mysql.jdbc.LoadBalancingConnectionProxy accesses a constructor '<init>(com.mysql.jdbc.LoadBalancingConnectionProxy)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4LoadBalancedMySQLConnection { JDBC4LoadBalancedMySQLConnection(com.mysql.jdbc.LoadBalancingConnectionProxy); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.LoadBalancedMySQLConnection { LoadBalancedMySQLConnection(com.mysql.jdbc.LoadBalancingConnectionProxy); }'
 [proguard] Note: com.mysql.jdbc.PreparedStatement accesses a constructor '<init>(com.mysql.jdbc.MySQLConnection,java.lang.String)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaData { DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.DatabaseMetaDataUsingInfoSchema { DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaData { JDBC4DatabaseMetaData(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4DatabaseMetaDataUsingInfoSchema { JDBC4DatabaseMetaDataUsingInfoSchema(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.JDBC4PreparedStatement { JDBC4PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.PreparedStatement { PreparedStatement(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.StatementImpl { StatementImpl(com.mysql.jdbc.MySQLConnection,java.lang.String); }'
 [proguard] Note: com.mysql.jdbc.jdbc2.optional.MysqlPooledConnection accesses a constructor '<init>(com.mysql.jdbc.Connection)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.ProfilerEventHandlerFactory { ProfilerEventHandlerFactory(com.mysql.jdbc.Connection); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.jdbc2.optional.JDBC4MysqlPooledConnection { JDBC4MysqlPooledConnection(com.mysql.jdbc.Connection); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.jdbc2.optional.MysqlPooledConnection { MysqlPooledConnection(com.mysql.jdbc.Connection); }'
 [proguard] Note: com.mysql.jdbc.jdbc2.optional.SuspendableXAConnection accesses a constructor '<init>(com.mysql.jdbc.ConnectionImpl)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.ConnectionImpl$10 { ConnectionImpl$10(com.mysql.jdbc.ConnectionImpl); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.jdbc2.optional.JDBC4SuspendableXAConnection { JDBC4SuspendableXAConnection(com.mysql.jdbc.ConnectionImpl); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.jdbc2.optional.SuspendableXAConnection { SuspendableXAConnection(com.mysql.jdbc.ConnectionImpl); }'
 [proguard] Note: com.mysql.jdbc.log.LogFactory accesses a constructor '<init>(java.lang.String)' dynamically
 [proguard]       Maybe this is program method 'com.mysql.jdbc.ConnectionGroup { ConnectionGroup(java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.EscapeTokenizer { EscapeTokenizer(java.lang.String); }'
 [proguard]       Maybe this is program method 'com.mysql.jdbc.MiniAdmin { MiniAdmin(java.lang.String); }'
 .
 .
 .
 1040 lines... with same message : "[proguard]       Maybe this is program method....."
 .
 .
 .
 [proguard]       Maybe this is library method 'sun.util.locale.LocaleSyntaxException { LocaleSyntaxException(java.lang.String); }'
 [proguard] Note: there were 1 class casts of dynamically created class instances.
 [proguard]       You might consider explicitly keeping the mentioned classes and/or
 [proguard]       their implementations (using '-keep').
 [proguard] Note: there were 8 accesses to class members by means of introspection.
 [proguard]       You should consider explicitly keeping the mentioned class members
 [proguard]       (using '-keep' or '-keepclassmembers').
 [proguard] Warning: there were 50 unresolved references to classes or interfaces.
 [proguard]          You may need to specify additional library jars (using '-libraryjars').
 [proguard] Warning: there were 6 unresolved references to program class members.
 [proguard]          Your input classes appear to be inconsistent.
 [proguard]          You may need to recompile them and try again.
 [proguard]          Alternatively, you may have to specify the option 
 [proguard]          '-dontskipnonpubliclibraryclassmembers'.

BUILD FAILED
C:\ECLIPSE-WORKSPACE\MyProgram\Ant_ProGuard_Build.xml:49: Please correct the above warnings first.

Total time: 7 seconds 
```

# objective-c - 当我在 Modern Objective-C 中覆盖 setter 和 getter 时，访问生成的 ivars 时出错

> ID：14223137
> 
> 赞同：20
> 
> 时间：2013-01-08T20:05:52.223
> 
> 标签：objective-c, ios, properties, getter-setter

我现在知道新的 Objective-C 编译器让你不再需要合成你的属性了。我有一个文件，其中有两个类。我的 .h 用于一个简单的帮助类，如下所示：

```
@interface ViewFrameModel : NSObject

@property (nonatomic, strong) UIView *view;
@property (nonatomic, assign) CGRect frame;

- (id)initWithView:(UIView *)view frame:(CGRect)frame;

@end 
```

在同一个 .h 文件中，对于我的其他类（2 类），我有：

```
@property (nonatomic, strong) ViewFrameModel *viewFrameModel; 
```

在 2.m 课中，我可以这样做：

```
- (void)setViewFrameModel:(ViewFrameModel *)viewFrameModel {
    _viewFrameModel = viewFrameModel;        
    [self pushViewFrameModel:viewFrameModel];
} 
```

这很好用，编译器没有抱怨，但是，当我添加这个时：

```
- (ViewFrameModel *)viewFrameModel {
    return _viewFrameModel;
} 
```

我收到两个投诉，一个是关于第一种方法的`setViewFrameModel`：

> “使用未声明的标识符 _viewFrameModel，您的意思是 viewFrameModel”

另一个返回`_viewFrameModel`：

> “使用未声明的标识符 _viewFrameModel，您的意思是 viewFrameModel” “对封闭上下文中声明的局部变量 viewFrameModel' 的引用”

为什么我在添加时会收到这些错误

```
- (ViewFrameModel *)viewFrameModel {
    return _viewFrameModel;
} 
```

方法？我想用一些自定义信息覆盖这个方法，但它在抱怨我:-。想法？TIA。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-08T20:09:44.950

如果同时覆盖 setter 和 getter，编译器将不再自动为您创建实例变量。您可以像这样将它添加到您的类实现中：

```
@implementation ClassName {
    ViewFrameModel *_viewFrameModel;
}
...
@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T20:15:59.023

这是我去年做的一些测试的结果：[iOS 自动 @synthesize 没有创建 ivar](https://stackoverflow.com/questions/12933785/ios-automatic-synthesize-without-creating-an-ivar/12933956#12933956)。

简而言之，您需要使用 @synthesize 或显式声明 iVar。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-02T14:17:29.017

总结一下答案：

如果您同时覆盖 setter 和 getter，编译器将不会为您创建实例变量。

为什么？在这种情况下，编译器假定该属性是动态的：它可能是一个依赖于其他属性进行存储/计算的属性，或者它将以其他方式创建，例如在运行时使用 Objective-C 运行时函数.

为了帮助编译器更好地理解这种情况，有两种可能的解决方案：

```
@implementation Class
@synthesize property = _property;
...
@end 
```

或者

```
@implementation Class {
    PropertyClass *_property;
}
...
@end 
```

# algorithm - 二叉搜索树中的键值对有什么意义？

> ID：14223139
> 
> 赞同：3
> 
> 时间：2013-01-08T20:06:05.123
> 
> 标签：algorithm, binary-tree

在二叉搜索树中拥有一个键值对到底有什么意义？有人可以举一个这样的例子吗？因为在 stl set 容器中，我没有显式分配一个键值对。

我是 BST 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:17:49.807

键可以是用于从树中插入、查找或删除节点的简单值。值可以是节点持有的数据。例如，键可以是用户名，而值可以是用户信息，如姓名、姓氏、年龄、位置、偏好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:35:48.643

BST 旨在提供对 treeNode 特定属性的快速查询。

如果我想得到薪水高于 100,000 美元的员工。

构建 BST，使用薪水作为树节点的键，并将年龄、地址等其他信息放入值中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:18:46.167

键的目的是给定某个节点`S`作为起点，左侧的所有节点（及其键）`S`都小于键值`S`，右侧的所有节点（及其键）`S`都大于键值的`S`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T20:19:01.420

与使用 (key, value) 对的任何数据结构相同：您可能希望能够访问值数据，同时通过其键引用每个值。不使用值的散列可以让您获得一些额外的灵活性。不确定您所说的“点”是什么意思...语言为您提供了以不同方式解决问题的工具，如果其中一种方式是在二叉搜索树中使用（键，值）对，为什么不使用它呢？

# jquery - 排序时的 jQuery UI 可排序性能

> ID：14223142
> 
> 赞同：6
> 
> 时间：2013-01-08T20:06:15.623
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个在生产中使用的日历，它有 60 天，每天最多 5 个可分类项目，所以有 300 个可分类项目。日子是`<td>`元素，事件是`<div>`s。

在一天内排序和从一天拖到另一天都很慢。当元素进入新的一天或经过另一个可排序的项目时，元素会冻结一点。

延迟似乎与天数和可排序项目的数量有关。

这是jQuery代码。

```
$('.calendar-schedule-day').sortable({
    items: ".service-trip, .calendar-event",
    connectWith: ".calendar-schedule-day"
}); 
```

如何减少排序时发生的延迟？

**更多信息**

在 chrome连续多次调用`Layout`的地方，会出现以下警告：`RecalculateStyle`

布局 - 详细信息
持续时间 15.000 毫秒（36.86 秒）
注意强制同步布局可能是性能瓶颈。
布局无效
....

* * *

更新：[这里的jsFiddle](http://jsfiddle.net/benstenson/LBvmj) - 它太慢了，我无法判断它是否重现了问题。在生产中并非如此。但是，如果我开始从示例中删除 html（例如几周），那么无论如何我可能无法重现该问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:12:05.987

似乎我通过在调用 sortable 之前隐藏所有可排序元素并在它之后再次显示它们来更快地得到它。

```
$('.calendar-schedule-day').hide();
$('.calendar-schedule-day').sortable({ ... });
$('.calendar-schedule-day').sortable({ connectWith: ... });
$('.calendar-schedule-day').show(); 
```

[JSFiddle](http://jsfiddle.net/LBvmj/4/)

**修复它的更好方法**

只需使用此选择器`$('.calendar-schedule-day:visible')`，而不是`$('.calendar-schedule-day')`使用时`.sortable()`

[JSFiddle](http://jsfiddle.net/LBvmj/5/)

似乎隐藏元素与可排序混淆，因此我们只会使可见元素可排序。

# javascript - 无法在 JavaScript 中为 ActiveX 控件实例化对象：出现 429 错误

> ID：14223144
> 
> 赞同：0
> 
> 时间：2013-01-08T20:06:20.257
> 
> 标签：javascript, .net-4.0, activex, webmatrix

我创建了一个 ActiveX 控件（仅代码，例如 ZPLPrint.cs），我使用 .Net 4.xxx 目录中的 csc 命令将其作为库编译为 dll。然后我使用 regasm ZPLPrint.dll /tlb /codebase 注册了 dll。我正在使用 WebMatrix 来构建控件并使用它来运行 IE10。我的操作系统是 Windows 8。在我的 sitelayout.cshtml（在 WebMatrix 中）中，我在 head 部分嵌入了以下 JavaScript： script type="text/javascript" var x = new ActiveXObject("ABCActiveXPrint.ZPLPrint");

脚本还有更多内容，但我无法通过创建上面的对象。我收到以下错误消息：“SCRIPT429：自动化服务器无法创建对象”。这最终将在 Windows Mobile 6.5 CE 上运行。我是在正确的轨道上还是应该考虑另一种方法？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:09:25.350

显然，浏览器由于其安全设置而阻止控件执行。由于我是在本地开发的，所以我只是将 localhost 添加到受信任站点列表中，并且能够克服错误。

# jquery - 更改选择框时的 Ajax 调用，由 Firefox 键触发

> ID：14223147
> 
> 赞同：1
> 
> 时间：2013-01-08T20:06:27.153
> 
> 标签：jquery, html, ajax, events, firefox

我的选择框有问题。我为事件分配了一个 ajax 处理程序`onchange`。如果您使用鼠标，它可以正常工作。但是，当使用键更改选项时，我需要它工作。`select`选项发生了变化，但直到失去焦点才进行 ajax 调用。这个问题似乎是Firefox特有的。

[小提琴](http://jsfiddle.net/R5nvZ/)

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:11:33.297

您可以分配 onkeyup 事件来选择，然后手动监听更改查看代码

```
$("#sel").change(function(){
  alert("hello");
});

oldval = $("#sel").val();

$("#sel").keyup(function(){
  if(oldval != $("#sel").val())
  $(this).change();
}); 
```

当然它应该在生产使用之前进行细化，但这只是一个开始。顺便说一句，如果您在通过键盘更改值后按 Enter 键，则会触发更改事件。我相信你没有按回车键。所以值确实没有变化，而是处于变化的状态。因此浏览器不会触发更改事件。

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:12:53.913

向上和向下箭头仅用于浏览您的选项，但如果您想触发它们，您需要按 Enter 键。

**更新**

实际上，在您按下回车键或焦点从选择框中移出之前，尚未选择选项。按键事件和鼠标点击事件的行为略有不同。

# sql - 如何从 SQL 中的错误代码中获取错误描述？

> ID：14223148
> 
> 赞同：0
> 
> 时间：2013-01-08T20:06:27.650
> 
> 标签：sql, tsql, error-handling

> **可能重复：**
> [SqlError.Number 描述](https://stackoverflow.com/questions/2059499/sqlerror-number-descriptions)

@@错误

这是一个整数。如何获得以下示例中错误的实际描述？

```
IF @@ERROR <> 0
INSERT INTO Table (ID, ErrorDescription)
VALUES (@ID, ????) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:12:31.320

因此，根据我评论中的参考，您可以使用以下内容：

```
SELECT @ErrorVariable AS ErrorID,
    text
FROM sys.messages
WHERE message_id = @ErrorVariable; 
```

[使用 @@Error](http://msdn.microsoft.com/en-us/library/ms188790%28v=sql.105%29.aspx)。

# java - 将特定 servlet 映射为 Tomcat 中的默认 servlet

> ID：14223150
> 
> 赞同：15
> 
> 时间：2013-01-08T20:06:28.777
> 
> 标签：java, tomcat, servlets, url-pattern

我正在尝试实现一个获取原始请求的 servlet，并决定要么处理它们，要么将它们转发到另一个后端服务器。它类似于负载均衡器，其中接收到的请求被转发到（在我的情况下为 2）目的地之一。其中一个目的地是远程的（在另一台主机上）。此外，请求可能会到达根目录 ( [http://mycompany.com/](http://mycompany.com/) )。

因为我想获得原始请求，所以我实现了自己的 servlet（子类化`HttpServlet`），效果很好。我的 servlet 看起来像：

```
public class MyProxyServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
        processOrForward(req, resp);
    }
    // also doGet(), doHead(), ...
} 
```

由于我要处理的服务可能会向根发送请求，因此我想将我的 servlet 映射为默认 servlet，从而接收任何没有显式 servlet 映射的请求。假设我的 servlet 的名称是“myservlet”，并且与另一个 servlet“foo”一起运行，我希望所有以[http://mycompany.com/foo/](http://mycompany.com/foo/) ... 形式的请求都被传递给 foo，并且一切其他（例如，/、/bar/...、/myservlet/...）到“myservlet”。查看之前的帖子（例如，[此处](https://stackoverflow.com/questions/4177047/how-to-set-up-the-root-servlet-in-tomcat-6)和[此处的根映射，或](https://stackoverflow.com/questions/7159902/servlet-mapping)[此处](https://stackoverflow.com/questions/10427347/tomcat-url-mapping-individual-servlet-to-root-level)的 url 重写），我以为我想通了，但它不起作用。

这是我的*web.xml*：

```
<web-app>
  <servlet>
    <servlet-name>ProxyServlet</servlet-name>
    <servlet-class>com.mycompany.MyProxyServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>ProxyServlet</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

在上面的*web.xml*中，对于 url-pattern 我试过

```
"/" and "/*" and empty (i.e., <url-pattern></url-pattern>), all behave the same -->
    Requests to root (/)goes to tomcat's default servlet
    Requests to /myservlet/... are handled by "myservlet"
    Requests to /fubar/... are always 404 
```

有没有办法将我的 servlet 设置为默认值。即，任何不专门映射到 servlet 的请求都会出现在我的面前（接收所有请求甚至是可以接受的，因为我可以将这个 servlet 部署在它自己的容器中）。万一这很重要，我在 Ubuntu 12.10 上使用 Tomcat 7.0.30。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-08T22:59:59.390

这应该对你有用。

来自[**Java™ Servlet 规范版本 3.1 (JSR 340)**](http://download.oracle.com/otndocs/jcp/servlet-3_1-fr-eval-spec/index.html)

> ## 第 12 章 将请求映射到 Servlet
> 
> ### 12.2 映射规范
> 
> 在 Web 应用程序部署描述符中，使用以下语法来定义映射：
> 
> *   以字符开头`/`并以后缀结尾的字符串`/*`用于 **路径映射**。
>     
>     
> *   以前缀开头的字符串`*.`用作**扩展映射**。
>     
>     
> *   空字符串`("")`是一种**特殊的 URL 模式，它准确地映射到应用程序的上下文根**，即表单的请求`http://host:port/<contextroot>/`。在这种情况下，路径信息是`/`，servlet 路径和上下文路径是空字符串`("")`。
>     
>     
> *   仅包含字符的字符串`/`表示应用程序的**“默认”servlet**。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
>     
>     
> *   所有其他字符串仅用于**完全匹配**。

另外，请阅读[Head First Servlets & JSP: Passing the Sun Certified Web Component Developer Exam (2nd edition)](https://rads.stackoverflow.com/amzn/click/com/0596516681) (quote) 一书中的简短示例的精彩解释：

> 三种`<url-pattern>`元素
> 
> ### 1) 完全匹配
> 
> *例子：*
> `<url-pattern>/Beer/SelectBeer.do</url-pattern>`
> 
> *   必须以斜杠 ( ) 开头`/`。
> *   可以有扩展名（如 .do），但这不是必需的。
> 
> ### 2) 目录匹配
> 
> *例子：*
> `<url-pattern>/Beer/*</url-pattern>`
> 
> *   必须以斜杠 ( ) 开头`/`。
> *   始终以斜杠/星号 ( `/*`) 结尾。
> 
> ### 3) 扩展匹配
> 
> *例子：*
> `<url-pattern>*.do</url-pattern>`
> 
> *   必须以星号 ( ) 开头`*`（切勿使用斜杠）。
> *   在星号之后，它必须有一个点扩展名（.do、.jsp 等）。

**重要提示：**
URL 模式代表*逻辑/虚拟结构*，即**指定的模式（路径）不需要物理存在**。

* * *

**更新**

如果你愿意，正如你在评论中所说，

> 我希望 host:port 访问我的 servlet，而不是默认的 tomcat servlet

然后在此处查看解决方案：
[如何使我的 Web 应用程序成为 Tomcat 默认应用程序](http://wiki.apache.org/tomcat/HowTo#How_do_I_make_my_web_application_be_the_Tomcat_default_application.3F)

也就是说，你想要的是一个**没有应用上下文**的路径，它暗示了Tomcat默认应用的应用上下文。

从上面的链接引用：

> 在标准的 Tomcat 安装中，您会注意到在同一目录 (CATALINA_BASE)/webapps/ 下，有一个名为**ROOT**的目录 （大写字母很重要，即使在 Windows 下也是如此）。**这是当前 Tomcat 默认应用程序的驻留地，当用户调用 `http://myhost.company.com[:port]`**. 诀窍是把你的应用程序放在它的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T08:03:47.077

我不确定我是否理解你想要的，但可能拦截 404 是你想要做的，然后重定向到你想要的地方。

我来到这里是因为我对 tomcat 7 有奇怪的问题，我正在做你想要的；）

这只是我获得root权限的一种方式，EMPTY

```
<servlet-mapping>
    <servlet-name>Default</servlet-name>
    <url-pattern></url-pattern>
</servlet-mapping> 
```

这样：任何东西都被重定向到这个 servlet，包括图像等，例如，我打开另一个页面，这显示了这个，root，然后我可以在日志中看到 4 个对同一页面的更多请求，3 个用于 css，一个用于图像.

```
<servlet-mapping>
    <servlet-name>Default</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

# msbuild - 如何将构建定义从 TFS2010 克隆/复制到 TFS2012

> ID：14223151
> 
> 赞同：2
> 
> 时间：2013-01-08T20:06:28.263
> 
> 标签：msbuild, tfsbuild

不幸的是，我在 Visual Studio 2008 下，我知道有用于更高版本的 viusual studio 的 tfs powertools。但我的任务是将构建定义从 TFS 2010 转移到 TFS 2012。如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:29:57.790

“克隆构建定义”电动工具（来自 TFS2010/12）仅适用于同一团队项目中的构建定义，如果它们位于不同的团队项目或集合中，则不可能。如果您使用 VS2010/12 而不是 2008，就会出现这种情况。

Microsoft 的假设很可能是构建过程模板可能不同，因此复制定义可能会失败。

# jquery - jQuery触发HTML

> ID：14223153
> 
> 赞同：-2
> 
> 时间：2013-01-08T20:06:38.213
> 
> 标签：jquery, html, css

基本上，我有滑块，我也想从菜单中触发它。我使用以下内容`HTML`：

```
<ul>
    <li> <a href="#" onclick="jQuery('.advanced-slider').advancedSlider().gotoSlide(1);  return false;"> one </a> </li>
    <li> <a href="#" onclick="jQuery('.advanced-slider').advancedSlider().gotoSlide(2); return false;"> two </a> </li>
</ul> 
```

什么是合适的 Jquery 代码来触发这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:20:44.373

也许就是这样：

```
<ul id="myul">

<li> <a href="#"> one </a>  
</li>
<li> <a href="#"> two </a>  
</li>

</ul> 
```

```
$(function () {
  var $slider = $('.advanced-slider').advancedSlider();
  $("#myul a").each(function (i) {
    $(this).click(function (e) {
      e.preventDefault();
      $slider.gotoSlide(i)
    });
  });
}); 
```

# database - 类型可变长度数组 Postgresql 列中的默认值

> ID：14223157
> 
> 赞同：0
> 
> 时间：2013-01-08T20:07:06.607
> 
> 标签：database, postgresql, variable-length-array

我的问题是如何为可变长度数组列中的某个索引设置默认值。我正在尝试将其中一个位置的值设置为默认字符串'false'。

原因是我希望能够在查询中使用 where 子句来过滤位置值为“true”的项目（我正在手动将特定的项目设置为 true），但没有让我的其余数据默认为 false值我的查询没有获取任何数据。

如果这令人困惑，请告诉我，我会尝试清除它..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:04:36.337

通常，**列默认**值适用于整个列 - 在您的情况下适用于整个数组。

您必须为此编写**触发器**。但你可能不需要任何这些。我引用你的问题：

> ...但是如果我的其余数据在该值上默认为 false，我的查询不会获取任何数据。

如果您使用以下方式查询，您可能可以避免这种情况：

```
(arr[5] = 'true') IS NOT TRUE 
```

（包括所有情况，该标志不是“真”，甚至是`NULL`）而不是：

```
~~arr[5] <> 'true'~~
```

如果您需要*快速*查询此查询，您可以使用部分索引来支持它：

```
CREATE INDEX tbl_special_idx ON tbl (col1) -- potentially more columns
WHERE (arr[5] = 'true') IS NOT TRUE; 
```

重要的部分是`WHERE`条款。您可以使用列来代替`col1`可能涵盖整个查询（尤其是在 v9.2 中）*或*在查询中具有附加条件的列...

# c++ - 自定义复制赋值运算符使程序崩溃（C++）

> ID：14223161
> 
> 赞同：0
> 
> 时间：2013-01-08T20:07:24.440
> 
> 标签：c++, image, sdl, copy-constructor, copy-assignment

我正在创建一个用于自动清理内存的自定义类。该类包含一个指向 SDL_Surface 对象的指针，并在需要时调用它的 refcount。问题是当我实现自定义复制分配运算符时，系统崩溃并出现以下代码：

“xyz.exe 中 0x771a15de 处未处理的异常：0xC0000005：访问冲突读取位置 0xcccccd04。”

并且对象属性“address”突然获得值“0x0000ffff”，同时使用默认的复制赋值运算符它运行得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:34:33.900

您错误地使用了引用计数。 `SDL_FreeSurface`将减少引用计数，并且当在空指针上调用时，是一个空操作。因此，您的赋值运算符应如下所示：

```
const Image& Image::operator=(const Image& other){
    if (img != other.img){
        SDL_FreeSurface(img);
        img = other.img;
        if (img != NULL)
            img->refcount++;
    }
    return *this;
} 
```

你的析构函数应该是这样的：

```
Image::~Image(){
    SDL_FreeSurface(img);
} 
```

此外，在您的默认构造函数中，您应该将 img 初始化为空指针。

```
Image::Image() :img(NULL) {} 
```

请参阅本页倒数第二个示例：http: [//sdl.beuc.net/sdl.wiki/SDL_Surface](http://sdl.beuc.net/sdl.wiki/SDL_Surface)

# php - 使用 PHP 在 mysql 数据库中检查用户名和哈希/加盐密码

> ID：14223170
> 
> 赞同：2
> 
> 时间：2013-01-08T20:08:02.203
> 
> 标签：php, mysql, login, passwords, salt

在验证用户登录时，首先搜索用户名是否安全，然后如果找到，检索散列密码和盐并将其与用户输入进行比较？

或者，是否应该自行检索用户输入用户名的盐值，然后与输入的密码进行哈希处理，并与数据库中的最终哈希值进行比较？

本质上，在知道用户输入的密码是否有效之前，从数据库中为输入的用户名存储密码是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:50:10.350

如果您查看 PHP 密码哈希 API [https://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)的示例，答案是：不，您从数据库中读取用户并将存储的密码哈希与您刚刚从登录表单。

请尝试使用这个库 - PHP 5.5 将原生支持这些函数，如果您使用的是 PHP 5.3.7 及更高版本，那么不要重新发明轮子并简单地使用这些函数，这听起来是个好主意。做自己的事更容易受到攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:47:20.053

您可以同时检查登录名和密码。获取原始密码；加盐，然后检查加盐密码和用户名组合是否存在。当然，数据库中的密码之前应该已经过加盐和散列。

```
 if($loginname AND $loginpass){
  $loginpass=sha1($salt1.$loginpass.$salt2,$raw_output=false );

    $userinfo_query="SELECT * FROM users WHERE user_name='$loginname' AND user_pass='$loginpass' LIMIT 1";

  } 
```

# java - 通过 Java Web 服务发送大数据

> ID：14223174
> 
> 赞同：9
> 
> 时间：2013-01-08T20:08:17.073
> 
> 标签：java, web-services, rest, stream

我有一个返回大量数据的 Java Web 服务。有没有一种标准的方式来流式传输响应而不是尝试一次返回大量数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:18:51.037

这个问题类似于带回大型 RSS 提要的旧问题。您可以通过参数化 request:`http://host/myservice?start=0&count=100`或在响应本身中包含 next/prev url 来实现。

后一种方法有很多优点。我会搜索一个描述它的链接，如果我找到了，我会在这里发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:23:37.590

我会研究类似[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)的方法：

来自维基：

> Comet 是一种 Web 应用程序模型，其中长期持有的 HTTP 请求允许 Web 服务器将数据推送到浏览器，而无需浏览器显式请求它。

基本上，与其一次性发送大量数据，不如让您的 Web 服务器以自己的节奏并根据您的需要推送数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:59:53.380

Webservice 可能不是数据传输的好方法。

如果我是你，我想设置另一个服务，如 FTP 或 SFTP。

服务端将数据放到FTP服务器的具体路径中，通过webservice响应将路径信息发送给客户端。

# php - 防止 php $_REQUEST 转换 json

> ID：14223175
> 
> 赞同：4
> 
> 时间：2013-01-08T20:08:17.603
> 
> 标签：php, jquery, ajax, json, request

有没有人知道让 PHP $_REQUEST 自动转换 JSON 的方法？我正在通过 POST 发送数据，并希望将其中的一些数据保留为原始形式并将其存储为字符串。

理想情况下，我想要一些简单的方法来“转义”一段字符串。似乎有一种简单的方法可以做到这一点，但我还没有见过。

* * *

哇...请原谅我在表达这个问题时缺乏精确性，我已经连续几天不停地编程，只是累了。在我解释误解之前，我没想到会急于结束我的问题。

我的意思是我将 javascript 对象作为数据传递给 jQuery 的 $.ajax() 方法，并使用 type:"POST" 进行调用。后来我意识到 $.param() 在内部用于将对象序列化为传输的查询字符串，并且 $_REQUEST[] 将通过这种方式传递的对象转换为数组结构，就像处理任何复杂的表单数据一样。

* * *

**客户代码**

```
$.ajax({ type: "POST", url: "some.php", data: {"obj":{"key":"val"},"str":"text"} }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:49:42.553

当您执行 jQuery AJAX 请求时，数据中的键/值对作为 POST 参数而不是 JSON 发送。如果您希望将数据作为 JSON 发布，那么您需要做的是类似于以下内容：

```
<script type="text/javascript" src="https://raw.github.com/gist/754454/c6401b8cc461f84799503484a0c780a7622b164d/jQuery.stringify.js"><!-- JSON library --></script>

<script type="text/javascript">
  var data = JSON.stringify({"obj":{"key":"val"},"str":"text"}});
  $.ajax({'type':"POST", 'url':"some.php", 'data':{'data':data});
</script> 
```

请注意，我们将您通常传递的内容作为“数据”参数传递，但相反，我们正在创建一个名为“数据”的后参数，其值作为数据结构的字符串化版本。也称为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:30:22.330

在这种特定情况下，我希望能够执行以下操作：

```
$.ajax({
    type: "POST", 
    url: "some.php", 
    data: {
        "obj": {
            "key": "val",
            "keepStr": JSON.stringify({
                "innerObj" {
                    "item1": "val",
                    "item2": "val2"
                }
            })
        },
        "str": "text"
    } 
}); 
```

并将“innerObj”作为 JSON 字符串直接存储到数据库中。如前所述，我的（错误的）印象是 $.ajax() 将数据转换为 JSON 进行传输。正如另一个答案所阐明的那样，情况并非如此，而是在内部使用 $.param() 进行转换。

感谢您的回复，并重新提出问题。

# ruby-on-rails - 具有身份验证的 Amazon Cloudfront 自定义源轨道

> ID：14223177
> 
> 赞同：1
> 
> 时间：2013-01-08T20:08:46.313
> 
> 标签：ruby-on-rails, webserver, amazon-cloudfront

据我了解，只有当 cloudfront 能够从我的网站 url 访问文件时，使用 cloudfront 的自定义源服务器才有效：

例如：www.domain.com/hello.html

但是，我的网站需要登录才能查看 hello.html。我怎样才能拥有登录机制并仍然使用自定义源服务器在云端缓存我的真实 hello.html 页面？

我正在使用 Ruby on Rails 顺便说一句，但这也适用于其他堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:50:07.353

我很确定这是不可能的。正如您所说，CloudFront 必须能够访问文件以提供和缓存它。我从未见过告诉 CloudFront 使用密码来访问文件的选项。

一个想法：也许您可以在要求用户输入密码之前检查您的 Rails 应用程序，如果请求来自 CloudFront（我确定有一些标头表明这一点），如果是这样，绕过登录要求？

编辑：

它在[文档](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html)中说：

```
Do not configure your origin server to request client authentication. 
```

我很确定的一件事是用户代理。检查`user_agent =~ /cloudfront/i`并绕过身份验证？

# mp4 - 以 MP4 格式将电影存储在网站上是一个坏主意吗？

> ID：14223179
> 
> 赞同：0
> 
> 时间：2013-01-08T20:08:52.207
> 
> 标签：mp4, avi, movie, mpeg

我发布这个问题是希望有人将它迁移到更合适的 Stackexchange 站点，如果 Stackoverflow 这个问题不满足规则。我找不到更好的地方。

我的问题是 MP4 电影文件有什么问题？开发人员将电影转换为 mp4 并将它们以这种格式存储在网站上有何冲突？我看到网站上的大多数电影都是 AVI、MPEG 格式的。但是，我打算将一些电影转换为 MP4，并以这种格式将它们存储在我的网站上。有什么问题吗？我的意思是电影，大小为 800 MB+。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:11:06.613

MP4 是最广泛支持的格式，因此个人认为它是存储 VOD 内容的最佳格式。

它的支持

IOS安卓闪光灯silverlight HTML5

所以它覆盖了大部分屏幕。

# ruby-on-rails - 使用 Rails 创建 API

> ID：14223180
> 
> 赞同：2
> 
> 时间：2013-01-08T20:09:02.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, api

我只是想知道在 Rails 中创建 RESTFUL API 的最佳方法是什么？我应该使用 Rails-API 还是 Grape gem？每种方法的优点/缺点是什么？有没有更好的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:56:57.803

好消息是您可以在 Rails 中轻松创建 REST API，无需任何 gem。REST 有很多内容，所以我认为我不能在这里完全回答您的问题。幸运的是，如果您遵循 Rails 的约定，您可能已经拥有一个 REST API。

看起来这两个 gem 都适用于您不使用 Rails 的情况。Rails-API 说“它的主要使用示例仅在 API 应用程序中，您通常不需要整个 Rails 中间件堆栈或模板生成。” Grape 是为 Rack 应用程序设计的，它提供了 Rails 所提供的一小部分功能。

我建议看一下 Richardson、Ruby 和 Hansson 所著的“Restful Web Services”一书。他很好地解释了 REST 及其优势。这些示例在 Rails 中，所以它会给你一个很好的开始来回答你的问题。我真的很喜欢它，并发现它有助于在 Rails 中创建 REST 服务。

# sharepoint - 为什么 Microsoft.SharePoint.WebControls 优于 System.Web.UI.WebControls？

> ID：14223181
> 
> 赞同：1
> 
> 时间：2013-01-08T20:09:07.303
> 
> 标签：sharepoint, sharepoint-2010, web-parts

我正在为 SharePoint 2010 Foundation 构建可视化 Web 部件，使用 Visual Studio 2010 中的 ASP.NET 3.5。对于那些新手来说，这些就像制作一个自定义的“普通”.net 控件，您可以将其放到 SharePoint 页面上（因为 SharePoint无论如何都是建立在.net上的）。

当我在线查看各种示例以制作输入表单时，我注意到一些特定于 SharePoint 的 Web 控件版本。Microsoft.SharePoint.WebControls 通常从 System.Web.UI.WebControls 继承，因此通常会包含或实现它们的功能。

我还没有看到这些控件的各种 SharePoint 特定版本的好处的一个很好的列表或描述。为什么要努力使用这些专门的版本？

我知道的一个例子是 SharePoint GridView。我发现当与 DataSource 一起使用时，它具有内置的分页和排序功能。所以这很好。

有谁知道许多其他控件的类似“好处”列表？我还没有找到一个不错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:30:13.597

一般来说，您应该使用 SharePoint 控件与 .NET，因为 a）它们包含一些附加功能（您已经知道 GridView，但更重要的是，b）它们是“SharePoint Aware”，因此需要注意安全调整和此类事情的。毕竟，这些控件与 SharePoint UI 使用的控件相同，因此最好保持一致。

在所有情况下，SharePoint 控件都是 System.Web.UI 命名空间的混合体。您关心使用“原始”.NET 控件的唯一方法是在 SharePoint 之外实现兼容性。

# python - 如何覆盖我的 .vimrc 中的一些重新映射以正确编辑 Python

> ID：14223184
> 
> 赞同：0
> 
> 时间：2013-01-08T20:09:12.723
> 
> 标签：python, vim, ftplugin

我编写 CSS 和 Python 代码，对于 CSS，我节省了以下时间

```
inoremap :      :;<Left> 
```

这很好，直到我开始用 Python 编码。每次我点击时，`:`我都会得到一个不需要的东西`;` ，我应该提一下，为了让 Python 中的编辑变得愉快，我添加了适当的缩进

```
~/.vim/ftplugin/python.vim 
```

`python.vim`包含以下内容

```
setlocal tabstop=4
setlocal softtabstop=4
setlocal shiftwidth=4
setlocal textwidth=80
setlocal smarttab
setlocal expandtab 
```

我会输入什么代码`python.vim`来覆盖`inoremap : :;<Left>`我的`.vimrc`，这样当我按下`:`所有我得到的是一个单一的`:`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:33:26.660

所有特定于文件类型的设置都应进入：

```
~/.vim/after/ftplugin/<language>.vim 
```

使用此设置，您的设置“保证”在任何默认 ftplugin*之后*干净利落地应用。

放置您的 Python 特定设置：

```
setlocal tabstop=4
setlocal softtabstop=4
setlocal shiftwidth=4
setlocal textwidth=80
setlocal smarttab
setlocal expandtab 
```

进入这个文件：

```
~/.vim/after/ftplugin/python.vim 
```

以及您的特定于 CSS 的映射：

```
inoremap <buffer> : :;<Left> 
```

进入这个文件：

```
~/.vim/after/ftplugin/css.vim 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:29:47.197

```
你可以把它放在你的 python.vim 中：
   地图：

```

正如 Daan 所提到的，您还可以将 : 的映射放在 css 特定的 vim 文件中（例如 ~/.vim/syntax/css.vim ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:30:12.517

你可以在你的`.vimrc`

```
autocmd FileType css inoremap <silent> <buffer> : :;<Left> 
```

这只会在编辑 Vim 知道是 CSS 的文件时生效（`:set ft?`返回 CSS）

如果您不熟悉自动命令，推荐阅读有关自动命令的[Vim 文档。](http://vimdoc.sourceforge.net/htmldoc/autocmd.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T20:21:20.997

你应该检查一下`:help map-local`。

你可以把它放在`python.vim`：

```
iunmap <buffer> : 
```

或者，仅将`:`映射放入`css.vim`：

```
inoremap <buffer> : :;<Left> 
```

# c# - 是否可以以 XML 格式存储旋转文本？

> ID：14223185
> 
> 赞同：-1
> 
> 时间：2013-01-08T20:09:28.717
> 
> 标签：c#, xml, string, parsing

我想在 C# 中实现这个功能。

我有一个*旋转*格式的句子：

*{我的名字是 PapyRef，我是这个 {forum|website|site} 上的 {member|user|visitor}，我很喜欢它 | 我是管理员，我是这个{论坛|网站|网站}的{主管|管理员|版主}，我很喜欢它}*

我想生成一个包含这个旋转文本的 xml 文档。
例如：

```
<SpinItem>
    <Item>
       <Text>My name is PapyRef and I am a</Text>
    </Item>
    <SpinItem>
       <Text>member</Text>
       <Text>user</Text>
       <Text>visitor</Text>
    </SpinItem>
    <SpinItem>
       <Text>forum</Text>
       <Text>website</Text>
       <Text>site</Text>
    </SpinItem>
    <Item>
       <Text> and I am loving it </Text>
    </Item>
</SpinItem>
<SpinItem>
    <Item>
       <Text> I am admin and I am a </Text>
    </Item>
    <SpinItem>
        <Text>supervisor</Text>
        <Text>admin</Text>
        <Text>moderator</Text>
     </SpinItem>
     <SpinItem>
        <Text>forum</Text>
        <Text>website</Text>
        <Text>site</Text>
     </SpinItem>
     <Item>
        <Text> and I am loving it</Text>
     </Item>
</SpinItem> 
```

我想将旋转文本（斜体文本）转换为 XML 格式。

如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:22:49.433

[自上而下的解析](http://en.wikipedia.org/wiki/Top-down_parsing)应该对您有所帮助。这里有几个类似的问题：

*   [在 C# 中实现自顶向下解析器](https://stackoverflow.com/questions/8097383/implementing-a-top-down-parser-in-c-sharp)
*   [c#中自上而下的解析实现](https://stackoverflow.com/questions/2936500/top-down-parsing-implement-in-c-sharp)

# javascript - 获取表单元素作为关联数组？

> ID：14223186
> 
> 赞同：0
> 
> 时间：2013-01-08T20:09:29.573
> 
> 标签：javascript, html, forms, dom

我对 html 表单元素名称作为关联数组有疑问。

```
<form name="ff" action="" method="POST">
<input name="student[john]" value="John">
<input name="student[kofi]">
<input name="student[kwame]">
<input type="submit" name="submit">
</form>
<a onclick="alert(document.ff.student[john].value);">a<a> 
```

我收到 JS 错误：“未捕获的异常：ReferenceError：未定义的变量：john”

但是此代码适用于没有方括号的表单元素名称。

**升级版：**

我很困惑如何从无线电元素中获取值（它表示为一组具有相同名称的无线电）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:12:15.273

您必须使用方括号表示法来访问带有特殊字符的属性

```
<a onclick="alert(document.ff['student[john]'].value);">a<a> 
```

[**演示**](http://jsfiddle.net/yBH44/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:13:16.143

元素名称不是数组。

尝试：

```
document.ff.elements['student[john]'].value 
```

# iphone - 为什么发推文时没有显示文字？

> ID：14223200
> 
> 赞同：1
> 
> 时间：2013-01-08T20:10:39.680
> 
> 标签：iphone, ios, xcode

没有显示初始文本，是我输入错误还是遗漏了什么？我完全按照教程，没有豆子。

```
 if ([TWTweetComposeViewController canSendTweet]) {
         TWTweetComposeViewController *tweetComposer=[[TWTweetComposeViewController alloc]init];
                                                      [self presentModalViewController:tweetComposer animated:YES];
                                                      [tweetComposer setInitialText:@"#VOX"];
    } 
```

我试图让它在 ios5.1 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:23:23.103

看起来您可能需要`setInitialText`在提交[`TWTweetComposeViewController`](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html). 所以你会有：

```
if ([TWTweetComposeViewController canSendTweet]) {
         TWTweetComposeViewController *tweetComposer=[[TWTweetComposeViewController alloc]init];
                                                      [tweetComposer setInitialText:@"#VOX"];
                                                      [self presentModalViewController:tweetComposer animated:YES];

    } 
```

根据[TWTweetComposeViewController](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html) `setInitialText:`的文档，如果文本不适合当前可用的字符空间或**视图已呈现给用户**，则将返回 NO 。

# php - 如何向 symfony 2 表单添加一些额外的数据

> ID：14223204
> 
> 赞同：9
> 
> 时间：2013-01-08T20:10:52.017
> 
> 标签：php, forms, symfony, entity

我有一个名为我的实体的表单，`Book`并且我有一个在我的视图中显示表单的类型。在这种类型中，我有一些字段映射到我的实体中的属性。

现在我想添加另一个未映射到我的实体中的字段，并在表单创建期间为该字段提供一些初始数据。

**我的类型看起来像这样**

```
// BookBundle\Type\Book
public function buildForm(FormBuilderInterface $builder, array $options = null)
{
    $builder->add('title');
    $builder->add('another_field', null, array(
        'mapped' => false
    ));
} 
```

**表单是这样创建的**

```
$book = $repository->find(1);
$form = $this->createForm(new BookType(), $book); 
```

现在如何在表单创建期间提供一些初始数据？或者我如何更改表单的创建以将初始数据添加到`another_field`字段？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-05T21:18:31.467

我还有一个表单，它的字段大多与先前定义的实体匹配，但其中一个表单字段已映射设置为 false。

为了在控制器中解决这个问题，你可以很容易地给它一些初始数据，如下所示：

```
$product = new Product(); // or load with Doctrine/Propel
$initialData = "John Doe, this field is not actually mapped to Product";
$form = $this->createForm(new ProductType(), $product);
$form->get('nonMappedField')->setData($initialData); 
```

就那么简单。然后，当您处理表单数据以准备保存时，您可以通过以下方式访问非映射数据：

```
$form->get('nonMappedField')->getData(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T20:32:54.780

一个建议可能是在包含“another_field”数据的 BookType 上添加构造函数参数（或设置器），并在添加参数中设置“数据”参数：

```
class BookType 
{
    private $anotherFieldValue;

    public function __construct($anotherFieldValue)
    {
       $this->anotherFieldValue = $anotherFieldValue;
    }

    public function buildForm(FormBuilderInterface $builder, array $options = null)
    {
        $builder->add('another_field', 'hidden', array(
            'property_path' => false,
            'data' => $this->anotherFieldValue

        )); 
    }
} 
```

然后构造：

```
$this->createForm(new BookType('blahblah'), $book); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:54:06.293

您可以像这样更改请求参数以支持带有附加数据的表单：

```
$type = new BookType();

$data = $this->getRequest()->request->get($type->getName());
$data = array_merge($data, array(
    'additional_field' => 'value'
));

$this->getRequest()->request->set($type->getName(), $data); 
```

这样，您的表单将在渲染时为您的字段填写正确的值。如果您想提供许多字段，这可能是一个选项。

# autotools - 使用“make check”为使用程序二进制文件的测试启动 bash 脚本

> ID：14223208
> 
> 赞同：5
> 
> 时间：2013-01-08T20:11:18.610
> 
> 标签：autotools

我正在为我的 C++ 包使用 Autotools。我的包有一个二进制文件，例如称为“myprog”。我编写了一个 bash 脚本“test.bash”，其中包含一个功能测试。该脚本有 4 个步骤：（1）创建输入文件，（2）生成预期的输出文件，（3）在输入文件上启动“myprog”，（4）将“prog”的输出与预期的输出进行比较。

在第 3 步中，“test.bash”需要知道“myprog”的路径。如果我自己独立启动“test.bash”，我可以在命令行中提供“myprog”的路径作为选项。`make check`但是使用or时我能做什么`make distcheck`？

我正在阅读[Autotools/Automake 的手册](http://www.gnu.org/software/automake/manual/automake.html)。我想有一种方法可以使用由 设置的变量`configure`，但是我不知道如何使用它们，因此非常欢迎任何解决方案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:03:22.270

您可以使用`TESTS`变量`Makefile.am`并设置`AM_TESTS_ENVIRONMENT`变量以传递选项或为 bash 脚本设置环境变量。它在[此](http://www.gnu.org/software/automake/manual/html_node/Scripts_002dbased-Testsuites.html#Simple%20tests%20and%20color-tests)页面上以 autotools 手册的通常随意风格进行了描述。

由于`myprog`可能在源代码树之外构建，因此您可以设置一个变量以`$(top_builddir)/relative/path`在脚本中使用，或者使用该`pwd`命令作为脚本正在执行的目录。

# breeze - 与微风一起使用的最佳 UI 工具？

> ID：14223209
> 
> 赞同：2
> 
> 时间：2013-01-08T20:11:21.933
> 
> 标签：breeze

任何人都可以推荐一个 UI 工具集，无论是商业的还是开源的，都可以很好地与微风.js 配合使用？我曾尝试用 knockout-kendo.js 进行剑道，但效果不佳。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:00:28.260

在尝试了数据表、jqxGrid 和 KOGrid 之后，我正在使用 slickgrid。

如果您不使用 Durandal，那么我建议您使用 KOGrid。使用 Durandal 时渲染效果不佳。如果您不打算使用 Durandal，那么我建议您使用 slickgrid ......性能只是耸人听闻。这两个都是功能齐全的网格，但 slickgrid 的存在时间更长。

# ipad - 如何防止 facebook 登录页面接管我的主页应用程序？

> ID：14223210
> 
> 赞同：2
> 
> 时间：2013-01-08T20:11:21.977
> 
> 标签：ipad, web, facebook-social-plugins

我有一个 iPad 主页应用程序，我正在尝试集成一个类似 facebook 的按钮。如果用户已经登录，一切正常，但如果用户未登录，则 facebook 登录页面接管我的应用程序页面，登录后不会返回我的应用程序。有没有办法使用 iframe 进行 Facebook 登录？

我的应用程序是网络应用程序而不是本机 IOS 应用程序。它使用清单文件进行设置，用户将其添加到他们的主页。因为该应用程序可以有不同的 URL，而我们只想提供类似的功能，所以我无法注册该应用程序。

我想知道当用户点击like按钮时，facebook有没有办法在类似对话框**的iframe中打开登录页面？**现在我正在为like按钮使用社交插件，但如果用户没有登录到facebook，登录页面会替换我的网络应用程序。有没有办法让登录页面使用 iframe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:11:00.227

把它包装在一个`<div>`为我工作的地方

# objective-c - 如何使用下一个和上一个功能自定义 MKMapview 注释？

> ID：14223212
> 
> 赞同：0
> 
> 时间：2013-01-08T20:11:28.927
> 
> 标签：objective-c, annotations, mkmapview, mkannotationview

![在此处输入图像描述](../Images/5cee8b2c48b3f977075d86dbaa67768b.png)

嗨，我需要在 MKMapAnnotationView 中实现下一个和上一个功能，如图所示。我从[这里](http://blog.asolutions.com/2010/09/building-custom-map-annotation-callouts-part-1/)获得了用于制作自定义注释的参考，但是如何通过单击下一个和上一个按钮来更改下一个或上一个注释。请提供一些提示或关于这个的想法。我在这一点上是堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:47:03.953

为此，您可以使用`rightCalloutAccessoryView`and `leftCalloutAccessoryView`。

这是一个如何使用的示例`rightCalloutAccessoryView`。

```
 -(MKAnnotationView*)mapView:(MKMapView *)mapView viewForAnnotation:  (id<MKAnnotation>)annotation {

 if ([annotation isKindOfClass: [MKUserLocation class]]) {
    return nil;
}

static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView *pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];

[pinView setCanShowCallout:YES];
if([annotation isKindOfClass:[ASPinAnnotation class]])
{
    [pinView setPinColor:MKPinAnnotationColorRed];
}
else if([annotation isKindOfClass:[ASAddAutomatPin class]])
{
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:[annotation title] forState:UIControlStateNormal];
    [pinView setRightCalloutAccessoryView:rightButton];
    [pinView setPinColor:MKPinAnnotationColorPurple];
} 
```

并且要在点击 calloutAccessoryView 时获得通知，您必须在您的委托中使用此功能：

```
 -(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
   {

if([(UIButton*)control buttonType] == UIButtonTypeDetailDisclosure)
{
    ASAddViewController *addController = [[ASAddViewController alloc] init];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:addController];
    [addController setDelegate:self];
    [self.controller presentViewController:navController animated:YES completion:nil];
}

} 
```

# java - Android & LuaJ 3.0 绑定

> ID：14223219
> 
> 赞同：1
> 
> 时间：2013-01-08T20:11:43.360
> 
> 标签：java, android, lua, luaj

我正在使用 LuaJ 3.0 编写 Android 应用程序。如何将我的 Java 对象绑定到特定的 LuaClosure（对于整个脚本）？

卢阿代码：

```
local  = state or nil
state.foo("some string") 
```

Java代码：

```
Prototype prototype;

    try{

        InputStream stream = mContext.getResources().getAssets().open(LUA_ASSETS_DIRECTORY + "test.lua");
        prototype = LuaC.compile(stream, "script");

    } catch (IOException e) {

        return false;
    }

    LuaClosure closure = new LuaClosure(prototype, mLuaGlobals);
    // binding code
    closure.call(); 
```

我知道在 LuaJ 2.0（但不是 3.0）中有 LuaValue.setenv，而且我知道创建库并将它们绑定到 Globals。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T10:36:19.943

从 LuaJ 3.0 开始，修改闭包的能力从 API 中移除。如果您只想将您的 Java 对象绑定到特定的 Lua 环境，您可以创建多个[Globals](http://luaj.sourceforge.net/api/3.0/org/luaj/vm2/Globals.html)。然后，您可以将您的 Java 对象绑定到特定的 Globals，并从它们中的每一个创建一个闭包：

```
Globals mLuaGlobals1 = JsePlatform.standardGlobals();
Globals mLuaGlobals2 = JsePlatform.standardGlobals();
Globals mLuaGlobals3 = JsePlatform.standardGlobals();

// binding code
mLuaGlobals1.rawset("state", CoerceJavaToLua.coerce(yourJavaObject));
mLuaGlobals2.rawset("state", CoerceJavaToLua.coerce(anotherJavaObject));
// We don't expose anything to mLuaGlobals3 in this example

// Create closures
// We use exact same prototype (script code) for each of them
LuaClosure closure1 = new LuaClosure(prototype, mLuaGlobals1);
LuaClosure closure2 = new LuaClosure(prototype, mLuaGlobals2);
LuaClosure closure3 = new LuaClosure(prototype, mLuaGlobals3);

closure1.call(); // yourJavaObject is exposed through "state" variable
closure2.call(); // anotherJavaObject is exposed through "state" variable
closure3.call(); // "state" variable is absent 
```

是的，这是一个愚蠢的解决方案，所以如果你真的需要 LuaClosure 的控制，降级到 LuaJ 2.0.3 是最好的选择。

# maven - 为什么我不能从本地存储库部署到远程 Maven 存储库？

> ID：14223221
> 
> 赞同：18
> 
> 时间：2013-01-08T20:11:50.607
> 
> 标签：maven, deployment, repository

我正在使用 Maven 3.0.4 并希望将本地存储库中的某些内容部署到远程存储库，我已验证我可以访问该远程存储库。我正在使用以下命令……</p>

```
mvn -X deploy:deploy-file -DgroupId=org.directwebremoting -DartifactId=dwr  -Dversion=3.0.0-rc2 -Dpackaging=jar -Dfile=/Users/davea/.m2/repository//org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar  -Durl=dav:https://repository-myco.forge.cloudbees.com/private  -DrepositoryId=cloudbees-private 
```

但我收到了这个无用的错误消息。任何想法我还应该检查什么？错误之后是我的 ~.m2/settings.xml 文件。

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 02:44:56-0600) 
Maven home: /opt/apache-maven-3.0.4 
Java version: 1.6.0_37, vendor: Apple Inc.  
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
Default locale: en_US, platform encoding: MacRoman  
OS name: "mac os x", version: "10.7.5", arch: "x86_64", family: "mac"   
[INFO] Error stacktraces are turned on. 
[DEBUG] Reading global settings from /opt/apache-maven-3.0.4/conf/settings.xml  
[DEBUG] Reading user settings from /Users/davea/.m2/settings.xml    
[DEBUG] Using local repository at /Users/davea/.m2/repository   
[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for /Users/davea/.m2/repository   
[INFO] Scanning for projects... 
[DEBUG] Extension realms for project org.mainco.subco:myproject:war:1.0-SNAPSHOT: (none)    
[DEBUG] Looking up lifecyle mappings for packaging war from ClassRealm[plexus.core, parent: null]   
[DEBUG] Resolving plugin prefix deploy from [org.apache.maven.plugins, org.codehaus.mojo]   
[DEBUG] Resolved plugin prefix deploy to org.apache.maven.plugins:maven-deploy-plugin from POM org.mainco.subco:myproject:war:1.0-SNAPSHOT  
[DEBUG] === REACTOR BUILD PLAN ================================================ 
[DEBUG] Project: org.mainco.subco:myproject:war:1.0-SNAPSHOT    
[DEBUG] Tasks:   [deploy:deploy-file]   
[DEBUG] Style:   Aggregating    
[DEBUG] ======================================================================= 
[INFO]                                                                          
[INFO] ------------------------------------------------------------------------ 
[INFO] Building myproject-war 1.0-SNAPSHOT  
[INFO] ------------------------------------------------------------------------ 
[DEBUG] Resolving plugin prefix deploy from [org.apache.maven.plugins, org.codehaus.mojo]   
[DEBUG] Resolved plugin prefix deploy to org.apache.maven.plugins:maven-deploy-plugin from POM org.mainco.subco:myproject:war:1.0-SNAPSHOT  
[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]   
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]   
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]  
[DEBUG] === PROJECT BUILD PLAN ================================================ 
[DEBUG] Project:       org.mainco.subco:myproject:1.0-SNAPSHOT  
[DEBUG] Dependencies (collect): []  
[DEBUG] Dependencies (resolve): []  
[DEBUG] Repositories (dependencies): [cloudbees-private (https://repository-myco.forge.cloudbees.com/private/, releases+snapshots), maven2-repository.dev.java.net (http://download.java.net/maven/2/, releases), central (http://repo.maven.apache.org/maven2, releases)]  
[DEBUG] Repositories (plugins)     : [repository.jboss.org_thirdparty-releases (https://repository.jboss.org/nexus/content/repositories/thirdparty-releases, releases), repository.jboss.org_thirdparty-uploads (https://repository.jboss.org/nexus/content/repositories/thirdparty-uploads, releases), central (http://repo.maven.apache.org/maven2, releases)]    
[DEBUG] ----------------------------------------------------------------------- 
[DEBUG] Goal:          org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file (default-cli)   
[DEBUG] Style:         Regular  
[DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>   
<configuration> 
  <artifactId>${artifactId}</artifactId>    
  <classifier>${classifier}</classifier>    
  <classifiers>${classifiers}</classifiers> 
  <description>${generatePom.description}</description> 
  <file>${file}</file>  
  <files>${files}</files>   
  <generatePom default-value="true">${generatePom}</generatePom>    
  <groupId>${groupId}</groupId> 
  <javadoc>${javadoc}</javadoc> 
  <localRepository default-value="${localRepository}"/> 
  <offline default-value="${settings.offline}"/>    
  <packaging>${packaging}</packaging>   
  <pomFile>${pomFile}</pomFile> 
  <project default-value="${project}"/> 
  <repositoryId default-value="remote-repository">${repositoryId}</repositoryId>    
  <repositoryLayout default-value="default">${repositoryLayout}</repositoryLayout>  
  <retryFailedDeploymentCount default-value="1">${retryFailedDeploymentCount}</retryFailedDeploymentCount>  
  <sources>${sources}</sources> 
  <types>${types}</types>   
  <uniqueVersion default-value="true">${uniqueVersion}</uniqueVersion>  
  <updateReleaseInfo default-value="false">${updateReleaseInfo}</updateReleaseInfo> 
  <url>${url}</url> 
  <version>${version}</version> 
</configuration>    
[DEBUG] ======================================================================= 
[INFO]  
[INFO] --- maven-deploy-plugin:2.7:deploy-file (default-cli) @ myproject ---    
[DEBUG] Created new class realm maven.api   
[DEBUG] Importing foreign packages into class realm maven.api   
[DEBUG]   Imported: org.apache.maven.wagon.events < plexus.core 
[DEBUG]   Imported: org.sonatype.aether.transfer < plexus.core  
[DEBUG]   Imported: org.apache.maven.exception < plexus.core    
[DEBUG]   Imported: org.sonatype.aether.metadata < plexus.core  
[DEBUG]   Imported: org.codehaus.plexus.util.xml.Xpp3Dom < plexus.core  
[DEBUG]   Imported: org.sonatype.aether.collection < plexus.core    
[DEBUG]   Imported: org.sonatype.aether.version < plexus.core   
[DEBUG]   Imported: org.apache.maven.monitor < plexus.core  
[DEBUG]   Imported: org.apache.maven.wagon.repository < plexus.core 
[DEBUG]   Imported: org.apache.maven.repository < plexus.core   
[DEBUG]   Imported: org.apache.maven.wagon.resource < plexus.core   
[DEBUG]   Imported: org.codehaus.plexus.logging < plexus.core   
[DEBUG]   Imported: org.apache.maven.profiles < plexus.core 
[DEBUG]   Imported: org.sonatype.aether.repository < plexus.core    
[DEBUG]   Imported: org.apache.maven.classrealm < plexus.core   
[DEBUG]   Imported: org.apache.maven.execution < plexus.core    
[DEBUG]   Imported: org.sonatype.aether.artifact < plexus.core  
[DEBUG]   Imported: org.sonatype.aether.spi < plexus.core   
[DEBUG]   Imported: org.apache.maven.reporting < plexus.core    
[DEBUG]   Imported: org.apache.maven.usability < plexus.core    
[DEBUG]   Imported: org.codehaus.plexus.container < plexus.core 
[DEBUG]   Imported: org.codehaus.plexus.component < plexus.core 
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlSerializer < plexus.core   
[DEBUG]   Imported: org.apache.maven.wagon.authentication < plexus.core 
[DEBUG]   Imported: org.apache.maven.lifecycle < plexus.core    
[DEBUG]   Imported: org.codehaus.plexus.classworlds < plexus.core   
[DEBUG]   Imported: org.sonatype.aether.graph < plexus.core 
[DEBUG]   Imported: org.sonatype.aether.* < plexus.core 
[DEBUG]   Imported: org.apache.maven.settings < plexus.core 
[DEBUG]   Imported: org.codehaus.classworlds < plexus.core  
[DEBUG]   Imported: org.sonatype.aether.impl < plexus.core  
[DEBUG]   Imported: org.apache.maven.wagon.* < plexus.core  
[DEBUG]   Imported: org.apache.maven.toolchain < plexus.core    
[DEBUG]   Imported: org.sonatype.aether.deployment < plexus.core    
[DEBUG]   Imported: org.apache.maven.wagon.observers < plexus.core  
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParserException < plexus.core  
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParser < plexus.core   
[DEBUG]   Imported: org.apache.maven.configuration < plexus.core    
[DEBUG]   Imported: org.apache.maven.cli < plexus.core  
[DEBUG]   Imported: org.sonatype.aether.installation < plexus.core  
[DEBUG]   Imported: org.codehaus.plexus.context < plexus.core   
[DEBUG]   Imported: org.apache.maven.wagon.authorization < plexus.core  
[DEBUG]   Imported: org.apache.maven.project < plexus.core  
[DEBUG]   Imported: org.apache.maven.rtinfo < plexus.core   
[DEBUG]   Imported: org.codehaus.plexus.lifecycle < plexus.core 
[DEBUG]   Imported: org.codehaus.plexus.configuration < plexus.core 
[DEBUG]   Imported: org.apache.maven.artifact < plexus.core 
[DEBUG]   Imported: org.apache.maven.model < plexus.core    
[DEBUG]   Imported: org.apache.maven.* < plexus.core    
[DEBUG]   Imported: org.apache.maven.wagon.proxy < plexus.core  
[DEBUG]   Imported: org.sonatype.aether.resolution < plexus.core    
[DEBUG]   Imported: org.apache.maven.plugin < plexus.core   
[DEBUG]   Imported: org.codehaus.plexus.* < plexus.core 
[DEBUG]   Imported: org.codehaus.plexus.personality < plexus.core   
[DEBUG] Populating class realm maven.api    
[DEBUG] org.apache.maven.plugins:maven-deploy-plugin:jar:2.7:   
[DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.6:compile  
[DEBUG]    org.apache.maven:maven-project:jar:2.0.6:compile 
[DEBUG]       org.apache.maven:maven-settings:jar:2.0.6:compile 
[DEBUG]       org.apache.maven:maven-profile:jar:2.0.6:compile  
[DEBUG]       org.apache.maven:maven-artifact-manager:jar:2.0.6:compile 
[DEBUG]          org.apache.maven:maven-repository-metadata:jar:2.0.6:compile   
[DEBUG]       org.apache.maven:maven-plugin-registry:jar:2.0.6:compile  
[DEBUG]       org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile 
[DEBUG]          junit:junit:jar:3.8.1:compile  
[DEBUG]          classworlds:classworlds:jar:1.1-alpha-2:compile    
[DEBUG]    org.apache.maven:maven-model:jar:2.0.6:compile   
[DEBUG]    org.apache.maven:maven-artifact:jar:2.0.6:compile    
[DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.5.6:compile   
[DEBUG] Created new class realm plugin>org.apache.maven.plugins:maven-deploy-plugin:2.7 
[DEBUG] Importing foreign packages into class realm plugin>org.apache.maven.plugins:maven-deploy-plugin:2.7 
[DEBUG]   Imported:  < maven.api    
[DEBUG] Populating class realm plugin>org.apache.maven.plugins:maven-deploy-plugin:2.7  
[DEBUG]   Included: org.apache.maven.plugins:maven-deploy-plugin:jar:2.7    
[DEBUG]   Included: junit:junit:jar:3.8.1   
[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.5.6  
[DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.6 
[DEBUG]   Excluded: org.apache.maven:maven-project:jar:2.0.6    
[DEBUG]   Excluded: org.apache.maven:maven-settings:jar:2.0.6   
[DEBUG]   Excluded: org.apache.maven:maven-profile:jar:2.0.6    
[DEBUG]   Excluded: org.apache.maven:maven-artifact-manager:jar:2.0.6   
[DEBUG]   Excluded: org.apache.maven:maven-repository-metadata:jar:2.0.6    
[DEBUG]   Excluded: org.apache.maven:maven-plugin-registry:jar:2.0.6    
[DEBUG]   Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1   
[DEBUG]   Excluded: classworlds:classworlds:jar:1.1-alpha-2 
[DEBUG]   Excluded: org.apache.maven:maven-model:jar:2.0.6  
[DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:2.0.6   
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-deploy-plugin:2.7, parent: sun.misc.Launcher$AppClassLoader@69cd2e5f]  
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file' with basic configurator --> 
[DEBUG]   (f) artifactId = dwr  
[DEBUG]   (f) file = /Users/davea/.m2/repository/org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar  
[DEBUG]   (f) generatePom = true    
[DEBUG]   (f) groupId = org.directwebremoting   
[DEBUG]   (s) localRepository =        id: local    
      url: file:///Users/davea/.m2/repository/  
   layout: none 

[DEBUG]   (f) offline = false   
[DEBUG]   (f) packaging = jar   
[DEBUG]   (f) project = MavenProject: org.mainco.subco:myproject:1.0-SNAPSHOT @ /Users/davea/Dropbox/workspace/myproject/pom.xml    
[DEBUG]   (f) repositoryId = cloudbees-private  
[DEBUG]   (f) repositoryLayout = default    
[DEBUG]   (f) retryFailedDeploymentCount = 1    
[DEBUG]   (f) uniqueVersion = true  
[DEBUG]   (f) updateReleaseInfo = false 
[DEBUG]   (f) url = dav:https://repository-myco.forge.cloudbees.com/private 
[DEBUG]   (f) version = 3.0.0-rc2   
[DEBUG] -- end configuration -- 
[INFO] ------------------------------------------------------------------------ 
[INFO] BUILD FAILURE    
[INFO] ------------------------------------------------------------------------ 
[INFO] Total time: 0.662s   
[INFO] Finished at: Tue Jan 08 14:02:33 CST 2013    
[INFO] Final Memory: 4M/81M 
[INFO] ------------------------------------------------------------------------ 
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file (default-cli) on project myproject: Cannot deploy artifact from the local repository: /Users/davea/.m2/repository/org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar -> [Help 1] 
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file (default-cli) on project myproject: Cannot deploy artifact from the local repository: /Users/davea/.m2/repository/org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar 
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)  
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)  
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)  
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)  
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)  
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)  
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)  
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)   
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) 
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)  
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)    
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)    
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)    
    at java.lang.reflect.Method.invoke(Method.java:597) 
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)  
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)  
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)    
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)    
Caused by: org.apache.maven.plugin.MojoFailureException: Cannot deploy artifact from the local repository: /Users/davea/.m2/repository/org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar    
    at org.apache.maven.plugin.deploy.DeployFileMojo.execute(DeployFileMojo.java:283)   
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)    
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)  
    ... 19 more 
[ERROR]     
[ERROR]     
[ERROR] For more information about the errors and possible solutions, please read the following articles:   
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我的 ~.m2/settings.xml 文件

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                  http://maven.apache.org/xsd/settings-1.0.0.xsd">
 <profiles>
   <profile>
     <id>default</id>
     <repositories>
       <repository>
         <id>cloudbees-private</id>
         <name>Cloudbees private repo</name>
         <url>https://repository-myco.forge.cloudbees.com/private/</url>
       </repository>
     </repositories>
   </profile>
 </profiles>
 <activeProfiles>
   <activeProfile>default</activeProfile>
 </activeProfiles>

<servers>
    <server>
      <username>username</username>
      <password>password</password>
      <id>cloudbees-private</id>
    </server>
  </servers>

</settings> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-10-16T18:39:29.333

我不知道为什么，但是当您提供安装在本地存储库中的工件路径时，部署文件会给出该错误。（更准确地说，当文件参数是工件在本地存储库中的确切位置时）。

[http://grepcode.com/file/repo1.maven.org/maven2/org.apache.maven.plugins/maven-gpg-plugin/1.5/org/apache/maven/plugin/gpg/SignAndDeployFileMojo.java/#326](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.maven.plugins/maven-gpg-plugin/1.5/org/apache/maven/plugin/gpg/SignAndDeployFileMojo.java/#326)

将工件文件（通常是 jar）移动到其他地方并将此路径作为文件参数传递，可以解决问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-02-03T23:27:34.350

从 2.5 版开始，部署插件会检查要上传的文件是否位于本地存储库中，如果是，则拒绝上传。您可以指定插件的 2.4 版本作为解决方法：

```
mvn org.apache.maven.plugins:maven-deploy-plugin:2.4:deploy-file -DgroupId=org.directwebremoting -DartifactId=dwr -Dversion=3.0.0-rc2 -Dpackaging=jar -Dfile=/Users/davea/.m2/repository//org/directwebremoting/dwr/3.0.0-rc2/dwr-3.0.0-rc2.jar -Durl=dav:https://repository-myco.forge.cloudbees.com/private -DrepositoryId=cloudbees-private 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-14T10:17:02.623

我只是在尝试将大量依赖项从一个私有存储库迁移到另一个时遇到了这个问题。

我的解决方案是简单地建立一个到存储库位置的软链接（例如使用`ln -s`）并通过它引用工件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T01:24:01.463

嗯，我记得尝试将文件部署到我的 Cloudbees 存储库，但它也不起作用。当时，我通过他们的论坛向 Cloudbees 询问了这件事，他们的一位支持人员为我部署了它。

他们确实有一些关于它的 doco

[http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository](http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository)

我认为这更多的是关于 CLoudbees 服务器如何接受请求，而不是你做错了什么。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T00:05:21.137

我建议扭转你的做法。将其下载到本地并直接从下载的文件部署到存储库管理器，然后不要安装到本地存储库中，而是作为第一次测试，看看它是否可以从存储库管理器代理。

这将通过添加测试来改善您的流程，并为部署插件的限制提供解决方法，并为您节省 install-file 目标的执行。

我不确定为什么该限制是插件的一部分，但我怀疑与存储库管理器相比，它与本地存储库中组件的元数据有关。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-04T08:55:06.210

需要 wagon-webdav 连接器。创建一个临时 POM 文件以提供该信息：

```
<project>
   <modelVersion>4.0.0</modelVersion>
   <groupId>dummy</groupId>
   <artifactId>dummy</artifactId>
   <version>1</version>
   <build>
      <extensions>
         <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-webdav</artifactId>
            <version>1.0-beta-2</version>
         </extension>
      </extensions>
   </build>
</project> 
```

# oracle - 当 no_data_found 停止当前迭代并恢复下一个

> ID：14223224
> 
> 赞同：0
> 
> 时间：2013-01-08T20:12:16.043
> 
> 标签：oracle, plsql

我有如下代码：

```
DECLARE
rec emp%ROWTYPE
BEGIN
<<start_again>>
FOR rec IN c1 LOOP
    SELECT emp_index
    INTO   flag
    FROM   m_sme006
    WHERE  emp_id = rec.emp_id
           AND eff_dt = rec.eff_dt
           AND end_dt = rec.end_dt
           AND last_maint_ts > rec.last_maint_ts;
END LOOP;
EXCEPTION
    WHEN no_data_found THEN
      GOTO start_again;
END; 
```

每次发生 no_data_found 异常时，我都希望执行返回并继续下一次迭代。但它抛出`error PLS-00375: illegal GOTO statement`

我也可以将此行包含`dbms_output.Put_line('Outside exception block'rec.sme006_index);`在异常块中以查看发生的位置吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:23:29.390

您不能将程序流从异常块返回到执行块。您需要将异常块放入循环中，如下所示：

```
DECLARE
   rec emp%ROWTYPE
BEGIN
FOR rec IN c1 LOOP
    BEGIN
       SELECT emp_index
       INTO   flag
       FROM   m_sme006
       WHERE  emp_id = rec.emp_id
              AND eff_dt = rec.eff_dt
              AND end_dt = rec.end_dt
              AND last_maint_ts > rec.last_maint_ts;
    EXCEPTION
       WHEN no_data_found THEN
          dbms_output.Put_line('Outside exception block ' || rec.sme006_index);
    END;
END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:22:44.673

我相信你正在寻找这样的东西：

```
DECLARE
  rec emp%ROWTYPE
BEGIN
  FOR rec IN c1 LOOP
    BEGIN
        SELECT emp_index
        INTO   flag
        FROM   m_sme006
        WHERE  emp_id = rec.emp_id
           AND eff_dt = rec.eff_dt
           AND end_dt = rec.end_dt
           AND last_maint_ts > rec.last_maint_ts;
    EXCEPTION
        WHEN no_data_found THEN
          -- whatever code you want to log your error
    END;
  END LOOP;
END; 
```

# asp.net - 我可以在同一解决方案中从 mvc 应用程序引用一个空的 Web 应用程序吗？

> ID：14223228
> 
> 赞同：0
> 
> 时间：2013-01-08T20:12:28.170
> 
> 标签：asp.net, asp.net-mvc

如果我创建一个空白解决方案，添加一个 MVC 3 项目，然后将一个空 Web 应用程序添加到同一个解决方案，在 MVC 3 应用程序中添加对空 Web 应用程序项目的引用，我如何从空 Web 应用程序访问这些类。（如果有的话）

在我的 MVC 项目中，intellisense 似乎没有处理空的 Web 应用程序。

当然，我想问题是，“你为什么要引用一个空的 Web 应用程序？” 但是，我会假设我可以做到这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:20:55.427

一旦创建了对第二个项目（即空 Web 应用程序）的引用，理论上您就可以访问该项目内部的任何内容*。

您需要使用`using`关键字将对象带入范围，或者您需要通过它们的完全限定名称来调用它们，例如`Foo.Bar.FooBar`.

话虽如此，应用程序项目将需要访问其中的类。如果您有一个完全空的项目，则在另一个项目中将没有任何可访问的内容。

*   您将无法在非 ASP.NET 托管设置中访问依赖于 ASP.NET 的内容，例如`HTTPContext.Current`除非您的应用程序在 ASP.NET 上运行。

# php - 提交按钮后刷新 php 页面 - PHP - MySQL

> ID：14223230
> 
> 赞同：1
> 
> 时间：2013-01-08T20:12:28.003
> 
> 标签：php, html, forms, submit, page-refresh

我有一个页面需要每分钟多次刷新。该页面是一个回显的 php 表。![预览](../Images/9ada7a41a822d0fa7833dd15365c6411.png)

页面加载得很好，一切都很好，我使用了 META 标签 HTML，我使用了 PHP 中的带有刷新功能的 header 标签......但是出现了一个问题：

当我点击 Start Session 按钮时，刷新停止。并且下表没有更新。所以我必须手动刷新页面。这不是想要的效果。有人可以向我解释如何不断刷新页面。

编辑1：

使会话开始包含的代码

```
foreach($result as $row)
    {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td> <a href=student.php?anum=" . $row['anum'] . " target='_blank'>" .$row['anum'] . " </a></td>";
  echo "<td>" . $row['first'] . "</td>";
  echo "<td>" . $row['last'] . "</td>";
  echo "<td>" . $row['why'] . "</td>";  
  echo "<td>" . $row['comments'] . "</td>";
  echo "<td>" . $row['additional_req'] . "</td>";
  echo "<td>" . $row['signintime'] . "</td>";
  echo "
        <td>    <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
                    <select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value='Admin-John'>Admin - John</option>
                        <option value='Admin-Christine'>Admin - Christine</option>
                        <option value='Admin-Dawne'>Admin - Dawne</option>
                        <option value='Counselor-Cherie'>Counselor - Cherie</option>
                        <option value='Counselor-Tootie'>Counselor - Tootie</option>
                        <option value='Counselor-Debbie'>Counselor - Debbi</option>
                        <option value='FrontDesk-Delores'>Front Desk - Delores</option>
                        <option value='FrontDesk-Kiana'>Front Desk - Kiana</option>
                    </select>
            </td>

            <td> <input type='submit' name='submit' value='Start Session'></td>
            </form> </td>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:18:02.513

如果您希望在单击“开始会话”时刷新页面，则可以编辑提交按钮以拥有此 onClick 侦听器。它应该刷新页面。

```
<input type='submit' name='submit' value='Start Session' onClick="window.location.reload()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:19:44.960

您是否可以使用 Javascript 来达到预期的效果？我不太了解您正在做什么来确定这是否会清除您的更改（我的假设是：否）。

如果您能够使用 Javascript，您可以编写一个简单的函数来定期刷新页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T20:15:14.317

```
<form action="<?php echo $PHP_SELF; ?>" method="post"> 
```

或者

```
<form action="thispage.php" method="post"> 
```

# html - http 图像、字体等中止

> ID：14223232
> 
> 赞同：0
> 
> 时间：2013-01-08T20:12:31.913
> 
> 标签：html, http, get, abort

```
http://89.112.11.9/vol/ 
```

（对不起IP地址，我没有任何域）

如果你在 Chrome 中打开它，你会看到图像没有加载。在 devtools 的网络选项卡中，它说请求被中止，但在 FF 中它可以工作。

为什么？在哪里寻找问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:57:17.237

当我关闭 JavaScript（Safari 和 Chrome）时似乎可以工作。也许与包含的脚本有关？

# shell - 以树的形式递归列出所有目录

> ID：14223233
> 
> 赞同：17
> 
> 时间：2013-01-08T20:12:32.353
> 
> 标签：shell

我想`tree`使用 Shell 脚本模拟一个命令，该命令以这种格式递归地显示所有目录：

```
.
|-- Lorem
|-- Lorem
|-- Lorem
    |-- Lorem
    |-- Lorem
|-- Lorem
`-- Lorem 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-08T20:17:59.383

尝试这样做（不完全相同的输出，但非常接近）：

```
find ./ -type d -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g' 
```

来自[http://mlsamuelson.com/content/tree-approximation-using-find-and-sed](http://mlsamuelson.com/content/tree-approximation-using-find-and-sed)

## 用[awk](/questions/tagged/awk "显示标记为“awk”的问题")

```
find . -type d -print 2>/dev/null|awk '!/\.$/ {for (i=1;i<NF;i++){d=length($i);if ( d < 5  && i != 1 )d=5;printf("%"d"s","|")}print "---"$NF}'  FS='/' 
```

见[http://www.unix.com/shell-programming-scripting/50806-directory-tree.html](http://www.unix.com/shell-programming-scripting/50806-directory-tree.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-05T10:45:37.613

您可以启动：

```
tree . 
```

或者

```
tree $absolute/path/of/your/dir 
```

如果要显示隐藏文件。

默认情况下，树不打印隐藏文件（以点“。”开头的文件），只需键入：

```
tree -a . 
```

这就是 tree 命令的作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-23T14:11:41.977

修改 sputnick 的答案以更接近您的原始格式（我更喜欢）：

```
find ./ -type d -print | sed -e 's;[^/]*/; /;g;s;/ ;    ;g;s;^ /$;.;;s; /;|-- ;g' 
```

现在唯一的区别是最后一行不以反引号开头：

```
.
|-- Lorem
|-- Lorem
|-- Lorem
    |-- Lorem
    |-- Lorem
|-- Lorem
|-- Lorem 
```

## 用[awk](/questions/tagged/awk "显示标记为“awk”的问题")

```
find . -type d -print 2>/dev/null | awk '!/\.$/ {for (i=1;i<NF-1;i++){printf("    ")}printf("|-- ")};{print $NF}' FS='/' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-08T04:25:32.430

基于来自[http://www.unix.com/shell-programming-scripting/50806-directory-tree.html的 awk 修改](http://www.unix.com/shell-programming-scripting/50806-directory-tree.html)

```
pwd;find . -type d -print 2>/dev/null|awk '!/\.$/ {for (i=1;i<NF-1;i++){printf("│   ")}print "├── "$NF}'  FS='/' 
```

输出看起来更类似于`tree`：

```
/etc
├── sudoers.d
├── susehelp.d
│   ├── htdig
├── sysconfig
│   ├── SuSEfirewall2.d
│   │   ├── services
│   ├── network
│   │   ├── if-down.d
│   │   ├── if-up.d
│   │   ├── providers
│   │   ├── scripts
│   ├── scripts
├── sysctl.d
├── systemd
│   ├── system
│   │   ├── default.target.wants
│   │   ├── getty.target.wants
│   │   ├── multi-user.target.wants 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:07:06.740

ls -R | grep ":$" | sed -e 's/:$//' -e 's/[^-][^/]*//--/g' -e 's/^/ /' -e 's/-/|/ '

取自这里：[http ://www.centerkey.com/tree/](http://www.centerkey.com/tree/)

# javascript - 标记空元素的最佳方法是什么？

> ID：14223236
> 
> 赞同：-1
> 
> 时间：2013-01-08T20:12:39.013
> 
> 标签：javascript, semantic-web, semantic-markup, xhtml

假设一个空的 div 或 span 将被 JavaScript 用来添加一些东西，如

```
<div id='id'></div> 
```

从语义上讲它是错误的，因为它不能为空（我暂时忘记了原因）。那我们用

```
<div id='id'>&nbsp;</div> 
```

直到，如果，JavaScript 发挥它的魔力。

但我也不喜欢它，因为那里没有真正的空间。我会做

```
<div id='id' /> 
```

但[自闭标签](https://stackoverflow.com/questions/348736/is-writing-self-closing-tags-for-elements-not-traditionally-empty-bad-practice/348818#348818 "为传统上不是空的元素编写自闭标签是不好的做法吗？")解释了它的问题。

还有其他我想不到的解决方案吗？或者是 真的是最好的吗？

请注意，这是关于 HTML 文档，而不是浏览器如何呈现它。对于浏览器，我们只是将其设置为不渲染，然后用 JS 显示。

编辑：是的， div 在语义上是错误的。它意味着其中包含一些内容，否则它在语义上是无用的。[Eric Meyer CSS Diagnostic](http://meyerweb.com/eric/tools/css/diagnostics/demo-not.html "埃里克迈耶 CSS 诊断")这么说。如果我理解错了，与其否定我，不如教我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:15:07.817

语义错误？为什么？DIV 并不意味着什么。空`H1`在语义上是错误的，但不是 DIV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:21:35.780

如果架构允许

```
<span /> is equivalent to <span></span>
only in XML documents (read xhtml in your case) 
```

第二：

```
<span /> is as empty as <span></span> is 
```

因为在这两种情况下 childNodes 长度都是 0

你需要`&nbsp;`因为什么？

# authentication - 基于 Jsch 证书的身份验证和登录身份验证取消

> ID：14223239
> 
> 赞同：1
> 
> 时间：2013-01-08T20:12:48.370
> 
> 标签：authentication, ssh, jsch

Jsch，基于 private.ppk 的登录。

目前我有以下代码来 ssh 登录，但由于不提供密钥而出现异常。

以下是我得到的错误

```
om.jcraft.jsch.JSchException: Auth cancel

 JSch jsch = new JSch();
        Session session = jsch.getSession(user_name, host, 22);

        UserInfo ui = new SSHUserInfo(password, true);
        session.setUserInfo(ui);
        //connect to remove server
        session.connect();

        //sudo login bamboo
        if (null != session && session.isConnected()) {
            session.disconnect();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:20:28.717

```
JSch jsch = new JSch();

// Here privateKey is a file path like "/home/me/.ssh/secret_rsa "
// passphrase is passed as a string like "mysecr"
jsch.addIdentity(privateKey, passphrase);

session = jsch.getSession(user, host, port);
session.setConfig("StrictHostKeyChecking", "no"); 
// Or yes, up to you. If yes, JSch locks to the server identity so it cannot
// be swapped by another with the same IP.

session.connect();
channel = session.openChannel("shell");
out = channel.getOutputStream();
channel.connect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:30:30.280

文件后缀“.ppk”意味着您正在尝试使用 Putty 的私钥，我猜。

JSch 从 0.1.49 开始支持 Putty 的私钥，如果您的密钥已加密，则必须在您的环境中安装“Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files”[1]。

然后，如果您经常使用 Pageant，您可能有兴趣尝试 jsch-agent-proxy[2]。

```
[1] http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html
[2] https://github.com/ymnk/jsch-agent-proxy 
```

# asp.net - 当我切换到 https 时，我的页面在 Mono + Apache 中返回 404 错误

> ID：14223240
> 
> 赞同：1
> 
> 时间：2013-01-08T20:12:50.200
> 
> 标签：asp.net, apache, https, mono, apache2

我正在为 ASP.Net 使用 Mono + Apache，当我转到我网站的 https 版本时，它会询问我是否要接受证书（我检查以永久保存它），但随后它显示 404 错误页面！我的页面都没有显示在 https 下。我该如何解决？

（您需要我发布什么信息来帮助诊断？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:36:08.967

我发现了问题：Apache 有一个默认的“示例”虚拟主机文件来处理 SSL 请求。即使我创建了自己的，那个优先，所以那个虚拟主机的目录是为 SSL 服务的。

# drupal - 链接到文章或页面的面板

> ID：14223244
> 
> 赞同：0
> 
> 时间：2013-01-08T20:13:10.840
> 
> 标签：drupal

Drupal 新手。安装它，将 Bartik 主题设置为默认，创建了几个带有菜单的页面。现在我想做这样的事情：

![在此处输入图像描述](../Images/f310168140a28870bc573fa57c61613d.png)

带有描述的图片链接到其他页面或文章。他们每个人都应该有自定义的大小。最简单的方法是什么？

为了测试，我在我的主页上创建了 4 篇文章，但显然它们是彼此重叠的。当我添加块时也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:50:02.830

没有比安装和使用[Views](http://drupal.org/project/views)模块更好的选择了。您可以使用它提供的漂亮 UI 来准确实现您想要的。

> 如果你需要视图
> 
> *   你喜欢默认的首页视图，但你发现你想以不同的方式对其进行排序。你喜欢默认的分类法/术语视图，但你发现你想对它进行不同的排序；例如，按字母顺序。
> *   您使用 /tracker，但您想将其限制为特定类型的帖子。您喜欢“文章”模块的想法，但它不会以您喜欢的方式显示文章。
> *   您想要一种显示具有某种特定类型的 5 个最新帖子的块的方法。
> *   您想提供“未读的论坛帖子”。
> *   您想要一个类似于典型的 Movable Type/Wordpress 档案的月度档案，它以“月，YYYY (X)”的形式显示一个链接，其中 X 是该月的帖子数，并将它们显示在一个块中。这些链接指向该月的简单帖子列表。

PS - Views 模块是 Drupal 中最常用和安装的模块，因此，它将成为 Drupal 8 核心的一部分。

# ruby-on-rails - Rails 中的 POST 请求

> ID：14223245
> 
> 赞同：1
> 
> 时间：2013-01-08T20:13:12.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, post, http-post

我需要以一种有点奇怪（说宽松）的格式创建一个发布请求。要发送的确切请求应采用以下格式

> [https://xyz.com/ping?app_id=123&adv_id=345&event=sale&event_data="amt=30_USD;user_id=204050](https://xyz.com/ping?app_id=) "

将发布请求发送到以下格式的 url 很容易：-

> [https://xyz.com/ping?app_id=123&adv_id=345&event=sale&amt=30_USD&user_id=204050](https://xyz.com/ping?app_id=) _

这可以使用这样的代码来实现：-

```
Net::HTTP.post_form(URI.parse("http://xyz.com/ping"), params) 
```

其中， params 变量被适当地填充（散列）。

我应该进行哪些修改来解释与正常情况相比的这种变化，特别是考虑到事件数据周围的双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:19:53.483

阅读并调整以下链接中的信息。在经历了它们之后，我可以推断出 4 种可能的方法来做到这一点：

1.  使用机械化。见链接 1
2.  使用 Net::HTTP 从您的控制器发出一个 post 请求。请参阅链接 2 - 3（第 3 个答案）。
3.  发布包含散列或数组的表单数据。见链接 4 - 7
4.  将隐藏字段添加到将包含额外数据的表单。见链接 8
5.  使用参数合并模式，即 Link 9

[使用 Ruby/Rails 以编程方式将表单数据发布到另一个站点](https://stackoverflow.com/questions/8436879/using-ruby-rails-to-programmatically-post-form-data-to-another-site)

[将 POST 数据从 rails 中的控制器提交到另一个网站](https://stackoverflow.com/questions/1195962/submitting-post-data-from-the-controller-in-rails-to-another-website)

[从 Rails 控制器发布并重定向到外部站点？](https://stackoverflow.com/questions/10614502/post-and-redirect-to-external-site-from-rails-controller)

[http://rails.nuvvo.com/lesson/6371-action-controller-parameters](http://rails.nuvvo.com/lesson/6371-action-controller-parameters)

[http://www.developer.com/lang/rubyrails/article.php/3804081/Techniques-to-Pass-and-Read-URL-Parameters-Using-Rails.htm](http://www.developer.com/lang/rubyrails/article.php/3804081/Techniques-to-Pass-and-Read-URL-Parameters-Using-Rails.htm)

[http://guides.rubyonrails.org/action_controller_overview.htm](http://guides.rubyonrails.org/action_controller_overview.htm)（第 3.1 节哈希和数组参数，然后第 8 节请求伪造保护）

[Rails：如何让表单提交记录数组？](https://stackoverflow.com/questions/6221207/rails-how-do-i-make-a-form-submit-an-array-of-records)

[Ruby on Rails：以表单提交数组](https://stackoverflow.com/questions/3089849/ruby-on-rails-submitting-an-array-in-a-form)

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_​​field](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)

[发送查询字符串参数作为表单帖子的一部分](https://stackoverflow.com/questions/2185898/send-querystring-params-as-part-of-form-post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:53:37.973

您需要确保`event_data`正确转义参数才能执行此操作。我很确定呼叫`post_form`已经为您完成了这项工作。

```
params["app_id"] = 123
params["adv_id"] = 345
params["event"] = 'sale'
params["event_data"] = '"amt=30_USD;user_id=204050"'
Net::HTTP.post_form(URI.parse("http://notify.tapsense.com/ads/ping"), params) 
```

那应该或多或少为你做。

# list - 无法推断（a ~ [a]）

> ID：14223246
> 
> 赞同：2
> 
> 时间：2013-01-08T20:13:13.427
> 
> 标签：list, haskell, reverse, signature, type-deduction

我尝试编写一个函数，它接受一个子列表列表，反转子列表并返回串联的反转子列表。这是我的尝试：

```
conrev :: Ord a => [[a]] -> [a]
conrev [[]] = []
conrev [[a]] = reverse [a]
conrev [(x:xs)] = reverse x ++ conrev [xs]

main = putStrLn (show (conrev [[1,2],[],[3,4]])) 
```

我收到此错误：

```
3.hs:4:27:
    Could not deduce (a ~ [a])
    from the context (Ord a)
      bound by the type signature for conrev :: Ord a => [[a]] -> [a]
      at 3.hs:1:11-31
      `a' is a rigid type variable bound by
      the type signature for conrev :: Ord a => [[a]] -> [a] at 3.hs:1:11
    In the first argument of `reverse', namely `x'
    In the first argument of `(++)', namely `reverse x'
    In the expression: reverse x ++ conrev [xs] 
```

我究竟做错了什么？第二个问题是 - 类型签名可以更通用吗？我必须写得尽可能通用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:43:31.763

在等式中

```
conrev [(x:xs)] = reverse x ++ conrev [xs] 
```

你匹配一个包含单个元素的列表，这是一个非空列表`x:xs`。所以，给定类型

```
conrev :: Ord a => [[a]] -> [a] 
```

该列表`x:xs`必须具有类型`[a]`，因此`x :: a`。

现在，您调用`reverse x`，这意味着`x`必须是一个列表，`x :: [b]`。然后你连接

```
reverse x :: [b] 
```

和

```
conrev [xs] :: [a] 
```

从中得出`b`必须与 的类型相同`a`。但早先已经确定了`a ~ [b]`。总而言之，等式要求`a ~ [a]`。

如果你没有写（不必要的）`Ord a`约束，你会得到不那么不透明

```
Couldn't construct infinite type a = [a] 
```

错误。

如果您删除了一些外部，您的实现将起作用`[]`：

```
conrev :: Ord a => [[a]] -> [a]
conrev [] = []
conrev [a] = reverse a
conrev (x:xs) = reverse x ++ conrev xs 
```

但更好的实现是

```
conrev = concat . map reverse 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:25:13.407

您的第二个模式与您想要的不匹配，看起来您将类型的结构误认为是值的结构。

`[[a]]`作为类型的意思是“某种类型的列表的列表`a`”

`[[a]]`作为模式意味着“匹配包含*单个*列表的列表，该列表包含将*绑定到名称的**单个*元素。 *`a`*

 *编辑：如果我理解你想要做的中间情况实际上是多余的。第三种情况将处理非空列表，第一种情况将处理空列表。没有必要为单例列表制作另一种情况。

编辑2：

第三种情况的执行还有一个问题。

```
conrev :: Ord a => [[a]] -> [a]
conrev [(x:xs)] = reverse x ++ conrev [xs] 
```

给定您看到的类型，它`x`必须是 type`[a]`并且`xs`必须是 type `[[a]]`。所以写作`conrev [xs]`是将一个类型的值传递`[[[a]]]`给`conrev`. 这是您的类型错误的来源。您隐含地声明它与调用`[a]`相同的类型。`a``convrev [xs]`*

# jquery - jQuery强制空间？

> ID：14223247
> 
> 赞同：1
> 
> 时间：2013-01-08T20:13:14.647
> 
> 标签：jquery

只是想知道为什么这里需要空间..

```
.load(url + (' #newsItem') 
```

我怎么知道什么时候需要空间，什么时候不需要？可能有什么好的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:15:16.500

如果没有空格，jQuery 就不会知道`#newsItem`不是 URL 的一部分，而是您要加载页面片段的指示。

请参阅[文档](http://api.jquery.com/load/)：

> **加载页面片段**
> 
> .load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。
> 
> 我们可以修改上面的示例以仅使用获取的文档的一部分：
> 
> 1 $('#result').load('ajax/test.html #container');
> 
> 当这个方法执行时，它会检索 ajax/test.html 的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。该元素及其内容被插入到 ID 为 result 的元素中，其余检索到的文档将被丢弃。

# javascript - 在three.js中将网格添加到场景之前如何设置网格的位置

> ID：14223249
> 
> 赞同：44
> 
> 时间：2013-01-08T20:13:18.110
> 
> 标签：javascript, three.js

在three.js中，我想在场景中的某个位置添加一个网格

我试过了：

```
// mesh is a THREE.Mesh
scene is a THREE.Scene
scene.add(mesh)
scene.updateMatrixWorld(true)
mesh.matrixWorld.setPosition(new THREE.Vector3(100, 100, 100))
scene.updateMatrix() 
```

但它没有影响任何东西。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-08T20:23:33.133

我建议您在这里查看文档：http://threejs.org/docs/#Reference/Objects/Mesh [正如](https://threejs.org/docs/#api/objects/Mesh) 您在文档页面顶部看到的那样，Mesh 继承自“ *Object3D* ”。这意味着您可以使用 Object3D 提供的所有方法或属性。因此，单击文档页面上的“ *Object3D* ”链接并检查属性列表。你会发现属性“ *.position* ”。点击“ *.position* ”查看它是什么数据类型。呸..它的*Vector3*。

因此，请尝试执行以下操作：

```
//scene is a THREE.Scene
scene.add(mesh);
mesh.position.set(100, 100, 100); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-03-20T20:30:32.803

我之前在github上看到过。（三.js r71）

```
mesh.position.set(100, 100, 100); 
```

并且可以为个人完成

```
mesh.position.setX(200);  
mesh.position.setZ(200); 
```

参考：[https ://threejs.org/docs/#api/math/Vector3](https://threejs.org/docs/#api/math/Vector3)

**详细解释如下：**

因为 mesh.position 是“Vector3”。Vector3() 有 setX() setY() 和 setZ() 方法。我们可以这样使用它。

```
mesh.position = new THREE.Vector3() ; //see position is Vector3()
vector1 = new THREE.Vector3();   

mesh.position.setX(100);  //or  this
vector1.setX(100)         // because all of them is Vector3()
camera1.position.setZ(100); // or this
light1.position.setY(100)   // applicable to any object.position 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-16T13:34:31.100

我更喜欢用来**`Vector3`**设置位置。

```
 let group = new THREE.Group();

   // position of box
   let vector = new THREE.Vector3(10, 10, 10);

     // add wooden Box
   let woodenBox = new THREE.Mesh(boxGeometry, woodMaterial);

    //update postion
    woodenBox.position.copy(vector);

  // add to scene
   group.add(woodenBox)
   this.scene.add(group); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-20T09:56:20.223

如果有人正在寻找从 Vector3 更新位置的方法

```
const V3 = new THREE.Vector3(0,0,0)            // Create variable in zero position
const box = new THREE.Mesh(geometry, material) // Create an object
Object.assign(box.position, V3)                // Put the object in zero position 
```

或者

```
const V3 = new THREE.Vector3(0,0,0)            // Create variable in zero position
const box = new THREE.Mesh(geometry, material) // Create an object
box.position.copy(V3) 
```

# php - 如何在 php 中通过电子邮件发送文件附件（我的代码有什么问题）

> ID：14223250
> 
> 赞同：-3
> 
> 时间：2013-01-08T20:13:31.823
> 
> 标签：php, email-attachments

我对 php 相当陌生，并且不熟悉电子邮件标头。这是一个基于我遇到/更新以使用文件对象的一些代码的函数。结果是“文件发送成功得到回显，但电子邮件从未收到。我只能假设这与这个东西生成的电子邮件标题有关。希望有人看到这里出了什么问题：

```
function mail_attachment ($from , $to, $subject, $message, $attachment){ 
    $fileatt = $attachment["tmp_name"];
    $fileatt_type = "application/octet-stream";
    $fileatt_name = $attachment["name"]; 
    $email_from = $from;
    $subject = "New Attachment Message"; 
    $email_subject = $subject;
    $email_to = $to;
    $headers = "From: ".$email_from;   
    $file = fopen($fileatt,'rb'); 
    $data = fread($file,filesize($fileatt)); 
    fclose($file);
    $semi_rand = md5(time()); 
    $mime_boundary = "Multipart_Boundary_x{$semi_rand}x"; 
    $headers .= "\nMIME-Version: 1.0\n" . 
                "Content-Type: multipart/mixed;\n" . 
                "boundary=\"{$mime_boundary}\"";
    $email_message .= "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . 
                "Content-Type:text/html; charset=\"iso-8859-1\"\n" . 
                "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
    $data = chunk_split(base64_encode($data)); 
    $email_message .= "--{$mime_boundary}\n" . 
                "Content-Type: {$fileatt_type};\n" . 
                "name=\"{$fileatt_name}\"\n" . 
                "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n" 
                . "--{$mime_boundary}--\n";   
    $ok = mail($email_to, $email_subject, $email_message, $headers);   
    if($ok) { echo "File Sent Successfully.";} 
    else { die("Sorry but the email could not be sent. Please go back and try again!"); } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:19:36.367

[使用 phpMailer()](http://phpmailer.worxware.com)

```
<?php 
require_once('phpmailer.php');

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch
$mail->IsSendmail(); // telling the class to use SendMail transport

try {
    $mail->AddReplyTo('email@example.com', 'First Last');
    $mail->AddAddress('John@example.com', 'John Doe');

    $mail->SetFrom('email@example.com', 'First Last');
    $mail->Subject  =  "Subject Line";
    $mail->AltBody    = "Alternate Text"; // optional, comment out and test

    $mail->WordWrap     =   50; // set word wrap    
    $mail->Body = "This is the body of the email";
    $mail->IsHTML(true); // send as HTML

    // Single or Multiple File Attachments
    $mail->AddAttachment('../path-to-file.pdf', 'File-Name.pdf');
    $mail->Send(); // Try to send email
    //echo "Message Sent OK<p></p>\n";
    } catch (phpmailerException $e) {
        echo $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
        echo $e->getMessage(); //Boring error messages from anything else!
}
// end try

?> 
```

# objective-c - 块内释放的对象

> ID：14223251
> 
> 赞同：1
> 
> 时间：2013-01-08T20:13:35.317
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我很确定我知道发生了什么，但是我想知道是否有阻止它发生的好方法。

基本上，我有一个类方法，它从核心数据存储中查找某些内容，如果不存在，则尝试从 Web 服务器获取它。核心数据查找和请求在托管对象上下文`performBlock`方法中执行。

我有以下代码块：

```
[context performBlock:^{
    __block NSError *error;
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:NSStringFromClass([self class])];
    [request setSortDescriptors:@[[[NSSortDescriptor alloc] initWithKey:key ascending:asc selector:@selector(caseInsensitiveCompare:)]]];

    NSFetchedResultsController *controller = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                                 managedObjectContext:context
                                                                                   sectionNameKeyPath:keyPath
                                                                                            cacheName:nil];

    [controller performFetch:&error];

    if (!controller.fetchedObjects || controller.fetchedObjects.count == 0) {
        // Nothing found or an error, query the server instead
                NSString *url = [NSString stringWithFormat:@"%@%@", kMP_BASE_API_URL, [self baseURL]];
        MPRequest *objRequest = [MPRequest requestWithURL:url];

        [objRequest setRequestMethod:@"GET"];
        [MPUser signRequest:objRequest];

        [objRequest submit:^(MPResponse *resp, NSError *err) {
            if (err) {
                block(nil, err);
            } else {
                NSArray *objects = [self createListWithResponse:resp];
                         objects = [MPModel saveAllLocally:objects forEntityName:NSStringFromClass([self class])];
                [controller performFetch:&error];
                block(controller, nil);
            }

        }];
    } else {
        // Great, we found something :)
        block (controller, nil);
    }
}]; 
```

正在发生的事情是创建并触发了 MPRequest 对象，但是 submit 方法触发了异步请求，因此几乎立即返回。我假设 ARC 正在释放 MPRequest 对象。执行请求时，内部请求对象的委托不再存在，因为 ARC 已将其释放（MPRequest 对象是它所拥有的内部请求的委托）。因此，不会调用提交方法提供的块。

有什么方法可以防止 ARC 在不使请求同步的情况下执行此操作？

**编辑**

的`submit`方法`MPRequest`看起来像这样

```
_completionBlock = block;
   _responseData = [[NSMutableData alloc] init];

[self prepareRequest];

[self prepareRequestHeaders];
_connection = [[NSURLConnection alloc] initWithRequest:_urlRequest
                                              delegate:self];
[self requestStarted]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:12:03.990

您的`MPRequest`对象需要在连接运行时保持活动状态。最简单的方法可能是在连接开始时保留自己，然后在调用完成块后释放自己。在 ARC 下，最简单的方法是

```
CFRetain((__bridge CFTypeRef)self); 
```

和

```
CFRelease((__bridge CFTypeRef)self); 
```

从概念上讲，运行循环使请求保持活动状态。就是这样`NSURLConnection`运作的。但由于`MPRequest`它实际上并没有附加到运行循环，它只是一个包装器`NSURLConnection`，你需要做一些工作来让它在同一时间段内保持活动状态。

另请注意，`NSURLConnection`需要将其添加到相应的运行循环中。便捷方法会将其添加到当前线程的运行循环中，但如果您在后台队列中，那将无法正常工作。你可以使用类似的东西

```
_connection = [[NSURLConnection alloc] initWithRequest:request delegate:delegate startImmediately:NO];
[_connection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T20:36:30.570

将此 MPRequest 设置在`context performBlock:^{...}`类似之外：

```
__strong MPRequest = // allocate or set the MPRequest.
[context performBlock:^{...} 
```

现在一旦`performBlock`完成， MPRequest 将不会被释放，并且仍然设置为您在`__strong`子句中指定的任何变量。

# eclipse - Eclipse CDT 禁用代码背景颜色

> ID：14223252
> 
> 赞同：8
> 
> 时间：2013-01-08T20:13:38.807
> 
> 标签：eclipse, preprocessor, color-scheme

尝试查看禁用代码时遇到奇怪的代码着色问题。

`#ifdef`对于使用or语句禁用的代码块`#ifndef`，我得到灰色/白色背景：

![禁用代码的 Eclipse 灰色背景](../Images/0c9e6a54a8996114308ee0726ae85cd6.png)

但是，启用代码后，一切正常：

![已启用代码的 Eclipse 正确背景](../Images/d00447e50eee737c8baed6057a2357e6.png)

我在哪里可以在属性菜单中找到这个颜色属性？我找不到有关禁用代码的任何信息，并且它不在任何预处理器颜色编码菜单下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:54:29.493

正如[这里](https://github.com/eclipse-color-theme/eclipse-color-theme/issues/35)所建议的：

> 首选项 -> C/C++ -> 编辑器，选中“突出显示非活动代码”，外观颜色选项：非活动代码突出显示。

# android - 画布绘制TextView旋转，放置

> ID：14223253
> 
> 赞同：0
> 
> 时间：2013-01-08T20:13:37.593
> 
> 标签：android, canvas, textview, draw

我有这个代码：

```
public class ZeichenView extends ImageView implements OnTouchListener{
@TargetApi(11)
public final Bitmap getScreenCopy() {
    measure(getWidth(), getHeight());
    layout(0, 0, getWidth(), getHeight());
    Bitmap bitmap = Bitmap.createBitmap(
        getWidth(),
        getHeight(),
        Bitmap.Config.ARGB_8888
        );

    Canvas temporaryCanvas = new Canvas(bitmap);
    bildflaeche.draw(temporaryCanvas);
    messAusgabe.draw(temporaryCanvas);
    referenzAusgabe.draw(temporaryCanvas);
    draw(temporaryCanvas); 

    return bitmap;
}} 
```

它在一个画布上绘制所有元素并返回一个位图 - 但 TextView 属性如：旋转和放置是错误的（未）绘制。为什么不。属性：文本是正确的。

referenzAusgabe 和 messAusgabe 是 TextViews。bildflaeche 是一个 ImageView。之后我将所有内容都放在一张画布上以生成一张位图。

用户更改了 TextView 的旋转和位置，所以我不知道它们会在哪里。如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:42:59.620

也许尝试使用：

```
temporaryCanvas.drawtext() 
```

并给它你想要的坐标。

也可以旋转你可以保存（）->旋转画布->加载（）

# ios - UITableViewScrollPositionNone 不滚动表格视图

> ID：14223259
> 
> 赞同：7
> 
> 时间：2013-01-08T20:14:16.053
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

使用时`selectRowAtIndexPath:animated:scrollPosition:`，我是传入`UITableViewScrollPositionNone`。尽管有这个名字，我希望表格视图在必要时滚动，以便该行可见（如果它已经可见，则不滚动）。

> UITableViewScrollPositionNone - 表格视图滚动感兴趣的行，以最小的移动完全可见。如果该行已经完全可见，则不会发生滚动。例如，如果行在可见区域上方，则行为与 UITableViewScrollPositionTop 指定的行为相同。这是默认设置。

但是，我发现表格视图根本不滚动。如果我使用`UITableViewScrollPositionTop`or `UITableViewScrollPositionBottom`，表格视图会按预期滚动。

有可能这方面的文档不正确吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-30T08:02:55.293

UITableView 的 selectRowAtIndexPath:animated:scrollPosition: 的文档有一个部分描述了您所遇到的情况。

> 特殊注意事项 传递 UITableViewScrollPositionNone 将导致不滚动，而不是为该常量描述的最小滚动。要以最小滚动滚动到新选择的行，请使用 UITableViewScrollPositionNone 使用此方法选择行，然后使用 UITableViewScrollPositionNone 调用 scrollToRowAtIndexPath:atScrollPosition:animated:。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:51:19.400

您需要确保表格视图的内容视图有滚动空间。我曾经需要滚动表格视图，因为用户点击文本字段并且键盘出现，我需要将表格视图的内容扩展到键盘高度的高度，以便表格视图可以滚动。像这样：

```
UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, keyboardFrame.size.height, 0.0);
self.tableView.contentInset = contentInsets;
self.tableView.scrollIndicatorInsets = contentInsets;
[self.tableView scrollToRowAtIndexPath:self.currentEditingCellIndexPath atScrollPosition:UITableViewScrollPositionNone animated:YES]; 
```

# android - 如何在 Android 中使用已转换的 EPS 到 SVG 文件

> ID：14223260
> 
> 赞同：3
> 
> 时间：2013-01-08T20:14:19.963
> 
> 标签：android, svg, adobe-illustrator

我的文件有问题`SVG`。我`SVG`在 Android 中正确使用了文件。（下载到互联网的 SVG 文件。）我的问题已经转换为 SVG 文件。我有 EPS 文件，我想`EPS`在 Android 中使用这些文件。为此，我`TINY SVG`通过`Adobe Illustrator`. 但是，这些转换后的文件没有显示。

我控制了文件的版本。两者都是1.0版本。我不明白为什么转换后的文件不起作用以及为什么下载的`SVG`文件起作用。

我控制着工作`SVG files XML`。这些也已经转换了`Adobe Illustrator`。我找不到窍门。

问候

这是工作`SVG`：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 13.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 14948)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="500px" height="500px" viewBox="0 0 500 500" enable-background="new 0 0 500 500" xml:space="preserve">
<g id="max_width__x2F__height" display="none">
    <path display="inline" d="M499.001,1v498H1V1H499.001 M500.001,0H0v500h500.001V0L500.001,0z"/>
</g>
<g id="androd">
    <path fill="#9FBF3B" d="M301.314,83.298l20.159-29.272c1.197-1.74,0.899-4.024-0.666-5.104c-1.563-1.074-3.805-0.543-4.993,1.199
        L294.863,80.53c-13.807-5.439-29.139-8.47-45.299-8.47c-16.16,0-31.496,3.028-45.302,8.47l-20.948-30.41
        c-1.201-1.74-3.439-2.273-5.003-1.199c-1.564,1.077-1.861,3.362-0.664,5.104l20.166,29.272
        c-32.063,14.916-54.548,43.26-57.413,76.34h218.316C355.861,126.557,333.375,98.214,301.314,83.298"/>
    <path fill="#FFFFFF" d="M203.956,129.438c-6.673,0-12.08-5.407-12.08-12.079c0-6.671,5.404-12.08,12.08-12.08
        c6.668,0,12.073,5.407,12.073,12.08C216.03,124.03,210.624,129.438,203.956,129.438"/>
    <path fill="#FFFFFF" d="M295.161,129.438c-6.668,0-12.074-5.407-12.074-12.079c0-6.673,5.406-12.08,12.074-12.08
        c6.675,0,12.079,5.409,12.079,12.08C307.24,124.03,301.834,129.438,295.161,129.438"/>
    <path fill="#9FBF3B" d="M126.383,297.598c0,13.45-10.904,24.354-24.355,24.354l0,0c-13.45,0-24.354-10.904-24.354-24.354V199.09
        c0-13.45,10.904-24.354,24.354-24.354l0,0c13.451,0,24.355,10.904,24.355,24.354V297.598z"/>
    <path fill="#9FBF3B" d="M140.396,175.489v177.915c0,10.566,8.566,19.133,19.135,19.133h22.633v54.744
        c0,13.451,10.903,24.354,24.354,24.354c13.451,0,24.355-10.903,24.355-24.354v-54.744h37.371v54.744
        c0,13.451,10.902,24.354,24.354,24.354s24.354-10.903,24.354-24.354v-54.744h22.633c10.569,0,19.137-8.562,19.137-19.133V175.489
        H140.396z"/>
    <path fill="#9FBF3B" d="M372.734,297.598c0,13.45,10.903,24.354,24.354,24.354l0,0c13.45,0,24.354-10.904,24.354-24.354V199.09
        c0-13.45-10.904-24.354-24.354-24.354l0,0c-13.451,0-24.354,10.904-24.354,24.354V297.598z"/>
</g>
</svg> 
```

这里不工作`SVG`：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1 Tiny//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-tiny.dtd" [
    <!ENTITY ns_extend "http://ns.adobe.com/Extensibility/1.0/">
    <!ENTITY ns_ai "http://ns.adobe.com/AdobeIllustrator/10.0/">
    <!ENTITY ns_graphs "http://ns.adobe.com/Graphs/1.0/">
    <!ENTITY ns_vars "http://ns.adobe.com/Variables/1.0/">
    <!ENTITY ns_imrep "http://ns.adobe.com/ImageReplacement/1.0/">
    <!ENTITY ns_sfw "http://ns.adobe.com/SaveForWeb/1.0/">
    <!ENTITY ns_custom "http://ns.adobe.com/GenericCustomNamespace/1.0/">
    <!ENTITY ns_adobe_xpath "http://ns.adobe.com/XPath/1.0/">
]>
<svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns:x="&ns_extend;" xmlns:i="&ns_ai;" xmlns:graph="&ns_graphs;"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="612px" height="792px"
     viewBox="0 0 612 792" xml:space="preserve">
<switch>
    <foreignObject requiredExtensions="&ns_ai;" x="0" y="0" width="1" height="1">
        <i:pgfRef  xlink:href="#adobe_illustrator_pgf">
        </i:pgfRef>
    </foreignObject>
    <g i:extraneous="self">
        <g>

                <image width="107" height="148" xlink:href="data:image 
//and goind to very long... 
```

我的主要活动：

```
package com.example.svgexample4;

import com.larvalabs.svgandroid.SVG;
import com.larvalabs.svgandroid.SVGParser;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    RelativeLayout mainLayout;
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);

    ImageView myImg;
    SVG svgFile;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
mainLayout = new RelativeLayout(this);

        myImg = new ImageView(this);

        myImg.setBackgroundColor(Color.BLUE);
        SVG svgFile = SVGParser.getSVGFromResource(getResources(), R.drawable.egg_purple_svg);
        myImg.setImageDrawable(svgFile.createPictureDrawable());

        mainLayout.addView(myImg);
        setContentView(mainLayout);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T18:44:58.900

svg-android 仅支持 SVG 规范的一小部分。你可以试试我的渲染器[AndroidSVG](http://code.google.com/p/svg-android/)，它支持更多的规范，旨在支持 Illustrator 生成的文件（比如你的“不工作”文件）。

如果它不能使用 AndroidSVG 渲染，请提交一个错误，我会尝试修复它。

# amazon-simpledb - SimpleDB 项目名称

> ID：14223261
> 
> 赞同：4
> 
> 时间：2013-01-08T20:14:24.760
> 
> 标签：amazon-simpledb

我刚开始使用 Amazon SimpleDB（第一次体验 noSQL），在设置我的第一个用户域并添加第一个项目（具有属性 id 和名称）时，我想知道项目名称应该是什么？

*   像RDBMS ids：“1”，“2”，“3”（所以我应该在某处保持计数）
*   用户界面
*   更具可读性：“user_1”、“user_2”

我将主要通过项目名称进行查询吗？在这种情况下，项目名称是否等同于 id，因此我不需要 id 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:03:33.257

Amazon SimpleDB 只需要数据库中每一行的唯一标识符。项目名称应该是唯一的，就像您在传统数据库中的 pk 一样。当您在 Amazon SimplDB 中查询任何数据时，您将获得项目列表作为命中。

项目名称不是一个属性，但如果您计划将任何新域/表添加到 Amazon SimpleDB 并且您的任何属性将包含任何唯一数据，那么您可以将您的属性替换为项目名称。

> 项目名称应该是什么？

这取决于您 - 您真正保留的项目名称。您可以保留您建议的所有三个，但它必须是您传统数据库中的唯一数据，如 pk。

> 我将主要通过项目名称进行查询吗？在这种情况下，项目名称是否等同于 id，因此我不需要 id 属性？

是的。您可以使用项目名称查询您的数据，例如 -

```
select * from domain where itemName() = '1' 
```

# jquery - jquery以不同的速度为每个子元素设置动画

> ID：14223263
> 
> 赞同：0
> 
> 时间：2013-01-08T20:14:40.953
> 
> 标签：jquery, performance, html, jquery-animate, differentiation

我正在使用 jquery animate 函数在我的内容 div 中移动一个块。基本结构如下：

```
<div class="content">
  <div>block 1</div>
  <div>block 2</div>
  <div>block 3</div>
</div> 
```

我的js：

```
//main menu clicked:    
    $('#nav').children().click(function(e){
        e.preventDefault();
        var current = $('.selected').index();
        var clicked = $(this).index();
        if(current != clicked){

        if (current < clicked) {
            clickedLeft = 1400
            currentLeft = -1400
            $('#content-'+clicked).css('left', clickedLeft);
        } else {
                clickedLeft = -1400
                currentLeft = 1400
                $('#content-'+clicked).css('left', clickedLeft);
            }

        $('#content-'+current).animate({left: currentLeft}, 1500, 'easeInOutSine', function(){ $('#content-'+current).hide(); });
        $('#content-'+clicked).show().animate({left: 0}, 1500, 'easeInOutSine');

        }
    }); 
```

当我点击特定的菜单链接时，相应的 div 将移动到中心，而位于中心的 div 将移动到对面。一切正常，但我的块有不同的元素，如 img p li 等，所以我想以不同的速度移动这些元素。可能吗？还是我应该分别为块的每个元素设置动画？我不能为每个元素提供动画，因为它们是从 db 中检索的，所以并不总是显示相同的元素。

活生生的例子：[dida.uz](http://dida.uz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:17:39.107

您应该为 div 分配不同的动画，但之前必须在有限的时间内计算所需的动画数量，这将为您提供正确的速度，然后所有动画将同时结束，从而获得最佳体验。

当然，示例代码将不胜感激。

# ms-access - 如何将附件的内容从 MS Access DB 复制到 VBA 变量中？

> ID：14223266
> 
> 赞同：0
> 
> 时间：2013-01-08T20:14:45.803
> 
> 标签：ms-access, vba, attachment

**背景信息：** 我对 VBA 或 Access 不是很了解，但是我有一个 VBA 脚本，可以在用户计算机上创建一个文件（具体来说是一个 KML，但这对我的问题来说并不重要）和使用链接到数据库中记录的变量写入它。像这样：

```
Dim MyDB As Database
Dim MyRS As Recordset
Dim QryOrTblDef As String
Dim TestFile As Integer

    QryOrTblDef = "Table1" 
    Set MyDB = CurrentDb
    Set MyRS = MyDB.OpenRecordset(QryOrTblDef)
    TestFile = FreeFile

    Open "C:\Testing.txt"
    Print #TestFile, "Generic Stuff"
    Print #TestFile, MyRS.Fields(0) 
```

等等

**我的情况：** 我有一个非常大的字符串（一个包含大量多边形顶点坐标的文本文档），我想将它添加到要打印到另一个文件（KML 文件，如上例中）的变量中。我希望将此包含坐标的文本文件作为附件数据类型添加到 Access 数据库中，并将其内容复制到要在上述脚本中使用的变量中。

**我的问题：** 有没有一种方法可以访问附加文本文件（作为 MS Access 数据库字段中的附件数据类型附加）中的数据并将其复制到变量中，以便我可以在 VBA 脚本中使用它？

**我发现了什么：** 我无法找到关于这个主题的信息我认为主要是因为我不知道要搜索什么关键字，但我能够在论坛上找到某人的代码，“ozgrid”，这似乎接近我想做的事。尽管它只是从磁盘上的文本文件中提取，而不是从附加到数据库的文本文件中提取。

来自上述论坛的代码创建了一个访问文本文件中数据的函数：

```
Sub Test() 

    Dim strText As String 

    strText = GetFileContent("C:\temp\x.txt") 
    MsgBox strText 

End Sub 

Function GetFileContent(Name As String) As String 
    Dim intUnit As Integer 

    On Error Goto ErrGetFileContent 
    intUnit = FreeFile 
    Open Name For Input As intUnit 
    GetFileContent = Input(LOF(intUnit), intUnit) 
ErrGetFileContent: 
    Close intUnit 
    Exit Function 
End Function 
```

任何帮助在这里表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:59:18.097

如果您存储纯文本，甚至存储有组织的文本的表格，为什么备忘录数据类型不适合，我有点困惑。话虽如此，一种方法是输出到磁盘并读入字符串。

```
''Ref: Windows Script Host Object Model
Dim fs As New FileSystemObject
Dim ts As TextStream
Dim rs As DAO.Recordset, rsA As DAO.Recordset
Dim sFilePath As String
Dim sFileText As String

    sFilePath = "z:\docs\"

    Set rs = CurrentDb.OpenRecordset("maintable")
    Set rsA = rs.Fields("aAttachment").Value

    ''File exists
    If Not fs.FileExists(sFilePath & rsA.Fields("FileName").Value) Then
        ''It will save with the existing FileName, but you can assign a new name
        rsA.Fields("FileData").SaveToFile sFilePath
    End If

    Set ts = fs.OpenTextFile(sFilePath _
           & rsA.Fields("FileName").Value, ForReading)

    sFileText = ts.ReadAll 
```

另请参阅：http: [//msdn.microsoft.com/en-us/library/office/ff835669.aspx](http://msdn.microsoft.com/en-us/library/office/ff835669.aspx)

# android - 如何让Android ListView 刷新

> ID：14223267
> 
> 赞同：1
> 
> 时间：2013-01-08T20:14:55.473
> 
> 标签：android, listview, refresh, onresume

如果不重新启动整个应用程序，我目前无法从我的 ListView 查看新插入的 sqlite 数据。目前，当一个 ListView 项目被选中时，一个新的活动开始显示详细信息。一旦详细信息被更新、编辑或项目被删除，ListView 将再次显示，但包含所有原始数据，除非应用程序关闭并重新启动。列表视图 OnResume 方法如下。当 ListView 显示在屏幕上时，如何刷新它。我尝试添加 .notifyDataSetChanged 没有成功。不确定我是否正确实施了它。

```
 public List<String> populateList (){

List<String> webNameList = new ArrayList<String>();

dataStore openHelperClass = new dataStore (this);

SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null,  null, null, dataStore.COLUMN_NAME_SITE, null);

startManagingCursor(cursor);

while (cursor.moveToNext()){

String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

LoginDetails lpDetails = new LoginDetails();

    lpDetails.setsName(sName);
    lpDetails.setwUrl(wUrl);
    lpDetails.setuName(uName);
    lpDetails.setpWord(pWord);
    lpDetails.setlNotes(lNotes);

    loginArrayList.add(lpDetails);
    webNameList.add(sName);
 }

   sqliteDatabase.close();
   return webNameList;
 }

  @Override
   protected void onResume() {
   super.onResume();
   loginListAdapter = new ArrayAdapter<String>(this,        android.R.layout.simple_list_item_1, populateList());
    loginList.setAdapter(loginListAdapter);
 }

  @Override
   public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
   Toast.makeText(getApplicationContext(), "Selected ID :" + arg2,     Toast.LENGTH_SHORT).show();

Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

LoginDetails clickedObject = loginArrayList.get(arg2);

    Bundle loginBundle = new Bundle();
loginBundle.putString("clickedWebSite",clickedObject.getsName());
loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
loginBundle.putString("clickedUserName",clickedObject.getuName());
loginBundle.putString("clickedPassWord",clickedObject.getpWord());
loginBundle.putString("clickedNotes",clickedObject.getlNotes());

updateDeleteLoginInfo.putExtras(loginBundle);

startActivity(updateDeleteLoginInfo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:22:08.277

您正在使用 startActivity。你为什么不改用 startActivityForResult 呢？[这个问题](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)的答案详细说明了如何调用第二个活动。一旦它返回，您将不得不使用 notifyDataSetChanged() 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:06:16.287

[startManagingCursor](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor%28android.database.Cursor%29)已弃用。请改用[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)。

当 ContentProvider 的数据发生变化时，使用和更新 ListView 中的数据非常简单。

这是一个很好的例子： [http ://www.vogella.com/articles/AndroidSQLite/article.html#todo_activities](http://www.vogella.com/articles/AndroidSQLite/article.html#todo_activities)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:10:52.427

您只显示了应用程序代码的一部分，所以我在这里可能有点离谱，但看起来您正在使用 Cursor 返回一个 List 并使用 List 创建一个 ArrayAdapter ...

如果您希望数据是“新鲜的”，为什么不将 CursorLoader 与 LoaderManager 一起使用？LoaderManager 有几个好处（比如将查询从 UI 线程中移出），并且在监视数据库的更改时，LoaderManager 为您完成了一些繁重的工作。

有一篇博文我觉得很有帮助 - [http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html](http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html)

# android - 在 onPageSelected() 中访问时片段成员变量为空

> ID：14223270
> 
> 赞同：6
> 
> 时间：2013-01-08T20:15:09.140
> 
> 标签：android, android-fragments, android-fragmentactivity, fragmentpageradapter

我正在使用 FragmentPagerAdapter 和 FragmentActivity 来创建可滑动的片段。

我在那个 pagerAdapter 中的第一个片段看起来像这样。

```
public class MySummaryFragment extends CommonFragment implements OnPageChangeListener 
{
   private Context mContext;
   private View mMyView;

LinearLayout mDetailLayout;
TextView mDateTxtView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    System.out.println("onCreateView() Market summary");
    mMyView = inflater.inflate(R.layout.my_page_summary_fragment_layout, container,false);
    mDetailLayout = (LinearLayout)mMyView.findViewById(R.id.SummaryDetailLayout);
    mDateTxtView = (TextView) mMyView.findViewById(R.id.txtDate);

    Account_Id = AccountDetails.getInstance(mContext).getClientCodes().get(0);
    sendRequest(Account_Id);

    return mMyView;

}

 @Override
public void onPageSelected(int arg0) {
    System.out.println("inside onPageScrollStateChanged()");
    System.out.println("mMyView is null ? = "+(mMyView==null));
    mDateTxtView = (TextView) mMyView.findViewById(R.id.txtMarketSummaryDate);
    Account_Id = AccountDetails.getInstance(mContext).getClientCodes().get(0);
        mDateTxtView.setText("");   
            sendRequest(Account_Id);
}
} 
```

这里的问题是当刷出到 5-6 个片段并刷回第一个片段时，我得到了 NullPointerException。

当我尝试调试时，我发现

> mMyView 为空？= 真

为什么这样？

请帮我。

这是我的 Fragment 包含 FragmentPagerAdapter，

```
public class MyPageDetailViewFragment  extends CommonFragment  {
private View mView;
Context mContext;
OnPageChangeListener pageChangeListener;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mView = inflater.inflate(R.layout.my_page_fragments, null);
    mContext = getActivity();

    setHasOptionsMenu(false);

    setupSearchBarComponent();

    PagerTabStrip pagerTabStrip = (PagerTabStrip)mView. findViewById(R.id.pager_title_strip);
    pagerTabStrip.setDrawFullUnderline(true);
    pagerTabStrip.setTabIndicatorColor(Color.BLACK);

    /** Getting a reference to the ViewPager defined the layout file */        
    ViewPager pager = (ViewPager) mView.findViewById(R.id.pager);

    /** Getting fragment manager */
    FragmentManager fm = ((HomeScreenActivity)mContext).getSupportFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    final MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

    pager.setAdapter(pagerAdapter);

    pager.setCurrentItem(0);

    pageChangeListener = new OnPageChangeListener() {

        @Override
        public void onPageSelected(int selectedIndex) {
            System.out.println("selectedIndex = "+selectedIndex);
            Object page  = pagerAdapter.getItem(selectedIndex);
            if( page instanceof OnPageChangeListener){
                ((OnPageChangeListener) page).onPageSelected(selectedIndex);
            }
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {

        }
    };

    pager.setOnPageChangeListener(pageChangeListener);

    return mView;
    //      return super.onCreateView(inflater, container, savedInstanceState);
} 
```

这是我的实现 MyFragmentPagerAdapter，

```
public class MyFragmentPagerAdapter extends FragmentPagerAdapter {

/** Constructor of the class */
public MyFragmentPagerAdapter(FragmentManager fm) {
    super(fm);
}

/** This method will be invoked when a page is requested to create */
@Override
public Fragment getItem(int index) {

    System.out.println("getItem = "+index);
    Bundle data = new Bundle();
    data.putInt("current_page", index + 1);

    CommonFragment fragment = getFragment(index);

    fragment.setArguments(data);

    return fragment;
}

public CommonFragment getFragment(int index) {
    CommonFragment fragment = null;
    if(fragment == null){
        if(index == 0){
            fragment = new MySummaryFragment();
        }else if(index == 1){
            fragment = new FragmentOne();
        }else if(index == 4){
            fragment = new FragmentFour();
        }else if(index == 5){
            fragment = new FragmentFive();
        }else{
            fragment = new MyFragment();
        }
    }
    return fragment;
}

/** Returns the number of pages */
@Override
public int getCount() {
    return titles.length;
}

@Override
public CharSequence getPageTitle(int position) {
    return titles[position];
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-30T10:59:38.823

`pagerAdapter.getItem(selectedIndex)`实际上创建了片段的新实例。

看到这个答案：[https ://stackoverflow.com/a/23843743/1271907](https://stackoverflow.com/a/23843743/1271907)

您必须保留对实际片段的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:49:36.280

看起来您在充气机上调用了错误的方法。

尝试更改此行：

```
mView = inflater.inflate(R.layout.my_page_fragments, null); 
```

至：

```
mView = inflater.inflate(R.layout.my_page_fragments,container, null); 
```

# c++ - C++ 从单个数组中分离线程读/写

> ID：14223276
> 
> 赞同：0
> 
> 时间：2013-01-08T20:15:19.667
> 
> 标签：c++, multithreading, winapi, thread-safety, directx

对不起，如果标题不是我的问题所问的。我有点不确定问这个问题的最佳方式。

基本上，我创建了一个 DirectX C++ 应用程序，它当然利用了 Win32 函数。所以我有下面的静态方法

```
static LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam); 
```

上面的方法中包含以下 case 语句。

```
case WM_INPUT:
{
    unsigned __int32 dwSize;
    GetRawInputData((HRAWINPUT__*)lParam, RID_INPUT, NULL, &dwSize, sizeof(RAWINPUTHEADER));

    unsigned char *lpb = new unsigned char[dwSize];
    GetRawInputData((HRAWINPUT__*)lParam, RID_INPUT, lpb, &dwSize, sizeof(RAWINPUTHEADER));

    tagRAWINPUT* raw = (tagRAWINPUT*)lpb;
    InputSystem::handleRawMessage(raw);

    delete[] lpb;
}
break; 
```

好吧，然后方法**InputSystem::handleRawMessage(raw);** 执行以下操作。

```
__int32 KEY_STATE[8] = {0, 0, 0, 0, 0, 0, 0, 0};
void InputSystem::handleRawMessage(tagRAWINPUT *raw)
{
    if (raw->header.dwType == RIM_TYPEKEYBOARD) 
    {
        int key = raw->data.keyboard.VKey & 0xFF;
        KEY_STATE[key >> 5] |= 1 << (key & 0x1F);
    }
} 
```

所以我假设 WindowProc 是一个单独的线程，所以我让它访问这些数组并将值存储到它们。好吧，我觉得可能会出现问题，但我不确定这是否安全，因为只有 1 个方法读取和 1 个方法写入。

```
void InputSystem::handleInput(void)
{
    PREVIOUS_STATE = CURRENT_STATE;
    CURRENT_STATE = 0;
    for (int i = 0; i < MAPPING_SIZE; ++i)
    {
        if (isKeyPressed(MAPPED_KEYS[i]))
        {
            CURRENT_STATE |= 1 << i;
            if (PREVIOUS_STATE & 1 << (0x10 | i))
                CURRENT_STATE |= 1 << (0x10 | i);
        }
    }
    clearKeyStates();
}

bool InputSystem::isKeyPressed(unsigned __int8 key)
{
    return (KEY_STATE[key >> 5] & 1 << (key & 0x1F)) != 0x0;
} 
```

上面的代码“InputSystem::handleInput();” 在为继续绘制 DirectX 图形而启动的 while 循环中调用。

那么上面的代码是否安全执行，或者当两个线程都在相同的值上执行某些事情时我会遇到问题？

我对处理 Win32 的任何事情都很陌生，而且我最近才进入 DirectX，并不是说 DirectX 与此有任何关系。我从来没有真正需要过分担心并发性，所以我从来没有这样做过，但我想了解这种特殊情况以及其他安全和不安全的情况，如果可能的话。谢谢。

while 循环是从下面的代码生成的..

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) 
{
    Dx3DEngine engine = Dx3DEngine(hInstance, hPrevInstance, lpCmdLine, nCmdShow);
    int code = engine.run();
    if (code != 0) 
    {
        engine.createUnsupportedWindow(code);
    }
    return code;
}

int Dx3DEngine::run()
{
    MSG msg;
    msg.message = WM_NULL;
    __int64 cntsPerSec = 0;
    __int64 prevTimeStamp = 0;
    __int64 currTimeStamp = 0;
    QueryPerformanceFrequency((LARGE_INTEGER*)&cntsPerSec);
    QueryPerformanceCounter((LARGE_INTEGER*)&prevTimeStamp);
    const float secsPerCnt = 1.0F / (float)cntsPerSec;
    while(msg.message != WM_QUIT)
    {
        while(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        } 
        QueryPerformanceCounter((LARGE_INTEGER*)&currTimeStamp);
        float dt = (currTimeStamp - prevTimeStamp)*secsPerCnt;
        update(dt);
        draw();
        prevTimeStamp = currTimeStamp;
    }
    clean();
    return (int)msg.wParam;
} 
```

# kendo-ui - MVC 中的 KENDOUI 网格：有没有办法在某些列上隐藏过滤器？

> ID：14223280
> 
> 赞同：8
> 
> 时间：2013-01-08T20:15:35.360
> 
> 标签：kendo-ui

我在 MVC.NET 中使用 KENDO UI 网格。

网格被配置为显示每列的列过滤器。

但是，我的某些列不可过滤，因此我想隐藏过滤器。

有没有办法从 C# 端配置它？（不使用 CSS 或 JS）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T22:13:38.310

在您的代码中，您可能有类似的内容：

```
<asp:Content ContentPlaceHolderID="MainContent" runat="server">
<%: Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ProductID).Groupable(false);
        columns.Bound(p => p.ProductName);
        columns.Bound(p => p.UnitPrice);
        columns.Bound(p => p.UnitsInStock);
    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Products_Read", "Grid"))
    )
%>
</asp:Content> 
```

如果您希望`ProductID`列不可过滤，您应该说：

```
<asp:Content ContentPlaceHolderID="MainContent" runat="server">
<%: Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ProductID).Groupable(false).Filterable(false);
        columns.Bound(p => p.ProductName);
        columns.Bound(p => p.UnitPrice);
        columns.Bound(p => p.UnitsInStock);
    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Products_Read", "Grid"))
    )
%>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T18:14:03.847

如果您没有设置列，您可以在网格初始化后隐藏过滤器按钮，例如在数据绑定事件中。这是一种方法，将过滤器按钮隐藏在特定字段上：

```
$("#MyGrid").find(".k-header[data-field='Pct_positive']").find(".k-grid-filter").css("visibility","hidden"); 
```

把它们都藏起来……

```
$("#MyGrid").find(".k-header").find(".k-grid-filter").css("visibility","hidden"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:25:20.213

据我所知，您必须能够将`columns.filterable`那些您不想过滤的列的配置属性设置为“false”，因为它默认为“true”（请参阅​​文档：[columns.filterable](http://docs.kendoui.com/api/web/grid#columnsfilterable-booleandefault)）

您是否可以从 C# 端执行此操作将取决于您的代码中如何初始化 Kendo Grid。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T02:16:45.303

我没有在问题中提到它，但我使用的是网格的 AutoGenerate() 功能，因此无法轻松访问*Filterable*设置。

这种情况的一种解决方法是：

```
var gb = Html.Kendo().Grid(data).Name("test");
gb.Columns(columns => { columns.AutoGenerate(true); });

// !!! Hide filter for first column in grid.
gb.Columns( (columns) => { (columns.Container.Columns[0] as IGridBoundColumn).Filterable=false;  });

gb.Filterable(filtering => filtering.Enabled(true));

gb.DataSource(ds => ds
                .Ajax()
                .ServerOperation(true)
                .Model(model => model.Id("A"))
                );
gb.Render(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-06T16:46:38.860

对于客户端（jquery）剑道网格，您可以将 filterable: false 用于放置 filterable: true 后的单个列，用于整个网格。

例如。

字段：“Margin01”，宽度：40，可过滤：false，标题：“0-”

# c - 套接字权限 ubuntu

> ID：14223281
> 
> 赞同：1
> 
> 时间：2013-01-08T20:15:36.317
> 
> 标签：c, linux, network-programming, ubuntu-12.04, raw-sockets

嗨，我是 Linux 新手，有一个与套接字相关的项目。我面临的问题是，当我使用`for interface`路由器的输入 eth0 和 ip 地址运行代码时，即 `./mycode eth0 192.168.1.1`出现错误

> 您无权在该设备上捕获（套接字：不允许操作）

我从链接中获取的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pcap.h>
#include <arpa/inet.h>
#include <net/if.h>
#include <net/ethernet.h>
#include <netinet/if_ether.h>
#include <sys/ioctl.h>

int main(int argc,const char* argv[]) {
    // Get interface name and target IP address from command line.
    if (argc<2) {
        fprintf(stderr,"usage: send_arp <interface> <ipv4-address>\n");
        exit(1);
    }
    const char* if_name=argv[1];
    const char* target_ip_string=argv[2];

    // Construct Ethernet header (except for source MAC address).
    // (Destination set to broadcast address, FF:FF:FF:FF:FF:FF.)
    struct ether_header header;
    header.ether_type=htons(ETH_P_ARP);
    memset(header.ether_dhost,0xff,sizeof(header.ether_dhost));

    // Construct ARP request (except for MAC and IP addresses).
    struct ether_arp req;
    req.arp_hrd=htons(ARPHRD_ETHER);
    req.arp_pro=htons(ETH_P_IP);
    req.arp_hln=ETHER_ADDR_LEN;
    req.arp_pln=sizeof(in_addr_t);
    req.arp_op=htons(ARPOP_REQUEST);
    memset(&req.arp_tha,0,sizeof(req.arp_tha));

    // Convert target IP address from string, copy into ARP request.
    struct in_addr target_ip_addr={0};
    if (!inet_aton(target_ip_string,&target_ip_addr)) {
       fprintf(stderr,"%s is not a valid IP address",target_ip_string);
       exit(1);
    }
    memcpy(&req.arp_tpa,&target_ip_addr.s_addr,sizeof(req.arp_tpa));

    // Write the interface name to an ifreq structure,
    // for obtaining the source MAC and IP addresses.
    struct ifreq ifr;
    size_t if_name_len=strlen(if_name);
    if (if_name_len<sizeof(ifr.ifr_name)) {
        memcpy(ifr.ifr_name,if_name,if_name_len);
        ifr.ifr_name[if_name_len]=0;
    } else {
        fprintf(stderr,"interface name is too long");
        exit(1);
    }

    // Open an IPv4-family socket for use when calling ioctl.
    int fd=socket(AF_INET,SOCK_DGRAM,0);
    if (fd==-1) {
        perror(0);
        exit(1);
    }

    // Obtain the source IP address, copy into ARP request
    if (ioctl(fd,SIOCGIFADDR,&ifr)==-1) {
        perror(0);
        close(fd);
        exit(1);
    }
    struct sockaddr_in* source_ip_addr = (struct sockaddr_in*)&ifr.ifr_addr;
    memcpy(&req.arp_spa,&source_ip_addr->sin_addr.s_addr,sizeof(req.arp_spa));

    // Obtain the source MAC address, copy into Ethernet header and ARP request.
    if (ioctl(fd,SIOCGIFHWADDR,&ifr)==-1) {
        perror(0);
        close(fd);
        exit(1);
    }
    if (ifr.ifr_hwaddr.sa_family!=ARPHRD_ETHER) {
        fprintf(stderr,"not an Ethernet interface");
        close(fd);
        exit(1);
    }
    const unsigned char* source_mac_addr=(unsigned char*)ifr.ifr_hwaddr.sa_data;
    memcpy(header.ether_shost,source_mac_addr,sizeof(header.ether_shost));
    memcpy(&req.arp_sha,source_mac_addr,sizeof(req.arp_sha));
    close(fd);

    // Combine the Ethernet header and ARP request into a contiguous block.
    unsigned char frame[sizeof(struct ether_header)+sizeof(struct ether_arp)];
    memcpy(frame,&header,sizeof(struct ether_header));
    memcpy(frame+sizeof(struct ether_header),&req,sizeof(struct ether_arp));

    // Open a PCAP packet capture descriptor for the specified interface.
    char pcap_errbuf[PCAP_ERRBUF_SIZE];
    pcap_errbuf[0]='\0';
    pcap_t* pcap=pcap_open_live(if_name,96,0,0,pcap_errbuf);
    if (pcap_errbuf[0]!='\0') {
        fprintf(stderr,"%s\n",pcap_errbuf);
    }
    if (!pcap) {
        exit(1);
    }

    // Write the Ethernet frame to the interface.
    if (pcap_inject(pcap,frame,sizeof(frame))==-1) {
        pcap_perror(pcap,0);
        pcap_close(pcap);
        exit(1);
    }

    // Close the PCAP descriptor.
    pcap_close(pcap);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:16:57.820

你需要root权限才能做到这一点。尝试以 root 身份运行您的程序。

# objective-c - ios - 在运行时比较数组的值，不知道它们将是什么

> ID：14223283
> 
> 赞同：0
> 
> 时间：2013-01-08T20:15:47.357
> 
> 标签：objective-c, ios, arrays, json

我有两个地方需要 UIPickerView 在我的应用程序中，第二个代表的值取决于第一个的结果。

但是第一个的值可以在运行时更改，所以我不知道它们会是什么。这使我无法以这种方式进行硬编码：

```
 if([_menuCategoryPickerFld.text isEqualToString:@"food_breakfast"])
    {

    } 
```

这需要将值硬编码到我的应用程序中。

现在我的数据源是通过 JSON 导入的 MySQL，所以当我在第一个 UIPickerView 中选择一个选项时，它会查询并返回正确的 JSON 文件。

**我需要知道我是否可以比较只有在应用程序运行时才会收到的数组的值？？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:18:21.987

不确定我是否理解，但为什么不只是：

```
NSString* mystery = @"blah";
if([_menuCategoryPickerFld.text isEqualToString:mystery]){ ... } 
```

您不需要字符串的内容就可以通过这种方式进行比较。

# entity-framework - 云互斥：涉及读取/写入共享数据（SQL 数据）的基于云的并发

> ID：14223292
> 
> 赞同：2
> 
> 时间：2013-01-08T20:16:49.080
> 
> 标签：entity-framework, azure, concurrency, parallel-processing, cloud

**背景：**我们有一个 Azure .NET 应用程序，我们需要在其中向多个后端提供商注册一个“前端”用户。由于此注册需要更长的时间，我们将其卸载到工作角色，并且有多个工作角色。所有数据都存储在 Azure SQL 中，我们使用 Entity Framework 5.0 作为我们的 ORM。我们当前的设置方式，我们从 SQL dB**读取**=> 工作角色代码中的进程 =>**写入**/update 到 SQL dB 以标记完成。本质上，我需要解决传统的“多线程+共享数据写入”问题，但不是操作系统规模，而是云规模。

**关注点**：如果第一个工作人员花费的时间超过可见性超时，我们就会有多个工作人员的竞争条件。例如，假设有两个工作角色，我在下面标记了两者将如何从 SQL 中读取，认为处理仍处于未决状态并且两者都将继续进行。它会导致最后写入者获胜的竞争条件，并且还会在外部服务提供商上创建孤立帐户和额外帐户。

**问题**：如何修改它以优雅地处理这种情况？我可以更改数据流或为 Mutex 使用每个用户的“云”锁。在不试图约束任何人的想法的情况下，过去我推测有一个[基于 SQL 的云锁](https://stackoverflow.com/questions/13850180/using-sql-db-column-as-a-lock-for-concurrent-operations-in-entity-framework)，但无法真正让它在 EF5.0 中工作。在这里，我试图探索任何答案，无论是否基于 SQL 的锁。

```
// Read message off Service Bus Queue
// message invisible for 1 min now, worker must finish in 1 min
BrokeredMessage qMsg = queueClient.Receive();

// Extract UserID Guid from message
Guid userProfileId = DeserializeUserIdFromQMsg(qMsg); 

// READ PROFILE FROM SQL
UserProfile up = (from x in myAppDbContext.UserProfiles select x).SingleOrDefault(p => p.UserProfileId == userProfileId);

if (up != null)
{
    List<Task> allUserRegTasks = new List<Task>();

    string firstName = up.FirstName; // <== WORKER ROLE #2 HERE
    string lastName = up.LastName;
    string emailAddress = up.Email;

    // Step 1: Async register User with provider #1, update db
    if (String.IsNullOrEmpty(up.Svc1CustId)) 
    {
        // <== WORKER ROLE #1 HERE
        Svc1RegHelper svc1RegHelper = new Svc1RegHelper(); 
        Task svc1UserRegTask = svc1RegHelper.GetRegisterTask(userProfileId, firstName, lastName, emailAddress);
        svc1UserRegTask.Start(); // <== SQL WRITE INSIDE THIS (marks "up.Svc1CustId")
        allUserRegTasks.Add(svc1UserRegTask);
    }

    // Step 2: Async register User with provider #2, update db
    if (String.IsNullOrEmpty(up.Svc2CustId))
    {
        Svc2RegHelper svc2RegHelper = new Svc2RegHelper();
        Task svc2UserRegTask = svc2RegHelper.GetRegisterTask(userProfileId, firstName, lastName, emailAddress);
        svc2UserRegTask.Start(); // <== SQL WRITE INSIDE THIS (marks "up.Svc2CustId")
        allUserRegTasks.Add(svc2UserRegTask);
    }

    Task.WaitAll(allUserRegTasks.ToArray());

    // Step 3: Send confirmation email to user we're ready for them!
    // ...

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:44:24.180

您可以通过 blob 租约将互斥锁放入 blob 存储中。如果其他人使用互斥锁，AcquireLease() 将失败，请尝试/捕获整个事情

```
 var lockBlobContainer = cloudClient.GetContainerReference("mutex-container");
                var lockBlob = lockBlobContainer.GetBlobReference("SOME_KNOWN_KEY.lck");
                lockBlob.UploadText(DateTime.UtcNow.ToString(CultureInfo.InvariantCulture)); //creates the mutex file
                var leaseId = lockBlob.AcquireLease();

                try
                {
                    // Do stuff
                }
                finally
                {
                    lockBlob.ReleaseLease(leaseId);
                } 
```

# asp.net - 向 Gridview 添加编辑按钮

> ID：14223293
> 
> 赞同：0
> 
> 时间：2013-01-08T20:16:54.453
> 
> 标签：asp.net, c#-4.0, gridview

我编写了一个从数据库中检索数据并返回**包含**三**列**的数据表的方法。

**这个数据表在隐藏 ID 字段**后绑定到一个**gridview**控件。

 **```
 DataTable dt = _qbObj.getAllTags();
        dvTags.DataSource = dt;

        BoundField bfName = new BoundField();
        bfName.DataField = dt.Columns["Name"].ToString();
        bfName.HeaderText = "Name";

        BoundField bfId = new BoundField();
        bfId.DataField = dt.Columns["ID"].ToString();
        bfId.Visible = false;

        BoundField bfDesc = new BoundField();
        bfDesc.DataField = dt.Columns["Description"].ToString();
        bfDesc.HeaderText = "Description";            

        dvTags.Columns.Add(bfId);
        dvTags.Columns.Add(bfName);
        dvTags.Columns.Add(bfDesc);
        dvTags.DataBind(); 
```

对于这个 gridview 控件，**我想添加一个编辑按钮**，它应该会弹出一个 jquery 模式对话框，我可以在其中输入更新的详细信息。

我意识到我可以使用 a ，但问题是我需要在不刷新页面的情况下弹出该模式对话框，并且不完全支持脚本。

因此，在我的 gridview 中，我插入了一个**Item Template**。

```
 <asp:GridView ID="dvTags" runat="server" CssClass="labs-grid-view" 
            AutoGenerateColumns="False" >
            <Columns>   
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="btnEdit" runat="server" Text="Edit" OnClick="dvTagEdit" CommandName="UpdateRecord"
                            CommandArgument='<%# Eval("ID") %>' />
                    </ItemTemplate>
                </asp:TemplateField>                                 
            </Columns>
        </asp:GridView> 
```

现在，在我完成编辑后，**gridview 不会自动更新**，因此我有一个专用的刷新网格按钮，它使用以下代码删除现有的“动态插入的列”：-

```
 int noOfRows = dvTags.Columns.Count;
        if (noOfRows > 1)
        {
            dvTags.Columns.RemoveAt(noOfRows - 1);
            dvTags.Columns.RemoveAt(noOfRows - 2);
            dvTags.Columns.RemoveAt(noOfRows - 3);
            // THERE ARE A TOTAL OF **THREE** COLUMNS
        } 
```

但问题是，刷新页面几次后，我在 ItemTemplate 中的按钮消失了，在 html 中被替换为“”

请帮我找出错误。我在想有一种更好更简单的方法来实现这一点。如果是这样，我对他们开放。

谢谢阅读，

阿比杰特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:27:08.293

有几点需要考虑：

首先，您能否为您的 ItemCommand 事件发布您的代码，该事件正在呈现模式弹出窗口并执行更新？可能是您的编辑后刷新处理不正确。

其次，不要在 GridView 上进行数据绑定“内联”，而是考虑在 Gridview 中使用 RowDataBound 事件。您可以检测正在生成哪一行（页眉、数据、页脚），并且可以在其中正确创建编辑按钮。更好的是，您可以在此方法中访问您的按钮，只需将 CommandArgument 设置为您的 Id。

第三，在你的GridView中使用asp按钮时，点击时会触发“ItemCommand”事件，从而导致回发。

我建议在您的模板列中有一个简单的链接，或者您可以用来触发 jQuery 模态的东西，并且您可以为您的项目设置一个静态命名约定，该约定将正确检索数据以放入您的模态弹出窗口进行编辑. 然后从那里您应该能够正常处理您的更新。

我希望这里有帮助。**

# accessibility - 使用 Gtk3，如何使树视图可访问？

> ID：14223296
> 
> 赞同：4
> 
> 时间：2013-01-08T20:16:58.150
> 
> 标签：accessibility, gnome, gtk3

我正在开发一个带有漂亮 GtkTreeView 的 Python+Gtk3 应用程序： ![带有树视图的应用程序屏幕截图](../Images/b38c706d3701df181c2db0fb41b6e25d.png)

这对于有视力的用户来说非常有用，但 Orca（屏幕阅读器）在树视图中的一行中显示的是：“Image, Devhelp, Collapsed, 9.2 MB”

当然有一些问题。首先，它没有提到每一行的复选框，因为我将三个单元格渲染器打包成一列。这三个是可用的，但由于某种原因，Orca 在埋得那么深时没有提到复选框。同时，它提到的图像是最左边的图像，通常是空的，但有时是“需要重新启动”指示器。自然，盲人用户，就像有视力的用户一样，不会不在乎它是图像。

我想做的是戳一下描述此表的可访问性对象，以使它们更有帮助。使用 Accerciser，我可以看到这些存在，但它们似乎都是用私有的、未记录的类（如 GtkTreeViewAccessible）实现的，而且它们看起来不太可扩展，但我希望我错了。知道树视图的可访问对象在某个级别上是 AtkTable，我执行以下操作来为备份行中的图像单元格设置可访问描述：

```
 access = self.treeview_update.get_accessible()
    cell_access = access.ref_at(0,0)
    cell_access.set_image_description("Requires system restart") 
```

（Orca 在说出描述后仍然会说“Image”，但我假设它知道自己在做什么）。

但是，该代码不是很好。当我调用 access.ref_at 时，我对 GTK 如何将单元格位置映射到 ATK 对象中的行和列做出了特定的假设。当我第一次填充树时，我也仅限于调用它，我不确定这是否特别理智。

所以这是我的问题：我想以一种不会意外中断的好方式为我的树视图单元格添加可访问的描述。我怎样才能做到这一点？

# css - 在 IE 兼容模式下表单脱离 div

> ID：14223297
> 
> 赞同：0
> 
> 时间：2013-01-08T20:17:02.423
> 
> 标签：css, internet-explorer, positioning, ie8-compatibility-mode

我有一个来自 div 的内部（带边框）。这在 Firefox 和 IE 10 上看起来不错（不确定旧版本的 IE）。但是，有时IE会激活兼容模式，然后表单（输入框和提交按钮）会掉出div。是否有一些CSS调整来防止这种情况？

我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>test</title>
  </head>

  <body>
    <div class="box">
       <h2 style="display:inline;">Some sample text</h2>

      <form id="frm">
        <input type="text" id="tb" />
        <input type="submit" class="button" />
      </form>
    </div>
  </body>
  </html> 
```

和我的 CSS

```
.box {
  display:block;
  height:40px;
  magin-left:5px;
  padding:5px 0 0 10px;
  width:740px;
  background:green;
  border:1px solid black;
}
h2 {
  margin:0 0 7px;
  padding:0;
  font:1.6em Arial;
  letter-spacing: -1px
}
#tb {
  width:225px
}
.button {
  float:right;
  width:93px;
  margin-left:5px;
  padding:2px 0
}
form {
  float:right;
}
#frm {
  margin-right:10px;
  margin-top:2px;
  width:330px;
} 
```

jsfiddle 的实时示例：http: [//jsfiddle.net/d3EdW/1/](http://jsfiddle.net/d3EdW/1/)

截屏： ![截屏](../Images/06648e3e7b9b5833471b1d3a96842e40.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:20:59.133

由于您的表单是浮动的，请尝试通过放置表单的父级来清除它`overflow: auto;`，例如`.box`.

# javascript - 在用方括号声明后立即用方括号索引是否有效？

> ID：14223298
> 
> 赞同：3
> 
> 时间：2013-01-08T20:17:04.410
> 
> 标签：javascript, arrays, syntax

通常我会写

```
arr = ['choiceA', 'choiceB', 'choiceC', 'choiceD', 'choiceE'];
position = 3;
answer = arr[position]; 
```

只是想知道......编写以下内容是否有效？
它可以跨浏览器工作吗？

```
answer = ['choiceA', 'choiceB', 'choiceC', 'choiceD', 'choiceE'][position]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:23:44.487

是的，根据[ECMAScript 5 规范](http://es5.github.com/#x11.2)：

```
MemberExpression :
    PrimaryExpression
    FunctionExpression
    MemberExpression [ Expression ]
    MemberExpression . IdentifierName
    new MemberExpression Arguments 
```

其中[`PrimaryExpression`定义为](http://es5.github.com/#x11.1)：

```
PrimaryExpression :
    this 
    Identifier
    Literal
    ArrayLiteral
    ObjectLiteral
    ( Expression ) 
```

所以构造`ArrayLiteral[Expression]`是有效的。

* * *

这并不一定意味着它适用于所有浏览器（尤其是 IE 有一些语法怪癖），但您应该假设它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:19:13.097

是的，它会。这个语法乍一看很奇怪，但它是完全有效的。您正在从未分配给任何东西的数组中获取位置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:19:35.987

这是有效的。这和做的差不多

```
 some_func_that_returns_an_array()[7] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T20:43:57.640

是的，数组字面量可以是[成员运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)的语法上有效的左侧部分。它确实可以跨浏览器工作。

我发现这个结构是冗长语句的一个非常易读的替代方案`switch`，并且也将它与对象文字一起使用。

# jquery - 在角落显示图像，以便在调整窗口大小后图像保持在同一位置

> ID：14223299
> 
> 赞同：0
> 
> 时间：2013-01-08T20:17:14.427
> 
> 标签：jquery, css, html, jquery-mobile

我正在`HTML5`使用 Jquery Mobile 构建一个移动应用程序，我想做的是显示 2 张图像，一张在右侧，另一张在左侧。重要的是在调整窗口浏览器大小时，图像不应该消失，并且始终显示在右侧和左侧，以便适应不同的移动屏幕。

我尝试使用 CSS : `float:right`, `left:85%`...

但是调整大小后它就消失了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:29:09.820

没有看到任何代码，我不确定你尝试了什么。但是您可以使用以下方法实现此目的：

```
<div style="position:fixed;left:0;"><img src="fakeimageurl.jpg" width="100" /></div>
<div style="position:fixed;right:0;"><img src="fakeimageurl.jpg" width="100" /></div> 
```

或者，如果您希望图像不随滚动移动...

```
<div style="position:absolute;left:0;"><img src="fakeimageurl.jpg" width="100" /></div>
<div style="position:absolute;right:0;"><img src="fakeimageurl.jpg" width="100" /></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:30:42.910

[这是一个](http://codepen.io/josiahruddell/pen/oclwK)帮助您入门的示例。尝试重新调整浏览器的大小。

我建议使用 psuedo`before`和`after`选择器来创建您的背景图像标记，因为这不是您在语义上希望出现在页面上的东西

基本标记：

```
<div id="main">
    Page content
</div> 
```

基本 CSS：

```
#main { position: relative; z-index: 1 }
#main:before { content: ''; z-index: -1; position: absolute; top:0; bottom: 0; left: 0; right: 50%;  }
#main:after { content: ''; z-index: -1; position: absolute; top:0; bottom: 0; right: 0; left: 50%; } 
```

,将元素拉伸到目标容器 ( ) 的整个高度，而 //占据`top:0`适当的一半。`bottom:0``#main``left``right` `0``50%`

现在设置背景图像`before`和`after`定义。您也可以使用缩放背景图像[`background-size`](http://www.css3.info/preview/background-size/)，但这可能不是必需的。

# ruby-on-rails - pg_search 进行高级搜索

> ID：14223301
> 
> 赞同：1
> 
> 时间：2013-01-08T20:17:16.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, pg-search

我试图弄清楚如何使用 pg_search_gem 和 pg_search_scope 将多个参数传递给我的搜索

这是我的简单搜索

```
include PgSearch
  pg_search_scope :simple_search, against: [:title, :description], using: { tsearch: { dictionary: "spanish"} } 

def self.search(search)
    if search.present?
        simple_search(search)
    else
        find(:all)
    end
end 
```

但现在我正在尝试做这样的事情

```
include PgSearch
  pg_search_scope :simple_search, against: [:title, :place, :category], using: { tsearch: { dictionary: "spanish"} } 

def self.searchadv(title, place, category)
  simple_search(:title => title, :place => place, :category => category)
end 
```

我知道这是完全错误的，但这是我的调查。

* * *

更新

这是新代码

```
 pg_search_scope :advance_search, lambda {|*args, query|
      return {:against => args,
      :query => query,
      using: { tsearch: { dictionary: "spanish"} } }
  }

def self.searchadv(query, title, place, category)
    advance_search(:all, :title => title, :place => place, :category => category)
end 
```

还是行不通。但它几乎完成了！我收到此错误：

```
wrong number of arguments (3 for 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:37:06.440

您可以使用[动态搜索范围](https://github.com/Casecommons/pg_search#dynamic-search-scopes)

```
include PgSearch
  pg_search_scope :simple_search, lambda do |query, *args| 
    return { :against => args, :query => query }
  end

def self.searchadv(query, title, place, category)
  simple_search(query, :title => title, :place => place, :category => category)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-13T09:56:57.837

4年前，我正在寻找这个问题的答案。所以，这就是我发现的并且有效。也许它会帮助某人：

我将 2 个数组传递给搜索范围，一个带有列，另一个带有查询。因此，您可以根据需要添加任意数量的列和查询。

```
include PgSearch
  pg_search_scope :advanced_search, (lambda do |args, query|
    return {
      :against => args, :query => query
    }
  end)

Model.advanced_search([:name, :current_status, :user_id],
            [params[:q_name], params[:q_status], params[:q_user]]) 
```

# python - 如何在 MS Windows 操作系统上使用 Google 的 repo 工具？

> ID：14223302
> 
> 赞同：19
> 
> 时间：2013-01-08T20:17:18.133
> 
> 标签：python, visual-studio-2010, git, python-2.7, repository

我为 windows 安装了 git，它工作正常（例如，使用以下解决方案之一[想要下载 Git 存储库，我需要什么（windows 机器）？](https://stackoverflow.com/questions/110205/want-to-download-a-git-repository-what-do-i-need-windows-machine)）。

[我尝试使用`repo`google](http://code.google.com/p/git-repo/)，但它需要[gpg](http://www.gnupg.org/)和 python 2.7。我安装了两者，它工作正常，唯一的问题是`repo`脚本使用了一些面向 unix 的功能，例如符号链接和[fcntl](http://docs.python.org/2/library/fcntl.html)。是否有任何`repo`用于 windows 的替代代码？

我找不到谷歌的一些原生解决方案。如果有，我会尝试将其推送到 google repo git 存储库或尝试按原样使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-07T10:19:41.247

可在此处获得适用于 Windows 的工作回购工具：[https ://github.com/esrlabs/git-repo](https://github.com/esrlabs/git-repo)

它需要 Python 3+ 和 git 1.7.2+

顺便说一句，最初的分叉回购版本似乎很旧，所以它可能不包含所有当前功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-06T08:05:40.073

**是的，Google`repo`脚本可以兼容 Windows。请按照以下步骤操作。**

但之前，正如[Borealid](https://stackoverflow.com/a/14224458/938111)所说`repo`，没有被移植到 Windows 上。`repo`( `forall.py`) 使用[`fcntl`在 Windows 上不可用的（仅限 Unix）](http://docs.python.org/2.7/library/fcntl.html?highlight=fcntl#fcntl)。

但是有[Cygwin](http://www.cygwin.com/install.html)和它自己的`python`工具`git`。

如果`git`您的 MSysGit 项目版本适合您，或者您喜欢`git`仅基于 MSysGit 的 GUI，请按照以下步骤操作。这些步骤确保[Cygwin 可以创建本机 NTFS 符号链接](https://stackoverflow.com/a/18659632/938111)。否则，如果`git`来自 Cygwin 就足够了，则您不必这样做。但最好是设置`CYGWIN=winsymlinks:native`告诉 Cygwin 使用本机 NTFS 符号链接而不是旧的 Cygwin 解决方法。

1.  使用 Windows Vista 或更高版本（或切换到 Linux）
2.  拥有管理员权限
3.  下载并安装 Cygwin（32 位或 64 位）
4.  从 Cygwin 安装程序中选择并安装`python`和`git`（`gpg`如果需要）
5.  `CYGWIN=winsymlinks:native`在 Cygwin shell 中设置：

    ```
    export CYGWIN=winsymlinks:native
    mkdir NEW_DIR
    cd    NEW_DIR
    repo init -u YOUR_URL
    repo sync -j 7 
    ```

（另见[我的另一篇文章](https://stackoverflow.com/a/18639953/938111)）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-05T17:14:54.990

对于可以选择使用 repo 的替代方案的人来说，有一个替代方案，它被称为[gclient](https://www.chromium.org/developers/how-tos/depottools/gclient)。

请参阅[Google 的仓库工具](https://www.chromium.org/developers/how-tos/depottools)：

> gclient：管理 subversion 和 git 结帐的元结帐工具。它类似于 repo 工具，不同之处在于它可以在 Linux、OS X 和 Windows 上运行，并且同时支持 svn 和 git。另一方面，gclient 没有集成任何代码审查功能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-08T21:37:01.607

目前没有`repo`适用于 Windows 的本机。

您可以使用 Linux 虚拟机或双引导，或解决由符号链接在文件系统上不起作用引起的（相对较小的）问题。

另一种选择是`git`直接使用而不是使用`repo`作为便利包装器 -`repo`是一种支持工具，不会增加任何实质性的力量。

# css - 字体在 Mozilla 和 chrome 中不起作用

> ID：14223304
> 
> 赞同：0
> 
> 时间：2013-01-08T20:17:26.037
> 
> 标签：css, font-face

我在 mozilla 浏览器和 chrome 中遇到字体问题。实际上，我使用 font-face 并且它工作正常，但这是我第一次使用 font-face 和 font : Penshurst 并且它不工作。当我使用另一种字体时工作正常。

这是我的字体代码：

```
@font-face{
    font-family:Penshurst;
    src:url("../../plugin/font/penshurst.ttf"),url("../../plugin/font/penshurst.eot");
}
@font-face{
    font-family:Century Regular;
    src:url("../../plugin/font/century gothic regular.ttf"),url("../../plugin/font/century gothic regular.eot");
} 
```

对于字体为：Century Regular 的字体，它工作正常，但对于 Penshurst，它不起作用。

对这个问题有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:07:30.663

这是正确的格式：

```
@font-face {font-family: 'Penshurst';
    src: url('../../plugin/font/penshurst.eot');
    src: url('../../plugin/font/penshurst.eot?#iefix') format('embedded-opentype')? /* if needed for IE */,
         url('../../plugin/font/penshurst.ttf') format('truetype'),
    font-weight: normal;
    font-style: normal;
} 
```

另外......你可能需要这个：

```
 `url('../../plugin/font/penshurst.woff') format('woff'),` 
```

...您可能必须转换才能获得此...（请参阅下面我评论中的链接）

确保您的服务器 IIS 具有 .eot/.otf/.ttf/.woff 的 MIME 类型，这样您就可以在本地或在线（服务器）预览它们......最后，即使您可以看到 Century Regular 并不意味着Penshurst 在您的服务器/本地主机中

:)

# php - 使用 jQuery.getJSON 传递给 php 的值

> ID：14223309
> 
> 赞同：0
> 
> 时间：2013-01-08T20:17:50.693
> 
> 标签：php, jquery

你能从这个 getJson() 处理 php 中的名字“John”吗？你能把它分配给一个php变量吗？

```
var output = [];
$.getJSON('DisplayMap.php',{ Name: "john" },  function(data) {
           for (var i in data.b) {
            output.push(new google.maps.LatLng(data.b[i].Ya, data.b[i].Za));
        }

  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:20:52.087

由于它会发起一个 HTTP GET 请求，因此您可以在 PHP 中获取变量，如下所示

```
$Name = $_GET["name"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:21:38.237

此代码将导致 GET 请求`./DisplayMap.php`使用名为`Name`set 的查询字符串变量的值`john`：

```
http://www.site.com/DisplayMap.php?Name=john 
```

在 PHP 中，您可以通过`$_GET['Name']`或访问它`$_REQUEST['Name']`。

至于成功功能以及那里发生了什么，我真的不知道您的系统返回什么，并且似乎与您的问题无关。

# wordpress - 在 wordpress functions.php 中的指定自定义分类中显示术语

> ID：14223312
> 
> 赞同：0
> 
> 时间：2013-01-08T20:17:57.320
> 
> 标签：wordpress

在wordpress的functions.php中，我正在使用一个函数来显示信息，如果该帖子被标记为某个术语，但在自定义分类中“不是常规（标签）”自定义分类将是“特殊信息”或“特殊信息”作为其蛞蝓

在我下面的代码中，它非常简单，但是如果帖子具有“块”块的“特殊信息”分类是“特殊信息”的术语，那么我怎么能“在 div 内”，然后在此处显示“指定的文本。 ..” 错误，我希望这是有道理的

我的代码函数 vision_contacts_description(){

```
if (has_term( 'colour-vision', 'brand' )) {

echo '<div class="repeat-descriptions" style=" padding-bottom: 10px;">Display Term within "Specified Custom Tax" Here.</div>' ;
}
}
add_action('woocommerce_product_thumbnails', 'vision_contacts_description', 25); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:41:18.270

您可以尝试使用 *wp_get_post_term* 函数，该函数将为您的分类法返回所有术语（[http://codex.wordpress.org/Function_Reference/wp_get_post_terms](http://codex.wordpress.org/Function_Reference/wp_get_post_terms)）。

```
function someFuncName() {
    global $post;
    $terms = wp_get_post_term($post->ID, 'special-info');
    foreach ($terms as $term) {
        if ('Block' === $term['name']) {
            //do something
            break;
        }
    }
} 
```

希望这可以帮助。

# knockout.js - 在 Knockout CSS 绑定中组合值

> ID：14223316
> 
> 赞同：0
> 
> 时间：2013-01-08T20:18:04.790
> 
> 标签：knockout.js

我需要将各种值绑定到我的 div 的 CSS：

在下面的示例中，我想添加一个取决于值是奇数还是偶数的 CSS 值，一个名为“highlight”的静态类，并且我还想添加一个基于我的 observables 之一的 CSS 类（称为姓名'）。一切正常，直到我尝试添加 ProductName(): true

```
<div data-bind="css: { even: $index()% 2 == 0, odd: $index()% 2 != 0, highlight: true, ProductName(): true }"> 
```

如何将可观察值的字符串添加到 CSS 绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:55:23.610

您可以通过淘汰赛 2.2.0 做到这一点。如果您使用的是早期版本，它将无法正常工作：

[看这里](http://blog.stevensanderson.com/2012/10/29/knockout-2-2-0-released/)

然后，您应该能够执行以下操作：

```
<div data-bind="css: { even: $index()% 2 == 0, odd: $index()% 2 != 0, highlight: true, ProductName }"> 
```

假设属性`ProductName`是 CSS 类的名称。

# git - 接收后挂钩未触发

> ID：14223317
> 
> 赞同：1
> 
> 时间：2013-01-08T20:18:12.300
> 
> 标签：git, hook

我安装了 sparkleshare 推荐的“ [Dazzle](https://github.com/hbons/Dazzle) ”。Sparkleshare 同步，一切正常。

我想在我的 git 存储库中添加一个钩子。

/home/storage/TEST/
- 分支
- 钩子
- 信息
- 对象
...

我的钩子是 /home/storage/TEST/hooks/post-receive

这是我的钩子（这只是一个测试）：

```
#!/bin/sh
touch /home/test.txt 
```

我做了`chmod -x /home/storage/TEST/hooks/post-receive`

但是当 Sparkleshare 同步时，钩子不会运行。

# twitter-bootstrap - 为 Twitter Bootstrap 覆盖 Play 2.1 复选框表单助手

> ID：14223318
> 
> 赞同：3
> 
> 时间：2013-01-08T20:18:15.060
> 
> 标签：twitter-bootstrap, playframework-2.1

我想显示一个 HTML 复选框，然后是右侧的标签。

我按照[Pere Villega 的建议](https://stackoverflow.com/questions/10206961/is-it-possible-to-override-form-helpers)，修改了 as 的 Play 2.1-SNAPSHOT`views.helper.checkbox.scala`版本`views.helper.twitterCheckbox.scala`。我的项目使用[Webjars](http://www.jamesward.com/2012/04/25/introducing-webjars-web-libraries-as-managed-dependencies)提供的 Twitter Bootstrap 版本：

```
@**
 * Generate an HTML input checkbox for Twitter Bootstrap.
 *
 * Example:
 * {{{
 * @checkbox(field = myForm("done"))
 * }}}
 *
 * @param field The form field.
 * @param args Set of extra HTML attributes ('''id''' and '''label''' are 2 special arguments).
 * @param handler The field constructor.
 *@
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

@boxValue = @{ args.toMap.get('value).getOrElse("true") }

@input(field, args:_*) { (id, name, value, htmlArgs) =>
  <label class="checkbox">
    <input type="checkbox" name="@name" value="@boxValue" @(
      if(value == Some(boxValue)) "checked" else "") @toHtmlArgs(htmlArgs.filterKeys(_ == 'value)) />
    @args.toMap.get('_text)
  </label>
} 
```

我使用了这样的表单助手：

```
@import helper._
@form(action = courseName.map(routes.CoursesController.update(_)).getOrElse(routes.CoursesController.save()),
               args = 'class -> "form-horizontal") {
  <div class="span3">
    <p><b>@{if (allCourses.size>0) "" else "No "}Prerequisite Courses</b></p>
    <div class="control-group">
      <div class="controls">
        @allCourses.map { course =>
          @twitterCheckbox(field = editCourseForm(course.name))
        }
      </div>
    </div>
  </div>
} 
```

但是我得到这样的输出，这导致复选框与标签位于不同的行。输出已被格式化以提高可读性 - 请注意`dl`和`dd`标签：

```
<form action="/courses/admin" method="POST" class="form-horizontal">
<div class="span3">
  <p><b>Prerequisite Courses</b></p>
  <div class="control-group">
    <div class="controls">
      <dl class=" " id="skus_field">
        <dt><label for="skus">skus</label></dt>
        <dd>
          <label class="checkbox">
            <input type="checkbox" name="skus" value="true"   />
          </label>
        </dd>
       </dl>
    </div>
  </div>
</div>
</form> 
```

似乎有某种我不知道的隐含行为。我怎样才能生成类似以下的内容，或者至少生成一些可以提供所需结果的输出？

```
<form action="/courses/admin" method="POST" class="form-horizontal">
<div class="span3">
  <p><b>Prerequisite Courses</b></p>
  <div class="control-group">
    <div class="controls">
      <label class="checkbox">
        <input name="skues" type="checkbox" value="true"> sku1
      </label>
    </div>
  </div>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T10:00:41.417

我有一个类似的问题：复选框的格式不适合 TwitterBootstrap CSS。

所以我必须定义我自己的复选框助手（为了添加`<label>`标签）：

文件路径：

`app\views\helper\checkbox2.scala.html`

内容：

```
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

<label class="checkbox">
    @checkbox(field, args:_*)
</label> 
```

然后，我重新定义了字段构造函数模板以匹配 Twitter Bootstrap：

文件路径：

`app\views\helper\bootstrapInput.scala.html`

内容：

```
@(elements: helper.FieldElements)

<div class="control-group @if(elements.hasErrors) {error}">
    <label class="control-label" for="@elements.id">@elements.label</label>
    <div class="controls">
        @elements.input
        @if(!elements.errors.isEmpty) {
            <span class="help-inline alert alert-error">@elements.errors(elements.lang).mkString(", ")</span>
        }
        <span class="help-block">@elements.infos(elements.lang).mkString(", ")</span>
    </div>
</div> 
```

然后我创建了一个对上面模板进行隐式调用的字段构造函数：

文件路径：

`app\controllers\helpers\BootstrapHelper.scala`

内容：

```
package controllers.helpers

import views.html.helper.FieldConstructor

object BootstrapHelper {
  implicit val myFields = FieldConstructor(views.html.helper.bootstrapInput.f)
} 
```

最后，我只是在我的“正常”视图中导入它：

```
@import helper._
@import helpers.BootstrapHelper._ 
```

这正是在文档（[http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers](http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers)）中写的，效果很好。

最后，我的所有输入都使用 Twitter Bootstrap 和复选框正确显示。

希望这可以帮助

**按照 Mike Slinn**的要求进行编辑，我刚刚添加了文件路径和一些关于字段构造函数的隐式调用的细节。但是，文件名在这里并不重要，并且可以进行隐式调用（请参阅文档）。

# jquery - jquery ui 滑块值避免截断到小数点后 5 位

> ID：14223320
> 
> 赞同：0
> 
> 时间：2013-01-08T20:18:23.190
> 
> 标签：jquery, user-interface, jquery-ui, slider

我正在使用带有 10 个小数位步骤的 jquery 滑块来简化一些计算。我遇到了一些计算没有加起来的问题，我刚刚发现对于 1/3 的值，滑块值被截断到小数点后 5 位，即 0.33333333333。

有没有办法强制 jquery ui 滑块的 value 方法不截断值或在存储滑块值时使用一定数量的小数位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:47:02.203

没有办法通过 jqueryui API 做到这一点。

但是，有一个明确的四舍五入到 5 位数字`_trimValueAlign`但是，滑块类

在 v1.9.2（当前稳定版本）中，这是在非缩小脚本的第 11530 行。这是代码片段。

```
// Since JavaScript has problems with large floats, round
// the final value to 5 digits after the decimal point (see #4124)
return parseFloat( alignValue.toFixed(5) ); 
```

您可以考虑将其直接更改为您需要的 10 个并进行大量测试。

[还可以考虑提出票证或要求jqueryui 社区](http://jqueryui.com/development/)对此进行查看，这可能是一个过时的修复程序。（？）引用的问题涉及 Firefox 3.x 和 Windows XP [http://bugs.jqueryui.com/票/4124](http://bugs.jqueryui.com/ticket/4124)

# design-patterns - 特定于角色的存储库与特定存储库

> ID：14223321
> 
> 赞同：0
> 
> 时间：2013-01-08T20:18:33.657
> 
> 标签：design-patterns, domain-driven-design, repository-pattern

[在找到这篇文章](http://lostechies.com/jimmybogard/2009/09/03/ddd-repository-implementation-patterns/)之前，我不知道角色特定的存储库：

> 我们可以选择将接口隔离原则应用于基于角色的接口，并定义只公开一个类需要的接口，而不是一个公开所有方法的包罗万象的存储库。
> 
> ```
> public interface IProductRepositoryForNewOrder
> {
>     Product[] FindDiscontinuedProducts();
> } 
> ```
> 
> 单个存储库实现实现了所有产品存储库接口，但调用者只公开和使用所需的单个方法。

a) 两者之间的区别在于，对于*特定存储库*，我们每个聚合根有一个特定的合约，而*角色特定的存储库*我们可以每个聚合根有多个合约，这些合约中的每一个都是针对在聚合上运行的特定调用者的需求量身定制的根？

b) 在您看来，这两种模式各自的优缺点是什么？

谢谢

**更新：**

昨天我找到了您的一个[答案](https://stackoverflow.com/questions/12734000/is-it-considered-a-bad-practice-for-domain-code-to-request-data-it-needs)，本质上您认为应该使用角色特定的存储库模式：

> “另一种选择是使用 lambda 代替 OrdersSelectorService。如果 lambda 在您的语言中不可用，那么它应该是一个接口。传递 OrderRepository 的好处是基于接口隔离原则，其目标是减少不必要的耦合。 Customer 的行为不太可能需要 OrderRepository 上的所有方法，而是需要一个特定的函数，所以要明确说明。”

为什么在上面的摘录中您提倡使用角色特定存储库模式，但在这里您似乎建议仅在特殊情况下使用它。另一个主题中的示例是否是特殊情况（除此之外 - 我绝不是说您在自相矛盾，我只是看不出这两个示例在使用或不使用角色特定模式方面有何不同） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:29:34.767

a) 是的。这就是接口隔离原则。明确角色/用例。好处是减少和“清理”依赖关系。

b) 对我来说，角色特定方法的主要缺点是接口的激增以及由此导致的布线、引用等的增加。然而，这种缺点可以被视为不是由于原理上的缺陷，而是更多在编程语言中。在诸如 F# 之类的函数式语言中，由于函数而非接口的激增，接口隔离是默认方法。从某种意义上说，函数是一种“更锋利”的工具。

非角色特定方法的优点在于它可以被视为定义数据访问契约的单一语言元素、接口或类。在某些情况下，从技术角度评估架构是很有价值的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:17:28.543

我完全支持 SOLID 代码，但接口隔离原则确实有其局限性，尤其是在 DDD 上下文中。

*[挑剔模式]*

如果您将 ISP 应用于这封信，您几乎可以从文章中获取关于存储库的声明并稍作修改以说明

> 使用**域实体**的类​​很少使用其中的每个方法。

因此，对于每个领域实体，您应该创建与实体的客户端一样多的接口，每个接口中只包含与客户端相关的方法，并让实体实现这些接口。

当然，这是荒谬的，没有人会这样做。但是，嘿，ISP 应该是一个通用的 OO 概念，不是吗？

*[/ nitpicker 模式]*

现在，如果我们回顾一下 ISP 存在的最初原因，它应该与胖接口（即没有内聚性的接口）作斗争。但是存储库本身不是有凝聚力的吗？它不是一个基本的、原子的 DDD 构建块吗？它是否值得分成几十个迷你查询对象？此外，我们领域中的每个类不应该与通用语言对齐吗？对于诸如`ProductRepoInterfaceForClient1`, `ProductRepoInterfaceForClient2`, `ProductRepoInterfaceForClient3`...之类的接口，情况并非如此。

不要误会我的意思，ISP 仍然很有用，尤其是作为一种检测接口的合同何时比应有的更加异构的方法。Bob 大叔关于 ISP 的[原始论文](http://www.cs.utexas.edu/users/downing/papers/InterfaceSegregation1996.pdf)有很好的例子——参见“接口污染”段落和 ATM 示例。

但是一旦达到了合理的内聚水平，ISP 不应该盲目地应用 IMO，特别是如果它与基本的 DDD 原则相冲突，或者用数百个接口淹没你的代码库，这成为维护的噩梦。

# iphone - 将 ipad 应用程序转换为具有自定义视图的 iphone 应用程序

> ID：14223331
> 
> 赞同：0
> 
> 时间：2013-01-08T20:19:11.153
> 
> 标签：iphone, ios, ipad, scale, ios-universal-app

这可能是一个重复的问题。但我有一个问题。我有一个 iPad 应用程序功能。该应用程序是在 iOS 6 中构建的。当我开始构建它时，我选择 iPad 作为目标设备，而不是通用的。现在我的客户要求它的 iPhone 版本。在我的 iPad 应用程序中，当客户单击“添加更多”时，我不断添加自定义视图。我添加了一个自定义视图，它是一堆文本字段、按钮等。所以我复制了我的 iPad 应用程序并将目标设备系列更改为 iPhone 一次，下一次更改为 Universal 并对其进行测试。因此，当我在 iPhone 配置中启动应用程序（将目标设备系列保持为通用）时，我的视图控制器与 iPad 上的一样。我也无法滚动应用程序（不能向上/向下..也不能横向滚动）。这是将 iPad 应用程序转换为 iPhone 应用程序的正确方法吗？此外，一切仍可扩展到 iPad。我是否应该开始一个新项目并从头开始。根据 iPhone 配置设置情节提要？在我的研究中，人们说只需将目标设备系列更改为通用。但它不起作用。如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:22:43.617

可以将您拥有的当前项目转换为可以通用的应用程序，但这比简单地创建一个允许通用的新项目并添加您用于 iPad 项目的文件要花费更多时间.

提示：当项目被普遍创建时，您可以使用多个故事板。它会自动为您设置。

我还建议您将文件分为通用文件和 iPhone 或 iPad 专用文件。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T11:00:00.300

经过多次搜索，我发现它可以同时适用于 Iphone 和 ipad 设备。但是在您的代码中，您应该为每个设备定义唯一的 ui（两个 xib 文件）。

# cobol - 有没有办法使用 INSPECT TALLYING 检查多个字符？

> ID：14223334
> 
> 赞同：3
> 
> 时间：2013-01-08T20:19:32.033
> 
> 标签：cobol, mainframe, inspect

我有一个字符串，我希望对其进行计数，直到找到某种字符模式。

例如：

给一个字符串：`askabanskarkartikrockstar`
我想知道`kartik`字符串中的之前有多少个字符。

在我需要`k`在给定字符串中查找之前的字符数的正常情况下，我会将代码编写为：

```
INSPECT WS-INPUT-STRING TALLYING CT-COUNTER FOR CHARACTERS BEFORE LT-K 
```

在哪里

*   `WS-INPUT-STRING`是字母数字，值为 `askabanskarkartikrockstar`,
*   `CT-COUNTER`是用来统计字符数的计数器
*   `LT-K`是一个值为 的文字`k`。

但是在这里，如果我希望对子字符串做同样的事情，就像`kartik`上面的例子一样，用`LT-K`with`kartik`替换的值会不会`k`起作用？如果是，是否同样适用于具有十六进制数字形式的值的字母数字文字（例如，在文字中将`X(02)`换行符存储为`x'0D25'`）？

我正在尝试在 zOS IBM 大型机 v10 中实现上述代码。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T21:06:06.130

你几乎已经回答了你自己的问题......答案是肯定的，你可以做到这一点。这是一个工作示例程序：

```
 IDENTIFICATION DIVISION.
  PROGRAM-ID. EXAMPLE.
  DATA DIVISION.
  WORKING-STORAGE SECTION.
  01    WS-INPUT-STRING PIC X(80).
  01    WS-COUNTER      PIC 9(4).
  01    WS-TAG          PIC X(10).
  PROCEDURE DIVISION.
  MAIN-PARAGRAPH.
       MOVE 'askabanskarkartikrockstar' TO WS-INPUT-STRING
       MOVE ZERO                        TO WS-COUNTER
       MOVE 'kartik'                    TO WS-TAG
       INSPECT WS-INPUT-STRING
       TALLYING WS-COUNTER
       FOR CHARACTERS BEFORE WS-TAG(1:6)
       DISPLAY WS-COUNTER
       GOBACK
       . 
```

`WS-COUNTER`显示为 11，字符串前有 11 个字符`WS-TAG`。

请注意，我定义`WS-TAG`为`PIC X(10)`。此变量比您要查找的实际标签值长。为了防止`INSPECT`动词试图匹配由以下引入的尾随空格：

```
 MOVE 'kartik' TO WS-TAG 
```

我必须指定`INSPECT`要搜索的参考修改值。如果我只是使用：

```
 FOR CHARACTERS BEFORE WS-TAG 
```

如果没有参考修改，`WS-COUNTER`将是 80 - 的长度`WS-INPUT-STRING`。这是因为`'kartik '`未找到该字符串，并且计数器计算了整个输入字符串的长度。

另一种方法是将标签指定为文字：

```
 FOR CHARACTERS BEFORE 'kartik' 
```

您可以将十六进制常量移动到`PIC X`字段中，如下所示：

```
 MOVE X'0D25' TO WS-TAG 
```

这占用 2 个字符，因此您可以`WS-TAG(1:2)`在`INSPECT`ing 时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:04:03.303

如果你想一次做“很多”，那么你会发现 PERFORM VARYING 会更快。打字多了，你要多想，出错的机会也多。但是一旦你有一个工作，你只需要复制代码来重用它。

# sql - 在 SQL 中设置重叠百分比

> ID：14223335
> 
> 赞同：0
> 
> 时间：2013-01-08T20:19:32.533
> 
> 标签：sql, set, overlap

假设 SQL 数据库中的表结构如下：

```
Att1   |   Att2   |   Att3   |  Cnt 
```

我想了解给定 Att1 的所有 Att2 组合的 Att3 重叠。例如，如果我有下表：

```
123   |   456    |   abc    |  1
123   |   456    |   efg    |  1
123   |   456    |   hij    |  1
123   |   456    |   klm    |  1
123   |   456    |   nop    |  1
123   |   789    |   efg    |  1
123   |   789    |   abc    |  1
123   |   789    |   xyz    |  1
123   |   789    |   nop    |  1
345   |   456    |   abc    |  1
345   |   456    |   efg    |  1
345   |   789    |   abc    |  1
345   |   999    |   efg    |  1 
```

我会生成以下输出：

```
123   |   456    |   456    |  1.0
123   |   456    |   789    |  .6
123   |   789    |   456    |  .75
123   |   789    |   789    |  1.0
345   |   456    |   456    |  1.0
345   |   456    |   789    |  .5
345   |   456    |   999    |  .5
345   |   789    |   456    |  1.0
345   |   789    |   789    |  1.0 
345   |   789    |   999    |  0
345   |   999    |   456    |  1.0
345   |   999    |   789    |  0  
345   |   999    |   999    |  1.0 
```

我知道这可能不是使用 SQL 完成的最佳方式，因此我很高兴听到其他替代方案，但 SQL 是我目前拥有可用数据的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:40:21.207

您可以使用聚合的一些简单技巧来做到这一点：

```
SELECT t1.att1, t1.att2, t2.att2 as att2_other, 
       SUM(CASE WHEN t2.att3 = t1.att3 THEN 1.0 ELSE 0 END)/COUNT(DISTINCT t1.att3) as Cnt
FROM table_name t1
JOIN table_name t2
  ON t1.att1 = t2.att1
GROUP BY t1.att1, t1.att2, t2.att2 
```

[在这里](http://sqlfiddle.com/#!2/c1bd8/3)工作 sqlfiddle

# c# - 多维对象内的深度搜索

> ID：14223342
> 
> 赞同：-1
> 
> 时间：2013-01-08T20:19:53.823
> 
> 标签：c#

我有一个复杂的类，其字段可以是列表字典和任何其他类。一些基本数据类型是`int`,`bool`或`string`一些枚举。我需要创建一个函数，该函数接受该类的一个实例和一个字符串，并根据是否提到字符串返回 true 或 false。

```
public class Record
  {
    public Dictionary<string,int> Counts { get; set; }
    public Dictionary<string,list<string>> Syns {get; set;}
    public string Name { get; set; }
    public KeyValuePair<string,KeyValuePair<string,bool>> Stuff { get; set; }
    //etc 
  } 
```

这是该方法应该做什么

```
 public static bool IsValuePresent(Object o, string keyword)
     {
       //cycle through all possible string values of o and check if keyword is present. 
       //return true if so, otherwise false
     } 
```

可能的电话：

```
 Record record = dbAccess.GetCurrent();
 bool flag = IsValuePresent(record, "Name"); 
```

备注：可以使用`ToJSON`，但这将验证`"name"`对象属性名称中是否存在，但它应该只验证值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:31:14.160

您应该能够使用递归并使用 System.Reflection。这是一个好帖子：

[反射 - 在我自己的程序集中递归迭代对象的属性 (Vb.Net/3.5)](https://stackoverflow.com/questions/1410807/reflection-iterate-objects-properties-recursively-within-my-own-assemblies-v)

看着：

```
foreach (PropertyInfo pi in o.GetType().GetProperties()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:36:38.677

抱歉，如果我误解了，但我认为您需要先参考您班级中的字段

`record->field1`或`record.field1`（对于静态分配的类）

我假设这些字段是一个字典类，因此您可以使用其中一种字典类方法来定位您的字符串。

```
record->field1.getindex("Name") 
```

然后，您可以将整个过程包装在您的方法中，并使其成为记录类中的方法或使其成为外部方法。下面我使用内部方法。

```
template <class T>
bool Record :: IsValuePresent(T listobject, string in) {

switch (typeof(listobject))
{
   case 'dictionary'
     if(record->field1.getindex(in) != -1)  // -1 meaning not present in this example
     {
       return false;
     } else return true;
   case 'list'
    // more code
   default: 
     return false;
} 
```

}

编译器应该优化上述方法。

# php - php 变量是 3 的倍数，从 2 开始

> ID：14223343
> 
> 赞同：0
> 
> 时间：2013-01-08T20:19:57.070
> 
> 标签：php

我正在尝试将类添加到页面的第一列和第三列。Column1 是 'alpha' 第三列是 'omega' --> 我有将它添加到第一列的代码。

使用从（包括）0 开始的变量（计数器），之后的每 3 个项目都会得到“alpha”，但我该怎么写：

之后（包括）$myNumber = 2, 5, 8... echo omega ??

```
$myNumber = 0
// Earlier in document

if ($myNumber % 3 == 0 || $myNumber == 0 ) { 
    // number is multiple of 3 ( after the first one ) - this works
    echo "alpha";
} else if (???????????????????????????????) {
    // show for 2, 5, 8, and so-on! 
    echo "omega";
}

// Later in the document
$myNumber++; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:21:28.160

您正在寻找的条件是：

```
} else if ($myNumber % 3 == 2) { 
```

顺便说一句，你不需要`|| $myNumber == 0`第一个条件，因为`0 % 3`它是零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:24:41.400

您正在寻找偏移量计算：

```
if (($i    ) % 3 == 0) { ... } // 0, 3, 6, 9, ...
if (($i - 1) % 3 == 0) { ... } // 1, 4, 7, 10, ...
if (($i - 2) % 3 == 0) { ... } // 2, 5, 8, 11, ... 
```

# while-loop - ksh 循环将文件的结果放入变量中

> ID：14223345
> 
> 赞同：1
> 
> 时间：2013-01-08T20:20:17.377
> 
> 标签：while-loop, ksh

我不确定处理这个问题的最佳方法，我猜它正在使用 while 循环。我有一个带有一组数字的 .txt 文件（这些数字可以根据另一个运行的脚本而改变）例如：

```
0
36
41
53
60 
```

每个数字都在它自己的行上。对于每个数字，我想获取该数字并使用它执行脚本。所以在这个例子中，我将调用一个脚本来停止数据库 0，完成之后调用一个脚本来停止数据库 36，依此类推，直到它完成了列表中的所有数字。

1）while循环是处理这个问题的最好方法吗？2) 我在尝试确定 [[condition]] 一次获得每个数字 1 时遇到了麻烦，我在哪里可以找到一些额外的帮助？

```
 while [[ condition ]] ; do
    command1 
    done 
```

出于测试目的，包含所有数字的文件是 test.txt。将执行的脚本是一个 python 脚本 - “amgr.py stop (number from test.txt)”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:01:53.410

这是一个更简单的方法：

```
cat test.txt | xargs amgr.py stop 
```

这将获取文件的每一行，然后将其作为您的额外参数`amgr.py`：

```
amgr.py stop 0
amgr.py stop 36
and so on.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:32:00.837

我最终使用这种方法给了我想要的结果。

```
while read -r line ; do
amgr.py stop $line
done<test.txt 
```

# c# - 将 byte[] 转换为基元数组的快速且节省内存的方法

> ID：14223346
> 
> 赞同：3
> 
> 时间：2013-01-08T20:20:23.413
> 
> 标签：c#, bytearray

我传递了一个字节数组，然后使用 System.Buffer.BlockCopy 将其转换为基元数组。基本上我的代码如下所示：

```
 void Convert(byte[] b)
    {
        int[] i1 = new int[100];    // real arrays much larger
        double[] d1 = new double[100];
        int iPos=0, iSize;

        iSize = i1.Length * sizeof(int);
        System.Buffer.BlockCopy(b, iPos, i1, 0, iSize);
        iPos += iSize;

        iSize = d1.Length * sizeof(double);
        System.Buffer.BlockCopy(b, iPos, d1, 0, iSize);
        iPos += iSize;

        //etc: lots of arrays

        b=null;         
    } 
```

这是相当高效的，但它的内存使用量显然是我的字节数组大小的 2 倍，直到 b 被释放。

有没有办法直接将字节数组的部分转换为我的原始数组？一个不涉及复制数据（因此不会使内存使用量翻倍），并且可能更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:55:15.450

您可以使用**不安全**的代码（如果您被允许使用它，我不会使用它）。但是您可以尝试这样的事情（无需使用额外的数组，只需使用字节数组）：

```
 unsafe public void Convert(void* b)
    {
        int i;

        double* asDouble = (double*)b;
        double sum1 = 0.0;
        for (i = 0; i < 100; i++, asDouble++)
            sum1 += *asDouble;

        int* asInt = (int*)asDouble;
        int sum2 = 0;
        for (i = 0; i < 100; i++, asInt++)
            sum2 += *asInt;
    }

    public unsafe void SomeThing()
    {
        byte[] rawbytes = new byte[44000];

        // Fill the "rawbytes" array somehow

        fixed (byte* ptr = rawbytes)
        {
            Convert(ptr);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:54:21.660

这是对数组联合结构的尝试（与其他帖子中的结构数组不同），因为这应该更快。

```
[StructLayout(LayoutKind.Explicit)]
public unsafe struct ByteBuffer
{        
    public const int IntSize=10;
    public const int DoubleSize=5;
    public const int IntBytes=sizeof(int)*IntSize;
    public const int DoubleBytes=sizeof(double)*DoubleSize;

    // Int array is unioned with byte array
    [FieldOffset(0)]
    fixed int int_array[IntSize];
    [FieldOffset(0)]
    fixed byte int_array_bytes[IntBytes];

    // Double array us unioned with byte array
    [FieldOffset(IntBytes)]
    fixed double double_array[DoubleSize];
    [FieldOffset(IntBytes)]
    fixed byte double_array_bytes[DoubleBytes];

    // Take array of bytes and distribute it 
    // by byte to each array
    public ByteBuffer(byte[] b)
    {
        fixed(byte* ptr=int_array_bytes)
        {
            for(int i=0; i<IntBytes; i++)
            {
                ptr[i]=b[i];
            }
        }
        fixed(byte* ptr=double_array_bytes)
        {

            for(int i=0; i<DoubleBytes; i++)
            {
                ptr[i]=b[IntBytes+i];
            }
        }
    }
    // Convert unmanaged array to managed array
    public int[] ToIntArray()
    {
        int[] result=new int[IntSize];
        fixed(int* ptr=int_array)
        {
            for(int i=0; i<IntSize; i++)
            {
                result[i]=ptr[i];
            }
        }
        return result;
    }
    // Convert unmanaged array to managed array
    public double[] ToDoubleArray()
    {
        double[] result=new double[DoubleSize];
        fixed(double* ptr=double_array)
        {
            for(int i=0; i<DoubleSize; i++)
            {
                result[i]=ptr[i];
            }
        }
        return result;
    }
}

class Program
{
    static void Main(string[] args)
    {
        // Load up with test data
        byte[] data=new byte[..];
        // I tested with 10 ints and 5 doubles encoded into bytes

        //Now to test the Fast conversion
        ByteBuffer bb=new ByteBuffer(data);
        int[] data1=bb.ToIntArray();
        double[] data2=bb.ToDoubleArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:16:31.807

可以使用不安全的代码。使用联合的一种解决方案（我不适用于您的情况）

```
namespace TestApplication
{
    using System;
    using System.Runtime.InteropServices;

    internal static class Program
    {
        private static unsafe void Main()
        {           
            var x = new ByteDoubleUnion();

            x.bytes[0] =  24;
            x.bytes[1] =  45;
            x.bytes[2] =  68;
            x.bytes[3] =  84;
            x.bytes[4] = 251;
            x.bytes[5] =  33;
            x.bytes[6] =   9;
            x.bytes[7] =  64;

            // Prints pi.
            Console.WriteLine(x.doubleValue);

            Console.ReadLine();
        }
    }

    [StructLayout(LayoutKind.Explicit)]
    internal unsafe struct ByteDoubleUnion
    {
        [FieldOffset(0)]
        internal Double doubleValue;

        [FieldOffset(0)]
        internal fixed Byte bytes[8];
    }
} 
```

一个解决方案只是投射指针。

```
namespace TestApplication
{
    using System;

    internal static class Program
    {
        private static unsafe void Main()
        {           
            var bytes = new Byte[] { 24, 45, 68, 84, 251, 33, 9, 64 };

            fixed (Byte* p = &bytes[0])
            {
                // Prints pi, too.
                Console.WriteLine(*((Double*)p));
            }

            Console.ReadLine();
        }
    }
} 
```

# php - zend 框架登录表单

> ID：14223349
> 
> 赞同：0
> 
> 时间：2013-01-08T20:20:30.410
> 
> 标签：php, database, zend-framework, login, validation

我有一个登录表单，通过数据库检查用户电子邮件和密码，如果匹配，则允许用户登录。问题是它检查与数据库中任何密码匹配的电子邮件或与任何电子邮件匹配的密码在数据库中。我希望它检查这个特定的用户电子邮件以匹配他的密码，而不是匹配数据库中存在的任何密码。

这是我的控制器，我认为我做错了：

```
$loginForm = new Application_Form_UserLogin();
if ($this->getRequest()->isPost('loginForm'))
    {   
        $email_adrress = $this->getRequest()->getParam('email_address');
        $password = $this->getRequest()->getParam('password');

        /************ Login Form ************/
        if ($loginForm->isValid($this->getRequest()->getParams()))
        {
            $user = $this->_helper->model('Users')->createRow($loginForm->getValues()); 
            $user = $this->_helper->model('Users')->fetchRowByFields(array('email' => $email_adrress, 'hash' => $password));

            if($user) 
            {
                Zend_Session::rememberMe(86400 * 14);
                Zend_Auth::getInstance()->getStorage()->write($user);
                $this->getHelper('redirector')->gotoRoute(array(), 'invite');
                return;
            } 
            else {
            }               
        }
    }$this->view->loginForm = $loginForm; 
```

我的表格：

```
class Application_Form_UserLogin extends Zend_Form
{
public $email, $password, $submit;

public function init()
{       
    $this->setName('loginForm');        

    $EmailExists = new Zend_Validate_Db_RecordExists(
            array(
                'table' => 'users',
                'field' => 'email'
            )
        );

    //$EmailExists->setMessage('Invalid email address, please try again. *');

    $PasswordExists = new Zend_Validate_Db_RecordExists(
            array(
                'table' => 'users',
                'field' => 'hash'
            )
        );

    $PasswordExists->setMessage('Invalid password, please try again. *');

    $this->email = $this->createElement('text', 'email_address')
                     ->setLabel('Email')
                     ->addValidator($EmailExists)
                     ->addValidator('EmailAddress')
                     ->setRequired(true);

    $this->password = $this->createElement('text', 'password')
                     ->setLabel('Password')
                     ->addValidator($PasswordExists)
                     ->setRequired(true);

    $this->submitButton = $this->createElement('button', 'btn_login')
                            ->setLabel('Login')
                            ->setAttrib('type', 'submit');

    $this->addElements(array($this->email, $this->password, $this->submit));

    $elementDecorators = array(
        'ViewHelper'
    );
    $this->setElementDecorators($elementDecorators);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:32:35.243

我不熟悉您尝试这样做的方式。fetchRowByFields 方法是您自己编写的吗？如果是这样，不看代码就很难帮助你。

您是否考虑过使用 Zend Framework 提供的机制对数据库执行身份验证？

Zend Framework 官方手册包含一个关于如何实现认证的简短教程：http: [//framework.zend.com/manual/1.12/en/learning.multiuser.authentication.html](http://framework.zend.com/manual/1.12/en/learning.multiuser.authentication.html)

你使用一个带有 Zend_Auth 类的适配器来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:04:28.727

我不会将此登录处理添加为其中一个元素的验证器。相反，我将`Zend_Auth`使用您的用户模型、电子邮件和密码作为构造函数参数创建一个身份验证适配器。然后，在控制器中，调用`Zend_Auth::authenticate($adapter)`.

就像是：

```
class Application_Model_AuthAdapter implements Zend_Auth_Adapter_Interface
{
    protected $userModel;   
    protected $email;
    protected $pass;

    public function __construct($userModel, $email, $pass)
    {
        $this->userModel = $userModel;
        $this->email = $email;
        $this->pass = $pass;
    }

    public function authenticate()
    {
        $user = $this->userModel->getByEmailAndPassword($this->email, $this->pass);
        if ($user){
            return new Zend_Auth_Result(Zend_Auth_Result::SUCCESS, $user);
        } else {
            return new Zend_Auth_Result(Zend_Auth_Result::FAILURE_CREDENTIAL_INVALID, null);
        }
    }
} 
```

然后在你的控制器中：

```
public function loginAction()
{
    $form = new Application_Form_UserLogin();
    if ($this->_request->isPost()) {
        if ($form->isValid($this->_request->getPost())) {
            $data = $form->getValues();
            $email = $data['email'];
            $pass = $data['pass'];
            $userModel = $this->_helper->model('Users');
            $authAdapter = new Application_Model_AuthAdapter($userModel, $email, $pass);
            $result = Zend_Auth::getInstance()->authenticate($adapter);
            if ($result->isValid()){
                // $user= $result->getIdentity(). Use it how you like.
                // Redirect someplace
            } else {
                $this->view->error = 'Invalid login';
            }
        }
    }
    $this->view->form = $form;
} 
```

有关更多详细信息，请参阅[Zend_Auth 参考](http://framework.zend.com/manual/1.12/en/zend.auth.introduction.html)。

# bash - 查找文件中包含重复字符的行

> ID：14223350
> 
> 赞同：4
> 
> 时间：2013-01-08T20:20:39.437
> 
> 标签：bash, sorting, duplicates, character

在查找包含重复字符的文本文件中的行时，我需要一些帮助。我更喜欢使用 bash，但任何其他方法都可以：)

一个小例子只是为了让事情清楚：
file.txt：

```
1234
11234
abcd
12234
ab321
1233
zs11w
12w2 
```

所需的输出：

```
11234
12234
1233
zs11w
12w2 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T20:44:54.120

```
grep '\(.\).*\1' file.txt 
```

匹配包含一个字符的任何行，任何字符串，然后是相同的字符，即任何有重复的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:47:54.900

珀尔：

```
perl -ne 'print if /(.)\1/' file.txt 
```

awk：

```
awk -F "" '{for (i=1; i<NF; i++) if ($i == $(i+1)) {print; next}}' flie.txt 
```

# php - 递减函数，递减表中的所有行

> ID：14223357
> 
> 赞同：0
> 
> 时间：2013-01-08T20:20:57.247
> 
> 标签：php, laravel, laravel-3

我使用的是 laravel v3.2.12-4，我遇到了递减函数的问题。此方法不是只更新一行，而是影响列中的所有行。我使用 Eloquent，我有一个 many_to_many 关系。

包含递减方法的代码是：

```
 foreach ($ids as $id) {
 $indicator = Indicator::find($id);
 $tags = $indicator->tags()->get();
 foreach ($tags as $tag) {

    $indicator->tags()->detach($tag->id);
    if ($tag->frequency == 1) {
        $tag->delete();
    } else {
        // I have to made  this code to fix the problem with decrement function
        // But i want to use decrement
        $tag->frequency = $tag->frequency - 1;
        $tag->save();

        // This dosnt work for me.
        // $tag->decrement('frequency');
    }
}

$indicator->delete();

} 
```

在模型类指标中，我与这个函数建立了关系：

```
public function tags()
{
    return $this->has_many_and_belongs_to('Tag');
} 
```

在模型类标签中，我与这个函数建立了关系：

```
public function indicators()
{
    return $this->has_many_and_belongs_to('Indicator');
} 
```

好吧，如果我对列进行了更新，这个结果对我来说没问题，但是当我使用递减函数时，这会影响所有行，我不知道这是一个错误还是这个方法的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:50:39.763

这就是它的设计方式。该`decrement()`方法实际上是[在查询构建器上定义的，](https://github.com/laravel/laravel/blob/master/laravel/database/query.php#L861)而不是在 Eloquents 构建器上。这意味着当您调用`$tag->decrement('frequency')`它时，它实际上是通过 QB 并简单地运行类似`UPDATE tag SET frequency=frequency - 1`. 注意没有 WHERE 子句？

您仍然可以使用该`decrement()`方法，但您必须这样做。

```
$tag->where_id($tag->id)->decrement('frequency'); 
```

现在你已经设置了 WHERE 子句，只有那个标签会被递减。当然，更清洁的解决方案就是您所拥有的。或者也许这个。

```
$tag->frequency--; 
```

未经测试，可能会引发某种错误。

# javascript - 如何使用按钮在服务器上执行某些操作？

> ID：14223360
> 
> 赞同：0
> 
> 时间：2013-01-08T20:21:09.793
> 
> 标签：javascript, jquery, html

我正在创建一个简单的网站，允许用户从服务器端下载一些文件。这些文件不会预先创建。也就是html页面上会有一个按钮。当用户单击该按钮时，页面将要求服务器从另一台服务器获取这些文件并将其压缩给用户。

目前我正在使用jquery。我创建了一个弹出对话框表单，其中有一个下载按钮：

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "Download": function() {},
        close: function() {}
    }
}); 
```

当用户点击下载按钮时，用户需要等待服务器生成文件（即阻塞调用）。

我对网络开发非常陌生。有谁可以帮我离开这里吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:27:56.957

如果您只想提供一个文件，您可以简单地在下载按钮中提供文件的位置，例如

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "Download": function() {window.location='{your file location}'},
        close: function() {}
    }
}); 
```

如果您想提供 zip 格式，则需要使用一些服务器端插件将其转换为 zip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:25:17.600

您需要某种服务器端功能来处理该部分。客户端代码（JavaScript + jQuery）与服务器端代码断开连接。它发起一个请求，但服务器端代码完全在它自己的应用程序上下文中运行以处理请求。

有许多服务器端平台可供选择：

*   ASP.NET
*   PHP
*   红宝石
*   爪哇
*   Python
*   节点.js
*   等等

除此之外，每个平台都有各种可以帮助项目的框架。

一些初步考虑包括：

*   您将在哪里托管它以及那里有什么可用的？
*   您最熟悉的其他编程语言是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:06:36.410

如前所述，您需要实现一些服务器端功能。一个可能的解决方案可能是一些这样的 PHP 脚本，例如：

```
<?php
// Code to create the file, I assume it will be an PNG image
$tempFilename = "your_file_name.png";

// The following two lines are important to turn the response into 
// a file download

header('Content-Type: image/png');
header('Content-Disposition: attachment; filename="' . $tempFilename . '"');

// this actually sends the file to the client, there are other
// ways to do this
readfile($tempFilename);
?> 
```

然后，您需要有一些支持 PHP 的服务器，例如 Apache，将 PHP 脚本放置在某处并使其可以通过 URL 访问。

当然，您可以使用您可能想要使用的其他服务器端技术来执行此操作。代码会有所不同，但原理是一样的。

# vb.net - VB.NET/WMI - 实时 Windows 服务监控？

> ID：14223368
> 
> 赞同：0
> 
> 时间：2013-01-08T20:21:59.033
> 
> 标签：vb.net, timer, wmi, monitoring

因此，我的工作中有一个应用程序可以将多个 Windows 服务安装到服务器上。作为一个附带项目，我被要求制作一个简单的 GUI，在每个服务的名称旁边用“灯”（带有红色或绿色点的图片框）列出这些服务。这个想法是，如果这些服务停止运行，“灯”将从绿色变为红色。

我已经构建了 GUI 部分，我可以查询远程服务器的服务，然后将其与我感兴趣的数组进行比较，并根据服务状态将每个服务旁边的“灯”设置为绿色/红色。我挂断的部分是如何实时监控这些服务？目前，我在 Form_Load 事件中只有以下代码：

```
Dim myConnectionOptions As New System.Management.ConnectionOptions
With myConnectionOptions
    .Impersonation = System.Management.ImpersonationLevel.Impersonate
    .Authentication = System.Management.AuthenticationLevel.Packet
End With

Try

    Dim myManagementScope As System.Management.ManagementScope
    myManagementScope = New System.Management.ManagementScope("\\" & SERVERNAME & "\root\cimv2", myConnectionOptions)
    myManagementScope.Connect()

    Dim query As New Management.ObjectQuery("SELECT * FROM Win32_Service")
    Dim searcher As New Management.ManagementObjectSearcher(myManagementScope, query)
    Dim i As Integer = 0

    For Each queryObj As Management.ManagementObject In searcher.Get()
        For Each service As String In arrServices
            If queryObj("DisplayName").Equals(service) Then
                If queryObj("State").Equals("Stopped") Then
                    arrLights(i).Image = My.Resources.redlight
                End If
                i += 1
            End If
        Next
    Next

Catch err As Management.ManagementException
    MessageBox.Show("WMI query failed with the following error: " & err.Message)
Catch unauthorizedErr As System.UnauthorizedAccessException
    MessageBox.Show("Authentication error: " & unauthorizedErr.Message)
End Try 
```

重复执行此代码的简单计时器会是最好的方法，还是有更优雅的解决方案？我在 VB.NET 和 WMI 方面有一点经验，但在任何类型的实时监控活动中都没有这样的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:12:35.453

首先我会把它放到一个线程中，这样即使你的连接超时你也不会冻结你的 UI，然后我会使用一个自定义的等待计时器而不是内置的，因为跨线程可能会很痛苦。

等待计时器：

```
Public Sub Wait(ByVal wait_time As Integer)
  Dim time As Date
  time = Now.AddMilliseconds(wait_time)
  Do While time > Now
     Application.DoEvents()
  Loop
End Sub 
```

线程示例：

```
Private services_check As Thread
private sub form1_load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
services_check = new thread(AddressOf 'Current code in a public sub')
services_cheack.IsBackground = True
Services_check.start() 
```

它可能不是最优雅的解决方案，但它是我将如何做到的，至于您当前的代码，对不起，我对远程连接的了解不够，无法帮助您。

# linux - bash case 复合模式不起作用

> ID：14223369
> 
> 赞同：0
> 
> 时间：2013-01-08T20:22:04.563
> 
> 标签：linux, bash, ubuntu

我正在编写一个简单的 bash 脚本来检测用户输入的模式，这是脚本：

```
printf "Enter charachter:\n";
read input

case $input in
    +([a-z]) )
        echo "lower case";
        ;;
    [A-Z])
        echo "Upper case";
        ;;
    [0-9])
        echo "Integer";
        ;;
    "")
        echo "Nothing";
        ;;  
    *)
        echo "Bad input";
        ;;
esac 
```

我收到此错误：

```
 line 5: syntax error near unexpected token `('
 line 5: `  +([a-z]) )' 
```

我尝试了这里建议的解决方案： [bash case statements 中的复合模式](https://stackoverflow.com/questions/7965753/composite-patterns-inside-bash-case-statements)

并且仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:39:37.180

为什么不使用

```
[a-z] 
```

代替

```
+([a-z]) 
```

?

或者我只是没有得到你的脚本目的？

# ruby - 负面的看后面，中间有东西

> ID：14223371
> 
> 赞同：3
> 
> 时间：2013-01-08T20:22:19.277
> 
> 标签：ruby, regex

我有两种类型的字符串。如果字符串包含`foo`first 和 later `bar`，则不应触摸它。如果它只包含`bar`，那么`bar`，应该替换为`qux`。

*   `"sometext foo someothetext bar somethirdtext"`不应该被触摸
*   `"sometext bar someothetext"`=>`"sometext qux someothetext"`

看起来我需要在后面使用负面的外观，但我无法让它正常工作。目前，我有一个表达：

```
str.gsub! (/(?<!foo)(.*)bar/), '\1qux' 
```

但是，它在两个字符串中都替换`bar`为 to 。`qux`我有一种把事情搞砸的感觉`.*`。我无法找到一个向后看的示例，其中向后看组不会立即在匹配组之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:30:21.897

如果您可以使用可变长度的lookbehinds，您可以将匹配替换`/(?<!foo.*)bar/`为`'qux'`。

如果不支持可变长度的lookbehinds，你真的可以使用lookbehind，因为你不知道开始lookbehind 的位置`foo`。以下是如何通过前瞻来做到这一点：

```
str.gsub!  (/\A(((?!foo).)*)bar/m), '\1qux' 
```

解释：

```
\A           # match at the start of the string
(            # start capture group 1
  (            # start capture group 2, repeat 0 or more times
    (?!foo)      # fail if 'foo' can match here
    .            # match a single character
  )*           # end capture group 2
)            # end capture group 1
bar          # match 'bar' 
```

这对每个字符执行负前瞻`(?!foo)`，直到我们匹配`bar`，所以它不会匹配`foo`之前出现的字符串`bar`。

字符串开头的锚点是必要的，因为如果你可以从字符串的中间开始，它只会在`f`in之后立即开始匹配`foo`。使用多行选项以便`.`字符匹配换行符，不确定这是否对您正在执行的操作是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:38:24.877

您可以执行以下操作：

```
if str.include? "foo"
  str = str.slice(0, str.index("foo")-1).sub("bar","qux") + str.slice(str.index("foo")-1, str.length)
else
  str = str.sub("bar","qux")
end 
```

它将替换“foo”的第一个实例之前的任何“bar”，然后附加字符串的其余部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:33:05.293

也许您可以使用 a`flag`来跟踪是否有`foo`前面。

```
flag = false
"sometext foo someothetext bar somethirdtext"
.gsub(/(foo)|bar/){flag = true if $1; flag ? $& : "qux"}
# => "sometext foo someothetext bar somethirdtext"

flag = false
"sometext bar someothetext"
.gsub(/(foo)|bar/){flag = true if $1; flag ? $& : "qux"}
# => "sometext qux someothetext" 
```

# c - C 能否像使用 shell 一样捕获标准输入/输出以与其他程序交互？

> ID：14223372
> 
> 赞同：1
> 
> 时间：2013-01-08T20:22:20.640
> 
> 标签：c, linux

我意识到这也许是一个奇怪的问题，但是如果说我有一个可以向系统发送命令的程序，例如：

```
system(command); 
```

该程序可以通过“ls -l”等参数运行并向其他程序发送命令。

但是，如果我有一个需要交互式输入的程序，例如使用 scanf，是否有一种简单的方法可以使我的 C 程序有效地与之交互。

对难以解释我的要求表示歉意。这是一个技术问题的练习，原因我无法简明地解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:23:44.977

> 是否有一种简单的方法可以使我的 C 程序有效地与之交互。

是的，您可能正在寻找`popen(3)`. 它允许你运行一个命令并给你一个`FILE *`附加到它的`stdin`/ `stdout`。

可悲的是，在 Linux 上它是单向的：stdin*或*stdout，而不是同时两者。至少一个其他实现（FreeBSD）允许双向管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:14:04.313

通常，您会使用以下模式：

1.  用于`pipe()`打开一对将用作子进程的标准输入的文件描述符。（或`pipe2()`在linux下）
2.  用于`pipe()`打开一对将用作子进程的标准输出的文件描述符。
3.  打电话`fork()`。您现在有两个进程，父进程和一个新的子进程。
4.  在子进程中（即。`fork() == 0`）
    1.  用于`dup2()`从上面步骤 1 和 2 中创建的文件描述符创建新的 STDIN_FILENO 和 STDOUT_FILENO。
    2.  使用其中一项`exec()`功能来启动您的新程序。
5.  在父进程中（即。`fork() > 0`）
    1.  关闭在上述步骤 1 和 2 中创建的管道的未使用侧。
    2.  检测子进程终止，使用`waitpid()`
    3.  关闭管道文件描述符的其余部分。

您还可以通过创建第三个管道并将`dup2()`其添加到 STDERR_FILENO 来从子进程中捕获 stderr

`man pipe`有一段代码显示如何使用管道。还有其他这种模式的[例子](https://stackoverflow.com/q/4981113)

# jquery - 有没有办法淡入和淡出超大加载器 div #supersized-loader？

> ID：14223373
> 
> 赞同：0
> 
> 时间：2013-01-08T20:22:27.893
> 
> 标签：jquery, fadein, fadeout, supersized

我对使用 jquery 的了解非常有限，通常可以应付自如，但我有一个项目，客户希望在超大幻灯片序列开始之前让“预加载”图像淡入和淡出。我在 3.2.7 js 文件中看到初始化和删除 div 的行，但我可以修改它以放置一个大约 1.5 秒的淡入和淡出吗？

```
$('#supersized-loader').remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:34:12.450

你试过用谷歌搜索吗？

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

```
// To fade in
$('#supersized-loader').fadeIn();

// To fade out
$('#supersized-loader').fadeOut();

// Chain commands...
$('#supersized-loader').hide().fadeIn().fadeOut().remove();

// ...or possibly
$('#supersized-loader').hide().fadeIn().fadeOut(function(){
    // Remove the layer.
    $(this).remove();
}); 
```

# c# - 用 C# 字符串替换图像 URL

> ID：14223374
> 
> 赞同：1
> 
> 时间：2013-01-08T20:22:31.100
> 
> 标签：c#, asp.net, image

我一直在寻找并且无法弄清楚如何从 C# 获取值到 ASPX 页面上的标记中。我尝试了多种选择，但没有得到任何结果。

当我的 asp 页面加载时，使用 queryString 从页面 url 获得一个值（即 mypage.aspx?app=safety ），然后运行一个开关来找出要在页面上使用的图像 url。

问题是，我收到一个编译错误“当前上下文中不存在名称‘img_small’”。你觉得我下面的代码怎么样？我看不到我错过了什么！

C＃：

```
protected void Page_Load(object sender, EventArgs e)
{
    string img_small;

    String appName = Request.QueryString["app"];

    switch (appName)
    {
        case "safety":
            img_small = "safety-logo.png";
            break;

        case "files":
            img_small = "files-logo.png";
            break;

        case "drawings":
            img_small = "drawings-logo.png";
            break;

        case "specs":
            img_small = "specs-logo.png";
            break;

        default:
            img_small = "idms-logo.png";
            break;
    }
} 
```

HTML：

```
<img src='"<%=img_small%>"' /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:24:34.450

`img_small`之外不存在`Page_Load`。

您至少需要使用具有该名称的内部字段，以便能够在类中的任何位置访问它，包括`.aspx`.

```
public string img_small;

protected void Page_Load(object sender, EventArgs e)
{
   .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:27:35.333

这是因为`img_small`它是函数的局部变量`Page_Load`，它不存在于该函数之外。这就是您收到此错误的原因。

我建议你改变

```
<img src='"<%=img_small%>"' /> 
```

到

```
<asp:Image ID='imgImage' runat='server' /> 
```

然后在`Page_Load`函数的底部做

```
imgImage.ImageUrl = img_small; 
```

# c# - 如何在回发中再次绑定之前保存我的复选框列表的状态？

> ID：14223376
> 
> 赞同：1
> 
> 时间：2013-01-08T20:22:42.840
> 
> 标签：c#, asp.net, checkboxlist

我是asp和c#的新手。我有一个绑定到数据源的复选框列表。如何保存复选框列表的状态以便保留复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:30:37.820

如果它仍然绑定到同一个数据源，那么您需要确保这些值被持久保存到数据源，以便在重新绑定时正确刷新。

其他更痛苦的选择是将这些信息保留在其他地方，并在重新绑定完成后尝试以编程方式重新应用基于此的值。

# c# - 从 NetworkStream 读取 BinaryFormatter 序列化对象的最有效方法？

> ID：14223379
> 
> 赞同：6
> 
> 时间：2013-01-08T20:22:45.120
> 
> 标签：c#, .net-4.5, async-await, networkstream, c#-5.0

我有一个应用程序通过套接字连接发送不同大小的可序列化对象，我希望它尽可能具有可扩展性。也可能有数十个甚至数百个连接。

1.  NetworkStream 来自持续侦听传入消息的 TcpClient。
2.  我不想用标准的 NetworkStream.Read() 阻塞线程。这需要扩展。我只是假设 Read() 块，因为这是这类类的非常标准的行为，并且类上有一个 ReadTimeout 属性。
3.  我不确定 BinaryFormatter 是否只使用 Read() 或者它是否在后台为我做了一些异步的东西。我的猜测是否定的。
4.  TcpClient 需要获取一条消息，将其读到最后，然后返回侦听消息。

因此，似乎有太多方法可以给这只猫剥皮，我不确定哪种方法最有效。我是否：

只需使用 BinaryFormatter 来读取 NetworkStream？

```
var netStream = client.GetStream();
var formatter = new BinaryFormatter();
var obj = formatter.Deserialize(netStream); 
```

**或者**用新的 async/await 东西做一些魔术：

```
using(var ms = new MemoryStream()) 
{
   var netStream = client.GetStream();
   var buffer = new byte[1028];
   int bytesRead;
   while((bytesRead = await netStream.ReadAsync(buffer, 0, buffer.length)) > 0) {
      ms.Write(buffer, 0, buffer.Length);
   }
   var formatter = new BinaryFormatter();
   var obj = formatter.Deserialize(ms);
} 
```

**或**与上述类似，仅利用新的 CopyToAsync 方法：

```
using(var ms = new MemoryStream()) 
{
   var netStream = client.GetStream();
   await netStream.CopyToAsync(ms); //4096 default buffer.
   var formatter = new BinaryFormatter();
   var obj = formatter.Deserialize(ms);
} 
```

**或者**别的什么？

我正在寻找提供最大可扩展性/效率的答案。

[注：以上均为伪代码，以示例为例]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:40:04.920

第一种方法遇到了大流的问题。如果您要发送大数据，该代码将导致应用程序出现内存不足异常。

第二种方法看起来非常好 - 它是异步的（意味着您不使用一些有价值的线程来等待读取完成）并且它使用数据块（这是您应该使用流的方式）。

所以选择第二个选项，可能稍作修改 - 一次只反序列化数据块，不要读取整个内容（除非您绝对确定流长度）。

这就是我的想法（伪代码）

```
using (var networkStream = client.GetStream()) //get access to stream
{
    while(!networkStream.EndOfStream) //still has some data
    {
        var buffer = new byte[1234]; //get a buffer
        await SourceStream.ReadAsync(result, 0, buffer); //read from network there

        //om nom nom buffer     
        Foo obj;
        using(var ms = new MemoryStream()) //process just one chunk
        {
             ms.Write(buffer, 0, buffer.Length);
             var formatter = new BinaryFormatter();
             obj = formatter.Deserialize(ms);   //desserialise the object        
        } // dispose memory

        //async send obj up for further processing
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:45:10.467

如果有**数百个并发操作正在运行，**异步将更好地扩展。

不过，它会更慢。异步具有在基准测试中很容易检测到的开销。如果您**不需要**选项 2，则首选使用选项 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:38:16.760

async/await 将允许您在等待资源时更少地阻塞线程，因此通常它比线程阻塞版本更好地扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:55:56.450

我认为值得一提的是，从客户端的角度来看，异步与同步之间存在差异。如果你去异步......每个人通常都会经历相同的响应时间。因此，如果您的所有请求都很密集，每个人都会意识到响应时间变慢。使用同步请求，请求简单的用户将得到更快的处理，因为他们不会被其他用户阻止。但是，如果您在同步环境中有许多同时请求，最终您的所有线程都可能会被阻塞并且请求不会得到响应。

# javascript - 从触发事件的元素返回属性 id

> ID：14223385
> 
> 赞同：10
> 
> 时间：2013-01-08T20:23:15.227
> 
> 标签：javascript

我有一个元素，该元素通过以下代码调用函数 calcTotal：

```
$('.pause').change(function(e) {
    window.alert("pause changed");
    calcTotal(e); 
```

calcTotal(e)的代码如下：

```
function calcTotal(event)
{   alert('calcTotal called');
    var myId = event.currentTarget.attr('id');

    myId = myId.replace(/[^0-9]/g, '');

    var timeRegex = /^[0-9]{1,2}:[0-9]{2}$/;

    if($('#start'+myId).val().match(timeRegex) && $('#end'+myId).val().match(timeRegex) && $('#pause'+myId).val().match(timeRegex))
    {
        var minutes = 0;

        var n = $('#end'+myId).val().split(':');
        minutes = parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#start'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#pause'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var hours = Math.floor(minutes/60);
        minutes = minutes % 60;
        alert(hours + ':' + minutes);
        $('#total' + myId).val(hours + ':' + minutes);
    }
    else
    {       
        $('#total' + myId).val('00:00');
    }

} 
```

它不起作用，因为我已经例外，当我使用 firebug 进行调试时，它显示以下内容：

```
TypeError: event.currentTarget.attr is not a function
var myId = event.currentTarget.attr('id'); 
```

我想将元素的 id 存储在 myId 中。我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T20:25:16.790

`event.currentTarget`不是一个 jQuery 对象，它是一个 DOM 节点。

```
var myIf = event.currentTarget.id; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-08T20:25:24.467

`event.currentTarget`不是 jQuery 对象，`attr`所以`undefined`.

您可以通过以下方式修复：

```
$(event.currentTarget).attr('id');
event.currentTarget.id; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T20:25:18.603

假设您的其余代码按预期工作，我建议：

```
var myId = event.currentTarget.id; 
```

因为它是一个普通的 DOM 节点，而不是 jQuery 对象，所以该`attr()`方法不会，也不能，工作。

参考：

*   [`event.currentTarget`](https://developer.mozilla.org/en-US/docs/DOM/event.currentTarget).
*   [`Element.id`](https://developer.mozilla.org/en/docs/DOM/element.id).

# javascript - raphael 演示饼图调整以添加自定义颜色

> ID：14223401
> 
> 赞同：1
> 
> 时间：2013-01-08T20:23:53.450
> 
> 标签：javascript, raphael

如何向此拉斐尔饼图添加自定义颜色。[http://raphaeljs.com/pie.html](http://raphaeljs.com/pie.html)它从 HTML 表中获取值并将它们插入到饼图中。现在它使用以下来填充扇区。我认为它使用随机发生器来选择十六进制颜色。我不知道。

```
bcolor = Raphael.hsb(start, 1, 1),
            p = sector(cx, cy, r, angle, angle + angleplus, {fill: "90-" + bcolor + "-" + color, stroke: stroke, "stroke-width": 2}), 
```

我希望能够提取一组设置的十六进制颜色。值不应超过 6 个。这是完整的代码。我也想设置自定义渐变，但现在不是必需的。

```
Raphael.fn.pieChart = function (cx, cy, r, values, labels, stroke) {
    var paper = this,
        rad = Math.PI / 180,
        chart = this.set();
    function sector(cx, cy, r, startAngle, endAngle, params) {
        var x1 = cx + r * Math.cos(-startAngle * rad),
            x2 = cx + r * Math.cos(-endAngle * rad),
            y1 = cy + r * Math.sin(-startAngle * rad),
            y2 = cy + r * Math.sin(-endAngle * rad);
        return paper.path(["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2, "z"]).attr(params);
    }
    var angle = 0,
        total = 0,
        start = 0,
        process = function (j) {
            var value = values[j],
                angleplus = 360 * value / total,
                popangle = angle + (angleplus / 2),
                color = Raphael.hsb(start, .90, 1),
                ms = 500,
                delta = 30,
                bcolor = Raphael.hsb(start, 1, 1),
                p = sector(cx, cy, r, angle, angle + angleplus, {fill: "90-" + bcolor + "-" + color, stroke: stroke, "stroke-width": 2}),
                txt = paper.text(cx + (r + delta + 2) * Math.cos(-popangle * rad), cy + (r + delta + 5) * Math.sin(-popangle * rad), labels[j]).attr({fill: "#999999", stroke: "none", opacity: 1, "font-size": 13});
            p.mouseover(function () {
                p.stop().animate({transform: "s1.1 1.1 " + cx + " " + cy}, ms, "elastic");
                //txt.stop().animate({opacity: 1}, ms, "elastic");
            }).mouseout(function () {
                p.stop().animate({transform: ""}, ms, "elastic");
                //txt.stop().animate({opacity: 0}, ms);
            });
            angle += angleplus;
            chart.push(p);
            chart.push(txt);
            start += .1;
        };
    for (var i = 0, ii = values.length; i < ii; i++) {
        total += values[i];
    }
    for (i = 0; i < ii; i++) {
        process(i);
    }
    return chart;
};

$(function () {
    var values = [],
        labels = [];
    $("tr").each(function () {
        values.push(parseInt($("td", this).text(), 10));
        labels.push($("th", this).text());
    });
    $("table").hide();
    Raphael("holder-new", 400, 400).pieChart(100, 100, 50, values, labels, "#fff");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:16:31.357

```
bcolor = Raphael.hsb(hue,saturation,value) 
```

将 start 的值作为色调。所以它从 0 开始，每个扇区递增 0.1。没有什么是随机的。要做你需要的，只需创建你的数组。

```
var colors = ['red','green','blue','yellow','#ffaa00','#00ffaa','#aa00ff']; 
```

从数组中设置颜色（模数将 j 的值保持在颜色数组长度内）

```
bcolor = colors[j%colors.length] 
```

并在您的细分中使用它

```
p = sector(cx, cy, r, angle, angle + angleplus, 
    {fill: "90-" + bcolor + "-" + bcolor, stroke: stroke, "stroke-width": 1}) 
```

我编辑的原始代码使用了两种颜色（颜色和 bcolor），而我这里只有 bcolor。如果您想要渐变，请添加其他颜色。

这是一个显示结果的[小提琴。](http://jsfiddle.net/amadanNM/Xe4C4/)

# c# - 在c#中将unicode字符串写入csv

> ID：14223404
> 
> 赞同：3
> 
> 时间：2013-01-08T20:24:14.130
> 
> 标签：c#, csv, unicode-string

我使用以下代码从 unicode 字符串创建 csv 文件：

```
context.Response.ContentType = "text/csv";
context.Response.ContentEncoding = System.Text.Encoding.Utf8;        
context.Response.AddHeader("Content-Disposition", "attachment; filename=" + fundName + ".csv");
context.Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());                

String output ="";        
output += "Name, callNumber" + "\n";
String output ="علی,34343555" + "\n";     
context.Response.Write(output); 
```

问题是 unicode 字符不能正确显示“علی”。

感谢您的任何指导。问候阿里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-06T22:48:24.063

我宁愿使用 streamwriter 使用 UTF-8 编码编写 unicode 字符。片段：

```
 using (StreamWriter sw = new StreamWriter(new FileStream("c:/Temp.csv", FileMode.Create), Encoding.UTF8))
            {
                    sw.WriteLine(string.Join(",", s));
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:18:26.713

代码的一些问题。

*   `context.Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());`**为 UTF-32而不是**UTF-8编写 BOM 。

*   输出变量定义了两次。

我建议试试这个：

```
context.Response.ContentType = "text/csv";
context.Response.ContentEncoding = System.Text.Encoding.Utf8;        
context.Response.AddHeader("Content-Disposition", "attachment; filename=" + fundName + ".csv");

String output ="";        
output += "Name, callNumber" + "\n";
output +="علی,34343555" + "\n";     
context.Response.Write(output);
context.Response.End() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T13:16:09.330

仅用于`Encoding.Unicode`编写 Unicode CSV 文件：

```
File.WriteAllText("path/to/file.csv", yourString, Encoding.Unicode); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-13T18:07:20.613

```
Response.Clear();
Response.AppendHeader("Content-Type", "Application/vnd.ms-excel");
Response.ContentEncoding = Encoding.UTF8;
Response.AppendHeader("Content-Disposition", "attachment; filename=filename1.csv");
var data = Encoding.UTF8.GetBytes("your content with chinese characters");
var result = Encoding.UTF8.GetPreamble().Concat(data).ToArray();
var str = Encoding.UTF8.GetString(result);
Response.Write(str);
Response.Flush();
Response.SuppressContent = true; 
```

# joomla - 网站开始加载，然后停止

> ID：14223406
> 
> 赞同：-1
> 
> 时间：2013-01-08T20:24:38.187
> 
> 标签：joomla, pageload

这个问题刚刚开始出现，最近没有进行任何更改。但是，当您加载 URL 时，页面开始加载然后停止并且似乎继续尝试加载 - 但从未实际加载页面。

[http://goo.gl/7VhhK](http://goo.gl/7VhhK)

知道什么可能会绊倒它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:21:50.723

我通过firefox 17.0.1上的firebug通过'net'选项卡检查了您的网站，服务器中的所有请求都正常工作，没有文件损坏，也没有忽略请求，因此您在文件或服务器中没有任何问题，但您在控制台中遇到了这个问题

> Shadowbox.loadSkin 不是函数

只需删除重复的 jQuery 脚本链接并放置没有冲突的代码

> jQuery.noConflict();

# javascript - 将网页链接加载到 div 或 iframe

> ID：14223408
> 
> 赞同：1
> 
> 时间：2013-01-08T20:24:40.253
> 
> 标签：javascript, jquery, html, css

这可能是常见问题。我看到了这个问题的几个答案。

1.  使用 jquery 加载
2.  使用 iframe

我尝试了它们，但无法轻松加载。这是用于加载 google.com，但它不起作用。

```
<html>
    <head>
        <title>hhh</title>
        <script src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#content").attr("src","http://www.google.lk/");
            })
        </script>
    </head>
    <body>
        <iframe id="content" src="about:blank"></iframe>
    </body>
</html> 
```

但是当我尝试加载 w3schools.com 时，它会加载到 iframe

```
<html>
    <head>
        <title>hhh</title>
        <script src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#content").attr("src","http://w3schools.com/");
            })
        </script>
    </head>
    <body>
        <iframe id="content" src="about:blank"></iframe>
    </body>
</html> 
```

使用 jQuery 加载时，它也不起作用。

```
<html>
    <head>
        <script src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#content").load("src","http://www.google.com/");
            })
        </script>
    </head>
    <body>
        <div id="content" src="about:blank"></div>
    </body>
</html> 
```

在萤火虫栏中用“ `GET http://www.google.com 302 Found 291ms`”显示

一些身体帮助我摆脱这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:37:04.160

使用 jquery load 在 div 中显示内容。没有`src`div。

Affect `src`for an`iframe`告诉您的浏览器获取内容并将其显示在 iframe 中。

的正确语法`load()`是：

```
<div id="content"></div> 
```

和

```
$("#content").load("page.php"); 
```

顺便说一句，google.com 不喜欢从其他站点加载，因此您最好使用其他示例。

# java - java数组中不重复的随机数

> ID：14223422
> 
> 赞同：2
> 
> 时间：2013-01-08T20:25:41.350
> 
> 标签：java, arrays

我已经搜索过，根本找不到我的问题的答案。我必须创建一个乐透类型模拟，6 个号码 + 奖金号码，没有重复。我已经设法让它工作了，但是在 6 个数字数组中，位置 [1] 处的数字一直显示为 0。我确定这是一个简单的问题，但我对此很陌生，所以任何帮助都将被感激地接受.下面的代码，我敢肯定它到处都是......

```
import java.util.Arrays;

public class Lotto {

    public static void main(String[] args) {

        int[] Lotto=new int[6];
        final int MIN = 1;
        final int MAX = 45;

        for (int i = 0; i< Lotto.length; ++i)
        {

            Lotto [0] =MIN+ (int)(Math.random()*((MAX -MIN)+1));

            while (Lotto[1] == Lotto[0])
            {
                Lotto[1] =MIN+ (int)(Math.random()*((MAX -MIN)+1));
            }

            while ((Lotto[2] == Lotto[0]) || (Lotto[2] == Lotto[1]) )
            {
                Lotto[2] = MIN+ (int)(Math.random()*((MAX -MIN)+1));

            while ((Lotto[3] == Lotto[0]) || (Lotto[3] == Lotto[1]) || (Lotto[3] == Lotto[2]) )
            {
                Lotto[3] = MIN+ (int)(Math.random()*((MAX -MIN)+1));
            }

            while  ((Lotto[4] == Lotto[0]) || (Lotto[4] == Lotto[1]) || (Lotto[4] == Lotto[2]) ||   (Lotto[4] == Lotto[3]) )                        

            {
                Lotto[4] = MIN+ (int)(Math.random()*((MAX -MIN)+1));

                while  ((Lotto[5] == Lotto[0]) || (Lotto[5] == Lotto[1]) || (Lotto[5] == Lotto[2]) ||   (Lotto[5] == Lotto[3])||    (Lotto[5] == Lotto[4])) 

                {
                    Lotto[5] = MIN+ (int)(Math.random()*((MAX -MIN)+1));
                }

                int[] BonusNumber=new int[1];
                for (int j = 0; j< BonusNumber.length; ++j)
                {

                    BonusNumber [j] =1+ (int)(Math.random()*((45 -1)+1));
                }

                System.out.println("Winner  "  + Arrays.toString(Lotto));
                System.out.println("Bonus Number" +Arrays.toString(BonusNumber));   
            {

    }
            }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:31:16.387

改变这个循环：

```
while (Lotto[1] == Lotto[0])
{
    Lotto[1] = random(MIN, MAX);
} 
```

进入：

```
do {
    Lotto[1] = random(MIN, MAX);
} while (Lotto[1] == Lotto[0]); 
```

以及相应的其余代码。你看到问题出在哪里了吗？

但是在你开始重写你相当复杂和不可维护的代码之前，检查一下这个实现，它更容易理解并且......正确：

```
final int MIN = 1;
final int MAX = 45;

final List<Integer> allPossible = new ArrayList<Integer>(MAX - MIN + 1);
for (int i = MIN; i <= MAX; ++i) {
    allPossible.add(i);
}
Collections.shuffle(allPossible);
final List<Integer> lotto = allPossible.subList(0, 6);
int bonusNumber = allPossible.get(6);

System.out.println("Winner  "     + lotto);
System.out.println("Bonus Number" + bonusNumber); 
```

[`Collections.shuffle()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)在这里至关重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:35:34.320

我认为你的代码很混乱，你可以通过使用一些 API 实用程序来避免这么多条件，例如`Collections.shuffle()`在这个例子中：

```
public static void main(String[] args) 
{
    Integer[] numbers = new Integer[45];

    // Populating numbers.
    for (int i = 0; i < 45; i++)
        numbers[i] = i + 1;

    // Shuffling them to make them in random order.
    List<Integer> list = Arrays.asList(numbers);
    Collections.shuffle(list);

    // Print any 6 of them. I chose first 6 ones for simplicity.
    for (int i = 0; i < 6; i++)
        System.out.print(list.get(i) + " ");
} 
```

**样本输出：**

```
15 11 31 2 5 38 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:28:02.347

您可以使用`HashSet`既不保持顺序也不保持重复的 a 。

您还可以在`java.util.Random`每次需要新的随机数时创建该类的新实例，因为这会更改种子并为您的应用程序提供更多随机性，从而消除每次包含 0 的位置 1。

`new java.util.Random().nextInt(int max)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T20:49:46.527

如果您想使用 int[] 而不是内置类，您可以这样做

```
int[] ints = new int[45];
for (int i = 0; i < ints.length; i++) ints[i] = i + 1;
Random rand = new Random();
for (int i = 0; i < 6; i++) {
    int swap = rand.nextInt(ints.length - i) + i;
    int tmp = ints[i];
    ints[i] = ints[swap];
    ints[swap] = tmp;
}
int[] drawn = Arrays.copyOf(ints, 6);
System.out.println(Arrays.toString(drawn)); 
```

印刷

```
[19, 22, 24, 6, 34, 23] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T18:00:19.577

我想我正在学习与您相同的 Java 入门课程（因为该程序看起来非常熟悉）所以我将尝试将其保留为基本内容；但是，我确实从您的程序中复制了所有原始代码，所以您基本上完成了所有工作，我只是稍微清理了一下。

这是完整的程序（随机化一组数字（检查重复），允许用户选择一组或随机化自己的一组（也检查重复），对两组进行排序和比较，通知用户他们是否中奖，要求再次播放：

```
import java.util.*;
    public class Lotto
    {
    public static void main(String[] args)
    {        
        Scanner keyboard = new Scanner(System.in);
        Random rand = new Random();
        boolean checkPlay = false, readInput = false;
        final int MAX = 45;

        while (readInput != true)
        {
            System.out.print("Would you like to buy a lotto ticket? [y/n] ");
            String stBuyTicket = keyboard.nextLine().trim().toLowerCase();

            if (stBuyTicket.isEmpty())
            {
                System.out.println("Invalid Input.");
            }
            else if (stBuyTicket.charAt(0) == 'y' || stBuyTicket.charAt(0) == 'n')
            {
                if (stBuyTicket.charAt(0) == 'y')
                {
                    checkPlay = true;
                }
                else
                {
                    checkPlay = false;                    
                }
                readInput = true;
            }
            else
            {
                System.out.println("Invalid Input.");
            }
        }        
        while (checkPlay == true)
        { 
            int[] lotto = new int[6];
            int lottoLength = lotto.length;
            int[] userLotto = new int[6];
            int userLottoLength = userLotto.length;
            for (int i = 0; i < lottoLength; i++)
            {
                boolean checkLotto = false;
                while (checkLotto != true)
                {  
                    int numCheck = (rand.nextInt(MAX) + 1);
                    boolean confirmSame = false;
                    for (int j = 0; j <= i; j++)
                    {
                        if (numCheck == lotto[j])
                        {
                            confirmSame = true;
                        }
                    }
                    if (confirmSame != true)
                    {
                        lotto[i] = numCheck;
                        checkLotto = true;                                               
                    }
                }
            }            
            readInput = false;
            while (readInput != true)
            {
                System.out.println("Would you like choose your own numbers or just randomize them?");
                System.out.print("Choose your own numbers? [y/n] ");            
                String stBuyTicket = keyboard.nextLine().trim().toLowerCase();
                if (stBuyTicket.isEmpty())
                {
                    System.out.println("Invalid Input.");
                }
                else if (stBuyTicket.charAt(0) == 'y' || stBuyTicket.charAt(0) == 'n')
                {
                    if (stBuyTicket.charAt(0) == 'y')
                    {
                        for (int i = 0; i < userLottoLength; i++)
                        {
                            boolean checkUserLotto = false;
                            while (checkUserLotto != true)
                            {
                                System.out.print("Which number would you like to choose for number " + (i + 1) + ": ");
                                String numUserInput = keyboard.nextLine().trim();

                                int numUserInputLength = numUserInput.length();
                                boolean checkInput = true;
                                if (numUserInputLength > 2 || numUserInputLength < 1)
                                {
                                    System.out.println("Invalid Input. Try again.");
                                    checkInput = false;
                                }
                                else
                                {
                                    for (int j = 0; j < numUserInputLength; j++)
                                    {
                                        if (Character.isDigit(numUserInput.charAt(j)) != true)
                                        {
                                            System.out.println("Invalid Input. Try again.");
                                            checkInput = false;
                                        }
                                    }
                                }
                                if (checkInput == true)
                                {
                                    int userInput = Integer.parseInt(numUserInput);
                                    if (userInput > MAX || userInput < 1)
                                    {
                                        System.out.println("Invalid Input. Try again.");
                                    }
                                    else
                                    {
                                        boolean confirmSame = false;
                                        for (int j = 0; j <= i; j++)
                                        {
                                            if (userInput == userLotto[j])
                                            {
                                                System.out.println("You've already choosen this number. Choose again.");
                                                confirmSame = true;
                                            }
                                        }
                                        if (confirmSame != true)
                                        {
                                            userLotto[i] = userInput;
                                            checkUserLotto = true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        for (int i = 0; i < userLottoLength; i++)
                        {                            
                            boolean checkLotto = false;
                            while (checkLotto != true)
                            {  
                                int numCheck = (rand.nextInt(MAX) + 1);
                                boolean confirmSame = false;                                
                                for (int j = 0; j <= i; j++)
                                {
                                    if (numCheck == userLotto[j])
                                    {
                                        confirmSame = true;
                                    }
                                }
                                if (confirmSame != true)
                                {
                                    userLotto[i] = numCheck;
                                    checkLotto = true;                                               
                                }
                            }
                        } 
                    }
                    readInput = true;
                    System.out.print("Your lotto numbers are: " + userLotto[0]);
                    for (int i = 1; i < userLottoLength; i++)
                    {
                        System.out.print(", " + userLotto[i]);
                    }
                    System.out.print("!");
                    System.out.println();

                    System.out.print("And the winning lotto numbers are: " + lotto[0]);
                    for (int i = 1; i < lottoLength; i++)
                    {
                        System.out.print(", " + lotto[i]);
                    }
                    System.out.print("!");
                    System.out.println();

                    Arrays.sort(lotto);
                    Arrays.sort(userLotto);

                    if (Arrays.equals(userLotto, lotto) == true)
                    {
                        System.out.println("Your lotto numbers match the winning lotto numbers! \nYou win!");
                    }
                    else
                    {
                        System.out.println("Your lotto numbers do not match the winning lotto numbers. \nYou lose.");
                    }
                }
                else
                {
                    System.out.println("Invalid Input.");
                }
            }
            readInput = false;
            while (readInput != true)
            {
                System.out.print("Would you like to buy another lotto ticket? [y/n] ");
                String stBuyTicket = keyboard.nextLine().trim().toLowerCase();

                if (stBuyTicket.isEmpty())
                {
                    System.out.println("Invalid Input.");
                }
                else if (stBuyTicket.charAt(0) == 'y' || stBuyTicket.charAt(0) == 'n')
                {
                    if (stBuyTicket.charAt(0) == 'y')
                    {
                        checkPlay = true;
                    }
                    else
                    {
                        checkPlay = false;
                    }
                    readInput = true;
                }
                else
                {
                    System.out.println("Invalid Input.");
                }
            }
        }
        System.out.println("That's a good decision. Save your money");
        System.exit(0);
    }
} 
```

以下是随机化乐透集而不重复的部分：

```
for (int i = 0; i < lottoLength; i++) {
                boolean checkLotto = false;
                while (checkLotto != true) {  
                    int numCheck = (rand.nextInt(MAX) + 1);
                    boolean confirmSame = false;
                    for (int j = 0; j <= i; j++) {
                        if (numCheck == lotto[j]) {
                            confirmSame = true;
                        }
                    }
                    if (confirmSame != true) {
                        lotto[i] = numCheck;
                        checkLotto = true;                                               
                    }
                }
            } 
```

它生成一个数字，`int numCheck = (rand.nextInt(MAX) + 1)`并根据迄今为止输入的每个乐透号码检查该号码：

```
for (int j = 0; j <= i; j++) {
    if (numCheck == lotto[j]) {
        confirmSame = true;
    }
} 
```

如果`numCheck`不等于任何输入的数字，则`numCheck`写入当前数组点。

# java - 布尔 Do-While 循环永不停止

> ID：14223436
> 
> 赞同：0
> 
> 时间：2013-01-08T20:27:26.390
> 
> 标签：java, boolean, do-while

这是每个人都告诉我要做的工作产品。谢谢大家，从现在开始我会尽量保持我的代码更干净。这段代码只是练习，最终将成为我的计算机在启动时运行的锁定系统。谁想要讨厌的青春期前在他们的电脑上乱搞？不是这个人。

```
import java.io.*;
import java.util.Scanner;  /
class AgeChecker
{   
    public static void main (String[] args) throws Exception  /*@Exception- thrown to allow reading
    {                                                                       of single characters*/
    char ans; //(Read from user input)
    String name;
    boolean loop = false; //To loop back after a section, add loop = true.
                          //To stop the program after a section, add loop = false.
    do
    {
    Scanner dd = new Scanner(System.in);
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));  // Needed to read the 
    BufferedReader in1 = new BufferedReader(new InputStreamReader(System.in)); // character input

    System.out.println("What is your name? "); name = dd.nextLine();
        {   

        System.out.println("Are you 14 years of age or older? (y/n) "); ans = (char)in.read();

                                    //Using if, else-if and else to make sure
            if (ans == 'y')         //I have a good grasp of what i already know
            {   
                    System.out.println("Welcome, " + name + "! Are you 21 years of age or older? (y/n) ");
                    ans = (char)in1.read();

                    if (ans == 'n')
                    {
                    System.out.println("Welcome, " + name + "!");
                    loop = false;
                    }

                    else if (ans == 'y')
                    {
                    System.out.println("Welcome, " + name + "! Would you like a drink? ");
                    loop = false;
                    }
                }   
            else if (ans == 'n')
                {   
                System.out.println("We're sorry. Only those at the age of 14 or older may access this program. ");
                loop = false;
                }   
            else 
                {
                        System.out.println("Invalid input. ");
                        loop = true;
                }
            }
        }
    }
    while (loop == true); //Put here to line up with the 'do' at the top
} 
```

感谢大家的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T20:27:55.263

代替

```
while (fee = true); 
```

和

```
while (fee == true); 
```

或更好 ：

```
while (fee); 
```

`fee = true`是一个赋值并返回分配的值 ( `true`)。

也更换

```
else 
System.out.println("Invalid input. ");
fee = true; 
```

和

```
else {
   System.out.println("Invalid input. ");
   fee = true;
} 
```

（感谢罗希特）。

请注意，如果您的代码有更少的空间和更少的块（为什么这么多？），那么获取这些错误会更容易（包括对您而言）。这些[代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)可能很有用。

# c# - 温度控制功能/算法

> ID：14223445
> 
> 赞同：0
> 
> 时间：2013-01-08T20:28:35.250
> 
> 标签：c#, c, algorithm

```
 double K1 = 50.0 / 300; // Warm up, 5 min, 20 - 70\. Subject to change, if wrong
    double K2 = -50.0 / 120; // Cool down, 2 min, 20 - 70\. Subject to change, if wrong

    double T = 20;
    const int ON_TIME = 7; // seconds. this should be calculated
    const int OFF_TIME = 2; // seconds. this should be calculated
    int onCounter = ON_TIME;
    int offCounter = 0;
    for (int t = 0; t < 1800; t++)
    {
        if (onCounter > 0)
        {
            onCounter--;
            T += K1;
        }
        else if(offCounter == 0)
        {
            onCounter = ON_TIME;
            // switch relay off here
        }

        if (offCounter > 0)
        {
            T += K2;
            offCounter--;
        }
        else if(onCounter == 0)
        {
            offCounter = OFF_TIME;
            // switch relay on here
        }
        Console.WriteLine("t: {0}, T: {1:F2}", t, T);
    } 
```

这个函数的作用是模拟 30 分钟（Tt）内的烤箱温度线性上升到`70C`. 当然，它不会按预期工作。输入参数是两个线性斜率。

1.  烤箱温度将在 5 分钟 (Tw) 内从`20C`增加到`70C`
2.  烤箱将在 2 分钟内冷却至`70C`至`20C`（Tc）
3.  步长应为`1C`(Ts)

因此该功能将控制继电器，该继电器将打开或关闭烤箱。我试图只搜索那些 ON/OFF_TIME 常量，但看起来我需要更严肃的方法。

问题是 - 如何计算`ON_TIME`和`OFF_TIME`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:45:14.203

您的常量 ON_TIME 和 OFF_TIME 必须分别代表 5 分钟和 2 分钟。您期望您的 T 以 50C/300 秒的速率变化 50C，但在 7 秒内，这将导致上升周期变化 1.17C，下降周期将 T 降低 0.33C，因此每 7 秒您将得到 T+ =0.83C

您的 ON_TIME 和 OFF_TIME 应该以秒表示，或者您可以使用它们 *60。

我不知道你是否试图在循环中间保持烤箱温暖，这个算法会导致 4 个加热/冷却循环，你最终会有一个继电器处于开启位置，你不想这样做用真正的烤箱:)

请考虑这种方法：

```
double dTemp = 50.0;
int cycleFor = 30*60;
int heatFor = 5*60;
int coolFor = 2*60;
double tBase = 20.0;
double temp = tbase;
for (int t = 0; t<cycleFor; t++){
   if (t<heatFor)
       temp = tBase + (t*dTemp/heatFor);
   else if (t>cycleFor - coolFor)
       temp = tBase + ((cycleFor-t)*dTemp/coolFor)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:27:53.363

我不确定这个，但我要试一试大便和咯咯笑。

您声明`K1`为 50/300，表示 300 秒（5 分钟）内的 delta T，并且您被限制为 1 度。

那么问题不是，我必须等待多少秒才能完成一个学位？那么答案不...

```
 1/6(time) = 1 -> time = 1/(1/6) -> time = 6 seconds 
```

同样用于冷却

```
 5/12(time) = 1 -> time = 1/(5/12) -> time = 12/5 seconds -> time = 2.4 seconds 
```

我意识到我之前评论中的错误，并认为我更好地理解了你的问题。如果我仍然错了，请告诉我，我会及时删除。

### 更新

您的问题可能与其他问题有关。我非常有信心我的数学是正确的，所以我编写了简单的循环来演示证明。

这里是加热回路。我说经过的时间应该是6秒。此循环结果为 70 度，因为它模拟每个请求 300 秒。

```
 for (int fiveMinutes = 0; fiveMinutes < 300; fiveMinutes += 6)
        {
            T += (K1 * 6);
            Console.WriteLine("t: {0}, T: {1:F2}", fiveMinutes + 6, T);
        } 
```

结果是：

```
t: 6, T: 21.00
t: 12, T: 22.00
t: 18, T: 23.00
/*
.....
*/
t: 300, T: 70.00 
```

下面的冷却回路导致 20 度。

```
 for (float twoMinutes = 120f; twoMinutes > 0; twoMinutes -= 2.4f)
        {
            T += (K2 * 2.4);
            Console.WriteLine("t: {0:F2}, T: {1:F2}", twoMinutes - 2.4f, T);
        }

t: 117.60, T: 69.00
t: 115.20, T: 68.00
/*
...
*/
t: 0, T: 20.00 
```

In terms of your question of how to calculate the on/off time I feel it's accurate.

# java - 通过java反射从Field访问整数类型的数组

> ID：14223453
> 
> 赞同：1
> 
> 时间：2013-01-08T20:29:28.493
> 
> 标签：java, android, reflection

说我有这门课

```
public static final class MyClass { 

    public static final int A = 4 ;

    public static final int[] B = { 1, 2, 3, 4 };
} 
```

我必须通过反射访问上面的类及其字段值

```
Class<?> myClass = getDesiredClass("MyClass"); 
```

我可以通过这个得到 A 的值

```
int a = myClass.getField("A").getInt(myClass); 
```

但是如何获得 B 的值，我应该使用哪些 Field 方法？

```
 int[] b = myClass.getField("B").? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:32:09.340

An`int[]`是`Object`，因此只需使用`(int[]) get(myClass)`-- 或替代 ，`(int[]) get(null)`因为静态字段不需要参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:34:15.990

所有这些都是等价的。我会选择最简单的。;)

```
int[] b = MyClass.B;
int[] b = (int[]) MyClass.class.getField("B").get(null);
int[] b = (int[]) Class.forName("MyClass").getField("B").get(null); 
```

# arrays - 如何获得可以选择数组位置的所有可能方式？

> ID：14223455
> 
> 赞同：-3
> 
> 时间：2013-01-08T20:29:37.213
> 
> 标签：arrays

如何获得可以选择数组位置的所有可能方式？例如，对于大小为 2 的数组，有 3 种可能的第一个元素、第二个元素和这两个元素。对于大小为 3 的数组，可能是第一、第二、第三、第一和第二、第一和第三、第二和第三，最后是第一第二和第三。我想要一个简单的嵌套循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:32:42.283

嵌套循环在这里并不是真正的答案，因为嵌套的深度取决于数组的大小。

所以你认为二进制：大小N数组的子集对应于正确长度的非零二进制数，所以做类似的事情

```
for (int subset_c = 1; subset_c < (1<<N); subset_c++)
{
    { start thinking about a new subset }
    for (int j=0; j<N; j++)
    {
         if ((subset_c>>j)&1) { the subset should contain array[j] }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:34:07.753

您正在寻找能够生成 {0, 1 ..., n-1} 的所有可能子集的算法，并且有很多方法可以做到这一点。尝试快速搜索“生成所有子集”，您应该会找到大量解决此问题的好方法。两种主要方法涉及递归生成子集和使用二进制数。

希望这可以帮助！

# objective-c - “viewWithTag”的问题

> ID：14223456
> 
> 赞同：0
> 
> 时间：2013-01-08T20:29:40.697
> 
> 标签：objective-c

我正在尝试更改 UIImageView 的图像，为此，我正在获取带有 viewWithTag 的 UIImageView，我遇到了消息**“-[UIView setImage:]: unrecognized selector sent to instance 0x9161390”的崩溃**

我知道我必须投射对象，而且我已经这样做了：

```
UIImageView *iv = (UIImageView *)[self.view viewWithTag:[[data objectForKey:@"tag"] intValue]];

[iv performSelectorOnMainThread:@selector(setImage:) withObject:img waitUntilDone:YES]; 
```

（我使用 performSelectorOnMainThread 因为是后台线程，但已经尝试“iv.image = ...”）。

我遇到了同样的错误。

任何人都可以看到我错过了什么？

谢谢！

编辑：

好吧，感谢（真的很快！）的答案。我能修好它。

我正在使用：

```
[self.view viewWithTag:[[data objectForKey:@"tag"] intValue]] 
```

但是 UIImageView 在 ScrollView 中而不是在主视图中，因此使用：

```
[scroll viewWithTag:[[data objectForKey:@"tag"] intValue]] 
```

相反，修复它。

（即使实际上无法设置图像，但我没有崩溃）。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:48:17.340

您首先需要检查您获得的值是否为 UIImageView 类。可能存在从数据字典或数组中检索值的问题。可能是在 tableView 或 ScrollView 的子视图中，那么您需要取而不是 self.view。它可能是不同的。所以你需要使用断点调试你的代码。如果这件事发生了，那么检查`setImage`你正在传递的方法的参数。请详细说明您的方法，然后我可以简要回答。

在这里，您传递了两个参数`setImage`。

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:41:07.687

您可能会从不是标签的数据中请求“键值”。我建议不要使用对象值作为键，因为它为许多像这样的神秘问题的发生打开了大门。

这与其他人在您的评论中发布的内容相吻合：您发布的代码非常模糊，并且由于您在使用`objectForKey`时没有显示是什么`data`，所以这是对问题所在的猜谜游戏。

# javascript - 将数字视为数字

> ID：14223457
> 
> 赞同：3
> 
> 时间：2013-01-08T20:29:42.697
> 
> 标签：javascript

> **可能重复：**
> [如何在 JavaScript 中将字符串转换为整数？](https://stackoverflow.com/questions/1133770/how-do-i-convert-a-string-into-an-integer-in-javascript)

给定以下代码：

```
var n = '1';
var x = n + 2; 
```

`x`设置为“12”。

假设我无法更改 的值，设置为 3`n`的最有效方法是什么？`x`

有必要在这里使用`parseInt()`吗？或者有没有办法让 JavaScript 自动将数字视为数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:32:33.037

`parseInt(n,10)`会工作。您也可以`n^0`作为快捷方式。事实上，有几个这样的快捷方式可用，但`parseInt`它是“最好的”，因为它对人类读者来说更明显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T20:33:08.257

您可以添加`+`before `n`，这样它会将其解析为一个数字。

```
var x = +n + 2; 
```

# ruby-on-rails-3.2 - 在 Rails 中，我可以更改 belongs_to :symbol 吗？

> ID：14223460
> 
> 赞同：0
> 
> 时间：2013-01-08T20:29:57.370
> 
> 标签：ruby-on-rails-3.2

例子：

```
has_many :books 
```

*   **:books**会 成为 RAILS 为我创建的方法吗？

*   如果是这样，我可以简单地将其更改为其他内容吗？像**:notes**这样我就可以将它与**User.notes**一起使用????

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:30:57.957

如果您只是想重命名方法，但保留模型（即有一个名为 Book 的模型但方法名为 notes），您可以使用 class_name 符号：

```
has_many :notes, :class_name => :Book 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:56:59.580

是的，:books 是为您创建的模型。此模型对应于 Model Book.rb，如果要将“:books”更改为“:notes”，则必须创建模型注释。您可以使用此命令（在终端中）创建模型注释：

> rails g model 注意名称：字符串，描述：字符串参数：类型

更改模型之间的关系后，例如您有 Model Book.rb 和 Model Person.rb 并且您想将 Book 更改为 Note，然后：

用户.rb

```
class User < ActiveRecord::Base     
  attr_accessible :id, :number

  has_many :books #delete this
  has_many :notes #add this
end 
```

书本.rb

```
class Book < ActiveRecord::Base     
  attr_accessible :id, :name

  belongs_to :user #delete this
end 
```

在 Book 模型中删除关系并在 Note 模型中添加。

note.rb

```
class Note < ActiveRecord::Base     
  attr_accessible :id, :name

  belongs_to :user #add this
end 
```

# c++ - 遍历数组并找到最接近键的数组元素的最佳方法是什么？

> ID：14223463
> 
> 赞同：1
> 
> 时间：2013-01-08T20:30:16.403
> 
> 标签：c++, visual-c++

到目前为止，这是我的代码，我被卡住了。就绝对值而言，与 7 最接近的值是 5。如何检查数组的每个元素以查看它是否是最接近的元素，然后返回该值。我知道这可能比我想象的要容易，但我是编程的初学者。

```
#include <iostream>
#include <cmath>
using namespace std;

const int MAX = 25;

int searchArray(int [], int); \\prototype

int main(){

    int numArray[MAX] ={1,4,5,10,11,12,13,14,15,16,17,18,19,20,35,26,43,15,48,69,32,45,57,98,100};

searchArray(numArray, 7);
system("pause");
return 0;
}

int searchArray(int a[], int b){

int distance = 0;

for(int i=0;i<MAX;i++){
    if(i==b)
        return i;
    else if(i<b || i > b)
        abs(distance) == i-b;
    return distance;

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:35:42.573

您可以[`std::min_element`](http://en.cppreference.com/w/cpp/algorithm/min_element)用作：

```
#include <iostream>
#include <algorithm>
#include <cstdlib>

int main()
{
   int numArray[] ={1,4,5,10,11,12,13,14,15,16,17,18,19,20,35,26,43,15,48,69,32,45,57,98,100};

   //find nearest element to key            
   int key = 7;
   auto cmp = [&](int a, int b) { return std::abs(key-a) < std::abs(key-b); };
   int nearest_value = *std::min_element(std::begin(numArray),std::end(numArray),cmp);

   std::cout << nearest_value << std::endl;
} 
```

输出（[演示](http://stacked-crooked.com/view?id=805d1bb1338ec7227a10e253b2cb8541)）：

```
5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:37:00.053

将您的搜索功能写入以下内容：

```
int searchArray(int a[], int b){

    int min_dist = 0; // keep track of mininum distance seen so far
    int min_index = 0; // keep track of the index of the element 
                       // that has the min index

    for( int i = 0; i < a.Length; i++ ){ // a.Length is the size of the array
        if( a[i] == b ) { // if we find the exact one, stop
            return i;
        } else { // otherwise, keep looking for the closest
            if ( abs(a[i] - b) < min_dist ) { // if this one is closer, update
                min_dist = abs(a[i] - b);
                min_index = i;
            }
        }
    }
    return min_index; // when we finish return the index of the closest
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T20:37:06.507

您可以使用标准算法为您做到这一点：

```
struct closer_to
{
    int target_;

    explicit closer_to( int target ) : target_( target ){}

    bool operator ()( int left, int right ) const
    {
        return std::abs( target_ - left ) < std::abs( target_ - right );
    }
};

int* iter =
    std::min_element(
        numArray + 0, numArray + MAX
      , closer_to( 7 )
    ); 
```

`min_element`将返回一个迭代器*（在本例中为指针） ，指向**Container*中没有其他元素的第一个元素，即`closer_to( 7 )`.

使用*C++11*和 lambdas，它看起来像这样：

```
int* iter = 
    std::min_element(
        numArray + 0, numArray + MAX
      , []( int left, int right ) { return std::abs( target_ - left ) < std::abs( target_ - right ); }
    ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T20:38:19.853

您必须将您的数字与阵列上的每个数字进行比较，并跟踪迄今为止的最小距离。

```
int searchArray(int a[], int b){
    int minDistance = -1;

    for(int i=0;i<MAX;i++){
        if(minDistance == -1 || abs(minDistance - b) > abs(a[i] - b))
            minDistance = a[i];
    }
    return minDistance;
} 
```

# javascript - 这个 for 循环有什么问题？

> ID：14223464
> 
> 赞同：1
> 
> 时间：2013-01-08T20:30:20.493
> 
> 标签：javascript, jquery, arrays, for-loop

大家好，我有一个数组，我正在尝试附加到 DOM！这是代码：

```
function inputFeedContent(data){
    for(var k=0; k < columns; k++) {
        var col = "<div class='col-1'>";
        for(var j=0; j < data.sample[k].length; j++) {
            col += "<p>"+data.sample[k][j]+"</p>";
        }
        col += "</div>";
        $('.sliding-window').append(col);
    }
} 
```

其中**列**= 12。

问题是我只得到其中的五个：

```
<div class="col-1">
    <p>Some text</p>
</div> 
```

我在这里做错了什么？请记住，我是菜鸟:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:38:06.587

我认为您正在尝试单独打印每一列，因此不是逐行打印。尝试这个：

```
function inputFeedContent(data) {
    for(var k=0; k < columns; k++) {
     var col = "<div class='col-1'>";
     for(var j=0; j < data.sample.length; j++) {
        col += "<p>"+data.sample[j][k]+"</p>";
     }
     col += "</div>";
     $('.sliding-window').append(col);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:42:43.887

可能是您的数组没有 12 列，所以不要将列定义为全局变量，试试这个

```
function inputFeedContent(data){
var col=[];
for(var k=0; k < data.sample.length; k++) {

       col.push("<div class='col-1'>");
        for(var j=0; j < data.sample[k].length; j++) {
            col.push("<p>"+data.sample[k][j]+"</p>");
        }
        col.push("</div>");

    }
$('.sliding-window').append(col.join(''));
} 
```

我还建议您避免字符串连接，因为它在循环中效率不高，并通过将其保持在循环之外来进行一次 dom 访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:41:24.857

如果`data`不包含正确数量的列，您将收到错误并且它将停止添加到您的页面。您可以使用以下内容确保列已正确初始化：

```
function inputFeedContent(data){
    var sampleData = data.sample || [];
    for(var k=0; k < columns; k++) {
        var col = "<div class='col-1'>";
        var columnData = sampleData[k] || [];

        for(var j=0; j < columnData.length; j++) {
            col += "<p>"+columnData[j]+"</p>";
        }
        col += "</div>";
        $('.sliding-window').append(col);
    }
} 
```

...但可能不应该支持这种情况，你应该抛出一个错误：

```
function inputFeedContent(data){
    var sampleData = data.sample || [];
    if(sampleData.length != columns){ 
        throw "inputFeedContent:  Sample data does not have the right number of columns.";
    }

    ..//Your code
} 
```

# php - 通过 PHP API 服务将图像上传到 OpenFire

> ID：14223469
> 
> 赞同：1
> 
> 时间：2013-01-08T20:30:34.720
> 
> 标签：php, xml, image, xmpp, openfire

我正在构建一个处理图像上传的 PHP API。使用 $_FILES 和 PHP move_uploaded_file() 将图像正常上传到 apache 服务器 - 这会将文件保存在本地，现在可用于网站。在同一过程中，我还需要访问 XMPP 服务器 (OpenFire) 以使用相同的图像更新头像。

我无法弄清楚如何解决这个问题，我想使用 $_FILES['userfile']['tmp_name'] 中的文件引用从 PHP tmp/ 位置获取实际的图像文件数据 - 这就是我们的方式当我们使用 move_uploaded_file() 时访问它。运行 move_uploaded_file() 后 tmp 文件数据是否仍然可用？名称表明并非如此，今天的实验显示之前的资源，在运行 move_uploaded_file() 之后是错误的。那么我如何才能点击图像数据并将其格式化以在 xml 数据包中使用它，同时仍然为后续 move_uploaded_file() 保留原始 tmp 文件？- 请参阅下面的 xml 示例。

另一种方法是使用 get_file_contents() 并读取我们刚刚保存到文件系统的文件——但这似乎很愚蠢。

下一点是我的头脑。OpenFire XMPP 服务器允许通过 XMPP 接口本身进行分配。有关如何上传和设置用户头像的示例，请参见[http://xmpp.org/extensions/xep-0084.html#examples-multiple 。](http://xmpp.org/extensions/xep-0084.html#examples-multiple)

有人请在这里指出正确的方向，我需要向开放式服务器发送一个 XML (XMPP) 数据包 - 我已经让 XMPPHP 运行并连接到服务器，不用担心，它的 xml 格式让我很伤心.

[来自http://xmpp.org/extensions/xep-0084.html#examples-multiple](http://xmpp.org/extensions/xep-0084.html#examples-multiple)的示例 XMP 数据包（示例 1\. 将头像数据发布到数据节点）

```
<iq type='set' from='juliet@capulet.lit/chamber' id='publish1'>
 <pubsub xmlns='http://jabber.org/protocol/pubsub'>
<publish node='urn:xmpp:avatar:data'>
  <item id='111f4b3c50d7b0df729d299bc6f8e9ef9066971f'>
    <data xmlns='urn:xmpp:avatar:data'>
      qANQR1DBwU4DX7jmYZnncm...
    </data>
  </item>
</publish> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:03:29.303

所以我使用 xmpphp 库得到了这个 xmpp 头像问题。我写了这个函数来启动类：

```
/*
 *  arg 1: $file_handle = the local path to the image
 *  arg 2: $file_type   = the file extension, jpg, png etc.
*/

function upload_new_xmpp_avatar($file_handle, $file_type)
{
// XMPPHP class. Used to connect to xmpp server
require_once "xmpphp/XMPPHP/XMPP.php;

$xmpp_host = "xmpp.domain.com";

$xmpp_server = ""xmpp.domain.com";

$xmpp_port = "5222";

$admin_username = "admin_user";

$admin_pasword = "admin_pw";

$conn = new XMPPHP_XMPP($xmpp_host, $port, $admin_username, $admin_password, "xmpphp", $xmpp_server, $printlog = false, $loglevel = XMPPHP_Log::LEVEL_VERBOSE);

try
{
    // load the image from filesystem
    $raw_file = file_get_contents($file_handle);                                                                            

    // get the image information array, width, height etc.
    $image_info = getimagesize($file_handle);                                                                               

    // build sha1 hash of the raw image data
    $image_sha1_hash = sha1($file_handle);                                                                                  

    // base64 encode it!
    $file_data = base64_encode($raw_file);                                                                                  

    $conn->connect();

    $conn->processUntil('session_start');

    $conn->upload_new_avatar_from_file($user_r->user_name, $file_data, $image_info, $image_sha1_hash);

    $conn->disconnect();
}
catch(XMPPHP_Exception $e) 
{
    api_die("xmpp_error: ".$e->getMessage());
}

return $image_sha1_hash; 
```

}

还需要在 XMPP.php 类中添加一个新的类函数：

```
 // adding upload avatar option

public function upload_new_avatar_from_file($user_name, $file_data, $image_info, $image_sha1_hash)          // 08 01 2013 NM adding upload new avatar function
{
    $id = 'upload_avatar_file_' . $this->getID();

    $image_file_size = ($image_info['bits']*8);                                                             // convert bits to bytes.. dur.

    $image_mime_type = $image_info['mime'];

    $image_height = $image_info[1];                                                                         

    $image_width = $image_info[0];

    $xml = "<iq type='set' to='$user_name@$xmpp_server' id='$id'>
                <vCard xmlns='vcard-temp'>
                    <PHOTO xmlns='vcard-temp'>
                        <BINVAL xmlns='vcard-temp'>$file_data</BINVAL>
                        <TYPE xmlns='vcard-temp'>$image_mime_type</TYPE>
                    </PHOTO>
                </vCard>
            </iq>";

    // 2nd xml comand sets the uploaded image as the new vCard avatar 

    $xml2 = "<presence>
                <priority>30</priority>
                <status>Online</status>
                <x xmlns='vcard-temp:x:update'>
                  <photo>$image_sha1_hash</photo>
                </x>
                <x xmlns='jabber:x:avatar'>
                  <hash>$image_sha1_hash</hash>
                </x>
                <c xmlns='http://jabber.org/protocol/caps' node='http://vacuum-im.googlecode.com' ver='nvOfScxvX/KRll5e2pqmMEBIls0=' hash='sha-1'/>
              </presence>";

    // end vacuum vCard example

    // http://xmpp.org/extensions/xep-0084.html node and metadata example     

    $this->addIdHandler($id, 'upload_avatar_handler');

    // send the 1st packet
    $this->send($xml);                                                                                          

    $this->addIdHandler($id2, 'upload_avatar_handler');

    // send the 2nd packet
    $this->send($xml2);                                                                                         
}

protected function upload_avatar_handler($xml)
{
    switch ($xml->attrs['type']) 
    {
        case 'error':
            $this->event('upload_new_avatar', 'error');
        break;

        default:
            $this->event('upload_new_avatar', 'default');
        break;
    }
} 
```

希望它可以帮助尝试做同样的人！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T20:33:45.170

不，一旦你使用了 move_uploaded_file)，它就不再在临时目录中了。这就是为什么它是**MOVE**而不是**COPY**。没有什么说你不能移动它，然后从它被移动到的任何地方使用 copy() 操作，例如

```
move_uploaded_file($_FILES['file']['tmp_name'], '/site/file1.txt');
copy('/site/file1.txt', '/size/other/dir/file2.txt');
etc... 
```

它只是一个文件......仅仅因为你已经移动它并不意味着你不能再为其他事情触摸它。

# java - 删除所有行然后重新加载 JTable 中的行导致 getSelectedRow 返回 -1

> ID：14223483
> 
> 赞同：0
> 
> 时间：2013-01-08T20:31:26.853
> 
> 标签：java, swing, jtable, tablemodel, listselectionlistener

当使用我创建的一些软件时，它有一个带有名为 validAcTableModel 的 DefualtTableModel 的 JTable，当我初始化 validAcTable 时，这是我正在使用的逻辑：

```
 ListSelectionModel cellSelectModel = validAcTable.getSelectionModel();
    cellSelectModel.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    cellSelectModel.addListSelectionListener(new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {

            if (d == 0) {
                    suggestedAcTable.clearSelection();
                d = 1;
            } else {

                String selectedAcData = null;
                String selectedSentData = null;
                String selectedDefData = null;
                String selectedBoolean = null;
                validAcTable.revalidate();
                int[] selectedRow = validAcTable.getSelectedRows();
                for (int i = 0; i < selectedRow.length; i++) {
                    selectedAcData = validAcTable.getValueAt(selectedRow[i], 0).toString();
                    selectedDefData = validAcTable.getValueAt(selectedRow[i], 1).toString();
                    selectedBoolean = validAcTable.getValueAt(selectedRow[i], 2).toString();
                    selectedSentData = getSentence((String) validAcTable.getValueAt(selectedRow[i], 0));
                    if (selectedSentData == null) {
                        selectedSentData = "";
                    }
                }
                Acronym acr = new Acronym(selectedAcData, selectedSentData, selectedDefData, false);
                changedAcList.add(acr);
                //String has a white space....need to redo this...
                currentAccTextField.setText(selectedAcData);
                currentSentenceTextArea.setText(selectedSentData);
                currentDefTextArea.setText(selectedDefData);
                if (selectedBoolean != null) {
                    if (selectedBoolean.equals("true")) {
                        acceptAccButton.setEnabled(false);
                        validLabel.setText("Definition is valid in document");
                    } else {
                        acceptAccButton.setEnabled(true);
                        validLabel.setText("Definition is not valid");
                    }
                }

                d = 0;
            }
        }
    }); 
```

当我单击 GUI 上的新按钮并使用

```
 validAcTableModel.getDataVector().removeAllElements(); 
```

当我尝试重新加载表格并选择一个项目并使用以下方法获取 selectedRow 时：

```
 private void acceptAccButtonActionPerformed(java.awt.event.ActionEvent evt) { 
       if (validAcTable.getSelectedRow() >= 0) {
             StringBuilder acDocText = new StringBuilder();
             String acNameDefthmlText = "";
       }
  } 
```

这总是在删除所有元素后在所选行上返回一个负数，然后在我选择一行时重新添加行。我会很感激一些帮助。我正在为 valueChanged 使用 ListSelectionListener。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:37:51.087

*   > 当我尝试重新加载表格并选择一个项目并使用 selectedRow 获取

以编程方式将选择设置为所需的行[JTable.setRowSelectionInterval(int index0, int index1);](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setRowSelectionInterval%28int,%20int%29)

*   > 删除所有元素后，这总是在所选行上返回负数。

[`Integer -1`仅当 `any row isn't selected`来自 API时才返回](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedRow%28%29)

```
public int getSelectedRow()

Returns the index of the first selected row, -1 if no row is selected.

Returns:
    the index of the first selected row 
```

*   尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:42:40.173

要清除数据，请更改方法`javax.swing.table.DefaultTableModel.setRowCount(int)`；

```
((DefaultTableModel) validAcTable.getModel()).setRowCount(0); 
```

要重新填充模型，请使用：

```
javax.swing.table.DefaultTableModel.setDataVector(Vector, Vector);
javax.swing.table.DefaultTableModel.setDataVector(Object[][], Object[]) 
```

请记住使用模型的相同实例。

使用[`DefaultTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html). 这些启动适当的事件以更新 UI。

# php - 扩展控制器和传递变量

> ID：14223490
> 
> 赞同：-3
> 
> 时间：2013-01-08T20:32:08.977
> 
> 标签：php, controller, backend

我有一个后端控制器和其他扩展后端控制器的控制器，我试图弄清楚如何在后端控制器中设置一个变量并在扩展它的控制器中使用它。

如果我在后端控制器中设置一个作为配置值的变量，子控制器如何访问它。

编辑：

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

我正在使用 phil sturgeon 基类在我的应用程序中保持干燥方法，控制器如下所示，当我加载登录控制器时，我收到 500 错误，但如果我加载应用程序中包含的 CI 控制器欢迎，它只会加载美好的。

为什么访问登录控制器时出现 500 错误。

```
<?php 

if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Controller extends CI_Controller {

    public function __construct()
    {
        parent::__construct();  
    }

    public function index()
    {   

    }
}

<?php 

if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Backend_Controller extends MY_Controller 
{

    public function __construct()
    {
        parent::__construct();  
    }

    public function index()
    {   

    }
}

<?php 

if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends Backend_Controller {

    public function __construct()
    {
        parent::__construct();  
    }

    public function index()
    {   

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:38:10.647

如果您的后端控制器（父级）具有可见性为公共或受保护的实例变量，则扩展后端控制器的控制器将能够使用`$this`关键字访问这些变量。

例子：

```
<?php
class ParentController {
    protected $foo = "bar";
}

class ChildController extends ParentController {
    public function indexAction() {
        echo $this->foo;
    }
} 
```

# asp.net-mvc-3 - 为什么会出现“路径中的非法字符”错误？

> ID：14223491
> 
> 赞同：0
> 
> 时间：2013-01-08T20:32:09.887
> 
> 标签：asp.net-mvc-3

我正在尝试将数据保存到这样的文件中：

```
FileStream file = new FileStream("c:\temp", FileMode.Create, System.IO.FileAccess.Write);
        byte[] bytes = new byte[file.Length];
        file.Read(bytes, 0, (int)file.Length);
        file.Write(bytes, 0, bytes.Length);
        file.Close();
        file.Close(); 
```

我得到这个错误：

路径中的非法字符。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：路径中有非法字符。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:33:55.077

试试 "c:\\temp" - "c:\temp" 是字符串 [c] [:] [tab character] [e] [m] [p] 这几乎肯定不是你想要的文件名！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:37:04.373

使用以下任一

```
FileStream file = new FileStream(@"c:\temp", FileMode.Create, System.IO.FileAccess.Write);
FileStream file = new FileStream("c:\\temp", FileMode.Create, System.IO.FileAccess.Write); 
```

'\' 是转义字符，所以不能直接使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:33:44.273

您需要转义文件路径中的反斜杠：

```
 FileStream("c:\\temp", ... 
```

`\t`是制表符的字符。

# javascript - 无法获得复选框来选中和取消选中其他人

> ID：14223492
> 
> 赞同：1
> 
> 时间：2013-01-08T20:32:12.007
> 
> 标签：javascript, html

我需要帮助来尝试让一些复选框在检查其他复选框时检查其他复选框。

即在JSFiddle链接（[http://jsfiddle.net/sHKRM/](http://jsfiddle.net/sHKRM/)）中，当第一个选项“牛奶和面包”被选中时，我需要检查“面包”和“牛奶”的复选框以及“牛奶”和面包”框保持选中状态。

这需要在页面上多次执行（例如，鸡肉和蔬菜应该同时检查这两项）。

如果用户取消选中，我还需要能够反转选择。即如果勾选了'Milk and Bread'，并且两个都被勾选了，如果'Milk and Bread'复选框没有被勾选，那么它们都必须被取消勾选。

如果复选框是一个列表，我在 stackoverflow 上找到了各种解决方案，但是我无法让它与脚本的其余部分一起使用（一旦选中了相应的项目，用户就会生成列表，然后将其复制到剪贴板）。

正如您在小提琴中看到的那样，需要有多个“组合”，因为用户可能想要勾选“牛奶和面包”和“鸡肉和蔬菜”，所以我的问题是如何使用我在时刻（即如下所示的表格中的所有内容，而不仅仅是列表）？

```
 <tr>
    <td><input type='checkbox' name='pe_gen1' value='- Milk and Bread' />&nbsp;Milk and Bread</td>
    <td><input type='checkbox' name='pe_gen2' value='- Bread' />&nbsp;Bread</td>
    </tr>
    <tr>
    <td><input type='checkbox' name='pe_gen2' value='- Milk' />&nbsp;Milk</td>
    <td><input type='checkbox' name='pe_gen2' value='- Cookies' />&nbsp;Cookies</td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:36:42.470

无耻的自我推销：这看起来像是我编写[的 jQuery-CheckAll 插件的一个很好的用例。](http://mjball.github.com/jQuery-CheckAll/)您可以像这样在这种情况下应用它：

```
$('input[value="- Milk and Bread"]')
    .checkAll('input[value="- Milk"], input[value="- Bread"]'); 
```

[http://jsfiddle.net/mattball/cL8LL/](http://jsfiddle.net/mattball/cL8LL/)

# .net - Windows 应用商店应用程序集会覆盖本地程序集？

> ID：14223496
> 
> 赞同：0
> 
> 时间：2013-01-08T20:32:32.487
> 
> 标签：.net, c#-4.0

我不太清楚如何解释这一点，所以请原谅我有些粗略的细节，但这是我观察到的 - 我有一个用 C# 编写的 windows 商店应用程序，它引用了一个类程序集，也是用 C# (.net 4.5) 我在笔记本电脑上使用这个应用程序 - 有时是商店版本，有时是通过 Visual Studio 获得的最新版本

然后，我为我正在做的其他一些工作创建了一个完全独立的项目，并且我想重新使用相同的程序集。这些只是我的演示项目，所以我将代码复制到磁盘上的不同位置并将其包含在我的第二个项目中。

这两个项目都运行良好。

此后，我更改了 windows 商店应用程序使用的项目代码-我向公共静态方法添加了第二个参数-从那时起，我在第二个项目中遇到编译时错误，抱怨“方法 xxxx 没有重载需要 1争论'。

我无法解释。

使用 F12 从导致错误的行中获取方法的定义，我可以看到方法签名，它肯定需要 1 个参数（在此版本中）。我在 bin/debug 文件夹中的程序集上使用了 Telerik 的 JustDecompile，我可以看到我的方法只采用一个参数。

在调用该方法时添加第二个 null 参数允许我进行构建，尽管该方法显然只需要解决方案中版本中的一个参数。

引用是项目引用，路径指向正确的地方，复制到本地设置为true。

我不确定为什么要使用较新版本的程序集定义？

我什至尝试卸载 Windows 商店应用程序，但没有帮助

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:45:35.083

听起来构建所采用的解析路径发生了一些变化。需要检查的几件事是：

*   是放置在 GAC 中的较新程序集。如果是这样，这可能会导致构建解析为 GAC 程序集（因为 GAC 通常在解析路径中较早）
*   项目中的提示路径是否完全正确（即指向没有更改的副本） - 检查这一点的最佳方法是在文本编辑器中打开项目文件并在那里检查
*   您是否对较新的程序集有任何错误引用（除了对您期望的程序集的引用）

也可能值得在参考上使用“使用特定版本”设置来尝试强制它解析为没有更改的版本

# ruby - 我应该对断开的链接状态使用哈希还是数组？

> ID：14223499
> 
> 赞同：0
> 
> 时间：2013-01-08T20:32:34.513
> 
> 标签：ruby, arrays, hash

我从`validate_pdf_links()`返回数组的方法调用中获取了一组链接：

```
broken_pdf_links = broken_pdf_links + validate_pdf_links() 
```

我在具有多个链接的多个页面上执行此操作，因此它的工作原理如下：

1.  转到页面。
2.  使用 . 检查该页面上的所有链接`validate_pdf_links()`。
3.  转到下一页。
4.  重复。

我想知道链接断开时我在哪个页面上，因此我使用以下内容进行页面识别：

```
page_name = @browser.title 
```

我想要一个输出如下：

```
broken_pdf_links.each do |pdf|
puts "The pdf link #{pdf} was broke on page #{page_name} 
```

我应该如何组装散列或数组以包含元素并以我建议的方式检索它们？

编辑:::::: 目前正在尝试：

```
broken_pdf_links.each {|pdf| broken_pdfs = broken_pdfs.push[pdf,page_name]} 
```

存储，然后

```
broken_pdfs.each do |broke_pdf|
   puts "Link #{broke_pdf[0][0]} on Page #{broke_pdf[0][1]}\n"
   pdf_index += 1
end 
```

读书

但我在 store 命令中收到错误“TypeError：无法将数组转换为整数”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:15:43.003

每个页面上可能有多个断开的链接。哈希在这里会很好。

```
broken_pdf_links = {}

broken_pdf_links.merge!(:page_name => validate_pdf_links())

broken_pdf_links.each do |k,v|
  puts "The pdf link(s) #{v} was broken on page #{k}"
end 
```

**Output:**

The pdf link(s) ["fail1", "fail2", "fail3"] was broken on page page_name

The pdf link(s) ["fail1"] was broken on page other_page

You could go further with the array and format it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:18:48.723

Instead of:

```
broken_pdf_links.each {|pdf| broken_pdfs = broken_pdfs.push[pdf,page_name]} 
```

Use:

```
broken_pdfs = broken_pdf_links.map { |pdf| [pdf,page_name] } 
```

Mostly you were mixing up several ways of aggregating the sub-array.

You could use `map`, which is shorter and more direct, or:

```
broken_pdfs = []
broken_pdf.links.each do |pdf|
  broken_pdfs += [pdf, page_name]
end 
```

An alternate to that is:

```
broken_pdfs = []
broken_pdf.links.each do |pdf|
  broken_pdfs.push([pdf, page_name])
end 
```

# r - 交错列

> ID：14223507
> 
> 赞同：1
> 
> 时间：2013-01-08T20:33:14.257
> 
> 标签：r, bar-chart

我正在尝试在 R 中生成一个类似于

![![](http://imgur.com/Srt9L_png)](../Images/067631902af2fd2115de805e5b2b91ae.png)

包含来自两个不同数据集的数字的列交错。我已经完成了大部分困难的事情，我正在使用这段代码

```
library(gplots)
meang7 <- c(355.8303, 241.9443, 253.2399, 356.4712, 779.6908, 1444.0087, 1215.7648)
meang4 <- c(196.97559, 185.70940, 190.80855, 165.82834, 190.64914, 152.46845, 85.21208)
SEMg7 <- c(20.13935, 20.74347, 19.35914, 28.60324, 53.02302, 84.71020, 86.93199)
SEMg4 <- c( 9.469664, 7.515927, 12.500072, 10.379942, 4.455329, 15.124991, 6.888774)
barg7 <- barplot(meang7, main="C. Sapidus 35-22 ppt",     names.arg=c(0,6,12,24,48,96,168),ylim=c(0,1700), col="gray", axis.lty=1, xlab="Time Post     Transfer (hr)", ylab="CA Activity (μmol CO2 mg protein−1 min−1)")
barg4 <- barplot(meang4, col="blue", add=TRUE)
plotCI(x=barg7, y=meang7, uiw=SEMg7, lty=1, gap=0, add=TRUE)
plotCI(x=barg4, y=meang4, uiw=SEMg4, lty=1, gap=0, add=TRUE) 
```

要得到

这么远 ![在此处输入图像描述](../Images/9e3af2b64c9151de02f4c89f8944faf9.png)

但我不知道如何使列交错而不是重叠。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:03:58.910

这里是。您需要将两个向量按行组合成一个矩阵，并使用以下`beside`参数`barplot()`：

```
library(gplots)
meang7 <- c(355.8303, 241.9443, 253.2399, 356.4712, 779.6908, 1444.0087, 1215.7648)
meang4 <- c(196.97559, 185.70940, 190.80855, 165.82834, 190.64914, 152.46845, 85.21208)
SEMg7 <- c(20.13935, 20.74347, 19.35914, 28.60324, 53.02302, 84.71020, 86.93199)
SEMg4 <- c( 9.469664, 7.515927, 12.500072, 10.379942, 4.455329, 15.124991, 6.888774)
barg <- barplot(matrix(c(meang7,meang4),nrow=2,byrow=TRUE), main="C. Sapidus 35-22 ppt", names.arg=c(0,6,12,24,48,96,168), ylim=c(0,1700), col=c("gray","blue"), axis.lty=1, xlab="Time Post Transfer (hr)", ylab="CA Activity (μmol CO2 mg protein−1 min−1)", beside=TRUE)
plotCI(x=barg[1,], y=meang7, uiw=SEMg7, lty=1, gap=0, add=TRUE)
plotCI(x=barg[2,], y=meang4, uiw=SEMg4, lty=1, gap=0, add=TRUE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:03:49.550

首先，您需要使用 reshape 包将数据重塑为更有用的长格式。

```
library(reshape)
library(ggplot2)
meang7 <- c(355.8303, 241.9443, 253.2399, 356.4712, 779.6908, 1444.0087, 1215.7648)
meang4 <- c(196.97559, 185.70940, 190.80855, 165.82834, 190.64914, 152.46845, 85.21208)
SEMg7 <- c(20.13935, 20.74347, 19.35914, 28.60324, 53.02302, 84.71020, 86.93199)
SEMg4 <- c( 9.469664, 7.515927, 12.500072, 10.379942, 4.455329, 15.124991, 6.888774)
hours <- as.factor(c(0,6,12,24,48,96,168))
d <- data.frame(m7=meang7, m4=meang4, hours=hours )
d <- melt(d, measure.vars=c("m7", "m4"))
d$se <- c(SEMg7, SEMg4) 
```

使用标准误差为误差线创建限制并使用 ggplot 绘图：

```
limits <- aes(ymax=d$value + d$se, ymin=d$value - d$se)
ggplot(d, aes(x=hours, y=value, fill=variable)) + geom_bar(stat="identity", position="dodge") + geom_errorbar(ymax=d$value + d$se, ymin=d$value-d$se) + scale_y_continuous(limits=c(0, 1600)) 
```

# php - While 循环和 MoveNext

> ID：14223508
> 
> 赞同：0
> 
> 时间：2013-01-08T20:33:22.993
> 
> 标签：php, mysql, nested

我需要一些关于嵌套 sql 查询的最佳方法的建议。我写了一个新的查询来获取额外的信息，它可以作为一个独立的查询正常工作，但是当我尝试把 MoveNext(); 命令在原始之前，它会导致页面加载失败。下面我举个例子。

```
$new_query = "SELECT new_values,new_price
FROM new_table
WHERE new_options_id = 2
AND language = 1";

$new_result = $db->Execute($new_query); 
while (!$new_result->EOF){
$newdata = $new_result->fields['new_values']
$newprice = $new_result->fields['new_price'];

$original_query = "SELECT * FROM this_table WHERE orders_id = '$ship_order_id' and class = 'ot_subtotal'";
$original_result = $db->Execute($original_query);

SOME CODE IN HERE

while (!$original_result->EOF) {

MORE CODE HERE WITH SEVERAL {

RESULTS OF ORIGINAL QUERY ARE OUTPUT
RESULTS OF NEW QUERY ARE OUTPUT

$new_result->MoveNext();
$original_result->MoveNext();

}
} 

MORE CODE WITH CLOSING } FROM EARLIER CODE 
```

问题是放入新的 MoveNext() 及其关联的 } 会终止页面加载。我确实看过将新查询的数据集合包含到原始查询中，但我的 SQL 知识有限。是否有另一种解决方法，以便我可以遍历原始循环中的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:42:24.527

如果您有多个查询，则需要多个语句对象，否则如果您将前一个语句对象与第二个查询一起使用，您将删除前一个语句的前一个结果。

只需引入第二个语句对象就可以了。

此外，您没有告诉您正在使用哪个数据库客户端库，因此我无法提供任何具体建议。

# android - 带有动作模式的android listview

> ID：14223511
> 
> 赞同：0
> 
> 时间：2013-01-08T20:33:33.443
> 
> 标签：android

在我的 android 应用程序中，有一个从 cursor(db) 填充的列表视图。它启用了多项选择，并且 actionbarsherlock 的动作模式对选定项目进行了操作。

我被困在这种情况下，

我从列表视图中选择了两个项目，动作模式说选择了两个项目。现在，如果我单击返回，则操作模式完成，但 checkitem 保持选中状态。如何在后退键上取消选中所有这些，记住 listview.getChildCount() 只会返回可见项目？

```
 private static SparseBooleanArray checkedItemsArray;

    @Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3)
{
        boolean isOneRowChecked = false;
    CheckableRelativeLayout r;
    checkedItemsArray = listView.getCheckedItemPositions();

    for (int i = 0; i < listView.getChildCount(); i++)
    {
        r = (CheckableRelativeLayout) listView.getChildAt(i);

        if (r != null && r.isChecked())
        {
            r.setBackgroundColor(Color.DKGRAY);
            isOneRowChecked = true;
        } else
        {
            r.setBackgroundColor(Color.BLACK);
        }
    }
    mActionMode = OtherActivity.this.startActionMode(mActionModeCallback);

    if (!isOneRowChecked && mActionMode != null)
    {
        mActionMode.finish();
        checkedItemsArray = null;
    }

} 
```

我的活动也在实现 OnScrollListener，所以

```
 @Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)
{
    int i = firstVisibleItem;
    if (checkedItemsArray != null)
    {
        for (int k = 0; k < visibleItemCount; k++)
        {

            CheckableRelativeLayout r = (CheckableRelativeLayout) listView.getChildAt(k);
            if (checkedItemsArray.get(i))
            {
                r.setChecked(true);
                r.setBackgroundColor(Color.DKGRAY);
            } else
            {
                r.setChecked(false);
                r.setBackgroundColor(Color.BLACK);
            }
            i++;
        }
    }
    else
    {
        for (int k = 0; k < visibleItemCount; k++)
        {
            listView.setItemChecked(k, false);
            CheckableRelativeLayout r = (CheckableRelativeLayout) listView.getChildAt(k);
            r.setChecked(false);
            r.setBackgroundColor(Color.BLACK);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:49:01.007

我建议您在 onDestroyActionMode 中执行此操作：

```
public void onDestroyActionMode(ActionMode mode) {
  listView.clearChoices();
  for (int i = 0; i < listView.getChildCount(); i++) {
    ((Checkable) listView.getChildAt(i)).setChecked(false);
  }
  listView.setChoiceMode(ListView.CHOICE_MODE_NONE);

} 
```

# jquery - 无法从 jQuery Mobile 中的链接页面提交表单

> ID：14223515
> 
> 赞同：0
> 
> 时间：2013-01-08T20:33:50.833
> 
> 标签：jquery, html, forms, jquery-mobile

我正在尝试使用 jQuery Mobile 提交表单，但如果表单位于链接页面上，它将不会提交。例如，我的主页是`mysite.com/page.html`. 如果我将表单代码放在该页面上，则表单将完美提交。如果我将表单放在`data-role="page"`同一个文件中的不同位置，页面的链接将变为`mysite.com/#reg`并且提交按钮完全停止工作。我正在使用 jQuery 1.8.3 和 jQuery Mobile 1.2.0。

这是一个仅在“注册”页面上带有表单[的 jsFiddle 。](http://jsfiddle.net/uj68M/)您会注意到单击提交时它没有做任何事情。[这是完全相同的代码](http://jsfiddle.net/h7apJ/1/)，只是将表单复制粘贴到主页上。单击提交时，会给出一个加载屏幕（这意味着它正在尝试提交，但没有找到我的验证脚本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:35:53.500

您忘记关闭第一个表单标签。修复后一切正常。

在这里放置了一个固定版本：

```
<form action="login.php" method="POST">
    <a href="#index" data-role="button" data-transition="slide" data-direction="reverse">
        Return to home page
    </a>
<!-- The closing form tag -->
</form> 
```

[http://jsfiddle.net/JVXEa/](http://jsfiddle.net/JVXEa/)

# java - Maven：必须是有效版本，但为“RELEASE”

> ID：14223517
> 
> 赞同：2
> 
> 时间：2013-01-08T20:34:06.683
> 
> 标签：java, maven

我对 Maven 非常陌生，并尝试使用来自 Maven 的[CarbonFive DB 迁移](http://code.google.com/p/c5-db-migration/)。

根据他们的文档，我在我的`pom.xml`

```
<pluginRepositories>
    <pluginRepository>
        <id>c5-public-repository</id>
        <url>http://mvn.carbonfive.com/public</url>
    </pluginRepository>
</pluginRepositories> 
```

和

```
 <plugins>
       <plugin>
            <groupId>com.carbonfive.db-support</groupId>
            <artifactId>db-migration-maven-plugin</artifactId>
            <version>RELEASE</version>
            <configuration>
                <url>jdbc:mysql://localhost:3306/bb</url>
                <username>bb</username>
                <password>bb</password>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.6</version>
                </dependency>
            </dependencies>
        </plugin>
      </plugins> 
```

现在当我尝试运行迁移时

```
$ mvn db-migration:migrate 
```

我看到错误说

```
[ERROR]     'build.plugins.plugin.version' for com.carbonfive.db-support:db-migration-maven-plugin must be a valid version but is 'RELEASE'. @ line 165, column 26 
```

并且`line 165`是

```
<version>RELEASE</version> 
```

这是根据他们的文档。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:44:58.940

好吧，你需要填写你想要的版本。看起来，来自[http://code.google.com/p/c5-db-migration/](http://code.google.com/p/c5-db-migration/)：

> 最新版本：0.9.9-m5（查看新的检查目标！）

所以尝试`0.9.9-m5`代替`RELEASE`.

Maven 版本始终采用`x.y.z-DESCRIPTOR`带有`y`,`z`和`DESCRIPTOR`可选的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:47:00.493

Maven 有[版本规则](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)。可以更改它们，但通常不需要。

如果您查看他们的[Nexus](http://mvn.carbonfive.com/public)，您会看到最新的稳定版本`db-migration-maven-plugin`是[0.9.8](http://mvn.carbonfive.com/nexus/content/groups/public/com/carbonfive/db-support/db-migration-maven-plugin/0.9.8/)。

# r - R 中的 Treemap 包：对第一个索引参数使用不同的调色板，对 vColor 变量使用不同的调色板

> ID：14223520
> 
> 赞同：0
> 
> 时间：2013-01-08T20:34:10.263
> 
> 标签：r, treemap

`Treemap`R 中的包似乎比包中的`treemap`函数具有更多的功能`portfolio`。但是，从[参考手册](http://cran.r-project.org/web/packages/treemap/treemap.pdf)（非常好，顺便说一句）中并不清楚，是否可以对第一个索引参数使用不同的调色板并使用颜色的阴影（从几乎白色到定义的颜色）来映射第二个索引项 ( `vColor`)。我追求的是这样的：http: [//visualrevenue.com/media/uploaded_images/news-aggregation-treemap.jpg](http://visualrevenue.com/media/uploaded_images/news-aggregation-treemap.jpg)

作为一个例子，我想拥有不同颜色的大陆（蓝色、绿色、红色等），而 GNI 的颜色阴影将是通用的（例如在 alpha 比例上）。该示例来自参考手册。

```
data(GNI2010)
# create treemap
tmPlot(GNI2010,
index=c("continent", "iso3"),
vSize="population",
vColor="GNI",
type="value") 
```

这在当前`treemap`包中是否可行，还是需要对`tmPlot`代码进行重大修订？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:07:23.920

我非常喜欢你的想法。

不幸的是，当前版本是不可能的。但是，当然可以将此功能实现到 tmPlot 中，尽管它并不简单（但也没有那么困难）。我会在下次更新的待办事项列表中加入。

# c# - 在运行时将一个类动态映射到另一个类 C#

> ID：14223523
> 
> 赞同：0
> 
> 时间：2013-01-08T20:34:20.863
> 
> 标签：c#, type-conversion, runtime-compilation

我正在尝试构建一个系统，将数据从垂直键值对存储系统转换为更传统的水平列存储。

源数据看起来像这样

```
public class Container
{
  public string Type { get; set; }
  public IEnumerable<Attribute> Attributes { get; set; }
  public IEnumerable<Container> RelatedContainers { get; set; }
}

public class Attributes
{
  public string Name{ get; set; }
  public string Value { get; set; }
} 
```

它会生成类似的数据

```
public class Person
{
  public string Name { get; set; }
  public IEnumerable<Address> Addresses { get; set; }
}

public class Address
{
  public string Line1 { get; set; }
  public string City { get; set; }
  public string State { get; set; }
  public string Zip { get; set; }
} 
```

在这种情况下有一些陷阱。首先，直到运行时我才知道目标类型中的所有字段。我对此有一个粗略的解决方案，可以在运行时根据源数据的结构生成新类。

不过，我想不出一种将数据本身映射到新类的好方法。我很想有人指出一种更简单的方法来解决问题，或者在我前进的道路上为下一步提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:04:14.633

这是一些我认为可以为您提供一些帮助的代码。它不处理嵌套对象，但这里应该有足够的空间让您填补空白。

它使用您问题中的类，并填充一个地址对象。“CreateObjectFromContainer”方法是实际执行工作的地方。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace PopulateFromAttributes
{
class Program
{
    static void Main(string[] args)
    {
        // Set up some test data - an address in a Container
        var attributeData = new List<Attributes> 
        {
            new Attributes { Name = "Line1", Value = "123 Something Avenue" },
            new Attributes { Name = "City", Value = "Newville" },
            new Attributes { Name = "State", Value = "New York" },
            new Attributes { Name = "Zip", Value = "12345" },
        };
        Container container = new Container { Type = "Address", Attributes = attributeData };

        // Instantiate and Populate the object
        object populatedObject = CreateObjectFromContainer("PopulateFromAttributes", container);
        Address address = populatedObject as Address;

        // Output values
        Console.WriteLine(address.Line1);
        Console.WriteLine(address.City);
        Console.WriteLine(address.State);
        Console.WriteLine(address.Zip);
        Console.ReadKey();
    }

    /// <summary>
    /// Creates the object from container.
    /// </summary>
    /// <param name="objectNamespace">The namespace of the Type of the new object.</param>
    /// <param name="container">The container containing the object's data.</param>
    /// <returns>Returns a newly instantiated populated object.</returns>
    private static object CreateObjectFromContainer(string objectNamespace, Container container)
    {
        // Get the Type that we need to populate and instantiate an object of that type
        Type newType = Type.GetType(string.Format("{0}.{1}", objectNamespace, container.Type));
        object newObject = Activator.CreateInstance(newType);

        // Pass each attribute and populate the values
        var properties = newType.GetProperties();
        foreach (var property in properties)
        {
            var singleAttribute = container.Attributes.Where(a => a.Name == property.Name).FirstOrDefault();
            if (singleAttribute != null)
            {
                property.SetValue(newObject, singleAttribute.Value, null);
            }
        }

        return newObject;
    }
}

public class Container
{
    public string Type { get; set; }
    public IEnumerable<Attributes> Attributes { get; set; }
    public IEnumerable<Container> RelatedContainers { get; set; }
}

public class Attributes
{
    public string Name { get; set; }
    public string Value { get; set; }
}

public class Address
{
    public string Line1 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:38:21.473

使用 .NET Reflection 绑定目标类怎么样？我发现了一个样本，我相信它可以让你做你想做的事：

[http://www.codeproject.com/Articles/55710/Reflection-in-NET](http://www.codeproject.com/Articles/55710/Reflection-in-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:40:33.260

这似乎可行：

```
object CreateObjectFromNVPair(Container c)
{
    Type t = Type.GetType(this.GetType().Namespace + "." + c.Type);
    object o = Activator.CreateInstance(t);
    if (c.Attributes != null)
    {
        foreach (Attribute a in c.Attributes)
        {
            PropertyInfo pi = o.GetType().GetProperty(a.Name);
            pi.SetValue(o, a.Value, null);
        }
    }
    if (c.RelatedContainers != null)
    {
        foreach (Container c2 in c.RelatedContainers)
        {
            Type lt = typeof(List<>);
            Type t2 = Type.GetType(this.GetType().Namespace + "." + c2.Type);
            PropertyInfo pi = o.GetType().GetProperty(c2.Type + "List");
            object l = pi.GetValue(o, null);
            if (l == null)
            {
                l = Activator.CreateInstance(lt.MakeGenericType(new Type[] { t2 }));
                pi.SetValue(o, l, null);
            }
            object o2 = CreateObjectFromNVPair(c2);
            MethodInfo mi = l.GetType().GetMethod("Add");
            mi.Invoke(l, new object[] { o2 });
        }
    }
    return o;
} 
```

可能需要对命名空间以及用于 CreateInstance 的 Activator 或 Assembly 进行一些更改。

注意：我从复数列表重命名为在末尾附加“列表”以保持一致性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:55:42.573

我可以提供的一条建议是使用 System.Convert.ChangeType(...) 方法在可能的情况下将值强制转换为目标类型，并在目标类型上查找静态 Parse(...) 方法，如果您' 从字符串值开始（如您上面的代码所示）。

# python - 使用 ctypes 将文档字符串添加到从 dll 中提取的 python 函数

> ID：14223525
> 
> 赞同：1
> 
> 时间：2013-01-08T20:34:23.090
> 
> 标签：python, dll, ctypes, docstring

我正在尝试从 Windows dll 创建一堆 python 函数，并希望将文档字符串附加到每个新函数。

我当前的代码：

```
import ctypes

lib=ctypes.WinDLL('example.dll')

VCS_OpenDevice=lib['VCS_OpenDevice']
VCS_OpenDevice.restype=ctypes.c_double 
```

当我在解释器中运行此脚本并尝试使用该函数时，我收到“无文档字符串”消息。

无法弄清楚在那里添加一些东西。任何帮助表示赞赏。

![在此处输入图像描述](../Images/0b032e3c3681a1bb761737d7172fe2ea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:41:33.337

赋值给函数指针的`__doc__`属性：`ctypes`

```
VCS_OpenDevice.__doc__ = 'My docstring' 
```

`__doc__`是 Python 对象的 docstring 属性，`ctypes`对象允许你写入这个属性。

必修的libc演示（我用的是Mac，不是Windows，但原理是一样的）：

```
>>> from ctypes import *
>>> libc = cdll.LoadLibrary("libc.dylib") 
>>> libc.time.__doc__ = 'time -- get time of day'
>>> print libc.time.__doc__
time -- get time of day 
```

IPython 似乎能够很好地解决这个问题：

```
In [4]: libc.time?
Type:       _FuncPtr
String Form:<_FuncPtr object at 0x1054b8ef0>
File:       /opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ctypes/__init__.py
Docstring:  time -- get time of day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-21T01:15:09.703

但我想使用帮助（）！！！！！！

因此，我没有赢得生活的不公平，而是创建了 help_support 模块，当导入该模块时，它将允许您在文档化的 ctypes 函数和结构上使用帮助。它还允许您记录额外的内容，例如 ctypes 函数参数的名称，它们也会显示出来。

[https://pypi.org/project/help-support/0.2/](https://pypi.org/project/help-support/0.2/)

如果您正在制作 Python 绑定，则包括 help_support.py 并导入它，以允许像我这样的可怜的鞋底使用您的 lib 更快地开发。

真正的文档是 A 中的痛苦……我对原始的 Python 控制台很满意。

在通过从 C 扩展将 doc 字符串添加到我的函数中做了明显的事情之后，在 help() 中没有看到任何结果并且在互联网上找不到任何解决方案，我只是无法忍受这种情况。所以你来了。现在您可以对从 DLL 中提取的函数使用 help()（至少在 Python 2 中）。

这是一个例子：

```
# examp_module:
import ctypes
import ctypes.util

import help_support
del help_support # If you want you can remove it now
                 # to avoid cluttering your globals() namespace.
                 # Once it is called you do not usually need it any more.

l = ctypes.CDLL(ctypes.util.find_library("c"))

# Pull the time() function from libc,
# declare and document it:
time = l.time
time.argtypes = []
#time.argnames = ["c_void"] # The function takes no arguments, but you can trick help_support 
                            # to show something in parenthesis if you want to be consistent with C
                            # If there is/are argument(s) you should put its/their name(s) in "argnames".
time.restype = ctypes.c_int
time.__doc__ = "Function that returns a system time in seconds."
-------------------------------------------
>>> # Usage:
>>> import examp_module
>>> help(examp_module)
>>> help(examp_module.time)
>>> 
```

# dynamics-crm-2011 - 非管理员用户能否为 Dynamics CRM 2011 中的现有插件注册插件步骤？

> ID：14223529
> 
> 赞同：3
> 
> 时间：2013-01-08T20:34:46.007
> 
> 标签：dynamics-crm-2011, dynamics-crm

在 Dynamics CRM 2011 本地安装中，我想通过 SDK 编写一些代码，为已通过托管解决方案安装的插件注册插件步骤（sdkmessageprocessingstep 实体）。但是，插件*不是*以隔离/沙盒模式安装的。

我知道除非您是部署经理，否则您无法注册非沙盒插件，并且除非您是系统管理员角色，否则您无法注册沙盒插件。但是，该插件已经注册——我只想注册步骤。

**有没有一种方法可以针对现有的非沙盒插件注册步骤，而无需用户处于部署经理或系统管理员角色？**

注意：我为 CRM 安全角色中的以下实体授予用户创建、更新等权限，但这没有帮助：

*   插件组装
*   插件组装
*   插件类型
*   项目清单
*   SDK消息
*   SDK消息处理步骤
*   SDK消息处理步骤图
*   SDK消息处理步骤安全配置
*   服务端点

我还尝试将用户添加到 System Customizer 角色，但无济于事。

目标是不必将用户添加为系统管理员，但仍允许他们（通过 SDK 调用）注册插件步骤。

**澄清：** 在 CRM 服务器上，我有一个包含插件的托管解决方案。此插件**未**设置为使用沙盒/隔离模式。托管解决方案不包括插件的任何注册步骤。

在另一台（桌面）机器上，我编写了一个 Windows 应用程序，它使用 CRM SDK 创建 sdkmessageprocessingstep 实体，以便配置插件何时运行。将此视为 SDK 附带的插件注册工具的替代实现，除了它不**注册**插件本身，而只是创建与已安装的插件相关联的插件处理步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T03:08:40.543

在多次尝试解决这个问题并联系一些 Dynamics CRM MVP 之后，我找不到方法，所以我认为这个答案是“不，你必须是管理员用户”。

但是，我确实找到了一种适合我的方法：我创建了一个自定义实体来存储有关应该注册原始插件的实体和步骤的信息，然后创建第二个插件，在创建、更新或删除自定义实体记录。然后，我为安装用户提供了一种机制来注册新插件以作为部署管理员用户运行。因此，作为部署管理员用户运行的第二个插件可以为第一个插件注册插件步骤和图像（以便第一个插件可以在较低优先级的用户下运行）。

# php - 从数组中过滤字符串值以仅格式化数字

> ID：14223531
> 
> 赞同：0
> 
> 时间：2013-01-08T20:35:03.027
> 
> 标签：php, arrays, number-formatting

问题是，我有一个从这个查询中得到的数组：

```
$secimKrm   =   ("SELECT * FROM kurumlar
INNER JOIN veri_2012_09
ON kurumlar.krmKod  =  veri_2012_09.krmKod
WHERE kurumlar.krmKod = '$krmKod'");
$sonucKrm   =   $mysqliKrm->query($secimKrm);
$row    =   $sonucKrm->fetch_assoc(); 
```

“kurumlar”由字符串组成，“veri_2012_09”由大整数组成。“veri_2012_09”中有近 35 列，我不想一一格式化数字。

当我尝试格式化数组“$row”中的数字时，我使用这个：

```
foreach ($row as $key => $val) {
$row[$key] = number_format($val, 0, ',', '.');
} 
```

它可以工作，但会导致错误，（*警告：number_format() 期望参数 1 为双精度，字符串在...中给出*），因为我的数组中有字符串。如何在格式化数字之前排除字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:36:56.313

执行[`is_numeric`](http://nz1.php.net/is_numeric)如下检查：

```
foreach ($row as $key => $val) {
    if (is_numeric($val)) {
        $row[$key] = number_format($val, 0, ',', '.');
    }
} 
```

所以你的问题不应该是“我怎样才能排除字符串”，而是“我怎样才能只包含字符串”

# zend-framework - Zend Framework 中 ->partial() 方法的实现在哪里？

> ID：14223533
> 
> 赞同：0
> 
> 时间：2013-01-08T20:35:12.527
> 
> 标签：zend-framework, partial-views, zend-view

我试图找到 Zend 实现 partial() 方法的地方，以便我可以在其中添加一些 ACL 代码以进行权限控制。我知道该方法的调用对象始终是 Zend_View 对象，并且我查看了，但是其中似乎缺少部分方法（以及它继承/实现的所有类/接口）。

有人知道 Zend_View 如何获得该方法吗？

对于那些有优化意识并渴望告诉我应该改用 render() 的人来说，所讨论的部分需要可变输入，因为它们扮演的角色与表格行部分所扮演的角色相同。除非你能告诉我如何使用 render() 方法来做到这一点，否则请留在主题上。

另外，我不打算直接修改 Zend Framework 代码，我只是想重写实现，但我也想查看我正在重写的方法，以便我可以看到我正在使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:07:34.043

### 如何编写自己的助手并覆盖默认助手

由于我们谈论的是视图助手，它的代码可以在`library\Zend\View\Helper\Partial.php`. 如果你想改变局部视图助手的作用，编写你自己的助手：

```
class MyProject_View_Helper_MyHelper extends Zend_View_Helper_Abstract {} 
```

或者

```
class MyProject_View_Helper_MyHelper implements Zend_View_Helper_Interface {} 
```

然后通过将路径添加到您的配置中，将此帮助程序添加到帮助程序堆栈。

```
resources.view.helperPath.MyProject_View_Helper_ = "MyProject/View/Helper/" 
```

如果你调用你的助手`Partial`，你可以完全覆盖默认的部分助手。

另请参阅[Akrabat 的有关视图助手的博客](http://akrabat.com/zend-framework/zend-framework-view-helpers/)。

而且，用你的话来说...

### ... Zend_View 如何获取部分方法

如果注册了帮助程序，则可以从视图中调用它，因为以下代码`Zend_View_Abstract`

```
/**
 * Accesses a helper object from within a script.
 *
 * If the helper class has a 'view' property, sets it with the current view
 * object.
 *
 * @param string $name The helper name.
 * @param array $args The parameters for the helper.
 * @return string The result of the helper output.
 */
public function __call($name, $args)
{
    // is the helper already loaded?
    $helper = $this->getHelper($name);

    // call the helper method
    return call_user_func_array(
        array($helper, $name),
        $args
    );
} 
```

# fortran - fortran 错误地调用子例程

> ID：14223534
> 
> 赞同：2
> 
> 时间：2013-01-08T20:35:14.447
> 
> 标签：fortran, profiling, linear-algebra, fortran90

我有一些用于有限元计算的 Fortran 90 代码。最近，我一直在尝试改进它解决块线性系统的方式。之前，我有一个`amux`用于稀疏矩阵向量乘法的子程序和另一个`cg`使用`amux`. 我写了一个新的矩阵向量子程序`block_amux`和一个新的求解器`block_cg`。无论如何，新方法应该运行得更快，但它的运行速度却慢了 10 倍。

为了追查问题，我使用分析器 gprof 来查看发生了什么。我发现我 92.5% 的代码都花在了运行`cg`子程序上——尽管我从未调用过它，并且完全依赖于 block_amux 和 block_cg。为了进一步搅浑水，我在实际的`cg`例程中添加了一个打印语句，说“Hello world”；它从未被打印出来。最后，我注意到 gprof 没有列出`amux`子例程的用途，即使真正调用 cg 会完成数百次普通的矩阵乘法。

我对这可能是什么感到困惑。有什么想法吗？如果这也有帮助，我可以附加 gprof 输出。

更新：我进行了以下更改，结果以某种方式或其他方式相同：

1.  更改子例程的名称，例如`cg`变为`conjugate_gradient`. Gprof 然后报告说我在新的 conjugate_gradient 例程中浪费时间。
2.  将我实际使用的子例程移动到“包含”语句下的主程序中，而不是`linalg_mod`它们最初所在的模块，然后停止使用包含 CG 例程的模块。相反，该程序将时间浪费在称为“frame_dummy”的东西上。这看起来与[这篇文章](https://stackoverflow.com/questions/11444847/what-does-frame-dummy-mean-in-the-context-of-profiling)非常相似，但我不能
3.  将我使用的子例程从`linalg_mod`包含 CG 例程的 移动到`linalg_mod_decoy`不包含它的新模块。gprof 没有在 CG 算法中浪费时间，而是说该程序正在调用一个子程序，我用它来生成线性系统的右侧约 3000 次而不是一次。
4.  在另一台计算机上尝试。没有不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-20T02:43:09.610

引用问题作者[korrok 的评论：](https://stackoverflow.com/questions/14223534/fortran-erroneously-calls-a-subroutine#comment51438230_14223534)

> OpenMP 是罪魁祸首。我想如果我将线程数设置为 1，我将得到与完全没有 OMP 的分析相同的结果。当我停止使用 OpenMP 进行编译时，它的性能仍然很差，但正确地报告了所有工作的完成位置。

# c# - 自定义序列化为空格分隔的字符串，只有值，没有键

> ID：14223535
> 
> 赞同：1
> 
> 时间：2013-01-08T20:35:21.603
> 
> 标签：c#, serialization

我正在为 MSN Messenger 协议编写客户端，并且我有代表发送到服务器和从服务器发送的命令的类

这些例子被简化了

```
class AddUserCommand {
    public int TransactionId { get; set; }
    public string EmailAddress { get; set; }
}

class SendMessageCommand {
    public int TransactionId { get; set; }
    public string Recipient { get; set; }
    public string DeliveryMethod { get; set; }
    public int MessageLength { get; set; }
    public string Message { get; set; }
} 
```

是否可以使用 .NET 框架中已有的类将这些命令序列化为非常简单的以空格分隔的字符串，以便通过套接字发送？

例如..

```
 AddUserCommand becomes
 ADD 3 bob@bob.com

 SendMessageCommand becomes
 MSG 2 bob@bob.com OFFLINE 28
 Hello bob how are you doing? 
```

问题是我见过/使用的所有序列化类都使用键值对，因为我希望字符串中参数的位置暗示键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:45:59.993

不，您必须自己编写或使用已经使用此协议的库。

您将需要编写将这些对象转换为字符串和从字符串转换的代码。您不会使用内置接口。为什么？因为没有什么可以帮助你。您可能会使用一个接口，但它很可能是您自己编写的。显然，如果您愿意，您可以选择使用各种实用程序类`TextWriter`，但这些只是数据流，而不是序列化。问题是您正试图遵守由外部应用程序定义的非标准化格式。为什么 .NET 框架与 MSN Messenger 有任何关系？

可能有您可以使用的通用序列化库，但 IMO 您最好自己编写，因为这些库将导致比自己编写更复杂的代码。它们中的大多数将基于键值对，因此不太适合。此外，这不是用您自己的代码解决的难题。

# php - wkhtmltopdf windows错误

> ID：14223540
> 
> 赞同：3
> 
> 时间：2013-01-08T20:35:41.753
> 
> 标签：php, windows, pdf, exec, wkhtmltopdf

我`wkhtmltopdf`在 Windows 下遇到问题。`safe_mode`已关闭，文件夹的权限正常。这是一个例子：

```
exec('wkhtmltopdf.exe --margin-left 0mm --margin-right 0mm --margin-top 0mm --margin-bottom 0mm --page-size A4 --zoom 2.1 text.html test.pdf'); 
```

第一次生成 PDF，但要让它再次工作，我必须重新启动 apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T12:05:06.673

完成第一次运行后，使用任务管理器查看 wkhtmltopdf 是否仍在运行。如果它正在运行，请关闭它并尝试生成 PDF

向您发布 apache 错误日志

# push-notification - 来自不同应用的推送通知：/

> ID：14223542
> 
> 赞同：0
> 
> 时间：2013-01-08T20:36:00.387
> 
> 标签：push-notification, push

我的应用程序正在接收另一个应用程序的推送通知。我想那是因为我的错。我不小心用其他人的 bundleID 构建了一个应用程序。所以，我的问题是如何从另一个的推送通知列表中删除我的新应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:04:17.993

最有可能的是您已经使用相同的分发配置文件签署了您的两个应用程序。当应用程序注册推送通知时，它会使用设备令牌发送该配置文件信息。

# jsp - 如何使用 struts2 标签制作参数化 url（例如，设置为表单操作 url）

> ID：14223544
> 
> 赞同：0
> 
> 时间：2013-01-08T20:36:04.587
> 
> 标签：jsp, struts2, struts

我的jsp头文件是：

```
<%@ taglib uri="/struts-tags" prefix="s"%>
<%
    String path = request.getContextPath();
    String basePath = request.getScheme() + "://"
            + request.getServerName() + ":" + request.getServerPort()
            + path + "/";
%> 
```

我想基于`basePath`. 我尝试了不同的标签，但没有奏效！`<%=basePath%>`不工作；可能是因为 struts2 标签首先呈现。无论我做什么尝试和错误`#, %, {`或属性标签，我都无法让它工作！例如`<s:form name="searchItem" action="%{basePath + '/AdvancedSearch.action'}">`是不成功的努力之一！

我只是可以让它与一个肮脏的黑客一起工作：

```
<s:set var="searchUrl"><%=basePath%>AdvancedSearch.action</s:set>
<form name="searchForm" method="get" class="searchform" action="%{searchUrl}"> 
```

但我希望有更好的技巧让我消除`<s:set>`标语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:20:15.500

正如@Quaternion 所说：

> struts2 将为表单构造 url，只需相应地设置命名空间和操作属性。如果您一般需要构造 url，您可以使用 s:url 标签，添加参数使用 s:param 标签。

s:url 标签已在[此处](http://struts.apache.org/2.1.6/docs/url.html)进行了解释，并且有很多在线示例。此外，如果您对表单使用 get 方法，则可以使用 s:hidden 标签。

# php - 如何使用 Jquery 正确解析数据库中的结果数组？

> ID：14223549
> 
> 赞同：3
> 
> 时间：2013-01-08T20:36:26.077
> 
> 标签：php, javascript, jquery

我有从数据库中获取数据的 codeigniter 应用程序，这些数据由 Jquery 操作。数据库中的结果数组曾经看起来像这样：

```
 { "result":[
    {"name":"John","surname":"Smith"}] } 
```

我使用下面的代码来解析它：

```
$.get("index.php/getResult",{f_name: $('#fn').val()} ,function(data) {
    var list= "";
    $.each(data, function(index, element) {
        if (index > 0) {list;}
        list+= element.name;
    });
    $('#myid').html(list);
},"json"); 
```

我的结果数组已更改为以下格式，我现在如何解析它？任何帮助表示赞赏。

```
{
"count": 8,
"result":[
{"name":"John","surname":"Smith"}] } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:42:50.983

你不需要解析任何东西：

```
$.get("index.php/getResult",{f_name: $('#fn').val()} ,function(data) 
{
    alert(data.count);

    for(var i=0; i< data.result.length; i++)
    {
        alert(data.result[i].name + " " + data.result[i].surname);
        // etc.
    }
    // etc.

},"json"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:59:33.923

当您使用 json （这意味着**J** ava **S** cript- **O** bject- **Notation**）时，您可以像使用任何其他 JavaScript 对象一样使用此对象。因此，您可以访问`result[0].name`例如。对于调试，我建议使用**Firebug** Add-On for Firefox 或**Chrome Webdevelopertool**。在这两者中，您都可以编写`console.log(data)`或`console.log(result[0].name)`例如并在控制台选项卡中查看您的对象。

# c++ - 如何确定网络连接正在使用哪个端口？

> ID：14223552
> 
> 赞同：0
> 
> 时间：2013-01-08T20:36:33.640
> 
> 标签：c++, winapi, networking

如何查询 Windows 以确定每个连接在 C++ 中使用的端口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:19:41.017

您是否尝试过获取 TCP 表？

您可以向 windows 索要所有 TCP 连接的表，其中显示了本地地址、本地端口、远程地址、远程端口以及具有该连接的程序的进程 ID。

获取表格： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb408406 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb408406(v=vs.85).aspx)

表条目： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb485761 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb485761(v=vs.85).aspx)

我不会尝试做一个例子，因为第一个链接有一个很好的例子。如果您需要两种类型的连接，则 UDP 也有等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:19:34.073

您可以使用[getsockname() API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738543%28v=vs.85%29.aspx)查询套接字绑定的端口，然后检查sockaddr_in 结构的sin_port 字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:39:47.293

`netstat -b -a`您可以在 Windows 上使用该命令。如果必须，这可以称为`SHELL`调用。

# javascript - 带有 url 的正则表达式 javascript/jquery

> ID：14223568
> 
> 赞同：0
> 
> 时间：2013-01-08T20:37:13.190
> 
> 标签：javascript, jquery, regex

我有这个代码：

```
if(/^\/[^/]+\/[^/]+\/collections/.test(location.pathname)) { alert("ok")}; 
```

这场比赛与：

```
http://localhost:3000/es/hyperrjas/collections 
```

问题是也匹配：

```
http://localhost:3000/es/hyperrjas/collections/thing1
http://localhost:3000/es/hyperrjas/collections/thing2
http://localhost:3000/es/hyperrjas/collections/thing3
.
.
. 
```

我只需要匹配第一种类型的 url：

```
http://localhost:3000/es/hyperrjas/collections
http://localhost:3000/es/michael-25/collections
http://localhost:3000/es/other_username/collections 
```

**我不想将 url 与 thing1、thing2、thing3....等匹配**

**如何修复这个正则表达式 javascript？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:39:03.887

将分隔符添加`$`到正则表达式的末尾

* * *

您的**新**表达式将如下所示：

```
/^\/[^/]+\/[^/]+\/collections$/ 
```

# javascript - tinyMCE 不会删除下划线格式

> ID：14223569
> 
> 赞同：0
> 
> 时间：2013-01-08T20:37:15.290
> 
> 标签：javascript, formatting, tinymce

在我们的应用程序中，我们有一个 tinyMCE 文本编辑器，它可以插入下划线标签。最近，该应用程序遇到了一个错误，我们可以选择文本，加下划线并保存它。但是，单击返回同一文本字段并尝试删除下划线（通过选择带下划线的文本并再次单击下划线）不会删除格式。此外，当 tinyMCE 字段被初始化时，看起来它正在将我们的标签转换为此处的字段内容。任何想法在这里发生的事情，至少我们希望至少能够删除格式。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:34:54.177

昨晚深夜找到了答案。我需要在 tinyMCE 初始化的配置对象中使用 inline_styles: true 。

# jquery - 如何获取嵌套在文本区域中的跨度位置

> ID：14223574
> 
> 赞同：0
> 
> 时间：2013-01-08T20:37:35.330
> 
> 标签：jquery

我有一个嵌套在 textarea 中的跨度，并且想要获取此跨度相对于文档的偏移量。left 和 top 总是返回零，我不知道为什么。

这是一个带有以下代码的[jsFiddle来演示](http://jsfiddle.net/c2J36/)

```
$(document).ready(function(){
  $("#textarea1").html("1234 <span id='span1' style='color:red'>5678</span>");
  var offset = $("#span1").offset();
  alert("span1 left: " + offset.left + "  top: " + offset.top);
}); 
```

我明白为什么跨度的位置相对于文本区域为零。但我不明白为什么偏移量返回零。如果有人可以在这里帮助我，我将不胜感激。

* * *

编辑：我的目标是在单击时将某些内容定位在跨度之上。我无法获得上面提到的跨度的偏移量，所以我决定改用鼠标坐标。

```
$("#id").dblclick(function(e){
 alert("X: " + e.pageX + " Y: " + e.pageY);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:39:54.280

DOM 没有意识到这一点，`span`因为它只是包含在`value`textarea 的属性中。

为了计算页面上的 x,y 坐标，您需要跟随文本区域中的字符/行并计算放置光标的大致位置。这不是一项简单的任务，主要是因为计算自由流动文本的换行符（尤其是没有等宽字体的情况下具有挑战性）。

# actionscript-3 - addChild()：如何知道 DisplayObject 何时实际显示在舞台上？

> ID：14223576
> 
> 赞同：5
> 
> 时间：2013-01-08T20:37:42.600
> 
> 标签：actionscript-3, flash, addchild, displayobject

我已经将一个大 (4096x4096) 图像加载到内存中，但是当我尝试使用 addChild 时，在它实际被绘制到屏幕之前有很长的延迟。这是意料之中的。但是，是否有一个事件可以让我知道 DisplayObject（一个 .png 图像）实际被绘制到屏幕上的那一刻？

我正在尝试将图像加载到屏幕上，然后在它们实际绘制后做一些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:17:10.073

延迟是由于 Flash Player 解压缩图像以准备渲染。

诀窍是在您需要之前强制 Flash Player 解压缩 - 然后它会“立即”出现在舞台上。

我不能把任何想法归功于我 - 但我会接受赏金;）。这是启发我并充分解释它的文章：http: [//jacksondunstan.com/articles/2080](http://jacksondunstan.com/articles/2080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:32:35.423

如果您使用的是 Loader 类，那是因为内容尚未加载。

在你的代码中的某个地方你可能有这样的东西：

```
var loader : Loader = new Loader();
loader.load( new URLRequest( "theURL" ) );
stage.addChild( loader ); 
```

现在，这一切都发生在几毫秒内。您正在加载的内容实际上尚未加载。加载器在舞台上，但内容在加载完成之前不会放置在加载器中。

这是你需要做的。

```
var loader : Loader = new Loader();
loader.contentLoaderInfo.addEventListener( Event.COMPLETE, onImageLoaded, false, 0, true );
loader.load( new URLRequest( "theURL" ) );
stage.addChild( loader ); 
```

然后在同一范围内拥有此功能。

```
function onImageLoaded( evt : Event ) : void
{
    loader.contentLoaderInfo.removeEventListener( Event.COMPLETE, onImageLoaded );
} 
```

在该函数中，可以访问图像及其所有属性。它可能实际上还没有被绘制到屏幕上，但这将在下一帧发生，可能在几毫秒内，但就代码而言，它已经在舞台上。

希望有帮助！

# javascript - 你如何改变javascript中嵌套css元素的颜色？

> ID：14223577
> 
> 赞同：0
> 
> 时间：2013-01-08T20:37:49.847
> 
> 标签：javascript, css

```
<a id='123' href='www.stackoverflow.com'>
Hello <span style='color:#c0c0c0;text-decoration: underline;'>World</span>
</a> ​ 
```

我目前通过这样做来更改链接颜色

```
var chosenclass = document.getElementById('123');
chosenclass.style.color = '#000000'; 
```

但现在我想通过仅引用 selectedclass 对象来更改跨度。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:39:29.927

```
chosenclass.children[0].style.color = '#000'; 
```

# bash - 循环内循环？

> ID：14223580
> 
> 赞同：0
> 
> 时间：2013-01-08T20:38:05.873
> 
> 标签：bash, for-loop, while-loop

尝试跨两个文件读取四个不同的列并适当地分配它。任何人都可以帮忙吗？

languagefile.txt 读取：语言 isocode

english.txt 读取：字段值

我希望它遍历两个文件并关联 isocode & filename & field & value。

我有一个执行english.txt 文件的while 循环：

```
cat english.txt| while read FIELD VALUE; do
GET https://googleapis.com/language/translate/v2?key=$mykey&q=$VALUE&source=en&target=es
echo "$FIELD "$VALUE"; done 
```

但是我也需要扩展它来解释语言文件。所以它会喜欢：

```
cat english.txt| while read FIELD VALUE; do
GET https://googleapis.com/language/translate/v2?key=$mykey&q=$VALUE&source=en&target=$isocode
echo "$ISO $FIELD "$VALUE" >> $Language.txt; done 
```

我希望这是有道理的。我最终只需要让它为每种语言和iso代码都做。不确定最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:01:55.387

如果我正确理解您，最简单的解决方案可能会使用`paste`：

```
while read -r iso field value; do
    # do something with $iso $field and $value
done < <(paste languagefile.txt english.txt) 
```

请注意，如果任何输入数据字段可以包含空格，事情会变得更加棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:01:33.770

对不起，让我换个说法，是的 GET 是一个命令。

File1 包含：语言 iso

File2 包含：字段值

我最终希望最终结果为：language.txt: iso field value

其中language.txt 来自file1，字段一。

所以它需要像这样：对于每次读取 $language，使用 $field $value $iso（对应于 $language 中的行）执行 GET 请求，然后以 $iso $ 格式将结果输入 $language.txt字段$值

# ios - 似乎#import 头文件被交叉错误

> ID：14223584
> 
> 赞同：0
> 
> 时间：2013-01-08T20:38:14.407
> 
> 标签：ios

我不确定发生了什么，但我什么都没碰，突然.m 文件上的#import .h 文件正在识别尚未导入的对象：例如 Car*carsample... 即使我没有导入 Car.h 也会被识别

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:00:04.493

我的项目目录（包含您的应用程序文件夹的文件夹）中有重复的 Car.h 文件，所以我删除了旧的文件，之后它运行良好。

# c++ - 字符数组中的奇怪字符

> ID：14223591
> 
> 赞同：0
> 
> 时间：2013-01-08T20:38:41.880
> 
> 标签：c++, arrays, char

我有以下功能：

```
char * strAlloc(string str) {
    char * chArr = new char[str.size()];

    for (size_t i = 0; i < str.size(); i++) {
        chArr[i] = str[i];
    }

    return chArr;
} 
```

如果我`char * chArr = new char[str.size()];`在调试器说以下内容后休息一下：

```
chArr   0x00c38cf8 "ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍýýýý««««««««þîþîþ" 
```

如果我在 for 迭代后休息一下，我会得到：

```
chArr   0x00c38cf8 "***************ýýýý««««««««þîþîþ" 
```

所以我做错了什么？

编辑：

```
size_t const gSize = 15; typedef char * 
TMaze [gSize]; 
Maze[0] = strAlloc ("***************"); 
```

在类型 TMaze 我需要 char 数组的指针也试过 str.size()+1 ，同样的行为

编辑2：

```
char * strAlloc(string const & str) {
    char * chArr = new char[str.size()+1];

    strcpy(chArr, str.c_str());

    return chArr;
} 
```

做到了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:40:44.857

你不是空终止。为什么不直接使用`strcpy(chArr, str.c_str());`？

您还需要在分配中添加一个：`char* chArr = new char[str.size() + 1];`

# java - java.util.scanner 解释

> ID：14223592
> 
> 赞同：0
> 
> 时间：2013-01-08T20:38:45.157
> 
> 标签：java, java.util.scanner

亲爱的神秘黑客和传奇程序员，

我已经知道扫描仪用于识别用户输入很像虚拟 java 手册的 io 部分中的 java bufferedreader。问题是如何以最简单的方式应用扫描仪，即从设置按钮开始，例如 {A} 或说 {1}？我如何应用扫描仪让java实现这些按钮被按下，如果是，那么打印设置的条件？

逻辑：扫描仪应用程序？？...（我需要帮助）

如果A，那么`System.out.println("Hi, my name is A!!")`

如果为 1，那么`System.out.println("Hi, my name is 1!!")`

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T20:12:19.317

就我（有些有限的）知识而言，读取 System.in 的扫描仪在按下回车键之前不会传递任何数据（因为在那之前，它没有数据*可以*传递），所以它不会响应单独按下按钮。如果你按下回车它会响应，所以使用类似的东西：

```
Scanner yourScanner = new Scanner(System.in);
//Creates a scanner that reads from the terminal.
System.out.println("What is my name? "); 
//Whatever you want the user to be asked, let them know what to input.
String theirResponse = scan.next(); 
//Or .nextLine() if the input contains a space in the middle
System.out.println("Hi, my name is " + theirResponse + "!!");
//Prints out and uses their response. 
```

不幸的是，`Scanner`这不是一个很好的聆听键的方法。

# c# - SQL 数据表更新？

> ID：14223593
> 
> 赞同：1
> 
> 时间：2013-01-08T20:38:56.180
> 
> 标签：c#, winforms, sql-server-2008-r2

我不确定，但我想我可能在这里走错了路。我正在尝试更新我的 SQL Server 上的客户表。我连接了一个 SQLDatareader，然后将其加载到我的数据表中。我已经完成了我想要的所有更改，但现在我不知道如何恢复这些更改。我认为“myDataTable.AcceptChanges();” 会触发这种情况发生，但事实并非如此。

```
SqlConnection myConnection = new SqlConnection();
                SqlCommand myCommand;
                DataTable myDataTable;
                SqlDataReader myReader;

                myCommand = new SqlCommand();
                myCommand.CommandText = " SELECT * FROM customer";
                myCommand.CommandType = CommandType.Text;
                myCommand.Connection = myConnection;
                myCommand.Connection.Open();

                myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection);

                myDataTable = new DataTable();
                myDataTable.Load(myReader);

                // Make Data changes here

                myDataTable.AcceptChanges();
                MyDataTable.Dispose();
                MyCommand.Dispose();
                MyConnection.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:43:13.000

您可以使用 TableAdapter 将更改提交回数据库。查看此链接了解详情。

[TableAdapter.Update()](http://msdn.microsoft.com/en-us/library/ms171933%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:00:54.247

在这种情况下，您需要使用具有 Update 属性的 DataAdapter，该属性接受您的更新查询命令。

即使您可以使用 Command Builder，然后从 CommandBuilder 中获取 UpdateCommand。

***来自 MSDN 的示例代码***

```
SqlDataAdapter catDA = new SqlDataAdapter("SELECT CategoryID, CategoryName FROM Categories", nwindConn);       

catDA.UpdateCommand = new SqlCommand("UPDATE Categories SET CategoryName = @CategoryName " +
                                     "WHERE CategoryID = @CategoryID" , nwindConn);

catDA.UpdateCommand.Parameters.Add("@CategoryName", SqlDbType.NVarChar, 15, "CategoryName");

SqlParameter workParm = catDA.UpdateCommand.Parameters.Add("@CategoryID", SqlDbType.Int);
workParm.SourceColumn = "CategoryID";
workParm.SourceVersion = DataRowVersion.Original;

DataSet catDS = new DataSet();
catDA.Fill(catDS, "Categories");   

DataRow cRow = catDS.Tables["Categories"].Rows[0];
cRow["CategoryName"] = "New Category";

catDA.Update(catDS); 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/33y2221y%28v=vs.71%29.aspx)

# click - 当我到达页面底部时自动点击一个 div

> ID：14223602
> 
> 赞同：0
> 
> 时间：2013-01-08T20:39:29.180
> 
> 标签：click

当我到达页面底部时，我想自动单击一个 div。我怎样才能做到这一点？我得到了这段代码，但是当我到达页面底部时，我无法让它工作。

```
$(document).ready(function(){ 
```

$('#some-id').trigger('click'); });

任何帮助如何做到这一点？当我到达页面底部时，自动点击一个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:43:05.053

我想知道为什么你想自动点击一个 div 而不是启动一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:16:52.600

您可以检测用户是否位于页面底部并启动 jquery 函数（与 div 相同）以加载新内容。

```
$(document).ready(function() {
  $(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() == $(document).height()) {
        alert("bottom!");
    }
  });
}); 
```

[例子](https://tinker.io/4dc1a/1)

# haskell - 模板 Haskell 阶段限制的问题

> ID：14223610
> 
> 赞同：3
> 
> 时间：2013-01-08T20:40:11.330
> 
> 标签：haskell, template-haskell

我刚开始学习 Template Haskell，并坚持简单的拼接问题。
在一个模块中，我实现`tupleN`了回复元组的第 N 个元素的函数：

```
tupleN :: Lift a => a -> Int -> Q Exp
tupleN a n = do
   (TupE as) <- lift a
   return $ as !! n 
```

在主模块中，我有：

```
main :: IO ()
main = do
   let tup = (1::Int,'a',"hello")
   putStrLn $ show $(tupleN $tup 1) 
```

这似乎有效，但它不会。编译器打印错误：

```
GHC stage restriction: `tup'
  is used in a top-level splice or annotation,
  and must be imported, not defined locally
In the expression: tup
In the first argument of `tupleN', namely `$tup'
In the expression: tupleN ($tup) 1 
```

如果我将元组描述直接放入拼接表达式中，代码就会起作用：

```
main :: IO ()
main = do
   putStrLn $ show $(tupleN (1::Int,'a',"hello") 1) 
```

我在第一个变体中缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T22:55:57.430

你试过`tup`用作拼接，但`tup`只是一个普通的值。您不想在它前面加上`$`.

此外，正如编译错误所说，由于 Template Haskell 在编译过程中运行，GHC 在完成当前模块编译之前确实需要知道它在做什么。这意味着您的拼接表达式不能依赖于`tup`，因为它仍在编译中。在拼接内部，您只能使用文字、导入的值以及特殊的`'name`和`''TypeName`形式（我想您可以将其视为一种文字）。你可以通过使用 eg 从这个编译中获得一些信息`reify`，但即使这样也只能给你在编译时可用的数据——如果你想要一个函数，你可以将用户输入或从用户输入构造的数据传递给，那就是只是不可能。

简而言之，您无法使用 Template Haskell 完成您想做的事情。但是，您可以定义一个扩展为函数的拼接，以获取size 元组的`i`^(第 th 个)`sz`元素：

```
import Control.Monad (unless)
import Language.Haskell.TH

tupleN :: Int -> Int -> Q Exp
tupleN sz i = do
  unless (i < sz) . reportError $ "tupleN: index " ++ show i
    ++ " out of bounds for " ++ show sz ++ "-tuple"
  lamE
    [tupP (replicate i wildP
      ++ [varP (mkName "x")]
      ++ replicate (sz - i - 1) wildP)]
    (varE (mkName "x")) 
```

# amazon-ec2 - Amazon EC2 实例网络问题

> ID：14223612
> 
> 赞同：0
> 
> 时间：2013-01-08T20:40:19.693
> 
> 标签：amazon-ec2

我们在 EC2 上的系统实例很少。其中一些是应用程序服务器，一些是 Memcached、数据库等。在创建实例几周后，它开始根据网络引发大量错误：“MEMCACHED TIMEOUT ERROR”、“RABBITMQ 连接错误”等错误. 错误仅发生在单个实例中。创建此实例的副本后 - 错误消失。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:44:55.177

我以前经历过这种情况。我认为这与主机的网络堆栈问题有关，至少这是我可以从 aws 获得的尽可能多的信息。

如果您使用的是 EBS 支持的实例。只需停止然后重新启动实例即可解决问题。在这种情况下，实例会被分配给一个新主机。

# php - iPhone base64 在发布到 php 脚本时损坏

> ID：14223616
> 
> 赞同：1
> 
> 时间：2013-01-08T20:40:27.913
> 
> 标签：php, iphone, ios, uiimageview, base64

在我的应用程序中，用户裁剪那里的图片我将其编码为 base64 字符串并将其发送到我的 php 脚本。我正在使用 NSData+base64 类但是，当应用程序再次检索字符串以转换回图片时，我得到了这个错误：

```
Jan  8 14:21:33 Vessel.local Topic[11039] <Error>: ImageIO: JPEG Corrupt JPEG data:214        extraneous bytes before marker 0x68  Jan  8 14:21:33 Vessel.local Topic[11039] <Error>: ImageIO: JPEG Unsupported marker type 0x68 
```

这是我发送数据的代码：

```
 NSString *urlString = [NSString stringWithFormat:@"http://myurl.php"];
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url                cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
[request setHTTPMethod:@"POST"];
NSString *param = [NSString stringWithFormat:@"username=%@&password=%@&email=%@&quote=%@&pic=%@",user,password,email,quote,pic];
[request setHTTPBody:[param dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request  delegate:self startImmediately:YES]; 
```

这是我在另一个视图控制器中取回它并尝试将其转换回图像时

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{

homeData = [NSJSONSerialization JSONObjectWithData:responseData options:nil error:nil];

NSString *decodeString = [[homeData objectAtIndex:0]objectForKey:@"profile_pic" ];
decodeString = [decodeString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
int returnNUM = [decodeString length];
NSLog(@"RETURN STRING=%d",returnNUM);
NSData *data = [[NSData alloc] initWithData:[NSData dataFromBase64String:decodeString]];

profilepic = [[UIImageView alloc]initWithFrame:CGRectMake(5, 4, 120, 120)];
profilepic.image = [UIImage imageWithData:data];
UIGraphicsBeginImageContextWithOptions(profilepic.bounds.size, NO, 1.0);
[[UIBezierPath bezierPathWithRoundedRect:profilepic.bounds cornerRadius:80.0] addClip];
[pic drawInRect:profilepic.bounds];
profilepic.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.view addSubview:profilepic];
 } 
```

一旦我发布它，我怎样才能防止图像被损坏..或者一旦我把它找回来，我该如何清理它或防止发生损坏！这让我发疯了。非常感谢您提供一些代码的明确答案。谢谢

这是我在发送之前将图像转换为 base64 的代码。

```
 NSData *imageData = UIImageJPEGRepresentation(crop, 1.0);
    NSString *baseString = [imageData base64EncodedString];
    int original =[baseString length];
    NSLog(@"orignal String=%d",original);
    [self register:username.text withPass:password.text withEmail:email.text withQuote:quote.text withPic:baseString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:03:44.863

你为什么要打“stringByTrimmingCharactersInSet”电话？在我看来，这似乎删除了编码图像可能需要的字符......

*编辑以包含我正在使用的一些代码中的示例，该代码将几个图像正确嵌入到要提交到 php 页面的 http 表单中。*

我在 NSMutableData 上使用以下类别...

以下内容进入 NSMutableData+HTTP.h

```
@interface NSMutableData (HTTP)

-(void)appendFileAtPath:(NSString*)fullFilePath withFormKey:(NSString*)formKey withSuggestedFileName:(NSString*)suggestedFileName boundary:(NSData*)boundary;
-(void)appendKey:(NSString*)key value:(NSString*)value boundary:(NSData*)boundary;

@end 
```

以下内容进入 NSMutableData+HTTP.m

```
#import "NSMutableData+HTTP.h"

@implementation NSMutableData (HTTP)

//use for attaching a file to the http data to be posted
-(void)appendFileAtPath:(NSString*)fullFilePath withFormKey:(NSString*)formKey withSuggestedFileName:(NSString*)suggestedFileName boundary:(NSData*)boundary{

    [self appendData:boundary]; 

    [self appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"%@\"\r\n", formKey, suggestedFileName] dataUsingEncoding:NSUTF8StringEncoding]];

    [self appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [self appendData:[NSData dataWithContentsOfFile:fullFilePath]];

    [self appendData:[@"Content-Encoding: gzip\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

    [self appendData:boundary]; 
}

//use for attaching a key value pair to the http data to be posted
-(void)appendKey:(NSString*)key value:(NSString*)value boundary:(NSData*)boundary{    
    [self appendData:boundary]; 
    [self appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key] dataUsingEncoding:NSUTF8StringEncoding]];
    [self appendData:[value dataUsingEncoding:NSUTF8StringEncoding]];
    [self appendData:boundary]; 
}

@end 
```

然后在创建 http 表单提交的代码中，我执行以下操作以将几个图像和键值对（通过上面的类别方法）附加到表单......（注意：我没有包含你的 NSURLConnectionDelegate 方法）如果要跟踪表单提交的进度，则需要实现。）

```
NSString *boundaryString = @"0xKhTmLbOuNdArY";
NSData *boundaryData = [[NSString stringWithFormat:@"\r\n--%@\r\n", boundaryString] dataUsingEncoding:NSUTF8StringEncoding];
NSString *phpReceiverURL = @"http://www.someurl.com/somephppage.php";

NSMutableURLRequest *theRequest = [[NSMutableURLRequest alloc] init];
[theRequest setTimeoutInterval:30];
[theRequest setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[theRequest setHTTPShouldHandleCookies:NO];
[theRequest setURL:[NSURL URLWithString:phpReceiverURL]];
[theRequest setHTTPMethod:@"POST"]; 

[theRequest addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundaryString] forHTTPHeaderField: @"Content-Type"];
NSMutableData *body = [NSMutableData data];

//add some image files to the form
[body appendFileAtPath:[imagePath stringByAppendingPathComponent:@"cat.jpg"] 
    withFormKey:@"cat"  
    withSuggestedFileName:@"received-cat.jpg"
    boundary:boundaryData
];

[body appendFileAtPath:[imagePath stringByAppendingPathComponent:@"dog.jpg"] 
    withFormKey:@"dog"  
    withSuggestedFileName:@"received-dog.jpg"
    boundary:boundaryData
];

//add some key value pairs to the form
[body appendKey:@"testkeyone" value:@"testvalueone" boundary:boundaryData]; 
[body appendKey:@"testkeytwo" value:@"testvaluetwo" boundary:boundaryData]; 

// setting the body of the post to the reqeust
[theRequest setHTTPBody:body];

//create the connection
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

另请注意，我没有在我的应用程序之外对此进行测试，所以我可能忘记了一些东西（例如我在上面的示例中没有定义的“imagePath” - 你必须为你的图像指定一个路径），但是它应该让您很好地了解如何将一些图像附加到要提交到 php 页面的表单上。

希望这可以帮助！

# c - char *name[] 指针数组还是指向数组的指针？

> ID：14223617
> 
> 赞同：3
> 
> 时间：2013-01-08T20:40:30.213
> 
> 标签：c, arrays, pointers

像这样声明字符串时：

```
char *mypointerorarray[] = {"string1", "string2", "string3"}; 
```

这是指向多个数组的指针还是指向字符串的指针数组？

另外，我将如何从内存中删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:42:20.753

1.  这是一个指向字符的指针数组
2.  您根本不会从内存中删除它，因为没有分配动态内存。使用堆栈内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:13:28.887

`mypointerorarray`是一个由 3 个指针组成的数组。但是，该数组的元素恰好指向字符串文字的开头。每个字符串文字本身就是一个数组。

您不能“从内存中删除它”，因为您一开始没有分配它。根据`mypointerorarray`定义的位置，它将具有静态或自动存储持续时间。一旦存储期限结束，它将自动“从内存中删除”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T05:49:22.773

```
char *mypointerorarray[] = {"string1", "string2", "string3"}; 
```

上面的声明是字符指针数组。意味着在这种情况下您将获得三个字符指针，每个指针都指向相应的字符串文字。即 char *mypointerorarray[0] -> "string1"、char *mypointerorarray[1] -> "string2" 和 char *mypointerorarray[2] -> "string3"。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T22:54:28.933

它是一个指向`char`. 它将包含字符串文字、和的*地址*。 `"string1"``"string2"``"string3"`

字符串文字的内存是在程序启动时分配的，并一直保留到程序终止。

如果数组是在任何函数之外（在文件范围内）声明的，或者是在一个函数或块中用`static`关键字声明的，那么它的内存（足以容纳 3 个指针值）也将在程序启动时分配并保持到程序终止。

如果数组是在函数或块中声明的，那么从逻辑上讲，它的内存在块入口处分配并在块出口处释放；在实践中，函数中所有`auto`变量的内存在函数入口处留出，即使变量的*生命周期*没有延伸到整个函数。例如，给定代码

```
void (foo)
{
  int x;
  int y;
  ...
  for (int i = 0; i < 100; i++)
  {
    int j;
    int k;
    ...
    if (condition())
    {
      char *arr[] = {"string1", "string2", "string3"};
      ...
    ]
    ...
  }
  ...
} 
```

的生命周期`arr`仅限于内部`if`语句， 、 和 的生命周期`i`仅限`j`于`k`循环，并且仅`x`和`y`具有整个函数的生命周期。但是，我熟悉的所有实现都会在函数入口处为`x`、`y`、`i`、`j`、`k`和分配内存`arr`并保留它直到函数退出。

# javascript - IE8：表格不知道滚动

> ID：14223618
> 
> 赞同：0
> 
> 时间：2013-01-08T20:40:32.500
> 
> 标签：javascript, scroll, html-table, internet-explorer-8

又一 IE8 挂断。建议表示赞赏。

所以我有下表。一个基于用户输入的 Javascript 函数用几十个值填充 tbody。发生这种情况时，Firefox 和 Chrome 都会添加滚动条；然而，IE 并没有，并且 table simple 永远存在，甚至打破了它的 div。

如何让 IE8 识别出发生了溢出？

```
<div>
        <form>
        <table id="myTable" style="display: block; max-height: 300px;">
            <thead style="display: block; color: white; font-family: arial, helvetica, sans-serif; width: 796px; " > 
            <tr id=head> <B>
                <th style="width: 170px; text-align: center" >Location</th> 
                <th style="width: 70px; text-align: center">Year</th> 
                <th style="width: 520px; text-align: center" >Title</th>
                </B>
            </tr> 
            </thead>
            <tbody style="display: block; width: 796px; height: 280px; overflow: scroll; text-align: center;" > 
            </tbody>  
        </table>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:46:38.997

您是否尝试过为带有溢出属性的表创建一个 CSS 类？

.table {溢出：滚动；}

这应该在 IE8 中工作。

# php - TimThumb 无法在 Rackspace 上加载图像

> ID：14223619
> 
> 赞同：0
> 
> 时间：2013-01-08T20:40:35.037
> 
> 标签：php, wordpress, timthumb

所以，我们使用的是 Linux、Apache、PHP 5.4。

我正在使用 Wordpress 3.5，这是我们的问题开始的地方。我也在使用 ThemeFuse 的主题。

我不得不恢复到一个非常旧的 TimThumb 版本，因为最新版本似乎对 PHP 5.4 或 Wordpress 3.5 不满意。

有没有人有任何建议让 v2.8.10 或 v.2.8.11 在 Wordpress 3.5 下使用 PHP 5.4 工作。我让它在我们的开发网站上运行和工作，但是当我将网站移动到实时域时，它坏了，所以我的网站上有一个部分无法加载图像。

我只是想知道 Wordpress 3.5 或 PHP 5.4 是否存在已知问题。

当我转到使用 TimThumb 的页面时，我在页面上看到损坏的图像。右键单击并在新窗口中打开图像可以为我提供更多详细信息。

错误消息说 TimThumb 找不到图像，尽管当我从 ?src 参数中获取 url 并在浏览器中打开该 url 时，图像加载正常。

作为一个临时解决方案，我已经恢复到一个非常非常旧的 timthumb 版本。这不是最好的解决方案，因为我知道这个版本很容易受到攻击。因此，我需要同时制定最终解决方案。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:27:08.010

老问题，但我将在这里发布一个答案，因为我刚刚遇到了这个问题。这可能无法回答每个人的 TimThumb 问题，但它解决了我的问题。我按照[Binary Moon 的故障排除指南进行操作](http://www.binarymoon.co.uk/2010/11/timthumb-hints-tips/)，但并不快乐。设法在 Themeforest 上找到此线程；

[http://themeforest.net/forums/thread/tim-thumb-problem/32860](http://themeforest.net/forums/thread/tim-thumb-problem/32860)

Olegnax 的评论是关键。它可能是主机将设置的服务器上的安全配置（但您在支持台处理的操作员很可能不知道）。如果您在由 TimThumb 调整大小的图像上收到 500 Internal Server Error 消息，请尝试以下操作：

1.  将 timthumb.php 上的文件权限设置为 700（仅限所有者读取、写入和执行）。
2.  检查缓存目录（文件夹）权限。将其设置为 777 会给您一个 500 – 内部服务器错误。将其设置为 711。

# gmail - 使用别名订阅时如何查看谷歌群组？

> ID：14223621
> 
> 赞同：0
> 
> 时间：2013-01-08T20:40:51.870
> 
> 标签：gmail, alias, google-groups

管理员将我的邮件地址添加到私人 google 组（邮件列表）。

我正确收到了邮件，通知我订阅了该组，其中包含一个查看该组中旧帖子的链接。

但是我的地址包含一个别名（例如 : `firstname.lastname+alias@gmail`），当我点击链接时，谷歌群组告诉我我没有订阅这个群组。

我认为这一切都与别名有关，但是如何查看来自该组的旧邮件？

PS：我不想用没有别名的邮件地址要求订阅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:21:16.213

订阅 Gmail 别名 + 地址后，将无法访问群组存档。

您可以通过向 groupname+owners@googlegroups.com 发送电子邮件来向群组所有者发送电子邮件。

# java - Android：如何让我的 googleapp 在后台运行

> ID：14223623
> 
> 赞同：0
> 
> 时间：2013-01-08T20:40:59.293
> 
> 标签：java, android, google-maps

我怎样才能让这个应用程序在后台运行？我无法实现服务类，因为我已经在使用 MapActivity。我应该怎么办？

```
public class GoogleMaps extends MapActivity implements LocationListener {

    LocationManager locationManager;
    MapView map;

    long start;
    long stop;

    MyLocationOverlay myLocation;
    MapController controller;
    List<Overlay> overlayList;

    int x, y;
    GeoPoint touchedPoint;
    Drawable d;

    String towers;
    int lat;
    int longi;

    double midllat;
    double midlongi;

    NotificationManager nm;
    static final int uniqueID = 1394885;

    // Location location;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.googlemaps);
        map = (MapView) findViewById(R.id.mvGoogleMaps);
        ourLocation();
        Touchy t = new Touchy();
        overlayList = map.getOverlays();
        overlayList.add(t);
        d = getResources().getDrawable(R.drawable.round_pointer);
        controller.setZoom(18);
        Criteria crit = new Criteria();
        towers = locationManager.getBestProvider(crit, false);
        Location location = locationManager.getLastKnownLocation(towers);

        nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        nm.cancel(uniqueID);

    }

    public void ourLocation()

    {
        // Pin der blinker på lokation
        myLocation = new MyLocationOverlay(this, map);
        map.getOverlays().add(myLocation);
        myLocation.enableMyLocation();

        // Fin nuværende lokation
        locationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                20000, 0, this);

        controller = map.getController();

    } 
```

这里有更多代码，但与此案例无关。只是一个功能，让我确定一个点。

```
 @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        myLocation.disableCompass();
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        myLocation.enableCompass();
        super.onResume();
        locationManager.requestLocationUpdates(towers, 500, 1, this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onLocationChanged(Location location1) {
        // TODO Auto-generated method stub
        // Updating location and zoom
        controller.setCenter(new GeoPoint(
                (int) (location1.getLatitude() * 1000000), (int) (location1
                        .getLongitude() * 1000000)));
        controller.setZoom(18);

        // Trying to get MyPostion.
        Location myLocation = new Location("point A");
        myLocation.setLongitude(location1.getLongitude());
        myLocation.setLatitude(location1.getLatitude());
        Location locationB = new Location("point B");
        locationB.setLatitude(midllat);
        locationB.setLongitude(midlongi);

        float distance = myLocation.distanceTo(locationB);

        if (distance < 100) {
            String hej = formatDist(distance);

            AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            am.setRingerMode(AudioManager.RINGER_MODE_SILENT);

            Intent intent = new Intent(this, GoogleMaps.class);
            PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
            String body = "You are now in the silentzone";
            String title = "IRemember";
            Notification n = new Notification(R.drawable.round_pointer, body,
                    System.currentTimeMillis());
            n.setLatestEventInfo(this, title, body, pi);
            n.defaults = Notification.DEFAULT_ALL;
            nm.notify(uniqueID, n);
        }
    }

    public String formatDist(float meters) {
        if (meters < 1000) {
            return ((int) meters) + "m";
        } else
            return formatDec(meters / 1000f, 1) + "km";
    }

    public String formatDec(float val, int dec) {
        int factor = (int) Math.pow(10, dec);
        int front = (int) (val);
        int back = (int) Math.abs(val * (factor)) % factor;
        return front + "." + back;
    }

} 
```

# google-apps-script - 谷歌电子表格（应用程序脚本）将一行信息复制到另一个电子表格

> ID：14223625
> 
> 赞同：1
> 
> 时间：2013-01-08T20:41:04.170
> 
> 标签：google-apps-script, google-sheets

如果在第 5 列中输入了任何信息，我需要将该行数据复制到另一个电子表格。我的函数中的第一个 if() 用于其他内容，它在将任何信息输入第 4 列时对数据进行排序，这有效，但我需要另一个 if() 才能工作，但它没有，我看过其他问题，但我找不到适合我情况的答案。

```
function onEdit(event) {
  var sheet=event.source.getActiveSheet();
  var editedCell=sheet.getActiveCell();
  var columnToSortBy=4;
  var columnToArchive=5;
  var tableRange= "A2:F!";

  if(editedCell.getColumn() == columnToSortBy){
    var range=sheet.getRange(tableRange);
    range.sort( {column : columnToSortBy} );
  }
  else{
    if(editedCell.getColumn() == columnToArchive){
      var rowToBeMoved=editedCell.getRow();
      var rangeToBeMoved=sheet.getRange("A" + rowToBeMoved + ":F" + rowToBeMoved);
      var values=rangeToBeMoved.getValues();
      var archiveSpreadSheet=SpreadsheetApp.openById("0AroBvchobu2edHNXQ3ZUQjI5TWJtWWZwa1UtcExPNnc");
      var archiveSheet=archiveSpreadSheet.getSheetByName("archive");
      archiveSheet.appendRow(values);
    }
  }
} 
```

我已经确定问题出在第二个 if 块中的最后三行。似乎在“var values=rangeToBeMoved.getValues();”行之后，脚本停止运行，因为如果我在该行之后或之前的任何位置放置 Browser.msgBox(“hi”)，则会出现该消息，但如果我把它放在下一行之后，它不会出现。问题出在 .openById() 上？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:46:28.213

这段代码正在工作：

**更新：10-01-2013**
您需要使用 columnIndex 而不是 getColumn：

```
function onEdit(event) {
  // set items for current spreadsheet
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = ss.getActiveSheet();
  var row = sh.getActiveRange().getRowIndex();
  var col = sh.getActiveRange().getColumnIndex();
  var columnToSortBy=4;
  var columnToArchive=5;
  var tableRange= "A2:F!";

  if(col == columnToSortBy){
    var range=sh.getRange(tableRange);
    range.sort( {column : columnToSortBy} );
  }

  if(col == columnToArchive){   
    var rangeToBeMoved=sh.getRange("A" + row + ":F" + row);
    var values=rangeToBeMoved.getValues();
    var archiveSpreadSheet=SpreadsheetApp.openById("your key");
    var archiveSheet=archiveSpreadSheet.getSheetByName("Sheet1");        
    archiveSheet.appendRow(values[0]);
  }
} 
```

`appendRow`唯一接受一维数组。这`getRange`将产生一个二维数组。添加一个零（在方括号之间）将使其成为一维数组。

# python - SublimeText Codeintel Python 库补全

> ID：14223627
> 
> 赞同：3
> 
> 时间：2013-01-08T20:41:11.440
> 
> 标签：python, sublimetext2, code-intelligence

有没有人有将系统 Python 库添加到 Codeintel 索引的经验？它非常适合完成项目文件，但如果它还可以拾取例如 PIL 方法和 Google App Engine 库，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:16:22.510

全局或基于每个项目，您可以定义额外的目录来扫描代码完成。请参阅此处的[自述文件](https://github.com/Kronuz/SublimeCodeIntel/blob/master/README.rst)。

由于您在谈论 python 的东西，您将`pythonExtraPaths`在设置文件中提供数组值：

```
"Python3": {
    "python": '/usr/bin/python3',
    "pythonExtraPaths": []
} 
```

# html - 为什么自引用 iframe 不会无限循环并导致我的机器崩溃？

> ID：14223628
> 
> 赞同：68
> 
> 时间：2013-01-08T20:41:15.097
> 
> 标签：html, internet-explorer, google-chrome, firefox, iframe

我创建了一个简单的 HTML 页面，`iframe`其`src`属性引用了包含页面——换句话说，一个自引用 iframe。

**这个.html**

```
<html>
<head></head>
<body>
<iframe src="this.html"></iframe>
</body>
</html> 
```

为什么这不会无限循环并使我的浏览器崩溃？另外，为什么连 IE 都不会崩溃呢？

（注意：这源于团队讨论使用 iframe 解决问题的优点和缺点。你知道，“镜子中的镜子”之类的。）

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-08T20:54:52.033

[W3C 在 1997 年解决了这个问题，在“实现 HTML 框架](http://www.w3.org/TR/WD-frames-970331)”中解释了应该如何实现框架：

> 任何试图将其任何祖先使用的 URL 分配为其 SRC 的框架都被视为根本没有 SRC URL（基本上是一个空白框架）。

* * *

## iframe 递归错误/攻击历史

正如 kingdago 发现并在上面的评论中提到的那样，1999*年的 Mozilla 是***Mozilla**错过了为此实施保护措施的一个浏览器。引用其中一位开发人员的话：

 *> 这是一个奇偶校验错误（并且可能是尴尬的根源），因为 MSIE5 对这些类型的页面没有问题。

我决定对此进行深入研究，结果在*2004 年*[再次](https://bugzilla.mozilla.org/show_bug.cgi?id=228829)发生了这种情况。但是，这次涉及到**JavaScript ：**

> 这是代码，是什么原因造成的： <iframe name="productcatalog" id="productcatalog" src="page2.htm"></iframe> 后跟一个脚本：frames.productcatalog.location.replace (frames.productcatalog.location + location.hash);
> 
> ...
> 
> 实际结果：父窗口被递归加载到 iframe 中，有时会导致崩溃。
> 
> 预期结果：就像在 Internet Explorer 中一样显示它。

然后在*2008 年*[再次](http://www.securityfocus.com/bid/27812/info)使用**Firefox 2**（这也涉及 JavaScript）。

 ****2009*年[又一次](https://bugzilla.mozilla.org/show_bug.cgi?id=530258)。_ 这里有趣的部分是这个错误**仍然是开放**的，并且这个附件：（你会抑制你的好奇心吗？）仍然会崩溃/冻结你的 Firefox（我刚刚测试过它，我几乎让整个 Ubuntu 崩溃了）。在 Chrome 中，它只是无限期地加载（可能是因为每个选项卡都位于一个单独的进程中）。***`https://bugzilla.mozilla.org/attachment.cgi?id=414035`***

 **** * *

至于其他浏览器：

*   2005*年，* [Konqueror](https://bugs.kde.org/show_bug.cgi?id=116406)的安全措施中有一个错误，允许[在另一个内部](http://bugsfiles.kde.org/attachment.cgi?id=18978)渲染 iframe （但似乎不知何故它并没有冻结/崩溃整个应用程序）。
*   [据报道](http://xforce.iss.net/xforce/xfdb/17089)， IE6、Opera 7.54 和 Firefox 0.9.3 也容易受到基于 iframe 递归的攻击。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-05-04T14:21:17.620

我想在*“另外，为什么连 IE 都不会崩溃？”中添加一些内容。*问题的一部分。IE没有让我们失望...

如果您将简单的迭代次数作为查询字符串添加到嵌套 iFrame 的 src Firefox 中，其他人将在某个迭代深度后停止。IE - 我们使用 IE 版本 10 对此进行了测试 - 只是崩溃了 :)

**这个.php**

```
<html>
<head></head>
<body>
<iframe src="this.php?q=<?php echo (isset($_GET['q'])?$_GET['q']:1)+1?>" />
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T16:31:53.123

IE 6.0 可以在没有脚本的情况下崩溃：

```
<iframe src="this.html?c=9"></iframe> 
```

我不确定为什么这不会触发循环检测，也不确定它是否已更改。*******

# backbone.js - 具有数组/对象属性的主干模型：同步（）后触发的无限“更改”事件？

> ID：14223630
> 
> 赞同：0
> 
> 时间：2013-01-08T20:41:20.863
> 
> 标签：backbone.js

我的backbone.js 模型有一个数组属性。`change`我将事件绑定到`save()`.

之后`sync()`（由 触发`save()`，我的应用服务器返回相同的 JSON，但主干认为数组已更改（由于我猜对数组的引用不同？），并再次触发更改。然后发生无限循环。

```
save() -> sync() -> triggered `change` -> save()... 
```

我该怎么办？

想法：我可以将更改事件绑定到一个函数，该函数检查更改的属性是否为对象/数组类型，并进行深度比较并仅在数组/对象真正更改时调用保存。如果是真的`save()`呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:54:14.697

尝试 Edge 版本的 Backbone（主分支），这种行为在 0.9.9 之后发生了变化 - 请参阅[https://github.com/documentcloud/backbone/pull/2004](https://github.com/documentcloud/backbone/pull/2004)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:50:39.617

Backbone 在许多方法上都有一个特殊选项来防止此类问题：`silent:true`. 如果您将该选项传递给您的`save`方法，则结果`sync`不会触发更改事件。

因此，如果您想将更改事件处理程序设置为静默保存，例如：

```
changeHandler: function() {
    this.save({silent:true});
} 
```

应该做的伎俩。

# phpstorm - 在 PhpStorm 中你如何取消到上一个制表位？

> ID：14223631
> 
> 赞同：5
> 
> 时间：2013-01-08T20:41:22.057
> 
> 标签：phpstorm

在 PhpStorm 中，当处理软/智能标签时，我可以通过一键或组合跳回上一个制表位吗？

我尝试了 Shift+Tab，但它并没有跳回制表位，而是按 softtab 的大小跳回。

这是一个软制表符为 4 个空格的示例：

```
Notabs (0 spaces)
••••Tabstop1 (1 Tab)
••••••••Tabstop2 (2 Tabs)
••••••* My cursors is here in between Tabstop 1 + 2
••••••••&lt;- another Tab press moves me to Level2
••••&lt;- I want to get here, back to Level1 (in one key press)
••&lt;- Shift+Tab moves me here (back 4 full spaces, a full soft tab) 
```

回想起来，我可以忍受只退格 3 到 1 次，并在遍历制表位或更多距离时使用 Shift+Tab，但我只是好奇是否与 Tab 键的工作方式直接类比 un-标签的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T07:39:52.673

有一个小组合：按`Tab`，然后按`Shift`+ `Tab`。

它不是一键按下，而是与您要跳过的空格数（1或2或3）无关。无需计算您需要多少退格：每次按 2 次。

# html - 为什么这些 div 需要一个边框才能正确呈现？

> ID：14223638
> 
> 赞同：5
> 
> 时间：2013-01-08T20:41:47.507
> 
> 标签：html, css

我有一个看起来像这样的代码块：

```
<div class="header">
</div>
<div class="right-gradient">
    <div class="left-gradient">
        @RenderBody()
    </div>
</div>

.right-gradient
{
    background: url('Images/RightGradient.png') repeat-y right top transparent;
}
.left-gradient
{
    background: url('Images/RightGradient.png') repeat-y left top transparent;
} 
```

它应该导致这样的结果：

```
|-------------------|
|##### 标题######|
|-------------------|
|// \\|
|// 内容 \\|
|// \\|
|// \\|
---------------------

```

然而，它反而呈现如下：

```
|-------------------|
|##### 标题######|
|-------------------|
| | - 注意这里的额外空间
|// \\|
|// 内容 \\|
|// \\|
|// \\|
---------------------

```

在试图弄清楚标题和内容之间的额外空间来自哪里时，我发现向我的 div 添加边框实际上可以纠正问题并删除标题和内容之间的违规空间。

```
.right-gradient
{
    background: url('Images/RightGradient.png') repeat-y right top transparent;
    border: 1px red solid;
}
.left-gradient
{
    background: url('Images/RightGradient.png') repeat-y left top transparent;
    border: 1px blue solid;
} 
```

为什么是这样？

[带有重现问题的示例代码的jsfiddle](http://jsfiddle.net/2XReh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:03:22.733

简而言之，您的利润已经崩溃。MDN 对此现象有解释：

> 如果没有边框、内边距、内联内容或间隙将块的外边距顶部与其第一个子块的外边距顶部分开，或者没有边框、内边距、内联内容、高度、最小高度或最大值-height 将块的边距底部与其最后一个子块的边距底部分开，然后这些边距折叠。折叠的边距最终在父级之外。

来源：[https ://developer.mozilla.org/en-US/docs/CSS/margin_collapsing](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:47:52.577

如果你用谷歌搜索这个问题，这个问题有很好的记录，但不确定它是否是一个错误或者它究竟为什么会发生。

尝试`overflow:hidden;`摆脱空间而不必添加边框。

# android - Android - 如何在创建后调用 DialogFragment 时读取选中的项目

> ID：14223641
> 
> 赞同：0
> 
> 时间：2013-01-08T20:41:59.503
> 
> 标签：android, android-dialogfragment

我正在使用带有多选复选框的 DialogFragment 以允许用户选择多个选项。我有一个 Hashmap，根据单击时是否选择了某个项目来添加或删除选择项 - 见下文。这工作正常。

当用户重新打开片段时，对话框的状态被保留，并且之前检查的项目按预期显示 - 到目前为止很好。但是我想知道如何读取这些状态并将它们添加到我的 HashMap 中，以便它们与 Listener 类拾取的任何内容一起返回。我敢肯定这很简单，但我找不到一个例子。

我查看了 API 参考，但找不到提供此功能的明显方法。

提前致谢。

```
public class DialogSelectionClickHandler implements
  DialogInterface.OnMultiChoiceClickListener {
  public void onClick(DialogInterface dialog, int clicked,
                      boolean selected) {
    if (selected) {
      // write to a hashmap
      groupSelectHash.put(groups[clicked].toString(), "");
    }
    else
    {
      // remove from hashmap
      groupSelectHash.remove(groups[clicked].toString());
    }
    Log.i( "DialogTest", "groupSelectHash" + groupSelectHash.toString());

  }
} 
```

# dojo - 如何确定 dijit 下拉按钮的打开/关闭状态？

> ID：14223643
> 
> 赞同：0
> 
> 时间：2013-01-08T20:42:05.073
> 
> 标签：dojo, status

我正在使用 dijit DropDownButton 和我正在开发的应用程序。如您所知，如果您单击一次按钮，则会出现一个菜单。再次单击它会消失。我似乎在 API 文档中找不到这个，但是我可以读取一个属性来告诉我 DropDownButton 当前是打开还是关闭？

我试图在 DropDownButton 的 OnClick 事件上使用 dojo.connect 侦听器以执行另一个任务，但前提是单击“关闭”DropDownButton。

谢谢你！史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:47:47.500

我有一个类似的问题。我也找不到这样的属性，所以我最终添加了一个自定义属性`dropDownIsOpen`并覆盖`openDropDown()`并`closeDropDown()`更新它的值，如下所示：

```
myButton.dropDownIsOpen = false;
myButton.openDropDown = function () {
    this.dropDownIsOpen = true;
    this.inherited("openDropDown", arguments);
};
myButton.closeDropDown = function () {
    this.dropDownIsOpen = false;
    this.inherited("closeDropDown", arguments);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T17:53:49.607

你可以通过它的 CSS 类来跟踪它。当 DropDown 打开时，获得焦点的底层 DOM 节点（属性 focusNode）接收一个附加类*dijitHasDropDownOpen*。所以，对于你的情况：

```
// assuming "d" is a dijit.DropDownButton
dojo.connect(d, 'onClick', function() {
    if (dojo.hasClass(d.focusNode, 'dijitHasDropDownOpen') === false) {
        performAnotherTask(); // this fires only if the menu is closed.
    }
}); 
```

此示例适用于 dojo 1.6.2，因为您没有指定版本。当然，它可以很容易地转换为其他版本。

# ios - 在运行时和方向更改期间居中和 sizeToFit 子视图

> ID：14223648
> 
> 赞同：0
> 
> 时间：2013-01-08T20:42:36.130
> 
> 标签：ios, uiview, subviews, sizetofit

这是我在设置一些`UIView`s 和子视图时遇到的几个问题中的第一个。我有一个`UIView`在运行时动态定位在屏幕上的。那`UIView`(master) 包含另一个`UIView`(child) 包装 a`UIImageView`和 a `UILabel`。以下是我对这种安排的要求：

1.  设备旋转时，子设备`UIView`必须保持在主设备的中心。`UIView`
2.  中的文字`UILabel`可以很长也可以很短，`UIView`带有图像和文字的孩子仍然必须保持居中。
3.  我想避免子类化 UIView 来处理这种情况，我还想避免任何框架/定位代码，`willRotateToInterfaceOrientation.`我想用`autoresizingMask`IB 中的一些设置来处理所有这些，如果可能的话，可能还有一些强制调整大小的代码。

这是 Interface Builder 中的控件排列（以红色突出显示）：

![Interface Builder 控件配置](../Images/7980c202a2e65b70af8061401d03cbeb.png)

使用 Interface Builder，`autoresizingMask`属性已像这样设置，用于描述的控件

*   `UIView`(master): 弹性上边距、弹性左边距、弹性右边距、弹性宽度
*   `UIView`（子）：灵活的上边距，灵活的下边距，灵活的左边距，灵活的右边距，灵活的宽度，灵活的高度。（所有模式，无除外）
*   `UIImageView`: 灵活的右边距
*   `UILabel`: 灵活的右边距

这是在纵向模式下在运行时以编程方式添加后的视图（带有图像和文本的红色条）：

主人`UIView`的背景是浅红色的图像。child`UIView`的背景比这稍微暗一些，而`UILabel`'s 的背景更暗。我为它们着色，以便在应用程序响应旋转时可以看到它们的边界。

![在此处输入图像描述](../Images/95857df70814ceea6c3b8cbb825119b8.png)

我很清楚：

*   它不是居中的，但...
*   在将文本从“此地图范围内没有数据”更改为 IB 中的默认值后。到“TEST1, 123”。标签正确收缩。

这是在纵向添加然后旋转到横向模式后的视图：

![在此处输入图像描述](../Images/51648df190ec878cfb5b139a19a439f9.png)

从这里我可以看到：

*   它仍然没有居中，并且可能在旋转之前位于其原始框架原点
*   UIView（子）已扩展以填充更多不应该的屏幕。
*   UIView（主）已正确扩展以填充屏幕宽度。

这就是让我走到现在的代码。`showNoDataStatusView`我从 viewDidLoad调用该方法：

```
// Assuming

#define kStatusViewHeight 20

- (void)showNoDataStatusView {

    if (!self.noDataStatusView.superview) {

        self.noDataStatusView.frame = CGRectMake(self.mapView.frame.origin.x,
                                             self.mapView.frame.origin.y,
                                             self.mapView.frame.size.width,
                                             kStatusViewHeight);

        self.noDataStatusView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgRedStatus.png"]];

        // Position the label view in the center
        self.noDataStatusLabelView.center = CGPointMake(self.noDataStatusView.frame.size.width/2,
                                                    self.noDataStatusView.frame.size.height/2);

        // Test different text
        self.noDataStatusLabel.text = @"Testing, 123.";

        // Size to fit label
        [self.noDataStatusLabel sizeToFit];

        // Test the status label view resizing
        [self.noDataStatusLabelView resizeToFitSubviews];

        // Add view as subview
        [self.view addSubview:self.noDataStatusView];

    }
} 
```

请注意以下事项：

*   `resizeToFitSubviews`是我放置在 UIView 上的一个类别，一旦我发现 UIView 不会自动调整大小以适应它们的子视图，即使你调用`sizeToFit`. [这个问题](https://stackoverflow.com/questions/3946665/having-trouble-getting-uiview-sizetofit-to-do-anything-meaningful)，[这个问题](https://stackoverflow.com/questions/3605393/iphone-uiview-resize-frame-to-fit-subviews/)解释了这个问题。请参阅下面的类别代码。
*   我曾考虑过创建一个 UIView 子类来为我处理所有这些逻辑，但这似乎有点矫枉过正。在IB中安排这个应该很简单吧？
*   我已经尝试设置书中的每个调整大小掩码设置，以及调整标签和视图大小调整发生的顺序以及将主视图添加为子视图的点。似乎没有任何效果，因为我每次都会得到奇怪的结果。

UIView resizeToFitSubviews 类实现方法：

```
-(void)resizeToFitSubviews
{
    float width = 0;
    float height = 0;

    // Loop through subviews to determine max height/width
    for (UIView *v in [self subviews]) {

        float fw = v.frame.origin.x + v.frame.size.width;
        float fh = v.frame.origin.y + v.frame.size.height;

        width = MAX(fw, width);
        height = MAX(fh, height);
    }

    [self setFrame:CGRectMake(self.frame.origin.x, self.frame.origin.y, width, height)];
} 
```

我想知道的是为什么`UIView`（子）在将其超级视图添加到视图层次结构后没有正确居中。它看起来好像得到了正确的宽度，但是当标签显示“此地图范围内没有数据”时，它以某种方式保留了它在 IB 中的帧。

我还想知道为什么它在设备旋转后没有居中，以及我在这里采用的方法是否明智。也许这导致了我遇到的其他问题。任何 UIView 布局帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:55:46.637

如果您能够以 iOS 6 为目标，您可以使用新的 Auto Layout 功能使这更容易管理 - 我一直在阅读 Ray Wenderlich 的[精彩教程](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)，它似乎完美地解决了您所看到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:42:21.643

这里的问题是我的`UIView`（主）在设备旋转时不会自动布局它的子视图，并且用于定位图像和内部的“弹簧和支柱”布局方法`UIView`效率低下。我通过做两件事解决了这个问题。

1.  我摆脱了内部`UIView`（子）实例，只留下了`UIView`（主）和内部的 a `UILabel`and `UIImageView`。
2.  然后我创建了一个`UIView`名为的子类`StatusView`，并在其中实现了该`layoutSubviews`方法。在其构造函数中，我添加了一个`UIImageView`and`UILabel`并动态定位它们。`UILabel`首先根据文本的大小定位，然后将 放置在文本的`UIImageView`左侧并垂直居中。就是这样。在`layoutSubviews`我确保为新框架调整元素的位置。

此外，由于在某些情况下我需要交换背景、消息和可能的图像，因此使用自定义类是有意义的。这里/那里可能存在内存问题，但是当我使用分析工具运行此问题时，我会解决它们。

最后，我不完全确定这段代码是否坚如磐石，但它确实有效。我也不知道我的 init 方法中是否需要布局代码。布局子视图似乎在视图被添加为子视图后不久被调用。

这是我的班级标题：

```
#import <UIKit/UIKit.h>

typedef enum {
    StatusViewRecordCountType = 0,
    StatusViewReachedMaxRecordCountType = 1,
    StatusViewZoomInType = 2,
    StatusViewConnectionLostType = 3,
    StatusViewConnectionFoundType = 4,
    StatusViewNoDataFoundType = 5,
    StatusViewGeographyIntersectionsType = 6,
    StatusViewRetreivingRecordsType = 7
} StatusViewType;

@interface StatusView : UIView

@property (strong, nonatomic) NSString *statusMessage;
@property (nonatomic) StatusViewType statusViewType;

- (id)initWithFrame:(CGRect)frame message:(NSString*)message type:(StatusViewType)type;

@end 
```

...和实施：

```
#import "StatusView.h"

#define kConstrainSizeWidthOffset 10
#define kImageBufferWidth 15

@interface StatusView ()

@property (nonatomic, strong) UILabel *statusMessageLabel;
@property (nonatomic, strong) UIFont *statusMessageFont;
@property (nonatomic, strong) UIImage *statusImage;
@property (nonatomic, strong) UIImageView *statusImageView;

@end

@implementation StatusView

@synthesize statusMessageLabel = _statusMessageLabel;
@synthesize statusMessageFont = _statusMessageFont;
@synthesize statusImageView = _statusImageView;
@synthesize statusMessage = _statusMessage;
@synthesize statusViewType = _statusViewType;
@synthesize statusImage = _statusImage;

- (id)initWithFrame:(CGRect)frame message:(NSString *)message type:(StatusViewType)type {

    self = [super initWithFrame:frame];

    if (self) {

        if (message != nil) {

            _statusMessage = message;
            _statusMessageFont = [UIFont fontWithName:@"Avenir-Roman" size:15.0];

            CGSize constrainSize = CGSizeMake(self.frame.size.width - kImageBufferWidth - kConstrainSizeWidthOffset, self.frame.size.height);

            // Find the size appropriate for this message
            CGSize messageSize = [_statusMessage sizeWithFont:_statusMessageFont constrainedToSize:constrainSize];

            // Create label and position at center of status view
            CGRect labelFrame = CGRectMake(self.frame.origin.x,
                                       self.frame.origin.y,
                                       messageSize.width,
                                       messageSize.height);

            _statusMessageLabel = [[UILabel alloc] initWithFrame:labelFrame];
            _statusMessageLabel.backgroundColor = [UIColor clearColor];
            _statusMessageLabel.textColor = [UIColor whiteColor];
            _statusMessageLabel.font = _statusMessageFont;

            // Set shadow and color
            _statusMessageLabel.shadowOffset = CGSizeMake(0, 1);
            _statusMessageLabel.shadowColor = [UIColor blackColor];

            // Center the label
            CGPoint centerPoint = CGPointMake(self.frame.size.width / 2, self.frame.size.height / 2);
            _statusMessageLabel.center = centerPoint;

            // Gets rid of fuzziness
            _statusMessageLabel.frame = CGRectIntegral(_statusMessageLabel.frame);

            // Flex both the width and height as well as left and right margins
            _statusMessageLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

            // Set label text
            _statusMessageLabel.text = _statusMessage;

            [self addSubview:_statusMessageLabel];
        }

        self.statusViewType = type;

        if (_statusImage != nil) {

            // Create image view
            _statusImageView = [[UIImageView alloc] initWithImage:_statusImage];

            // Vertically center the image
            CGPoint centerPoint = CGPointMake(_statusMessageLabel.frame.origin.x - kImageBufferWidth,
                                          self.frame.size.height / 2);

            _statusImageView.center = centerPoint;

            [self addSubview:_statusImageView];
        }
    }

    return self;
}

- (void)layoutSubviews {

    CGSize constrainSize = CGSizeMake(self.frame.size.width - kImageBufferWidth - kConstrainSizeWidthOffset, self.frame.size.height);

    // Find the size appropriate for this message
    CGSize messageSize = [_statusMessage sizeWithFont:_statusMessageFont constrainedToSize:constrainSize];

    // Create label and position at center of status view
    CGRect labelFrame = CGRectMake(self.frame.origin.x,
                               self.frame.origin.y,
                               messageSize.width,
                               messageSize.height);

    _statusMessageLabel.frame = labelFrame;

    // Center the label
    CGPoint centerPoint = CGPointMake(self.frame.size.width / 2, self.frame.size.height / 2);
    _statusMessageLabel.center = centerPoint;

    // Gets rid of fuzziness
    _statusMessageLabel.frame = CGRectIntegral(_statusMessageLabel.frame);

    if (_statusImageView != nil) {

        // Vertically center the image
        CGPoint centerPoint = CGPointMake(_statusMessageLabel.frame.origin.x - kImageBufferWidth,
                                      self.frame.size.height / 2);

        _statusImageView.center = centerPoint;
    }
}

#pragma mark - Custom setters

- (void)setStatusMessage:(NSString *)message {

    if (_statusMessage == message) return;

    _statusMessage = message;

    _statusMessageLabel.text = _statusMessage;

    // Force layout of subviews
    [self setNeedsLayout];
    [self layoutIfNeeded];
}

- (void)setStatusViewType:(StatusViewType)statusViewType {

    _statusViewType = statusViewType;

    UIColor *bgColor = nil;

    switch (_statusViewType) {

        // Changes background and image based on type
    }

    self.backgroundColor = bgColor;

    if (_statusImageView != nil) {
        _statusImageView.image = _statusImage;
    }
}

@end 
```

然后在我的视图控制器中我可以这样做：

```
CGRect statusFrame = CGRectMake(self.mapView.frame.origin.x,
                                    self.mapView.frame.origin.y,
                                    self.mapView.frame.size.width,
                                    kStatusViewHeight);

self.staticStatusView = [[StatusView alloc] initWithFrame:statusFrame message:@"600 records found :)" type:StatusViewRecordCountType];

self.staticStatusView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

[self.view addSubview:self.staticStatusView]; 
```

...稍后我可以通过这样做来改变它：

```
self.staticStatusView.statusMessage = @"No data was found here";
self.staticStatusView.statusViewType = StatusViewNoDataFoundType; 
```

现在我有了一个可重用的类，而不是 12 个 UIView 实例，它们在我的 NIB 周围浮动，具有各种设置和属性。

# spring - 如何使用 Spring Data JPA 和 Spring Security 实现 AuditorAware？

> ID：14223649
> 
> 赞同：24
> 
> 时间：2013-01-08T20:42:36.303
> 
> 标签：spring, hibernate, jpa, spring-security, spring-data

我们在应用程序中使用 Hibernate/JPA、Spring、Spring Data 和 Spring Security。我有一个`User`使用 JPA 映射的标准实体。此外，我有一个`UserRepository`

```
public interface UserRepository extends CrudRepository<User, Long> {
    List<User> findByUsername(String username);
} 
```

它遵循 Spring Data 命名查询方法的约定。我有一个实体

```
@Entity
public class Foo extends AbstractAuditable<User, Long> {
    private String name;
} 
```

我想使用 Spring Data 审计支持。（如此[处](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.auditing)所述。）因此，我创建了`AuditorService`如下：

```
@Service
public class AuditorService implements AuditorAware<User> {

    private UserRepository userRepository;

    @Override
    public User getCurrentAuditor() {
        String username = SecurityContextHolder.getContext().getAuthentication().getName();
        List<User> users = userRepository.findByUsername(username);
        if (users.size() > 0) {
            return users.get(0);
        } else {
            throw new IllegalArgumentException();
        }
    }

    @Autowired
    public void setUserService(UserService userService) {
        this.userService = userService;
    }
} 
```

当我创建一个方法

```
@Transactional
public void createFoo() {
    Foo bar = new Foo(); 
    fooRepository.save(foo);
} 
```

一切都正确连接并且`FooRepository`是 Spring Data `CrudRepository`。然后`StackOverflowError`抛出一个，因为调用`findByUsername`似乎触发休眠以将数据刷新到数据库，这触发`AuditingEntityListener`谁调用`AuditorService#getCurrentAuditor`再次触发刷新等等。

如何避免这种递归？是否有加载`User`实体的“规范方式”？或者有没有办法防止 Hibernate/JPA 刷新？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T10:00:34.373

解决方案是不在实现中获取`User`记录`AuditorAware`。这会触发所描述的循环，因为选择查询会触发刷新（这种情况是因为 Hibernate/JPA 想要在执行选择之前将数据写入数据库以提交事务），从而触发对`AuditorAware#getCurrentAuditor`.

解决方案是将`User`记录存储在`UserDetails`提供给 Spring Security 中。因此，我创建了自己的实现：

```
public class UserAwareUserDetails implements UserDetails {

    private final User user;
    private final Collection<? extends GrantedAuthority> grantedAuthorities;

    public UserAwareUserDetails(User user) {
        this(user, new ArrayList<GrantedAuthority>());
    }

    public UserAwareUserDetails(User user, Collection<? extends GrantedAuthority> grantedAuthorities) {
        this.user = user;
        this.grantedAuthorities = grantedAuthorities;
    }

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        return grantedAuthorities;
    }

    @Override
    public String getPassword() {
        return user.getSaltedPassword();
    }

    @Override
    public String getUsername() {
        return user.getUsername();
    }

    @Override
    public boolean isAccountNonExpired() {
        return true;
    }

    @Override
    public boolean isAccountNonLocked() {
        return true;
    }

    @Override
    public boolean isCredentialsNonExpired() {
        return true;
    }

    @Override
    public boolean isEnabled() {
        return true;
    }

    public User getUser() {
        return user;
    }
} 
```

此外，我更改`UserDetailsService`了加载`User`和创建`UserAwareUserDetails`. 现在可以`User`通过以下方式访问实例`SercurityContextHolder`：

```
@Override
public User getCurrentAuditor() {
    return ((UserAwareUserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getUser();
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-08-22T12:06:48.367

我遇到了同样的问题，我所做的只是将`findByUsername(username)`方法上的传播更改为`Propagation.REQUIRES_NEW`，我怀疑这是事务的问题，所以我改用新事务，这对我来说效果很好。我希望这会有所帮助。

```
@Repository
public interface UserRepository extends JpaRepository<User, String> {

    @Transactional(propagation = Propagation.REQUIRES_NEW)
    List<User> findByUsername(String username);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T10:12:35.430

看起来您将 User 实体用于两个不同的事情：

*   验证
*   审计

我认为为审计目的准备一个特殊的 AuditableUser 会更好（它将具有与原始用户相同的用户名字段）。考虑以下情况：您想从数据库中删除一些用户。如果您的所有审计对象都链接到用户，那么它们将 a）松散作者 b）也可能被级联删除（取决于链接的实现方式）。不确定你是否想要它。因此，通过使用特殊的 AuditableUser，您将拥有：

*   没有递归
*   能够从系统中删除某些用户并保留有关它的所有审核信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-21T00:23:19.157

老实说，您实际上并不需要另一个实体。例如，我有类似的问题，我通过以下方式解决了它：

```
public class SpringSecurityAuditorAware implements AuditorAware<SUser>, ApplicationListener<ContextRefreshedEvent> {
    private static final Logger LOGGER = getLogger(SpringSecurityAuditorAware.class);
    @Autowired
    SUserRepository repository;
    private SUser systemUser;

    @Override
    public SUser getCurrentAuditor() {
        final Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        SUser principal;
        if (authentication == null || !authentication.isAuthenticated()) {
            principal = systemUser;
        } else {
            principal = (SUser) authentication.getPrincipal();
        }
        LOGGER.info(String.format("Current auditor is >>> %s", principal));
        return principal;
    }

    @Override
    public void onApplicationEvent(final ContextRefreshedEvent event) {
        if (this.systemUser == null) {
            LOGGER.info("%s >>> loading system user");
            systemUser = this.repository.findOne(QSUser.sUser.credentials.login.eq("SYSTEM"));
        }
    }
} 
```

其中 SUser 是我用于审计和安全的类。我的用例可能与您的不同，之后我的方法将被删除，但可以这样解决。

# git - 让 git 打印两个给定提交之间的统一差异

> ID：14223652
> 
> 赞同：-3
> 
> 时间：2013-01-08T20:42:49.517
> 
> 标签：git, diff

另外，如何引用提交？希望我不必输入那些可怕的哈希字符串！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:46:55.220

```
git diff <commit> <commit> 
```

也可以看看：

*   [http://www.kernel.org/pub/software/scm/git/docs/git-diff.html](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html)
*   [http://learn.github.com/p/diff.html](http://learn.github.com/p/diff.html)

> Git 中的“diff”命令将向您显示相同的内容 - 两个快照或*统一 diff*格式的文件之间的更改。

# mysql - MySQL根据另一列的内容修改一列的值

> ID：14223662
> 
> 赞同：1
> 
> 时间：2013-01-08T20:43:12.300
> 
> 标签：mysql, sql

基本上我想查询一个数据库并根据另一列的内容修改一列的值。

这是我对它如何工作的想法：

```
IF Column 'Town'  IS NOT NULL then Column 'Sign-up type' = 1 else = 0 
```

逻辑是，我在数据库中添加了一个新列，用于存储是否进行了快速或完整注册。

快速 = 0，完全 = 1。默认值为 0 = 快速。

我已经设法在为数据库提供的两个注册表单上实现了更改，但是我需要将历史数据附加到向后填充数据中。

由于快速注册仅收集姓名和电子邮件，因此这些条目不包含“城镇”字段中的数据，该字段是完整注册中的必填字段。

所以我用它作为参考点来选择所有具有（非空？）数据的条目，以便在“注册类型”列中输入“1”（代表“完整”）。

我希望我说得通！我对MySQL只有基本的了解，但我愿意学习，当我不清楚正确的行话时，有时很难解释我想做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:46:12.157

```
UPDATE yourTable SET signupType = IF(Town IS NULL, 1, 0); 
```

请注意，这将更新所有数据，您可能希望将其限制为历史数据（但听起来应该没问题）。

# android - PreferenceActivity 和自定义 Seekbar 布局

> ID：14223668
> 
> 赞同：0
> 
> 时间：2013-01-08T20:43:31.683
> 
> 标签：android, seekbar, preferenceactivity, preferencescreen

我发现这个非常有用的网站：[http ://android-journey.blogspot.de/2010/01/for-almost-any-application-we-need-to.html](http://android-journey.blogspot.de/2010/01/for-almost-any-application-we-need-to.html)

它显示了自定义搜索栏首选项实现。我的问题是，我的偏好屏幕中有几个 listpreference 项目，而且我还想实现一个 seekbar 首选项。为此，我必须扩展 Preference 类并提供一个 Layout，它将在 preferencescreen 的列表视图中使用。

问题是，标准的 listpreferences 具有相同的布局高度，而我的 seekbar 首选项有另一个高度......但我希望在不同的 android 版本（2.2 - 4.2 ）。文字大小和颜色也略有不同。

有没有办法获得标准的 android PreferenceActivity 布局属性值或任何其他解决方案？

# java - 匿名类 Java 中的匿名代码块

> ID：14223671
> 
> 赞同：9
> 
> 时间：2013-01-08T20:43:49.297
> 
> 标签：java, anonymous-class

> **可能重复：**
> [Java 中的双大括号初始化是什么？](https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java)

在查看一些遗留代码时，我遇到了一些非常令人困惑的事情：

```
 public class A{
      public A(){ 
          //constructor
      }
      public void foo(){
            //implementation ommitted
      }
 }

 public class B{
      public void bar(){
           A a = new A(){ 
                { foo(); }
           }
      }
 } 
```

在调试模式下运行代码后，我发现在`{ foo() }`调用构造函数之后调用了匿名块`A()`。上述功能与执行有何不同：

```
 public void bar(){
       A a = new A();
       a.foo();
 } 
```

? 我认为它们在功能上是等效的，并且认为后一种方式是编写代码的更好/更清洁的方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:44:39.320

```
 { foo(); } 
```

被称为[实例初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.6)。

> 为什么？

按照[java教程](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T20:47:48.287

> “在以下情况下，实例初始化程序是实例变量初始化程序的有用替代方案：(1) 初始化程序代码必须捕获异常，或 (2) 执行无法用实例变量初始化程序表达的奇特计算。当然，您可以总是这样写构造函数中的代码。但是**在一个有多个构造函数的类中，您必须在每个构造函数中重复代码。使用实例初始化器，您只需编写一次代码，无论使用什么构造函数创建都会执行对象**。实例初始化器在匿名内部类中也很有用，它根本不能声明任何构造函数。^([来源](http://www.javaworld.com/javaworld/jw-03-1998/jw-03-initialization.html?page=4))

这也被引用在[这个答案](https://stackoverflow.com/a/1355843/1029916)中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:49:37.477

除非对象的运行时类被访问（通过调用`getClass()`）并且由于某种原因需要不同于`A`（例如因为它用作超类型令牌），否则确实没有区别，并且`foo()`在构造后简单地调用确实是比较常见的成语。

# xsd - XSD Schema - 如何确保两个简单元素一起具有值或不具有值

> ID：14223673
> 
> 赞同：1
> 
> 时间：2013-01-08T20:43:58.190
> 
> 标签：xsd, xsd-validation

请协助，这是我在验证我的 xml 文件时想要实现的目标：

```
<?xml version="1.0" encoding="UTF-8"?>
<worker>
    <name>dingo</name>
    <ssn>12345</ssn>
</worker> 
```

我想确保两个简单的元素“name”和“ssn”要么有值（作为一个组），要么没有任何值（作为一个组）。它们不能单独存在并具有价值。

我必须使用 XSD 架构，所以不能使用其他选项我有时会看到建议：Relax NG 等。我考虑为元素“name”和“ssn”创建一个组，但我无法找到如何为本组获得我的条件。

我当前的 XSD 文件：

```
<xs:complexType name="worker">
<xs:sequence>
    <xs:element name="name" type="xs:string" minOccurs="0" "maxOccurs="1">
    <xs:element name="ssn" type="xs:positiveInteger" minOccurs="0" "maxOccurs="1">
</xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:18:57.410

你所要做的

```
<xs:complexType name="worker">
   <xs:group ref="workerGrp" minOccurs="0"/>
</xs:complexType>

<xs:group name="workerGrp">
  <xs:sequence>
    <xs:element name="name" type="xs:string">
    <xs:element name="ssn" type="xs:positiveInteger">
  </xs:sequence>
</xs:group> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:02:02.760

```
<xs:complexType name="worker">
  <xs:sequence minOccurs="0">
    <xs:element name="name" type="xs:string">
    <xs:element name="ssn" type="xs:positiveInteger">
  </xs:sequence>
</xs:complexType> 
```

# php - 无法在 Vagrant VM 中安装 APC 和 XDebug

> ID：14223674
> 
> 赞同：1
> 
> 时间：2013-01-08T20:44:01.573
> 
> 标签：php, apc, vagrant, pecl

我遵循了几个关于 Vagrant 和 Chef Solo 的教程和指南，但是当我想使用 Chef Solo 配置我的 Precise64 VM 时遇到了问题。安装 PHP5.3 和 PECL 和 PEAR 后，配方需要安装 APC，但是虽然 APC 在 PECL 上可用，但它无法找到包。这是我得到的信息。

```
RuntimeError
------------
Package apc not found in either PEAR or PECL.

Cookbook Trace:
---------------
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/php/providers/pear.rb:259:in `pecl?'
/tmp/vagrant-chef-1/chef-solo-1/cookbooks/php/providers/pear.rb:107:in     `load_current_resource'

Resource Declaration:
---------------------
# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/web-app/recipes/webserver.rb

 17: package "libpcre3-dev"
 18: php_pear "apc" do
 19:   action :install
 20: end
 21: 
```

首先，我认为我的 PECL 和 PEAR 不是最新的，但是它们是使用以下内容预先更新的：

```
# update the main channels
php_pear_channel 'pear.php.net' do
  action :update
end

php_pear_channel 'pecl.php.net' do
  action :update
end 
```

**编辑**：`vagrant ssh`进入我的盒子并运行`sudo pecl install apc`它似乎解决了这个包就好了。食谱出了点问题。我已经在 Debian Squeeze 64 和 Ubuntu Server Precise 64 上尝试了上述方法，仅供参考

**EDIT2**：我设置了一个新盒子，使用 Precise32 和一个全新的 Vagrantfile 和配方使用`knife`，我得到了同样的错误。我也尝试使用 PECL 安装 XDebug，但我得到了一个非常无意义的错误。

我已经用我的配置和收到的错误消息创建了一个要点，希望人们能看到什么是错误的。据我所见，-recipe 的`php_pear`提供者`php`已损坏。

您可以在此处查看要点：[https ://gist.github.com/4492004](https://gist.github.com/4492004)

这让我完全发疯了......最简单的事情不适用于 Chef-solo，并且在遵循最基本的在线教程时，我会遇到各种错误。真让人生气。

**EDIT3** 访问[https://github.com/opscode-cookbooks/php](https://github.com/opscode-cookbooks/php)时，您会看到该配方`php::module_apc`已被弃用，并且 PEAR/PECL 或软件包安装更好。我想知道他们是如何实现`php::module_apc`配方并找到这个的（https://github.com/opscode-cookbooks/php/blob/master/recipes/module_apc.rb）：

```
case node['platform_family']
when "rhel", "fedora"
   %w{ httpd-devel pcre pcre-devel }.each do |pkg|
       package pkg do
           action :install
       end
   end
   php_pear "apc" do
       action :install
       directives(:shm_size => "128M", :enable_cli => 0)
   end
when "debian"
   package "php-apc" do
       action :install
   end
end 
```

很明显，他们现在在使用 Debian/Ubuntu 时使用该命令时出了点问题，`php_pear`但没有记录在案。鉴于 PEAR/PECL 是安装 PHP 附加组件的最标准方法，我专注于让它工作，但是看到这一点，我认为我必须参考使用该`package`命令。我会问 Opscode 的人为什么他们为 Debian 做例外。

**最后一章** 大获成功！使用`package`命令轻而易举。但是，在使用 Chef 的 Debian 中，使用 PECL/PEAR 安装软件包似乎是有问题的。所以问题仍然存在，找到了一种解决方法（这实际上是 Debian 的正常操作方式，尽管 Github 上的文档另有说明）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:37:52.213

使用资本似乎通过 php_pear 安装它

```
php_pear 'APC' do
  action :install
end 
```

编辑：最后我不得不通过包安装它，因为使用 php_pear 会创建带有大写指令的 ini 文件，并且无法正确读取。类似的东西`APC.shm_size`是无效的。

我最终做了这样的事情：

```
package "php-apc"
template "#{node['php']['ext_conf_dir']}/apc.ini" do
  source "apc.ini.erb"
  owner "root"
  group "root"
  mode "0644"
  variables(:name => "apc", :extensions => ["apc.so"], :directives => {"shm_size" => "256"})
  action action
end 
```

我创建了自己的 apc.ini.erb 模板文件：

```
; configuration for php <%= @name %> module
<% @extensions.each do |filepath, zend| -%>
extension=<%= filepath %>
<% end -%>
<% @directives.each do |k,v| -%>
<%= "#{@name}.#{k}=\"#{v}\"" %>
<% end -%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T21:06:18.860

我在 centos 5 上遇到了与 vagrant 和 chef 类似的问题。我在 php 食谱中放了一些调试代码，发现它正在尝试运行这个命令 pecl -d preferred_state=stable search -c pecl.php.net APC'

我收到的输出是

```
Retrieving data...0%.Invalid xml downloaded from "http://pecl.php.net/rest/p/dom_varimport/info.xml": XML Error: 'Invalid character' on line '13' 
```

原来我正在运行一个非常旧版本的 php pear。我通过运行以下命令修复了它

```
pear upgrade -f PEAR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:48:42.747

在我的环境中，我通过以下修改解决了它。你试过了吗？

操作系统：Ubuntu 12.04.1 LTS

厨师独奏：10.16.6

成功：php_pear "APC" 做

问题：php_pear "apc" 做

似乎 php recipe 并没有忽略这种情况。

但是我还有另一个问题是配置选项不正确。“-e”分配给第一个选项。（它只出现在ubuntu中。它不会出现在centos6中。）

```
chef-solo(log_level :debug)
running: /tmp/pear/temp/APC/configure --enable-apc-debug=-e --enable-apc-filehits=no --enable-apc-spinlocks=no --enable-apc-memprotect=no --enable-apc-pthreadmutex=no --enable-apc-pthreadrwlocks=yes

pecl install apc
running: /tmp/pear/temp/APC/configure --enable-apc-debug=no --enable-apc-filehits=no --enable-apc-spinlocks=no --enable-apc-memprotect=no --enable-apc-pthreadmutex=no --enable-apc-pthreadrwlocks=yes 
```

# python - 使用 Drive python API 在 Google 电子表格中设置“发布到网络”

> ID：14223675
> 
> 赞同：10
> 
> 时间：2013-01-08T20:44:11.390
> 
> 标签：python, google-drive-api

我正在尝试使用 Google Drive API 的 Python 版本在 Google 文档中模拟单击“发布到网络”->“立即开始发布”。根据我对文档的模糊理解，我相信这应该可行：

```
service.revisions().update(fileId = newfile['id'],
    revisionId='head', body={'published':True, 'publishAuto': True}) 
```

但是，这似乎对我的文档没有影响。

我希望能够以编程方式创建一个可供全世界立即访问的 Google 电子表格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T22:53:42.933

原来上面代码片段返回的响应对象需要调用`execute()`：

```
service.revisions().update(fileId = newfile['id'], revisionId='head',
    body={'published':True, 'publishAuto': True}).execute() 
```

这将返回一个修订对象并设置文档的发布属性。

# iphone - CSS 溢出适用于 iPad 但不适用于 iPhone

> ID：14223680
> 
> 赞同：1
> 
> 时间：2013-01-08T20:44:26.003
> 
> 标签：iphone, ios, ipad

我有一个 div 应该在侧面导航打开时移出屏幕。这是通过使用“margin-left:240px;overflow:auto;”来完成的。这在我的 iPad4 上运行良好。但是在我的 iphone5 上，div 并没有离开屏幕，而是 div 的内容被压扁并且可见。

我知道溢出过去在 iphone/ipad 上遇到过一些问题，但不知道为什么这对我在 ipad 上而不是在 iphone 上有效。

有人有什么建议吗？

# javascript - 无法修改计时器间隔函数以在 javascript 中给出总持续时间

> ID：14223683
> 
> 赞同：0
> 
> 时间：2013-01-08T20:44:45.387
> 
> 标签：javascript

我找到了这个[区间函数](https://gist.github.com/1185904)，并且一直在我的网站上使用它。但是，我需要从间隔中获取总持续时间。我尝试对其进行修改，以便可以调用 timer.total_duration 来获取总时间，但是当我尝试运行修改后的代码时，我收到一条错误消息，提示“未捕获的 TypeError：数字不是函数”，修改后的函数是：

```
function interval(duration, fn) {
    this.baseline = undefined
    this.total_duration = 0.0

    this.run = function () {
        if (this.baseline === undefined) {
            this.baseline = new Date().getTime()
        }
        fn()
        var end = new Date().getTime()
        this.baseline += duration

        var nextTick = duration - (end - this.baseline)
        if (nextTick < 0) {
            nextTick = 0
        }
        this.total_duration += nextTick //line giving the error
        (function (i) {
            i.timer = setTimeout(function () {
                i.run(end)
            }, nextTick)
        }(this))
    }

    this.stop = function () {
        clearTimeout(this.timer)
    }
} 
```

知道为什么我会收到此错误，以及如何解决它以便获得总持续时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:54:04.127

分号！它们不是可选的！

如果您不输入，口译员会为您输入。或者在某些情况下无法将它们放在您期望的位置。

这段代码：

```
this.total_duration += nextTick //line giving the error
(function (i) {
    i.timer = setTimeout(function () {
        i.run(end)
    }, nextTick)
}(this)) 
```

就像这段代码一样被解析：

```
this.total_duration += nextTick(function (i) {
    i.timer = setTimeout(function () {
        i.run(end)
    }, nextTick)
}(this)) 
```

`nextTick`是一个数字，而不是一个函数，所以它显然不能被调用。

你要这个：

```
this.total_duration += nextTick; // <-- the semicolon that fixes your stuff
(function (i) {
    i.timer = setTimeout(function () {
        i.run(end); // <-- semicolon! end of statement
    }, nextTick); // <-- semicolon! end of setTimeout()
}(this)); // <-- semicolon! end of anonymous function invocation 
```

*您最好在每条语句*的末尾添加分号。您未来的调试器会感谢您。

# android - Android：如何将 Spinner 选择与 AutoCompleteTextView 连接起来

> ID：14223684
> 
> 赞同：1
> 
> 时间：2013-01-08T20:44:46.317
> 
> 标签：android, dynamic, onclick, android-spinner, autocompletetextview

我正在尝试将 Spinner 中的操作与 AutoCompleteTextView 连接起来。我的目标是当用户在微调器中选择某些项目时，需要更改 AutoCompleteTextView 建议列表。

例子：

**微调项目：**猫，狗，马

**字符串 1 ：** cat1、cat2、cat3、...

**字符串 2 ：**狗 1、狗 2、狗 3、...

**String3:** horse1, horse2, horse3 ...

因此，当用户在 spinner 中选择“Dogs”并点击 AutoCompleteTextView 后，他会在开始编写后得到以下建议：dog1、dog2、dog3。猫和马类似。

我找不到这个问题的解决方案。

我试图将 onClickListener 放到 AutoCompleteTextView 但似乎不起作用。

```
autoCompleteTextView.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
//some actions
}); 
```

并且应该有一些更好的解决方案，因为在屏幕打开后 AutoCompleteTextView 已经被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:22:48.897

查看 AutoCompleteTextView 的 API - [http://developer.android.com/reference/android/widget/AutoCompleteTextView.html](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

建议是从数据适配器填充的，因此您可以在用户做出微调器选择后修改 autoCOmpleteTextView 的数据适配器：

```
mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() 
{
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
    {
          String[] choices; 
          // set the adapter for the autoCOmpleteTextView here based on what was selected
          if(DOGS) {
                choices = new String[] {"dog1", "dog2", "dog3"};
          } else if (CATS) {
                choices = new String[] {"cat1", "cat2", "cat3"};
          }
          // etc...
          ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_dropdown_item_1line, choices);
             myTextView.setAdapter(adapter);
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) 
    {
         // nothing
    }
}); 
```

# android - 单击按钮时平移以在地图上进行坐标（Android）

> ID：14223698
> 
> 赞同：1
> 
> 时间：2013-01-08T20:45:47.687
> 
> 标签：android, google-maps, onitemclicklistener

我正在从 MapView 页脚的 SlidingDrawer 中的地图点 SQLite 数据库填充地图坐标的 ListView。

当单击 ListView 中的项目时，我想平移到适当的地图点。

简单来说，当单击按钮时，如何平移到地图上的硬编码地理点？

教程链接总是有帮助的:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:51:03.833

如果您使用的是新的 Google Maps API v2，您将使用类似的东西创建一个 LatLng

```
LatLng point = new LatLng(latitude, longitude); 
```

然后使用[moveCamera](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#moveCamera%28com.google.android.gms.maps.CameraUpdate%29)将相机移动到该点。

所以，用你的新观点，你会写

```
getMap().moveCamera(CameraUpdateFactory.newLatLng(point)); 
```

[这在此处](https://developers.google.com/maps/documentation/android/views#moving_the_camera)的文档中进行了讨论。

# r - RNG（随机数生成器）

> ID：14223701
> 
> 赞同：-2
> 
> 时间：2013-01-08T20:46:10.860
> 
> 标签：r, random

我是随机数生成器领域的新手。我想使用 Mersenne-Twister 算法，因为它相对于其他算法具有最长的周期。

*   哪个 R 函数实现了这个算法？我使用了“？sample”，但没有关于使用哪种算法的信息，是否存在。
*   另一个问题是：在随机数生成中设置哪个种子最好？
*   最后：R 是生成随机数的最佳工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:54:19.713

*   R 使用的默认算法是 Mersenne-Twister。

*   没有最好的种子。这取决于您的应用程序。您是否希望每次运行代码时它都是相同的一组数字？使用相同的种子。如果没有，也许使用当前时间会满足您的需要。

*   生成随机数的最佳工具是**不**使用确定性 PRNG（例如 Mersenne-Twister）的工具。而是查看诸如[random.org 之](http://random.org)类的内容。我认为阅读[True randomness 与 Pseudo randomness](http://en.wikipedia.org/wiki/Random_number_generation#.22True.22_random_numbers_vs._pseudorandom_numbers)对您真的很有帮助。

# serial-port - 串行驱动程序硬件 fifo 以 460800 波特率溢出

> ID：14223703
> 
> 赞同：2
> 
> 时间：2013-01-08T20:46:21.473
> 
> 标签：serial-port, linux-device-driver

我正在使用基于 2.6.32 OMAP 的 linux 内核。我观察到在高速数据速率（串行端口设置为 460800 波特率）下，串行端口 HW fifo 溢出发生。

串口被配置为在 rx 和 tx 两个方向上每 8 字节产生一次中断（即当串口 HW fifo 为 8 字节时，产生一次从串口读取数据的全串口中断）。

我正在连续传输 114 字节数据包（串行驱动程序不知道数据包模式，它以原始模式接收数据）。根据计算，

460800 位/秒 => 460800/10 = 46080 字节/秒（其中 1 个停止位和 1 个起始位）所以在 1 秒内我可以在最坏的情况下传输 46080/114 => 404.21 个数据包而没有任何问题。

但是，我希望串行端口每秒至少处理 1000 个数据包，因此我已将串行驱动程序配置为每 8 个字节生成一次中断。

我使用 Windows XP 进行了同样的尝试，并且每秒最多可以读取 600 个数据包。

您认为在上述情况下这在 linux 上可行吗？或者我错过了什么？让我知道你的意见。

也有人可以发送一些需要在 .config 文件中配置的重要配置设置。我无法附加 .config 文件，否则我可以分享它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:22:42.513

串行端口可能发生两种**溢出。**第一个是您正在谈论的那个，驱动程序没有足够快地响应中断以清空 FIFO。它们通常大约 16 字节深，因此获得 fifo 溢出需要中断处理程序在 1 / (46080 / 16) = 347 微秒内无响应。那是一个非常非常长的时间。你必须有一个相当严重的驱动程序，具有更高优先级的中断才能触发它。

第二种是你没有考虑过的，它为逻辑解释提供了更多希望。驱动程序将字节从 fifo 复制到接收缓冲区。他们将坐在哪里，直到用户模式程序调用 read() 来读取它们。当不配置与设备的任何类型的握手并且用户模式程序没有足够频繁地调用 read() 时，会发生该缓冲区溢出。它看起来*就像*一个先进先出缓冲区溢出，字节就消失了。有状态位可以警告这些问题，但不检查它们是一种常见的疏忽。你也没有提到这样做。

因此，从改进诊断开始，*检查*溢出状态位以了解发生了什么。如果您发现它实际上是缓冲区溢出问题，请考虑启用握手*。*如果这是一个消防软管问题，增加缓冲区大小是可能的，但不是解决方案。让用户模式程序更频繁地调用 read() 是一种解决方法，但并不容易。只是降低波特率，是的，这总是有效的。

# ruby - 数组如果大小超过 2 将数组设置为 []

> ID：14223707
> 
> 赞同：-5
> 
> 时间：2013-01-08T20:46:51.610
> 
> 标签：ruby, arrays

```
@ad = [2, 5, 5]
if @ad.size < 2
  @ad = []
end
@ad # => [2, 5, 5] 
```

为什么`@ad`不是`[]`？我想存储在一个数组中找到的最后两条记录，如果它们相同，它应该找到一条新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:25:01.873

我猜你`>`弄错了。

别担心，这是最好的情况。

还有一种更简洁的方式来编写代码，使用尾随 if。

```
@ad = [2, 5, 5]
@ad = [] if @ad.size > 2
@ad # => [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:49:12.003

> 为什么@ad 不是 []？

为什么*会*这样？您的代码*非常*基本，它说“如果@ad 的项目少于两个，则将其设置为一个空数组”。正如您清楚地表明的那样，@ad有*不少于*两个项目，它有三个项目。三个在你看来少于两个吗？

如果您要查找*唯一*项目的数量，则不需要使用`.uniq`，但它仍然不会*少于*两个，它将恰好是两个，因此您*仍然*不会输入`if`条件。

# java - "(" ABC ")" 或 ABC - 匹配平衡包装或无正则表达式

> ID：14223715
> 
> 赞同：-3
> 
> 时间：2013-01-08T20:47:22.437
> 
> 标签：java, regex, regex-group

```
BEGIN A B C END | A B C 
```

上面的正则表达式应该匹配`BEGIN A B C END`或`A B C`不匹配被 BEGIN 和 END 包围。假设在使用像 in 这样的命名组时在 A 之后`(?<ImAfterTheA>A)`，在 Java 中，您需要为第一个 A 赋予与第二个 A 不同的组名。

```
BEGIN (?<ImAfterTheA_1>A) B C END | (?<ImAfterTheA_2>A) B C 
```

所以......我想缩短这个并想出了：

```
BEGIN? A B C END? 
```

但话又说回来，这将匹配`A B C`or`BEGIN A B C`或`A B C END`or `BEGIN A B C END`，有效地匹配一种比我想要的更大的语言。

我可以在不扩大语言范围的情况下更简洁，从而避免匹配组使用两个不同的组名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:50:50.517

这个正则表达式做我认为你想要的：

```
(BEGIN A B C END)| ((?<!BEGIN) A B C (?!END)) 
```

这与两端的 BEGIB 和 END 匹配，或者两端的BEGIN 或 END 都不*匹配。*换句话说，如果其中一个包装器存在，则两者都必须存在。

*   `BEGIN A B C END`匹配
*   `foo A B C END`不匹配
*   `BEGIN A B C foo`不匹配
*   `foo A B C bar`匹配

# java - 单节点hadoop设置Ubuntu 10.04

> ID：14223717
> 
> 赞同：0
> 
> 时间：2013-01-08T20:47:25.993
> 
> 标签：java, ubuntu, hadoop

我正在关注本教程[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

尝试格式化 hdfs 文件系统时出现此错误

```
/usr/local/hadoop/bin/hadoop: line 320: /usr/lib/jvm/jav-6-sun/bin/java: No such file or directory
/usr/local/hadoop/bin/hadoop: line 390: /usr/lib/jvm/jav-6-sun/bin/java: No such file or directory
/usr/local/hadoop/bin/hadoop: line 390: exec: /usr/lib/jvm/jav-6-sun/bin/java: cannot execute: No such file or directory 
```

当我回显 java home 这就是我得到的

```
mco@mco-desktop:~$ echo $JAVA_HOME
/usr/lib/jvm/java-6-sun 
```

这是我在 hadoop-env.sh 中的 java 路径

```
# The java implementation to use.  Required.
export JAVA_HOME=/usr/lib/jvm/jav-6-sun 
```

运行 Ubuntu 10.04 和 hadoop 1.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:57:14.763

这只是一个错字，您没有在**hadoop-env.sh**文件`java`中正确写入。它应该是这样的：

 **```
# The java implementation to use.  Required.
export JAVA_HOME=/usr/lib/jvm/java-6-sun 
```

并不是：

```
# The java implementation to use.  Required.
export JAVA_HOME=/usr/lib/jvm/jav-6-sun 
```

之后不要忘记重新启动集群以考虑到这一点。**

# javascript - Vows JS 测试未定义

> ID：14223719
> 
> 赞同：0
> 
> 时间：2013-01-08T20:47:41.213
> 
> 标签：javascript, node.js, unit-testing, vows

我正在尝试使用 vows js 来创建单元测试。当“主题”是“未定义”时，我遇到了麻烦。请看下面的例子：

```
var vows = require('vows'),
  assert = require('assert');

function giveMeUndefined(){
  return undefined;
}

vows.describe('Test vow').addBatch({
  'When the topic is undefined': {
    topic: function() {
      return giveMeUndefined();
    },
    'should return the default value of undefined.': function(topic) {
      assert.isUndefined(topic);
    }
  }
}).export(module); 
```

这不是确切的代码，但它是它的要点。当我运行测试时，我得到“回调未触发”。单步浏览 vows 的代码，我可以看到它在 topic 为`undefined`.

最终我想知道如何编写单元测试来做到这一点。我团队中的其他人写了我认为是 hack 的东西，并在主题中做了断言并返回`true`or `false`if `topic === undefined`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:20:57.347

来自誓言文档：

> » 主题是可以执行异步代码的值或函数。

在您的示例`topic`中分配给一个函数，因此 vows 期望异步代码。

只需将您的主题重写如下：

```
var vows = require('vows'),
  assert = require('assert');

function giveMeUndefined(){
  return undefined;
}

vows.describe('Test vow').addBatch({
  'When the topic is undefined': {
    topic: giveMeUndefined(),
    'should return the default value of undefined.': function(topic) {
      assert.isUndefined(topic);
    }
  }
}).export(module); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T15:48:58.053

您可以提供这样的回调：观察行`**Note**`

```
var vows = require('vows'),
  assert = require('assert');

function giveMeUndefined(callback){//**Note**
  callback(undefined); //**Note**
}

vows.describe('Test vow').addBatch({
  'When the topic is undefined': {
    topic: function(){
     giveMeUndefined(this.callback); // **Note**
    },
    'should return the default value of undefined.': function(undefinedVar, ignore) {
      assert.isUndefined(undefinedVar);
    }
  }
}).export(module); 
```

# java - OpenCV android VideoWriter问题

> ID：14223723
> 
> 赞同：2
> 
> 时间：2013-01-08T20:48:03.890
> 
> 标签：java, android, c++, opencv, java-native-interface

我在android中使用带有JNI的VideoWriter opencv类时遇到问题。

我的目标是简单地捕获相机帧并使用 VideoWriter 将它们写入文件。

这是代码：

**本机部分**- 3 个函数来初始化写入器、写入帧和释放写入器。

```
JNIEXPORT void JNICALL Java_com_driveassist_drivingassistant_WorkActivity_InitWriter(JNIEnv *env, jobject, jstring path)
{
    char const * new_path;
    new_path = env->GetStringUTFChars(path , NULL ) ;

    writer = VideoWriter();

    stringstream ss;
    ss << new_path;
    ss << "//1.mp4";

    string p;
    ss >> p;

    writer.open(p, CV_FOURCC('P', 'I', 'M', '1'), 24, Size(1024, 768));
}

JNIEXPORT void JNICALL Java_com_driveassist_drivingassistant_WorkActivity_WriteFrame(JNIEnv *, jobject, jlong frame)
{
    Mat* im=(Mat*)frame;
    Mat im_p = (*im).clone();

    if(writer.isOpened())
    {
        resize(im_p, im_p, Size(1024, 768), 0, 0, INTER_AREA);

        writer.write(im_p);
    }

}

JNIEXPORT void JNICALL Java_com_driveassist_drivingassistant_WorkActivity_ReleaseWriter(JNIEnv *, jobject)
{
    if(writer.isOpened())
    {
        writer.release();
    }
} 
```

**Java部分：**

我使用 opencv CameraBridgeViewBase 的活动：

```
public class WorkActivity extends Activity implements CvCameraViewListener {

    private CameraBridgeViewBase   mOpenCvCameraView;

    private Mat mRgba;

    private File mediaStorageDir;

    private BaseLoaderCallback     mLoaderCallback = new BaseLoaderCallback(this) {
        @Override
        public void onManagerConnected(int status) {
            switch (status) {
                case LoaderCallbackInterface.SUCCESS:
                {
                    System.loadLibrary("driving_assistant");

                    mOpenCvCameraView.enableView();

                    InitWriter(mediaStorageDir.getPath());
                } break;
                default:
                {
                    super.onManagerConnected(status);
                } break;
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

        setContentView(R.layout.activity_work);

        mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "DriveAssistantCam");

        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("DrivingAssistant", "failed to create directory");
            }
        }

        mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.work_camera_surface_view);

        mOpenCvCameraView.setCvCameraViewListener(this);
    }

    @Override
    public void onPause()
    {
        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();

        super.onPause();

        // ReleaseWriter();
    }

    @Override
    public void onResume()
    {
        super.onResume();

        OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback);

        // OpenCVLoader.initDebug();
    }

    public void onDestroy() {
        super.onDestroy();

        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();

        ReleaseWriter();
    }

    public void onCameraViewStarted(int width, int height) {
        mRgba = new Mat(height, width, CvType.CV_8UC4);
    }

    public void onCameraViewStopped() {
        mRgba.release();

        ReleaseWriter();
    }

    public Mat onCameraFrame(Mat inputFrame) {
        inputFrame.copyTo(mRgba);

        WriteFrame(mRgba.getNativeObjAddr());

        return mRgba;
    } 
```

代码运行无异常，但视频文件没有出现。本机库正常加载，并且应用程序可以访问该目录（我尝试使用 java.io.File 在那里创建一个文件）。

我的系统是 Ubuntu 12.10，Eclipse Indigo。我已经在模拟器和 Galaxy Tab 2 上尝试过这段代码。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:41:18.087

嗯，回答我自己的问题已经成为一个很好的传统:)

OpenCV for adnroid 还不支持视频读写。我在谷歌组“Opencv4Android”中找到了这个：

> Andrey Pavlenko andrey.pavlenko@itseez.com через googlegroups.com 4 янв。(5 дн. назад)
> 
> кому: android-opencv 不幸的是，在 Android 上 OpenCV 还不支持视频读写，即使在更高版本 2.4.3.2 中也是如此。希望在下个版本中启用...

可能我将不得不使用 ffmpeg 或其他一些库。

# static-content - DropWizard 可以从 jar 文件外部提供资产吗？

> ID：14223724
> 
> 赞同：15
> 
> 时间：2013-01-08T20:48:07.647
> 
> 标签：static-content, dropwizard

在查看[文档](http://dropwizard.codahale.com/maven/dropwizard-core/apidocs/com/yammer/dropwizard/bundles/AssetsBundle.html)时，DropWizard 似乎只能提供位于 src/main/resources 中的静态内容。我想将我的静态文件保存在 jar 文件之外的单独目录中。那可能吗？还是大多数人使用 nginx/Apache 作为他们的静态内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T07:33:46.167

是的，它可以，使用这个插件 - [https://github.com/bazaarvoice/dropwizard-configurable-assets-bundle](https://github.com/bazaarvoice/dropwizard-configurable-assets-bundle)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-12T09:14:59.883

根据 Marcello Nuccio 的回答，我仍然花了我一天的大部分时间才把它弄好，所以这里是我做的更详细的事情。

假设我有这个目录结构：

*   我的dropwizard-server.jar
*   静态文档
    *   资产
        *   图像.png

那么这就是你必须做的让它工作：

1) 在您的 dropwizard Application 类中，添加一个新的 AssetsBundle。如果您希望从不同的 URL 提供您的资产，请更改第二个参数。

```
@Override
public void initialize(Bootstrap<AppConfiguration> bootstrap) {
    bootstrap.addBundle(new AssetsBundle("/assets/", "/assets/"));       
} 
```

2）通过像这样配置 maven-jar-plugin 将文档根添加到您的类路径。（以正确的形式获取“./staticdocs/”花了我一段时间。类路径是无情的。）

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-jar-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <archive>
      <manifest>
        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
        <addClasspath>true</addClasspath>
      </manifest>
      <manifestEntries>
        <Class-Path>./staticdocs/</Class-Path>
      </manifestEntries>
    </archive>
  </configuration>
</plugin> 
```

3) 这一步完全是可选的。如果您想从不同的根路径（例如“app”）提供您的 Jersey REST 资源，请将以下内容添加到您的配置 YML：

```
server:
  rootPath: /app/* 
```

现在您可以像这样访问您的静态内容，例如：

```
localhost:8080/assets/image.png 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-06T10:09:29.963

[用户手册](http://dropwizard.io/manual/core.html#serving-assets)说：

> 使用扩展的 AssetsBundle 构造函数从根路径为 assets 文件夹中的资源提供服务。

即文件作为资源从类路径加载。然后你只需要正确设置服务的类路径。

使用默认配置，这意味着您需要调用文档 root `assets`，并将文档根目录的父文件夹放在类路径中。然后，例如，`assets/foo.html`将在

```
http://localhost:8080/assets/foo.html 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-30T09:59:29.577

`dropwizard-configurable-assets-bundle`在官方 dropwizard-bundles 中有一个最新的维护。你可以在 github [https://github.com/dropwizard-bundles/dropwizard-configurable-assets-bundle](https://github.com/dropwizard-bundles/dropwizard-configurable-assets-bundle)找到它。当前版本支持 dropwizard 0.9.2

这可用于从任意文件系统路径提供静态文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T17:09:24.693

绝大多数提供静态内容的网站都是通过专用的网络服务器，或者更大规模的[CDN](http://en.wikipedia.org/wiki/Content_delivery_network#Free_CDNs)来实现的。

有时，您可能希望将应用程序部署为一个独立的单元，其中包含 Dropwizard 的所有资产。

可以让 Dropwizard 从类路径外部提供资产，但最简单的方法是编写您自己的资产端点，该端点从外部配置的文件路径中读取。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-12T13:58:29.123

为了补充 craddack 的回答：正确，只要将资产添加到类路径中，就可以使用常规 AssetsBundle。如果你使用 gradle 和 oneJar，你可以在 oneJar 任务的类路径中添加一个目录：

```
task oneJar(type: OneJar) {
  mainClass = '...'
  additionalDir = file('...')
  manifest {
    attributes 'Class-Path': '.. here goes the directory ..'
  }
} 
```

见[https://github.com/rholder/gradle-one-jar](https://github.com/rholder/gradle-one-jar)

# php - 带空格的字符串值

> ID：14223725
> 
> 赞同：2
> 
> 时间：2013-01-08T20:48:09.967
> 
> 标签：php

我有一个包含此列表的表单：

```
<tr>
  <td>State/Province:   </td>
  <td colspan="3">
     <select style="width:200px" name="state"> 
       <option value="All">All</option>
       <?php for( $i=0;$i<sizeof($states);$i++) { ?>
         <option value=<?php echo($states[$i][0]) ;?>>
           <?php echo( $states[$i][0]) ;?>
         </option> 
       <?php }?>
     </select>
  </td>
</tr> 
```

我的问题是`state`选择何时由两个或多个单词组成的价值。例如，如果我有“New York”这个词：只有“New”这个词存储在`$_POST['state']`.

*   这个错误的原因是什么？
*   如何将所有值存储在我的变量中`$_POST['state']`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T20:49:56.713

围绕价值的报价

```
<option value="<?php echo($states[$i][0]) ;?>">

<option value=New York> // No good
<option value="New York"> // Better 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:50:16.630

你需要环绕

```
<?php echo($states[$i][0]); ?> 
```

带引号。

# java - ArrayList 到数组

> ID：14223729
> 
> 赞同：0
> 
> 时间：2013-01-08T20:48:28.197
> 
> 标签：java, arrays, algorithm, arraylist

如何将此 ArrayList 的值转换为数组？所以它看起来像，

```
String[] textfile = ... ; 
```

值是字符串（文本文件中的单词），并且有超过 1000 个单词。在这种情况下，我不能执行 words.add("") 1000 次。然后我怎样才能把这个列表放入一个数组中？

```
 public static void main(String[]args) throws IOException
    {
        Scanner scan = new Scanner(System.in);
        String stringSearch = scan.nextLine();

        List<String> words = new ArrayList<String>(); //convert to array
        BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));

        String line;
        while ((line = reader.readLine()) != null) {                
            words.add(line);
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T20:50:24.920

您可以使用

```
String[] textfile = words.toArray(new String[words.size()]); 
```

* * *

**相关文件**

*   [`List#toArray(T[])`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:50:24.140

`words.toArray()`应该可以正常工作。

```
List<String> words = new ArrayList<String>();
String[] wordsArray = (String[]) words.toArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:51:53.370

您可以使用 Collection 的 toArray 方法，如下所示

[集合到数组示例](http://www.roseindia.net/java/example/java/util/CollectionToArrayExample.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T20:52:18.780

```
List<String> words = new ArrayList<String>();
words.add("w1");
words.add("w2");
String[] textfile = new String[words.size()];
textfile = words.toArray(textfile); 
```

# iphone - MPMoviePlayerController 和来电

> ID：14223730
> 
> 赞同：1
> 
> 时间：2013-01-08T20:48:28.927
> 
> 标签：iphone, objective-c, ios, ipad, mpmovieplayercontroller

我对 MPMoviePlayerController 有疑问。我用来玩直播。t 旨在在应用程序进入后台时播放，并且一切正常。问题是当它在后台并且我接到来电时。在这种情况下，流会暂停，但不会在通话结束后返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:26:36.620

我曾在我的一个应用程序中使用 MPMoviePlayerviewController 来播放实时音频。

它对我来说工作正常。而且我的流也会暂停并在通话结束后回来。我有

没有任何问题。我正在做一些更改，例如声明会话属性

在我播放视频的代码下面：

```
 NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL]; 
```

# java - Java将xml文件发布到带有身份验证的url

> ID：14223739
> 
> 赞同：0
> 
> 时间：2013-01-08T20:49:23.687
> 
> 标签：java, linux, file, shell

我目前使用下面的 Linux Shell 脚本

```
shell_exec("wget --output-document=/var/www/html/kannel/rresults/".$file.".res --post-file=/var/www/html/kannel/rbilling/".$file." --http-user=user1 --http-password=pass1 --header=\"Content-Type: text/xml\" 77.203.65.164:6011"); 
```

此 shell 脚本使用`wget`来自 linux 的基本身份验证执行 url 并上传文件。

我想将其转换为 java 以便它将：

1.  连接
2.  认证
3.  发布 XML 文件

另外，是否可以进行一次身份验证，然后发布我想要的尽可能多的文件？

更新.....................我尝试了下面的代码

 `````
public class URLUploader {

public static void main(String[] args) throws IOException 
{

    URL url = new URL("http://77.203.65.164:6011");
URLConnection conn = url.openConnection();
conn.setDoOutput(true);

String name = "user";
        String password = "password";

        String authString = name + ":" + password;
        System.out.println("auth string: " + authString);
        byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
        String authStringEnc = new String(authEncBytes);
        System.out.println("Base64 encoded auth string: " + authStringEnc);

conn.setRequestProperty("Authorization", "Basic " + authStringEnc);
OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

writer.write("/var/www/html/kannel/javacode/13569595024298.xml");
writer.flush();
String line;
BufferedReader reader = new BufferedReader(new    InputStreamReader(conn.getInputStream()));
while ((line = reader.readLine()) != null) {
  System.out.println(line);
}
writer.close();
reader.close();

}
} 
```

i tried the code above go the error:

auth string: optiweb:optiweb Base64 encoded auth string: b3B0aXdlYjpvcHRpd2Vi Exception in thread "main" java.io.IOException: Server returned HTTP response code: 500 for URL: 77.203.65.164:6011 at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403) at URLUploader.main(URLUploader.java:32)` 

`有什么问题？`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:54:30.150

您可以为此使用[Apache HttpComponents](http://hc.apache.org/)。

[这是客户端身份验证的示例](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientAuthentication.java)

```
package org.apache.http.examples.client;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

/**
 * A simple example that uses HttpClient to execute an HTTP request against
 * a target site that requires user authentication.
 */
public class ClientAuthentication {

    public static void main(String[] args) throws Exception {
        DefaultHttpClient httpclient = new DefaultHttpClient();
        try {
            httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("localhost", 443),
                    new UsernamePasswordCredentials("username", "password"));

            HttpGet httpget = new HttpGet("https://localhost/protected");

            System.out.println("executing request" + httpget.getRequestLine());
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());
            if (entity != null) {
                System.out.println("Response content length: " + entity.getContentLength());
            }
            EntityUtils.consume(entity);
        } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();
        }
    }
} 
```

[这是一个上传的例子](http://radomirml.com/2009/02/13/file-upload-with-httpcomponents-successor-of-commons-httpclient)

```
public void testUpload() throws Exception {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(myUploadUrl);

    MultipartEntity reqEntity = new MultipartEntity(
        HttpMultipartMode.BROWSER_COMPATIBLE);

    reqEntity.addPart("string_field",
        new StringBody("field value"));

    FileBody bin = new FileBody(
        new File("/foo/bar/test.png"));
    reqEntity.addPart("attachment_field", bin );

    httppost.setEntity(reqEntity);

    System.out.println("executing request " + httppost.getRequestLine());
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity resEntity = response.getEntity();

    if (resEntity != null) {
        String page = EntityUtils.toString(resEntity);
        System.out.println("PAGE :" + page);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:56:25.767

您需要在请求中提供正确的 http 基本身份验证标头。在 Java 中，您可以通过对 username:password 进行编码并将其与您的请求一起传递来完成此操作：

```
URL url = new URL(urlString);
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
conn.setRequestProperty ("Authorization", Base64.encode(username+":"+password));

OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

writer.write(data);
writer.flush();
String line;
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
while ((line = reader.readLine()) != null) {
  System.out.println(line);
}
writer.close();
reader.close(); 
```

其中“数据”包含您要发布到服务器的内容。``

# python - 创建一个支持 Django 和 Pyramid 的 Python 库

> ID：14223743
> 
> 赞同：2
> 
> 时间：2013-01-08T20:49:45.327
> 
> 标签：python, django, shared-libraries, pyramid

我目前有三个记录错误的库。一种用于 Django，一种用于 Pyramid，另一种用于纯 Python。他们目前都有单独的实现来做同样的事情，以特定的方式记录错误和消息。

我想将它们全部整合到一个库中，这样新功能就不必在三个独立的库中重复。用户只需要安装一个库，然后就可以选择是否需要 Django 或 Pyramid 支持。

一种解决方案是将 Django 和 Pyramid 代码粘贴到纯 Python 库中，并让两个 Web 框架共享相同的日志记录代码。另一种解决方案是将 Web 框架保存在单独的库中，但去掉日志实现，并放入普通的 Python 库中，使其成为依赖项。

这样做的推荐方法是什么？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T01:46:01.313

将所有库中通用（并且可以通用）的所有代码分解出来。然后，如果需要，创建特定于每个框架的子模块，这些子模块与它们的各种特性和习惯用法相关联。

看看[乌鸦](http://raven.readthedocs.org/en/latest/)。他们正是这样做的（而且他们也是一个日志发送库！）

# javascript - 使用正则表达式检查时间

> ID：14223745
> 
> 赞同：0
> 
> 时间：2013-01-08T20:49:47.947
> 
> 标签：javascript, jquery, html

我有以下功能：

```
 function calcTotal(event)
    {var myId = event.currentTarget.id;

    myId = myId.replace(/[^0-9]/g, '');

    var timeRegex = /^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;

    if($('#start'+myId).val().match(timeRegex) && $('#end'+myId).val().match(timeRegex) &&    $('#pause'+myId).val().match(timeRegex))
    {   alert('win');
        var minutes = 0;

        var n = $('#end'+myId).val().split(':');
        minutes = parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#start'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#pause'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var hours = Math.floor(minutes/60);
        minutes = minutes % 60;
        alert(hours + ':' + minutes);
        $('#total' + myId).val(hours + ':' + minutes);
    }
    else
    {   alert('fail');
        $('#total' + myId).val('00:00');
    }

    }   
   </script> 
```

让我们假设 myID 等于 1 并且让我们假设以下值：

```
start1 = 00:00
end1 = 10:00
pause1 = 02:00 
```

我想让这个函数将前三个值与正则表达式匹配，以确定它们是否是有效时间。之后我想计算当天的总工作时间：end1-start1-pause1。出于某种原因，即使有这些正确的值，该函数也永远不会进入 if(....){ alert('win')...}。

我认为我的正则表达式有问题，但我已经检查过（[stackoverflow question](https://stackoverflow.com/questions/7536755/regular-expression-for-matching-hhmm-time-format/ "堆栈溢出问题")）并使用了那个正则表达式。

谁能告诉我我做错了什么？

整个代码：

```
<?php
if(isset($_POST['date']))
{       $sql = "INSERT INTO `hour_administration`.`hours` (`h_id`, `date`, `start`, `end`) VALUES";
    foreach($_POST['date'] as $k => $v)
    {
        if(empty($_POST['date'][$k]))
        break;
        if($k > 0)      
        $sql .= ",";        
        $sql .= "(NULL, '".$_POST['date'][$k]."',  '".$_POST['start_time'][$k].":00',  '".$_POST    ['end_time'][$k].":00')";

    }
    $sql .= ";";
    echo " Query: ".$sql. "</BR>";
    mysql_query($sql) or die('Could not query: ' . mysql_error());
}

if(isset($_POST['rows']))
{
    $rows = $_POST['rows'];
}else
{
$rows = 5;  
}

?>
<script>
$(document).ready(function() { 

    $( ".date" ).datepicker({ dateFormat: "yy-mm-dd" });
    $(".time").mask("99:99");           
    $('.start_time').change(function(e) {               
            calcTotal(e);

    });

    $('.end_time').change(function(e) {     
        calcTotal(e);

    });

    $('.pause').change(function(e) {        
        calcTotal(e);

    });
});

function calcTotal(event)
{   var myId = event.currentTarget.id;  
    myId = myId.replace(/[^0-9]/g, ''); 

    var timeRegex = /^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;

    if($('#start'+myId).val().match(timeRegex) && $('#end'+myId).val().match(timeRegex) && $('#pause'+myId).val().match(timeRegex))
    {   
        var minutes = 0;

        var n = $('#end'+myId).val().split(':');
        minutes = parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#start'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var n = $('#pause'+myId).val().split(':');
        minutes -= parseInt(n[0])*60 + parseInt(n[1]);

        var hours = Math.floor(minutes/60);
        minutes = minutes % 60;
        alert(hours + ':' + minutes);
        $('#total' + myId).val(hours + ':' + minutes);
    }
    else
    {   alert($('#start'+myId).val());
        $('#total' + myId).val('00:00');
    }

}   
   </script>

<div class="inner_container">
  <form name="input" method="POST" id="input">
    <table border="1">
      <tr>
        <td>Date</td>
        <td>Start time</td>
        <td>End time</td>
        <td>Pause</td>
        <td>Total</td>
      </tr>
      <tr>
        <?php for($i = 0;$i < $rows;$i++)
        {?>
        <td><input type="text" class="date" name="date[]" id="start<?php echo $i;?>"></td>
        <td><input type="text" class="start_time time"  name="start_time[]" id="start<?php echo $i;?>"></td>
        <td><input type="text" class="end_time time" name="end_time[]" id="end<?php echo $i;?>" ></td>
        <td><input type="text" class="pause time" name="pause[] " id="pause<?php echo $i;?>"></td>
        <td><input type="text" class="total" name="total[]" id="total<?php echo $i;?>"></td>
      </tr>
      <?php }?>
    </table>
    <input type="submit" id="submit_inner_container"value="Submit">
  </form>
  <form name="amount" method="POST">
    <label for="name">How many rows would you like?</label>
    <input type="text" name="rows" size="3" id="rows" value="<?php echo $rows; ?>"/>
    <input type="submit" value="Rows"
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:59:07.390

您的 HTML 显示您有两个具有相同`id`属性的输入字段：

```
 <td><input type="text" class="date" name="date[]" id="start<?php echo $i;?>"></td>
    <td><input type="text" class="start_time time"  name="start_time[]" id="start<?php echo $i;?>"></td> 
```

这里的第一个应该使用“日期”而不是“开始”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:57:40.627

```
var timeRegex = /^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;

timeRegex.test('00:00') // true
timeRegex.test('10:00') // true
timeRegex.test('02:00') // true 
```

这意味着您的问题与正则表达式无关，我认为该`if`语句没有问题。问题必须与选择器或文本框中的值有关。我会在`val`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:05:24.857

正则表达式工作正常。

看到这个[jsfiddle](http://jsfiddle.net/stevejpurves/2LwDg/)

```
var timeRegex = /^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;
var start = "00:00"
var end = "10:00"
var pause = "02:00"

if(start.match(timeRegex) && end.match(timeRegex) && pause.match(timeRegex))
{   
  alert('win');
}
else
{   
  alert('fail');
} 
```

如果您想要更多答案，请发布您的选择器正在访问的 HTML 代码

# android - 启动 Android 默认 Web 浏览器后处理返回点击

> ID：14223746
> 
> 赞同：1
> 
> 时间：2013-01-08T20:49:50.067
> 
> 标签：android, android-intent, android-activity, browser, uri

从我的 Android 应用程序中，我希望启动默认网络浏览器以将用户发送到验证网页，然后在验证后使用回调将它们发送回我的应用程序。

我的功能工作正常，但我遇到的困难是拦截用户决定他们不想在网络浏览器中验证自己并单击后退按钮返回我的应用程序的情况。

我尝试使用 startActivityForResult() 启动 Web 浏览器，这样我就可以使用 onActivityResult() 拦截返回点击，但由于某种原因，在启动 Web 浏览器后会立即调用 onActivityResult()，而在用户单击返回时根本不会调用。

这是一些演示问题的基本测试代码：

```
public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Log.i("MainActivity","onCreate called");

        Uri uri = Uri.parse("http://www.google.com");

        Intent intent = new Intent(Intent.ACTION_VIEW,uri);

        startActivityForResult(intent,101);

        Log.i("MainActivity","startActivityForResult called");
    }

    @Override
    public void onResume()
    {
        super.onResume();

        Log.i("MainActivity","onResume called");
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        Log.i("MainActivity","onActivityResult called");
    }
} 
```

运行此代码后的输出：

```
I/MainActivity(545): onCreate called
I/MainActivity(545): startActivityForResult called
I/MainActivity(545): onResume called
I/MainActivity(545): onActivityResult called
I/MainActivity(545): onResume called 
```

然后，如果用户从 Web 浏览器单击返回，它只是第三次调用 onResume()。

因此，鉴于此，有人对我如何识别用户何时从浏览器返回有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:13:07.567

试试这个怎么样：

```
@Override
public void onWindowFocusChanged(boolean hasFocus)
{
    super.onWindowFocusChanged(hasFocus);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-30T05:48:25.743

您的日志的原因是：

1.  你从 打来 `startActivityForResult(intent,101);`的`onCreate()`。`onResume()`生命周期方法通常紧随其后`onCreate()`，这就是为什么您会看到第一个`onResume()`

2.  浏览器总是在一个新任务中打开，所以`onActivityResult()`会立即被调用，结果代码`RESULT_CANCELLED`

3.  回来后，您的活动再次可见，您将`onResume()`在日志中看到

# android - Android 4.2 开发者设置仍然不可用

> ID：14223748
> 
> 赞同：19
> 
> 时间：2013-01-08T20:49:58.943
> 
> 标签：android, android-4.2-jelly-bean

[当 Android 4.2 开发者网站](http://developer.android.com/about/versions/jelly-bean.html#42-dev-options)上规定的方法不起作用时，如何访问 Android 4.2 的开发者设置？

我按照 Nexus 7 平板电脑上的说明进行操作。我转到**Settings** > **About tablet**，滚动到屏幕底部，然后单击**Build Number** 7 次。我收到了“恭喜，您现在是开发人员”的消息。但显然，我仍然不是一个。

我检查了**设置**并一直向下滚动到底部，但没有可用的开发人员选项。我重置平板电脑并重新启动它，但没有任何结果。当我再次单击**内部版本号**时，它显示“不需要，您已经是开发人员了”。

**更新：**

其他可能是个问题的东西。有两个平板电脑用户帐户。我用来访问开发者设置的帐户是第二个。第一个帐户可能未设置为开发人员。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T08:53:08.317

我昨天遇到了同样的问题。打开开发者模式时，**只有初始用户（或所有者）在设置菜单中显示开发者选项。**

为您的初始用户打开开发者模式，您应该能够看到开发者选项。

我想知道为什么辅助用户不能处于开发者模式。

**编辑：** 我现在在开发人员模式下使用辅助用户并从 Eclipse 运行我的项目工作得很好！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-02T17:23:07.690

好的，我遇到了同样的问题，但是，我之前使用过这个完全相同的设备进行开发。

就我而言，问题在于每个用户帐户都有自己的“安装”您的发布（或调试）APK。

Android 显然会“引用”该应用程序并实际将程序包保留在系统上，直到您为每个帐户单独卸载。

完成此操作后，我能够在备用帐户上毫无问题地进行调试。

所以，是的，您可以在 Android 上使用第二个帐户调试您的应用程序，只需注意安装在不同帐户（发布与调试）中的应用程序实例不能共存！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T09:01:15.657

我安装了 Lollipop 并创建了第二个用户。

最终我也遇到了同样的问题，但有一个非常简单的解决方法/缺陷。

从 android studio 转到主帐户，像往常一样运行应用程序。

转到第二个帐户，该应用程序就在那里。继续并启动或调试并继续工作:)

# wordpress - 在循环外获取 WordPress 自定义字段内容

> ID：14223752
> 
> 赞同：0
> 
> 时间：2013-01-08T20:50:20.257
> 
> 标签：wordpress, custom-post-type, custom-fields

我尝试遵循 WordPress Codex 以及此处和 WordPress 上示例的几种不同变体。几个不同的功能。从我读过的所有内容来看，我应该有多种工作方式，但我无法获得这个简单的代码来访问循环外自定义帖子类型的自定义字段的内容。

```
<ul>
<?php
global $post;
$snr1l = get_post_meta($post->ID, "show_nav_red_1_link", true);
$snr1t = get_post_meta($post->ID, "show_nav_red_1_title", true);
echo '<li><div class="image"><a href="' . $snr1l . '">' . $snr1t . '</a></div><div style="clear:both"></div></li>';
?>
<ul> 
```

我对它们的部分使用了“更多类型”和“更多字段”，我已经验证我正在获取帖子 ID，并且我已经验证了字段 slugs/indexes。

我错过了什么吗？（我一直到凌晨 5 点才试图让它工作，所以它可能是脑雾）

我将不胜感激任何建议。

# msbuild - MSBuild + 属性范围

> ID：14223753
> 
> 赞同：1
> 
> 时间：2013-01-08T20:50:21.380
> 
> 标签：msbuild, msbuild-propertygroup

我在 .csproj 文件中定义一个属性

```
 <PropertyGroup>
<ProjectGuid>{3099AE33-98E7-4018-B0C3-4C3A37A6D56E}</ProjectGuid>
<OutputType>Exe</OutputType>
<!-- Property for CASI Dev Build location -->
<AppRoot>$(INETROOT)\target\distrib\$(BuildType)\$(BuildArchitecture)\CASI_Dev</AppRoot>
<DeploymentBranch>Dev</DeploymentBranch> 
```

我也有一个参考项目：说

```
<ItemGroup>
<ProjectReference Include="$(INETROOT)\refproj.csproj">
  <Project>{F73278A5-AB7E-4FFD-8592-F135E7DB06F2}</Project>
  <Name>RemoteProj</Name>
</ProjectReference> 
```

是否有某种方法可以访问引用项目中的属性 $(DeploymentBranch) 或 $(AppRoot)，即在文件 refproj.csproj 中。

如果我现在尝试访问它们，则值为空白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:23:59.440

根据我对 MsBuild 的了解，这是不可能通过“标准”方式实现的。但是您可以使用以下选项来实现它： 1) 在 MSBuild 命令行中传递属性值以构建您的根解决方案： msbuild mySolution.sln /t:Build /p:Configuration=...;Platform=...;DeploymentBranch= ...;AppRoot=...

2）在您的 refproj.csproj 中，您可以导入 main.csproj 。但请记住路径的“相对性”，并且 main.csproj 可能会覆盖您的 refproj.csproj 属性和目标。

[在此处查看更多信息](http://msdn.microsoft.com/en-us/library/ms171458.aspx)

# c++ - 在 Linux 上使用带有 g++ 的 RWTValHashMap 的奇怪问题

> ID：14223754
> 
> 赞同：1
> 
> 时间：2013-01-08T20:50:21.777
> 
> 标签：c++, linux, g++, rogue-wave

我正在使用 g++ 4.3 和 Rogue Wave 库在 Linux 系统上编写一个简单的测试程序。我在这里面临的问题是可以编译以下代码，但是当我运行它时会在这一行弹出分段错误：_aClasses.insertKeyAndValue(100,1000);

当我使用 aCC 编译器在 HPUX 机器上运行相同的代码时。它运行顺利，这让我感到困惑。那是因为 g++ 初始化静态变量的方式与 aCC 不同吗？有人知道这里发生了什么吗？提前致谢。

A.hxx

```
#include <rw/tvhdict.h>
#include <rw/cstring.h>
#include <rw/rwdate.h>
#include <rw/rstream.h>

using namespace std;

class A
{
   public :
     A();
     static void add();
     struct long_hash {
         unsigned long operator() (const long& x) const { return x;};
     };
     struct long_equal {
         RWBoolean operator() (const long& x, const long& y) const { return x==y;};
     };
   private:
     static RWTValHashMap<long, long, long_hash, long_equal> _aClasses;
}; 
```

A.cxx

```
#include "A.hxx"

RWTValHashMap<long, long, A::long_hash, A::long_equal> A::_aClasses;

A::A()
{
    cout<<"init A"<<endl;
}

void A::add()
{
    _aClasses.insertKeyAndValue(100,1000);
} 
```

B.hxx

```
class B
{
    public:
        B();
}; 
```

B.cxx

```
#include "B.hxx"
#include "A.hxx"

B::B()
{
   A::add();
} 
```

主文件.cxx

```
#include "A.hxx"
#include "B.hxx"

static B c;

int main()  {
    cout<<"main"<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:06:16.383

[未指定](https://stackoverflow.com/questions/1421671/when-are-static-c-class-members-initialized)来自不同翻译单元（本质上是不同的 cpp/cxx 文件）的静态成员的初始化顺序。因此，对于不同的编译器，是否`static B c`首先`RWTValHashMap<long, long, A::long_hash, A::long_equal> A::_aClasses`初始化可能会有所不同，甚至在使用相同的编译器时可能会发生变化。您以前的编译器总是以所需的顺序初始化它们只是运气。

避免这种情况的一种方法是使用[“第一次使用时的构造”](http://www.parashift.com/c++-faq/static-init-order-on-first-use.html)

# html - UiWebView 中的 contenteditable div - 单击完成时不保存新行

> ID：14223757
> 
> 赞同：5
> 
> 时间：2013-01-08T20:50:30.753
> 
> 标签：html, objective-c, cocoa-touch, uiwebview, ios6

我有以下 div `UIWebView`：

```
<div contenteditable="true"></div> 
```

如果用户插入新行（使用可视键盘中的回车键），并且当他完成时他在上一个/下一个/完成的灰色可视键盘中单击完成，它将这些行合并为一行。

我怎样才能避免它？

![编辑时](../Images/1bf227d4e1e34b4195667163785e1cd4.png) ![点击完成后](../Images/e9579c8ee3bba101b6acc9da18c581be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:50:30.413

也许**[这个 JSFiddle](http://jsfiddle.net/9yZZk/4/)**可以揭示您的应用程序中正在发生的事情。如果您在顶部的 DIV（灰色背景颜色）中键入一些行，则作为其`innerHTML`属性的返回值获得的 HTML 代码将首先显示在其`textarea`下方的字段中（包括 HTML 标记格式）。正如您很快就会看到的，它不仅仅是您希望在应用程序中处理的内容（'line one' + CRLF + 'line two'...），而且它还包含将行与行分隔开的 HTML 元素。这就是浏览器能够显示的方式`contenteditable`DIV 就好像它们是“备忘录”类型的控件——通过解析它们的 HTML（这就是浏览器所做的）。这种 HTML 格式的文本也是您的应用程序接收用户提交的文本的方式，您必须决定如何处理这种格式。您可以将它们剥离（我怀疑这是您如何设置该对象的属性，它会为您处理）用`<DIV></DIV>`空格字符替换 HTML 元素等，或者选择（使用您的控件的属性，或在代码中) 以您希望处理的任何方式处理此格式。不过我不熟悉`UIWebView`，您必须自己找到如何检索完整的 HTML 格式的值，这些值要应用于您正在显示的下一个 DIV 元素（或您正在分配新的相同的元素）值）。

更新：在网上搜索`UIWebView`参考后，我实际上偶然发现[了 SO 上的一个相关线程，](https://stackoverflow.com/questions/8474386/uiwebview-with-contenteditable-html-editing-first-responder-handling)该线程显示了如何检索基础 HTML 文档中元素的 innerHTML 值：

```
//where 'wView' is your UIWebView

NSString *webText = [wView stringByEvaluatingJavaScriptFromString:@"document.getElementById('inputDIV').innerHTML"]; 
```

这样，您就可以检索`innerHTML`包含在`contenteditable`您在字符串变量中使用的 DIV 中的整个字符串，`webText`并将其 HTML 格式的文本解析为更适合您需要的任何内容。但请注意，不同的浏览器在按下`contenteditable`时会以不同的方式格式化 DIV `Enter Key`，有些浏览器会返回包含在 new 中的下一行`DIV`，而另一些浏览器可能会将其包含在段落中`P`和/或用 break`<BR>`或`<BR />`, 当一起使用`shift`+移动到时结束行`enter`下一行。在处理输入字符串时，您必须考虑所有这些可能性。请参阅我使用您的组件[编写的 JSFiddle 脚本](http://jsfiddle.net/9yZZk/4/)`UIWebView`以检查适用的格式。

当然，在您的情况下，将您的`contenteditable`DIV 替换为`textarea`将返回更常用格式`\n`的行尾 (CR+LF) 可能会更简单。然而，DIV 更容易设计，因此请选择更适合您需求的。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:40:08.023

我不相信堆栈的objective-c方面有解决方案。标准的 HTML- 元素只提供一个字符串。有可能通过一些 javascript 魔术或类似的东西在 web 端实现。

我的 HTML 技能还没有达到标准，但如果你也控制了这一点，也许将其更改为 textArea 可能会有所帮助？

# google-chrome - VBScript CreateObject 谷歌浏览器

> ID：14223765
> 
> 赞同：6
> 
> 时间：2013-01-08T20:51:05.637
> 
> 标签：google-chrome, scripting, vbscript, google-chrome-devtools

我有这个 VBScript 它工作正常，脚本没有问题，但我想在 Chrome 而不是 IE 中打开它。

我对 VB 脚本非常陌生。有人可以帮帮我吗。

```
WScript.Quit Main

Function Main
  Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
  IE.Visible = True
  IE.Navigate "http://gmail.com"
  Wait IE
  With IE.Document
    .getElementByID("login_username").value = "myuser"
    .getElementByID("login_password").value = "mypass"
    .getElementByID("frmLogin").submit
  End With
End Function

Sub Wait(IE)
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
End Sub

Sub IE_OnQuit
  On Error Resume Next
  WScript.StdErr.WriteLine "IE closed before script finished."
  WScript.Quit
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:58:22.783

这是因为 Chrome 不支持 VBScript。请参阅[http://productforums.google.com/forum/#!category-topic/chrome/give-feature-feedback-and-suggestions/xHWNXByKdhM](http://productforums.google.com/forum/#!category-topic/chrome/give-feature-feedback-and-suggestions/xHWNXByKdhM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-01T06:33:47.050

看看代码。有启动chrome的代码

```
 set WshShell=WScript.CreateObject("WScript.Shell")
   strAnswer = InputBox("Please enter a name for your new file:")
   WshShell.run "chrome.exe"
   WScript.sleep 100
   WshShell.sendkeys "www.google.com" 
   WshShell.sendkeys "{ENTER}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T21:01:37.073

不幸的是，你只能打开一些网址，你不能像在 Internet Explorer 上那样控制它

```
dim objApp : set objApp=createobject("Shell.application")
objApp.Shellexecute"chrome.exe","www.google.com","","", 1 
```

# java - 用户删除该表中的某些信息后，JSP 表消失

> ID：14223766
> 
> 赞同：0
> 
> 时间：2013-01-08T20:51:12.930
> 
> 标签：java, mysql, database, jsp

在这段代码中，当用户添加删除按钮时，raw 正在从数据库中删除，但用户被重定向到空主页，除非他注销并再次登录。我该如何修复代码，以便当他删除某些内容时，整个布局不会消失，而只会消失他删除的行。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<script type="text/javascript">

function del() {
    if (confirm("Do You Want to Delete this Menu?")) {
    } else {
        return false;
    }
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" href="images/style.css" type="text/css"
charset="utf-8" />
</head>
<body>
<%

    menu_slno1 = request.getParameter("menu_slno");
    if (menu_slno1 != null)
        menu_slno = Integer.parseInt(menu_slno1);
    delete_menu = request.getParameter("delete_menu");

    if ("yes".equals(delete_menu)) {
        MenuId = request.getParameter("MenuId");
        x = stmt1
                .executeUpdate("Delete from menu where MenuId="
                        + MenuId);
    }
%>

<center><h2>VIEW MENU</h2></center>

<center><table width="736" height="97" border="1"></center>
    <%
        if (x == 1) {
    %>
    <tr bgcolor="gray">
        <th height="35" colspan="9"><div align="center">
                Menu deleted successfully!
            </div></th>
    </tr>
    <%
        }
    %>
    <tr bgcolor="gray">
        <td><div align="center">
                <strong>Menu ID</strong>
            </div></td>
        <td><div align="center">
                <strong>Name </strong>
            </div></td>
        <td><div align="center">
                <strong>Info</strong>
            </div></td>
        <td><div align="center">
                <strong>Price</strong>
            </div></td>
        <td colspan="2"><div align="center">
                <strong>Action</strong>
            </div></td>
    </tr>
    <%

     String sUserID=request.getParameter("username");
      session.setAttribute("username", sUserID);
        int icount = 0;
        rs = stmt.executeQuery("SELECT menu.menuID, menu.name, menu.info, menu.price, menu.RestaurantID  FROM menu INNER JOIN clients ON menu.username = clients.username where menu.username='" +sUserID+ "'");

        while (rs.next()) {
            //menu_slno = rs.getInt("menu_slno");
            MenuId = rs.getString("MenuId");
        %>
    <tr>
        <td><div align="center"><%=++icount%></div></td>

        <td><%=rs.getString("Name")%></td>
        <td><%=rs.getString("Info")%></td>
        <td><%=rs.getDouble("Price")%></td>

        <td><div align="center">
                <a href="edit_menu.jsp?MenuId=<%=MenuId%>">Edit</a>
            </div></td>
        <td><div align="center">
                <a
                    href="view_menu.jsp?delete_menu=yes&MenuId=    <%=MenuId%>&MenuId=<%=MenuId%>"
                    onclick="return del()">Delete</a>
            </div></td>
    </tr>
    <%
        }
    %>
</table>
<a href="add_menu.jsp">Add Menu</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:35:26.817

当用户点击**删除**链接时，该`username`参数未在 URL 中设置。因此，当页面刷新时，`String sUserID=request.getParameter("username");`调用返回`null`或为空，然后页面的其余部分不显示，因为以下 SQL 查询没有返回有效用户名。

似乎您只需要在`&username=<%=sUserID%>`删除链接中添加类似内容即可使其正常工作：

```
<a href="view_menu.jsp?delete_menu=yes&MenuId=<%=MenuId%>&username=<%=sUserID%>" onclick="return del()">Delete</a> 
```

PS：我假设这是一个遗留的 JSP，你别无选择，只能继续使用这些丑陋的代码。如果您有选择，我强烈建议您放弃那些 scriptlet 和这种全视图架构，并开始使用 JSTL 标记、servlet 和 bean。

# ruby-on-rails - has_many 用户和事件... Rails 3.2

> ID：14223767
> 
> 赞同：0
> 
> 时间：2013-01-08T20:51:13.560
> 
> 标签：ruby-on-rails, has-many-through, has-and-belongs-to-many

我看了又看……这对我来说还没有意义。不知道什么时候用`has_and_belongs_to_many`vs`has_many through:`

所以，日历。用户创建事件。受邀的一些人可以查看活动（通过与此处无关的关系模型），如果他们选择参加活动，他们将“获得”活动的所有权。所以，一个用户可以有很多事件，一个事件可以有很多用户。

用户...

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  has_many :attendances
  has_many :events, through: :attendances

  #some other stuff for relationships and validations 
```

出席...

```
class Attendance < ActiveRecord::Base
  attr_accessible :event_id, :user_id

  belongs_to :event
  belongs_to :user

  #some other stuff for validations 
```

活动...

```
class Event < ActiveRecord::Base
  attr_accessible :what, :where, :date, :why

  has_many :attendances
  has_many :users, through: :attendances

  #some other stuff for validations 
```

和事件控制器...

```
class EventsController < ApplicationController
  before_filter :signed_in_user, only: [:create, :destroy]

  def create
    @event = current_user.events.build(params[:event])
    if @event.save
      flash[:success] = "Event created!"
      redirect_to root_url
    else
      @feed_items = []
      render 'pages/home'
    end
  end 
```

events_users 表存在。里面只有两列。

当我创建一个事件时，它会成功创建，但它没有附加到创建它的用户。它没有附加到任何用户，并且 events_users 表是空白的。

**我错过了什么？** 我应该使用`has_many through:`吗？

# asp.net - Gridview 使用 Boundfield onclick 事件

> ID：14223768
> 
> 赞同：3
> 
> 时间：2013-01-08T20:51:15.120
> 
> 标签：asp.net, gridview

我正在使用一个网格视图，我希望能够单击每一行以显示我正在显示的对象中的另一个字段。感觉很容易解决，但也许我很愚蠢，因为我在任何地方都找不到它......

ASP代码：

```
<asp:GridView ID="gvMessages" runat="server" AutoGenerateColumns = "false" 
    CaptionAlign="NotSet" CellPadding="5">
    <Columns>
        <asp:BoundField HeaderText="Avsändare" DataField="Sender" />
        <asp:BoundField HeaderText="Ämne" DataField="Head" />
    </Columns>
</asp:GridView> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
    {
        gvMessages.DataSource = con.GetMails(con.GetId(Membership.GetUser().UserName));
        gvMessages.DataBind();
    } 
```

不确定所有这些对于问题来说都是必要的，但这是我的 wcf 项目中的方法，它用对象信息填充我的复合类

```
public List<MailInfo> GetMails(int id)
    {
        using (var client = new datingEntities())
        {
            var result = client.Mail.Where(x => x.SentTo == id).Select(x => new MailInfo
            {
                Message = x.Mail1,
                Reciever = x.SentTo,
                Read = (bool)x.IsRead,
                Sender = (int)x.SentFrom,
                Head = x.Subject
            }).ToList();
            return result;
        }
    } 
```

复合类：

```
[DataContract]
public class MailInfo : Mail
{
    [DataMember]
    public string Message { get; set; }
    [DataMember]
    public int Reciever { get; set; }
    [DataMember]
    public bool Read { get; set; }
    [DataMember]
    public int Sender { get; set; }
    [DataMember]
    public string Head { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:55:15.573

您应该数据绑定`GridView`唯一的`if(!Page.IsPostBack)`.

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        gvMessages.DataSource = con.GetMails(con.GetId(Membership.GetUser().UserName));
        gvMessages.DataBind();
    }
} 
```

如果您想在点击时选择一行，您可以使用 javascript：

```
protected void gvMessages_RowCreated(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow) {
        e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
        e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
        e.Row.ToolTip = "Click to select row";
        e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
    }
} 
```

现在，您可以[`SelectedIndexChangedEvent`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged%28v=vs.110%29.aspx)在用户单击行中的某处时处理：

```
protected void gvMessages_SelectedIndexChanged(Object sender, EventArgs e)
{
    // Get the currently selected row using the SelectedRow property.
    GridViewRow row = CustomersGridView.SelectedRow;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:56:05.137

您应该使用该`OnSelectedIndexChanged`事件。

```
<asp:GridView ID="gvMessages" runat="server" AutoGenerateColumns = "false" 
    OnSelectedIndexChanged="gvMessages_SelectedIndexChanged"  
    CaptionAlign="NotSet" CellPadding="5">
    <Columns>
        <asp:BoundField HeaderText="Avsändare" DataField="Sender" />
        <asp:BoundField HeaderText="Ämne" DataField="Head" />
    </Columns>
</asp:GridView> 
```

然后在事件的定义中，您可以检索所选项目并从那里执行您需要的任何操作。

```
protected void gvMessages_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ContactsGridView.SelectedIndex >= 0)
       ViewState["SelectedKey"] = gvMessages.SelectedValue;
    else
       ViewState["SelectedKey"] = null;
} 
```

示例来自[MSDN 官方文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onselectedindexchanged.aspx)。

# php - 将当前 HTML 与 PHP AJAX 调用返回的数据进行比较

> ID：14223773
> 
> 赞同：0
> 
> 时间：2013-01-08T20:51:40.607
> 
> 标签：php, jquery, ajax, string-comparison

我在将页面上的当前列表项与通过 PHP AJAX 刷新检索到的列表项进行比较时遇到问题。如果有新项目，我只希望该框刷新。

PHP 返回一堆格式化的 HTML 列表项。

```
<ul class="socialFeed twitterFeed">
    <script type="text/javascript">
        $(function() {
            refreshTweets();
        });
        function refreshTweets() {
            $.get("php/tweets.php", function(data){
                var current = $(".socialFeed.twitterFeed").html();
                if(current != data) {
                    $(".socialFeed.twitterFeed").hide().html(data).fadeIn();
                }
            });
        }
        setInterval("refreshTweets()", 2000);
    </script>
</ul> 
```

我无法弄清楚为什么字符串比较不起作用。我错过了一些东西，但我不确定是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:57:20.963

尝试这个：

```
<ul class="socialFeed twitterFeed">
    <script type="text/javascript">
        var current;
        $(function() {
            refreshTweets();
        });
        function refreshTweets() {
            $.get("php/tweets.php", function(data){
                if(current != data) {
                    current = data;
                    $(".socialFeed.twitterFeed").hide().html(data).fadeIn();
                }
            });
        }
        setInterval(refreshTweets, 2000);
    </script>
</ul> 
```

# ios6 - 你如何用 UITextField 的元素“做数学”？

> ID：14223780
> 
> 赞同：0
> 
> 时间：2013-01-08T20:52:03.730
> 
> 标签：ios6, nsstring, uitextfield, xcode4.5, ibaction

首先，如果这是一个相当简单的问题，我深表歉意，但我是编程新手。基本上我想要做的是有两个 UITextField，在其中输入一个数字，然后按一个按钮，在第三个 UITextField 中显示前两个 UITextField 的总和。这可能吗？基本上我只需要知道如何定义添加按钮的 IBAction 方法。这是“我在想”的内容，但它不起作用，因为您不能对字符串值进行数学运算。

-（IBAction）添加字段{

```
 textfield3.text = textfield1.text + textfield2.text; 
```

}

再次抱歉，如果这是一个简单的问题，但非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:56:09.927

这可能会奏效。它会将您输入到两个文本字段的值添加到您的第三个文本字段。

```
-(IBAction)addFields
{

   textfield3.text = [NSString stringWithFormat:@"%i",( [textfield1.text intValue] + [textfield2.text intValue] ) ];

{ 
```

您必须记住的一件事是您不能使用字符串值进行计算，您需要整数、双精度值等等。

# sql-server - 是否可以在查询分析器中为“编辑前 200 行”修改默认 SQL？

> ID：14223782
> 
> 赞同：1
> 
> 时间：2013-01-08T20:52:13.213
> 
> 标签：sql-server, query-analyzer

如果我想编辑底部 200 行或自定义查询，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:56:37.103

您应该能够执行以下操作：

1.  加载带有编辑 200 行的查询窗口
2.  从查询设计器菜单 > 窗格 > SQL 或使用查询设计器工具栏中的 SQL 按钮
3.  将查询编辑为您想要的行数或按 ID 排序等
4.  执行新查询，窗口将被刷新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:57:04.853

当您单击“编辑前 200 行”时，右上角有一个显示“SQL”的按钮，当您单击该按钮时，您可以编写自定义查询。

[![SQL 窗格按钮的屏幕截图](../Images/6b7a883b86bac667b49aa5f12977b85f.png)](https://i.stack.imgur.com/ng4oI.png)

*如果您想要编辑 TOP n rows*的默认值，您可以转到“工具->选项->SQL Server 对象资源管理器”并在那里编辑 200。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T20:56:29.923

我不确定查询分析器，但在 Management Studio 中，您可以右键单击并选择窗格 > SQL 来查看/编辑使用的 SQL 查询

# joomla - Ĵ！选择横幅图像时没有响应

> ID：14223787
> 
> 赞同：0
> 
> 时间：2013-01-08T20:52:23.570
> 
> 标签：joomla, joomla2.5

我遇到了一个奇怪的问题：

创建新文章时，我单击图像按钮会出现一个弹出窗口，但它没有显示任何允许图像上传的内容，它只是挂在那里。当我尝试在横幅管理器中选择图像时，也会发生同样的事情。

我尝试过使用不同的浏览器和不同的位置......

知道会发生什么吗？

# spring - 来自文件的 Spring 环境属性

> ID：14223788
> 
> 赞同：4
> 
> 时间：2013-01-08T20:52:24.727
> 
> 标签：spring, config

我试图弄清楚如何将属性文件的值放入我的 Spring Environment 属性中。

Spring 3.1 之前的做法是这样的：

```
 <context:property-placeholder location="classpath:my.properties" />

  <bean id="myBean" class="com.whatever.MyBean">
    <property name="someValue" value="${myProps.value}" />
    <!-- etc -->
  </bean> 
```

我也可以这样做：

```
public class MyBean {

   @Value(value = "#{myProps.value}")
   private String someValue;

} 
```

现在我表面上可以从 Environment 类中提取属性，与在我的 xml 或我的 bean 本身中使用笨拙的 #{myProps.value} 语法相比，这似乎是一种更简洁的获取属性的方法。

我在我的 XML 中试过这个：

```
<bean
    class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="location">
        <value>classpath:my.properties</value>
    </property>
</bean> 
```

但是这些属性不会添加到环境中。

我知道我可以使用[PropertySource](https://stackoverflow.com/a/14170198/295797)属性，但我没有使用注释进行配置。

那么如何设置我的 bean / xml 以便在我的道具中设置的变量在环境中可用？此外，我怎样才能将这些值注入到我的 bean 中而不必明确地说“environmentInstance.getProperty(”myProps.value”)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:59:56.740

**For the web applications**

If you want to have Environment populated *before* the XML bean definitions are processed, you should implement a ApplicationContextInitializer(), as described in [the Spring Source blog](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/)

```
<context-param>
    <param-name>contextInitializerClasses</param-name>
    <param-value>com.bank.MyInitializer</param-value>
</context-param> 
```

Here is a slightly modified version of the example from the blog

```
public class MyInitializer implements
        ApplicationContextInitializer<ConfigurableWebApplicationContext> {
    public void initialize(ConfigurableWebApplicationContext ctx) {
        ResourcePropertySource ps;
        try {
            ps = new ResourcePropertySource(new ClassPathResource(
                    "my.properties"));
        } catch (IOException e) {
            throw new AssertionError("Resources for my.properties not found.");
        }
        ctx.getEnvironment().getPropertySources().addFirst(ps);
    }
  } 
```

**For the standalone applications**

Basically the same thing, you can modify the environment of the `AbstractApplicationContext` directly

```
 ResourcePropertySource ps;
   try {
        ps = new ResourcePropertySource(new ClassPathResource(
                        "my.properties"));
   }catch (IOException e) {
                throw new AssertionError("Resources for my.properties not found.");
   }
   //assuming that ctx is an AbstractApplicationContext
   ctx.getEnvironment().getPropertySources().addFirst(ps); 
```

P.S. the earlier version of this answer showed an attempt to modify the Environment from the bean but it seems to be an antipattern spreading on SO, because for sure you would like to have Environment property sources list populated even *before* the `XmlBeanDefinitionReader` starts to process XML to make placeholders work inside the `<import/>` statement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:57:48.263

我的理解也有点混乱，但这是我能理解的：

1.  Environment 是一种指示当前活动配置文件的方法（而配置文件是一种有选择地创建 bean 的方法）
2.  PropertySources 可以与环境相关联，这样做的方法是使用 @PropertySource 注释，似乎没有等效的 xml 来执行此操作。
3.  您的理解实际上应该是相反的，AFAIK：当您声明`<context:property-placeholder`占位符将根据本地声明的属性解析属性并且可以回退到环境中声明的属性源时，环境本身不会被新属性修改。同样，向环境本身添加属性的唯一方法似乎是通过 @PropertySource 注释

# cordova - PhoneGap Cordova 错误

> ID：14223790
> 
> 赞同：0
> 
> 时间：2013-01-08T20:52:43.013
> 
> 标签：cordova

我最近尝试连接到客户端 api，但无法产生响应。客户端服务器通过谷歌浏览器响应，所以我知道互联网连接正常。显然，当我在上周日从 apache cordova 2.1 迁移到最新版本的 adobe phone gap (cordova 2.2) 时，我采用了一种新的安全模型，它不允许对 ipa 文件之外的资产进行 http 请求。

我知道代码在 cordova 2.1 中运行良好，因为我在一周前对其进行了测试。任何见解、参考或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:57:03.480

检查您的`ExternalHosts`财产`Phonegap.plist`。

如果您的主机不存在，请尝试添加它，`*`如果您想允许所有传出连接，请尝试添加。

# css - 没有javascript的CSS居中元素

> ID：14223791
> 
> 赞同：4
> 
> 时间：2013-01-08T20:52:44.540
> 
> 标签：css

我刚刚遇到了一些事情

```
#element {
    left: 50%;
    margin-left: -(elemntwidth/2)px; 
} 
```

是 (elemntwidth/2) 已经是一个像 30px 这样的数字，例如。

我想知道这是否是交叉浏览响应式元素定位的安全方式，所以我可以放弃我现在使用 .jQuery 的方式

```
$('#element').css(left: (screenwidth - element / 2) + 'px'); 
```

最重要的是我对跨移动设备浏览器有效的解决方案感兴趣，并且只有这个 css 我发现它干净简单，如此简单以至于我需要询问这是否是真的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:56:58.133

CSS 框架具有此功能。结帐：[Foundation 3](http://foundation.zurb.com/)

否则，您将需要严重依赖 Javascript 和媒体查询来实现像素完美。

更不用说这是实现跨设备/浏览器稳定元素时遇到的许多问题中的第一个。所有这些事情都已经为您仔细考虑过了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:04:36.133

这是一种方式。对于某些元素，它可以工作，响应式，居中且没有 jQuery。

## HTML

```
<div class="element ver1">TESTE</div>
<div class="element ver2">TESTE</div>
<div class="element ver3">TESTE</div>
<div class="element ver4">TESTE</div> 
```

## CSS

```
.element {
     position: relative;
     width: 90%;
     background: black;
     margin: 0 auto 10px;
     text-align: center;
     color: white;
     padding: 20px 0;
}
.ver1{width: 80%;}
.ver2{width: 70%;}
.ver3{width: 60%;}
.ver4{width: 40%;} 
```

## [工作演示](http://jsfiddle.net/ignaciocorreia/7UN3w/)| [最终结果全屏](http://jsfiddle.net/ignaciocorreia/7UN3w/show/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:03:42.563

使用此代码段：

```
.centered {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -(height/2);
  margin-left: -(width/2);
} 
```

即使父尺寸发生变化，这也有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:28:43.517

您拥有的代码将起作用 - 我已经多次使用相同的方法 - 只要您知道要居中的元素的尺寸。

请注意，您可以使用相同的方法使用基于百分比的宽度来更好地处理响应式布局。

你在正确的轨道上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T21:34:41.867

AFAIK 这个解决方案是浏览器兼容的。它甚至比 {margin-left:auto; margin-right:auto;} 在某些情况下。但是以这种方式将 DOM 元素居中还有另一个有趣的点：

例如，如果您的整个页面包装器以 {left:50%,...} 为中心，并且浏览器窗口宽度小于包装器，则您无法通过左右滚动来查看整个内容。浏览器剪切内容。尝试一下...

[尝试左右滚动查看白色的左右边框](http://algorhythm.de/tools/centeredDIV3.html)...

另一个已知的解决方案是设置 {margin-left:auto; margin-right:auto;} 但 afaik 这只能与 {position:relative;} 一起使用 - 而不是与 {position:absolute;}-elements 一起使用

[我开始使用这种非常规的解决方案已经很长时间了](http://algorhythm.de/tools/centeredDIV.html)......

# matlab - 有效地在matlab中打乱nx1矩阵？

> ID：14223797
> 
> 赞同：3
> 
> 时间：2013-01-08T20:53:07.273
> 
> 标签：matlab

我需要在matlab中随机打乱nx1矩阵的值。我不确定如何有效地执行此操作，我需要多次执行 n > 40,000。

例子

之前的矩阵：

1 2 2 2 3 4 5 5 4 3 2 1

乱码：

3 5 2 1 2 2 3 4 1 4 5 2

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T21:11:07.833

如果您的数据存储在 matrix 中，那么您可以使用[randperm](http://www.mathworks.com/help/matlab/ref/randperm.html)`data`生成“加扰”数据，如下所示：

```
scrambled = data(randperm(numel(data))); 
```

*这是无*放回抽样，因此 中的每个值`data`都会在 中出现一次`scrambled`。

*对于带*替换的采样（中的值`data`可能出现`scrambled`多次，有些可能根本不出现），您可以这样使用`randi`：

```
scrambled = data(randi(numel(data),1,numel(data))); 
```

# ssrs-2008 - 如何在 SSRS 中增加条形图的宽度

> ID：14223799
> 
> 赞同：5
> 
> 时间：2013-01-08T20:53:12.690
> 
> 标签：ssrs-2008

如何在 SSRS 中增加条形图的宽度，我们还希望线之间有间隙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:49:21.213

选择图表系列。在“属性”窗格中，导航到 CustomAttributes / PointWidth。调整以适应例如 0.9 将产生比默认值稍宽的条形图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-01T23:29:55.660

1.  突出显示要更改宽度的栏。 ![在此处输入图像描述](../Images/a8a5c982cc7fda56dd4c8a0c6d3832cc.png)
2.  转到菜单视图 -> 单击属性窗口或按 F4 按钮

3.  在属性窗口中，在 CustomAttributes 下找到 PointWidth 并更改它。如果此值大于 1，则条形将重叠。如果它小于 1，它将改变条的宽度。

![在此处输入图像描述](../Images/29d8a0f8befe0749faeb7e3d883ff2af.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-22T21:00:51.440

如果它有帮助，并且我知道这已经过了发布日期，您可以添加一个额外的系列，然后将系列属性填充选项设置为白色。这将在其他列之间显示一个空间

# iphone - iphone开发：如何继承多个类？

> ID：14223802
> 
> 赞同：0
> 
> 时间：2013-01-08T20:53:19.207
> 
> 标签：iphone, objective-c, ios, inheritance, protocols

> **可能重复：**
> [Objective-C 多重继承](https://stackoverflow.com/questions/4192203/objective-c-multiple-inheritance)

在我的 iPhone 应用程序中，我想使用 googleAnalytics，但问题是我必须从 Google 提供的 GAITrackedViewController 继承。问题是我已经扩展了 GLKViewController 并且objective-c 不允许多重继承。一些主题建议使用协议。我对它们一无所知，我以前从未使用过它们，但我认为为时已晚，因为我已经设计并实施了我的项目。我能做什么？有没有解决这类问题的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:59:19.887

多重继承很少是一个好主意。

实现多种协议。阅读 Objective-C 关于协议的介绍，它们类似于 java 接口。

如果这不起作用，因为这两个类不提供协议，您仍然可以使用聚合：定义两个成员，一个用于 glkVieController，另一个用于 gaiTrackedViewController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:27:04.593

Objective C 不支持多重继承。但是通过使用组合、协议和消息转发，您将获得相同的结果。

[您应该在此链接-AppleDoc](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtForwarding.html#//apple_ref/doc/uid/TP40008048-CH105-SW10)上参考苹果文档中的多重继承和消息转发

对于组成检查此[链接](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW15)

对于 Objective C 中的协议，请检查此[链接 Protocol in Objective C](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)

# selenium - Selenium 驱动程序 findElement by.xpath 无法访问表中的最后一列。Selenium RC 代码运行良好

> ID：14223803
> 
> 赞同：0
> 
> 时间：2013-01-08T20:53:28.590
> 
> 标签：selenium, webdriver, selenium-rc

Selenium 驱动程序：表中的最后一列 (th[10]) 未被 driver.findElement By.xpath 访问：

```
driver.findElement(By.xpath("//*[@id='collapseOne_DMTS']/div/table/thead/tr[1]/th[10]")); 
```

我使用代码获取表 (0-10) 中的最后一个 (10th) 元素。代码成功检索到包括元素 9 在内的所有其他元素。
该代码在 Selenium RC 上运行良好：

```
selenium.getText("xpath=//*[@id='collapseOne_DMTS']/div/table/tbody/tr["+(i+1)+"]/td[10]"); 
```

- 表的所有元素都已成功访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:56:48.137

不要连接选择器。使用集合。

```
List<WebElement> columns = webDriver.FindElements(By.xpath("//*@id='collapseOne_DMTS']/div/table/thead/tr[1]/th")) 
```

# linux - LINUX 终端 - Tar：找不到文件。跳过文件？

> ID：14223804
> 
> 赞同：0
> 
> 时间：2013-01-08T20:53:32.143
> 
> 标签：linux, bash, tar, minecraft, region

我有两个问题，都与 linux 终端中的 Tar 相关。为了让您了解我所看到的内容，我在下面发布了指向我的桌面图像的链接。 [http://worldofclucky.net/errors/ServerLag/desktop.png](http://worldofclucky.net/errors/ServerLag/desktop.png) [Linux Ubuntu 12.04 桌面 http://wocl.net/errors/ServerLag/desktop.png](http://wocl.net/errors/ServerLag/desktop.png) [1](http://worldofclucky.net/errors/ServerLag/desktop.png)

正如您在左上角的终端上看到的那样，有三个消息：

```
tar: ./Frisnuk/Frisnuk/region/r.0.0.mca: file changed as we read it
tar: ./Frisnuk/server.log: file changed as we read it
ls: cannot access home/clucky/MinecraftServers/.backups/Backup-08-January-2013-15:31.tar.gz: No such file or directory 
```

在前两条消息中，它指出无法读取文件，因为它已更改。该文件已更改，因为有一个服务器在运行时修改内容，这对整体备份不应该是一个问题，因为它们是来自 Minecraft 服务器的区域文件，这些文件可以彼此分开使用。我主要关心的是，它是跳过文件还是重做它们？如果它正在跳过文件，这可能是备份中的主要漏洞，因为有恶意的播放器可能会在备份时故意修改该区域，从而阻止其备份。因此，如果它正在跳过文件，我怎样才能重复它而不必重做整个备份？

在第三条消息中，它指出它无法访问文件*home/clucky/MinecraftServers/.backups/Backup-08-January-2013-15:31.tar.gz*但是，正如您在下面的窗口中清楚地看到的那样它，该文件确实存在。我觉得这很奇怪，特别是因为如果您查看脚本，文件大小检查发生在脚本末尾，在备份发生很久之后。

下面我发布了脚本，以便任何试图帮助我的人都可以轻松修改它：

```
timedate=`date '+%d-%B-%Y-%H:%M'`
echo "-------------- $timedate --------------" >> /home/clucky/MinecraftServers/backup.log
echo "[`date '+%H:%M'`] Starting Minecraft Backup" >> /home/clucky/MinecraftServers/backup.log
nice --adjustment=19 tar -zcpf /home/clucky/MinecraftServers/.backups/Backup-$timedate.tar.gz \
    --directory /home/clucky/MinecraftServers/ \
    --exclude=SkyBlockkit \
    --exclude=Tekkit \
    --exclude=Vanilla \
    --exclude=test \
    --exclude=Zflocco_LP \
    --exclude=Mortuus/plugins/dynmap/web --exclude=Mortuus/plugins/AutoSaveWorld/backups --exclude Mortuus/CraftBukkitVersion --exclude=Mortuus/orebfuscator_cache --exclude=Mortuus/plugins/#Removed --exclude=Mortuus/server.log \
    --exclude=Frisnuk/plugins/dynmap/web --exclude=Frisnuk/plugins/AutoSaveWorld/backups --exclude Frisnuk/CraftBukkitVersion --exclude=Frisnuk/orebfuscator_cache --exclude=Frisnuk/plugins/#Removed --exclude=Frisnuk/plugins/#AwaitingUpdate--exclude=Frisnuk/server.log \
    --exclude=dailybackup.log \
    --exclude=.backups \
    --exclude=backup.log \
    --exclude=backups.log \
    --exclude=backupscript.sh \
    --exclude=dailybackup.sh .
echo "[`date '+%H:%M'`] Finishing Minecraft Backup" >> /home/clucky/MinecraftServers/backup.log
#Purge files 3 days old
echo "[`date '+%H:%M'`] Purging Old Backups" >> /home/clucky/MinecraftServers/backup.log
find /home/clucky/MinecraftServers/.backups* -mmin +4320 -exec rm {} \;
echo "[`date '+%H:%M'`] Purging Complete" >> /home/clucky/MinecraftServers/backup.log
#Read back file size
filesize=$(ls -lah home/clucky/MinecraftServers/.backups/Backup-$timedate.tar.gz | awk '{ print $5}')
echo "     Total Compression Size: $filesize\n" >> /home/clucky/MinecraftServers/backup.log 
```

提前感谢您的帮助，如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:56:34.427

我认为您错过了`home vs /home`这一行中的“/”（）：

```
filesize=$(ls -lah home/clucky/MinecraftServers/.backups/Backup-$timedate.tar.gz | awk '{ print $5}') 
```

不应该是：

```
filesize=$(ls -lah /home/clucky/MinecraftServers/.backups/Backup-$timedate.tar.gz | awk '{ print $5}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T15:20:23.907

如果磁盘空间不是问题，您可以执行 a`cp -ap /home/MinecraftServers /-sometemp-dir`然后从那里进行备份。

您复制的文件在备份期间将保持静态，因为没有进程正在写入它们。这是对实时数据进行 tar 处理时的常见做法。

# objective-c - ios - 将数据传递给另一个方法 - 相同的 viewController

> ID：14223807
> 
> 赞同：1
> 
> 时间：2013-01-08T20:53:42.267
> 
> 标签：objective-c, ios, methods, pass-by-reference, pass-by-value

请将此代码视为示例：

```
-(void)generateConnection
{

    NSString *urlString = @"";

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL: url];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    NSLog(@"%@", connection);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSString *partialData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    [_jsonContentForText appendString:partialData];

    NSLog(@"%@", partialData);
} 
```

真的是因为不知道它叫什么，但是在搜索了很多之后，我无法弄清楚这个过程叫什么。

我需要知道如何`-(void)connection:`从以前的方法中获取所需的信息。我不知道这是否称为将方法传递给另一个方法，但我需要创建另一个，所以我需要知道我可以在哪里学习这个。

请不要给我这样的行：你需要阅读objective-c和一般的东西，因为这些答案不包括我的具体需求。

我不介意阅读它，只要我知道我正在阅读的内容就可以解释这一点。但是，如果有任何好心人很容易解释，我不会拒绝那个提议:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:27:32.980

您需要阅读代表和协议。当您创建`NSURLConnection`并设置`self`为委托时，您的新`NSURLConnection`对象被告知查询`self`（创建它的对象）以执行诸如查找是否支持身份验证，或者当它接收到一些数据时要执行的操作。具体来说`NSURLConnectionDelegate`，如果您的委托实现了[NSURLConnectionDelegate Protocol](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)中定义的方法，它们将被调用。

一些关于委托和协议的好资料是：

*   [使用协议（Apple）](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)
*   [代表和数据源（Apple）](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)
*   [协议和委托的基础知识（移动开发者技巧）](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

# php - Memcache 哈希生成

> ID：14223808
> 
> 赞同：1
> 
> 时间：2013-01-08T20:53:43.033
> 
> 标签：php, hash, memcached

我得到了一个示例脚本，它看起来几乎像这样：

```
$memcache = new Memcache;
$memcache->addServer('memcache_host', 11211);
$memcache->addServer('memcache_host2', 11211); 
```

如果我现在使用

```
$memcache->set('var_key', 'some really big variable'); 
```

当然，密钥获取/值被存储（仅在一台服务器上）。但是当我重新排序 Memcache Serverlist 时，它会重新创建缓存。我注意到它总是使用第二个服务器...但是为什么呢？

我只想知道和理解，存储哈希是如何生成的。哪些因素与哈希和服务器选择相关？

我找不到任何关于。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:37:03.477

答案是：

```
crc32($KEY) % Server.length 
```

所以在我的情况下，我得到了 2 台带有示例密钥“var_key”的服务器。

> crc32('var_key') % 2
> 
> *结果是0。所以第一个服务器是幸运的！*
> 
> crc32('var_key_bit_longer_and_longer') % 2
> 
> *在这种情况下，第二个服务器（结果为 1）被选中。*

**正如我们所看到的，以下因素是相关的：**

*   钥匙
*   服务器数量
*   服务器顺序

对于标准哈希策略，这就是选择服务器的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:15:40.377

我不确定如何实现`hashing algorithm works`客户端库以在密钥上运行 CRC 并对列表中的实例数进行取模以从列表中选择一个实例用于设置/获取

更好的是，您可以`50-50`使用`weight`选项增加每个服务器的更改

```
$memcache = new Memcache;
$memcache->addServer('memcache_host', 11211,true,50);
$memcache->addServer('memcache_host2', 11211,true,50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:33:38.210

查看 Cache::Memcached 的[_hashfunc()](https://metacpan.org/source/DORMANDO/Cache-Memcached-1.30/lib/Cache/Memcached.pm#L841)，它使用键作为唯一参数。

```
sub _hashfunc {
    return (crc32($_[0]) >> 16) & 0x7fff;
} 
```

# java - 递归困境

> ID：14223812
> 
> 赞同：1
> 
> 时间：2013-01-08T20:54:01.793
> 
> 标签：java

我正在尝试创建代码来查找三个用户输入数字的 GCD。我的目标是用输入的数字调用该方法，除以初始化为 1 的 q，仅当余数为零时记录 q，然后确定它是否大于或等于最小数字，如果不是，则增加 q 和召回方法，但如果我想打印出最后记录的最大 q，我做错了什么？我不断收到堆栈溢出错误。

```
public static int recursiveMethod (int x, int y, int z, int q)
{
    int largestVar; 
    int xRes = x % q;
    int yRes = y % q;
    int zRes = z % q;
    if (xRes==0 && yRes ==0 && zRes==0) {
                largestVar = q;
                if (q >= x && q >= y && q >= z)
                {
                    return largestVar;
                }
    }
    else { 
           q++;
    }
   return recursiveMethod(x, y, z, q); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:58:21.140

我注意到的错误之一是您的 if 条件错误：

```
if (q >= x && q >= y && q >= z) 
```

这3个数的GCD都小于等于每一个，所以改成：

```
if (x >= q && y >= q && z >= q) 
```

如果你像这样迭代地测试数字，你应该从某个数字开始倒计时，这样你就可以保证满足条件的数字就是实际的 GCD。并且那个特定的起始数字必须是**最少的 3 个数字。** 您的方法的完整工作版本在这里：

```
public static int recursiveMethod(int x, int y, int z, int q) 
{
    int largestVar;
    int xRes = x % q;
    int yRes = y % q;
    int zRes = z % q;
    if (xRes == 0 && yRes == 0 && zRes == 0) {
        largestVar = q;
        if (x >= q && y >= q && z >= q) {
            return largestVar;
        }
    } else {
        q--;
    }
    return recursiveMethod(x, y, z, q);
} 
```

示例调用：

```
int x = recursiveMethod(30, 60, 45, 30); // x = 15 after this execution. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:02:55.667

不要忘记`gcd(x, y, z) = gcd(gcd(x, y), z).`所以，如果你想要一个更简单的算法，你可以用两个数字实现 gcd，然后为 3 个数字调用该方法。

```
public static int GCD(int x, int y) {
   if (y == 0) return x;
   return GCD(x, x % y);
} 
```

然后是三个数字：

```
public static int GCDfor3 (int x, int y, int z) {
    return GCD(GCD(x, y), z)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:07:30.357

您的第一种情况将是 1，此时`xRes==0 && yRes ==0 && zRes==0`肯定是正确的，并且您将最大变量设置为 1。然后，由于 1 可能小于传入的变量，它继续，不会在 else 块中增加 q，并`recursiveMethod`调用q=1 再次！这个过程会不断重复。

```
public static int recursiveMethod (int x, int y, int z, int q, int largestVar)
{
    int xRes = x % q;
    int yRes = y % q;
    int zRes = z % q;
    if (xRes==0 && yRes ==0 && zRes==0) {
    //A common denominator found!
                largestVar = q;
    }
    //regardless whether a denominator was found, check for the termination condition
    //Or works here, by the way, since we only need to know when q is greater than one of them.
    if (q >= x || q >= y || q >= z) {
        return largestVar;
    }
    //if we don't terminate, increment q and recurse. 
    q++;
    return recursiveMethod(x, y, z, q, largestVar);
} 
```

修改为正确处理最大变量。没注意那一点。作为局部作用域，最大变量的值不会通过递归调用来维护，因此它也必须传递到 recursiveMethod 调用中（或者被声明为类作用域变量，等等）。一个合适的起始值是 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:00:48.787

如果您每次将 Q 加一，使用合适的数字，您总是会用完堆栈。我会对每对数字使用欧几里得算法，然后从那里开始。我的意思是，如果它在 a、b、c 之间是共同的，那么它必须是 a 和 b 或 a 和 c 或 c 和 b 之间的公因数，对吧？

[https://math.stackexchange.com/questions/85830/how-to-use-the-extended-euclidean-algorithm-manually](https://math.stackexchange.com/questions/85830/how-to-use-the-extended-euclidean-algorithm-manually)

# javascript - Firefox 扩展开发——管理标签

> ID：14223814
> 
> 赞同：0
> 
> 时间：2013-01-08T20:54:04.400
> 
> 标签：javascript, firefox, firefox-addon

我正在创建一个扩展以使查找选项卡更容易，其中一部分涉及将搜索词与当前打开的选项卡的标题进行比较。目前，我相当确定我可以弄清楚如何将术语与选项卡标题进行比较，但我无法将最终得到的选项卡转换为变量以便我可以操纵它。请帮忙？

代码：

```
 if (tabQuery == tabs.title){ 
           tab = tabs.activeTab
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:19:32.593

`tabs`没有文本属性。此外，该`activeTab`属性是只读的。请尝试：

```
var tabs = require('tabs');

for each (var tab in tabs)
 if (tabQuery == tab.title) {
  tab.activate();
  break;
 } 
```

# jquery - 如何使用 JQuery 构建查询字符串

> ID：14223817
> 
> 赞同：3
> 
> 时间：2013-01-08T20:54:16.193
> 
> 标签：jquery

我有以下构建查询字符串的代码：

```
 var name = $(this).next()[0].name;
    var value = $(this).next()[0].checked;
    var str = name+'&value='+value; 
```

并在我的服务器上输出一个数组，如下所示：

```
[value] => false 
```

* * *

我想要的是更像这样的东西：

```
array(
    [myInputName] => value
) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:37:09.450

将来，看看[jQuery.param](http://api.jquery.com/jQuery.param/)来构建查询字符串。例如：

```
var p = {};
p[name] = value;
var str = $.param(p) 
```

尽管对于您的简单示例来说这有点过头了，但它会在将来对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:03:55.667

只需使用

```
var str = name + '=' + value; 
```

你所拥有的会输出如下内容：

```
myInputName&value=myInputValue 
```

以`name`这种方式使用是没有用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T16:02:45.280

尝试`$('yourselection').serialize()` 这将从具有名称的输入中为您生成一个查询字符串。 [https://api.jquery.com/serialize/](https://api.jquery.com/serialize/)

并检查参数。它适用于自定义参数。 [http://api.jquery.com/jquery.param/](http://api.jquery.com/jquery.param/)

# javascript - Backbone：返回具有特定标签的模型

> ID：14223825
> 
> 赞同：0
> 
> 时间：2013-01-08T20:54:46.873
> 
> 标签：javascript, backbone.js, underscore.js

我有一个模型集合，这些模型都有一组标签。

如果我想获取一个有一个标签的模型，我会这样做：

```
models.filter(function(x) {
    return _.contains(x.get("tags"), 'google');
}); 
```

这将抓取具有标签 google 的模型。我遇到的问题是我不能在那里放置一个标签，我需要它是一个数组。我将如何获取所有具有多个标签的模型（例如：google、yahoo、apple）？contains 方法仅支持 1 个字符串，不支持数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:26:57.083

你可以这样使用[`_.intersection`](http://underscorejs.org/#intersection)：

```
var want_all = ['google', 'yahoo', 'apple'];
models.filter(function(m) {
    return _.intersection(m.get('tags'), want_all).length == want_all.length;
}); 
```

将为您提供一个数组，其中包含两个和`_.intersection(a, b)`共有的所有元素，如果交集与您正在寻找的数组/集合的大小相同，则拥有您正在寻找的一切。`a``b``m.get('tags')`

# javascript - 在 Sencha Touch 中无法获取商店记录字段值

> ID：14223828
> 
> 赞同：1
> 
> 时间：2013-01-08T20:54:48.617
> 
> 标签：javascript, sencha-touch-2, store

当我尝试使用 Sencha Touch 2 在 ArrayStore 中查找记录时，没有返回记录。

```
store.findExact('Symbol', 'GOOG') 
```

返回 -1。

如下图所示，

```
store.getRange() 
```

返回 44 条记录，并且

```
store.first() 
```

返回一条记录，但是

```
store.first().get('Ask') 
```

返回未定义。

另外，当我这样做时

```
store.getAt(1).getData() 
```

我得到一个只包含字段'id：“ext-record-2”'的对象。

为什么我不能使用 store.findExact() 检索记录，为什么 record.get('column') 返回 undefined？

![在此处输入图像描述](../Images/49422b787247a44128787aa484503d0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:27:45.437

发现问题...

我试图在 ExtJS 和 Sencha Touch 应用程序中重用一个模型。Sencha Touch 期望在“config”中定义“fields”，而 ExtJS 没有。

ExtJS：

```
Ext.define('MyModel', {
  extend: 'Ext.data.Model',
  fields: [
    {name: 'Symbol',    type: 'string'},
    {name: 'LastPrice', type: 'float'},
    {name: 'Bid',       type: 'float'},
    {name: 'Ask',       type: 'float'},
    {name: 'Volume',    type: 'int'},
    {name: 'Close',     type: 'float'}
  ]
}); 
```

煎茶触摸：

```
Ext.define('MyModel', {
  extend: 'Ext.data.Model',
  config: {
    fields: [
      {name: 'Symbol',    type: 'string'},
      {name: 'LastPrice', type: 'float'},
      {name: 'Bid',       type: 'float'},
      {name: 'Ask',       type: 'float'},
      {name: 'Volume',    type: 'int'},
      {name: 'Close',     type: 'float'}
    ]
  }
}); 
```

一种解决方法：

```
var myModelConfig = {
  extend: 'Ext.data.Model',
  config: {
    fields: [
      {name: 'Symbol',    type: 'string'},
      {name: 'LastPrice', type: 'float'},
      {name: 'Bid',       type: 'float'},
      {name: 'Ask',       type: 'float'},
      {name: 'Volume',    type: 'int'},
      {name: 'Close',     type: 'float'}
    ]
  }
};
myModelConfig.fields = myModelConfig.config.fields;
Ext.define('MyModel', myModelConfig); 
```

# java - 获取谷歌地图的当前位置

> ID：14223831
> 
> 赞同：0
> 
> 时间：2013-01-08T20:55:00.320
> 
> 标签：java, android, google-maps, latitude-longitude

> **可能重复：**
> [在 Android 中获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a)

我有以下代码在手机上打开谷歌地图并将目的地的经度+纬度和起始位置传递给它。我想知道是否有一种方法可以让我们不必手动在代码中输入起始位置，而是以某种方式让代码自动找出用户的位置？

```
add.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent intent = new Intent (android.content.Intent.ACTION_VIEW,
            Uri.parse("http://maps.google.com/maps?saddr=" + 51.5171 +
                      "," + 0.1062 + "&daddr=" + 52.6342 + "," + 1.1385));

        intent.setComponent(
            new ComponentName ("com.google.android.apps.maps",
                               "com.google.android.maps.MapsActivity"));

        startActivity(intent);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:57:00.660

您可以使用此方法：

```
public LatLng getLocation(Context ctx) 
{
    LocationManager lm = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = lm.getProviders(true);

    /*
     * Loop over the array backwards, and if you get an accurate location,
     * then break out the loop
     */
    Location l = null;

    for (int i = providers.size() - 1; i >= 0; i--) 
    {
        l = lm.getLastKnownLocation(providers.get(i));
        if (l != null)
            break;
    }
    return new LatLng(l.getLatitude(),l.getLongitude());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:02:08.510

参考这个问题：[在Android上获取用户当前位置最简单、最稳健的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-an)

基本上，一旦您获得您的位置，您就可以使用 getLatitude()、getLongitude() 并将它们放入您的 url。

我会推荐比 getLastKnownLocation 更强大的东西，因为它依赖于最后一个已知位置，该位置可能在几小时甚至几天内都没有更新。例如，如果您正在度假，这可能是在地球的错误一侧。

另请查看[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)了解更多详情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T21:20:10.890

您的问题的分步指南：

[http://www.androidcompetencycenter.com/?s=GPS](http://www.androidcompetencycenter.com/?s=GPS)

希望这可以帮助

# javascript - 在页面更改之前更改页面的 CSS 设置

> ID：14223832
> 
> 赞同：0
> 
> 时间：2013-01-08T20:55:06.967
> 
> 标签：javascript, jquery, jquery-mobile

我将 Jquery mobile 用于我的移动应用程序。在更改页面之前，我想在该页面上进行一些 CSS 更改。当我设置例如将类添加到下一页的 id 或颜色更改时：`$("#divA1").css("background-color","blue");`

它`id`在当前页面（如果存在）上更改相同，然后才更改下一页。如何`CSS`在一个页面上设置我的设置，但使用这些设置加载下一页`CSS`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:10:49.177

我不完全了解您要做什么，但我建议您使用异步 ajax 调用来下载下一页的 DOM。

然后你可以将你想要的更改应用到那个 DOM，最后你把它插入到你当前的 DOM 中。

一个存根看起来像这样：

```
$.ajax('path/to/next/page', {
  async : true,
  complete : function ajaxCallback(newSite) {
    $item = $('YOURSELECTOR');
    // Here you can make changes, such as CSS edition
    $item.css({'background-color' : '#FF0000'});
    // Since you want to make changes to the new site only if you did them in the first site...
    if ($item.length > 0) {
      $(newSite).find('YOURSELECTOR').css({'background-color' : '#FF0000'});
    }

    // Here you can append the new site to the DOM

  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:12:47.523

如果它必须在新页面上，您有三个选项。

1.  您可以在 URL 中传递一个变量以在新页面上进行测试并适当地更改 CSS。例如。www.url.com?newcolor=f00

2.  您可以在当前页面上放置一个隐藏表单，更新其中的值并在转到下一页时传递它。（丑陋的做法，但它的工作原理。）

3.  设置一个cookie。（我首选的解决方案，只要启用 cookie 就可以很好地工作。老实说，它们可能不是。）

但是，最好的选择，尤其是在移动设备上，是保留页面的当前框架并通过 ajax 获取新内容并将其加载到当前页面的内容 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:06:08.203

在大多数情况下，jQuery Mobile 通过 ajax 调用将附加页面加载到 DOM 中。这是它如何工作的一个相当基本的部分，您应该确保所有页面上的所有标记 ID 都是唯一的。

```
<div id="page1" data-role="page">
    <div data-role="content">
        <div id="myContent1"></div>
    </div>
</div>

<div id="page2" data-role="page">
    <div data-role="content">
        <div id="myContent2"></div>
    </div>
</div> 
```

如果您的页面包含类似的子组件，请考虑使用一个类：

```
<div id="page1" data-role="page">
    <div data-role="content">
        <div class="myContent"></div>
    </div>
</div>

<div id="page2" data-role="page">
    <div data-role="content">
        <div class="myContent"></div>
    </div>
</div> 
```

类允许选择，例如`$("#page1.myContent").css("background-color");`

# vb.net - 在 Windows 7-64 中强制 SHDocVw.InternetExplorer 32 位而不是 64 位

> ID：14223833
> 
> 赞同：1
> 
> 时间：2013-01-08T20:55:12.397
> 
> 标签：vb.net, internet-explorer, shdocvw

我正在使用 SHDocVw.InternetExplorer 打开一个 IE 窗口并控制会话。
主要是为了自动转到某个页面、登录、检查某些数据等。

它工作得很好，除了我们现在应该使用这个 Internet Explorer 插件扩展，当我的程序生成窗口时，大多数插件都没有列在 Tools->Manage Add-Ons 下

有什么我可以尝试在至少这个扩展中加载的吗？

**编辑：** 好的，所以我想我可能已经缩小了正在发生的事情的范围。正常启动时 IE 以 32 位模式启动。

当它使用 SHDocVw 生成时，它会加载 64 位。当我转到开始菜单并启动 Internet Explorer（64 位）时，插件也丢失了。**所以现在我需要弄清楚如何在从针对 64 位的程序生成时强制使用 32 位 IE。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:02:28.427

所以我决定只针对 32 位模式，直到我弄清楚如何从 64 位程序中只针对 32 位 IE。

# regex - 正则表达式多个分隔符

> ID：14223834
> 
> 赞同：1
> 
> 时间：2013-01-08T20:55:12.543
> 
> 标签：regex, notepad++, delimiter

我有一个这种格式的文本文件：

```
('1', '2', '3', '4', '5');
('a', 'b', 'c', 'd', 'e'); 
```

ETC...

我想从每一行中的第三个和第四个条目`''`

我的文本文件有 125k 行，所以它很大。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:59:47.590

```
^.*?,.*?,(.*?),(.*?),.* 
```

将为您提供 \1 和 \2 中的第三和第四个字段（假设引号之间不会出现逗号，您不希望被视为分隔符或类似的东西）。

在您的示例上运行时，替换为`\1,\2`，最终结果是：

```
 '3', '4'
 'c', 'd' 
```

# kendo-ui - 如何获取 kendoui 小部件的源 (sende)r 元素

> ID：14223836
> 
> 赞同：4
> 
> 时间：2013-01-08T20:55:14.170
> 
> 标签：kendo-ui

如何获得 kendoui datepicker 小部件的调用者（发送者）？或任何与此相关的小部件。

```
<input id="datepicker1" class="datepicker" value="10/10/2011" />

$(document).ready(function () {
    // ready
    $(".datepicker").kendoDatePicker({
        change: onchange
    });
});

function onchange(e) {
    $(this).hide();
} 
```

这是一个小提琴：http: [//jsfiddle.net/bryanb/zz48F/](http://jsfiddle.net/bryanb/zz48F/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T21:00:24.307

发件人可作为`this.element`. 它将是一个 jQuery 对象：

```
$(function () {
    function onchange(e) {
        alert(this.element.prop("id"));
    }

    $(".datepicker").kendoDatePicker({
        change: onchange
    });
}); 
```

[http://jsfiddle.net/zz48F/3/](http://jsfiddle.net/zz48F/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T21:55:49.810

如果您使用的是剑道按钮：

您可以使用以下方法在按钮的 onclick 事件中获取发送者：

```
clickSelector(e) {

        alert("button " + e.sender.element.prop("id"));
    } 
```

然后从按钮的单击事件中调用 clickSelector

例如，如果您有按钮：

```
<button id="btnStudentAccounts"  type="button" class="k-button">Student Accounts</button>
<button id="btnFaculty"  type="button" class="k-button">Faculty</button> 
```

和代码：

```
 that = this;
  $("#btnStudentAccounts").kendoButton({
            enable: true,
            click: function (e) {
                that.clickSelector(e);
            }
        });

$("#btnFaculty").kendoButton({
        enable: true,
        click: function (e) {
               that.clickSelector(e);
            }
        }); 
```

如果你点击 btnFaculty 你会得到：

按钮 btnFaculty

# asp.net - 处理 HttpRequestValidationException ASP.net 4.0

> ID：14223842
> 
> 赞同：2
> 
> 时间：2013-01-08T20:55:44.573
> 
> 标签：asp.net, validation, httprequest

这是我第一次在 ASP 中做一个项目，所以这是我第一次遇到可怕的从客户端检测到潜在危险的 Request.Form 值...错误。

我环顾了网络和stackoverflow，似乎找不到处理这个问题的“最佳实践”方法。我并不完全想关闭所有验证，因为这意味着在用户可以输入数据的每个文本框中，我需要自己对文本进行编码/解码，对吗？这使我认为这是在您的站点中留下安全漏洞的一种非常简单的方法。

另一个看似常见的修复方法是优雅地中断验证并为用户带来一个看起来更好看的错误页面，这不是一个坏修复，但它不可能是最好的，对吧？

我在大多数网站上都注意到，例如，如果您为撇号输入 HTML 编码，它会自动变成撇号字符。当我现在输入这个时，如果我尝试输入 ' ; （去掉 9 和 ; 之间的空格，这是撇号的 HTML 编码），它会自动转换为 '. ASP.net 4.0 中必须有一种方法来做同样的事情吗？

顺便说一句，我使用 c# 作为我的后端服务器端代码。

# html - 在 Chrome 中打印精确的测量值

> ID：14223843
> 
> 赞同：11
> 
> 时间：2013-01-08T20:55:46.790
> 
> 标签：html, css, google-chrome, printing

当以厘米或英寸为单位指定元素的测量值时，它会在 Firefox 和 Internet Explorer 中以完全相同的尺寸打印。另一方面，Chrome 使元素更大。

有没有办法让 Chrome 以指定的尺寸打印东西，还是我只能忍受？

例如

```
<!doctype html>
<html>
  <head>
    <style type="text/css">
        div.box {
          border: 1px solid black;
          width: 5cm;
        }
    </style>
  </head>
  <body>
    <div class="box">box</div>
  </body>
</html> 
```

上面的代码在 Firefox 和 IE 中都打印了一个精确的 5 厘米（在我的打印机上），但从 Chrome 打印了大约 5.5 厘米。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-11T14:19:04.833

我也发现了这个问题。

在玩了很多张浪费的纸之后，我发现 Chrome 会尝试缩放 HTML。

例如，在下面的示例中添加一个全宽 div，它会正确调整框的大小，因为您要求 Chrome 将框设为页面的 100%，从而强制页面的比例为 1:1。

```
<!doctype html>
<html>
  <head>
    <style type="text/css">
        div.box {
          border: 1px solid black;
          width: 5cm;
        }
        div.forcer {
          width: 100%;
          height: 1px;
          border: 1px dotted green;
        }
    </style>
  </head>
  <body>
    <div class="box">box</div>
    <div class="forcer"></div>
  </body>
</html> 
```

不幸的是，当我尝试这个时，它并没有解决高度问题，而且我也无法在不丢失正确缩放的情况下将框设为 0px。

顺便说一下，看看下面的内容，看看它是如何影响打印时的尺寸的。

```
<!doctype html>
<html>
  <head>
    <style type="text/css">
        div.box {
          border: 1px solid black;
          width: 5cm;
        }
        div.forcer {
          width: 200%;
          height: 1px;
          border: 1px dotted green;
        }
    </style>
  </head>
  <body>
    <div class="box">box</div>
    <div class="forcer"></div>
  </body>
</html> 
```

简而言之：Chrome 的打印能力令人震惊！

Firefox 的打印效果要好得多，但运行速度要慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-25T01:59:01.190

对于 Chrome，只需将打印边距设置为某个值，并将正文设置为纸张宽度，减去边距。

例如，对于 A4 页面，宽度为 210mm

因此，对于 1 英寸的边距（大约 2.5 厘米），您可以执行以下操作

```
@media print
{
    @page
    {
        margin-left: 25mm;
        margin-right: 25mm;
    }

    body
    {
        width: 160mm;
    }
} 
```

身体的左右和宽度加起来应该是210mm。

对于字母，您将使用 1 英寸的边距和 6.5 英寸的宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-29T18:30:00.223

在当前的 Chrome 版本上，具有 100% 宽 div 的解决方案对我不起作用，但这适用于 A4 纸：

```
html, body {
    width: 210mm;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:49:12.340

我确认我在使用您的 HTML 时遇到了同样的问题，即使是在尝试指定一些 CSS 规则以消除诸如填充和边距之类的明显嫌疑时也是如此。从我所做的研究来看，在呈现媒体查询时，您似乎只是在处理不一致的浏览器标准。如果可能的话，我会建议有条件地根据浏览器设置框的样式。

另一个方面似乎是，不指定 Doctype（无论如何这在开发中有点禁忌）可能会导致不一致。

您可以继续查看此主题以获取有关该问题的更多信息：

[Firefox 与 webkit 基于宽度的媒体查询测量](https://stackoverflow.com/questions/8977605/firefox-versus-webkit-measurements-for-media-queries-based-on-width)

# http - 如何在授权字段中传递用户名和密码？

> ID：14223844
> 
> 赞同：0
> 
> 时间：2013-01-08T20:55:56.803
> 
> 标签：http, authorization, unrealscript

在 unrealscript 中，我正在尝试使用我编写的 TCPLink 客户端连接到服务器。我可以连接到域，但是当我尝试访问欢迎消息时收到 401 错误。我在授权领域做错了什么？

注意：用户名和密码是用户填写的明文字符串变量

```
SendText("GET /crud/welcome HTTP/1.0"$chr(13)$chr(10));
SendText("Host: "$TargetHost$chr(13)$chr(10));
SendText("Authorization: "$USERNAME$":"$PASSWORD$chr(13)$chr(10));
SendText("Connection: Close"$chr(13)$chr(10));
SendText(chr(13)$chr(10)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:41:11.230

您可能需要阅读 RFC 2617。

# jquery - 使用 jquery append 隐藏字段损失值

> ID：14223846
> 
> 赞同：1
> 
> 时间：2013-01-08T20:56:09.103
> 
> 标签：jquery, hidden-field

我有一个模式，我在其中上传图像。
然后像这样返回该图像：

```
<input type="hidden" value="20130108A70WY2.jpg" name="image_message_file" id="image_message_file">
<img src="http://files.gestionradioqc.com/immedia/message/picture/2013/01/08/20130108A70WY2_300.jpg"> 
```

然后我使用这样的javascript将数据传输到我的主页：
<--EDITED-->

```
function addAttachmentsToMessage(){
    var picture = $("#image_message_preview").find('img').parent().html();
    alert(picture);
    if(picture != ''){
        $("#message_attachments").append("<div class='attachment cf'>"+
                                        "<ul class='att-picture cf'>"+
                                            "<li>"+picture+"</li>"+
                                        "</ul>"+
                                    "</div>");
        clearAttachments();
    }
}

function clearAttachments(){
    $("#image_message_file").attr('value', '');
    $("#image-message").attr('value', '');
    $("#image_message_loading").hide();
    $("#image_message_upload").show();
    $("#image_message_preview").hide();
} 
```

<--/已编辑-->

警报实际上是正确的。
但实际上附加到 message_attachments 的是（隐藏字段中没有值）：

```
<input type="hidden" value="" name="image_message_file" id="image_message_file">
<img src="http://files.gestionradioqc.com/immedia/message/picture/2013/01/08/20130108A70WY2_300.jpg"> 
```

但只有附加的第一张图片有这个问题。
其他都还好。
我在 Firefox 17、Chrome 23 和 IE 9 上遇到了同样的问题。

任何想法我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:16:32.413

`$("#image_message_preview")`没有访问您的标记作为发布的 SO 图片警报“未定义” - 所以您必须有粘贴代码/标记问题？“image_message_file”

我冒昧地包装/正确命名等，它可以在此处提醒值：

[http://jsfiddle.net/eBTYC/](http://jsfiddle.net/eBTYC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:29:51.023

我编辑了我的原始帖子以显示错误的来源。
错误来自我的函数 clearAttachments()，它正在重置 #image_message_file 的值。由于它是按 id 搜索的，因此它只是更改了第一个附加项的值。
因此，我删除了该行，现在一切正常，因此现在的功能是：

```
function clearAttachments(){
    $("#image-message").attr('value', '');
    $("#image_message_loading").hide();
    $("#image_message_upload").show();
    $("#image_message_preview").hide();
} 
```

谢谢大家的见解！

# javascript - html5 画布：fillText 的 maxWidth 参数在 Chrome 中产生丑陋的结果

> ID：14223851
> 
> 赞同：3
> 
> 时间：2013-01-08T20:56:30.907
> 
> 标签：javascript, html, google-chrome, canvas

[fillText](https://developer.mozilla.org/en-US/docs/Drawing_text_using_a_canvas#fillText%28%29)的 maxWidth 参数可用于限制文本呈现的最大宽度，但是，在 chrome 中，我有时会得到非常奇怪的结果。这是一个特别糟糕的例子，我需要将文本的宽度限制为几个像素。以上是对未指定 maxWidth 的 fillText 的调用。下面的例子有一个 maxWidth。“w”和“a”之间的空格太大。是否有任何技巧或解决方法可以获得更好的结果？

![](../Images/31390a4cf7034be3cc3614250f44c208.png)

这是用于示例的代码：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

ctx.font="8pt Arial";
ctx.fillText("Iowa", 10, 40);
ctx.fillText("Iowa", 10, 56, 21); 
```

（编辑：更简单的复制）要复制，您可以到[这里](http://jsfiddle.net/AS9rY/)查看右下角的框。

**更新：**最初的问题表明 Firefox 也存在问题。那是一个错误。这个问题似乎只存在于 chrome 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:06:02.367

您的基本问题是 maxWidth 对呈现的文本执行缩放，但大多数文本不能很好地缩放到非整数大小......基本上，如果您要求 7.9px​​ 字体，那么东西将不适合像素网格并且会看起来很丑。

就避免它而言……除了使用更高的 DPI 显示器（我知道，这不是你真正能控制的）之外，除了避免 API 之外，你无能为力。:(

# java - 从 Java 5 SE 迁移到 Java 6 SE 后，JAXB“日期”转换失败

> ID：14223852
> 
> 赞同：2
> 
> 时间：2013-01-08T20:56:31.330
> 
> 标签：java, xsd, jaxb

我正在尝试将现有应用程序的 Java JDK 版本从 Java 5 更改为 Java 6（更新 38）。该应用程序使用一些 JAXB 生成的类来编组/解组我们从远程服务器发送/接收的 XML。XML 符合模式 (.xsd) 文件。

这一切在 Java 5 下都可以正常工作，在类路径中下载了 JAXB 二进制文件包。我不确定下载的 JAXB 二进制文件的版本是什么（这个项目在我之前就已经在这里了）。如果我只是将 JDK 版本从 Java 5 更改为 Java 6（更新 38），那么我会遇到一些以前从未发生过的单元测试失败，例如：

```
[org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: '2012-08-22T00:00:00-04:00' is not a valid value for 'date'.] 
```

我想我可以通过将 Java 6 JDK 移动到类路径的头部来解决这个问题，因此它位于外部 JAXB 二进制文件之前。这会产生编译时错误，例如：

```
The attribute required is undefined for the annotation type XmlElementRef 
```

在我的一个 JAXB 生成的类（基于 .xsd 文件）上报告了此错误。该错误是由此注释行引起的：

```
@XmlElementRef(name = "DealCalendarId", type = JAXBElement.class, required = false) 
```

所以，我不确定接下来我需要做什么。我有几个想法：

*   删除下载的 JAXB 二进制文件并仅依赖 Java 6 SE 中的内置 JAXB 支持（但我似乎记得前段时间这在项目上不起​​作用......）
*   将下载的 JAXB 二进制文件替换为较新的版本
*   将下载的 JAXB 二进制文件替换为较新版本，并将 Java 6 JDK 放在类路径中
*   执行上述操作之一，并重新生成我所有基于 .xsd 的 JAXB 类

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:42:17.663

**问题 #1**

> [org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: '2012-08-22T00:00:00-04:00' 不是 'date' 的有效值。]

仅通过此消息`2012-08-22T00:00:00-04:00`不是 XML Schema`date`类型的有效值，有效值将`2012-08-22`没有时间信息。您提供的值将对应于`dateTime`类型。您使用的其他版本可能只是不执行此验证。

**问题 #2**

> 注释类型 XmlElementRef 所需的属性未定义

Java SE 6 包含 JAXB 2.1，您必须在 Java SE 5 中使用 JAXB 2.2，其中`@XmlElementRef`注解包含`required`属性。

# r - R中绘图图像的标签

> ID：14223856
> 
> 赞同：1
> 
> 时间：2013-01-08T20:56:36.923
> 
> 标签：r, label, pie-chart, labels

我正在使用**R**从数据库中检索数据并生成一些漂亮的图。特别是，当我生成如下*饼图时，我可以看到：*

```
library(plotrix)
library(RODBC)
channel<-odbcConnect("MySql")
sqlQuery(channel,"use mydb")
res <-sqlQuery(channel, "SELECT categorystats.name categorystats.totalclick FROM categorystats")

png(filename="pie.png", width=800, height=800)

slices <- res$totalclick
lbls <- res$name
pct <- round(slices/sum(slices)*100)    
lbls <- paste(lbls, pct) # add percents to labels
lbls <- paste(lbls,"%",sep="") # add % to labels
pie3D(slices,labels = lbls,explode=0.1,main="Categorie di prodotti più visitate") 

dev.off()
odbcClose(channel) 
```

我得到以下饼图：![阴谋](../Images/09ea20625737c4abf13e0c0503dec5de.png)

不幸的是，一些标签没有显示在图像内。

**是否存在这样的命令来制作饼图和适合图像大小的相关标签？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:31:37.277

如果没有可重现的示例，我无法提供明确的答案，但这里有一些事情可以尝试：

1) 缩小饼图的大小，为标签留出更多空间。您可以通过`radius=0.8`在对`pie3D`. 这可能足以解决您的问题。

2) 使用边距，看看是否可以为标签创造更多空间。您可以通过添加`mar=c(bottom, left, top, right)`到`pie3D`呼叫来做到这一点。每个值都是以行数给出的边距大小。

3）您的标签已经有点小了，但是您可以通过在调用中添加`labelcex=0.9`（或任何适合您的缩放因子）来使它们更小`pie3D`。

`labelpos`4）您也可以在`pie3D`通话中使用标签位置。玩弄帮助中的示例，`pie3D`看看它是如何工作的。

我将提出一些不请自来的建议（“建议是生活的电梯音乐”，我的大学校长在我们毕业时告诉我们，然后继续给我们一堆建议）：饼图是显示数据的糟糕方式，因为很难辨别不同切片面积的差异。透视饼图只会通过扭曲不同切片的相对区域而使情况变得更糟。将 3D 添加到 2D 对象使得比较切片区域变得更加困难。如果您必须使用饼图，请考虑切换到正面（圆形）二维饼图。

# javascript - 淘汰复杂数据模型绑定

> ID：14223858
> 
> 赞同：1
> 
> 时间：2013-01-08T20:56:37.883
> 
> 标签：javascript, jquery, knockout.js

让我们从代码开始..

Javascript绑定视图模型和显示对话框

```
$("#add-song").click(function () {
    $("<div>")
        .attr("data-bind", "template: { name: 'manage-song-template' }")
        .dialog({
            resizable: false,
            modal: true,
            title: "Add Song",
            width: 960,
            height: 490,
            buttons: [
                {
                    text: "Create Song",
                    'data-bind': 'click: savechanges',
                    click: function () {

                    }
                },
                {
                    text: "Close",
                    click: function () {
                        $(this).dialog("close");
                    }
                }
            ],
            close: function () {
                $(this).dialog('destroy').remove();
            },
            open: function () {
                ko.applyBindings(new my.managesongviewmodel());
                jquerybindings();
            }
        });        
}); 
```

现在让我们看一下视图模型

```
my.managesongviewmodel = function () {
    var
        //Scalar Properties
        song = null,

        //Functions
        loadfromserver = function (Id) {
            $.post("/song/getsong", "id=1", function (response) {
                if (response.Success) {
                    var data = response.Data;
                    var song = response.Data.Song;

                    var songdata = {
                        Song: {
                            Id: song.Id,
                            Title: song.Title,
                            Description: song.Description,
                            Lyrics: song.Lyrics,
                            isMaster: song.isMaster,
                            AudioFilePath: song.AudioFilePath,
                            CoverImageFilePath: song.CoverImageFilePath,
                            CreatedDate: song.CreatedDate
                        },
                        Genres: data.Genres,
                        SongAlternateTitles: data.SongAlternateTitles,
                        Exploitations: data.Exploitations,
                        SongWriterSongs: data.SongWriterSongs
                    };                        
                    song = new my.song(songdata);
                    alert(song.title());
                }
            });
        },

        savechanges = function () {
        };

    loadfromserver();
    return {
        song: song,
        loadfromserver: loadfromserver
    };
};

my.song = function (data) {
    var
        //Scalar Properties
        id = ko.observable(data.Song.Id),
        title = ko.observable(data.Song.Title),
        description = ko.observable(data.Song.Description),
        lyrics = ko.observable(data.Song.Lyrics),
        ismaster = ko.observable(data.Song.isMaster),
        audiofilepath = ko.observable(data.Song.AudioFilePath),
        coverimagefilepath = ko.observable(data.Song.CoverImageFilePath),
        createddate = ko.observable(data.Song.CreatedDate),

        //Arrays
        genres = ko.observableArray(data.Genres),
        alttitles = ko.observableArray(data.SongAlternateTitles),
        exploitations = ko.observableArray(data.Exploitations),
        songwritersongs = ko.observableArray(data.SongWriterSongs);

    return {
        id: id,
        title: title,
        description: description,
        lyrics: lyrics,
        ismaster: ismaster,
        audiofilepath: audiofilepath,
        coverimagefilepath: coverimagefilepath,
        createddate: createddate,

        genres: genres,
        alttitles: alttitles,
        exploitations: exploitations,
        songwritersongs: songwritersongs
    };
}; 
```

这是我的模板

```
<script type="text/html" id="manage-song-template">
    <div class="modal-form">
        <span data-bind="text: song.title"></span>
    </div>
</script> 
```

Chrome 抛出错误“无法读取 null 的属性 'title';” 当我启动对话框时。也就是说，“alert(song.title());” 实际上显示了歌曲标题。

关于我哪里出错了有什么想法吗？

# 更新

我创建了一个复制问题的 jsfiddle。 [http://jsfiddle.net/mcottingham/H7jqa/28/](http://jsfiddle.net/mcottingham/H7jqa/28/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:08:35.620

这简单。在您显示模态窗口的那一刻，您的歌曲 var 仍然等于`null`. 因此，您必须等待从服务器加载有关歌曲的信息：

```
$("<div>").attr("data-bind", "template: { name: 'manage-song-template' }").dialog({
   // another options
   open: function (event, ui) {
     var vm = new my.managesongviewmodel(), domNode = this;
     vm.loadfromserver().done(function() {
       ko.applyBindings(vm, domNode);
       jquerybindings();
     });
   }
}) 
```

// 另一个代码

并在函数开头添加`return`语句：`loadfromserver`

```
loadfromserver = function (Id) {
   return $.post("/song/getsong", "id=1", function (response) {
    // code
   });
} 
```

# android - 使用 optionsMenu 后更新活动

> ID：14223865
> 
> 赞同：0
> 
> 时间：2013-01-08T20:56:59.697
> 
> 标签：android

我有一个包含 5 个活动的应用程序。所有这些活动的设置都可以使用菜单按钮（选项菜单）并选择“设置”进行修改。这将打开一个对话框，其中显示所有设置以及可以进行修改的位置。

当我通过按“确定”按钮关闭此设置对话框时，我希望调用选项菜单的活动更新其视图。

选项菜单在所有活动中都是这样激活的：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.firstactivity_options_menu, menu);      
    return true;
} 
```

以下是 onOptionsItemSelected 的一个示例......

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.settings) {
        class.settingsDialog(this);         
    } else if (item.getItemId() == R.id.about) {
        try {
            alertDialog(getResources().getString(R.string.settings_about), getAssets().open("about"), this);
        } catch (IOException e) {
        }
    }   
    return true;
} 
```

我的问题是在匹配 R.id.settings 后更新活动视图。这可能吗？如果是这样，请给我一些指示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:27:28.220

我会实现一个超类/子类方法或一个接口，因为对话框不会强制`onResume()`调用 Activity 的方法。

制作一个顶级抽象 Activity 类，例如`SuperMainActivity`.

```
public abstract class SuperMainActivity extends Activity
{
  public abstract void updateUI();
} 
```

然后，让您的每个活动都扩展`SuperMainActivity`而不是仅仅`Activity`实现该`updateUI()`方法。

然后在您的`settingsDialog()`方法中，使其成为：

接受一个`SuperMainActivity`参数而不是一个活动/上下文参数。

或者：

当你想回调时做一个演员，比如

```
((SuperMainActivity)myVariable).updateUI(); 
```

界面非常相似：

```
public interface ActivityCallback
{
  public void updateUI();
} 
```

并且每个activity都会**实现**ActivityCallback

如

```
public class MainActivity implements ActivityCallback
{
  public void updateUI()
  {
    //implementation. Differs per class
  }
} 
```

再说一次，您的`settingsDialog()`方法应该接受 ActivityCallback 参数，否则您将再次强制转换。

请注意，如果您决定采用这种方法，当您打电话时，`settingsDialog()`您仍然可以使用

```
settingsDialog(this); 
```

因为您的活动将满足参数的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:11:48.957

可能有不同的方法可以做到这一点，但单击后`Ok`您可以使用`Intent`启动活动并调用`finish()`活动以重新创建视图

# c++ - C++ 从另一个文件调用构造函数

> ID：14223877
> 
> 赞同：0
> 
> 时间：2013-01-08T20:57:52.100
> 
> 标签：c++, class, constructor

我有这 3 个代码文件，我想从构造函数中打印“刚刚创建的山”。你能告诉我我错在哪里以及我必须做什么吗？

山脉.h

```
#ifndef MOUNTAINS_H
#define MOUNTAINS_H

class Mountains{
    public:
        Mountains();
        ~Mountains();
};
#endif 
```

山脉.cpp

```
#include <cstdlib>
#include <iostream>
#include "Mountains.h"

Mountains::Mountains()
{
    cout<<"Mountains were just created"<<endl;
}

Mountains::~Mountains()
{
    cout<<"Mountains are about to be destroyed"<<endl;
} 
```

主文件

```
#include <cstdlib>
#include <iostream>
#include "Mountains.h"

int main(int argc, char *argv[])
{

    Mountains m();

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

我希望当我调用“`Mountains m();`这没有发生”时将“刚刚创建的山”写入控制台。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T21:01:21.047

问题就在这里：

```
Mountains m(); 
```

这不是一个名为 的*默认初始化* `Mountains`对象`m`。它是一个被调用的函数`m`，不带参数并返回一个`Mountains`.

要创建*默认初始化* `Mountains`，您需要执行以下操作：

```
Mountains m; 
```

或在*C++11*中：

```
Mountains m{}; 
```

* * *

*在使用标准库*中的东西时，您也缺少`std::`限定条件，例如或。那是假设您没有在相关的地方做，尽管不受欢迎。*`cout``endl``using namespace std;`*

# javascript - var ball = document.getElementById("ball"); 返回空对象？

> ID：14223878
> 
> 赞同：0
> 
> 时间：2013-01-08T20:57:53.337
> 
> 标签：javascript, html, css

我有3个文件

文件 1：index.html

```
<!DOCTYPE html>
<html>
<head>
    <LINK href="style.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="bounce.js"></script>
    <title>Bouncing ball</title>
</head>
<body>
<div id='ball'></div>
</body>
</html> 
```

文件 2：bounce.js

```
var ball = document.getElementById("ball");
var nx = 0;
var ny = 0;
setInterval(loop, 1000 / 30);
function loop() {
    nx++;
    ny++;
    ball.style.left = nx;
    ball.style.top = ny;

} 
```

文件 3：style.css

```
#ball {
    position: absolute;
    border-radius: 50px;
    width: 50px;
    height: 50px;
    background: black;
} 
```

我在 html 文件中加载 .css 和 .js 。现在我正试图让 te div “球”，我想用它做点什么。在这种情况下，我想让它反弹浏览器的边框。但关键是，我遇到了错误。

未捕获的类型错误：无法读取 null 的属性“样式”

bonce.js 无法获取元素球。为什么不？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:59:28.583

那是因为你的代码是在 DOM 准备好之前执行的。此时没有具有此 id 的元素。

将您的代码放在 onload 回调中：

```
window.onload = function(){
    var ball = document.getElementById("ball");
    var nx = 0;
    var ny = 0;
    setInterval(loop, 1000 / 30);
    function loop() {
        nx++;
        ny++;
        ball.style.left = nx;
        ball.style.top = ny;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T20:59:33.487

您正在尝试在元素加载到 DOM 之前获取元素。做这个：

```
<!DOCTYPE html>
<html>
<head>
    <LINK href="style.css" rel="stylesheet" type="text/css">
    <title>Bouncing ball</title>
</head>
<body>
    <div id='ball'></div>
    <script type="text/javascript" src="bounce.js"></script>
</body>
</html> 
```

在底部包含所有 JavaScript 是一种很好的做法，这样下载时就不会阻塞页面。它会确保你没有这样的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:59:34.273

将脚本移动到页面末尾或将其包装在 onload 事件中。您在元素加载之前执行它。

```
<!DOCTYPE html>
<html>
<head>
    <LINK href="style.css" rel="stylesheet" type="text/css">
    <title>Bouncing ball</title>
</head>
<body>
<div id='ball'></div>
    <script type="text/javascript" src="bounce.js"></script>
</body>
</html> 
```

# javascript - 使用 PhoneGap 的 Twitter Oauth 跨平台解决方案？

> ID：14223880
> 
> 赞同：1
> 
> 时间：2013-01-08T20:58:07.467
> 
> 标签：javascript, cordova, twitter, cross-platform

我正在研究 PhoneGap 和使用 HTML 5 和混合框架的移动应用程序的跨平台开发。我的问题是：有没有办法开发一个真正的跨平台应用程序，使用 Twitter 的 Oauth 从仅授权的 API 调用中检索数据？

当我在网上搜索时，我找到了一些解决方案，但这些都是平台相关的。显然，可以使用各种 PhoneGap 插件和 hack 为 iOS 或 Android 开发这样的应用程序，这真的很酷。但我正在寻找一个真正的“一次编写，随处使用”的解决方案。有可能还是我应该放弃？

感谢您的任何回答。

# mysql - 向现有应用程序添加云功能

> ID：14223885
> 
> 赞同：0
> 
> 时间：2013-01-08T20:58:34.230
> 
> 标签：mysql, cloud

我们目前有一个桌面应用程序出售给小型企业并用作服务器/客户端模型应用程序，我们正处于研究将基于云的同步添加到程序中的可能性的早期阶段。

除了转换/重新编码程序本身的网络代码的明显障碍外，似乎还有许多与服务器/数据库选择、可用云服务、可扩展性等相关的其他问题。

例如，目前非云应用程序只是连接到指定的 MySQL 数据库文件，然后加载/查看/更新数据。该数据库甚至可以远程存储在服务器上并从多台机器访问，例如：

```
db=New mySQLCommunityServer
db.host="12.23.56.57"
db.port=3306
db.databaseName="myData"
db.userName="userName"
db.Password="password1"

db.connect 
```

但是对于分布式云应用程序，它需要使用每个特定用户的登录名和密码连接到相同的主机和 SQL 数据库名称，并访问其特定的数据库和表。这将在哪里转换为上面的代码？

出现几个问题：

1.  是否需要为每个注册的新用户帐户创建一个新的整个数据库？
2.  如果是这样，对表格式的更改将如何应用于所有用户数据库。假设大约有 500-1000 个用户注册，拥有 500-1000 个单独的数据库没有多大意义。
3.  使用 Amazon Web Services 之类的服务会更好地实现这一点吗？即使在那里，“程序用户帐户”将如何转化为他们的服务也有点不清楚。

感谢您的任何反馈！

# javascript - 动态元素上的jquery .on（）事件映射不起作用

> ID：14223886
> 
> 赞同：1
> 
> 时间：2013-01-08T20:58:34.723
> 
> 标签：javascript, jquery, events

我在`#addform`带有输入字段的元素内有一个动态创建的表单。我将事件附加到这样的字段：

```
$('input[type=text]').on({focus:function(){console.log('d');}},'#addform') 
```

**为什么这不会触发？**我读过，`.delegate()`但我认为它应该与`.on()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:00:29.023

你的论点颠倒了。它应该是：

```
$("#addform").on({...}, 'input[type=text]'); 
```

原因是实际绑定是针对`#addform`. 调用`input[type=text]`时可能不存在。`.on`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:00:32.130

我觉得这样比较合适：

```
$('#addform').on({focus:function(){console.log('d');}},'input[type=text]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:19:59.557

```
$('#addform').on('focus','input[type=text]', function(){
   console.log('d');
}); 
```

做同样的事情，但我认为更具可读性。

# jquery - JQuery 内容滑块？

> ID：14223887
> 
> 赞同：0
> 
> 时间：2013-01-08T20:58:36.227
> 
> 标签：jquery, asp.net-mvc, slider

我尝试编写如下内容滑块

脚本

```
$(document).ready(function () {
    $(".nav_button:first").addClass("nav_button_active");
    $(".nav_button").click(function () {
        $(".content_wrapper .content:nth-child(" + $(this).text() + ")").show().siblings().hide();
        $(this).addClass("nav_button_active").siblings().removeClass("nav_button_active");
    });
}); 
```

HTML

```
<div class="main_slider">
    <div class="content_wrapper">
        @foreach (var item in Model)
        {
            <div class="content">
                <img src="~/@item.BigImageUrl" alt="@item.Description" width="600" height="300" />
            </div>
        }
    </div>
    <div class="nav_bar">
        @for (int i = 1; i <= Model.Count(); i++)
        {
            <div class="nav_button">@i</div>
        }
    </div>
</div> 
```

CSS

```
.content_wrapper {
    height: 300px;
}

.content {
    display: none;
}

    .content:first-child {
        display: block;
    }

.nav_bar {
    height: 30px;
    background-image:url(Content/images/gradient2.png);
}

.nav_button {
    float: left;
    height: 30px;
    width: 38px;
    line-height:30px;
    text-align:center;
    border-right:2px groove #fff;
    cursor:pointer;
    font-weight:bold;
}

.nav_button_active{
    background-color:#0026ff;
    color:#fff;
} 
```

此代码工作正常，但我希望它与计时器一起使用。我不能做我想做的事。如何使用计时器事件添加自动更改。代码示例或起点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:27:52.147

如果我理解得很好，你可以使用：

```
var currentElemnt = $(".content").first();
//do something
window.setTimeout(function(){
    currentElement = currentElement.next();
    //do something
},5000); 
```

这是 5000 毫秒的超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:37:42.177

我像下面这样解决了它，但我不知道这是最好的方法。

```
$(document).ready(function () {
    var count = '@Model.Count()';
    var i = 1;
    window.setInterval(yourfunction, 1000);

    function yourfunction() {
        $(".content_wrapper .content:nth-child(" + i + ")").show().siblings().hide();
        $(".nav_button:nth-child(" + i + ")").addClass("nav_button_active").siblings().removeClass("nav_button_active");
        i++;
        if (i > count) {
            i = 1;
        }
    }

    $(".nav_button:first").addClass("nav_button_active");
    $(".nav_button").click(function () {
        $(".content_wrapper .content:nth-child(" + $(this).text() + ")").show().siblings().hide();
        $(this).addClass("nav_button_active").siblings().removeClass("nav_button_active");
        i = $(this).text();
    });
}); 
```

# ruby-on-rails - 如何将最后两条记录存储在数组中

> ID：14223889
> 
> 赞同：0
> 
> 时间：2013-01-08T20:58:45.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有一个获取随机横幅的方法，但我不希望它连续两次显示相同的横幅。

```
def random_banner
  @koder = @side.reklamers.all(:select => :id).collect(&:id)
  @koder.sample gets a random ID
  @reklame = Reklamer.find(@koder.sample)
  render :text => @reklame.kode 
end 
```

什么是最好的解决方案？

TDGS 解决方案：当我访问该操作时，它运行良好，但我有一个博客，它进行 ajax 调用以获取横幅代码，并且在那里，相同的横幅连续出现两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:02:32.103

像这样的东西应该存储在数据库中`session`而不是数据库中。修改会话的成本接近于零，而修改数据库至少需要往返于数据库引擎和返回，加上创建查询和解码结果的开销。

例子：

```
loop do
 random_id = @koder.sample

 break if (random_id != session[:last_random_id]))
end

session[:last_random_id] = random_id 
```

正如[James Mason](https://stackoverflow.com/users/473691/james-mason)指出的那样，确保至少有两个可以选择的东西，否则这个循环将永远运行。有时，作为故障保险，最好有一个固定长度的循环，比如`10.times do`，或者通过在内部执行此操作来可靠地发出随机数的方法，如`@koder.sample(session)`测试和更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:18:09.917

将上次使用的横幅 ID 存储在会话中的某处，例如`session[:banner_id]`

然后，执行以下操作：

```
@koder = @side.reklamers.pluck(:id).reject{|id| id == session[:banner_id}
@reklame = Reklamer.find(@koder.sample)
session[:banner_id] = @reklame.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:02:15.150

您可以将先前的 ID 传递给 random_banner 并在匹配时拒绝随机 ID。如果也只有一个横幅可供选择，您需要确保不会陷入无限循环。

# php - 从 url 中选择搜索查询

> ID：14223892
> 
> 赞同：0
> 
> 时间：2013-01-08T20:58:56.547
> 
> 标签：php, regex, preg-match

这是我到目前为止所拥有的：

```
preg_match('/[q|p]=(.*?)&/',$url,$query); 
```

问题是，如果有一个以`q`or结尾的参数，`p`它将包括那些：

```
&cap=queryhere 
```

既然`cap`以`p`它结尾包括那些，我怎么能只包括来自 q 和 p 的搜索查询。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:11:03.323

仅当前面的数字不是单词字符（aZ、0-9 或 _）时，您才能将正则表达式更新为`'/\W[q|p]=(.*)&/'` 将 \W 添加到前面的匹配项。

就个人而言，我只会使用`$_GET['p']`or `$_GET['q']`。

```
<?php
   if ( isset($_GET['p']) )
      $query = $_GET['p'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:17:47.937

你不需要使用正则表达式，php已经内置了处理类型信息的函数，它更准确。

```
<?php

$url = "http://mysite.com/page.php?q=this is my query&a=123";

$query = parse_url($url, PHP_URL_QUERY);

parse_str($query, $opt);

print_r($opt); 
```

输出：

```
Array
(
    [q] => this is my query
    [a] => 123
) 
```

# javascript - 捕获段落中的所有问题

> ID：14223893
> 
> 赞同：1
> 
> 时间：2013-01-08T20:58:57.680
> 
> 标签：javascript, regex, parsing

我一直在尝试使用 Javascript 的 RegEx 来解析给定段落中的每个问题。但是，我得到了不需要的结果：

**Javascript**

```
regex = /(\S.+?[.!?])(?=\s+|$)/g;
result = regex.exec("I can see you. Where are you? I am here! How did you get there?"); 
```

**预期结果**

```
["Where are you?", "How did you get there?"] 
```

**实际结果**

```
["I can see you.", "I can see you."] 
```

*PS：如果有更好的方法可以做到这一点，我全神贯注！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:11:03.933

试试这个：

```
var x = string.match(/\(?[A-Z][^\.!\?]+[!\.\?]\)?/g);
x.filter(function(sentence) {
  return sentence.indexOf('?') >= 0;
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:18:24.677

JavaScript regex 选项的`.exec`方法只返回第一个匹配的捕获。它还使用匹配字符串中的位置更新正则表达式对象。这就是允许您使用该方法遍历字符串的`.exec`原因（以及为什么您只获得第一个匹配项）。

尝试改用`.match`String 对象的方法：

```
regex = /(\S.+?[.!?])(?=\s+|$)/g;
result = ("I can see you. Where are you? I am here! How did you get there?").match(regex); 
```

这给出了预期的结果：

```
[
    "I can see you.",
    "Where are you?",
    "I am here!",
    "How did you get there?"
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:25:50.423

```
regex = / ?([^.!]*)\?/g;
text = "I can see you. Where are you? I am here! How did you get there?";
result = [];
while (m = regex.exec(text)) {
  result.push(m[1])
} 
```

输出：

```
[ 'Where are you?',
  'How did you get there?' ] 
```

# sql - 查询以选择所有数据库，然后对结果运行另一个查询

> ID：14223897
> 
> 赞同：3
> 
> 时间：2013-01-08T20:59:13.700
> 
> 标签：sql, sql-server, ssms

****** *** *******已编辑****** ** *** *****

 **我有多个 sql 服务器，其中包含大约 200-300 dbs，并且想要节省服务器上的空间。

* * *

我想通过任务调度程序运行此脚本，在我的 sql 服务器中的所有数据库上运行收缩例程。我有疑问，但我不知道如何将两者联系在一起。为了选择所有数据库，我使用这个

```
select * from sys.sysdatabases
Where name <> 'master' and name <> 'tempdb' and name <> 'model' and name <> 'msdb' 
```

对于我的收缩路由，我使用这个

```
USE [single_database_name]
GO
DBCC SHRINKFILE ('single_database_name', 10)
GO 
```

如何连接这两个查询，以便“single_database_name”来自第一个查询的所有数据库名称列表。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T21:08:08.017

将游标与动态 SQL 一起使用。这将在每个数据库上单独收缩每个文件。

```
Declare @dataFiles Table (databaseName Varchar(256), datafile Varchar(256))
Declare @SQL Nvarchar(Max), @databaseName Varchar(256), @dbfile Varchar(256)

Insert  @dataFiles
select  sd.name, smf.name
from    sys.sysdatabases sd
join    sys.master_files smf
        On  sd.[dbid] = smf.database_id
Where   sd.name not in ('master','tempdb','model','msdb')

Declare cur Cursor For      
Select  databaseName,
        datafile
From    @dataFiles

Open    cur
Fetch   Next 
From    cur
Into    @databaseName,
        @dbfile

While   @@Fetch_Status = 0
Begin
        Set     @SQL = 'USE [' + @databasename + ']
                        DBCC SHRINKFILE (''' + @dbfile + ''', 10) WITH NO_INFOMSGS'

        Exec    sp_executeSQL @SQL

        Fetch   Next 
        From    cur
        Into    @databaseName,
                @dbfile
End
Close   cur
Deallocate cur

select  sd.name As DatabaseName, smf.name DBFileName, (size*8)/1024 SizeMB
from    sys.sysdatabases sd
join    sys.master_files smf
        On  sd.[dbid] = smf.database_id
Where   sd.name not in ('master','tempdb','model','msdb') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:16:12.943

```
select 
'USE '+ quotename([name]) + '
GO
DBCC SHRINKFILE (''' + [name] + ''', 10)
GO
'
from sys.databases
where name not in ('master', 'tempdb', 'model', 'msdb') 
```

但请不要这样做：收缩是不好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:25:13.527

使用未记录的存储过程 sp_MSForEachDB 和 DBCC SHRINKDATABASE 命令，您可以在一行代码中收缩 SQL Server 上的所有数据库

```
EXEC sp_MSForEachDB
  'if ''?'' not in (select name from sys.databases
    where name <> ''master'' and name <> ''tempdb'' and name <> ''model'' and name <> ''msdb'')
      DBCC SHRINKDATABASE([?], 10)' 
```

有关[**sp_MSForEachDB 的详细信息**](http://sqlserverlearner.com/2011/sp_msforeachdb-understanding-and-using-indetail)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:21:27.040

应该避免收缩数据库，除非在非常特殊的情况下，例如删除大量数据并且数据库永远不会恢复到原始大小并回收空间。缩小数据库会使数据碎片化，并可能导致性能问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T21:05:43.353

对于在特定数据库上进行操作，您将至少知道数据库的名称，如果是这种情况，请使用以下查询

```
if (exists(Select name from sys.databases where name like 'single_database_name'))
begin 
DBCC SHRINKFILE ('single_database_name', 10)
end 
```**

# html - 冻结 html 表格中的顶部标题行

> ID：14223899
> 
> 赞同：0
> 
> 时间：2013-01-08T20:59:17.087
> 
> 标签：html, css, css-tables

如何修改 CSS 编码，以使第一行（顶部标题）被冻结？

代码需要符合 IE7 标准。

```
table.dataTable {
    margin: 0;
    padding: 0;
    border-bottom: 1px solid #999;
    border-left: 1px solid #999;
    color: #235A81;
    font-family: Arial;
    font-size: 9pt;
}
table.dataTable th {
    margin: 0;
    border-right: 1px solid #999;
    border-top: 1px solid #999;
    font-weight: normal;
    padding: 4px 3px 3px 4px;
    background: #ccc;
    font-weight: bold;
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#cdcdcd");
    text-align: left;
    width: 150px;
}

table.dataTable td {
    margin: 0;
    border-right: 1px solid #999;
    border-top: 1px solid #999; 
    padding: 2px 3px 3px 4px
}

div.scrollTableContainer {
    height: 285px;  
    overflow: auto;
    width: 900px;
    margin: 15px 0 0 0;
    position: relative;
}

div.scrollTableContainer table {
    width: 952px;
}

div.scrollTableContainer td:last-child {padding-right: 20px;}

div.scrollTableContainer tr:first-child td { border-top: 0; }

div.scrollTableContainer thead th {border-bottom: 1px solid #999; } 
```

这是一个工作小提琴：http: [//jsfiddle.net/Uamhc/](http://jsfiddle.net/Uamhc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:10:13.560

就像@keeg 所说的那样，您需要创建两个表。但是，如果您无法控制网站的内容，您可以使用

```
$('.flexme').flexigrid(); 
```

导航**[到此](http://www.flexigrid.info/)**链接的“示例 1”以查看如何使用它的示例。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:05:33.880

你需要画两张表，一张是内容，一张只是表头，把表头放在一个 div 中并设置 div css 属性：`display:fixed`

# mysql - 扩展 ruby 、activerecord、mysql 应用程序

> ID：14223909
> 
> 赞同：1
> 
> 时间：2013-01-08T20:59:42.547
> 
> 标签：mysql, ruby-on-rails, ruby, linux, rails-activerecord

我有一个应用程序...

该应用程序对金融产品进行市场比较 - 对于给定的报价请求，它会联系其他几个网站以获取报价。然后它会为用户提供结果——他们的详细信息的几个报价。

为了管理这些请求，它们被保存到 MySQL 中，然后我的应用程序启动，获取挂起的报价并将它们发送到线程（所有相同的 Linux 机器）以处理每个站点查找。

我正在使用 JRuby，因为我遇到了与线程/数据库相关的问题。使用 Java 线程池来控制线程数。使用当前的硬件/VPS - 它可以处理大约 200 个线程。许多限制似乎与每个线程获取自己的 MySQL 连接有关——获取报价细节并保存结果。我们想要处理更多的并发线程，因此寻找扩大规模的方法。

想知道走哪条路...

1.  更大的硬件...
2.  更多机器并使用某种排队机制（具有优先级）在机器之间共享负载 - 所以线程不会接触数据库，所有细节/响应都通过队列进行 - 所以数据库命中较少，但也许我我只是将问题推入队列。考虑使用 MongoDB 之类的东西作为队列，但对建议持开放态度 - 一些易于使用 Ruby 的东西 :)
3.  某种远程/RPC 机制，例如 dRb - 从理论上讲，这似乎是一个不错的选择，但尚未对此做任何事情，还不知道它会使事情变得多么复杂。
4.  还有什么……？

从此链接[不扩大规模与扩大规模的原因？](https://stackoverflow.com/questions/1664127/reasons-for-not-scaling-up-vs-out)- 看起来这个问题适合运行更多的机器来解决它。

所以，关于走哪条路的任何想法......

干杯，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:08:14.900

对于此类问题，我通常采用的方法是密切关注您正在进行的数据库查询并积极调整它们。*仅*检索您需要的内容，跳过未明确使用的列，并在急切加载您完全不需要的内容时非常小心。

您经常会发现，通过添加索引或策略性地对数据库中的某些属性进行非规范化以避免丑陋、耗时的`JOIN`操作，您可以获得显着的速度提升。

此外，考虑一下缓存：最快的数据库调用是从未进行过的调用。使用 Memcached 之类的东西来保存适度耗时的记录检索的结果并不难，如果小心操作，如果您通过几种方法引导更新，甚至很容易使其无效和过期。

对于调度工作者，可以在 Redis 中实现一个简单的先进先出队列，以减轻 MySQL 本身的大量处理开销。如果您遵循示例，这通常很容易添加。

像 Memcached 这样的缓存可以处理非常大的流量，因此只要有可能，就缓存它，以避免每件事情都影响到您的数据库。

如果您已经用尽了这些选项，那么是时候使用更多的前端服务器和更多的数据库容量了，但只有到那时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:15:39.827

排队是您最容易实现的事情。使用这样的东西：http: [//beanstalkd.github.com/beaneater/](http://beanstalkd.github.com/beaneater/)

基本上，您可以预先添加`async.`将它们放入队列并执行它们的方法。他们排队，工作人员可以是同一台服务器或不同的服务器。

# lisp - 为什么这个表达式在 Common Lisp 中不能按预期工作？

> ID：14223910
> 
> 赞同：3
> 
> 时间：2013-01-08T20:59:46.407
> 
> 标签：lisp, common-lisp, apply

Lisp 的新手。我知道

```
(mapcar #'list '(1 2) '(3 4)) 
```

会给

```
'((1 3) (2 4)) 
```

根据我对 apply 工作原理的理解，我希望

```
(apply #'(lambda (&rest x) (mapcar #'list x)) '((1 2) (3 4))) 
```

返回相同的结果。相反，我得到

```
'(((1 2)) ((3 4))) 
```

我很困惑，因为

```
(apply #'append '((1 2) (3 4))) 
```

给我

```
'(1 2 3 4) 
```

正如预期的那样。到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:35:08.750

简化它。假设您使用`A`而不是`(1 2)`，而`B`不是`(3 4)`：

```
(apply #'(lambda (&rest x) (mapcar #'list x)) '(A B)) 
```

因为`&rest x`接受所有参数并将它们打包为一个列表，所以`x`value 也是如此`(A B)`。然后`mapcar`迭代两次，传递`A`给`list`，产生`(A)`，然后对 . 执行相同的操作`B`。然后`mapcar`列出这些，产生`( (A) (B) )`

将打印语句放在那里以查看发生了什么很有用。

# python - 尝试使用 python 将矩阵放入一个集合中，但它仍然允许重复

> ID：14223913
> 
> 赞同：3
> 
> 时间：2013-01-08T21:00:02.557
> 
> 标签：python, matrix, set

我有一段简单的代码没有按预期运行。

```
from numpy import *
from numpy.linalg import *
from sets import Set

W = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
E = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')

matrices = Set([])
matrices.add(W)
matrices.add(E)
matrices 
```

矩阵是相同的，但是当我打印集合的内容时它们都单独出现。但是，如果我像下面这样分配它，则不会出现重复项。

```
W = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
E = W 
```

知道发生了什么吗？我需要一种避免在我正在编写的程序中出现重复矩阵的方法，该程序会生成大量矩阵。

编辑：我想要以下输出

```
set([matrix([[ 1,  1,  1,  1],
        [ 1,  1, -1, -1],
        [ 1, -1,  2, -2],
        [ 1, -1, -2,  2]])]) 
```

而是得到以下内容：

```
set([matrix([[ 1,  1,  1,  1],
        [ 1,  1, -1, -1],
        [ 1, -1,  2, -2],
        [ 1, -1, -2,  2]]), matrix([[ 1,  1,  1,  1],
        [ 1,  1, -1, -1],
        [ 1, -1,  2, -2],
        [ 1, -1, -2,  2]])]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:18:48.340

这是因为集合使用**__ *eq* __**和**__ *hash* __**特殊方法来检测项目的相等性（请参阅[http://docs.python.org/2/library/sets.html](http://docs.python.org/2/library/sets.html)）。但是矩阵对象有不同的哈希值，那些**__ *eq* __**方法不返回真/假，而是矩阵：

```
>>> W == E
matrix([[ True,  True,  True,  True],
        [ True,  True,  True,  True],
        [ True,  True,  True,  True],
        [ True,  True,  True,  True]], dtype=bool)
>>> W > E
matrix([[False, False, False, False],
        [False, False, False, False],
        [False, False, False, False],
        [False, False, False, False]], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:22:36.917

您遇到了 python 如何在内部检查对象之间的相似性的问题。具体来说，如何比较被认为是“可散列”的对象。

python`set`构造函数决定两个对象是否相同的方式是基于调用一个名为`__hash__`（和另一个名为`__eq__`）的魔术方法。`__hash__`如果调用它们的结果返回相同的值（并且调用它们`__eq__`返回），则认为两个对象是相同的`True`。如果调用`__hash__`两个对象给出不同的值，`set`则假定它们不能被认为是相同的。

还值得注意的是，集合*只能*包含被认为是“可散列”的对象，即那些实现该`__hash__`方法的对象。

让我们看看这是如何工作的：

```
In [73]: a = "one"
In [74]: b = "one"
In [75]: c = "two"

In [76]: a.__hash__()
Out[76]: -261223665

In [77]: b.__hash__()
Out[77]: -261223665

In [78]: c.__hash__()
Out[78]: 323309869

In [79]: set([a,b,c])
Out[79]: set(['two', 'one']) 
```

现在，让我们导入 numpy，看看你的矩阵的哈希值是什么。

```
In [81]: import numpy as np
In [82]: W = np.matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
In [83]: E = np.matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')

In [84]: W.__hash__()
Out[84]: 4879307

In [85]: E.__hash__()
Out[85]: 4879135 
```

请注意，散列是不同的`E`，`W`即使它们似乎包含相同的东西。由于它们的哈希值不同，它们将在集合中显示为不同的对象。当您像 一样进行赋值时`W = E`，名称`W`和`E`实际上指的是同一个对象。

如果您需要解决此问题的方法，您可以存储用于构建矩阵的字符串：

```
In [86]: set(['1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2',
              '1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2'])
Out[86]: set(['1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2']) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T21:48:19.500

`matrix`在. _ `__eq__`_ 如果要使用 a使它们独一无二，则需要将矩阵包装在辅助类中。像这样简单的事情应该做；`__hash__``set``set`

```
import hashlib

class MatrixWrap:
     def __init__(self, matrix):
         self.matrix = matrix
     def __hash__(self):
         return int(hashlib.sha1(self.matrix).hexdigest(), 16)
     def __eq__(self, x):
         return self.__hash__() == x.__hash__() 
```

然后你可以做;

```
from numpy import *
from numpy.linalg import *

W = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
E = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
X = matrix('2, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')

matrices = set()
matrices.add(MatrixWrap(W))
matrices.add(MatrixWrap(E))
matrices.add(MatrixWrap(X))

for a in matrices:
    print a.matrix 
```

...列出您的独特矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:57:24.120

所有的答案和评论都很好，并确定了问题，@Joachim Isaksson 确定了一个很好的解决方案。我想指出，您还可以序列化常规数组并将数据转储/加载到集合中，如下所示：

```
import numpy as np

def arrayToTuple(arr):
    arrType = arr.dtype.str
    arrShape = arr.shape
    arrData = arr.tostring()

    return (arrType,arrShape,arrData)

def tupleToArray(tupl):
    arrType, arrShape, arrData = tupl

    return np.matrix( np.fromstring(arrData, dtype=arrType).reshape(arrShape) )
        # remove the matrix( ) wrap to return arrays instead of matrices 
```

然后您的代码将如下所示：

```
W = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')
E = matrix('1, 1, 1, 1; 1, 1, -1, -1; 1, -1, 2, -2; 1, -1, -2, 2')

matrixTuples = set()

matrixTuples.add(arrayToTuple(W))
matrixTuples.add(arrayToTuple(E))

for mTupl in matrixTuples:
    print tupleToArray(mTupl) 
```

这也适用于常规 bool、整数和浮点数组（但不是对象或字符串数​​组）——只需删除 arrayFromTuple 返回的 matrix( ) 包装器。我想这些函数可能更好地命名为 matrixToTuple 和 tupleToMatrix 但无论您使用的是矩阵还是数组，它们都非常接近。

# php - GD 图像库将 2 张图像与“碰撞检测”合并

> ID：14223916
> 
> 赞同：0
> 
> 时间：2013-01-08T21:00:10.587
> 
> 标签：php, image, image-processing, gd

我有两张图片，白色背景上的大文字。长度各不相同，但文本总是向左对齐，因此每个图像的右侧基本上都有可用空间。我现在想将这两个图像合并为一个，并将它们尽可能靠近地移动在一起，而不会让文本“碰撞”。

我想以某种方式检查每像素列的基数是否有另一种颜色而不是白色（从右侧开始），所以我知道文本开始后有多少像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:21:01.840

找到了解决方案，从图像中去除所有空白的简洁功能：

```
function stripWhitespace($img) {
        //find the size of the borders
$b_top = 0;
$b_btm = 0;
$b_lft = 0;
$b_rt = 0;

//top
for(; $b_top < imagesy($img); ++$b_top) {
  for($x = 0; $x < imagesx($img); ++$x) {
    if(imagecolorat($img, $x, $b_top) != 0xFFFFFF) {
       break 2; //out of the 'top' loop
    }
  }
}

//bottom
for(; $b_btm < imagesy($img); ++$b_btm) {
  for($x = 0; $x < imagesx($img); ++$x) {
    if(imagecolorat($img, $x, imagesy($img) - $b_btm-1) != 0xFFFFFF) {
       break 2; //out of the 'bottom' loop
    }
  }
}

//left
for(; $b_lft < imagesx($img); ++$b_lft) {
  for($y = 0; $y < imagesy($img); ++$y) {
    if(imagecolorat($img, $b_lft, $y) != 0xFFFFFF) {
       break 2; //out of the 'left' loop
    }
  }
}

//right
for(; $b_rt < imagesx($img); ++$b_rt) {
  for($y = 0; $y < imagesy($img); ++$y) {
    if(imagecolorat($img, imagesx($img) - $b_rt-1, $y) != 0xFFFFFF) {
       break 2; //out of the 'right' loop
    }
  }
}

//copy the contents, excluding the border
$newimg = imagecreatetruecolor(
    imagesx($img)-($b_lft+$b_rt), imagesy($img)-($b_top+$b_btm));

imagecopy($newimg, $img, 0, 0, $b_lft, $b_top, imagesx($newimg), imagesy($newimg));
return $newimg;
    } 
```

从这里：[在 PHP 中从图像中裁剪空白](https://stackoverflow.com/questions/1669683/crop-whitespace-from-image-in-php)

# mysql - MySQL 分区和频繁移动的行

> ID：14223918
> 
> 赞同：1
> 
> 时间：2013-01-08T21:00:16.173
> 
> 标签：mysql, partitioning

我正在寻找一个日期时间戳进行分区，该时间戳将用于显示哪些数据是最新的。

这将发生分区之间的数据频繁移动。

*   这会产生什么问题？
*   是否会随着时间的推移影响速度？
*   将一行从一个分区更改为另一个只是更新分区索引（因此没什么大不了的）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:08:48.067

分区允许您将代表数据库的物理文件拆分为多个文件。当您更新记录并更改分区规则所基于的一个或多个字段时，数据库将被迫将更新的记录物理移动到其新分区值要求的文件中。

所以使用时间戳不是一个好主意，因为你会强迫很多额外的开销来保持“相关”记录在一起。

这会随着时间的推移影响速度，因为当这些记录被打乱时，您将分割数据库文件，加上额外的 I/O 开销，更新索引以反映新位置等......

例如，用于分区计算的字段本质上应该被视为常量并且不理会。并不是说您不能进行更新，但它们不应该是频繁更新。

# iphone - 在一个应用程序中嵌入多个应用程序？

> ID：14223921
> 
> 赞同：1
> 
> 时间：2013-01-08T21:00:19.610
> 
> 标签：iphone, ios, mobile

我是应用程序开发的新手，我想知道我所拥有的概念是否真的可以创建。

我的概念涉及创建一个能够在其自身中嵌入另一个应用程序的应用程序。

我会举一个例子，这也是一个非常糟糕的例子，但你至少会明白这一点。

在 iPhone 上想象一个名为“Kwesi 的应用程序”的应用程序。一旦你点击它，它会打开一个带有 3 个图标的页面。一个 facebook 图标、一个 gmail 图标和一个 hotmail 图标。现在用手指点击 gmail 图标，您的 gmail 会立即打开“Kwesi 的应用程序”，并且您可以完全访问。左上角还有一个按钮，上面写着“主菜单”。点击“主菜单”图标后，您将返回三个图标，现在可以冲洗并重复。

我希望这个例子足够清楚。

我似乎要回到的问题是，是否有可能以这种方式将您嵌入或链接到其他应用程序的应用程序？我只能猜测这会很奇怪，因为它们必须单独安装在您的手机上，但我不希望那样。如上例所示，我想要一个可以在其自身内部处理已设置数量的应用程序的应用程序。

非常感谢您的阅读，任何想法将不胜感激。

/奎西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:29:32.833

不，出于安全原因，这在 iOS 中是不可能的。但是您有以下选择来修改您的想法：

*   [为应用程序注册协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/Reference/Reference.html)：这将允许您使用协议在应用程序之间发送数据。但是，如果该应用程序不是您制作的并且没有协议，那么您将无法使用它。使用这个想法，可以打开一个应用程序。例如，用“fb://”打开 Facebook 或用“evernote://”打开 evernote。我确信还有其他具有这些协议的应用程序。请注意，在这种情况下，您无法控制应用程序。您只能打开它并向其发送数据。

*   由于您的示例是关于 Facebook、Gmail 的。然后我建议使用他们相应的 API 并在您的应用程序中构建所有内容。许多著名的应用程序提供收费或免费使用的 API。您必须分别检查每一个。

# c# - NAudio如何读取wav中的位置值以及如何获取块总数

> ID：14223928
> 
> 赞同：0
> 
> 时间：2013-01-08T21:00:35.057
> 
> 标签：c#, naudio

我是 NAudio API 的新手，我有几个简单的问题。我正在尝试制作 wav 文件的每个通道的图表。我有一个来自 WaveFileReader 的 WaveStream，我想在每个 BlockAlign 读取 wav 并获取通道数据（样本值）我认为我需要根据采样率对块进行采样。我的问题是：

1.  如何获得总块数
2.  如何读取通道数据样本值
3.  如何获得每秒采样率或样本（或任何格式）

任何建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:40:30.720

我认为您对带有 NAudio 的 DSP 或任何其他音频库一无所知，因此无法获得您需要阅读的有关数字信号处理的块数

# arrays - TCL：列表连接不起作用

> ID：14223930
> 
> 赞同：1
> 
> 时间：2013-01-08T21:00:41.877
> 
> 标签：arrays, list, tcl

我正在尝试将以下两个元素作为一个列表加入尝试过 concat 、 join 、 lappend 等，但它不起作用

```
1134-1215 { W.1.Agg-251 ethernet4/28 island ethernet9/7} 
```

我需要 (links)list 的输出，其第一个元素是 1134 ，第二个元素是 W.1.Agg-251 等

```
 for {set index 0 } { $index <=328 } {incr index} {
     lappend links   [lindex $result2 $index] [lindex $list4 $index]
 }

 puts "===>$links" 
```

其中结果 2 是像 {1134-1150 1151-1600 .. } 这样的列表，而 list4 是像 {W.1.Agg-251 ethernet4/28 island ethernet9/7 X.1.Agg-251 ethernet4/29 island ethernet9 这样的列表/9... }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:44:12.740

你可能打算做类似的事情

```
set links [concat $links [lindex $result2 $index] [lindex $list4 $index]] 
```

# ios - 动态更改 UITableView 高度

> ID：14223931
> 
> 赞同：63
> 
> 时间：2013-01-08T21:00:48.417
> 
> 标签：ios, uitableview, dynamic, height

我想根据单元格高度的总和从另一个视图控制器更改我的表格视图的高度，因为它们是动态的。有可能吗？谢谢

添加在：

我基本上拥有的是一个 UserProfileViewController，它在屏幕的一半上有一个容器视图。在那里我添加了不同的其他视图控制器：

![在此处输入图像描述](../Images/b55cf2fcca28c52c6fca790dc5eb38ec.png)

![在此处输入图像描述](../Images/975232ca924c46cfe85af769c14eb7b7.png)

在墙壁按钮的情况下，这是我添加视图控制器及其后续表格视图的方式：

```
- (IBAction)wallButtonPressed:(id)sender
{
    //Check if there is an instance of the viewcontroller we want to display. If not make one and set it's tableview frame to the container's view bounds
    if(!_userWallViewController) {
        self.userWallViewController = [[WallViewController alloc] init];
//        self.userWallViewController.activityFeedTableView.frame = self.containerView.bounds;

    }

    [self.userWallViewController.containerView addSubview:self.userWallViewController.activityFeedTableView];
    //If the currentviewcontroller adn it's view are already added to the hierarchy remove them
    [self.currentViewController.view removeFromSuperview];
    [self.currentViewController removeFromParentViewController];

    //Add the desired viewcontroller to the currentviewcontroller
    self.currentViewController = self.userWallViewController;

    //Pass the data needed for the desired viewcontroller to it's instances
    self.userWallViewController.searchURLString = [NSString stringWithFormat:@"event/user/%@/", self.userID];
    self.userWallViewController.sendCommentURLString = [NSString stringWithFormat:@"event/message/%@", self.userID];

    [self.userWallViewController.activityFeedTableView reloadData];

    self.userWallViewController.totalCellHeight = ^(float totalCellHeight){

        self.scrollView.contentSize = CGSizeMake(320.0, totalCellHeight);
        CGRect newFrame = self.userWallViewController.containerView.frame;
        newFrame.size.height = totalCellHeight + 33.0;
        self.userWallViewController.containerView.frame = newFrame;

        self.userWallViewController.activityFeedTableView.frame = self.containerView.bounds;
    };

    //Add this containerview to the desired viewcontroller's containerView
    self.userWallViewController.containerView = self.containerView;

    //Add the needed viewcontroller and view to the parent viewcontroller and the containerview
    [self addChildViewController:self.userWallViewController];
    [self.containerView addSubview:self.userWallViewController.view];

    //CLEAN UP THE CONTAINER VIEW BY REMOVING THE PREVIOUS ADDED TABLE VIEWS
    [self.userFansViewController.userSimpleTableView removeFromSuperview];
    [self.fanOfViewController.userSimpleTableView removeFromSuperview];
    [self.userPublishedMovellaListViewController.gridView removeFromSuperview];

    [self.userPublishedMovellaListViewController removeFromParentViewController];

    self.userPublishedMovellaListViewController = nil;
} 
```

在那个viewcontroller中，这是我初始化我的tableview的地方：

```
-(UITableView *)activityFeedTableView
{
    if (!_activityFeedTableView) {
        _activityFeedTableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 850.0) style:UITableViewStylePlain];
    }
    return _activityFeedTableView;
} 
```

我正在计算单元格高度的总和，问题是在调用 te tableview 的 getter 之后调用单元格的高度方法。所以我需要某种方法来知道何时对所有单元格完成单元格的高度方法，然后我可以调整我的表格视图的大小。谢谢

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-01-09T03:51:57.100

没有系统功能可以根据表格视图的内容更改表格的高度。话虽如此，可以根据内容以编程方式更改 tableview 的高度，特别是基于`contentSize`tableview 的高度（这比自己手动计算高度更容易）。一些细节会有所不同，具体取决于您是否使用作为 iOS 6 一部分的新自动布局。

但是假设您正在配置表格视图的底层模型`viewDidLoad`，如果您想调整表格视图的高度，您可以在以下位置执行此操作`viewDidAppear`：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self adjustHeightOfTableview];
} 
```

同样，如果您曾经为 tableview 执行`reloadData`（或以其他方式添加或删除行），您需要确保您也手动调用`adjustHeightOfTableView`那里，例如：

```
- (IBAction)onPressButton:(id)sender
{
    [self buildModel];
    [self.tableView reloadData];

    [self adjustHeightOfTableview];
} 
```

所以问题是我们应该`adjustHeightOfTableview`怎么做。不幸的是，这取决于您是否使用 iOS 6 自动布局。您可以通过打开故事板或 NIB 并转到“文件检查器”来确定是否打开了自动布局（例如，按`option`+ `command`+`1`或单击右侧面板上的第一个选项卡）：

![在此处输入图像描述](../Images/bc37a449fb1ce970a58071fd4d708fe5.png)

让我们假设一下自动布局已关闭。在这种情况下，它非常简单，`adjustHeightOfTableview`只需调整`frame`tableview 的：

```
- (void)adjustHeightOfTableview
{
    CGFloat height = self.tableView.contentSize.height;
    CGFloat maxHeight = self.tableView.superview.frame.size.height - self.tableView.frame.origin.y;

    // if the height of the content is greater than the maxHeight of
    // total space on the screen, limit the height to the size of the
    // superview.

    if (height > maxHeight)
        height = maxHeight;

    // now set the frame accordingly

    [UIView animateWithDuration:0.25 animations:^{
        CGRect frame = self.tableView.frame;
        frame.size.height = height;
        self.tableView.frame = frame;

        // if you have other controls that should be resized/moved to accommodate
        // the resized tableview, do that here, too
    }];
} 
```

但是，如果您的自动布局打开，`adjustHeightOfTableview`则会为您的 tableview 调整高度约束：

```
- (void)adjustHeightOfTableview
{
    CGFloat height = self.tableView.contentSize.height;
    CGFloat maxHeight = self.tableView.superview.frame.size.height - self.tableView.frame.origin.y;

    // if the height of the content is greater than the maxHeight of
    // total space on the screen, limit the height to the size of the
    // superview.

    if (height > maxHeight)
        height = maxHeight;

    // now set the height constraint accordingly

    [UIView animateWithDuration:0.25 animations:^{
        self.tableViewHeightConstraint.constant = height;
        [self.view setNeedsUpdateConstraints];
    }];
} 
```

为了使后一种基于约束的解决方案与自动布局一起使用，我们必须首先处理一些事情：

1.  通过单击此处按钮组中的中心按钮，确保您的 tableview 具有高度约束，然后选择添加高度约束：

    ![添加高度约束](../Images/8b14c970656fc998dd9020f5a9a9b2a0.png)

2.  然后`IBOutlet`为该约束添加一个：

    ![添加 IBOutlet](../Images/5e9b26596280a3ca4b625bddf367d58d.png)

3.  确保调整其他约束，以便在以编程方式调整大小 tableview 时它们不会发生冲突。在我的示例中，tableview 有一个尾随空间约束，将其锁定到屏幕底部，因此我必须调整该约束，以便它不会被锁定在特定大小，而是可以大于或等于一个值，并且具有较低的优先级，因此 tableview 的高度和顶部将统治这一天：

    ![调整其他约束](../Images/08518f52b4511f1038c1393c7674bc1f.png)

    您在此处使用其他约束做什么将完全取决于您在表格视图下方的屏幕上拥有的其他控件。与往常一样，处理约束有点尴尬，但它确实有效，尽管你的具体情况完全取决于你在现场还有什么。但希望你能明白。最重要的是，使用自动布局，请确保调整您的其他约束（如果有）以灵活地考虑变化的 tableview 高度。

如您所见，如果您不使用自动布局，则以编程方式调整 tableview 的高度要容易得多，但如果您使用，我会提供两种选择。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-19T14:21:40.403

通过 xib 或情节提要创建您的单元格。给出它的出口内容。现在在 CellForRowAtIndexPath 中调用它。例如。如果要根据评论的标签文本设置单元格高度。 ![在此处输入图像描述](../Images/e335704ae2559c99c23180dc73bdae44.png)

所以设置你 commentsLbl.numberOfLine=0;![在此处输入图像描述](../Images/1a49fdce9257c6a2a673611c6a81a795.png)

所以设置你 commentsLbl.numberOfLine=0;

然后在 ViewDidLoad

```
 self.table.estimatedRowHeight = 44.0 ;
self.table.rowHeight = UITableViewAutomaticDimension; 
```

现在

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
return UITableViewAutomaticDimension;} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-17T03:06:50.367

这里的很多答案都不尊重表格的变化或者太复杂了。`UITableView`使用自动布局时，使用将正确设置的子类`intrinsicContentSize`是一个更容易的解决方案。不需要高度限制等。

```
class UIDynamicTableView: UITableView
{
    override var intrinsicContentSize: CGSize {
        self.layoutIfNeeded()
        return CGSize(width: UIViewNoIntrinsicMetric, height: self.contentSize.height)
    }

    override func reloadData() {
        super.reloadData()
        self.invalidateIntrinsicContentSize()
    }
} 
```

在界面构建器中将您的 TableView 的类设置为`UIDynamicTableView`并观察魔术，因为此 TableView 将在调用`reloadData()`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-11T15:54:44.153

这可以通过 viewDidAppear 中的 1 行代码来大大简化：

```
 override func viewDidAppear(animated: Bool) {
        super.viewDidAppear(animated)

        tableViewHeightConstraint.constant = tableView.contentSize.height
    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-25T13:35:20.893

Rob 的解决方案非常好，只是在他的`-(void)adjustHeightOfTableview`方法中调用

```
[self.view needsUpdateConstraints] 
```

什么都不做，它只是返回一个标志，而不是调用

```
[self.view setNeedsUpdateConstraints] 
```

会产生想要的效果。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-14T13:02:25.120

为了调整我的桌子大小，我在我的 tableview 控制器中使用了这个解决方案，非常好：

```
[objectManager getObjectsAtPath:self.searchURLString
                         parameters:nil
                            success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                NSArray* results = [mappingResult array];
                                self.eventArray = results;
                                NSLog(@"Events number at first: %i", [self.eventArray count]);
                                CGRect newFrame = self.activityFeedTableView.frame;
                                newFrame.size.height = self.cellsHeight + 30.0;
                                self.activityFeedTableView.frame = newFrame;

                                self.cellsHeight = 0.0;

                            }
                            failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                                message:[error localizedDescription]
                                                                               delegate:nil
                                                                      cancelButtonTitle:@"OK"
                                                                      otherButtonTitles:nil];
                                [alert show];
                                NSLog(@"Hit error: %@", error);
                            }]; 
```

调整大小部分是在一个方法中，但这里只是为了让您可以看到它。现在我唯一的问题是在另一个视图控制器中调整滚动视图的大小，因为我不知道 tableview 何时完成调整大小。目前我正在使用 performSelector: afterDelay: 来做这件事，但这真的不是一个好方法。有任何想法吗？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-30T11:12:49.807

使用简单易行的代码

```
func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
        let myCell = tableView.dequeueReusableCellWithIdentifier("mannaCustumCell") as! CustomCell
        let heightForCell = myCell.bounds.size.height;

        return heightForCell;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-06T08:05:06.787

我发现以编程方式添加约束比在情节提要中容易得多。

```
 var leadingMargin = NSLayoutConstraint(item: self.tableView, attribute: NSLayoutAttribute.LeadingMargin, relatedBy: NSLayoutRelation.Equal, toItem: self.mView, attribute: NSLayoutAttribute.LeadingMargin, multiplier: 1, constant: 0.0)

    var trailingMargin = NSLayoutConstraint(item: self.tableView, attribute: NSLayoutAttribute.TrailingMargin, relatedBy: NSLayoutRelation.Equal, toItem: mView, attribute: NSLayoutAttribute.TrailingMargin, multiplier: 1, constant: 0.0)

    var height = NSLayoutConstraint(item: self.tableView, attribute: NSLayoutAttribute.Height, relatedBy: NSLayoutRelation.Equal, toItem: nil, attribute: NSLayoutAttribute.NotAnAttribute, multiplier: 1, constant: screenSize.height - 55)

    var bottom = NSLayoutConstraint(item: self.tableView, attribute: NSLayoutAttribute.BottomMargin, relatedBy: NSLayoutRelation.Equal, toItem: self.mView, attribute: NSLayoutAttribute.BottomMargin, multiplier: 1, constant: screenSize.height - 200)

    var top = NSLayoutConstraint(item: self.tableView, attribute: NSLayoutAttribute.TopMargin, relatedBy: NSLayoutRelation.Equal, toItem: self.mView, attribute: NSLayoutAttribute.TopMargin, multiplier: 1, constant: 250)

    self.view.addConstraint(leadingMargin)
    self.view.addConstraint(trailingMargin)
    self.view.addConstraint(height)
    self.view.addConstraint(bottom)
    self.view.addConstraint(top) 
```

# google-maps - Google 地理编码和路线 API 用例

> ID：14223933
> 
> 赞同：0
> 
> 时间：2013-01-08T21:00:49.687
> 
> 标签：google-maps, google-geocoding-api

这更像是一个非技术性问题，但在这里。

我已经编写了几个工具，可以利用 Google Geocode 和 Directions Web API 作为我为基于桌面的商业 GIS 应用程序编写（但未发布）的一些“插件/扩展”类型软件的一部分。这些工具当然遵守 2500 个地理编码/天的限制和 10 个请求/秒的限制。我编写了其他几个地理编码/方向工具，这些工具与其他免费/无限制的 Web API（ESRI、OSM 等）相得益彰。由于 Google 非常有名，我也想包含 Google API。但是，在阅读 Google API 服务条款时[https://developers.google.com/maps/terms#section_10_12](https://developers.google.com/maps/terms#section_10_12)，我的非基于网络的应用程序的用例在法律上似乎有点模糊......更多细节：我的软件下载是免费的，但是除非获得完整许可，否则处理限制相对较小（< 10 个地理编码/路线）购买（从我这里）。对于基于 Google 的工具，我的 GUI 设置为包含 Google 的“客户端 ID”和“数字签名”参数（带有解释和网络链接），以便最终用户可以使用他们的 Google 商业许可证。此外，我的软件将返回的地理编码/方向结果编码为标准 GIS 格式，并且可以更改输出坐标系。我的软件没有在“谷歌地图”基础层上显示地理编码/方向结果，但也不一定在另一个“地图”上显示它（例如：“必应地图”）。结果显示在能够显示任何地理空间数据层的画布上。地理编码/方向工具集，其中“Google API”将是可选参数，“OSM API”和“ESRI API”将是整个软件的一个子集（但重要的子集），它执行与地理编码无关的许多其他事情/方向。无论如何，我想为我的地理编码/路由工具集添加一个“Google API”选项。

我的基本问题是：提供上述用例，我是否可以善意地在我的软件中包含 Google Geocode/Directions Web API？如果答案是“否”，是否有任何用例可以在我的软件中使用 Google Geocode 和 Directions Web API？

任何回应（尤其是来自谷歌地图工作人员！）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:20:06.430

这违反了他们的服务条款。以下是页面的链接和片段。我最近在工作中处理这个问题。

[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/) 注意：Directions API 只能与在 Google 地图上显示结果结合使用；禁止使用路线数据而不显示请求路线数据的地图。此外，方向的计算会产生版权和警告，必须以某种方式向用户显示。有关允许使用的完整详细信息，请参阅 Maps API 服务许可限制条款。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/) 注意：Geocoding API 只能与谷歌地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。有关允许使用的完整详细信息，请参阅 Maps API 服务许可限制条款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T01:12:27.903

尽管早在 2013 年就有人问过这个问题，但这里是截至 2016 年 3 月 21 日的当前 Google Maps API 常见问题解答的摘录。

***我可以在我的非 Web 应用程序中使用 Google 地图吗？**
是的，Google Maps API 现在可以在桌面应用程序中使用，前提是它们遵守服务条款的其他限制。请注意，为了使桌面应用程序被视为“可公开访问”，必须有一个可公开访问的网页，可以从中下载该应用程序。有关详细信息，请参阅服务条款第 9.1 节。*

因此，在某些条件下，它是“现在”可能的。

# gdb - GDB 说符号“stdout”不在上下文中

> ID：14223935
> 
> 赞同：1
> 
> 时间：2013-01-08T21:01:02.813
> 
> 标签：gdb

我在**.gdbinit**中定义了一个调试宏说：

```
define printinfo
  pinfo(stdout, $arg0)
end 
```

但是，当我运行 gdb 并使用`printinfo somedata`时，gdb 会抛出我：

```
No symbol "stdout" in current context. 
```

据我所知，stdout 是 c 中的标准文件描述符。但是在这里找不到。

需要你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:14:00.383

> 当前上下文中没有符号“stdout”

您可能正在使用`#define stdout`用于其他用途的 libc 版本。预处理包含以下内容的文件：

```
 #include <stdio.h>
 ----before----
 stdout
 ----after---- 
```

然后看看`stdout`扩展成什么。`stdout`预处理后可能不再存在。

# html - 如何将菜单与幻灯片对齐

> ID：14223936
> 
> 赞同：0
> 
> 时间：2013-01-08T21:01:07.353
> 
> 标签：html, css

我有一个我在记事本中创建的网站，我似乎无法让 css 菜单排队

与我的 javascript 幻灯片完全一致

我可以弄乱填充以使菜单更长，但它仍然不会正确排列

这是网页的图像

[http://img27.imageshack.us/img27/2/websitequestion1.jpg](http://img27.imageshack.us/img27/2/websitequestion1.jpg)

这是代码，

```
 <head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    <script src="galleria/galleria-1.2.8.js"></script>
    <style>
        #galleria{ width: 1020px; height: 386px;margin:0px auto;}
           body
     {
      background-image:url('bg.jpg');
      background-repeat:no-repeat;
      } 
      body {

            text-align: center;
        }
     /* Menu Start Here */

       #menu li {
            display: inline;
            list-style: none;
            padding: 0;
        }

        #menu li a {

            border: 1px solid white;
            padding: 15px 40px 15px 40px;
            text-decoration: none;
            color:black;
            margin-left: -5px;
            /* This is the background used for the animation */
            background-image: url('image2.jpg');
            /* Align the image position to the left of the a */
            background-position: left;
            -webkit-transition: all 0.8s ease-in-out;
            /* Animation with transition in Firefox (No supported Yet) */
            -moz-transition: all 0.8s ease-in-out;
            /* Animation with transition in Opera (No supported Yet)*/
            -o-transition: all 0.8s ease-in-out;
        }

        #menu li a:hover {
            color: white;
            /* Align the image position of the background to the right*/
            background-position:right;
        }

    </style>
    </head>
     <body>

         <div id="wrap">

        <h1> </h1>
        <ul id="menu">
            <li> <a href="#">Home</a> </li>
            <li> <a href="#">Products</a> </li>
            <li> <a href="#">Services</a> </li>
            <li> <a href="#">About</a> </li>
            <li> <a href="#">Contact</a> </li>
        </ul>

    </div>
    <div id="galleria">
        <img src="pic1.jpg">
        <img src="pic2.jpg">
        <img src="pic3.jpg">
        <img src="pic4.jpg">

    </div>
    <script>
        Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
        Galleria.run("#galleria"); 

    </script>

     </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:19:57.423

首先，您希望#galleria 和#wrap div 具有相同的宽度和边距，因此添加：

```
#wrap {
    margin: 0 auto;
    width: 1020px;
} 
```

接下来，为了使您的菜单项大小合适，您需要放弃 display:inline; 对于您的列表项（因为您无法为内联项设置宽度。所以您需要以下内容：

```
#menu li {
    float: left;
    width: 20%;
}

#menu li a {
    display: block;
} 
```

你可以很容易地使用 display:inline-block; 取决于您需要支持的浏览器。有几种方法可以解决这个问题，但这应该会让你朝着正确的方向前进。另外，如果你浮动你的 li，你需要添加 overflow:hidden; 或浮动：左；或在 ul 上使用明确的修复方法，以便包含浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:09:38.277

添加如下内容：

```
margin: 0 auto;
width: 380px; 
```

到你想要居中的愿望 div。在你的情况下，我会在 galeria 周围添加一个 DIV 以使其居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:15:42.007

可能是默认的用户代理样式表导致无序列表也被移动。

```
#menu { margin-left: 0; padding-left: 0; } 
```

可能会有所帮助，许多浏览器默认为列表元素添加左边距

# node.js - 类型错误：对象# 没有方法“findByUsername”

> ID：14223937
> 
> 赞同：0
> 
> 时间：2013-01-08T21:01:09.327
> 
> 标签：node.js, passport.js

我正在尝试`passport-local`如下使用：

**用户.js：**

```
var Users = function() {}
Users.prototype.findByUsername = function(username, cb) {
    var user = { name: username };
    cb(null, user);
};
Users.prototype.verify = function(username, password, done) {
    this.findByUsername(username, function(err, user) {
        done(null, user);
    });
};

module.exports = Users; 
```

在**app.js**中：

```
var Users = require('./users');
var users = new Users();

passport.use(new LocalStrategy(users.verify)); 
```

当我尝试登录时，我得到`TypeError: Object #<Strategy> has no method 'findByUsername'`.

我是 Javascript（和 node.js）的新手，但我做了一些搜索，我认为我正确使用了构造函数模式。

那么为什么`this`设置为 的实例`Strategy`，而不是 的实例`Users`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:47:42.817

在行

```
passport.use(new LocalStrategy(users.verify)); 
```

您正在将函数传递给 LocalStrategy ，这会改变它的上下文（函数是 JavaScript 中的一等公民）。`this`不再指向 User 对象，而是指向 Strategy。因此，您需要将您的函数绑定到用户上下文。

有点疯狂的猜测建议：

```
Users.prototype.verify = function(username, password, done) {
    this.findByUsername(username, function(err, user) {
        done(null, user);
    });
}.bind(Users.prototype); 
```

# java - 拆分字符串java

> ID：14223938
> 
> 赞同：3
> 
> 时间：2013-01-08T21:01:18.303
> 
> 标签：java, string, split

如果我通过 |，我刚刚注意到 .split() 函数有些奇怪。对它来说，它将字符串拆分为字符。我用以下方法对其进行了测试：

```
String s = "Hiya there | how are you | im fine thanks";
for(String str : s.split("|")) {
    System.out.println(str);
} 
```

并将其拆分为单独的字符。我尝试反斜杠，它没有工作。

有谁知道如何将它实际拆分 | ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T21:03:31.290

`String#split`将正则表达式作为参数，其中`|`有特殊含义，用于`alternation`.

您可以使用两种方法让自己摆脱困境：-

1.  逃脱`|`。请记住，在 Java 中您需要使用*双反斜杠*：-

    ```
    s.split("\\|"); 
    ```

2.  使用字符类：-

    ```
    s.split("[|]"); 
    ```

在字符类中，除 之外的任何字符`-`在中间使用时也没有任何特殊含义。所以，`[|]`只是一个`|`而已。

是的，您还需要在@JanDvorak 的评论中指定的`]`字符*类中转义。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:03:04.170

`|`是正则表达式世界中的元字符，为了将其视为普通字符，您必须使用反斜杠对其进行转义`\\|`：

```
public static void main(String...args) throws ParseException{
        String s = "Hiya there | how are you | im fine thanks";
        for(String str : s.split("\\|")) {
            System.out.println(str);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:57:10.280

我总是将方括号与正则表达式一起使用，因为它们通常会随着新需求的出现而变大，并且与反斜杠相比，方括号更容易理解。

```
public static void main(String...args) throws ParseException{
    String s = "Hiya there | how are you | im fine thanks";
    for(String str : s.split("[|]")) {
        System.out.println(str);
    }
} 
```

# javascript - 部署时 ASP.NET 包不起作用 (debug="false")

> ID：14223942
> 
> 赞同：6
> 
> 时间：2013-01-08T21:01:26.623
> 
> 标签：javascript, asp.net

在开发捆绑中，未合并和未压缩的文件按预期工作，但在使用 web.config 设置部署站点后启用捆绑

```
<compilation debug="false" targetFramework="4.5" /> 
```

获取对捆绑包的请求的结果可能在顶部包含类似于以下内容的注释

```
/* Minification failed. Returning unminified contents.
.. errors like JS1002 or JSxxxx errors 
```

在其他情况下，缩小不会引发错误，但某些 javascripts 无法运行或在执行期间出现错误。

捆绑后其他工作的javascript中的什么语法可能会导致这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T21:01:26.623

可能导致这种情况的一种情况是单行注释 // 作为 javascript 文件的最后一行。这将导致下一个文件附加至少第一行也被注释掉

例如，如果您有一个捆绑包

```
bundles.Add(New ScriptBundle("~/bundles/test").Include(
            "~/Scripts/adder.js",
            "~/Scripts/printer.js")) 
```

加法器.js

```
function adder(a, b) {
    return a + b;
}
//this is the adder.js 
```

打印机.js

```
printer = true;

if (printer) {
    alert("It works");
    document.getElementById("itWorked").textContent = "It worked";    
} 
```

# jquery - 我将如何编写一个 jQuery 选择器来抓取孩子$（这个）？

> ID：14223944
> 
> 赞同：-3
> 
> 时间：2013-01-08T21:01:27.540
> 
> 标签：jquery, jquery-selectors

我试过了：

```
$(this).nextAll("input").get(0) 
```

它不仅不起作用，而且看起来如果它起作用了，那将是矫枉过正。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T21:02:38.227

```
//child
$(this).children('input');

//descendant
$(this).find('input');
$('input', this); 
```

顺便说一句，`.nextAll`是给兄弟姐妹的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:02:10.707

简单地使用这个：

```
$('input', this) 
```

如果您需要 DOM 元素并且没有 jQuery 包装的元素，请使用

```
$('input', this).get(0) 
```

[nextAll](http://api.jquery.com/nextAll/)不寻找孩子，而是寻找兄弟姐妹。这就是您的代码无法正常工作的原因。

# javascript - Javascript 正则表达式无法替换某些特殊字符

> ID：14223947
> 
> 赞同：1
> 
> 时间：2013-01-08T21:01:49.447
> 
> 标签：javascript, regex

我有这个 Javascript 正则表达式：

```
 body = body.replace(/[\x80-\xFF]/g,"#"); 
```

我希望用它来替换表中的[字符](http://www.i18nqa.com/debug/utf8-debug.html)。但是，我无法替换该页面表格上以红色突出显示的字符。我无法理解为什么。有人可以告诉我为什么会这样以及解决方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:48:22.177

一种解决方法是改用 Unicode 范围，当我在控制台中的示例页面上尝试它时，这有效（我认为您正在尝试这样做）：

```
document.body.innerHTML = document.body.innerHTML.replace(/[\u0152-\u2122]/g,"#"); 
```

# java - Java 从随机数池中选择

> ID：14223951
> 
> 赞同：1
> 
> 时间：2013-01-08T21:01:59.690
> 
> 标签：java, random

我正在用java制作一个类似宾果游戏的程序，我想知道是否可以从池中选择一个数字，然后将其划掉。我正在考虑将 75（宾果游戏数字）放入一个数组中，然后让它从那里选择它，但我似乎无法找到一种方法来摆脱这个数字，一旦它被选中。例如，我只想一次性调用 55 号，然后让它消失，或者一旦我的随机函数调用它就无法从池中访问它。

谢谢罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:10:13.973

1.  生成数组 1..75。
2.  随机播放。
3.  当时读一本。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle%28java.util.List%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:11:19.257

将所有 75 个数字放入一个数组中。

调用`Arrays.shuffle()`数组。

按顺序读取数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T21:08:31.790

（删除了我之前的答案，因为我看错了问题）

我能想到的最简单的方法是将它们存储在 中`ArrayList`，跟踪大小并将其输入随机数生成器以随机访问索引并在使用后删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:09:14.107

1.  创建整数集合
2.  随机生成一个范围从零到 collection.size()-1 的 int
3.  从步骤 2 中删除随机 int 索引处的项目。该项目是您呼叫的号码，将不再可选择。

# ip - 自定义的基于 IP 的协议会起作用吗？

> ID：14223956
> 
> 赞同：0
> 
> 时间：2013-01-08T21:02:11.033
> 
> 标签：ip, tcp-ip

假设有人发明了一种新协议，我将把它放在 IP 之上。来自世界另一端的两台计算机是否能够与之通信，即路由器会转发非标准 TCP/UDP/ICMP 的帧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:26:05.167

是的，如果它建立在 IP 之上，那么它可以通过 Internet 进行路由。IP 协议定义了标头和有效负载。标头用于路由。因此，您可以通过 Internet 将自定义的基于 IP 的协议数据从一台计算机发送到另一台计算机。

但是，两台计算机都需要自定义驱动程序来发送、接收和理解数据。

我不知道你为什么要打扰。如果您要发送自定义数据，最好在 tcp 或 udp 之上编写应用程序级协议，并利用已内置于所有计算机和操作系统中的网络层。它会更容易编写、维护和调试。

# java - AuthenticationHandler 中的 JASIG 外部重定向

> ID：14223962
> 
> 赞同：1
> 
> 时间：2013-01-08T21:02:30.580
> 
> 标签：java, spring, cas, jasig

我已经走到尽头了，我想这里有人可能会帮助我。我正在使用最新版本的 JASIG CAS 和 Java，但我碰壁了。我有一个 AuthenticationHandler 的实现，我正在尝试在身份验证失败时重定向到外部 URL。我不知道如何在处理程序中获取 RequestContext（使用 WebUtils.getHttpServletResponse(context)）或在 login-webflow.xml 中设置 flowscope 变量，因为我没有从 webflow 调用处理程序。

我需要为每个特定的失败制作 URL，因为它在重定向中包含一个错误代码，所以我真的很难过。有没有人有任何地方可以指点我或关于如何完成重定向的想法？

感谢任何可以提供一些提示的人！

# google-app-engine - 无法将从交易中获得的实体关联到 Objectify 中的另一个实体

> ID：14223966
> 
> 赞同：0
> 
> 时间：2013-01-08T21:02:44.330
> 
> 标签：google-app-engine, entity-relationship, objectify

我对 Objectify 中的实体关系有一些问题。我的应用程序是一个事件应用程序，其中事件具有不同类别的门票；每张票都归一个用户所有。我有一个父/子层次结构，例如 Event > TicketType > Ticket。因此，Event 是 TicketType 的 @Parent，即 Ticket 的 @Parent。

这是我的实体：

```
@Entity
public class Event {
    ...
    @Load
    private Set<Ref<TicketType>> ticketTypes = new HashSet<Ref<TicketType>>();
    ...
}

@Entity
public class TicketType {
    ...
    @Parent
    private Ref<Event> event;
    ...
}

@Entity
public class Ticket {
    ...
    @Parent
    @Load
    private Ref<TicketType> ticketType;
    ...
} 
```

我在这样的事务中创建事件：

```
Event ev = ofy().transact(new Work<Event>() {

    @Override
    public Event run() {
    // several statements constructing the event
        ev.setXXXX(X);
    ofy().save().entity(ev).now();
        // Now construct the TicketType entity, then associate it to its parent, Event
    TicketType tt1 = new TicketType("normal", 100, 7);
    tt1.setEvent(ev);
        ofy().save().entity(tt1).now();
        return ev;
    }

}); 
```

使用返回的`ev`，我像这样创建票证：

```
// Generate a VIP ticket
Ticket ticket1 = ev.generateTicket("vip");
// I set the owner with an already saved User entity
ticket1.setOwner(cl);
ofy().save().entity(ticket1).now();
// The user also has a list of all his tickets
cl.addTicket(ticket1); 
```

在 Event.generateTicket(...) 中，我这样做：

```
public synchronized Ticket generateTicket(String type) throws IllegalArgumentException {
    for (Ref<TicketType> reftt : ticketTypes) {
        TicketType tt = reftt.get();
        if (tt.getType().equalsIgnoreCase(type)) {
            if (tt.getAvailable() > 0) {
                Ticket newTicket = new Ticket(RandomGenerator.nextNumber(TICKET_NUMBER_LENGTH), tt);
                newTicket.setExpirationDate(getEndDate());
                // here I set the parent TicketType entity for this new Ticket
                newTicket.setTicketType(tt);
                // the number of available tickets of this type is decreased
                tt.setAvailable(tt.getAvailable() - 1);
                return newTicket;
            } else return null;
        }
    }
    throw new IllegalArgumentException("No such type");
} 
```

我的问题是，父/子关系似乎只在`Event`正确具有所有事件/票证类型列表的实体上受到尊重（通过`ticketTypes`字段，这是一个`Set<Ref<TicketType>>`。但是，该`TicketType`实体没有票证列表（该`tickets`字段为空，因此未保存），而在另一个方向上，中的`TicketType`父引用`Ticket`为空，中的`Event`父引用也为空`TicketType`，尽管我在上述两种情况下都进行了分配。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:16:55.307

我不认为你在这里做错了什么。然而，我相信 Objectify 不会自动加载一对多的关系。获取所有票证类型的正确方法是首先加载 Event 实体，然后对票证类型执行祖先查询。

一些建议：看起来您正在设计实体，就像在关系数据库中设计表一样。这些概念不适用于数据存储。正如 objectify 介绍中所述，您应该将数据存储想象为 hashmap 的 hashmap。在您的票证实体中使用包含票证类型的枚举值的多值属性可能是可行的。更少的实体在数据存储中总是一件好事。

# asp.net-mvc - MVC 3 JSON 字符串未序列化为控制器操作

> ID：14223968
> 
> 赞同：2
> 
> 时间：2013-01-08T21:02:52.870
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3

当前使用 MVC3 并使用 jQuery $.post 函数将 ajax 请求发送到名为“SearchInitiated”的控制器操作。我在这里有点头疼，因为我不确定我的问题到底出在哪里。我敢肯定这是我忽略的一些小事。

当我从 AJAX 调用中调用 Controller 方法时，我将 json 对象（字符串化）传递给控制器​​操作。见下文：

**来自 Chrome 的请求标头**

> 接受：*/* Content-Type:application/x-www-form-urlencoded；charset=UTF-8 User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko)
> 
> 铬/24.0.1312.52 Safari/537.17
> 
> X-Requested-With:XMLHttpRequest

**表单数据视图**

> 连接器ID：1
> 
> sessionId:97e2d8b2-be9e-4138-91ed-42ef9c6a2cd6
> 
> 派对：{"Tag":null,"PartyIdentifier":"1","Address":null,"Address2":null,"BusinessName":"","CellPhoneNumber":null,"CIF":""," City":null,"Country":null,"DateOfBirth":null,"EMailAddress":null,"EmploymentTitle":null,"EmployerAddress":null,"EmployerAddress2":null,"EmployerCity":null,"EmployerName" :null,"EmployerPhoneNumber":null,"EmployerState":null,"EmployerZip":null,"Fax":null,"Firstname":"TEST","Lastname":"USER","MailingAddress":null," MailingAddress2":null,"MailingCity":null,"MailingState":null,"MailingZip":null,"Middlename":null,"PhoneNumber":null,"State":null,"TIN":"1111111","WorkPhoneNumber":null,"Zip":null}

## javascript

```
 var parties =    @(Html.Raw(Json.Encode(Model.SearchParties)));
      function SearchForCustomer(id)
      {

      var currentSelectedParty = GetPartyById(id)
      //SearchPost is a wrapper for $.ajax using default values for dataType and contentType
      SearchPost(URL, {
                'connectorId': '@Model.ConnectorId',
                'sessionId': '@Model.SessionId',            
                'party' :  JSON.stringify( currentSelectedParty ) 
            }
      } 
```

## 控制器

```
 public ActionResult SearchInitiated(int connectorId, string sessionId, SearchParty party)
 {
     code here....
 }

 public class SearchParty
    {
        public SearchParty();
        public SearchParty(string lastname, string firstname);

        public string Address
        {
            get;
            set;
        }
           public string City
        {
            get;
            set;
        }
        public string Country
        {
            get;
            set;
        }
        public string DateOfBirth
        {
            get;
            set;
        }

        .... etc etc
} 
```

但是，聚会对象为空。

如果我将代码更改为以下内容，则所有内容都会正确反序列化为强类型对象。

```
 public ActionResult SearchInitiated(int connectorId, string sessionId, string party)
 {
     JavaScriptSerializer json_serializer = new JavaScriptSerializer();
            SearchParty sp =
                   json_serializer.Deserialize<SearchParty>(party);
 } 
```

我知道我的 json 字符串是有效的，因为它在第二个代码片段中工作并且值正在调用中传递。我还能错过什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:31:29.937

试试这个。

```
public class SearchParty
{
  public string party { get; set; }

}

  [HttpPost]
  public ActionResult SearchInitiated(SearchParty party)
   {     
       ....
       return View();

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T04:41:16.407

可能你需要将`traditional`jQuery.ajax 的 prop 设置为 true 以实现[传统的参数](http://api.jquery.com/jQuery.param/)序列化风格

在文档准备好之后立即放置下面的代码行

```
$(function(){
 jQuery.ajaxSettings.traditional = true;
}); 
```

[**这个**](https://stackoverflow.com/questions/5497093/what-is-traditional-style-of-param-serialization-in-jquery)SO question 可能会进一步帮助您

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T22:26:27.697

我会确保你的模型上有 [Serializable] 属性。另外，请确保您的请求指定了 party={myjson} 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T04:26:31.437

您只需要在控制器中声明一个类“SearchParty”，即可在控制器中检索强类型对象而无需序列化。

```
public class SearchParty  
{
 public string party { get; set; }
}

public ActionResult SearchInitiated(SearchParty party)
{
 code here....
} 
```

请也检查此[链接](https://stackoverflow.com/questions/13920571/how-do-i-access-parameters-of-my-post-request-within-a-controller/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T17:45:42.650

我通过修改 javascript ajax 调用解决了我的错误：

```
 SearchPost(URL, JSON.stringify( {
            'connectorId': '@Model.ConnectorId',
            'sessionId': '@Model.SessionId',            
            'party' :   currentSelectedParty  
        })) 
```

我需要对在 ajax 调用中发送的整个数据对象进行字符串化，而不仅仅是“派对”对象

# java - Java中的多线程编程，使用信号量

> ID：14223973
> 
> 赞同：4
> 
> 时间：2013-01-08T21:02:59.420
> 
> 标签：java, multithreading, semaphore, wait, notify

我正在学习 Java 多线程，但遇到问题，我无法理解信号量。如何按此顺序执行线程？例如：在 image1 上：第 5 个线程开始运行，然后第 1 个和第 2 个线程完成执行。

图 2：

![在此处输入图像描述](../Images/7fd3db6fbf23a4ff3f9ed34e4a46b328.png)

* * *

图 1：

![在此处输入图像描述](../Images/d7ff86de92d96f01765f0e0121eb8753.png)

我现在上传图片以便更好地理解。:))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:11:58.273

通常在 Java 中使用互斥体（也称为监视器），它禁止两个或多个线程访问受该互斥体保护的代码区域

该代码区域是使用`sychronized`语句定义的

```
sychronized(mutex) {
 // mutual exclusive code begin
 // ...
 // ...
 // mutual exclusive code end

} 
```

其中互斥锁定义为例如：

```
Object mutex = new Object(); 
```

为了防止任务启动，您需要在 java.util.concurrency 包中定义的高级技术，例如屏障。

但首先要让自己对这种`synchronized`说法感到满意。

如果您认为您会经常在 java 中使用多线程，您可能需要阅读

《Java 并发实践》

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:48:06.477

使用同步，以便每个线程一次进入该方法或代码的那部分。如果你想

```
public class CountingSemaphore {
  private int value = 0;
  private int waitCount = 0;
  private int notifyCount = 0;

  public CountingSemaphore(int initial) {
    if (initial > 0) {
      value = initial;
    }
  }

  public synchronized void waitForNotify() {
    if (value <= waitCount) {
      waitCount++;
      try {
        do {
          wait();
        } while (notifyCount == 0);
      } catch (InterruptedException e) {
        notify();
      } finally {
        waitCount--;
      }
      notifyCount--;
    }
    value--;
  }

  public synchronized void notifyToWakeup() {
    value++;
    if (waitCount > notifyCount) {
      notifyCount++;
      notify();
    }
  }
} 
```

这是计数信号量的实现。它维护计数器变量“value”、“waitCount”和“notifyCount”。如果 value 小于 waitCount 并且 notifyCount 为空，这会使线程等待。

您可以使用 Java 计数信号量。从概念上讲，信号量维护一组许可。如有必要，每个 acquire() 都会阻塞，直到获得许可，然后再接受它。每个 release() 添加一个许可，可能会释放一个阻塞的获取者。但是，没有使用实际的许可对象；Semaphore 只是对可用数量进行计数并采取相应措施。

信号量通常用于限制可以访问某些（物理或逻辑）资源的线程数。例如，这是一个使用信号量来控制对项目池的访问的类：

```
 class Pool {
   private static final MAX_AVAILABLE = 100;
   private final Semaphore available = new Semaphore(MAX_AVAILABLE, true);

   public Object getItem() throws InterruptedException {
     available.acquire();
     return getNextAvailableItem();
   }

   public void putItem(Object x) {
     if (markAsUnused(x))
       available.release();
   }

   // Not a particularly efficient data structure; just for demo

   protected Object[] items = ... whatever kinds of items being managed
   protected boolean[] used = new boolean[MAX_AVAILABLE];

   protected synchronized Object getNextAvailableItem() {
     for (int i = 0; i < MAX_AVAILABLE; ++i) {
       if (!used[i]) {
          used[i] = true;
          return items[i];
       }
     }
     return null; // not reached
   }

   protected synchronized boolean markAsUnused(Object item) {
     for (int i = 0; i < MAX_AVAILABLE; ++i) {
       if (item == items[i]) {
          if (used[i]) {
            used[i] = false;
            return true;
          } else
            return false;
       }
     }
     return false;
   }

 } 
```

在获取项目之前，每个线程必须从信号量中获取许可，以保证项目可供使用。当线程完成该项目时，它会返回到池中，并向信号量返回一个许可，允许另一个线程获取该项目。请注意，调用 acquire() 时不会持有同步锁，因为这会阻止项目返回到池中。信号量封装了限制对池的访问所需的同步，与维护池本身一致性所需的任何同步分开。

初始化为 1 的信号量，并且使用时最多只有一个可用的许可，可以用作互斥锁。这通常被称为二进制信号量，因为它只有两种状态：一个许可可用，或零个许可可用。当以这种方式使用时，二进制信号量具有属性（与许多 Lock 实现不同），“锁”可以由所有者以外的线程释放（因为信号量没有所有权的概念）。这在一些专门的上下文中很有用，例如死锁恢复。

# html - 链接显示在不同浏览器的不同位置。

> ID：14223974
> 
> 赞同：0
> 
> 时间：2013-01-08T21:03:02.580
> 
> 标签：html, css

我的页面顶部和底部有一堆链接。我将对齐链接在 Chrome 中看起来是对齐的，但是当我使用 Firefox 查看页面时，链接不在同一个位置，它们已经向下移动了几个位置。这让我发疯了。

[这是我网页的链接](http://www.ernsteverything.com/ojk20)

底部链接的 CSS

```
#navbot {
        color:silver;
        white-space:nowrap;
        text-align:left;
        position:relative;
        top:50px;
        left:36px;
        }   

#navbotS {
        color:silver;
        white-space:nowrap;
        text-align:left;
        position:relative;
        top:48px;
        left:44px;
        }

#navbotimg {
       top:0px;
       clear:both;
       float:left;
       position:relative;
       left:168px;
       }

#navbot2 {
       position:relative;
       min-width:800px;
       white-space:nowrap;
       color:silver;
       top: 10px;
       left:190px;
       }

#navbot3 {
       position:relative;
       min-width:1380px;
       white-space:nowrap;
       color:silver;
       top: -8px;
       left:158px;
      }

#mails li {
       float:right;
       list-style:none;
       margin:0 205px 0px -999px;
       } 
```

的HTML

```
 <div id='navbot'> 
<a class="ex2"  href="#" >PERFORMANCE </a>
</div>
<div id='navbotS'> 
<a class="ex3"  href="#">SPORTSWEAR </a>         
</div>

  <div id ='navbotimg'>
  <img src="MAIN_IMAGES/red_line.png" width="8" height="60"> </div> 

  <div id ='navbot2'>
    <a class="ex1 various11" href="FOOTWEAR_SUB_PAGES/NIKE_SNOW.html">ZOOM FORCE ONE ///</a>            
    <a class="ex1 various1" href="FOOTWEAR_SUB_PAGES/MERCURIAL_SUPERFLY.html">MERCURIAL SUPERFLY ///</a> 
    <a class="ex1 various2" href="FOOTWEAR_SUB_PAGES/AIRMAX_MOTO.html">AIRMX MOTO BOOT ///</a> 
    <a class="ex1 various3" href="FOOTWEAR_SUB_PAGES/le-coq-joakim-noah.html">JOAKIM NOAH ///</a> 
    <a class="ex1 various" href="FOOTWEAR_SUB_PAGES/NIKE_BMX.html">DUNK GYRIZO</a>                
  </div>

 <div id ='navbot3'>
      <ul id="mails">  
    <a class="ex1 various5" href="FOOTWEAR_SUB_PAGES/NIKE_AIRMAX_90.html">AIRMAX 90 ///</a>        
    <a class="ex1 various7" href="FOOTWEAR_SUB_PAGES/SUB_PAGE_CORTEZ_FLYMOTION.html" >CORTEZ FLY MOTION ///</a> 
    <a class="ex1 various"  href="FOOTWEAR_SUB_PAGES/sub_page_org.html">ORIGINALS ///</a> 
    <a class="ex1 various8" href="FOOTWEAR_SUB_PAGES/SUB-PAGE-ARTHUR_ASH.html">ARTHUR ASHE ///</a> 
    <a class="ex1 various9" href="FOOTWEAR_SUB_PAGES/SUB_PAGE_STUSSY_DUNK_TRAINER.html">STUSSY DUNK TRAINER ///</a> 
    <a class="ex1 various10"href="FOOTWEAR_SUB_PAGES/SUB_PAGE_AIR_MAX_1.html">AIR MAX I MAXIM</a>            
       <li><a class="mails" href="mailto:info@ernsteverything.com">INFO@ERNSTEVERYTHING.COM&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</a></li>
       <li><a  href="mailto:info@ernsteverything.com"><img src="MAIN_IMAGES/mail_2.png" width="28" height="18" border="0"  ></a></li>              

       </ul>
    </div> 
```

# perl - 如何在脚本中安装 perl 模块

> ID：14223977
> 
> 赞同：-1
> 
> 时间：2013-01-08T21:03:10.970
> 
> 标签：perl, user-interface, cpan, bioinformatics

如何从脚本中安装 perl 模块？我正在使用一个名为 Discovery Studio Visualizer 的程序，它具有内置的脚本接口，我无法使用标准方法安装 Win32::GUI()。我想这样做的原因是因为我想创建一个使用 gui 界面来突变氨基酸的宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:22:09.100

通常，您所要求的不是在 Perl 中完成的。如果您无权访问 Perl 工具链，那么即使您确实使用了一些可用的技术，它们也可能不包含安装所需库所需的工具。此外，他们可能（几乎可以肯定）锁定了安装应用程序的目录，这将进一步限制您安装东西的能力。如果您使用的嵌入式脚本工具恰好使用 Perl 作为其语言，它甚至可能无法从其他文件夹加载库。

话虽如此，您最好的选择是首先尝试在脚本之外安装库。看看你有没有`cpan`命令行工具。 `cpan`是连接到[综合 Perl 存档网络](http://search.cpan.org)的工具，它可以拉取您需要的库（以及这些库的依赖项），并且知道如何调用常见的安装程序脚本。因为它使用 XS（C 库中的 Perl 接口），所以您还需要设置一个 C 编译器，该编译器与您使用的自定义 Perl 版本兼容。最后，您正在使用的工具中内置的 Perl 解释器必须以这样一种方式编译，它甚至可以加载这些库 - 不能保证。

如果您可以使用不需要编译的库并且您的嵌入式解释器设置为支持它，您可以创建一个 PERL5LIB 环境变量并将包含库的任何路径的根位置添加到此变量。然而，我所知道的大多数 Perl GUI 工具包都需要编译。

我当然祝你好运！

# android - BroadCasterReciever 导致程序在重新启动时崩溃

> ID：14223978
> 
> 赞同：0
> 
> 时间：2013-01-08T21:03:14.293
> 
> 标签：android, broadcastreceiver

我的应用程序崩溃，因为我的广播公司在重新启动 android 设备时崩溃了。

我有以下广播员

```
<receiver android:name=".IntentReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.UMS_CONNECTED" />
            <action android:name="android.intent.action.UMS_DISCONNECTED" />
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"/>
            <action android:name="android.intent.action.MEDIA_MOUNTED" />
            <action android:name="android.intent.action.MEDIA_REMOVED" />
            <action android:name="android.intent.action.MEDIA_BAD_REMOVAL" />
            <data android:scheme="file" />
        </intent-filter>
</receiver> 
```

我发现错误是行

```
<data android:scheme="file" /> 
```

我的猜测是，在应用程序恢复时，它会尝试查找文件数据并且它现在为空，或者它现在处于与断电时不同的状态。

有人可以帮我找到解决方案。我需要把它放在最重要的位置，因为即使应用程序不是当前焦点，这个接收器也需要运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:11:54.540

结果证明，解决方案是为整个 onRecieve 方法添加一个 try catch。

# javascript - 使用 Mongoose 读取数组的属性

> ID：14223992
> 
> 赞同：0
> 
> 时间：2013-01-08T21:03:59.510
> 
> 标签：javascript, node.js, mongoose

这是架构：

```
var userschema = new mongoose.Schema({

   user: String,
   pass: String,
   imagen: [{ 

              title: String,
              author: String,
              description: String,
              index: Number,
              path: String,

           }]

}); 
```

我正在尝试使用 'foomodel.find'，在 Schema 的 imagen 数组中查找具有特定属性的元素，我的意思是：

```
usermodel.find({ user: foo, 'imagen.index': 1 }, function (err, imagen){

        if(err) throw err;

        console.log(imagen);

}); 
```

在控制台中，我收到了 this `[]`，当我想收到 imagen 数组元素的属性时，它的索引为 1。我检查了它是否存在。有什么解决办法...？

谢谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:24:23.923

我认为您需要使用[*$elementMatch*](http://docs.mongodb.org/manual/applications/read/)：

```
usermodel.find({ user: foo, "imagen": {"$elemMatch":{"index": 1 }}, 
    function (err, imagen){
        if(err) throw err;
        console.log(imagen);
}); 
```

# android - 在两个不同的类中执行两个异步任务

> ID：14223998
> 
> 赞同：0
> 
> 时间：2013-01-08T21:04:28.897
> 
> 标签：android, android-asynctask

我在两个不同的类中有 2 个 AsyncTask，但问题是当第一个在背景状态下执行时，第二个没有执行。第一个 asyncTask 如果在循环中执行，因为它需要每 5 秒更新一次新数据。如果我停止任务（条件=flase），第二个工作完美。

一级：

```
public class MapScreen extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_screen);

        UpdateUserCords updateUC = new UpdateUserCords();
        updateUC.execute();
    }

class UpdateUserCords extends AsyncTask<String, Void, String> 
{

    @Override
    protected String doInBackground(String... params) {

        while(condition)
        {

            //some code in loop...

            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return null;

    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Void... values) {

        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String result) {

        super.onPostExecute(result);
    }
}

} 
```

二等：

```
public class Groups extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_groups);

    getGroups getGr = new getGroups();
    getGr.execute(); //not executing, no error or crash

}

class getGroups extends AsyncTask<String, Void, String> 
{

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    @Override
    protected String doInBackground(String... params) {
        //some code...
        return null;
    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(String result) {

        super.onPostExecute(result);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:15:49.620

在 Android API 11 之后，`AsyncTask`s 默认开始在串行执行器上运行，这意味着一次只运行一个任务。要获得在 API 11 之前运行的行为`ThreadPoolExecutor`，您需要在代码中指定它，如下所示：

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
  myTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
}
else {
  myTask.execute();
} 
```

请在此处查看更多信息： [http ://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html](http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html)

祝你好运！

PS 不建议`AsyncTask`用于无限线程，`AsyncTask`目的是在后台做一个任务，而不是永远运行，所以如果你想要一个无限线程，我认为你应该将它创建为 a`Thread`而不是`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:07:47.643

您的异步任务处于两个不同的活动中。任何时候只有一项活动处于活动状态。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T21:10:17.210

这两个类都扩展了 Activity，并且只有一个类同时运行。如果您希望任务的执行时间比活动的生命周期长，则必须将其包装到[服务中](http://developer.android.com/guide/components/services.html)