# StackOverflow 问答 13085000-13085999

# java - 静态同步方法与所有代码都在一个同步块中的静态方法

> ID：13085002
> 
> 赞同：0
> 
> 时间：2012-10-26T10:17:04.073
> 
> 标签：java, android, concurrency, static, synchronized

以下代码片段取自 libcore 项目中的 android JellyBean ReferenceQueue.java。

有人能告诉我为什么使用同步块，在 ReferenceQueue.class 上同步，而不是在方法中添加同步限定符吗？在这种情况下，这两种方法在功能上是否等效？

从我看到的类似问题来看，使方法同步似乎更有效。

干杯，马特

```
public class ReferenceQueue<T> {
... <snip> ...
public static Reference unenqueued = null;

static void add(Reference<?> list) {
    synchronized (ReferenceQueue.class) {
        if (unenqueued == null) {
            unenqueued = list;
        } else {
            Reference<?> next = unenqueued.pendingNext;
            unenqueued.pendingNext = list.pendingNext;
            list.pendingNext = next;
        }
        ReferenceQueue.class.notifyAll();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:27:04.573

除了方法签名之外，它们完全等效。当您使静态方法同步时，它与在类令牌上同步方法的全部主体相同。当您使非静态方法同步时，它与在 this 指针上同步相同。方法签名差异很少相关，但例如它可能是编译器警告，以覆盖同步方法并使覆盖方法不同步。

# css - 参考父值

> ID：13085003
> 
> 赞同：3
> 
> 时间：2012-10-26T10:17:08.910
> 
> 标签：css, sass

有什么方法可以引用父值，例如每个示例

```
.btn-blue {
     background-color: $light-blue; 
     &:hover {
       background-color: rgba($light-blue,.7);
     }
}
.btn-green {
     background-color: $light-green;
     &:hover {
       background-color: rgba($light-green,.7);
     }
} 
```

我想写一个 :hover 选择器来获取父级的值。就像是

```
.btn-blue {
     background-color: $light-blue; 
}
.btn-green {
     background-color: $light-green;
}
.btn-green, .btn-blue {
     &:hover {
           background-color: rgba($parent_color,.7);
     }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T11:14:45.553

您可以使用 mxins 并将颜色传递给：

```
@mixin btn-color($selColor)
{ 
     background-color: $selColor; 
      &:hover {  background-color: rgba($selColor,.7); 
       } 
 } 
```

并像这样使用它：

```
 .btn-green { @include btn-color($light-green); }
 .btn-blue { @include btn-color($light-blue); } 
```

# jquery - 如何在第一次触摸时打开下拉菜单，点击第二个链接 - Jquery？

> ID：13085005
> 
> 赞同：4
> 
> 时间：2012-10-26T10:17:14.133
> 
> 标签：jquery, drop-down-menu, hover, touch, tap

我正在尝试让下拉菜单在基于触摸的设备上正常工作。菜单在单击时打开良好，但由于父元素也是一个链接，因此它会在选择下拉项之前将用户带到该链接。

有没有办法让（仅在触摸设备上）父元素的第一次点击打开下拉菜单，第二次点击将您带到链接？

我对 HTML 和 CSS 有很好的了解，但对 javascript 却一无所知，所以如果解决方案是基于脚本的，请尽可能描述。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-17T01:00:58.113

看看 DoubleTapToGo：

“当您第一次点击父项时，DoubleTapToGo 会阻止浏览器打开新 URL，但如果连续再次点击则允许。”

[http://osvaldas.info/drop-down-navigation-responsive-and-touch-friendly](http://osvaldas.info/drop-down-navigation-responsive-and-touch-friendly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:53:53.380

```
function createMenu(menuName,menuTitle,menuEntries,left,width) {

 numEntries = menuEntries.length;

document.write('<div class="menuTitle" style="left:0px; width:100px;"');
document.write('onMouseover="menuToggle(\'' + menuName + '\');"');
document.write('onMouseout="menuToggle(\'' + menuName + '\');">');
document.write(menuTitle);
document.write('</div>');

     document.write('<div id="myMenu" class="menu" style="left:0px; width:100px;"');
     document.write('onMouseout="menuToggle(\'' + menuName + '\')">');
     for (i = 0; i < numEntries; i++) {
        document.write('<a href="' + menuEntries[i].url + '" class="menuEntry">' + menuEntries[i].entry + '</a><br>');
     }
     document.write('</div>');

}

  function menuToggle(target) {

     targetMenu = (document.getElementById) ? document.getElementById(target).style : eval("document." + target);
     targetMenu.top = (parseInt(targetMenu.top) == 22) ? -2000 : 22;

     }
  // -->
  </script> 
```

这是用于创建一个下拉菜单的 JavaScript，当鼠标悬停在它上面时会下降 - 它来自 Arman Danesh 的一本书，名为**JavaScript in 10 Simple Steps or Less**。他是一位伟大的作家，并且可能会比我更好地解释这一点 - 但这里有；

您正在做的是创建一个带有 () 中声明的预定义变量的函数。行**numEntries...**将变量 numEntries 的值设置为预定义变量 menuEntries 的长度。换句话说，（在此示例中，编程的条目数为 3，使得 numEntries = 3）无论您编码的条目数是 numEntries 的值。

document.write 的东西可能看起来令人困惑，但它只是保存 HTML 代码的 javascript 代码，因为只是将 div 放在它自己的位置上会破坏程序，因为你将它放在脚本标签中。如果你在任何时候不理解我，只要问我，我会告诉你教科书上的内容，当我稍后拿到课本时。

这是第一个处理的函数，第二个是在鼠标悬停时使菜单下拉的原因。如果不引用这本书，我不知道如何向您解释清楚，但是如果您需要我解释，我会尝试。如果你也需要 HTML 代码来显示菜单，我可以给你整个例子，我的电脑上有。

希望这会有所帮助，请询问您是否需要我做任何事情。我会继续研究如何为您更改触摸屏 x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:28:38.000

这可能会有所帮助。如果你有链接

`<a href="#">your drop down menu</a>`我的意思是添加`#`到`href`

或者在 JavaScript 中执行此操作

```
var link = $('.menu').find('a');

$(document).on('touchstart', link, function (e) {
    e.preventDefault();
    //do your stuff
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T09:29:08.367

```
$('.has-sub').on("touchstart", function (e) {
 var submenu = $(this).find('ul').first();
 var link = $(this); //preselect the link
 if (link.hasClass('hover')) {
       link.removeClass('hover');
       $(submenu).slideUp(0);
       e.stopPropagation()
       return true;
 } else {
       $(submenu).slideDown(0);
       link.addClass('hover');
       e.stopPropagation();
       return false; //extra, and to make sure the function has consistent return points
 } 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-18T15:30:22.790

我的解决方案是在 javascript 中切换 href 内容：

> ```
> // JS
> 
> let dropdown = document.getElementsByClassName("dropdown")   
> let droplink = document.getElementsByClassName("drop-link") 
> //console.log(droplink[0].getAttribute('href')) to check code
> 
> for (let i = 0;i<dropdown.length;i++){ // if you have more than one dropdown
>   dropdown[i].addEventListener('click', function(){
>   // if dropdown is already displaying 
>     if(dropdown[i].classList.contains('YourdisplayDropdownClass')){
>       droplink[i].href = 'myhtmlpage.html'
>     } else {
>       droplink[i].href = '#'
>       dropdown[i].classList.add('YourdisplayDropdownClass');
>     }
>   });
> }; 
> ```

HTML 中的结构

> ```
>  <nav>
>    <ul>
>     <li class="dropdown"><a class="drop-link" ref="myhtmlpage.html">MyHTMLpage</a>
>      <ul class="drop-menu">
>       <li><a href="mysubpage1.html" class="drop-item">MySubpage1</a></li>
>       <li><a href="mysubpage2.html" class="drop-item">MySubpage2</a></li>
>      </ul>
>     </li>
>    </ul>
>   </nav> 
> ```

# ios5 - NSURLConnection 连接：didReceiveData：不在 ios5 上调用

> ID：13085007
> 
> 赞同：2
> 
> 时间：2012-10-26T10:17:25.697
> 
> 标签：ios5, nsurlconnection

一个奇怪的问题。我想从网上加载一张图片，所以我使用 NSURLConnection 来做。当我在 ios4.3 上测试我的代码时，一切正常。但是当我在 ios5.0 上启动我的应用程序时，我发现连接：didreceiveData 不管我做什么都没有被调用。otherelse函数调用正常，就像ios4.3的connectionDidFinishLoading和ios5.0的connectionDidFinishDownloading一样。所以你们，谁能帮助我，谢谢先进！

```
-(void)load
{
    if(isDownloading){
        return;
    }
    if(conn != nil){
        [conn release];
    }
    if(data != nil){
        [data release];
        data = nil;
    }
    [self isDownloading:YES];
    ImageDownloadData* imageDownloadData = [imageList objectAtIndex:count];
    NSURL* url = [imageDownloadData url];
    NSURLRequest* request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if(conn){
        [conn start];
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)rd
{
    NSLog(@"data");
    if(!data){
        data = [[NSMutableData alloc] initWithData:rd];
        return;
    }
    [data appendData:rd];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:25:59.387

我不确定这是否与您遇到的问题相同，但我遇到了类似的问题，并通过取出 in 方法和对`NSURLConnectionDownloadDelegate`. 显然，代表`NSURLConnection`只能实现一次派生的两个协议之一`NSURLConnectionDelegate`。

[在 4.3 和 5.0 之间有一些奇怪的 API 变化](https://stackoverflow.com/questions/7862316/ios5-nsurlconnection-methods-deprecated)。Apple 将 NSURLConnectionDelegate 从非正式协议更改为正式协议，并将其中一些方法分支为两个额外的子协议： [NSURLConnectionDataDelegate](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)和[NSURLConnectionDownloadDelegate](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDownloadDelegate_Protocol/NSURLConnectionDownloadDelegate/NSURLConnectionDownloadDelegate.html)。（奇怪的是，他们贬低了 NSURLConnectionDelegate 中相同的方法，但没有记录他们搬到哪里。）

在针对 6.0 API 编译我的代码时，我一直注意到，`connection: didReceiveData:`如果我从`NSURLConnectionDataDelegate`和`NSURLConnectionDownloadDelegate`. 我实现的所有其他方法都按预期调用。

# wcf - 在温莎城堡的拦截器之间传递数据

> ID：13085010
> 
> 赞同：0
> 
> 时间：2012-10-26T10:17:36.380
> 
> 标签：wcf, dependency-injection, castle-windsor, interceptor

我正在为我的 WCF 项目采用 Castle Windsor，对此我感到非常惊讶。但是，我有一个场景，我真的不知道温莎城堡是否支持。例如，我有以下链式拦截器

```
Interceptor 1 > Interceptor 2 > Interceptor 3 > Interceptor 4 > Real method 
```

拦截器 1 返回一些数据，我希望它在拦截器 2 中可用 拦截器 2 反过来是否工作并返回我想在 3,4 拦截器中使用的数据。真实的情况是我们有一个 WCF 服务，Interceptor 1 会将请求头解析为一个 Header 对象（用户名、密码等）。后面的拦截器和真正的方法将利用这个 Header 对象。我知道我可以使用 Session 变量来传输数据，但它是一种内置的、更优雅、更可靠的处理方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:05:53.163

你的提议：

1.  使方法的实现依赖于存在的拦截器
2.  引入拦截器之间的依赖关系。

这些都是坏事。

[从概念上讲，拦截器是装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)的一个很好的实现。换句话说，拦截器可以修改行为，但应该以对其下面的层透明的方式进行。拦截器不应更改被调用的公共接口或依赖项。拦截器可以依赖于最终方法，但最终方法不应该依赖于拦截器。

**如果调用该方法需要一个标头对象，我将创建一个显式的 WCF 行为（可能是一个[IDispatchMessageInspector](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)）来满足要求。**

然后所有拦截器和最终方法都可以假定头对象存在，因为创建它是公共接口的一部分（例如，通过使用属性将行为放在方法实现上）。

有趣的是消息检查器行为的实现本质上与拦截器相同。不同之处在于使您的方法依赖于显式行为是很清楚的。使方法依赖于隐式拦截器不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:57:53.160

我不认为有任何内置的方法可以做到这一点，虽然你可以使用 Session，但我宁愿为此定义一个抽象。您可以在需要通信的所有拦截器中注入该抽象的相同实例。

# android - 向fragmentlist android添加标题

> ID：13085017
> 
> 赞同：5
> 
> 时间：2012-10-26T10:18:00.953
> 
> 标签：android, header, android-listfragment

我正在向我的 ListFragment 添加一个标题，但标题没有出现。我尝试添加 onCreate 和 onStart 但我已经设置了我的适配器。我在这里找到了这个[Best place to addHeaderView in ListFragment](https://stackoverflow.com/questions/5704478/best-place-to-addheaderview-in-listfragment)但它无效。

```
@Override

     public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState) {
                View v = getActivity().getLayoutInflater().inflate(R.layout.header,
                        null);
                container.addView(v,0);
                rla = new RowListAdapter(getActivity().getLayoutInflater(),
                        R.layout.itemlayout, rl);
                setListAdapter(rla);
                return super.onCreateView(inflater, container, savedInstanceState);
            }

    @Override
    public void onStart() {
        super.onStart();
        getListView().setBackgroundResource(R.color.tostadoclaro);
        getListView()
                .setDivider(getResources().getDrawable(R.drawable.divider));

        getListView().setDividerHeight(4);
    } 
```

解决方案！！！

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    View v = getActivity().getLayoutInflater().inflate(R.layout.header,
            null);
    this.getListView().addHeaderView(v);
    rla = new RowListAdapter(getActivity().getLayoutInflater(),
            R.layout.itemlayout, rl);
    setListAdapter(rla);
    super.onActivityCreated(savedInstanceState);
}
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState){// Empty. Use original.} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:41:39.657

不要将视图添加到容器中。使用 addHeaderView(v)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:21:21.140

完整代码（改编自[此处](https://gist.github.com/3978957)）：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    TextView tv = new TextView(getActivity());
    tv.setText("Hello");
    getListView().addHeaderView(tv);
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1,
            new String[] { "Hello world" }));
}

@Override
public void onDestroyView() {
    setListAdapter(null);
    super.onDestroyView();
} 
```

另请参阅：[在 ListFragment 中添加HeaderView 的最佳位置](https://stackoverflow.com/questions/5704478/best-place-to-addheaderview-in-listfragment)

# c++ - 窃取焦点（有充分的理由）

> ID：13085018
> 
> 赞同：2
> 
> 时间：2012-10-26T10:18:01.517
> 
> 标签：c++, qt4, focus, qt-creator

我正在研究[Yakuake](http://yakuake.kde.org)的克隆，如果你使用过它，你就会知道它的一个功能是为了方便而偷取焦点。

基本上，你点击“显示”热键，应用程序就会出现，你可以在上面写字。您可以使用任何应用程序做任何事情（隐藏 Yakuake），但只要您按下热键，Yakuake 就会出现并窃取焦点。我想对我的应用程序做同样的事情。

我知道有一些窗口管理器规则会阻止应用程序这样做，但是 Yakuake 正在这样做，为什么我不能这样做？

此外，此应用程序旨在与 Windows、Linux 和 Mac 兼容，因此没有 KDE 或 Gnome 或 < insert_your_favourite_window_manager_here > hacks；我不会采用检测 WM 并进行黑客攻击的方式。

PS：我正在用 C++ 和 Qt4 做那个应用程序。

编辑：

为了清楚起见，我不要求任何代码（但如果你真的有一些例子，我很感激它）。我正在寻求一种方法来做到这一点。我应该怎么做才能让 WM 将焦点分配给我的应用程序。有没有这样做的标准方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:23:50.237

有[`Qt::WindowStaysOnTopHint`](http://www.qtcentre.org/threads/15464-WindowStaysOnTopHint)....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:30:07.520

解决方案比我想象的要简单。我做了一个持续时间为 0 的动画，在动画结束时我只是做了一个焦点。这完成了工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:04:52.317

如果您想使用“显示”热键或快捷方式来执行此操作，则必须在键盘上创建并使用挂钩。

Qt 不提供这样的东西，所以你必须自己做。

你可以看看这个帖子：[QT后台进程](https://stackoverflow.com/questions/7425965/qt-background-process-for-keyboard-input-sniffing/7427517#7427517)

我不知道其他操作系统。

当您从钩子中获得正确的键盘事件时，您可以创建一个带有“allwas on top hint”的窗口，这应该没问题。

# php - 在 PHP 文件中包含的 PHP 文件中包含 CSS 文件

> ID：13085020
> 
> 赞同：0
> 
> 时间：2012-10-26T10:18:01.043
> 
> 标签：php, html, css

我有一个 php 文件，它（目前）不使用任何 php 代码，其中包含将在所有页面中使用的标题和主菜单的代码。CSS 文件没有效果，即使我已经为 h1 创建了一个样式类。显示文本“TEST”，但未应用样式。如何正确包含 CSS 文件？

主菜单.php

```
<!--This code is included within the <head> of each page, and the stylesheet for the header and main menu are included here-->
<link href="styles/headerMenu.css" ref="stylesheet" type="text/css">

<!--Header and menu code-->
<div>
    <h1>TEST</h1>
</div> 
```

索引.php

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>untitled</title>
    <?php include ('./includes/mainMenu.php') ?>
</head>

<body>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:20:48.453

我认为这可能是因为您的菜单出现在您的`<head>`标签内。

CSS 需要在`<head>`and之间，`</head>`但其余的需要在`<body>`标签内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:22:25.913

```
<link href="styles/headerMenu.css" rel="stylesheet" type="text/css"> 
```

这必须在`<HEAD></HEAD>`

```
<div>
    <h1>TEST</h1>
</div> 
```

这必须在`<BODY></BODY>`

您必须将此文件分成 2 个文件，并将它们包含在 Head 和 Body 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:24:25.503

未找到 CSS 文件。仔细检查链接并更正它：

```
<link href="menu.css" rel="stylesheet" type="text/css">
                        ^- REL not REF 
```

此外，为了防止出现其他问题，请删除代码的开始和结束`<head>`标记`<body>`。以您输出 HTML 元素的方式，如果保留这些标签，您将创建错误的 HTML。删除它们，您的页面将再次成为有效的 HTML。

*索引.php*：

```
<!DOCTYPE html>
<html>    

    <meta charset="utf-8" />
    <title>untitled</title>
    <?php include ('menu.php') ?>    

</html> 
```

有效 HTML 的好处是您可以通过验证器运行它以及早发现错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:53:21.883

不要在 HEAD 部分中包含您的 HTML 代码。仅在 HEAD 部分包含 CSS 和 JavaScript 文件。并且您需要在某些 php 文件中为 css 或图像路径添加前缀。
例如
，创建名为“conn_path.php”的新 php 文件

```
<?php
define('SITE_PATH',$_SERVER['DOCUMENT_ROOT'].'siteName/');
define('SITE_HTTP_PATH','http://localhost/'siteName/');
define('CSS_PATH','http://localhost/siteName/styles/');
define('IMAGE_PATH','http://localhost/siteName/images/');
?> 
```

然后你的路径将如下所示：- mainMenu.php

```
<?php include "conn_path.php" ?>
<link href="<?php echo CSS_PATH ;?>headerMenu.css" rel="stylesheet" type="text/css"> 
```

它将在整个项目中为您提供帮助……</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T11:33:00.917

使用您的基本（和重用）html 创建一个模板文件。还带有`<html>`,`<head>`和`<body>`标签以及所有页面中必须具有的任何内容 - 作为您的样式表和菜单。

然后添加一个带有单个变量的内容部分。

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>untitled</title>
    <link href="styles/headerMenu.css" rel="stylesheet" type="text/css">
</head>

<body>
    <!--Header and menu code-->
    <div>
        <h1>TEST</h1>
    </div>

    <?php echo $page_content; ?>
</body>

</html> 
```

这样，任何页面内容都应该被分配`$page_content`而不是回显。

# javascript - 使用 angular.js 重置模型

> ID：13085024
> 
> 赞同：35
> 
> 时间：2012-10-26T10:18:14.387
> 
> 标签：javascript, angularjs

我只是尝试像这样重置值：

```
$scope.initial = [
    {
        data1: 10,
        data2: 20
    }            
];

$scope.datas= $scope.initial;

$scope.reset = function(){
  $scope.datas = $scope.initial;  
} 
```

但它不会产生任何东西，有什么想法可以解决它吗？

```
angular.module('app', []).controller('MyCtrl', function($scope) {
  $scope.initial = [
    {
      data1: 10,
      data2: 20
    }            
  ];

  $scope.datas= $scope.initial;

  $scope.reset = function(){
    $scope.datas = $scope.initial;  
  } 
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div ng-app="app" ng-controller="MyCtrl">
  <div ng-repeat="data in datas">
    <input type="text" ng-model="data.data1" />
    <input type="text" ng-model="data.data2" />
  </div>
  <a ng-click="reset()">Reset to initial value</a>
  or     
  <button ng-click="name = initial">Reset to initial value</button>
  <hr />
  <p ng-repeat="data in datas">{{data.data1}}, {{data.data2}}</p>
</div>
```

[jsfiddle](http://jsfiddle.net/fmzzs/4/)上有一个工作示例

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-26T19:29:58.297

这确实是一个关于 JavaScript 的问题（所以我添加了“javascript”标签）。当一个 JavaScript 对象（例如数组 $scope.initial）被分配给一个变量时，它是通过引用而不是复制来分配的。所以，这个说法

```
$scope.datas= $scope.initial; 
```

导致 $scope.datas 指向 $scope.initial 对象。对 $scope.datas 或 $scope.initial 所做的任何更改都会影响同一个（单个）对象。由于 ng-model 用于对对象元素 data1 和 data2 进行数据绑定，因此对文本输入的任何更改都会更改 $scope.datas 引用的对象的 data1 和 data2 元素——即 $scope.initial。要查看实际情况，请将以下内容添加到小提琴的 HTML 中：

```
<p>{{initial}}</p> 
```

当您更改文本框中的值时，您会看到 $scope.initial 也在发生变化。

@Max 提供了部分答案：在重置函数中使用 angular.copy()。但是，您还必须在初始分配中使用 angular.copy() ：

```
 $scope.datas = angular.copy($scope.initial); 
```

* * *

更新：

正如@EpokK 在他的回答中显示的那样，另一种解决方案是

```
angular.copy($scope.initial, $scope.datas); 
```

正如@bekite 在他的回答中提到的，@EpokK 的解决方案不会创建另一个对象。

**完整代码**

```
angular.module('app', []).controller('MyCtrl', function($scope) {
  $scope.initial = [{
    data1: 10,
    data2: 20
  }];
  $scope.datas = angular.copy($scope.initial);
  $scope.reset = function () {
    $scope.datas = angular.copy($scope.initial);
    // or
    // angular.copy($scope.initial, $scope.datas);
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>

<div ng-app="app" ng-controller="MyCtrl">
  <div ng-repeat="data in datas">
    <input type="text" ng-model="data.data1" />
    <input type="text" ng-model="data.data2" />
  </div> 
  <a ng-click="reset()">Reset to initial value</a>
  or
  <hr />
  <p ng-repeat="data in datas">{{data.data1}}, {{data.data2}}</p>{{initial}}
</div>
```

`[fiddle](http://jsfiddle.net/wgR5c/1)`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T11:00:47.267

尝试更改`reset`要使用的功能[`angular.copy`](http://docs.angularjs.org/api/angular.copy)

```
$scope.reset = function () {
    $scope.datas = angular.copy($scope.initial);
}; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-13T19:16:37.003

@Mark Rajcok：不要误会我的意思，但我认为

```
angular.copy($scope.initial, $scope.datas); 
```

不是替代语法

```
$scope.datas = angular.copy($scope.initial); 
```

我理解的方式：

```
$scope.datas = angular.copy($scope.initial); 
```

创建 $scope.initial 的副本并将引用分配给 $scope.datas。

```
angular.copy($scope.initial, $scope.datas); 
```

用 $scope.initial 值更新 $scope.datas 值

请参阅 angularjs 文档（[http://docs.angularjs.org/api/angular.copy](http://docs.angularjs.org/api/angular.copy)），以及 Return 语句中的 sektion

> 如果指定了目的地，则返回复制或更新的目的地。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-28T06:52:21.627

工作语法：

```
$scope.reset = function () {
    angular.copy($scope.initial, $scope.datas);
}; 
```

[API参考](http://docs.angularjs.org/api/angular.copy)：`angular.copy(source[, destination]);`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-19T07:07:10.673

考虑以下按钮

*   编辑
*   节省
*   取消

当用户单击**编辑**并更改数据，然后使用**取消**按钮获取旧数据时，您可以通过以下方式实现这一点。

**HTML**

```
<div>
    <button data-ng-click="edit()" data-ng-show="!editing">Edit</button>
    <button data-ng-click="save()" data-ng-show="editing">Save</button>
    <button data-ng-click="cancel()" data-ng-show="editing">Cancel</button>
</div> 
```

**AngularJs**

```
$scope.edit = function () {
    $scope.editing = true;
    $scope.copy = angular.copy($scope.data);
};

$scope.cancel = function () {
    $scope.editing = false;
    $scope.data = $scope.copy;
}; 
```

**参考**

*   [角复制](https://docs.angularjs.org/api/ng/function/angular.copy)
*   [原帖](http://yassershaikh.com/cancel-undo-angularjs-revert-data/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-13T12:28:41.750

我喜欢 Yasser 的评论：简洁明了。

我绝对更喜欢在开始编辑时复制值，然后在取消/保存时替换引用。

我更喜欢绑定本地副本，而不是原始数据，然后仅在保存时更改最终数据。这可以防止以后出现各种错误，并封装编辑行为。

最终版本将是：

```
function initValue() {
    $scope.bound = angular.copy($scope.data);
}

function setValue() {
    $scope.data = $scope.bound;
}

$scope.edit = function () {
    $scope.editing = true;
    initValue();
};

$scope.cancel = function () {
    $scope.editing = false;
    initValue();
};

$scope.save= function () {
    $scope.editing = false;
    setValue();
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-06T08:13:28.560

正如大家所说的那样，我通过维护备份来使用它，但是在使用它时我又遇到了一个问题。
我想如果我在这里发布它会对其他人有所帮助

我的个人资料部分代码如下：

```
var profileBackup ={};
$scope.profileContinue = function()
{
  profileBackup = angular.copy($scope.userData.profile); 
//  profileBackup = $scope.userData.profile; 
//other code
}

$scope.profileCancel = function()
{
$scope.userData.profile = profileBackup;
} 
```

但令我惊讶的是，当模型更改时，即使是非范围变量 profileBackup 也在更新（我猜在这种情况下会返回参考）

然后我像这样更改了我的代码：

```
$scope.profileContinue = function()
{
  profileBackup = angular.toJson($scope.userData.profile); 
//  profileBackup = $scope.userData.profile; 
//other code
}

$scope.profileCancel = function()
{
$scope.userData.profile = angular.fromJson(profileBackup);
} 
```

如果没有任何意义，请原谅我..

# ios - iOS：使用 SharePoint Server 之前的 NTLM 身份验证

> ID：13085026
> 
> 赞同：2
> 
> 时间：2012-10-26T10:18:15.277
> 
> 标签：ios, sharepoint, soap, ntlm

在向 Web 服务发送 SOAP 请求之前，如何通过 NTLM（基于 Windows）在 SharePoint 上进行身份验证？
我应该通过 ASIHTTPRequest 还是 CFNetwork 获得令牌？
示例代码会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:41:22.857

当连接受到挑战或身份验证时，我调用了连接 url 的连接挑战部分...

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSURLCredential *credential = [NSURLCredential credentialWithUser:self.userName
                                                         password:self.userPassword
                                                         persistence:NSURLCredentialPersistenceForSession] ;
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
    NSLog(@"Getting Authentication Challenges");

} 
```

不知道我在哪里找到它（感谢它是谁！）但这对我有用。但老实说，我没有使用肥皂请求，也没有起诉任何连接库....

希望这是一些帮助。

# matlab - 是否可以在嵌入式 MATLAB 函数中使用结构？

> ID：13085032
> 
> 赞同：1
> 
> 时间：2012-10-26T10:18:31.843
> 
> 标签：matlab, simulink

如果是，那么模型资源管理器中为这些参数指定的数据类型应该是什么。

尝试为图像创建循环缓冲区时，我在初始化时遇到错误：`Attempt to extract field <field name> from double`. 我已将结构初始化为`uint8`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:26:17.297

这是可能的，例如：

```
function y = fcn()
y = [1;2;3;4]; 
```

要访问结构元素，您将使用 demux：![simulink 模型支持嵌入式 matlab 函数和带显示器的解复用器](../Images/8adb2d42c82b9a6924c136a5586b4866.png)

数据类型的默认设置是“继承”，因此它将取决于以下块。您可能需要另一种类型，但请注意，对于结构，数据类型用于*元素*而不是*outport*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T01:55:28.507

是的，有可能，请参阅[Simulink 文档中的](http://www.mathworks.com/help/simulink/structures.html)更多详细信息。如果您需要结构作为输入或输出，您需要做的是创建 Simulink.Bus 对象来定义结构（类似于 C typedef）。对于内部变量，您应该能够使用标准 MATLAB 语言来创建和修改结构。

# c# - 从变量结果视图中检索数据

> ID：13085034
> 
> 赞同：1
> 
> 时间：2012-10-26T10:18:40.063
> 
> 标签：c#, arrays, html-agility-pack

我正在使用`htmlAgilityPack`来从表中检索数据 -

```
var text = from x in htmlDoc.DocumentNode.Descendants()
                   where x.Name == "p" && x.Attributes.Contains("class")
                   where x.Attributes["class"].Value == "cut"
                   select x.InnerText; 
```

在调试时，我可以访问`Results View`显示我需要访问的所有解析数据。但是我无法弄清楚如何`return`解析已解析的数据数组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:26:02.013

您返回的是返回变量文本的简单字符串，因此无需迭代或查看结果（ResultsView）。请记住，您没有返回 IEnumerable 对象来使用 ResultViews。

我想你需要这个

```
var Result= from x in htmlDoc.DocumentNode.Descendants()
                   where x.Name == "p" && x.Attributes.Contains("class")
                   where x.Attributes["class"].Value == "cut"

foreach(var Item in Result){
//Access Item here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:26:36.523

如果，不能`return`只是你的问题，那么我相信这很简单..

```
var text=from x in htmlDoc.DocumentNode.Descendants()
                       where x.Name == "p" && x.Attributes.Contains("class")
                       where x.Attributes["class"].Value == "cut"
                       select x.InnerText;
    //As the  above  query returns string,so you can check the result here..
    Label1.text=text.ToString() 
```

# java - 将大图像保存为 PNG

> ID：13085035
> 
> 赞同：9
> 
> 时间：2012-10-26T10:18:52.283
> 
> 标签：java, android, bitmap, out-of-memory

我刚刚遇到了一个棘手的问题...

这是我的故事：

我的设备是三星 Galaxy Note，通常它以**3264 * 2448**像素的分辨率拍照。当我想查找详细信息时，我喜欢精美的图片，但在这里我讨厌它，因为它在 Android 中处理起来非常庞大。我可以读取并显示这么大分辨率的图像，我需要在上面画线，然后我需要将图片和线条都保存到 png 中。我的头疼是，当我尝试创建这样的可变位图时，我的 Android 总是给我**Out of memery exception ：**

```
 Bitmap bmp = Bitmap.createBitmap(3264, 2448, Config.RGB_565);
    Canvas cv = new Canvas(bmp);
    //draw a line and save and restore canvas
    // I found an alternative solution yet proven to be uncorrect:
    myImageView.setDrawingCacheEnabled(true);
    myImageView.buildDrawingCache(true);
    Bitmap bmp = myImageView.getDrawingCache();
    //save bmp to png 
```

当。。。的时候

```
bmp.width * bmp.height * 4 > getScaledMaximumDrawingCacheSize() 
```

异常跳出。我已经测试过了`myImageView.measure(...)`，`myImageView.layout(...)`对我没有用。（一切都很好，当我使用较小的图像测试相同的代码时）

任何专家都知道如何解决这个问题或向我提出解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:52:51.153

也许不是明确的解决方案，但您是否尝试增加堆大小？

对于 Android 2.2 或更低版本：

```
dalvik.system.VMRuntime.getRuntime().setMinimumHeapSize(sizeInBytes); 
```

对于 Android [2.3 或更高版本](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)：

```
android:largeHeap="true" 
```

# hibernate - 为什么 Hibernate 会尝试加载“not-found=ignore”关联？

> ID：13085038
> 
> 赞同：4
> 
> 时间：2012-10-26T10:19:07.040
> 
> 标签：hibernate, hibernate-mapping, many-to-one

我有一个类（代表一个项目），它通过多对一关系映射另一个类（代表一个用户）。随着用户的来来去去，我确保将**未找到的**属性设置为**忽略**关系。

但是，Hibernate 似乎仍然尝试通过为每个**未找到**属性应该将关系设置为**null**的项目执行一个额外的 SQL 查询来加载“丢失的”用户。也就是说，在关联用户不再存在的情况下，我会除了 not-found 属性来简单地“取消”该关系。但是，Hibernate 会尝试一一获取这些关系。

知道我可能做错什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:12:20.417

您是否禁用了延迟加载并将 fetchmnode 设置为加入，因为 Hibernate 必须获取它们以决定是否应该将其无效，并且它不能仅使用 id 来决定

# facebook-graph-api - facebook 应用程序可以通过应用程序访问令牌获取应用程序用户的朋友吗？

> ID：13085042
> 
> 赞同：1
> 
> 时间：2012-10-26T10:19:13.767
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

从文档[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)看来，要获取用户的朋友，需要用户有效的访问令牌。

但似乎即使使用应用访问令牌，我也可以获取应用用户朋友的 ID。由于它没有记录，我不确定它是设计使然还是仅适用于我的应用程序/暂时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T13:20:56.537

是的，您可以使用应用令牌获取应用用户的朋友。这记录在[https://developers.facebook.com/docs/opengraph/howtos/publishing-with-app-token/](https://developers.facebook.com/docs/opengraph/howtos/publishing-with-app-token/)

> 虽然应用访问令牌主要用于代表用户将信息发布回 Facebook，但使用应用访问令牌可以从 Facebook 检索的信息集有限。
> 
> *   用户的基本个人资料信息（ID、姓名、用户名、性别）
> *   用户的朋友和他们的 ID
> *   用户授予您的应用程序的权限

# objective-c - Objective-c 为旧设备添加对新类的支持

> ID：13085045
> 
> 赞同：1
> 
> 时间：2012-10-26T10:19:26.980
> 
> 标签：objective-c, ios5, ios6, runtime

**问题**：每个新的 iOS 都添加了很多新的有用的类。例如，UIRefreshControl。我想在 iOS5 构建中添加对此类的支持。

**不是很酷的解决方案**：在所有必须使用 UIRefreshControl 的类中，我可以检查当前的 iOS 版本并使用该类的内联替换，例如：

```
pseudocode
...

- (void)viewDidLoad
{
    ...

    if([[UIDevice currentDevice].systemVersion floatValue] < 6.0)
    {
        self.refreshControl = [[MyCustonRefreshControl_for_iOS5 alloc] init];
    }
    else
    {
        self.refreshControl = [[UIRefreshControl alloc] init];
    }
    ...
} 
```

这个解决方案并不酷，因为我必须在我想使用最新 iOS 功能的所有类中添加相同的代码。

**可能很酷的解决方案**：1）获取或创建您自己的 100% 兼容的类，例如对于 UIRefreshControl，您可以使用 CKRefreshControl（https://github.com/instructure/CKRefreshControl）；2）App启动时使用Objective-C运行时定义替换类为主类。

```
pseudocode
...

// ios 5 compatibility
#include <objc/runtime.h>
#import "CKRefreshControl.h"
...

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...

    // pre-ios 6 compatibility
    if([[UIDevice currentDevice].systemVersion floatValue] < 6.0)
    {
        // register refresh control
        Class clazz = objc_allocateClassPair([CKRefreshControl class], "UIRefreshControl", 0);
        objc_registerClassPair(clazz);
    }

    ...
} 
```

我认为这种方式真的很酷，但是这段代码行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:02:02.267

@abuharsky，[CKRefreshControl] [https://github.com/instructure/CKRefreshControl](https://github.com/instructure/CKRefreshControl)已经更新，现在完全符合您的要求。您需要做的就是：

```
self.refreshControl = [[UIRefreshControl alloc] init]; 
```

如果这对您不起作用，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:27:22.973

第二个灵魂应该可以正常工作启用**ARC**
时可能会出现一些问题，因此，您应该将 allocate_pair 代码移动到使用标志编译的某个类**`-fno-objc-arc`**

 **有关更多信息，请查看此处（在评论中）： http:
[//www.mikeash.com/pyblog/friday-qa-2010-11-6-creating-classes-at-runtime-in-objective-c.html](http://www.mikeash.com/pyblog/friday-qa-2010-11-6-creating-classes-at-runtime-in-objective-c.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:34:02.560

您可能希望使用不同的工作方式创建一个一致的界面。你需要一个 [策略设计模式](http://www.oodesign.com/strategy-pattern.html)来解决你的问题。然后您只需要检查一次版本 - 在初始化执行 iOS 版本特定工作的对象时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:49:47.643

如果所有方法调用都是相同的（并且没有类/“静态”方法可言），只需使用“工厂”方法创建对象，然后“正常”使用它们。

否则，我可能会使用“包装器”类，根据 Filip 的帖子之一，将调用重新路由到内置支持或“替换”。**

# wix - 如何将默认的“安装位置”传递给 RtfLicense 引导程序？

> ID：13085051
> 
> 赞同：12
> 
> 时间：2012-10-26T10:19:47.440
> 
> 标签：wix, wix3.6, bootstrapper

我正在使用 rtflicence 标准引导程序在链中的我的项目 msi 之前安装 dotnet。

我注意到有一个“选项”按钮，它显示一个安装位置对话框并允许用户更改默认安装目录。

我需要：

1.  阻止显示此选项按钮，或
2.  使用默认路径填充安装位置，并在用户更改时将其传递回安装程序。

我读到可以将 Burn 变量从引导程序传递给 msipackages，但我还没有找到任何进一步的细节，希望能指出正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T20:46:16.907

要使用选项 1，您必须滚动自己的 BootstrapperApplication 并从菜单中删除选项按钮。

选项二更容易实现。引导程序使用一个特殊的 Burn 变量调用`InstallFolder`来获取和设置该视图的文本块中的内容，您可以在`Bundle`元素内部分配它。

```
<Variable Name="InstallFolder" Type="string" Value="[ProgramFilesFolder]"/> 
```

该常量`ProgramFilesFolder`将在程序启动时设置该文本块的值，如果用户浏览到不同的目录，它将存储在同一个变量中。要将其传递给 MSI，请在您的链中传递`InstallFolder`使用`MsiProperty`标签（`INSTALLLOCATION`是您的 WiX 项目中的属性名称）。

```
<MsiPackage Vital="yes" DisplayName="Your Name" Id="MsiId" SourceFile="path/to/file.msi">
    <MsiProperty Name="INSTALLLOCATION" Value="[InstallFolder]" />
</MsiPackage> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-28T18:21:21.307

我刚刚发现了 SuppressOptionsUI 选项，它可以解决您的选项 1，而无需滚动您自己的 BootstrapperApplication：

```
<?xml version="1.0" encoding="UTF-8"?>

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
 xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">

   <Bundle>
      <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
         <bal:WixStandardBootstrapperApplication LicenseFile="..\eula.rtf" SuppressOptionsUI="yes"/>
      </BootstrapperApplicationRef>

      <Chain>
      </Chain>
    </Bundle>
</Wix> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:29:56.123

我认为您可以尝试通过创建主题来删除选项按钮。我自己不必使用主题，但这里有两个相关的 SO 链接可能会让你指向那个方向：

[WiX引导程序主题文件？](https://stackoverflow.com/questions/9931008/wix-bootstrapper-theme-file)

[我的 WiX 安装程序的主题](https://stackoverflow.com/questions/1625520/theme-for-my-wix-installer)

# php - PHP Twitter 搜索 api 与推文返回按钮

> ID：13085053
> 
> 赞同：2
> 
> 时间：2012-10-26T10:20:02.320
> 
> 标签：php, twitter

我正在使用构建一个使用 Twitter api 的 WordPress 插件 - 但我对使用 Twitter 非常陌生。

我目前有一个关键字搜索表单和结果工作

```
<?php

// get the keyword from url
$srchterm = $_GET['search_box'];

// encode it for the safe search
$srchterm = urlencode($srchterm);

// search the keyword using Twitter API
$srch_twitts = "http://search.twitter.com/search.atom?q=".$srchterm."";

// use curl to execute the Twitter URL
$twits = curl_init();
curl_setopt($twits, CURLOPT_URL, $srch_twitts);
curl_setopt($twits, CURLOPT_RETURNTRANSFER, TRUE);
$twi = curl_exec($twits);

// here we have the searched result in an array
$search_res = new SimpleXMLElement($twi);

//print_r($search_res);

?>
<?php

/* display the data */

$i = 0;

// displays the search keyword
echo "<p style='padding-left:10px; color:brown'>Your search term is: " . stripslashes($_GET['q']) . "</p>";

// tweets in an array. split it by foreach
// we need only 10 result so, use if condition
foreach ($search_res->entry as $result) if ($i++ < 10)
{

echo "<div id='tweets'>";
echo "<p>$i</p> ";
echo "<div class='avatar'><img src='". $result->link[1]->attributes()->href. "' /> </div>";
echo "<div class='twitcont'>";
echo "<div class='name'>". $result->author->name . "</div>";
echo "<div class='content'>" . $result->content ;

// convert the updated date of tweet to seconds
$twittedSeconds = time() - strtotime($result->updated);
$names = array('second', 'minute', 'hour', 'day', 'week', 'month', 'year');
$seconds = array( 1,        60,       3600,   86400, 604800, 2630880, 31570560);

// find the time difference between present time and tweet time

if($twittedSeconds > 0)
{
for($j = count($seconds) - 1; $j >= 0 ; $j--)
{
$interval = $seconds[$j];
if($twittedSeconds >= $interval)
{
$getTime =  round($twittedSeconds / $interval);
if ($getTime > 1)
{
$names[$j] .= s;
}
$time = $getTime. ' ' . $names[$j] . ' ago';
break;
}
}
//echo the time difference
echo "<div class='time'> " . $time . "</div>";
}
echo "</div>";
echo "</div></div>";

}

?> 
```

**我的问题：** 如何为每个结果集成一个推文按钮 - 这将允许管理员（在搜索推特以查找关键字匹配后）回推对话。

请看这个例子：[http ://screencast.com/t/2xBkTyUHT](http://screencast.com/t/2xBkTyUHT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:53:50.497

找到推文 ID，然后附加此格式的超链接

```
https://twitter.com/intent/tweet?in_reply_to={tweet id} 
```

所以链接可能看起来像这样。

```
$tweet_id = substr($entry->id, strrpos($entry->id, ':')+1);
echo "<a href=\"https://twitter.com/intent/tweet?in_reply_to={$tweet_id}\">Reply</a>"; 
```

更多信息可以在这里找到。[Twitter 网络意图](https://dev.twitter.com/docs/intents)

注意：您放入`echo "<div id='tweets'>";`了一个循环。意味着 DOM 将有多个具有相同 id 的元素。使用`class` 或将其放在循环之外进行更正。

# magento - Magento：致命错误：在第 491 行的 C:\wamp\www\app\code\core\Mage\Core\Model\Layout.php 中找不到类 'Mage_Catalog_Block_P<'

> ID：13085054
> 
> 赞同：1
> 
> 时间：2012-10-26T10:20:15.430
> 
> 标签：magento

我正在使用magento。在 magento 中，我尝试在主页上显示我关注的产品

[http://vimeo.com/1070986](http://vimeo.com/1070986)我也试过

[http://www.blog.magentosupport.net/2011/02/make-a-category-page-the-homepage-in-magento/](http://www.blog.magentosupport.net/2011/02/make-a-category-page-the-homepage-in-magento/)

但它没有显示我添加的产品。相反，在主页出现错误

致命错误：第 491 行的 C:\wamp\www\app\code\core\Mage\Core\Model\Layout.php 中找不到类“Mage_Catalog_Block_P<”

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:45:36.407

要在主页上按类别显示产品，请按照此步骤操作。

创建新类别，然后将您想在首页上显示的产品添加到该类别。

在 CMS 主页中添加以下行

**{{block type="catalog/product_list" category_id="9" template="catalog/product/list.phtml"}}**

这里“9”定义了您的类别 ID。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:11:33.007

重新检查布局上的班级名称。布局上块的命名一定是错误的。我的意思是在管理员的 cms 主页上。

# model - Yii, ActiveDateSelect 必须指定“模型”和“属性”或“名称”属性值

> ID：13085059
> 
> 赞同：0
> 
> 时间：2012-10-26T10:20:29.893
> 
> 标签：model, yii, gii

我正在使用[ActiveDateSelect](http://www.yiiframework.com/extension/activedateselect/)扩展来获取用户的月、年详细信息。一切顺利。当我尝试使用`gii`模块生成模型时出现错误。堆栈跟踪说

```
\protected\extensions\ActiveDateSelect.php(120): CInputWidget->resolveNameID() 
```

我可以通过查看`CInputWidget`类的代码来理解问题。不知道如何修复错误。如果从文件中注释此扩展配置`main.php`，我可以使用**gii**生成模型。

```
 'ActiveDateSelect' => array(
      'class' => 'ext.ActiveDateSelect',
  ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:37:05.053

所以真正的问题（[来自评论](https://stackoverflow.com/questions/13085059/yii-activedateselect-must-specify-model-and-attribute-or-name-property-va#comment17781337_13085059 "https://stackoverflow.com/questions/13085059/yii-activedateselect-must-specify-model-and-attribute-or-name-property-va#comment17781337_13085059")）似乎是你想自动加载扩展。好吧，实际上您尝试自动加载的方式是错误的，要自动加载扩展，请改为执行此操作（在*config/main.php*中）：

```
'import'=>array(
    'application.models.*',
    'application.components.*',
    'ext.ActiveDateSelect' // add this line to the already existing import array
), 
```

现在您可以像这样直接在视图中使用：

```
$this->widget('ActiveDateSelect', array (
    // whatever configuration
)); 
```

或者像这样的其他任何地方：

```
ActiveDateSelect::sanitize($model, 'birthdate'); // example from the extension's page 
```

# .net - 监听相同的端口，不同的 IP 地址，WCF + 非 WCF 应用程序

> ID：13085065
> 
> 赞同：3
> 
> 时间：2012-10-26T10:20:50.440
> 
> 标签：.net, wcf, networking, tcp

我在具有 5 个虚拟 IP 地址 (IP1-IP5) 的机器的端口 IP1:80 上有一个应用程序绑定

然后我尝试将一个自托管的 WCF 服务绑定到 IP5:80，但得到一个 AlreadyInUseException。我猜 WCF 试图绑定到整个 IP 范围，尽管我指定了一个特定的范围。

这是已知的行为吗？

```
 [start application that binds to IP1:80]

            string baseAddress = "http://IP5:80/binary";

            ServiceHost host = new ServiceHost(typeof(BinaryService),
                                               new Uri(baseAddress));

            host.AddServiceEndpoint(typeof(IBinaryService), GetBinding(), "")
                                   .Behaviors.Add(new WebHttpBehavior());

            host.Open(); // exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:12:39.077

找到了解决方案：

```
Run netsh
Type http
Type add iplisten ipaddress=IP5:80 
```

在此之后，自托管的 WCF 应用程序将不会尝试绑定到 80 上的全范围，只是 IP5！

# java - Java7异步NIO2服务器上的连接拒绝

> ID：13085070
> 
> 赞同：4
> 
> 时间：2012-10-26T10:21:33.810
> 
> 标签：java, sockets, concurrency, asyncsocket, nio2

我已经使用 java 7 nio2 编写了一个异步套接字服务器。

这是服务器的狙击手。

```
public class AsyncJava7Server implements Runnable, CounterProtocol, CounterServer{
    private int port = 0;
    private AsynchronousChannelGroup group;
    public AsyncJava7Server(int port) throws IOException, InterruptedException, ExecutionException {
        this.port = port;
    }

    public void run() {
        try {
            String localhostname = java.net.InetAddress.getLocalHost().getHostName();
            group = AsynchronousChannelGroup.withThreadPool(
                 Executors.newCachedThreadPool(new NamedThreadFactory("Channel_Group_Thread")));

            // open a server channel and bind to a free address, then accept a connection
            final AsynchronousServerSocketChannel asyncServerSocketChannel =
                           AsynchronousServerSocketChannel.open(group).bind(
                                 new InetSocketAddress(localhostname, port));

            asyncServerSocketChannel.accept(null, 
                 new CompletionHandler <AsynchronousSocketChannel, Object>() {
                            @Override
                            public void completed(final AsynchronousSocketChannel asyncSocketChannel, 
                                      Object attachment) {
                                    // Invoke simple handle accept code - only takes about 10 milliseconds.
                                    handleAccept(asyncSocketChannel); 
                                    asyncServerSocketChannel.accept(null, this);
            }
                            @Override
                            public void failed(Throwable exc, Object attachment) {
                                System.out.println("***********" + exc  + " statement=" + attachment);  
            }
                 }); 
```

这是尝试连接的客户端代码片段...

```
public class AsyncJava7Client implements CounterProtocol, CounterClientBridge {
    AsynchronousSocketChannel asyncSocketChannel;

    private String serverName= null;
    private int port;
    private String clientName;

    public AsyncJava7Client(String clientName, String serverName, int port) throws IOException {
        this.clientName = clientName;
        this.serverName = serverName;
        this.port = port;
    }

    private void connectToServer() {
        Future<Void> connectFuture = null;
        try {
            log("Opening client async channel...");
            asyncSocketChannel = AsynchronousSocketChannel.open();

            // Connecting to server
            connectFuture = asyncSocketChannel.connect(new InetSocketAddress("Alex-PC", 9999));
       } catch (Exception ex) {
            ex.printStackTrace();
            throw new RuntimeException(ex);
       }
       // open a new socket channel and connect to the server
       long beginTime  = 0;
       try {
           // You have two seconds to connect. This will throw exception if server is not there.
           beginTime = System.currentTimeMillis();
           Void connectVoid = connectFuture.get(15, TimeUnit.SECONDS);
       } catch (Exception ex) {
           //EXCEPTIONS THROWN HERE AFTER ABOUT 150 CLIENTS
           long endTime = System.currentTimeMillis();
           long timeTaken = endTime - beginTime;
           log("************* TIME TAKEN=" + timeTaken);
           ex.printStackTrace();
           throw new RuntimeException(ex);
       }
 } 
```

我有一个测试可以触发客户。

```
 @Test
 public void testManyClientsAtSametime() throws Exception {
     int clientsize = 150;
     ScheduledThreadPoolExecutor executor = 
            (ScheduledThreadPoolExecutor) Executors.newScheduledThreadPool(clientsize + 1, 
                new NamedThreadFactory("Test_Thread"));
     AsyncJava7Server asyncJava7Server = startServer();
     List<AsyncJava7Client> clients = new ArrayList<AsyncJava7Client>();
     List<Future<String>> results = new ArrayList<Future<String>>();

     for (int i = 0; i < clientsize; i++) {
         // Now start a client
         final AsyncJava7Client client = 
               new AsyncJava7Client("client" + i, InetAddress.getLocalHost().getHostName(), 9999);
         clients.add(client);
     }

     long beginTime = System.currentTimeMillis();
     Random random = new Random();
     for (final AsyncJava7Client client: clients) {
         Callable<String> callable = new Callable<String>() {
             public String call() {
                 ...
                 ... invoke APIs to connect client to server
                 ...
                 return counterValue;
             }
     };

     long delay = random.nextLong() % 10000;  // somewhere between 0 and 10 seconds.
     Future<String> startClientFuture = executor.schedule(callable, delay, TimeUnit.MILLISECONDS);
     results.add(startClientFuture);
 } 
```

它对大约 100 个客户非常有效。在大约 140+ 时，我在客户端中收到大量异常 - 当它尝试连接时。异常是：java.util.concurrent.ExecutionException: java.io.IOException: 远程计算机拒绝网络连接。

我的测试是在一台运行 Windows 7 的笔记本电脑上进行的。当它爆炸时，我检查 TCP 连接，那里大约有 500 到 600 个连接——没关系。因为我有可以处理 4,000 个 TCP 连接的类似 JDK 1.0 java.net 套接字程序。

在服务器中没有例外或任何狡猾的东西。

所以我不知道这里可能出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:48:01.300

尝试使用`bind`接受积压限制的形式并将其设置为更高的数字。例如：

```
 final AsynchronousServerSocketChannel asyncServerSocketChannel =
                       AsynchronousServerSocketChannel.open(group).bind(
                             new InetSocketAddress(localhostname, port), 1000); 
```

我不知道默认情况下 win7 实现限制是什么，但可能是连接被拒绝的原因。

# ruby-on-rails - 应用程序配置覆盖方法应该放在 Rails gem 的什么位置？

> ID：13085072
> 
> 赞同：1
> 
> 时间：2012-10-26T10:21:36.977
> 
> 标签：ruby-on-rails, methods, scope

我正在使用我自己的 GEM，它在其初始化程序中定义了一个应用程序 (appA) 配置变量 (varA)。但是，我希望将此变量 (varA) 的值用作默认值，并且我想在 GEM (appA) 中创建一个方法 (metA)，它可以覆盖配置变量的值 ( varA)。

我想从使用 GEM (appB) 的应用程序中调用此方法 (metA)。

我应该将方法（metA）放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:16:51.977

您可以将配置变量定义为：

```
module YourGem
  mattr_accessor :option_a
  @@option_a = "default value"
end 
```

并覆盖它`config/initializers/your_gem.rb`：

```
YourGem.option_a = "new value" 
```

# php - 在codeigniter中调整图像大小而不扭曲图像

> ID：13085076
> 
> 赞同：0
> 
> 时间：2012-10-26T10:21:59.640
> 
> 标签：php, codeigniter, activerecord, image-processing, imagelibrary

我想在不扭曲图像的情况下调整图像大小。例如，如果我将图像高度设置为 100，宽度设置为 200。调整大小的图像必须为 100 高度和 200 宽度。为了实现这一点，我想裁剪该图像而不是让它扭曲。

我的配置选项：-

```
 $config['create_thumb'] = TRUE;
            $config['maintain_ratio'] = FALSE;
            $config['master_dim'] = 'auto';
            $config['width'] = 100;
            $config['height']= 100;

            $this->image_lib->initialize($config);
            $this->image_lib->resize(); 
```

也可以不使用任何其他图像处理库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:26:42.047

You either resize or crop it like someone said here.

If CROP

```
$config['image_library'] = 'imagemagick';
$config['library_path'] = '/usr/X11R6/bin/';
$config['source_image'] = '/path/to/image/mypic.jpg';
$config['x_axis'] = '100';
$config['y_axis'] = '60';
$this->image_lib->initialize($config); 

if ( ! $this->image_lib->crop())
{
   echo $this->image_lib->display_errors();
} 
```

If resize is exactly what you have.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:23:24.800

我已经解决了我的问题。我不得不重新调整我的图像大小，然后裁剪它。无论如何，如果您有比这更好的方法，请提出建议。

我的代码：

```
 //Resize Image
            $config = array();
            $config['image_library'] = 'gd2';
            $config['source_image'] = './assets/original/'.$image_name;
            $config['new_image'] = './assets/banner/'.$image_name;
            $config['create_thumb'] = FALSE;
            $config['maintain_ratio'] = TRUE;
            $config['master_dim']= 'width';
            $config['quality']  = '100';
            $config['width'] = 1260;
            $config['height']= 645;
            $this->image_lib->initialize($config);
            $this->image_lib->resize();
            // Crop Image
            $config = array();
            $config['image_library'] = 'gd2';
            $config['source_image'] = './assets/banner/'.$image_name;
            $config['new_image'] = './assets/banner/'.$image_name;
            $config['create_thumb'] = FALSE;
            $config['maintain_ratio'] = FALSE;
            $config['quality']  = '100';
            $config['x_axis'] = 0;
            $config['y_axis'] = 0;
            $config['width'] = 1260;
            $config['height']= 645;
            $this->image_lib->initialize($config);
            $this->image_lib->crop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:27:14.693

```
 $this->image_lib->resize(); 
```

我想一定是

```
 $this->image_lib->crop(); 
```

# c# - 文本框中有字符串时如何启用按钮？

> ID：13085079
> 
> 赞同：5
> 
> 时间：2012-10-26T10:22:03.310
> 
> 标签：c#, winforms

我在form2中有一个文本框和一个按钮。当在 form1 中单击一个项目时，会出现 form2。我想在文本框为空时禁用 form2 中的按钮，但是当用户开始输入时，我想启用该按钮。

我曾尝试在我的构造函数中像这样在 initialisecomponent() 之后使用 if ，但它不起作用：

```
if(textbox1.text != "")
{
   btnOne.Enabled = true;
} 
```

我还尝试调用`checkText()`在初始化组件之后调用的方法，该组件使用 do-while 循环进行检查，例如：

```
do{
    btnOne.Enabled = true
  }
 while(textbox1.text != ""); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T10:24:29.177

你需要使用一个事件。查看控件的[TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)事件。`TextBox`

基本上你会想要这样的东西：

```
private void textbox1_TextChanged(object sender, EventArgs e)
{
    btnOne.Enabled = !string.IsNullOrEmpty(textbox1.Text);
} 
```

如果您使用的是 Visual Studio，您可以执行以下操作来添加事件代码。

*   打开设计器视图
*   选择文本框控件
*   查看“事件”窗口
*   找到“TextChanged”事件
*   双击值空间，将自动添加代码供您使用

* * *

**注意**：这种方法将要求用户`TextBox`在事件触发之前“失去焦点”在控件上。如果您想要一个即用型解决方案，请查看[KeyUp](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup.aspx)事件

@Asif 在检查空白字符方面也提出了一个很好的观点。这是您对有效内容的要求，但如果您不想允许使用空白值，则可以改用[IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)方法 - 但是，这需要您使用 .Net Framework 4.0 或更高版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:28:32.950

在 Windows 窗体中使用文本框更改事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:29:48.160

如果您不允许空格作为有效输入，那么您应该使用 `string.IsNullOrWhiteSpace`而不是`string.IsNullOrEmpty`.

```
textbox1.TextChanged += (sender, e)
{
    btnOne.Enabled = !string.IsNullOrWhiteSpace(textbox1.Text);
}; 
```

# php - 将我的 URL 重写为“Pretty URLs”会导致任何 404 错误吗？

> ID：13085089
> 
> 赞同：1
> 
> 时间：2012-10-26T10:22:28.940
> 
> 标签：php, url-rewriting, web, rewrite, friendly-url

再会！我有一个关于从 URL 中删除文件扩展名的问题。

如果我要使用以下规则从我的网站 URL 中删除 .php 扩展名，那么任何指向任何网站页面的先前链接都会中断吗？

例如，如果 www.site.com/archives.php 变成 www.site.com/archives，任何指向 www.site.com/archives.php 的链接仍会指向 www.site.com/archives，或者会导致404？

重写规则：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:36:57.760

我会建议你一个更好的解决方案。

```
RewriteEngine on

# dont rewrite for directories
RewriteCond %{REQUEST_FILENAME} !-d

# rewrite everything else to index.php

RewriteRule .* index.php [L] 
```

现在您可以在 index.php 中使用该变量

```
$_SERVER['REQUEST_URI'] 
```

您可以阅读请求的文件

例子：

网址： http: [//my-site.de/Archives](http://my-site.de/Archives)

然后在请求变量中，您将拥有字符串“Archives”，现在您可以使用 strtolower 将字符串解析为小写（我更喜欢这个 .. 如果 uri 是通过驼峰式大小写调用的）

另一个例子：

网址： http: [//my-site.de/Archives/Latest/Show](http://my-site.de/Archives/Latest/Show)

请求变量包含字符串“Archives/Latest/Show”

现在您可以使用该目录在服务器上的同一目录中查找文件或使用路径作为请求的参数。

以 PHP 结尾的解决方案在 php 中如下所示：

```
<?php
$requestedPath = $_SERVER['REQUEST_URI'];

if (substr(strtolower($requestedPath),-4) != '.php') {
    $requestedPath .= '.php';
}

if (file_exists($requestedPath)) {
    include_once($requestedPath);
}
?> 
```

# ms-access - 操纵查询结果创建另一个表

> ID：13085091
> 
> 赞同：1
> 
> 时间：2012-10-26T10:22:29.923
> 
> 标签：ms-access, vba, ms-access-2007

好的，所以我尝试了几种不同的方法并搜索了论坛。我发现了与我遇到的问题类似的问题，但不是我正在寻找的问题。我对我的数据库有一个查询，它返回 2 列。第一列是代号，第二列是代号的修订版

例如

```
Code_1       0
Code_1       1
Code_2       0
Code_2       1
Code_2       2 
```

现在我需要做的是遍历这个查询并挑选出与每个代码号关联的代码和最大修订号，并将它们放入另一个表中，这样我最终会得到

```
Code_1     1
Code_2     2 
```

在我的新桌子上。

我什至似乎无法遍历查询，每次我得到的只是第一个结果。我已经使用下面的 Debug.Print 来向自己展示我的循环正在做什么。我已经完成了一些 Java 并且 vba 循环是不同的。我尝试过的一种方法是：

```
Dim db  As DAO.Database
Dim rs  As DAO.Recordset
Set db = CurrentDb()
Set rs = db.OpenRecordset("Query_Name")

Dim i,j as Integer
Dim tempvar1, tempvar2 As Variant
For i = 0 To rs.EOF
tempvar1 = rs!Code_Number
For j = 0 to rs.EOF
tempvar2 = rs!Code_Rev
If Code_Rev > tempvar2 Then
tempvar2 = rs!Code_Rev
End If
Debug.Print(tempvar1 + tempvar2)
Next j
Next i 
```

我得到的只是列表中的第一个代码号和修订版。如果我什至不能正确地循环遍历列表，我就没有希望从我需要的结果中创建一个新表：-/ 我也尝试过使用 Do While 循环做类似的事情，但结果类型相同。请告诉我我迭代查询的方式的错误，并请帮助我从结果中创建一个新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:27:12.140

为什么不直接查询？

```
SELECT tx.Code, Max(tx.[NewCode]) AS MaxOfC INTO New
FROM tx
GROUP BY tx.Code; 
```

其中 tx 是您的表的名称。

# c++ - 使用 Code::Blocks 构建 boost 库

> ID：13085092
> 
> 赞同：1
> 
> 时间：2012-10-26T10:22:31.603
> 
> 标签：c++, boost, codeblocks

有没有办法在没有安装 Visual Studio 的情况下构建 boost 库？我尝试在以下位置安装： http: [//www.boost.org/doc/libs/1_51_0/more/getting_started/windows.html](http://www.boost.org/doc/libs/1_51_0/more/getting_started/windows.html)在命令提示符下我输入了 bootstrap.bat，我得到：

![在此处输入图像描述](../Images/85ce1da5483813a303fefc25b39eb6cf.png)

AFAIC cl 是一个 VS 编译器，但我没有安装 VS，也不想拥有它。我正在使用 Code::Blocks 和 GCC 4.7.1，我想为这个工具集构建这个库，而不是 VS。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:53:48.663

来自[初学者在 Windows 中使用 Code::Blocks 设置 Boost 的快速参考](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)：

Bootstrap.bat 假设您使用的是 msvc 编译器，要使用 Gcc，请键入

> 引导程序.bat gcc

# java - 支持在未由 spring 实例化的类中自动装配 (3)

> ID：13085096
> 
> 赞同：3
> 
> 时间：2012-10-26T10:22:51.907
> 
> 标签：java, spring, autowired

我意识到这应该是非常基本的，但是在 Helloworld 之后我还没有找到第二步示例

所以我所拥有的是：

spring 配置 xml 称为 spring-beans.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <context:annotation-config />
    <context:component-scan base-package="org" />

</beans> 
```

一个弹簧上下文初始化的类：

```
public static void main(String[] args) {
    // initialize Spring
    ApplicationContext context = new ClassPathXmlApplicationContext("META-INF/spring-beans.xml");

    App app = (App) context.getBean("app");
    app.run();
} 
```

AppImpl 类的相关细节：

```
@Component("app")
public final class AppImpl implements App{    

    // focus of question: This autowiring works
    @Autowired
    private DAO1 dao1;

    public void run() {
        //focus of question: This works as daoclass is instantiated properly                   
        obj1s = dao1.myFind();            

        badJobs = runJobs(obj1s);
    }

    private List<Obj1> runJobs(final List<Obj1> obj1s) {        
        List<Obj1> jobsGoneBad = new ArrayList<Obj1>();
        for (Obj1 next : obj1s) {

            // focus of question: usage of new keyword, thus not spring container managed?
            Job job = new JobImpl(next);
            job.run();

        }
        return jobsGoneBad;
    }    
} 
```

JobImpl的相关细节：

```
public class JobImpl implements Job {

    private Obj1 obj1;

    // focus of question: can't autowire
    @Autowired
    private DAO2 dao2;

    @Override
    public void run() {
        //focus of question: opDAO == null - not initialized by @Autowired
        Obj2 obj2 = dao2.myFind();        
    }

} 
```

DAO1的相关细节：

```
@Repository("DAO1") //Focus of question: DAO1 is a repository stereotype
public class DAO1 {

    myfind() { ...}
} 
```

DAO2的相关细节：

```
@Repository("DAO2") //Focus of question: DAO2 is a repository stereotype
public class DAO2 {        

    myfind() { ...}
} 
```

对，所以我通过 springcontext 调用初始化应用程序，然后通过使用 @Autowired 成功实例化 DAO1 实例。

然后我创建了一个 Job 的非托管实例，并希望通过使用 @Autowired 在该类中注入“singeltonish”依赖项

两个 Dao 类都是 spring 刻板印象，scanner 发现它们很好。

所以我的问题基本上是，我应该如何实例化作业实例以便我可以在其中使用 @Autowired 概念？

如果我需要一个全局可访问的应用程序上下文，我该如何最好地引入它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:42:06.037

您只能在 Spring 托管 bean 中使用 Spring Bean 功能，例如注入！

但是你可以使用`@Configurable`Annotation，但这需要你使用REAL AspectJ。如果一个类由`@Configurable`（并且您使用 AspectJ）注释，那么您可以使用 Springs Injection Annotations，即使这个类是由一个普通的`new`.

@看

*   Spring参考：[第8.8.1章使用AspectJ通过Spring依赖注入域对象](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable)
*   [使用 @Configurable 的 Spring 自动装配](https://stackoverflow.com/questions/4703206/spring-autowiring-using-configurable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:41:51.210

@Autowired 不起作用，因为您的 JobImpl 对象不是由 spring 管理的，因此它永远没有机会注入它。Spring 托管 bean 是在组件扫描期间或在 XML 定义中创建实例的那些。在您的情况下， JobImpl 被实例化为普通的 Java 对象。

一种解决方案是在 spring 上下文中用手动查找替换自动连接。

```
private DAO2 dao2 = SpringApplicationContext.getApplicationContext ().getBean (DAO2.class); 
```

@Autowired 在@AppImpl 中工作，因为它被注释为@Component。这会在其类路径扫描期间将其标记为 spring，它将创建此类的实例并执行任何自动装配/注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T10:40:46.017

Spring bean 默认是单例的。但是，您需要的是多个实例，最重要的是，多个实例创建了运行时。

一种可能性是为此使用[方法注入](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-method-injection)。您将创建一个容器感知作业工厂，该工厂将从容器中请求新实例。

（我认为你需要在那些运行时实例中注入 DAO 引用有点可疑......我可能会尝试重新考虑逻辑。为什么你不能只在构造函数参数中提供 DAO 引用，例如，或者完全从其他地方使用它。你可以在 dao 中有一个方法来接受 Jobs 实例，或者在 JobImpl 中有一个 runWith(DAO2 dao) 东西，它可以满足在其他地方注入的类，或者一个 JobProcessor 服务，它将注入 daos 并从 Jobs 实例中询问相关信息......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:25:52.967

为您的课程添加`@Component`注释`JobImpl`。在 xml 中为此类添加组件扫描，您的自动装配将适用`dao2`（提供 getter-setter 方法）。

# objective-c - 使用 UIModalPresentationFormSheet 的模态视图保留在内存中 (ARC)

> ID：13085104
> 
> 赞同：0
> 
> 时间：2012-10-26T10:23:49.533
> 
> 标签：objective-c, automatic-ref-counting, modalviewcontroller

我正在使用 UIModalPresentationFormSheet 演示样式呈现模式视图。

```
MPMediaItemCollection *albumItem = [self.albums objectAtIndex:index];
AlbumViewController *destination = [[AlbumViewController alloc] initWithAlbum:albumItem];
destination.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:destination animated:NO]; 
```

当用户在模态视图之外点击时，它会关闭。但是，它仍然在内存中，它没有被释放。

处理这个问题的正确方法是什么？

编辑：好像 AlbumViewController 里面有些东西没有被正确释放。我这边的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:26:08.347

是的，这是正确的。ARC 会在需要时负责释放内存。

从[这里](https://stackoverflow.com/questions/12827319/forcing-a-dealloc-or-getting-dealloc-sooner)：

> ARC 解除分配没有更多强引用的任何对象。所以要释放一些东西，只需将所有指向它的变量设置为 nil 并确保该对象不涉及任何循环引用。

# haskell - 没有为 Haskell EclipseFP 分析运行打开 BIRT 图表

> ID：13085105
> 
> 赞同：0
> 
> 时间：2012-10-26T10:23:51.983
> 
> 标签：haskell, eclipse-plugin, birt, eclipse-fp

我已经在 Eclipse 上为 Haskell 安装了 EclipseFP 插件。一切安好。我按照[http://eclipsefp.github.com/install.html](http://eclipsefp.github.com/install.html)的说明进行操作。我的 Haskell 程序正在那里运行，我有 Hoogle 帮助等。但是如果我运行我的 Haskell 应用程序进行分析，它会在关闭后生成 .hp 文件。然后使用默认编辑器以文本格式打开它，例如：

```
JOB "test4.exe"
DATE "Thu Oct 25 22:29 2012"
SAMPLE_UNIT "seconds"
VALUE_UNIT "bytes"
BEGIN_SAMPLE 0.00
END_SAMPLE 0.00
BEGIN_SAMPLE 0.01
END_SAMPLE 0.01 
```

我已经安装了 BIRT 3.7 Charting。为什么它没有按照我的图表打开。我错过了什么？我试图用另一个编辑器打开，但与 BIRT 没有任何关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T08:51:31.570

是的，您应该只需要 BIRT Charting 和 BIRT Engine。与分析输出关联的编辑器的名称是“Profiling Output Viewer”，当您对 .hp 文件执行 Open With... 时，它应该是一个选项。（如果您转到 Window -> Preferences -> General -> Editors -> File Associations 并检查 *.hp 的关联编辑器，它也应该出现）

如果您没有看到 Profiling Output Viewer，请检查 Eclipse 日志文件是否有错误。负责打开 BIRT 图表的插件的名称是“net.sf.eclipsefp.haskell.profiler”，搜索加载该插件的错误。

希望这可以帮助。

# iphone - 如何在 iPhone 的 webview 中加载地址？

> ID：13085108
> 
> 赞同：0
> 
> 时间：2012-10-26T10:24:17.303
> 
> 标签：iphone, ios, webview, maps, location

目前我在 iPhone 应用程序中工作，使用 UIWebview 加载地址，如“美国”，然后运行应用程序，地图未显示在屏幕上。我想从用户输入搜索栏字段中显示位置，如何解决这个 iuissue？请帮我

提前致谢

我试过这个：

```
 webView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 40, 320,376)];
    webView.delegate=self;
    webView.scalesPageToFit=YES;
    NSString *mapurl = @"http://maps.google.com/maps?q=";
    NSString *urlString1 = [mapurl stringByAppendingFormat:@"America"];    
    NSString *OmitSpace = [urlString1 stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

    NSURL *url=[NSURL URLWithString:OmitSpace];
    NSURLRequest *requestObj=[NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj]; 
```

截屏： ![在此处输入图像描述](../Images/3d09feb8a7367941f75147789f0197bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:36:59.347

另一种解决方案是使用 googleapis 查找 api 的 JSON 响应的纬度和经度，并使用它们`MKMapView`来显示该特定区域。

一个例子..

[http://maps.googleapis.com/maps/api/geocode/json?address=america&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=america&sensor=true)

结果是 JSON 输出，您可以在其中获取纬度和经度，进一步对其进行处理`MKMapView`

或用于 iOS 5 及更高版本`CLGeocoder`并`MKMapView`获得相同的输出

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:@"America" completionHandler:^(NSArray *placemarks, NSError *error) {
        //Error checking

        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        MKCoordinateRegion region;
        region.center.latitude = placemark.region.center.latitude;
        region.center.longitude = placemark.region.center.longitude;
        MKCoordinateSpan span;
        double radius = placemark.region.radius / 1000; // convert to km

        NSLog(@"Radius is %f", radius);
        span.latitudeDelta = radius / 112.0;

        region.span = span;

        [mapView setRegion:region animated:YES];
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:31:14.707

```
NSString *OmitSpace = [urlString1 stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

这将仅省略空格。它不会转换其他转义字符。所以用这个替换上面的行。

```
NSString *OmitSpace = [urlString1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

# cookies - 将 specifig User-Agent 和 CookieContainer 与 WinRT 一起使用

> ID：13085109
> 
> 赞同：-1
> 
> 时间：2012-10-26T10:24:19.380
> 
> 标签：cookies, windows-runtime, user-agent

有没有办法使用 CookieContainer 并使用 WinRT 在同一请求中指定 UserAgent？

看起来 HttpWebRequest 不支持 UserAgent。HttpClient + HttpRequestMessage 似乎也不支持 CookieContainer。

或者我可以以某种方式从 HttpRequestMessage 读取收到的 cookie 吗？（在 WP7 中，cookie 不可读。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:31:21.820

新的：

这是一个适用于 User-Agent 的选项（并开始使用 cookie）：

[如何在 Windows8 应用程序中向 HttpWebRequest 添加标头？](https://stackoverflow.com/questions/10960358/how-to-add-header-to-httpwebrequest-in-windows8-applicaition)

HttpClient 现在是在 WinRT 中进行通信的首选方式。

旧：您应该能够使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.httpwebrequest.aspx)类。它有一个[UserAgent](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.httpwebrequest.useragent.aspx)属性和一个[CookieContainer](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.httpwebrequest.cookiecontainer.aspx)。cookie 容器 Web 文档有一个示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T10:54:52.430

也可以将 CookieContainen 与 HttpClient 一起使用。您只需要创建第一个 HttpClientHandler。从那里可以添加 CookieContainer。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781241.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781241.aspx)

> var handler = new HttpClientHandler();
> 
> handler.CookieContainer = myCookieContainer;
> 
> var httpClient = new HttpClient(handler);
> 
> httpClient.DefaultRequestHeaders.Add("user-agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)");

# android - Android ClassNotFoundException on working project (pre eclipse crash)

> ID：13085117
> 
> 赞同：1
> 
> 时间：2012-10-26T10:24:36.927
> 
> 标签：android, eclipse

我有一个 Android 项目，它在 Eclipse 崩溃和损坏工作区之前完美地构建和运行。

`.metadata`在我从工作区文件夹中删除（移动）该文件夹之前，Eclipse 不会启动。

现在，该项目将正常构建并安装在我的设备上，但是当它启动时，我在 LogCat 上收到以下错误：

关于如何解决的任何想法？

```
 FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.conor.app/com.conor.app.StartActivity}: java.lang.ClassNotFoundException: com.conor.app.StartActivity
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    at android.app.ActivityThread.access$600(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.conor.app.StartActivity
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:44:42.120

好的，所以我解决了这个问题。删除 .metadata 文件夹似乎可以让 Eclipse 重新启动，但该项目似乎有点混乱。

我的解决方案如下：

*   `.metadata`从工作区中删除文件夹

*   将所有项目移出工作区到其他地方（临时位置）

*   启动 eclipse 并选择你的工作区。这将重建`.metadata`文件夹

*   从 Eclipse 导入临时位置中包含的所有项目

如果您遇到此问题，希望对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:43:47.937

你的项目中有一个 lib 文件夹吗？如果您有一个 lib 文件夹，请将其重命名为 libs。将最新的 ADT lib 文件夹重命名为 libs 并导致该错误。上个月我遇到了同样的问题，在我用谷歌搜索了一下后，我通过重命名 lib 文件夹解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:47:08.057

请确保您的 AndroidManifest 正确且未损坏。

您是否在清单中定义了 com.conor.app.StartActivity Activity？

# tridion - 如何在自定义解析器中确定发布用户/访问引擎

> ID：13085121
> 
> 赞同：5
> 
> 时间：2012-10-26T10:25:01.763
> 
> 标签：tridion, resolver

为了在发布期间启用自定义用户首选项，我们希望在解析步骤（在自定义解析器中）找出发布用户是什么（因此不是为发布者服务配置的用户帐户，而是启动发布操作的用户）。

要找到原始发布用户，我们需要访问 PublishTransaction 对象（特别是 Creator 属性）；我们不能在自定义解析器中使用 Session 中的 User 属性，因为这个 Session 是由 Publisher 服务创建的（并且会给我们服务帐户）。

要查找当前的 PublishTransaction，[Mihai 为我们提供了出色的 hack](http://yatb.mitza.net/2012/03/get-current-publish-transaction.html)。在本质上; 如果我们可以得到一个 Engine 对象，我们就可以确定上下文发布事务。

在我们的自定义解析器中，使用四个参数调用 Resolve 方法：

```
public void Resolve(
    IdentifiableObject item,
    ResolveInstruction instruction, 
    PublishContext context, 
    ISet<ResolvedItem> resolvedItems
) { } 
```

*   该项目可用于为我们提供 Session 对象，但 IdentifiableObject 和 Session 都没有对引擎的引用。
*   解析指令只是解析的一组数据属性。
*   发布上下文（不幸的是不是 PublishingContext）仅包含发布和发布目标。
*   ResolvedItem 可以让我们再次访问 Session 但不能访问引擎。

我的问题（最后）有两个方面：
1.我是否错过了可以确定上下文用户帐户的任何潜在点（除了 PublishTransaction）？
2\. 我是否错过了可以从调用 IResolver.Resolve() 方法的参数来确定引擎的任何潜在点？

* * *

编辑：我意识到我忽略了为什么我们要使用额外的元数据（来自用户偏好）自定义发布活动的更广泛的画面，因为它有点长篇大论；

我最终需要的是在组件模板中激活组件的特定版本（通过遍历版本列表并找到链接到专用标记组件的版本），但为了做到这一点，我需要知道标记组件是。出于这个原因，我们发布了标记组件（它将解析所有链接的组件并最终解析页面），并且自定义解析器允许我们将标记组件的 TCMURI 推送到会话缓存中（使其在 CT 中可访问）。

现在我们想在用户级别为特定标记组件设置“首选项”，以允许在此标记上下文中发布较小批量的资产（而不是一次发布链接到标记的所有内容）。

因为在 CT 中运行的 TBB 实际上确实有一个可用的 Engine 对象，所以我们可以使用 Mihai 的方法并确定发布用户（而不是像我们最初所做的那样从解析器推送标记上下文），这样就完全绕过了这个问题。

我想知道为什么解析和渲染操作之间的信息可用性存在如此大的差异；毕竟两者都是同一出版环境的一部分。我不禁觉得我忽略了一些非常基本的东西，但也许我没有，而且从解析器访问发布上下文或引擎根本是不可能的。

* * *

编辑：正如 Dominic 所推测并由 Nuno 确认的那样，在解决时没有“引擎”；因此，我的问题的这一半已经得到解答。那离开

> 我是否错过了可以从中确定上下文用户帐户的任何潜在点（PublishTransaction 除外）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:10:15.230

我之前在一个项目中走这条路（试图让用户进入解析器扩展），这是一个痛苦的世界。

我从解析器扩展转移到渲染扩展，甚至考虑了传输扩展，只是为了回到最简单的方法：TBB。

当然，我的用例与您的不同，因为看起来您可能希望根据用户更改解析行为（有些用户不喜欢链接传播，对吗？ - 如果他们害怕更改内容，那么他​​们不应该改变它;-)）但我最终*没有*以这种方式实现它。

我*认为*有一个增强请求包含有关触发发​​布操作的用户的更多信息，但如果在产品中实施，它将适用于 Tridion 2013，不确定你能等那么久。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:58:45.073

我猜你现在无法接触到引擎。毕竟，您是在解析，而不是渲染。您提到您想要“启用用户首选项”，但您并没有告诉我们更多关于您的实际问题，而不是您当前正在遵循的调查路线（这可能是也可能不是死胡同）。

什么样的用户偏好与发布相关，为什么需要在解析器中包含它们？

# android - Updating Activity TextView from Service

> ID：13085123
> 
> 赞同：0
> 
> 时间：2012-10-26T10:25:03.853
> 
> 标签：android, service, android-intent

I need to download 100MB of images, so i decided that the best way is to make Service wich download it, and will show results for each file in activity. But this works like theres no service, the Activity fzreees, and unfreezes only after download all files.

Heres the code of Activity:

```
public class DownloadActivity extends Activity 
{
String hist;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.download_activity);

    startService(new Intent(this, DownloadService.class));
    registerReceiver(broadcastReceiver, 
            new IntentFilter(DownloadService.BROADCAST_ACTION));
}

private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() 
{
    @Override
    public void onReceive(Context context, Intent _intent) 
    {
        updateUI(_intent);       
    }
};

private void updateUI(Intent intent) 
{
    if (intent.getBooleanExtra("exists", false))
        hist = hist + "Item " + 
                intent.getIntExtra("item", -1) + ", image " + 
                intent.getIntExtra("obraz", -1) + " - DOWNLOADED\n";
    else
        hist = hist + "Item " + 
                intent.getIntExtra("item", -1) + ", image " + 
                intent.getIntExtra("obraz", -1) + " - ALREADY EXISTS\n";

    ((TextView) findViewById(R.id.dtitle)).setText("Item " + 
            intent.getIntExtra("item", -1) + ", image " + 
                    intent.getIntExtra("image", -1) + ".");

    ((TextView) findViewById(R.id.ddetails)).setText(hist);
}
} 
```

Code of Service:

```
public class DownloadService extends Service
{
public static final String BROADCAST_ACTION = "emis.katalog.grzybow.publishprogress";
Intent intent;
int counter = 0;
String postString;

@Override
public IBinder onBind(Intent arg0) 
{
    // TODO Auto-generated method stub
    return null;
} 
@Override
public void onCreate() 
{
    super.onCreate();
    intent = new Intent(BROADCAST_ACTION);  
}

@Override
public void onStart(Intent intent, int startId) 
{ 
    SQLiteDatabase db = new BazaGrzybowHelper(DownloadService.this).getReadableDatabase();
    Cursor kursor = db.rawQuery("SELECT * FROM table", null);

    InputStream in = null;
    OutputStream out = null;
    URL ulrn;

    int nn = 1;
    int pos = 1;

    //out:
        while(kursor.moveToNext())
        {
            while(kursor.getString(kursor.getColumnIndex("i_url_" + nn)) != "" || 
                    kursor.getString(kursor.getColumnIndex("i_url_" + nn)) != null)
            {
                String filename = "thg_" + pos + "_" + (nn+2) + ".jpg";
                if (new File(Environment.getExternalStorageDirectory(),
                        "emis/katalog.grzybow/zapis_na_stale/"+filename).exists())
                    publishProgress(pos, nn, true);
                else
                {
                    publishProgress(pos, nn, false);

                    File destDir = new File(Environment.getExternalStorageDirectory(),
                            "emis/katalog.grzybow/zapis_na_stale");
                    if (!destDir.exists())
                        destDir.mkdirs();
                    destDir = null;

                    try 
                    {
                        ulrn = new URL(kursor.getString(kursor.getColumnIndex("i_url_" + nn)));
                        HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
                        in = con.getInputStream();
                        out = new FileOutputStream(Environment.getExternalStorageDirectory().
                                getPath() + "/emis/katalog.grzybow/zapis_na_stale/" + filename);
                        copyFile(in, out);
                        in.close();
                        in = null;
                        out.flush();
                        out.close();
                        out = null;
                    } 
                    catch(Exception e) 
                    {
                        e.printStackTrace();
                    }
                }
                nn++;

                if (nn > 10 || kursor.getString(kursor.getColumnIndex("i_url_" + nn)) == "" || 
                        kursor.getString(kursor.getColumnIndex("i_url_" + nn)) == null)
                {
                    nn = 1;
                    break;
                }
                /*if (anuluj)
                    break out;*/
            }
            pos++;
        }

    db.close();
}

private void publishProgress(int item, int image, boolean exists) 
{
    intent.putExtra("item", item);
    intent.putExtra("image", image);
    intent.putExtra("exists", exists);
    sendBroadcast(intent);
}

private void copyFile(InputStream in, OutputStream out) throws IOException 
{
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1)
    {
        out.write(buffer, 0, read);
    }
}

} 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:30:39.423

Perhaps [this](http://developer.android.com/guide/components/services.html)?

> Caution: A service runs in the main thread of its hosting process—the service does not create its own thread and does not run in a separate process (unless you specify otherwise). This means that, if your service is going to do any CPU intensive work or blocking operations (such as MP3 playback or networking), you should create a new thread within the service to do that work. By using a separate thread, you will reduce the risk of Application Not Responding (ANR) errors and the application's main thread can remain dedicated to user interaction with your activities.

# php - PHP降低图像质量直到文件大小达到1mb

> ID：13085124
> 
> 赞同：2
> 
> 时间：2012-10-26T10:25:06.553
> 
> 标签：php, image, gd

我正在开发我的一个项目，用户将上传图片。上传的图像将使用灯箱显示。

问题是用户可能会上传大小为 5mb 的图像，依此类推。因此，它需要大量的加载时间。所以我想降低图像质量，保持尺寸不变。

我知道我们可以使用 imagejpeg() 函数，并传递第三个参数，即质量 90，这也可以减小文件大小。

我需要所有图像文件的大小最大为 1mb，不超过这个。

所以，我很困惑应该通过什么值作为质量，以便获得最佳质量。

例如。如果上传的图像文件大小是 1.2mb，那么说我将通过 90 作为质量，这可能会将大小降低到 1mb 以下，并且质量也可以接受。另一种情况，如果上传的文件大小是 5mb，如果我通过 90 作为质量，那么文件大小可能不小于 1mb。在这里我需要传递较少的质量值（我猜）。

那么有什么方法可以帮助我确定应该传递的最佳质量参数。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:07:17.173

不久前，我花了很长时间来处理同样的事情。首先，我发现 PNG 和 JPG 格式在猜测结果时非常尴尬。JPG照片一般不能很好地转换成PNG，但是矢量jpg图像会，矢量png一般不能很好地转换成JPG，但是照片会。你会发现很难确保图像小于 1mb，尤其是如果你不调整它们的大小。如果你不调整它们的大小，你也会遇到更多的麻烦——图像越大，质量就会越来越低（有点讽刺）。

您需要每个图像的几个版本。让我解释。

1.  您想保留原始图像，因此您可以在以后的任何时间根据原始图像刷新图像，以便稍后提高图像质量甚至获得一些新的尺寸。

2.  将原始图像与灯箱一起使用通常不是一个好主意。您最好调整它的大小以适应 1024 x 1024 的大小。这足以满足大多数人的需求，并且通常会提供合理的文件大小。然后，如果您愿意，您可以提供要下载的原件。当图像需要很长时间才能加载时，使用可能的最大文件通常会导致不满意的访问者，甚至可能会在一段时间后通过带宽使用花费他们很多（出于同样的原因）。

我能想到的唯一方法是按照您的要求创建一些可怕的代码性能循环，逐渐降低质量并检查生成的图像大小。一旦找到低于 1mb 的图像大小，它就会退出循环并使用该质量设置。不过，我真的建议不要这样做。

P.S. Outside the scope of this answer i have mentioned in the comments the methodology of a solution i used.

# iphone - 当应用程序在 ios 中进入前台时，BackgroundTask 不会停止

> ID：13085125
> 
> 赞同：2
> 
> 时间：2012-10-26T10:25:07.877
> 
> 标签：iphone, ios5, background-process

我正在使用 beginBackgroundTaskWithExpirationHandler 获得 10 分钟的额外时间让应用程序在后台运行。但如果应用程序在提供的 10 分钟时间内进入前台，我需要停止此后台任务。我的代码如下

```
- (void)applicationDidEnterBackground:(UIApplication *)application
   {
    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^ {
    NSLog(@"invalidate back task in didenter %@",[application backgroundTimeRemaining]);
     if (bgTask != UIBackgroundTaskInvalid) {  
         [application  endBackgroundTask:bgTask];
         bgTask = UIBackgroundTaskInvalid;
     }

}];

//Background tasks require you to use asyncrous tasks
dispatch_async(dispatch_get_main_queue(), ^{
    NSLog(@"\n\nRunning in the background inside DidEnterBackground %f!\n\n", [application backgroundTimeRemaining]);
    while ([application backgroundTimeRemaining] > 1.0) {
        NSLog(@"\n\nRunning in background %f!\n\n", [application backgroundTimeRemaining]);
        sleep(5);
    }
    [application endBackgroundTask: bgTask]; 
     bgTask = UIBackgroundTaskInvalid;        
});
 } 
```

当应用程序出现在前台时，我正在结束这样的后台任务

```
- (void)applicationWillEnterForeground:(UIApplication *)application
 {
    [application endBackgroundTask:bgTask];
     bgTask = UIBackgroundTaskInvalid;
  } 
```

bgTask 在 .h 文件中全局声明。当应用程序进入前台时，它仍在运行后台任务，并将 backgroundTimeRemaining 显示为长整数值。我不知道如何停止后台任务，请帮助我。

谢谢

# android - 如何在 Android 上的 android.webkit.CookieManager 和 java.net.HttpUrlConnection 之间同步 cookie

> ID：13085126
> 
> 赞同：2
> 
> 时间：2012-10-26T10:25:09.767
> 
> 标签：android, sync, httpcookie, cookiemanager

我正在Android上制作程序。它有一个按钮和一个 WebView。如果我单击该按钮，它会将帖子消息发送到 Web 服务器。（使用 httpurlconnection）webview 从同一服务器加载页面。我想在核心和 webview 之间同步 cookie。我找到了从核心到 webview 的方法。但是，我找不到从 webview 到核心的方法。

我试过这些顺序。

1.  webview的页面被加载。
2.  从 webview 读取 cookie。
3.  使用 HttpCookie 将这些 cookie 添加到核心 cookie。

    URI uri = 新的 URI(url);

    HttpCookie httpCookie = new HttpCookie(cookie.getKey(), cookie.getValue());

    ((java.net.CookieManager) CookieHandler.getDefault()).getCookieStore().add(uri, httpCookie);

但它不起作用。怎么了？请给我建议。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:18:58.283

您还需要将 cookie 设置为 HttpPost 对象，试试这个：

```
httpPost.setHeader("Cookie", "PHPSESSID=" + httpCookie.getValue()); 
```

其中 httpPost 是 org.apache.http.client.methods.HttpPost 的一个实例

# iphone - 在uitableview上添加整理分隔符

> ID：13085127
> 
> 赞同：0
> 
> 时间：2012-10-26T10:25:17.813
> 
> 标签：iphone, objective-c, ios, uitableview, uikit

我有一个自定义分隔符样式（相当简单）：

```
[[UITableView appearance] setSeparatorColor:SOMECOLOR]; 
```

现在我想让我的 tableview 用分隔符完成。目前分隔符只出现在两个单元格之间，但我想在最后有一个分隔符。

看这里：

![没有出现分隔符](../Images/c03225bb58c0dc73f38b000c5b8066bc.png)

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:28:39.503

我通常在表格视图单元格中制作自己的分隔符。我使用`UIView`跨越单元格宽度且高 1 或 2 点的 a 来执行此操作。

在您的情况下，如果您想要系统分隔符，则必须在末尾添加一个自定义单元格，该单元格全透明且高 1 点。UITableView 然后将添加缺少的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:11:11.013

我知道你也想要一个分隔符吗？您可以添加页脚视图来实现此效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T15:08:02.497

制作高度为 0.0001 的页脚视图。为此，只需实现以下 tableview 委托方法：

`-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{ return 0.001; }`

# ruby-on-rails - 在 Rails 3 中加入范围

> ID：13085131
> 
> 赞同：0
> 
> 时间：2012-10-26T10:25:29.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在客户端上编写一个 Rails 3 范围来执行以下操作：

```
select * from clients c, dependents d
where d.last_name like '%ss%' and c.id = d.client_id; 
```

依赖模型：

```
class Dependent < ActiveRecord::Base
  belongs_to :client
  scope :by_last_name, (lambda do |name| { :conditions => ['last_name LIKE ?', "#{name}%"]} end ) 
```

客户型号：

```
class Client < ActiveRecord::Base
  has_many :dependents, :dependent => :destroy 
```

我还没有能够让范围连接在语法上工作。依赖的姓氏需要作为参数传入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:32:25.190

尝试这个：

```
class Client < ActiveRecord::Base
  scope :by_last_name, lambda { |last_name| includes(:dependents).where("dependents.last_name LIKE ?", "#{last_name}%") } 
```

然后打电话

```
Client.by_last_name "last_name" 
```

编辑：更改代码以反映您的问题。find_by_id(1) 也与 find(1) 相同，只是它在没有找到任何内容时不会抛出错误，而是返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:29:48.613

尝试以下操作：

```
scope :by_last_name, lambda {|name| where("dependents.last_name like ?", "'%#{name}%'") 
```

# java - Java String - 从 mysql 获取其他语言字符 - 数据是否完整？

> ID：13085133
> 
> 赞同：-1
> 
> 时间：2012-10-26T10:25:29.860
> 
> 标签：java, mysql, string, special-characters

如果我的 mysql 数据库中存储有日语、希腊语、中文、韩语等特殊字符，我将获取的 Java 字符串数据是否完整？

要明确我的问题是，如果我将它们存储在 java 字符串中，我在 mysql 中获取的特殊字符是否完整，并且当我将它们用于 JEditorPane 等文本组件时，我是否能够以字符形式显示它们

```
 String data;
     ResultSet r = sabiNa.executeQuery();
     while(r.next()) {
         data = r.getString("data");
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:44:22.213

Java 能够存储所有有效的 Unicode 文本。它在内部使用 UTF-16。

如果您正确配置了整个数据路径，所有文本都将被保留。您需要确保：

*   正确的字符串到达​​ Java（在 Web 应用程序的情况下，提交表单的字符编码）。
*   Java 知道它应该以 UTF-8 与数据库通信，并且数据库知道它应该通过连接期待 UTF-8。在设置数据库连接时确保这一点。
*   数据以 UTF-8 格式存储在数据库中。

请注意 [the documentation for MySQL]*声称*UTF-8 无法在基本多语言平面之外存储字符（所有“正常”字符都位于 BMP 内）。UTF-8 本身完全能够存储所有 unicode 字符，并且数据库也应该能够对这些字符进行编码。

Java 本身很好 - 只要记住一些罕见的 unicode 字符实际上是 Java 中的两个字符（称为[代理对](http://docs.oracle.com/javase/tutorial/i18n/text/supplementaryChars.html)）。

# r - 如何绘制带有未排序 x 轴（格子）的条形图

> ID：13085135
> 
> 赞同：-2
> 
> 时间：2012-10-26T10:25:37.567
> 
> 标签：r, lattice

我的代码如下所示：

```
read.table("GO.txt",header=T,sep=',')->go
library(lattice)
barchart(go[,1]~go[,2],horiz=F,ylim=c(30,29666),
layout=c(1,1),stack=F,
auto.key=list(space='right'),
ylab="Yes",
scales=list(x=list(rot=45),y=list(log = T))) 
```

但是，我不想用已排序的 x 绘制图表，我该怎么办？格子对我不需要的数据进行了排序。

数据：

```
 number_of_A-Unigene Class   Ontology
    45  biological adhesion biological_process
    5328    biological regulation   biological_process
    8   carbon utilization  biological_process
    6   cell killing    biological_process
    119 cell proliferation  biological_process
    3248    cellular component organization or biogenesis   biological_process
    16594   cellular process    biological_process
    244 death   biological_process
    4354    developmental process   biological_process
    3547    establishment of localization   biological_process
    917 growth  biological_process
    429 immune system process   biological_process
    3716    localization    biological_process
    30  locomotion  biological_process
    15726   metabolic process   biological_process
    4182    multicellular organismal process    biological_process
    1673    multi-organism process  biological_process
    877 negative regulation of biological process   biological_process
    10  nitrogen utilization    biological_process
    11  pigmentation    biological_process
    640 positive regulation of biological process   biological_process
    4808    regulation of biological process    biological_process
    2462    reproduction    biological_process
    2437    reproductive process    biological_process
    7812    response to stimulus    biological_process
    190 rhythmic process    biological_process
    2001    signaling   biological_process
    2   sulfur utilization  biological_process
    44  viral reproduction  biological_process
    19852   cell    cellular_component
    1763    cell junction   cellular_component
    19852   cell part   cellular_component
    31  extracellular matrix    cellular_component
    9   extracellular matrix part   cellular_component
    686 extracellular region    cellular_component
    30  extracellular region part   cellular_component
    3698    macromolecular complex  cellular_component
    9829    membrane    cellular_component
    3432    membrane part   cellular_component
    1439    membrane-enclosed lumen cellular_component
    15252   organelle   cellular_component
    6024    organelle part  cellular_component
    1753    symplast    cellular_component
    216 antioxidant activity    molecular_function
    15917   binding molecular_function
    15103   catalytic activity  molecular_function
    2   channel regulator activity  molecular_function
    433 electron carrier activity   molecular_function
    319 enzyme regulator activity   molecular_function
    8   metallochaperone activity   molecular_function
    522 molecular transducer activity   molecular_function
    708 nucleic acid binding transcription factor activity  molecular_function
    26  nutrient reservoir activity molecular_function
    102 protein binding transcription factor activity   molecular_function
    6   protein tag molecular_function
    613 receptor activity   molecular_function
    1039    structural molecule activity    molecular_function 
```

5 翻译调节活性分子功能 2478 转运蛋白活性分子功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:51:43.667

“格子”获取您的因子变量并按默认（字母）顺序排列它们。您可以更改顺序。也许：

```
go[,2] <- factor( go[,2] unique(as.character(go[,2])) ) 
```

这应该以与您在分页时首先出现的顺序相同的顺序设置级别。另一个等效的，虽然更巴洛克式的任务是：

```
go[,2] <- factor( go[,2] as.character( go[,2][!duplicated(go[,2])]) ) 
```

然后做你的情节。（我没有尝试输入您的数据。它们看起来太乱了。好吧，实际上我确实尝试过使用制表符作为分隔符。如果它们曾经有制表符。那么它们就丢失了，并且元素数量不定如果空格是分隔符。）

使用重复问题中的数据，标签未排序：

```
go[[2]] <- factor(go[[2]], levels=unique(as.character(go[[2]]))) 
```

![在此处输入图像描述](../Images/e6731a8df7e07923c04649dabfeb8a82.png)

# android - Android WebView 在离线模式下显示空白页面

> ID：13085140
> 
> 赞同：0
> 
> 时间：2012-10-26T10:25:54.053
> 
> 标签：android, webview, offline

在我的 ContentView 中，我有一些离线内容和一个 WebView。当设备在线时，WebView 显示来自网络的内容。但是当设备离线时，会显示白页。我怎样才能摆脱这个空白页？我不想在离线模式下显示任何 WebView 内容。

我的代码是：

```
 ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    android.net.NetworkInfo wifi = cm
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    android.net.NetworkInfo datac = cm
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    if ((wifi != null & datac != null)
            && (wifi.isConnected() | datac.isConnected())) {
    android.webkit.WebView wv = 
    (android.webkit.WebView)this.findViewById(R.id.myWebView);
    wv.clearCache(true);
    wv.loadUrl("MyURL");
    wv.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    wv.getSettings().setJavaScriptEnabled(true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:00:26.530

好吧，如果我理解正确，您希望它显示一些错误而不是空白页。然后你可以使用下面的代码：

```
mainWebView.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            String summary = "<html><h1>Could not connect to the server</h1><h2>May be you are not connected to Internet or</h2><h3>our server is down.</h3><body>Please exit the program and try again later.</body></html>";
            mainWebView.loadData(summary, "text/html", null);               

        }
    }); 
```

或者，如果您想在设备离线而不是显示空白页面时返回相同的活动，则只需使用以下代码：

```
 mainWebView.onResume();
                    finish(); 
```

我有同样的问题。所以我显示了错误而不是空白页。之后我决定回到我开始网络的活动。所以我用了finish(); . 这有助于完成错误并返回。

我使用的源代码是。

```
mainWebView.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                String summary = "<html><h1>Could not connect to the server</h1><h2>May be you are not connected to Internet or</h2><h3>our server is down.</h3><body>Please exit the program and try again later.</body></html>";
                mainWebView.loadData(summary, "text/html", null);

                Toast.makeText(activity, "Error. Cannot to the server. May be you are not connected to Internet or our server is down or " + description, Toast.LENGTH_LONG)
                        .show();
                mainWebView.onResume();
                    finish();

            }
        });

        mainWebView.loadUrl(getIntent().getStringExtra("url")); 
```

PS 抱歉回复晚了。我相信1年后。

# iphone - 如何使用 AVAudioRecorder 仅录制人声并避免背景噪音

> ID：13085150
> 
> 赞同：6
> 
> 时间：2012-10-26T10:26:16.007
> 
> 标签：iphone, ios, voice, avaudiorecorder, recording

我正在制作像会*说话的汤姆*这样的 iOS 应用程序，但无法只录制人声。它会随着人声产生如此多的背景噪音，因此它不像会*说话的汤姆*那样准确。

我想知道必须存在一些记录设置才能`AVAudiorecorder`在这种情况下对我有所帮助。我现在只是使用默认记录设置`AVAudioRecorder`。

# outsystems - 文本框默认值 - OutSystems

> ID：13085151
> 
> 赞同：3
> 
> 时间：2012-10-26T10:26:23.120
> 
> 标签：outsystems

我使用 OutSystems 开发了一个应用程序，其中我有一个数据类型为整数的实体属性。现在，当我打开该特定表单进行编辑时，实体属性为整数类型，默认情况下该文本框中的值显示为 0（零）。我必须手动删除默认值，然后输入其他值。

当我打开表单进行编辑时，是否有机会看到“已清除”（空白）文本框。

谢谢 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T14:29:16.833

您需要转到输入属性并在*Null Value*中将其设置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T06:18:37.950

同样由于数据类型是**integer**，在我输入的空值属性框中`TextToInteger("")`，它也可以正常工作。这是上述提供的答案的另一种选择。

# c++ - C++ 内存 - 是否需要删除使用“新”创建的原始类型变量？

> ID：13085152
> 
> 赞同：0
> 
> 时间：2012-10-26T10:26:25.570
> 
> 标签：c++, winapi, memory, memory-management, allocation

当谈到 C++ 中的内存管理时，我是个新手。我读到如果你用`new`关键字创建一个类，你必须`delete`让对象释放它的内存。我还读到原始类型（例如`int`和）是在堆栈上创建的`char`，`bool`这意味着它们在超出范围时会被删除。

但是用`new`关键字创建的原始类型呢？我需要明确调用`delete`吗？这些是像类一样在堆上创建的吗？或者由于它们是原始的，它们仍然在堆栈上创建吗？

我问是因为我正在`LPTSTR`使用 new 关键字分配 a，但我担心如果我不调用`delete`内存将永远不会被释放。这是我的代码，评论中有一个简单的问题：

```
#include <Windows.h>
#include <tchar.h>
#include <string>

#ifdef _UNICODE
    typedef std::wstring Str;
#else // ANSI
    typedef std::string Str;
#endif

Str GetWndStr(HWND hwnd) {
    const int length = GetWindowTextLength(hwnd);

    if (length != 0) {
        LPTSTR buffer = new TCHAR[length + 1]; // Allocation of string
        GetWindowText(hwnd, buffer, length + 1);
        Str text(buffer);

        delete buffer; // <--- Is this line necessary?
        return text;
    } else {
        return _T("");
    }
} 
```

我需要打电话`delete`吗？不久前，我尝试使用`GlobalAlloc()`and `GlobalFree()`，但是在运行时我收到一条错误消息，说明有关非法修改堆栈的信息，我没有确切的错误消息，因为这是不久前的情况。此外，除了您的回答之外，如果您想给我一些您认为有助于了解更多有关 C++ 内存管理的资源，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T10:28:58.237

对于每一个都`new`必须有一个`delete`，对于每一个都`new[]`必须有一个`delete[]`。请注意，分配的内存`new[]`必须使用 删除`delete[]`，而发布的代码中并非如此。

[`boost::scoped_array`](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/scoped_array.htm)例如，可以使用智能指针，它将`delete[]`在其析构函数（或`reset()`函数）中执行。如果在调用后可以抛出异常，这将特别有用`new[]`：

```
boost::scoped_array<TCHAR> buffer(new TCHAR[length + 1]);
GetWindowText(hwnd, buffer.get(), length + 1);
Str text(buffer.get()); // buffer will be deleted at end of scope. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T10:42:49.173

您的数组已分配，`new[]`因此必须使用`delete[]`( *not* `delete` ) 删除。

您也不需要显式动态分配：

```
Str text(length+1, 0);
GetWindowText(hwnd, &text[0], length + 1);
text.resize(length); // remove NUL terminator
return text; 
```

在 C++03 中需要一些理由，是否`string`并`wstring`实际分配连续内存，适合作为缓冲区传递。C++03 标准不保证这一点，但在 MSVC++ 中确实如此。如果您不想依赖这个事实，那么可以*保证*矢量，因此您可以将其用于缓冲区：

```
std::vector<TCHAR> buffer(length+1);
GetWindowText(hwnd, &buffer[0], length + 1);
return Str(buffer.begin(), buffer.end() - 1); 
```

`new[]`在 C++中直接使用是非常罕见的。在这两种情况下，我的`vector`或`string`缓冲区都是一个自动变量，所以我不需要做任何特别的事情来确保它在其作用域结束时被正确地销毁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T10:28:00.937

是（除非您使用智能指针或类似方法为您删除它）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T10:28:21.263

是的，规则很简单。你分配的所有东西都`new`需要被释放`delete`；并且所有分配的东西都`new[]`需要被释放`delete[]`。

为了减少出错的机会，最好使用容器、智能指针或其他[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)样式的对象来管理动态资源，而不是记住`delete`自己使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T10:28:10.283

当然，无论分配什么类型。它仍然有内存空间。

# node.js - NodeJS：process.nextTick 与即时回调

> ID：13085155
> 
> 赞同：14
> 
> 时间：2012-10-26T10:26:54.977
> 
> 标签：node.js, callback

我写了很多看起来像这样的模块：

```
function get(index, callback) {
    if (cache[index] === null) {
        request(index, callback); // Queries database to get data.
    } else {
        callback(cache[index]);
    }
} 
```

*注意：这是我实际代码的简化版本。*

该回调要么在同一次执行中被调用，要么在一段时间后被调用。这意味着模块的用户不确定首先运行哪个代码。

我的观察是这样的模块重新引入了以前由 JavaScript 引擎解决的多线程的一些问题。

问题：我应该使用`process.nextTick`还是确保在模块外调用回调是安全的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T10:31:37.350

这完全取决于您在回调函数中所做的事情。如果您需要确保回调在返回时尚未触发`get`，您将需要`process.nextTick`流程；在许多情况下，您并不关心回调何时触发，因此您无需延迟其执行。不可能给出适用于所有情况的明确答案；总是将回调推迟到下一个分时应该是安全的，但这样可能会效率低一些，所以这是一个权衡。

我能想到的唯一需要将回调推迟到下一个滴答声的情况是，如果您确实需要在调用 to*之后*`get`但在调用to 之前为它设置一些东西`callback`。这可能是一种罕见的情况，也可能表明需要改进实际的控制流程；你不应该完全依赖于你的回调何时被调用，所以无论它使用什么环境都应该已经在`get`调用的地方设置好了。

在基于事件的控制流（与基于回调的相反）中存在一些情况，您可能需要推迟实际的事件触发。例如：

```
function doSomething() {
    var emitter = new EventEmitter();
    cached = findCachedResultSomehow();
    if (cached) {
        process.nextTick(function() {
            emitter.emit('done', cached);
        });
    } else {
        asyncGetResult(function(result) {
            emitter.emit('done', result);
        });
    }
    return emitter;
} 
```

在这种情况下，您*需要*在缓存值的情况下推迟发出，因为否则事件将在调用者`doSomething`有机会附加侦听器之前发出。使用回调时，您通常不会有此考虑。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-10T13:09:51.887

[http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)

如果您在内部进行回调，请执行合适的操作

如果您正在创建其他人使用的模块，则异步回调应该始终是异步的。

# java - com.liferay.portlet.ActionResponseImpl 不能转换为 com.liferay.portlet.ActionResponseImpl

> ID：13085157
> 
> 赞同：-2
> 
> 时间：2012-10-26T10:26:59.237
> 
> 标签：java, casting, liferay

我试图像这样投射 Action 响应：

```
 private void mappingMethod(ActionResponse response) {

        ActionResponseImpl actionResponseImpl = (ActionResponseImpl)response;
...} 
```

在“表达式评估”窗口的调试中，我可以看到“响应”的类型是 ActionResponseImpl，并且强制转换不会导致异常。但是在运行时我有这个例外：

> java.lang.ClassCastException：com.liferay.portlet.ActionResponseImpl 无法转换为 com.liferay.portlet.ActionResponseImpl

请告诉我有什么问题。

PS：在 PortalImpl 类中，copyRequestParameters 方法具有相同的字符串，但在这里它正在工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:57:35.463

如果您避免使用`portal-impl.jar`自定义插件 portlet 中的类，这对您有好处。

`ActionResponseImpl`是中的一个类`portal-impl.jar`。因此，如果您可以给出一个用例说明您为什么打算使用这个类，那么我们可以建议替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:24:04.750

您在类路径上有两次 ActionResponseImpl - Liferay 的哪些 jars 包含在您的项目中？正如 Prakash 提到的，它是 portal-impl.jar，你*不能*在插件中拥有它。

ClassCastException 想要告诉您的是，您的类扩展了 ActionResponseImpl 的一个实现，但运行时环境期望它是另一个实现 - 它们可能是相同的，但是由于它们是从两个不同的源加载的，因此类加载器不能引用另一个超类比它扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:15:54.117

当我从 XHTML 页面调用使用 Ajax 的方法时，我看到了这个问题。我修改了我的方法以返回简单的字符串，并删除了试图修改 actionResponseImpl 并解决问题的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T13:00:46.233

这种类型的错误是由不同的类加载器产生的。一个类由其完全限定的类名及其类加载器标识。因此，如果您在 portlet 中嵌入了 portal-impl；该操作将从门户类加载器接收一个 ActionResponseImpl 实例，并试图将其转换为您的 portlet 类加载器的一个类。

查看更多：[http ://www.javaspecialists.eu/archive/Issue018.html](http://www.javaspecialists.eu/archive/Issue018.html)

# ajax - ajax 函数的 NS_Binding_Aborted 错误

> ID：13085158
> 
> 赞同：3
> 
> 时间：2012-10-26T10:27:03.323
> 
> 标签：ajax, firefox, jquery, httpfox

我有一个点击链接，请求应该转到 Web 服务器，成功执行后应该会发生重定向。我为此使用了 ajax，但在 HTTpFox 中出现 NS_Binding_Aborted 错误。编码：

```
<a id="lnkredirect" href="javascript:void(0);" onclick="myfunction();">Some text</a> 
```

ajax代码：

```
function myfunction(){
 $.ajax({
       url: Web server Url,
       type: 'POST',
       datatype: 'JSON',
       timeout: 20000,
       data: null,
       success: function{ $("#lnkredirect").attr('href','redirection link...');},
       error : function{ $("#lnkredirect").attr('href','redirection link...');}
 )};
 return true;
} 
```

重定向正在发生，但我在 Firefox 中收到 NS_Binding_Aborted 错误。在成功和错误的情况下，重定向都应该发生，但为什么 NS_Binding_Aborted 会到来，我不确定这一点。NS_Binding_Aborted 错误应该仅在一个事件取消某个先前运行的事件时出现，但我已经抑制了链接的 href 并在执行 ajax 请求后重定向它，因此应该只有一个服务器调用并且 NS_Binding_Aborted 不应该出现。请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-03T10:02:28.310

我遇到了类似的麻烦，同时在 onclick 中同时使用了 href 和 XmlHttpRequest。我的 XMLHttpRequest 被中止（ns_binding_aborted），因此从未达到状态 200。我还可以看到我的 XHR 在 Firefox 控制台中“被 devtools 阻止”。

这是因为页面在完成其工作（onclick 中的内容）之前（通过 href）重新加载。

我有这样的事情：

```
<script type="text/javascript">
function incrementNumberOfDownloads() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) { // 4 = request ended, 200 = success
            //update displayed number of downloads
            document.getElementById("numberOfDownloads").innerHTML = this.responseText; 
        }
    };
    xhttp.open("GET", "incrementNumberOfDownloads.php", true);
    xhttp.send();
    return true;
}
</script>
<p id="numberOfDownloads">42</p>
<a href="files/myFileToDownload.zip" onclick="return incrementNumberOfDownloads();">Download my file !</a> 
```

我通过在我的下载链接中添加 target="_blank" 解决了这个问题，这样点击时页面就不会再重新加载，从而使 XMLHttpRequest 能够成功完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T19:20:59.773

这是由另一个中止您的请求的请求引起的。通常，当您的目标是重新加载所有页面的数据时，只需结束请求并且不同步请求，就会出现一点 Novell 错误。
在这种情况下，“return”语句就是问题所在，return语句必须在success seccion中。

# jenkins - 匿名访问詹金斯工作区

> ID：13085160
> 
> 赞同：6
> 
> 时间：2012-10-26T10:27:06.787
> 
> 标签：jenkins

我正在使用安装在 CentOS 6.3 版和 Jenkins 1.474 上的 Jenkins。我正在使用基于项目的矩阵授权策略，以便仅允许特定 AD 组中的用户登录 Jenkins 并查看特定作业。

但是，我正在尝试为作业提供对工作区的匿名访问，以便我可以执行 wget 并指定 http URL。这样我通过 Jenkins 管理的主机就可以获得某些主机。

我已将匿名添加到基于项目的矩阵授权策略部分并勾选了工作区，但这不起作用。执行 wget 时，我可以访问禁止，当我将 URL 放入浏览器时，我被要求登录。我还配置了 Anonymous 以访问作业本身的工作区，但仍然禁止访问。

有没有人知道他为什么不工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T11:37:22.430

我们正在使用 Jenkins 版本 1.475

我们为匿名访问启用了以下功能： 总体：读取 -> 启用 工作：读取 -> 启用工作区 -> 启用

这允许匿名用户访问查看仪表板和作业以及工作区...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-13T15:14:27.200

从詹金斯版本开始。1.609.1，可以在
`Configure Global Security`|下进行更改 `Configure Global Security`（或`htTps://<your jenkins host>/configureSecurity/`）。

与[sdmythos_gr 的答案](https://stackoverflow.com/a/13086205/1845976)类似，只是 set`Overall Read`和`Job Read`for `Anonymous`。

[![在此处输入图像描述](../Images/0eaa59837f1ba88f986aa064f5d018ce.png)](https://i.stack.imgur.com/IhaOv.png)

# concurrency - 当我想同时运行具有 1000+ 组不同参数的相同算法时，Hadoop 可以做什么？

> ID：13085161
> 
> 赞同：0
> 
> 时间：2012-10-26T10:27:06.487
> 
> 标签：concurrency, hadoop

我想同时运行 1000 多个不同版本的同一算法（不同的参数），Hadoop 是否能够在这种情况下提高性能？我目前对 Hadoop 一无所知，所以这个问题可能看起来很愚蠢。我只是想知道 Hadoop 是否可以对此做点什么，我不需要知道如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:23:22.393

您以错误的方式考虑 Hadoop。使用 Hadoop 的优势和优势在于它允许对“数据密集型”任务进行分布式计算。这意味着当您对大量数据（甚至数 TB 到数 PB）进行相对较小/简单的处理时，它会表现出色。

因此，当您考虑 Hadoop 时，问题是“我有大量数据吗？” 如果是，那么它可能对您有用。看起来您的答案是否定的，并且您想将其用于并发处理。在这种情况下，这不是你要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:45:16.543

不，它不能。仅仅是因为它不关心同时运行的是什么类型的作业。您将看到一些性能改进，因为操作系统会尝试缓存您的输入。但一般框架不会优化这种情况。

Hadoop 不是为这些类型的工作而构建的，我非常怀疑您能否使用 Hadoop 获得良好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:02:07.177

你可以用hadoop做到这一点。你只会从它的部分功能中获利——分布式任务调度，而不会从其余部分中获利。

从技术上讲，我建议采用以下方式：a）使每组参数成为单个输入拆分。b) 使每个映射器从输入中读取参数并直接从HDFS（或从分布式缓存中）读取数据。

你会得到什么——在集群上分配我们的负载，重新启动失败的任务。

# android - Android：在 AsynTask 中使用 CustomAdaters 关闭光标的位置

> ID：13085168
> 
> 赞同：0
> 
> 时间：2012-10-26T10:27:33.537
> 
> 标签：android, cursor, android-cursoradapter

我有一个大问题..这是代码：

```
private class ViewDataTableTask extends AsyncTask<Void, Void, String> {
    ...

    protected String doInBackground(Void... params) {

        Cursor listCursor = db.rawQuery("SELECT ..." , null);
        ListView table_body = new ListView(context);

        try{
            table_body.setAdapter(new MyAdapter(context , listCursor));
        }finally{
             if(listCursor != null){
             listCursor.close();
        }
        ...
   }
   ...
} 
```

MyAdapter 是一个`CursorAdapter`使用`getView()`and`newView()`方法的自定义

如果我运行前面的代码，我会收到以下错误：

```
java.lang.IllegalStateException: attempt to re-open 
an already-closed object: android.database.sqlite.SQLiteQuery 
```

似乎 `getView()`和`newView()`方法在 UI 线程上运行！！！！！！

问题很简单：我该放在`cursor.close()`哪里？我不想使用 CursorLoader 和/或 startManagingCursor(..)

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:30:20.937

您确定需要放入异步任务吗？在我看来，您正在更新 UI？

此外，尽量限制光标以获得最佳效果；打开，获取信息，将信息放入新变量，关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:41:29.207

做它`onPostExcute()`。

`doInBackground()`是一个工作线程。

并且`onPreXecute()`运行`onPostExcute()`在`UIThread.`

在您的代码中，您使用的是`context`，因此它在方法中可能不再有效`doInBackground()`。

所以就这样做`onPostExcute()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:48:06.897

只要用户使用您的 listView，获取的`Cursor`实例就会被使用。`CursorAdapter`这就是为什么你不应该这么早关闭光标。每当您的 Activity 实例即将被销毁时，就该关闭该游标了。或者每当您更改光标时（如果您的应用程序就是这种情况） ，请`CursorAdapter`关闭之前使用的光标。

正如其他人所说，将光标重置到`CursorAdapter`UI 线程上（在 中`AsyncTask.onPostExecute()`）。

# objective-c - 从文件中加载 NSTableView 数据的更快方法？

> ID：13085175
> 
> 赞同：-2
> 
> 时间：2012-10-26T10:27:58.810
> 
> 标签：objective-c, cocoa

在我的应用程序中，我正在从文本文件中读取数据并将其显示在 NSTableView 中。我的表格视图中有 6 列。我的问题是当文件中的记录更多时，读取和显示数据需要很长时间。例如，从文件中读取和显示 70,000 条记录大约需要 1 分钟。我正在使用 NSArrayController 来更新我的 NSTableView。请提出一些解决方案以使我的应用程序更快。我是否应该只读取和显示用户可见的那么多数据（例如在 iphone 中，但我不知道它是如何完成 OSX 的？）并更新我的滚动视图？

感谢和问候阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:31:25.570

我强烈建议您使用 CoreData 框架。读取包含 70,000 条记录的整个数组是疯狂的。

从这里开始：[核心数据编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html#//apple_ref/doc/uid/TP40001075)。

# visual-studio - Visual Studio 代码指标误报代码行

> ID：13085178
> 
> 赞同：7
> 
> 时间：2012-10-26T10:28:05.533
> 
> 标签：visual-studio, out, code-metrics, lines-of-code

Visual Studio 中的代码指标分析器，以及代码指标电动工具，`TestMethod`将以下代码的方法中的代码行数报告为 8。

最多，我希望它将代码行报告为 3。

```
[TestClass]
public class UnitTest1
{
    private void Test(out string str)
    {
        str = null;
    }

    [TestMethod]
    public void TestMethod()
    {
        var mock = new Mock<UnitTest1>();

        string str;
        mock.Verify(m => m.Test(out str));
    }
} 
```

谁能解释为什么会这样？

**更多信息**

经过一番挖掘，我发现`out`从 Test 方法中删除参数并更新测试代码会导致 LOC 报告为 2，我认为这是正确的。添加`out`导致跳转，所以不是因为大括号或属性。

用dotPeek反编译DLL会发现由于`out`参数而产生的相当多的额外代码，可以认为是8 LOC，但是删除参数并反编译也会显示生成的代码，可以认为是5 LOC，所以这不仅仅是VS的问题计算编译器生成的代码（我不相信它应该这样做）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:05:54.227

“代码行”（LOC）有几种常见的定义。每个人都试图为我认为几乎毫无意义的指标带来一些意义。例如有效代码行（eLOC）的谷歌。

我认为 VS 将属性作为方法声明的一部分包含在内，并试图通过计算语句甚至大括号来提供 eLOC。一种可能性是 'm => m.Test(out str)' 被视为一个语句。

考虑一下：

```
if (a > 1 &&
    b > 2)
{
   var result;
   result = GetAValue();
   return result;
} 
```

和这个：

```
if (a> 1 && b >2)
   return GetAValue(); 
```

LOC 的一种定义是计算具有任何代码的行数。这甚至可能包括大括号。在如此极端简单的定义中，编码风格的数量差异很大。

eLOC 试图减少或消除代码风格的影响。例如，就像这里的情况一样，一个声明可以算作一个“行”。不解释，只是解释。

考虑一下：

```
int varA = 0;
varA = GetAValue(); 
```

和这个：

```
var varA = GetAValue(); 
```

两条线还是一条？

这一切都归结为意图是什么。如果要测量您需要多高的显示器，则可以使用简单的 LOC。如果目的是测量复杂性，那么计数代码语句可能会更好，例如 eLOC。

如果要测量复杂度，请使用复杂度度量，例如圈复杂度。不要担心 VS 是如何测量 LOC 的，因为我认为无论如何它都是一个无用的指标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T10:56:50.993

使用[NDepend](http://www.ndepend.com/)工具，我们可以得到 2 的 # Lines of Code (LoC) for `TestMethod()`. （*免责声明我是这个工具的开发者之一*）。我写了一篇关于[如何计算代码行数 (LOC) 的文章？](http://codebetter.com/patricksmacchia/2007/10/03/how-do-you-count-your-number-of-lines-of-code-loc/)这阐明了什么是**逻辑**LoC，以及**所有**.NET LoC 计数工具如何依赖**PDB 序列点**技术。

我对 VS 度量提供的 LoC 值 8 的猜测是，它包括由 lambda 表达式生成的方法的 LoC + 它包括与打开/结束大括号相关的 PDB 序列点（NDepend 没有）。编译器还完成了很多操作来执行所谓的[捕获局部变量](http://blogs.msdn.com/b/matt/archive/2008/03/01/understanding-variable-capturing-in-c.aspx) `str`，但这不应该影响从 PDB 序列点推断出的#LoC。

顺便说一句，我写了另外 2 篇相关的 LoC 文章：

*   [为什么计算代码行数 (LOC) 很有用？](http://codebetter.com/patricksmacchia/2007/10/05/why-is-it-useful-to-count-the-number-of-lines-of-code-loc/)
*   [神话人物月：每个开发人员日 10 行](http://codebetter.com/patricksmacchia/2012/01/23/mythical-man-month-10-lines-per-developer-day/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-02T05:21:50.237

我想知道 Visual Studio 行数以及为什么我看到的不是报告的内容。因此，我编写了一个小型 C# 控制台程序来计算纯代码行数并将结果写入 CSV 文件（见下文）。

打开一个新的解决方案，将其复制并粘贴到 Program.cs 文件中，构建可执行文件，然后您就可以开始了。这是一个 .Net 3.5 应用程序。将其复制到代码库的最顶层目录中。打开命令窗口并运行可执行文件。您会收到两个提示，第一个是程序/子系统的名称，另一个是您要分析的任何额外文件类型。然后它将结果写入当前目录中的 CSV 文件。适合您的目的或交给管理层的好简单的事情。

Anyhoo，这里是 FWIW 和 YMMV：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;

namespace CodeMetricsConsole
{
    class Program
    {
        // Concept here is that the program has a list of file extensions to do line counts on; it
        // gets any extra extensions at startup from the user. Then it gets a list of files based on
        // each extension in the current directory and all subdirectories. Then it walks through 
        // each file line by line and will display counts for that file and for that file extension.
        // It writes that information to a CSV file in the current directory. It uses regular expressions
        // on each line of each file to figure out what it's looking at, and how to count it (i.e. is it
        // a line of code, a single or multi line comment, a multi-line string, or a whitespace line).
        // 
        static void Main(string[] args)
        {
            try
            {
                Console.WriteLine(); // spacing

                // prompt user for subsystem or application name
                String userInput_subSystemName;
                Console.Write("Enter the name of this application or subsystem (required): ");
                userInput_subSystemName = Console.ReadLine();

                if (userInput_subSystemName.Length == 0)
                {
                    Console.WriteLine("Application or subsystem name required, exiting.");
                    return;
                }

                Console.WriteLine(); // spacing

                // prompt user for additional types
                String userInput_additionalFileTypes;
                Console.WriteLine("Default extensions are asax, css, cs, js, aspx, ascx, master, txt, jsp, java, php, bas");
                Console.WriteLine("Enter a comma-separated list of additional file extensions (if any) you wish to analyze");
                Console.Write(" --> ");
                userInput_additionalFileTypes = Console.ReadLine();

                // tell user processing is starting
                Console.WriteLine();
                Console.WriteLine("Getting LOC counts...");
                Console.WriteLine();

                // the default file types to analyze - hashset to avoid duplicates if the user supplies extensions
                HashSet allowedExtensions = new HashSet { "asax", "css", "cs", "js", "aspx", "ascx", "master", "txt", "jsp", "java", "php", "bas" };

                // Add user-supplied types to allowedExtensions if any
                String[] additionalFileTypes;
                String[] separator = { "," };
                if (userInput_additionalFileTypes.Length > 0)
                {
                    // split string into array of additional file types
                    additionalFileTypes = userInput_additionalFileTypes.Split(separator, StringSplitOptions.RemoveEmptyEntries);

                    // walk through user-provided file types and append to default file types
                    foreach (String ext in additionalFileTypes)
                    {
                        try
                        {
                            allowedExtensions.Add(ext.Trim()); // remove spaces
                        }
                        catch (Exception e)
                        {
                            Console.WriteLine("Exception: " + e.Message);
                        }
                    }
                }

                // summary file to write to
                String summaryFile = userInput_subSystemName + "_Summary.csv";
                String path = Directory.GetCurrentDirectory();
                String pathAndFile = path + Path.DirectorySeparatorChar + summaryFile;

                // regexes for the different line possibilities
                Regex oneLineComment = new Regex(@"^\s*//"); // match whitespace to two slashes
                Regex startBlockComment = new Regex(@"^\s*/\*.*"); // match whitespace to /*
                Regex whiteSpaceOnly = new Regex(@"^\s*$"); // match whitespace only
                Regex code = new Regex(@"\S*"); // match anything but whitespace
                Regex endBlockComment = new Regex(@".*\*/"); // match anything and */ - only used after block comment detected
                Regex oneLineBlockComment = new Regex(@"^\s*/\*.*\*/.*"); // match whitespace to /* ... */
                Regex multiLineStringStart = new Regex("^[^\"]*@\".*"); // match @" - don't match "@"
                Regex multiLineStringEnd = new Regex("^.*\".*"); // match double quotes - only used after multi line string start detected
                Regex oneLineMLString = new Regex("^.*@\".*\""); // match @"..."
                Regex vbaComment = new Regex(@"^\s*'"); // match whitespace to single quote

                // Uncomment these two lines to test your regex with the function testRegex() below
                //new Program().testRegex(oneLineMLString);
                //return;

                FileStream fs = null;
                String line = null;
                int codeLineCount = 0;
                int commentLineCount = 0;
                int wsLineCount = 0;
                int multiLineStringCount = 0;
                int fileCodeLineCount = 0;
                int fileCommentLineCount = 0;
                int fileWsLineCount = 0;
                int fileMultiLineStringCount = 0;
                Boolean inBlockComment = false;
                Boolean inMultiLineString = false;

                try
                {
                    // write to summary CSV file, overwrite if exists, don't append
                    using (StreamWriter outFile = new StreamWriter(pathAndFile, false))
                    {
                        // outFile header
                        outFile.WriteLine("filename, codeLineCount, commentLineCount, wsLineCount, mlsLineCount");

                        // walk through files with specified extensions
                        foreach (String allowed_extension in allowedExtensions)
                        {
                            String extension = "*." + allowed_extension;

                            // reset accumulating values for extension
                            codeLineCount = 0;
                            commentLineCount = 0;
                            wsLineCount = 0;
                            multiLineStringCount = 0;

                            // Get all files in current directory and subdirectories with specified extension
                            String[] fileList = Directory.GetFiles(Directory.GetCurrentDirectory(), extension, SearchOption.AllDirectories);

                            // walk through all files of this type
                            for (int i = 0; i < fileList.Length; i++)
                            {
                                // reset values for this file
                                fileCodeLineCount = 0;
                                fileCommentLineCount = 0;
                                fileWsLineCount = 0;
                                fileMultiLineStringCount = 0;
                                inBlockComment = false;
                                inMultiLineString = false;

                                try
                                {
                                    // open file
                                    fs = new FileStream(fileList[i], FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
                                    using (TextReader tr = new StreamReader(fs))
                                    {
                                        // walk through lines in file
                                        while ((line = tr.ReadLine()) != null)
                                        {
                                            if (inBlockComment)
                                            {
                                                if (whiteSpaceOnly.IsMatch(line))
                                                {
                                                    fileWsLineCount++;
                                                }
                                                else
                                                {
                                                    fileCommentLineCount++;
                                                }

                                                if (endBlockComment.IsMatch(line)) inBlockComment = false;
                                            }
                                            else if (inMultiLineString)
                                            {
                                                fileMultiLineStringCount++;

                                                if (multiLineStringEnd.IsMatch(line)) inMultiLineString = false;
                                            }
                                            else
                                            {
                                                // not in a block comment or multi-line string
                                                if (oneLineComment.IsMatch(line))
                                                {
                                                    fileCommentLineCount++;
                                                }
                                                else if (oneLineBlockComment.IsMatch(line))
                                                {
                                                    fileCommentLineCount++;
                                                }
                                                else if ((startBlockComment.IsMatch(line)) && (!(oneLineBlockComment.IsMatch(line))))
                                                {
                                                    fileCommentLineCount++;
                                                    inBlockComment = true;
                                                }
                                                else if (whiteSpaceOnly.IsMatch(line))
                                                {
                                                    fileWsLineCount++;
                                                }
                                                else if (oneLineMLString.IsMatch(line))
                                                {
                                                    fileCodeLineCount++;
                                                }
                                                else if ((multiLineStringStart.IsMatch(line)) && (!(oneLineMLString.IsMatch(line))))
                                                {
                                                    fileCodeLineCount++;
                                                    inMultiLineString = true;
                                                }
                                                else if ((vbaComment.IsMatch(line)) && (allowed_extension.Equals("txt") || allowed_extension.Equals("bas"))
                                                {
                                                    fileCommentLineCount++;
                                                }
                                                else
                                                {
                                                    // none of the above, thus it is a code line
                                                    fileCodeLineCount++;
                                                }
                                            }
                                        } // while

                                        outFile.WriteLine(fileList[i] + ", " + fileCodeLineCount + ", " + fileCommentLineCount + ", " + fileWsLineCount + ", " + fileMultiLineStringCount);

                                        fs.Close();
                                        fs = null;

                                    } // using
                                }
                                finally
                                {
                                    if (fs != null) fs.Dispose();
                                }

                                // update accumulating values
                                codeLineCount = codeLineCount + fileCodeLineCount;
                                commentLineCount = commentLineCount + fileCommentLineCount;
                                wsLineCount = wsLineCount + fileWsLineCount;
                                multiLineStringCount = multiLineStringCount + fileMultiLineStringCount;

                            } // for (specific file)

                            outFile.WriteLine("Summary for: " + extension + ", " + codeLineCount + ", " + commentLineCount + ", " + wsLineCount + ", " + multiLineStringCount);

                        } // foreach (all files with specified extension)

                    } // using summary file streamwriter

                    Console.WriteLine("Analysis complete, file is: " + pathAndFile);

                } // try block
                catch (Exception e)
                {
                    Console.WriteLine("Error: " + e.Message);
                }
            }
            catch (Exception e2)
            {
                Console.WriteLine("Error: " + e2.Message);
            }

        } // main

        // local testing function for debugging purposes
        private void testRegex(Regex rx)
        {
            String test = "        asdfasd asdf @\"     adf ++--// /*\" ";

            if (rx.IsMatch(test))
            {
                Console.WriteLine(" -->| " + rx.ToString() + " | matched: " + test);
            }
            else
            {
                Console.WriteLine("No match");
            }
        }

    } // class
} // namespace 
```

以下是它的工作原理：

*   该程序有一组您要分析的文件扩展名。
*   它遍历集合中的每个扩展，在当前和所有子目录中获取该类型的所有文件。
*   它选择每个文件，遍历该文件的每一行，将每一行与正则表达式进行比较以找出它正在查看的内容，并在确定正在查看的内容后增加行数。
*   如果一行不是空格、单行或多行注释或多行字符串，则将其计为一行代码。它报告每种类型的行（代码、注释、空格、多行字符串）的所有计数，并将它们写入 CSV 文件。无需解释为什么 Visual Studio 将某些东西算作一行代码。

是的，三个循环相互嵌入（O(n-cubed) O_O），但它只是一个简单的独立开发工具，我运行它的最大代码库大约是 350K 行，大约需要 10 秒在酷睿 i7 上运行。

**编辑**：刚刚在 Firefox 12 代码库上运行它，大约 430 万行（3.3M 代码，1M 评论），大约 21K 文件，使用 AMD Phenom 处理器 - 花了 7 分钟，在任务管理器中查看性能选项卡，没有压力。供参考。

我的态度是，如果我把它写成输入给编译器的指令的一部分，它就是一行代码，应该被计算在内。

它可以很容易地定制为忽略或计算您想要的任何内容（括号、命名空间、文件顶部的包含等）。只需添加正则表达式，使用正则表达式下方的函数对其进行测试，然后使用该正则表达式更新 if 语句。

# php - mysql搜索查询并显示所有相似用户

> ID：13085181
> 
> 赞同：-3
> 
> 时间：2012-10-26T10:28:20.263
> 
> 标签：php, mysql, search

我对 mysql 搜索查询有一个小问题，我需要制作一个显示所有相似名称的搜索查询 php 脚本，例如：如果在结果中找到 100 个相似名称，则必须显示 100 个结果。

这是我的搜索查询系统脚本。

```
$result = mysql_Query("SELECT user FROM `UserData` WHERE user LIKE '%$username%'") or die(mysql_error());
        $fetch = mysql_num_rows($result);           

        if( $fetch > 0 )
        {                   
            $resultgg = mysql_Query("SELECT user FROM `theusers` WHERE user LIKE '%$username%' ORDER BY `user` ASC LIMIT 500") or die(mysql_error());
            $row = mysql_fetch_row($resultgg);
            $users = $row[0];               
            echo "$users";                  
        }
               }
    else 
    {
            echo "<br><b>Please Enter Valid Username!</b>";
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:10:26.873

```
mysql_fetch_row() 
```

returns only *1* column of the resultset (see PHP docs). You need to iterate through the rows.

[Visit the PHP documentation for mysql_fetch_row](http://www.php.net/manual/en/function.mysql-fetch-row.php)

# jquery - 尝试在ajax jquery中传递参数时出错

> ID：13085183
> 
> 赞同：0
> 
> 时间：2012-10-26T10:28:21.233
> 
> 标签：jquery, ajax

我正在使用 ajax 在我的控制器中调用一个函数，我认为我正确传递了参数但我得到了一个错误。

这是我在 jQuery 中的函数

```
var usuario= $(this).data('usuario');
            var idea= $(this).data('idea');
            // llamada ajax
            $.ajax({
                url: '{{path('votarIdea')}}',
                data: {user: usuario, idea: idea},
                type: 'POST',
                dataType: 'html'
                //success: change(),
                //error: noChange()
            }); 
```

在我的 url 参数中，我试着把这个

```
url: '{{path('votarIdea',{'user': usuario, 'idea': idea} )}}', 
```

在这种情况下，错误是他们没有找到可变的想法。

在控制器中，功能是..

```
public function votarIdeaAction($user, $idea){
$em= $this->getDoctrine()->getEntityManager();
...
} 
```

错误是这样的

```
Controller "Arca\PuenteBundle\Controller\DefaultController::votarIdeaAction()" requires that you provide a value for the "$user" argument (because there is no default value or because there is a non optional argument after this one). (uncaught exception) 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:30:07.567

可能是您拼错了类型，因此无法正确接受您的请求？

```
$.ajax({
    url: '{{path('votarIdea')}}',
    data: {user: usuario, idea: idea},
    type: 'POST', // <--- here
    dataType: 'html'
    //success: change(),
    //error: noChange()
}); 
```

# multithreading - tcriticalsection.create 的访问冲突

> ID：13085188
> 
> 赞同：2
> 
> 时间：2012-10-26T10:28:40.183
> 
> 标签：multithreading, delphi

我正在编写一个多线程聊天服务器应用程序。因此临界区是非常必要的。我刚刚为线程树视图制作了一个包装类。它在客户端中完美运行，但服务器引发了 AV。

有两种形式，FormServer（除了 gui 绘画几乎不做任何处理）和 DataModuleServer，它完成了所有繁重的工作。

首先创建 FormServer。

实际上，线程树视图位于另一个包装类 TRoomTree 中。

**TDataModuleServer.Create**

```
procedure TDataModuleServer.cr(Sender: TObject);
begin
  Rooms := TRoomTree.Create (FormServer.tvRooms); 
```

tvRooms : 可视化树视图

**T RoomTree.创建**

```
constructor TRoomTree.Create (TV : TTreeView);
begin

  if Assigned (TV) then
    fTreeView.Create (TV)
  else
    exit; 
```

fTreeView : 线程树视图；

**TThreadTreeView.Create**

```
constructor TThreadTreeView.Create (TreeView : TTreeView = nil);
begin

  fLock := TCriticalSection.Create;

  if Assigned (TreeView) then
    fTreeView := TreeView
  else
    fTreeView := TTreeView.Create (nil);

end; 
```

fTreeView : 正常的树视图；

现在 TCriticalSection.Create 在 ntdll.dll 中引发 AV 异常。

**调用堆栈**

```
:76cac41f KERNELBASE.RaiseException + 0x58
:0040469c NotifyNonDelphiException + $1C
:77ecb42b ; ntdll.dll
uThreadTreeView.TThreadTreeView.Create($26B4300) 
uRoomTree.TRoomTree.Create($26B4300)
uServer.TDataModuleServer.cr($26A48B0)
Classes.TDataModule.DoCreate
Classes.TDataModule.AfterConstruction
System.@AfterConstruction($26A48B0)
Classes.TDataModule.Create(???)
Forms.TApplication.CreateForm(???,(no value))
PlayburnServer.PlayburnServer
:773833aa kernel32.BaseThreadInitThunk + 0x12
:77ea9ef2 ntdll.RtlInitializeExceptionChain + 0x63
:77ea9ec5 ntdll.RtlInitializeExceptionChain + 0x36 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T11:08:00.793

中`TRoomTree.Create`，这行代码

```
fTreeView.Create(TV); 
```

对您的访问违规负责。那是因为`fTreeView`在您尝试对其调用方法之前尚未初始化。

Delphi 实例是这样创建的：

```
fTreeView := TThreadTreeView.Create(TV); 
```

我不确定您的线程模型，但我相信您知道 VCL 控件只能从 GUI 线程访问。

# objective-c - isEqualToString 总是返回 NO/false

> ID：13085198
> 
> 赞同：1
> 
> 时间：2012-10-26T10:29:58.253
> 
> 标签：objective-c, ios, uiwebview

我有一个 web 视图，我想在其中调用 Obj-C 代码，我这样做就像在[thisTutorial](http://davinccoder.wordpress.com/2011/06/28/call-ios-method-for-html-button-click/comment-page-1/#comment-128)

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
  NSString *absoluteUrl = [request.URL absoluteString];
  NSLog(@"STRING: %@",absoluteUrl);//prints out didTap://button1
  NSString *sayHello = @"didTap://button1";
  if ([sayHello isEqualToString: absoluteUrl]) {
      [self sayHello];
      return NO;
  }
return YES;
} 
```

然而`[self sayHello]`从未被调用。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:33:28.067

看起来有尾随空格或其他白色字符。这将解释不平等。

此外，您或许应该使用以下标准方法`NSURL`：

```
NSString *absoluteURL = [request.URL absoluteString]; 
```

要删除空格，请执行以下操作：

```
absoluteURL = [absoluteURL stringByReplacingOccurrencesOfString:@" " 
                           withString:@""]; 
```

# javascript - dojox图表突出显示效果不起作用

> ID：13085203
> 
> 赞同：1
> 
> 时间：2012-10-26T10:30:11.700
> 
> 标签：javascript, html, dojo, dojox.charting

我使用dojo 1.8 版创建了一个简单的柱形图，我想为每一列的鼠标悬停添加高亮效果。

Dojo 的 dojox 图表 API 提供了一个名为 Highlight 的好类，您应该能够实例化注入图表实例和绘图名称，如下所示...

```
new Highlight(ChartInstance, "plotName"); 
```

这是支持这一点的文档：

[http://dojotoolkit.org/reference-guide/1.8/dojox/charting.html#highlight](http://dojotoolkit.org/reference-guide/1.8/dojox/charting.html#highlight)

[http://dojotoolkit.org/api/1.8/dojox/charting/action2d/Highlight](http://dojotoolkit.org/api/1.8/dojox/charting/action2d/Highlight)

[http://dojotoolkit.org/documentation/tutorials/1.8/charting/](http://dojotoolkit.org/documentation/tutorials/1.8/charting/)

现在我已经遵循了这个语法，但还没有让效果起作用，并且在 firebug 中没有报告任何脚本错误。这是我的测试页面...

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Test chart</title>

        <script>
            var dojoConfig = {
            baseUrl: "./",
            async: true,
            isDebug: true,
            parseOnLoad: true,
            gfxRenderer: "svg, canvas, silverlight",//svg is preferred chart renderer

            //here are the packages dojo will be aware of and related js files
            packages: [
                    //dojo specific packages
                    {name: "dojo", location: "libs/dojo"},
                    {name: "dojox", location: "libs/dojox"}
                ]
            };
    </script>

    </head>
    <body>

        <!-- create the chart div-->
        <div id="chartContent"></div>

        <!-- load dojo and provide config via header script -->
        <script src="libs/dojo/dojo.js"></script>

        <script>
            require(["dojo/parser", "dojo/domReady!"]);

            require([
                "dojox/charting/Chart",
              "dojox/charting/themes/Claro",
                "dojox/charting/plot2d/Columns",
                "dojox/charting/axis2d/Default",
                "dojox/charting/action2d/Highlight",
                "dojo/domReady!"
                ],
                function (Chart, Theme, ChartType, Default, Highlight){

                    chartData = [
                        { x: 1, y: 19021 },
                        { x: 2, y: 12837 },
                        { x: 3, y: 12378 },
                        { x: 4, y: 21882 },
                        { x: 5, y: 17654 },
                        { x: 6, y: 15833 },
                        { x: 7, y: 16122 }
                    ];

                    var chart = new Chart("chartContent", {title: "test bar chart"});

                    chart.setTheme(Theme);

                    chart.addPlot("barPlot", {type:ChartType, interpolate: false, tension: "S", markers: true, hAxis: "x", vAxis: "y"});

                    chart.addAxis("x", {title: "horizontal axis", titleOrientation: "away", min:0});
                    chart.addAxis("y", {title: "vertical axis", vertical: true});

                    chart.addSeries("bar series", chartData, {plot: "barPlot"});

                    new Highlight(chart, "barPlot");

                    chart.render();
                }
            );

        </script>
    </body>
</html> 
```

要运行该页面，您需要调整 dojo 和 dojox 位置以匹配您自己的设置，您还可以通过在配置中交换每个的完整 URL 来指向它们的在线版本。

当您在浏览器中加载它时，您应该会看到一个柱形图，并注意到高亮实例对每一列的鼠标悬停没有影响。

任何想法，也许我在这里错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T14:52:33.657

很久以后，但仍然是我的想法：

**Highlight 不适用于 GRADIENTS 作为填充**。我假设这是因为 Highlight 将检查使用的颜色，如果比 50% 更亮，则使用更亮的颜色...当主题包含渐变时，它返回两个值并中断。

我在使用带有渐变的自定义主题时偶然发现了同样的问题，删除渐变并使用纯色解决了这个问题。

因此，任何带有渐变的主题都不会支持 Highlight。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:49:53.760

好的，我现在已经发现了问题，说实话，这很烦人！

这完全与 Claro 主题有关，我将其更改为其他主题之一，在这种情况下，我使用了 MiamiNice 主题，你相信吗，鼠标悬停现在可以工作了！！！

有兴趣的人的代码片段：

```
require([
    "dojox/charting/Chart",
    "dojox/charting/themes/MiamiNice", <-- here it used to end /Claro 
```

我会把它放在道场社区论坛上。

# debugging - 使用 Jtag 进行 Linux 调试 - [ARM9][AT91SAM9G25] - Amontec、openocd、gdb、eclipse

> ID：13085211
> 
> 赞同：1
> 
> 时间：2012-10-26T10:30:41.090
> 
> 标签：debugging, linux-kernel, u-boot, jtag, openocd

我正在尝试使用此系统启动内核调试：Amontec JTAGkey2、openocd、gdb、eclipse。

最后，我想调试在其中运行的内核和应用程序。我的问题很少，看来我需要依次解决。现在我有 CPU 暂停/恢复、读/写 RAM 缺少什么：步入、步过、C/C++ 级调试。

我执行以下操作： - 连接 JTAG，启动板，通过 Uboot 使用调试消息启动 uImage - 启动 openocd：

```
# openocd -f /usr/share/openocd/scripts/interface/jtagkey2.cfg -f /usr/share/openocd/scripts/board/at91sam9g20-ek.cfg 
```

输出：

```
jtag_nsrst_delay: 200
jtag_ntrst_delay: 200
RCLK - adaptive
     TapName            | Enabled |   IdCode      Expected    IrLen IrCap  IrMask Instr     
---|--------------------|---------|------------|------------|------|------|------|---------
 0 | at91sam9g20.cpu    |    Y    | 0x00000000 | 0x0792603f | 0x04 | 0x01 | 0x0f | 0x0f
Info : max TCK change to: 30000 kHz
Info : RCLK (adaptive clock speed)
Info : JTAG tap: at91sam9g20.cpu tap/device found: 0x0792603f (mfg: 0x01f, part: 0x7926, ver: 0x0)
Info : Embedded ICE version 6 
```

问题从这里开始：

开放式：

```
Warn : acknowledgment received, but no packet pending
undefined debug reason 6 - target needs reset
Warn : target not halted 
```

蚀：

```
symbol-file /opt/Tixi_Repos/KiwiG6v2/buildroot-2011.05/package_tixi/linux-2.6.39/arch/arm/boot/compressed/vmlinux
target remote localhost:3333
start () at arch/arm/boot/compressed/head.S:108
108 kphex r5, 8 /* end of kernel */ 
```

JTAG似乎也试图将代码加载到0x0中，我想这是不正确的：

![在此处输入图像描述](../Images/be200754a73c3cac6983e5c167529779.png)

**更新 1**：

在分析了一些ARM的在线教程后：

Eclipse Reset 和 Halt 命令不能完美运行。最好取消选中它们并写入命令窗口。还可以添加加载地址：

```
monitor halt
load arch/arm/boot/compressed/vmlinux 0x22000000 
```

我不使用

```
monitor reset 
```

我让 Uboot 启动并初始化 RAM 和其他外围设备。然后我通过进入 shell 来停止 Uboot。然后我让eclipse将linux写入RAM，并启动它。这需要很长时间，但效果更好。内核在 RPC 初始化时启动和停止，而不返回控制台。

*   是否可以在 Uboot 控制台中将内核加载到 RAM 中，然后启动 JTAG 会话？
*   [load ...] 和 [monitor load...] 命令有什么区别
*   为什么我需要加载 /compressed/vmlinux 而不是 uImage ？
*   在 Eclipse 窗口中，我有两个加载字段：加载图像我加载符号。我禁用了这两个选项，但只写了 load arch/arm/boot/compressed/vmlinux 0x22000000。这可能是下一个问题的原因吗？

**更新 2**：好的。谢谢你的提示。

我已经取得了一些进展。你能给我一些建议吗，也许我还是做错了什么。

现在我的内核在 JTAG 控制下运行，但我仍然无法在源代码级别进行调试。

我这样做：

1.  给板子加电，进入uboot shell。
2.  开始 openOCD 会话
3.  在内核调用的 bootm.c 中设置 Uboot 断点：

    ```
    cleanup_before_linux ();
    theKernel (0, machid, bd->bi_boot_params); 
    ```

4.  开始 Eclipse 调试会话：

    *   监控暂停
    *   加载没有偏移量的uboot-a

        ```
        load u-boot-2010.06/u-boot 
        Loading section .text, size 0x349ec lma 0x26f00000 
        ```

    *   启动uboot并让它运行

    *   uboot 停止“theKernel”调用

我知道内核位于地址 0x20008000。

5.  重启 openOCD 会话
6.  使用内核配置再次启动 ecipse 调试器：

    *   监控暂停
    *   在地址 0x20008000 上加载内核

        ```
        load arch/arm/boot/compressed/vmlinux 0x20008000
        Loading section .text, size 0x8bdc7c lma 0x20008000 
        ```

    *   启动调试会话

现在一切正常，内核启动，但我仍然无法在源代码级别进行调试。

“符号不可用” ![在此处输入图像描述](../Images/be200754a73c3cac6983e5c167529779.png) DEBUG 和 DEBUG_INFO 为内核打开。

vmlinux 截图

在我看来，这个文件中有大约 50 个函数符号。

![在此处输入图像描述](../Images/4f2a9e22f4eff9c7042b55ee405017d9.png)

# iphone - 将自定义应用程序日志发送给开发人员

> ID：13085214
> 
> 赞同：0
> 
> 时间：2012-10-26T10:30:53.040
> 
> 标签：iphone, ios, logging

我计划在未来发布一个新的应用程序。

我有一个自定义日志记录功能，它将一些应用程序数据（不是崩溃）记录到一个文件中（位置管理器状态、应用程序前景-背景转换、主要操作......）。这些日志帮助我调试与应用程序相关但不会导致崩溃的问题。到目前为止，这些都在文档目录中（在 iTunes 中共享），测试人员在看到一些不正确的行为后将它们发送给我，但是我不想再共享它们，因为这个目录也包含应用程序的数据库。

即使应用程序将在 App Store 上，我也想获得这些日志，但我不知道应该如何完成。正如我所写，它是一个新应用程序，即使在测试阶段之后也可能存在小错误。我知道用户可以在 iTunes 或开发网站上报告问题，但如果没有详细的场景或日志，很难纠正错误。我是否应该制作某种应用内错误报告功能（即使这会造成错误的用户印象）？这通常是如何处理的？

Edit1：只有当用户认为出现问题并且应该进行分析时，我才想要这些日志，否则我真的不需要它们。我认为需要某种用户操作来确认某些东西没有按预期工作，这就是为什么我询问有关制作功能的原因（例如地图应用程序中的“报告问题”）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:58:07.220

如果您的应用程序即将崩溃，请不要将其提交到 AppStore，因为它更有可能被拒绝。

我不知道您的应用程序，但通常记录会减慢速度。但是，如果您真的想要记录，我建议您首先找出应用程序是否崩溃。例如，在您的 appDelegate 中，当应用程序终止时没有问题设置一些 NSUserDefaults 值，例如`closedSuccesfully=YES`. 就在您启动 app set 之后`closedSuccesfully=NO`，但如果它在之前设置为 NO，则意味着您的应用程序上次崩溃了。在这种情况下，您可以获取以前的日志并尝试通过 http post 消息将它们发送到您的服务器。在您的服务器上可能有非常简单的 php 脚本来获取该数据。这样一来，它将是自动化的，您的用户不必做任何事情，即使这些没有报告，您也会得到所有的崩溃。

# c++ - 在 C++ 中减少 Double 的位数

> ID：13085219
> 
> 赞同：3
> 
> 时间：2012-10-26T10:31:03.907
> 
> 标签：c++, function, double, precision, digit

我需要一个函数来降低我的双打精度（位数）。

我需要它来计算，而不是在屏幕上输出。

到目前为止，我所拥有的是：

```
double setDigits(double _number, int _digits)
{
    double tenth = pow((double)10,_digits);
    _number *= tenth;
    _number = floor(_number);
    _number /= tenth;

    return _number;
} 
```

呼叫`setDigits(sqrt(2),3)`给出 1.4139999999999999，而不是我想要的 1.414。

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:42:21.843

> 我能做些什么？

不幸的是，根本问题没有：在您的平台中，1.414 没有精确的双重表示。您无法使用“1.414”运行计算，因为您无法将“1.414”放置*在* `double`.

参见例如[http://www3.ntu.edu.sg/home/ehchua/programming/java/DataRepresentation.html](http://www3.ntu.edu.sg/home/ehchua/programming/java/DataRepresentation.html)。

您*可以*做的是以最大精度保持您的数字，并以降低的精度*显示它。*您需要计算机器精度并在计算过程中跟踪错误。

因此，您将使用 1.413999999999997 并最终得到答案，例如 41.99999137；您将与它一起显示

```
printf("The answer is %.3f\n", theAnswer); 
```

或者您可以更改平台（编译器、数学库或浮点表示，例如`long double`在支持的情况下使用），但请记住，您可以以错误的 1.873 为代价获得 1.414（将其设为 1.87299999999 或 1.87300000001） , 计算会有或多或少相同的误差。

您可以使用整数算术，将初始数字乘以 1,000,000（得到 1414000）或其他合适的比例，然后在最后除。不过，整数有一个最大界限。

还有一些任意精度库使用不同的内部表示，并允许您以您想要的方式指定精度，例如 GMP ( [http://gmplib.org/](http://gmplib.org/) )。当然，使用它比指定更困难

```
op1 = 6.0;
op2 = 7.0;
theAnswer = op1 * op2; 
```

并且处理速度也较慢，但结果很好 - 或者与您告诉他们的一样好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T10:54:27.970

以下行无效。

```
double tenth = pow((double)10,_decimals); //_decimals is not declared
_number = floor(_digits); //should be floor(_number) 
```

修正后的函数是

```
double setDigits(double _number, int _digits)
{
    double tenth = pow((double)10,_digits);
    _number *= tenth;
    _number = floor(_number);
    _number /= tenth;

    return _number;
} 
```

[这是一个演示。](http://www.codetable.org/638329V)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:37:30.187

```
double setDigits(double _number, int _digits)
{
       double tenth = pow((double)10,_digits);
       int result = (_number * tenth) + 0.5; 
       double aux = result / tenth;

       return aux;
} 
```

尝试以下十个 = 1000;

```
result = 1413,9999999999999 * 1000 +0,5
result = 1414,4......
result = 1414 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T08:36:11.583

我不知道你可能不会检查这个答案，但其他人我是 C++ 新手，但我找到了一种方法来做到这一点

```
double Point::norm() 
```

{

```
return (double)floor((sqrt(pow(px,2)+pow(py,2)+pow(pz,2))*1000))*0.001; 
```

}

我用这个，但你可以编写自己的数学课来为你做这个

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T10:32:17.193

尝试这个：

```
double setDigits(double _number, int _digits)
{
    double tenth = pow((double)10,_digits);
    return floor(_number * tenth + 0.5)/tenth;
}

std::cout<<setDigits(sqrt(2),3); 
```

`Output: 1.414`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-26T10:56:20.987

您可以创建一个在内部管理数据的中间类`int`，但输入和输出为`double`：

```
class TruncatedDouble
{
private:
  int value_;

public:
  TruncatedDouble(double d) : value_((int)(double * 1000)) {}
  void SetValue(double d) {value_ = (int)(double * 1000);}
  double GetValue() {return (double)value_ / 1000;}
}; 
```

你也必须重载所有常用的运算符，但这很容易。例子：

```
TruncatedDouble& operator+=(const TruncatedDouble& rh) {value_ += rh.value_;} 
```

等等。这个类实际上会非常快，因为您使用`int`而不是操作`double`，并且您永远不会失去精度。

# java - 整数乘法的递归定义

> ID：13085221
> 
> 赞同：1
> 
> 时间：2012-10-26T10:31:09.290
> 
> 标签：java, function, recursion

这是乘以`a`和的函数`b`：

```
0    int mult(int a, int b){
1      if(a==0){
2        return 0;
3      } else{
4        a=a-1;
5        int c = mult(a,b);
6        int d = b + c;
7        return d;
8      }
9    } 
```

我在玩参数`2`和`3`：结果是`6`，但为什么呢？

在第 5 行中，我将`0`在第二个之后得到`a=a-1;`，然后`d`是`3`then`return 3`而不是`6`。我是愚蠢的还是它也让你感到困惑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T10:35:01.607

你对递归感到困惑。

```
mult(2, 3):
  calls mult(1, 3)
    mult(1, 3):
      calls mult(0, 3)
        mult(0, 3):
          returns 0
      d = 3 + 0
      returns 3
  d = 3 + 3
  returns 6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T10:36:18.530

**让我们一步一步来 [ mult(2, 3) ]: -**

```
 1\. (a = 2, b = 3) : - 
     a = 1;
     c = mult(1, 3); ---->    2\. (a = 1, b = 3) : - 
                                  a = 0;
                                  c = mult(0, 3); -----> 3\. (a = 0, b == 3) : -
                                                             return 0
---------------------------------------------------------------------------------
                                  c = 0;
                                  d = (b + c) = 3;
                                  return 3; 
------------------------------------------------------------------
     c = 3;
     d = b + c == 3 + 3 = 6

     return 6; 
```

**注意**： -

递归调用的状态存储在堆栈中。因此，当达到基本条件时，堆栈开始展开，将当前调用的结果传递给前一个调用，从而达到以最终结果开始的状态。

# java - 将 getByte() 与原始数据一起使用

> ID：13085226
> 
> 赞同：1
> 
> 时间：2012-10-26T10:31:30.607
> 
> 标签：java, methods, boolean, int, primitive-types

在 JAVA 中，对于 Ints、Booleans 和所有原始数据类型（我相信），方法***getByte()是未定义的。***

*   有没有办法让我的 Boolean 和/或 Int 变量与该方法一起使用。
*   或者你推荐什么数据类型我也改变了变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:32:55.270

您可以使用[ByteBuffer 将原](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)语转换为`byte[]`，反之亦然

例子

```
public static byte[] toByteArray(int value) {
    ByteBuffer bb = ByteBuffer.allocate(4).order(ByteOrder.nativeOrder());
    return bb.putInt(value).array();
}

public static int toInteger(byte[] bytes) {
    ByteBuffer bb = ByteBuffer.wrap(bytes).order(ByteOrder.nativeOrder());
    return bb.getInt();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:37:12.367

如果要写入二进制流，通常只需要单个字节。如果这是它的用途，我建议您使用`DataOutputStream`将 network/big-endian 写入 OutputStream，或者`ByteBuffer`如果您需要 little-endian，或者您正在写入 NIO 或 NIO2。

如果您需要执行按位操作，例如获取低 8 位，您可以使用掩码 with`&`或组合 with`>>>`来获取其他位。使用哪些操作取决于您需要它做什么。

# typescript - TypeScript 节点示例无法编译

> ID：13085229
> 
> 赞同：2
> 
> 时间：2012-10-26T10:31:45.810
> 
> 标签：typescript, tsc

似乎每个人都有样本可以工作，但我的只是不会......

我在 Windows 7 64 位中安装了 nodejs 0.8.2。做了一个`npm install -g typescript`以获得 TypeScript 支持。然后我从 TypeScript 下载了源代码并尝试了示例，但我无法编译节点示例。它返回错误消息：

```
c:\..\..\typescript\bin\tsc.js:21182
           if(_fs.existsSync(path)) {
                  ^
TypeError: Object #(Object) has no method 'existsSync'
...
... 
```

有没有其他人看到这个问题？

环顾了几个小时，没有找到任何东西。

说我有这个代码：

```
///<reference path="node.d.ts"/>

import http = module("http");

var server = http.createServer(function (req, res)
{
    res.writeHead(200, { 'ContenType': 'text/plain' });
    res.end('Hello World');
});

server.listen(1337); 
```

在 Visual 2012 express for web 中输入此内容，没有显示错误。参考已经到位，智能感知工作正常。但是当我使用带有 node 的命令行工具来编译这个文件时，它会弹出进一步显示的错误。我没有在我自己的代码中包含 _fs.existsSync。

好的...在玩弄了 tsc.js 和 nodejs 之后...我意识到从 node 引擎中的 require('fs') 创建的 _fs 对象根本没有一个名为 existsSync 的函数...

在搜索了更多之后......显然这个函数现在在路径模块下......我将尝试编辑 tsc.js 以使用路径模块的 existsSync 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:04:12.700

好的...将 tsc.js 更改为使用 _path.existsSync 似乎可以工作。但经过一番折腾，我发现我系统上的节点版本仍然是 v0.6.2。即使我之前尝试安装从该站点下载的 v0.8.12。删除 v0.6.2 并安装 v0.8.14 后，现在 fs 模块包含目标函数。

不知道为什么这个系统上的node版本卡在0.6.2~''~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:08:01.493

我认为问题是因为您的代码中有拼写错误。尝试使用`fs.existsSync(path)`. 您正在尝试将方法分配给不存在的对象。

```
fs.existsSync('path/to/file'); 
```

或者 `fs.exists()`与上述同义词，只有在连接成功时才使用回调。

```
fs.exists('/path/to/file', function (exists) {
  util.debug(exists ? "it's there" : "no passwd!");
}); 
```

[http://nodejs.org/api/fs.html#fs_fs_exists_path_callback](http://nodejs.org/api/fs.html#fs_fs_exists_path_callback)

# xml - xslt 以正确的顺序配置子节点的问题

> ID：13085230
> 
> 赞同：1
> 
> 时间：2012-10-26T10:31:51.130
> 
> 标签：xml, xslt, xml-parsing, transform, transformation

通过转换我的xml，我遇到了一些问题。我想以正确的顺序蜂巢出子节点。

## 当前嵌套元素（ / 节点）

```
<span style="font-family: [Ohne];">
   <span style="font-family: qwe;">etu</span>
   <!-- hive off this nested child-node above the parent -->
   restia volorsin  
</span> 
```

## 元素（/节点）的预期嵌套和顺序

```
<!-- after xslt -->
<span style="font-family: [Ohne];">restia volorsin</span>
<span style="font-family: qwe;">etu</span> 
```

查看更多[示例代码](http://pastebin.com/3gRaGuKQ)

谁能给我一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:05:19.030

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="span[span]">
  <xsl:copy>
       <xsl:copy-of select="@*|node()[not(self::span)]"/>
  </xsl:copy>
  <xsl:copy-of select="span"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<span style="font-family: [Ohne];">
   <span style="font-family: qwe;">etu</span>
   <!-- hive off this nested child-node above the parent -->
   restia volorsin
</span> 
```

**产生了想要的正确结果**：

```
<span style="font-family: [Ohne];"><!-- hive off this nested child-node above the parent -->
   restia volorsin
</span>
<span style="font-family: qwe;">etu</span> 
```

# php - 使用 xml 创建配置文件

> ID：13085234
> 
> 赞同：1
> 
> 时间：2012-10-26T10:32:04.787
> 
> 标签：php, html, xml

我想创建个人资料，我尝试过这种方式，但没有奏效..

`forum.php`

```
<?php

session_start();

if(!file_exists('users/' . $username . '.xml')){

    header('Location: index.php');

    die;

}

?> 
```

`header.php`

```
<?php

  $xmlFile = new DOMDocument();
  $xmlFile->load('users/'. $username .'.xml');

    echo $xmlFile->getElementsByTagName('name')->item(0)->nodeValue;

?> 
```

`user.xml`

```
<?xml version="1.0"?>

<user>

<name>yotam</name>

<lastname>dahan</lastname>

<password>73e872fc06e6de8562d1d040268dafc9</password>

<birthday>13.7.1999</birthday>

<country>Israel</country>

<gender>Male</gender>

<age>13</age>

<email>yotking789@walla.com</email>

<level>Admin</level>

</user> 
```

我知道 `$xmlFile->load('users/'. $username .'.xml');` 这里的问题，但我不能制作特定的文件，因为我每次都有不同的成员，我不能创建每一页。

在 xml 文件加载中获取 $username 定义的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:36:10.113

您的代码可以正常工作，但这里的目的是什么？如果您希望存储用户详细信息，则应使用 MySQL 等数据库，然后使用该数据库而不是 XML 来查找此数据。

如果您遇到错误，那么您是否将 PHP 设置为显示错误？这可能会让你知道发生了什么。

# ruby - 方法调用中的Ruby变量替换

> ID：13085236
> 
> 赞同：2
> 
> 时间：2012-10-26T10:32:12.837
> 
> 标签：ruby, arrays, mongodb, variable-substitution

红宝石菜鸟在这里。对于我遇到的小问题的任何帮助将不胜感激。我正在尝试将数组放入格式化为数组的连接字符串参数中。

我的数组如下：

```
hosts = ["192.168.0.2:27017","192.168.0.3:27017"] 
```

我需要将数组分开并像数组一样构造它，以便我可以一次将所有连接替换到调用中。主机的数量可能会有所不同，因此为什么它在一个阵列中。

```
hosts_mapped = hosts.map { |i| "'" + i.to_s + "'" }.join(",") 
```

给我 "192.168.0.2:27017","192.168.0.3:27017" 作为我认为的字符串...或者这可能已将其映射回数组，因为我在尝试启动后遇到如下错误一个连接。

```
@conn = Mongo::ReplSetConnection.new([hosts_mapped], :refresh_mode => :sync, :refresh_interval => 10)

Exception `Mongo::ConnectionFailure' at gems/mongo-1.7.0/lib/mongo/util/pool_manager.rb:282 - Cannot connect to a replica set using seeds '192.168.0.2:27017
Mongo::ConnectionFailure: Cannot connect to a replica set using seeds '192.168.0.2:27017 
```

如您所见，它似乎只引用了第一个条目。我需要将此数组保存在配置文件中，因此这就是它不直接进入上面的连接字符串的原因。对我来说，似乎我已将 hosts_mapped 映射回一个数组，但如果我将 hosts_mapped 放入，我会以正确的格式获得字符串。

`"192.168.0.2:27017","192.168.0.3:27017"`

工作连接字符串如下所示：

```
@conn = Mongo::ReplSetConnection.new(["192.168.0.2:27017","192.168.0.3:27017"], :refresh_mode => :sync, :refresh_interval => 10) 
```

有谁知道我在这里哪里出错了？

完整的测试代码：

```
#!/usr/bin/ruby -d 
require "mongo" 
hosts = ["192.168.0.2:27017","192.168.0.3:27017"] 
hosts_mapped = hosts.map {|i| "'" + i.to_s + "'" }.join(",") @conn =
Mongo::ReplSetConnection.new([hosts_mapped], :refresh_mode => :sync,:refresh_interval => 10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:41:39.500

你已经有一个数组`hosts = ["192.168.0.2:27017","192.168.0.3:27017"]`

如果`@conn = Mongo::ReplSetConnection.new(["192.168.0.2:27017","192.168.0.3:27017"], :refresh_mode => :sync, :refresh_interval => 10)`有效，您需要做的就是

```
@conn = Mongo::ReplSetConnection.new(hosts, :refresh_mode => :sync, :refresh_interval => 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:41:24.103

根据文档[`Mongo::ReplSetConnection.new`](http://api.mongodb.org/ruby/current/Mongo/ReplSetConnection.html#initialize-instance_method)可以带一个数组：

```
Mongo::ReplSetConnection.new(['localhost:30000', 'localhost:30001']) 
```

由于您已经有一个数组，您可以将其作为第一个参数传递：

```
hosts = ["192.168.0.2:27017","192.168.0.3:27017"]
Mongo::ReplSetConnection.new(hosts) 
```

# c# - 如何以编程方式更改 web.config 中的 system.webServer/defaultDocument

> ID：13085238
> 
> 赞同：0
> 
> 时间：2012-10-26T10:32:13.340
> 
> 标签：c#, asp.net, .net, asp.net-4.0

我正在尝试访问`system.webServer/defaultDocument`我的 web.config 文件，但似乎无法找到方法。我尝试了各种有关编辑 Web 配置文件的文章，但我似乎没有相同的选项来访问其中的项目，`system.webServer`就像我在更改 connectionString 时那样。

我可以使用以下方法加载 system.webServer 部分：

```
ConfigurationSection WebServerSection = (ConfigurationSection)WebConfigurationManager.GetSection("system.webServer"); 
```

但从那时起看不到任何可用的东西。我注意到的一件事是该`system.webServer`部分的类型是`System.Configuration.IgnoreSection`. 这会以某种方式阻止我编辑它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:29:33.973

看看[Microsoft.Web.Administration API](http://msdn.microsoft.com/en-us/library/microsoft.web.administration%28v=vs.90%29.aspx)，它提供了一个[WebConfigurationManager 类](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.webconfigurationmanager%28v=vs.90%29.aspx)，应该允许您访问 webServer 部分的内容：

```
WebConfigurationManager.GetSection(HttpContext.Current,
  "system.webServer/defaultDocument"); 
```

# android - InApp Purchase 内容在多个移动平台（iOS 和 Android）上的兼容性。

> ID：13085242
> 
> 赞同：3
> 
> 时间：2012-10-26T10:32:24.820
> 
> 标签：android, ios, cross-platform, compatibility

我在两个平台上都开发了一个应用程序，多个用户在同时使用应用程序时可以在线看到对方。

使用 iPhone 的用户 A 可以在同一应用程序中看到使用 android 的用户 B。

现在我想再增加一项根据特定场合互相赠送礼物的功能。

那么，是否可以通过 iPhone 应用程序的应用内购买过程购买数字内容（例如笑脸图标、卡片等），然后将其赠送给实际使用 Android 版本应用程序的用户 B？

反之亦然，用户 B (android) 购买数字内容并将其发送给用户 A(iPhone)。

注意：我知道在同一平台上进行应用内购买是没有问题的，这意味着如果所有用户都使用 iPhone 或 Android 则没有问题。但就我而言，我有两个不同的平台。

任何想法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T12:12:08.160

基本上，不，您不能在 iOS 和 Android 之间交叉购买商品。然而，另一种方法是您实现在 Android/iOS 商店中购买“积分”的可能性。然后实施并托管您自己的 DRM 服务，您的用户可以在其中使用/赠送积分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T10:41:54.190

谈到 iOS In App 购买并遵循[App Store 指南](https://developer.apple.com/app-store/review/guidelines/#purchasing-currencies)：

> 使用应用内购买 API (IAP) 以外的系统购买应用中的内容、功能或服务的应用将被拒绝

这意味着您不能在 android 上购买东西，而不能在 iOS 上解锁东西

> 使用 IAP 购买实体商品或在应用程序之外使用的商品和服务的应用程序将被拒绝

这意味着你不能在 iOS 中购买东西并在 Android 上使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T12:07:48.333

一种简单的解决方案是跟踪您的服务器上购买的东西，并由 Android 和 iOS 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T06:54:37.037

Teovald 是对的，我必须使用 iOS 和 Android 上可用的约会应用程序进行测试，我通过 iTunes 购买了一个月的订阅，然后我的一个月订阅也可以在 Android 应用上使用。

感谢您对此的所有意见。

问候安东尼奥

# iphone - 从 iphone 中的服务器加载大量图像的最佳方法

> ID：13085243
> 
> 赞同：0
> 
> 时间：2012-10-26T10:32:37.723
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，它的一个功能类似于 twitter，所以我有一个带有每个“tweet”的表格，我也显示用户的图片，我不知道加载大量图片的最佳方式是什么. 图片来自服务器作为 url。

我的应用程序的结构是：

1-我打电话给服务器，我得到了响应

2-我解析响应并迭代它创建对象

3-我在tableview的商店中加载这些对象

4-我重新加载表格

我认为一种方法是在创建对象时加载图像并分配给对象的属性。我的意思是，例如，每次创建对象类型“tweet”时，我都会创建使用 nsdata 调用 url 的图像...

我不知道该解决方案是否正确或可以更好。谁能帮我一把？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:38:14.317

看看[SDWebImage API](https://github.com/rs/SDWebImage)。它会自动为您完成大部分工作。

# jquery - 如何处理由jquery动态生成的下拉菜单上的onchange事件

> ID：13085245
> 
> 赞同：1
> 
> 时间：2012-10-26T10:32:50.697
> 
> 标签：jquery, dynamic, drop-down-menu

我正在尝试根据**txtCols**在其**onkeyup**函数上指定的 int 值创建下拉列表，如下所示：

```
$("#txtCols").keyup(function(){ 
    var $count = $(this).val();

    $("#holder").html('');

    // define matrix header options available
    var matrixHeaders = {
        'TB': 'Text Box',
        'DD': 'Drop Down',
        'CL': 'Calendar'
    }

    for ($i=0;$i<$count;$i++) 
    { 

        var s = $('<select id="header'+$i+'"/>');
        for(var val in matrixHeaders) {
            $('<option />', {value: val, text: matrixHeaders[val]}).appendTo(s);
        }
        s.appendTo('#holder');
    } 

}); 
```

下拉菜单是使用**id='header+i' [increment variable]** 生成的.

我的代码是这样的：

```
$(function(j) {
   $('#header' + j).change(function() {
      alert('Got Value');
   });
}(j)); 
```

也试过：

```
$(document).on('change', '#header' + j, function() {        
  alert('hii');
}(j)); 
```

但是这个事件不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:33:52.650

使用 on 函数让处理程序调用动态添加的元素：

```
$(document).on('change', '#header' + j, function() { 
```

或者，对于任何`j`：

```
$(document).on('change', '[id^="header"]', function() { 
```

但我宁愿使用一个类而不是一个匹配 id 开头的选择器：

```
$(document).on('change', '.header', function() {
...
var s = $('<select class=header id="header'+$i+'"/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:49:33.587

尝试这个：

首先将类添加到您的选择中，例如： select id="header'+$i+'" class="header"/

下一个添加处理程序：

```
$(".header").live("change", function () {
    var id = $(this).attr("id").split("header").join(""); //get i
    var opt = $("#header" + id + " option:selected").val(); //or whatever you need
    switch (opt) {
      case ..
    }
}); 
```

# wordpress - 在WordPress插件中确定页面类型的正确方法是什么

> ID：13085247
> 
> 赞同：0
> 
> 时间：2012-10-26T10:32:56.267
> 
> 标签：wordpress

我正在写一个 wordpress 插件，只有当它是一个时它才会生效`Page`，但不是`Blog`

例如

```
public function init() {

  if (is_page())
     // do something..
} 
```

它不起作用，因为`is_page`仅在`wp_query`运行后可用 [1]

那么检查当前页面类型是否为`Page`或的建议方法是`Blog`什么？

[1] [http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/query.php#L0](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/query.php#L0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:02:02.373

如果您具有以下 3 个值中的任何一个，则可以在 wp_query 之外使用 is_page()：- 页面 ID、页面标题或 slug。

如果您想在页面加载时检查这一点，您可以获取永久链接的 id 或 slug 并使用 is_page 对其进行测试。

# php - 此 php 代码中的换行符在哪里？

> ID：13085251
> 
> 赞同：0
> 
> 时间：2012-10-26T10:33:25.160
> 
> 标签：php, dreamweaver, line-breaks

这可能是非常基本的，但有人可以告诉我这个 php 脚本中的换行符在哪里吗？我被告知“删除字段标签之间的换行符”。谢谢！

```
<td class='<?php echo wpsc_checkout_form_element_id(); ?>'>
 <label for='<?php echo wpsc_checkout_form_element_id(); ?>'><?php echo wpsc_checkout_form_name();?></label> 
```

# bash - 使用变量在bash中编写for循环

> ID：13085253
> 
> 赞同：2
> 
> 时间：2012-10-26T10:33:25.817
> 
> 标签：bash

我想在 bash 中创建一个 for 循环，该循环从 1 运行到存储在`bash`. [我已经尝试按照这个](https://stackoverflow.com/questions/9778741/writing-a-bash-for-loop-with-a-variable-top-end)问题的答案来做，但它会产生这个错误：

```
Syntax error: Bad for loop variable 
```

我的操作系统是 Ubuntu 12.04，代码如下所示：

```
#!/bin/bash
TOP=10
for ((i=1; i<=$TOP; i++))
do
    echo $i
done 
```

这个错误信息是什么意思？这是一个输出图像：

![在此处输入图像描述](../Images/1a853912588cd169484d06c554350754.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T11:14:29.390

C 风格的 for 循环仅适用于少数 shell，而 bash 就是其中之一。这是语法不是 POSIX 标准的一部分。

```
#!/bin/bash
TOP=10
for ((i=1; i<=$TOP; i++))
do
    echo $i
done 
```

符合 POSIX 的 for 循环如下

```
#!/bin/bash
TOP=10
for i in $(seq 1 $TOP)
do
    echo $i
done 
```

这在 bash 和 sh 中都有效。

要知道您登录的是哪个shell，请执行以下命令

```
ps -p $$ 
```

其中 $$ 是当前进程的 PID，当前进程是您的 shell，`ps -p`并将打印有关此进程的信息。

要更改您的登录外壳，请使用`chsh`命令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T10:53:06.530

您正在运行脚本`sh`，而不是`bash`。尝试：

```
bash split_history_file_test.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:36:00.027

此代码不会产生该错误。该 ubuntu 版本附带的 bash 版本应该可以毫无问题地执行它。

注意：您想要`echo $i`.

# c# - 在 C# 中注册多个全局热键

> ID：13085259
> 
> 赞同：0
> 
> 时间：2012-10-26T10:33:56.517
> 
> 标签：c#, winapi, registerhotkey

> **可能重复：**
> [使用 RegisterHotKey 注册多个热键](https://stackoverflow.com/questions/4704134/register-more-than-one-hotkey-with-registerhotkey)

对不起，但我真的用谷歌搜索了很长时间，我没有得到任何清晰的代码！

我想知道如何使用以下方法在 C# 中注册全局热键：

```
Win32.RegisterHotKey(hWndSource.Handle, add, 
                     Win32.MOD_CONTROL | Win32.MOD_SHIFT, Win32.VK_KEY_D); 
```

最重要的是如何捕获多个热键。

可以说我想要`Ctrl`+`E`击键来做一些与`Ctrl`+`R`应该做的不同的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:38:19.133

查看我相当老但（我相信）仍在使用键盘挂钩的解决方案，允许您创建挂钩、分配键盘快捷键并将其捕获为标准 .NET 事件：

```
hook = new KeyboardHook();
hook.AddFilter(Keys.E, true /* Ctrl */, false /* Alt */, false /* Shift */);
hook.KeyPressed +=new KeyboardHookEventHandler(hook_KeyPressed);
hook.Install(); 
```

（三个布尔参数的使用远非优雅，我今天会用一个标志枚举来做到这一点。我很抱歉）

来源在这里：[http ://weblogs.asp.net/avnerk/archive/2005/10/06/by-hook-or-by-crook.aspx](http://weblogs.asp.net/avnerk/archive/2005/10/06/by-hook-or-by-crook.aspx)

# java - 如何颠倒这个链表实现的顺序？

> ID：13085260
> 
> 赞同：0
> 
> 时间：2012-10-26T10:33:55.773
> 
> 标签：java, linked-list

我有一个名为 LinkStrand 的类，它的功能与链接列表非常相似。它有, `toString()`, `size()`, `append()`, `next()`and `value()`，但**不是**`previous()`方法。我正在尝试编写反转节点顺序的代码，以及每个节点内的字符串。为了使自己在必须编写的其他一些方法中更轻松，我摆脱了构建节点时的下一个节点要求。下面是 Node 类的样子：

```
private class Node {
    public Node myNext;
    public String myData;

    Node(String value) {
        myData = value;
        //myNext = next;
    }   
} 
```

我的 .reverse() 方法当前单独反转节点内的所有字符串，但不反转节点本身的顺序。复制如下：

```
public IDnaStrand reverse() {
    if (this == null)
        return this;
    Node prevStrand = null;
    Node thisStrand = myHead;
    String revString;
    LinkStrand val = new LinkStrand();
    while (thisStrand != null){
        Node hold = thisStrand.myNext;
        if (revSave.containsKey(thisStrand.myData)){
            revString = revSave.get(thisStrand.myData);
            val.append(revString);
            //System.out.println("Val is: " + val);
        }
        else{
            revString = reverseStr(thisStrand.myData);
            val.append(revString);
            //System.out.println("Val is: " + val);
            revSave.put(thisStrand.myData, revString);
        }
        thisStrand.myData = revString;
        thisStrand.myNext = prevStrand;
        prevStrand = thisStrand;
        thisStrand = hold;
    }
    return val;
} 
```

我一直在尝试想出某种方法来反转节点顺序，但我正在画一个空白。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:42:29.727

如果允许修改`IDnaStrand`and `LinkStrand`，添加一个方法`prepend(Node n)`。然后，当您遍历列表时，只需预先添加每个节点。

如果您无法修改您的类，请将s 以**相反**的顺序 ( , , ...)保存`Node`到数组中，然后按顺序创建一个新的遍历数组。或者，您可以按顺序加载数组，然后以**相反**的顺序创建。**`nodeArray[size-1]``nodeArray[size-2]``LinkStrand``LinkStrand`**

 ****例子：

```
thisStrand = myHead;
int size = 0;
while(thisStrand != null){
    thisStrand = thisStrand.myNext;
    size++;
}
Node[] nodeArray = new Node[size];
thisStrand = myHead;
for(int i = size-1, i < 0; i--) {
    nodeArray[i] = thisStrand;
} 
```

现在您有了数组，只需将其加载到新列表中！当然添加一个前置方法会更好，只要让类做

```
newElement.myNext = MyHead;
MyHead = newElement; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:40:23.350

通过原始实例循环创建一个新实例，并在位置 0 处插入新实例，然后将其返回。

其他方法是对其进行排序，但在您的问题中看不到任何表明它当前已排序的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:47:21.680

假设您的列表如下所示：

```
A -> B -> C -> D -> E 
```

我会缩短符号，因为我要写很多：

```
A B C D E 
```

让我们取 3 个变量。我会展示他们的整个列表，这样你就可以看到发生了什么。第一项始终是存储在其中一个变量中的节点

```
list: null
curr: A B C D E
next: B C D E 
```

将 A 的 next-pointer 设置为`list`(null) 的值。现在是列表的末尾。

```
list: null
curr: A
next: B C D E 
```

现在，转到下一个：

```
list: A
curr: B C D E
next: C D E 
```

你可以看到会发生什么。继续我们开始：将下一个指针设置`curr`为`list`：

```
list: B A
curr: B A
next: C D E 
```

进步：

```
list: B A
curr: C D E
next: D E 
```

再次：

```
list: C B A
curr: C B A
next: D E 
```

等等...

伪代码相当简单：

```
list = null
curr = original_list

while next != null
    next = curr->next
    curr->next = list
    list = curr
    curr = next
end 
```

所有这一切实际上是从列表的头部获取每个节点，并使其成为另一个列表的头部。这具有颠倒顺序的效果。我的回答可能有点啰嗦，但这就是你所做的一切。****

# .htaccess - 棘手：重新映射 url，但在内部保持相同的 url

> ID：13085265
> 
> 赞同：0
> 
> 时间：2012-10-26T10:34:25.837
> 
> 标签：.htaccess, mod-rewrite

需要你的帮助。只是在这个 htaccess 问题上花费了很多，但仍然不知道如何管理它。

我公司网站上有许多[http://www.example.com/menu-alias/foo](http://www.example.com/menu-alias/foo)链接，这些链接应该重定向到[http://www.example.com/foo](http://www.example.com/foo)。

仅此一项不应该是困难的部分，但请听……棘手的部分如下。

如果没有“菜单别名”，我无法让网站（Joomla 1.5）工作，这意味着所有[http://www.example.com/foo](http://www.example.com/foo)都应该在内部映射到[http://www.example.com /菜单别名/foo](http://www.example.com/menu-alias/foo)。这样用户的浏览器地址栏中仍然有[http://www.example.com/foo](http://www.example.com/foo)。

为了让它更复杂，我必须 301 将旧的 menu-alias/foo 链接重定向到 /foo。

一些htaccess大师可以帮助我吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:44:19.407

您可以尝试在文档根目录（或 vhost 配置）的 htaccess 文件中添加这些规则：

```
RewriteEngine On

# externally redirect requests that have "menu-alias"
RewriteCond %{THE_REQUEST} /menu-alias/([^\ \?]+)
RewriteRule ^ /%1 [L,R=301]

# internally rewrite requests back to menu-alias
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/menu-alias/
RewriteRule ^/?(.*)$ /menu-alias/$1 [L] 
```

几个潜在的问题：

1.  Joomla 可能正在寻找原始的未重写请求`$_SERVER`，如果是这样，重写将不起作用。
2.  将`/menu-alias/`后面添加到 URI 的规则会盲目地重写所有不指向现有资源的请求。这意味着 Joomla 可能处理的“虚拟”路径将在前面附加一个“菜单别名”。

# jquery - JQuery Validator Plugin - 在按钮单击时添加规则

> ID：13085267
> 
> 赞同：0
> 
> 时间：2012-10-26T10:34:31.510
> 
> 标签：jquery, jquery-validate

我有这样的场景：

在一个页面上有两个文本框（FromDate 和 ToDate）显示 JQuery DatePicker onkeydown，在这些文本框下方我有一个提交按钮。

加载页面后，我不希望根据规则验证这些日期文本框，但我想确保 JQuery Validator 在按钮单击时为我工作。

我必须在页面加载时触发验证以确保触发其他规则，就像页面上存在的许多其他控件在页面加载后进行验证一样。

我想在单击按钮时添加规则的一种方法，但似乎验证器加载它们并更早地挂钩它们，所以即使更新了相同的对象（使用附加规则），它也不起作用。

请帮忙怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:56:55.560

为了处理这种情况，我从页面加载规则中删除了基于事件的规则。我动态添加/删除了规则。下面的代码示例：

```
var Date1= {
        required: true,
        dateLesser: 'Date2',
        messages: {
            required: 'What ever',
            dateLesserThan: 'Date Should be less than'
        }
    };

addDateValidationRules: function (d) {
    if (d== 2) {
        $('#Date1').rules("add", Date1);
        $('#Date2').rules("add", Date2);
    }
    else {
        $('#Date1').rules("remove", "required");
        $('#Date1').rules("remove", "dateLesser");
        $('#Date2').rules("remove", "required");
        $('#Date2').rules("remove", "dateGreater");
    }
} 
```

希望它可以帮助某人。

谢谢。

# gradle - gradle：找不到方法 apply<>

> ID：13085268
> 
> 赞同：0
> 
> 时间：2012-10-26T10:34:32.810
> 
> 标签：gradle

我正在尝试使用 gradle 创建一个构建脚本来构建一个 android 项目并使用来自 eclipse 和 android 的插件，但它似乎不起作用并且在我运行时失败并出现以下错误`gradle eclipse`：

```
* What went wrong:
A problem occurred evaluating root project 'RssUnified'.
Cause: Could not find method apply() for arguments [{plugin=eclipse}] on root project 'RssUnified'. 
```

这是我的构建脚本：

```
//apply eclipse plugin
apply plugin: 'eclipse'

//apply android plugin
apply plugin: 'android'

task hello << {
    String value = 'wagwan'

    println 'Hello world!' + value.toUpperCase()
}

//setup external dependancy plugins we will use to build a android application
repositories {
    mavenCentral()
}

dependencies {
    classpath 'org.gradle.api.plugins:gradle-android-plugin:1.2.1'
} 
```

Gradle 异常抛出如下：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/gradle/BootstrapMain
Caused by: java.lang.ClassNotFoundException: org.gradle.BootstrapMain
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: org.gradle.BootstrapMain.  Program will exit. 
```

我从这个链接下载了完整的 gradle 版本：http: [//www.gradle.org/downloads](http://www.gradle.org/downloads)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:56:14.243

0.8 版还不支持`apply`插件的语法。从 0.9 版开始，`apply`引入了该方法。[这篇文章](http://gradle.1045684.n5.nabble.com/Thinking-about-dipping-my-feet-td1434906.html)中描述了一个类似的问题。

0.8 版已经很老了。我强烈建议升级到最新版本的 Gradle。那肯定可以解决您的问题。

# php - 使用 PHP 将数据导出到 Excel

> ID：13085269
> 
> 赞同：0
> 
> 时间：2012-10-26T10:34:35.073
> 
> 标签：php

我想问一些事情。我对 PHP 没什么问题。

我想在没有 phpmyadmin 但使用 PHP 的情况下将我的数据库导出到 excel。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:38:32.010

有很多方法可以做到这一点。

1.  使用 PHP 生成一个 CSV 文件，然后您可以在 Excel 中打开该文件。

2.  使用可以执行此操作的 PHP 库，例如[http://phpexcel.codeplex.com](http://phpexcel.codeplex.com)。显然，您需要编写代码来连接数据库、提取记录等。

这是一个使用 PHPExcel 的简单“Hello World”示例：

```
<?php
/** Error reporting */
error_reporting(E_ALL);

/** Include path **/
ini_set('include_path', ini_get('include_path').';../Classes/');

/** PHPExcel */
include 'PHPExcel.php';

/** PHPExcel_Writer_Excel2007 */
include 'PHPExcel/Writer/Excel2007.php';

// Create new PHPExcel object
echo date('H:i:s') . " Create new PHPExcel object\n";
$objPHPExcel = new PHPExcel();

// Set properties
echo date('H:i:s') . " Set properties\n";
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw");
$objPHPExcel->getProperties()->setLastModifiedBy("Maarten Balliauw");
$objPHPExcel->getProperties()->setTitle("Office 2007 XLSX Test Document");
$objPHPExcel->getProperties()->setSubject("Office 2007 XLSX Test Document");
$objPHPExcel->getProperties()->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.");

// Add some data
echo date('H:i:s') . " Add some data\n";
$objPHPExcel->setActiveSheetIndex(0);
$objPHPExcel->getActiveSheet()->SetCellValue('A1', 'Hello');
$objPHPExcel->getActiveSheet()->SetCellValue('B2', 'world!');
$objPHPExcel->getActiveSheet()->SetCellValue('C1', 'Hello');
$objPHPExcel->getActiveSheet()->SetCellValue('D2', 'world!');

// Rename sheet
echo date('H:i:s') . " Rename sheet\n";
$objPHPExcel->getActiveSheet()->setTitle('Simple');

// Save Excel 2007 file
echo date('H:i:s') . " Write to Excel2007 format\n";
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
$objWriter->save(str_replace('.php', '.xlsx', __FILE__));

// Echo done
echo date('H:i:s') . " Done writing file.\r\n"; 
```

如果您进行快速 google 搜索，还可以使用其他库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:42:40.667

你有两个选择，

1.  导出为 CSV，然后导入 excel
2.  使用一些 php 库作为[phpexcel](http://phpexcel.codeplex.com/)

两者都有优点和缺点，在 CSV 中正确打开它，如果你使用西里尔字母，你必须导入它，但导出非常简单。如果你使用一些库，你可能会遇到导出类型的问题，例如，如果 ypu 想要导出 0456，它可能会以 456 的形式出现。等等

# php - 使用 Codeigniter 循环这个 json 对象（jquery）

> ID：13085273
> 
> 赞同：0
> 
> 时间：2012-10-26T10:34:55.070
> 
> 标签：php, javascript, jquery, json, codeigniter

我已经创建了一个控制器和视图，如下所示 - 我正在尝试遍历 JSON 对象 - 任何人都可以提供帮助吗？

谁能演示如何在视图中循环遍历 json 对象？

```
//Controller PHP function:
public function ajax_get_all()
{
    $stockists = $this->stockists_model->get_all();
    header('Content-type: application/json');
    echo json_encode($stockists);
}

//HTML View

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(function() {
// Stuff to do as soon as the DOM is ready;
$.getJSON("/stockists/ajax_get_all", function(data) {
    var obj = jQuery.parseJSON(data);
    //console.log(obj);
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:37:33.417

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(function() {
// Stuff to do as soon as the DOM is ready;
$.getJSON("/stockists/ajax_get_all", function(data) {
    $.each(data, function(key,value){ 
      console.log(key);
      console.log(value);  
    });
    //var obj = jQuery.parseJSON(data);
    //console.log(obj);
  });
}); 
```

# c++ - 标准 C++ 库的替代方案是什么，并通过清晰的实现来提升？

> ID：13085275
> 
> 赞同：0
> 
> 时间：2012-10-26T10:35:02.857
> 
> 标签：c++, c++-standard-library

我对标准库没有特别的问题，唯一真正的问题是 C++ 库用于将代码与一堆头文件连接起来，真正的实现很大程度上取决于我的应用程序在目标机器上会找到什么图书馆。

所以我一直在寻找带有容器、算法和迭代器的库，也许是开源的，有明确的实现，到目前为止我只找到了这 2 个：

*   提升库
*   QT 库

但这都不是真正的 C++ 标准库，我的意思是 QT 主要是一个 GUI 库，*它还*提供容器和其他好东西，boost 非常庞大，所有的 C++ std-like 组件只是其中的一小部分这个库，也是这个库，移植到新目标并不是一件容易的事，因为构建系统有一个非标准的工具链，并且它使用自己的构建解决方案（ bjam ）。

最后，无论是 boost 还是 QT，我都没有得到一个简单的解决方案或可行的解决方案，可以像我希望的那样替换 C++ 库。

到目前为止，我发现的最好的项目是[Apache C++ 标准库](http://stdcxx.apache.org/)，它刚刚好，但这个项目已经死了。

有人可以建议一个只替换标准库的库，并且它是具有许可许可证的开源库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:41:28.310

> 真正的实现很大程度上取决于我的应用程序将在目标机器上找到什么库

真正的实现基本上取决于你的编译器，而不是你运行程序的机器。

不同的编译器可能有不同的实现，但是我相信这不是用自制的东西来代替如此广泛和深思熟虑的库的理由。这就是您不太可能找到这么好的替代库的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:19:34.567

似乎没有人了解您想要通过切换到替代库来实现什么，这就是您没有得到任何答案的原因。

STL 库普遍适用于从烤面包机到超级计算机的任何设备。它还经过积极优化，以在目标平台上提供尽可能高的性能。

现在，让我澄清你的一些观点。

P1。*“真正的实现很大程度上取决于我的应用程序将在目标机器上找到什么库”*

**错误**，C++ 标准库是在 C 标准库之上实现的，它们都与任何下降编译器一起提供。两者都可以使用系统调用来做一些低级的事情，比如打开文件、创建线程等。就是这样，没有其他依赖项，由标准保证。

# apache - 为什么apache将不存在的目录重写为php文件

> ID：13085281
> 
> 赞同：0
> 
> 时间：2012-10-26T10:35:56.373
> 
> 标签：apache

我的 apache 有问题。我在 domain.com 网站上有 test.php，现在当我运行 domain.com/test/sometext/ 时，它将以 domain.com/test.php 为目标，它必须显示 404 Not Found 状态，但它运行 test.php。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:47:19.653

我在这里找到了这个问题的解决方案：[http ://httpd.apache.org/docs/2.2/content-negotiation.html#multiviews](http://httpd.apache.org/docs/2.2/content-negotiation.html#multiviews)

# wordpress - wordpress yslow F 级 on 使用 gzip 压缩组件

> ID：13085284
> 
> 赞同：0
> 
> 时间：2012-10-26T10:36:14.987
> 
> 标签：wordpress, .htaccess

我对 css 和 js 文件的 gzip（根据 yslow）有一些问题。我尝试了许多不同的方法来实现 .htaccess 中的代码，但没有任何效果。

我无法弄清楚可能出了什么问题 - 如果我签入 Firebug，则这些文件根本没有压缩。我还在一些网站上进行了测试（html 文件被压缩，但其他没有）。

你有什么建议吗？

我主要使用来自[https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess的 .htaccess 建议](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)

我非常感谢您的帮助...

```
<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
      BrowserMatch ^Mozilla/4 gzip-only-text/html
      BrowserMatch ^Mozilla/4\.0[678] no-gzip
      BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
  </IfModule>

</IfModule>

<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file \.(html?|txt|css|js|php)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

# ----------------------------------------------------------------------
# Expires headers (for better cache control)
# ----------------------------------------------------------------------

# These are pretty far-future expires headers.
# They assume you control versioning with filename-based cache busting
# Additionally, consider that outdated proxies may miscache
#   www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

# If you don't use filenames to version, lower the CSS  and JS to something like
#   "access plus 1 week" or so.

<IfModule mod_expires.c>
  ExpiresActive on

# Perhaps better to whitelist expires rules? Perhaps.
  ExpiresDefault                          "access plus 1 month"

# cache.appcache needs re-requests in FF 3.6 (thanks Remy ~Introducing HTML5)
  ExpiresByType text/cache-manifest       "access plus 0 seconds"

# Your document html
  ExpiresByType text/html                 "access plus 0 seconds"

# Data
  ExpiresByType text/xml                  "access plus 0 seconds"
  ExpiresByType application/xml           "access plus 0 seconds"
  ExpiresByType application/json          "access plus 0 seconds"

# Feed
  ExpiresByType application/rss+xml       "access plus 1 hour"
  ExpiresByType application/atom+xml      "access plus 1 hour"

# Favicon (cannot be renamed)
  ExpiresByType image/x-icon              "access plus 1 week"

# Media: images, video, audio
  ExpiresByType image/gif                 "access plus 1 month"
  ExpiresByType image/png                 "access plus 1 month"
  ExpiresByType image/jpg                 "access plus 1 month"
  ExpiresByType image/jpeg                "access plus 1 month"
  ExpiresByType video/ogg                 "access plus 1 month"
  ExpiresByType audio/ogg                 "access plus 1 month"
  ExpiresByType video/mp4                 "access plus 1 month"
  ExpiresByType video/webm                "access plus 1 month"

# HTC files  (css3pie)
  ExpiresByType text/x-component          "access plus 1 month"

# Webfonts
  ExpiresByType application/x-font-ttf    "access plus 1 month"
  ExpiresByType font/opentype             "access plus 1 month"
  ExpiresByType application/x-font-woff   "access plus 1 month"
  ExpiresByType image/svg+xml             "access plus 1 month"
  ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

# CSS and JavaScript
  ExpiresByType text/css                  "access plus 1 year"
  ExpiresByType application/javascript    "access plus 1 year"
  ExpiresByType text/javascript         "access plus 1 year"
</IfModule>

# Enable Compresion
<FilesMatch ".(js|css|html|htm|php|xml)$">
SetOutputFilter DEFLATE
</FilesMatch>

# ----------------------------------------------------------------------
# ETag removal
# ----------------------------------------------------------------------

# FileETag None is not enough for every server.
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>

# Since we're sending far-future expires, we don't need ETags for
# static content.
#   developer.yahoo.com/performance/rules.html#etags
FileETag None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:36:54.940

请与您的主机确认他们的服务器上是否默认启用了 mod_deflate 或 mod_gzip。即使您的 Apache .htacess 是正确的，它仍然需要启用模块。一些共享主机默认关闭它以节省一些CPU，从而与更多客户端共享资源，这对Web性能优化不利。

# php - 通过 Zend 框架使用多个数据源

> ID：13085286
> 
> 赞同：1
> 
> 时间：2012-10-26T10:36:24.190
> 
> 标签：php, oop, zend-framework, zend-db

我正在启动一个基于 zend 框架的应用程序；此应用程序应该能够使用数据库以外的多个数据源；例如一个网络服务。

我一直在阅读如何构建我的模型以允许这种情况。我遇到了各种似乎为此提供解决方案的概念（DataMapper 模式、服务模式、适配器层等）。但是，我仍然对如何将所有这些组合成一个可重用和可扩展的代码库感到困惑。

我以前使用过 zend 框架，通常会使用 mysql 表。例如，如果我有一个用户表...我的模型中有一个用户类，它包含用户域的业务逻辑和一个扩展 Zend_Db_Table_Row_Abstract 的用户类，代表用户表中的一行。

如何最好地组织我的模型和代码库，以便我仍然可以调用 $users->fetchAll() 并获取用户对象的集合，而不管我的数据源是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:04:42.197

它基本上和你以前做的一样工作，只是`Zend_Db_Table_Gateway`你使用 a而不是 a `My_UserGateway_Whatever`，例如首先创建一个接口：

```
interface UserGateway
{
    /**
     * @return array
     * @throws UserGatewayException
     */
    public function findAll();
} 
```

我们不希望来自具体网关的异常出现在消费代码中，因此我们将 UserGatewayException 添加为全部：

```
 class UserGatewayException extends RuntimeException
 {} 
```

然后添加一个实现该接口的类：

```
class My_UserGateway_Webservice implements UserGateway
{
    public function findAll()
    {
        try {
            // insert logic to fetch from the webservice
            return $userData;
        } catch (Exception $e) {
            throw new UserGatewayException($e->getMessage(), $e->getCode, $e);
        }
    }

    // … more code
} 
```

同样，如果你想使用数据库源，你可以为 Zend_Db_* 类编写一个适配器，例如

```
class My_UserGateway_Database implements UserGateway
{
    private $tableDataGateway;

    public function __construct(Zend_Db_Table_Abstract $tableDataGateway)
    {
        $this->tableDataGateway = $tableDataGateway;
    }

    public function findAll()
    {
        try {
            return $this->tableDataGateway->select()->blah();
        } catch (Exception $e) {
            throw new UserGatewayException($e->getMessage(), $e->getCode, $e);
        }
    }

    // … more code
} 
```

如果您需要另一个数据提供者，请确保他们实现了该接口，以便您可以依赖该`findAll`方法。使您的消费类依赖于接口，例如

```
class SomethingUsingUsers
{
    private $userGateway;

    public function __construct(UserGateway $userGateway)
    {
        $this->userGateway = $userGateway;
    }

    public function something()
    {
        try {
            $users = $this->userGateway->findAll();
            // do something with array of user data from gateway
        } catch (UserGatewayException $e) {
            // handle Exception
        }
    }

    // … more code
} 
```

现在，当您创建时，`SomethingUsingUsers`您可以轻松地将一个或另一个网关注入到构造函数中，无论您使用哪个网关，您的代码都可以正常工作：

```
$foo = SomethingUsingUsers(
    new My_UserGateway_Database(
        new Zend_Db_Table('User')
    )
) 
```

或者，对于 Web 服务：

```
$foo = SomethingUsingUsers(
    new My_UserGateway_Webservice(
        // any additional dependencies
    )
) 
```

# javascript - 选中/取消选中网格视图中的所有复选框

> ID：13085287
> 
> 赞同：0
> 
> 时间：2012-10-26T10:36:31.530
> 
> 标签：javascript, html, checkbox

我正在尝试实现一次在网格视图中选中和取消选中所有复选框的功能。我创建了一个主复选框，用于一次检查所有复选框

```
<input id="main-checkbox" type="checkbox" name="messages-checkall" value="all" checked="checked" onclick='checkedAll();'> 
```

checkedAll() 函数实现如下

```
<script type='text/javaScript'>
    function checkedAll () {
        var inputs = document.getElementsByTagName('input');
        var checkboxes = [];
        if (document.getElementById('main-checkbox').checked === "checked") {check = false} else {check = true};
        for (var i = 0; i < inputs.length; i++) {
            if (inputs[i].type == 'checkbox') {
                inputs[i].checked = check;
            }
        }
    }
</script> 
```

但这不起作用。

注意 - 我无法创建包含所有复选框的表单，然后处理表单中的所有复选框。

请告诉您是否需要其他详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:41:59.860

改变

```
if (document.getElementById('main-checkbox').checked === "checked") {check = false} else {check = true}; 
```

至

```
var check = document.getElementById('main-checkbox').checked 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:46:53.737

```
var objCheckBoxes = document.getElementById('containerId').getElementsByTagName('input');

var countCheckBoxes = objCheckBoxes.length;
if(!countCheckBoxes)
{
    objCheckBoxes.checked = true/false;
}
else
{
    for(var i = 0; i < countCheckBoxes; i++)
    {
        objCheckBoxes[i].checked = true/false;
    }
} 
```

在 html 中

```
<ul id="containerId">
 <li><input type="checkbox" name="selected" value="Some text description 1"></li>
 <li><input type="checkbox" name="selected" value="Some text description 2"></li>
</ul> 
```

# android - 星号：如果 SIP 对等体未注册，则不允许调用

> ID：13085290
> 
> 赞同：1
> 
> 时间：2012-10-26T10:36:41.897
> 
> 标签：android, sip, asterisk, mjsip

我正在开发一个基于 SIP 的应用程序。一般来说，如果星号的一个注册用户呼叫未注册的用户，在这种情况下通话需要几分钟才能挂断，用户需要等待一段时间才能拨打另一个电话。

所以我想要做的是，我不想让调用者调用未注册的对等方。[那么在星号](http://www.asterisk.org/)对等设置中是否有任何参数可以设置来执行此任务。

我正在使用[sipdroid](http://sipdroid.org/)作为参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:51:54.073

- 通常，如果用户（被调用者）不在线，星号几乎会立即返回“404 用户未找到”。但是，根据您的情况，如果需要时间，您需要改进 siprdoid 中的代码以进行响应处理。

# sql-server - 使用 Select 将数据插入表中

> ID：13085291
> 
> 赞同：0
> 
> 时间：2012-10-26T10:36:42.417
> 
> 标签：sql-server, select, insert

我有一个表employee1和employee2，我想根据条件使用select将数据从一个表插入到另一个表中，例如

> 插入 EMPNO、EMPNAME、EMPAGE、EMPSALARY、EMPDESIGNATION 选择 EMPNO、EMPNAME、0、''、EMPDESIGNATION WHERE EMPID=25

这就是我想要实现的，因为有些值我不想提供，因为它们是默认值或出于其他原因，但这是不允许的。

你能告诉我我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:38:39.437

```
INSERT INTO employee2
           (EMPNO, EMPNAME, EMPAGE, EMPSALARY, EMPDESIGNATION)
     SELECT EMPNO, EMPNAME, 0, '', EMPDESIGNATION
       FROM employee1
      WHERE EMPID=25; 
```

您可以指定要为其提供值的列，然后仅为这些列提供值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:39:20.463

```
insert INTO employee2 (EMPNO)
SELECT EMPNO from employee1 
```

# html - 什么是 html5 中的 pushstate？

> ID：13085296
> 
> 赞同：0
> 
> 时间：2012-10-26T10:37:05.157
> 
> 标签：html, cordova, jquery-mobile, pushstate

谁能告诉我 html 5 中的 pushstate 是什么？你也能告诉我如何将数据推送到 html5 页面吗？我打算使用 html5 和 jquerymobile 和 phonegap 制作一个聊天应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:47:23.117

PushState 用于在不刷新页面的情况下更改浏览器 URL。

请访问以下链接了解更多信息。

**[推状态！](http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page/)**

# c# - 向构造函数填充datagridview值

> ID：13085298
> 
> 赞同：0
> 
> 时间：2012-10-26T10:37:10.997
> 
> 标签：c#, winforms, datagridview

这是我的构造函数，

```
new VisConfig(
string.Empty,
string.Empty,
new List<SensorConfig>()
    {

        new SensorConfig(
        string.Empty, //DGV COl0
        string.Empty, //DGV COl1
        new List<CoveredTrafficLane>()
            {
                new CoveredLane(string.Empty) //DGV COl 2,3,4,5
            },
                new RseDevicePosition(
                new ValueWithUnit<int>(0, "mm"), //DGV COl6
                new ValueWithUnit<int>(0, "mm"), //DGV COl7
                new ValueWithUnit<int>(0, "mm"), //DGV COl8
                new ValueWithUnit<int>(0, "tenthOfDegree"), //DGV COl9
                new ValueWithUnit<int>(0, "tenthOfDegree"), //DGV COl10
                new ValueWithUnit<int>(0, "tenthOfDegree")), //DGV COl11
                0, //DGV COl12
                0) //DGV COl13
    }, 
```

我正在尝试将数据从 DGV(winform) 获取到此构造函数。

请帮助我，我怎样才能获得数据网格值并将其填充到构造函数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:30:04.260

好吧，当我开始编码时。我意识到这并不理想。

您需要将 DGV 的选择属性设置为整行。或者，如果这不符合您的规范，您可能必须调整它在第二个循环中循环的集合。

```
 private void btnMyButton_Click(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        foreach (DataGridViewColumn col in dgvMyGrid.Columns)
            dt.Columns.Add(col.Name.ToString());

        DataRow dr = dt.NewRow();
        foreach (DataGridViewCell cell in dgvMyGrid.SelectedRows[0].Cells)
            dr[cell.OwningColumn.Name] = cell.Value.ToString();               

    } 
```

完成后，“dr”变量是一个 dataRow，表示来自 dgv 的选择。您可以将构造函数设置为采用 DataRow 类型的参数。

然后，您应该能够使用 DataRow.Cells[] 类似于您发布的方式，您知道该怎么做，以获取您的值。

这里没有暗示担保，它在我的大脑中工作得更好。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:01:24.357

如果我理解你的问题-> 你的 DtuSensorConfig 构造函数从 DataGridView 的一行获取数据。因此，在 VisConfig 构造函数之外创建 List ，然后将这个列表传递到那里。

```
List<DtuSensorConfig> dSensorConf = new List<DtuSensorConfig>()
foreach (DataGridViewRow dr in dataGridView3.Rows)
{
    //Create a CoveredTrafficLane list 
    List<CoveredTrafficLane> covTrafLane = new List<CoveredTrafficLane>();
    //DGV COl 2,3,4,5
    covTrafLane.Add(New CoveredTrafficLane(dr.Cells["DGVCOL2"].Value.ToString()));
    covTrafLane.Add(New CoveredTrafficLane(dr.Cells["DGVCOL3"].Value.ToString()));
    covTrafLane.Add(New CoveredTrafficLane(dr.Cells["DGVCOL4"].Value.ToString()));
    covTrafLane.Add(New CoveredTrafficLane(dr.Cells["DGVCOL5"].Value.ToString()));

    //Create RseDevicePosition
    RseDevicePosition devPos;
    int ctx = 0;
    Int32.TryParse(dr.Cells["dtux"].Value.ToString(), out ctx);
    int cty = 0;
    Int32.TryParse(dr.Cells["dtuy"].Value.ToString(), out cty);
    int ctz = 0;
    Int32.TryParse(dr.Cells["dtuz"].Value.ToString(), out ctz);
    int dtuazu = 0;
    Int32.TryParse(dr.Cells["dtuazim"].Value.ToString(), out dtuazu);
    int dtuele = 0;
    Int32.TryParse(dr.Cells["dtuele"].Value.ToString(), out dtuele);
    int dtuti = 0;
    Int32.TryParse(dr.Cells["dtutilt"].Value.ToString(), out dtuti);

    devPos = new RseDevicePosition(
    new ValueWithUnit<int>(ctx, "mm"),
    new ValueWithUnit<int>(cty, "mm"),
    new ValueWithUnit<int>(ctz, "mm"),
    new ValueWithUnit<int>(dtuazu, "tenthOfDegree"),
    new ValueWithUnit<int>(dtuele, "tenthOfDegree"),
    new ValueWithUnit<int>(dtuti, "tenthOfDegree"));

    //here create a DtuSensorConfig
    dSensorConf.Add(
        new DtuSensorConfig(dr.Cells["DGVCOL0"].Value.Tostring(), //DGV COl0
                            dr.Cells["DGVCOL1"].Value.Tostring(), //DGV COl1       
                            covTrafLane,
                            devPos));
}
VisConfig vConf = new VisConfig(string.Empty,
                                string.Empty,
                                dSensorConf); // 
```

# c# - 运行程序的条件

> ID：13085301
> 
> 赞同：3
> 
> 时间：2012-10-26T10:37:23.137
> 
> 标签：c#, permissions, exe, user-permissions

我用 C# 写了一个主程序，我也用 C# 写了一个小工具程序。

我希望工具程序能够在某些条件下执行：

*   从我的主程序调用时。
*   从打开某些文件后缀调用时（例如“*.abc”）

但是如果用户打开我的程序目录他可以运行工具程序，我不希望他能够这样做。我希望他能够在上述条件下运行程序。如果他手动运行程序，程序会自动关闭。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:42:07.653

没有任何东西暴露给进程/执行环境来告诉它它是如何被调用的，所以没有万无一失的方法可以做到这一点。

您可以让您的主程序在命令行上传递一个标志 - 这和后缀是您可以检查的东西，如果其中任何一个不存在，您会立即终止。

但是，如果用户猜到了标志，他们仍然可以直接调用应用程序。

其他机制可能涉及在调用第二个程序之前将值从主程序写入文件并从第二个程序检查该文件（并在执行后将其删除），作为消息传递机制。还有其他消息传递机制可以做类似的事情（例如私有 MSMQ 队列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:49:35.460

要检查您的主程序是否调用了它，您可以将主程序的`ProcessID`作为命令行参数传递，然后在您的小程序中，检查它是否`ProcessID`存在以及它的进程名称是否是您的主程序的名称。这不是防欺骗的，但可能比仅传递静态数字/字符串更难伪造。

此外，您可以加密并传递该数字，然后对其进行解密并检查上述内容。阻止一个坚定的黑客自己运行你的程序几乎是不可能的，但你可以提高它的难度。您还想混淆您的代码，否则快速反射器调用将准确显示正在传递的字符。

或者，如果可能的话，您可以将小程序制作为 DLL，然后从您的主程序中调用它。这需要一些重构，但会强制您的程序打开。至于打开`*.abc`文件，您的程序可以检查命令行参数以查看是否传递了文件名。这可以由您的应用程序自动处理，并且可以进行 DLL 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:22:43.253

您可以使用带有一些难以猜测的名称的[命名互斥锁](http://msdn.microsoft.com/en-gb/library/system.threading.mutex.aspx)，以确保主程序调用了“小工具”程序。因此，您在父程序中创建了一个互斥锁：

```
bool requestInitialOwnership = true;
bool mutexWasCreated;
Mutex m = new Mutex(requestInitialOwnership, 
                        "MyMutex", 
                        out mutexWasCreated); 
```

然后在您的子程序中编写完全相同的代码来检查父程序是否执行了它。如果`mutexWasCreated==true`，则它*没有*被父程序调用。否则，它是。检查传递给程序的参数将有助于确定文件名的扩展名是否是`.abs`。

# matlab - 我应该使用什么仿射操作来使图像输出看起来像右手边的一个？

> ID：13085307
> 
> 赞同：0
> 
> 时间：2012-10-26T10:38:01.383
> 
> 标签：matlab, image-processing

我想通过执行仿射操作（如缩放、平移、剪切和旋转）来像右手一样输出左手图像。![在此处输入图像描述](../Images/30ce2899e188100fe55187be7d9dbd40.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:42:49.840

如果您询问如何在 matlab 中执行图像配准，请查看文件交换之外的[这个出色的工具箱。](http://www.mathworks.com/matlabcentral/fileexchange/20057-b-spline-grid-image-and-point-based-registration)图像配准是揭示变换参数的过程，它将源图像与参考图像尽可能接近地对齐。如果您使用仿射配准，结果将是一个仿射变换矩阵，它将您的左图像转换为右图像。需要注意的一件事是，默认情况下，注册可能会将图像的左上角作为旋转中心，但您更可能希望图像的中心成为旋转中心，在这种情况下只需平移图像在应用转换/注册之前和之后的一半尺寸。

但是，如果您只是想知道这幅图像的旋转角度，那么请使用量角器。

# php - PHP 电子邮件脚本

> ID：13085308
> 
> 赞同：1
> 
> 时间：2012-10-26T10:38:05.177
> 
> 标签：php, html, email, user-accounts

所以我写了一个 php 脚本，当用户忘记密码时，它会向用户发送一个临时密码，以便他们可以登录并更改密码。该脚本运行良好，并且发送的电子邮件包含所有正确的信息。我想要改变的是它是由谁发送的。我想为网站使用谷歌电子邮件应用程序来发送这些电子邮件，而不是由我的网络服务器发送电子邮件。这是我的脚本的发送部分的样子：

```
$email_to = $_POST["email"];
$email_from = "Admin@domain.com";
$email_subject = "Account Information Recovery";
$email_message = "Here is your temporary password:\n\n";

$email_message .= "Password: ".$password."\n";
$email_message .= "\nPlease log into your account and immediately change your password.";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
```

但是，当我收到电子邮件时，它来自`Admin@webserver`. 如何使用 google 的电子邮件应用程序发送这些电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:45:38.610

可能最好使用[PHPMailer](http://phpmailer.worxware.com/)：

```
$mail = new PHPMailer(); 
$mail->IsSMTP(); // enable SMTP
$mail->SMTPDebug = 1; //1 for debugging, spits info out  
$mail->SMTPAuth = true;  
$mail->SMTPSecure = 'ssl'; //needed for GMail
$mail->Host = 'smtp.gmail.com';
$mail->Port = 465; 
$mail->Username = 'google_username';  
$mail->Password = 'google_password';           
$mail->SetFrom($email_from, 'Your Website Name');
$mail->Subject = $email_subject;
$mail->Body = $email_message;
$mail->AddAddress($email_to);
$mail->Send(); 
```

注意：此示例直接使用 SMTP 发送电子邮件，这将解决问题，但如果主机禁用了 fsockopen，它将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:26:53.100

我会建议[Swiftmailer](http://swiftmailer.org/)。它有一个非常好的和有据可查的 API，并且支持所有不同类型的传输。

从文档：

```
require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.example.org', 25)
  ->setUsername('your username')
  ->setPassword('your password')
  ;

/*
You could alternatively use a different transport such as Sendmail or Mail:

// Sendmail
$transport = Swift_SendmailTransport::newInstance('/usr/sbin/sendmail -bs');

// Mail
$transport = Swift_MailTransport::newInstance();
*/

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Wonderful Subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
  ->setBody('Here is the message itself')
  ;

// Send the message
$result = $mailer->send($message); 
```

# c# - asp,net 使用 site.master 页面

> ID：13085310
> 
> 赞同：2
> 
> 时间：2012-10-26T10:38:07.547
> 
> 标签：c#, asp.net

我正在尝试更改运行时 site.master 页面上存在的 css 类属性，但到目前为止我已经厌倦了

```
mainContainer.Attributes.Add("style", "background-image('myImage.png')"); 
```

和

```
mainContainer.Attributes.Add("class", "className"); 
```

但是这些都不能让我在运行时更改主文件的 css。我正在使用 c# 使用 asp.net

这是母版页上的代码

```
 <div class="main">

            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:50:06.707

您需要在其他子页面中部分加载母版页，如下所示...

```
<%@ MasterType VirtualPath="~/Site1.Master" %> 
```

然后在子页面的页面加载中..put

```
protected void Page_Load(object sender, EventArgs e)
    {
        HyperLink contact_menu = (HyperLink)Master.FindControl("contactmenu");
        contact_menu.CssClass = "current";
    } 
```

根据您的需要更改..享受..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:50:38.587

[ContentPlaceHolder](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.contentplaceholder.aspx)是输出 html 代码中不存在的元素。它只定义了一个区域。您可以尝试使用“main”类更改 div。只需添加 runat="server" 和 id 属性并从代码中访问。

```
<div id="MainDiv" class="main" runat="server"> 
```

接着

```
MainDiv.Attributes.Add... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:51:26.840

您首先需要在母版页上找到控件

```
Image img = Page.Master.FindControl( "layoutStyleSheet" ) as Image; 
```

然后为其添加样式

```
img.Attributes.Add("class", "className"); 
```

# javascript - Window.close 有时工作有时不工作

> ID：13085311
> 
> 赞同：0
> 
> 时间：2012-10-26T10:38:10.713
> 
> 标签：javascript

根据[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/window.close?redirectlocale=en-US&redirectslug=window.close)，如果没有使用 window.open() 打开窗口，则 window.close() 在 FF 中将不起作用；

我们已经在一个项目中实现了 ExtJS，并使用锚标记和 target='_blank' 打开了一个新窗口/选项卡。在新窗口中，有一个带有 js 代码的关闭按钮：'window.close();'。

根据 mozilla 标准，这段代码根本不应该工作，但奇怪的是它在某些情况下有效，在某些情况下无效。

任何人都可以提供一些提示/建议或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:11:35.990

Try:

```
window.open('', '_self', '');
window.close(); 
```

Was having some issues on Chrome for iOS (in other browsers it works just fine). For that call close after a timeout > 300 as stated [here](https://stackoverflow.com/a/10712923)

So code should look like:

```
window.open('', '_self', '');
setTimeout(window.close, 1000); 
```

# qt - QSettings：复制、修改但避免更改底层 .ini 文件

> ID：13085314
> 
> 赞同：2
> 
> 时间：2012-10-26T10:38:29.537
> 
> 标签：qt, qsettings

我`QSettings`从 .ini 文件中读取了一些内容：

```
QSettings* settingsDocRoot=new QSettings(_settingsFile ,QSettings::IniFormat, parent); 
```

这被传递给某个对象。但是，然后我会复制`QSettings* s2= new QSettings(settingsDocRoot);`并修改一个特定的值`s2->setValue("path", whateverNewPath);`

基本上我想将稍微修改的`QSettings`对象传递给另一个对象。但是如何**避免**使用更改的值（`s2->setValue`）更新原始 ini 文件？

一个想法是，只需将路径设置为“”。但是，根据[QSettings - ini 文件的位置在哪里？](https://stackoverflow.com/questions/4031838/qsettings-where-is-the-location-of-the-ini-file)然后将假定一个默认位置（好的，原始文件不会被更改，但会写入不必要的文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:19:15.410

QSettings 完全是为持久性而设计的。如果您不希望将副本写入磁盘，最好将所有值复制到 QHash 并将其传递给其他对象：

```
QHash<QString, QVariant> hash;
const QStringList keys = settings->allKeys();
Q_FOREACH(QString key, keys) {
  hash[key] = settings->value(key());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:08:18.637

我目前正在执行以下操作：

```
 QSettings* settingsWsNaviGraph = new QSettings(settingsDocRoot);
    // avoid writing to file
    settingsWsNaviGraph->setPath(QSettings::InvalidFormat, QSettings::UserScope, ""); 
```

这种肮脏的黑客似乎避免了写入，至少我的原始文件保持不变，而且我还没有看到任何不需要的文件（如果我找到了会报告）。

如果这在这里不起作用，我将尝试使用伪造的读/写方法注册我自己的格式。看[这里](http://www.qtcentre.org/threads/29445-QSettings-custom-format-and-class-methods-as-read-write-functions)

# java - 如何将可选参数传递给报告？

> ID：13085317
> 
> 赞同：2
> 
> 时间：2012-10-26T10:38:43.443
> 
> 标签：java, jasper-reports

我正在通过*iReport 4.5.0*创建带有嵌入式*sql 查询的**JR*报告。

 **我已经在 Query 中添加了参数。但我想提供灵活性，以便用户可以传递参数或不能传递参数，以便相同的报告可以与我的 Web 应用程序一起使用。

谁能告诉我如何使我的报告如此灵活，以便用户可以或不能传递参数。

我像这样修改了*queryString*：

```
SELECT columnA, ColumnB FROM Table WHERE Table."columnA" = $P!{} 
```

但*iReport*无法生成报告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:34:50.040

我通常遵循这种模式：像你一样定义 $P{MyParam}。然后添加具有默认值的 $P{MyParam_SQL}，如下所示：

```
$P{MyParam} == null ? "1=1" : "columnA = '" + $P{MyParam} + "'" 
```

而报告中的SQL是这样的：

```
SELECT columnA, ColumnB 
FROM table 
WHERE 
  some_filters
  AND $P!{MyParam_SQL}
  AND some_other_stuff 
```

它与其他两个建议的答案没有根本不同。但是我发现这样很容易理解和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:14:54.790

您需要重组您的 SQL 查询来执行此操作。基本上将参数的默认值设置为 null 并编写您的查询，例如：

```
Select columnA,ColumnB From Table Where ($P!{} IS NULL OR Table."columnA" = $P!{}) 
```

因此，本质上，如果为参数传入了一个值，则查询会将其与列进行比较，如果它为空，它只会评估为真，并跳过第二部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:10:24.130

您可以尝试将整个 where 子句作为参数传递。这样，如果没有给出参数，整个子句将被省略，查询仍然有效。

您只需要准备您的输入，如下所示：

```
String whereClause = null
if (inputString != null && inputString != ""){
    whereClause = "Where Table.\"columnA\" = \"" + inputString + "\"";
} 
```

将其作为参数传递给您的报告，然后将查询更改为：

```
Select columnA,ColumnB From Table $P!{whereClause} 
```**

# html - KineticJS 和 HTML5 - 拖动不起作用

> ID：13085321
> 
> 赞同：3
> 
> 时间：2012-10-26T10:38:56.013
> 
> 标签：html, drag-and-drop, kineticjs, shape

我对 KineticJS 有疑问 - 我的形状没有阻力。

我的代码有什么问题？- 我真的被困住了，需要有人 KineticJS-shark。

我的代码：

```
<!DOCTYPE HTML>
<html>
<head>

<script src="kinetic-v4.0.4.min.js"></script>
<script>
window.onload = function() {
var stage = new Kinetic.Stage({
container: "container",
width: 1024,
height: 768
});
var layer = new Kinetic.Layer();
var spaceShip = new Kinetic.Shape({

drawFunc: function (context) {

context.beginPath();
context.moveTo(99.3, 161.4);
context.bezierCurveTo(99.3, 143.2, 92.5, 128.4, 84.2, 128.4);
context.bezierCurveTo(83.6, 128.4, 83.1, 128.4, 82.6, 128.6);
context.bezierCurveTo(76.5, 84.1, 53.0, 8.0, 53.0, 8.0);
context.bezierCurveTo(53.0, 8.0, 29.6, 84.0, 23.5, 128.5);
context.bezierCurveTo(23.0, 128.4, 22.6, 128.4, 22.2, 128.4);
context.bezierCurveTo(13.8, 128.4, 7.0, 143.2, 7.0, 161.4);
context.bezierCurveTo(7.0, 179.6, 22.2, 228.9, 22.2, 228.9);
context.bezierCurveTo(22.2, 228.9, 27.2, 212.4, 31.5, 194.9);
context.bezierCurveTo(37.1, 206.7, 44.7, 213.9, 53.0, 213.9);
context.bezierCurveTo(61.5, 213.9, 69.1, 206.5, 74.7, 194.6);
context.bezierCurveTo(79.0, 212.2, 84.2, 228.9, 84.2, 228.9);
context.bezierCurveTo(84.2, 228.9, 99.3, 179.6, 99.3, 161.4);
context.closePath();
context.fillStyle = "rgb(203, 203, 203)";
context.fill();

context.bezierCurveTo(37.9, 97.3, 42.4, 92.8, 48.0, 92.8);
context.bezierCurveTo(53.7, 92.8, 58.2, 97.3, 58.2, 102.9);
context.closePath();
context.fillStyle = "rgb(255, 255, 255)";
context.fill();

},

});

// add the shape to the layer
layer.add(spaceShip);

// add the layer to the stage
stage.add(layer);

spaceShip.setDraggable(true);

spaceShip.on('dragstart', function() {
    console.log("Drag start");      
});

spaceShip.on('dragend', function() {
    console.log("Drag end");        
});

};
</script>
</head>
<body>
<div id="container"></div>
</body>
</html> 
```

（你还要我写什么StackOverflow？？？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T22:39:30.423

使用自定义形状时，您需要确保使用 KineticJS 的 fill() 和 stroke() 方法，否则您将无法将事件绑定到形状。这是一个例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

这是必要的，因为 KienticJS 的 fill() 和 stroke() 方法也用于绘制到用于高性能事件检测的不可见缓冲层

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:03:55.643

试试下面的代码

```
<!DOCTYPE HTML>
<html>
<head>

    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.3.js"></script>

    <script>
        window.onload = function() {
            var stage = new Kinetic.Stage({
                container: "container",
                width: 1024,
                height: 768
            });
            var layer = new Kinetic.Layer();

            var spaceShip = new Kinetic.Shape({
                drawFunc: function (context) {
                    context.beginPath();
                    context.moveTo(99.3, 161.4);
                    context.bezierCurveTo(99.3, 143.2, 92.5, 128.4, 84.2, 128.4);
                    context.bezierCurveTo(83.6, 128.4, 83.1, 128.4, 82.6, 128.6);
                    context.bezierCurveTo(76.5, 84.1, 53.0, 8.0, 53.0, 8.0);
                    context.bezierCurveTo(53.0, 8.0, 29.6, 84.0, 23.5, 128.5);
                    context.bezierCurveTo(23.0, 128.4, 22.6, 128.4, 22.2, 128.4);
                    context.bezierCurveTo(13.8, 128.4, 7.0, 143.2, 7.0, 161.4);
                    context.bezierCurveTo(7.0, 179.6, 22.2, 228.9, 22.2, 228.9);
                    context.bezierCurveTo(22.2, 228.9, 27.2, 212.4, 31.5, 194.9);
                    context.bezierCurveTo(37.1, 206.7, 44.7, 213.9, 53.0, 213.9);
                    context.bezierCurveTo(61.5, 213.9, 69.1, 206.5, 74.7, 194.6);
                    context.bezierCurveTo(79.0, 212.2, 84.2, 228.9, 84.2, 228.9);
                    context.bezierCurveTo(84.2, 228.9, 99.3, 179.6, 99.3, 161.4);
                    context.closePath();
                    this.fill(context);
                    this.stroke(context);
                },
                draggable:true,
                fill: "#00D2FF",
                stroke: "black",
                strokeWidth: 1
            });

            // add the shape to the layer
            layer.add(spaceShip);

            // add the layer to the stage
            stage.add(layer);

            spaceShip.on('dragstart', function() {
                console.log("Drag start");
                document.getElementById("display").innerHTML = "Drag start";
            });

            spaceShip.on('dragend', function() {
                console.log("Drag end");
                document.getElementById("display").innerHTML = "Drag end";
            });

        };
    </script>

</head>
<body>
<div id="container"></div>
<div id="display"></div>
</body>
</html> 
```

# asp.net-mvc - 在 asp.net resource.resx 中，我可以在同一个 resex 文件中引用另一个资源字符串吗

> ID：13085324
> 
> 赞同：-1
> 
> 时间：2012-10-26T10:38:59.843
> 
> 标签：asp.net-mvc

作为参考，我正在开发 mvc3 应用程序。抱歉不能发布图片，因为我没有这些点数。假设我的资源中有 String1 并且我正在定义 string2，我的 string2 内容应该是 String1 +“我的一些文本”，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:50:55.377

看看这个问题，它是相似的，虽然不完全是你想要的。但是，我认为答案是一样的。

资源文件没有这种功能，但你可以在代码中做到这一点：

[一个本地 .resx 字符串可以引用另一个本地 .resx 字符串吗？](https://stackoverflow.com/questions/3072706/can-one-local-resx-string-reference-another-local-resx-string)

# javascript - 调整文本区域的大小以适应加载 jquery 时的所有文本

> ID：13085326
> 
> 赞同：57
> 
> 时间：2012-10-26T10:39:05.450
> 
> 标签：javascript, jquery

我知道对此进行了很多讨论，但我还没有找到解决我需求的解决方案。基本上我需要在你输入时而不是在加载时自动增长一个文本区域。我正在从数据库中提取内容，并根据用户的设置在文本区域上生成覆盖，但是在这样做时，文本区域不可滚动，因此我需要自动调整它们的大小以显示所有文本。

我试过 scrollHeight 但这不是很好，因为屏幕上有多个文本框

谢谢

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-10-26T10:45:11.217

尝试这个

```
$("textarea").height( $("textarea")[0].scrollHeight ); 
```

[**演示**](http://jsfiddle.net/vsJRm/)

* * *

**更新**

作为使其在较旧的 IE-s 中工作的技巧，只需在执行之前添加一个非常短的延迟

```
window.setTimeout( function() {
    $("textarea").height( $("textarea")[0].scrollHeight );
}, 1);​ 
```

[**演示**](http://jsfiddle.net/vsJRm/4/)

**多个文本区域的更新**

```
$("textarea").each(function(textarea) {
    $(this).height( $(this)[0].scrollHeight );
}); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-08-05T07:35:19.730

这对我有用；它遍历页面Ready上的所有“textarea”元素，并设置它们的高度。

```
$(function () {
    $("textarea").each(function () {
        this.style.height = (this.scrollHeight+10)+'px';
    });
}); 
```

您还可以将其与自动扩展功能结合使用，使其在编写时也完全动态：

```
function autoresize(textarea) {
    textarea.style.height = '0px';     //Reset height, so that it not only grows but also shrinks
    textarea.style.height = (textarea.scrollHeight+10) + 'px';    //Set new height
} 
```

并从“keyup”事件或通过 jQuery 调用它：

```
$('.autosize').keyup(function () {
    autoresize(this);
}); 
```

请注意我如何将 10px 添加到滚动高度：在这里您可以调整您希望文本区域底部给用户的空间量。

希望对某人有所帮助。:)

编辑：根据@Mariannes 评论更改答案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-20T09:59:00.410

你可以用这个。这个对我有用。

```
$('#content').on('change keyup keydown paste cut', 'textarea', function () {
        $(this).height(0).height(this.scrollHeight);
    }).find('textarea').change();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="content">
  <textarea>How about it</textarea><br />
  <textarea>111111
222222
333333
444444
555555
666666</textarea>
</div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-26T11:03:26.880

您提到有多个文本框。这段代码会根据自己的内容设置每个文本区域的高度。

```
$(document).ready( function( ) {

    $("textarea").each( function( i, el ) {
        $(el).height( el.scrollHeight );
    ​});

}); 
```

[在这里](http://jsfiddle.net/bruno/vsJRm/1/)提琴

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-26T10:55:14.393

或者，您可以在 HTML 5 中使用可编辑的 div。

参考：[http ://www.w3.org/TR/2011/WD-html5-20110525/editing.html#contenteditable](http://www.w3.org/TR/2011/WD-html5-20110525/editing.html#contenteditable)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-26T10:49:48.293

这是一种解决方法..也许是另一种解决方案：

```
 $('textarea').each(function(){
    var height = $('<div style="display:none; white-space:pre" id="my-hidden-div"></div>')
                 .html($(this).val())
                 .appendTo('body')
                 .height();     
   $(this).css('height',height + 'px');
   $('#my-hidden-div').remove();

}); 
```

你可以在这里看到一个演示[http://jsfiddle.net/gZ2cC/](http://jsfiddle.net/gZ2cC/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-20T17:30:36.403

Tormod Haugene 的解决方案对我有用。

但是我的文本区域在手风琴中，显然它只有在文本区域在页面加载时可见时才有效。通过单击具有“标题”类的元素来触发手风琴项。

所以我修改了代码 Tormod Haugene 以在手风琴内容中工作，这些内容设置为 display: none on page load。

在这种情况下，这可能对其他人有用：

```
jQuery(document).on('click', '.title', function () {
    jQuery("textarea").each(function () {
        this.style.height = (this.scrollHeight+10)+'px';
    });
}); 
```

# php - 删除数据库中的文件夹

> ID：13085330
> 
> 赞同：0
> 
> 时间：2012-10-26T10:39:27.280
> 
> 标签：php, sql, algorithm

我在网站上有画廊，我需要删除所有文件夹

我的结构数据库：（g_folder）

```
id id_parent
1    0
2    0
3    2
4    2
5    3 
```

例如

那么，我可以删除文件夹并删除所有父文件夹吗？

递归？

```
function delete(folder)
{
  count = select id from g_folder where id_parent = folder
  if(count == 0)
    deleteFolderById(folder)

  while(count != 0)
  {
     array = select id from g_folder where id_parent = folder
     for i in range(count)
     {
       deleteFolderById(array[i])
     }
     count = select id from g_folder where id_parent = folder
     delete(array[0])          
  } 

} 
```

我的算法错了，请帮忙！谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:15:00.197

试试这样：

```
function deletefolder($parentid)
{
    $query="select * from g_folder where parentid=".$parentid;
    $result=mysql_query($query);
    if(mysql_num_rows($result)>0)
    {
        while($row=mysql_fetch_array($result))
        {
            deletefolder($row['id']);
        }
        $fdquery="delete from g_folder where parentid=".$parentid;
        $fdresult=mysql_query($fdquery);
    }

    $sdquery="delete from g_folder where id=".$parentid;
    $sdresult=mysql_query($sdquery);
}

deletefolder(2); 
```

# windows - 自动转到多行文本框的下一行

> ID：13085332
> 
> 赞同：1
> 
> 时间：2012-10-26T10:39:34.540
> 
> 标签：windows, arrays, winforms, powershell

我有一个 Windows 窗体，我从 powershell 更新文本，就像脚本进度状态一样，我试图自动移动到文本框中的新行，但我无法做到这一点

我试过 [System.Environment]::NewLine 但没有用

`$nl = [System.Environment]::NewLine`

`$i++`

`$textbox1.Text = "PS $i> Running Script"`

`$textbox1.AppendText($nl)`

![在此处输入图像描述](../Images/c1d2c3e085f38293109e847501ef8c0a.png)

你们中的任何人都可以帮我解决如何将光标自动移动到下一行Maybe Show

PS2> 脚本开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:01:17.287

试试这个：

```
$nl = "`r`n"
$i++
$textbox1.Text = "PS $i> Running Script"
$textbox1.AppendText($nl) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:02:39.997

我找到了这个解决方案

```
$textbox1.AppendText("PS $i> Running Script`r`n") 
```

# android - Facebook 移动应用安装广告错误的预览链接

> ID：13085333
> 
> 赞同：2
> 
> 时间：2012-10-26T10:39:40.440
> 
> 标签：android, iphone, facebook, mobile, ads

我想使用 Facebook 移动应用安装广告。我有 Google Play 和 App Store 上的应用程序，我有 facebook 应用程序，我添加了原生 Android 和 iOS 应用程序。

我没有做的是：安装适用于 iOS 和 Android 的 Facebook SDK 并安装 Power Editor。

一切看起来都很好，但是当我点击屏幕右侧的广告预览时，会将我发送到我的网站，而不是 App Store 或 Google Play。是不是因为我在网络上而不是在 Facebook 应用程序的 Android 或 iOS 设备上执行此操作？是因为我没有安装SDK吗？

我必须在某处完成指向 Google Play 或 App Store 的链接吗？在这里，我可以看到此链接的文本字段，但在我的应用仪表板上看不到。 [https://developers.facebook.com/docs/mobile/android/deep_linking/#native_bookmarks](https://developers.facebook.com/docs/mobile/android/deep_linking/#native_bookmarks)

以下是新 Facebook 移动应用安装广告的链接：[https ://developers.facebook.com/docs/concepts/mobile-ads/](https://developers.facebook.com/docs/concepts/mobile-ads/)

在此先感谢，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:21:13.210

您需要将我们的 SDK 集成到您的应用中才能使用我们的 Facebook 移动应用安装广告。

这是一项要求，以便我们可以跟踪来自 Facebook 的安装以及哪些不是。

# image - 序列化列表包含哈希表

> ID：13085337
> 
> 赞同：0
> 
> 时间：2012-10-26T10:39:50.573
> 
> 标签：image, serialization, bitmap, hashtable, binary-serialization

我有一个类，它有一个字符串和一个哈希表。哈希表包含一组键（字符串）值和每个键属性的位图文件。我如何将其序列化为二进制文件？

```
 public void SerializeObject(List<Poem> poems)
    {

        using (Stream stream = File.Open("data.bin", FileMode.Create))
        {
            BinaryFormatter bin = new BinaryFormatter();
            bin.Serialize(stream, poems);
        }
    }

    public List<Poem> DeSerializeObject()
    {
        List<Poem> poems1;
        using (Stream stream = File.Open("data.bin", FileMode.Open))
        {
            BinaryFormatter bin = new BinaryFormatter();

            var lizards2 = (List<Poem>)bin.Deserialize(stream);
            poems1 = (List<Poem>)lizards2;
        }
        return poems1;
    } 
```

//诗歌类

```
 [Serializable()]
public class Poem  
{
    string poemName;
    Hashtable poemContent; contains set of keys(strings) , values(bitmap)//

    public Poem() {

        poemContent = new Hashtable();

    }
    public string PoemName
    {
        get { return poemName; }
        set { poemName = value; }
    }

    public Hashtable PoemContent
    {
        get { return poemContent; }
        set { poemContent = value; }
    }} 
```

但这总是会产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:52:53.723

我可以毫无错误地运行您的代码。调用代码：

```
 SerializeObject(new List<Poem>
                                {
                                    new Poem
                                        {
                                            PoemContent = new Hashtable {{"Tag", new System.Drawing.Bitmap(1, 1)}},
                                            PoemName = "Name"
                                        }
                                });

 var poems2 = DeserializeObject(); 
```

您看到的错误是什么？是编译器错误还是运行时异常？我可以在示例诗歌列表上毫无问题地运行此代码。顺便说一句，我建议使用`Dictionary<K,V>`而不是`HashTable`.

# cuda - CUDA 原子和非原子内存访问

> ID：13085338
> 
> 赞同：0
> 
> 时间：2012-10-26T10:39:51.230
> 
> 标签：cuda, malloc, free, semaphore, atomic

我有两个 CUDA 函数来操作全局内存中的链表。该函数`pmalloc`删除列表之一的头元素。它首先选择一个列表，然后调用`pmallocBucket`实际删除头元素的列表。如果所选列表为空，`pmalloc`将尝试其他列表。`pfree`另一方面，该函数会将一个新的 head 元素插入到列表中。

互斥是通过信号量实现的，每个链表一个信号量。信号量的实现来自《*CUDA By Example* 》一书。在其他一些测试代码中，信号量可以完美运行。

我对代码的问题如下：有时，多个线程会尝试同时访问同一个链表。这些访问被信号量成功地顺序化，但有时，一个线程会从列表中删除与前一个线程相同的头元素。这可能会立即连续发生，或者中间可能有一个或多个其他线程。然后线程将`free`是一个未分配的内存区域，我的程序崩溃。

这里是提到的功能。`mmd`是全局内存中的一个结构，它是从另一个函数初始化的。

```
extern __device__ void wait(int* s) {
  while(atomicCAS(s, 0, 1) != 0);
}

extern __device__ void signal(int* s) {
  atomicExch(s, 0);
}

__device__ void pfree(Expression* node) {
  LinkedList* l = (LinkedList*) malloc(sizeof(LinkedList));
  l->cell = node;
  node->type = EMPTY;
  node->funcidx = 0;
  node->name = NULL;
  node->len = 0;
  node->value = 0;
  node->numParams = 0;
  free(node->params);

  int targetBin = (blockIdx.x * mmd.bucketSize + threadIdx.x) / BINSIZE;
  /*
   * The for loop and subsequent if are necessary to make sure that only one
   * thread in a warp is actively waiting for the lock on the semaphore.
   * Leaving this out will result in massive headaches.
   * See "CUDA by example", p. 273
   */

  for(int i = 0; i < WARPSIZE; i++) {
    if(((threadIdx.x + blockIdx.x * blockDim.x) % WARPSIZE) == i) {
      wait(&mmd.bucketSemaphores[targetBin]);
        l->next = mmd.freeCells[targetBin];
        mmd.freeCells[targetBin] = l;
      signal(&mmd.bucketSemaphores[targetBin]);
    }
  }
}

__device__ Expression* pmalloc() {
  Expression* retval = NULL;
  int i = 0;

  int bucket = (blockIdx.x * mmd.bucketSize + threadIdx.x) / BINSIZE;

  while(retval == NULL && i < mmd.numCellBins) {
    retval = pmallocBucket((i + bucket) % mmd.numCellBins);
    i++;
  }

  if(retval == NULL) {
    printf("(%u, %u) Out of memory\n", blockIdx.x, threadIdx.x);
  }

  return retval;
}

__device__ Expression* pmallocBucket(int bucket) {
  Expression* retval = NULL;

  if(bucket < mmd.numCellBins) {
    LinkedList* l = NULL;

    for(int i = 0; i < WARPSIZE; i++) {
      if(((threadIdx.x + blockIdx.x * blockDim.x) % WARPSIZE) == i) {
        wait(&mmd.bucketSemaphores[bucket]);
          l = mmd.freeCells[bucket];

          if(l != NULL) {
            retval = l->cell;
            mmd.freeCells[bucket] = l->next;
          }
        signal(&mmd.bucketSemaphores[bucket]);
        free(l);
      }
    }
  }

  return retval;
} 
```

我很茫然。我不知道到底出了什么问题，到目前为止，我所有试图清除它的尝试都没有成功。任何帮助是极大的赞赏。

PS：是的，我确实意识到原子操作和信号量的使用对于 CUDA 应用程序来说并不理想。但是在这种情况下，到目前为止，我还不知道如何以不同的方式实现它，而且我的项目处于一个绝对固定的截止日期，而且很快就接近了，所以必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:53:14.747

您需要确保在受信号量保护的关键部分内完全执行列表操作，而不使用获取信号量之前的陈旧数据。

`l->next`将and声明`mmd.freeCells`为 volatile，或通过原子函数 ( `atomicExch()`) 操作它们。

或者，您可以将内联汇编与合适的缓存运算符一起使用。使用`mov.cg`负载应该足以确保不使用本地缓存的值，以及在释放信号量之前确保写入已到达全局内存的`__threadfence()`右侧。`signal()`确保使用`asm volatile(...)`，否则编译器可以自由地将整个内联汇编移出关键部分。

# objective-c - 为图像井实现拖放

> ID：13085339
> 
> 赞同：2
> 
> 时间：2012-10-26T10:39:54.243
> 
> 标签：objective-c, macos, events

我是一个新手，正在开发我的第一个 Mac 应用程序，其功能的一个元素是它允许用户将图像很好地放入图像中，然后应用程序需要对放置的图像执行某些操作。

我已经很好地创建了我的图像，并使其可编辑，因此我可以将图像很好地拖放到我的图像上，并且它出现在我的应用程序中。

我遇到麻烦的地方是实现事件处理程序，以便在将图像很好地拖放到图像上时执行操作。具体来说，我需要将图像加载到 NSImage 对象中。

我已经阅读了这篇 Mac 开发人员库文章：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html但我无法完全理解它。

如果有人能给我一个例子来说明我将如何实现这一目标，我将不胜感激。

非常感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T01:41:19.767

在您的 nib 初始化函数中，例如 awakeFromNib 或 windowControllerDidLoadNib，添加一个**Observer**：

```
[self.imageView addObserver:self forKeyPath:@"image" options:NSKeyValueObservingOptionNew context:nil]; 
```

并实现一个委托功能：

```
-(void)observeValueForKeyPath:(NSString *)keyPath
                     ofObject:(id)object
                       change:(NSDictionary *)change
                      context:(void *)context
{
   if(object == self.imageView && [keyPath isEqualToString:@"image"])
   {
      // image changed, do anything your want
   }
} 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T04:44:40.973

## **如果您只想在图像掉落到井上时发生事件：**

连接出口面板上的“选定”发送操作。这会将操作发送到您关联的控制器。 [![选定的出口](../Images/a7d5e194be3a88ef1bb4fe356ade9504.png)](https://i.stack.imgur.com/eDlaZ.png)

如果将 imagewell 连接为控制器上的插座，则可以访问它切换到的图像。或者，您可以访问生成方法的 'sender' 参数，即 NSImageView。

```
- (IBAction)selector:(id)sender {

} 
```

## **如果您正在寻找文件名**

[然后你需要像这个要点](https://gist.github.com/vigorouscoding/4659678)一样创建一个 NSImageView 的子类

标题：

```
#import <Cocoa/Cocoa.h>

@interface KSImageView : NSImageView

@end 
```

执行：

```
#import "KSImageView.h"

@implementation KSImageView

- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender {
  BOOL acceptsDrag = [super performDragOperation:sender];

    if (acceptsDrag) {
        NSPasteboard *pboard = [sender draggingPasteboard];
        NSString *plist = [pboard stringForType:NSFilenamesPboardType];

        if (plist) {

            NSArray *files = [NSPropertyListSerialization propertyListFromData:[plist dataUsingEncoding:NSUTF8StringEncoding]
                                                              mutabilityOption:NSPropertyListImmutable
                                                                        format:nil
                                                              errorDescription:nil];

            if ([files count] == 1) {
                NSDictionary *userInfo = @{@"imageFileName" : [[files objectAtIndex: 0] lastPathComponent]};

                [[NSNotificationCenter defaultCenter] postNotificationName:@"KSImageDroppedNotification"
                                                                    object:nil
                                                                  userInfo:userInfo];
            }
        }
    }

    return acceptsDrag;
}

- (void) delete:(id)sender {
}

- (void) cut:(id)sender {
}

@end 
```

注册通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(imageSelected:) name:@"KSImageDroppedNotification" object:nil]; 
```

在这里处理：

```
- (void)imageSelected:(NSNotification *)notification {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-18T01:02:47.253

（这解决了上面[seanmakesgames](https://stackoverflow.com/users/578145/seanmakesgames)解决的问题，仅在 Swift 4.2 中更直接。）

```
import Cocoa

class PathImageWell: NSImageView {

    var draggedFileURL: URL? = nil

    override func performDragOperation(_ sender: NSDraggingInfo) -> Bool {
        let dragSucceeded = super.performDragOperation(sender)
        if dragSucceeded == true {
            let filenameURL = NSURL(from: sender.draggingPasteboard) as URL?
            draggedFileURL = filenameURL
            return true
        }
        return false

    }
} 
```

通过 NSURL 很重要，因为 URL 没有 init(NSPasteboard) 方法；您可以使用从 URL 中检索文件名

```
func imageNameFromURL(_ url: URL) -> String {
        return url.deletingPathExtension().lastPathComponent
    } 
```

如果要将图像名称与图像一起存储，则需要将其包装到具有“名称”属性的不同结构/类中：不要尝试使用 NSImage.name，这是严格与 NSImage 一起使用的属性（命名:) 并显示出特殊的行为。

# windows - Windows 7 Webservices 中的 Jboss 5 问题

> ID：13085340
> 
> 赞同：1
> 
> 时间：2012-10-26T10:39:54.627
> 
> 标签：windows, web-services, jboss

我在 Windows 7 中使用 Jboss 5.0.1GA Jdk6 并在部署我的应用程序时，该应用程序在服务器启动时使用 cxf webservices，出现以下异常

标准差：。此方法声明中不存在 @WebService 注释。如果您想使用 SOAP 公开，请对其进行注释。

该应用程序在开发 unix 服务器上运行良好。

任何帮助，将不胜感激

问候， Pradeep

# batch-file - Reg 查询不适用于 Windows 7 中的系统帐户

> ID：13085341
> 
> 赞同：0
> 
> 时间：2012-10-26T10:39:55.143
> 
> 标签：batch-file, registry, sccm

我正在尝试运行一个批处理文件进行安装，并且我已经使用 reg 查询来确定是否存在先决条件并继续安装。

当我手动运行批处理文件时，它按预期工作，但是当我使用 SCCM 执行此批处理文件时，它失败了。

我暂停并回显了错误级别，发现 reg 查询无法找到使用“系统”帐户运行时实际存在的注册表

有人知道这一点吗？有关如何使用系统帐户查询 HKLM 注册表的任何建议

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:34:50.617

答案在下面的链接中

[http://blogs.technet.com/b/aaronczechowski/archive/2011/12/18/deploying-windows-7-language-packs-via-configmgr.aspx](http://blogs.technet.com/b/aaronczechowski/archive/2011/12/18/deploying-windows-7-language-packs-via-configmgr.aspx)

# android - 如何在同一活动中更改第二个时间选择器对话框中的时间？

> ID：13085343
> 
> 赞同：0
> 
> 时间：2012-10-26T10:40:09.917
> 
> 标签：android, timepicker

嗨，我在同一个活动中使用了两个时间选择器。我的要求是第一个时间选择器将显示当前时间，第二个将显示（当前时间 +1）但我的问题是第二个不显示（当前时间 +1）它也是显示当前时间。这是我的代码

```
 if(v.equals(stimeimage))
  {
   stime=true;
   myYear = c.get(Calendar.YEAR);
   myMonth = c.get(Calendar.MONTH);
   myDay = c.get(Calendar.DAY_OF_MONTH);
   showDialog(DATE_DIALOG_ID); 
  }
  if(v.equals(etimeimage))
  {   
   etime=true;
   myYear = c.get(Calendar.YEAR);
   myMonth = c.get(Calendar.MONTH);
   myDay = c.get(Calendar.DAY_OF_MONTH);
   showDialog(DATE_DIALOG_ID);       
  }
  private DatePickerDialog.OnDateSetListener myDateSetListener
                     = new DatePickerDialog.OnDateSetListener(){

 public void onDateSet(DatePicker view, int year,int monthOfYear, int dayOfMonth) 
 {
  if(monthOfYear+1<10)
   datetext = String.valueOf(year) + "-0"+ String.valueOf(monthOfYear+1) + "-"+ String.valueOf(dayOfMonth);
  else
   datetext = String.valueOf(year) + "-"+ String.valueOf(monthOfYear+1) + "-"+ String.valueOf(dayOfMonth); 
  Log.e("datetext",datetext);

   myHour = c.get(Calendar.HOUR_OF_DAY);
   if(etime)
    myHour = c.get(Calendar.HOUR_OF_DAY)+1; 
   Log.e("mhour",""+myHour);
   myMinute = c.get(Calendar.MINUTE);
   showDialog(TIME_DIALOG_ID);    
   }
  };

  protected Dialog onCreateDialog(int id) 
  {
      AlertDialog myDialog = null;
   switch(id){
    case DATE_DIALOG_ID:{
    myDialog= new DatePickerDialog(this,myDateSetListener,myYear, myMonth, myDay);
    break;
    }
    case TIME_DIALOG_ID:{
            myDialog= new TimePickerDialog(this,myTimeSetListener,myHour, myMinute, false);
            break;
    }

   }
   return myDialog;
  } 
```

当我按下日志中的第二个时间选择器时，它显示 (currenthour+1) 但它显示当前小时..请帮助我解决方案..

我google了很多，没有找到任何解决方案..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:48:12.307

```
 timePicker.setCurrentHour(currentHour+1); 
```

您在 oncreate 方法中以编程方式添加它

# excel - 寻找解释 vba 类使用的参考资料

> ID：13085345
> 
> 赞同：2
> 
> 时间：2012-10-26T10:40:20.093
> 
> 标签：vba, vba, vb.net, excel, vba

我正在学习[vba](/questions/tagged/vba "显示标记为“vba”的问题")，现在我正在尝试开始使用类，因为我发现否则我的程序很难使用，而且我总是一遍又一遍地编写类似的代码。

你能推荐任何涵盖[vba](/questions/tagged/vba "显示标记为“vba”的问题")中用户定义对象的书吗？因为我发现的所有内容都只是对该主题的简短介绍。

当我在寻找这样一本书时，我在[vb.net](/questions/tagged/vb.net "显示标记为“vb.net”的问题")上找到了很多高级书籍。据我了解，这种语言更“强大”（可用于更广泛的任务）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:15:59.937

当您想了解 VBA 时，请在**VB6**上查找参考资料。您可能可以以便宜的价格找到很多参考资料和书籍。我认为自己非常擅长 VBA，这就是我学到很多东西的方式。即使是最新版本的 VBA (VBA7) 本质上也是 VB6 的子集。您可以了解的有关 VB6 的大部分内容都完全适用于 VBA，尤其是关于类和 UDT（这有点像`structs`.NET 世界中的）。

*   从源头开始——MSDN：[Visual Basic 6.0](http://msdn.microsoft.com/en-us/library/hh127540.aspx)
*   搜索时，如果找不到所需内容，请使用 VB6 而不是 VBA，例如：
    *   [谷歌：“vb6 类继承”](http://www.google.com/search?q=vb6+class+inheritance) --> [http://www.freevbcode.com/ShowCode.asp?ID=2970](http://www.freevbcode.com/ShowCode.asp?ID=2970)

根据我自己的经验，我会说用户定义的类型（使用`Type`关键字声明）很少有用*，除非*在单个模块中私有使用，用于需要指向某个结构的指针的本机函数声明。它们的根本缺点是它们不能被强制转换为`Variant`，这是高级 VBA 的杀手锏。一旦你习惯了它，用相同的字段快速构建一个类（com VB 术语中的一个类模块）并不难。

*后期脚本：*这在学习类或用户定义类型时对您没有帮助，所以我仅将其添加为后期脚本：您还可以通过搜索**VBScript**找到很多有用的信息。大多数 VBScript 可以直接粘贴到 VBA 项目中，它会运行，除了无法访问 `Wscript`对象等小例外。许多文档示例，例如[MSXML](http://msdn.microsoft.com/en-us/library/windows/desktop/ms763742%28v=vs.85%29.aspx)（用于与 XML 文件和 Internet 交互）显示 VBScript，并且所有这些代码都可以在 VBA 中轻松使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:03:29.680

The VBA Developer's Handbook by Getz and Gilbert gets my vote. It's old and out of print, but you can get an electronic copy here [https://play.google.com/store/books/details/Ken_Getz_Vba_Developer_s_Handbook?id=46toCUvklIQC&feature=null-Mike+Gilbert](https://play.google.com/store/books/details/Ken_Getz_Vba_Developer_s_Handbook?id=46toCUvklIQC&feature=null-Mike+Gilbert)

It's a bit of a beast, but a great book

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:41:45.333

VB.NET 是一种完整的编程语言——它不需要“在”Excel 中运行。有几种方法可以“连接”VB.net 和 Excel，例如“Com Interop”或将代码集成到工作簿中（我在这里含糊不清，因为我自己从未做过后者）。易用性难以访问 - 如果您只想处理内部 Excel 数据，VBA 更适合，因为它更快。如果您想从 Internet 读取数据、存储/加载数据或构建您自己的 UI，vb.net 会更快，因为 VBA 可以完成所有这些事情，但这就像用螺丝刀将钉子钉在墙上一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:04:54.473

您是什么意思“我的程序太难使用”？
编写类并不一定会让你的工具更容易使用......
我也没有真正看到一遍又一遍地使用相同的代码有问题，只要你尊重良好实践的一般规则（高性能、动态、透明， ETC...）。

上课有什么要知道的？
类使创建标准*封装*对象成为可能，其中包含只能通过类函数（*get*和*let*）访问的私有属性。
您可以将一个类模块*实例*化为一个对象实例并创建同一个类的多个实例（使用**New**关键字）。
你不能用标准模块做到这一点；即使您可以为标准模块（VBA 开发人员主要使用）声明私有属性，也只会存在此变量的一个“副本”。

示例比较：
**标准模块：** “m_Standard_Module”*

```
Option Explicit

Private lNumber_Test As Long

Property Get get_Number_Test() As Long
get_Number_Test = lNumber_Test
End Property

Property Let letNumber_Test(param_Number_Test As Long)
lNumber_Test = param_Number_Test
End Property 
```

调用自：

```
Sub test_Standard_Module()

Dim iNumber                     As Integer

'--> This will produce an error, cannot be instantiated! 
'Dim mdlStandard                 as m_Standard_Module 

'Property contained by standard module is unique and cannot be copied.
m_Standard_Module.letNumber_Test = 2
iNumber = m_Standard_Module.get_Number_Test
MsgBox iNumber

End Sub 
```

**类模块：**
名为“c_Class_Module”的类

```
Option Explicit
Private pNumber_Class As Long

Public Property Get number_Class() As Long  
number_Class = pNumber_Class  
End Property  

Public Property Let number_Class(param_Number_Test As Long)    
pNumber_Class = param_Number_Test
End Property 
```

调用自：

```
Sub test_Class()

Dim clsClass_Module1            As c_Class_Module
Dim clsClass_Module2            As c_Class_Module
Dim lNumber1                    As Long
Dim lNumber2                    As Long

'Can instantiate multiple objects!
Set clsClass_Module1 = New c_Class_Module
Set clsClass_Module2 = New c_Class_Module

'property number_Class is copied for each of the class instances  
clsClass_Module1.number_Class = 1
clsClass_Module2.number_Class = 2

iNumber1 = clsClass_Module1.number_Class    
iNumber2 = clsClass_Module2.number_Class    

MsgBox iNumber1 & ", " & iNumber2

Set clsClass_Module1 = Nothing
Set clsClass_Module2 = Nothing

End Sub 
```

所以基本上，类对象仅在您想要创建相同类型对象的多个实例（具有相似属性）的情况下才有用。
每当您制作工具时，首先创建一个对象模型是很有用的，您可以在其中确定所需的对象及其要创建的属性。

请注意，VBA 不支持继承，这意味着一个类不能从另一个类“继承”属性（其中基本示例是 Employee 类将从 Person 类继承）。不过，它从来没有真正困扰过我。

# php - 基于每个站点的 PHP 错误报告 IIS7

> ID：13085347
> 
> 赞同：3
> 
> 时间：2012-10-26T10:40:25.050
> 
> 标签：php, iis-7, error-reporting

我查看了有关 iis7 上 php 错误报告的各种问题，但未能解决我的问题。

我在我的 php ini 文件中关闭了错误报告，（此服务器上的许多站点是从 IIS 6 转移的，这些站点正在产生警告等）

我真的需要在每个站点的基础上打开错误报告，我查看了这个线程： [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php) 我尝试添加到.htaccess：

```
# PHP error handling for development servers
php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on
php_flag log_errors on
php_flag ignore_repeated_errors off
php_flag ignore_repeated_source off
php_flag report_memleaks on
php_flag track_errors on
php_value docref_root 0
php_value docref_ext 0
php_value error_log \inetpub\vhosts\camerich.co.uk\subdomains\2012\httpdocs\PHP_errors.log
php_value error_reporting 999999999
php_value error_reporting -1
php_value log_errors_max_len 0

<Files PHP_errors.log>
 Order allow,deny
 Deny from all
 Satisfy All
</Files> 
```

并添加到我的 php 文件中：error_reporting(E_ALL); ini_set('display_errors', '1');

我仍然没有显示任何错误，只是错误 500 内部服务器错误。如果我在通过远程桌面连接登录服务器的同时浏览该站点，我确实会收到错误，但对于开发站点的客户，我显然不想让他们对服务器进行 root 访问以查看这些错误。

有什么我想念的吗？所以我的问题是：

我上面详述的步骤是否正确？（我正在使用 helicon ape）

更改 htaccess 后，我是否必须重新启动 iis7 或者只是重新启动站点就足够了？

也没有生成日志文件，日志文件的路径是否包含完整路径，包括驱动器号？或者如果不是路径应该是什么，例如说我的网站在这个文件夹中：D:\inetpub\vhosts\mydomain\subdomains\2012\httpdocs 我应该把什么作为日志文件的路径。

感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:38:04.290

我发现这篇文章解决了错误报告问题：

[http://www.inetnj.com/?page_id=232](http://www.inetnj.com/?page_id=232)

每个站点的错误报告似乎由asp面板控制，如果您使用php会令人困惑，我会认为这将在某处的php设置下。

> 当您调试您的网站（经典 ASP、ASP.NET 或 PHP5）时，您希望看到您在浏览器上遇到的错误报告。为此，您需要在 IIS7 中启用显式错误报告。
> 
> 从管理员工具中打开 Internet 信息服务 (IIS) 管理器。
> 
> 从左侧窗格树中单击您的网站，然后从中心面板双击 ASP。
> 
> 在 Debugging Properties 下将 Send Errors to Browser 选项设置为 True。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T10:44:22.807

.htaccess 文件在 IIS 中没有用，它们是 Apache 服务器的配置文件。IIS 有一个 PHP 配置扩展，安装它（例如从 Web 安装程序），然后你可以配置错误报告（当然你可以直接使用 php.ini）。

# css - 未应用样式

> ID：13085350
> 
> 赞同：0
> 
> 时间：2012-10-26T10:40:37.327
> 
> 标签：css, knockout.js, firebug

我在 Firebug 中看到我的样式 ( `background-color`) 显然位于 html 视图中的元素上，但不在样式选项卡中的 element.style 中。在文档中我没有看到样式的效果，但是如果我手动将它添加到存在的类的样式选项卡中，它就可以工作。 **怎么会这样？**

我有`!important`元素的样式，看不到任何可以覆盖它的东西

编辑，即使使用此处字面说明的值，也没有骰子：

```
 <div class="fl oh rounded" data-bind="attr:{style:'display:block, background-color:#ff0000 !important;'}"> 
```

但是，这行得通。

```
<div class="fl oh rounded" style="background-color:#ff0000 !important;"> 
```

所以，如果我添加样式内联而不是在敲除绑定中，它可以工作......但是，我可以看到绑定正在工作，因为绑定颜色出现在 firebug 的 html 中（但不是在样式中的 element.style选项卡，但看不到 ko 绑定颜色）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:15:03.113

我不知道为什么，但正是这种不合时宜的外观`display:block`造成了这种奇怪。

# mysql - 如何为以下内容准备步骤？

> ID：13085352
> 
> 赞同：1
> 
> 时间：2012-10-26T10:41:02.543
> 
> 标签：mysql, mysqldump

```
CREATE TABLE `t_keyword_stat_ga` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `keyword_id` int(11) DEFAULT NULL,
  `targeturl_id` int(11) DEFAULT NULL,
  `entrances` int(11) DEFAULT NULL,
  `track_date` date DEFAULT NULL,
  `traffic_date` date DEFAULT NULL,
  `own_domain_id` int(11) DEFAULT NULL,
  `medium` varchar(255) DEFAULT NULL,
  `pageviews` int(11) DEFAULT NULL,
  `exits` int(11) DEFAULT NULL,
  `bounces` int(11) DEFAULT NULL,
  `source` varchar(255) DEFAULT NULL,
  KEY `id` (`id`),
  KEY `traffic_date` (`traffic_date`),
  KEY `FK_keywordStatGA_targeturl` (`targeturl_id`,`traffic_date`),
  KEY `own_domain_id` (`own_domain_id`,`traffic_date`),
  KEY `keyword_id` (`keyword_id`,`own_domain_id`,`traffic_date`)
) ENGINE=InnoDB AUTO_INCREMENT=1707411331 DEFAULT CHARSET=utf8;

 CREATE TABLE `t_keyword_conversion_ga` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `own_domain_id` int(11) DEFAULT NULL,
  `keyword_id` int(11) DEFAULT NULL,
  `traffic_date` date DEFAULT NULL,
  `targeturl_id` int(11) DEFAULT NULL,
  `entrance` int(11) DEFAULT NULL,
  `transactions` int(11) DEFAULT NULL,
  `item_revenue` decimal(9,2) DEFAULT NULL,
  `goal1completions` int(11) DEFAULT NULL,
  `goal2completions` int(11) DEFAULT NULL,
  `goal3completions` int(11) DEFAULT NULL,
  `goal4completions` int(11) DEFAULT NULL,
  `goal5completions` int(11) DEFAULT NULL,
  `goal6completions` int(11) DEFAULT NULL,
  `goal7completions` int(11) DEFAULT NULL,
  `goal8completions` int(11) DEFAULT NULL,
  `goal9completions` int(11) DEFAULT NULL,
  `goal10completions` int(11) DEFAULT NULL,
  `goal1Value` decimal(9,2) DEFAULT NULL,
  `goal2Value` decimal(9,2) DEFAULT NULL,
  `goal3Value` decimal(9,2) DEFAULT NULL,
  `goal4Value` decimal(9,2) DEFAULT NULL,
  `goal5Value` decimal(9,2) DEFAULT NULL,
  `goal6Value` decimal(9,2) DEFAULT NULL,
  `goal7Value` decimal(9,2) DEFAULT NULL,
  `goal8Value` decimal(9,2) DEFAULT NULL,
  `goal9Value` decimal(9,2) DEFAULT NULL,
  `goal10Value` decimal(9,2) DEFAULT NULL,
  `medium` varchar(255) DEFAULT NULL,
  `source` varchar(255) DEFAULT NULL,
  KEY `id` (`id`),
  KEY `keyword_id` (`keyword_id`),
  KEY `traffic_date` (`traffic_date`),
  KEY `own_domain_id` (`own_domain_id`,`traffic_date`),
  KEY `targeturl_id` (`targeturl_id`)
) ENGINE=InnoDB AUTO_INCREMENT=526248221 DEFAULT CHARSET=utf8; 
```

我有一个像 _keyword_Stat_ga 和 t_keyword_Stat_conversion 这样的表

1.  我需要从`t_keyword_Stat_ga` and`t_keyword_Stat_conversion`表中导出 2011 年 10 月 31 日之后的所有数据。
2.  将备份导入 ICE 实例（以实现最大压缩）或 ARCHIVE 表。
3.  需要在 2011 年 10 月之前删除上述表中 DB1 中的分区
4.  然后我们需要磁盘使用情况的前后总结

# android - 运行 Android 内存不足

> ID：13085364
> 
> 赞同：2
> 
> 时间：2012-10-26T10:41:48.370
> 
> 标签：android, memory-management, android-intent

我有一个显示即将到来的音乐活动的应用程序。

当您选择一个事件时，您可以看到它的详细信息以及在该事件中演奏的乐队。如果您选择一个乐队，您可以查看其详细信息以及该乐队演奏的即将发生的事件。如果您选择一个事件，您可以看到该事件。

因此，您可以获得一个事件，查看其艺术家，查看艺术家，查看该艺术家演奏的事件，查看该事件中演奏的艺术家，查看其事件......您可以随心所欲地深入。

我应该覆盖意图以`Intent.FLAG_ACTIVITY_CLEAR_TOP`使应用程序永远不会耗尽内存，还是保持原样并让应用程序在Android可以处理的情况下继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:08:36.153

这取决于。根据我对您的应用程序的了解，此选项是否会破坏您的用户返回（通过按后退按钮）说出活动的艺术家的能力？可能你可以通过提供一个面包屑来解决这个问题，该面包屑将在意图中使用正确的数据启动活动（比如在意图中提供事件 ID/艺术家 ID 以供活动加载）。

这样，您可以深入几个级别，仅维护 2 个活动实例（用于 events 和 band ），并且仍然根据您的意图传递的内容加载相关数据。

# clojure - 什么是相当于 google guice 的 clojure？

> ID：13085370
> 
> 赞同：14
> 
> 时间：2012-10-26T10:41:55.820
> 
> 标签：clojure, guice

我遇到了 google guice，并不能真正理解它以及它的作用，尽管它周围似乎有很多炒作。我希望从 clojurian 角度了解该库，以及为什么在 clojure 应用程序中需要/不需要它，以及该语言中是否内置了类似的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T11:43:43.117

由于 Java 的 OO 和类型系统，不同底层实现之间的动态切换（例如用于测试（模拟）目的）可能难以管理。像 Google Guice 这样的库旨在更优雅地处理 Java 中的这些[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

在 Clojure 和其他函数式语言中，可以传递函数，这使得使用不同的实现变得更加容易。

在 Clojure 中有几种方法可以做到这一点：

*   使用您选择的函数作为高阶函数的参数。
*   （重新）将您选择的函数绑定到 var。
*   将您选择的函数封装在闭包中，然后可以传递和调用。

[Clojure Programming](http://my.safaribooksonline.com/book/programming/clojure/9781449310387/12dot-design-patterns/id3585264)的第 12 章有一些很好的 OO 模式示例，例如依赖注入以及在 Clojure 中处理这些模式的替代方法。

Sean Devlin 还有一个关于 Clojure 依赖注入的[完整 Disclojure 视频。](http://vimeo.com/10368175)不过，他的榜样可能被选得更好。他没有在他的闭包中使用完全不同的函数实现，而是使用了一个返回不同“版本”函数的工厂。要点保持不变。

基本上，依赖注入是 OOP 中必不可少的一种模式，并且可以在 FP 中轻松解决（甚至不是问题）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T12:53:49.020

粗略的 Clojure 等价物仍在开发中。目前有两个库正在开发中（截至 2012 年 10 月）：Prismatic 的[Graph](http://blog.getprismatic.com/blog/2012/10/1/prismatics-graph-at-strange-loop.html)（尚未开源）和Stuart Sierra 的[Flow](https://github.com/stuartsierra/flow)。

请注意，我认为 Guice 不仅仅是依赖注入。它为应用程序配置/模块化提供了一个框架。上述库旨在实现这一目标。

# sql - 用oracle中的序列号更新整个表

> ID：13085377
> 
> 赞同：1
> 
> 时间：2012-10-26T10:42:04.610
> 
> 标签：sql, oracle

我想用序列号更新表，我不能创建过程或序列对象，所以需要一个更新查询。我有一个带有日期列的表，根据我需要生成一个数字的最小日期。

表数据：-

```
Date_Value
----------
5th Feb 11
2nd Jan 11
11th Jan 11

After Update :- 
SrNo     Date_Value
------------------- 
1   2nd Jan 11
2   11th Jan 11
3   5th Feb 11 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:02:32.773

```
merge into foo
using
(
   select rowid as rid,
          row_number() over (order by date_value) as seqno
   from foo
) t on (foo.rowid = t.rid)
when matched then update
   set srno = t.seqno; 
```

SQLFiddle 演示：[http ://sqlfiddle.com/#!4/d8cc5/2](http://sqlfiddle.com/#!4/d8cc5/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:36:46.510

您的示例显示您使用自定义表示将日期存储为字符串 - 不符合日期格式。因此，我们需要将您的日期转换为日期数据类型，以便能够相应地对它们进行排序。

```
SQL> create table TB_DATES
  2  (
  3    DATE_VALUE VARCHAR2(11)
  4  )
  5  /

Table created

SQL> 
SQL> insert into tb_dates(date_value)
  2    select '5th Feb 11' from dual union all
  3    select '2nd Jan 11' from dual union all
  4    select '6th Feb 11' from dual union all
  5    select '11th Jan 11' from dual
  6  ;

4 rows inserted

SQL> commit;

Commit complete

SQL> select * from tb_dates;

DATE_VALUE
-----------
5th Feb 11
2nd Jan 11
6th Feb 11
11th Jan 11

SQL> alter table tb_dates add srno number;

Table altered

QL> select * from tb_dates;

DATE_VALUE        SRNO
----------- ----------
5th Feb 11     null  
2nd Jan 11     null
6th Feb 11     null
11th Jan 11    null

SQL> merge into  tb_dates t
  2  using(
  3  select rownum rn
  4       , Date_value
  5       , rid
  6    from ( select to_date(concat(lpad(dy, 2, '0'), tr), 'dd Mon yy') dt
  7                , Date_value
  8                , rid
  9             from (select regexp_substr(substr(Date_value, 1, regexp_instr(date_value, '[[:space:]]') - 1), '[[:digit:]]+') dy
 10                        , substr(Date_value, regexp_instr(date_value, '[[:space:]]'), length(Date_value)) tr
 11                        , Date_value
 12                        , rowid rid
 13                    from tb_dates)
 14   order by 1
 15  ) ) q
 16  on (q.rid = t.rowid)
 17  when matched
 18  then update set t.srno = q.rn
 19  ;

Done

SQL> commit;

Commit complete

select * from tb_dates;

DATE_VALUE        SRNO
----------- ----------
5th Feb 11           3
2nd Jan 11           1
6th Feb 11           4
11th Jan 11          2

SQL> select * from tb_dates order by srno;

DATE_VALUE        SRNO
----------- ----------
2nd Jan 11           1
11th Jan 11          2
5th Feb 11           3
6th Feb 11           4 
```

# wpf - XamDataGrid 对 ITypedList 的支持

> ID：13085378
> 
> 赞同：0
> 
> 时间：2012-10-26T10:42:05.343
> 
> 标签：wpf, infragistics

在这两种情况下，文档都只是提到任何`IEnumerable`都可以。我有一个实现的自定义对象，`INotifyPropertyChanged`并且`ITypedList`我将它绑定到它`XamGrid.ItemSource`并且它可以工作。但是，它不适用于`XamDataGrid.DataSource`. 我希望网格反映对自定义集合的更改。

我知道`DataSet`适配器的解决方案。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:08:41.953

XamDataGrid 具有 ITypedLIst 的逻辑，因此如果这不起作用，您应该通过联系[支持人员](http://www.infragistics.com/help/)并提供示例让 Infragistics 知道。

如果对集合的更改没有反映在网格中，请确保网格正在使用的集合实现了更改通知，例如 ObservableCollection。

如果对数据项的更改未正确更新，则应确保列表中的对象在您预期更改发生时通过 INotifyPropertyChanged 接口发出更改通知。

如果您已经验证您的集合确实正确实现了更改通知并且对象也引发了更改通知，那么您应该联系[Infragistics 支持](http://www.infragistics.com/help/)并提供示例，以便他们进行调查。

# matlab - 在matlab中用nan值重新格式化矩阵

> ID：13085382
> 
> 赞同：1
> 
> 时间：2012-10-26T10:42:07.503
> 
> 标签：matlab, matrix

这篇文章遵循之前关于矩阵重组的问题：

> [在matlab中重新格式化矩阵](https://stackoverflow.com/questions/13083944/re-formatting-a-matrix-in-matlab)

以下示例演示了我面临的另一个问题：

```
depth = [0:1:20]';
data = rand(1,length(depth))';
d = [depth,data];
d = [d;d(1:20,:);d]; 
```

在这里我想改变这个矩阵，使每一列代表一个特定的深度，每一行代表时间，所以最终我将有 3 行（即天）和 21 列（即每个深度的测量值）。但是，我们无法重新调整这一点，因为给定日期的测量次数不一样，即缺少一些。这是众所周知的：

```
dd = sortrows(d,1);
for i = 1:length(depth);
    e(i) = length(dd(dd(:,1)==depth(i),:));
end 
```

从'e'我们发现不同天的深度数是不同的。如何将 nan 插入矩阵中，以便每天具有相同的深度值？我可以通过以下方式首先找到独特的深度：

unique(d(:,1)) 由此，如果给定日期缺少深度（来自唯一），我想将深度插入到正确的位置，并将 nan 插入数据列中的相应位置。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:04:03.690

您的想法是正确的，这`unique`可能在这里派上用场。您还需要第三个输出参数，它将唯一深度映射到原始`d`向量中的位置。看看这段代码 - 评论解释了我的工作

```
% find unique depths and their mapping onto the d array
[depths, ~, j] = unique(d(:,1));

% find the start of every day of measurements
% the assumption here is that the depths for each day are in increasing order 
days_data = [1; diff(d(:,1))<0];

% count the number of days
ndays = sum(days_data);

% map every entry in d to the correct day
days_data = cumsum(days_data);

% construct the output array full of nans
dd = nan(numel(depths), ndays);

% assing the existing measurements using linear indices
% Where data does not exist, NaN will remain
dd(sub2ind(size(dd), j, days_data)) = d(:,2)

dd =

0.5115    0.5115    0.5115
0.8194    0.8194    0.8194
0.5803    0.5803    0.5803
0.9404    0.9404    0.9404
0.3269    0.3269    0.3269
0.8546    0.8546    0.8546
0.7854    0.7854    0.7854
0.8086    0.8086    0.8086
0.5485    0.5485    0.5485
0.0663    0.0663    0.0663
0.8422    0.8422    0.8422
0.7958    0.7958    0.7958
0.1347    0.1347    0.1347
0.8326    0.8326    0.8326
0.3549    0.3549    0.3549
0.9585    0.9585    0.9585
0.1125    0.1125    0.1125
0.8541    0.8541    0.8541
0.9872    0.9872    0.9872
0.2892    0.2892    0.2892
0.4692       NaN    0.4692 
```

您可能想要转置矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:59:08.797

您的问题并不完全清楚您的数据到底是什么样的，但以下内容可能会帮助您找到答案。

假设你有一个列向量

`day1 = 1:21';`

并且，最初，所有的值都是`NaN`

`day1(:) = NaN`

接下来假设您有一个二维测量数组，其中第一列代表深度，第二列代表这些深度的测量值。例如

`msrmnts = [1,2;2,3;4,5;6,7] % etc`

然后分配

`day1(msrmnts(:,1)) = msrmnts(:,2)`

`day1`将仅在其索引位于 的第一列中的那些行中设置值`msrmnts`。第二条语句使用 Matlab 的功能，即使用一个数组作为另一个数组的一组索引，例如

d([9 7 8 12 4]) = 1:5

会将元素设置`[9 7 8 12 4]`为`d`值`1:5`。请注意，元素的索引不需要按顺序排列。您甚至可以在索引数组中多次插入相同的值，例如`[4 4 5 6 3 4]`虽然它不是非常有用。

# asp.net - 如何在 ASP.NET 页面上提交数据两次

> ID：13085383
> 
> 赞同：0
> 
> 时间：2012-10-26T10:42:10.657
> 
> 标签：asp.net

我有一个网页。顶部是一个搜索栏，位于`<form id="form1" runat="server">`.

我还想在同一页面上添加一个表单，允许用户注册他们的详细信息。问题，ASP.NET 每页只允许一个表单。

我怎样才能实现我的目标？任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:44:52.917

将要调用的代码放入不同的按钮单击事件中。因此，如果单击搜索按钮，则仅运行搜索按钮单击事件中的代码。如果单击注册按钮，则仅运行注册单击事件中的代码。

这是一个例子：

```
protected void Page_Load(object sender, EventArgs e) {

    // Common code

}

protected void btnSearch_Click(object sender, EventArgs e) {

    // Search code

}

protected void btnRegister_Click(object sender, EventArgs e) {

    // Register code

} 
```

双击设计器中的按钮将在后面的代码中创建点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:45:10.117

一个页面上只能有一个**服务器端**表单。

如果是一个选项，您可以使用客户端表单（没有`runat="server") with a separate action - this POST can go to a different page, where you will have to access`Request.Form` 来检索发布的值。

另一种选择是使用单独的按钮来发布不同的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:56:54.570

正如@Simon 的回答中已经说过的那样，在您的代码隐藏中很容易拥有多个点击处理程序来准确处理您在页面上需要的内容 - 这是解决“缺少多种表单”问题的最简单方法。

在这种情况下非常有用的是控件的`DefaultButton`属性。`<asp:Panel>`这意味着如果您的页面有多个区域（例如）`<asp:TextBox>`控件，并且每个区域都有特定的`<asp:Button>`关联，如果焦点位于其中一个文本框中，则按下`Return`或`Enter`将导致`DefaultButton`被单击。

例如...

```
<asp:Panel runat="server" DefaultButton="btnSearch">
  Search: <asp:TextBox runat="server" id="txtSearcn"/>
  <asp:Button runat="server" id="btnSearch" Text="Search" OnClick="btnSearch_Click"/>
</asp:Panel> 
```

[有关`DefaultButton`属性的更多信息，请参见 MSDN`<asp:Panel>`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:46:28.793

您可以使用简单的 HTML 表单方法，但存在总是将整个页面发布回来的问题。或使用 mvc：

[asp.net 3.5 是否支持单个页面上的多个表单？](https://stackoverflow.com/questions/2504209/are-multiple-forms-on-a-single-page-supported-in-asp-net-3-5)

# php - 渲染 Zend\Form\Element\Button 有内容但没有标签

> ID：13085387
> 
> 赞同：2
> 
> 时间：2012-10-26T10:42:23.767
> 
> 标签：php, button, zend-form, zend-framework2

似乎不可能使用`FormCollection`没有标签的视图助手自动呈现按钮元素。

只要有可能，我都会以这种方式呈现表单：

```
<?php echo $this->form()->openTag($this->form); ?>
    <?php echo $this->formCollection($this->form); ?>
<?php echo $this->form()->closeTag($this->form); ?> 
```

但是，由`FormButton`调用的视图助手`FormCollection`等待按钮的内容作为`render()`方法的第二个参数 - 或标签选项。如果我设置标签，按钮会正确呈现，但是，你猜对了，带有标签。

我试图通过浏览代码找出解决方法，但我看不到。

**注意：** FormButton 呈现`<button>...</button>`元素。我也可以忍受一个`<input type="button" />`元素。

我在这里错过了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:24:07.297

当我在这个问题上苦苦挣扎时，我不小心得到了解决方案！它是如此简单（或hackish？），我不会想到工作。

将此添加到您的字段集中：

```
$this->add(array(
    'name' => 'delete',
    'attributes' => array('type'=>'button', 'value' => 'Delete', 'onclick'=>'delete()'),
)); 
```

就这样。它对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:14:57.627

编写您自己的 formCollection ViewHelper，它使用您自己的 formButton ViewHelper。

# codeigniter - 发送 url 但停留在同一页面上（php、codeigniter、javascript）

> ID：13085388
> 
> 赞同：2
> 
> 时间：2012-10-26T10:42:27.437
> 
> 标签：codeigniter

这是我的情况。我正在 codeigniter 中编写一个 web 界面来向虚拟服务器发送命令。这些命令在 url 中通过浏览器传递。

示例：[http](http://server.com/TgtSendIRCommand?id=UM-02&code=KEY_UP) ://server.com/TgtSendIRCommand?id=UM-02&code=KEY_UP 该服务器然后采取行动，Web 界面刷新屏幕截图。

我只想在 html 中有一堆链接，将这个命令发送到浏览器。但是，如果我单击链接，用户必须留在同一页面上。因此命令已发送，但没有其他交互。

我正在使用codeigniter。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:58:45.660

创建一个视图并将其复制到您的视图中：

```
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
</head>
<body>
<a href="#" id="myBtn">Click here!</a>

<script type="text/javascript">
  $(document).ready(function(){
     $("#myBtn").click(function(){  
       $.get("http://server.com/TgtSendIRCommand?id=UM-02&code=KEY_UP ");        
     });
  });
</script>
</body>
</html> 
```

未经测试，但上述内容应该可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T11:24:14.140

```
<?php
        session_start();
        $_SESSION['http://localhost/profile.php'] = $_SERVER['REQUEST_URI'];
        $sess=$_SESSION["email"];
        $servername = "localhost";
        $username = "root";
        $password = "";
        $dbname ="reg";
        if(!isset ($sess)) 
        { 
            header("Location:login.php");
            exit;
        } 
```

# joomla - 获取 Joomla！不在 Joomla 下时的 1.5 用户名！（外部脚本）

> ID：13085390
> 
> 赞同：1
> 
> 时间：2012-10-26T10:42:31.013
> 
> 标签：joomla, joomla1.5

我正在使用 joomla 1.5.26 。

我可以通过以下方式在 joomla 文件结构中获取用户名和用户 ID

`$user =& JFactory::getUser(); $user->username;`.

现在**我有一个文件，它既不在模板文件夹**下，也不在模块文件夹下，也不在组件文件夹下。这只是在根文件夹下。

现在如何获取登录的用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:45:35.767

试试这个在主页上创建一个新文件并以这种方式访问​​用户名

```
 define( '_JEXEC', 1 );
    define('JPATH_BASE', dirname(__FILE__) );
    require_once( JPATH_BASE .'/includes/defines.php' );
    require_once( JPATH_BASE .'/includes/framework.php' );
    $mainframe =& JFactory::getApplication('site'); 
    $user =& JFactory::getUser();
    $user->username; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-26T10:47:15.050

如果您的文件不是 Joomla! 的类型，您将无法获取/访问任何信息！插件。

# nginx - 如何重写 nginx 基本文件名？

> ID：13085392
> 
> 赞同：-2
> 
> 时间：2012-10-26T10:42:43.940
> 
> 标签：nginx

如何重写 nginx 基本文件名？

[http://pic.test.com/view.php?filename=947284035_234601603334998.jpg](http://pic.test.com/view.php?filename=947284035_234601603334998.jpg)

至

[http://pic.test.com/947284035_234601603334998](http://pic.test.com/947284035_234601603334998)

基本文件名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:12:59.713

以下应该做到这一点：

```
location /view.php {
  if ( $arg_filename ~ (.*)\.jpg ) {set $basename $1;}
  rewrite ^ $scheme://$host/$basename last;
} 
```

# css - 哪个是好的 camelClass ，减去“-”或用于命名特殊情况的 CLASS 和 ID 的“_”

> ID：13085400
> 
> 赞同：0
> 
> 时间：2012-10-26T10:43:13.877
> 
> 标签：css

我从 3 年就开始编写 CSS。我总是以其他开发人员容易理解的方式命名我的`Class`& 。但是现在我和`ID`我的关注同事讨论了一些**特殊情况**时的命名问题。`Class``ID`

 **这里的**特殊情况**意味着当某个时候（每个人都会发生这种情况）我们没有名称，`Class`然后`ID`我们根据它的父级或两个名称的组合等来命名，例如**.panel_slider**或**.panelSlider**等。

所以，我的关注同事说，对于这种特殊情况，最好在它们之间**加上下划线“_”**或**减号“-”**。因此，易于编写和理解。像 **.panel_slider**或**.panel-slider**。

＆我说最好像我们在 JS 中编写的那样为此提供**驼峰式案例**。因此，它不会占用**下划线 "_"**或 **减号 "-"**的任何额外空间。它也很容易编写和理解。像**.panelSlider**。

所以，我的问题是哪种命名约定好。

```
a) .panel_slider

b) .panel-slider

c) .panelSlider 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:10:54.403

我同意@Ianzz：当您查看[twitter bootstrap](http://twitter.github.com/bootstrap/base-css.html)时，您会注意到他们不使用驼峰式或下划线。（例如`<div class="text-warning">`） twitter bootstrap 的人都是关于最佳实践的，所以遵循他们的符号并没有什么坏处。但正如其他人所说，并没有真正的规则。**

# c# - 如何在 Windows Phone 7 中放大、提高比特率和淡出录制的音频？

> ID：13085403
> 
> 赞同：0
> 
> 时间：2012-10-26T10:43:36.600
> 
> 标签：c#, windows-phone-7, recording, bitrate

关于 windows phone 7 中的语音（音频）录制，我面临以下问题。

我正在使用 Microsoft.Xna.Framework.Audio 命名空间中可用的 Microphone 类录制声音。这是代码 -

变量声明：

```
private Microphone mic = Microphone.Default;
private MemoryStream stream;
private const string FILE_NAME = "recording.mp3";
byte[] buffer; 
```

录制按钮点击代码-

```
mic.BufferDuration = TimeSpan.FromSeconds(1);
buffer = new byte[mic.GetSampleSizeInBytes(mic.BufferDuration)];

// Create the event handler.  I could have done an anonymous   
// delegate here if I had so desired.  
mic.BufferReady += new EventHandler<EventArgs>(mic_BufferReady);

stream = new MemoryStream();
mic.Start(); 
```

缓冲区就绪事件代码 ----------

```
void mic_BufferReady(object sender, EventArgs e)
{
    mic.GetData(buffer);
    // Write buffer to stream
    stream.Write(buffer, 0, buffer.Length);  
} 
```

按钮停止代码 -

```
private void btnStop_Click(object sender, RoutedEventArgs e)
{
    dt.Stop();
    btnStop.IsEnabled = false;
    btnPlayRecording.IsEnabled = true;

    mic.Stop();
    //Writing stream into Storage
     writeFile(stream);
}

private void writeFile(MemoryStream s, string name)
{
    try
    {
        using (var userStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (userStore.FileExists(name))
            {
                userStore.DeleteFile(name);
            }
            using (var file = userStore.OpenFile(name, FileMode.CreateNew))
            {
                s.WriteTo(file);
            }
        }
    }
    catch (Exception ee)
    {

    }
} 
```

一旦我将流保存到隔离存储并播放它，音量非常低，质量也不好。

所以

1.  我们可以放大音量吗？
2.  我们可以提高比特率吗？
3.  我们可以做 Fadin-Fadout 吗？

如果这三个在 windows phone 7 中都不可能，那么是否有任何第三方 API 可用于执行所有这些操作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:56:51.473

.NET 中的放大并非易事。我发现的最佳方法是对“SoX，声音处理程序的瑞士军刀”进行外部进程调用。( [http://sox.sourceforge.net/](http://sox.sourceforge.net/) )

我没有 Windows 7 手机——所以我不确定 SOX 是否在那里运行。

格式为 SOX -V volume_parameter inputFileName outputFileName 用于放大，所以：

“sox.exe -v 3.0 myNormalFile.wav myAmpedFile.wav”

会给你300%的放大。Sox 还允许更改比特率……不确定 Fadein/Fadeout。

我没有专门针对 Windows 7 手机的任何东西，而是直接使用 .NET/C# 代码：

```
string finalFileName = "myAmplifiedFile.WAV";
string tmpFileName = "tmpHoldingFile.WAV";
string soxEXE = @"C:\SOX\sox.exe";
string soxArgs = "-v 3.0 ";

/// OTHER STUFF HERE 

/*-----------------------------------------------------------
* Call the SOX utility to amplify it so it is 3 times as loud.
*-----------------------------------------------------------*/
try
{
    System.Diagnostics.Process process = new System.Diagnostics.Process();
    process.StartInfo = new System.Diagnostics.ProcessStartInfo();
    process.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
    process.StartInfo.FileName = soxEXE;
    process.StartInfo.Arguments = string.Format("{0} {1} {2}",
                             soxArgs, tmpFileName, finalFileName);
    process.Start();
    process.WaitForExit();
    int exitCode = process.ExitCode;
}
catch (Exception ex)
{
    string err = ex.Message;
    return false;
}
/*-------------------------------------------------------------
 * OK, now we play it using SoundPlayer
 *-------------------------------------------------------------*/
try
{
    SoundPlayer simpleSound = new SoundPlayer(@finalFileName);
    simpleSound.PlaySync();
    FileInfo readFile = new FileInfo(finalFileName);
    string finalDestination = finalDirectory + "/" + readFile.Name;
    readFile.MoveTo(finalDestination);
}
catch (Exception e)
{
    string errmsg = e.Message;
    return false;
}
finalFileName = "";
tmpFileName = "";
spVoice = null; 
```

# gem - 在 Ubuntu 12.10 中安装 Nokogiri (v.1.5.0.) Gem

> ID：13085404
> 
> 赞同：2
> 
> 时间：2012-10-26T10:43:39.547
> 
> 标签：gem, nokogiri, ubuntu-12.10

我正在尝试在 Ubuntu 12.10 上安装 foodcritic gem。它可以在 Ubuntu 12.04 中成功安装。我已经安装了要求：*libxslt-dev*，*libxml2-dev*，*ruby​​1.9.3*和*制作*包。但是当我现在尝试

```
sudo gem install foodcritic 
```

我收到以下错误：

```
compiling xml_xpath_context.c
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:
xml_xpath_context.c:184:3: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [xml_xpath_context.o] Error 1

Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/nokogiri-1.5.0 for inspection.
Results logged to /usr/lib/ruby/gems/1.9.1/gems/nokogiri-1.5.0/ext/nokogiri/gem_make.out 
```

Nokogiri-1.5.0 gem 是 foodcritic 的要求，它的安装失败了。如何安装 foodcritic？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:14:49.020

`-Werror=format-security`nokogiri-1.5.4 内置了对 Ubuntu 12.10（或任何使用 Debian 的系统）的支持。我建议安装最新的（目前是 1.5.5）。它应该与 1.5.0 兼容，除了更多已修复的错误 :) 有关更多信息，请参阅[更改日志](http://nokogiri.org/CHANGELOG_rdoc.html)。

`foodcritic`由于 1.5.3 中的段错误（根据*其* [changelog](https://github.com/acrmp/foodcritic/blob/master/CHANGELOG.md) ） ，看起来将版本锁定为 1.5.0但 1.5.4 中的修复之一修复了段错误，因此您可能想要修改 gem 以要求`~> 1.5.4`和如果它作品，联系gem的作者。

# java - 什么是最好的构造函数

> ID：13085411
> 
> 赞同：7
> 
> 时间：2012-10-26T10:44:34.020
> 
> 标签：java, oop, constructor

考虑我们有两个类`Line`，`Point`哪个类 Line 使用`Point`如下类：

```
public class Point {
   private int x;
   private int y;

   public Point(int x, int y) {
      this.x = x;
      this.y = y;
   }
} 
```

和

```
public Class Line
{
   private Point start;
   private Point end;
   ...
} 
```

我想知道由于 OOP 原则，下面哪些构造函数更适合 Line 类？

```
public Line(Point start, Point end)
{
   this.start = start;
   this.end = end;
} 
```

或者

```
public Line(int startX, int startY, int endX, int endY)
{
   start = new Point(startX, startY);
   end = new Point(endX, endY);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T10:45:53.437

绝对是第一个。它更高级，意图更清晰，更简洁，并且在对 Point 类的更改方面更易于维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:47:08.820

我认为创建实例`Points`然后将其传递给构造函数会更好，而不是让构造函数多做一点工作。

所以，你应该选择第一个。这样，构造函数只需要使用传递的引用来初始化引用，而不是创建自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:48:42.137

您可以同时使用它们，但如果您需要[组合](http://en.wikipedia.org/wiki/Object_composition)关联，则只需使用第二个。

# excel - 如何声明全局变量以访问 vba 中的其他函数？

> ID：13085413
> 
> 赞同：0
> 
> 时间：2012-10-26T10:44:47.237
> 
> 标签：excel, vba

我在浏览按钮事件中有浏览按钮变量和编码。现在我必须在另一个按钮事件中访问这些变量。如何在 vba 中声明？

```
private sub commandbutton1_click()
Dim someFileName As Variant
Dim folderName As String
Dim i As Integer
Const STRING_NOT_FOUND As Integer = 0

'select a file using a dialog and get the full name with path included
 someFileName = Application.GetOpenFilename("Text Files (*.txt), *.txt")

 If someFileName <> False Then

'strip off the folder path
folderName = vbNullString
i = 1

While STRING_NOT_FOUND < i
    i = InStr(1, someFileName, "\", vbTextCompare)  'returns position of the first       backslash "\"
    If i <> STRING_NOT_FOUND Then
        folderName = folderName & Left(someFileName, i)
        someFileName = Right(someFileName, Len(someFileName) - i)
    Else 'no backslash was found... we are done
        GetAFileName = someFileName

    End If
Wend

Else
GetAFileName = vbNullString
End If
end sub

private sub commandbutton2_click() 
```

我必须在这里访问 GetAFileName 变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:53:54.340

这将是您必须使用的结构：

```
Option Explicit
private GetAFileName as string

private sub commandbutton1_click()
  Dim some As Variant
  some = "test2"
  GetAFileName = some
end sub

private sub commandbutton2_click()
  MsgBox GetAFileName
end sub 
```

你必须`GetAFileName`在你的函数之外定义它，才能从它们两个访问它。

顺便说一句-您应该使用`option explicit`以确保每个变量在某处都有明确的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:53:41.823

使用`enter code here`全局 VARNAME

示例：'运行此函数“aaa”并显示带有标题“1”的消息框

```
Global A
Function aaa()
    A = 1
    Call BBB
End Function

Function BBB()
    MsgBox (A)
End Function 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:49:47.117

```
Option Compare Database
Option Explicit

Public Type BROWSEINFO
hwndOwner As Long
pidlRoot As Long
pszDisplayName As String
pszTitle As String
ulFlags As Long
lpfn As Long
lParam As Long
iImage As Long
End Type

Const MAX_PATH As Long = 260
Const dhcErrorExtendedError = 1208&
Const dhcNoError = 0& 
```

'指定根目录以通过常量浏览文件夹'您还可以通过常量为可搜索文件夹和选项指定值。

```
Const dhcCSIdlDesktop = &H0
Const dhcCSIdlPrograms = &H2
Const dhcCSIdlControlPanel = &H3
Const dhcCSIdlInstalledPrinters = &H4
Const dhcCSIdlPersonal = &H5
Const dhcCSIdlFavorites = &H6
Const dhcCSIdlStartupPmGroup = &H7
Const dhcCSIdlRecentDocDir = &H8
Const dhcCSIdlSendToItemsDir = &H9
Const dhcCSIdlRecycleBin = &HA
Const dhcCSIdlStartMenu = &HB
Const dhcCSIdlDesktopDirectory = &H10
Const dhcCSIdlMyComputer = &H11
Const dhcCSIdlNetworkNeighborhood = &H12
Const dhcCSIdlNetHoodFileSystemDir = &H13
Const dhcCSIdlFonts = &H14
Const dhcCSIdlTemplates = &H15 
```

'用于限制 BrowseForFolder 对话框选择的常量

```
Const dhcBifReturnAll = &H0
Const dhcBifReturnOnlyFileSystemDirs = &H1
Const dhcBifDontGoBelowDomain = &H2
Const dhcBifIncludeStatusText = &H4
Const dhcBifSystemAncestors = &H8
Const dhcBifBrowseForComputer = &H1000
Const dhcBifBrowseForPrinter = &H2000 
```

'...您可以从集成的 API 查看器中获取更多这些值以获取常量规范，或者访问 AllPai.net 并查看他们的示例。

```
Public Declare Function SHBrowseForFolder Lib "shell32.dll" (ByRef lpbi As BROWSEINFO) As Long 
```

'更正

```
Public Declare Function SHGetSpecialFolderLocation Lib "shell32.dll" _
(ByVal hwndOwner As Long, ByVal nFolder As Long, ByRef pidl As Long) As Long

Public Declare Function SHGetPathFromIDList Lib "shell32" (ByVal pidList As Long, ByVal lpBuffer As String) As Long

 Public Function BrowseForFolder(ByVal lngCSIDL As Long, _
 ByVal lngBiFlags As Long, _
 strFolder As String, _
 Optional ByVal hWnd As Long = 0, _
 Optional pszTitle As String = "Select Folder") As Long

Dim usrBrws As BROWSEINFO
Dim lngReturn As Long
Dim lngIDL As Long

If SHGetSpecialFolderLocation(hWnd, lngCSIDL, lngIDL) = 0 Then 
```

'在这里设置浏览结构

```
With usrBrws
   .hwndOwner = hWnd
   .pidlRoot = lngIDL
   .pszDisplayName = String$(MAX_PATH, vbNullChar)
   .pszTitle = pszTitle
   .ulFlags = lngBiFlags
End With 
```

'打开对话框

```
 lngIDL = SHBrowseForFolder(usrBrws)

 If lngIDL = 0 Then Exit Function 
```

'如果成功

```
 If lngIDL Then strFolder = String$(MAX_PATH, vbNullChar)

   'resolve the long value form the lngIDL to a real path

   If SHGetPathFromIDList(lngIDL, strFolder) Then
       strFolder = Left(strFolder, InStr(1, strFolder, vbNullChar))
   lngReturn = dhcNoError 'to show there is no error.
   Else
       'nothing real is available.
       'return a virtual selection
       strFolder = Left(usrBrws.pszDisplayName, InStr(1, usrBrws.pszDisplayName, vbNullChar))
    lngReturn = dhcNoError 'to show there is no error.
    End If
Else
 lngReturn = dhcErrorExtendedError 'something went wrong
End If

BrowseForFolder = lngReturn

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T14:38:59.770

```
Private Sub Command9_Click()
Call BrowseForFolder(dhcCSIdlDesktop, dhcBifReturnOnlyFileSystemDirs, _
STRPATH2, pszTitle:="Select a folder:")
If STRPATH2 <> "" Then
STRPATH2 = Left(STRPATH2, Len(STRPATH2) - 1)
Text7.Value = STRPATH2
'DoCmd.Close acForm, "frm_generate_report", acSaveNo
'DoCmd.OpenForm "frm_generate_report", acNormal
End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T13:53:00.237

```
Sub hth() 

With Application.FileDialog(msoFileDialogFolderPicker) 
    .AllowMultiSelect = False 
    .Show 

    If .SelectedItems.Count > 0 Then 
txt2.setfocus
        txt2.Text = .SelectedItems(1) 
    End If 

End With 

End Sub 
```

# css - Css3pie圆角在IE8中不起作用：after

> ID：13085414
> 
> 赞同：0
> 
> 时间：2012-10-26T10:44:49.630
> 
> 标签：css, pseudo-element, css3pie

如果我使用 :after 元素，我的圆角似乎在 ie8 中不起作用，但在 ie7 中起作用：

```
.readmore:after {
width:17px;
height:17px;
margin-left:5px;
display:inline-block;

font-family: 'bridge';
color:#e21e36;
content:'E';
text-align:center;
line-height:19px;
font-size:15px;

border: 1px solid #fff;

-webkit-border-radius: 9px;
   -moz-border-radius: 9px;
        border-radius: 9px;
          behavior: url('http://fileserver/bridge/PIE.htc');
} 
```

如何在 ie8 中启用此功能？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:48:59.043

尝试使用 pie 语法。

```
-pie-border-radius: 9px; 
```

尝试加载相对于您的 CSS 文档位置的饼图，即

```
behavior: url(/your/path/theme/inc/PIE.htc); 
```

**编辑**：

PIE.htc 请求应以 mime 类型“text/x-component”响应 - 否则 IE 不会触及该行为。也许您的问题与提供正确的内容类型有关，请参阅此以获取更多信息：

[http://css3pie.com/documentation/known-issues/](http://css3pie.com/documentation/known-issues/)

# c# - 获取从另一个表单中选择的项目

> ID：13085416
> 
> 赞同：0
> 
> 时间：2012-10-26T10:45:00.327
> 
> 标签：c#, winforms

![在此处输入图像描述](../Images/986e8783105718fe73870c0acb33d4c0.png)您好我有一个 Windows 窗体应用程序。我有一个文本框。我想实现一个功能，比如当用户单击文本框时，应该向用户提供一个列表，然后从列表中选择的项目应该填充到文本框中。如果文本框以外的某些其他控件被聚焦，则该列表不可用。这样做的更好方法是什么？我应该以与文本框相同的形式实现列表，还是应该为列表使用另一种形式？

* * *

> 我想实现一个类似 Tally 会计软件的功能。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:52:15.563

制作一个包含[listView的](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)[面板](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)

当您使用面板时，您可以更改[Visible](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)属性以隐藏其中的所有内容。

```
panel1.Visible = true; //visible
panel1.Visible = false; //invisible 
```

现在您可以说：[单击文本框](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.click%28v=vs.71%29.aspx)时，显示列表：

```
private void textbox1_Click(object sender, EventArgs e)
{
    panel1.Visible = true;
} 
```

现在，当表单获得焦点时，您可以隐藏列表：

```
private void form1_Click(object sender, EventArgs e)
{
    panel1.Visible = false;
} 
```

当列表的选定[项目更改](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.itemselectionchanged.aspx)设置文本框的文本时：

```
private void ListView1_ItemSelectionChanged(Object sender, ListViewItemSelectionChangedEventArgs e)
{
    foreach ( ListViewItem item in ListView1.SelectedItems)
    {
        textbox1.Text = item.SubItems[1].Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:51:17.967

您可以为此使用文本框控件的一些事件。

您可以使用 Enter 和 Leave 来控制列表的 .Visible 或 .Enabled 属性。

使用一个列表并使用进入和离开动态填充。您将需要一个标记来指示您正在操作的文本框。

例子

```
 TextBox activeText;
    private void txtBox1_Enter(object sender, EventArgs e)
    {
          lstMyList.dataSource = list1Data;
          activeText = (TextBox)sender;

    }

    private void lstMyList_SelectedValueChanged(object sender, EventArgs e)
    {
         ListBox myList = (ListBox)sender; 
         activeText.Text = myList.SelectedValue.ToString();

    } 
```

也许是这样的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:12:50.527

在我看来，使用单独的表格，并在新表格中显示所有列表。单击文本框，您需要显示新表单。

对于获取选定的项目有很多方法

1.  将 LIST 参数发送到新表单（构造函数）
2.  表单关闭时获取新表单的方法
3.  静态全局变量

方法1。

```
FORM2 frm = new FORM2(LIST<string> items)
frm.ShowDailog();
textBox1.text = add items from  items 
```

方法2。

```
FORM2 frm = new FORM2()
if(frm.ShowDailog() == DialogResults.Ok)
{
 textBox1.text = frm.GetSelectedItems();
} 
```

# azure - 在我的 blob 中找不到 wad-iis-failedreqlogfiles

> ID：13085417
> 
> 赞同：1
> 
> 时间：2012-10-26T10:45:02.103
> 
> 标签：azure, azure-diagnostics

### 我用这个`web.config`：

```
 <traceAreas>
        <add provider="ASP" verbosity="Verbose" />
        <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
        <add provider="ISAPI Extension" verbosity="Verbose" />
<add provider="WWW Server" areas="Security" verbosity="Verbose" />
      </traceAreas>
      <failureDefinitions statusCodes="200-999" /> 
```

### 而在`webrole.cs`

```
public override bool OnStart()
    {
        //Get Default Config
        DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();
//IIS Logs
        config.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
        Trace.WriteLine("WAD Monitor started", "Information");

  DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config);                   

RoleEnvironment.Changing += RoleEnvironmentChanging;
        return base.OnStart();
} 
```

我可以得到`wad-iis-logsfiles`blob，但我无法`wad-iis-failedreqlogfiles`在我的模拟器上得到 blob 为什么自 200-999 以来包含所有请求！并且应该有一个日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:46:08.020

好吧，我所做的是在 WebRole 文件中设置我的设置，我添加到我的 web.config 的代码就是这个配置

```
 <system.diagnostics>
        <trace>
            <listeners>
                <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                    name="AzureDiagnostics">
                    <filter type="" />
                </add>
            </listeners>
        </trace>
   </system.diagnostics>

   <system.webServer>
        <modules runAllManagedModulesForAllRequests="true" />
        <tracing>
            <traceFailedRequests>
                <add path="*">
                    <traceAreas>
                        <add provider="ASP" verbosity="Verbose" />
                        <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
                        <add provider="ISAPI Extension" verbosity="Verbose" />
                        <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression,Cache,RequestNotifications,Module" verbosity="Verbose" />
                    </traceAreas>
                    <failureDefinitions verbosity="Warning" statusCodes="400-599" />
                </add>
            </traceFailedRequests>
        </tracing>
    </system.webServer> 
```

然后我用这个配置实现方法 Onstart 。

```
 public override bool OnStart()
            {
                String wadConnectionString = "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString";

                CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

                RoleInstanceDiagnosticManager roleInstanceDiagnosticManager = cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
                        RoleEnvironment.DeploymentId,
                        RoleEnvironment.CurrentRoleInstance.Role.Name,
                        RoleEnvironment.CurrentRoleInstance.Id);

                DiagnosticMonitorConfiguration config = roleInstanceDiagnosticManager.GetCurrentConfiguration();

                //Add Events
                config.WindowsEventLog.DataSources.Add("System!*");
                config.WindowsEventLog.DataSources.Add("Application!*");
                config.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Error;
                config.WindowsEventLog.ScheduledTransferPeriod =TimeSpan.FromSeconds(15.0);
                config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
                config.Logs.ScheduledTransferPeriod = TimeSpan.FromSeconds(15.0);

                //transfer the IIS and IIS Failed Request Logs
                config.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1.0);

                roleInstanceDiagnosticManager.SetCurrentConfiguration(config);

                return base.OnStart();
             } 
```

我还建议您检查您的 WerRole 设置中的 ConnectionString，它应该如下所示：

"DefaultEndpointsProtocol=http;AccountName=myAccount;AccountKey=8zTMPlQ8N76cEUNGLYhIvPf8lDmmTnCm7BICX/xtPmdr9vN7elOvZS5N2njtg+tbStoCoe30doN0sCrE1LHcsd=="

或者

“UseDevelopmentStorage=true”

如果你想在你的开发环境中工作

您也可以查看此站点以获取更多详细信息

[http://robindotnet.wordpress.com/2011/02/16/azure-toolssdk-1-3-and-iis-logging/](http://robindotnet.wordpress.com/2011/02/16/azure-toolssdk-1-3-and-iis-logging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:11:48.247

终于我找到了答案！这是因为 IIS applicationHost 自动禁用跟踪日志文件。当我将此代码添加到 webrole.cs 并输入无效的网址时，它可以工作！

```
using (ServerManager serverManager = new ServerManager())
        {
            Configuration iisConfig = serverManager.GetApplicationHostConfiguration();

            ConfigurationSection sitesSection = iisConfig.GetSection("system.applicationHost/sites");

            ConfigurationElement siteDefaultsElement = sitesSection.GetChildElement("siteDefaults");

            ConfigurationElement logFileElement = siteDefaultsElement.GetChildElement("logFile");
            logFileElement["enabled"] = true;

            serverManager.CommitChanges();
        } 
```

# windows-installer - 用于检测当前安装的 Excel 版本的 MSI 启动条件中的问题

> ID：13085421
> 
> 赞同：0
> 
> 时间：2012-10-26T10:45:27.237
> 
> 标签：windows-installer

我有一个用于安装 Excel 插件的 MSI。

到目前为止，此 MSI 已在许多机器上正常工作（运行 Windows 7、Windows Vista 或 Windows XP 的 64 位和 32 位机器），但最近一个用户的启动条件错误地失败了。

MSI 是在 32 位 Windows XP 机器上使用 Visual Studio 2010 安装程序项目准备的。

用户正在尝试将其安装在安装了 Excel 2007 SP2（32 位）的 Windows 7 64 位计算机上。

启动条件是确定当前安装的 Excel 版本。为了这：

1.  我有一个带有以下参数的注册表搜索操作

    ```
    Property: EXCEL
    RegKeY: Software\Classes\Excel.Application\CurVer
    Root: vsdrrHKLM
    Value: 
    ```

2.  发射条件是`EXCEL = "Excel.Application.12" OR EXCEL = "Excel.Application.14"`

在用户的机器上，我已经确认：

1.  'HKLM\Software\Classes\Excel.Application\CurVer' 的注册表值为 'Excel.Application.12'
2.  msi 日志表明该值已正确读取

日志如下所示：

```
Action 15:42:58: ProgressForm. Dialog created
Action ended 15:42:58: ProgressForm. Return value 1.
MSI (c) (AC:28) [15:42:58:401]: Doing action: ExecuteAction
Action 15:42:58: ExecuteAction. 
Action start 15:42:58: ExecuteAction.
MSI (c) (AC:28) [15:42:58:410]: PROPERTY CHANGE: Adding SECONDSEQUENCE property. Its value is '1'.
MSI (c) (AC:28) [15:42:58:413]: Grabbed execution mutex.
MSI (c) (AC:28) [15:42:58:416]: Incrementing counter to disable shutdown. Counter after increment: 0
MSI (c) (AC:28) [15:42:58:419]: Switching to server: TARGETDIR="C:\Program Files (x86)\MySoftware\" _F6F7C451BA1841F0B59F5BF6C3620B2B="C:\Program Files (x86)\MySoftware\Data\" _B87F203625174B9894BB9AAD7BBA6EAB="C:\Program Files (x86)\MySoftware\Bin\" _6448E393C853494F8BBDC9D2FA0DA440="C:\ProgramData\Microsoft\Windows\Start Menu\Programs\MyCompany\" _BA6D696DE1324CDF936304F630FC10AD="C:\ProgramData\Microsoft\Windows\Start Menu\Programs\MyCompany\MySoftware\" _77B6D7C007D440959AF59826EEB28541="C:\Program Files (x86)\MySoftware\Data\LOGS\" _4AE2CF68991D4AADBC1984A3B6A685D2="C:\Program Files (x86)\MySoftware\Data\DB\" _0E7ED596C9F747DB961B97EBE7D8CA47="C:\Program Files (x86)\MySoftware\Doc\" EXCEL2007="C:\Program Files (x86)\Microsoft Office\Office12\" EXCEL="Excel.Application.12" VSDNETURLMSG="This setup requires the .NET Framework version 2.0\.  Please install the .NET Framework and run this setup again.  The .NET Fram
MSI (s) (74:78) [15:42:58:430]: Running installation inside multi-package transaction H:\MySoftware\MySoftware.msi
MSI (s) (74:78) [15:42:58:433]: Grabbed execution mutex.
MSI (s) (74:F8) [15:42:58:439]: Resetting cached policy values
MSI (s) (74:F8) [15:42:58:442]: Machine policy value 'Debug' is 0
MSI (s) (74:F8) [15:42:58:444]: ******* RunEngine:
           ******* Product: H:\MySoftware\MySoftware.msi
           ******* Action: INSTALL
           ******* CommandLine: **********
//A lot of other stuff

MSI (s) (74:F8) [15:43:10:824]: Doing action: AppSearch
Action 15:43:10: AppSearch. Searching for installed applications
Action start 15:43:10: AppSearch.
MSI (s) (74:F8) [15:43:10:838]: Skipping AppSearch action: already done on client side
Action ended 15:43:10: AppSearch. Return value 0.
MSI (s) (74:F8) [15:43:10:844]: Doing action: FindRelatedProducts
Action 15:43:10: FindRelatedProducts. Searching for related applications
Action start 15:43:10: FindRelatedProducts.
MSI (s) (74:F8) [15:43:10:855]: Skipping FindRelatedProducts action: already done on client side
Action ended 15:43:10: FindRelatedProducts. Return value 0.
MSI (s) (74:F8) [15:43:10:861]: Skipping action: ERRCA_CANCELNEWERVERSION (condition is false)
MSI (s) (74:F8) [15:43:10:866]: Doing action: VSDCA_VsdLaunchConditions
Action 15:43:10: VSDCA_VsdLaunchConditions. 
Action start 15:43:10: VSDCA_VsdLaunchConditions.
MSI (s) (74:F8) [15:43:10:890]: Creating MSIHANDLE (27) of type 790542 for thread 4344
MSI (s) (74:E0) [15:43:10:893]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI9C72.tmp, Entrypoint: VsdLaunchConditions
MSI (s) (74!34) [15:43:11:441]: Creating MSIHANDLE (28) of type 790531 for thread 6708
INFO   : [10/25/2012 15:43:11:445] [VsdLaunchConditions                     ]: Custom Action is starting...
INFO   : [10/25/2012 15:43:11:451] [VsdLaunchConditions                     ]: CoInitializeEx - COM initialization Apartment Threaded...
INFO   : [10/25/2012 15:43:11:456] [VsdLaunchConditions                     ]: Enumerating table using SQL statement: 'SELECT * FROM `_VsdLaunchCondition`'
INFO   : [10/25/2012 15:43:11:460] [VsdLaunchConditions                     ]: Calling MsiGetActiveDatabase...
MSI (s) (74!34) [15:43:11:464]: Creating MSIHANDLE (29) of type 790541 for thread 6708
INFO   : [10/25/2012 15:43:11:467] [VsdLaunchConditions                     ]: MsiDatabaseOpenViewW - Prepare Database to view table...
MSI (s) (74!34) [15:43:11:471]: Creating MSIHANDLE (30) of type 790540 for thread 6708
INFO   : [10/25/2012 15:43:11:474] [VsdLaunchConditions                     ]: TMsiViewExecute - Open Database view on table...
MSI (s) (74!34) [15:43:11:478]: Creating MSIHANDLE (31) of type 790531 for thread 6708
INFO   : [10/25/2012 15:43:11:482] [VsdLaunchConditions                     ]: Checking a launch condition...
INFO   : [10/25/2012 15:43:11:485] [VsdLaunchConditions                     ]: Getting the condition to evaluate...
INFO   : [10/25/2012 15:43:11:489] [VsdLaunchConditions                     ]: MsiRecordGetStringW - Fetching value...
INFO   : [10/25/2012 15:43:11:492] [VsdLaunchConditions                     ]: MsiRecordGetStringW - Getting value from column '1'...
INFO   : [10/25/2012 15:43:11:497] [VsdLaunchConditions                     ]: Evaluating condition 'VSDFXAvailable'...
INFO   : [10/25/2012 15:43:11:500] [VsdLaunchConditions                     ]: RESULT:  Condition is true. Nothing more to do.
MSI (s) (74!34) [15:43:11:504]: Closing MSIHANDLE (31) of type 790531 for thread 6708
MSI (s) (74!34) [15:43:11:508]: Closing MSIHANDLE (30) of type 790540 for thread 6708
INFO   : [10/25/2012 15:43:11:512] [VsdLaunchConditions                     ]: Custom Action succeeded.
INFO   : [10/25/2012 15:43:11:518] [VsdLaunchConditions                     ]: Custom Action completed with return code: '0'
MSI (s) (74!34) [15:43:11:522]: Closing MSIHANDLE (29) of type 790541 for thread 6708
MSI (s) (74!34) [15:43:11:525]: Closing MSIHANDLE (28) of type 790531 for thread 6708
MSI (s) (74:E0) [15:43:11:530]: Closing MSIHANDLE (27) of type 790542 for thread 4344
Action ended 15:43:11: VSDCA_VsdLaunchConditions. Return value 1.
MSI (s) (74:F8) [15:43:11:538]: Doing action: LaunchConditions
Action 15:43:11: LaunchConditions. Evaluating launch conditions
//Few more lines

Action ended 15:43:13: LaunchConditions. Return value 3.
Action ended 15:43:13: INSTALL. Return value 3.
//some other traces

MSI (c) (AC:04) [15:43:16:896]: Custom Action Manager thread ending.
Property(C): UpgradeCode = {9FC0F443-EECC-4C3B-939E-D033349C22BA}
Property(C): TARGETDIR = C:\Program Files (x86)\MySoftware
Property(C): _F6F7C451BA1841F0B59F5BF6C3620B2B = C:\Program Files (x86)\MySoftware\Data\
Property(C): _B87F203625174B9894BB9AAD7BBA6EAB = C:\Program Files (x86)\MySoftware\Bin\
Property(C): ProgramMenuFolder = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\
Property(C): _6448E393C853494F8BBDC9D2FA0DA440 = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\MySoftware\
Property(C): _BA6D696DE1324CDF936304F630FC10AD = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\MySoftware\
Property(C): WindowsFolder = C:\Windows\
Property(C): SystemFolder = C:\Windows\SysWOW64\
Property(C): SourceDir = H:\MySoftware\
Property(C): _77B6D7C007D440959AF59826EEB28541 = C:\Program Files (x86)\MySoftware\Data\LOGS\
Property(C): _4AE2CF68991D4AADBC1984A3B6A685D2 = C:\Program Files (x86)\MySoftware\Data\DB\
Property(C): _0E7ED596C9F747DB961B97EBE7D8CA47 = C:\Program Files (x86)\MySoftware\Doc\
Property(C): VSDFXAvailable = TRUE
Property(C): VSDFrameworkVersion = v2.0
Property(C): VSDAllowLaterFrameworkVersions = False
Property(C): EXCEL2007 = C:\Program Files (x86)\Microsoft Office\Office12\
Property(C): EXCEL = Excel.Application.12
Property(C): ProductName = MySoftware
Property(C): ProductCode = {04835711-7FDB-4B00-9A39-6C6776D9900A}
Property(C): ProductVersion = 1.31.2012
Property(C): Manufacturer = MyCompany
Property(C): ARPHELPLINK = http://www.MyCompany.com/
Property(C): ARPCONTACT = MyCompany
Property(C): ARPURLINFOABOUT = http://www.MyCompany.com/
Property(C): ProductLanguage = 1033
Property(C): SecureCustomProperties = PREVIOUSVERSIONSINSTALLED;NEWERPRODUCTFOUND
Property(C): RedirectedDllSupport = 2
Property(C): VersionNT = 601
Property(C): VSDNETURLMSG = This setup requires the .NET Framework version 2.0\.  Please install the .NET Framework and run this setup again.  The .NET Framework can be obtained from the web.  Would you like to do this now?
Property(C): VSDIISMSG = This setup requires Internet Information Server 5.1 or higher and Windows XP or higher.  This setup cannot be installed on Windows 2000\.  Please install Internet Information Server or a newer operating system and run this setup again.
Property(C): VSDUIANDADVERTISED = This advertised application will not be installed because it might be unsafe. Contact your administrator to change the installation user interface option of the package to basic.
Property(C): VSDNETMSG = This setup requires the .NET Framework version 2.0\.  Please install the .NET Framework and run this setup again.
Property(C): VSDINVALIDURLMSG = The specified path '[2]' is unavailable. The Internet Information Server might not be running or the path exists and is redirected to another machine. Please check the status of this virtual directory in the Internet Services Manager.
Property(C): VSDVERSIONMSG = Unable to install because a newer version of this product is already installed.
Property(C): FolderForm_AllUsers = ALL
Property(C): FolderForm_AllUsersVisible = 1
Property(C): DefaultUIFont = VsdDefaultUIFont.524F4245_5254_5341_4C45_534153783400
Property(C): MaintenanceForm_Action = Repair
Property(C): AdminMaintenanceForm_Action = Repair
Property(C): ErrorDialog = ErrorDialog
Property(C): SFF_UpFldrBtn = UpFldrBtn
Property(C): SFF_NewFldrBtn = NewFldrBtn
Property(C): WelcomeForm_NextArgs = FolderForm
Property(C): FolderForm_PrevArgs = WelcomeForm
Property(C): FolderForm_NextArgs = ConfirmInstallForm
Property(C): ConfirmInstallForm_PrevArgs = FolderForm
Property(C): AdminWelcomeForm_NextArgs = AdminFolderForm
Property(C): AdminFolderForm_PrevArgs = AdminWelcomeForm
Property(C): AdminFolderForm_NextArgs = AdminConfirmInstallForm
Property(C): AdminConfirmInstallForm_PrevArgs = AdminFolderForm
Property(C): WindowsFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 = C:\Windows\
Property(C): SystemFolder_x86_VC.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 = C:\Windows\SysWOW64\
Property(C): ALLUSERS = 2
Property(C): DirectoryTable100_x86.F1DD796A_B984_3DCA_A68D_6B352BDC86F3 = DirectoryTable
Property(C): MsiLogFileLocation = H:\MySoftware\.\msilog.txt
Property(C): PackageCode = {ABF9C77A-61D2-49AF-BD7F-F55CE2567525}
Property(C): ProductState = -1
Property(C): PackagecodeChanging = 1
Property(C): RestrictedUserControl = 1
Property(C): CURRENTDIRECTORY = H:\MySoftware
Property(C): CLIENTUILEVEL = 0
Property(C): CLIENTPROCESSID = 7340
Property(C): VersionDatabase = 200
Property(C): VersionMsi = 5.00
Property(C): VersionNT64 = 601
Property(C): WindowsBuild = 7601
Property(C): ServicePackLevel = 1
Property(C): ServicePackLevelMinor = 0
Property(C): MsiNTProductType = 1
Property(C): WindowsVolume = C:\
Property(C): System64Folder = C:\Windows\system32\
Property(C): RemoteAdminTS = 1
Property(C): TempFolder = C:\Users\U060597\AppData\Local\Temp\
Property(C): ProgramFilesFolder = C:\Program Files (x86)\
Property(C): CommonFilesFolder = C:\Program Files (x86)\Common Files\
Property(C): ProgramFiles64Folder = C:\Program Files\
Property(C): CommonFiles64Folder = C:\Program Files\Common Files\
Property(C): AppDataFolder = C:\Users\U060597\AppData\Roaming\
Property(C): FavoritesFolder = C:\Users\U060597\Favorites\
Property(C): NetHoodFolder = C:\Users\U060597\AppData\Roaming\Microsoft\Windows\Network Shortcuts\
Property(C): PersonalFolder = C:\
Property(C): PrintHoodFolder = C:\Users\U060597\AppData\Roaming\Microsoft\Windows\Printer Shortcuts\
Property(C): RecentFolder = C:\Users\U060597\AppData\Roaming\Microsoft\Windows\Recent\
Property(C): SendToFolder = C:\Users\U060597\AppData\Roaming\Microsoft\Windows\SendTo\
Property(C): TemplateFolder = C:\ProgramData\Microsoft\Windows\Templates\
Property(C): CommonAppDataFolder = C:\ProgramData\
Property(C): LocalAppDataFolder = C:\Users\U060597\AppData\Local\
Property(C): MyPicturesFolder = C:\My Pictures\
Property(C): AdminToolsFolder = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Administrative Tools\
Property(C): StartupFolder = C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup\
Property(C): StartMenuFolder = C:\ProgramData\Microsoft\Windows\Start Menu\
Property(C): DesktopFolder = C:\Users\Public\Desktop\
Property(C): FontsFolder = C:\Windows\Fonts\
Property(C): GPTSupport = 1
Property(C): OLEAdvtSupport = 1
Property(C): ShellAdvtSupport = 1
Property(C): MsiAMD64 = 6
Property(C): Msix64 = 6
Property(C): Intel = 6
Property(C): PhysicalMemory = 12279
Property(C): VirtualMemory = 18474
Property(C): LogonUser = u060597
Property(C): UserSID = S-1-5-21-1715567821-1004336348-725345543-486654
Property(C): UserLanguageID = 2057
Property(C): ComputerName = WR8DW1T3
Property(C): SystemLanguageID = 2057
Property(C): ScreenX = 1920
Property(C): ScreenY = 1080
Property(C): CaptionHeight = 22
Property(C): BorderTop = 1
Property(C): BorderSide = 1
Property(C): TextHeight = 16
Property(C): TextInternalLeading = 3
Property(C): ColorBits = 32
Property(C): TTCSupport = 1
Property(C): Time = 15:43:17
Property(C): Date = 25/10/2012
Property(C): MsiNetAssemblySupport = 4.0.30319.1
Property(C): MsiWin32AssemblySupport = 6.1.7601.17514
Property(C): AdminUser = 1
Property(C): MsiRunningElevated = 1
Property(C): Privileged = 1
Property(C): USERNAME = user
Property(C): COMPANYNAME = UserCompany
Property(C): DATABASE = C:\Users\U060597\AppData\Local\Temp\5c64805.msi
Property(C): OriginalDatabase = H:\MySoftware\MySoftware.msi
Property(C): SOURCEDIR = H:\MySoftware\
Property(C): VersionHandler = 5.00
Property(C): UILevel = 5
Property(C): ACTION = INSTALL
Property(C): EXECUTEACTION = INSTALL
Property(C): VSDFxConfigFile = C:\Users\U060597\AppData\Local\Temp\CFG4C2A.tmp
Property(C): ROOTDRIVE = C:\
Property(C): CostingComplete = 1
Property(C): OutOfDiskSpace = 0
Property(C): OutOfNoRbDiskSpace = 0
Property(C): PrimaryVolumeSpaceAvailable = 0
Property(C): PrimaryVolumeSpaceRequired = 0
Property(C): PrimaryVolumeSpaceRemaining = 0
Property(C): INSTALLLEVEL = 1
=== Logging stopped: 25/10/2012  15:43:17 === 
```

从上面的日志可以看出，属性“EXCEL”设置正确，但启动条件仍然失败。MSI 也以提升的权限运行。

有谁知道这里可能出了什么问题？我对部署世界相当陌生，非常感谢这方面的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:47:23.230

如果没有看到整个日志，很难说 100%，但似乎发生在我身上的事情：

1）您开始安装并通过对话框。

2) 安装程序开始安装并抛出有关 excel 的错误消息。

3) 安装程序退出。

LaunchConditions 标准操作计划用于安装 UI 序列和安装执行序列。当 UI 运行时，会触发 AppSearch 操作并设置属性。

但是，EXCEL 属性未列在 SecureCustomProperties 属性中。因此，当安装程序切换执行序列时，该值变为空。Windows 安装程序不会在执行序列中再次运行 AppSearch 操作，因此它保持为空。

但是，运行 LaunchConditions 标准操作并且表达式评估为假中止安装。

可以通过阅读整个日志文件并注意动作何时触发来证明这一理论。测试该理论的另一种方法是从提升的命令提示符运行 MSI。在这种情况下，SecureCustomProperties 不起作用，InstallUI 中设置的属性将延续到 InstallExecute 序列。

最后，应该指出的是，老实说，Visual Studio 部署项目是可怕的。以至于微软从 Visual Studio 2012 中删除了它们。我将停止在这个工具上投入更多的时间，而改用 Windows Installer XML 或 InstallShield Limited Edition。

# android - 视频未在 Webview 中显示

> ID：13085424
> 
> 赞同：3
> 
> 时间：2012-10-26T10:45:47.800
> 
> 标签：android, html, android-webview, html5-video

我有一个 Html 页面，在这个 Html 页面中，我正在显示一个视频，但是这个视频没有显示在我的应用程序的 web 视图中，而是显示在默认浏览器中，所以请告诉我问题出在哪里，下面是我的代码和视频以及 html 文件是存储在 sdcard 中，抱歉我的英语交流不好。

MainActivity.java

```
public class MainActivity extends Activity {

    WebView webPage;
    Button next;
    String rootDir = "file://" + Environment.getExternalStorageDirectory()
            + "/iR-unzip/testbook/";
    WebChromeClient webChromeClient = new WebChromeClient();
    WebViewClient webViewClient = new WebViewClient();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webPage = (WebView) findViewById(R.id.webview);
        webPage.setWebChromeClient(webChromeClient);
        webPage.setWebViewClient(new MyWebViewClient());
        webPage.getSettings().setJavaScriptEnabled(true);
        webPage.getSettings().setPluginsEnabled(true);
        webPage.getSettings().setPluginState(PluginState.ON);
        webPage.getSettings().setLoadWithOverviewMode(true);
        webPage.getSettings().setUseWideViewPort(true);

        webPage.loadUrl(rootDir + "/" + "chapter_1.html");
        next = (Button) findViewById(R.id.page_changer);
        next.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                webPage.loadUrl(rootDir + "/" + "chapter_2.html");
            }
        });

    }

    public class MyWebChromeClient extends WebChromeClient {

        @Override
        public void onShowCustomView(View view, CustomViewCallback callback) {
            // TODO Auto-generated method stub
            super.onShowCustomView(view, callback);
            if (view instanceof FrameLayout) {
                FrameLayout frame = (FrameLayout) view;
                if (frame.getFocusedChild() instanceof VideoView) {
                    VideoView video = (VideoView) frame.getFocusedChild();
                    frame.removeView(video);
                    video.start();
                }
            }

        }
    }

    public class MyWebViewClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }
} 
```

html页面：-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Chapter 1 for testBook</title>

</head>
<body>
<div style="width: 600px;margin: 0 auto;">
<div id="text"> 
<p><h4>WSDL for client access</h4>
A WSDL service description provides all the information that is required to use a web
service. The T320 version of Eclipse incorporates the Web Tools Platform (WTP),
which provides support for generating a client based on the information inside a
WSDL.
<h4>OU demo services</h4></h4>
<p>At the OU there is a small set of toy web services. These can be accessed using a
client in the same way as you tested the 'Hello' web service using Eclipse. In fact, one
of the web services hosted is a copy of the 'Hello' service.</p>
<img src="Caterpillar-Insect-Animal-Macro-HD-600x375.jpg" />

<p>Click on the 'Browse' button at the top of the box. This will take you to the dialogue box shown in Figure 11.</p>
<img src="images.jpg" />
</div>
<div>
<h3>HTML5 Video : </h3>
<video width="320" height="240" controls="controls">
  <source src="video.mp4" type="video/mp4">Your browser does not support the video tag.
</video>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:01:39.607

替换此行

```
 wb.getSettings().setPluginState(PluginState.ON); 
```

有了这个

```
 wb.getSettings().setPluginState(WebSettings.PluginState.ON); 
```

# c# - 脚本 PLSQL 不能在 c# 中执行，但在 oracle 中可以

> ID：13085431
> 
> 赞同：0
> 
> 时间：2012-10-26T10:46:37.573
> 
> 标签：c#, oraclecommand

我尝试在 C# 中执行此脚本：

```
declare

  NEW_PAP_OPERATOR_ID number;

  cursor cu_records_a_traiter is
    select *    
      from operator_dossier         d,
           pap_operator_verandering ov,
           pap_verandering          v
     where d.operator_id = ov.operator_id
     and v.cr_info = :v_cr_info;

begin

  for rec_cu in cu_records_a_traiter loop

    /* insert new record */

    INSERT INTO BOOD.PAP_OPERATOR
      (HOOFD_OF_NEVENACTIVITEIT)
    VALUES
      (rec_cu.HOOFD_OF_NEVENACTIVITEIT);

    SELECT BOOD.SEQ_PAP_OPERATOR_ID.CURRVAL
      into NEW_PAP_OPERATOR_ID
      FROM dual;

    /* update with new record*/

    UPDATE Bood.Pap_Operator_Verandering
       SET pap_operator_doel_id   = NEW_PAP_OPERATOR_ID,
           datum_wijziging        = Sysdate,
           gebruiker_wijziging_id = '-549'
     WHERE pap_operator_verandering_id = rec_cu.PAP_OPERATOR_VERANDERING_ID;
  end loop;
end; 
```

也不例外，但脚本没有运行。如果我在没有 C# 的情况下执行 sql 脚本，它可以工作。我认为 currval NEW_PAP_OPERATOR_ID 有问题 目前我在 c# 中没有什么特别之处。

C#代码：

```
try
 {
   OracleCommand command = new OracleCommand("myScript", Connection);

   command.Parameters.Add("v_cr_info", OracleDbType.VarChar, changeRequest, ParameterDirection.Input);
   command.ExecuteNonQuery();

   transaction.Commit();
 }
catch (Exception)
 {
   transaction.Rollback();
   throw;
 }
finally
 {
   Connection.Close();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:55:13.537

您没有显示 PROC 参数，也没有指定您的命令是 PROC

```
OracleCommand command = new OracleCommand("myScript", Connection);
command.CommandType = CommandType.StoredProcedure; 
```

# c++ - IXpsOMImageResource 流，读取时出现奇怪的字符

> ID：13085434
> 
> 赞同：0
> 
> 时间：2012-10-26T10:46:44.463
> 
> 标签：c++, windows, xaml, xps

我正在尝试从 IXpsOMImageResource 获取文件路径。我知道它有一个关联的流，我通过调用 GetStream() 得到它，但是当我尝试从这个流中读取时，我得到了奇怪的字符，我真的不知道它们是什么意思。

任何人都可以帮助我，告诉我我从流中读取了哪些字符。我不知道这些字符可能是文件路径，可能是序列化对象。我不知道，也找不到任何有关它的信息

最好的问候， 普热梅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T07:25:24.410

GetStream() 方法返回一个包含原始图像的流。根据 GetImageType() 方法的返回，这可以是 JPEG、PNG、TIFF 或 WDP 图像。

如果您想要一个图像文件，只需从此流中读取并写入具有适当扩展名的文件。

# java - Why opening a FileOutputStream to a binary file corrupts it?

> ID：13085439
> 
> 赞同：1
> 
> 时间：2012-10-26T10:46:55.737
> 
> 标签：java, io, file-permissions, binaryfiles, corruption

I need to check whether given binary file has write access or not. File class API has a bug and its fixed in JDK7 but I can not just upgrade to it.

Here is the link to the bug: [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6203387](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6203387)

When I open a FileOutputStream it corrupts the binary files and Explorer shows their size as zero and can not launch it. Here is the code snippet.

OS: Win7

Please help me to understand why just opening an output stream (not writing anything) corrupts a binary file. Is there any work around for this problem?

Here is the code snippet:

```
private boolean hasWriteAccess(File file) {
    FileOutputStream fos = null; 
    try {
        fos = new FileOutputStream(file);
    } catch (Exception e) {
        e.printStackTrace();
        if(fos != null) {
            try {
                fos.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T10:53:11.607

> When I open a FileOutputStream it corrupts the binary files and Explorer shows their size as zero

It doesn't *corrupt* the file - it truncates it.

If you want to open it in "append" mode, use the constructor overload which allows that:

```
fos = new FileOutputStream(file, true); 
```

Looking at your code, that's almost certainly what you want to do.

As Andrew says, you should *always* close the stream too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:54:11.040

When you use

```
new FileOutputStream(file); 
```

it will *always truncate* the file.

If you want to open the file without truncating it you can use append instead.

```
new FileOutputStream(file, true).close(); 
```

# hibernate - jpa删除查询错误：意外令牌

> ID：13085440
> 
> 赞同：2
> 
> 时间：2012-10-26T10:46:56.500
> 
> 标签：hibernate, jpa-2.0, named-query

我想删除项目列表，并为实体电子邮件定义了以下查询：

@NamedQuery(name = Email.namedQueryDeleteOldEmails, query = "DELETE FROM Email e where e.creationDate <= :creationDate")

当我执行它时，出现以下错误：2012-10-26 12:45:25,570 ERROR [SGVISTA] org.hibernate.hql.internal.ast.ErrorCounter - line 1:1: unexpected token: Email line 1:1 ：意外令牌：电子邮件

有人知道我的查询有什么问题吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:43:22.733

@NamedQuery(name ="Email.namedQueryDeleteOldEmails", query = "DELETE FROM Email e where e.creationDate <= :creationDate")

在双引号内使用命名的名称它将起作用

# mainframe - 如果生成是在步骤 2 中创建的，如何引用 GDG 生成，我在步骤 3 中引用相同

> ID：13085444
> 
> 赞同：2
> 
> 时间：2012-10-26T10:47:07.160
> 
> 标签：mainframe, jcl

我在生产中遇到了 GDG 生成问题。

在步骤 2 中创建了新一代：

```
//INP DD DSN=sample.test(+1),  
//      DISP=(,CATLG,KEEP),                     
//       SPACE=(CYL,(50,20),RLSE),               
//       DCB=(RECFM=FB,LRECL=1020,BLKSIZE=4080) 
```

STEP 3 中引用了同一代：

```
//step3 exec PGM=SORT                               
//SORTIN   DD DSN=sample.test(+1),    
//            DISP=SHR                                 
//SORTOUT  DD DSN=xxxx.yyyy,     
//            DISP=(NEW,CATLG,DELETE),                 
//            UNIT=(SYSDA,9),DCB=(RECFM=FB,LRECL=132), 
//            SPACE=(CYL,(50,20),RLSE) 
```

我给了这样的，但因 JCL 错误而失败。

任何人都可以帮助解决为什么会失败吗？

根据理论，一旦工作完成。我们必须参考第 0 版。在同一工作中，我们必须参考 +1 版本。如果我在第 3 步中更改为第 0 版，那么作业运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:18:40.787

您需要指定消息编号，IEF... INP 步骤中的默认处置是新的，因此该消息表明数据集已经存在 - 没有看到卡组中的其他步骤，很难提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T02:32:47.003

你对GDG的想法是正确的。在这种情况下，如果创建 GDG的**步骤****失败**或由于 COND / IF 语句被**跳过**或 Step2 未打开 GDG（非 SMS ???），您将收到 JCL 错误，那么 step3 将收到 JCL 错误，因为 sample.测试（+1）不存在。还有其他可能导致 JCL 错误的可能性（例如，无法分配数据集），但我认为这是最有可能的。如果列出完整的 JCL / 错误消息会更容易

有两种可能的解决方案（在大多数情况下选择**选项 1 或 2**）

1.  在 step2 之前添加**IEBGENER** step1a 以创建 GDG，这应确保创建 GDG。

2.  在第 3 步中添加条件

    //step3 exec PGM=SORT,COND=(0,NE)

3.  将 disp 更改为 DISP=(,CATLG,CATLG)，（如果步骤失败）

    //INP DD DSN=sample.test(+1),
    // DISP=(,CATLG,CATLG),

    如果您想要在作业失败时输出，请仅选择选项 2。

我会将 DISP=(,CATLG,KEEP) 更改为 DISP=(,CATLG)、DISP=(,CATLG,DELETE) 或 DISP=(,CATLG,CATLG) 之一。在过去，KEEP 允许您创建未分类的数据集。

或者 SMS 可能是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T13:41:20.400

您使用了错误的 GDG 索引。您应该使用 (0) 索引将最新添加的数据集引用到 GDG。

(+1) 表示应将新数据集添加到 GDG。

更多信息：[IBM 检索生成数据集](http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.ieab500/iea2b550197.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-12T23:24:56.277

由于关于哪个 DD 语句错误的信息有限，很难解释确切的问题。我认为您对在示例中使用 +1 有正确的想法。我不认为这是您的错误的问题。

我怀疑该错误与//INP DD 语句中第一个DD 的KEEP 异常处置有关。实际上，您要求创建一个新的 gdg 数据集，只有在第 2 步正常执行时才会对其进行编目。如果作业在步骤 2 中异常终止，则您正在向系统请求 KEEP**尚未在系统目录中注册**的 GDG 数据集。我认为 DISP=(,CATLG,CATLG) 在这种情况下将是 //INP DD 语句的更合适的编码。

通常你会在数据集已经存在并且应该保留的情况下使用 KEEP。

但是，如果您的商店使用 SMS 管理的数据集，则 KEEP 将被视为 CATLG，因为必须对所有 SMS 管理的数据集进行编目。如果是这种情况，那么此响应可能不适用于您的具体情况。从您的示例中看来，SMS 并不是这里的一个因素。

# visual-studio-2010 - 在 Silverlight 中动态创建的按钮上添加图像

> ID：13085446
> 
> 赞同：1
> 
> 时间：2012-10-26T10:47:09.547
> 
> 标签：visual-studio-2010, image, silverlight, button, media

我正在动态创建银色按钮

```
 HistoryButtton = new Button();
                HistoryButtton.Content = "History";
                HistoryButtton.Height = GetPercentageValue(TotalHeight, 8);
                HistoryButtton.Width = GetPercentageValue(TotalHeight, 15); 
```

我试过这个解决方案

```
 ImageBrush brush = new ImageBrush();
    brush.ImageSource = new BitmapImage(new Uri(@"Images/history.png", UriKind.Relative)); 
    HistoryButtton.Background = brush; 
```

但它不起作用。我也试过这个解决方案

```
 Uri uri = new Uri("/Images/history.png", UriKind.Relative);  
   BitmapImage imgSource = new BitmapImage(uri);
   Image image = new Image();
   image.Source = imgSource;
   HistoryButtton.Content = image; 
```

但是这个解决方案也不起作用。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:16:14.153

尝试将您的 Uri 第一个参数更改为这样的“/SolutionName;component/Images/history.png”

将 SolutionName 替换为您的解决方案名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T19:01:51.463

这里的问题和其他答案之一帮助我解决了同样的问题，但由于我错过了一些非常简单的事情，我仍然为此苦苦挣扎了一段时间（实际上，不止一段时间）。这是对我有用的完整代码：

```
Dim b As New Button
Dim uri As New Uri("/<project name>;component/<path to image>", UriKind.Relative)
Dim imgSource As New Imaging.BitmapImage(uri)
Dim image As New Image()
image.Source = imgSource
b.Content = image 
```

有两件事让我无法早点弄清楚这一点：

1.  `<project name>`是图像所在项目的名称，可能与代码所在的项目不同。
2.  `"component/"`是文字字符串（并且不是项目中的文件夹）。我的图像文件的“构建操作”设置为“资源”。

因此，如果您的项目名称是“MyProject”，图像名称是“MyImage.png”，并且图像位于“MyProject”中的文件夹“MyFolder”中，则传递给 Uri 构造函数的正确字符串是：

```
"/MyProject;component/MyFolder/MyImage.png" 
```

# php - 我正在尝试对 formstack api 进行 php Curl 调用，但我什么也没得到

> ID：13085453
> 
> 赞同：0
> 
> 时间：2012-10-26T10:47:29.550
> 
> 标签：php, api, curl, formstack

这是我的第一个 curls 代码之一，所以它可能有错误

我正在尝试能够调用 form/:id/submissions [https://www.formstack.com/developers/api/resources/submission#form/:id/submission_GET](https://www.formstack.com/developers/api/resources/submission#form/:id/submission_GET)

如果我加载：

> [https://www.formstack.com/api/v2/form/1311091/submission.json?oauth_token=abc&min_time=2012-09-01%2000:01:01&max_time=2012-10-27%2000:01:01](https://www.formstack.com/api/v2/form/1311091/submission.json?oauth_token=abc&min_time=2012-09-01%2000:01:01&max_time=2012-10-27%2000:01:01)

如果效果很好。

如果我尝试这段代码：

```
 <?php    
 $host = 'https://www.formstack.com/api/v2/';

  // TODO this should manage dinamics values or build an action in every method. 
  $action = 'form/1311091/submission.json';

  $url = $host . $action;

  // TODO this values will arrive like an array with values
    $postData['oauth_token']= 'abc';
    $postData['min_time'] ='2012-09-01 00:01:01';
    $postData['max_time'] ='2012-10-27 00:01:01';

// TODO make a method with this action
function getElements($postData)
{

    $elements = array();  
    foreach ($postData as $name=>$value) {  
       $elements[] = "{$name}=".urlencode($value);  
    } 
}

  $curl = curl_init();
  curl_setopt($curl, CURLOPT_URL, $url);
  curl_setopt($curl, CURLOPT_HTTPGET, true);
  curl_setopt($curl, CURLOPT_POSTFIELDS, $elements);
  $result =  curl_exec($curl) ;
  curl_close($curl);
  var_dump($result);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:50:41.457

您需要设置：

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
```

如果您希望取回数据，作为 curl_exec() 之前的一个选项。

> CURLOPT_RETURNTRANSFER: TRUE 将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

另外，您为什么要尝试通过 GET 请求发送 POST 数据？

> CURLOPT_POSTFIELDS：要在 HTTP“POST”操作中发布的完整数据。

此外，对于调试，您应该检查：

```
echo curl_error ( $curl ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:46:43.773

这对我有用：

```
<?php
$host = 'https://www.formstack.com/api/v2/';
$action = 'form/1311091/submission.json';

$url = $host . $action;

$postData = array();
$postData['oauth_token']= 'REPLACE_WITH_TOKEN';
$postData['min_time'] ='2012-09-01 00:01:01';
$postData['max_time'] ='2012-10-27 00:01:01';

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);
$result =  curl_exec($curl);
curl_close($curl);

var_dump($result);
?> 
```

# jboss - Jboss 与 WebSphere 中的相互验证

> ID：13085456
> 
> 赞同：1
> 
> 时间：2012-10-26T10:47:41.130
> 
> 标签：jboss, websphere, ssl-certificate

我正在研究 Jboss 5 和 WAS 7。我能够按照此文档 [https://community.jboss.org/wiki/SSLSetup/在 Jboss 上通过相互身份验证运行我的应用程序](https://community.jboss.org/wiki/SSLSetup/)

按照上面的文档，我创建了注入 Jboss 服务器的 server.keystore 和 server.truststore 文件，一切正常。

现在，我想在 WAS 上通过 Mutual Auth 运行相同的应用程序。在 WAS 上，通过导航到指定信任库和密钥库

> 安全 > SSL 证书和密钥管理 > SSL 配置 > 新建 > 密钥库和证书

但是我没有看到任何与 .keystore 和 .truststore 相关的类型。（如下所示） ![在此处输入图像描述](../Images/70d58e4505c42edd9c97d467e486aa1e.png)

我的问题 -**可以在 WAS 中使用的 .keystore 和 .truststore 的等价物是什么，**或者**在 WAS 服务器上设置基于浏览器的相互身份验证的方法是什么**。我正在使用 WAS 7.0.0.21。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:30:25.410

密钥库和信任库在 WebSphere 中是相同的格式。您选择文件格式，但其中任何一种格式都可用于任一商店。

然后，您将配置指向特定文件。

> 安全 > SSL 证书和密钥管理 > 管理端点安全配置

或者，对我们来说更简单的是使用 WebSphere 已经拥有的现有默认存储并将我们的证书添加到这些存储中。

> 安全 > SSL 证书和密钥管理 > 密钥库和证书 > CellDefaultKeyStore

或`CellDefaultTrustStore`或`NodeDefaultKeyStore`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:50:52.560

该[链接](http://publib.boulder.ibm.com/infocenter/eglce/v1r0/index.jsp?topic=/com.ibm.eglce.developing.doc/topics/pegl_richui_security_sslexample.html)帮助我在 WAS 上设置 SSL。我只需添加几个步骤即可为基于浏览器的相互身份验证启用它。

因为，我必须做一个 POC，因此我使用的是自签名证书。

在理想情况下，证书将由证书颁发机构签名，证书颁发机构的证书将被导入到 WAS 服务器的信任库中。

以下是步骤，

1.  更改 WAS 中 Default KeyStore 和 Default TrustStore 的密码
2.  在 WAS 中创建客户端证书
3.  在 WAS 中创建服务器证书
4.  以 PKCS 格式导出客户端证书，例如 client.p12
5.  以 PKCS 格式导出服务器证书，例如 server.p12
6.  将客户端证书导入默认 TrustStore
7.  将服务器证书导入默认 TrustStore
8.  在 WAS 上启用 SSL。

    一世。确保为默认服务器证书别名和默认客户端证书别名选择服务器证书。

    ii. 在保护质量 (QoP) 设置中，根据需要选择客户端身份验证。

9.  使用新的 SSL 端口（例如 9444）创建 Web 容器传输链。
10.  将新创建的 SSL 端口添加到虚拟主机。
11.  重新启动服务器。
12.  将步骤 4 client.p12 中创建的客户端证书导入浏览器。

# performance - 添加到另一个 UIView 时的 UIImageView 延迟

> ID：13085462
> 
> 赞同：0
> 
> 时间：2012-10-26T10:48:02.523
> 
> 标签：performance, ios5, uiview, uiimageview

这是我在这里的第一篇文章-但我已经阅读了很长时间。非常感谢这个网站！:-)

我目前正在将我的基于 XNA 的 2D 引擎从 WP7 移植到 iOS (5)。我宁愿不直接使用 OpenGL，因为我更愿意把时间花在游戏上而不是技术上。所以我很高兴得到一个不涉及 OpenGL（直接）的答案。

问题：当我将 UIImageView 添加到另一个 UIView 时，在 UIImageView 被绘制之前会有短暂的延迟。我假设，这是由于 UIView 类在内部将所有内容转换为 OpenGL 然后绘制之前执行的缓存。

我想要什么：告诉 UIView（超级视图）对所有子视图执行所有必要的计算，*然后**一次*绘制它们。目前我观察到的行为是：计算 uiimageview_1，绘制 uiimageview_1，计算 uiimageview_n，绘制 uiimageview_n，...

 *我想要的虚拟代码：

```
// put code here to tell superview to pause drawing
for (int i = 0; i < 400; i ++)
{
    add UIImageView[i] to superview;
}
// put code here to tell superview to draw now 
```

可能的解决方法（但来自 C# 和 Windows，我不知道如何在 iOS 上的 Objective-C 中有效地实现它） - 我担心这段代码效率低下，因为必须传输大块 RAM（每帧！）视网膜以原始分辨率显示：

```
for (int i = 0; i < 400; i ++)
{
    add UIImageView[i] to superview;
}
// put code here to get a bitmap in ram from superview
// return bitmap and draw it in a view for the scenery/canvas 
```

任何有关如何解决此“弹出”问题的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:39:30.257

回答这个问题会有点棘手。Cocoa Touch 的确切行为没有记录（Apple 说“实现细节”），因此只能根据猜测和经验给出建议。

您可能想尝试 CoreAnimation，而不是使用 UIViews。它抽象了 2D 绘图和合成操作，而没有 UI 框架（如 UIKit）的开销。它也比直接编程 OpenGL 更容易使用。UIKit 使用 CoreAnimation 进行绘图，但在许多方面对其进行了增强。这种“增强”可能正是您遇到性能问题的原因。

Have a look at the [tutorial](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/coreanimation_guide/introduction/introduction.html) and judge for yourself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:30:49.933

首先 - 忘记 UIKit 的观点。如果您尝试将 XNA 游戏移植到 iOS，我建议您熟悉 Cocos2D。它比核心 OpenGL 更方便，它会为您提供所需的性能。*

# c - 我如何输入单词到链表？

> ID：13085464
> 
> 赞同：-1
> 
> 时间：2012-10-26T10:48:06.850
> 
> 标签：c, string, linked-list

我有一个能够在每个节点中保存字符的双向链表。这就是我向每个节点输入字符的方法。

```
printf("Enter string of characters for the list: ");
scanf("%s",s);
for(i=0;s[i]!='\0';i++)
    Insert(s[i],&Header1); 
```

现在我希望修改列表以在每个节点中存储单词。用户提供的输入是一个句子。我如何确保每个单词（以空格分隔）进入列表的节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:54:19.327

```
while ( sscanf( sentence, "%s", &node_value ) == 1 )
{
  //Call to insert into your list goes here
  //Each pass node_value will be the next word
} 
```

注意：您必须将`node_value`值传递到您的列表中，否则您的所有值都将是相同的参考！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:59:57.653

```
char *word;
while (NULL != (word = strtok(s, " ."))) {
    Insert(word, &Header1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:54:27.600

您需要将节点修改为
`struct node {`
`node *prev;`
`char *data;`
`node *next;`
`}`

并将其更改`scanf`为 ' `fgets`。
**注意：**我已将 data 声明为 a `char *`，因此您不能使用 strncpy。如果你想复制字符串（而不是分配指针），那么你应该`malloc`数据。

# php - CodeIgniter .htaccess 链接

> ID：13085466
> 
> 赞同：1
> 
> 时间：2012-10-26T10:48:20.027
> 
> 标签：php, .htaccess, codeigniter

我是 codeIgniter 和 .htaccess 的新手。我已经将 index.php 删除到`localhost/ci/index.php/site/home`. 所以我的主页现在可以访问`localhost/ci`或`localhost/ci/site/home`。

我有

```
<a href="home">Home</a> and <a href="about">About</a> 
```

如果我在此链接上，我可以访问 Home 和 About `localhost/ci/site/home`。但是一旦我`localhost/ci`发现问题就存在，因为当我点击`<a href="about">About</a>`该网站时，我会将我重定向到`localhost/ci/about`而不是`localhost/ci/site/about`. 我更改`<a href="site/home">Home</a> and <a href="site/about">About</a>`浏览器的链接不断添加`/site`每次点击 `localhost/ci/site/site/site/site/site/site/home`

任何人都可以帮我解决问题吗？

.htaccess

```
 <IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /ci

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

ErrorDocument 404 /index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:19:18.217

你看过[URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)吗？它有许多功能可以在这些情况下提供帮助。

首先确保在控制器或[自动加载](http://codeigniter.com/user_guide/general/autoloader.html)配置中加载帮助程序。

**锚（）**

在这种情况下，`anchor()`助手将是理想的。例如

```
<?php echo anchor('home', 'Home'); ?> 
```

**base_url()**

或者，您可以使用`base_url`前面提到的方法构建 href。

```
<a href=<?php echo base_url(); ?>"about">About</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:21:48.133

即使 htaccess 设置为将其视为基础，您仍在重新添加主控制器。如下编写链接应该可以解决问题。

```
<a href="about">About</a> 
```

解决它的另一种方法是随时离开基地，这并不是真正必要的，但如果你遇到问题，它可以工作。

```
<a href=<?php echo base_url(); ?>"about">About</a> 
```

每次编写链接时，将回显您在配置中设置为基本 URL 的任何内容，因此如果您的配置中的 base_url 是 www.localhost.com，则上面将写入 www.localhost.com/about .

别担心你会掌握它的窍门，当你第一次开始时，路由可能是 CI 中最复杂的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:51:40.467

转到您的配置文件并设置`index_page`为空。这将删除 index.php

并且当您将链接设置`/`为 infront 时：

```
<a href="/home">Home</a> and <a href="/about">About</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:53:54.130

@Svetlio 所说的 + 我建议您`site_url()`在创建链接时使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T12:44:49.063

`<a href="<?php echo base_url('home') ?>">Home</a>`

`<a href="<?php echo base_url('about') ?>">About</a>`

# android - Android - webview 中的每个链接都会使应用程序崩溃

> ID：13085478
> 
> 赞同：1
> 
> 时间：2012-10-26T10:49:05.293
> 
> 标签：android, webview, android-webview

我正在构建一个应用程序，其中使用 ActionBarSherlock 选项卡栏交换了一堆片段。其中一个片段只是一个 WebView，它显示了他们在线商店的移动版本。

商店的网站在主页上加载正常，但只要我点击任何链接，应用程序就会崩溃（在 ICS 4.0.3 上测试时）。

这是我用来设置网络视图的代码：

```
 // Set the web view
    WebView webView = (WebView)rootView.findViewById(R.id.shop_webview);
    webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    WebSettings webViewSettings = webView.getSettings();
    webViewSettings.setJavaScriptEnabled(true);
    webView.loadUrl(shopUrl); 
```

这是应用程序崩溃时出现在 LogCat 中的错误：

```
10-26 21:39:05.565: ERROR/AndroidRuntime(11021): FATAL EXCEPTION: main
    java.lang.NullPointerException
    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:876)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4507)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
    at dalvik.system.NativeStart.main(Native Method) 
```

清单（根据评论中的要求），请注意显示 webview 的活动是在 RootActivity 中管理的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="au.com.client.android" android:versionCode="1" android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/>
    <uses-feature android:name="android.hardware.touchscreen" android:required="true"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>

    <application android:name=".App" android:label="@string/app_name" android:icon="@drawable/app_icon" android:logo="@drawable/logo">
        <activity android:name="au.com.client.whitelabel.android.LaunchActivity" android:label="@string/app_name" android:theme="@style/Theme.Client" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <uses-library android:name="com.google.android.maps"/>
        <activity android:name="au.com.client.whitelabel.android.RootActivity" android:label="@string/app_name" android:theme="@style/Theme.Client" android:screenOrientation="portrait" />
        <activity android:name="au.com.client.whitelabel.android.SettingsActivity" android:label="@string/app_name" android:screenOrientation="portrait" />
        <activity android:name="au.com.client.whitelabel.android.LoginActivity" android:windowSoftInputMode="stateHidden" android:configChanges="orientation|keyboardHidden" android:theme="@style/Theme.Client" android:screenOrientation="portrait" />
    </application>
</manifest> 
```

没什么好说的，我知道。恐怕网上商店正在为移动网站使用某种框架，该框架依赖于手机上完整浏览器提供的功能，但在小 WebView 中不受支持。在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:43:13.117

我意识到这个问题中的信息有点半生不熟，但最终解决方案非常简单，只是添加了：

```
webView.setWebViewClient(new WebViewClient()); 
```

我不知道为什么会这样 - 我假设`WebViewClient`在创建 WebView 时附加了一个默认值。希望这有助于以后有人摆脱困境。

# visual-studio-2012 - 恢复 Nuget 引用？

> ID：13085480
> 
> 赞同：187
> 
> 时间：2012-10-26T10:49:14.430
> 
> 标签：visual-studio-2012, nuget

我在 Visual Studio 2012 中有解决方案和项目。

`packages.config`该项目在项目的根目录中有一个文件。

出于这个问题的目的，假设我不小心从`References`我的项目部分中删除了这些库。

进入 NuGet 包管理器时，界面仍然在这些包旁边报告一个勾号，表示它们已安装。

我能看到如何解决这种情况的唯一方法是从 中删除所有条目`packages.config`，这将解决 NuGet 界面报告它们已安装的问题，然后重新添加每个条目。

有没有更聪明的方法？我曾希望启用“启用 nuget 来恢复丢失的包”可以解决这个问题，但它似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2013-03-08T22:57:00.467

[尝试重新安装软件包](http://www.overflowexception.es/2013/03/reinstalar-paquetes-de-nuget.html)。

在 NuGet 包管理器控制台中输入以下命令：

`Update-Package -Reinstall -ProjectName Your.Project.Name`

如果要重新安装软件包并恢复整个解决方案的引用，请忽略该`-ProjectName`参数。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-06T09:56:43.280

您需要[在 VS 解决方案级别启用 NuGet 包还原，](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)才能使还原丢失的包正常工作。

![在此处输入图像描述](../Images/f56f92ae4d595c95b4b4ddb4bc16352e.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-22T01:08:15.687

如果这对我有帮助，以上都不够。我仍然无法构建，VS 仍然找不到参考。关键是在恢复包后**关闭并重新打开解决方案。**

这是场景（使用 Visual Studio 2012）：

您打开一个缺少包的解决方案。参考资料显示 VS 找不到它们。有[很多方法](http://docs.nuget.org/docs/reference/package-restore)可以恢复丢失的包，包括

*   构建设置为自动恢复的解决方案
*   打开包管理器控制台并单击漂亮的“恢复”按钮
*   如果你`nuget restore`安装了命令行 nuget

但无论采用何种方法，这些引用仍将显示为缺失。当你构建它时，它会失败。叹。但是，如果您关闭解决方案并重新打开它，现在 VS 会`<HintPath>`再次检查那些 nice s，发现这些包回到了它们所属的位置，并且一切都很好。

### 更新

Visual Studio*还*没有看到你有这个包吗？仍然显示无法解决的参考？确保您恢复的软件包版本与 .csproj 文件中的版本完全相同`<HintPath>`。即使是较小的错误修复编号（例如 1.10.1 到 1.10.2）也会导致引用失败。您可以通过直接编辑您的 csproj xml 来解决此问题，或者通过删除引用并创建一个指向包目录中新恢复的版本的新引用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-09-16T06:00:22.303

虽然@jmfenoll 提供的解决方案有效，但它会更新到最新的软件包。就我而言，安装了 beta2（预发行版）后，它会将所有库更新为 RC1（有一个错误）。因此，上述解决方案只完成了一半的工作。

如果您的情况与我相同，并且您希望将您的项目与您拥有/或在您的 , 中指定的 NuGet 包的确切版本同步`packages.config`，那么此脚本可能会对您有所帮助。只需将其复制并粘贴到您的包管理器控制台中

```
function Sync-References([string]$PackageId) {
  get-project -all | %{
    $proj = $_ ;
    Write-Host $proj.name; 
    get-package -project $proj.name | ? { $_.id -match $PackageId } | % { 
      Write-Host $_.id; 
      uninstall-package -projectname $proj.name -id $_.id -version $_.version -RemoveDependencies -force ;
      install-package -projectname $proj.name -id $_.id -version $_.version
    }
  }
} 
```

然后使用 sepific 包名称执行它

```
Sync-References AutoMapper 
```

或对于所有包，如

```
Sync-References 
```

归功于**Dan Haywood**和[他的博客文章](http://danhaywood.com/2012/04/04/updating-visual-studio-project-references-from-nuget-packages-config-2/)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-22T20:39:20.780

以下脚本可以在 Package Manger 控制台窗口中运行，并将在重新安装之前从解决方案中的每个项目中删除所有包。

```
foreach ($project in Get-Project -All) { 
    $packages = Get-Package -ProjectName $project.ProjectName
    foreach ($package in $packages) {
        Uninstall-Package $package.Id -Force -ProjectName $project.ProjectName
    }
    foreach ($package in $packages) {
        Install-Package $package.Id -ProjectName $project.ProjectName -Version $package.Version
    }
} 
```

这将再次运行每个包的安装脚本，这将恢复丢失的程序集引用。不幸的是，安装脚本可以做的所有*其他*事情——比如创建文件和修改配置——也将再次发生。您可能希望从一个干净的工作副本开始，并使用您的 SCM 工具来挑选和选择项目中要保留和忽略的更改。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-06-02T17:28:47.187

此脚本将重新安装项目的所有包，而不会弄乱依赖项或安装可能已被有意删除的依赖项。（为他们的零件包开发人员提供更多信息。）

```
Update-Package -Reinstall -ProjectName Proteus.Package.LinkedContent -IgnoreDependencies 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-13T15:32:19.310

我手动添加了 DLL。右键单击项目中的引用，选择添加引用，然后在对话框中按下浏览按钮。解决方案包目录中的 NuGet DLL。要获取它们的名称，您可以右键单击另一个正常工作的项目中的引用，然后选择属性并查看路径属性。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-17T10:32:44.737

在 Visual Studio 2015 中（Soulution 受源代码控制，MVC 项目），csano`Update-Package -Reinstall -ProjectName Your.Project.Name`工作，但它搞砸了一些写锁。

我之前必须手动删除“包”文件夹。（它似乎因为源代码控制而被锁定）。

此外，我必须从 NuGet 包管理器重新安装 MVC 包。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-01T10:00:45.797

以防万一它对某人有所帮助 - 在我的场景中，我有一些共享库（它们有自己的 TFS 项目/解决方案）全部组合成一个解决方案。

Nuget 将成功恢复项目，但 DLL 将丢失。

根本问题是，虽然您的解决方案有自己的包文件夹并且已将它们正确恢复到该文件夹​​，但项目文件（例如 .csproj）正在引用可能没有下载包的不同项目。在文本编辑器中打开文件以查看您的引用来自何处。

在不同的互连共享解决方案上管理包时可能会发生这种情况 - 因为您可能希望确保所有 DLL 都在同一级别上，您可以将其设置在顶层。这意味着有时它会为引用的 DLL 寻找完全不同的解决方案，因此如果您没有下载所有项目/解决方案并且不是最新的，那么您可能会遇到上述问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-17T03:24:34.697

我必须同意@Juri 的观点，即 jmfenoll 广受欢迎的答案并不完整。在引用损坏的情况下，我认为大多数时候你**不想**更新到*最新*的包，而只是修复你碰巧正在使用的*当前版本的引用。*Juri 提供了一个方便的函数`Sync-References`来做到这一点。

但我们可以走得更远一点，允许灵活地按项目和包进行过滤：

```
function Sync-References([string]$PackageId, [string]$ProjectName) {
    get-project -all | 
    Where-Object { $_.name -match $ProjectName } |
    ForEach-Object {
        $proj = $_ ;
        Write-Output ('Project: ' + $proj.name)
        Get-Package -project $proj.name |
        Where-Object { $_.id -match $PackageId } |
        ForEach-Object { 
            Write-Output ('Package: ' + $_.id)
            uninstall-package -projectname $proj.name -id $_.id -version $_.version -RemoveDependencies -force
            install-package -projectname $proj.name -id $_.id -version $_.version
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-06T13:46:41.543

我有同样的问题，缺少参考资料。在我的场景下面：

*   全新 Windows 10 机器和 VS Community 2015 安装
*   刚刚通过 TFS 检查了存储库代码
*   一种解决方案构建得很好，一种解决方案有一个缺少引用的项目（EF、System.Http，作为实例），但相关的 nuget 包已正确安装。

项目和包中的所有版本号都匹配，进行 nuget 还原（以所有方式）不起作用。

**我如何修复它：**只需删除解决方案根目录中的包文件夹并执行 nuget restore。此时，dll 已正确下载，并且可以为缺少的引用添加。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-08T23:40:04.163

1.  复制项目的 packages.config 文件并应用所有版本修改
2.  卸载所有软件包并删除依赖项

    ```
    $packages = Get-Package -ProjectName [nameOfProjectToRestore]
    foreach ($package in $packages) {
        uninstall-package  -projectname [nameOfProjectToRestore] -id $package.Id -version $package.version -RemoveDependencies -force ;
    } 
    ```

3.  清除项目根目录下的packages文件夹

4.  将修改后的 package.config 复制到网站的根文件夹

5.  运行此代码以恢复项目

    ```
    $packages = Get-Package -ProjectName [nameOfProjectToRestore]
    foreach ($package in $packages) {
        uninstall-package  -projectname [nameOfProjectToRestore] -id $package.Id -version $package.version -RemoveDependencies -force ;
    }
    foreach ($package in $packages) {
        install-package  $package.Id -ProjectName [nameOfProjectToRestore] -Version $package.Version
    } 
    ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-17T19:59:02.340

我也经常遇到这个问题，在我的情况下，检查了下载丢失的 NuGet（但它没有恢复它们），我无法卸载和重新安装，因为我修改了一些已安装的包......所以：

我刚刚清除了缓存并重建，它工作。(Tools-Option-Nuget Package Manager - General)

此链接也有助于 [https://docs.nuget.org/consume/package-restore/migrating-to-automatic-package-restore](https://docs.nuget.org/consume/package-restore/migrating-to-automatic-package-restore)。

# r - 不需要命名空间依赖项

> ID：13085481
> 
> 赞同：79
> 
> 时间：2012-10-26T10:49:16.957
> 
> 标签：r

我正在尝试构建一个 R 包，以便阅读 CRAN 上的手册。我可以弄清楚，使用导入来加载命名空间中的函数是在描述文件中使用的最佳选择。添加到描述文件后，我也将其添加到命名空间文件中。我将 importFrom 添加到具有所需功能的命名空间文件中。

现在，当我对我的包运行 R CMD 检查时，我得到一个错误

> 不需要命名空间依赖项：'ggplot2'

更多信息：即使我将包添加到描述文件中的 Depends 中，它们也不会被加载。

请帮助解决这个问题。

请在下面找到我的描述文件

```
Package: bigpackage
Type: Package
Title: Some title
Version: 1.0
Date: 2012-10-25
Author: Mayank Bansal
Maintainer: somename
Imports : R(>= 2.15.1), SweaveListingUtils( >=0.5.5),xtable(>=1.7-0),
        brew(>=1.0-6), knitr(>=0.8), RHive(>= 0.0-6), ggplot2(>=0.9.2)
        , brew, knitr
SystemRequirements : LaTeX(texi2dvi) must be present in the system to
        create PDF reports
Description: Some Description
License: file LICENSE
LazyLoad: yes
ByteCompile: true
OS_type : unix 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-06T23:36:00.973

如果您使用`import`或`importFrom`在您的 NAMESPACE 文件中，您应该在您的说明文件的 Imports 部分中有该包的条目（除非有原因需要使用 Depends 在这种情况下，该包应该在 Depends 中有一个条目，并且不是进口）

这是[编写 R 扩展的相关部分](http://cran.r-project.org/doc/manuals/R-exts.html#Specifying-imports-and-exports)

> 'Imports' 字段列出了从其名称空间导入（在 NAMESPACE 文件中指定）但不需要附加的包。'::' 和 ':::' 操作符访问的命名空间必须在此处列出，或者在 'Suggests' 或 'Enhances' 中列出（见下文）。理想情况下，该字段将包含所有使用的标准包，并且包含使用 S4 的包很重要（因为它们的类定义可能会更改，并且DESCRIPTION 文件用于决定在发生这种情况时要重新安装哪些包）。在“Depends”字段中声明的包不应该也在“Imports”字段中。

* * *

我做了一个单一功能的包`f`。我制作了一个 NAMESPACE 文件，其中的`importFrom`行与您所说的行相同。

**命名空间文件**

```
export("f")
importFrom("ggplot2","ggplot","geom_histogram") 
```

此时，如果我`R CMD check`按预期运行，我会收到错误消息：

> 不需要命名空间依赖：'ggplot2'</p>

但是，如果我添加`Imports: ggplot2`到说明中，使我的说明文件如下所示，则它可以毫无问题地通过`R CMD check`。

**描述文件**

```
Package: anRpackage
Type: Package
Title: What the package does (short line)
Version: 1.0
Date: 2012-11-07
Author: Me
Maintainer: Who to complain to <yourfault@somewhere.net>
Description: More about what it does (maybe more than one line)
License: GPL
Imports: ggplot2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-09-02T06:35:59.367

发生这种情况的一个简单原因是，如果您在声明`@import`任何/所有函数时不小心使用了逗号

例如这个

```
#'
#' @import rvest, dplyr, stringr, jsonlite
#'
#' @export
#' 
```

应该改成这个

```
#'
#' @import rvest dplyr stringr jsonlite
#'
#' @export
#' 
```

这是一个常见错误，因为包在文件中*以*逗号分隔`DESCRIPTION`

# sql - 子查询中的 WHERE 子句

> ID：13085483
> 
> 赞同：0
> 
> 时间：2012-10-26T10:49:19.173
> 
> 标签：sql, select, subquery, where-clause, having-clause

以下 SQL 查询：

```
select *  from er_101
 where cd_relnaam IN ( 
     select cd_relnaam 
     from er_101 
     group by cd_relnaam 
     having count(*) > 1)
 AND ld_relopdrachtgever = '1' 
```

虽然我需要那个子查询也限制`ld_relopdrachtgever = '1'`
了 HAVING 语句怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:54:07.113

您也可以`WHERE`在子查询中使用。

```
SELECT * FROM er_101
 WHERE cd_relnaam IN ( 
     SELECT cd_relnaam 
     FROM er_101 
     WHERE ld_relopdrachtgever = '1'  <--You can add WHERE clause before GROUP BY
   --^^^^^----
     GROUP BY cd_relnaam 
     HAVING COUNT(*) > 1)
 AND ld_relopdrachtgever = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:00:44.633

请参阅有关查找重复记录的“文章” [http://blog.sqlauthority.com/2007/07/11/sql-server-count-duplicate-records-rows/](http://blog.sqlauthority.com/2007/07/11/sql-server-count-duplicate-records-rows/)

# c# - 使用编辑器 c# 加载选定的单选按钮

> ID：13085485
> 
> 赞同：0
> 
> 时间：2012-10-26T10:49:28.697
> 
> 标签：c#, asp.net-mvc, c#-4.0

关于这个问题：

[StackOverflow - 在 c# mvc 中对单选按钮进行分组](https://stackoverflow.com/questions/12883869/grouping-radio-buttons-in-c-sharp-mvc)

我现在已经设法将表单中的选定选项加载并保存到数据库中，但现在用户可能需要对其进行编辑。

如何使用所选用户的选择加载视图？我看不到您可以在哪里设置选定的答案。在加载时，我正在选择默认值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:18:26.977

用这个：

```
<%= Html.RadioButtonFor(m => m.Something, "something", new { Checked = "checked" })%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:40:31.877

您可以在您的操作中`SelectedAnswer`为每个设置属性值，其余的将由您负责。`Course``GET``EditorTemplate`

```
public ActionResult Index()
{
    var vm= new OrderViewModel();

    //the below is hard coded for DEMO. you may get the data from some  
    //other place and set the course and options

    var q1 = new Course { ID = 1, Name= "Starters" };
    q1.Options.Add(new Option{ ID = 12, Title = "Prawn Cocktail " });
    q1.Options.Add(new Option{ ID = 13, Title = "Soup" });
    q1.SelectedAnswer = 13; //to do : get the selected answer value from DB

    vm.Courses.Add(q1);     

    var q2 = new Course { ID = 1, Name= "Mains" };
    q2.Options.Add(new Option{ ID = 42, Title = "Beef" });
    q2.Options.Add(new Option{ ID = 43, Title = "Lamp" });
    q2.SelectedAnswer = 16;// to do :get the selected answer value from DB

    vm.Courses.Add(q2);

   return View(vm);           
} 
```

您的编辑器模板无需更改。它与之前的答案相同。

```
@model Course
<div>
    @Html.HiddenFor(x=>x.ID)
    <h3> @Model.Name</h3>
    @foreach (var a in Model.Options)
    {
       <p>
          @Html.RadioButtonFor(b=>b.SelectedAnswer,a.ID)  @a.Title
       </p>
    }
</div> 
```

# xml - 如何在 Liquibase 中对更改日志中未设置的动态属性进行错误处理？

> ID：13085487
> 
> 赞同：2
> 
> 时间：2012-10-26T10:49:31.387
> 
> 标签：xml, database, undefined, liquibase

在我们的**changelog-master.xml**文件中，我们有一个要应用于 DB 模式的变更集列表。例如：

```
<changeSet author="test" id="01-update" runOnChange="true">
        <update tableName="system_attributes">
            <column name="value" value="${WebServiceURL}" />
            <where>key='WebServiceURL'</where>
        </update>
</changeSet> 
```

然后在我们的**changelog.xml**文件中定义我们的动态属性：

```
<!-- FROM TABLE SYSTEM_ATTRIBUTES -->
<property name="WebServiceURL" value="https://localhost/webService/" /> 
    ... 
```

考虑到这一点，liquibase 将在工具运行时替换该`${WebServiceURL}`语句。`https://localhost/webService/`这工作正常。**但是，当changelog.xml**文件`${WebServiceURL}`中的属性未定义时，我们如何进行错误处理呢？

 ****当changelog-master.xml**尝试访问未定义的变量时，我需要它来执行事务回滚，或者抛出某种错误消息和退出 liquibase 。**

# android - 如何在android中给TextView渐变？

> ID：13085492
> 
> 赞同：1
> 
> 时间：2012-10-26T10:49:42.050
> 
> 标签：android

我从 while 中搜索为 android.but 中的 textView 提供渐变，但在任何地方都没有得到适当的解决方案。

我有这样的屏幕![图像中的文本实际上具有渐变](../Images/8369c42bbe0cd98cb6fd138594cb6fb6.png)

如果我将图像作为文本放置，但我有许多具有渐变的文本视图，则应用程序可能会很大。所以如果有人知道解决方案，请发布。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T10:52:51.690

来了，

```
int[] color = {Color.DKGRAY,Color.CYAN};
        float[] position = {0, 1};
        TileMode tile_mode = TileMode.REPEAT;
        LinearGradient lin_grad = new LinearGradient(0, 0, 0, 35,color,position, tile_mode);
        Shader shader_gradient = lin_grad;
        your_text_view.getPaint().setShader(shader_gradient); 
```

编辑：

嗨@android开发者，

如果你想对视图做一些垂直或任何渐变，

请用，

`RadialGradient`代替`LinearGradient.`

唯一的问题是你必须调整，

```
x coordinate of the center of the radius.
y coordinate of the center of the radius.

and also,

radius value of the view. 
```

并使用平铺模式作为镜像而不是重复。

我有样品，但可能与您想要的不完全一致，

```
TileMode tile_mode = TileMode.MIRROR or TileMode.REPEAT;
        RadialGradient rad_grad = new RadialGradient(0, 3, 5, Color.BLUE,Color.RED,tile_mode, tile_mode);
        Shader shader_gradient = rad_grad;
        your_text_view.getPaint().setShader(shader_gradient); 
```

你也可以使用`SweepGradient`代替`LinearGradient`.

# c# - 在 TreeView 中添加并行节点

> ID：13085498
> 
> 赞同：1
> 
> 时间：2012-10-26T10:49:56.330
> 
> 标签：c#, winforms

这可能是一个非常简单的问题，但我考虑了很长时间的解决方案。我需要在`if`语句中保留一些条件，说明该节点是 TreeView 控件中所有节点的父节点。请建议我应该在`if`声明中保留什么表达方式。

```
if(Condition??)          //it is the parent node of all
{
   myTreeView.SelectedNode.Nodes.Add(myTreeNode);
}
else
{
   myTreeView.SelectedNode.Parent.Nodes.Add(myTreeNode);
} 
```

在上面的代码中，我试图将并行节点添加到正在工作的选定节点，但是当我尝试将相同的代码（即，`myTreeView.SelectedNode.Parent.Nodes.Add(myTreeNode);`）添加到父节点时，VS 显示错误。（我知道为什么，所以我正在尝试上面的代码来实现它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:54:36.607

您可以为此使用该[`TreeNode.Parent`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.parent.aspx)属性：

```
if (myTreeView.SelectedNode.Parent == null && myTreeView.SelectedNode.Parent.GetType() != typeof(TreeNode))
{
   myTreeView.SelectedNode.Nodes.Add(myTreeNode);
}
else
{
   myTreeView.SelectedNode.Parent.Nodes.Add(myTreeNode);
} 
```

# cocoa-touch - 用按钮模仿键盘删除键

> ID：13085500
> 
> 赞同：0
> 
> 时间：2012-10-26T10:50:00.150
> 
> 标签：cocoa-touch, uiwebview, uikeyboard

我`UIWebView`在我的应用程序中使用文本和表情符号/笑脸显示。我可以使用键盘输入和删除文本和表情符号，但我想在 UI 中有一个按钮来做同样的事情。如何使用自己的按钮模仿键盘删除功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:57:41.620

我的猜测是您必须在本机应用程序和 webview 之间建立某种通信，以便您可以传递某些事件以进行相应的处理。在这里查看[NSString in UIWebview](https://stackoverflow.com/questions/3742590/nsstring-in-webview-iphone-and-objective-c/3742635#3742635)中的帖子，这可能会阐明如何解决您的问题。

# intel - dma_map_single 和 dma_map_page

> ID：13085501
> 
> 赞同：2
> 
> 时间：2012-10-26T10:50:02.457
> 
> 标签：intel, dma

我想做多个帧的 dma 来发送一个大帧（巨型）。我能够发送正常帧（大小为 1500）。我需要对 dma 有一些疑问。

1.  dma_map_single() 相对于其他 api 的真正优势是什么。我们可以用 dma_map_page 做所有事情，对吧？

2.  假设我们需要在驱动程序中传输一个大帧（jumbo），并且我已经将该帧存储在多个缓冲区中。这些缓冲区在物理内存或虚拟内存中不连续。但是这些缓冲区位于内核空间中。我们如何将它作为一帧发送。我们应该使用 scatter-gather dma 吗？这可能与其他 dma_api 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T20:12:16.797

1.  dma_map_single 和 dma_map_page 最终会调用 dam_ops->map_page - 最终的功能由架构和内核配置决定。通常它将是带有 IOMMU 的 x86 机器上的 intel_map_page。
2.  首先，从内核的角度来看，巨型帧在 TX 时间是无关紧要的，因为网络堆栈将传输的缓冲区合并为最多 64K 数据包（LSO/TSO），并且 NIC 最终会将单个 64K 数据包分解为几个 MTU（ETH 上的 9K/1500） ) 大小的数据包，每个数据包都有自己的 L3 标头。

对于您的问题，SKB 可以有一个分散收集列表 - 然后每个缓冲区进行 dma 映射。然后将 dma 地址和缓冲区长度的列表写入发送描述符到 NIC，该 NIC 知道如何将它们组合在一起以进行发送。

顺便说一句，内核中有一个用于分散列表的 dma_map_sg API，它将返回一个带有 dma 地址列表的分散列表。这通常与 NIC 驱动程序无关。

# android - 如何通过蓝牙将文件/字符串消息从任何支持蓝牙的设备传输到 Android 设备

> ID：13085505
> 
> 赞同：1
> 
> 时间：2012-10-26T10:50:07.430
> 
> 标签：android, bluetooth, device, file-transfer

我知道已经有很多关于我上面提供的标题的问题，但我发现没有一个是令人满意的。我还浏览了[Android 蓝牙](http://developer.android.com/guide/topics/connectivity/bluetooth.html)及其示例蓝牙聊天应用程序。但我想要的是创建一个演示 android 应用程序，它从任何其他支持蓝牙的设备（无论是 android 还是非 android）接收数据（字符串消息或文件）以上任何链接或代码片段都会有很大帮助。问候应用编码..

**编辑** 以下是我从 DeviceListPickerActivity.java 成功选择设备后尝试获取数据的一段代码：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(D) Log.d(TAG, "onActivityResult " + resultCode);
        switch (requestCode) {
        case REQUEST_CONNECT_DEVICE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {

                // Get the device MAC address
                String address = data.getExtras().getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);

                // Get the BLuetoothDevice object
                device = mBluetoothAdapter.getRemoteDevice(address);
                String deviceFriendlyName = device.getName().toString();

                Toast.makeText(getApplicationContext(), "Device " + deviceFriendlyName +" Selected", Toast.LENGTH_SHORT).show();
                try{
                    BluetoothSocket btSocket = device.createRfcommSocketToServiceRecord(UUID.fromString("fa87c0d0-afac-11de-8a39-0800200c9a66"));
                    btSocket.connect();
                    String strReceivedBytesFromDevice;
                    InputStream input = btSocket.getInputStream();
                    DataInputStream dinput = new DataInputStream(input);
                    StringBuffer inputLine = new StringBuffer();
                    while((strReceivedBytesFromDevice = dinput.readLine()) != null){
                        inputLine.append(strReceivedBytesFromDevice);
                        System.out.println("Data Received from BT device:" + strReceivedBytesFromDevice);
                    }
                    dinput.close();
                    }catch (Exception e) {
                    Toast.makeText(getApplicationContext(),
                            "Error in establishing connection with device.",
                            Toast.LENGTH_SHORT).show();
                    }
                // Attempt to connect to the device
                if(mChatService != null){
                    mChatService.connect(device);
//                  getBluetoothMessageString();
                }else {
                    // Initialize the BluetoothChatService to perform bluetooth connections
                    mChatService = new BluetoothService(this, mHandler);
//                    getBluetoothMessageString();
                }
            }
            /*else{
                Toast.makeText(getApplicationContext(), "Failed to connect to device", Toast.LENGTH_LONG).show();
            }*/
            break; 
```

# javascript - Javascript - Onclick 显示内联 - 如果在其他地方单击则隐藏

> ID：13085506
> 
> 赞同：0
> 
> 时间：2012-10-26T10:50:10.187
> 
> 标签：javascript, onclick, hide, inline

我希望在单击按钮时显示文本，并在单击其他位置时再次隐藏文本。我添加了一个 onclick 函数，它将显示从无更改为内联，反之亦然。我必须改变什么，才能使文本再次消失，而不必再次单击按钮？

谢谢你的帮助！

编辑：使用“onBlur”事件解决它，将其设置为再次隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:52:39.203

删除您当前的点击处理程序。然后改为在文档中添加一个并检查`e.target`它是否是您的按钮。

```
var toggle = document.getElementById('toggle');

document.addEventListener('click', function(e) {
    toggle.style.display = e.target.id === 'btn' ? 'block' : 'none';
}, false); 
```

*不包括对旧浏览器的处理*

[http://jsbin.com/ijawig/1](http://jsbin.com/ijawig/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:51:34.840

将此代码放在 `<script></script> 标记之间

> 文档.onclick = onclickFunc;
> 函数 onclickFunc(e) {
> if (!e) var e = window.event
>      var id = e.srcElement.id;
>      if(id != 'btnId') {
>             **/*编写代码来隐藏面板*/**
>     }
> }

# java - 如何将触发器生成的值赋予 Hibernate ValueObject？

> ID：13085508
> 
> 赞同：3
> 
> 时间：2012-10-26T10:50:15.683
> 
> 标签：java, mysql, hibernate

在我的休眠应用程序中，我正在使用创建一个 ValueObject 类

```
@Entity
@Table(name="user")
public class UserVO{

    @Id
    @Column(name="S_ID")
    private String s_id;

    @Column(name="FIRSTNAME")
    private String firstName;

    @Column(name="LASTNAME")
    private String lastName;
 } 
```

在我的服务课上我这样写

```
public void createOrUpdateUser(UserVO userVO) {
        userDAO.createOrUpdateUser(userVO);
    } 
```

在我的 DAO 课上，我是这样写的

```
private EntityManager entityManager;
public void createOrUpdateUser(UserVO userVO) throws DataAccessException {
        entityManager.persist(userVO);
    } 
```

现在我正在调用 createOrUpdateUser(userVO) 但它给出了错误

```
Caused by: org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save() 
```

实际上我的数据库我已经为表创建了一个`trigger`为列`user`生成唯一 ID 的数据库，`s_id`这是触发器的任何问题..请建议我..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T14:28:00.417

如果您使用触发器，则预期的生成策略是`org.hibernate.id.SelectGenerator`. 但是，为了使用这种策略，Hibernate 必须能够在插入后定位插入的行，以查看触发器分配的值有 2 种方法可以做到这一点。

首先是专门配置生成器以告诉它在表中定义唯一键（至少在逻辑上）的列：

```
@Id
@Column(name="S_ID")
@GeneratedValue( strategy = "trigger" )
@GenericGenerator( 
    name="trigger", strategy="org.hibernate.id.SelectGenerator",
    parameters = {
        @Parameter( name="keys", value="userName" )
    }
)
private String s_id;

private String userName; 
```

另一个是通过 Hibernate 的 natural-id 支持：

```
@Id
@Column(name="S_ID")
@GeneratedValue( strategy = "trigger" )
@GenericGenerator( name="trigger", strategy="org.hibernate.id.SelectGenerator" ) )
private String s_id;

@NaturalId
private String userName; 
```

GenerationType.IDENTITY 可能适合您。它将真正归结为 JDBC 驱动程序以及它如何（如果）实现`getGeneratedKeys`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:26:36.983

ID 列不能为空，无论您在数据库驱动程序中做什么，只会在插入或任何其他操作之前/之后触发，但根据错误它会在任何错误之前给出错误。

将某些内容设置为 ID 值或尝试某些内容 `@GeneratedValue(strategy = GenerationType.IDENTITY)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:36:40.540

正如@vinit 所说：

```
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Id
@Column(name="S_ID")
private String s_id; 
```

是最好的选择...

# cygwin - grep 重定向错误

> ID：13085511
> 
> 赞同：1
> 
> 时间：2012-10-26T10:50:33.323
> 
> 标签：cygwin, wget, grep

我想从文件中提取 url（匹配模式）并下载它们。这是我的 egrep 表达式（在 Cygwin 上）：

```
egrep -o -e "http([^\"]*)filter=[0-9]+" myfile.html 
```

这工作正常，直到我尝试使用重定向或管道。例子 ：

```
egrep -o -e "http([^\"]*)filter=[0-9]+" myfile.html > tmp.html 
```

或者

```
egrep -o -e "http([^\"]*)filter=[0-9]+" myfile.html | wget -i - 
```

错误 ： `egrep: >: No such file or directory`

我认为该错误是由于引号前的反斜杠引起的，但我已尝试将其转义。不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:33:50.393

我刚刚尝试过，它对我来说成功了`CYGWIN_NT-6.1-WOW64 1.7.17(0.262/5/3) 2012-10-19 14:39`：

```
Fisherscreek@Fisherscreek-PC ~
$ egrep -o -e "http([^\"]*)filter=[0-9]+" myfile.html >/tmp/out.txt

Fisherscreek@Fisherscreek-PC ~
$ cat /tmp/out.txt
httpZADfilter=42 
```

我想知道你是否有一个 Bash 别名失控了。

# android - 文件夹不是由android中的应用程序创建的

> ID：13085512
> 
> 赞同：0
> 
> 时间：2012-10-26T10:50:35.153
> 
> 标签：android, android-file

我正在通过我的应用程序创建一个文件夹

```
File direct_playlist = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + PLAYLIST_PATH);

            if(!direct_playlist.exists())
             {
                 if(direct_playlist.mkdir()); //directory is created;

             } 
```

即使命令完美执行，我也无法在资源管理器中看到该文件夹​​。我还在 manifest.xml 中授予了我的应用程序的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

当我尝试访问此文件夹时，我的应用程序崩溃，因为该文件夹不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:58:51.320

这个话题已经讨论过了所以使用以下线程..

[如何检查新创建的文件夹是否存在于Android中的SD卡中](https://stackoverflow.com/questions/6911041/android-how-to-create-folder-into-sd-card)

[在 /sdcard 中创建目录失败](https://stackoverflow.com/questions/3853472/creating-a-directory-in-sdcard-fails)

它肯定会帮助你。

# python - web2py 添加用户名验证

> ID：13085517
> 
> 赞同：1
> 
> 时间：2012-10-26T10:50:56.863
> 
> 标签：python, authentication, web2py

我刚刚开始查看 web2py 并希望使用用户名而不是电子邮件来登录。

我添加了以下内容：-

```
auth.define_tables(username=True, signature=False) 
```

我需要添加验证器，但我不知道把它放在哪里（我知道听起来很傻）。

我尝试了一些选项并查看了许多示例 - 但它们都创建了一个新表而不是使用现有的 auth_user。我试过了 ：-

```
auth_table = auth.settings.table_user
auth_table.username.requires = IS_NOT_IN_DB(db, auth_table.username)
auth.define_tables(username=True, signature=False) 
```

但 auth_table 是无。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:30:28.360

`auth.settings.table_user`直到你调用之后才会存在`auth.define_tables()`。因此，只需更改代码的顺序：

```
auth.define_tables(username=True, signature=False)
auth_table = auth.settings.table_user
auth_table.username.requires = IS_NOT_IN_DB(db, auth_table.username) 
```

请注意，如果您使用 定义`db`对象`DAL(..., lazy_tables=True)`，则 auth.settings.table_user 将不存在。在这种情况下，您可以改为执行`auth_table = auth.table_user()`.

# java - 如何覆盖 WebSphere Community Edition (WCE) 2.1 的默认持久性提供程序 - OpenJPA

> ID：13085518
> 
> 赞同：2
> 
> 时间：2012-10-26T10:50:57.470
> 
> 标签：java, spring-mvc, websphere, jpa-2.0, persistence.xml

在 WebSphere Community Edition 2.1 上运行的 Spring 3 MVC 项目中，我正在尝试配置我的 entityManagerFactory。但是，我似乎无法覆盖 PersistanceProvider。它默认为 OpenJPA，甚至将其排除为隐藏类：

```
<sys:hidden-classes>
  <sys:filter>org.apache.openjpa</sys:filter>
</sys:hidden-classes> 
```

但是，在尝试部署应用程序时，我在 WebSphere 中收到以下错误：

```
javax.persistence.PersistenceException: Invalid or inaccessible provider class: org.apache.openjpa.persistence.PersistenceProviderImpl 
```

即使我在persistance.xml 中提供了不同的提供者（HibernatePersistence）：

```
<persistence-unit name="com.intl.cigna">
  <description>
    Persistence unit for the JPA implementation
  </description>
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  <non-jta-data-source>java:comp/env/jdbc/myJndiDS</non-jta-data-source>
  <properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServer2008Dialect"/>
    <property name="hibernate.show_sql" value="true" />            
  </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:38:25.287

要将新的 JPA 提供程序部署为应用程序的一部分：

1.  确保`persistence.xml <provider>`元素指向新 JPA 提供者的`javax.persistence.spi.PersistenceProvider`.

2.  将新的 JPA 持久性代码构建到应用程序中 - 将所有必要的 jar 部署到您的应用程序 EAR/WAR/CLASSPATH 中。

    复制 hibernate3.jar 和 lib/required 中可用的所需 3rd 方库 将 lib/jpa/hibernate-jpa-2.0-api-1.0.0.Final.jar 也复制到您的类路径中。

3.  为您的应用程序配置应用服务器类加载器顺序 - 首先加载新的 JPA 类。 **如果未正确配置类加载器，应用程序服务器中包含的 JPA 提供程序将由您的应用程序使用，而不是第三方 JPA 提供程序。**

4.  如果您将提供程序捆绑在 EAR 文件中，那么在需要 JPA 访问的应用程序模块中，在 Manifest.mf 类路径中指定第三方持久性提供程序二进制文件。

    如果您将提供程序捆绑在 WAR 文件中，请在 Web 应用程序的 WEB-INF/lib 目录中包含必要的提供程序二进制文件。

要在共享库中部署新的 JPA 提供程序：

1.  确保`persistence.xml <provider>`元素指向新 JPA 提供者的`javax.persistence.spi.PersistenceProvider`.

2.  在共享库中定义持久性提供程序

3.  如果该库被许多应用程序访问，请将共享库与服务器类加载器相关联。否则，将共享库与应用程序类加载器相关联。

4.  为您的应用程序配置类加载器顺序 - 首先加载新的 JPA 类。 **如果未正确配置类加载器，应用程序服务器中包含的 JPA 提供程序将由您的应用程序使用，而不是第三方 JPA 提供程序。**

[Websphere 8 JPA 提供者配置](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tejb_jpadefaultpp.html)
[Hibernate 3.5 配置](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html)
[WAS CE - 覆盖类加载顺序](http://www-01.ibm.com/support/docview.wss?uid=swg21261287)
[WAS CE 2.0 - 使用框架，包括 Hibernate](http://publib.boulder.ibm.com/wasce/V2.0.0/en/adding-frameworks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:01:43.173

您可以通过 ServletContextListener 覆盖持久性提供程序。

首先实现一个`PersistenceProviderResolver`：

```
public class HibernatePersistenceProviderResolver implements PersistenceProviderResolver {
    private static final Logger LOGGER = LoggerFactory.getLogger(HibernatePersistenceProviderResolver.class);

    private volatile PersistenceProvider persistenceProvider = new HibernatePersistence();

    public List<PersistenceProvider> getPersistenceProviders() {
    return Collections.singletonList(persistenceProvider);
    }

    public void clearCachedProviders() {
    persistenceProvider = new HibernatePersistence();
    }

    public static void register() {
    LOGGER.info("Registering HibernatePersistenceProviderResolver");
    PersistenceProviderResolverHolder.setPersistenceProviderResolver(new HibernatePersistenceProviderResolver());
    }
} 
```

然后创建一个实现`ServletContextListener`并“注册”ProviderResolver：

```
public class HibernateContextListener implements ServletContextListener{

    public void contextInitialized(ServletContextEvent sce) {
        HibernatePersistenceProviderResolver.register();    
    }

    public void contextDestroyed(ServletContextEvent sce) {
        // nothing to do here
    }
} 
```

并将其添加为 web.xml 中的侦听器：

```
<listener>
    <listener-class>my.context.listener.HibernateContextListener</listener-class>
</listener> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:40:13.217

您必须将以下属性添加到您的 persistence.xml 文件中：

```
<property 
name="hibernate.transaction.factory_class"
value="org.hibernate.transaction.CMTTransactionFactory"
    />

    <property 
name="hibernate.transaction.manager_lookup_class"
value="org.hibernate.transaction.WebSphereExtendedJTATransactionLookup"
    /> 
```

还将所有休眠 .jar 库添加到您的包库文件夹（.war 或 .ear）中，然后将服务器的类加载策略更改为 Parent Last 而不是默认的 Parent First，您可以使用域管理器控制台进行更改（Dmgr）在：

服务器 > $SERVER_NAME > 服务器特定应用程序设置

重新启动您的服务器，这应该可以解决问题。

问候。

# sql - PostgreSQL 代码优化

> ID：13085521
> 
> 赞同：0
> 
> 时间：2012-10-26T10:51:12.407
> 
> 标签：sql, database, performance, postgresql

我有这个代码：

```
SELECT 
    rv_storage.m_product_id AS n_product_id,
    rv_storage.value,
    rv_storage.name,
    m_warehouse.name AS warehouse_name,
    rv_storage.qtyonhand,
    rv_transaction.m_transaction_id,

    CASE WHEN rv_transaction.movementtype = 'V+' THEN movementdate
    ELSE NULL END AS last_in,

    CASE WHEN rv_transaction.movementtype = 'C-' THEN movementdate
    ELSE NULL END AS last_out,

    rv_transaction.movementagedays,

    CASE WHEN (movementagedays < -90) AND (movementagedays >= -180)  THEN qtyonhand
    ELSE NULL END AS more_than_90,

    CASE WHEN movementagedays < -180 THEN qtyonhand
    ELSE NULL END AS more_than_180
FROM
    adempiere.rv_storage
    INNER JOIN
    adempiere.rv_transaction ON
        rv_transaction.m_product_id = rv_storage.m_product_id 
        AND rv_transaction.movementagedays = (
            SELECT MAX(movementagedays) 
            FROM adempiere.rv_transaction 
            WHERE
                rv_transaction.m_product_id = rv_storage.m_product_id 
                AND rv_transaction.movementtype = 'C-'
                OR rv_transaction.movementtype = 'V+'
            )
    INNER JOIN
    adempiere.m_warehouse ON
        m_warehouse.m_warehouse_id = rv_storage.m_warehouse_id
WHERE rv_storage.m_product_id IN (
    SELECT m_product_id
    FROM adempiere.rv_transaction
    WHERE movementagedays < -90
    )
ORDER BY n_product_id; 
```

结果如下表：

[表 http://img9.imageshack.us/img9/4506/table3n.png](http://img9.imageshack.us/img9/4506/table3n.png)

但是在具有实时数据的服务器上（每个表上 100k+ 行）它太慢了。有人可以告诉我如何优化代码吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:27:53.647

子句中的子查询`where`是多余的。`where`而且我认为您在内部联接中的子查询子句中缺少括号：

```
SELECT 
    rv_storage.m_product_id AS n_product_id,
    rv_storage.value,
    rv_storage.name,
    m_warehouse.name AS warehouse_name,
    rv_storage.qtyonhand,
    rv_transaction.m_transaction_id,

    CASE WHEN rv_transaction.movementtype = 'V+' THEN movementdate
    ELSE NULL END AS last_in,

    CASE WHEN rv_transaction.movementtype = 'C-' THEN movementdate
    ELSE NULL END AS last_out,

    rv_transaction.movementagedays,

    CASE WHEN (movementagedays < -90) AND (movementagedays >= -180)  THEN qtyonhand
    ELSE NULL END AS more_than_90,

    CASE WHEN movementagedays < -180 THEN qtyonhand
    ELSE NULL END AS more_than_180
FROM
    adempiere.rv_storage
    INNER JOIN
    adempiere.rv_transaction ON
        rv_transaction.m_product_id = rv_storage.m_product_id 
        AND rv_transaction.movementagedays = (
            SELECT MAX(movementagedays) 
            FROM adempiere.rv_transaction 
            WHERE
                rv_transaction.m_product_id = rv_storage.m_product_id 
                AND (rv_transaction.movementtype = 'C-'
                    OR rv_transaction.movementtype = 'V+')
            )
    INNER JOIN
    adempiere.m_warehouse ON
        m_warehouse.m_warehouse_id = rv_storage.m_warehouse_id
WHERE movementagedays < -90
ORDER BY n_product_id; 
```

现在发布解释输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:00:29.923

**IN() 和 NOT IN() 子查询的优化很差：** MySQL 将子查询作为外部查询中每一行的依赖子查询执行。这是 MySQL 5.5 和更早版本中严重性能问题的常见原因。查询可能应该分别重写为 JOIN 或 LEFT OUTER JOIN。

# facebook - 如何获得一个 Facebook 应用程序的所有权限？

> ID：13085522
> 
> 赞同：0
> 
> 时间：2012-10-26T10:51:12.633
> 
> 标签：facebook

我试图获得用户必须提供的所有权限才能接受一个有问题的 Facebook 应用程序。有谁知道我该怎么做？（我有 appId 和 appSecret）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:54:54.147

好的，我找到了我的问题的答案。我把它写下来以防有一天有人遇到同样的问题。

我只需要做一个 FQL 查询。*表应用程序*中有两个字段“auth_referral_user_perms”和“auth_referral_friend_perms”对应于我正在寻找的内容：我们在应用程序仪表板中设置的“用户和朋友权限”（https://developers.facebook.com/apps/ APP_ID/权限）。

使用 PHP SDK：

```
 $facebook->api('/fql', 'GET', array(
         'q' => 'SELECT auth_referral_user_perms, auth_referral_friend_perms FROM application WHERE app_id = ' . APP_ID,
         'access_token' => TOKEN
         )); 
```

感谢大家的帮助。

# jquery-ui - 如何在 JQuery UI DatePicker 月份选择器中包含明年的月份（下个月滚动 12 个）

> ID：13085528
> 
> 赞同：1
> 
> 时间：2012-10-26T10:51:30.457
> 
> 标签：jquery-ui, drop-down-menu, calendar, jquery-ui-datepicker

在 JQuery UI DatePicker 的月份下拉选择器中是否可以“滚动下一个 12 个月”（包括明年的几个月）？

例如，目前（2012 年 10 月）我希望有以下几个月：

*   2012 年 10 月（当年）
*   2012 年 11 月 ...
*   2012 年 12 月（当年）
*   2013 年 1 月（明年）
*   2013 年 2 月 ...
*   ...
*   2013 年 9 月（明年）

使用 maxDate 等，我可以从本月到今年年底有几个月的时间。使用 changeYear 我可以启用年份选择器。但是是否可以按照描述设置月份选择器？

兄弟，图科

# java - 如何在 Intellij IDEA 中使用本机库制作 jar？

> ID：13085529
> 
> 赞同：3
> 
> 时间：2012-10-26T10:51:37.603
> 
> 标签：java, intellij-idea, jar, java.library.path

如何在 Intellij IDEA 中使用本机库制作 jar？在 JVM 中，它看起来像 Djava.library.path=C:\Users\User\workspace\lib\native\win

# java - 从插件调用代码时出现问题：“org.eclipse.jface”

> ID：13085534
> 
> 赞同：17
> 
> 时间：2012-10-26T10:51:57.733
> 
> 标签：java, eclipse, svn, configuration, eclipse-plugin

我在 Eclipse 上从 SVN 获得了一个新的 Java 项目，只是试图在 Eclipse 的 Project Explorer 窗口中打开该项目并收到此错误：

> 从插件调用代码时出现问题：`"org.eclipse.jface"`。

我该如何解决这个问题？

**异常堆栈跟踪：**

```
java.lang.NullPointerException
    at org.jboss.ide.eclipse.as.classpath.core.ejb3.EJB3ClasspathContainer.getClasspathEntries(EJB3ClasspathContainer.java:115)
    at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2695)
    at org.eclipse.jdt.internal.core.JavaProject.resolveClasspath(JavaProject.java:2853)
    at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1958)
    at org.eclipse.jdt.internal.core.PackageFragmentRoot.getRawClasspathEntry(PackageFragmentRoot.java:547)
    at org.eclipse.jdt.internal.corext.buildpath.ClasspathModifier.isExcluded(ClasspathModifier.java:485)
    at org.eclipse.jdt.internal.ui.wizards.buildpaths.newsourcepage.IncludeToBuildpathAction.canHandle(IncludeToBuildpathAction.java:170)
    at org.eclipse.jdt.internal.ui.wizards.buildpaths.newsourcepage.BuildpathModifierAction.selectionChanged(BuildpathModifierAction.java:101)
    at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:164)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:162)
    at org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:2188)
    at org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1211)
    at org.eclipse.ui.navigator.CommonViewer.handleSelect(CommonViewer.java:478)
    at org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1241)
    at org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:239)
    at org.eclipse.jface.util.OpenStrategy.access$4(OpenStrategy.java:233)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:403)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3974)
    at org.eclipse.swt.widgets.Display.applicationNextEventMatchingMask(Display.java:4875)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5226)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:220)
    at org.eclipse.swt.widgets.Widget.mouseDownSuper(Widget.java:1092)
    at org.eclipse.swt.widgets.Tree.mouseDownSuper(Tree.java:2052)
    at org.eclipse.swt.widgets.Widget.mouseDown(Widget.java:1084)
    at org.eclipse.swt.widgets.Control.mouseDown(Control.java:2528)
    at org.eclipse.swt.widgets.Tree.mouseDown(Tree.java:2007)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5471)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:220)
    at org.eclipse.swt.widgets.Widget.windowSendEvent(Widget.java:2095)
    at org.eclipse.swt.widgets.Shell.windowSendEvent(Shell.java:2253)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5535)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Display.applicationSendEvent(Display.java:4989)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5138)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
    at org.eclipse.swt.internal.cocoa.NSApplication.sendEvent(NSApplication.java:128)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3610)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

**会话数据：**

```
eclipse.buildId=M20120208-0800
java.version=1.6.0_37
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -keyring /Users/saraiva/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.jee.product -keyring /Users/saraiva/.eclipse_keyring -showlocation 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T11:11:08.380

您的项目可能不是为您的 comp 配置的。尝试从现有源中删除`.classpath`并重新创建项目。`.project`如果不小心将它们提交给 SVN（例如`.settings`以点开头），也请删除任何 eclipse 内部目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T11:50:04.037

编辑文件

```
YouProject/.settings/org.eclipse.wst.common.project.facet.core.xml 
```

添加节点

```
<fixed facet="jst.web"/> 
```

可以解决问题。您应该关闭并重新打开项目，甚至从 Eclipse 中删除项目（不删除内容）然后 File/OpenProjectFromFilesystem 重新加载它。

# ruby-on-rails - Rails 嵌套表单错误：nil:NilClass 的未定义方法“update_attributes”

> ID：13085536
> 
> 赞同：0
> 
> 时间：2012-10-26T10:52:15.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, nested-forms

我正在使用 Mongoid、awesome_nested_fields gem 和 rails 3.2.8。

我有在客户端上运行的功能（添加多个字段），但是当我尝试保存时，我收到“nil:NilClass 的未定义方法`update_attributes'”错误。

以下是所有相关信息：

**配置文件.rb**

```
class Profile
    include Mongoid::Document
    include Mongoid::Timestamps

    has_many :skills, :autosave => true
    accepts_nested_attributes_for :skills, allow_destroy: true  
    attr_accessible :skills_attributes

end 
```

**技能.rb**

```
class Skill
    include Mongoid::Document
    belongs_to :profile 
    field :skill_tag, :type => String
end 
```

**看法**

```
<%= simple_form_for(@profile) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">

            <div class="items">
                <%= f.nested_fields_for :skills do |f| %>
                <fieldset class="item">
                    <%= f.input :skill_tag, :label => 'Skills:' %>
                    <a href="#" class="remove">Remove Skill</a>

                    <%= f.hidden_field :id %>
                    <%= f.hidden_field :_destroy %>
                </fieldset>
                <% end %>
            </div>
            <a href="#" class="add">Add Skill</a>
      </div>

  <div class="form-actions">
    <%= f.button :submit, :class => 'btn' %>
  </div>
<% end %> 
```

**profile_controller.rb**

```
 # PUT /profiles/1
  # PUT /profiles/1.json
  def update
    @profile = Profile.find(params[:id])

    respond_to do |format|
      if @profile.update_attributes(params[:profile])
        format.html { redirect_to @profile, notice: 'Profile was successfully updated.' } # Notice
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @profile.errors, status: :unprocessable_entity }
      end
    end
  end 
```

****** *** ** *** ** *** ******更新******* *** ** *** ** *** **********

 *****我最终切换到 Ryan 的 nested_form gem，它就像一个魅力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:00:39.527

您的消息直接指向失败的执行行，因此该行：

```
if @profile.update_attributes(params[:profile]) 
```

问题是`@profile`实例变量是`nil`并且rails找不到对象的`update_attributes`方法`nil`。

您可以通过进入您启动应用程序的终端轻松检查您的服务器日志中的`params`哈希值，以查看什么`params[:id]`（可能根本没有定义）。

或者您可以在您的应用文件夹中查看您的开发日志：

```
tail -n 1000 development.log | egrep params 
```*****

# ios6 - UINavigationBar 阴影何时显示？(iOS 6)

> ID：13085537
> 
> 赞同：3
> 
> 时间：2012-10-26T10:52:17.487
> 
> 标签：ios6, uinavigationbar

我正在使用带有自定义背景图像的导航栏。当我想添加自定义阴影图像时，我惊讶地发现连默认的阴影图像都不可见。

iOS 6 在 UINavigationBars 上引入了自动投影，这是我希望看到的。来自[http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)的示例项目演示了这一点。

但是，从 Xcode 的 Master-Detail 模板创建新项目不会显示阴影。

阴影究竟何时显示，何时不显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:21:49.583

IOS 6 自动投影默认显示。如果你想禁用/隐藏这个阴影，你可以试试这个：

```
[[UINavigationBar appearance]setShadowImage:[[UIImage alloc] init]]; 
```

我注意到的是，如果我将一个视图控制器从一个项目复制/粘贴到一个新项目，则 UINavigationBar 阴影（有时）不会显示。用新的 viewController 替换复制的 viewController 可以解决问题......（也许是你的情况）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:08:46.933

我在从 iOS5 升级的项目中遇到了同样的问题，但仅在插入到 iOS6 之前的 Xcode 版本中的导航控制器上。在最新版本的 Xcode (4.6) 中删除它们并用新的替换它们解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T07:51:12.147

半年后才发现的变通方法，其实很简单：

```
self.navigationController.navigationBar.clipsToBounds = NO; 
```

这就是说，我仍然认为这是 Xcode 4.4/4.5 如何在故事板中配置导航栏的错误。但至少现在我们知道如何解决它。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T09:59:00.767

除了杨的答案，您可以创建一个类别来进行这样的全局修复

```
@interface UINavigationBar (JTDropShadowFix)

@end

@implementation UINavigationBar (JTDropShadowFix)

- (void)awakeFromNib {
    self.clipsToBounds = NO;
}

@end 
```

如果您正在寻找一个解决方案，而无需使用类别方法，您还可以访问一篇博客文章，讨论如何使用 UINavigationController 子类来实现相同的修复。

[http://ioscodesnippet.com/post/61487770156/custom-shadow-image-on-navigation-bar-ios6-fix](http://ioscodesnippet.com/post/61487770156/custom-shadow-image-on-navigation-bar-ios6-fix)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-29T04:10:27.643

添加一些上下文：我刚刚使用了我 1 岁的应用[Cocktailicious](http://www.cocktailiciousapp.com/)并将根嵌入`UINavigationView`到`UITabBarController`. 之后，旧的在界面生成器中检查`UINavigationBar`了属性*Clip Subviews 。*

在嵌入过程中，我还为标签栏中的新标签添加了第二个导航控制器。令人惊讶的是，这个控制器带有未选中的*剪辑子视图*。感觉像一个xcode问题。

# android - Android：主题和风格

> ID：13085538
> 
> 赞同：0
> 
> 时间：2012-10-26T10:52:18.907
> 
> 标签：android, android-xml, android-theme

我尝试创建一个允许使用更改应用程序中的主题的应用程序，但是如果我将有多个主题，我无法找到如何定义样式和主题。

例如，在 CSS 中我会这样做

```
File: Theme1.css
    div.button {
       font-color: red;
    }

File: Theme2.css
    div.button {
       font-color: blue;
    } 
```

然后通过包含其中一个选择我将使用的主题。

我查看了[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)但这我能找到的并没有显示如何定义如果使用有多个主题。

有人可以给我举个小例子吗

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
              android:padding="0dip" >
            <TextView
                android:id="@+id/my_text"
                android:layout_width="wrap_content"
                android:layout_marginLeft="3dip"
                android:layout_marginRight="3dip"
                android:layout_height="20sp"
                />
</LinearLayout> 
```

那设置文本的颜色和字体大小？并允许 Activity 选择主题之一。

# android - PC 上的应用程序子类的类未找到异常不起作用 - 在 MAC 上正常

> ID：13085540
> 
> 赞同：0
> 
> 时间：2012-10-26T10:52:30.857
> 
> 标签：android, classnotfoundexception

我正在尝试将一个 Android 项目从 Eclipse Mac 带到 PC。

虽然现在一切都终于编译了 - 我得到了应用程序子类的“类未找到错误”。

这就是我对应用程序子类的意思：（来自文档）

```
android:name
    The fully qualified name of an Application subclass implemented for the application. When the application process is started, this class is instantiated before any of the application's components.

    The subclass is optional; most applications won't need one. In the absence of a subclass, Android uses an instance of the base Application class. 
```

这是我的清单中的内容：

```
 <application
        android:name="com.xxx.MyClassToBeInstantiated"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        ... 
```

PC上有什么不同吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:00:55.190

真的很奇怪 - 在 PC 上增加 Eclipse 的内存后，这个错误就消失了。由于内存限制，它可能只是没有正确编译。

# c# - 将控制器/模型中的项目列表传递给javascript中的变量 - 自动完成

> ID：13085541
> 
> 赞同：0
> 
> 时间：2012-10-26T10:52:31.790
> 
> 标签：c#, javascript, asp.net-mvc-3

我在 NamesModel 中有一个方法，它获取所有名称并返回名称列表：

```
public static List<NamesModel> GetAllNames()
{
    List<NamesModel> names = new List<NamesModel>();

    // 
    // code to fetch records
    //

    return names;
} 
```

在我的控制器中：

```
public ActionResult Index()
{
   NamesModel model = new NamesModel();
   model.GetAllNames();

   return View(model);
} 
```

在视图中，我有一个文本框：

```
@Html.TextBox("search-name") 
```

现在在我的 javascript 中，我想从模型（从方法）或控制器中获取所有名称到变量中，例如：

```
<script type="text/javascript">

 $(function () {

     var names = ...........
     $(document).ready(function () {
          $('#search-name').autocomplete({
               source: names
          });
     });
 });
</script> 
```

如果我使用硬编码，那么它可以工作，但我想使用存储在数据库中的名称。是否可以？

硬编码示例：

```
var names = ["abc", "xyz"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:58:24.320

您可以为此使用 Ajax 和 Json

对于您的控制器：

```
[HttpPost]
public JsonResult GetAllNames()
{
   List<NamesModel> names = new List<NamesModel>();

   // 
   // code to fetch records
   //

   return Json(names);
} 
```

或用于调试，以便您可以在浏览器中查看 json：

```
public JsonResult GetAllNames()
{
   List<NamesModel> names = new List<NamesModel>();

   // 
   // code to fetch records
   //

   var result = Json(names);
   result .JsonRequestBehavior = JsonRequestBehavior.AllowGet;
   return result ;
} 
```

（注意这实际上是 jquery，但因为你使用 document.ready 你已经包含了 jquery）

在您的 javascript 中调用上述方法：

```
$.getJSON(@Url.Content("~/ControllerName/GetAllNames/"), function (result) {
         var ListWithNames = data;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:57:32.640

“源”选项属性可以是指向返回 json 数据的 URL 的字符串（[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:57:03.753

我的问题的最佳解决方案是在这个博客中： http: [//theycallmemrjames.blogspot.co.uk/2010/03/jquery-autocomplete-with-aspnet-mvc.html](http://theycallmemrjames.blogspot.co.uk/2010/03/jquery-autocomplete-with-aspnet-mvc.html)

感谢所有试图帮助我的人。

# c# - 在一个网页中的单选按钮选择上显示/隐藏 div，在 asp.net c# 中的另一个网页上显示/隐藏 div

> ID：13085549
> 
> 赞同：0
> 
> 时间：2012-10-26T10:53:09.207
> 
> 标签：c#, asp.net, html

我有 2 个网页。在第一个我 hv 2 带有图像和按钮的单选按钮。在第二个 aspx 页面中，我 hv 2 div。在选择单选按钮时，特定的 div 必须在第二个网页中可见，并且应该隐藏。我对如何使用这两个网页感到困惑。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:09:48.250

您可以只重定向到第二个页面，传递一个查询字符串值，指示页面应该处于的“状态”；例如，当您的按钮被按下并且您已完成其他所有处理时，请执行以下操作：

```
Response.Redirect("/your/other/page?key=" + (myRadioButton.Checked ? "1" : "0")) 
```

然后在您的第二页上，您可以执行以下操作：

```
if (!string.IsNullOrEmpty(Request.QueryString["key"])) {
  if (Request.QueryString["key"] == "0") {
    // don't show some stuff
  } else if (Request.QueryString["key"] == "1") {
    // show some stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:03:01.403

将单选按钮选择存储在某个适当的位置，然后在 Page_Load 上分别读取选择和隐藏 div。

# android - Android：在软键盘 IME 中省略一个键的文本

> ID：13085554
> 
> 赞同：2
> 
> 时间：2012-10-26T10:53:18.553
> 
> 标签：android, android-layout, keyboard, android-softkeyboard, ime

```
In normal textview etc we can ellipsize the text by command:  
android:ellipsize=""

I am customizing the android's soft keyboard. I want to know that is their a way to ellipsize the key of keyboard?

My code is:

<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:horizontalGap="1px"
    android:keyHeight="@dimen/key_height"
    android:keyWidth="10%p"
    android:verticalGap="-5%p" >

    <!-- android:verticalGap="@dimen/verticalGap" > -->

    <Row>
        <Key
            android:codes="555555"
            android:horizontalGap="1.5%p"
            android:isRepeatable="true"
            android:keyEdgeFlags="left"
            android:keyHeight="@dimen/mic_key_height"
            android:keyIcon="@drawable/voice_input"
            android:keyWidth="28.5%p" />
        <Key
            android:codes="111111"
            android:ellipsize="end"
            android:horizontalGap="2%p"
            android:keyEdgeFlags="right"
            android:keyHeight="@dimen/templates_key_height"
            android:keyWidth="67%p" />
    </Row>
    <Row>
        <Key
            android:codes="222222"
            android:ellipsize="end"
            android:horizontalGap="32%p"
            android:keyEdgeFlags="right"
            android:keyHeight="@dimen/templates_key_height"
            android:keyWidth="67%p" />
    </Row>
    <Row>
        <Key
            android:codes="333333"
            android:ellipsize="end"
            android:horizontalGap="32%p"
            android:keyEdgeFlags="right"
            android:keyHeight="@dimen/templates_key_height"
            android:keyWidth="67%p" />
    </Row>
    <Row>
        <Key
            android:codes="777777"
            android:ellipsize="end"
            android:horizontalGap="32%p"
            android:keyEdgeFlags="right"
            android:keyHeight="@dimen/templates_key_height"
            android:keyWidth="67%p" />
    </Row>
    <Row>
        <Key
            android:codes="666666"
            android:horizontalGap="1.5%p"
            android:isModifier="true"
            android:keyEdgeFlags="left"
            android:keyHeight="@dimen/templates_key_height"
            android:keyIcon="@drawable/voice_keyboard_enable"
            android:keyWidth="28.5%p"
            android:verticalGap="1.5%p" />
        <Key
            android:codes="444444"
            android:horizontalGap="1.7%p"
            android:keyEdgeFlags="right"
            android:keyHeight="@dimen/templates_key_height"
            android:keyLabel="@string/more_templates"
            android:keyWidth="67%p"
            android:verticalGap="1%p" />
    </Row>

</Keyboard> 
```

我正在定制安卓的软键盘。我想知道这是他们省略键盘键的一种方法吗？我动态地将文本添加到键中，但文本流出键边界。我想省略密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:03:08.500

你不能椭圆化，因为它有标签，而不是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T17:39:00.450

这不是一个简单的方法，但是您可以按照您希望的方式为每个键创建图像，然后您将以下内容放入键盘：

```
android:keyIcon="" 
```

# regex - Perl 正则表达式用自己替换数字，只是高一个

> ID：13085561
> 
> 赞同：11
> 
> 时间：2012-10-26T10:53:49.887
> 
> 标签：regex, perl, numbers

我有一个文本，如何将其中的所有数字替换为仅高一个的数字？

我尝试过以下方法：

```
$buffer_content=~s/(\d)/($1++)/g; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T10:55:26.010

使用`s///e`- 评估修饰符，您可以将任意 perl 代码放在第二部分。

```
$x = "hello 3";
$x =~ s/([0-9]+)/$1 + 1/eg;
print $x;

// hello 4 
```

参考： http: [//perldoc.perl.org/perlretut.html#Search-and-replace](http://perldoc.perl.org/perlretut.html#Search-and-replace)

# facebook - 有脸书分享插件吗？

> ID：13085564
> 
> 赞同：0
> 
> 时间：2012-10-26T10:53:53.010
> 
> 标签：facebook

我一直用这个：

```
<script>function fbs_click() {u=location.href;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;}</script><a rel="nofollow" href="http://www.facebook.com/share.php?u=http://www.google.com" onclick="return fbs_click()" target="_blank">Share on Facebook</a> 
```

而且我从未见过产生相同“效果”的“官方插件”。为什么？有没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:53:32.017

Facebook 分享按钮现已**弃用**，但您仍然可以使用`sharer.php`

**Javascript：**

```
function fbShare(url, title, descr, image, winWidth, winHeight) {
        var winTop = (screen.height / 2) - (winHeight / 2);
        var winLeft = (screen.width / 2) - (winWidth / 2);
        window.open('http://www.facebook.com/sharer.php?s=100&p[title]=' + title + '&p[summary]=' + descr + '&p[url]=' + url + '&p[images][0]=' + image, 'sharer', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width='+winWidth+',height='+winHeight);
    } 
```

**HTML：**

```
<a href="javascript:fbShare('http://jsfiddle.net/stichoza/EYxTJ/', 'Fb Share', 'Facebook share popup', 'http://goo.gl/dS52U', 520, 350)">Share</a> 
```

*   JS 要点：[https ://gist.github.com/Stichoza/4942775](https://gist.github.com/Stichoza/4942775)
*   现场演示：http: [//jsfiddle.net/stichoza/EYxTJ/](http://jsfiddle.net/stichoza/EYxTJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:02:32.300

Facebook 已经提供了一组插件，您可以[在此处查看](https://developers.facebook.com/docs/plugins/)。基本上你可以使用 Like 插件。

但您也可以使用[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)，这里是一个[示例](http://www.fbrell.com/fb.ui/feed)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:58:25.427

这曾经是官方的分享插件。

它已被弃用，取而代之的是[发送按钮](https://developers.facebook.com/docs/reference/plugins/send)，或者如果您的应用正在验证用户，[发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)

# java - vaadin RegexpValidator 正则表达式

> ID：13085572
> 
> 赞同：0
> 
> 时间：2012-10-26T10:54:17.257
> 
> 标签：java, regex, vaadin

我正在使用内置的 vaadins RegexpValidator 来检查有效的表单字段。我有一个描述字段，只要它不为空，就可以有任何字符。最初我使用的是“。+”，它非常有效，但是当我从 TextField 转换该字段时到 TextArea 它不再匹配我的字符串，因为“。+”不检查换行符或空格。

我试过做 "(.|\n|\r)+" 但这也包括写一个空格或换行符。

我只需要确保我输入了至少一个字符就可以了。通常使用正则表达式，您可以使用 "^\s*$" 检查空白，但 vaadins RegexpValidator 结果必须与您的字符串匹配，所以我正在寻找的内容基本上与 "^\s*$" 相反？但至少包括一个字符？RegexpValidator 真的让我很困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:02:39.797

如果您想允许纯空白文本，您可以使用

```
[\s\S]+ 
```

`\s`一个空白字符

`\S`非空白字符

这将匹配至少一个字符并且还将匹配换行符，因为它们包含在`\s`

如果您想拥有**至少一个非空白字符**，您可以使用

```
^\s*\S 
```

这将在字符串的开头检查 0 个或多个空格（这将覆盖前导换行符），并且在找到第一个非空格时会成功。

# f# - 一些基本的seq和list问题

> ID：13085575
> 
> 赞同：0
> 
> 时间：2012-10-26T10:54:21.617
> 
> 标签：f#

> **可能重复：**
> [链表分区函数和相反的结果](https://stackoverflow.com/questions/7199122/linked-list-partition-function-and-reversed-results)

实际上我不关心输入类型或输出类型，任何一个`seq, array, list`都可以。（它不必是通用的）目前我的代码`list`作为输入和`(list * list)`输出

```
let takeWhile predicator list =
   let rec takeWhileRec newList remain =
       match remain with
       | [] -> (newList |> List.rev, remain)
       | x::xs -> if predicator x then
                     takeWhileRec (x::newList) xs
                  else
                     (newList |> List.rev, remain)
   takeWhileRec [] list 
```

但是，有一个陷阱。据我所知，`List.rev`是 O(n^2)，它可能会主导整体速度吗？我认为它甚至比丑陋的解决方案还要慢：`Seq.takeWhile`, then `count`, then take `tail`n 次...仍然是 O(n)

（如果有一个 C# 列表，那么我会使用它而不必反转它......）

`Array.ofList`一个附带问题， and `List.toArray`，或更一般地说，`A.ofB`and `B.ofA`in之间有什么区别`List, Seq, Array`？

等同`seq myList`于`List.toSeq myList`?

另一个问题，嵌套`Seq.append`的复杂性是否与`Seq.concat`？

例如

```
 Seq.append (Seq.append (Seq.append a b) c) d // looks aweful
  Seq.concat [a;b;c;d] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:21:34.113

要回答您的问题：

1) [List.rev](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/local.fs#L117)的时间复杂度是`O(n)`，最坏情况的复杂度`takeWhile`也是`O(n)`。所以使用`List.rev`不会增加函数的复杂性。使用`ResizeArray`可以帮助您避免`List.rev`，但您必须容忍一些突变。

```
let takeWhile predicate list =
   let rec loop (acc: ResizeArray<_>) rest =
       match rest with       
       | x::xs when predicate x -> acc.Add(x); loop acc xs
       | _ -> (acc |> Seq.toList, rest)
   loop (ResizeArray()) list 
```

2）没有区别。`Array.ofList`并`List.toArray`在内部使用相同的功能（参见[此处](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/array.fs#L140)和[此处](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/list.fs#L49)）。

3）。我认为`Seq.concat`与一堆相同的复杂性`Seq.append`。在 和 的上下文中， `List`比因为您有更多信息来为输出预先分配空间而更有效。`Array``concat``append`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:38:43.550

1）相关的实现`List.rev`在`local.fs`编译器中——它是

```
// optimized mutation-based implementation. This code is only valid in fslib, where mutation of private
// tail cons cells is permitted in carefully written library code.
let rec revAcc xs acc =
    match xs with
    | [] -> acc
    | h::t -> revAcc t (h::acc)

let rev xs =
    match xs with
    | [] -> xs
    | [_] -> xs
    | h1::h2::t -> revAcc t [h2;h1] 
```

该评论确实看起来很奇怪，因为没有明显的突变。请注意，这实际上`O(n)`不是`O(n^2)`

2) 正如 pad 所说，没有区别 - 我更喜欢使用`to..`我认为的

```
A
|> List.map ...
|> List.toArray 
```

看起来比

```
A
|> List.map ...
|> Array.ofList 
```

但是，这只是我。

3)

附加（编译器源）：

```
[<CompiledName("Append")>]
let append (source1: seq<'T>) (source2: seq<'T>) =
    checkNonNull "source1" source1
    checkNonNull "source2" source2
    fromGenerator(fun () -> Generator.bindG (toGenerator source1) (fun () -> toGenerator source2)) 
```

请注意，对于每个附加，我们都会获得一个必须遍历的额外生成器。相比之下， concat 实现将只有 1 个额外的功能，而不是`n`这样使用`concat`可能更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:21:32.737

这个怎么样：

```
let takeWhile pred =
    let cont = ref true
    List.partition (pred >> fun r -> !cont && (cont := r; r)) 
```

它使用一个高效实现的库函数 List.partition。希望这就是你的意思:)

# java - 如何在保存用户输入的超链接的同时实现o嵌入java jquery web应用程序

> ID：13085580
> 
> 赞同：0
> 
> 时间：2012-10-26T10:54:26.920
> 
> 标签：java, jsp, oembed

我有一个 java jquery web 应用程序，用户可以在其中粘贴 utube，vimeo url 任何人都可以告诉我如何实现 o-embedd 以在我的 jsp 页面中向用户显示 url 的图像/描述的缩略图

# java - 防止 SearchView 崩溃

> ID：13085582
> 
> 赞同：1
> 
> 时间：2012-10-26T10:54:31.763
> 
> 标签：java, android

我的操作栏中有一个`SearchView`。当用户搜索时，我调用 my`AsyncTask`开始获取数据，但在重新调整数据后，`SearchView`崩溃。

这是我创建搜索小部件的代码：

```
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.search, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    if (this.objAdapter == null) {
        searchView.setIconified(false);
        searchView.requestFocusFromTouch();
    }

    return true;

} 
```

我想防止用户折叠`SearchView`. 我希望搜索字符串始终可见。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:09:14.757

使用[搜索视图示例](http://www.edumobile.org/android/android-development/action-bar-search-view/)。

对于您的情况，请使用操作标志 - SHOW_AS_ACTION_WITH_TEXT

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-01T10:36:14.117

在 SearchView 实例上，您需要调用：

```
searchView.setIconified(false)
searchView.setOnCloseListener(new SearchView.OnCloseListener() {
  @Override
  public boolean onClose() {
    return true; //returning true will stop search view from being collapsed 
  }
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-03T17:27:21.987

将`iconifiedByDefault`属性设置为`false`。 [http://developer.android.com/reference/android/widget/SearchView.html](http://developer.android.com/reference/android/widget/SearchView.html)

# android - 在Android中使用反射api时出现NoSuchMethod异常

> ID：13085585
> 
> 赞同：0
> 
> 时间：2012-10-26T10:54:43.047
> 
> 标签：android

我的 android 应用程序中有 2 个类。`Class1`和`Class2`。我在 class2 中有一些方法，我想使用反射 API 调用它们。

要调用 class2 的“printString”，我使用以下代码：

```
public void printString(String str) {
        Log.d("TAG", "in printString" + str);
    } 
```

反射代码：

```
Method method = Class2.class.getMethod("printString");
method.invoke("asjdhaskdf", null); 
```

但是使用此代码会引发以下异常：

```
10-26 16:10:16.931: W/System.err(25036): java.lang.NoSuchMethodException: printString []
10-26 16:10:16.931: W/System.err(25036):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
10-26 16:10:16.931: W/System.err(25036):    at java.lang.Class.getMethod(Class.java:915)
10-26 16:10:16.931: W/System.err(25036):    at com.sample.mobile.android.ui.activities.Class1Activity$1.onClick(Class1Activity.java:56)
10-26 16:10:16.931: W/System.err(25036):    at android.view.View.performClick(View.java:3627)
10-26 16:10:16.931: W/System.err(25036):    at android.view.View$PerformClick.run(View.java:14329)
10-26 16:10:16.936: W/System.err(25036):    at android.os.Handler.handleCallback(Handler.java:605)
10-26 16:10:16.936: W/System.err(25036):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-26 16:10:16.936: W/System.err(25036):    at android.os.Looper.loop(Looper.java:137)
10-26 16:10:16.941: W/System.err(25036):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-26 16:10:16.941: W/System.err(25036):    at java.lang.reflect.Method.invokeNative(Native Method)
10-26 16:10:16.941: W/System.err(25036):    at java.lang.reflect.Method.invoke(Method.java:511)
10-26 16:10:16.941: W/System.err(25036):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
10-26 16:10:16.941: W/System.err(25036):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
10-26 16:10:16.941: W/System.err(25036):    at dalvik.system.NativeStart.main(Native Method) 
```

请告知我做错了什么。我已经阅读了互联网上可用的教程，但没有任何效果。

**更新 1**

***一个提示点：我的代码从未到达“method.invoke”行。它在我使用“getMethod”函数获取方法的行上引发异常。***

Class2代码：

```
package com.sample.mobile.android.utils;

public class Class2{

    public void printString(String str) {
       Log.d("TAG", "in printString" + str);
    }

} 
```

class1Activity 的代码：

```
package com.sample.mobile.android.ui.activities;

public class Class1Activity extends Activity {

    private Class2 obj; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        obj = new Class2();
        Class cls;
        try {
            cls = Class
                    .forName("com.sample.mobile.android.utils.Class2");

            Method[] methods = cls.getMethods();
            Log.d("TAG", "length -- " + methods.length);

            for (int i = 0; i < methods.length; i++) {
                Log.d("TAG", "name -- " + methods[i].getName());
                // this is printing the name of all  methods including "printString".
            }

            Method method = cls.getMethod("printString");
            method.invoke(obj, "asjdhaskdf");

        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:03:04.257

因为没有这样的方法

您正在尝试在 String 类上调用此方法

它应该是`method.invoke(instanceofClass2, "asjdhaskdf")`

**编辑：**匹配更新 1

...并且由于`printString`具有 String 参数，因此您应该`getMethod`像这样使用：

```
Method method = Class2.class.getMethod("printString", String.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:02:44.477

根据[Method.invoke](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)的文档，第一个参数是您要在其上调用该方法的对象，因此在您的情况下，您试图在不存在`printString`的类上调用。`String`

我认为您打算使用：

```
Class2 myObject = new Class2();
Method method = Class2.class.getMethod("printString");
method.invoke(myObject, "asjdhaskdf"); 
```

# c# - 对十六进制和十进制格式使用“if”进行操作

> ID：13085587
> 
> 赞同：0
> 
> 时间：2012-10-26T10:54:49.777
> 
> 标签：c#

> **可能重复：**
> [C#将整数转换为十六进制并再次返回](https://stackoverflow.com/questions/1139957/c-sharp-convert-integer-to-hex-and-back-again)

我想用“if”编写一个代码来让我这样做：我们正在启动程序，我们有一个文本框 - “textbox1”和一个按钮 - “button1”。我们需要开始一个从 0 开始计数的循环，每次单击按钮 1 都会带来 +1，所以现在我们有：开始程序>单击按钮>循环开始，我们有 1>再次单击 - 我们有 2 等等. （这个 1,2,3 ...n 不会显示在任何地方）之后我们需要以这种 HEX 格式显示循环的当前值 - 在 textbox1 中显示“00-00-00-00”。所以我们得到：第一次点击将是循环的第一个时刻，所以我们有当前的 DEC 值“1”，在十六进制中它必须是 - “00-00-00-01”，这是最热门的部分（对我来说.. ) 当十六进制中的 DEC 值 = 255 时，它必须是 -“00-00-00-FF”，并且当循环（dec 值）达到 256 时，它必须是“

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:36:10.290

这段代码应该做你想做的事：

```
public int Counter { get; set; }

private void button1_Click(object sender, System.EventArgs e) {
    Counter++;
    textbox1.Text = Counter.ToString("X");
} 
```

但是里面没有“如果”... :(

# c# - 从后面的代码在 couchbase 中创建一个文档

> ID：13085590
> 
> 赞同：0
> 
> 时间：2012-10-26T10:55:06.273
> 
> 标签：c#, nosql, couchbase

我一直在使用 CouchDB。现在我正在尝试将我的应用程序从 CouchDb 迁移到 CouchBase。

什么是等效代码

```
public CouchResponse CreateDocument(string jsonForDocument); 
```

在沙发上。？

我已经使用以下代码来查询 couchdb 中的创建文档..

```
CouchDatabase oCouchDB;

oClient = new CouchClient(host, port, username, password, false, AuthenticationType.Cookie, 30000);
oCouchDB = oClient.GetDatabase(baseDatabase);
CouchResponse resp = oCouchDB.CreateDocument(jsonString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:07:07.737

Couchbase 中的 CRUD 函数是通过 memcached API（键/值）执行的。

请参阅[http://www.couchbase.com/develop/net/next](http://www.couchbase.com/develop/net/next)了解更多信息。

# visual-studio-2010 - 调试“需要的对象第 1 行”错误

> ID：13085591
> 
> 赞同：1
> 
> 时间：2012-10-26T10:55:08.973
> 
> 标签：visual-studio-2010, internet-explorer, internet-explorer-7

举个例子；

IE7 / IE7 模式 - IE8 和 IE9 @ [http://psc.gov/](http://psc.gov)

IE8/IE7 完全没有帮助：'Object required line 1'

在 IE9- IE7 模式下，我收到一条不同的、稍微令人沮丧的、几乎有用的消息：

“无法获取属性‘offsetHeight’的值：对象为空或未定义”（再次在第 1 行字符 1 处）

grep-ing for 'offsetHeight' 在各种文件中产生大约 470 行代码。显然，挖掘数百个文件并不是理想的解决方案......

如何进行调试？我试过使用 Visual Studio，但在 IE7 模式下，我无法让 IE 将调试会话传递给 Visual Studio。

所以这个问题是双重的；

1）如何调试这些类型的错误？

2) 如何在 IE7 模式下将调试会话传递给 Virtual Studio？

感谢您想提供的任何其他有用的掘金（工具、方法等）

PS：如果有信誉的人可以创建 object-required-line-1 标记或类似标记，我会用它标记它。

# iphone - 为 UITableView 使用键值对

> ID：13085595
> 
> 赞同：0
> 
> 时间：2012-10-26T10:55:18.660
> 
> 标签：iphone, ios, cocoa-touch, nsdictionary, key-value

我创建了一个将列出名称的应用程序。每当点击名称时，我想返回特定名称的年龄。我正在动态添加姓名和年龄。如果我使用键值对，检索我猜的值会更容易。谁能告诉我如何在这里使用 KeyValue(NSDictionary) 对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:05:19.260

```
NSDictionary *nameAgePair=[[NSDictionary alloc]init];
[nameAgePair setValue:@"30" forKey:@"Name1"];
[nameAgePair setValue:@"25" forKey:@"Name2"];

NSArray *arr=[nameAgePair allKeys];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [[tableView dequeueReusableCellWithIdentifier:@"cell"] autorelease];

     UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, cell.frame.size.width, cell.frame.size.height)];
     [lbl setText:[arr objectAtIndex:indexPath.row]];
     [cell.contentView addSubview:lbl];

} 
```

您可以像这样访问选定的值。

```
[nameAgePair objectForKey:@"selected row"]; 
```

注意：如果您使用键值编码，您的键（名称）应该是唯一的。

# javascript - 使用 jquery 和数据库检查更改

> ID：13085598
> 
> 赞同：0
> 
> 时间：2012-10-26T10:55:40.880
> 
> 标签：javascript, jquery, web-applications, asynchronous

我正在做一个通知系统。发布新帖子时，用户会立即通过屏幕上的小通知收到通知。

我目前正在使用这个：

```
setInterval(function(){
 checkForChanges();
}, 2*1000); 

function checkForChanges(){
    $.post("http://"+ document.domain + "/posts/checkForChanges/",
        function(dat){
           if(dat>0){
              ....
              /*create notification*/
           }

    });
} 
```

我想知道这是否是正确的方法。因为，这是每 2 秒调用一次 PHP 函数并对数据库进行一次查询。如果没有新的变化，它不会做任何事情......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:59:34.987

是的，投票是正确的方式。无法将通知从服务器发送到客户端。客户必须要求他们。

2 秒可能太频繁了。如果您可以使用 10 个或更多，那可能会更好，但这一切都取决于用户数量、要执行的检查的复杂性（权重）以及“接近实时”的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:06:33.467

这也很好。你也可以用 websocket 来做 -
[http://socketo.me/](http://socketo.me/)

# ruby-on-rails - 在 Heroku 记录响应时间

> ID：13085599
> 
> 赞同：4
> 
> 时间：2012-10-26T10:55:46.343
> 
> 标签：ruby-on-rails, heroku

Heroku 添加了一个名为 X-Request-Start 的 HTTP 标头。它是一个unix时间戳。

我在 Heroku 有一个 Rails 3.2 应用程序，想记录 HTTP 请求的响应时间。

在 Rails 中可能集成的最新点是什么：

```
start = Time.at(env['HTTP_X_REQUEST_START'].to_f / 1000.0).utc
response_time = Time.now.utc - start 
```

我正在考虑实现一个 Rack 中间件来计算响应时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T12:50:12.920

你知道 Heroku 已经记录了你的响应时间吗？在您的终端中`heroku logs -t --app your-app-name`，您将看到`service=xxxms`每个请求所需的毫秒数。

# mechanize-python - 使用 Python 的 Mechanize 提交 Html 表单 - 两个提交按钮，没有 ID

> ID：13085600
> 
> 赞同：1
> 
> 时间：2012-10-26T10:55:53.993
> 
> 标签：mechanize-python

我正在尝试在包含 1 个表单和两个执行不同任务的不同按钮的 PHP/HTML 页面上提交一个 HTML 按钮。我需要提交第二个提交按钮。问题是两个按钮都没有 id 属性，并且仅通过它们的标题标签来区分。我需要通过选择框（我认为这是正确的）选择订单和订单行，然后按表单上的第二个“开始”/提交按钮。例如

```
<form>
....
<input class="button" type="submit" value="Go">
.... 
```

然后再往下我们有...

```
<select class="sfield" name="last">
    <option value="0" selected="">From: First order</option>
    <option value="1">From: 19/10/2012 16:22</option>
</select>
<select class="sfield" name="items">
    <option value="1" selected="">Include: Orders and items</option>
    <option value="0">Include: Order lines only</option>
</select>
<input class="button" type="submit" onclick="this.form.action.value='export'" title="Generate CSV file" value="Go"> 
```

我的Python代码片段如下...

```
br.form['last']  = ['0']  # Select the 'From First Order'
br.form['items'] = ['1']  # Select both Orders and Order Lines
br.submit()

# When I uncomment the line below I can process a CSV file but it just contains Orders only!
# br.open("http://www.mysite.com/admin/ordermanager.php?action=export")  

# Read and process CSV file from csv link displayed on repost of submitted form....
# this section below works fine.

for link in br.links(url_regex=r"export",nr=0):
    resp = br.follow_link(link) 
    content = resp.read()
    Last_Run_Date = strftime("%Y%m%d%H%M%S", localtime())
    with open('c:\python27\%s.csv' % Last_Run_Date, 'w') as fo: 
        fo.write(content) 
```

似乎没有办法在 br.submit 中指定 title 属性，例如 Mechanize 文档中的 br.submit(title='Generate CSV file') 。我假设 br.submit() 在我想要第二个时选择第一个提交控件？有谁知道解决这个问题的聪明方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:41:53.430

您可以使用提交按钮的编号： br.submit(nr=2) nr 从 0 开始作为第一个提交按钮

# java - 正则表达式替换包含特定出现的图像标签？

> ID：13085601
> 
> 赞同：0
> 
> 时间：2012-10-26T10:56:04.727
> 
> 标签：java, regex, string

我有以下消息字符串。我想用新的字符串 cid 替换所有包含序列出现的图像标签，即 ?custId=1234：

```
 String message = "Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1234\"/>"; 
```

这是我在通过一些正则表达式教程后尝试的，它用 cid: 替换了所有图像标签的出现。**我不知道如何在正则表达式中再添加一个过滤器，即 ?custId=1234 以便仅替换那些包含 ?custId=1234 的图像标签**

```
 message = message.replaceAll("\\<img.*?>", "cid:"); 
```

**编辑：- 例如，如果输入是**

```
 "Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1234\"/>"; 
```

**输出应为**
“需要处理图像标签 cid：”；

因为输入包含 img 标签和 ?custId=1234 两者

**输入是**

```
 "Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1235\"/>"; 
```

**输出应该是**

```
 "Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1235\"/>"; 
```

因为输入不包含 ?custId=1234 两者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:00:21.123

尝试这个： -

```
message = message.replaceAll("<img.*?\\?custId=1234.*?>", "cid:"); 
```

**对于您给定的输入字符串：-**

```
"Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?"
+ "custId=1234\"/>" 
```

**这会给你： -**

```
"Need to process  image tag cid:" 
```

**也用于输入**： -

```
"Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1235\"/>" 
```

**输出**： -

```
"Need to process  image tag <img src=\"http://danny.oz.au/p/56214815-tripod.jpg?custId=1235\"/>" 
```

另外，我建议你看一下[**`Jsoup - Java HTML Parser`**](http://jsoup.org/)，你应该用它来解析你的 HTML。正则表达式不是解析 HTML 的好主意。您只能解析有限范围的标签。

你也可以使用[**`HTML Cleaner`**](http://htmlcleaner.sourceforge.net/)

* * *

**更新： -**

如果你也想`dot (.)`匹配`newline`，你可以使用`PAttern.DOTALL`标志。或者，在 的情况下`String.replaceAll()`，您可以`(?s)`在模式的开头添加一个，这相当于这个标志。

来自[`Pattern.DOTALL`-JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)：-

> Dotall 模式也可以通过嵌入式标志表达式 (?s) 启用。（s 是“单行”模式的助记符，在 Perl 中就是这样称呼的。）

因此，您可以像这样修改您的模式：-

```
message = message.replaceAll("(?s)<img.*?\\?custId=1234.*?>", "cid:"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:01:54.063

您可以使用 ths String Contains 函数首先过滤具有“custid =”的那些。例如

```
if (message.contains("custId=1234") {
    message = message.replaceAll("\\<img.*?>", "cid:");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:15:22.240

我想我有你[Demo](http://regex101.com/r/tB6fQ9)

`"Need to process image tag.*\?custId=(\d+)"`

在这里，您有一个反向引用您的 id 的正则表达式，然后您可以打印 Need to procces the cId: match.group(1) 或任何您需要的东西。

# facebook-graph-api - 如何获取我所有 Facebook 页面 ID 的列表，然后删除它们？

> ID：13085609
> 
> 赞同：0
> 
> 时间：2012-10-26T10:56:29.723
> 
> 标签：facebook-graph-api

这是我拥有管理员权限的页面。我试图找出一种方法来获取所有帖子 ID 的列表，然后运行删除它们的查询？基本上，我想清除我在此页面上发布的所有帖子，而不必一一进行……因为这将花费很长时间。

这可能吗？最简单的方法是什么？我认为必须有一种方法可以使用图形 api 来获取 ID，然后运行 ​​DEL 命令

谢谢！斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:18:02.987

如果所有帖子都是由一个应用程序发布的，那么您可以循环运行`https://graph.facebook.com/PAGE_ID/posts`并在每个帖子上调用 HTTP DELETE

```
https://graph.facebook.com/POST_ID?access_token=ACCESS_TOKEN 
```

> 只要您的应用程序创建了帖子，您就可以删除帖子。您可以通过向具有 publish_stream 权限的 POST_ID 对象发出 HTTP DELETE 请求来删除帖子。

因此，如果所有帖子都不是由应用程序发布的，这是不可能的。

# java - Excel 2010 在关闭工作簿时收到警报

> ID：13085615
> 
> 赞同：1
> 
> 时间：2012-10-26T10:56:57.463
> 
> 标签：java, excel, excel-2010

我正在使用 Excel 2010，并且正在使用 java excel 连接器库（来自 www.moyosoft.com）来打开、读取/写入和关闭 excel 文件。

如果未保存工作簿，我不想在关闭工作簿时看到任何警报，因此我将 setDisplayAlerts 设置为 False。

但它在 Excel 2010 中不起作用。在 Excel 2007 中，它曾经可以正常工作。

我在互联网上搜索并发现了这个[链接](http://social.msdn.microsoft.com/Forums/sv/exceldev/thread/adbad831-d9fc-402a-9a00-8252d6fde3d4)，它说将属性 AskToUpdateLinks 设置为 false。我也这样做了，但在关闭工作簿时我仍然会弹出一个窗口。

有什么想法我缺少什么以及如何解决？

Rgds，萨潘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:12:03.200

就在关闭工作簿之前调用：`workbook.saved = true`where workbook 是您要关闭的工作簿。

这将告诉 Excel 您确实保存了工作簿（即使您没有保存），因此将避免警报。

编辑：我刚刚检查了有关您正在使用的文档。试试`workbook.setSaved(true)`which 可能符合我的指示（文档没有说明该方法的作用）。

# php - Jasperserver 网址 - PHP

> ID：13085617
> 
> 赞同：0
> 
> 时间：2012-10-26T10:57:24.080
> 
> 标签：php, soap, jasperserver, vtiger

当我登录 Jasperserver 时，一切正常。我可以使用参数执行所有报告。

但是当我使用该 URL 通过 PHP 登录时：

```
$url="https://company.domain.com:8443/jasperserver/home.html?j_username=".$login_user_name."&j_password=".$accesskey; 
```

每次收到消息时，我都无法执行带有参数（日期）的报告：

> 输入有效的日期格式...

# java - 公开一个将对象作为参数的方法的 Web 服务

> ID：13085621
> 
> 赞同：0
> 
> 时间：2012-10-26T10:57:38.243
> 
> 标签：java, web-services, jax-ws

我正在使用 JAX-WS Web 服务。我需要编写一个 Web 服务，该服务公开一个将对象作为参数的方法。因此，调用此 Web 服务的客户端可以传递任何类型的对象，包括用户定义的类对象。例如：

```
public String invokeMe(Ojbect obj); 
```

从客户端 Web 服务：我将用户定义的类对象作为参数传递给公开的方法。

```
Pitta obj = new Pitta(); //Pitta is the name of a class. 
```

例如：

```
String result = invokeMe(obj); 
```

任何人都可以请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:10:50.230

您不能创建以 an作为参数的`JAX-WS`Web 方法。基于，因此您只能将支持的类型作为 Web 方法参数传递。不是 JAXB 支持的类型。`java.lang.Object``JAX-WS``JAXB``JAXB``java.lang.Object`

我的建议是创建一个对象并使其成为所有其他对象的父对象，这些对象可能作为参数传递给您的 Web 方法。例如：

```
public class ParentObj {...}

public class WebParam1 extends ParentObj {...}

public class WebParam2 extends ParentObj {...}

public class WebParam3 extends ParentObj {...} 
```

和方法：

```
public void someMethod(ParentObj obj) {...} 
```

然后你就可以通过`WebParam1`, `WebParam2`, `WebParam3`.

当然，如果您使用`Java-First`方法，请不要忘记注释。如果`WSDL-FIRST`：写`XSD`代表你的对象。

# android - 获取被点击项目的名称

> ID：13085622
> 
> 赞同：0
> 
> 时间：2012-10-26T10:57:39.500
> 
> 标签：android, listview

我已经编写了从数据库中获取数据并将其绑定到列表视图的代码，现在我想从列表视图中单击特定项目并获取被单击的项目的名称。

```
Cursor cursor = dbHelper.fetchAllRecords();
        String[] columns = new String[] {
                RecordsDbAdapter.KEY_NAME,
                RecordsDbAdapter.KEY_BIRTHDAY,

        };
        int[] to = new int[] {
                R.id.name,
                R.id.birthdate,
        };
        dataAdapter = new SimpleCursorAdapter(
                this, R.layout.row,
                cursor,
                columns,
                to);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(dataAdapter);
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text
                Toast.makeText(getApplicationContext(),"cominggggg", Toast.LENGTH_SHORT).show();

            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:10:34.313

```
Toast.makeText(getApplicationContext(), "Click ListItem Text "
                                + ((TextView) view.findViewById(R.id.Txt))
                                        .getText().toString(), Toast.LENGTH_LONG).show(); 
```

您可以显示带有所选项目名称的吐司

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:36:34.943

像这样编辑你的代码：-

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            TextView textView = (TextView) view;
            Toast.makeText(getApplicationContext(),textView.getText().toString(), Toast.LENGTH_SHORT).show();

        }
    }); 
```

# c++ - CEF 和 *.pak 文件中的本地化字符串

> ID：13085624
> 
> 赞同：4
> 
> 时间：2012-10-26T10:57:46.300
> 
> 标签：c++, localization, chromium, chromium-embedded

我开发了一个使用铬嵌入式框架控件的应用程序。我用 C++ 编写。我想使用 CEF mechanizm 来本地化应用程序（如果存在）。我可以将应用程序的自定义字符串嵌入到 CEF .pak 文件（en-US.pak 等）中，以便我可以在运行时检索这些本地化字符串吗？如果是这样，我如何嵌入它们以及如何在我的应用程序代码中检索给定的嵌入字符串？

如果 .pak 文件不是这种情况，那么是否还有其他通过 CEF 本地化应用程序的能力？你能分享任何想法吗？

谢谢

# jquery - 出现在某些地图元素下的 JQuery 弹出窗口

> ID：13085628
> 
> 赞同：2
> 
> 时间：2012-10-26T10:57:55.083
> 
> 标签：jquery, dialog, popup, openlayers, z-order

JQuery 和 OpenLayers 都相当新。一切都很顺利，直到我尝试使用 JQuery 的对话框类打开一个模式对话框。

该对话框工作正常，只是它出现在地图的某些元素下：

![在此处输入图像描述](../Images/be42968bff5586bab81e345d31313bee.png)

这在 Opera 和 Chrome 中都是一样的（其他未测试）。任何人都可以提出解决此问题的方法吗？谢谢。

编辑：我在[这里](http://jsfiddle.net/GRVuZ/)创建了一个演示问题的小提琴。

HTML：

```
<body>
    <div id="map"></div>

    <div id="popup" title="Test">
        <p>Blah blah</p>
    </div>
</body> 
```

Javascript：

```
var map;

$(function () {

    //init map
    map = new OpenLayers.Map('map', {});
    var wms = new OpenLayers.Layer.Google('Google Map Layer', { type: google.maps.MapTypeId.HYBRID });

    map.addLayer(wms);

    if (!map.getCenter()) {
        map.zoomToMaxExtent();
    }

    //init popup
    $("#popup").dialog({
        height: 400,
        width: 300,
        modal: true
    });
});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T11:39:17.393

看起来如果您添加`position:relative;`到地图中，它会按预期工作。

```
#map { position:relative; width:200px; height:200px; } 
```

[例子](http://jsfiddle.net/GRVuZ/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:38:52.750

一切都是`z-index`为了你的元素。这是一个主要工作的小提琴（您只需要找到“使用条款”链接的类或 ID 并将其添加到下面的第一行）：http: [//jsfiddle.net/GRVuZ/5/](http://jsfiddle.net/GRVuZ/5/)

```
.gmnoprint, .zolControlZoom, .olControlNoSelect {z-index:900 !important;}
#jpopup {z-index:1000;} 
```

# java - Mybatis 嵌套集合不能正确使用列前缀

> ID：13085631
> 
> 赞同：3
> 
> 时间：2012-10-26T10:58:17.033
> 
> 标签：java, sql, spring, mybatis, ibatis

我需要使用 mybatis 映射为另一个集合中的对象设置集合。

它不使用 columnPrefix 对我有用，但我需要它，因为有很多可重复的列。

```
 <resultMap id="ParentMap" type="org.example.mybatis.Parent">
        <id column="Id" jdbcType="VARCHAR" property="id" />
        <result column="Name" jdbcType="VARCHAR" property="name" />
        <result column="SurName" jdbcType="VARCHAR" property="surName" />

        <collection property="childs"
        javaType="ArrayList" ofType="org.example.mybatis.Child"
        resultMap="ChildMap" columnPrefix="c_"/>       
    </resultMap>

<resultMap id="ChildMap" type="org.example.mybatis.Parent">
    <id column="Id" jdbcType="VARCHAR" property="id" />
    <result column="ParentId" jdbcType="VARCHAR" property="parentId" />
    <result column="Name" jdbcType="VARCHAR" property="name" />
    <result column="SurName" jdbcType="VARCHAR" property="surName" />
    <result column="Age" jdbcType="INTEGER" property="age" />

    <collection property="toys"
        javaType="ArrayList" ofType="org.example.mybatis.Toy"
        resultMap="ToyMap" columnPrefix="t_"/>   
</resultMap>

<resultMap id="ToyMap" type="org.example.mybatis.Toy">
    <id column="Id" jdbcType="VARCHAR" property="id" />
    <result column="ChildId" jdbcType="VARCHAR" property="childId" />
    <result column="Name" jdbcType="VARCHAR" property="name" />
    <result column="Color" jdbcType="VARCHAR" property="color" />
</resultMap>

<sql id="Parent_Column_List">
    p.Id, p.Name, p.SurName,
</sql>  

<sql id="Child_Column_List">
    c.Id as c_Id, c.ParentId as c_ParentId, c.Name as c_Name, c.SurName as c_Surname, c.Age as c_Age,
</sql>

<sql id="Toy_Column_List">
    t.Id as t_Id, t.Name as t_Name, t.Color as t_Color
</sql>  

<select id="getParent" parameterType="java.lang.String" resultMap="ParentMap" >
    select 
    <include refid="Parent_Column_List"/>
    <include refid="Child_Column_List" />
    <include refid="Toy_Column_List" />
    from Parent p

    left outer join Child c on p.Id = c.ParentId
    left outer join Toy t on c.Id = t.ChildId
    where p.id = #{id,jdbcType=VARCHAR} 
```

使用 columnPrefix 一切正常，但嵌套玩具集合为空。数据库上的 Sql 查询正常工作，所有玩具都已加入。

可能是我错过了什么或者这是 mybatis 的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:55:01.160

我遇到了和你一样的问题。返回null的原因是ChildMap有一个列前缀'c_'，而ToyMap的前缀是't_'，但是ChildMap通过collection属性包含了ToyMap。所以，实际上在这种情况下，Toy 表中的所有列都必须有一个前缀'c_t_'。

```
<sql id="Toy_Column_List">
    t.Id as c_t_Id, t.Name as c_t_Name, t.Color as c_t_Color
</sql> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T11:11:05.067

这是我的工作示例

```
<resultMap id="categoryPreferenceValueMap" type="SyncCategoryPreferenceValueModel">

         <id property="preferenceTypeId" column="preference_type_id" />
         <result property="title" column="title"/>
         <result property="index" column="type_index"/>
          <result property="updatedAt" column="category_updated_at" />

          <collection property="preferences" column="p_preference_id" ofType="SyncPreferenceModel" >
            <id property="preferenceId" column="p_preference_id" />
            <result property="title" column="p_preference_title" />
            <result property="index" column="preference_index" />
            <result property="updatedAt" column="preference_updated_at" />

            <collection property="preferenceValues" column="p_v_preference_value_id"  ofType="SyncPreferenceValueModel"  >
                <id property="preferenceValueId" column="p_v_preference_value_id" />
                <result property="preferenceValue" column="p_v_preference_value" />
                <result property="updatedAt" column="preference_value_updated_at" />

            </collection>  
         </collection>
    </resultMap> 
```

这是我的查询

```
<select id="getPrefersenceWithValues" resultMap="categoryPreferenceValueMap">
    SELECT  
        PT.preference_type_id, PT.title, PT.type_index,PT.updated_at as  category_updated_at,
        P.preference_id as p_preference_id , P.title as p_preference_title  ,P.index as preference_index,

        P.updated_at as preference_updated_at,

        PV.preference_value_id as p_v_preference_value_id ,PV.preference_value as p_v_preference_value  

    FROM preference_types PT
    INNER JOIN preferences P ON PT.preference_type_id=P.preference_type_id 
        INNER JOIN preference_values PV ON P.preference_id=PV.preference_id 

    ORDER BY type_index

</select> 
```

输出是

```
 [
    {
      "preferenceTypeId": "1",
      "title": "abc BASICS",
      "index": "1",
      "updatedAt": 1,
      "preferences": [
        {
          "preferenceId": "1",
          "title": "xyz xyz",
          "preferenceTypeId": null,
          "gender": null,
          "index": 1,
          "updatedAt": 1,
          "preferenceValues": [
            {
              "preferenceId": null,
              "preferenceValueId": "2",
              "preferenceValue": "30-60",
              "gender": null,
              "updatedAt": 0
            },
            {
              "preferenceId": null,
              "preferenceValueId": "1",
              "preferenceValue": "0-30",
              "gender": null,
              "updatedAt": 0
            }
          ]
        }
      ]
    }
  ] 
```

# php - 尝试在数据库中插入记录时出现 SQL 查询错误

> ID：13085633
> 
> 赞同：2
> 
> 时间：2012-10-26T10:58:23.857
> 
> 标签：php, mysql, sql, file-upload

嘿，伙计们，我有一个大问题，我不知道为什么..我几乎没有将文件上传到数据库的表单，除了一个之外，所有表单都可以正常工作..我全部使用相同的查询（简单插入）。我认为这与我尝试上传的文件有关，但我不确定。

这是代码：

```
if ($_POST['action'] == 'hndlDocs') {
$ref = $_POST['reference']; // Numeric value of
$doc = file_get_contents($_FILES['doc']['tmp_name']);

$link = mysqli_connect('localhost','XXXXX','XXXXX','documents');
mysqli_query($link,"SET autocommit = 0");

$query = "INSERT INTO documents ({$ref},
'{$doc}',
'{$_FILES['doc']['type']}')
;";
mysqli_query($link,$query);
if (mysqli_error($link)) {
    var_dump(mysqli_error($link));
    mysqli_rollback($link);
} else {
    print("<script> window.history.back(); </script>");
    mysqli_commit($link);
}

} 
```

数据库只有这些字段：

```
DATABASE documents (
    reference INT(5) NOT NULL, //it is unsigned zerofill
    doc LONGBLOB NOT NULL, //this should contain the binary data
    mime_type TEXT NOT NULL // the mime type of the file php allows only application/pdf and image/jpeg
); 
```

我得到的错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '00001, '����' at line 1 
```

* * *

更新：

除了我忘记`VALUE`在 SQL 查询中添加。我必须添加`addslashes()`从文件中收集的内容，这一切都完成了。

我会感激每一个帮助。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:59:18.600

您忘记添加`VALUES`关键字。`INSERT`您使用的语法类型是隐式的。因此假设您的表只有 3 列，因为您只提供了 3 个值。但是如果您有超过 3 列，那么您需要在查询中明确定义列名称。

```
$query = "INSERT INTO documents VALUES ({$ref}, 
                                       '{$doc}', 
                                       '{$_FILES['doc']['type']}');"; 
```

您的查询容易受到`SQL Injection`. 请花点时间阅读下面的文章

*   [在 PHP 中防止 SQL 注入的最佳方法是什么？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# firefox-addon - 如何使用 Firefox 插件缩放页面？

> ID：13085635
> 
> 赞同：0
> 
> 时间：2012-10-26T10:58:34.590
> 
> 标签：firefox-addon, zooming, firefox-addon-sdk

[我想使用 Firefox 插件放大和缩小网页，但在文档插件 docs](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/)中找不到任何内容。我想让它作为`Ctrl`+`mouse wheel`或`Ctrl`+ `+` /工作，`-`但它应该使用我的插件。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T14:48:12.750

您需要以[整页缩放文档](https://developer.mozilla.org/en-US/docs/Full_page_zoom)中描述的方式直接访问[`browser`元素](https://developer.mozilla.org/en-US/docs/XUL/browser)。Add-on SDK 的高级模块不提供这种访问，您必须使用低级模块才能访问浏览器窗口。例如，要更改当前活动选项卡的缩放级别，您可以：

```
var {activeBrowserWindow} = require("window-utils");
var browser = activeBrowserWindow.gBrowser.selectedBrowser;
browser.markupDocumentViewer.fullZoom = 1.5;  // 150% 
```

不幸的是，该[`window-utils`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.10/packages/api-utils/window-utils.html)基本上没有记录。除了该`activeBrowserWindow`属性之外，它还提供了一个`browserWindowIterator`功能，如果您想在所有浏览器窗口中操作选项卡，该功能非常有用：

```
var {browserWindowIterator} = require("window-utils");
for (var window in browserWindowIterator())
  doSomething(window); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:55:11.473

ChromeWindow 公开了一个 FullZoom 对象，该对象允许以编程方式控制缩放。

但是，我认为您无法从附加 SDK 中访问它。

编辑：

根据弗拉基米尔的回答，我建议以下

```
var {activeBrowserWindow} = require("window-utils");
activeBrowserWindow.FullZoom.enlarge();
activeBrowserWindow.FullZoom.reduce();
activeBrowserWindow.FullZoom.reset(); 
```

虽然您不能设置任意缩放因子，但好处是您可以免费获得内务管理，即缩放因子的每个站点的持久性。

在 mxr检查[FullZoom](http://mxr.mozilla.org/mozilla-central/source/browser/base/content/browser-fullZoom.js)

# hibernate - Struts2 Hibernate Login 与用户表和组表

> ID：13085640
> 
> 赞同：0
> 
> 时间：2012-10-26T10:59:06.240
> 
> 标签：hibernate, struts2

我的问题是，我有一个表用户和表组（这个表用于授权用户 - 这意味着当用户属于像管理员这样的组时，他们可以登录到 admincp 而其他用户属于组成员，他们只阅读和写入并且无法登录到admincp）每个用户可能属于许多组并且每个组已经包含许多用户并且它们具有多对多的关系

我使用休眠进行持久存储。和 struts 2 来处理业务逻辑。

当我想从 Struts2 实现登录操作时，如何获取组成员所属的值？与我想知道的价值进行比较？

例子

我从用户名和密码获取用户，然后从用户类获取组，但我不知道如何获取组用户所属的值

这意味着如果用户属于 Groupid 为 1 并且在组表中，在列 adminpermission 为 1，该用户可以登录到 admincp，否则他不能

我的代码：

用户.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.dejavu.software.model;
import java.io.Serializable;
import java.util.Date;
import java.util.HashSet;
import java.util.Set;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;

/**
 *
 * @author Administrator
 */
@Entity
@Table(name="User")
public class User implements Serializable{

    private static final long serialVersionUID = 2575677114183358003L;    
    private Long userId;
    private String username;
    private String password;
    private String email;
    private Date DOB;
    private String address;
    private String city;
    private String country;
    private String avatar;
    private Set<Group>  groups = new HashSet<Group>(0);

    @Column(name="dob")
    @Temporal(javax.persistence.TemporalType.DATE)
    public Date getDOB() {
        return DOB;
    }

    public void setDOB(Date DOB) {
        this.DOB = DOB;
    }
    @Column(name="address")
    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
    @Column(name="city")
    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }
    @Column(name="country")
    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }
    @Column(name="email")
    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinTable(name="usergroup",joinColumns={@JoinColumn(name="userid")},inverseJoinColumns={@JoinColumn(
            name="groupid")})
    public Set<Group> getGroups() {
        return groups;
    }

    public void setGroups(Set<Group> groups) {
        this.groups = groups;
    }
    @Column(name="password")
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
    @Id
    @GeneratedValue
    @Column(name="iduser")
    public Long getUserId() {
        return userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
    }
    @Column(name="username")
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }
    @Column(name="avatar")
    public String getAvatar() {
        return avatar;
    }

    public void setAvatar(String avatar) {
        this.avatar = avatar;
    }

} 
```

组.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.dejavu.software.model;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

/**
 *
 * @author Administrator
 */
@Entity
@Table(name="Group")
public class Group implements Serializable{
    private static final long serialVersionUID = -2722005617166945195L;

    private Long idgroup;
    private String groupname;
    private String adminpermission;
    private String editpermission;
    private String modpermission;

    @Column(name="adminpermission")
    public String getAdminpermission() {
        return adminpermission;
    }

    public void setAdminpermission(String adminpermission) {
        this.adminpermission = adminpermission;
    }
    @Column(name="editpermission")
    public String getEditpermission() {
        return editpermission;
    }

    public void setEditpermission(String editpermission) {
        this.editpermission = editpermission;
    }
    @Column(name="groupname")
    public String getGroupname() {
        return groupname;
    }

    public void setGroupname(String groupname) {
        this.groupname = groupname;
    }
    @Id
    @GeneratedValue
    @Column (name="idgroup")
    public Long getIdgroup() {
        return idgroup;
    }

    public void setIdgroup(Long idgroup) {
        this.idgroup = idgroup;
    }
    @Column(name="modpermission")
    public String getModpermission() {
        return modpermission;
    }

    public void setModpermission(String modpermission) {
        this.modpermission = modpermission;
    }

} 
```

用户DAO

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.dejavu.software.dao;

import java.util.List;
import org.dejavu.software.model.User;
import org.dejavu.software.util.HibernateUtil;
import org.hibernate.Query;
import org.hibernate.Session;

/**
 *
 * @author Administrator
 */
public class UserDAO extends HibernateUtil{

    public User addUser(User user){
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        session.save(user);
        session.getTransaction().commit();
        return user;
    }

    public List<User> getAllUser(){
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<User> user = null;
        try {
            user = session.createQuery("from User").list();
        } catch (Exception e) {
            e.printStackTrace();
            session.getTransaction().rollback();
        }
        session.getTransaction().commit();
        return user;
    }

    public User checkUsernamePassword(String username, String password){
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        User user = null;
        try {
            Query query = session.createQuery("from User where username = :name and password = :password");
            query.setString("username", username);
            query.setString("password", password);
            user = (User) query.uniqueResult();
        } catch (Exception e) {
            e.printStackTrace();
            session.getTransaction().rollback();
        }
        session.getTransaction().commit();
        return user;
    }
} 
```

AdminLoginAction

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.dejavu.software.view;

import com.opensymphony.xwork2.ActionSupport;
import org.dejavu.software.dao.UserDAO;
import org.dejavu.software.model.User;

/**
 *
 * @author Administrator
 */
public class AdminLoginAction extends ActionSupport{

    private User user;
    private String username,password;
    private String role;
    private UserDAO userDAO;

    public AdminLoginAction(){
        userDAO = new UserDAO();
    }

    @Override
    public String execute(){

        return SUCCESS;
    }

    @Override
    public void validate(){
       if(getUsername().length() == 0){
           addFieldError("username", "Username is required");
       }if(getPassword().length()==0){
           addFieldError("password", getText("Password is required"));
       }              
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

} 
```

其他问题。我看到了一些关于登录的例子，我看到一些开发人员使用拦截器，我不明白他们为什么要使用它，以及“拦截器”会给我们带来什么好处。

非常感谢！

编辑堆栈跟踪

```
Hibernate: select user0_.iduser as iduser3_0_, group2_.idgroup as idgroup4_1_, user0_.dob as dob3_0_, user0_.address as address3_0_, user0_.avatar as avatar3_0_, user0_.city as city3_0_, user0_.country as country3_0_, user0_.email as email3_0_, user0_.password as password3_0_, user0_.username as username3_0_, group2_.adminpermission as adminper2_4_1_, group2_.editpermission as editperm3_4_1_, group2_.groupname as groupname4_1_, group2_.modpermission as modpermi5_4_1_, groups1_.iduser as iduser0__, groups1_.idgroup as idgroup0__ from User user0_ inner join usergroup groups1_ on user0_.iduser=groups1_.iduser inner join Group group2_ on groups1_.idgroup=group2_.idgroup where user0_.username=?
Oct 28, 2012 12:16:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions
WARNING: SQL Error: 1064, SQLState: 42000
Oct 28, 2012 12:16:49 PM org.hibernate.util.JDBCExceptionReporter logExceptions
SEVERE: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Group group2_ on groups1_.idgroup=group2_.idgroup where user0_.username='admin'' at line 1
org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2223)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    at org.hibernate.impl.AbstractQueryImpl.uniqueResult(AbstractQueryImpl.java:811)
    at org.dejavu.software.dao.UserDAO.checkUsernamePassword(UserDAO.java:52)
    at org.dejavu.software.view.AdminLoginAction.execute(AdminLoginAction.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Group group2_ on groups1_.idgroup=group2_.idgroup where user0_.username='admin'' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2322)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2220)
    ... 78 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:16:26.043

您可以使用以下查询获取用户组：

```
SELECT u FROM User u INNER JOIN FETCH u.groups WHERE u.username = :name AND u.password = :password 
```

因此，您可以访问哪些组有用户`user.getGroups()`

至于你的第二个问题，我真的不认为拦截器是实现登录所必需的，但你需要它来禁止在用户未登录时访问你的所有页面，所以也许这就是你所看到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:52:07.140

> 其他问题。我看到了一些关于登录的例子，我看到一些开发人员使用拦截器，我不明白他们为什么要使用它，以及“拦截器”会给我们带来什么好处。

在调用期望用户登录的操作时，您可能希望使用拦截器强制登录。如果用户未登录并且该操作需要用户登录，拦截器会将用户重定向到登录页面. 成功登录后，他们可以被重定向回他们来自的地方。

这个答案解释了它的一些身份验证方面：[Sessions in struts2 application](https://stackoverflow.com/questions/5509606/sessions-in-struts2-application/5517526#5517526)

# html - 具有动态宽度的内联元素旁边的浮动元素

> ID：13085646
> 
> 赞同：0
> 
> 时间：2012-10-26T10:59:19.297
> 
> 标签：html, css, css-float

如何在具有动态宽度的内联元素旁边设置浮动元素

演示：http: [//jsfiddle.net/J2Df8/](http://jsfiddle.net/J2Df8/)

html

```
<div>
<span>Lorem ipsum dolor</span>
<span class="floater"></span>
</div> 
```

css

```
DIV{
    width: 100px;
}

SPAN.floater{
    height:4px;
    width:4px;
    margin-top:3px;
    float:left;
    background-color: #FF0000;
} 
```

![在此处输入图像描述](../Images/06ffd43dedf8e78ea1ee51d1f78da7ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:13:46.200

看看这个[http://jsfiddle.net/J2Df8/12/](http://jsfiddle.net/J2Df8/12/)

HTML

```
<div>
    <span>Lorem ipsum dolor<span class="floater"></span></span>    
    <span>Lorem ipsum dolor<span class="floater"></span></span> 
</div> 
```

CSS

```
div {
    width: 100px;
}

div span {
    display:inline-block;
    position:relative;
    padding-right:10px;
}

span.floater{
    display:block;
    padding:0;
    height:4px;
    width:4px;
    top:8px;
    right:0;
    position:absolute;
    background-color: #FF0000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:07:42.130

HI 现在习惯了`:after`在你的跨度

**像这样**

```
span{
    width: 100px;
    display:block;
}

span:after{
    content:'';
    height:4px;
    display:inline-block;
    width:4px;
    background-color: #FF0000;
} 
```

***[现场演示](http://jsfiddle.net/J2Df8/8/)***

# c - 使用net-snmp：不能定期从文件中读取和更新数据

> ID：13085649
> 
> 赞同：1
> 
> 时间：2012-10-26T10:59:38.733
> 
> 标签：c, snmp, net-snmp

```
/*
 * Note: this file originally auto-generated by mib2c using
 *        $ mib2c.create-dataset.conf
 */

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <net-snmp/agent/net-snmp-agent-includes.h>
#include "poolTable.h"

/** Initialize the poolTable table by defining its contents and how it's structured */

int initialize_table_poolTable(void)
{
     const oid poolTable_oid[] = {1,3,6,1,4,1,21068,4,1};
     netsnmp_table_data_set *table_set;

     /* create the table structure itself */
     table_set = netsnmp_create_table_data_set("poolTable");
     table_set->allow_creation = 1;

     /********************* Adding indexes************************/   
     DEBUGMSGTL(("initialize_table_poolTable","adding indexes to table poolTable\n"));

     netsnmp_table_set_add_indexes(table_set,ASN_INTEGER,/* index:poolIndex*/0);

     DEBUGMSGTL(("initialize_table_poolTable","adding column types to table poolTable\n"));         

     netsnmp_table_set_multi_add_default_row(table_set,COLUMN_POOLINDEX, ASN_INTEGER, 0,
                                            NULL, 0,COLUMN_POOLINOCTETS, ASN_COUNTER, 0,
                                            NULL, 0,0);

     netsnmp_register_table_data_set(

                     netsnmp_create_handler_registration("poolTable",                                                  poolTable_handler,poolTable_oid,
                                           OID_LENGTH(poolTable_oid),
                                            HANDLER_CAN_RWRITE),
                                 table_set, NULL);

     int index=1; long data[2];

     FILE *fin;

     fin=fopen("/home/xx/data.txt","r");

     if(!fin)
     {
           snmp_log(LOG_ERR,"fopen failed in locating file\n");
           return -1;
     }

     while(!feof(fin))
     {
           while((fscanf(fin,"%ld %ld",&data[0],&data[1])) == 1)
           {
           }

           if(feof(fin) == 0)
           {          
                fillTableWithValues(table_set,index,data[0],data[1]);
           }
           index++;        
     }
     return;
}

void init_poolTable(void)
{
     initialize_table_poolTable();
}

int poolTable_handler(netsnmp_mib_handler               *handler,
                netsnmp_handler_registration      *reginfo,
                netsnmp_agent_request_info        *reqinfo,
                netsnmp_request_info              *requests) 
{
   return SNMP_ERR_NOERROR;
} 

void fillTableWithValues(netsnmp_table_data_set *table_set,int i,int Value1,int Value2)
{

     netsnmp_table_row *row;
     row = netsnmp_create_table_data_row();
     int index;
     index=i;
     netsnmp_table_row_add_index(row, ASN_INTEGER, &index,  sizeof(index));

     //setting a value to an integer column of my table
     int AValue = Value1;
     netsnmp_set_row_column(row, COLUMN_POOLINDEX, ASN_INTEGER, &AValue, sizeof(AValue));

     int BValue = Value2;
     netsnmp_set_row_column(row,COLUMN_POOLINOCTETS, ASN_COUNTER, &BValue, sizeof(BValue));

     netsnmp_table_dataset_add_row(table_set, row);
     netsnmp_register_auto_data_table(table_set, NULL);

}//end FillDaPathTableUp()

/********************************************************
Data.txt
*************************************************************
1 567
2 456
3 578
4 688
5 790
6 378
*************************************************************/ 
```

以上是我的“表”代码。

我将它编译为从文件中获取数据的“子代理”。

但我的问题是它只从第一次获取数据。

文件“data.txt”经常更改其值，但使用 snmpwalk 我每次只能获得相同的数据。如何获取更新的数据？我在哪里犯错？如果可以使用`for(;;)`循环，那么我应该在哪里添加它？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:50:02.280

它返回静态值，因为您只在整个系统初始化期间读取文件。您需要将文件读取代码移动到一个单独的函数中并定期调用它，例如在实际请求处理期间，使用缓存处理程序例程根据需要调用它，或者通过使用`snmp_alarm`触发一个计时器来调用每个偶尔读取和加载数据（当然还有删除旧数据）。

# macos - COCOA Mac 应用程序中 NSSegmentedControl 按钮的键盘快捷键

> ID：13085651
> 
> 赞同：5
> 
> 时间：2012-10-26T10:59:42.257
> 
> 标签：macos, cocoa, nssegmentedcontrol

在我的 COCOA Mac 应用程序中，有一个用于队列开/关功能的 NSSegmentedControl 按钮。现在我需要提供相同的键盘快捷键。例如，对于 Queue ON，如果它已经是 Off，反之亦然。

有人做过这种功能吗？

谢谢和问候，巴伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T15:05:26.413

由于我没有找到通过接口生成器将键盘绑定添加到 NSSegmentedControl 的方法，因此我以编程方式进行了 id 。我创建了一个名为**PMWindow**的自定义 Window 类：

```
@implementation PMWindow

- (BOOL)acceptsFirstResponder {
    return YES;
}

- (void)keyDown:(NSEvent *)theEvent {
    if([self.viewController.lastNextControl isEnabled]) {
        if([theEvent keyCode] == 123) {
            [self.viewController last];
        } else if([theEvent keyCode] == 124) {
            [self.viewController next];
        }
    }
}

@end 
```

我通过接口生成器将名为**PMViewController**的视图控制器添加到 Window 类 PMWindow 中。在这个例子中，我对击键***<左箭头>***（123）和***<右箭头>***（124）做出反应。

为了这个例子的完整性，我在这里添加了当有人点击我的 NSSegmentedControl 元素的单元格时调用的方法的实现：

```
- (IBAction)lastOrNext:(id)sender {
    switch ([sender selectedSegment]) {
        case 0:
            [self last];
            break;
        case 1:
            [self next];
            break;
    }
} 
```

# sql - 搜索表名

> ID：13085655
> 
> 赞同：114
> 
> 时间：2012-10-26T11:00:10.790
> 
> 标签：sql, sql-server, sql-server-2008-r2

我使用以下内容在特定数据库的存储过程中搜索字符串：

```
USE DBname
SELECT Name
FROM sys.procedures
WHERE OBJECT_DEFINITION(OBJECT_ID) LIKE '%xxx%' 
```

修改上面的内容是否容易，以便在特定的 db "DBname" 中搜索表名？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2014-03-03T14:03:38.837

我正在使用它并且工作正常

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE '%%' 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-10-26T11:03:56.190

```
select name
  from DBname.sys.tables
 where name like '%xxx%'
   and is_ms_shipped = 0; -- << comment out if you really want to see them 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-12-30T18:06:57.513

如果您想查看所有数据库服务器范围内的所有表并获取输出，您可以使用未记录的[sp_MSforeachdb](http://weblogs.sqlteam.com/joew/archive/2008/08/27/60700.aspx)过程：

```
sp_MSforeachdb 'SELECT "?" AS DB, * FROM [?].sys.tables WHERE name like ''%Table_Names%''' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-03-21T17:04:10.240

您还可以使用过滤器按钮来过滤包含特定字符串的表。您可以对存储过程和视图执行相同操作。

[![在此处输入图像描述](../Images/c9382cb0c984157804f0edc0302639f4.png)](https://i.stack.imgur.com/kLH8j.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-26T11:07:21.147

我假设您想将数据库名称作为参数传递，而不仅仅是运行：

```
SELECT  *
FROM    DBName.sys.tables
WHERE   Name LIKE '%XXX%' 
```

如果是这样，您可以使用动态 SQL 将 dbname 添加到查询中：

```
DECLARE @DBName NVARCHAR(200) = 'YourDBName',
        @TableName NVARCHAR(200) = 'SomeString';

IF NOT EXISTS (SELECT 1 FROM master.sys.databases WHERE Name = @DBName)
    BEGIN
        PRINT 'DATABASE NOT FOUND';
        RETURN;
    END;

DECLARE @SQL NVARCHAR(MAX) = '  SELECT  Name
                                FROM    ' + QUOTENAME(@DBName) + '.sys.tables
                                WHERE   Name LIKE ''%'' + @Table + ''%''';

EXECUTE SP_EXECUTESQL @SQL, N'@Table NVARCHAR(200)', @TableName; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-11-29T11:25:53.517

我知道这是一个旧线程，但如果您更喜欢不区分大小写的搜索：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
WHERE Lower(TABLE_NAME) LIKE Lower('%%') 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-29T09:07:58.143

添加到@[RichardTheKiwi] 的答案。

每当我搜索表列表时，通常我想从所有表中选择或删除它们。下面是为您生成这些脚本的脚本。

生成的选择脚本还添加了一个 tableName 列，以便您知道正在查看的表：

```
select 'select ''' + name + ''' as TableName, * from ' + name as SelectTable,
'delete from ' + name as DeleteTable
from sys.tables
where name like '%xxxx%'
and is_ms_shipped = 0; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-11T11:43:54.737

我想为您拥有的每个架构发布一个简单的解决方案。如果您使用的是 MySQL DB，您可以简单地从您的模式中获取所有表的名称并在其上添加 WHERE-LIKE 条件。您也可以使用通常的命令行来执行此操作，如下所示：

```
SHOW TABLES WHERE tables_in_<your_shcema_name> LIKE '%<table_partial_name>%'; 
```

where`tables_in_<your_shcema_name>`返回列的`SHOW TABLES`命令名称。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-02-08T13:22:12.977

您也可以使用 show 命令。

```
show tables like '%tableName%' 
```

# python - 南初始迁移不强制有默认值？

> ID：13085658
> 
> 赞同：0
> 
> 时间：2012-10-26T11:00:14.620
> 
> 标签：python, django, postgresql, django-south

我看到当您添加列并想要创建架构迁移时，该字段必须具有 null=True 或 default=something。

我没有得到的是，我最初在模型中编写的许多字段（例如，在初始 schemamigration --init 或从 convert_to_south 应用程序之前，我都做了）没有针对此检查运行，因为我没有'没有空/默认错误。

正常吗？

为什么会这样？为什么 South 仍然检查这个空/默认的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:09:42.463

如果您将一列添加到已经填充了一些行的表中，那么：

*   该列可以为空，并且现有行只需为该列获取一个空值
*   该列不可为空，但具有默认值，并且现有行已更新为具有该列的默认值

要生成没有默认值的不可为空的列，您需要分多个步骤添加该列。任何一个：

*   将该列添加为可为空，手动填充默认值，然后将该列标记为不可为空
*   添加具有默认值的列，然后删除默认值

这些实际上是相同的，它们都将通过更新每一行。

我不知道 South，但是根据您的描述，它旨在生成单个 DDL 语句来添加列，并且没有能力像这样在多个步骤中添加它。也许您可以覆盖该行为，或者您可以使用两个迁移？

相比之下，在创建表时，显然没有现有数据，因此您可以自由地创建不带默认值的不可为空的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:10:01.900

当您的数据库中有现有记录并在其中一个表中添加一列时，您必须告诉数据库在其中放入什么，南方无法读懂您的想法:-)

因此，除非您将新字段标记为 null=True 或选择默认值，否则它将引发错误。如果您有一个空数据库，则无需设置任何值，但模型字段仍需要基本属性。如果您深入了解您正在使用的字段类，您会看到 django 设置了一些默认值，例如 max_length 和 null（取决于字段）。

# apache - 用于 magento 搜索的简单 apache 重写规则

> ID：13085660
> 
> 赞同：0
> 
> 时间：2012-10-26T11:00:16.750
> 
> 标签：apache, magento, rewrite, rule

我有一个执行自定义搜索的 magento 控制器。网址如下所示：

```
mysite.com/catalogsearch/search?carbrand=toyota&color=red 
```

我正在尝试使用 apache 重写规则重写它，看起来像

```
mysite.com/catalogsearch/search/carbrand/toyota/color/red 
```

我尝试了以下方法，但该规则似乎不起作用，将我带到 404 页面：

```
RewriteRule /catalogsearch/search/cartype/(.*)/color/(.*)$ /catalogsearch/search/?cartype=$1&color=$2 [QSA] 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:48:06.883

不幸的是，catalogsearch 模块不包含控制器搜索，然后如果您使用 url:`mysite.com/catalogsearch/search?carbrand=toyota&color=red`在 URL 重写中，您将始终显示 404 错误页面。

请使用`mysite.com/catalogsearch/result`or`mysite.com/catalogsearch/advanced`代替`mysite.com/catalogsearch/search`.

# ios6 - UICollectionViewController 中的下拉刷新

> ID：13085662
> 
> 赞同：72
> 
> 时间：2012-10-26T11:00:22.840
> 
> 标签：ios6, uikit, pull-to-refresh

我想在 iOS 6 下实现下拉刷新`UICollectionViewController`。这很容易用 a 实现`UITableViewController`，如下所示：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(startRefresh:)
    forControlEvents:UIControlEventValueChanged];
self.refreshControl = refreshControl; 
```

上面实现了一个很好的液滴动画作为原生小部件的一部分。

正如`UICollectionViewController`“更进化”`UITableViewController`的那样，人们会期望一些功能具有一定的相同性，但我无法在任何地方找到实现这一点的内置方法的参考。

1.  有没有一种我忽略的简单方法可以做到这一点？
2.  尽管标题和文档都说明它是为了与表格视图一起使用，但可以`UIRefreshControl`以某种方式使用吗？`UICollectionViewController`

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-10-26T22:52:57.423

(1) 和 (2) 的答案都是肯定的。

只需添加一个`UIRefreshControl`实例作为子视图，`.collectionView`它就可以工作。

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(startRefresh:)
    forControlEvents:UIControlEventValueChanged];
[self.collectionView addSubview:refreshControl]; 
```

而已！我希望这在某个地方的文档中被提及，即使有时一个简单的实验就可以解决问题。

编辑：如果集合不够大而不能有活动的滚动条，则此解决方案将不起作用。如果添加此语句，

```
self.collectionView.alwaysBounceVertical = YES; 
```

然后一切正常。此修复程序取自同一主题的[另一篇文章](https://stackoverflow.com/a/14693598/1633251)（在其他已发布答案的评论中引用）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-07T13:19:41.043

我一直在寻找相同的解决方案，但在 Swift 中。基于上述答案，我做了以下事情：

```
let refreshCtrl = UIRefreshControl()
    ...
refreshCtrl.addTarget(self, action: "startRefresh", forControlEvents: .ValueChanged)
collectionView?.addSubview(refreshCtrl) 
```

不要忘记：

```
refreshCtrl.endRefreshing() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-19T13:46:32.387

我正在使用 Storyboard 并且设置`self.collectionView.alwaysBounceVertical = YES;`不起作用。选择`Bounces`and`Bounces Vertically`为我完成了这项工作。

![在此处输入图像描述](../Images/c25c7c26800a7cdf2aca9cfba90c1207.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-04T00:44:29.850

该`refreshControl`属性现在已添加到`UIScrollView`iOS 10 中，因此您可以直接在集合视图上设置刷新控件。

[https://developer.apple.com/reference/uikit/uiscrollview/2127691-refreshcontrol](https://developer.apple.com/reference/uikit/uiscrollview/2127691-refreshcontrol)

```
UIRefreshControl *refreshControl = [UIRefreshControl new];
[refreshControl addTarget:self action:@selector(refreshControlAction:) forControlEvents:UIControlEventValueChanged];
self.collectionView.refreshControl = refreshControl; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T17:01:55.877

mjh 的回答是正确的。

我遇到了一个问题，如果`collectionView.contentSize`不大于`collectionView.frame.size`，则无法`collectionView`滚动。您也不能设置该`contentSize`属性（至少我不能）。

如果它不能滚动，它不会让你拉动刷新。

我的解决方案是子类`UICollectionViewFlowLayout`化并覆盖该方法：

```
- (CGSize)collectionViewContentSize
{
    CGFloat height = [super collectionViewContentSize].height;

    // Always returns a contentSize larger then frame so it can scroll and UIRefreshControl will work
    if (height < self.collectionView.bounds.size.height) {
        height = self.collectionView.bounds.size.height + 1;
    }

    return CGSizeMake([super collectionViewContentSize].width, height);
} 
```

# mysql - 连接到mysql时mac错误的nodejs

> ID：13085663
> 
> 赞同：2
> 
> 时间：2012-10-26T11:00:25.897
> 
> 标签：mysql, node.js, wamp, mamp

此代码在使用 nodejs 和 wamp 的 windows 上运行良好，但在使用 mamp 的 mac 上运行良好，知道为什么吗？（mac 和 pc 上使用相同的用户名、密码和 db！）

我收到此错误错误：连接 ECONNREFUSED

```
var mysql = require('mysql');
var TEST_DATABASE = 'krekib';
var TEST_TABLE = 'users';
var client = mysql.createClient({
  user: 'root',
  password: '12345',
});

client.query('USE '+TEST_DATABASE);

client.query(
  'SELECT * FROM '+TEST_TABLE,
  function selectCb(err, results, fields) {
    if (err) {
      throw err;
    }

    console.log(results);
    console.log(fields);
    client.end();
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:03:50.340

您可能需要指定主机和端口。检查哪个端口 mysql 在 MAMP 中运行并添加它。

```
var mysql = require('mysql');
var TEST_DATABASE = 'krekib';
var TEST_TABLE = 'users';
var client = mysql.createClient({
  user: 'root',
  password: '12345',
  host: "127.0.0.1 or localhost, depends on your mysql user permissions", 
  port: "your port number in mamp",
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-26T11:09:08.437

为什么要使用 JavaScript 连接到数据库？找到 JavaScript 文件并获取您的用户名 + 密码真的很容易。

数据库是否在 Mamp 中运行？

# entity-framework - asp.net mvc web api中的架构不支持错误

> ID：13085664
> 
> 赞同：0
> 
> 时间：2012-10-26T11:00:27.067
> 
> 标签：entity-framework, ef-code-first

我正在研究 asp.net mvc 4 web api。我首先使用现有数据库模型的代码。我的数据库中有一个表，所以我有像这样的实体类，

```
public class Tab1
{
[Key]
public int Field1{get; set;}
public string Field2{get; set;}
} 
```

我有 DBContext 文件，例如，

```
public class MyDBContext:DbContext
{
public DbSet<Tab1> Table{ get; set; }

 protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
           modelBuilder.Entity<Bar>().ToTable("bars");
        }
} 
```

我的 Get Action 就像

```
 public List<Bar> GetTables()
            {
               MyDBContext context=new MyDBContext();
                return context.Table.ToList();
            } 
```

但是我收到一个错误**Schema specified is not valid 错误 0064: Facet 'MaxLength' must not be specified for type 'mediumtext'。**. 所以如果我在这个过程中犯了任何错误，请指导。

在这里，我还有一堂课，例如

```
public class Tab2:Tab1
{
public string Filed3{get; set;}
} 
```

我不想使用 tab2 在数据库中创建表，因为我使用 tab2 类来返回自定义记录。由于 Tab2 从 tab1 继承，当我删除类 tab2 时，我得到了上述错误，它照常工作。所以请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:29:00.943

如果您的问题仅是在模型中引入“Tab2”类时引起的，并且您真的不希望将“Tab2”存储在数据库中，为什么不使用 [NotMapped] 注释“Tab2”类属性或使用流畅的配置 ModelBuilder.Ignore。

# wpf - 将选项卡标题绑定到代码中的属性

> ID：13085665
> 
> 赞同：0
> 
> 时间：2012-10-26T11:00:28.903
> 
> 标签：wpf

我正在使用其 ItemSource 属性将集合绑定到 TabControl。

我在代码中而不是在 XAML 中编写 WPF 以获得更深入的理解。

我面临的问题是，如果我想将 TabItem 的标题绑定到属性（“EntityID”），则绑定不会启动。

如果我设置一个值而不是绑定，则该代码有效（注释中的代码如下）

```
var binding = new Binding();
binding.Path = new PropertyPath("EntityID");

DataTemplate itemTemplate = new DataTemplate();
var label = new FrameworkElementFactory(typeof(Label));

//label.SetValue(Label.ContentProperty,"test");
label.SetBinding(Label.ContentProperty, binding);

itemTemplate.VisualTree = label;

_tabControl.ItemTemplate = itemTemplate; 
```

此外，如果设置 ContentTemplate 而不是 ItemTemplate，则绑定也可以正常工作。

如何从纯代码将选项卡标题绑定到我的 ItemsSource 的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:34:56.627

有很多方法可以从 Code Behind 设置绑定。您应该尝试绑定的是 TabItem 上的 HeaderProperty。尽管您必须先检索它才能做到这一点。

这是一个可以让您入门的工作示例。这不是我会这样做的方式，就像我会在 xaml 中那样，但正如你要求从后面的代码中那样做，你去 :)

附带说明一下，在 Code behind 中定义模板几乎总是一个坏主意，尽量避免它。

**Windows.xaml**

```
<Window x:Class="StackOverflow.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:StackOverflow"
    Title="Super long title of the super window" Width="500" Height="300">

    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Entity}">
            <TextBlock Text="{Binding Id}" FontSize="{Binding Size}" />
        </DataTemplate>
    </Window.Resources>

    <local:MyTabControl x:Name="tabControl" ItemsSource="{Binding Entities}" />

</Window> 
```

**窗口.xaml.cs**

```
using System.Windows;
using System;
using System.Windows.Data;
using System.Collections.Generic;
using System.Windows.Controls;

namespace StackOverflow
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public IEnumerable<Entity> Entities
    {
        get
        {
            for (int i = 0; i < 5; i++)
            {
                yield return new Entity() { Id = i };
            }
        }
    }
}

public class MyTabControl : TabControl
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        var tabitem = base.GetContainerForItemOverride() as TabItem;
        if (tabitem != null)
        {
            tabitem.Loaded += OnTabItemLoaded;
        }
        return tabitem;
    }

    void OnTabItemLoaded(object sender, RoutedEventArgs e)
    {
        var tabItem = sender as TabItem;
        if (tabItem == null)
            throw new InvalidOperationException();
        tabItem.SetBinding(TabItem.HeaderProperty, new Binding("DisplayName"));
    }
}

public class Entity : DependencyObject
{
    public int Id { get; set; }
    public string DisplayName { get { return "Entity ID : " + Id; } }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:36:49.590

几件事...

> 作为 WPF 设计人员和开发人员，XAML 是 GUI 和代码隐藏的最佳方式。它不会以任何方式降低我对 WPF 的理解。所以我推荐 XAML。

相信我自己是一名 Winforms / ASP.NET 开发人员，我最初不愿意使用 XAML，但是我必须编写大量的代码以及各种 GUI 元素之间的关系，以及**驯服**称为`Templates`\ `Styles`\的野兽`Triggers`，然后`ResourceDictionaries`只使用背后的 C# 代码对我来说只是一种折磨。

我的经验足够了，这是关于你的问题！

回答你的问题，你设置了`_tabControl.ItemsSource`吗？并确保其中的每个项目都`ItemsSource`具有`EntityID`属性。您的代码应该可以工作。

如果这仍然不起作用，请尝试在 Visual Studio 的`Output`窗口中查看是否有任何绑定错误。

# c# - 在 MVVM 中，每个 ViewModel 是否都只与一个 Model 耦合？

> ID：13085670
> 
> 赞同：39
> 
> 时间：2012-10-26T11:00:44.760
> 
> 标签：c#, design-patterns, mvvm

在 MVVM 实现中，每个都只`ViewModel`耦合一个`Model`吗？

我正在尝试在项目中实现 MVVM 模式，但我发现有时，a`View`可能需要来自多个`Models`.

例如，对于 a `UserProfileView`，它`UserProfileViewModel`可能需要来自`UserAccountModel`、`UserProfileSettingsModel`、`UserPostsDataModel`等的信息。

然而，在我阅读的大多数关于 MVVM 的文章中，ViewModel 仅包含一个通过依赖注入的模型。所以构造函数只接受一个模型。

当`ViewModel`它必须从多个`Models`. 或者这种情况会在 MVVM 中发生吗？

PS：我没有使用 Prism 或 Unity 框架。我正在尝试将类似的模式实施到我正在从事的不使用 Prism 或 Unity 的项目中。这就是为什么我需要确切地了解其中一些事情是如何工作的。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-26T11:18:43.270

在我对 MVVM 模式的理解中，唯一实际的要求是 View 从 ViewModel 的属性中获取所有数据（可能通过绑定机制）。ViewModel 是您专门为该视图制作的一个类，它负责根据需要自行填充。你可以把它想象成视图的 ActiveRecord。

因此，无论您在 ViewModel 中做什么来获取其属性应显示的数据，都无关紧要。您可以通过查询一些服务、读取一个或多个业务实体模型、在现场生成它或以上所有方式来获取它。需要结合所有这些东西来制作功能视图是完全正常的。

与任何演示模式一样，关键是将在屏幕上显示某些数据的过程与获取该数据的过程分开。这样您就可以分别测试流程的每个部分。

编辑：这是一个小但希望完整的依赖流示例。

```
// Model/service layer

public class MyModelA
{
  public string GetSomeData()
  {
    return "Some Data";
  }
}

public class MyModelB
{
  public string GetOtherData()
  {
    return "Other Data";
  }
}

// Presentation layer

public class MyViewModel
{
  readonly MyModelA modelA;
  readonly MyModelB modelB;

  public MyViewModel(MyModelA modelA, MyModelB modelB)
  {
    this.modelA = modelA;
    this.modelB = modelB;
  }

  public string TextBox1Value { get; set; } 

  public string TextBox2Value { get; set; }

  public void Load()
  {
    // These need not necessarily be populated this way. 
    // You could load an entity and have your properties read data directly from it.
    this.TextBox1Value = modelA.GetSomeData();
    this.TextBox2Value = modelB.GetOtherData();
    // raise INotifyPropertyChanged events here
  }
}

public class MyView
{
  readonly MyViewModel vm;

  public MyView(MyViewModel vm)
  {
    this.vm = vm;
    // bind to vm here
  }
}

// Application layer

public class Program
{
  public void Run()
  {
    var mA = new MyModelA();
    var mB = new MyModelB();
    var vm = new MyViewModel(mA, mB);
    var view = new MyView(vm);
    vm.Load();
    // show view here
  }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-26T11:07:51.790

您可以在一个视图模型中使用多个模型。视图模型的目的是抽象出业务/数据层（即模型）。

但是，使用多个模型通常表明视图太大。您可能希望将其拆分为用户控件（具有自己的视图模型）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T11:31:55.447

视图模型包含“视图逻辑”-因此您想在视图上显示的所有内容都通过视图模型公开。如果您想显示来自不同“模型”的数据，那么您的视图模型会将其聚合起来，并且视图可以绑定到。

mvvm 的主要目的是 btw 单元测试。这意味着无需 UI 即可轻松测试视图逻辑。

编辑：你为什么认为：

> ViewModel 在其构造函数中只有一个 View 参数

编辑2：

顺便说一句，使用 mvvm 有两种主要方法，第一种是“View First”，第二个是“Viewmodel First”，您当然可以将两者混合并选择最适合您需要的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T11:12:16.317

一个 ViewModel 可能并且在许多情况下确实使用多个模型。它本身就是您观点的“模型”。

考虑用户输入包括地址在内的个人信息的个人资料屏幕。如果地址存储在“addresses”表中，其余存储在“profile”表中，则 ViewModel 使用 Profile 和 Address 模型来创建统一的 ViewModel。

正如[jgauffin](https://stackoverflow.com/users/70386/jgauffin)在他的回答中提到的那样，很多时候您可以使用用户控件来实现一对一的关系，但您也可以通过尝试 100% 的时间来引入不必要的复杂性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-26T11:13:15.827

我会确保您了解视图、视图模型和所有其他模型类之间的区别。ViewModel 是填充了视图可以绑定到的数据的模型对象。它的存在只是为了向视图提供数据，这使得 ViewModel 对象可进行单元测试，并且整个业务逻辑与视图分离。因此，您可以在不使用视图本身的情况下完全开发业务逻辑，并且可以通过构建或使用另一个视图并绑定到 ViewModel 对象的属性来替换视图。例如，如果一个视图充满了空文本字段，则文本字段的内容可以绑定到视图模型的不同属性。

通常真的应该只有一个视图模型。但如果它太复杂，您可以使用绑定对象的子属性，如[绑定到 ViewModel.SubClass.Property（子属性）中所述](https://stackoverflow.com/questions/11619612/binding-to-viewmodel-subclass-property-sub-property)

ViewModel 可以从许多不同的来源、业务对象、数据库等获取它返回给视图的数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T11:05:21.823

通常每个模型有一个 ViewModel。这些 ViewModel 包含处理模型数据的逻辑。另一方面，每个视图也都有自己的视图模型。所以这意味着：

```
class ModelA 
{
    bool TestValue{get;set;}
}
class ViewModelA<ModelA>
{
    ValueViewModel<bool> TestValue{get; private set;}

    public ViewModelA(ModelA model) 
    {
        base.Model = model;
        this.Initialize();
    }
}

class ModelB 
{
    string Username;
}
class ViewModelB<ModelB>
{
    ValueViewModel<string> Username{get; private set;}

    public ViewModelB(ModelB model) 
    {
        base.Model = model;
        this.Initialize();
    }
} 
```

这些是封装模型的 ViewModel。视图有自己的 ViewModel：

```
public ViewModelForExactlyOneView
{
    public ViewModelA{get;set;}
    public ViewModelB{get;set;}
} 
```

为了回答您的问题，ViewModel1 指的是 ViewModelA 和 ViewModelB。因此，视图可以从`ViewModel1.ViewModelA.TestValue`.

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-06-17T09:35:06.107

只需在您的视图中使用用户模型

```
public partial class User : Login
{
    public string Password { get; set; }

    public List<Customer> customer { get; set; }
} 
```

在此模型中继承了另一个模型登录，并且此模型中也使用了客户模型。

# java - 替换字符串中的所有反斜杠

> ID：13085672
> 
> 赞同：0
> 
> 时间：2012-10-26T11:00:48.800
> 
> 标签：java, regex

我正在尝试`\`用`%5C`错误的输出替换所有内容：

```
String str="a\b";
str=str.replaceAll("\\\\", "%5C");
System.out.println(str); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T11:02:54.273

该变量`str`不包含反斜杠。您以某种方式正确地转义了`replaceAll()`args 中的反斜杠，但在原始分配中却没有`str`。

```
String str="a\b"; 
```

应该变成：

```
String str="a\\b"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T11:03:29.077

`replaceAll`返回结果，因此您应该尝试将结果分配给您的变量：

```
 // TODO Auto-generated method stub
        String str="a\b";
        str = str.replaceAll("\\\\", "%5C");
        System.out.println(str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:08:07.593

我认为首先你必须改变你的`str`因为它不正确根据你。
使用以下代码：

```
 // TODO Auto-generated method stub
    String str="a\\b";
    str=str.replaceAll("\\\\", "%5C");
    System.out.println(str); 
```

您的代码不起作用，因为

```
A character preceded by a backslash (\) is an escape sequence and has special 
meaning to the compiler. The following table shows the Java escape sequences. 
```

这意味着在 a\b`\b`中具有特殊含义`Insert a backspace in the text at this point.` [Escape Sequences](http://docs.oracle.com/javase/tutorial/java/data/characters.html)。
这就是为什么它不起作用，所以你必须逃脱`\`角色。

# javascript - 我们如何在 javascript 中为消息通知添加哔声？

> ID：13085675
> 
> 赞同：4
> 
> 时间：2012-10-26T11:01:02.217
> 
> 标签：javascript, jquery, asp.net, notifications, beep

添加了显示消息通知的示例。每当我们显示它时，我们都必须添加哔声。几乎它模仿了桌面警报等行为。

谁能有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:02:13.723

这应该有帮助

```
<script>
    function PlaySound(soundObj) {
        var sound = document.getElementById(soundObj);
        sound.Play();
    }
</script>

<embed src="success.wav" autostart="false" width="0" height="0" id="sound1" enablejavascript="true"> 
```

# networking - TCP Socket 无连接超时

> ID：13085676
> 
> 赞同：53
> 
> 时间：2012-10-26T11:01:08.020
> 
> 标签：networking, tcp, network-programming, timeout

我打开一个 TCP 套接字并将其连接到网络上其他地方的另一个套接字。然后我可以成功发送和接收数据。我有一个计时器，它每秒向套接字发送一些东西。

然后我通过强行断开连接（在这种情况下拔出以太网电缆）粗鲁地中断连接。我的套接字仍在报告它每秒成功地写出数据。这将持续大约 1 小时 30 分钟，最终出现写入错误。

是什么指定了套接字最终接受另一端消失的超时？是操作系统（Ubuntu 11.04），是来自 TCP/IP 规范，还是套接字配置选项？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-26T12:59:40.843

拉网线不会中断 TCP 连接(1)，但会中断通信。您可以重新插入电缆，一旦建立 IP 连接，所有的备份数据都会移动。这就是使 TCP 可靠的原因，即使在蜂窝网络上也是如此。

当 TCP 发送数据时，它需要一个 ACK​​ 作为回复。如果在一段时间内没有出现，它会重新传输数据并再次等待。它在传输之间等待的时间通常呈指数增长。

在一些重传次数或一些总时间没有 ACK 之后，TCP 将认为连接“断开”。多少次或多长时间取决于您的操作系统及其配置，但它通常会超时几分钟。

从 Linux 的[tcp.7 手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/tcp.7.html)：

```
 tcp_retries2 (integer; default: 15; since Linux 2.2)
          The maximum number of times a TCP packet is retransmitted in
          established state before giving up.  The default value is 15, which
          corresponds to a duration of approximately between 13 to 30 minutes,
          depending on the retransmission timeout.  The RFC 1122 specified
          minimum limit of 100 seconds is typically deemed too short. 
```

这可能是您想要调整的值，以更改检测连接是否消失所需的时间。

*(1) 有例外。操作系统在注意到电缆被移除时，可以通知上层所有连接都应被视为“断开”。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-10T13:45:07.827

如果想要快速将套接字错误传播到您的应用程序代码，您可能想尝试这个套接字选项：

> **TCP_USER_TIMEOUT**（自 Linux 2.6.37 起）此选项采用*无符号整数*作为参数。当该值大于 0 时，它指定在 TCP 强制关闭相应连接并将**ETIMEDOUT返回给应用程序之前，传输的数据可能保持未确认的最长时间（以***毫秒为单位*） 。如果选项值指定为 0，TCP 将使用系统默认值。

 **[请参阅linux/man/tcp(7)](http://man7.org/linux/man-pages/man7/tcp.7.html)上的完整描述。此选项比*tcp_retries2*编辑更灵活（您可以在创建套接字后立即设置它），并且完全适用于客户端的套接字不知道服务器的一种状态并且可能进入所谓的半-封闭状态。**

# php - 在 PHP 中按多个字段动态分组数据

> ID：13085679
> 
> 赞同：0
> 
> 时间：2012-10-26T11:01:15.040
> 
> 标签：php, multidimensional-array, grouping

我想按字段对关联数组进行分组。数组本身最初来自 mysql 数据库查询。

下面是我如何通过硬编码来做到这一点的一个例子：

```
<?php
$fields = array("ID,subID");
$fieldCounts = count($fields);
$data = array(); //there is sql querieed data

$parsedData = array();

foreach ($data as $val)
{
    if ($fieldCounts == 1)
    {
        $f0 = $fields[0];
        $fv0 = $val[$f0];
        $parsedData[$fv0][] = $val;
    }
    else if ($fieldCounts == 2)
    {
        $f0 = $fields[0];
        $fv0 = $val[$f0];
        $f1 = $fields[10];
        $fv1 = $val[$f1];
        $parsedData[$fv0][$f1][] = $val;
    }
    else
    {
        exit("Third field not implemented");
    }
}
?> 
```

但是我怎样才能用任意数量的字段动态地做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:49:49.510

我不确定这段代码是如何为你工作的，但有些事情是错误的，可能不允许代码正常运行

*   字段只有一个值`,`

    ```
    $fields = array("ID,subID"); 
                       ^----------- between string 
    ```

    *代替*

    ```
    $fields = array("ID","subID"); 
    ```

*   注意：未定义的偏移量：

    ```
    $f1 = $fields[10];
                   ^----- your array is not up to 10 
    ```

由于您没有放置生成数据和所需的输出。我会假设你的最终输出并生成一些临时数据

```
$fields = array("ID","subID"); //You can Increase or decrease this Fields
$fieldCounts = count($fields);
$data = array(); // there is sql querieed data

for($i = 0; $i < 3; $i ++) {
    $data[] = array("ID" => mt_rand(1, 1000),"subID" => "sub" . mt_rand(100, 900));
} 
```

**使用上面的 2 个更正破坏您的代码**

```
foreach ( $data as $val ) {
    if ($fieldCounts == 1) {
        $f0 = $fields[0];
        $fv0 = $val[$f0];
        $parsedData[$fv0][] = $val;
    } else if ($fieldCounts == 2) {
        $f0 = $fields[0];
        $fv0 = $val[$f0];
        $f1 = $fields[1];
        $fv1 = $val[$f1];
        $parsedData[$fv0][$f1][] = $val;
    } else {
        exit("Third field not implemented");
    }
} 
```

输出

```
Array
(
    [159] => Array
        (
            [subID] => Array  <----------- SubID is fixed in your can cause confict
                (
                    [0] => Array
                        (
                            [ID] => 159
                            [subID] => sub589
                        )

                )

        )

    [334] => Array
        (
            [subID] => Array
                (
                    [0] => Array
                        (
                            [ID] => 334
                            [subID] => sub703
                        )

                )

        )

) 
```

**一个更好的替代你的**

```
$parsedData = array();
foreach ( $data as $val ) {
    $temp = &$parsedData;
    foreach ( array_slice($val, 0, $fieldCounts) as $key ) {
        $temp = &$temp[$key];
    }
    $temp[] = $val;
}
print_r($parsedData); 
```

输出

```
Array
(
    [159] => Array
        (
            [sub589] => Array <---------- Make Sub ID Dynamic 
                (
                    [0] => Array
                        (
                            [ID] => 159
                            [subID] => sub589
                        )

                )

        )

    [334] => Array
        (
            [sub703] => Array
                (
                    [0] => Array
                        (
                            [ID] => 334
                            [subID] => sub703
                        )

                )

        )

) 
```

**推荐版本用于简单的阵列路径**

```
$parsedData = array();
foreach ( $data as $val ) {
    $temp = &$parsedData;
    foreach ( array_slice($val, 0, $fieldCounts) as $key ) {
        $temp = &$temp[$key];
    }
    $temp = $val; 
}
print_r($parsedData); 
```

输出

```
Array
(
    [159] => Array
        (
            [sub589] => Array <---- Easy to asses as $parsedData['159']['sub589']
                (
                    [ID] => 159
                    [subID] => sub589
                )

        )

    [334] => Array
        (
            [sub703] => Array
                (
                    [ID] => 334
                    [subID] => sub703
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:33:17.340

而不是在你的 foreach 循环中执行 if/elseif/else `$data`（它总是限制在你用那个结构和很多代码重复的地方“写”的数字）你需要把 if/elseif/else 变成一个它自己的循环。

但首先转换现有代码，我从第一个 if 正文开始，它已经包含*所有必要的代码*：

```
$f0  = $fields[0];
$fv0 = $val[$f0];
$parsedData[$fv0][] = $val; 
```

`$val`应该分配给以名称ue`$parsedData`为键的数组。让我们在这里压缩它，名称中的数字是多余的，因为我们不再需要它（但可能是第一个）：`$fields``$val``0`

```
$field = $fields[0];
$value = $values[$field];

$parsedData[$value][] = $values; 
```

（我改成`$val`改进`$values`命名）。这现在更容易阅读和理解。`0`我们也更容易发现这里的神奇数字。

现在来魔术。我们想在这里添加一个数组（推）：

```
$parsedData[$value][] = $values; 
```

为了让这更容易，让我们把它变成这样：

```
$array   = &$parsedData[$value];
$array[] = $values; 
```

这现在看起来是多余的，但是当它变成一个循环时，它会变得更加清晰：

```
$array   = &$parsedData;

...

$array   = &array[$value];

...

$array[] = $values; 
```

现在让我们回顾一下带有外循环的代码：

```
foreach ($data as $values)
{

    $array   = &$parsedData; 

    $field = $fields[0];
    $value = $values[$field];        
    $array = &$array[$value];

    $array[] = $values;
} 
```

显然，这段代码还不完整。内循环不见了，但它开始得到某种身体。实际上内部循环很容易实现：

```
$array   = &$parsedData; 

foreach ($fields as $field)
{
    $value = $values[$field];
    $array = &$array[$value];
}

$array[] = $values; 
```

就是这样。单个字段已变成对所有字段的迭代。迭代中每个步骤的子数组的别名/引用允许在内循环完成后将值推送到适当的数组条目。

整个外循环和内循环：

```
foreach ($data as $values)
{
    $array   = &$parsedData; # set reference

    foreach ($fields as $field)
    {
        $value = $values[$field];
        $array = &$array[$value];
    }

    $array[] = $values;

    unset($array); # remove reference
} 
```

# c++ - 将映射中的对象（指针）输出到二进制文件

> ID：13085682
> 
> 赞同：0
> 
> 时间：2012-10-26T11:01:22.260
> 
> 标签：c++, class, object, map, iterator

我有一个带有指向类对象的指针的映射，我试图将它们全部输出到二进制文件中，然后将它们读回。我不相信我的语法是正确的，因为当我读回它们时它们被破坏了，即在它们进入文件之前似乎没有任何数据。在此之前的行我遍历数据并将它们全部输出，所以我知道它们在打印之前没问题

这是将帐户输出到二进制文件中的代码。

```
for (it = accounts.begin(); it != accounts.end(); it++)
{
    outFile.write((char*)&(*it).second, sizeof(Account));
} 
```

任何人都知道这是否可以？

编辑：它不是

```
for (it = accounts.begin(); it != accounts.end(); it++)
{
    outFile.write((char*)&(*(it->second)), sizeof(Account));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:04:07.470

这不是您序列化对象的方式，原因如下：

*   如果对象是多态的，大多数（全部？）实现都会有一个指向对象内部虚拟表的指针，所以你写了那个，但是当你读回来时，它不再有效。
*   其他指向成员的指针被写入，但当你读回它们时没有意义。

序列化不像将对象的字节写入文件那么容易。

简单的解决方案是使用现有的库 -[谷歌协议缓冲区](https://developers.google.com/protocol-buffers/)浮现在脑海中。

另一个是自己实现它，但这很难，特别是如果你想在多个平台/操作系统上获得支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:04:15.350

您将看到内存地址，仅此而已。您必须编写更复杂的方法。有关一些想法，请参阅[Google protobuf encoding](https://developers.google.com/protocol-buffers/docs/encoding)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:05:01.090

看起来您正在尝试将转换`char*`为文件的内存地址写入文件。这些数字将没有任何意义。大概你想序列化这些指针指向的对象。因此，首先您需要找到一种方法来序列化和反序列化该类型的对象，然后通过重新引用映射中保存的指针将它们写入文件。

# iphone - Xcode - 由于未捕获的异常“NSRangeException”而终止应用程序

> ID：13085683
> 
> 赞同：0
> 
> 时间：2012-10-26T11:01:24.430
> 
> 标签：iphone, objective-c, xcode, ipad, multidimensional-array

当我运行我的应用程序时，在此代码中，当我尝试从数组中删除元素时出现错误。为什么会出现这个错误？以及如何解决这个问题？

```
 if ([EnterWeightViewController withData]) {

    Database *db = [[Database alloc] init];
    [db openDB];
    [db createTable];
    NSArray *array = [db getAllPesi];
    int count = [self.weightHistory countOfWeightHistory]; //count = 5
    NSLog(@"Count of Array = %i", count);

    //-- Init Array
    for (int i =0; i< count; i ++) { 
        [self.weightHistory removeWeightAtIndex:i]; //error when i > 2
    }

    //-- Load Array
    for (WeightEntry *entry in array) {
        [self.weightHistory addWeight:entry];
    }

    //-- Reload Data
    [self.tableView reloadData];
}

 - (void)removeWeightAtIndex:(NSUInteger)weightIndex;{

  // Manually send KVO messages.
  [self willChange:NSKeyValueChangeRemoval 
   valuesAtIndexes:[NSIndexSet indexSetWithIndex:weightIndex]
          forKey:KVOWeightChangeKey];

  // Add to the front of the list.
  [self.weightHistory removeObjectAtIndex:weightIndex];

  // Manually send KVO messages.
  [self didChange:NSKeyValueChangeRemoval 
valuesAtIndexes:[NSIndexSet indexSetWithIndex:weightIndex]
         forKey:KVOWeightChangeKey]; 
```

}

错误消息：*** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM removeObjectAtIndex:]：索引 3 超出范围 [0 .. 1]” ***第一次抛出调用堆栈：（0x19ba012 0x1397e7e 0x195c1c4 0x9618 0x5622 0x3c2753 0x3c2a7b 0x3d0590 0x3d85bd 0x3d8eab 0x3da3d6 0x3da675 0x96fd780 0x3d9625 0x3db728 0x35da0b 0x35d990 0x96d1f7a 0x360d1a 0x360f14 0x3610c9 0x31233f 0x312552 0x2f03aa 0x2e1cf8 0x26ecdf9 0x26ecad0 0x192fbf5 0x192f962 0x1960bb6 0x195ff44 0x195fe1b 0x26eb7e3 0x26eb668 0x2df65c 0x2b2d 0x2a55) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:14:22.557

当`i`等于 3 时，您已经从数组 (0, 1, 2) 中删除了 3 个项目。现在在位置 0 和 1 还剩下两个。如果您尝试在位置 3 删除一个，那么您就超出了范围。

调用`removeAllObjects`数组而不是循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:59:59.937

像这样的代码行是个坏主意：

```
for (int i =0; i< count; i ++) { 
        [self.weightHistory removeWeightAtIndex:i]; //error when i > 2
    } 
```

您正在做的是在枚举数组时修改它。在您通过时更改阵列势必会导致问题。

# cakephp - cakephp 中的视图函数有问题

> ID：13085686
> 
> 赞同：-1
> 
> 时间：2012-10-26T11:01:32.823
> 
> 标签：cakephp, view

```
public function urls($id = null) {
    $this->Movie->id = $id;
    $this->set('Movie' , $this->Movie->read(null, $id));
    if ($this->request->is('requested')) {
        return $this->set('Movie' , $this->Movie->read(null, $id));
    }
    if (!$this->Movie->exists()){
    $this->redirect(array('controller' => 'pages','action' => 'display'));
    } 
```

}

这是我的视图功能，但它不起作用！，当页面加载时，做一个预测器

```
$this->redirect(array('action'=>'index')); 
```

我不知道是什么问题，但是电影应用程序中的所有其他公共功能都运行良好，请帮助！

PS：我在用户应用程序中的删除功能有同样的问题

```
public function delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('المستخدم مش صالح'));
    }
    if ($this->User->delete()) {
        $this->Session->setFlash(__('تم يا تيت'));
        $this->redirect(array('controller' => 'pages','action' => 'display'));
    }
    $this->Session->setFlash(__('الحمد لله , مترمتش , حاول تاني'));
    $this->redirect(array('controller' => 'pages','action' => 'display'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:23:33.773

在这里我发现了一个错误。

```
$this->movie->exists(); 
```

不是正确的语法使用`$this->Movie->exists()` 而不是“电影”，您可以使用“电影”

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:08:39.613

模型是“电影”，而不是“电影”。

看这里： [http ://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)

# java - 带有 FreeMarker 的 Spring：无法解析名称为“MyServlet”的 servlet 中名称为“Home”的视图

> ID：13085693
> 
> 赞同：4
> 
> 时间：2012-10-26T11:02:07.207
> 
> 标签：java, spring, model-view-controller, freemarker

我正在尝试创建一个非常简单的 FreeMarker 和 Spring 集成。但是，当我运行我的示例时，出现异常：

```
GRAVE: Servlet.service() for servlet MyServlet threw exception
javax.servlet.ServletException: Could not resolve view with name 'Home' in servlet with name 'MyServlet'
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1162)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

我不知道我的配置有什么问题：

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.jverstry.Configuration</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>MyServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>

</web-app> 
```

**网页配置**

```
@EnableWebMvc
@Configuration
@ComponentScan(basePackages = "com.jverstry")
public class WebConfig extends WebMvcConfigurerAdapter {

    @Bean
    public ViewResolver getViewResolver() {

        FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();
        resolver.setCache(true);
        resolver.setPrefix("WEB-INF/pages/");
        resolver.setSuffix(".ftl");

        return resolver;

    }

    @Bean
    public FreeMarkerConfigurer getFreemarkerConfig() {

        FreeMarkerConfigurer result = new FreeMarkerConfigurer();

        result.setTemplateLoaderPath("WEB-INF/pages/");

        return result;

    }   

} 
```

**控制器**

```
@Controller
public class MyController {

    @RequestMapping(value = "/")
    public String home(@ModelAttribute("model") ModelMap model) {

        model.addAttribute("MsTime", System.currentTimeMillis());

        return "Home";

    }

} 
```

**PS**：当然，里面有一个`Home.ftl`文件`WEB-INF/pages/`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T14:14:58.530

经过大量搜索，没有设置前缀解决了这个问题：

```
@Bean
public ViewResolver getViewResolver() {

    FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();
    resolver.setCache(false);
    //  resolver.setPrefix("");
    resolver.setSuffix(".ftl");

    return resolver;

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T11:54:39.257

freemaker 的配置（在 spring 参考文档中找到） [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#view-velocity](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#view-velocity)

```
 <!-- freemarker config -->
<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
  <property name="templateLoaderPath" value="/WEB-INF/freemarker/"/>
</bean>

<!-- 

  View resolvers can also be configured with ResourceBundles or XML files. If you need
  different view resolving based on Locale, you have to use the resource bundle resolver.

-->
<bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
  <property name="cache" value="true"/>
  <property name="prefix" value=""/>
  <property name="suffix" value=".ftl"/>
</bean> 
```

和 java 配置版本将是：

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer;
import org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver;

@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

    @Bean
    public ViewResolver viewResolver() {
        FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();
        resolver.setCache(true);
        resolver.setPrefix("");
        resolver.setSuffix(".ftl");
        return resolver;

    }

    @Bean
    public FreeMarkerConfigurer freemarkerConfig() {
        FreeMarkerConfigurer result = new FreeMarkerConfigurer();
        result.setTemplateLoaderPath("/WEB-INF/pages/");
        return result;

    }   

} 
```

# java - 使用特殊编码将 Java 字符串写入文件

> ID：13085698
> 
> 赞同：3
> 
> 时间：2012-10-26T11:02:29.947
> 
> 标签：java, delphi, file-io, encoding

我有 Java String `ôð¤ Ø$î1<¨ V¸dPžÐ ÀH@ˆàÀà¼€@`~€4`，我想用 ANSI 编码写入文件。

```
BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(output),"windows-1252"));
    try {   
        out.append(str);
    } finally {
        out.close();
    } 
```

调试器说`str`包含`ôð¤ Ø$î1<¨ V¸dPÐ ÀH@àÀà¼@`〜4。一旦我将它写入输出文件，该文件只包含`?ÒÜ@4`. 那么我的方法写入文件有什么问题？

对不起这个奇怪的字符串 - 我正在尝试用 java 重写一个 delphi 7 函数。这些字符串是我得到的唯一样本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:10:03.423

如果我跑

```
String text = "ôð¤ Ø$î1<¨ V¸dPžÐ ÀH@ˆàÀà¼€@`~€4";
Writer writer = new OutputStreamWriter(new FileOutputStream("test.txt"), "windows-1252");
writer.append(text);
writer.close();
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("test.txt"), "windows-1252"));
String line = br.readLine();
br.close();
System.out.println(line.length() + ": '" + line + "' matches " + line.equals(text)); 
```

它打印

```
32: 'ôð¤ Ø$î1<¨ V¸dPžÐ ÀH@ˆàÀà¼€@`~€4' matches true 
```

所以翻译中不会丢失任何字符。

* * *

如果我将编码更改为“US-ASCII”，我会得到以下输出

```
32: '??? ?$?1<? V?dP?? ?H@??????@`~?4' matches false 
```

# iphone - 允许 UITextField 字符在边界外渲染

> ID：13085702
> 
> 赞同：2
> 
> 时间：2012-10-26T11:02:38.313
> 
> 标签：iphone, objective-c, uitextfield, drawrect

当我希望在其矩形内呈现 Å 等字符时，我遇到了 UITextField 问题。

它的顶部被剪掉，使Å看起来像一个A。

在某些情况下，我已经使用这样的自定义 UITextField 解决了它：

```
- (void)drawTextInRect:(CGRect)rect {
    rect.origin.y = rect.origin.y+5;
    [super drawTextInRect:rect];
} 
```

当文本像这样正常显示时，它起作用：

![在此处输入图像描述](../Images/1ba1117b66a041b80389128048308278.png)

但是当您开始编辑文本时，就像不再应用 drawTextInRect 一样，字符的顶部又消失了。

像这样：

![在此处输入图像描述](../Images/df867d02c6bc3880c5551942b6969600.png)

还有其他人对如何解决这个问题有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:11:17.637

`- (CGRect)textRectForBounds:(CGRect)bounds`改为覆盖以在所有情况下调整文本矩形。我怀疑`UITextField`当您不编辑文本时会使用标签，而当您编辑文本时会使用其他标签，并且只有其中一个会`drawTextInRect:`特别调用。

# iphone - 循环通过排序字典取消排序。

> ID：13085706
> 
> 赞同：0
> 
> 时间：2012-10-26T11:02:51.683
> 
> 标签：iphone, objective-c, ios

我有一本分类过的字典。我的问题是当我循环遍历它时再次未排序。

```
 //sort the poiIDArray so it appears alphabetically
NSArray *sortedValues = [[self.pois allValues] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSMutableDictionary *orderedDictionary=[[NSMutableDictionary alloc]init];
for(NSString *valor in sortedValues){
    for(NSString *clave in [self.pois allKeys]){
        if ([valor isEqualToString:[self.pois valueForKey:clave]]) {
            [orderedDictionary setValue:valor forKey:clave];
        }
    }
}

NSLog(@"ordered dic: %@",orderedDictionary);

//loop through dic and get names. 
for(NSString *key in orderedDictionary) {

    NSLog(@"%@",key);

} 
```

这是我的日志。

```
2012-10-26 11:49:35.221 CPOP Test 4[1277:c07] ordered dic: {
"Badger Burgers" = 5;
"Costa Coffee" = 4;
"Spiffing Drinks" = 6;
"Vals Vegetables" = 7;
}
2012-10-26 11:49:35.221 CPOP Test 4[1277:c07] Costa Coffee
2012-10-26 11:49:35.222 CPOP Test 4[1277:c07] Spiffing Drinks
2012-10-26 11:49:35.222 CPOP Test 4[1277:c07] Badger Burgers
2012-10-26 11:49:35.222 CPOP Test 4[1277:c07] Vals Vegetables 
```

谁能告诉我为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:05:43.993

字典根据定义是无序的。如果您需要特定顺序，请使用数组。

# windows - Powershell 或其他 Windows 方法将带日期戳的 html 文件复制到网络共享

> ID：13085708
> 
> 赞同：0
> 
> 时间：2012-10-26T11:02:56.053
> 
> 标签：windows, powershell, robocopy

我是 powershell 的新手 - 如此严重的菜鸟。

但我想看看是否有人可以帮助做以下事情。

我们在服务器上有一个文件夹，每晚都向其写入报告。报告按以下格式命名： `DiskSpaceReport_26102012.html` 和位置`C:\Powershell\WebReport\`

我想要一个 PS 脚本使用从脚本运行之日起 -8 天的日期范围从文件夹中复制这 1 个文件 - 该脚本将作为 Windows 计划任务的一部分或通过 SQL 代理作业运行。

所以目前该文件夹中有 8 个文件的日期`Friday 26 Oct`为`Friday 19th Oct`. 我希望该过程今天运行并从今天开始复制文件 -8 天。所以复制名为`DiskSpaceReport_19102012.html`

这个过程应该在星期五每周重复一次，并复制 8 天前的最后一个文件。复制到网络共享

`\\Server01\Powershell\Webreports_Archive`

正如我在标题中提到的，我不介意这是否更容易通过批处理文件中的 robocopy 来完成。虽然更喜欢通过PS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:13:44.323

以下将做你想要的：

```
$pastdays = -8
$pastdate = [datetime]::Now.AddDays($pastdays)
$filename = "DiskSpaceReport_" + $pastdate.Day + $pastdate.Month + $pastdate.Year+".html"
Copy-Item -Path "C:\Powershell\WebReport\$($filename)" "\\Server01\Powershell\Webreports_Archive" 
```

问候乔恩

# python - df.head() 有时在 Pandas、Python 中不起作用

> ID：13085709
> 
> 赞同：20
> 
> 时间：2012-10-26T11:02:58.790
> 
> 标签：python, pandas

我是 Python 和 Pandas 库的初学者，我对 DataFrame 的一些基本功能感到困惑。我有一个熊猫数据框，如下所示：

```
>>>df.head()  
              X  Y       unixtime
0  652f5e69fcb3  1  1346689910622
1        400292  1  1346614723542
2  1c9d02e4f14e  1  1346862070161
3        610449  1  1346806384518
4        207664  1  1346723370096 
```

但是，在我执行了一些功能之后：

```
def unixTodate(unix):
  day = dt.datetime.utcfromtimestamp(unix/1000).strftime('%Y-%m-%d')
  return day

df['day'] = df['unixtime'].apply(unixTodate) 
```

我无法再使用 df.head() 函数：

```
>>>df.head()  

<class 'pandas.core.frame.DataFrame'>
Int64Index: 5 entries, 190648 to 626582
Data columns:
X              5  non-null values
Y              5  non-null values
unixtime       5  non-null values
day            5  non-null values
dtypes: int64(3), object(5) 
```

我不明白为什么会这样。我在这里做错了吗？欢迎任何指针！谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T11:43:09.147

`df.head(n)`返回 a`DataFrame`保存 df 的前 n 行。现在显示一个`DataFrame`pandas 默认情况下检查终端的宽度，如果这太小而无法显示，将显示`DataFrame`一个摘要视图。这是你在第二种情况下得到的。

您能否增加终端的大小，或禁用列上的自动检测`pd.set_printoptions(max_columns=10)`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-26T05:26:12.730

试试下面的代码段：

```
from IPython.display import display
display(df.head()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-05T20:10:21.160

```
 DataFrame.head(n=5) 
```

返回前 n 行。

此函数根据位置返回对象的前 n 行。它对于快速测试您的对象中是否包含正确类型的数据很有用。

参数：

```
n : int, default 5 
```

要选择的行数。

回报：

```
obj_head : type of caller 
```

调用者对象的前 n 行。

# qt - 有没有一种简单（而且不太慢）的方法来比较 Qt/QML 中的两个图像以检测运动

> ID：13085715
> 
> 赞同：1
> 
> 时间：2012-10-26T11:03:11.600
> 
> 标签：qt, qml, nokia, meego-harmattan

我想在 Qt/QML 中为诺基亚 N9 实现一个运动检测相机。我希望有一些内置的方法来计算图像差异，但我在 Qt 文档中找不到任何方法。

我的第一个想法是缩小两个连续图像，转换为每像素一位，计算 XOR，然后计算黑白像素。

或者有没有一种简单的方法可以使用其他地方的库来达到同样的目的？

编辑：我刚刚在 Qt 开发人员网络上找到了一些看起来很有希望的示例代码： [图像合成示例](http://qt-project.org/doc/qt-4.8/painting-imagecomposition.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:28:58.700

要比较图像，qt 有[QImage::operator==(const QImage&)](http://doc.qt.digia.com/qt/qimage.html#operator-eq-eq)。但我认为它不适用于运动检测。

但这可能会有所帮助：[Python 运动检测库 + 演示](http://www.dzone.com/snippets/python-motion-detection)。

# eclipse - 导出 Domino 的 osgi 插件时出错

> ID：13085716
> 
> 赞同：0
> 
> 时间：2012-10-26T11:03:12.900
> 
> 标签：eclipse, osgi, lotus-domino

我为 Domino 开发了一个 osgi 插件。它包含一个需要检查 ACL 设置的 servlet。

我有一个基于 ...Domino/rcp/plugins 和 ...Domino/shared/plugins 的目标平台。jre 是已安装的 Domino jre。

servlet 导入 lotus.domino 并使用 lotus.domino.ACL。插件清单包含对 lotus.domino 的依赖。

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: MyServletPlugin
Bundle-SymbolicName: MyServletPlugin;singleton:=true
Bundle-Version: 1.0.1.20121026
Bundle-Activator: de.xyz.Activator
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Import-Package: lotus.domino,
 org.osgi.framework;version="1.3.0"
Require-Bundle: org.eclipse.equinox.http.registry,
 org.eclipse.equinox.http.servlet,
 org.eclipse.osgi,
 org.eclipse.osgi.services,
 org.eclipse.osgi.util,
 com.ibm.pvc.servlet;bundle-version="2.5.0"
Bundle-ClassPath: lib/gson-1.6.jar,
 . 
```

当我使用导出向导导出插件时，出现错误。

```
Errors occured during the export operation. 
```

日志文件包含以下内容：

```
# 26.10.12 12:33:32 MESZ
# Eclipse Compiler for Java(TM) 0.B83_R37x, 3.7.2, Copyright IBM Corp 2000, 2011\. All  rights reserved.
----------
1\. ERROR in D:\workspace\osgiservlet\WireitServletPlugin\src\de\xyz\AclServlet.java (at line 14)
    import lotus.domino.ACL;
           ^^^^^
The import lotus cannot be resolved
----------
2\. ERROR in D:\workspace\osgiservlet\WireitServletPlugin\src\de\xyz\AclServlet.java (at line 15)
    import lotus.domino.ACLEntry;
           ^^^^^
The import lotus cannot be resolved 
```

......还有更多这样的。

Domino 版本是 8.5.3，eclipse 是 Indigo SR2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:06:50.657

添加“com.ibm.notes.java.api”作为必需插件，并从导入的包中删除lotus.domino。那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:11:06.567

我想我找到了原因。

When I set up the project I added a sepate project which just contained the Notes.jar. I assume this was recommended on blog or something.

It had worked ok so I'm not sure what went wrong. In any case, I removed the project and the export is now successful.

# pydev - pydev：从 Windows 远程调试 linux 服务器

> ID：13085723
> 
> 赞同：0
> 
> 时间：2012-10-26T11:03:43.863
> 
> 标签：pydev

我跟着[http://pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)并配置了这样的东西

```
PATHS_FROM_ECLIPSE_TO_PYTHON = [('W:',
                             r'/path/to/app'),
                            ] 
```

翻译工作但有一个小问题：反斜杠没有翻译。

我收到以下消息：

```
pydev debugger: warning: trying to add breakpoint to file that does not exist:
/path/to/app\subpath\foo\bar.py (will have no effect) 
```

如何配置 pydevd_file.utils.py 以便翻译反斜杠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:11:38.053

我找到了解决方案。我设置

```
eclipse_sep = '\\'
python_sep = '/' 
```

在 pydevd_file_utils.py

# mysql - mysql.proc 表如何获取条目？

> ID：13085724
> 
> 赞同：0
> 
> 时间：2012-10-26T11:03:49.077
> 
> 标签：mysql, database, database-administration

我想知道，在 mysql 中，当我创建任何过程或函数时，相应创建的条目会在 mysql.proc 表中获得一个条目。我想知道 mysql 中的哪个进程或触发器，它会被更新。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:41:05.777

mysql 数据库中的表不是应用程序表中的表。相反，它们是内部 mysql 软件数据结构，碰巧对外部世界可见，就好像它们是表一样。

因此，在这些表中使行可见的过程完全是 mysqld 的逻辑内部的。

# c - C函数在多个源文件中的声明和定义

> ID：13085747
> 
> 赞同：9
> 
> 时间：2012-10-26T11:05:06.690
> 
> 标签：c, declaration

以下是 src1.c 的内容：

```
#include <stdio.h>
extern int w;
//int go(char); // no need to declare here. WHY????
  main(){
    char a='f';
    go(a);
    printf("%d\n", w);
} 
```

这是 src2.c 的内容：

```
#include <stdio.h>
int w = 99;
int go(char t){
   printf("%c\n%d\n",t,sizeof(t));
} 
```

为什么Linux 编译后不需要`go`在文件中声明函数？`src1.c`

```
 cc src1.c src2.c; 
```

编译器是否将文件中的`go`函数定义放在`src2.c`主函数代码之上，这样就不需要声明了？

在我这样做：

```
#include <stdio.h>
int go(char); // need to declare here, because if not, arguments of go will be promoted to intS and they would conflict with char parameters defined in go. Error is droped!
  main(){
    char a='f';
    go(a);
} 
  int go(char t){
   printf("%c\n%d\n",t,sizeof(t));
} 
```

所以每个人都说，在没有原型的情况下可以传递任何数量和类型的参数是错误的。在这种情况下，它们被提升为`int`s，但必须与定义中指定的一致。

* * *

我做了一些测试，发现即使编译没有错误，它也不能正常工作。

src1：

```
#include <stdio.h>
int go(int t){
    printf("%d\n%d\n",t,sizeof(t));
} 
```

sr2.c：

```
#include <stdio.h>
int go(int); //if I omit this prototype, program outputs 1 which is far from correct answer :)
main(){ 
    double b=33453.834;
    go(b);
} 
```

所以最后答案只能是未定义的行为。

谢谢马克西姆·斯库里丁

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T11:10:02.193

在使用函数之前，确实不是必须要有一个函数原型，但这是 C 早期的一个怪癖。

当没有原型存在时，编译器无法检查传递给函数或由函数返回的实际类型，如果用法和声明不匹配，这可能会非常糟糕。

当编译器在调用时没有看到原型`go`时`go(b);`，它假定它具有以下原型`int go(<any number of arguments can be there>)`。默认参数提升是在函数调用之前对参数执行的。当然，如果`go`另一个翻译模块中没有函数，你会得到一个链接器错误。

从 c99 标准：

> **6.5.2.2 函数调用**
> 
> 如果表示被调用函数的表达式的类型不包含原型，则对每个参数执行整数提升，而浮点类型的参数将提升为双精度。这些被称为**默认参数提升**. 如果参数的数量不等于参数的数量，则行为未定义。如果函数使用包含原型的类型定义，并且原型以省略号 (, ...) 结尾，或者提升后的参数类型与参数类型不兼容，则行为未定义。如果函数定义的类型不包含原型，并且提升后的参数类型与提升后的参数类型不兼容，则行为未定义，但以下情况除外：
> 
> — 一种提升类型是有符号整数类型，另一种提升类型是对应的无符号整数类型，并且值可以在两种类型中表示；
> 
> — 两种类型都是指向字符类型或 void 的限定或非限定版本的指针。
> 
> **6.3.1.1 布尔值、字符和整数**
> 
> 2/ 如果一个int可以表示原始类型的所有值，则将该值转换为一个int；否则，它将转换为无符号整数。这些被称为**整数促销**.48) 所有其他类型都是

**更新：**

> 编译器是否将 src2.c 文件中的 go 函数定义放在 main 函数的代码之上，这样就不需要声明了？

不，它什么也没放。上述标准的引用表明不需要原型。`go`每个文件都是独立编译的，所以在编译 src1.c 时，它对 src2.c 和里面的函数定义一无所知。

> 所以每个人都说，在没有原型的情况下传递任何数量和类型的参数都是错误的。在这种情况下，它们被提升为 intS，但必须与定义中指定的一致。

这是可能的，并且在系统范围的更改之后我遇到了一些晦涩的错误，这些错误由于某种原因编译得很好而没有任何警告（实际上，这是未定义的行为）。同样，由于每个 *.c 文件都是独立编译的，现在它可以检查`go`在另一个翻译单元中定义的参数数量及其函数类型。如果该函数采用您提供的更多参数，则“未使用”参数将填充一些随机数据。您应该记住，如果参数不匹配 - 这是未定义的行为，这意味着任何事情都可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:07:18.187

**默认情况下**

go() 将是`int go()`. **即返回 int 并接受任意数量的参数**。因此您的实际功能与默认功能类型匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:08:26.187

当您使用这两个源文件制作一个可执行文件时，最终的可执行文件将具有定义，`go()`因此不需要它。

但是最好在两个源文件中放入`declaration`一个`header file`然后包含该头文件

这是头文件 someheader.h

```
#ifndef __SMH_
#define __SMH_

int go(char);

#endif 
```

现在像这样包含它

```
#include "someheader.h" 
```

在`src1.c`和`src2.c`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:09:54.410

首先，函数声明应该放在头文件中。现在回答您的问题：
当您编译两个文件时，然后在链接时，链接器在 src2.o 中找到 go() 的符号定义，从而解析可执行文件中的符号引用，这就是为什么你的程序有效。

您正在尝试使用`sizeof()`which 是一个编译时运算符，因此它会输出`1`，因为您在一个角色上起诉它。
您还将整数值 >255 传递给 char 变量，这将导致溢出并且 t 将存储 1789modulo255 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T11:10:22.423

当编译器`go()`在 str1.c 中看到时，它假定该函数是在其他地方定义的。链接器仅在链接时搜索`go()`.

我认为，您正在分别编译这两个文件并将它们链接在一起，这很好。因为在链接时`go()`存在的定义。

如果您尝试单独编译 str1.c （`gcc str1.c` 而不是`gcc -c str1.c`），您将收到有关`go()`链接器未找到的错误。

**更新：**

*甚至编译器的隐式声明也不符合标准（自 C99 起）*。

从技术上讲，如果在编译器可以看到它的定义之前调用每个函数，则无论其返回类型如何，它都应该有一个原型。隐式声明 int 返回函数不再有效（在 C89 中有效）并且自 C99（和 C11）以来已被删除。

虽然，大多数编译器仍然只发出警告，而不是错误。但是，如果某些编译器由于不存在函数原型而拒绝编译，那么您就不能抱怨它，因为它不符合标准。

# spring - @ViewScoped 不起作用，为每个请求创建 bean

> ID：13085749
> 
> 赞同：0
> 
> 时间：2012-10-26T11:05:14.787
> 
> 标签：spring, jakarta-ee, jsf-2, migration, tomcat6

我正在从 JSF1.2 迁移到 2.1，我将 faces-config.xml 中的 bean 条目更改为注释。我尝试使用@ViewScoped 代替@RequestScoped 和@ManagedProperties（对于几个类中的许多参数），但是每次我单击提交时，我的表单bean 都会重新创建注释为@ViewScoped。对于@SessionScoped，一切正常。

我在这里阅读了一些问答和[这篇文章](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)，但我没有强迫它工作。

我将 JSTL 标记更改为呈现的属性，或 c:if 与 ui:param 呈现。

在我的 web.xml 中，我设置了参数：

```
<context-param>
  <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
  <param-value>false</param-value>
</context-param>
<context-param>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>CLIENT</param-value>
</context-param> 
```

我试过 javax.faces.PARTIAL_STATE_SAVING = true，但也没有用。与 javax.faces.STATE_SAVING_METHOD = SERVER 相同的问题。

我删除了标签处理程序进行测试，但它也没有帮助。

在项目中使用：Mojarra 2.1.13、hibernate 3.6、spring 3.1（据我所知，我的前任更新了 2.x 形式）、acegi-security-1.0.5、tomahawk20、urlrewrite-3.2.0。

我用tomcat 6

**编辑：**

这是我的 bean：package my.package;

```
import javax.faces.bean.ManagedBean; 
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ViewScoped;

import my.package.MyOtherBean;

@ManagedBean(name="someNameBean")
@ViewScoped
//@SessionScoped
public class MyBean extends MyOtherBean {

public MyBean(){
    super();
    //XXX
    System.out.println("-->> someNameBean is being created");       
}
}

package my.package;

@ManagedBean(name="someNameMyOtherBean")
//@ViewScoped
@SessionScoped
public class MyOtherBean extends BaseBean {

private ClassWithFormFields dataIn; //getter & setter exist
//a lot of code here

} 
```

bean 的使用示例

```
<h:selectOneMenu value="#{someNameBean.dataIn.currencyId}" id="currencyId" tabindex="2" >
<f:selectItems value="#{someNameBean.dataIn..availableCurrencies}"/>
</h:selectOneMenu> 
```

**更新** serviceLocalizator 由 Spring xml 文件和 JSF 注释管理

```
@ManagedBean
public class BaseBean implements Serializable {

private static final long serialVersionUID = 1L;

protected transient Logger log = Logger.getLogger(this.getClass());

@ManagedProperty(value="#{serviceLocalizator}")
protected transient ServiceLocalizator serviceLocalizator;

    //few more lines

} 
```

**更新2：** 这是我的错。感谢@kolossus，他指出了方向。我一直在寻找答案，我找到并阅读了[BalusC 文章](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)现在我不应该在支持 bean 操作中返回字符串。使用 null 而不是 string 它可以工作。我对视图的概念理解得很差，我认为只要选项卡/窗口相同，ViewSoped bean id 就会存在。现在我知道那是 JSF 视图。我很抱歉给您添麻烦了。

也许是一种使用@ViewSoped 重定向到新页面的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:46:09.323

注意：如果您从 2 个不同的视图引用相同的（非会话范围的）bean，则会创建该 bean 的**两个实例**

无论哪种类型的 bean 支持 JSF 视图，在 JSF 中导航都是非常基本和直接的。

1.  返回您尝试导航到的页面的名称（视图 ID）作为公共方法的返回值

    ```
     public String navigateAway(){
       //Do whatever processing you want here
       return "page2"; //where page2 is the name of an actual .xhtml file in your application     
       } 
    ```

2.  `faces_config.xml`返回文件中指定的 JSF 导航案例结果

    ```
     public String navigateAway(){
        //Prior processing
        return "go somewhere else" ;  //where go somewhere else is a navigation outcome you've specified in your faces_config.xml file
       } 
    ```

    在您的`faces_config.xml`文件中，您将拥有这个

    ```
     <navigation-rule>
    <from-view-id>/register.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>go somewhere else</from-outcome>
        <to-view-id>/review_registration.xhtml</to-view-id>
        <redirect/>
    </navigation-case> 
    ```

但是，如果您想在某个操作后保持在同一页面上，只需`null`在您的方法中返回而不是字符串，您将不会被带到另一个视图。此外，根据您的支持 bean 的范围，如果您返回 null 值，您可以确定您将使用相同的 bean 实例

更多细节看[这里](http://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/)

# smtp - Javamail API 发送电子邮件到 smtp 和 smtps

> ID：13085750
> 
> 赞同：3
> 
> 时间：2012-10-26T11:05:16.720
> 
> 标签：smtp, jakarta-mail, smtps

我正在构建一个邮件客户端，我想知道我的会话是否能够支持所有类型的 smtp 连接......虽然我真的不知道我能从那里得到什么

我想确认以下是否正确

1 - 对于 SMTP，我只需要主机：

props.put("mail.smtp.host", 主机);

我不需要用户和通行证吗？

2 - 对于 SMTPS，我需要设置 tls 还是总是如此？ssl呢？

我对邮件协议有点陌生，所以我真的很感谢在这个主题上提供一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:04:27.013

我建议花一些时间[阅读 JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)，它有更多资源可以帮助您入门。

要回答您的直接问题...

1.  是否需要用户名和密码取决于您的邮件服务器。大多数公共邮件服务器都这样做。一些公司内部的邮件服务器没有。
2.  “smtps”是“通过 SSL 连接的 smtp”。正式地，“TLS”只是“SSL”的标准版本，但在这种情况下，当人们提到“TLS”时，他们通常指的是“STARTTLS”命令。STARTTLS 命令允许您建立纯文本（非 SSL）连接，然后将该连接切换为使用 SSL (TLS)。如果您使用“smtps”协议，则不需要此协议，因为它首先建立了 SSL 连接。

# ios - Cordova iOS 自定义插件：处理内存警告

> ID：13085761
> 
> 赞同：2
> 
> 时间：2012-10-26T11:05:53.460
> 
> 标签：ios, cordova, didreceivememorywarning, viewdidunload

我正在开发一个使用 cordova(2.1) 和一些自定义插件的 iOS 应用程序。

我试图面对的问题如下：当我显示我的插件（基本上是一个比内置的cordova插件具有更多功能的相机插件）时，有时我会收到一个内存警告，并且随后会卸载包含 webview 的视图. 这对我来说是一个非常大的问题，因为一旦我的 imagePicker 被关闭，webview 就不会恢复。

我查看了 CDVCamera 插件源，我注意到的是：

(1)插件保存webview：

```
 // we need to capture this state for memory warnings that dealloc this object
    cameraPicker.webView = self.webView; 
```

在这里，我不明白发生了什么，好的，我们保存 webview 以防在内存警告后将其卸载，但我无法弄清楚 webview 在框架中的恢复方式/位置。

(2) 插件使用一个名为 hasPendingOperation 的 Bool 属性，如果我理解，CDVViewController 在收到内存警告时使用此属性，以避免在插件处于活动状态时清除内存。

我不明白的第一件事是为什么当我的控制器收到内存警告超级控制器（CDVViecontroller）没有收到它时？

其次，是否可以将 CDVCamera 插件使用的模式与 CDVViewController 一起应用来处理自定义插件中的内存警告？

任何有助于使用cordova管理内存警告以避免webview被卸载的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:27:04.767

1.  这可能是一种遗留使用，在哪里需要对WebView进行引用，以便在选择器被解雇时将JavaScript写入其中。并不真正需要，因为我们使用不同的方式写回 webview：[https ://github.com/apache/cordova-ios/blob/0a978a6617c58bfa98968e0c6bdcdb4f10f01902/CordovaLib/Classes/CDVCamera.m#L301](https://github.com/apache/cordova-ios/blob/0a978a6617c58bfa98968e0c6bdcdb4f10f01902/CordovaLib/Classes/CDVCamera.m#L301)

2.  不确定您的意思，CDVViewController 也确实收到内存警告，并查询每个插件的 hasPendingOperation 属性。如果设置为 true，则不会释放插件。请注意，如果内存没有充分释放，iOS 看门狗可能会终止应用程序。

# javascript - php发送邮件在wordpress中不起作用

> ID：13085762
> 
> 赞同：1
> 
> 时间：2012-10-26T11:05:53.613
> 
> 标签：javascript, php, wordpress

我有一个联系表单，用户在其中输入他的姓名、职务、消息等，并使用名为**screen.js**的 javascript 文件进行验证。这是我在 html 视图中的联系表单中的代码。

```
<div class="contact_us">
    <form id="contactform" action="#" method="post">
        <div class="formpart">
            <label for="contact_name">Name</label>
            <p><input type="text" name="name" id="contact_name" value="" class="requiredfield"/></p>
        </div>  
        <div class="formpart formpart1">
            <label for="contact_designation">Designation</label>
            <p><input type="text" name="designation" id="contact_designation" value=""/></p>
        </div>  
        <div class="formpart">
            <label for="contact_companyname">Company Name</label>
            <p><input type="text" name="companyname" id="contact_companyname" value="" class="requiredfield"/></p>
        </div>  
        <div class="formpart formpart1">
            <label for="contact_email">Email Address</label>
            <p><input type="text" name="email" id="contact_email" value="" class="requiredfield"/></p>
        </div>  
        <div class="formpart">
            <label for="contact_phone">Contact No.</label>
            <p><input type="text" name="phone" id="contact_phone" value=""/></p>
        </div>
        <div class="formpart">
            <label for="contact_message">Message</label>
            <p><textarea name="message" id="contact_message" class="requiredfield"></textarea></p>
        </div>          
        <div class="formpart">
            <button type="submit" name="send" class="sendmessage">Send</button>
        </div>
        <div class="formpart">
            <span class="errormessage">Error! Please correct marked fields.</span>
            <span class="successmessage">Email send successfully!</span>
            <span class="sendingmessage">Sending...</span>
        </div>
    </form>
</div> 
```

并且 javascript 文件**screen.js**包含

```
jQuery(document).ready(function() { 

    /* Contact Form */
    if(jQuery('#contactform').length != 0){
        addForm('#contactform');
    }

    /* Newsletter Subscription */
    if(jQuery('#newsletterform').length != 0){
        addForm('#newsletterform');
    }

});

/* Contact Form */
function addForm(formtype) {

    var formid = jQuery(formtype);
    var emailsend = false;

    formid.find("button[name=send]").click(sendemail);

    function validator() {

        var emailcheck = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
        var othercheck = /.{4}/;
        var noerror = true;

        formid.find(".requiredfield").each(function () {

            var fieldname = jQuery(this).attr('name');
            var value = jQuery(this).val();

            if(fieldname == "email"){
                if (!emailcheck.test(value)) {
                    jQuery(this).addClass("formerror");
                    noerror = false;
                } else {
                    jQuery(this).removeClass("formerror");
                }   
            }else{
                if (!othercheck.test(value)) {
                    jQuery(this).addClass("formerror");
                    noerror = false;
                } else {
                    jQuery(this).removeClass("formerror");
                }   
            }
        })

        if(!noerror){
            formid.find(".errormessage").fadeIn();
        }

        return noerror;
    }

    function resetform() {
        formid.find("input").each(function () {
            jQuery(this).val("");   
        })
        formid.find("textarea").val("");
        emailsend = false;
    }

    function sendemail() {
        formid.find(".successmessage").hide();
        var phpfile = "";
        if(formtype=="#contactform"){
            phpfile = "../php/contact.php";
        }else if(formtype=="#newsletterform"){
            phpfile = "php/signup.php";
        }else{
            phpfile = "";
        }
        if (validator()) {
            if(!emailsend){
                emailsend = true;
                formid.find(".errormessage").hide();
                formid.find(".sendingmessage").show();
                jQuery.post(phpfile, formid.serialize(), function() {
                    formid.find(".sendingmessage").hide();
                    formid.find(".successmessage").fadeIn();
                    resetform();
                });
            }
        } 
        return false
    }
} 
```

和我的php文件contact.php

```
<?php

$to = "developer@vakilspremedia.com"; /* Enter your email adress here */

$name = trim($_POST['name']);
$designation = trim($_POST['designation']);
$companyname = trim($_POST['companyname']);
$email = trim($_POST['email']);
$phone = trim($_POST['phone']);
$message = str_replace(chr(10), "<br>", $_POST['message']);

$body = "<html><head><title>Contact Form Email</title></head><body><br>";
$body .= "Name: <b>" . $name . "</b><br>";
$body .= "Designation: <b>" . $designation . "</b><br>";
$body .= "Company Name: <b>" . $companyname . "</b><br>";
$body .= "Email: <b>" . $email . "</b><br>";
$body .= "Phone: <b>" . $phone . "</b><br><br>";
$body .= "Message:<br><hr><br><b>" . $message . "</b><br>";
$body .= "<br></body></html>";

$subject = 'Contact Form Email from ' . $name;
$header = "From: $to\n" . "MIME-Version: 1.0\n" . "Content-type: text/html; charset=utf-8\n";

mail($to, $subject, $body, $header);

?> 
```

验证工作完美，但是当我在所有字段中输入值时，它显示**正在发送...**作为消息，并且即使经过数小时的等待，也不会显示电子邮件已成功发送。单击发送按钮后，它似乎什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:39:22.633

修改此代码的 js 确保 phpfile var 具有 url 路径或将 contact.php 放在同一目录中

jQuery.post('contact.php', formid.serialize(), function() {

```
 console.log('success');
                formid.find(".sendingmessage").hide();
                formid.find(".successmessage").fadeIn();
                resetform(); 
```

});

# java - Java 中的图像处理，如 MATLAB Image Processing Toolbox

> ID：13085763
> 
> 赞同：3
> 
> 时间：2012-10-26T11:05:53.897
> 
> 标签：java, matlab, image-processing

它是否存在允许以与 MATLAB IPT 非常相似的方式处理图像的 Java 解决方案？我的意思是，有一些图书馆可以做类似的事情`IPT4Java.imfilter(A, F)`吗`IPT4Java.fspecial('average', [3 3])`？

如果没有，实施这种方法的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:08:06.143

Java Advanced Imaging (JAI) 支持多种可应用于图像的过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:07:40.840

你可以看看 OpenCV 的 Java 包装器：

[http://code.google.com/p/javacv/](http://code.google.com/p/javacv/)

# c# - 在运行时生成 SQL Server CE 数据库和实体模型

> ID：13085764
> 
> 赞同：0
> 
> 时间：2012-10-26T11:05:58.293
> 
> 标签：c#, sql-server, database, entity-framework, sql-server-ce

我正在开发一个桌面应用程序，不同的用户可以在同一台机器上使用该应用程序，该应用程序应该为每个用户生成不同的 SQL Server CE 数据库文件，其中数据库具有相同的模式（结构），然后生成一个实体模型那个数据库，我应该怎么做呢？

我是实体框架和 SQL Server CE 引擎的新手，所以我愿意考虑任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:45:58.800

使用代码优先。使用 Code First，您可以在代码中定义模型，然后在应用程序第一次运行时它会查找数据库，如果数据库不存在，那么它可以为您创建该数据库。您的应用程序应为 SQL Compact 数据库使用连接字符串，该连接字符串为每个用户指向不同的位置。这样，当新用户第一次运行应用程序时，将为该用户创建一个数据库，然后该数据库将随后用于同一用户将来使用该应用程序。可以在此处找到有关 Code First 入门的帮助：http: [//msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907)

# database - 需要一些帮助（搜索算法）

> ID：13085765
> 
> 赞同：4
> 
> 时间：2012-10-26T11:05:59.567
> 
> 标签：database, algorithm, search

我需要一些帮助来解决这个问题：

作为输入，我有一个字符串，它看起来像`Blue cat green eyes 2342342`，或者它可以是`Cat blue eyes green 23242`或任何其他单词排列。

在我的数据库表中，我有一些数据。例如，其中一列称为关键字。

下面是这个表的一个例子：

![在此处输入图像描述](../Images/c81c8b4dd2d689aeb29fa2a52f7feb83.png)

我的任务是在我的数据库表列 KEYWORDS 中查找记录，它与输入字符串中的一些单词匹配。

例如：对于字符串*“ **Blue cat** green eyes 2342342”* *“ **Cat blue** eyes green 23242”*和*“ **Cat** 23242 eyes **blue** green”*，结果必须是*“blue cat”（我表的第一行）*。我能想象如何解决这个任务的唯一方法是这样的：

1.  始终从字符串中提取每个单词。
2.  `%like%`在表格列中搜索每个单词。
3.  如果没有找到，则意味着这个词不是关键，我们对它没有兴趣。
4.  如果它被发现一次 - 太好了！毫无疑问，这就是我们正在寻找的。
5.  如果有多个结果：
6.  从字符串中的所有单词中提取每个单词，这些单词尚未经过测试。
7.  `%like%`在步骤 2 的结果中搜索这个词。
8.  等等……</li>

该算法的图形模式在[这里](http://www.gliffy.com/go/publish/4011505/ "该算法的图形表示")

但是，如果表中有很多记录并且我的输入字符串包含大量单词，那么这个算法看起来会运行得很慢。

所以，我的问题是：**有没有什么特殊的算法可以帮助解决这个任务？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:54:03.033

您可以采用另一张桌子，例如

```
ID    KeywordID     Word
1     1             blue
2     2             blue
3     1             cat 
```

并转换字符串

```
"Blue cat green eyes 2342342" 
```

在一系列索引和计数中：

```
SELECT KeywordID, COUNT(*) FROM ancillary WHERE Word IN ('blue','cat','green','eyes'...) 
```

这将执行一系列*精确*匹配并返回，例如，

```
KeywordID   Count
1           2
2           1 
```

然后你知道id为1的关键字组有两个词，这意味着计数2匹配所有这些词。所以keywordid 1 是满足的。第 2 组也有两个词（黑色、猫）但只找到一个，匹配存在但不完整。

如果您还记录关键字集大小和关键字 ID，则来自同一 ID 的所有关键字将具有相同的 KeywordSize，您也可以 GROUP BY：

```
KeywordID   KeywordSize    Count
1           2              2
2           2              1 
```

甚至可以`SELECT COUNT(*)/KeywordSize AS match ... ORDER BY match`按相关性排序关键字匹配。

当然，一旦有了 KeywordID，就可以在关键字表中找到它。

## 执行

您想将关键字列表“黑色愤怒的猫”添加到现有表中。

所以你把这个关键词列表分解成单词：得到“black”、“angry”和“cat”。

您通常在已有的表中插入关键字列表，然后检索新创建的行的 ID，假设它是 1701。

现在您将单词插入到我们称为“辅助”的新表中。此表仅包含您的主表的关键字行 ID、单个单词以及该单词来自的单词列表的大小。

我们知道我们总共插入了 3 个单词，对于表第 1701 行，所以 size=3，我们插入这些元组：

```
(1701, 3, 'black')
(1701, 3, 'cat')
(1701, 3, 'angry') 
```

（这些将收到他们自己的唯一 ID，但这与我们无关）。

现在一段时间后，我们收到一个句子，

```
'Schroedinger cat is black and angry' 
```

我们可以首先针对要删除的空词列表运行查询，例如“is”和“and”。但这不是必需的。

然后我们可以运行与单词一样多的查询，从而发现任何地方都没有包含“Schroedinger”的行，我们可以删除它。但这也不是必需的。

最后，我们针对辅助构建*真正的*查询：

```
SELECT KeywordID, COUNT(*) AS total, ListSize*100/COUNT(*) AS match
    FROM ancillary WHERE Word IN ('Schroedinger','cat','is','black','and','angry')
    GROUP BY KeywordID; 
```

将`WHERE`返回，比如说，这些行：

```
(1234, 'black') -- from 'black cat'
(1234, 'cat')   -- from 'black cat'
(1423, 'angry') -- from 'angry birds'
(1701, 'cat')   -- from 'black angry cat'
(1701, 'angry') -- from 'black angry cat'
(1701, 'black') -- from 'black angry cat'
(1999, 'cat')   -- from 'nice white cat' 
```

所以 GROUP 将返回`KeywordID`这些行的基数：

```
1423   1   50%
1701   3  100%
1234   2  100%
1999   1   33% 
```

现在可以按匹配率降序排序，然后按列表大小降序排序（因为匹配 100% 的 3 个单词优于匹配 100% 的 2，匹配 1 in 2 优于匹配 2 in 3）：

```
1701   3  100% -- our best match
1234   2  100% -- second runner
1423   1   50%
1999   1   33% 
```

您还可以在一个查询中检索您的第一个表，并增加匹配率：

```
SELECT mytable.*, total, match FROM
mytable JOIN (
SELECT KeywordID, COUNT(*) AS total, ListSize*100/COUNT(*) AS match
    FROM ancillary WHERE Word IN ('Schroedinger','cat','is','black','and','angry')
    GROUP BY KeywordID
) AS ancil ON (mytable.KeywordID = ancil.KeywordID)
ORDER BY match DESC, total DESC; 
```

最大的成本是必须在`Word`列上索引的“辅助”中的精确匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:12:53.713

你可能想看看全文搜索引擎，比如狮身人面像：[http ://sphinxsearch.com/](http://sphinxsearch.com/)

或者，另一种方式 - 制作存储过程，将搜索字符串拆分为关键字，使用指定的分隔符并在 DB 列中查找每个关键字的 charindex（取决于您的数据库管理系统）

# jquery - 在 jQuery Mobile 中如何删除弹出对话框中的关闭图标

> ID：13085771
> 
> 赞同：3
> 
> 时间：2012-10-26T11:06:31.293
> 
> 标签：jquery, css, jquery-mobile

有谁知道如何删除弹出对话框中的关闭图标。

[http://jquerymobile.com/test/docs/pages/dialog/index.html#&ui-state=dialog](http://jquerymobile.com/test/docs/pages/dialog/index.html#&ui-state=dialog)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T22:01:01.667

查看对话框的结构后，很容易理解下面的 CSS 可以用来隐藏`Close`按钮。

```
.ui-header > .ui-btn { display: none; } 
```

请注意，这将隐藏所有`.ui-btn`in `ui-header`。如果不需要，您可以编写一个简单的脚本来确保我们只是`Close`单独隐藏按钮。

对于页面中的所有对话框：

```
$(function () {
    $('.ui-btn', '.ui-header').filter (function () {
        return $.trim($(this).find('span.ui-btn-text').text()) == 'Close'; 
    }).hide();
}); 
```

对于任何带有 ID 的特定对话框`pageId`：

```
$(function () {
    $('.ui-header .ui-btn', '#pageId').filter (function () {
        return $.trim($(this).find('span.ui-btn-text').text()) == 'Close'; 
    }).hide();
}); 
```

有关对话框结构的更多详细信息，请参见下文。

下面是`X`开头的（关闭图标）`div`，（查看完整结构）

```
<a href="#" class="ui-btn-left ui-btn ui-btn-up-d ui-shadow ui-btn-corner-all ui-btn-icon-notext" title="Close">
  <span class="ui-btn-inner ui-btn-corner-all">
     <span class="ui-btn-text">Close</span>
     <span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
   </span>
 </a> 
```

**完整结构**[清理数据属性以提高可读性]

```
<div role="dialog" class="ui-dialog-contain ui-corner-all ui-overlay-shadow">
  <div class="ui-corner-top ui-header ui-bar-d" role="banner">
    <a href="#" class="ui-btn-left ui-btn ui-btn-up-d ui-shadow ui-btn-corner-all ui-btn-icon-notext" title="Close">
        <span class="ui-btn-inner ui-btn-corner-all">
          <span class="ui-btn-text">Close</span>
          <span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
        </span>
     </a>
     <h1 class="ui-title" role="heading" aria-level="1">Dialog</h1>
  </div>
  <div class="ui-corner-bottom ui-content ui-body-c" role="main">
    Dialog content
    <a href="#" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-b">
      <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">Sounds good</span>
      </span>
    </a>       
    <a href="#" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c">
       <span class="ui-btn-inner ui-btn-corner-all">
         <span class="ui-btn-text">Cancel</span>
       </span>
     </a>    
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:32:32.777

HTML如下。

```
<a href="#" class="ui-btn-left ui-btn ui-btn-up-d ui-shadow ui-btn-corner-all ui-btn-icon-notext" title="Close">
  <span class="ui-btn-inner ui-btn-corner-all">
     <span class="ui-btn-text">Close</span>
     <span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
  </span>
</a> 
```

而你所要做的就是

```
$(".ui-btn[title='close']").remove(); 
```

或者

```
$(".ui-btn[title='close']").hide(); 
```

或者

```
$(".ui-btn[title='close']").css('display', 'none'); 
```

或者

```
$(".ui-btn[title='close']").attr("hidden", "hidden"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:18:35.643

加载对话框后调用以下命令：

```
$(".ui-dialog a[data-icon='delete']").remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T14:14:13.777

只是不要`<h1>`在页面上包含标题或 div`data-role="header"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T06:57:45.420

HTML 代码：

```
 <div data-role="dialog" id="pageId">
    <div data-role="header" data-theme="c" class="ui-header">
      <h2>your Heading</h2>
    </div>
    <div data-role="content">
        <p>Your Message.</p>
     </div>
 </div> 
```

代码：

```
 #pageId div .ui-header a { display:none;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T11:51:42.030

HTML 代码：

```
 <div data-role="dialog" id="pageId">
    <div data-role="header" data-theme="c" class="ui-header">
      <h2>your Heading</h2>
    </div>
    <div data-role="content">
        <p>Your Message.</p>
     </div>
 </div> 
```

代码：

```
 #pageId div .ui-header a { display:none;} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T07:55:33.100

从您的评论中，我认为您想要这样的东西：

```
var dialog = ...
$("a[data-icon='delete']", dialog).css("display", "none"); // Hide it
// or
$("a[data-icon='delete']", dialog).remove(); // Remove it 
```

`remove()`-ing 可能会导致希望图标位于 DOM 中的那个位置的模块出现问题。所以我建议隐藏变体。

如果我猜错了并且您想从所有对话框中删除所有 X，请使用 Curt 的选择器，尽管我仍然建议只隐藏它们。（真的不疼）

（对不起，Curt，我知道这与您的答案很接近，但是对于明智的评论来说太长了。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T08:00:27.443

如果您不需要关闭按钮，请使用弹出对话框 [http://jquerymobile.com/test/docs/pages/popup/index.html#&ui-state=dialog](http://jquerymobile.com/test/docs/pages/popup/index.html#&ui-state=dialog)

# objective-c - 动态表格视图单元格创建

> ID：13085775
> 
> 赞同：0
> 
> 时间：2012-10-26T11:06:40.633
> 
> 标签：objective-c, ios, uitableview

我必须制作一个包含不同单元格的表格视图。我有三个偏好，表格取决于它们。可能有 6 种不同的表格视图 - 1 个单元格、1 个单元格和 3 个单元格、无单元格、2 个单元格和 3 个单元格等等，这取决于偏好

这是最好的方法吗？

也许有人知道很好的例子，或者这方面的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:15:41.993

你可以只做一个`UITableView`有不同部分的。

根据您的部分 id，您可能会返回不同的单元格

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

`indexPath`包含`row`&`section`值。

此外，您可能会在一个部分中返回不同数量的行：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:44:38.793

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
//pass value to numper of cells;
return 4 (or) 2;
}

//use this to add cell 
[tableview reloadData]; 
```

# database-design - 一个相当复杂的音乐品味共享网络应用程序的数据库设计和 ERD

> ID：13085776
> 
> 赞同：1
> 
> 时间：2012-10-26T11:06:43.107
> 
> 标签：database-design, erd

我正在尝试为音乐品味共享 Web 应用程序设计一个数据库。

我几乎从来不需要做 Db 设计/架构，并认为我会从 SO 用户那里得到一些帮助，希望我的问题可以成为“好的”Db 设计实践的一个很好的例子。

仅供参考：ERD 是使用免费软件***MySQL Workbench绘制的。***

***这些是我的要求以及我如何在 Db 模式中表示它们***

*   用户拥有凭据和帐户/个人资料（电子邮件、fName、lName 等）——所有这些都在`USER_DETAILS`表格之下

*   用户可以拥有角色 & & 多个用户可以拥有相同的角色 - 因此&表之间*的多对多*关系`USER_DETAILS``ROLE`

*   用户可以拥有图像 - 因此&表之间*的一对多*关系`USER_DETAILS``USER_IMAGE`

*   用户可以拥有许多徽章，并且多个用户可以拥有相同的徽章 - 因此&表之间*的多对多*关系`USER_DETAILS``BADGE`

*   用户的轨迹可以有许多声誉历史，而声誉历史只匹配一个特定用户的轨迹 - 因此&表之间*的一对多*关系`USER_DETAILS_TRACK``REPUTATION_HISTORY`

*   用户可以有许多轨道，多个用户可以有相同的轨道 - 因此&表之间*的多对多*关系`USER_DETAILS``TRACK`

*   用户可以有每个轨道的标签和多个用户可以有相同的标签每个轨道 - 因此&表之间*的多对多*关系`USER_DETAILS_TRACK``TAG_2`

*   轨道在 has`TRACK`表下表示

*   轨道可以有几个艺术家，一个艺术家可以在多个轨道中 - 因此&表之间*的多对多*关系`TRACK``ARTIST`

*   轨道可以有多个版本，一个版本可以（通常）有多个轨道 - 因此&表之间*的多对多*关系`TRACK``RELEASE`

*   release 有一个 release_type 并且 release_type 可以在许多版本中 - 因此&表之间*的一对多*关系（发布类型可以是专辑、EP、LP、单曲等）`RELEASE_TYPE``RELEASE`

*   track 可以有评论 - 因此&表之间*的一对多*关系`TRACK``COMMENT`

*   曲目可以有多个标签，并且艺术家可以在多个曲目中 - 因此&表之间*的多对多*关系`TRACK``TAG_1`

您一定已经注意到我复制了 TAG 表有 TAG_1 和 TAG_2。理想情况下，我只有一个，但我担心这会在`USER_DETAILS_TRACK`&`TRACK`表之间产生过于强烈的耦合，因为这些表已经与*多对一*关系相关联。

我计划在中间层保持 TAG_1 和 TAG_2 同步。

![初始 ERD 图](../Images/cd936060845cb1935dca172c1663557e.png)

* * *

podiluska 发表评论后的最新编辑

![最新的 ERD 图](../Images/1425f9bf00e27b4c6e2556db04128f6b.png)

1.  关于我的数据库设计，我是否走在正确的道路上？
2.  你会修改/改进什么？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:43:50.437

除了评论中所做的调整外，我认为现在或多或少存在。

您需要从 Release 中删除 Track_ID 并将其替换为轨道中的 Release_ID，或者拥有一个 TrackRelease 表 - 取决于轨道是否可以在多个版本上，反之亦然。

# xml - 仅提取 xml 的值删除 xml 标记

> ID：13085781
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:03.067
> 
> 标签：xml, perl, xml-parsing, extract

例如，我有一个 xml 文件，

```
<title> hello <name> hi </name> <street> id </street> this is xml file </title> 
```

这里的父节点是`title`。我将提取父节点内的文本，删除内部标签。

我已经尝试过使用正则表达式。但是除了使用正则表达式之外，还有什么方法可以使用一些基于 xml 的函数来删除标签。注意：标签名称事先不知道。

嗨，我试过了，我使用了相同的 xml

```
use XML::Simple; 
use Data::Dumper; 

my $simple = XML::Simple->new(); 
my $data = $simple->XMLin('XMLRemoval.xml'); 
my %oldHash = %$data; my %newHash = (); 

while ( my ($key, $innerRef) = each %oldHash ) 
{ 
    $newHash{$key} = @$innerRef[1]; 
} 

foreach $key ( keys %newHash ) 
{ 
    print $newHash{$key}; 
} 
```

我得到了错误：不能使用字符串（“id”）作为数组引用，而“严格引用”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:37:24.273

```
use strict;
use warnings;

use features qw/say/;
use Mojo::DOM;

my $dom = Mojo::DOM->new('<title> hello <name> hi </name> <street> id </street> this is xml file </title>');

say $dom->all_text;
# hello hi id this is xml file

say $dom->at('title')->all_text;
# hello 
```

你明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:31:45.720

根据你的要求，你可以试试这个。我在示例中使用了您提供的文件。

我们在这里定义 XML 中的根密钥内容（或重命名），您需要选择一个不在您的 XML 中的密钥（我选择了根内容）。

```
#!/usr/bin/perl
use strict;
use XML::Simple;
use Data::Dumper;
my $key;
my $simple = XML::Simple->new();
my $data = $simple->XMLin('XMLRemoval.xml', 'ContentKey' => 'root-contents');
print Dumper $data;
my $val = $data->{'root-contents'};
if(ref($val) =~ /Array/i)
{
    foreach (@$val)
    {
        print "$_\n";
    }
}
else
{
    print "$val\n";
} 
```

请阅读 XML::Simple 文档，有很多选项可以根据您的要求进行调整。

我会将调试部分留给您，让您的代码检查错误是什么以及如何解决它（这本身就是解释性的）:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:16:44.403

您可以使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)：

```
open file.xml ;
echo (/title) ;       # hello  hi   id  this is xml file
echo /title/text() ;  # hello     this is xml file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:36:21.583

最残忍的方式是：

```
use strict;
use warnings;

use feature 'say';

my $text = '<title> hello <name> hi </name> <street> id </street> this is xml file </title>' ;

$text =~ s|<.+?>||g;
say "Text |$text|"; 
```

但是，您可能知道，[**用 regex 解析 html**](https://stackoverflow.com/a/1732454/459233)[是**不行**的](https://stackoverflow.com/a/1732454/459233)**。**

# java - 使用spring specurity动态创建角色

> ID：13085782
> 
> 赞同：0
> 
> 时间：2012-10-26T11:07:06.830
> 
> 标签：java, spring-security, acl

我正在开发一个内容管理类型的 web 应用程序，它使用 spring security（版本 3.0.5）进行身份验证和标准 RBAC 来粗略地定义用户组。

该应用程序的功能之一是使具有某些角色（例如管理员）的用户能够配置个人用户（或个人用户组）访问特定内容项的权限，并控制他们可以执行的操作该内容（例如，读/写/删除，还包括导出、打印、共享、授予权限等）。这些管理员用户也将定义封装常用权限集的角色。所以看来我需要访问控制列表。

但是阅读 Spring ACL 文档，我有点不清楚最终用户在运行时对角色/用户的这种动态定义是否受支持；在我看来，Spring ACL 的主要“开箱即用”用例使用在应用程序本身中声明的静态定义。

如果可能的话，我想使用 Spring ACL - 看起来最有吸引力的好处是 a) 高性能的位掩码操作，b) 在我们的业务代码之外包装代理时保持权限查找，c) 标准技术；但是，如果为了适应我们的用例需要重新实现大多数 Spring 安全接口，那么我们可能只是自己动手。

所以我想问一下是否有人在这种用例中成功使用过Spring ACL？由于用户更改角色和权限，是否建议或不鼓励在运行时以编程方式动态修改 Spring ACL 表？

谢谢

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:42:17.040

用这个 ：-

```
<intercept-url pattern="/admin*" **access="hasRole('SYS_ADMIN')"** /> 
```

# string - SSIS 拆分字符串

> ID：13085783
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:08.683
> 
> 标签：string, parsing, ssis, etl

我有一个包含许多列的数据集（日志文件）；其中之一是`Other-Data`（见下文），它是一个无序字符串，需要对其进行解析以根据`u`值（U1、U2、U3 等）创建新列

```
OTHER-DATA
u1=EUR;u2=sss:Checkout-Step4:Orderacknowledgement;u3=DE:de:hom;u11=1;u12=302338533;u13=SVE1511C5E;u14=575.67 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:49:04.793

一种方法是添加脚本转换组件，使用 OTHER-DATA 作为输入行，使用 C# 或 VB.Net 对其进行解析，然后以同步模式将其输出到预定义的输出中。这仅在您可以提前准备输出 U1 到 Un 时才有效。此处解释了非常相似的问题：http: [//www.codeproject.com/Articles/193855/An-indespensible-SSIS-transformation-component-Scr](http://www.codeproject.com/Articles/193855/An-indespensible-SSIS-transformation-component-Scr)

# amazon-s3 - 在 Auto Scaling Policy 发出的实例终止期间无法备份日志文件

> ID：13085784
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:16.537
> 
> 标签：amazon-s3, amazon-web-services

我有启用了自动缩放的 EC2 实例。
现在，作为在某个实例发出终止时缩减策略的一部分，该实例上剩余的日志文件需要在 s3 上备份，但我没有找到任何方法来执行该实例的日志文件的 s3 日志记录。我尝试将所需的脚本以最高优先级放在`rc0.d`目录中。`chkconfig`我也尝试将我的脚本放入`/lib/systemd/system/halt.service`（或`reboot.service`或`poweroff.service`）中，但直到现在还没有运气。

我在堆栈溢出和 AWS 论坛上找到了一些与此相关的线程，但到目前为止还没有找到合适的解决方案。

任何人都可以让我知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:49:11.290

我发现实现此行为的唯一可靠方法是在将日志文件写入 syslog 子系统后立即使用 rsyslog/syslog 将它们传输到中央主机。

这意味着您将需要运行另一个实例来接收日志文件并将它们发送到 S3，或者使用基于 SQS 的系统，例如 logstash。

不幸的是，没有其他方法可以确保您的所有日志消息都存储在 S3 上 - 您不能保证您的脚本会在自动缩放“拔掉插头”之前完成。

# jquery - 拖放到连接的可排序对象后，可拖动对象会丢失其所有 jQuery 数据

> ID：13085789
> 
> 赞同：0
> 
> 时间：2012-10-26T11:07:25.177
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-sortable

jQuery draggable 在加入连接的可排序列表后丢失了所有连接的 jQuery 数据。此外，拖放对象的引用与加入可排序列表的对象不同。需要解释和解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:39:54.807

它已经被记录为 jQeuryUI 本身的一个错误；.;

在连接的可排序中接收到的可拖动确实是一个全新的不同克隆，而不是原始的可拖动本身。..

好朋友！一个很好的解决方法解决了我的问题..在这个页面上很好地解释了..

[jQuery UI Draggable/Sortable - 获取对新项目的引用](https://stackoverflow.com/questions/4973339/jquery-ui-draggable-sortable-get-reference-to-new-item)

# awk - awk 在 bash 脚本中不起作用

> ID：13085790
> 
> 赞同：0
> 
> 时间：2012-10-26T11:07:27.513
> 
> 标签：awk

我正面临一个令人困惑的（至少对我而言）问题。我正在尝试读取一些 csv 文件，然后提取一些值以进行一些检查和计算。我正在使用 awk 访问文件并提取必填字段。

奇怪的是，awk 语句在 bash 提示符下正确运行，但在脚本中运行时却不起作用。作为一个例子，我从 bash 提示符中得到：

```
paco@NIMBUS:~/work$ awk -F\; '$1 == "21-08-2012" && $2 == "'17'" { print $3 }' niveles-rams.csv
2 
```

但

```
nrams1=`awk -F\; '$1 == "'$fecha'" && $2 == "'$area'" { print $3 }' niveles-rams.csv`
echo $nrams1 
```

不返回任何值。CSV 文件来自 Windows 中的 Excel，所以我猜可能编码有问题？

您可以在以下 URL 中找到脚本 validacio.bash 和 csv 文件

*   [niveles-rams.csv](http://ubuntuone.com/5b0vTvZ82B5a9GfqaplxbT)
*   [pobles.csv](http://ubuntuone.com/3B94FmzzgKS7DdM4l4acBr)
*   [umbrales.csv](http://ubuntuone.com/02FVmuWK2jc8bqNwCxc1XE)

*   [验证码.bash](http://ubuntuone.com/3RuSyLSQGa4svsqEbzaaow)

感谢您的帮助和耐心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:28:12.133

在您的情况下将是：

```
nrams1=`awk -F";" -v fecha=$fecha -v area=$area '$1 == fecha && $2 == area { print $3 }' niveles-rams.csv` 
```

正如**Kailash K Pawar**提到的正确方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:20:32.020

在日期字段的文件（niveles-rams.csv）中，您使用 /（斜杠）符号，但在 bash 脚本中 -（减号）符号。也许这就是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:45:30.933

感谢大家回答和评论这个问题。我脚本中的问题是 awk 问题，但不是我问的问题。我的错误是我没有正确阅读“面积”变量：

```
i=1
while [ $i -lt 32 ]     
   do
     let i=$i+1
     area=`awk 'BEGIN { FS=";" ; FNR="1" } FNR == "'$i'" {print $1}' pobles.csv` 
```

文件*pobles.csv*没有标题，并且脚本未正确读取第一条记录。然后错误是级联的，所以最终结果是错误的。现在，添加一个标题并开始从 i=2 （第二条记录）读取它可以工作。

当然，必须有一个更聪明的解决方案，但我是 awk 的新手，不明白这一点。希望我能学到更多 awk 并做到这一点。

你所有的答案对我都非常有用，让我学到了一些关于 awk 的知识。

谢谢

# java - 可以通过java检查网站是否在浏览器中打开

> ID：13085791
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:27.800
> 
> 标签：java, jsp, jakarta-ee, servlets

是否可以通过 Java 程序检查网站是否已在默认浏览器中打开？在做其他事情之前，我需要我的程序打开一个特定的网站。那么是否可以检查该网站是否已经打开？

编辑：好的，我会尝试进一步解释情况。所以我想从网页（http://aula.au.dk/main/document/document.php?cidReq=IMFFOUANAE12）下载一些文件。当您单击一个文件时，您将被重定向到一些可以下载它的文件目标。我的程序列出了所有这些文件，然后当您单击文件名时，浏览器会打开 URL，该 URL 会将您重定向到该特定文件的下载。我的问题是，如果我上面链接的 url 没有打开，我会从网站收到 SQL 错误。显然，此错误仅在选项卡中未打开上述 url 时显示。因此，如果我下载文件，关闭浏览器，尝试下载新文件，我就会遇到问题。但如下所示，似乎 cookie 可以帮助我。

我不喜欢所有这些http，网站有点东西。

问候杰斯珀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:22:05.373

我不确定是否可以，您可以使用桌面类打开默认浏览器。或者你可以做

```
Runtime rt = Runtime.getRuntime();
rt.exec(new String[]{"C:\\Program Files\\Mozilla Firefox\\firefox.exe", "-new-window", "example.com"}); 
```

即使您的页面已经打开，您为什么还要担心？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:16:36.843

不，不可能做你所要求的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:24:17.233

是的，但即使您尝试打开同一页面浏览器也会保留旧页面的会话。它将使用 jsessionid 进行跟踪。

请使用您可以执行的 cookie 检查链接

[http://www.mkyong.com/servlet/a-simple-cookie-example-in-servlet/](http://www.mkyong.com/servlet/a-simple-cookie-example-in-servlet/)

[http://www.tutorialspoint.com/servlets/servlets-session-tracking.htm](http://www.tutorialspoint.com/servlets/servlets-session-tracking.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:16:14.020

这不可能纯粹是因为Java无法知道浏览器是否打开以及正在使用哪些浏览器。如果要实现这样的功能，它实际上需要本地挂钩到每个浏览器的 api。虽然可以做的事情只支持您选择的浏览器（Firefox、Chrome、IE、Safari、Opera）等，但它需要直接与本机 C 库交互，这超出了此范围，而且肯定是矫枉过正对于这样一个微不足道的功能。

# replace - openxml批量查找和替换模板dotx中的单词

> ID：13085797
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:54.180
> 
> 标签：replace, openxml

我正在尝试使用 openXML 替换 word 模板中的“”

```
 foreach (XmlNode node in doc.SelectNodes("/descendant::w:t", nsManager))
            {
                MessageBox.Show(node.InnerText);
            } 
```

以上不起作用，我正在分解部分文本，例如“<”和“sometag”，然后是“>”。

我要替换全文

```
 "<sometag>" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:02:15.830

该博客讨论了搜索替换功能。[链接](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2011/05/12/148357.aspx) 您可以理解该算法或只是获取示例代码并使用它。您需要安装[Open Xml SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)才能使用示例代码。

# android - 无法在android的列表视图中单击项目

> ID：13085798
> 
> 赞同：1
> 
> 时间：2012-10-26T11:07:56.177
> 
> 标签：android, list, onitemclicklistener

我无法在 android 的列表中单击项目，这是我的代码：

```
list=(ListView) findViewById(R.id.list);
        list.setOnItemClickListener(this);

        TaskListAdapter obj = new TaskListAdapter(this.getApplicationContext()
                ,R.layout.row, tl);
        list.setAdapter(obj);
        //list.setItemsCanFocus(true);
        list.setClickable(true); 
```

这是列表适配器

```
LayoutInflater loi = LayoutInflater.from(con);          
        View v = loi.inflate(rid, parent, false);   
        TextView tv1 = (TextView) v.findViewById(R.id.txt1);
        TextView tv2 = (TextView) v.findViewById(R.id.txt2);
        //iv.setBackgroundResource(arrow);
        v.setClickable(true);
        v.setFocusable(true);
        final int pos = position;

        tv1.setText(objs.get(position).GuestName);
        tv2.setText(objs.get(position).TaskID);

        return v; 
```

这是我的点击项处理程序

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
//      Intent in = new Intent();
//      in.putExtra("GuestID", tl.get(arg2).GuestID);
//      in.putExtra("ReservationID", tl.get(arg2).ReservationID);
//      in.putExtra("CustomerID", custId);
//      in.putExtra("Token", token);
        getGuestDetails(tl.get(arg2).GuestID, tl.get(arg2).ReservationID);

    } 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#f1eff0">

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:stretchColumns="1" android:gravity="center_vertical"
        android:background="@drawable/toptab" android:id="@+id/tb1">

        <TableRow>

            <Button android:id="@+id/btnback" android:background="@color/hover_bckbtn"
                android:text="Back" android:textColor="#ffffff" android:textSize="14sp"
                android:textStyle="normal" android:typeface="normal"
                android:layout_marginLeft="5dp" />

            <TextView android:id="@+id/tvnormalcallreg" android:text="List View"
                android:textColor="#ffffff" android:textSize="18sp"
                android:layout_gravity="center" android:textStyle="normal"
                android:typeface="normal" />

            <Button android:id="@+id/btnregister" android:textColor="#ffffff"
                android:background="@color/hover_button" android:text="Register"
                android:textSize="14sp" android:textStyle="normal" android:typeface="normal"
                android:layout_marginRight="5dp" />
        </TableRow>
    </TableLayout>

    <ListView android:id="@+id/list" 
    android:scrollbars="none"
        android:layout_below="@+id/tb1"  
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp" 
        android:layout_width="fill_parent" 
        android:cacheColorHint="#00000000"
        android:fadingEdge="none"
        android:layout_marginBottom="50dp"/>

    <TableLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_alignParentBottom="true"
        android:id="@+id/bottom">

        <TableRow android:background="@drawable/toptab"
            android:gravity="center">

            <ImageView android:layout_width="wrap_content"
                android:layout_height="wrap_content" android:background="@drawable/logobottom" />
        </TableRow>

    </TableLayout>

</RelativeLayout> 
```

请帮助我，我是android的新手？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:45:32.303

问题解决了

我注释掉了这些行

```
v.setClickable(true);
v.setFocusable(true); 
```

我的代码有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:10:44.567

你真的有一个点击监听器吗？我可以看到您将点击侦听器设置为*this*，但您尚未添加显示点击侦听器实现的代码。

# android - android中带有切换按钮的列表视图

> ID：13085810
> 
> 赞同：1
> 
> 时间：2012-10-26T11:08:42.867
> 
> 标签：android, list, listview, togglebutton

在我的应用程序中，我有带有切换按钮和 textview 的列表视图。在这里我将在列表上执行两个操作。

1）单击切换按钮。2）单击列表视图项。两者都工作得很好，但是当我单击切换按钮时，我根据开、关条件执行了操作。但条件不能正常工作。每次它都会显示关闭条件。以下代码如下

```
public View getView(final int position, View convertView,
            ViewGroup parent) {
        View v = null;
        TextView arryText;

        SharedPreferences sh = MainActivity.this.getSharedPreferences(
                "onOrOff", MODE_WORLD_READABLE);

        Boolean[] onOff = new Boolean[] { sh.getBoolean("SUNDAY", false),
                sh.getBoolean("MONDAY", false),
                sh.getBoolean("TUESDAY", false),
                sh.getBoolean("WEDNESDAY", true),
                sh.getBoolean("THURSDAY", false),
                sh.getBoolean("FRIDAY", true),
                sh.getBoolean("SATURDAY", false) };

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.inflate, null);

            arryText = (TextView) v.findViewById(R.id.inflateText);
            togg = (ToggleButton) v.findViewById(R.id.toggleButton1);

            togg.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    if (togg.isChecked()) {

                        Toast.makeText(MainActivity.this, "ison",
                                Toast.LENGTH_SHORT).show();

                    } else {
                        Toast.makeText(MainActivity.this, "isoff",
                                Toast.LENGTH_SHORT).show();
                    }
                }
            });

            arryText.setText(days[position]);

        }

        return v;

    } 
```

每次我“关闭”时，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:14:11.047

所有复合按钮（特别是 ToggleButton）都有它的监听器 OnCheckedChangedListener，尝试使用 togg.setOnCheckedChangedListener() 方法覆盖它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:22:58.717

切换按钮的侦听器错误。在 xml 中这样提及：

android:textOff="@string/no" android:textOn="@string/yes"

对于切换按钮和 java 代码，如下所示：

toggleButton.getText().toString();

这是工作代码！！！:)

# c# - 再次 .NET TcpClient 和线程

> ID：13085811
> 
> 赞同：0
> 
> 时间：2012-10-26T11:08:43.977
> 
> 标签：c#, multithreading, tcpclient

我在 stackoverflow 上阅读了很多关于 TcpClient 和多线程的内容，但我认为我没有找到明确的答案。

我有一个具有 3 个相同线程的应用程序。（在每个线程对象上调用相同的方法）

每个线程都创建自己的（本地）TcpClient 实例并打开到其服务器的 tcp 连接（不同的 IP 地址）。

线程应该只在不同的服务器上做同样的事情。3 台服务器机器运行相同的服务器软件。

现在 3 个线程“同时”启动服务器请求。

TcpClient 对象是否在每个线程上完全隔离？或者可能是底层流被不情愿地共享？

我感觉有时一个线程会获取不是来自“他的”服务器的数据。例如，所有线程都在轮询“就绪”标志。只有服务器 1 准备好并设置了标志，但线程 1 和线程 2 看到了设置的标志。

很有可能我做错了。但是肯定知道以这种方式在 TcpClient 对象上进行通信是安全的会有所帮助。

非常感谢您的任何建议，拉尔夫

PS：是的，我目前正在阅读有关 C# 8 中的多线程的书籍和文档-))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:18:26.687

如果`TcpClient`实例是独立的，那么它们将不会共享任何状态 - 您可以根据`TcpClient`需要使用任意数量的实例。如果数据在线程之间流失，我只能假设它在您自己的代码中。在这里混淆的一个常见原因是捕获的变量（来自 lambda / anon-method 的任何东西），在 C# 5 之前，这些变量可以以不经意的审阅者可能无法预料的方式共享。没有更多信息，我们不能说更多，但不：它们不应该相互干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:03:55.750

服务器将响应发回的端口可能有问题。Afaik 源端口是根据向服务器发送请求的程序自动确定的。也许每个威胁之间的端口确定没有区别，所以三个同时运行的威胁在同一个端口上收到了一个答案......但这只是我的猜测我不太喜欢 TCP 的东西

# ruby-on-rails - 在 Ruby on Rails 中创建链接

> ID：13085815
> 
> 赞同：1
> 
> 时间：2012-10-26T11:09:12.167
> 
> 标签：ruby-on-rails

我真的是 Ruby on Rails 的新手......我正在尝试链接到我项目中的另一个页面，其中列出了属于 escuela 的帖子。

这就是我所做的：

在 posts_controller.rb 我写道：

```
def postesc
    @posts = Post.where(:escuela_id => params[:id])
    respond_to do |format|
      format.html # postesc.html.erb
      format.json { render json: @posts }
    end
  end 
```

在 config/routes.rb 我写道：

```
match 'postesc' => 'posts#postesc' 
```

在 view/escuelas/listaesc.html.erb 我写了链接：

```
<%= link_to "Escuelas", :controller => "posts", :action => "postesc" %> 
```

在 view/escuelas/postesc.html.erb 我想列出匹配的帖子。但是这个页面看起来只是空白，只有布局。

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:21:32.043

先把 post 和 escuela 关联起来，然后通过

```
Escuela.find(params[:id]).posts 
```

将您的路线更改为 -

```
resources :posts do
  get 'postesc', :on => :collection
end 
```

看法 ：

```
<%= link_to "List posts", postesc_posts_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:20:17.650

您缺少为要选择的 Escuela 添加一个 ID - 正如您在 Controller#postesc 操作中所做的那样（如文字：其中：escuela_id => params[:id]）。

```
<%= link_to "Escuela", :controller => "posts", :action => "postesc", :id => 1 %> 
```

但是您可以使用以下语法使用对象链接方法（通过稍微更改路线）：

```
# in routes.rb
match 'postesc' => 'posts#postesc', on: :collection, as: 'esc_index'

# in your view
<%- for escuela in @escuelas do %>
  <%= link_to "Escuela", esc_index(escueal) %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:17:46.673

将 routes.rb 更改为

得到'postesc' =>'posts#postesc'

试试...<%= link_to "Escuelas", postesc_path %>

或者

```
 <%= link_to "Escuelas", { :controller => "posts", :action => "postesc" } %> 
```

# node.js - 在 MongooseJS 3.3.1 中按升序和降序排序

> ID：13085824
> 
> 赞同：0
> 
> 时间：2012-10-26T11:09:53.493
> 
> 标签：node.js, mongodb, mongoose

我在 NodeJS 和 MongooseJS ODM 中有基于 REST 的 API。**获取***部门*列表的URL 是http : ***//localhost:25718/Department?SortBy=Name&SortType=asc*** (desc-for descending)。排序代码是

```
 var Query = Department.find();
 if(req.query.SortBy) {
        Query.sort(req.query.SortBy, 1);
        if(req.query.SortType) {
            if(req.query.SortType.toLowerCase() == 'desc') {
                Query.sort(req.query.SortBy, -1);
            }
        }
    } 
```

此剂量不适用于 MongooseJS 3.3.1。**Query.sort(req.query.SortBy)**以升序排序。但不会以任何方式降序。请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:03:22.910

我无法重现您遇到的问题。我想说发布有关您正在查询的集合的信息以及您对它的索引。

我确实重写了您的代码以更易于阅读：

```
var Query = Department.find(),
    sortBy = req.query.SortBy,
    sortType = (req.query.SortType || 'asc').toLowerCase();

if (sortBy && sortType === 'asc') {
    Query.sort(sortBy, 1);  
} else if (sortBy && sortType === 'desc') {
    Query.sort(sortBy, -1);
} 
```

* * *

**更新 (2012-10-30)**

我刚刚意识到排序函数的语法不正确。请查看更正后的代码。

```
var Query = Department.find(),
    sortBy = req.query.SortBy,
    sortType = (req.query.SortType || 'asc').toLowerCase();

if (sortBy && sortType === 'asc') {
    Query.sort(sortBy); // firstname
} else if (sortBy && sortType === 'desc') {
    Query.sort('-'+sortBy); // -firstname
} 
```

有关排序参数语法，请参阅[http://mongoosejs.com/docs/api.html#query_Query-sort](http://mongoosejs.com/docs/api.html#query_Query-sort)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:15:46.720

文档在这里解释：http: [//mongoosejs.com/docs/api.html#query_Query-sort](http://mongoosejs.com/docs/api.html#query_Query-sort)

# python - Python 请求模块 JSON 格式

> ID：13085829
> 
> 赞同：5
> 
> 时间：2012-10-26T11:10:09.967
> 
> 标签：python, json, encoding, python-requests

我有一个为 REST 设置了美味派的 Django 应用程序。

我希望能够使用 REST API 更新数据库。

我可以在命令行上发出 curl 命令来实现我想要的，（根据 sweetpie 文档）。

```
curl --dump-header - -H "Content-Type: application/json" -X PATCH --data '{"comments": "comment1"}' http://127.0.0.1:8000/api/seq/loadedwith/12092/

HTTP/1.0 202 ACCEPTED
Date: Fri, 26 Oct 2012 11:06:58 GMT
Server: WSGIServer/0.1 Python/2.6.6
Content-Type: text/html; charset=utf-8 
```

所以现在我正在尝试使用请求模块来实现同样的目标。从 python 请求模块获取请求工作，但我无法让补丁或帖子工作。

```
url='http://127.0.0.1:8000/api/seq/loadedwith/12092/'
headers={'content-type': 'application/json'}
payload={"comments":"comment2"}
requests.patch(url=url, params=json.dumps(payload),  headers=headers) 
```

我得到错误：

```
 File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/requests-0.14.1-py2.7.egg/requests/api.py", line 120, in patch
      return request('patch', url,  data=data, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests-0.14.1-py2.7.egg/requests/safe_mode.py", line 39, in wrapped
      return function(method, url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests-0.14.1-py2.7.egg/requests/api.py", line 51, in request
      return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/requests-0.14.1-py2.7.egg/requests/sessions.py", line 182, in request
    params=from_key_val_list(params),
  File "/usr/local/lib/python2.7/dist-packages/requests-0.14.1-py2.7.egg/requests/utils.py", line 135, in from_key_val_list
    raise ValueError('cannot encode objects that are not 2-tuples')
ValueError: cannot encode objects that are not 2-tuples 
```

当我添加 json.dumps(payload) 时，这似乎即将到来 - 我尝试只传递字典，但在这种情况下，有效负载被添加到查询字符串中，并且美味派抱怨。我曾尝试将字典格式化为 tuple ，但我不确定它到底期望什么。

有人可以帮忙吗（或者我在看代码中的错误位置）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T11:24:16.690

`params`应该始终是 dict 或 2 值元组序列，然后为您编码。但是，您想要上传已编码的正文，因此您需要`data`关键字：

```
requests.patch(url, data=json.dumps(payload), headers=headers) 
```

事实上，`data`是第二个参数，所以你甚至可以这样做：

```
requests.patch(url, json.dumps(payload), headers=headers) 
```

因为您通常只使用 PATCH 发送不透明数据。`.post()`和方法的`.put()`行为方式相同，第二个参数是`data`关键字。

# igraph - Nexus 中网络的推荐属性和大小写

> ID：13085831
> 
> 赞同：0
> 
> 时间：2012-10-26T11:10:11.167
> 
> 标签：igraph, complex-networks

我很高兴，igraph 0.6 有可能从 Nexus 存储库轻松获取网络数据。我已经存储了几个网络，我想让它们尽可能符合 nexus-conform。

[关于存储在Nexus 存储库](http://nexus.igraph.org/)中的网络属性，我有两个问题。

图表有推荐的属性吗？我找到了几个属性：姓名、作者、引文、描述（在纽曼网络中）、URL

是否有针对特殊（例如推荐）属性使用大写属性的政策？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:27:23.620

是的，当前的政策是图表应该有属性`name`、和`Author`，如果可能的话。它可能还有其他人。由于目前所有数据集都是由 nexus 作者添加的，因此他们确保满足此政策。未来，希望会有所不同，人们只需上传他们的数据集，它们就会自动发布（经过快速检查）。`Citation``URL`

大写的经验法则是所有属性都应该大写，除非您希望 igraph 能够特别识别和处理您的属性。目前特别处理的属性是：（`name`图、顶点和边）、`type`（顶点）、`weight`（边）以及所有图形属性，如`shape`、`width`、`label`、`size`、`color`等。

# .net - Visual Studio 中的 $(MSBuildStartupDirectory) 指向不同机器上的不同位置

> ID：13085832
> 
> 赞同：1
> 
> 时间：2012-10-26T11:10:19.217
> 
> 标签：.net, visual-studio-2008, msbuild

在一个大型解决方案中，我将 Gendarme 集成到 Visual Studio 2008 编译过程中。我正在使用[GendarmeMsBuild](https://github.com/unintelligible/GendarmeMsBuild)任务和一个`.targets`文件来`AfterBuild`为解决方案中的每个项目添加一个目标。我正在寻找一种将这个文件导入`.csproj`文件的方法，这种方法不需要我更改包含路径（项目具有不同的嵌套级别）。除了使用 NuGet`SolutionDir`变量之外，解决此问题的最佳方法似乎是使用[`$(MSBuildStartupDirectory)`](http://msdn.microsoft.com/en-us/library/ms164309%28v=vs.90%29.aspx). 然而，事实证明，在某些机器上，使用相同版本的 VS 2008（安装了相同的更新，据我所知）这将解析为解决方案目录，而在其他机器上则解析为`c:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE`.

我怎么能

*   让它始终解析为解决方案文件夹
*   或以另一种一致的方式获取基本文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:57:42.000

`SolutionDir`不是 NuGet 独有的，NuGet 只是添加定义，以防直接构建项目文件。如果构建是从解决方案文件开始的，那么`SolutionDir`将由 MSBuild 定义。

# python - 视图内的 DJANGO 回调函数

> ID：13085840
> 
> 赞同：1
> 
> 时间：2012-10-26T11:10:44.567
> 
> 标签：python, django, callback, decorator

我需要的是在一个或多个视图中自动调用一个函数（回调函数），获取其结果并将其传递给模板。

这是一个简化的示例：

实用程序.py：

```
def getSContent():  
    return 'some dynamic data' 
```

视图.py：

```
def myFirstView(request):
    ...py code...

    sData = getSContent() <== this line
    return render_to_response('template.html',
                               {'sData': sData, <== this line 
                               ...
                               },
                               contenxt_instance = RequestContext(request))

def mySecondView(request):
    ...py code...

    sData = getSContent() <== this line
    return render_to_response('template.html',
                               {'sData': sData, <== this line 
                               ...
                               },
                               contenxt_instance = RequestContext(request)) 
```

..等等。

`sData = getSContent()`并`{'sData': sData}`在所有这些视图函数中重复。

*   这有什么捷径吗？
*   我可以以某种方式将此函数绑定到我的应用程序的特定视图，而不必一直指定它（标记的行）吗？
*   装修师傅能做这个吗？

请记住，我需要捕获函数的返回并将其进一步传递给模板。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:17:08.980

您可以为此使用[TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)设置

它是可调用对象（函数）的列表。每个函数都`request`作为参数接收，并应返回 a `dict`，在您的情况下 -`return {'sData': getSContent()}`

# linq - NHibernate Fetch / ThenFetch 用于加入的兄弟姐妹

> ID：13085849
> 
> 赞同：1
> 
> 时间：2012-10-26T11:11:10.527
> 
> 标签：linq, nhibernate, join, fetch

我有以下（简化的）实体层次结构：

```
RootClass
->DescriptorClass
->SomeChild->DescriptorClass
           ->SomeGrandChild 
```

如果可能的话，我想在一个查询中获取所有内容。

目前我有以下内容：

```
Session.Query<RootClass>().Where(/*some expressions here*/)
                    .Fetch(v => v.DescriptorClass)
                    .Fetch(v => v.SomeChild).ThenFetch(v => v.SomeGrandChild)
                    .Fetch(v => v.SomeChild).ThenFetch(v => v.DescriptorClass); 
```

它工作正常，但它在 SomeChild 上创建了一个带有两个连接的 SQL 查询。显然，我必须摆脱第二个 Fetch(v => v.SomeChild) 但我找不到如何去做。我试过了：

```
Session.Query<RootClass>().Where(/*some expressions here*/)
                    .Fetch(v => v.DescriptorClass)
                    .Fetch(v => v.SomeChild).ThenFetch(v => v.SomeGrandChild)
                    .ThenFetch(v => v.DescriptorClass); //<- wrong, tries to find DescriptorClass on SomeGranchild 
```

和

```
Session.Query<RootClass>().Where(/*some expressions here*/)
                    .Fetch(v => v.DescriptorClass)
                    .Fetch(v => v.SomeChild).ThenFetch(v => v.SomeGrandChild)
                    .Fetch(v => v.DescriptorClass); //<- wrong, loads the same DescriptorClass of RootClass, not on SomeChild 
```

如何告诉 NHibernate 在 SomeChild 上创建单个连接，然后获取 SomeGrandChild 和 SomeChild 的 DescriptorClass？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:11:22.920

对于这种类型的查询，请切换到使用 LINQ 查询语法而不是 lambda，因为它可以为您提供更多控制权，并且通常会输出更高效、更清晰的 SQL。

查看下面的示例，并注意我如何能够通过使用别名“c”多次引用客户实体。

```
var customers =
    (
        from c in session.Query<Customer>()
        from a in c.Addresses
        from pn in c.PhoneNumbers
        where c.Status == "Active"
                && a.City == "Dallas"
                && pn.AreaCode == "972"
        select c )
        .ToList(); 
```

这将导致以下使用 NHibernate 的 SQL：

```
SELECT
    customer0_.CustomerId as Customer1_135_0_,
    customer0_.Status as Customer1_135_1_
FROM
    Customer customer0_
INNER JOIN
    CustomerAddresses customeraddr1_
        ON customer0_.CustomerId=customeraddr1_.CustomerId
INNER JOIN
    CustomerPhoneNumbers customerphon2_
        ON customer0_.CustomerId=customerphon2_.CustomerId
WHERE
    customer0_.Status='Active' /* @p0 */
    AND customeraddr1_.City = 'Dallas' /* @p1 */
    AND customerphon2_.AreaCode = '972' /* @p2 */; 
```

# javascript - 如何获得不匹配的关键字？

> ID：13085852
> 
> 赞同：2
> 
> 时间：2012-10-26T11:11:20.387
> 
> 标签：javascript, jquery, keyword-search

我用这个作为关键字`s='young girl jumping'`

```
function selfreplace(s) {
    var words = ['man', 'jumping'];
    var re = new RegExp('\\b(' + words.join('|') + ')\\b', 'g');
    var specials = [];
    var match;
    var str = "";
    while(match = re.exec(s)) {
        str += match[0] + '(k)';
    }
    return str;
} 
```

它正在返回`jumping(k)`

我希望结果是`young(s) girl(s) jumping(k)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:21:18.523

检查它是否在`words`正则表达式之外可能是最容易的：

```
function selfreplace(s) {
   var words = ['man','jumping'];
   var re = new RegExp('\\b(\\w+)\\b', 'g');   
   var specials = [];
   var match;
   var str = "";
   while(match = re.exec(s))
   {
       if (words.indexOf(match[0]) !== -1))
           str += match[0] + '(k)';
       else
           str += match[0] + '(s)';
   }    
   return str;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:23:47.297

您可以使用回调替换。

```
function selfreplace(s){
  return s.replace(/man|jumping|(\w+)/g, function(word, misc){
    return word + (misc? '(s)' : '(k)')
  })
} 
```

如果匹配的单词是`man`or `jumping`，则只设置第一个参数（整个匹配）。如果匹配的单词是其他单词，则也设置第一个捕获组。

如果您不知道前面的单词集，您仍然可以即时生成正则表达式。假设`words`不包含非单词字符：

```
function selfreplace(s, words){ //or any other method of passing 'words'
  var re = RegExp(words.join("|")+"|(\\w+)",'g');
  return s.replace(re, function(word, misc){
    return word + (misc? '(s)' : '(k)')
  })
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:06:50.907

只是一种不同的方法，可能不是最好的解决方案，但我想我会把它扔在那里。

```
var str = "young girl jumping";

function replaceStr(s){

    var matched = new RegExp("man|jumping", "i");
    var newStr = "";
    var str = s.split(" ");
    for(var i=0; i<str.length;i++){
        if(str[i].match(matched)){
            newStr += str[i]+"(k) ";
        } else {
            newStr += str[i]+"(s) ";
        }
    }
    return newStr.substr(0, newStr.length-1); 
}

//replaceStr(str) returns "young(s) girl(s) jumping(k)" 
```

[演示](http://jsfiddle.net/L73PF/2/)在这里

如果匹配的单词可能会改变，那么您可以随时修改此函数，使其接受一个数组作为第二个参数，然后动态创建正则表达式

`replaceStr(s, matchArr){}`和 `var matched = new RegExp("("+matchArr.join("|")+")", "i");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:21:55.780

这样的事情可能会给你一个提示：

```
var s = "young girl jumping",
    words = ['man','jumping'],
    regex = new RegExp("(" + words.join("|") +")", "g"),
    q = s.replace(regex, function( string ) {
        return string + "(k)";
    });

console.log(q); // "young girl jumping(k)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T11:37:24.003

如果你只匹配单词，你根本不需要正则表达式，对吗？

只查找带有 == 的单词怎么样？

```
function selfreplace(s) {
    var words = ['man','jumping'];
    var input = s.split(" ");
    var str = "";
    for(var i=0; i<input.length; i++){
        var tmpString = "(s)";
        for(var j=0; j<words.length; j++){
            if(input[i] == words[j]){
                tmpString = "(k)";
            }
        }
        str += input[i]+tmpString;
    }
    return str;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T12:09:46.773

您可以`RegExp`为此使用 a ，但是对于您正在做的事情 a`RegExp`是矫枉过正的。我会改用`Array`方法：

```
var selfreplace = function selfreplace(s) {
    var words = ['man', 'jumping'],
        i = 0,
        suffix = '(s)';
    s = s.split(' ');
    for (i = 0; i < s.length; i += 1) {
        if (words.indexOf(s[i]) > -1) {
            s[i] = s[i] + '(k)';
        } else {
            s[i] = s[i] + '(s)';
        }
    }
    return s.join(' ');
}; 
```

这是一个正在运行的小提琴：http: [//jsfiddle.net/4KAzw/](http://jsfiddle.net/4KAzw/)

# knockout.js - Knockout 通过 id 在一个页面中绑定多个视图模型

> ID：13085858
> 
> 赞同：10
> 
> 时间：2012-10-26T11:11:53.350
> 
> 标签：knockout.js

我正在使用 twitter bootstrap 和 Knockout.js 构建一个复杂的 UI。为了实现这一点，我将我的页面分成了许多不同的逻辑组件。

是否可以为每个组件定义一个视图模型并通过 id 绑定它，使用

`ko.applyBindings(myViewModel, document.getElementById('someElementId'))`

而不是定义单个视图模型并将整个页面绑定到那个？它有任何性能问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T13:16:24.277

以这种方式绑定就可以了，不会有更差的性能。

当您绑定您的小节时，您需要确保您不会多次将绑定应用到同一区域。如果您将绑定应用到父元素然后再应用到子元素，就会发生这种情况。

如果你需要这样做（绑定各个部分，但也绑定一个整体视图模型），那么你会想要做这样的事情：[http ://www.knockmeout.net/2012/05/quick-tip-skip-binding .html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

# python - Outerzip / zip 最长功能（具有多个填充值）

> ID：13085861
> 
> 赞同：11
> 
> 时间：2012-10-26T11:12:15.550
> 
> 标签：python

是否有 Python 函数“outer-zip”，它是[`zip`](http://docs.python.org/library/functions.html#zip)每个迭代的不同默认值的扩展？

```
a = [1, 2, 3]   # associate a default value 0
b = [4, 5, 6, 7] # associate b default value 1

zip(a,b)  # [(1, 4), (2, 5), (3, 6)]

outerzip((a, 0), (b, 1)) = [(1, 4), (2, 5), (3, 6), (0, 7)]
outerzip((b, 0), (a, 1)) = [(4, 1), (5, 2), (6, 3), (7, 1)] 
```

我几乎可以使用[map](http://docs.python.org/library/functions.html#map)复制这个 outerzip 函数，但`None`作为*唯一*的默认值：

```
map(None, a, b) # [(1, 4), (2, 5), (3, 6), (None, 7)] 
```

*注意1：内置[`zip`](http://docs.python.org/library/functions.html#zip)函数可以接受任意数量的迭代，`outerzip`函数也应该如此。（例如，应该能够与和`outerzip((a,0),(a,0),(b,1))`类似地计算。）`zip(a,a,b)``map(None, a, a, b)`*

*注意2：我说的是“outer-zip”，以[这个haskell question](https://stackoverflow.com/questions/9198410/canonical-outer-join-zip-function)的风格，但也许这不是正确的术语。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T11:14:57.323

它被称为[`izip_longest`](http://docs.python.org/library/itertools.html#itertools.izip_longest)（[`zip_longest`](http://docs.python.org/py3k/library/itertools.html#itertools.zip_longest)在 python-3.x 中）：

```
>>> from itertools import zip_longest
>>> a = [1,2,3]
>>> b = [4,5,6,7]
>>> list(zip_longest(a, b, fillvalue=0))
[(1, 4), (2, 5), (3, 6), (0, 7)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T11:46:02.023

您可以[修改`zip_longest`](http://docs.python.org/dev/library/itertools.html#itertools.zip_longest)以支持您的一般迭代用例。

```
from itertools import chain, repeat

class OuterZipStopIteration(Exception):
    pass

def outer_zip(*args):
    count = len(args) - 1

    def sentinel(default):
        nonlocal count
        if not count:
            raise OuterZipStopIteration
        count -= 1
        yield default

    iters = [chain(p, sentinel(default), repeat(default)) for p, default in args]
    try:
        while iters:
            yield tuple(map(next, iters))
    except OuterZipStopIteration:
        pass

print(list(outer_zip( ("abcd", '!'), 
                      ("ef", '@'), 
                      (map(int, '345'), '$') ))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T11:28:31.767

这个函数可以通过扩展每个输入的列表和压缩来定义：

```
def outerzip(*args):
    # args = (a, default_a), (b, default_b), ...
    max_length = max( map( lambda s: len(s[0]), args))
    extended_args = [ s[0] + [s[1]]*(max_length-len(s[0])) for s in args ]
    return zip(*extended_args)

outerzip((a, 0), (b, 1)) # [(1, 4), (2, 5), (3, 6), (0, 7)] 
```

# google-maps - Directions API 上的自定义 Google 地图标记

> ID：13085863
> 
> 赞同：2
> 
> 时间：2012-10-26T11:12:17.220
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我对 Google 地图 api 完全陌生，在整理了在网络上找到的几个示例之后，我在为方向添加自定义标记的最后一个障碍上苦苦挣扎。这是我的代码：

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
function initialize() {
    var latlng = new google.maps.LatLng([[showMapLatitude]],[[showMapLongitude]]);
    directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true});
    var myOptions = {
        zoom: 14,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    };

var stylez = [
{
  featureType: "all",
  elementType: "all",
  stylers: [
    { saturation: -100 }
  ]
}
];

var image = new google.maps.MarkerImage('/icon.png',
    new google.maps.Size(20, 33),
    new google.maps.Point(0,0),
    new google.maps.Point(10,33)
);

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
            var mapType = new google.maps.StyledMapType(stylez, { name:"Grayscale" });
            map.mapTypes.set('tehgrayz', mapType);
            map.setMapTypeId('tehgrayz');    
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
    var marker = new google.maps.Marker({
        position: latlng, 
        map: map, 
        title:"[[*pagetitle]]",
                    icon: image
    });

}

function calcRoute() {
            $(".storeDetails").hide();
            $(".storeAdress").hide();
            $(".backtocontact").show();
    var start = document.getElementById("routeStart").value;
    var end = "[[showMapLatitude]],[[showMapLongitude]]";
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });
} 
```

这里有一个如何做到这一点的例子：[Change individual markers in google maps Directions api V3](https://stackoverflow.com/questions/4813728/change-individual-markers-in-google-maps-directions-api-v3)

但是作为一个菜鸟，我似乎无法将它放在正确的位置，它要么出错，要么什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:53:58.047

**改变**

```
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
}); 
```

**至**

```
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        var leg = response.routes[ 0 ].legs[ 0 ];
        makeMarker( leg.start_location, icons.start, "title" );
        makeMarker( leg.end_location, icons.end, 'title' );
    }
}); 
```

并且不要忘记添加`makeMarker()`功能。您还需要开始和结束图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:43:29.573

回复[我其他答案中的评论](https://stackoverflow.com/a/13086453/662581)

删除原始自定义标记并显示默认标记

**删除**

```
var image = new google.maps.MarkerImage('/icon.png',
new google.maps.Size(20, 33),
new google.maps.Point(0,0),
new google.maps.Point(10,33)
); 
```

**和**

```
var marker = new google.maps.Marker({
    position: latlng, 
    map: map, 
    title:"[[*pagetitle]]",
                icon: image
}); 
```

**也改变**

```
directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true}); 
```

**至**

```
directionsDisplay = new google.maps.DirectionsRenderer(); 
```

# asp.net-mvc - Razor 和 if 语句

> ID：13085867
> 
> 赞同：0
> 
> 时间：2012-10-26T11:12:35.277
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, razor-2

我在 MVC 3 C# 中使用 MS Razor，我需要在 IF 语句中显示一些文本“hello”。目前我收到一个错误。知道如何解决吗？

编辑：语法错误

```
 @if(Model.IsCustomEvent)
    {
        @Html.ActionLink("Edit", "Edit", new {  id=Model.EventTitle }) hello
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T11:15:33.867

你需要`:`在你好之前

```
 @if(Model.IsCustomEvent)
    {
        @Html.ActionLink("Edit", "Edit", new {  id=Model.EventTitle }) @:hello
    } 
```

[这是一个很好的参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T11:16:37.060

使用`@:` [符号来包含文字](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

```
@if(Model.IsCustomEvent)
{
    @Html.ActionLink("Edit", "Edit", new {  id=Model.EventTitle }) 
    @:hello
} 
```

# wcf - MaxReceivedMessageSize 的 WCF 配置错误

> ID：13085873
> 
> 赞同：0
> 
> 时间：2012-10-26T11:13:02.227
> 
> 标签：wcf, c#-4.0

调用我的服务时出现以下错误；

```
The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element. 
```

服务的配置是；

```
 <bindings>
      <basicHttpBinding>
        <binding name="basic" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" >
          <readerQuotas maxDepth="32" maxStringContentLength="67108864" maxArrayLength="10240000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="Company.Product.Service.FileManager.IFileManager">
        <endpoint binding="basicHttpBinding" bindingConfiguration="basic" name="FileManager" bindingNamespace="Company.Product.FileManager.FileManagerService" contract="Company.Product.Service.FileManager.IFileManager" />
        <host>
          <baseAddresses>
            <add baseAddress="http://filemanager.dev.v7.services.Company.net" />
          </baseAddresses>
        </host>
      </service>
    </services> 
```

正如你所看到的，我已经相应地调整了设置，所以不知道为什么我仍然收到这个错误。

客户端配置；

```
 <bindings>
      <basicHttpBinding>
        <binding name="basic" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="67108864" maxArrayLength="10240000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>

      <endpoint address="http://filemanager.dev.v7.services.Company.net/service.svc" binding="basicHttpBinding" bindingConfiguration="basic" contract="Company.Product.Service.FileManager.IFileManager" name="FileManager"/>
    </client> 
```

**更新**

将服务配置更改为此（删除绑定名称），这现在可以工作，但为什么它不能与命名配置一起工作；

```
<bindings>
      <basicHttpBinding>
        <binding name="" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" >
          <readerQuotas maxDepth="32" maxStringContentLength="67108864" maxArrayLength="10240000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
    </bindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:56:40.927

您还必须更改客户端的 app.config。

编辑：

如果您将 name 属性留空，它将应用于未命名类型的每个绑定。如果您在配置中有一个命名绑定，则只有在该名称明确引用它时才会拾取它。

# mysql - iOS开发。mysql？石榴石？最好的方法是什么？

> ID：13085875
> 
> 赞同：1
> 
> 时间：2012-10-26T11:13:10.797
> 
> 标签：mysql, objective-c, ios, sqlite

我需要创建一个与远程数据库链接的应用程序！mysql是最好的解决方案吗？Sqlite 是唯一的本地解决方案吗？

我使用以下方法，我想知道它是否是最好的方法！

```
NSString *evento = @"1";
NSString *filtro = @"CAC2";

NSString *strURL = [NSString   
stringWithFormat:@"http://www.xxxxxxx.com/Scripts/Evento/WIGriceviTipo.php?  
evento=%@&filtro=%@",evento, filtro];

NSData *dataURL = [NSData dataWithContentsOfURL:
               [NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL   
encoding:NSUTF8StringEncoding];

strResult = [strResult stringByTrimmingCharactersInSet:[NSCharacterSet       
whitespaceAndNewlineCharacterSet]];

mostra.text=strResult;

NSLog(@"%@", strResult); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T11:53:27.927

为什么不使用`Core Data`？我做了很多远程数据库交互，并使用 CD 作为本地存储，只是将所有数据传递给一个 Web 服务，该服务对其进行消化，检查数据完整性，然后将数据传递给数据库。

`Core Data`[学习曲线比您想象的要容易得多，如果您使用像Magical Record](https://github.com/magicalpanda/MagicalRecord)这样的第三方库，那就更容易了。

就 Web 服务器数据库而言，如果您使用基于 Linux 的平台，MySQL 是最佳选择 (IMO)，如果您使用 Windows Server 路线，SQL Server 将成为一个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:25:17.233

不应远程使用 SQLite。来自文档：

> 如果您有许多客户端程序通过网络访问公共数据库，则应考虑使用客户端/服务器数据库引擎而不是 SQLite。

在您的代码中，您可以将此请求设为异步，因为在检索数据时您可能会阻塞主线程。您可以使用`GCD`和封闭或使用`dataWithContentsOfURL`类代替。`dispatch_async``NSURLConnection`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:51:59.167

不同版本的SQLLite可以远程使用，在移动应用开发中最好有SQLLite数据库，因为它占用内存少来存储数据。

请访问[http://www.sqlite.org/cvstrac/wiki?p=SqliteNetwork](http://www.sqlite.org/cvstrac/wiki?p=SqliteNetwork)

# jmeter - JMeter - 在 Beanshell 侦听器中检测 TransactionController 采样器

> ID：13085877
> 
> 赞同：3
> 
> 时间：2012-10-26T11:13:13.757
> 
> 标签：jmeter

有没有办法在 BeanShell 侦听器脚本中确定示例结果/事件是否在事务控制器下？

我知道您可以使用它`sampleEvent.isTransactionSampleEvent()`来确定事件是否针对 TransactionController。但是，在下面的示例中，是否可以在执行 HTTP 请求 2 的 BeanShell 侦听器时检查它是否位于事务控制器下？

```
Thread Group
  HttpRequest 1  
  TransactionController  
    HttpRequest 2  
    HttpRequest 3  
  HttpRequest 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:37:24.307

为什么不用后缀（-underTC）命名您的采样器并在您的侦听器中进行测试：

*   JMeterContext#getCurrentSampler()#getName()

尝试使用内部 JMeter API 可能会在将来破坏您的测试。

# javascript - 客户端本地化

> ID：13085881
> 
> 赞同：4
> 
> 时间：2012-10-26T11:13:35.890
> 
> 标签：javascript, .net, localization, assemblyinfo, client-side

我想做客户端本地化（即嵌入 javascript 和资源文件）。一切正常，直到我们在同一个项目（“XXX.Web”）中同时拥有 js 文件和资源文件。

作为要求的一部分，我必须将所有资源文件移出到“XXX.LocalizedResources”项目，而我仍然需要对 js 文件进行客户端本地化。

我在 Web 项目的 AssemblyInfo.vb 中尝试了以下内容：

前：

> 程序集：System.Web.UI.WebResource("XXX.Web.GlobalStrings.js", "text/javascript")
> 
> 程序集：System.Web.UI.ScriptResource("XXX.Web.GlobalStrings.js", "XXX.Web.Resources", "Resources")

后：

> 程序集：System.Web.UI.WebResource("XXX.Web.GlobalStrings.js", "text/javascript")
> 
> 程序集：System.Web.UI.ScriptResource("XXX.Web.GlobalStrings.js", "XXX.LocalizedResources.Resources", "Resources")

（请忽略以上行中的语法错误）我现在得到的错误如下：

> 找不到适合指定区域性或中性区域性的任何资源。确保“XXX.LocalizedResources.Resources”在编译时被正确嵌入或链接到程序集“XXX.Web”中，或者所有所需的附属程序集都是可加载的并且是完全签名的。

从很少的研究中我发现只有 web 或 web.extension 项目可以在“Assembly: System.Web.UI.ScriptResource (...)”中使用。

我尝试在“XXX.LocalizedResources”的 AssemblyInfo 中添加“Assembly: InternalsVisibleTo("XXX.Web")”，但这无助于将资源文件打开到“XXX.Web”。此外，资源文件已经公开，并且也设置了嵌入选项。

知道如何将外部资源文件嵌入到 javascript 中以进行客户端本地化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:22:48.663

将其包含在您的页面中：

```
<script>
//declare string variable defaults here
function UrlExists(url){
var http = new XMLHttpRequest();
try{http.open('HEAD', url, false);
    http.send();
    return http.status!=404;
}catch(e){return false;}
}

var lang=navigator.userLanguage || navigator.language.toLowerCase();
var langsrc   = document.createElement("script");
langsrc.type  = "text/javascript";

if(UrlExists(lang+".js")){
   langsrc.src=lang+".js";
}else{
   langsrc.src="en-us.js";
}
document.body.appendChild(langsrc);
//rest of code here:
</script> 
```

然后为每种支持的语言设置一个文件，例如 en-us.js

```
//en-us.js localization for....
//set language specific variables here
//define language specific functions 
```

该文件与您的页面位于同一目录中，并且可以由该目录中的所有页面共享（经过修改，它可以执行多个目录或站点或仅一个文件，但要保持简单，以便您可以品尝）

如果可能的话，我建议您为变量使用 JSON 对象，以便您可以与服务器端共享单个本地化文件（例如 php）如果需要，您可能需要为任何本地化的 javascript 函数包含第二个文件。

# variables - 验证错误（），变量，

> ID：13085883
> 
> 赞同：0
> 
> 时间：2012-10-26T11:13:49.540
> 
> 标签：variables

我想将validation_errors() 中的错误保存在变量中，并在视图中显示。

我知道如何传递变量来查看传递另一个视图：

在控制器中：

```
$data['date'] = 'some_data';
$this->load->view('register/register_open',$data); 
```

在 view_open

```
<?php 
$this->load->view('mains/header');
$this->load->view('login/loggin');
$this->load->view('mains/menu');
$this->load->view('left_column/left_column_before');
$this->load->view('left_column/menu_left');
$this->load->view('left_column/left_column');
$this->load->view('center/center_column_before');
$this->load->view('register/register_view');
$this->load->view('center/center_column');
$this->load->view('right_column/right_column_before');
$this->load->view('right_column/right_column');
$this->load->view('mains/footer');
?> 
```

鉴于：

```
 <?php echo $date; ?> 
```

但我不知道如何将validation_errors() 保存在数组或变量中，然后传递给查看页面。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:50:13.880

请参阅本手册：[http ://ellislab.com/codeigniter/user_guide/general/views.html](http://ellislab.com/codeigniter/user_guide/general/views.html)

分配变量：

```
<?php
class Blog extends CI_Controller {

    function index()
    {
        $data['title'] = "My Real Title";
        $data['heading'] = "My Real Heading";

        $this->load->view('blogview', $data);
    }
}
?> 
```

现在将其视为：

```
<html>
<head>
<title><?php echo $title;?></title>
</head>
<body>
    <h1><?php echo $heading;?></h1>
</body>
</html> 
```

在您的情况下，请尝试以下操作：

```
var_dump($todo_list); 
```

您将了解数据结构以及如何处理它。

# asp.net - 获取当前登录用户的通知

> ID：13085885
> 
> 赞同：-1
> 
> 时间：2012-10-26T11:14:01.070
> 
> 标签：asp.net, ajax, web-services

我想向我的 asp.net 应用程序添加通知。当向订单表下订单时，应该自动弹出当前登录的用户，例如 facebook 通知。请帮助示例代码谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:22:24.453

您可以使用[查询通知](http://msdn.microsoft.com/en-us/library/ms130764.aspx)来实现这一点。

要在您的数据库中启用此选项，您必须启用 `Service Broker`默认情况下未启用的选项。看看如何[启用查询通知](http://msdn.microsoft.com/en-us/library/ms172133%28v=vs.80%29.aspx)

还可以看看如何使用[SqlNotificationRequest 和 Detecting Notifications](http://msdn.microsoft.com/en-us/library/3ht3391b.aspx)

# php - 从 ajax 聊天中获取最后插入的消息

> ID：13085888
> 
> 赞同：0
> 
> 时间：2012-10-26T11:14:10.950
> 
> 标签：php, ajax, mysqli, chat

我正在构建一个聊天应用程序并遇到一些问题。首先，我希望用户登录后聊天开始从数据库加载。

从 ajax 调用的 db 获取整个聊天的函数

```
function getChatData(){
    global $mysqli;
    //echo $lastinseted= $mysqli->insert_id();
    $sql = "SELECT `chat`.`message`,
        `users`. `username`,
        `chat`.`timestamp`
        from `chat` JOIN `users` ON (`chat`.`user_id`=`users`.`user_id`) 
        ORDER BY `chat`.`timestamp` DESC limit 15";
    try{
        if($stmt=$mysqli->prepare($sql)){
            echo returnJson($stmt);
            $stmt->close();
            $mysqli->close();
        }else{
            throw new Exception("An error occured while fetching record data");
        }
    }catch(Exception $e){
        log_error($e, $sql, null);
        echo 'fail';
    }
} 
```

这是回调函数：

```
function getChatCallback(data){
    var h='';
    for(var i=0, l=data.length;i<l;i++){
        h+=data[i].username+' says: '+data[i].message+'<span style="color:gray"> at the time '+data[i].timestamp+'</span><br/>';
    }
    $('.messages').html(h);
    setTimeout(getChat,1500);
 } 
```

这是将新消息插入数据库的函数，一旦用户点击回车就会调用它，它也被 ajax 调用调用：

```
function putChatData($message,$room,$user_id){
    global $mysqli;
    $sql = "INSERT INTO `chat`
    (`message`,`timestamp`,`room`,`user_id`)
    VALUES (?,?,?,?)";
    $timestamp = gmdate("Y-m-d H:i:s");

    try{
        if($stmt=$mysqli->prepare($sql)){
             $stmt->bind_param('ssii',$message,$timestamp,$room,$user_id);

            $stmt->execute();

            $stmt->close();
            $mysqli->close();

        }else{  
            throw new Exception("An error occured while fetching record data");
        }
    }catch(Exception $e){
        log_error($e, $sql, null);
        echo 'fail';
    }

} 
```

现在的问题是我可以将新消息插入数据库，但是获取聊天的第一个函数会在用户登录之前带来所有聊天，包括旧的聊天。我尝试使用时间戳或最后一个插入 ID，但没有不要和我一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:40:06.500

对于这个用例，您需要知道注册时间并在查询中添加 WHERE 条件

```
$sql = "SELECT `chat`.`message`,
    `users`. `username`,
    `chat`.`timestamp`
    from `chat` JOIN `users` ON (`chat`.`user_id`=`users`.`user_id`) 
    WHERE `chat`.`timestamp` > $userRegDate 
    ORDER BY `chat`.`timestamp` DESC limit 15"; 
```

# java - 如何在运行时更改 JTabbedPane 的背景颜色？

> ID：13085894
> 
> 赞同：1
> 
> 时间：2012-10-26T11:14:33.620
> 
> 标签：java, swing, look-and-feel, jtabbedpane, uimanager

我发现了大量的例子可以改变`JTabbedPane`使用的背景颜色`setBackgroundAt()`和`UIManager.put("JTabbedPane...")`

但是，我想`onclick`在一个复选框上创建一个事件，当您选择它时将背景颜色更改为绿色，并在您取消选择它时恢复默认值。

我无法使用上述方法完成这项工作。

有任何想法吗？

`setForgroundAt()`PS：由于某种原因，我可以通过使用而不是背景来更改前景色

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:23:06.707

LAF 可以自由地忽略一些（仅可视？不知道）JComponent 属性的自定义设置，[如文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)所述：

> 尊重此属性取决于外观和感觉，有些人可能会选择忽略它。

所以结果高度依赖 LAF（Metal 和 Motif 中的 Workforme，而不是 Nimbus/Win） 没有简单安全的方法（除了调整 ui 代表，这不是一个真正的选择）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:22:04.170

覆盖`paintComponent`并更改那里的颜色。

```
@Override
public void paintComponent(Graphics g) {
    g.setColor(new Color(color));
    g.fillRect(0, 0, getWidth(), getHeight()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T08:46:46.500

在设置每个选项卡面板的背景/前景颜色后尝试以下操作。这应该使顶部的选项卡与 JTabbedPane (myTabs) 中的面板颜色相同。这对我来说适用于 Nimbus。

```
for (int c = 0; c < myTabs.getComponentCount(); ++c)
{
  myTabs.setBackgroundAt(c, myTabs.getComponentAt(c).getBackground());
  myTabs.setForegroundAt(c, myTabs.getComponentAt(c).getForeground());
}

myTabs.setOpaque(true);
myTabs.setUI(new BasicTabbedPaneUI()); 
```

# jquery - 模态窗口jQuery，Javascript不起作用

> ID：13085895
> 
> 赞同：1
> 
> 时间：2012-10-26T11:14:40.093
> 
> 标签：jquery, modal-dialog, jquery-events

我使用 jQuery 模态窗口，它工作正常，但是当我想用代码将网站包含到模态窗口中时

```
$("#vsebina").load('validField.html'); 
```

验证表单的 Javascript 不再起作用。

我在下面举了例子。单击按钮打开模态窗口。尝试在输入字段中输入一些字母，然后单击输入字段，您会收到错误消息。

示例一（带有模态窗口的基本 jQuery 代码）：[链接](http://www.oliviers.si/test/validForm/form_elementsValidModal.html)

示例二（使用`.load()`函数的模式窗口：[链接](http://www.oliviers.si/test/validForm/form_elementsValidModalLoad.html)- 在此选项中，Javascript 无法启动，并且我没有收到所需的错误。

哪里出错了，因为我已经搜索了好几个小时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:17:59.820

尝试在函数`$( "myForm" ).validate()`内部和`click()`函数之后`load()`调用。

加载脚本时，您的 html 不存在。因此，验证代码不会附加到您的表单中，您以后也不会这样做。

希望这可以帮助。

亲切的问候

# java - 如果可能的话，是否有一个工具可以使所有类包受保护和最终？

> ID：13085904
> 
> 赞同：9
> 
> 时间：2012-10-26T11:15:19.213
> 
> 标签：java, ide, module

背景：我注意到在许多项目中，几乎所有内部​​代码中的类都是公共的而不是最终的，即使它们不需要。但是，对我来说，不默认做出这个决定似乎是明智的，而只有在它们实际上打算从系统的其他部分使用时才公开类。拥有包保护类是一种在模块之间强制执行边界的简单机制，并用作关于类的预期用途的文档。

如果有一个（最好是免费的 :-) 工具来保护所有可以在不破坏程序的情况下受到保护的类，并且可能使所有没有子类的东西成为最终的，那么这将是开始有意识地使用保护机制的一个很好的起点。（当然你需要在之后进行调整。）你知道这样的工具吗？

警告：我知道有更好的模块化机制，比如 OSGI 和计划中的超级包等等。但是在许多当前的项目中，这不是一个选项，使用普通的旧 Java 机制是您可以轻松做到的。此外，这仅在您共享代码所有权（这样每个人都可以根据需要将内容更改回公共）并且如果您正在开发最终产品而不是供他人使用的库时才有效。我也不太确定最终确定的好处——这可以防止 AOP 和嘲笑。

**澄清**：正如我所说，我不是在谈论将库扔给无法更改的人，而是在鼓励每个人根据需要更改和重构所有内容的中型项目的内部代码。当我谈论受保护的包裹或最终将其视为“受到保护，直到有人感到迫切需要解除这些限制”。如果有人觉得有必要解除该工具设置的限制，欢迎他这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:28:46.287

即使有这样的工具，（没有），一个好的程序员也不会使用它......访问规范是程序员自己最好理解和解决的设计问题。想一想……你制作了一个程序并运行该工具并整理好所有东西（假设该工具首先是超级智能的，可以真正理解你的程序）……然后你决定修改它……扩展一些类, 等等.. 你最终会扩展最终类并制作私有类的对象.. （这些只是你将面临的众多问题中的一小部分）......

事情是……当工具完成它的工作时，你甚至不再理解你自己的程序。

底线..停止寻找解决您的设计问题的工具..（就像要求可以自​​动调试您的程序的工具一样）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:22:00.063

您可以从 Eclipse 中查看[ATL 。](http://www.eclipse.org/atl/)虽然 ATL 用于创建不同类型模型之间的模型到模型转换，但没有限制源模型和目标模型不是同一类型。您可以创建从 Java 到 Java 的转换，使您当前的类受保护或最终。[MoDisco](http://www.eclipse.org/MoDisco/)是 Eclipse 的一个工具集，它利用了它，如果您想查看示例。

# xml - 如何在 rails 3.2.x 中的 to_xml 中指定布局？

> ID：13085906
> 
> 赞同：0
> 
> 时间：2012-10-26T11:15:25.847
> 
> 标签：xml, ruby-on-rails-3

有没有办法像 respond_to 方法一样指定布局选项？

或者有什么方法可以捕获 response_to 方法输出到文件的输出？

提前致谢 ！！

*更新：*

使用以下函数将 xml 保存到文件。

```
def generate_xml
 xml_data = self.to_xml 
 file = File.new("public/assets/xmls/#{self.id}.xml", "w")
 file.write(xml_data)
 file.close
end 
```

但它只生成默认元素，而不是 show.xml 文件中指定的，我可以从浏览器点击中获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:30:05.877

不同的是控制器调用render

```
"/path/to/show.xml" :locals => { :xml_obj => :xml_obj } 
```

换句话说，要生成与控制器中的 show 操作相同的结果，请以与控制器的 #show 操作中相同的方式（可能是隐式）调用渲染操作。

# python - 使用 jsonpickle (python) 进行类型演化

> ID：13085911
> 
> 赞同：1
> 
> 时间：2012-10-26T11:15:47.217
> 
> 标签：python, schema, jsonpickle

jsonpickle 中是否对此有任何支持？

例如，我存储和对象，他们修改其架构，然后尝试将其加载回来。

比如下面的变化，（属性加法）

```
import jsonpickle

class Stam(object):

   def __init__(self, a):
     self.a = a

   def __str__(self):
     return '%s with a=%s' % (self.__class__.__name__, str(self.a))

js = jsonpickle.encode(Stam(123))
print 'encoded:', js

class Stam(object):

   def __init__(self, a, b):
     self.a = a
     self.b = b

   def __str__(self):
     return '%s with a=%s, b=%s' % (self.__class__.__name__, str(self.a), str(self.b))

s=jsonpickle.decode(js)
print 'decoded:', s 
```

产生错误：

```
encoded: {"py/object": "__main__.Stam", "a": 123}
decoded: Traceback (most recent call last):
  File "C:\gae\google\appengine\ext\admin\__init__.py", line 317, in post
    exec(compiled_code, globals())
  File "<string>", line 25, in <module>
  File "<string>", line 22, in __str__
AttributeError: 'Stam' object has no attribute 'b' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:48:40.900

jsonpickle 中不支持类型演化或类型迁移。

您最好的做法是（通过`json.loads`）将数据的 JSON 表示加载到列表/字典/字符串/数字的基本 Python 结构中。遍历这个 Python 表示，添加空/默认`b`键。然后通过`json.dumps`.

然后，您可以使用 jsonpickle 加载修改后的数据版本。

```
temp = json.loads(js)
temp['b'] = None
js = json.dumps(temp)
jsonpickle.decode(js) 
```

如果您的对象模型更复杂，这显然会变得更复杂，但是您可以检查 py/object 键以查看是否需要修改对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T00:28:06.920

由于版本控制问题，仅 jsonpickle 不足以持久化对象。您还需要在 JSON 输出中保留版本标识符，以便在阅读旧版本时可以改进（清理）数据。

话虽如此，您可以做一些事情来让生活更轻松。您可以将 json.dumps 的 default=dict 参数与 对象上的**iter**结合使用。这将使您将对象保存为字典。然后，当您阅读它时，您可以使用 **dict 运算符和关键字参数从 JSON 字典中重新实例化您的对象。

这允许您读入持久对象并为任何新属性提供初始化。例如，如果我们从具有 val1 属性的类开始并将其持久化，然后扩展该类以具有 val2 属性并从持久化状态恢复：

```
import json

class Stam( object ) :
    val1 = None
    def __init__( self, val1=None ) :
        self.val1 = val1

    def __iter__( self ) : return {
        'val1':self.val1
    }.iteritems()

obj1 = Stam( val1='a' )
persisted = json.dumps( obj1, default=dict )

class Stam( object ) :
    val1 = None
    val2 = None
    def __init__( self, val1=None, val2='b' ) :
        self.val1 = val1
        self.val2 = val2

    def __iter__( self ) : return {
        'val1':self.val1,
        'val2':self.val2
    }.iteritems()

obj2 = json.loads( persisted, object_hook=lambda d: Stam(**d) )
assert obj2.val1 == 'a'
assert obj2.val2 == 'b' 
```

当然，我们也可以使用 jsonpickle 并跳过`__iter__`额外的 json 参数，因为 jsonpickle 会忽略缺失的属性。因此，任何新的 val2 都会提供静态类初始化，但它不会在`__init__` ctor 中运行初始化代码。这将变成：

```
import jsonpickle

class Stam( object ) :
    val1 = None
    def __init__( self, val1 ) :
        self.val1 = val1

obj1 = Stam( 'a' )
persisted = jsonpickle.encode( obj1 )

class Stam( object ) :
    val1 = None
    val2 = 'b'
    def __init__( self, val1, val2 ) :
        self.val1 = val1
        self.val2 = val2

obj2 = jsonpickle.decode( persisted )
assert obj2.val1 == 'a'
assert obj2.val2 == 'b' 
```

# java - 在 Java 中的字符串列表中查找公共子表达式的最有效方法

> ID：13085912
> 
> 赞同：1
> 
> 时间：2012-10-26T11:15:48.937
> 
> 标签：java, arrays, algorithm

我有一个代表包目录的字符串列表。我想迭代列表，找到包相同的字符串的最大部分，然后提取这个子字符串，从原始字符串列表中减去它以获得特定的包，以便创建适当的目录。

我正在考虑将原始列表创建为静态哈希集，然后使用 retainAll 方法，将结果存储在新字符串中。

像这样的东西会是性能最高的选择，还是有更好的方法来做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:39:51.130

这对我有用，评论中的解释

```
// returns the length of the longest common prefix of all strings in the given array 
public static int longestCommonPrefix(String[] strings) {
    // Null or no contents, return 0
    if (strings == null || strings.length == 0) {
        return 0;
        // only 1 element? return it's length
    } else if (strings.length == 1 && strings[0] != null) {
        return strings[0].length();
        // more than 1
    } else {
        // copy the array and sort it on the lengths of the strings,
        // shortest one first.
        // this will raise a NullPointerException if an array element is null 
        String[] copy = Arrays.copyOf(strings, strings.length);
        Arrays.sort(copy, new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                return o2.length() - o1.length();
            }
        });
        int result = 0; // init result
        // iterate through every letter of the shortest string
        for (int i = 0; i < copy[0].length(); i++) { 
            // compare the corresponding char of all other strings
            char currenChar = copy[0].charAt(i);
            for (int j = 1; j < strings.length; j++) {                  
                if (currenChar != copy[j].charAt(i)) { // mismatch
                    return result;
                }
            }
            // all match
            result++;
        }
        // done iterating through shortest string, all matched.
        return result;
    }
} 
```

如果更改原始数组不打扰您，则可以省略该行`String[] copy = Arrays.copyOf(strings, strings.length);`并仅对数组进行排序`strings`。

要检索文本，请将返回类型更改为并在循环内和方法末尾`String`返回类似的内容。`return copy[0].substring(0, result + 1);``return copy[0];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:17:44.050

Just sort them. The common prefixes will appear first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:32:08.900

如果您只是在寻找一个最常见的软件包，我会执行以下操作：

从列表中获取第一个元素（称为参考包）。使用这个包名我会遍历列表。对于列表中的每个剩余元素，查看该元素是否包含参考包。如果是这样，请移至下一个元素。如果不将您的参考包修剪一个包（获取`aa.bb.cc.serverside`并转换为`aa.bb.cc`）。然后查看当前元素是否包含这个新的参考包。重复此操作，直到参考包为空或元素匹配。然后继续查看软件包列表。

这将为您提供最大最常见的软件包。通过从列表中的所有元素中删除它来循环返回。

编辑：稍作修改，最好保留`.`包名称的末尾以确保完整的包名称。

# javascript - 不使用 HTML 表单

> ID：13085913
> 
> 赞同：-3
> 
> 时间：2012-10-26T11:15:50.433
> 
> 标签：javascript, jquery, html, forms

我有一个场景，我在想这种方法是否可以接受？

我大部分时间没有使用 html 表单，而是省略了创建一个表单，而是以 jquery 的形式发送表单信息，比如 $.ajax;

因此这没有安全问题、性能问题、语义不规则或任何问题？

这种方法可以绕过编码 html 表单的标准形式吗？当我们可以使用 javascript 等发送其内容时，为什么还要使用表单？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:18:49.213

您仍然需要一个 HTML 表单。但我猜你的意思是你希望创建一个页面/站点，它具有有限的整页常规 HTTP 回发？

您的想法没有任何问题，但是您应该考虑在浏览器中关闭了 javascript 的用户或使用旧版浏览器的用户的情况。

以 Gmail 为例——它以纯 Ajax 形式提供，并且还具有老式 Http 功能作为旧浏览器的后备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:24:19.210

关于您的安全问题：

它与提交表单一样安全，因为它基本上是相同的操作（打开网站）。唯一的区别是它在“后台”异步发生。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-26T11:18:29.373

HTML 表单使用户能够输入数据（从列表中选择、输入文本等）。

所以请演示如何在没有 HTML 表单的情况下执行此操作，

# c# - 将模型变量绑定到 ASP.NET MVC3 中的操作方法

> ID：13085914
> 
> 赞同：2
> 
> 时间：2012-10-26T11:16:02.927
> 
> 标签：c#, asp.net-mvc-3, binding

我有一个`HomeController`具有以下功能的控制器`action method`：

```
[HttpPost] 
public ActionResult DisplayData(MyViewModel myViewModel)
{
   // Do something with myViewModel           
} 
```

`ViewModel`: _

```
public class MyViewModel
{
    public string Name { get; set; }
    public string Surname { get; set; }
    public bool IsPeriod { get; set; }
} 
```

以及以下`View`

```
@model AppName.ViewModels.MyViewModel

@{ Html.RenderPartial("MyPartialView", Model);  }

<img src="@Url.Action("DisplayData", "Home", new { myViewModel = Model })" alt="Image" /> 
```

我使用 Url.Action 它是如何描述的[，](http://www.codeproject.com/Tips/198477/Calling-a-MVC-Controller-and-Action-Method-using-H)但我在 DisplayData 操作方法中得到的是 null。在我得到的源代码中：

```
<img src="/Home/DisplayData?filters=AppName.ViewModels.MyViewModel" alt="Image" /> 
```

所以它实际上是在传递类型而不是值。

`ViewModel`而是正确地传递给局部视图。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T14:35:55.547

我通常将以下内容添加到我的模型中：

```
public class MyViewModel
{
    public string Name { get; set; }
    public string Surname { get; set; }
    public bool IsPeriod { get; set; }

    public RouteValueDictionary RouteValues
    {
        get
        {
            var rvd = new RouteValueDictionary();
            rvd["name"] = Name;
            rvd["surname"] = Surname;
            rvd["isPeriod"] = IsPeriod;
            return rvd;
        }
    }
} 
```

然后，您可以简单地在 Url.Action() 调用中使用 RouteValues 属性。

```
<img src="@Url.Action("DisplayData", "Home", Model.RouteValues)" alt="Image" /> 
```

或者，如果您更喜欢较少（显式）代码，请忽略模型更改并简单地执行以下操作：

```
<img src="@Url.Action("DisplayData", "Home", new RouteValueDictionary(Model)" alt="Image" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:22:21.977

它不会将您的整个对象序列化为您必须明确设置每个值的查询字符串，即

```
new { nameFilter = @Model.Name, @Model.Surname, @Model.IsPeriod } 
```

如果您的参数在您的路由中没有被称为 Name，您只需要提供 nameFilter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:22:04.123

您正在尝试使用整个视图模型创建一个 img src 链接，我认为这不是您真正想要的。

相反，您可以将模型表示的任何 Id 作为链接（过滤器）上的查询字符串参数传递。因此，例如使用...

```
<img src="@Url.Action("DisplayData", "Home", new { filters = Model.Id })" alt="Image" /> 
```

渲染类似...

```
<img src="/Home/DisplayData?filters=1" alt="Image" /> 
```

然后，您可以在操作中使用 Id 来查找您要显示的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T11:23:25.747

如果您想以您描述的方式传递模型，则必须覆盖 ViewModel 类的 ToString() 方法，因为这就是将 ViewModel 对象传递给 Url.Action 方法返回此类链接的原因。此外，如果您想将 ViewModel 传递给 Action，您必须准备“http://url/Action?Name=x&Surname=y&IsPerion=0”形式的链接，以便 ModelBinder 可以识别它并绑定到 Action 参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T14:58:21.680

你试过这个吗，

```
<img src="@Url.Action("DisplayData", "Home", Model)" alt="Image" /> 
```

# google-chrome - Chrome中的全屏背景图像错误

> ID：13085915
> 
> 赞同：1
> 
> 时间：2012-10-26T11:16:05.053
> 
> 标签：google-chrome, background, border, fullscreen

我正在尝试在我的一个项目上应用全屏背景图像。它在 IE9 和 Firefox 中运行良好，但我一直在努力解决 Chrome 上的一个问题，因为它在顶部和左侧添加了一些 1px 边框。

截图：[这里](http://i.imgur.com/qB6wh.jpg)

我试图应用边框：0；但仍然没有。

```
 <img src="./images/highway.jpg" class="background-image" alt="background-image" />

    img.background-image {
    /* Set rules to fill background */
    min-height: 100%;
    min-width: 960px;

    /* Set up proportionate scaling */
    width: 100%;
    height: auto;

    /* Set up positioning */
    position: fixed;
    top: 0;
    left: 0;

    }

@media screen and (max-width: 1024px) { /* Specific to this particular image */
    img.background-image {
        left: 50%;
        margin-left: -512px;   /* 50% */
    }
} 
```

任何人都知道可能导致这种情况的原因是什么？将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:47:25.247

我也有同样的问题，是Chrome的bug，他们知道那个bug，但是我认为google不会修复这个bug，自从bug出现以来已经10多个版本了，他们仍然没有修复......

如果您神奇地更改窗口的大小，则 1px 会消失（并重新出现，具体取决于 Chrome 内部的某些东西）...

尝试把 background-attachment: 固定，有时它解决了这个错误（但你的背景失去了滚动运动）。

# json - 将 JSON 解组为映射/字符串列表

> ID：13085921
> 
> 赞同：5
> 
> 时间：2012-10-26T11:16:46.470
> 
> 标签：json, apache-camel

我想将 Json 解组为 Map/List of Strings（例如 Map>...）

这是我的输入：

```
{"pointsOfSale": 
{"pointOfSale":[ 
{"href":"\/pointsOfSale\/UUID.0abc2aca-7930-4c9e-9f38-8af3d0692e04", 
"model":{"href":"\/models\/modelePointOfSale", 
"modelType":{"href":"\/modelTypes\/pointOfSale"}}, 
"source":{"href":"\/sources\/TEST"}, 
"attribute":[ 
{"code":"pointOfSalePhysical","value":true}, 
{"code":"mail","value":"Mail1"}, 
{"code":"adresse","value":"address1"}]}, 
{"href":"\/pointsOfSale\/UUID.a12e7adf-652a-4197-91bf-d4785e43f09f", 
"model":{"href":"\/models\/modelePointOfSale", 
"modelType":{"href":"\/modelTypes\/pointOfSale"}}, 
"source":{"href":"\/sources\/Wikeo"}, 
"attribute":[ 
{"code":"pointOfSalePhysical","value":false}, 
{"code":"mail","value":"Mail1"}, 
{"code":"adresseMateriau","value":"Material address1"}]} 
}} 
```

我希望能够在解组后做这样的“事情”：

```
myJsonMapped.get("pointsOfSale").get("pointOfSale").get(0).get("source").get("href").equals("\/sources\/TEST") == true 
```

例如，使用 Gson 我们可以进行这种解码：

```
new Gson().fromJson(json, Map.class); 
```

我知道我可以用一个简单的 bean 或处理器等来做到这一点......

我只是想知道我可以使用本机 JSON 骆驼组件配置更有效地做到这一点

编辑：我已经尝试了不同的东西： unmarshal().json()... 或 unmarshal().json(JsonLibrary.Gson, Map.class).. etc... 没有成功:'(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T09:10:58.960

你可以用杰克逊做这样的事情。

```
<dataFormats>
  <json id="jack" library="Jackson"/>
</dataFormats>

...

<route>
  <from uri="direct:test"/>
  <unmarshal ref="jack"/>
  <process ref="something"/>
</route> 
```

或者在带有gson的java中：

```
 from("foo:bar")
    .unmarshal().json(JsonLibrary.Gson,Map.class)
    .to("foo:baz"); 
```

如果你没有让它工作，请说明错误等等。

# bash - 目录中每个文件夹的for循环，不包括其中一些

> ID：13085929
> 
> 赞同：12
> 
> 时间：2012-10-26T11:17:25.313
> 
> 标签：bash, for-loop

非常感谢您的帮助！

我在 bash 中有这段代码：

```
for d in this_folder/*    
    do    
        plugin=$(basename $d)
        echo $plugin'?'
        read $plugin
    done 
```

这就像一个魅力。对于“this_folder”中的每个文件夹，将其作为问题回显并将输入存储到具有相同名称的变量中。

但是现在我想排除一些文件夹，例如，它会询问该目录中的每个文件夹，前提是它们不是以下文件夹中的任何一个：全局、插件和 css。

任何想法我怎样才能做到这一点？

谢谢！

更新：

这是最终代码的样子：

```
base="coordfinder|editor_and_options|global|gyro|movecamera|orientation|sa"

> vt_conf.sh
echo "# ========== Base"     >> vt_conf.sh
for d in $orig_include/@($base)
do
    plugin=$(basename $d)
    echo "$plugin=y"         >> vt_conf.sh
done
echo ''                      >> vt_conf.sh
echo "# ========== Optional" >> vt_conf.sh
for d in $orig_include/!($base)
do
    plugin=$(basename $d)
    echo "$plugin=n"         >> vt_conf.sh
done 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T12:59:04.420

如果您有最新版本的 bash，则可以使用扩展的 glob ( `shopt -s extglob`)：

```
shopt -s extglob

for d in this_folder/!(global|plugins|css)/   
do    
    plugin=$(basename "$d")
    echo $plugin'?'
    read $plugin
done 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-26T12:21:00.970

您可以使用`continue`跳过循环的一次迭代：

```
for d in this_folder/*    
    do    
        plugin=$(basename $d)
        [[ $plugin =~ ^(global|plugins|css)$ ]] && continue
        echo $plugin'?'
        read $plugin
    done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:53:50.820

如果您打算仅排除名为 global、css、plugins 的目录。这可能不是一个优雅的解决方案，但会做你想做的事。

```
for d in this_folder/*    
do  
    flag=1
    #scan through the path if it contains that string
    for i in "/css/" "/plugins/" "/global/"
    do

    if [[ $( echo "$d"|grep "$i" ) && $? -eq 0 ]]
    then
      flag=0;break;
    fi
    done

    #Only if the directory path does NOT contain those strings proceed
    if [[ $flag -eq 0 ]]
    then
    plugin=$(basename $d)
    echo $plugin'?'
    read $plugin
    fi

done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:47:57.717

您可以使用`find`and`awk`构建目录列表，然后将结果存储在变量中。与此类似的东西（未经测试）：

```
dirs=$(find this_folder -maxdepth 1 -type d -printf "%f\n" | awk '!match($0,/^(global|plugins|css)$/)')
for d in $dirs; do
    # ...
done 
```

* * *

2019 年 5 月 16 日更新：

```
while read -r d; do
    # ...
done < <(gfind  -maxdepth 1 -type d -printf "%f\n" | awk '!match($0,/^(global|plugins|css)$/)') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-21T19:34:30.877

虽然[How to exclude some files from the loop in shell script](https://stackoverflow.com/questions/60303268/how-to-exclude-some-files-from-the-loop-in-shell-script)被标记为此 Q/A 的欺骗并关闭，但 Q 专门询问了如何在 BASH 脚本中排除***文件***，这正是我所需要的（在脚本中检查本地 URL 中链接片段（# 之后的部分）的有效性。这是我的解决方案。

```
 for FILE in *
    do
        ## https://linuxize.com/post/how-to-check-if-string-contains-substring-in-bash/
        if [[ "$FILE" == *"cnp_"* ]]
        then
            echo 'cnp_* file found; skipping'
            continue
        fi
        ## rest of script
    done 
```

输出：

```
 cnp_* file found; skipping

    ----------------------------------------
    FILE: 1 | NAME: linkchecker-test_file1.html
    PATH: /mnt/Vancouver/domains/buriedtruth.com/linkchecker-tests/linkchecker-test_file1.html

     RAW LINE: #bookmark1
    FULL PATH: /mnt/Vancouver/domains/buriedtruth.com/linkchecker-tests/linkchecker-test_file1.html#bookmark1
         LINK: /mnt/Vancouver/domains/buriedtruth.com/linkchecker-tests/linkchecker-test_file1.html
     FRAGMENT: bookmark1
       STATUS: OK
    ... 
```

我的测试目录包含 3 个文件，其中一个我想排除（旧网站的网页抓取：包含大量已弃用链接片段的索引）。

```
[victoria@victoria link_fragment_tester]$ tree
.
├── cnp_members-index.html
├── linkchecker-test_file1.html -> /mnt/Vancouver/domains/buriedtruth.com/linkchecker-tests/linkchecker-test_file1.html
└── linkchecker-test_file2.html -> /mnt/Vancouver/domains/buriedtruth.com/linkchecker-tests/linkchecker-test_file2.html

0 directories, 3 files
[victoria@victoria link_fragment_tester]$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-06T17:57:02.587

拆分路径，检查要忽略的每个文件夹名称。
**如果您以后想增加要忽略的文件夹的数量，这种忽略文件夹的方式很方便**。（它们在这里存储在被忽略的文件夹中）。
在代码中添加了注释。
这在 Ubuntu 20.04.2 中对我来说很好用

```
#!/bin/bash
shopt -s globstar #necessary for search ./**/*
ignoredfolders=("folder1name" "folder2name")

for i in ./**/*
do
    #pattern for splitting forward slashes into empty spaces
    ARRAY=(${i//\//" "} ); 
    for k in "${ignoredfolders[@]}"; do
        #does path (splitted in ARRAY) contain a foldername ($k) to be ignored? 
        if [[ " ${ARRAY[@]} " =~  "$k"  ]]; then
            #this skips this loop and the outer loop
            continue 2
        fi
    done
    # all ignored folders are ignored, you code sits here...
    #code ...
    #code ...

done 
```

# seo - 在这种情况下使用名称是个好主意吗？

> ID：13085931
> 
> 赞同：4
> 
> 时间：2012-10-26T11:17:35.487
> 
> 标签：seo, search-engine, yahoo, bing

我有一个由大约 200 个博客组成的网络（Wordpress 多站点），所有这些都在右侧的侧边栏中显示指向所有其他博客的链接（基本上每个页面右侧有 200 多个链接）。我现在将其设置为 rel="nofollow"，但我想知道将其更改为 rel="noindex, nofollow" 是否是个好主意？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T12:37:59.070

## 不关注

`nofollow`仅表示机器人*不应*遵循此链接。如果您只关心 Google（如您的标签所示），这可能会有所帮助：

> **Google 如何处理 nofollowed 链接？**
> 
> 一般来说，我们不跟随他们。这意味着 Google 不会通过这些链接传输 PageRank 或锚文本。从本质上讲，使用 nofollow 会导致我们从整个网络图表中删除目标链接。但是，如果其他网站在没有使用 nofollow 的情况下链接到目标页面，或者如果 URL 在站点地图中提交给 Google，则目标页面可能仍会出现在我们的索引中。此外，重要的是要注意其他搜索引擎可能以略有不同的方式处理nofollow。 [[资源]](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)

但是，添加此属性绝不是硬性限制，没有标准，有些机器人可能会完全忽略它。此外，搜索引擎*仍*可能根据内容/链接比率将该页面标记为链接构建站点。

## 无索引

`noindex`谷歌没有在链接中使用（我不知道其他人）。它`<meta>`适用于 html 标头中的 robots 属性，适用于整个页面。所以它很可能对你没有用。例子：

```
<meta name="robots" content="noindex"/> 
```

## 链接建设

然而，200 个链接也不是很友好。您应该认真考虑通过（例如）选择具有相似主题的链接来减少链接的数量。

当您阅读本文时，请向右看，是的，在 Stack Overflow 上，有一个名为“**相关**”的“框” 。这就是你的做法。想象一下，他们把*曾经创建的每一个主题都*放在那里......不是很有用。

此外，如果您按照我上面建议的逻辑执行此操作，而不仅仅是从列表中随机选择 N 个链接，您可能可以删除`nofollow`，因为这些链接将变得有用并且 Google 喜欢有用的链接。

然后，您还可以为低流量站点添加“聚光灯”（尽管这些站点可能需要 nofollow）

# c# - 如何在 Quartz.NET 2.0 中将 cron misfire-instruction FireOnceNow 与 AdoJobStore 一起使用？

> ID：13085934
> 
> 赞同：0
> 
> 时间：2012-10-26T11:18:01.287
> 
> 标签：AdoJobStore, c#, quartz.net, crontrigger, quartz.net-2.0, misfire-instruction

我在使用[AdoJobStore](/questions/tagged/quartz.net-2.0 "显示标记为“quartz.net-2.0”的问题")设置并使用`XMLSchedulingDataProcessorPlugin`.

`cron-expression`已设置，因此作业将每 1 分钟触发一次：`0 0/1 * * * ?`.

作业调度程序设置为在`Global.asax.cs`.

预期行为：如果服务器在应触发作业时停止但在下一次触发之前重新启动，则应立即触发一次。

**例子：**

*第一份工作在00:01:00*触发。

*我在00:02:00*可以触发之前停止服务器，但在它应该触发后几秒钟启动它，比如说*00:02:10*。

当我重新启动服务器时（在*00:02:10*），我希望在 00:02:00 失败的作业*会*触发一次，然后正常的触发行为将继续。

真正发生的是什么都没有触发。它只是从*00:03:00*继续触发。

任何想法我必须做些什么才能使其按预期工作？

谢谢你的帮助！

@Global.asax.cs：

```
private IScheduler scheduler;

protected void Application_Start(object sender, EventArgs e)
{
    var factory = new StdSchedulerFactory();
    scheduler = factory.GetScheduler();
    scheduler.Start();
} 
```

@quartz_jobs.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<job-scheduling-data xmlns="http://quartznet.sourceforge.net/JobSchedulingData"
                     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     version="2.0">
  <processing-directives>
    <overwrite-existing-data>true</overwrite-existing-data>
  </processing-directives>
  <schedule>
    <job>
      <name>TestJob</name>
      <group>Default</group>
      <job-type>BO.TestJob, BO</job-type>
      <durable>true</durable>
      <recover>true</recover>
    </job>
    <trigger>
      <cron>
        <name>TestCron</name>
        <group>Default</group>
        <job-name>TestJob</job-name>
        <job-group>Default</job-group>
        <misfire-instruction>FireOnceNow</misfire-instruction>
        <cron-expression>0 0/1 * * * ?</cron-expression>
      </cron>
    </trigger>
  </schedule>
</job-scheduling-data> 
```

@web.config：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="log4net.Internal.Debug" value="false"/>
  </appSettings>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
        <arg key="configType" value="INLINE"/>
        <arg key="configFile" value="Trace/application.log.txt"/>
        <arg key="level" value="ALL" />
      </factoryAdapter>
    </logging>
  </common>
  <log4net>
    <appender name="GeneralLog" type="log4net.Appender.RollingFileAppender">
      <file value="Trace/application.log.txt"/>
      <appendToFile value="true"/>
      <maximumFileSize value="1024KB"/>
      <rollingStyle value="Size"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d{HH:mm:ss} [%t] %-5p %c - %m%n"/>
      </layout>
    </appender>
    <root>
      <level value="ALL"/>
      <appender-ref ref="GeneralLog"/>
    </root>
  </log4net>
  <quartz>
    <add key="quartz.scheduler.instanceName" value="TestQuartzServer" />
    <add key="quartz.scheduler.instanceId" value="instance_one" />
    <add key="quartz.threadPool.threadCount" value="10" />
    <add key="quartz.threadPool.threadPriority" value="Normal" />
    <add key="quartz.jobStore.misfireThreshold" value="3000" />
    <add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
    <add key="quartz.jobStore.driverDelegateType" value="Quartz.Impl.AdoJobStore.StdAdoDelegate, Quartz" />
    <add key="quartz.jobStore.useProperties" value="false" />
    <add key="quartz.jobStore.dataSource" value="default" />
    <add key="quartz.jobStore.tablePrefix" value="qrtz_" />
    <add key="quartz.jobStore.lockHandler.type" value="Quartz.Impl.AdoJobStore.SimpleSemaphore, Quartz" />
    <add key="quartz.dataSource.default.connectionStringName" value="PostgreSqlDb" />
    <add key="quartz.dataSource.default.provider" value="Npgsql-20" />
    <add key="quartz.plugin.xml.type" value="Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz" />
    <add key="quartz.plugin.xml.fileNames" value="~/quartz_jobs.xml" />
    <add key="quartz.plugin.xml.scanInterval" value="10" />
  </quartz>
  <connectionStrings>
    <add name="PostgreSqlDb" connectionString="Server=localhost;database=quartz_net;User ID=*****;Password=*****;" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
</configuration> 
```

@TestJob.cs：

```
using System;
using System.Diagnostics;
using Quartz;

namespace BO
{
    public class TestJob : IJob
    {
        public void Execute(IJobExecutionContext context)
        {
            Debug.WriteLine("@{0}: {1}", DateTime.Now, context.JobDetail.Key);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:37:29.183

问题在于，失火动作正常工作所需的触发数据在每次自动处理`quartz_jobs.xml`.

因此`overwrite-existing-data`，触发器在失火后需要设置为 false 才能工作：

```
<processing-directives>
  <overwrite-existing-data>false</overwrite-existing-data>
  <ignore-duplicates>true</ignore-duplicates>
</processing-directives> 
```

# javascript - 如何获得用 CSS 编写的 div 的宽度

> ID：13085936
> 
> 赞同：6
> 
> 时间：2012-10-26T11:18:03.303
> 
> 标签：javascript, jquery, html

我想要开发人员指定的 div 元素的宽度。意味着如果你写，它会以**px**`$('body').width()`为单位为你提供宽度，无论你是否指定了它。

 **我需要在 CSS/JavaScript 中指定的 div 的宽度，但不是由 jQuery 计算的（实际上没有指定但被继承）。

如果没有指定宽度，那么我需要知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:24:31.380

```
<style type="text/css">
    .largeField {
        width: 65%;
    }
</style>
<script>
    var rules = document.styleSheets[0].rules || document.styleSheets[0].cssRules;
    for (var i=0; rules.length; i++) {
        var rule = rules[i];
        if (rule.selectorText.toLowerCase() == ".largefield") {
            alert(rule.style.getPropertyValue("width"));
        }
    }
</script> 
```

可能与[在 jQuery 中获取 CSS 规则的百分比值](https://stackoverflow.com/questions/744319/get-css-rules-percentage-value-in-jquery)或在 jQuery[中获取全局样式表的值重复](https://stackoverflow.com/questions/7131462/getting-values-of-global-stylesheet-in-jquery/7132264#7132264)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:53:23.643

下面的代码将遍历所有样式表以及匹配元素的样式属性。此函数将返回一个宽度数组。

```
function getCSSWidths( id ) {

    var stylesheets = document.styleSheets;
    var widths = [];
    var styleWidth;

    // loop through each stylesheet
    $.each( stylesheets, function( i, sheet ) {

        var len = ( sheet.rules.length || sheet.cssRules.length );
        var rules = sheet.rules || sheet.cssRules;

        // loop through rules
        for (var i=0; i < len; i++) {

            var rule = rules[i];

            // if width is specified in css add to widths array
            if (rule.selectorText.toLowerCase() == "#" + id.toLowerCase() ) {
                widths.push( rule.style.getPropertyValue("width"));
            }
        }
    });

    var el = document.getElementById( id );

    // get width specified in the html style attribute
    if( el && el.style && el.style.width ) {
        widths.push( el.style.width );
    }

    return widths;
}

getCSSWidths( "test" ); 
```

[在这里](http://jsfiddle.net/bruno/MTAu9/5/)提琴

尽管可以在 selectorText 中指定多个选择器，但我可以看到一个问题，即

```
#id1, #id2, .class1 {
    // properties
} 
```

在这些情况下，作为参数传入的 id 将与 selectorText 属性不匹配。也许有人可以想出一个匹配指定 id 的正则表达式:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:34:50.697

对于Javascript指定的宽度，你可以试试这个：

`document.getElementById("myDivElement").style.width`

如果上面返回一个空字符串，则表示它没有被 Javascript 指定。

对于通过 CSS 指定的规则，找到元素的类名，然后找到为该类指定的规则：

`var className = document.getElementById("myDivElement").className;`

var cssWidth = getWidthFromClassname(className);

现在您需要定义`getWidthFromClassname`：

```
function getWidthFromClassname(className)
{
    var reqWidth;
    var classes = document.styleSheets[0].rules || document.styleSheets[0].cssRules
    for(var x=0;x<classes.length;x++) {
        if(classes[x].selectorText==className) {
             reqWidth = classes[x].style.getPropertyValue("width");
             break;
        }
    }

    return reqWidth;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:22:11.723

```
document.getElementById('divid').style.width 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T11:25:26.777

您可以使用该`clientWidth`属性，它计算元素的实际宽度，无论是通过 CSS 设置还是文档的自然流动：

```
document.getElementById('divId').clientWidth 
```

如果您想要带有边距/填充/边框的完整内容宽度，您可以使用`offsetWidth`：

```
document.getElementById('divId').offsetWidth 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)
[https://developer.mozilla.org/en-US/docs/DOM/element.clientWidth](https://developer.mozilla.org/en-US/docs/DOM/element.clientWidth)**

# java - Eclipse 在项目资源管理器中未显示编译错误

> ID：13085938
> 
> 赞同：30
> 
> 时间：2012-10-26T11:18:20.090
> 
> 标签：java, eclipse

我正在使用带有 Java 1.7 的 Eclipse Juno，并且我创建了一个测试项目。现在问题出在项目资源管理器上。如果类有任何错误，项目资源管理器不会显示编译错误。我清理、关闭和重建项目，但没有任何改变。它仍然没有在项目浏览器中显示错误。它在 Helios 上运行良好。 ![在此处输入图像描述](../Images/1ed55be1e281b7b1a4abba9c50159e09.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T11:20:09.903

正如我在您的项目资源管理器中看到的，您的项目名称上有一个**红色感叹号**，这意味着您的项目中的构建路径存在问题。有关更多详细信息，请参见[此处](http://archive.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/eclipse-news-part2.html#JavaViews)。

通过右键单击项目并选择构建路径 - > 配置构建路径来检查项目的构建路径。我经常遇到的一个问题是不同的人使用不同的 Java SDK，因此当您的机器上没有确切的 SDK 时，您需要更改为您的 Java SDK（通过`JRE System Library -> Alternate JRE`）。避免此问题的更好方法是始终从 Workspace 默认 JRE 或执行环境中选择 JRE 系统库。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-23T09:47:27.040

您是否检查了项目/自动构建？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-02T06:48:49.670

我有同样的问题。我检查了`.classpath`Eclipse 项目的文件。它的值不正确，`src`因此它指向错误的 Java 文件源。

我的文件输入不正确：

```
<classpathentry kind="src" path="src"/> 
```

我将其更改为正确的条目：

```
<classpathentry kind="src" path="source/java"/> 
```

现在，它的工作:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-28T15:30:51.227

您可以通过右键单击问题窗格中的错误并选择显示然后选择包资源管理器来将错误恢复到包资源管理器。

[![将错误恢复到包资源管理器](../Images/06faa4eb62ce8d093be45dd466e11b75.png)](https://i.stack.imgur.com/4iPge.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-26T11:39:52.033

设置构建路径和 java 编译器：

脚步：

1.  右键单击项目并转到属性。
2.  转到java构建路径，将jre版本设置为jdk5或更高。（无论你有你的系统）。
3.  转到 java 编译器并将 java 版本设置为与 jre 兼容（在 java 构建路径中设置）。
4.  刷新项目后可能会出现编译错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-31T07:22:14.537

设置您的错误/警告：

脚步：

1）右键单击项目并转到属性。
2) 选择 Java 编译器 -> 错误/警告。
3）选中“启用项目特定设置”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-11T03:39:28.490

您必须检查构建路径配置以指向适当的 /src 源 java 文件夹，执行 eclipse 项目的清理以及 maven 清理。我遇到过同样的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-02T20:58:02.317

在 eclipse 中，您可以右键单击一个项目并转到 Maven-->Update Maven Project，这将告诉 eclipse 根据当前的 pom.xml 更新其所有本地项目设置（例如源和构建路径）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-03T09:13:52.520

我在 Eclipse Photon 中遇到过类似的问题。我已经清理、更新并构建了该项目，但没有任何效果。然后我发现我在首选项中禁用了问题报告。这是我为解决问题所做的工作：

Preferences-->>Editor--> Checked report questions as you type 复选框

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-14T12:01:26.077

我`AspectJ`在我的项目上启用了，这就是问题的根源。

所以：

右键单击我的项目`AspectJ Tools`，，`Remove AspectJ Compatibility`。`Configuration`然后用右键单击再次添加它，然后`AspectJ`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-04T00:41:51.413

我创建了一个嵌套项目并通过刷新将其导入，但要使其被确认为需要编译的项目，我还必须将其作为项目导入： [![在此处输入图像描述](../Images/a037bef7244cdc1c17177fefad526e30.png)](https://i.stack.imgur.com/QE37o.png)

然后，我还必须双击“问题”窗口中的一个编译错误，以便在源代码文件本身中突出显示错误：

[![在此处输入图像描述](../Images/b779c65a0d1c98e44d13e7ee9f095a65.png)](https://i.stack.imgur.com/znW6A.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-31T13:59:42.163

转到eclipse项目->检查自动生成。它将解决问题。我有同样的问题并像这样解决。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-22T06:24:37.247

检查你的类包，它应该在 下`src/main/java`，如果包与那个不同，编译器将无法读取类并且不会显示编译错误。

# java - 如何处理数据库崩溃（Glassfish/MySQL）？

> ID：13085944
> 
> 赞同：8
> 
> 时间：2012-10-26T11:18:35.587
> 
> 标签：java, mysql, exception, glassfish

我有一个带有 Glassfish 3.1.2.2、MySQL 数据库和一个 Swing 客户端应用程序的 3 层应用程序。是否有可能处理数据库服务器崩溃？

我试图在我的应用程序运行期间停止 MySQL 服务。然后，每当我尝试通过我的外观会话 bean 之一访问数据库时，我都会得到 javax.ejb.EJBAccessException 异常。

我想通知用户数据库当前已关闭。此外，我想将我的应用程序设置为“睡眠模式”，直到数据库重新启动并运行。

什么是处理这种情况的好方法（并且可能是简单的）？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-06T04:18:33.237

**A) 确保为自动恢复/重新连接配置 Glassfish 连接池**

在 Glassfish JDBC 连接池配置中，设置以下值：

*   属性：`is-connection-validation-required, validate-atmost-once-period-in-seconds, connection-creation-retry-attempts, connection-validation-method, connection-creation-retry-interval-in-seconds, ping`

[Glassfish 配置 jdbc-connection-pool 属性](http://docs.oracle.com/cd/E19798-01/821-1750/6nmnbjlfi/index.html#jdbc-connection-pool)
[Glassfish 管理员 - create-jdbc-connection-pool 子命令](http://docs.oracle.com/cd/E26576_01/doc.312/e24938/create-jdbc-connection-pool.htm#GSRFM00036)

脚步：

1.  假设 Glassfish 正在运行（例如，在 Netbeans 服务选项卡中启动服务器，通过打开服务器并右键单击 Glassfish），那么您应该运行域管理服务器
2.  在 Web 浏览器中打开管理控制台：（ `http://localhost:4848` 或使用您在安装期间指定的任何端口。
3.  在左侧，在 Common Tasks 菜单下，打开 Resources -> JDBC 并单击 JDBC Connection Pools
4.  单击您的连接池 POOL NAME（或通过单击新建按钮创建一个新连接池）
5.  选择高级选项卡并输入：
6.  最多验证一次：（例如 60）在几秒钟内
7.  创建重试尝试：（例如 3）
8.  重试间隔：（例如 10）以秒为单位
9.  连接验证：（打勾）必填
10.  验证方法：（例如自动提交）
11.  其他所需的高级属性
12.  选择常规选项卡并输入：
13.  平（打勾）
14.  其他所需的一般属性

**B) 实施应用程序错误处理/数据库监控和警报**

1.  强制：捕获“基础设施级别”的致命用户错误并提醒支持人员。

    创建一个简单的 JMX 类以发送通知并在发生致命错误时调用其方法[发送通知的 JMX MBean 类](http://docs.oracle.com/javase/tutorial/jmx/notifs/index.html)。您可以使用 JMX 监控控制台来观察服务器的状态 - 其中一些控制台发送电子邮件警报（例如 JManage 和 RHQ），并且有用于从 HTTP/AJax 或其他语言访问的桥梁（例如，[Jolokia](http://www.jolokia.org/features-nb.html%20Jolokia)可以使用 javascript/perl/java API访问 JMX 通知）。

    使用[Google 日历 API](https://developers.google.com/google-apps/calendar/)将错误消息发送到支持员工的 google 日历（未来 1 或 2 分钟）。然后配置谷歌日历以发送电子邮件/短信通知 - 将向支持人员近实时地直接提供错误警报。这受 Google 使用限制（每天 10,000 个查询的礼貌限制，因此请确保您的应用程序没有超级错误并使用逻辑来限制每小时/每天/每周发送的消息数量）

2.  理想的：监控数据库（可能还有应用程序服务器）并提醒支持人员出现中断

    *   Zabbix 开源内置了 mySQL 监控和警报 - 轻量级但需要设置和配置
    *   Hyperic 开源具有用于 mySQL 监控和内置警报的扩展插件 - 重量级，设置和配置可能很复杂
    *   Nagois 开源是 *nix 操作系统的默认值 - 重量很重，设置和配置可能很复杂

    在所有情况下，设置都不会立即发生 - 最好作为一个单独的迷你项目实施并正确执行 - 最好让支持人员参与其中。

    如果这些“超出范围”，则创建您自己的简单监视器：

    *   一个 EJB 计时器，用于对您的 DB 运行预定的简单测试查询 - 如果它失败发送警报（通过 JMX/Google 日历/Java 邮件/SMS 网关 API）。或者使用 Quartz 开源调度器来做同样的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T15:25:53.363

它自己的连接池将监视数据库的状态。您可以创建一个拦截器并在 db 出现故障时拾取。容器将尝试重新连接，但您不一定知道它何时成功。一旦检测到错误，您需要在某处设置信号量。然后你必须启动一个计时器来定期检查数据库的状态，并在信号量返回后重置它。最后，您必须对应用程序进行编码以尊重信号量。

这是一个高水平的建议。祝你好运。

或者，您也许可以使用 JMX 挂钩所有事件……不过我不确定。

# python - Gmail 的 Django 库

> ID：13085946
> 
> 赞同：3
> 
> 时间：2012-10-26T11:18:41.680
> 
> 标签：python, django, gmail, gmail-imap

我正在寻找一个 API 或库，可以让我从 Django Web 应用程序访问 Gmail 的所有功能。

我知道我可以使用 IMAP 或 POP3 接收和发送电子邮件。但是，我正在寻找的是所有 GMail 功能，例如用星号或重要标记标记电子邮件、添加或删除标签等。

我知道有一个设置 API 允许我创建或删除标签和过滤器，但我还没有找到任何实际允许我为电子邮件设置标签或将电子邮件设置为加星标等的东西。

谁能给我指点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:24:15.203

Google 提供了[GMail API](https://developers.google.com/google-apps/gmail/)。特别注意之前链接文档的[IMAP 扩展](https://developers.google.com/google-apps/gmail/#imap_extensions)部分，特别是[访问 Gmail 标签：X-GM-LABELS](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels) *（感谢更详细的指针@Mr.Steak）*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:58:59.923

我建议你看一下 context.io，我以前用过它，效果很好。

# c++ - 使用字符串将文件名传递给 fstream

> ID：13085949
> 
> 赞同：2
> 
> 时间：2012-10-26T11:18:53.597
> 
> 标签：c++, string, fstream

我正在使用以下方法读取一个txt文件

```
modelStream.open("file.txt", ios::in);
if (modelStream.fail())
    exit(1);
model = new Model(modelStream); 
```

但我想知道如何将字符串作为参数传递

```
string STRING;
modelStream.open(STRING, ios::in);
if (modelStream.fail())
    exit(1);
model = new Model(modelStream); 
```

有谁知道这是否可能，如果是我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:20:45.177

由于遗留原因， C++03 中的*iostreams*需要一个 C 风格、以 null 结尾的字符串作为参数，并且不理解`std::string`. 幸运的是，`std::string`可以使用以下函数生成 C 风格、以 null 结尾的字符串`std::string::c_str()`：

```
modelStream.open(STRING.c_str(), ios::in); 
```

这实际上在 C++11 中已“修复”，因此如果您使用它，您的原始代码将可以正常工作。

此外，不建议使用全大写的变量名；也不是一个名为“字符串”的变量。使名称描述含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:20:59.810

简单`c_str ()`的使用方法`std::string`

`modelStream.open(STRING.c_str (), ios::in);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:38:30.340

标准流不接受标准字符串，只接受 c 字符串！所以使用 c_str() 传递字符串：

```
modelStream.open(STRING.c_str(), ios::in); 
```

# c# - 类似“滞后”的功能

> ID：13085950
> 
> 赞同：1
> 
> 时间：2012-10-26T11:18:54.157
> 
> 标签：c#, sqlite

我在 sqlite 数据库中有很多日志数据。每分钟有一行，主键是一个日期时间字段和几个传感器（都是整数）。
我将值显示为一段时间内的图表。如果我显示所有值，则显示需要很长时间。所以我决定不显示该期间的所有行，但前提是下一行至少是比前一个晚的计算时间跨度。但是是否显示该行的决定是在从 sqlite 获取结果后做出的。是否有可能告诉 sqlite 下一行应该有一个时间戳，至少比前一行晚（可能像 oracle sql 中的“lag()”）？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:57:14.980

SQLite 没有窗口函数。

但是，作为嵌入式数据库，SQLite 与您的应用程序在同一台机器上和同一进程中运行，因此如果一条记录被读取但随后被 SQLite 本身或您的应用程序拒绝，这并没有太大的区别。

# android - 使用 setImageBitmap 来自图像 Web 的 AsyncTask ImageView

> ID：13085951
> 
> 赞同：1
> 
> 时间：2012-10-26T11:19:11.260
> 
> 标签：android

我在互联网上显示此图像时遇到问题。我不知道如何使它工作。我是安卓新手。

问题是那部分...

```
imView = (ImageView) findViewById(R.id.imageView1); 
imView.setImageBitmap(bm); //error 
```

谢谢你。

我的代码

```
public class CarregaImagem extends AsyncTask<String, Void, String>{
    String imageUrl = "http://www.cuboweb.com.br/android/images/logoconsulfarma.png";
    private ProgressDialog progress;
    private Activity activity;
    Bitmap bmImg;

    public CarregaImagem(Activity activity){
        this.activity = activity;
    }

    protected void onPreExecute() {
        progress = new ProgressDialog(activity);
        progress.setTitle("Aguarde...");
        progress.setMessage("Carregando..."); 
        progress.show();    
    }

    protected String doInBackground(String... params) { 
        // TODO Auto-generated method stub
        try { 
            URL aURL = new URL(imageUrl);
            final URLConnection conn = aURL.openConnection(); 
            conn.connect();
            final BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
            final Bitmap bm = BitmapFactory.decodeStream(bis);
            BitmapFactory.decodeStream(new URL(imageUrl).openConnection().getInputStream()); 
            bis.close();
        } catch (IOException e) { 
            imageUrl = "";
        } catch(Exception f){
            imageUrl = "";
        }
        return imageUrl;        
    }

    protected void onPostExecute(String imageUrl) {

        if(!imageUrl.equals("")){
            imView = (ImageView) findViewById(R.id.imageView1); 
            imView.setImageBitmap(bm); //error 
        } else{
            Toast.makeText(activity, "Não foi possível obter resultados", Toast.LENGTH_LONG).show();
        }           
        progress.dismiss();         
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:26:12.420

您在 doInBackground 中创建了一个您从不使用的位图。而是返回位图并在 onPostExecute 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:37:52.517

尝试下面的代码从网络下载图像并在 imageview 中显示。

```
public class MainActivity extends Activity {

    ImageView mImgView1;
    static Bitmap bm;
    ProgressDialog pd;
    String imageUrl = "https://www.morroccomethod.com/components/com_virtuemart/shop_image/category/resized/Trial_Sizes_4e4ac3b0d3491_175x175.jpg";
    BitmapFactory.Options bmOptions;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mImgView1 = (ImageView) findViewById(R.id.mImgView1);
        pd = ProgressDialog.show(MainActivity.this, "Aguarde...",
                "Carregando...");
        new ImageDownload().execute("");
    }

    public class ImageDownload extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 1;
            loadBitmap(imageUrl, bmOptions);
            return imageUrl;
        }

        protected void onPostExecute(String imageUrl) {
            pd.dismiss();
            if (!imageUrl.equals("")) {
                mImgView1.setImageBitmap(bm);
            } else {
                Toast.makeText(MainActivity.this,
                        "Não foi possível obter resultados", Toast.LENGTH_LONG)
                        .show();
            }
        }

    }

    public static Bitmap loadBitmap(String URL, BitmapFactory.Options options) {
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bm = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bm;
    }

    private static InputStream OpenHttpConnection(String strURL)
            throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
        }
        return inputStream;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T09:31:08.780

嘿，我在从 url 显示图像时遇到了同样的问题，[这个链接非常有用](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)。你也可以参考[stackoverflow讨论](https://stackoverflow.com/questions/8391420/httpurlconnection-fails-on-android-4-0)

显然 android 3 以后的网络连接很严格，因此网络连接失败

干杯!

# java - 从 servlet 运行 Mapreduce 作业

> ID：13085954
> 
> 赞同：0
> 
> 时间：2012-10-26T11:19:30.087
> 
> 标签：java, hadoop, mapreduce

我们如何从 servlet 触发 map reduce 作业？我有一个 jsp 页面，它接收来自用户的某些参数。这些参数用作 Map Reduce 作业的输入。我如何完成这项任务？

根据[http://answers.mapr.com/questions/2506/submit-mapreduce-job-remotely的建议](http://answers.mapr.com/questions/2506/submit-mapreduce-job-remotely)

我尝试设置以下 2 个属性，

```
conf.set(fs.default.name, <the ip/port>) 
conf.set(mapred.job.tracker, <the ip/port>) 
```

不幸的是，它引发了以下异常，我无法解决

java.io.IOException：无法初始化集群。请检查您的配置以获取 mapreduce.framework.name 和相应的服务器地址。

# c# - 获取 Aero 窗口颜色

> ID：13085959
> 
> 赞同：3
> 
> 时间：2012-10-26T11:19:36.437
> 
> 标签：c#, wpf, xaml, aero

我使用 WPF 制作了一个非常漂亮的 Windows 8-ish 界面。结果已经比我希望的要好得多，但我想知道以下几点：

是否有可能检索用户设置的当前窗口颜色？您知道，您可以在右键单击桌面时设置 Aero 颜色...我的计划是将该颜色用于我的 GUI 上的几个画布元素。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:56:27.693

[SystemColours](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors%28v=vs.100%29.aspx)类就是为了这个目的而存在的。您可以像这样直接绑定到它

```
"{DynamicResource {x:Static SystemColors.WindowColorKey}}" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T13:08:45.030

您可以为此查询 ColorizationColor 注册表项。

我什至更进一步，创建了一种获取十六进制颜色值的方法，希望对您有所帮助：

```
public void SomeMethod()
{
    int argbColor = (int)Microsoft.Win32.Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM","ColorizationColor", null);
    var color = System.Drawing.Color.FromArgb(argbColor);
    string hexadecimalColor = ConverterToHex(color);
}

private static String ConverterToHex(System.Drawing.Color c)
{
    return String.Format("#{0}{1}{2}", c.R.ToString("X2"), c.G.ToString("X2"), c.B.ToString("X2"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T10:34:52.600

我设法使用以下代码获得了正确的颜色： *小旁注：它有一个小的修正来忽略十六进制数的 alpha 位，所以我得到的是全色而不是饱和度较低的颜色。*

```
string colorizationValue = string.Format("{0:x}", Microsoft.Win32.Registry.GetValue(@"HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM", "ColorizationColor", "00000000"));
StringBuilder bl = new StringBuilder(colorizationValue);
bl[0] = 'd';
bl[1] = '9';
colorizationValue = bl.ToString();

BrushConverter bc = new BrushConverter();
Brush brush = (Brush)bc.ConvertFrom("#" + colorizationValue);
cvs_barColor.Background = brush; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T23:52:23.723

[我在这里](https://github.com/ffMathy/aerocolor-wpf)为此创建了一个开源库，它也可以在 NuGet 上找到。

`install-package aerocolor-wpf.AeroColor`

安装包后，你可以参考一个`DynamicResource`调用`AeroColor`并`AeroBrush`根据你的需要。

还需要一些设置代码，但并不多。只需`Loaded`在窗口的事件处理程序中放一些东西，如下所示。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Loaded += MainWindow_Loaded;
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        AeroResourceInitializer.Initialize();
    }
} 
```

这个库的巧妙之处在于它还安装了一个钩子，当系统中实际的 Aero 颜色变化时，它也会更新这些资源。这意味着您也不必处理它，并且如果您使用 a`DynamicResource`来指向 XAML 中的颜色而不是 a `StaticResource`，WPF 也会自动更新您的 UI 中的颜色。

当 Windows 8 过渡更改 Aero 颜色并且您的颜色随之变化时，看起来非常酷。

# git - Git Cherry-Pick 和 Git Revert 有什么区别？

> ID：13085961
> 
> 赞同：13
> 
> 时间：2012-10-26T11:19:48.043
> 
> 标签：git, git-revert, git-cherry-pick

我仍然发现 git revert 的行为有些令人困惑。在经历了巨大的痛苦和误解之后，我了解到 git revert*否定*了一个特定的提交，而不是恢复*到* 那个提交。到目前为止，我还没有使用过 git cherry-pick。

你能详细说明这两个 git 命令吗？您喜欢何时以及如何使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T11:41:19.463

`git cherry-pick`就像“将指定的提交转换为补丁并在此处应用此补丁”。

`git revert`就像“将指定的提交转换为补丁，'反转'这个补丁（如 in `patch -R`）并在此处应用它”。

这两个命令都可能导致冲突。

Cherry-pick 用于未合并（当前提交的父链接无法访问）提交。Revert 通常用于合并的提交。

撤消恢复提交需要进行另一个恢复提交（导致提交消息，如“Revert of 'Revert of ...'”），而不是挑选恢复提交（因为它被认为已经合并）。

# css - Twitter Bootstrap - 全宽导航栏

> ID：13085962
> 
> 赞同：28
> 
> 时间：2012-10-26T11:19:49.260
> 
> 标签：css, twitter-bootstrap, navbar

以 TB 为例，我有一个导航栏，其标记如下：

```
<div class="container">
    <div class="navbar">
        <div class="navbar-inner">
                   <!-- nav bar items here -->
        </div>
    </div>
</div> 
```

我希望它跨越屏幕的整个宽度并且没有任何圆角 - 类似于导航栏的静态顶部样式。

我似乎无法在 TB 中找到如何做到这一点。如果没有办法，我需要什么 CSS 来覆盖 TB 而不会破坏响应能力？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-02-20T10:35:26.050

只需将类容器更改为 container-fullwidth，如下所示：

```
<div class="container-fullwidth"> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-06T19:01:46.230

不确定该`navbar-static-top`课程是否在 2.2.2 版之前可用，但我认为您可以通过以下方式实现您的目标：

```
<div class="navbar navbar-static-top">
    <div class="navbar-inner">
        <ul class="nav">
            <li class="active"><a href="#">Test1</a></li>
            <li><a href="#">Test2</a></li>
            <li><a href="#">Test3</a></li>
            <li><a href="#">Test4</a></li>
            <li><a href="#">Test5</a></li>
        </ul>
    </div>
</div>
<div class="container">
    ...
</div> 
```

我以一个[jsFiddle 为例](http://jsfiddle.net/ahsteele/gu8rz/show)。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-26T11:24:09.710

将导航栏从容器中取出：

```
<div class="navbar">
    <div class="navbar-inner">
               <!-- nav bar items here -->
     </div>
</div>
<div class="container">

</div> 
```

编辑：

这是我使用响应式导航栏所做的。该代码适合文档正文：

```
 <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
        <div class="container">

          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </a>

          <!-- Be sure to leave the brand out there if you want it shown -->
          <a class="brand" href="#">Project name</a>

          <!-- Everything you want hidden at 940px or less, place within here -->
          <div class="nav-collapse">
          <!-- .nav, .navbar-search, .navbar-form, etc -->
          <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li class="divider-vertical"></li>
              <li><a href="#">Link</a></li>
              <li class="divider-vertical"></li>
              <li><a href="#">Link</a></li>
            </ul>
          <ul class="nav pull-right">
            <li><a href="#">Log out</a></li>
          </ul>
          </div>

          </div>
        </div>

    </div>
  <div class="container">
    <div class="row">
      <div class="span12">

      </div>
    </div>

  </div> <!-- end container -->
  <script type="text/javascript" src="/assets/js/jquery-1.8.2.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-10-10T15:16:46.830

我参加聚会很晚了，但这个答案在谷歌搜索结果中名列前茅。

Bootstrap 3 有一个内置的答案，将导航栏中的容器 div 设置为`container-fluid`，它将下降到屏幕宽度。

像这样：

```
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="/">More Stuff</a></li>
      </ul>
    </div>
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-14T11:55:55.380

**把你的`<nav>`元素从`<div class='container-fluid'>`. 例如：** -

```
<nav>
 ......nav content goes here
<nav>

<div class="container-fluid">
  <div>
   ........ other content goes here
  </div>
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T11:28:02.197

您需要将容器向下推到导航栏。

请在这里找到我的工作小提琴[http://jsfiddle.net/meetravi/aXCMW/1/](http://jsfiddle.net/meetravi/aXCMW/1/)

```
<header>

    <h2 class="title">Test</h2>
</header>
<div class="navbar">
    <div class="navbar-inner">
        <ul class="nav">
            <li class="active"><a href="#">Test1</a></li>
            <li><a href="#">Test2</a></li>
            <li><a href="#">Test3</a></li>
            <li><a href="#">Test4</a></li>
            <li><a href="#">Test5</a></li>

        </ul>
    </div>
</div>
<div class="container">

</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-22T08:50:49.340

只需替换`<div class="container">`为`<div class="container-fluid">`，即两边没有边距的容器。

我认为这是最好的解决方案，因为它避免了一些无用的覆盖并利用了内置类，它很干净。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-07T21:56:23.427

我知道我参加聚会有点晚了，但我通过调整 CSS 使宽度跨度为 100% 并将 l/r 边距设置为 0px 来解决了这个问题；

```
#div_id
{
    margin-left: 0px;
    margin-right: 0px;
    width: 100%;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-26T13:58:27.447

你可以覆盖一些CSS

```
body {
    padding-left: 0px !important;
    padding-right: 0px !important;
}

.navbar-inner {
    border-radius: 0px !important;
} 
```

`!important`以防万一您在自`bootstrap.css`定义 css 之后链接。

并将您的导航 html 添加到`.container`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-14T16:05:41.527

要删除角上的边框半径，请将此样式添加到您的 custom.css 文件中

```
 .navbar-inner{
       -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-14T16:55:01.307

您必须将 col-md-12 添加到您的内部导航栏。md 用于桌面。您可以从引导程序的选项列表中选择其他选项。col-md-12 中的 12 用于全角。如果你想要半角，你可以使用 6 而不是 12 。例如 col-md-6。

> 这是您问题的解决方案

```
 <div class="container">
       <div class="navbar">
          <div class="navbar-inner col-md-12">
               <!-- nav bar items here -->
          </div>
       </div>
   </div> 
```

# zend-framework - Zend中的随机图片

> ID：13085970
> 
> 赞同：1
> 
> 时间：2012-10-26T11:20:42.207
> 
> 标签：zend-framework, zend-session

所以，我对 Zend Framework 和 stackoverflow 很陌生（虽然我在这里读了很多书），所以请温柔一点！

我正在尝试做的是 IAPS 测试的数字版本（根据他们的兴奋和感觉对图片进行评分）。我有三组图片，每组包含 72 张图片。现在，如果一个人开始在线测试，则应随机分配一组（例如，将一组 1 分配给 A 人）。
此外，应该随机呈现集合中的每张图片。图片呈现后，该人必须对图片进行两次评分（评分等级1到3，保存到数据库中）。呈现图像和两个评分的整个过程应限制在 12 秒内。

看起来是这样的：

**[SET 1] & [SET2] & [SET3]**
取随机集（注意：只应呈现一组）

**[PIC 1] & [PIC 2] & [PIC3]** & ...
随机拍照（注意：所有 72 张图片应以随机顺序呈现）

**[PIC 1] -> 评分 1 -> 评分 2**
|... .............12 秒 ....................|

我不确定这是否可以用 Zend 进行编码。我正在考虑使用 Zend_Session 将评级存储在会话中并在最后将其保存到数据库中，但我不确定这是否是最好的方法（安全问题？）。更让我头疼的是图片的呈现和两个评分的时间限制在 12 秒。

我很高兴听到想法和想法。

ps：我使用的是 Zend Framework 1.11.12 版本
编辑：刚刚取出了同样分布的集合。大数法则说，它们将与大量样本平均分配......

# jquery - 页面性能：jquery + prototype.js

> ID：13085973
> 
> 赞同：1
> 
> 时间：2012-10-26T11:20:48.150
> 
> 标签：jquery, prototypejs

我正在整理一个使用几个 jquery 插件和一个 AJAX 下拉选项卡的[静态网站。](http://atwebpresence.com/client/orto/)
我遇到的问题是关于我认为在同时实施这两者时遵循的不好的做法。
我对页面加载有这种奇怪的影响，即标签在前几秒钟左右显示。
如果有人可以帮助 e 弄清楚如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:36:39.520

看起来您的默认 css 具有可见的选项卡，而 JS 代码的初始化是隐藏选项卡的原因。您看到的是 JS 启动之前页面的正常状态。您的 css 应该让它们默认为“隐藏”或“关闭”状态，并且 JS 应该负责在适当的时候显示选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:45:52.290

`position: absolute`要添加到@dontGoPlastic 的答案，您应该使用、`top: -224px`和的属性初始化您的 CSS 中的选项卡面板（您**可能**`z-index`不必定义，因为这是 div 的自然显示类型。**`display: block`**

 **这不仅会在看不见的地方初始化您的面板（无论 js 是否已加载），而且还允许您只设置`.animate()`div 的`top`属性，而不必在每次运行该方法时设置`position`, `z-index`, 。`display`**

# c++ - winapi中Listbox的非常简单的例子

> ID：13085974
> 
> 赞同：2
> 
> 时间：2012-10-26T11:20:52.337
> 
> 标签：c++, c, winapi

如何在 ListBox 中选择的 MessageBox 文本中显示？我尝试使用下一个代码，但它只显示空白 MessageBox

```
wchar_t listBoxStr[15];
HWND hWndList;

switch (message)
{
case WM_CREATE:
    hWndList = CreateWindowEx(WS_EX_CLIENTEDGE, TEXT("listbox"), "", WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_AUTOVSCROLL, 240, 40, 150, 20, hwnd, (HMENU)105, NULL, NULL);
    SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM)"name");
    SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM)"extension");
    SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM)"date");
    SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM)"size");
    CreateWindowEx(NULL, TEXT("button"), TEXT("FIND"), WS_VISIBLE | WS_CHILD, 410, 40, 50, 20, hwnd, (HMENU)106, NULL, NULL);
    return 0 ;
    return 0 ;
case WM_COMMAND:
    switch(LOWORD(wParam))
    {
    case 106:
        SendMessageW(hWndList, LB_GETTEXT,0,(LPARAM)listBoxStr);
        MessageBoxW(NULL, listBoxStr, L"", NULL);
        return 0;
    }
    return 0;
case WM_PAINT:
    hdc = BeginPaint (hwnd, &ps);
    GetClientRect (hwnd, &rect) ;
    EndPaint (hwnd, &ps) ;
    return 0 ;
case WM_DESTROY:
    PostQuitMessage (0) ;
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T11:45:52.833

的第一个参数`SendMessage`应该是列表框句柄，而不是父窗口句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:35:45.620

通过定义使`hWndList`静态

```
static HWND hWndList; 
```

然后像这样尝试

```
 -  SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM) L"name");
 -  SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM) L"extension");
 -  SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM) L"date");
 -  SendMessage(hWndList, LB_ADDSTRING, 0, (LPARAM) L"size"); 
```

# c# - 如何读取大文件并按“\r\n”分割

> ID：13085977
> 
> 赞同：2
> 
> 时间：2012-10-26T11:20:59.913
> 
> 标签：c#, .net

我有一个大于 200MB 的大文件。该文件是来自外部方的 CSV 文件，但遗憾的是，我不能像`\r\n`定义新行那样逐行读取文件。

目前我正在使用这种方法阅读所有行：

```
var file = File.ReadAllText(filePath, Encoding.Default);
var lines = Regex.Split(file, @"\r\n");

for (int i = 0; i < lines.Length; i++)
{
    string line = lines[i];
    ...
} 
```

我该如何优化呢？在我的 225MB 文件上调用 ReadAllText 后，该进程使用了​​超过 1GB 的 RAM。在我的情况下是否可以使用流式传输方法，我需要使用我的`\r\n`模式拆分文件？

**EDIT1：** 您使用*File.ReadLines*和*StreamReader*的解决方案将不起作用，因为它将文件中的每一行视为一行。我需要使用我的`\r\n`模式拆分文件。使用我的代码读取文件会产生 758.371 行（这是正确的），而正常的行数会产生超过 150 万行。

**解决方案**

```
public static IEnumerable<string> ReadLines(string path)
{
    const string delim = "\r\n";

    using (StreamReader sr = new StreamReader(path))
    {
        StringBuilder sb = new StringBuilder();

        while (!sr.EndOfStream)
        {
            for (int i = 0; i < delim.Length; i++)
            {
                Char c = (char)sr.Read();
                sb.Append(c);

                if (c != delim[i])
                    break;

                if (i == delim.Length - 1)
                {
                    sb.Remove(sb.Length - delim.Length, delim.Length);
                    yield return sb.ToString();
                    sb = new StringBuilder();
                    break;
                }
            }
        }

        if (sb.Length>0)
            yield return sb.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T11:23:41.723

您可以使用[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)which 返回`IEnumerable<string>`而不是将整个文件加载到内存中。

```
foreach(var line in File.ReadLines(@filePath, Encoding.Default)
                        .Where(l => !String.IsNullOrEmpty(l)))
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T11:24:25.160

使用[StreamReader](http://msdn.microsoft.com/en-us/library/6aetdk20.aspx)会很容易。

```
using (StreamReader sr = new StreamReader(path)) 
 {
      foreach(string line = GetLine(sr)) 
      {
           //
      }
 }

    IEnumerable<string> GetLine(StreamReader sr)
    {
        while (!sr.EndOfStream)
            yield return new string(GetLineChars(sr).ToArray());
    }

    IEnumerable<char> GetLineChars(StreamReader sr)
    {
        if (sr.EndOfStream)
            yield break;
        var c1 = sr.Read();
        if (c1 == '\\')
        {
            var c2 = sr.Read();
            if (c2 == 'r')
            {
                var c3 = sr.Read();
                if (c3 == '\\')
                {
                    var c4 = sr.Read();
                    if (c4 == 'n')
                    {
                        yield break;
                    }
                    else
                    {
                        yield return (char)c1;
                        yield return (char)c2;
                        yield return (char)c3;
                        yield return (char)c4;
                    }
                }
                else
                {
                    yield return (char)c1;
                    yield return (char)c2;
                    yield return (char)c3;
                }
            }
            else
            {
                yield return (char)c1;
                yield return (char)c2;
            }
        }
        else
            yield return (char)c1;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:29:12.437

怎么样

```
 StreamReader sr = new StreamReader(path);
        while (!sr.EndOfStream)
        {
                string line = sr.ReadLine();
        } 
```

使用流阅读器方法意味着整个文件不会被加载到内存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:25:19.043

使用 StreamReader 逐行读取文件：

```
using (StreamReader sr = new StreamReader(filePath))
{
  while (true)
  {
    string line = sr.ReadLine();
    if (line == null)
      break;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T12:21:13.640

这是我的午休时间：）

设置`MAXREAD`为您想要在内存中的数据量，例如使用 a，`foreach`因为我正在使用`yield return`. 使用代码需要您自担风险，我已经在较小的数据集上进行了尝试:)

您的用法将类似于：

```
foreach (var row in StreamReader(FileName).SplitByChar(new char[] {'\r','\n'}))
{
  // Do something awesome! :)
} 
```

和这样的扩展方法：

```
public static class FileStreamExtensions
{
    public static IEnumerable<string> SplitByChar(this StreamReader stream, char[] splitter)
    {
        int MAXREAD = 1024 * 1024;

        var chars = new List<char>(MAXREAD);

        var bytes = new char[MAXREAD];
        var lastStop = 0;
        var read = 0;

        while (!stream.EndOfStream)
        {
            read = stream.Read(bytes, 0, MAXREAD);
            lastStop = 0;

            for (int i = 0; i < read; i++)
            {
                if (bytes[i] == splitter[0])
                {
                    var assume = true;
                    for (int p = 1; p < splitter.Length; p++)
                    {
                        assume &= splitter[p] == bytes[i + p];
                    }

                    if (assume)
                    {
                        chars.AddRange(bytes.Skip(lastStop).Take(i - lastStop));

                        var res = new String(chars.ToArray());
                        chars.Clear();
                        yield return res;

                        i += splitter.Length - 1;
                        lastStop = i + 1;
                    }
                }
            }
            chars.AddRange(bytes.Skip(lastStop));
        }

        chars.AddRange(bytes.Skip(lastStop).Take(read - lastStop));
        yield return new String(chars.ToArray());
    }
} 
```

# jquery - Jquery 大于或小于

> ID：13085984
> 
> 赞同：0
> 
> 时间：2012-10-26T11:21:31.037
> 
> 标签：jquery

我正在尝试仅在文档宽度高于 769 像素时创建具有固定导航的响应式网站。

我有以下代码，当我使用警报测试它时，它可以正常工作，以说明窗口是否大于大小或小于重新调整大小时的大小。

但是，当我将粘性标题脚本添加到 else 语句中时，它不起作用，我不知道为什么。

谁能指出我正确的方向。

谢谢

这是窗口大小声明：

```
 $(window).resize(function() {
 if ($(window).width() < 769) {
 alert('Less than 769');
 }
 else {
 alert('More than 769');
 }
 });​ 
```

如果窗口宽度大于 769，这是我尝试使用的代码：

```
var aboveHeight = $('header').outerHeight();

$(window).scroll(function() {

    if ($(window).scrollTop() > aboveHeight) {

        $('nav').addClass('fixed').css('top', '0').next().css('padding-top', '99px');
    } else {

        $('nav').removeClass('fixed').next().css('padding-top', '0');
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:34:58.827

只需在滚动事件中保存状态蚂蚁测试

```
var isRightSize = false;

 $(window).resize(function() {
     if ($(window).width() < 769) {
         isRightSize = false;
     }
     else {
         isRightSize = true;
     }
 });​

var aboveHeight = $('header').outerHeight();

$(window).scroll(function() {

    if(!isRightSize)
        return false;

    if ($(window).scrollTop() > aboveHeight) {

        $('nav').addClass('fixed').css('top', '0').next().css('padding-top', '99px');
    } else {

        $('nav').removeClass('fixed').next().css('padding-top', '0');
    }
}); 
```

# iphone - 发布到 Facebook 的链接，包括 UIImage

> ID：13085991
> 
> 赞同：0
> 
> 时间：2012-10-26T11:21:51.053
> 
> 标签：iphone, objective-c, ios, facebook

我想将包含图片的链接发布到 Facebook 时间线：

```
UIImage *img = [UIImage imageNamed:@"1.png"];
    self.postParams =
    [[NSMutableDictionary alloc] initWithObjectsAndKeys:
     @"Here we go", @"message",
     @"https://developers.facebook.com/ios", @"link",
     UIImagePNGRepresentation(img), @"picture",
     @"Facebook SDK for iOS", @"name",
     @"Build great social apps and get more installs.", @"caption",
     @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
     nil];

    [FBRequestConnection startWithGraphPath:@"me/feed" parameters:self.postParams HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                              [self showAlert:@"Link is posted" result:result error:error];
    }]; 
```

UIImage 没有发布。你能帮助我吗？

但只要我使用：

```
@"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture" 
```

有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:05:51.193

如果您阅读[文档](https://developers.facebook.com/docs/reference/api/user/#posts)，它会说“图片”参数应该是字符串类型，即：url。如果没有一些巧妙的技巧，您无法同时发布来自移动 SDK 的图像和消息：请参阅文档中的我/照片，但您的选择受到严重限制。

# php - php表单消失

> ID：13085994
> 
> 赞同：0
> 
> 时间：2012-10-26T11:21:56.240
> 
> 标签：php, sql, forms, login, registration

在我添加 php.ini 之前，我有一个完美显示的会员注册表单。一旦添加了 php 代码，表单就会完全消失。我已经尝试了一切，但我认为在这个阶段需要一双新的眼睛。任何帮助将不胜感激。干杯。

```
<?php

if ( $_POST['registerbtn'] ) {
    $getuser = $_POST['user'];
    $getemail = $_POST['email'];
    $getpass = $_POST['pass'];
    $getretypepass = $_POST['retypepass'];

    if ($getuser) {
        if ($getemail) {
            if($getpass) {
                if ($getretypepass) {
                    if ($getpass === $getretypepass) {
                        if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, "."))) {
                            require("./connect.php");

                            $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0){
                                    $query = mysql_query("SELECT * FROM users WHERE email='$getemail'");
                                    $numrows = mysql_num_rows($query);
                                    if ($numrows == 0){

                                        $password = md5($password);
                                        $date = date("F d, Y");
                                        $code = md5(rand());

                                        mysql_query("INSERT INTO users VALUES (
                                            '', '$getuser', '$getpassword', '$getemail', '0', '$getcode', '$getdate'
                                        )");

                                        $query = mysql_query("SELECT * FROM users WHERE username='$getusername'");
                                        $numrows = mysql_num_rows($query);
                                        if ($numrows == 1) {

                                            $site ="http://localhost/member.php";
                                            $webmaster = "Bror Phren <bmdoublec@hotmail.com>";
                                            $headers = "From: $webmaster";
                                            $subject = "Activate your account";
                                            $message = "Thanks for registering. Click the link below to activate your account";
                                            $message .= "$site/activate.php?user=$getuser&code=$code\n";
                                            $message .= "You must activate your account t login.";

                                            if (mail($getemail, $subject, $message, $headers) ) {
                                                $errormsg = "You have been registered. You must activate your account from the activation link sent to <b>$getemail</b> ";
                                                $getuser = "";
                                                $getemail = "";
                                            }
                                            else
                                                $errormsg = "An error has occured. Your activation email was not sent";

                                        }
                                        else
                                            $errormsg = "An error has occured. Your account was not created.\n";

                            }
                            else
                                $errormsg = "There is already a user with that email";

                            }
                            else
                                $errormsg = "There is already a user with that username";

                            mysql_close();

                        }
                        else
                        $errormsg = "You must enter a valid email address to register.";

                }
                else
                $errormsg = "You must retype your password to register.";

            }
            else
            $errormsg = "You must enter password to register.";

        }
        else
            $errormsg = "You must enter email to register.";

    }
    else
        $errormsg = "You must enter username to register."; 
```

}

```
$form = "<form action='./register.php' method='post'>
<table>

    <tr>
    <td></td>
    <td><font color='red'>$errormsg</font></td>
    </tr>
    <tr>

    <td>Username:</td>
    <td><input type='text' name='user' value='$getuser' /></td>
    </tr>

    <tr>
    <td>Email:</td>
    <td><input type='text' name='email' value='$getemail' /></td>
    </tr>

    <tr>
    <td>Password:</td>
    <td><input type='password' name='pass' value='' /></td>
    </tr>

        <tr>
    <td>Retype:</td>
    <td><input type='password' name='retypepass' value='' /></td>
    </tr>

        <tr>
    <td>Retype:</td>
    <td><input type='submit' name='registerbtn' value='Register' /></td>
    </tr>

    </table>
</form>";

echo $form;

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:34:24.967

您的 echo 语句位于 if ( $_POST['registerbtn'] ) {} 块内，这意味着如果未提交表单，则不会显示该表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:35:20.363

您在 PHP 代码中有错误，这些错误会阻止任何东西运行。

我建议通过 PHPLint 之类的东西运行您的代码以查看错误。

此外，您可能需要考虑以更易于阅读和维护的方式构建代码。

例如，您可以避免所有那些嵌套的 if 语句并将其编写为：

```
if (!$getuser) {
   $errormsg = "You must enter username to register.";
}
else if (!$getemail) {
   $errormsg = "You must enter email to register.";
}
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:42:30.550

我认为你需要使用 else

```
<?php

if (isset($_POST['registerbtn'])) {
    $getuser = $_POST['user'];
    $getemail = $_POST['email'];
    $getpass = $_POST['pass'];
    $getretypepass = $_POST['retypepass'];

    if ($getuser) {
        if ($getemail) {
            if($getpass) {
                if ($getretypepass) {
                    if ($getpass === $getretypepass) {
                        if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, "."))) {
                            require("./connect.php");

                            $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0){
                                    $query = mysql_query("SELECT * FROM users WHERE email='$getemail'");
                                    $numrows = mysql_num_rows($query);
                                    if ($numrows == 0){

                                        $password = md5($password);
                                        $date = date("F d, Y");
                                        $code = md5(rand());

                                        mysql_query("INSERT INTO users VALUES (
                                            '', '$getuser', '$getpassword', '$getemail', '0', '$getcode', '$getdate'
                                        )");

                                        $query = mysql_query("SELECT * FROM users WHERE username='$getusername'");
                                        $numrows = mysql_num_rows($query);
                                        if ($numrows == 1) {

                                            $site ="http://localhost/member.php";
                                            $webmaster = "Bror Phren <bmdoublec@hotmail.com>";
                                            $headers = "From: $webmaster";
                                            $subject = "Activate your account";
                                            $message = "Thanks for registering. Click the link below to activate your account";
                                            $message .= "$site/activate.php?user=$getuser&code=$code\n";
                                            $message .= "You must activate your account t login.";

                                            if (mail($getemail, $subject, $message, $headers) ) {
                                                $errormsg = "You have been registered. You must activate your account from the activation link sent to <b>$getemail</b> ";
                                                $getuser = "";
                                                $getemail = "";
                                            }
                                            else
                                                $errormsg = "An error has occured. Your activation email was not sent";

                                        }
                                        else
                                            $errormsg = "An error has occured. Your account was not created.\n";

                            }
                            else
                                $errormsg = "There is already a user with that email";

                            }
                            else
                                $errormsg = "There is already a user with that username";

                            mysql_close();

                        }
                        else
                        $errormsg = "You must enter a valid email address to register.";

                }
                else
                $errormsg = "You must retype your password to register.";

            }
            else
              $errormsg = "You must enter password to register.";

        }
        else
            $errormsg = "You must enter email to register.";
    }
    else
        $errormsg = "You must enter username to register.";
}
} 
```

这里

```
else{ 
$form = "<form action='./register.php' method='post'>
<table>

    <tr>
    <td></td>
    <td><font color='red'>$errormsg</font></td>
    </tr>
    <tr>

    <td>Username:</td>
    <td><input type='text' name='user' value='$getuser' /></td>
    </tr>

    <tr>
    <td>Email:</td>
    <td><input type='text' name='email' value='$getemail' /></td>
    </tr>

    <tr>
    <td>Password:</td>
    <td><input type='password' name='pass' value='' /></td>
    </tr>

        <tr>
    <td>Retype:</td>
    <td><input type='password' name='retypepass' value='' /></td>
    </tr>

        <tr>
    <td>Retype:</td>
    <td><input type='submit' name='registerbtn' value='Register' /></td>
    </tr>

    </table>
</form>";

echo $form;

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:32:01.180

**编辑：正如 Armon Toubman 所提到的，只有在相关数据已发布到页面时才会显示该表单。您需要将表单移到 if 语句之外。请参见下面的代码：**

```
<?php

if ( $_POST['registerbtn'] ) {
    $getuser = $_POST['user'];
    $getemail = $_POST['email'];
    $getpass = $_POST['pass'];
    $getretypepass = $_POST['retypepass'];

    if ($getuser) {
        if ($getemail) {
            if($getpass) {
                if ($getretypepass) {
                    if ($getpass === $getretypepass) {
                        if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, "."))) {
                            require("./connect.php");

                            $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0){
                                    $query = mysql_query("SELECT * FROM users WHERE email='$getemail'");
                                    $numrows = mysql_num_rows($query);
                                    if ($numrows == 0){

                                        $password = md5($password);
                                        $date = date("F d, Y");
                                        $code = md5(rand());

                                        mysql_query("INSERT INTO users VALUES (
                                            '', '$getuser', '$getpassword', '$getemail', '0', '$getcode', '$getdate'
                                        )");

                                        $query = mysql_query("SELECT * FROM users WHERE username='$getusername'");
                                        $numrows = mysql_num_rows($query);
                                        if ($numrows == 1) {

                                            $site ="http://localhost/member.php";
                                            $webmaster = "Bror Phren <bmdoublec@hotmail.com>";
                                            $headers = "From: $webmaster";
                                            $subject = "Activate your account";
                                            $message = "Thanks for registering. Click the link below to activate your account";
                                            $message .= "$site/activate.php?user=$getuser&code=$code\n";
                                            $message .= "You must activate your account t login.";

                                            if (mail($getemail, $subject, $message, $headers) ) {
                                                $errormsg = "You have been registered. You must activate your account from the activation link sent to <b>$getemail</b> ";
                                                $getuser = "";
                                                $getemail = "";
                                            }
                                            else
                                                $errormsg = "An error has occured. Your activation email was not sent";
                                        }
                                        else
                                            $errormsg = "An error has occured. Your account was not created.\n";
                            }
                            else
                                $errormsg = "There is already a user with that email";
                            }
                            else
                                $errormsg = "There is already a user with that username";
                        }
                        else
                        $errormsg = "You must enter a valid email address to register.";
                }
                else
                $errormsg = "You must retype your password to register.";
            }
            else
            $errormsg = "You must enter password to register.";
        }
        else
            $errormsg = "You must enter email to register.";

    }
    else
        $errormsg = "You must enter username to register.";
    }
    mysql_close();
}
?>
<form action='./register.php' method='post'>
<table>

    <tr>
      <td></td>
      <td><font color='red'><?php if(isset($errormsg){ echo $errormsg; } ?></font></td>
    </tr>

    <tr>    
      <td>Username:</td>
      <td><input type='text' name='user' value='<?php if(isset($getuser){ echo $getuser; } ?>' /></td>
    </tr>

    <tr>
      <td>Email:</td>
      <td><input type='text' name='email' value='<?php if(isset($getemail){ echo $getemail; } ?>' /></td>
    </tr>

    <tr>
      <td>Password:</td>
      <td><input type='password' name='pass' value='' /></td>
    </tr>

    <tr>
      <td>Retype:</td>
      <td><input type='password' name='retypepass' value='' /></td>
    </tr>

    <tr>
      <td>Retype:</td>
      <td><input type='submit' name='registerbtn' value='Register' /></td>
    </tr>

    </table>
</form> 
```