# StackOverflow 问答 12898000-12898999

# sharepoint-2010 - 从 Sharepoint 2010 PeoplePicker 获取已解析的 SPUser ID

> ID：12898011
> 
> 赞同：1
> 
> 时间：2012-10-15T14:40:40.000
> 
> 标签：sharepoint-2010, peoplepicker

我尝试从人员选择器控件中获取选定的用户 ID，如下所示：

```
function GetUserIdsFromPP() {
    var xml = _picker.find('div#divEntityData');
    var visiblefor = new Array();

    xml.each(function (i, row) {
        var data = $(this).children().first('div').attr('data');
        var xmlDoc;

        if (window.DOMParser) {
            parser = new DOMParser();
            xmlDoc = parser.parseFromString(data, "text/xml");
        }
        else // Internet Explorer
        {
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.loadXML(data);
        }
        var uid = xmlDoc.getElementsByTagName('Value')[0].firstChild.nodeValue;
        visiblefor.push(uid);
    });

    return visiblefor;
} 
```

问题是有时 XML 不包含`<Key>SPUserID</Key><Value>1</Value>`并且我得到 FQUN（用户使用域名登录）。

从 PeoplePicker 控件解析选定的 SPUserId 的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:47:06.513

这就是如何从客户端的人员选择器控件中解析电子邮件

```
function GetEmailsFromPicker() {
    var xml = _picker.find('div#divEntityData');
    var result = new Array();

    xml.each(function (i, row) {
        var data = $(this).children().first('div').attr('data');
        var xmlDoc;

        if (window.DOMParser) {
            parser = new DOMParser();
            xmlDoc = parser.parseFromString(data, "text/xml");
        }
        else // Internet Explorer
        {
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.loadXML(data);
        }

        var emailIndex = -1;

        for (var i = 0; i < xmlDoc.childNodes[0].childNodes.length; i++) {
            var element = xmlDoc.childNodes[0].childNodes[i];
            var key = element.childNodes[0].childNodes[0].nodeValue;
            if (key == 'Email') {
                var uid = xmlDoc.childNodes[0].childNodes[i].childNodes[1].childNodes[0].nodeValue;
                result.push({ EMail: uid });
                break;
            }
        }
    });

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T15:32:53.207

使用上面的答案，但是...

将其替换为适当的 Jquery 或 Javascript 元素名称。

```
var xml = _picker.find('div#divEntityData'); 
```

# objective-c - 逐帧播放视频的最佳方式 - 缩放

> ID：12898013
> 
> 赞同：0
> 
> 时间：2012-10-15T14:40:43.900
> 
> 标签：objective-c, ios

我需要一些关于逐帧播放视频的建议......

现在我拍摄视频并使用 mpmovieplayer thumbnailImageAtTime 为每一帧提取所有帧。

视频也可以缩放。我通过提取上述帧然后调整大小和裁剪帧来进行缩放。

这会很好，除了 thumbnailImageAtTime 似乎很慢。我的视频时长不到 30 秒……大多数时候只有几秒钟，在 iphone 4s 上大约需要 20 秒才能抓取 60 帧。如果您认为这应该更快，我可以发布我正在使用的代码，但这很简单。我在后台线程上执行它，所以 UI 不受影响。

我一直在看 AVFoundation 来抓取帧，但读到它并不准确，我需要全部 30 fps。

我真的在寻找最好的方法来做到这一点的建议。我需要能够使用滑块和按钮来前后移动帧，以及跳转到特定帧。正如我所说，视频也可以进行数字缩放。

我是否应该不提取帧而只使用视频文件并逐帧移动？如果是这样，最好的方法是什么，因为 mpmovieplayer 似乎不允许我轻松移动到精确的帧。另外，如果我只使用视频文件，那么缩放的最佳方式是什么？我可以浏览资产的每一帧并调整大小并裁剪它然后保存回视频文件吗？这是最好的方法吗？我可以使用 AVFoundation 实现我想做的所有事情吗？

我已经尝试了大约一周的时间，并且我确实可以使用 mpmovieplayer 提取帧……速度令人无法接受。如果我可以非常快速地提取帧，那么我认为该解决方案将是最好的。我可能会提到我只需要提取一次帧，而不是每次用户点击视频时......如果这会有所不同。

我希望这一切都是有道理的，很抱歉漫无边际。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:24:41.467

经过一番研究，我将使用 AVFoundation 逐帧播放视频，而不是提取帧。它工作得很好。

# c#-4.0 - 在隔离存储上工作时调度代理上的无效交叉异常

> ID：12898018
> 
> 赞同：1
> 
> 时间：2012-10-15T14:40:57.410
> 
> 标签：c#-4.0, windows-phone-7.1, isolatedstorage

我正在使用 Windows Phone Schedule Agent 并且我正在尝试在同步后更新图片名称问题是在“BitmapImage bmp = new BitmapImage();”行的此函数上我得到一个无效的交叉异常 真的不明白为什么。

```
void UpdateSyncPictureName(int AsyncStatus, int AticketID, int AsyncID, int ApictureID, int TsyncStatus = 0, int TsyncID = 0)
    {
        string filename = AsyncStatus + "-" + AticketID + "-" + AsyncID + "-" + ApictureID;
        using (IsolatedStorageFile ISF = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (ISF.FileExists(filename))
            {

                BitmapImage bmp = new BitmapImage();
                using (IsolatedStorageFileStream isoStream =
                    ISF.OpenFile(filename, System.IO.FileMode.Open))
                {
                    bmp.SetSource(isoStream);
                }
                ISF.DeleteFile(filename);
                WriteableBitmap Wbmp = new WriteableBitmap(bmp);
                using (IsolatedStorageFileStream isoStream =
                ISF.OpenFile(TsyncStatus + "-" + AticketID + "-" + TsyncID + "-" + ApictureID, System.IO.FileMode.Create))
                {
                    Extensions.SaveJpeg(Wbmp, isoStream,
                        Wbmp.PixelWidth,
                        Wbmp.PixelHeight,
                        0, 100);
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:17:28.687

问题源于 BitmapImage 无法在 UI 线程之外实例化。您可以通过将调用包装在 Dispatcher Invoke 调用中来解决此问题。

但是，您需要确保正确调用 NotifyComplete。因此，您可能需要将 NotifyComplete 放入 Dispatcher 调用中。

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    UpdateSyncPictureName(...);
    NotifyComplete();
}); 
```

# javascript - 如何强制一个 URL 在另一个 URL 之前被访问？

> ID：12898020
> 
> 赞同：1
> 
> 时间：2012-10-15T14:41:04.040
> 
> 标签：javascript, url, web-applications

我有两个网址，`A`和`B`. 我想阻止用户直接访问`B`，并想强制执行一个“规则”，这样一个人只能在访问`B` **后**访问`A`。更具体地说，登陆的唯一途径`B`是通过重定向 on `A`。

我正在考虑使用一些 js`B`来检查`document.referrer`，如果不是，`A`则将用户重定向出去`B`。但是，这在我的情况下可能不起作用，因为*使用重定向*`B`可以达到，在这种情况下不会给我.*`document.referrer``A`*

 *如果可能的话，我还希望在*加载**内容后**不必*使用 js 进行检查，这将有助于节省一些带宽。*`B`*

是否有任何有效且稳健的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:44:56.700

您应该让页面 A 设置一个 cookie，并让页面 B 检查 cookie 的存在。它不是万无一失的，也不是 100% 健壮的，但它是在无状态应用程序（如 Web）中实施此类限制的公认方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:51:53.870

如果你想避免在 A 还没有被查看时加载 B 的内容，那么你的服务器需要在查看者查看 A 时设置一个 cookie，当你的服务器被要求 B 时，它需要检查是否存在正确的 cookie 并且不提供 B 页面内容，除非存在来自 A 的所需 cookie。您没有描述如果用户在还没有到 A 时去 B 时想要发生的事情，但是您的服务器可以设置到 A 的重定向或者可以提供用户没有在其中做任何事情的消息正确的顺序并给他们一个点击链接。

从概念上讲，这有点像在您允许查看页面 B 之前要求查看者在页面 A 上登录。登录（cookie 的设置）可以在查看页面 A 之后自动进行，或者您可以要求查看者对页面采取一些操作在设置允许访问页面 B 的 cookie 之前，页面 A（提供凭据、单击按钮等）。*

# antlr - 为什么 ANTLR 规则接受“abc123”作为数字？

> ID：12898021
> 
> 赞同：1
> 
> 时间：2012-10-15T14:41:16.130
> 
> 标签：antlr

我尝试使用 ANTLR 构造一个非常简单的规则，如下所示：

```
number :
  INT
  ;

INT : '0'..'9'+
  ; 
```

它会接受`123`as `number`，但我不确定为什么它也接受`abc123`as `number`？

如何更正要解析的规则`number`？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:33:17.953

> 但我不确定为什么它也接受 abc123 作为数字？

它没有。

也许您正在使用一些 3 ^(rd)方工具/编辑器，其中很难看到打印到控制台的错误消息，但它们就在那里。解析器可能只是从不匹配的输入中恢复，使其**看起来像** `INT`接受输入，如`"abc123"`.

# python - 用python中的另一个子列表替换一个子列表

> ID：12898023
> 
> 赞同：24
> 
> 时间：2012-10-15T14:41:19.173
> 
> 标签：python, list

我想`a`用另一个子列表替换 list 中的子列表。像这样的东西：

```
a=[1,3,5,10,13] 
```

可以说我想要一个子列表，例如：

```
a_sub=[3,5,10] 
```

并将其替换为

```
b_sub=[9,7] 
```

所以最终结果将是

```
print(a) 
>>> [1,9,7,13] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T14:44:45.150

```
In [39]: a=[1,3,5,10,13]

In [40]: sub_list_start = 1

In [41]: sub_list_end = 3

In [42]: a[sub_list_start : sub_list_end+1] = [9,7]

In [43]: a
Out[43]: [1, 9, 7, 13] 
```

希望有帮助

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-15T14:49:39.553

您可以通过列表切片很好地做到这一点：

```
>>> a=[1, 3, 5, 10, 13]
>>> a[1:4] = [9, 7]
>>> a
[1, 9, 7, 13] 
```

那么我们如何在这里获取索引呢？好吧，让我们从找到第一个开始。我们逐项扫描，直到找到匹配的子列表，并返回该子列表的开始和结束。

```
def find_first_sublist(seq, sublist, start=0):
    length = len(sublist)
    for index in range(start, len(seq)):
        if seq[index:index+length] == sublist:
            return index, index+length 
```

我们现在可以进行替换 - 我们从头开始，替换我们找到的第一个，然后在我们新完成的替换后尝试找到另一个。我们重复此操作，直到找不到要替换的子列表。

```
def replace_sublist(seq, sublist, replacement):
    length = len(replacement)
    index = 0
    for start, end in iter(lambda: find_first_sublist(seq, sublist, index), None):
        seq[start:end] = replacement
        index = start + length 
```

我们可以很好地使用它：

```
>>> a=[1, 3, 5, 10, 13]
>>> replace_sublist(a, [3, 5, 10], [9, 7])
>>> a
[1, 9, 7, 13] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T14:44:02.043

您需要从 to 中获取一个切片`start_index`，`end_index + 1`并将您的子列表分配给它。

就像你可以做的那样： - `a[0] = 5`，你可以类似地为你的`slice`: - `a[0:5]`-> 创建一个切片`index 0 to index 4`

`position`所有你需要的是找出`sublist`你想要替代的。

```
>>> a=[1,3,5,10,13]

>>> b_sub = [9, 7]

>>> a[1:4] = [9,7]  # Substitute `slice` from 1 to 3 with the given list

>>> a
[1, 9, 7, 13]
>>> 
```

如您所见，`substituted`子列表不必与子列表具有相同的长度`substituting`。

实际上，您可以用 2 长度列表替换 4 长度列表，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:01:50.183

这是另一种方法。如果我们需要替换多个子列表，则此方法有效：

```
a=[1,3,5,10,13]
a_sub=[3,5,10]
b_sub=[9,7]

def replace_sub(a, a_sub, b_sub):
    a_str = ',' + ','.join(map(str, a)) + ','
    a_sub_str = ',' + ','.join(map(str, a_sub)) + ','
    b_sub_str = ',' + ','.join(map(str, b_sub)) +','

    replaced_str = a_str.replace(a_sub_str, b_sub_str)[1 : -1]

    return map(int, replaced_str.split(',')) 
```

结果：

```
>>> replace_sub(a, a_sub, b_sub)
[1, 9, 7, 13]
>>> replace_sub([10, 13, 4], [3, 4], [7])
[10, 13, 4] #[3,4] is not in the list so nothing happens 
```

替换多个子列表：

```
>>> a=[1,3,5,10,13,3,5,10]
>>> a_sub=[3,5,10]
>>> b_sub=[9,7]
>>> replace_sub(a, a_sub, b_sub)
[1, 9, 7, 13, 9, 7] 
```

# javascript - 如何使用 onchange 事件验证多选 InputField？

> ID：12898027
> 
> 赞同：2
> 
> 时间：2012-10-15T14:41:23.620
> 
> 标签：javascript, salesforce, visualforce

我有一个绑定到多选自定义字段的 inputField。

我想验证用户是否从列表中最多选择 3 个项目，并且我想在用户立即选择第四个项目时显示消息或警报（而不是在提交表单时）。我发现 actionSupport 可以帮助我，但我不确定它是否可以让我跟踪选择了多少项目

```
<apex:inputField value="{!Agency_Profile.Destination_ Specialties}">
<apex:actionSupport event="onchange" action="{}" />
</apex:inputField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:47:54.717

使用 JavaScript 函数很容易。将此添加到您的页面之间`<script>`和`</script>`标签之间：

```
var selected = {};

function validate(obj)
{
  for (var i = 0; i < obj.options.length; i++) {
    if (obj.options[i].selected) {
      selected[obj.id+'_'+obj.options[i].value] = obj.options[i].label; 
    }
    else {
      selected[obj.id+'_'+obj.options[i].value] = null;
    }
  }

  var size = 0;
  for (var key in selected) {
    if (selected[key] != null) { size++; }
  }

  //console.log(size);

  if(size > 3){
    alert("You can only select a maximum of three options.");
  }
} 
```

然后改变你`<apex:inputField>`的样子：

```
<apex:inputField value="{!Agency_Profile.Destination_ Specialties}" onchange="validate(this);"></apex:inputField> 
```

这是一个完整的 Visualforce 页面示例：

```
<apex:page >
  <script>
    var selected = {};

    function validate(obj)
    {
      for (var i = 0; i < obj.options.length; i++) {
        if (obj.options[i].selected) {
          selected[obj.id+'_'+obj.options[i].value] = obj.options[i].label; 
        }
        else {
          selected[obj.id+'_'+obj.options[i].value] = null;
        }
      }

      var size = 0;
      for (var key in selected) {
        if (selected[key] != null) { size++; }
      }

      //console.log(size);

      if(size > 3){
        alert("You can only select a maximum of three options.");
      }
    }
  </script>
  <apex:form >
    <apex:selectList id="chooseColor1" size="5" multiselect="true" onchange="validate(this);">
      <apex:selectOption itemValue="white" itemLabel="White"/>
      <apex:selectOption itemValue="red" itemLabel="Red"/>
      <apex:selectOption itemValue="orange" itemLabel="Orange"/>
      <apex:selectOption itemValue="green" itemLabel="Green"/>
      <apex:selectOption itemValue="blue" itemLabel="Blue"/>
    </apex:selectList> 
    <apex:selectList id="chooseColor2" size="5" multiselect="true" onchange="validate(this);">
      <apex:selectOption itemValue="white" itemLabel="White"/>
      <apex:selectOption itemValue="red" itemLabel="Red"/>
      <apex:selectOption itemValue="orange" itemLabel="Orange"/>
      <apex:selectOption itemValue="green" itemLabel="Green"/>
      <apex:selectOption itemValue="blue" itemLabel="Blue"/>
    </apex:selectList> 
  </apex:form>
</apex:page> 
```

# scala - 如何将 /YYYY/MM/DD/ URL 路径转换为非公历？

> ID：12898029
> 
> 赞同：1
> 
> 时间：2012-10-15T14:41:26.743
> 
> 标签：scala, url, localization, internationalization, playframework-2.0

我正在开发一个博客托管服务，可以通过 URL 访问博客文章，例如
`http://server/2012/10/30/article-title`. `/YYYY/MM/DD/`对于人们喜欢非公历的国家/地区，我如何最好地处理URL 部分？

（例如，伊斯兰国家的人们会更喜欢我翻译`/2012/10/15`成`/1425/Muharram/15/`吗？（那是伊斯兰日历中的当前日期）。）

（更新：平台和语言：Play Framework 2 和 Scala，以及一些 AngularJs Javascript。）

* * *

更新 2：根据下面的答案和评论，我所做的是从 URL 中完全删除日期。取而代之的是，例如博客文章将可以通过 eg 访问，数据库中的博客文章 ID 在`http://server/blog/-3kqf8-article-title`哪里。`3kqf8`谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:49:51.313

对于 URL 本身，我会使用对我来说方便的任何方案。

至于格式化页面中的日期，可以很容易地与支持伊斯兰日历的库一起解决其他对区域设置敏感的问题。您没有提到您正在构建它的环境，但谷歌搜索“x 的伊斯兰日历”应该会有所帮助。

如果您想为 URL 维护多种形式，这是可能的，但显然是以更复杂为代价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:18:40.197

您可能会查找 ICU4J，其中包括对 java.util.Calendar 的改写和 IslamCalendar 子类。

我没有使用过这些，但它们看起来很简单（如果您已经习惯了笨拙的 java.util.Calendar），并且可以在 Scala/Play 中轻松使用。

[http://site.icu-project.org](http://site.icu-project.org)

[http://icu-project.org/apiref/icu4j/com/ibm/icu/util/Calendar.html](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/Calendar.html)

[http://icu-project.org/apiref/icu4j/com/ibm/icu/util/IslamicCalendar.html](http://icu-project.org/apiref/icu4j/com/ibm/icu/util/IslamicCalendar.html)

# c# - 无法将匿名方法转换为类型“System.Windows.Threading.DispatcherPriority”，因为它不是委托类型

> ID：12898031
> 
> 赞同：2
> 
> 时间：2012-10-15T14:41:32.750
> 
> 标签：c#, wpf, dispatcher

谁能解释我需要做什么才能克服这个错误？

“无法将匿名方法转换为类型‘System.Windows.Threading.DispatcherPriority’，因为它不是委托类型”

```
 private void Test(object sender)
    {
        base.Dispatcher.BeginInvoke(delegate
        {
                       //some code

        }, new object[0]);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:51:41.497

如果您使用的是 .NET 3.5 SP1 及更高版本，则可以添加对*System.Windows.Presentation.dll*的引用，并确保您`using System.Windows.Threading;`在文件顶部有。它包含更易于使用的扩展方法，并允许您简单地编写：

```
base.Dispatcher.BeginInvoke(() => { /* some code */ }); 
```

如果您使用没有 SP1 或更低版本的 .NET 3.5，则必须将委托转换为具体委托类型：

```
base.Dispatcher.BeginInvoke((Action) delegate { /* some code */ }, new object[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:42:30.657

**编辑**
我对您`new object[0]`作为“参数”传递给`BeginInvoke`并没有意识到这实际上意味着“无参数”感到困惑，因为委托之后的所有内容都在`params`集合中......

我正在制作一个需要单个整数的示例。

你要传参数，所以最好用这个

```
private void Test(object sender)
{
    base.Dispatcher.BeginInvoke(DispatcherPriority.Normal, (Action<int>)delegate(int i)
    {
                   //some code

    }, 5);
} 
```

这将创建一个接受整数的匿名委托，将其转换为接受整数的操作并使用参数调用委托`5`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:55:27.893

**更新的答案**

将委托强制转换为`Action`（或者`Func<something>`如果您要返回一个值）。

```
private void Test(object sender)
{
    base.Dispatcher.BeginInvoke((Action)delegate
    {
        //some code
    }, new object[0]);
} 
```

该`Dispatcher.BeginInvoke`方法的第一个参数需要一个`System.Delegate`. 这是不常见的。通常您会指定其中一个`Func`或`Action`重载。但是，在这里可以传递具有不同签名的代表。显然，匿名委托并没有被`System.Delegate`隐式转换为。

* * *

**更新**

我正在使用 .NET 3.5。在更高的框架版本中，额外的重载`BeginInvoke`可能会干扰 C# 的重载机制。尝试

```
private void Test(object sender)
{
    base.Dispatcher.BeginInvoke((System.Delegate)(Action)delegate
    {
        //some code
    }, new object[0]);
} 
```

# javascript - 如何在 jquery 中替换地图中的值？

> ID：12898033
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:41:38.350
> 
> 标签：javascript, jquery

```
var temp = { "100" = ["submenu 4", "submenu 5", "submenu 6"],
        "136" = ["submenu 10", "submenu 11", "submenu 12"],
        "125" = ["submenu 19", "submenu 20", "submenu 21"],
        "99"  = ["submenu 16", "submenu 17", "submenu 18"], 
        "77"  = ["submenu 13", "submenu 14", "submenu 15"],
        "70"  = ["submenu 1", "submenu 2", "submenu 3"],
        "4"  = ["submenu 7", "submenu 8", "submenu 9"] }; 
```

如何将**=**替换为**:**符号？或者如何在 jquery 函数中迭代上述 temp？

请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:43:58.270

此 JSON 无效，您无法替换 temp 中的 '='，因为 temp 会在尝试将此值分配给它时引发错误。在您的代码中替换它以使其工作，否则您无法对此进行迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:45:20.330

```
var temp = '{ "100" = ["submenu 4", "submenu 5", "submenu 6"],
        "136" = ["submenu 10", "submenu 11", "submenu 12"],
        "125" = ["submenu 19", "submenu 20", "submenu 21"],
        "99"  = ["submenu 16", "submenu 17", "submenu 18"], 
        "77"  = ["submenu 13", "submenu 14", "submenu 15"],
        "70"  = ["submenu 1", "submenu 2", "submenu 3"],
        "4"  = ["submenu 7", "submenu 8", "submenu 9"] }';
temp = temp.replace(/=/g,":");
temp = JSON.parse(temp); 
```

像这样的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:48:58.847

`=`除了将符号更改为 之外，没有有效的解决方案`:`。在那一点上完全停止。从字面上看，这是真正解决此问题并使其成为有效 JavaScript 对象的唯一方法。

如果您从外部来源获取此信息，则可以对其进行一些正则表达式更改。如果是您的代码，您只需更改符号即可。

# c# - 更新 ObservableCollection WinRT 中的属性

> ID：12898034
> 
> 赞同：0
> 
> 时间：2012-10-15T14:41:43.560
> 
> 标签：c#, windows-runtime, microsoft-metro

我似乎在更新 a`ListView`中的数据时遇到了问题`ObservableCollection`。

所以我有一个类`Items`，它继承自`INotifyPropertyChanged`该类并实现属性更改处理程序。

然后我有一个`ObservableCollection`项目，然后将其设置为 a 的源`CollectionViewSource`。

然后`List`绑定到`CollectionViewSource`.

当我更改属性的数据时，`ObservableCollection`它将触发属性更改但不会更新 UI。

我花了一段时间寻找解决方案，但大多数都是针对 WPF 的，它有很多折旧的功能，据我所知，WinRT`ObservableCollection`应该只在属性更改时更新。

我敢肯定，虽然我错过了一些东西，否则它会对我有用。

# android - webview的编码问题

> ID：12898037
> 
> 赞同：1
> 
> 时间：2012-10-15T14:41:52.323
> 
> 标签：android

我已经在 Playstore 上上传了我的应用程序，对我和大多数用户来说，一切正常。然而，一些用户抱怨像 àèìòù 这样的拉丁语接受的字母说奇怪的符号出现在他们的位置。在我的手机上，这些字母成功显示在我朋友的手机上……我不明白问题出在哪里！我像这样加载我的数据：

```
view.loadData("<meta http-equiv=\"Content-Type\" content=\"text/html\"; charset=\"UTF-8\" />"+
                                            myText, "text/html", "UTF-8"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:09:21.590

感谢[@Sabre的](https://stackoverflow.com/questions/12898037/coding-issue-with-webview/13311678#comment17470625_12898037)链接解决：

> 尝试添加`<html></html>`标签。描述[在这里](https://stackoverflow.com/a/10571946/1216542)。

# exception - 带有用户友好消息的 Yii 完整性约束异常处理

> ID：12898042
> 
> 赞同：0
> 
> 时间：2012-10-15T14:42:24.680
> 
> 标签：exception, error-handling, referential-integrity, yii

我正在使用此型号代码删除记录。

```
public function actionDelete($id)
{
        $this->loadModel($id)->delete();

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
} 
```

包含此记录的表与具有删除限制约束的其他表具有一对多关系。

因此，当删除在子表中具有相关记录的记录时，它会引发异常，例如

```
CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint violation: 1451 Cannot delete or update a parent row: a foreign key constraint fails (`bzuexamsystem`.`campus`, CONSTRAINT `fk_Campus_City` FOREIGN KEY (`CityID`) REFERENCES `city` (`CityID`) ON UPDATE CASCADE). The SQL statement executed was: DELETE FROM `city` WHERE `city`.`CityID`=1 
```

是否有某种方式可以显示用户友好的错误消息。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:13:05.950

您需要捕获异常。就像是

```
try{
    $this->loadModel($id)->delete();
    if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }catch (CDbException $e){
        if($e->getCode()===23000){
            //You can have nother error handling
            header("HTTP/1.0 400 Relation Restriction");
        }else{
            throw $e;
        }
    } 
```

如果您还在视图文件中使用 CGrigView，则应将“ajaxUpdateError”函数传递给它。例子：

```
$this->widget('zii.widgets.grid.CGridView',
  array(
    'id' => 'model-grid',
    'dataProvider' => $model->search(),
    'filter' => $model,
    'ajaxUpdateError' => <<<JS
      function(xhr, ts, et, err){
        if(xhr.statusText==="Relation Restriction"){
          $("#errorDiv").text("That model is used by something!");
        }
        else{
          alert(err);
        }
      }
    JS
    ,
    'columns' => 
        array(
            'model_id',
            'name'
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T16:41:28.057

我猜， $this->loadModel() 返回一个 CActiveRecord 对象...

首先，您需要确保您要删除的记录确实已加载。其次，在语句开头使用@ 确实不允许错误。然后如果 CActiveRecord->delete() 返回 false，则意味着该记录没有被删除：

```
public function actionDelete($id) {
    $record = $this->loadModel($id);
    if ($record !== null) {
        if (@$record->delete()) {
            // code when successfully deleted
        } else {
            // code when delete fails
        }
    } else {
        // optional code to handle "record isn't found" case
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:25:55.567

您不能删除对外键有限制的行，将其更改为`set to null`，或`no action`根据您的要求

所以你的钥匙会在`set to null`删除和`cascade``update`

# html - 有没有办法“强制”儿童的 z-index？

> ID：12898044
> 
> 赞同：0
> 
> 时间：2012-10-15T14:42:25.727
> 
> 标签：html, css

这是我的[代码](http://jsfiddle.net/BhQNr/2/)：

# HTML

```
<div class="item">
    &nbsp;
</div>

<div class="item">
    <div class="item-abs">
        &nbsp;
    </div>
</div>

<div class="item">
    &nbsp;
</div>​ 
```

# CSS

```
.item
{
    position:relative;
    z-index:5;
    float:left;
    background-color:red;
    width:100px;
    height:100px;
    margin:10px;
}

.item-abs
{
    position:absolute;
    top:0px;
    left:40px;
    z-index:500;
    background-color:blue;
    width:100px;
    height:100px;    
}
​ 
```

如您所见，如果孩子有 500 的 z-index，则在下一个父母之下。有没有办法强制孩子z-index？骑在父亲的堆栈上？还是这个场景做不到？

我无法更改父母的 z-index，并且我想在不使用 javascript 设置适当的下降 z-index 的情况下这样做...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:57:58.113

当然有，你甚至不需要设置孩子的 z-index。

只需将最后一个 div 的 z-index 设置为较低的 z-index，就完成了。

[例子](http://jsfiddle.net/BhQNr/4/)

这种行为的原因如下：如果父级具有相同的 z-index，则 DOM 中最后一个“获胜”。所以从技术上讲，一个简单`z-index:1`的父母和绝对的孩子就足够了。其他可能性是仅在孩子上设置 z-index：

[例子](http://jsfiddle.net/BhQNr/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:53:00.220

以下小提琴似乎可以满足您的要求（我相信）：

[http://jsfiddle.net/BhQNr/3/](http://jsfiddle.net/BhQNr/3/)

这是通过删除父元素上的定位并使子元素相对（它适用于绝对值，但左侧和顶部值比使用绝对值时更接近）来完成。

# java - 使用 jQplot 实现图形

> ID：12898047
> 
> 赞同：1
> 
> 时间：2012-10-15T14:42:32.123
> 
> 标签：java, javascript, jquery, jqplot

我需要实现以下图表

![在此处输入图像描述](../Images/a34dfe71a050fe942e3f61315aa2da8a.png)

*我知道[堆积图](http://www.jqplot.com/tests/bar-charts.php)，但是这里有轴点标签（在我的需要中没有任何轴点标签），这是来自 Y 轴。*

我很困惑如何实现它。

你能帮我么？任何链接也会有所帮助。

* * *

更新 ：

我正在尝试一个代码片段

```
<script type="text/javascript" language="javascript">

  $(document).ready(function(){
      var line1 = [14];
      var line2 = [77];
      var plot4 = $.jqplot('test2', [line1, line2], {
          title: '1 Mobility Test Graph',
          animate: !$.jqplot.use_excanvas,
          stackSeries: true, 
          seriesDefaults: {
              renderer: $.jqplot.BarRenderer,
              rendererOptions:{barPadding : 0, barMargin : 5, barDirection: 'horizontal'}, 
              pointLabels:{location : 'e', edgeTolerance : 0, hideZeros: true, show : true},
              shadowAngle : 135,
              lineWidth : 0,
              showLine: true
          },
          axesDefaults : {
                show : false,
                tickOptions : {
                    show : false
                }
            },
          axes: {
              yaxis:{renderer:$.jqplot.CategoryAxisRenderer}
          },
          grid:{
                borderWidth:0, 
                shadow:false
            },
          legend: {
                renderer: $.jqplot.EnhancedLegendRenderer,
                show:true,
                rendererOptions:{
                    numberRows:1,
                    numberColumns: 3,
                    disableIEFading: false
                },
                location: 'n',
                placement : 'outsideGrid',
                marginTop: '5px',
                showSwatch:false
          }
      });
      $(".jqplot-xaxis-tick").hide();
      $(".jqplot-yaxis-tick").hide();
    });
</script> 
```

但这并没有给我任何输出。当我删除`barDirection: 'horizontal'`它的工作正常。请帮帮我，有什么问题...

在这里，我得到了[jsfiddle](http://jsfiddle.net/Boro/TfUfD/2/)，但它适用于两个图表......我怎样才能制作一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:01:37.073

你在追求这样的事情[吗](http://jsfiddle.net/TfUfD/12/)？您在那里有一个堆叠的单杠。根据带有水平条形图[的文档中的示例，您必须为图表提供一个系列数组，其中每个系列的值作为两个值数组 ([x,y])，其中 x 是值，y 是系列 id。](http://www.jqplot.com/deploy/dist/examples/bar-charts.html)

或者另一种选择是为图表提供单值数组的单个数组，如此[处所示](http://jsfiddle.net/TfUfD/14/)。

# javascript - 使用 phonegap 将图像或视频上传到远程服务器

> ID：12898050
> 
> 赞同：1
> 
> 时间：2012-10-15T14:42:40.347
> 
> 标签：javascript, cordova

我在 android phonegap 中做项目。在这里我想将图像和视频上传到远程服务器。我使用了以下链接。 [http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap](http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap)

我还更改了一些选项，例如 options.chunkedMode = false ,android:debuggable="true" 和 . 但它仍然显示错误代码 3。我使用的是**cordova-2.0.0.js**版本。任何人都可以提出一些答案。

我的js代码是

```
 **

<script type="text/javascript" charset="utf-8">

            // Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);

            // PhoneGap is ready
    function onDeviceReady() {
      // Do cool things here...
            }

    function getImage() {

                // Retrieve image file location from specified source
                navigator.camera.getPicture(uploadPhoto, function(message) {
                alert('get picture failed');
                },
                {quality: 50,
                destinationType: navigator.camera.DestinationType.FILE_URI,
                sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                }
                );
    }

    function uploadPhoto(imageURI) {

                var options = new FileUploadOptions();
                options.fileKey="file";
                options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
                options.mimeType="image/jpeg";

                var params = new Object();
                params.value1 = "test";
                params.value2 = "param";

                options.params = params;
                options.chunkedMode = false;

                var ft = new FileTransfer();
                ft.upload(imageURI, "url of ther server/upload.php", win, fail, options, true);
                console.log("H");
    }

    function win(r) {
                console.log("HIIIIIiiii");
                console.log("Code = " + r.responseCode);
                console.log("Response = " + r.response);
                console.log("Sent = " + r.bytesSent);
                alert(r.response);
    }

    function fail(error) {
                alert("There is something");
                alert("An error has occurred: Code = " + error.code);
    }

    </script> 
```

**

我的php代码是

```
<?php

print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "upload/".$new_image_name);

?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:01:59.190

您是否已将相关 URL 添加到白名单中？

例如在 config.xml 你有类似的东西：

```
<access origin="www.myurl.com" subdomains="true" /> 
```

或者

```
<access origin="*" /> 
```

允许所有 URL。

顺便说一下，错误代码 3 是 FileTransferError.CONNECTION_ERR。

# antlr - ANTLR：如何跳过多行注释

> ID：12898052
> 
> 赞同：4
> 
> 时间：2012-10-15T14:42:43.793
> 
> 标签：antlr, lexer, parser-generator

给定以下词法分析器：

```
lexer grammar CodeTableLexer;

@header {
    package ch.bsource.ice.parsers;
}

CodeTabHeader   : OBracket Code ' ' Table ' ' Version CBracket;
CodeTable       : Code ' '* Table;
EndCodeTable    : 'end' ' '* Code ' '* Table;
Code            : 'code';
Table           : 'table';
Version         : '1.0';
Row             : 'row';
Tabdef          : 'tabdef';
Override        : 'override' | 'no_override';
Obsolete        : 'obsolete';
Substitute      : 'substitute';
Status          : 'activ' | 'inactive';
Pkg             : 'include_pkg' | 'exclude_pkg';
Ddic            : 'include_ddic' | 'exclude_ddic';
Tab             : 'tab';
Naming          : 'naming';
Dfltlang        : 'dfltlang';
Language        : 'english' | 'german' | 'french' | 'italian' | 'spanish';
Null            : 'null';
Comma           : ',';
OBracket        : '[';
CBracket        : ']';

Boolean
    : 'true' 
    | 'false'
    ;

Number
    : Int* ('.' Digit*)?
    ;

Identifier
    : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '_' | '$' | '#' | '.' | Digit)*
    ;

String
@after {
    setText(getText().substring(1, getText().length() - 1).replaceAll("\\\\(.)", "$1"));
}
    : '"' (~('"'))* '"'
    ;

Comment
    : '--' ~('\r' | '\n')* { skip(); }
    | '/*' .* '*/' { skip(); }
    ;

Space
    : (' ' | '\t') { skip(); }
    ;

NewLine
    : ('\r' | '\n' | '\u000C') { skip(); }
    ;

fragment Int
    : '1'..'9'
    | '0'
    ;

fragment Digit 
    : '0'..'9'
    ; 
```

...和以下解析器：

```
parser grammar CodeTableParser;

options {
    tokenVocab = CodeTableLexer;
    backtrack = true;
    output = AST;
}

@header {
   package ch.bsource.ice.parsers;
}

parse
    : block EOF
    ;

block
    : CodeTabHeader^ codeTable endCodeTable
    ;

codeTable
    : CodeTable^ codeTableData
    ;

codeTableData
    : (Identifier^ obsolete?) (tabdef | row)*
    ;

endCodeTable
    : EndCodeTable
    ;

tabdef
    : Tabdef^ Identifier+
    ;

row
    : Row^ rowData
    ;

rowData
    : (Number^ | (Identifier^ (Comma Number)?))
        Override?
        obsolete?
        status?
        Pkg?
        Ddic?
        (tab | field)*
    ;

tab
    : Tab^ value+
    ;

field
    : (Identifier^ value) | naming
    ;

value
    : OBracket? (Identifier | String | Number | Boolean | Null) CBracket?
    ;

naming
    : Naming^ defaultNaming (l10nNaming)*
    ;

defaultNaming
    : Dfltlang^ String
    ;

l10nNaming
    : Language^ String?
    ;

obsolete
    : Obsolete^ Substitute String
    ;

status
    : Status^ Override?
    ; 
```

...最后我的课程使解析器不区分大小写：

```
package ch.bsource.ice.parsers;

import java.io.IOException;
import org.antlr.runtime.*;

public class ANTLRNoCaseFileStream extends ANTLRFileStream {

    public ANTLRNoCaseFileStream(String fileName) throws IOException {

        super (fileName, null);
    }

    public ANTLRNoCaseFileStream(String fileName, String encoding) throws IOException {

        super (fileName, null);
    }

    public int LA(int i) {

        if (i == 0) return 0;
        if (i < 0) i++;
        if ((p + 1 - 1) >= n) return CharStream.EOF
        return Character.toLowerCase(data[p + 1 - 1]);
    }
} 
```

...按预期跳过单行注释，而没有跳过多行注释...这是我收到的错误消息：

```
codetable_1.txt line 38:0 mismatched character '<EOF>' expecting '*'
codetable_1.txt line 38:0 mismatched input '<EOF>' expecting EndCodeTable
java.lang.NullPointerException
... 
```

我错过了什么吗？有什么我应该注意的吗？我正在使用 antlr 3.4。

这也是我试图解析的示例源代码：

```
[code table 1.0]

/*
This is a multi-line comment
*/

code table my_table

-- this is a single-line comment
row 1
    id              "my_id_1"
    name            "my_name_1"
    descn           "my_description_1"
    naming
      dfltlang      "My description 1"
      english       "My description 1"
      german        "Meine Beschreibung 1"

-- this is another single-line comment
row 2
    id              "my_id_2"
    name            "my_name_2"
    descn           "my_description_2"
    naming
      dfltlang      "My description 2"
      english       "My description 2"
      german        "Meine Beschreibung 2"

end code table 
```

任何帮助将非常感激 ：-）

谢谢，j3d

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-09T17:06:44.407

要做到这一点`antlr4`

```
BlockComment 
    : '/*' .*? '*/' -> skip
    ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:58:55.480

巴特给了我莫大的支持，我想我们都非常感谢他 :-)

无论如何，问题是我用来将解析的字符流转换为小写的 FileStream 类中的一个错误。下面是正确的Java源代码：

```
import java.io.IOException;
import org.antlr.runtime.*;

public class ANTLRNoCaseFileStream extends ANTLRFileStream {

    public ANTLRNoCaseFileStream(String fileName) throws IOException {

        super (fileName, null);
    }

    public ANTLRNoCaseFileStream(String fileName, String encoding) throws IOException {

        super (fileName, null);
    }

    public int LA(int i) {

        if (i == 0) return 0;
        if (i < 0) i++;
        if ((p + i - 1) >= n) return CharStream.EOF;
        return Character.toLowerCase(data[p + i - 1]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:14:33.197

我使用 2 条规则来跳过行和块注释（出于调试目的，我在解析期间打印它们）。为了更好的可读性，它们被分成 2 部分，并且块注释确实支持嵌套注释。

此外，我不会在我的语法中跳过 EOL 字符（`\r`和/或`\n`），因为我明确需要它们用于某些规则。

```
LineComment
    :   '//' ~('\n'|'\r')* //NEWLINE
        {System.out.println("lc > " + getText());
        skip();}
    ;

BlockComment
@init { int depthOfComments = 0;}
    :   '/*' {depthOfComments++;}
        ( options {greedy=false;}
        : ('/' '*')=> BlockComment {depthOfComments++;}
        | '/' ~('*')
        | ~('/')
        )*
        '*/' {depthOfComments--;}
        {
           if (depthOfComments == 0) {
                System.out.println("bc >" + getText());
                skip();
            }
        }
    ; 
```

# javascript - Node.js 中的唯一 EventListener ID

> ID：12898054
> 
> 赞同：2
> 
> 时间：2012-10-15T14:42:48.300
> 
> 标签：javascript, node.js, eventemitter

我目前正在`eventListeners`使用以下内容创建：

```
client.on('data', function(data){
    // Lots of other functions etc..
}); 
```

我特别想知道的是，是否可以通过唯一的 ID 来识别这个特定的侦听器，以便我可以单独引用它？

随时可能有多个`eventListener`打开的实例，我希望能够根据接收到将引用此 ID 的特定数据事件来删除它们。现在的问题是，我不知道如何识别个人`eventListeners`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T10:11:56.053

您始终可以将侦听器函数存储到变量中，然后像这样添加或删除它：

```
var EventEmitter  = require('events').EventEmitter
    emitter       = new EventEmitter();

var addListener = function(id){
  var listener = function(){
    console.log("Listener", id);
    emitter.removeListener("test", listener);
  }
  emitter.on("test", listener);
}

addListener("a");
addListener("b");

emitter.emit("test");
// Listener a
// Listener b 
```

有了这个，你有一个唯一的 id，因为你有一个引用监听器函数的监听器变量。在该范围内，您可以根据范围删除侦听器。

# javascript - 在javascript中匹配特定的url

> ID：12898057
> 
> 赞同：1
> 
> 时间：2012-10-15T14:42:54.290
> 
> 标签：javascript, regex

我正在尝试在 javascript 上匹配 youtube 和 vimeo url。我正在使用 regexr 来玩，并想出了这个：

```
(http|https)://(youtu|www.youtube|vimeo|youtube)\.(be|com)/[A-Za-z0-9\?&=]+ 
```

它在正则表达式上工作得很好，匹配中不包含空格，所以它只会匹配这个：

```
http://youtu.be/ssdfsjlfsfsl 
```

而不是这个：

```
http://youtu.be/ssdfsjl someword 
```

但是当我在 javascript 上对其进行测试时，它仍然将 url 与空格和旁边的另一个单词匹配：

```
var x = new RegExp("(http|https)://(youtu|www.youtube|vimeo|youtube)\.(be|com)/[A-Za-z0-9\?&=]+")

x.test("http://www.youtube.com/watch?v=FvYo3ZgaQ1c&feature=plcp someword") 
```

不知道为什么会发生这种情况，我也尝试过添加`\S`or`!\s`但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:46:52.123

看起来您不是在检查字符串的开头/结尾。使用`^`和`$`

```
var x = new RegExp("^(http|https)://(youtu|www.youtube|vimeo|youtube)\.(be|com)/[A-Za-z0-9\?&=]+$") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:49:25.447

`regex.test(string)`返回是否在字符串中找到一个或多个匹配项的布尔值，因此它将（并且应该）返回`true`for `"http://www.youtube.com/watch?v=FvYo3ZgaQ1c&feature=plcp someword"`。

如果你想测试你的字符串是一个 URL 并且只是一个 url，添加一些锚点：

```
^(http|https)://(youtu|www.youtube|vimeo|youtube)\.(be|com)/[A-Za-z0-9\?&=]+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:48:18.350

那是因为你没有锚定你的表情。

```
^(http|https)://(youtu|www.youtube|vimeo|youtube)\.(be|com)/[A-Za-z0-9\?&=]+$
|                                                                           |
here, and...                                                                here. 
```

# jakarta-ee - 如何在 Oracle Weblogic 12.1 中部署 JSF 2.1 webapp？

> ID：12898076
> 
> 赞同：5
> 
> 时间：2012-10-15T14:44:11.560
> 
> 标签：jakarta-ee, jsf-2, weblogic, java-ee-6

我正在尝试将 JSF 2.1 Web 应用程序部署到 Weblogic 12.1 应用程序服务器，但部署失败并出现以下异常

```
<javax.enterprise.resource.webcontainer.jsf.config> <BEA-000000> 
<Critical error during deployment:
 com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! 
    com.oracle.injection.integration.jsf.WeblogicFacesConfigResourceProvider
                     cannot be cast to com.sun.faces.spi.ConfigurationResourceProvider
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:377)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:582)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    Truncated. see log file for complete stacktrace 
```

我正在使用 Mojarra 实现版本 2.1.13 - 这是相应的`pom.xml`条目：

```
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId> 
  <version>2.1.13</version>
</dependency>
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.1.13</version>
</dependency> 
```

我在 中添加了以下几行，`weblogic.xml`以防止 weblogic 服务器加载随附的 jsf 实现：

```
<container-descriptor>
    <prefer-web-inf-classes>false</prefer-web-inf-classes>
    <prefer-application-packages>
        <package-name>javax.faces.*</package-name>
        <package-name>com.sun.faces.*</package-name>
        <package-name>com.bea.faces.*</package-name>
    </prefer-application-packages>

    <prefer-application-resources>
        <resource-name>javax.faces.*</resource-name>
        <resource-name>com.sun.faces.*</resource-name>
        <resource-name>com.bea.faces.*</resource-name>
        <resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
    </prefer-application-resources>
</container-descriptor> 
```

`WeblogicFacesConfigResourceProvider`包含在`weblogic.jar`.

那么这里出了什么问题？- 有什么提示吗？

* * *

## 解决方案

好的，我找到了解决方案：您必须将.添加`META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider`到. 此配置对我有用：false javax.faces。 *com.sun.faces。* com.bea.faces.* `prefer-application-resources``weblogic.xml`

 *```
 <prefer-application-resources>
        <resource-name>javax.faces.*</resource-name>
        <resource-name>com.sun.faces.*</resource-name>
        <resource-name>com.bea.faces.*</resource-name>
        <resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
        <resource-name>META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider</resource-name>
    </prefer-application-resources>
</container-descriptor> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T17:52:48.610

添加他的问题中提到的解决方案`oehmiche`作为答案。

将 META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider 添加到 weblogic.xml 中的 prefer-application-resources-section。此配置对我有用：false javax.faces。com.sun.faces。com.bea.faces.*

```
<prefer-application-resources>
    <resource-name>javax.faces.*</resource-name>
    <resource-name>com.sun.faces.*</resource-name>
    <resource-name>com.bea.faces.*</resource-name>
    <resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
    <resource-name>META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider</resource-name>
</prefer-application-resources> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-26T07:45:57.030

**oemiche**解决方案的补充：在 WebLogic 12c R2 (12.2) 上，您必须覆盖来自 WegLogic 的 glassfish.jar (JSF 2.2) 的 jsf.js：
在 ...FacesConfigResourceProvider 之后将以下内容放入 prefer-application-resources 中：

> <resource-name>META-INF/resources/javax.faces/jsf.js</resource-name>

如果您将应用程序部署为 ear，则必须将其添加到 weblogic-application.xml。*

# load - 网站负载均衡

> ID：12898078
> 
> 赞同：1
> 
> 时间：2012-10-15T14:44:16.390
> 
> 标签：load, hosting, nameservers

我有一个即将接收大量流量的网站，我想设置某种负载平衡。我想确保网站在流量进入时启动并运行。我有 2 个专用服务器（都带有 WHM、CPanel 和注册名称服务器），我想知道是否只需向域名添加额外的名称服务器就可以了诀窍。这意味着我将拥有以下内容：

ns1.domain.com 和 ns2.domain.com 用于第一台服务器，ns1.domain.net 和 ns2.domain.net 用于第二台服务器。只是，我以前没有尝试过这样的事情。我注意到网上有付费服务可以实现这一目标。

如果其中一台服务器出现故障，我希望得到保障。

任何想法都受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:17:49.630

有几种方法可以做到这一点：- 1）购买硬件负载平衡器以在 2 台服务器之间分配负载 2）循环 DNS - 为您的域 www 记录设置 2 个条目。每个服务器 1 - 例如，www 转到 1.1.1.1，另一个 www A 记录转到 1.1.1.2

保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T15:32:15.823

您不需要付费软件来进行负载平衡。您可以使用像 nginx 这样的反向代理来平衡 Web 服务器之间的负载。或者，您也可以使用 DNS；但它充满了一些问题。（[http://en.wikipedia.org/wiki/Round-robin_DNS](http://en.wikipedia.org/wiki/Round-robin_DNS)）

# c# - 需要对所有用户进行自动更新的部署策略

> ID：12898082
> 
> 赞同：1
> 
> 时间：2012-10-15T14:44:26.600
> 
> 标签：c#, .net, winforms, installation

我需要一种执行以下操作的部署方法：

1.  自动更新，如点击一次；
2.  在所有用户上安装，例如 Visual Studio 安装项目。
3.  没有行政特权。（要求的第一次除外）
4.  可以安装VB Powerpacks。

问题是我正在制作一个 winforms 程序，可能需要随时更新，而且我们的计算机被许多用户使用（我们公司每天 24 小时运行）。而且我们不想在我们的 80 台计算机上为每个用户手动更新我的程序！

如果我们可以为所有用户进行安装，那么单击一次可能会很棒（但是是的，我已经发现这是不可能的）。

我被困住了！请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:50:29.453

我们使用一个系统，其中启动我们的应用程序的快捷方式实际上会启动一个自动更新程序。更新程序检查服务器是否有任何更新 dll，如果找到它们，则将它们复制到本地计算机。之后（或者如果它没有找到任何更新），它会启动应用程序。

这只有在你有办法强制每个人不时退出时才有效。我们通过让应用程序监视要更新的特定文件（exe 本身）来解决这个问题，并每 5 分钟提醒用户一次，直到他们重新启动。

# sql - 多次从同一列获取 SQL 结果

> ID：12898083
> 
> 赞同：2
> 
> 时间：2012-10-15T14:44:28.550
> 
> 标签：sql

我有一个包含两列的表，ID 和描述。当 ID = 1 时，描述代表人的姓名。当 ID = 2 时，描述表示此人的地址。ID 为 3 时，描述代表该人的评论。

我必须执行什么查询才能选择所有三种类型的描述。我尝试使用案例，但这不适用于我的案例。Union 将起作用，但我将运行我的查询三遍。有没有更简单有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:46:39.910

我猜你有办法将这些数据与另一个表相关联。如果是这样，那么你可以使用这样的东西：

```
select t1.someId,
    max(case when t2.id = 1 then t2.description end) name,
    max(case when t2.id = 2 then t2.description end) address,
    max(case when t2.id = 3 then t2.description end) comments
from table1 t1
left join table2 t2
    on t1.someId = t2.someid
group by t1.someId 
```

这将为您提供特定行中每条记录的唯一数据。然后，您可以将此数据插入到另一个表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:56:07.350

这是一个非常糟糕的方法，但可以通过以下方式解决：（我在表中添加了一个 personID 作为它的主键）

```
create table person(
personID int,
id int,
description varchar(40))

insert into person values (1,1, 'name')
insert into person values (1,2, 'adress')
insert into person values (1,3, 'comments')

SELECT p.personID, p.description, p2.description, p3.description
FROM person p JOIN person p2 ON p.personID=p2.personID and  p.id=1 and p2.id=2 JOIN person p3 ON p.personID=p3.personID AND p3.ID=3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:59:33.230

这就是解决方案。感谢所有提供任何反馈的人。

```
select table.ID,
max (case when id = 1 then description end) as size
max (case when id = 2 then description end) as address
max (case when id = 3 then description end) as comments
group by id 
```

# ruby-on-rails - 资产未显示 Rails ENV 生产

> ID：12898084
> 
> 赞同：1
> 
> 时间：2012-10-15T14:44:33.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, apache, production-environment

我刚刚将一些更改推送到我已部署的应用程序（只有一些视图更改一切正常），运行`bundle exec rake assets:precompile RAILS_ENV=production`并且突然间我的样式表和图像没有被提供？

我检查了显示样式表和 JavaScript 正在加载的 html 源代码。

```
<link href="/virtual-piano/assets/application-a98a08ba4b9c8c54d0ac4103a8bf4bdf.css" media="all" rel="stylesheet" type="text/css" />
  <script src="/virtual-piano/assets/application-23f71043aa7578f758b9d6244d5bd9b1.js" type="text/javascript"></script> 
```

production.log 没有提到任何关于未能加载资产的内容。

我已清除浏览器上的缓存。

重新启动 apache2 服务器并触摸 restart.txt 文件。

生产.rb

```
# Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true 
```

我有点难过，如果有人知道发生了什么，将不胜感激！

# user-interface - WinRT 设置魅力。屏幕键盘上覆盖的元素

> ID：12898085
> 
> 赞同：0
> 
> 时间：2012-10-15T14:44:35.117
> 
> 标签：user-interface, windows-8, client, microsoft-metro, windows-runtime

我正在为 Windows 8 (WInRT) 开发，但设置魅力有问题。设置弹出窗口基于 Microsoft SDK 设置魅力。设置面板是弹出窗口。内容由 ScrollViewer -> Grid -> StackPanel 包装。在 StackPanel 我有输入字段。当我试图在覆盖它的屏幕键盘上填充它们中的最后一个时，我看不到字段并且无法滚动到它。有什么办法可以看到它并自动滚动到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:38:08.717

似乎 Windows 8 上的弹出窗口与它们在 Windows Phone 上遇到的问题相同，因为当您在其中一个上放置一个 TextBox 时 - 它不会与所有其他内容一起推送，就像它不在时那样一个弹出窗口。

我的解决方案是不对输入字段使用弹出窗口，而是使用您可以自己管理的布局。

默认情况下，该应用在其视觉根目录中有一个 Frame 控件。例如，您可以通过将您自己的 UserControl（我通常称之为 AppShell）放在那里来修改它，它有所有页面使用的 Frame，您可以有一个用于弹出窗口、登录屏幕、扩展启动屏幕等的层。

要解决您的问题，您需要将您的魅力 UI 放在此类层中，而不是在弹出窗口中。然后，当屏幕键盘会阻碍您的 TextBox 视图时，将所有 UI 向上推的内置机制应该重新开始工作。

*编辑

一个更简单的解决方案可能是确保您的设置面板弹出窗口在您的可视化树中是父级 - 例如，通过将其作为子元素添加到您的应用程序或页面的根网格中。事实证明，在这种情况下，当 OSK 出现时，它的内容确实会被推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:21:28.197

看看这个[帖子](http://socialeboladev.wordpress.com/2012/10/14/turn-any-usercontrol-into-a-pleasing-dialogflyout-in-windows-8/)

它是一个弹出窗口包装器（将用户控件转换为弹出窗口），负责处理键盘的出现并相应地调整弹出窗口（以及用户控件）的大小。

# objective-c - UIImageView 上的 roundedCorner 错误地应用于 UITableCell

> ID：12898087
> 
> 赞同：0
> 
> 时间：2012-10-15T14:44:43.280
> 
> 标签：objective-c, ios, uitableview, rounded-corners

您好，我有一个表格单元格，其中包含一个 UIImageView。我想让这个 UIImageView 有一个圆角。这是我拥有的代码（相关片段）：

```
UIImageView* image;
image = (UIImageView*)[cell viewWithTag:0]; // get the UIImageView from the nib
image.image = [UIImage imageWithData:imageData]; // imagedata contains the image
image.layer.cornerRadius = 10.0;
image.layer.masksToBounds = YES;
image.clipsToBounds = YES; 
```

当我这样做时，整个 UITableViewCell 得到圆角，而不是 UIImageView （见附图）。

有人能告诉我为什么圆角应用于表格单元格而不是 uiImageView 吗？

[http://i.stack.imgur.com/CnkyQ.png](http://i.stack.imgur.com/CnkyQ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:00:47.987

`(UIImageView*)[cell viewWithTag:0];`

在子视图中，`cell`您只有.`UITableViewCellContentView``tag == 0`

您可以手动将 UIImageView 添加到单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:53:06.003

问题应该是`...Tag:0`：

```
image = (UIImageView*)[cell viewWithTag:0]; // get the UIImageView from the nib 
```

如果您使用的是非自定义`UITableViewCell`替换该行：

```
image = (UIImageView*)[cell imageView]; 
```

否则，更换标签号。

# wordpress - 在 wordpress 中将默认 URL 更改为 root 时遇到问题

> ID：12898094
> 
> 赞同：5
> 
> 时间：2012-10-15T14:45:00.297
> 
> 标签：wordpress, dns, amazon-web-services, bitnami

我在 Bitnami 主机上创建了一个服务器，并在我的 EC2 实例上安装了 Wordpress。我现在面临两个问题：

1.  我可以使用访问我的 wordpress 网站，`http://<my_domain>/wordpress`但我希望通过访问直接访问它`http://<my_domain>`。我知道您的网站上列出了很多方法，但没有一个对我有用。我注意到的一件事是，我可以在 wordpress 的常规设置中使用 wordpress 地址和站点地址字段来实现相同的目的，但是这些字段在我的 wordpress 应用程序中是灰色的，我无法更改这些字段，你能告诉我吗为什么它们是灰色的，我该如何激活它们？

2.  [我尝试使用http://wiki.bitnami.org/Applications/BitNami_Wordpress_Stack#How_to_change_the_WordPress_domain_name.3f](http://wiki.bitnami.org/Applications/BitNami_Wordpress_Stack#How_to_change_the_WordPress_domain_name.3f)中给出的提示来解决我的问题现在，由于某种原因，我根本无法访问我的网站。我在处理我的 htaccess 和 conf 文件之前进行了备份，当我的服务器无法访问时，我只是恢复了备份并刷新了我的页面。但我无法解决问题，也无法使用我的仪表板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T16:03:39.223

标准流程是运行以下命令：

```
$ sudo /opt/bitnami/apps/wordpress/updateip --appurl / 
```

此命令更改以下选项：

检查 /opt/bitnami/apps/wordpress/conf/wordpress.conf 文件。它应该类似于：

```
# App url moved to root
DocumentRoot "/opt/bitnami/apps/wordpress/htdocs"
#Alias /wordpress/ "/opt/bitnami/apps/wordpress/htdocs/"
#Alias /wordpress "/opt/bitnami/apps/wordpress/htdocs"

<Directory "/opt/bitnami/apps/wordpress/htdocs">
    Options Indexes MultiViews +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    RewriteEngine On
    #RewriteBase /wordpress/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . index.php [L]
</Directory> 
```

然后清除您的浏览器缓存并尝试再次访问您的 URL。

如果您想在 WordPress 管理面板中配置灰色选项，您可以在 /opt/bitnami/apps/wordpress/htdocs/wp-config.php 中指定您的域名。将 $_SERVER['HTTP_HOST'] 替换为您自己的域名。

```
define('WP_SITEURL', 'http://' . $_SERVER['HTTP_HOST'] . '/');
define('WP_HOME', 'http://' . $_SERVER['HTTP_HOST'] . '/'); 
```

我希望它有所帮助。

# svn - Subversion 1.6 目录的时间戳不是 SVN 上次修改的时间戳，为什么？

> ID：12898099
> 
> 赞同：1
> 
> 时间：2012-10-15T14:45:06.663
> 
> 标签：svn, directory, timestamp

我正在使用 Subversion 1.6.11（在 Unix 上）并试图用来`svn export`获取 SVN 存储库的负责人，以便以后`rsync`使用我的网络服务器。
我的问题是所有导出的目录都具有当前时间（=`svn export`执行时间）而不是`last modified timestamp`SVN 修订版。
另一方面，所有文件都有正确的时间戳。

1.  我怎样才能得到`last modified timestamp`我的目录呢？

2.  我读到 Subversion 1.7 调整了他们处理目录版本控制的方式，但升级真的能帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:02:37.947

1.  对 dirs 使用 mtime 是操作系统端的正确行为（mtime 是最后一次修改的时间，是吗？最后一次修改是时间，当最后一个文件写入 dir 时，是的？SVN 在 OS I/O 之上什么都不做）
2.  1.7 仅更改了工作副本存储（WC-NG：WC-root 中有一个 .svn 而不是*每个 subdir*），因此 - 更改对您没有任何用处

`svn ls -v REPO_PATH`或者`svn ls -v -R REPO_PATH`在不好的情况下会显示 dir 的最后提交时间，你只能触摸导出的树

# c# - 如何防止 TextBox 历史记录存储在 WPF 应用程序中？

> ID：12898100
> 
> 赞同：1
> 
> 时间：2012-10-15T14:45:12.123
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，并且有一个用于搜索的文本框。

有没有办法可以标记这个`TextBox`，所以它的文本不会被 Windows 或浏览器自动完成功能存储，这些功能会显示所有过去条目的下拉列表`TextBox`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:55:55.567

您可以尝试使用此代码

```
TextBox textBox = new TextBox();
textBox.Undo();//Undoes the last edit operation
textBox.ClearUndo();//Clears information about the most recent operation from the undo buffer 
```

# javascript - 如何使用 JavaScript 替换用一个换行符替换一系列回车/换行符？

> ID：12898103
> 
> 赞同：1
> 
> 时间：2012-10-15T14:45:16.307
> 
> 标签：javascript, replace, special-characters

使用 jQuery 文本函数，我收到了一个包含大量回车/换行符的字符串。

例如，“\r\n \r\n \r\n 欢迎鲍勃\r\n\t \r\n\r\n\r\n \r\n \r\n \r\n \r \n \r\n \r\n \r\n 推荐：Hellot\r\n\r\n\r\n \r\n \r\n\r\n \r\n \r\n \ r\n \r\n\r\n \r\n \r\n” 。

是否可以只使用一个换行符而不是使用 JavaScript 的序列，大概是替换函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:13:04.793

采用

```
str.replace(/\s*?[\r\n]\s*/g, "\n"); 
```

匹配回车/换行符周围的任何空格并将它们`\n`完全替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:52:20.390

JavaScript 替换函数仅替换第一个匹配项。您必须使用正则表达式来实现您想要的。

`str.replace(/(\r\n[ \t]*)+/g, "\r\n");`

[这里](https://stackoverflow.com/questions/832257/javascript-multiple-replace)有一个更广泛的 SO 答案。

对于正则表达式`(\r\n[ \t]*)+`：：

```
(         # start group
\r\n      # match your newlines
[ \t]*    # match zero or more spaces and tabs
)         # end group
+         # match all the above once or more times 
```

# c - 如何在程序中包含内核头文件

> ID：12898107
> 
> 赞同：2
> 
> 时间：2012-10-15T14:45:25.150
> 
> 标签：c, linux, network-programming, linux-kernel, header-files

我正在编写一个 libnetfilter_queue 程序。我是 linux 内核编程的新手。我需要包含 linux/skbuff.h、net/checksum.h 和许多在 /usr/include/linux 中不存在的相关内核头文件。我在编译时收到以下错误

```
 fatal error: linux/skbuff.h: No such file or directory
 fatal error: net/checksum.h: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:48:40.390

试试这个`find / -name skbuff.h 2>/dev/null`，然后当它找到位置`-I/path/to/folder`时，在你编译你的程序时使用。如果它没有找到你没有它的标题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-11T17:13:34.033

如果您有定位数据库，`locate linux/skbuff.h`.

# ios - UIWebView 不在 ios 中显示内容

> ID：12898113
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:45:56.873
> 
> 标签：ios, webview

我一直在处理一个需要与 SplitViewController 类似的 GUI 的小项目。现在我所做的是，我有两个 UIViewController，即 MasterViewController 和 DetailViewController，它们被添加为 ViewController 的子视图。 ViewController.m 的代码如下所示

```
- (void)viewDidLoad
{  
   UIScreen *screen = [UIScreen mainScreen];
   CGRect fullScreenRect = screen.bounds; // always implicitly in Portrait orientation.
   width = fullScreenRect.size.width;
   height = fullScreenRect.size.height;
   detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
   masterViewController = [[[MasterViewController alloc]initWithNibName:@"MasterViewController" bundle:nil] autorelease];
   masterViewController.view.frame = CGRectMake(0, 0, 299, height);
   detailViewController.view.frame = CGRectMake(300, 0, width-300, height);

  [self.view addSubview:masterViewController.view];
  [self.view addSubview:detailViewController.view];
} 
```

现在在 MasterViewController didLoad 方法中，我已将其添加为子视图 MasterTableViewController ...

MasterTableViewController 类看起来像这样......

```
 @interface MasterTableViewController : UITableViewController 
   {
     DetailViewController *detailViewController;
   } 
```

所有与 UITableViewController 相关的功能都已经完成......我还添加了从用户添加 URL 并将其存储在 MasterTableView 中的功能。现在在下面的函数中，我试图用所需的字符串调用 DetailViewController 的 loadWebView 函数。对函数的调用是完美的。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
   NSString *urlString = [_objects objectAtIndex:indexPath.row];
   detailViewController = [[DetailViewController alloc]init];
   [detailViewController loadWebView:urlString];
 } 
```

在 DetailViewController 的 loadWebView 方法中，我有以下实现..

```
 -(void) loadWebView: (NSString *) urlToLoad
 {
   self.webView = [[[UIWebView alloc]
                 initWithFrame:CGRectMake(0, 45, self.view.frame.size.width, self.view.frame.size.height)] autorelease];
   [self.webView setDelegate:self];

   NSLog(@"SELF->WEBVIEW: %@",self.webView);
   NSURL *url = [NSURL URLWithString:urlToLoad];
   NSLog(@"loading url %@ %@", urlToLoad, self.webView);
   NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

   [self.webView loadRequest:requestObj];
 } 
```

我还实现了以下功能，以确保我的 Webview 正常工作..

```
 - (void)webViewDidStartLoad:(UIWebView *)webView
 {
    NSLog(@"webViewDidStartLoad");
 }
 - (void)webViewDidFinishLoad:(UIWebView *)webView
 {
    NSLog(@"webViewDidFinishLoad");
 } 
```

现在当我运行我的程序时，日志会打印所有这些东西......

```
 2012-10-15 20:04:21.621 SyneBlogApp[2320:c07] device width height 768.000000 1024.000000
 2012-10-15 20:04:21.630 SyneBlogApp[2320:c07] calling viewDidLoad for detailView
 2012-10-15 20:04:21.636 SyneBlogApp[2320:c07] /Users/Library/Application Support/iPhone Simulator/5.1/Applications/B846EDA4-49CF-4DD3-AAB3-FF8BC19C65DA/Documents/Data.plist: 
 2012-10-15 20:04:22.942 SyneBlogApp[2320:c07] calling viewDidLoad for detailView
 2012-10-15 20:04:22.954 SyneBlogApp[2320:c07] SELF>WEBVIEW: <UIWebView: 0x6a94510; frame = (0 45; 768 1004); layer = <CALayer: 0x6a94930>>
 2012-10-15 20:04:22.955 SyneBlogApp[2320:c07] loading url http://wordpress.com   <UIWebView: 0x6a94510; frame = (0 45; 768 1004); layer = <CALayer: 0x6a94930>>
 2012-10-15 20:04:22.994 SyneBlogApp[2320:c07] webViewDidStartLoad
 2012-10-15 20:04:26.828 SyneBlogApp[2320:c07] webViewDidFinishLoad 
```

根据日志，我的 webview 完美地加载了数据，但是当我查看模拟器时，我得到一个白屏。那就是内容没有显示出来...

现在只是为了确保 webview 没有任何问题，我在 DetailViewController viewDiDloadMethod 中尝试了以下操作并显示了谷歌页面......

```
 - (void)viewDidLoad
  {
    self.webView = [[[UIWebView alloc]
                 initWithFrame:CGRectMake(0, 45, self.view.frame.size.width,    self.view.frame.size.height)] autorelease];
    NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

   [self.webView loadRequest:requestObj];
   [self.view addSubview:self.webView];
   [super viewDidLoad];
   NSLog(@"calling viewDidLoad for detailView");
  } 
```

现在我真的不知道出了什么问题。即使所有事情都在日志中运行良好，但网页内容仍然没有显示出来。如果您有任何线索，请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:52:12.980

这...

```
 detailViewController = [[DetailViewController alloc]init]; 
```

...创建一个新`DetailViewController`的，而不是使用您在显示的第一个代码段中已经创建并成为显示的一部分的那个。因此，您正在为不在屏幕上的控制器/视图加载 Web 视图。

# javascript - 如何在chrome中获取当前活动元素？

> ID：12898114
> 
> 赞同：0
> 
> 时间：2012-10-15T14:45:58.520
> 
> 标签：javascript, jquery, google-chrome, safari

我正在尝试使用 if 语句来确定提交了哪个按钮/文本框。

例如在firefox/IE/Opera中，当我单击标有submitNameSearch as id的按钮时，以下代码总是可以返回true；

```
$(document.activeElement)[0] === $("#submitNameSearch")[0] 
```

但是，当我在 chrome/safari 中测试我的代码时，返回值为 false。

请问我是不是做错了什么？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:48:34.013

如果它是在点击时触发的，你为什么不这样做：

```
$('button').on('click', function() {
    if (this.id=='submitNameSearch') {
        //do something
    }
}); 
```

并查看在焦点转移到单击的按钮之前哪个元素具有焦点，您可以随时执行以下操作：

```
var activeElm = null;

$('button').on({
    mousedown: function() {
        activeElm = document.activeElement;
    },
    click: function() {
        if (activeElm&&aciveElm.id=='submitNameSearch') {
             activeElm.focus; //returns focus
        }
    }
}); 
```

# apache - 带有 mod_remoteip 的 Apache 反向代理

> ID：12898115
> 
> 赞同：0
> 
> 时间：2012-10-15T14:46:01.280
> 
> 标签：apache, proxy, reverse, proxypass

我已配置 apache（2.4 版）反向代理以在我们的网站上发布安装在内部服务器中的应用程序。一切正常，这些是我在 proxy-html.conf 中添加的行：

```
ProxyPass /app/bpv0SOCPOkqptPqO6XsIvucLzO7QXJyA/ http://srvacg:9081/acgv4/ 
```

如果我写这个网址[http://www.mysite.com/app/bpv0SOCPOkqptPqO6XsIvucLzO7QXJyA/](http://www.mysite.com/app/bpv0SOCPOkqptPqO6XsIvucLzO7QXJyA/)我可以登录我的内部应用程序，我可以使用它。

问题是我的应用程序检查客户端的 IP 地址，并且同一时间只允许 1 个连接。配置反向代理后，所有连接都是使用安装 apache 的服务器的私有 IP 完成的。

我试图让 mod_remoteip 来解决这个问题：

```
RemoteIPHeader X-Forwarded-For 
```

但结果总是一样的。这是apache访问日志：

```
REMOTE-IP: %a - LOCAL-IP: %A | X-Forwarded-For: %{X-Forwarded-For}i | h: %h | UNDERLYING CLIENT IP: %{c}a |

REMOTE-IP: 217.57.XXX.XXX - LOCAL-IP: 192.168.89.3 | X-Forwarded-For: 217.57.XXX.XXX | h: 217.57.XXX.XXX | UNDERLYING CLIENT IP: 217.57.XXX.XXX | 
```

217.57.XXX.XXX是客户端ip，192.168.89.3是内部ip，是我的应用收到的ip。我不知道它是如何获得这些信息的。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:39:56.087

如果您无法根据您的要求修改该应用程序，那么也许您可以包装它？

如果您可以安装一个额外的应用程序，一个简单的包装器，而不是一个简单的脚本，您可能能够构建一个解决方法：配置代理服务器以将所有请求转发到该包装器而不是“真正的”内部应用程序。然后包装器可以代表代理服务器发出内部请求，以代理（或客户端）的方式请求“真实”应用程序并转发回复。优点：您可能能够构造一个看似源自原始远程客户端 IP 的请求，包装器可以将其视为代理服务器添加的附加标头。由于从包装器到“真实”应用程序的请求是系统内部的，因此没有包通过网络移动，因此防火墙无法阻止任何内容。

我没有尝试过，但这可能是一种解决方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T01:16:48.443

由于某些原因，**mod_remoteip**不适用于我的实现。

相反，正如在**Apache 2.4 上测试的那样，**我发现这是可行的。

对于**httpd.conf**尝试搜索**<IfModule log_config_module>**所在的部分，并将 CustomLog 语句替换为：

```
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" proxy
CustomLog "logs/access.log" proxy 
```

**LogFormat**语句创建一个名为 proxy 的自定义日志格式，它使用代理转发的环境变量**X-Forwarded-For**作为来自真实客户端的远程 IP 地址的来源。

**CustomLog**语句只是使用自定义日志格式“代理”将结果写入“access.log”，而现在出现真实 IP 地址。

# java - 如何在 Java 中使用 Scanner 正确读取汉字？

> ID：12898123
> 
> 赞同：4
> 
> 时间：2012-10-15T14:46:22.717
> 
> 标签：java

编程语言：Java 任务：设计一个将中文字符串映射到数字的哈希函数问题：正确阅读和显示汉字

这是一道作业题，但我不是在问怎么做，只是在阅读汉字时遇到了困难。

我的任务的简短描述：设计一个散列函数，将我们班的（中国）学生姓名映射到他们的学生 ID 和其他卫星数据（性别、电话等）。

我仍在考虑它，但就像其他语言一样，这涉及到我使用字符的字符编码来通过哈希函数得出一个唯一值，如果我没记错的话。

以下是我必须测试这种思路的有效性的内容：

```
// test whether console can read chinese characters
Scanner s = new Scanner(System.in);

System.out.print("Please enter a Chinese character: ");
int chi = (int)s.next().toCharArray()[0];

System.out.println("\nThe string entered is " + chi); 
```

如果我使用简单的 System.out.println("character") 语句，则会显示正确的字符。

但如上所示，如果我使用 Scanner 读取输入，我尝试将 String 转换为 char 数组，然后转换为它的 int unicode 等价物，但它给出了一个荒谬的数字，我无法正确显示它。

我意识到我可以使用这个错误值来设计一个哈希函数，但是为了不产生可能的冲突（我不知道这些是否会产生 UNIQUE 错误值），并且为了学习，你能指出如何我可以在不同的机器上统一输入汉字吗？

永远感谢你的想法。:D

巴乔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:52:08.033

创建 Scanner 时，您还可以告诉它使用哪种字符编码。[这是文档。](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.io.InputStream,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T15:13:48.657

当您不使用基本的 ASCII 字符时，您需要考虑您使用的是哪个字符集。大多数情况下它将是 UTF-8，但也可以使用其他字符集。

要记住的一件事是非 ASCII 字符的大小可以超过 1 个字节。汉字也是如此。

处理多字节字符时，您需要考虑代码点（表示 UTF-8 字符的整数）而不是单字节字符。

较新版本的 Java 允许您使用代码点迭代字符串。查看 String 的 Java API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:46:14.160

You are over-thinking this. Every `String` is already (conceptually) a sequence of characters, including Chinese characters.. Encoding only comes into it when you need to convert it into a bytes, which you don't need to for your assignment. Just use the `String`'s hashcode. In fact, when you create a `HashMap<String,YourObject>`, that's exactly what will happen behind the scenes.

# html - 在谷歌浏览器中，滚动条在我更改页面缩放之前将不起作用

> ID：12898124
> 
> 赞同：3
> 
> 时间：2012-10-15T14:46:26.217
> 
> 标签：html, css, google-chrome, browser

我不知道这是否是浏览器问题，但我使用的是 Google Chrome。现在假设我添加了几行表格，突然出现了表格的滚动条（我说在 500px 之后，在我的 css 中显示一个滚动条）。现在，如果我尝试使用滚动条，它不会移动，我意识到如果我更改浏览器网页的缩放比例，然后使用滚动条，它就会滚动。

现在每次我追加一行时，我都需要更改缩放比例，然后再将其更改回来，以便我能够使用滚动条。

这只是浏览器的故障还是我做错了什么？

在 Firefox 中，添加一行后滚动条似乎工作正常，没有任何问题。

滚动表的基本css如下：

```
#details{
    height:500px;
    overflow:auto;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:27:30.300

尝试将溢出更改为`scroll`. 测试您的追加是否可能出现问题的好方法。

# android - Android 自定义视图 onMeasure onDraw 生命周期

> ID：12898128
> 
> 赞同：5
> 
> 时间：2012-10-15T14:46:39.317
> 
> 标签：android, view, ondraw

我在 android 中创建了一个自定义视图，它扩展了 View。我覆盖了 onDraw() 方法并在那里对画布进行绘画 - 没问题。

我知道我也应该重写 onMeasure() 方法并使用我想要的尺寸调用 setMeasuredDimension(width, height) 。

我注意到如果我在代码中放置断点，onMeasure() 会在 onDraw() 之前触发。

现在我的问题是，直到 onDraw 完成执行，我才知道视图所需的高度。我的高度从默认值 100 开始，然后在 onDraw 结束时设置 - 但在此之前已经执行了 onMeasure，所以我的视图只有 100 px 高。

如何设计我的视图，以便在 onDraw() 之后重新测量它，以便动态确定我的视图高度？

# odoo - OpenERP 6.1 具有不同字段的多个视图

> ID：12898134
> 
> 赞同：0
> 
> 时间：2012-10-15T14:46:57.410
> 
> 标签：odoo, openerp-6

我想在 OpenERP 中创建不同“种类”的采购订单表格，每个表格都有不同的字段。由于继承模型，我假设我不能继承具有不相交字段的多个子项。所以我决定创建一个超集子集，它包含来自所有类型 PO 的所有字段。

然后我创建了不同的视图，包含来自继承模型的不同字段。

但是每个视图都显示相同的超集。

请告知我是否以正确的方式执行此操作，或者除了 fields_view_get() 之外没有其他方法。谢谢

代码：

```
class purchase_order_hash(osv.osv):
_name = 'purchase.order'
_inherit = 'purchase.order'
_columns={
            'quality_code': fields....,
            'rice_quality': fields....,
            'packing_code': fields....,
            'packing_type': fields....,
            'late_payment': fields.float('Late Payment'),
            'num_bags': fields.integer('Number of Bags'),
            'unit_kg': fields.integer('Unit kg'),
            'rate_': fields.float('Rate', digits=(16,2), help="Rate"),
            'penalty_moisture': fields.float('Moisture Penalty', digits=(16,2), help="Percentage"),
            'penalty_broken': fields.float('Broken Penalty', digits=(16,2), help="Percentage"),
            'num_trucks': fields.integer('Number of Trucks'),
    'test1': fields.integer('Test 1')
          }
purchase_order_hash() 
```

（查看 xml:)

```
 <record id="purchase_order_hash_form" model="ir.ui.view">
                    <field name="name">purchase_order_hash_form</field>
                    <field name="model">purchase.order</field>
        <field name="priority" eval="1" />
                    <field name="type">form</field>
                    <field name="inherit_id" ref="purchase.purchase_order_form" />
                    <field name="arch" type="xml">
            <field name="origin" select="2" position="after">
                <field name="quality_code"/>
                <field name="rice_quality"/>
                <field name="packing_code"/>
                <field name="packing_type"/>
                <field name="late_payment"/>
                <field name="num_bags"/>
                <field name="unit_kg"/>
                <field name="rate_"/>
                <field name="penalty_moisture"/>
                <field name="penalty_broken"/>
                <field name="num_trucks"/>
            </field>
        </field>
    </record>

    <record id="purchase_order_hash_form_test" model="ir.ui.view">
        <field name="name">purchase_order_hash_form_test</field>
        <field name="model">purchase.order</field>
        <field name="priority" eval="2" />
        <field name="type">form</field>
        <field name="inherit_id" ref="purchase.purchase_order_form" />
        <field name="arch" type="xml">
            <field name="origin" select="2" position="after">
                <field name="test1"/>
            </field>
            <field name="num_trucks" position="replace"/>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_PO_hash">
        <field name="name">action_PO_hash</field>
        <field name="res_model">purchase.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="purchase_order_hash_form" />
    </record>

    <record model="ir.actions.act_window" id="action_PO_hash_test">
        <field name="name">action_PO_hash_test</field>
        <field name="res_model">purchase.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="purchase_order_hash_form_test" />
    </record>

    <menuitem id="menu_PO_hash" name="menu_PO_hash" action="action_PO_hash" parent="purchase.menu_procurement_management"/>
    <menuitem id="menu_PO_hash_test" name="menu_PO_hash_test" action="action_PO_hash_test" parent="purchase.menu_procurement_management"/> 
```

[2012 年 10 月 16 日更新：view.xml - 最终工作代码：]

```
 <record model="ir.actions.act_window" id="action_PO_hash">
        <field name="name">action_PO_hash</field>
        <field name="res_model">purchase.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
    </record>

    <record model="ir.actions.act_window" id="action_PO_hash_test">
        <field name="name">action_PO_hash_test</field>
        <field name="res_model">purchase.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
    </record>

    <record model="ir.actions.act_window.view" id="action_PO_hash_2">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="purchase_order_hash_form"/>
        <field name="act_window_id" ref="action_PO_hash"/>
    </record>

    <record model="ir.actions.act_window.view" id="action_PO_hash_test_2">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="purchase_order_hash_form_test"/>
        <field name="act_window_id" ref="action_PO_hash_test"/>
    </record>

    <menuitem id="menu_PO_hash" name="menu_PO_hash" action="action_PO_hash" parent="purchase.menu_procurement_management"/>
    <menuitem id="menu_PO_hash_test" name="menu_PO_hash_test" action="action_PO_hash_test" parent="purchase.menu_procurement_management"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:57:09.870

如果您想为每个操作获取不同的表单，那么您必须在不继承视图的情况下创建不同的表单。然后对于您新创建的每个表单和树视图，请指定窗口操作。例如：

```
<record model="ir.actions.act_window.view" id="a_unique_name_as_id">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="your_view_ref_id"/><!--use ref="purchase_order_hash_form_test"-->
            <field name="act_window_id" ref="your_action_reference_id"/><!--use ref='action_PO_hash_test'-->
        </record> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:08:35.417

要创建不同“种类”的采购订单表格，您必须在不继承它们的情况下创建不同的表格，并在您的操作中提供这些表格的参考。在您的操作中写下以下标签：

```
<field name="view_id" ref="id_of_your_form"/> 
```

你可以在你的插件中找到很多例子。
要查看示例，请转到 addons-6.1/account/account_view.xml：使用“view_id”查找

# jquery - 使用 jQuery 填充下拉列表项

> ID：12898135
> 
> 赞同：1
> 
> 时间：2012-10-15T14:47:08.197
> 
> 标签：jquery, asp.net

我们在 ASP.NET 中继器中生成一个下拉列表，如下所示 -

```
<asp:DropDownList ID="ddlQty" runat="server">
    <asp:ListItem Text="0" Value="0" Selected="True" />
</asp:DropDownList> 
```

所以页面上生成了几个下拉列表。对于所有这些列表，我正在尝试填充包含来自`1 to 10`.

```
jQuery(document).ready(function () {

    var ddlQty = jQuery("select[id$='ddlQty']");                
    jQuery.each(ddlQty, function () {
        var curDdl = jQuery(this).next();            
        for (i = 1; i <= 10; i++)
            curDdl.append(jQuery('<option>', { value: i, text: i }));
    });
}); 
```

此代码不起作用，请您帮忙。

谢谢你 ！

**编辑：**

感谢您的所有回复，问题在于，，`generating ID of repeaters`转发器控件 ID 已替换为 ***ddlQty_0，所以我必须在 jQuery 中使用包含通配符。

**固定代码。**

jQuery（文档）.ready（函数（）{

```
var ddlQty = jQuery("select[id*='ddlQty']");

jQuery.each(ddlQty, function () {
    var curDdl = jQuery(this);
    for (i = 1; i <= 10; i++)
        curDdl.append(jQuery('<option>', { value: i, text: i }));
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:49:20.207

尝试更换：

```
var curDdl = jQuery(this).next(); 
```

和：

```
var curDdl = jQuery(this); 
```

您不需要处理 DOM 中的下一个元素，而是使用作为下拉列表的当前元素。

您的代码也可以简化一点：

```
jQuery(document).ready(function () {

    jQuery('select[id$="ddlQty"]').each(function() {
        var curDdl = jQuery(this);
        for (i = 1; i <= 10; i++) {
            curDdl.append(jQuery('<option>', { value: i, text: i }));
        }
    });
}); 
```

# java - 如何避免 Fortify 中的误报“Null Dereference”错误

> ID：12898142
> 
> 赞同：6
> 
> 时间：2012-10-15T14:47:33.277
> 
> 标签：java, fortify

我在一个 java 项目上使用“HP Fortify v3.50”，我在“Null Dereference”上发现了很多误报，因为 Fortify 没有看到对 null 的控制是在另一种方法中。如何减少误报并保持规则？

这是一个 POC

```
public class MyClass {
    public static void main(String[] args) {
        String string01 = null;
        String string02 = null;     
        int i;

        if (args[0].equals("A")) {
            string01 = "X";
            string02 = "Y";
        }

        if (!isNull(string02)){
            i = string02.length();} //False Positive
        else {
            i = string02.length();
        } // Yes, it is an error!
    }

    public static boolean isNull(Object toBeTested){
        return (null == toBeTested);        
    }
} 
```

结果：

```
[E8837DB548E01DB5794FA71F3D5F51C8 : medium : Null Dereference : controlflow ]
    MyClass.java(13) : Assigned null : string02
    MyClass.java(16) : Branch not taken: (!args[0].equals("A"))
    MyClass.java(20) : Branch taken: (!isNull(string02))           //False Positive
    MyClass.java(21) : Dereferenced : string02

[E8837DB548E01DB5794FA71F3D5F51C9 : medium : Null Dereference : controlflow ]
    MyClass.java(13) : Assigned null : string02
    MyClass.java(16) : Branch not taken: (!args[0].equals("A"))
    MyClass.java(20) : Branch not taken: isNull(string02)
    MyClass.java(23) : Dereferenced : string02 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T11:33:09.137

这看起来更像是一个 SCA 问题，您应该将其提交给他们的支持团队。或者只是将其审核为不是问题。这不是可以通过自定义规则解决的问题。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-04-23T20:56:11.340

取消引用空指针或进入无限循环可能会导致拒绝服务攻击，但它也可能为攻击者利用一些经过深思熟虑的错误处理代码创造必要条件。

见[https://cwe.mitre.org/data/definitions/476.html](https://cwe.mitre.org/data/definitions/476.html)和[https://www.owasp.org/index.php/Null_Dereference](https://www.owasp.org/index.php/Null_Dereference)

# rbenv - 在 rbenv 环境中安装 wkpdf

> ID：12898149
> 
> 赞同：2
> 
> 时间：2012-10-15T14:47:59.817
> 
> 标签：rbenv, ruby-cocoa

我有一个全新安装的山狮 10.8.2 并安装了 rbenv 和 gem 安装了 wkpdf。当我尝试运行 wkpdf 时，我收到以下消息：

```
xxxx-MacBook-Pro:~ xxx$ wkpdf --help  
Cannot load RubyCocoa library
wkpdf requires that RubyCocoa is installed, which is shipped by default since
Mac OS X 10.5\. If you use Mac OS X 10.4, you have to install RubyCocoa
yourself from http://rubycocoa.sourceforge.net/HomePage 
```

可以在 rbenv 环境中运行 wkpdf 吗？（我已经在 rbenv github 上发布了一个类似的问题，但还没有回复）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:08:49.993

您可能已经在“系统”版本之外的 Ruby 版本中安装了 wkpdf。使用 .检查您的活动版本`rbenv versions`。

安装和使用 wkpdf 时，请确保您已选择“系统”版本：

```
RBENV_VERSION=system gem install wkpdf 
```

此外，在使用 gem 时，您还必须使用“系统”版本来执行项目中的代码，否则将找不到 gem。

似乎由于 wkpdf 工作方式的性质，它依赖于在 OS X 上的系统 Ruby 中执行。

# python - 给定选项时为 optionparser 设置默认选项

> ID：12898153
> 
> 赞同：1
> 
> 时间：2012-10-15T14:48:17.723
> 
> 标签：python, default-value, choice, optparse, optionparser

我有一个解析可选 --list-something 选项的 python 选项解析器。我还希望 --list-something 选项有一个可选参数（一个选项）

在这里使用参数`default="simple"`不起作用，否则 simple 将始终是默认值，不仅是在给出 --list-something 时。

```
from optparse import OptionParser, OptionGroup
parser = OptionParser()
options = OptionGroup(parser, "options")
options.add_option("--list-something",
                   type="choice",
                   choices=["simple", "detailed"],
                   help="show list of available things"
                  )
parser.add_option_group(options)
opts, args = parser.parse_args()
print opts, args 
```

上面的代码产生了这个：

```
[jens@ca60c173 ~]$ python main.py --list-something simple
{'list_something': 'simple'} []
[jens@ca60c173 ~]$ python main.py --list-something 
Usage: main.py [options]

main.py: error: --list-something option requires an argument
[jens@ca60c173 ~]$ python main.py 
{'list_something': None} [] 
```

但我希望这发生：

```
[jens@ca60c173 ~]$ python main.py --list-something simple
{'list_something': 'simple'} []
[jens@ca60c173 ~]$ python main.py --list-something 
{'list_something': 'simple'} []
[jens@ca60c173 ~]$ python main.py 
{'list_something': None} [] 
```

我想要在 python 2.4 到 3.0 之前开箱即用的东西（不包括 3.0）

由于 argparse 仅在 python 2.7 中引入，这不是我可以使用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:07:03.537

Optparse 没有任何选项可以轻松完成此操作。相反，您必须为您的选项创建自定义回调。解析您的选项时触发回调，此时您可以检查剩余的参数以查看用户是否为该选项添加了参数。

查看文档的自定义回调部分，特别是[回调示例 6：变量参数](http://docs.python.org/library/optparse.html#callback-example-6-variable-arguments)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-18T10:22:52.640

python 中的 Optparser 没有默认值。
但是，您可以使用以下 -

```
# show help as default
if len(sys.argv) == 1:
  os.system(sys.argv[0] + " -h")
  exit() 
```

这将使用该选项运行相同的脚本`-h`，然后退出。
请注意 - 您需要导入 sys 模块。

# objective-c - 无法在低于IOS6的设备上测试社交框架

> ID：12898154
> 
> 赞同：0
> 
> 时间：2012-10-15T14:48:18.807
> 
> 标签：objective-c, ios, ipad, frameworks

我正在使用社会框架。在带有 IOS6 的 iPad 上它工作正常。但是当我在带有 IOS 5 的设备上测试它时，我得到了以下错误。

```
dyld: Library not loaded: /System/Library/Frameworks/Social.framework/Social
  Referenced from: /var/mobile/Applications/3A3020E0-09D7-49DD-96E2-2E0F20C098D2/RacingGenk.app/RacingGenk
  Reason: image not found 
```

有人可以帮忙吗？

亲切的问候。

史蒂夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:50:55.383

社交框架在 iOS 6 之前不可用，这解释了您遇到的问题。

您需要做的是*弱链接*社交框架，它可以让您在 iOS 6 上使用它，但不会导致 iOS 6 之前的设备尝试加载它。要弱链接库，您应该在 XCode 中选择应用程序的目标，转到*Build Phases*选项卡，并在*Link Binary with Libraries*下确保将“Social.framework”条目设置为*Optional*而不是*Required*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:12:34.327

社交框架是在 iOS 6 中引入的，但如果您希望在运行 6.0 之前的 iOS 版本的设备上拥有 facebook、twitter 和许多其他社交网络/网站的共享能力，那么请随意探索 sharekit：

[http://getsharekit.com/](http://getsharekit.com/)

它非常易于使用，适用于 iOS 6 应用程序和在早期版本的 iOS 上运行的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:49:57.863

那是因为 Facebook 集成仅在 iOS6 上可用。但是，您仍然可以使用 < IOS6 设备的原始 Facebook API 来使用 facebook。

# javascript - Javascript 回调和“this”

> ID：12898157
> 
> 赞同：1
> 
> 时间：2012-10-15T14:48:29.220
> 
> 标签：javascript, callback

我有以下 Javascript 代码，我正在尝试让回调工作，如下所示。我想看到一个带有“123”的警报。

```
var A = function(arg){
    this.storedArg = arg;
    this.callback = function(){ alert(this.storedArg); }
}

var B = function() {
    this.doCallback = function(callback){ callback(); }
}       

var pubCallback = function(){ alert('Public callback') };

var a = new A(123);
var b = new B();

b.doCallback(pubCallback); // works as expected
b.doCallback(a.callback);  // want 123, get undefined 
```

我明白发生了什么，但我不知道如何解决它。如何获得引用我的对象的回调函数？就我而言，我可以更改 A 但不能更改 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:51:22.387

所以你想要的是将上下文传递给`doCallBack`.

例如

```
doCallBack = function (callback, callee) { 
    callback.apply(callee);
} 
```

那么你会这样做：

```
b.doCallBack(a.callback, a); 
```

如果你不能修改 B，那么你可以在 A 中使用闭包：

```
var A = function (arg) {
    var self = this;
    this.storedArg = arg;
    this.callback = function () { alert(self.storedArg); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:52:32.637

`this`您可以通过将其放入变量中来创建一个包含所需范围的变量`that`

```
var A = function(arg){
    this.storedArg = arg;
    var that = this; // Add this!
    this.callback = function(){ alert(that.storedArg); }
} 
```

在这里工作演示：http: [//jsfiddle.net/vdM5t/](http://jsfiddle.net/vdM5t/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:53:08.250

> 我了解发生了什么（在第二次回调期间，“this”是 b 而不是 a）

不，JS 不是可能发生某些事情的基于类的语言。如果`function(){ alert(this.storedArg);`只是被称为`callback();`（如 in `b.doCallback`），则[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)指向全局对象（`window`）。

要解决这个问题，您必须更改`A`为

```
var A = function(arg){
    var that = this; // store reference to the current A object
    this.storedArg = arg;
    this.callback = function(){
        alert(that.storedArg); // and use that reference now instead of "this"
    };
} 
```

如果您不希望`storedArg`属性发生变化，您甚至可以使其更简单：

```
var A = function(arg){
    this.storedArg = arg;
    this.callback = function(){
        alert(arg); // just use the argument of the A function,
                    // which is still in the variable scope
    };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:55:07.313

您需要传递您希望回调执行的上下文：

```
var B = function() {
    this.doCallback = function(callback, context) {
        callback.apply(context); 
    };
};

b.doCallback(a.callback, a); // 123 
```

[http://jsfiddle.net/a9N66/](http://jsfiddle.net/a9N66/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T14:55:49.703

因为在`A.callback`函数内部，`this`不是指对象`A`而是`window`对象。

```
var A = function(arg){
    this.storedArg = arg;
    this.callback = function(){ alert(this.storedArg); }
    -----------------------------------^-----------------
} 
```

你可以试试这个

```
var A = function(arg){
    this.storedArg = arg;
    var that = this;
    this.callback = function(){ alert(that.storedArg); }
}

var B = function() {
    this.doCallback = function(callback){ callback(); }
}       

var pubCallback = function(){ alert('Public callback') };

var a = new A(123);
var b = new B();

b.doCallback(pubCallback); // works as expected
b.doCallback(a.callback);  // alerts 123 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T14:53:26.273

当你这样做时：

```
b.doCallback(a.callback); 
```

只是调用 a 的`callback`函数而不告诉它使用`a`for `this`；所以全局对象用于`this`.

一种解决方案是将回调包装起来：

```
b.doCallback(function() { a.callback(); }); 
```

其他解决方案包括将回调[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)到`a`，使用[jQuery.proxy()](http://api.jquery.com/jQuery.proxy/)（这只是我第一个解决方案的一种奇特方式），或者使用apply[传入](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)`a`并`doCallback`调用`callback`。`a`

# java - JPA 无交易活动

> ID：12898160
> 
> 赞同：0
> 
> 时间：2012-10-15T14:48:31.843
> 
> 标签：java, servlets, jpa

我正在使用 JPA 框架来实现信息的数据库持久性。

这就是我使用我创建的类的方式：

```
public class ManageConnection {

 private static EntityManagerFactory emf = null;
 private static EntityManager em = null;
 private static String persitenceName="locationtracker";

 public static EntityManager getEntityManager(){
    if(emf==null || !emf.isOpen())
        emf =  Persistence.createEntityManagerFactory(persitenceName);
    if(em==null || !em.isOpen())
        em=emf.createEntityManager();

    return em;
 }
 public static void closeEntityManager(){
    if(em!=null && em.isOpen())
        em.close()
 }
} 
```

然后在我的servlet中我是这样使用的：

```
public void doPost(blablah){   
    .
    .
    .
    .
    .
    .
    .
    .
    .
    .
    .
    for(blah blah){

         Manageconnection.getEntityManager().getTransaction().begin();
            <PersistenceObject> objName = new <PersistenceObject>();
                 //properties of the objName to persist
         ManageConnection.getEntityManager().persist(<objName>);
         Manageconnection.getEntityManager().getTransaction().commit();
    }

    Manageconnection.closeEntityManager();
} 
```

现在我的问题是，每当我将值传递给我的 Servlet 时，我都会得到**Transaction is active**异常，同样的代码在没有 Servlet 的情况下也能完美运行，我的意思是在 Test 类中使用 main 方法，它运行起来像魅力一样，但它抛出在 Servlet 中运行时出现异常。

请帮助我........ ;(提前感谢，Ankur

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:50:02.440

所有你的`EntityManagerFactory`和`EntityManagerFactory`被使用的`static`。它是类级别，适用于`ManageConnection`. 起初，如果`ManageConnection`创建了一个实例，它将共享另一个实例`ManageConnection`。我的建议是尝试不使用`static`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:29:02.890

1.  我假设您不想使用 EJB，而是想使用 POJO。
    （注意有一个简单的解决方案，会话 Bean 执行 JPA 操作，Servlet 调用 EJB - 更少的代码，更少的丑陋，做你想要的。）

2.  每个 servlet 会话都应该有自己的实体管理器实例。从类 ManageConnection 中删除所有“静态”情况。然后在您的 servlet 中，当您创建 HttpSession 时，另外创建一个 ManageConnection 实例并将其作为属性存储在会话中。

    公共类 MyServlet 扩展 HttpServlet {

    ```
    private ManageConnections getManageConnections(HttpSession sess) {
        ManageConnection manageConnection = 
            (ManageConnection)sess.getAttribute("userManageConnection");
        if (manageConnection == null) {
            ManageConnection manageConnection = new ManageConnection();
            sess.setAttribute("userManageConnection", manageConnection);
        }
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) 
         throws ServletException, IOException {
       this.processRequest(req, resp);
    }

    public void processRequest(HttpServletRequest req, HttpServletResponse resp) 
         throws ServletException, IOException {
        HttpSession sess = req.getSession(true);
        ManageConnections manageConnections = this.getManageConnections(sess);
        // remaining JPA operations
    } 
    ```

    }

3.  获取实体管理器：

    ```
    // inside processRequest() above
    EntityManager em = manageConnection.getEntityManager(); 
    ```

4.  开始 Tx，做实体操作，结束 Tx

    ```
    // inside processRequest() above
     em.getTransaction().begin();
     <PersistenceObject> objName = new <PersistenceObject>();
     //properties of the objName to persist
     em.persist(<objName>);
     em.getTransaction().commit(); 
    ```

5.  在用户完成会话之前关闭 EntityManager。这很重要，因为如果没有它，某些实现将需要经常重新启动 - 特别是在开发期间，当您经常重建和重新部署时（我正在看着您，Glassfish 上的 EclipseLink，使用 netbeans 模块部署）。

    ```
     make servlet:  extends HttpSessionListener

     // add the following methods, so we get a callback to sessionDestroyed when the 
     // session is closed via user logout (terminateSession) or session timeout:

     public void init(ServletConfig config) throws ServletException {
        config.getServletContext().addListenter(this.class.getName());
     }

     public void sessionCreated(HttpSessionEvent se) {
     }

     public void sessionDestroyed(HttpSessionEvent se) {
           ManageConnections manageConnections = this.getManageConnections();
           manageConnections.getEntityManager().close();
           manageConnections.getEntityManagerFactor().close();
     } 
    ```

正如我所说 - 有点难看，因为我们在无状态 Servlet 中使用了一个非常有状态的应用程序托管实体管理器。在无状态会话 Bean 中使用事务范围实体管理器或在有状态会话 Bean 中使用扩展范围（或应用程序管理）实体管理器要干净得多...... 相当多的 JPA，但比听起来容易。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:59:58.700

**我创建了两个这样的类：**

```
 //This class has the EntityManagerFactory instance that is going to be shared between the classes
 public class ManageConnection {

  protected static EntityManagerFactory emf = null;
  private static String persitenceName="locationtracker";

  //Anonymous Block that is going to be called (beofre) on every call for constructor of this class
  //whether through inheritance or normal instantiation
  {
    if(emf==null || !emf.isOpen())
        emf =  Persistence.createEntityManagerFactory(persitenceName);
  }

  public static EntityManagerFactory getEntityManagerFactory(){
    return ManageConnection.emf;
  }
}
//This class actually handles the trasactional management
 public class ManageTransaction extends ManageConnection{

   /**
    * 
    */
   public ManageTransaction() {
    super();
    this.entityManager = emf.createEntityManager();
    this.transaction = this.entityManager.getTransaction();

   }

   /**
    * @param entityManager
    * @param transaction
    */
   public ManageTransaction(EntityManager entityManager,EntityTransaction transaction) {
    super();
    this.entityManager = entityManager;
    this.transaction = transaction;
   }

   private EntityManager entityManager;
   private EntityTransaction transaction;

   /**
    * @return the entityManager
    */
   public EntityManager getEntityManager() {
    return entityManager;
   }

   /**
    * @param entityManager the entityManager to set
    */
   public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
   }

   /**
    * @return the transaction
    */
   public EntityTransaction getTransaction() {
    return transaction;
   }

   /**
    * @param transaction the transaction to set
    */
   public void setTransaction(EntityTransaction transaction) {
    this.transaction = transaction;
   }

   public void closeEntityManager(){
    if(entityManager!=null && entityManager.isOpen()){
        entityManager.close();
    }
   }

   public void close(){
    this.closeEntityManager();
   }

   public void flush(){
    entityManager.flush();
   }

   public void begin(){
    this.transaction.begin();
   }

   public void commit(){
    this.flush();
    this.transaction.commit();
   }

   public void persist(Object objToPersist){
    this.entityManager.persist(objToPersist);
   }
 }//end of ManageTransaction class 
```

现在，如果我想使用它，我会这样使用：

```
.
.
.
.
.
.
ManageTransaction mt = new ManageTransaction(); 
```

## 方案 1

```
 mt.getEntityManager().find(blah,blah);//works perfectly 
```

## 方案 2

```
mt.begin();
<PersistenceObject> objName = new <PersistenceObject>();
mt.persist(objName);
mt.close(); 
```

## 方案 3

```
String jpaquery = "blah blah";
TypedQuery<ClassType> tq = mt.getEntityManager().createQuery(jpaquery,<Class>.class);
List<ClassType> all = tq.getResultList(); 
```

这样，每次不需要创建新事务时，我只需创建一个事务并在我的班级的每个地方都使用该事务，最后关闭它。

这样我共享**EntityManager**的问题就解决了，因此在任何情况下都不会抛出**异常。**

:)

# c - fprintf 段错误

> ID：12898162
> 
> 赞同：0
> 
> 时间：2012-10-15T14:48:33.547
> 
> 标签：c, segmentation-fault, printf

```
 char* output= (char*) argv[2];
 92     fp = fopen(output, "w");
 93     if( fp = NULL )
 94     {
 95         printf("writing output failed");
 96         return 0;
 97     }
 98     fprintf(fp,"hello"); 
```

这导致第 98 行的 seg fault exc bad memory。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T14:50:24.060

你的线路

```
if( fp = NULL) 
```

正在分配`NULL`to的值`fp`，而不是比较。

你应该使用

```
if( fp == NULL) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T14:50:08.147

93 号线

`if( fp = NULL )`

将 fp 分配给 NULL 而不是将其与 NULL 进行比较。采用

`if( fp == NULL )`

反而。

正如 netcoder 指出的那样，您的编译器应该警告您这一点。`if (NULL == fp)`如果您不小心将比较换成赋值，您也可以在表单中编写测试以生成编译器错误。（请注意，有些人可能会觉得这种编码风格令人反感，因此可能会在代码审查中引起一些抱怨！）

# windows - 如何在 Visual Studio 2012 Express 中定位 .Net 3.5？

> ID：12898164
> 
> 赞同：0
> 
> 时间：2012-10-15T14:48:34.603
> 
> 标签：windows, visual-studio-2012

Visual Studio 2012 Express 中是否有针对 .Net 3.5 的方法？默认情况下 .Net 4.0 是目标，但我无法更改它。有没有办法改变这个设置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:02:01.627

目标框架与项目模板相关，而不是与 IDE 相关，并且由于 VS2012 没有导出模板向导，我认为您必须获得一个以 .Net Framework 3.5 为目标的模板项目并使用它创建项目。
希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:13:03.757

我在 Visual Studio 2012 Express 的文件菜单下看到了模板导出选项。我用它来创建面向 .net 3.5 和 .net 4.0 的项目模板。

# c# - 正则表达式以任何顺序匹配可选字符

> ID：12898168
> 
> 赞同：0
> 
> 时间：2012-10-15T14:48:41.257
> 
> 标签：c#, regex

我需要能够匹配以下字符串：

`GQG6VJ6K`, `TYTU-TIDM-56`,`4-5-P-Z`等

连字符`-`是可选的，但必须至少有一个字母数字字符。

到目前为止，我想出的最佳尝试是`[A-Z0-9-]+`错误地匹配单个连字符。

我也尝试过`(?[-]*)(?[A-Z0-9]+)`，但它不起作用（我是一个正则表达式菜鸟）。为什么加分。

解决方案是什么？

**编辑：**

@archeong87 引导我找到最终解决方案：`^[A-Z0-9]+(-{0,1}[A-Z0-9]+)*$`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:53:43.743

这应该可以解决问题：

```
([A-Z0-9]-?)*[A-Z0-9] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:00:43.527

使用正则表达式模式

```
^[A-Z0-9-]*[A-Z0-9][A-Z0-9-]*$
 └───┬───┘ └───┬──┘└───┬───┘
     │         │       └ alphanumeric characters or hyphens (none or any)
     │         │
     │         └ one alphanumeric character
     │
     └ alphanumeric characters or hyphens (none or any) 
```

或者

```
^(?=[A-Z0-9-]*$).*[^-]
    └───┬───┘     └─┬┘
        │           └ non-hyphen
        │
        └ allowed characters 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:55:45.597

你非常接近！

```
^(?=.*[A-Z0-9])[A-Z0-9-]+$
||             |         |
||             |         anchor your regex
||             |
||             what you were already doing
||
|lookahead assertion: at least 1 alphanumeric
|
anchor your regex 
```

**编辑：**

在考虑如何排除`-`在开头或结尾时，我意识到有一个更简单的解决方案：

```
^[A-Z0-9]+(-[A-Z0-9]+)*$ 
```

看起来@AndreKR 有这个想法，所以给他+1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:56:59.263

采用：

```
/^(?=.*[a-z\d])[a-z\d-]*$/i 
```

`i`表示不区分大小写，如果你只想要大写，那么

```
/^(?=.*[A-Z\d])[A-Z\d-]*$/ 
```

# c# - WPF 进度条更新为项目列表运行

> ID：12898171
> 
> 赞同：2
> 
> 时间：2012-10-15T14:48:57.287
> 
> 标签：c#, wpf

我想要在我的 WPF 应用程序 (MVVM) 中实现进度条的一些帮助。

我的 MainWindow 有一个运行此方法的按钮：

```
private void AnalysisClick(object sender, RoutedEventArgs e)
{
    model.RunAnalysis();
} 
```

我的模型通过一个单独的引擎类运行一个项目列表：

```
foreach(List<Item> item in items)
    allItemResults.Add(engine.RunItem(item)); 
```

然后该`RunItem`方法将运行该项目。

我的问题是：我怎样才能让每个项目`ProgressBar`在我的 MainWindow 完成时更新它？

编辑：这是.NET 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:50:41.153

看看下面的博客..您可以使用示例代码轻松实现这一点...

[http://bathinenivenkatesh.blogspot.co.uk/2011/07/wpf-build-more-responsive-ui.html](http://bathinenivenkatesh.blogspot.co.uk/2011/07/wpf-build-more-responsive-ui.html)

# jquery - 显示/隐藏和模态问题

> ID：12898174
> 
> 赞同：0
> 
> 时间：2012-10-15T14:49:05.430
> 
> 标签：jquery, modal-dialog, show-hide, photo-gallery

**说明情况**。

在 php 页面中，有一个动态生成的菜单，其中包含任意数量的项目/链接，如下所示：

```
<ul class="main-portf">
<li><a href="#" class="tabs" rel="1" title="item1" >item1</a></li>
<li><a href="#" class="tabs" rel="10" title="item2" >item2</a></li>
<li><a href="#" class="tabs" rel="10" title="item3" >item3</a></li>
<li><a href="#" class="tabs" rel="10" title="item4" >item4</a></li>
</ul> 
```

上述菜单中的每个链接都显示了不同的项目库。每个画廊最多可以有 8 个项目（目前）。例如，单击第一个链接 (rel=1)，它将显示以下图库：

```
<div class="thumbspart" id="tabs-1">
<div class="thumbblock">
    <div class="thumb"><a href="path/to/large/jpg" rel="prettyPhoto[gal1large]" title="demo title" class="testremove"><img src="path/to/small/jpg" alt="demo title"></a></div>
    <div class="title"><a href="path/to/large/jpg" rel="prettyPhoto[gal1small]" title="demo title">Demo Title</a></div>
    <p>some info here</p>
</div>

<div class="thumbblock">
    <div class="thumb"><a href="path/to/large/jpg" rel="prettyPhoto[gal1large]" title="demo title" class="testremove"><img src="path/to/small/jpg" alt="demo title"></a></div>
    <div class="title"><a href="path/to/large/jpg" rel="prettyPhoto[gal1small]" title="demo title">Demo Title</a></div>
    <p>some info here</p>
</div>

...

</div> 
```

所有画廊都预先加载在页面中，并且没有任何内容填充 AJAX 调用。

所有画廊都在其容器内，id="tab-x"，其中 x 等于菜单链接的 rel 值。

每个图库项目都有 3“行”数据：图像缩略图、图像标题、图像描述/文本。

两个链接（在拇指和标题中）打开一个带有大图像和一些其他信息的模式。模态脚本（类似于灯箱）要求每个链接中都存在一个 rel 属性。基于该 rel 属性，它对所有画廊项目进行分组和计数。

该网站的所有者要求对拇指图像进行悬停效果。因此，当用户将鼠标悬停在图像上时，图像会有点褪色，并且会在其顶部出现一个新的小图像。单击新图像应打开模式。

**问题**

我的问题是新的悬停图像覆盖了带有附加链接的原始图像。所以我想添加一个新链接以及悬停图像，其中包含模式脚本工作所需的所有属性。

我的最终 js 看起来像这样：

```
$(".thumb").mouseenter(function () 
{
    var myurl = $(this).find("a").attr("href");
    var myrel = $(this).find("a").attr("rel");
    var mytitle = $(this).find("a").attr("title");

    var testVat = $(this).parent().parent().attr("id");
    var myVar = testVat.split("-");
    var myID = parseInt(myVar[1]);

    $(this).prepend('<a href="'+myurl+'" class="pozhov" rel="'+myrel+'" title="'+mytitle+'"></a>');
    $(this).find("a.testremove").attr('rel', 'rel-'+myrel); // rename rel to avoid conflict with wrong counter
    showGal(myID);
    $('.pozhov').fadeIn(0);

})
.mouseleave (function () 
{
        var myrel = $(this).find("a.testremove").attr("rel");
        var myVar = myrel.split("-");           
        $(this).find("a.testremove").attr('rel', myVar[1]); // restore rel name to original one             

    $('.pozhov').fadeOut(0).delay(0).queue(function()
    { 
        $(this).remove();           
    });
}); 
```

简而言之，当用户将鼠标悬停在图像内时：

*   从现有网址获取我的数据
*   创建一个新链接以包含与原始链接具有相似属性/属性的悬停图像
*   将旧的 rel 属性重命名为其他内容，以避免与模式脚本冲突

当用户将鼠标悬停在图像之外时：

*   恢复原始 rel 属性的旧名称
*   删除虚假链接

这应该有效。但事实并非如此。图像上的模态将无法打开或显示错误的计数器或仅工作一次（第一次关闭后不会执行）。图片标题上的链接模式完美运行。

我用于此页面的更多 js 代码（以防它有所不同）为您服务：

```
// tabs galleries

$(".tabs").click(function () 
{   
    $(".tabs").removeClass("active");

    var myID = $(this).attr("rel");
    $(this).addClass("active");

    //hide all "tabs-xx" divs
    $("div[id^='tabs-']").hide();

    // show the one we want
    $("#tabs-"+myID).fadeIn(1000);
    showGal(myID);

return false;
}); 

// function to fire modal script after show/hide    
function showGal(i)
    {
        $("a[rel^='prettyPhoto[gal"+i+"large]']").prettyPhoto({
            // modal options
        });

        $("a[rel^='prettyPhoto[gal"+i+"small]']").prettyPhoto({
            // modal options
        }); 
    } 
```

如果您想知道核心脚本：

*   jQuery 核心 1.7.2
*   模态 prettyPhoto 脚本（灯箱克隆）

# objective-c - 以编程方式在容器中定位视图

> ID：12898175
> 
> 赞同：1
> 
> 时间：2012-10-15T14:49:05.993
> 
> 标签：objective-c, cocoa, nsview

好的，这就是我的情况：

*   我有一个`NSBox`带有可变边界的视图（实际上）（我正在以编程方式更改它们）
*   在其中`NSBox`我们有另一个视图（an `NSTextField`）。

我想要做的是能够以编程方式相对于父视图定位子视图。

**例如：**

*   中心
*   左上方
*   右上
*   左下方
*   右下角

是否有任何可可友好的方式来实现这一目标？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:52:07.553

You will need to calculate the frame of the subview relative to the `NSBox` and then use `subview.frame = rect;`. There is no shortcut way around this I'm afraid.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:01:29.287

您可能会查看`NSLayoutConstraint` [（apple docs）](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html) ——并[在此处查看我的答案](https://stackoverflow.com/questions/12265308/adding-objects-to-an-nsview/12266902#12266902)以获取使用此类的示例。制作一种方便的方法来将约束设置为“右上角”或“中心”或其他任何内容都非常容易。

# java - 使用 Hector 从 Cassandra 检索（负）双值会给出错误的结果

> ID：12898182
> 
> 赞同：1
> 
> 时间：2012-10-15T14:49:45.197
> 
> 标签：java, cassandra, double, hector

我想使用 Hector 存储双精度值（作为列名）。据我了解，我必须将 LONGTYPE 比较器与 DoubleSerializer 结合使用。我创建了一个 columnFamily，其中 ComparatorType.LONGTYPE 作为比较器，ComparatorType.UTF8TYPE 作为验证器。我将数据插入到我的列族中，如下所示：

```
Mutator<String> m = HFactory.createMutator(_keyspace, _ss);
m.addInsertion(rowKey, cf, HFactory.createColumn(colKey, "", _ds, _ss)); 
```

其中 rowKey 是 String，colKey 是 double，_ds 是 DoubleSerializer，_ss 是 StringSerializer。一切似乎都适用于积极的双重价值。但是，当我想使用负开始和/或结束参数进行范围查询时，事情变得很奇怪。这是我用来查询的代码：

```
SliceQuery<String, Double, String> q = 
          HFactory.createSliceQuery(ks, _ss, _ds, _ss);
q.setRange(START, FINISH., false, 500); 
```

当 START 和 FINISH 为正时，一切正常。

当 START 为负而 FINISH 为正时，它将返回正确的正值，但仅返回那些实际上小于 START 的负值。

当两者都是负数并且 START 更小（应该是！？）然后 FINISH，它会抛出一个

```
InvalidRequestException(why:range finish must come after start in the order of traversal). 
```

当两者都是负数，但 START 大于 FINISH（即负数较小）时，它将返回正确的结果，但顺序错误（负数最小，即最大，在前）。

任何人都可以对此发表评论吗？我做错了什么还是赫克托某处可能有错误？

编辑：不幸的是，DoubleType 已在以前版本的 hector 中删除。我忘了提到我使用的版本是 1.1-0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:23:33.963

你应该使用 LongSerializer，因为双精度浮点数和 64 位整数是不一样的。当使用期望双精度的解串器时，64 位负整数会奇怪地出现，这并不奇怪，因为编码是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:47:53.067

由于似乎没有办法“解决”这个问题，我已经为 hector 实现了 Double 和 Float 格式。它已被拉入主分支，因此在当前[快照](https://github.com/hector-client/hector)中可用。我认为它也将进入下一个版本。

# java - 卡住了while循环。进行中

> ID：12898187
> 
> 赞同：4
> 
> 时间：2012-10-15T14:49:59.720
> 
> 标签：java, processing

我有一个包含 100 个数字的数组，我只给了数组偶数值。如何使用 WHILE LOOP 打印出必须添加多少个数组元素才能获得总和 < 小于 1768？以下是我到目前为止所拥有的，我被卡住了......提前感谢您的帮助

```
void setup() {

  int[] x = new int[100];
  int i=0;
  int sum=0;

  for(i=0; i<100; i++) {
    if (i%2==0) {
      x[i]=i;
      sum+=x[i];
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:56:41.467

您可以使用此循环，元素编号为`i+1`.

```
 for(int i=0,k=0; k<1768; i++,k+=x[i]) {
        System.out.println(x[i]+" - "+k);
       } 
```

虽然循环 -

```
 int i=0,k=0;
   while(k<1768; ) {
        System.out.println(x[i]+" - "+k);
        i++,k+=x[i];
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:06:18.683

```
 void setup() {
     int i = 0;
     int sum = 0;
     int counter = 0;

     while (sum < 1768) {
         sum += i;
         i += 2;
         counter++;
     }

     System.out.println(counter);
 } 
```

您从 0 的偶数索引开始。然后使用 跳过奇数`i += 2`。
如果元素数量限制为 100，则添加`i < 200`到`while`条件：

```
while (sum < 1768 && i < 200) 
```

[100 个偶数的数组将包含从 0 到 200 的数字。]

该变量`counter`将包含执行的加法次数。它的值将等于`i / 2`，因此您可以删除该附加变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:08:21.997

您正在跳过数组中的索引。您只是填充了每隔一个“槽”此外，使用 while 循环检查您的最大值（1728）可能会更容易

```
 int[] x = new int[100];
        int i = 0;
        int sum = 0;
        int max = 1728;

        while (sum < max && i < 100)
        {
            x[i] = i*2;
            if ((x[i] + sum) < max)
            {
                sum += x[i];
            }
            i++;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T15:01:35.440

```
void setup() {

  int[] x = new int[100];
  int maxValue = 1768;
  int i;
  int sum=0;

  while(sum<maxValue) {
    if (i%2==0) {
      x[i]=i;
      sum+=x[i];
      i++;
    }
  }

   System.out.println(i+" Elements needed")

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-15T14:56:16.147

以下是代码：

```
void setup() {

  int[] x = new int[100];
  int i=0;
  int sum=0;

  for(i=0; i<100; i++) {
    if (i%2==0) {
      sum += i;
            if(sum<1768){

                 num +=1; 
            }
    }
  }
} 
```

# javascript - 如何使用过渡动画使 div 居中

> ID：12898189
> 
> 赞同：0
> 
> 时间：2012-10-15T14:50:06.757
> 
> 标签：javascript, css

这是演示：[演示](http://jsbin.com/ucosup/8/edit) 该演示仅适用于 webkit 浏览器，（chrome 或 safari）

有四个盒子，每个都有一个标题。当用户点击展开 div 时。div 是用来扩展的。最初标题在左侧，但是当 div 展开时，标题必须通过动画移动到中心。我已经使 div 使用填充对齐中心，但是有一个问题，对于不同的文本宽度，填充必须是更改为使标题正确居中。请看一下代码，你会更好地理解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:03:21.773

移除内边距，将标题居中放在 h3 上，并尝试将标题的宽度设置在 auto 和 100% 之间；使用 nowrap 确保标题保持在一行。

```
h3 {
  text-align: center;
  width: auto;
  white-space: nowrap;
  ...
} 
```

然后动画到

```
.expand h3 {
  width: 100%;
} 
```

# android - 将地理点添加到 ItemizedOverlay 数组失败

> ID：12898193
> 
> 赞同：0
> 
> 时间：2012-10-15T14:50:23.433
> 
> 标签：android, itemizedoverlay, geopoints

我一直在尝试将我的 GeoPoints 添加到 itemizedOverlay 数组中，以便在地图上绘制点。不幸的是，应用程序此时崩溃了。

我的代码：包 com.example.phooogle；

```
public class GoogleMapsAppActivity extends MapActivity {

    private MapView mapView;
    private MapController mc;
    private MyLocationOverlay myLocationOverlay;
    private myMapService mms;
    String[] ms;
    private LocationManager lm;
    private LocationListener locationListener;
    private MyLocationOverlay myLocOverlay;

    GeoPoint p;
    GeoPoint progress1[];
    List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();

    int latitude;
    int longitude;
    private ProgressDialog progress;
    MotionEvent event;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cool_map); 

        progress= new ProgressDialog(this);
        progress.setIndeterminate(true);
        progress.setMessage("I am thinking");

        InitTask init_task= new InitTask();
        init_task.execute("144.963620993985", "-37.8140023779914", "20", "Litter Bin");
try {
        String[] arrs =  init_task.strArr2;
        //Log.d(" print points", " Array Size " + arrs.length);

        Drawable makerDefault = this.getResources().getDrawable(R.drawable.poke);
        MirItemizedOverlay itemizedOverlay = new MirItemizedOverlay(makerDefault);

        for(int j=0; j<arrs.length ;j++)
        {
            double y =0;
            double x =0;

            if(j == 1)
            {
                /// x 
                //Log.d("Results", "2If statem "  +  strArr2[j] );
                x = Double.parseDouble(arrs[j]);
                y = Double.parseDouble(arrs[j+1]);

                //Log.d(" print points", "lat " + x + " long" + y);

                itemizedOverlay.addOverlayItem((int) x , (int) y , "La trobe");
                mapView.getOverlays().add(itemizedOverlay );

            }

        }

        MapController mc = mapView.getController();
        mc.setCenter(new GeoPoint((int) (1E6 * -37.720754), (int) (1E6 * 145.048798))); // Some where .
        mc.zoomToSpan(itemizedOverlay.getLatSpanE6(), itemizedOverlay.getLonSpanE6());
} finally {}

        initMap();
        initMyLocation();
        // theRouteDraw();
        /*

        Drawable makerDefault = this.getResources().getDrawable(R.drawable.poke);
        MirItemizedOverlay itemizedOverlay = new MirItemizedOverlay(makerDefault);
        itemizedOverlay.addOverlayItem(init_task.geoPointsArray, "La trobe");
        mapView.getOverlays().add(itemizedOverlay );

        MapController mc = mapView.getController();
        mc.setCenter(new GeoPoint((int) (1E6 * -37.720754), (int) (1E6 * 145.048798))); // Some where .
        mc.zoomToSpan(itemizedOverlay.getLatSpanE6(), itemizedOverlay.getLonSpanE6());

        for (int i = 0; i < geoPointsArray.size() ; i++)
        {
            Log.d(" print points", " points " + geoPointsArray.get(i));
        }*/
        //  Log.d(" print points", " Size " + init_task.geoPointsArray.size());
        /*

         mapView = (MapView) findViewById(R.id.mapview);
        List<Overlay> mapOverlays = mapView.getOverlays();
        //add any icon here for the marker
        Drawable drawable = GoogleMapsAppActivity.this.getResources().getDrawable(R.drawable.poke);
        MapViewItemizedOverlay itemizedOverlay = new MapViewItemizedOverlay(drawable,this);
        //use your array here instead
        //GeoPoint point1 = new GeoPoint(lat,lng);
        OverlayItem overlayitem1 = new OverlayItem(point1, "Info", "You are here!" );
        itemizedOverlay.addOverlay(overlayitem1);
        mapOverlays.add(itemizedOverlay);
         */

    }

    private void initMap()
    {
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        // mapView.setStreetView(true);
        mc = mapView.getController();
    }
    public void theRouteDraw(GeoPoint p){
        mc.animateTo(p);
        mc.setZoom(13);                
        mapView.invalidate();
        mapView.setSatellite(true);

    }

    private void initMyLocation() {
        myLocOverlay = new MyLocationOverlay(this, mapView);
        myLocOverlay.enableMyLocation();
        mapView.getOverlays().add(new myLocOverlay());

    } 

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    class myLocOverlay extends Overlay{

        public void draw(Canvas canvas, MapView mapv, boolean shadow){
            super.draw(canvas, mapv, shadow);

            Projection projection = mapView.getProjection();
            Path p1 = new Path();
            for (int i = 0; i < geoPointsArray.size(); i++) {
                if (i == geoPointsArray.size() - 1) {
                    break;
                }
                Point from = new Point();
                Point to = new Point();
                projection.toPixels(geoPointsArray.get(i), from);
                projection.toPixels(geoPointsArray.get(i + 1), to);

                p1.moveTo(from.x, from.y);
                p1.lineTo(to.x, to.y);

            }

            Paint mPaint = new Paint();
            mPaint.setStyle(Style.STROKE);
            mPaint.setColor(Color.BLACK);
            mPaint.setAntiAlias(true);
            mPaint.setStrokeWidth(4);
            canvas.drawPath(p1, mPaint);
            super.draw(canvas, mapView, shadow);

        } 

    }

    private  class  InitTask extends AsyncTask<String, GeoPoint, List<GeoPoint>> {
        List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();

        GeoPoint p;
        private ProgressDialog progressDialog;
        private String rst = " " ; 
        private String[] strArr1;
        private String[] strArr2;

        protected void onPreExecute() {
            //progress.show();
        }

        @Override
        protected List<GeoPoint> doInBackground(String... arg0) {

            String result = "";
            int responseCode = 0;
            int executeCount = 0;
            HttpResponse response;

            StringBuilder sb = new StringBuilder();
            String line;
            try 
            {
                HttpClient client = new DefaultHttpClient();
                HttpGet httppost = new HttpGet("http://xxxx/ccvo/mel-asset-data/query.php?lon="+ arg0[0].toString() + "&lat="+ arg0[1].toString() +"&within=" + arg0[2].toString()  + "&keyword="+ arg0[3].toString().replace(" ", "%20"));

                do
                {
                    // progressDialog.setMessage("Passing paratmeters.. ("+(executeCount+1)+"/5)");
                    // Execute HTTP Post Request
                    executeCount++;
                    response = client.execute(httppost);
                    responseCode = response.getStatusLine().getStatusCode();                        

                } while (executeCount < 5 && responseCode == 408);

                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                while ((line = rd.readLine()) != null)
                {
                    result = line.trim();
                    sb.append(line);

                }
            }catch (Exception e2) {
                responseCode = 408;
                e2.printStackTrace();
            }
            rst = result.toString();

            // splits everything        
            if(rst != null && rst.length() > 0)
            {
                strArr1 = rst.split("\\|");
                for(int i=0;i<strArr1.length;i++)
                {
                    // Log.d("Results", "Array size1.1 "  + i);
                    Log.v("Results", "Array split1.2 "  + strArr1[i] );
                    if(strArr1[i] != null && strArr1[i].length() >0 && strArr1[i].contains(","))
                    {

                        strArr2 = strArr1[i].split(",");
                        for(int j=0; j<strArr2.length ;j++)
                        {
                            double y =0;
                            double x =0;

                            if(j == 1)
                            {
                                /// x 
                                //Log.d("Results", "2If statem "  +  strArr2[j] );
                                x = Double.parseDouble(strArr2[j]);
                                y = Double.parseDouble(strArr2[j+1]);
                                geoPointsArray.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
                                Log.d("geoPointsArray", "geoPointsArray "  +  geoPointsArray.toString() );

                            }

                        }
                    }
                }
            }

            return geoPointsArray;
        }

        @Override
        protected void onProgressUpdate(GeoPoint... progress1) {

            theRouteDraw(progress1[0]);

            geoPointsArray.add(progress1[0]);

            int lon=progress1[0].getLongitudeE6();
            int lat=progress1[0].getLatitudeE6();

            GeoPoint p2=new GeoPoint(lon,lat);

            geoPointsArray.add(p2);

            initMyLocation();

        }
        @Override
        protected void onPostExecute(List<GeoPoint> geoPointsArray)
        {
            //super.onPostExecute(geoPointsArray);
            progress.dismiss();

            //startActivity(i);
            //i.getCharExtra("Geop", geoPointsArray);

            Log.d("Lista", " check " + geoPointsArray.size());
            //  theRouteDraw(geoPointsArray);

        }

    }

} 
```

我的 MirItemizedOverlay 类：

```
class MirItemizedOverlay extends ItemizedOverlay {

    private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MirItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        // TODO Auto-generated constructor stub
    }
    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public void addOverlayItem(OverlayItem overlayItem) {
        mOverlays.add(overlayItem);
        populate();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView)
    {
        //---when user lifts his finger---
        if (event.getAction() == 1) {
            GeoPoint p = mapView.getProjection().fromPixels(
                    (int) event.getX(),
                    (int) event.getY());
            Toast.makeText(getBaseContext(),
                    p.getLatitudeE6() / 1E6 + "," +
                            p.getLongitudeE6() /1E6 ,
                            Toast.LENGTH_SHORT).show();
        }
        return false;
    }

    private Context getBaseContext() {
        // TODO Auto-generated method stub
        return null;
    }

    public void addOverlayItem(int lat, int lon, String title) {
        GeoPoint point = new GeoPoint(lat, lon);
        OverlayItem overlayItem = new OverlayItem(point, title, null);
        addOverlayItem(overlayItem);
    }

/*  public void addOverlayItem(GeoPoint point , String title) {

            OverlayItem overlayItem = new OverlayItem(point, title, null);
            addOverlayItem(overlayItem);

        //GeoPoint point = new GeoPoint(lat, lon);

    }*/
} 
```

错误 ：

```
: E/AndroidRuntime(2752): FATAL EXCEPTION: main
: E/AndroidRuntime(2752): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.phooogle/com.example.phooogle.GoogleMapsAppActivity}: java.lang.NullPointerException
: E/AndroidRuntime(2752):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
: E/AndroidRuntime(2752):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
: E/AndroidRuntime(2752):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
: E/AndroidRuntime(2752):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
: E/AndroidRuntime(2752):   at android.os.Handler.dispatchMessage(Handler.java:99)
: E/AndroidRuntime(2752):   at android.os.Looper.loop(Looper.java:137)
: E/AndroidRuntime(2752):   at android.app.ActivityThread.main(ActivityThread.java:4745)
: E/AndroidRuntime(2752):   at java.lang.reflect.Method.invokeNative(Native Method)
: E/AndroidRuntime(2752):   at java.lang.reflect.Method.invoke(Method.java:511)
: E/AndroidRuntime(2752):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
: E/AndroidRuntime(2752):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
: E/AndroidRuntime(2752):   at dalvik.system.NativeStart.main(Native Method)
: E/AndroidRuntime(2752): Caused by: java.lang.NullPointerException
: E/AndroidRuntime(2752):   at com.example.phooogle.GoogleMapsAppActivity.onCreate(GoogleMapsAppActivity.java:68) 
```

我尝试了几种方法，就像我尝试更改 addOverlayItem 方法以接受来自 AsyncTask 返回的 GeoPoitns 但也失败了。我几乎给了我这个。:)

**更新** 问题已解决。这是修复：

```
try {
            //String[] arrs =  init_task.strArr2;
            List<GeoPoint> geoL = init_task.get();
            //Log.d(" Get the size " , " Geo List " + geoL.get(1).toString());
            mapView = (MapView) findViewById(R.id.mapview);
            mapView.setBuiltInZoomControls(true);
            mc = mapView.getController();
            List<Overlay> listOfOverlays = mapView.getOverlays();
            Drawable drawable = this.getResources().getDrawable(R.drawable.poke);
            MyItemizedOverlay itemizedoverlay =  new MyItemizedOverlay(drawable, this);

            for ( int i = 0; i < geoL.size() ; i++)
            {
                OverlayItem overlayitem1 = new OverlayItem(geoL.get(i), Selectedword + "s found! " , "It's withing " + selectedDistance + " To your position");
                itemizedoverlay.addOverlay(overlayitem1);
                listOfOverlays.add(itemizedoverlay);
            }
            //mc.animateTo(geoL.get(1));

            mc.setCenter(new GeoPoint((int) (1E6 * gps.getLatitude() ), (int) (1E6 * gps.getLongitude() ))); // Some where .

        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        } finally {}

        initMap();
        initMyLocation();
        // theRouteDraw(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:17:36.973

你的问题是`mapView`空的，你还没有打电话`initMap()`。这会导致`mapView.getOverlays().add(itemizedOverlay );`失败。

# android - 在 Android 应用程序中验证用户问题

> ID：12898196
> 
> 赞同：0
> 
> 时间：2012-10-15T14:50:29.437
> 
> 标签：android, sqlite, serializable

我在我的Android应用程序中遇到了这个问题...

当用户尝试登录时，我首先使用我的 DataBaseHelper 类在本地 SQLite 数据库中查找他的用户名和密码......如果它不存在，那么我创建一个 Http 连接（使用我的 HttpPostAux 类）来验证用户名和密码以及存储在服务器中央 PostgreSQL 数据库中的数据...

我在 LogCat 中收到此错误：

```
10-15 10:07:13.781: E/Cursor(3855): Invalid statement in fillWindow()
10-15 10:07:13.781: E/itemCursor(3855): vacio
10-15 10:07:13.859: D/dalvikvm(3855): GC_EXTERNAL_ALLOC freed 118K, 48% free 2845K/5379K, external 2643K/2652K, paused 27ms
10-15 10:07:13.867: D/Cursor(3855): Database path: /data/data/tian.proto/databases/PROTOTIPO
10-15 10:07:13.867: D/Cursor(3855): Table name   : null
10-15 10:07:13.867: D/Cursor(3855): SQL          : SQLiteQuery: SELECT * FROM usuario
10-15 10:07:13.867: I/dalvikvm(3855): Uncaught exception thrown by finalizer (will be discarded):
10-15 10:07:13.867: I/dalvikvm(3855): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@4053c2f0 on null that has not been deactivated or closed
10-15 10:07:13.867: I/dalvikvm(3855):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:620)
10-15 10:07:13.867: I/dalvikvm(3855):   at dalvik.system.NativeStart.run(Native Method)
10-15 10:07:13.898: E/log_tag(3855): se conecto bien 1
10-15 10:07:13.898: E/log_tag(3855): se conecto bien
10-15 10:07:14.328: E/is(3855): org.apache.http.conn.EofSensorInputStream@4056ecc8
10-15 10:07:14.328: E/log_tag(3855): se conecto bien
10-15 10:07:14.343: E/getPostResponse(3855): result= 
10-15 10:07:14.343: E/getPostResponse(3855): [{"logstatus":"1"}]
10-15 10:07:14.343: E/log_tag(3855): respondio bien
10-15 10:07:15.296: E/loginStatus(3855): logstatus = 1
10-15 10:07:15.296: E/loginStatus(3855): válido
10-15 10:07:15.296: E/onPostExecute=(3855): ok
10-15 10:07:15.304: E/initialvalues=(3855): nombre=alois.wirkes contrasena=qwerty
10-15 10:07:15.421: D/AndroidRuntime(3855): Shutting down VM
10-15 10:07:15.421: W/dalvikvm(3855): threadid=1: thread exiting with uncaught exception (group=0x40015578)
10-15 10:07:15.429: E/AndroidRuntime(3855): FATAL EXCEPTION: main
10-15 10:07:15.429: E/AndroidRuntime(3855): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = tian.proto.lib.DataBaseHelper)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Parcel.writeSerializable(Parcel.java:1176)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Parcel.writeValue(Parcel.java:1130)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Parcel.writeMapInternal(Parcel.java:488)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Bundle.writeToParcel(Bundle.java:1552)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Parcel.writeBundle(Parcel.java:502)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.content.Intent.writeToParcel(Intent.java:5623)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1341)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.app.Activity.startActivityForResult(Activity.java:2827)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.app.Activity.startActivity(Activity.java:2933)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at tian.proto.Main$asyncLogin.onPostExecute(Main.java:206)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at tian.proto.Main$asyncLogin.onPostExecute(Main.java:1)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.AsyncTask.finish(AsyncTask.java:417)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Looper.loop(Looper.java:130)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.lang.reflect.Method.invokeNative(Native Method)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.lang.reflect.Method.invoke(Method.java:507)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at dalvik.system.NativeStart.main(Native Method)
10-15 10:07:15.429: E/AndroidRuntime(3855): Caused by: java.io.NotSerializableException: tian.proto.Main
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-15 10:07:15.429: E/AndroidRuntime(3855):     at android.os.Parcel.writeSerializable(Parcel.java:1171)
10-15 10:07:15.429: E/AndroidRuntime(3855):     ... 22 more 
```

我想这与我的 DataBaseHelper 对象有关，因为当我这样做时：

```
public static DataBaseHelper mDbHelper = new DataBaseHelper(this); 
```

数据库是空的，所以当我尝试在本地验证用户时：

```
protected boolean foundInDB(String usuario, String contrasena) {
        // TODO Auto-generated method stub
        mDbHelper.open();
        Cursor itemCursor = null;
        itemCursor = mDbHelper.getItemsUser();
        mDbHelper.close();

        if(itemCursor.moveToFirst() == false){
            Log.e("itemCursor","vacio");
            return false;
        }

        int nameColumnIndex1 = itemCursor.getColumnIndex(DataBaseHelper.SL_USER_NOMBRE);
        int nameColumnIndex2 = itemCursor.getColumnIndex(DataBaseHelper.SL_USER_CONTRASENA);

        for(itemCursor.moveToFirst();!itemCursor.isAfterLast();itemCursor.moveToNext()){
            String name = itemCursor.getString(nameColumnIndex1);
            String pass = itemCursor.getString(nameColumnIndex2);
            if(name.equals(usuario) && pass.equals(contrasena)){
                return true;    
            }
        }
        return false;
    } 
```

我认为 LogCat 中出现了第 3 到 10 行......我认为其余的错误也是由于我的 DataBaseHelper 类，因为它实现了可序列化......

```
public class DataBaseHelper implements Serializable{
    ...
} 
```

所以我可以将我的主要活动中声明的引用传递给其他活动，这样我就可以操作本地数据库......

```
Intent intent = new Intent(Main.this,pantalla2.class);
intent.putExtra("NOMBRE", usuario);
intent.putExtra("CONTRASENA", contrasena);
intent.putExtra("DATABASE", mDbHelper);
startActivity(intent); 
```

关于如何解决这个问题的任何想法？顺便问一下，LogCat 的第一行（fillWindow() 中的无效语句）是什么意思？

# jquery - 将隐藏的 div（包括它的内容）添加到 DOM

> ID：12898197
> 
> 赞同：0
> 
> 时间：2012-10-15T14:50:32.357
> 
> 标签：jquery

我有一个隐藏的 div，我想将它添加（附加）到 DOM 中的另一个位置。我拥有的代码没有按预期工作；

```
$('[class*="time-span"]').on('click', function() {

    var modelPanel = $('.model-detail-panel');

    modelPanel.contents().wrap('<div class="model-detail-panel" id="model-detail">').insertAfter('.timeline');
    modelPanel.slideToggle('fast', function() {
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 500);
    });
}); 
```

div 'model-detail-panel' 的内容被插入到正确的位置，但实际周围的 div 没有被插入。为什么会这样，并且是我使用最合适的方法来实现这一目标的方法？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:55:16.003

问题是该`wrap()`方法返回被包装的元素，而不是新创建的包装元素。因此，您应该使用`parent()`：

```
modelPanel.contents().wrap('<div class="model-detail-panel" id="model-detail">').parent().insertAfter('.timeline'); 
```

参考：

*   [`parent()`](http://api.jquery.com/parent/).
*   [`wrap()`](http://api.jquery.com/wrap/).
*   [`wrapAll()`](http://api.jquery.com/wrapAll/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:57:24.717

```
var wrapped = $('<div class="model-detail-panel" id="model-detail/">').insertAfter('.timeline')
wrapped.append(model.contents) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:55:00.033

为了与其他链接方法保持一致，[wrap()](http://api.jquery.com/wrap/)返回调用它的 jQuery 对象，而不是包装器元素。

您可以将[parent()](http://api.jquery.com/parent/)应用于结果，以便在`insertAfter()`操作中包含包装元素：

```
modelPanel.contents().wrap(
    '<div class="model-detail-panel" id="model-detail">'
).parent().insertAfter('.timeline'); 
```

# ruby-on-rails-3 - 在 bash 提示符中显示

> ID：12898205
> 
> 赞同：0
> 
> 时间：2012-10-15T14:51:02.763
> 
> 标签：ruby-on-rails-3, bash, rvm, command-prompt

我正在使用 bash，但仍然不熟悉`.profile`, `.bashrc`, `.bash_profile`.

我想要的结果是拥有 ruby​​ 版本并`rvm gemset`显示在我的 bash 提示符上。

我添加`PS1="\$(~/.rvm/bin/rvm-prompt) $PS1"`到 .bash_profile （通过 xcode）并显示

```
ruby-1.9.3-p286 John-MacBook-Air:~ john$ 
```

我想要得到的是

```
ruby-1.9.3-p286@rails3 $ 
```

“rails3”是`rvm gemset`.

**如何`John-MacBook-Air:~ john`从提示中删除？**

我尝试在 .profile 和 .bashrc 中添加该行，但没有成功，但它似乎在 .bash_profile 中有效。这些文件之间的任何澄清将不胜感激。我在 Mac 上运行 rvm。

**解决方案**

在 .bash_profile 中包含以下内容

```
PS1='\W \$ '
PS1="\$(~/.rvm/bin/rvm-prompt) $PS1" 
```

提示看起来像

```
ruby-1.9.3-p286@rails3 ~ $ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:25:58.127

这条线是问题所在：

```
PS1="\$(~/.rvm/bin/rvm-prompt) $PS1" 
```

您所说的是“将我的 rvm 提示添加到 PS1”，然后将预先存在`PS1`的放在最后。系统默认`PS1`是这样设置的：

```
PS1='\h:\W \u\$ ' 
```

在该设置`\h`中是主机名（此处为“John-MacBook-Air”），`\W`是当前工作目录，您的主目录缩写为`~`，`\u`是您的用户的登录名（此处为“john”），`\$`如果您是`#`如果您以 root 身份登录，则为普通用户和 octothorpe ( )。在 OSX 上，默认情况下在`/etc/bashrc`. 如果要更改提示，则需要自定义提示的后半部分，而不是`$PS1`按原样重新输入新设置。删除主机名很常见，但我强烈建议*不要*删除当前工作目录。在终端会话中，这是非常有用的信息。只是我的两分钱。

To see what you can put there, take a look for information about [setting your prompt in Bash](http://www.gnu.org/software/bash/manual/bashref.html#Printing-a-Prompt).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:13:38.163

> 我正在使用 bash，但仍然不熟悉 .profile、.bashrc、.bash_profile 之间的区别。

这取决于您的系统配置。阅读手册页。您还可以通过包含另一个来更改系统或用户范围的行为。

这里有一些注释可以更好地理解。

*   **每次登录初始化。**（或：会话启动）有些启动文件只对登录 shell 执行。在我的系统上，他们只设置环境变量。（这是有道理的，因为环境变量是继承的）。那些可能被称为`/etc/profile`或`~/.profile`平原`sh`。如果`bash`是你的 shell 并且你有`~/.bash_profile`or `~/.bash_login`，默认情况下它会更喜欢那些（按此顺序）。请注意，在您下次登录之前，对会话启动文件的更改无效。此外，您需要确保将变量导出到环境中，例如`PS1=something ; export PS1`.
*   **每进程初始化。**对于 Plain `sh`，没有默认的每进程初始化文件，但您可以将`ENV`环境变量设置为指向 1。对于`bash`，还有`BASH_ENV`变量和`~/.bashrc`文件。每个进程的初始化文件是您可以存储每个进程的 shell 设置（不能通过环境继承的那些）的地方，例如别名或函数定义。

如果您只想查看某个特定文件是否被执行，您可以随时回显某些内容，或者触摸某个文件，例如`echo TEST`或`touch /tmp/test`。

# java - 如何使用模式匹配获取子字符串

> ID：12898211
> 
> 赞同：0
> 
> 时间：2012-10-15T14:51:21.247
> 
> 标签：java, regex, string, pattern-matching

我有

```
String content= "<a data-hovercard=\"/ajax/hovercard/group.php?id=180552688740185\">
                 <a data-hovercard=\"/ajax/hovercard/group.php?id=21392174\">" 
```

我想得到和之间的所有`"group.php?id="` id `"\""`

例如：**180552688740185**

这是我的代码：

```
String content1 = "";
Pattern script1 = Pattern.compile("group.php?id=.*?\"");
Matcher mscript1 = script1.matcher(content);
while (mscript1.find()) {
    content1 += mscript1.group() + "\n";
} 
```

但由于某种原因，它不起作用。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:55:42.777

你为什么用它`.*?`来匹配`id`. `.*?`将匹配每个字符。您只需要检查`digits`. 所以，只需使用`\\d`.

此外，您需要捕获`id`然后打印它。

```
// To consider special characters as literals
String str = Pattern.quote("group.php?id=") + "(\\d*)";

Pattern script1 = Pattern.compile(str);
// Your matcher line
while (mscript1.find()) {
    content += mscript1.group(1) + "\n";   // Capture group 1 contains your id
} 
```

# python - 我对这段代码感到困惑

> ID：12898212
> 
> 赞同：7
> 
> 时间：2012-10-15T14:51:22.890
> 
> 标签：python, django, unicode

以下来自 django 源代码 ( [`Django-1.41/django/utils/encoding.py`](https://github.com/django/django/blob/1.4.1/django/utils/encoding.py#L73));

```
try:
    s = unicode(str(s), encoding, errors)
except UnicodeEncodeError:
    if not isinstance(s, Exception):
        raise

    # If we get to here, the caller has passed in an Exception
    # subclass populated with non-ASCII data without special
    # handling to display as a string. We need to handle this
    # without raising a further exception. We do an
    # approximation to what the Exception's standard str()
    # output should be.
    s = u' '.join([force_unicode(arg, encoding, strings_only,
        errors) for arg in s]) 
```

我的问题是：在哪种情况下会`s`出现异常？
当 s 是 Exception 的一个实例，并且 s 既没有 str 也没有 repr 属性。比这种情况发生。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:00:05.443

`s`如果有人使用 Exception 的子类调用[force_unicode](https://github.com/django/django/blob/1.4.1/django/utils/encoding.py#L54)函数并且消息包含 unicode 字符，则将是一个异常。

```
s = Exception("\xd0\x91".decode("utf-8"))
# this will now throw a UnicodeEncodeError
unicode(str(s), 'utf-8', 'strict') 
```

如果`try`块中的代码失败，则不会将任何内容分配给`s`s，因此 s 将保持最初调用该函数的方式。

由于`Exception`继承自`object`，并且自 Python 2.5 以来`object`一直具有该`__unicode__`方法，因此该代码可能存在于 Python 2.4 并且现在已过时。

更新：打开拉取请求后，此代码现已从 Django 源中删除：[https ://github.com/django/django/commit/ce1eb320e59b577a600eb84d7f423a1897be3576](https://github.com/django/django/commit/ce1eb320e59b577a600eb84d7f423a1897be3576)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T15:03:26.470

```
>>> from django.utils.encoding import force_unicode
>>> force_unicode('Hello there')
u'Hello there'
>>> force_unicode(TypeError('No way')) # In this case
u'No way' 
```

# java - website.com auto direct to index.php

> ID：12898215
> 
> 赞同：1
> 
> 时间：2012-10-15T14:51:28.843
> 
> 标签：java, php, google-app-engine

I have a website running on google app engine written in php. So when a user lands on domain.com they get a 404 error as there is no index.html file just a index.php file.

Are there some sensible options to address this?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:55:11.967

更新`welcome-file-list`您`web.xml`的包含`index.php`文件。

# algorithm - 自动旋转房屋底部到线

> ID：12898216
> 
> 赞同：0
> 
> 时间：2012-10-15T14:51:32.637
> 
> 标签：algorithm, actionscript-3, geometry

我只是想问你如何做到这一点。

当用户将房屋移动到线时，如何将房屋对象自动旋转到与线底部对齐的线。（见示例）

我知道黑点和房子的坐标。

![旋转示例](../Images/91dace28aac3d4c6571a752d9a8ecd61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:55:22.137

我按照 coproc 的建议实施了这一点。不幸的是，这里发布的代码有点长，但你可以阅读它并在 Wonderfl 中在线检查它是否有效：

[http://wonderfl.net/c/rYYU](http://wonderfl.net/c/rYYU)

大多数相关的代码行都被注释了，唯一的假设是房子的图形注册点在它的中心（在我的例子中，我画了一个 Sprite，但它应该与任何 MovieClip 一样好）。我认为它很好地完成了你正在寻找的东西。

希望这可以帮助！

# php - doctrine2: Entity's association changes after first call

> ID：12898221
> 
> 赞同：1
> 
> 时间：2012-10-15T14:51:38.377
> 
> 标签：php, symfony, doctrine, doctrine-orm, entity

**i am using the latest version of doctrine: 2.3**

when you call a generated association function, the first time everything is fine:

```
$authors = $book->getBookToAuthors();
//$authors = array(5) 
```

but the second time instead of returning the array of all associations it returns the last hydrated entity:

```
$authors = $book->getBookToAuthors();
//$authors = BookToAuthor entity 
```

that happens even when there is nothing else happening:

```
$authors = $book->getBookToAuthors(); //will work
$authors = $book->getBookToAuthors(); //won't work 
```

the function of getBookToAuthors() is:

```
public function getBookToAuthors()
{
    return $this->bookToAuthors;
} 
```

and the mapping is as follows:

```
/**
 * @var BookToAuthor[]
 *
 * @OneToMany(targetEntity="BookToAuthor", mappedBy="book", cascade={"persist"})
 * @JoinColumn(name="id", referencedColumnName="book_id", onDelete="cascade")
 */
private $bookToAuthors; 
```

**please advise. i don't know what to do... :-(**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:04:58.137

对不起对不起，这是关联目标方面的错误。目标具有一对一关联而不是多对一

如果您遇到此问题，请确保双方的关联类型匹配

# c++ - 比较函数指针

> ID：12898227
> 
> 赞同：16
> 
> 时间：2012-10-15T14:52:07.330
> 
> 标签：c++

如何比较 C++ 中的函数指针？稳定吗？

例如，这样的事情是否有效：

```
if(pFnc == &myFnc){
//Do something
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T14:55:44.630

## C++03 5.10/1 [expr.eq]：

> ==（等于）和 !=（不等于）运算符与关系运算符具有相同的语义限制、转换和结果类型，但它们的优先级较低和真值结果除外。[注意：只要 a < b 和 c < d 具有相同的真值，a < b == c < d 就为真。]**指向相同类型的对象或函数的指针（在指针转换之后）可以比较是否相等**。相同类型的两个指针比较相等当且仅当它们都为空，都指向同一个函数，或都表示相同的地址（3.9.2）。

强调我的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:54:26.430

函数指针本质上是一个内存地址，就像 C++ 中的任何其他指针一样。因此，在比较指针时，您总是在比较内存地址而不是值，这意味着只要两个指针属于同一类型，这些指针指向的内容并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:55:31.357

两者`pFnc`和`myFnc`都必须定义。正确的比较应该是：

```
if(pFnc == myFnc)
{
    //Do something
} 
```

# python - python脚本终止时运行语句

> ID：12898232
> 
> 赞同：0
> 
> 时间：2012-10-15T14:52:19.423
> 
> 标签：python, subprocess

我有一个从 python 脚本运行的子进程，如果用户终止 python（ctrl+D 或 ctrl+Z 或 quit()），我想终止该进程。我可以在我的 python 脚本中定义一个函数，它会在 python 脚本退出之前自动运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:53:37.440

您可以使用该`atexit`模块注册要运行的功能。

```
import atexit

def bar():
   print "World"
atexit.register(bar)

#atexit.register also can be used as a decorator since it returns
# the function:
@atexit.register
def foo():
   print "Goodbye" 
```

这些函数将运行，除非脚本退出`os._exit`（它不应该退出）或除非脚本导致 python 遇到通常不会发生的严重错误（例如分段错误），但如果您使用 C 扩展则可以那是越野车。

# c++ - 如何最小化 QDialog？

> ID：12898239
> 
> 赞同：3
> 
> 时间：2012-10-15T14:52:36.877
> 
> 标签：c++, qt

虽然我知道这`QDialog`并不意味着最小状态，是否可以以`QDialog`编程方式最小化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:09:20.727

[QWidget::setWindowState()](http://qt-project.org/doc/qt-4.8/qwidget.html#setWindowState)将让您以编程方式最小化/最大化等

# javascript - 使用 JS 动态添加元素以形成表单

> ID：12898240
> 
> 赞同：0
> 
> 时间：2012-10-15T14:52:43.683
> 
> 标签：javascript, html, forms, textbox, dynamically-generated

我在我的 MySQL 表中创建了 15 个字段，并希望为最终用户提供使用表单添加这么多项目的选项。但是，为了保持界面整洁，我只想向他们展示 2-3 个文本框，并给他们一个按钮，以便他们在需要时添加更多内容。

我不相信使用 Javascript 将文本框添加到表单中会是一个问题，但是一旦我将 POST 数据提交给表单处理程序，我对如何处理它感到困惑。任何人都可以阐明解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:14:20.877

如果您必须使用包含所有表单值的普通 POST 变量，您应该能够执行以下操作：

当使用服务器语言和/或 javascript 生成文本框时，它们被发送到服务器的方式是它们的`name`属性。如果您提供一致的元素命名方式，则可以将事物与数字“组合”。例如，如果您每次用户单击“添加”时提供 2 个文本框（一个用于“foo”，一个用于“bar”），那么您可以在末尾增加数字以确保它们匹配。

```
<input type="text" name="foo1" /><input type="text" name="bar1" />
<input type="text" name="foo2" /><input type="text" name="bar2" />
and so on 
```

然后在服务器上，您需要找到以“foo”和“bar”开头的 POST 变量中的每个项目

```
for (item in POST) {
    if (item startswith "foo") {
        // Extract the number at the end, and find the related "bar"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:01:38.137

假设您将 ASP.NET MVC 用于 Web 应用程序，并将 jQuery 用于客户端框架。

让我们进一步假设您有这样的模型：

```
public class Gift
{
    public string Name { get; set; }
    public double Price { get; set; }
} 
```

您的初始操作和数据可能是这样的：

```
public ActionResult Index()
{
    var initialData = new[] {
        new Gift { Name = "Tall Hat", Price = 39.95 },
        new Gift { Name = "Long Cloak", Price = 120.00 },
    };
    return View(initialData);
} 
```

而您的观点可能是这样的：

```
<h2>Gift List</h2>
What do you want for your birthday?

<% using(Html.BeginForm()) { %>
    <div id="editorRows">
        <% foreach (var item in Model)
            Html.RenderPartial("GiftEditorRow", item);
        %>
    </div>

    <input type="submit" value="Finished" />
<% } %> 
```

礼品编辑器的部分视图可能是这样的：

```
<div class="editorRow">
    <% using(Html.BeginCollectionItem("gifts")) { %>
        Item: <%= Html.TextBoxFor(x => x.Name) %>
        Value: $<%= Html.TextBoxFor(x => x.Price, new { size = 4 }) %>
    <% } %>
</div> 
```

关键是“BeginCollectionItem”辅助方法，它在 ASP.NET MVC 中不是标准的。它将为可变长度模型生成一些键。稍后我将添加指向文件的链接。您的处理程序将是这样的：

```
[HttpPost]
public ActionResult Index(IEnumerable<gift> gifts)
{
    // To do: do whatever you want with the data
} 
```

通过这种方法，您将获得一份礼物清单，其中包含文本框中的值。要再添加一项，您需要向该视图发送 ajax 请求：

希望对您有所帮助 来源： http: [//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/) 下载： http: [//blog.codeville.net /blogfiles/2010/January/ListEditorDemo.zip](http://blog.codeville.net/blogfiles/2010/January/ListEditorDemo.zip)

# android - Google App Engine - Getting Server URL

> ID：12898241
> 
> 赞同：0
> 
> 时间：2012-10-15T14:52:56.477
> 
> 标签：android, google-app-engine, url

I deployed my highscoreserver-code to Google App Engine. Now I need a URL to send a request to the server. But I can't find a URL in my dashboard...
What I need is this:

```
http://myhighscoreserver.appspot.com/THIS-PART-I-NEED?name="test"&points="0" 
```

What should I insert in the URL above?

EDIT: THIS-PART-I-NEED = class-name of the servlet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:16:57.437

[http://myhighscoreserver.appspot.com/THIS-PART-I-NEED?name=](http://myhighscoreserver.appspot.com/THIS-PART-I-NEED?name=) "test"&points="0" 这很简单： THIS-PART-I-NEED = servlet 的类名

# inf - inf2cat 22.9.10 error

> ID：12898244
> 
> 赞同：2
> 
> 时间：2012-10-15T14:53:03.570
> 
> 标签：inf

I'm trying to sign old Hitachi driver that makes USB flash drive appear as fixed disk (Quite useful when you have fast, large thumb drives)

Driver itself works fine but I constantly get same error when try to get it signed:

Errors:

```
22.9.10: cfadisk.sys in [cfadisk_copyfiles] is missing from [SourceDisksFiles] section in
\cfadisk.inf; driver may not sign correctly until this is resolved.

22.9.10: disk.sys in [gendisk_copyfiles] is missing from [SourceDisksFiles] section in 
cfadisk.inf; driver may not sign correctly until this is resolved. 
```

This is my .inf file:

```
[Version]
Signature="$Windows NT$"
Class=DiskDrive
ClassGuid={4D36E967-E325-11CE-BFC1-08002BE10318}
Provider=%HGST%
DriverVer=10/14/2012,9.9.9.9
CatalogFile=cfadisk.cat

[Manufacturer]
%HGST% = cfadisk_device,ntAMD64

[DestinationDirs]
cfadisk_copyfiles=12    ; %SystemRoot%\system32\drivers
gendisk_copyfiles=12    ; %SystemRoot%\system32\drivers

[cfadisk_copyfiles]
cfadisk.sys

[gendisk_copyfiles]
disk.sys

[cfadisk_device]
%Microdrive_devdesc% = cfadisk_install,USBSTOR\Disk&Ven_SanDisk&Prod_Extreme&Rev_0001

[cfadisk_device.NTamd64]
%Microdrive_devdesc% = cfadisk_install,USBSTOR\Disk&Ven_SanDisk&Prod_Extreme&Rev_0001

[cfadisk_addreg]
HKR,,"LowerFilters",0x00010008,"cfadisk"

[cfadisk_install]
CopyFiles=cfadisk_copyfiles,gendisk_copyfiles

[cfadisk_install.HW]
AddReg=cfadisk_addreg

[cfadisk_install.Services]
AddService=disk,2,gendisk_ServiceInstallSection
AddService=cfadisk,,cfadisk_ServiceInstallSection

[gendisk_ServiceInstallSection]
DisplayName    = "Disk Driver"
ServiceType    = 1
StartType      = 0
ErrorControl   = 1
ServiceBinary  = %12%\disk.sys
LoadOrderGroup = SCSI Class

[cfadisk_ServiceInstallSection]
DisplayName    = "CompactFlash Filter Driver"
ServiceType    = 1
StartType      = 3
ErrorControl   = 1
ServiceBinary  = %12%\cfadisk.sys
LoadOrderGroup = Pnp Filter

; -----------------------

[Strings]
HGST = "Hitachi"
Microdrive_devdesc = "SanDisk Extreme" 
```

I was using this tutorial as reference point: [http://www.deploymentresearch.com/Blog/tabid/62/EntryId/63/Sign-your-unsigned-drivers-Damn-It.aspx](http://www.deploymentresearch.com/Blog/tabid/62/EntryId/63/Sign-your-unsigned-drivers-Damn-It.aspx)

cfadisk.inf and sys can be downloaded here: link is at the beginning of first post

[http://hardforum.com/showthread.php?t=1655684](http://hardforum.com/showthread.php?t=1655684)

Any help would be greatly appreciated

EDIT:

I just used chkinf utility on this .inf file Here is the output:

```
C:\DriversCert\SanDisk\cfadisk.inf: FAILED
NTLOG REPORT--------------
Total Lines:         62  |
Total Errors:         1  |
Total Warnings:       4  |
--------------------------
Line 0: ERROR: (E22.1.1003) Section [SourceDisksNames] not defined. 
Line 0: WARNING: (W22.1.2212) No Copyright information found. 
Line 0: WARNING: (W22.1.2111) [SourceDisksFiles] section not defined - full CopyFiles checking not done.
Line 17: WARNING: (W22.1.2112) File "cfadisk.sys" is not listed in the [SourceDisksFiles].
Line 20: WARNING: (W22.1.2112) File "disk.sys" is not listed in the [SourceDisksFiles]. 
```

I'm really no programer so I really don't understand what does all this mean.

Strange thing is that driver does work, I just can't get i signed.

Thank you!

Best regards,

Walter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T12:28:49.063

这意味着错过了一些部分。在您的情况下，它们是`[SourceDisksFiles]`，`[SourceDisksNames]` 在这种特定情况下，您只需添加：

`[SourceDisksFiles]`
`cfadisk.sys = 1`
`disk.sys = 1`

`[SourceDisksNames]`
`1 = %DiskName%, ,`

并`[String]`在底部添加一条记录：

`DiskName="Disk Drive"`

# php - update an array into mysql table

> ID：12898251
> 
> 赞同：0
> 
> 时间：2012-10-15T14:53:17.877
> 
> 标签：php, arrays

I need to update an array into mysql table.

this is my array

```
[cat2] => Array
                (
                    [0] => 34
                    [1] => 48
                    [2] => 49
                    [3] => 46
                ) 
```

and I want my output as 34,48,49,46 to move into a table called shops and column called category. This is code I written, $shop['cat2'] contains the array i posted above. Please help me. This code is keep only 34 in all fields of column category

```
foreach ($shop['cat2'] as $k => $v) {
    $query = "UPDATE shops SET categories2=$v";
    mysql_query($query);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:56:34.413

查看内[爆](http://www.php.net/manual/en/function.implode.php)函数：`implode(",", $shop['cat2'])`

您可能还想查看[Foreign Keys](http://en.wikipedia.org/wiki/Foreign_key)。使用外键时，您可以使用`join`SQL 语句从多个列中检索数据。将类别存储为一个字段时，例如在您的示例中，这是不可能的。

为此，您需要一个新表：`ShopCategory`使用 columns:`ShopID`和，这些列将分别与您的和表`CategoryID`具有外键关系。`Shop``Category`

正如 Michael Berkowski 在评论中已经指出的那样，如果您不使用`where`子句，则此 SQL 语句将更新您所有商店的类别！

`$query = "UPDATE shops SET categories2='".implode(",", $shop['cat2'])."' WHERE id=".$shop;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:02:55.573

为了将这些数组元素中的每一个应用于列的一行，`category`您需要首先从表中获取唯一的 id ，然后在更新查询的子句`shops`中使用该唯一标识符值循环遍历它：`WHERE`

我们将在循环`mysql_fetch_assoc()`内部调用`foreach()`每个数组元素拉一行。这假设您有一列`shops.id`是每个商店的唯一标识符。

```
// If `id` is not the unique id per shop, substitute the correct column
$rowids = mysql_query("SELECT id FROM shops ORDER BY id");
if  ($rowids) {
  // Loop over your array, and do one update per array elem
  foreach ($cat2 as $cat) {
     $row = mysql_fetch_assoc($rowids);
     $id = row['id'];
     // Your values are ints, so no need to quote and escape.
     // If you do use other string values, be sure to mysql_real_escape_string() them and single-quote
     $upd = mysql_query("UPDATE shops SET category = $cat WHERE id = $id");
     // Report error on this iteration
     if (!$upd)  {
        echo "error updating $id" . mysql_error();
     }
  }
}
else {
   echo "Couldn't get row ids. " . mysql_error(); 
} 
```

# matlab - Cell Array or Multi-Subscripted Array?

> ID：12898253
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:53:27.393
> 
> 标签：matlab

The following piece of code works when data is passed as a `1x50 array`. (Data is in fact a struct that passes several other parameters too). In the `1x50` case a `4x1` array of parameters is returned for each i (the value of `de.nP` is 600).

However I want to change it so that I can pass a matrix of data say `d` dates so that the matrix has dimension `dx50`. This will then return a `4xd` array for each i.

My question is should I use a cell array or a 3D array to store the values? Seems to me both methods could do the job?

```
for i=1:de.nP
    betas(:,i)=NSS_betas(P1(:,i),data);
end 
```

Going further into the code I will need to use

```
Params=vertcat(betas,P1); 
```

Where `P1` is a `2x1` array. So for each date (i) I need to concatenate the contents of P(1) to all the betas for that date.

Will this affect the choice of whether to use cellarray or 3D array?

It seems to me cellarray is better suited to vectorised code (Which is what I am trying to use as much as possible) but 3D array might be easier to use with functions like `vertcat`?

Here is the whole code

```
mats=[1:50];
mats2=[2 5 10 30];
betaTRUE=[5 -2 5 -5 1 3; 4 -3 6 -1 2 4];
for i=1:size(betaTRUE,1)
    yM(i,:)=NSS(betaTRUE(i,:),mats);
    y2(i,:)=NSS(betaTRUE(i,:),mats2);
end
dataList=struct('yM',yM,'mats',mats,'model',@NSS,'mats2',mats2,'y2',y2);
de=struct('min',[0; 2.5],'max',      [2.5;5],'d',2,'nP',200,'nG',300,'ww',0.1,'F',0.5,'CR',0.99,'R',0,'oneElementfromPm',1);
beta=DElambdaVec(de,dataList,@OF);

function [output]=DElambdaVec(de,data,OF)

    P1=zeros(de.d,de.nP);
    Pu=zeros(de.d,de.nP);

 for i=1:de.d
     P1(i,:)=de.min(i,1)+(de.max(i,1)-de.min(i,1))*rand(de.nP,1);
 end

 P1(:,1:de.d)=diag(de.max);
 P1(:,de.d+1:2*de.d)=diag(de.min);

 for i=1:de.nP
     betas(:,i)=NSS_betas(P1(:,i),data);
 end

 Params=vertcat(betas,P1);

 Fbv=NaN(de.nG,1);
 Fbest=realmax;

 F=zeros(de.nP,1);
 P=zeros(de.nP,1);

 for i=1:de.nP 

    F(i)=OF(Params(:,i)',data);

    P(i)=pen(P1(:,i),de,F(i));
    F(i)=F(i)+P(i);

 end

 [Fbest indice] =min(F);
 xbest=Params(:,indice);
 %vF=vF+vP;

%NaN(de.nG,de.nP);
Col=1:de.nP; 

for g=1:de.nG
    P0=P1;
    rowS=randperm(de.nP)';
    colS=randperm(4)';
    RS=circshift(rowS,colS(1));
    R1=circshift(rowS,colS(2));
    R2=circshift(rowS,colS(3));
    R3=circshift(rowS,colS(4));

%mutate
Pm=P0(:,R1)+de.F*(P0(:,R2)-P0(:,R3));
%extra mutation
if de.R>0 
    Pm=Pm+de.r*randn(de.d,de.nP);
end

%crossover
PmElements=rand(de.d,de.nP)<de.CR;
%mPv(MI)=mP(Mi);
if de.oneElementfromPm
   Row=unidrnd(de.d,1,de.nP);
   ExtraPmElements=sparse(Row,Col,1,de.d,de.nP);
   PmElements=PmElements|ExtraPmElements;
end

P0_Elements=~PmElements;
Pu(:,RS)=P0(:,RS).*P0_Elements+PmElements.*Pm;

for i=1:de.nP
betasPu(:,i)=NSS_betas(Pu(:,i),data);
end

ParamsPu=vertcat(betasPu,Pu);
flag=0;
for i=1:de.nP

    Ftemp=OF(ParamsPu(:,i)',data);
    Ptemp=pen(Pu(:,i),de,F(i));
    Ftemp=Ftemp+Ptemp;

    if Ftemp<=F(i);
        P1(:,i)=Pu(:,i);
        F(i)=Ftemp;
        if Ftemp < Fbest
        Fbest=Ftemp; xbest=ParamsPu(:,i); flag=1;
        end
    else
        P1(:,i)=P0(:,i);
    end    
end

if flag
    Fbv(g)=Fbest;
end

end

output.Fbest=Fbest; output.xbest=xbest; output.Fbv=Fbv;

end

function penVal=pen(mP,pso,vF)

minV=pso.min;
maxV=pso.max;
ww=pso.ww;

A=mP-maxV;
A=A+abs(A);

B=minV-mP;
B=B+abs(B);

C=ww*((mP(1,:)+mP(2,:))-abs(mP(1,:)+mP(2,:)));
penVal=ww*sum(A+B,1)*vF-C;

end

function betas=NSS_betas(lambda,data)

mats=data.mats2';
lambda=lambda;
yM=data.y2';
nObs=size(yM,1);
G= [ones(nObs,1) (1-exp(-mats./lambda(1)))./(mats./lambda(1)) ((1-exp(-     mats./lambda(1)))./(mats./lambda(1))-exp(-mats./lambda(1))) ((1-exp(-   mats./lambda(2)))./(mats./lambda(2))-exp(-mats./lambda(2)))];

betas=G\yM;

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:58:09.183

不过，这确实需要在函数的其余部分进行大量重新编码！

```
betas=zeros(4,size(data.y2,1),de.nP);
 for i=1:de.nP
 betas(:,:,i)=NSS_betas(P1(:,i),data);
 end 
```

# svn - How to know if a specific file is being ignored or not

> ID：12898256
> 
> 赞同：1
> 
> 时间：2012-10-15T14:53:30.517
> 
> 标签：svn, svnignore

I would like to know if there is any way to know if an specific file is being ignored or not inside a subversioned project. Is there any command for that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:55:50.027

`svn status --no-ignore`然后查找具有状态的文件`I`

[http://svnbook.red-bean.com/en/1.0/re26.html](http://svnbook.red-bean.com/en/1.0/re26.html)

# ios - UIScrollView Performance Tips?

> ID：12898259
> 
> 赞同：0
> 
> 时间：2012-10-15T14:53:51.453
> 
> 标签：ios, performance, uiscrollview

I have a UIScrollView that is animating a lot of UIViews (probably too many). Also, these UIViews represent "pages", and sometimes multiple pages are stacked on top of each other, resulting in a "pile" of pages (setup by adding subviews to a given view).

I know that scrolling an excessive number of UIViews can have poor performance, but I was wondering if anybody had some general tips for me to improve performance?

For now, doing drawing manually in drawRect is not something I would like to consider because it would mess up various "page pile" animations. I will keep it in mind for a last resort, but I'd definitely like to avoid it if possible.

Update: The cause of the performance hit has been determined and is two fold: I'm using antialiasing and shadows on all my UIViews. When I toggle them both off, the performance issues are resolved! However, I obviously don't want to just toggle them off :)

I'm creating my shadows like so:

```
self.imageView.layer.opaque = YES;
        self.imageView.layer.masksToBounds = NO;
        self.imageView.layer.shadowOffset = CGSizeMake(-4, 0);
        self.imageView.layer.shadowRadius = 2.5;
        self.imageView.layer.shadowOpacity = 0.15;
        self.imageView.layer.shadowPath = [UIBezierPath bezierPathWithRect:CGRectMake(
                                                                                      self.bounds.origin.x,
                                                                                      self.bounds.origin.y,
                                                                                      self.bounds.size.width + 8,
                                                                                      self.bounds.size.height + 2)].CGPath; 
```

Any tips to improve the performance?

As far as antialiasing, it is almost a necessity. The problem is that those "offset pages" are slightly rotated AND my pages have a 1 pixel border. Slightly rotated with a 1 pixel border without antialiasing looks awful. I am simply enabling antialiasing in the .plist by setting "Renders with Edge Antialiasing" to YES.

Any suggestions on how to improve my shadow/antialiasing performance would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:26:35.037

有多少 UIView 是“很多”？我们在谈论什么样的观点？如果不需要复杂的绘图，100 个 UIView 通常不是问题。但是，`UIWebView`呈现 PDF 的 10 个实例是另一回事……

确保您的视图仅在必要时进行布局和绘制（= 仅当它们实际可见时）。例如，您可以通过在视图中创建断点来检查这一点`layoutSubviews`。

`UIView`此外，尽可能使用不透明元素。这使得绘图更加高效，因为不必绘制不透明元素下方的视图。

如果您碰巧有需要大量处理但很少更改的自定义`CALayer`实例（例如`CAShapeLayer`，带有阴影等），您可能需要考虑在这些实例上启用光栅化：`yourLayer.shouldRasterize = YES;` 这通过缓存渲染的合成图像来加速绘图。

# jquery - fancybox ios6 support

> ID：12898261
> 
> 赞同：1
> 
> 时间：2012-10-15T14:54:05.303
> 
> 标签：jquery, fancybox-2

I am using fancybox_v2.1 & incorporated like

```
$(document).ready(function() {
            $("a.fancylink").fancybox({
                autoDimensions: false,
                autoScale: true,
                width: '90%',
                height: 600,
                maxWidth    : 800,
                maxHeight   : 600,
                type: 'iframe',
                modal: false,
                marginTop: 20,
                closeBtn : true,
                fitToView   : false,
                autoSize    : false,
                openEffect  : 'none',
                closeEffect : 'none',
                centerOnScroll: true
            });
        }); 

```

I am facing weird issue, text is not visible properly in between lines after given height, it looks like there is some white box above text in ios5 but in ios6 it works fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:18:08.510

我用**type: 'ajax'**代替**type: 'iframe'**现在它支持 ios6 和 ios5

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# c# - 从 XElement 读取文本内容

> ID：12898263
> 
> 赞同：13
> 
> 时间：2012-10-15T14:54:09.797
> 
> 标签：c#, .net, xml, linq, xelement

在 .NET 中，如何从[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)读取文本内容？

例如，从 XElement

```
XElement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>") 
```

我想要字符串 'Alice & Bob'

* * *

我试过`element.Value`了，但返回的是“爱丽丝和山猫”:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T15:38:52.897

```
 XElement t = XElement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>");
 string s = (t.FirstNode as XText).Value; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-26T15:18:59.590

仅仅因为我最近有类似的要求，我提供：

```
var x = XElement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>")
var text = string.Concat(x.Nodes().OfType<XText>().Select(t => t.Value)); 
```

不会捕获子节点的文本内容，但会连接当前元素中所有未标记的文本节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:12:07.047

试试下面的代码它可能对你有帮助..

```
namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            var parent = XElement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>");
            var nodes = from x in parent.Nodes()
                            where x.NodeType == XmlNodeType.Text
                            select (XText)x;

            foreach (var val in nodes)
            {
                Console.WriteLine(val.Value);
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:08:29.870

使用`element.FirstNode`您可以获得元素内部的原始内容，“Alice & Bob”，因此您只需“取消转义”＆符号，您将获得您期望的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T15:12:17.680

```
XElement t= XElement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>");
string s = t.FirstNode.ToString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-21T19:22:52.973

```
XElement t= Xelement.Parse("<tag>Alice &amp; Bob<other>cat</other></tag>");
string s = t.toString(); 
```

# java - Generic upper bounded wildcard instantiation known at run time

> ID：12898264
> 
> 赞同：0
> 
> 时间：2012-10-15T14:54:10.643
> 
> 标签：java, generics, wildcard, bounded-wildcard

```
class Aliphatic<F> extends Organic<F>{}
class Hexane<G> extends Aliphatic<G>{}
public class Organic<E>{
    void react(E e){}
    static void main(String[] args){
        Organic<? extends Organic> compound = new Aliphatic<Organic>();
        compound.react(new Organic());
    }
} 
```

**Why can't I call react method with Organic argument?** The generic type ot the reference `<? extends Organic>` says that the generic type of the instantiation canb either a Organic, or a subtype of Organic.

Is because the compiler doesn't know this instantiation generic type until runtime type an so, it does not bind any value to its generic criteria?

**Why is this case working? Is this case the same?**

```
public class WildcardCollection {
    public static void main (String[] args){
        WildcardCollection w = new WildcardCollection();
        w.myMethod(new Items("hola",1));     //Compile
        w.myMethod(new SubItems("nuevo",3)); //Compile
    }
    public <T extends Items> void myMethod(T a){ //Same as above
        System.out.println("hi: "+a);
    }
}
class SubItems extends Items {
    SubItems(){};
    SubItems(String s, int i){ super(s,i);}
}
class Items implements Comparable<Items> {
    private String name;
    private int value;

    public Items() {}

    public Items(String n, int i){ this.name = n; this.value = i;}
    public String getName(){ return this.name;}
    public int getValue(){ return this.value;}

    public String toString(){ return "(" + this.name + "-" + this.value + ")";}

    public int compareTo(Items i){
        return this.value - i.getValue();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:39:18.157

很简单，如果你有一个泛型类型的对象，其类型参数`T`用`? extends X`通配符实例化，那么你不能在对象上调用接受类型参数的方法，`T`因为编译器不能保证类型安全。但是，您*可以*调用返回的方法`T`（并将返回值分配给 type 的变量`X`）。在您的具体示例中，这看起来应该是安全的

```
Organic<? extends Organic> compound = new Aliphatic<Organic>();
compound.react(new Organic()); 
```

但请记住，编译器必须`react`根据*声明*类型 ( `? extends Organic`) 匹配调用，它不能依赖于您在 RHS 上分配的内容。如果编译器允许这样做，那么它也必须允许

```
Organic<? extends Organic> compound = new Aliphatic<Hexane<?>>();
compound.react(new Organic()); 
```

这显然是不正确的——情况与

```
Collection<? extends Number> nums = new ArrayList<Float>();
nums.add(Integer.valueOf(1)); 
```

（除此之外，由于`Organic`是通用的，您需要说`Organic<? extends Organic<?>>`或类似的，而不仅仅是`Organic<? extends Organic>`）

# python - Efficiently expand lines from pandas DataFrame

> ID：12898266
> 
> 赞同：7
> 
> 时间：2012-10-15T14:54:25.037
> 
> 标签：python, pandas

I'm new to pandas and I'm trying to read a strange formated file into a DataFrame. The original file looks like this:

```
; No   Time   Date  MoistAve  MatTemp  TDRConduct  TDRAve  DeltaCount  tpAve  Moist1  Moist2  Moist3  Moist4  TDR1  TDR2  TDR3  TDR4
1  11:38:17   11.07.2012  11.37  48.20  5.15  88.87  15  344.50  11.84  11.35  11.59  15.25  89.0  89.0  89.0  88.0
2  11:38:18   11.07.2012  11.44  48.20  5.13  88.88  2  346.22  12.08  11.83  -1.00  -1.00  89.0  89.0  -1.0  -1.0
3  11:38:19   11.07.2012  11.10  48.20  4.96  89.00  3  337.84  11.83  11.59  10.62  -1.00  89.0  89.0  89.0  -1.0
4  11:38:19   11.07.2012  11.82  48.20  5.54  88.60  3  355.92  11.10  13.54  12.32  -1.00  89.0  88.0  88.0  -1.0 
```

I managed to get an equally structured DataFrame with:

```
In [42]: date_spec = {'FetchTime': [1, 2]}

In [43]: df = pd.read_csv('MeasureCK32450-20120711114050.mck', header=7, sep='\s\s+',
                          parse_dates=date_spec, na_values=['-1.0', '-1.00'])

In [44]: df
Out[52]: 
               FetchTime  ; No  MoistAve  MatTemp  TDRConduct  TDRAve  DeltaCount   tpAve  Moist1  Moist2  Moist3  Moist4  TDR1  TDR2  TDR3  TDR4
0    2012-11-07 11:38:17     1     11.37     48.2        5.15   88.87          15  344.50   11.84   11.35   11.59   15.25    89    89    89    88
1    2012-11-07 11:38:18     2     11.44     48.2        5.13   88.88           2  346.22   12.08   11.83     NaN     NaN    89    89   NaN   NaN
2    2012-11-07 11:38:19     3     11.10     48.2        4.96   89.00           3  337.84   11.83   11.59   10.62     NaN    89    89    89   NaN
3    2012-11-07 11:38:19     4     11.82     48.2        5.54   88.60           3  355.92   11.10   13.54   12.32     NaN    89    88    88   NaN 
```

But now I have to expand each line of this DataFrame

```
 .... Moist1  Moist2  Moist3  Moist4  TDR1  TDR2  TDR3  TDR4
1 ....  11.84   11.35   11.59   15.25    89    89    89    88
2 ....  12.08   11.83     NaN     NaN    89    89   NaN   NaN 
```

into four lines (with three indexes No, FetchTime, and MeasureNo):

```
 .... Moist  TDR
No           FetchTime  MeasureNo
 0 2012-11-07 11:38:17          1 .... 11.84   89 # from line 1, Moist1 and TDR1
 1                              2 .... 11.35   89 # from line 1, Moist2 and TDR2
 2                              3 .... 11.59   89 # from line 1, Moist3 and TDR3
 3                              4 .... 15.25   88 # from line 1, Moist4 and TDR4
 4 2012-11-07 11:38:18          1 .... 12.08   89 # from line 2, Moist1 and TDR1
 5                              2 .... 11.83   89 # from line 2, Moist2 and TDR2
 6                              3 ....   NaN  NaN # from line 2, Moist3 and TDR3
 7                              4 ....   NaN  NaN # from line 2, Moist4 and TDR4 
```

by preserving the other columns and **MOST** important, preserving the order of the entries. I know I can iterate through each line with `for row in df.iterrows(): ...` but I read this is not very fast. My first approach was this:

```
In [54]: data = []
In [55]: for d in range(1,5):
....:     temp = df.ix[:, ['FetchTime', 'MoistAve', 'MatTemp', 'TDRConduct', 'TDRAve', 'DeltaCount', 'tpAve', 'Moist%d' % d, 'TDR%d' % d]]
....:     temp.columns = ['FetchTime', 'MoistAve', 'MatTemp', 'TDRConduct', 'TDRAve', 'DeltaCount', 'tpAve', 'RawMoist', 'RawTDR']
....:     temp['MeasureNo'] = d
....:     data.append(temp)
....:      
In [56]: test = pd.concat(data, ignore_index=True)
In [62]: test.head()
Out[62]: 
             FetchTime  MoistAve  MatTemp  TDRConduct  TDRAve  DeltaCount   tpAve  RawMoist  RawTDR  MeasureNo
0  2012-11-07 11:38:17     11.37     48.2        5.15   88.87          15  344.50     11.84      89          1
1  2012-11-07 11:38:18     11.44     48.2        5.13   88.88           2  346.22     12.08      89          1
2  2012-11-07 11:38:19     11.10     48.2        4.96   89.00           3  337.84     11.83      89          1
3  2012-11-07 11:38:19     11.82     48.2        5.54   88.60           3  355.92     11.10      89          1
4  2012-11-07 11:38:20     12.61     48.2        5.87   88.38           3  375.72     12.80      89          1 
```

But I don't see a way to influence the concatenation to get the order I need ... Is there another way to get the resulting DataFrame I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:17:28.040

这是一个基于numpy的repeat和array indexing来构建de-stacked值，以及pandas的merge来输出连接结果的解决方案。

首先将数据样本加载到 DataFrame 中（稍微更改了 read_csv 的参数）。

```
from cStringIO import StringIO

data = """; No   Time   Date  MoistAve  MatTemp  TDRConduct  TDRAve  DeltaCount  tpAve  Moist1  Moist2  Moist3  Moist4  TDR1  TDR2  TDR3  TDR4
1  11:38:17   11.07.2012  11.37  48.20  5.15  88.87  15  344.50  11.84  11.35  11.59  15.25  89.0  89.0  89.0  88.0
2  11:38:18   11.07.2012  11.44  48.20  5.13  88.88  2  346.22  12.08  11.83  -1.00  -1.00  89.0  89.0  -1.0  -1.0
3  11:38:19   11.07.2012  11.10  48.20  4.96  89.00  3  337.84  11.83  11.59  10.62  -1.00  89.0  89.0  89.0  -1.0
4  11:38:19   11.07.2012  11.82  48.20  5.54  88.60  3  355.92  11.10  13.54  12.32  -1.00  89.0  88.0  88.0  -1.0
"""

date_spec = {'FetchTime': [1, 2]}
df = pd.read_csv(StringIO(data), header=0, sep='\s\s+',parse_dates=date_spec, na_values=['-1.0', '-1.00']) 
```

然后构建一个去堆叠的 TDR 向量并将其与原始数据框合并

```
stacked_col_names = ['TDR1','TDR2','TDR3','TDR4']

repeated_row_indexes = np.repeat(np.arange(df.shape[0]),4)
repeated_col_indexes = [np.where(df.columns == c)[0][0] for c in stacked_col_names]

destacked_tdrs = pd.DataFrame(data=df.values[repeated_row_indexes,repeated_col_indexes],index=df.index[repeated_row_indexes],columns=['TDR'])

ouput = pd.merge(left_index = True, right_index = True, left = df, right = destacked_tdrs) 
```

使用所需的输出：

```
output.ix[:,['TDR1','TDR2','TDR3','TDR4','TDR']]

   TDR1  TDR2  TDR3  TDR4  TDR
0    89    89    89    88   89
0    89    89    89    88   89
0    89    89    89    88   89
0    89    89    89    88   88
1    89    89   NaN   NaN   89
1    89    89   NaN   NaN   89
1    89    89   NaN   NaN  NaN
1    89    89   NaN   NaN  NaN
2    89    89    89   NaN   89
2    89    89    89   NaN   89
2    89    89    89   NaN   89
2    89    89    89   NaN  NaN
3    89    88    88   NaN   89
3    89    88    88   NaN   88
3    89    88    88   NaN   88
3    89    88    88   NaN  NaN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:57:59.770

这给出了从 'i' 开始的每个给出的第四行测试：

```
test.ix[i::4] 
```

使用与上面相同的基本循环，只需在运行上面的代码后附加从 0 到 3 开始的每一行的集合。

```
data = []    
for i in range(0,3:):     
    temp = test.ix[i::4] 
    data.append(temp)
test2 = pd.concat(data,ignore_index=True) 
```

更新：我现在意识到你想要的不是每第四行而是每 m 行，所以这只是上面的循环建议。对不起。

更新 2：也许不是。我们可以利用这样一个事实，即使 concatenate 不返回您想要的顺序，它返回的内容也具有与您想要的内容的固定映射。d 是每个时间戳的行数，m 是时间戳的数量。

您似乎希望 test 中的行如下： [0,m,2m,3m,1,m+1,2m+1,3m+1,2,m+2,2m+2,3m+2,.. .,m-1,2m-1,3m-1,4m-1]

我确信有更好的方法来生成索引列表，但这对我有用

```
d = 4
m = 10
small = (np.arange(0,m).reshape(m,1).repeat(d,1).T.reshape(-1,1))
shifter = (np.arange(0,d).repeat(m).reshape(-1,1).T * m) 
NewIndex = (shifter.reshape(d,-1) + small.reshape(d,-1)).T.reshape(-1,1)
NewIndex = NewIndex.reshape(-1)
test = test.ix[NewIndex] 
```

# wpf - WPF Prism - 管理应用程序中的模块

> ID：12898269
> 
> 赞同：4
> 
> 时间：2012-10-15T14:54:31.703
> 
> 标签：wpf, prism

将 Prism 与 WPF 一起使用，我希望允许用户从存储库中选择他们想要使用的模块。每个模块本质上都是一个附加组件，选择要使用的模块只需将其移动到 DLL 的“模块”文件夹中即可加载。

但是，在应用程序运行时尝试移动 DLL，会引发错误，因为此时 DLL 正在使用中。您如何解决这个问题并允许用户随意添加/删除模块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:54:29.197

一旦程序集被加载到 中`AppDomain`，它不会（不能）被卸载，直到`AppDomain`被拆除......我想这是你的问题。

如果你在网上看，有一些技术可以解决这个问题......

## 创建一个额外的 AppDomain

创建一个附加的`AppDomain`，然后您可以将您的程序集加载到......完成后，您只需调用`Unload`关闭`AppDomain`，这将释放程序集。

但是，您希望从另一个可以访问的类型`AppDomains`必须从中派生，`MarshalByRefObject`以便您的对象是可远程的......并且可以编组来自其他 AppDomain 的调用。

*   [C#中使用AppDomain动态加载和卸载dll](https://stackoverflow.com/questions/6578170/using-appdomain-in-c-sharp-to-dynamically-load-and-unload-dll)

## 将程序集加载到 MemoryStream 中

这里有一个非常有趣的技术......它将程序集加载到`MemoryStream`第一个，然后它让.NE​​T从......加载程序集`MemoryStream`......这意味着磁盘上的“文件”没有被锁定。

*   [http://social.msdn.microsoft.com/Forums/en-US/clr/thread/093c3606-e68e-46f4-98a1-f2396d3f88ca/](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/093c3606-e68e-46f4-98a1-f2396d3f88ca/)

*   [如何在不使用 AppDomains 的情况下实现 .net 插件？](https://stackoverflow.com/questions/458699/how-do-i-implement-net-plugins-without-using-appdomains)

# java - Where to put java package-level information to use by javadoc?

> ID：12898270
> 
> 赞同：5
> 
> 时间：2012-10-15T14:54:40.420
> 
> 标签：java, package, javadoc

Some API docs contain information at package level. For example `java.io` contains 3 package-level sections here [http://docs.oracle.com/javase/7/docs/api/java/io/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/io/package-summary.html)

The sections are: "Package java.io Description", "Package Specification" and "Related Documentation".

Where should I put these sections content in my own project so that javadoc processes it in the same way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:55:58.327

创建一个`package-info.java`在每个包中调用的文件

里面做以下

```
/**
 * Javadoc
 */
package my.cool.package123; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:56:45.830

你把这些评论放在一个[包评论文件](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#packagecomment)中（强调我的）：

> 每个包都可以有自己的文档注释，包含在自己的“源”文件中，Javadoc 工具将合并到它生成的包摘要页面中。您通常在此注释中包含适用于整个包的任何文档。
> 
> 要创建包注释文件，您可以选择两个文件来放置注释：
> 
> *   `package-info.java`- 可以包含包声明、包注释、包注释和 Javadoc 标记。*这个文件通常比 package.html 更受欢迎*。
> *   `package.html`- 只能包含包注释和 Javadoc 标签，不能包含包注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:56:34.007

您必须将一个名为的文件`package-info.java`放入包含您的包的文件夹中。

# spring - Spring Security Authenticated User only

> ID：12898271
> 
> 赞同：0
> 
> 时间：2012-10-15T14:54:42.107
> 
> 标签：spring, spring-security

I just started to read on Spring Security 3.1 and I would like to know how I can enforce user to authenticate through my login page before accessing any pages on my system. On a tutorial I see the following code

```
<http use-e xpressions="true">
    <intercept-url pattern="/index.jsp" access="permitAll" />
    <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')" />
    <intercept-url pattern="/secure/**" access="isAuthenticated()" />
    <intercept-url pattern="/listAccounts.html" access="isAuthenticated()" />
    <intercept-url pattern="/post.html" access="hasAnyRole('supervisor','teller')" />
    <intercept-url pattern="/**" access="denyAll" />
    <form-login />
</http> 
```

From the above configuration I can see that I have to maintain the list of url pattern. Is there a way to simplify this that every user has to login through "/login" before can access any other page ?

EDIT:

I have edited my configuration as below and its working as I expected

```
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/login" access="permitAll" />
    <intercept-url pattern="/loginfailed" access="permitAll" />
    <intercept-url pattern="/logout" access="permitAll" />
    <form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/login" />
    <intercept-url pattern="/**" access="isAuthenticated()" />
</http> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:07:04.617

url 规则按顺序检查，从上到下。第一个匹配的就是使用的那个。

在这个例子中，最后一行

```
<intercept-url pattern="/**" access="denyAll" /> 
```

是“一网打尽”的法则。它适用于与上面的任何规则都不匹配的所有请求（“/**”）。

以目前的形式，它拒绝任何人访问，无论如何。如果您将其更改为

```
<intercept-url pattern="/**" access="isAuthenticated()" /> 
```

相反，除非另有说明，否则它将要求对所有页面进行身份验证，这将导致 Spring Security 将未经身份验证的用户重定向到登录过程。

# git - 将公共代码添加为 git 子模块的问题：“索引中已存在”

> ID：12898278
> 
> 赞同：281
> 
> 时间：2012-10-15T14:55:07.267
> 
> 标签：git, git-submodules

我是 git 新手，希望能在添加子模块方面提供帮助。我收到了两个共享一些通用代码的项目。共享代码刚刚复制到两个项目中。我为公共代码创建了一个单独的 git 存储库，并将其从项目中删除，并计划将其添加为`git`子模块。

我使用 git submodule add 的路径选项来指定文件夹：

```
git submodule add url_to_repo projectfolder 
```

但后来得到了错误：

```
'projectfolder' already exists in the index" 
```

这是我的存储库所需的结构：

```
repo
|-- projectfolder
    |-- folder with common code 
```

可以将`git`子模块直接添加到 repo 中，或者添加到那里的新文件夹中，但不能添加到项目文件夹中。问题是它确实需要在项目文件夹中。我该怎么办？我对 git submodule add 的路径选项有什么误解？

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2012-10-15T19:43:00.207

*恐怕您的问题中没有足够的信息来确定发生了什么，因为您还没有回答我的后续问题，但这无论如何可能会有所帮助。*

该错误意味着`projectfolder`已经上演（“索引中已经存在”）。要了解这里发生了什么，请尝试列出该文件夹下索引中的所有内容：

```
git ls-files --stage projectfolder 
```

该输出的第一列将告诉您索引中的对象类型`projectfolder`。（这些看起来像 Unix 文件模式，但在 git 中有特殊含义。）

我怀疑你会看到类似的东西：

```
160000 d00cf29f23627fc54eb992dde6a79112677cd86c 0   projectfolder 
```

（即以 开头的行`160000`），在这种情况下，存储库`projectfolder`已经添加为“gitlink”。如果它没有出现在 的输出中`git submodule`，并且您想将其重新添加为子模块，您可以执行以下操作：

```
git rm --cached projectfolder 
```

...取消暂存它，然后：

```
git submodule add url_to_repo projectfolder 
```

...将存储库添加为子模块。

但是，您也可能会看到列出了许多 blob（带有文件模式`100644`和`100755`），这表明您`projectfolder`在将新存储库复制到位之前没有正确取消暂存文件。如果是这种情况，您可以执行以下操作来取消暂存所有这些文件：

```
git rm -r --cached projectfolder 
```

...然后添加子模块：

```
git submodule add url_to_repo projectfolder 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2018-07-07T16:04:28.413

您需要首先为 git 路径删除子模块 git 存储库（在本例中为项目文件夹）。

```
rm -rf projectfolder

git rm -r projectfolder 
```

然后添加子模块

```
git submodule add <git_submodule_repository> projectfolder 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2016-06-13T17:34:45.183

手动删除子模块涉及许多步骤，这对我有用。

假设您在项目根目录中并且示例 git 模块名称为“c3-pro-ios-framework”

**删除与子模块关联的文件**

```
rm -rf .git/modules/c3-pro-ios-framework/ 
```

**删除配置中对子模块的任何引用**

```
vim .git/config 
```

[![在此处输入图像描述](../Images/8b32b8105ce83178521c57411281c477.png)](https://i.stack.imgur.com/xP2hi.png)

**删除 .gitmodules**

```
rm -rf .gitmodules 
```

**将其从缓存中删除而不使用“git”**

```
git rm --cached c3-pro-ios-framework 
```

**添加子模块**

```
git submodule add https://github.com/chb/c3-pro-ios-framework.git 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-02-11T16:04:35.603

我遇到了同样的问题，经过数小时的寻找找到了答案。

我得到的错误有点不同：（`<path> already exists and is not a valid git repo`并在此处添加以获取 SEO 价值）

解决方案是不创建将容纳子模块的目录。该目录将作为`git submodule add`命令的一部分创建。

此外，该参数预计与父回购根目录相关，而不是您的工作目录，因此请注意这一点。

上例的解决方案：

1.  可以克隆您的父仓库。
2.  确保该`common_code`目录不**存在**。
3.  `cd Repo`
4.  `git submodule add git://url_to_repo projectfolder/common_code/`（*请注意所需的尾部斜杠。*）
5.  理智恢复了。

我希望这对某人有所帮助，因为在其他地方找不到关于此的信息。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-02-14T07:30:39.277

如果存在`x`git 控制下命名的文件夹，你想添加一个同名的子模块，你应该**删除文件夹`x`并首先提交它**。

由@ujjwal-singh 更新：

不需要提交，分期就足够了`git add`../`git rm -r`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-07-25T15:02:25.867

只是用人类语言澄清错误试图告诉你什么：

您不能在此文件夹中创建已在主存储库中跟踪的存储库。

例如：您有一个名为的主题文件夹`AwesomeTheme`，它是一个专用存储库，您尝试将其直接转储到您的主存储库中，就像`git submodule add sites/themes`您得到这个`"AwesomeTheme" index already exists`.

您只需要确保`sites/themes/AwesomeTheme`主存储库的版本跟踪中还没有一个，以便可以在那里创建子模块。

因此，要修复，在您的主存储库中，如果您有一个空`sites/theme/AwesomeTheme`目录，则将其删除。如果您已经对`sites/theme/AwesomeTheme`主存储库中的目录进行了提交，则需要使用如下命令清除它的所有历史记录：

```
git filter-branch --index-filter \
              'git rm -r --cached --ignore-unmatch sites/theme/AwesomeTheme'     HEAD 
```

现在你可以运行`git submodule add git@AwesomeTheme.repowhateverurlthing sites/themes/AwesomeTheme`

由于主存储库以前从未见过任何东西（也称为索引）`sites/themes/AwesomeTheme`，它现在可以创建它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T09:18:55.767

我通过相反的方式让它工作。从一个空的仓库开始，将子模块添加到一个名为“projectfolder/common_code”的新文件夹中。之后，可以在 projectfolder 中添加项目代码。详情如下所示。

在一个空的 repo 类型中：

```
git submodule add url_to_repo projectfolder/common_code 
```

这将创建所需的文件夹结构：

```
repo
|-- projectfolder
    |-- common_code 
```

现在可以添加更多子模块，并且可以将项目代码添加到 projectfolder。

我还不能说为什么它是这样工作的，而不是另一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-03T11:12:15.870

转到存储库文件夹。从 .gitmodules 中删除相关子模块。选择显示隐藏文件。转到 .git 文件夹，从模块文件夹和配置中删除子模块。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-04T15:11:57.780

如果目标路径中缺少 .git 文件，则会发生这种情况。它发生在我执行后`git clean -f -d`。

我必须删除消息中显示的所有目标文件夹，然后执行`git submodule update --remote`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-12T09:53:10.623

不知道这是否有用，尽管我在尝试从 IntelliJ 15 中提交文件时遇到了同样的问题。最后，我打开了 SourceTree，在那里我可以简单地提交文件。问题解决了。无需发出任何花哨的 git 命令。只是提一下，以防有人遇到同样的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-01T16:59:12.197

如果您使用的是 Ubuntu，请记住也要从垃圾箱中删除文件。

在我的案例中，我将文件移至垃圾箱。

* * *

## 回答 #12

> 赞同：-26
> 
> 时间：2016-12-12T07:08:01.233

在您的 git 目录中，假设您已同步所有更改。

```
rm -rf .git 

rm -rf .gitmodules 
```

然后做：

```
git init
git submodule add url_to_repo projectfolder 
```

# c# - Type.GetType 不起作用

> ID：12898282
> 
> 赞同：8
> 
> 时间：2012-10-15T14:55:27.403
> 
> 标签：c#, types, uri

我刚刚注意到函数中有一个错误：

```
Type.GetType("System.Uri"); 
```

返回值为 null 而以下函数运行良好...

```
Type.GetType("System.string");
Type.GetType("System.bool");
Type.GetType("System.DateTime"); 
```

...

任何人都知道，为什么返回的类型为空？

**编辑：删除了 Uri 双重输入...**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T15:10:00.460

`Type.GetType("System.Uri")`返回的原因`null`是该类型位于*system.dll*而不是*mscorlib.dll*中。您必须使用上述程序集限定名称。

来自 MSDN：

> *typeName* 类型：System.String
> 
> 要获取的类型的程序集限定名称。请参阅 AssemblyQualifiedName。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-15T20:42:57.793

我也遇到了这个问题，并意识到，尤其是在使用 JIT 编译的 ASP.Net 中，我并不总是知道程序集信息。我将以下内容添加到我的 ReflectionUtilities 类中。在某种程度上，它是一个“破解坚果的大锤”，但它同时适用于 AssemblyQualifiedName 和基本类 FullName。第一个基本上缩短了对必须发生的 CurrentDomainAssemblies 的搜索。

```
 public static Type FindType(string qualifiedTypeName)
    {
        Type t = Type.GetType(qualifiedTypeName);

        if (t != null)
        {
            return t;
        }
        else
        {
            foreach (Assembly asm in AppDomain.CurrentDomain.GetAssemblies())
            {
                t = asm.GetType(qualifiedTypeName);
                if (t != null)
                    return t;
            }
            return null;
        }
    } 
```

注意：考虑到反射性能问题，如果可能的话，不应该在没有组装资格的情况下在循环内部调用它。最好访问您需要的第一个项目，从中提取装配信息，然后从那里继续。并不总是合适但效率更高（如果反射中的任何东西都可以称为高效:-)）。

阿利斯泰尔

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T15:02:25.257

试试这个代码：

```
Uri uri = new Uri("http://test");
Type t = Type.GetType(uri.GetType().AssemblyQualifiedName); 
```

然后你可以从类型中复制/粘贴 AssemblyQualifiedName

另一种方法是：

```
Type t = typeof(Uri); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:57:49.563

> [`Type.GetType(String)`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)：
> 
> 获取具有指定名称的 Type，执行区分大小写的搜索。
> 
> 返回值
> 
> 类型：System.Type
> 
> 具有指定名称的类型（如果找到）；否则为空。

所以，如果你打错了，你的类型将不会被找到并且`null`会被返回。这不是错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T14:58:31.817

如果没有其他信息，我猜您没有使用完全限定的类型名称。`Type.GetType()`不仅需要完全限定的类型名称（ie `System.String`），还需要[程序集限定名称](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)，以防您尝试加载当前正在执行的程序集类型以外的任何内容。

# sql - 从另一个 sp 获取 sp 值

> ID：12898285
> 
> 赞同：2
> 
> 时间：2012-10-15T14:55:33.523
> 
> 标签：sql, sql-server, tsql

虽然我环顾了一下，但还没有运气

我正在使用 SQL Server。这是整个场景。

我有一个旧的旧 sp（由于许多依赖项和其他问题，我无法更改）它不返回任何值也不接受任何输出参数，它只是选择一个值作为

```
Create sp myoldsp (@paramentes)
as
...
select scope_identity() as autoID
... 
```

现在我正在写另一个我需要这个 autoID 值的 sp，我试过了

```
exec myoldsp @parameters
select scope_identity() 
```

也试过

```
Declare @autoid int
exec @autoid=myoldsp @parametes 
```

但无法获得该返回值。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:58:42.353

您需要创建一个临时表，然后插入其中。

```
declare @t table (id int)

insert @t (id)
exec myoldsp @parameters 
```

（您正在尝试的 - `exec @autoid=myoldsp`- 将从`return [val]`语句中返回值）

# c++ - 如何将编译标志 -g 添加到 make 文件中？

> ID：12898287
> 
> 赞同：17
> 
> 时间：2012-10-15T14:55:33.667
> 
> 标签：c++, makefile

我有一个 C++ 程序，其他人为其制作了一个 make 文件。我想用标志-g编译程序，但我不知道在哪里添加它。下面是制作文件。

```
CC = g++
LOADLIBES = -lm
CFLAGS = -Wall -O2

SRC1 = Agent.cpp Breeder.cpp CandidateSolution.cpp \
    Cupid.cpp FateAgent.cpp Grid.cpp Reaper.cpp \
    fitness.cpp

SRC2 = main.cpp

SRC  = $(SRC1) $(SRC2)

OBJS = $(SRC1:.cpp = .o)

AUX = $(SRC1:.c = .h)

main: $(OBJS) 
#   $(CC) $(CFLAGS) -o $(SRC) $(AUX) 

.PHONY: clean
clean:
    rm -f *.o main 
```

我应该在哪里添加我想使用 -g 的内容？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T15:09:50.163

$(CC) 用于编译 C 程序。$(CXX) 用于编译 C++ 程序。类似地，$(CFLAGS) 用于 C 程序，$(CXXFLAGS) 用于编译 C++。

将前几行更改为：

```
#CC = g++
LOADLIBES = -lm
CXXFLAGS = -Wall -O2 -g 
```

（但请参阅其他人关于 -O2 和 -g 之间不兼容的注释。）

去掉这一行括号内的空格：

```
OBJS = $(SRC1:.cpp=.o) 
```

将这些行更改为`main`：

```
main: $(OBJS) $(SRC2)
#   Built by implicit rules 
```

* * *

生成的 makefile 应如下所示：

```
#CC = g++
LOADLIBES = -lm
CXXFLAGS = -Wall -O2 -g

SRC1 = Agent.cpp Breeder.cpp CandidateSolution.cpp \
    Cupid.cpp FateAgent.cpp Grid.cpp Reaper.cpp \
    fitness.cpp

SRC2 = main.cpp

SRC  = $(SRC1) $(SRC2)

OBJS = $(SRC1:.cpp=.o)

AUX = $(SRC1:.c=.h)

main: $(OBJS) $(SRC2)
#   Built by implicit rules

.PHONY: clean
clean:
    rm -f *.o main 
```

输出应如下所示：

```
$ make
g++ -Wall -O2 -g   -c -o Agent.o Agent.cpp
g++ -Wall -O2 -g   -c -o Breeder.o Breeder.cpp
g++ -Wall -O2 -g   -c -o CandidateSolution.o CandidateSolution.cpp
g++ -Wall -O2 -g   -c -o Cupid.o Cupid.cpp
g++ -Wall -O2 -g   -c -o FateAgent.o FateAgent.cpp
g++ -Wall -O2 -g   -c -o Grid.o Grid.cpp
g++ -Wall -O2 -g   -c -o Reaper.o Reaper.cpp
g++ -Wall -O2 -g   -c -o fitness.o fitness.cpp
g++ -Wall -O2 -g    main.cpp Agent.o Breeder.o CandidateSolution.o Cupid.o FateAgent.o Grid.o Reaper.o fitness.o -lm  -o main 
```

为了完整起见，这是我在 Ubuntu 10.04 上使用的 make 版本：

```
$ make -v
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i486-pc-linux-gnu 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:58:08.470

您需要取消注释该行：

```
#   $(CC) $(CFLAGS) -o $(SRC) $(AUX) 
```

（删除哈希叹息）：

```
 $(CC) $(CFLAGS) -o $(SRC) $(AUX) 
```

并改变

```
CFLAGS = -Wall -O2 
```

至

```
CFLAGS = -Wall -O2 -g 
```

但是，如果您通过删除禁用优化，您可能会发现调试更容易`-O2`：

```
CFLAGS = -Wall -g 
```

# xna - 碰撞停止所有字符在列表中移动

> ID：12898291
> 
> 赞同：0
> 
> 时间：2012-10-15T14:55:46.840
> 
> 标签：xna, collision-detection, xna-4.0

我正在制作一个游戏，其中角色来自屏幕的相对两侧并相互碰撞和攻击，然后在他们死亡时被移除。我已经设法使列表在它们碰撞时停止移动并造成损坏，但我的问题是当它们中的 2 个碰撞时它们都停止移动。我的shortswordsman碰撞代码是：

```
private void shortMoveCollisions(GameTime gameTime)
    {
        Rectangle shortRect;
        int shortSpeed = 2;
        int shortDamage = 20;
        bool collided = false;

        for (int i = 0; i < shortList.Count; i++)
        {
            List<Goblin> tempGoblinList = new List<Goblin>(goblinList);
            shortRect = new Rectangle((int)shortList[i].position.X, (int)shortList[i].position.Y, ShortSwordsman.texture.Width / 4 - 20, ShortSwordsman.texture.Height);

            foreach (Goblin goblin in tempGoblinList)
            {
                Rectangle goblinRect = new Rectangle((int)goblin.position.X, (int)goblin.position.Y, Goblin.texture.Width / 4 - 20, Goblin.texture.Height);
                if (shortRect.Intersects(goblinRect))
                {
                    collided = true;
                    shortList[i].AnimateAttack(gameTime);

                    shortTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                    if (shortTimer >= shortDelay)
                    {
                        shortTimer -= shortDelay;
                        goblin.health -= shortDamage;
                        if (goblin.health <= 0)
                        {
                            goblinList.Remove(goblin);
                        }
                    }
                }
            }
            if (shortRect.Intersects(background.badCastleRect))
            {
                collided = true;
                shortList[i].AnimateAttack(gameTime);

                shortTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                if (shortTimer >= shortDelay)
                {
                    shortTimer -= shortDelay;
                    badCastleHealth -= shortDamage;
                }
             }
            if (collided == false)
            {
                shortList[i].AnimateWalk(gameTime);

                shortList[i].position.X += shortSpeed;
            }
        }
    } 
```

我的地精碰撞代码是：

```
private void GoblinMoveCollisions(GameTime gameTime)
    {
        Rectangle goblinRect;
        int goblinSpeed = 2;
        int goblinDamage = 20;
        bool collided = false;

        for (int i = 0; i < goblinList.Count; i++)
        {
            List<ShortSwordsman> tempShortList = new List<ShortSwordsman>(shortList);
            goblinRect = new Rectangle((int)goblinList[i].position.X, (int)goblinList[i].position.Y, Goblin.texture.Width / 4 - 20, Goblin.texture.Height);

            foreach (ShortSwordsman shortSwordsman in tempShortList)
            {
                Rectangle shortRect = new Rectangle((int)shortSwordsman.position.X, (int)shortSwordsman.position.Y, ShortSwordsman.texture.Width / 4 - 20, ShortSwordsman.texture.Height);
                if (goblinRect.Intersects(shortRect))
                {
                    collided = true;
                    goblinList[i].AnimateAttack(gameTime);

                    goblinAttackTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                    if (goblinAttackTimer >= goblinAttackDelay)
                    {
                        goblinAttackTimer -= goblinAttackDelay;
                        shortSwordsman.health -= goblinDamage;
                        if (shortSwordsman.health <= 0)
                        {
                            shortList.Remove(shortSwordsman);
                        }
                    }
                }
            }
            if (goblinRect.Intersects(background.goodCastleRect))
            {
                collided = true;
                goblinList[i].AnimateAttack(gameTime);

                goblinAttackTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                if (goblinAttackTimer >= goblinAttackDelay)
                {
                    goblinAttackTimer -= goblinAttackDelay;
                    goodCastleHealth -= goblinDamage;
                }
            }
            if (collided == false)
            {
                goblinList[i].AnimateWalk(gameTime);

                goblinList[i].position.X -= goblinSpeed;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:05:27.310

您的 collided`bool`不应该是这些类的变量，因为这些类似乎在所有实体的整个列表上运行。相反，碰撞检测应该在逐个实体的基础上进行，基本上：使碰撞`bool`成为地精和剑客的属性。这意味着您还必须检查与其他同类生物的交叉点，可能没有攻击命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:48:51.743

这是我目前使用的代码——shortswordsman 和 goblin 是一样的，所以我只展示一个：

在地精类中：

```
public Goblin(Vector2 position, float health, bool Collided, Rectangle goblinRect)
    {
        this.position = position;
        this.health = health;
        this.Collided = Collided;
        this.goblinRect = goblinRect;
    } 
```

在 game1 类中：

```
void CreateGoblin()
    {
        goblinList.Add(new Goblin(new Vector2(1900, 270), 100, false, new Rectangle()));
    } 
```

然后对于我尝试过的碰撞 - 这包括尝试阻止它们相互重叠的位：

```
private void GoblinMoveCollisions(GameTime gameTime)
    {
        int goblinSpeed = 2;
        int goblinDamage = 20;

        for (int i = 0; i < goblinList.Count; i++)
        {
            goblinList[i].Collided = false;
            goblinList[i].goblinRect = new Rectangle((int)goblinList[i].position.X, (int)goblinList[i].position.Y, Goblin.texture.Width / 4 - 20, Goblin.texture.Height);
            List<ShortSwordsman> tempShortList = new List<ShortSwordsman>(shortList);

            foreach (ShortSwordsman shortSwordsman in tempShortList)
            {
                Rectangle shortRect = new Rectangle((int)shortSwordsman.position.X, (int)shortSwordsman.position.Y, ShortSwordsman.texture.Width / 4 - 20, ShortSwordsman.texture.Height);
                if (goblinList[i].goblinRect.Intersects(shortRect))
                {
                    goblinList[i].Collided = true;
                    goblinList[i].AnimateAttack(gameTime);

                    goblinAttackTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                    if (goblinAttackTimer >= goblinAttackDelay)
                    {
                        goblinAttackTimer -= goblinAttackDelay;
                        shortSwordsman.health -= goblinDamage;
                        if (shortSwordsman.health <= 0)
                        {
                            shortList.Remove(shortSwordsman);
                        }
                    }
                }
            }
            if (goblinList[i].goblinRect.Intersects(background.goodCastleRect))
            {
                goblinList[i].Collided = true;
                goblinList[i].AnimateAttack(gameTime);

                goblinAttackTimer += (float)gameTime.ElapsedGameTime.TotalSeconds;
                if (goblinAttackTimer >= goblinAttackDelay)
                {
                    goblinAttackTimer -= goblinAttackDelay;
                    goodCastleHealth -= goblinDamage;
                }
            }
            if (goblinList[i].goblinRect.Intersects(goblinList[i].goblinRect))
            {
                goblinList[i].Collided = true;
                goblinList[i].AnimateStill(gameTime);
            }
            if (goblinList[i].Collided == false)
            {
                goblinList[i].AnimateWalk(gameTime);
                goblinList[i].position.X -= goblinSpeed;
            }
        }
    } 
```

# facebook - Facebook iOS SDK - 为什么连接取消后图形请求仍然完成？

> ID：12898295
> 
> 赞同：1
> 
> 时间：2012-10-15T14:55:49.880
> 
> 标签：facebook, facebook-graph-api

我想让用户取消图片发布请求，就像 Facebook iOS 应用程序的工作方式一样。

如[先前讨论](http://facebook.stackoverflow.com/questions/4958912/facebook-api-how-to-cancel-graph-request)中所述，我在 request.connection 上调用了“取消” 。但是，图像仍然发布。SDK 文档表明这是取消请求的正确方法。我在这里想念什么？有没有办法有效地取消图形请求？

感谢帮助！

# javascript - 使用ajax在黑莓上发送授权标头

> ID：12898296
> 
> 赞同：1
> 
> 时间：2012-10-15T14:55:52.657
> 
> 标签：javascript, ajax, blackberry

我一直在尝试为我的 ajax 调用设置授权标头。它适用于除 Blackberry 4.6 以外的所有浏览器

有没有人设法完成这项工作？它特别令人沮丧，因为[文档](http://docs.blackberry.com/en/developers/deliverables/11849/XMLHttpRequest_573779_11.jsp#XMLHttpRequest_setRequestHeader_620056_11)提到了几个不允许的标题，但不是这个！

我正在尝试使用网站而不是 webworks 来做到这一点。

代码是沿着这些线

```
$.ajax({
     url: path,
     headers: {
         Authorization: 'Basic ' + btoa(username + ':' + password)
     },
     ...
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:20:39.933

似乎 OS6 之前的黑莓不会发送此标头。唯一的选择似乎是使用另一个非标准标头或在 POST 正文或类似内容中发送身份验证详细信息。无论哪种方式，都需要服务器端的一些支持。

# wordpress-theming - Wordpress - 如何在archive.php上仅返回当前月份的帖子

> ID：12898297
> 
> 赞同：0
> 
> 时间：2012-10-15T14:55:53.447
> 
> 标签：wordpress-theming, wordpress

如何修改 wp_query 以根据 URL 按月统计帖子`2012/10/`？

以下将列出**所有**帖子，我只想列出帖子`2012/10/`

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array(  'posts_per_page' => 10, 'paged' => $paged, 'orderby' => 'date', 'order' => 'DESC' );
$wp_query = new WP_Query($args);
while ( have_posts() ) : the_post(); 
```

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:42:33.167

早期答案的链接中提供了一个代码片段，上面写着“仅返回本周的帖子”。将“周”更改为“月”，您就得到了答案。

代码片段如下所示：

```
$year = date('Y');
$month = date('n');
$query = new WP_Query( 'year=' . $year . '&monthnum=' . $month ); 
```

只需阅读[链接](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)。这一切都在那里。

编辑：如果返回月份还有其他问题，可能是因为变量需要[前导零](http://codex.wordpress.org/Formatting_Date_and_Time)。在这种情况下， $month 变量应该是

```
$month = date('m'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:22:38.027

您可以使用`year`和`monthnum`参数来执行此操作，如类参考中的[时间参数部分所述：](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)

```
// ... set up your argument array for WP_Query:
$args = array( 
    'posts_per_page' => 10,
    'paged' => $paged,
    'orderby' => 'date',
    'order' => 'DESC' ,
    // add the year/month query here:
    'year' => 2012,
    'monthnum' => 10

    );

$wp_query = new WP_Query($args);

// ... and so on 
```

# grails - GORM：域映射值的可空约束

> ID：12898301
> 
> 赞同：0
> 
> 时间：2012-10-15T14:56:08.387
> 
> 标签：grails, map, grails-orm, nullable

我有一个带有地图对象的 GORM 域类。

```
class MyClass {
    Map<String, String> myMap

    static constraints = { ... }
} 
```

默认情况下，myMap 中的值不可为空。有没有办法配置约束，使 myMap 中的值可以为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:33:06.623

```
static constraints = {
    myMap nullable: true
} 
```

见[文档](http://grails.org/doc/latest/ref/Constraints/nullable.html)

# c# - .Net 项目构建问题

> ID：12898306
> 
> 赞同：2
> 
> 时间：2012-10-15T14:56:17.837
> 
> 标签：c#, .net, visual-studio

我有一个不会在 Visual Studio 2012 中加载的项目（41 个项目中的 1 个）。我已经继承了该解决方案并正在尝试启动该环境。出现错误，指出找不到 SQLServer.targets，因此我将文件从 3.5 文件夹复制到 4.0 文件夹。现在，我在尝试重新加载项目时收到以下错误：

```
error  : Unable to cast object of type 'Microsoft.VisualStudio.Data.Tools.Package.Project.DatabaseFileNode' to type 'Microsoft.VisualStudio.Data.Tools.Package.Project.Internal.FolderNode'. 
```

有什么想法吗？我觉得我在这一点上旋转我的轮子。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:08:15.980

我在转换包含 SQL Server 的 CLR 存储过程的类项目时遇到了同样的问题。VS 2012 转换尝试将其转换为 sqlproj，但失败了。我没有尝试追查问题的根源，而是从解决方案中删除了该项目，添加了一个 SQL Server 数据库项目，然后将我的代码文件放到了那个新项目中。

# cakephp - cakephp habtm 嵌套数据

> ID：12898308
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:56:28.777
> 
> 标签：cakephp

我有一个 HABTM 关系，我想从产品表中获取类别表的嵌套数据，例如这个产品数组：

```
array(
    (int) 0 => array(
        'id' => (int) 1,
        'name' => 'a',
        'categories' => array(
            (int) 0 => array(
                'id' => (int) 1
            ),
            (int) 1 => array(
                'id' => (int) 2
            )
        )
    ),
    (int) 1 => array(
        'id' => (int) 2,
        'name' => 'b',
        'categories' => array(
            (int) 0 => array(
                'id' => (int) 1
            )
        )
    )
) 
```

这可以用蛋糕吗？

编辑：我将尝试进一步解释我想要做什么。

请耐心等待，我是蛋糕新手，无法掌握它。

我有一个“产品”表：

```
 public $hasAndBelongsToMany = array(
        'Category' => array(
            'className' => 'Category',
            'joinTable' => 'categories_sculptures',
            'foreignKey' => 'sculpture_id',
            'associationForeignKey' => 'category_id',
            'unique' => 'keepExisting'
        )
    ) 
```

和一个类别表：

```
 public $hasAndBelongsToMany = array(
        'Sculpture' => array(
            'className' => 'Sculpture',
            'joinTable' => 'categories_sculptures',
            'foreignKey' => 'category_id',
            'associationForeignKey' => 'sculpture_id',
            'unique' => 'keepExisting'
        )
    ); 
```

和一个类别产品表：

```
 public $belongsTo = array(
    'Category' => array(
        'className' => 'Category',
        'foreignKey' => 'category_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Sculpture' => array(
        'className' => 'Sculpture',
        'foreignKey' => 'sculpture_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

我想建立一个雕塑的视图表，并在每一行中显示每个雕塑所在的类别（可能不止一个）。由于我是蛋糕新手，所以我不知道该怎么做。如果我只是查询 mysql，我可以使用 group_concat 或嵌套选择来获取此信息，或者通过循环通过第一个数组并通过雕塑键查询 category_sculpture 表并将结果添加到第一个数组来低效。但我想知道以蛋糕方式获得此结果的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:31:10.353

我找到了满足我需求的答案：

```
$this->Sculpture->recursive = 1; 
```

# .net - 泛化 DbContext

> ID：12898309
> 
> 赞同：1
> 
> 时间：2012-10-15T14:56:30.183
> 
> 标签：.net, entity-framework, generics

## 介绍

我有一个客户端-服务器架构，其中服务器使用 Entity Framework 5.0 将其数据存储在不同的数据库中。因此，它有不同的`DbContext`类别。但是，它们之间共享一些实体类型。所以我们可以有：

```
public class MyFirstDataAccess : DbContext
{
    //constructor omitted
    public DbSet<SharedType> MyEntities { get; set; }
    public DbSet<OtherType> MyOtherEntities { get; set; }
}
public class MySecondDataAccess : DbContext
{
    public DbSet<SharedType> MyEntitiesWithSharedType { get; set; }
} 
```

当然，实际的实体是不共享的。

## 问题

程序的不同部分只需要部分数据。例如，一部分可以使用 Type 的实体`SharedType`。所以我创建了一个提供数据的通用接口：

```
public interface IEntityProvider<TEntity> where TEntity : class
{
    DbSet<TEntity> Elements { get; set; }

    void Dispose();
    int SaveChanges();
} 
```

`DbContext`在我添加的属性中实现接口`Elements`，它将替换例如`MyEntitiesWithSharedType`属性：

```
DbSet<SharedType> IEntityProvider<SharedType>.Elements { get; set; } 
```

这实际上有效。`DbContext`只要提供所需的数据，程序的不同部分现在都可以使用。

我想在客户端重用服务器的某些部分。当然，客户端没有`DbContext`，而是通过 WCF 服务从服务器检索其数据。因此，`DbSet`不能在`IEntityProvider`接口中使用，因为该接口必须与客户端共享。所以我创建了另一个接口，其中包含`DbSet's`我需要的成员：

```
public interface IEntityCache<TEntity> : IEnumerable<TEntity>, IQueryable<TEntity>
{
    ObservableCollection<TEntity> Local { get; }

    TEntity Add(TEntity entity);
    TEntity Remove(TEntity entity);
} 
```

问题是如何`DbSet`获得`IEntityCache`. 它不能直接转换，因为`DbSet`它没有实现接口，尽管它包含了它的所有成员。我尝试了一些不同的方法，但都没有真正奏效：

## 尝试 1

创建 的子类`DbSet`，它实现所需的接口（--> 类适配器）。

这不起作用，因为`DbSet`没有任何公共或受保护的构造函数。因此，适配器类无效。

## 尝试 2

我没有使用适配器类，而是尝试使用适配器接口，它派生自`IDbSet`必要的接口：

```
public ICustomDbSet<SharedType> MyEntities{ get; set; }
IEntityCache<SharedType> IEntityProvider<SharedType>.Elements { get { return MyEntities; } } 
```

这不起作用，因为 EntityFramework 没有设置`ICustomDbSet`. 可能是因为它设置的值是 no `IEntityCache`。

## 解决方案

在写这个问题时，我找到了一个很好的解决方案（我将作为答案发布）。那么，为什么我要发布这个问题呢？首先，我想知道，是否有任何其他看起来更合理的方法，以及我的解决方案是否有一些缺点。其次，该解决方案可能对其他人有所帮助。第三，写这个问题花了一段时间，扔掉它会很可惜:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:56:30.183

我的解决方案是类适配器方法的后续步骤：使用对象适配器：

```
public class DbSetAdapter<TEntity> : IEntityCache<TEntity> where TEntity : class
{
    DbSet<TEntity> dbSet;

    public DbSetAdapter(DbSet<TEntity> dbSet)
    {
        this.dbSet = dbSet;
    }

    public ObservableCollection<TEntity> Local
    {
        get { return dbSet.Local; }
    }

    public TEntity Add(TEntity entity)
    {
        return dbSet.Add(entity);
    }

    public TEntity Remove(TEntity entity)
    {
        return dbSet.Remove(entity);
    }

    public IEnumerator<TEntity> GetEnumerator()
    {
        return ((IEnumerable<TEntity>)dbSet).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return ((IEnumerable)dbSet).GetEnumerator();
    }

    public Type ElementType
    {
        get { return ((IQueryable<TEntity>)dbSet).ElementType; }
    }

    public Expression Expression
    {
        get { return ((IQueryable<TEntity>)dbSet).Expression; }
    }

    public IQueryProvider Provider
    {
        get { return ((IQueryable<TEntity>)dbSet).Provider; }
    }
} 
```

我在我`DbContext`的下面使用了这个适配器：

```
DbSetAdapter<SharedType> entityAdapter;
...
public DbSet<SharedType> MyEntities{ get; set; }
IEntityCache<SharedType> IEntityProvider<SharedType>.Elements { 
    get 
    {
        if (entityAdapter == null)
            entityAdapter = new DbSetAdapter<SharedType>(MyEntities);
        return entityAdapter; 
    }
} 
```

这样，`IEntityCache`可以以从服务而不是数据库检索数据的方式实现。此外，程序的子部分不必关心他们的数据来自哪里。

# c# - WPF：无法清除列表中的项目并添加新频道

> ID：12898314
> 
> 赞同：0
> 
> 时间：2012-10-15T14:56:39.830
> 
> 标签：c#, wpf, list, button, mvvm

我正在 WPF 中开发一个应用程序，我应该在其中动态生成 UI 组件并对其执行一些操作。我这样做如下：

**XAML：**

```
<Grid Visibility="{Binding IsAvailable, Converter={StaticResource booltovisibility}}">            
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="170" />
        <ColumnDefinition />
        <ColumnDefinition Width="130" />
        <ColumnDefinition Width="115" />
    </Grid.ColumnDefinitions>

    <Label Grid.Column="0" Content="{Binding ChannelName}" />
    <TextBox Grid.Column="1" Text="{Binding VoltageText}" />
    <Button Grid.Column="1" Content="Set" CommandParameter="{Binding VoltageText}" Command="{Binding VoltageCommand}" />
    <Label Grid.Column="2" Content="{Binding CurrentText}"  />
    <ToggleButton Grid.Column="3" Content="On" />
</Grid>

<Button Content="Bavaria" Name="BavariaBtn" Click="BavariaBtn_Click" /> 
```

**XAML.cs：**

```
public void OnChildAdd()
    {            
        foreach (VoltageBoardChannel mVoltageChannelViewModel in mVoltageViewModel.VoltageChannelList)
        {
            VoltageChannelView mVoltageChannelView = new VoltageChannelView();
            mVoltageChannelView.Margin = new Thickness(2);
            mVoltageChannelView.ChannelInfo = mVoltageChannelViewModel;
            //Some Code to add the item
        }
    }

    private void BavariaBtn_Click(object sender, RoutedEventArgs e)
    {
        VoltageViewModel mVoltageViewModel = new VoltageViewModel();

        // Here List should get cleared and Bavaria 2 items should be added
        mVoltageViewModel.VoltageChannelList.Clear();
        mVoltageViewModel.VoltageChannelList = mVoltageViewModel.bavaria2Channels;            
        OnChildAdd();
    } 
```

**视图模型：**

```
public List<VoltageBoardChannel> channelList = null;        

    public List<VoltageBoardChannel> bavaria2Channels = new List<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__IO__AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__CODEC__AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__DAL__AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__DPD__AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__PLL__AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__AMP1__AUD", IsAvailable = true},
    };

    private ICommand m_voltageCommand;        

    public List<VoltageBoardChannel> bavaria1Channels = new List<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__IO", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__CODEC", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__LDO", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__AMP", IsAvailable = true},  
    };            

    public VoltageViewModel()
    {
        channelList = new List<VoltageBoardChannel>(0);
        channelList = bavaria1Channels;            
        m_voltageCommand = new DelegateVoltageCommand(x => SetCommandExecute(x));            
    }

    public List<VoltageBoardChannel> VoltageChannelList
    {
        get 
        { 
            return channelList; 
        }

        set
        { 
            channelList = value;
            OnPropertyChanged("ChannelList");
        }
    } 
```

**型号类：**

```
private string mChannelName;
    public string ChannelName
    {
        get
        {
            return mChannelName;
        }
        set
        {
            mChannelName = value;
            OnPropertyChanged("ChannelName");
        }
    }

    private bool mIsAvailable;
    public bool IsAvailable
    {
        get
        {
            return mIsAvailable;
        }
        set
        {
            mIsAvailable = value;
            OnPropertyChanged("IsAvailable");
        }
    }        

    public ICommand VoltageCommand { get; set; } 
```

您可以在 ViewModel 类中注意到 Bavaria 1 在启动时显示。我在这里基本上想要的是清除项目，然后显示 Bavaria 2 项目，`BavariaBtn_Click()`如 xaml.cs 类所示。我正在尝试这样做，但列表没有被清除，尽管正在添加项目。

我怎样才能实现它？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:29:34.957

您正在清除一个局部变量。XAML 不知道你已经这样做了，事实上没有人知道你已经清除了局部变量，但方法本身：

```
// Nobody knows the trouble I've seen...
VoltageViewModel mVoltageViewModel = new VoltageViewModel();

// Here List should get cleared and Bavaria 2 items should be added
mVoltageViewModel.VoltageChannelList.Clear(); 
```

清除列表的 MVVM 方法是将 Clear 命令添加到您的视图模型中：

```
public ICommand ClearCommand { get; private set; }

// ...

public VoltageViewModel(...)
{
    // ...
    this.ClearCommand = new DelegateCommand(
        () => this.VoltageChannelList.Clear(),
        () => this.VoltageChannelList.Count > 0);
} 
```

然后在您的 XAML 中：

```
<Button Content="Bavaria" x:Name="BavariaBtn" Command="{Binding ClearCommand}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:36:43.610

首先...您确实需要使用 ObservableCollection。正如@Miklos 所说，该列表不会发送通知。

其次，当你这样做时：

```
mVoltageViewModel.VoltageChannelList = mVoltageViewModel.bavaria2Channels; 
```

您正在清除 VoltageChannelList 列表。你不能做这个。您将不得不遍历列表并手动复制项目

```
private void BavariaBtn_Click(object sender, RoutedEventArgs e)   
    {   
        VoltageViewModel mVoltageViewModel = new VoltageViewModel();   

        // Here List should get cleared and Bavaria 2 items should be added   
        mVoltageViewModel.VoltageChannelList.Clear();   

        foreach (VoltageBoardChannel channel in  mVoltageViewModel.bavaria2Channels) 
            mVoltageViewModel.VoltageChannelList.Add(channel);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:11:56.607

简单列表不会发送有关其元素更改的通知。它不实现`INotifyCollectionChanged`接口。

`ObservableCollecition`确实如此，因此请使用`ObservableCollection`而不是 list 作为您的**VoltageChannelList**属性，并且您不需要`OnPropertyChanged("VoltageChannelList");`在设置器中

# java - EditText 标签导致错误膨胀类

> ID：12898315
> 
> 赞同：0
> 
> 时间：2012-10-15T14:56:39.860
> 
> 标签：java, android, android-layout

将**EditText**添加到我的布局 xml 后，我的 android 应用程序的错误报告在某些用户设备上给出了这样的异常。

```
android.view.InflateException: Binary XML file line #76: Error inflating class <unknown>
        at android.view.LayoutInflater.createView(LayoutInflater.java:513)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200)
        at android.app.Dialog.setContentView(Dialog.java:421)
        at myobfuscated.d.dt.<init>(ProGuard:52)... 
```

我无法在自己的手机上重现此内容，但我收到了其他用户的投诉。如果你们中的一些人以前遇到过这样的问题，请给我一个关于如何重现/解决它的提示。

这是我的布局 xml 文件的一部分，从第 76 行开始

```
<EditText android:hint="Message your friend"
            android:textSize="15sp" android:paddingLeft="4dp" android:id="@+id/msgTextField"
            android:layout_width="180dp" android:layout_height="100dp"
            android:layout_below="@+id/gift_layout"
            android:layout_centerHorizontal="true" android:layout_marginTop="15dp"
            android:maxLength="100"
            android:background="@drawable/input_name"
            android:scrollY="10dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:29:32.870

问题出在**android:scrollY="10dp"**属性中。它在某些型号的手机上导致了上述问题/异常。虽然我无法自己复制它，但在删除该属性后，异常消失了，我再也没有收到用户的投诉。

# r - 在R中*快速*将字符转换为日期

> ID：12898318
> 
> 赞同：9
> 
> 时间：2012-10-15T14:56:47.593
> 
> 标签：r, date, character, posix

> **可能重复：**
> [为什么 as.Date 在字符向量上慢？](https://stackoverflow.com/questions/12786335/why-is-as-date-slow-on-a-character-vector)

我`data.frame`使用`RMySQL`. 日期是作为字符引入的（似乎没有办法改变它），所以我`as.Date`用来将事物转换为日期。然而，由于有如此多的观察，这需要非常长的时间。有什么办法可以让这更快吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-15T15:08:57.163

Simon Urbanek 的[fasttime](http://rforge.net/fasttime)库对于可解析日期时间的子集*非常*快：

```
R> now <- Sys.time()
R> now
[1] "2012-10-15 10:07:28.981 CDT"
R> fasttime::fastPOSIXct(format(now))
[1] "2012-10-15 05:07:28.980 CDT"
R> as.Date(fasttime::fastPOSIXct(format(now)))
[1] "2012-10-15"
R> 
```

但是，它只解析 ISO 格式并将 UTC 假定为时区。

*3 1/2 年后编辑：* 一些评论者似乎认为 fasttime 包很难安装。我不敢苟同。这是（再次）使用`install.r`它只是一个使用[littler](http://dirk.eddelbuettel.com/code/littler.html)的简单包装器（并且也作为示例附带）：

```
edd@max:~$ install.r fasttime
trying URL 'https://cran.rstudio.com/src/contrib/fasttime_1.0-1.tar.gz'
Content type 'application/x-gzip' length 2646 bytes
==================================================
downloaded 2646 bytes

* installing *source* package ‘fasttime’ ...
** package ‘fasttime’ successfully unpacked and MD5 sums checked
** libs
ccache gcc -I/usr/share/R/include -DNDEBUG      -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g  -O3 -Wall -pipe -pedantic -std=gnu99  -c tparse.c -o tparse.o
ccache gcc -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o fasttime.so tparse.o -L/usr/lib/R/lib -lR
installing to /usr/local/lib/R/site-library/fasttime/libs
** R
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
* DONE (fasttime)

The downloaded source packages are in
        ‘/tmp/downloaded_packages’
edd@max:~$ 
```

如您所见，该软件包的外部依赖项为零，只有一个源文件，并且可以毫无障碍地构建。我们还可以看到，[fasttime](http://cloud.r-project.org/package=fasttime)现在在 CRAN 上，而写答案时并非如此。这样一来，Windows 和 OS X 二进制文件现在确实存在于该页面上，即使您不从源代码安装，*安装也会像我一样简单。*

# php - 使用 preg_match() 或 preg_match_all() 匹配网页中的字符串（多行）

> ID：12898320
> 
> 赞同：0
> 
> 时间：2012-10-15T14:56:56.927
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我有以下 HTML 输出我想匹配其中的数据，尝试使用 preg_match() 和 preg_match_all() 没有成功。

```
<td width="130" valign="top">
Jane Doe<br />
            101 Marisa Cir <br />
            Staten Island NY, 10309<br /><br> 
```

我想将“地址数据”匹配为：

> Jane Doe, 101 Marisa Cir Staten Island NY, 10309

我用 CURL 获取页面。我尝试过这样的事情但没有成功：

```
preg_match('~<td width="130" valign="top">(.*?[^<])<br /><br>~i', $str, $showme); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:00:38.107

`[^<]`会说匹配任何不是的东西`<`，所以它不会`<br/>`在每行的末尾接受两个。如果你只尝试会发生什么：

```
preg_match('~<td width="130" valign="top">(.+?)<br /><br>~i', $str, $showme); 
```

如果您想在`<br/>`之后删除这些标签，您可以将它们替换掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:18:13.723

您需要有 s 修饰符，如此[处](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)所述。它使点匹配新行。因为您的文本是多行的，所以您需要 s 修饰符。您可以使用这样的正则表达式：

```
preg_match_all('~"top">(.*?)<br />(.*?)<br />(.*?)<br /><br>$~s', $text, $matches); 
```

这应该有效。[请参阅此处](http://codepad.viper-7.com/4zovCh)的键盘示例。

# c# - 使用 .NETMF 中的密码和 SALT 生成密钥和 IV 生成器的加密

> ID：12898322
> 
> 赞同：2
> 
> 时间：2012-10-15T14:57:02.740
> 
> 标签：c#, .net, encryption, .net-micro-framework, .net-gadgeteer

我正在实现一个 .NET Micro Framework 应用程序，并且我有一个代码，例如：

```
public static void Main()
{
    string data = "Here is some text to encrypt.";

    AesCryptoServiceProvider csp = new AesCryptoServiceProvider();
    csp.GenerateKey();
    csp.GenerateIV();

    CryptoKey k = csp.Key;
    byte[] iv = csp.IV;

    byte[] key = k.ExportKey(true);

    AesCryptoServiceProvider csp2 = new AesCryptoServiceProvider();

    byte[] enc = AesEncrypt(UTF8Encoding.UTF8.GetBytes(data), key, iv);
    byte[] dec = AesDecrypt(enc, key, csp.IV);
    char[] c = UTF8Encoding.UTF8.GetChars(dec);
    string decodedStr = new string(c);
    Debug.Print("\n dec: " + decodedStr );
}

public static byte[] AesEncrypt(byte[] data, byte[] key, byte[] iv)
{
    using (AesCryptoServiceProvider csp = new AesCryptoServiceProvider())
    {
        csp.Key = CryptoKey.ImportKey(csp.Session, key,
        CryptoKey.KeyClass.Secret, CryptoKey.KeyType.AES, true);

        csp.IV = iv;
        using (ICryptoTransform encr = csp.CreateEncryptor())
        {
            return encr.TransformFinalBlock(data, 0, data.Length);
        }
    }
}
public static byte[] AesDecrypt(byte[] encryptedData, byte[] key, byte[] iv)
{
    using (AesCryptoServiceProvider csp = new AesCryptoServiceProvider())
    {
        csp.Key = CryptoKey.ImportKey(csp.Session, key,
        CryptoKey.KeyClass.Secret, CryptoKey.KeyType.AES, true);
        csp.IV = iv;
        using (ICryptoTransform decr = csp.CreateDecryptor())
        {

            return decr.TransformFinalBlock(encryptedData, 0, encryptedData.Length);
        }
    }
} 
```

我的 gadgeteer (FEZ Hydra) 会加密一些文本。它**不会**有互联网连接，所以它会通过 OLED 显示器或其他方式输出。我将在 .NET Framework PC 中对其进行解密。现在我有两个问题：

1- 不幸的是 .NETMF 4.2 RTM (QFE2) 没有 .NET Framework 中存在的任何功能，例如`Rfc2898DeriveBytes`或`RandomNumberGenerator`. 因此，我找不到从密码和 SALT 派生 Key&IV 的方法。

2-（假设我们解决了问题 #1）我不能对每次加密/解密都使用随机密钥和 IV，因为 gadgeteer 没有互联网连接，以便以安全的方式将密钥和 IV 发送到我的 .NET Framework PC。所以我认为另一种解决方案：如果我从密码和 SALT 中获取密钥和 IV，并且我的 gadgeteer（加密）和 PC（解密）都使用相同的密码和 SALT，那么我可以处理它。是的，我听到了声音**不要使用相同的 IV 等进行多次加密。**但由于成本和其他问题，我必须不要将 gadgeteer 连接到 wifi。在这种情况下，这是一种安全的方法吗？还是需要很多改进（例如公钥和私钥实现等）？如何？

我很乐意为您提供任何建议，谢谢

穆拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:33:49.840

我没有使用过 .net Micro Framework。但是，api 列表有一个名为[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/hh423389.aspx)的随机数生成器。Rfc2898DeriveBytes 只是使用 Hmac-Sha1 的 PBKDF2 实现，并且存在一个支持 HMAC-SHA1 的[KeyedHashAlgorithm](http://msdn.microsoft.com/en-us/library/hh422676.aspx)类（参见算法[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，它非常简单）。

# php - 存储过程，没有返回值？

> ID：12898323
> 
> 赞同：-5
> 
> 时间：2012-10-15T14:57:05.173
> 
> 标签：php, mysql, stored-procedures, mysqli

我的第一个存储过程已创建，但在 phpmyadmin 中调用该过程会给出 1 行结果，但在 php 中它为 NULL？

```
$res = $mysqli->query("CALL ts_open_uitdagingen");
$row = $res->fetch_assoc();
var_dump($res->fetch_assoc()); 
```

在我的页面中显示：NULL

在 phpMyAdmin 结果是一行： open_uitdagingen 3

我的想法中缺少的环节是什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-15T15:45:13.617

我不知道为什么，但是使用 print_r 我确实得到了结果！

```
print_r($row); 
```

显示：数组（ [open_uitdagingen] => 3 ）

所以我确实得到了结果，但为什么 var_dump($res->fetch_assoc()); 给出一个空的结果？我仍然不知道，但我现在可以继续，这很重要：）

# python - pymf 分解解决方案排序？

> ID：12898333
> 
> 赞同：0
> 
> 时间：2012-10-15T14:57:56.703
> 
> 标签：python, numpy, variance, factorization

我尝试使用[`pymf`module](http://code.google.com/p/pymf/)对我的数据集应用矩阵分解。如`pymf`网站上的示例所述，我使用`non-negative matrix factorization`，所以我得到了一些`W`- 和 -`H`矩阵。我如何确保`W`返回的 -vectors 是按解释的方差排序的？我在手册中找不到它，在我的所有测试中都是如此。如果已经完成，我想避免再次对它们进行排序。

如果*不是*：有没有一般*最快*的方法？

我想到了类似的东西

```
let X approx= dot(W,H)
for k in arange(0,W[:,0].size):
    variance[k] = abs(dot(W[k],H[k])**2
X-variance 
```

或者

```
let X approx= dot(W,H)
variances = var(dot(X,W),axis=0) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:54:46.847

查看[pymf nonnegative factorization 的源代码](http://code.google.com/p/pymf/source/browse/trunk/lib/pymf/nmf.py)，我看不到按方差对向量进行排序的选项。

# php - PHP递归类别迭代器问题

> ID：12898337
> 
> 赞同：0
> 
> 时间：2012-10-15T14:58:03.787
> 
> 标签：php, recursion, tree

这是我正在使用的课程：

```
class RecursiveCategoryIterator implements RecursiveIterator {
    const ID_FIELD = 'cat_ID';
    const PARENT_FIELD = 'parent';

    private $_data;
    private $_root;
    private $_position = 0;

    public function __construct(array $data, $root_id='0') {
        $this->_data = $data;
        $this->_root = $root_id;
    }

    public function valid() {
        return isset($this->_data[$this->_root][$this->_position]);
    }

    public function hasChildren() {
        $subid = $this->_data[$this->_root][$this->_position][self::ID_FIELD];
        return isset($this->_data[$subid])
            && is_array($this->_data[$subid]);
    }

    public function next() {
        $this->_position++;
    }

    public function current() {
        return $this->_data[$this->_root][$this->_position];
    }

    public function getChildren() {
        return new self($this->_data,
            $this->_data[$this->_root][$this->_position][self::ID_FIELD]);
    }

    public function rewind() {
        $this->_position = 0;
    }

    public function key() {
        return $this->_position;
    }

    public static function createFromResult($result) {
        $menu_array = array();
        while($row = mysql_fetch_assoc($result)) {
            $menu_array[$row[self::PARENT_FIELD]][] = $row;
        }

        return new self($menu_array);
    }
} 
```

当我获取根类别时它工作得很好..意味着当第一个字段`parent`是`zero`..但是如果我在树之间获取类别..那么它会失败..因为它只有在第一个数组为零时才有效..

例如这个数组：

```
RecursiveCategoryIterator Object
(
    [_data:RecursiveCategoryIterator:private] => Array
        (
            [1] => Array
                (
                    [0] => Array
                        (
                            [cat_ID] => 27
                            [cat_name] => Local Guess Papers
                            [cat_nicename] => local-guess-paper
                            [parent] => 1
                            [post_count] => 5
                            [depth] => 0
                        )

                )

            [27] => Array
                (
                    [0] => Array
                        (
                            [cat_ID] => 28
                            [cat_name] => Class IX
                            [cat_nicename] => class-9
                            [parent] => 27
                            [post_count] => 0
                            [depth] => 1
                        )

                    [1] => Array
                        (
                            [cat_ID] => 34
                            [cat_name] => Class X
                            [cat_nicename] => class-10
                            [parent] => 27
                            [post_count] => 0
                            [depth] => 1
                        )

                    [2] => Array
                        (
                            [cat_ID] => 40
                            [cat_name] => Class XI
                            [cat_nicename] => class-11
                            [parent] => 27
                            [post_count] => 0
                            [depth] => 1
                        )

                    [3] => Array
                        (
                            [cat_ID] => 46
                            [cat_name] => Class XII
                            [cat_nicename] => class-12
                            [parent] => 27
                            [post_count] => 0
                            [depth] => 1
                        )

                )

            [28] => Array
                (
                    [0] => Array
                        (
                            [cat_ID] => 29
                            [cat_name] => Year 2010
                            [cat_nicename] => year-2010
                            [parent] => 28
                            [post_count] => 0
                            [depth] => 2
                        )

                    [1] => Array
                        (
                            [cat_ID] => 30
                            [cat_name] => Year 2007
                            [cat_nicename] => year-2007-guess
                            [parent] => 28
                            [post_count] => 4
                            [depth] => 2
                        )

                    [2] => Array
                        (
                            [cat_ID] => 31
                            [cat_name] => Year 2008
                            [cat_nicename] => year-2008-guess
                            [parent] => 28
                            [post_count] => 4
                            [depth] => 2
                        )

                    [3] => Array
                        (
                            [cat_ID] => 32
                            [cat_name] => Year 2009
                            [cat_nicename] => year-2009-guess
                            [parent] => 28
                            [post_count] => 2
                            [depth] => 2
                        )

                    [4] => Array
                        (
                            [cat_ID] => 33
                            [cat_name] => Year 2006
                            [cat_nicename] => year-2006-cbse-guess-paper
                            [parent] => 28
                            [post_count] => 3
                            [depth] => 2
                        )

                )

)

    [_root:RecursiveCategoryIterator:private] => 0
    [_position:RecursiveCategoryIterator:private] => 0
) 
```

没有返回任何东西，因为`first element is NOT zero`

这是我可以使用此类的功能：

```
$sql='some sql to retrive data';
$result = mysql_query($sql);

$recurdata = RecursiveCategoryIterator::createFromResult($result);

makecat($recurdata,'','');

function makecat($iterator, $parent_name,$category) {
foreach($iterator as $row) {
  echo(''.$row['cat_name'].'');
if($iterator->hasChildren()) {

    makecat($iterator->getChildren(), $row['cat_name'],$category);

        }
}
} 
```

**所以我想知道从树中间获取数据时如何显示数据`when first parent is not the zero`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:24:55.563

我自己解决了..在这里发布解决方案以防将来有人想使用它：

初始化类时，我需要传递当前的父 id，然后它就会全部设置好。

```
$recurdata = RecursiveCategoryIterator::createFromResult($result,$current_parent_id); 
```

然后在递归类中，添加这个作为回报：

```
public static function createFromResult($result,$root_id) {
        //$this->root_id=$current_cat_id;
        $menu_array = array();
        while($row = mysql_fetch_assoc($result)) {
            $menu_array[$row[self::PARENT_FIELD]][] = $row;
        }

        return new self($menu_array,$root_id);
    } 
```

看到`$root_id`这里被传递了..然后它会像魅力一样工作:)

希望它对将来的人有所帮助:)

# javascript - Ruby on rails/Javascript 小部件

> ID：12898338
> 
> 赞同：2
> 
> 时间：2012-10-15T14:58:06.990
> 
> 标签：javascript, jquery, json, widget, ruby-on-rails-3.2

所以这是我的观点，我尝试遵循一些教程并最终从[http://8raystech.com/2011/11/28/how-to-create-embeddable-widgets-with-rails阅读所有参考资料](http://8raystech.com/2011/11/28/how-to-create-embeddable-widgets-with-rails)

我花了将近 2 天的时间来寻找我显然在某个地方犯的小错误，因为我是 ruby​​ on rails 的新手。我认为这可能是一个路由错误，因为当我通过 Chrome 检查元素时，我看到以下错误： **编辑：**

```
"GET http://localhost:3000/widget 500 (Internal Server Error)" 
```

我拼命尝试了很多东西，但这是我当前的代码：

我的小部件控制器如下所示：（widget_controller.rb）

```
class WidgetController < ApplicationController
    def show
        @content = render_to_string(:partial => 'widget/embed', :layout => false)
    end
end 
```

我使用 javascript (show.erb.html) 的视图

```
(function() {
    document.write(<%= @content.to_json %>)
})() 
```

我认为部分并不重要，但这里有一个例子：（_embed.erb.html）

```
<style>...</style>
<div class="widget-communication">
    <div>Bla bla bla</div>
    ...
</div> 
```

最后，在 routes.rb

```
...
match 'widget', to: 'widget#show'
... 
```

所以我在本地进行了测试以使用以下方法加载我的小部件：

```
<script src="http://localhost:3000/widget" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:14:52.233

我不知道小部件，但似乎您仍然希望将部分呈现为 HTML 而不是 JS。您只是将字符串分配给值内容，并且它想要使用默认渲染操作。尝试使用不是 .erb 而是 .js 文件扩展名（show.js.erb），所以：

在控制器中，您仍然需要返回一个集合，即：

```
class WidgetController < ApplicationController
  respond_to :js, only: :show

  def show
    @user = User.find params[:id]
  end
end 
```

并在视图中（show.js.html）：

```
document.write("<%= escape_javascript(render(:partial => 'widget/embed', :locals => {:user => @user})).html_safe) %>"); 
```

虽然我不推荐使用`respond_to :js`. 调试非常困难，速度很慢，并且混合了 html 和 js 逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:45:01.407

好的，这是另一种方法...... JQuery和Json......

因此，直接使用像您的用户控制器这样的控制器或您想放入小部件中的任何信息，在我的示例中，是有关公司的一些信息。

所以在你的控制器中添加一个方法小部件，如：

```
def widget
    @company = Company.find(params[:id])
    @logo_url = @company.logo_url(:mini)
    respond_to do |format|
      format.json { render :json => {:company => @company, :url => @logo_url}, :callback => params[:jsoncallback] }
    end
  end 
```

在您的 routes.rb 中，您应该有类似的内容：

```
resources :public_company_profiles do
    get :widget, on: :member
  end 
```

然后 JQuery 部分从第三方网站将使用的 JSON 信息生成 html 代码：首先是添加 jquery 的脚本，然后是实际的 jquery 请求。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script>
$.getJSON("http://www.yourwebsite.com/yourcontroller/ID/widget?jsoncallback=?",
    function(data) {   
    var logo_url = "http://www.yourwebsite.com" + data.url;
    $("#logo img").attr('src',logo_url);
    $("#logo img").attr('alt',data.company.name);
    $("#name").html(data.company.name);
    $("#desc").html(data.company.description);
  });
</script> 
```

然后它起作用了宝贝！（不要忘记将 jQuery 文档的内容放在此处：api.jquery.com/html）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:59:42.500

为什么要使用 render_to_string？您是否尝试过简单的渲染？

另外，也许尝试让您的 GET 调用将 .json 附加到 URL 的末尾。

# excel - 选择性邮件消息合并

> ID：12898341
> 
> 赞同：2
> 
> 时间：2012-10-15T14:58:16.037
> 
> 标签：excel, vba

我正在尝试进行合并并嵌入一些逻辑：我正在向收件人列表发送指令，并且只包含适用于每个收件人的部分消息。数据是从一个包含用户名/电子邮件地址列的 excel 表中填充的，以及带有标志变量的列，每个用户指定他们是否应该接收由该列标识的一段指令。我对VB不是很了解，我想用那些标志变量来指定该列对应的指令是否应该包含在消息中。

请让我知道这在 VBA 中是否可行，或者是否有更好的方法来解决这个问题——目前指令的接收者列表很小，但预计会快速增长，我想开发这个过程在此之前。

更新：我应该补充：我应该*怎么*做？哪些资源会有所帮助——指南、pastebin 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:37:42.327

如果您不想包含特定收件人的段落，您可以将 Excel 表中该字段的文本设置为空白（即 =“”）。邮件合并字段仍将存在于模板信函中，但它不会对应任何可见文本并且不会占用任何空间。如果段落太长而无法放入单个 Excel 单元格中，您可以将其拆分为更小的部分。

您可以在不使用 VBA 的情况下执行此操作，方法是在您的 Excel 表中为您可能想要包含的每个段落设置一列。这些又可以根据标志列通过 vlookup 或 if 函数用段落文本填充或空白。

# c# - 绑定到 UI 的调度程序和集合

> ID：12898343
> 
> 赞同：1
> 
> 时间：2012-10-15T14:58:25.977
> 
> 标签：c#, wpf, multithreading, dispatcher

调度员的烦恼，希望有些人知道解决方法。

问题：任何 UI 元素或绑定到它们的任何东西都被**强制/必需**到 Dispatcher 线程。然后根据操作导致挂起时间。我有一个绑定到 UI 元素的集合，并且操作不能在不同的线程上，因此挂起时间迫在眉睫。

这个问题有什么解决办法吗？

请不要回复`Dispatcher.Invoke`或任何相关类型，因为它们不起作用。因为它们是同步的。现在，我真正能做的就是优化操作以尽可能快地进行，但实际上是有限的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:05:29.750

很可能，虽然您正在做的一些工作需要在 UI 线程中进行，但*所有*工作都不需要。如果要将数据绑定到控件，则应确保数据全部在后台线程中计算，然后在 UI 线程中发生的唯一操作是将已获取/计算的数据应用于控件。例如，如果您正在使用`IQueryable`框架并将`IQueryable`查询结果绑定为数据源，则该查询的结果实际上还没有被评估；由于尚未迭代结果，因此实际上并未查询数据库。这样做会导致 UI 线程进行数据库调用，这是一件坏事。

如果您实际上拥有如此多的数据，以至于您确实需要很长时间才能更新所有控件，尽管事实上您*并没有*像我所描述的那样做任何事情，那么您可能需要从根本上重新设计您的应用程序。如果您确实是这种情况，那么您必须将数千行数据绑定到 DataGrid（或类似的东西）。您可能需要对数据进行分页，或者按照这些方式执行其他操作，以确保不会一次将大量数据实际应用于您的控件。您需要找到某种方法将事物分解为更小的数据块，然后显示这些更小的数据块。

# java - 应该执行复数算术的简单应用程序中的编译错误

> ID：12898344
> 
> 赞同：1
> 
> 时间：2012-10-15T14:58:29.503
> 
> 标签：java, eclipse, enums, syntax-error

我必须用java编写简单的计算器。我在 Eclipse 中编写了我的代码，并且在 dodaj 和 odejmij 方法中有两个错误（相同）。

Eclipse 中的错误 -`insert "EnumBody" to complete BlockStatement`

我寻找如何解决它，但我没有找到。请帮我。有人有同样的问题吗？非常感谢帮助我。

```
 import java.util.Scanner;
    class Kalkulator {
    static Object z1=new LiczbaZespolona();
    static Object z2=new LiczbaZespolona();
    String dodaj="+";
    String odejmij="-";
    String pomnoz="*";
    String podziel="/";
    String wynik;
    static String d;
    String dzialanie=d;
    public static void main(String args[]){

        Scanner input = new Scanner(System.in);
        System.out.println("Podaj pierwszą liczbę: ");
        z1 = input.next();

        System.out.println("Podaj drugą liczbę: ");
        z2 =  input.next();

        System.out.println("wybierz działanie: ");
         d = input.next();

        public static dodaj();{//insert "EnumBody" to complete BlockStatement, insert "enum Identifier" to complete EnumHeaderName

                 z3=z1+z2;
                return;
            }
             public static odejmij();{//insert "EnumBody" to complete BlockStatement, insert "enum Identifier" to complete EnumHeaderName

                z4=z1-z2;
                return;
            }

            switch (wynik){
            case 1:
                if (d=='+'){
                    return dodaj;}
                    break;
            case 2:
                if(d=='-'){
                    return odejmij;
                }
                break;
            }   
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:13:05.733

除了 SO 用户写的问题之外，您正在做的算术也会有更多问题。[由于 Java 不支持运算符重载](https://stackoverflow.com/questions/3559563/why-doesnt-java-need-operator-overloading)。这对您来说意味着如果您有两个类对象`LiczbaZespolona`（[ComplexNumber](http://en.wikipedia.org/wiki/Complex_number)），编译器将不知道如何处理它并且将无法编译。

为了解决这个问题，你需要两件事在某个类中实现这些数字的算术。当然，您需要一些点才能开始，这个界面可能会有所帮助

```
private static interface IComplexNumber {

        public IComplexNumber add(IComplexNumber complexNumber);
        public IComplexNumber substract(IComplexNumber complexNumber);
        public IComplexNumber multiply(IComplexNumber complexNumber);
        public IComplexNumber divide(IComplexNumber complexNumber);

} 
```

然后，当您知道如何添加两个 ComplexNumber 时，您将需要一些可以为您执行操作的东西。对于这种类型的操作，最好的方法是枚举类型。

这门课可以从这个开始

```
private enum CompleNumberCalculation {
    ADD('+') {

        @Override
        protected IComplexNumber operation(IComplexNumber left, IComplexNumber right) {
            return left.add(right);
        }
    };

    private char operator;

    private CompleNumberCalculation(char operator) {
        this.operator = operator;
    }

    protected abstract IComplexNumber operation(IComplexNumber left, IComplexNumber right);

} 
```

为了帮助你，我写了一个简单的`MathOperation`枚举来解决[RegularNumber的计算](http://en.wikipedia.org/wiki/Regular_number)

```
public enum RegularMathOperation {
    ADD('+') {

        @Override
        protected BigDecimal operation(BigDecimal left, BigDecimal right) {
            return left.add(right);
        }
    },
    SUBSTRACT('-') {

        @Override
        protected BigDecimal operation(BigDecimal left, BigDecimal right) {
            return left.subtract(right);
        }
    },
    MULTIPLY('*') {

        @Override
        protected BigDecimal operation(BigDecimal left, BigDecimal right) {
            return left.multiply(right);
        }
    },
    DIVIDE('/') {

        @Override
        protected BigDecimal operation(BigDecimal left, BigDecimal right) {
            return left.divide(right,MathContext.DECIMAL64);
        }
    };

    private final char operator;

    private RegularMathOperation(char operator) {
        this.operator = operator;
    }

    public char operator() {
        return this.operator;
    }

    public <T1 extends Number, T2 extends Number> T1 calculate(T1 left, T2 right) {

        validateInput(left, right);

        Class<? extends Number> resultType = left.getClass();
        BigDecimal result = this.operation(toBigDecimal(left), toBigDecimal(right));

        return (T1) toType(resultType, result);

    }

    protected abstract BigDecimal operation(BigDecimal left, BigDecimal right);

    private void validateInput(Number left, Number right) {

        if(left == null) {
            throw new IllegalArgumentException("Value of left argument must not be null to perform operation " + this.name());
        }

        if(right == null) {
            throw new IllegalArgumentException("Value of left argument must not be null to perform operation " + this.name());
        }

    }

    private BigDecimal toBigDecimal(Number value) {

        if(value instanceof BigDecimal) {
            return (BigDecimal) value;
        }

        return new BigDecimal(value.doubleValue());

    }

    private Number toType(Class<? extends Number> type, BigDecimal value) {

        if(Double.class.isAssignableFrom(type)) {
            return type.cast(value.doubleValue());
        }

        if(Long.class.isAssignableFrom(type)) {
            return type.cast(value.longValue());
        }

        if(Integer.class.isAssignableFrom(type)) {
            return type.cast(value.intValue());
        }

        //...

        throw new IllegalStateException("Type not support: "+type);

    }

    public static Map<Character, RegularMathOperation> operatorMap = new HashMap<Character, RegularMathOperation>();

    static  {//Fill map

        for(RegularMathOperation mathOperation : RegularMathOperation.values()) {
            operatorMap.put(mathOperation.operator(), mathOperation);
        }

    }

    public static RegularMathOperation valueOf(char operator) {

        RegularMathOperation mathOperation = operatorMap.get(Character.valueOf(operator));

        if(mathOperation == null) {
            throw new IllegalArgumentException("Could not find MathOperator for operartor: " + operator);
        }

        return mathOperation;
    }

    public static <T1 extends Number, T2 extends Number> T1 resultOf(char operator, T1 left, T2 right) {

        return RegularMathOperation.valueOf(operator).calculate(left, right);

    }

    public static void main(String[] args) {

        Long left   = 3L;
        Double right  = 2D;

        System.out.println(RegularMathOperation.resultOf('+', left, right));
        System.out.println(RegularMathOperation.resultOf('-', left, right));

        System.out.println(RegularMathOperation.valueOf('*').calculate(left, right));
        System.out.println(RegularMathOperation.valueOf('*').calculate( left, right));

        System.out.println(RegularMathOperation.DIVIDE.calculate(left, right));
        System.out.println(RegularMathOperation.DIVIDE.calculate(right,left));

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:00:56.647

1.  从和中删除分号 ( `;`) 。`public static dodaj();{``public static odejmij();{`

2.  将它们移出`main`

3.  添加`Object`为返回类型。

4.  Return`z3`和`z4`from 方法。

5.  在 main 中，您正在调用`dodaj`and `odejmij`，添加`()`括号

6.  我不确定您的`LiczbaZespolona`，因此无法评论`+`正在使用的运算符，但这听起来不合适。

最后它应该看起来像：

```
public static void main(String args[]){

   Scanner input = new Scanner(System.in);
   System.out.println("Podaj pierwszą liczbę: ");
   z1 = input.next();

   System.out.println("Podaj drugą liczbę: ");
   z2 =  input.next();

   System.out.println("wybierz działanie: ");
   d = input.next();

    switch (wynik){
    case 1:
        if (d=='+'){
            return dodaj();
         }
         break;
    case 2:
        if(d=='-'){
            return odejmij();
        }
        break;
    }   
  }

    public static Object dodaj(){
         Object z3=z1+z2;
         return z3;
    }

    public static Object odejmij(){
        Object z4=z1-z2;
        return z4;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:59:33.307

1) 公共静态 dodaj();{

删除冒号。当您添加冒号时，它将被视为`abstract`方法。

```
public static dodaj(){ 
```

2）将您的方法移动到`main`类主体的外部和内部。

# javascript - 单击时用于加载特定文件的选项卡的 Javascript 代码

> ID：12898347
> 
> 赞同：1
> 
> 时间：2012-10-15T14:58:40.877
> 
> 标签：javascript, select, tabs

我们正在开发一个订单表单页面，该页面将在选择选项卡时加载特定的订单表单文件。

见这里，[http://www.psd2htmlpros.com/dev/order-form3/](http://www.psd2htmlpros.com/dev/order-form3/)

该站点已经在此页面上有工作选项卡，[http://www.psd2htmlpros.com/service.html](http://www.psd2htmlpros.com/service.html)

但是问题是，当有人单击订单页面 (http://www.psd2htmlpros.com/dev/order-form3/) 上的一个选项卡时，它会在 URL 的末尾添加一个 # 符号，然后中断其他表格的一部分。例如。

如果我单击黄金包，您会注意到它会在末尾或页面 URL 添加一个 #（磅）符号，然后尝试单击“附加选项”区域下的选项之一，选项卡不会打开。

这是当前正在使用的JS代码。

有谁知道如何解决这个问题，这样它就不会在选择其中一个包后添加#（磅）符号？

//--------- 代码从这里开始 ------------//

```
<div class="order-form-tabs">

<ul class="nav">

<li><h2><a id="silver" href="#" class="current curved-top" rel="tab1">Silver Package</a></h2><h4 style="padding:10px 0;">$97</h4><strong>Package Includes:</strong><br /><i>XHTML 1.0 Transitional/CSS 2.1<br />100% Hand-coded and W3C Valid<br />Table-less markup<br />Optimized Shorthand CSS<br />Cross-browser compatibility</i></li>

<li><h2><a id="gold" href="#" class="curved-top" rel="tab2">Gold Package</a></h2><h4 style="padding:10px 0;">$148</h4><strong>Package Includes:</strong><br /><i>XHTML 1.0 Strict/CSS 2.1<br />100% Hand-coded and W3C Valid<br />Table-less markup<br />Optimized Shorthand CSS<br />Cross-browser compatibility<br />SEO Semantic Coding<br />Complete Presentational Separation<br />Load Speed Optimization</i></li>

<li><h2><a id="platinum" href="#" class="curved-top" rel="tab3">Platinum Package</a></h2><h4 style="padding:10px 0;">$188</h4><strong>Package Includes:</strong><br /><i>HTML5/CSS3<br />100% Hand-coded and W3C Valid<br />Table-less markup<br />Optimized Shorthand CSS<br />Cross-browser compatibility<br />SEO Semantic Coding<br />Complete Presentational Separation<br />Load Speed Optimization</i></li></li>

</ul>

<div class="separator"></div>

<div id="tab1">

<?php include "order-silver.php" ?>

</div>

<div id="tab2">

</div>

<div id="tab3">

</div>

<script type="text/javascript">
$('#silver').click(function(){
    $("#tab1").load("order-silver.php");
    $('#tab2').empty();
    $('#tab3').empty();
});

$('#gold').click(function(){
    $("#tab2").load("order-gold.php");
    $('#tab1').empty();
    $('#tab3').empty();
});

$('#platinum').click(function(){
    $("#tab3").load("order-platinum.php");
    $('#tab1').empty();
    $('#tab2').empty();
});

</script>

</div> 
```

//--------- 代码到此结束 ------------//

# php - fpdf - php_network_getaddresses：getaddrinfo 失败：名称解析暂时失败

> ID：12898348
> 
> 赞同：2
> 
> 时间：2012-10-15T14:58:41.670
> 
> 标签：php, fpdf

stackoverflow 总是很有帮助，所以我希望能帮上忙。我正在网站上测试使用 fpdf 生成的 pdf。当它使用 xampp 在本地运行时，一切都运行良好（生成的 pdf 包括文本和图像）。内容是wordpress最喜欢的帖子的集合。

但是现在我上传了它，出现了问题。只有一个最喜欢的就可以了。附件出现了，我在 adobe reader 中下载并测试它。当收藏夹为 2 或更多时，fpdf 输出错误或生成损坏的 pdf..

我知道问题一定与图像有关，但我不明白为什么..

这是错误（可能发生在循环周围的几个图像上）：

```
"Warning: file_get_contents() [function.file-get-contents]: php_network_getaddresses: getaddrinfo failed: Temporary failure in name resolution in /.../fpdf/fpdf.php on line 1225 
```

警告：getimagesize(...) [function.getimagesize]：打开流失败：php_network_getaddresses：getaddrinfo 失败：在 /.../fpdf.php 第 1213 行的名称解析中暂时失败 FPDF 错误：缺少或不正确的图像文件： ……”

我再说一遍，在本地我没有任何问题。这是输出pdf的代码：

```
$pdf->Output("pdf/".$filename_pdf, 'D'); 
```

我的剧本很长，但如果需要你可以问我任何事情

提前感谢您提供的任何帮助... desde ya les agradezco cualquier aporte que puedan realizarme ya que estoy perdido y falto de tiempo！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-02-12T03:09:58.843

重新启动您的网络服务器可能会对您有所帮助。

# wcf - 通过网络创建自定义工作流程

> ID：12898357
> 
> 赞同：0
> 
> 时间：2012-10-15T14:59:01.020
> 
> 标签：wcf, workflow-activity

我创建了一个 WPF 丰富的应用程序，它允许用户创建自定义工作流活动（创建、编辑、保存、运行），它工作正常。

我还创建了一个**WPFBrowser 应用程序**版本，并将其发布到 IIS Web 服务器。在 IIS 中存在问题，我刚刚找到了一些文件：

*   ApplicationName.exe：可执行程序集应用程序文件。
*   ApplicationName.xbap：部署清单。
*   ApplicationName.exe.manifest：应用程序清单。

有没有办法在 IIS 上保存我的其他项目资源（例如：图标、.cs 类、活动设计器等）？

# javascript - 在 jQuery 中使用函数的参数作为选择器

> ID：12898358
> 
> 赞同：0
> 
> 时间：2012-10-15T14:59:08.777
> 
> 标签：javascript, jquery, function, arguments

在 jQuery 中，是否可以将参数的函数用作选择器。

我一直在尝试这样的事情，但无济于事......

```
function myFunction ( myArgument) {

    $('#'+myArgument).hide();

}

myFunction ( elementOne ); 
```

基本上，当我使用参数触发函数时，`elementOne`我希望能够选择该元素（然后例如隐藏它）。

有没有办法做到这一点？

非常感谢提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:02:57.747

简单类型测试 - 如果您将 jQuery 选择器作为字符串传递，则会隐藏它，否则会将其视为 jQuery 对象。

现在加上“确保它存在”的好处:)

```
if (typeof myArgument === 'string') // eg. myFunction('#something')
  myArgument = $(myArgument);
// else: assume $('#something')
myArgument.length && myArgument.hide(); 
```

# git - 对于 git，如何通过一个命令在子目录中暂存所有更改，包括删除？

> ID：12898367
> 
> 赞同：3
> 
> 时间：2012-10-15T14:59:39.933
> 
> 标签：git

我们知道`git add .`可以一次暂存所有新文件或更改。

但是如果你直接删除文件`rm command`，`git add .`就不会stage这些修改。

是否有一个有效的命令来暂存所有更改，包括在子目录中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:02:52.107

您可以使用该`-u`选项来`git add`执行此操作，例如：

```
git add -u -- name-of-subdirectory 
```

的[文档`-u`说](http://www.kernel.org/pub/software/scm/git/docs/git-add.html#_options)：

> 仅将 <filepattern> 与索引中已跟踪的文件而不是工作树匹配。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且如果工作树中的相应文件已被删除，它将从索引中删除文件。

如果您还想添加新的、未跟踪的文件，您可以`-A`使用`-u`.

# java - 来自 Android 应用程序的 WCF 服务方法调用

> ID：12898368
> 
> 赞同：2
> 
> 时间：2012-10-15T14:59:43.870
> 
> 标签：java, android, wcf, service

我需要调用具有 SOAP 信封的 WCF 服务，如下所示：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"    xmlns:a="http://www.w3.org/2005/08/addressing">
    <s:Header>
        <a:Action s:mustUnderstand="1">SessionStart</a:Action>
        <a:MessageID>urn:uuid:eca7579d-5581-4989-984d-0ead2e670194</a:MessageID>
        <a:ReplyTo>
            <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
        </a:ReplyTo>
        <a:To s:mustUnderstand="1">http://[WCF Service URL].svc</a:To>
    </s:Header>
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <XMLMessage xmlns="http://[Client Website URL]/MobileInterface">
            &lt;SessionManagementRequest&gt;&#xD;
                &lt;IMEI&gt;123456&lt;/IMEI&gt;&#xD;
                &lt;OfficerNumber&gt;AA&lt;/OfficerNumber&gt;&#xD;
                &lt;Password&gt;AA&lt;/Password&gt;&#xD;
                &lt;Status&gt;Setup&lt;/Status&gt;&#xD;
                &lt;UserName&gt;AA&lt;/UserName&gt;&#xD;
                &lt;XSDVersion&gt;1&lt;/XSDVersion&gt;&#xD;
            &lt;/SessionManagementRequest&gt;
        </XMLMessage>
    </s:Body>
</s:Envelope> 
```

我正在努力的部分是获取 XMLMessage SOAPObject 的值。以下是我的代码示例：

```
public static String requestSessionManagement() throws Exception
    {
        int i;
        int timeout;
        PropertyInfo pi;
        HttpTransportSE transport;
        String soap_action;
        String method = "GetData";
        String result = "";

        timeout = ServerInterface.TIMEOUT;
        soap_action = _soap_namespace + method;

        // Check array to know if custom timeout is needed
        for (i = 0;i < func_timeouts.length;i++)
        {
            if (func_timeouts[i][0].compareTo(method) == 0)
            {
                timeout = Integer.parseInt(func_timeouts[i][1]);
            }
        }

        Log.i("[ServerInterface]", "sending request to "+_server_url+": "+_soap_namespace+method);
        Log.i("[ServerInterface]", "timeout: "+timeout);

     // Build request
        SoapObject request = new SoapObject(_soap_namespace, "XMLMessage");

    MapRequestSessionManagement param1 = new MapRequestSessionManagement();
    param1.imei = "123456";
    param1.officer_number = "1029384";
    param1.password = "test1!";
    param1.status = "Setup";
    param1.username = "MichaelJS";
    param1.xsd_version = "1";

    pi = new PropertyInfo();
    pi.setName("SessionManagementRequest");
    pi.setValue(param1);
    pi.setType(MapRequestSessionManagement.MAPREQUESTSESSIONMANAGEMENT_CLASS);
    request.addProperty(pi);        

    // Build envelope
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);// Soap version must match server implementation

    //Prepare header
    envelope.headerOut = new Element[4];
    envelope.headerOut[0] = ServerSyncHelper.buildActionHeader("SessionStart");
    envelope.headerOut[1] = ServerSyncHelper.buildMessageIDHeader();
    envelope.headerOut[2] = ServerSyncHelper.buildReplyToHeader("http://www.w3.org/2005/08/addressing/anonymous");
    envelope.headerOut[3] = ServerSyncHelper.buildToHeader(_server_url);

    envelope.dotNet = true; // Must set this if the server is implemented on the dotnet framework
    envelope.implicitTypes = true;
    envelope.setOutputSoapObject(request);

    // Set http transport
    transport = new HttpTransportSE(_server_url, timeout);
    transport.debug = true;  //this is optional, use it if you don't want to use a packet sniffer to check what the sent message was (httpTransport.requestDump, httpTransport.responseDump)

    try
    {

        transport.call(soap_action, envelope);
        Log.i("[ServerInterface]", "request dump "+transport.requestDump);          
        Log.i("[ServerInterface]", "response dump "+transport.responseDump);            
        Log.i("[ServerInterface]", "response "+envelope.bodyIn);

    String response = (String)envelope.getResponse();
    result = ""+response;
    }
    catch (Exception e)
    {
        Log.i("[ServerInterface]", "Exception part");           
        Log.i("[ServerInterface]", "request dump "+transport.requestDump);          
        Log.i("[ServerInterface]", "response dump "+transport.responseDump);
        Log.e("[ServerInterface]", "Error with soap transmition "+e);
        e.printStackTrace();
    }

    return result;
    } 
```

当我运行上面的代码时，我得到以下结果，这是正确的。但是，我不确定如何根据服务器的要求进行格式化：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://www.w3.org/2001/12/soap-encoding" xmlns:v="http://www.w3.org/2001/12/soap-envelope">
    <v:Header>
        <Action v:mustUnderstand="1" xmlns="http://www.w3.org/2005/08/addressing">SessionStart</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:49bd428d-188a-4035-8d8f-45bcb42b37ec</MessageID>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing">
            <Address xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
        <To v:mustUnderstand="1" xmlns="http://www.w3.org/2005/08/addressing">http://41.134.120.203/MobileInterfaceService/SessionManagementService.svc</To>
    </v:Header>
    <v:Body>
        <XMLMessage xmlns="http://www.syntell.com/MobileInterface/" id="o0" c:root="1">
            <SessionManagementRequest>
                <IMEI>123456</IMEI>
                <OfficerNumber>1029384</OfficerNumber>
                <Password>test1!</Password>
                <Status>Setup</Status>
                <UserName>MichaelJS</UserName>
                <XSDVersion>1</XSDVersion>
            </SessionManagementRequest>
        </XMLMessage>
    </v:Body>
</v:Envelope> 
```

似乎他们已经对 Server 方法进行了编码，以接受包含 SessionManagementRequest 对象的 XML 结构的字符串参数。

# oracle - 将父子数据放入基于 Oracle 级别的 OLAP 层次结构

> ID：12898369
> 
> 赞同：5
> 
> 时间：2012-10-15T14:59:46.930
> 
> 标签：oracle, parent-child, hierarchy, olap

我们有一些组织数据需要在 Oracle OLAP 10g 维度中表示，最好使用 Warehouse Builder 填充。

组织层次结构被列为父子对，并且是参差不齐的（不平衡的）和跳级的（非覆盖的）。这将适用于基于值的层次结构，但我们的客户宁愿我们使用 ROLAP 而不是 MOLAP，即避免使用分析工作区，这排除了使用基于值的层次结构。

有没有一种直接的方法来使用父子对数据填充基于级别的层次结构，如果是这样，如何完成？

欢迎指点教程，特别是如果他们使用 Warehouse Builder。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T22:19:56.600

如果是 CONNECT BY PRIOR 查询，您可以在 SELECT 子句中使用 PRIOR column_name 来检索父列的数据。

# solr - Solr - 无法设置 java.sql.Timestamp 字段 ...created 为 java.util.Date

> ID：12898371
> 
> 赞同：0
> 
> 时间：2012-10-15T14:59:50.573
> 
> 标签：solr, solrj

我无法从 QueryResponse 读取时间戳数据（想要将结果转换为 POJO）。如果我使用 SolrDocumentList 没有错误。

db-data-config.xml：

```
<entity name="discussion" dataSource="mssqlDatasource" pk="id"
        transformer="TemplateTransformer, DateFormatTransformer"
        query="SELECT d.id, d.title, d.created,
               u.first_name, u.last_name,
               db.type AS boardType, db.country
               FROM discussion d
               INNER JOIN wtb_user u ON d.author = u.id
               INNER JOIN discussion_category dc ON d.category = dc.id
               INNER JOIN discussion_board db ON dc.board = db.id">                   
        <!--<field column="created" dateTimeFormat='yyyyMMdd HH:mm:ss z' />-->
        <!--<field column="created" dateTimeFormat='yyyyMMdd' />-->
        <field column="first_name" name="firstName" />
        <field column="last_name" name="lastName" />
        <field column="tableType" template="DISCUSSION" />

        <entity name="discussion_post" dataSource="mssqlDatasource"
            transformer="ClobTransformer"
            query="SELECT dp.message
                   FROM discussion_post dp
                   WHERE dp.discussion = '${discussion.id}'">
            <field column="message" name="discussionPostMessage" clob="true" />
        </entity>
    </entity> 
```

架构.xml：

```
<field name="created" type="date" indexed="false" stored="true"/> 
```

“创建”字段是我数据库中的时间戳，插入索引数据后，结果如下所示（使用浏览器管理控制台调用）：

```
 <result name="response" numFound="246" start="0">
  <doc>
   <str name="boardType">1</str>
   <date name="created">2012-10-05T07:29:23.387Z</date>
   <arr name="discussionPostMessage">
    <str>message test</str>
    <str>second</str>
    <str>third</str>
   </arr>
   <str name="firstName">Ashley</str>
   <str name="id">10</str>
   <str name="lastName">Morgan</str>
   <str name="tableType">DISCUSSION</str>
   <str name="title">headline test</str>
  </doc>
  ... 
```

现在我试图查询“所有结果”

```
public void search(String searchString) {
    SolrQuery query = new SolrQuery();
    QueryResponse rsp;
    try {
        query = new SolrQuery();
        query.setQuery(DEFAULT_QUERY);
        query.setRows(246);

        rsp = getServer().query(query);

        SolrDocumentList solrDocumentList = rsp.getResults(); // IllegalArgumentException
        List<SearchRequestResponseObject> beans = rsp.getBeans(SearchRequestResponseObject.class); //works
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

SearchRequestResponseObject.class：

```
public class SearchRequestResponseObject {
@Field
private String id;

@Field
private String title;

@Field
@Temporal(TemporalType.TIMESTAMP)
    //@DateTimeFormat(style = "yyyyMMdd HH:mm:ss z")
//@DateTimeFormat(style = "yyyyMMdd")
private Timestamp created;
    ...
} 
```

例外：

```
Caused by: java.lang.IllegalArgumentException: Can not set java.sql.Timestamp field com.solr.SearchRequestResponseObject.created to java.util.Date
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
at java.lang.reflect.Field.set(Field.java:657)
at org.apache.solr.client.solrj.beans.DocumentObjectBinder$DocField.set(DocumentObjectBinder.java:374)
... 45 more 
```

详细留言：

```
Exception while setting value : Fri Oct 05 09:29:23 CEST 2012 on private java.sql.Timestamp com.solr.SearchRequestResponseObject.created 
```

我做错了什么？为什么要“创建”一个日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:59:53.613

Your 'created' field should be a date because even though you are passing in a TimeStamp from your database, it is being stored internally as a Date in Solr and is therefore being exposed as a Date from Solr. SolrJ does not understand how to handle a TimeStamp. If you really want to have TimeStamp property on your POJO, you will need to get the field from Solr as a Date and then have a separate TimeStamp property on your POJO that converts the Date value.

# android - Android 测验应用程序设计。ViewFlipper？

> ID：12898373
> 
> 赞同：-1
> 
> 时间：2012-10-15T15:00:00.967
> 
> 标签：android, android-layout

翻阅多项选择测验中众多问题的最有效方法是什么？我会使用`ViewFlipper`，但我对每个新问题都使用相同的布局，所以我认为在其中放置许多相同的布局`ViewFlipper`会效率低下。我的其他选择是什么？重新加载/刷新活动？请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:09:06.593

您想要的是s （或s）的*回收*，并且提供了各种类型的以及提供此类回收的各种适配器类。当你使用一个例子时，你很可能已经遇到过这个概念，它可以非常有效地显示非常大的列表，只需为屏幕上可见的元素保留 s 即可；并且随着用户滚动，这些s 被回收。对于您现在的特殊需求（通过许多相似页面进行水平页面切换），您可以使用 a （它是 V4 支持库的一部分）。您将选择提供回收机制的适当适配器。`View``Fragment``View``ListView``View``View``ViewPager`

# vba - 在 Excel 中将多行合并为一行

> ID：12898375
> 
> 赞同：0
> 
> 时间：2012-10-15T15:00:05.357
> 
> 标签：vba, excel, concatenation, cisco

我想使用 Excel 将几行合并为一行。我已经使用 CONCATENATE 函数完成了这项工作，但这次我需要自动化该过程，因为我在文件中有多个条目。我有从 Cisco CME 中提取的 Ephone IP 电话信息，其中每个 ephone 信息都在一行中，如下所示：

```
ephone-1[0] Mac: TCP socket:[57] activeLine:0 whisperLine:0 REGISTERED in SCCP ver 20/17 max_streams=1
mediaActive:0 whisper_mediaActive:0 startMedia:0 offhook:0 ringing:0 reset:0 reset_sent:0 paging 0 debug:0 caps:8 
IP:---------- * 35419 6941  keepalive 54113 max_line 4 available_line 4
button 1: cw:1 ccw:(0 0) 
dn 1  number ------- CH1   IDLE         CH2   IDLE         shared 
Preferred Codec: g711ulaw 
Lpcor Type: none Username: ---- Password: ------ 

ephone-2[1] Mac:-------- TCP socket:[77] activeLine:0 whisperLine:0 REGISTERED in SCCP ver 20/17 max_streams=1
mediaActive:0 whisper_mediaActive:0 startMedia:0 offhook:0 ringing:0 reset:0 reset_sent:0 paging 0 debug:0 caps:8 
IP:------- * 35189 6941  keepalive 117528 max_line 4 available_line 4
button 1: cw:1 ccw:(0 0) 
 dn 2  number ------ CH1   IDLE         CH2   IDLE         shared 
Preferred Codec: g711ulaw 
Lpcor Type: none 
```

每个 ephone 由文件上的一两个空行分隔。大约有 350 个条目，我想自动化这个过程。该过程应该类似于获取 ephone 的每一行并将其合并为一行，这样最后我将有 350 行包含 350 个 ephone 的信息。

有谁知道如何在Excel上制作这个？我非常感谢您的帮助。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:49:16.330

这段代码应该这样做，合并并删除多余的行

```
Sub ConsolidateRows_NoMatch()
'takes rows and consolidate one or many cells, based on one or many cells matching with above or below rows.

Dim lastRow As Long, i As Long, j As Long
Dim colMatch As Variant, colConcat As Variant

'turn off updates to speed up code execution
With application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

lastRow = range("A" & Rows.Count).End(xlUp).Row 'get last row

For i = lastRow To 1 Step -1 'loop from last Row to one

    If Len(Cells(i, 1)) > 0 Then
        If Left(Cells(i, 1), 6) <> "ephone" Then
            Cells(i - 1, 1) = Cells(i - 1, 1) & Cells(i, 1)
        Else
            GoTo nxti:
        End If
    End If

    Rows(i).Delete
nxti:
Next

With application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
End With

End Sub 
```

# objective-c - 从另一个类objective-C获取数组

> ID：12898376
> 
> 赞同：0
> 
> 时间：2012-10-15T15:00:04.977
> 
> 标签：objective-c, ios, nsarray

我有 xml 文件，我在 xml 文件中读取了所有信息并存储在数组中，

这是我用于存储在数组中的 starDidElement 文件：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

if ([elementName isEqualToString:@"Presentation"]) {
    NSLog(@"user element found – create a new instance of User class...");
    app.presentationArray = [[NSMutableArray alloc] init];
    thePresentation = [[Presentation alloc] init];
    thePresentation.pLabel = [attributeDict objectForKey:@"label"];
    NSLog(@"PLabel: %@", thePresentation.pLabel);

}else if ([elementName isEqualToString:@"slides"]) {
    NSLog(@"Slides");

    thePresentation.slides = [NSMutableArray array]; 
```

在我的标题中，我有

```
 Presentation thePresentation; 
```

你能帮我解决这个问题吗

提前致谢

**编辑：**

```
Presentation *aPresentation = [app.presentationArray objectAtIndex:0];
NSLog(@"Presentation is: %@ and it's Slide Count is: %d",aPresentation.pLabel, aPresentation.slides.count);

Slide *aSlide = [aPresentation.slides objectAtIndex:0];
NSLog(@"Slide Label is: %@", aSlide.sLabel);

UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setTitle:[NSString stringWithString:aSlide.sLabel] forState:UIControlStateNormal];
btn.frame = rect;
[btn setTag:i];
[btn addTarget:self action:@selector(buttonClick:)  forControlEvents:UIControlEventTouchUpInside];
[imageView addSubview:btn]; 
```

**那么日志是**

[788:c07] 演示文稿是：(null)，它的幻灯片计数是：0 [788:c07] 幻灯片标签是：(null)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:59:06.747

当你这样做时会发生什么：

```
Presentation *aPresentation = [app.presentationArray objectAtIndex:0];
NSLog(@"Presentation is: %@ and it's Slide Count is: %d",aPresentation.pLabel, aPresentation.slides.count);

Slide *aSlide = [aPresentation.slides objectAtIndex:0];
    NSLog(@"Slide Label is: %@", aSlide.sLabel);

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn setTitle:[NSString stringWithString:aSlide.sLabel] forState:UIControlStateNormal];
    btn.frame = rect;
    [btn setTag:i];
    [btn addTarget:self action:@selector(buttonClick:)  forControlEvents:UIControlEventTouchUpInside];
    [imageView addSubview:btn]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:13:41.683

在您的 viewController 中添加一个公共方法，一旦您的 xml 解析完成调用该公共方法，这意味着您告诉您的 viewController 数据已准备好并更新 UI。

您可以使用 appDelegate 通知 viewController 数据已准备好，因为 appDelegate 将拥有您的 viewController 的实例。

**编辑：**您可以拥有以下内容：

```
//in viewController.h
- (void) viewFillUp;

//in viewController.m
-(void)viewFillUp
{
      Slide *aSlide = [thePresentation.slides objectAtIndex:0];
      NSLog(@"Slide Label is: %@", aSlide.sLabel);

      UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
      [btn setTitle:[NSString stringWithString:aSlide.sLabel] forState:UIControlStateNormal];
      btn.frame = rect;
      [btn setTag:i];
      [btn addTarget:self action:@selector(buttonClick:)  forControlEvents:UIControlEventTouchUpInside];
      [imageView addSubview:btn];
}

//in appDelegate.h
 - (void) parsingDone;

//in appDelegate.m
- (void) parsingDone
{
    //suppose ur viewController instance is self.viewController
    [self.viewController viewFillUp]
} 
```

# jquery - 使用 jquery 模板和 MVC 和 .aspx [不是 .cshtml] 搜索或过滤

> ID：12898377
> 
> 赞同：1
> 
> 时间：2012-10-15T15:00:13.017
> 
> 标签：jquery, asp.net-mvc-3

我想要一个通用的高级搜索过滤器，类似于第 4 章的 jQueryinAction,SecondEdition 书中提到的过滤器。我正在使用带有 .aspx 页面的 Jquery 模板作为 MVC3 中的视图。

父下拉列表将包含选择的值列表，将填充子下拉列表 [这是一个模板]。此子下拉列表具有包含、等于、大于、小于等值。在更改此值时控件将添加一个下拉列表或一个文本框。单击添加按钮时，将再次添加一个这样的行。单击删除按钮时，将删除相应的行。控件的值更改，直到最终搜索按钮单击应被跟踪.该值可以在中间更改，并且编辑的行应该用正确的值更新。请帮助！

谢谢

# c - 用指针更改 C 字符串值

> ID：12898379
> 
> 赞同：0
> 
> 时间：2012-10-15T15:00:17.683
> 
> 标签：c, string, pointers

我试图使用另一个指针更改字符串的一部分。我有的

```
 char** string = (char**) malloc (sizeof(char*));
*string = (char*) malloc (100);
*string = "trololol";

char* stringP = *string;
stringP += 3;
stringP = "ABC";
printf("original string : %s\n\n", *string);
printf("stringP : %s\n\n", stringP); 
```

我得到了什么

```
original string : trololol;
stringP : ABC; 
```

我想要的是 troABCol 在他们两个中：D

我知道我有一个指向字符串 (char**) 的指针，因为这就是我在方法中执行此操作所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:03:46.927

你需要做`strcpy(*string, "trololol")`而不是`*string = "trololol"`;。您的解决方案会带来内存泄漏，因为它将分配的内存指针替换为`malloc()`指向数据的指针，其中包含预分配的“trololol”字符串。

`strcpy()`复制指向的纯字符串，而不是`stringP = "ABC";`，您可以这样做`memcpy(stringP, "ABC", 3)`（在末尾`strcpy`追加，而仅复制被告知要复制的数据）。`\0``memcpy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:05:38.603

阅读阿米特的答案。另外，当你写

```
stringP = "ABC"; 
```

您只是将指针更改为指向不同的字符串；你没有改变它指向的字符串。你应该抬头`memcpy`看`strcpy`。

# asp.net-mvc-3 - 如何将我的登录页面指向数据库而不是 web.config 凭据？

> ID：12898381
> 
> 赞同：0
> 
> 时间：2012-10-15T15:00:17.717
> 
> 标签：asp.net-mvc-3, authentication, authorization

我创建了一个登录页面，并使用 ASP.NET 配置工具创建了两个带密码的用户。

当我尝试使用创建的用户登录时，我收到了我设置的无效用户名/密码错误。问题是我知道我正在按照我设置它们的方式输入。但是我可以；去

```
 <credentials>
        <User>
 </credentials>

 <roleManager enabled="true" defaultProvider="SqlRoleProvider">
  <providers>
    <clear/>
    <add name="SqlRoleProvider" applicationName="UCX" connectionStringName="UCXDBConnectionString"
         type="System.Web.Security.SqlRoleProvider" />
  </providers>
</roleManager>

  <authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="3">
    <credentials passwordFormat="Clear">
      <!--<user name="admin" password="password"/> If I uncomment this I can access site. -->
    </credentials>
  </forms>
</authentication> 

    <authorization>
  <allow roles="Admin" />
</authorization>
<membership
           defaultProvider="SqlProvider" userIsOnlineTimeWindow="20">
  <providers>
    <clear/>
    <add name="SqlProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="UCXDBConnectionString" enablePasswordRetrieval="false" />

  </providers>
</membership> 
```

在我的网络配置中，如果我使用该用户登录，我就可以访问该站点。然而，这对我们想要的非常不利。我已经检查了数据库并且用户在那里。我只是无法访问它们。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:03:23.330

您需要将站点配置为使用 ASP.NET SQL Server Membership Provider。请参阅此处了解更多信息：[http ://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs)

# ruby-on-rails - 从 rails 3.0.8 升级到 3.0.17 会为活动记录-声誉系统 2.0.1 生成“未定义的方法 `reputation_value_for'”

> ID：12898388
> 
> 赞同：1
> 
> 时间：2012-10-15T15:00:29.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 rails 3.0.8 中一切运行良好。我最终要升级到 Rails 3.2，但要做好准备，Railscast 中的 Ryan Bates 建议首先升级到最新的 rails 3.0 版本，即 3.0.17。升级到 3.0.17 后，我得到：

```
undefined method `reputation_value_for' 
```

我在安装了 Ruby 版本 1.9.2 的 rvm 中运行 rails。为了确保这不是 gems 的问题，我卸载了 1.9.2 并重新安装了它。我安装了 bundler gem，然后运行了 bundle install。它仍然得到同样的错误。

然后我重命名了数据库迁移并运行 rails g 信誉系统。新旧迁移文件完全相同。

完整回溯、Gemfile 和 Gemfile.lock 的要点[在这里](https://gist.github.com/3893009)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:20:53.183

简单看了下gem的代码，难道你想要的方法现在命名为reputation_for？

它已被弃用并被reputation_for取代，请参阅commit

[https://github.com/twitter/activerecord-reputation-system/commit/552c04b0dead76cd79fb3915845b17b6a8de0cca](https://github.com/twitter/activerecord-reputation-system/commit/552c04b0dead76cd79fb3915845b17b6a8de0cca)

# android - 使用软键盘向上移动一种布局，但在底部保留一种

> ID：12898393
> 
> 赞同：5
> 
> 时间：2012-10-15T15:00:40.843
> 
> 标签：android, android-layout, view, android-widget, android-softkeyboard

我有以下 TabHost 布局：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="0dp"
    android:padding="0dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="0dp"
        android:background="@drawable/main_app_background"
        android:orientation="vertical"
        android:padding="0dp" >

        <ImageView
            android:id="@+id/logo"
            android:layout_width="fill_parent"
            android:layout_height="@dimen/site_logo_height"
            android:layout_margin="0dp"
            android:background="@color/tab_subtitle_background"
            android:padding="0dp"
            android:src="@drawable/barlogo" />

        <FrameLayout
            android:id="@+id/tab_subtitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="0dp"
            android:gravity="center"
            android:padding="0dp" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_margin="0dp"
            android:layout_weight="99"
            android:padding="0dp" />

        <Button
            android:id="@+id/btn_save"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="15dp"
            android:layout_marginTop="7dp"
            android:focusableInTouchMode="true"
            android:imeOptions="actionNext"
            android:tag="done"
            android:text="Ok" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:padding="0dp" />
    </LinearLayout>

</TabHost> 
```

问题是，当软键盘出现时，Button 和 TabWidget 都会向上移动。

我的目标是将 TabWidget 保持在底部（在软键盘下方）并让 Ok 按钮向上移动（在键盘顶部）。可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:05:25.477

试试这个可能是使用完整的调整清单

```
<activity
  android:windowSoftInputMode="adjustResize"              
  android:name=".youractivity" android:label="@string/app_name" > 
```

仅当在 android 上打开虚拟键盘时才能查看[上移文本视图](https://stackoverflow.com/questions/11119967/move-up-text-view-only-when-virtual-keyboard-open-on-android/11120597#11120597)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:20:14.697

在你的清单文件中试试这个：

```
<activity
    android:windowSoftInputMode="adjustPan"              
    android:name=".MainActivity" android:label="@string/app_name" > 
```

# php - PHP 接口：指定任何可见性

> ID：12898397
> 
> 赞同：34
> 
> 时间：2012-10-15T15:00:43.557
> 
> 标签：php, oop, interface, abstract

我正在使用一组类的接口。但是我有一个问题，因为我希望[`visibility`](http://php.net/manual/en/language.oop5.visibility.php)在界面中允许任何内容（即：`public`和`protected`）`private`。

我只需要保护父方法，我需要私有子方法，但我收到错误消息

> 致命错误：接口方法 Baz::qux() 的访问类型必须在 <the file with Baz/Bar> 中省略。"

我尝试在界面中指定其他可见性方法`Baz`并删除`public`，但它们都失败了。

有没有办法通过界面来做到这一点？如果没有，那么有没有办法可以声明它`abstract`，我也尝试过，但失败了。

```
interface Baz
{
    public function qux();
}

class Bar implements Baz
{
    protected function qux()
    {
        //do foo
    }
}

class Foo extends Bar implements Baz
{
    private function qux()
    {
        parent::qux();
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-15T15:05:54.943

Methods you declare in [Interfaces](http://en.wikipedia.org/wiki/Interface_%28computing%29#Software_interfaces_in_object-oriented_languages) should be public. You define a contract with an interface. Any non-public methods would be implementation details and those do not belong into an Interface. As the name implies implementation details should go into the concrete classes *implementing* the interface.

From Wikipedia:

> Programming to the interface
> 
> The use of interfaces allows a programming style called programming to the interface. The idea behind this is to base programming logic on the interfaces of the objects used rather than on internal implementation details. Programming to the interface reduces dependency on implementation specifics and makes code more reusable.[7] It gives the programmer the ability to later change the behavior of the system by simply swapping the object used with another implementing the same interface.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-15T15:06:23.430

A interface is a contract between 2 parties, a agreement how they communicate.

It makes no sense to make methods protected or private, because the other party will not see those.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T13:15:27.000

The devs disabled the visibility for more fluid reusage. Through the keyword `implements` you already bind an interface to a class. You cannot access an interface without having it implemented anyways.

# jquery - jquery Append() 中的 if 语句

> ID：12898400
> 
> 赞同：17
> 
> 时间：2012-10-15T15:00:49.750
> 
> 标签：jquery, html, json, append

在我的 jquery Append() 中，我不想运行 IF 语句来在除第一个对象之外的所有对象上包含图像。

像：

```
var i = 0;

$('#divDetailsForSelectedInfo').append(
    '<div class="roundedAndBoxShade leftResultObject" id = "' + value.Query.Id + '">'+
    '<div class="leftResultObject_inner">' +
if (i > 0){
   <img src="/img.jpg"/>;
}
'<div>asdf</div>'); 
```

代码由 Json+Jquery 生成，然后全部附加到我的索引文件中的一个 div 上。据我所知，这是不可能的，但我可能错了？

如果它确实是“不可能的”，Jquery 中的 :first 选择器可以以某种很酷的方式使用吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-15T15:18:52.523

一个更简单的解决方案：

```
var i = 0;
$('#somediv').append(
    'html before' + 
    (i > 0 ? '<img src="/img.jpg"/>': '') +
    'more html'
); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T15:02:48.210

```
var i = 0;
var str=''
if (i > 0){
  str =  '<img src="/img.jpg"/>;'
}
$('#divDetailsForSelectedInfo').append(
    '<div class="roundedAndBoxShade leftResultObject" id = "' + value.Query.Id + '">'+
    '<div class="leftResultObject_inner">' +str+'<div>asdf</div>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:06:52.087

我能想到的最简单的方法是：

```
$('#divDetailsForSelectedInfo').append(
    function(i) {
        return '<div class="roundedAndBoxShade leftResultObject" id = "' + value.Query.Id + '">' + '<div class="leftResultObject_inner">' + (i > 0 ? '<img src="/img.jpg"/>' : '');
    }); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/6qAbZ/1/)。

# javascript - 动态 JavaScript 变量

> ID：12898403
> 
> 赞同：1
> 
> 时间：2012-10-15T15:00:58.970
> 
> 标签：javascript, variables, dynamic-variables

我想动态生成一个整数（在以下情况下为 100 或 500）并使用它来访问单独的数组。在后面的步骤中（不是下面代码的一部分），我还想以相同的方式访问这些数组的不同部分（“消息 1、2 或 3”）。

对于这个概念证明，我没有动态生成整数，而是将其设置为 100。

然后我尝试使用`eval()`动态生成由“警告”和100组成的数组名称，但它无法正常工作。

这是我的代码：

```
// two arrays are defined, warning100 and warning500
var warning100 = [
    { "message1":"Ok, go ahead and start typing!" },
    { "message2":"Keep going!" },
    { "message3":"You can do it!" }
];

var warning500 = [
    { "message1":"Slow down..." },
    { "message2":"That's it!" },
    { "message3":"Maximum reached." }
];

// set i to 100 and h to 1 for testing purposes, will be random integers in the final version
var i = 100;
var h = 2;
// create variable names as a combination of a string and i or h
// those variables will be used to access one of the arrays from above and one of the messages;
eval("var warningNumber = warning" + i + ";");
eval("var messageNumber = message" + h + ";");

/* alternative code for creating the two variable values
var warningNumber = "warning" + i;
var messageNumber = "message" + h;
*/

// the variable warningNumber from above is now used again to access the array warning100
// the varaible messageNumber is used to access one of the messages
// within that array message1 should be displayed
// create variable to be used in the document.write below
var warning = warningNumber[0].messageNumber;

// should alert "Ok, go ahead and start typing!"    
alert(warning); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:10:35.170

为什么不把每组警告都作为 warningNumber 对象的一部分呢？这样你就可以做到

```
var warnings = {100: { 1:"Ok, go ahead and start typing!",
                       2:"Keep going!",
                       3:"You can do it!"
                     },
                500: { 1:"Slow down...",
                       2:"That's it!",
                       3:"Maximum reached."
                     }
               };
alert(warnings[i][h]); 
```

这样，甚至不必完成所有评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:27:43.443

为什么不把它包装在一个对象中呢？

```
var dynamicHolder = {};
var i = 100;
var h = 2;
dynamicHolder["warningNumber"] = "warning" + i;
dynamicHolder["messageNumber"] = "message" + h; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T15:08:09.203

试试这个：

```
var warnings = {

    warning100: {
        "message1":"Ok, go ahead and start typing!",
        "message2":"Keep going!",
        "message3":"You can do it!"
    },
    warning500: {
        "message1":"Slow down...",
        "message2":"That's it!",
        "message3":"Maximum reached."
    }
}

var i = 100;
console.log( warnings["warning" + i] );
i += 400;
console.log( warnings["warning" + i] );

console.log( warnings["warning" + i ]["message1"] ); 
```

[例子](http://jsfiddle.net/qRHBP/)

# git - 未提交更改的 Git（无分支）

> ID：12898404
> 
> 赞同：1
> 
> 时间：2012-10-15T15:01:01.297
> 
> 标签：git

我目前正在进行`(no branch)` 未提交的更改。我想检查一个不同的分支并丢弃我所有的更改。

当我做

```
git checkout <branch_name> 
```

我得到：

```
**error: Your local changes to the following files would be overwritten by checkout:
        avar/libs/video_preprocessing_controller/video_preprocessing_controller.cpp
        bbn/tracker/libs/init_and_cont_tracks/init_and_cont_tracks.cpp
Please, commit your changes or stash them before you can switch branches.
Aborting** 
```

我不`commit`想也不想`stash`改变。我没有第三种选择吗？（忽略它们/扔掉它们）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:04:53.947

采用`git checkout -f [branch name]`

或者，要先丢弃本地更改，您可以使用

```
git checkout .
git checkout [branch name] 
```

# matlab - 从 Matlab 中的 URL 读取带交错图像

> ID：12898406
> 
> 赞同：0
> 
> 时间：2012-10-15T15:01:00.837
> 
> 标签：matlab, web-applications

我正在尝试使用映射工具箱（更具体地说，不使用 WebMapServer 对象）从 Web 地图服务器中读取数据。我可以自己构建 URL 而不会出现问题，并且可以将 imread 用于返回 bmp 文件的 WMS。但是，其中一个 WMS 返回 BIL 文件（Band InterLeaved）并且 imread() 无法识别它。

如何使用映射工具箱从 URL 读取 BIL 文件？

编辑：这是我想阅读的示例 URL：

[http://www.nasa.network.com/elev?SERVICE=WMS&LAYERS=mergedAsterElevations&EXCEPTIONS=application/vnd.ogc.se_xml&FORMAT=image%2Fbil&TRANSPARENT=FALSE&HEIGHT=1113&BGCOLOR=0xFFFFFF&REQUEST=GetMap&WIDTH=925&BBOX=-118.545692,003.96069240-103.9605240-118.545692,303.9605240-45 34.060523999999994&STYLES=&SRS=EPSG:4326&VERSION=1.3.0](http://www.nasa.network.com/elev?SERVICE=WMS&LAYERS=mergedAsterElevations&EXCEPTIONS=application/vnd.ogc.se_xml&FORMAT=image%2Fbil&TRANSPARENT=FALSE&HEIGHT=1113&BGCOLOR=0xFFFFFF&REQUEST=GetMap&WIDTH=925&BBOX=-118.545692,33.960524,-118.44569200000001,34.060523999999994&STYLES=&SRS=EPSG:4326&VERSION=1.3.0)

此外，如果我尝试使用 urlread 获取字节数据，然后将其写入文件，则某些值会以某种方式丢失。

```
bytedata = urlread( mapurl );
fp = fopen( 'tmp.bil', 'w' );
fwrite( fp, bytedata, 'uint8' );
fclose( fp );
fp = fopen( 'tmp.bil', 'r' );
z = fread( fp, 'int16' );
imagesc( reshape( z, 925, 1113 )' ); 
```

上面显示的图像类似于映射工具箱返回的图像，但有些区域设置为不应设置的常量值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:19:52.593

上述问题的解决方案是使用 urlwrite() 而不是 urlread()，因为后者不能正确处理二进制数据。

```
fname = tempname();
urlwrite(mapurl,fname);
fp = fopen(fname,'r');
map = reshape(fread(fp,'int16=>int16'),Ncols,Nrows)';
fclose(fp);
delete(fname); 
```

# java - 解析文本文件，如果内容是特定格式打印它

> ID：12898408
> 
> 赞同：0
> 
> 时间：2012-10-15T15:01:22.990
> 
> 标签：java

我一直在试图弄清楚如何解析文本文件。如果文本文件不是特定格式，则不打印内容。

第一行应以 S 开头，每一行都是以下形式之一

S:x

V:x

五：xxx

其中 x 可以是任何大写字母、0、1 或 e。

这是我的代码：

```
import java.awt.BorderLayout;
import java.awt.event.*;
import javax.swing.*;
import java.io.File;

class myjFileChooser {

 public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            final JFrame f = new JFrame("Document Viewer");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            final JFileChooser fileChooser = new JFileChooser();

            JPanel gui = new JPanel(new BorderLayout());

            final JEditorPane document = new JEditorPane();
            gui.add(new JScrollPane(document), BorderLayout.CENTER);

            JButton open = new JButton("Open");
            open.addActionListener( new ActionListener() {
                public void actionPerformed(ActionEvent ae) {
                    int result = fileChooser.showOpenDialog(f);
                    if (result==JFileChooser.APPROVE_OPTION) {
                        File file = fileChooser.getSelectedFile();
                        try {
                            document.setPage(file.toURI().toURL());
                        } catch(Exception e) {
                            e.printStackTrace();
                        }
                    }
                }
            });
            gui.add(open, BorderLayout.NORTH);

            f.setContentPane(gui);
            f.pack();
            f.setSize(400,300);
            f.setLocationByPlatform(true);

            f.setVisible(true);
        }
    });
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:37:46.493

我建议将您的要求分成几个部分。

首先编写一个程序`boolean checkFormat(String line)`，它获取一行文本作为输入，`true`如果它满足所需的格式则返回。

其次逐行读取文件。`checkFormat()`通过调用您的程序检查每一行，其格式是否正常。如果没有，那么你就完成了，你不必打印任何东西。

第三，如果所有行检查都正常，则第二次逐行读取文件并打印每一行。

这是一个逐行读取文本文件的示例：[http ://rosettacode.org/wiki/Read_a_file_line_by_line#Java](http://rosettacode.org/wiki/Read_a_file_line_by_line#Java)

# ruby-on-rails-3 - 使用 Factory_Girl 设置嵌入式 Mongoid 模型

> ID：12898409
> 
> 赞同：5
> 
> 时间：2012-10-15T15:01:25.097
> 
> 标签：ruby-on-rails-3, rspec, mongoid, factory-bot

所以我在玩 Mongoid、Rspec 和 Factory_Girl，我在嵌入文档时遇到了一些问题。

我有以下模型：

```
class Profile    
   include Mongoid::Document

   #Fields and stuff
      embeds_one :address

   validates :address, presence: true 
end

class Address    
   include Mongoid::Document

   #Fields and stuff
      embedded_in :profile 
end 
```

所以当我这样定义一个工厂时：

```
FactoryGirl.define do
  factory :profile do
    #fields

    address
  end
end 
```

我收到这样的错误：

```
Failure/Error: subject { build :profile }
     Mongoid::Errors::NoParent:

       Problem:
         Cannot persist embedded document Address without a parent document.
       Summary:
         If the document is embedded, in order to be persisted it must always have a reference to it's parent document. This is most likely cause by either calling Address.create or Address.create! without setting the parent document as an attribute.
       Resolution:
         Ensure that you've set the parent relation if instantiating the embedded document direcly, or always create new embedded documents via the parent relation. 
```

我通过将工厂更改为以下内容来使其工作：

```
FactoryGirl.define do
  factory :profile do
    #fields

    after(:build) do |p| 
      p.create_address(FactoryGirl.attributes_for(:address))
    end
  end
end 
```

这行得通，但我希望有一种更原生的 Factory_Girl 方式来做到这一点。好像应该有。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T17:18:51.553

您也可以这样做，如[Factory Girl + Mongoid 嵌入式文档中](https://stackoverflow.com/questions/7536064/factory-girl-mongoid-embedded-documents-in-fixtures)所引用的：

```
FactoryGirl.define do
  factory :profile do |f|
    #fields
    address { FactoryGirl.build(:address) }
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T18:53:15.780

尝试使用`build_address`而不是`create_address`. 在我看来，您的工厂已损坏，因为您试图在保留（创建）个人资料记录之前创建地址记录。`build_*`应该将所有必要的属性分配给父模型，然后它应该与它的嵌入关系一起被持久化。

# javascript - 在黑莓上从 ajax 接收 cookie

> ID：12898411
> 
> 赞同：1
> 
> 时间：2012-10-15T15:01:29.860
> 
> 标签：javascript, ajax, blackberry, cookies

在大多数（所有）浏览器中，当我发出 ajax 请求时，服务器会发送一些带有响应的 cookie，然后它们将与未来的请求一起发送。

这似乎不会在黑莓 4.6 上发生。

该`getResponseHeader('Set-Cookie')`函数显示 cookie，尽管即使服务器发送多个 set-cookie 函数也只有一个。

有没有人发现让黑莓浏览器接受cookie？

# sql-server - SQL 查询——需要确保我的逻辑是正确的

> ID：12898412
> 
> 赞同：1
> 
> 时间：2012-10-15T15:01:32.433
> 
> 标签：sql-server, tsql

我有下面的代码，我希望能得到一些帮助以确保这是正确的。（缓慢的一天）

```
Select 
    A.Label, A.Name, C.UID, D.Unit 
From 
    A 
inner join 
    B on A.UID = B.FUID 
left join 
   C on B.UID = C.UID
left join 
   D on C.unitID = D.ID
Where 
   C.LName = 'Gas' 
```

上面的代码读取 - 获取所有标签和相应的名称，`Table A`其中链接到一个记录，`Table B`其中在 C 中可能有也可能没有链接到它的记录，在 D 中可能有也可能没有链接到它的记录，和`C.LName = 'gas'`。

请问这是正确的吗？我需要的是从 A 中提取存在于 B 中的数据，无论记录是否存在于 C 或 D 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:02:56.890

不。

您需要将“Gas”过滤器放入连接中，否则左连接将有效地成为内部连接

```
Select  
    A.Label, A.Name, C.UID, D.Unit  
From  
    A  
inner join B on A.UID = B.FUID  
left join C on B.UID = C.UID 
            and C.LName = 'Gas'
left join D on C.unitID = D.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:03:10.123

使用`ON A.UID = B.FUID`而不是`where A.UID = B.FUID`像这样：

```
Select A.Label, A.Name , FUID, D.Unit 
From A 
inner join B ON A.UID = B.FUID 
left join C ON B.UID = C.UID
left join D on C.unitID = D.ID
Where C.LName = 'Gas' 
```

# php - 上传运行多次

> ID：12898422
> 
> 赞同：0
> 
> 时间：2012-10-15T15:02:08.893
> 
> 标签：php, upload

我有一个正在运行的应用程序，它允许用户上传 .zip 文件。一切运行顺利，但不知何故，上传运行多次。我用谷歌搜索，搜索了stackoverflow，但是当我阅读我的代码时，它不会多次运行do_upload()函数，只在if子句中运行一次。

据我了解上传库， $this->upload->display_errors() 和 $this->upload->data() 不会再次运行上传，对吗？

我的控制器：

```
 function upload()
{
    $this->checkAuth();
    $config['upload_path'] = '.\files\zipped\\';
    $config['allowed_types'] = 'zip';
    $config['max_size'] = '200000';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
        $this->load->view('\upload\v_import', $error);

    }
    else
    {
        $data = array('upload_data' => $this->upload->data());
        $this->load->view('\upload\v_upload_sucess', $data);
        $this->parse();
    }
} 
```

我的观点：

```
 <?php echo $error;?>

    <?php echo form_open_multipart('import/upload');
    ?>

    <input type="file" name="userfile" size="100" />

    <br /><br />

    <input type="submit" value="upload" />

    </form> 
```

我的成功观：

```
 <h3>Your file was successfully uploaded!</h3>
    <ul>
    <?php foreach ($upload_data as $item => $value):?>
    <li><?php echo $item;?>: <?php echo $value;?></li>
    <?php endforeach; ?>
    </ul>

    <p><?php echo anchor('import', 'Upload Another File!'); ?></p> 
```

# html - 这个 IMG 标签有什么问题？

> ID：12898428
> 
> 赞同：1
> 
> 时间：2012-10-15T15:02:45.627
> 
> 标签：html, image

我想我快疯了。我有一个这样的 IMG 标签：

```
<img src="/images/icon-articl.png" alt="xyz" /> 
```

一切都很好，图像显示正常。但是，我想将图像命名为 icon-article.png，但由于某种原因，这不被接受！

```
<img src="/images/icon-article.png" alt="xyz" /> 
```

只会显示 ALT 文本！我所做的只是复制图像文件并相应地重命名它。对“icon-articles.png”做同样的事情又好了！当我在浏览器的地址栏中输入完整地址时，同样的情况会发生，“icon-article.png”导致 URL 未找到，而其他图像显示。

这是什么？？

PS我认为这并不重要，但我现在正在本地主机上工作

编辑：纠正我的错字只是为了确保代码本身和文件名是好的。问题解决了，见下图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:10:57.977

好的，谢谢大家的努力，对不起，我应该更好地表达自己。代码本身很好，我在问题中给出的只是一个片段。所有文件也确实存在，我总是复制并重命名它们。

所以感谢 EricG 的评论，缓存是问题，CTRL-F5 解决了问题！

我会记得更频繁地这样做....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:08:39.487

可能是 icon-article.png 图像不是原始 png 文件，如果您可能重命名文件扩展名，则在 IE 等浏览器中将不支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:04:51.397

关闭你的 alt 标签

```
<img src="/images/icon-article.png" alt="... "/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T15:07:32.180

确保当您更改标签中的名称时，您也更改了文件名。否则它将无法正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T15:06:41.077

```
<img src="/images/icon-articles.png" alt="..." /> 
```

我在图像文件名中附加了“s”。正如你所命名的，有问题提到。

# xcode - 无法通过 pickerView 从 plist 检索文本以在 UIScrollView 内的 UITextView 中滚动

> ID：12898433
> 
> 赞同：0
> 
> 时间：2012-10-15T15:02:51.153
> 
> 标签：xcode, uiscrollview, uilabel, plist, uipickerview

我有一个由导航控制器锚定的多屏应用程序。在一个屏幕上，输入到 UIScrollView 内的 UILabel 中的静态文本可以完美滚动。在另一个屏幕上，我按照相同的格式在它自己的 UIScrollView 中创建了一个可滚动的 UILabel - 只是这一次，滚动文本会根据从 plist 文件中提取的内容而有所不同，当在同一屏幕上的 pickerView 中进行选择时访问该文件。结果是 - 文本出现，并在选择新的选择器项目时正确更改 - 但文本不会滚动。

我找到[了这个解决方案](https://stackoverflow.com/questions/8967842/how-to-add-a-scroll-function-to-a-uilabel)，但我不知道如何将它应用于我的情况。

我还阅读了有关使用 UITextView 而不是 UILabel 的信息，但我无法弄清楚如何在 Xcode（v.4.5）情节提要的 Connections Inspector 中为其创建引用出口。我认为可能有一种方法可以对此进行编码，而不是依赖图形界面。

这是我的实现文件的相关部分。在pickerView中选择了“Term”，而UILabel中出现了“Definition”：

```
@implementation InsuranceGlossaryViewController
@synthesize termPicker, termArray, definitionArray;
@synthesize termLabel, definitionLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(280, 2400)];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Glossary" ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
    self.termArray = [dict objectForKey:@"Term"];
    self.definitionArray = [dict objectForKey:@"Definition"];

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.termArray = nil;
    self.definitionArray = nil;
    self.termLabel = nil;
    self.definitionLabel = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    return [termArray count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    return [termArray objectAtIndex:row];
} 

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
    NSString *resultString = [[NSString alloc] initWithFormat:
                              @"%@",
                              [definitionArray objectAtIndex:row]];
    definitionLabel.text = resultString;
    NSString *termString = [[NSString alloc] initWithFormat:
                              @"%@",
                              [termArray objectAtIndex:row]];
    termLabel.text = termString;

} 
```

这是头文件中的代码：

```
@interface InsuranceGlossaryViewController : UIViewController
<UIPickerViewDelegate, UIPickerViewDataSource, MFMailComposeViewControllerDelegate>
{
    UIPickerView       *termPicker;
    NSArray            *termArray;
    NSArray            *definitionArray;
    UILabel            *termLabel;
    UILabel            *definitionLabel;
    IBOutlet UIScrollView *scroller;
}
- (IBAction)showEmail:(id)sender;
@property (strong, nonatomic) IBOutlet UIPickerView *termPicker;
@property (strong, nonatomic) IBOutlet UILabel *termLabel;
@property (strong, nonatomic) IBOutlet UILabel *definitionLabel;
@property (strong, nonatomic) NSArray *termArray;
@property (strong, nonatomic) NSArray *definitionArray; 
```

任何帮助将不胜感激。

编辑：我似乎已经启动并运行了一个 UITextView 字段 - 至少当我在其中滑动时我可以看到它滚动。我不知道如何让“definitionLabel”出现在其中。使用 UILabel，我能够为定义标签设置一个引用插座。但是 UITextView 的工作方式不同。我很难过，我的老板希望这个应用程序在这个月上线！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:43:26.990

解决了。

我添加了“UITextFieldDelegate”和“IBOutlet UITextView *textView;” 到.h文件并添加“textView.text = resultString;” 到 .m 文件，这使我可以将 UITextView 的引用出口与 textView 联系起来。现在正确的文本出现在 UITextView 中并且它滚动。

# git - 还原脚手架命令

> ID：12898441
> 
> 赞同：2
> 
> 时间：2012-10-15T15:03:25.217
> 
> 标签：git, entity-framework, nuget, asp.net-mvc-scaffolding

**脚手架**是一个强大的功能，我们可以从 Visual Studio 下的包管理器中非常快速地生成模型、控制器和视图。

但是如果你提交了错误的命令，如何恢复呢？

例如 ：

```
Scaffold Controller Person -Repository 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-13T12:16:01.623

如果有一个，那就太好了`Scafforld-Revert`，但不幸的是，没有这样的事情。

这可以通过以下方式完成：

```
git revert <commit> 
```

> **还原与重置**：
> 
> 重要的是要了解 git revert 撤消单个提交 - 它不会通过删除所有后续提交来“恢复”到项目的先前状态。在 Git 中，这实际上称为重置，而不是还原。

请参阅此处：[Atlassian Git 教程](https://www.atlassian.com/git/tutorials/undoing-changes)

# spring - 在 WAS-ND 中部署 Spring

> ID：12898444
> 
> 赞同：0
> 
> 时间：2012-10-15T15:03:27.810
> 
> 标签：spring, deployment, websphere

每当我将 .war 文件部署到 WAS-ND 时，都会遇到此错误。

```
Error Stack: 
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file <filename>

nested exception is java.lang.IncompatibleClassChangeError: org.springframework.asm.ClassVisitor 

Caused by: java.lang.IncompatibleClassChangeError: org.springframework.asm.ClassVisitor 
```

我做了一些研究，发现我需要 cglib 和 asm jar 才能工作。不幸的是，我已经有了它们......

罐子：

```
cglib-nodep-2.2.2.jar
spring-asm-3.1.1.RELEASE.jar 
```

我不明白为什么它仍然不起作用......这里有什么帮助吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:40:28.317

If you are using applicationContext, Check whether its under source folder.

And also check jars under buildpath

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:59:13.440

它不是在谈论 classnotfound 异常。它只是说明“ClassVisitor”所依赖的类是不兼容的。它可以定位类，只是版本与预期的不同。

我会先试试这个。查看此类并查看其使用的导入，并查看哪些 Jars 包含这些类，并且可能其中一个应该包含答案。

顺便说一句，您使用的是什么版本的 Spring，并确保所有依赖的 Jars 都是兼容的！

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:03:41.140

我通过删除 org.springframework.asm jar 解决了这个问题。显然，这是 IBM 已知的一个错误，将于 10 月 29 日发布补丁以进行修复。希望这可以帮助。:)

编辑：不幸的是，补丁没有解决问题......

# struts2 - 在 Struts 2 中是否有可能产生下载文件（流）*和*重定向的结果？

> ID：12898445
> 
> 赞同：3
> 
> 时间：2012-10-15T15:03:27.973
> 
> 标签：struts2

我有以下struts def：

```
<result name="reportSuccessfullyDownloaded" type="stream">
  <param name="contentType">application/zip</param>
  <param name="contentDisposition">attachment;filename="%{filename}"</param>
</result> 
```

它会下载一个 .zip 文件，其中可以包含 1-10 个生成的 pdf 报告。

我想做的是更改应用程序以处理以下情况：

*   如果生成了所有报告，请使用“流”结果并下载 .zip 文件。无需重定向。
*   如果生成了一些报告但其他报告有错误，请使用“流”结果并下载带有生成 pdf 的 .zip 文件，然后重定向到列出未生成报告的错误页面。
*   如果未生成报告，请跳过下载并重定向到列出未生成报告的错误页面。

我的问题是：我怎样才能为单个动作获得多个“结果”？我不明白这怎么可能。是吗？还是我必须以某种方式不得不使用非常不鼓励的“连锁”结果？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:57:36.013

我知道这已经很老了，但我建议您将报告生成的状态存储在会话中，并有一个 ajax 操作来服务生成状态，以及另一个下载文件的操作。

这样，您可以多次更新报告生成的状态并很好地提供它，例如：

*   一月 - 生成
*   2 月 - 错误 #231，联系支持人员
*   三月 - 生成
*   四月 - 进行中...
*   五月 - 待定

一旦一切完成，您也可以自动开始下载。只需确保在用户重新进入页面或看起来合适时清除会话。

# c# - 在 WPF 中预览多个视频

> ID：12898452
> 
> 赞同：1
> 
> 时间：2012-10-15T15:04:02.740
> 
> 标签：c#, wpf, windows-7, mediaelement

在 WPF 中预览多个视频的最佳方法是什么？我想一次播放 10 多个视频。类似于文件资源管理器中的预览图像，但播放视频。我试过了，`MediaElement`但是当我运行超过 4 个视频时，视频就会滞后（希望这是正确的词，它播放不流畅）。那么我该如何解决这个问题呢？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:14:32.613

这不是您使用的组件的问题，而是 CPU / GPU 性能的问题。要一次播放 10 个视频，您将需要高端系统。

此外，这将取决于您的视频质量。如果它们具有高分辨率，那么即使在高端系统中它们也不会流畅播放。

# android - 如何使用共享首选项编辑器进行保存

> ID：12898454
> 
> 赞同：3
> 
> 时间：2012-10-15T15:04:14.040
> 
> 标签：android, sharedpreferences, android-image, saving-data

我需要一些帮助。我是新的安卓开发者。我无法在共享首选项编辑器中保存图像。我想将图像保存在我的列表中。

这是我的**Main.java**：

```
public class Main extends ListActivity {

    ArrayList<PersonalInfo> newList = null;
    private Button btnSave = null;

    private EditText txtName = null;
    private EditText txtMobile = null;
    private CustomListAdapter newAdpt = null;
    private int i = 0;
    private ImageView images;
    public static String filename = "MySharedString";
    SharedPreferences someData;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        someData = getSharedPreferences(filename, 0);
        newList = new ArrayList<PersonalInfo>();

        newAdpt = new CustomListAdapter(this, R.layout.list_item, newList);
        setListAdapter(this.newAdpt);

        txtName = (EditText) findViewById(R.id.txtName);
        txtMobile = (EditText) findViewById(R.id.txtMobile);
        images = (ImageView)findViewById(R.id.imageView1);

        btnSave = (Button) findViewById(R.id.btnSave);

        btnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                newList = new ArrayList<PersonalInfo>();
                PersonalInfo info = new PersonalInfo();
                String dataTxtName = txtName.getText().toString();
                String dataTxtMobile = txtMobile.getText().toString();
                int dataImage = images.getId();
                SharedPreferences.Editor editor = someData.edit();

                editor.putString("sharedStringName", dataTxtName);
                editor.putString("sharedStringMobile", dataTxtMobile);
                editor.putInt("sharedIntImage", dataImage);

                info.SetName(dataTxtName);
                info.SetMobile(dataTxtMobile);
                info.SetImage(dataImage);
                newList.add(info);

                if (newList != null && newList.size() > 0) {
                    newAdpt.notifyDataSetChanged();
                    newAdpt.add(newList.get(0));
                    i++;

                }

                newAdpt.notifyDataSetChanged();

            } 
```

这是我的**PersonalInfo.java**

```
public class PersonalInfo {
    private String name = "";
    private String mobile = "";
    private int image;

    public void SetName(String name) {
        this.name = name;
    }

    public String GetName() {
        return this.name;
    }

    public void SetMobile(String mobile) {
        this.mobile = mobile;
    }

    public String GetMobile() {
        return this.mobile;
    }

    public void SetImage(int dataImage) {
        this.image = dataImage;
    }

    public int GetImage() {
        return this.image;
    } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:07:40.900

`editor.commit();`修改完后添加`SharedPreferences`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:09:14.313

每次对 SharedPreferences 进行任何更改时，都必须添加 editor.commit()。

# java - while循环检查字符输入

> ID：12898455
> 
> 赞同：0
> 
> 时间：2012-10-15T15:04:17.457
> 
> 标签：java, string, loops, while-loop, character

我正在尝试以字符的形式接受用户的输入。我有这个工作，但我需要检查并确保它是 6 个字符之一（H、h、S、s、L、l）。我有一个 while 循环，但只要向其中添加多个字符语句，循环就会为每个应该正确的值给出错误。

这是功能：

```
 private static char getHighLow(Scanner keyboard) 
{
    System.out.println("High, Low, or Sevens (H/L/S): ");
    String choiceString = keyboard.next();

    char choice = choiceString.charAt(0);

    while (choice != 'H' || choice != 'h' || choice != 'L' || choice != 'l' || choice != 'S' || choice != 's')
    {
        System.out.println("You have entered an invalid entry.");
        System.out.println("High, Low, or Sevens (H/L/S): ");
        choiceString = keyboard.next();
    }

    return choice;

} 
```

继续检查这样的多个字符的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:05:26.873

使用`&&`而不是`||`.

```
while (choice != 'H' && choice != 'h' && choice != 'L' && choice != 'l' && choice != 'S' && choice != 's') 
```

这可以通过首先转换为小写来简化。

```
choice = Character.toLowerCase(choice);

while (choice != 'h' && choice != 'l' && choice != 's') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T15:05:44.747

您的逻辑中有一个错误：您应该将这些测试与 AND: 连接起来`&&`：

```
while (choice != 'H' && choice != 'h' && choice != 'L' && ... 
```

此外`choice`，循环体内永远不会更新，因此它永远不会改变。在循环内`choice = choiceString.charAt(0);`重新阅读后复制。`choiceString`

从概念上讲，只要字符*不是 H AND 不是 L AND 不是 S* ，您就想继续要求输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:05:49.270

您永远不会`choice`在`while`循环中更新：

只需在循环末尾添加这一行：

```
choice = choiceString.charAt(0); 
```

此外，您应该检查`&&`而不是`||`.

# joomla - 如何在 Joomla! 中控制管理员访问？

> ID：12898463
> 
> 赞同：1
> 
> 时间：2012-10-15T15:04:52.647
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 开发一个在线购物网站！2.5\. 我已经安装了 VirtueMart 作为购物组件。我想创建一个用户登录系统后端后*只能查看 VirtueMart 组件的后端。*该用户应该无法查看任何其他管理控件。无论如何使用Joomla来做到这一点！无需自定义代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:27:36.380

您可以在 Joomla 中使用 ACL：

*   创建一个新组，例如 VMUsers，
*   将“经理”设置为父级，因为它具有最少的管理员权限
*   浏览您要隐藏的管理员的每个额外部分，即文章管理器、媒体管理器、用户管理器，然后单击“选项”按钮，单击“权限”选项卡并为每个权限选择“拒绝”新创建的组。您可能还必须对一些组件执行此操作。

![在此处输入图像描述](../Images/cb6f7c759477371eeef591043ca90c89.png)

这是我在管理员中为我放置在 VMUsers 组中的新用户看到的内容：

![在此处输入图像描述](../Images/495433d2379fbe1b834d62460cfcf978.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:31:41.963

是的，您可以`ACL`在 Joomla 管理员中使用而无需修改任何代码。

1.  登录到 Joomla 管理员。
2.  `Site -> Global Configuration -> Permissions.`在这里你可以看到`Joomla ACL controls`.

![在此处输入图像描述](../Images/7c2d9899ed60830974fc770190080fcf.png)

![在此处输入图像描述](../Images/70e73228d407f3269350ecc270808ca0.png)

![在此处输入图像描述](../Images/100ff6f9dad7a00bb94a1d5834eaa57c.png)

这些屏幕截图可能会指导您如何更改管理员的权限。

如果您想了解有关 Joomla ACL 访问的更多信息，请单击[此处](http://docs.joomla.org/Access_Control_List/2.5/Tutorial)

尝试一下.....

# c# - 如何“悄悄地”发送电子邮件？

> ID：12898465
> 
> 赞同：0
> 
> 时间：2012-10-15T15:04:53.603
> 
> 标签：c#, windows-8, microsoft-metro, email

如何“静默”（无需用户干预）从 C# Windows 8“Metro”/Store/Modern UI 应用程序发送电子邮件？

## 更新

根据我从这里收集到的信息：

[http://social.msdn.microsoft.com/Forums/da/winappswithcsharp/thread/393a123f-674c-4b44-af87-9963053f42fd](http://social.msdn.microsoft.com/Forums/da/winappswithcsharp/thread/393a123f-674c-4b44-af87-9963053f42fd)

可能我可以将我的应用程序用作共享源，以内置电子邮件客户端为目标，然后 IT 将发送我的电子邮件。有道理？

## 更新 2

我在想原始通知 (http://code.msdn.microsoft.com/windowsapps/Raw-notifications-sample-3bc28c5d) 可能在我的未来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:20:02.740

WinRT 不包含**System.Net.Mail**命名空间，因此如果您想直接从您的应用程序发送电子邮件，您需要手动连接到您的邮件 Web 服务，打开一个到 SMTP 端口的套接字等。

否则，您需要调用诸如接收参数并发送邮件的 WCF 服务之类的东西。

# mysql - BOOLEAN 搜索 MySQL 不适用于某些单词

> ID：12898466
> 
> 赞同：2
> 
> 时间：2012-10-15T15:04:55.453
> 
> 标签：mysql, search, boolean

我在使用布尔搜索时遇到问题，首先我认为我的数据库/表有问题，但后来我尝试使用 1 列和示例值创建以下示例表，结果是相同的，它成功运行了一些单词而失败了， 有任何想法吗？

成功运行的查询：

```
SELECT * FROM `temp` WHERE (match (txt) against ('develo*' IN BOOLEAN MODE)>0 ) 
SELECT * FROM `temp` WHERE (match (txt) against ('devel*' IN BOOLEAN MODE)>0 ) 
SELECT * FROM `temp` WHERE (match (txt) against ('senio*' IN BOOLEAN MODE)>0 ) 
```

但是当我尝试对“第二”或“第三”进行类似的搜索时，它失败了

```
SELECT * FROM `temp` WHERE (match (txt) against ('secon*' IN BOOLEAN MODE)>0 ) 
SELECT * FROM `temp` WHERE (match (txt) against ('third*' IN BOOLEAN MODE)>0 ) 
```

--- 以下是示例表和值 -----

```
CREATE TABLE IF NOT EXISTS `temp` (
  `txt` varchar(30) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

--
-- Dumping data for table `temp`
--

INSERT INTO `temp` (`txt`) VALUES
('developer'),
('Developer'),
('Developer senior'),
('senior developer'),
('second job'),
('job second'),
('third'),
('third job'),
('job third'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:09:59.243

由于在 BOOLEAN MODE 匹配中应用了[停用词列表](http://dev.mysql.com/doc/refman/5.5/en//fulltext-stopwords.html)`second`，因此引擎会忽略和`third`。

您可以使用自己的覆盖默认停用词列表，如下[所述](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)：

> 要覆盖默认停用词列表，请设置`ft_stopword_file`系统变量。[...] 变量值应该是包含停用词列表的文件的路径名，或者是禁用停用词过滤的空字符串。服务器在数据目录中查找文件，除非给出绝对路径名来指定不同的目录。更改此变量的值或停用词文件的内容后，重新启动服务器并重建`FULLTEXT`索引。

# asp.net-mvc - ASP.NET MVC TextBoxFor 占位符

> ID：12898471
> 
> 赞同：7
> 
> 时间：2012-10-15T15:05:09.423
> 
> 标签：asp.net-mvc

我有以下文本框`View`：

![在此处输入图像描述](../Images/2229e090bb2c894334d2767f46f10850.png)

占位符的代码：

```
@Html.TextBoxFor(m => m.Listing.Location.AddressLine1, new {@placeholder="Address Line 1 - Required"}) 
```

**问题：**如何在 RED 中显示“必填”文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:06:59.113

您不能使用文本字段执行此操作。您无法控制 HTML5`placeholder`属性的某些部分的格式。更不用说，如果你想实现多色文本，你不能再使用文本字段或文本区域。您将不得不使用具有`contenteditable="true"`属性的元素并编写您的自定义插件。

例如，标记的外观如下：

```
<div contenteditable="true">
    Address Line 1 - <span style="color: red">Required</span>;
</div> 
```

但由于这是一个`div`元素，您现在必须使用相应的隐藏字段对其进行备份，以便将值发送到服务器。此外，当此字段的值更改时，您还需要重新同步隐藏字段值。这将是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-28T11:15:24.417

在模型中

[必需的]

```
public string AddressLine1{ get; set; }

@Html.TextBoxFor(model => model.Listing.Location.AddressLine1, new { @class = "form-control" , placeholder = "Address Line 1 - Required" }) 
```

试试这个空的@Html.TextBox

```
@Html.TextBox("CustomarName" ,null, new { @class = "form-control" , @placeholder = "Search With Customar Name" }) 
```

# c# - 动态创建一个 没有覆盖其 ID 的元素

> ID：12898474
> 
> 赞同：1
> 
> 时间：2012-10-15T15:05:12.823
> 
> 标签：c#, asp.net

我有一个`<div>`想要动态添加一些 HTML`<a>`元素的元素。那部分似乎工作得很好。这是HTML：

`<div id="crumbBar" runat="server"/>`

在我后面的代码中，添加 HTML 锚点按预期工作；但是，当页面呈现时，id 更改为“workArea_crumbBar”（这都在母版页中）。

`<div>`我尝试使用适当的 id在id 中动态创建一个`<div>`，但这也在 id 前面加上“workarea_”。

我还有其他依赖`<div>`元素 id 的代码。有什么方法可以防止 IIS 更改主元素或嵌套元素的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:28:31.933

尝试像这样更改您的 div：

```
<div id="crumbBar" runat="server" ClientIDMode="Static" /> 
```

事实上，这不是 IIS 而是 ASP.Net 框架的行为。控件以树的形式组织，最终的客户端 ID 将是所有祖先 ID 串联的结果。

目标是避免两个控件之间的 Id 冲突。冲突的一个例子是当您创建一个用户控件时，例如：`<asp:label id="mylbl" runat="server" />`. 如果您实例化两次用户控件，则两个控件在客户端将具有相同的 Id 而没有此行为。

这意味着您必须谨慎使用此属性，因为它可能会导致一些晦涩的问题。如果可以，您应该寻找另一种解决方案。在构建 .Net 应用程序 12 年后，我再也不用使用这个属性了。可能有其他选择。

# jquery - 使用 jQuery 替换 H3 标头中的文本

> ID：12898475
> 
> 赞同：4
> 
> 时间：2012-10-15T15:05:12.597
> 
> 标签：jquery, string, dom, text, replace

我试图使代码尽可能简单/干净。两个 DIV 中有一个 h3。顶部 DIV 有一个 ID，内部 DIV 有一个唯一的类。

```
$("#Events .event-header h3").html("your new header"); 
```

我也试过：

```
$("#Events .event-header h3").text("your new header"); 
```

都不工作。当我在 Chrome 控制台中尝试它们时，它告诉我我引用的元素是未定义的，并且它不知道要定位什么文本。DIV 结构再简单不过了。我不知道如何引用 h3 标签。

有小费吗？（我已经修复了 .event-header 类中的错字 - 显然，发表评论而不是以前这样做是一种严重的罪过。万圣节快乐？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T15:13:13.903

你的课`.event-header`不是`.events-header`

活动中有一个额外的“s”。

所以试试这个

```
$("#Events .event-header h3").text("your new header"); 
```

[小提琴](http://jsfiddle.net/Kh7dw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:22:03.087

也许您在使用 $ 符号的网站 jquery 中有冲突？你为什么不尝试用这个准备好的语句来包装它

```
jQuery(document).ready(function($){
  $("#Events .events-header h3").text("your new header");​
}); 
```

# objective-c - AirPrint：在 UIPrintInteractionController 中设置默认打印机

> ID：12898476
> 
> 赞同：5
> 
> 时间：2012-10-15T15:05:13.910
> 
> 标签：objective-c, ios, printing, airplay

我需要一种方法，使用已知的打印机 ID 将选定的打印机强制显示为 UIPrintInteractionController。

注意：为了进行测试，我使用安装在共享“打印机”的“MacBook Pro”上的 Printopia

我做了这个测试：

```
-(IBAction)print:(id)sender
{
 UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];

 UIPrintInteractionCompletionHandler completionHandler = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
      NSLog(@"Selected Printer ID: %@",printController.printInfo.printerID);      
  };

 NSString* path = [[NSBundle mainBundle] pathForResource:@"TestImage" ofType:@"png"];
 NSURL* imageURL = [NSURL fileURLWithPath:path isDirectory:NO];

 UIPrintInfo *printInfo = [UIPrintInfo printInfo];
 printInfo.outputType = UIPrintInfoOutputPhoto;
 printInfo.jobName = @"Image print";
 controller.printInfo = printInfo;

 controller.printingItem = imageURL;

 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
 {
    [controller presentFromBarButtonItem:self.printButton animated:YES completionHandler:completionHandler];  // iPad
 }
 else
 {
     [controller presentAnimated:YES completionHandler:completionHandler];  // iPhone
 }
} 
```

打印完成后，应用程序会记录以下打印机 ID：

```
\032Printer\032@\032MacBook\032Pro._ipp._tcp.local. 
```

我想覆盖打印机，所以我应该这样做：

```
UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.printerId = @"\032Printer\032@\032MacBook\032Pro._ipp._tcp.local.";
controller.printInfo = printInfo; 
```

但由于某种原因它不起作用，UIPrintInteractionController 没有按预期选择打印机，但打印机显示在打印机列表中。

我想问题是打印机 ID 中存在奇怪的字符。

任何人都知道 printInfo.printerId 是如何编码的以及如何手动设置它？

如果我将 NSString* printerId 存储到 ivar 中并在下一次打印操作时再次设置它，它可以工作，但我不能手动通过打印机 ID 强制使用默认打印机。

* * *

顺便说一句：显然，如果打印机不可用/无法访问，我知道无法选择...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T17:59:28.873

为了让您以编程方式设置默认打印机，您只需将 printInfo 的打印机 ID 设置为 ._ipp._tcp.local。打印机名称应该与它在 UIPrinterInteractionController 弹出窗口中的打印机列表中的显示方式完全相同。例如，对于显示为*LANIERCOLOR315 [00:80:A3:95:2D:41]*的打印机，printerID 为`LANIERCOLOR315 [00:80:A3:95:2D:41]._ipp._tcp.local`。您不必对特殊字符进行编码。框架会做到这一点。

# java - Java 事件和事件监听器

> ID：12898485
> 
> 赞同：5
> 
> 时间：2012-10-15T15:05:30.080
> 
> 标签：java, event-handling

我在 Google 上搜索以了解如何创建自定义事件和事件侦听器。在阅读了一些关于它的文章后，我仍然感到困惑。我想请你们回顾一下制作自定义事件（非 GUI 相关事件）和处理程序的方法。有人可以提供有关如何创建自定义事件和侦听器的简单说明吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:28:45.907

您基本上创建一个接口作为侦听器，例如

```
public interface EatListener {

    ...

} 
```

在 EatListener 类中，您拥有使用事件作为方法参数调用的方法；如

```
public void onEat(EatEvent); 
```

然后你可以有一个像 Human 这样的类来实现或实例化 EatListener；如

```
public class Human {

    private EatListener listener;

    public void eatFood(Food food) {
        if(listener != null) {
            listener.onEat(new EatEvent(food));
        }
    }

} 
```

那么你需要有实际的 EatEvent；它可以像食物包装一样简单，可能还有一些额外的数据。

与 java 上的任何 GUI 一样，您可以从该接口创建匿名内部类：

```
new EatListener() {
    public void onEat(EatEvent event) {
        System.out.println("I just ate " + event.getFood().getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:41:00.107

我已经编写了很多基于事件的系统（非 gui），并且在实现自己的系统时有很多陷阱。一些经典的事情是线程和内存泄漏。

线程/进程控制仅仅意味着当你触发一个事件时，什么时候调用监听器——立即还是稍后？如果您立即触发，您最终可能会得到一个性能非常差的系统，该系统会不断对在调用侦听器后立即更改的事件做出反应。这里没有简单的答案，这实际上取决于您的需要。一般来说，如果您可以推迟事件的触发，您将拥有一个性能更好的系统（因为它可能避免为同一事件多次调用侦听器 - 或导致同一事件的事件循环）

第二个大问题是内存泄漏。Java 中没有删除是一件很可爱的事情，但听众是一把绑在你脚上的巨大枪。如果您有一个附加到使用大量内存的实例的侦听器，只要另一个对象包含对该侦听器的引用，该内存就会一直存在。有很多解决方案，例如 WeakReferences，但总的来说，在测试应用程序时需要非常小心并检查侦听器的数量，并确保它们优雅地分离（取消侦听？:)）。

简而言之，如果我是你，我会考虑使用类似：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/package-summary.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/package-summary.html) [http:// codingjunkie.net/guava-eventbus/](http://codingjunkie.net/guava-eventbus/) 的开发考虑了许多这些问题。

# java - java_home 未正确设置

> ID：12898494
> 
> 赞同：3
> 
> 时间：2012-10-15T15:05:58.247
> 
> 标签：java, installation, java-home

我的机器上安装了 2 个 Java。1.5 和 1.6。对于该项目，我需要 1.5。我已将所有路径变量设置为适当的，即

```
echo %JAVA_HOME%
<PATH_TO_1.5_JDK> 
```

这就是我想要的..但​​是当我这样做时

```
java -version
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03, mixed mode) 
```

为什么选择 java v 6 作为`java -version`命令？

**更新** 我已经检查了`%PATH%`变量，路径中出现的唯一 java 版本是 1.5。我在`SYSTEM VARIABLES`这里指的是变量，我使用的是 Win7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:11:28.853

选择 Java 6 是因为它首先出现在您的 PATH 环境变量中。它与 JAVA_HOME 变量无关，除非您使用 JAVA_HOME 变量指定 PATH 变量

将新的用户变量 PATH 设置为 JAVA_HOME\bin，将解决您的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T15:11:42.240

如果在`java`命令行上运行命令，重要的环境变量是`%PATH%`：如果 JDK-1.6 *bin*目录的路径在路径上的 1.5 *bin*目录的路径之前，那么`java`在命令行上运行将使用1.6版本。

环境变量被`JAVA_HOME`其他各种程序用来定位 JDK，例如 ant、一些 IDE 和第三方库。

如果您在项目中使用特定的 IDE，那么您需要了解它是如何定位 JVM 的。如果您将在命令行上进行编译，请调整您`PATH`的 1.5 安装在 1.6 安装之前，或者使用编译器和 VM 的完整路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:19:11.560

JAVA_HOME 与执行 java 的 PATH 不同。

读完你会明白的

[http://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-09T11:12:15.543

我有一个类似的问题，我解决了：

路径没有改变，因为特定用户`JAVA_HOME`指向了一些错误的 Java 版本。

在 Windows 运行中键入“为您的帐户编辑环境变量”，我`JAVA_HOME`在用户变量中看到了另一个。我删除了它，然后使用了正确的 Java 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T15:12:19.163

AFAIK，没有一个 HotSpot Java 命令使用 JAVA_HOME 来做任何事情：

在 Windows、UNIX、Linux 和基于 BSD 的操作系统（如 MacOS）上，诸如`java`和之类的命令是基于 PATH 变量定位的。`javac`通过 PATH 定位命令的位置通常是命令外壳和/或操作系统功能。

JAVA_HOME 变量被*一些*3rd-party 工具（例如 Ant、Maven、Tomcat 等）用来定位要使用的 Java 安装。但是其他工具会忽略 JAVA_HOME 并使用特定于应用程序的配置机制（例如 Eclipse）或一些 shell 东西来确定安装位置（例如）`java`通过`PATH`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-29T08:59:14.647

我在使用 Java 7 和 Java 8 时遇到了同样的问题。

解决方案：从 PATH 变量（系统变量）中删除以下条目：

```
c:\ProgramData\Oracle\Java\javapath\ 
```

# ruby-on-rails-3.1 - 验证 Rails 模型中的硬编码值

> ID：12898497
> 
> 赞同：0
> 
> 时间：2012-10-15T15:06:16.567
> 
> 标签：ruby-on-rails-3.1

我有一个注册表单，用户必须在其中输入他的凭据以及一个称为促销代码的文本字段。所以只有当促销代码的值为“akpoi”时才能提交表单。因此用户必须输入此字符串才能提交表单，否则会向用户显示错误消息“应在促销代码字段中输入 akpoi”。如何在 Rails 模型验证中检查这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:13:27.420

这应该在控制器端检查

```
if params[:field_name] == "akpoi"

else

end 
```

如果您坚持在模型中执行此操作，请执行以下操作

```
after_validation :check_field_value

def check_field_value
  self.errors.add(:comment, "Add Your Error Here") if field_name != "akpoi"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:13:52.990

我想你会想要使用`inclusion`：

```
validates :promo_code, :presence => true,:inclusion => { :in => "akpoi" } 
```

# .net - 如何包含来自服务器的图像和 css 文件

> ID：12898509
> 
> 赞同：0
> 
> 时间：2012-10-15T15:07:00.017
> 
> 标签：.net, asp.net-mvc-3

我在服务器上有我的 css 文件，我想包含它们。当我在本地拥有我的 css 文件时，我正在使用

```
@Assets.CSS("base/images.css") 
```

如何引用服务器上的 css 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:10:26.037

```
<link type="text/css" href="@Url.Content("~/css/base/images.css")" /> 
```

**评论后：**

```
<link type="text/css" href="http://d34gornfa0.cloudfront.net/images.css" /> 
```

或者，创建并使用*HTML Helper*：

```
<link type="text/css" href="@Html.ResolveCSSDirectory("image.css")" /> 
```

# c# - 如何拦截和压制电子邮件？

> ID：12898513
> 
> 赞同：0
> 
> 时间：2012-10-15T15:07:04.367
> 
> 标签：c#, windows-8, microsoft-metro, email

如何收听传入的电子邮件，如果它匹配特定的配置文件（例如，基于主题），拦截它以便可以在不向用户显示的情况下对其进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:08:20.647

建议寻找分层服务提供商。不是 .net（低 WinAPI），但似乎非常适合这种情况。

# java - 如何在 Java 中使用 bitshift 切换整数标志？

> ID：12898514
> 
> 赞同：0
> 
> 时间：2012-10-15T15:07:11.153
> 
> 标签：java, bit-shift

我在一个矩阵中有许多对象，它们将与其邻居的连接存储在一个整数变量中。

```
public static final int NONE = 0x00;
public static final int LEFT = 0x01;
public static final int TOP = 0x02;
public static final int RIGHT = 0x04;
public static final int BOTTOM = 0x08;

connections = LEFT | RIGHT | BOTTOM; // example usage 
```

现在我希望能够将某些对象顺时针或逆时针旋转 90°。在上面的例子中，顺时针旋转应该相当于

```
connections = TOP | BOTTOM | LEFT; 
```

1 的左/右位移似乎是显而易见的解决方案，但我不知道如何将位移限制为 LEFT (0x01) 到 BOTTOM (0x08) 的位。

我希望有一个人可以帮助我。当谈到位操作时，我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:10:48.790

这应该这样做：

```
connections = ((connections << 1) | (connections >> 3)) & 0x0f; 
```

# facebook - 我可以将 Open Graph 操作设置为不使用单数形式（“a”/“an”）吗？

> ID：12898515
> 
> 赞同：3
> 
> 时间：2012-10-15T15:07:14.467
> 
> 标签：facebook, facebook-graph-api

假设我有一个“厨师”动作和“酿饼干”食谱。发布操作后，时间轴上会出现以下行：“用户在 appname 上烹制的填充 cookie”。在新闻提要中，正在使用对象类型：“用户在 appname 上烹制**了**食谱”。

我希望始终使用第一种形式的句子（也在新闻提要/股票行情中），以避免单数形式。

可能吗？我一直在阅读和搜索，但找不到答案。任何其他避免单数形式的“a”/“an”的想法（始终）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:33:37.887

不，它显示的两种基本方式是：

`[user] [verb] a [name of object type]`

或者

`[user] [verb] [name of object instance]`

对于您提供的示例，其中任何一个都可以正常工作：

'用户煮了一个食谱' '用户 cookied 填充饼干'

# python - Python MySQLdb 转换器不工作

> ID：12898516
> 
> 赞同：5
> 
> 时间：2012-10-15T15:07:15.937
> 
> 标签：python, sql, converter, long-integer, mysql-python

我正在尝试使用 python 和 MySQLdb 运行 ETL 脚本，但我坚持使用初始提取查询的结果。当我想要 Int 和 Float 时，返回的类型都是 Long 和 Decimal。我已经搜索了几个小时试图得到这个答案，但没有任何成功。

```
database = MySQLdb.connect(host='db',user='user',
                       passwd='password', db='db123')

database_cursor = database.cursor()

database_query = ("SELECT id, siteId, campaignId, hour, sum(impressions) AS impressions, "
"sum(clicks) AS clicks, sum(conversions) AS conversions, sum(costs/1000000) AS revenue "
"FROM database.DM_PublisherFact_Hourly WHERE time = '%s' GROUP BY siteId, campaignId;") %(today)

print database_query

database_cursor.execute(database_query)
result = database_cursor.fetchone()

database.close() 
```

返回值是 Longs 和 Decimals 的元组。我尝试将转换字典显式传递给连接对象，但没有运气。有什么帮助吗？

这是转换代码

```
"""MySQLdb type conversion module

This module handles all the type conversions for MySQL. If the default
type conversions aren't what you need, you can make your own. The
dictionary conversions maps some kind of type to a conversion function
which returns the corresponding value:

Key: FIELD_TYPE.* (from MySQLdb.constants)

Conversion function:

Arguments: string

Returns: Python object

Key: Python type object (from types) or class

Conversion function:

Arguments: Python object of indicated type or class AND 
           conversion dictionary

Returns: SQL literal value

Notes: Most conversion functions can ignore the dictionary, but
       it is a required parameter. It is necessary for converting
       things like sequences and instances.

Don't modify conversions if you can avoid it. Instead, make copies
(with the copy() method), modify the copies, and then pass them to
MySQL.connect().

"""

from _mysql import string_literal, escape_sequence, escape_dict, escape, NULL
from constants import FIELD_TYPE, FLAG
from times import *
import types
import array

try:
set
except NameError:
from sets import Set as set

def Bool2Str(s, d): return str(int(s))

def Str2Set(s):
values = s.split(',')
return map(str, tuple(values))

def Set2Str(s, d):
return string_literal(','.join(s), d)

def Thing2Str(s, d):
"""Convert something into a string via str()."""
return str(s)

def Unicode2Str(s, d):
"""Convert a unicode object to a string using the default encoding.
This is only used as a placeholder for the real function, which
is connection-dependent."""
return s.encode()

Long2Int = Thing2Str

def Float2Str(o, d):
return '%.15g' % o

def None2NULL(o, d):
"""Convert None to NULL."""
return NULL # duh

def Thing2Literal(o, d):

"""Convert something into a SQL string literal.  If using
MySQL-3.23 or newer, string_literal() is a method of the
_mysql.MYSQL object, and this function will be overridden with
that method when the connection is created."""

return string_literal(o, d)

def Instance2Str(o, d):

"""

Convert an Instance to a string representation.  If the __str__()
method produces acceptable output, then you don't need to add the
class to conversions; it will be handled by the default
converter. If the exact class is not found in d, it will use the
first class it can find for which o is an instance.

"""

if d.has_key(o.__class__):
    return d[o.__class__](o, d)
cl = filter(lambda x,o=o:
            type(x) is types.ClassType
            and isinstance(o, x), d.keys())
if not cl and hasattr(types, 'ObjectType'):
    cl = filter(lambda x,o=o:
                type(x) is types.TypeType
                and isinstance(o, x)
                and d[x] is not Instance2Str,
                d.keys())
if not cl:
    return d[types.StringType](o,d)
d[o.__class__] = d[cl[0]]
return d[cl[0]](o, d)

def char_array(s):
return array.array('c', s)

def array2Str(o, d):
return Thing2Literal(o.tostring(), d)

conversions = {
types.IntType: Thing2Str,
types.LongType: Long2Int,
types.FloatType: Float2Str,
types.NoneType: None2NULL,
types.TupleType: escape_sequence,
types.ListType: escape_sequence,
types.DictType: escape_dict,
types.InstanceType: Instance2Str,
array.ArrayType: array2Str,
types.StringType: Thing2Literal, # default
types.UnicodeType: Unicode2Str,
types.ObjectType: Instance2Str,
types.BooleanType: Bool2Str,
DateTimeType: DateTime2literal,
DateTimeDeltaType: DateTimeDelta2literal,
set: Set2Str,
FIELD_TYPE.TINY: int,
FIELD_TYPE.SHORT: int,
FIELD_TYPE.LONG: long,
FIELD_TYPE.FLOAT: float,
FIELD_TYPE.DOUBLE: float,
FIELD_TYPE.DECIMAL: float,
FIELD_TYPE.NEWDECIMAL: float,
FIELD_TYPE.LONGLONG: long,
FIELD_TYPE.INT24: int,
FIELD_TYPE.YEAR: int,
FIELD_TYPE.SET: Str2Set,
FIELD_TYPE.TIMESTAMP: mysql_timestamp_converter,
FIELD_TYPE.DATETIME: DateTime_or_None,
FIELD_TYPE.TIME: TimeDelta_or_None,
FIELD_TYPE.DATE: Date_or_None,
FIELD_TYPE.BLOB: [
    (FLAG.BINARY, str),
    ],
FIELD_TYPE.STRING: [
    (FLAG.BINARY, str),
    ],
FIELD_TYPE.VAR_STRING: [
    (FLAG.BINARY, str),
    ],
FIELD_TYPE.VARCHAR: [
    (FLAG.BINARY, str),
    ],
}

try:
from decimal import Decimal
conversions[FIELD_TYPE.DECIMAL] = Decimal
conversions[FIELD_TYPE.NEWDECIMAL] = Decimal
except ImportError:
pass

try:
from types import BooleanType
def Bool2Str(s, d): return str(int(s))
conversions[BooleanType] = Bool2Str
except ImportError:
pass 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T15:14:45.047

您的转换字典需要使用 MySQL 类型作为键，而不是 Python 类型：

```
import _mysql  
from MySQLdb.constants import FIELD_TYPE
my_conv = { FIELD_TYPE.LONG: int }
db=_mysql.connect(conv=my_con) 
```

来自[http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

看来您需要使用`_mysql.connect()`而不是`MySQLdb.connect()`才能使用转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T00:30:16.363

我遇到了同样的问题，但这是您可以应用的通用解决方案，以便 MySQLdb 保持与 mysql 发送的数据类型相同。希望这可以帮助。

```
try:
    import MySQLdb.converters
except ImportError:
    _connarg('conv')

def connect(host='abc.dev.local', user='abc', passwd='def', db='myabc', port=3306):

    try:
        orig_conv = MySQLdb.converters.conversions
        conv_iter = iter(orig_conv)
        convert = dict(zip(conv_iter, [str,] * len(orig_conv.keys())))
        print "Connecting host=%s user=%s db=%s port=%d" % (host, user, db, port)
        conn = MySQLdb.connect(host, user, passwd, db, port, conv=convert)
    except MySQLdb.Error, e:
        print "Error connecting %d: %s" % (e.args[0], e.args[1])
    return conn 
```

# joomla - 如何在 Joomla 2.5 管理员编辑菜单项页面中创建参考选择下拉菜单？

> ID：12898517
> 
> 赞同：1
> 
> 时间：2012-10-15T15:07:23.080
> 
> 标签：joomla, joomla2.5, joomla-extensions, administrator

我在 Joomla 2.5 中制作了一个自定义组件，我需要引用自定义表格以在“菜单管理器：编辑菜单项”页面中形成一个选择下拉列表。

我知道组件视图中的 default.xml 是字段所在的位置。

Joomla 在其许多组件中使用此 XML 从数据库中获取类别：

```
<field name="id" type="category"
               description="JGLOBAL_CHOOSE_CATEGORY_DESC"
               extension="com_content"
               label="JGLOBAL_CHOOSE_CATEGORY_LABEL"
               required="true"
                /> 
```

出现的是下面的第一个标签/字段。我想要做的是从数据库中获取信息以填充第二个下拉列表（轮播）。

![Joomla 使用站点范围内的类别从数据库中获取类别，但是如何进行自定义呢？](../Images/9e520597470ac89aad796b191b8860a7.png)

如何创建自己的逻辑以让“选择轮播”字段从数据库中的表中获取信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:21:23.213

您的答案很可能在 Joomla 中！文档，但如果不是在检查此[http://docs.joomla.org/Creating_a_custom_form_field_type#An_example_custom_field_type后告诉我们](http://docs.joomla.org/Creating_a_custom_form_field_type#An_example_custom_field_type)

我想这就是你要找的。

# php - 带有标签数据库设计注意事项的图像

> ID：12898522
> 
> 赞同：0
> 
> 时间：2012-10-15T15:07:40.457
> 
> 标签：php, mysql, database, database-design, foreign-keys

我正在设计一个包含照片的数据库。

一张照片可以没有或有更多与之关联的标签。

目前，我将所有标签词/关键字放在一个由每个图像记录的空格分隔的列中。

现在我知道这不是一个好的设计，因为可能有一个包含空标签词/关键字列的图像记录，并且带回所有包含“马”等单词的照片也会降低效率。

所以我的问题是，在他们自己的表中包含关键字和每个关键字的记录会更好吗？

该表可能有列 ID(INT PK)、imageId(INT KEY)、关键字(VARCHAR)。

我看到的唯一问题是我最终可能会为每张图片使用数百个重复的关键字？

有人在工作中简要提到了一些关于查找表来解决这个问题，但他们没有解释它到底是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:11:28.017

您可以添加另一个表，包括带有字段 id、关键字的命名标签。并在表中而不是关键字使用标签表的 id。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T15:16:36.287

我的偏好是只存储一次关键字/标签，然后将它们重复用于其他图像。

一个图像有并且属于许多标签

**图片**

*   ID
*   姓名
*   文件
*   ETC

**标签**

*   ID
*   姓名
*   创建

**图像标签**

*   image_id
*   tag_id

然后，您可以在给定图像记录的所有标签上使用组串联。请参阅 -[聚合函数和分组](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T15:10:42.690

空格分隔或以其他方式分隔可能是您最糟糕的选择。不过，您不需要所有标签的查找表，我会执行以下操作：

```
T_PHOTO
photo_id = 1, photo_name = hello

T_PHOTO_TAG
photo_id = 1, tag = pretty
photo_id = 1, tag = sunset
photo_id = 1, tag = kitten 
```

ETC

至关重要的是，您不需要包含所有这些词的 T_TAG。也就是说，你**可以**——如果你想要一个有限的标签宇宙，那就是。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T15:11:05.240

“该表可能有列 ID(INT PK)、imageId(INT KEY)、关键字(VARCHAR)。” 这也不是标准化的，因为如果您想为多张照片添加关键字，它将在这样的表格中出现多次。

你需要的是一个 m:n 关系，利用第三个表：

```
PHOTOS – at least an ID
KEYWORDS – ID and KEYWORD
PHOTO_HAS_KEYWORD – PHOTO.ID and KEYWORD.ID as combined PRIMARY or UNIQUE key with according foreign keys on them. 
```

您应该阅读一些关于数据库规范化的介绍，以了解 m:n 关系在这种情况下是如何工作的。

# php - php中未设置属性的返回值

> ID：12898525
> 
> 赞同：1
> 
> 时间：2012-10-15T15:08:05.527
> 
> 标签：php

如果我从 getter 返回并且没有为它设置任何内容，返回什么变量类型？

喜欢

```
$nb = $prod->getNewDate(); 
```

假设没有为新日期设置任何内容。什么是 $nb？无效的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:11:27.533

只需`var_dump()`在变量上使用它就会告诉你它是什么，在这种情况下为 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:09:17.810

然后返回 NULL，就像普通函数一样。

# codeigniter - 将值从控制器传递到外部库，然后传递到 View Codeigniter

> ID：12898526
> 
> 赞同：1
> 
> 时间：2012-10-15T15:08:06.100
> 
> 标签：codeigniter

我是 Codeigniter 的新手，我正在研究 API 类，以下是 API 代码

```
<?php
require_once("WiZiQService.php");
class ScheduleClass{

    function ScheduleClass($secretAcessKey,$access_key,$webServiceUrl)
    {
        require_once("AuthBase.php");
        $authBase = new AuthBase($secretAcessKey,$access_key);
        $method = "create";
        $requestParameters["signature"]=$authBase->GenerateSignature($method,$requestParameters);
        #for teacher account pass parameter 'presenter_email'
                //This is the unique email of the presenter that will identify the presenter in WizIQ. Make sure to add
                //this presenter email to your organization’s teacher account. ’ For more information visit at: (http://developer.wiziq.com/faqs)
        $requestParameters["presenter_email"]=$By_PresenterEmail;//"kerrygun@gmail.com";
        #for room based account pass parameters 'presenter_id', 'presenter_name'
        //$requestParameters["presenter_id"] = "40";
        //$requestParameters["presenter_name"] = "vinugeorge";  
        $requestParameters["start_time"] = $By_StartTime;//"2011-12-25 11:55";
        $requestParameters["title"]=$By_ClassTitle;//"my php-class"; //Required
        $requestParameters["duration"]=$By_ClassDuration; //optional
        $requestParameters["time_zone"]=$By_TimeZone; //optional
        $requestParameters["attendee_limit"]=$By_AttendeeLimit; //optional
        $requestParameters["control_category_id"]=$By_ControlCategory; //optional
        $requestParameters["create_recording"]=$By_CreateRecording; //optional
        $requestParameters["return_url"]=$By_ReturnUrl; //optional
        $requestParameters["status_ping_url"]=$By_StatusPingUrl; //optional
                $requestParameters["language_culture_name"]=$By_LanguageCulture;
        $httpRequest=new HttpRequest();
        try
        {
            $XMLReturn=$httpRequest->wiziq_do_post_request($webServiceUrl.'?method=create',http_build_query($requestParameters, '', '&')); 
        }
        catch(Exception $e)
        {   
            echo $e->getMessage();
        }
        if(!empty($XMLReturn))
        {
            try
            {
              $objDOM = new DOMDocument();
              $objDOM->loadXML($XMLReturn);

            }
            catch(Exception $e)
            {
              echo $e->getMessage();
            }
        $status=$objDOM->getElementsByTagName("rsp")->item(0);
        $attribNode = $status->getAttribute("status");
        if($attribNode=="ok")
        {
            $methodTag=$objDOM->getElementsByTagName("method");
            echo "method=".$method=$methodTag->item(0)->nodeValue;
            $class_idTag=$objDOM->getElementsByTagName("class_id");
            echo "<br>Class ID=".$class_id=$class_idTag->item(0)->nodeValue;
            $recording_urlTag=$objDOM->getElementsByTagName("recording_url");
            echo "<br>recording_url=".$recording_url=$recording_urlTag->item(0)->nodeValue;
            $presenter_emailTag=$objDOM->getElementsByTagName("presenter_email");
            echo "<br>presenter_email=".$presenter_email=$presenter_emailTag->item(0)->nodeValue;
            $presenter_urlTag=$objDOM->getElementsByTagName("presenter_url");
            echo "<br>presenter_url=".$presenter_url=$presenter_urlTag->item(0)->nodeValue;
        }
        else if($attribNode=="fail")
        {
            $error=$objDOM->getElementsByTagName("error")->item(0);
            echo "<br>errorcode=".$errorcode = $error->getAttribute("code");    
            echo "<br>errormsg=".$errormsg = $error->getAttribute("msg");   
        }
     }//end if  
   }//end function

}
?> 
```

所以我的问题是，我如何将值从控制器传递到附加的外部类，并且输出应该返回到控制器，然后将其发送到视图。

我正在尝试像这样使用它：

```
class Form extends CI_Controller {
    public function index() {
        $this->load->library('Create');
        $this->load->view('form_view');
    }
    public function wizprocess() {
        $this->load->library('Create');
        $this->Create->ScheduleClass();
    }
} 
```

您对上述问题的解决方案将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:31:22.907

基本上有两种方法可以做到这一点，Codeigniter 方式：

```
$this->load->library('scheduleclass');
$this->scheduleclass->__construct($secretAcessKey, $access_key, $webServiceUrl); 
```

我不太喜欢这样，CI 假设您的“库”构造函​​数采用一个参数：一组配置。如果你改变你的类来配合这个，你可以像这样加载它：

```
$config = array(
    'secretAcessKey'    =>  $secretAcessKey,
    'access_key'        =>  $access_key,
    'webServiceUrl'     =>  $webServiceUrl
);
$this->load->library('scheduleclass', $config); 
```

然后你的类可以[`extract($config)`](http://php.net/extract)或其他东西来确保定义了正确的变量。

我的建议是直接使用 PHP：

```
// Either include the file somewhere or use an autoloader
include APPPATH.'third_party/ScheduleClass.php'; 
```

然后一切如常，只是你没有使用 CI 的加载器，只是用普通的 PHP 创建新对象。

```
// In your Controller
function mymethod()
{
    $class = new ScheduleClass($secretAcessKey, $access_key, $webServiceUrl);
    $this->load->view('myview', array(
        'ScheduleClass' =>  $class
    ));
} 
```

一个大问题是你的类的糟糕设计，它只有一个方法（构造函数）并且它直接`echo`是所有东西而不是`return`一个值，所以当你创建它的那一刻 - 所有的输出都将被发送到浏览器。

# xulrunner - 从 xulrunner 中的字符串变量加载 iframe

> ID：12898528
> 
> 赞同：1
> 
> 时间：2012-10-15T15:08:08.503
> 
> 标签：xulrunner

我正在将代码从使用签名的 JAR 文件转换为使用基于 XULRunner 的应用程序。我在加载带有存储在 javascript 变量中的 html 内容的 iframe 的代码时遇到问题。

代码如下所示：

```
var doc = iframe.contentDocument;
doc.open();
doc.write(html);
doc.close(); 
```

iframe 具有 type="content"。照原样，在 XULRunner 中，我在 doc.open() 调用中遇到异常：

```
[Exception... "The operation is insecure."
   code: "18"
   nsresult: "0x80530012 (SecurityError)"
   location: "chrome://ec4main/content/apps/newsfeedtest/lib.js Line: 938"] 
```

如果我将 iframe 更改为 type="chrome"，那么它可以工作，但这似乎是个坏主意，因为 HTML 并不总是受信任的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:10:05.237

您应该使用[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)而不是`document.write()`（这确实不安全且不推荐）：

```
var wnd = iframe.contentWindow;
wnd.location.href = "data:text/html;charset=utf-8," + encodeURIComponent(html); 
```

# ios - 将 editButtonItem 连接到 UITableView

> ID：12898536
> 
> 赞同：5
> 
> 时间：2012-10-15T15:08:27.393
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uitableview

我有一个`UIViewController`将 a`UITableView`和 a添加`UIToolbar`到其视图中的 a 。不幸的是，我不能`UITableViewController`在这种情况下使用 a 。

我已将视图控制器添加`editButtonItem`到工具栏中。我需要在 a 上复制编辑按钮的默认行为`UITableViewController`- 编辑按钮应该绑定到 tableView 并将其切换到/退出编辑模式。

我已经覆盖了`UIViewController`'s`setEditing`以包含以下行：

```
[_tableView setEditing:editing animated:animated]; 
```

这在大多数情况下都有效 - 使用时表格视图成功进入和退出编辑模式`editButtonItem`。

但是，至少存在一个问题。在 a`UITableViewController`上，当用户滑过表格中的一行时，编辑按钮会切换到“完成”。“完成”然后将该行返回到它的非编辑版本。此外，触摸行外可将其返回查看模式，并将编辑按钮恢复为“完成”。

我的问题：

1.  如何复制此行为，以便在单个行进入/退出编辑模式时编辑按钮更改状态？
2.  我可能需要复制`UITableViewController`'s 的哪些其他行为？`editButtonItem`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:21:47.520

我自己的应用程序中有这样的案例。我实现了以下表格视图委托方法：

```
- (void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath {
    [self setEditing:YES animated:YES];
}

- (void)tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath {
    [self setEditing:NO animated:YES];
} 
```

# php - 如何使用 PHP 呈现 INNER JOINed SQL 数据？

> ID：12898537
> 
> 赞同：-1
> 
> 时间：2012-10-15T15:08:27.410
> 
> 标签：php, mysql, sql

我有三张桌子，一张充当其他两张的“链接”。我想要实现的是这个

```
Products
Num|Product_Code   
1  | HVTE  
2  | HVTT 
3  | HV31 
4  | HV11 

Colours
Num|Colour|Image
1   Yellow Yellow Image link
2   Orange Orange Image link
3   Pink   Pink image link

Product-Colours
P_Num | Colour_Num
1       1
1       2
2       1 
```

我希望实现的是，如果 P_Num = Products.Num 和 Colour_Num = Colours.Num 在屏幕上输出彩色图像。

我对 PHP 还很陌生，所以如果可能的话，我需要一个相当彻底的解释。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:48:15.093

如果我正确理解您，您想要的是给定产品编号的产品颜色。您需要做的只是将关联表与颜色表连接起来。那是：

```
SELECT 
  Colour
FROM
  Colours
JOIN
  `Product-Colours`
ON
  Colours.Num = `Product-Colours`.Colour_Num
WHERE
  `Product-Colours`.P_Num = # The Product Number 
```

请注意，使用`-`命名表会强制您用反引号引用表名......在我看来这有点烦人，所以重命名`Product-Colours`为`Product_Colours`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:16:52.157

可以通过谷歌搜索找到答案，[例如使用 this page](http://www.freewebmasterhelp.com/tutorials/phpmysql/4)，这是您搜索[“php mysql example”](https://www.google.com/search?q=php+mysql&aq=f&oq=php+mysql)时的第一个列表。

```
<?php

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$query = "SELECT  `Image` as prod_colour_img_link FROM  Colours JOIN  `Product-Colours` ON  Colours.Num = `Product-Colours`.Colour_Num WHERE  `Product-Colours`.P_Num = ".$prod_num;

mysql_query($query);

$num=mysql_numrows($result) 

echo '<ol>';
$i=0;
while ($i < $num) {  
  $prod_colour_img_link = mysql_result($result,$i,"Colour");

  echo '<li><img src="'.$prod_colour_img_link.'" /></li>';

  $i++;
}
echo '</ol>';

?> 
```

您应该阅读 mysql 安全的列和表名（命名约定），因为您选择的名称会导致您在调试时头疼的错误。你可以使用这些名字，但你不应该。

如果此答案不完美，请花一些精力对其进行修改以满足您的需求，然后提出一个具体问题。

# java - 将旧数据库表中的多列映射到休眠中的（java）列表？

> ID：12898541
> 
> 赞同：0
> 
> 时间：2012-10-15T15:08:43.510
> 
> 标签：java, hibernate

在处理非规范化（遗留）数据库表时，您有如下列：

price_1, price_2, price_3, ..., price_10

将此类列映射到 java 集合（例如 List）而不是将它们映射到相应的 price1、price2、... 属性的最有效和最干净的方法是什么。

有没有一种不涉及 UserTypes 的简单方法。

我说的是驻留在同一张表上的列，而不是多个实体之间通常的一对多关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:32:16.673

在这种情况下，我以前做过一次是创建一个类来封装价格，比如

```
public class Prices {
    Integer price_1;
    Integer price_2;

    public List<Integer> getAllPrices() {
        List<Integer> allPrices = new ArrayList<Integer>();
        allPricess.add(price_1);
        allPrices.add(price_2);
        return allPrices;
    }
    public Integer getPrice(int priceNumber) {
        if (priceNumber == 1) {
            return price_1;
        }
        // etc...
    }
} 
```

然后只需将表中的列映射到各个字段，并使用 Java 类对其余代码隐藏实际结构。您可以将所有价格作为一个集合或单独或任何合适的方式访问。

# forms - 验证 Symfony2 并查询数据库

> ID：12898543
> 
> 赞同：0
> 
> 时间：2012-10-15T15:08:50.780
> 
> 标签：forms, validation, symfony, callback

我在 symfony2 中的验证表单有问题。

我有一个带有实体的表格。进入文件'validation.yml'我使用了CALLBACK：它调用文件'Entity.php'中的方法'isValidForm'内容

```
ALM\CreateReleaseBundle\Entity\createReleaseEntity:
    constraints:
        - Callback:
            methods: [isFormValid] 
```

这是我的文件“Entity.php”

```
<?php
namespace ALM\CreateReleaseBundle\Entity;
use Symfony\Component\Validator\ExecutionContext;

class createReleaseEntity {
    protected $area;
    protected $relName;

    public function getArea() {
        return $this->area;
    }

    public function setArea($area) {
        $this->area = $area;
    }

    public function getRelName() {
        return $this->relName;
    }

    public function setRelName($relName) {
        $this->relName = $relName;
    }

    public function isFormValid(ExecutionContext $context) {
        // Validate Form
    }
} 
```

现在在“isFormValid”中，我想向放置在另一个控制器中的函数 getRelease 插入转发。

```
public function getReleaseAction (Request $request) {
$area = $request->get('area');
    $relName = $request->get('relName');
    $ret = $this->getRelease($area,$relName);
    $session = $this->get('request')->getSession();
    $session->set("releaseObj", $ret);
    return new Response ();
} 
```

有可能的？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:08:01.730

在任何情况下，您都不应该从模型访问控制器。

你想执行什么样的查询？

例如，如果您想通过 relName 检查 Release 在数据库中是否唯一，请在该字段上使用 Doctrine 的 UniqueValidator。

希望能帮助到你

# heroku - 在不同的服务器上安装 New Relic 但相同的 repo

> ID：12898545
> 
> 赞同：0
> 
> 时间：2012-10-15T15:08:59.750
> 
> 标签：heroku, ruby-on-rails-3.2, newrelic

我有一个带有 new_relic gem 的 webapp。我将应用程序部署到 heroku (app1)。

使用相同的代码，但使用不同的分支，我部署到不同的 heroku 应用程序（app2）

目前，我在新的 relic 仪表板中看到该应用程序在 2 个主机上运行。可能是它看到来自 2 个不同 IP 的同一个应用程序（确实如此）

如何分离应用程序，以使来自 app1 的新遗物数据不会与来自 app2 的新遗物数据混合？new_relic.yml 的唯一标识符是许可证密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:45:48.263

您可以通过在文件中设置`app_name`属性来拆分数据。`newrelic.yml`所以 app2 的分支只有一个变体配置文件。

您可以在 docs 中找到[更多详细信息](https://newrelic.com/docs/general/how-do-i-change-my-application-name)。

# asp.net-mvc - ASP MVC 的调试问题

> ID：12898547
> 
> 赞同：1
> 
> 时间：2012-10-15T15:09:02.323
> 
> 标签：asp.net-mvc

我有一个在 Visual Studios 2012 中创建的项目。当我调试它时，我的浏览器中会打开一个新页面，但它只是一直在加载。什么都没有显示。当我停止调试时，项目终于加载了。但是，我无法向其发布任何内容。如果我这样做，我会得到一个错误。这是正常的吗？

# internet-explorer-9 - IE9在最大化时不显示导航菜单，但在“还原”到一定大小时会显示

> ID：12898549
> 
> 赞同：3
> 
> 时间：2012-10-15T15:09:12.373
> 
> 标签：internet-explorer-9, screen-resolution, navigationbar

我创建了一个网站并将其托管在 Google 站点的 Google 小工具中，它在 FF、Chrome 和 Safari 中运行良好，具有多种分辨率。但是在 IE9 中，浏览器最大化时导航栏不显示。如果您恢复并稍微增加宽度，它会显示，再次扩展并消失。我不知道为什么。使用我已经确定它适用于 1024x768 分辨率的工具，但不适用于 1280x800 或更高的分辨率。

[这是网站的链接](https://sites.google.com/a/consultcambridge.com/consultcambridge/expertise)：

PS 导航链接将不起作用，因为站点不是“实时”的。

# xcode - 如何在按下按钮时同时传递纬度和经度坐标并在下一个地图视图上放置图钉？

> ID：12898555
> 
> 赞同：0
> 
> 时间：2012-10-15T15:09:22.937
> 
> 标签：xcode, nsstring, latitude-longitude, cllocation

如果有人能在最后一段帮助我，我觉得我已经接近了！

目前我有以下内容：

```
{
   CLLocationCoordinate2D location;
   location.latitude = (double) 44.4758;
   location.longitude = (double) -73.2125;

   str = [[NSNumber numberWithDouble:location.longitude] stringValue];

   viewController.stringToDisplay = str;
} 
```

现在，这是通过经度值，但它当然不会让我包括纬度。我可以写什么以将两者包含在同一行中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:56:27.787

例如：

```
 str = [NSString stringWithFormat:@"%f, %f", location.latitude, location.longitude]; 
```

或更易于阅读：

```
 str = [NSString stringWithFormat:@"%.2f, %.2f", location.latitude, location.longitude]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:24:12.097

做到了！！很高兴。我根据按下的按钮从前一个视图传递不同的坐标，并使用 IF 语句将这些坐标固定在下一个视图上。对于编程大师来说，这无疑是一件简单的事情，但我没有经验，所以我很高兴:)

```
-(void)viewWillAppear:(BOOL)animated

{
  CLLocationCoordinate2D location;
  NSLog(@"self.stringToDisplay = %@", self.stringToDisplay);

  if ([self.stringToDisplay isEqualToString: @"44.48, -73.21"])
  {
    location.latitude = (double) 44.4758;
    location.longitude = (double) -73.2125;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Burlington, VT" andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];
  }

  if ([self.stringToDisplay isEqualToString: @"51.50, -0.14"])
  {
    location.latitude = (double) 51.5010;
    location.longitude = (double) -0.1425;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Buckingham Palace" andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];
  }
} 
```

# c# - 解码百分比编码的字符串 c# .net

> ID：12898556
> 
> 赞同：14
> 
> 时间：2012-10-15T15:09:34.773
> 
> 标签：c#, .net

如何解码如下字符串：

name1=ABC&userId=DEF&name2=zyx&payload=%3cSTAT+xmlns%3axsi%3d%22http%3a%2f%2fwww.w3.org%2f2001%2fXMLSchema-instance%22%3e%3cREQ...

背景：我接受 HTTP POST（基本上是名称值对），然后将字节数组转换为字符串：

```
Encoding.UTF8.GetString(response, 0, response.Length); 
```

我已经尝试过 WebUtility 和 HttpUtility 的 HtmlDecode 方法，但似乎得到了相同的字符串。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T15:13:13.250

这应该为您完成工作：

```
System.Uri.UnescapeDataString(str) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-15T15:12:42.103

你试过`HttpUtility.UrlDecode`吗？

见[这里](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)。

请注意，此函数的作用与`HttpUtility.HtmlDecode`.

编辑：回答关于和之间差异的`UrlDecode`问题`UnescapeDataString`：

引用[MSDN](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring.aspx)页面`UnescapeDataString`：

> 许多 Web 浏览器将 URI 中的空格转义为加号（“+”）字符；但是， UnescapeDataString 方法不会将加号字符转换为空格，因为这种行为不是所有 URI 方案的标准。

`UrlDecode`虽然确实处理了这些，但如果您尝试以下操作，您会得到不同的响应：

```
string a = Uri.UnescapeDataString(".Net+Framework"); //returns ".Net+Framework"
string b = HttpUtility.UrlDecode(".Net+Framework"); //returns ".Net Framework" 
```

因此，为了获得更好的覆盖率，HttpUtility.UrlDecode 似乎是更好的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T15:13:01.450

[HttpServerUtility.UrlDecode](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)是你想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T15:14:38.350

```
var result = System.Web.HttpUtility.UrlDecode("name1=ABC&userId=DEF&name2=zyx&payload=%3cSTAT+xmlns%3axsi%3d%22http%3a%2f%2fwww.w3.org%2f2001%2fXMLSchema-instance%22%3e%3cREQ..."); 
```

给

```
name1=ABC&userId=DEF&name2=zyx&payload=<STAT xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><REQ... 
```

我希望这就是你想要的。

# clickonce - ClickOnce 发布 Signtool 错误

> ID：12898559
> 
> 赞同：6
> 
> 时间：2012-10-15T15:09:44.990
> 
> 标签：clickonce, code-signing-certificate

首先我想说：

*   我的证书没有过期（它在 2039 年 12 月 31 日过期）
*   我的证书没有改变
*   我不想使用新证书，因为它需要我在所有客户端计算机上重新安装我的应用程序。

突然，当我尝试发布我的 WCF/WPF 解决方案时，我得到：

> 错误 2 签名时出错：无法签名 bin\Debug\app.publish\setup.exe。SignTool 错误：签名者的证书对签名无效。SignTool 错误：尝试签名时出错：bin\Debug\app.publish\setup.exe

有没有其他人使用无论如何都应该有效的证书来体验这一点？关于可能是什么问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:27:37.740

如前所述，对于 Windows 7 KB2661254（代码密钥长度 < 1024）是罪魁祸首，但如果您运行的是 Windows 8，则无法卸载 KB，您需要发现长度 < 1024 的密钥并修复它们。

请参阅知识库文章

[http://support.microsoft.com/kb/2661254](http://support.microsoft.com/kb/2661254)

更新：事实证明，它是 512 位自签名证书的根证书，而不是实际证书本身。我在 Windows 8 上重新生成，新证书一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:42:22.040

正如[凯文](https://stackoverflow.com/users/48954/kevin)建议的那样，我卸载了问题开始那天（2012 年 10 月 12 日）获得的所有 Windows 更新，并且能够正常发布。谢谢凯文。我很遗憾在删除它们之前没有得到我删除的 KB 列表。:(

# javascript - 正则表达式：匹配单词和特殊字符，除非在引号中

> ID：12898562
> 
> 赞同：1
> 
> 时间：2012-10-15T15:09:51.350
> 
> 标签：javascript, regex

我已经查看了几乎相同的其他问题，并且通过一些定制，我找到了一个适用于[RegExr](http://regexr.com?32fd3)的解决方案。问题是它在 Javascript 中不起作用。

表达：`([^\s]*"[^"]+"[^\s]*)|[^"]?\w+[^"]?`

测试字符串：`+w1 @w2 (w3 (w4) @"w5 6"`

预期结果：`['+w1', '@w2', '(w3', '(w4)', '@"w5 w6"']`

Javascript代码：`console.log(/([^\s]*"[^"]+"[^\s]*)|[^"]?\w+[^"]?/g.exec(test_str));`

Javascript 结果：（`["+w1 ", undefined]`在 FF15 和 Chrome 22 中测试）

我查看了 MDN 上的文档，但除了全局标志之外，没有其他相关标志。只是为了尝试，我添加了多行和不区分大小写的标志，但它们没有用。

知道是什么让它在 Javascript 中中断，而它似乎在 RegExr 中工作？（而且 Flash 的 Actionscript 不也是 ECMAScript，所以 RegExr 不应该使用相同的正则表达式引擎吗？）在 RegExr 中，唯一启用的标志是全局标志。

**编辑：**另一个问题是`"w1 \"w2\" w3"`它将被匹配为两个单词，而它应该是一个单词。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:25:05.480

尝试：

```
console.log('+w1 @w2 (w3 (w4) @"w5 6"'.match(/[^"\s]+(?:".*"\S*)?/g)); 
```

# r - 根据日期计算对数据集进行子集化

> ID：12898566
> 
> 赞同：-1
> 
> 时间：2012-10-15T15:10:05.220
> 
> 标签：r

我有这个数据框。我想从中创建另一个数据框，其中包括 Trade_Date、Trades 和 Rejected。被拒绝的字段需要具有来自 Closing_Date 的值，该值必须满足此条件 - Trade_Date + 1 天。

X

```
Trade_Date   Trades   Closing_Date   Rejected
9/16/2011   4126528     9/16/2011   15
9/19/2011   2565282     9/17/2011   33
9/20/2011   2953963     9/20/2011   30
9/21/2011   3255800     9/21/2011   6
9/22/2011   2862185     9/22/2011   21
9/23/2011   2405590     9/23/2011   30
9/26/2011   3196284     9/24/2011   30
9/27/2011   3761367     9/27/2011   15
9/28/2011   3198177     9/28/2011   9
9/29/2011   3255345     9/29/2011   6
9/30/2011   3810356     9/30/2011   12
10/3/2011   3817093     10/1/2011   21 
```

例如，我的下一个 df 将需要是这样的：

```
Trade_Date      Trades    Rejected
9/16/2011       4126528   33
9/19/2011       2565282   30
9/20/2011       2953963   6 
```

ETC

由于有很多行，我需要以编程方式执行此操作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:29:12.247

您的示例数据框中的所有行都不符合您指定的条件，因此我将对其稍作更改以演示一种简单的方法：

```
#Read the data in
dat <- read.table(text = "Trade_Date   Trades   Closing_Date   Rejected
 9/16/2011   4126528     9/16/2011   15
 9/19/2011   2565282     9/17/2011   33
 9/20/2011   2953963     9/20/2011   30
 9/21/2011   3255800     9/21/2011   6
 9/22/2011   2862185     9/22/2011   21
 9/23/2011   2405590     9/23/2011   30
 9/26/2011   3196284     9/24/2011   30
 9/27/2011   3761367     9/27/2011   15
 9/28/2011   3198177     9/28/2011   9
 9/29/2011   3255345     9/29/2011   6
 9/30/2011   3810356     9/30/2011   12
 10/3/2011   3817093     10/1/2011   21",sep = "",header = TRUE)

#Convert to date
dat$Trade_Date <- as.Date(dat$Trade_Date,"%m/%d/%Y")
dat$Closing_Date <- as.Date(dat$Closing_Date,"%m/%d/%Y")

#Alter some rows to meet your criteria
dat$Closing_Date[1:3] <- dat$Trade_Date[1:3] + 1

#Then we can simply subset the data
> dat[dat$Closing_Date == dat$Trade_Date+1,]
  Trade_Date  Trades Closing_Date Rejected
1 2011-09-16 4126528   2011-09-17       15
2 2011-09-19 2565282   2011-09-20       33
3 2011-09-20 2953963   2011-09-21       30 
```

# c# - 如何运行后台进程以响应 VSTO Office 加载项中的选择更改事件？

> ID：12898569
> 
> 赞同：2
> 
> 时间：2012-10-15T15:10:21.320
> 
> 标签：c#, vsto, async-await

我有一个 VSTO 应用程序级加载项，带有我自己的自定义任务窗格。我正在尝试拦截 SelectionChange 事件，并在我的自定义任务窗格中显示与选择相关的信息。我确实知道如何同步进行。

但是，获取要显示的信息的过程很慢，我不想在获取信息时阻止应用程序。此外，用户可能会多次更改选择，如果发生这种情况，我想取消任何正在进行的“获取”操作。

我尝试过等待长时间运行的操作，但由于我没有打开表单，因此[没有同步上下文](http://nitoprograms.blogspot.co.uk/2011/02/synchronizationcontext-odds-and-ends.html)，因此我一尝试就得到 InvalidOperationException（跨线程操作无效）更新我的任务窗格上的控件。

```
async void Application_WindowSelectionChange(PowerPoint.Selection selection)
{
    var results = await MyLongRunningOperation(cancellationTokenSource.Token);

    myControl.Text = DescribeResults(results); // BOOM!
} 
```

克服这个问题的最佳方法是什么？我尝试按照斯蒂芬在上面的链接中建议的那样做，将以下内容放在选择更改事件处理程序的开头：

```
SynchronizationContext.SetSynchronizationContext(new WindowsFormsSynchronizationContext()) 
```

那没有用。突然，我所有的其他事件处理程序都开始出错，说“在创建句柄之前无法调用 BeginInvoke”。*我尝试在每个*事件处理程序的开头放置相同的代码，以防万一这是一个孤注一掷的交易。那也没有用。也许我应该创建*一个* `WindowsFormsSynchronizationContext`对象并将其用于所有处理程序 - 但我知道我现在正抓着稻草。

如果这不起作用，我应该尝试哪些其他方法？仍然是`BeginInvoke`要走的路，还是我可以通过其他方式跳转到 UI 线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:06:29.357

> 突然，我所有的其他事件处理程序都开始出错，说“在创建句柄之前无法调用 BeginInvoke”。

这很好奇。我也抓住了稻草，但试试这个：

```
Control control = new Control();
IntPtr handle = control.Handle; 
```

而不是直接调用`SynchronizationContext.SetSynchronizationContext`。您*可能*需要在每个事件开始时执行此操作。

（取自[此博客条目](http://www.ikriv.com/dev/dotnet/MysteriousHang.html)的想法）。

# jquery - 使用 Jquery 在 DOM 中查找元素并删除

> ID：12898570
> 
> 赞同：2
> 
> 时间：2012-10-15T15:10:23.267
> 
> 标签：jquery

> **可能重复：**
> [使用 Jquery 清除 5 个空 TD](https://stackoverflow.com/questions/12896979/clear-5-empty-tds-with-jquery)

我想在 DOM 中搜索 DOM 专门包含的任何实例（可能是多个）

```
<td></td><td></td><td></td><td></td><td></td> 
```

并在 Jquery 中删除它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:11:37.113

如果你是常量字符串，那么你可以从 html 中删除它，

**[现场演示](http://jsfiddle.net/rajaadil/xVyQM/)**

```
$('#tbl').html($('#tbl').html().replace('<td></td><td></td><td></td><td></td><td></td>', '')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:14:22.077

我建议：

```
var rows = $('tr').filter(function(){
                var that = $(this),
                    len = that.find('td').length;
                return that.find('td:empty').length == len && len == 5;
            }); 
```

参考：

*   [`:empty`选择器](http://api.jquery.com/empty-selector/)。
*   [`filter()`](http://api.jquery.com/filter/).
*   [`find()`](http://api.jquery.com/find/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:12:20.950

这是新的[演示](http://jsfiddle.net/sechou/FPp3s/11/)：

HTML：

```
<table>
<tr>
<td></td><td></td><td></td><td></td><td></td>
</tr>
</table>​ 
```

JS

```
$(function(){

    $.map($("td:empty"),function(elem,i){
        console.log(i);

        var length =5;
        var current = length;
        var $ptr = $(elem);

        while(current>=0){
            if ($ptr.next("td:empty").size() == 1){
                current = current -1;
                $ptr = $ptr.next("td:empty");

            }else{
                break;
            }   
        }
        if(current<= 1 ){ 
            $(elem).siblings("td:empty:lt("+length+")").remove();
            $(elem).remove();                                
        }

    });

});​ 
```

# javascript - 关闭像素化 js 问题

> ID：12898573
> 
> 赞同：0
> 
> 时间：2012-10-15T15:10:28.797
> 
> 标签：javascript, plugins

我正在使用 David Desandro 的 js 插件 Close Pixelate 来像素化网站上的缩略图。

```
 function init() {
        document.getElementById('work-thumb-1').closePixelate([
            { resolution: 10 }
    ]);
    };
    window.addEventListener( 'load', init, false); 
```

我需要定位多个具有相同名称的选择器，所以 getElementById 方法不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:17:41.930

如果您使用的库比这应该更简单，但您也可以仅通过 javascript 来完成，

# 纯Javascript

```
function init() {
    var elems = document.getElementsByName('nameofelements');
    for (var i = 0; i < elems.length; i++) {
        elems[i].closePixelate([
            {resolution: 10}
        ]);
    }
};
window.addEventListener('load', init, false); 
```

# jQuery

```
function init() {
    $('[name="nameofelements"]').each(function() {
        $(this).closePixelate([
            {resolution: 10}
        ]);
    });

};
window.addEventListener('load', init, false); 
```

# ruby - Mongoid::树排序

> ID：12898575
> 
> 赞同：0
> 
> 时间：2012-10-15T15:10:36.513
> 
> 标签：ruby, mongodb, mongoid

我有以下类别模型：

```
class Category
    include Mongoid::Document
    include Mongoid::Tree

    field :title, type: String
    validates :title, presence: true, uniqueness: true, length: {minimum: 2}
end 
```

我存储了以下测试数据：

```
Root 1
    Leaf 1
        Subleaf 1
    Leaf 2
Root 2
    Leaf 3 
```

现在当我调用 Category.all 它返回：

```
Root 1
Leaf 2
Leaf 1
Root 2
Subleaf 1
Leaf 3 
```

但我需要以下订购：

```
Root 1
Leaf 1
Subleaf 1
Leaf 2
Root 2
Leaf 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:52:29.863

`Mongoid::Tree`默认情况下不排序树。相反，它包括一个用于订购的模块。只需将其包含在您的课程中：

```
class Category
  include Mongoid::Document
  include Mongoid::Tree
  include Mongoid::Tree::Ordering

  field :title, type: String
  validates :title, presence: true, uniqueness: true, length: {minimum: 2}
end 
```

那应该已经解决了您的问题。如果没有，请查看`Mongoid::Tree::Traversal`. `Mongoid::Tree`这将为您提供一种`Category#traverse`方法，使您可以在呼吸优先或深度优先（我猜这就是您想要的）遍历之间进行选择。

有关排序和遍历的更多文档，请参阅[http://benediktdeicke.com/mongoid-tree/#Ordering](http://benediktdeicke.com/mongoid-tree/#Ordering)和[http://benediktdeicke.com/mongoid-tree/#Traversal](http://benediktdeicke.com/mongoid-tree/#Traversal)

# java - Java 方法命名约定

> ID：12898585
> 
> 赞同：0
> 
> 时间：2012-10-15T15:11:04.540
> 
> 标签：java

这个问题由两个简单的问题组成：

1.  关于 Java 命名约定的最新文档，1999 年的文档是否可在[Oracle](http://www.oracle.com/technetwork/java/codeconv-138413.html)获得？

2.  您将如何调用一个方法，其唯一目的是创建一个复杂类的新实例，例如，`XmlError`？`createXmlError()`? `generateXmlError()`? `getXmlError()`?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:16:12.733

获取方法*通常*意味着“获取字段的值”，例如；

```
int getTotal() {
    return total;
} 
```

对于构造和返回一个新对象的方法，你所说的几乎是一个`Factory`. Java API 中的工厂使用多种命名约定；`createXXX` `makeXXX` `generateXXX`都出现在一个标准版工厂或另一个。

我会说使用对您最有意义的那个，并坚持下去。保存`get`并`set`用于简单的现场操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:14:28.567

您的 create() 和 generate() 示例似乎是合理的。除非您正在制作用于广泛传播的 API，否则我不会太担心它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T15:16:27.193

1.  如果您使用的是`singleton`课程，那么`getInstance()`我认为这是惯例。
2.  否则，只需扩展`Exception`您要生成的类，然后扔掉它。

# jquery - JQuery .load 和 $this

> ID：12898587
> 
> 赞同：3
> 
> 时间：2012-10-15T15:11:04.890
> 
> 标签：jquery

我对 JQuery .load 有一个小问题，这让我发疯 - 我很确定这很简单，但我已经盯着它看了太久了:)

我有以下内容`.ready(function() {`

```
$('.content_s').load('url/path/aspxpage?dataid='+$(this).attr('data')); 
```

和 1 个或多个`.content_s`带`data="data"`部分的分类 div，但我无法获取数据属性 - 我只是未定义，无论 div 的数量或我设置为数据的内容。aspxpage 被调用好了，只是没有数据属性。

如前所述，我认为我对此视而不见，因此欢迎提出任何建议。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:14:23.613

您需要`.each`在这种情况下使用：

```
$('.content_s').each(function() {
    var $this = $(this);
    $this.load('url/path/aspxpage?dataid='+$this.attr('data'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:15:10.493

在这种情况下，$(this) 不是目标 div。

尝试这个：

`$('.content_s').each(function() { $(this).load('url/path/aspxpage?dataid='+$(this).attr('data')) });`

# php - 是否有可以按键排序的 uasort 替代品？

> ID：12898600
> 
> 赞同：0
> 
> 时间：2012-10-15T15:11:52.393
> 
> 标签：php, arrays, sorting

我正在构建一些非常灵活的东西，它不知道它会排序。这是我正在研究的 REDIS 的一部分。无论如何，我需要通过用户定义的键对数组进行排序。所以这：

```
var $sortme=Array(
  "a"=>array("name"=>"john","yearofbirth"=>2000),
  "b"=>array("name"=>"andre","yearofbirth"=>1994)) 
```

我想按“姓名”或“出生年份”对其进行排序。要按名称排序，我使用这个：

```
uasort($sortme,function($a,$b){return strcmp($a["name"],$b["name"]);} 
```

但我喜欢能够按任何键进行排序，以使事情尽可能灵活。我的第一次尝试是这样，但没有奏效：

```
$sortby="name";
uasort($sortme,function($a,$b){return strcmp($a[$sortby],$b[$sortby]);} 
```

它不起作用的原因是 $sortby 在 sort 函数中不知道。我可以为它定义一个全局变量，但这个解决方案太可怕了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:15:00.487

```
$key = 'yearofbirth';
uasort($sortme,
       function($a,$b) use ($key){
          return strcmp($a[$key],$b[$key]);
       }
      ); 
```

# css - 使用 display:inline-block 时的 CSS 样式问题-chrome

> ID：12898608
> 
> 赞同：0
> 
> 时间：2012-10-15T15:12:21.717
> 
> 标签：css, google-chrome, styling

```
<div class="hi>
    <div class="hello">name</div>
     <div class="world"><img /></div>
</div>
.hi{
    height: auto;
    position: relative;
    text-align: center;
    width: 100%;
 }
 .hello{
      display: inline-block;
      font-size: 16px;
      font-weight: bold;
      height: 22px;
      margin: 3px 0;
      max-width: 80%;
      overflow: hidden;
 }
 .world{
       background: url("***") no-repeat scroll 0 0 transparent;
       display: inline-block;
       height: 13px;
       left: 5px;
       position: relative;
       top: -9px;
       width: 14  
} 
```

问题是当名称超出并应用最大宽度时，世界 div 中的背景图像会出现未对齐（略高于），而未应用最大宽度的名称会正确显示。

这个想法是名称和图像应该在同一行。名称中心对齐，图像旁边。如果名称超过它应该被截断，这样图像就不会显示在下一行。我正在提供背景图像，因为我在图像中有图像。

该问题仅在 chrome 中发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:20:14.737

`max-width: 80%`不会掩盖`<div>`作为块级元素的事实。当宽度没有明确设置时，它总是`width:100%`固有的。如果您将宽度设置`.hello`为`80%`，我想您会看到您所期望的。

# java - 将带有逗号的内容写入 CSV 文件

> ID：12898610
> 
> 赞同：1
> 
> 时间：2012-10-15T15:12:34.123
> 
> 标签：java, string, file-io, csv, apache-poi

我正在使用 Java。我有一个要求。我从数据库中获取 20000 条记录，我需要*将它们写入 CSV 文件。*问题是从数据库中检索到的数据有 22 列，许多值中都会有逗号。

如何使用 Java 将带逗号的值写入 CSV 文件？

另外，我尝试使用 Apache POI 将数据写入 excel，但写入 20000 条记录需要很长时间。所以，我打算将数据写入 CSV 文件。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:16:56.850

如果有嵌入的逗号，请双引号整个文本字段（列）：

```
0, 1, "2,3", 4 
```

无论如何，引用文本值并不是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:38:36.197

我强烈推荐你使用这个不错的库（不是我写的）。[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

它将处理您所有的 CSV 问题。

# ios - iOS 6 中的 JSON 实现

> ID：12898611
> 
> 赞同：0
> 
> 时间：2012-10-15T15:12:38.993
> 
> 标签：ios, database, json

我想问你是否可以使用 iOS 附带的 NSJSONSerialization 来完成所有与 JSON 相关的工作。

它是 SBJson、JSONKit、NextiveJSON 或 TouchJSON 等其他库的合适替代品吗？它们在功能上是否相同？

我有许多 JSON 对象在本地提供我的图表，但现在我将开始查询远程数据库以检索信息并构建这些对象。

你如何做出选择其中一个的决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:21:07.560

是的，它是所有这些的替代品。您根据自己的感受做出决定。我使用 NSJSONSerialization 是因为它存在且易于使用……无需担心下载其他内容。你需要什么“功能”？JSON 解析器只需要做两件事：从对象编码 JSON 并将 JSON 解码为对象。

# mysql - Mysql 索引未使用

> ID：12898615
> 
> 赞同：3
> 
> 时间：2012-10-15T15:12:53.123
> 
> 标签：mysql

我有一张如下表：

描述日志；

```
+-------------------+-------------------------------+------+-----+-------------------+-------+
| Field             | Type                          | Null | Key | Default           | Extra |
+-------------------+-------------------------------+------+-----+-------------------+-------+
| time              | timestamp                     | NO   | MUL | CURRENT_TIMESTAMP |       |
| severity          | enum('0','1','2','3','4','5') | NO   |     | 1                 |       |
| user_id           | bigint(20)                    | YES  | MUL | NULL              |       |
| user_ip           | varchar(15)                   | YES  | MUL | NULL              |       |
| module            | varchar(30)                   | NO   |     | NULL              |       |
| message           | text                          | NO   |     | NULL              |       |
| blog_id           | bigint(20)                    | NO   | MUL | NULL              |       |
| event_type        | varchar(255)                  | YES  | MUL | NULL              |       |
| post_id           | bigint(20)                    | YES  |     | NULL              |       |
| data              | longtext                      | YES  |     | NULL              |       |
| data_integer      | tinyint(4)                    | YES  |     | NULL              |       |
| data_integer_type | varchar(100)                  | YES  |     | NULL              |       |
+-------------------+-------------------------------+------+-----+-------------------+-------+ 
```

该表具有以下索引：

```
show indexes from log;
+-------------+------------+----------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table       | Non_unique | Key_name                   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------------+------------+----------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| log |          1 | log_event_type_idx |            1 | event_type  | A         |          30 |     NULL | NULL   | YES  | BTREE      |         |
| log |          1 | log_user_id_idx    |            1 | user_id     | A         |       10938 |     NULL | NULL   | YES  | BTREE      |         |
| log |          1 | log_blog_id_idx    |            1 | blog_id     | A         |       24064 |     NULL | NULL   |      | BTREE      |         |
| log |          1 | log_user_ip_idx    |            1 | user_ip     | A         |       24064 |     NULL | NULL   | YES  | BTREE      |         |
| log |          1 | log_time_idx       |            1 | time        | A         |      240647 |     NULL | NULL   |      | BTREE      |         |
+-------------+------------+----------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

当我查询 8 月或 9 月的数据时，它使用索引并且工作正常。但是对于 Oct 数据，它不使用索引。表中最大日期为“2012-10-15”。我添加了解释计划。

```
explain
select *
from log
where time >= '2012-08-01 00:00:00'  AND time < '2012-09-01 00:00:00'

+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+
| id | select_type | table       | type  | possible_keys        | key                  | key_len | ref  | rows  | Extra       |
+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+
|  1 | SIMPLE      | log | range | log_time_idx | log_time_idx | 4       | NULL | 57306 | Using where |
+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+
1 row in set (0.04 sec)

explain
select *
from log
where time >= '2012-09-01 00:00:00'  AND time < '2012-10-01 00:00:00'

+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+
| id | select_type | table       | type  | possible_keys        | key                  | key_len | ref  | rows  | Extra       |
+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+
|  1 | SIMPLE      | log | range | log_time_idx | log_time_idx | 4       | NULL | 42569 | Using where |
+----+-------------+-------------+-------+----------------------+----------------------+---------+------+-------+-------------+

explain
select *
from log
where time >= '2012-10-01 00:00:00'  AND time < '2012-11-01 00:00:00'

+----+-------------+-------------+------+----------------------+------+---------+------+--------+-------------+
| id | select_type | table       | type | possible_keys        | key  | key_len | ref  | rows   | Extra       |
+----+-------------+-------------+------+----------------------+------+---------+------+--------+-------------+
|  1 | SIMPLE      | log | ALL  | log_time_idx | NULL | NULL    | NULL | 481300 | Using where |
+----+-------------+-------------+------+----------------------+------+---------+------+--------+-------------+ 
```

你知道问题是什么吗？我正在使用 Mysql 5.1.48。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:11:31.013

MySQL 似乎讨厌具有高基数的范围。`DATETIME`这在处理值时会很快显示出来。

`DATE`您可以通过在表中为查询添加一列来减少基数。基数会低很多，MySQL 将更有可能使用索引。

# c# - 多个 Windows 用户帐户上的一个实例应用程序

> ID：12898616
> 
> 赞同：6
> 
> 时间：2012-10-15T15:12:53.630
> 
> 标签：c#, .net, vb.net, mutex, user-accounts

我使用 Mutex 的解决方案来禁止同时打开多个应用程序实例

但是，当我在 Windows 中使用 Switch User 并打开另一个用户并尝试打开应用程序时，它正常打开并且无法检测到它正在其他帐户上运行

我怎么能解决这样的问题并不允许在登录的 Windows 用户帐户中打开应用程序

我正在使用这样的代码

```
Dim onlyInstance As Boolean = False
_mutex = New Mutex(True, "Application Name", onlyInstance)
If Not onlyInstance Then
   MessageBox.Show("Application is already running.", "Error.")
   System.Diagnostics.Process.GetCurrentProcess.Kill()
   System.Diagnostics.Process.GetCurrentProcess.WaitForExit()
End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:18:57.577

如果您将互斥锁设为全局，则所有用户都可以看到它：

```
mutexName = String.Format("Global\\{{{0}}}", "Application Name"); 
```

从[文档](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)中：

> 命名系统互斥体可以有两个可见性级别。如果其名称以前缀“Global\”开头，则互斥锁在所有终端服务器会话中可见。如果其名称以前缀“Local\”开头，则互斥锁仅在创建它的终端服务器会话中可见。在这种情况下，具有相同名称的单独互斥锁可以存在于服务器上的每个其他终端服务器会话中。如果您在创建命名互斥锁时未指定前缀，则它采用前缀“Local\”。在终端服务器会话中，名称仅在前缀上有所不同的两个互斥体是单独的互斥体，并且它们对终端服务器会话中的所有进程都是可见的。即前缀名称“Global\”和“Local\”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:34:07.953

我使用了 30 年的技术是让应用程序在启动时尝试打开（并保持打开）一个已知文件以进行独占访问，然后在无法打开该文件时退出。

我知道这是严重的低技术和复古，但它很简单，始终支持并且几乎可以*在任何地方*工作。我已经在超过六种操作系统和十几种不同的编程语言中成功地在生产代码中使用了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:17:52.400

我不认为其他非管理员用户可以看到其他用户的进程。

我的建议是编写一个在系统空间中运行的 Windows 服务。然后您的程序可以连接到它并确定是否启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:54:19.267

看看[这个针对 WPF 应用程序的解决方案](http://wpfinstanceawareapp.codeplex.com/)，它使用 Mutex 来建立唯一性，但也使用 WCF 允许新实例与主实例通信。

# vim - 如果光标不在范围内，则重绘

> ID：12898617
> 
> 赞同：1
> 
> 时间：2012-10-15T15:12:55.957
> 
> 标签：vim

我喜欢使用`nnoremap`for `n`to `nzz`，但是当下一场比赛正好在我现在所在的比赛之下，或者两行之下时，当我按下 时，我会迷失方向`n`。我想要一个命令来做什么`zz`，但前提是光标当前不在中间 10 行中。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:19:38.440

```
nmap            n                          <Plug>VimrcSearch<Plug>VimrcZZifnotinmiddle
nnoremap        <Plug>VimrcSearch          n
nnoremap <expr> <Plug>VimrcZZifnotinmiddle (abs(winline()-winheight(0)/2)>5 ? 'zz' : '')."\<C-l>" 
```

以上三行是以下解决方法的结果：

1.  第一`<Plug>`行和第二行是 a) 避免重映射（实际上是为了避免记住部分可重映射映射未重映射的情况） b) 遵循规则“当使用可重映射映射时，{rhs} 中的每个符号必须以已知方式重映射”。
2.  第二`<Plug>`和第三行在那里，因为`<expr>`必须在切换到新位置*后启动映射。*我无法放入`n`映射`<expr>`，因为`zz`在切换到新位置之前将评估带有条件的第二部分。

有一个替代方案：

```
 nnoremap <silent> n n:if abs(winline()-winheight(0)/2)>5<bar>execute 'normal! zz'<bar>endif<CR> 
```

，但`<expr>`映射是我想到的第一件事，因此我会保留它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:20:56.613

对于一个简单的解决方案，您可能需要考虑设置`'scrolloff'`为较大的东西。这实际上并不能完全解决您的问题，但它非常简单，因此您可能想先尝试一下。

如果这不令人满意，那么我们可以尝试更重的方法并在你的`~/.vimrc`.

```
nnoremap <silent> n :call Recenter('n', 10)<cr>
nnoremap <silent> N :call Recenter('N', 10)<cr>

function! Recenter(cmd, tolerance)
  let ws = line('w0')
  let distance = line('w$') - ws
  exe 'norm! ' . a:cmd
  let tolerance = a:tolerance / 2
  let current_offset = line('.') - line('w0')
  if line('w0') != ws || (current_offset < (distance/2-tolerance) || current_offset > (distance/2+tolerance))
    norm! zz
  endif
endfunction 
```

有关更多信息，请参阅：

```
:h 'scrolloff'
:h line()
:h zz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T17:50:22.307

[http://vim.wikia.com/wiki/Make_search_results_appear_in_the_middle_of_the_screen](http://vim.wikia.com/wiki/Make_search_results_appear_in_the_middle_of_the_screen)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T17:49:07.827

```
function! CenterWhenNotAtTheMiddle()
    let currentLine = winline() 
    let offsetFromMiddleLine = 5
    let lineBeforeTenMiddleLines = winheight(0) / 2 - offsetFromMiddleLine
    let lineAfterTenMiddleLines = winheight(0) / 2 + offsetFromMiddleLine
    if currentLine < lineBeforeTenMiddleLines 
        normal zz
    else
        if currentLine > linesAfterTenMiddleLines
            normal zz
        endif
    endif
endfunction

nnoremap n n:call CenterWhenNotAtTheMiddle()<Cr>
nnoremap N N:call CenterWhenNotAtTheMiddle()<Cr> 
```

# c++ - 是否有 WinAPI 函数“ExistFile”？

> ID：12898618
> 
> 赞同：1
> 
> 时间：2012-10-15T15:12:59.027
> 
> 标签：c++, winapi, function, visual-studio-2008

有没有像 ExistFile(...) 和 DeleteFile(...) 这样的 WinAPI 函数。如果有的话，我该如何使用它们？问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:14:10.143

[PathFileExists 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773584%28v=vs.85%29.aspx)：

> 确定文件系统对象（如文件或文件夹）的路径是否有效。

[删除文件功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363915%28v=vs.85%29.aspx)：

> 删除现有文件。

两者都非常简单，它们的使用也是如此。

# google-app-engine - Objectify - App Engine 存储列表

> ID：12898620
> 
> 赞同：1
> 
> 时间：2012-10-15T15:13:02.213
> 
> 标签：google-app-engine, objectify

我想`List<P>`在我的实体中拥有`P`：

```
@Entity
@Index
public class P {
    @Id Long id;
    String email;
    List<P> list = new ArrayList<P>();
} 
```

但是每次我插入新实体时，我都可以在数据存储查看器中看到`email`和`id`，但没有`list`：/列表有什么特殊的工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:18:16.263

您不能在 P 实体中包含 P 列表来进行客观化。不能有任何循环依赖。

您还需要使用 @Embed 关键字在实体中嵌入实体。看这里：[http ://code.google.com/p/objectify-appengine/wiki/Entities#Embedded_Collections_and_Arrays](http://code.google.com/p/objectify-appengine/wiki/Entities#Embedded_Collections_and_Arrays)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:49:10.120

我的建议是分别存储每个实体`P`，只保留`P`对它“包含”的其他实体的引用。所以，你可以有类似下面的东西：

```
@Entity
@Index
public class P {
    @Id Long id;
    String email;
    List<Key<P>> list = new ArrayList<Key<P>>();
} 
```

这样，您仍然可以访问您的所有“子”实体，但没有主`P`实体中的所有信息。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-25T15:32:35.493

更详细的答案：

```
package com.netcomps.objectify_test;

import com.googlecode.objectify.annotation.Entity;
import com.googlecode.objectify.annotation.Id;
import com.googlecode.objectify.annotation.Index;
import com.googlecode.objectify.annotation.Parent;
import com.googlecode.objectify.Key;

import java.lang.String;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

@Entity
public class User {
  @Parent Key<World> theWorld;
  @Id public Long id;

  public String email;
  public String name;
  @Index public Date date;
  //public ArrayList<User> friends;
  List<Key<User>> friends;

  /**
   * Simple constructor just sets the date
   **/
  public User() {
    date = new Date();
  }

  /**
   * A connivence constructor
   **/
  public User(String world, String name) {
    this();
    if( world != null ) {
        theWorld = Key.create(World.class, world);  // Creating the Ancestor key
    } else {
        theWorld = Key.create(World.class, "default");
    }
    this.name = name;
  }

  /**
   * Takes all important fields
   **/
  public User(String book, String content, String email) {
    this(book, content);
    this.email = email;
  }

  public void addFriend(User friend) {
      if (friends == null) {
          friends = new ArrayList<Key<User>>();
      }
      Key<User> f = Key.create(theWorld, User.class, friend.id);
      friends.add(f);
  }

} 
```

# database - 数据库提交性能

> ID：12898638
> 
> 赞同：0
> 
> 时间：2012-10-15T15:13:52.777
> 
> 标签：database, performance, hibernate, jpa

我开发了一个应用程序，最近我突然想到了。以下哪项具有更好的性能？

1.  执行 1000 个实体的单次提交。
2.  每次提交时使用 50 个实体执行 20 次提交。

您认为它的实施可靠性如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:19:02.590

知道的唯一方法是测试 - 您需要多次测试这两个选项，并使用真实数据来找出哪个会表现更好。

然而，一般来说，昂贵的资源是

*   建立数据库连接
*   通过网络传输数据

由于数据量相同，您只需使用第二个选项创建多个连接。这可能比您的第一个选项执行得更差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:07:11.453

通常，数据库面向基于集合的操作，你一次做的越多，你的整体性能就越好（即我的一般猜测是选项 1 会是最快的）。当然有限制，不同的数据库表现不同。例如，您在任何时候未提交的工作越多，您的日志文件就必须越大。如果中间出现问题，您还需要权衡回滚多个批次的额外复杂性。

由于您使用的是休眠，您可以将`batch-size`参数设置为各种不同的值，以查看最适合您的值。我很幸运，SQLite 中的值为“20”，MySQL 中的值为“100”。

# php - 如何使用 Facebook 应用访问令牌？

> ID：12898651
> 
> 赞同：2
> 
> 时间：2012-10-15T15:14:46.597
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk

在过去的几天里，我读了很多书，我确信我学到了很多东西。所有这一切都是由于 Facebook 文档在整个网络上传播（在不好的意义上），使人们寻找信息并尝试很多事情。

我做了一些事情，比如：

*   发布到页面的墙（图像、链接、文本）
*   发布到个人资料的墙

所以，我考虑过为页面创建一种自动海报。但是，想象一下。我们需要访问令牌，那些不会过期的。

好的，没问题。根据我一直在阅读的内容，App Access Tokens 会解决这个问题，然后我可以使用脚本运行 cron！

但是它应该如何使用访问令牌运行发布呢？

目前，使用用户令牌，如果可以检索登录用户的 id，我正在使用此代码。

```
FB.api('/<?=$album_id?>/photos?access_token=<?=$fanpage_token?>', 'post', {
    message: ementa,
    url: selected_image
    }, function(response) {
  if (!response || response.error) {
    alert('Falhou a publicar a ementa com imagem');
  } else {
    alert('Page Post ID: ' + response.id);
  }
}); 
```

我已经从 Graph API Explorer 手动获得了粉丝页面令牌，因为这将被 cronjob 使用。

我以前也有专辑ID。

我如何将它与 App Token 一起使用？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:26:35.600

首先，您可以在 php 中获取扩展的用户令牌（持续 60 天）

```
$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            'fileUpload' => true
        ));     
$facebook->setExtendedAccessToken(); 
```

然后`$facebook->getAccessToken()`将其存储到数据库中；

之后，如果您想在适当的用户墙上发布内容，请创建 $facebook 对象，设置现有访问令牌并执行操作...

```
$facebook = new Facebook(array(
        'appId' => $appId,
        'secret' => $appSecret,
        'fileUpload' => true
     ));
//set token 
    $facebook->setAccessToken($fbAccessToken);
    $facebook->api('/me/photos','post', $data); 
```

这将自动与 cron 作业一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:28:59.443

**在对 Facebook 应用程序 API 的使用进行了长时间的研究之后，感谢cbaclig**，我终于发现应用程序无法控制某些东西，而只是有权执行诸如检查页面洞察、进行实时更新和一些东西之类的事情像那样。

我在[这个链接](https://github.com/arsduo/koala/issues/62)中发现了这一点。

引用链接中的答案（以防它离线）：

> 似乎搜索方法需要一个实际的用户访问令牌，而不仅仅是您在示例中使用的应用程序访问令牌。我用登录用户的访问令牌尝试了相同的查询，它工作正常。[https://github.com/arsduo/koala/wiki/OAuth](https://github.com/arsduo/koala/wiki/OAuth)上的第一个示例描述了获取用户访问令牌的不同方法（通过 OAuth 重定向、Javascript SDK 等），您应该能够使用这些方法来制作您的查询。
> 
> 通常，应用访问令牌仅用于特定于应用的事情，例如获取应用的洞察数据、注册实时更新、生成测试用户等。
> 
> 让我们知道这是否有帮助！

**编辑 11/11/12：** 我终于发现页面访问令牌可以访问 publish_stream 和 manage_pages，这将允许他们使用永不过期的访问令牌进行发布。

您需要使用用户的扩展访问令牌获取粉丝页面访问令牌。那个永远不会过期，然后你可以用它来永远作为页面发出请求。

# objective-c - iOS Simulator 访问测试资源

> ID：12898655
> 
> 赞同：0
> 
> 时间：2012-10-15T15:15:04.990
> 
> 标签：objective-c, cocoa-touch, unit-testing, ios-simulator

我目前正在为我的应用程序实施一些简单的单元测试。

一个简单的测试用例是用一个预定义的文件实例化一个 AVAudioPlayer。该测试在设备上完美运行。但是，如果我使用模拟器测试应用程序，显然使用了其他文件夹结构，因为测试资源没有复制到 tmp 文件夹。

这是手机上使用的路径：

```
soundPath = [[NSString alloc] initWithFormat:@"%@Tests.octest/%@", NSTemporaryDirectory(), fileName]; 
```

如果我在模拟器上，我已经实现了一个简单的检查：

```
 if (TARGET_IPHONE_SIMULATOR)
        soundPath = @"";
    else
      ... 
```

那么如果我在模拟器上应该使用哪条路径呢？（我知道我可以使用硬编码的资源路径，但是这个项目将在不同的计算机上运行，​​所以我不能把它放在那里..）

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:48:11.177

您使用了错误的方法。

您可以使用以下方法获取捆绑路径：

```
NSBundle *bundle = [NSBundle bundleForClass:[self class]];
soundPath = [bundle bundlePath]; 
```

这将返回整个路径（包括 Tests.octest）

HTH 马蒂亚斯

# video - 如何使用 ffmpeg 加快屏幕截图的实时流？

> ID：12898659
> 
> 赞同：1
> 
> 时间：2012-10-15T15:15:13.790
> 
> 标签：video, ffmpeg, streaming, vlc

我正在尝试将一台计算机的桌面流式传输到内部网络上的另一台计算机。我正在尝试在发送端使用 ffmpeg，在接收端使用 VLC。我正在使用屏幕捕获记录器作为视频输入设备。我一直在尝试命令：`ffmpeg -f dshow -i video="screen-capture-recorder" -f mpegts udp://host:port`使用此命令，接收机器会有 2-5 秒的延迟。我需要将延迟降低到不到一秒。

有人对如何减少延迟有任何建议吗？

# vb6 - Complex IF THEN statements in VB6

> ID：12898661
> 
> 赞同：3
> 
> 时间：2012-10-15T15:15:19.057
> 
> 标签：vb6

> **Possible Duplicate:**
> [Does VB6 short-circuit complex conditions?](https://stackoverflow.com/questions/4014918/does-vb6-short-circuit-complex-conditions)

I am curious about how IF statements are executed in VB6. For example if I have the statement

```
If x And y Then
    'execute some code
End If 
```

Does the code move on if `x` is not true? Or does it go ahead and evaluate `y` even though there is no logical point?

Another example

```
If x Or y Then
    'execute some code
End If 
```

Does the code continue and evaluate `y` if `x` is true?

EDIT: Is there a way to avoid nested `IF` statements if I want to evaluate very complex conditions and I don't want to waste CPU time?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:16:41.060

What you are describing is short circuiting logic, and VB6 doesn't have it...

For example, in VB.Net you might write

```
If x AndAlso y then... 
```

In this case `y` is not tested if `x` turns out to be false.

In your VB6 example, you'll get a `Object or With block variable not set` error if you try something such as:

```
Dim x as Object
If Not x Is Nothing And x.y=1 Then 
```

Since object x has not been instantiated.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T15:46:16.407

An unwieldy or-like statement that exhibits short circuiting behaviour:

```
select case True
   case a(), b(), c()
      '//if a returns true b & c are not invoked, if b returns true a & b were invoked
   case else
      ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:40:40.010

To answer your edit - avoiding nested IF statements, you can use Select Case, covered in the latter half of [this article](http://www.vb6.us/tutorials/learn-if-else-and-select-statements-vb6).

Code snippet from the article:

```
Select Case strShiftCode
   Case "1" 
      sngShiftRate = sngHourlyRate
   Case "2" 
      sngShiftRate = sngHourlyRate * 1.1
   Case "3"
      sngShiftRate = sngHourlyRate * 1.5
   Case Else
      Print "Shift Code Error"
End Select 
```

# ios - iOS 共享 UIMenuController 可能会缓存 UIMenuItem

> ID：12898662
> 
> 赞同：1
> 
> 时间：2012-10-15T15:15:21.073
> 
> 标签：ios, caching, ios6, uimenucontroller

我认为下面的图片可以很好地描述这个问题...... [https://www.dropbox.com/s/pd1syth3gce6qh7/ios_uimenucontroller.png](https://www.dropbox.com/s/pd1syth3gce6qh7/ios_uimenucontroller.png)

我也在这里复制相应的代码部分：

```
CGPoint point = [sender locationInView:self];
selectedLine = [self lineAtPoint:point];

if(selectedLine) {
    [self becomeFirstResponder];

    UIMenuController *menuController = [[UIMenuController sharedMenuController] retain];
    NSLog(@"count: %d", [[menuController menuItems] count]);
    UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"???" action:@selector(delete:)];
    [menuController setMenuItems:[NSArray arrayWithObjects: menuItem, nil]];
    NSLog(@"count: %d", [[menuController menuItems] count]);

    for (UIMenuItem *item in [menuController menuItems]) {
        NSLog(@"%@", [item title]);
    }

    [menuController setTargetRect:CGRectMake(point.x, point.y, 2, 2) inView:self];
    [menuController setMenuVisible:YES animated:YES];

    [menuController release];
    [menuItem release];
} else {
    [[UIMenuController sharedMenuController] setMenuVisible:NO animated:YES];
}

[linesInProcess removeAllObjects];
[self setNeedsDisplay]; 
```

* * *

**控制台输出：**
2012-10-15 14:02:16.450 TouchTracker[8808:c07] 点击
2012-10-15 14:02:16.455 TouchTracker[8808:c07] 计数：0
2012-10-15 14:02:16.455 TouchTracker [8808:c07] 计数：1
2012-10-15 14:02:16.456 TouchTracker[8808:c07] ???
2012-10-15 14:02:16.459 TouchTracker[8808:c07] 线发布

* * *

UIMenuController 中只添加了一个 UIMenuItem，运行时在 menuItems NSArray 中也只有一个，但模拟器中出现了两个菜单项。

如果我点击删除项目，它会发送*删除：*消息给自己。其实之前的标题是“删除”，看起来好像被缓存了。

已经尝试在 iPhone 模拟器上*重置内容和设置。*还删除了 DerivedData 文件夹的内容......还没有解决方案。也将很快在设备上进行测试。

你有什么主意吗？

在这里您可以找到完整的项目： [https ://www.dropbox.com/s/wg9ol63aa05px26/TouchTracker.zip](https://www.dropbox.com/s/wg9ol63aa05px26/TouchTracker.zip)

在此先感谢 Gabor Orosz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:49:22.937

“删除”是始终可见的系统菜单项。您的自定义菜单项已添加到其中。从[UIMenuController 类参考](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UIMenuController_Class/UIMenuController.html)：

> 删除菜单项已添加到系统菜单项集中。点击它会调用 UIResponderStandardEditActions 操作方法 delete:，它也在 iOS 3.2 中添加。

# c# - 阻塞主线程，直到所有异步调用完成

> ID：12898666
> 
> 赞同：0
> 
> 时间：2012-10-15T15:15:31.913
> 
> 标签：c#, .net-4.0, asynchronous, httpwebrequest

这个问题对如何执行异步有一个很好的[答案](https://stackoverflow.com/questions/202481/how-to-use-httpwebrequest-net-asynchronously/202896#202896)`HttpWebRequest`。

我有一个要使用此方法异步获取的 50k+ URL 的列表。我遇到的问题是主线程将在所有异步请求完成之前完成并退出。

我发现`ManualResetEvent`可以用来`WaitOne()`调用`Set()`回调方法。如果我只做一个请求，这将非常有用。不确定如何处理许多请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:26:52.427

您可以使用 TPL：

```
using System;
using System.IO;
using System.Linq;
using System.Net;
using System.Threading.Tasks;

class Program
{
    static void Main(string[] args)
    {
        var urls = new[] 
        { 
            "http://www.google.com", 
            "http://www.yahoo.com" 
        };

        var tasks = urls.Select(url =>
        {
            var request = WebRequest.Create(url);
            return Task
                .Factory
                .FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, url)
                .ContinueWith(t =>
                {
                    if (t.IsCompleted)
                    {
                        using (var stream = t.Result.GetResponseStream())
                        using (var reader = new StreamReader(stream))
                        {
                            Console.WriteLine("-- Successfully downloaded {0} --", t.AsyncState);
                            Console.WriteLine(reader.ReadToEnd());
                        }
                    }
                    else if (t.IsFaulted)
                    {
                        Console.WriteLine("There was an error downloading {0} - {1}", t.AsyncState, t.Exception);
                    }
                });
        }).ToArray();

        Task.WaitAll(tasks);
    }
} 
```

# php - php中的if和else语句

> ID：12898668
> 
> 赞同：-5
> 
> 时间：2012-10-15T15:15:42.603
> 
> 标签：php, mysql

谁能帮我解决这个问题。我正在尝试使它在 mysql 表中的值 = 1 时显示图像。我已经覆盖了该位并显示了图像。有没有办法包含一个 if 或 else 语句来说明 mysql 表中的值是否为 0 然后显示不同的图像？

谢谢。

```
<?php
        $get_social_set = get_social();

        while ($social = mysql_fetch_array($get_social_set)) 

        {

    ?>

<table width="100%" border="0">
  <tr>
    <td width="10">&nbsp;</td>
    <td width="30"><?php echo"
            <img width=30px heigh=24px src=\"assets/img/icons/tick.png\"/>"; } ?></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:16:44.057

```
if ($social['name_of_field_youre_checking'] == 0) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:23:32.230

将图像文件命名为 foreg：tick0.png、tick1.png 并使用“SHOW”下面的代码作为您的数据库字段名：

```
 <?php echo"<img width=30px heigh=24px src=\"assets/img/icons/tick".$social['SHOW'].".png\"/>"; } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:20:21.540

像这样的东西应该在 php 文件中工作：

```
<?php

$image = false;
// get results from database
// process results
if ( $results === 1) {
    $image = 'tick.png';
} else {
    $image = 'something.png';
}
?>
<img src="<?php echo $image ?>" /> 
```

再见

# html - 如何使用 css 创建按钮背景

> ID：12898669
> 
> 赞同：0
> 
> 时间：2012-10-15T15:15:45.090
> 
> 标签：html, css

我读过一次如何使用图像创建带有阴影的跨浏览器圆形按钮，不幸的是我丢失了书签，这就是为什么我问是否有人记得这项技术。

有左侧图片即

![在此处输入图像描述](../Images/fd5b615e7c42a2b815f6bcc6572f472e.png)

然后非常宽的身体图像以右弯曲边框/阴影结束，如下所示：

![在此处输入图像描述](../Images/e65227448c2c911b85703714e4b37804.png)

所以最后你会得到一个可以用于多种尺寸的按钮吗？我在谷歌上搜索这个，但似乎每个人都使用没有图像的 css。

有谁知道这种技术是如何被调用的，或者可以将我推荐给链接吗？或给我代码示例，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:19:34.803

当使用图像作为按钮的开始和一个图像作为结束时，这些技术被称为“滑动门”，任何搜索引擎都有无数的搜索结果......</p>

有关介绍，请阅读 A List Apart 文章：[http ://www.alistapart.com/articles/slidingdoors](http://www.alistapart.com/articles/slidingdoors)

但是正如 Neurofluxation 在上面的评论中问你的那样：为什么在我们有多种其他方法在 CSS 中设置按钮样式之后，你会那么做呢？例如，A List Apart 文章是从 2003 年开始的——用互联网术语来说，这是一个时代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:21:41.133

这种技术是“滑动门”技术的一种变体：

*   [http://www.alistapart.com/articles/slidingdoors/](http://www.alistapart.com/articles/slidingdoors/)
*   [http://css-tricks.com/snippets/css/perfect-css-sprite-sliding-doors-button/](http://css-tricks.com/snippets/css/perfect-css-sprite-sliding-doors-button/)
*   [http://azadcreative.com/2009/03/bulletproof-css-sliding-doors/](http://azadcreative.com/2009/03/bulletproof-css-sliding-doors/)

基本上你使用这样的标记：

```
<button><span>Text</span></button> 
```

然后将带有边缘图像的样式设置`span`为侧面，与父元素的主要背景图像重叠。像这样的东西：

```
button {
    background:url(main-image.png) top right no-repeat;
    border:0;
    padding:0;
    width:80px;  /* with only 1 "door", you might need to set a width */
    /* other resets may be necessary */
}
span {
    background:url(left-door.png) left top no-repeat;
}
button, span {
    height:37px; /* height of your sprite */
    display:block;
}​ 
```

演示：http: [//jsfiddle.net/Kqs3m/](http://jsfiddle.net/Kqs3m/)

您的结果可能会因您的精灵和内容的自然宽度而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:02:11.687

这是我认为您正在寻找的技术（使用您附加的相同图像）：

**HTML：**

```
​&lt;a href="#" class="button">
  <span>Small</span>
</a>
<a href="#" class="button">
  <span>Large button</span>
</a>​​​​​​​​​​​​ 
```

**CSS：**

```
​.button {
    background: url('http://i.stack.imgur.com/htUHL.png') no-repeat left top;
    padding-left: 9px;
    height: 37px;
    display: inline-block;
    text-decoration: none;
    color: #555;
    text-shadow: 0 1px 1px #FFF;
    font-family: sans-serif;
    font-size: 0.8em;
}
.button span {
    background: url('http://i.stack.imgur.com/ID6nO.png') no-repeat right top;
    display: inline-block;
    height: 37px;
    padding: 5px 12px 5px 3px;
}
.button:hover span {
    ​color: #333;
}​ 
```

**演示链接：http:** [//jsfiddle.net/v284q/](http://jsfiddle.net/v284q/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T17:14:37.900

使用 CSS 属性而不是图像可以使您的应用程序更快。

在这种情况下，您可以只使用：Border-Radius、Box-Shadow 与渐变背景相结合。

在这里你可以找到一个好的渐变编辑器：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

如何使用 Border-radius 和 Box-shadow：

[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)

[http://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)

# objective-c - Objective-c: Singleton - 传递变量

> ID：12898670
> 
> 赞同：0
> 
> 时间：2012-10-15T15:15:47.740
> 
> 标签：objective-c, singleton

我有一个单例，我想用它来管理我的视图的屏幕动画。这是我的。

```
#import <Foundation/Foundation.h>

@interface OAI_AnimationManager : NSObject {

    NSMutableDictionary* sectionData;
}

@property (nonatomic, retain) NSMutableDictionary* sectionData;

+(OAI_AnimationManager* )sharedAnimationManager;

- (void) checkToggleStatus : (UIView* ) thisSection;

@end 
```

.m 文件

```
#import "OAI_AnimationManager.h"

@implementation OAI_AnimationManager

@synthesize sectionData;

+(OAI_AnimationManager *)sharedAnimationManager {

static OAI_AnimationManager* sharedAnimationManager;

@synchronized(self) {

    if (!sharedAnimationManager)

        sharedAnimationManager = [[OAI_AnimationManager alloc] init];

    return sharedAnimationManager;

}

}

- (void) checkToggleStatus : (UIView* ) thisSection {

    //get the section data dictionary
     NSLog(@"%@", sectionData);

}

@end 
```

您将在 .h 文件中看到我添加了一个 NSMutableDictionary 并使用 @property/@synthesize 作为它的 getter 和 setter。

在我的 ViewController 中，我实例化了动画管理器以及一系列名为 Section 的 UIView 子类。对于每一个，我都将数据（x/yw/h、标题等）存储在字典中，并将其传递给动画管理器中的字典。在 Section 类中，我还实例化了动画管理器并添加了一个 UITapGestureRecognizer，它调用一个方法，该方法将哪个部分传递给动画管理器中的方法 (checkToggleStatus)。

正如您在我只是记录sectionData 的方法中看到的那样。问题是我的值是空的。

也许我对单例的理解是错误的。我的假设是该类只会被实例化一次，如果它已经被实例化，那么将返回现有的对象。

我确实需要所有其他 Section 类数据，就好像一个动画其他动画响应一样，我可以通过将点击的 Section 传递给动画管理器并执行 [[Section superview] subviews] 然后循环并从每个获取数据来绕过它这种方式，但它似乎是多余的，因为数据在创建时 ViewController 中可用。

我在尝试传输该数据时做错了什么？有更好的解决方案吗？我愿意接受建议和批评。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:29:22.177

h 文件

```
@interface OAI_AnimationManager : NSObject 

@property (nonatomic, retain) NSMutableDictionary* sectionData;

+(OAI_AnimationManager* )sharedAnimationManager;

- (void) checkToggleStatus : (UIView* ) thisSection;

@end 
```

文件

```
static OAI_AnimationManager* _sharedAnimationManager;

@implementation OAI_AnimationManager

@synthesize sectionData = _sectionData;

+(OAI_AnimationManager *)sharedAnimationManager {

    @synchronized(self) {

        if (!_sharedAnimationManager) {

            _sharedAnimationManager = [[OAI_AnimationManager alloc] init];
        }
    }

    return _sharedAnimationManager;

}

- (void) checkToggleStatus : (UIView* ) thisSection {

     //get the section data dictionary

     NSLog(@"%@", _sectionData);

} 
```

@结尾

请注意，我将您的 sectionData 变量从标头中移到了实现文件中。不久前，他们将其更改为您可以合成属性并在其旁边指定它们的实例变量名称的位置......因此：

截面数据 = _截面数据；

我还在实例变量中添加并下划线...这是私有变量的通用约定，如果您尝试像在 checkToggleStatus 的返回语句中所做的那样仅键入**sectionData**，它现在也会引发编译错误：。现在您必须输入**self.sectionData**或**_sectionData**。

您没有包含创建字典实例的代码，但我敢打赌您没有将其设置为**self.sectionData = [[NSDictionary alloc] init]**这意味着它不会保留该值，并且下一次您将获得 null你叫它的时间。经典的内存管理错误......我很清楚，因为我学会了艰难的方式嘿嘿嘿

# android - 在设备上私下保存数据

> ID：12898671
> 
> 赞同：1
> 
> 时间：2012-10-15T15:15:52.853
> 
> 标签：android

我有要保存的文件，以便其他应用程序无法访问它们并且可以安全地更新（不会被删除）。

**我的问题**

我不确定在哪里保存它们。我知道我可以使用下面的代码将它们保存在数据目录中以获取路径，但我不确定这是否正确。

```
Environment.getDataDirectory(); 
```

**我的问题**

应用程序数据目录是存储我的数据的正确位置还是仅用于系统数据？

如果它不是正确的地方，你能建议在哪里吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:22:29.350

我相信你已经遇到过这个

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

在您看来，内部存储通常是一种有助于实现您所要求的方法。是的，您可以使用您展示的功能

或者

`(OWNERACTIVITY).getFilesDir().getAbsolutePath()`

应该为您提供存储应用程序数据的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:28:01.217

如果您将文件保存在 SD 卡中，则所有应用程序（使用 android.permission.READ_EXTERNAL_STORAGE）都可以访问数据。最好的地方是将它们保存在您的数据目录中。只要您的包名称和证书未更改，您的应用程序就可以访问数据。如果要存储一些文件，例如图像和音频，可以将它们存储在 SD 卡中的目录中，其中包含 .nomedia。但是如果你想保留一些数据文件，校验和等，最好将它们保存在数据目录中。即使您更新了应用程序，您仍然应该能够访问它。

[你可以在这里](http://android-developers.blogspot.com/2011/06/things-that-cannot-change.html)阅读更多

# c# - 将两种方法重构为一种

> ID：12898673
> 
> 赞同：1
> 
> 时间：2012-10-15T15:15:58.163
> 
> 标签：c#, linq, refactoring

我有两种方法几乎可以做同样的事情。他们得到一个`List<XmlNode>`基于 state OR state 和 schoolType 的数据，然后返回一个不同的有序的`IEnumerable<KeyValuePair<string,string>>`。我知道它们可以重构，但我正在努力确定方法返回中 linq 语句的参数应该是什么类型（*每个方法的最后一行*）。

我提前感谢您的帮助。

```
private IEnumerable<KeyValuePair<string, string>> getAreaDropDownDataSource() {
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, ConnectionsLearningSchoolType);
    var schoolNodes = new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
    return schoolNodes.Select(x => new KeyValuePair<string, string>(x.Attributes["idLocation"].Value, x.Value)).OrderBy(x => x.Key).Distinct();
}

private IEnumerable<KeyValuePair<string, string>> getStateOfInterestDropDownDataSource() {
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(SCHOOL_TYPE_XML_PATH, ConnectionsLearningSchoolType);
    var schoolNodes = new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
    return schoolNodes.Select(x => new KeyValuePair<string, string>(x.Attributes["stateCode"].Value, x.Attributes["stateName"].Value)).OrderBy(x => x.Key).Distinct();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:24:38.150

提取节点检索到单独的方法/属性。我还建议使用不同的属性/方法来提取学校和州节点：

```
private List<XmlNode> GetNodes(string xPath)
{
    XmlDocument stateInfoXmlDocument = new XmlDocument();
    return new List<XmlNode>(stateInfoXmlDocument.SelectNodes(xPath)
                                                 .Cast<XmlNode>());
}

private List<XmlNode> SchoolNodes
{
    get { return GetNodes(String.Format(SCHOOL_PATH, LearningSchoolType)); }
}

private List<XmlNode> StateNodes
{
    get { return GetNodes(String.Format(STATE_PATH, StateOfInterest)); }
} 
```

使用学校和州节点的联合来检索区域节点：

```
private IEnumerable<KeyValuePair<string, string>> GetAreaDropDownDataSource()
{
    return SchoolNodes.Union(StateNodes)
            .Select(x => new KeyValuePair<string, string>(x.Attributes["idLocation"].Value, x.Value))
            .OrderBy(x => x.Key)
            .Distinct();
}

private IEnumerable<KeyValuePair<string, string>> GetStateOfInterestDropDownDataSource()
{
    return SchoolNodes
        .Select(x => new KeyValuePair<string, string>(x.Attributes["stateCode"].Value, x.Attributes["stateName"].Value))
        .OrderBy(x => x.Key)
        .Distinct();
} 
```

您还可以使用不同的类型选择器`Func<XmlNode, KeyValuePair<string, string>>`并将它们传递给将创建数据源的方法：

```
private IEnumerable<KeyValuePair<string, string>> GetDropDownDataSource(
        List<XmlNode> nodes,
        Func<XmlNode, KeyValuePair<string, string>> selector)
{
    return nodes.Select(selector)
                .OrderBy(x => x.Key)
                .Distinct();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:28:49.077

我觉得虽然它们都返回一个`IEnumerable<KeyValuePair<string,string>>`，但这些方法在内容上在语义上是完全不同的。因此，我会保留这两种方法，只将重复的代码提取到第三个。就像是：

```
private List<XmlNode> getSchoolNodes(string xmlPath, params object[] values)
{
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(xmlPath, values);
    return new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
}

private IEnumerable<KeyValuePair<string, string>> getAreaDropDownDataSource() {
    var schoolNodes = getSchoolNodes(STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, ConnectionsLearningSchoolType);        
    return schoolNodes.Select(x => new KeyValuePair<string, string>(x.Attributes["idLocation"].Value, x.Value)).OrderBy(x => x.Key).Distinct();
}

private IEnumerable<KeyValuePair<string, string>> getStateOfInterestDropDownDataSource() {
    var schoolNodes = getSchoolNodes(SCHOOL_TYPE_XML_PATH, ConnectionsLearningSchoolType);
    return schoolNodes.Select(x => new KeyValuePair<string, string>(x.Attributes["stateCode"].Value, x.Attributes["stateName"].Value)).OrderBy(x => x.Key).Distinct();
} 
```

* * *

你可以做到以下几点，但我想知道这是否是过度设计问题并产生调用两个`Func`s 的开销。

```
private IEnumerable<KeyValuePair<string, string>> getSchoolNodeDataSource(Func<XmlNode, string> keyFunc, Func<XmlNode, string> valueFunc, string xmlPath, params object[] values)
{
    StateInfoXmlDocument stateInfoXmlDocument = new StateInfoXmlDocument();
    string schoolTypeXmlPath = string.Format(xmlPath, values);
    var schoolNodes = new List<XmlNode>(stateInfoXmlDocument.SelectNodes(schoolTypeXmlPath).Cast<XmlNode>());
    return schoolNodes.Select(x => new KeyValuePair<string, string>(keyFunc(x), valueFunc(x))).OrderBy(x => x.Key).Distinct();
}

private IEnumerable<KeyValuePair<string, string>> getAreaDropDownDataSource() {
    return getSchoolNodeDataSource(x => x.Attributes["idLocation"].Value, x => x.Value,
        STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, ConnectionsLearningSchoolType);        
}

private IEnumerable<KeyValuePair<string, string>> getStateOfInterestDropDownDataSource() {
    return getSchoolNodeDataSource(x => x.Attributes["stateCode"].Value, x => x.Attributes["stateName"].Value, 
        SCHOOL_TYPE_XML_PATH, ConnectionsLearningSchoolType);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:44:40.503

```
private IEnumerable<KeyValuePair<string, string>> Foo(
    string schoolTypeXmlPath,
    Func<T, string> keySelector,
    Func<T, string> valueSelector)
{
    return (
        from XmlNode x in StateInfoXmlDocument().SelectNodes(schoolTypeXmlPath)
        orderby x.Key
        select new KeyValuePair<string, string>(keySelector(x), valueSelector(x)))
        .Distinct()
}

private IEnumerable<KeyValuePair<string, string>> getAreaDropDownDataSource() {
    return Foo(
        string.Format(STATE_AND_SCHOOL_TYPE_XML_PATH, StateOfInterest, ConnectionsLearningSchoolType),
        x => x.Attributes["idLocation"].Value,
        x => x.Value);
}

private IEnumerable<KeyValuePair<string, string>> getStateOfInterestDropDownDataSource() {
    return Foo(
        string.Format(SCHOOL_TYPE_XML_PATH, ConnectionsLearningSchoolType),
        x => x.Attributes["stateCode"].Value,
        x => x.Attributes["stateName"].Value);
} 
```

# javascript - 点击时填充 HTML 下拉列表

> ID：12898674
> 
> 赞同：8
> 
> 时间：2012-10-15T15:16:01.390
> 
> 标签：javascript, jquery, html, ajax, select

我有一个包含多个 HTML`select`下拉列表的页面，并且需要填充`onclick`元素。此填充是在`select`元素的单击事件侦听器中使用 AJAX 调用完成的。

这样做的原因是性能和负载非常关键，因此它们不能在页面加载时填充。

此外，设计**必须**使用原生 HTML`select`元素。

* * *

我创建了一个 jsFiddle 演示来展示这个问题。当您单击`select`项目时，项目会被填充，因此宽度会`select`增加。

![在此处输入图像描述](../Images/b0a44dbcff25a94cb26e268cea701588.png)

但是，`select`仅显示初始选项（在 AJAX 填充之前）。

## **[------ 查看演示 ------](http://jsfiddle.net/PJvM3/16/)**

*演示使用`setTimeout()`50 毫秒来模拟 AJAX 响应时间。*

* * *

我怎样才能让它填充`onclick`并正确显示？

有没有办法打开`select`人口响应的 on 回调？

**编辑：或者，是否有一个 jQuery 插件下拉列表，它使用浏览器的本机主题进行样式设置？**

* * *

**到目前为止我尝试过的**

*   填充`select`悬停，但是快速用户可以`select`在选项加载之前打开。此外，如果用户一直向下滚动页面，并且滚动到每个`select`，这将导致大量不必要的 AJAX 调用。
*   将事件侦听器更改为`focus`代替`click`（如[@AndyPerlitch](https://stackoverflow.com/a/12898728/370103)建议的那样）。但是，如果 AJAX 请求只用了 50 毫秒来响应，这将不起作用。（[见演示](http://jsfiddle.net/PJvM3/7/)）
*   将事件侦听器更改为`mousedown`与`focus`

* * *

**更新：**这在 FireFox 中不是问题。`select`打开，然后加载新项目并显示它们，所有这些都处于打开状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:18:41.950

将要监听的事件从更改`click`为`focus`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:51:05.297

就个人而言，我会选择完全不同的方法，但这取决于您的需要。在这里，我假设用户在某个时候“几乎肯定”会单击（并因此加载）下拉列表。

考虑到这一点，我很想`select`在页面加载后立即使用 ajax 填充列表。这样做的好处是能够快速加载页面（因为仍然没有“页面加载”列表收集），但这也意味着 ajax 很可能在用户确定他们需要使用选择列表之前完成。我什至会采取额外的步骤，并在 ajax 工作时使用临时加载图标代替选定的图标（或禁用它们！），以防 ajax 过得慢而用户像超人一样快。

当然，这一切都取决于您的要求是如何“一成不变”地在用户与下拉元素交互时执行 ajax 加载

* * *

或者[这可能证明有一些用处](https://stackoverflow.com/questions/360431/can-i-open-a-dropdownlist-using-jquery)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:58:05.967

选择将始终显示为单击事件开始之前的状态。因此，您将只看到初始选项，因为您在单击事件开始后执行 AJAX 填充。

这对您来说可能是一种妥协，但请尝试在单击事件之前进行 AJAX 填充。这可能是：-悬停时，正如您已经完成的那样（用户必须滚动点击）-您的用户在与选择相邻的元素上额外点击

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T16:21:19.490

隐藏下拉列表并在其位置放置其他内容供用户单击以触发加载下拉列表并显示它。

# forms - Struts 2 窗体自定义

> ID：12898677
> 
> 赞同：0
> 
> 时间：2012-10-15T15:16:14.617
> 
> 标签：forms, struts2, themes

我使用 Struts 2 在我的应用程序中创建表单。我正在为表单定制而苦苦挣扎。我尝试过简单的主题、xhtml 和 css_xhtml，但我找不到解决方案。Struts 逐行显示一个输入文本，我想逐行显示两个或多个输入文本。我加入了解释我想做的图像的图像。谢谢![在此处输入图像描述](../Images/da204410e416982818f92a923e04726d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:00:21.860

使用“简单”主题，您可以为所欲为；除了表单值和输入元素之外，没有提供任何东西。（您也不会使用表单元素获得自动错误报告，但看起来您无论如何都不想这样做。）如果它不适用于“简单”，那么您构建的表单错误，或者忘记包含你自己的标签，什么的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:42:04.347

简单地接受 Struts 为您提供的布局并通过为您的输入字段分配唯一的 id 来通过自定义 css 文件控制布局可能会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:26:59.783

经过多次测试，我通过使用简单的主题解决了我的问题。并添加自定义 CSS 来格式化我的表单。谢谢——</p>

# python - 如何将字符串转换为时间戳？

> ID：12898678
> 
> 赞同：0
> 
> 时间：2012-10-15T15:16:15.470
> 
> 标签：python

> **可能重复：**
> [在 Python 中将日期字符串转换为日期时间对象](https://stackoverflow.com/questions/2721782/convert-date-string-to-datetime-object-in-python)

我有一个日期字符串：

```
Mon Oct 15 15:05:00 UTC 2012 
```

如何将此字符串转换为时间戳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:18:36.447

这应该有助于：

[http://docs.python.org/library/time.html#time.strptime](http://docs.python.org/library/time.html#time.strptime)

# c# - 如何为应用程序禁用 alt+F4？

> ID：12898680
> 
> 赞同：14
> 
> 时间：2012-10-15T15:16:25.313
> 
> 标签：c#, .net, winforms

如何在 C# 应用程序 中禁用`ALT`+应用程序范围的使用？`F4`

在我的应用程序中，我有很多 WinForms，我想禁用使用`ALT`+关闭表单的功能`F4`。不过，用户应该能够使用表单的“X”关闭表单。

同样，这不仅仅是一种形式。我正在寻找一种方法，因此`ALT`+`F4`对整个应用程序都禁用，并且不适用于任何表单。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:28:25.413

您可以在主启动方法中放置这样的内容：

```
namespace WindowsFormsApplication1
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.AddMessageFilter(new AltF4Filter()); // Add a message filter
            Application.Run(new Form1());
        }
    }

    public class AltF4Filter : IMessageFilter
    {
        public bool PreFilterMessage(ref Message m)
        {
            const int WM_SYSKEYDOWN = 0x0104;
            if (m.Msg == WM_SYSKEYDOWN)
            {
                bool alt = ((int)m.LParam & 0x20000000) != 0;
                if (alt && (m.WParam == new IntPtr((int)Keys.F4)))
                return true; // eat it!                
            }
            return false;
        }
    }
} 
```

# python - 使用python剥离自定义方法

> ID：12898684
> 
> 赞同：0
> 
> 时间：2012-10-15T15:16:39.660
> 
> 标签：python, porting

我正在尝试将 bash 脚本完全移植到 python。我这样做是为了尝试进入 python。

bash 脚本的一部分根据 regex 处理捕获部分。

这就是我在 bash 脚本中的做法：

搜索正则表达式 [multiline] 例如：`m/^[^\S\n]*\([\w0-9,*\s]*\)\s*\{[^\S\n]*\}/gm`//不是实际的正则表达式！

获取上述正则表达式的起始行号

用于`awk`在 while 循环中从行号开始读取。扫描每一行以查找方法 start 即`[`。如果找到增量计数变量，`[`否则如果`]`遇到 a 则减少计数器。如果计数器 == 0，则打印`NR`并退出循环。这给了我部分结束线编号。

我再一次`awk`把这个部分分开了。 `nawk -v start=$var -v end=$var2 'NR >=start && NR <=end' file.sci`

要处理的示例文件：

```
!!--Blah
!!
!!
method1 {fn->23}[          --line 12
     if [ ] ;else[]
 ]                         --line 14
method2 {fn->23,f2->65}[
     if [ ] ;else[i=0]
[[[[]]]] 
 ] 
```

bashcript 所做的是它给了我方法 1 开始说第 12 行，然后这个开始是给 awk 函数，它逐行读取并保持计数器打开`[`，`]`最后给方法 1 的第 14 行。然后使用该行我将方法剥离到另一个文件中。

我已经完成了正则表达式部分，但我不知道行号的方法在 python 中是否可行。我确信存在比提到的更好的算法。如果有人可以指导我正确的方向或提供示例代码或指针，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:59:04.027

这就是我在 Python 中的做法：

```
import re # to be able to use regular expressions
count = 0
found_one_at_least = False
result = ""
with open("read_file", "r") as f:
    for line in f:
        if re.search(regexp, line) is not None: # single line re to know when to start recording; returns None if there is no match, help(re.search) will tell you
            break # stop this loop and go on to the actual recording
    for line in f: # this will continue reading from where the last loop stopped, because it is an f is an iterator
        # to make it not do that you can use f.seek(0), but we do not need that
        result += line # append the line to the result
        count += line.count("[")-line.count("]") # compute the number of open/close brackets
        if count >= 1: # this is just so it does not stop at the first line if there is no [ in it
            found_one_at_least = True
        if count == 0 and found_one_at_least:
            break # stop recording when we are back at the "root" level
with open("write_file", "w") as f: # open the file, and let python handle closing and cleaning up...
    f.write(result) # write the result 
```

我并没有真正看到正则表达式的意义，因为它似乎与您样本的任何行都不匹配，但无论如何，您可以使用您喜欢的任何正则表达式，但请记住您是在一行基础上工作的，所以只有单行。

此外，由于您将使用相同的正则表达式，您可能希望这样做：

```
regexp = re.compile(regexp_string)
# ...
if regexp.search(string) is not None:
# ... 
```

它可能会给您带来小的性能提升。

# ios - 在报亭应用中通知用户下载已完成

> ID：12898687
> 
> 赞同：0
> 
> 时间：2012-10-15T15:16:43.087
> 
> 标签：ios, uilocalnotification, newsstand-kit

有没有办法使用本地通知来提醒用户他们正在通过后台报亭下载的杂志已经完成下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:20:31.563

通常，您使用 NKAssetDownload 来获取报摊内容。然后使用 NSURLConnectionDownloadDelegate 开始下载：

```
[assetDownload downloadWithDelegate:self]; 
```

当下载成功完成时，您会收到一个回调

```
- (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL; 
```

在哪个实现中，您可以使用 UILocalNotification 来提醒用户。

# doctrine - 在 Doctrine 2 中查找或创建（更新插入）功能

> ID：12898697
> 
> 赞同：5
> 
> 时间：2012-10-15T15:17:15.463
> 
> 标签：doctrine, doctrine-orm

Doctrine 2 是否内置了 upsert 功能？似乎没有，但我无法找到明确的是或否答案。

如果是这样，我当然有兴趣查看示例和/或一些文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:19:09.363

我相信我找到了答案。截至今天（2012 年 10 月 15 日），Doctrine 有一个开放的“[添加 upsert 支持](https://github.com/doctrine/doctrine2/issues/5178)”问题。我认为如果 Doctrine 2 确实有 upsert 支持，这张票将不会仍然开放，所以我想这是我的明确答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T15:31:22.567

Upsert 已经出现在 Doctrine 中。

使用查询生成器，如果要返回文档，则必须设置**findAndUpdate()**和**returnNew() 。**设置**upsert()**你就可以开始了。

例如：

```
$documentMannager->createQueryBuilder('App\Domain')
->findAndUpdate()
->returnNew()
->field('_id')->equals($id)
->field('page')->equals($page)
->field('count')->inc(1)
->upsert()
->getQuery()
->execute(); 
```

这是我实现桶模式的方式。

# jquery - 我无法在 jquery 网格插件中获取子网格的 rowid 父级

> ID：12898698
> 
> 赞同：1
> 
> 时间：2012-10-15T15:17:15.693
> 
> 标签：jquery, jquery-plugins, jqgrid, struts2, grid

我使用 Jquery Grid Plugin (3.3.3) 在 Struts 2 项目中工作

我正在使用网格 ( `<sjg:grid>`) 和子网格嵌套组件。在`editurl`我的子网格的操作中，我已经实现`rowid`了父行的行 ID。

```
private String rowid;

public void setRowid(String rowid) {
    this.rowid = rowid;
}

public String getRowid(){
    return rowid;
} 
```

当我在对话框面板中编辑（或添加）一条记录时，`rowid`设置正确，但如果我内联（`editinline="true"`）编辑它，该 `setRowid`方法不会运行。

¿ 我该怎么做才能让 rowid 父级“内联工作”？

谢谢

# jquery - 在 jquery 中单击 1 个链接后禁用所有可单击链接

> ID：12898703
> 
> 赞同：0
> 
> 时间：2012-10-15T15:17:23.590
> 
> 标签：jquery, list, button, removeall

我有一组链接：

```
<div id="dd" class="mywrap-dropdown-2" tabindex="2">Select
    <ul class="dropdowner" id="coll-filter">
        <li><a href="#">Black</a></li>
        <li><a href="#">White</li>
        <li><a href="#">Blue</li>
    </ul>
</div> 
```

如果单击链接“白色”，那么我的链接“黑色”和“蓝色”将不再可单击。

这是我拥有但不起作用的：

```
$( '.dropdowner' ).on( 'click', 'li', function( e ) {
    e.preventDefault();  
    $(".dropdowner li a").not(this).removeAttr("href")
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:19:42.510

您的标记无效，您有未关闭的锚链接：

```
<li><a href="#">White  </li>
<li><a href="#">Blue   </li> 
```

请注意，在您的代码中`this`引用的`li`元素不是锚链接，您应该选择锚链接而不是`li`元素。

```
$( '.dropdowner' ).on( 'click', 'a', function( e ) { 
```

或者：

```
$(".dropdowner li").not(this).find('a').removeAttr("href") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:18:42.723

`unbind()`取消绑定与该类关联的所有点击事件

```
 $('.dropdowner').on('click', 'a', function(e) {
    e.preventDefault();
    if ($(this).text().indexOf('White') > -1) {
        alert('Clicked Link with White..')
        $('.dropdowner a').not(this).unbind();
    } else {
        alert('Other Links Cliked');
    }
});​ 
```

试试这个..当点击黑色链接时，这将删除其他链接的点击事件..

[检查小提琴](http://jsfiddle.net/sushanth009/RfDnF/)

# php - 多文件上传验证 - PHP、Joomla

> ID：12898705
> 
> 赞同：0
> 
> 时间：2012-10-15T15:17:29.593
> 
> 标签：php, file-upload, joomla, joomla2.5

我正在使用 Joomla 2.5。

我的程序中有 3 个输入字段，允许用户上传类似的设计图像。

```
<input type="file" name="design_image[]" class="image_upload" accept="image/*"/>
<input type="file" name="design_image[]" class="image_upload" accept="image/*"/>
<input type="file" name="design_image[]" class="image_upload" accept="image/*"/> 
```

以上 3 个输入字段是动态的。有一个下拉菜单允许用户确定要上传多少设计。如果用户选择两个，则创建 2 个输入字段。如果用户选择三个，则创建 3 个输入字段。我正在使用 jquery 来做这件事。

我想要做的是如何确保用户更新了正确数量的文件？

EG：如果用户选择 2 -> 应该有 2 个文件上传，如果用户选择 3 -> 应该有 3 个文件上传

目前我正在做的是使用 PHP 是

```
$file = JRequest::getVar('design_image', null, 'files', 'array');
if(empty($file['tmp_name'])){
            $this->_app->enqueueMessage( JText::_('Error'), 'error');
} 
```

这适用于单个文件上传。如何根据用户输入调整验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:21:04.863

PHP 的基于数组的文件上传支持以一种愚蠢的方式构建 $_FILES 数组。

普通单文件：

```
$_FILES = array(
    'fieldname_in_file_input' => array(
        'name' => 'somefile.txt'
        'size' => 12345
        'error' => 0
        etc...
    )
); 
```

基于数组：

```
$_FILES = array(
   'fieldname_in_file_input' => array(
       'name' => array(
           0 => 'first_file.txt';
           1 => 'second_file.txt'
           etc..
       ),
       'size' =>
           0 => 1234, // size of 1st file
           1 => 2345, // size of 2nd file
           etc...
       ), etc...
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:49:02.633

尝试这个

```
$file = JRequest::getVar('design_image', null, 'files', 'array');

if(empty($file['tmp_name'][0])){
       $this->_app->enqueueMessage( JText::_('Error'), 'error');
} 
```

上传

```
$count = count($file['name']);
for($i=0;$i<$count;$i++) {
 if($file['error'][$i] == 0)
 {
    if($file['size'][$i] <= 8388608)   //8388608 byte = 8 mb
    {
       JFile::upload($file['tmp_name'][$i],$your_new_path)
    }
 } 
```

# powershell-2.0 - 无法将 SQL powershell 属性与字符串进行比较

> ID：12898706
> 
> 赞同：1
> 
> 时间：2012-10-15T15:17:32.590
> 
> 标签：powershell-2.0

我首先想说我只是在学习 powershell，这可能是一个非常简单的答案，但我已经做了一些研究，但找不到我正在寻找的确切内容。

我的目标：我正在使用 SQL cmdlet 尝试排除一些我们需要在其上运行脚本的数据库。下面是我获取数据库的代码

```
 $ExcludeDBs=Invoke-Sqlcmd -ServerInstance $EDDSServer -Database EDDS -InputFile $InactiveCaseSQLPath 
```

这很好用，在此之后，当我尝试使用 foreach 循环并尝试比较属性时，我可以确定它位于哪个 SQL 集群上。下面是我的代码：

```
 $str="__SQL Cluster 13  (ALL NEW CASES HERE)"
    $ExcludeDbs | foreach{
    if($ExcludeDBs | Where-Object SQLclusterName  -eq $str){
    $SQLClusterName="ClusterNameSQL"}
    }#end foreach loop 
```

我收到以下错误：

*无法绑定参数“FilterScript”。无法将“System.String”类型的“SQLclusterName”值转换为“System.Management.Automation.ScriptBlock”类型。*

我认为这与类型转换有关，但我不确定从这里去哪里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:10:36.753

`SQLClustername`正在作为字符串处理 - 它是从您的查询返回的字段吗？

此外，你不应该需要`where-object`内部`foreach`

```
$str="__SQL Cluster 13  (ALL NEW CASES HERE)"
$ExcludeDbs | foreach{
if($_.SQLclusterName  -eq $str){
    $SQLClusterName="ClusterNameSQL"}
}#end foreach loop 
```

# android - 预定通知

> ID：12898707
> 
> 赞同：0
> 
> 时间：2012-10-15T15:17:36.820
> 
> 标签：android, service, notifications

我必须开发 android 应用程序，该应用程序必须在未来的不同日期安排不同的通知。我的想法是不要在我的应用程序中同时在 Activity 类中为所有通知安排使用 AlarmManager，而是在应用程序中使用可以每 24 小时（= 每天）验证是否有一个或多个通知的服务今天为我的应用程序的用户展示。我的数据是未来的许多日期，它们指定了必须通知用户的时间。最佳做法是什么？如果您有另一种解决方案，欢迎您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:21:50.107

我认为像您描述的那样为警报实施服务不是一个好主意。AlarmManager 就是为此目的而制作的。如果您要实施一项服务，首先您将 24/7 全天候使用资源，而用户不会喜欢这样。其次，如果设备处于睡眠状态，您将如何通知用户？似乎过于复杂。您是否有不想使用 AlarmManager 的原因？

# facebook - FQL 获取我所有朋友的签到信息？

> ID：12898709
> 
> 赞同：0
> 
> 时间：2012-10-15T15:17:42.837
> 
> 标签：facebook, facebook-fql

到目前为止，这似乎是不可能的.. 谁能给我一个合适的查询或一组可以做到这一点的查询？基本上，我需要我所有朋友的签到：他们自己签到的，他们用图片签到的，不是我朋友的用户标记他们的。

我的第一次尝试是这样的：

`SELECT checkin_id, author_uid, page_id, coords, tagged_uids, timestamp FROM checkin WHERE (author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) OR author_uid=me()) ORDER BY timestamp DESC LIMIT 50`

但这不包括带图片的签到。

我的第二次尝试是这样的：

`SELECT id, author_uid, app_id, timestamp, tagged_uids, page_id, page_type, coords, type FROM location_post WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1=me())`

但是就像 WHERE 子句所暗示的那样，我们只寻找由朋友创建的签到，而不是我的朋友被标记的签到。

我的下一次尝试是这样的：

`SELECT id, author_uid, app_id, timestamp, tagged_uids, page_id, page_type, coords, type FROM location_post WHERE tagged_uids IN (SELECT uid2 FROM friend WHERE uid1=me())`

但它只是返回一个空数据集，因为它可能应该。

如此短的提交 500 个奇怪的查询，一个为我的每个朋友，有没有办法做到这一点？

任何指针都非常感谢！

谢谢，
泰加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:31:59.887

we can also use following FQL to get friends checkins and checkins in which friends are tagged:

```
SELECT checkin_id FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) OR tagged_uids IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:08:41.017

这是否需要在 FQL 中，或者 Graph API 是否不足以满足此要求？

`/me/friends?fields=checkins`，虽然很慢（警告：有很多朋友，这可能会完全超时），返回我的朋友列表以及他们最近签到的数组（以及那些签到的喜欢、评论等）

您还可以将其分成几批朋友以获得更好的性能：

`/?fields=checkins&ids=[CSV LIST OF FRIENDS TO CHECK]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:57:09.163

我最近试图解决同样的问题，发现通过 /me/friends?fields=checkins 使用图表太慢而无法使用，有时会完全超时。

不过，我只是偶然发现了搜索功能，这似乎正是我（也许是你）想要的。

引用 facebook 文档：

> Checkins: [https://graph.facebook.com/search?type=checkin](https://graph.facebook.com/search?type=checkin) (This request returns you or your friend's latest checkins, or checkins where you or your friends have been tagged; currently, it does not accept a q= parameter.)

There's tons more examples here under Search: [https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

# image - 如何在 mvc4 中创建 ImageOptimize（出现错误）？

> ID：12898715
> 
> 赞同：0
> 
> 时间：2012-10-15T15:18:07.143
> 
> 标签：image, image-processing, file-upload, asp.net-mvc-4

大家好，我在为图像优化内容编写代码时正在 mvc4 中工作，显示错误我需要这样做任何机构请帮助我解决这个问题，我收到了这个错误

这是我的代码：控制器

```
 public ActionResult Uploading(ImageModel model)
        {
            var uploadFolder = HostingEnvironment.MapPath("~/App_Data");
            uploadFolder = Path.Combine(uploadFolder, DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss/fff"));
            Directory.CreateDirectory(uploadFolder);
            var streamProvider = new PreserveFilenameMultipartFileStreamProvider(uploadFolder);

             Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(t =>
            {
                foreach (var uploadedFile in Directory.GetFiles(uploadFolder))
                {

                    var medium = Path.Combine(uploadFolder, "medium-" + Path.GetFileName(uploadedFile));
                    var thumbnail = Path.Combine(uploadFolder, "thumb-" + Path.GetFileName(uploadedFile));
                    ImageTools.Resize(uploadedFile, thumbnail, 100, 100);
                    ImageTools.Resize(uploadedFile, medium, 50, 50);
                }
                return new HttpResponseMessage()
                {
                    Content = new StringContent("File uploaded.")

                };

            });
           return View("Upload", model);

        } 
```

这是我的索引页：

```
@using (Html.BeginForm("Uploading", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
 {
     <input type="file" name="ImageUploaded" id="btnUpload" multiple="multiple" accept="image/*"  />
 <button type="submit"  id="Upload">Upload</button>
     <br />
     //@Html.DisplayForModel(@ViewData["Time"]);        
     <label>@ViewData["Time"]</label>

 } 
```

这里我在内容处收到错误：HTTPRequestBase 不包含内容的定义

```
 Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(t => 
```

任何人都可以帮助我解决问题提前谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T07:10:47.740

请在您的视图中使用以下行：

```
@using (Html.BeginForm("Action Name", "Controller Name", FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

因为您正在上传文件，所以您需要定义上面的代码行。

# objective-c - 如何获取图像objective-C的路径

> ID：12898716
> 
> 赞同：1
> 
> 时间：2012-10-15T15:18:07.847
> 
> 标签：objective-c, ios, path, uiimageview

我想从不同的文件夹中调用图像，请你帮我实现这个；

我的文件夹有这个结构：

文件夹 1

```
 file1

     image1.jpg

  file2

     image2.jpg

  file3

     image3.jpg 
```

文件夹2 ....

在每个文件中%d 我有一个图像%.jpg

我想循环调用我的图像，

```
 for (i = 1; i > image; i++)
{
    NSString *image = [NSString stringWithFormat:@"image%d.jpg", i]; 
```

但我的问题是如何进入文件夹并获取图像

我可以有这样的东西吗：

```
 stringWithFormat:@"Folder%d/File%d/image%d" ofType:@"jpg" 
```

什么是最好的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:31:23.787

这里有一些对我有用的代码片段。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *mapDirPath = [documentsDirectory stringByAppendingPathComponent:@"/MapCache"]; 
```

// 在文档目录中创建一个目录

```
NSError* error;
if (![[NSFileManager defaultManager] fileExistsAtPath:mapDirPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:mapDirPath withIntermediateDirectories:NO attributes:nil error:&error]; 
```

// 加载图像

```
NSString *filePath = [self.localImagePath stringByAppendingPathComponent: key];
if ( [[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
    UIImage* image = [UIImage imageWithContentsOfFile:filePath];
    return image;
} 
```

// 写入图片

```
[[NSFileManager defaultManager] createFileAtPath:filePath contents:remoteData attributes:nil]; 
```

希望有帮助

当然，如果你从你的包中读取图像，你需要这个 [[NSBundle mainBundle] pathForResource: @"filename" ofType:@"png" directory: @"directory1"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:32:44.013

迭代将图像路径附加到库路径的文件夹和图像：

```
NSString * libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];

for (NSUInteger f = 1; f <= numFolders; i++) {

    for (NSUInteger i = 1; i <= numImages; i++) {

        // Create the image path
        NSString * imagePath = [NSString stringWithFormat:@"%@/Folder%d/File%d/image%d.jpg", libraryPath, f, i, i];

        // Check if file exists
        if ( [[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
            UIImage * image = [UIImage imageWithContentsOfFile:imagePath];

            // Use image...
        }
        else {
            NSLog(@"Image not found.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:42:32.253

对，我就是这样做的。

```
for (f = 1; f <= numberOfFolders; i++) {
    for (i = 1; i <= numberOfImages; i++) {
        NSString* file = [NSString stringWithFormat: @".../Folder%d/File%d/image%d.jpg", f, i, i];
        NSImage* image = [NSImage imageNamed: file];

        // Do something with the image
    }
} 
```

注意：我不知道 Folder1/Folder2... 等在哪里，所以我在代码上使用了“.../”。请务必适当地填写该部分。

# eclipse - 如何使用 JDT/LTK 以编程方式执行内联重构？

> ID：12898718
> 
> 赞同：1
> 
> 时间：2012-10-15T15:18:12.663
> 
> 标签：eclipse, eclipse-jdt, eclipse-plugin, ltk

`Refactor->Inine`当我需要内联方法时可以使用。

![在此处输入图像描述](../Images/6ee40c23bb8aa728b0290b8ef591a914.png) ![在此处输入图像描述](../Images/e15cf46a36cd930e75152835d73c20fa.png) ![在此处输入图像描述](../Images/93b4c3530650d9ec6e7125eeb565373d.png) ![在此处输入图像描述](../Images/ffe4849275eafebd5323e8acfd41e6bd.png)

这是我尝试过的代码框架，我使用了这篇文章中的代码 -[是否有任何可以以编程方式调用的 Eclipse 重构 API？](https://stackoverflow.com/questions/9129689/is-there-any-eclipse-refactoring-api-that-i-can-call-programmatically).

```
// 1\. Get ICompiationUnit for type "smcho.Hello"
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject("Hello");
project.open(null /* IProgressMonitor */);

IJavaProject javaProject = JavaCore.create(project);
IType itype = javaProject.findType("smcho.Hello");
org.eclipse.jdt.core.ICompilationUnit icu = itype.getCompilationUnit();

// 2\. Contribution and Description creation
RefactoringContribution contribution = RefactoringCore.getRefactoringContribution(IJavaRefactorings.INLINE_METHOD);
InlineMethodDescriptor descriptor = (InlineMethodDescriptor) contribution.createDescriptor();

descriptor.setProject(icu.getResource().getProject().getName( ));

// 3\. executing the refactoring
RefactoringStatus status = new RefactoringStatus();
try {
    Refactoring refactoring = descriptor.createRefactoring(status);

    IProgressMonitor monitor = new NullProgressMonitor();
    refactoring.checkInitialConditions(monitor);
    refactoring.checkFinalConditions(monitor);
    Change change = refactoring.createChange(monitor);
    change.perform(monitor);
} catch (CoreException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

当我执行代码时，我得到了这个错误

```
org.eclipse.core.runtime.CoreException: The refactoring script argument 'input' is missing 
in the refactoring script. 
```

我想我需要将重构的方法名称提供给 API。代码中可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:18:16.973

在上面的代码中，你从不提供重构操作的方法，你只给它项目上下文。但我不知道必要的 API。

如果您查看[此源代码](http://www.cct.lsu.edu/~rguidry/eclipse-doc36/src-html/org/eclipse/jdt/internal/corext/refactoring/scripting/InlineMethodRefactoringContribution.html)，您会注意到 JavaRefactoringDescriptorUtil.ATTRIBUTE_INPUT 的使用，这可能也是您需要设置的。也许您可以搜索 refactoring.ui 插件源以获取对该属性的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:36:20.763

这是与内联重构 JDT API 一起使用的代码。它需要内联起始位置和长度。

```
int[] selection= {start, length}; // getSelection();
InlineMethodRefactoring refactoring= InlineMethodRefactoring.create(this.icu, new RefactoringASTParser(ASTProvider.SHARED_AST_LEVEL).parse(this.icu, true), selection[0], selection[1]);
refactoring.setDeleteSource(true);
refactoring.setCurrentMode(Mode.INLINE_ALL); // or INLINE SINGLE based on the user's intervention

IProgressMonitor pm= new NullProgressMonitor();
RefactoringStatus res = refactoring.checkInitialConditions(pm);
res = refactoring.checkFinalConditions(pm);

final PerformRefactoringOperation op= new PerformRefactoringOperation(
refactoring, getCheckingStyle());
op.run(new NullProgressMonitor()); 
```

当您知道要内联的方法的名称时，您可以使用中的代码 - [Getting startPosition and length of a method invocation using JDT](https://stackoverflow.com/questions/14371526/getting-startposition-and-length-of-a-method-invocation-using-jdt)

# php - PHP 是否有工具可以查找尝试使用未定义函数的文件？

> ID：12898720
> 
> 赞同：0
> 
> 时间：2012-10-15T15:18:18.973
> 
> 标签：php

我们有一个庞大的遗留代码库，试图找到定义函数的位置是一项艰巨的任务。幸运的是，现代 IDE 已经涵盖了这一点。然而，*尚不*清楚的是如何（或者，实际上，*如果*）已经包含了一个文件。

我们的旧式代码通常会在一个文件中包含一组相关的函数，并在每个函数前面加上文件名（因此 login_validate() 将在 login.php 中）。

### 例子.php

```
<?php

require_once 'functions/login.php';
require_once 'functions/validate.php';
validate_something(); // Uses function defined in validate.php
echo user_login(), PHP_EOL; // user.php must have been included *somewhere* for this to work, but where?! 
```

我的问题是：**是否有一个工具可以扫描 PHP 文件并告诉我哪些文件由于未解析的函数而无法执行？**

注意：使用 PHP 的内置 lint 检查器 ( `php -l`) 不会捕捉到这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:26:09.067

[PhpStorm](http://www.jetbrains.com/phpstorm/)是我推荐的。（一般来说，不只是为了这个用途。）

有了它，您可以通过运行项目范围的检查来做到这一点。从工具栏菜单：

`Code > Run Inspection by Name`

然后会弹出一个对话框询问检查的类型。输入`undefined function`并按回车键。然后下一个对话框将询问运行检查的范围，这很可能是您的整个项目。

# c# - 在没有轮询的情况下在 Windows 窗体上计时？

> ID：12898722
> 
> 赞同：0
> 
> 时间：2012-10-15T15:18:33.833
> 
> 标签：c#, .net, winforms, .net-3.5

我需要在表单上显示当前时间和秒数。我的时钟必须显示秒，我担心性能。

1.  有没有不用轮询的方法？（一些系统事件或什么？）
2.  如果没有轮询的方法 - 我应该使用`Date().getTime()`在我的计时器滴答事件中获取当前时间吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:19:48.127

您应该只使用 a`System.Windows.Forms.Timer`并`DateTime.Now`在每个刻度中显示。

# crud - 如何以编程方式在主数据服务中插入数据

> ID：12898723
> 
> 赞同：3
> 
> 时间：2012-10-15T15:18:32.430
> 
> 标签：crud, erp, master-data-services

我正在试用 Microsoft Master Data Services，我想以编程方式将数据添加到数据库中。我开始了解模型/实体/成员结构，但我还不确定。如果您对此结构有很好的解释，请分享。

假设有人在 ERP 系统中添加了新员工，我想将其发送到 MDS。我该怎么做？是我要添加新成员的数据吗？因为如果我查看以下信息（http://technet.microsoft.com/en-us/library/hh230995），导入数据的唯一方法是通过实体？

在此先感谢您提供有关此的任何有用信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:01:02.697

让我们从基础开始。

*   主数据服务 (MDS) 中的实体大致类似于常规数据库中的表。
*   每个实体都必须存在于模型中。
*   一个模型可以包含任意数量的实体。

您在该页面上看到的 Metadata* 方法可用于创建、读取和更新模型和实体。将 ERP 表建模为 MDS 模型后，您可以使用 EntityMembersCreate API（带有相关的模型/实体信息）来创建成员（大致类似于表中的一行）。您可以使用 EntityMembersUpdate 更新成员并使用 EntityMembersDelete 删除它们。

将大量数据导入 MDS 的另一种方法是使用基于实体的分段。基于实体的暂存允许您使用 SSIS 等工具将批量数据导入 MDS。这里有一个很好的入门：http: [//msdn.microsoft.com/en-us/sqlserver/hh802433.aspx](http://msdn.microsoft.com/en-us/sqlserver/hh802433.aspx)。

我希望这有帮助。随时提出更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:19:39.023

我喜欢使用模型中的类继承自的通用数据访问对象。每个类与数据库中的表具有一对一的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T12:06:06.580

我们正在使用 SSIS 将数据从我们的 CRM（以及其他数据源）复制到我们的 MDS（暂时）。如果您不熟悉该工具，我建议您在移动数据方面 - 学习基础知识相对容易。如果你走这条路，这是我用来将数据推送到我们的 MDS 系统的一个很好的资源：

[http://www.sqlchick.com/entries/2013/2/16/importing-data-into-master-data-services-2012-part-2.html](http://www.sqlchick.com/entries/2013/2/16/importing-data-into-master-data-services-2012-part-2.html)

# sap - 输入有效的 KUNNR - SM30 时自动填充 NAME_1

> ID：12898732
> 
> 赞同：2
> 
> 时间：2012-10-15T15:18:50.840
> 
> 标签：sap

我制作了一个包含三个字段的表：KUNNR、NAME_1 和 Z_CLASS。KUNNR 有 KUNNR 作为数据元素，NAME_1 有 NAME1_GP，Z_CLASS 有一个我用 3 个值（1、2 或 3）制作的数据元素。我已经制作了表格维护生成器，并使用 SM30 放入了一些数据。现在，当我输入客户编号（KUNNR）并按回车时，我需要自动显示客户名称（NAME_1）；并且需要确保 Z_CLASS 已填写且未留空。我真的不知道如何搜索解决方案，因为我是 SAP 新手。谢谢你。

```
PROCESS BEFORE OUTPUT.
 MODULE LISTE_INITIALISIEREN.
 LOOP AT EXTRACT WITH CONTROL
  TCTRL_Z10FICLASSFICA CURSOR NEXTLINE.
   MODULE LISTE_SHOW_LISTE.
 ENDLOOP.
*
PROCESS AFTER INPUT.
 MODULE LISTE_EXIT_COMMAND AT EXIT-COMMAND.
 MODULE LISTE_BEFORE_LOOP.
 LOOP AT EXTRACT.
   MODULE LISTE_INIT_WORKAREA.
   CHAIN.
    FIELD Z10FICLASSFICA-KUNNR .
    FIELD Z10FICLASSFICA-NAME1 .
    FIELD Z10FICLASSFICA-Z_CLASS .
    MODULE SET_UPDATE_FLAG ON CHAIN-REQUEST.
   ENDCHAIN.
   FIELD VIM_MARKED MODULE LISTE_MARK_CHECKBOX.
   CHAIN.
    FIELD Z10FICLASSFICA-KUNNR .
    MODULE LISTE_UPDATE_LISTE.
   ENDCHAIN.
 ENDLOOP.
 MODULE LISTE_AFTER_LOOP. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:37:12.730

至于名称，请勿将其保留为冗余字段。定义外键关系，然后使用[维护视图](http://help.sap.com/saphelp_erp60_sp/helpdata/en/66/33f52010dd11d6999300508b5d5211/frameset.htm)显示与客户编号对应的名称。

对于必填字段检查，编辑生成的屏幕并[添加一个模块](http://help.sap.com/saphelp_dimp50/helpdata/EN/47/e07f622b9911d2954f0000e8353423/frameset.htm)来检查是否填写了必填字段。也应该可以在屏幕字段选项中将该字段设置为必填，但我不建议这样做，因为即使对于空行，该字段也会显示为必填。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T10:35:45.957

我已经找到了这两个问题的答案。为了自动填写客户名称，我使用了一个带有事件“填充隐藏字段”（第 21 号）的表单例程。在生成的包含中，我使用了以下代码：

```
FORM fill_hidden.
DATA: lc_name1 TYPE kna1-name1.
Data: lc_kunnr TYPE kna1-kunnr.

lc_kunnr = z10ficlassfica-kunnr.

SELECT SINGLE name1 INTO lc_name1 FROM kna1 WHERE kunnr = lc_kunnr.

z10ficlassfica-name1 = lc_name1.
endform. 
```

对于必填字段，我转到维护屏幕、元素列表选项卡、特殊属性选项卡，然后从条目列的下拉菜单中选择必填项。像魅力一样工作。感谢您的所有回答:)

# python - Python对包含数字和字符的字符串进行排序

> ID：12898734
> 
> 赞同：-5
> 
> 时间：2012-10-15T15:18:53.260
> 
> 标签：python, python-3.x, python-2.7

> **可能重复：**
> [在 Python 中，如何自然地对字母数字字符串列表进行排序，以使字母字符排在数字字符之前？](https://stackoverflow.com/questions/12184015/in-python-how-can-i-naturally-sort-a-list-of-alphanumeric-strings-such-that-alp)

如何在python中对包含数字和字符的字符串进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:22:00.763

```
>>> s = '13abc3'
>>> ''.join(sorted(s, key=lambda x: int(x) if x.isdigit() else x))
'133abc' 
```

如果这是您所追求的，这不会处理任何自定义排序（这是数字，大写，小写）。

# javascript - JQuery 在表单上切换选项顺序

> ID：12898736
> 
> 赞同：2
> 
> 时间：2012-10-15T15:18:59.673
> 
> 标签：javascript, jquery, html

我有一个表单，我需要切换选项的顺序。我需要在页面加载后有条件地（不是每次）都这样做，并且使用 jquery 来完成这项任务是有意义的。

这是最初呈现的 HTML：

```
<ol class="choices-group">
  <li class="choice">
    <label for="first">
      <input id="first" type="radio" value="25.0">$25</input>
    </label>
  </li>
  <li class="choice">
    <label for="second">
      <input id="second" type="radio" value="50.0">$50</input>
    </label>
  </li>
  <li class="choice">
    <label for="third">
      <input id="third" type="radio" value="100.0">$100</input>
    </label>
  </li>
</ol> 
```

我希望 jquery 反转元素的顺序，所以它看起来像这样：

```
<ol class="choices-group">
  <li class="choice">
    <label for="third">
      <input id="third" type="radio" value="100.0">$100</input>
    </label>
  </li>
  <li class="choice">
    <label for="second">
      <input id="second" type="radio" value="50.0">$50</input>
    </label>
  </li>
  <li class="choice">
    <label for="first">
      <input id="first" type="radio" value="25.0">$25</input>
    </label>
  </li>
</ol> 
```

在此示例中，有三个选项，但它可以是 1 到 7 之间的任何数字。

任何人都可以看到这样做的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:26:36.300

这应该这样做：

```
$(".choices-group").html($(".choice").get().reverse()); 
```

查看一个工作示例：

[http://jsfiddle.net/epignosisx/bX3Kf/](http://jsfiddle.net/epignosisx/bX3Kf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:45:12.517

使用 jquery：

```
$('.choices-group li').each(function(){
   $(this).parent().prepend(this);      
});​​​​​​ 
```

见 [jsFiddle](http://jsfiddle.net/MkMnx/5)

但更快的是使用纯javascript方法： ObjetNode.insertBefore(NewNode,NodePosition);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:21:50.047

我会做一个`$.each()`来获取 中的元素`ol`，颠倒顺序然后使用`$.html()`来重写 ol

请参阅[此处的 jquery 手册](http://api.jquery.com/jQuery.makeArray/)以获取此示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T15:26:51.590

这应该相当简单。我会使用 Javascript 对象来帮助管理它，其中关键部分（属性名称）是用于评估条件的值，而值是对 DOM 的引用。然后，您只需按正确的顺序将它们附加回`ol`。

```
var temp = {};
$.each('ol li', function(k, v){
   var $this = $(v);
   temp[$this.attr('someAttribute')] = $this;
});

/*some sorting logic and appending them back*/ 
```

这样，您可以根据需要对它们重新排序，而不仅仅是颠倒顺序。

# python - 字典属性的正则表达式

> ID：12898741
> 
> 赞同：0
> 
> 时间：2012-10-15T15:19:12.370
> 
> 标签：python, regex

我有一个 XML 片段，例如：

```
<CharacterBlock MinVal="-10.000000"  MaxVal="15.000000" Active="1"> 
```

我需要解析最小和最大浮点值。我不能使用像 ElementTree 这样的 XML 解析器，所以我不得不使用正则表达式。

我编写了以下 Python 正则表达式：

```
re.compile('<CharacterBlock MinVal="(?P<MinVal>-?[0-9]*\.?[0-9]*)" MaxVal="(?P<MaxVal>-?[0-9]*\.?[0-9]*)" .*?>', re.DOTALL) 
```

适用于上述代码段。但是由于 XML 属性就像一个字典，它们的顺序是不能保证的，有时我会收到如下代码片段：

```
<CharacterBlock Active="0" MaxVal="-15.000000" MinVal="-100.000000"> 
```

如果我想匹配的组的顺序不固定，我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:24:37.237

你能分别得到这两个值吗？像：

```
In [2]: s='<CharacterBlock Active="0" MaxVal="-15.000000" MinVal="-100.000000">'
In [3]: import re
In [4]: manReg='(?<=MaxVal=")[^"]*'
In [5]: minReg='(?<=MinVal=")[^"]*'

In [6]: re.findall(minReg, s)
Out[7]: ['-100.000000']

In [8]: re.findall(maxReg, s)
Out[9]: ['-15.000000'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:25:43.083

由于顺序不固定并且还有其他字段，因此您最好的选择是使用两个正则表达式，一个用于 MaxVal，另一个用于 MinVal。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:31:53.690

就像是：

```
for xmltag in re.finditer(r'<CharacterBlock.*?>', s):
    ismin = re.search(r'\bMinVal=["\'](.*?)[\'"]', xmltag.group(0))
    if ismin:
        min=ismin.group(1)
    ismax= re.search(r'\bMaxVal=["\'](.*?)[\'"]', xmltag.group(0))
    if ismax:
        max=ismax.group(1)
    if ismin and ismax:
        print "Min: %s,  Max %s" % (min, max) 
```

# c - 查找给定字符在数组中的每个位置

> ID：12898743
> 
> 赞同：1
> 
> 时间：2012-10-15T15:19:19.697
> 
> 标签：c, char, substring, performance

我做了一个小函数，它填充一个分配的内存块，其中包含给定字符串中给定字符的每个位置，并返回一个指向内存块的指针。

这个函数唯一的问题是没有办法检查内存块的大小；所以我还做了一个函数来计算字符串中给定字符的出现次数。

这是一个使用示例：

```
/*count occurences of char within a given string*/
size_t strchroc(const char *str, const char ch)
{ 
    int c = 0;
    while(*str) if(*(str++) == ch) c++;
    return c;
}

/*build array of positions of given char occurences within a given string*/
int *chrpos(const char *str, const char ch)
{
    int *array, *tmp, c = 0, i = 0;

    if(!(array = malloc(strlen(str) * sizeof(int)))) return 0x00;
    while(str[c])
    {
        if(str[c] == ch) array[i++] = c;
        c++;
    }
    if(!(tmp = realloc(array, i * sizeof(int)))) return 0x00;
    array = tmp;
    return array;
}

int main(void)
{
    char *str = "foobar foobar";                //'o' occurs at str[1], str[2], str[8], and str[9]
    int *array, b = 0, d;

    if(!(array = chrpos(str, 'o'))) exit(1);    //array[0] = 1, array[1] = 2, array[2] = 8, array[3] = 9

    /*
     * This is okay since I know that 'o'
     * only occures 4 times in str. There
     * may however be cases where I do not
     * know how many times a given char 
     * occurs so I figure that out before
     * utilizing the contents of array.
     * I do this with my function strchroc.
     * Below is a sample of how I would 
     * utilize the data contained within
     * array. This simply prints out str
     * and on a new line prints the given
     * char's location within the str 
     * array
     */

    puts(str);
    while(b < (int) strchroc(str, 'o'))         //loop once for each 'o' 
    {
        for(d = 0; d < (b == 0 ? array[b] : array[b] - array[b - 1] - 1); d++) putc((int) ' ', stdout);
        printf("%d", array[b]);
        b++;
    }
} 
```

输出：

```
foobar foobar
 12     89 
```

我唯一担心的是，如果这两个功能之一失败，则无法正确使用数据。我正在考虑`char`将字符串中出现的次数作为参数，`chrpos`但即便如此我仍然必须调用这两个函数。

我想知道是否有人对如何做到这一点有任何建议，这样我只需要一个函数来构建数组。

我能想到的唯一方法是将 char 出现的次数`array[0]`存储`array[1] through array[char_occurences]`到`char`.

如果有人有更好的主意，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:42:53.743

您可以更改您的函数，以便它也“返回”找到的出现次数。虽然我们实际上不能从 C 中的函数返回多个值，但我们可以将指针作为参数传递，并让函数使用该指针写下一个值：

```
int *chrpos(const char *str, char ch, int *found) {
    /* 
    ...
    */
    *found = i;
    return array;
} 
```

请注意，您不需要`const`修饰符 for `ch`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:45:45.700

正如我的评论中所述，第一件事是无论如何都要保存数据，以防您无法缩小分配的内存：

```
if (!(tmp = realloc(array, i * sizeof(int))))
  return array;
return (tmp); //array = tmp; is useless 
```

如果您想多一点保护您的 strchroc 函数，请`if (!str) return 0;`在开头添加 a 。

# xaml - XAML 中的 DataContext 和 Command 一起使用时不起作用

> ID：12898755
> 
> 赞同：0
> 
> 时间：2012-10-15T15:19:51.980
> 
> 标签：xaml, windows-8, microsoft-metro

我有一个按钮，当我使用 datacontext 和命令时，命令不起作用：

```
 <Button  DataContext="{Binding horaires}" Style="{StaticResource RefreshAppBarButtonStyle}" AutomationProperties.Name="{Binding HomeAppBarTitle, Converter={StaticResource StringResourceConverter}}"  Command="{Binding RefreshCommand}" ></Button> 
```

当我删除数据上下文并手动设置名称时，它的工作原理：

```
<Button Style="{StaticResource RefreshAppBarButtonStyle}" AutomationProperties.Name="Actualiser"  Command="{Binding RefreshCommand}" ></Button> 
```

可能是什么问题？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:01:16.837

有`horaires`一个属性叫? `RefreshCommand`我猜不是因为你说它没有`DataContext`设置就可以工作。

您需要删除`DataContext`绑定并更改`AutomationProperties.Name`属性绑定以使用如下`horaires`前缀：

```
<Button  AutomationProperties.Name="{Binding horaires.HomeAppBarTitle, Converter={StaticResource StringResourceConverter}}"  
         Command="{Binding RefreshCommand}" /> 
```

或者使用 a `RelativeSource`or`ElementName`绑定来查找包含你的 UI`RefreshCommand`元素`DataContext`。例如，

```
<Button  DataContext="{Binding horaires}"
         AutomationProperties.Name="{Binding HomeAppBarTitle, Converter={StaticResource StringResourceConverter}}"  
         Command="{Binding DataContext.RefreshCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" /> 
```

就个人而言，我会选择第一个，因为我喜欢尽可能避免`DataContext`明确设置。UI 应该反映其背后的数据，并`DataContext`手动设置更改此层次结构。

# xml - Google Merchants 中的 XML 出现神秘错误

> ID：12898756
> 
> 赞同：0
> 
> 时间：2012-10-15T15:19:59.483
> 
> 标签：xml, upload, virtuemart, shop

我在 php 中编写了一个导出器，从 mysql db 中提取数据。标签是合适的，我希望结构是有效的，但是 smeg [1](http://en.wikipedia.org/wiki/Smeg_(vulgarism)#Smeg)知道为什么（我找不到错误）它不想使用指向我商店中产品的 XML 链接。它说： 格式化 XML 错误。系统无法处理源[2](http://stepolabs.com/lab/stuff/error.png)。我正在添加图片。

有没有人有过这类问题的经验？谢谢你的建议！

步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:24:00.590

从图片看起来你的 xml 中有 & 字符。xml 中的 & 表示一个实体，xml 文件中的实体看起来像 &{name}; （例如“）。在我看来，解析器期待';' 这将定义 &flypage; 实体。显然这不是这里的意图。在 Xml 文件中 & 应该写为 & - 例如 ...&flypage=...

# wpf - 使用按钮更改模板，无需代码

> ID：12898766
> 
> 赞同：3
> 
> 时间：2012-10-15T15:20:32.107
> 
> 标签：wpf, xaml

我有一个带有 Listview 的 XAML 代码。现在我想用一个按钮更改 CellTemplate 但没有后面的代码。我怎样才能做到这一点？

模板：

```
<DataTemplate x:Key="URL"  >
  <TextBlock>
    <Hyperlink NavigateUri="{Binding XPath=@URL}">
      <TextBlock Text="{Binding XPath=@URL}"/>
    </Hyperlink>
  </TextBlock>
</DataTemplate>

<DataTemplate x:Key="Text">
  <TextBlock Text="{Binding XPath=@URL}"/>
</DataTemplate>    

<Grid>  
<Grid.Resources>
  <XmlDataProvider x:Key="Data">
    <x:XData>
      <Data xmlns="">
        <Item ID="1" Desc="Google" URL="http://www.google.com" Acceptable="true"/>
        <Item ID="2" Desc="StackOverflow" URL="http://www.stackoverflow.com" Acceptable="true"/>
        <Item ID="3" Desc="4chan" URL="http://www.4chan.org" Acceptable="false"/>
      </Data>
    </x:XData>
  </XmlDataProvider>
</Grid.Resources>
<Grid.ColumnDefinitions>
  <ColumnDefinition Width="100"/>
  <ColumnDefinition Width="300"/>
</Grid.ColumnDefinitions> 
```

这是应该发生魔术并从 URLColumn 设置 CellTemplate 的按钮。单击此按钮时，我希望将 Text 作为 CellTemplate 。

```
<Button Grid.Column="0" 
  Name="Text"
  Content="Text"/> 
```

Listview 与 GridViewColumn URLColumn。我想改变它的 CellTemplate。

```
<ListView 
  Grid.Column="1"
  DataContext="{Binding Source={StaticResource Data}, XPath=/Data}"
  ItemsSource="{Binding XPath=Item}">
  <ListView.View>
    <GridView>
      <GridViewColumn Header="ID" DisplayMemberBinding="{Binding XPath=@ID}"/>
      <GridViewColumn Header="Description" DisplayMemberBinding="{Binding XPath=@Desc}"/>
      <GridViewColumn x:Key="URLColumn" Header="URL" CellTemplate="{StaticResource URL}"/>
      <GridViewColumn Header="Acceptable">
        <GridViewColumn.CellTemplate>
          <DataTemplate>
            <CheckBox IsChecked="{Binding XPath=@Acceptable}"/>
          </DataTemplate>
        </GridViewColumn.CellTemplate>
      </GridViewColumn>
    </GridView>
  </ListView.View>
  </ListView> 
```

这可能没有代码吗？如果是这样，怎么做？我已经在互联网上搜索了一整天，但找不到答案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:33:06.843

首先安装 Expression Blend Interactivity NuGet 包（或`Microsoft.Expression.Interactions.dll`手动添加对 Expression Blend SDK 的引用）：

```
Install-Package Blend.Interactivity.Wpf 
```

然后使用`ChangePropertyAction`触发动作：

```
<Button
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:ic="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" Grid.Column="0" Name="Text" Content="Text">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <ic:ChangePropertyAction TargetName="URLColumn" PropertyName="CellTemplate" Value="{StaticResource Text}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

# racket - 如何在 Racket 中获取程序名称？

> ID：12898774
> 
> 赞同：7
> 
> 时间：2012-10-15T15:20:46.340
> 
> 标签：racket

我想以编程方式检测 Racket 代码中的程序名称。这可以在鸡计划中通过以下方式完成：

```
#!/bin/sh
#|
exec csi -ss $0 ${1+"$@"}
exit
|#

(define (main)
    (display (format "Program: ~a\n" (program-name)))
    (exit))

(if (not (equal? (program-name) "csi"))
    (main)) 
```

我怎么能在球拍中模仿这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T15:53:40.390

这是你想要的吗？

```
(find-system-path 'run-file) 
```

另请参阅`racket/cmdline`如何解析命令行。

[http://docs.racket-lang.org/reference/Command-Line_Parsing.html](http://docs.racket-lang.org/reference/Command-Line_Parsing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T19:21:44.217

注意：对于这种特定的执行模式，要拥有一个也可以作为主模块运行的库模块，请使用名为**main的**[子模块](http://docs.racket-lang.org/guide/Module_Syntax.html#%28tech._submodule%29)。请参阅[Main 和 Test Submodules](http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._main-and-test%29)，其中显示了如何执行此操作。

# php - JQuery/Ajax 表单未提交

> ID：12898776
> 
> 赞同：0
> 
> 时间：2012-10-15T15:20:55.987
> 
> 标签：php, jquery, ajax, forms

我在这个问题上大发雷霆——我有一个搜索 MySQL 数据库并在表格中返回结果的页面。我希望用户能够更新结果，从而更新 MySQL 数据库。第一部分工作正常，我在页面上有一个搜索框，它使用 jQuery/ajax 来查询数据库并显示结果，例如：

```
<form class="well" id="jquery-submit-ajax" method="post">
    <input type="text" name="userSearch" placeholder="Search…">
    <label>Name/Email/id</label>
    <Br />
    <input type="submit" id="searchButton" value="Search">
</form>

<div class="alert alert-success hide">
    <div id="success-output" class="prettyprint"></div>
</div>
<div id="loading-image" class="alert hide" style="text-align:center">
    <img src="../images/ajax-loader.gif" /></div>
    <div class="alert alert-error hide">
        <div id="error-output" class="prettyprint"></div>
    </div>
</div> 
```

和 jQuery：

```
$("#jquery-submit-ajax").submit(function(e) {
    $('#loading-image').fadeIn();
    $.ajax({
        type: "POST",
        url: "jquery-ajax-control.php",
        data: $(e.target).serialize(),
        dataType: "html",
        beforeSend:function(){
            $('.alert-error,.alert-success').hide();
        },
        error: function(jqXHR, textStatus, errorThrown){
            $('#loading-image').hide();
            $('.alert-error').fadeIn();
            $('#error-output').html(errorThrown);
        },
        success: function(data){
            $('#loading-image').hide();
            $('.alert-success').fadeIn();
            $('#success-output').html(data);
        }
    });
    return false;
}); 
```

所以结果被解析成每个结果的表。该表中有一个带有提交按钮的表单。例如：

```
<form method="post">
<table>
<tr>
    <td><input type="text" class="editbox" name="subs-expiry" value="<?php echo $expiry_date; ?>"</td>
</tr>
</table>
<input type="submit" class="updateSubsButtons" value="Update" />
</form> 
```

我试图再次通过 jQuery/Ajax 提交此表单，但我无法让它工作。按下更新按钮会刷新整个页面。我已经为这个按钮剥离了 jQuery，只在按下按钮时显示一个警报，但即使这样也不起作用。

```
$(".updateSubsButtons").on("submit", function(e){
    alert("clicked");
    e.preventDefault();
}); 
```

使用 Chrome 调试器，函数中的断点永远不会被击中，所以也许 jQuery 找不到按钮？我已经尝试过 .on() 和 .live() 函数，但我得到了相同的结果。我真的无法弄清楚这里发生了什么，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:24:30.403

尝试用一个按钮和一个“点击”事件替换它。

```
<button class="updateSubsButtons">Update</button>

$(".updateSubsButtons").on("click", function(e){
    alert("clicked");
    console.log(e);
    e.preventDefault();
}); 
```

以下是处理异步加载项目的方法（添加是因为这是实际解决问题的方式。）：

```
$(".AlreadyLoadedParent").on("click",'.buttonYouWantToClick', function(e){
    alert("clicked");
    console.log(e);
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:47:17.513

首先，您“单击”一个按钮，而不是“提交”它。您提交表格。所以你应该使用事件“点击”。

其次，如果应该触发 jQuery 代码的按钮是使用 AJAX 加载的，您应该使用 .live() 函数绑定事件，如下所示：

```
$('.updateSubsButtons').live('click', function(e) {
    e.preventDefault();
    // Your code here...
} 
```

这样，即使在页面加载后，click 事件也会绑定到每个带有 class="updateSubsButtons" 的新对象。如果您使用 $('.identifier').click() 它仅适用于页面加载时已加载的对象，不适用于通过 AJAX 加载的元素。

# c# - C# OnClientClick="aspnetForm.target='_blank';"

> ID：12898778
> 
> 赞同：2
> 
> 时间：2012-10-15T15:21:02.540
> 
> 标签：c#, redirect, response.redirect

我正在使用`OnClientClick="aspnetForm.target='_blank';"`哪个工作正常，但是如何分配新的窗口大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:23:25.583

不要以这种方式嵌入 ，而是`.target`创建一个 JavaScript 函数，该函数将打开新窗口（使用`window.open`）并传入所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:26:09.220

您可以在后面的代码中使用：

```
button.Attributes.Add("onclick", "javascript:myFunction(500, 500);"); 
```

然后有一个javascript函数：

```
myFunction(var width, var height) {
    window.open ("http://mydomain.com", "mywindow","menubar=1,resizable=1,width=" + width + ",height=" + height);
} 
```

# objective-c - 发布二进制文件中的堆栈溢出，但在 Xcode-Debugger 中没有

> ID：12898783
> 
> 赞同：1
> 
> 时间：2012-10-15T15:21:11.493
> 
> 标签：objective-c, xcode, macos, cocoa, crash-reports

当我从 Xcode 中启动它时，我的 (Cocoa)-App 运行得非常好。但是，当我存档/发布它时，该版本会崩溃。弹出的错误报告器说：

```
[...]    
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
[9082] stack overflow

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff944a7212 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff9290caf4 pthread_kill + 90
2   libsystem_c.dylib               0x00007fff92950e9e __abort + 159
3   libsystem_c.dylib               0x00007fff92951d17 __stack_chk_fail + 195
[...] 
```

虽然它也给了我执行停止的代码行，但这确实对我没有帮助，因为在调试模式下执行完全相同的代码路径（但成功）。

所以我想知道：实际上可能是版本和调试版本的堆栈大小不同？Mac（64 位/Mountain Lion）上的堆栈到底有多大？我不知道在堆栈上放了很多数据......

如果堆栈上有太多数据，我需要避免哪些模式来减少堆栈负载？

**[更新]**

好的，我通过添加`-fno-stack-protector`标志运行了我的应用程序。（顺便说一句：我正在使用 LLVM 进行编译）

在此之前，我逐行浏览了崩溃的代码，发现了以下我不明白的行为：方法`foo(x)`调用`bacon(x)`. `x`是 8 并且从`foo`到`bacon`没有修改。然而，当我踏入时`bacon(x)`，`x`突然是 4295939448（每次）。如果我设置`-fno-stack-protector`的值是正确的。

在我天真的眼里，这看起来好像堆栈保护器在堆栈中的某个位置设置了魔法值 4295939448 并使其只读。虽然我的函数将它们的参数放在堆栈上，但有时参数`x`恰好放在那个魔术地址上，因此无法写入（后续参数似乎被正确写入）。在我的例子`x`中是一个缓冲区长度参数，它自然会导致缓冲区溢出和崩溃。

有人对堆栈保护器有更深入的了解吗？为什么会这样？在什么情况下禁用堆栈保护器是安全和合法的，在什么情况下是危险的？

**[更新2：原始代码]**

此方法调用`Decrypt`下面的另一个。此时的 stIVLen 为 8

```
BOOL CEracomSE::Decrypt(
PBYTE pMsg, size_t stLen,
const CSK* pKey /* = NULL */,
PBYTE pIV /* = NULL */, size_t stIVLen /* = 0 */,
FBM fbm /* = FBM_CBC */,
PADDING padding /* = NO_PADDING */
)
{
    //stIVLen == 8
    return Decrypt( (uint64_t)0, pMsg, stLen, pKey, pIV, stIVLen, fbm, padding ); 
} 
```

调用时`Decrypt`stIVLen是4295939448，其他参数还是正确的

```
BOOL CEracomSE::Decrypt(
    uint64_t qwOffset, 
    PBYTE pMsg, size_t stLen,
    const CSK* pKey /* = NULL */,
    PBYTE pIV /* = NULL */, size_t stIVLen /* = 0 */,
    FBM fbm /* = FBM_CBC */,
    PADDING padding /* = NO_PADDING */
    )
{
    //stIVLen now is 4295939448
    BYTE a_iv[16] = {0};
    size_t a_iv_len;
    BYTE a_key[32] = {0};
    size_t a_key_len = 0;
    size_t nBytes;
    size_t nDataOffset;
    size_t nRemainingData = stLen;
    bool ret;
    //[...]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T08:22:33.387

我最近在我的应用程序中遇到了这种情况。我知道这是一个旧线程，但无论如何都会做出回应，目的是让其他人可以从调查结果中受益。

通过`-fno-stack-protector`确实解决了问题中建议的问题。然而，深入挖掘我们发现，将所有出现的文字数组声明更改为更长的声明确实解决了问题，而无需传递编译器标志。

所以改变所有出现的

```
@[@(1), @(2)] 
```

至

```
[NSArray arrayWithObjects:@(1), @(2), nil] 
```

可能仅适用于我们的应用程序，但希望它也能帮助其他人。

# php - PHP表单在错误后仍然发送

> ID：12898784
> 
> 赞同：-2
> 
> 时间：2012-10-15T15:21:12.027
> 
> 标签：php, forms

我是 PHP 新手，所以请耐心等待这个相当简单的问题。

我有一个这样的 PHP 表单设置 >>

```
<?php
    if($_POST){
        $name = $_POST['name'];
        $email = $_POST['email'];
        $message = $_POST['message'];
        $comments = $_POST['comments'];

        if($comments)
            $error = "There was an error, please give us a call at ### ###-####.";
        else{
            if($name=="Name" || $email=="Email" || $message=="Message"){
                $error = "All fields are required, please fill them out and try again.";
            }else
            $header = "From: $name <$email>";
                $message = "Name: $name\n\nEmail: $email\n\nMessage: $message";
                if(mail("email@domain.com", 'Form Submission', $message, $header))
                    $success = "Thanks for sending us your message, we'll get back to you shortly.";
                else
                    $error = "There was an error, please give us a call at ### ###-####.";
        }
        if($error)
            echo '<div class="msg error">'.$error.'</div>';
        elseif($success)
            echo '<div class="msg success">'.$success.'</div>';
    }
?> 
```

基本思想是表单在每个字段中都预先填写了描述性文本，但是当您单击它们时，它们会通过 Javascript 清除。我想防止人们在不填写表格的情况下按发送，因此 "if($name=="Name" || $email=="Email" || $message=="Message"){" 位. 但是，虽然该消息正在工作，但表单仍在提交。为什么是这样。另请注意，“评论”字段实际上是一个蜜罐。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:22:38.283

因为php是服务器端的。您需要查看您想要的 javascript 验证。要使用 php 进行验证，您必须提交表单。

一个[教程](http://www.tutorialspoint.com/javascript/javascript_form_validations.htm)，但我推荐 Jquery[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:37:15.247

就像 lznogood 说的，PHP 在服务器上验证表单，所以你需要先将信息发送到服务器，然后 PHP 才能处理它。

如果您希望在将表单发送到服务器之前在用户端检查表单，您应该使用 JavaScript 来执行此操作（jQuery 是一个很好的工具），在用户端检查后，您可以决定是否发送表单到服务器与否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:16:36.523

虽然这不是您问题的答案，但您可能对新的 html5 功能感兴趣`placeholder`。[在这里](http://davidwalsh.name/html5-placeholder)阅读。[您可以在这里](http://caniuse.com/#search=placeholder)查看它适用于哪些浏览器（愚蠢的 Internet Explorer！）。5 年前，我会将那些“提示”作为值，这很难验证。 `placeholder`让它更容易。您的标签将如下所示：

`<input type="text" name="email" placeholder="Enter Your Email Here" value="">`

请注意，该值为空。您可以省略 value 属性，我将其保留以表明此处不需要它。

至于你原来的问题的答案，其他人都是正确的，javascript是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:26:52.307

“我想防止人们在不填写表格的情况下按发送，因此“if($name=="Name" || $email=="Email" || $message=="Message"){"

您需要做的就是禁用提交按钮客户端，直到满足正确的验证，然后还要验证服务器端。正如@Iznogood 所说，这就是你犯错误的原因

# vaadin - web.xml url-pattern - 为应用程序范围提供更具体的服务

> ID：12898788
> 
> 赞同：0
> 
> 时间：2012-10-15T15:21:25.563
> 
> 标签：vaadin, web.xml, jnlp, url-pattern

我正在学习 Vaadin 和 Java Web 开发。Vaadin 建议`com.vaadin.server.VaadinServlet`通过使用`<url-pattern>/*</url-pattern>`web.xml 将所有 URL 重定向到。我还想用单独的 servlet 处理一些额外的 URL，例如：

```
<servlet-mapping>
    <servlet-name>JnlpGenerator</servlet-name>
    <url-pattern>*.jnlp</url-pattern>
</servlet-mapping> 
```

有什么方法可以实现这一点，同时拥有如此广泛的模式`/*`？在我当前的配置中，任何对 eg 的调用都将`http://localhost:8080/myapp/applet.jnlp`被忽略，因为`/*`接管并启动 Vaadin 应用程序。

我会很感激一些帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:28:57.360

如果您可以扩展`com.vaadin.server.VaadinServlet`，请这样做并使用`request.getRequestDispatcher().forward()`将您的 url 模式转发`*.jnlp`到`JnlpGenerator`. 对于其他 URL 模式，通过调用`super`方法进行常规操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T10:18:07.390

实际上，您只需要绑定以下 URI 即可使 vaading 正常工作：`/VAADIN/*, /root_URI_for_vaadin_app/*`

我的一个项目的示例：

```
@WebServlet(name = "vaadinServlet",
        urlPatterns = {"/app/*", "/VAADIN/*"},
        asyncSupported = false,
        initParams = {@WebInitParam(
                name = "widgetset",
                value = "com.vaadin.DefaultWidgetSet"
        )}
)
@VaadinServletConfiguration(productionMode = false, ui = MainUi.class)
public class AppServlet extends VaadinServlet {} 
```

然后，您可以将任何 servlet 绑定到任何 URI，它们应该与 Vaadin 一起正常工作。

# r - 如何ddply嵌套列表

> ID：12898789
> 
> 赞同：3
> 
> 时间：2012-10-15T15:21:27.393
> 
> 标签：r, plyr

我有一个嵌套列表，需要计算 frt 和 srt 的相关性

```
 $`bs. bs`
    fapp  frt sapp  srt
1   bs 2280   bs 0.25
2   bs 2287   bs 0.25
3   bs 2288   bs 0.25
4   bs 2289   bs 0.25

$`bs. lhc`
    fapp  frt sapp      srt
5   bs 2320  lhc 0.250000
6   bs 2333  lhc 0.250214
7   bs 2524  lhc 0.316449 
```

来源：

```
 structure(list(`bs. bs` = structure(list(fapp = structure(c(1L,
    1L, 1L, 1L), .Label = "bs", class = "factor"), frt = c(2280L,
    2287L, 2288L, 2289L), sapp = structure(c(1L, 1L, 1L, 1L), .Label = c(" bs",
    " lhc"), class = "factor"), srt = c(0.25, 0.25, 0.25, 0.25)), .Names = c("fapp",
    "frt", "sapp", "srt"), row.names = c(NA, 4L), class = "data.frame"),
   `bs. lhc` = structure(list(fapp = structure(c(1L, 1L, 1L), .Label = "bs", class=         "factor"),
    frt = c(2320L, 2333L, 2524L), sapp = structure(c(2L,
    2L, 2L), .Label = c(" bs", " lhc"), class = "factor"),
    srt = c(0.25, 0.250214, 0.316449)), .Names = c("fapp",
"frt", "sapp", "srt"), row.names = 5:7, class = "data.frame")), .Names = c("bs. bs",
   "bs. lhc")) 
```

就像是

```
 ddply(y,.(fapp + sapp),cor) 
```

或者

```
 ddply(y,.(fapp,sapp),cor) 
```

不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:45:16.737

```
> ldply(y, function(x) { x$corr <- cor(x$frt, x$srt); x })
      .id fapp  frt sapp      srt      corr
1  bs. bs   bs 2280   bs 0.250000        NA
2  bs. bs   bs 2287   bs 0.250000        NA
3  bs. bs   bs 2288   bs 0.250000        NA
4  bs. bs   bs 2289   bs 0.250000        NA
5 bs. lhc   bs 2320  lhc 0.250000 0.9985343
6 bs. lhc   bs 2333  lhc 0.250214 0.9985343
7 bs. lhc   bs 2524  lhc 0.316449 0.9985343
Warning message:
In cor(x$frt, x$srt) : the standard deviation is zero
Calls: ldply -> llply -> structure -> lapply -> FUN -> cor 
```

或将结果保留为列表

```
> llply(y, function(x) { x$corr <- cor(x$frt, x$srt); x })
$`bs. bs`
  fapp  frt sapp  srt corr
1   bs 2280   bs 0.25   NA
2   bs 2287   bs 0.25   NA
3   bs 2288   bs 0.25   NA
4   bs 2289   bs 0.25   NA

$`bs. lhc`
  fapp  frt sapp      srt      corr
5   bs 2320  lhc 0.250000 0.9985343
6   bs 2333  lhc 0.250214 0.9985343
7   bs 2524  lhc 0.316449 0.9985343

Warning message:
In cor(x$frt, x$srt) : the standard deviation is zero
Calls: llply -> structure -> lapply -> FUN -> cor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:22:24.960

您想使用`ldply`，它将您的函数应用于列表的元素，然后像您的第二个版本的调用这样的东西`ddply`应该可以工作。没有示例数据，我无法演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:25:35.647

`ddply`明确设计用于处理 data.frame 的。所以，我首先将列表的所有元素放在一个`data.frame`：

```
dat = do.call("rbind", nested_list) 
```

然后使用`ddply`：

```
ddply(dat, .(fapp, sapp), corr) 
```

# c# - CodeFirst 加载链接到 25 000 个孩子的 1 个父母很慢

> ID：12898790
> 
> 赞同：13
> 
> 时间：2012-10-15T15:21:35.490
> 
> 标签：c#, sql-server, entity-framework, orm, ef-code-first

我搜索了很多关于我的性能问题并尝试了各种不同的东西，但我似乎无法让它足够快地工作。这是我最简单形式的问题：

我正在使用实体框架 5，并且我希望能够在用户选择父级时延迟加载父级的子实例，因此我不必拉整个数据库。但是，我一直在延迟加载孩子时遇到性能问题。我认为问题在于父级和子级之间的导航属性的连接。我也认为这一定是我做错了什么，因为我相信这是一个简单的案例。

所以我提出了一个程序来测试单个延迟加载以隔离问题。

这是测试：

我创建了一个 POCO 父类和一个子 POCO 类。父母有 n 个孩子，孩子有 1 个父母。SQL Server 数据库中只有 1 个父级，而该单父级有 25 000 个子级。我尝试了不同的方法来加载这些数据。每当我在同一个 DbContext 中加载子项和父项时，都需要很长时间。但是如果我将它们加载到不同的 DbContexts 中，它的加载速度会非常快。但是，我希望这些实例位于同一个 DbContext 中。

**这是我的测试设置以及复制它所需的一切：**

**POCO：**

```
public class Parent
{
    public int ParentId { get; set; }

    public string Name { get; set; }

    public virtual List<Child> Childs { get; set; }
}

public class Child
{
    public int ChildId { get; set; }

    public int ParentId { get; set; }

    public string Name { get; set; }

    public virtual Parent Parent { get; set; }
} 
```

**数据库上下文：**

```
public class Entities : DbContext
{
    public DbSet<Parent> Parents { get; set; }

    public DbSet<Child> Childs { get; set; }
} 
```

**用于创建数据库和数据的 TSQL 脚本：**

```
USE [master]
GO

IF EXISTS(SELECT name FROM sys.databases
    WHERE name = 'PerformanceParentChild')
    alter database [PerformanceParentChild] set single_user with rollback immediate
    DROP DATABASE [PerformanceParentChild]
GO

CREATE DATABASE [PerformanceParentChild]
GO
USE [PerformanceParentChild]
GO
BEGIN TRAN T1;
SET NOCOUNT ON

CREATE TABLE [dbo].[Parents]
(
    [ParentId] [int] CONSTRAINT PK_Parents PRIMARY KEY,
    [Name] [nvarchar](200) NULL
)
GO

CREATE TABLE [dbo].[Children]
(
    [ChildId] [int] CONSTRAINT PK_Children PRIMARY KEY,
    [ParentId] [int] NOT NULL,
    [Name] [nvarchar](200) NULL
)
GO

INSERT INTO Parents (ParentId, Name)
VALUES (1, 'Parent')

DECLARE @nbChildren int;
DECLARE @childId int;

SET @nbChildren = 25000;
SET @childId = 0;

WHILE @childId < @nbChildren
BEGIN
   SET @childId = @childId + 1;
   INSERT INTO [dbo].[Children] (ChildId, ParentId, Name)
   VALUES (@childId, 1, 'Child #' + convert(nvarchar(5), @childId))
END

CREATE NONCLUSTERED INDEX [IX_ParentId] ON [dbo].[Children] 
(
    [ParentId] ASC
)
GO

ALTER TABLE [dbo].[Children] ADD CONSTRAINT [FK_Children.Parents_ParentId] FOREIGN KEY([ParentId])
REFERENCES [dbo].[Parents] ([ParentId])
GO

COMMIT TRAN T1; 
```

**App.config 包含连接字符串：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add
      name="Entities"
      providerName="System.Data.SqlClient"
      connectionString="Server=localhost;Database=PerformanceParentChild;Trusted_Connection=true;"/>
  </connectionStrings>
</configuration> 
```

**测试控制台类：**

```
class Program
{
    static void Main(string[] args)
    {
        List<Parent> parents;
        List<Child> children;

        Entities entities;
        DateTime before;
        TimeSpan childrenLoadElapsed;
        TimeSpan parentLoadElapsed;

        using (entities = new Entities())
        {
            before = DateTime.Now;
            parents = entities.Parents.ToList();
            parentLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load only the parent from DbSet:" + parentLoadElapsed.TotalSeconds + " seconds");
        }

        using (entities = new Entities())
        {
            before = DateTime.Now;
            children = entities.Childs.ToList();
            childrenLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load only the children from DbSet:" + childrenLoadElapsed.TotalSeconds + " seconds");
        }

        using (entities = new Entities())
        {
            before = DateTime.Now;
            parents = entities.Parents.ToList();
            parentLoadElapsed = DateTime.Now - before;

            before = DateTime.Now;
            children = entities.Childs.ToList();
            childrenLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load the parent from DbSet:" + parentLoadElapsed.TotalSeconds + " seconds" +
                                               ", then load the children from DbSet:" + childrenLoadElapsed.TotalSeconds + " seconds");
        }

        using (entities = new Entities())
        {
            before = DateTime.Now;
            children = entities.Childs.ToList();
            childrenLoadElapsed = DateTime.Now - before;

            before = DateTime.Now;
            parents = entities.Parents.ToList();
            parentLoadElapsed = DateTime.Now - before;

            System.Diagnostics.Debug.WriteLine("Load the children from DbSet:" + childrenLoadElapsed.TotalSeconds + " seconds" +
                                               ", then load the parent from DbSet:" + parentLoadElapsed.TotalSeconds + " seconds");
        }

        using (entities = new Entities())
        {
            before = DateTime.Now;
            parents = entities.Parents.ToList();
            parentLoadElapsed = DateTime.Now - before;

            before = DateTime.Now;
            children = parents[0].Childs;
            childrenLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load the parent from DbSet:" + parentLoadElapsed.TotalSeconds + " seconds" +
                                               ", then load the children from Parent's lazy loaded navigation property:" + childrenLoadElapsed.TotalSeconds + " seconds");
        }

        using (entities = new Entities())
        {
            before = DateTime.Now;
            parents = entities.Parents.Include(p => p.Childs).ToList();
            parentLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load the parent from DbSet and children from include:" + parentLoadElapsed.TotalSeconds + " seconds");

        }

        using (entities = new Entities())
        {
            entities.Configuration.ProxyCreationEnabled = false;
            entities.Configuration.AutoDetectChangesEnabled = false;
            entities.Configuration.LazyLoadingEnabled = false;
            entities.Configuration.ValidateOnSaveEnabled = false;

            before = DateTime.Now;
            parents = entities.Parents.Include(p => p.Childs).ToList();
            parentLoadElapsed = DateTime.Now - before;
            System.Diagnostics.Debug.WriteLine("Load the parent from DbSet and children from include:" + parentLoadElapsed.TotalSeconds + " seconds with everything turned off");

        }

    }
} 
```

**以下是这些测试的结果：**

仅从 DbSet 加载父级：0,972 秒

仅从 DbSet 加载子项：0,714 秒

从 DbSet:0,001 秒加载父级，然后从 DbSet:8,6026 秒加载子级

从 DbSet:0,6864 秒加载子项，然后从 DbSet:7,5816159 秒加载父项

从 DbSet 加载父级：0 秒，然后从父级延迟加载的导航属性加载子级：8,5644549 秒

从 DbSet 加载父级，从 include:8,6428788 秒加载子级

从 DbSet 加载父级，从 include:9,1416586 秒加载父级，所有内容都关闭

**分析**

每当父级和子级位于同一个 DbContext 中时，需要很长时间（9 秒）才能将所有内容连接起来。我什至尝试关闭从代理创建到延迟加载的所有内容，但无济于事。有人可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:24:51.850

这不是答案，因为我没有提高性能的解决方案，但评论部分没有足够的空间容纳以下内容。我只想添加一些额外的测试和观察。

首先，我几乎可以准确地再现所有七个测试的测量时间。我使用 EF 4.1 进行测试。

一些有趣的事情需要注意：

*   从（快速）测试 2 我可以得出结论，对象物化（将从数据库服务器返回的行和列转换为对象）并不慢。

*   这也可以通过在测试 3 中加载实体而不进行更改跟踪来确认：

    ```
    parents = entities.Parents.AsNoTracking().ToList();
    // ...
    children = entities.Childs.AsNoTracking().ToList(); 
    ```

    尽管还必须物化 25001 个对象，但此代码运行速度很快（但导航属性之间不会建立任何关系！）。

*   同样从（快速）测试 2 中，我得出结论，为更改跟踪创建实体快照并不慢。

*   在测试 3 和 4 中，当从数据库加载实体时，父级和 25000 个子级之间的关系得到修复，即 EF 将所有`Child`实体添加到父级的`Childs`集合`Parent`中，并将每个子级中的 设置为加载的父级。显然，这一步很慢，正如您已经猜到的：

    > 我认为问题在于父级和子级之间的导航属性的连接。

    尤其是关系的集合方面似乎是问题：如果您在类中注释掉`Childs`导航属性`Parent`（关系仍然是必需的一对多关系），测试 3 和 4 很快，尽管 EF 仍然设置`Parent`所有 25000 个`Child`实体的财产。

    我不知道为什么在关系修复期间填充导航集合如此缓慢。如果您以天真的方式手动模拟它，就像这样......

    ```
    entities.Configuration.ProxyCreationEnabled = false;

    children = entities.Childs.AsNoTracking().ToList();
    parents = entities.Parents.AsNoTracking().ToList();

    parents[0].Childs = new List<Child>();
    foreach (var c in children)
    {
        if (c.ParentId == parents[0].ParentId)
        {
            c.Parent = parents[0];
            parents[0].Childs.Add(c);
        }
    } 
    ```

    ……进展很快。显然，内部关系修复不能以这种简单的方式工作。也许需要检查集合是否已经包含要测试的孩子：

    ```
    foreach (var c in children)
    {
        if (c.ParentId == parents[0].ParentId)
        {
            c.Parent = parents[0];
            if (!parents[0].Childs.Contains(c))
                parents[0].Childs.Add(c);
        }
    } 
    ```

    这要慢得多（大约 4 秒）。

无论如何，关系修复似乎是性能瓶颈。如果您需要更改跟踪和正确连接实体之间的关系，我不知道如何改进它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T21:37:45.623

我之前回答过[类似的问题](https://stackoverflow.com/questions/7403149/entity-framework-performance-issue/7404958#7404958)。我之前的回答包含回答这个问题的理论，但是通过你的详细问题，我可以直接指出问题所在。首先让我们使用性能分析器运行一个有问题的案例。这是使用跟踪模式时 DotTrace 的结果：

![在此处输入图像描述](../Images/f4919f14d32c8dbce1cbed10414f2d14.png)

修复关系循环运行。这意味着对于 25.000 条记录，您有 25.000 次迭代，但每次迭代都在内部`CheckIfNavigationPropertyContainsEntity`调用`EntityCollection`：

```
internal override bool CheckIfNavigationPropertyContainsEntity(IEntityWrapper wrapper)
{
    if (base.TargetAccessor.HasProperty)
    {
        object navigationPropertyValue = base.WrappedOwner.GetNavigationPropertyValue(this);
        if (navigationPropertyValue != null)
        {
            if (!(navigationPropertyValue is IEnumerable))
            {
                throw new EntityException(Strings.ObjectStateEntry_UnableToEnumerateCollection(base.TargetAccessor.PropertyName, base.WrappedOwner.Entity.GetType().FullName));
            }
            foreach (object obj3 in navigationPropertyValue as IEnumerable)
            {
                if (object.Equals(obj3, wrapper.Entity))
                {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

内部循环的迭代次数随着项目添加到导航属性而增加。数学在我之前的答案中 - 它是算术级数，其中内循环的迭代总数为 1/2 * (n^2 - n) => n^2 复杂度。在您的情况下，外循环内的内循环会导致 312.487.500 次迭代，性能跟踪也显示。

我为此问题[在 EF CodePlex 上创建了工作项。](https://entityframework.codeplex.com/workitem/591)

# javascript - ajax 不适用于数组

> ID：12898793
> 
> 赞同：0
> 
> 时间：2012-10-15T15:21:44.910
> 
> 标签：javascript, ajax

我正在尝试使用 ajax 将信息从我的文本文件加载到数组中，并且我正在使用以下代码：

```
function loadWords(){
    var xhr = new XMLHttpRequest();
    xhr.open('GET', "dico/francais.html");
    xhr.onreadystatechange = function(){
        if(xhr.readyState == xhr.DONE && xhr.status == 200){
            dico = xhr.responseText.split("\n");
            for(var i=0; i<wordsNBR; i++){
                var x = Math.floor(Math.random()*dico.length);
                words[i] = dico[x];
            }
        }
    }
    xhr.send(null);
} 
```

它的话，但当我试图改变

```
for(var i=0; i<wordsNBR; i++){
                var x = Math.floor(Math.random()*dico.length);
                words[i] = dico[x];
            } 
```

至

```
for(var i=0; i<wordsNBR; i++){
                var x = Math.floor(Math.random()*dico.length);
                words.push(dico.splice(x,1));
            } 
```

它不起作用任何机构知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:26:42.157

`dico.splice(x,1)`更改数组并返回删除的元素。`x`这可能对<有意义，`dico.length`因为它在 dico 数组中随机取一个单词。

所以我想你的第一个错误只是你使用了错误的变量。

另一个错误是[splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)返回一个数组而不仅仅是一个元素。如果你想要返回的元素，你需要采取`dico.splice(x,1)[0]`.

做这个 ：

```
var x = Math.floor(Math.random()*dico.length); // takes an index in what is left in dico
words.push(dico.splice(x,1)[0]); // removes the word and add it to words 
```

# eclipse - 通过 FTP 上的 RSE 与 FTP 连接

> ID：12898798
> 
> 赞同：0
> 
> 时间：2012-10-15T15:21:49.623
> 
> 标签：eclipse, ftp

我在 Ubuntu 12 上运行 Eclipse RSE。

每当我尝试与远程服务器建立连接时，都会出现错误：

> 425 无法打开到端口 50011 的数据连接：连接超时

请问有什么办法吗？

提前致谢

多姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:52:56.977

尝试为 FTP 启用被动模式。

在远程系统视图中，右键单击您的系统并选择属性。在连接器服务页面中，单击 FTP 设置服务并使用下拉列表将被动属性的值更改为 true。

# php - php解密从URL失败

> ID：12898802
> 
> 赞同：0
> 
> 时间：2012-10-15T15:22:09.930
> 
> 标签：php, encryption, mcrypt

我正在使用 php 解密来检查：回复请求的电子邮件地址与发送请求的电子邮件地址相同。

这是代码，但在底部它简单失败。

网址很简单：

```
blah.com/page?keyemail=fSHEk8KC17siklGHsj0HJA== 
```

下面的代码还显示了我为确保加密/解密工作正常所做的一些测试......我回显了代码以查看发生了什么

```
$key="XiTo74UI09wwe4YeUmuvbL0E";

$iv = mcrypt_create_iv (mcrypt_get_block_size (MCRYPT_TripleDES, MCRYPT_MODE_CBC), MCRYPT_DEV_RANDOM);

// Encrypting
function encrypt($string, $key) {
    $enc = "";
    global $iv;
    $enc=mcrypt_cbc (MCRYPT_TripleDES, $key, $string, MCRYPT_ENCRYPT, $iv);

  return base64_encode($enc);
}

// Decrypting
function decrypt($string, $key) {
    $dec = "";
    $string = trim(base64_decode($string));
    global $iv;
    $dec = mcrypt_cbc (MCRYPT_TripleDES, $key, $string, MCRYPT_DECRYPT, $iv);
  return $dec;
}

// test example
$email = 'me@me.com';

echo "email is $email<br /><br />";

$email_key = encrypt($email, $key);

echo "key is $email_key<br /><br />";

$email_key2 = decrypt($email_key, $key);

echo "decrypted is $email_key2<br /><br />";
// END test example, all is ok

// this is the code that fails
$to_de = $_GET[keyemail];

echo "keyemail again is $to_de<br /><br />";

$email_key3 = decrypt($to_de, $key);

echo $email_key3; 
```

当我回显 $email_key3 以某种方式编码时返回的内容 - 它应该是 me@me.com

我可能错过了一些明显的东西，但它让我失去了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:31:43.693

您不能`IV`在每个页面上生成新的 - 您必须将`IV`加密步骤存储在文件或数据库中 - 或将其附加到加密字符串。在下一页生成新的 IV 将不允许您解密字符串。

另外，如果可能的话，我会传递电子邮件的哈希值（加上盐）——而不是加密形式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T15:25:20.743

我注意到您使用的加密方法是添加随机盐。这意味着用相同的密钥加密相同的字符串不会产生相同的输出。尝试使用非随机 KDF。试试这个话题的答案：[https ://stackoverflow.com/a/1289114/1745542](https://stackoverflow.com/a/1289114/1745542)

# c# - 从 SQL 查询 c# 创建树/XML 结构

> ID：12898803
> 
> 赞同：2
> 
> 时间：2012-10-15T15:22:17.597
> 
> 标签：c#, xml

这是我当前的问题。我需要显示一个显示召回名册的树状结构。我们的 DBA 创建了一个返回 [level],[name],[contact_info] 的存储过程。

示例如下所示：

```
[1] [test name1] [contact info]
[2] [sub to1] [contact info]
[3] [sub to2] [contact info]
[4] [sub to3] [contact info]
[3] [sub to2] [contact info]
[2] [sub to1] [contact info] 
```

ETC...

它按层次结构的顺序排序

我并没有真正使用过 XML，但这是加载/呈现这些数据的方式。目前，当我检索数据时，我将其返回到数据表中。可能还需要将此数据导出到 Excel。

任何人都可以为我指出一个好的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:38:37.203

1) 不要相信任何你无法建立和操纵的数据结果顺序。从存储过程中检索数据的“标准”方式是数据读取器、数据表或数据集。您甚至可以使用实体框架来封装数据。他们都不能确保订单被保留。假设您的结果集将被订购是太冒险了。

2) 要求您的 DBA 在结果中包含层次结构信息（例如，具有父记录键的字段）

3）递归适用于层次结构问题。设计您的算法以从一个 xml 节点和一堆顶级记录开始。对于每条记录：添加一个新的 xmlnode 并进行递归调用，传递您刚刚添加的记录的子项。

4）如果预期结果很小（比如说几百条记录），您可以获取所有数据，将其存储在数据表中并使用 Filter 属性搜索特定记录。如果预期结果是几千条记录，请让您的 DBA 创建一个存储过程来读取一条记录的子记录，并为 xml 节点中的每条记录调用该过程。确保数据中没有循环:)

# python - 布尔比较的 Python 列表给出了奇怪的结果

> ID：12898804
> 
> 赞同：5
> 
> 时间：2012-10-15T15:22:23.447
> 
> 标签：python, list, comparison, boolean

我尝试：

```
[True,True,False] and [True,True,True] 
```

并得到 [True, True True]

但

```
[True,True,True] and [True,True,False] 
```

给

```
[True,True,False] 
```

不太清楚为什么它会给出这些奇怪的结果，即使在查看了其他一些 python 布尔比较问题之后也是如此。Integer 做同样的事情（替换上面的 True -> 1 和 False ->0 并且结果是一样的）。我错过了什么？我显然想要

```
[True,True,False] and [True,True,True] 
```

评价为

```
[True,True,False] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:33:36.563

其他人已经解释了发生了什么。这里有一些方法可以得到你想要的：

```
>>> a = [True, True, True]
>>> b = [True, True, False] 
```

使用 listcomp：

```
>>> [ai and bi for ai,bi in zip(a,b)]
[True, True, False] 
```

将`and_`函数与 a 一起使用`map`：

```
>>> from operator import and_
>>> map(and_, a, b)
[True, True, False] 
```

或者我喜欢的方式（尽管这确实需要`numpy`）：

```
>>> from numpy import array
>>> a = array([True, True, True])
>>> b = array([True, True, False])
>>> a & b
array([ True,  True, False], dtype=bool)
>>> a | b
array([ True,  True,  True], dtype=bool)
>>> a ^ b
array([False, False,  True], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T15:26:18.217

任何填充列表的计算结果为`True`。`True and x`产生`x`，第二个列表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T15:29:57.767

从[Python 文档](http://docs.python.org/reference/expressions.html#boolean-operations)：

> 表达式 x 和 y 首先计算 x；如果 x 为假，则返回其值；否则，评估 y 并返回结果值。

您将返回第二个值。

PS我以前也从未见过这种行为，我必须自己查一下。我天真的期望是布尔表达式会产生布尔结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T15:27:35.267

`[True, True, False]`被评估为布尔值（因为`and`运算符），并且评估为，`True`因为它是非空的。与 相同`[True, True, True]`。任一语句的结果就是`and`运算符之后的结果。

您可以`[ai and bi for ai, bi in zip(a, b)]`为列表`a`和`b`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T15:28:34.860

[`and`](http://docs.python.org/library/stdtypes.html?highlight=short%20circuit#boolean-operations-and-or-not)如果它们都被评估为 ，则返回最后一个元素`True`。

```
>>> 1 and 2 and 3
3 
```

这同样适用于列表，`True`如果它们不为空（如您的情况），则将其评估为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-15T15:33:18.260

据我所知，您需要浏览列表。尝试这种列表理解：

```
l1 = [True,True,False]
l2 = [True,True,True]
res = [ x and y for (x,y) in zip(l1, l2)]
print res 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T15:29:57.140

Python 通过将其布尔值短路并给出结果表达式作为结果来工作。填充列表的计算结果为 true，并将结果作为第二个列表的值。看看这个，当我刚刚交换了你的第一个和第二个列表的位置时。

```
In [3]: [True,True,True] and [True, True, False]
Out[3]: [True, True, False] 
```

# iphone - iOS/Objective-C 读取 4GB 或更大的压缩存档库？

> ID：12898811
> 
> 赞同：2
> 
> 时间：2012-10-15T15:22:38.743
> 
> 标签：iphone, objective-c, ios, zip

我试过使用：

1.  Objective-Zip
2.  ZipKit

两者都说他们有能力读取 4GB 或更大的压缩档案。有没有人能够使用上面提到的库之一成功地阅读非常大的压缩内容？

如果您知道更好的压缩存档库，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:29:35.987

只要 zip 库支持 PKWare 的 ZIP64 扩展名，它就应该能够处理超过 4GB 的大文件。

1.  Objective-Zip 使用支持 ZIP64 的 minizip 1.1。
2.  ZipKit 网站声明它支持 ZIP64 扩展。

这两个库都应该工作。我有使用 minizip 1.1 的经验，我确信它支持大文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T13:14:12.430

我遇到了同样的问题，并试图在几天内解决它。最后，我解决了。

按照我的指示，您可以毫无问题地在 iOS 中解压缩大文件（甚至 8GB）。

这是如何解决它的分步说明：

[1) 从https://github.com/flyingdolphinstudio/Objective-Zip](https://github.com/flyingdolphinstudio/Objective-Zip)下载 Objective-Zip

[2) 从https://github.com/nmoinvaz/minizip](https://github.com/nmoinvaz/minizip)下载 MiniZip

3) 从 minizip 文件夹（您在步骤 2 中下载）中获取 4 个文件 - ioapi.c、ioapi.h、unzip.c、unzip.h，并将其粘贴到 Objective-Zip/MiniZip 文件夹（覆盖文件）。

4) 转到 Objective-Zip/Objective-Zip/ZipFile.m 并替换此字符串

```
int err= unzLocateFile(_unzFile, [fileNameInZip cStringUsingEncoding:NSUTF8StringEncoding], 1); 
```

对此

```
int err= unzLocateFile(_unzFile, [fileNameInZip cStringUsingEncoding:NSUTF8StringEncoding], (unzFileNameComparer)1); 
```

5) 最后，将 Objective-Zip 添加到您的项目中，然后愉快地解压！:)

现在您可以在 iOS 中解压缩大文件。我检查了 8GB-zip，一切都像魅力一样！

PS：Objective-Zip 的开发者会尽快用我的修复更新它，所以这个指令仅适用于 Objective-Zip 0.8.1。

# documentation - 创建没有源代码的 javadoc 样式文档

> ID：12898812
> 
> 赞同：0
> 
> 时间：2012-10-15T15:22:38.790
> 
> 标签：documentation, javadoc, documentation-generation

我正在研究编写有关某些功能的文档，但不想在源代码中编写文档。

是否有我可以遵循的模板，例如 XML，或者可以生成某种 Javadoc 风格文档的模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:30:07.450

有[docbook](http://docbook.org/)，但公平地说，docbook 擅长书籍或手册样式的文档。它确实做网站文档，但它的网站往往不像 javadoc 那样紧密相连。 这是呈现给网站的 docbook 文档[的示例。](http://docbook.sourceforge.net/release/website/example/)

当您拥有一个在现实世界中没有演示文稿的“源文档”和一些必须包含从源文档构建的正确、最新信息的“渲染文档”时，Docbook 会表现出色。

很难理解您在寻找什么，主要是因为您似乎并不确定自己。Javadoc 是专门为记录 Java 代码而设计的文档，因此“没有源代码的类似 javadoc 的文档”很难遵循。也许如果您坐下来思考文档的主要部分，您会找到一个大纲（其中可能包含您想要使用的导航）。那么填空会容易得多，因为你有空白。

您可以使用 javadoc 引擎生成文档。它是非常可配置的；并支持两种插件。一个添加额外的“标签”，一个添加/覆盖额外的“布局”。然而，这些标签和布局在一个倾向于 Java 源代码的 API 上运行，因此“类之前的 javadoc 注释”调用一个有效处理该类的 javadoc 的方法。因此，如果没有 Java 源代码（或类似的源代码），您将拥有错误的底层 API（除非您可以根据需要对其进行调整）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:53:54.523

也许您正在寻找类似[Doxygen](http://www.doxygen.org/)的东西，这是一个 API 文档工具，也可用于编写其他文档（例如，doxygen 的手册是用 Doxygen 本身制作的，没有正常的源代码。）

另一个工具是[Sphinx](http://sphinx.pocoo.org/)，它也可以用于 API 文档以及没有源代码的手册（例如：Python 文档）。

# css - 导航按钮下的下拉菜单 css/html

> ID：12898814
> 
> 赞同：0
> 
> 时间：2012-10-15T15:22:58.653
> 
> 标签：css, html, drop-down-menu

我在容器中有一个带有按钮的 navcontainer。我只需要为其中一个按钮制作一个下拉列表。这将如何通过 CSS/HTML 实现。这是我的代码：

HTML：

```
<div id="navcontainer">
            <a href="/home.html" class="button" style="width: 115px">About Us</a>
            <a href="/quote.html" class="button" style="width: 170px">Request a Quote</a>
            <a href="/affiliates.html" class="button" style="width: 115px">Affiliates</a>
            <a href="/pricing.html" class="button" style="width: 170px">Pricing & Plans</a>
            <a href="/addservices.html" class="button" style="width: 190px">Additional Services</a>
            <a href="/service.html" class="button" style="width: 165px">Service Details</a>
            <a href="/watering.html" class="button" style="width: 108px">Watering</a>
           </div> 
```

CSS：

```
#navcontainer {
 float: right;
 width: 1040px;
 height: 45px;
 text-align: center;
 line-height: 45px;
 color: #fff;
 margin-bottom: 6px; 
```

}

```
.button {
text-align: center;
background: #226426;
color: #fff;
width: 100px;
height: 45px;
float: left;
text-decoration: none;
font-family: Arial, sans-serif;
font-size: 15px;
font-weight: bold;
border-right: solid 1px #91b293;
border-top: solid 1px #91b293;
border-bottom: solid 1px #91b293; 
```

}

我需要把它变成一个 ul 还是我可以保持原样，然后在服务按钮中添加一个下拉列表？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:34:54.397

作为一般规则，将导航放在列表中总是一个好主意，它有助于让您的选项在任何时候都对多维菜单系统开放。这是我要做的：

**HTML**

```
<ul id="nav">
<li><a href="link1.html">link 1</a></li>
<li><a href="link2.html">link 2</a>
<ul>
<li><a href="sublink1.html">sublink 1</a></li>
<li><a href="sublink2.html">sublink 2</a></li>
</ul>
</li>
<li><a href="link3.html">link 3</a></li>
</ul> 
```

**CSS**

```
#nav, #nav ul {list-style: none; margin: 0; padding: 0;}
#nav li {position: relative;}
#nav li ul {position: absolute; top: 100%; left: 0; display: none;}
#nav li:hover ul {display: block;} 
```

**jQuery - 可选**

这是如果你想对

```
function mainmenu(){
$(" #nav ul ").css({display: "none"}); // Opera Fix
$(" #nav li").hover(function(){
    $(this).find('ul:first').css({visibility: "visible",display:     none"}).show(800);
    },function(){
    $(this).find('ul:first').css({visibility: "hidden"});
    });
} 
```

希望这可以帮助。

# vb.net - CopyToDataTable(Of DataRow) 显示语法错误

> ID：12898816
> 
> 赞同：0
> 
> 时间：2012-10-15T15:23:02.883
> 
> 标签：vb.net, linq

我试图将 LINQ 查询的输出转换为数据表，我有以下代码，但它在该`(Of DataRow)`部分显示语法错误：

```
将 X 暗淡为新实体
Dim query As IEnumerable(Of DataRow) = From cajero In X.CAJERO.AsEnumerable
                                       选择卡杰罗
Dim bla = query.CopyToDataTable(Of DataRow)()

```

我使用这个问题作为指导： [Filling a DataSet or DataTable from a LINQ query result set](https://stackoverflow.com/questions/16/filling-a-dataset-or-datatable-from-a-linq-query-result-set)

如果我使用

```
query.CopyToDataTable()  
'而不是重载
query.CopyToDataTable（数据行）  

```

它抛出一个 invalidCastException。

我正在寻找一种简单的方法来完成这项任务，这似乎是最简单的方法，没有太多代码并且必须实现任何“碎纸机”方法等，但如果这是唯一的方法，那么请指出我正确的方向。

这是抛出的错误（我将其本地化为英语，西班牙语有点不同）：

无法将 WhereSelectEnumerableIterator 类型的对象转换为 IEnumerable System.Data.DataRow 类型的对象

* * *

我尝试了以下方法：

声明一个可以像这样创建数据表的扩展方法：

```
_
公共函数 myToDataTable(Of T)(source As IEnumerable(Of T)) As DataTable
    暗淡属性 As PropertyInfo() = GetType(T).GetProperties()

    将输出调暗为新 DataTable()

    对于每个 prop In 属性
        output.Columns.Add(prop.Name, prop.PropertyType)
    下一个

    对于源中的每个项目
        暗淡行 As DataRow = output.NewRow()

        对于每个 prop In 属性
            row(prop.Name) = prop.GetValue(item, Nothing)
        下一个

        output.Rows.Add(行)
    下一个

    返回输出
结束功能

```

但是在将列添加到数据表时总是会抛出异常：

```
DataSet does not support System.Nullable 
```

我还将 linq 查询更改为：

```
暗查询 = 来自 X.CAJERO 中的 cajero
           选择卡杰罗

Dim bla = query.myToDataTable

```

* * *

按照乔恩的建议，我发现了这个问题：

[.NET - 将通用集合转换为 DataTable](https://stackoverflow.com/questions/701223/net-convert-generic-collection-to-datatable)

这只是给了我需要的最后一点代码：

```
output.Columns.Add(prop.Name, If(Nullable.GetUnderlyingType(prop.PropertyType), prop.PropertyType))

```

和

```
row(prop.Name) = If(prop.GetValue(item, Nothing), DBNull.Value)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:37:25.603

我认为问题在于您正在尝试转换`IEnumerable<T>`任意实体类型 - 而始终[`CopyToDataTable()`](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.copytodatatable.aspx)要求输入是*某种*.`DataRow`

除非您的实体类型实际上派生自`DataRow`，否则这是行不通的。您可能会编写一个 LINQ 查询，它从每个实例*创建*一个`DataRow`，但我相信您必须自己编写该代码。

我相信你提到的问题，OP已经*有*一个强类型`DataSet`- 至少答案表明是这样的。

# php - 如何在 zend 框架 1 应用程序中使用 twitter 引导框架？

> ID：12898817
> 
> 赞同：7
> 
> 时间：2012-10-15T15:23:04.007
> 
> 标签：php, zend-framework, twitter-bootstrap

是否可以在 zend 框架 (zf1) 应用程序上使用 twitter bootstap 以及如何使用？或者，我可以使用类似的简单而强大的前端框架吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T15:29:58.987

请参阅下面的网址，我认为这对您很有帮助

**使用 Zend Framework + Bootstrap 显示表单的简单方法**

这被设计为普通 Zend Forms 的简单替代品，与 Twitter Bootstrap 一起工作

[https://github.com/komola/Bootstrap-Zend-Framework](https://github.com/komola/Bootstrap-Zend-Framework)

**Zend 框架和 Twitter 引导程序**

[http://blog.herczeg.be/zend-framework-twitter-bootstrap-navigation/](http://blog.herczeg.be/zend-framework-twitter-bootstrap-navigation/)

**Twitter Bootstrap 的 Zend_Form 装饰器**

[http://engineering.emagister.com/2012/07/08/twitter-bootstraps-zend_form-decorators/](http://engineering.emagister.com/2012/07/08/twitter-bootstraps-zend_form-decorators/)

# objective-c - 为什么我们在目标 C 中需要协议？

> ID：12898820
> 
> 赞同：0
> 
> 时间：2012-10-15T15:23:18.033
> 
> 标签：objective-c, protocols

协议的必要性是抽象没有层次相关的类的方法。

类似的事情也可以在包含所有这些方法和子类的类（接口）的帮助下完成？（由于多重继承问题，这实际上是不可能的，因为一个类必须已经从 NSObject 派生。忽略 NSProxy 案例）

协议除了类还能做哪些特别的事情？

协议是否试图仅解决多重继承问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:47:54.753

协议的主要优点是，它们描述了一个对象应该能够做什么，而不需要强制子类化。在没有多重继承的语言中，如果您希望其他程序员能够使用您的类，则需要这种机制。（见[代表团](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)）

例如，Java 有[类似的东西，称为接口。](https://stackoverflow.com/questions/990360/differences-between-java-interfaces-and-objective-c-protocols)

这意味着一个巨大的优势，因为构建动态系统非常容易，因为我可以允许其他开发人员通过明确定义的协议来增强我的类。

一个实际的例子：
我只是在设计一个 REST API，我正在提供一个 Objective-C 客户端库。
由于我的 api 需要有关用户的信息，因此我添加了一个协议

```
@protocol VSAPIClientUser <NSObject>
-(NSString *)lastName;
-(NSString *)firstName;
-(NSString *)uuid;
@end 
```

任何我需要这个用户信息的地方，我都会有一个基本的 id-object，它必须符合这个协议

```
-(void)addUserWithAttributes:(id<VSAPIClientUser>)user; 
```

你可以把这行读成：“我不在乎，你在这里提供什么样的对象，只要它知道`lastName`,`firstName`和`uuid`”。所以我不知道那个物体的其余部分是什么样子的——我不在乎。

作为图书馆作者，我可以安全地使用它：

```
 NSDictionary *userAttributes = @{@"last_name" : [user lastName],
                                  @"first_name": [user firstName],
                                        @"uuid": [user uuid]}; 
```

* * *

顺便说一句：我不会将缺少多继承称为问题。这只是另一种设计。

> “[…] 如果我今天重新审视这个决定，我什至可能会取消单一继承。继承并不是那么重要。封装是 OOP 的持久贡献。” — 有人问 Brad Cox，为什么 Objective-C 没有多重继承。（编程大师：与主要编程语言的创造者的对话，第 259 页）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:06:44.300

作为另一种观点......

面向对象编程最基本的价值来自于能够**直接**对现实世界的关系建模，而不是将它们转换为抽象的和模糊等价的计算机世界结构。当一种语言要求您以不同于您可以用来描述您的问题的术语来考虑解决方案的实现时，它作为 OOP 工具是有缺陷的。（请注意，我没有说“无用”。:)）

现实世界的对象具有依赖于上下文的各种角色。这些角色可以有状态。因此，我同意缺乏多重继承是建模容易的障碍。Objective-C 协议、Java 接口以及您应该更喜欢组合而不是继承的主张都是对 OOP 优势的基本部分的否定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:56:49.967

C++ 抽象类的众多用途之一是定义接口（指定可重用的契约）。然而，也有其他编程语言，例如 Objective C，在这个意义上对接口有一个单独的概念。在 Objective C 中，它被称为协议。

这种结构的广泛使用确实需要一种将多个合同附加到一个对象的方法。如果允许这样的接口相互继承，那么这必须是多重继承才有用。

但是，这与类之间的多重继承不同。

协议并没有试图解决多重继承问题。他们试图将合约规范与对象（数据+代码）规范分开。它们实际上可以做的比一个类*少*得多（如果你忽略了多重继承方面），这就是它们作为一个单独的概念存在的原因。

与从类继承相比，实现协议通常要考虑的限制更少（更安全）。

# javascript - 如何禁用/抑制 jQuery dataTable 的部分渲染？

> ID：12898821
> 
> 赞同：1
> 
> 时间：2012-10-15T15:23:17.307
> 
> 标签：javascript, jquery, datatables

我刚刚设置了我的第一个[jQuery dataTable](http://datatables.net)，并想自定义它的外观：

![在此处输入图像描述](../Images/65574bdf50622c75ba148cc484f1e607.png)

具体来说，我希望用户看不到红色下划线的四个区域：

*   “*显示 10 个条目*”
*   "*显示 1 到 1 的 1 条目*"
*   整个“*搜索*”区域（标签和文本字段）
*   上*一个*和*下一个*分页按钮

这可能吗？如果是这样，怎么做？我找不到提到如何抑制表格组件的文档。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:39:34.280

孔子说，*授人以鱼>授人以鱼。*

只需将以下内容添加到数据表 def 的内部：

```
"sDom": 't' 
```

享受。

# actionscript-3 - UIComponent 文档 — 失败

> ID：12898828
> 
> 赞同：0
> 
> 时间：2012-10-15T15:23:44.023
> 
> 标签：actionscript-3, flash

自从我构建一个扩展`fl.core.UIComponent`类的组件以来已经有大约 2 年了，所以我想我会刷新一下记忆并查看文档。但是文档没有列出所有方法。我知道除了帮助页面上列出的功能之外，还有更多功能。

如果您转到[UIComponent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/core/UIComponent.html)页面的 adobe 帮助并向下滚动到受保护的方法，我只会`getStyleVaue()`在我知道有更多类似“draw”方法的情况下看到该方法。

adobe 如何记录一个类并遗漏最重要的方法之一。是否有过滤器或我缺少的东西？

**注意：**这是`fl.core.UIComponent`，不是 flex 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:21:55.217

您遇到过 Adob​​e 发明的名为“猜过滤器”的精彩游戏。确保您选择了 Flash 以及产品的适当版本。

![在此处输入图像描述](../Images/b4009dcb48761ccd80933c35c3ab7a7f.png)

# java - TextView 中的值不更新

> ID：12898829
> 
> 赞同：2
> 
> 时间：2012-10-15T15:23:49.077
> 
> 标签：java, android

自定义 AsyncTask 中有以下代码：

```
 @Override
    public void onPreExecute() {     
        setTitle();
        dialog.show();
    }

    private void setTitle() {
        Activity activity=(Activity)context;
        TextView title=(TextView)activity.findViewById(R.id.textViewToDoListTitle);
        Log.e("title", title.getText().toString());
        title.setText("123");
        Log.e("title", title.getText().toString());
    } 
```

这段代码可以正常工作，但是 setTitle() 函数不会更新 TextView 标题中的文本！在日志中，我可以看到在 setTitle() 中执行最后一行后，标题存储了“123”。但值不会在屏幕上更新！我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:11:36.353

将对 TextView 的原始引用而不是上下文传递给 Activity，然后在 TextView 上调用 setText，应该可以工作；-)

# java - 在 sorted rich:dataTable 中选择一行

> ID：12898831
> 
> 赞同：2
> 
> 时间：2012-10-15T15:23:52.167
> 
> 标签：java, ajax, jsf-2, richfaces, richdatatable

我有一个丰富的：dataTable 组件（RF 4.2.2.Final）。我为表添加了 rowclick 监听器，以根据行选择更新详细视图。一切正常。但现在我正试图让我的 dataTable 具有可排序的标题。我关注 RF 展示，发现如果 dataTable 中的数据不是自然顺序，则行选择无法正常工作 - 这意味着数据在 appQueryBean 中的列表中的顺序。但我确信在 RF 3.X 中类似的情况很好

我的页面：

```
<h:form id="appFormId">
    <div>
        <rich:dataTable id="appListTableId" value="#{appQuery.applicationList}" 
                        var="row" rendered="#{!empty appQuery.applicationList}"
                        rows="50" styleClass="styledTable">
            <a:ajax 
               listener="#{appQuery.actionListener(row.id)}"
                event="rowclick" render=":applistform:appViewId"/> 
            <rich:column style="width:10%">
                <f:facet name="header">#{msg['ID']}</f:facet>
                <h:outputText value="#{row.id}" />
            </rich:column>
            <rich:column style="width:20%" sortBy="#{row.code}" 
                  sortOrder="#{applicationSortManager.sortOrder}">
                <f:facet name="header">
                    <a:commandLink 
                        value="#{msg['APPLICATION.CODE']}" render="appListTableId" 
                        action="#{applicationSortManager.sortByCode}" /></f:facet>
                <h:outputText value="#{row.code}" />
            </rich:column>
            <rich:column style="width:50%">
                <f:facet name="header">#{msg['APPLICATION.NAME']}</f:facet>
                <h:outputText value="#{row.name}" />
            </rich:column>
            <f:facet name="footer">
                <rich:dataScroller id="appBottomScroller" for="appListTableId" 
                        renderIfSinglePage="false" immediate="true" align="left"/>
        </f:facet>    
        </rich:dataTable>
    <div>
</h:form> 
```

和 ApplicationSortManager：

```
@Named
@SessionScoped
public class ApplicationSortManager implements Serializable{

private SortOrder sortOrder = SortOrder.unsorted;

public void sortByCode(){
    if (sortOrder.equals(SortOrder.ascending)) {
        setSortOrder(SortOrder.descending);
    } else {
        setSortOrder(SortOrder.ascending);
    }
}

/**
 * @return the sortOrder
 */
public SortOrder getSortOrder() {
    return sortOrder;
}

/**
 * @param _sortOrder the sortOrder to set
 */
public void setSortOrder(SortOrder _sortOrder) {
    sortOrder = _sortOrder;
}
} 
```

AppQuery 是一个带有测试 actionListener 实现的 ViewScoped 组件：

```
public void actionListener(Long _idApplication){
System.out.println("Action listener - appId: " + _idApplication);
} 
```

无论 dataTable 中的实际顺序是什么 - 当我点击第一行时，我总是得到 appId：1，当第二行 - appId：2 时。

如果对数据表进行了排序，如何从我单击的行中获取数据？

# php - crypt() 函数没有给出正确的哈希值

> ID：12898832
> 
> 赞同：0
> 
> 时间：2012-10-15T15:24:00.823
> 
> 标签：php, password-hash

我已经使用**[this](http://php.net/manual/en/function.crypt.php)**和**[this](https://stackoverflow.com/questions/10281373/hash-vs-crypt-function-comparison)**制作了一个密码哈希脚本，我让它正常工作，除了有时 crypt 函数将哈希值设为“* 0”，然后它失败了。

**PHP 代码**

```
 $password='password';
    $salt = '$2y$07$';
    $salt .= base64_encode(mcrypt_create_iv(16, MCRYPT_DEV_RANDOM));
    $salt .='$$';
    $password_hash = crypt($password, $salt)';

    echo $password_hash.'<br />'; 
```

**使用上面我得到的值是**

```
 $salt = '$2y$07$8K3i8rJ7n7bsJA36CfbabQ==$$';
    $crypt_password = $password_hash;
    $crypt_password = '$2y$07$8K3i8rJ7n7bsJA36CfbabO9ojj2hl61azl8CubJQhRTgla4ICiCVC';
    if (crypt($password,$crypt_password)===$crypt_password)
    {
    echo 'password verified';
    }
    else{
    echo 'password NOT verified';
    } 
```

请查看并建议任何可能的方法以使其正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:47:58.167

问题是`base64_encode`可能会生成一个带有“+”符号的字符串，这被`crypt`函数认为是不正确的盐。

`var_dump`你和你`$salt`一起`$password`，你会看到每次`+`在盐中使用字符时，crypt函数都会返回一个`'*0'`字符串——失败的标志。

解决它的一种可能方法是用“。”替换所有“+”符号：

```
$salt = str_replace('+', '.', $salt); 
```

# regex - 特定 ID 所需的正则表达式

> ID：12898836
> 
> 赞同：-2
> 
> 时间：2012-10-15T15:24:21.870
> 
> 标签：regex, validation

我需要创建一个与具有特定格式的 ID 匹配的正则表达式。ID 始终以“OR”开头，后跟 4 位数字，然后是破折号，然后是另一个可以是任意长度的数字。有效匹配的示例如下：

```
OR1581-2
OR0057-101
OR0000-5312
OR3450-17371 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:27:23.117

试试`^OR\d{4}-\d+$`。

*   匹配字符串或行的`^`开头。
*   `OR`不是特殊序列，只会按顺序匹配这两个字符。
*   `\d`匹配任何数字，并且`{4}`是准确列出前一组（数字）四次的简写。
*   `-`不是特殊字符，只会匹配连字符。
*   `\d`再次匹配任何数字，并且`+`要求前面的组（数字）出现一次或多次。
*   `$`匹配字符串或行的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:33:51.883

如果您需要在包含此类 ID 以及其他文本的字符串中查找匹配项，请使用

```
\bOR\d{4}-\d+\b 
```

但是，如果您需要验证输入是否采用这种格式，因此不允许使用其他文本，那么请使用

```
^OR\d{4}-\d+$ 
```

# vb.net - VB.NET：在绘制到控件之前查找要绘制的文本的大小

> ID：12898841
> 
> 赞同：1
> 
> 时间：2012-10-15T15:24:37.507
> 
> 标签：vb.net, winforms, text, system.drawing

我正在创建一个用户控件并向其添加一个文本大小属性。在将文本绘制到控件上之前，我需要知道文本大小有多大，以便我可以将其相对于控件的高度和宽度居中。

我假设这是一个 Windows API 命令。但是，我无法找到有关它的任何信息。

```
 Public Sub DrawImage(ByVal gr As Graphics)
        If Me.Image Is Nothing Then Return
        Dim r As Rectangle = New Rectangle(8, 8, Me.ImageSize.Width, Me.ImageSize.Height)
        Select Case Me.ImageAlign
            Case ContentAlignment.TopLeft
                r = New Rectangle(4, 4, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.TopCenter
                r = New Rectangle((Me.Width / 2 - Me.ImageSize.Width / 2) / 2, 4, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.TopRight
                r = New Rectangle(Me.Width - 4 - Me.ImageSize.Width, 4, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.MiddleLeft
                r = New Rectangle(8, Me.Height / 2 - Me.ImageSize.Height / 2, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.MiddleCenter
                r = New Rectangle(Me.Width / 2 - Me.ImageSize.Width / 2, Me.Height / 2 - Me.ImageSize.Height / 2, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.MiddleRight
                r = New Rectangle(Me.Width - 8 - Me.ImageSize.Width, Me.Height / 2 - Me.ImageSize.Height / 2, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.BottomLeft
                r = New Rectangle(8, Me.Height - 8 - Me.ImageSize.Height, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.BottomCenter
                r = New Rectangle(Me.Width / 2 - Me.ImageSize.Width / 2, Me.Height - 8 - Me.ImageSize.Height, Me.ImageSize.Width, Me.ImageSize.Height)
            Case ContentAlignment.BottomRight
                r = New Rectangle(Me.Width - 8 - Me.ImageSize.Width, Me.Height - 8 - Me.ImageSize.Height, Me.ImageSize.Width, Me.ImageSize.Height)
        End Select
        gr.DrawString("Header", New Font("MS SANS SERIF", 8.25, FontStyle.Regular, GraphicsUnit.Point, 1, True), Brushes.Black, 0, 0)

        'gr.DrawImage(Me.Image, r)
    End Sub 
```

正如您所看到的@ gr.DrawString，我需要知道预测的文本有多大，以便我可以调整控件的大小并在控件中居中放置文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:37:19.447

试试[MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx) ()

```
gr.MeasureString("Header", New Font("MS SANS SERIF", 8.25, FontStyle.Regular, GraphicsUnit.Point, 1, True)).Width 
```

# java - 验证方法参数

> ID：12898847
> 
> 赞同：2
> 
> 时间：2012-10-15T15:24:54.420
> 
> 标签：java, jersey, jax-rs

我有一个 RESTful Web 服务。使用 JAX-RS (Jersey) 实现。

有以下方法：

```
public void foo (@PathParam ("name") String uuid) {
    ...
} 
```

我需要验证输入参数。如果数据无效抛出 WebApplicationException。

我添加了我的自定义注释 CheckUuid（扩展）：

```
public void foo (@PathParam ("name") @CheckUuid String uuid) {
    ...
} 
```

选择方法但尚未调用时，是否可以在舞台上使用注释进行验证？例如使用 PreProcessInterceptor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:47:32.140

Java EE6 有一些内置的验证功能。

[http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)

但是我没有使用过它，但我看到它在 Java One 中出现，看起来很酷。我不确定这会在什么时候发生，但我认为它可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:49:20.563

因此，决定在方法验证中使用标准模式。因为在泽西岛没有 PreProcessInterceptor。

# mysql - mysql处理单引号冲突

> ID：12898849
> 
> 赞同：0
> 
> 时间：2012-10-15T15:25:02.423
> 
> 标签：mysql, joomla

我正在使用 joomla 开发网站，但我遇到了一个奇怪的错误。我在以下代码中有语法错误：

```
$q = "TRUNCATE TABLE ".$db->quote('#__csvi_available_fields'); 
```

在运行时给出输出：

```
TRUNCATE TABLE 'erx_csvi_available_fields' 
```

但是mysql显示错误：

> JDatabaseMySQL::query: 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''#__csvi_available_fields'' 附近使用正确的语法 SQL=TRUNCATE TABLE '#__csvi_available_fields'

奇怪的是，当我不带引号运行时，它运行正常：

```
TRUNCATE TABLE erx_csvi_available_fields <-- works without problem 
```

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:27:18.613

不要使用单引号“'”。使用“`”（键盘上的数字左侧）。普通单引号用于字符串，与双引号相同

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:15:02.523

正如其他人所说，添加了错误的引号。

当使用 Joomla`JDatabase`提供引用时，有两个不同的函数，您可以调用一个用于值，另一个用于数据库、表或列/字段名称。

要使您的示例行工作，您需要`quoteName()`按如下方式使用：

```
$q = "TRUNCATE TABLE ".$db->quoteName('#__csvi_available_fields'); 
```

`$db->quote()`用于引用 SQL 中使用的值。

您可以通读`/libraries/joomla/database/database.php`以了解抽象应该如何工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:33:37.230

单引号用于**字符串**，名称应使用**反引号**。

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)：

> 标识符引号字符是反引号 (`)

也看看这个 Stackoverflow 问题：[Using backquote/backticks for mysql queries](https://stackoverflow.com/questions/1556237/using-backquote-backticks-for-mysql-queries)

# python - Python 类对象和 XML

> ID：12898851
> 
> 赞同：4
> 
> 时间：2012-10-15T15:25:04.757
> 
> 标签：python, xml, object, xml-parsing, lxml

是否可以根据 XML 文件的分层内容自动生成 python 类对象？
让我解释一下我的意思。假设我有一个 XML 文件，其中包含（为简单起见）以下内容：

```
<breakfast_menu>
   <food>
     <name>Belgian Waffles</name>
     <price>$5.95</price>
     <description>blah blah...etc...</description>
     <calories>650</calories>
   </food>
</breakfast_menu> 
```

我喜欢 XML 呈现数据和属性的方式，但我想使用 Python，所以我想问是否有一组实用程序可以读取上面的文件并创建如下内容：

```
class breakfast_menu():
   food = food(self, name="Belgian Waffles", price="$5.95", description="blah blah...etc...", calories=650) 
```

这是可行的吗？谁能建议一种方法/工具来做到这一点？预先感谢您的考虑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:55:29.447

使用一些 XML 解析器（例如 ElementTree）对其进行解析。将每个食物标签中的内容获取到 Python 字典中。将字典提供给这样的函数时解包：

```
food(**my_dictionary) 
```

如果字典包含类似的内容`my_dictionary = {'name':'Belgian Waffles', 'price':'$5.95'}`，则调用`food(**my_dictionary)`将与调用相同`food(name = 'Belgian Waffles', price = '$5.95')`。有关更多信息，请参阅[了解 Python 中的 kwargs](https://stackoverflow.com/questions/1769403/understanding-kwargs-in-python)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T15:31:40.277

听起来您需要类似 ElementTree XML API：[http ://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)

# model-view-controller - Magento：通过控制器更改主题

> ID：12898853
> 
> 赞同：0
> 
> 时间：2012-10-15T15:25:11.137
> 
> 标签：model-view-controller, magento, themes

正如标题所说，有没有办法从控制器加载 Magento 主题而无需切换存储？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:56:05.503

你应该可以打电话`Mage::getDesign()->setTheme();`。如果您需要对 的预期参数的引用，该`getDesign`函数将返回一个实例。`Mage_Core_Model_Design_Package``setTheme`

# java - Android 游戏开发 - BOT 玩家使用线程和 AndEngine 配置

> ID：12898856
> 
> 赞同：0
> 
> 时间：2012-10-15T15:25:24.530
> 
> 标签：java, android, multithreading, andengine, thread-synchronization

我正在编写我的第一个 Android 游戏。
这是一个简单的纸牌游戏，玩家将拥有 3 个 BOT 玩家。

现在我正在用纯java为它编写一个核心逻辑。（还没有过多考虑 AndEngine 和图形）

游戏分为两个阶段：

1.  **最初所有玩家都会异步**抽牌
***   在第一阶段之后，控制从一个玩家连续（**同步**）移动到下一个玩家以抽一张牌。**

 **所以，我很困惑我需要多少线程？

我应该把每个玩家放到一个单独的线程中吗？（因为第一阶段可能需要它）
**或者**
我应该在一个线程中执行这个？（如在阶段 2 中需要同步行为）

如果我将每个播放器放入不同的线程中，我如何序列化这些线程以执行顺序任务（第 2 阶段-控制一个接一个地移动到播放器）？？？？

**也**
现在我写的逻辑是纯java。使用 AndEngine 配置它时会给我带来任何麻烦吗？我的意思是在ANdEngine中有处理输入和使用这个逻辑的任何特定格式吗？它只是调用这些类的方法来开始游戏并在游戏上执行任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:47:58.310

我认为是**同步**的。如果您想到纸牌游戏，那么在前一个玩家采取行动之前，您什么也做不了。

如果您开始使用单独的线程，那么您只是让自己的事情变得过于复杂。**

# php - 在使用 Paypal IPN 通话时获取 Wordpress 选项

> ID：12898858
> 
> 赞同：0
> 
> 时间：2012-10-15T15:25:40.363
> 
> 标签：php, wordpress, paypal, paypal-ipn

我已经成功地在一个文件中实现了一个 Paypal IPN 侦听器，该文件与构成 Wordpress 主题的其他文件位于同一目录中。但是，我希望用户通过他们定制的仪表板设置一些变量，例如`$receiver_email`来自 Wordpress 的功能。`get_option()`我已经尝试加载`wp-load.php`，它也识别出`get_option()`我试图传递的函数和值，**但**只有当我通过浏览器 URL 栏导航直接访问文件时。因此，即使我在 IPN 模拟器面板上设置了正确的输入，我也无法通过 IPN 获得验证付款。不知何故，`get_option()`在 IPN 调用期间没有传递该值。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:51:21.677

如果您将 IPN 侦听器设置稍有不同并将其直接指向 WordPress 实例，则会更容易。例如，将您的通知 URL 设置为 domain.com/?paypal_ipn_result=1，然后在插件文件或主题的 functions.php 文件中包含类似的内容：

```
add_action( 'template_redirect', 'my_template_redirect' );
function my_template_redirect() {
    if ( ! isset( $_REQUEST['paypal_ipn_result'] ) )
        return;

    // Your IPN stuff goes here, you can use get_option and other things.
} 
```

您甚至可以使用比 template_redirect 更早的钩子来让 WordPress 永远不会解析您的请求。也许`request`过滤器可能是一个好地方，或者甚至`init`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:47:55.720

检查您的站点域是否具有公共访问权限以及是否有任何防火墙限制

# apache - SVN：检测到 url 的重定向周期

> ID：12898861
> 
> 赞同：2
> 
> 时间：2012-10-15T15:25:52.507
> 
> 标签：apache, svn, suse

> **可能重复：**
> [tortoise svn 给我“检测到 URL 'domain/svn' 的重定向周期”</a>](https://stackoverflow.com/questions/10524646/tortoise-svn-giving-me-redirect-cycle-detected-for-url-domain-svn)
> 
> [](https://stackoverflow.com/questions/10524646/tortoise-svn-giving-me-redirect-cycle-detected-for-url-domain-svn)

 [我有 apache 和 svn 的问题。当我想使用地址签出我的存储库时，我会收到一个错误](https://stackoverflow.com/questions/10524646/tortoise-svn-giving-me-redirect-cycle-detected-for-url-domain-svn) 

> [](https://stackoverflow.com/questions/10524646/tortoise-svn-giving-me-redirect-cycle-detected-for-url-domain-svn)
> 
> [https://server.de:81/repository](https://server.de:81/repository)

我的 svn.conf 是：

```
 NameVirtualHost *:81
  <VirtualHost *:81>
          ServerName svn.server.com 
          ErrorLog /var/log/apache2/svn_error
          LogLevel warn
          CustomLog /var/log/apache2/svn_access combined
          ServerSignature On

          # SSL fÃ¼e Repos
          SSLEngine On
          SSLCertificateFile /etc/apache2/ssl.pem/server.LOCAL.pem
          SSLCertificateKeyFile /etc/apache2/ssl.key/server.LOCAL.key
          SSLProtocol all

          <Location />
                  AuthzLDAPAuthoritative off
                  AuthType Basic
                  AuthBasicProvider ldap
                  AuthName "server.LOCAL"
                  AuthLDAPBindDN "CN=ldap svn,CN=Users,DC=server,DC=local"
                  AuthLDAPBindPassword "pw"
                  AuthLDAPURL "ldap://server.local:3268/DC=server,DC=local?sAMAccountName?sub?(objectClass=*)"
                  require valid-user
          </Location>

        # repositories for Group repo1
          <Location /repo1>
                  DAV svn
                  SVNPath /srv/svn/repo1
                  require ldap-group CN=svn-repo1,OU=Svn,DC=server,DC=local
          </location>
          # repositories for Group repo2
          <Location /repo2>
                  DAV svn
                  SVNPath /srv/svn/repo2
                  require ldap-group CN=svn-repo2,OU=Svn,DC=repo2,DC=local
          </location>
</VirtualHos> 
```

我可以通过浏览器浏览我的存储库，但不能使用 tortois svn。有人发现错误吗？

# php - 如何在不更改 max_allowed_pa cket 的情况下将大数据插入 MySQL 数据库

> ID：12898867
> 
> 赞同：2
> 
> 时间：2012-10-15T15:26:11.963
> 
> 标签：php, mysql, pdo, insert, large-data

我有一个大于`max_allowed_packet`（1MB）的文本，为什么我不能用下面的代码插入数据？

```
$db = new PDO('mysql:dbname=test;host=localhost', 'root', '5u4f1d');

$db->exec('SET NAMES utf8');

$stmt = $db->prepare('INSERT `book` (`text`) VALUES (?)');
$tx = file_get_contents('./test.html');
$stmt->bindParam(1, $tx, PDO::PARAM_LOB);

$db->beginTransaction();
$stmt->execute();
$db->commit(); 
```

它说：`Fatal error: Cannot pass parameter 1 by reference`，但我从以下位置复制代码： - [http://www.php.net/manual/en/pdo.lobs.php](http://www.php.net/manual/en/pdo.lobs.php)

数据库结构：

```
CREATE TABLE `book`
(`text` mediumtext COLLATE utf8_unicode_ci NOT NULL)
ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:32:56.143

试试这样：

```
$db = new PDO('mysql:dbname=test;host=localhost', 'root', '5u4f1d');

$db->exec('SET NAMES utf8');

$stmt = $db->prepare('INSERT `book` (`text`) VALUES (?)');

// note the "fopen" function, not file_get_contents
$tx = fopen('test.html', 'rb');
$stmt->bindParam(1, $tx, PDO::PARAM_LOB);

$db->beginTransaction();
$stmt->execute();
$db->commit(); 
```

还有关于：

*   [http://www.php.net/manual/en/pdo.lobs.php](http://www.php.net/manual/en/pdo.lobs.php)

指出：

> ... 将 LOB 绑定到名为 $lob 的变量中，然后使用 fpassthru() 将其发送到浏览器。由于 LOB 表示为流，因此可以在其上使用 fgets()、fread() 和 stream_get_contents() 等函数。

另外，尝试将“文本”表字段更改为 BLOB 数据类型，如下所示：

```
CREATE TABLE `book`
(`text` BLOB NOT NULL)
ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

# sql-server - 删除具有最小日期和多个键的重复 MS-SQL

> ID：12898872
> 
> 赞同：2
> 
> 时间：2012-10-15T15:26:34.467
> 
> 标签：sql-server, duplicates, sql-delete

我有一个大表，其中有重复项：

*   `number`（首要的关键），
*   `group`（首要的关键），
*   `Division`（首要的关键），
*   `dateChange`.

例子：

```
1,2,3,20121015

1,2,3,20120101

1,2,3,20110101

2,2,2,20121010

2,2,2,20120101 
```

结果应该是：

```
1,2,3,20121015

2,2,2,20121010 
```

我已经尝试了很多组合，包括按主键分组和最小的“changeDate”，但似乎没有什么能完美地工作。

我想要这样的东西：

```
delete from table where (number,group.devision,changeDate) not in 
(select from table(number,group,devision,Max(changeDate)) 
group by (number,group.devision) 
```

但我认为它不是有效的 MS-SQL 语法。

您的帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:31:31.790

删除`number, group, Division`组合中除最新行之外的所有行。

```
;WITH cte
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY number, group, Division 
                                       ORDER BY dateChange DESC) RN
         FROM   YourTable)
DELETE FROM cte
WHERE  RN > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:37:19.807

以下应该工作。

```
delete table from
table inner join (select 
number, group, division, changeDate, row_number() over 
(partition by number, group, division order by changeDate desc) as ranker
from table) Z
on table.number  = Z.number and table.group = Z.group and 
table.changeDate = Z.changeDate and Z.ranker != 1 
```

# jsp - 如何更改来自控制器的值

> ID：12898873
> 
> 赞同：0
> 
> 时间：2012-10-15T15:26:33.570
> 
> 标签：jsp, spring-mvc, jstl

我有一个小的要求，即来自控制器的值必须由 jsp 更改为 null 才能执行下一个任务。

来自控制器本身的值

model.addAttribute("message" "hi");

现在消息必须为空（应该由 jsp jstl 完成）

如何通过 jsp jstl 使消息为空。

我试过这个..它不工作...

因为对于下一个请求，它仍然保持值 hi

```
<c:if test="${message!=''}">
        <c:set var="message" value="good" scope="page" />
        <c:out value="${message}"/> 
        </c:if> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:13:29.557

好像你有两个问题：

1.  您正在设置新值，`scope="page"`但您在下一个请求中声明该值仍为“hi”。您需要使用`scope="session"`该值在多个请求中持久化。

2.  您将值设置为“”。这既不是`null`也不是`empty`- 它是单个空格的字符串值。您可能想尝试将值设置为`${null}`或“”。

# html - 固定 div 背景

> ID：12898877
> 
> 赞同：6
> 
> 时间：2012-10-15T15:26:45.053
> 
> 标签：html, css, background, attachment, fixed

我想创建一个布局，我想在左侧显示图像并在右侧显示内容。当内容滚动时，图像应该保持不变。

我正在使用的CSS：

```
 <style type="text/css">

        #page-container
        {
            margin:auto;            
            width:900px;              
            background-color:Black;
        }

        #header
        {
           height:150px;
           width:650px;
        }

        #main-image
        {
            float:left;
            width:250px;
            height:500px;
            background-image:url('../images/main-image.png');
            position:fixed;
        }

        #content
        {
             margin-left:250px;
             padding:10px;
             height:250px;
             width:630px;
             background-color:Teal;

        }
    </style> 
```

的HTML：

```
<div id="page-container">
    <div id="header"><img src="someimagelink" alt="" /></div>
    <div id="main-image"></div>
    <div id="content"></div>    
</div> 
```

在这个网站上花了很多时间，我明白 background-attachment:fixed 将图像定位在整个视口中，而不是它应用到的元素中。

我的问题是如何创建这种布局？

我不想将该图像作为背景图像，就好像窗口已调整大小一样，它可能会被隐藏。如果窗口大小小于 900 像素（我的页面宽度），我希望出现滚动条，以便可以随时查看图像。

这段代码会发生这种情况，但是我希望图像从我的元素开始。

我该怎么做？

提前致谢 ：）

编辑：

我接受了建议并在#main-image 中添加了一个 position:fixed 属性。使用如上所示的 HTML 和 CSS。现在，我还想修复标题，使其不会移动。基本上，只有我的内容部分应该滚动。但是，如果我在标题中添加一个 position:fixed，我的 #main-image 和 #content 现在位于我的标题之上。如果我向#main-image 添加一个margin-top:150px（因为我的标题高度是150px），它可以正常工作并适当地向下移动。但是，如果我在#content 中添加一个margin-top:150px，我的标题会向下移动150px，并且仍然位于我的#content 之上。有人可以解释为什么会这样吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:33:06.053

看看这个链接：

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

您可以学习如何使用它定位 Div。

这将解决您的问题： `#main-image {position:fixed;}`

* * *

编辑：我不确定是什么导致了您的问题，但这是解决方案： `#content{ position:relative; top:150px; }`

我的猜测：我认为这是因为使用 position:fixed 时，这 2 个 div 相对于浏览器窗口定位，而另一个相对于文档本身。

在此链接中，您将看到有关定位的更多信息，并且您可以测试与 position 属性相关的一些功能：

[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

About the fact that one div was positioned over another, you should search for the 'z-index' property. Firefox has a 3D mode so you can see this more clearly:

[http://www.addictivetips.com/internet-tips/browse-internet-in-3d-using-mozilla-firefox-11-tip/](http://www.addictivetips.com/internet-tips/browse-internet-in-3d-using-mozilla-firefox-11-tip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:34:22.353

设置`min-width`开`html`和`body`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:46:48.023

您是否尝试过将您的#page-container 设置为相对，将您的#main-image 容器设置为绝对，并使用顶部、底部等设置位置。然后您还应该能够将您的#content 容器浮动到右侧。

# redis - Redis 查询数

> ID：12898878
> 
> 赞同：0
> 
> 时间：2012-10-15T15:26:45.457
> 
> 标签：redis

我有一个运行 12-16 个 redis 命令的脚本；

这可能看起来像一个愚蠢的问题，但是考虑到这个脚本通常每隔几秒钟调用一次，它们是否可能太多而不能一次执行？我的意思是 Redis 是否也设计为具有如此数量的命令，还是应该将其保持在尽可能少的程度？

我基本上将 LISTS 用于队列、SETS 和字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:55:57.673

使用您发布的数字完全没有问题，Redis 可以毫无问题地处理此流量，除非这些查询是大集合或 SORT 或其他运行时间与您类型中的元素数量成正比的命令的交集。

然而，这不仅仅是 Redis 能够处理流量的问题，您还应该关注延迟。如果您使用流水线（http://redis.io/topics/pipelining），您可以一次询问多个查询，并避免多次支付往返时间。

# winapi - 如何在新窗口中调用bat文件

> ID：12898879
> 
> 赞同：2
> 
> 时间：2012-10-15T15:26:44.940
> 
> 标签：winapi, batch-file, cmd

我有一个调用其他 bat 文件的小 bat 文件：

```
cd C:\Users\Ofis\heroku\1134 && call up.bat
cd C:\Users\Ofis\heroku\5095 && call up.bat
cd C:\Users\Ofis\heroku\9469 && call up.bat 
```

它工作得很好，但我希望它在新窗口中调用 .bat 文件，这样它就会同步且更快。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:37:20.173

您可以使用`start`：D

```
cd C:\Users\Ofis\heroku\1134 && start up.bat
cd C:\Users\Ofis\heroku\5095 && start up.bat
cd C:\Users\Ofis\heroku\9469 && start up.bat 
```

# ruby-on-rails - 在 Rails 3 的邮件拦截器中设置标题

> ID：12898883
> 
> 赞同：2
> 
> 时间：2012-10-15T15:27:08.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我想为所有邮件设置一个标题值。我想在拦截器中执行此操作，这样我就不必为所有邮件重复代码。

如果我在 mailer 函数中执行此操作，代码将如下所示，

```
headers['X-Mailgun-Campaign-Id'] = "1234" 
```

但是我如何使用拦截器来实现相同的目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T03:31:54.157

我在 ActionMailer 拦截器中设置自定义标头时遇到了类似的问题。邮件中使用的标准语法不起作用：

```
def self.delivering_email(message)
  message.headers['X-Mailgun-Campaign-Id'] = "1234"
end 
```

...但是源代码中提到的这种哈希样式语法确实有效：

```
def self.delivering_email(message)
  message.headers 'X-Mailgun-Campaign-Id' => "1234"
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T01:54:59.990

如果有人发现这个正在寻找与我相同的答案，即如何**覆盖**拦截器中的现有标头，这就是我最终使用的答案。

```
message.header.fields.select{|f| f.name == 'X-Custom-Header' }
                     .each{|f| message.header.fields.delete(f) }

// these two following lines work equivalently in Rails 4:
message.headers['X-Custom-Header'] = "1234"
message.header 'X-Custom-Header' => "1234" 
```

标头内部存储在**数组**中，而不是散列中，因此为了“覆盖”，您必须首先完全删除标头。否则，您的“覆盖”实际上只会添加另一个具有相同名称的标头，并且很难知道在另一端将如何处理。

# javascript - node js express：请求数据无效？

> ID：12898884
> 
> 赞同：0
> 
> 时间：2012-10-15T15:27:09.287
> 
> 标签：javascript, node.js, express

有人可以向我解释以下行为的原因吗？

我有一个 nodejs/express 网络服务器，假设其中一条发布路由包含以下代码：

```
req.on('data', function() { console.log('data arrived'); }) 
```

此代码按预期工作，并在调用时将“数据到达”消息写入控制台。然而，下面的代码：

```
setTimeout(function() { req.on('data', function() { console.log('data arrived'); }) }, 1000); 
```

尽管情况相同，但不打印任何内容。如果我们在短时间内订阅他们的事件，请求对象流会发生什么？

我需要这个的原因是我想将大文件上传到我的服务器。当发布请求到达时，我需要创建一个数据库条目并将我的数据通过管道传输到其中。由于数据块的潜在大小，我无法将数据块存储在内存中，但我无法从数据库回调或任何回调中获取请求对象的数据。

你知道如何解决这个问题吗？提前致谢！

更新

以下代码仍然不起作用：

```
req.pause();
setTimeout(function() {
    req.on('data', function(data) { console.log('data arrived'); })
    req.resume();
}, 1000); 
```

更新2

最终目标是像这样做 sg ：

```
req.pause();
doSometingAsync(function(result) {
    req.on('data', function(data) { doSomethingWithData(data, result) });
    req.resume();
}); 
```

，但这似乎不起作用......

更新 3

这会导致一个“经过”而没有其他任何东西：

```
req.pause()
setTimeout () ->
    console.log 'elapsed'
    req.on 'error', (error) -> console.log error
    req.on 'data', (data) -> console.log 'in data'
    req.on 'end', () -> console.log 'end'
    req.resume()
, 2000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:40:56.990

回答：

您可以`req.pause();`在数据到达时触发，像将数据写入文件一样处理数据，当文件写入回调触发时，您可以执行`req.resume();`以接收下一个包。

你不应该做的是重新定义“数据”事件，除非你使用`req.once`而不是`req.on`

这会将带宽限制为您的物理硬盘驱动器速度，使您的应用程序保持异步并降低内存使用率。

更新 1 答案：

这是一些伪代码：

```
req.on("data", function (data) {
    req.pause();
    /* do something with data like the following: */
    some_method(some_value, data, function (success) {
        if (success) {
            req.resume();
        }
    });
}); 
```

或类似的东西：

```
req.on("data", function (data) {
    req.pause();
    console.log("data arrived");
    setTimeout(function(){req.resume();}, 1000);
}); 
```

更新 2 答案：您应该使用回调

在这种情况下，该函数完成后立即`doSomethingWithData();`触发的第三个参数。`req.resume();`

除此之外，您应该像这样调用回调以保持异步：

```
var doSomethingAsync = function (data, result, cb) {
    /* do something with data and result */
    process.nextTick(function () {
        cb();
    });
};

req.pause();
doSomethingAsync(function (result) {
    req.on('data', function (data) {
        req.pause();
        doSomethingWithData(data, result, function () {
            req.resume();
        });
    });
    req.resume();
}); 
```

或者你这样做：

```
var doSomethingAsync = function (data, result, req) {
    /* do something with data and result */
    process.nextTick(function () {
        req.resume();
    });
};

req.pause();
doSomethingAsync(function (result) {
    req.on('data', function (data) {
        req.pause();
        doSomethingWithData(data, result, req);
    });
    req.resume();
}); 
```

# mysql - 如何在不检查 MySQL 中的 AUTOINCREMENT 的情况下增加主键

> ID：12898885
> 
> 赞同：2
> 
> 时间：2012-10-15T15:27:08.530
> 
> 标签：mysql, jpa, auto-increment

如何在不检查 MySQL 中的 AUTOINCREMENT 的情况下增加主键？

我的例子：

```
Tax.java
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package newpackage;

import java.io.Serializable;
import java.math.BigDecimal;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.persistence.*;
import javax.transaction.UserTransaction;
import javax.validation.constraints.NotNull;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author gile
 */
@Entity
@Table(name = "tax", catalog = "invoicedb", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Tax.findAll", query = "SELECT t FROM Tax t"),
    @NamedQuery(name = "Tax.findByIdtax", query = "SELECT t FROM Tax t WHERE t.idtax = :idtax"),
    @NamedQuery(name = "Tax.findByValue", query = "SELECT t FROM Tax t WHERE t.value = :value"),
    **@NamedQuery(name = "Tax.findMaxID", query = "SELECT MAX (t.idtax) from Tax t")})** // I write this query to find max value of primary key. how to find max ?
public class Tax implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "idtax")
    private Integer idtax;
    @Basic(optional = false)
    @NotNull
    @Column(name = "value")
    private BigDecimal value;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "taxid")
    private List<Invoicedetails> invoicedetailsList;

    public Tax() {
    }

    public Tax(Integer idtax) {
        this.idtax = idtax;
    }

    public Tax(Integer idtax, BigDecimal value) {
        this.idtax = idtax;
        this.value = value;
    }

    public Integer getIdtax() {
        return idtax;
    }

    public void setIdtax(Integer idtax) {
        this.idtax = idtax;
    }

    public BigDecimal getValue() {
        return value;
    }

    public void setValue(BigDecimal value) {
        this.value = value;
    }

    @XmlTransient
    public List<Invoicedetails> getInvoicedetailsList() {
        return invoicedetailsList;
    }

    public void setInvoicedetailsList(List<Invoicedetails> invoicedetailsList) {
        this.invoicedetailsList = invoicedetailsList;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idtax != null ? idtax.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Tax)) {
            return false;
        }
        Tax other = (Tax) object;
        if ((this.idtax == null && other.idtax != null) || (this.idtax != null && !this.idtax.equals(other.idtax))) {
            return false;
        }
        return true;
    }
    @Override
    public String toString() {
    return String.format("%.2f %%",value);
    }

    @Transient
    private String taxvalueString;

    public String getTaxvalueString() {
        return String.format(" %.2f %%",value);
    }

    public void setTaxvalueString(String taxvalueString) {
        this.taxvalueString = taxvalueString;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:38:17.000

您可以使用 PrePersit 注释在 Tax Class 中添加一个方法来创建 PK (idtax)

喜欢

```
@PrePersist
private void generateID() {
   // Read existing  Tax record, finde new id and set pk here. 
} 
```

# algorithm - 大型二维数据的数据结构

> ID：12898887
> 
> 赞同：-1
> 
> 时间：2012-10-15T15:27:20.580
> 
> 标签：algorithm, data-structures

我只是好奇并研究可以表示具有随机访问和快速二维传播的非常大的二维“字段”的数据结构。

这个想法是代表物理学中场的概念，它本质上是一个非常大的二维数组，具有无限小的点。对点值的任何更改都会修改其邻居的值，依此类推。

如何有效地表示这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:46:36.747

与其说是一个答案，不如说是一个扩展评论：

我完全不同意你的说法，即*物理学中的场概念 [] 本质上是一个非常大的二维数组，点数无限小*。场是连续的，对于任何场，时空中的每个点都有一个值。

您对字段性质的（错误）陈述导致您假设数组是合适的数据结构。这不是一个坏假设。数组（在尽可能多的维度上）是在计算字段的计算机程序中最常用的数据结构之一。

查看世界上大多数超级计算机上运行的大多数代码的计算核心，您会发现用于在有限空间内对场进行建模的阵列的一些变体。通常采用的变体将是*稀疏阵列*，特别是对于几乎完全均匀的场（例如，宇宙中的质量分布）只有局部不均匀。常用的稀疏数组有多种表示形式，维基百科会解释。

# sql - 访问sql查询聚合函数

> ID：12898891
> 
> 赞同：0
> 
> 时间：2012-10-15T15:27:33.057
> 
> 标签：sql, ms-access-2007

我正在尝试在 access 2007 中运行一个 sql，它给出了错误

“您尝试执行的查询不包含指定表达式‘round(volumePass/Volume*100,2)’作为聚合函数的一部分”。

而我已经在 sql 语句中提到它

逐轮分组（volumePass/Volume*100,2）

```
SELECT s.[sub process name], Round(Avg(s.[TollGate FTEs]),2) AS TollGateFTEs, 
Sum(w.volume) AS Volume, 
Sum(Switch(w.TAT='Pass',w.Volume,w.TAT='Fail',0)) AS VolumePass, 
Sum(IIf(w.[combined accuracy]='PASS',1,0)) AS AccuracyPass, 
Sum(IIf(w.[combined accuracy]='',0,1)) AS TotalAccuracy, 
Round((VolumePass/Volume)*100,2) AS TATPercentage, 
Round((AccuracyPass/TotalAccuracy)*100,2) AS AccuracyPercentage, 
Format(w.[reporting month],'mmm-yy') AS [Rep Month] FROM Work_Log1 AS w, 
[sub process] AS s WHERE w.[sub process] In (SELECT s.[sub_process_id] FROM 
[Sub Process] s, 
[process mapping] m where m.[process name] like 'Accounting Control%'  
and s.[mapped to process id] = m.[mapping id]) And w.[sub process]=[s].[sub_process_id] 
AND (w.[Activity_start_date] Between #06/01/2012# And #06/15/2012#)  
AND ([w].[sla applicable]=1 Or 0 Or '') and 
(w.[status] Like 'Complete%')  group BY Format(w.[reporting month],'mmm-yy'), 
s.[sub process name], (Round((VolumePass/Volume)*100,2)); 
```

哪里是它无法正确拾取。

给出别名“ **TATPercentage** ”仍然不起作用并给出相同的错误。

此查询在访问查询设计器中运行良好，但不能在 vba 中使用 sql 运行。

**更新：**

让它在 vba 中使用 dao 引擎运行.. adodb 引擎不走运

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:30:08.750

```
Round((VolumePass/Volume)*100,2) AS TATPercentage
       ^^^^^^^^^^ ^^^^^^ 
```

`round()`不是聚合函数。您还必须对这些字段（volumepass 和 volume）进行分组，并且您将在接下来的两行中遇到同样的错误，包括准确度通过、acuracytotal、报告月份等...

# c# - C# 列表、数组列表、字典、哈希表和 ICollection

> ID：12898897
> 
> 赞同：2
> 
> 时间：2012-10-15T15:27:40.063
> 
> 标签：c#, arrays

我是 C# 的新手。到目前为止，我已经学习了关于“收藏”主题的课程。现在我对 C# 如何实现集合感到非常困惑，因为我发现这些（List、Array LIst、Dictionary、Hash Table 和 ICollection）用于实现/声明数组（键值对数组 - 如果在 PHP 中）集合。我是一名开始学习 C# 的 PHP 开发人员，如果有人能告诉我如何、何时以及何时不使用 C# 中的以下集合声明，因为在 PHP 中，将对象添加到数组时没有变量类型限制。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:33:22.787

`List`往往是我发现的最强大的。我很少使用 ArrayList 或 Dictionary，但这只是我。

# android - 片段 setRetainInstance 不起作用（Android 支持库）

> ID：12898901
> 
> 赞同：0
> 
> 时间：2012-10-15T15:27:51.793
> 
> 标签：android, android-fragments, android-support-library

> **可能重复：**
> [Android 片段 setRetainInstance(true) 不起作用（Android 支持库）](https://stackoverflow.com/questions/12901760/android-fragments-setretaininstancetrue-not-works-android-support-library)

我写了一个简单的测试项目，但我不明白为什么我总是在生命周期方法 onCreate、onCreateView 和 onActivityCreated 中收到 savedInstanceState = null。我更改了屏幕方向，查看日志，但未保存状态。请告诉我我的错误在哪里。谢谢。片段类的代码是：

```
public class TestFragment extends Fragment {

private String state = "1";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        //never works
        state = savedInstanceState.getString("state");
    }
    //always prints 1
    Toast.makeText(getActivity(), state, Toast.LENGTH_SHORT).show();
    return inflater.inflate(R.layout.fragment_layout, container, false);
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("state", "2");
    Log.e("", "saved 2");
} 
```

}

**编辑**

当我尝试使用 setRetainInstance 时，我再次没有结果（（（我使用 btn1 将状态更改为 2，但在更改方向后，按下 btn2 时我看到 1。请帮助（

公共类 TestFragment 扩展片段 {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    setRetainInstance(true);
    super.onCreate(savedInstanceState);
}

private String state = "1";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_layout, container, false);

    //button for changing state
    ((Button)view.findViewById(R.id.button1)).setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            state = "2";
        }
    });

    //button for showing state
    ((Button)view.findViewById(R.id.button2)).setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            Toast.makeText(getActivity(), state, Toast.LENGTH_SHORT).show();
        }
    });

    return view;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:35:09.810

我见过同样的问题。但是您可以通过其他方式保存 instate 状态，这要归功于 setRetainInstance(true) 方法，您的所有类数据都会自动保存。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    setRetainInstance(true);
    super.onCreate(savedInstanceState);
} 
```

编辑

声明活动时也尝试添加这些参数：

```
 <activity
        android:name="MyActivity"
        android:configChanges="orientation|keyboardHidden|screenSize" /> 
```

# soap - Soap：上传二进制数据

> ID：12898905
> 
> 赞同：0
> 
> 时间：2012-10-15T15:28:12.527
> 
> 标签：soap, upload, base64, taleo

我正在制作一个 Drupal/PHP 模块，以使用 SOAP 将信息上传到 Taleo（人才管理）数据库。这适用于文本和日期等常规数据，但不适用于文件。

该手册显示了一个文件附件的示例：

```
createAttachment Test Case:
<soapenv:Header/>
<soapenv:Body>
<urn:createAttachment>
<in0>webapi-5616904436472928038</in0>
<in1>15</in1>
<in2>test1.docx</in2>
<in3>test1.docx</in3>
<in4>application/vnd.openxmlformatsofficedocument.
wordprocessingml.document</in4>
<in5>
<!--type: base64Binary-->
<array>JVBERi0xLjQNJeLjz9MNCjYgMCBvYmogPDwvTGluZWFyaX==</array>
</in5>
</urn:createAttachment>
</soapenv:Body>
</soapenv:Envelope> 
```

所以我做了一个这样的PHP文件：

```
 // Send attachment
    $fileName = drupal_get_path('module', 'taleo') . '/test.txt';
    $rawFile = fread(fopen($fileName, "r"), filesize($fileName));
    $B64File = base64_encode($rawFile);

    $params = array(
        'in0' => $session,
        'in1'   => $candidate_id,
        'in2'   => 'test.txt',
        'in3'   => 'test.txt',
        'in4'   => 'text/plain',
        'in5'   => $B64File
    );

    $client_taleo->__call('createAttachment', $params); 
```

当我执行“echo $B64File”时，我得到这个：RmlsZSB1cGxvYWQgd2l0aCBEcnVwYWwgIQ==，所以文件被正确读取。

但我总是得到这个错误：

错误：soapenv:Server.generalException-attBinDataArr 为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:45:43.833

您忘记将 base64 数据封装在数组标签中。

```
<array>JVBERi0xLjQNJeLjz9MNCjYgMCBvYmogPDwvTGluZWFyaX==</array> 
```

像这样的东西应该工作：

```
$params = array(
    'in0' => $session,
    'in1'   => $candidate_id,
    'in2'   => 'test.txt',
    'in3'   => 'test.txt',
    'in4'   => 'text/plain',
    'in5'   => array('array' => $B64File)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:06:33.917

很明显，我必须对数组标签做一些事情，这是肯定的。

上面的答案值得“投票”，所以我给了它一个。但是我自己找到了正确的答案……经过几秒钟的“逻辑”思考。:)

```
'in5'   => array('array' => $B64File) 
```

# javascript - 如何为 ASP.NET MVC 4 和 ASP.NET Web API 实现单独的项目

> ID：12898906
> 
> 赞同：6
> 
> 时间：2012-10-15T15:28:22.167
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-web-api

我正在开发一个大型 ASP.NET MVC/Web API 项目，并希望将控制器分离到他们自己的项目中（如本文[http://msdn.microsoft.com/en-us/magazine/jj190803 中所述。 .aspx](http://msdn.microsoft.com/en-us/magazine/jj190803.aspx)）。不同之处在于我需要分离出 ASP.NET Web API 控制器，而不是“普通”MVC 控制器。

在我的解决方案中，我有两个独立的项目：

*   一个用于提供 HTML/CSS/JavaScript 的 ASP.NET MVC 4 项目（注意我没有使用任何标准的 MVC 控制器，这个项目是所有客户端/浏览器端代码，用于对 Web API 进行 jQuery/Ajax 调用）
*   一个 ASP.NET Web API 项目（这个项目只有 ApiController(s)，没有视图、HTML 等，我仍然希望 Web API 项目托管在 IIS 中，而不是自托管）

无论如何，我看过其他帖子，这些帖子并没有真正解释我的确切情况，而且我无法让这个解决方案正常工作。

如何将我的 Web API 控制器拆分为他们自己的单独项目，并在我的单独 MVC 项目中从我的 HTML/JavaScript 代码中使用它们？而且，如何从单独的 MVC 项目中的 JavaScript/jQuery 代码调用 API 的端点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:59:15.720

由于您的 Web Api 和 MVC 位于不同的项目中，并且可能它们将在不同的域中运行，因此由于跨域问题，客户端的通信不太困难。

虽然您可以尝试 JSONP 或 CORS，但它们不会有太大用处（一种是 hack，另一种在浏览器中不受广泛支持），因此您必须在 MVC 项目中创建与 Web 对话的包装 MVC 控制器Api 通过`HttpClient`类。

您的 javascript 将调用您的 MVC 控制器，这样您就可以避免跨域问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:01:49.647

您可以将您的 API 控制器分离到另一个项目中，这很好。只需确保您引用了所有必需的程序集。我建议看一下 Nuget 包，以确保你拥有它们。
对于 api 和 web 分离，我猜只使用正确的路由。检查 MVC 项目的 App_Start 文件夹中的“WebApiConfig.cs”。API 路由基本上以“API/...”开头，所以它不会弄乱你的 mvc 站点。所以最后你会得到这样的东西：

```
 http://localhost/products
 http://localhost/api/products 
```

第一个在 mvc 站点处理请求，第二个在 WebApi。

# vb.net - 在设计器的属性视图中公开用户控件的内部对象？

> ID：12898909
> 
> 赞同：0
> 
> 时间：2012-10-15T15:28:28.840
> 
> 标签：vb.net, custom-controls, windows-forms-designer, design-time

我已经成功地使用 DesignerSerializationVisibility(Content) 在 vb.net 设计器中公开了一组项目。现在我有了新的转折。我的集合中某个自定义控件的项目是不可变的——即项目既不能添加也不能删除。我想要的只是在设计器的属性面板中公开我的集合的项目，以便开发人员可以调整预定义的项目集合中每个项目的各个属性。

当我尝试 DesignerSerializationVisibility(Content) 时，它允许开发人员管理项目，而不是编辑现有项目，而是尝试将项目重新添加到集合中，这会导致键冲突。

结果，我认为将集合中的每个项目都公开为自己的属性可能是有意义的。我使用了 DesignerSerializationVisiblity(Visible) 和 (Content)，两者都只在属性窗口中显示类型名称，但它公开的对象以可以操纵其属性的方式不可见。

我错过了什么还是不能这样做？我在某处读到了有关使用 TypeConverter 的信息。这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:26:05.143

如果我正确理解您的问题，您希望将属性更改为具有多个子属性的可扩展属性。

如果我理解正确，您必须创建一个派生自**ExpandableObjectConverter**的类。并将此类与**TypeConverterAttribute**一起用于您的属性或与您的属性相关的类。

有关更多信息，请参阅我的问题，它的链接在下面提供：

[在属性网格中隐藏可扩展属性的省略号 (...) 按钮，例如字体属性的“...”按钮](https://stackoverflow.com/q/12826684/1625883)

# ios - 有没有办法使用objective-c在iOS中访问“自上次充满电以来的时间”值？

> ID：12898911
> 
> 赞同：3
> 
> 时间：2012-10-15T15:28:31.787
> 
> 标签：ios, time, battery

在**设置中**，在**使用情况**下，有**自上次完全充电以来经过的时间**值。有没有办法在 iOS 中访问这些值？

我已经搜索过，但我自己无法找到任何东西。我是否**忽略**了**文档**的特定部分，或者目前完全**不可能**做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:43:14.220

使用公共 API 是不可能的。该方法可能在私有 API 中，但我从未在任何论坛或博客上看到过它。您可以从公共 API 获得的最多信息是电池电量、充电时间、充电状态（已插入、未插入）。

# python - 如何使用 vlc python 绑定在 numpy 数组中抓取视频帧？

> ID：12898917
> 
> 赞同：4
> 
> 时间：2012-10-15T15:28:47.297
> 
> 标签：python, numpy, vlc, libvlc

我想使用 python 在（2D）numpy 数组中从 libvlc 中获取每个视频帧。我希望将 vlc.MediaPlayer.video_set_callbacks(...) 与 [callbacks][1] 一起使用来管理一个 numpy 数组，但是没有关于**在 python 中使用回调的**文档。

任何想法或替代方法？

[1]: 用 vlc.cb.VideoLockCb 和它的朋友装饰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:37:39.143

也许看看[PyFFmpeg](http://code.google.com/p/pyffmpeg/)？我不使用这个 python 模块，因此我不知道它的工作情况如何，但它确实宣传了您需要的功能。

**编辑**

[OpenCV](http://opencv.org/)也值得一试。它可能更稳定。OpenCV 提供不少于两个 python 绑定。后者更好的是 cv2 与 numpy 集成。它比旧的 cv 模块更容易使用。例如，您可以使用以下代码读取视频帧：

```
import cv2
filename = 'myfile.mpg'
capture = cv2.VideoCapture(filename)
retval, im = capture.read() 
```

每次调用`.read`都会输出一个新的视频帧。

# html - 文字显示不正常，如何解决？

> ID：12898921
> 
> 赞同：0
> 
> 时间：2012-10-15T15:28:56.873
> 
> 标签：html, text, encoding

在过去的几天里，我的浏览器 Chrome 和下载后的 Firefox（从 Chrome 导入内容可能会导致那里出现问题）一直无法正确显示文本。我明白了吗？用菱形代替某些字符（有时是其他语言的符号，有时是逗号和其他符号。）CSS 页面中的某些文本也被替换为 E，这些 E 也显示在链接中。这些链接似乎显示为 HTML 代码而不是链接。

[http://i224.photobucket.com/albums/dd150/ErikoKatsuragi/problem1_zpsca93c38a.jpg](http://i224.photobucket.com/albums/dd150/ErikoKatsuragi/problem1_zpsca93c38a.jpg)

[http://i224.photobucket.com/albums/dd150/ErikoKatsuragi/problem2_zps67fe9865.jpg](http://i224.photobucket.com/albums/dd150/ErikoKatsuragi/problem2_zps67fe9865.jpg)

我稍后会检查 Internet Explorer 以发现这些问题不存在。我的浏览器以 Unicode 显示。无论如何我可以自己解决这个问题还是应该找专业人士？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T15:31:36.110

卸载然后重新安装您的浏览器！！

# php - 为什么我在检查 cookie 时看不到单选按钮？

> ID：12898922
> 
> 赞同：0
> 
> 时间：2012-10-15T15:28:57.703
> 
> 标签：php, ajax, jquery

我试图从 Ajax 发布到 PHP 文件以构建投票系统，但我无法发送任何请求，因为我看不到单选按钮...cookie 检查有问题...我只想检查用户 IP 如果他已经投票消失单选按钮，如果不是，他会显示单选按钮

索引.html

> ```
>  <script type="text/javascript" >
>         $(function(){
>             var loader=$('#loader');
>             var pollcontainer=$('#pollcontainer');
>             loader.fadeIn();
>             //Load the poll form
>             $.get('poll.php', '', function(data, status){
>                 pollcontainer.html(data);
>                 animateResults(pollcontainer);
>                 pollcontainer.find('#viewresult').click(function(){
>                     //if user wants to see result
>                     loader.fadeIn();
>                     $.get('poll.php', 'result=1', function(data,status){
>                         pollcontainer.fadeOut(1000, function(){
>                             $(this).html(data);
>                             animateResults(this);
>                         });
>                         loader.fadeOut();
>                     });
>                     //prevent default behavior
>                     return false;
>                 }).end()
>                 .find('#pollform').submit(function(){
>                     var selected_val=$(this).find('input[name=poll]:checked').val();
>                     if(selected_val!=''){
>                         //post data only if a value is selected
>                         loader.fadeIn();
>                         $.post('poll.php', $(this).serialize(), function(data, status){
>                             $('#formcontainer').fadeOut(100, function(){
>                                 $(this).html(data);
>                                 animateResults(this);
>                                 loader.fadeOut();
>                             });
>                         });
>                     }
>                     //prevent form default behavior
>                     return false;
>                 });
>                 loader.fadeOut();
>             });
> 
>             function animateResults(data){
>                 $(data).find('.bar').hide().end().fadeIn('slow', function(){
>                     $(this).find('.bar').each(function(){
>                         var bar_width=$(this).css('width');
>                         $(this).css('width', '0').animate({ width: bar_width }, 1000);
>                     });
>                 });
>             }
> 
>         });
>     </script> 
> ```

投票.php

```
if (!isset($_POST['poll']) || !isset($_POST['pollid'])) {
    $query = mysql_query("SELECT id, ques FROM questions ORDER BY id DESC LIMIT 1");
    while ($row = mysql_fetch_assoc($query)) {
        //display question
        echo "<p class=\"pollques\" >" . $row['ques'] . "</p>";
        $poll_id = $row['id'];
    }
    if (isset($_GET["result"]) == 1 || isset($_COOKIE["voted" . $poll_id]) == 'yes') {
        //if already voted or asked for result
        showresults($poll_id);
        exit;
    } else {
        //display options with radio buttons
        $query = mysql_query("SELECT id, value FROM options WHERE ques_id=$poll_id");
        if (mysql_num_rows($query)) {
            echo '<div id="formcontainer" ><form method="post" id="pollform" action="' . $_SERVER['PHP_SELF'] . '" >';
            echo '<input type="hidden" name="pollid" value="' . $poll_id . '" />';
            while ($row = mysql_fetch_assoc($query)) {
                echo '<p><input type="radio" name="poll" value="' . $row['id'] . '" id="option-' . $row['id'] . '" /> 
                <label for="option-' . $row['id'] . '" >' . $row['value'] . '</label></p>';
            }
            echo '<p><input type="submit"  value="Submit" /></p></form>';
            echo '<p><a href="' . $_SERVER['PHP_SELF'] . '?result=1" id="viewresult">View result</a></p></div>';
        }
    }
} else {
    // i cant see this radio 
    if (isset($_COOKIE["voted" . $_POST['pollid']]) != 'yes') {

        //Check if selected option value is there in database?
        $query = mysql_query("SELECT * FROM options WHERE id='" . intval($_POST["poll"]) . "'");
        if (mysql_num_rows($query)) {
            $query = "INSERT INTO votes(option_id, voted_on, ip) VALUES('" . $_POST["poll"] . "', '" . date('Y-m-d H:i:s') . "', '" . $_SERVER['REMOTE_ADDR'] . "')";
            if (mysql_query($query)) {
                //Vote added to database
                setcookie("voted" . $_POST['pollid'], 'yes', time() + 86400 * 300);
            }
            else
                echo "There was some error processing the query: " . mysql_error();
        }
    }
    showresults(intval($_POST['pollid']));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:33:55.283

`isset($_COOKIE["voted" . $poll_id]) == 'yes'`isset 返回真或假，所以这个条件总是假的。与此相同`if (isset($_COOKIE["voted" . $_POST['pollid']]) != 'yes')`

# python - 获取错误的数组类型（在 Python 中编写堆排序）

> ID：12898926
> 
> 赞同：1
> 
> 时间：2012-10-15T15:29:17.380
> 
> 标签：python, sorting, heap

我编写了以下堆排序代码，有时会得到错误的输出（未排序），我似乎无法找到原因......任何帮助将不胜感激！（警告：我仍在学习可能是问题的 Python）

```
def heap_sort(self, a):

    self.build_max_heap(a)
    n = len(a)-1
    i = len(a)-1

    for i in range(len(a)-1, 1):
        temp = a[0]
        a[0] = a[i]
        a[i] = temp
        a.heapsize = heapsize - 1
        self.max_heapify(a, 0)       #rebuild max heap at with new root

def max_heapify(self, a, i):

    left = (2*(i+1))-1      #left child of i
    right = 2*(i+1)             #right child of i
    largest = i

    if left < a.heapsize and a[left] > a[i]:
        largest = left

    if right < a.heapsize and a[right] > a[largest]:
        largest = right

    if largest != i:
        temp = a[largest]
        a[largest] = a[i]
        a[i] = temp
        self.max_heapify(a, largest)

def build_max_heap(self, a):

    heapsize = len(a)
    i = int(heapsize/2)-1

    for i in range(i, 0):
        self.max_heapify(a, i) 
```

这些是我的测试：

```
#--Test for 0 in array--#
def zero_array(self):
    a = [12,0,232]
    print self.sort.heap_sort(a)
    return

#--Test for duplicate in array--#
def duplicate_array(self):
    a = [12, 12, 7]
    print self.sort.heap_sort(a)
    return

#--Test for all same values in array--#
def allsame_array(self):
    a = [1,1,1]
    print self.sort.heap_sort(a)
    return

#--Test for negative values in array--#
def negative_array(self):
    a = [-23, -2, 123]
    print self.sort.heap_sort(a)
    return 
```

我得到以下返回的数组（假设已排序）：

```
 [12, 0, 232]
    [12, 12, 7]
    [1, 1, 1]
    [-23, -2, 123] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:55:39.830

我马上看到一个问题：

```
for i in range(len(a)-1, 1) 
```

如果您想减少 1 次包容性使用：

```
for i in range(len(a)-1, 0, -1) 
```

# php - 将 GCC 编译器连接到 Web 服务器

> ID：12898935
> 
> 赞同：-2
> 
> 时间：2012-10-15T15:29:56.297
> 
> 标签：php

我创建了一个网站。我希望人们在网站上提交给定问题陈述的源代码。我希望立即响应代码...即显示编译时错误或运行时错误，如果有的话。这一切都应该提交代码后立即完成。完全正确的代码将被接受。如何将 GCC 连接到网络服务器？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:32:39.150

您正在引入一些令人难以置信的安全漏洞，从而将此功能暴露给 Internet。但是，试试这个：

```
exec('gcc test.c', $output, $return); 

var_dump($output); 
var_dump($return); 
```

# google-analytics - 谷歌分析 - 单独跟踪每个属性

> ID：12898940
> 
> 赞同：0
> 
> 时间：2012-10-15T15:30:05.693
> 
> 标签：google-analytics, google-analytics-api

我正在创建一个房地产网站，供应商可以在其中宣传他们的房产。因为提供者很高兴看到一些关于点击、查看等的统计数据。我坚持我使用谷歌分析来跟踪这些东西。

在 Blogger 中，您可以启用 Google Analytics 并仅为您的博客显示统计信息。我想知道是否可以对属性进行类似的操作，以便属性提供者可以查看其每个属性的单独统计信息。

谷歌分析有这样的功能吗？还是 Blogger 只是一个例外，因为它属于 Google？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:54:10.283

至少在我看来，您有两个选择：

1.  允许用户输入他们自己的帐号，这样他们就可以只为他们的页面将数据输入他们的帐户。如果您这样做，您需要确保使用不同的命名空间（请参阅：[跟踪器名称](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push)）以允许这样做。

2.  根据 URL 创建配置文件（如果您的 URL 显示该属性的提供商。）这比选项 1 受到更多限制，因为您可以拥有的配置文件数量有硬性限制，并且需要您手动添加个人到每个配置文件。

如果我是你，我会选择选项 1。选项 2 在我的书中是“最后的手段”选项，或者如果它适用于极少数提供者（例如，只有少数朋友作为提供者）

# bash - 在 sed 命令中使用占位符/变量

> ID：12898945
> 
> 赞同：10
> 
> 时间：2012-10-15T15:30:14.223
> 
> 标签：bash, sed, awk

我想将匹配结果的特定部分存储为变量，以供以后替换。我想把它放在一个衬里，而不是事先找到我需要的变量。

在配置 apache 并使用 mod_rewrite 时，您可以指定要用作变量的模式的特定部分，如下所示：

```
RewriteRule ^www.example.com/page/(.*)$ http://www.example.com/page.php?page=$1 [R=301,L] 
```

括号内包含的模式匹配部分存储为 $1 以供以后使用。因此，如果 url 是`www.example.com/page/home`，它将被替换为`www.example.com/page.php?page=home`。因此，匹配的“home”部分保存在 $1 中，因为它是括号内的模式部分。

我想要一个类似这个功能的`sed`命令，我需要自动替换 SQL 转储文件中的许多字符串，在每个创建表之前添加删除表（如果存在）命令，但我需要知道表名才能做到这一点，所以如果转储文件包含以下内容：

```
...
CREATE TABLE `orders`
... 
```

我需要运行类似的东西：

```
cat dump.sql | sed "s/CREATE TABLE `(.*)`/DROP TABLE IF EXISTS $1\N CREATE TABLE `$1`/g" 
```

得到结果：

```
...
DROP TABLE IF EXISTS `orders`
CREATE TABLE `orders`
... 
```

我在`sed`命令中使用 mod_rewrite 语法作为我正在尝试做的逻辑示例。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T15:39:20.510

```
sed '/CREATE TABLE \([^ ]*\)/ s//DROP TABLE IF EXISTS \1; &/' 
```

查找 CREATE TABLE 语句并捕获表名。将其替换为 'DROP TABLE IF EXISTS' 和表名，加上一个分号来终止语句，以及匹配的内容的副本以保留 CREATE TABLE 语句。

这是经典的`sed`符号。由于您使用`bash`的是 GNU，因此您可能会使用 GNU`sed`并且需要添加`--posix`以使用该表示法，或者您需要修改脚本以使用 GNU 的非标准正则`sed`表达式。我也没有尝试在输出中插入换行符。`sed`如果它对您来说足够重要，您可以使用 GNU 来做到这一点。

关键点是括号（通常需要用反斜杠转义）是捕获机制，反斜杠编号是替换机制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T15:42:36.357

```
 sed -r "s/CREATE TABLE (\`.*\`)/DROP TABLE IF EXISTS \1\n &/g" dump.sql 
```

**测试**：

```
kent$  cat t.txt

CREATE TABLE `orders`
...

CREATE TABLE `foo`
...
...

CREATE TABLE `bar`
...

kent$  sed -r "s/CREATE TABLE (\`.*\`)/DROP TABLE IF EXISTS \1\n &/g" t.txt

DROP TABLE IF EXISTS `orders`
 CREATE TABLE `orders`
...

DROP TABLE IF EXISTS `foo`
 CREATE TABLE `foo`
...
...

DROP TABLE IF EXISTS `bar`
 CREATE TABLE `bar`
... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-26T17:18:00.203

这称为“反向引用”。sed 将开始对括号之间的内容进行编号。\(...\)

请注意上面使用反斜杠作为转义字符。

参考：[https ://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html](https://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-07T14:08:59.413

这是通过该线程标题对OP问题的回答：正如@bhoom-suktitipat所说：这被称为“反向引用”......

摘要：在替换端，通过使用反斜杠后跟一个数字（从 1 开始）来实现占位符变量或反向引用查找，如下所示：`\1`

背景：我来这里是因为我一直在使用一堆代码并对其进行修改。在此过程中，我想预先对其进行 eslint 以查找 JSON 键周围的所有双引号并将它们剥离。[ESLint 的 Quote Props Rule](https://eslint.org/docs/rules/quote-props)可以与 --fix 一起使用，来做与我需要做的完全相反的事情。

任务大纲：

变成 `{ "foo": "bar" }` ，`{ foo: "bar" }`也就是**using-placeholders-variables-in-a-sed-command**

1.  在第二个匹配组中找到“foo”（键）的等价物：`("{1})(\w+)(":{1})`。
2.  使用该匹配组作为占位符来呈现`foo:`，而不是`"foo":`
3.  将更改写入文件。

*写入不同的文件：*

`sed -r 's/("{1})(\w+)(":{1})/\2:/g' in.js > out.js`

*写入同一文件：*

`sed -ri 's/("{1})(\w+)(":{1})/\2:/g' in-and-out.js`

使用的 SED 标志：

`-E, -r, --regexp-extended use extended regular expressions in the script (for portability use POSIX -E).`

`-i[SUFFIX], --in-place[=SUFFIX] edit files in place (makes backup if SUFFIX supplied)`

# java - 在 Java 中创建 XML 日志文件

> ID：12898947
> 
> 赞同：1
> 
> 时间：2012-10-15T15:30:18.187
> 
> 标签：java, xml, logging

对于我们的 J2SE 应用程序，我们想要创建一个 XML 日志文件。事件将在发生时被记录。可能会发生四到五种类型的事件（例如，击键、鼠标单击以及更多特定于应用程序的事件），每种事件都有自己的结构。这些不同事件类型的唯一共同属性是时间戳。

有这样做的标准方法吗？（我考虑使用 Log4j XMLLayout，但这似乎只将消息记录为没有结构化格式的文本字符串。）我们正在考虑使用的一件事是 JAXB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:33:15.410

会推荐 Logback，它可以让您在格式化（例如通过 XML）输出时完全灵活。我怀疑这是最接近您需要的工具 - 我无法想象您想要输出的 XML 被编码到某个库中，因为这将非常依赖于应用程序。但无论如何，它是一个比 log4j 更适合我们需求的日志框架，并且很容易熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:34:58.703

Java 包含此处描述的重要日志记录功能[http://docs.oracle.com/javase/7/docs/technotes/guides/logging/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/logging/index.html)。您应该能够创建一个自定义 Formatter 来获取您的自定义 LogRecord 对象并将它们转换为适当的 XML。

# c# - 为一组数字生成组合

> ID：12898948
> 
> 赞同：3
> 
> 时间：2012-10-15T15:30:26.970
> 
> 标签：c#, for-loop, numbers, combinations

在 C# 中，我想生成`{1,2,3,4,5,6,7,8,9,0}`5 位数字的组合。所以，我想得到 11111、11112 等的输出，直到 99999。

当我搜索时，当我把它扔到控制台应用程序中时，我没有得到任何可以工作的东西。

组合总是出错...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:32:09.933

执行 for 循环并从 11111 计数到 99999：

```
for(int i = 11111; i<=99999; i++){
    var combination = i.ToString();
    Console.WriteLine(combination);
} 
```

或者如果你想要 00001 到 99999

```
for (int i = 0; i <= 99999; i++)
{
    var combination = String.Format("{0:D5}", i);
    Console.WriteLine(combination);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:32:46.513

简单地从 0 计数到 99999 将产生所有组合（如果你想要所有组合，你真的应该从 00000 开始）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T15:35:46.953

如果您正在寻找一种组合数字的方法，而不是专门获取序列，您可以对其进行 linq 查询。

```
 var bob = new [] {1,2,3,4,5,6,7,8,9,0};
         var greg =
             from a in bob
             from b in bob
             from c in bob
             from d in bob
             from e in bob
             select string.Concat(a, b, c, d, e); 
```

# sqlcompare - 如何比较多行并在新列中获取最小日期？

> ID：12898949
> 
> 赞同：1
> 
> 时间：2012-10-15T15:30:32.323
> 
> 标签：sqlcompare

```
COMPANY PROD    ID  DATE            NAME        REQD_DATE
XYZ 12345   AAA111  7/1/2011    PETER   
XYZ 12345   PPP222  7/1/2002    JOHN    
MNS 67890   ZZZ999  9/1/2005    STEVE   
MNS 67890   DDD555  9/1/2012    MARTIN 
```

参考上表说'#temp'，每当公司和产品相同时，我想将日期{min（DATE）}的最小值放入'REQD_DATE'列

有人可以帮我吗？

提前致谢！

# javascript - jQuery sortColumns 插件：如何使用 rowspan 正确排序

> ID：12898951
> 
> 赞同：7
> 
> 时间：2012-10-15T15:30:43.223
> 
> 标签：javascript, jquery, html

在这篇文章[jQuery 表排序](https://stackoverflow.com/questions/3160277/jquery-table-sort)（github 链接：[https](https://github.com/padolsey/jQuery-Plugins/blob/master/sortElements/jquery.sortElements.js) ://github.com/padolsey/jQuery-Plugins/blob/master/sortElements/jquery.sortElements.js ）之后，我成功地对列进行了排序，但是它在rowspan 的情况：例如这样的情况

```
 Grape      3,096,671M
            1,642,721M
 Apple      2,602,750M
            3,122,020M 
```

当我单击第二列时，它会尝试排序

```
 Apple      2,602,750M
            1,642,721M
 Grape      3,096,671M
            3,122,020M 
```

（**预期的结果应该是它应该只在每个行跨度内排序**

```
 Grape      1,642,721M
            3,096,671M
 Apple      2,602,750M
            3,122,020M 
```

或者

```
 Grape      3,096,671M
            1,642,721M
 Apple      3,122,020M
            2,602,750M 
```

)

因此，如您所见，其中任何一个都不正确，请任何 jQuery 大师帮我解决这个问题。这是我的代码

```
var inverse = false;
function sortColumn(index){
    index = index + 1;
    var table = jQuery('#resultsTable');
    table.find('td').filter(function(){
        return jQuery(this).index() == index;
    }).sortElements(function(a, b){
        a = convertToNum($(a).text());
        b = convertToNum($(b).text());

        return (
            isNaN(a) || isNaN(b) ?
            a > b : +a > +b
            ) ?
        inverse ? -1 : 1 :
        inverse ? 1 : -1;
    },function(){
        return this.parentNode;
    });
    inverse = !inverse;
}
function convertToNum(str){
    if(isNaN(str)){
        var holder = "";
        for(i=0; i<str.length; i++){                                
            if(!isNaN(str.charAt(i))){
                holder += str.charAt(i);
            }
        }
        return holder;
    }else{
        return str;
    }
} 
```

**问题：**

1.如何使用rowspan对此进行排序。**ROWSPAN 的数量并不总是相同的**。上面的例子 Grape 和 Apple 的行跨度都是 2，但情况并非总是如此。

2.任何人都可以解释这个语法：

```
 return (
            isNaN(a) || isNaN(b) ?
            a > b : +a > +b
            ) ?
        inverse ? -1 : 1 :
        inverse ? 1 : -1; 
```

所以我可以看到，如果 a 或 b 不是数字，则进行字符串比较，否则进行数字比较，但我不明白

```
inverse ? -1 : 1 :
inverse ? 1 : -1; 
```

测试用例

```
<table id="resultsTable">
        <thead>
            <tr>
                <th>Fruit</th>
                <th onclick="sortColumn(1)">Quantity</th>
                <th onclick="sortColumn(2)">Rate</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td rowspan="4">Grape</td>
                <td>15</td>
                <td>5</td>
            </tr>
            <tr>
                <td>4</td>
                <td>2</td>
            </tr>
            <tr>
                <td>88</td>
                <td>1</td>
            </tr>
            <tr>                    
                <td>11</td>
                <td>3</td>
            </tr>
            <tr>
                <td rowspan="3">Melon</td>
                <td>21</td>
                <td>2</td>
            </tr>
            <tr>
                <td>2</td>
                <td>0</td>
            </tr>
            <tr>
                <td>35</td>
                <td>1</td>
            </tr>
            <tr>
                <td rowspan="6">Melon</td>
                <td>24</td>
                <td>5</td>
            </tr>
            <tr>
                <td>66</td>
                <td>2</td>
            </tr>
            <tr>
                <td>100</td>
                <td>4</td>
            </tr>
            <tr>
                <td>21</td>
                <td>1</td>
            </tr>
            <tr>
                <td>65</td>
                <td>3</td>
            </tr>
            <tr>
                <td>2</td>
                <td>0</td>
            </tr>
        </tbody>
 <table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:34:32.337

**代码工作的条件：**

*   包含`td`s 的列`rowspan`必须都在表格的左侧
*   `td`这些列中的所有s**必须**有一个`rowspan`，即使它是 1
*   要排序的行组由这些列的最右边组成（但可以轻松更改）

**jsFiddle：http:** [//jsfiddle.net/5GrAC/77/](http://jsfiddle.net/5GrAC/77/)

```
var inverse = false;

function sortColumn(index) {
    var trs = $('#resultsTable > tbody > tr'),
        nbRowspans = trs.first().children('[rowspan]').length,
        offset = trs.first().children('[rowspan]').last().offset().left;

    var tds = trs.children('[rowspan]').each(function() {
        $(this).data('row', $(this).parent().index());
        $(this).data('column', $(this).index());
        $(this).data('offset', $(this).offset().left)
    }).each(function() {
        if($(this).data('offset') != offset)
            return;

        var rowMin = $(this).data('row'),
            rowMax = rowMin + parseInt($(this).attr('rowspan'));

        trs.slice(rowMin, rowMax).children().filter(function() {
            return $(this).index() == index + $(this).parent().children('[rowspan]').length - nbRowspans;
        }).sortElements(function(a, b) {
            a = convertToNum($(a).text());
            b = convertToNum($(b).text());

            return (
                isNaN(a) || isNaN(b) ?
                a > b : +a > +b
                ) ?
            inverse ? -1 : 1 :
            inverse ? 1 : -1;
        }, function() {
            return this.parentNode;
        });
    });

    var trs = $('#resultsTable > tbody > tr');
    tds.each(function() {
        if($(this).parent().index() != $(this).data('row'))
            $(this).insertBefore(trs.eq($(this).data('row')).children().eq($(this).data('column')));
    });

    inverse = !inverse;
} 
```

**快速解释：**

*   找到所有`td`s`rowspan`
*   `td`保存这些s的位置，包括左偏移
*   这些`td`s 被它们的原始过滤，`offset`只与最右边的一起工作
*   `tr`与每个保留相关的 s`td`使用所需列进行排序
*   如有必要，所有`td`s`rowspan`最终都会移回其原始位置

* * *

关于问题2，我只会说完成bartlaarhoven的回答，代码也可以这样写：

```
return (
        (isNaN(a) || isNaN(b) ? a > b : +a > +b) ? 1 : -1
    ) * (inverse ? -1 : 1); 
```

您可以轻松阅读`inverse`用于反转结果的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:04:12.013

考虑问题1，试试这个代码：

```
var inverse = false;
var curRowSpan = 0;
var curIndex = 0;
var doRowSpan = false;
function sortColumn(index){
    index = index + 1;
    var table = jQuery('#resultsTable');
    table.find('td').filter(function() {
        var result = false;
        // if it is a column before the sorting column, watch the rowSpan
        if (curRowSpan == 0 && jQuery(this).index() < index && jQuery(this).attr("rowspan") > 1) {
            curRowSpan = jQuery(this).attr("rowspan");
            doRowSpan = true;
            // we are not in the sorting column so we can safely continue
            continue;
        }

        if(!doRowSpan) curIndex = index - (curRowSpan?1:0);
        else curIndex = index;

        if(jQuery(this).index() == curIndex) {
            // we are at the sorting column
            if(curRowSpan > 0) {
                curRowSpan--;
            }
            // set this to false for the following row
            doRowSpan = false;
            result = true;
        }

        return result;
    }).sortElements(function(a, b){
        a = convertToNum($(a).text());
        b = convertToNum($(b).text());

        return (
            isNaN(a) || isNaN(b) ?
            a > b : +a > +b
        ) ?
            inverse ? -1 : 1 :
            inverse ? 1 : -1;
        },function(){
            return this.parentNode;
        });
        inverse = !inverse;
    }
    function convertToNum(str){
        if(isNaN(str)){
            var holder = "";
            for(i=0; i<str.length; i++){                                
                if(!isNaN(str.charAt(i))){
                    holder += str.charAt(i);
                }
            }
            return holder;
        }else{
            return str;
        }
    } 
```

考虑问题 2；让我们扣除它的来源。首先，我们要检查是否 a > b，并且，正如您已经正确看到的，我们在字符串比较和数字比较之间进行了区分。

然后我们将简单地给出：

```
return (
        isNaN(a) || isNaN(b) ?
        a > b : +a > +b
        ) ? 1 : -1; 
```

这将检查 a > b （字符串方式或数字方式），然后在 true 时返回 1，在 false 时返回 -1。

现在我们插入`inverse`参数，它应该反转结果。这意味着**如果 inverse == true，则 1 变为 -1 并且 -1 变为 1**。在代码中，这段粗体文本将替换每次出现的`1`with`inverse ? -1 : 1`和每次出现的`-1`with `inverse ? 1 : -1`。这正是结果代码中所做的。

**更新**：`doRowSpan`在代码中添加，因为如果我们在`<tr>`包含行跨度的位置，它不应该调整索引`td`。

# mongodb - 如何从 ObjectId 字段中查找结果？

> ID：12898953
> 
> 赞同：1
> 
> 时间：2012-10-15T15:30:49.640
> 
> 标签：mongodb, mongoose

如果我有这样的架构：

```
var Word = new Schema({
    name: { type: String, required: true },
    language: { type: ObjectId, ref: "Language", required: true }
}); 
```

我试着像这样查询它

```
var language = "5078547df6b753bc06000003";
word.find({ language: language }, function (err, words) {
  console.log(words);
}); 
```

我得到一个空的结果集 ( `[]`)。我知道这种语言存在一个词，因为如果我删除`{language: language}`我得到这个对象：

```
[{
  "_id": "5079fd7b6df57b1b64cbf25d",
  "name": "dog",
  "language": "5078547df6b753bc06000003",
}] 
```

我试过使用

```
var language = mongoose.Types.ObjectId("5078547df6b753bc06000003");
word.find({ language: language }, //etc. 
```

但它仍然返回一个空的结果集。

为什么 mongoose 找不到这个语言 id 的单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:41:42.133

您已`language`在架构中将该字段声明为 ObjectId，但在 MongoDB 文档中，它实际上是一个字符串。因此，在您的`find`调用中，Mongoose`language`会将变量转换为 ObjectId，然后查询将返回`language`具有该值的 ObjectId 的任何文档（并且不会找到任何文档，因为它不是数据库中的 ObjectId）。

您要么需要更新文档以`language`包含 ObjectId 而不是字符串，要么更改您的架构以将`language`其定义为`type: String`. 如果您想像`language`在架构中所做的那样将其视为参考，那么您需要做前者。

# java - 使用 SAML 作为未加密 HTTP 标头保护站点的桥梁

> ID：12898956
> 
> 赞同：0
> 
> 时间：2012-10-15T15:31:03.943
> 
> 标签：java, servlets, proxy, translation, saml

我正在尝试尽可能多地阅读 SAML 2.0，并且想知道是否有可能放置一个 SAML 代理（不确定术语是否正确，但在架构上这对我来说很有意义）入站 SAML 请求并执行“翻译”到[未加密的 HTTP 标头保护网站](http://wiki.servicenow.com/index.php?title=Unencrypted_HTTP_Header_%28SiteMinder%29)。

对于客户端，它“看起来”像一个受 SAML 保护的站点，但实际上，有一个 Java Servlet（或类似 Java 的东西）可以完成所有处理，但实际上只发送（或代理）Unencrytped 所需的内容仅 HTTP 标头 SSO 网站。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:43:34.527

如果我正确理解您的问题，我认为 Shibboleth SP 完全符合您的描述。

Shibboleth SP 可以作为一个模块安装在 Apache、IIS 等上。它可以作为您真正的 web 应用程序的大门。它处理身份验证，并通过环境变量或 http 头将用户信息传递给您的 webapp。

您可能需要阅读此处的页面[https://wiki.shibboleth.net/confluence/display/SHIB2/Home](https://wiki.shibboleth.net/confluence/display/SHIB2/Home)以充分了解其工作原理。我很确定它的工作方式非常像你想要的。

# java - 如何在不同的 web 应用中与 EventBus 共享事件？

> ID：12898959
> 
> 赞同：3
> 
> 时间：2012-10-15T15:31:12.167
> 
> 标签：java, tomcat, guava, event-bus

我正在使用tomcat。我想把番石榴罐和我自己的罐子放在 tomcat/lib 中。我的 jar 有一个工厂来获取事件总线，并且所有 webapps 都可以访问该工厂。我不知道如何在 webapp1 中注册一个侦听器并从 webapp2 发布一个事件。我在 webapp2 中使用的对象在 webapp1 中不存在，我只能共享 java 对象，如字符串、字符串映射等，但不能共享来自其他 webapp 的对象。

一些想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:52:56.060

这是一个类加载问题：很可能，webapp1 的域类在 webapp2 中没有（也不应该）有用。相信我，当我说，你不想在 webapps 之间共享活动对象。

如果要共享数据，请考虑使用适当的 JMS（或其他类似的消息传递库），如果要共享行为，请使用 REST 服务。仅提及简单的常见解决方案。

话虽如此，如果你**真的需要**去那里，你可以把你想要共享的类放在一个 jar 中，并将这个和番石榴放在服务器范围的类路径中 + 在创建内存时特别注意部署过程-泄漏。（不过，每次你使用那种讨厌的黑客，*上帝都会杀死一只小猫*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:06:50.360

Guava`EventBus`仅适用于单个应用程序中的事件。它绝对不是用于应用程序或服务器之间的通信（至少不是直接的）。您也绝对不应该依赖于您当前在同一个 Tomcat 实例中运行两个 webapps 的事实，因为这可能是您在某个时候想要更改的内容。正如建议的那样，更好的解决方案是一个消息库，用于在 JMS 等应用程序/服务器之间进行通信。

# ruby - ruby 将字符串匹配到字符串数组

> ID：12898963
> 
> 赞同：2
> 
> 时间：2012-10-15T15:31:22.960
> 
> 标签：ruby, arrays

> **可能重复：**
> [在 Ruby 中，如何确定字符串是否不在数组中？](https://stackoverflow.com/questions/5684006/in-ruby-how-do-i-find-out-if-a-string-is-not-in-an-array)

现在我有这个代码：

```
partial_update = true if session[:intended_params][:controller] == 'foo'
partial_update = true if session[:intended_params][:controller] == 'bar'
partial_update = true if session[:intended_params][:controller] == 'ding'
partial_update = true if session[:intended_params][:controller] == 'dong'
partial_update = true if session[:intended_params][:controller] == 'up'
partial_update = true if session[:intended_params][:controller] == 'down'
partial_update = true if session[:intended_params][:controller] == 'bing'
# ETC. 
```

我想将其更改为

```
array = %w[foo bar ding dong up down bing]
partial_update = true if session[:intended_params][:controller]  == array.any_of_the_possibilites 
```

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:33:01.527

使用 Ruby[数组（可枚举）`include?`方法](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-include-3F)：

```
array = %w[foo bar ding dong up down bing]
partial_update = true if array.include?(session[:intended_params][:controller]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:23:50.170

```
case session[:intended_params][:controller]
when *%w[foo bar ding dong up down bing]
  partial_update =  true
end 
```

`case`虽然可能是滥用声明

# asp.net - 无法从线程中的网络路径读取文件

> ID：12898964
> 
> 赞同：1
> 
> 时间：2012-10-15T15:31:27.283
> 
> 标签：asp.net, multithreading, c#-4.0, iis, file-io

当我在线程中包围我的代码时，我无法从网络路径读取文件。代码在没有线程的情况下工作正常。如果我使用线程并使用本地驱动器路径（同一系统），那么它在线程中也可以正常工作，但这对我来说不是一个选择。我必须访问网络文件。

访问网络文件 File.exsists 时返回 false。此 dll 用于使用 C#、ASP.NET v4.xxx 开发的 Web 应用程序

我正在使用 IIS 网络服务器。

# c# - CIL 中的 ldc.i4.m1 和 ldc.i4.M1

> ID：12898970
> 
> 赞同：1
> 
> 时间：2012-10-15T15:31:42.993
> 
> 标签：c#, .net, cil

我正在尝试找出一些 CIL 代码。我认为有两个语句做同样的事情。这些都是

```
ldc.i4.m1 
```

和

```
ldc.i4.M1 
```

你能说出这两者有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:33:00.460

维基百科[CIL 指令列表](http://en.wikipedia.org/wiki/List_of_CIL_instructions)：

```
0x15    ldc.i4.M1   Push -1 of type int32 onto the stack as int32 (alias for ldc.i4.m1). 
```

它们似乎是一样的。

# sql - 如何使用条件 ON 进行连接

> ID：12898975
> 
> 赞同：2
> 
> 时间：2012-10-15T15:32:04.333
> 
> 标签：sql

我想做如下：

```
Select * from
table1  a
inner join table2 b

on

a.id = b.id

if (some condition is met) //  Now it gets interesting!

begin

and a.name = b.name

end 
```

显然，这是行不通的。

怎样才能最好地做到这一点？

谢谢堆垛机！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:33:52.557

为什么你不能把条件放在 WHERE 子句中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:41:01.213

通常，您会像这样进行条件连接：

```
Select * 
from table1 a
inner join table2 b
on (a.conditional_field = 1 and a.id = b.id)
or (a.conditional_field = 2 and a.id2 = b.id2) 
```

这里要注意的重要一点是，使连接**条件**可选，而不是连接本身。如果您希望使联接本身有条件，这就是外部联接的用途：

```
Select * 
from table1 a
left outer join table2 b
on a.id = b.id 
```

第一个查询将返回任一条件为真的所有匹配行。第二个查询将无条件地返回所有行，`table1`并且仅返回`table2`条件为真的那些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:34:47.220

我会使用这样的东西：

```
SELECT * FROM table1 a
JOIN table2 b ON (a.id = b.id)
WHERE NOT ( == your condition here == ) OR a.name = b.name 
```

如果你真的想把它放在连接条件中，你可以这样做：

```
SELECT * FROM table1 a
JOIN table2 b ON (a.id = b.id AND (NOT ( == your condition here == ) OR a.name = b.name)) 
```

但我认为第一种形式更清楚。

编辑：正如@James Curtis 在评论中指出的那样：

> 重要的是要注意，将条件放在 WHERE 子句中的选项仅对 INNER JOIN 有效，对于外连接，您可以消除行。

# quartz.net - 用于 Quatz 作业 xml 中的触发器的 JobDataMap

> ID：12898976
> 
> 赞同：0
> 
> 时间：2012-10-15T15:32:06.313
> 
> 标签：quartz.net

我在为 Quartz 中的触发器设置作业数据映射时遇到问题。我知道这在语法上是可能的，但我需要在 xml 作业文件中进行。但是，每次我尝试将它添加到触发器时，它都会说**job-data-map**无效。查看作业文件的 XSD (http://www.quartz-scheduler.org/xml/job_scheduling_data_2_0.xsd)，它看起来应该是**cron**标签的有效子标签，因为它继承了**abstractTriggerType**，但我的应用程序赢了不接受。

这是我的代码。我正在使用 Quartz.Net 2.0

```
<job>
  <name>StagingJob</name>
  <job-type>MyAssembly.StagingJob, MyAssembly</job-type>
  <durable>true</durable>
  <recover>false</recover>
</job>
<trigger>
  <cron>
    <name>StagingTrigger</name>
    <job-name>StagingJob</job-name>
    <misfire-instruction>SmartPolicy</misfire-instruction>
    <job-data-map>
      <entry>
        <key>end-time-cron</key>
        <value>0 59 * * * ?</value>
      </entry>
      <entry>
        <key>thread-count</key>
        <value>3</value>
      </entry>
    </job-data-map>
    <cron-expression>0 1 * * * ?</cron-expression>
  </cron>       
</trigger> 
```

通过xml将作业数据添加到触发器的正确​​方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:16:31.830

尝试删除元素**misfire-instruction**，无论如何智能策略都是默认值。如果您想保留该元素，它应该位于 job-data-map 元素之后。Quartz 对 XML 元素的排序非常严格。

如果您将 VS 属性窗口中的 Schemas 设置为指向发行版中包含的 XSD 文件，Visual Studio 还应该为您提供此文档的智能感知。

# php - 表达式引擎：编辑控制面板通道表列

> ID：12898978
> 
> 赞同：0
> 
> 时间：2012-10-15T15:32:13.350
> 
> 标签：php, codeigniter, expressionengine

您好我正在尝试编辑下图所示的查看频道表 ![在此处输入图像描述](../Images/205a6a7440fe8c57302cc901da7a585a.png)

这是否可以删除表列并用该通道字段组中的数据替换它们？

还是我必须制作一个模块并从头开始创建这个视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T16:12:37.607

看看 Zenbu 插件：

[http://devot-ee.com/add-ons/zenbu](http://devot-ee.com/add-ons/zenbu)

# spring - 使用 Spring 从文件和系统属性加载属性

> ID：12898981
> 
> 赞同：1
> 
> 时间：2012-10-15T15:32:18.357
> 
> 标签：spring, properties

搜索了其他一些帖子，但找不到我需要的确切内容，但我想这是一个简单的问题..

所以我有一个名为 myprops.properties 的属性文件

```
myprops.localProp1=localProp1
myprops.localProp2=localProp2
myprops.systemProp=${systemPropertyName} 
```

基本上，在这个属性文件中，我想使用 localProp1 和 locapProp2 的值，但对于 systemProp，我想加载系统属性。让我们假设系统属性总是被设置。

我的弹簧配置 xml 看起来像这样......

```
<bean id="myprops" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <qualifer value="myprops" />
    <property name="singleton" value="true"/>
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list><value>classpath:myprops.properties</value></list>
    </property>
</bean> 
```

我使用限定符自动装配此 bean，并使用限定符字符串“myprops”在另一个类中访问它。除了 myprops.systemProp，所有预期值都在那里，它仍然 = ${systemPropertyName}。

我将如何使用实际的系统属性来解决此属性？

我在我的弹簧配置中尝试了以下内容：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="properties" ref="myprops" />
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
</bean> 
```

这似乎没有帮助..

有任何想法吗？我希望这是一个简单的，我只是误解了属性配置中的一个常见概念。

注意：我必须手动输入所有无法复制/粘贴的代码，所以请原谅拼写错误。

谢谢。

# objective-c - 将 nsstring 中的字符与不同的字符集进行比较

> ID：12898982
> 
> 赞同：0
> 
> 时间：2012-10-15T15:32:29.323
> 
> 标签：objective-c, ios, nsstring, nscharacterset

我想将 nsstring 中的每个字符与不同的 nscharactersets 进行一一比较，并根据它匹配的字符集执行不同的操作。

我可以使用 for 循环将每个字符分配给一个子字符串以进行比较。

```
- (void) compareCharactersOfWord: (NSString *) word {

    for (int i = 0; i<[word length]; i++) {

        NSString *substring = [word substringWithRange:NSMakeRange(i,1)];

        //need to compare the substring to characterset here

    }
} 
```

我也有我的两个字符集

```
 setOne = [[NSCharacterSet characterSetWithCharactersInString:@"EAIONRTLSU"]invertedSet];

 setTwo = [[NSCharacterSet characterSetWithCharactersInString:@"DG"] invertedSet]; 
```

我在比较部分有点迷失了。我尝试了不同的方法，例如“rangeOfCharacterFromSet”，但我不断出错。在伪代码中我需要类似的东西

```
if (setOne containsCharacterFrom substring) {

//do stuff here

} else if (setTwo containsCharacterFrom substring) {

//do other stuff here

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:39:52.540

您需要`unichar`从字符串中提取每个字符 ( ) 并用于`[NSCharacterSet characterIsMember:]`确定它是否属于以下任一字符`NSCharacterSet`：

```
- (void) compareCharactersOfWord: (NSString *)word
{
    // These could be initialised globally to speed things up a little...
    NSCharacterSet *setOne = [[NSCharacterSet characterSetWithCharactersInString:@"EAIONRTLSU"] invertedSet];
    NSCharacterSet *setTwo = [[NSCharacterSet characterSetWithCharactersInString:@"DG"] invertedSet];

    for (NSUInteger index = 0; index < [word length]; index++)
    {
        unichar c = [word characterAtIndex:index];
        if ([setOne characterIsMember:c])
        {
            // c is a member of character set #1
        }
        else if ([setTwo characterIsMember:c])
        {
            // c is a member of character set #2
        }
        else
        {
            // c is a member of neither character set
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:42:51.020

要查看您的一组中的“子字符串”变量是否会执行以下操作：

```
if ([substring rangeOfCharacterFromSet:setOne].location != NSNotFound) {
    // substring is in setOne
} else if ([substring rangeOfCharacterFromSet:setTwo].location != NSNotFound) {
    // substring is in setTwo
} 
```

另一种选择是使用字符。

```
for (int i = 0; i<[word length]; i++) {
    unichar ch = [word characterAtIndex:i];

    if ([setOne characterIsMember:ch]) {
        // in setOne
    } else if ([setTwo characterIsMember:ch]) {
        // in setTwo
    }
} 
```

第二种选择有一个很大的限制。它不适用于高于 0xFFFF 的 Unicode 字符。

# html - 即使在生成apk文件后如何保留评论

> ID：12898985
> 
> 赞同：0
> 
> 时间：2012-10-15T15:32:34.580
> 
> 标签：html, extjs, sencha-touch-2

嗨，我正在使用 sencha touch 2 框架，即使在使用以下命令“sencha app build native”构建 apk 文件后，我也需要在代码中保留注释。

当我在构建 apk 文件后获得 app.js 时，它包含除了我在代码中注释的所有代码之外的所有代码。那么是否有任何工具或配置或选项来保留代码中的注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:29:43.950

不用 sencha 命令，你必须在 eclipse 中构建你的 apk，sencha 确实为 eclipse 提供了一个 IDE 插件......它不需要很长时间，你可以从本教程中弄清楚：http: [//andidog.de /blog/2012/06/packaging-a-sencha-touch-2-application-with-phonegap-for-android/](http://andidog.de/blog/2012/06/packaging-a-sencha-touch-2-application-with-phonegap-for-android/)

# python - 移动标签 PyQt

> ID：12898986
> 
> 赞同：0
> 
> 时间：2012-10-15T15:32:36.470
> 
> 标签：python, pyqt, pyqt4, qlabel

我有一个像下面这样代表游戏卡的类。桌子上显示了更多卡片，但我希望当点击一张卡片时，它会出现在桌子的中央。现在，桌子的中心可能已经有另一张牌了（假设中心在坐标 100x，100y 处）所以如果是这种情况，我想将新牌放在它旁边，比如 200x， 100 年，但我如何判断 100 年、100 年是否有东西？

```
from PyQt4 import QtGui, QtCore

class CardLabel(QtGui.QLabel):
    def __init__(self, *args, **kwargs):
        QtGui.QLabel.__init__(self, *args, **kwargs)

    def mouseReleaseEvent(self, ev):
        print 'clicked'
        self.emit(QtCore.SIGNAL('clicked()'))
        self.move(100, 100) 
```

我找不到任何 QLabel 属性（甚至在其继承的父项中），也找不到返回标签坐标的方法。如果可以的话，我可能会在全局字典中记录所有小部件的坐标，并在每次我必须移动卡片时循环遍历其项目（这是最好的方法还是有更有效的方法？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:38:42.927

`QLabel`继承自`QWidget`所以`x()`,`y()`和`pos()`其他类似的函数都可以使用。您还可以查看可以帮助您[的 Window Geometry 文档](http://qt-project.org/doc/qt-4.8/application-windows.html#window-geometry)。当您将卡片放在桌子的中心时，您可以使用相关信息更新一些字典或类似内容。如果您想在中心放置一张新卡片，只需阅读字典并根据其内容进行操作即可。

# android - 在 Android 应用中显示进度对话框

> ID：12898988
> 
> 赞同：2
> 
> 时间：2012-10-15T15:32:41.443
> 
> 标签：android, android-activity, dialog, progressdialog

我想在名为`myActivity`. 我从活动中的一个方法启动它：

```
progressDialog = ProgressDialog.show(myActivity.this, "", "loading ..."); 
```

但什么也没有出现。为什么？

我也试过这条线：

```
progressDialog = ProgressDialog.show(myActivity.this, "", "loading ...",true); 
```

结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:53:23.000

只是这个

```
//Declare progressDialog before so you can use .hide() later!
progressDialog = new ProgressDialog(this);
progressDialog.setMessage("Loading...");
progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
progressDialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T04:57:58.970

请将可运行线程添加到您的代码中

示例：[https ://abhiandroid.com/ui/progressdialog](https://abhiandroid.com/ui/progressdialog)

或查看此示例代码

```
progressDialog.show(); // Display Progress Dialog
progressDialog.setCancelable(false);
new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            while (progressDialog.getProgress() <= progressDialog.getMax()) {
                Thread.sleep(200);
                handle.sendMessage(handle.obtainMessage());
            if (progressDialog.getProgress() == progressDialog.getMax()) {
                progressDialog.dismiss();
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}}).start(); 
```

# bash - bash：将整个命令（带参数）传递给函数

> ID：12898998
> 
> 赞同：8
> 
> 时间：2012-10-15T15:33:11.287
> 
> 标签：bash, scripting

我实际上是在尝试实现一个函数，该函数断言另一个命令的失败（非零退出代码），并在失败时打印一条消息。

这是我的功能：

```
function assert_fail () {
    COMMAND=$@
    if [ `$COMMAND; echo $?` -ne 0 ]; then 
        echo "$COMMAND failed as expected."
    else
        echo "$COMMAND didn't fail"
    fi
}

# This works as expected
assert_fail rm nonexistent

# This works too
assert_fail rm nonexistent nonexistent2

# This one doesn't work
assert_fail rm -f nonexixtent 
```

一旦我向命令添加选项，它就不起作用。这是上面的输出：

```
rm: cannot remove `nonexistent': No such file or directory
rm nonexistent failed as expected.
rm: cannot remove `nonexistent': No such file or directory
rm: cannot remove `nonexistent2': No such file or directory
rm nonexistent nonexistent2 failed as expected.
rm -f nonexistent didn't fail 
```

我尝试在命令周围加上双引号，但无济于事。我希望上面的第三次调用产生与其他两个类似的输出。

我感谢任何/所有帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T03:14:03.967

@rici 正确指出了您所看到的问题，但您的包装函数存在一些实际问题。首先，它不能正确地保留参数中的空格（和其他一些有趣的字符）。`COMMAND=$@`（或`COMMAND="$@"`）将所有参数合并为一个字符串，从而失去参数之间的空格和参数中的空格之间的区别。为了使它们保持直截了当，要么`"$@"`直接使用而不将其存储在变量中，要么将其存储为数组（`COMMAND=("$@")`，然后将其执行为`"${COMMAND[@]}"`）。其次，如果该命令将任何内容打印到标准输出，它将对您的退出状态检查造成严重破坏；正如@chepner 所说，只需直接测试它。这是我建议的重写：

```
function assert_fail () {
    if "$@"; then 
        echo "$* didn't fail"
    else
        echo "$* failed as expected."
    fi
} 
```

请注意，我执行 echo 命令的方式确实失去了参数中空格的区别。如果这是一个问题，请将 echo 命令替换为：

```
printf "%q " "$@"
echo "didn't fail" 
```

和

```
printf "%q " "$@"
echo "failed as expected." 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T15:36:52.283

`rm -f`永远不会在不存在的文件上失败。它与你的包装无关。见`man rm`：

```
OPTIONS
       -f, --force
              ignore nonexistent files, never prompt 
```