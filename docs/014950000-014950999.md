# StackOverflow 问答 14950000-14950999

# php - 带空格的字符串，编码为加号。我该如何更换它？

> ID：14950001
> 
> 赞同：1
> 
> 时间：2013-02-19T04:43:59.153
> 
> 标签：php, javascript, sql-server

我有一个来自 MSSQL PHP 查询的字符串，该查询将某些 varchar 行中的空格解释为`+`. 因此，公司名称 like`My Company - Springfield, Illinois`以`My+Company+-+Springfield,+Illinois`. 这是什么编码？是否有其他字符可能会以这种方式编码，或者将是一个简单的

```
var a = "My+Company+-+Springfield,+Illinois"
var newstr = a.replace(/\+/g," "); //My Company - Springfield, Illinois 
```

够了吗？但这会以公司`+`名义失败。这是什么编码，我该如何使用它？

# c - 编译器错误：函数“find_task_by_vpid”的隐式声明

> ID：14950002
> 
> 赞同：1
> 
> 时间：2013-02-19T04:44:17.510
> 
> 标签：c, linux, process, kernel

```
if(find_task_by_vpid(pid)) 
{
   myProcess = kmalloc(sizeof(find_task_by_vpid(pid)), GFP_KERNEL);
   myProcess = find_task_by_vpid(pid);
} 
```

我已经包含`sched.h`了声明此方法的位置，但出现以下错误：

（在第一行）警告：`implicit declaration of function 'find_task_by_vpid'`

（在最后一行）警告：`assignment makes pointer from integer without a cast`

大概这些问题是相关的，但我无法弄清楚这是什么问题。运行 Ubuntu (6.06.2) linux 内核版本 2.6.15.51-server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:22:57.353

我相信你包括了错误的 sched.h。我的系统有几个 sched 头文件，但只有 /usr/src/linux-headers-3.5.0-18/include/linux/sched.h 包含 find_task_by-vpid() 的声明。我建议您检查您的包含路径。

# java - JBOSS Console Logging，推荐在生产环境中使用？

> ID：14950005
> 
> 赞同：1
> 
> 时间：2013-02-19T04:44:40.120
> 
> 标签：java, logging, jboss

我一直在寻找这个问题的答案。在我工作的公司中，我们有一个高度并发的系统，但最近发现 Web 服务器 (Jboss) 的日志配置包括控制台附加程序。应用程序记录器也将进入控制台。我们开始在日志记录操作上遇到死锁，其中大部分是控制台附加程序（我知道 Log4j 有一个非常讨厌的 sincronization 错误，但我几乎可以肯定我们在相关代码中没有任何 sincronization 方法）。另一件事是，IT 人员定期使用 putty 控制台访问控制台，暂停以检查日志，然后关闭 putty 窗口。

控制台附加程序以及在生产环境中使用控制台进行日志记录和监控是否可能导致系统出现死锁和竞争条件？我的理解是，控制台应该只在使用 IDE 的开发阶段使用，因为在高度并发的系统上，它将是另一种资源（由于无缓冲的 I/O 而变得很慢）受到竞争条件的影响。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:53:03.503

来自[性能优化 JBoss Enterprise Application Platform 5 的最佳实践](http://www.jboss.com/pdf/JB_JEAP5_PerformanceTuning_wp_web.pdf)，第 9 页

> 在生产环境中关闭控制台日志记录
> 
> 降低日志记录的详细程度
> 
> 使用异步日志记录。
> 
> 使用 If(debugEnabled()) 包装调试日志语句

我强烈建议在生产中首先考虑和最后考虑，因为 Log4J 中的一个错误会在记录之前计算要记录的内容，即如果`MyClass#toString()`是繁重的操作，Log4J 将首先计算这个`String`之前（是的，它会执行繁重的操作）然后它会检查是否`String`必须记录（非常糟糕，确实=）。

另外，告诉 IT 人员`less`在检查日志文件时使用该命令，以免阻塞文件，不要直接检查控制台 =。此命令适用于 Linux，如果您的服务器在 Unix 环境中，则该命令将是`tail`（基于@Toni 的评论）。

* * *

IMO，我认为官方的 JBoss 性能指南是停止在生产中使用控制台登录的最佳证明（即使这仍然不能证明您的死锁问题）。

# android - 在tabhost中切换选项卡后关闭软键盘

> ID：14950006
> 
> 赞同：3
> 
> 时间：2013-02-19T04:44:40.583
> 
> 标签：android, tabs, keyboard

我目前正在尝试使我的程序在更改选项卡时最小化软键盘。不幸的是，我找不到 TabHost 提供的任何方法或以其他方式检查选项卡何时更改或在选项卡更改时运行方法。我还尝试添加 android:onClick="hideKeyboard" ，其中 hideKeyboard 是一种关闭键盘的方法，但这种方法似乎对选项卡更改没有任何作用。hideKeyboard 的代码如下：

```
public void hideKeyboard()
{
    InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
} 
```

还有其他方法可以尝试检测标签更改吗？还是我的 hideKeyboard() 方法有缺陷？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:58:37.163

我认为[OnTabChangeListener](https://developer.android.com/reference/android/widget/TabHost.OnTabChangeListener.html)是执行此类操作的最佳场所。在你的情况下，它会是这样的：

```
tabhost.setOnTabChangedListener(new OnTabChangeListener(){
    @Override
    public void onTabChanged(String tabId){
        hideKeyboard()
    }
}) 
```

# android - 在android中的asynctask期间布局被挂起

> ID：14950008
> 
> 赞同：0
> 
> 时间：2013-02-19T04:44:57.810
> 
> 标签：android, android-asynctask, splash-screen

我是android开发的新手。我正在尝试加载一些我想异步执行的网络数据，以便在网络操作完成之前显示启动画面。现在，当我运行 belo 时，启动画面不会显示，而是显示一个带有标题栏的空白屏幕上吊状态。

我也在清单文件中将此活动标记为 LAUNCHER。你能告诉我什么是正确的方法吗？

这是我的启动画面代码。

```
public class SplashScreen extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

            try{

                        AsyncTask<Void, Void, HukumNamaDetails> async=new URLReader(splashScreen).execute();
                        hdetails=async.get();

                        splashScreen.saveImage(currdate);

                    }

         catch(InterruptedException e) {} catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally {
                System.out.println("In finally");
                finish();

                //start a new activity
                Intent i = new Intent();
                i.putExtra("hdetails", new HukumNamaDetails(hdetails.getHukumnama_punjabi()
                    ,hdetails.getPunjabi_vyakhya(),hdetails.getEnglish_translation()));
                i.setClass(splashScreen, Daily_HukumNama.class);
                startActivity(i);
            }
        }

//Function that will handle the touch
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        synchronized(splashTread){
                splashTread.notifyAll();
        }
    }
    return true;
}

} 
```

谢谢阿曼迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:52:22.787

调用该`get()`函数将导致您的 UI 线程等待计算完成。不要调用该`get()`方法。而是`onPostExecute()`在`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:52:38.460

[https://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)

不要打电话`get()`。在您的 AsyncTask 中覆盖`onPostExecute()`以处理操作导致的任何 UI 更新。调用`get()`会导致 UI 线程阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:24:19.800

**使用 AsyncTask 可能有点冒险：**

**1.**使用AsyncTask的**onPreExecute()****启动****闪**屏。

**2.**在 AsyncTask 的**doInBackground()**中做你的**工作**。**不要在这里尝试**任何**UI 的东西**。

 ********3.** **删除** AsyncTask 的**onPostExecute()中的****启动**画面，因为届时您的背景内容将完成。

 **要启动 AsyncTask，只需使用 AsyncTask 对象的引用调用 execute()。

注意：从我的角度来看，此时调用**get()是不必要的。**********

# c - AC程序检查输入的日期是否有效

> ID：14950012
> 
> 赞同：0
> 
> 时间：2013-02-19T04:45:33.193
> 
> 标签：c, date, logic

我被要求纠正一个程序，该程序检查用户输入的日期在 C 语言中是否合法。我尝试编写它，但我猜逻辑不正确。

```
//Legitimate date
#include <stdio.h>
void main()
{
    int d,m,y,leap;
    int legit = 0;
    printf("Enter the date\n");
    scanf("%i.%i.%i",&d,&m,&y);
    if(y % 400 == 0 || (y % 100 != 0 && y % 4 == 0))
        {leap=1;}
    if (m<13)
    {
        if (m == 1 || (3 || ( 5 || ( 7 || ( 8 || ( 10 || ( 12 )))))))
            {if (d <=31)
                {legit=1;}}
        else if (m == 4 || ( 6 || ( 9 || ( 11 ) ) ) )
            {if (d <= 30)
                {legit = 1;}}
        else
            {
                        if (leap == 1)
                              {if (d <= 29)
                                    {legit = 1;}}
                        if (leap == 0)
                              {{if (d <= 28)
                                    legit = 1;}}
             }
    }
    if (legit==1)
        printf("It is a legitimate date!\n");
    else
        printf("It's not a legitimate date!");

} 
```

如果该月有 31 天，我将获得正确的输出，但对于其余月份，如果该天少于 32 天，则输出是合法的。感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:08:45.773

我将您的程序重写为简单易行，我认为这可能会有所帮助

```
//Legitimate date
#include <stdio.h>

void main()
{
   int d,m,y;
   int daysinmonth[12]={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
   int legit = 0;

   printf("Enter the date\n");
   scanf("%i.%i.%i",&d,&m,&y);

   // leap year checking, if ok add 29 days to february
   if(y % 400 == 0 || (y % 100 != 0 && y % 4 == 0))
      daysinmonth[1]=29;

   // days in month checking
   if (m<13)
   {
      if( d <= daysinmonth[m-1] )
         legit=1;
   }

   if (legit==1)
      printf("It is a legitimate date!\n");
   else
      printf("It's not a legitimate date!");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T04:49:14.233

你不能像这样链接条件：

```
if (m == 1 || (3 || ( 5 || ( 7 || ( 8 || ( 10 || ( 12 ))))))) 
```

相反，您必须专门测试每个场景：

```
if (m == 1 || m == 3 || m == 5 || ...) 
```

您的版本只是将第一个测试 ( `m == 1`) 的结果与 的值进行`3`或运算，在 C 中它是非零值，因此始终是布尔值 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T04:48:43.260

这个测试肯定是错误的：

```
if (m == 1 || (3 || ( 5 || ( 7 || ( 8 || ( 10 || ( 12 ))))))) 
```

这必须是

```
if ((m == 1) || (m == 3) || (m == 5) || ... ) 
```

执行逻辑表达式或使用非零表达式将始终评估为真。因此，您的整个测试将始终为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:08:10.187

您可以更简单地检查日期合法性：

```
#define _XOPEN_SOURCE 600
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

time_t get_date(char *line){
#define WRONG() do{printf("Wrong date!\n"); return -1;}while(0)
    time_t date;
    struct tm time_, time_now, *gmt;
    time_.tm_sec = 0;
    time_.tm_hour = 0;
    time_.tm_min = 0;
    if(strchr(line, '.') && sscanf(line, "%d.%d.%d", &time_.tm_mday, &time_.tm_mon, &time_.tm_year) == 3){
        time_.tm_mon--; time_.tm_year += (time_.tm_year < 100) ? 100 : -1900;
    }else
        WRONG();
    memcpy(&time_now, &time_, sizeof(struct tm));
    date = mktime(&time_now);
    gmt = localtime(&date);
    if(time_.tm_mday != gmt->tm_mday) WRONG();
    if(time_.tm_mon != gmt->tm_mon) WRONG();
    if(time_.tm_year != gmt->tm_year) WRONG();
    date = mktime(&time_);
    return date;
#undef WRONG
}

int main(int argc, char** argv){
    struct tm *tmp;
    if(argc != 2) return 1;
    time_t GD = get_date(argv[1]);
    if(GD == -1) return -1;
    printf("Int date = %d\n", GD);
    printf("your date: %s\n", ctime(&GD));
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T14:43:10.137

```
//reading date and checking if valid or not
//firstly we will check the yeear then the month and then the date
//
//
//
//
#include<stdio.h>
int main()
{
    int d,m,y;
    printf("ENTER THE DATE IN DD/MM/YYYY FORMAT:");
    scanf("%d%d%d",&d,&m,&y);
    //check year 
    if(y>0 && y<9999)
    {
        // check month
        if(m>=1 && m<=12)
        {
            if((d>=1 && d<=31) && (m==1 || m==3 || m==5 || m==7 || m==8 || m==10 || m==12))
                printf("the date is valid in a month with 31 days:");
            else if ((d>=1 && d<=30) && (m==4 || m==6 || m==9 || m==11 ))
                printf("the date is valid in a feb with 30 days:");
            else if ((d>=1 && d<=29) && (m==2) &&  ((y%400==0) || (y%4==0) && (y%100!=0)))
                printf("the date is valid in feb of a leap year:");
            else if ((d>=1 && d<=28) && (m==2) && (y%4==0) && (y%100==0))
                printf("the date is valid in feb of a leap year:");
            else if ((d>=1 && d<=28) && (m==2) && (y%4!=0) )
                printf("the date is valid in feb of a non leap year:"); 
            else
                printf("the date is invalid:");     
        }
        else
        {
            printf("the month is not valid:");
        }
    }
    else 
    {
        printf("the date is not valid:");
    }
    return 0;
} 
```

# jquery - 没有所有样式的 jQuery Mobile

> ID：14950015
> 
> 赞同：1
> 
> 时间：2013-02-19T04:46:11.013
> 
> 标签：jquery, ajax, jquery-mobile

我已经构建了一个移动 web 应用程序、样式和所有内容，但我最近决定要使用 jQuery mobile 的一些部分（主要的 ajax 页面导航和历史记录）。

我已经四处寻找等效的东西，但到目前为止还没有运气。所以我硬着头皮选择了 jQuery mobile，但它将所有默认样式应用于所有内容。

似乎所有内容都添加了单独的字体系列声明或文本阴影或颜色样式。覆盖所有这一切似乎有点矫枉过正。

有没有办法在没有所有美学样式的情况下使用 jQuery Mobile？还是复制页面功能的好插件？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:03:40.930

从 jQuery Mobile 1.1 开始，您可以添加`data-enhance="false"`到任何容器中，并且 jQuery Mobile 将单独保留这些元素的样式。然后您可以定义自己的自定义样式。

来源：[jQuery Mobile 文档](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)

# php - PHP：我的漫画网站的自定义喜欢功能

> ID：14950017
> 
> 赞同：2
> 
> 时间：2013-02-19T04:46:30.997
> 
> 标签：php, mysql

我正在建立一个漫画网站，最近一直在研究和测试一个喜欢的功能。我建立自己的原因是因为

1.  我想让用户喜欢和不喜欢漫画。FB喜欢不提供

2.  我想要一个自定义喜欢的图形

3.  我希望将点赞数存储在我的数据库中，这样我就可以
    按受欢迎程度对漫画进行排序……我认为我无法从 FB 获得总点赞数。

根据以下信息，我应该继续我的方法吗？

每次一个独特的人喜欢一个漫画 id 时，它会首先插入该用户的 ip 和他们喜欢的特定漫画 id。

由于他们的 IP 现在在数据库中，如果他们再次尝试对同一个漫画 id 进行投票，它不会让他们。但他们的 IP 仍然可以对任何其他漫画 ID 进行投票。

如果他们实际上喜欢一个独特的漫画 ID，它将增加漫画表中相关漫画 ID 的喜欢或不喜欢计数。然后我可以使用它来按受欢迎程度对漫画进行排名和排序。

当我在测试时，我意识到拥有唯一 IP 的用户可能会喜欢所有漫画（例如：127.0.0.1 喜欢 Comicid 30、127.0.0.1 喜欢 Comicid 31、127.0.0.1 喜欢 Comicid 32 等......并且有 60独特的漫画）...所以这是 60 个数据库条目。那只是一个用户......现在如果我的网站开始流行会发生什么......这可能会导致他们喜欢的 n 选民 * x 漫画......这可能是大量的数据库条目......这可能是我的托管服务器的巨大负担，并且管理混乱。

话虽如此，我应该只使用facebook的点赞功能吗？如果我这样做，我可以使用那些喜欢在数据库中按受欢迎程度对我自己的漫画进行排名吗？我应该继续使用我的自定义喜欢功能，但改变我的方法吗？

如果有帮助，我可以发布我当前喜欢的功能代码...

任何提示表示赞赏...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:18:44.950

我会坚持使用 facebook like 按钮。正如您从评论中看到的那样，如果您尝试自己做，那么考虑所有情况可能会很棘手，但 FB 已经解决了这一点。

FB API 绝对允许获取喜欢的数量，看看这个相关的帖子：[如何从 facebook like button 获取喜欢的数量？](https://stackoverflow.com/questions/4931104/how-to-get-number-of-likes-from-facebook-like-button)

# java - 将字节数组转换为字符串

> ID：14950019
> 
> 赞同：0
> 
> 时间：2013-02-19T04:46:33.863
> 
> 标签：java, blackberry, java-me

如何在 BlackBerry 中将字节数组转换为字符串？

我用过

```
new String(bytearray,encoding type); 
```

我`[B@fb5955d6`在调用 toString() 时遇到了问题。任何人都可以帮助以 BlackBerry 的可读格式获取此字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:06:59.810

你没有告诉我们这个字节数据来自**哪里**，或者你期望它有**什么价值。**所以，我不确定我可以*完全*调试你的问题。但是，希望这会有所帮助：

当您简单地调用字节数组时，您看到`[B@fb5955d6`打印出来的原因是[toString() 的默认实现](http://www.blackberry.com/developers/docs/6.0.0api/java/lang/Object.html#toString%28%29)只会[打印出数组数据类型的短代码](https://stackoverflow.com/a/7060025/119114)（例如），然后是*地址*之类的东西（如果你熟悉 C/C++) 的变量，这几乎不是你真正想要的，尤其是在 Java 中。`toString()``byte`

 *当您有二进制数据（作为 a `byte[]`）时，Java 不知道您是否希望该数据是 a `String`、 a`ButtonField`或 a `FuzzyWarble`。所以，打印出来没有什么比对象的地址更有意义的了。

如果你想打印`String`数据，你需要创建一个`String`带有 的对象`byte[]`，但要做到这一点，你需要使用默认的[字符编码](http://en.wikipedia.org/wiki/Character_encoding)，或者指定你想要的编码。 `"UTF-8"`并且`"ASCII"`是两种流行的编码。

如果我运行此代码

```
 try {         
     byte[] bytes = new byte[] { 100, 67, 126, 35, 53, 42, 56, 126, 122 };
     System.out.println("bytes are " + bytes.toString());
     String s = new String(bytes, "UTF-8");
     System.out.println("string is " + s);
  } catch (UnsupportedEncodingException e1) {
  } 
```

我看到这个

> 字节为 [B@3b50e2ee
> 字符串为 dC~#5*8~z

如您所见，我看到的*地址*与您看到的地址不同（因为我在另一台机器上运行，具有不同的内存布局）。但是，当转换为`String`带有`"UTF-8"`编码的 a 时，我会看到您看到的值。

那么，也许这是正确的价值？

同样，我们不知道二进制数据来自哪里，或者它应该是什么，但我可以告诉你，上面的代码是将字节数组转换为字符串的典型方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:57:27.053

尝试这个 -

```
byte[] byteArray = new byte[] {87, 79, 87, 46, 46, 46};

String value = new String(byteArray); 
```

这将为您提供价值'WOW ..'*

# php - 根据用户限制对许多页面的访问的正确方法是什么？

> ID：14950021
> 
> 赞同：0
> 
> 时间：2013-02-19T04:46:40.633
> 
> 标签：php, mysql, database, authentication

限制访问。我有一张表，为了简化，它有 3 列。用户，通过，访问。

我有 4 种类型的页面...一种需要 1 个，也就是超级管理员。另一个需要 2 个，也就是一般管理员……另外 3 个，用于 mod。最后，任何用户都可以访问。

我可以写代码，但我应该怎么做呢？

我自己提出了 2 个选项：**进入我的库的函数**或**包含我包含的文件，如果它们不应该能够访问，它会重定向到 "restricted"**。

还有其他选择吗？最常见的方法是什么？重用代码最有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:14:03.990

我唯一真正的建议是：不要编写自己的 ACL 库。那里有很多。看看[https://packagist.org/search/?q=acl](https://packagist.org/search/?q=acl)看看是否有一个看起来适合你的用例。我一直在看[https://github.com/alexshelkov/SimpleAcl](https://github.com/alexshelkov/SimpleAcl)，它可能是一个很好的开始（虽然我自己没有使用过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:06:27.290

有两种方法可以实现您想要实现的目标。我通常采用的方式是根据访问级别隐藏链接。如果不允许用户查看特定内容，请创建一个函数来隐藏链接并仅将其显示给具有正确权限的用户。

如果用户键入受限页面的 URL，那么他们应该被重定向到默认页面，可能是主页，或者解释为什么他们不能去“这里”的页面。您只需要测试权限，并且有一个默认的目标页面。任何“安全”页面都应该简单地根据页面级别测试当前访问级别，如果不等于或更高则重定向。

另一种方法是创建一个默认的“拒绝访问”页面，当用户没有足够的权限时加载该页面。

我总是用第一种方法。它很容易实现，减少了许多令人头疼的问题，最重要的是，减少了用户的挫败感。这更像是一个用户界面问题，而不是一个编程问题。

问问自己这个问题，如果网站上的管理员链接无处可去，amazon.com 会有多烦人？

# java - Adobe ColdFusion 9 不会以 NewRelic 代理启动

> ID：14950022
> 
> 赞同：3
> 
> 时间：2013-02-19T04:46:41.480
> 
> 标签：java, coldfusion, newrelic

我在 Windows Server 2003 机器上运行带有 IIS 的 Adob​​e Coldfusion 9 服务器，但是当我按照说明安装 New Relic 代理时，现在 ColdFusion 服务拒绝启动。Coldfusion-out.log 包含以下内容：

```
Feb 18, 2013 23:34:41 -0500 NewRelic 1 INFO: Agent is using Logback
Feb 18, 2013 23:34:42 -0500 NewRelic 1 INFO: Loading configuration file "C:\newrelic\.\newrelic.yml"
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at jrunx.kernel.JRun.invoke(JRun.java:180)
at jrunx.kernel.JRun.main(JRun.java:168)
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission accessClassInPackage.jrunx.kernel)
at     java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
at java.security.AccessController.checkPermission(AccessController.java:546)
at jrunx.kernel.JRun.<init>(JRun.java:446)
at jrunx.kernel.JRun$1.run(JRun.java:346)
at java.security.AccessController.doPrivileged(Native Method)
at jrunx.kernel.JRun.start(JRun.java:343)
at jrunx.kernel.JRun.startByNTService(JRun.java:427)
... 6 more 
```

我认为这不是文件夹的文件权限，因为我向 IIS 用户授予了权限。但我不知道如何解决这个问题。

任何其他 ColdFusion 人在使用 New Relic 时遇到过这个问题？

谢谢

PS：这是在 VPS 上运行，而不是完全专用的服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T05:01:14.610

Toby 在 New Relic 支持这里：目前 New Relic 代理无法使用 IIS 检测 Adob​​e Coldfusion 9 服务器。如果您将 Coldfusion 与 Java 应用服务器一起使用，我们可以检测该系统，但它看起来像：

1) 使用 IIS 的 Coldfusion 不会使用 New Relic 代理捕获准确的数据

2) New Relic 代理会干扰 Coldfusion 正确启动

目前，我建议从该框架中卸载 New Relic 代理。我将把它处理成一个功能请求，以便我们可以在未来的版本中看到对这个框架的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T11:46:35.000

我刚刚在 Windows Server 2003 上使用带有 IIS 的 Java 6 在 JRun 4 上测试了使用 ColdFusion 7 运行 New Relic，它运行良好。我认为令人困惑的是，尽管 IIS 托管网页，但 JRun 是运行 ColdFusion 的 Java 应用服务器。

在您的`java.policy`（文件中`java.home`列出的`jrun\bin\jvm.config`）中添加以下权限（以及添加此权限后出现的任何其他必需权限）

```
grant {
  permission java.lang.RuntimePermission "accessClassInPackage.jrunx.kernel";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T03:33:18.643

我在使用 cf9 时遇到了同样的问题，并向 newRelic 提交了一张罚单（实际上，我正在与之交谈的销售人员为我这样做了）。他们的回答如下：

> 嗨克里斯托夫-
> 
> 我讨厌成为坏消息的带来者，但目前不支持在 IIS 中运行 Coldfusion > 与任何代理。不过，我已经为您提出了功能要求。我还 > 将此票附加到请求中，以便在我们实施它时，我们会直接与您联系。
> 
> 我将继续将此票标记为“已关闭”，但如果您有任何其他 > 问题，只需回复票证，它会重新打开并提醒我。
> 
> 干杯，弗兰克。

请注意，newRelic 代理可以通过 IIS 在 CF10 上正常工作。

# java - 如何在现有的 tomcat Web 应用程序上实现 SSO

> ID：14950023
> 
> 赞同：20
> 
> 时间：2013-02-19T04:46:44.013
> 
> 标签：java, spring, tomcat7, single-sign-on

我有一个部署了 oldApp.war 和 newApp.war 的 tomcat 7 设置。两个应用程序为数据库上的用户共享相同的登录凭据。

我可以分别使用`https://localhost/oldApp`和访问应用程序`https:localhost/newApp`。

我的 oldApp 是一个 Spring MVC java 应用程序，当用户登录到 oldApp 时，我想要一个链接，该链接将用户带入 newApp 而无需询问登录凭据。

我想知道如何实施 SSO 来做到这一点。我最好不想运行任何外部服务来处理这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T13:10:02.490

更新：它的 2018 年和以下信息已过时。如果您正在启动一个新应用程序，那么使用像 Open ID Connect 这样的联合身份协议，您将免费获得 SSO。

您可以采取以下几种方法：

1.  您可以使用 Tomcat 进行身份验证并使用 Tomcat 的[单点登录](http://tomcat.apache.org/tomcat-8.0-doc/config/host.html#Single_Sign_On)功能。如果您当前正在使用 Spring 对用户进行身份验证，则可能需要更改一些内容。此外，根据您进行身份验证的方式，Tomcat 的身份验证可能无法进行足够的配置。
2.  您可以设置第三个，[CAS](https://www.apereo.org/projects/cas)，servlet（或类似的东西），两个 Web 应用程序都针对它们进行身份验证。
3.  您可以使用 Spring 和[pre-authenticated filters 自行](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)设置。您基本上必须编写自己的预身份验证过滤器，该过滤器在回退到旧的身份验证方法之前检查两个 servlet 都可以访问的某个位置（数据库？共享上下文？）是否存在现有凭据。您需要确保在某处的过滤器中清除此身份验证，以便下一个请求不会自动继承先前的请求凭据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T13:17:37.453

您可以通过多种不同方式实现 SSO：

1.  Oauth 2 - [http://oauth.net/2/](http://oauth.net/2/)
2.  SAML 2 - [https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=security](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=security)

SAML 2.0 有许多身份/服务提供者角色的实现。

对于 IDP 实现列表，我可以将您指向此 stackoverflow 帖子： [https ://stackoverflow.com/a/761774/126414](https://stackoverflow.com/a/761774/126414)

如果您打算实现一个服务提供者，有一个不错的 spring 扩展： [http ://static.springsource.org/spring-security/site/extensions/saml/index.html](http://static.springsource.org/spring-security/site/extensions/saml/index.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-07T13:08:48.837

我已经用 Tomcat 的**SSO Valve**管理了这个：

1.  将 SSO Valve 放在文件的 Host (localhost) 元素中`server.xml`：

    `<Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true"> <Valve className="org.apache.catalina.authenticator.SingleSignOn" /> </Host>`

2.  添加用户和角色（例如 in `tomcat_users.xml`）：

    `<user username="user1" password="user1" roles="employee"/>`

3.  在`web-app`应用`web.xml`文件的元素中，添加安全约束：

    `<security-constraint> <web-resource-collection> <web-resource-name>App name</web-resource-name> <url-pattern>/*</url-pattern> </web-resource-collection> <auth-constraint> <role-name>employee</role-name> </auth-constraint> </security-constraint> <login-config> <auth-method>FORM</auth-method> <realm-name>file</realm-name> <form-login-config> <form-login-page>/login.jsp</form-login-page> <form-error-page>/error.jsp</form-error-page> </form-login-config> </login-config> <security-role> <role-name>employee</role-name> </security-role>`

4.  而已。现在，登录到您的一个应用程序，您应该登录到其他应用程序。

当然，你不应该在生产中使用纯文本密码，这只是一个简单的例子。您应该考虑[Digest 身份验证](https://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#Digested_Passwords)，以及[在 Tomcat 上配置 SSL](https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)。

我希望这会对某人有所帮助！

PS如果您将用户存储在**SQL数据库**中，请查看我在此答案下方的评论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-30T12:31:16.397

You can deploy the CAS server (which is nothing but a war) in tomcat and configure your web app's filter accordingly. You can take help from this [link](http://www.javaroots.com/2013/05/configure-cas-server-and-client-in-java.html).

# java - Java - 我不断丢失对我的 Global 类的引用

> ID：14950024
> 
> 赞同：0
> 
> 时间：2013-02-19T04:46:47.577
> 
> 标签：java, global

所以我有一个`Global`类应该包含可以从我的所有文件中访问的各种数据。`Global`看起来像这样：

```
public class Global{
public static int rules = 0;
public static String data;
public static int score;
public static int speed = 0;
//etc...
} 
```

我通过做之类的事情来设置和完成它`Global.x = ___`。

然而，我最近在我的项目中清理了一个内存泄漏`View A`，我创建的视图 ( ) 的寿命比预期的要长。

这`View A`分配`Global.x`.

现在，一旦我移动到`View B`，`View A`就会被 GC 处理。

但是，`Global.x`不再具有价值。

这是 Java 的预期行为吗？如果是这样，我如何将一个变量分配给我的 Global 类，`View A`并确保它即使在`View A`死后也能保留。

还是我只是在其他地方做错了什么？

我想我会问以防万一我忽略了某些东西，但可能是后者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:59:29.220

您所说的问题缺少可以帮助您解决特定问题的事实。考虑粘贴您可以创建的重现问题的最小 Java 代码。话虽如此，您的设计很糟糕，您应该考虑使用单例。

```
public class Global { 

    private Global INSTANCE = new Global();
    private int speed;

    private Global() { 
        // whatever you do to initialize...
        speed = 65;
    }

    public Global getInstance() { 
    }

    public int getSpeed() { 
        return speed;
    }

    public void setSpeed(int speed) { 
        this.speed = speed;
    }
} 
```

无论你在什么范围内，你都可以说：

```
Global.getInstance().getSpeed(); 
```

或者

```
Global.getInstance().setSpeed(25); 
```

ETC...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:01:14.073

撇开设计问题不谈；

我能想到的实际上只有两种方法可以使垃圾收集`View A`对 的值产生影响`Global.x`；

*   `Global.x`是（或使用）一个[WeakReference](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)`View A`或与之一起被垃圾收集的东西。
*   `View A`有一个终结器来改变`Global.x`.

这些听起来都不太可能（尽管我当然看不到您的代码）

我最好的选择是你应该在别处寻找错误。由于全局状态变量本质上不是线程安全的，因此您的问题很可能与线程相关。

# javascript - 如何确定顶部元素？

> ID：14950026
> 
> 赞同：1
> 
> 时间：2013-02-19T04:47:19.360
> 
> 标签：javascript, jquery

我有许多嵌套的、绝对定位的元素的复杂结构。

这些元素可能有也可能没有他们的 z-index 集。

它们也可能有也可能没有相同的父元素。

我想知道返回哪个元素位于“顶部”的最佳/最简单方法是什么。类似于以下内容...

> $(".panel").topMost()

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:51:29.663

你的意思是z-index最高的元素：

```
$(document).ready(function() {
    var array = [];
    $("*").each(function() {
        array.push($(this).css("z-index"));
    });
    var highest = Math.max.apply(Math, array);
    console.log(highest);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:57:27.930

尝试这个：

```
var z = [];
$('.panel').each(function(i, el) {
  var $panel = $(el),
      zindex = $panel.css('z-index');
  z[zindex] = $panel;
});

var topMost = z.slice(-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:59:08.123

有一个插件..`topZindex`

```
$.topZIndex("div"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:33:26.970

在显示 jQuery UI 日期选择器并使用事件参数来找出单击的图标时，我在模态对话框中遇到了类似的问题。模态对话框覆盖阻止新的日期选择器显示在模态对话框的顶部。

在三种浏览器（IE、Firefox 和 Chrome）中运行的最佳解决方案是：

```
 function topZIndex(target, selector) {
          var objs = $(target).parents(selector + '[z-index > 0]');
          var a1 = -1;
          $.each(objs, function (index, z1) {a1=(z1.style.zIndex > a1)? z1.style.zIndex : a1; });
          return a1;
      }; 
```

使用事件参数如下：

```
 var zIndex = topZIndex(event.currentTarget, 'div')+1; 
```

或者

```
 var zIndex = topZIndex(event.currentTarget, '*')+1; 
```

两种组合都将产生相同的结果，但是通过指定 'div' 而不是 '*' 来指定更有效

然后假设我的日期选择器 id 是 datepickerpanel 为 datepicker 设置新的 zIndex

```
 $('#datepickerpanel').css('z-index', zIndex); 
```

此解决方案提供了适当的 z-index 值以将新对象放置在模态对话框的顶部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:30:20.533

看看你是否没有指定`z-index`绝对元素 then `last of the element will be on top of other elems`，意味着`last element will have a greater highest default z-index calculated by browser`它本身。

## 试试这个小提琴：http: [//jsfiddle.net/fLB2W/](http://jsfiddle.net/fLB2W/)

```
var array = [];
$("*").each(function () {
   if ($(this).css('position') == 'absolute') {
       array.push($(this).css("position")+'<--pos & class -->'+$(this).attr('class'));
    }
});

 console.log(array[array.length-1]); 
```

# google-apps-script - 将 Google 协作平台中的 Google 电子表格数据显示为 HTML？

> ID：14950027
> 
> 赞同：0
> 
> 时间：2013-02-19T04:47:32.020
> 
> 标签：google-apps-script, google-sheets, google-sites

我有一个谷歌电子表格，我正在尝试使用谷歌网站构建一个网页。我不想嵌入整个工作表，甚至是一系列单元格。我只想让我的网页显示电子表格中某些单元格的文本，并且我希望能够使用 HTML 设置该文本的样式。

例如，单元格 A1 中的值是“今天有 3 场比赛”。

我希望能够将此文本放入我的网页中，然后为其设置字体大小、对齐方式，并将其放入带有边框和弧形角（边框半径）的框中。

我认为可能有几种方法可以实现这一点，但我得到的最接近的方法是在页面中插入一个“应用程序脚本小工具”并使用 doGet() 方法：

```
function doGet(e){   
var app = UiApp.createApplication();

var ss = SpreadsheetApp.openById('SPREADSHEET_KEY');
var sheet = ss.getSheetByName("Sheet1");
var range = sheet.getRange('A1');
var dataRange =  range.getValue().toString();

 app.add(app.createHTML("There are " + dataRange + " games today"))
 return app;  
} 
```

但我不知道如何将 HTML 添加到网页以使其看起来很花哨。我什至无法在脚本中设置任何东西，例如字体对齐。我试过了

```
.setHorizontalAlignment('center') 
```

但我不断收到诸如“找不到方法（类）setHorizo​​ntalAlignment（字符串）”之类的错误。谁能给我指出正确的方向？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:01:12.183

大多数样式属性都可以用`.setStyleAttributes()`.

```
.setStyleAttribute("fontSize","200%"); 
```

**注意：**您需要使用 camelCase而不是写`font-size`or 。`margin-left`

```
.setStyleAttributes({marginLeft:"15px",marginTop:"22px"}); 
```

这些只是如何使用它的几个示例。

为了使用水平对齐，您应该使用

```
.setHorizontalAlignment(UiApp.HorizontalAlignment.CENTER); 
```

使用 Google 脚本的自动完成功能查看您可以使用的所有选项。

* * *

如果您已经熟悉 HTML，请考虑使用 HTML 模板将变量从电子表格中提取到 HTML 中。[模板化的 HTML](https://developers.google.com/apps-script/html_service#TemplatedHTML)

# javascript - 我怎样才能平分圆？

> ID：14950028
> 
> 赞同：4
> 
> 时间：2013-02-19T04:47:44.407
> 
> 标签：javascript, algorithm, canvas, trigonometry

我正在尝试用 JavaScript 和一个`<canvas>`元素平分一个圆圈。我使用[这个问题](https://stackoverflow.com/q/839899/241142)的已接受答案中给出的公式来查找圆边缘上的点，但由于某种原因，当我在圆上给出两个相反的点（例如 0 和 180，或 90 和 270）时，我' m 没有得到一条穿过圆心的线。

[我的代码（您可以在 JSFiddle 上看到](http://jsfiddle.net/7w29h/)）创建了一个很好的 Spirograph 模式，这很酷，但我不想这样做。

我该如何解决这个问题，让线条穿过中心？

（最终我试图画一个[五分之一的圆圈](https://www.google.com/search?q=circle+of+fifths&hl=en&tbo=u&tbm=isch&source=univ&sa=X&ei=gAMjUbHuHrDLyAHKsoGIBQ&ved=0CEgQsAQ&biw=1129&bih=651)，但我现在要问的只是让线条穿过中心。一旦成功，我将继续其他步骤来做圆圈五分之一，这显然包括画更少的线和失去螺旋图环。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T04:50:42.887

Javascript 中的度数以弧度指定。不是检查大于或小于 180 以及添加或减去 180，而是对`Math.PI`弧度执行相同操作。

[http://jsfiddle.net/7w29h/1/](http://jsfiddle.net/7w29h/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:06:18.737

中的绘图函数和三角函数`Math`期望以弧度而不是度数指定角度。

[**演示**](http://jsfiddle.net/7w29h/3/)

**与**您当前的代码不同：

```
function bisect(context, degrees, radius, cx, cy) {
    // calculate the point on the edge of the circle
    var x1 = cx + radius * Math.cos(degrees / 180 * Math.PI);
    var y1 = cy + radius * Math.sin(degrees / 180 * Math.PI);

    /* Trimmed */    

    // and calculate the point on the opposite side
    var x2 = cx + radius * Math.cos(degrees2 / 180 * Math.PI);
    var y2 = cy + radius * Math.sin(degrees2 / 180 * Math.PI);

    /* Trimmed */
}

function draw(theCanvas) {

    /* Trimmed */
    // 2 * PI, which is 360 degree
    context.arc(250, 250, 220, 0, Math.PI * 2, false);

    /* Trimmed */

    context.arc(250, 250, 110, 0, Math.PI * 2, false);

    /* Trimmed */

    // No need to go up to 360 degree, unless the increment does
    // not divides 180
    for (j = 2; j < 180; j = j + 3) {
        bisect(context, j, 220, 250, 250);    
    }
    /* Trimmed */
} 
```

## 附录

这是来自 JSFiddle 的完整源代码，请保留完整副本以防万一。

**HTML**

```
<canvas id="the_canvas" width="500" height="500"></canvas> 
```

**CSS**

```
canvas {
    border:1px solid black;
} 
```

**JavaScript**

```
function bisect(context, degrees, radius, cx, cy) {
    // calculate the point on the edge of the circle
    var x1 = cx + radius * Math.cos(degrees / 180 * Math.PI);
    var y1 = cy + radius * Math.sin(degrees / 180 * Math.PI);

    // get the point on the opposite side of the circle
    // e.g. if 90, get 270, and vice versa
    // (super verbose but easily readable)
    if (degrees > 180) {
        var degrees2 = degrees - 180;
    } else {
        var degrees2 = degrees + 180;
    }

    // and calculate the point on the opposite side
    var x2 = cx + radius * Math.cos(degrees2 / 180 * Math.PI);
    var y2 = cy + radius * Math.sin(degrees2 / 180 * Math.PI);

    // now actually draw the line
    context.beginPath();
    context.moveTo(x1, y1)
    context.lineTo(x2, y2)
    context.stroke();
}

function draw(theCanvas) {
    var context = theCanvas.getContext('2d');
    // draw the big outer circle
    context.beginPath();
    context.strokeStyle = "#222222";
    context.lineWidth = 2;
    context.arc(250, 250, 220, 0, Math.PI * 2, false);
    context.stroke();
    context.closePath();

    // smaller inner circle
    context.beginPath();
    context.strokeStyle = "#222222";
    context.lineWidth = 1;
    context.arc(250, 250, 110, 0, Math.PI * 2, false);
    context.stroke();
    context.closePath();

    for (j=2; j < 180; j = j + 3) {
        bisect(context, j, 220, 250, 250);    
    }

}
$(function () {
    var theCanvas = document.getElementById('the_canvas');
    console.log(theCanvas);
    draw(theCanvas, 50, 0, 270);
}); 
```

# php - 如何使用 PHP 通过 Hoop 将文件卷曲到 hadoop

> ID：14950031
> 
> 赞同：1
> 
> 时间：2013-02-19T04:48:11.480
> 
> 标签：php, curl, hadoop, hdfs

我想使用 php 将一个大文件卷曲到 Hoop。如果我进行正常的 php 文件上传，则文件中会附加标头。

当我尝试这个时：

```
$url = http://hoop:14000/filename?op=create&user.name=root
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, array("file" => "@" . $this->filepath));
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/octet-stream', 'Expect:'));
$content  = curl_exec($ch); 
```

箍上的文件将具有以下标题：

```
------------------------------f0f063939ed8
Content-Disposition: form-data; name="file"; filename="phpbsA4ty"
Content-Type: application/octet-stream
{binary data here........} 
```

我猜它需要是原始的帖子数据。所以我可以让它像这样工作：

```
 $url = http://hoop:14000/filename?op=create&user.name=root
    $fileData = file_get_contents($this->filepath);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fileData);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/octet-stream', 'Expect:'));
    $content  = curl_exec($ch); 
```

但是大文件会导致内存错误：

```
PHP Fatal error:  Allowed memory size of 33554432 bytes exhausted (tried to allocate 8388608 bytes) 
```

有没有办法在不将文件加载到内存的情况下发布原始文件？

我可以使用 Hoop 文档中的说明在命令行上执行此操作

```
curl -X POST -c ~/.hoopauth "http://<HOOP_HOST>:14000/<PATH>?op=create[&<OPTION>]*" \ --data-binary @data.txt  --header "content-type: application/octet-stream" 
```

来自 [http://cloudera.github.com/hoop/docs/latest/HttpRestApi.html](http://cloudera.github.com/hoop/docs/latest/HttpRestApi.html)

# android - 在 CheckBoxPreference 中分别点击 Text 和 Checkbox

> ID：14950037
> 
> 赞同：1
> 
> 时间：2013-02-19T04:48:46.793
> 
> 标签：android

我正在使用 PreferenceScreen xml 创建一个 PreferenceActivity。我想在单击 CheckBoxPreference 的标签（标题）时打开一个新的首选项屏幕，并且当用户单击此 CheckBoxPreference 的复选框时，正常的首选项功能将起作用。那么我该怎么做呢？

**例如：**在android中更改用户配置文件（通过单击单选按钮）并更改其属性（通过单击此单选按钮的标签）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-05T14:39:18.570

我认为很难使用默认偏好。但是您可以尝试扩展原始[`onBindView`](https://developer.android.com/reference/android/preference/Preference.html#onBindView(android.view.View))方法，根据文档：`This is a good place to grab references to custom Views in the layout and set properties on them.`所以，这是一个`CheckBoxPreference`可点击文本的示例。

```
public class MyCheckBoxPreference extends CheckBoxPreference {
    static final String TAG = "MyCheckBoxPreference";

    public MyCheckBoxPreference(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public MyCheckBoxPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyCheckBoxPreference(Context context) {
        super(context);
    }

    @Override
    protected void onBindView(View v) {
        super.onBindView(v);
        ((ViewGroup) v).getChildAt(1).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.i(TAG, "onClick " + getKey());
            }
        });
    }
} 
```

# java - Struts2 Property Tag in Display Tag

> ID：14950039
> 
> 赞同：1
> 
> 时间：2013-02-19T04:49:01.187
> 
> 标签：java, jsp, struts2, displaytag

I have the following:

```
<display:table id="tbl" name="list" pagesize="3">
    <display:column title="COLUMN">
        ${tbl.date}
    </display:column>
</display:table> 
```

The above works but I want to replace `${tbl.date}` with Struts2 tag property to call static method.

Replacing `${tbl.date}` with `<s:property value="%{#tbl.date}"/>` didn't work. I will be using `tbl.date` as parameter in calling static method in Struts2.:

```
<s:property value="@SomeStaticClass@method(tbl.date)"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:06:10.607

Try using

```
<s:property value="%{@SomeStaticClass@method(#attr.tbl.date)}"/> 
```

after adding `uid="tbl"` to `<display:table>`

# perl - Perl：连接函数和数组

> ID：14950041
> 
> 赞同：0
> 
> 时间：2013-02-19T04:49:04.437
> 
> 标签：perl

我组合了 2 个序列文件，所以我有 1 个文件和 2 个序列。我已将这 2 个序列拆分为一个 @char 数组，因为我稍后必须逐个字符地比较它们。然而，序列中的 1 个在两行上。我想使用 join 功能来组合 2 行，但我不知道如何。

**前任：**

**序列 1**

```
ACGTATATATTATATCTGGCGCTATCGATGCTATCGAT
CGATGCGCG 
```

**序列 2**

```
AGTGAGCGTAGCTAGCGGCGCGATCTAGCTA 
```

到目前为止我的代码

```
#!usr/bin/perl
use strict;
use warnings;

# open file 1
open (my $seq1, "<", "file1.fa") or die $!;
# open file 2
open (my $seq2, "<", "file2.fa") or die $!;
# open combined file
open (my $combined, ">", "combined.txt") or die $!;

# read file 1, skip header line, write to combined file
while (my $line = <$seq1>) {
        if($line =~ />/) {
                next;
}

        else {
        print $combined "$line\n";
}
}
# read file 2, skip header line, write to combined file on new line
while (my $line2 = <$seq2>) {
        if ($line2 =~ />/) {
                next;
}
        else {
        print $combined "$line2\n";
}
}
# need to open combined file for reading
open (my $combined2, "<", "combined.txt") or die $!;
# read through combined file line by line
while (my $seqs = <$combined2>) {
        chomp($seqs);
# split sequences into characters
        my @chars = split(//, $seqs);
# the sequence from file1 is on 2 separate lines. Need to join these
# lines together 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T07:01:25.287

考虑使用[Bio::SeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO.pm)来读取您的 fasta 文件，因为它可以处理多行的序列：

```
use strict;
use warnings;
use Bio::SeqIO;

my $in = Bio::SeqIO->new( -file => "file1.fa", '-format' => 'Fasta' );

while ( my $seq = $in->next_seq ) {
    my $sequence = $seq->seq;
    print $sequence, "\n";
} 
```

内容`file1.fa`：

```
>seq0
FQTWEEFSRAAEKLYLADPMKVRVVLKYRHVDGNLCIKVTDDLVCLVYRTDQAQDVKKIEKF
>seq1
KYRTWEEFTRAAEKLYQADPMKVRVVLKYRHCDGNLCIKVTDDVVCLLYRTDQAQDVKKIEKFHSQLMRLME
LKVTDNKECLKFKTDQAQEAKKMEKLNNIFFTLM
>seq2
EEYQTWEEFARAAEKLYLTDPMKVRVVLKYRHCDGNLCMKVTDDAVCLQYKTDQAQDVKKVEKLHGK
>seq3
MYQVWEEFSRAVEKLYLTDPMKVRVVLKYRHCDGNLCIKVTDNSVCLQYKTDQAQDVK 
```

输出：

```
FQTWEEFSRAAEKLYLADPMKVRVVLKYRHVDGNLCIKVTDDLVCLVYRTDQAQDVKKIEKF
KYRTWEEFTRAAEKLYQADPMKVRVVLKYRHCDGNLCIKVTDDVVCLLYRTDQAQDVKKIEKFHSQLMRLMELKVTDNKECLKFKTDQAQEAKKMEKLNNIFFTLM
EEYQTWEEFARAAEKLYLTDPMKVRVVLKYRHCDGNLCMKVTDDAVCLQYKTDQAQDVKKVEKLHGK
MYQVWEEFSRAVEKLYLTDPMKVRVVLKYRHCDGNLCIKVTDNSVCLQYKTDQAQDVK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T11:41:58.917

我假设您的序列由 ">" 符号分隔，这就是您使用 if($_ =~ />/) 作为船长的原因。如果不是，请回复评论，我将更改代码。在这里尝试以下操作：

```
open (fil1, "<", "file1.fa") or die $!;
# open file 2
open (fil2, "<", "file2.fa") or die $!;
# open combined file
open (combined, ">", "combined.txt") or die $!;

# read file 1, skip header line, write to combined file
while (<fil1>) {
        if($_ =~ />/) {
                print $combined "\n";
}

        else {
        print $combined "$line";
}
}
# read file 2, skip header line, write to combined file on new line
while (<fil2>) {
        if ($_ =~ />/) {
                print $combined "\n";
}
        else {
        print $combined "$line2";
}
} 
```

只需检查combined.txt，如果在不同的行上有序列。

# android - Service 可以同时实现 MediaPlayer.OnPreparedListener 和 MediaController.MediaPlayerControl 吗？

> ID：14950043
> 
> 赞同：0
> 
> 时间：2013-02-19T04:49:05.637
> 
> 标签：android, android-service, android-mediaplayer

您好我正在尝试编写一个 android 应用程序，该应用程序将使用服务中实现的 MediaPlayer 播放 MP3 文件，以便如果用户决定打开另一个活动或手机屏幕锁定出现，音频文件将继续播放。我还想给用户一个 MediaController 小部件，用于播放、停止、暂停、倒带或快进。我已经有一个在服务中播放 MP3 文件的应用程序，但我现在想添加 MediaController，但我无法理解这是如何在服务中完成的。我想我必须将服务“绑定”到我的活动，但我也不确定这是如何完成的。

所以我的问题是：

1）如何绑定服务和活动？

2) 如何在服务中实现 MediaPlayer 和 MediaController？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:57:54.320

对于 MediaPlayer，请研究以下文档：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

如果它是您拥有的服务，您的活动可以调用`startService(new Intent(this, MyService.class))`. 这将触发`onStartCommand`回调（即使服务已经启动）。`stopService(intent)`当您希望服务停止并随后销毁时，您的活动也可以调用。服务也可以调用`stopSelf()`。

“绑定”服务通常是指属于其他进程的服务，这些服务允许其他人访问以跨进程边界调用方法。除非那是你想要做的，否则你可能会忽略它。

# mysql - 为什么 SQL INSERT 查询将输入的值作为列名

> ID：14950046
> 
> 赞同：1
> 
> 时间：2013-02-19T04:49:13.333
> 
> 标签：mysql, mysql-insert-id, insert-query

我对 SQL INSERT QUERY 有疑问。每当我在下面的代码中执行 INSERT QUERY 时，会发生什么，查询理解要作为列名输入的值。我的代码是：

```
try
{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con=DriverManager.getConnection("jdbc:mysql://localhost/db","root","123456");
    Statement s = con.createStatement();
    int start = 8, end = 10;
    char buf[] = new char[end-start];   // for extracting day alone.

    dvalue = new String();
    ddvalue = new String(); // for adding the extracted day to the table.
    dvalue = cb3.getSelectedItem().toString();
    dvalue.getChars(start, end, buf, 0);System.out.println(buf);
    ddvalue = String.copyValueOf(buf);

    s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values (hello,"+cb3.getSelectedItem()+")");
}
catch(SQLException s)
{
    System.out.println("SQL statemnet is not executed!");
    System.out.println(s);
} 
```

执行查询后我得到的错误是：-

SQL 语句未执行！com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“字段列表”中的未知列“你好”

-- 编辑 -- 实际上，我的代码是：

```
s.executeUpdate("insert into "+nameoftab+" (sname,"+""+ddvalue+""+") values ("+cb5.getSelectedItem()+","+cb3.getSelectedItem()+")"); 
```

当我像每个人所说的那样插入引号时，会发生什么是术语“cb5.getSelectedItem()”被输入到表中。"+cb3.getSelectedItem()+" 的情况是，它只是输入了一些垃圾值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:51:34.263

您需要`hello`在查询中引用字符串。

```
s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values ('hello',"+cb3.getSelectedItem()+")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:53:47.543

尝试在 hello 周围加上单引号 - 例如 'hello'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:55:35.407

试试这个

```
 s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values ('hello',"+cb3.getSelectedItem()+")"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T04:57:09.520

这是因为您需要在字符串中添加引号。请尝试这样做：

```
>     s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values
> ('hello','"+cb3.getSelectedItem()+"')"); 
```

**请注意**，我`'`在您尝试插入的字符串的开头和结尾添加了字符。

为什么 SQL 认为你的字符串是一列？想象一下您发送给 sql 的字符串是怎样的：

```
"insert into OneTable (Field1, Field2) values (Hello, George)"
Instead of (the correct one): 
```

> **“插入 OneTable (Field1, Field2) 值 ('Hello', 'George')”**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T04:57:41.883

您需要在 周围插入引号`hello`，这就是 mysql 知道该值是整数还是字符串的方式，请
使用`' '`

```
 s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values ('hello',"+cb3.getSelectedItem()+")"); 
```

或者`\" \"`两者都工作

```
 s.executeUpdate("insert into "+nameoftab+" (sname,"+"_"+ddvalue+"_"+") values (\"hello\","+cb3.getSelectedItem()+")"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T04:57:53.840

您可能需要考虑使用[`PreparedStatement`](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)，以免不得不处理此类引用问题——并且您可以获得免受 SQL 注入攻击的额外好处。

# javascript - 把一个选择变成一个

> ID：14950053
> 
> 赞同：0
> 
> 时间：2013-02-19T04:50:15.820
> 
> 标签：javascript

像这样打开一个选择：

```
<select name="subject" onChange="mailsubject(this.value)">
    <option value="0">General Enquiry</option>
    <option value="1">Chatmaster Complaint</option>
    <option value="2">Chatmaster Application</option>
    <option value="3">Technical Issue</option>
</select> 
```

变成这样的 ul：

```
<ul>
    <li>General Enquiry</li>
    <li>Chatmaster Complaint</a></li>
    <li>Chatmaster Application</a></li>
    <li>Technical Issue</a></li>
</ul> 
```

虽然仍然能够使用具有将某些表单放入字段中的值的 js，但我宁愿有一个 ul 用于它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:59:17.830

尝试这个：

```
var list = $('<ul>');
$('#subject option').each(function() {
  $('<li>').text($(this).text()).appendTo(list);
});
list.appendTo($('body'));
$('#subject').remove(); 
```

检查小提琴[http://jsfiddle.net/eT6k7/](http://jsfiddle.net/eT6k7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:08:22.623

尝试以下

```
 $(document).ready(function(){

    var html=''
    $('#subject option').each(function() {
     html= '<li>'+$(this).text()+'</li>';
    });

    $('#subject').replaceWith($('<ul>' + html + '</ul>'));
    }); 
```

# asp.net - 单击gridview中的编辑按钮后和gridview_prerender和gridview_databound之前发生哪个事件

> ID：14950055
> 
> 赞同：0
> 
> 时间：2013-02-19T04:50:26.447
> 
> 标签：asp.net, events, gridview

单击编辑按钮后开始编辑数据需要很长时间。编辑按钮由命令 AutoGenerateEditButton 生成。在代码中，我在每个事件中都放置了点，但在单击编辑按钮和 gridview_databound 之间找不到事件。

当我尝试添加事件 OnRowCommand 时，出现错误：`'ASP.details_aspx' does not contain a definition for 'tableResults_RowCommand' and no extension method 'tableResults_RowCommand' accepting a first argument of type 'ASP.details_aspx' could be found (are you missing a using directive or an assembly reference?)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:02:48.860

这些事件发生在和之间`click on edit button`，`gridview_databound` 它们是：-
**RowEditing** - 在生成编辑事件时触发，即当editindex >-1
**RowUpdating**时：- 当您单击更新时触发。
**Rowupdate**：提交更新时触发。

**您的关注事件是`RowEditing`**

# iphone - self.navigationController.navigationBar.hidden=true; VS [self.navigationController.navigationBar setHidden:YES];

> ID：14950058
> 
> 赞同：3
> 
> 时间：2013-02-19T04:50:36.517
> 
> 标签：iphone, uinavigationbar

这两种说法有什么区别。为了隐藏导航栏，我使用以下语句之一在 viewWillAppear 方法中隐藏导航栏，如下所示：

```
 -(void)viewWillAppear:(BOOL)animated
{
    self.navigationController.navigationBar.hidden=true;   //works....
}

 -(void)viewWillAppear:(BOOL)animated
{
    [self.navigationController.navigationBar setHidden:YES]; //doesn't work...
} 
```

此代码适用于 self.navigationController.navigationBar.hidden=true; 但是当我使用 [self.navigationController.navigationBar setHidden:YES]; 它不起作用。为什么会这样？

对不起朋友有一个错误的问题。现在更正请再看

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-28T19:48:00.737

FWIW，我今天在 iOS 6 中遇到了一种情况：

```
self.navigationController.navigationBar.hidden = YES; 
```

似乎效果为零。起作用的是：

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:15:55.440

**self.navigationItem.hidesBackButton = 否；**

这只会隐藏导航栏的 BackButton。

**self.navigationController.navigationBar.hidden = false;**

这将隐藏导航栏，包括其 BackButton。

**self.navigationController.navigationBar.hidden = true;**

这将启用导航栏。

**self.navigationItem.hidesBackButton = 是；**

这将启用导航栏的 BackButton（直到导航栏设置为隐藏）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:04:41.183

不同的是一个隐藏它，另一个显示它:)

```
YES = TRUE 
NO = FALSE 
```

**隐藏导航栏**

```
self.navigationController.navigationBar.hidden=TRUE;
[self.navigationController.navigationBar setHidden:YES]; 
```

**显示导航栏**

```
 self.navigationController.navigationBar.hidden=FALSE;
[self.navigationController.navigationBar setHidden:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:03:15.173

这段代码：`self.navigationItem.hidesBackButton = YES;`实际上隐藏了后退按钮

显示在导航栏上。这段代码：

```
 self.navigationController.navigationBar.hidden=false; 
```

实际上不要隐藏您的导航栏，它会在您的视图顶部显示导航栏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:14:05.307

当你想隐藏导航栏时，你应该使用这个： -

```
self.navigationController.navigationBarHidden = YES; 
```

或者

```
[self.navigationController setNavigationBarHidden:YES]; 
```

而且每次都能正常工作。

无论如何，您的案例应该可以正常工作，但正如我们所见，这只是 iOS 的一些内部不一致。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T05:11:18.527

也许您的代码可以将 YES 更改为 NO

您可以使用 setNavigationBarHidden:animated: 为我工作。

```
-(void)viewWillDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
}
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

# php - Codeigniter：来自两个表的摘要

> ID：14950067
> 
> 赞同：0
> 
> 时间：2013-02-19T04:51:39.673
> 
> 标签：php, mysql, codeigniter, activerecord

我需要从以下格式的两个表中打印摘要：

```
Product | Grand Total
--------+---------
 Book   | 8000
 Pen    | 5000
 Ruler  | 0 
```

**表产品**

```
 id  | name
-----+---------
 1   | Book
 2   | Pen
 3   | Ruler 
```

**表交易**

```
 id  | cashier | product | total
-----+---------+---------+---------
 1   | john    |    1    | 5000
 2   | doe     |    1    | 3000
 3   | john    |    2    | 2000
 4   | other   |    2    | 3000 
```

这可以只用 1 个查询来完成吗？

**编辑：** 之前，我在 table_transaction 上使用这个查询：

```
$this->db->select('product');
$this->db->select('total');
$this->db->from('table_transaction');
$this->db->select_sum('total', 'grand_total');
$this->db->group_by('product'); 
$query = $this->db->get(); 
```

但它没有显示尚未在表中的产品。即使还没有交易，我也想打印所有产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:49:38.277

即使事务表中没有第三个产品的关系，您也需要使用完全连接来获取两个表的摘要......

```
select product.name,transaction.total from product left join transaction on product.p_id = transaction.p_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:03:30.383

试试这个：

```
$this->db->select('t1.name, sum(t2.total) as grand_total');
$this->db->from('table_product t1');
$this->db->join('table_transaction t2', 't2.product = t1.id', 'left');
$this->db->group_by('t1.name');
$query = $this->db->get(); 
```

sql fiddle 演示在这里： [http ://sqlfiddle.com/#!2/04164/2](http://sqlfiddle.com/#!2/04164/2)

# jquery - Bootstrap下拉按钮在点击时变成半黑？

> ID：14950072
> 
> 赞同：3
> 
> 时间：2013-02-19T04:52:22.903
> 
> 标签：jquery, html, twitter-bootstrap

对于这个愚蠢的问题，我深表歉意，我在导航栏（navbar-inverse）中创建了一个登录下拉按钮，但单击该按钮时变为半黑。我没有自定义按钮，它是简单的纯红色危险按钮。我一直在寻找原因，但没有任何效果。所以请帮助我。

```
 <div class="navbar navbar-inverse" style="margin-bottom:0px">
            <div class="navbar-inner">
                <ul class="nav pull-right" style="margin-top:3px">
                    <li class="active span2"><a href="#">HOME</a></li>
                    <li><a href="#" class="span2">ABOUT</a></li>
                    <li><a href="#" class="span2">PRICING</a></li>
                    <li><a href="#" class="span2">CONTACT</a></li>
                    <li class="dropdown">                           
                        <button class="btn btn-danger dropdown-toggle" data-toggle="dropdown" href="#">SIGN IN</button>
                        <ul class="dropdown-menu" style="margin-right:25px;margin-top:10px;width:230px">
                            <form align="center" style="text-align:center">
                                <div class="input-prepend">
                                    <span class="add-on" style="margin-top:10px"><i class="icon-user icon-black"></i></span>
                                    <input type="text" style="width:140px;margin-top:10px"/>
                                </div>
                                <input type="text" style="width:170px"/>
                            </form>
                        </ul>                   
                    </li>
                </ul>

            </div>
        </div> 
```

![点击之前](../Images/7b879f70753954da56a8398c4a300393.png)

![点击后](../Images/e26f556e075859e093bebbd6ada4575a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:28:56.380

问题是由于`.navbar-inverse .nav li.dropdown.open`和`.navbar .nav li.dropdown.open`类。

请在您的自定义样式表中使用以下类，更改`background-color`为您的选择。

```
.navbar-inverse .nav li.dropdown.open > .dropdown-toggle, .navbar-inverse .nav   li.dropdown.active > .dropdown-toggle, .navbar-inverse .nav li.dropdown.open.active > .dropdown-toggle {
background-color:#BD362F;
color: #FFFFFF;
 }
       .navbar .nav li.dropdown.open > .dropdown-toggle, .navbar .nav li.dropdown.active > .dropdown-toggle, .navbar .nav li.dropdown.open.active > .dropdown-toggle {
background-color:#BD362F;
color: #555555;
 } 
```

适合你的[jsfiddle 带有下拉菜单的 Jsfiddle](http://jsfiddle.net/shail/bW3VA/4/show)

# ios - 如何将日期值传递给另一个类

> ID：14950078
> 
> 赞同：0
> 
> 时间：2013-02-19T04:52:58.450
> 
> 标签：ios, objective-c, xcode

我可以将整数值传递给另一个类，但是日期呢？我正在使用以下代码传递整数：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"toStep2"]) {
        Step2ViewController *detailViewController = [segue destinationViewController];

        NSLog(@"text : %@",self.wrp.text);
        //This is the id infoRequest, which is a pointer to the object
        //Look at the viewDidLoad in the Destination implementation.
        detailViewController.infoRequest = self.wrp.text;
    }
} 
```

我的问题是用户在我的 Step1 类中输入了带有 UIDatePicker 的日期，但是如何将日期传递给 Step2 类？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:01:03.397

只需在 Step2ViewController 中声明另一个 NSDate 属性，然后像设置 infoRequest 一样设置它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:16:54.143

在 Step2ViewController 中创建一个 NSDate 属性，并在 Step1 类中为该 Step2 日期实例设置 UIDatePicker 日期。

使用此链接了解更多详情：

[http://www.scott-sherwood.com/ios-5-storyboards/](http://www.scott-sherwood.com/ios-5-storyboards/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:07:36.713

您可以在 step2 类 (@property(nonatomic, retain) NSDate *step2Date;) 中获取日期类型的属性。在转换到 step2 类时，将 datePicker 值分配给 step2 类中的 date 属性。

step2ClassObject.step2Date = datePicker.date;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:07:55.270

由于 UIStoryboardSegue 同时提供了 sourceViewController 和destinationViewController，您可以从存储在源中的属性中获取任何值并将其放入目标中的属性中。使用 NSUserDefaults 在控制器之间传输日期并不是最好的选择，因为它将存储在闪存上的会话之间，并且实际上不是为此目的而构建的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-19T05:10:04.837

当您希望它们可以在类或其他视图控制器之外访问时，您将创建属性。

以这种方式创建属性。@property (nonatomic, 保留) NSString *strData; 然后你也可以在其他视图控制器中使用这个数组值。

属性替换了对象的访问器方法。

参考this question's answer[我的回答](https://stackoverflow.com/questions/11718632/how-to-save-data-from-different-view-controllers-and-load-it-in-another-view-con/14208947#14208947)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-19T05:04:10.497

您可以使用

```
[[NSUserDefaults standardUserDefaults] setObject:lastUpdated forKey:@"dateUpdated"]; 
```

存储日期，您可以在下一堂课中使用：

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"dateUpdated"]; 
```

有关更多详细信息，请回复我

# java - 在 cglib 中使用 Dispatcher

> ID：14950081
> 
> 赞同：-2
> 
> 时间：2013-02-19T04:53:10.197
> 
> 标签：java, proxy, cglib

有人可以解释一下在**cglib**代理中使用**Dispatcher吗？**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:57:09.620

为什么不看看[Dispatcher](http://cglib.sourceforge.net/apidocs/net/sf/cglib/proxy/Dispatcher.html)和Dispatcher[的用法](http://grepcode.com/search/usages?id=repository.springsource.com@net.sourceforge.cglib%24com.springsource.net.sf.cglib@2.2.0@net%24sf%24cglib%24proxy@Dispatcher&type=type&k=u)**

# regex - 使用正则表达式提取由分隔符分隔的部分文本

> ID：14950082
> 
> 赞同：8
> 
> 时间：2013-02-19T04:53:17.163
> 
> 标签：regex, aql

我有一个如下示例输入文件，其中包含 ID、名称、开始日期、结束日期、年龄、描述和位置列：

```
220;John;23/11/2008;22/12/2008;28;Working as a professor in University;Hyderabad
221;Paul;30;23/11/2008;22/12/2008;He is a software engineer at MNC;Bangalore
222;Emma;23/11/2008;22/12/200825;Working as a mechanical engineer;Chennai 
```

它包含 30 行数据。我的要求是只从上述文本文件中提取描述。

**我的输出应该包含**

> 在大学担任教授
> 
> 他是 MNC 的软件工程师
> 
> 作为机械工程师工作

我需要找到一个正则表达式来提取描述，并且尝试了很多种，但我一直无法找到解决方案。我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-19T05:27:04.493

您可以使用此正则表达式：

```
[^;]+(?=;[^;]*$) 
```

* * *

`[^;]`匹配任何字符，除了`;`

`+`是与前面的字符或组匹配一到多次的量词

`*`是与前面的字符或组匹配零到多次的量词

`$`是字符串的结尾

`(?=pattern)`是一个前瞻，它检查特定模式是否提前发生

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T05:13:33.070

`/^(?:[^;]+;){3}([^;]+)/`将抓住分号之间的第四组。

尽管如我的评论中所述，您应该只用分号拆分字符串并抓住拆分的第四个元素......这是分隔文件的全部要点 - 您不需要复杂的模式匹配。

使用您的输入示例在 Perl 中的示例实现：

```
open(my $IN, "<input.txt") or die $!;

while(<$IN>){
    (my $desc) = $_ =~ /^(?:[^;]+;){3}([^;]+)/;
    print "'$desc'\n";
}
close $IN; 
```

产量：

```
'Working as a professor in University'
'He is a software engineer at MNC'
'Working as a mechanical engineer' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:01:51.143

这应该有效：

```
/^[^\s]+\s+[^\s]+\s+[^\s]+\s+(.+)\s+[^\s]+$/m 
```

或者正如[*孤独的牧羊人*指出的那样](https://stackoverflow.com/questions/14950082/extract-some-part-of-text-separated-by-delimiter-using-regex#comment20984748_14950082)：

```
/^\S+\s+\S+\s+\S+\s+(.+)\s+\S+$/m 
```

或者用分号：

```
/^[^;]+;[^;]+;+[^;]+;+(.+);+[^;]+$/m 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-04T04:30:04.313

看起来比较简单：

[https://regex101.com/r/W9nfsd/2](https://regex101.com/r/W9nfsd/2)

```
.*;(.*);.*$ 
```

它类似于[Anirudha 的答案](https://stackoverflow.com/questions/14950082/extract-some-part-of-text-separated-by-delimiter-using-regex/14950446#14950446)，但更简单一些。

# c - 用于 http 标头解析的 C 正则表达式库

> ID：14950086
> 
> 赞同：0
> 
> 时间：2013-02-19T04:53:49.787
> 
> 标签：c, regex

我有一个程序，它有一个缓冲区，其中包含从线路捕获的 http 数据。缓冲区将包含 http 标头和 html。使用 C 程序有没有办法解析 http 标头？我对 html 不是很感兴趣。[我已经看到Regex HTTP header parsing](https://stackoverflow.com/questions/3390041/regex-http-header-parsing)中显示的其他示例，但是，我正在考虑使用一些现有的库（将在 C 中使用），这些库可以简单地解析标头并给我每个字段。

我的要求是： - 只是窥视缓冲区并检查它的 http 有效负载 - 如果它的 http 有效负载，则运行正则表达式解析器以获取 http 标头的所有字段。

那里有我可以检查的代码吗？有人知道任何图书馆吗？

问候， bgun

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:34:44.403

图书馆[http-parser](https://github.com/joyent/http-parser)应该很好地为您服务。

如果你想解析一些简单的正则表达式，我会推荐非常小而健壮的 C 正则表达式解析器[SLRE - 超轻正则​​表达式](https://github.com/cesanta/slre)库。它仅包含一个头文件和一个用标准 C 编写的源文件，您可以将它们链接到您的项目。

它支持非常有用的标准正则表达式子集：

`\d`, `\w`, `\s`, `\S`（非空白），`*`（匹配 0 或更多），`+`（匹配 1 或更多），`()`用于组。它不认为它支持嵌套组，但我总是能够在没有它们的情况下度过难关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:31:57.487

好吧，如果它是一个 http 有效负载，前 5 个字符应该是“HTTP/”。如果这不是响应的开始，那么您可以假设它不是 http 响应。如果是并且您只关心标头，那么您只需要继续接收数据，直到第一个“\r\n\r\n”。如果您必须从那里将标题名称与值分开，那么就像使用每行上的第一个冒号作为分隔符一样简单。

# json - 如何使用 Dart 从 json 字符串中得到一个强类型的对象列表？

> ID：14950087
> 
> 赞同：1
> 
> 时间：2013-02-19T04:54:02.863
> 
> 标签：json, list, dart

我刚刚开始学习飞镖，我想尝试从 json 字符串创建一个简单的对象列表。我正在使用 AngularJS phonecat 教程尝试将其转换为 Dart ......因此，在我的 dart 文件中，我有这个......

```
import "dart:json" as json;
import "package:json_object/json_object.dart";

String jsonPhones = """
  [{"name": "Nexus S",
    "snippet": "Fast just got faster with Nexus S."},
   {"name": "Motorola XOOM™ with Wi-Fi",
    "snippet": "The Next, Next Generation tablet."},
   {"name": "MOTOROLA XOOM™",
    "snippet": "The Next, Next Generation tablet."}]
""";

class Phone {
  String name;
  String snippet;
}

class PhoneImpl extends JsonObject implements Phone {
  PhoneImpl();

  factory PhoneImpl.fromJsonString(string) {
    return new JsonObject.fromJsonString(string, new PhoneImpl());
  }
}

List<Phone> Phones;

void main() {
  PhoneImpl pi = new PhoneImpl.fromJsonString(jsonPhones);
  for(var i = 0; i < pi.length; i++) {
    print(pi[i].name);
  }
} 
```

所以，当我运行它时，它会打印出每部手机的名称。但是，如果我尝试 Phones.add(pi[i])，我会在成员名称 add 上收到类型为“noSuchMethod()”的错误。我假设此时的 pi[i] 是一个 JsonObject 并且不会自动转换为 Phone 类型。最终我想做的是使用......

```
<li template iterate="phone in Phones"> 
```

在 html 中遍历手机。我尝试使用 PhoneImpl 执行此操作，但随后出现另一个错误，提示 NoSuchMethodError memberName "containsKey"。所以我假设我需要想办法让我的列表从 PhoneImpl 到 List ，到目前为止我似乎无处可去。此外，我宁愿不必用 JsonObject 扩展我的所有模型。事实上，我也试过在没有 json_object 包的情况下完成所有这些工作，但似乎仍然无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:50:35.607

这是我处理它的方式：

```
import "dart:json";

String jsonPhones = """
  [{"name": "Nexus S",
    "snippet": "Fast just got faster with Nexus S."},
   {"name": "Motorola XOOM™ with Wi-Fi",
    "snippet": "The Next, Next Generation tablet."},
   {"name": "MOTOROLA XOOM™",
    "snippet": "The Next, Next Generation tablet."}]
""";

class Phone {
  String name;
  String snippet;

  Phone(this.name, this.snippet);
}

List<Phone> Phones;
void main() {
  Phones = parse(jsonPhones).map((e) => new Phone(e["name"], e["snippet"]);
  // do something with Phones...
} 
```

在这种情况下，`parse()`将返回一个列表，但这并不总是正确的，因此在生产中，我建议您进行检查`parse()`以确保您实际上得到了您所期望的。这种模式避免了您的 PhoneImpl 类，这似乎只是一个垫片。

Dart 团队希望实现反射，这样可以更好地直接编组到 Phone 实例，但这还没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:00:12.500

tjameson 的回答是我目前将采取的方法，但这里有一些关于您在使用 JsonObject 时遇到的问题的背景知识。

您遇到的部分问题是，尽管 JsonObject 确实将 Json 对象列表转换为列表，但 JsonObject 本身并未实现 List 接口。

该行：

```
PhoneImpl pi = new PhoneImpl.fromJsonString(jsonPhones); 
```

实际上导致`pi`包含 JsonObjects 列表，而不是单个 JsonOjbect。然后，当`phone in phones`迭代器尝试迭代该列表时，它找不到`iterator`对象（因为`JsonObject`没有实现 List 接口 - 请随意提出[问题以便我可以跟踪它](https://github.com/chrisbu/dartwatch-JsonObject/issues)- 并添加支持。

如果您对使用镜像感兴趣，那么[此分支中有 JsonObject 的实验性镜像 API](https://github.com/chrisbu/dartwatch-JsonObject/tree/mirrors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:52:03.777

试试这个库。它使用反射来做你想做的事，但因为 Dart 只有一个异步 API 用于使用反射读取和设置值，所以你挥手等待返回的未来完成。

[https://github.com/chrisbu/dartwatch-JsonObject](https://github.com/chrisbu/dartwatch-JsonObject)

# python - 如何使用运行时计算变量格式化字符串宽度？

> ID：14950089
> 
> 赞同：4
> 
> 时间：2013-02-19T04:54:29.840
> 
> 标签：python, python-2.7

我如何设置`40`为一个变量，让我们说`temp`哪个即时计算并传递而不是`40`这种格式字符串：

`{:<40}.format('aa')`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:30:44.253

像这样的东西应该工作：

```
>>> width = 40
>>> '{0:<{width}}'.format('aa', width=width)
'aa                                      ' 
```

# python - 从Python中的函数返回左值？

> ID：14950094
> 
> 赞同：1
> 
> 时间：2013-02-19T04:54:44.080
> 
> 标签：python, function, reference, lvalue

我尝试编写一个函数，该函数可以返回一个元素的引用以供分配，示例代码如下所示（Python3）：

```
row_a = ["rowname","items1","items2"]
def rowname(row):
    return row[0]
rowname(row_a) = "another_rowname" 
```

但是，它不起作用，因为解释器抱怨如下：

`SyntaxError: can't assign to function call`

有谁知道如何实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:02:01.243

没有 Pythonic 的方式来做到这一点。你不能在 Python 中返回左值——Python 不是 C++！如果您只想使用函数来设置列表的第一个元素的值，**只需执行以下操作：**

```
row_a = ["rowname","items1","items2"]
def set_rowname(row, value):
    row[1] = value
set_rowname(row_a, "another_rowname") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:09:41.210

函数的返回值不能用作变量。您可以将返回值分配给变量。您的列表定义看起来像您想要创建字典。为什么不完全按照您的预期坐下呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:21:34.880

刚刚找到了一个丑陋的方式.. Thougn`setattr`需要..

```
row_a = ["rowname","items"]
def rowname(row):
    class inner:
        def __init__(self):
            self.__dict__["to_l"] = None
        def __setattr__(self,name,value):
            row[0] = value
    return inner()
rowname(row_a).to_l = 20
print(row_a) 
```

# facebook - 使用 FB 登录和协作 Github 工作流程进行本地开发

> ID：14950098
> 
> 赞同：1
> 
> 时间：2013-02-19T04:55:23.573
> 
> 标签：facebook, git, workflow, collaboration, revision

我的 web 应用程序当前运行在一个共享的 googleDrive 文件夹上，以便于几个开发人员之间的轻松更新和协作。虽然我正在吸引更多的开发人员，所以我需要一个更好的工作流程来进行修订和无冲突协作......我想使用 git [hub]，但我的应用程序正在使用 FB 获取登录凭据，这需要来自身份验证请求我的应用程序的域，所以如果我的开发人员将 git 拉到本地机器上开发，则无法获得 OATH。有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:15:18.003

1.  [您可以在亚马逊上](http://aws.amazon.com/ec2/)运行廉价的虚拟机实例（例如）用于开发目的。为其创建 FB 代币并在团队中共享。我认为完美的工作流程。
2.  您可以在属性文件中外部化 FB 令牌（根据您的编程语言/框架），在 git 中忽略它，并允许每个开发人员拥有自己的（但是，这会破坏应用程序内部的许多逻辑，而不是说需要配置环境所有团队成员）。

另外，请注意，如果您在 git 中拥有过一次个人令牌，它将**永远**存储。在与他人共享之前，您可能需要清理您的存储库。

# java - 无法让 Java 闪存策略服务器正常工作

> ID：14950103
> 
> 赞同：0
> 
> 时间：2013-02-19T04:56:44.110
> 
> 标签：java, file, policy

我正在尝试为 Flash 创建一个游戏服务器，但我一直在尝试将策略文件从我的 Java 服务器发送到 Flash 游戏。

服务器收到消息

```
<policy-file-request/>\0 
```

同样，但是将 xml 返回到游戏中是行不通的。

这是我在获取和返回消息时的游戏服务器代码

```
 if (message.equals("<policy-file-request/>" + '\0')) {
        StringBuffer policyBuffer = new StringBuffer();
        policyBuffer.append("<?xml version=\"1.0\"?><cross-domain-policy>");
        policyBuffer.append("<allow-access-from domain=\"*\" to-ports=\"*\" />");
        policyBuffer.append("</cross-domain-policy>");
        String returnPolicy = policyBuffer.toString() + '\0';
        //byte[] returnPolicyBytes = returnPolicy.getBytes();
        System.out.println("Returning cross-domain-policy...\n" + returnPolicy);
        //packet.socket.getOutputStream().write(returnPolicyBytes, 0, returnPolicyBytes.length);
        //packet.socket.getOutputStream().flush();
        packet.out.println(returnPolicy);
        packet.out.flush();
        return;
    } 
```

**“packet”是我的套接字客户端包装对象，它具有“out”字段，它是“PrintWritter”类的对象**

我不知道为什么我的 Flash 游戏收不到 xml 消息（总是超时），我可以增加更多时间来请求策略文件吗？我可以创建新的策略服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:57:24.477

问题解决了，我必须创建新的策略服务器并监听端口 843，而不是使用游戏服务器来响应策略消息。

# python - 在一个 TastyPie API 请求中发布多个对象

> ID：14950106
> 
> 赞同：3
> 
> 时间：2013-02-19T04:57:06.263
> 
> 标签：python, django, tastypie, restful-url

如果可能的话，我想在一个帖子请求中创建多个相关对象。我有一个包含多个游戏的应用程序，我想将每个游戏的应用程序活动发布到数据库中。

模型中的每个活动对象都有一个游戏对象作为外键，所以我需要先创建游戏，然后才能创建活动对象。

```
{
     "game": {
         "name":"monte",
         "app":"/api/v1/app/1/"
      },

     "activity":{
         "type":"eggs",
         "score":"0.90",
         "game":"_INSERT_MONTE_RESOURCE_URI_HERE_"
      },

     "activity":{
         "type":"spam",
         "score":"1.00",
         "game":"_INSERT_MONTE_RESOURCE_URI_HERE_"
      }
} 
```

有没有一种简单的方法可以做到这一点，还是我需要从我的应用程序发出 3 个帖子请求？一个用于创建游戏，然后一个用于每个活动？

我以为 PATCH 可能会起作用，但后来我意识到，当我发送补丁请求时，我不知道分配给每个活动的游戏资源 URI。我想我可以在一个请求中创建游戏，然后在补丁请求中创建活动，我只是希望可以在一批中完成所有操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T07:28:36.667

为接受相关对象创建的字段使用相关名称

[http://django-tastypie.readthedocs.org/en/v0.10.0/fields.html#tastypie.fields.RelatedField.related_name](http://django-tastypie.readthedocs.org/en/v0.10.0/fields.html#tastypie.fields.RelatedField.related_name)

RelatedField.related_name

用于帮助在创建数据时自动填充反向关系。默认为无。

为了使此选项正常工作，其他资源上必须有一个字段，并将其作为属性/实例名称。通常这只是意味着添加一个反射 ToOneField 指向回来。

例子：

```
class EntryResource(ModelResource): authors = fields.ToManyField('path.to.api.resources.AuthorResource', 'author_set', related_name='entry')

    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry'

class AuthorResource(ModelResource):
    entry = fields.ToOneField(EntryResource, 'entry')

class Meta:
    queryset = Author.objects.all()
    resource_name = 'author' 
```

使用related_name 完成任务。它映射相关字段的对象并在创建数据时自动填充关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T15:11:17.370

[请参阅标题为批量操作](http://django-tastypie.readthedocs.org/en/latest/interacting.html#bulk-operations)的文档部分。它始于：

> 作为一种优化，可以通过向列表端点发送 PATCH 来在单个请求中对集合进行许多创建、更新和删除。

这是他们的例子：

```
curl --dump-header - -H "Content-Type: application/json" -X PATCH --data '{"objects": [{"body": "Surprise! Another post!.", "pub_date": "2012-02-16T00:46:38", "slug": "yet-another-post", "title": "Yet Another Post"}], "deleted_objects": ["http://localhost:8000/api/v1/entry/4/"]}'  http://localhost:8000/api/v1/entry/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:36:14.780

您可以为活动创建资源并使用字段。ToManyField： [https ://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships](https://django-tastypie.readthedocs.org/en/latest/resources.html#reverse-relationships)

这会将 url 添加到活动资源。要为活动完全内联数据，只需将 (full=True, full_list=True) 作为参数传递给 ToManyField： [https ://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.full_list](https://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.full_list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T12:45:06.057

如果游戏资源如下所示：

```
class GameResource(ModelResource):
    activities = fields.ToManyField(ActivityResource, 'activities', full=True) 
```

按照美味派文档中的说明：

> Tastypie 鼓励“往返”数据，这意味着您可以获取的数据应该能够通过 POST/PUT 重新创建相同的对象。如果您对应该发送什么有疑问，请在另一个对象上执行 GET 并查看 Tastypie 认为它应该是什么样子。

您将能够在一批中创建所有内容。

# java - 设计数据结构以在键组合上选择值

> ID：14950111
> 
> 赞同：0
> 
> 时间：2013-02-19T04:57:24.517
> 
> 标签：java, data-structures, combinations

我有一个问题，我分析并概括到这个级别，我需要解决这个问题以提高性能

我从数据库中收集了大量项目，如 1_A_B、2_A、2_B、2_A_C、1_C、1_B、2_B_C 等等。

现在当用户拿起**A**时（他只能拿起字母，基于该数值应该返回），他需要得到**2**，因为 2_A 存在，这意味着选择 A 时可以显示 2

如果用户拿起**B**，他将获得**2,1**，如果他拿起 B_C ，他将只获得**2**

输入顺序是随机的。那么我应该如何设计或设计哪种数据结构以获得最佳性能以保持最佳内存使用

我想用`Map<Alphabets,List<Numerics>>`字母组合来显示数字并不是一件容易的事[B_C 和 C_B 应该返回相同的结果，并且会有很多字母组合]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:23:11.430

我不知道这是否能很好地解决您的问题，但如果您的字母相当有限，我会解析每个字母并将其转换为 2 的幂。

例如，我分配

```
A = 1 (2^0)
B = 2 (2^1)
C = 4 (2^2)
D = 8 (2^3) 
```

.. 等等。

然后，我会用它`HashMap<Integer, List<Integer>>`来存储数据。在 HashMap 中，key 是 Alphabet 的数值之和，value 变成了作为数据前缀的数字列表。

例如，给定`1_A_B, 2_A, 2_B, 2_A_C, 1_C, 1_B, 2_B_C`，

1_A_B 将存储在 map[3, {1}] 下，2_A 将存储在 map[1, {2}] 下，依此类推。因此，给定数据集的地图看起来像

```
3, {1} //1_A_B
1, {2} //2_A
2, {2, 1} //2_B , 1_B
5, {2} //2_A_C
4, {1} //1_C
6, {2} //2_B_C 
```

当输入 B_C 时，您可以简单地查找值为 6 (B+C) 的键，从而返回 2 作为答案。

上述方法也适用于处理 B_C 和 C_B 的情况，因为 B_C 和 C_B 的总和相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:06:10.473

我会用一个

```
HashMap<String,Integer> 
```

，对于稀疏数据更好。在输入字符串之前，对其进行解析排序。这样 B_C 和 C_B 将被认为是相同的。
当您检查是否存在时，还要在检查之前进行解析和排序。

编辑：对于每个输入，您在哈希表中存储 1 个元素。例如：应输入3_C_A，拆分排序后为

```
<"AC",3> 
```

要检查是否存在，例如“C”，您需要搜索哈希映射的键。

```
Pseudo-code
Foreach(key in hash.keys) {
    Print hash(key) if x found in key
} 
```

内存使用：O(n)
搜索性能：O(n)

# android - 这个谷歌应用引擎/安卓教程是否已弃用？

> ID：14950112
> 
> 赞同：3
> 
> 时间：2013-02-19T04:57:24.790
> 
> 标签：android, google-app-engine, deprecated

[这个谷歌应用引擎/安卓教程](https://developers.google.com/eclipse/docs/appengine_connected_android)是否已弃用？

我一直在努力，刚刚意识到`C2DM`已经被`GCM`. 该教程是否仍然相关且有用（最近已更新）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:17:22.060

那看起来很老了。该功能似乎已被 Google Cloud Endpoints 取代。

[https://developers.google.com/appengine/docs/java/endpoints/overview](https://developers.google.com/appengine/docs/java/endpoints/overview)

请注意，Endpoints 仍处于试验阶段。

# php - 声明多维数组 | array() 作为语言结构

> ID：14950121
> 
> 赞同：0
> 
> 时间：2013-02-19T04:58:03.613
> 
> 标签：php, arrays

为什么这行不通？

[http://codepad.org/5Eic7Pq0](http://codepad.org/5Eic7Pq0)

正在努力学习php。

从 iphone 记事本 => 键盘发布。

* * *

编辑：

[http://codepad.org/DOIAYMb7](http://codepad.org/DOIAYMb7)

更新： • 删除空格 • 替换 html 换行符 w/\n 根据键盘 • 添加代码以识别新品牌 • 分开的品牌和型号——看起来更好

下一步是实现一个表。

*抱歉没有直接发布代码朋友*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:12:16.940

在您的原始代码中，您的垃圾字符会打乱 PHP 对代码的解析：

```
<?php
$cars = array(
Â Â  array(
Â Â  "make" => "toyota",
Â Â  "model" => "corolla",
Â Â  "size" => "compact"
Â Â  ), 
```

我刚刚从粘贴中下载了你的原始代码，并用一个简单的文本编辑器打开它。其他人可以随意使用更高级的编辑器打开它，以说明实际上存在哪些垃圾字符但未显示在键盘输出中。但这就是键盘在第 3 行报告错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:03:15.033

错误是您`=`在某些地方需要`=>`. 第 34 和 35 行

```
"make" = "nissan",
"model" = "maxima", 
```

应该是这样的：

```
"make" => "nissan",
"model" => "maxima", 
```

这是我得到的真实信息：

```
PHP Parse error:  syntax error, unexpected '=', expecting ')' in php shell code on line 33 
```

此外，当您引用字符串索引时，您需要使用引号来标识字符串文字，因此：

```
$cars[$i][make] 
```

应该是这样的：

```
$cars[$i]['make'] 
```

这只是一个警告，但最好避免:-)

# c - C访问多维数组

> ID：14950123
> 
> 赞同：1
> 
> 时间：2013-02-19T04:58:17.677
> 
> 标签：c, arrays, pointers, multidimensional-array

尝试此操作时出现下标编译器错误：

```
int **arrays;
// allocate and initialize it....
int pos1 = 0;
int pos2 = 1;
int value = (*arrays[pos1])[pos2]; 
```

如果括号中的部分取消对`int*`指针的引用，为什么数组访问不合法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:02:33.647

括号中的部分是`int`. 首先，`arrays[pos1]`产生一个指针 ( `int*`)，然后您已取消引用（通过前缀`*`运算符）。因此，`(*arrays[pos1])`是一个简单的`int`，而不是一个指针。

如果您的目标只是访问多维数组中的位置，请忘记`*`并使用：

```
arrays[pos1][pos2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:05:00.223

问题出在下面一行：

```
int value = (*arrays[pos1])[pos2]; 
```

你有一个`int **`，`arrays[pos1]`使它成为一个`int *`，你通过做进一步取消引用`*arrays[pos1]`，所以当你这样做时`(*arrays[pos1])[pos2]`，`(*arrays[pos1])`是一个`int`而不是`int*`导致错误。

你可以做

```
int value = arrays[pos1][pos2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T00:33:51.223

一种放置值（梯度）然后跟踪总和线的方法。要使数组正常运行，是带括号的真正练习。也许是等级有序的。的存在

带有结构符号 { } 的 FOR 循环，包含数学结果符号 [ ][ ]。生成数组 Display 的是 FOR 循环！

利润相对较小，以获得体面的设置或完全胡言乱语。目标是将信息存储在二维数组中。将新信息放在那里，稍后再访问该信息槽。我想找点乐子，看看逻辑野兽是如何反应的。据说在1000小时的训练范围内，你应该对它有感觉:)

```
 #include <stdio.h>
   int main()
   //2D_Array. Multilist. Sumline and Total Sum .
   //Select each coordinate by pressing ENTER after each number .
   //KHO2016.no7\. mingw (TDM-GCC-32) . c-ansi .
   {
   //declare, valuate
   int a,b,c=1,d=1,i,j,k,l,sum0=0;
   int ar_a[20][20];

   //calculate
   jump0:
   for (l=0;l<1;l++)                // vary the value l<1 - l<10
   {printf ("M.M.M Shelf %d\n",l); // SHELF2
   for (k=0;k<1;k++)              // SHELF1
   {printf ("SumLine%d = %d\n",k,sum0);
   {for (i=1;i<6;i++)           // COLUMS .
   for (j=0;j<1;j++)           // LINES . per COLUM 
   {ar_a[i][j]=d*c++;         // put value into 2D_array indevidual result slot.
   sum0=sum0+(ar_a[i][j]);
   printf ("%d%d(%.2d*%.2d=%.3d)\t",i,j,d,c-1,ar_a[i][j]);}}}}

   printf ("TOTAL SUM = %d . Select 2 coordinates [1-5] enter, [0] enter: \n",sum0);
   scanf ("%d%d",&a,&b);
   printf ("You selected : %d and %d . Result value = %d\n",a,b,ar_a[a][b]);
   goto jump0;

   //terminate
   return 0;
   } 
```

# php - 在 PHP 中上传 .csv 文件的问题

> ID：14950124
> 
> 赞同：0
> 
> 时间：2013-02-19T04:58:19.940
> 
> 标签：php, email, file-upload, csv

嘿伙计们，我有一个可以上传 .csv 文件的功能。现在发生的事情是，公司会来上传一个包含数千名员工的 csv 文件。现在我有一个问题。我不断得到：

PCI 内部错误、最大执行时间和上传的文件。

我把这个带到我们的提供商 Winhost 那里，他们把它提高到 600 秒 - 10 分钟。现在埃文在这样做之后我仍然遇到麻烦。相同的超时消息和所有内容。所以我不知道它是否没有被踢出去或者发生了什么，但我真的需要一些帮助。

代码：

```
session_start();
if(!isset($_SESSION['myusername'])){
header("location:/PCG/mainlogin.php");
}
require_once "Mail.php";
$hostname="";
$username="";
$password="";
$database="";

if (!empty($_POST['name'])){
$member = $_POST['name'];
$memval = 1;
}
function returnBack(){

    header("Location:PCG/csvuploaderform.php?seterror=1");
    exit;

}
function returnBackfile(){

    header("Location:PCG/csvuploaderform.php?seterror=2");
    exit;

}

if (isset($_POST['submit'])){

    /*******************************CHECK TO MAKE SURE FORM IS PROPERLY FILLED AND GET NAME OF COLUMNS IN CSV FILE *********************************************************/

    if (!empty($_FILES['file']['error'] ) )
    {

        echo "file";
        $seterror =1;
        returnBack();

    } 
    if (empty($_POST['firstname'])){

        $seterror =1;
        returnBack();
    }
    if (empty($_POST['lastname'])){
        $seterrro =1;

        returnBack();
    }
    if (empty($_POST['email'])){
        $seterror =1;

        returnBack();
    }
    if (empty($_POST['phone'])){
        $seterror =1;
        returnBack();
    }
    if ($seterror != 1){

    $file = $_FILES['file']['tmp_name'];    

    $handle = fopen($file , "r");

    $fileop = fgetcsv($handle,1000,",");

    $fileop=array_map("strtoupper",array_map("trim",$fileop));

    $firstname_index = array_search(strtoupper($_POST["firstname"]),$fileop);
    if ($firstname_index===false){
        returnBack();
    }
    $lastname_index = array_search(strtoupper($_POST['lastname']),$fileop);
    if ($lastname_index===false){

        returnBack();
    }
    $email_index = array_search(strtoupper($_POST['email']),$fileop);
    if ($email_index===false){

        returnBack();
    }
    $phone_index = array_search(strtoupper($_POST['phone']),$fileop);
    if ($phone_index===false){

        returnBack();
    }
    $date = date("Y-m-d");  
    /***********************ASSIGN COLUMN VALUES TO ACCORDING VARIABLES AND INSERT THEM INTO CSV TABLE IN DB *************************************/
    try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

    }  
    catch(PDOException $e) { 
        echo "I'm sorry, I'm afraid I can't do that.";  
        file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
    }
    /*$fileop = fgetcsv($handle,1000,",")*/
    if ($memval != 1){
    $memberview = $_SESSION['myusername'];
    }
    else{
        $sql ="SELECT username FROM members WHERE companyname =:companyname";
    $sth=$DBH->prepare($sql);
    $sth->execute(array(':companyname' => $member));

    while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        $check = $row;
    $memberview = $check['username'];
    }
    }
    $j = 0;
    while (($fileop=fgetcsv($handle)) !== false)
    {

        $fileop=array_map("trim",$fileop);

        $firstname[$j] = $fileop[$firstname_index];
        if (empty($firstname[$j])){ 
        returnBackfile();

        }

        $lastname[$j] = $fileop[$lastname_index];
            if (empty($lastname[$j])){
        returnBackfile();

        }
        $email[$j] = $fileop[$email_index];
            if (empty($email[$j])){

        returnBackfile();

        }
        $phone[$j] = $fileop[$phone_index];
            if (empty($phone[$j])){

        returnBackfile();   

        }
        $csvusername[$j] = $firstname[$j] . $lastname[$j];

        $csvpasswordname[$j] = $lastname[$j] . $firstname[$j];

        $status = "Open";

        $sql ="SELECT username FROM csvdata WHERE username =:csvusername";
        $sth=$DBH->prepare($sql);
        $sth->execute(array(':csvusername' => $csvusername[$j]));

        while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        $csvusername[$j] = $firstname[$j] . $lastname[$j] . rand(1,20);

        }

        $sql ="SELECT password FROM csvdata WHERE password =:csvpasswordname";
        $sth=$DBH->prepare($sql);
        $sth->execute(array(':csvpasswordname' => $csvpasswordname[$j]));

        while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        $csvpasswordname[$j] = $lastname[$j] . $firstname[$j] . rand(1,20);

        }

        $j++;
    }

        for($i =0; $i<$j; $i++){

        $sth = $DBH->prepare("INSERT INTO csvdata (firstname, lastname, email, phone, username, password, status, memberview, statuschangedate) VALUES (?,?,?,?,?,?,?,?,?)"); 
        $sth->execute(array($firstname[$i], $lastname[$i], $email[$i], $phone[$i], $csvusername[$i], $csvpasswordname[$i], $status, $memberview, $date));

        $from = "email.com";  
    $to = $email[$i]; 
    $subject = ""; 
    $body = "message.....";
$host = ""; 
$username = ""; 
$password = ""; 
$headers = array ('From' => $from, 
  'To' => $to, 
  'Subject' => $subject); 
    $smtp = Mail::factory('smtp', 
  array ('host' => $host, 
  'auth' => true, 
  'username' => $username, 
  'password' => $password)); 
    //$mail = $smtp->send($to, $headers, $body); 

    }

    $email = "";
    $from = "";  
    $to = $email; 
    $subject = ""; 
    $body = ",

";
    $host = ""; 
$username = ""; 
$password = ""; 
$headers = array ('From' => $from, 
  'To' => $to, 
  'Subject' => $subject); 
$smtp = Mail::factory('smtp', 
  array ('host' => $host, 
  'auth' => true, 
  'username' => $username, 
  'password' => $password)); 
//$mail = $smtp->send($to, $headers, $body);
 header("Location:PCG/memberinterface.php?getmsg=11");
 exit;
    }
}
    $DBH = null; 
```

因此，如果您有任何发现错误的地方，请告诉我！出了点问题，我需要弄清楚！

大卫，

谢谢！

更新：

好的，伙计们在查看并停止发送电子邮件功能后，我注意到它的运行速度非常快。那么如何加快这封电子邮件的发送速度或防止它让页面运行这么长时间呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:23:13.987

检查你的 php.ini

设置以下

```
max_execution_time = 300
upload_max_filesize = 1024M 
```

# python - 用于删除收入归因列中收入为零的关键字数据行的 Python 循环

> ID：14950126
> 
> 赞同：0
> 
> 时间：2013-02-19T04:58:31.160
> 
> 标签：python

我使用了一个类似的循环来删除重复项并尝试对其进行一些更改，以删除“lastClickRevenue”列中包含“0”值的整行。

代码执行时不会出现任何错误，但它并没有像我希望的那样删除行。任何帮助将非常感激。

```
 for i in range(len(lastClickRevenue)):
        if lastClickRevenue[i] == "0":                        
            currentRevenueKeywords.pop(i)                           
            sessions.pop(i)                                         
            sales.pop(i)                                            
            lastClickRevenue.pop(i)                                 
            firstClickRevenue.pop(i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:07:57.683

迭代容器并同时修改它总是一个坏主意。

最好用这样的列表理解来编写它：

```
lastClickRevenue = [x for x in lastClickRevenue if x != 0] 
```

处理其他的：

```
currentRevenueKeywords = [x for x,y in zip(currentRevenueKeywords, lastClickRevenue) if y != 0]
sessions = [x for x,y in zip(sessions, lastClickRevenue) if y != 0]
sales = [x for x,y in zip(sales, lastClickRevenue) if y != 0]
firstClickRevenue = [x for x,y in zip(sales, lastClickRevenue) if y != 0]
lastClickRevenue = [x for x in lastClickRevenue if x != 0] 
```

或者，您可以一键完成所有操作，使其更加[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)：

```
currentRevenueKeywords, sessions, sales, firstClickRevenue, lastClickRevenue = zip(*[(a,b,c,d,x) for (a,b,c,d,x) in zip(currentRevenueKeywords, sessions, sales, firstClickRevenue, lastClickRevenue) if x != 0]) 
```

我应该提一下：看起来您可以从以某种表格格式或字典而不是一堆列表存储数据中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:02:21.010

我猜你的数组中存储的值是实际的数字而不是字符串。尝试更改代码以检查数字 0 而不是字符串“0”。

我还建议查看过滤器功能，以仅保留满足特定条件的值。

```
for i in range(len(lastClickRevenue)):
    if lastClickRevenue[i] == 0:                        
        currentRevenueKeywords.pop(i)                           
        sessions.pop(i)                                         
        sales.pop(i)                                            
        lastClickRevenue.pop(i)                                 
        firstClickRevenue.pop(i) 
```

# makefile - 为什么要打印出回声线？

> ID：14950128
> 
> 赞同：1
> 
> 时间：2013-02-19T04:58:38.887
> 
> 标签：makefile, echo

我正在阅读有关 Makefile 并尝试用它做一些事情。但我注意到它会打印带有相关消息的 echo 命令！（见输出）

这是我的工作：

```
all:    main

main:   f1.o f2.o main.o
        echo "Linking f1.o f2.o and main.o";
        $(CPP) -o $@ main.o f1.o f2.o

main.o: main.cpp
        echo "Compiling main.cpp";
        $(CPP) -c main.cpp -o $@

f1.o:   f1.cpp
        echo "Compiling f1.cpp";
        $(CPP) -c f1.cpp -o $@

f2.o:   f2.cpp
        echo "Compiling f2.cpp";
        $(CPP) -c f2.cpp -o $@ 
```

这是输出：

```
[mih1406@mih1406-ArchLinux 4]$ make
echo "Compiling f1.cpp";
Compiling f1.cpp
g++ -c f1.cpp -o f1.o
echo "Compiling f2.cpp";
Compiling f2.cpp
g++ -c f2.cpp -o f2.o
echo "Compiling main.cpp";
Compiling main.cpp
g++ -c main.cpp -o main.o
echo "Linking f1.o f2.o and main.o";
Linking f1.o f2.o and main.o
g++ -o main main.o f1.o f2.o 
```

请注意，它会打印两条消息：

> echo "正在编译 f1.cpp";
> 
> 编译 f1.cpp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:06:23.073

默认情况下，`make`回显它即将启动的所有命令。您可以通过以 开头的相应行来抑制一个命令`@`，例如

```
main:   f1.o f2.o main.o
    @echo "Linking f1.o f2.o and main.o";
    $(CPP) -o $@ main.o f1.o f2.o 
```

有关更多信息，请参阅[https://www.gnu.org/software/make/manual/html_node/Echoing.html#Echoing](https://www.gnu.org/software/make/manual/html_node/Echoing.html#Echoing)。

# asp.net-mvc - 尝试将 jquery 日期发布到控制器时出现内部服务器错误

> ID：14950131
> 
> 赞同：0
> 
> 时间：2013-02-19T04:58:52.883
> 
> 标签：asp.net-mvc, jquery-ui-datepicker

我刚刚开始使用 asp.net mvc3。我有一个 jquery 日期选择器，我想传递值并在我的控制器中调用更新方法并选择日期。所以在我的 details.cshtml 视图中，我有这个：

```
$(document).ready(function () {
        $('#ImplementationStart').datepicker({
            onSelect: function (date) {
                $.ajax({
                    url: '/request/update/',
                    type: 'POST',
                    data: {
                        Date: date
                    },
                    contentType: 'application/json; charset=utf-8',
                       success: function (date) {
                        alert(date);
                    },
                    error: function(xhr, textStatus, error){
                    console.log(xhr.statusText);
                    console.log(textStatus);
                    console.log(error);
                    }                           
                });
            }
        });
    }); 
```

在我的 RequestController 中，我有以下代码：

```
public ActionResult Update(Request request)
    {
        Console.WriteLine("hi");

        return View();
    } 
```

它目前没有做任何事情，但它没有达到这种方法，我想知道我做错了什么。当我在 IE9 上查看控制台时，它只是说，

```
LOG: Internal Server Error 
LOG: error 
LOG: Internal Server Error 
```

关于我做错了什么有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:02:34.380

您使用名称 Date 和 type 发布到控制器变量`DateTime`，但您的控制器采用 type 变量`Request`。动作方法的 Chenge 签名：

```
public ActionResult Update(DateTime date)
{...} 
```

它会起作用。

# c++ - Eclipse CDT/GDB 错误：未定义的维护集命令：“python print-stack off”。试试“帮助维护集”

> ID：14950138
> 
> 赞同：3
> 
> 时间：2013-02-19T04:59:47.367
> 
> 标签：c++, eclipse, macos, eclipse-cdt

我在 Mac 10.6.8 (Snow Leopard) 上运行 Eclipse 3.7、CDT 6.0

我真的很想漂亮地打印矢量！

我构建了 gdb-7.5（配置为“x86_64-apple-darwin10.8.0”。）我 [使用 pythonPrettyPrinter](http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F)

我更改了默认的 GDB 命令，更改了 .gdbinit 位置并尝试运行

但是现在 Eclipse CDT 给出了这个错误：

```
Error in final launch sequence Failed to execute MI command:
 maintenance set python print-stack off Error message from debugger back end: 
Undefined maintenance set command: "python print-stack off". Try "help maintenance set". 
Undefined maintenance set command: "python print-stack off".  Try "help maintenance set". 
```

此处跟踪此错误[：](https://bugs.eclipse.org/bugs/show_bug.cgi?id=367788) 但似乎最新的 CDT 不会有此修复，因为更新日期是 CDT-head 发布之后。

我的问题是，有人对我正在尝试的东西有任何运气吗？

我的问题是否有已知的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-26T00:44:12.607

正如 infinity 上面发布的链接所述，只需将 Process Launcher 更改为“Standard Create Process Launcher”即可！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-30T11:40:19.540

此链接提供了一个更简单的解决方案：

[http://blog.sina.com.cn/s/blog_4b2169480101elvx.html](http://blog.sina.com.cn/s/blog_4b2169480101elvx.html)

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T06:03:16.183

再经过三个步骤就可以工作了

1.  将 CDT 更新到 8.1.1 [http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR1/eclipse-cpp-juno-SR1-macosx-cocoa-x86_64 .tar.gz](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR1/eclipse-cpp-juno-SR1-macosx-cocoa-x86_64.tar.gz)

2.  创建了一个名为 gdb-cert 的证书

3.  签署 GDB [http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)

# embedded - Keil RealView uvision MDK IDE 中的库重定向文件和低级 I/O 例程

> ID：14950141
> 
> 赞同：0
> 
> 时间：2013-02-19T05:00:05.993
> 
> 标签：embedded, microcontroller, keil

我刚开始在 Keil uvision IDE 中编程。我正在阅读有关[Library Target Files](http://www.keil.com/support/man/docs/gsac/gsac_retargetcortex.htm)和[Low Level I/O Routines](http://www.keil.com/support/man/docs/gsac/gsac_lowlevelroutinescortex.htm)的官方 Keil 文档。似乎我需要为我的设备实现这两个功能。但是，我不知道如何开始。谁能指出我正确的地方？

我可能正在寻找一个懒惰的借口，但我想应该有流行设备的通用实现文件，开发人员不应该再次编写它们？如果我是对的，我在哪里可以找到这些文件？我正在使用飞思卡尔 MKL05Z32VFM4，一个 ARM Cortex M0+ 设备，如果有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:51:34.433

如果您要调用低级 IO 例程，您只需要实现这些。

通常，只需要提供 的实现即可`putc`（允许通过 调试`printf`），而对于典型的深度嵌入式系统（例如通常使用的处理器）则不需要其余的低级基础设施。

实现`putc`（在最简单的情况下）只是将字符复制到串行端口外围设备中的适当寄存器的问题。更复杂的解决方案可以包括基于中断驱动的 FIFO 传输。

# windows-7 - 如何设置我的 Windows 7 以使用键盘布局#JCUKEN（拉丁文）

> ID：14950143
> 
> 赞同：1
> 
> 时间：2013-02-19T05:00:15.813
> 
> 标签：windows-7, keyboard

这是一个编程问题，如果有办法从网站中的代码中做到这一点......我访问了一个网站，当我在他们的页面上时，我的键盘起作用了，所以当我按下一个键时，键盘的 Cryllic 字母上面定义的布局出现在他们网站的文本区域中，所以我知道至少在这种情况下是可能的。

例如：[这个网站可以解决问题](http://gate2home.com/Russian-Keyboard)

但是如何设置我的机器来使用它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:08:40.750

尝试转到控制面板 -> 时钟、语言和区域 -> 更改键盘或其他输入法 -> 更改键盘... -> 常规选项卡 -> 添加... -> 选择您要使用的键盘类型。

如果它不在那里，那么你可能不走运。我查了一下，发现是俄罗斯的。我检查了 Windows 键盘列表中的俄语选项卡，但它似乎不存在。仍然检查一下，因为我对它一无所知，也许它只是使用了不同的名称。

# ios - WebView 忽略后续页面上的缓存策略

> ID：14950144
> 
> 赞同：0
> 
> 时间：2013-02-19T05:00:18.527
> 
> 标签：ios, caching, webview, policy

我注意到在我的 webView 中，我在发出请求时设置了缓存策略，在 viewDidLoad 中，

```
NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10]; 
```

缓存将仅在第一次运行时，当我单击网页中的另一个按钮继续执行后续页面时，webView 会忽略缓存策略，使其仅在网页的第一页上加载速度更快。后续页面加载非常缓慢。

我该如何解决这个问题：使所有后续页面的加载速度与 webView 中第一个加载的页面一样快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:45:16.633

嗯，我想我现在已经找到了解决方案并回答了我自己的问题。好像可以放

```
NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:120]; ] 
```

在 webView 的委托内

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

如果 navigationType 等于`UIWebViewNavigationTypeLinkClicked`，则使用允许我设置缓存策略的方法发出新请求。

# java - 是否可以带取景器的 nvd3 多条图表？

> ID：14950145
> 
> 赞同：1
> 
> 时间：2013-02-19T05:00:43.063
> 
> 标签：java, javascript, html, nvd3.js

目前在我的项目中，我想包含图表功能，如条形图、折线图等。我现在正在使用 nvd3 图表库，但问题是我想要带有取景器的多条形图表。多条形图就像这样[http://nvd3.org/ghpages/multiBar.html](http://nvd3.org/ghpages/multiBar.html)我希望多条形图像这样，底部有取景器[http://nvd3.org/ghpages/lineWithFocus.html](http://nvd3.org/ghpages/lineWithFocus.html) 我瞪大了眼睛4天，但没有得到任何东西可以有人可以帮助

# content-management-system - CMS 最重要的功能

> ID：14950146
> 
> 赞同：1
> 
> 时间：2013-02-19T05:00:46.737
> 
> 标签：content-management-system, feedback, feature-selection

假设有一个新的 CMS 出来了，你可以选择和评价那里的功能。选择其中的 5 个。第一名是最重要的，最后一名是不太重要的。

*   就地编辑（无管理面板）
*   全局内容版本控制（文章、博客条目、任何模块内容项等）
*   单页应用程序作为结果（不重新加载页面，纯 ajax/web-sockets）
*   易于扩展（控制反转，生产模块编译和安装）
*   非 IT 人员易于理解的简单概念
*   导入/导出所有站点数据（包括第 3 方模块）
*   任何数据库支持（MSSql、MySQL、PostgreSQL、SQL CE...）
*   简单的模板系统（无逻辑模板，例如[dust.js](http://linkedin.github.com/dustjs/)）
*   系统级 web-sockets 支持（服务、浏览器和服务器之间的数据传输、服务器的实时数据推送）
*   大量预建模块和功能
*   开源而不是付费（即使质量可能更低）
*   我宁愿为它付费（合理的金额），但让它没有错误、经过全面测试和全面支持
*   有能力购买 CMS 作为 SaaS

*   您必须添加的任何内容:)

非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:15:37.900

我想以不同的方式构建我的答案。

## 一定有

有些功能是必需的，无需讨论相关性（恕我直言）。像 DB-Support、版本控制和备份策略。

反映在你的

*   全局内容版本控制（文章、博客条目、任何模块内容项等）
*   任何数据库支持（MSSql、MySQL、PostgreSQL、SQL CE...）

## 维护

您应该考虑维护您的系统。使用哪种技术堆栈？你有能力维护它吗？你熟悉编程语言吗？如果出现故障或过载，您能否为您的系统获得专业帮助？

## 便于使用

它应该易于管理（设置、更新、备份）并且易于编辑使用它来创建内容。

这总结了你的观点：

*   非 IT 人员易于理解的简单概念
*   简单的模板系统（无逻辑模板，例如dust.js）
*   就地编辑（无管理面板）

## 易于扩展

添加功能、配置和自定义功能应该很简单。

这总结了你的观点：

*   易于扩展（控制反转，生产模块编译和安装）

我要补充：

*   一个强大的工作流组件，您可以在其中实现自己的工作流模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:36:13.110

一个非常重要但缺少的一点是 CMS 不仅应该是一个 Web CMS，还应该是一个通用的（ECMS 或企业内容管理系统）——我可以在其中定义自己的内容类型及其关系.

在我看来，多数据库引擎支持无关紧要，只要它支持对技术堆栈有意义的知名且维护的数据库引擎即可。

对我来说，以下几点非常重要：

*   **高性能**——不仅是性能，而且有据可查的方法将产品与其他 CMS 进行基准测试非常重要。
*   **REST API** - 现在你无法负担构建一个没有以某种方式与外部组件交互的能力的系统，而 REST API 是解决这个问题的一种非常优雅的方式。它也很有用，因为您可以从浏览器中的客户端脚本调用它。
*   **可定制的 UI 框架**（或者，换句话说，完全可替换）——使用 CMS 的开发人员应该能够完全替换默认 UI 并推出自己的 UI，或者甚至可以将自己的 UI 与内置选项结合起来。
*   **明确定义的可扩展点**——软件的每一层都应该可以通过有据可查的方式进行定制，以扩展默认功能。
*   **解耦设计——CMS**的下层（通常称为内容存储库）本身应该是一个可用的产品，这意味着它应该与其他应用程序和自定义用户界面一起使用。

这是一篇关于解耦内容管理以及为什么该方法很重要的好文章：http: [//bergie.iki.fi/blog/decoupling_content_management/](http://bergie.iki.fi/blog/decoupling_content_management/)

为了进一步阅读，我还推荐Bob Boiko的《*内容管理圣经》一书。*

# jquery - Jquery滑块句柄应该脉冲颜色

> ID：14950154
> 
> 赞同：0
> 
> 时间：2013-02-19T05:01:45.970
> 
> 标签：jquery, jquery-ui, slider

我正在尝试查看是否可以使 jquery 滑块句柄更加突出。

[http://jsfiddle.net/QAuNY/](http://jsfiddle.net/QAuNY/)

所以我尝试使用前面的代码，只是我不确定`flashing`事件是否会发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:06:19.277

这是一个执行“脉动”的jsfiddle。 [链接到 jsfiddle](http://jsfiddle.net/martyk/CgSjL/3/)

```
$(function () {
    $("#secrets-slider").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 70,
        slide: function (event, ui) {
            $("#amount").val(ui.value);
        }
    });
    function flashing() {
        if (flash === 0) {
            $("#secrets-slider .ui-slider-range").stop(true, true);
        } else {
            $("#secrets-slider").animate(
                {
                    backgroundColor: '#ff8c00'
                }, 500,
                function() {
                    $("#secrets-slider").animate(
                        {
                            backgroundColor: '#f00'
                        }, 500
                    )
                }                                         
            )
            setTimeout(flashing,1000);
        }
    }
    flashing();
}); 
```

由于 jQueryUI 使用背景图像来绘制滑块，滑块的某些部分仍然是灰色的 - 但它们可以通过您的 css 主题进行控制。

# mysql - JDBC SQL server 联机无法连接

> ID：14950156
> 
> 赞同：0
> 
> 时间：2013-02-19T05:01:47.273
> 
> 标签：mysql, sql-server, servlets, jdbc, web-hosting

我正在使用 servlet 尝试连接到我网站上的 mysql 数据库，但它总是说它超时并且存在通信链接故障。

```
final String DB_URL = "jdbc:mysql://blah.org/blah_DbName";
conn = DriverManager.getConnection(DB_URL, USER, PASS); 
```

这就是我用来连接的，但它不起作用。我的网址是否正确创建？另外，我不知道root密码，所以我在数据库中添加了一个用户，并使用该用户的用户名和密码进行连接，所以有没有办法获取root密码。

另外，有人说url中需要端口号，但是在哪里可以找到端口号呢？我的托管服务提供商是 hostmantis。

堆栈跟踪

```
Feb 19, 2013 12:15:11 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/servlettest] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Feb 19, 2013 12:15:11 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/servlettest] is still processing a request that has yet to finish. This is very likely to create a memory leak. You can control the time allowed for requests to finish by using the unloadDelay attribute of the standard Context implementation.
Feb 19, 2013 12:15:12 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/servlettest] is completed 
```

* * *

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:355)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2461)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:822)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at servlets.DatabaseAccess.doGet(DatabaseAccess.java:59)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:380)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:305)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:28:25.837

`Communications link failure`

它清楚地表明您在代理后面，或者您没有互联网连接。

`-httpProxyHost`如果您在代理后面，则使用 jvm 运行时参数配置代理

# magento - 促销规则在magento代码中的应用

> ID：14950159
> 
> 赞同：1
> 
> 时间：2013-02-19T05:01:52.577
> 
> 标签：magento

当我们创建一些促销或购物车规则时，我想在代码中准确地解析和应用规则。

我知道它在这里：Mage_SalesRule_Model_Rule 但无法完全弄清楚。

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:21:30.687

好吧，你可以从`Mage_SalesRule_Model_Validator`类方法开始`process`。
它处理每个购物车项目，并检查是否有任何购物车规则适用于它。很容易看到应用了哪些规则。
规则有`validate`方法。

```
/**
 * Validate rule conditions to determine if rule can run
 *
 * @param Varien_Object $object
 *
 * @return bool
 */
public function validate(Varien_Object $object)
{
    return $this->getConditions()->validate($object);
} 
```

`Mage_Rule_Model_Condition_Combine`此调用在类中启动递归条件解析。

这与`Condition`类层次结构一起运行（请参阅 Mage_SalesRule_Model_Rule_Condition_*）。
您也可以通过调用快速查看条件结构`$rule->getConditions()->asArray()`。

# shell - 用于自然（非字母数字）对文件列表进行排序的 Shell 脚本增加了困难

> ID：14950166
> 
> 赞同：1
> 
> 时间：2013-02-19T05:02:26.890
> 
> 标签：shell, sorting, awk

我有一个文件列表（从 管道传输`ls`）。理想情况下，我希望它看起来像这样：

```
THISPARTISALWAYSTHESAME200_1.JPG
THISPARTISALWAYSTHESAME200_2.JPG
THISPARTISALWAYSTHESAME200_3.JPG
[...]
THISPARTISALWAYSTHESAME200_9.JPG
THISPARTISALWAYSTHESAME200_9_1.JPG
THISPARTISALWAYSTHESAME200_9_2.JPG
[...]
THISPARTISALWAYSTHESAME200_9_10.JPG
THISPARTISALWAYSTHESAME200_9_11.JPG
[...]
THISPARTISALWAYSTHESAME200_9_47.JPG
THISPARTISALWAYSTHESAME200_9_48.JPG
THISPARTISALWAYSTHESAME200_9_49.JPG
THISPARTISALWAYSTHESAME200Map_001.JPG
THISPARTISALWAYSTHESAME200Map_002.JPG 
```

我正在将此列表传送到 ImageMagick`convert`函数中以将其转换为 PDF，因此最好按正确的顺序排列文件，如上所述。但是，`ls`没有自然排序，导致 1-10-11-12-2-20 乱七八糟；`ls -v`自然地对它们进行排序，但将 Maps 放在开头，并且我发现的各种`awk`功能`sort`无法处理 Map 位并造成更有趣的混乱。

我认为获取输出`ls -v`并使用 awk 将包含字符串 'map' 的每一行移动到末尾可能并不难，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:18:02.443

```
ls -v | awk '{ if($0!~/Map/) print $0; else later[NR]=$0; } END { for (i=1; i<=NR; i++) if ( i in later ) print later[i]; }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:00:09.373

你也可以通过两次调用`ls`和一些[glob/extended-glob 模式](http://mywiki.wooledge.org/BashGuide/Patterns)来做到这一点：

```
{ ls -v !(*Map*); ls -v *Map*; } | convert ... 
```

# wcf - 使用 WCF 将数据从 Windows Phone 7 发送到 Web 应用程序的服务器。我能够发送几个参数，但我怎么能发送 10 ,15 或 20 行数据

> ID：14950170
> 
> 赞同：0
> 
> 时间：2013-02-19T05:02:38.950
> 
> 标签：wcf, linq, windows-phone-7, windows-mobile

使用 WCF 将数据从 Windows Phone 7 发送到 Web 应用程序的服务器。我可以发送几个参数，但我怎样才能发送 10 ,15 或 20 行数据。

我已将数据保存在 WP7 的本地数据库中。我在那里有一个任务表。该表中可能有 10、15、20 或...行数据。我想使用我的 wcf 服务将这些数据行数发送到服务器。我能够将参数发送到服务器，就像我在 wcf 中有一个登录方法一样，该方法将电子邮件和密码作为参数返回布尔值 true 或 false。现在我需要通过 WCF 服务将这几行 10,15,20 或... 行数据发送到服务器并保存在服务器数据库中。我坚持将行数发送到 wcf 方法。我在列表对象中有任务数据。我已经调试并检查了数据的存在。

这是代码部分

```
using (dbContext context = new dbContext())
{                  
     IQueryable<tasks> taskStatQuery = from t in context.Tasks  select t;
     List<tasks> allTasksStatus = taskStatQuery.ToList();

     WcfFSMSer.Win7MobileServiceClient client = new WcfFSMSer.Win7MobileServiceClient();

     client.TestFunctionAsync(whatParamToSendForSendingFewRows);
     client.TestFunctionCompleted += new EventHandler<WcfFSMSer.TestFunctionCompletedEventArgs>(client_TestFunctionCompleted);

}

void client_TestFunctionCompleted(object sender, WcfFSMSer.TestFunctionCompletedEventArgs e)
{

} 
```

我能够在此变量 List allTask​​sStatus 中获取所有任务列表。当我添加参数时，它会给出红色下划线并说最好的重载有一些无效的参数。即列表中的任务类对于 wcf 是未知的。我也尝试在 WCF 中编写相同的类，但仍然没有用。如果我尝试通过参数将任何集合对象发送到该方法，它仍然会给我错误。试图发送数组也没有用。

如何将这些值从 WP7 发送到 WCF？

***有没有人有任何链接或示例，发送至少 2,3 行数据？***

如果需要任何其他信息来解决此问题，请告诉我

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:22:10.727

您可能想尝试增加 WCF 服务的 maxBufferSize 和 maxReceivedMessageSize。类似的问题在这里：[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/03603b20-8343-4ea6-80da-90a7cd3763bb/)或[StackOverflow 论坛](https://stackoverflow.com/questions/1874499/remove-size-limit-of-wcf-service-answers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:31:47.213

这不是很多时候调用方法的好方法。

更好的方法是我在 WCF 中使用其他方法来获取任务列表。像这样：

```
 public bool TestFunction(List<Task> list)
    {
      foreach(var task in list)
      {
         //put to the database
      }
    } 
```

现在您可以通过 WCF 客户端发送您的任务列表：

```
client.TestFunction(taskList); 
```

在这里您可以阅读有关数据类型的更多信息：[链接](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

# qt - 图像宽度和宽度步长，现在呢？

> ID：14950173
> 
> 赞同：0
> 
> 时间：2013-02-19T05:02:59.013
> 
> 标签：qt, opencv, iplimage, qbytearray

我有一个关于使用图像宽度和宽度步长的问题。

我将尺寸和图像数据作为 QByteArray。我也有宽度步。我的问题是如何使用 widthstep 正确填充 Ipl 图像，因为我的图像宽度是 4095，它不是 8 的整数倍。我已经成功填充了宽度为 8 整数倍的图像，但现在我被困住了手头的问题。任何使用 widthstep 填充 IplImage 的通用代码都将受到欢迎和高度赞赏。:D

这是我的开关盒中起作用的部分；8 图像宽度的默认整数倍：

```
default:
      {
          IplImage* extracted_sar_image; // our image declaration
          CvSize size; // size type has width and height attributes
          size.height = sar_nrows_integer; // height of size
          size.width = sar_ncols_integer;

          extracted_sar_image = cvCreateImageHeader(size, IPL_DEPTH_8U, 1);
          extracted_sar_image->imageData = sar_image_data_2.data();         

          cvNamedWindow("Image", CV_WINDOW_NORMAL );
          cvShowImage("Image", extracted_sar_image); 
          cvMoveWindow("Image", 100, 100);
          cvSaveImage("C:/Users/z_slant/Desktop/generated_extracted_sar_image.bmp", extracted_sar_image); 
          // delay to observe the image that is being saved
          cvWaitKey(10000); 
          // deallocates the image data
          cvReleaseImage(&extracted_sar_image); 
          // closes image display window
          cvDestroyWindow("Image"); 

      break;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:57:46.210

您必须考虑 openCV 结构中的字节对齐。

openCV IplImage 中的 1 行是 widthStep 字节长

QbyteArray 中的 1 行是宽度字节长

因此，逐行复制数据应该没问题。

```
qByteArray myArray;
IplImage* extracted_sar_image; // our image declaration
CvSize size; // size type has width and height attributes
size.height = sar_nrows_integer; // height of size
size.width = sar_ncols_integer;

extracted_sar_image = cvCreateImageHeader(size, IPL_DEPTH_8U, 1);

for (int row = 0 ; row < size.height ;row++)
{
    memcpy(&extracted_sar_image->imageData[row*extracted_sar_image->widthStep],&myArray.data()[row*size.width],size.width);
} 
```

# version-control - 为与其他项目具有公共共享文件的项目创建分支

> ID：14950181
> 
> 赞同：1
> 
> 时间：2013-02-19T05:03:43.617
> 
> 标签：version-control, mercurial, branch

我的团队即将尝试 Mercurial 及其分支功能（现在我们使用的是 Subversion，但它主要用作代码存储，而不是带有分支的完整版本控制系统等）。所以这里有一个问题：我正在开发一组 DLL，每个库实现都位于自己的文件夹中。我有一个地方（“Common”文件夹），其中包含这些库的接口单元以及其他队友的通用单元。

它看起来像这样：

```
    \资源  
        \我的图书馆1  
        \我的图书馆2  
        \我的图书馆3  
    \常见的  
        MyLibrary1_Intf.h  
        MyLibrary2_Intf.h  
        MyLibrary3_Intf.h  

```

当我想为 MyLibrary3 创建一个分支时，我应该怎么做？好的，我正在为 MyLibrary3 创建一个分支，但是 MyLibrary3_Intf.h 呢？我也应该为 \Common 创建一个分支吗？我应该提一下，假设每个项目（库）都位于自己的存储库中。以及通用文件。我不喜欢为所有源代码树创建一个存储库的想法，因为有很多库。问题是：你如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:29:12.980

也许您应该尝试子存储库：

[https://www.mercurial-scm.org/wiki/Subrepository](https://www.mercurial-scm.org/wiki/Subrepository)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:02:04.890

首先，你必须至少了解和理解Subversion 和 Mercurial 之间的*一些*根本区别（这与 CVCS 与 DVCS**无关）**

*   如果需要，在 Subversion 中，您可以（并且实际上*拥有*大多数布局）分支子树的**任何部分**。在 Mercurial 中，您分支整个存储库
*   在 Subversion svn:externals 可以引用目录或目录内的单个文件，在 Mercurial (sub|guest)repos 中只能链接整个外部存储库（在某些状态下） - 即您将无法链接（简单，技巧仍然可能) 在 MyLibrary1 存储库 MyLibrary1_Intf.h**文件**中，仅存储库（与 MyLibrary1_Intf.h 分开或与所有 Common 共享）

**关于您的问题**：

当（如果）MyLibrary* 和 Common 是独立的存储库，链接为超级和子存储库时，MyLibrary* 中的分支不会影响 Common（您总是在子存储库的某些状态 /changeset/ 中链接 / 可以在相同或不同的分支中对于 superrepo/superrepo 的 .hgsubstate 中的不同分支），因此 - 您可以自由选择如何根据库分支更改的要求更改 *.h 文件

**PS**：承诺的技巧是为所有 *.h 提供一个通用 repo，但在 subrepo 中只需要一个文件

Subrepo 定义允许使用任何合法的 URL 规范，其中之一是`repository#cset-id`，其中 changeset-id 可以是任何适用的 id（也可以是分支名称）。因此，如果您将从默认分支（包含所有文件）为每个 MyLibrary 创建单独的命名分支并在每个此分支文件中删除，与特定库无关，使用分支 id 定义 suprepo，superrepo 将只知道文件（s ) 在这个分支

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:25:27.467

除非您必须独立“发布”您的库，否则您可以使用单独的存储库。否则，最好使用 ONE repo 来省去很多 repo 管理和库同步的麻烦。

使用 1 个 repo，您​​可以使用真正的分支来为各个库实现干净的修订历史记录（如果这是一个目标）。分支模型可能如下所示：

```
develop    
main branch  ----------o--o---------o---o--
                      /  /|        /   /
lib1 branch  --o--o--o----+-o---------o----
                       /  |      / 
lib2 branch  --o------o---+--o-------------
                          |    /    
lib3 branch  -o----o------+---o------o-----
                          ^
                         sync 
```

# heap - 如何删除最大堆中的最小键？

> ID：14950189
> 
> 赞同：2
> 
> 时间：2013-02-19T05:04:21.793
> 
> 标签：heap, max-heap

我需要实现一个函数 HEAP-DELETE-MIN(Array) 删除最大堆中的最小整数。我不要求函数本身，但有人可以为我提供一些 **伪代码**来帮助我开始吗？这将是一个很大的帮助。该数组应在函数结束时保持最大堆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:30:35.380

本质上，您需要做的是搜索存储在数组中的隐式堆的所有叶节点。它将是堆的一个叶子节点，因为它的父节点必须大于它（最大堆属性），并且我们知道叶子是从索引 n/2 及以后存储的（尽管这不会损害我们的算法复杂性）。所以基本上你应该做的是以下几点：

```
1) Search the array for the minimum element
2) Place the last-inserted heap element in the position of the minimum element (essentially this is the delete)
3) Upheap the replaced node to restore maximum heap property and correct storage of the heap in the array 
```

这将花费 O(n) 来搜索最小元素，然后 O(1) 用于切换，最后 O(log n) 用于上堆。总的来说，这是线性时间，基本上是你能做的最好的。

记住要小心索引操作，2*i 是节点 i 的左子节点，2*i+1 是节点 i 在基于数组的堆中的右子节点（假设数组的第 0 个元素始终为空，并且堆的根在索引 1)

# c# - 如何选择 在静态函数中

> ID：14950190
> 
> 赞同：1
> 
> 时间：2013-02-19T05:04:32.897
> 
> 标签：c#

我有一个班级 Student ，里面有一个属性`Studentname`和`address`。

我还有一个像下面这样的静态函数，供我过滤学生`address(living area)`

```
public static List<T> FilterByAddress<T>(List<T> StudentList, string address )
    {
       Type typeParameterType = typeof(T); // it is returning Student 
       StudentList = StudentList.FindAll(x => x.address == address );            
       return StudentList;
    } 
```

我在这部分代码“x.address”上收到错误，即错误 42“T”不包含“学生名”的定义，并且找不到接受“T”类型的第一个参数的扩展方法“学生名” （您是否缺少 using 指令或程序集引用？）

我怎样才能通过让 T 识别为学生类来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:08:36.313

**更新**根据您的评论：

> T 可以不同，不一定必须是 student ，它是具有属性 Address 的其他类

通用不以这种方式工作。如果你想`Address`使用一个方法访问多个类的公共属性，你需要让它们都实现一个接口，比如`IHasAddress`（可怕的名字），然后在你的方法上定义一个通用约束，比如`where T : IHasAddress`

**原始答案**

如果您需要它是 a `Student`，则不应将该方法设为通用：

```
public static List<Student> FilterByAddress(List<Student> StudentList, string address )
{
   StudentList = StudentList.FindAll(x => x.address == address );            
   return StudentList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:11:02.870

问题是 T 是通用的并且没有地址的概念，您需要关闭 T 的编译器选项才能说它至少是“学生”

```
public static List<T> FilterByAddress<T>(List<T> StudentList, string address ) where T: Student
    {
       Type typeParameterType = typeof(T); // it is returning Student 
       StudentList = StudentList.FindAll(x => x.address == address );            
       return StudentList;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:09:58.610

向泛型方法添加约束：

```
public static List<T> FilterByAddress<T>(List<T> StudentList, string address )
where T:Student 
```

# python - 如何从 Django 中的 inlineadmin 获取当前模型实例

> ID：14950193
> 
> 赞同：22
> 
> 时间：2013-02-19T05:04:49.873
> 
> 标签：python, django, django-admin

我正在使用[django 文档](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)`formfield_for_manytomany`中给出的内容。但是在该函数中，我需要获取正在编辑的当前父对象。

```
def formfield_for_manytomany(self, db_field, request, **kwargs):
    if db_field.name == "car":
        kwargs["queryset"] = Cars.objects.filter(owner=person)
    return super(myModel, self).formfield_for_manytomany(db_field, request, **kwargs) 
```

我怎样才能得到正在编辑的人？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T06:38:29.977

如果`person`无法轻松获取`request`，您可能需要通过覆盖`ModelAdmin.get_form()`或手动传递它`InlineModelAdmin.get_formset()`：

```
from functools import partial

class MyModelAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        kwargs['formfield_callback'] = partial(self.formfield_for_dbfield, request=request, obj=obj)
        return super(MyModelAdmin, self).get_form(request, obj, **kwargs)

    def formfield_for_dbfield(self, db_field, **kwargs):
        person = kwargs.pop('obj', None)
        formfield = super(MyModelAdmin, self).formfield_for_dbfield(db_field, **kwargs)
        if db_field.name == "car" and person:
            formfield.queryset = Cars.objects.filter(owner=person)
        return formfield 

# or its inline
class MyInlineModelAdmin(admin.StackedInline):
    def get_formset(self, request, obj=None, **kwargs):
        kwargs['formfield_callback'] = partial(self.formfield_for_dbfield, request=request, obj=obj)
        return super(MyInlineModelAdmin, self).get_formset(request, obj, **kwargs)

    def formfield_for_dbfield(self, db_field, **kwargs):
        person = kwargs.pop('obj', None)
        formfield = super(MyInlineModelAdmin, self).formfield_for_dbfield(db_field, **kwargs)
        if db_field.name == "car" and person:
            formfield.queryset = Cars.objects.filter(owner=person)
        return formfield 
```

或者

```
class MyModelAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        kwargs['formfield_callback'] = partial(self.formfield_for_dbfield, request=request, obj=obj)
        return super(MyModelAdmin, self).get_form(request, obj, **kwargs)

    def formfield_for_dbfield(self, db_field, **kwargs):
        if db_field.name != "car":
            kwargs.pop('obj', None)
        return super(MyModelAdmin, self).formfield_for_dbfield(db_field, **kwargs)

    def formfield_for_manytomany(self, db_field, request=None, **kwargs):
        person = kwargs.pop('obj', None)
        if db_field.name == "car" and person:
            kwargs['queryset'] = Cars.objects.filter(owner=person)
        return super(MyModelAdmin, self).formfield_for_manytomany(db_field, request, **kwargs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-26T10:19:44.320

为了访问 InlineModelAdmin 的父 ModelAdmin 的模型实例，我过去使用过这个 hack：

```
class PersonAdmin(ModelAdmin):
    def get_formsets(self, request, obj=None, *args, **kwargs):
        for inline in self.inline_instances:
            inline._parent_instance = obj
            yield inline.get_formset(request, obj)

class CarInline(TabularInline):
    _parent_instance = None

    def get_formset(self, *args, **kwargs):
        def formfield_callback(field, **kwargs):
            formfield = field.formfield(**kwargs)
            if field.name == 'car':
                formfield.queryset = Cars.objects.filter(owner=self._parent_instance)
            return formfield

        if self._parent_instance is not None:
            kwargs['formfield_callback'] = formfield_callback
        return super(CarInline, self).get_formset(*args,
                                                                 **kwargs) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-09T16:07:21.240

我发现了一种更简洁的方法，而无需在`get_formset()`/ `get_formsets()`/中进行所有黑客攻击`formfield_for_dbfield()`。使用 Django 的 Request 对象（您有权访问）来检索，然后从匹配中[`request.path_info`](https://docs.djangoproject.com/en/1.10/ref/request-response/#django.http.HttpRequest.path_info)的 args 检索 PK 。[`resolve`](https://docs.djangoproject.com/en/1.10/ref/urlresolvers/#resolve)例子：

```
from django.contrib import admin
from django.core.urlresolvers import resolve
from app.models import YourParentModel, YourInlineModel

class YourInlineModelInline(admin.StackedInline):
    model = YourInlineModel

    def get_parent_object_from_request(self, request):
        """
        Returns the parent object from the request or None.

        Note that this only works for Inlines, because the `parent_model`
        is not available in the regular admin.ModelAdmin as an attribute.
        """
        resolved = resolve(request.path_info)
        if resolved.args:
            return self.parent_model.objects.get(pk=resolved.args[0])
        return None

    def has_add_permission(self, request):
        parent = self.get_parent_object_from_request(request)
        if parent and parent.is_active is True:
            return False
        return super(YourInlineModelInline, self).has_add_permission(request)

    def get_formset(self, request, *args, **kwargs):
        """
        Using the get_formset example from above to override the QuerySet.
        """
        def formfield_callback(field, **kwargs):
            formfield = field.formfield(**kwargs)
            if field.name == 'car':
                formfield.queryset = self.parent_model.objects.filter(
                    owner=self.get_parent_object_from_request(request)
                )
            return formfield

        if self.get_parent_object_from_request(request) is not None:
            kwargs['formfield_callback'] = formfield_callback

        return super(YourInlineModelInline, self).get_formset(*args, **kwargs)

@admin.register(YourParentModel)
class YourParentModelAdmin(admin.ModelAdmin):
    inlines = [YourInlineModelInline] 
```

# spring - 解析百里香模板时出错

> ID：14950195
> 
> 赞同：1
> 
> 时间：2013-02-19T05:04:55.953
> 
> 标签：spring, template-engine, thymeleaf

这困扰了我一段时间，网上似乎没有任何帮助；基本上我找不到特定异常消息的任何内容，除了异常消息之外我不知道要查找什么。

我的应用程序中有一个收据页面，它曾经可以工作，但现在它抛出

```
org.thymeleaf.exceptions.TemplateProcessingException: Error processing template: dialect prefix "th" is set as non-lenient but attribute "th:src" has not been removed during process (/static/receipt:57) 
```

其中`th:src`是第一次出现的“th”元素。我不做任何自定义处理——只是一个带有很少百里香叶的 HTML 页面。该页面被解析，因为当我在语法中有错误时，它告诉我 Thymeleaf 引擎无法解析该页面。还要提一下，这个页面是由 MS Word 生成的，然后根据我的需要进行了调整。可以从头开始重写它，但我想找出什么不起作用以及为什么它一直给我这个消息。

我的问题似乎与这个论坛条目[http://forum.broadleafcommerce.org/viewtopic.php?f=14&t=1478](http://forum.broadleafcommerce.org/viewtopic.php?f=14&t=1478)相同（那个人没有得到答案）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:38:19.307

我发现这是由于 Thymeleaf 模板引擎中添加了 datatables4j 方言。有问题的收据页面有一个没有用 datatables4j 表示法标记的表。它导致了问题中描述的错误。一旦我删除了方言，所有 datatables4j 表都从任何地方消失了，但例外情况也是如此。

# php - 我应该从我的控制器传递会话数据，还是在服务层中读取它？

> ID：14950199
> 
> 赞同：3
> 
> 时间：2013-02-19T05:05:27.753
> 
> 标签：php, oop, design-patterns

我在 PHP 中有一个相当典型的 MVC 应用程序。很多时候我需要从会话中获取数据，但我不确定是否应该在控制器或服务中执行此操作。

例如，如果请求命中`domain.com/user/edit`，我的控制器可以从会话中获取当前用户并将其传递给服务，或者服务可以访问会话本身。

如果我在服务中这样做，它会在服务层和会话对象之间创建依赖关系。如果我在控制器中这样做，它会使控制器变得更胖。

我知道这只是一个小问题，但我在会话中存储了很多（小）变量，并且我的请求的参数处理本身就非常复杂。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:25:54.423

**简短的回答：**两者都不是。

现在有点孤独的解释......

从架构的角度来看，会话是一种存储形式。在 PHP 中，很容易操作它实际上是哪种类型的存储。

*MVC 中的服务是处理应用程序逻辑*的模型层的一部分。也就是说 - 它处理[域对象](http://c2.com/cgi/wiki?DomainObject)和存储抽象之间的交互（通常直接或间接实现为[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)）。

因此，您应该将访问（也是初始化）抽象`$_SESSION`为某种`SessionMapper`，它可以处理整个域对象的存储或仅存储来自这些域对象的特定参数。

并且由于 session （通常）是您执行中的一个单一结构，如果请求，您可以通过确保`Factory`生成数据映射器的 仅创建一个实例来强制执行`SessionMapper`。

服务仅使用此（通过工厂共享）会话映射器，控制器对此一无所知。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-19T05:07:49.193

`$_SESSION`是一个全局变量。为什么一定要传递可以全局访问的东西？

除非需要验证会话数据并且需要以某种方式准备其数据，否则无需将此类变量传递给控制器​​类。

# android - 如何根据位置过滤 Facebook 优惠？

> ID：14950201
> 
> 赞同：1
> 
> 时间：2013-02-19T05:05:37.317
> 
> 标签：android, facebook-graph-api

如果有人告诉我如何根据用户的当前位置过滤 Facebook 优惠，那将非常有帮助。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:17:39.960

我自己找到了解决方案..

我使用以下 FQL 查询来执行此操作。

```
SELECT id, title, owner_id, image_url, created_time, expiration_time, terms, claim_limit, coupon_type, redemption_link, redemption_code FROM offer WHERE owner_id IN (SELECT parent_page FROM page WHERE page_id IN (SELECT page_id,name FROM place WHERE distance(latitude, longitude, '-36.849423','174.755888') < 50000)) 
```

# asp.net-mvc - Chrome 超链接 url 显示在文本后面的括号中

> ID：14950202
> 
> 赞同：1
> 
> 时间：2013-02-19T05:05:37.930
> 
> 标签：asp.net-mvc, google-chrome, css

我有一个在 IE8 中显示良好的 MVC4 站点，但是在 Chrome 中显示所有超链接，文本然后 url 在括号中，如下所示：-

*   文本（/Controller/Edit/37）

它看起来与 CSS 相关，但我不确定如何找到导致它的原因。

# ruby-on-rails - 为rails中的操作创建一个url

> ID：14950203
> 
> 赞同：1
> 
> 时间：2013-02-19T05:05:52.323
> 
> 标签：ruby-on-rails, ruby

我是 ROR 的新手，我正在尝试创建一个操作，我可以从中删除数据库中的文件。我已经为相同的代码编写了一个代码，但对 url 给出了错误。查看删除操作：-

```
= link_to raw('<span>Delete</span>'), :method=> :delete,  destroy_attachment_path(attachment.descendants.last),
                              :data => { :confirm => 'Are you sure? This will permanently delete this file!' },
                              :remote => true,
                              :class => 'deleteShow deleteFile' 
```

相同的控制器：-

```
enter code here

def destroy

  @attachment = Attachment.find(params[:id])

  @attachment.destroy

  respond_to do |format|
    format.html { redirect_to attachments_url }
    format.json { head :no_content }
  end
end 
```

当我尝试运行此代码时，错误显示为无效方法 Destroy_attachment 路径。任何人都可以帮我解决问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:21:01.947

你可以试试这个，它对我有用..

```
link_to raw('<span>Delete</span>'), attachment.descendants.last, :method=> :delete,      :data => { :confirm => 'Are you sure? This will permanently delete this file!' },
                          :remote => true,
                          :class => 'deleteShow deleteFile' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:22:51.963

你的 link_to 应该是

```
= link_to raw('<span>Delete</span>'), attachment_path(attachment.descendants.last),
  :method => :delete,
  :data => { :confirm => 'Are you sure? This will permanently delete this file!' },             
  :remote => true,
  :class => 'deleteShow deleteFile') 
```

或者您可以使用嵌套形式

```
= link_to attachment_path(attachment.descendants.last),
  :method => :delete,
  :data => { :confirm => 'Are you sure? This will permanently delete this file!' },             
  :remote => true,
  :class => 'deleteShow deleteFile') do
    %span Delete 
```

（请注意缩进，因为您很可能使用的是haml，我只是这样做是为了更好地阅读代码）

# c - 在其他进程中看不到 C mmap() 共享内存写入

> ID：14950204
> 
> 赞同：0
> 
> 时间：2013-02-19T05:06:01.510
> 
> 标签：c, shared-memory, mmap

我正在使用 shm_open、ftruncate 和 mmap 在共享内存中存储一​​个动态创建的二维数组。当我对数组进行更新时，更新仅在进行该更新的进程中可见，而没有其他进程使用该共享内存映射。事不宜迟——代码（相关位）：

```
int fd;
int** graph;
fd = shm_open("/graph", O_RDWR|O_CREAT, 0666);
ftruncate(fd, sizeof(int)*numVertices*numVertices);
graph = (int**) mmap(NULL, sizeof(int)*numVertices*numVertices, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);
foo(numVertices, fd);

/* Down to function definition */
void foo(int numVertices, int fd) {
    int i=0;
    for (i; i<num_processes; i++) {
        int pid = fork();
        if (pid == 0) {
            int **graph = (int**) mmap(NULL, sizeof(int)*numVertices*numVertices, PROT_WRITE|PROT_READ, MAP_SHARED, fd, 0);
            graph_algorithm(i, numVertices, graph);
        }
    } 
}

void graph_algorithm(int proc_num, int numVertices, int** graph) {
     pthread_mutex_lock(&mutex);
     if (proc_num == 0) {
          graph[0][0] = 1;
     }
     pthread_mutex_unlock(&mutex);

     printf("Process %d: %d\n", proc_num, graph[0][0]);
} 
```

当在 graph_algorithm 中完成打印时，proc_num 为 0 的进程在 graph[0][0] 处为 1，但所有其他进程都保持旧值 0。我省略了 fork 和 mmap 的错误检查——但这就是要点的问题。我还尝试在 graph[0][0] = 1 之后调用 msync(graph, sizeof(int)*numVertices*numVertices, MS_SYNC) 但无济于事。这是我第一次使用共享内存，我不知道我做错了什么。就我所见，这里或任何其他网站都没有出现这个问题。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:23:24.687

我怀疑问题是您使用了双指针，特别是考虑到您没有指定`graph_algorithm()`尺寸`graph`是什么。在这种情况下，`graph[0][0]`将等同于`*(*graph)`，它可能指向映射内存，也可能不指向映射内存。您需要确保您的数组指向映射内存的单个连续区域。只要您知道至少一个维度，您仍然可以获得二维数组。因此，`graph[x][y]`您将使用`graph[x * numVertices + y]`. 根据您的编译器，您可能仍然可以使用双精度数组，但您需要显式提供`graph`. 所以你的原型`graph_algorithm`会变成类似

```
void graph_algorithm(int proc_num, int numVertices, int graph[][numVertices]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T19:47:50.487

您的互斥体显然存在问题。除非互斥锁在进程之间共享，否则它不会阻止进程之间的并发访问。我什至没有看到它的定义或初始化。

还有一场比赛。即使互斥锁是共享的，任何其他进程中的 printf 也不能保证在进程 0 之前之后。

在访问结果之前，您应该有一种在图形算法结束时进行同步的方法，以确保所有操作都已完成。

二维数组没有问题，只要进程都同意尺寸。

# java - java.sql.SQLException：检索结果后用尽的结果集

> ID：14950205
> 
> 赞同：0
> 
> 时间：2013-02-19T05:06:01.723
> 
> 标签：java, sql, jsp, plsql

我试图使用以下方法获取搜索结果，它会像`java.sql.SQLException: Exhausted Resultset`在 catch 块中一样留下错误。这是在检索结果后显示的。搜索似乎也很慢。

```
private static OracleConnection connection = null;
    private static OraclePreparedStatement ptmst = null;
    private static OracleResultSet rs = null;
    private static OracleCallableStatement cstmt = null;

 public static ArrayList particleSearch(BigDecimal myId,BigDecimal deId,String search_term,JspWriter out )throws Exception
  {
    StringBuffer sql = new StringBuffer();
    ArrayList particles = new ArrayList();
    try
    {

      connection = (OracleConnection) TransactionScope.getConnection();
      sql.append("select distinct(..)......... ");  
      ptmst = (OraclePreparedStatement)connection.prepareStatement(sql.toString());
      ptmst.setBigDecimal(1,deId);
      ptmst.setBigDecimal(2,myId);
      ptmst.setString(3,search_term);
      rs = (OracleResultSet)ptmst.executeQuery();               

      while (rs.next()) 
                {                  
                HashMap hashParticles = new HashMap();
                hashParticles.put("part1",rs.getString(1));
                hashParticles.put("part2",rs.getString(2)); 
                hashParticles.put("part3",rs.getBigDecimal(3));                                                 
                particles.add(hashParticles);
                }

       connection.commit();

     }
     catch (Exception e) {
        out.println("Er:"+e.toString());  ///// throws error:: Er:java.sql.SQLException: Exhausted Resultset 
        }
     finally {

            try {
                if (ptmst != null) {
                    ptmst.close();
                }
            } catch (Exception e) {
            out.println(e.toString());
            }

            try {
                if (connection != null) {
                    TransactionScope.releaseConnection(connection);
                }
            } catch (Exception e) {
            out.println(e.toString());
            }

        }
        return particles; 
  } 
```

# objective-c - mkmapview 上的多个注释

> ID：14950211
> 
> 赞同：0
> 
> 时间：2013-02-19T05:06:44.703
> 
> 标签：objective-c, mkmapview

我在 mkmapview 上有很多注释。要在 mkmapview 上显示多个注释，我正在使用代码

```
 MKMapRect zoomRect = MKMapRectNull;
 for (id <MKAnnotation> annotation in self.mapView.annotations)
 {
       if([[annotation description]isEqualToString:@"Location"])
      {
            MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
            MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
            if (MKMapRectIsNull(zoomRect)) 
            {
                        zoomRect = pointRect;
            } 
            else 
            {
                        zoomRect = MKMapRectUnion(zoomRect, pointRect);
             }
         }
   }

 MKCoordinateRegion region = MKCoordinateRegionForMapRect(zoomRect);

[self.mapView setRegion:region animated:YES]; 
```

即使注释被绘制在地图上，某些注释也会被截断。

![在此处输入图像描述](../Images/c5187b5728e9b0a9cf5594bf86c9d89d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:31:46.837

你可以试试这个它可能对你有帮助

```
- (void)zoomToFitMapAnnotations { 

    if ([mapView.annotations count] == 0) return; 

        int i = 0;
        MKMapPoint points[[mapView.annotations count]];

        //build array of annotation points
        for (id<MKAnnotation> annotation in [mapView annotations])
            points[i++] = MKMapPointForCoordinate(annotation.coordinate);

        MKPolygon *poly = [MKPolygon polygonWithPoints:points count:i];

        [mapView setRegion:MKCoordinateRegionForMapRect([poly boundingMapRect]) animated:YES]; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:03:24.957

在很多情况下，如果不是大多数情况下，您会在顶部有一个这样的图钉，因为您正在计算的矩形仅适用于注释所指向的坐标，而不适用于该位置显示的图像。

您可能能够使用[MKMapView 类](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instm/MKMapView/convertPoint%3atoCoordinateFromView%3a "转换点：到坐标从视图：")找出注释视图离屏幕多远，但您需要先缩放到不正确的矩形才能知道屏幕测量所覆盖的地图距离。

另一种方法是根据图钉的大小与地图视图大小相比，将 zoomRect 稍微向北扩展一小部分。例如（使用编造的数字）如果地图视图的高度为 100pt，而 pin 为 10，则您需要将 zoomRect 高 10%（假设顶部有一个 pin - 您可以通过检查zoomRect 比地图视图更宽，或者只是添加 10%，因为没有人会关心顶部是否有一些未使用的地图）。

# objective-c - 可可中 NSTableview 的分页

> ID：14950212
> 
> 赞同：0
> 
> 时间：2013-02-19T05:06:45.903
> 
> 标签：objective-c, cocoa, pagination, nstableview

我有一个`NSTableView`1000+ 行。现在我想为其添加分页并在一个视图中添加 100 的限制，然后放置 Back 和 Next 按钮以查看下一个数据。

我是这个可可开发的新手。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:25:04.430

将数据存储在文件中。（第0页，第1页..）

```
 /* page0   <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <array>
        <string>/Volumes/Drop Box</string>
        <string>/Volumes/Backup</string>
        <string>/Users/Music</string>
    </array>
    </plist>*/

#import <Cocoa/Cocoa.h>

@interface ViewController : NSObject {
    NSTableView *tableView;
    NSMutableArray *mDataSource;
    NSInteger mPageNumber;
    NSInteger mTotalPage;
}
-(IBAction)nextPage : (id)sender;//for next page
-(IBAction)prevPage : (id)sender;// for prev. page
-(void)fetchData;
@property (assign) IBOutlet NSTableView *tableView;
@end
#import "ViewController.h"

@implementation ViewController
@synthesize tableView;
- (id) init
{
    self = [super init];
    if (self != nil) {
        mDataSource = [[NSMutableArray alloc] init];
        mPageNumber=0;
        mTotalPage =2;// total numer of pages
        [self fetchData];
    }
    return self;
}

-(IBAction)nextPage : (id)sender;
{
    ++mPageNumber;
    if (mTotalPage<=mPageNumber) {
        mPageNumber=0;// point to first page
    }
    [self fetchData];

}
-(IBAction)prevPage : (id)sender;
{
    --mPageNumber;
    [self fetchData];
}

-(void)fetchData;
{
    [tableView setDataSource:nil];
    NSString *lDataSourcePath = [[NSString alloc] initWithFormat:@"/page%d",mPageNumber];
    NSArray *lDataSource = [[NSArray alloc] initWithContentsOfFile:lDataSourcePath];
    [mDataSource setArray:lDataSource];
    [lDataSource release];
    [lDataSourcePath release];
    [tableView setDataSource:self];
    [tableView reloadData];
}
-(void)dealloc
{
    [mDataSource release];
    [super dealloc];
}

#pragma mark Data Source
- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView
{
    return [mDataSource count];
}

- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex
{
    return [mDataSource objectAtIndex:rowIndex];
}

@end 
```

# php - PDO 错误未捕获异常 SQLSTATE[HY000]

> ID：14950215
> 
> 赞同：1
> 
> 时间：2013-02-19T05:06:52.307
> 
> 标签：php, pdo

我一直收到这个错误，但我不知道为什么......

错误是：

```
Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]:

General error' in test.php:25\nStack trace:\n#0 test.php(25): 

PDOStatement->fetch()\n#1 {main}\n  thrown in test.php on line 25 
```

我的查询是这样的：

```
$stmt = $pdo->prepare("

SELECT *,t1.id AS theID FROM users
   t1 LEFT JOIN users_settings t2
ON t1.id=t2.tid                 
   INNER JOIN extra_settings t3
ON t2.bid=t3.id");

try {
    $stmt->execute();
} catch (PDOException $e) {
    echo $e -> getMessage();  
}

while($row = $stmt->fetch()){ //error is here
    //do stuff
} 
```

该脚本有效，但仍然显示错误=/

错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:10:21.173

那是因为您必须在`try`语句中运行 while 循环：

```
try {
    $stmt->execute();
    while($row = $stmt->fetch()){
        //do stuff
    }
} 
catch (PDOException $e) {
    echo $e -> getMessage();  
} 
```

您看到此消息是因为您的查询有问题。尝试：

```
SELECT *,t1.id AS theID FROM users
   t1 LEFT JOIN t2.users_settings
   ON t1.id=t2.tid                 
   INNER JOIN t3.extra_settings
   ON t2.bid=t3.id 
```

# java - Java Swing：全屏模式不起作用

> ID：14950218
> 
> 赞同：1
> 
> 时间：2013-02-19T05:07:13.840
> 
> 标签：java, swing, awt, fullscreen, key-bindings

我正在尝试在基于[此代码的 Java APP 中实现全屏模式](http://docs.oracle.com/javase/tutorial/extra/fullscreen/exclusivemode.html)

```
private static void createAndShowGUI()
{
    //Create and set up the window.
    JFrame frame = new JFrame("Mouse Click Demo");
    //Make it non-Resizable
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    JComponent newContentPane = new MouseEventDemo();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    //frame.setVisible(true);
    if (!frame.isDisplayable())
    {
        // Can only do this when the frame is not visible
        frame.setUndecorated(true);
    }
    GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
    try
    {
      if(gd.isFullScreenSupported())
      {
         gd.setFullScreenWindow(frame);
         System.out.print("DOES SUPPORT");
      }
      else
      {
          //Can't run in full screen mode
          System.out.print("DOES NOT SUPPORT");
      }
      frame.setVisible(true);
    }
    finally
    {
     gd.setFullScreenWindow(null);
    }

} 
```

问题是，当我在 Macbook 上运行时，它仍然显示顶部 Mac 栏和底部甲板，控制台确实进入状态并打印**DOES SUPPORT**但仍不显示在全屏模式下。

我在做什么错？

编辑：[这是我的屏幕截图](http://oi48.tinypic.com/17u9ur.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:20:41.893

回应您的`Escape`评论...

你最好的选择是使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

有很多原因，但最主要的原因是它没有受到排他焦点问题的`KeyListener`影响

```
public class TickleMe {

    public static void main(String[] args) {
        new TickleMe();
    }

    public TickleMe() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setUndecorated(true);

                JPanel content = new JPanel(new GridBagLayout());
                content.add(new JLabel("Tickle Me"));
                InputMap im = content.getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW);
                ActionMap am = content.getActionMap();
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), "getMeOutOfHere");
                am.put("getMeOutOfHere", new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        try {
                            GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
                            gd.setFullScreenWindow(null);
                        } finally {
                            frame.dispose();
                        }
                    }
                });

                frame.setContentPane(content);

                GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
                if (gd.isFullScreenSupported()) {
                    gd.setFullScreenWindow(frame);
                    frame.requestFocusInWindow();
                }

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:31:40.733

好的，找到了罪魁祸首，示例最终调用*了*它，它再次进入正常窗口。我不得不重新启动我的机器，因为 ESC 也无法退出全屏模式。

# jquery - 为什么我不能通过 jQuery 选择 iframe > html > body 之类的内容？

> ID：14950219
> 
> 赞同：0
> 
> 时间：2013-02-19T05:07:18.727
> 
> 标签：jquery, wysihtml5

我正在使用[wysihtml5](https://github.com/xing/wysihtml5/)插件，将富编辑器添加到我的文本区域。

所以，插件变成了这样：

```
<textarea></textarea> 
```

进入这个：

```
<textarea style="display:none;"></textarea>
<iframe>
  <header>
  <header>
  <body class="wysihtml5-editor">
  </body>
</iframe> 
```

我在[这里](https://github.com/xing/wysihtml5/issues/104)找到了一些信息，以添加字符计数器：

```
 wysihtml5Textarea.data("wysihtml5").editor.observe("load", function() {
    wysihtml5Textarea.data("wysihtml5").editor.composer.element.addEventListener("keyup", function() {
      var wysihtml5_cur_length = 0;
      wysihtml5_cur_length = $('.wysihtml5-editor').val().length;
      alert(wysihtml5_cur_length);
    });
  }); 
```

根据插件作者的说法：

> 解决方案是不在 textarea 上监听 keyup 事件，而是在 's body

所以这就是我所做的，我听了 iframe > html > body：`.wysihtml5-editor`

但是现在，我收到以下错误：

`Uncaught TypeError: Cannot read property 'length' of undefined`

所以这意味着 jQuery 部分由于某种原因没有定位主体（它确实定位了不在 iframe 内的元素）。

可能是什么问题，有哪些可能的解决方案？

![在此处输入图像描述](../Images/d39e696eccecef82e1eb02d727c9c57c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T22:45:33.367

You can get at the iframe content via [contentWindow](http://www.w3schools.com/jsref/prop_frame_contentwindow.asp)

Something like this works for me:

```
var editor_body = $(".wysihtml5-sandbox").contentWindow.document.body;
$(editor_body).keyup(function() {
  console.log($(this).text());
}); 
```

# php - Procmail 设置，执行 PHP 脚本

> ID：14950223
> 
> 赞同：0
> 
> 时间：2013-02-19T05:07:51.753
> 
> 标签：php, email, zend-framework, procmail

我的 procmail 设置运行良好，似乎在收到电子邮件时执行我的 PHP 脚本没问题。

以下是 .procmailrc 文件的示例：

```
#BEGIN PROCMAIL SCRIPT FOR MAIL PARSING
DEFAULT=$HOME/Maildir/
MAILDIR=$HOME/Maildir
PMDIR=$HOME/.procmail
LOGFILE=$PMDIR/log.`date +%y-%m-%d`
SHELL=/bin/sh

:0
|`/usr/local/php53/bin/php /home/usrmail/email/script.php` 
```

下面的日志输出：

```
 From x13542053@homiemail-mx22.g.dreamhost.com  Mon Feb 18 20:49:35 2013
 Subject: TEST
  Folder: HELLO                                                            2559
/bin/sh: HELLO: No such file or directory 
```

只是一个简单`echo "HELLO";`的php脚本，似乎工作正常！

但是，当我尝试使用以下代码实际解析电子邮件时，我在日志中收到以下错误：

```
$rawEmail = '';
if (($fp = fopen('php://stdin', 'r')) !== false) {
    while (!feof($fp)) {
        $rawEmail .= fread($fp, 1024);
    }
    fclose($fp);
}

 $email = new Zend_Mail_Message(array(
   'raw' => $rawEmail
));

From actualaddress@gmail.com  Mon Feb 18 20:44:36 2013
 Subject: Re: Test
  Folder: Fatal error: Class 'Zend_Mail_Message' not found in /home/sy     2747
/bin/sh: Fatal: No such file or directory 
```

这显然不能正常工作，我不知道为什么。一方面，From 标头在这一个上通过，但在另一个上没有通过，这似乎是断断续续的。

此外，目录 (/home/sy) 要么被截断，要么被某些东西切断以导致错误。

我根本不熟悉 Zend 或 procmail。我很高兴能走到这一步，只是想稍微解析一下电子邮件，这样我就可以获取电子邮件的正文并将其放在某个地方。有人说服我，这将是比仅使用 IMAP 或其他东西更好的方法，我听了。如果有人有任何出色的解决方案或替代方案，我会全力以赴。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:38:26.780

您正在混合两种相关但不同的语法。

如果你想管道到你的脚本，它应该只是

```
:0
* conditions, maybe
| /path/to/script 
```

或者如果你想使用脚本的输出，比如

```
:0
* conditions, maybe
`echo HELLO` 
```

将文件放入名为 的文件夹`HELLO`中，即使用脚本的输出作为文字。

至于来自 PHP 的错误消息，我想你需要在 PHP 的库路径中添加一些东西（快速谷歌搜索建议你应该修复`include_path`你的`php.ini`.

但是，您要完成什么？如果您只想将消息发送到标头应该发送的位置，例如

```
:0
* conditions, maybe
! -t 
```

应该得到你。我无法想象你想要这样做的情况（除非你试图完全解决错误的问题）。如果您想发送消息的截断副本，例如

```
:0c
* conditions, maybe
{
    :0fw
    | head -n 10
    :0
    ! -t
} 
```

会将消息截断到前十行。如果你想精确地截断到 1024 字节，这并不难。

另一方面，如果您只想存储消息的正文（完整的 RFC822 正文，即任何 MIME 附件等将被逐字包含，未解码），您可以使用

```
:0b
saved/ 
```

或者如果你想在那里使用 PHP

```
:0b
| /path/to/script.php 
```

对于它的价值，错误消息被截断，但这主要是因为您试图将它用作将电子邮件传递到的脚本的名称。如果你去掉反引号，错误信息应该以 Procmail 的标准错误结尾而不被截断。

# javascript - 如何在jquery中访问成功块之外的成功数据

> ID：14950228
> 
> 赞同：1
> 
> 时间：2013-02-19T05:08:13.830
> 
> 标签：javascript, jquery, ajax

```
jQuery.validator.addMethod("uniquerheading", function(value, element) {     
        var data = false;
        $action_name = 'checkunquieannoucementheading';

        var url = '<?php echo "$module_name/$controller_name/checkunquieannoucementheading"; ?>';
        $.ajax({
             url: url,
             type: 'get',
             data: {
                "txt_heading":value             
             },
             success: function(data) {              
                // Display list on the page by replacing the content on existing, get from the controller-action
                return data;
             }
        });

}, "Annoucement heading already used"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:23:26.110

工作代码...只需使用 async: false

```
jQuery.validator.addMethod("uniquerheading", function(value, element) { 

        $action_name = 'checkunquieannoucementheading';
        var response = false;
        var url = '<?php echo "$module_name/$controller_name/checkunquieannoucementheading"; ?>';
            $.ajax({
            url: url,
            type: 'get',
            data: {
                    "txt_heading":value             
            },
            success: function(data) {               
                // Display list on the page by replacing the content on existing, get from the controller-action
                response =  data;
            },
            async:   false
        })

        return response;

}, "Annoucement heading already used"); 
```

# android - Android CountUp 计时器在一个单独的类中

> ID：14950229
> 
> 赞同：1
> 
> 时间：2013-02-19T05:08:16.183
> 
> 标签：android, timer

首先，我是 android 和 java 的新手。我正在制作一个简单的 android 应用程序，它有大约 10 个活动。我想要的是让一个单独的类包含一个计时器，它在应用程序启动第一个活动时启动，我需要放置一个文本视图来显示所有活动中计时器的值。只需显示已在分离类中运行的计时器的值，因此在 10 号活动结束时，文本视图将显示用户在所有活动中花费的总时间。如果有一个完整的例子那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:15:57.577

***构建计数器片段***

[通过实现片段](http://developer.android.com/guide/components/fragments.html)开始您的想法，让我们调用它`CountUpFragment`，`fragmentActivity`这将是您将添加`CountUpFragment`到活动的应用程序的基础。

***为什么是片段***

您还希望为其他片段保留空间以添加到布局中。请记住，您将需要使用片段，或者每次浏览应用程序时都需要创建新片段，这将破坏片段可重用性的目的。

```
 <LinearLayout ....
    <fragment  android:id="@+id/countup_fragment" ... />
    <!-- here you may want to have other displaying fragments  -->
    <fragment .../>
  </LinearLayout> 
```

***CountUpFragment***

现在`CountUpFragment`将拥有自己的布局，例如`TextView`显示计数器时间。

***数数***

[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)将倒计时安排到未来的某个时间，并在此期间定期通知。（链接中有示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:16:39.263

您可能会考虑片段而不是活动。您将拥有一个 Activity，它可以`TextView`放置在屏幕上，并在用户在应用程序中移动时转换片段。不过，对于新开发人员来说，片段是一个高级主题，因此我会花大量时间阅读有关 Activity 生命周期、片段生命周期以及如何动态使用片段的内容。一些链接：

[http://developer.android.com/guide/components/activities.html](http://developer.android.com/guide/components/activities.html)

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T08:31:43.280

```
_countTimer = new CountDownTimer(40000, 1000) {
        public void onTick(long millisUntilFinished) {
            String _millis=String.valueOf(40-(millisUntilFinished/1000));
            CameraScreen._timerTxt.setText("0."+_millis);
        }
_countTimer.start(); 
```

# excel - 想要格式化一个工作簿，但我在另一个工作簿中写入宏

> ID：14950230
> 
> 赞同：0
> 
> 时间：2013-02-19T05:08:20.047
> 
> 标签：excel, vba

我有一本工作簿，里面有一些用户表单和代码。现在基于这个宏，我将数据提取到另一个工作簿中。现在从第一个 excel 我想在获取所需数据后格式化第二个工作簿。

下面是我的代码：

```
 Set abc = objWorkbook1.Sheets(report_shtnm)
     abc.Activate
   With Sheet2.Range(Cells(4, 1), Cells(rw_reps_sht, cl_reps_sht))
    .Borders.Weight = xlThin
    .WrapText = True
   End With 
```

问题是它格式化具有宏的excel。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:51:57.030

最好的方法是正确声明您的对象，然后简单地使用它们...参见这个例子

```
Option Explicit

Sub Sample()
    Dim wb1 As Workbook, wb2 As Workbook
    Dim ws1 As Worksheet, ws2 As Worksheet

    '~~> This workbook which has the macro
    Set wb1 = ThisWorkbook
    Set ws1 = wb1.Sheets("Sheet")

    '~~> The other workbook
    Set wb2 = Workbooks.Open("C:\Sample.xlsx")
    Set ws2 = wb2.Sheets("Sheet1")

    '~~> Work with sheet1 in the workbook which has the macro
    With ws1
        '
        '~~> Your code here
        '
    End With

    '~~> Work with sheet1 in the second workbook
    With ws2
        '
        '~~> Your code here
        '
    End With
End Sub 
```

如果您注意到使用此方法甚至不需要您使用`.Select`or `.Activate`;) 您可能还想阅读[有关](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select)or`.Select``.Activate`

# command-line-arguments - .bat 设置字体大小 - Windows 命令行

> ID：14950232
> 
> 赞同：2
> 
> 时间：2013-02-19T05:08:26.793
> 
> 标签：command-line-arguments, command-prompt, cmd, cmdlets

**简介：** 我发誓在发布之前已经搜索了一段时间，但一直无法找到答案..

**问题：** 关于 Windows 命令行：有没有办法通过 .bat 文件中的实际 Windows 命令行设置字体/文本大小？

- 不是通过去属性 -> 等*（我理解得很充分：P）*

--请不要使用 PowerShell。

**附加说明：** 原因：考虑基于业务系统的命令行前端，PHP 后端。

*提前致谢。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:04:22.227

如果不使用 PowerShell，我能想到的唯一方法是修改`HKCU\Console`. 请参阅相关的[Technet 文档](http://technet.microsoft.com/en-us/library/cc978570.aspx)。但是，对注册表值所做的更改不会更新已经运行的控制台窗口。在生成新控制台之前，您不会看到您的更改。

至于如何更改注册表，`reg /help`以获取更多信息。

# javascript - 使用存储在 d3.js 数组中的数据绘制 d3.svg.arc 元素

> ID：14950233
> 
> 赞同：1
> 
> 时间：2013-02-19T05:08:29.040
> 
> 标签：javascript, d3.js

嗨，我正在尝试多次绘制[coxcomb 图表](http://en.wikipedia.org/wiki/File%3aNightingale-mortality.jpg)。该代码绘制了一张这样的图表。[jsfiddle 示例](http://jsfiddle.net/etheleon/Zawx4/)

我遇到的问题：我如何对我的数据进行排序，以便我可以绘制多个这样的图表？

```
//data
var data = [
    {"label": "January", "value": 150, "time": 1},
    {"label": "February", "value": 65, "time": 2},
    {"label": "March", "value": 50, "time": 3},
    {"label": "April", "value": 75, "time": 4},
    {"label": "May", "value": 150, "time": 5},
    {"label": "June", "value": 65, "time": 6}
];

//container
var svg = d3.select("body")
.append("svg:svg")
.attr("width", 1000)
.attr("height", 1000);

var pi = Math.PI;

var arc = d3.svg.arc()
        .innerRadius(0)
        .outerRadius(function(d,i) {return (0 + d.value); })
        .startAngle(function(d,i) { return ((d.time - 1) * 60 * pi / 180); })
        .endAngle(function(d) { return (d.time * 60 * pi / 180 ); });

var chartContainer = svg.append("g")
        .attr('class', 'some_class')
        .attr("transform", "translate(450, 300)");

chartContainer.selectAll("path")
        .data(data)
        .enter()
        .append("path")
        .attr("d", arc)
        .attr("class", "arc"); 
```

我想也许我可以按以下方式订购数据：

```
var data2 = [
{label: "Rose.chart1", value: [150,65,50,75,150,65]}
{label: "Rose.chart2", value: [130,50,30,10,50,70]}
] 
```

但这意味着我将不得不重写以下内容：

1.) 定义 arc 变量

```
var arc = d3.svg.arc()
        .innerRadius(0)
        .outerRadius(function(d,i) {return (0 + d.value); })
        .startAngle(function(d,i) { return ((d.time - 1) * 60 * pi / 180); })
        .endAngle(function(d) { return (d.time * 60 * pi / 180 ); }); 
```

2.) 将数据绑定到选择

```
chartContainer.selectAll("path")
        .data(data)
        .enter()
        .append("path")
        .attr("d", arc)
        .attr("class", "arc"); 
```

我想我可能需要输入数据对象（data2），然后再次输入值元素。原谅我的描述。

```
function(d.value) {???} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:56:53.973

首先将数据嵌套为数组数组。所以你会有：

```
//data
var data = [
  [
    {"label": "January", "value": 150, "time": 1},
    {"label": "February", "value": 65, "time": 2},
    {"label": "March", "value": 50, "time": 3},
    {"label": "April", "value": 75, "time": 4},
    {"label": "May", "value": 150, "time": 5},
    {"label": "June", "value": 65, "time": 6}
  ],
  [
    {"label": "January", "value": 123, "time": 1},
    {"label": "February", "value": 62345, "time": 2},
    {"label": "March", "value": 5340, "time": 3},
    {"label": "April", "value": 72315, "time": 4},
    {"label": "May", "value": 11350, "time": 5},
    {"label": "June", "value": 6135, "time": 6}
  ],
]; 
```

然后将图表嵌套在绑定到数据的父容器中：

```
svg.selectAll(".charts")
  .data(data)
    .enter()
      .append("g")
      // Translate each chart based on 'i'
      .attr("transform", function(d, i) { return "translate(" + ((i+1) * 450) + ", 300)");
      .each(function(chartData, i) {
         var chartContainer = d3.select(this);// Selects the containing 'g'
         // The rest is what you already wrote
         chartContainer.selectAll("path")
            .data(data)
            .enter()
            .append("path")
            .attr("d", arc)
            .attr("class", "arc");
      }); 
```

# c++ - eclipse cdt：从命令行调用make文件并添加版本号

> ID：14950234
> 
> 赞同：1
> 
> 时间：2013-02-19T05:08:35.343
> 
> 标签：c++, makefile, eclipse-cdt, embedded-linux

两个简单的问题：

如何使用所有环境变量调用 eclipse cdt 生成的 make 文件？例如，我的 make 文件是在 PROJECT_FOLDER_ROOT/Debug/makefile 位置生成的，如果我尝试调用它：

```
khan@khan-P55A-UD3P:~/git/gcc/libGCC/Debug$ make -k -j5 all 
```

> 构建文件：../src/utility/Versioning.cpp 调用：Cross G++ 编译器 mipsel-openwrt-linux-g++ -I/home/khan/carambola.pristine/staging_dir/target-mipsel_r2_uClibc-0.9.33.2/usr/include - O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/utility/Versioning.d" -MT"src/utility/Versioning.d" -o "src/utility/Versioning.o" "../src/utility/Versioning.cpp" /bin/sh: 1: mipsel-openwrt-linux-g++: 未找到 make: *** [src/utility/Versioning.o] 错误 127 make: Target 'all' not因为错误重做。

它正在寻找`mipsel-openwrt-linux-g++`，这是 Eclipse 构建系统的环境变量。如何将其包含在命令行用法中？

第二个问题：有没有办法在 CDT 中自动增加内部版本号？谷歌搜索在这方面没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:31:38.110

在这里询问之后，它设法找出了 eclipse makefile 问题：

我写了这个脚本来做到这一点。希望它可以帮助某人：

```
#!/bin/bash
CURRENT_PATH=$PWD
DEBUG_FOLDER_PATH=$CURRENT_PATH/Debug
TOOLCHAIN_PATH=/home/khan/carambola.pristine/staging_dir/toolchain-mipsel_r2_gcc-4.7-linaro_uClibc-0.9.33.2/bin

cd $DEBUG_FOLDER_PATH

export CWD=$DEBUG_FOLDER_PATH
export PWD=$DEBUG_FOLDER_PATH
export PATH=$TOOLCHAIN_PATH:$PATH

echo $CWD
echo $PWD
echo $PATH

make -k -j5 $1 $2 $3 $4 
```

但是，我仍在寻找一种以某种方式增加内部版本号的方法。任何帮助，将不胜感激。

谢谢

# html - 你能用css设计html表单按钮吗？

> ID：14950238
> 
> 赞同：28
> 
> 时间：2013-02-19T05:08:47.320
> 
> 标签：html, css, forms

我不喜欢默认的按钮样式。真的很无聊。我在用

```
<input type="submit"> 
```

类型按钮。我可以在css中以某种方式设计这些样式吗？如果没有，我猜另一种方法是使用 div 代替，并将其设为链接。你如何使这些与表单一起工作？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-19T05:15:27.607

您可以通过 CSS 轻松实现您的期望：-

**HTML**

```
<input type="submit" name="submit" value="Submit Application" id="submit" /> 
```

**CSS**

```
#submit {
    background-color: #ccc;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius:6px;
    color: #fff;
    font-family: 'Oswald';
    font-size: 20px;
    text-decoration: none;
    cursor: pointer;
    border:none;
}

#submit:hover {
    border: none;
    background:red;
    box-shadow: 0px 0px 1px #777;
} 
```

[**演示**](http://jsfiddle.net/ZbZ3r/6/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-19T05:12:07.863

是的，这很简单：

```
input[type="submit"]{
  background: #fff;
  border: 1px solid #000;
  text-shadow: 1px 1px 1px #000;
} 
```

我建议给它一个 ID 或一个类，以便您可以更轻松地定位它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T05:12:57.113

是的，您可以专门针对那些使用`input[type=submit]`例如

```
.myFormClass input[type=submit] {
  margin: 10px;
  color: white;
  background-color: blue;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T05:18:41.600

您可以通过这种方式直接创建自己的样式：

```
 input[type=button]
 { 
//Change the style as you like
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-21T14:11:42.830

您可能要添加：

```
-webkit-appearance: none; 
```

如果您需要它在 Mobile Safari 上看起来一致...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T05:11:39.767

将以下样式写入相同的 html 文件头部分或写入 .css 文件

```
<style type="text/css">
.submit input
    {
    color: #000;
    background: #ffa20f;
    border: 2px outset #d7b9c9
    }
</style>

<input type="submit" class="submit"/> 
```

.submit - 在 css 中。表示类，所以我创建了具有一组属性的提交类，
并使用类属性将该类应用于提交标签

# c# - 为什么选择 IList 继承 IEnumerable 和 IEnumerable 再次

> ID：14950240
> 
> 赞同：1
> 
> 时间：2013-02-19T05:09:02.743
> 
> 标签：c#, .net, generics, ienumerable

偶然在MSDN上看了一下[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)，[`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)看到这两个接口的定义是：

```
public interface ICollection<T> : IEnumerable<T>, IEnumerable
public interface IList<T> : ICollection<T>, IEnumerable<T>, IEnumerable 
```

注意`ICollection<T>`继承自`IEnumerable<T>`and `IEnumerable`，没关系。`IList<T>`继承自，`ICollection<T>`但为什么`IList<T>`必须再次继承？`IEnumerable<T>``IEnumerable`

这有什么理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:13:22.400

文档以这种方式生成，因此您可以查看类型实现的接口，而无需通过接口继承层次结构遵循传递链接。

# c - 指向另一个结构的指针，从文件中写入和读取它会产生 SegFault

> ID：14950241
> 
> 赞同：3
> 
> 时间：2013-02-19T05:09:04.560
> 
> 标签：c, file, pointers, segmentation-fault, structure

我正在通过 Learn C The Hard Way 来提高我的 C 技能，目前我在[第 17 次练习](http://c.learncodethehardway.org/book/ex17.html)中。

我正在做“额外学分”部分。使该页面上给出的数据库代码得到我正在尝试

“更改代码以接受 MAX_DATA 和 MAX_ROWS 的参数，将它们存储在 Database 结构中，并将其写入文件，从而创建一个可以任意大小的数据库”

因此，我注释掉了 #define 指令，并按照给定的方式更改了 Address 和 Database 结构：

```
struct Address {
    int id;
    int set;
    char *name;
    char *email;
};

struct Database {
    int MAX_DATA;
    int MAX_ROWS;
    struct Address *rows;
}; 
```

这样，我可以从用户那里获取 MAX_DATA 和 MAX_ROWS 参数，以根据他的喜好创建数据库。我在代码中更改的其他内容是——

Database_create 函数：

```
void Database_create(struct Connection *conn, int MAX_DATA, int MAX_ROWS)
{
        int i = 0;
        conn->db->MAX_DATA = MAX_DATA;
        conn->db->MAX_ROWS = MAX_ROWS;
        conn->db->rows = malloc(sizeof(struct Address) * MAX_ROWS);
        for(i = 0; i < MAX_ROWS; i++) {
                struct Address addr = {.id = i, .set = 0};
                conn->db->rows[i] = addr;
        }
} 
```

我得到“无效读取 4 个字节”的部分，SegFault 是：

```
void Database_set(struct Connection *conn, int id, const char *name, const char *email)
{
    struct Address *addr = &conn->db->rows[id];
    int MAX_DATA = conn->db->MAX_DATA;
    if(addr->set) die("Already set, delete it first");
    /* This if statement gives error for addr->set */
    addr->set = 1;
    addr->name = malloc(sizeof(char) * MAX_DATA);
    addr->email = malloc(sizeof(char) * MAX_DATA);
    // WARNING: bug, read the "How To Break It" and fix this
    char *res = strncpy(addr->name, name, MAX_DATA);
    // demonstrate the strncpy bug
    if(!res) die("Name copy failed");

    res = strncpy(addr->email, email, MAX_DATA);
    if(!res) die("Email copy failed");
} 
```

我知道这段代码片段不是全部，但我不能在这里粘贴整个代码。所以，我把它贴在这里： http: [//pastebin.com/EbKShT3r](http://pastebin.com/EbKShT3r) 我可以使用“c”选项为第一次运行创建和编写数据库。但是，要使用 's' 选项添加条目，则会发生分段错误。

**编辑**：所以，最后，我让这个程序使用@WhizCraig给出的解决方案但是，为了释放内存，这是我正在尝试的：

```
void Database_close(struct Connection *conn)
{
    int i;
    if (conn) {
        int MAX_ROWS = conn->db->MAX_ROWS;
        for (i=0; i<MAX_ROWS; i++) {
            struct Address *row = conn->db->rows+i;
            if (row->set) {
                free(row->name);
                free(row->email);
            }
        }
        free(conn->db->rows);
        if(conn->file) fclose(conn->file);
        if(conn->db) free(conn->db);
        free(conn);
    }
} 
```

而且，我在 Valgrind 中遇到错误，内存*泄漏*。我不明白上面代码中的错误。但是，主要问题似乎已解决:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T16:33:27.797

I modified the code Rohit posted here: [http://pastebin.com/MvLXkDCz](http://pastebin.com/MvLXkDCz) to fix the memory leaks. It runs through Valgrind without any errors. The relevant modifications are posted below:

```
void Database_close(Connection *conn)                                                 
{                                                                                     
  size_t i;                                                                           
  if(conn) {                                                                          
    if(conn->db && conn->db->rows) {                                                  
      for(i = 0; i < conn->db->max_rows; i++) {                                       
        Address *cur = conn->db->rows[i];                                             
        free(cur->name);                                                              
        free(cur->email);                                                             
        free(cur);                                                                    
      }                                                                               
      free(conn->db->rows);                                                           
    }                                                                                 
    if(conn->file) fclose(conn->file);                                                
    if(conn->db) free(conn->db);                                                      
    free(conn);                                                                       
  }                                                                                   
}   

void Database_delete(Connection *conn, int id)                                        
{                                                                                     
  conn->db->rows[id]->set = 0;                                                        
} 
```

You can find the complete program here:[https://github.com/sookoor/Learn-C-the-Hard-Way/blob/master/ex17.c](https://github.com/sookoor/Learn-C-the-Hard-Way/blob/master/ex17.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:57:30.787

```
struct Address {
    int id;
    int set;
    char *name;
    char *email;
};

struct Database {
    int MAX_DATA;
    int MAX_ROWS;
    Address **rows; // USE ARRAY OF POINTERS
};

void Database_create(Connection *conn, int MAX_DATA, int MAX_ROWS)
{
        int i = 0;
        conn->db->MAX_DATA = MAX_DATA;
        conn->db->MAX_ROWS = MAX_ROWS;
        conn->db->rows = (Address**)malloc(sizeof(Address*) * MAX_ROWS);

        for(i = 0; i < MAX_ROWS; i++) {
                conn->db->rows[i] = (Address*)malloc(sizeof(Address));
                conn->db->rows[i]->id = i;
                conn->db->rows[i]->set = 0;
        }
}

void Database_set(Connection *conn, int id, const char *name, const char *email)
{
    if (!(conn && conn->db && conn->db->rows && conn->db->rows[id])) return;

    Address *addr = conn->db->rows[id];
    int MAX_DATA = conn->db->MAX_DATA;

    if(addr->set == 0) die("Already set, delete it first");

    addr->set = 1;
    addr->name = malloc(sizeof(char) * MAX_DATA);
    addr->email = malloc(sizeof(char) * MAX_DATA);

    char *res = strncpy(addr->name, name, MAX_DATA);
    if(!res) die("Name copy failed");

    res = strncpy(addr->email, email, MAX_DATA);
    if(!res) die("Email copy failed");
}

void Database_close(Connection *conn)
{
        size_t i;
        if(conn) {
                if (con->db && conn->db->rows) {
                        for (i = 0; i < conn->db->MAX_ROWS; i++) {

                                Address *cur = conn->db->rows[i];
                                free(cur);

                        }
                }

                if(conn->file) fclose(conn->file);
                if(conn->db) free(conn->db);
                free(conn);
        }
} 
```

# iphone - 如何从 View1 更改 View2 的 UITextField 文本？

> ID：14950243
> 
> 赞同：0
> 
> 时间：2013-02-19T05:09:14.297
> 
> 标签：iphone, objective-c, ios6

我正在尝试从 ViewController 中的 SecondViewController 更改 UITextView.text。如果它是 SecondViewController 中的 NSString 类型，我可以这样做：

```
SVC.string = @"test"; 
```

问题是：

*   messageBox.text 没有改变
*   SVC.messageBox.text 返回（空）

ViewController.m 中的方法之一：

```
 SecondViewController *SVC = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
    SVC.messageBox.text = @"changed";
    NSLog(@"SVC: %@", SVC.messageBox.text); // result = (null)

    [self presentViewController:SVC animated:YES completion:NULL]; 
```

SecondViewController.h：

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

@property (nonatomic) IBOutlet UITextView *messageBox;

@end 
```

SecondViewController.m：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.messageBox.text = @"first";
} 
```

如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:34:22.240

试试这个，ViewController.m 中的方法之一：

```
SecondViewController *SVC = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
SVC.strMessage= @"changed";
[self presentViewController:SVC animated:YES completion:NULL]; 
```

SecondViewController.h：

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{
  IBOutlet UITextView *messageBox;
}
@property (nonatomic) NSString *strMessage;
@end 
```

SecondViewController.m：@synthesize strMessage；

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

self.messageBox.text = strMessage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:41:30.447

您也可以使用委托来执行此操作。

例子：

Viewcontroller2nd.h

```
@protocol SecondViewControllerDelegate <NSObject>
@optional
-(void) changeLabel:(NSString*)str;
@end

@interface ViewController2nd : UIViewController{

    IBOutlet UIButton *bttn;
    id <SecondViewControllerDelegate> delegate;

}

@property (retain) id delegate;

@end 
```

Viewcontrollerone.h

```
@interface ViewController : UIViewController <SecondViewControllerDelegate>
{
    IBOutlet UILabel *lbl;

}
-(IBAction)passdata:(id)sender;

@end 
```

视图控制器.m

```
-(void) changeLabel:(NSString*)str{
    lbl.text = str;
} 
```

有关代表的更多信息：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:16:01.810

设置`@property (nonatomic) IBOutlet UITextView *messageBox;`为`@property (nonatomic, strong) IBOutlet UITextView *messageBox;`并检查您是否已将其连接到`UItextView`. 并且不要在`viewDidLoad`. 您可以尝试的另一件事是：

```
SecondViewController *SVC = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
[self presentViewController:SVC animated:YES completion:NULL];
SVC.messageBox.text = @"changed";
NSLog(@"SVC: %@", SVC.messageBox.text); // result = (null) 
```

连同上面提到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:44:42.570

just property-synthesize string andf 只是将此字符串分配给`yourTextView.text`. 例如见下文..

```
@interface SecondViewController : UIViewController{
       NSString *strMsgText;
}
@property(nonatomic, retain)    NSString *strMsgText;
@end

@implementation SecondViewController
@synthesize strMsgText; 
```

之后，当您当时展示 SecondViewController 时，分配您的值，如下所示..

```
 SecondViewController *SVC = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
    SVC.strMsgText = @"changed";
    [SVC.strMsgText retain];

    [self presentViewController:SVC animated:YES completion:NULL]; 
```

并以将该字符串分配给的`viewDidLoad:`方法，如下所示...`SecondViewController``messageBox(TextView)`

```
- (void)viewDidLoad
{
     messageBox.text = strMsgText;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:44:50.293

您的代码的问题是您访问尚未在内存中创建的 uicontrols。您必须像这样更改语句的执行顺序...

```
 SecondViewController *SVC = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

    [self presentViewController:SVC animated:YES completion:NULL];

    SVC.messageBox.text = @"changed";
    NSLog(@"SVC: %@", SVC.messageBox.text); 
```

# php - 从 php 中的 url 获取文件路径？

> ID：14950249
> 
> 赞同：0
> 
> 时间：2013-02-19T05:09:40.887
> 
> 标签：php, codeigniter, curl, facebook-php-sdk, filepath

我正在使用 php sdk 将图像上传到 facebook 相册。为此，我需要提供图像的真实路径。如果我的服务器可以提供图像的真实路径并上传到 facebook 工作正常。但在这里我想通过使用外部图像 URL 将图像上传到 Facebook 相册。即，我想使用以下图片 URL 将图片上传到 fb。[http://i.nokia.com/r/image/view/-/2003984/highRes/2/-/Lumia-620-Smart-Shoot.jpg](http://i.nokia.com/r/image/view/-/2003984/highRes/2/-/Lumia-620-Smart-Shoot.jpg)

```
$this->facebook->setFileUploadSupport(TRUE);

           $photo = $this->facebook->api('/*********/photos', 'POST', array(
                      'access_token' => $this->config->item('facebook_page_access_token'),
                      'source' => '@' .$imagePath,
                      'message' => "description text"
                          )
          ); 
```

这是我将图像上传到 FB 的代码。在这里如何通过在 php 中使用给定的 URL 来获取图像的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:41:08.877

您可以使用“url”参数从外部来源发布照片。

```
 $photo = $this->facebook->api('/*********/photos', 'POST', array(
      'access_token' => $this->config->item('facebook_page_access_token'),
      'url' => $imagePath,
      'message' => "description text"
       )
); 
```

签出以下文件。

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

# php - Javascript 函数仅返回 1 个值而不是值数组

> ID：14950250
> 
> 赞同：0
> 
> 时间：2013-02-19T05:09:44.177
> 
> 标签：php, javascript

我正在尝试使用 iframe 找出页面加载时间。我有一个 url 数组，我将其放入一个 iframe 数组中，然后我使用 javascript 获取每个 iframe 的加载时间。我的问题 - 我的时间值不是一个数组，所以它只显示 1 个值（它显示第 1 帧的值，然后在第二帧上用第 2 帧的值替换它）。

```
 <html>
    <body>   
    <center>
    <?php 
    $url = array('example.com', 'example2.com');
    foreach($url as $i){ 
    ?>
    <iframe onload="pageloadingtime();" width="505" height="505" scrolling="no" security="restricted" src="<?php echo "http://www.".$i; ?> "></iframe>
    <?php
    } 
    ?>
    <div id="loadingtime"></div>
    </center>
    </body>
    <script type="text/javascript">    
    beforeload = (new Date()).getTime();
    function pageloadingtime()
    {
        afterload = (new Date()).getTime();
        secondes = (afterload-beforeload)/1000;
        document.getElementById("loadingtime").innerHTML = "<font color='red'>(Page took " + secondes + " seconds to load)</font>";
    }   
    </script>
    </html> 
```

在这段代码中，我创建了一个 url 数组（$url），运行一个 foreach 循环，生成与 url 一样多的 iframe，然后使用 javascript 我计算页面加载时间。获得加载时间后，我将其放入“加载时间”div。但就像我说的那样，它只放置 1 个值而不是放置一个值数组。

将其更改为此，但现在它不显示任何内容：

```
beforeload = (new Date()).getTime();
function pageloadingtime()
{
    var afterload = (new Date()).getTime();
    secondes = (afterload-beforeload)/1000;
    document.getElementById("loadingtime1").innerHTML += "<font color='red'>(Page took " + secondes + " seconds to load)</font><br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:14:56.263

附加到状态 div 而不是覆盖它：

```
document.getElementById("loadingtime").innerHTML += "<font color='red'>(Page took " + secondes + " seconds to load)</font><br>"; 
```

此外，将`afterLoad`and声明`secondes`为函数的本地：

```
var afterload = (new Date()).getTime();
var secondes = (afterload-beforeload)/1000; 
```

# java - 创建弹出框架并管理多个框架

> ID：14950251
> 
> 赞同：0
> 
> 时间：2013-02-19T05:09:46.763
> 
> 标签：java, swing

我正在尝试在 Java 中创建一个类项目。

我有一个`JFrame`从用户那里接受一些输入的东西，我想创建一种弹出框，它将显示来自输入的图形。

第二帧只会显示一个图表。我很难意识到这一点。

我正在使用 GUI builder(Netbeans) 作为主程序`JFrame`，起初我试图创建一个空的`JPanel`并将其设置为从按钮可见，但这不起作用，我很快发现我做不到。

我显然必须使用一个`JFrame`或其他容器（我错了吗？）。

所以现在我在想，我将如何将信息传递到第二个窗格以获取图形信息？

无论如何，我只是在寻找一些输入或好的做法来实现这一点。我现在正在阅读，`CardLayout`但这不是我想要的解决方案，因为它需要我创建一个窗格来保存图形组件。我只希望图形按钮打开图形窗格（或框架）并在用户想要时关闭。主框架仅用于获取图形的输入。感谢您的任何意见。

很快就会有一个问题，关于我如何在 Java 中实际绘制一些东西，但我一次只能解决一个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:26:00.160

您可以为弹出的 JFrame 创建另一个类，这可能是最好的主意。您可以执行以下操作：

```
public class PopupFrame extends JFrame{

    //Declare variable you wish to use for your graph here.

    public PopupFrame(/* Pass in variable(s) that you will need to display the information. */)
    {
        super("Graph");

        //Set the graph variable equal to the variable to passed into the constructor.

        add(/* Put in the variable that you just initialized above and that you declared outside of the constructor. */);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(500,500);// Change to the dimension that you want.
        setLocation(50,50);// You could also have the constructor give it these values if you want to center it on your parent window.
        setVisible(true);
    }
} 
```

在你的主要课程中，有类似的东西：

```
PopupFrame f = new PopupFrame(/* Graph variable(s) passed in here. */);
f.show(); 
```

希望这对您有所帮助。祝你好运！

# iphone - UILabel 的 numberOfLines 在单元格中不起作用

> ID：14950252
> 
> 赞同：7
> 
> 时间：2013-02-19T05:09:58.793
> 
> 标签：iphone, ios, uitableview, uilabel, ios6

全部，

我对iphone编程很陌生。在下面的代码中，我希望文本显示注释标签中的所有文本，但现在它正在截断它。numberofLines 也无法正常工作。现在它正在这样做。“我的名字是 Fred，我还没有死……”但我希望它显示全文“我的名字是 Fred，我还没有死，所以让我活着”，即使它必须在多行上。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 80.0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = nil;

cell = [self.allCells objectForKey:[NSNumber numberWithInt:indexPath.row]];

if(!cell)
{
    cell = [[[NSBundle mainBundle] loadNibNamed:@"UserCell2" owner:nil options:nil] lastObject];
    cell.backgroundColor = [UIColor clearColor];
    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    [self.allCells setObject:cell forKey:[NSNumber numberWithInt:indexPath.row]];
}

GSAsynImageView *imgView = (GSAsynImageView*)[cell viewWithTag:1000];
UILabel *lblTitle = (UILabel*)[cell viewWithTag:1001];
UILabel *lblComment = (UILabel*)[cell viewWithTag:1003];
UILabel *lbltime = (UILabel*)[cell viewWithTag:1004];

//lblComment setLineBreakMode:NSLineBreakByWordWrapping];
//lblComment.numberOfLines = 0;
//lblComment.lineBreakMode = UILineBreakModeCharacterWrap;

if(self.arrComments.count==0)
{
    imgView.hidden = YES;
    lblTitle.text = nil;
    lblComment.text = nil;
    lbltime.text = nil;
    if(indexPath.row==1)lblTitle.text = @"No comments yet";
}
else
{
    imgView.hidden = NO;

    NSDictionary *dcUser = [self.arrComments objectAtIndex:indexPath.row];

    NSString *strBio = [dcUser objectForKey:@"CommentTxt"];
    NSString *strDisplayName = [dcUser objectForKey:@"CommenterDisplayName"];

    NSString *imgName = [dcUser objectForKey:@"ImageName"];
    NSString *usernamex = [dcUser objectForKey:@"CommenterUserName"];

    if([imgName isKindOfClass:[NSString class]])
    {
        if([imgName rangeOfString:@"facebook"].location!=NSNotFound || [imgName rangeOfString:@"twimg"].location!=NSNotFound)
            [imgView loadImageFromPath:imgName];
        else
            [imgView loadImageFromPath:[NSString stringWithFormat:@"%@images/%c/%@/50x50%@",WEBSERVER,[usernamex characterAtIndex:0],usernamex,imgName]];
    }

    lblTitle.text = strDisplayName;
    lblComment.text = strBio;
    lbltime.text = [self getDateTitle:[dcUser objectForKey:@"Date"]];

}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:25:44.817

试试下面的代码并添加到你的单元格中..

```
UILabel * lblTitle = [[UILabel alloc]init];
[lblTitle setFrame:CGRectMake(110, 31, 200, 50)];        
lblTitle.text = @"your Text ";
lblTitle.lineBreakMode = UILineBreakModeWordWrap;// add this line 
lblTitle.numberOfLines = 0;// add this  line
lblTitle.font = [UIFont fontWithName:@"Helvetica" size:12]; 
```

有关更多详细信息，请参阅我的博客以及[此](http://parasjoshi3.blogspot.in/2012/11/set-uilabel-with-adjust-content-text.html)链接中的这篇文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T10:29:21.880

试试这个...

```
UILabel * label = [[UILabel alloc]init];
    [label setFrame:CGRectMake(cell.frame.origin.x , cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
    label.text = @" Text to be displayed in label ";
    label.lineBreakMode = UILineBreakModeWordWrap ;// Wrap at word boundaries
    label.numberOfLines = 0;// this line include multiple lines
    [cell addSubview:label]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:15:55.080

我认为这可能是因为您想在标签上显示的字符串的大小超过了该标签的大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:25:33.677

您可以使用 UILabel 的属性来增加行数。像`UILabel* para = [[UILabel alloc]init];`

```
para.numberoOfLines = 10; 
```

并尝试改变`para.lineBreakMode`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:25:41.057

最简单的方法是在故事板或 xib 中。您可以将您的标签（以及您想要的任何其他内容）添加到您拥有表格视图时自动获得的自定义单元格。确保您的标签设置了特定的宽度，并且它对单元格的顶部和底部有限制（确保将行数设置为 0）。如果你有这些，标签将随着你在 tableView:heightForRowAtIndexPath: 中设置的单元格的高度展开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T05:30:39.047

增加标签的高度并将特定标签的行数设为 2。

试试这个代码，

```
lblComment.numberofLines = 2; 
[lblComment setFrame:CGRectMake(100,20,200,70)]; 
```

# vb.net - 从 VB.net 中的微控制器读取实时 RAM 变量

> ID：14950257
> 
> 赞同：-2
> 
> 时间：2013-02-19T05:10:29.190
> 
> 标签：vb.net, debugging, embedded, microcontroller, jtag

当程序在微控制器上运行时，我想通过 JTAG 端口实时读取全局变量。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:29:43.713

JTAG 仅定义了一个物理接口，它没有描述特定处理器的片上调试功能，该处理器可能支持也可能不支持执行期间的访问。

此外，是否可以在 VB 中完成并不是真正的问题，重要的问题是您为 JTAG 接口使用的硬件设备和/或 I/O 端口，以及通过 .Net 访问的驱动程序和 API 是否可用。也就是说，无论如何，VB.Net 都不是我选择的第一种语言。

一个好的起点也许是[OpenOCD](http://openocd.sourceforge.net/)，尽管它不是特定于 .Net 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:55:49.427

“几乎在线”可能是可行的，具体取决于 JTAG 实现。通常，读取内存的 JTAG 活动是通过从微单元中窃取周期（或者有时甚至将指令插入流水线）来实现的。我不确定是否有一个允许通过 JTAG 完全透明地访问内存的微控制器。

“您需要做的所有事情”就是了解 JTAG 实现，知道变量的位置，并通过以适当的方式摆动 JTAG 引脚来发出“内存读取”命令。这不是一项小任务，这就是为什么专业工程师愿意为执行这项任务的工具支付（有时是大量）金钱。

供应商提供的免费（有限）工具链通常也可以执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:46:55.560

是的，我想这是可能的。但是您需要驱动 JTAG 端口（这听起来很痛苦！）并确切地知道数据在芯片上的存储位置，以及格式是什么。

# android - 如何从 Swiffy 转换的 flash 本地访问动画内容？

> ID：14950258
> 
> 赞同：-1
> 
> 时间：2013-02-19T05:10:31.080
> 
> 标签：android, html, android-webview, google-swiffy

我有一个使用 SWIFFY 转换为 HTML5 文件的 Flash 动画文件。这些文件正在播放`WebView`，它们可以正常播放。

HTML5的动画很少，我想在Android本地在触摸事件上控制这些小动画。我想知道如何将这些动画暴露给 Android 层，还有其他需要的，比如 Javascript 或 JQuery 吗？

我想补充一点，我对 HTML5、CSS、JavaScript 和 JQuery 完全陌生。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T02:35:05.953

如果我理解这个问题，你不能那样做，因为在 swiffyobject 中定义的动画成为一个更大的 svg 的一部分，然后由 swiffy 运行时管理。运行时本身只公开了一个小的 API，这有点受限制。我没有办法说“我的 swiffy.someAnimationWithin.doSomething()”

您可以做的是使用 stage.setFlashVars 将“消息”传递给您的 ActionScript，这当然也被翻译并由运行时播放。在此 ActionScript 中，使用 onEnterFrame 检查这些变量/消息，然后使用 ActionScript 更改它们的状态。动画还可以通过 ActionScript 的 getURL("javascript: mynamespaceObj.doSomethingScripty()") 或我相信 AS3 的 URLRequest(...) 与您的 JavaScript 对话

# python - 将unicode字符串字典转换为python中的字典

> ID：14950260
> 
> 赞同：53
> 
> 时间：2013-02-19T05:10:47.790
> 
> 标签：python, unicode, dictionary

我有 unicode `u"{'code1':1,'code2':1}"`，我想要字典格式。

我想要它的`{'code1':1,'code2':1}`格式。

我试过`unicodedata.normalize('NFKD', my_data).encode('ascii','ignore')`了，但它返回字符串而不是字典。

谁能帮我？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-19T05:19:49.663

您可以使用内置`ast`包：

```
import ast

d = ast.literal_eval("{'code1':1,'code2':1}") 
```

关于 ast 模块中函数 literal_eval 的帮助：

> 文字评估（节点或字符串）
> 
> 安全地评估表达式节点或包含 Python 表达式的字符串。提供的字符串或节点只能由以下 Python 文字结构组成：字符串、数字、元组、列表、字典、布尔值和无。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T05:19:04.967

您可以使用`literal_eval`. 您可能还想确保您正在创建一个 dict 而不是其他东西。而不是`assert`，使用您自己的错误处理。

```
from ast import literal_eval
from collections import MutableMapping

my_dict = literal_eval(my_str_dict)
assert isinstance(my_dict, MutableMapping) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-08T09:31:15.850

**编辑**：原来我的假设是不正确的；因为键没有包含在双引号 (") 中，所以字符串不是 JSON。 有关此问题的一些方法，[请参见此处](https://stackoverflow.com/questions/4033633/handling-lazy-json-in-python-expecting-property-name)。

~~我猜你所拥有的可能是[JSON](http://json.org/)，也就是 JavaScript Object Notation。~~

您可以使用 Python 的内置`json`模块来执行此操作：

```
import json
result = json.loads(u"{'code1':1,'code2':1}")   # will NOT work; see above 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-29T22:57:01.303

从文件中读取 json 时出现 unicode 错误。所以这个对我有用。

```
import ast
job1 = {}
with open('hostdata2.json') as f:
  job1= json.loads(f.read())

f.close()

#print type before converting this from unicode to dic would be <type 'unicode'>

print type(job1)
job1 =  ast.literal_eval(job1)
print "printing type after ast"
print type(job1)
# this should result <type 'dict'>

for each in job1:
 print each
print "printing keys"
print job1.keys()
print "printing values"
print job1.values() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:19:44.340

您可以使用内置`eval`函数将字符串转换为 python 对象

```
>>> string_dict = u"{'code1':1, 'code2':1}"
>>> eval(string_dict)
{'code1': 1, 'code2': 1} 
```

# sql - DB2 - 递增 CURRENT_DATE

> ID：14950261
> 
> 赞同：1
> 
> 时间：2013-02-19T05:10:51.727
> 
> 标签：sql, date, db2

我只是想将 expire_date_membership 设置为当前日期后 2 年的日期，但不要缝合以使语法正确。有人可以帮忙吗？

```
CREATE TABLE Members (
   pid INTEGER NOT NULL, 
   registration_date_membership DATE DEFAULT CURRENT_DATE, 
   expire_date_membership DATE DEFAULT (CURRENT_DATE + 24 MONTHS), 
   membership_fees DOUBLE, 
   overdue_fees DOUBLE, 
   PRIMARY KEY(pid),
   FOREIGN KEY (pid) REFERENCES Person) 
```

错误信息：

> DB21034E 该命令被作为 SQL 语句处理，因为它不是有效的命令行处理器命令。在 SQL 处理期间，它返回： SQL0104N 在“ate_memebership DATE”之后发现了意外的标记“DEFAULT”。预期的标记可能包括：“CHECK”。SQLSTATE=42601

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:16:19.737

您缺少 WITH 关键字。

您的查询应该是：

```
CREATE TABLE Members (
   pid INTEGER NOT NULL, 
   registration_date_membership DATE WITH DEFAULT CURRENT_DATE, 
   expire_date_membership DATE WITH DEFAULT (CURRENT_DATE + 24 MONTHS), 
   membership_fees DOUBLE, 
   overdue_fees DOUBLE, 
   PRIMARY KEY(pid),
   FOREIGN KEY (pid) REFERENCES Person) 
```

更多：[默认值](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.intro/src/tpc/db2z_defaultvalues.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T12:41:04.740

希望这会对您有所帮助，但它已更改为 TIMESTAMP，而不是 DATE 数据类型。

> registration_date_membership **TIMESTAMP** WITH DEFAULT **CURRENT TIMESTAMP** , expire_date_membership **TIMESTAMP** WITH DEFAULT **TIMESTAMPADD(256,40,TIMESTAMP((CURRENT TIMESTAMP** )),

# php - 在 php 中创建错误处理程序类

> ID：14950267
> 
> 赞同：3
> 
> 时间：2013-02-19T05:11:36.490
> 
> 标签：php, exception, error-handling

我最近一直在询问有关异常和处理异常等的问题，[最近在这个问题中对我进行了最好的解释。](https://stackoverflow.com/questions/14946338/writing-functions-that-deal-with-exceptions#comment20978551_14946338)我现在的问题是我将如何使用

```
set_exception_handler(); 
```

在一个类中设置 php 中的错误处理类，当抛出错误时由该类处理。如定义所述：

> 如果在 try/catch 块中未捕获到异常，则设置默认异常处理程序。调用 exception_handler 后将停止执行。

我在想我可以做类似的事情：

```
class Test{
    public function __construct(){
        set_exception_handler('exception');
    }

    public function exception($exception){
        echo $exception->getMessage();
    }
} 
```

但问题是，如果用户正在设置应用程序或使用应用程序中的任何 API，他们必须做一个整体：`new Test();`

那么我如何编写一个异常处理程序类：

1.  抛出异常时自动调用以处理“未捕获”异常。
2.  以可扩展的 OOP 方式完成。

我所展示的方式是我能想到的唯一方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T05:18:36.017

为了让您的课程正常工作，您的构造函数中的行应该是：

```
// if you want a normal method        
set_exception_handler(array($this, 'exception'));

// if you want a static method (add "static" to your handler method
set_exception_handler(array('Test', 'exception')); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T05:37:16.847

每个人都认为使用 set_exception_handler 会捕获 PHP 中的所有错误，但事实并非如此，因为 set_exception_handler 没有处理某些错误，因此必须以正确的方式处理所有类型的错误：

```
 //Setting for the PHP Error Handler
 set_error_handler( call_back function or class );

 //Setting for the PHP Exceptions Error Handler
 set_exception_handler(call_back function or class);

 //Setting for the PHP Fatal Error
 register_shutdown_function(call_back function or class); 
```

通过设置这三个设置，您可以捕获 PHP 的所有错误。

# jquery - Jquery 在新选项卡中打开 (_blank)

> ID：14950269
> 
> 赞同：7
> 
> 时间：2013-02-19T05:11:50.720
> 
> 标签：jquery

我已经根据其他 StackOverflow 问题/答案设置了一些 Jquery。该脚本的目的是使整个 div 成为基于该 div 内的任何 href 标记的链接。

这很好用，但是我需要将其设置为 _blank 才能在新选项卡中打开。我试过下面没有运气。

```
$(document).ready(function() {
    $(".product-item").click(function() {
        $(this).target = "_blank";
        window.location = $(this).find("a").attr("href");
        return false;
    });
}); 
```

编辑

感谢您的帮助，但这些答案都没有真正起作用。如果有人可以粘贴实际有效的完整代码，而不是不测试它是否有效的小片段。谢谢。

编辑 2

感谢**kristinalim**提供了一个完整的工作解决方案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-19T05:40:38.343

在页面上设置链接需要结合@Ravi 和@ncksllvn 的答案：

```
// Find link in $(".product-item") and set "target" attribute to "_blank".
$(this).find("a").attr("target", "_blank"); 
```

要在另一个窗口中打开页面，请参阅以下问题：[jQuery click _blank](https://stackoverflow.com/questions/2629473/jquery-click-blank)并查看[此参考](http://www.w3schools.com/jsref/met_win_open.asp)以`window.open`获取自定义选项。

**更新**：

你需要一些东西：

```
$(document).ready(function() {
  $(".product-item").click(function() {
    var productLink = $(this).find("a");

    productLink.attr("target", "_blank");
    window.open(productLink.attr("href"));

    return false;
  });
}); 
```

注意 的用法[`.attr()`](http://api.jquery.com/attr/)：

```
$element.attr("attribute_name")                   // Get value of attribute.
$element.attr("attribute_name", attribute_value)  // Set value of attribute. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T05:15:15.283

替换这一行：

```
$(this).target = "_blank"; 
```

和：

```
$( this ).attr( 'target', '_blank' ); 
```

这会将其 HREF 设置为 _blank。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:15:26.687

您不能将目标属性设置为 div，因为 div 不知道如何处理 http 请求。而不是为链接标签设置目标属性。

```
$(this).find("a").target = "_blank";
window.location= $(this).find("a").attr("href") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T05:23:57.000

`window.location` **总是**指当前窗口的位置。更改它只会影响**当前**窗口。

可以做的一件事是在将其`target`属性设置为后强制单击链接`_blank`：

*检查这个：* [http ://www.techfoobar.com/2012/jquery-programmatically-clicking-a-link-and-forcing-the-default-action](http://www.techfoobar.com/2012/jquery-programmatically-clicking-a-link-and-forcing-the-default-action)

*免责声明：*这是我的博客。

# android - 当我的应用程序和日历应用程序发生通知时，如何监听？

> ID：14950271
> 
> 赞同：1
> 
> 时间：2013-02-19T05:12:06.863
> 
> 标签：android, android-intent, broadcastreceiver, android-notifications

我希望能够在我的应用程序和日历应用程序发生通知时收听（BroadcastReceiver？），即使用户没有与之交互并且即使屏幕关闭也是如此。

我还希望能够知道用户何时滑动通知。

我知道[AccessibilityEvent](http://developer.android.com/reference/android/view/accessibility/AccessibilityEvent.html)可以启用做第一件事（侦听通知），但它不能做第二件事（[无法侦听通知解除](http://code.google.com/p/android/issues/detail?id=18763)）。还有其他方法吗？

我该怎么做？当我自己的通知发生（它们用于日历事件）并且知道通知仍在通知托盘中时，我至少可以调用我的应用程序/侦听器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:11:36.090

您可以收听所有日历通知信息。你怎么说，你应该使用 AccessibilityService 并切换通知类型。然后，如果它来自谷歌日历，你会比较它的包名称。

```
 public void onAccessibilityEvent(AccessibilityEvent event) {

    try {

        switch (event.getEventType()) {
        case AccessibilityEvent.TYPE_VIEW_CLICKED:

            Log.d(LOG_SERVICE, "Click");

            break;
        case AccessibilityEvent.TYPE_VIEW_FOCUSED:

            Log.d(LOG_SERVICE, "Focused");

            break;
        case AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED:

            Log.d(LOG_SERVICE, "Ihas been received a not" + type);

            String pack = (String) event.getPackageName();
                            if (pack.equalsIgnoreCase("com.google.android.calendar")) {
                   //The event information.
                    }
            break;

        default:
            type = "otro";
            Log.d(LOG_SERVICE, "otro");

            break;
        }

        AccessibilityNodeInfo notinfo = event.getSource();
        if (notinfo != null) {
            doSomethingWithNodeInfo(notinfo);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

如果 Android 设备带有 ICS 或更多。如果应用程序开发人员设计的通知具有可访问性，您可以使用 AccessibilityNodeInfo。

# jquery - 如果条件为真，则使 div 可拖动？

> ID：14950273
> 
> 赞同：1
> 
> 时间：2013-02-19T05:12:08.360
> 
> 标签：jquery, jquery-ui, jquery-draggable

我有一个应该是可拖动的 div。下面是代码，

```
$( "#SpeedDraggable" ). draggable
({
    axis: "y",
    containment:'parent',
        drag: function(event, ui)
        {
           var Startpos = $(this).position();
           $("#SpeedText").text(184-Startpos.top).css('color','#DDDDDD');              
        },
    stop: function(event, ui) 
    {
       var Stoppos = $(this).position();
       $("#SpeedText").text(184-Stoppos.top).css('color','#DDDDDD');
    }
    }); 
```

要求是上述逻辑应该在这个if条件下发生

```
if($("#imgManualSetting_Pressed").is(":visible"))
{

} 
```

如果这个条件不成立，那么 div 不应该是可拖动的。请帮助我如何做到这一点......提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:52:49.300

```
$( "#SpeedDraggable" ). draggable
({
    axis: "y",
    containment:'parent',
    drag: function(event, ui)
    {
        if($("#imgManualSetting_Pressed").is(":visible"))
        {
            var Startpos = $(this).position();
                $("#SpeedText").text(184-Startpos.top).css('color','#DDDDDD');  
        }
        else
       {
                return false;            
       }                    
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:31:00.123

```
if($("#imgManualSetting_Pressed").is(":visible")) {
    // set to draggable widget
    $( "#SpeedDraggable" ).draggable({
        axis: "y",
        containment:'parent',
            drag: function(event, ui)
            {
               var Startpos = $(this).position();
               $("#SpeedText").text(184-Startpos.top).css('color','#DDDDDD');              
            },
        stop: function(event, ui) 
        {
           var Stoppos = $(this).position();
           $("#SpeedText").text(184-Stoppos.top).css('color','#DDDDDD');
        }
    });
}
else {
    // destroy draggable if not
    $( "#SpeedDraggable" ).draggable( "destroy" );
} 
```

# libgit2 - 为什么使用 kernel32.dll 的 GetProcAddress 的 libgit2 方法总是返回 0？

> ID：14950281
> 
> 赞同：0
> 
> 时间：2013-02-19T05:12:39.657
> 
> 标签：libgit2, libgit2sharp

我需要手动处理实际的加载/卸载`git2.dll`，而不是`[DllImport("git2")]`在 C# 中使用。我似乎在创建一个`IntPtr`用于引用存储在`libgit2`.

这是我`PluginManager`班级中的好东西，它们应该有助于促进手动加载、编组/委托（每当我修复这个扭结时）和卸载库。

```
public class PluginManager {
    public const string LIB = "Assets\\Plugins\\git2.dll";

    [DllImport( "kernel32.dll", CharSet = CharSet.Ansi )]
    public static extern IntPtr LoadLibrary( [In, MarshalAs( UnmanagedType.LPStr )] string lib );

    [DllImport( "kernel32.dll", CharSet = CharSet.Ansi, ExactSpelling = true, SetLastError = true )]
    public static extern IntPtr GetProcAddress( [In] IntPtr reference, [In, MarshalAs( UnmanagedType.LPStr )] string method );

    [DllImport( "kernel32.dll" )]
    public static extern bool FreeLibrary( [In] IntPtr reference );
} 
```

这是我尝试使用它们的地方：

```
//# Working; always non-zero.
IntPtr reference = PluginManager.LoadLibrary( PluginManager.LIB );

//# Should be valid -- LibGit2Sharp.Core.NativeMethods.cs calls this method, too.
//# Always returns IntPtr.Zero.
IntPtr methodReference = PluginManager.GetProcAddress( reference, "git_repository_open" ); 
```

库是否没有暴露于这种类型的加载？我尝试了本`LibGit2Sharp`机挂钩中存在的各种方法，但它们总是返回零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:17:04.393

似乎`git2.dll`已经损坏了出口名称，`git_repository_open`实际上也是如此`_git_repository_open@4`。[在对发生这种情况的原因进行了更多研究之后，根据This Post](http://forums.codeguru.com/showthread.php?462088-RESOLVED-GetProcAddress-failed&s=96531aaaf034ab631449495d3ca82242&p=1765423#post1765423)以及我在寻找修复程序时遇到的其他几个问题，似乎这些函数可能无法使用`extern "C"`或可能未使用`.def`文件导出。

我确实查看了一些`libgit2`代码，我看到`extern`在几个函数上使用了，但在其他函数上我根本没有看到 export 关键字，但它们仍然可以从`LigGit2Sharp`'s`NativeMethods.cs`类的外部访问。

虽然所有这些对我来说都是陌生的，但我确实找到了一篇非常有用的帖子，内容是关于附带的工具，该工具`Visual Studio`可让您查看所有导出的项目及其名称：[Dumpbin](http://msdn.microsoft.com/en-us/library/30e78zd0.aspx)。有了这个，我能够确定导出的名称，并使用`/OUT:filename`标志将它们保存到文件中：[PasteBin](http://pastebin.com/q1g72rSu)

使用我可以使用的所有导出名称，我只需要遵循我实际使用的函数调用，并将方法替换为`NativeMethods.cs`如下所示：[LibGit2Sharp Issue #341](https://github.com/libgit2/libgit2sharp/issues/341)。

# ios - 上传到应用商店时图片丢失

> ID：14950285
> 
> 赞同：0
> 
> 时间：2013-02-19T05:13:06.143
> 
> 标签：ios, image, app-store

我有一个 iOS 应用程序，里面有一堆图像。我使用表格视图单元格内的图像和标签栏图像。在测试开发和分发时，一切正常，Apple 批准了它并放入了应用商店。问题是 - 我从应用商店查看了我的应用，但所有图片都不见了！两个图像集都完全不存在。现在，这只发生在应用商店中实际应用的版本中——Xcode 中的应用看起来不错。有人知道可能是什么原因造成的吗？

非常感激！

ps 如果对自己查看应用程序有帮助，请告诉我，我会发布链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:15:06.780

检查你的目标。如果您使用不同的目标来构建应用商店和临时构建，您可能会将一些资源仅包含在测试目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:27:23.127

从 appstore 下载您的应用程序，使用[此处](https://stackoverflow.com/a/6177242/656600)定义的步骤进行探索，查看您的图像是否在其中，如果没有，则使用正确链接的图像重新上传二进制文件，否则，请考虑来自 @Nikita 的回答。

# mysql - Sql Query 找出创建或更新的最后五个记录以及创建和修改日期之前的时间？

> ID：14950286
> 
> 赞同：-1
> 
> 时间：2013-02-19T05:13:09.577
> 
> 标签：mysql, sql, database

我在 MySQL 数据库中有一个表名为 a_campaign，其中包含以下列

```
CampaignId | name | Created Date | Modified Date | 
```

现在我想要的是将上表中的最新 5 条记录显示为最近创建或最近更新的......

我不知道如何根据我的要求获取这些记录..所以请如果有人可以指导我..

我的结果数据应该如下获取

```
Campaign Id | Campaign Name | Status(Updated/Created) | Time (Created/Modified Before) 
```

最后一列应显示与今天的日期相比，在多少个月/周/天/小时/分钟/秒之前创建或更新广告系列的时间）

请帮帮我..

![在此处输入图像描述](../Images/1ed53275a890592ab2e9c2e76af451f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:45:10.010

这应该实现它。您可以根据需要调整最后一列的格式，但这会给出活动发生的分钟数

```
SELECT 
    campaignId,
    name,
    CASE WHEN modifieddate > createddate THEN 'Updated' ELSE 'Created' END AS type_of_activity,
    modifieddate AS latest_activity,
    TIMESTAMPDIFF(MINUTE,modifieddate,NOW()) AS minutes_ago
FROM
    a_campaign
ORDER BY 
    modifieddate DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:28:32.263

所以我不太了解您想要的结果集结构，但要按任一列排序，您可以这样做：

```
select *, greatest(Created, Modified) as lastDate
from a_campaign
order by lastDate desc 
limit 5; 
```

请注意，这会进行全表扫描。因此，您可能希望在 Created 和 Modified 上添加约束（比如其中一个需要比 24 小时前更新）以限制结果集的大小（日期列上的索引会有所帮助）

此外，为了简单起见，我假设 Modified 总是大于或等于 Created。因此，您应该让您的应用在创建行时同时填充**Created**和 Modified，并仅在更改时更新 Modified。如果这样做，您可以将查询简化为仅按 Modified 列 DESC 排序，并获得前 5 名。

[编辑] 我刚刚看到您添加了数据集的样本，这表明 Created 和 Modified*都*在创建行时填充。在这种情况下，听起来您只需要对 Modified 列进行排序：

```
select *
from a_campaign
order by Modified desc 
limit 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:20:19.120

请使用此程序

```
DECLARE @TABLES TABLE(ID INT , Name NVarchar(50),status NVarchar(50), time int,time1 datetime)

INSERT INTO @TABLES
SELECT ID,Name,'Created',DATEDIFF(D,CreatedDate,GETDATE()),CreatedDate FROM Compaign WHERE CreatedDate > ModifiedDate

INSERT INTO @TABLES
SELECT ID,Name,'Updated',DATEDIFF(D,ModifiedDate,GETDATE()),ModifiedDate FROM Compaign WHERE CreatedDate <= ModifiedDate

select ID 'Campaign Id' ,Name 'Campaign Name', status 'Status(Updated/Created)', time 'Time (Created/Modified Before)' from @TABLES order by time1 asc 
```

# javascript - 如何在浏览器中显示xml内容

> ID：14950290
> 
> 赞同：0
> 
> 时间：2013-02-19T05:13:37.077
> 
> 标签：javascript, xml, xslt

我的 JavaScript 中有一个变量，我在这个变量中检索并存储了大量的 XML 内容，例如

```
var content = "" 
```

content 变量将保存大量的 XML 内容。

从我的同一个 JavaScript 文件中，我正在使用打开一个新窗口

```
var mywindow = window.open("\test.html") 
```

我正在`document.write`使用

```
mywindow.document.write(content) 
```

在新窗口中显示存储的 XML 内容。

我没有在我的 JavaScript 文件中使用任何 XSLT 或任何其他样式表。

内容已加载到窗口中，但是 XML 内容未正确加载到浏览器中，当我看到页面源时，我可以看到确切的内容。

如何在浏览器中直接显示 XML 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:48:37.133

document.write() 实际上会创建 XML 数据的标签，而不是将其显示为原始文本。

像这样的东西应该工作：

```
var xml = '<hello>world</hello>';
if (document.body.innerText !== undefined) {
    document.body.innerText = xml;
}
else {
    document.body.textContent = xml;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:53:43.733

尝试这个 ，

```
 xmlhttp.open("GET","yourfile.xml",true);
     xmlhttp.send();
     xmlDoc=xmlhttp.responseXML; 

<script type="text/javascript">

var xhr= window.XMLHttpRequest? new XMLHttpRequest() : new    ActiveXObject('Microsoft.XMLHTTP');
xhr.onreadystatechange= function() {
    if (this.readyState===4 || this.status===200)
        populateTable(this.responseXML);
};
xhr.open('GET', 'yourfile.xml', true);
xhr.send();

function populate(xml) {
    var content= xml;
     myElem.innerHTML += content;   
};

</script> 
```

# ipad - ipad标签栏自定义不起作用

> ID：14950310
> 
> 赞同：0
> 
> 时间：2013-02-19T05:16:05.687
> 
> 标签：ipad, ios5, uitabbar, tabbarcontroller

我想自定义 iPad 的标签栏。我已附上图片以澄清我的问题。

目前我的标签栏是这样的：

![目前我的标签栏是这样的：](../Images/74ad176928ca3ca67f252539bed82715.png)

我想要这样。

![我想要这样。](../Images/40d3ec704c807ed96adc33fff9a33b97.png)

我为标签栏采用了自定义背景图像并使用以下代码。

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
 {

NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];

switch (index) 
    {
        case 0:
            [_tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act11.png"]];

            break;
        case 1:
            [_tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act22.png"]];
            break;
        case 2:
            [_tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act33.png"]];
            break;

        case 3:
            [_tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act44.png"]];
            break;

        case 4:
            [_tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act55.png"]];
            break;

        default:
            break;
    }

    } 
```

从上面的代码中，它显示了我想要的标签栏但是，用户交互无法正常工作。我无法选择 Propertab。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:36:25.037

您需要一次为每个视图控制器而不是整个 tabBar自定义**tabBarItem 。**为此，您可以使用**UITabBarItem**标头中的方法。以下应该可以帮助您：-

```
- (void)setFinishedSelectedImage:(UIImage *)selectedImage withFinishedUnselectedImage:(UIImage *)unselectedImage NS_AVAILABLE_IOS(5_0); 
```

在将它们添加到 tabBarController 之前，您可以使用上面的方法自定义**每个 viewController 的 tabBarItem**。

# php - 如何在html页面中显示列的值？

> ID：14950311
> 
> 赞同：0
> 
> 时间：2013-02-19T05:16:08.717
> 
> 标签：php, html, mysql

我有一个包含一行和一列的表。存储的值是整数类型，我想在我的 HTML 页面中显示这个值。表名是“count”，列名是“order_number”。

请告诉我如何在页面中显示此值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:30:59.563

使用 php，您需要连接到 mysql 并查询数据库，然后回显结果。这是mysqli的一个例子：

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'your_database');

if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') ' . mysqli_connect_error());
}

$q=$mysqli->query("select * from `your_database`.`your_table` WHERE <some_condition>");
$cnt=0;
while($r=$q->fetch_assoc()) {
   $val[$cnt] = $r['field_name'];
    $cnt++;
}
$mysqli->close();

//Display first record
echo "The first record is: ".$val[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:22:02.453

试试这个：

```
<?php
$con = mysql_connect("localhost", "peter", "abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$db_selected = mysql_select_db("test_db",$con);

$sql = "SELECT order_number from count";
$result = mysql_query($sql,$con);

while($row = mysql_fetch_assoc($result)) {   
        foreach ($row as $col => $val) {
            echo $col." = ".$val."<br>";
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:11:40.027

试试这个例子

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<?php
$cn=mysql_connect('localhost','user','password') or die(mysql_error());
mysql_select_db('test');
$sql="select order_number from count";
$read=mysql_query($sql,$cn)  or die(mysql_error());
$row=mysql_fetch_array($read ) or die(mysql_error());
echo $row['order_number'];
?>
</body>
</html> 
```

# android - 我无法从处理程序的 handleMessage 调用创建 UI 元素

> ID：14950314
> 
> 赞同：0
> 
> 时间：2013-02-19T05:16:18.247
> 
> 标签：android

# 更新 1

我又做了一些调试，发现构造函数是从主 UI 线程运行的，但是 handleMessage(Message) 方法是在我创建的线程上运行的，这与我对 Handlers 的理解完全矛盾。

# 问题

我已经在 Android 上工作了一段时间，但遇到了一个似乎没有记录的问题。我没有对我的代码做任何特别的事情。我似乎无法让我的应用程序从处理程序的 handleMessage 方法创建任何 UI 元素，例如警报对话框和 Toast 消息。

此外，我得到一个“线程没有调用 Looper.prepare()”异常。但是，我相信我什至不需要调用 Looper.prepare() ，因为我没有在 Thread 对象内创建 Handler 。我在主 UI 线程中调用构造函数，然后将其传递给新线程的构造函数。

## 我的期望

我应该会看到 Toast 消息和警报对话框。

## 实际发生了什么

没有。我在应用程序上运行了调试器，发现 JVM 确实启动了线程。调用 run 方法并分派消息。处理程序处理该方法，我运行了创建 AlertDialog 以及 Toast 消息的所有方法，但没有显示任何内容。

我在运行 4.2 的模拟器、运行 4.0.4 的朋友的三星 Galaxy S3 和运行 2.3.5 的我自己的 Droid X2 上运行了这个应用程序。

# 程序流程

1.  我在 UI 线程上创建了一个处理程序。
2.  我创建并启动一个线程，它将向处理程序发送一条消息。
3.  处理程序将处理消息

# 源代码

[http://pastebin.com/cRfaW7b0](http://pastebin.com/cRfaW7b0)

```
package com.nguyenmp.ErrorTest;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Init the UI
        setContentView(R.layout.main);

        //Create a new handler, passing it the current activity context
        final Handler handler = new MyHandler(MyActivity.this);

        //Bind a listener to the button on the UI
        View view = findViewById(R.id.button);
        view.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //Start a new thread that will send a message to that handler
                new MyThread(handler).start();
            }

        });
    }

    private class MyThread extends Thread {
        private final Handler mHandler;

        MyThread(Handler handler) {
            mHandler = handler;
        }

        @Override
        public void run() {
            //Dispatch message to UI thread asynchronously
            Looper.prepare();
            mHandler.dispatchMessage(mHandler.obtainMessage());
        }
    }

    private class MyHandler extends Handler {
        private final Context mContext;

        MyHandler(Context context) {
            mContext = context;
        }

        @Override
        public void handleMessage(Message msg) {
            //Show that we got the message
            AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
            builder.setTitle("HelloWorld");
            builder.setMessage("It worked!");
            builder.show();

            //Another variant of showing that we got the message
            Toast.makeText(mContext, "Message Received", Toast.LENGTH_SHORT).show();

            System.out.println("Yeah");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:40:49.563

您应该使用[http://developer.android.com/reference/android/os/Handler.html#sendMessage(android.os.Message)](http://developer.android.com/reference/android/os/Handler.html#sendMessage(android.os.Message)) 发送稍后将由 handleMessage 处理的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:01:24.763

问题是我正在调用 dispatchMessage(Message) ，它会在当前线程上立即执行。我应该一直在使用 sendMessage(Message) 它将给定的消息排入最初创建处理程序的原始线程的消息队列中。

# java - 为什么我收到 java.lang.OutOfMemoryError: PermGen space 错误？>

> ID：14950318
> 
> 赞同：0
> 
> 时间：2013-02-19T05:16:30.973
> 
> 标签：java, glassfish-3

我正在使用 java 开发一个应用程序，并且我使用 GlassFish Serve 3+ 作为我的容器，有时当我运行我的应用程序时遇到以下错误，我想知道是什么原因，

```
type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: PWC1243: Filter execution threw an exception
root cause

java.lang.OutOfMemoryError: PermGen space
note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2.2 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:28:29.037

[`java.lang.OutOfMemoryError`](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html)

> 当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。虚拟机可以构造 OutOfMemoryError 对象，就好像禁用了抑制和/或堆栈跟踪不可写一样。

检查是否使用`new`关键字创建了太多对象。要查找的位置是循环、递归方法等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:30:01.233

在 JAVA_OPTS 环境变量中设置 PermSize [用于为 Java JVM 分配内存] 如果已经设置，则增加 MaxPermSize

例如：

JAVA_OPTS="$JAVA_OPTS -Xms512m -Xmx1024m -XX:MaxPermSize=1024m -XX:PermSize=128m"

有关 JAVA_OPTS 的更多详细信息在这里

[http://www.unidata.ucar.edu/projects/THREDDS/tech/tds4.3/reference/JavaOptsSummary.html](http://www.unidata.ucar.edu/projects/THREDDS/tech/tds4.3/reference/JavaOptsSummary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T04:16:04.087

我知道在 NetBeans 的默认 glassfish 配置中，它不会告诉服务器清理其未使用的类。尝试以下解决方案：

[Glassfish PermGen 内存不足错误](http://blog.maurus.be/2012/10/15/glassfish-permgen-out-of-memory-errors/)

# jquery - 如何将 .hover() 绑定到动态创建的“li”元素？

> ID：14950321
> 
> 赞同：27
> 
> 时间：2013-02-19T05:16:41.570
> 
> 标签：jquery

我能找到的所有解决方案都建议使用`.live()`方法。但截至今天，它已被弃用。

`.hover()`完美适用于非动态创建的“li”元素。但是，一旦我追加新的“li” `.hover()`，就根本不会触发。

有人想出这个吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-19T05:23:06.863

“悬停”事件已被委派事件处理（如`.on()`根据[`.on()`jQuery 文档页面](http://api.jquery.com/on/)）弃用。

相反，您需要使用`.on()`带有 mouseenter 和 mouseleave 的委托事件处理以及每个事件处理程序。

例如：

```
$(document).on("mouseenter", "li", function() {
    // hover starts code here
});

$(document).on("mouseleave", "li", function() {
    // hover ends code here
}); 
```

在您的真实代码中，您将选择一个静态父对象，它比对象更接近动态`li`标签以`document`获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:21:42.263

试试这个

编辑：Sry 错过了已弃用的事件

```
$(document).on("mouseenter", "li", function(){
       //Your code
}); 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

[小提琴](http://jsfiddle.net/bTJjE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:19:17.157

使用[JQuery](http://api.jquery.com/on/) 试试这个：

```
$(document).on('hover', 'li', function () {

}); 
```

# php - php 正则表达式 preg_match

> ID：14950326
> 
> 赞同：0
> 
> 时间：2013-02-19T05:17:07.983
> 
> 标签：php, regex

匹配包含*至少*3 个用于分隔单词的散列的字符串的正则表达式是什么？

火柴：

```
the-rain-in-spain
the-rain-in-spain-is-falling-on-the-plain 
```

不匹配：

```
the-rain-in
the---in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:20:30.303

你可以使用这个正则表达式

```
\w+(-\w+){3,} 
```

`\w`类似于`[a-zA-Z0-9_]`

`\w+`匹配 1 到多个字符

`{3,}`是一个与前面的组 3 多次匹配的量词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:54:07.873

我不了解php，但这对我有用

```
//string strtmp = "the-rain-in";
//string strtmp = "the-rain-in-spain";
  string strtmp = "the-rain-in-spain-is-falling-on-the-plain";
//string strtmp = "the---in";
  Match matchdec = Regex.Match(strtmp, @"\w+(-\w+){3,}", RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase);                    
   if (matchdec.Success)
       {
           //your code
       } 
```

希望这可以帮助

# assembly - 请验证 AT&T 装配线的含义

> ID：14950330
> 
> 赞同：2
> 
> 时间：2013-02-19T05:17:38.360
> 
> 标签：assembly, x86, att

这条线对我来说不是很清楚（我对大会很陌生）：

```
movsbl 0xffffffff(%edx,%ebx,1),%eax 
```

我理解`mov`，但`movsbl`对我来说是新的。在一个使用`foo`而不是`0xffffffff(%edx,%ebx,1)`我理解的更简单的示例中（完全不确定这是正确的，只是搜索了一个相关主题）：

```
eax = foo&0x800000ff; 
```

我从来没有一行汇编引用-1（`0xffffffff`），输入的信息`%eax`究竟来自哪里？是否存储在：

```
[%edx + %ebx -1] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:23:40.007

```
movsbl <%x, %y, 1>, %z 
```

说，从第一个操作数 (x) 寻址的内存位置读取一个字节，将该字节扩展为 32 位，并将结果存储在寄存器 (z) 中。

<%x, %y, 1>是x和y的值相加形成的内存地址；1 是应用于 y 的乘数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:49:30.573

如果你用 C 语言编写它，该行将类似于：

```
#include <stdlib.h>

int loadByte(char *base, size_t index)
{
    return (int)base[index - 1];
} 
```

编译它（在 UN*X 上，对于 64 位 x86）会产生以下目标代码：

```
部分.text的反汇编：

0000000000000000 :
   0: 0f 为 44 37 ff movsbl 0xffffffffffffffff(%rdi,%rsi,1),%eax
   5：c3 retq

```

如前所述，`movsb`表示*移动（加载）一个字节，将其符号扩展为 ...*（因此有`movsbw`,`movsbl`以及`movsbq`转换为 word / `short`， long /`int`和 quad / `long long`）。

您的程序集是 32 位的（因为用于寻址的寄存器是 32 位的），但其他含义是相同的。

# algorithm - 反转和合并链表

> ID：14950338
> 
> 赞同：1
> 
> 时间：2013-02-19T05:18:33.677
> 
> 标签：algorithm, data-structures, linked-list

问题：给定一个排序的链表

```
1->2->3->4->5->6->7 
```

更改链表中的指针以使其

```
7->1->6->2->5->3->4 
```

使用常数空间。

我尝试使用以下算法解决它：

1.  使用 2 个节点，一个快速节点和一个慢速节点找到链表的中间节点。
2.  从中间节点反转链表。将中间节点标记为 y，将起始节点标记为 x。

    ```
    1->2->3->7->6->5->4
    x        y 
    ```

3.  如果 y=middle node AND y!= x.next，则交换 y 和 x.next。然后交换 x 和 x.next。

    ```
    1->7->3->2->6->5->4
    x        y
    7->1->3->2->6->5->4
    x        y 
    ```

    将 x 推进两个节点，将 y 推进 1 个节点。

    ```
    7->1->3->2->6->5->4
          x     y 
    ```

4.  现在 if (x != y) { 交换 x 和 y }

    ```
    7->1->6->2->3->5->4
          x     y 
    ```

5.  将 x 推进两个节点，将 y 推进 1 个节点

    ```
    7->1->3->2->6->5->4
                x  y 
    ```

6.  重复步骤 4 和 5 直到 y 变为 null（到达链表的末尾）或 x == y

所以最后我们得到

```
7->1->6->2->5->3->4 
```

**问题：**

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:50:06.013

这是一个简单的解决方案：

1.  找到列表大小。
2.  由 2 个相同的列表溢出。
3.  反转第二部分。
4.  合并列表。

样本：

1.  `1->2->3->4->5->6->7` 大小是`7`。（我们应该除以 4 和 3）
2.  拆分为`1->2->3->4`和`5->6->7`
3.  反转第二部分`1->2->3->4`和`7->6->5`
4.  合并：`7->1->6->2->5->3->4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:21:47.407

[您可以在链表问题](http://cslibrary.stanford.edu/105/LinkedListProblems.pdf)问题 17 和 18中找到两个复杂的解决方案。

# php - 如何通过dom过滤空节点？

> ID：14950340
> 
> 赞同：2
> 
> 时间：2013-02-19T05:18:36.383
> 
> 标签：php, dom

我只想**获取**其中包含**一些真实文本**或**子元素节点**的元素（不是空格`&nbsp;`等）。

我尝试了以下html：

```
<p>&nbsp;</p>
<div>&nbsp;</div> 
```

到目前为止，我已经尝试过这段代码：

```
$dom = new DOMDocument;

$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;

$i = 0;
while (is_object($html_synch = $dom->getElementsByTagName("body")->item($i))) {
    foreach ($html_synch->childNodes as $node) {
        if ($node->nodeName != "script" && $node->nodeName != "style" &&
                XML_COMMENT_NODE != $node->nodeType):
            get_children($node);
        endif;
    }
    $i++;
} 
```

然后在 get_children 函数中，我使用此代码过滤空节点或节点`&nbsp;`：

```
foreach ($node->childNodes as $child) :
    if (trim($child->nodeValue) != ""):
        echo $child->nodeValue;  // it returns Â
        echo $child->nodeName;   // it returns #text
        array_push($children_type, $child->nodeType);
    endif;
endforeach;
print_r($children_type); 
```

`#text Â and Array ( [0] => 3 )`它只返回`<p>&nbsp;</p>`. 那么我该如何过滤它们呢？而且我知道#text 是文本的特殊节点名称。

**[演示链接：](http://sandbox.onlinephpfunctions.com/code/0d0ee6ef92a28651bf577299b3f39c0506ae9261)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:29:15.373

事先进行一些解释：您看到 À 的原因是您的 HTML 文档被视为 UTF-8，但您将其显示为 ISO 8859-1。不间断空格`&nbsp;`在 UTF-8: 中被编码为两个字节`0xC2 0xA0`。在 ISO 8859-1 中，它只是`0xA0`, 而`0xC2`意味着`À`

现在，您可以在 中指定`trim()`应该修剪哪些字符，这样您就可以包含不间断空格（也必须明确添加默认字符）：

```
if (trim($child->nodeValue, " \n\r\t\0\xC2\xA0") !== ""):
    // value is not empty 
```

目前您的功能没有*过滤*，所以我不确定您到底想对这些项目做什么。但其余的应该很容易，例如：

*   计算节点类型不是文本**或**值不为空的子节点
*   如果 count > 0，则保留元素

## 更新

你的其余代码有点粗糙，所以我做了一个最小的工作示例：

**测试代码：**

```
$html = <<<HTML
<body>
 <div>
  <p>not-empty</p>
  <p>&nbsp;</p>
  <div>&nbsp;</div>
 </div>
</body>
HTML;

$dom = new DOMDocument;

$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;

$xpath = new DOMXPath($dom);

foreach ($xpath->query('//*') as $node) {
  if (!count($node->childNodes) || trim($node->nodeValue, " \n\r\t\0\xC2\xA0")==='') {
    echo 'to filter: ' . $node->getNodePath() . "\n";
  }
} 
```

**测试输出：**

```
to filter: /html/body/div/p[2]
to filter: /html/body/div/div 
```

**[演示链接](http://sandbox.onlinephpfunctions.com/code/343cc0e26b3dee2cf2a176f8e21e4aec81fad731)**

# javafx-2 - 如何在列表视图中显示图像

> ID：14950341
> 
> 赞同：2
> 
> 时间：2013-02-19T05:18:36.920
> 
> 标签：javafx-2, jpedal

我正在使用 JavaFX2.0。我需要在列表视图中显示缩略图。我正在编写如下代码。

```
ObservableList<BufferedImage> imageList = FXCollections.observableArrayList();
        try {
            for (int i = 1; i <= pdf.getPageCount(); i++) {
                BufferedImage pageImage = pdf.getPageAsImage(i);
                imageList.add(pageImage);
            } catch (PdfException e) {
            _logger.error("Error :" + e.getMessage());
            }
           thumbnailsList.setItems(imageList); 
```

这里 thumbnailsList 是列表视图的 fx：id。但是如果我使用此代码，我将获取图像对象而不是图像。谁能告诉我如何在列表视图中获取图像。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:43:42.160

您可以使用来自的样本

[http://docs.oracle.com/javafx/2/ui_controls/list-view.htm](http://docs.oracle.com/javafx/2/ui_controls/list-view.htm)

这称为“示例 11-4 创建单元工厂”。

您必须设置自定义单元工厂。而不是`Rectangle`，放在`ImageView`那里。

# c++ - 在 VC++ 中连接 CString 和 Long？

> ID：14950351
> 
> 赞同：0
> 
> 时间：2013-02-19T05:19:33.430
> 
> 标签：c++, casting, atl, tostring, cstring

我必须将两个`CString`变量和两个`long`变量 连接在一起`CString`。我找到了一个我使用过的 Format 函数，如下所示：

```
CString str = "Some Data";

str.Format("%s%d", str, 123); 
```

但它给出了错误。这是错误日志：

```
\AudWinSockXCtrl.cpp(410) : error C2440: 'initializing' : cannot convert from 'const char [10]' to 'ATL::CStringT'

        with

        [

            BaseType=wchar_t,

            StringTraits=StrTraitMFC

        ]

        Constructor for class 'ATL::CStringT' is declared 'explicit'

        with

        [

            BaseType=wchar_t,

            StringTraits=StrTraitMFC

        ]

.\AudWinSockXCtrl.cpp(411) : error C2664: 'void ATL::CStringT::Format(const wchar_t *,...)' :
cannot convert parameter 1 from 'const char [5]' to 'const wchar_t *'
        with

        [

            BaseType=wchar_t,

            StringTraits=StrTraitMFC

        ]

        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or
function-style cast

.\AudWinSockXCtrl.cpp(414) : error C2664: 'void ATL::CStringT::Format(const wchar_t *,...)' :
cannot convert parameter 1 from 'const char [4]' to 'const wchar_t *'

        with

        [

            BaseType=wchar_t,

            StringTraits=StrTraitMFC

        ]

        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or
function-style cast 
```

有没有`toString()`像我们在 Java 中使用的那样的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:21:22.750

```
CString str = _T("Some Data");
str.Format(_T("%s%d"), str, 123); 
```

在此处阅读： [Tchar.h 中的通用文本](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.80%29.aspx)`_T`映射。`<tchar.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:57:13.253

[sprintf](http://www.cplusplus.com/reference/cstdio/sprintf) ( OutputBuffer, "%s%d", str, 123 ) ;

1.  ANSI 版本使用 CStringA。
2.  对 Unicode 版本使用 CStringW。
3.  对 TCHAR 版本使用 CString。

要强制 CString 被评估为 CStringA:: Goto，Project->Properties->Configuration Properties->General。在右侧，您将获得“字符集”行，将其更改为“未设置”

# git - 找不到 git 命令，也找不到 ssh-agent

> ID：14950355
> 
> 赞同：82
> 
> 时间：2013-02-19T05:19:44.647
> 
> 标签：git, github-for-windows

我今天在 GitHub 上，意识到我落后于回购的更新。我试图*获取*更新，但它从一开始就失败了。当我启动 Git Shell（来自 GitHub for Windows）时，我收到了两条消息：

> 警告：找不到 git 命令。请创建一个别名或将其添加到您的 PATH。
> 
> 警告：找不到 ssh-agent。

当我尝试输入“$ git fetch origin”时，我收到以下错误消息：

> 术语“$”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

我也尝试省略 $ 符号，但这并没有改变任何东西。

我不知道发生了什么，我最后一次使用Shell（本月初），它没有这样做。我尝试将 git.exe 的路径添加到 PATH 环境变量中，但这没有用 - 似乎没有任何改变。我这样做后没有重新启动计算机，是这个问题吗？我也从未将 Git 设置为使用 SSH。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-07-25T03:46:57.647

听起来您最近更新了**GitHub**应用程序，而**Git Shell**现在已损坏。

**简洁版本**

要解决这个问题

*   关闭**Git 外壳**
*   打开**GitHub**并让它进行一些后期安装。
*   再次打开**Git Shell**，你应该得到修复。

**长版**

这只是发生在我身上，只是为了确保我跟随你，你只是这样做了

*   打开**Git 外壳**
*   系统会提示您更新**GitHub**
*   更新后，**Git Shell**打开

现在它给出了错误

> 找不到 git 命令。请创建一个别名或将其添加到您的 PATH。
> 
> 警告：找不到 ssh-agent。

如果是这种情况，请执行此操作

*   关闭**Git 外壳**
*   现在打开**GitHub**应用程序（不是*Git Shell*）。

这将说明（不确定确切版本）

> GitHub 正在提取 git..

让它完成整个过程，完成后，打开**Git Shell**并修复它。至少对我有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-06T17:52:33.463

如果您不想重新安装 GitHub 或 GitShell，或者您甚至没有使用该服务，那么您可以自己修复它。

基本上你只需要将 git.exe 的目录路径添加到 Windows 中的 PATH 环境变量中。

对我来说，我必须添加路径“C:\Program Files (x86)\Git\bin”。或者当然你可能已经将 Git 安装在不同的目录中，所以你需要找出你把它放在哪里。

可以在此处找到执行所有这些操作的说明：http: [//thepracticalsysadmin.com/setting-up-git-in-windows/](http://thepracticalsysadmin.com/setting-up-git-in-windows/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-06T14:53:02.510

系统 > 高级系统设置 > 高级选项卡 > 环境变量（在底部）。

在系统变量（下半框，滚动到该`Path`部分并编辑。假设您的 git install 是默认位置，将以下内容添加到当前路径的末尾：

`;C:\Program Files (x86)\Git\cmd;`

完毕。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-26T13:08:38.110

我通过打开 Github destop 应用程序解决了我的问题，单击设置->选项我的默认 shell 选择是 PowerShell（它突然停止工作）我选择 Git Bash 保存它，然后打开设置->选项并再次选择 PowerShell。接下来我再次打开 GitShell，是的！它又开始工作了

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-28T11:52:36.867

**TLDR；**

添加一个用户`%path%`变量`%localappdata%\GitHub\PORTAB~1\bin`

**长版：**

我无法得到 Kirk 的回答来解决 Github 自身的问题。

您要查找的文件是 git.exe 并且 Windows GitHub GUI 会自行安装到您的本地用户应用程序目录中，这使得很难找到例如我的`C:\Users\andy_000\AppData\Local\GitHub\PortableGit_ed44d00daa128db527396557813e7b68709ed0e2\bin\git.exe`

该目录需要位于您的 Windows 环境路径中，以便`git.exe`仅通过`git`在命令窗口中键入即可找到。

我发现的最佳解决方案是打开您的系统环境变量（系统-> 高级-> 环境变量），然后只需添加一个新的用户变量（顶部框，而不是底部，这是系统变量）`Path`并设置其值到`%localappdata%\GitHub\PORTAB~1\bin`.

这将意味着系统`%path%`变量具有 github bin 目录的完整用户配置文件路径，就像在示例中一样。

尝试直接附加`%appdata%`和`%userprofile%`引用系统`%path%`不起作用，因为在设置系统变量时这些变量不可用，因此上面的解决方案设置了一个用户`%path%`变量，它允许调用`%localappdata%`etc，并且自动附加到系统`%path%`，给出想要的效果。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-12-03T16:06:32.110

遵循简单的步骤：

1.  打开`gitshell`更新它然后关闭它。
2.  打开它`github`会`gitshell`自动提取文件（意味着也更新它）。
3.  再次打开`gitshell`.

您将看到错误将完成。希望这对你也有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-12T20:00:40.903

我在安装了最新的 github 程序的 Windows7 上遇到了这个问题。我什至禁用了我的防病毒软件的所有功能:)

我的解决方案是以**管理员**程序`powershell ise`（从菜单）打开并运行以下命令：

```
Set-ExecutionPolicy Unrestricted 
```

你会得到有问题的对话，我点击是。然后我关闭了所有窗口并重新运行了 github shell，没有任何问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-17T15:23:16.933

**我的简单解决方案**（适用于[GitHub 桌面](https://desktop.github.com/)用户）：

1.  创建一个批处理文件**`git.bat`**：

> @echo 关闭
> 
> %LocalAppData%\GitHub\Portab~1\cmd\git.exe %*

2.  移到`C:\Windows\`文件夹..

就是这样！！你完成了！！

注意：您也可以使用`git.bat`而不是`git.exe`直接使用。这对于需要您明确指向 git 可执行文件的软件（如[Android Studio](https://github.com/bouvet-openlab/p2pcommunication/wiki/Set-git-executable-path)）很有用

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-05-28T15:41:56.833

另一种选择是更改您的默认外壳。

转到工具 -> 选项，然后将默认 shell 从“PowerShell”更改为“Git Bash”或其他内容。

# php - 从数据库-symfony 2.1.7 加载安全用户时出错

> ID：14950358
> 
> 赞同：0
> 
> 时间：2013-02-19T05:19:52.630
> 
> 标签：php, symfony, symfony-2.1

我的 security.yml 是

```
# app/config/security.yml
security:
    encoders:
       Iweb\IndexBundle\Entity\User:
           algorithm:        sha1
           encode_as_base64: false
           iterations:       1

role_hierarchy:
    ROLE_ADMIN:       ROLE_ADMIN

providers:
    administrators:
        entity: { class: IwebIndexBundle:User, property: username }

firewalls:
    login:
        pattern:  ^/login$
        security: false
    secured_area:
        pattern:    ^/(admin/*|login_check)
        anonymous: false
        form_login:
            login_path: /login
            check_path: /login_check
            always_use_default_target_path: true
            default_target_path:            /admin/panel
            target_path_parameter:          _target_path
            use_referer:                    false
            username_parameter:             _username
            password_parameter:             _password
            csrf_parameter:                 login[_token]
        logout: 
            path: /admin/logout
            target: /login
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin, roles: ROLE_ADMIN } 
```

和实体 user.php 是

```
 <?php
 // src/Iweb/IndexBundle/Entity/AcmeUsers.php
  namespace Iweb\IndexBundle\Entity;

 use Doctrine\ORM\Mapping as ORM;
 use Symfony\Component\Security\Core\User\UserInterface;
  use Symfony\Component\Security\Core\User\EquatableInterface;
/**
 * Iweb\IndexBundle\Entity\User
 *
 * @ORM\Table(name="acme_users")
 * @ORM\Entity(repositoryClass="Iweb\IndexBundle\Entity\UserRepository")
 */
class User implements UserInterface, \Serializable
{
/**
 * @ORM\Column(type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @ORM\Column(type="string", length=25, unique=true)
 */
private $username;

/**
 * @ORM\Column(type="string", length=32)
 */
private $salt;

/**
 * @ORM\Column(type="string", length=40)
 */
private $password;

/**
 * @ORM\Column(type="string", length=60, unique=true)
 */
private $email;

/**
 * @ORM\Column(name="is_active", type="boolean")
 */
private $isActive;

public function __construct()
{
    $this->isActive = true;
    $this->salt = md5(uniqid(null, true));
}

/**
 * @inheritDoc
 */
public function getUsername()
{
    return $this->username;
}

/**
 * @inheritDoc
 */
public function getSalt()
{
    return $this->salt;
}

/**
 * @inheritDoc
 */
public function getPassword()
{
    return $this->password;
}

/**
 * @inheritDoc
 */
public function getRoles()
{
    return array('ROLE_ADMIN');
}

/**
 * @inheritDoc
 */
public function eraseCredentials()
{
}

/**
 * @inheritDoc
 */
public function isEqualTo(UserInterface $user)
{
    return $this->id === $user->getId();
}

/**
 * @see \Serializable::serialize()
 */
public function serialize()
{
    return serialize(array(
        $this->id,
    ));
}

/**
 * @see \Serializable::unserialize()
 */
public function unserialize($serialized)
{
    list (
        $this->id,
    ) = unserialize($serialized);
}
} 
```

UserRepository.php 是

```
<?php 
        // src/Iweb/IndexBundle/Entity/UserRepository.php
        namespace Iweb\IndexBundle\Entity;

        use Symfony\Component\Security\Core\User\UserInterface;
        use Symfony\Component\Security\Core\User\UserProviderInterface;
        use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
        use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
        use Doctrine\ORM\EntityRepository;
        use Doctrine\ORM\NoResultException;

        class UserRepository extends EntityRepository implements UserProviderInterface
        {
        public function loadUserByUsername($username)
        {
            $q = $this
                ->createQueryBuilder('u')
                ->where('u.username = :username OR u.email = :email')
                ->setParameter('username', $username)
                ->setParameter('email', $username)
                ->getQuery()
            ;

            try {
                // The Query::getSingleResult() method throws an exception
                // if there is no record matching the criteria.
                $user = $q->getSingleResult();
            } catch (NoResultException $e) {
                throw new UsernameNotFoundException(sprintf('Unable to find an active admin AcmeUserBundle:User object identified by "%s".', $username), null, 0, $e);
            }

            return $user;
        }

        public function refreshUser(UserInterface $user)
        {
            $class = get_class($user);
            if (!$this->supportsClass($class)) {
                throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', $class));
            }

            return $this->find($user->getId());
        }

        public function supportsClass($class)
        {
            return $this->getEntityName() === $class || is_subclass_of($class, $this->getEntityName());
        }
    } 
```

如果我使用 in_memory 它工作正常，但是当我从 db 加载用户时，就会出现 Bad Credentials 错误。我不想使用 fosuserbundle --- 我正在关注 symfony 文档。 [http://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html) 我会感谢你...

# air - 如何继续为 Adob e AIR 桌面应用程序设置谷歌分析？

> ID：14950364
> 
> 赞同：0
> 
> 时间：2013-02-19T05:20:07.727
> 
> 标签：air, google-analytics

我是 Adob​​e 和谷歌分析的新手。我已经看到了一些要遵循的程序来为我的桌面应用程序在网络上设置谷歌分析，我已经尝试了其中一些程序并且这些程序已经奏效，但在我的谷歌帐户上没有看到任何数据报告。

请帮助并发布任何教程。

有什么方法可以获取我使用 Core Reporting API 遇到的报告，但它没有返回任何结果，即 0 结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:52:22.283

尝试这个 ：

[http://blog.leeburrows.com/2011/03/adding-google-analytics-to-a-flash-site/](http://blog.leeburrows.com/2011/03/adding-google-analytics-to-a-flash-site/)

[https://developers.google.com/analytics/devguides/collection/other/flashTrackingSetupFlash](https://developers.google.com/analytics/devguides/collection/other/flashTrackingSetupFlash)

这个分步教程可以帮助你。

# c - 如何在 C 中将 2 字节整数转换并分解为 2 个不同的字符？

> ID：14950366
> 
> 赞同：3
> 
> 时间：2013-02-19T05:20:09.400
> 
> 标签：c

我想转换一个无符号整数并将其分解为 2 个字符。例如：如果整数为 1，则其二进制表示为 0000 0001。我希望一个 char 变量中的 0000 部分和另一个二进制变量中的 0001 部分。我如何在 C 中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:24:42.353

如果你坚持你有一个`sizeof(int)==2`then：

```
 unsigned int x = (unsigned int)2; //or any other value it happens to be
  unsigned char high = (unsigned char)(x>>8);
  unsigned char low  = x & 0xff; 
```

* * *

如果您总共有 8 位（一个字节）并且您将其分成两个 4 位值：

```
 unsigned char x=2;// or whatever
  unsigned char high = (x>>4);
  unsigned char low = x & 0xf; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T05:23:35.777

移动并屏蔽您想要的数字部分。无符号整数可能是四个字节，如果你想要所有四个字节，你只需移动 16 和 24 以获得高阶字节。

```
unsigned char low  =  myuint       & 0xff;
unsigned char high = (myuint >> 8) & 0xff; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T05:29:22.403

这是假设使用 sizeof 进行 16 位整数检查！在我的平台上，整数是 32 位的，所以我将在这个代码示例中使用一个简短的。我的在拆开指针方面获得了最恶心的奖项 - 但它也是我最清楚地理解的。

```
unsigned short number = 1;

unsigned char a;
a = *((unsigned char*)(&number)); // Grab char from first byte of the pointer to the int

unsigned char b;
b = *((unsigned char*)(&number) + 1); // Offset one byte from the pointer and grab second char 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T06:27:40.833

一种有效的方法如下：

```
typedef union 
{
  unsigned char c[sizeof(int)];
  int           i;
} intchar__t;

intchar__t x;
x.i = 2; 
```

现在 xc[] （一个数组）将整数作为一系列字符引用，尽管您将遇到字节端序问题。可以使用适合您正在编程的平台的#define 值来解决这些问题。这类似于 Justin Meiners 提供的答案，但更简洁一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:23:25.910

```
unsigned short s = 0xFFEE;
unsigned char b1 = (s >> 8)&0xFF;
unsigned char b2 = (((s << 8)>> 8) & 0xFF); 
```

我能想到的最简单的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T05:27:20.297

```
int i = 1  // 2 Byte integer value 0x0001
unsigned char byteLow = (i & 0x00FF); 
unsinged char byteHigh = ((i & 0xFF00) >> 8); 
```

byteLow 中的值为**0x01**，**byteHigh 中的值为 0x00**

# oop - 复杂的继承场景

> ID：14950367
> 
> 赞同：0
> 
> 时间：2013-02-19T05:20:18.033
> 
> 标签：oop, design-patterns

假设您需要构建一个管理支票的应用程序。每张支票都包含有关金额、日期、收款人和可能存在或不存在的附加付款日期的数据。此外，每张支票必须与属于某家银行的活期账户相关。现在，我们的应用程序应该允许在这些条件下打印支票：

*   该应用程序管理的每家银行都有不同的支票布局（即每个字段都有不同的 x,y 位置）。

*   如果存在付款日期，即使使用相同的相关银行对象，支票布局也会略有变化。但是，从银行到银行，这些更改可能不一样（例如，银行 A 可能会更改日期字段的位置，而银行 B 会更改收款人字段的位置）

有了这些限制，就很难想出一个简单的继承模式，因为没有一致的行为可以跨不同类型的检查进行分解。一种可能的解决方案是避免继承并为每个支票 - 银行组合创建一个类：

*   类 ChequeNoPaymentDateForBankA
*   类 ChequeWithPaymentDateForBankA
*   类 ChequeNoPaymentDateForBankB
*   类 ChequeWithPaymentDateForBankB 等。

这些类中的每一个都实现了 print() 方法，该方法从 Bank 对象中获取字段位置并构建支票布局。到目前为止一切都很好，但是这种方法让我有一种奇怪的感觉，因为没有代码重用的空间。我想知道我是否误解了这个问题，也许有更好的方法。由于这根本不是一个新的问题领域，我相信这是一个重新发明轮子的努力。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:47:27.357

通常在这些情况下，我会从继承转向委托。也就是说，我没有将公共代码放在超类中（正如您所说，这是有问题的，因为有两个维度），而是将公共代码放在一个字段中（每个维度一个字段）并委托给该字段。

假设您在谈论 Java：

```
public interface Bank {
   public void print();
}

public class BankA implements Bank {
   public void print() { ... }
}

public class BankB implements Bank {
   public void print() { ... }
}

public interface PaymentSchedule {
   public void print();
}

public class WithPaymentDate implements PaymentSchedule {
   public void print() { ... }    
}

public class NoPaymentDate implements PaymentSchedule {
   public void print() { ... }    
}

public class Cheque {
  private final Bank bank;
  private final PaymentSchedule schedule;

  public Cheque(Bank b, PaymentSchedule s) {
     bank = b;
     schedule = s;
  }

  public void print() {
     bank.print();
     schedule.print();
  }
} 
```

这就是解决方案的一般结构。

根据您的 print() 算法的确切细节，您可能需要将更多数据传递到打印方法和/或将此数据传递到类（银行或 PaymentSchedule 子类的）的构造函数并将其存储在字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:00:57.370

我首先将域模型（支票、银行等）与视图（支票的打印方式）分开。[这是MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式背后的基本思想，其目标之一是允许以不同的方式显示相同的域模型（这似乎是你的情况）。因此，我将首先创建域类，例如：

```
class Cheque 
{
protected $bank;
protected $money;
...
}

class Bank {...} 
```

请注意，这些类是 MVC 三元组的“M”，并实现域模型的逻辑，而不是与渲染过程相关的行为。下一步是实现用于呈现支票的 View 类。采用哪种方法在很大程度上取决于您的渲染有多复杂，但我会从一个`ChequeView`渲染公共部分的类开始，并将可以更改的特定部分委托给其他子视图（在本例中为日期）：

```
abstract class ChequeView
{
protected $cheque;
protected $dateView;

public function __construct($cheque)
{
  $this->cheque = $cheque;
  $this->dateView = //Whatever process you use to decide if the payment date is shown or not
}

public function render()
{
  $this->coreRender();
  $this->dateView->render();
}

abstract protected function coreRender();
}

class BankACheckView extends ChequeView
{
protected function coreRender() {...}
}

class BankBCheckView extends ChequeView
{
protected function coreRender() {...}
}

abstract class DateView
{
abstract function render()
}

class ShowDateView extends DateView
{
function render() {...}
}

class NullDateView extends DateView
{
function render() {...}
} 
```

而且，如果有代码可以跨子类重用，您当然可以将它们考虑在内`ChequeView`并`coreRender()`调用它们。

In case your rendering turns to be too complex, this design may not scale. In that case I would go for splitting your view in meaningful subparts (e.g. `HeaderView`, `AmountView`, etc) so that rendering a cheque becomes basically rendering its different sub-parts. In this case the `ChequeView` may end basically working as a [Composite](http://www.oodesign.com/composite-pattern.html). Finally, if you reach this case and setting up the `ChequeView` turns out to be a complex task you may want to use a [Builder](http://www.oodesign.com/builder-pattern.html).

**Edit based on the OP comments**

The Builder is mostly used when the instantiation of the final object is a complex process (e.g. there are many things to sync between the sub-parts in order to get a consistent whole). There is generally one builder class and different clients, that send messages (potentially in different orders and with different arguments) to create a variety of final objects. So, while not prohibited, it is not usual to have one builder per type of object that you want to build.

If you are looking for a class that represents the creation of a particular instance you may want to check the [Factory](http://www.oodesign.com/factory-pattern.html) family of patterns (maybe the [Abstract Factory](http://www.oodesign.com/abstract-factory-pattern.html) resembles closely to what you had in mind).

HTH

# php - 如何在magento中获取页面标题？

> ID：14950370
> 
> 赞同：8
> 
> 时间：2013-02-19T05:20:34.910
> 
> 标签：php, magento, magento-1.7

**在magento**中获取页面标题的任何方式...我有一个脚本活人..在此我需要当前页面标题..那么任何人都可以告诉我如何获得当前页面标题吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-19T05:29:50.460

使用此代码

```
$this->getLayout()->getBlock('head')->getTitle(); 
```

您可以在您的 phtml 文件中使用此代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-16T12:09:25.557

要获取不带前缀（站点名称）的标题：

```
<?php echo str_replace(Mage::getStoreConfig('design/head/title_prefix'), '', $this->getLayout()->getBlock('head')->getTitle()); ?> 
```

# sencha-touch-2 - 在 sencha 中为照片库创建缩略图视图

> ID：14950372
> 
> 赞同：0
> 
> 时间：2013-02-19T05:20:46.563
> 
> 标签：sencha-touch-2, sencha-architect

我正在尝试使用 Sencha Architect 创建一个照片库。在第一个屏幕上，我想显示显示 4 个图像宽行的图像缩略图。

屏幕 2 将显示一个选定的图像，名称和图像编号 .，例如顶部的 10 个中的 -3 个。

我在 Google 上搜索了这个，但找不到任何示例代码或文档。是否有任何示例代码或文档可用？

我需要帮助来设计这段代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:53:28.460

您可以从 sencha touch 库附带的 touchstyle 示例中获得一些想法，或者看看这个[http://www.touchstyle.mobi/app/](http://www.touchstyle.mobi/app/)

# python - os.getuid() 和 os.geteuid() 有什么区别？

> ID：14950378
> 
> 赞同：40
> 
> 时间：2013-02-19T05:21:08.427
> 
> 标签：python, uid

的文档`os.getuid()`说：

> 返回当前进程的用户 ID。

说`os.geteuid()`：

> 返回当前进程的有效用户id。

**那么用户 id**和**有效用户 id**有什么区别呢？

对我来说，两者都一样*（在 2.x 和 3.x 上）*。我正在使用它来检查脚本是否以 root 身份运行。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-19T07:11:11.497

要了解如何`os.getuid`和`os.geteuid`不同，您需要了解它们不是 Python 特定的函数（除了`os`模块前缀）。这些函数封装了基本上所有类 Unix 操作系统提供的`getuid`和系统调用。`geteuid`

因此，与其查看 Python 文档（不太可能提供很多细节），不如查看适用于您操作系统的文档。[例如，这里](https://www.kernel.org/doc/man-pages/online/pages/man2/geteuid.2.html)是 Linux 的相关文档。维基百科也有[一篇关于 Unix 用户 ID 的好文章](https://en.wikipedia.org/wiki/User_identifier)。

常规 UID 和有效 UID 之间的区别在于，当您执行需要特殊访问权限的操作（例如读取或写入文件，或进行某些系统调用）时，只会检查 EUID。UID 指示正在执行操作的实际用户，但在检查权限时（通常）不考虑它。在正常程序中，它们是相同的。一些程序会更改其 EUID 以添加或减去允许执行的操作。少数人也会更改他们的 UID，以有效地“成为”另一个用户。

这是一个更改其 EUID 的程序的示例：该`passwd`程序（用于更改您的密码）必须写入系统的密码文件，该文件由 root 用户拥有。普通用户无法写入该文件，因为如果可以，他们也可以更改其他所有人的密码。为了解决这个问题，程序在其`passwd`文件权限（称为 然后程序会将其视为启动用户，并将其 EUID 视为 root。写入系统密码文件需要 EUID 具有特权。UID 也很有用，因为需要知道它正在为哪个用户更改密码。`setuid bit``root``passwd``UID``passwd`

还有其他一些 UID 和 EUID 不匹配的情况，但它们并不太常见。例如，作为超级用户运行的文件服务器可能会更改其 EUID 以匹配请求某些文件操作的特定用户。使用用户的 EUID 可以让服务器避免访问不允许用户接触的东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T05:24:29.853

函数`os.getuid()`返回运行您的程序的用户的 ID。您的程序使用权限的用户的功能`os.geteuid()`。在大多数情况下，这将是相同的。众所周知，当这些值不同时，`setuid`为您的程序可执行文件设置了位，并且运行您的程序的用户与拥有程序可执行文件的用户不同。在这种情况下`os.getuid()`，将返回运行程序的用户 ID，而`os.geteuid()`将返回拥有程序可执行文件的用户 ID。

# ruby-on-rails - 无法访问列值导轨控制台

> ID：14950381
> 
> 赞同：0
> 
> 时间：2013-02-19T05:21:26.777
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, rails-console

我正在尝试访问存储在我的 UserVotes 表中名为 totalVotes 的列中的整数，但不断收到无方法错误

我一直在尝试从控制台调试：

```
1.9.3-p327 :006 > uservote = UserVote.where("soundcloud_id = 68061927")
  UserVote Load (0.2ms)  SELECT "user_votes".* FROM "user_votes" WHERE (soundcloud_id = 68061927)
 => [#<UserVote id: 5, user_id: "1", party_profile_id: "1", soundcloud_id: "68061927", totalVotes: 0, created_at: "2013-02-19 04:57:58", updated_at: "2013-02-19 04:57:58">] 
```

目前很好...

```
1.9.3-p327 :007 > uservote.totalVotes
NoMethodError: undefined method `totalVotes' for #<ActiveRecord::Relation:0x007febb49ab350> 
```

然后它坏了，我不知道为什么。我访问 totalVotes 值的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:34:35.860

您的问题是您正在调用`.totalVotes`AR 关系。先打电话`.first`，然后你应该没有问题。

```
>> uservote = UserVote.where("soundcloud_id = 68061927").first
>> uservote.totalVotes 
```

# css - Firefox中的交叉淡入淡出背景图像，CSS不起作用

> ID：14950385
> 
> 赞同：0
> 
> 时间：2013-02-19T05:21:44.757
> 
> 标签：css, firefox, background, jquery-animate, transition

我知道这个问题之前已经提出过，但从未解决。

有谁知道你是否可以在 Firefox 中交叉淡入淡出背景图像？我知道你可以在 chrome 和 explorer 中制作背景图像动画，但它似乎还不能在 FF 中工作。它使用颜色而不是图像。我没有使用 jQuery

这是我的网站： [http ://www.moniquepompe.com](http://www.moniquepompe.com)

这是我的代码，请帮助！：

```
body{ 
background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;}
animation:myfirst 5s infinite;
-moz-animation: myfirst 5s infinite; /* Firefox */
-webkit-animation:myfirst 5s infinite; /* Safari and Chrome */
-o-animation:myfirst 5s infinite; /* Opera */;
-webkit-background-size: cover;}

@keyframes myfirst
{0%   {background:url('http://moniquepompe.com/wp-   content/uploads/2013/02/background_1.png')}
25%  {background:url('http://moniquepompe.com/wp-   content/uploads/2013/02/background_2.png')}
75%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_3.png')}
100% {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
}

@-moz-keyframes myfirst /* Firefox */
{
0%   {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
25%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_2.png')}
75%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_3.png')}
100% {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
0%   {background:url('http://moniquepompe.com/wp- content/uploads/2013/02/background_1.png')}
25%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_2.png')}
75%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_3.png')}
100% {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
}

@-o-keyframes myfirst /* Opera */
{
0%   {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
25%  {background:url('http://moniquepompe.com/wp- content/uploads/2013/02/background_2.png')}
75%  {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_3.png')}
100% {background:url('http://moniquepompe.com/wp-content/uploads/2013/02/background_1.png')}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:52:46.057

使用边框属性。图片需要很长时间才能加载，所以使用边框请参阅此
jsfiddle.net/EucZM/

# xcode - 在 Cocoa (Mac OS X) 中列出所有驱动器及其大小

> ID：14950388
> 
> 赞同：0
> 
> 时间：2013-02-19T05:22:10.470
> 
> 标签：xcode, macos, cocoa

![列出所有可用空间、已用和总大小的驱动器](../Images/e003b7a5049c08c82e0b1539dcef95ba.png)

如何在 cCcoa 中实现如图所示的驱动器列表，当我单击特定驱动器时，它应该打开该驱动器。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:39:31.950

看看[FileSystemItem.m](http://developer.apple.com/library/mac/#samplecode/OutlineView/Listings/FileSystemItem_m.html)

用于文件图标

```
[[NSWorkspace sharedWorkspace] iconForFile:fullPath]; 
```

# javascript - 全局变量、函数和 Javascript

> ID：14950389
> 
> 赞同：1
> 
> 时间：2013-02-19T05:22:21.853
> 
> 标签：google-visualization, javascript, google-visualization

为我假设的一个基本问题道歉，但是粗略的谷歌搜索 javascript 函数会返回各种关于“this”的内容，以及为什么不全局声明事物和创建对象——所有这些都超出了我的想象。

我正在尝试使用[google-visualization](/questions/tagged/google-visualization "显示标记为“谷歌可视化”的问题")制作交互式地理图表。我在这里有一个工作版本（有点）：

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Google Visualization API Sample</title>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load('visualization', '1', {packages: ['geochart']});

    var width, height, selectedRegion, resolution;

    window.onload = function(){
      width = 556;
      height = 400;
      selectedRegion = 'world';
      resolution = 'subcontinents';
    };

    function drawVisualization() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Region');
      data.addColumn('number', 'Value');
      data.addRows([
        [{v:"005", f:"South America"}, 978.7],
        [{v:"011", f:"Western Africa"}, 46],
        [{v:"013", f:"Central America"}, 299],
        [{v:"014", f:"Eastern Africa"}, 63.9],
        [{v:"015", f:"Northern Africa"}, 255.7],
        [{v:"017", f:"Middle Africa"}, 21.4],
        [{v:"018", f:"Southern Africa"}, 244.5],
        [{v:"029", f:"Caribbean"}, 76.5],
        [{v:"030", f:"Eastern Asia"}, 5712.9],
        [{v:"034", f:"Southern Asia"}, 1275.1],
        [{v:"035", f:"South-Eastern Asia"}, 639.2],
        [{v:"039", f:"Southern Europe"}, 777.8],
        [{v:"053", f:"Australia and New Zealand"}, 272],
        [{v:"054", f:"Melanesia"}, 6.3],
        [{v:"057", f:"Micronesia"}, 1.8],
        [{v:"061", f:"Polynesia"}, 1],
        [{v:"143", f:"Central Asia"}, 170.3],
        [{v:"145", f:"Western Asia"}, 834.1],
        [{v:"151", f:"Eastern Europe"}, 1587.6],
        [{v:"154", f:"Northern Europe"}, 801.5],
        [{v:"155", f:"Western Europe"}, 1456.2],
        [{v:"021", f:"Northern America"}, 4704.1]
      ]);

      var options = {
        displayMode: 'regions',
        enableRegionInteractivity: 'true',
        resolution: resolution,
        region: selectedRegion,
        height: height,
        width: width
      };

      var geochart = new google.visualization.GeoChart(
          document.getElementById('visualization'));

      google.visualization.events.addListener(geochart, 'select', function() {
        var selection = geochart.getSelection();

        if (selection.length == 1) {
          var selectedRow = selection[0].row;
          selectedRegion = data.getValue(selectedRow, 0);
          resolution = "countries";
          options.region = selectedRegion;
          options.resolution = resolution;
          //alert(resolution);
          geochart.draw(data, options);
          }
      });

      geochart.draw(data, options);
    }

    google.setOnLoadCallback(drawVisualization);
  </script>
</head>
<body style="font-family: Arial;border: 0 none;">
<div id="visualization"></div>
</body>
</html> 
```

代码的正确作用（以及我想作为更大项目的一部分进行改进）是，当您单击地图上的一个区域时，它将更改地图的选项并重新绘制它，以进一步放大该区域。

这很棒，但上面是一个庞大的函数，函数内部有一个处理函数。这将变得非常笨拙，因为我必须添加诸如缩小和重置地图以查看整个世界之类的内容，并且还必须根据选择的区域调整更大的数据集（上面的示例将放大一个区域，然后当前不显示任何数据）。

所以我想把我的代码分成更易于管理的块，可以单独调试的块，让我更好地了解哪里出了问题，并且通常使整个项目更易于管理，因为我远非专业程序员（说实话，可能远非新手程序员）。

以下是我想将其分解为的块：

1.  定义数据（每次更改选项）
2.  定义选项（每次更改选项时）
3.  绘制地图（每次执行函数 5-7）
4.  添加监听器（一次）
5.  放大地图的功能（点击时）
6.  缩小地图的功能（点击时）
7.  重置地图的功能（点击时）
8.  操作数据的函数（每次执行函数 5-7）

我遇到问题的地方是非常基本的东西。我可以全局声明所有变量（不使用前缀`var`），但我认为这通常不鼓励，并且可能会长期伤害我（特别是如果我有一个用 10,000 个元素可变声明的巨大数据表）。*如果这是错误的，请纠正我——从我有限的理解中使用全局变量是一件坏事，但也许 javascript 是特殊的？*

让我们专注于其中一个功能，然后如果我了解该功能如何工作和交互，那么我可能会弄清楚其他功能。

要绘制图表，我需要有两条信息：

1.  使用什么数据
2.  使用哪些选项

现在，如果我将数据和选项都声明为全局变量，我可以很高兴地从其他函数中操作它们（非常感谢），但它们是全局的。我不知道如何将这些东西传递给函数，并根据需要返回调整后的数据。

例如，我可以轻松地创建一个工作地图，如下所示：

```
function drawVisualization() {
  var rawData = new google.visualization.DataTable();
  rawData.addColumn('string','Continent');
  rawData.addColumn('string','Subontinent');
  rawData.addColumn('string','Country');
  rawData.addColumn('number','Data');
  rawData.addRows([
    [{v:"142",f:"Asia"},{v:"145",f:"Western Asia"},{v:"AE",f:"United Arab Emirates"},91.9],
    // more data in between
    [{v:"002",f:"Africa"},{v:"014",f:"Eastern Africa"},{v:"ZW",f:"Zimbabwe"},7.8],
  ]);

  resetMap();

  var data = new google.visualization.DataView(rawData);
  data.setColumns([resolutionIndex, 3]);

  var options = {
    displayMode: displayMode,
    enableRegionInteractivity: 'true',
    resolution: resolution,
    region: region,
    height: height,
    width: width
  };

  drawMap(data, options);

}

function drawMap(data, options) {
  var geochart = new google.visualization.GeoChart(document.getElementById('visualization'));
  geochart.draw(data, options);
}

function resetMap() {
  resolutionArray = ['continents', 'subcontinents', 'countries'];
  resolutionIndex = 0;
  previousIndex = 0;
  previousRegion = 'world';
  displayMode = 'regions';
  resolution = resolutionArray[resolutionIndex];
  region = 'world';
  height = '600';
  width = '800';
} 
```

现在这段代码的问题是我必须将“选项”变量中的所有这些变量设置为全局变量，而且我不太确定更新函数`resolution`内部的变量`resetMap()`实际上会影响选项内部的值（我需要之后创建另一个函数来更新`options`变量？）。而且一切似乎都是全局的，我不确定如何来回传递变量并确保它们一起工作以完成工作。

我知道这是一篇非常长的帖子，其中可能包含一个非常简单的概念，可以为我解决它，但我就是无法理解它。如果有人有任何一般性的指针，或者为真正的初学者编写的 javascript 函数如何工作的描述（函数如何工作，如何定义，如何从它们返回值等），我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:43:45.030

您担心拥有全局变量（这很好！）而不知道确切原因（这很糟糕！）。它们的主要问题是，如今在网页中组合来自各种来源的脚本非常普遍。如果它们都使用全局变量，那么由于命名冲突而干扰（和破坏）另一个变量的可能性很高。所以最好的做法是避免使用全局变量。

为此，您首先必须了解[范围在 JavaScript 中是如何工作的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)。每个函数都会创建一个新的作用域，因此`var`在函数内部声明的 a 只在那里可见。它在嵌套函数中也是可见的（通过[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)）。如果您想避免使用全局变量，理解这两个概念是必不可少的。

还有一个简单的语言特性可以帮助您：“立即调用函数表达式”（IIFE）可用于将代码块包装在自己的范围内。可以使用该范围而不是全局范围来与内部函数共享变量，内部函数可以通过闭包访问它们：

```
(function(){
    // declare common variables here
    var a = 1, b = 2, c = 3;

    // any function declare here can access a, b, c
    function foo() {
        console.log(a);
    }

    // works with anynymous function expressions too
    document.addEventListener('click', function(e) {
        alert(b);
    });
}()); 
```

这允许您拥有与您已经拥有的非常相似的代码，但不会泄漏任何全局变量。

使用[面向对象的 js](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)也可以帮助您构建代码，但这是一个广泛的话题，除非您询问您遇到的更具体的问题，否则我无法在此详细介绍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T05:38:24.720

您可能会发现 jQuery Learning 上的[代码组织](http://learn.jquery.com/code-organization/)页面很有趣。即使您不使用 jQuery，大多数概念仍然适用。

# workflow - 有没有办法在 sublime text 2 中平移？

> ID：14950393
> 
> 赞同：3
> 
> 时间：2013-02-19T05:22:41.440
> 
> 标签：workflow, keyboard-shortcuts, sublimetext2

有谁知道一个 sublime text 插件，它可以让你平移类似于 Photoshop 文件画布的代码？

空格+拖动还是鼠标中键+拖动？

如果您没有在非常高的文档中包含文本，我可以想象这将变得有用。如果一个插件不存在，那么我可能会开始研究一个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:26:10.770

没办法，我在网站上添加了功能请求，你可以投票。

[http://sublimetext.userecho.com/topic/159170-drag-scroll-or-pan-or-touch-scroll/](http://sublimetext.userecho.com/topic/159170-drag-scroll-or-pan-or-touch-scroll/)

我查看了插件 API，它似乎没有提供一种将其作为插件实现的方法。

# php - 仅基于 PHP 的第一个元素从多维数组中删除重复项

> ID：14950395
> 
> 赞同：1
> 
> 时间：2013-02-19T05:22:54.303
> 
> 标签：php, arrays, multidimensional-array

这是数组

```
Array
(
    [0] => Array
        (
            [artist] => John Keys
            [postID] => 254
        )

    [1] => Array
        (
            [artist] => Jay Bloom
            [postID] => 249
        )

    [2] => Array
        (
            [artist] => John Keys
            [postID] => 216
        )

    [3] => Array
        (
            [artist] => Angie Belle
            [postID] => 225
        )
) 
```

我只想从艺术家元素中删除所有重复项。请注意，0 和 2 具有相同的艺术家，但 postID 不同。我只想保留艺术家的第一次出现并删除所有其他人。所以我想要的结果是

```
Array
(
    [0] => Array
        (
            [artist] => John Keys
            [postID] => 254
        )

    [1] => Array
        (
            [artist] => Jay Bloom
            [postID] => 249
        )
    [2] => Array
        (
            [artist] => Angie Belle
            [postID] => 225
        )
) 
```

我已经尝试过 array_unique 并且还序列化并执行了 array_map，似乎没有任何工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:29:39.630

简单的方法：

```
$result = array();

foreach ($input as $item) {
    if (!array_key_exists($item['artist'], $result)) {
        $result[$item['artist']] = $item;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:30:33.700

```
<?php
$array = Array
(
    '0' => Array
        (
            'artist' => 'John Keys',
            'postID' => 254
        ),

    '1' => Array
        (
            'artist' => 'Jay Bloom',
            'postID' => 249
        ),

    '2' => Array
        (
            'artist' => 'John Keys',
            'postID' => 216
        ),

    '3' => Array
        (
            'artist' => 'Angie Belle',
            'postID' => 225
        )
);
$newarray = array();
foreach($array as $key => $val){
  if(!array_key_exists('artist', $newarray)){
    $newarray[$val['artist']] = $val;
  }
}
echo '<pre>';
print_r($newarray); 
```

编辑：使用数字键：

```
$newarray = array();
$temp = array();

foreach($array as $key => $val){

   if(!in_array($val['artist'], $temp)){
    $temp[] = $val['artist'];
   }
   if( !array_key_exists(array_search($val['artist'], $temp), $newarray) ){
    $newarray[array_search($val['artist'], $temp)] = $val;
   }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T06:37:55.943

```
 <?php
    $a=array(
        "0" => array
            (
                "artist" => "John Keys",
                "postID" => "254"
            ),

       "1" => array
           (
              "artist" => "Jay Bloom",
              "postID" => "249"
           ),

        "2" => array
            (
               "artist" => "John Keys",
               "postID" => "216"
            ),

        "3" => array
            (
               "artist" => "Angie Belle",
               "postID" => "225"
            )
          );

     var_dump($a);

    for($i=0;$i<count($a);$i++)
    {
for($j=$i+1;$j<count($a); $j++)
{

    $tmp1=$a[$i]["artist"];
    $tmp2=$a[$j]["artist"];

    if($tmp1==$tmp2)
    { 

        unset($a[$j]);

    }
    $tmp3=array_values($a);

    $a=$tmp3;
  }

      }

    var_dump($a);
    ?> 
```

# c++ - 异常规范在声明和功能实现中不兼容

> ID：14950397
> 
> 赞同：6
> 
> 时间：2013-02-19T05:23:00.973
> 
> 标签：c++, c++11, g++, clang++

我们有以下代码

```
int main()
{
  void f() throw(int);
  f();
  return 0;
}

void f() { } 
```

GCC 和 clang 可以很好地编译它。但是，在标准中有这样一段：

n3376 15.4/4

> 如果**函数的任何声明有一个异常规范**，该规范不是允许所有异常的 noexcept规范，则该函数的**所有声明，包括定义和任何显式特化，都应具有兼容的异常规范**。

对于以下示例： gcc - 错误，clang - 警告

```
void f() throw(int);

int main()
{
  f();
  return 0;
}

void f() { } 
```

为什么这些片段有区别？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:24:27.880

来自 std 的 n3376 15.4/4 指定函数的所有声明和定义必须具有相同的抛出类型。这里 ：

```
void f() throw(int);
int main()
{
  f();
  return 0;
}

void f() { } 
```

声明`void f() throw(int);`和定义`void f() { }`在全球范围内。所以它们是冲突的，因为声明是针对一个 throw int 的函数，而定义是针对一个没有 throw 规范的函数。

现在，当您将声明放在主范围内时，定义不在同一个范围内，在此范围内，定义是未知的，因此您可以编译。

我希望你能理解我的英语，对此感到抱歉。

# jenkins - 如何在 Jenkins 中手动安装插件

> ID：14950408
> 
> 赞同：133
> 
> 时间：2013-02-19T05:23:46.243
> 
> 标签：jenkins, jenkins-plugins

从更新中心安装插件会导致：

> 检查互联网连接 无法连接到 [http://www.google.com/](http://www.google.com/)。也许您需要配置 HTTP 代理？部署插件失败 - 详细信息 hudson.util.IOException2: 无法从 [http://updates.jenkins-ci.org/download/plugins/deploy/1.9/deploy.hpi下载](http://updates.jenkins-ci.org/download/plugins/deploy/1.9/deploy.hpi)

是否可以下载插件并将其手动安装到 Jenkins 中？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-02-19T09:20:34.553

是的你可以。下载插件（*.hpi 文件）并将其放在以下目录中：

```
<jenkinsHome>/plugins/ 
```

之后，您将需要重新启动 Jenkins。

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2013-10-25T11:43:28.963

1.  下载插件。
2.  在 Jenkins 内部：*管理 Jenkins* →*管理插件*→ 有一个名为*Advanced*的选项卡，在该页面上有一个上传插件的选项（文件的扩展名必须是 hpi）。

有时，当您下载插件时，您可能会获得 (.zip) 文件，然后只需使用 (.hpi) 重命名并使用 UI 来安装插件。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-02-03T07:42:47.497

如果你使用 Docker，你应该阅读这个文件：[https ://github.com/cloudbees/jenkins-ci.org-docker/blob/master/plugins.sh](https://github.com/cloudbees/jenkins-ci.org-docker/blob/master/plugins.sh)

父 Dockerfile 示例：

```
FROM jenkins
COPY plugins.txt /plugins.txt
RUN /usr/local/bin/plugins.sh /plugins.txt 
```

插件.txt

```
<name>:<version>
<name2>:<version2> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-09-11T12:49:05.367

我创建了一个简单的脚本，它执行以下操作：

*   下载一个或多个插件到插件目录
*   扫描该目录中的所有插件以查找缺少的依赖项
*   也下载此依赖项
*   循环直到没有开放依赖

该脚本不需要运行 jenkins - 我用它来配置一个 docker box。

[https://gist.github.com/micw/e80d739c6099078ce0f3](https://gist.github.com/micw/e80d739c6099078ce0f3)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-09-03T11:55:33.967

有时，当您下载插件时，您可能会得到 (.zip) 文件，然后只需使用 (.hpi) 重命名，然后提取所有插件并移至`<jenkinsHome>/plugins/`目录。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-02-07T09:50:22.680

Docker 更新：使用[install-plugins.sh](https://github.com/jenkinsci/docker/blob/master/install-plugins.sh)脚本。它需要一个插件名称列表减去“-plugin”扩展名。请参阅[此处](https://github.com/jenkinsci/docker/blob/master/README.md#preinstalling-plugins)的说明。

install-plugins.sh 替换了已弃用的 plugins.sh，现在警告：

`WARN: plugins.sh is deprecated, please switch to install-plugins.sh`

要按照 plugins.sh 使用 plugins.txt，请参阅[此问题](https://github.com/jenkinsci/docker/issues/348)和此解决方法：

`RUN /usr/local/bin/install-plugins.sh $(cat /usr/share/jenkins/plugins.txt | tr '\n' ' ')`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-07-03T08:37:39.770

使用[https://updates.jenkins-ci.org/download/plugins/](https://updates.jenkins-ci.org/download/plugins/)。从 Jenkins 的这个中央更新存储库下载它。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-29T23:38:58.673

接受的答案是准确的，但请确保您还安装了所有必要的依赖项。使用 CLI 或 web 安装似乎可以解决这个问题，但我的插件没有显示在浏览器中，也没有使用`java -jar jenkins-cli.jar -s http://localhost:8080 list-plugins`，直到我还安装了依赖项。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-01-18T19:48:31.027

给出的答案有效，并添加了插件。

如果要替换/更新具有依赖项的内置插件（例如凭据插件），则必须使用前端。为了自动化我使用：

```
 curl -i -F file=@pluginfilename.hpi http://jenkinshost/jenkins/pluginManager/uploadPlugin 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-08T00:29:00.923

就我而言，我需要将插件安装到运行 Windows Server 的离线构建服务器（版本在这里无关紧要）。我已经在我的笔记本电脑上安装了 Jenkins 以提前测试更改，它作为 Windows 服务在 localhost:8080 上运行。

因此，如果您愿意花时间在具有 Internet 连接的机器上设置 Jenkins 并将这些更改传送到离线服务器 Jenkins（它可以工作，我已确认！），您可以遵循以下步骤：

*   我笔记本电脑上的 Jenkins：打开 Jenkins，[http://localhost:8080](http://localhost:8080)
*   导航器：管理 Jenkins | 下载没有安装选项的插件
*   Windows 资源管理器：复制位于“c:\program files (x86)\Jenkins\plugins”文件夹中的下载插件文件（即 role-strategy.jpi）
*   将其粘贴到离线服务器的共享文件夹中
*   通过组件服务、Jenkins Service 停止 Jenkins Service（离线服务器 Jenkins）
*   将插件文件（即role-strategy.jpi）复制到（离线Jenkins）服务器上的“c:\program files (x86)\Jenkins\plugins”文件夹中
*   重新启动 Jenkins，瞧！应该安装它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-14T00:27:50.307

这是一种将插件从一个 Jenkins 盒子复制到另一个盒子的方法。

复制插件目录：

```
scp -r jenkins-box.url.com:/var/lib/jenkins/plugins . 
```

压缩插件：

```
tar cvfJ plugins.tar.xz plugins 
```

将它们复制到另一个 Jenkins 盒子：

```
scp plugins.tar.xz different-jenkins-box.url.com
ssh different-jenkins-box.url.com "tar xvfJ plugins.tar.xz -C /var/lib/jenkins" 
```

重启詹金斯。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-13T22:19:10.337

要安装插件“git”及其所​​有依赖项：

```
curl -XPOST http://localhost:8080/pluginManager/installNecessaryPlugins -d '<install plugin="git@current" />' 
```

在这里，安装的插件是`git`；版本，指定为`@current`被 Jenkins 忽略。Jenkins 在`localhost`port上运行`8080`，根据需要进行更改。据我所知，这是“手动”安装插件及其所有依赖项的最简单方法。在詹金斯上测试`v1.644`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-05T02:57:09.047

```
RUN /usr/local/bin/install-plugins.sh amazon-ecs:1.37 configuration-as-code:1.47 workflow-aggregator:2.6 \
cloudbees-folder:6.15 antisamy-markup-formatter:2.1 build-timeout:1.20 credentials-binding:1.24 
```

像上面一样找出 plugins.txt 并安装在 Dockerfile 中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-25T14:43:14.240

使用此链接下载插件 hpi 的最新版本。[https://updates.jenkins-ci.org/download/plugins/](https://updates.jenkins-ci.org/download/plugins/)

然后通过 Jenkins 中的“管理插件”上传插件

# .htaccess - 如何将字符串模式与特殊字符匹配 (è)

> ID：14950413
> 
> 赞同：0
> 
> 时间：2013-02-19T05:24:07.937
> 
> 标签：.htaccess, pattern-matching, special-characters

在我的网站中，我有一些带有特殊字符的 URL，例如`è`. 应该如何检查文件中这些类型 URL 的 URL 模式匹配`.htaccess`？

`([a-z]+)/([0-9]+)`用于检查正常字符 URL 模式匹配。我应该如何检查这种 URL 模式匹配中的那种特殊字符？例如：类似字符串`suède`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:31:13.567

我认为你可以匹配**`è`**使用：

`^(.*)è(.*)$`

# android - 如何为我的 Android 应用自定义 Scandit 条码扫描器？

> ID：14950414
> 
> 赞同：1
> 
> 时间：2013-02-19T05:24:08.497
> 
> 标签：android, barcode, qr-code, barcode-scanner, android-screen-support

在小屏幕（2.7 英寸）中，Scandit 扫描仪窗口太薄且旋转。我想调整它的大小，也许，从上到左或右移动标题。

我应该使用哪些方法？

# java - 如何将搜索栏进度从 10k 更改为 1000 到 20L？

> ID：14950415
> 
> 赞同：0
> 
> 时间：2013-02-19T05:24:14.250
> 
> 标签：java, android, seekbar

对于搜索栏的最小 10000 和最大 2L 值，我想将进度值更改为 1000。

这是搜索栏的java代码：

```
seekbar.incrementProgressBy(1000);
seekbar.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
{
   public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
  {
    spinnervalue=(EditText)findViewById(R.id.editText1);        
    spinnervalue.setText("$"+""+(progress+10000));
  }
}); 
```

这里搜索栏按进度值递增，最小值 10k 是动态设置的。

这是使用的搜索栏的布局

```
 <SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="1990000"/> 
```

请通过任何建议提供帮助，基本上它是递增 11880 即（21880-10000）这里 10000 是搜索栏的最小值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:15:57.143

试试这个

```
 <SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="200"/>

seekbar.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
{
   public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
  {
    spinnervalue=(EditText)findViewById(R.id.editText1);        
    spinnervalue.setText("$"+""+(progress*1000));
  }
}); 
```

如果你不需要零然后修改如下

```
 <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="190"/>

int mProgress =10000;
seekbar.setOnSeekBarChangeListener( new OnSeekBarChangeListener()
{
   public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
  {

    mProgress = progress*1000+10000;
    spinnervalue=(EditText)findViewById(R.id.editText1);        
    spinnervalue.setText("$"+""+mProgress);
  }
}); 
```

并在程序中的所有其他地方使用 mProgress。

# android - 在横向模式下强制关闭，但在纵向模式下不强制关闭

> ID：14950418
> 
> 赞同：3
> 
> 时间：2013-02-19T05:24:28.803
> 
> 标签：android, button, listactivity, screen-orientation, android-orientation

我有一个显示运行时项目列表的应用程序。当用户按下 a`Button`时，所有选择的项目都应该被删除（选择由 决定`CheckBox`）。在*纵向模式下一切正常，但是当我***在行数超过 3**时切换到横向模式时，按下删除按钮会得到`Force Close Exception`并且我无法打印堆栈跟踪。**当有 3 行或更少行时，它可以完美运行！** 我已经为`layout`（纵向）和`layout-land`目录编写了布局。代码和布局如下：

这是删除按钮的处理程序：

```
 Button DeleteGoods=(Button)findViewById(R.id.DeleteSelectedGoodsButton);
   DeleteGoods.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            CheckBox cbx = (CheckBox)listView.findViewById(R.id.ChkOrder);
            int firstPosition = listView.getFirstVisiblePosition();
                for (int i = firstPosition; i < listView.getCount(); i++) {

                    View v1 = listView.getChildAt(i);

                    cbx = (CheckBox)v1.findViewById(R.id.ChkOrder);
                    if(cbx.isChecked())
                        checkedItemPosition=i;                  
                }
                try {

                    DeleteCheckedItem(checkedItemPosition);

                    Toast.makeText(getApplicationContext(),"The selected order has been deleted successfully.", Toast.LENGTH_SHORT).show();

                    finish();
                    startActivity(getIntent());
                } catch (Exception e) {

                    Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
                }

        }

    }); 
```

这是横向模式下的布局：

```
<?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#000000" >
        <Button 
            android:id="@+id/DeleteSelectedGoodsButton"
            android:layout_width="150dp"
            android:layout_height="45dp"
            android:text="@string/DeleteSelectedGoods"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true" />
        <Button 
            android:id="@+id/ConfirmDelete"
            android:layout_width="150dp"
            android:layout_height="45dp"
            android:text="@string/ConfirmDeleteButton"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true" />
        <Button 
            android:id="@+id/CancelButton"
            android:layout_width="150dp"
            android:layout_height="45dp"
            android:text="@string/CancelButton"
            android:layout_alignParentTop="true"
            android:layout_alignParentRight="true" />
        <TextView 
            android:id="@+id/aa"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@id/CancelButton" />

        <TextView 
            android:id="@+id/GOODNAME_CELL"
            android:layout_width="180dp"
            android:layout_height="wrap_content"
            android:background="@drawable/border"
            android:textSize="18dp"
            android:text="Order"
            android:paddingLeft="5dp"
            android:layout_below="@id/aa"
            android:layout_alignParentLeft="true" />
         <TextView 
            android:id="@+id/GOODUNITPRICE_CELL"
            android:layout_width="180dp"
            android:layout_height="wrap_content"
            android:background="@drawable/border"
            android:textSize="18dp"
            android:text="Unit Price"
            android:paddingLeft="5dp"
            android:layout_below="@id/aa"
            android:layout_toRightOf="@id/GOODNAME_CELL" />
         <TextView 
            android:id="@+id/QUANTITYCELL"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:background="@drawable/border"
            android:textSize="18dp"
            android:text="Quantity"
            android:paddingLeft="5dp"
            android:layout_below="@id/aa"
            android:layout_toRightOf="@id/GOODUNITPRICE_CELL" />
         <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="@style/CodeFont"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/GOODUNITPRICE_CELL" />

         <TextView
            android:id="@+id/TotalPriceTextview"
            android:layout_width="600dp"
            android:layout_height="wrap_content"
            android:text=""
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:background="@drawable/back"
            android:textColor="#FFFFFF"
            android:textSize="20dp" />

    </RelativeLayout> 
```

这是我得到的例外：

```
02-19 10:07:11.398: E/AndroidRuntime(4335): FATAL EXCEPTION: main
02-19 10:07:11.398: E/AndroidRuntime(4335): java.lang.NullPointerException
02-19 10:07:11.398: E/AndroidRuntime(4335):     at com.example.nfc.PrepopSqliteDbActivity$1.onClick(PrepopSqliteDbActivity.java:117)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.view.View.performClick(View.java:2552)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.view.View$PerformClick.run(View.java:9229)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.os.Handler.handleCallback(Handler.java:587)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.os.Looper.loop(Looper.java:138)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at android.app.ActivityThread.main(ActivityThread.java:3701)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at java.lang.reflect.Method.invokeNative(Native Method)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at java.lang.reflect.Method.invoke(Method.java:507)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
02-19 10:07:11.398: E/AndroidRuntime(4335):     at dalvik.system.NativeStart.main(Native Method)
02-19 10:07:11.408: W/ActivityManager(1768):   Force finishing activity com.example.nfc/.PrepopSqliteDbActivity
02-19 10:07:11.909: W/ActivityManager(1768): Activity pause timeout for HistoryRecord{40b2ed78 com.example.nfc/.PrepopSqliteDbActivity}
02-19 10:07:16.353: I/InputDispatcher(1768): Application is not responding: Window{40a73e60 com.example.nfc/com.example.nfc.PrepopSqliteDbActivity paused=false}.  5004.7ms since event, 5004.4ms since wait started
02-19 10:07:16.353: I/InputDispatcher(1768): Dropping event because the pointer is not down.
02-19 10:07:16.353: I/InputDispatcher(1768): Dropping event because the pointer is not down.
02-19 10:07:16.353: I/WindowManager(1768): Input event dispatching timed out sending to com.example.nfc/com.example.nfc.PrepopSqliteDbActivity
02-19 10:07:16.353: I/ActivityManager(1768): Crashing app skipping ANR: ProcessRecord{40a1b188 4335:com.example.nfc/10003} keyDispatchingTimedOut
02-19 10:07:21.428: W/ActivityManager(1768): Launch timeout has expired, giving up wake lock!
02-19 10:07:21.908: W/ActivityManager(1768): Activity idle timeout for HistoryRecord{40a1b7d8 com.example.nfc/.Buy}
02-19 10:07:26.963: I/touchd(1518): 'ab8500_usb' is online
02-19 10:07:26.963: I/touchd(1518): handling_uevent: event is 1 
```

**编辑**

这是第 117 行：

```
DeleteCheckedItem(checkedItemPosition); 
```

这是方法的主体：

```
private void DeleteCheckedItem(int chkPosition)
{   
    String strName=goods.get(chkPosition).get(GOOD_NAME);
    String strPrice=goods.get(chkPosition).get(GOOD_UNITPRICE);
    String strQuantity=goods.get(chkPosition).get(QUANTITY);
    String whereClause = "GOOD_NAME = ? AND GOOD_UNITPRICE= ? AND QUANTITY= ?";
    String[] whereArgs = {strName,strPrice,strQuantity};
    database.delete(TABLE_NAME, whereClause, whereArgs);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:22:15.407

是`checkedItemPosition`一个`int`还是一个`Integer`？

我的猜测是它`Integer`被初始化为`null`.

当您旋转时，活动会重新创建，并且您的活动会重新`checkedItemPosition`初始化为`null`.

然后你进入你的 for 循环，但没有`Checkbox`检查任何视图，所以你`checkedItemPosition`仍然是`null`.

您尝试调用`DeleteItemChecked`一段`null`时间，它需要一个原始的`int`，瞧：`NullPointerException`。

解决方案：初始化`checkedItemPosition`为`0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:29:09.517

我遇到了这种问题。我的理论与对沙迪的观察有关

纵向模式可以显示比横向模式更多的行。并且由于您迭代列表视图项目计数并尝试获取所述位置的视图。如果列表视图的视图或项目在窗口/电话屏幕中不可见。您有可能获得空值。每次滚动都会调用适配器的 getView() 方法，因为初始化或重新创建列表视图项在 getView() 中，而在 getView() 方法中没有正确调用在窗口/电话屏幕中不可见的项未初始化。您可以使用列表视图中的方法：[getLastVisiblePosition()](http://developer.android.com/reference/android/widget/AdapterView.html#getLastVisiblePosition%28%29)来限制您将迭代到列表视图的项目数。

希望这会帮助你。问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:58:56.957

它看起来像`database`或者`TABLE_NAME`是*null*。在第 117 行之前添加这些行进行测试：

```
if (strName == null)
    Log.w("Test", "strName is NULL");
if (strPrice == null)
    Log.w("Test", "strPrice is NULL");
if (strQuantity == null)
    Log.w("Test", "strQuantity is NULL");
if (TABLE_NAME == null)
    Log.w("Test", "TABLE_NAME is NULL");
if (whereClause == null)
    Log.w("Test", "whereClause is NULL. WTF!");
if (whereArgs == null)
    Log.w("Test", "whereArgs is NULL. WTF!");
if (database == null)
    Log.w("Test", "database is NULL"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T21:13:39.727

查看您的代码，如果按下删除但未检查任何内容会发生什么？

回答您的问题，一旦按下删除，选中的项目是否可能不可见？如果是这样，由于 View 回收（一个可怕的，如果聪明的事情），当你到达删除按钮代码时它可能实际上不存在，所以你需要小心查询视图。在进行（和取消）选择时构建“当前选定列表”可能更明智，这样当按下删除时，您不再需要查询任何视图。

顺便说一句，它看起来也只会删除第一个选中的项目，但我可能在那里错过了一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T06:06:02.533

遇到问题，解决方案如下。当您旋转屏幕时，适配器将再次被初始化，并且先前的阵列正在被清理。您可以做的是将 放入`onConfigurationChange()`活动并尝试检查输出。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-19T05:49:23.667

您是否在 Manifest 文件中指定了对配置更改的处理，如果没有，请`android:configChanges="keyboardHidden|orientation`在您的活动中添加：

请粘贴 logcat，它将提供更多信息.. 祝你好运..

# algorithm - 将数字的各个数字分量相加/求和的最快方法

> ID：14950422
> 
> 赞同：12
> 
> 时间：2013-02-19T05:24:42.410
> 
> 标签：algorithm, math, sum, iteration, digit

不久前我在一个数学论坛上看到一个问题，一个人正在讨论一遍又一遍地将数字中的数字相加，直到得到一个数字。（即“362”将变为“3+6+2”，然后将变为“11”......然后“11”将变为“1+1”将变为“2”，因此“362”将返回 2......我写了一些很好的代码来得到这个答案并发布它只是被一个用户超越，他建议模9中的任何数字都等于这个“无限数字和”，我检查了它，他是对的......好吧几乎是正确的，如果返回零，您必须用“9”将其关闭，但这是一个非常快速的解决方案......

362 = 3+6+2 = 11 = 1+1 = 2

或者...

362%9 = 2

无论如何，mod9 方法非常适合无限添加数字的总和，直到你只剩下一个数字......但是只做一次呢（即 362 只会返回“11”）......谁能想到快速算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T05:52:34.800

有一个很酷的技巧可以将二进制中的 1 个数字和一个固定宽度的整数相加。在每次迭代中，您将每个数字的一​​半分成两个值，将一个值向下移位，然后相加。第一次迭代，将其他数字分开。第二次迭代，数字对，依此类推。

鉴于 27 是 00011011 作为 8 位二进制，该过程是......

```
00010001 + 00000101 = 00010110  <-  every other digit step
00010010 + 00000001 = 00010011  <-  pairs of digits
00000011 + 00000001 = 00000100  <-  quads, giving final result 4 
```

你可以用小数做一个类似的技巧，但它比简单的循环效率低，除非你有一个十进制数字的直接表示，并通过快速操作将选定的数字归零并进行数字移位。所以对于 12345678 你得到...

```
02040608 + 01030507 = 03071115  <-  every other digit
00070015 + 00030011 = 00100026  <-  pairs
00000026 + 00000010 = 00000036  <-  quads, final result 
```

所以 1+2+3+4+5+6+7+8 = 36，这是正确的，但只有当你的数字表示是固定宽度的十进制时，你才能有效地做到这一点。它总是需要 lg(n) 次迭代，其中 lg 表示以两个为底的对数，然后向上取整。

为了稍微扩展一下（基于评论中的讨论），让我们*假装*这是理智的，有点......

如果你计算个位数的加法，实际上这里的*工作*比简单的循环要多。与计算位的按位技巧一样，这个想法是重新排序这些加法（使用关联性），然后并行计算尽可能多的计算，使用单个全角加法来实现两个半角加法，四个四分之一宽度加法等。数字清除和数字移位操作有很大的开销，如果将其实现为循环（计算或查找每个步骤的数字掩码和移位距离值），则开销更大。“循环”可能应该完全展开，并且那些掩码和移位距离作为常量包含在代码中以避免这种情况。

支持[二进制编码十进制 (BCD)](http://en.wikipedia.org/wiki/Binary-coded_decimal)的处理器可以处理此问题。数字屏蔽和数字移位将使用位屏蔽和位移来实现，因为每个十进制数字将被编码为 4（或更多）位，与其他数字的编码无关。

一个问题是，如今 BCD 支持非常少见。它曾经在 8 位和 16 位时代相当普遍，但据我所知，现在仍然支持它的处理器主要是为了向后兼容。原因包括...

1.  非常早期的处理器不包括硬件乘法和除法。对这些操作的硬件支持意味着现在将二进制转换为十进制更加容易和高效。现在几乎所有东西都使用二进制，而 BCD 几乎被遗忘了。

2.  库中有十进制数字表示，但很少有高级语言曾经为硬件 BCD 提供可移植支持，因此，由于汇编程序不再是大多数开发人员的现实选择，BCD 支持就不再被使用。

3.  随着数字变大，即使打包的 BCD 打包效率也很低。以 10^x 为底的数字表示具有以 10 为底的最重要的属性，并且很容易被解码为十进制。Base 1000 只需要每三位数字 10 位，而不是 12 位，因为 2^10 是 1024。这足以表明您获得了 32 位的额外十进制数字 - 9 位而不是 8 位 - 而且您还剩下 2 位，例如符号位。

问题是，要使这种数字总计算法完全值得，您需要使用可能至少 32 位（8 位）的固定宽度十进制小数。这为（完全展开的）简单循环提供了 12 次操作（6 个掩码、3 个班次、3 个加法）而不是 15 次加法。不过，这是一个临界增益 - 代码中的其他问题很容易意味着它实际上更慢。

64 位（16 个十进制数字）的效率增益更明显，因为仍然只有 16 个操作（8 个掩码、4 个移位、4 个加法）而不是 31 个，但是找到支持 64 位 BCD 操作的处理器的可能性似乎很小。即使你这样做了，你多久需要一次？似乎不太可能值得付出努力和失去可移植性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:35:20.530

这是 Haskell 中的一些内容：

```
sumDigits n = 
  if n == 0 
     then 0
     else let a = mod n 10
          in a + sumDigits (div n 10) 
```

哦，但我刚刚读到你已经这样做了......

（还有很明显的：

```
sumDigits n = sum $ map (read . (:[])) . show $ n 
```

)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:07:10.963

对于短代码，试试这个：

```
int digit_sum(int n){
    if (n<10) return n;
    return n%10 + digit_sum(n/10);
} 
```

或者，用文字来说，

- 如果数字小于十，那么数字总和就是数字本身。

- 否则，数字总和是当前最后一位数字（也称为 n mod10 或 n%10），加上该数字左侧所有内容的数字总和（n 除以 10，使用整数除法）。

- 该算法也可以推广到任何基数，将基数替换为 10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:35:07.803

```
int digit_sum(int n)
Do
    if (n<10) return n;
    Exit do
    else

    n=n%10 + digit_sum(n/10);

Loop 
```

# java - 当组合三个字符 ക (\u0D15) + ് (\u0D4D) + ര (\u0D30) 时，Unicode 字体不会在 SWING 中呈现，得到 ര്ക 而不是 ക്ര

> ID：14950423
> 
> 赞同：6
> 
> 时间：2013-02-19T05:24:42.410
> 
> 标签：java, swing, unicode, fonts, editor

我正在为 Java 中的马拉雅拉姆语编写文本编辑器。

Unicode 字体在 Swing - 中未正确呈现`JTextArea`。字符的组合。文本区域不是混合两个字符，而是单独显示它。swing 和 font 都支持这些字符，但在组合键中它不起作用，即使使用了支持的字体。例如：

## 需要什么

```
ക്രാ 
```

## 正在得到什么

```
്രക 
```

## 代码

```
jButton69.setFont(new java.awt.Font("Meera", 0, 12)); // NOI18N
        jButton69.setText(" ്ര");

    jTextArea1.append(jButton69.getText()); 
```

编辑：（来自作者评论的补充信息）：

当组合三个字符 ക (\u0D15) + ് (\u0D4D) + ര (\u0D30) 时，我得到的是 ര്ക 而不是 ക്ര。

语言是马拉雅拉姆语，字体是 Meera

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:31:36.940

您必须将 JTextArea 字体设置为 Unicode 字体。

除此之外，button69与问题无关，所以我不使用它。

以下代码以您想要的方式显示文本：

```
String problemText = "ഔ";
Font font = new Font("Arial Unicode MS", Font.PLAIN, 18);
JTextArea jTextArea1 = new JTextArea();
jTextArea1.setFont(font);
jTextArea1.append(problemText); 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T12:26:46.543

请查看零宽度连接器和零宽度非连接器。根据您的要求，我使用零宽度连接器得到了正确的输出：\u0d15 + \u0d4d + \u200d + \u0d30。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T12:46:18.227

请查看零宽度连接器和零宽度非连接器。根据您的要求，我通过使用零宽度连接器得到了正确的输出： \u0d15 + \u0d4d + \u200d + \u0d30 （请忽略我之前的答案，它是相同的，但使用错误的用户帐户发布）。

# javascript - CKEDITOR.instances['fullHTMLTextArea']

> ID：14950425
> 
> 赞同：0
> 
> 时间：2013-02-19T05:24:45.313
> 
> 标签：javascript

```
var editor = CKEDITOR.instances['fullHTMLTextArea'];
if(editor)
{
    editor.destroy(true); 
} 
```

任何人都可以正确解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:37:36.620

根据CKEDITOR API [doc](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.html#.instances)

```
var editor = CKEDITOR.instances['fullHTMLTextArea']; 
```

部分告诉

> 保存对创建的所有编辑器实例的引用。此对象中的属性名称对应于实例名称，它们的值包含代表它们的 CKEDITOR.editor 对象。

和

```
if(editor){
    editor.destroy(true);---> must be
 //editor.destroy();

} 
```

[告诉](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#destroy)

> 销毁编辑器实例，释放它使用的所有资源。如果编辑器替换了一个元素，该元素将被恢复。

# android - SimpleCursorAdapter 不会填充我的 ListView，没有错误，只是没有任何反应

> ID：14950433
> 
> 赞同：1
> 
> 时间：2013-02-19T05:25:18.290
> 
> 标签：android, listview, cursor, simplecursoradapter

我试图`listview`从游标填充 a 所以我使用以下代码：

```
Cursor curVal = db.rawQuery("SELECT * FROM category ORDER BY order_cat ASC", null);

String[] inVal = new String[] { "nume_cat", "order_cat" };
int[] outVal = new int[] { R.id.title_cat, R.id.duration  };

SimpleCursorAdapter cadapter = new SimpleCursorAdapter(this, R.layout.list_row, curVal, inVal, outVal);

ListView listView = (ListView) findViewById(R.id.mainListView);
listView.setAdapter(cadapter); 
listView.setOnItemClickListener(this); 
```

这是我的 XML 的：

**List_row.xml**

```
......................

 <TextView
    android:id="@+id/title_cat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thumbnail"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="FILL CAT NAME HERE"
    android:textColor="#040404"
    android:typeface="sans"
    android:textSize="15dip"
    android:textStyle="bold"/>

  <TextView
    android:id="@+id/duration"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title_cat"
    android:textColor="#343434"
    android:textSize="10dip"
    android:layout_marginTop="1dip"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="FILL DURATION HERE" />

 ..................... 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView android:id="@+id/title_main"
        android:text="TITLE HERE"
            android:padding="15dip"
            android:textSize="18dip"
            android:textStyle="bold"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

    <ListView android:layout_width="fill_parent" 
      android:layout_height="fill_parent" 
       android:padding="15dip"
      android:id="@+android:id/mainListView">
    </ListView>

</LinearLayout> 
```

问题：当我运行应用程序时，什么也没有发生，我看不到我的列表视图。Eclipse 不会在 logcat 中返回任何错误或警告...

我尝试了简单的方法，使用 ArrayAdapter 并且一切正常，但我需要使用 cursoradapter 因为我需要在每个列表项上有超过 1 个文本视图。

这是工作的 ArrayAdapter：

```
 ArrayList<String> catList = new ArrayList<String>();
    ListView listView = (ListView) findViewById( R.id.mainListView );
    ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, R.layout.list_row, R.id.title_cat, catList);
    Cursor curVal = db.rawQuery("SELECT * FROM category ORDER BY order_cat ASC", null);
        if (curVal.moveToFirst()) {
        do {
            String data = curVal.getString(curVal.getColumnIndex("nume_cat"));
            listAdapter.add(data);
        } while (curVal.moveToNext());
    } 
    listView.setAdapter(listAdapter); 
    listView.setOnItemClickListener(this); 
```

现在让我们排除任何问题：

**是**的，我的光标包含一个 _id 字段。

**是**的，我仔细检查了我的光标，它有 20 行。

```
System.out.println("Cursor adapter has " + cadapter.getCount() + " lines."); 
```

打印“**光标适配器有 18 行。** ”

可能来自：

```
 int[] outVal = new int[] { R.id.title_cat, R.id.duration  };

    and

    SimpleCursorAdapter cadapter = new SimpleCursorAdapter(this, R.layout.list_row, curVal, inVal, outVal);

    NEED TO REPLACE WITH ?

    int[] outVal = new int[] { android.R.id.title_cat, android.R.id.duration  };

    and

    SimpleCursorAdapter cadapter = new SimpleCursorAdapter(this, android.R.layout.list_row, curVal, inVal, outVal); 
```

但是我如何将 ID 定义为 android.R.id.title_cat 而不是 R.id.title_cat？如果我输入我的 xml

```
 <TextView
        android:id="@+android:id/title_cat" 
```

在我的类文件中，eclipse 向我返回一个错误“ **title_cat 无法解析或不是字段**”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:41:58.397

我认为你在 XMl 有问题。检查您的列表视图的 ID。 `android:id="@+android:id/mainListView">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:12:48.437

将列表视图的 id 指定为

```
android:id="@+android:id/list" 
```

然后给

```
SimpleCursorAdapter cadapter = new SimpleCursorAdapter(this, R.layout.list_row, curVal, inVal, outVal);
setListAdapter(cadapter); 
```

代替

```
ListView listView = (ListView) findViewById(R.id.mainListView);
listView.setAdapter(cadapter); 
```

你的班级也应该扩展 ListActivity

# macos - 如何将文件添加到现有的 Mac OS X .app 包？

> ID：14950440
> 
> 赞同：0
> 
> 时间：2013-02-19T05:26:14.630
> 
> 标签：macos, arduino, app-bundle

我正在为 Arduino 编写一个修改，将 Arduino 板变成游戏控制器。

为了将我的板特定文件添加到编程环境中，现在，用户需要打开`Arduino.app`包，然后将几个不同的文件添加到 Arduino.app 包中的各个文件夹中。它几乎不是用户友好的。如何制作一个安装程序，自动将我的文件移动到 中的适当位置`Arduino.app`，或者这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:32:10.443

您可以下载 PackageMaker（可[在此处](https://developer.apple.com/downloads/index.action)获得，在 Xcode 的辅助工具下载中）。

然后，您将能够制作一个用户只需双击即可安装的 .pkg。您还可以编写一个脚本来检查 Arduino 是否已安装，如果未安装则停止安装。你明白了。

![包装制造商屏幕截图](../Images/d9151440f931e39d68386aef593cca79.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:16:27.080

通常，尤其是在今天的代码签名 MacOS 应用程序方法中（对应用程序或其资源/文件的任何修改都会破坏应用程序并使其无法启动），我会说“你不走运”。

但 Arduino 是少有的***开源***应用程序之一。

您可以从此页面获取源代码：

[http://arduino.cc/en/Main/Software](http://arduino.cc/en/Main/Software)

并对项目进行修改，然后为自己构建一个全新的定制副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:32:30.467

我想出了如何使用脚本的魔力来做到这一点！

您可以在这里查看我的解决方案： [http ://code.google.com/p/unojoy/source/browse/#hg%2FLeoJoy%2FLeoJoy%20Installer.app%2FContents%2FMacOS](http://code.google.com/p/unojoy/source/browse/#hg%2FLeoJoy%2FLeoJoy%20Installer.app%2FContents%2FMacOS)

它所在的文件夹结构使其在 OSX 上显示为应用程序，并且两个脚本（LeoJoy Installer 和 LeoJoyInstaller.command）复制文件。那里有两个脚本，因为我想弹出一个控制台窗口来显示用户进度，这是我能弄清楚如何做到这一点的唯一方法。但是，如果您在与 Arduino 应用程序相同的目录中运行此应用程序，它会将文件从安装程序应用程序复制到 Arduino.app 包中，从而更新 Arduino 应用程序，因此我不必分发完整的单独版本的 Arduino。

# sql - 运行时错误“3704”操作在 VB6 中关闭时不允许使用 SP 使用临时表

> ID：14950443
> 
> 赞同：3
> 
> 时间：2013-02-19T05:26:37.443
> 
> 标签：sql, vbscript, vb6, ado, msflexgrid

我正在使用存储过程“sp_Missingdata”来获取数据并在 MSFlexGrid 中显示，但我收到错误为 - **关闭对象时不允许运行时错误“3704”操作** 我在谷歌搜索了很多并更改了这些内容 - 1\. 为存储过程设置 NOCOUNT ON。
2\. 为存储过程设置 SET ANSI_WARNINGS OFF。

```
Private Sub Command2_Click()
Dim cmd As ADODB.Command
  Dim sqlnew, dd
Set cmd = New ADODB.Command
 cmd.ActiveConnection = ArtmConn
 cmd.CommandType = adCmdStoredProc
 cmd.CommandText = "sp_missingData"

  Dim rsnew As ADODB.Recordset
  Set rsnew = New ADODB.Recordset
  Set rsnew = cmd.Execute

  If Not rsnew.EOF Then  <-- Error is occuring here
    Set tblSop.DataSource = rsnew
  End If
  rsnew.Close
  Set rsnew = Nothing

End Sub 
```

注意-我的 SP 正在使用临时表-这是我的 sp

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET NOCOUNT ON
GO
SET ANSI_WARNINGS OFF
GO

ALTER procedure [dbo].[sp_missingData] --exec [sp_missingData]
as begin
delete from tbl_missingData
select ol_code as outletNo, start as StartreceiptNo into #temp  from
(select l.s_ol_code as ol_code, l.sno + 1 as start
from vSalesNo as l
  left outer join vSalesNo as r on l.sno + 1 = r.sno and l.s_ol_code = r.s_ol_code
where r.sno is null) as tmpa inner join
(select s_ol_code, max(s_no) as s_no from sales group by s_ol_code) as tmpb
on s_ol_code = ol_code and start <= substring(s_no, 0, 11) where start!=0
union all
select ol_code as outletNo, start as EndreceiptNo   from
(select l.s_ol_code as ol_code, l.sno - 1 as start
from vSalesNo as l
  left outer join vSalesNo as r on l.sno - 1 = r.sno and l.s_ol_code = r.s_ol_code
where r.sno is null) as tmpa inner join
(select s_ol_code, max(s_no) as s_no from sales group by s_ol_code) as tmpb
on s_ol_code = ol_code and start <= substring(s_no, 0, 11) where start!=0
order by ol_code, start;
insert into tbl_missingData
SELECT * FROM
    (SELECT ROW_NUMBER() 
        OVER (ORDER BY outletNo) AS rownumber, 
        * 
    FROM #temp) AS Documents

select *,dbo.countOfIds(outletNo,rowNumber) as rpNo into #temp1 from tbl_missingData where outletno!='9163'
select * from #temp1
end 
```

在执行 SP 时出现以下结果集，我想在 MSFlexGrid 中显示它

```
1   101 6381    p1
2   101 6472    p2
3   101 6534    p3
4   101 6565    p4
5   102 292 p1
6   117 234 p1
7   121 385 p1
8   121 6874    p2
9   121 6917    p3
10  121 6936    p4
11  121 6941    p5
12  121 6953    p6
13  121 6963    p7
14  121 7044    p8
15  121 7047    p9
16  124 14  p1
17  126 279 p1
18  127 5685    p1
19  127 5693    p2
20  139 650 p1
21  139 652 p2
22  401 942 p1
23  401 946 p2
24  401 951 p3
25  401 951 p4
26  401 953 p5
27  401 953 p6
28  401 956 p7
29  401 965 p8
30  401 972 p9
31  401 972 p10
32  401 974 p11
33  401 975 p12
34  401 980 p13
35  401 986 p14
36  401 999 p15
37  401 1000    p16 
```

请帮我解决这个问题，任何建议/帮助都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:31:31.807

您需要`SET NOCOUNT ON`在过程的主体中作为第一行，而不是在声明之外，这仅在更改存储过程时适用。

# html - 如何为ie8的标签设置边框？

> ID：14950445
> 
> 赞同：1
> 
> 时间：2013-02-19T05:26:57.163
> 
> 标签：html, internet-explorer, internet-explorer-8, label, border

在 HTML 中，如何为 ie8 的标签设置边框？

```
 <div id="childDivId" style="width: 28em; color: gray; font-family: Calibri;
font-size: 2em; font-weight: bold; padding-top: 27.5em; padding-left: 2em;
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);/* for ie8 */">

  <label id="savedDataLbl" style="cursor: pointer;"  onclick="setSavedData()">
     Saved Data
  </label>
   | 
   <label id="searchResultsLbl" style="cursor: pointer" onclick="setSearchResults()">        
    Search Results
   </label>
</div> 
```

没有 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:29:37.597

如果您正在谈论为`label`元素添加边框，您可以使用 CSS 来做到这一点：

```
label {
  border: 1px solid #ccc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:38:49.200

尝试这个：

```
 <label id="savedDataLbl" style="cursor: pointer; border: 1px solid red;"  onclick="setSavedData()"> 
```

还要添加一些`padding-bottom`到您的 div 中。

它在 IE8 中可见！

# java - 创建对对象的引用

> ID：14950448
> 
> 赞同：2
> 
> 时间：2013-02-19T05:27:10.333
> 
> 标签：java, object, reference

我在这里有这个对象：

```
public class ItemInfo {

    String productName;
    String rfidTagNumber;
    String originalLocal;
    String currentLocal;
    double productPrice;

    public ItemInfo(String name, String tag, String origLoc, String curLoc, double price) {
        productName = name;
        rfidTagNumber = tag;
        originalLocal = origLoc;
        currentLocal = curLoc;
        productPrice = price;
    } 
```

我需要`ItemInfo`在这里创建并引用一个对象：

```
public class ItemInfoNode {

    ItemInfoNode next;
    ItemInfoNode prev;

    public ItemInfoNode(){

    }

    public void setInfo(ItemInfo info) {

    }

    public ItemInfo getInfo(){
        return null;    
    }

    public void setNext(ItemInfoNode node) {

    }

    public void setPrev(ItemInfoNode node) {

    }

    public ItemInfoNode getNext() {
        return null;
    }

    public ItemInfoNode getPrev() {
        return null;
    }
} 
```

我知道如何制作新对象，但我不太确定这是正确的，所以我省略了这一行，我如何只创建一个引用？

编辑：只是另一个小侧边栏，我有两个 ItemInfoNode 对象 next 和 prev 如上所示，我只是将构造函数留空吗？可以吗？我粘贴了课程的其余部分以显示功能，如果无论如何这将有助于答案。再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:30:03.133

在 Java 中，`new`关键字返回对新构造对象的引用。因此，在

```
String s = new String("foo"); 
```

variable 的值`s`是对 String 对象的引用。然后，如果你要做类似的事情

```
String t = s; 
```

那么你已经设置`t`了与 相同的值`s`，也就是说，它现在是对同一个对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:30:18.860

目前尚不清楚您要完成什么，但创建对象的最简单方法是使用类名`ItemInfo`和`new`关键字。例如，您可以使用这行代码并全局声明您的对象引用：

```
ItemInfo myObj= new ItemInfo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:32:23.867

您可以像这样创建一个新实例

`ItemInfo myObj = new ItemInfo("name", "tag", "location", "local", 0.0);`

或者，做这样的事情： -

```
public class ItemInfoNode{

        ItemInfo myObj;

        public ItemInfoNode(ItemInfo myObj){

        this.myObj = myObj;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:04:28.870

这看起来像是[LinkedList](http://en.wikipedia.org/wiki/Linked_list)的实现。因此，您要做的是使用 setter 存储对下一个节点和上一个 ItemInfoNode 的引用 - 即 setNext() 和 setPrev() 方法，方法是将参数（它们是引用）存储为您的类变量 next 和 prev已经宣布了。然后在你的吸气剂中 - 即 getPrev() 和 getNext() 你可以返回你存储的变量。

```
public void setNext(ItemInfoNode node){
    next = node;
}
public void setPrev(ItemInfoNode node){
    prev = node;
}
public ItemInfoNode getNext(){
    return next;
}
public ItemInfoNode getPrev(){
    return prev;
} 
```

# wpf - WPF 风格：泛化

> ID：14950452
> 
> 赞同：1
> 
> 时间：2013-02-19T05:27:37.150
> 
> 标签：wpf, styles

在成为 WPF 样式之后，有没有办法概括硬编码的列名（名称和代码），以便在 ComboBox 上实际应用此样式时可以指定它们？更好的是，如果我什至可以修改列数？

```
 <Style TargetType="ComboBox" x:Key="MultiColumnComboBoxStyle">
        <Style.Resources>
            <Style TargetType="ComboBoxItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ComboBoxItem">
                            <Border>
                                <Grid HorizontalAlignment="Stretch" TextElement.FontWeight="Normal">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="Code" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" Text="{Binding Path=Name}" />
                                    <Rectangle Grid.Column="1" Width="1" Fill="Black" />
                                    <TextBlock Grid.Column="2" Text="{Binding Path=Code}" Margin="5,0,5,0" />
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Style.Resources>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel Grid.IsSharedSizeScope="True" IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:47:20.633

而不是使用样式，您可以考虑为您的列创建一个具有依赖属性的自定义控件。

涉及一些设置，但它会更好地满足您的需求，特别是如果您想重用它。

一个示例如下所示。其中一些是您应该能够填写的伪代码。

```
<!-- In your generic.xaml file -->
<Style TargetType="MyCustomComboBox" >
  <Setter Property="Template" >
     <Setter.Value>
        <ControlTemplate TargetType="MyCustomComboBox" >
            <!-- your template code goes here -->
            <Grid x:Name="_myCustomGrid />
         </ControlTemplate> 
      </Setter.Value>
  </Setter>
</Style>

 //then in a cs file inherit from the combo box
public class MyCustomColumnComboBox : ComboBox //get all the combobox functionality
{
     public IList ComboColumns 
     { 
          get { return (IList)GetValue(ComboColumnsProperty);} 
          set { SetValue(ComboColumnsProperty,value);} 
     }
     public static readonly DependencyProperty ComboColumnsProperty = DependencyProperty.RegisterProperty(...);

     private Grid _grid;

     public override OnApplyTemplate() 
     {
         //pull your template grid info here, then use that when setting the columns.
         _grid = GetTemplateChild("_myCustomGrid") as Grid;
         //from here you can check to see if you have your list yet, 
         //if you don't then you maintain the grid for when you do have your list.
         // This can behave different depending on if you are in wpf or silverlight,
         // and depending on how you were to add the items to the dependency property.
     }
} 
```

总之，为您添加具有自定义依赖项属性的自定义控件，然后在您的主题/generic.xaml 中放入您的模板并将网格命名为您想要在应用模板功能中拉入模板的内容。从那里你要么准备好设置，要么可以设置你在依赖属性中指定的列。

注意：依赖属性实际上并不是必需的，但它可以帮助您在以后使用更改回调上的依赖属性之类的东西时获得更多的灵活性，以便在必要时进行更新。

# android - 退出时显示敬酒消息，同时关闭蓝牙

> ID：14950453
> 
> 赞同：0
> 
> 时间：2013-02-19T05:27:41.030
> 
> 标签：android, bluetooth

我想在退出应用程序时显示一条祝酒消息，就像标题所说的那样。由于 OnClickListener 的限制，我无法使用以下内容。

```
btnExit.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // close the application and turn off bluetooth
            btAdapter.disable();
            Toast.makeText(this, "Bluetooth is turned off.",
                    Toast.LENGTH_SHORT).show();
            finish();
        }

    }); 
```

我希望能够在关闭蓝牙并显示表示蓝牙已关闭的吐司时单击按钮并退出程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:30:27.613

在[Toast.makeTest()](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20java.lang.CharSequence,%20int%29)中，第一个参数是上下文。在您传递的代码中`this`，在您的情况下是`onClickListener`. 您应该通过`context`那里，这可能类似于`YourActivity.this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:29:09.067

在 Toast 中使用您的**ActivityName.this**而不是**this 。**

# javascript - 使用 javascript/uiwebview ios 动态突出显示

> ID：14950455
> 
> 赞同：0
> 
> 时间：2013-02-19T05:28:05.997
> 
> 标签：javascript, ios, dynamic, uiwebview, highlighting

我在纯 html 的 UIWebView 上显示了一些文本内容。当前段落以黄色突出显示，并且用户选择了单词“If the”。（图片链接：http: [//i.stack.imgur.com/GKp9h.png](http://i.stack.imgur.com/GKp9h.png)）

1）当用户在uiwebiew上选择了一些文字时，如何进行动态高亮？即当用户选择文本时，所选择的文本会以紫色突出显示？

例如，我喜欢用紫色突出显示“If the”这个词（可能使用 window.getSelection() ？），并且这种行为是动态的，因此当用户选择后续词时，这些被选择的词会以紫色突出显示。

**我目前正在努力的是：**

1) 当用户在 uiwebview 上选择一些文本时，我应该听什么事件处理程序（JavaScript 或 iOS）？这是在 uimenucontroller 打开之前。

2）有一次，我得到了选定的文本（使用window.getSelection（），我如何以一种干净有效的方式修改DOM，以便突出显示选定的文本？

我想2）我不能直接使用`style.backgroundColor=<hex code of purple>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:37:19.940

这里有一个非常相似的问题：[How to get selection text from UIWebView?](https://stackoverflow.com/questions/6260926/how-to-get-selection-text-from-uiwebview)

从那里接受的答案看来，这可能会回答您的问题：http: [//zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins/](http://zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins/)关于获取和样式化的讨论Web 视图中的文本选择。

# ios - 用于 iPod Touch 4G 的 iPhone 模拟器

> ID：14950462
> 
> 赞同：1
> 
> 时间：2013-02-19T05:28:52.657
> 
> 标签：ios, ios-simulator, nstimer, ipod-touch

xcode 中 iPod Touch 4G 的 iPhone 模拟器的等效版本是什么？

我正在尝试模拟我在应用商店中使用了将近一年的应用。最近，一位新用户抱怨说，该应用程序在 IOS 6.0.1 的 iPod Touch 4G 上崩溃了。我决定用模拟器开始调试。但我不确定我应该为 iPod 4G 使用哪个版本的 iPhone 模拟器。是 iPhone 5 吗？

顺便说一句，这是一个非常简单的应用程序，它不使用 iPod Touch 2G 上没有的任何硬件功能。作为最低硬件要求，我们在发布时在 iPod Touch 2G 上测试了该应用程序。它确实使用 NSTimers 并且用户抱怨似乎围绕着它。

我很感激任何帮助。

谢谢你。此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:46:19.830

iPod Touch 4G 的等价物是 3.5 英寸屏幕尺寸和视网膜显示屏的 iPhone 模拟器。 `When you launch the simulator, in the menu bar select: Hardware -> Device -> iPhone (Retina 3.5 inch)` iOS 的版本可能会有所不同，您可以从`Hardware -> Version`菜单中更改它。要安装具有早期 iOS 版本的模拟器，请访问`Xcode -> Preferences -> Downloads`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T05:40:28.987

正如您所说，您的应用程序在应用商店中已存在将近一年。它应该可以在更高的 iOS 版本（例如 6.0 及更高版本）中正常工作。但是对于某些 UI，我遇到了同样的问题。在 5.0 中运行良好，但在 6.0 中失败。可能有些方法已被弃用。

确保您获得完美的日志。试试 iPhone 6.0 模拟器

# mysql - 如何在mysql中拆分名称字符串？

> ID：14950466
> 
> 赞同：138
> 
> 时间：2013-02-19T05:29:11.520
> 
> 标签：mysql, sql, split, substring

如何在mysql中拆分名称字符串？

例如：

```
name
-----
Sachin ramesh tendulkar
Rahul dravid 
```

拆分名称，如`firstname,middlename,lastname`：

```
firstname   middlename    lastname
---------  ------------   ------------
sachin     ramesh         tendulkar
rahul      dravid 
```

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-02-19T06:26:14.327

我已将此答案分为两（2）种方法。第一种方法会将您的全名字段分为名字、中间名和姓氏。如果没有中间名，中间名将显示为 NULL。

```
SELECT
   SUBSTRING_INDEX(SUBSTRING_INDEX(fullname, ' ', 1), ' ', -1) AS first_name,
   If(  length(fullname) - length(replace(fullname, ' ', ''))>1,  
       SUBSTRING_INDEX(SUBSTRING_INDEX(fullname, ' ', 2), ' ', -1) ,NULL) 
           as middle_name,
   SUBSTRING_INDEX(SUBSTRING_INDEX(fullname, ' ', 3), ' ', -1) AS last_name
FROM registeredusers 
```

第二种方法将中间名视为姓氏的一部分。我们只会从您的全名字段中选择名字和姓氏列。

```
SELECT
   SUBSTRING_INDEX(SUBSTRING_INDEX(fullname, ' ', 1), ' ', -1) AS first_name,
    TRIM( SUBSTR(fullname, LOCATE(' ', fullname)) ) AS last_name
FROM registeredusers 
```

您可以使用 substr、locate、substring_index 等做很多很酷的事情。查看手册是否有一些真正的困惑。[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-19T05:35:29.433

MySQL 中没有字符串拆分功能。所以你必须创建自己的功能。这将对您有所帮助。[更多细节在这个链接](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)。

### 功能：

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

### 用法：

```
SELECT SPLIT_STR(string, delimiter, position) 
```

### 例子：

```
SELECT SPLIT_STR('a|bb|ccc|dd', '|', 3) as third;

+-------+
| third |
+-------+
| ccc   |
+-------+ 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-08-13T20:01:44.587

好吧，我没有使用任何东西，所以我决定创建一个真正简单的拆分函数，希望它有所帮助：

```
DECLARE inipos INTEGER;
DECLARE endpos INTEGER;
DECLARE maxlen INTEGER;
DECLARE item VARCHAR(100);
DECLARE delim VARCHAR(1);

SET delim = '|';
SET inipos = 1;
SET fullstr = CONCAT(fullstr, delim);
SET maxlen = LENGTH(fullstr);

REPEAT
    SET endpos = LOCATE(delim, fullstr, inipos);
    SET item =  SUBSTR(fullstr, inipos, endpos - inipos);

    IF item <> '' AND item IS NOT NULL THEN           
        USE_THE_ITEM_STRING;
    END IF;
    SET inipos = endpos + 1;
UNTIL inipos >= maxlen END REPEAT; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-10-21T16:15:07.397

这是我使用的拆分功能：

```
--
-- split function
--    s   : string to split
--    del : delimiter
--    i   : index requested
--

DROP FUNCTION IF EXISTS SPLIT_STRING;

DELIMITER $

CREATE FUNCTION 
   SPLIT_STRING ( s VARCHAR(1024) , del CHAR(1) , i INT)
   RETURNS VARCHAR(1024)
   DETERMINISTIC -- always returns same results for same input parameters
    BEGIN

        DECLARE n INT ;

        -- get max number of items
        SET n = LENGTH(s) - LENGTH(REPLACE(s, del, '')) + 1;

        IF i > n THEN
            RETURN NULL ;
        ELSE
            RETURN SUBSTRING_INDEX(SUBSTRING_INDEX(s, del, i) , del , -1 ) ;        
        END IF;

    END
$

DELIMITER ;

SET @agg = "G1;G2;G3;G4;" ;

SELECT SPLIT_STRING(@agg,';',1) ;
SELECT SPLIT_STRING(@agg,';',2) ;
SELECT SPLIT_STRING(@agg,';',3) ;
SELECT SPLIT_STRING(@agg,';',4) ;
SELECT SPLIT_STRING(@agg,';',5) ;
SELECT SPLIT_STRING(@agg,';',6) ; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-02-19T07:30:17.247

您也可以使用 bewlo one：

```
SELECT SUBSTRING_INDEX(Name, ' ', 1) AS fname,
SUBSTRING_INDEX(SUBSTRING_INDEX(Name,' ', 2), ' ',-1) AS mname,
SUBSTRING_INDEX(Name, ' ', -1) as lname FROM mytable; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-20T06:24:11.013

```
select (case when locate('(', LocationName) = 0 
        then 
            horse_name
        else 
           left(LocationName, locate('(', LocationName) - 1)
       end) as Country            
from   tblcountry; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-31T14:18:31.493

```
concat(upper(substring(substring_index(NAME, ' ', 1) FROM 1 FOR 1)), lower(substring(substring_index(NAME, ' ', 1) FROM 2 FOR length(substring_index(NAME, ' ', 1))))) AS fname,
CASE 
WHEN length(substring_index(substring_index(NAME, ' ', 2), ' ', -1)) > 2 THEN 
  concat(upper(substring(substring_index(substring_index(NAME, ' ', 2), ' ', -1) FROM 1 FOR 1)), lower(substring(substring_index(substring_index(f.nome, ' ', 2), ' ', -1) FROM 2 FOR length(substring_index(substring_index(f.nome, ' ', 2), ' ', -1)))))
  ELSE 
  CASE 
  WHEN length(substring_index(substring_index(f.nome, ' ', 3), ' ', -1)) > 2 THEN 
    concat(upper(substring(substring_index(substring_index(f.nome, ' ', 3), ' ', -1) FROM 1 FOR 1)), lower(substring(substring_index(substring_index(f.nome, ' ', 3), ' ', -1) FROM 2 FOR length(substring_index(substring_index(f.nome, ' ', 3), ' ', -1)))))
  END 
END 
AS mname 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-28T12:20:39.550

```
SELECT
    p.fullname AS 'Fullname',
    SUBSTRING_INDEX(p.fullname, ' ', 1) AS 'Firstname',
    SUBSTRING(p.fullname, LOCATE(' ',p.fullname), 
        (LENGTH(p.fullname) - (LENGTH(SUBSTRING_INDEX(p.fullname, ' ', 1)) + LENGTH(SUBSTRING_INDEX(p.fullname, ' ', -1))))
    ) AS 'Middlename',
    SUBSTRING_INDEX(p.fullname, ' ', -1) AS 'Lastname',
    (LENGTH(p.fullname) - LENGTH(REPLACE(p.fullname, ' ', '')) + 1) AS 'Name Qt'
FROM people AS p
LIMIT 100; 
```

**解释：**

查找名字和姓氏很容易，您只需使用 SUBSTR_INDEX 函数 Magic发生在中间名中，其中使用 SUBSTR 和 Locate 查找全名的第一个空格位置和 LENGTH - (LENGTH firstname + LENGTH lastname) 以获取所有中间名。

请注意，名字和姓氏的长度是使用 SUBSTR_INDEX 计算的

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-12-09T13:19:54.217

在空格分隔符的第二个实例之后获取字符串的其余部分

```
SELECT
   SUBSTRING_INDEX(SUBSTRING_INDEX('Sachin ramesh tendulkar', ' ', 1), ' ', -1) AS first_name, 
       SUBSTRING_INDEX(SUBSTRING_INDEX('Sachin ramesh tendulkar', ' ', 2), ' ', -1) 
           AS middle_name,
   SUBSTRING('Sachin ramesh tendulkar',LENGTH(SUBSTRING_INDEX('Sachin ramesh tendulkar', ' ', 2))+1) AS last_name 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-09T04:41:24.160

```
CREATE DEFINER=`root`@`localhost` FUNCTION `getNameInitials`(`fullname` VARCHAR(500), `separator` VARCHAR(1)) RETURNS varchar(70) CHARSET latin1
    DETERMINISTIC
BEGIN
DECLARE `result` VARCHAR(500) DEFAULT '';
DECLARE `position` TINYINT;

SET `fullname` = TRIM(`fullname`);

SET `position` = LOCATE(`separator`, `fullname`);

IF NOT `position`
THEN RETURN LEFT(`fullname`,1);
END IF;

SET `fullname` = CONCAT(`fullname`,`separator`);
SET `result` = LEFT(`fullname`, 1);

cycle: LOOP
    SET `fullname` = SUBSTR(`fullname`, `position` + 1);
    SET `position` = LOCATE(`separator`, `fullname`);

    IF NOT `position` OR NOT LENGTH(`fullname`)
    THEN LEAVE cycle;
    END IF;

    SET `result` = CONCAT(`result`,LEFT(`fullname`, 1));
   -- SET `result` = CONCAT_WS(`separator`, `result`, `buffer`);
END LOOP cycle;

RETURN upper(`result`);
END 
```

* * *

1.在mysql中执行这个函数。2.这将创建一个函数。现在你可以在任何你想要的地方使用这个功能。

```
 SELECT `getNameInitials`('Kaleem Ul Hassan', ' ') AS `NameInitials`; 
```

3\. 上面的getNameInitials第一个参数是要过滤的字符串，第二个参数是要分隔字符串的旁观者角色。4\. 在上面的例子中，'Kaleem Ul Hassan' 是名字，我想得到首字母，我的分隔符是空格''。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-04-27T07:26:18.320

您可以使用[common_schema](https://code.google.com/archive/p/common-schema/)并使用该[`tokenize`](https://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/tokenize.html)功能。有关这方面的更多信息，请点击链接。你的代码最终会像：

`call tokenize(name, ' ');`

但是，请注意空格不是名字和姓氏的可靠分隔符。例如，在西班牙，有两个姓氏是很常见的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-07-10T07:37:48.437

我们将课程名称和章节名称的值存储在单列章节名称中。

像这样存储的值：“JAVA：多态”

您需要检索 CourseName : JAVA 和 ChapterName : Polymorphism

下面是要检索的 SQL 选择查询。

```
 SELECT   
          SUBSTRING_INDEX(SUBSTRING_INDEX(ChapterName, ' ', 1), ' ', -1) AS 
       CourseName,

       REPLACE(TRIM(SUBSTR(ChapterName, LOCATE(':', ChapterName)) ),':','') AS 
       ChapterName
       FROM Courses where `id`=1; 
```

如果对此有任何疑问，请告诉我。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-22T14:58:19.563

要在空格分隔符的第二个实例之后获取字符串的其余部分：

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(MsgRest, ' ', 1), ' ', -1) AS EMailID
,  SUBSTRING_INDEX(SUBSTRING_INDEX(MsgRest, ' ', 2), ' ', -1) AS DOB
,  IF(
    LOCATE(' ', `MsgRest`) > 0,
    TRIM(SUBSTRING(SUBSTRING(`MsgRest`, LOCATE(' ', `MsgRest`) +1), 
         LOCATE(' ', SUBSTRING(`MsgRest`, LOCATE(' ', `MsgRest`) +1)) +1)),
    NULL
) AS Person
FROM inbox 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-16T15:38:18.070

在这里结合一些答案来创建一个返回字符串部分的 SP。

```
drop procedure if exists SplitStr;
DELIMITER ;;
CREATE PROCEDURE `SplitStr`(IN Str VARCHAR(2000), IN Delim VARCHAR(1))  
    BEGIN
        DECLARE inipos INT;
        DECLARE endpos INT;
        DECLARE maxlen INT;
        DECLARE fullstr VARCHAR(2000);
        DECLARE item VARCHAR(2000);
        create temporary table if not exists tb_split
        (
            item varchar(2000)
        );

        SET inipos = 1;
        SET fullstr = CONCAT(Str, delim);
        SET maxlen = LENGTH(fullstr);

        REPEAT
            SET endpos = LOCATE(delim, fullstr, inipos);
            SET item =  SUBSTR(fullstr, inipos, endpos - inipos);

            IF item <> '' AND item IS NOT NULL THEN           
                insert into tb_split values(item);
            END IF;
            SET inipos = endpos + 1;
        UNTIL inipos >= maxlen END REPEAT;

        SELECT * from tb_split;
        drop table tb_split;
    END;;
DELIMITER ; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-23T10:37:35.007

**首先创建程序如下：**

```
CREATE DEFINER=`root`@`%` PROCEDURE `sp_split`(str nvarchar(6500), dilimiter varchar(15), tmp_name varchar(50))
BEGIN

    declare end_index   int;
    declare part        nvarchar(6500);
    declare remain_len  int;

    set end_index      = INSTR(str, dilimiter);

    while(end_index   != 0) do

        /* Split a part */
        set part       = SUBSTRING(str, 1, end_index - 1);

        /* insert record to temp table */
        call `sp_split_insert`(tmp_name, part);

        set remain_len = length(str) - end_index;
        set str = substring(str, end_index + 1, remain_len);

        set end_index  = INSTR(str, dilimiter);

    end while;

    if(length(str) > 0) then

        /* insert record to temp table */
        call `sp_split_insert`(tmp_name, str);

    end if;

END 
```

**之后创建过程如下：**

```
CREATE DEFINER=`root`@`%` PROCEDURE `sp_split_insert`(tb_name varchar(255), tb_value nvarchar(6500))
BEGIN
    SET @sql = CONCAT('Insert Into ', tb_name,'(item) Values(?)'); 
    PREPARE s1 from @sql;
    SET @paramA = tb_value;
    EXECUTE s1 USING @paramA;
END 
```

**如何调用测试**

```
CREATE DEFINER=`root`@`%` PROCEDURE `test_split`(test_text nvarchar(255))
BEGIN

    create temporary table if not exists tb_search
        (
            item nvarchar(6500)
        );

    call sp_split(test_split, ',', 'tb_search');

    select * from tb_search where length(trim(item)) > 0;

    drop table tb_search;

END

call `test_split`('Apple,Banana,Mengo'); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-27T15:50:34.200

根据以前的答案并做一些修改......

笔记：

`p_delimiter`必须是`VARCHAR(1)`couse `CHAR(1)`if is `' '`(space) give `''`(删除空格并返回空字符串)

而不是使用`LENGTH`I prefer `CHAR_LENGTH`which is safe for multibyte characters like`UTF`

```
DROP FUNCTION IF EXISTS FN_SPLIT_STR;

DELIMITER ;;

CREATE FUNCTION FN_SPLIT_STR(
    p_input VARCHAR(2000), p_delimiter VARCHAR(1), p_position INT
)
    RETURNS VARCHAR(2000)
    DETERMINISTIC
BEGIN
    DECLARE chunks INT;
    SET chunks := CHAR_LENGTH(p_input) - CHAR_LENGTH(REPLACE(p_input, p_delimiter, '')) + 1;

    IF p_position > chunks THEN
        RETURN NULL;
    END IF;

    RETURN SUBSTRING_INDEX(SUBSTRING_INDEX(p_input, p_delimiter, p_position), p_delimiter, -1);
END;;

DELIMITER ; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-05-24T06:09:42.687

 **```
DELIMITER $$

DROP FUNCTION IF EXISTS `split_name`$$

CREATE FUNCTION split_name (p_fullname TEXT, p_part INTEGER)
RETURNS TEXT
    READS SQL DATA
BEGIN
    DECLARE v_words INT UNSIGNED;
    DECLARE v_name TEXT;

    SET p_fullname=RTRIM(LTRIM(p_fullname));

    SET v_words=(SELECT SUM(LENGTH(p_fullname) - LENGTH(REPLACE(p_fullname, ' ', ''))+1));

    IF v_words=1 THEN 
        IF p_part=1 THEN
            SET v_name=p_fullname;
        ELSEIF p_part=2 THEN
            SET v_name=NULL;
        ELSEIF p_part=3 THEN
            SET v_name=NULL;
        ELSE
            SET v_name=NULL;
        END IF; 
    ELSEIF v_words=2 THEN 
        IF p_part=1 THEN
            SET v_name=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
        ELSEIF p_part=2 THEN
            SET v_name=SUBSTRING(p_fullname, LOCATE(' ', p_fullname) + 1);
        ELSEIF p_part=3 THEN
            SET v_name=NULL;
        ELSE
            SET v_name=NULL;
        END IF; 
    ELSEIF v_words=3 THEN 
        IF p_part=1 THEN
            SET v_name=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
        ELSEIF p_part=2 THEN
            SET p_fullname=SUBSTRING(p_fullname, LOCATE(' ', p_fullname) + 1);
            SET v_name=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
        ELSEIF p_part=3 THEN
            SET p_fullname=REVERSE (SUBSTRING(p_fullname, LOCATE(' ', p_fullname) + 1));
            SET p_fullname=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
            SET v_name=REVERSE(p_fullname);
        ELSE
            SET v_name=NULL;
        END IF; 
    ELSEIF v_words>3 THEN 
        IF p_part=1 THEN
            SET v_name=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
        ELSEIF p_part=2 THEN
            SET p_fullname=REVERSE(SUBSTRING(p_fullname, LOCATE(' ', p_fullname) + 1));
            SET p_fullname=SUBSTRING(p_fullname, LOCATE(' ', p_fullname,SUBSTRING_INDEX(p_fullname,' ',1)+1) + 1);
            SET v_name=REVERSE(p_fullname);
        ELSEIF p_part=3 THEN
            SET p_fullname=REVERSE (SUBSTRING(p_fullname, LOCATE(' ', p_fullname) + 1));
            SET p_fullname=SUBSTRING(p_fullname, 1, LOCATE(' ', p_fullname) - 1);
            SET v_name=REVERSE(p_fullname);
        ELSE
            SET v_name=NULL;
        END IF;
    ELSE
        SET v_name=NULL;
    END IF;
 RETURN v_name; 
END; 
```

 **```
SELECT split_name('Md. Obaidul Haque Sarker',1) AS first_name,
split_name('Md. Obaidul Haque Sarker',2) AS middle_name,
split_name('Md. Obaidul Haque Sarker',3) AS last_name 
```****

# shared-libraries - RPM 无法从另一个 RPM 中找到共享库

> ID：14950467
> 
> 赞同：1
> 
> 时间：2013-02-19T05:29:10.937
> 
> 标签：shared-libraries, rpm

我制作了两个 RPM（lib.rpm 和 program.rpm），一个包含共享库，例如。libtest.so、libtest.so.1、libtest.so.1.0。另一个包含链接到共享库的单个二进制文件，例如。测试程序。

我在没有问题的新机器上安装了 lib.rpm。复制 test_program 并运行良好。然后我构建了包含 test_program 的 program.rpm，再次没有问题。但是当我做一个 rpm -ivh program.rpm 我得到：

```
error: Failed dependencies:
    libtest.so.1() (64bit) is needed by test_program-0.1-1.x86_64 
```

然而，在 test_program 上执行 ldd 时，它清楚地在 /usr/lib64/libtest.so.1 中找到了该文件。

我的两个规格文件都是最低限度的。除了包描述之外，我只在 %files 下添加了一个条目，并将 AutoReqProv 设置为 no。

那么给了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:27:05.990

在您提供的[pastebin_link](http://pastebin.com/jCVZA9Mb)中，我注意到

```
AutoReqProv: no 
```

我认为这会导致不填充`Provides`rpm 的数据 - 因此有关文件的信息不会进入 rpm 数据库。

解决方案可能是将其删除`AutoReqProv`或设置为`yes`.

**编辑：** *根据 Nghia 的评论，它没有帮助：*

~~不知道你为什么需要这个，但如果你真的需要，明确提及~~

```
Provides: /usr/lib64/libtest.so /usr/lib64/libtest.so.1 /usr/lib64/libtest.so.1.0 
```

~~可能会解决你的问题。~~

# vbscript - 递归访问文件夹内的子文件夹文件

> ID：14950475
> 
> 赞同：3
> 
> 时间：2013-02-19T05:29:44.980
> 
> 标签：vbscript, directory

我编写了这段代码来访问文件夹中的 Excel 文件：

```
strPath="C:\Test\"

Set objFso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFso.GetFolder (strPath)
Set objExcel= CreateObject("Excel.Application")
objExcel.Visible= False

For Each objFile In objFolder.Files
 If objFso.GetExtensionName(objFile.Path) = "xls" Then 
```

现在我必须创建一些子文件夹并将一些 .xls 文件放入其中。

我应该在我的代码中进行哪些修改以搜索主文件夹和所有其他子文件夹中的文件（子文件夹中也有一些文件夹）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T19:18:53.787

这其实是一个很好解决的问题。递归意味着您创建一个自引用函数（一个调用自身的函数）。在您的情况下，您将为当前文件夹的每个子文件夹调用函数本身。

```
TraverseFolders objFso.GetFolder(strPath)

Function TraverseFolders(fldr)
  ' do stuff with the files in fldr here, or ...

  For Each sf In fldr.SubFolders
    TraverseFolders sf  '<- recurse here
  Next

  ' ... do stuff with the files in fldr here.
End Function 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-09-10T13:23:27.167

在脚本的开头运行它，它将列出所有文件夹中的所有文件：

```
dir /S/B > AllFoldersAndFiles.txt 
```

然后遍历文件列表。这对我有用。

递归vb有点棘手。

# javascript - Backbone：原型对象的烦人行为

> ID：14950479
> 
> 赞同：4
> 
> 时间：2013-02-19T05:30:00.093
> 
> 标签：javascript, backbone.js, prototype, prototypal-inheritance

我知道这是 javascript 本身的问题（或行为），而不是 Backbone 的扩展方法，但我想知道避免它的最佳策略是什么。

让我们更好地把它放在代码中：

```
var MyModel = Backbone.Model.extend({
  value: 0,
  values: []
});

var myFirstModel = new MyModel();

myFirstModel.value // 0, as expected
myFirstModel.values // [], as expected

var mySecondModel = new MyModel();

mySecondModel.value = 2;
mySecondModel.values.push(2)

mySecondModel.value // 2, as expected
mySecondModel.values // [2], as expected

myFirstModel.value // 0, as expected
myFirstModel.values // [2], ... WAT!!! 
```

我确实知道问题是我没有为 mySecondModel.values 分配新值我只是在原型中的 values 变量上进行操作，即 MyModel.prototype.values （与任何其他对象相同的问题，课程）

但这很容易搞砸。最直观的事情是将它们视为实例变量，而不是每个实例共有的变量（基于类的语言中的静态或类变量）。

到目前为止，我发现的一般解决方案是在初始化方法中初始化每个变量，如下所示：

```
var MyModel = Backbone.Model.extend({
  initialize: function() {
    this.value = 0;
    this.values = [];
  }
}); 
```

这样，一切都按预期工作，即使对于一个简单的值（比如 this.value）来说它不是必需的，我发现在每种情况下都坚持这个原则要容易得多。

我想知道这个问题是否有更好（更优雅，更清晰）的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:45:38.723

`Array`这是 JavaScript 的原型继承和对象是引用类型这一事实的影响。您传递给的对象的键/值对`extend`被复制到 的原型中`MyModel`，因此它们将由 的所有实例共享`MyModel`。因为`values`是一个数组，所以当你修改它时，你修改了每个实例的数组。

你在`values`里面设置的东西`initialize`叫做shadowing the prototype，这是解决这个问题的正确方法。

也就是说，在 的情况下`Backbone.Model`，如果您尝试处理模型的属性，则可以使用该`defaults`函数提供如下默认值：

```
var MyModel = Backbone.Model.extend({
  defaults: function() {
    return {
      value: 0,
      values: []
    }
  }
}); 
```

同样，这仅适用于实例的属性。

```
var inst = new MyModel();

// The defaults will be created for each new model,
// so this will always return a new array.
var values = inst.get('values'); 
```

对于您正在做的事情，在模型本身上指定属性的位置，您可以在 内部设置默认值`initialize`，就像您所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:49:20.300

您是否故意不设置`value`和`values`作为主干属性？如果您在实例上设置属性，而不是将它们放在扩展的主干模型定义中，它可能会按照您的预期工作。

```
var MyModel = Backbone.Model.extend();

var myFirstModel = new MyModel({
  value: 0,
  values: []
});

console.log(myFirstModel.get('value');  // 0
console.log(myFirstModel.get('values'); // []

var mySecondModel = new MyModel({
  value: 2,
  values: [2]
});

//mySecondModel.value = 2;
//mySecondModel.values.push(2)

console.log(mySecondModel.get('value');  // 2
console.log(mySecondModel.get('values'); // [2]

console.log(myFirstModel.get('value');   // 0
console.log(myFirstModel.get('values');  // [] 
```

[jsFiddle](http://jsfiddle.net/phoenecke/6qkXm/3/)，检查控制台日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:47:33.457

前段时间我也偶然发现了这个问题，并通过在模型中定义[默认](http://backbonejs.org/#Model-defaults)方法来解决它。

```
var MyModel = Backbone.Model.extend({
  defaults: function() {
    return {
      value: 0,
      values: []
    }
  }
}); 
```

# java - 在 JDBC Sqlite 中创建数据库

> ID：14950482
> 
> 赞同：13
> 
> 时间：2013-02-19T05:30:03.820
> 
> 标签：java, sqlite, jdbc

我正在使用来自 [http://code.google.com/p/sqlite-jdbc/wiki/Introduction](http://code.google.com/p/sqlite-jdbc/wiki/Introduction)的 SQLite 驱动程序 上述文档中显示的示例显示了如何连接现有数据库。

在我的应用程序中，我需要创建一个 SQLite 数据库。怎么做？创建带有扩展名的文件是否足够`.db`？还有一个函数叫做`createFile()`. 如果有怎么用？我用谷歌搜索，没有人给出明确的答案。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-19T06:24:33.783

如果文件不存在，SQLite 会在第一次尝试连接时创建新的数据库文件。

因此，只需`jdbc:sqlite:filename.db`用作 JDBC 连接字符串，只要您有创建权限`filename.db`，它就会自动创建。如果需要，您也可以手动预先创建此文件的`0`大小。

# css - netbean 中出现意外的令牌 NL 和 LBRACE 错误

> ID：14950486
> 
> 赞同：3
> 
> 时间：2013-02-19T05:30:21.017
> 
> 标签：css, netbeans, ide

我正在使用 netbean7.3 并在下面的代码中

```
@keyframes myfirst
{
from {box-shadow: 4px 4px 4px #666666;border: 1px solid #444444;}
to {box-shadow: 4px 4px 4px #DCDCDC;border: 1px solid #d6d6d6;}

} 
```

我有错误

![在此处输入图像描述](../Images/8130cd77902b365879234621f75adbde.png)

但是可以通过使用`{`after来解决`@keyframes myfirst`

![在此处输入图像描述](../Images/fd084a0b0a19d5a820b9bbc61ba8878d.png)

我只想知道第一个（错误一个）和另一个之间有什么区别，因为AFAIK的位置`{`无关紧要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:43:54.893

好吧，您的语法都是正确的（您可以[在此处](http://jigsaw.w3.org/css-validator/#validate_by_input)检查），因为 W3C 仅将关键帧声明定义为

> [...] 关键字“@keyframes”，后跟一个为动画命名的标识符（将使用 'animation-name' 引用），然后是一组样式规则（由大括号分隔）。

参看。[http://www.w3.org/TR/css3-animations/#keyframes](http://www.w3.org/TR/css3-animations/#keyframes)

所以这很可能是一个netbeans错误

编辑：关键帧声明语法是

> KEYFRAMES_SYM S+ IDENT S* '{' S* keyframes_blocks '}' S*;

`S`定义为`(#x9 | #xA | #xC | #xD | #x20)+`，因此它包括“空格”、“制表符”、“换行”、“回车”和“换页”。

netbeans`NL`在这个集合中吗？

# c++ - 不同数据类型的二进制格式

> ID：14950487
> 
> 赞同：0
> 
> 时间：2013-02-19T05:30:21.870
> 
> 标签：c++, c, bit, shift

一种类型的确切二进制格式是什么`unsigned long long`（至少在 Visual Studio 中）。

我正在使用别名指针进行一些按位操作，我通过对指针的操作设置位，然后对指针（别名）`unsigned char`进行一些其他操作。`unsigned long long`

的格式`unsigned long long`看起来很奇怪，因此，它弄乱了结果，而且，移位操作似乎也表现得很奇怪：

从位掩码测试看来，这些数据是从 排列的`right: LSB->MSB : left`，这意味着 >> 移位会将数据带到其更高的有效位而不是更少的位，这是正确的吗？

编译器为 ICC 13.0，操作系统为 windows 7-64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:35:54.207

您描述的字节布局是小端，这是英特尔处理器通常使用的布局。位移不取决于数字的内存布局，而是取决于值，因此字节顺序不应影响操作的值。但是，如果您使用指针别名，例如强制转换为 a`char *`并使用指针算法来提取它的段，您将获得与字节序相关的行为，在小字节序英特尔处理器上，这可能不是您所期望的。

# haskell - pandoc 或 haskell 在 heroku 上失败，状态码为 -15

> ID：14950490
> 
> 赞同：1
> 
> 时间：2013-02-19T05:30:30.730
> 
> 标签：haskell, heroku, pandoc

我通过从python调用它在heroku上运行pandoc，给它一个我刚刚创建的文件并期望它生成一些输出（将markdown转换为html/latex）。

当我在本地运行它时，一切正常，并且我设法在 heroku 上安装了 pandoc，当我在 heroku 上运行 bash 时，我使用 pandoc，这很好。

但是，当我从 python 调用 pandoc 时，`subprocess.check_call`它会失败并以代码-15 退出。知道这段代码是什么意思吗？我认为这是一个 Haskell 代码，而不是特定于 pandoc。

# php - 如何提高这段代码在 php 中的性能？

> ID：14950493
> 
> 赞同：1
> 
> 时间：2013-02-19T05:30:35.623
> 
> 标签：php

如何提高这段代码在 php 中的性能？
或任何替代方法来找出注释如果字符串以`@`then 调用`at()` 或字符串以`"#"`then 调用开头`hash()`

这里的示例评论是`"#hash @at ###@@tag";`

/

```
/this is the comment with mention,tag
    function getCommentWithLinks($comment="@name #tag @#@nam1 test", $pid, $img='', $savedid='', $source='', $post_facebook='', $fbCmntInfo='') {

    //assign to facebook facebookComment bcz it is used to post into the fb wall
    $this->facebookComment  =   $comment;

    //split the comment based on the space
    $comment        =   explode(" ", $comment);
    //get the lenght of the splitted array
    $cmnt_length    =   count($comment);
    $store_cmnt     =   $tagid  =   '';
    $this->img      =   $img;
    $this->saveid   =   $savedid;//this is uspid in product saved table primary key

    //$this->params = "&product=".base_url()."product/".$this->saveid;
    $this->params['product'] = base_url()."product/".$this->saveid;
    //$this->params['tags']='';

    foreach($comment as $word) {
        //check it is tag or not 
        //the first character must be a # and remaining all alphanumeric if any # or @ is exist then it is comment
        //find the length of the tag @mention
        $len    =   strlen($word);
        $cmt    =   $c  =   $tag_name   =   '';
        $j      =   0;
        $istag  =   false;

        for($i=0; $i<$len; $i++) {
            $j = $i-1;
            //check if the starting letter is # or not
            if($word[$i] == '#') {
                //insert tagname
                if($istag) {

                    //insert $tag_name
                    $this->save_tag($tag_name, $pid);
                    $istag = false;
                    $tag_name = '';
                }
                //check for comment
                if($i >= 1 && $word[$j]=='#') {
                    $this->store_cmnt .= $word[$i];
                }else{
                    //append to the store_coment if the i is 1 or -1 or $word[j]!=#
                    $this->store_cmnt .= $word[$i];//23,#
                }

            }else if($word[$i]=='@') {
                //insert tagname
                if($istag) {
                    //insert $tag_name
                    $this->save_mention($tag_name, $pid, $fbCmntInfo);
                    $istag      =   false;
                    $tag_name   =   '';
                }

                //check for comment
                if($i >= 1 && $word[$j]=='@') {
                    $this->store_cmnt   .=  $word[$i];
                }else{
                    $this->store_cmnt   .=  $word[$i];//23,#
                }
            }else if( $this->alphas($word[$i]) && $i!=0){

                if($tag_name=='') {
                    //check the length of the string 
                    $strln=strlen($this->store_cmnt);//4
                    if($strln != 0) {
                        $c  =   substr($this->store_cmnt, $strln-1, $strln);//#
                        if($c=='#' || $c=='@') {
                            $this->store_cmnt = substr($this->store_cmnt, 0, $strln-1);//23,
                            $tag_name   =   $c;
                        }
                    }
                    //$tag_name='';
                }

                //check that previous is # or @ other wise it is
                if($c=='#' || $c=='@') {
                    $tag_name .= $word[$i];

                    $istag = true;
                    //check if lenis == i then add anchor tag her
                    if($i == $len-1) {
                        $istag =false;
                        //check if it is @ or #
                        if($c=='#')
                            $this->save_tag($tag_name,$pid);
                        else
                            $this->save_mention($tag_name,$pid,$fbCmntInfo);
                        //$this->store_cmnt .= '<a >'. $tag_name.'</a>';
                    }
                }else{
                    $this->store_cmnt .= $word[$i];
                }
            }else{
                if($istag) {
                    //insert $tag_name
                    $this->save_tag($tag_name,$pid);
                    $istag = false;
                    $tag_name = '';
                }
                $this->store_cmnt .= $word[$i];
            }
        }
        $this->store_cmnt .=" ";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:32:59.207

*   使用 strpos 或 preg_match 或 strstr
*   请参考 php.ini 中的字符串函数。您可以使用内置函数在一两行中完成此操作。
*   如果它不匹配更好地编写一个正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:23:15.927

试试这个它可能是帮助充分

```
function getResultStr($data, $param1, $param2){

    return $param1 != $param2?('<a href="'.($data[0] == '@'?"at":"hash").'">'.$data.'</a>'):$data;
}

function parseWord($word, $symbols){

    $result =   $word;
    $status =   FALSE;

    foreach($symbols as $symbol){
        if(($pos = strpos($word, $symbol)) !== FALSE){
                $status =   TRUE;
                break;
        }
    }

    if($status){

        $temp   =   $symFlag    =   '';

        $result =   '';

        foreach(str_split($word) as $char){

            //Checking whether chars are symbols(@,#)
            if(in_array($char, $symbols)){
                if($symFlag != ''){
                    $result .=  getResultStr($temp, $symFlag, $temp);
                }
                $symFlag    =   $temp   =   $char;

            } else if(ctype_alnum($char) or $char == '_'){
                //accepts[0-9][A-Z][a-z] and unserscore (_)

                //Checking whether Symbol already started   
                if($symFlag != ''){
                    $temp   .=  $char;
                } else {
                    //Just appending the char to $result
                    $result .=  $char;
                }

            } else {
                //accepts all special symbols excepts @,# and _
                if($symFlag != ''){
                    $result .=  getResultStr($temp, $symFlag, $temp);
                    $temp   =   $symFlag    =   '';
                }
                $result .=  $char;  
            }
        }
        $result .=  getResultStr($temp, $symFlag, '');
    }
    return $result;
}

function parseComment($comment){

    $str        =   '';
    $symbols    =   array('#', '@');

    foreach(explode(' ', $comment) as $word){
        $result =   parseWord($word, $symbols);
        $str    .=  $result.' ';
    }

    return $str;
}

$str = "@Richard, #McClintock, a Latin professor at $%@Hampden_Sydney @College-in #Virginia, looked up one of the @##@#@more obscure Latin words, @@##@#@%%#%@#consectetur, from a Lorem Ipsum passage, and #going@through the cites of the word in classical literature";

echo "<br />Before Parsing : <br />".$str;
echo "<br /><br />After Parsing : <br />".parseComment($str); 
```

# data-binding - 您如何对 Java FX 2 绑定的操作进行排序？

> ID：14950496
> 
> 赞同：0
> 
> 时间：2013-02-19T05:30:45.277
> 
> 标签：data-binding, javafx-2, jfxtras

编辑：我回过头来对下面的每一个进行了很长的解释……然后我开始思考。我认为我的问题是除法元素（getUnitDivisionFactor（））不可观察。我将其更改为可观察的数据类型，这一切都开始工作了。因此，与其删除这个“愚蠢的问题”，不如把它留在身边。也许这会帮助别人。

我正在使用 JFXtras 2。有一个具有 valueProperty 绑定的“LCD”小部件。它是双重绑定。我像这样绑定......这是行不通的......

```
 xLcd.valueProperty().bind(TinygDriver.getInstance().m.getAxisByName("x").getMachinePositionSimple().subtract(TinygDriver.getInstance().m.getAxisByName("x").getOffset()).divide(tg.m.getUnitDivisionFactor())); 
```

我真的需要先做减法的问题..

> (getMachinePositionSimple - getOffset()) / getUnitDivisionFactor()

但是，我对如何在单个绑定设置中执行此操作感到有些困惑。我认为数字绑定可能是要走的路。但是，不太确定如何设置它？

任何帮助都会很棒。

莱利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:12:36.970

getUnitDivisonFactor() 返回常规双精度数据类型。我将其更改为 SimpleDoubleProperty，一切都刚刚开始工作.. 见

> xLcd.valueProperty().bind(TinygDriver.getInstance().m.getAxisByName("x").getMachinePositionSimple().subtract(tg.m.getAxisByName("x").getOffset()).divide(tg.m .gcodeUnitDivision));

# php - 查询中可能有另一个 WHERE

> ID：14950498
> 
> 赞同：0
> 
> 时间：2013-02-19T05:30:54.310
> 
> 标签：php, mysql, sql

我需要有一个历史列表，它只会出现小于或等于今天的日期，以及小于这个时间的时间。

```
SELECT
    *
FROM
    schedules
LEFT JOIN
    (special_details
    LEFT JOIN
        schedule_logs
    ON 
        special_details.id = special_details_id)
ON
    schedules.id = location_id
WHERE
    location_id = 146
AND date(dates) < ('2013-02-19')
  //this will check if schedule is lessthan the date and time for today.
  //and its not working...
    AND (WHERE
        date(dates) = ('2013-02-19')
        AND 
        date(end_time) < ('12:56:20')) 
```

如果日期和时间是 2013-02-19 / 11:00:00 它应该出现。
如果 2013-02-19 / 1:00:00 不应该出现。
但是如果 2013-02-18 / 1:00:00 它应该显示为小于今天的日期。

如果您对历史列表有更好的想法，请告诉我。或添加链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:19:07.423

尝试这个：

```
SELECT
    *
FROM
    schedules
LEFT JOIN
    (special_details
    LEFT JOIN
        schedule_logs
    ON 
        special_details.id = special_details_id)
ON
    schedules.id = location_id
WHERE
    location_id = 146
    AND (
        date(dates) < ('2013-02-19')
        OR
        (date(dates) = ('2013-02-19') AND date(end_time) < ('12:56:20')
    ) 
```

# java - 如何在方法中返回错误？

> ID：14950499
> 
> 赞同：3
> 
> 时间：2013-02-19T05:30:58.420
> 
> 标签：java, error-handling

假设有一个方法：

```
MyClass myMethod(MyClass input){
    //body of method
} 
```

假设我不知道这个方法到底可以在哪里使用。如果输入为空，那么我如何决定是应该抛出异常还是只返回空值？

我对类似的方法有同样的问题

```
void myMethod(MyClass input){
    //body of method
} 
```

如果输入为空，我应该直接返回而不执行任何操作还是抛出异常或说 System.error()？

我已经将所有这些用于我的项目。这一切都很好，因为我的大多数课程都有很少的公共方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:55:02.483

If input being null will create an error in your code during execution, then you should throw an exception (such as IllegalArgumentException). Otherwise you can return null.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:38:47.253

空输入是一种**特殊**情况，还是相当正常的行为？如果是异常行为，则抛出异常。如果预计会发生，请考虑返回`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:49:09.273

> 如果输入为空，那么我如何决定是应该抛出异常还是只返回空值？

问问自己，`null`输入是有效的吗？如果是，请不要抛出异常并按逻辑处理。如果没有，抛出异常。

这里有效的意思是：假设您将一些值存储在一个对象中，其中一些是可选的。即用户可能会或可能不会提供那里的价值。在这种情况下，`null`仅对这些字段有效，但对于必填字段`null`是不可接受的。

将类似的想法应用于您的问题，您可能会得出结论。

另一个例子：假设您正在打开一个文件，其中该方法的输入是`filePath`. 如果给定的路径为空，则它无效并且应该抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:55:54.840

If the method is not expected to be called with a null argument, it is fine to throw a NullPointerException (NPE for short), since it is a precondition that input!=null, and the caller should have verified it beforehand.

```
/** My method.
  * @param input the input, must not be null.
  */
void myMethod(MyClass input){
  if (input==null) throw new NullPointerException();
  //...
} 
```

A common idiom for throwing NPE, without incrementing your program branch count is:

```
void myMethod(MyClass input){
  input.getClass(); //NPE if input is null
  //...
} 
```

In some cases, the above check is implicit in the code:

```
void printLowercase(String input){
  System.out.println(input.toLowerCase());
} 
```

Avoid implementing a method that fails silently, because it makes hard to the caller to know whether the method failed. Instead, return boolean.

```
boolean myMethod(MyClass input){       
   if (input==null) {
       //you may log that the input was null
       return false;
   }
   //...
   return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:34:19.713

一般来说，永远不要在任何地方允许 null。它只会让生活变得困难。Java 很难遵循这个建议，但是你可以用你所拥有的做你能做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T06:57:35.223

答案是

**告诉，不要问**

这个想法是将错误处理委托给一个可以决定是返回某个值还是抛出异常的对象。

如果您可以控制方法签名，那么您就可以做到

```
MyClass myMethod(MyClass input, Expectation whenInputIsNull){
    if(input==null) {
        // might also throw
        return whenInputIsNull.handle();
    }
    //body of method
} 
```

如果您无法控制方法签名，则可以`Expectation`将`myMethod`.

读起来会很好：

```
foo.myMethod(input, Expect.nullReturned());
foo.myMethod(input, Expect.throwIllegalArgumentException()); 
```

当它与存储库一起使用时，我发现它非常方便：

```
fooRepository.findByBar(bar, Expect.atLeast(5)); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-19T06:01:06.440

这是一个值得商榷的问题。我会说考虑问题域并选择最适合使用的。

**在任何情况下，清楚地记录此类输入的代码行为（使用简洁的 Javadoc），以便 API 的用户不会对意外行为感到惊讶。**

# sql - 更新查询在 vb.net 中不起作用

> ID：14950503
> 
> 赞同：0
> 
> 时间：2013-02-19T05:31:08.620
> 
> 标签：sql, database, select, sql-update

我想在 vb.net 后面的代码中编写更新语句。如果 tbl_ICCID 中存在 ICCID，则将状态从 0 更改为 1 和 Pic_Correct_ICCID.visible=true，如果不存在，则显示“未找到”。我写了这段代码，但没有工作，对于 Tbl_ICCID Pic_Correct_ICCID.visible=true 中不存在的所有 ICCID。请检查我的代码并解决我的问题。

```
in Cls_ICCID:

 Public Function Update_Status(ByVal ICCID_No As String, ByVal status As Integer) As String
        Try
            Dim cmd As SqlCommand
            Dim sql As String
            Dim sql2 As String
            Dim myConnection As SqlConnection = New SqlConnection()
            myConnection.ConnectionString = "Data Source=TEHRANI\TEHRANI;Initial Catalog=GSMProduction;Persist Security Info=True;User ID=sa;Password=1"
            **sql = "UPDATE Tbl_ICCID SET Status='" & status & "' Where ( ICCID = '" & ICCID_No & "' )"**
            myConnection.Open()
            cmd = New SqlCommand(sql, myConnection)
            cmd.ExecuteNonQuery()
            cmd.Dispose()
            myConnection.Close()
            Update_Status = ""
        Catch ex As SqlException
            Update_Status = "Not found"
        Catch ex As Exception
            Update_Status = "Not connect to server"
        End Try
    End Function

in Frm_Packing

Private Sub Txt_ICCID_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Txt_ICCID.TextChanged

        Pic_BP_Correct.Visible = False
        Pic_BP_Wrong.Visible = False

        Try
            If Txt_ICCID.Text.Length = Txt_ICCID.MaxLength Then
                lblError.Text = clsICCID.Update_Status(Txt_ICCID.Text.ToString(), 1)
                lblError.ForeColor = Color.Red
                stream = New System.IO.MemoryStream
                pic_barcode = Nothing
                cls.btnEncode(pic_barcode, Txt_ICCID.Text.Trim)
                pic_barcode.Save(stream, System.Drawing.Imaging.ImageFormat.Png)
                f = New IO.FileStream("C:\test55.png", IO.FileMode.Create, IO.FileAccess.ReadWrite)
                b = stream.ToArray
                f.Write(b, 0, b.Length)
                f.Close()
                Dim Val() = {stream.ToArray, Txt_ICCID.Text.Trim}
                ds.Tables(0).Rows.Add(Val)
                crp_report.SetDataSource(ds.Tables(0))
                frm_crp.CrystalReportViewer1.ReportSource = crp_report
                If lblError.Text = "" Then
                    Pic_BP_Correct.Visible = True
                    GBDoubleCheck.Visible = True
                    Txt_LabelBarcode.Focus()
                Else
                    Pic_BP_Wrong.Visible = True
                End If
            End If
        Catch ex As Exception
            Pic_BP_Wrong.Visible = True
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T05:36:20.497

很可能是由于将状态列值作为字符串而不是 int 发送。您应该删除那些单引号。此外，这样连接查询确实是非常糟糕的做法。使用 CommandBuilders 之类的东西或 Typed DataSets 来避免 SQL 注入。

# php - 使用 html 标签作为小部件区域标题

> ID：14950507
> 
> 赞同：0
> 
> 时间：2013-02-19T05:31:17.550
> 
> 标签：php, wordpress, function

我想在小部件区域注册一个带有我的 html 自定义标题的侧边栏。

我的注册小部件功能如；

```
register_sidebar(array(
  'name' => __( '<img src="'.$keepAdminImages.'/_assets/_img/keepSignature.png" />' ),
  'id' => 'keepSense-Left',
  'description' => __( 'keepSense Temanızda Sol alanda yer alacak bileşenlerinizi bu kısma sürükleyip bırakabilirsiniz.' ),
  'before_title' => '<h1>',
  'after_title' => '</h1>'
));
$keepAdminImages = get_bloginfo('template_url'); 
```

它的输出看起来像：[http://prntscr.com/tbbmw](http://prntscr.com/tbbmw)如何在该区域使用一些 html 标记？有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:14:59.470

Fatih，我认为您不能在管理区域使用图像。你检查了[http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/widgets.php#L0](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/widgets.php#L0)吗？

# xamarin.ios - 如何使用 MonoDevelop 在 Mac 上编译 MvvmCross vNext

> ID：14950508
> 
> 赞同：1
> 
> 时间：2013-02-19T05:31:35.800
> 
> 标签：xamarin.ios, mvvmcross

我正在尝试在 Mac 上编译 MvvmCross 的 vNext 分支，以尝试并开始使用 PCL 和 MvvMCross 进行一些 iOS 开发。

我现在已经花了几天的时间，但似乎在绕圈子……对 C# 和 Mac 都有些陌生。

我已经安装了最近在@slodge 的博客上提到的 MonoDevelop 3.1.1。
我已经根据此参考更新了目标文件 [https://files.xamarin.com/~jeff/Microsoft.Portable.CSharp.targets](https://files.xamarin.com/~jeff/Microsoft.Portable.CSharp.targets)
我已经从 GitHub 下载了 vNext 分支。

我已经在 MonoDevelop 中加载了 mvvmcross_all.sln，但是使用 Debug|iPhone Simulator 配置文件构建它会给我 3 个错误。

我无法解决如何修复引用错误，例如出现在 CrossUI.Core 中，即引用

系统
System.Core
System.Net

ETC

这些行中的每一行都有一个错误 Assembly not available for .NetPortable 4.0 Profile1 Profile (in Mono 2.10.9)

我意识到这一切都是一个移动的目标，但显然有可能让它编译。

任何关于我可能错过的建议将不胜感激。

TIA,

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:20:52.790

谢谢安德烈亚斯

在[http://slodge.blogspot.co.uk/2013/02/a-patched-monodevelop-for-pcls.html](http://slodge.blogspot.co.uk/2013/02/a-patched-monodevelop-for-pcls.html)博客中引用的版本中，似乎 MonoDevelop 报告说 CrossUI 缺少​​它的引用 - 但它仍然编译。从我的 Mac 上查看此屏幕截图 - 解决方案资源管理器报告了问题，但 CrossUI 上的“全部重建”成功。

![截屏](../Images/caccd97c593aa15370e033722202f688.png)

如果您在构建时遇到问题，请报告构建输出，我会尽力提供帮助。

请注意，MonoDevelop 的修补版本还存在其他问题 - 例如语法突出显示和智能感知问题 - [MonoTouch：使用可移植类库创建多平台应用程序](https://stackoverflow.com/questions/14764011/monotouch-creating-multiplatform-apps-using-portable-class-libraries)

* * *

或者，SkyDrive 上有一些 iOS/Mac 友好的二进制文件 - [http://slodge.blogspot.co.uk/p/mvvmcross-binaries_7.html](http://slodge.blogspot.co.uk/p/mvvmcross-binaries_7.html)

* * *

对便携式类库的“适当”支持的时间表旨在在 Evolve 之前提供可演示的版本（因此距离不到 2 个月）。在那之前，我个人将继续在 VS 中完成我的大部分 PCL 工作，并在 MonoDevelop 中使用特定于平台的步骤。

# c - 指针数组中的垃圾值

> ID：14950514
> 
> 赞同：2
> 
> 时间：2013-02-19T05:31:48.377
> 
> 标签：c, local-variables

```
#include <stdio.h>
void func(int **);

int main()
{

  int *arr[2];

  func(arr);

  printf("value [1] = %d \n",*arr[0]);

  printf("value [2] = %d \n",*arr[1]);
  return 0;
}

void func(int **arr)
{
  int j = 10;
  arr[0] = &j;
  arr[1] = &j;
} 
```

代码使用 gcc 成功编译。但是，输出是：

```
value [1] = 10 

value [2] = 32725 
```

第二个值是垃圾值。为什么会这样？如何正确使用双指针访问数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T05:33:47.763

这是**[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)**。您正在存储函数之外不存在
的局部变量的地址。保证只存在于函数范围内。一旦此范围结束，通过其地址引用会导致未定义的行为。 `j`
`j``{ }``j`

未定义的行为意味着编译器不需要显示任何特定的观察到的行为，因此它可以显示任何输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:37:36.223

```
int j=10; 
```

是分配在堆栈上的局部变量。在函数之外取消引用它是未定义的行为。 **警告：**除非您非常确定自己在做什么，否则永远不要返回指向任何局部变量的指针。如果您确定，请再考虑一下。

# timeout - AFNetworking如何进行加入请求超时和网络不通验证？

> ID：14950515
> 
> 赞同：0
> 
> 时间：2013-02-19T05:31:48.843
> 
> 标签：timeout, afnetworking

我`AFNetworking + SVProgressHUD post`用来请求数据。`SVProgressHUD`如果网络有问题或速度非常慢并且互联网链接已被切断，将始终显示。

如何`AFNetworking`判断网络问题？还是请求超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:31:56.223

我不确定 SVProgressHUD 的实现是什么，但我在当前的应用程序中使用了一个类似的名为 MBProgressHUD 的实现。希望这个建议仍然适用。

如果我正确理解您的问题，您想知道如果 AFNetworking 调用失败，如何关闭您的 progressHUD？如果这是您的问题，那么您需要做的就是在您的故障块中关闭您的 HUD，如下所示。

```
MBProgressHUD *HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[navigationController.view addSubview:HUD];

HUD.dimBackground = YES;
[HUD show:YES];

//Set up the request
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"example.com"]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:url];

[request setHTTPMethod:@"POST"];

//Set up the operation
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation  alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

        // Hide activity indicator after success
        [HUD show:NO];
        [HUD hide:YES];

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    // Hide activity indicator after failure
    [HUD show:NO];
    [HUD hide:YES];
}];

// Fire off the operation
[operation start]; 
```

# javascript - cakephp：访问 ctp 中设置的隐藏字段值，在没有表单发布的控制器中

> ID：14950518
> 
> 赞同：0
> 
> 时间：2013-02-19T05:31:59.110
> 
> 标签：javascript, session, cakephp

我正在使用 cakephp 和 javascript。以下是场景：在地图图标点击时，会调用一个显示谷歌地图的 jquery 函数。现在通过javascript，用户可以拖动n改变谷歌地图中的当前标记位置。这些值也在视图中设置。但是我如何在控制器中访问这些值（纬度，经度）？我希望在会话变量中设置纬度和经度，但我不能这样做，我的意思是 icant 在 javascript 中设置会话变量 n 在控制器中使用它。以下是我的代码：

```
 function initialize() {

  var latLng = new google.maps.LatLng(lat,long);
  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom:8,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP

  });
  var marker = new google.maps.Marker({
    position: latLng,
    title: 'Point A',
    map: map,
    draggable: true
  });

  // Update current position info.
  //alert(" initilize"); 
  updateMarkerPosition(latLng);
  geocodePosition(latLng);

  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {
    //updateMarkerAddress('Dragging...');
   // alert("dragStart"+marker.getPosition()); // access this value in controller
  });

  google.maps.event.addListener(marker, 'drag', function() {
   // updateMarkerStatus('Dragging...');
    updateMarkerPosition(marker.getPosition());
    alert(marker.getPosition()); // access this value in controller
  });

  google.maps.event.addListener(marker, 'dragend', function() {
   // updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
    alert(marker.getPosition()); // access this value in controller
  });
} 
```

在控制器中：

```
 public function map()
    {
         //access lat, long here

    } 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:39:54.760

可以使用 AJAX 技术将 JavaScript 与 PHP 连接起来。

像这样，您的 JavaScript 代码将调用控制器中的具体操作，一旦进入，您可以将其保存在会话中或做任何您想做的事情。

您可以每隔 X 秒或在任何更改时调用该操作，这取决于您想要调用它的时间以及您可以从用户那里捕获的可能事件。

这是我的意思的一个例子：

```
$(document).ready(function(){
    //calling the function every 30 seconds
    setInterval(function(){
        getUserSavings();
        }, 30*1000);
});

function getUserSavings(){
    $.post("http://"+ document.domain + "/users/getSavings.json",
        function(dat){  
            //do whatever you want with the resulting data (dat)
            $('#totalSavings span').html(dat['result']['savings']);
    });
} 
```

不需要使用扩展`json`，但它使您能够调用操作而无需定义视图。有关更多信息，您可以查看[文档。](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

# sql - 根据参数选择存储过程中的列

> ID：14950520
> 
> 赞同：0
> 
> 时间：2013-02-19T05:32:15.457
> 
> 标签：sql, oracle, dynamic, plsql, plsqldeveloper

如果输入了存储过程中的参数，我需要检查它，然后我需要选择它

```
i=j=k=l=m=1;
IF (p_plant_cd IS NULL) THEN
   i=0;
END IF;
IF(p_global_duns_nbr IS NULL) THEN
   j=0
END IF;
IF(p_global_duns_nbr IS NULL) THEN
   k=0
END IF;
IF(p_matrl_grp IS NULL) THEN 
   l=0
END IF;
IF (p_mrp IS NULL) THEN
   m=0
END IF ; 
```

哪个值是 1 我需要在变量中添加相应的参数`v_select`

例如；

```
if k and l are 1 then 
v_select='p_global_duns_nbr,p_matrl_grp' 
```

请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:57:42.097

您可以声明一个变量，保存列名，然后连接到 select 语句，并且您在 v_select 中有 SQL select 语句，随意使用它

```
declare
    v_columns varchar2(255);
    v_select varchar2(2000);
    v_result sys_refcursor;
begin

    v_columns := 'rownum';

    IF p_plant_cd = 1 THEN
       v_columns := v_columns || ',p_plant_cd';
    END IF;

    IF p_global_duns_nbr = 1 THEN
       v_columns := v_columns || ',p_global_duns_nbr';
    END IF;

    IF p_global_duns_nbr = 1 THEN
       v_columns := v_columns || ',p_global_duns_nbr';
    END IF;

        IF p_matrl_grp = 1 THEN
       v_columns := v_columns || ',p_matrl_grp';
    END IF;

    IF p_mrp = 1 THEN
       v_columns := v_columns || ',p_mrp';
    END IF; 

    v_select := 'SELECT ' || v_columns || ' FROM table';

    open v_result for v_select;

end; 
```

# c# - HTMLAgilityPack.HtmlNode 不包含删除的定义

> ID：14950521
> 
> 赞同：0
> 
> 时间：2013-02-19T05:32:18.303
> 
> 标签：c#, html-agility-pack

我正在尝试使用以下方法删除空节点。但我得到了错误

```
containerNode.Remove(); 
```

说“HTMLAgilityPack.HtmlNode 不包含删除的定义......”。除了“使用 HtmlAgilityPack”之外，我应该参考什么来使用 HTMLAgilityPack 的 Remove 方法。

```
 static void RemoveEmptyNodes(HtmlNode containerNode)
    {
        if (containerNode.Attributes.Count == 0 && (containerNode.InnerText == null || containerNode.InnerText == string.Empty))
        {
            containerNode.Remove();
        }
        else
        {
            for (int i = containerNode.ChildNodes.Count - 1; i >= 0; i--)
            {
                RemoveEmptyNodes(containerNode.ChildNodes[i]);
            }
        }
    } 
```

在我使用的一种方法中，我在下面使用了诸如 , 等的空节点

```
myNode.RemoveAll();
myNode.RemoveAllChildren() 
```

如何删除空节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:17:58.917

这是一个版本问题。下载了最新的dll（1.4.6），它解决了这个问题。我现在有 remove 方法

# php - 结果页面中带有产品图片的 Sphider - Sphider 1.3.5

> ID：14950524
> 
> 赞同：0
> 
> 时间：2013-02-19T05:32:31.450
> 
> 标签：php

我希望这可以对其他人有很大的帮助，我花了一段时间学习PHP，但是当我拼凑起来时给了我一个很好的PHP高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:32:31.450

对于那些希望将图像放在 sphider 结果旁边的人...我使用 Sphider 为包含数千个项目的产品文件夹编制索引，这是我的文件结构示例，用于此片段：

万维网/

> 产品/
> 
> > item1.php
> > 
> > item2.php
> > 
> > item3.php
> 
> 图片/
> 
> > item1.png
> > 
> > item2.png
> > 
> > item3.png

将其插入到 sphider/templates/standard/search_results.html（或 sphider/templates/dark/search_results.html）的第 75 行，紧随“class="title">

```
<?PHP
        // Edit here
          $url_path = "http:// www.yoursite.com/product/";    // The url leading to your indexed pages.
          $url_ext = ".php";                                     // The file extension of indexed pages.
          $image_path = "../images/";                              // Path to image folder.
          $image_ext = ".png";                                       // The file extension of images.
        // To here

        $image = str_replace("$url_path", "$image_path", $url);
        $image = str_replace("$url_ext", "$image_ext", $image);
        if (file_exists($image)) { 
     // do nothing or Your Option
    } else { $image = $image_path . "ICS" . $image_ext; } ?>
        <img src="<?PHP print $image ?>" alt="" align="left" style="margin-right:10px; border:0;" /> 
```

基本上，如果您的 Sphider 索引中有一个名为 1234.php 的页面，这将尝试查找图片 1234.png 以与搜索结果并排。如果未找到图像，它将显示默认图像“ICS.png”（图像即将推出）。

快乐编码

# sql - 在 oracle select 语句中循环和联合

> ID：14950526
> 
> 赞同：1
> 
> 时间：2013-02-19T05:32:33.283
> 
> 标签：sql, oracle

我在 oracle 中有下表。版本 9i

```
Num          count

123              1
345              4
455              3
234              2
542              1 
```

我正在尝试编写一个选择查询，它给我以下输出。

```
123
345
345
345
345
455
455
455
234
234
542 
```

每个数字应显示其计数次数。如果我使用函数，这可以实现吗？我不允许创建任何临时表。

我知道我必须使用循环序列，然后使用 UNION ALL 但不知道如何实现它。我试过这个

```
select Num from <table> where count=1
union all
// what fits here? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:54:39.933

这可以使用伪列`LEVEL`和`Correlated Query`重复 num count 次来完成......

试试下面的查询

```
select num from (select distinct num,level,ROWID as RD
from table a
connect by level<= (select count from table b where a.num=b.num))
order by rd; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:43:04.383

试试这个

```
SELECT A.NUM
FROM Test A
INNER JOIN (SELECT ROWNUM RN FROM dual connect by level < 100) B 
ON B.rn <= A.count
order by A.NUM; 
```

[SQL 演示](http://sqlfiddle.com/#!4/39a59/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:49:33.650

```
WITH cte ("Num", "count") 
AS 
(
    SELECT "Num", "count" FROM TableName
    UNION ALL
    SELECT "Num", "count" - 1  FROM cte WHERE "count" > 1
)
SELECT "Num" 
FROM   cte
ORDER  BY "Num" 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/e08ca/9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:49:36.663

如果您使用的是 11gR2，您可以这样做：

```
with t(num, i) as
(
  select num, count from tab1 union all
  select num, i-1
  from t
  where i >1
  )    
select num from t
order by num; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/8788d/6)

# ruby - ruby 中的变量编辑（如 zsh 的 vared）

> ID：14950528
> 
> 赞同：0
> 
> 时间：2013-02-19T05:32:43.107
> 
> 标签：ruby

我正在将 zsh shell 应用程序转换为 ruby​​。我习惯于使用 zsh`vared`让用户编辑变量的值。红宝石有什么等价物吗？

这是一个命令行应用程序。我目前正在使用 ruby `gets`​​，但这不允许编辑以前的值。我曾经使用过`highline`，但是 IIRC，它允许使用向上箭头来获取历史记录，这非常接近，但不是一回事。

编辑：我的意思是`readline`当我说的时候`highline`。我实际上两者都用。

# c# - C# switch 语句的默认标签将如何处理可为空的枚举？

> ID：14950532
> 
> 赞同：62
> 
> 时间：2013-02-19T05:33:23.117
> 
> 标签：c#, null, switch-statement, nullable

C# switch 语句的默认标签将如何处理可为空的枚举？

默认标签会捕获空值和任何未处理的情况吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-02-19T05:33:23.117

如果它为空，它将命中默认标签。

```
public enum YesNo
{
    Yes,
    No,
}

public class Program
{
    public static void Main(string[] args)
    {
        YesNo? value = null;
        switch (value)
        {
            case YesNo.Yes:
                Console.WriteLine("Yes");
                break;
            case YesNo.No:
                Console.WriteLine("No");
                break;
            default:
                Console.WriteLine("default");
                break;
        }
    }
} 
```

该程序将打印`default`.

除非 null 被处理。

```
public class Program
{
    public static void Main(string[] args)
    {
        YesNo? value = null;
        switch (value)
        {
            case YesNo.Yes:
                Console.WriteLine("Yes");
                break;
            case YesNo.No:
                Console.WriteLine("No");
                break;
            case null:
                Console.WriteLine("NULL");
                break;
            default:
                Console.WriteLine("default");
                break;
        }
    }
} 
```

打印`NULL`。

如果您有稍后添加的未处理枚举值：

```
public enum YesNo
{
    Yes,
    No,
    FileNotFound,
}

public class Program
{
    public static void Main(string[] args)
    {
        YesNo? value = YesNo.FileNotFound;
        switch (value)
        {
            case YesNo.Yes:
                Console.WriteLine("Yes");
                break;
            case YesNo.No:
                Console.WriteLine("No");
                break;
            default:
                Console.WriteLine("default");
                break;
        }
    }
} 
```

它仍然打印`default`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-18T02:22:27.033

您可以使用 null-coalescing 运算符`??`将开关值路由`null`到特定案例标签，而不是`default`：

```
public static IEnumerable<String> AsStrings(this IEnumerable<Char[]> src)
{
    Char[] rgch;

    var e = src.GetEnumerator();
    while (e.MoveNext())
    {
        switch ((rgch = e.Current)?.Length ?? -1)
        {
            case -1:    // <-- value when e.Current is 'null'
                yield return null;
                break;
            case 0:
                yield return String.Empty;
                break;
            case 1:
                yield return String.Intern(new String(rgch[0], 1));
                break;
            default:   // 2...n
                yield return new String(rgch);
                break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T05:59:48.220

值得一提的是，C# 8.0 为 switch 表达式引入了新的属性模式。现在您可以使用下划线实现默认逻辑切换：

```
public double Calculate(int left, int right, Operator op) =>
    op switch 
{
    Operator.PLUS => left + right,
    Operator.MINUS => left - right,
    Operator.MULTIPLY => left * right,
    Operator.DIVIDE => left / right,
    _    =>  0 // default
} 
```

参考。[https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8)

# mysql - SQL 查询错误（创建表）

> ID：14950533
> 
> 赞同：1
> 
> 时间：2013-02-19T05:33:24.003
> 
> 标签：mysql, sql

我想创建一个新表，但它说我的查询错误，我不知道查询出了什么问题，因为我从 SQLite 数据库浏览器导出了数据库。这是查询，

```
CREATE TABLE sqlite_sequence(name,seq); 
```

它说

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'seq)' 附近使用正确的语法

如果我可以创建那个表，我想用这个插入那个表，

```
INSERT INTO sqlite_sequence VALUES('objek',55); 
```

我希望它不会再犯错误。

请告诉我你的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T02:01:50.207

当您将表的数据字段分配给自动增量（例如 _id 整数主键自动增量）时，会自动生成 sqlite_sequence 表

无法手动创建名为 sqlite_sequence 的表，因为“表名不能以 sqlite_ 开头作为保留供内部使用的对象名称：SQLITE_SEQUENCE”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:34:26.793

您的 DDL 中唯一缺少的是列上缺少数据类型，

```
CREATE TABLE sqlite_sequence
(
    name VARCHAR(20),
    seq INT
); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/4a7b3/1)

**更新 1**

*   [MySQL 数据类型](http://dev.mysql.com/doc/refman/5.5/en/data-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:34:33.543

您需要为`name`和指定数据类型`seq`。

尝试：

```
create table SQLITE_SEQUENCE ( name varchar(255), seq int ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T05:35:09.063

定义`data type`字段（列）

```
CREATE TABLE sqlite_sequence(name varchar(200),seq int(8)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T05:37:01.213

这是一个普通的创建表命令供参考：

```
CREATE TABLE demo (id integer NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE DEFAULT 0,name text); 
```

是的，命令没有问题`INSERT`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T05:42:52.373

您必须在每个表字段之后定义数据类型，如下所示：

```
CREATE TABLE sqlite_sequence (
                name VARCHAR(45),   
                seq INT
              ); 
```

# ruby-on-rails - 对于像 Wufoo 这样的 Rails 应用程序来说，最好的数据库结构是什么？

> ID：14950537
> 
> 赞同：1
> 
> 时间：2013-02-19T05:34:05.113
> 
> 标签：ruby-on-rails, web-applications, data-structures

我不打算在 Rails 上重建 Wufoo，但想按照这些思路创建一个应用程序。

关于最好的应用程序/数据库结构的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:11:28.330

postgres hstore 策略比序列化更可取。是的，[有一个用于 activerecord hstore 支持的宝石](https://github.com/engageis/activerecord-postgres-hstore)。

引用他们的自述文件：

> 您需要表格中的动态列。你做什么工作？
> 
> *   创建很多表来处理它。很好，现在你需要更多的模型和很多额外的 sql。插入和选择将非常缓慢。
> *   仅针对此问题使用 noSQL 数据库。祝你好运。
> *   创建一个序列化列。很好，插入会很好，也可以从记录中读取数据。但是，如果您的选择中有一个包含序列化数据的条件怎么办？是的，正则表达式。

# list - SCHEME - 编写我自己的追加会产生一个奇怪的结果

> ID：14950539
> 
> 赞同：1
> 
> 时间：2013-02-19T05:34:09.607
> 
> 标签：list, functional-programming, append, scheme, r5rs

我想编写自己的附加，用于将元素附加到现有列表。

我写了以下内容：

```
(define (appendElem llist elem)
    (if (null? llist)
        elem
        (cons (car llist) (appendElem (cdr llist) elem)))) 
```

但是当我这样做时：

```
(appendElem (list 1 2 30) 11) 
```

我得到：

```
(1 2 30 . 11) 
```

所以问题是，为什么`(1 2 30 . 11)`而不是`(1 2 30 11)`？

谢谢

**编辑：**

固定的 ：

```
(define (appendElem llist elem)
    (if (null? llist)
        (list elem)
        (cons (car llist) (appendElem (cdr llist) elem)))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:39:44.200

想想你希望你的基本情况是什么。你想要一个`elem`，还是想要一个包含单个项目的*列表*`elem`？它们是有区别的。如果想要后者，您将需要在代码中修复您的基本情况。

换句话说，你想`(appendElem '() 42)`返回`42`，还是`(42)`？仔细想想这个问题的答案，然后想想每个选择的后果是什么。

顺便说一句，虽然您可以实现`appendElem`为玩具，但您很快就会意识到该函数的运行时间为 O(n)。所以不要使用这种方法建立列表！构建列表的标准方法是将`cons`项目添加到列表中，然后`reverse`是最终结果列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:55:59.870

这是答案：

```
(define (appendElem llist elem)
    (if (null? llist)
        (list elem)
        (cons (car llist) (appendElem (cdr llist) elem)))) 
```

感谢@Chris Jester-Young。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:02:29.673

给你的另一个建议：

```
(define (make-dl ls)      ; turn a list into a difference list
  (cons ls (last-pair ls)))

(define (snoc-dl! dl e)   ; snoc ~ appendElem, destructively
  (set-cdr! (cdr dl) (list e))
  (set-cdr! dl (cddr dl)))

(define (dl-list dl)      ; get the list back
  (car dl)) 
```

对于`O(1)`列表末尾的追加（好吧，调用`make-dl`将是`O(n)`，但所有后续追加都需要`O(1)`时间）。

# python - 如何从我的 Python 程序中创建自定义系统命令？

> ID：14950540
> 
> 赞同：1
> 
> 时间：2013-02-19T05:34:11.040
> 
> 标签：python, command-line, argparse, docopt

如果我有一个用 Python 编写的命令行程序（特别是使用我认为使用 argparse 的[docopt](http://docopt.org)），并且我想运行它`my-program command1 args`而不是`python my-program.py command1 args`，我该怎么办？目前，这适用于基于 Debian 的操作系统（例如 Ubuntu）。

我通常把我的模块做成一个包，所以我已经有了`setup.py`，但这并没有给我一个免费的命令。

谢谢！

* * *

**编辑**

@pyrospade 在下面给出了一个非常好的链接。我将分享我的结果。

假设我们有

```
top-level-directory
    setup.py
    package/
         __init__.py
         cli.py 
```

`scripts=['package/cli.py']`如果你想`cli.py`在 shell中访问，你可以使用。

如果你想运行 as `my-cli`，你可以使用

```
entry_points={
    'console_scripts':
        ['my-cli=package.cli:main']
} 
```

由于我使用`docopt`，我有这个

```
def dispatcher(...)
def fun1(....)

def main():    
    arguments = docopt(COMMAND, version="xxxx")
    dispatcher(arguments)

if __name__ == '__main__':
    main() 
```

您甚至可以`__init__.py`说`['my-cli=package:main']`，但同样，您需要一个名为 的函数`main()`。但是你可以随意命名它。只是说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:36:30.460

确保您的程序在顶部有一个[shebang 行：](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)

```
#!/usr/bin/python 
```

使文件可执行：

```
chmod a+x my-program.py 
```

使用所需的命令名称创建链接：

```
ln -s my-program.py /usr/local/bin/my-program 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:37:36.257

添加 shebang (#!) 并使其可执行。

```
#! /usr/bin/python 
```

在[这里](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)查看更多信息。

# hibernate - HIbernate中具有公共标识符@id的两个实体

> ID：14950542
> 
> 赞同：1
> 
> 时间：2013-02-19T05:34:21.073
> 
> 标签：hibernate, entity-relationship, hibernate-mapping, hibernate-annotations

我正在使用 Spring3+Hibernate 3.0。我有两个 bean (@Entity) 项目和参与者。我希望 bean（项目和参与者）都应该有共同的 @ID 标识符，这意味着项目和参与者表将有共同的主键。我如何使用@embededID 或@Embedable 来实现这一目标？提前感谢。

# php - 如何从网站中提取元标记？

> ID：14950548
> 
> 赞同：0
> 
> 时间：2013-02-19T05:34:40.930
> 
> 标签：php, meta

我目前正在使用 get_meta_tags 从各种网站获取标签，如下所示：

```
<?php $tags = get_meta_tags('http://www.stackoverflow.com/'); ?> 
```

这是我用来显示该信息的代码：

```
<?php echo $tags['description']; ?><br /><br />
<?php echo $tags['keywords']; ?> 
```

现在有两件事我不知道该怎么做：

1.  `<br /><br />`如果元描述不存在，我该怎么做才能将其删除？基本上这样做，顶部没有多余的线条导致空位。

2.  如何使关键字成为我域的所有链接，例如 `http://mysite.com/keyword/coding``http://mysite.com/keyword/website-builder`or `http://mysite.com/keyword/php-help`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:26:07.850

这应该可以解决问题：

```
<?php

$tags = get_meta_tags('http://www.ebay.com/');

if(trim($tags['description'])!='') //if description is set and not empty
{
    echo ($tags['description']).'<br /><br />';
}

echo $tags['keywords'];

$keywordArray = explode(",", $tags['keywords']); //split string with keywords in an array
foreach($keywordArray as $keyword) //for each entry in the array
{
    echo "http://www.mysite.com/".urlencode(trim($keyword)); //echo your URL. Encode the keyword in case special chars are present
}

?> 
```

Akam 为您提供了 if 语句的短符号，我个人更喜欢长符号。

# python - python中的方法继承

> ID：14950550
> 
> 赞同：0
> 
> 时间：2013-02-19T05:34:55.020
> 
> 标签：python, oop, methods

```
class Field(object):

    def __init__(self):
        self.drunks = {}

    def addDrunk(self, drunk, loc):
        if drunk in self.drunks:
            raise ValueError('Duplicate drunk')
        else:
            self.drunks[drunk] = loc

    def moveDrunk(self, drunk):
        if not drunk in self.drunks:
            raise ValueError('Drunk not in field')
        xDist, yDist = drunk.takeStep()
        currentLocation = self.drunks[drunk]
        #use move method of Location to get new location
        self.drunks[drunk] = currentLocation.move(xDist, yDist)

    def getLoc(self, drunk):
        if not drunk in self.drunks:
            raise ValueError('Drunk not in field')
        return self.drunks[drunk]

    import random

def walk(f, d, numSteps):
    start = f.getLoc(d)
    for s in range(numSteps):
        f.moveDrunk(d)
    return(start.distFrom(f.getLoc(d))) 
```

我正在学习 python。我看到了这段代码，我不明白为什么 walk 函数可以使用 moveDrunk() 方法？不应该因为 moveDrunk() 来自 Field 类而引发错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:36:35.657

您将`Field`类 ( `f`) 的实例作为参数传递：

```
def walk(f, d, numSteps):
         ^ 
```

# javascript - 如何根据条件选择文本区域的数量

> ID：14950562
> 
> 赞同：0
> 
> 时间：2013-02-19T05:36:19.763
> 
> 标签：javascript, html, jsf

根据所选选项的类型，我希望显示 1 个或 3 个文本区域，即，如果选择了选项“mc”，我希望显示 3 个文本区域。我正在尝试在 Javascript 中执行此操作，但是每个选择的选项都会显示 3 个文本区域。我认为 JS 功能不起作用。您能否让我知道错误在哪里。

谢谢。

代码：

```
<head>           
    <link href="./css.css" rel="stylesheet" type="text/css" />
</head>
<body>          
    <h:form>                
        <script type="text/javascript"> 
              function selectans(qtype)  {                         
                if (qtype == "mc")
                {
                    alert("In MC type");
                    document.getElementById("formId:editor3").style.display = "block";
                    document.getElementById("formId:editor4").style.display = "block";
                    //document.form.editor3.disabled = false;
                    //document.form.editor4.disabled = false;                            
                } 
                else {

                    document.getElementById("formId:editor3").style.display = "none";
                    document.getElementById("formId:editor4").style.display = "none";
                    //document.form.editor3.disabled = true;
                    //document.form.editor4.disabled = true;
                }
              }                                                              
      </script>

       Question Type: 
       <h:selectOneMenu  id="qtype" value ="#{quizBean.qtype}" onchange="selectans(qtype) ">
           <f:selectItem id="desc" itemLabel="Descriptive Type" itemValue="desc" />
           <f:selectItem id="fill" itemLabel="Fill up the Blanks" itemValue="fill" />
           <f:selectItem id="mc" itemLabel="Multiple Choice" itemValue="mc"  />
           <f:selectItem id="tf" itemLabel="True/False" itemValue="tf" />
       </h:selectOneMenu>

       Question:                              <h:inputTextarea id="editor1" value="#{quizBean.question}" rows="20" cols="75" /> <br></br> 

       Answer:
           <h:inputText id ="editor2" value="#{quizBean.answerChoice2}"  />
           <h:inputText id ="editor3" value="#{quizBean.answerChoice2}"  />
           <h:inputText id ="editor4" value="#{quizBean.answerChoice3}"  />                                                         

            <h:commandButton value="Submit" action="#{quizBean.addQuestion}" />
</h:form>        

</body> 
```

CSS：

```
root { 
    display: block;
}

.hide {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:42:06.383

你的事件函数应该是这样`onchange="selectans('qtype') "`的这样只有一个字符串作为参数传递

# c# - 在函数完成其任务后定期执行函数

> ID：14950565
> 
> 赞同：6
> 
> 时间：2013-02-19T05:36:25.143
> 
> 标签：c#, visual-studio-2012, threadpool, windows-store-apps

我正在使用 C# 和 xaml 构建一个 Windows 商店应用程序。我需要在一定的时间间隔后刷新数据（从服务器带来新数据）。我使用 ThreadPoolTimer 定期执行刷新功能，如下所示：

```
 TimeSpan period = TimeSpan.FromMinutes(15); 
   ThreadPoolTimer PeriodicTimer =  ThreadPoolTimer.CreatePeriodicTimer(async(source)=> {  
   n++; 
   Debug.WriteLine("hello" + n);
   await dp.RefreshAsync(); //Function to refresh the data
   await Dispatcher.RunAsync(CoreDispatcherPriority.High,
                () =>
                {
                    bv.Text = "timer thread" + n;

                });

        }, period); 
```

这工作正常。唯一的问题是如果刷新函数在其下一个实例提交到线程池之前没有完成怎么办。有没有办法指定其执行之间的差距。

第 1 步：执行刷新功能（需要任何时间）

第 2 步：刷新函数完成其执行

第 3 步：间隔 15 分钟，然后转到第 1 步

刷新功能执行。执行结束15分钟后，再次执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T06:31:32.620

[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)将解决这个问题。声明一个类级别的 AutoResetEvent 实例。

```
AutoResetEvent _refreshWaiter = new AutoResetEvent(true); 
```

然后在您的代码中： 1\. 等待它直到它发出信号，以及 2\. 将其引用作为参数传递给 RefreshAsync 方法。

```
TimeSpan period = TimeSpan.FromMinutes(15); 
   ThreadPoolTimer PeriodicTimer =  ThreadPoolTimer.CreatePeriodicTimer(async(source)=> {  
   // 1\. wait till signaled. execution will block here till _refreshWaiter.Set() is called.
   _refreshWaiter.WaitOne();
   n++; 
   Debug.WriteLine("hello" + n);
   // 2\. pass _refreshWaiter reference as an argument
   await dp.RefreshAsync(_refreshWaiter); //Function to refresh the data
   await Dispatcher.RunAsync(CoreDispatcherPriority.High,
                () =>
                {
                    bv.Text = "timer thread" + n;

                });

        }, period); 
```

最后，在`dp.RefreshAsync`方法结束时调用`_refreshWaiter.Set();`，如果 15 秒过去了，则可以调用下一个 RefreshAsync。请注意，如果 RefreshAsync 方法花费的时间少于 15 分钟，则执行将照常进行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T12:27:49.500

我认为更简单的方法是`async`：

```
private async Task PeriodicallyRefreshDataAsync(TimeSpan period)
{
  while (true)
  {
    n++; 
    Debug.WriteLine("hello" + n);
    await dp.RefreshAsync(); //Function to refresh the data
    bv.Text = "timer thread" + n;
    await Task.Delay(period);
  }
}

TimeSpan period = TimeSpan.FromMinutes(15); 
Task refreshTask = PeriodicallyRefreshDataAsync(period); 
```

该解决方案还提供了一种`Task`可用于检测错误的方法。

# java - 带有 http:binding 的 wsimport

> ID：14950569
> 
> 赞同：3
> 
> 时间：2013-02-19T05:36:34.570
> 
> 标签：java, wsdl, wsimport

我的 wsdl 中有以下绑定和服务元素：

```
<wsdl:binding name="MyServiceSOAP11Binding" type="impl:MyServicePortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="getProjects4Me">
        <soap:operation soapAction="getProjects4Me" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>    

<wsdl:binding name="MyServiceHttpBinding" type="impl:MyServicePortType">
    <http:binding verb="POST"/>
     <wsdl:operation name="getProjects4Me">
        <http:operation location="MyService/getProjects4Me"/>
        <wsdl:input>
            <mime:content type="text/xml" part="getProjects4Me"/>
        </wsdl:input>
        <wsdl:output>
            <mime:content type="text/xml" part="getProjects4Me"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="MyService">
    <wsdl:port name="MyServiceSOAP11port_http" binding="impl:MyServiceSOAP11Binding">
        <soap:address location="http://shop.my.com:80//services/MyService"/>
    </wsdl:port>
    <wsdl:port name="MyServiceHttpport" binding="impl:MyServiceHttpBinding">
        <http:address location="http://shop.my.com:80/services/MyService"/>
    </wsdl:port>
</wsdl:service> 
```

当我在上述 wsdl 上使用 wsimport 时，它会为“MyServiceSOAP11port_http”生成代码，但不会为“MyServiceHttpport”生成代码。我错过了什么吗？

我的 wsimport ANT 任务：

```
 <target name="wsimport">
    <exec executable="${jdk.home}/bin/wsimport">
      <arg line="-keep -s ../wsimportsrc -p com.sample -verbose
        -d ../wsimportclasses ../wsdl_xsd/MyService.xml"/>
    </exec>
  </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:16:05.013

它确实生成。你能检查 *_Service.java 文件吗？它们都共享相同的 QName，但有两个不同的端点。在您的情况下，会有类似的代码

```
 http://www.example.org/NewWSDLFile --> Consider this as Your Name Space

@WebEndpoint(name = "MyServiceSOAP11port_http")
 public NewWSDLFile getNewWSDLFileSOAP1() {
    return super.getPort(new QName("http://www.example.org/NewWSDLFile/", 
   "MyServiceSOAP11port_http"), NewWSDLFile.class);
} 
```

和

```
 @WebEndpoint(name = "MyServiceHttpport")
 public NewWSDLFile getNewWSDLFileSOAP(WebServiceFeature... features) {
    return super.getPort(new QName("http://www.example.org/NewWSDLFile/", 
   "MyServiceHttpport"), NewWSDLFile.class, features);
} 
```

简单地拥有两个端口并不意味着每种端口类型都有单独的代码库

# c# - Asmx Web 服务如何返回 JSON 而不是 XML？

> ID：14950578
> 
> 赞同：3
> 
> 时间：2013-02-19T05:37:24.397
> 
> 标签：c#, asp.net, .net, asmx, javascriptserializer

我的服务方式：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string getDataFromTrainingMaster()
{
    List<TrainingMasterDataStruct> results = new DAL().GetDataFromTrainingMaster();
    JavaScriptSerializer js = new JavaScriptSerializer();                    
    return js.Serialize(results).ToString(); 
} 
```

我的 .net Web 服务返回包装在 XML 中的 JSON，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<string xmlns="http://tempuri.org/">   [{"Training_Code":"1234 ","Training_Duration":"2hrs ","Training_Startdate":"2/14/2013 3:00:00 PM","Training_Enddate":"2/14/2013 5:00:00 PM","Trainer_ID":1,"Training_Location":"B-Wing Training room-4","Comments":"C# training","Keyword":"C#1234","NumberofDays":1},{"Training_Code":"4321 ","Training_Duration":"16 ","Training_Startdate":"2/17/2013 10:30:00 AM","Training_Enddate":"2/17/2013 5:30:00 PM","Trainer_ID":2,"Training_Location":"A-Wing Training Room-6","Comments":"Objective-C","Keyword":"Obj-C4321","NumberofDays":2}] 
```

我需要以下格式：

```
"Training":[{"Training_Code":"1234 ","Training_Duration":"2hrs ","Training_Startdate":"2/14/2013 3:00:00 PM","Training_Enddate":"2/14/2013 5:00:00 PM","Trainer_ID":1,"Training_Location":"B-Wing Training room-4","Comments":"C# training","Keyword":"C#1234","NumberofDays":1},{"Training_Code":"4321 ","Training_Duration":"16 ","Training_Startdate":"2/17/2013 10:30:00 AM","Training_Enddate":"2/17/2013 5:30:00 PM","Trainer_ID":2,"Training_Location":"A-Wing Training Room-6","Comments":"Objective-C","Keyword":"Obj-C4321","NumberofDays":2}]</string> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T09:49:39.397

无需自己创建 JSON 字符串。返回`List<TrainingMasterDataStruct>`并让 .NET 即时为您序列化它：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<TrainingMasterDataStruct> getDataFromTrainingMaster()
{
   List<TrainingMasterDataStruct> list = doStuff();
   return list;
} 
```

其次，非静态方法签名表明这是一个 asmx 文件（页面方法是静态的）。默认情况下，这些序列化为 xml，因此您需要取消注释或将`System.Web.Script.Services.ScriptService`属性添加到 Web 服务类：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class WebService : System.Web.Services.WebService { 
```

这允许它返回 JSON。一个问题：JSON 序列化器似乎能够序列化比 XML 更多的类型，所以如果你想输出或/或在这里要小心 - 在这里使用列表和数组而不是集合。

第三，**非常重要**的是，客户端必须向服务器表明它需要 JSON 响应。

为了测试和验证第三点，我建议您按照上述步骤，然后使用 jQuery 从测试网页调用 Web 服务并监控[Fiddler](http://fiddler2.com/)中的流量。就像是：

```
$.ajax({
        type: "POST",
        url: "WebService.asmx/getDataFromTrainingMaster",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: "",
        success: function (msg) { }
    }); 
```

这是 JSON 请求/响应的样子——特别注意 POST、Accept 和 Content-Type 标头：

```
POST http://scrubbed/GetVehicles HTTP/1.1
x-requested-with: XMLHttpRequest
Accept-Language: en-gb
Accept: application/json, text/javascript, */*
Content-Type: application/json; charset=utf-8
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E; InfoPath.2)
Host: scrubbed
Content-Length: 0
Connection: Keep-Alive
Pragma: no-cache

HTTP/1.1 200 OK
Cache-Control: private, max-age=0
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Mon, 04 Oct 2010 10:49:12 GMT
Content-Length: 1417

{"d":{"Data":[{"Key":1,"Value":[{"VehicleId":15036,"VehicleAlias":"Whatever","Expiry":"\/Date(1915983035043)\/","Expired":false},{"VehicleId": 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:00:59.853

你可以试试这个：

```
var data = [{"Training_Code":"1234 ","Training_Duration":"2hrs ","Training_Startdate":"2/14/2013 3:00:00 PM","Training_Enddate":"2/14/2013 5:00:00 PM","Trainer_ID":1,"Training_Location":"B-Wing Training room-4","Comments":"C# training","Keyword":"C#1234","NumberofDays":1},{"Training_Code":"4321 ","Training_Duration":"16 ","Training_Startdate":"2/17/2013 10:30:00 AM","Training_Enddate":"2/17/2013 5:30:00 PM","Trainer_ID":2,"Training_Location":"A-Wing Training Room-6","Comments":"Objective-C","Keyword":"Obj-C4321","NumberofDays":2}]

var result = JSON.stringify({ Training: data }) 
```

`result`会给你想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:11:58.970

尝试将您的返回类型更改为`List<TrainingMasterDataStruct>`并返回“ `results`”。您不需要自己序列化字符串，带有 WebMethod 属性的 ASP.NET 会为您处理这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-09T14:40:06.700

我有一个类似的错误。一种方法以正确的 json 格式返回响应，但另一种方法以相同的 asmx 返回 xml。

这里有两种方法：

JSON 格式的响应：

```
[WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string loginOne(string param1, string param2){
          result = new JObject();
          ...
          ...
          return result.ToString();
    } 
```

XML 格式的响应：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string getCompaniesOne()
    {
        ...
        ...
        return result.ToString();
    } 
```

我怎么解决的？

向错误的响应方法添加虚拟参数。

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string getCompaniesOne(string dummy)
    {
       ...
       ...
       return result.ToString();
    } 
```

我希望这有帮助。

# c# - 即使互联网在计算机上处 于活动状态，也可以在特定计算机上打开网页

> ID：14950581
> 
> 赞同：1
> 
> 时间：2013-02-19T05:37:35.600
> 
> 标签：c#, asp.net, c#-4.0

我的公司有用户名密码保护的网页。
现在我想在我允许的特定计算机上打开该网页，即使该计算机上的互联网处于活动状态。
我正在`asp.net 4.0`使用`c#`.
有没有人可以帮助我，我只能允许特定的计算机打开该网页，否则会产生错误。
任何人帮助请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:44:39.197

创建允许计算机ip的白名单。

在 global.asax 中，将 ip 与列表中的 ip 匹配。

如果 ip 不在列表中，则重定向到错误页面，否则继续。

对于上述方法，ip 需要是静态的。如果这不可能，请按照此方法。在您的网站中创建一个页面用于登录...

仅将 URL 提供给您要激活的用户/计算机。

当身份验证发生并成功写入 cookie 时。

删除您新创建的页面。

再次在您的 global.asax 中搜索此 cookie 值。

如果找到值，则可以，否则重定向到错误页面。

您必须将 cookie 值设置为 180 天，这样您就不需要重新激活您的第二个登录页面。

但是，如果可能，请仅使用第一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:52:32.943

当您的应用程序需要用户名和密码才能打开它时。
由于所有请求首先进入 gloabal 文件，如下所示

```
 void Application_Start(object sender, EventArgs e) 
 {
    // Code that runs on application startup
    string localAddress = Context.Request.ServerVariables["LOCAL_ADDR"];
    // Returns "::1" when running under the VS server, however it throws an 
     // exception under IIS Express, so I assume it also does so under IIS.
  } 
```

在任何地方创建一个列表并保留允许的 ip 列表。
如果它是其中之一，则允许它。
其他明智的拒绝请求。

如果您有范围定义，这是一个很好的链接
[如何检查输入 IP 是否在特定 IP 范围内](https://stackoverflow.com/questions/2138706/how-to-check-a-input-ip-fall-in-a-specific-ip-range)

# c# - 如何使用 OpenXml 在 .pptx 文件末尾添加新的空白幻灯片？

> ID：14950587
> 
> 赞同：0
> 
> 时间：2013-02-19T05:37:41.120
> 
> 标签：c#, powerpoint, openxml

我想使用 OpenXml 在 .pptx 文件的末尾插入一张新幻灯片 - 空白幻灯片。谁能有任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:42:24.323

您当然可以使用 Open Xml sdk for Powerpoint 编写一些代码来实现此目的。但是以编程方式执行此操作的最简单方法是使用[Presentation Builder](http://powertools.codeplex.com/downloads/get/602330)一个很好的围绕开放 xml 的包装器来处理 powerpoint 演示文稿。

使用一张空白幻灯片创建一个 PowerPoint 演示文稿文件。使用 Presentation builder 将其附加到您的所有文件中。观看[此视频](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2013/01/14/quick-introduction-to-presentationbuilder.aspx)以开始使用。

希望这可以帮助。

# php - 大文件上的 simplexml_load_string 错误发生在一个系统上，而不是另一个系统上

> ID：14950589
> 
> 赞同：16
> 
> 时间：2013-02-19T05:37:55.800
> 
> 标签：php, xml, simplexml

我正在处理一个我无法编辑的第三方 PHP 库，它已经运行了将近一年。它用于`simplexml_load_string`来自远程服务器的响应。最近它一直在大响应中窒息。这是房地产列表的数据馈送，格式如下所示：

```
<?xml version="1.0"?>
<RETS ReplyCode="0" ReplyText="Operation Successful Reference ID: 9bac803e-b507-49b7-ac7c-d8e8e3f3aa89">
<COUNT Records="9506" />
<DELIMITER value="09" />
<COLUMNS>   sysid   1   2   3   4   5   6   </COLUMNS>
<DATA>  252370080   Residential 0.160   No  ADDR0   06051</DATA>
<DATA>  252370081   Residential 0.440   Yes ADDR0   06043</DATA>
<DATA>  252370082   Residential 1.010   No  ADDR0   06023</DATA>
<DATA>More tab delimited text</DATA>
<!-- snip 9000+ lines -->
</RETS> 
```

我下载了一个响应的示例文件（大约 22MB），这是我最终完成调试和理智的地方。两台服务器都运行 PHP 版本 5.3.8，但请注意不同的结果。我确信这两个文件是相同的（我想不同的文件大小、strlen 和最后 50 个字符可以通过具有额外回车符的 Windows 换行符来解释）。测试脚本：

```
error_reporting(-1);
ini_set('display_errors', 1);
$file = 'error-example.xml';
$xml = file_get_contents($file);

echo 'filesize:              ';
var_dump(filesize($file));

echo 'strlen:                ';
var_dump(strlen($xml));

echo 'simplexml object?      ';
var_dump(is_object(simplexml_load_string($xml)));

echo 'Last 50 characters:    ';
var_dump(substr($xml, -50)); 
```

在 Windows 上本地输出：

```
filesize:              int(21893604)
strlen:                int(21893604)
simplexml object?      bool(true)
Last 50 characters:    string(50) "RD DR    CT  Watertown   203-555-5555            </DATA>
</RETS>" 
```

远程 UNIX 服务器上的输出：

```
filesize:              int(21884093)
strlen:                int(21884093)
simplexml object?      
Warning: simplexml_load_string(): Entity: line 9511: parser error : internal error in /path/to/test.php on line 19

Warning: simplexml_load_string(): AULTED CEILING IN FOYER, BRICK FP IN FR, NEW FLOORING IN LR DR FR FOYER KITCHEN  in /path/to/test.php on line 19

Warning: simplexml_load_string():                                                                                ^ in /path/to/test.php on line 19

Warning: simplexml_load_string(): Entity: line 9511: parser error : Extra content at the end of the document in /path/to/test.php on line 19

Warning: simplexml_load_string(): AULTED CEILING IN FOYER, BRICK FP IN FR, NEW FLOORING IN LR DR FR FOYER KITCHEN  in /path/to/test.php on line 19

Warning: simplexml_load_string():                                                                                ^ in /path/to/test.php on line 19
bool(false)
Last 50 characters:    string(50) "ORD DR   CT  Watertown   203-555-5555            </DATA>
</RETS>" 
```

对评论和附加信息的一些回复：

*   据我所知，XML 本身似乎是有效的（它*确实*在我的系统上工作）。

*   `magic_quotes_runtime`绝对关闭。

*   工作服务器具有 libxml 版本 2.7.7，而另一个具有 2.7.6。这真的能有所作为吗？我找不到 libxml 更改日志，但似乎不太可能。

*   这似乎只在响应/文件超过一定大小时发生，并且错误总是发生在倒数第二行。

*   我没有遇到内存问题，测试脚本会立即运行。

如果我知道哪些是相关的，我可以发布 PHP 配置的差异。知道问题可能是什么，或者知道我可能想检查的其他任何内容吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T19:17:43.160

[libxml2 更改日志](http://www.xmlsoft.org/news.html)包含“ [608773 add a missing check in xmlGROW (Daniel Veillard)”](http://osdir.com/ml/svn-commits-list/2010-02/msg00320.html)，这似乎与输入缓冲有关。注意我对 libxml2 的内部结构*一无所知*，但似乎可以想象您已经解决了 2.7.7 中修复的 2.7.6 错误。

检查直接使用时行为是否有任何不同`simplexml_load_file()`，并尝试设置 libxml 解析器相关选项，例如

```
simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_COMPACT | LIBXML_PARSEHUGE) 
```

具体来说，您可能想尝试使用该`LIBXML_PARSEHUGE`标志。

> [http://php.net/manual/en/libxml.constants.php](http://php.net/manual/en/libxml.constants.php)
> `XML_PARSE_HUGE`标志放宽了解析器的任何硬编码限制。这会影响文档的最大深度或实体递归等限制，以及文本节点大小的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:19:25.457

您的 XML 无效，在这两种情况下都会导致问题。

你只需要一个根。

IE。一切都应该在您的标签内：

```
<?xml version="1.0"?>
<RETS>
    ...
</RETS> 
```

您的 XML 中有多个根，这将导致问题:-)

尝试将其全部包装在根节点中，看看它是否有效。

```
<?xml version="1.0"?>
<rootNode>
    <RETS>
    ...
    </RETS>
    <count bla="99" />
</rootNode> 
```

我不确定这是否是 libxml 的差异，或者是不同级别的错误报告允许它在一个而不是另一个上工作，但这对我来说似乎是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:42:24.887

我的 XMLSpy 确认您的 XML 文件（我从您提供的链接下载的）没有问题并且格式正确。

然而，一个潜在的问题是 XML 序言中缺少“编码”属性这一事实：根据您的 libxml2 版本，我猜可能会出现以下情况：服务器检查编码属性，缺少哪个服务器回退到一些默认值（配置设置）。也许较旧的库版本不检查 BOM。

另请参阅此链接，他们与 libxml 有类似的编码问题： [https ://stackoverflow.com/questions/4724241/utf-8-problems-with-php-dom-on-debian-server](https://stackoverflow.com/questions/4724241/utf-8-problems-with-php-dom-on-debian-server#answer-4752666)

其本质是升级您的 libxml 库确实可以解决问题。或者，可能值得检查配置中的默认编码设置。

根据我的 XMLSpy，该文件是 utf-8 编码的 - 作为测试，也许值得检查是否指定

```
<?xml version="1.0" encoding="UTF-8"?> 
```

因为文件序言阻止您的 Unix 服务器阻塞。

# php - 第 1 行的“日期”列的数据库错误：00'

> ID：14950591
> 
> 赞同：0
> 
> 时间：2013-02-19T05:38:05.230
> 
> 标签：php, apache, anchor-cms

我刚刚完成了 anchor-cms 的安装，但是当我查看管理页面或主页时，我得到以下输出

```
Unhandled Exception

Message:

Database Error:00' for column 'date' at row 1

SQL: INSERT INTO `sessions` (`id`, `date`, `data`) values (?, ?, ?)
Location:

/Library/WebServer/Documents/anchor/system/database/connection.php on line 128
Stack Trace:

#0 /Library/WebServer/Documents/anchor/system/database/query.php(254): System\Database\Connection->execute('INSERT INTO `se...', Array)
#1 /Library/WebServer/Documents/anchor/system/session/database.php(42): System\Database\Query->insert(Array)
#2 /Library/WebServer/Documents/anchor/system/session/payload.php(78): System\Session\Database->save(Array, Array, false)
#3 [internal function]: System\Session\Payload->save()
#4 /Library/WebServer/Documents/anchor/system/session.php(58): call_user_func_array(Array, Array)
#5 /Library/WebServer/Documents/anchor/system/bootstrap.php(124): System\Session::__callStatic('save', Array)
#6 /Library/WebServer/Documents/anchor/system/bootstrap.php(124): System\Session::save()
#7 /Library/WebServer/Documents/anchor/index.php(33): require('/Library/WebSer...')
#8 {main} 
```

**这是我的 connection.php 文件**

```
<?php namespace System\Database;

/**
 * Nano
 *
 * Lightweight php framework
 *
 * @package     nano
 * @author      k. wilson
 * @link        http://madebykieron.co.uk
 */

use System\Config;
use PDO, PDOStatement, PDOException, Exception;

class Connection {

    public $pdo, $config, $queries = array();

    public function __construct(PDO $pdo, $config) {
        $this->pdo = $pdo;
        $this->config = $config;
    }

    public function transaction($callback) {
        $this->pdo->beginTransaction();

        // After beginning the database transaction, we will call the callback
        // so that it can do its database work. If an exception occurs we'll
        // rollback the transaction and re-throw back to the developer.
        try {
            call_user_func($callback);
        }
        catch(PDOException $e) {
            $this->pdo->rollBack();

            throw $e;
        }

        $this->pdo->commit();
    }

    public function query($sql, $bindings = array()) {
        $sql = trim($sql);

        list($statement, $result) = $this->execute($sql, $bindings);

        // The result we return depends on the type of query executed against the
        // database. On SELECT clauses, we will return the result set, for update
        // and deletes we will return the affected row count.
        if(stripos($sql, 'select') === 0 or stripos($sql, 'show') === 0) {
            return $this->fetch($statement, Config::get('database.fetch'));
        }
        elseif(stripos($sql, 'update') === 0 or stripos($sql, 'delete') === 0) {
            return $statement->rowCount();
        }
        // For insert statements that use the "returning" clause, which is allowed
        // by database systems such as Postgres, we need to actually return the
        // real query result so the consumer can get the ID.
        elseif (stripos($sql, 'insert') === 0 and stripos($sql, 'returning') !== false) {
            return $this->fetch($statement, Config::get('database.fetch'));
        }
        else {
            return $result;
        }
    }

    public function first($sql, $bindings = array()) {
        list($statement, $result) = $this->execute($sql, $bindings);

        if($result) return $statement->fetch(Config::get('database.fetch'));
    }

    public function column($sql, $bindings = array()) {
        list($statement, $result) = $this->execute($sql, $bindings);

        if($result) return $statement->fetchColumn();
    }

    public function type($var) {
        if(is_null($var)) {
            return PDO::PARAM_NULL;
        }

        if(is_int($var)) {
            return PDO::PARAM_INT;
        }

        if(is_bool($var)) {
            return PDO::PARAM_BOOL;
        }

        return PDO::PARAM_STR;
    }

    public function execute($sql, $bindings = array()) {
        // Each database operation is wrapped in a try / catch so we can wrap
        // any database exceptions in our custom exception class, which will
        // set the message to include the SQL and query bindings.
        try {
            $statement = $this->pdo->prepare($sql);

            // bind paramaters by data type
            // test key to see if we have to bump the index by one
            $zerobased = (strpos(key($bindings), ':') === 0) ? false : true;

            foreach($bindings as $index => $bind) {
                $key = $zerobased ? ($index + 1) : $index;

                $statement->bindValue($key, $bind, $this->type($bind));
            }

            $start = microtime(true);

            $result = $statement->execute();

            $this->queries[] = array($statement->queryString, $bindings);
        }
        // If an exception occurs, we'll pass it into our custom exception
        // and set the message to include the SQL and query bindings so
        // debugging is much easier on the developer.
        catch(PDOException $exception) {
            $message = explode(':', $exception->getMessage());

            $error = '<strong>Database Error:</strong>' . end($message) . str_repeat("\n", 3) .
                '<strong>SQL: </strong>' . $sql;

            $exception = new Exception($error, 0, $exception);

            throw $exception;
        }

        return array($statement, $result);
    }

    protected function fetch($statement, $style) {
        // If the fetch style is "class", we'll hydrate an array of PHP
        // stdClass objects as generic containers for the query rows,
        // otherwise we'll just use the fetch style value.
        if($style === PDO::FETCH_CLASS) {
            return $statement->fetchAll(PDO::FETCH_CLASS, 'stdClass');
        }
        else {
            return $statement->fetchAll($style);
        }
    }

} 
```

**第二个错误**

```
Database Error: Invalid datetime format: 1292 Incorrect datetime value: '2013-02-19T06:47:59+00:00' for column 'date' at row 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:43:06.383

免责声明：从技术上讲，这不是答案；）

显然，anchor-CMS 使用 ISO 8601 格式来存储（至少）会话日期，这显然[不安全](https://stackoverflow.com/questions/11053941/mysql-insert-to-datetime-is-it-safe-to-use-iso8601-format)，尤其是在“严格模式”处于活动状态时！

我认为目前最好禁用[MySQL 的严格模式](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html)。如果您不“拥有” SQL-Server，您可以为单个会话禁用严格模式。

您可以通过从第 51 行开始编辑 system/database.php 来做到这一点。将以下行从

```
if(version_compare(PHP_VERSION, '5.3.6', '<=')) {
    $options[PDO::MYSQL_ATTR_INIT_COMMAND] = 'SET NAMES ' . $config['charset'];
} 
```

到

```
if(version_compare(PHP_VERSION, '5.3.6', '<=')) {
    $options[PDO::MYSQL_ATTR_INIT_COMMAND] = 'SET NAMES ' . $config['charset']
        . ', sql_mode=\'ALLOW_INVALID_DATES\'';
} else {
    $options[PDO::MYSQL_ATTR_INIT_COMMAND] = 'SET sql_mode=\'ALLOW_INVALID_DATES\'';
} 
```

我认为这应该可以工作，直到锚点 CMS 使用正确的日期（我可能会在今晚下班后为此提出拉取请求）。

# java - 为什么 '\117' 在 Java 中是一个有效的字符文字？

> ID：14950593
> 
> 赞同：16
> 
> 时间：2013-02-19T05:38:08.893
> 
> 标签：java, character, special-characters

我已经看到这`char`被定义为 `char ch = '\117'`

**有什么样的表现**形式`'\117'`？

例如，我知道`escaped-sequence`is或is ，一个十六进制数字在哪里，但我这辈子从未见过这样的事情！令人惊讶的是，它确实编译！（输出是）`'\n'``unicode```\udddd'``d``'\117'``O`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T05:43:17.983

这是 ascii 的八进制表示。你可以在这里看到更多的价值：http: [//donsnotes.com/tech/charsets/ascii.html](http://donsnotes.com/tech/charsets/ascii.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T05:42:10.080

它是八进制的，是 C/C++ 的保留。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T05:42:21.470

那是因为它是大写**O**字符的八进制表示。

如果你尝试打印你的`char ch='\117';`，你会看到它打印出来`O`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T05:42:42.570

这是字符“O”的八进制值，当我执行 system.out.println(..) 时，我得到了以下输出：

```
char ch = '\117';
System.out.println("Char is: " + ch); 
```

输出：

```
Char is : O 
```

# java - struts 逻辑的 AND 条件：空标签

> ID：14950597
> 
> 赞同：1
> 
> 时间：2013-02-19T05:38:29.843
> 
> 标签：java, struts

如何为struts添加一个AND条件，例如a和b都是空的？

```
<logic:empty name="a">
//do something                                      
</logic:empty> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:51:13.863

不确定，这可能会有所帮助

```
<logic:empty name="a">
   <logic:empty name="b">
    //do something        
    </logic:empty>                             
</logic:empty> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:27:17.727

这是标签的限制。没有简单的方法来执行**and** or **or or**条件。我建议你使用 JSTL：

```
<c:if test="${a == 1 && b == 1}"> Your code here </c:if> 
```

您可以根据您的属性更改比较逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:48:18.233

你可以试试这个

```
<c:if test="${(empty a)  && (empty b)}">
//do something 
</c:if> 
```

# cassandra - 卡桑德拉还是 Hbase？

> ID：14950598
> 
> 赞同：2
> 
> 时间：2013-02-19T05:38:38.593
> 
> 标签：cassandra, hbase

我有一个要求，我想在其中存储以下内容：

*   Mac 地址 // PKEY
*   时间戳 // PKEY
*   位置 ID
*   所有者名称
*   信号强度

插入逻辑如下：

*   在每个位置 (LocationID) 每小时存储一次每个活动设备 (MacAddress) 的上述统计信息
*   条目在每小时结束时创建，因此主键将始终为 MAC+TimeStamp

没有更新，只有插入

可以执行的查询如下：

*   给我最后 'N' 小时的所有条目，其中 MacAddress = "...."
*   给我最近'N'小时的所有条目 Where LocationID IN (locID1, locID2, ..);

不用说，有数十亿个条目，我想使用 HBASE 或 Cassandra。我尝试过探索，似乎Cassandra可能不是正确的选择。

原因是如果我在 cassandra 中有以下内容：

< < RowKey > MacAddress:TimeStamp > >
+ LocationID
+ OwnerName
+ 信号强度

这两个查询都会扫描整个数据库，对吧？即使我在 LocationID 上添加一个索引，这也只会在一定程度上有助于第二次查询，因为时间戳上没有索引（我相信时间戳上的搜索并不快，因为 MacAddress:TimeStamp 复合键不会允许我们仅搜索时间戳，而是进行完整扫描，对吗？）。

我被困在这里很长时间了，如果我们应该选择 HBase 或 Cassandra，任何见解都会有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T05:27:56.000

使用 Cassandra 进行建模的正确方法是使用按 MAC 地址分区、按时间戳排序并按位置 ID 编制索引的表。请参阅 Cassandra 数据模型文档，尤其是[关于集群](http://www.datastax.com/docs/1.2/ddl/table#compound-keys-and-clustering)[预定义排序] 的部分。您的任何查询都不需要全表扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:14:49.877

您必须记住，像 Cassandra 这样的 NoSql 实例允许水平扩展并使数据分片变得更加容易。通过开发分片策略（识别分片键等），您可以显着减少单个实例上的数据大小并使查询（即使在尝试查询海量数据集时）变得可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T17:38:48.547

任何一个都可以用于此查询：

> 给我最后 'N' 小时的所有条目，其中 MacAddress = "...."

在 cassandra 中，您可能希望使用有序分区器，以便进行简单的扫描。这样您就不必扫描整个表。（我对 Cassandra 有点生疏）。

在 hbase 中，它总是按行键排序，因此扫描变得容易。您只需设置一个开始和停止行键。从概念上讲，它将是：

```
 scan.setStartRow(mac+":"+timestamp);
  scan.setStopRow(mac+":"+endtimestamp); 
```

然后它只会在给定的时间段内扫描给定mac地址的行——只是数据的一小部分。

这个查询要困难得多：

> 给我最近'N'小时的所有条目 Where LocationID IN (locID1, locID2, ..);

Cassandra 确实有二级索引，所以看起来很“容易”，但我不知道它会扫描多少数据。我没有看过 Cassandra，因为它添加了二级索引。

在 hbase 中，您必须扫描整个表或创建第二个表。我建议创建第二个表，其中行键为 < location:timestamp > 并且您将复制数据。然后，您将使用该表通过扫描并设置开始键和结束键来按位置查找数据。

# django - Django社交身份验证，链接额外值

> ID：14950603
> 
> 赞同：2
> 
> 时间：2013-02-19T05:39:04.167
> 
> 标签：django, django-socialauth

我正在尝试使用 django social auth forlinkedin 作为我的用户的登录名。我想从用户帐户中获取额外的值。我已经提到了我的参数`settings.py`，

```
LINKEDIN_SCOPE = ['r_basicprofile', 'r_emailaddress','r_fullprofile'] 
```

但我得到的回应只是用户的基本个人资料信息。如何获取所有提到的范围信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-16T17:16:16.073

您的设置中缺少某些内容。一旦你要添加范围，你应该在你的设置中添加**LINKEDIN_EXTRA_FIELD_SELECTORS**和**LINKEDIN_EXTRA_DATA 。**

**例子：**

```
LINKEDIN_SCOPE = ['r_basicprofile', 'r_emailaddress','r_fullprofile']

LINKEDIN_EXTRA_FIELD_SELECTORS = ['email-address','positions', 'headline','summary','picture-url','site-standard-profile-request','public-profile-url','location','interests','skills','languages',]

LINKEDIN_EXTRA_DATA = [('id', 'id'), ('first-name', 'first_name'), ('last-name', 'last_name'), ('email-address', 'email_address'), ('positions', 'positions'), ('summary', 'summary'), ('headline', 'headline'), ('picture-url', 'picture_url'),
 ('site-standard-profile-request', 'site_standard_profile_request'), ('public-profile-url', 'public_profile_url'), ('location', 'location'), ('interests', 'interests'), ('skills', 'skills'), ('languages', 'languages'),] 
```

[LinkedIn 开发人员资料字段 API](http://developer.linkedin.com/documents/profile-fields)

# function - ELISP：提示用户输入数字并询问用户该数量的字符串然后插入列表的功能

> ID：14950605
> 
> 赞同：2
> 
> 时间：2013-02-19T05:39:09.233
> 
> 标签：function, emacs, elisp, user-input

我想创建一个 ELISP 函数，它会提示用户输入一个数字 n，然后不断提示用户 n 次输入字符串。理想情况下，我希望将所有这些字符串放入一个列表中。这是我到目前为止所拥有的。显然，我所拥有的不起作用，但它可能有助于澄清我想做的事情的类型。

```
(defun prompt-user-n-times (n)
  "Prompt user n time for strings and append strings to list"
  (interactive "nHow many strings: ")

  (while (> n 0)
    (append newlist (interactive "sGive me input: "))
    (setq n (- n 1))
)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T06:40:58.363

只需为您的新列表定义一个绑定：

```
(defun prompt-user-n-times (n)
  "Prompt user n time for strings and append strings to list"
  (interactive "nHow many strings: ")

  (let ((newlist ()))
    (while (> n 0)
      (setq newlist (append newlist (list (read-string "Give me input: "))))
      (setq n (- n 1)))
    newlist)) 
```

几点说明：interactive 只是开头一个`defun`，在功能中，一个使用其他提示功能，比如简单的 `read-string`。`append`要求两个列表，所以返回的字符串应该由函数`read-string`放入一个列表中`list`

# php - 无法连接 smtp 主机错误

> ID：14950610
> 
> 赞同：0
> 
> 时间：2013-02-19T05:39:34.303
> 
> 标签：php, phpmailer, yahoo-mail

我不知道出了什么问题，我正在将文件传输到笔记本电脑，并且在 php 邮件程序中发送邮件时遇到问题，在笔记本电脑中检查我的 phpinfo 似乎还可以，实际上与我台式机中的相同..

SMTP smtp.mail.yahoo.com smtp.mail.yahoo.com smtp_port 25 25

错误是无法连接到 smtp 主机错误

我打开了 openssl 扩展，你可以看到 smtp 以防万一你需要这里是我的代码

```
$mail = new PHPMailer();

$mail->IsSMTP(); // send via SMTP
$mail->Host="smtp.mail.yahoo.com"; // SMTP servers
$mail->SMTPAuth = true; // turn on SMTP authentication
$mail->Username = "******"; // SMTP username
$mail->Password = "******"; // SMTP password

$mail->From = "****";
$mail->FromName = "******";
$mail->AddAddress(******","*******");

$mail->WordWrap = 50; // set word wrap

$mail->IsHTML(true); // send as HTML

$mail->Subject = "Welcome to LilShop";

$mail->Body = ' Message ';

$mail->Send(); 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:43:25.107

添加

```
$mail->Port=465;
$mail->SMTPSecure = "tls"; 
```

然后它应该工作。Yahoo SMTP 需要端口和 tls。您还可以在此处查看 PHPMailer 示例：http://phpmailer.worxware.com/index.php?pg= [exampleasmtp](http://phpmailer.worxware.com/index.php?pg=exampleasmtp)

# asp.net-mvc-3 - 我怎样才能在我的 SelectListItem 和 DropDownList 中找到这个数据库值列表？

> ID：14950613
> 
> 赞同：0
> 
> 时间：2013-02-19T05:40:07.697
> 
> 标签：asp.net-mvc-3

您好我正在尝试使用以下方法从我的数据库中创建一个列表，然后在我的视图中访问它们。这是我一直在尝试的……</p>

```
var rTypeList = from r in db.Rubrics where r.DepartmentID == 2 select r;
var selectedRubrics = typeList.Select(r => r.Category);
IList <String> rubricsList = selectedRubrics.ToList();

IList<SelectListItem> iliSLI = new List<SelectListItem>();

SelectListItem selectedrubrics = new SelectListItem();
selectedrubrics.Text = "Choose An Option";
selectedrubrics.Value = "1";
selectedrubrics.Selected = true;

iliSLI.Add(selectedrubrics);

ViewData["Options"] = iliSLI; 
```

然后在我看来，我有： `@Html.DropDownList("Options")`

这让我的列表开始了，但我怎样才能从这个列表中获取值 `IList <String> rubricsList = selectedRubrics.ToList();`……并将它们添加到我的下拉列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:52:54.433

您几乎已经弄清楚了问题的困难部分。

[这里](http://yassershaikh.com/introduction-to-dropdownlist-with-asp-net-mvc-3-razor/)有一个解释...

在控制器端，您需要有一个 SelectListItem 类型的列表。我已将此列表传递给我的 ViewBag.DropDownData，在这里您可以将其传递给您的模型，但我试图使其尽可能简单。因此，您将列表传递给 viewbag。

**控制器代码**

```
var myList = new List<SelectListItem>
{
new SelectListItem {Text = "Yasser", Value = "YS"},
new SelectListItem {Text = "Vaibhav", Value = "VS"},
new SelectListItem {Text = "Ramanjit", Value = "RS"}
};

ViewBag.DropDownData = myList; 
```

现在在使用@Html.DropDownListFor() 方法的视图中，第一个参数应该是在模型中声明的字符串/int（取决于您的值），稍后将在数据回发到控制器时使用。第二个参数是我们刚刚准备的列表，如果您使用的是模型，那么只需在此处传递您的模型即可。

**剃刀视图**

```
@Html.DropDownListFor(m => m.ValueSelected, ViewBag.DropDownData as List<SelectListItem>) 
```

就是这样。您的下拉菜单已准备就绪:)，这是我的代码的输出：

**输出**

![在此处输入图像描述](../Images/ba5089929be12c6a5246fd6a3717cb48.png)

希望这可以帮助。

# c - __asm__ __volatile__ ("" : : : "memory") 的工作

> ID：14950614
> 
> 赞同：60
> 
> 时间：2013-02-19T05:40:17.813
> 
> 标签：c, gcc, arm, embedded-linux, volatile

ARM 架构的基本`__asm__ __volatile__ ()`功能和意义是什么？`"memory"`

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-20T15:20:16.457

```
asm volatile("" ::: "memory"); 
```

创建编译器级别的内存屏障，强制优化器不对跨屏障的内存访问重新排序。

例如，如果您需要以特定顺序访问某个地址（可能是因为该内存区域实际上由不同的设备而不是内存支持），您需要能够将这一点告诉编译器，否则它可能只会优化您的步骤为了效率。

假设在这种情况下，您必须在地址中增加一个值，读取一些内容并在相邻地址中增加另一个值。

```
int c(int *d, int *e) {
        int r;
        d[0] += 1;
        r = e[0];
        d[1] += 1;
        return r;
} 
```

问题是编译器（`gcc`在这种情况下）可以重新安排您的内存访问以获得更好的性能，如果您要求它（`-O`）。可能会导致一系列指令，如下所示：

```
00000000 <c>:
   0:   4603        mov r3, r0
   2:   c805        ldmia   r0, {r0, r2}
   4:   3001        adds    r0, #1
   6:   3201        adds    r2, #1
   8:   6018        str r0, [r3, #0]
   a:   6808        ldr r0, [r1, #0]
   c:   605a        str r2, [r3, #4]
   e:   4770        bx  lr 
```

`d[0]`上面的和值`d[1]`同时加载。假设这是您想要避免的事情，那么您需要告诉编译器不要重新排序内存访问，那就是使用`asm volatile("" ::: "memory")`.

```
int c(int *d, int *e) {
        int r;
        d[0] += 1;
        r = e[0];
        asm volatile("" ::: "memory");
        d[1] += 1;
        return r;
} 
```

所以你会得到你想要的指令序列：

```
00000000 <c>:
   0:   6802        ldr r2, [r0, #0]
   2:   4603        mov r3, r0
   4:   3201        adds    r2, #1
   6:   6002        str r2, [r0, #0]
   8:   6808        ldr r0, [r1, #0]
   a:   685a        ldr r2, [r3, #4]
   c:   3201        adds    r2, #1
   e:   605a        str r2, [r3, #4]
  10:   4770        bx  lr
  12:   bf00        nop 
```

应该注意的是，这只是编译时内存屏障，以避免编译器重新排序内存访问，因为它没有额外的硬件级指令来刷新内存或等待加载或存储完成。如果 CPU 具有架构功能并且内存地址在`normal`类型上而不是`strongly ordered`或`device`( [ref](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0211k/Babcddgd.html) ) 上，它们仍然可以重新排序内存访问。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-19T07:53:06.307

这个序列是编译器内存访问调度屏障，如 Udo 引用的文章中所述。这是 GCC 特有的——其他编译器有其他描述它们的方式，其中一些具有更明确（和不那么深奥）的语句。

`__asm__`是允许在 C 代码中嵌套输入汇编语言语句的 gcc 扩展 - 此处使用它的特性是能够指定阻止编译器执行某些类型的优化的副作用（在这种情况下可能最终生成不正确的代码）。

`__volatile__`需要确保**asm**语句本身不会被任何其他 volatile 访问重新排序（C 语言中的保证）。

`memory`是 GCC 的一条指令，它（有点）说内联 asm 序列对全局内存有副作用，因此不仅需要考虑对局部变量的影响。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-19T07:17:05.077

这里解释一下含义：

[http://en.wikipedia.org/wiki/Memory_ordering](http://en.wikipedia.org/wiki/Memory_ordering)

基本上它意味着汇编代码将在您期望的地方执行。它告诉编译器不要对其周围的指令重新排序。也就是这段代码之前执行的代码，之后执行的代码。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-10-26T04:16:04.570

```
static inline unsigned long arch_local_irq_save(void)
{
    unsigned long flags;

    asm volatile(
        "   mrs %0, cpsr    @ arch_local_irq_save\n"
        "   cpsid   i"      //disabled irq
        : "=r" (flags) : : "memory", "cc");
return flags;
} 
```

# ajax - 为什么我的 ajax 无法执行 perl

> ID：14950617
> 
> 赞同：0
> 
> 时间：2013-02-19T05:40:23.273
> 
> 标签：ajax, perl

我无法通过 ajax 执行 perl。为什么 responseText 总是返回整个 perl 代码？

下面的例子是从 perl 中获取数据。我从函数 updateTime 得到的响应是整个 perl 代码。

顺便说一句：我可以使用命令“c:/perl/bin/perl test.cgi”在 cmd 窗口中执行 perl 代码。

JS代码如下：

```
function updateTime(){

 var xmlhttp_t = createXMLHTTPRequest();
 xmlhttp_t.open("GET","cgi-bin/test.cgi",false);
 xmlhttp_t.send();
 if(xmlhttp_t.readyState == 4){
   return xmlhttp_t.responseText;
 }
}

//
//Get XMLHttpRequest
//
function createXMLHTTPRequest(){
var xhr_object = null;
if(window.XMLHttpRequest)
{
    xhr_object = new XMLHttpRequest();
}
else if(window.ActiveXOject)
{
    xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
}
else
{
    alert("Your browser doesn't provide XMLHttpRequest functionality");
    return;
}
return xhr_object;
} 
```

Perl 代码如下：

```
#!c:/perl/bin/perl

use strict;
use CGI;
use warnings;

my $cgi = new CGI();
print $cgi->header('text/html; charset=UTF-8');

print "aaaa"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:38:37.247

> 我从函数 updateTime 得到的响应是整个 perl 代码。

然后是服务器配置问题。

[Apache 文档](http://httpd.apache.org/docs/2.4/howto/cgi.html)

# regex - 这是普通语言吗？如果是这样，它的正则表达式是什么？

> ID：14950621
> 
> 赞同：0
> 
> 时间：2013-02-19T05:40:41.903
> 
> 标签：regex, computer-science, regular-language

```
B = {1^k y | k >= 1, y in {0, 1}* and y contains at least k 1's } 
```

这种语言是正规的吗？如果是这样，你如何证明它，你将如何用 Python 中的正则表达式来表示它？

这是课堂作业，所以如果您能解释答案背后的原因和过程，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T06:37:20.283

您拥有的语言相当于这种语言：

```
B' = {1 y | y in {0, 1}* and y contains at least one 1} 
```

您可以证明 B' 是 B 的子集，因为 B' 中的条件与 B 相同，但 k 设置为 1。

证明 B 是 B' 的子集涉及证明 B 中 k >= 1 的所有单词也属于 B'，这很容易，因为我们可以去掉 B 中所有单词中的前 1 并设置`y`为其余的字符串，`y`则将始终包含至少一个 1。

因此，我们可以得出结论`B = B'`。

* * *

所以我们的工作被简化为确保第一个字符是 1 并且字符串的其余部分至少有 1 `1`。

正则表达式（CS 表示法）将是：

```
10*1(0 + 1)* 
```

在常见的正则表达式引擎使用的符号中：

```
10*1[01]* 
```

外交部：

![DFA](../Images/f856cb6a8ae6dd306479e79685bc9816.png)

这`q2`是一个最终状态。

**“至少”**是解决这个问题的关键。如果这个词变成“平等”，那么故事就会不同。

# javascript - 使用 jQuery 将事件绑定到 AJAX 内容

> ID：14950622
> 
> 赞同：0
> 
> 时间：2013-02-19T05:40:53.683
> 
> 标签：javascript, jquery

我有一个 AJAXed 的菜单，因此加载晚于实际页面。我想知道是否有办法将事件绑定到周围的 div（登录信息的容器 div）。

基本上，当 jQuery(document).ready() 运行并在 1-2 秒后填充时，容器是空的。发生这种情况时，我想运行一些脚本——我宁愿不将脚本放入 AJAXed 内容本身。

简而言之，我想在屏幕上显示某个元素时执行一些 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:49:21.640

你可以在ajax的函数中编写你的脚本`success`......当ajax请求成功时调用成功......

```
 $.ajax{(
     url:....
     ...
     success:function(result){
           //do your stuff like appeding..
           //your script here
       }
 }) 
```

如果您向我们提供帮助您的代码会更容易..

# java - StringIndexOutOfBoundExcpetion 和未能在 MAC OS 中启动 JNLP

> ID：14950624
> 
> 赞同：-1
> 
> 时间：2013-02-19T05:40:59.903
> 
> 标签：java, string, java-7, jnlp, java-web-start

在我的应用程序的 JNLP 文件中，我在 JNLP java-vm-args 参数中指定 PermGenSize。在我的 MAC 上将 Java 升级到 Java7u13 后，JNLP 无法使用 java-vm-args 参数启动。如果我删除 java-vm-args 参数一切正常。

我的 java-vm-args 参数是 java-vm-args="-XX:MaxPermSize=128m"

这是 Java 7 的问题吗？我也可以在 solaris 中重现上述问题。

在失败期间，我在跟踪文件中看到以下异常：

```
 Log started: Tue, 19 Feb 2013 11:02:41 +0530
java.lang.StringIndexOutOfBoundsException: String index out of range: -8
        at java.lang.String.substring(String.java:1911)
        at com.sun.deploy.util.Property.<init>(Unknown Source)
        at com.sun.deploy.util.Property.createProperty(Unknown Source)
        at com.sun.deploy.util.JVMParameters$ArgumentSet.addArgument(Unknown Source)
        at com.sun.deploy.util.JVMParameters.addArgumentImpl(Unknown Source)
        at com.sun.deploy.util.JVMParameters.parseImpl(Unknown Source)
        at com.sun.deploy.util.JVMParameters.parseTrustedOptions(Unknown Source)
        at com.sun.javaws.Main.initializeExecutionEnvironment(Unknown Source)
        at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
        at com.sun.javaws.Main.access$000(Unknown Source)
        at com.sun.javaws.Main$1.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:17:50.760

Permgen 将在以后的版本中消失。从参数列表中删除 XX:MaxPermSize 并重新运行应用程序。

# optimization - 如何正确优化wordpress网站和数据库？

> ID：14950625
> 
> 赞同：-1
> 
> 时间：2013-02-19T05:41:00.950
> 
> 标签：optimization, wordpress, wordpress-theming

我正在使用 wp-minify 和 css 和脚本文件聚合插件进行网站优化。任何人都可以回答以下问题

*   哪个插件被认为对数据库优化有好处？
*   如何将过期标头添加到 javascript、图像和样式表？
*   哪个插件有利于启用缓存以提高网站性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-06T12:58:14.450

对于到期标题，您可以修改网站根文件夹中的 .htaccess 文件。您可以为所述根目录中的所有文件设置到期时间。

这是一个简单的指南： [http ://softstripe.com/wordpress/how-to-add-expires-headers-in-wordpress/](http://softstribe.com/wordpress/how-to-add-expires-headers-in-wordpress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T06:37:59.867

有几个插件可以帮助创建缓存，而不是从数据库中获取内容，而是从缓存中加载内容，即 html 版本。

此外，您需要遵循我在下面提到的一些 SEO 指南来优化您的 wordpress 网站，以适应谷歌等搜索引擎。

[http://wordpress-tuts.blogspot.com/2017/05/best-ways-to-optimize-and-boost-seo-of.html](http://wordpress-tuts.blogspot.com/2017/05/best-ways-to-optimize-and-boost-seo-of.html)

# webdriver - testng 报告中的测试报告顺序是随机的

> ID：14950626
> 
> 赞同：2
> 
> 时间：2013-02-19T05:41:17.857
> 
> 标签：webdriver, testng

这就是我的 testNG 测试的样子：-

```
public class orderTest{
    @Test
    public void meth1() throws InterruptedException{
        System.out.println("1");
        Reporter.log("1");
    }
    @Test
    public void meth2() throws InterruptedException{
        System.out.println("2");
        Reporter.log("2");
    }
    @Test
    public void meth3() throws InterruptedException{
        System.out.println("3");
        Reporter.log("3");
    }
    @Test
    public void meth4() throws InterruptedException{
        System.out.println("4");
        Reporter.log("4");
    }
} 
```

当我在 Eclipse 上运行它时，控制台显示为：- 1 2 3 4 PASSED: meth1 PASSED: meth2 PASSED: meth3 PASSED: meth4

但是当我打开 testNG 报告时，单击报告器输出链接，它显示为：- 报告器输出 - meth1 1 meth4 4 meth3 3 meth2 2

为什么测试报告中的顺序不正确？执行顺序是 1,2,3,4，但报告顺序是 1,4,3,2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-19T10:17:35.390

也可以**在输出报表中按执行顺序**显示。为此，您的 TestNG Reporter 应该实现 IReporter。

一个使用它的好插件是**[ReportNG](http://reportng.uncommons.org/)**。您可以覆盖它的***generateReport***方法，以按其父**XML**套件顺序在 Html 报告中显示套件，如下所示：

```
public void generateReport(List<XmlSuite> xmlSuites, List<ISuite> suites, String outputDirectoryName) {
        ...
        Comparator<ISuite> suiteComparator = new TestSuiteComparator(xmlSuites);
        suites.sort(suiteComparator);
        ...
} 
```

其中***TestSuiteComparator***如下：

```
public class TestSuiteComparator implements Comparator<ISuite> {

    public List<String> xmlNames;

    public TestSuiteComparator(List<XmlSuite> parentXmlSuites) {
        for (XmlSuite parentXmlSuite : parentXmlSuites) {
            List<XmlSuite> childXmlSuites = parentXmlSuite.getChildSuites();
            xmlNames = new ArrayList<String>();
            xmlNames.add(parentXmlSuite.getFileName());
            for (XmlSuite xmlsuite : childXmlSuites) {
                xmlNames.add(xmlsuite.getFileName());
            }
        }
    }

    @Override
    public int compare(ISuite suite1, ISuite suite2) {
        String suite1Name = suite1.getXmlSuite().getFileName();
        String suite2Name = suite2.getXmlSuite().getFileName();
        return xmlNames.indexOf(suite1Name) - xmlNames.indexOf(suite2Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:36:31.347

`If you want the classes and methods listed in this file to be run in an unpredictible order, set the preserve-order attribute to false.`

这就是[TestNG](http://testng.org/doc/documentation-main.html)文档所说的，所以除非拼写错误（不是说我的拼写是完美的 :)，否则这是一个功能。

但在我看来，只有报告顺序是不可预测的，执行似乎是可以预测的。

dtd 说，

`@attr preserve-order If true, the classes in this tag will be run in the same order as found in the XML file.`

所以这与它实际所做的相匹配。

这没有错，但也许反过来。

似乎是使报告更具吸引力的一项功能:)

# sql - SQL 自定义选择

> ID：14950627
> 
> 赞同：-2
> 
> 时间：2013-02-19T05:41:19.733
> 
> 标签：sql, oracle

我想写一个给出以下结果的sql。这可能吗？我尝试使用 UNION，但它只适用于一条记录。

```
col1 | col2 | col3 | col4
--------------------------
  一个 | 10 | |
      | 2 | val1 | val2  
      | 5 | val3 | val4
      | 3 | val5 | val6
  乙| 11 | |
      | 3 | val7 | val8  
      | 5 | val9 | val10
      | 3 | val0 | val12

```

这是我的查询：

```
SELECT a.val1, NULL val2, a.val3 FROM table1 a 
WHERE a.val1 = 'A' 
UNION 
SELECT NULL val1, b.val2, b.val3 FROM table2 b 
WHERE b.val1 = 'A' ; 
```

也许这会使问题更清楚。

想象一下，如果我运行查询：

```
SELECT a.val1, NULL val2, a.val3 FROM table1 a 
UNION 
SELECT NULL val1, b.val2, b.val3 FROM table2 b ; 
```

我希望结果集如上图所示。

```
col1 | col2 | col3 | col4
--------------------------
  一个 | 10 | |
      | 2 | val1 | val2  
      | 5 | val3 | val4
      | 3 | val5 | val6
  乙| 11 | |
      | 3 | val7 | val8  
      | 5 | val9 | val10
      | 3 | val0 | val12

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:05:23.873

汇总或常规组都可以做到这一点，但您仍然没有考虑到`col2`. 那是从哪里来的，就像在你的 sql 片段中一样，你根本没有它。

```
SQL> create table yourtab(col1, col2, col3, col4)
  2  as
  3  select 'A', 2, 'val1', 'val2' from dual
  4  union all select 'A', 5, 'val3', 'val4' from dual
  5  union all select 'A', 3, 'val5', 'val6' from dual
  6  union all select 'B', 3, 'val7', 'val8' from dual
  7  union all select 'B', 5, 'val9', 'val10' from dual
  8  union all select 'B', 3, 'val11', 'val12' from dual;

Table created.

SQL>
SQL> select col1, sum(col2) col2, col3, col4
  2    from yourtab
  3   group by col1, rollup(col3, col4)
  4  having (grouping_id(col3), grouping_id(col4)) in ((0,0),(1,1))
  5  order by col1, grouping_id(col3) desc;

C       COL2 COL3  COL4
- ---------- ----- -----
A         10
A          5 val3  val4
A          3 val5  val6
A          2 val1  val2
B         11
B          3 val7  val8
B          5 val9  val10
B          3 val11 val12

8 rows selected.

SQL>
SQL> select col1, col2, col3, col4
  2    from (select col1, col2, col3, col4, 2 grp
  3            from yourtab
  4          union all
  5          select col1, sum(col2), null, null, 1 grp
  6            from yourtab
  7           group by col1)
  8   order by col1, grp;

C       COL2 COL3  COL4
- ---------- ----- -----
A         10
A          5 val3  val4
A          3 val5  val6
A          2 val1  val2
B         11
B          3 val11 val12
B          5 val9  val10
B          3 val7  val8

8 rows selected. 
```

# python - 出错时退出python函数，并需要将退出值传递给批处理文件

> ID：14950638
> 
> 赞同：-7
> 
> 时间：2013-02-19T05:42:13.030
> 
> 标签：python

```
if ("FATAL_ERROR" == level):
send_mail()
sys.exit() 
```

任何人都可以帮助使用上述退出功能，因为一旦收到**错误**，我们必须将退出值传递给批处理文件？

发送邮件是脚本中编写的函数，当发生致命错误时将邮件发送给用户......System.error是输入错误......它实际上是sys.exit（）......我想要每当“致命错误发生”它出来并将退出值传递给批处理文件...我们尝试了 sys.exit() 但它不起作用...请建议使用更多功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:00:54.823

您可以使用

```
sys.exit(1) 
```

让 Python 脚本以错误结束。但是，正如`sys.exit` [文档](http://docs.python.org/2/library/sys.html)文档所述，这可能不适用于 Windows（文档中提到了“shell 等”）。

我推断您使用的是 Windows，因为您说的是“批处理文件”。也许你必须做 Windows-Batch-File-Magic 并改写一个关于 Windows 而不是 Python 的问题。

# oracle - 在 Oracle 中为前端应用程序使用游标是否有利？

> ID：14950646
> 
> 赞同：2
> 
> 时间：2013-02-19T05:42:48.923
> 
> 标签：oracle, plsql, cursor

我的数据库中有两个表。每个表有 2000 条记录。由于我有大量记录，我想编写用于检索记录的最佳代码。`USER_DETAILS`表是：

```
+---------+-----------+-----------+
| user_id | user_name | join_date |
+---------+-----------+-----------+ 
```

引用表的第二个表`USER_DETAILS`是：

```
+---------+-----------+-----------+
| user_id | fav_color | fav_dish  |
+---------+-----------+-----------+ 
```

我有两种方法第一种：

```
SELECT UD.*,FAV.FAV_COLOR, FAV.FAV_DISH FROM USER_DETAILS UD, FAV_DETAILS FAV 
    WHERE UD.USER_ID = FAV.USER_ID; 
```

第二种方法是编写一个 PL/SQL 过程，它是：

```
DECLARE
CURSOR C1(X NUMBER) IS SELECT * FROM USER_DETAILS WHERE USER_ID = X;
CURSOR C2 IS SELECT * FROM USER_FAV;
Y NUMBER := &USER_ID;
BEGIN
FOR C IN C1(Y)
    LOOP
    DBMS_OUTPUT.PUT_LINE('USER DETAILS');
    DBMS_OUTPUT.PUT_LINE('----------------');
    FOR D IN C2
        LOOP
        IF C.DEPTNO = D.DEPTNO THEN
            DBMS_OUTPUT.PUT_LINE(RPAD(C.USER_ID,10)||RPAD(C.USER_NAME,10)||RPAD(D.FAV_COLOR,10));
        END IF;
    END LOOP;
END LOOP;
END; 
```

哪个代码会提供更好的性能，为什么？我想获取用户的完整详细信息。

如果我使用游标，我会从服务器获取所有记录到 SGA 吗？我将在仅由移动设备访问的 JSP 页面中使用此数据库。

由于我的目标用户（大约 10KB）在移动设备中的互联网速度非常慢，因此我担心带宽。在我看来，我发现执行连接将执行笛卡尔积并检查匹配结果，这将在 1000*1000 个条件中取一个条件，而 PL/SQL 块中的检查条件仅为 1000 + 1000。它减少了条件的数量。但据我所知，游标将在客户端内存中创建一个影子页面，并将创建表。这意味着它将从服务器获取所有数据并存储在客户端中。在这一点上我是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:12:23.663

你可以[在这里](http://tkyte.blogspot.co.il/2006/10/slow-by-slow.html)阅读Tom Kyte 的口头禅：

> 如果可能，您应该在单个 SQL 语句中执行此操作。
> 如果您不能在单个 SQL 语句中执行此操作，请在 PL/SQL 中执行。
> 如果您不能在 PL/SQL 中执行此操作，请尝试使用 Java 存储过程。
> 如果您不能在 Java 中执行此操作，请在 C 外部过程中执行此操作。
> 如果您不能在 C 外部例程中执行此操作，您可能需要认真考虑为什么需要执行此操作……</p>

基本上通过使用 plsql 存储过程，您可以从 sql 引擎来回移动到 plsql 引擎。更重要的是，如果你有正确的索引并且你构建你的查询是正确的，那么 sql 优化器可能会让事情变得比你更快。

[这是另一个很好的 AskTom 帖子](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:499097979114)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:25:48.570

**通常**使用单个选择语句将
通过单个选择获得更好的性能，您将使用一次 RDBMS Sql 引擎，RDMS 将使用内部过程（索引、现金查询......）提高性能。

**在第一个查询中的编程方式** *（忽略内部 RDMS 功能）*
中，您在第二个 plsql 语句中以效率 O(n) 的顺序进行搜索，通过使用嵌套循环，您正在以效率 O(n^2) 的顺序进行搜索
[效率搜索顺序](http://cset.sp.utoledo.edu/cset3150/cset3150_algo_search.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:47:53.060

当您希望在结果的每一行上都有一个指针以执行进一步的操作时，请使用光标。如果你只需要一个`select`陈述，就做一个`select`陈述。光标将是一个矫枉过正。把事情简单化。

# android - 如何使用java代码将文本视图放置在android中图像视图的右侧？

> ID：14950652
> 
> 赞同：0
> 
> 时间：2013-02-19T05:43:20.983
> 
> 标签：android

我有一个图像视图和一个文本视图。文本视图位于图像视图下方。我需要图像视图右侧的文本视图。怎么做？

```
 LinearLayout ThelayoutL = new LinearLayout(getApplicationContext());
        ThelayoutL.setOrientation(LinearLayout.VERTICAL);   

             ImageView TheItemImageL = new ImageView(mContextL);
        TheItemImageL.setImageBitmap(ItemImageBytesListG.get(PositionP));
        TheItemImageL.setScaleType(ImageView.ScaleType.FIT_XY);
        TheItemImageL.setLayoutParams(new ListView.LayoutParams(100, 100));

        TextView tvItemNameL = new TextView(mContextL);
        tvItemNameL.setText(zItemNameListG.get(PositionP));
        tvItemNameL.setGravity(Gravity.CENTER);
        tvItemNameL.setTextSize(10);
        tvItemNameL.setTextColor(Color.parseColor("#000000")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:45:35.173

尝试`ThelayoutL.setOrientation(LinearLayout.HORIZONTAL);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:46:57.753

代替

```
ThelayoutL.setOrientation(LinearLayout.VERTICAL); 
```

至

```
ThelayoutL.setOrientation(LinearLayout.HORIZONTAL); 
```

希望能帮助到你。

# label - Wicket：如果模型为空 + CompoundPropertyModel，则带有默认文本的标签

> ID：14950655
> 
> 赞同：0
> 
> 时间：2013-02-19T05:43:38.070
> 
> 标签：label, wicket, default-value

我有：

```
public FooPage( ... ) {
   this.setDefaultModel( new CompoundPropertyModel(new GenericIdLDM( Foo.class, 1)) );
   add(new Label("title")); 
```

我想要$subj。我从 2007 年找到了这个解决方案（如下点）： http: [//www.mail-archive.com/wicket-user@lists.sourceforge.net/msg29603.html](http://www.mail-archive.com/wicket-user@lists.sourceforge.net/msg29603.html) 但是，它不适用于 CPM，因为它需要带有模型的构造函数。

我怎样才能使它与 CPM 一起工作？

```
public class DefaultTextModel extends AbstractReadOnlyModel<String> {

private final IModel<String> delegate;
private final String def;

public DefaultTextModel(String def, IModel delegate) {
    this.def = def;
    this.delegate = delegate;
}

public String getObject() {
    String s = delegate.getObject();
    return (Strings.isEmpty(s)) ? def : s;
}

public void detach() {
    delegate.detach();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:02:43.990

您可以`Converter`为您的标签定制。我认为更好地反映了你的意图。参见例如[https://cwiki.apache.org/WICKET/using-custom-converters.html#Usingcustomconverters-InWicket1.4](https://cwiki.apache.org/WICKET/using-custom-converters.html#Usingcustomconverters-InWicket1.4)

其他选项可以是 JavaScript，检查 span 是否为空，然后提供默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:19:40.587

我可以覆盖 Label#initModel()：

```
protected IModel<?> initModel() {
    return new DefaultTextModel(defaultModel, super.initModel());
} 
```

一个更简单的解决方案是覆盖 Label#onComponentTagBody() 并在那里应用默认文本。

（Sven Meier 在邮件列表中回复）

# c# - 授权属性扩展新关键字

> ID：14950662
> 
> 赞同：0
> 
> 时间：2013-02-19T05:44:37.687
> 
> 标签：c#, asp.net-mvc, authorize-attribute

我想在不创建自定义授权对象的情况下扩展 Authorize Attribute 的关键字过滤器。

我知道内置关键字是角色，用户。我想添加一个新的关键字调用级别，看看用户访问级别是否大于某个级别。

这将允许我只为用户创建一个角色。

这个的用法是

```
[Authorize(level > 1)] 
```

如果您需要其他信息以使您更好地了解我正在尝试解决的问题，请告诉我。

我看过但无法解决这个问题。你能提供一个代码示例吗？这就是我的目的。使用级别过滤器时出现错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;
[Auth(Level > 1)]
public ActionResult Index()
{
}

public class Auth : AuthorizeAttribute
{
    public int Level { get; set; }
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
      base.OnAuthorization(filterContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:48:18.980

这不可能只是将新过滤器添加到内置的`AuthorizeAttribute`. 您将需要创建一个继承自 的新属性`AuthorizeAttribute`。

有大量关于创建自定义的博客文章和问题`AuthorizeAttributes`。

编辑：好的，好的开始。你的问题是你不能`Level > 1`像你正在尝试的那样做。假设您尝试说当用户`Level`大于 1 时要通过什么身份验证，您可以更改属性中的属性来指示这一点。

例如

```
public class Auth : AuthorizeAttribute
{
    public int MinLevel { get; set; }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        //This is where you will need to determine if the user is authorized based upon the minimum level.
        base.OnAuthorization(filterContext);
    }
} 
```

# iphone - 将多个对象上传到亚马逊 s3

> ID：14950668
> 
> 赞同：-1
> 
> 时间：2013-02-19T05:45:13.427
> 
> 标签：iphone, ios, ios5, amazon-web-services, amazon-s3

我有多个 instagram url，我正在将其转换为 Nsdata。我还有许多 iphone 的图像，我还将 iphone 图像转换为 Nsdata。我应该如何在 ios 中将此 Nsdata 传递给 Amazone s3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:43:13.467

您可以使用[适用于 iOS 的 AWS 开发工具包，](https://aws.amazon.com/sdkforios/)其中包含一个包含[将照片上传到 S3](http://aws.amazon.com/articles/3002109349624271)的示例。

# jquery - 使用光滑网格复选框列从服务器和网格中删除多个数据

> ID：14950676
> 
> 赞同：1
> 
> 时间：2013-02-19T05:45:59.023
> 
> 标签：jquery, slickgrid

```
$('#bulk_delete_id').live('click',function(e){            
            e.preventDefault();            
            var selectedrows = grid.getSelectedRows();            
            var len = selectedrows.length;        
            if(len == 0){                
                alert('Select atleast one row!');
            }else{                
                var r = confirm('Are you sure want to delete selected data?');   
                if(r){  
                    var i;
                    var longIdList = new Array();                    
                    for(i=0;i<len;i++){                        
                        var d = grid.getData().getItem(selectedrows[i]);                         
                        if(d != null && d != 'undefined'){
                            var longId = d.id;                               
                            longIdList.push(longId);                                                    
                        }
                    }  

                    if(longIdList != null){
                        $.each(longIdList, function(index){
                            dataView.deleteItem(longIdList[index]);                                     
                        });
                        refreshcount();
                        grid.setSelectedRows([]);
                        grid.invalidate();                                
                        grid.updateRowCount();
                        grid.render();
                        $.post(base_url+'databrowser/deleteAnantData',{                
                            'longIds' : longIdList,
                            'objlongId': $('.class_list li a.selected').attr('id'),
                            'applongId':applongId
                        },function(response){   
                            var res = jQuery.parseJSON(response);
                            $('#msg').css('display','block');
                            $('#msg').html(res.data.message);
                            $('#msg').fadeOut(5000);                            
                            if(res.code == 0)
                            {                                
                                $('#msg').addClass("dbfailureMessage");                               
                            }
                            else
                            {                                
                                $('#msg').addClass("dbsuccessMessage");                            
                            }                            
                        });                             
                    }                    
                }
            }
        }); 
```

HTML 代码：

```
<table class="tablesorter" border="0" cellpadding="0" cellspacing="1">
    <tbody>
        <tr class="headerobj">
            <td><h4>Anant Objects</h4></td>
            <td><div class="utility"><div class="right_section">
                        <div class="pagination">
                            <a class="right inactive" data-action="next">
                                <div></div>
                            </a>
                            <a class="left inactive" data-action="back">
                                <div></div>
                            </a>
                        </div>                       
                    </div>

                    <div class="left_section">

                        <input type="button" class="new_row thickbox" alt="#TB_inline?height=450&width=450&inlineId=addrowContainer" value="+ Row" /> 
                        <button id="bulk_delete_id">- Row</button>                        
                        <input type="button" class="new_field thickbox" alt="#TB_inline?height=450&width=450&inlineId=fieldsContainer" value="Add Field" /> 
                        <input type="button" class="drop_field thickbox" value="delete Field" alt="#TB_inline?height=450&width=450&inlineId=dropfieldsContainer" />
                        <div class="dropdown_container">
                            <button class="more">More<span class="arrow"></span></button>
                            <div class="dropdown" style="display: none;">
                                <ul>
                                    <li><button class="drop">Drop Object</button></li>
                                    <li><button class="deleteAll">Delete All</button></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div></td>
        </tr>
        <tr class="nonheader">
            <td class="classes">
                <div class="classes_header">
                    <ul class="class_list">
                        <?php $i = 0;
                        foreach ($anantObjects as $row)
                        { ?>
                            <li><a href="#" id="<?php echo $row['longId']; ?>" class="<?php if ($i == 0) {
                                echo "selected";
                            } ?>">
                                    <div class="name"><?php echo $row['objectName']; ?></div>
                                    <span class="count"><?php echo $row['count']; ?></span>
                                </a></li>
    <?php $i++;
} ?>
                    </ul>
                    <div class="class_utility">                                                
                        <input type="button" id="btnImport" class="thickbox" value="Import" alt="#TB_inline?height=450&width=450&inlineId=importContainer"/>
                        <input type="button" id="btnExport" value="Export" />
                    </div>
                </div>    
            </td>
            <td class="class_data">
                <div id="gridData"></div>
            </td>
        </tr>
    </tbody>
</table> 
```

我正在使用光滑的网格进行数据显示。我有删除按钮，用于从光滑网格和服务器中删除选中的行。当我在选择行后单击删除按钮时。行已成功删除，但整个点击事件函数执行了不止一次。它再次检查所选行的长度并显示警报“选择至少一行！”。反复。我无法识别错误。如果有人那么请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:06:54.257

听起来您的事件处理程序不止一次被绑定。由于您使用的是现场活动，我猜删除按钮必须动态添加？如果是这样，那可能就是问题所在——每次将删除按钮添加到页面时，都会绑定一个新的事件处理程序。而不是现场活动试试这个：

```
$('div.left_section').unbind('click').on('click', '#bulk_delete_id', function(e) {
   // event handler code goes here 
```

# iphone - 以编程方式在索引处调用 UIAlertView clickedbutton

> ID：14950678
> 
> 赞同：2
> 
> 时间：2013-02-19T05:46:03.503
> 
> 标签：iphone, objective-c, ios5, ios6

我正在尝试以编程方式调用 UIAlertView 的委托方法。这是代码：

```
if([vc respondsToSelector:@selector(alertView:clickedButtonAtIndex:)]) {
        // Manually invoke the alert view button handler
        [(id <UIAlertViewDelegate>)vc alertView:nil
                           clickedButtonAtIndex:0];
    } 
```

它在 iOS5.0 上运行良好，但在 iOS6.0 上无法运行，欢迎提出意见或建议 :)

这是详细的完整方法：

```
TWTweetComposeViewController *vc = [[[TWTweetComposeViewController alloc] init]autorelease];
    // Settin The Initial Text
    [vc setInitialText:status];
    [vc setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
        if(result == TWTweetComposeViewControllerResultDone) {

            NSLog(@"Tweeted Sucessfully");
            }
    }];
    if([delegate isKindOfClass:[UIViewController class]]){
        [(UIViewController *)delegate presentModalViewController:vc animated:YES];
    }
      //alertView:clickedButtonAtIndex:
    if([vc respondsToSelector:@selector(alertView:clickedButtonAtIndex:)]) {
        // Manually invoke the alert view button handler
        [(id <UIAlertViewDelegate>)vc alertView:nil
                           clickedButtonAtIndex:0];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:54:12.560

in you code just give the alertview with your alertview obect name like bellow..

```
[(id <UIAlertViewDelegate>)vc alertView:yourAlertView
                           clickedButtonAtIndex:0]; 
```

otherwise Just try with this bellow code..

```
 id<UIAlertViewDelegate> delegate = yourAlertView.delegate;
    yourAlertView.delegate = nil;
    [delegate alertView:yourAlertView clickedButtonAtIndex:0]; 
```

see this link for some other option about it..

[why-doesnt-dismisswithclickedbuttonindex-ever-call-clickedbuttonatindex](https://stackoverflow.com/questions/4472854/why-doesnt-dismisswithclickedbuttonindex-ever-call-clickedbuttonatindex)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:01:24.763

直接调用委托方法是不好的做法。`UIAlertView`有一个方法叫做`dismissWithClickedButtonIndex:animated:`. 如果你调用它，`UIAlertViewDelegate`方法`alertView:willDismissWithButtonIndex:`和 `alertView:didDismissWithButtonIndex:`将被调用，假设你的委托设置正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T06:05:43.190

在 iOS 6 中 Alert 视图的实现没有这样的差异。您可以使用此委托方法轻松完成您的任务 - ：

```
(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex; 
```

试试这个，然后让我们知道你在控制台中得到什么样的警告......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T05:48:08.077

你可以使用这个委托，这对你有用..

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T08:39:44.743

IOS6 中不推荐使用 TTWeetComposeViewController。请尝试使用 DETweet。:) 在 iOS 6 上也可以正常工作。:)

# java - 这个 queue.xml 有什么问题

> ID：14950680
> 
> 赞同：2
> 
> 时间：2013-02-19T05:46:05.690
> 
> 标签：java, google-app-engine, task-queue

我正在开发一个 appengine 项目，在该项目中我创建了一个如下定义的任务队列“刷新”。

```
<?xml version="1.0" encoding="UTF-8"?>
<queue-entries>
  <queue>
    <name>refresh</name>
    <rate>1/s</rate>
    <retry-parameters>
      <task-retry-limit>5</task-retry-limit>
      <task-age-limit>2</task-age-limit>
    </retry-parameters>
  </queue>
</queue-entries> 
```

[部署后，我收到以下错误，不知道为什么，因为此定义与https://developers.google.com/appengine/docs/java/config/queue](https://developers.google.com/appengine/docs/java/config/queue)上的定义几乎完全相同

`An internal error occurred during: "Deploying xProject to Google". XML error validatin _xProject_path_\war\WEB-INF\queue.xml against C:\Users\Oladeji\.eclipse\org.eclipse.platform_3.7.0_248562372\plugins\com.google.appengine.eclipse.sdkbundle_1.7.3\appengine-java-sdk-1.7.3\docs\queue.xsd`

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:54:40.247

它没有通过 queue.xsd 的验证。

这意味着 queue.xml 的结构与 queue.xsd 中描述的结构不匹配

您在网站上看到的描述很可能与您的实际 queue.xsd 不同。

请显示您的**实际**queue.xsd。

* * *

我发现 queue.xsd 与您在本地路径中的相同。它限制了 ([0-9]+(.?[0-9]*([eE][-+]?[0-9]+)?)?)([smhd]) 对 'task-age -限制。

在您的情况下，如果您添加 s、m、h 或 d，它将验证。

例如：task-age-limit 标签中的 2s 而不是 2。

# iphone - 如何创建 mpeg2 传输流？

> ID：14950684
> 
> 赞同：4
> 
> 时间：2013-02-19T05:46:47.010
> 
> 标签：iphone, objective-c, macos, screen-capture

我正在创建一个使用 AVFoundation 捕获屏幕的 mac 应用程序。它工作到这里。现在的问题是我从委托方法中得到了一个 CMSampleBufferRef 。我想从中创建一个 mpeg2 传输流。有人对如何创建 mpeg2 传输流有任何想法吗？一些示例代码表示赞赏。

提前致谢。

# mysql - SQL 通过 COUNT() 列限制输出

> ID：14950689
> 
> 赞同：0
> 
> 时间：2013-02-19T05:47:20.937
> 
> 标签：mysql

我有两个表用于书籍数据库，定义如下：

```
CREATE TABLE Publisher(
   PublisherID INT,
   Name VARCHAR(50) NOT NULL,
   City VARCHAR(30),
   StateCode CHAR(2),
   constraint publisher_publisherID_pk PRIMARY KEY (publisherID),
   constraint publisher_statecode_fk FOREIGN KEY (StateCode) REFERENCES State(StateCode)
 );

CREATE TABLE Book(
   ISBN        CHAR(13),
   Title       VARCHAR(70) NOT NULL,
   Description VARCHAR(100),
   Category    INT,
   Edition     CHAR(30),
   PublisherID INT         NOT NULL,
   constraint book_ISBN_pk PRIMARY KEY (ISBN),
   constraint book_category_fk FOREIGN KEY (Category) REFERENCES Category(CatID),
   constraint book_publisherID_fk FOREIGN KEY (PublisherID) REFERENCES Publisher(PublisherID)
); 
```

我想显示出版商的名称和出版的书籍数量，这些出版商以出版商的名义“阅读”并出版了两本书以上。

到目前为止，我有这个：

```
SELECT Publisher.Name AS 'Publisher Name', COUNT(*) AS 'Book Count' 
FROM Book 
LEFT JOIN Publisher USING (PublisherID) 
WHERE Publisher.Name LIKE '%read%' 
GROUP BY Publisher.Name; 
```

但不知道如何将结果限制为所有返回的结果超过 true。我无法让 LIMIT 工作，也不确定在这里使用它是否正确。我也不确定如何为它引用“Book Count”（列名必须是这个）。搜索 Google 只会返回有限的行数（相似的搜索词）。

我目前的输出是这样的：

```
+----------------------------------+------------+
| Publisher Name                   | Book Count |
+----------------------------------+------------+
| EZRead Masterpiece Comics        |          3 |
| ReadEmandWeep Romance Publishing |          5 |
| ReadMeFirst House of Publishing  |          2 |
| ReadMeNext House of Publishing   |          2 |
+----------------------------------+------------+
4 rows in set (0.00 sec) 
```

但我想要这个：

```
+----------------------------------+------------+
| Publisher Name                   | Book Count |
+----------------------------------+------------+
| EZRead Masterpiece Comics        |          3 |
| ReadEmandWeep Romance Publishing |          5 |
+----------------------------------+------------+
2 rows in set (0.00 sec) 
```

在此先感谢您的帮助，希望我足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:50:30.483

你快到了。

```
SELECT Publisher.Name AS 'Publisher Name', COUNT(*) AS 'Book Count' 
FROM Book 
LEFT JOIN Publisher USING (PublisherID)
WHERE Publisher.Name LIKE '%read%' 
GROUP BY Publisher.Name
HAVING `Book Count` > 2        ## Notice the HAVING clause?; 
```

## 编辑

忘记了，`HAVING`一定是后`GROUP BY`。

## 编辑 2

对于带有空格的列别名，反引号起作用。

# c# - 继承如何处理不同的类对象

> ID：14950691
> 
> 赞同：1
> 
> 时间：2013-02-19T05:47:24.123
> 
> 标签：c#, oop

这是一个继承问题。我试图了解 TAG1 到 TAG3 的过程。究竟会发生什么并持有哪个类的引用。期待您的建议。

```
static void Main(string[] args)
{
    B b = new B(); **// What Happens here  TAG1**
    A a = b;       **//What Happens here TAG2**
    B x = new A() as B; **//what happens here TAG3**
    a.F();   
    a.G();
    a.H();
    a.Z();

    b.F();
    b.G();
    b.H();
    b.Z();

    x.F();
    Console.ReadLine();
}

public class A
{
    public void F() { Console.WriteLine("A.F"); }
    public virtual void G() { Console.WriteLine("A.G"); }
    public virtual void H() { Console.WriteLine("A.H"); }
    public void Z() { Console.WriteLine("A.Z"); }
}

public class B : A
{
    new public void F() { Console.WriteLine("B.F"); }
    public override void G() { Console.WriteLine("B.G"); }
    new public void H() { Console.WriteLine("B.H"); }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:52:31.540

```
B b = new B(); **// What Happens here  TAG1** 
```

B 的一个实例在这里被创建，并`b`持有一个对它的引用。

```
A a = b;       **//What Happens here TAG2** 
```

`a`被分配了该`b`实例，这意味着您可以访问`A`先前创建的`B`对象的一部分。

```
B x = new A() as B; **//what happens here TAG3** 
```

您创建一个`A`对象并将其转换为`B`，但转换将失败并返回`null`。因此`x`不会引用对象的实例。

# java - 有没有办法在 Java 中为整个 Jframe 设置动画以使其移动？

> ID：14950694
> 
> 赞同：1
> 
> 时间：2013-02-19T05:47:42.317
> 
> 标签：java, swing, user-interface, animation, jframe

我想创建一个 Jframe 可以自己自由移动的程序。有点像翻译/过渡。

例如，

1.  点击程序开始。

2.  Jframe 在位置 (0,0) 生成。

3.  自动向右移动（动画）100 像素，使新坐标为 (100,0)。

我知道有 setLocation(x,y) 方法可以在程序运行后设置初始位置，但是有没有办法在程序启动后移动整个 Jframe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:57:03.037

基本概念看起来像这样......

```
public class MoveMe01 {

    public static void main(String[] args) {
        new MoveMe01();
    }

    public MoveMe01() {

        EventQueue.invokeLater(
                new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JLabel("Use the Force Luke"));
                frame.pack();
                frame.setLocation(0, 0);
                frame.setVisible(true);

                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        Point location = frame.getLocation();
                        Point to = new Point(location);
                        if (to.x < 100) {
                            to.x += 4;
                            if (to.x > 100) {
                                to.x = 100;
                            }
                        }
                        if (to.y < 100) {
                            to.y += 4;
                            if (to.y > 100) {
                                to.y = 100;
                            }
                        }

                        frame.setLocation(to);

                        if (to.equals(location)) {
                            ((Timer)e.getSource()).stop();
                        }
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }
        });
    }
} 
```

这是一个非常直接的线性动画。您最好研究一下可用于 Swing 的众多动画引擎之一，这将使您能够根据当前帧更改动画的速度（例如，像慢进和慢出这样的事情）

我会看看

*   [时序框架](http://java.net/projects/timingframework/pages/Home)
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)
*   [Universla Tween 引擎](http://code.google.com/p/java-universal-tween-engine/)

**更新了“可变时间”解决方案**

这基本上是一个如何制作可变时间动画的示例。也就是说，与其有一个固定的运动，你可以调整时间，让动画根据动画的运行时间来计算运动要求……

```
public class MoveMe01 {

    public static void main(String[] args) {
        new MoveMe01();
    }

    // How long the animation should run for in milliseconds
    private int runTime = 500;
    // The start time of the animation...
    private long startTime = -1;

    public MoveMe01() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JLabel("Use the Force Luke"));
                frame.pack();
                frame.setLocation(0, 0);
                frame.setVisible(true);

                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {

                        if (startTime < 0) {
                            // Start time of the animation...
                            startTime = System.currentTimeMillis();
                        }
                        // The current time
                        long now = System.currentTimeMillis();
                        // The difference in time
                        long dif = now - startTime;
                        // If we've moved beyond the run time, stop the animation
                        if (dif > runTime) {
                            dif = runTime;
                            ((Timer)e.getSource()).stop();
                        }
                        // The percentage of time we've been playing...
                        double progress = (double)dif / (double)runTime;

                        Point location = frame.getLocation();
                        Point to = new Point(location);

                        // Calculate the position as perctange over time...
                        to.x = (int)Math.round(100 * progress);
                        to.y = (int)Math.round(100 * progress);
                        // nb - if the start position wasn't 0x0, then you would need to
                        // add these to the x/y position above...

                        System.out.println(to);

                        frame.setLocation(to);
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }
        });
    }
} 
```

# c# - 如何在不通知泛型类型的父类的情况下调用注入类的泛型方法？

> ID：14950696
> 
> 赞同：2
> 
> 时间：2013-02-19T05:48:03.303
> 
> 标签：c#, .net, generics, interface, dependency-injection

下面是注入另一个类的依赖项的实现。

```
public class CsvDataProvider : ICsvDataProvider
{
    readonly ICsvReaderFactory _factory;

    public CsvDataProvider(ICsvReaderFactory factory)
    {
        _factory = factory;
    }

    public IEnumerable<TRecord> GetData<TRecord>(string filepath) where TRecord : class
    {
        var reader = _factory.CreateCsvReader(filepath);

        return reader.GetRecords<TRecord>();
    }
} 
```

将读取 CSV 文件中`reader`的`factory`所有行并将每一行转换为`TRecord`. 我不拥有`reader`代码，也无法更改`GetRecords<TRecord>()`方法。

这是我卡住的地方：

```
public class CsvDataMigrationController
{
    readonly ICsvDataProvider _provider;
    readonly ICsvDataMigration _migration;

    public CsvDataMigrationController(ICsvDataProvider provider, ICsvDataMigration migration)
    {
        _provider = provider;
        _migration = migration;
    }

    public void ProcessFile(string path)
    {
        var records = _provider.GetData<I_DONT_WANT_TO_EXPLICITLY_SAY>(path); //<-- Help!

        _migration.Migrate(records);
    }
} 
```

目的是将数据提供者和迁移过程类注入`CsvDataMigrationController`. 控制器将调用数据提供者来获取数据并将数据传递给迁移类。

*   我不想`CsvDataMigrationController`知道所涉及的数据类型。
*   我不想让`CsvDataProvider`他们知道迁移。
*   我不想`CsvDataMigration`知道数据来自哪里。

关于如何实现这一目标的任何建议？

注意：我没有包含`CsvDataMigration`该类，因为我认为它在解释中没有用，但如果需要，会包含它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:59:05.500

好吧，既然你不能改变`GetRecords`，那么也许最直接的方法是向迁移接口询问记录类型，并使用反射来调用`GetData`具有该运行时获得的类型的泛型方法。就像是：

```
public void ProcessFile(string path)
{
    Type recordType = _migration.InputRecordType;

    var getDataMethod =
        _provider.GetType()
        .GetMethod("GetData")
        .MakeGenericMethod(recordType);

    var records = getDataMethod.Invoke(_provider, new object[] { path });
    _migration.Migrate(records);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T06:00:12.500

通常，您将定义一个非泛型替代方案，例如

```
public interface ICsvDataProvider
{
    IEnumerable GetData(string filepath, Type recordType) 

    IEnumerable<TRecord> GetData<TRecord>(string filepath) 
        where TRecord : class;
} 
```

所以你可以称之为

```
public class CsvDataMigrationController
{
    private string targetTypeName = ...;

    public void ProcessFile(string path)
    {
        var recordType = Type.GetType(this.targetTypeName);
        var records = _provider.GetData(path, recordType);
        _migration.Migrate(records);
    }
} 
```

这样，泛型方法只是围绕非泛型方法的一点语法糖。

使用反射（如@Cameron 的回答）是另一种解决方案。在这两种情况下，您都必须在运行时知道目标类型（而不是像泛型方法所要求的那样在编译时）。

# sql - 如果在 MS Access 中使用 SUM 和 IIF 没有返回任何行，则返回 0

> ID：14950701
> 
> 赞同：2
> 
> 时间：2013-02-19T05:48:28.363
> 
> 标签：sql, ms-access, sum, iif

我正在寻找一种在没有返回行时返回**0作为 MS Access 中的 SQL 查询结果的方法。**以下是我的查询：

```
SELECT SUM(IIF(TotalCount =  null, 0, TotalCount)) AS MailCount  FROM MailReport WHERE [SendDate]=#2/12/2013# and MailerID=1 
```

这里的 Column`TotalCount`是数字类型，适用于返回一些结果的查询。但是，如果 date`2/13/2013`没有记录，它只会返回一个`blank`nither `0`nor的行`null`。如何为该行返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:55:30.800

```
SELECT  SUM(IIF([SendDate]=#2/12/2013# AND MailerID = 1, IIF(TotalCount =  null, 0, TotalCount), 0)) AS MailCount  
FROM    MailReport 
```

# iphone - 将 iphone 应用程序转换为通用应用程序

> ID：14950702
> 
> 赞同：0
> 
> 时间：2013-02-19T05:48:31.303
> 
> 标签：iphone, ipad, xcode4.5

我在开始时创建了一个 iphone 应用程序。但现在我想将其更改为通用应用程序。在转换它时，我已将目标更改为通用。通过 google 并发现我必须为 ipad 创建不同的 xib。当我更改为它是通用的，它要求我为 ipad 创建一个 MainWindow。我单击是。现在在我的应用程序启动时，我得到了一个 tabbarController。所以我为 ipad 创建了一个 ViewController.xib，它在 tabbarController 中链接。但是我收到错误 [ setValue:forUndefinedKey:]: 这个类不符合键委托的键值编码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {

       ViewController *first=[[ViewController alloc]
                                  initWithNibName:@"ViewController-iPad" bundle:nil] ;

        Login *second=[[Login alloc]initWithNibName:@"Login" bundle:nil];
        second.title=@"Login";
        NSArray *viewArray=[[NSArray alloc] initWithObjects: first,second,nil];
        UITabBarController *tabBarController1=[[UITabBarController alloc] init];
        [tabBarController1 setViewControllers:viewArray animated:NO];

        for(UIViewController *tab in  tabBarController1.viewControllers)

        {
            [tab.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                    [UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:16.0], UITextAttributeFont, nil]
                                          forState:UIControlStateNormal];
        }
        [self.window addSubview:tabBarController1.view];
        [self.window makeKeyAndVisible];
        CGRect  rect = [[UIScreen mainScreen] bounds];
        [self.window  setFrame:rect];
        [viewArray release];
        [first release];
        [second release];
        return YES;

    }

    else
    {
        //code to load tabbarController for  iphone xib's 
```

在哪里链接？当我单击 FilesOwner 时，我没有找到任何网点？

# security - 如何从 1 个 IP 自动检测高 [数据输出]（Windows azure 网站）

> ID：14950711
> 
> 赞同：2
> 
> 时间：2013-02-19T05:49:14.627
> 
> 标签：security, azure, ip, traffic

我有一个敌人，他在我的网站上生成大量数据（下载 1 个文件（500kb）很多次（数千））。我知道他的IP。但我不能阻止他，因为我使用的是 azure 网站。为了能够阻止 IP，我需要将我的 azure 网站转移到 => 云服务并启用 IP 安全性。我知道。但是敌人有动态IP，他可以在我睡觉的时候开始攻击，所以我会赔钱，因为我不能在我睡觉的时候手动阻止它。

问题：我如何阻止 IP 产生超过 100mb/hr 的数据？**自动地！** 我可以使用 Azure 网站或 Azure 云服务。有什么天蓝色的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T10:21:41.610

我实际上并没有尝试过，但是这里有一个 IIS 扩展，它可以根据时间的请求自动阻止 IP。它会阻止许多对小文件的请求。 [http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)

使用扩展安装程序或任何其他需要通过 MSI 和注册表项正确“安装”、访问程序文件等的东西，您需要对 azure 项目配置执行启动任务以运行安装程序。

我刚刚找到了关于如何为这个确切的扩展配置启动任务的指南： [http ://blog.ehuna.org/2012/04/how_to_stop_a_denial_of_servic.html](http://blog.ehuna.org/2012/04/how_to_stop_a_denial_of_servic.html)

在页面上搜索此文本...如何阻止对您的 ASP.NET 网站的“拒绝服务”(DoS) 攻击，也就是“在 Windows Azure 上使用“动态 IP 限制”IIS 扩展“）

# php - 如何在php中的结果数组中格式化以下数组

> ID：14950712
> 
> 赞同：0
> 
> 时间：2013-02-19T05:49:16.777
> 
> 标签：php, arrays

我有以下 2 个数组

```
 $Name = Array
         (
          [0] => A
          [1] => B
          [2] => C
          [3] => D
         )

    $zip = Array
    (
        [0] => 411023
        [1] => 411045
        [2] => 411051
        [3] => 411023
    ) 
```

最终数组应该是这样的

```
 $final = Array
         (
          411045 => B
          411051 => C
          411023 => A B
         ) 
```

希望你们明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:56:57.807

```
$name = array ('A', 'B', 'C', 'D');
$zip = array (411023, 411045, 411051, 411023);
$final = array ();

for ($i = 0; $i < sizeof ($zip); $i++)
{
    $n = $name [$i];
    $z = $zip [$i];

    if (!array_key_exists ($z, $final))
        $final [$z] = array ();

    $final [$z][] = $n;
}

print_r ($final); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:57:27.750

您正在寻找`array_keys()`可以指定值范围的 phps 函数的第二个用例。使用它，您可以简单地遍历第二个数组：

```
$final=array();
foreach ($zip as $key=>$anchor) {
  if (! array_key_exists($final,$key))
    $final[$key]=array();
  $final[$key][]=array_keys($name,$anchor);
} 
```

这会产生一个结果`$final`，其中每个元素又是一个数组，很可能是您想要的。也可以将您的问题解释为您要求使用空格分隔的字符串，在这种情况下，只需另外转换结果数组：

```
foreach ($final as $key=>$val)
  $final[$key]=implode(' ',$val); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T06:47:27.827

这是另一个解决方案：

```
<?php
    $Name             = Array('A','B','C','D');
    $zip              = Array(411023,411045,411051,411023);

    $namezip          = array_combine($Name,$zip);
    $res              = array();
    foreach($namezip as $nam=>$zp){
       if(array_key_exists($zp,$res)){
          $res[$zp]  .= " ".$nam;
       }
       else{
          $res[$zp]   = $nam;
       }
    }

    echo "<pre>";
    print_r($res);
?> 
```

# android - 我可以从移动电话获得任何服务提供商的语音通话吗？

> ID：14950715
> 
> 赞同：2
> 
> 时间：2013-02-19T05:49:23.237
> 
> 标签：android, call, voip, skype

我正在开发像 VOIP 这样的应用程序。

应用程序的一项功能是应用程序内的调用，就像 (Viber) 一样。另一个拨打手机号码和固定电话，例如Skype 通话。

对于从应用程序到应用程序的呼叫，我获得了 SIP，但我没有获得任何呼叫其他手机号码的服务。

您是否有任何已知的服务提供商可以拨打手机和固定电话。

请分享您的想法并感谢您的想法。

# wix - 蜡引导程序

> ID：14950718
> 
> 赞同：1
> 
> 时间：2013-02-19T05:49:27.220
> 
> 标签：wix, wix3.6, burn, wix-extension

我已经使用 WPF 编写了一个托管的 wix 引导程序。实际安装步骤需要链接多个 msi/exe 和批处理文件。

```
<Chain>
 <MsiPackage SourceFile="xxx"/>
 <ExePackage Id="Test" SourceFile="..\TestBatch.bat" Vital="yes"/>
 <MsiPackage SourceFile="yyy"/>
</Chain> 
```

在每个包的执行过程中，应显示一条消息（最好来自引导程序 UI），指示当前正在执行哪个 msi/exe 包/批处理文件。简而言之，引导程序中需要 ProgressText 我怎样才能做到这一点？

另一个问题：我不希望所有的 msi 都被打包到 bootstrapper exe 中。这是因为：每次更改 msi 时，我们都希望仅发送更新/修改的 msi，而不是整个引导程序 exe。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:13:23.757

两个答案，一个建议：

1.  要在安装 MsiPackages 期间取回消息，请处理该`BootstrapperCore.ExecuteMsiMessage`事件。那里的事件参数将包含一条消息，其中包含您要查找的数据。

2.  要配置压缩包的方式，请使用该`Compress`属性。您可以标记整个`Bundle/@Compress='no'`包裹或标记每个包裹`Compress='no'`（或者`'yes'`如果您想这样做）。

--

建议：确保将 DetectCondition 添加到 ExePackage 中，以便 Burn 知道 ExePackage 是否已经存在。

# gnuplot - gnuplot中xticlabels中的自定义字符串

> ID：14950726
> 
> 赞同：1
> 
> 时间：2013-02-19T05:50:12.973
> 
> 标签：gnuplot

此线程在这里： [xticlabels 中的自定义字符串](https://stackoverflow.com/questions/10805866/how-do-i-give-custom-string-argument-to-xticlabels-in-gnuplot?)

解决了自定义 xticlabel 字符串的问题。

现在，如何对第 4 列中的数据进行排序（例如），以便仅使用第 4 列中包含某些字符串的行来创建 xticlabel？IOW，正确的格式是什么： (IF strcol(4) eq "Sunrise") plot 'datafile' u 4:2:( xticlabels( strcol(4).strcol(2) ) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:39:37.587

鉴于此数据文件：

```
Sunrise cat 1
Sunset dog 2
Sunrise fish 3
waste space 4
blah blah 5
Sunrise label 6 
```

我们可以用这条线绘制它：

```
plot 'test.dat' u 3:xticlabels(strcol(1) eq 'Sunrise'?strcol(1).strcol(2):'') 
```

它创建了这个情节：

![在此处输入图像描述](../Images/fa654b83c4e59b6f60ee1d3a4ba8b55a.png)

基本上我在那里所做的是我查看了第 1 列中的字符串，如果它是“日出”，我将它与第 2 列中的字符串连接起来。如果它不是“日出”，那么我返回一个空字符串以防止出现标签被放置在那里。但是，这确实会在每个数据点的位置放置一个主要的抽动。为避免这种情况，您可以使用以下方法：

```
plot 'test.dat' u 3:xticlabels(strcol(1) eq 'Sunrise'?strcol(1).strcol(2):NaN) 
```

这产生了这个情节（我已经在 gnuplot 4.4.2 和 4.6.0 上测试过）：

![在此处输入图像描述](../Images/df8a4b79588fed3205cca5c4e977f5ac.png)

它还会发出一堆关于非字符串标签的警告，但我想这没关系。

# gwt - GWT UiBinder TabPanel

> ID：14950727
> 
> 赞同：4
> 
> 时间：2013-02-19T05:50:20.233
> 
> 标签：gwt, uibinder, tabpanel

如何在 GWT 的 UiBinder 中定义 TabPanel。TabPanel 和 TabLayoutPanel 有什么区别。在哪里可以找到有关 TabPanel uibinder 参数的其他信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T05:50:20.233

样本：

```
<g:TabPanel ui:field="mainTab">
    <g:Tab text="Header #1">
        <g:FlowPanel ui:field="tabPanel1"/>
    </g:Tab>
    <g:Tab text="Header #2">
        <g:FlowPanel ui:field="tabPanel2"/>
    </g:Tab>
</g:TabPanel> 
```

TabPanel 和 TabLayoutPanel 有两个主要区别：

1.  TabLayoutPanel 需要 ProvidesResize 容器，TabPanel 没有额外要求
2.  TabPanel 转换为简单的 html 表格，TabLayoutPanel 转换为具有相对复杂布局的 div 包。

您可以在 TabPanelParser 类中找到有关 TabPanel 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T14:12:39.997

看看[这个](https://stackoverflow.com/questions/3759757/gwt-uibinder-tab-panel)TabPanel 和 TabLayoutPanel 的区别

# hadoop - 为什么 HBase 是比 Cassandra 和 Hadoop 更好的选择？

> ID：14950728
> 
> 赞同：42
> 
> 时间：2013-02-19T05:50:21.543
> 
> 标签：hadoop, cassandra, nosql, hbase, cap-theorem

为什么使用`HBase`比使用更好的选择`Cassandra`with `Hadoop`？

任何人都可以对此进行详细解释吗？

谢谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-19T06:46:45.313

我不认为两者都比其他更好，它不仅仅是一个或另一个。这些是非常不同的系统，每个都有自己的优点和缺点，所以这真的取决于你的用例。它们绝对可以在同一基础设施中相互补充使用。

为了更好地解释这种差异，我想从[Cassandra 借一张图片：权威指南](https://rads.stackoverflow.com/amzn/click/com/1449390412)，他们在那里讨论了 CAP 定理。他们所说的基本上对于任何分布式系统，你必须在**一致性**、**可用性**和**分区容限**之间找到一个平衡点，你只能现实地满足其中的两个属性。从中可以看出：

*   Cassandra 满足**可用性**和**分区容差**属性。
*   HBase 满足**Consistency**和**Partition Tolerance**属性。

![帽](../Images/9556d7b54634d957e9f39e008a271ee7.png)

对于 Hadoop，HBase 构建在 HDFS 之上，如果您已经拥有 Hadoop 堆栈，则使用起来非常方便。Cloudera 也支持它，它是 Hadoop 的标准企业发行版。

但是 Cassandra 还与 Hadoop 有更多的集成，即 Datastax Brisk，它越来越受欢迎。您现在还可以使用一些 Cassandra 提供的输出格式（例如）将数据从 Hadoop 作业的输出本地流式传输到 Cassandra 集群`BulkOutputFormat`，我们不再是 Cassandra 只是一个独立项目的地步。

根据我的经验，我发现 Cassandra 非常适合随机读取，而不是扫描

为了给图片增添一点色彩，我在同一个基础设施中的工作中一直使用这两种方法，而 HBase 的用途与 Cassandra 完全不同。我主要将 Cassandra 用于实时非常快速的查找，而我更多地将 HBase 用于具有较低延迟要求的繁重 ETL 批处理作业。

这是一个真正值得写一篇博文的问题，所以我不想继续往下说，而是想给你看[一篇文章](http://bigdatanoob.blogspot.com/2012/11/hbase-vs-cassandra.html)，它总结了这两个系统之间的许多关键差异。底线是，恕我直言，没有更好的解决方案，您应该真正考虑一下您的用例，看看哪个系统更适合。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-19T10:02:41.900

我们必须比较两个数据库的优缺点，并根据业务需求做出谨慎的决定。

***卡桑德拉***

**优点：**

1.  满足**CAP**理论和*最终一致*的 *可用性*和*分区*。
****   *可通过无单点故障的大型集群进行*扩展****   *用于开发的类似SQL*的语言允许开发人员轻松地从*RDBMS*后台过渡*   只要最终一致性语义足以满足用例的需求，Cassandra 就具有*出色的单行读取性能**   Datastax 的支持是一大*优势**   针对*写入进行了优化*****

 ******缺点：**

1.  不支持*基于范围的行扫描*
2.  不支持*原子比较和设置*
3.  Cassandra不支持*协处理器功能*
4.  Cassandra 支持列名已知的列族的*二级索引。*（不在动态列上）。
5.  *Cassandra 节点不支持 Cassandra 中的*聚合**

 ****HBase***

**优点：**

1.  *强一致性*，满足**CAP**理论的*Consistency & Partitioning 。*
***   RDBMS 等效*触发器*和存储*过程**   *Hadoop*支持*   *基于范围的行扫描**   支持*原子比较和设置**   *针对读取*进行了优化，由*单写主机支持**   支持*聚合**   高扩展性和数据自动分片**

 ****缺点：**

1.  *缺乏友好*的开发语言
2.  *不支持*针对单行的读取负载平衡
3.  行间操作*不是原子的*
4.  *如果仅使用了一个 HBase 主服务器，则会出现*单点故障**

 *查看[第 1](http://bigdatanoob.blogspot.in/2012/11/hbase-vs-cassandra.html)条、[第 2 条](http://db-engines.com/en/system/Cassandra%3BHBase%3BMongoDB)和此[演示文稿](http://www.slideshare.net/DmitriBabaev1/cassnadra-vs-hbase)以获取更多详细信息。********

# php - 使用预准备语句插入数据失败，并显示警告“绑定变量数与预准备语句中的字段数不匹配”

> ID：14950733
> 
> 赞同：0
> 
> 时间：2013-02-19T05:50:49.530
> 
> 标签：php, mysqli

我无法插入数据条目。我花了几个小时，查看各种教程和示例代码，但我无法弄清楚为什么以下内容不起作用：

```
$data1 = 0;
$data2 = "pumpkin";
$data3 = "cake";
$data4 = "orange";
$data5 = "sweet";
$stmt = $mysqli->stmt_init();
// Here I have a few SELECT queries that checks if $data2 and/or $data3 is already taken
$query = "INSERT INTO ". $mytable . " SET data1=?, data2=?, data3=?, data4=?, data5=?";
if ($stmt->prepare($query)) {
    $stmt->bind_param("issss", $data1, $data2, $data3, $data4, $data5);
    $stmt->execute() or trigger_error($mysqli->error); // added per Your Common Sense's suggestion
    //$stmt->bind_result($data1, $data2, $data3, $data4, $data5);
    $stmt->close();
    $mysqli->close();
} else {
    echo $mysqli->error; // edited per Yogesh Suthar's suggestion
    $stmt->close();
    $mysqli->close();
} 
```

我在网上遇到错误`$stmt->bind_result`。

> *警告：mysqli_stmt::bind_result()：绑定变量的数量与准备好的语句中的字段数量不匹配*

我究竟做错了什么？

我在 $db_user、$db_password、$db_dbname 上正确定义了以下内容：

```
$mysqli = new mysqli('localhost', $db_user, $db_password, $db_dbname); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:52:06.567

删除此行，因为您正在触发`INSERT`查询并且它返回受影响的行数。您必须`bind_result`仅用于`SELECT`查询。

```
$stmt->bind_result($data1, $data2, $data3, $data4, $data5); 
```

用这个

```
echo $mysqli->error; 
```

代替

```
echo "failed"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T06:23:38.730

如果未插入数据，则出现错误。
所以你必须向mysql询问这个错误

```
$stmt->execute() or trigger_error($mysqli->error); 
```

因此，您将收到某个错误的通知，无需猜测。

# php - 将mysql数据库的行ID放入onclick函数并使用codeigniter传递给函数

> ID：14950736
> 
> 赞同：0
> 
> 时间：2013-02-19T05:50:59.723
> 
> 标签：php, mysql, codeigniter, phpmyadmin

嘿伙计们，我是框架的初学者**`CodeIgniter`**，我正在制作一个应用程序，我想在其中从数据库中删除记录/行。我在视图的每一行前面创建了删除按钮，为此我编写了一些代码，但它没有帮助。请帮我。

这是我的**`view`**：

```
<td><?php echo anchor('dbcont/deleteinput', 'Delete', array('onclick'=>'deleteinput(\''. $row->member_id .'\');')); ?></td> 
```

这是我的**`model`**：

```
function deletedata($id)
{
     $this->db->delete('tbl_members', array('member_id' => $id));
} 
```

这是我的**`controller`**：

```
function deleteinput($id)
    {
            $this->load->helper('form');
            $this->load->helper('html');
            $this->load->model('user');
            $this->db->select('member_id');
            $id = $this->db->get('tbl_members');
            $this->user->deletedata($id);
            redirect('home');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:36:29.960

尝试这个：

```
<a href="javascript:void(0);" onclick="deleteinput(<?php echo $row->member_id;?>);">delete</a> 
```

在你的 javascript 中使用它

```
<script type="text/javascript">
var url="<?php echo base_url();?>";

    function delete(id){ 
        if (confirm("Do you want to delete?"))
          window.location = url+"dbcont/deleteinput/"+id;
        else
          return false;
}
</script> 
```

在控制器中

```
public function deleteinput($id){
     $this->load->model('user');
     $this->user->deletedata($id);
     redirect('home');

} 
```

在模型中

```
function deletedata($id){
        $this->db->where('id', $id);
        if($this->db->delete('tbl_members'))
           return true;
        else
           return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:57:54.933

你在点击事件上调用一个javascript函数......但你在发布的问题中没有任何函数......

```
 <td><?php echo anchor('dbcont/deleteinput', 'Delete', array('onclick'=>'deleteinput(\''. $row->member_id .'\');')); ?></td> 
```

无论如何我认为你不需要javascript函数你可以在url中将id作为参数传递

尝试这个，

```
 <td><?php echo anchor('dbcont/deleteinput/'.$row->member_id, 'Delete'); ?></td> 
```

注意：dbcont 是控制器类名

**更新**

更新你的控制器...

```
function deleteinput($id)
{
        $this->load->helper('form');
        $this->load->helper('html');
        $this->load->model('user');
        $this->user->deletedata($id);
        redirect('home');
} 
```

你不需要控制器中`get()`的`select`任何东西..这是模型代码......你已经在你的`deletedata`函数中这样做了..

> $this->db->delete() => 第一个参数是表名，第二个是where子句。您还可以使用 where() 或 or_where() 函数，而不是将数据传递给函数的第二个参数。

[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)在这里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:15:45.257

试试这个也...

```
<td><a href="javascript:delete_member(<?php echo $row->member_id  ?>) > Delete</a></td> 
```

并在同一个视图文件中编写这样的 JavaScript 函数......

```
function delete_membet(member_id){
       window.location.href = "<?php echo ROOT_FOLDER ?>/controller_name/delete/" +member_id ;
 } 
```

然后在控制器文件中编写如下函数......

```
public function delete($member_id)

 {

        $this->model_file->delete($member_id);

        redirect('home');

  } 
```

在模型文件中写一个这样的函数......

```
 public function delete($member_id)

     {
         $query = "delete from members where member_id = $member_id";

            $res = $this->db->query($query);
      } 
```

# javascript - 通过插件加载 YouTube Iframe 时 Chrome 不安全的 javascript 请求

> ID：14950737
> 
> 赞同：0
> 
> 时间：2013-02-19T05:50:59.857
> 
> 标签：javascript, jquery, google-chrome

我制作了一个我正在编写的小插件，当单击图像时会加载一个 youtube iframe。部分脚本将加载的 youtube iframe 居中在父容器中。这在 FF 和 IE 中效果很好，但在 Chrome 中，不会返回适当的居中边距。在 Chrome 中，我还收到“不安全的 javascript 尝试使用 URL 访问框架”错误。

我有以下代码来获得我需要的尺寸：

```
(function($){

$.fn.vidloader = function(data){
      var $dataObject = $(data); //The Iframe
      var dataHeight = $dataObject.height();
      var dataWidth = $dataObject.width();

              //FF and IE return proper height and width, Chrome returns 0;
              //do a bunch of other stuff to process this 
        }
})

     $('#container_one').vidloader('<iframe "my iframe from youtube"></iframe>'); 
```

由于“不安全地尝试使用 URL 访问框架”错误，Chrome 是否返回 0？如果是这样的话，我可以避免这个错误吗？还是我只需要使用不同的方法来使用 Chrome 提取 iframe 样式属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:58:49.527

这是一个跨域脚本问题，该策略允许在源自同一站点的页面上运行的脚本（方案、主机名和端口号的组合）无特定限制地访问彼此的方法和属性，但阻止访问大多数方法和不同网站页面上的属性。

参考：-

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:17:46.177

您是否尝试过设置`height`和`width`：

```
 var dataHeight = $dataObject.height(250);
  var dataWidth = $dataObject.width(420); 
```

# spring-mvc - 贝宝账户类型

> ID：14950740
> 
> 赞同：0
> 
> 时间：2013-02-19T05:51:07.610
> 
> 标签：spring-mvc, paypal, paypal-sandbox

我即将将 PayPal 模块集成到基于 Spring MVC 的应用程序中。基于此链接 [http://docs.broadleafcommerce.org/current/PayPal-Environment-Setup.html](http://docs.broadleafcommerce.org/current/PayPal-Environment-Setup.html)似乎我需要创建一个 PayPal 商业帐户。我假设此帐户由商家（销售/拥有产品的人）使用。买家应该使用哪个 PayPal 账户，是个人账户吗？我可以在沙盒上测试这两种账户类型（包括交易）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:26:06.000

是的，你可以做到这一切。

[http://www.tipsandtricks-hq.com/playing-in-paypals-sandbox-2880](http://www.tipsandtricks-hq.com/playing-in-paypals-sandbox-2880)为您提供高速概览。

而[https://cms.paypal.com/cms_content/TR/tr_TR/files/developer/PP_Sandbox_UserGuide.pdf](https://cms.paypal.com/cms_content/TR/tr_TR/files/developer/PP_Sandbox_UserGuide.pdf)是官方文档。

# google-apps-script - 每隔一周运行一次 Google 脚本

> ID：14950741
> 
> 赞同：1
> 
> 时间：2013-02-19T05:51:10.200
> 
> 标签：google-apps-script

我有一个用于工资单的谷歌电子表格，其中包含需要每隔一周运行一次的脚本。现在，我正在手动运行它。我想使用时间驱动的触发器，但我想不出任何组合可以在每隔一个星期四凌晨 1 点执行。任何人都知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:25:29.617

您可以原型扩展日期对象以给您一个星期数，然后选择仅在偶数周（或显然是奇数）调用

```
Date.prototype.getWeekNumber = function() {
  var firstDay = new Date(this.getFullYear(),0,1);
  return Math.ceil((((this - firstDay) / 86400000) + firstDay.getDay()+1)/7);
} 
```

然后在你每周星期四的触发器中，将整个批次包装在一个条件中

```
if (today.weekNumber() % 2 === 0) {
  // triggered function here
} 
```

但我想我喜欢 Phil Bozak 的开/关标志方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T07:17:24.507

您可以使用脚本属性来保存有关脚本的属性。

设置以下函数每周运行

```
function runEveryWeek() {
  var runThisWeek = ScriptProperties.getProperty("runThisWeek");
  if (runThisWeek) {
    //do your task here
    ScriptProperties.setProperty("runThisWeek",false);
  } else {
    ScriptProperties.setProperty("runThisWeek",true);
  }
} 
```

您必须初始化“runThisWeek”属性，以便正确设置它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-28T18:13:59.000

```
function createBiWeeklyTrigger() {
  // Trigger every other Monday at 06:00.
  ScriptApp.newTrigger('function_name')
      .timeBased()
      .everyWeeks(2)
      .onWeekDay(ScriptApp.WeekDay.MONDAY)
      .atHour(6)
      .create();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T10:56:14.143

试试这个：

```
// The init() function runs once to set up the initial trigger.

function init() {
   ScriptApp.newTrigger("ThursdayTrigger")
    .timeBased()
    .atDate(2013, 3, 21) // Setup the first trigger on a specific date
    .create();
}

function ThursdayTrigger() {

  // 1\. write the function code here

  // 2\. delete the existing ThursdayTrigger

  var triggers = ScriptApp.getScriptTriggers();
  for (var i = 0; i < triggers.length; i++) {
    if (triggers[i].getHandlerFunction() == "ThursdayTrigger") {
      ScriptApp.deleteTrigger(triggers[i]);
    }
  }

  // 3\. setup another trigger in the same function that triggers after 14 days.

  ScriptApp.newTrigger("ThursdayTrigger")
    .timeBased()
    .after(1000*60*60*24*14) // Alternate Thursday
    .create(); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-09T19:16:06.913

ScriptProperties 库现已弃用。[PropertiesService 文档](https://developers.google.com/apps-script/reference/properties/properties "属性服务文档")帮助我找出了下面的解决方案。

```
function runEveryWeek() {
  var scriptProps = PropertiesService.getScriptProperties();
  if(scriptProps.getProperty('runThisWeek') == "True"){
    //do your task here
    Logger.log("tast executes");
    scriptProps.setProperty("runThisWeek", 'False');
  } else {
    Logger.log("task does not execute");
    scriptProps.setProperty("runThisWeek", 'True');
  }
} 
```

我最初尝试将值设置为布尔值，但这导致了一个问题，因为该方法`.getProperty()`具有返回类型`string`。我试图通过使用大写首字母来明确区分布尔值和布尔值表示为字符串。

您可以在运行后通过检查日志来测试它。

# codeigniter - Codeigniter - 使用在 URL 中输入的用户名搜索配置文件

> ID：14950749
> 
> 赞同：0
> 
> 时间：2013-02-19T05:51:54.417
> 
> 标签：codeigniter, codeigniter-url, tankauth, codeigniter-routing

我正在使用 Codeigniter 和 Tank Auth，我正在使用 Ubuntu 操作系统。当我使用我的 IP 访问我的项目时，它类似于：

```
http://192.168.1.10/project/auth/login 
```

我必须实现使用 URL 搜索配置文件的功能。假设如果我输入

```
http://192.168.1.10/project/vishmay 
```

然后它应该显示我的个人资料。谁能告诉我该怎么做？

我试过在我的 routes.php 中这样做

```
$route['default_controller'] = "welcome";
$route['auth/login'] = 'auth/login';
$route['auth/register'] = 'auth/register';
$route['auth/logout'] = 'auth/logout';
$route['welcome/profile'] = 'welcome/profile';
$route[':any'] = 'auth/index/$1'; 
```

并且还在 auth.php 控制器中创建了 index()

```
 function index() {
        $username=$this->uri->segment(1);
        $data['result']=$this->users->get_profile_pic1($username);   
        if ($message = $this->session->flashdata('message')) {
            $data['reg_success'] = "You have been registered successfully.";
            $reg_success = 1;
            redirect('/auth/register', $data);
        } else {
            redirect('/auth/login/');
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:02:15.013

你应该改变：

```
$route[':any'] = 'auth/index/$1'; 
```

到

```
$route['(:any)'] = 'auth/index/$1'; 
```

使`$1`能正确获取段值。

你可以试试这段代码：

试试这个：

```
function index($username = '') {
    $data['result']=$this->users->get_profile_pic1($username);   
    if ($message = $this->session->flashdata('message')) {
        $data['reg_success'] = "You have been registered successfully.";
        $reg_success = 1;
        redirect('/auth/register', $data);
    } else {
        redirect('/auth/login/');
    }
} 
```

# c# - 为什么 switch for enum 接受隐式转换为 0 但不接受任何其他整数？

> ID：14950750
> 
> 赞同：24
> 
> 时间：2013-02-19T05:52:00.300
> 
> 标签：c#, .net, enums, switch-statement

有一个：

```
enum SomeEnum
{
    A = 0,
    B = 1,
    C = 2
} 
```

现在编译器允许我写：

```
SomeEnum x = SomeEnum.A;
switch(x)
{
    case 0: // <--- Considered SomeEnum.A
        break;
    case SomeEnum.B:
        break;
    case SomeEnum.C:
        break;
    default:
        break;
} 
```

`0`被认为是`SomeItems.A`。但我不能写：

```
SomeEnum x = SomeEnum.A;
switch(x)
{
    case 0:
        break;
    case 1: // <--- Here is a compilation error.
        break;
    case SomeEnum.C:
        break;
    default:
        break;
} 
```

为什么只存在隐式转换`0`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T05:56:51.570

来自[ECMA-334（C# 语言规范）](http://www.ecma-international.org/publications/standards/Ecma-334.htm)

> **13.1.3 隐式枚举转换**
> 
> > 隐式枚举转换允许将十进制整数文字 0 转换为任何枚举类型。

[enum 的](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.110%29.aspx)默认值是`0`并且在编译时已知这就是为什么它在 switch 语句中被允许。对于 以外的值`0`，无法在编译时确定该值是否存在于枚举中。

[枚举（C# 参考）](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.110%29.aspx)

> 为枚举的新版本分配附加值，或在新版本中更改枚举成员的值，可能会导致相关源代码出现问题。在 switch 语句中经常**使用枚举值，如果在枚举类型中添加了其他元素，则默认值的测试可能会意外返回 true。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:09:04.307

我还要补充一点，语句中的语法 with而`0`不是 exact可能容易出错。考虑以下代码：`enum``switch`

```
enum TestEnum
{
    NA = 0,
    A
} 
```

进而

```
var e = TestEnum.NA;
switch(e)
{
    case 0:
        {
            break;
        }
    case TestEnum.A:
        {
            break;
        }
} 
```

这编译并运行良好。但是，如果由于某种原因，`enum`声明更改为

```
enum TestEnum
{
    NA = 1,
    A
} 
```

一切都会被打破。

`enum`尽管在大多数情况下is的默认值`0`，因此可能会出现这种语法，但我会使用确切的`enum`.

# highcharts - isDirtyBox 和 isDirtyLegend

> ID：14950754
> 
> 赞同：2
> 
> 时间：2013-02-19T05:52:08.053
> 
> 标签：highcharts, highstock

我在之前的几篇文章中找到了，比如在[这里](https://stackoverflow.com/questions/14947484/dynamically-modifying-the-highchart-layout-options)，使用了**`chart.isDirtyBox`**and**`chart.isDirtyLegend`**属性。我也无法在 highcharts API 中找到它们。

他们实际上是做什么的？那里的任何人都可以帮助我获取这些属性的文档或帮助我解释这些属性的使用，可能带有示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:20:51.073

它不在文档中，它只是在内部用于知道哪些元素已更改并且必须重绘。

**Highstock v1.2.4**

**isDirtyBox** - 相关代码。

```
var chart = this,
    ...
    isDirtyBox = chart.isDirtyBox;

// redraw axes
each(axes, function (axis) {

    // Fire 'afterSetExtremes' only if extremes are set
    if (axis.isDirtyExtremes) { // #821
        axis.isDirtyExtremes = false;
        afterRedraw.push(function () { // prevent a recursive call to chart.redraw() (#1119)
            fireEvent(axis, 'afterSetExtremes', axis.getExtremes()); // #747, #751
        });
    }

    if (axis.isDirty || isDirtyBox || hasStackedSeries) {
        axis.redraw();
        isDirtyBox = true; // #792
    }
});

// the plot areas size has changed
if (isDirtyBox) {
    chart.drawChartBox();
} 
```

**isDirtyLegend** - 相关代码。

```
var chart = this,
    ...
    redrawLegend = chart.isDirtyLegend,
    ...

// handle updated data in the series
each(series, function (serie) {
    if (serie.isDirty) { // prepare the data so axis can read it
        if (serie.options.legendType === 'point') {
            redrawLegend = true;
        }
    }
});

// handle added or removed series
if (redrawLegend && legend.options.enabled) { // series or pie points are added or removed
    // draw legend graphics
    legend.render();

    chart.isDirtyLegend = false;
} 
```

`isDirtyLegend`也用于`chart.resize`,`series.remove`和`chart.addSeries`下面的行。

```
chart.isDirtyLegend = true; // force legend redraw 
```

# mysql - 从 vb6 到 sql 代码的参数或调用

> ID：14950758
> 
> 赞同：1
> 
> 时间：2013-02-19T05:52:27.523
> 
> 标签：mysql, sql, parameters, vb6, call

我即将使用VB6制作一个系统。我的导师告诉我，我应该使用 SQL 代码中的参数或调用，因为我们需要专注于 sql。我的问题是如何做到这一点？我知道 ADO、RDO 等……但我很难找到这样的东西。关于如何做到这一点的任何建议或线索？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:12:31.590

您需要拥有与您的数据库安装/可用的正确驱动程序。这将在“参考”对话框中可用。

对于 ADO，设置对适当 ADO 类型库的引用。有两个 ADO 类型库。一种称为 ADODB，包含在 MSADO15.DLL 中。另一个称为 ADOR，包含在 MSADOR15.DLL 中。

ADODB 是两者中更大且功能更丰富的。它包含主要的 ADO 对象，并且可能是您最想使用的对象。第二个是仅支持记录集的 ADODB 类型库的“轻量级”子集。如果您的操作仅限于记录集，则可以使用。

[在此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675104%28v=vs.85%29.aspx)中找到了一组很好的示例

# ruby-on-rails-3 - 如何控制来自控制器中表单的动态行

> ID：14950765
> 
> 赞同：3
> 
> 时间：2013-02-19T05:52:50.160
> 
> 标签：ruby-on-rails-3, grails, grails-2.0, grails-controller

我有一个发送动态行数和列数的表单。这是关于表单外观的[jsFiddle](http://jsfiddle.net/fmuW6/)[演示。](http://jsfiddle.net/fmuW6/)

我有红色、黄色和绿色的列，并且可能有与这些颜色阴影相关的动态行数。每行都有一个文本框和复选框。

如何记录用户在我的控制器`save()`操作中选择的内容？

例如，对于表单中的以下屏幕截图

![在此处输入图像描述](../Images/008951a482905491759ddf39ce36ec9d.png)

我收到以下回复给我的控制器：

```
[red:on, green:[on, on], shade:[light, dark, , ], action:save] 
```

**问题**

现在的问题是，即使我拥有用户输入的所有阴影，我也无法连接回哪些行已检查了不同颜色列的复选框。

我也有兴趣知道如何在 Grails/Rails 或其他框架中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:54:26.737

所以你必须增加你的名字：

```
<input type="checkbox" name="red.1" />
<input type="checkbox" name="red.2" />
<input type="checkbox" name="red.3" /> 
```

然后你可以像这样循环它们：

```
params.list("red").each {
} 
```

# java - / 供过滤器使用

> ID：14950768
> 
> 赞同：0
> 
> 时间：2013-02-19T05:53:23.560
> 
> 标签：java, jakarta-ee, servlets, servlet-filters

**客观的**

我的目标是在将请求转发到 index.jsp 之前获得一个 servlet 过滤器来处理对主页的请求。

**问题**

我无法让我的过滤器接收来自“/”的请求。它的 URL 模式是

`<url-pattern>/</url-pattern>`

相反，对该模式的请求最终直接指向*index.jsp*。

我阅读了之前的一篇文章 [Servlet Mapping / and /*](https://stackoverflow.com/questions/4140448/servlet-mapping-vs)并想知道映射到“/”是否仅在应用程序文件夹中没有 index.jsp 的情况下才有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:15:20.623

您的目标是在进入 index.jsp 页面之前将用户重定向到一个 servlet。我建议`<welcome-file/>`在`web.xml`.

```
<welcome-file-list>  
<welcome-file>first</welcome-file>  // remember no leading slash
</welcome-file-list>  

<servlet>  
    <servlet-name>firstServlet</servlet-name>  
    <servlet-class>business.firstServlet</servlet-class>  
</servlet>  

<servlet-mapping>  
    <servlet-name>firstServlet</servlet-name>  
    <url-pattern>/first</url-pattern>  
</servlet-mapping> 
```

这将确保您的控件在转到主页之前转到第一个 servlet

# ruby-on-rails - 如何在 Rails3 的开发模式下禁用运行解释命令

> ID：14950773
> 
> 赞同：0
> 
> 时间：2013-02-19T05:53:57.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在 Rails3 的开发模式下禁用运行解释命令

```
 User Load (615.1ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1

      EXPLAIN (604.5ms)  EXPLAIN SELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1

    EXPLAIN for: SELECT  `users`.* FROM `users`  WHERE `users`.`id` = 12 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:56:11.020

根据本[指南](http://guides.rubyonrails.org/active_record_querying.html#automatic-explain)，设置`config.active_record.auto_explain_threshold_in_seconds`为`nil`将禁用它。

# node.js - Kue callback when job is completed

> ID：14950777
> 
> 赞同：1
> 
> 时间：2013-02-19T05:54:10.520
> 
> 标签：node.js, callback, kue

My main Node instance forks a worker process, which accepts messages over IPC (using the built-in Node `process.send()` and `process.on('message'...`) which are objects containing information about new jobs to add to [Kue](https://github.com/learnboost/kue). It then processes those jobs.

My main Node instance calls something like this:

```
worker.send({jobType:'filesystem', operation: 'delete', path: fileDir}); 
```

and the worker instance does something like this:

```
jobs.create(message.jobType, message).save();

jobs.process('filesystem', function(job, done) {
    fs.delete(job.data.path, function(err) {
        done(err);
    });
}); 
```

and the job completes successfully.

How can I get callback-like functionality in my main Node instance when the job is completed? How can I return some results to the main Node instance from the worker instance?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:04:39.393

我相信我解决了这个问题，但如果有人可以改进我的解决方案或提供更好的解决方案，我会留下未解决的问题。

当您使用 Kue 在单独的进程中处理作业时，您不能简单地在作业完成时执行回调。这是两个进程之间通信的示例。我本来希望使用 Kue 自动提供每个作业的 id（我相信它与 Redis 中接收到的 id 相同）但是 app.js 需要在将作业的 id 发送给工作人员之前知道它收到消息时可以匹配id。

**应用程序.js**

```
var child = require('child_process');
var async = require('async');

var worker = child.fork("./worker.js");

//When a message is received, search activeJobs for it, call finished callback, and delete the job
worker.on('message', function(m) {
    for(var i = 0; i < activeJobs.length; i++) {
        if(m.jobId == activeJobs[i].jobId) {
            activeJobs[i].finished(m.err, m.results);
            activeJobs.splice(i,1);
            break;
        }
    }
});

// local job system
var newJobId = 0;
var activeJobs = [];

function Job(input, callback) {
    this.jobId = newJobId;
    input.jobId = newJobId;
    newJobId++;
    activeJobs.push(this);

    worker.send(input);

    this.finished = function(err, results) {
        callback(err, results);
    }
}

var deleteIt = function(req, res) {
    async.series([
        function(callback) {
            // An *EXAMPLE* asynchronous task that is passed off to the worker to be processed
            // and requires a callback (because of async.series)
            new Job({
                jobType:'filesystem',
                title:'delete project directory',
                operation: 'delete',
                path: '/deleteMe'
            }, function(err) {
                callback(err);
            });
        },
        //Delete it from the database
        function(callback) {
            someObject.remove(function(err) {
                callback(err);
            });
        },
    ],
    function(err) {
        if(err) console.log(err);
    });
}; 
```

**worker.js**

```
var kue = require('kue');
var fs = require('fs-extra');

var jobs = kue.createQueue();

//Jobs that are sent arrive here
process.on('message', function(message) {
    if(message.jobType) {
        var job = jobs.create(message.jobType, message).save();
    } else {
        console.error("Worker:".cyan + " [ERROR] No jobType specified, message ignored".red);
    }
});

jobs.process('filesystem', function(job, done) {

    if(job.data.operation == 'delete') {
        fs.delete(job.data.path, function(err) {
            notifyFinished(job.data.jobId, err);
            done(err);
        });
    }
});

function notifyFinished(id, error, results) {
    process.send({jobId: id, status: 'finished', error: error, results: results});
} 
```

[https://gist.github.com/winduptoy/4991718](https://gist.github.com/winduptoy/4991718)

# c# - to get the window while click on the balloon tool tip

> ID：14950780
> 
> 赞同：2
> 
> 时间：2013-02-19T05:54:19.460
> 
> 标签：c#

In a chat messenger application,i need to indicate the presence of new message by notify icon balloon tool tip.the presence of new message will produce a highlight in the corresponding taskbar item by producing a flash(if the window is in minimized state).so i implement it and execute.the code is given below.

```
this.nfiClient.Icon = Resource1.chat;

nfiClient.ShowBalloonTip(2000, "New message received..!", "" + msg.senderDisplayName + " messaged you.", ToolTipIcon.Info);

if (this.WindowState == FormWindowState.Minimized)
   {

     this.WindowState = FormWindowState.Minimized;

     FlashWindow.Flash(this,3);

   } 
```

now i wished to see the window in normal state while click on the balloon tip(if the window is in minimized state).can i set it in any event property of the notify icon?please help me..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:27:59.127

`BalloonTipClicked`单击气球提示时会触发该事件。您必须将事件处理程序与此事件绑定：

```
nfiClient.BalloonTipClicked += new EventHandler(nfiClient_BalloonTipClicked);

private void nfiClient_BalloonTipClicked(object sender, EventArgs e)
{
    // Handle the click event here by showing the window.
} 
```

要取消绑定事件处理程序，您可以使用

```
nfiClient.BalloonTipClicked -= new EventHandler(nfiClient_BalloonTipClicked); 
```

# extjs - how to call view in extjs on button click event

> ID：14950782
> 
> 赞同：0
> 
> 时间：2013-02-19T05:54:32.530
> 
> 标签：extjs, yii

i am working in extjs+ Yii framework. I have view as- QbQns.js-

```
Ext.define('Balaee.view.qb.qbqns.Qbqns',    
        {
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.qb.qbqns.QbqnsView'
              ],
              id:'qbqnsId',
              alias:'widget.Qbqns',
              title:'Qbqns',
              height:500,
              items:[
                     { xtype:'QbqnsView',},
                     ],//end of items square
                     buttons:[
                              { xtype:'button',
                                  fieldLabel:'Vote',
                                  action:'voteAction',
                                  name:'vote',
                                  formBind:true,
                                  text:'submit', } ] }); 
```

On this submit button click, i want to create new view as-

```
 Ext.define('Balaee.view.qb.qbqns.QbqnsReviewView',
    {
            extend:'Ext.view.View',
            id:'qbqnsViewId',
            alias:'widget.QbqnsReviewView',
            //store:'kp.PollStore',
            store:'qb.QbqnsStore',
            config:
            {
                tpl:'<tpl for=".">'+
                    '<div id="main">'+
                    '</br>'+

                    '<h1 id="q">Question :-</h1> {question}</br>'+

                 /*  '<tpl for="options">'+     // interrogate the kids property within the data
                        '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{option}">&nbsp{option}</p>'+
                    '</tpl>'+*/

                    '<tpl for="options">'+
                        '<tpl if="parent.Correctoption==option">'+
                        //'<tpl if="Correctoption==UsersOption">'+
                        '<p style="color:Green"><input type="radio" name="{optionId}">{option}</p>'+

                        '<tpl elseif="parent.UsersOption==option">'+
                        '<p style="color:Red"><input type="radio" name="{optionId}">{option}</p>'+

                        '<tpl else>'+
                        '<p><input type="radio" name="{parent.questionId}" value="{option}">&nbsp{option}</p>'+

                        '</tpl>'+  
                    '</tpl>'+   

     '<p>---------------------------------------------------------</p>'+
                    '</div>'+

                   '<h1 id="q">Total marks are:-</h1>{Total}'+
                   '<h1 id="q">Score you got is:-</h1>{Score}'+

                    '</tpl>',

                itemSelector:'div.main',
            }
    });// End of login class 
```

So how to call this above view from controller on submit button click. Please suggest me...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:37:42.427

在您的控制器中：

```
init: function() {
    this.control({
        'button[action=voteAction]': {
            click: function(btn) {
                Ext.create('Balaee.view.qb.qbqns.QbqnsReviewView', {
                    renderTo: Ext.getBody();  //<-- where you want render it
                });
            }
        }
    });
} 
```

此外，您视图中的商店现在也是一个字符串。使用 Ext.create() 或 Ext.getStore(storeId)。

你需要阅读[指南](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)吗？

# c++ - C++ Interfaces Exchanging

> ID：14950784
> 
> 赞同：1
> 
> 时间：2013-02-19T05:54:36.717
> 
> 标签：c++, abstract-class, pure-virtual

I'm trying to work with C++ java/C# like interfaces by creating classes that have only pure virtual methods, like the following: (this is just an example)

```
class IMyInterface
{
public:
    virtual int someFunc() = 0;
    virtual ~IMyInterface() {}
}; 
```

Everything is fine until I was stuck implementing a method that exchanges two elements in an array of `IMyInterface`, since it's not allowed in C++ to instantiate an interface as the compiler will complain about `temp` not implementing `someFunc()`.

```
void Exchange(IMyInterface* array, int i, int j)
{
    IMyInterface temp = array[i]; // not allowed
    array[i] = array[j];
    array[j] = temp;
} 
```

so I had to change the interface class definition and get rid of pure virtual function and supply a "default" implementation of the method like so:

```
class IMyInterface
{
public:
    virtual int someFunc()
    {
        return 0;
    }
    virtual ~IMyInterface() {}
}; 
```

The problem is that `IMyInterface` is not an interface anymore, it doesn't force whatever class that will inherit from it to implement `someFunc()`.

Anyway around this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:58:18.200

接口不是完全定义的对象，因此您不能创建它们的实例。它们的大小和结构未定义，因此显然不能在值上下文中创建或使用它们。但是，您可以**创建指向接口**的指针（Happy Guys？），因为指向对象的指针定义得非常好。示例代码可能变成：

```
void Exchange(IMyInterface** array, int i, int j)
{
    IMyInterface* temp = array[i]; // allowed :)
    array[i] = array[j];
    array[j] = temp;
} 
```

如果操作应该按值完成，那么模板函数可能更合适。

# ruby-on-rails - Could not create Makefile when installing ruby gems

> ID：14950787
> 
> 赞同：2
> 
> 时间：2013-02-19T05:54:47.463
> 
> 标签：ruby-on-rails, ruby, makefile, gem, osx-mountain-lion

I'm running `OSX 10.8.2`, Xcode installed with command line tools.

I'm trying to bundle, and on some gems (I'll specify at the bottom) I am getting the following:

```
ERROR: Failed to build gem native extension 
```

...

```
Could not create Makefile due to some reason 
```

So far I get the error on the `gem 'pg'` and `gem 'binding_of_caller'`

I believe the error has something to do with the inability to create Makefile, but can't find anything helpful to solve the error. I've pasted the full error below:

I'm at a loss for what to do.

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--without-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
--with-pg
--without-pg
--with-pg-dir
--without-pg-dir
--with-pg-include
--without-pg-include=${pg-dir}/include
--with-pg-lib
--without-pg-lib=${pg-dir}/lib
--with-pg-config
--without-pg-config
--with-pg_config
--without-pg_config
--with-pqlib
--without-pqlib
--with-libpqlib
--without-libpqlib
--with-ms/libpqlib
--without-ms/libpqlib

Gem files will remain installed in /Users/ericavirtue/.bundler/tmp/75812/gems/pg-0.14.1 for inspection.
Results logged to /Users/ericavirtue/.bundler/tmp/75812/gems/pg-0.14.1/ext/gem_make.out
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

EDIT: I'm using `rbenv` to manage ruby versions and it says I am running `1.9.3 -p385`The system ruby is an older version, but that shouldn't matter as far as I know.

I have `postgresql` installed via `homebrew`

EDIT 2:

I tried switching to `RVM` for ruby management, but get another make error:

```
Error running 'make -j2', please read ... ruby-1.9.3-p385/make.log
There has been an error while running make. Halting the installation. 
```

The file make.log doesn't exist ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:45:45.087

您需要安装 postgres。从[http://deveiate.org/code/pg/README_rdoc.html](http://deveiate.org/code/pg/README_rdoc.html)你需要：

*   红宝石 1.8.7-p249 或 1.9.3-p0。
*   PostgreSQL 8.3.x（带有头文件、-dev 包等）。

如果您使用的是 brew，只需

```
brew install postgresql 
```

至于 binding_of_caller，你使用的是什么版本的 ruby​​？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:46:38.710

所以我通过`sudo env ARCHFLAGS="-arch x86_64" gem install pg`安装 pg 解决了这个问题，但是现在我在尝试创建数据库、运行服务器等时遇到了不同的问题。我将为这些问题创建另一个问题。

# c - Check if a VirtualAddress was returned by VirtualAlloc

> ID：14950789
> 
> 赞同：1
> 
> 时间：2013-02-19T05:54:49.460
> 
> 标签：c, windows, winapi, memory-management

I was wondering if it's possible to determine if a virtual address (pointer) belongs to a previous `VirtualAlloc` call or not (if possible without writing to the page). Since `VirtualFree` can automatically set the `dwSize` value if you use it with `MEM_RELEASE`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:36:38.177

Something like this or I don't understand the question?

```
MEMORY_BASIC_INFORMATION mbi;
void* p = NULL;
VirtualQuery(p, &mbi, sizeof(mbi));
BOOL bWasUsed = (mbi.State==MEM_FREE)? FALSE: TRUE; 
```

# backbone.js - Meteor Backbone Routing Prevent Page Refresh

> ID：14950793
> 
> 赞同：1
> 
> 时间：2013-02-19T05:55:00.943
> 
> 标签：backbone.js, meteor

I'm developing a single-page Meteor application and i'm handling the routing using Backbone.js. I'm trying to navigate the pages like a carousel, so when I click a menu item in the navigation the page will slide left or right to reveal the chosen page. However, the problem is whenever I click a link the entire page would reload and this interferes with the carousel transition. I want to prevent the page from reloading when I click a link, like what AngularJS does but i'm having troubles making it work. I'm trying not to use # links because the spiderable meteor package says that only real links are visible to spiders. Does anyone have a solution?

This is the HTML:

```
<div id="main-navbar" class="navbar">
  <div class="navbar-inner rectangle-navbar">
    <div class="container">
      <ul class="nav">
        <li><a href="/">Home</a></li>
        <li><a href="/login">Login</a></li>
      </ul>
    </div>
  </div>
</div> 
```

and this is the Coffeescript:

```
Router = Backbone.Router.extend
  routes: 
    "":                 "main"
    "login":            "login"

  login: -> 
    slideCarousel 0, false

  main: -> 
    slideCarousel 1, true

appRouter = new Router
Meteor.startup -> 
  Backbone.history.start pushState: true

slideCarousel = (slideId, visibility) ->
  $("#content").carousel slideId
  $('#content').carousel "pause"
  if visibility == false
    $("#landing").hide "slow"
  else
    $("#landing").show "slow" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:38:45.980

尝试使用[http://backbonejs.org/#Router-navigate](http://backbonejs.org/#Router-navigate)导航而不是直接 url，试试这个，如果它有效，你可以使用绑定事件处理程序：

```
<li><a href="/" onclick="Router.navigate('/');return false;">Home</a></li>
<li><a href="/login" onclick="Router.navigate('/login');return false;">Login</a></li> 
```

我有点不确定这种设置为轮播附加网址是不寻常的。你在任何地方都有这个工作吗？

# jquery - How to get the ID of a clicked control in jquery?

> ID：14950796
> 
> 赞同：2
> 
> 时间：2013-02-19T05:55:13.980
> 
> 标签：jquery

I have a toggle div and a button, when i clicking button show/hide toggle button.

I use this code for, when clicking anywhere of the page hide the toggle div.

```
 $(document).click(function () {
             var $el = $(".Search");

             // toggle div
             if ($el.is(":visible")) {
                 // fade out
                 $(".Search").toggle("slow");
             }
         }); 
```

My problem is: When clicking on control in toggle button , this function run and hide toggle div.

I want to get id of a clicked control. if control is toggle div don't run this function.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:00:23.890

你这里少了点什么。您应该使用以下代码：

```
$(document).ready(function () {
   $("button[name='give the name of button on which you want to toggle']").click(function(){
     var $el = $(".Search");

         // toggle div
         if ($el.is(":visible")) {
             // fade out
             $(".Search").toggle("slow");
         }
       });
     }); 
```

这肯定会为你工作。我希望是你所要求的。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:01:33.913

看到你必须`.stopPropagation()`：

```
 $('togglebtn').click(function(e){ //<----put your btn's class or id
   e.stopPropagation(); // <---------this will stop the event to bubble to parent
   // your stuff to hide and show.
 });

 $(document).click(function () {
     var $el = $(".Search");
     if ($el.is(":visible")) {
       $(".Search").toggle("slow");
     }
  }); 
```

# ruby-on-rails - Ruby on Rails - @user.create_session wont work

> ID：14950797
> 
> 赞同：0
> 
> 时间：2013-02-19T05:55:15.587
> 
> 标签：ruby-on-rails, ruby

Ok, this issue is getting me pull my hair out. I have this controller action, which creates user. But @user.create_session is never successful, even if @user.save was success.

```
def create
    @user = User.new(params[:user])
    @user.password_changed
    if @user.save
      session[:session] = @user.create_session
    end 
```

The method in User model create_session is this

```
 def create_session
    if self.session.nil? or self.updated_at < 1.month.ago
        begin
            self.session = Crypto.new.salt(50)
        end while User.find_by_session(self.session).nil? == false
        self.save
      end
    return self.session
  end 
```

Now if I do this, it creates session and everything works perfectly fine:

```
def create
    @user = User.new(params[:user])
    @user.password_changed
    session[:session] = @user.create_session 
```

However I would prefer to generate session AFTER the registration, in case validation fails or Im doing excess sql request + have meaningless cookie.

In IRB it works fine either way:

```
1.9.3-p374 :046 > @user = User.last
  User Load (0.2ms)  SELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT 1
 => #<User id: 19, name: "Jkfsdkh", username: "hkjfaskh", password: "$2a$10$jAXv.FAmlZDi7xT.yeP/keri1p9pVnYygaCl0z7YMdpH...", email: "so@fs.cm", email_confirmed: false, salt: "Ju_ILOlqJnAXfc-z6gvO1cJUAguHwhtwBWJCGPDtxRw", session: "Pw0xu1b-gZfn1GEESZM1r2PAjzM4y-B5FFJ2vHKlkokpiM6gkyK...", ip: "127.0.0.1", created_at: "2013-02-19 05:41:11", updated_at: "2013-02-19 05:41:48"> 
1.9.3-p374 :047 > @user.session = nil
 => nil 
1.9.3-p374 :048 > if @user.save
1.9.3-p374 :049?>   @user.create_session
1.9.3-p374 :050?>   end
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE ("users"."email" = 'me@janbirsa.cm' AND "users"."id" != 19) LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE ("users"."username" = 'hkjfaskh' AND "users"."id" != 19) LIMIT 1
   (0.3ms)  UPDATE "users" SET "session" = NULL, "updated_at" = '2013-02-19 05:43:09.960854' WHERE "users"."id" = 19
   (2.8ms)  commit transaction
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."session" = '1_BezpY-5b4oaFhAOiR4zRuKb1mLVbU1MxmZs07dPY9LCKJ_t1XOXR82d8uXkCGjb0Y' LIMIT 1
   (0.0ms)  begin transaction
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE ("users"."email" = 'me@janbirsa.cm' AND "users"."id" != 19) LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE ("users"."username" = 'hkjfaskh' AND "users"."id" != 19) LIMIT 1
   (0.3ms)  UPDATE "users" SET "session" = '1_BezpY-5b4oaFhAOiR4zRuKb1mLVbU1MxmZs07dPY9LCKJ_t1XOXR82d8uXkCGjb0Y', "updated_at" = '2013-02-19 05:43:09.967159' WHERE "users"."id" = 19
   (0.8ms)  commit transaction
 => "1_BezpY-5b4oaFhAOiR4zRuKb1mLVbU1MxmZs07dPY9LCKJ_t1XOXR82d8uXkCGjb0Y" 
1.9.3-p374 :051 > @user.session
 => "1_BezpY-5b4oaFhAOiR4zRuKb1mLVbU1MxmZs07dPY9LCKJ_t1XOXR82d8uXkCGjb0Y" 
1.9.3-p374 :052 > 
```

Also when I am creating session from login controller it works fine too.

EDIT: Here, I re-created what controller does in irb.

```
1.9.3-p374 :001 > new = User.new
 => #<User id: nil, name: nil, username: nil, password: nil, email: nil, email_confirmed: false, salt: nil, session: nil, ip: nil, created_at: nil, updated_at: nil> 
1.9.3-p374 :002 > new.name = 'test'
 => "test" 
1.9.3-p374 :003 > new.username = 'test2'
 => "test2" 
1.9.3-p374 :004 > new.password = 'test123'
 => "test123" 
1.9.3-p374 :005 > new.email = 'test@t.cpm'
 => "test@t.cpm" 
1.9.3-p374 :006 > new.password_changed
 => true 
1.9.3-p374 :007 > if new.save
1.9.3-p374 :008?>   new.create_session
1.9.3-p374 :009?>   end
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@t.cpm' LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'test2' LIMIT 1
Binary data inserted for `string` type on column `password`
  SQL (4.6ms)  INSERT INTO "users" ("created_at", "email", "email_confirmed", "ip", "name", "password", "salt", "session", "updated_at", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 20 Feb 2013 01:32:45 UTC +00:00], ["email", "test@t.cpm"], ["email_confirmed", false], ["ip", nil], ["name", "test"], ["password", "$2a$10$nrWM/es2D/1hrjaBVnNj3esBOEvRm9nILmTNiRvBJG00fUTRuPXui"], ["salt", "WRxgy_hoPPXo5v2QtoN47khXso3ZFfkSdDDB9uvH3P8"], ["session", nil], ["updated_at", Wed, 20 Feb 2013 01:32:45 UTC +00:00], ["username", "test2"]]
   (3.8ms)  commit transaction
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."session" = 'KoBISJTarhdO1ZWFgn8HDk6zNts779QU0NUORIh84IRMFY4f6s4cV2w7BxgAa6pz3Ck' LIMIT 1
   (0.0ms)  begin transaction
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE ("users"."email" = 'test@t.cpm' AND "users"."id" != 22) LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE ("users"."username" = 'test2' AND "users"."id" != 22) LIMIT 1
   (0.3ms)  UPDATE "users" SET "session" = 'KoBISJTarhdO1ZWFgn8HDk6zNts779QU0NUORIh84IRMFY4f6s4cV2w7BxgAa6pz3Ck', "salt" = 'Q-4E-D7xNADTp9_qnSmAg5NATpHv1dWcUtvGExeUll8', "password" = '$2a$10$/aM541saVBBG/mHizdK05OBNfcLFVsMu.3rpnThKs5M71SBdC6aJ.', "updated_at" = '2013-02-20 01:32:45.659951' WHERE "users"."id" = 22
   (2.4ms)  commit transaction
 => "KoBISJTarhdO1ZWFgn8HDk6zNts779QU0NUORIh84IRMFY4f6s4cV2w7BxgAa6pz3Ck" 
1.9.3-p374 :010 > new.session
 => "KoBISJTarhdO1ZWFgn8HDk6zNts779QU0NUORIh84IRMFY4f6s4cV2w7BxgAa6pz3Ck" 
1.9.3-p374 :011 > 
```

Now I still can't figure out, why irb does fine and controller not. Its making me go nuts.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:00:08.543

好吧，我已经将我的代码重构为更有意义的东西。我的注册控制器现在很简单：

```
 def create
    @user = User.new(params[:user])
    @user.password_changed

    if @user.save 
        session[:session] = @user.session
        redirect_to root_url, notice: 'User was successfully created.'
    else
        render action: "new"
    end
  end 
```

会话生成与密码生成联系起来更有意义，因此我将它们合并为一种方法，即在保存之前调用。

```
 before_save :encrypt_password, if: :password_changed?

  def encrypt_password
    self.salt = Crypto.new.salt
    self.password = Crypto.new(self.salt).bcrypt(self.password)
    begin
        self.session = Crypto.new.salt(50)
    end while User.find_by_session(self.session)
  end 
```

# c++ - floor of a matrix in OpenCV 2.4.3

> ID：14950798
> 
> 赞同：3
> 
> 时间：2013-02-19T05:55:18.650
> 
> 标签：c++, opencv, matrix

I have a matrix of type Mat. I want to calculate floor of the Mat. I have searched the Operations on Arrays and The core functionality documentation.

Below is a sample code

```
Mat M = (Mat_<double>(3,3) << 1.2, 0.3, 0.9, 2.3, 1.1, 0.7, 10.2, 10,3, 8.0, 11.6); 
```

I am looking for something like

`floor(M, M)` or

```
M = floor(M) 
```

Can anyone tell me how to do this? Platform C++

# angularjs - 带有闭包的 angularjs 示例

> ID：14950804
> 
> 赞同：2
> 
> 时间：2013-02-19T05:55:50.257
> 
> 标签：angularjs, google-closure

angularjs FAQ 有以下内容：

> **我可以将开源闭包库与 Angular 一起使用吗？**
> 
> 是的，您可以在 Angular 中使用闭包库中的小部件。

但是，我找不到任何示例。

是否有一些示例代码，或者演示如何一起使用两个框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:53:40.283

你到底想在那里看到什么？我不认为集成会出现任何类型的问题，除非 Closure 中有一些组件自己进行 ui-model 绑定。如果两个框架都试图做同样的事情，那么你可能会遇到麻烦。

但是，我真的认为这应该很简单。试试看吧！创建一个简单的 Angular 控制器，它将使用 Closure 创建一些小部件。应该是一件容易的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:25:09.403

在我的项目中，我们一起使用 Angular 和 Closure。我不确定 Closure 库中的“小部件”是什么意思，因为 Closure 库提供了更多基本级别的功能，例如 goog.math 和 goog.i18n。您必须构建自己的 UI 组件。如果你通过 Closure 编译器运行你的 JavaScript，你将只有一个普通的 Angular 应用程序，但能够 goog.include 任何你需要从 Closure 中，例如跨浏览器 goog.array.reduce 或任何你需要的东西. 只要确保关闭所有 Closure 编译器优化（即混淆），因为它会阻止 Angular 找到它的控制器和指令。

# javascript - get value of value attribute usind id in javascript

> ID：14950807
> 
> 赞同：2
> 
> 时间：2013-02-19T05:56:00.367
> 
> 标签：javascript

I want to get value of value attribute using id attribute of html tag.

```
<p id='abc' value='xyz'>123456</p> 
```

and my javascript is

```
var a=document.getElementById(abc).innerHTML; 
alert(a); 
```

this gives me alert "123456" but I want alert function should display me "xyz". How can I do these. I also tried getElementById(abc).value this returns nothing.

OR is there ant way to make tag which is doesn't display on browser. I don't want to display 123456 on browser.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T05:57:20.910

尝试这个

```
var a = document.getElementById('abc').getAttribute('value'); 
alert(a); 
```

请注意，`abc`您问题中的论点未用引号引起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T05:58:34.440

尝试这个

```
alert(document.getElementById("abc").getAttribute("value")); 
```

DOM Element getAttribute() 方法 - 获取链接的目标属性值：

### [演示](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_element_getattribute)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T05:59:38.690

尝试以下操作：

```
var a=document.getElementById("abc").getAttribute("value"); 
```

# java - Thread Join not working

> ID：14950808
> 
> 赞同：1
> 
> 时间：2013-02-19T05:56:03.523
> 
> 标签：java, multithreading, join

Is there any error in the logic of below code ? Trying to use join depending on thread is alive or not. Code is going to infinite loop. I am new to threads not sure about the logic is correct or not, tried referring many articles i couldn't solve it.

```
protected static HashMap<Integer, Object> MatchMap = new HashMap<Integer, Object>();
synchronized(this)
    {
        //HashMap<String, Object> MatchMap = new HashMap<String, Object>();
        String this_object = "";
        Thread at ;
        int cstd_tsk= 0;
        cstd_tsk = this.CSTDN_ID;

        this_object = this.SCA_REF + ":" + this.INSTRMNT_ID + ":" +  this.CSTDN_ID + ":" + this.TXN_TYPE;

        log.error("this_object>>>"+ this_object);
        try{
        while (1==1)
        //for(int n=0; n<100; n++)
        {                               
            if(MatchMap.containsKey(cstd_tsk))
            {
            /*  Thread.currentThread().join();
                MatchMap.remove(this_object);
                MatchMap.put(this_object, (Object)Thread.currentThread());
            */  
              at = (Thread)MatchMap.get(cstd_tsk);
                if(at.isAlive())
                {
                 Thread.currentThread().join();
                 log.error("tsk is_alive>>>"+at.getId());
                }
                else
                {
                    MatchMap.remove(cstd_tsk);
                    MatchMap.put(new Integer(this.CSTDN_ID), (Object)Thread.currentThread());
                    log.error("tsk not_alive>>>");
                    break;
                }                               
            }
            else
            {
                MatchMap.put(new Integer(this.CSTDN_ID), (Object)Thread.currentThread());
                log.error("tsk does not contain>>>"+Thread.currentThread().getId());
                break;
            }
        }
        }
        catch(Exception e)
        {
            e.printStackTrace();
            log.error("Stack trace is - " + e);
            //System.out.println(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:57:40.563

join 等待**该**线程终止。代替

```
Thread.currentThread().join(); 
```

做

```
at.join(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:58:43.983

`while (1==1)`??

这是你的问题 ：）

# ios - Flurry SDK：如何添加事件描述以及如何使用事件参数？

> ID：14950810
> 
> 赞同：0
> 
> 时间：2013-02-19T05:56:10.333
> 
> 标签：ios, events, sdk, flurry

我已经`flurry`针对 iOS 进行了测试。
我发现，我不知道如何以编程方式添加事件描述。
另外，我不明白，出于这个原因我应该使用事件参数。（仅用于分段？）
也许可以添加到参数字典“事件描述”中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:43:57.640

```
[Flurry logEvent:@"EVENT_NAME"]; 
```

您可以使用 logEvent 来计算应用程序会话期间某些事件发生的次数。这对于衡量用户执行各种操作的频率很有用。

参数通过在触发事件时收集元数据来为您的事件提供上下文。

```
[Flurry logEvent:@"EVENT_NAME" withParameters:YOUR_NSDictionary]; 
```

您可以使用此版本的 logEvent 来计算应用程序会话期间某些事件发生的次数，并传递动态参数以与该事件一起记录。事件参数可以作为 NSDictionary 对象传入，其中键和值对象必须是 NSString 对象。例如，您可以记录用户使用了您的搜索框工具，还可以动态记录用户输入的搜索词。

（全面披露：我在 Flurry 的支持团队工作）

# javascript - Javascript：动态添加字段

> ID：14950820
> 
> 赞同：0
> 
> 时间：2013-02-19T05:57:09.613
> 
> 标签：javascript

我有一个看起来像这样的 html 页面：

```
<html>
<head>
<title></title>
<script language="javascript">
    fields = 0;
    function addInput() {
       if ( fields != 3) {
          document.getElementById('text').innerHTML += "<input type='text'         name='clients_form[clients_name]' size='32' maxlength='32' value='' id='clients_form_clients_name' />";
          fields += 1;'
       } else {
          document.getElementById('text').innerHTML += "<br />More then 3 not allowed.";
          document.form.add.disabled = true;
       }
    }
</script>
</head>
<body>
<form name="form">
    <input type="button" onclick="addInput()" name="add" value="Add More" />
</form>
<div id="text">

</div>
</body>
</html> 
```

这对我来说非常好。单击按钮时，它会添加文本字段。但是，我还有另一个选择标签，也需要在单击按钮时动态添加。选择表格如下：

```
<select id="client_category_name" name="client_category[name]">
   <option value="">Select Category</option>
   <option value="1">internal</option>
   <option value="2">external</option>
   <option value="3">others</option>
</select> 
```

**我们如何在输入标签旁边添加这个选择标签。**我是一名 ruby​​ on rails 开发人员，发现很难实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:14:58.217

希望这可以帮助：

```
<html>
<head>
<title></title>
<script >
fields = 0;
function addInput() {
if (fields != 3) {
document.getElementById('text').innerHTML += "<input type='text' name='clients_form[clients_name]' size='32' maxlength='32' value='' id='clients_form_clients_name_"+fields+"' />"+
'<select id="client_category_name_'+fields+'" name="client_category[]"><option value="">Select Category</option><option value="1">internal</option><option value="2">external</option><option value="3">others</option></select>';
fields = fields+ 1;
} else {
document.getElementById('text').innerHTML += "<br />More then 3 not allowed.";
document.form.add.disabled=true;
}
}
</script>
</head>
<body>
<form name="form">
<input type="button" onclick="addInput();" name="add" value="Add More" />
</form>
<div id="text">

</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:06:39.130

好的，假设您已经拥有[JQuery](http://jquery.com/)库

```
$("#text").append("<input type='text' name='clients_form[clients_name]' size='32' maxlength='32' value='' id='clients_form_clients_name' />"); 
```

同样`select`适用于可读代码。你可以先把它放在一个变量上

```
var mySelect ="";
mySelect += '<select id="client_category_name" name="client_category[name]">';
mySelect += '<option value="">Select Category</option>'; 
```

ETC....

```
$("#text").append(mySelect); 
```

# apache - 将嵌套目录重定向到 .php

> ID：14950821
> 
> 赞同：1
> 
> 时间：2013-02-19T05:57:09.387
> 
> 标签：apache, .htaccess

我想将某个目录下的合法目录名重定向到 PHP 文件。我发现[这个答案](https://stackoverflow.com/a/3604160/8047)似乎是说我可以在根 .htaccess 中做这样的事情：

```
RewriteEngine on
RewriteRule /([^/]+) processDir.php?dir=$1 [B,QSA] 
```

我认为这是我正在寻找的，但有没有办法：

*   将其限制为仅目录，但允许嵌套目录？
*   仅过滤目录：我不想处理文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:30:02.970

我认为您正在寻找的是`RewriteCond`，它可以让您有条件地应用重写规则。这个检查某物是否是目录：

```
RewriteCond %{REQUEST_FILENAME} -d 
```

您可以通过将其放在您的 上方来使用它`RewriteRule`，如下所示：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule /([^/]+) processDir.php?dir=$1 [B,QSA] 
```

这将适用于您的问题或您的答案中的方法，需要注意的重要一点是，`-d`在应用您的规则之前，该标志首先检查请求是否为有效目录，这正是您想要的。

据我所知，您问题的第二部分是关于嵌套目录的。就目前而言，您的正则表达式专门向下寻找一个目录（没有斜杠）。如果你想改变它，你可以这样做：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule /?some_dir/(.*) processDir.php?dir=$1 [B,QSA] 
```

这将采用下面的任何有效目录`some_dir`并将其输入到您的 php 文件中。

最后要注意的一件事是，您不需要将所有这些都放入根`.htaccess`文件中。您可以将`.htaccess`文件放在要重写的目录中。以一种或另一种方式执行此操作没有太大区别，但我发现如果您不确定自己在做什么，它可以稍微简化语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:32:55.270

I was going to delete this question, but someone favorited it, so I'll answer it instead.

Use an .htaccess like this

```
RewriteEngine on
RewriteRule ([^/]*)/$ processDir.php [B,QSA] 
```

and then your processDir.php can work with this variable instead of using a get:

```
<?
dir is <?php
echo $_SERVER["REQUEST_URI"];
?> 
```

The main modification I made to the regex (that somebody will later fix) is to insist that a slash is at the end of the string.

# audio - sox.exe - 将单声道人声与立体声音乐混合

> ID：14950823
> 
> 赞同：4
> 
> 时间：2013-02-19T05:57:15.727
> 
> 标签：audio, sox

sox.exe的所有组合方法我都试过了，包括sequence、mix、merge、multiply等等。

我无法将单声道音轨与立体声音乐音轨混合，并将单声道音轨置于混音的中心。

使用音频文件在混音/弹跳中同时播放的任何方法都会将单声道音轨拍打到左声道。我希望它很好地融入其中，但不知道如何让它发挥作用。

任何帮助将不胜感激。它在批处理脚本中使用，并且必须是一个无需用户干预即可运行的命令，即时指定内容：2+ 个文件，全部一起播放，保持立体声和单声道原样，输出一个文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-02T23:41:16.057

将人声轨道放在中心意味着以相同的音量将其添加到两个通道。你可以这样做：

```
sox -M stereo.wav vocal.wav result.wav remix -m 1,3 2,3 
```

在这里，`-M`（或`--combine=merge`）告诉 SoX 合并所有输入文件的所有通道。来自的立体声通道`stereo.wav`将成为通道 1 和 2，来自`vocal.wav`通道 3 的单声道通道。然后，`remix`效果允许以不同的方式混合它们。与标准的组合方法相比，它可以更好地控制过程。

这里，`1,3`将第一个输出通道描述为通道 1 和通道 3 的总和（混合​​），即原始左音乐通道和人声轨道。因此，`2,3`对于第二输出声道，意味着右音乐声道和人声轨道的总和。

可能会出现削波，或者与背景音乐相比，人声轨道太大或太软。如果发生这种情况，可以通过添加通道修改器来纠正这种情况`p-5`（将音量降低 5 dB）：

```
remix -m 1p-5,3 2p-5,3 
```

如果相对音量正常但发生削波，则自动缩放选项之一可能也足以解决它（`remix -a 1,3 2,3`或`remix -p 1,3 2,3`）。

这适用于已知数量的输入文件，您知道哪个是哪个。为了自动处理任意数量的单声道/立体声输入文件，需要一些脚本来区分单声道和立体声文件并构造适当的 SoX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T19:48:18.177

您可以使用音频库将单声道人声转换为立体声`SOX`，之后您可以将其与立体声音乐混合，没有任何问题。

以下示例将单声道音频文件转换为立体声。使用选项`-c`指定通道数。

`$ sox mono.wav -c 2 stereo.wav`

来源：[http ://www.thegeekstuff.com/2009/05/sound-exchange-sox-15-examples-to-manipulate-audio-files/](http://www.thegeekstuff.com/2009/05/sound-exchange-sox-15-examples-to-manipulate-audio-files/)

# c# - TextBlock 中的上标或下标

> ID：14950827
> 
> 赞同：3
> 
> 时间：2013-02-19T05:57:34.163
> 
> 标签：c#, xaml, windows-8, windows-store-apps

```
<TextBlock Foreground="Black" FontSize="50" FontFamily="Segoe UI">
    <Run>Normal Text</Run>
    <Run Typography.Variants="Superscript" Text="Superscript123"/>
    <Run Typography.Variants="Subscript" Text="Subscript123"/>
</TextBlock> 
```

下面是我的屏幕截图。超级/子脚本中似乎不允许某些字符。 ![在此处输入图像描述](../Images/7c1afb0bb5d5f0765f7be890fe752d06.png)

其实我想放一个**®**符号我得到的是

![在此处输入图像描述](../Images/df24042268fe37190b63ff34d38ab9fe.png)

我想要的是

![在此处输入图像描述](../Images/32e2d0a4e7a1466546a0d22c9769159e.png)

**PS**我找到了这个答案[https://stackoverflow.com/a/3435675/468724](https://stackoverflow.com/a/3435675/468724)但是没有这样的属性`BaselineAlignment`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:09:43.577

要么使用`Segoe WP`字体

或者可以这样做

```
<StackPanel Orientation="Horizontal">
    <TextBlock FontFamily="Segoe UI" FontSize="16" Text"Normal Text"/>
    <TextBlock FontFamily="Segoe UI" FontSize="9" Text="&#174;"/>
</StackPanel> 
```

我使用的商标符号字体减少了 60%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T20:48:08.097

这对于使用 VS2015 在我的屏幕上的 TextBlock 中运行的订阅来说看起来不错：

```
<Style TargetType="{x:Type Run}" x:Key="Sub">
    <Setter Property="FontSize" Value="10"/>        
    <Setter Property="BaselineAlignment" Value="TextBottom"/>
</Style> 
```

它只是比 Typography.Variants = Subscript 低一点，它似乎只使用了一个较小的字体

# java - 错误：构造函数 MainActivity.ScreenSlidePagerAdapter(FragmentManager) 未定义

> ID：14950833
> 
> 赞同：5
> 
> 时间：2013-02-19T05:58:03.770
> 
> 标签：java, android, android-viewpager

我试图在[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)中实现一个 android 项目，我在一个类中有一个错误

```
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;

public class MainActivity extends FragmentActivity {
 private static final int NUM_PAGES = 5;
 private ViewPager mPager;
 private PagerAdapter mPagerAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager());
    mPager.setAdapter(mPagerAdapter);
    mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            // When changing pages, reset the action bar actions since they are dependent
            // on which page is currently active. An alternative approach is to have each
            // fragment expose actions itself (rather than the activity exposing actions),
            // but for simplicity, the activity provides the actions in this sample.
            invalidateOptionsMenu();
        }
    });
}
@SuppressLint("NewApi")
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.activity_main, menu);

    menu.findItem(R.id.action_previous).setEnabled(mPager.getCurrentItem() > 0);

    // Add either a "next" or "finish" button to the action bar, depending on which       page
    // is currently selected.
    MenuItem item = menu.add(Menu.NONE, R.id.action_next, Menu.NONE,
            (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1)
                    ? R.string.action_finish
                    : R.string.action_next);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // Navigate "up" the demo structure to the launchpad activity.
            // See http://developer.android.com/design/patterns/navigation.html for more.
            NavUtils.navigateUpTo(this, new Intent(this, MainActivity.class));
            return true;

        case R.id.action_previous:
            // Go to the previous step in the wizard. If there is no previous step,
            // setCurrentItem will do nothing.
            mPager.setCurrentItem(mPager.getCurrentItem() - 1);
            return true;

        case R.id.action_next:
            // Advance to the next step in the wizard. If there is no next step, setCurrentItem
            // will do nothing.
            mPager.setCurrentItem(mPager.getCurrentItem() + 1);
            return true;
    }

    return super.onOptionsItemSelected(item);
}

     private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
      public ScreenSlidePagerAdapter(FragmentManager fm) {
         super(fm);
     }

 public Fragment getItem(int position) {
        return ScreenSlidePageFragment.create(position);
    }

    public int getCount() {
        return NUM_PAGES;
    }
}
    } 
```

我正在 android 4.2 中构建项目。

编辑：我已将代码更改为

```
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
        super(fm);
    } 
```

和

```
 @Override
    public android.support.v4.app.Fragment getItem(int position) {
        return Firstframe.create(position);
    } 
```

然后发生错误

```
mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager()); 
```

**错误 ：**`The constructor MainActivity.ScreenSlidePagerAdapter(FragmentManager) is undefined`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T23:31:11.177

而不是这个：

```
mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager()); 
```

做这个：

```
mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager()); 
```

因为

`getFragmentManager()`搭配`import android.app.FragmentManager`

和

`getSupportFragmentManager()`搭配`android.support.v4.app.FragmentManager`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T05:22:19.347

将您的 FragmentManager 更改为 android.support.v4.app.FragmentManager。导入

> android.support.v4.app.FragmentStatePagerAdapter；**ScreenSlideActivity.java**的以下代码 ：

公共类 ScreenSlideActivity 扩展 FragmentActivity {

```
private static final int NUM_PAGES = 5;

private ViewPager mPager;

private PagerAdapter mPagerAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_slide);

    // Instantiate a ViewPager and a PagerAdapter.
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
    mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {

            invalidateOptionsMenu();
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.activity_screen_slide, menu);

    menu.findItem(R.id.action_previous).setEnabled(mPager.getCurrentItem() > 0);

    MenuItem item = menu.add(Menu.NONE, R.id.action_next, Menu.NONE,
            (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1)
                    ? R.string.action_finish
                    : R.string.action_next);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:

            NavUtils.navigateUpTo(this, new Intent(this, MainActivity.class));
            return true;

        case R.id.action_previous:

            mPager.setCurrentItem(mPager.getCurrentItem() - 1);
            return true;

        case R.id.action_next:

            mPager.setCurrentItem(mPager.getCurrentItem() + 1);
            return true;
    }

    return super.onOptionsItemSelected(item);
}

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
        super(fm);
    }

    @Override
    public android.support.v4.app.Fragment getItem(int position) {
        return ScreenSlidePageFragment.create(position);
    }

    @Override
    public int getCount() {
        return NUM_PAGES;
    }
}} 
```

**ScreenSlidePageFragment.java**的以下代码 ：

公共类 ScreenSlidePageFragment 扩展片段 {

```
public static final String ARG_PAGE = "page";

private int mPageNumber;

public static android.support.v4.app.Fragment create(int pageNumber) {
    android.support.v4.app.Fragment fragment = new android.support.v4.app.Fragment();
    Bundle args = new Bundle();
    args.putInt(ARG_PAGE, pageNumber);
    fragment.setArguments(args);
    return fragment;
}

public ScreenSlidePageFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mPageNumber = getArguments().getInt(ARG_PAGE);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    ViewGroup rootView = (ViewGroup) inflater
            .inflate(R.layout.fragment_screen_slide_page, container, false);

    // Set the title view to show the page number.
    ((TextView) rootView.findViewById(android.R.id.text1)).setText(
            getString(R.string.title_template_step, mPageNumber + 1));

    return rootView;
}

public int getPageNumber() {
    return mPageNumber;
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T10:47:24.723

```
 #For Full code

package com.team.test;

    import android.content.Intent;
    import android.content.pm.ActivityInfo;
    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.FragmentStatePagerAdapter;
    import android.support.v4.app.NavUtils;
    import android.support.v4.view.PagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.view.Menu;
    import android.view.MenuItem;

    /**
     * Demonstrates a "screen-slide" animation using a {@link ViewPager}. Because
     * {@link ViewPager} automatically plays such an animation when calling
     * {@link ViewPager#setCurrentItem(int)}, there isn't any animation-specific
     * code in this sample.
     * 
     * <p>
     * This sample shows a "next" button that advances the user to the next step in
     * a wizard, animating the current screen out (to the left) and the next screen
     * in (from the right). The reverse animation is played when the user presses
     * the "previous" button.
     * </p>
     * 
     * @see ScreenSlidePageFragment
     */
    public class MenuActivity extends FragmentActivity {
        /**
         * The number of pages (wizard steps) to show in this demo.
         */
        private static final int NUM_PAGES = 6;

        /**
         * The pager widget, which handles animation and allows swiping horizontally
         * to access previous and next wizard steps.
         */
        private ViewPager mPager;

        /**
         * The pager adapter, which provides the pages to the view pager widget.
         */
        private PagerAdapter mPagerAdapter;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            setContentView(R.layout.activity_screen_slide);

            // Instantiate a ViewPager and a PagerAdapter.
            mPager = (ViewPager) findViewById(R.id.pager);
            mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
            mPager.setAdapter(mPagerAdapter);
            mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    // When changing pages, reset the action bar actions since they
                    // are dependent
                    // on which page is currently active. An alternative approach is
                    // to have each
                    // fragment expose actions itself (rather than the activity
                    // exposing actions),
                    // but for simplicity, the activity provides the actions in this
                    // sample.
                    invalidateOptionsMenu();
                }
            });
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            super.onCreateOptionsMenu(menu);
            getMenuInflater().inflate(R.menu.activity_screen_slide, menu);

            menu.findItem(R.id.action_previous).setEnabled(
                    mPager.getCurrentItem() > 0);

            // Add either a "next" or "finish" button to the action bar, depending
            // on which page
            // is currently selected.
            MenuItem item = menu
                    .add(Menu.NONE,
                            R.id.action_next,
                            Menu.NONE,
                            (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1) ? R.string.action_finish
                                    : R.string.action_next);
            item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM
                    | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case android.R.id.home:
                // Navigate "up" the demo structure to the launchpad activity.
                // See http://developer.android.com/design/patterns/navigation.html
                // for more.
                NavUtils.navigateUpTo(this, new Intent(this, Login.class));
                return true;

            case R.id.action_previous:
                // Go to the previous step in the wizard. If there is no previous
                // step,
                // setCurrentItem will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() - 1);
                return true;

            case R.id.action_next:
                // Advance to the next step in the wizard. If there is no next step,
                // setCurrentItem
                // will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() + 1);
                return true;
            }

            return super.onOptionsItemSelected(item);
        }

        /**
         * A simple pager adapter that represents 5 {@link ScreenSlidePageFragment}
         * objects, in sequence.
         */
        public class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
            public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
                super(fm);
            }

            @Override
            public android.support.v4.app.Fragment getItem(int position) {
                return ScreenSlidePageFragment.create(position);
            }

            @Override
            public int getCount() {
                return NUM_PAGES;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T06:21:37.150

正如我通过您的代码看到的那样，我看到`FragmentManager`您的构造函数中的类与您在代码中导入的类不兼容，`import android.app.FragmentManager`并且`android.support.v4.app.FragmentManager`

只需检查`FragmentManager`在这种情况下您真正想要使用的类，您的问题就应该得到解决。谢谢。

IE。根据您的决定选择：

```
public ScreenSlidePagerAdapter(android.app.FragmentManager fm) {
        super(fm);
    } 
```

或者

```
public ScreenSlidePagerAdapter(android.support.v4.app.FragmentManager fm) {
        super(fm);
    } 
```

并使用适当的类在您的类中导入`MainActivity`。

# javascript - 如何在淘汰赛中验证复选框

> ID：14950834
> 
> 赞同：9
> 
> 时间：2013-02-19T05:58:04.233
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js 和 knockout.validation 插件。我正在尝试验证复选框，如果它被选中而不是其有效，否则无效。所以为此我在淘汰赛中创建了一个自定义验证属性：

[**示例小提琴**](http://jsbin.com/axuyid/8/edit)

```
ko.validation.rule['checked'] = {
    validator: function (value) {
        if (!value) {
            return false;
        }
        return true;
    }
}; 
```

我的视图模型是：

```
function VM()
{
    var self = this;
    self.Approve = ko.observable(false).extend({
        checked: { message: 'Approval required' }
    });
    self.Errors = ko.validation.group(self);
    self.Validate = function(){
        if(self.Errors().length > 0)
        self.Errors.showAllMessages();
    };
} 
```

但验证不起作用。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T06:18:51.213

您当前的方法存在一些问题：

1.  你错过了`ko.validation.rule`它应该是`ko.validation.rules`
2.  `ko.validation.registerExtenders();`在您第一次尝试使用自定义验证器之前，应该完成自定义规则定义和调用。
3.  为了显示验证，您需要使用绑定将其绑定到某处`validationMessage`：

    ```
    <span data-bind='validationMessage: Approve'></span> 
    ```

所以固定脚本：

```
ko.validation.rules['checked'] = {
    validator: function (value) {
      console.log(value);
        if (!value) {
            return false;
        }
        return true;
    }
};

ko.validation.registerExtenders();

function VM()
{
  var self = this;  
  self.Approve = ko.observable(false).extend({
    checked: { message: 'Approval required' }
  });

  self.Errors = ko.validation.group(self);

  self.Validate = function(){    
     if(self.Errors().length > 0)
       self.Errors.showAllMessages();
  };
}

ko.applyBindings(new VM()); 
```

和 HTML：

```
<input type="checkbox" data-bind="checked: Approve" />  
<span data-bind='validationMessage: Approve'></span>
<button type="button" data-bind="click: Validate">Submit</button> 
```

您可以在这里试用：[演示](http://jsbin.com/olosuk/1/edit)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-13T13:19:28.067

您还可以使用 equal 本机验证器：

```
self.Approve = ko.observable(false).extend({
    equal: { params: true, message: 'check must be ticked' }
  }); 
```

# jdbc - 使用单个 Connection 对象连接两个 MySQL 数据源

> ID：14950835
> 
> 赞同：0
> 
> 时间：2013-02-19T05:58:09.453
> 
> 标签：jdbc, ejb-3.0, datasource, glassfish-3, sqldatasource

实际上我需要连接在我的应用程序服务器中创建的两个**mysql数据源。**我正在使用**JPA2.0**

我尝试了以下代码。但我收到异常“ ***java.lang.IllegalStateException：本地事务已经有 1 个非 XA 资源：无法添加更多资源。*** ”。

```
import com.google.common.collect.Lists;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.List;
import javax.annotation.Resource;
import javax.sql.DataSource;

public class SampleClass {

@Resource(name = "jdbc/source1")
DataSource source1;

@Resource(name = "jdbc/source2")
DataSource source2;

final List<String> list = Lists.newArrayList("Source1", "Source2");

public void getresponse() throws Exception {

    for (String source : list) {
        Connection connection = null;
        Statement statement = null;
        try {
            connection = getConnection(source);
            statement = connection.createStatement();
        } catch (SQLException ex) {
        } finally {
            statement.close();
            connection.close();
        }
    }
}

public Connection getConnection(String source) {
    Connection conn = null;
    try {
    if(source.equalsIgnoreCase("Source1")){
        conn = source1.getConnection();
    } else if(source.equalsIgnoreCase("Source2")){
        conn = source2.getConnection();
    }
    } catch(SQLException se) {

    }

    return conn;
 }
} 
```

对于我在代码中的逻辑。*我需要使用单个 Connection 对象连接所有数据源*。

如何关闭现有连接 ( **conn** ) 对象并连接下一个数据源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:22:42.830

根据您的需要，您可以在其中一个数据源上启用“非事务连接”，或者您必须在两个数据源上都使用 XA 数据源。

要在 Glassfish 3 管理员中启用“非事务连接”，请导航到 JDBC -> JDBC 连接池 -> YourPoolYouWantToEbleNontransactional，然后单击事务部分下的启用复选框。请注意非事务性连接意味着什么。

您还可以使用本质上实现两阶段提交的 XA 数据源驱动程序。谷歌告诉我数据源类名是 'com.mysql.jdbc.jdbc2.optional.MysqlXADataSource' 但我不知道它是否分布在标准的 mysql jdbc 分布中。

# windows-8 - 使用 WinRTBehaviours 拖动后如何恢复起始位置？

> ID：14950839
> 
> 赞同：0
> 
> 时间：2013-02-19T05:58:32.750
> 
> 标签：windows-8, windows-runtime

我有一个使用 WinRTBehaviours 拖动的图像。如果不需要目标位置，我想将其恢复到起始位置。虽然我使用画布属性设置起始位置，但它显示在另一个位置。任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:19:42.573

只是在变量 OnLoad 事件中保存位置？然后从变量中设置位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:29:07.587

WinRTBehaviors 不包括实际的功能行为。如果您的意思是[Win8nl 中的 DragFlickBehavior，](http://win8nl.codeplex.com/SourceControl/changeset/view/21543#274325)那么它似乎不支持它，尽管您可以轻松添加该支持 - 只需处理 ManipulationStarting 和 ManipulationCompleted 事件。

# linq - 使用按列分组 LINQ

> ID：14950842
> 
> 赞同：0
> 
> 时间：2013-02-19T05:58:45.673
> 
> 标签：linq

我有下表

```
Date              GRP                Open

1/1/2011         A                    2
1/1/2011         B                    3
2/2/2011         C                    5 
```

组列是一些名为“组即“A + B= Y 和 C 构成 Z”的一部分

我需要按日期和 GRP 分组的 Open 的总和分别作为列

```
Date              Y     Z     

 1/1/2011         5     0
 2/2/2011         0     5 
```

以下是我尝试过的代码

```
List<string> Y = new List<string>() { "A", "B" };
List<string> C = new List<string>() { "Z" };
from item in temp group item by new { RD = item.Field<DateTime>("date"),
Group= 
(Y.Contains(item.Field<string>("GRP")) ? "Y" :
 C.Contains(item.Field<string>"GRP")) ? "Z" :                                                 
                              }
                                             into grptbl
                                             select new
                                             {
                                                 RD = grptbl.Key.RD,
                                               A=grptbl.Where(x=>x.Field<string>("Group")=="Y").Sum(x=>x.Field<Int64>("Open")) 
,
                 Z= grptbl.Where(x=>x.Field<string>("Group")=="Z").Sum     (x=>x.Field<Int64>("Open")) }; 
```

看起来不错，但它抱怨“组”列在 grptable 中不存在，在 select 子句中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:35:20.883

回答了

```
List<string> Y = new List<string>() { "A", "B" };
List<string> C = new List<string>() { "Z" };
from l in (from item in temp group item by new { 
 RD = item.Field<DateTime>("date"),
 Y=Y.Contains(item.Field<string>("GRP")) ? "Y" :item.Field<Int64>("open") : 0,
 Z=C.Contains(item.Field<string>"GRP")) ? "Z":item.Field<Int64>("open") :0                                                 
                          }
                                         into grptbl
                                         select new
                                         {
                                             RD = grptbl.Key.RD,
                                           Y=grptbl.Key.Y,
                                           Z=grptbl.Key.Z
                                          } )
    group l by new {l.RD} into g
    {
     RD=g.Key.RD,
     Y=g.Sum(x=>x.Y),
     Z=g.Sum(x=>x.Z)}; 
```

# ios - Unity iOS 禁用空格键输入的方法，或者如果可能的话

> ID：14950849
> 
> 赞同：0
> 
> 时间：2013-02-19T05:59:00.663
> 
> 标签：ios, input, keyboard, unity3d

一直在尝试想出一些在使用 iOS 键盘时禁用空格键输入的方法。我需要根据结果字符串检查从键盘输入的字符串，并且当输入空格键时它返回不正确，因为它们显然是字符串的一部分。

我尝试了以下方法：

```
if (keyboard.text.Length < 12 && !Event.current.Equals(Event.KeyboardEvent("space")))
{                   
    answerTextMesh.text = keyboard.text.ToLower();
    answerTextMesh.Commit();
} 
```

有没有办法禁用iOS键盘空格键上的输入，或者我应该尝试在输入字符串时去掉空格？

任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:22:17.877

我假设您正在使用 JavaScript。

我找到了这个片段，也许它会对你有所帮助！我自己还没有测试过：

```
private var text = "Pressing Space won't work!";

function DisableKey( key : KeyCode )
{
    if( Event.current.keyCode == key && ( Event.current.type == EventType.KeyUp || Event.current.type == EventType.KeyDown ) )
    {
         Event.current.Use();
    }
}

function OnGUI()
{
     DisableKey( KeyCode.Space );
     text = GUILayout.TextArea( text );
} 
```

# android - 如何使您的 EditText 斜体？

> ID：14950850
> 
> 赞同：0
> 
> 时间：2013-02-19T05:59:02.277
> 
> 标签：android

```
 android:textStyle="italic" 
```

这不会使editText 斜体。

```
<EditText
            android:id="@+id/editTxt"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textStyle="italic"
            android:singleLine="true" 
            android:textSize="14dp"
            android:background="@null"
            android:gravity="center"
            android:inputType="textNoSuggestions" 

            >
        </EditText> 
```

你能帮忙吗？非常感谢你。

我现在发现 Galaxy Note 2 有问题，当您尝试将 editText 中的文本设置为斜体时。2013 年 4 月 18 日

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:04:36.210

EditText 继承自 TextView

```
editText.setTypeface(null, Typeface.BOLD_ITALIC);
editText.setTypeface(null, Typeface.BOLD);
editText.setTypeface(null, Typeface.ITALIC); 
```

使用你想要的。

**更新**

你使用自定义字体吗？尝试

```
mTextView.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC), Typeface.ITALIC) 
```

**编辑** 我认为它是一个 android 平台问题。

查看[问题 22867：使用斜体文本样式时布局预览不正确](http://code.google.com/p/android/issues/detail?id=22867)

它不会显示在布局的图形表示中，但在您构建和运行应用程序时可以正常工作。

**更新：** 如果您想预览设计 xml 布局，那么只需使用

```
android:typeface="serif" 
```

在这部`android:textStyle="italic"`作品中。并且文本将在图形布局编辑器中以斜体显示。

它仅适用于这种**衬线字体**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:05:19.107

要将文本设置为斜体，您可以执行以下操作：

`EditText.setText(Html.fromHtml("<small><i>" + "Text Hint Here" + "</i></small>"));`

如果您希望斜体文本作为提示 - 例如当 EditText 为空时 - 您必须实现一个方法来检查文本长度，并且当它等于零时，应用上面的代码。

试试这个**更新的**选项： -

创建新样式：-

```
 <style name="editStyle">
            <item name="android:textStyle">italic</item>
        <item name="android:textColor">#000000</item>
    </style> 
```

并以这种方式使用它 - 它有效:)

```
 <EditText
        android:id="@+id/editTxt"
        style="@style/editStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:hint="EditText"
        android:singleLine="true"
        android:textSize="14dp" >
</EditText> 
```

**快照**：- ![工作快照](../Images/4f4fae64487daa909a9580e256a22d55.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T06:02:37.027

尝试这个

```
youredittext.setTypeface(null,Typeface.ITALIC); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T06:04:18.073

内部字符串

```
<string name="username"><i>Username</i></string> 
```

xml文件..

```
<EditText android:hint="@string/username" /> 
```

# php - 使用子域值作为 $_GET 变量

> ID：14950852
> 
> 赞同：0
> 
> 时间：2013-02-19T05:59:17.057
> 
> 标签：php, mod-rewrite, get, subdomain

目前，我的网站 url 使用`mod_rewrite`$_GET 变量来加载不同的内容。像这样：
`mysite.com/subsite/var1/var2`

我想将该格式更改为如下所示：
`subsite.mysite.com/var1/var2`

有没有一种简单的方法可以做到这一点，还是我需要完全重新设计我网站的后端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:06:25.303

像这样的东西应该工作，

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?[^.]+\.mysite\.com.*$
RewriteRule (.*) subsite/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:08:28.627

使用以下代码，这将适用于您想要的。

```
 Options +FollowSymlinks
    RewriteEngine on
    RewriteRule ^([a-zA-Z]).mysite.com\$ mysite.com/$1 [NC] 
```

# c# - 优化此 C# 算法

> ID：14950853
> 
> 赞同：11
> 
> 时间：2013-02-19T05:59:23.587
> 
> 标签：c#, algorithm

这是一个算法问题，我有解决方案，但它有性能问题。

> **问题描述**
> 
> 有 n 个变量和 m 个要求。需求表示为 (x <= y)，这意味着第 x 个变量必须小于或等于第 y 个变量。为每个变量分配小于 10 的非负数。请计算符合所有要求的不同作业的数量。当且仅当在这两个赋值中为至少一个变量分配了不同的数字时，两个赋值是不同的。将答案模数为 1007。
> 
> **输入格式：**
> 
> 输入的第一行包含两个整数 n 和 m。然后是 m 行，每行包含 2 个空格分隔的整数 x 和 y，这意味着一个要求 (x <= y)。
> 
> **输出格式：**
> 
> 在一行中输出答案。
> 
> **约束：**
> 
> 0 < n < 14
> 
> 0 < 米 < 200
> 
> 0 <= x, y < n
> 
> **样本输入：**
> 
> 6 7
> 
> 1 3
> 
> 0 1
> 
> 2 4
> 
> 0 4
> 
> 2 5
> 
> 3 4
> 
> 0 2
> 
> **样本输出**：
> 
> 1000

下面是我的解决方案。当 n=13 和 m=199 时，需要很长时间才能得到结果，但可接受的时间是 5 秒。

那么有人能想出更好的方法来进一步优化吗？谢谢你。

我目前的解决方案：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication81
{
    class Program
    {
        const int N = 10;
        static List<Condition> condition = new List<Condition>();
        static void Main(string[] args)
        {
            string[] line1 = Console.ReadLine().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
            int n = int.Parse(line1[0]);
            int m = int.Parse(line1[1]);

            for (int i = 0; i < m; i++)
            {
                string[] line = Console.ReadLine().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
                condition.Add(new Condition()
                {
                    X = int.Parse(line[0]),
                    Y = int.Parse(line[1])
                });
            }

            //
            List<int[]> rlist = new List<int[]>();

            for (int j = 0; j < N; j++)
            {
                int[] assignments = new int[n];
                for (int i = 0; i < n; i++)
                    assignments[i] = -1;
                assignments[0] = j;
                rlist.Add(assignments);
            }
            for (int j = 1; j < n; j++)
            {
                List<int[]> rlist2 = new List<int[]>(rlist.Count*5);
                for (int k = 0; k < rlist.Count; k++)
                {
                    for (int l = 0; l < N; l++)
                    {
                        rlist[k][j] = l;
                        if (CanPassCondition(rlist[k]))
                            rlist2.Add((int[])rlist[k].Clone());
                    }
                }
                rlist = rlist2;
            }

            Console.Write(rlist.Count % 1007);
        }

        private static bool CanPassCondition(int[] p)
        {
            foreach (var c in condition)
            {
                if (p[c.X] == -1 || p[c.Y] == -1)
                    continue;

                if (p[c.X] > p[c.Y])
                    return false;
            }
            return true;
        }
    }

    class Condition
    {
        public int X;
        public int Y;

        public override string ToString()
        {
            return string.Format("x:{0}, y:{1}", X, Y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:01:47.237

这是 Java 中的一个解决方案，即使在 n=13、m=199 的情况下，它对我来说也能很快工作：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;

public class Assignments
{
    private static Map <String, Long> solutions = new HashMap <String, Long> ();

    private static boolean [][] constraints;

    private static long solve (int n, int [] low, int [] high)
    {
        StringBuilder sb = new StringBuilder ();

        for (int i = 0; i < n; i++)
        {
            sb.append (low [i]);
            sb.append (high [i]);
        }

        String signature = sb.toString ();

        Long result = solutions.get (signature);
        if (result == null)
        {
            result = Long.valueOf (doSolve (n, low, high));
            solutions.put (signature, result);
        }

        return result.longValue ();
    }

    private static long doSolve (int n, int [] low, int [] high)
    {
        if (n == 0) return 1;
        else
        {
            long result = 0;

            for (int i = low [n - 1]; i <= high [n - 1]; i++)
            {
                int [] l = new int [n - 1];
                int [] h = new int [n - 1];

                for (int j = 0; j < n - 1; j++)
                {
                    l [j] = constraints [n - 1][j] ? Math.max (low [j], i) : low [j];
                    h [j] = constraints [j][n - 1] ? Math.min (high [j], i) : high [j];
                }

                result += solve (n - 1, l, h);
            }

            return result;
        }
    }

    public static void main(String[] args) throws Exception
    {
        BufferedReader reader = 
            new BufferedReader (
                new InputStreamReader(System.in));

        String nm = reader.readLine ();
        String [] pair = nm.split(" ");
        int n = Integer.parseInt(pair [0]);
        int m = Integer.parseInt(pair [1]);

        constraints = new boolean [n][];
        for (int i = 0; i < n; i++)
            constraints [i] = new boolean [n];

        int [] low = new int [n];
        int [] high = new int [n];
        for (int i = 0; i < n; i++)
            high [i] = 9;

        for (int i = 0; i < m; i++)
        {
            String ab = reader.readLine();
            pair = ab.split (" ");
            int a = Integer.parseInt(pair [0]);
            int b = Integer.parseInt(pair [1]);
            constraints [a][b] = true;
        }

        System.out.println(solve (n, low, high));
    }
} 
```

实际上，一旦你有 13 个变量，你可能只有 156 (13 * 12) 个有意义的约束，但是。

样本输入：

```
13 1
3 8 
```

输出：

```
5500000000000 
```

另一个示例输入：

```
13 12
0 1
1 2
2 3
3 4
4 5
5 6
6 7
7 8
8 9
9 10
10 11
11 12 
```

输出：

```
497420 
```

# html - 我需要将 JSP 中的字符串转换为标题大小写

> ID：14950857
> 
> 赞同：2
> 
> 时间：2013-02-19T05:59:50.800
> 
> 标签：html, css, jsp, jstl

我在 JSP 标记文件中有一个变量，如下所示

```
<span class="breadcrumbName">${breadcrumb.name}</span> 
```

我需要将此变量中的文本/字符串转换为标题大小写...有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:23:13.197

使用以下方法解决

```
${fn:toUpperCase(fn:substring(breadcrumb.name, 0, 1))}${fn:toLowerCase(fn:substring(breadcrumb.name, 1, -1))} 
```

确保你有以下

```
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T06:09:19.850

我不认为你可以将字符串的大小写转换为 el，我可能错了

您可以使用 css 通过对 span 标签应用适当的样式来找到解决方法

```
<span style="text-transform: capitalize;"
 class="breadcrumbName">${breadcrumb.name}</span> 
```

希望这可以帮助。

# php - 如何在 cakephp 中根据关联的 id 查看数据？

> ID：14950858
> 
> 赞同：2
> 
> 时间：2013-02-19T05:59:51.800
> 
> 标签：php, html, cakephp, cakephp-1.3, cakephp-2.0

桌子

```
 Tables

 Product        Plan            ProductPlan
 id |name       id |name        id  | product_id | plan_id     
 1    aplha      1   a          1        1          2             
 2    bravo      2   b          2        4          c   
 3    charlie    4   c   
 4    delta 
```

我想根据它的相关 id 查看数据，例如，如果产品有两个计划，它将在该产品的列表中。像那样

```
 alpha  |  delta   |  
       a          c
       b 
```

查看代码是

```
 <table>
<thead>
    <tr>
        <?php foreach ($p as $ps){?>
        <th>
            <?php echo __l($ps['Product']['name']);?>
        </th>
        <?php }?>
    </tr>   
</thead>    
    <tbody>
        <?php foreach ($p as $p1){
                foreach($p1['Plan'] as $plan){
                        debug($plan);
        ?>
        <tr>
            <td>
                <?php echo __l($plan['name']);?>    
            </td>
        </tr>           
        <?php }
                    }?>

    </tbody> 
```

当我调试 $p1 数组时，

```
 array(
'Product' => array(
    'product_id' => '1',
    'name' => 'Event Manager',
    'slug' => 'event-manager',
    'is_visible' => true
),
'Plan' => array(
    (int) 0 => array(
        'plan_id' => '1',
        'name' => 'FREE',
        'description' => '30 Days Trial',
        'amount' => '0.00',
        'expiry_days' => '30',
        'created' => '2012-01-12 16:51:21',
        'modified' => '2012-01-12 16:51:22',
        'PlansProduct' => array(
            'plan_product_id' => '1',
            'product_id' => '1',
            'plan_id' => '1'
        )
    ),
    (int) 1 => array(
        'plan_id' => '2',
        'name' => 'BRONZE',
        'description' => '60 Days Trial',
        'amount' => '10.00',
        'expiry_days' => '60',
        'created' => '2012-01-12 16:52:24',
        'modified' => '2012-01-12 16:52:25',
        'PlansProduct' => array(
            'plan_product_id' => '2',
            'product_id' => '1',
            'plan_id' => '2'
        )
    )
) 
```

)

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:27:30.550

我是否理解“产品有很多计划并且计划有很多产品”（多对多）（[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)）。在这种情况下，您必须在模型中声明此关系。

```
//models/product.php
class Product extends AppModel{
    public $hasAndBelongsToMany = array(
        'Plan' =>
            array(
                'className'              => 'Plan',
                'joinTable'              => 'ProductPlan',
                'foreignKey'             => 'id',
                'associationForeignKey'  => 'id',
                'unique'                 => true,
                'conditions'             => '',
                'fields'                 => '',
                'order'                  => '',
                'limit'                  => '',
                'offset'                 => '',
                'finderQuery'            => '',
                'deleteQuery'            => '',
                'insertQuery'            => ''
            )
    );
} 
```

如果关系是“一对多”，则声明如下：

```
class Product extends AppModel {
    public $hasMany = array(
        'Plan' => array(
            'className'     => 'Plan',
            'foreignKey'    => 'product_id'
        )
    );
} 
```

您需要在“Plan”表中添加一个名为“product_id”的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:11:00.653

您必须从控制器传递三个变量。该变量包含三个不同的表数据。

比需要时使用。

# r - 如何使用 R 执行 PROCV（或 VLOOKUP，均在 excel 中）

> ID：14950861
> 
> 赞同：0
> 
> 时间：2013-02-19T06:00:07.883
> 
> 标签：r, excel, vlookup, openoffice-calc

我在 R 中有名为 OP1DadosCelDez12 的数据框，如下所示：

```
State   City    QuedasConx  ConxEstab   Sol.ConxDadosAtend  Sol.ConxDados
SC  ABDON BATISTA   25071   2176654 2105688 2180192
SC  ABDON BATISTA   10319   1594057 1562627 1740117
SC  ADAMANTINA  79210   7723455 7468357 7772426
MG  ADOLFO  43230   2820074 2655908 2867880
MG  AGROLANDIA  120016  10633996    10273314    10836846
SP  AGROLANDIA  106545  9184706 8611340 9377591 
```

我能够使用聚合函数为每个城市合并 QuedasConx、ConxEstab、Sol.ConxDadosAtend 和 Sol.ConxDados 的每一列（数值）。例如：

```
agg1 <- aggregate(OP1DadosCelDez12$Sol.ConxDadosAtend,
        data.frame(OP1DadosCelDez12$Município), FUN=sum, na.rm=FALSE)
                           (...) 
```

然后我创建了一个新的数据框，它应该有相同的变量，但每个城市只有一行。

```
ClaroDadosMunDez12 <- data.frame(agg0,agg1$Município,agg1$QuedasConx,
agg2$ConxEstab,agg3$Sol.ConxDadosAtend,agg4$Sol.ConxDados)
colnames(ClaroDadosMunDez12)[1] <- "UF"
colnames(ClaroDadosMunDez12)[2] <- "Município"
colnames(ClaroDadosMunDez12)[3] <- "QuedasConx"
colnames(ClaroDadosMunDez12)[4] <- "ConxEstab"
colnames(ClaroDadosMunDez12)[5] <- "Sol.ConxDadosAtend"
colnames(ClaroDadosMunDez12)[6] <- "Sol.ConxDados" 
```

期望的结果是这样的：

```
State   City    QuedasConx  ConxEstab   Sol.ConxDadosAtend  Sol.ConxDados
SC  ABDON BATISTA   35390   3770711 3668315 3920309
SC  ADAMANTINA  79210   7723455 7468357 7772426
MG  ADOLFO  43230   2820074 2655908 2867880
MG  AGROLANDIA  226561  19818702    18884654    20214437 
```

我的问题是我无法读取每个城市的唯一行的状态值并将其写入变量 OP1DadosMunDez12$UF （新数据框的）。

我可以使用 MS EXCEL 中的命令 procv 轻松完成此操作，但我在 R 中遇到了困难。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:08:51.080

您可以采取以下措施来获得您所描述的“**期望结果**”：

```
# input data
dat <- read.table(header= TRUE, text = "State    City    QuedasConx  ConxEstab   SolConxDadosAtend  SolConxDados
SC  ABDONBATISTA   25071   2176654 2105688 2180192
SC  ABDONBATISTA   10319   1594057 1562627 1740117
SC  ADAMANTINA  79210   7723455 7468357 7772426
MG  ADOLFO  43230   2820074 2655908 2867880
MG  AGROLANDIA  120016  10633996    10273314    10836846
SP  AGROLANDIA  106545  9184706 8611340 9377591")

# summarise by state
aggregate(dat[,3:6],by=list(dat[,2]),FUN=sum)

       Group.1 QuedasConx ConxEstab SolConxDadosAtend SolConxDados
1 ABDONBATISTA      35390   3770711           3668315      3920309
2   ADAMANTINA      79210   7723455           7468357      7772426
3       ADOLFO      43230   2820074           2655908      2867880
4   AGROLANDIA     226561  19818702          18884654     20214437

# this will give the same result
library(plyr)
ddply(dat, .(City), function(x) ( colSums(x[,3:6]) ))

# and this will also...
library(sqldf)
sqldf("SELECT City, SUM(QuedasConx), SUM(ConxEstab), SUM(SolConxDadosAtend), SUM(SolConxDados) FROM dat GROUP BY City") 
```

您问题中的`aggregate`代码对我不起作用，我无法重现您的`ClaroDadosMunDez12`数据框、 , 中的内容`agg0`等`agg4`。

此外，您似乎想做比我在这里展示的更进一步的事情，您能否编辑您的问题以更清楚地解释您想要做什么？

# iis-7 - 将网站部署到 IIS 时未加载图像

> ID：14950867
> 
> 赞同：3
> 
> 时间：2013-02-19T06:00:31.360
> 
> 标签：iis-7, asp.net-mvc-4

网站中使用的图像存储在这里（在图像文件夹中） -

![文档树](../Images/53bb2f0c97440c33916db67363d1c1e3.png)

并且以这种方式引用图像-

```
<img src="@Url.Content("/Images/greenDot.png")" style="margin-right: 10px;"/> 
```

当我在本地机器上运行该网站时，所有图像都可以正常加载。但是当我在 IIS 上部署它并运行该网站时，没有任何图像被加载。

错误 -

```
Failed to load resource: the server responded with a status of 404 (Not found) http://54.234.60.214/Images/Logo_Innosolv.jpg
Failed to load resource: the server responded with a status of 404 (Not Found) http://54.234.60.214/Images/Icons/bid.png 
```

似乎是什么问题？我是将图像移动到其他文件夹还是更改在视图中引用它们的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T08:21:21.123

在图像的路径中添加 ~ 符号。

```
<img src="@Url.Content("~/Images/greenDot.png")" style="margin-right: 10px;"/> 
```

如果您在您的网站中进行了身份验证，请检查该文件夹的路径是否具有公共权限。您必须在 web.config 中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T08:15:45.733

我不知道该网站被部署为现有网站下的网络应用程序。所以图像应该是从

```
http://54.234.60.214/IBeam_2/Images/Logo_Innosolv.jpg 
```

代替 -

```
http://54.234.60.214/Images/Logo_Innosolv.jpg 
```

所以，我改变了路径

```
<img src="~/Images/Logo_Innosolv.jpg" style="margin-right: 10px;"/> 
```

它现在正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:12:16.810

> 我是否更改了在视图中引用它们的方式？

是的，当然您应该根据您的部署目录结构更改图像的路径。检查您是否添加了正确的相对或绝对路径，以适合您的网站。

**或者**

可能是您没有启用 IIS 来显示图像。您可以按照[此链接中的说明进行操作](http://peterkellner.net/2008/04/01/iis7imageproblem/)

如果您使用 css 加载图像，则必须检查这是否是路径问题。

# ruby-on-rails - 如何在启动前预编译这些文件

> ID：14950873
> 
> 赞同：0
> 
> 时间：2013-02-19T06:01:00.877
> 
> 标签：ruby-on-rails, twitter-bootstrap

如何在应用程序启动之前预编译这些文件，因为这会在每个页面加载中花费大量时间。

```
Compiled twitter/bootstrap/alert.js  (0ms)  (pid 26396)
Compiled twitter/bootstrap/tab.js  (0ms)  (pid 26396)
Compiled twitter/bootstrap/collapse.js  (0ms)  (pid 26396)
Compiled twitter/bootstrap/dropdown.js  (0ms)  (pid 26396)
Compiled twitter/bootstrap/modal.js  (0ms)  (pid 26396)
Compiled twitter/bootstrap/affix.js  (0ms)  (pid 26396) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:22:59.377

您需要在“assets/javascripts/application.js”中将它们标记为“必需”

用于在要编译`//=require_tree.`的文件中包含所有 JS 文件。`/javascript`或者按顺序手动写入文件名。

您可以阅读 application.js 中的注释以获取说明。

顺便问一下，你看到开发模式下的消息了吗？如果是这样，即使您要求 Asset Pipeline 编译它们也是正确的。资产仅在生产模式下编译，而不是在开发或测试模式下编译。

# c# - 为每个查询打开和关闭数据库连接

> ID：14950876
> 
> 赞同：3
> 
> 时间：2013-02-19T04:42:22.133
> 
> 标签：c#, database, asp.net

我写了以下代码。我已经为一个要执行另一个查询的查询打开了一次数据库连接。我已经写了下面的代码。但我认为有一个错误有人可以帮助我吗？

```
public void check()
{
    try
    {
        OdbcConnection myOdbcConnection = new OdbcConnection(con1);
        OdbcCommand myOdbcCommand = myOdbcConnection.CreateCommand();
        String sSQL = "SELECT * FROM(select tdate from tbl_IThelpdesk order by call_no desc)where ROWNUM = 1"; //last record of the call_no column
        myOdbcCommand.CommandText = sSQL;
        myOdbcConnection.Open();
        OdbcDataReader myOdbcDataReader = myOdbcCommand.ExecuteReader();
        if (!myOdbcDataReader.Read())
        {
            txtDate.Text = DateTime.Now.ToShortDateString();
            string strcallno = DateTime.Now.Year.ToString("d2") + DateTime.Now.Month.ToString("d2") + DateTime.Now.Day.ToString("d2");
            txtcall.Text = "ITHD" + strcallno + "001";
            myOdbcConnection.Close();
            myOdbcDataReader.Close();
        }
        else
        {
            DateTime today = DateTime.Parse(DateTime.Now.ToShortDateString());
            if (myOdbcDataReader[0].ToString() == today.ToString())
            {
                myOdbcConnection.Close();
                myOdbcDataReader.Close();
                myOdbcConnection.Open();
                OdbcCommand myOdbcCommand1 = myOdbcConnection.CreateCommand();
                String SQLmax = "SELECT max(call_no) FROM TBL_IThelpdesk";
                myOdbcCommand1.CommandText = SQLmax;

                OdbcDataReader myOdbcDataReader1 = myOdbcCommand1.ExecuteReader();
                while (myOdbcDataReader1.Read() != false)
                {
                    txtcall.Text = myOdbcDataReader1[0].ToString().Trim();
                }
                myOdbcDataReader1.Close();
                myOdbcDataReader.Close();
                myOdbcConnection.Close(); 
            }
        }
    }
    catch (Exception e)
    {
        lblEmpty.Text = e.Message;
        lblEmpty.Visible = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T06:40:02.200

由于数据库连接使用池，您不必为多个查询维护相同的连接；相反，在需要时打开连接，并尽快将其关闭以释放资源。

请参阅：http: [//msdn.microsoft.com/en-us/library/8xx3tyca](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.80).aspx)
(v=vs.80).aspx 另请参阅：[C# SQLConnection pooling](https://stackoverflow.com/questions/4457928/c-sharp-sqlconnection-pooling)

请注意，您没有使用`using() { }`模式。鉴于该`OdbcConnection`和类似的类型 implement `IDisposable`，您应该将它们嵌入到 a`using`中，以便在不等待垃圾收集器的情况下处理它们。

请参阅：http: [//msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:11:20.480

当您只需要点击一次时，您会点击数据库两次。您将获取最新日期，然后再次访问数据库以获取相应的 call_no。这是不安全的，因为 max(call_no) 即使在 2 个查询之间的一小段时间内也可能发生变化。

```
//get the latest [call_no] and [tdate]. No need for a 2cd trip with max(call_no)
SELECT * FROM(select call_no, tdate from tbl_IThelpdesk order by call_no desc)where ROWNUM = 1 
```

此外，数据访问代码与 UI 代码混合在一起。您应该创建做一件事的数据访问方法；返回你想要的数据。这将使遵循算法的主要流程变得更加容易。

# c++ - 复制构造函数定义和声明的区别？

> ID：14950881
> 
> 赞同：1
> 
> 时间：2013-02-19T06:01:26.560
> 
> 标签：c++, constructor, copy-constructor, default-constructor, default-copy-constructor

我有一个类 Base 和 Class derived 。

1.  如果我在我的类中声明一个复制构造函数，编译器会在编译时定义复制构造函数吗？
2.  如果调用 Derived 类的复制构造函数会发生什么？它是否依赖于基类复制构造函数？

（在标准编译期间，我需要知道基类和派生之间的关系在复制构造函数方面。编译器是做什么以及如何定义复制构造函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:53:42.510

> **如果我在我的类中声明一个复制构造函数，编译器会在编译时定义复制构造函数吗？**

不，它不会。

如果您只声明复制构造函数而不定义它，您最终会出现链接错误。通过为复制构造函数提供显式声明，您可以告诉编译器隐式生成的声明不足以满足您的需求，并承诺您将提供自己的版本。但是当你不提供定义时，你就违背了这个承诺。

> **如果调用 Derived 类的复制构造函数会发生什么？它是否依赖于基类复制构造函数？**

基类中是否存在复制构造函数不会影响派生类中的复制构造函数。规则很简单：
如果您不提供显式声明，编译器会为您的类生成一个复制构造函数。请注意，仅当您的代码使用复制构造函数时，编译器才会这样做。如果编译器检测到您的代码从不使用复制构造函数，那么它就不会生成复制构造函数，因为这是不必要的开销并且违反了 C++ 的基本规则，*“您只需为使用的内容付费”*

# jquery-mobile - JQueryMobile 列表上的 contenteditable

> ID：14950884
> 
> 赞同：1
> 
> 时间：2013-02-19T06:01:53.640
> 
> 标签：jquery-mobile, editor, wysiwyg, contenteditable, html-editor

我正在尝试为 JQueryMobile 页面设计一个所见即所得的编辑器，使用`contenteditable`.

但是我不能让插入符号专注于项目`<a>`内的标签和样式为.`ListView``<a>``data-role=button`

相反，插入符号总是集中在`<span>`用于显示箭头图标的地方。

如何允许用户修改链接文本和链接超链接？

这是[一个 JSFiddle，其中包含](http://jsfiddle.net/nirmaljpatel/NtBws/)我正在尝试使用的代码。

# php - 网站上的通配符文件夹？

> ID：14950885
> 
> 赞同：0
> 
> 时间：2013-02-19T06:01:59.527
> 
> 标签：php, .htaccess

我的网站有一个名为“keyword”的文件夹，例如： [http ://www.mysite.com/keyword/](http://www.mysite.com/keyword/)

在文件夹中，我只有一个 index.php 文件。无论有人在文件夹后输入什么，我都需要显示 index.php。例如，[http:](http://www.mysite.com/keyword/this-is-a-test) //www.mysite.com/keyword/this-is-a-test 应该显示 index.php 文件的内容，但不更改 URL。

我尝试过的一切似乎都失败了 - 我正在使用 /keyword/ 文件夹中的 .htaccess。不管我放什么，我似乎总是收到 404 错误。任何帮助将不胜感激，我敢肯定这是我不知道该怎么做的小而简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:06:39.327

```
RewriteEngine on
RewriteRule - index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:07:05.770

我认为这可以解决您的问题（根目录中的.htaccess）

```
RewriteEngine on
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-l
RewriteRule ^/keyword/(.*)$ /keyword/index.php?keyword=$1&%{QUERY_STRING}   [L] 
```

# javascript - PhoneGap - onProgress - 目标为空？

> ID：14950888
> 
> 赞同：0
> 
> 时间：2013-02-19T06:02:17.090
> 
> 标签：javascript, eclipse, dom, cordova

我正在使用 PhoneGap (Cordova) 文件传输和 onProgress 函数向用户显示下载进度。

到目前为止它运行得很好，但是我试图同时进行多个下载，并且我需要在 onProgress 事件中有一个有效的“目标”属性，但它总是读为 null。

这是为什么？有什么方法可以显示目标，就像它提供信息的文件名一样？

```
var ft0 = new FileTransfer();
ft0.onprogress = onProgress;
ft0.download( url, filePath, onDownloadSuccess, onDownloadError );

function onProgress(progressEvent) {
.... 
```

这是 onProgress 事件的属性读数

```
type: undefined; 
bubbles: false; 
cancelBubble: false; 
cancelable: false; 
lengthComputable: true; 
loaded: 5510; 
total: 56456; 
target: null; 
```

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:43:34.007

[W3C 规范](http://www.w3.org/TR/progress-events/)定义的进度事件没有目标。

您可以将下载操作包含在一个闭包中并可以访问文件名，如下所示：

```
filePaths.each(function(filePath) {
   var ft = new FileTransfer();

   ft.onprogress = function(progressEvent) {
      //onProgress for filePath
   };

   button.addEventListener("click", function() {
      ft.abort();
   }, false);

   ft.download( url, filePath, onDownloadSuccess, onDownloadError );
}); 
```

# javascript - 使用 node.js 托管一个 asp.net 或 jsp 网站

> ID：14950890
> 
> 赞同：2
> 
> 时间：2013-02-19T06:02:27.617
> 
> 标签：javascript, node.js

是否可以在服务器端使用 node.js 托管 asp.net 或 jsp 网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T06:14:55.217

# 使用 npm 请求

这非常适合将请求代理到其他 Web 服务器，而这正是 Wallmart 为其 java 产品所做的。

```
req.pipe(request('http://[some site].com')).pipe(resp) 
```

但是，除非有一些脚本转译器，否则不可能在节点内运行 java 代码或 asp.net 代码。这听起来有点绕。

# javascript - 将 gae 日期时间转换为 UTC 格式的 Python

> ID：14950892
> 
> 赞同：0
> 
> 时间：2013-02-19T06:02:40.927
> 
> 标签：javascript, jquery, python, google-app-engine, timeago

我的模型上有一个日期时间

```
2013-02-19 05:29:27.874648 
```

我正在使用 jquery timeago .. 但问题是它没有给出期望的输出..

```
<time class="timeago" datetime="{{ activity.created }}">{{ activity.date }}</time> 
```

上面的代码是我的示例 html 代码..

这是我的javascript：

```
<script>
    jQuery(document).ready(function() {
      jQuery("time.timeago").timeago();
    });
</script> 
```

我的问题是.. 我应该将其转换为 UTC 格式吗？？.. 如果是这样！我该如何转换它？..以python方式或javascript转换它？？..我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:16:02.000

如果我理解你的问题。

如何转换为 UTC

```
from datetime import datetime
from pytz import timezone

date_str = "2009-05-05 22:28:15"
datetime_obj = datetime.strptime(date_str, "%Y-%m-%d %H:%M:%S")
datetime_obj_utc = datetime_obj.replace(tzinfo=timezone('UTC'))
print datetime_obj_utc.strftime("%Y-%m-%d %H:%M:%S %Z%z") 
```

你需要安装`pytz`

如果您想在当前时间添加一些时间戳。

做这样的事情

```
future = datetime.datetime.now() + datetime.timedelta(minutes=5)
return time.mktime(future.timetuple()). 
```

请看这篇文章[time.mktime](http://docs.python.org/2/library/time.html#time.mktime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:17:16.930

您通常希望服务器上的日期已经采用 UTC（或显式偏移 UTC），然后在最后一秒（双关语）转换为客户端的本地时区。

使用 jquery-timeago，假设日期已经（相对于）UTC，您可以将其格式化（在 Python 中，服务器端）并且 jquery-timeago 应该正确计算其余部分。

这是我在自己的 HTML 模板中用来格式化 UTC 日期的方法：

```
{{ activity.date.isoformat() + 'Z' }} 
```

# android - drawable-xdpi 文件夹是无效的资源目录名称

> ID：14950895
> 
> 赞同：4
> 
> 时间：2013-02-19T06:02:59.423
> 
> 标签：android

我有一个由我的 Eclipse IDE 自动配置的 android 项目。项目的 res 文件夹内有 3 个文件夹 drawable-ldpi、drawable-mdpi 和 drawable-hdpi。我也希望支持 xdpi，所以我手动添加了文件夹，我收到“资源目录名称无效”的问题。我不知道以下信息是否相关，但通过搜索可能是相关的。我支持的最低 sdk 是 10，目标是 15。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T06:08:38.447

这是一个简单的拼写错误。重命名`"xdpi"`为`"xhdpi"`. 你错过了`"h"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:09:12.747

`drawable-xdpi`是无效的，它必须是`drawable-xhdpi`，它`xhdpi`不是`xdpi`

# iphone - 在 MKMap 视图中显示附近的餐厅

> ID：14950896
> 
> 赞同：8
> 
> 时间：2013-02-19T06:03:02.113
> 
> 标签：iphone, ios, mkmapview, mapkit

在我的 iphone 应用程序中，我必须在地图视图中显示附近的餐馆，目前我在网络视图中使用谷歌地图 url。

但是如何使用本地 MKMap 视图显示当前位置 5000 米内附近的餐馆（我发现了我当前的位置-纬度和经度）

我想学习如何在下面的屏幕截图中实现（也可以通过单击注释转到其详细信息）

有什么帮助吗？？提前致谢

![在此处输入图像描述](../Images/8fc9059a7d502bd6268153940ca6b2ef.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T07:15:45.317

在 iOS 6.1 中，您可以使用[`MKLocalSearch`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html)标准 iOS MapKit.framework 的一部分：

```
MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
request.naturalLanguageQuery = @"restaurant";
request.region = mapView.region;

MKLocalSearch *localSearch = [[MKLocalSearch alloc] initWithRequest:request];
[localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

    NSMutableArray *annotations = [NSMutableArray array];

    [response.mapItems enumerateObjectsUsingBlock:^(MKMapItem *item, NSUInteger idx, BOOL *stop) {
        CustomAnnotation *annotation = [[CustomAnnotation alloc] initWithPlacemark:item.placemark];

        annotation.title = item.name;
        annotation.subtitle = item.placemark.addressDictionary[(NSString *)kABPersonAddressStreetKey];
        annotation.phone = item.phoneNumber;

        [annotations addObject:annotation];
    }];

    [self.mapView addAnnotations:annotations];
}]; 
```

我的自定义注释只是`MKPlacemark`一个标题和副标题：

```
@interface CustomAnnotation : MKPlacemark

@property (strong, nonatomic) NSString *title;
@property (strong, nonatomic) NSString *subtitle;
@property (strong, nonatomic) NSString *phone;

@end 
```

如果您想在标注上查看披露指示符（以便您可以转换到另一个控制器以查看详细信息，您可以：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if (![annotation isKindOfClass:[CustomAnnotation class]])
        return nil;

    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation
                                                                       reuseIdentifier:@"CustomAnnotationView"];
    annotationView.canShowCallout = YES;
    annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    return annotationView;
} 
```

如果您想在用户单击标注附件时打开其他视图：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    if (![view.annotation isKindOfClass:[CustomAnnotation class]])
        return;
    CustomAnnotation *annotation = (CustomAnnotation *)view.annotation;

    ABRecordRef person = ABPersonCreate();
    ABRecordSetValue(person, kABPersonOrganizationProperty, (__bridge CFStringRef) annotation.title, NULL);

    if (annotation.phone)
    {
        ABMutableMultiValueRef phoneNumberMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(phoneNumberMultiValue, (__bridge CFStringRef) annotation.phone, kABPersonPhoneMainLabel, NULL);
        ABRecordSetValue(person, kABPersonPhoneProperty, phoneNumberMultiValue, nil);
        CFRelease(phoneNumberMultiValue);
    }

    ABMutableMultiValueRef address = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
    ABMultiValueAddValueAndLabel(address, (__bridge CFDictionaryRef) annotation.addressDictionary, kABWorkLabel, NULL);
    ABRecordSetValue(person, kABPersonAddressProperty, address, NULL);
    ABUnknownPersonViewController *personView = [[ABUnknownPersonViewController alloc] init];

    personView.unknownPersonViewDelegate = self;
    personView.displayedPerson = person;
    personView.allowsAddingToAddressBook = YES;

    [self.navigationController pushViewController:personView animated:YES];

    CFRelease(address);
    CFRelease(person);
}

- (void)unknownPersonViewController:(ABUnknownPersonViewController *)unknownPersonView didResolveToPerson:(ABRecordRef)person
{

} 
```

有关更多信息（例如自定义注释视图、确定设备位置等），请参阅[Location Awareness Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)。

有关简单示例，请参阅[https://github.com/robertmryan/MKMapView-custom-annotations](https://github.com/robertmryan/MKMapView-custom-annotations)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:15:42.503

首先参考此 Google API 链接[https://developers.google.com/places/documentation/search](https://developers.google.com/places/documentation/search)然后获取 id 并将其添加到**googleId**的参数中，然后将**radious**参数设置为 5000 值，对于**类型**设置值餐厅 ..

看我下面的例子..

```
NSString *str=[NSString  stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=5000&types=%@&sensor=false&key=%@",currentLocation.latitude,currentLocation.longitude,@"restaurant",@"AIzaSyB7YTFTYyk9eb8ULNGxoy06-b_0DUOqdrY"];
NSLog(@"\n\n URL %@",str);
NSURL *strurl=[NSURL URLWithString:[str stringByReplacingOccurrencesOfString:@"|" withString:@"%7C"]];
//    NSURL *strurl = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyB7YTFTYyk9eb8ULNGxoy06-b_0DUOqdrY"];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:strurl];  
[request setDelegate:self];
[request startAsynchronous]; 
```

并在下面执行这些完整的记录`MKMapView`...

```
- (void)requestFinished:(ASIHTTPRequest *)request {

    // Use when fetching text data
    NSString *responseString = [request responseString];
    NSLog(@"\n\n>>>>......Response String >>> %@",responseString);

    if(responseString)
    {
        SBJSON *json = [[SBJSON alloc] init];
        NSError *error = nil;
        id result = [json objectWithString:responseString error:&error];

        if ([result isKindOfClass:[NSMutableArray class]]) 
        {
            NSLog(@"\n\n.......This is Mutable Array");
        }
        else 
        {
            if ([[result objectForKey:@"results"] count]>0) 
            {
                NSLog(@">>>>>>>> dict keys :%d \nFull Address : %@\n LatLong : %@ \n total result : %d", [[result objectForKey:@"results"] count],[[result objectForKey:@"results"]valueForKey:@"vicinity"],[[[result objectForKey:@"results"]valueForKey:@"geometry"]valueForKey:@"location"],[[result objectForKey:@"results"]count]);

                for (int i=0; i<[[result objectForKey:@"results"] count]; i++)     
                {
                    ann = [[MyAnnotation alloc] init];
                    ann.title = [[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"name"];
                    ann.subtitle = [[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"vicinity"];   

                    ann.annReferance=[[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"reference"];

                    CLLocationCoordinate2D location;
                    location.latitude = [[[[[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"geometry"]valueForKey:@"location"] valueForKey:@"lat"]doubleValue];
                    location.longitude = [[[[[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"geometry"]valueForKey:@"location"] valueForKey:@"lng"] doubleValue];
                    ann.coordinate=location;
                    ann.annLocation=[NSString stringWithFormat:@"%f,%f",location.latitude,location.longitude];

                    //                    NSLog(@"\n\n rating %@",ann.annrating);
                    if ([[[[result objectForKey:@"results"]objectAtIndex:i] allKeys] containsObject:@"rating"]) 
                    {
                        // contains key
                        ann.annrating=[[[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"rating"]stringValue];
                        NSLog(@"\n\n rating %@",ann.annrating);
                    }
                    else
                    {
                        ann.annrating=@"";
                    }
                    ann.annaddress=[[[result objectForKey:@"results"]objectAtIndex:i]valueForKey:@"vicinity"];
                    [mapView addAnnotation:ann];
                }
            }
        }
    }
} 
```

这是我在我的应用程序中使用的代码，只需根据您的要求进行一些更改，您就会得到输出..

我希望这对你有帮助......

# entity-framework - 实体代码优先与共享主机生产数据库

> ID：14950901
> 
> 赞同：3
> 
> 时间：2013-02-19T06:03:08.323
> 
> 标签：entity-framework, ef-code-first, code-first

所以我有一个在 localhost 上工作的 MVC4 项目，是时候将它上传到共享环境了。

因为我使用的是共享托管环境，所以我不能使用内置的 Initializers。所以我创建了我的 mdf 文件 (.bak) 的备份并将其上传到我的生产环境。一切看起来都不错......桌子都在那里......但是当我运行我的应用程序时，我得到了这个异常：

自创建数据库以来，支持“YourContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

* * *

得到它的工作！

我添加了一个自定义初始化程序。

```
public class ProductionInitializer : IDatabaseInitializer<AvariceContext>
{
    public void InitializeDatabase(AvariceContext context)
    {
    }
} 
```

解决方案......是hackish，但有效。如果有人能提供一些启示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:04:15.440

> “得到它的工作！我添加了一个自定义初始化程序。”

为什么会这样：...尽管 EF 发现了一些细微的差异，但您仍然可以访问数据库。您的代码实现了 IDatabaseInitializer 并忽略了初始化或迁移到最新版本的机会（空方法）。所以 Ef 认为 DB 不正确，你还是继续。

不是对稳定状态 EF 访问的长期看法。我会考虑让迁移到最新版本的工作。

> 由于我使用的是共享托管环境，我无法使用内置的初始化程序。”

为什么不 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:24:03.190

如果您确定自创建数据库后尚未更新 EF 模型，您可以删除 _MigrationHistory 表。这仅用于确保数据库和模型同步，但在您概述的场景中不起作用。

将来，您仍然可以通过将“-script”添加到您在开发环境中执行的更新数据库命令的标志中来使用 EF 的迁移功能，如下所示。这将生成一个迁移脚本，您可以在生产数据库上执行该脚本。

```
> update-database -script 
```

# spring - 如何在文件夹名称中包含“<”

> ID：14950906
> 
> 赞同：0
> 
> 时间：2013-02-19T06:03:56.137
> 
> 标签：spring, amazon-s3

现在从事一个项目并使用Spring。有一个选项，我们必须创建一个文件夹名称。客户坚持文件夹名称应允许“<”和“>”。但是，当我尝试这样做时，如果字母出现在“<”字符之后，则它没有使用名称。

例如，如果我输入名称 '

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:08:56.893

这是您忽略的一项疯狂要求。虽然某些系统和平台允许在文件和文件夹名称中使用**一些**特殊字符，但它远非统一。通常，最佳做法是始终将文件和文件夹名称限制为字母和数字。

Amazon S3 对命名有严格的规定，基本上只有字母和数字（有关更多信息，请参阅[文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)）。

最好将此要求返回给您的客户，并告知他们根本不支持此要求。

# android - 谷歌地图 android v2 xml 文件错误信息

> ID：14950909
> 
> 赞同：0
> 
> 时间：2013-02-19T06:04:23.517
> 
> 标签：android, xml, google-maps-android-api-2

我正在尝试使用适用于 android v2 的谷歌地图。我按照以下说明进行操作：

[https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

我在（上述网页的）底部，上面写着“添加地图”。当我将以下代码复制并粘贴到我的 main.xml 中时：

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/map"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   class="com.google.android.gms.maps.MapFragment"/> 
```

我在 Linearlayout 标记上看到一个错误，上面写着：“根元素之后的文档中的标记必须格式正确。”

这是 main.xml 的全部内容：

```
 <?xml version="1.0" encoding="utf-8"?>

 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/map"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   class="com.google.android.gms.maps.MapFragment"/>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="horizontal"
     android:padding="30dip">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="25dip"
        android:text="@string/welcome"
        android:textSize="24sp"/>

    <EditText
        android:id="@+id/editText1"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:hint="@string/edit_location"/>

    <Button
        android:id="@+id/find_me_button"
        android:layout_weight="0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/button_find_me"/>

    </LinearLayout> 
```

为什么这不是格式正确的？

编辑：我尝试从 LinearLayout 中删除 "xmlns:android="http://schemas.android.com/apk/res/android" 但它没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:28:57.987

请试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="horizontal"
 android:padding="30dip">

 <fragment
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="25dip"
    android:text="@string/welcome"
    android:textSize="24sp"/>

<EditText
    android:id="@+id/editText1"
    android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" 
    android:hint="@string/edit_location"/>

<Button
    android:id="@+id/find_me_button"
    android:layout_weight="0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_find_me"/>

</LinearLayout> 
```

它可能会帮助你。

# php - 如何在另一个运行 PHP 的 sys 命令时从系统命令获得响应？

> ID：14950913
> 
> 赞同：0
> 
> 时间：2013-02-19T06:04:31.790
> 
> 标签：php, linux, apache, system

```
$cmd ="ffmpeg ---" 
system($cmd); 
```

一些 ffmpeg 命令正在运行..同时我想运行另一个系统命令，就像我展示的那样

```
$cmd1 =" kill -9 pid" //above ffmpeg pid
system($cmd1) 
```

这里发生的问题是我没有从第二个系统命令得到响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:34:26.517

也许这会有所启发.. 引自[http://php.net/manual/en/function.system.php](http://php.net/manual/en/function.system.php)

> 注意：如果使用此功能启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

所以你的第一个命令当前正在前台运行，这就是第二个命令没有执行的原因。

在我看来，您至少可以尝试在后台运行它

```
$cmd ="ffmpeg --- &" 
system($cmd); 
```

# asp.net-mvc-4 - 使用 MVC4 的 N 层架构

> ID：14950917
> 
> 赞同：1
> 
> 时间：2013-02-19T06:04:52.467
> 
> 标签：asp.net-mvc-4, n-tier-architecture

我们正在为我们的 ASP.NET Web 应用程序遵循 N 层架构模式。我们正在使用这些层 DAL、BAL、Business Objects 和 Common。现在我们正在转向 ASP.NET MVC4。

1.  我们还能将这些 N-Tier 架构与 MVC 一起使用吗？
2.  混在一起有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:59:31.153

是的，您仍然可以使用它。你为什么不呢？将所有层分开总是更好。您的业​​务层只负责您的业务逻辑。那么，您将如何在两种类型的客户端上共享您的业务逻辑？想想 MVC 网站和 WCF 服务层或移动应用程序。

我们在 MVC 中开发了很长时间，并且总是使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:24:27.373

在这种情况下，MVC 架构本质上是一个前端架构。您应该仍然可以使用所有以前的图层。只需了解 mvc 的模型是您可能“桥接”到其他层的点。

所以当然，你可以保持层形式的关注点分离

# javascript - 在完整日历和 php 的多资源视图中禁用休息时间

> ID：14950922
> 
> 赞同：1
> 
> 时间：2013-02-19T06:05:42.467
> 
> 标签：javascript, jquery, fullcalendar

我正在对某些事件进行资源分配。我正在使用资源视图，因此所有资源仅在一页上。

我正在使用带有 php 的 jQuery 完整日历。Fullcalendar 功能正常。但我想做一些格式化并想做一些限制。

*   我只想为资源启用工作时间。就像某些资源从下午 1:00 到下午 2:00 休息时间朝九晚五一样。一些资源从 4:00 tp 10:00 到下午 7:00 到 8:00 休息。意味着我想标记那些资源不可用或已经很忙的时间。

我为不同的事件做了不同的颜色，但客户想要这样。

请任何人帮助我如何更改fullcalendar jquery或我的代码>

我怎样才能实现这种变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:32:28.983

我已经通过更改全日历 jquery 来做到这一点。

我已经更改了他们构建完整日历的 jquery 代码。并根据特定资源的名册在全日历资源视图中完成。

# objective-c - 是否可以将 NSMutableDictionary 作为 SingletonObject 的属性？

> ID：14950923
> 
> 赞同：0
> 
> 时间：2013-02-19T06:06:08.507
> 
> 标签：objective-c, singleton, nsmutabledictionary

我想在几个 UITableViews 之间共享一个 NSMutableDictionary。重点是，在一个视图中，我可以将数组作为值和对应的键添加到字典中，然后设置 SingletonObject 的字典属性。然后在另一个视图中，我可以通过 SingletonObject 的属性访问字典中的数组。

对于 SingletonObject，在头文件中，我有这个：

```
@property(nonatomic) NSMutableDictionary * dict;
+(SingletonObject *) sharedManager; 
```

在 SingletonObject 的实现文件中，我有这个：

@synthesize 字典；

+(SingletonObject *) sharedManager { 静态 SingletonObject * sharedResourcesObj = nil;

```
@synchronized(self)
{
    if (!sharedResourcesObj)
    {
        sharedResourcesObj = [[SingletonObject alloc] init];
    }
}

return sharedResourcesObj; 
```

}

然后我在我的 UITTableView 类之一中执行以下操作

```
 // instantiate the SingletonObject
        sharedResourcesObj = [SingletonObject sharedManager];

        // instantiate array
        NSMutableArray *courseDetails = courseDetails = [[NSMutableArray alloc]init];
        // put textview value into temp string
        NSString *tempString = tempString = [[NSString alloc]initWithString:[_txtBuildingRoom text]];

        // put textview value into array (via temp string)
        [courseDetails addObject:tempString];

        // set dictionary property of SingletonObject
        [sharedResourcesObj.dict setObject:courseDetails forKey:_lblCourse.text]; 
```

问题是，当我将所有内容逐行打印到控制台时，所有内容都有一个值并且工作正常，除了字典的新值不存在。

当我使用下面的代码检查字典的值或计数时，计数为 0，字典中没有对象。

```
 // dictionary count
        NSLog(@"%i", sharedResourcesObj.dict.count);

        // get from dictionary
        NSMutableArray *array = [sharedResourcesObj.dict objectForKey:_lblCourse.text];

        // display what is in dictionary
        for (id obj in array)
        {
            NSLog(@"obj: %@", obj);
        } 
```

我正在使用正确的概念在 UITableViews 之间共享字典？

我的 SingletonObject 实现是否存在问题？

我之前使用过 SingletonObject 的这种实现来在选项卡之间共享整数值，并且绝对没有问题。现在唯一的区别是 SingletonObject 的属性不是整数，而是 NSMutableDictionary。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:10:03.693

您必须在单例对象中实际*创建*字典，否则它将只是 `nil`. 您通常会在单例`init`方法中执行此操作。

```
- (id)init
{
    self = [super init];
    if (self) {
        dict = [NSMutableDictionary new];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:14:53.250

```
 @synchronized(self)
{
 if (!sharedResourcesObj)
  {
    sharedResourcesObj = [[SingletonObject alloc] init];

  }
}

 return sharedResourcesObj;
}

 - (id)init 
{
  if (self = [super init]) 
  {
    _dict = [NSMutableDictionary alloc]init];
   }
  return self;
} 
```

# wpf - WPF：将 DataGrid 放入 ComboBox

> ID：14950925
> 
> 赞同：6
> 
> 时间：2013-02-19T06:06:21.017
> 
> 标签：wpf, datagrid, combobox

在 WPF 中，如何将 DataGrid 放在 ComboBox 中以显示多列？像下面这样的东西似乎没有做任何事情：

```
<ComboBox>
    <ItemsPanelTemplate>
        <DataGrid>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding customerName}" />                 
                <DataGridTextColumn Binding="{Binding billingAddress}" />
            </DataGrid.Columns>
        </DataGrid>
    </ItemsPanelTemplate>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T07:10:24.040

好的，如果我理解正确，您有一个 List `List<Customer>`，列表 List 绑定到 ComboBox，每个子列表绑定到 DataGrid

例子：

xml:

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">

    <Grid DataContext="{Binding ElementName=UI}">
        <ComboBox DataContext="{Binding ComboItems}" Height="27" VerticalAlignment="Top" >
            <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False" ColumnWidth="150" >
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding CustomerName}" />
                    <DataGridTextColumn Header="Address" Binding="{Binding BillingAddress}" />
                </DataGrid.Columns>
            </DataGrid>
        </ComboBox>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{

    private ObservableCollection<Customer> _comboItems = new ObservableCollection<Customer>();

    public MainWindow()
    {
        InitializeComponent();
        ComboItems.Add(new Customer { CustomerName = "Steve", BillingAddress = "Address" });
        ComboItems.Add(new Customer { CustomerName = "James", BillingAddress = "Address" });
    }

    public ObservableCollection<Customer> ComboItems
    {
        get { return _comboItems; }
        set { _comboItems = value; }
    }
}

public class Customer : INotifyPropertyChanged
{
    private string _customerName;
    private string _billingAddress;

    public string CustomerName
    {
        get { return _customerName; }
        set { _customerName = value; RaisePropertyChanged("CustomerName"); }
    }

    public string BillingAddress 
    {
        get { return _billingAddress; }
        set { _billingAddress = value; RaisePropertyChanged("BillingAddress"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

结果：

![在此处输入图像描述](../Images/267464b87b17b560313a1697469d5f76.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:14:02.180

对于其他寻找这个的人，我在[这里](http://www.codeproject.com/Articles/43074/WPF-Custom-ComboBox)找到了一个实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:54:46.807

```
<ComboBox Width="150" Height="30" Name="cb">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <DataGridRow DataContext="{Binding}" Height="30" Width="150">
                        <DataGridRow.Template>
                            <ControlTemplate>
                                <Grid> 
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="5"/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding customerName}" Margin="2"></TextBlock>
                                    <Border  BorderBrush="Black" BorderThickness="1" Grid.Column="1" Margin="2"></Border>
                                    <TextBlock Grid.Column="2" Text="{Binding billingAddress}" Margin="2"></TextBlock>
                                </Grid>

                            </ControlTemplate>
                        </DataGridRow.Template>

                    </DataGridRow>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

# javascript - 从 java 脚本调用 primefaces 上下文菜单

> ID：14950929
> 
> 赞同：3
> 
> 时间：2013-02-19T06:06:39.313
> 
> 标签：javascript, xhtml, contextmenu

我的网页上有一个 svg。右键单击元素时应显示一个上下文菜单，其中包含从数据库中获取的数据。元素的编写方式是右键点击事件触发页面上的一个js函数。我需要从 java 脚本调用上下文菜单。有人可以帮我解决这个问题。我已经被这个问题困扰了将近 3 天。元素：

```
<rect/><text>L</text></g><g id="118" onmousedown="RightClickExecute(event,118)"> 
```

java脚本：

```
function RightClickExecute(event, id) {
   if (event.button == 2) {document.getElementById("myForm:selectedEntityid").value = id;
      document.getElementById("myForm:selectedObjectType").value = 'Entity';
      document.getElementById("myForm:RightAction").click();
   }
}
function showContextMenu(){                                  
   document.getElementById("myForm:contextMenuItemId").click();
 } 
```

XHTML：

```
<p:contextMenu id="contextMenuId" for="svgContainerPanel"
                widgetVar="contextMenuVar" rendered="#{myBean.objectType=='Entity' ? true : false}">
                <p:menuitem id="contextMenuItemId" ></p:menuitem>
</p:contextMenu>

<p:contextMenu event="click" id="contextMenu2Id" for="contextMenuId"
                widgetVar="contextMenu2Var" model="#{my.model}" >

                </p:contextMenu>

<p:commandButton id="RightAction" style="visibility:hidden"
                action="#{myBean.populateMenu}" ajax="true"
                type="submit" oncomplete="showContextMenu()"
                update="contextMenuId,contextMenu2Id">
            </p:commandButton>

<h:inputHidden id="selectedEntityid"
                value="#{myBean.selectedEntityId}">
            </h:inputHidden>
<h:inputHidden id="selectedObjectType"
                value="#{myBean.objectType}">
            </h:inputHidden> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T16:53:44.350

Primefaces 的 contextMenu 没有选择，所以你可以使用 jquery 来做到这一点。如果要显示 contextMenu，则必须将 contextMenu 的位置更改为鼠标的位置（默认情况下页面加载 contextMenu，但它有 css display:none，因此您需要更改 css）。Primefaces 的 contextMenu 具有在客户端中使用的 widgetvar 属性（它有方法 show 来显示它）。

`Primefaces's contextMenu`有`widgetvar`在客户端使用的属性（它有方法 show 来显示它）。

例如，当鼠标悬停在一个组件上时，你会显示 contextmenu，它的 id 是`rongnk`，我有一个 form(id:form)，一个 contextmenu(id:xxx)

```
 <script type="text/javascript">
                //<![CDATA[
                $(document).on('mouseover', '#form\\:rongnk', function(e) {
                    $(PrimeFaces.escapeClientId('form:xxx')).css({
                        top: e.pageY+'px',
                        left: e.pageX+'px'                        
                    }).show();
                });                
                //]]>
            </script> 
```

# ruby-on-rails - Rails 控制器 - 处理 404 并以动态 HTML 错误页面响应，无论请求格式如何

> ID：14950934
> 
> 赞同：3
> 
> 时间：2013-02-19T06:07:08.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling, http-status-code-404

假设我的 ApplicationController 中有以下逻辑：

```
rescue_from ActionController::RoutingError, :with => :handle_routing_error

def handle_routing_error(exception)
 logger.info { "handling routing error: #{exception.message}" }
 render template: 'errors/error_404', status: 404
end 
```

这将为 HTML 格式的所有请求呈现我的自定义（和动态）404 错误页面。

但是，当有人提供指示非 HTML 格式的 URL 时，例如 mysite.com/missingfile.png 这会引发 500 错误，因为我没有 error_404.png 模板：

```
Missing template errors/error_404, public_site/error_404, application/error_404 with {:locale=>[:en], :formats=>[:png], :handlers=>[:erb, :builder, :coffee, :rabl, :haml]}. Searched in: 
```

如何覆盖请求格式并始终显示我的动态 HTML 404 页面？我希望它像 twitter 一样工作：[https](https://twitter.com/missingfile.png) ://twitter.com/missingfile.png 。

关键是这是一个动态的 404 页面，所以通常的 public/404.html 路由对我不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-08T15:08:49.467

做这个 ...

```
#config/routes
get "*unmatched_route", :to => "application#error_page"

#controllers/application_controller
def error_page
  render :template => 'errors/error_404', status: 404
end 
```

# c++ - 实时 3D 模型渲染和实时文本到语音

> ID：14950936
> 
> 赞同：0
> 
> 时间：2013-02-19T06:07:29.727
> 
> 标签：c++, opengl, text-to-speech, blender, ogre

在提出问题时，应将整个问题分解为较小的问题并一一解决。但我问得不好，为了完全解释我的需求和技术限制，希望有人建议一套完美的技术来工作。

*我要设计一些将接受**文本作为输入**的东西转换成**语音** 这个语音由一个**3D 模型****实时**表达。*

在这里你可以看到所有这些东西都应该是实时的，因此我正在考虑在一些**游戏引擎**中做这件事，但我不确定我在这里做的事情是否可行。

我需要指导，一条道路，关于我应该如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:38:17.020

您没有指定平台，即 Windows/Linux 等，尽管它可能并不重要。

我最初的想法是将 PICO tts 库与 Blender 游戏引擎 (BGE) 结合起来。虽然我不确定 Pico 引擎是否有 python 绑定。

espeak 项目 (espeak.sourceforge.net/) 将普通文本转换为音素，然后可用于驱动 shape-keys（或 blend-keys，我忘记了 Blender 的名称，距离我上次玩已经 5 年多了搅拌机/玛雅/3DSMax）。

据推测，您可以在 python 中实现 espeak 引擎（或创建一个可通过 python 访问的模块）并使用它来生成所需的音素，然后再将它们同时传递给您的形状/混合键控制器和 Pico。

快速浏览后，似乎 libttspico-dev 是支持 pico 启用应用程序开发的包，尽管它似乎只包含 c/c++ 文件 - 我想应该可以创建一个利用引擎的 python 模块，但是除了名称和基本功能之外，我真的不熟悉 Pico。这可能是一个愚蠢和不知情的建议。

无论如何，这肯定是一个有趣的项目。也许更简单的方法是用 C/C++ 创建一个使用 OGRE 和 Pico 的应用程序。重要的因素是 OGRE 能够从 1 个形状键混合到下一个形状键 - 也可能是 Pico 在内部以这样一种方式完成所有操作，即您无法获得回调或监控它在播放语音中的当前位置。

已收藏。

# installation - 如何知道com0com端口安装完成？

> ID：14950938
> 
> 赞同：0
> 
> 时间：2013-02-19T06:07:48.650
> 
> 标签：installation, com0com

我正在编写安装 com0com、创建多个 COM 端口并安装使用这些端口的应用程序的 InstallAware 脚本。

为了创建端口，我使用一些选项运行 setupc.exe install。Setupc 完成了它的工作并很快退出。之后，Windows 开始了漫长的过程，告诉用户找到了新设备以及他们是否要安装驱动程序等。

在安装过程结束时，用户会看到标准屏幕显示安装完成，您是否要运行该应用程序。我在 Windows 完成安装驱动程序之前就到了这一点，并且在完成之前无法继续。

我如何知道何时安装了所有驱动程序并创建了端口并且我可以使用它们？

我想写一个小应用程序，它会定期尝试打开我的端口。安装脚本将等到此应用退出，然后进入最终屏幕。

还有其他方法吗？我可以从 Windows 收到驱动程序安装完成的任何通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T05:07:48.257

我不熟悉 InstallAware，但您应该能够提取可用的串行端口以及它们是否在您的应用程序端匹配。允许用户启动应用程序，但在开始时进行检查，等待所有串行端口创建并可用，然后继续。您还可以在继续进入最终屏幕之前检查创建 com0com 端口的进程是否正在运行，但我再次不确定 InstallAware 的功能。

# file - 多次打开/关闭文件更好还是一劳永逸？

> ID：14950949
> 
> 赞同：0
> 
> 时间：2013-02-19T06:08:25.820
> 
> 标签：file, security

如果我必须在脚本中多次处理文件。基本上，如果我需要在脚本的开头阅读它，然后在结尾处写它。这样做更好吗：

```
f = open("myfile", "r")
lines = f.readlines()
f.close()
# ...
# Edit some lines
# ...
f = open("myfile", "w")
f.write(lines)
f.close() 
```

或者：

```
f = open("myfile", "r+")
lines = f.readlines()
# ...
# Edit some lines
# ...
f.seek(0)
f.truncate()
f.write(lines)
f.close() 
```

“更好”是指“更安全”。我认为，如果在文件仍处于打开状态时停止进程，这两个脚本都存在安全漏洞，但这在前一个脚本中发生的可能性较小。

我认为语言并不重要，但我主要使用 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:35:18.180

Keeping aside all the other factors like

*   Securing the channel of data transfer

*   Checking the file permissions

*   Checking the file attributes so that application can trust the file

*   Secure Design

*   Time of Check Versus Time of Use for temporary files

    etc etc

If you want to pickup preference between just two *opening the file once or opening the file multiple times for a operation.*

My pick would be open the file only once. The more times you open a file the more time you will have to go through ensuring security checks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:12:32.350

`open`通常一个人只想要`close`一个文件一次。主要原因是性能。如果您担心“安全性”，您会提到脚本的意外结束，我将其称为“稳定性问题”，然后`flush`每次写入脚本但不要关闭它。然后，如果您的脚本保释了书面内容仍然是安全的，并且文件在清理过程中只是关闭了。

该策略的一个优点还在于，您只需检查一次访问和打开脚本是否成功，而不必在整个脚本中一遍又一遍地执行所有操作。

# ios - 在 flex 移动设备中，单击 swf 文件中的 url 时如何打开海雀网络浏览器？

> ID：14950956
> 
> 赞同：0
> 
> 时间：2013-02-19T06:08:57.760
> 
> 标签：ios, apache-flex, mobile

这是我的第一个问题。请读这个。

现在我正在开发 Air 移动项目。

它有许多闪存内容（swf 文件），应该向用户显示这些内容。

安卓是可以的。但ios不是。

我知道海雀网络浏览器。

但**我希望用户点击 swf 文件（url 类型），打开海雀网络浏览器并播放点击的文件。**

是否可以？

概括。

如何在我的应用程序上启动海雀网络浏览器或其他应用程序（能够加载 swf 文件）？

如果可能的话，如何传递点击文件的url？

谢谢阅读我的问题。祝你有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:48:02.397

在 Flash Platform 应用程序中，您可以使用[navigateToURL()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)打开链接。概念上是这样的：

```
navigateToURL(new URLRequest("http://www.mydomain.com")); 
```

在 AIR 应用程序中；。这会将请求传递到底层操作系统。在您的应用程序中，您无法控制操作系统如何处理它；这意味着您无法控制启动哪个浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T08:36:11.333

在 iOS 上，您可以使用`UIDocumentInteractionController`调用其他应用程序：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

对于 Puffin，Puffin 是注册`"puffin://"`的，所以只要将 URL 设置为`"puffin://XXX"`，系统就会弹出 URL = 的 Puffin `"http://XXX"`。此外，“puffins://XXX”映射到`"https://XXX"`.

# linker - 链接器错误：“对类构造函数的未定义引用”

> ID：14950959
> 
> 赞同：0
> 
> 时间：2013-02-19T06:09:09.020
> 
> 标签：linker

我正在尝试构建我的程序。我的程序使用一个类并创建它的实例。在构建我的程序时，我收到链接器错误“未定义对类构造函数的引用”。但是，存在构造函数定义的组件已作为静态库依赖项包含在内，它甚至存在于“/usr/lib/”文件夹中。静态库甚至包含所需的符号。但我仍然无法解决“未定义的引用”错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T07:14:56.853

我猜，你有一个实现 <%classname%> 的 cpp 文件。如果是这样，我认为您错过了在构建系统中注册此 cpp 文件。当链接器尝试解析 <%classname%> 的成员函数和构造函数的引用时，如果找不到相关的实现（这里我的意思是编译的汇编代码例程），它可能会发出错误，因为它没有被编译。

# git - 如何将本地 master 合并到所有本地分支中？

> ID：14950960
> 
> 赞同：2
> 
> 时间：2013-02-19T06:09:12.013
> 
> 标签：git

我有几个本地分支，一段时间后，我将所有这些分支合并到 master 中，然后我想将本地 master 合并到所有本地分支中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:40:16.107

git 中没有一个命令，但是“为所有分支”做某事的方法是在 bash 会话中：

```
for BRANCH in `ls .git/refs/heads`; do something $BRANCH; done 
```

这可用于合并：

```
for BRANCH in `ls .git/refs/heads`; do if [[ "$BRANCH" != "master" ]] ; then git checkout $BRANCH ; git merge master ; fi ; done 
```

或重置分支，如[威廉](https://stackoverflow.com/users/1965396/william-seiti-mizuta)的[回答](https://stackoverflow.com/a/14950990/6309)中所建议：

```
for BRANCH in `ls .git/refs/heads`; do if [[ "$BRANCH" != "master" ]] ; then git checkout $BRANCH ; git reset --hard master ; fi ; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:11:22.380

您可以删除本地分支并重新创建它们。这样，新分支将成为主分支的镜像。您可以使用 获得相同的结果`git checkout branch-name && git reset --hard master`。

请记住，这可以删除一些提交。如果您不希望这样（可能是因为这些本地分支有一个远程分支），您将需要执行`git merge`: `git checkout branch-name && git merge master`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-24T13:40:55.883

我从这里使用了 VonC 的答案，但后来由于某种原因`ls .git/refs/heads`停止生成所有分支名称 - 此文件夹中只有两个。所以这个修改后的版本对我有用：

```
for BRANCH in `git branch`; do if [[ "$BRANCH" != "master" ]] ; then git checkout $BRANCH ; git merge master --no-edit; fi ; done 
```

# python - 覆盖默认的 argparse -h 行为

> ID：14950964
> 
> 赞同：24
> 
> 时间：2013-02-19T06:09:26.227
> 
> 标签：python, argparse

我有一个调用它的插件的配置文件。可以将参数传递给这些插件。这个配置文件还允许我在运行时调用任意命令。

插件使用许多参数：其中一个是`-h`，它不代表`--help`. 现在，我的问题是我想调用我自己的 Python 脚本并传递一些参数。我正在使用 argparse 并希望与配置的其余部分保持一致，我创建了一个`-h`标志。令我惊讶的是，argparse 只是给了我，`argparse.ArgumentError: argument -h/--help: conflicting option string(s): -h`而不是管自己的事。

有没有办法阻止这种情况发生？

我很清楚大多数人都希望`-h`提供帮助，但这是我自己的脚本，我认为我比 argparse 开发人员更了解我想要使用标志的目的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-19T06:17:34.193

在[argparse 文档](http://docs.python.org/2/library/argparse.html#argumentparser-objects)中查找 ArgumentParser 参数。有一个名为 add_help，默认为 True。

```
parser = argparse.ArgumentParser('Cool', add_help=False)
parser.add_argument('-h', '--hi', action='store_true', dest='hi') 
```

这按预期工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-03-12T15:11:45.920

如果你给 ArgumentParser 一个冲突处理程序 =“解决” 参数，添加你自己的 -h 将覆盖现有的，同时保持 --help 功能。

```
#!/usr/bin/env python3
import argparse
parse = argparse.ArgumentParser(conflict_handler="resolve")
parse.add_argument("-h", "--hello")
print(parse.parse_args()) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-19T06:15:20.353

有一个 kwarg 可以压制这些东西（[docs](http://docs.python.org/2/library/argparse.html#add-help)）。
像这样创建你的解析器：

```
parser = argparse.ArgumentParser(prog='PROG', add_help=False) 
```

# sql - oracle查询周期数据到月

> ID：14950965
> 
> 赞同：0
> 
> 时间：2013-02-19T06:09:27.913
> 
> 标签：sql, oracle

我有一个表格，其中有一个以格式`YYYYMM'||-||'YYYYMM`（例如：）存储的期间列`201111-201203`。我需要一个 SQL 查询来生成逐行数据，每行以格式表示月份`YYYYMM`。

输入

```
201111-201203 
```

输出

```
201111
201112
201201
201202
201203 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:39:48.720

分析这段代码：

```
select 
    id, to_char(add_months(to_date(substr(interv,1,6),'yyyymm'), i),'yyyymm')
from
   (Select level-1 as i from dual connect by level <= 50)
   join
   (
   select 1 as id,'201111-201203' as interv from dual
   union all
   select 2, '201201-201301' from dual
   )
on add_months(to_date(substr(interv,1,6),'yyyymm'), i) <=
    to_date(substr(interv,-6),'yyyymm')
order by 1,2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:27:44.960

忘记连接和 PL/SQL：

```
-- List of months between dates --
SELECT to_char( add_months( start_date, LEVEL-1 ), 'YYYYMM' ) list_of_months
 FROM 
 (
  SELECT to_date('201111', 'YYYYMM') start_date,
         to_date('201203', 'YYYYMM') end_date
    FROM dual
 )
  CONNECT BY LEVEL <= MONTHS_BETWEEN(Trunc(end_date,'MM'), Trunc(start_date,'MM'))+1
 /

LIST_OF_MONTHS
--------------
201111
201112
201201
201202
201203 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:37:44.060

使用这个片段来开发你的代码，你可以创建一个函数或一个过程来获得你想要的输出

```
 declare

  v_from_date date;
  v_to_date   date;

  v_time varchar2(20);

begin

  v_time := '201111-201203';

  v_from_date := to_date(substr(v_time, 0, 6), 'YYYYMM');
  v_to_date   := to_date(substr(v_time, 8, 6), 'YYYYMM');

  while v_from_date <= v_to_date loop

    dbms_output.put_line(v_from_date);

    v_from_date := ADD_MONTHS(v_from_date, 1);

  end loop;

end; 
```

# asp.net-mvc-2 - 使用 Https Endpoint 获取 Bing 地图和 youtube 时出错？

> ID：14950966
> 
> 赞同：0
> 
> 时间：2013-02-19T06:09:28.140
> 
> 标签：asp.net-mvc-2

在开始时，我使用 http 端点将 asp.net mvc 应用程序部署到 azure。此时 bing 地图和 youtube 视频在我的云应用程序中运行良好。现在我的应用程序通过添加 SSL 证书使用 Https 运行。使用 https 端点正在获取问题。当我在我的应用程序中浏览 bing 地图页面和视频时，然后在浏览器中显示弹出消息，例如

在 Internet Explorer 中，

**仅显示安全内容。你想显示所有内容吗？当我点击显示所有内容时，它会显示地图和 youtube 视频。**

如果我不点击显示所有内容。除了这两个（地图和视频）之外，一些脚本也没有运行。

在 Chrome 中，

**“此页面包含不安全的内容。无论如何加载。当我单击加载任何方式时，它将与地图、视频和脚本一起使用，但绿色 https 变为带有十字标记的红色 https。**

如何使用 https 端点运行 Bing 地图、Youtube 和脚本？

谢谢，

PCSSCP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:35:46.377

我现在明白了。Bing 地图正在使用 https。所以这里有两种方法可以在 HTTP 或 HTTPS 中将 Bing Ajax 控件添加到您的页面：

HTTP：

```
<script src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3" type="text/javascript"></script> 
```

HTTPS：

```
<script src="https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3&s=1" type="text/javascript"></script> 
```

现在在 HTTPS 版本通知中，我将 URL 更改为以 HTTPS 开头，这是从安全站点拉到好的 Bing 的内容。

有关更多信息，请查看此链接，

[http://www.interactivewebs.com/blog/index.php/dotnetnuke-modules/bing-ajax-control-over-https-or-http-secure-ssl/](http://www.interactivewebs.com/blog/index.php/dotnetnuke-modules/bing-ajax-control-over-https-or-http-secure-ssl/)

感谢和问候，

PCSSCP。

# r - 如何在 R 树形图中省略标签？

> ID：14950967
> 
> 赞同：1
> 
> 时间：2013-02-19T06:09:37.470
> 
> 标签：r, treemap

我一直在使用[R treemap 包](http://cran.r-project.org/web/packages/treemap/treemap.pdf)，我有一个深度为 2 级的树图。我希望打印第二级标签，但不是第一级。

使用手册页中的示例：

```
tmPlot(GNI2010,
       index=c("continent", "iso3"),
       vSize="population",
       vColor="GNI",
       type="value") 
```

[树形图示例 http://www.eecs.tufts.edu/~rveroy/stuff/GNI2010-treemap.png](http://www.eecs.tufts.edu/~rveroy/stuff/GNI2010-treemap.png)

我想摆脱大陆标签，但保留 iso3 标签。如果它在文件中但没有找到，我提前道歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-16T14:07:18.197

另一种选择是取消您想要看到的字体消失的大小字体。例如，

```
tmPlot(GNI2010,
       index=c("continent", "iso3"),
       vSize="population",
       vColor="GNI",
       type="value",
       fontsize.labels=c(0,10)) 
```

只会显示国家的首字母，而不是各大洲。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T07:05:28.063

要删除大陆标签，您可以事后编辑图表。该图生成一个网格对象。这个网格对象的最后两个元素似乎是国家标签。因此，您可以通过以下方式删除它们：

```
lapply(tail(grid.ls(print=FALSE)$name, 2), grid.remove) 
```

![在此处输入图像描述](../Images/188c50d24583bd02963f85927e661d5e.png)

# jasper-reports - Jasper 报告：执行 SQL 语句时出错：

> ID：14950970
> 
> 赞同：2
> 
> 时间：2013-02-19T06:10:00.323
> 
> 标签：jasper-reports

以下是我在编译 jrxml 文件时遇到的错误。

```
Error filling print... 
Error executing SQL statement for : Activity_Summary_Report 
Setting up the file resolver...
net.sf.jasperreports.engine.JRException: Error executing SQL statement for : Activity_Summa ry_Report
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:240)
at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:1086)
at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:667       )
at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1258)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:877)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745)
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:89    1)
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)    
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997)
Caused by: commicrosoft.sqlserver.jdbc.SQLServerException: Operand type clash: date is incompatible with int
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216
at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285)
at net.sf.jasperreports.engine.query.JRJdbcQueryExecuter.createDatasource(JRJdbcQueryExecuter.java:233)
... 12 more  
Print not filled. Try to use an EmptyDataSource... 
```

我在 jrxml 文件和查询字符串中采用的参数是

```
<parameter name="EndDate" isForPrompting="true" class="java.util.Date">
    <defaultValueExpression ><![CDATA[new Date(System.currentTimeMillis())]]></defaultValueExpression>
</parameter>
<queryString><![CDATA[declare @startdate as datetime;
declare @enddate as datetime;
declare @sitegroup as nvarchar(50);
set @startdate = $P{EndDate}-1;
set @enddate = $P{EndDate};
set @sitegroup = 'BBXNCR';
set NOCOUNT ON; -- Added by JC230090: Fixes bug when running query with Jasper

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo]. [#temp_invlines]') AND type in (N'U'))
DROP TABLE [dbo].[#temp_invlines]
create table #temp_invlines (site_iid uniqueidentifier, invoice_line_type_iid int,   sub_total float, tax_total float,line_total float, product_type_iid int);
insert into #temp_invlines (site_iid,invoice_line_type_iid, sub_total, tax_total,   line_total, product_type_iid)
select h.site_iid, invoice_line_type_iid, l.sub_total, l.tax_total, l.line_total, l.product_type_iid
from invoice_lines l
    inner join invoices h on l.invoice_iid = h.invoice_iid
where h.invoice_dt >= @startdate and h.invoice_dt < @enddate

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[#temp_payment_invoices]') AND type in (N'U'))
DROP TABLE [dbo].[#temp_payment_invoices]
create table #temp_payment_invoices (site_iid uniqueidentifier, inv_amount float);
insert into #temp_payment_invoices (site_iid, inv_amount)
select i.site_iid, i.total
from invoice_payments p
    inner join Invoice_Payment_Invoice_Xref pXref on p.invoice_payment_iid = pXref.invoice_payment_iid
    inner join invoices i on pXref.invoice_iid = i.invoice_iid
where p.payment_dt >= @startdate and p.payment_dt < @enddate

 IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[#temp_promocodes]') AND type in (N'U'))
 DROP TABLE [dbo].[#temp_promocodes]
 create table #temp_promocodes (site_iid uniqueidentifier, invoice_promo_line_type_iid int, promo_amount float);
 insert into #temp_promocodes (site_iid, invoice_promo_line_type_iid, promo_amount)
select h.site_iid, pl.invoice_promo_line_type_iid, pl.amount
from invoice_promo_lines pl
inner join invoices h on pl.invoice_iid = h.invoice_iid
where h.invoice_dt >= @startdate and h.invoice_dt < @enddate

select 
rtrim(s.site_id) as [Site ID]
, rtrim(ss.Description) as [Status]
, @startdate as [Date]
, datename(dw,@startdate) as [DoW]
, rtrim(s.name) as [Store Code]
, rtrim(isnull(sg.Description,'')) as [Site Group]
, rtrim(s.address1) + ', ' + rtrim(s.city) + ', ' + rtrim(s.state) + ' ' + rtrim(s.Zip)    as [Address]
, rtrim(pg.description) as [RentPriceGroup]

, (select count(*) from invoices h where h.invoice_dt >= @startdate and h.invoice_dt < @enddate and h.site_iid = s.site_iid) as [Trans]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 1) as [Rent Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 2) as [Ext Day Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid = 2) as [Used Sell Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid <> 2) as [New Sell Rev]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Rev Total]
, (select isnull(sum(tax_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Tax Total]
, (select isnull(sum(line_total),0) from #temp_invlines l where l.site_iid = s.site_iid) as [Grand Total]
, (select isnull(sum(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid)    /
(select case when count(*) = 0 then 1 else count(*) end from invoices h where h.invoice_dt >= @startdate and h.invoice_dt < @enddate and h.site_iid = s.site_iid)
as [Rev/Trans]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 1) as [Rent Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 2) as [Ext Day Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid = 2) as [Used Sell Cnt]
, (select isnull(count(sub_total),0) from #temp_invlines l where l.site_iid = s.site_iid and l.invoice_line_type_iid = 0 and l.product_type_iid <> 2) as [New Sell Cnt]
, (select isnull(count(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 0) as [CustSrv Promo Cnt]
, (select isnull(sum(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 0) as [CustSrv Promo Amt]
, (select isnull(count(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 1) as [Marketing Promo Cnt]
, (select isnull(sum(promo_amount),0) from #temp_promocodes p where p.site_iid = s.site_iid and p.invoice_promo_line_type_iid = 1) as [Marketing Promo Amt]

, (SELECT  
    isnull(count(*),0)
FROM Invoice_Lines ilrtn 
    INNER JOIN Invoices ihrtn on ilrtn.invoice_iid = ihrtn.invoice_iid 
    inner join customer_ids c on ihrtn.customer_id_iid = c.customer_id_iid
    INNER JOIN Invoices ihrent on ihrtn.customer_id_iid = ihrent.customer_id_iid  
    INNER JOIN Invoice_lines ilrent on ihrent.invoice_iid = ilrent.invoice_iid 
WHERE ihrtn.invoice_dt >= @startdate
    and ihrtn.invoice_dt < @enddate
    and ilrtn.invoice_line_type_iid in (0,2)
    AND ihrent.invoice_dt <= ihrtn.invoice_dt 
    AND ilrent.invoice_line_type_iid in (1) 
    AND ilrent.piece_id = ilrtn.piece_id 
    and ihrtn.site_iid = s.site_iid 
) as [Invoices]

, (SELECT  
    isnull(sum(ilrent.line_total + ilrtn.line_total),0)
FROM Invoice_Lines ilrtn 
    INNER JOIN Invoices ihrtn on ilrtn.invoice_iid = ihrtn.invoice_iid 
    inner join customer_ids c on ihrtn.customer_id_iid = c.customer_id_iid
    INNER JOIN Invoices ihrent on ihrtn.customer_id_iid = ihrent.customer_id_iid  
    INNER JOIN Invoice_lines ilrent on ihrent.invoice_iid = ilrent.invoice_iid 
WHERE ihrtn.invoice_dt >= @startdate
    and ihrtn.invoice_dt < @enddate
    and ilrtn.invoice_line_type_iid in (0,2)
    AND ihrent.invoice_dt <= ihrtn.invoice_dt 
    AND ilrent.invoice_line_type_iid in (1) 
    AND ilrent.piece_id = ilrtn.piece_id 
    and ihrtn.site_iid = s.site_iid 
) as [Collectable]

, ( select isnull(sum(p.amount),0)
from invoice_payments p
where p.payment_dt >= @startdate and p.payment_dt < @enddate
and p.invoice_payment_iid in (
    select distinct p.invoice_payment_iid
    from invoice_payments p
    inner join Invoice_Payment_Invoice_Xref pXref on p.invoice_payment_iid = pXref.invoice_payment_iid
    inner join invoices i on pXref.invoice_iid = i.invoice_iid
    where p.payment_dt >= @startdate and p.payment_dt < @enddate
    and i.site_iid = s.site_iid
    group by p.invoice_payment_iid, pXref.invoice_iid)
) as [Payments Collected]
from sites s
inner join Site_Statuses_Enum ss on s.site_status_iid = ss.site_status_iid
inner join Site_Rent_Price_Groups as pg on s.site_rent_price_group_iid =     pg.site_rent_price_group_iid
left outer join Site_SiteGroup_XRef sgx on s.site_iid = sgx.site_iid
left outer join Site_Groups sg on sgx.site_group_iid = sg.site_group_iid
where sg.Description in (@sitegroup) or sg.Description is null
order by s.site_id

drop table #temp_promocodes
drop table #temp_payment_invoices
drop table #temp_invlines;]]></queryString> 
```

请帮助我如何解决它。当我直接在 Sql server management studio 中执行相同的查询时，这执行得很好。但是通过jasper报告，它正在抛出异常。请帮我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:44:47.093

问题得到解决。这是因为输入参数 ($P{StartDate},$P{EndDate}) 的数据类型`date`不是`datetime`。因为日期数据类型的精度只运行到天级别，而不是更小的。

如果您确保您的应用程序（如下）提供的参数是 datetime 类型而不是 date，则应该消除该错误。

```
$P{StartDate}
$P{EndDate} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:37:05.497

如果您**确定您的连接并且之前已经成功测试过**，我建议您从 Jasper 中的查询中**删除所有 Transact-SQL 代码。**

`SELECT`除了报表 JRXML 中的查询之外，Jasper 不允许任何操作。您只能使用`SELECT`statement 而不能使用其他任何东西 - 甚至不能使用`SET`or `DECLARE`。Jasper 只是一个报告引擎，而不是数据库客户端。不允许 DDL 和 DML。

修改您的代码并使其成为单个`SELECT`查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T11:11:06.857

尝试使用

```
SET NOCOUNT ON 
```

对于类似的问题

# java - 时间戳格式不显示不同的值

> ID：14950977
> 
> 赞同：1
> 
> 时间：2013-02-19T06:10:23.363
> 
> 标签：java

我正在尝试使用下面的代码片段从 .dat 文件中打印出日期/时间列表，但它始终具有相同的输出，我不知道为什么。

```
SimpleDateFormat TimeStampFormat = new SimpleDateFormat("yyyy:dd:hh:mm:ss:");
long measurement = 0;       

for (i=0; i<MeasurementLength; i++ ){
    databyte = ReadFilterInputPort();
    measurement = measurement | (databyte & 0xFF);  
   if (i != MeasurementLength-1)    
        measurement = measurement << 8;             
} // for

TimeStampA.setTimeInMillis(measurementA);   
System.out.println(measurementA);
System.out.printf("%-22s\n",TimeStampFormat.format(TimeStampA.getTime())); 
```

例如，几行的输出是：

(输入) 1300828035071

(输出) 2011:22:05:07:15

（输入）1300828035073

(输出) 2011:22:05:07:15

我做错了什么还是给定输入的正确输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:22:32.243

试试下面的代码

```
 try {
            long measureA = System.currentTimeMillis();// You can assign your exact date which is in long format

            Date date = new Date(measureA); 

            SimpleDateFormat sdf = new SimpleDateFormat("dd MMM yyyy hh:mm:ss zzz"); 

            System.out.println(sdf.format(date)); 

            sdf = new SimpleDateFormat("E MMM dd yyyy"); 

            System.out.println(sdf.format(date));

        }catch(Exception e)
        {
            e.printStackTrace();

        } 
```

您可以根据需要更改格式字符串

# jquery - 使用 jQuery 将 html 转换为文本并计算单词的干净方法是什么？

> ID：14950984
> 
> 赞同：0
> 
> 时间：2013-02-19T06:11:11.773
> 
> 标签：jquery

首先是输出：

```
var postContent = wysihtml5Textarea.data("wysihtml5").editor.getValue(); 
```

看起来像这样：

```
<p>sf sdf asd asd  <b>asd</b> d asd ad&nbsp; asd&nbsp;</p> 
```

我想完成以下任务：

1.  删除所有 HTML 标记
2.  移除所有`&nbsp;`
3.  计算单词（例如，像“rock-and-roll”这样的单词应该算作一个单词）。

我一直在浏览 SO，我发现了以下内容：

```
 $(txt).text(); remove all HTML tags
 txt.replace(/&nbsp;/g, ''); // remove all &nbsp;
 txt.replace( /[^\w ]/g, "" ).split( /\s+/ ).length; // word count (not sure if it deals with hyphenated words)
 $('#word-count').html(wordCount); // and display it 
```

我不知道如何以干净的方式混合所有这些。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:43:29.490

尝试使用这个[http://jsfiddle.net/aidioo7/QLgjs/1/](http://jsfiddle.net/adiioo7/QLgjs/1/)

```
 var str="<p>sf sdf asd asd  <b>asd</b> d asd ad&nbsp; asd&nbsp;</p>";

 alert("Plain Text : " + $(str).text());
 alert("Word Count : " +$(str).text().split(" ").length); 
```

# c# - 无法输出存储的信息

> ID：14950988
> 
> 赞同：1
> 
> 时间：2013-02-19T06:11:19.373
> 
> 标签：c#

我让我的程序运行，但我似乎无法输出我拥有的存储信息。当我运行程序时，所有的行都是空白的。代码还有更多内容，但我认为这是程序用于输出信息的主要代码。

```
 class Display
{
    public static void Main(string[] args)
    {
        LandlinePhone yourHomePhone = new LandlinePhone("VTech", "V-4321", "219-999-2345", true);
        Console.WriteLine("Manufacturer: {0}", yourHomePhone.Manufacturer);
        Console.WriteLine("Model: {0}", yourHomePhone.Model);
        Console.WriteLine("Phone Number: {0}", yourHomePhone.PhoneNumber);
        Console.WriteLine("Cordless: {0}", (yourHomePhone.HasCord ? "Yes" : "No"));
}

{
class LandlinePhone : Telephone
{
    private bool hasCord;

    public LandlinePhone()
    {
    }
    public LandlinePhone(string manufacturer, string model, string phoneNumber, bool hasCord)
            : base(manufacturer, model, phoneNumber)
    {
        hasCord = HasCord;
    }

    public bool HasCord
    {
        get
        {
            if (hasCord == true)
            {
                return true;

            }
            else
            {
                return false;
            }

        }
        set
        {
            hasCord = value;
        }
    }

    new public void display()
    {
        base.display();
        Console.WriteLine(HasCord ? "Cordless: Yes" : "Cordless: No");
    }
}

class Telephone
{
    public bool isConnected = true;
    public string lastNumberDialed;
    private string manufacturer;
    private string model;
    private string phoneNumber;

    public Telephone()
    {
    }

    public Telephone(string manufacturer, string model, string phoneNumber)
    {
    }

    public string Manufacturer
    {
        get
        {
            return manufacturer;
        }
        set
        {
            manufacturer = value;
        }
    }

    public string Model
    {
        get
        {
            return model;
        }
        set
        {
            model = value;
        }

    }
    public string PhoneNumber
    {
        get
        {
            return phoneNumber;
        }
        set
        {
            phoneNumber = value;
        }
    }
    public void display()
    {
        Console.WriteLine();
        Console.WriteLine("Manufacturer: {0}", Manufacturer);
        Console.WriteLine("Model: {0}", Model);
        Console.WriteLine("Phone Number: {0}", PhoneNumber);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:13:01.977

问题是您在父类中的**空白构造函数** ，您没有在其中设置任何属性，只是忽略了参数，这就是您没有得到任何输出的原因。`public Telephone(string manufacturer, string model, string phoneNumber)``Telephone`

修改您的构造函数并将属性设置为：

```
public Telephone(string manufacturer, string model, string phoneNumber)
{
   Manufacturer = manufacturer;
   Model = model;
   PhoneNumber = phoneNumber;
} 
```

在您的子类`LandlinePhone`中，您正在设置属性`HasCord`，我相信您应该获得`YES`针对行的输出：

```
Console.WriteLine("Cordless: {0}", (yourHomePhone.HasCord ? "Yes" : "No")); 
```

您也可以`Console.ReadLine()`在最后添加，以便您可以在 Visual Studio 的调试过程中看到输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:16:22.070

```
public Telephone(string manufacturer, string model, string phoneNumber)
{
//You did not assign the inputs to the properties in your class.
   Manufacturer = manufacturer;
   Model = model;
   phoneNumber;

} 
```

# c# - 在静态方法内部不工作时查看状态

> ID：14950993
> 
> 赞同：2
> 
> 时间：2013-02-19T06:11:38.453
> 
> 标签：c#, asp.net

我创建了一个从 java 脚本调用函数的 web 方法。在我的 aspx 代码后面有一个视图状态 [“cust_id”]。我想在公共静态方法中使用这个 cust_id。但我不能这样做。请帮助我做到这一点。

```
 [WebMethod]
  public static void add_plan_items(string plans)
  {
    string cust_id = Convert.ToString(ViewState["cust_id"]);//Error : object reference is required for non-static ...
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:14:09.430

错误是因为`ViewSate`页面附加了对象。这就是为什么你不能在静态方法中使用它..

而不是这个你需要`cust_id`作为参数传递给方法，所以你的方法就像

```
 [WebMethod]
  public static void add_plan_items(string plans,string cust_id)
  {
     //your code
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T06:50:17.050

我们可以在 Web 服务中使用会话来代替视图状态。
只需在 web 方法中启用 session true

```
[WebMethod(EnableSession = true)]
public static Boolean AddRecord(string contextKey)
{
    List<MID1> MID1s = HttpContext.Current.Session["MID1s"] as List<MID1>;

    using (var ctx = new Entities())
    {
        Boolean RetVal = false;
        MID1s = new List<MID1>();
        MID1 objMID1 = new MID1();
        objMID1.ItemID = 1;
        MID1s.Add(objMID1);
        HttpContext.Current.Session["MID1s"] = MID1s;
        return RetVal;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:21:38.230

我在这里看到了一个类似的问题
[如何使用 HttpContext 访问当前页面的 ViewState？](https://stackoverflow.com/questions/6309075/how-could-i-access-the-viewstate-of-the-current-page-using-httpcontext)
这表明我可以使用访问视图状态`httpcontext`

```
 private static T GetViewState<T>(string name)
    {
        return (T) ((BasePage)HttpContext.Current.CurrentHandler).PageViewState[name];
    } 
```

我添加了一个新的 PageViewState 属性，并让我的所有页面都从我的 BasePage 继承以公开 ViewState，然后能够获取或设置它。