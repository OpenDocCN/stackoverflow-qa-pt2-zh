# StackOverflow 问答 13365000-13365999

# jquery - 未从 data-x 标签中获取值

> ID：13365003
> 
> 赞同：1
> 
> 时间：2012-11-13T16:50:41.547
> 
> 标签：jquery, json, html, loops, attributes

我正在尝试从元素中包含的两个数据属性中获取值。如果我使用：

```
data = $('tr th', a).data() ; 
```

然后尝试使用以下方法获取：

```
data[0] // This works.
data[1] // Comes out as undefined. 
```

这是我的脚本中执行此操作的部分，它目前有效，因为我正在使用 .attr() 来获取值：

```
$('tr th', a).each(function(){
        sql = $(this).attr('data-sql') ;
        dir = $(this).attr('data-direction') ;

        if(sql)
        {
            JSONCols += '"'+sql+'", ' ;
        }
        if(!dir)
        {
            dir = '' ;
        }
        JSONDirs += '"'+dir+'", ' ;
    }) 
```

如何仅使用 .data() 而不是使用 .attr() 来获取这两个值，以便我的代码更干净？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:52:12.497

把它当作一个物体`data.sql`，,`data.direction`

但是请注意，这只从第一个选定元素中获取数据。如果您想从所有这些数据中获取数据，则必须使用迭代函数，例如 a `for loop`、`while loop`、`$.each`、`$().each`、`$.map`或`$().map`。

```
var data = $('tr th', a).map(function(){
    return $(this).data();
}).get();
console.log(data[0].sql); 
```

# asp.net-mvc-3 - 如何使用 asp.net mvc3 和 c# 构建网络爬虫？

> ID：13365004
> 
> 赞同：2
> 
> 时间：2012-11-13T16:50:50.737
> 
> 标签：asp.net-mvc-3, lucene, web-crawler, lucene.net, robots.txt

我需要使用 ASP.NET MVC 3 构建像 Google 这样的小型搜索引擎。为此，我还需要构建用于填充搜索引擎数据的网络爬虫。总之，我需要以下东西：

如何使用带有 C# 的 Asp.net MVC3 构建网络爬虫。我开始构建一些基础知识，但我需要一些指南、资源和书籍。

使用这个网络爬虫，我为搜索引擎填充数据，并使用 Lucene.Net 将索引应用于数据。我需要构建小型搜索引擎来搜索网络爬虫填充的数据。

请任何人有任何想法或资源或书籍。请与我们分享。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T17:33:40.240

**我使用带有 C# 的 Asp.net 4.0（不是任何 MVC）**创建了网络爬虫和搜索。我将在下面发布有关它的详细信息。它可能会对某人有所帮助。1.创建具有以下名称和字段的表。名称：tblCrawlingData 字段：Id 类型：Int，Url 类型：文本，标题类型：文本，内容类型：文本 2.我正在使用 Linq to sql 作为数据库。所以请让 linq to sql 设置你自己。3\. 我正在使用 Lucene.net 库索引。Lucene.Net 类(Lucene.Net.dll)

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.IO;
    using DataManager.BOL;
    using Lucene.Net.Analysis.Standard;
    using Lucene.Net.Index;
    using Lucene.Net.Store;
    using Lucene.Net.Search;
    using Lucene.Net.Documents;
    using Lucene.Net.QueryParsers;
    using System.Diagnostics;
    namespace AryaSearch.LuceneSearch{
    public class LuceneSearch
    {
        //Total Records
        private static long _totalResutl = 0;
        //Total Time taken to retrive the record
        private static double _totalTime = 0;
        // Full physical path of lucene index directory.
        private static string _luceneDir = Path.Combine(HttpContext.Current.Request.PhysicalApplicationPath, "IndexStorage");
        private static FSDirectory _directoryTemp;

    private static FSDirectory _directory
    {
        get
        {
            if (_directoryTemp == null)
                _directoryTemp = FSDirectory.Open(new DirectoryInfo(_luceneDir));
            if (IndexWriter.IsLocked(_directoryTemp))
                IndexWriter.Unlock(_directoryTemp);
            var lockFilePath = Path.Combine(_luceneDir, "write.lock");
            if (File.Exists(lockFilePath))
                File.Delete(lockFilePath);

            return _directoryTemp;
        }
    }

    private static void _addToLuceneIndex(CrawlingData spiderData, IndexWriter writer)
    {
        // remove older index entry
        var searchQuery = new TermQuery(new Term("Id", spiderData.Id.ToString()));
        writer.DeleteDocuments(searchQuery);
        //add new index entry
        var doc = new Document();
        // add lucene fields mapped to db fields
        doc.Add(new Field("Id", spiderData.Id.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZED));
        doc.Add(new Field("Url", spiderData.Url, Field.Store.YES, Field.Index.ANALYZED));
        doc.Add(new Field("Title", spiderData.Title, Field.Store.YES, Field.Index.ANALYZED));
        doc.Add(new Field("Contents", spiderData.Contents, Field.Store.YES, Field.Index.ANALYZED));

        // add entry to index
        writer.AddDocument(doc);
    }

    public static void AddUpdateLuceneIndex(IEnumerable<CrawlingData> spiderDatas)
    {
        // initialize  lucene
        var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
        using (var writer = new IndexWriter(_directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED))
        {
            // add data to lucene search index (replaces older entry if any) by calling method _addToLuceneIndex
            foreach (var spiderData in spiderDatas)
                _addToLuceneIndex(spiderData, writer);

            // close all method and handlers
            analyzer.Close();
            //writer.Close();
            writer.Dispose();

        }
    }

    public static void AddUpdateLuceneIndex(CrawlingData spiderDatas)
    {
        AddUpdateLuceneIndex(new List<CrawlingData> { spiderDatas });
    }

    public static void ClearLuceneIndexRecord(int record_id)
    {
        //intialize lucene classs
        var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
        using (var writer = new IndexWriter(_directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED))
        {
            // remove the older or deleted entry from lucene index
            var searchQuery = new TermQuery(new Term("Id", record_id.ToString()));
            writer.DeleteDocuments(searchQuery);

            //close the handlers
            analyzer.Close();
            //writer.Close();
            writer.Dispose();
        }
    }

    public static bool ClearLuceneIndex()
    {
        try
        {
            //intialize lucene classs
            var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
            using (var writer = new IndexWriter(_directory, analyzer, true, IndexWriter.MaxFieldLength.UNLIMITED))
            {
                // remove all older index entries
                writer.DeleteAll();
                //close handlers
                analyzer.Close();
                //writer.Close();
                writer.Dispose();
            }

        }
        catch (Exception)
        {
            return false;
        }
        return true;
    }

    public static void Optimize()
    {
        //intialize lucene classs
        var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
        using (var writer = new IndexWriter(_directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED))
        {
            //close all handlers
            analyzer.Close();
            writer.Optimize();
            //writer.Close();
            writer.Dispose();
        }

    }

    private static CrawlingData _mapLuceneDocumentToData(Document doc)
    {
        try
        {
            return new CrawlingData
            {
                Id = Convert.ToInt32(doc.Get("Id")),
                Url = doc.Get("Url"),
                Title = doc.Get("Title"),
                Contents = doc.Get("Contents").Substring(0,500)+"...",
                Total= _totalResutl,
                Time=_totalTime
            };
        }
        catch (Exception ex)
        {
            return null;
        }

    }

    private static IEnumerable<CrawlingData> _mapLuceneToDataList(IEnumerable<Document> hits)
    {

        return hits.Select(_mapLuceneDocumentToData).ToList();
    }

    private static IEnumerable<CrawlingData> _mapLuceneToDataList(IEnumerable<ScoreDoc> hits, IndexSearcher searcher)
    {

        return hits.Select(hit => _mapLuceneDocumentToData(searcher.Doc(hit.Doc))).ToList();

    }

    private static Query parseQuery(string searchQuery, QueryParser parser)
    {
        Query query;
        try
        {
            query = parser.Parse(searchQuery.Trim());
        }
        catch (ParseException)
        {
            query = parser.Parse(QueryParser.Escape(searchQuery.Trim()));
        }

        return query;
    }

    private static IEnumerable<CrawlingData> _search(string searchQuery, string searchField = "")
    {
        //validate the input
        if (string.IsNullOrEmpty(searchQuery.Replace("*", "").Replace("?", "")))
            return new List<CrawlingData>();
        // set up lucene searcher
        using (var searcher = new IndexSearcher(_directory, false))
        {
            //when Lucene gets more than 1000 search results,
            //it becomes increasingly slow, so you'd want to limit it to a number which is relevant in your case
            //var hits_limit = 1000;
            var hits_limit = 10;
            //initialize the lucene class.
            var analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
            // search by single field
            if (!string.IsNullOrEmpty(searchField))
            {
                var parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_30, searchField, analyzer);
                var query = parseQuery(searchQuery, parser);
                //var hits = searcher.Search(query, hits_limit).ScoreDocs;
                Stopwatch watch = Stopwatch.StartNew();                
                var hitsTemp = searcher.Search(query, hits_limit);
                watch.Stop();
                _totalTime = watch.ElapsedMilliseconds / 1000;
                _totalTime = Math.Round(Convert.ToDouble(_totalTime), 2);
                _totalResutl = hitsTemp.TotalHits;
                var hits = hitsTemp.ScoreDocs;
                var results = _mapLuceneToDataList(hits, searcher);// _mapLuceneSearchResultsToDataList(hits, searcher);
                analyzer.Close();
                //searcher.Close();
                searcher.Dispose();
                return results;
            }
            // search by multiple fields (ordered by RELEVANCE). you can search order here.
            else
            {
                var parser = new MultiFieldQueryParser
                (Lucene.Net.Util.Version.LUCENE_30, new[] { "Id", "Url", "Title",  "Contents" }, analyzer);
                var query = parseQuery(searchQuery, parser);
                Stopwatch watch = Stopwatch.StartNew(); 
                var hitsTemp = searcher.Search(query, null, hits_limit, Sort.RELEVANCE);
                watch.Stop();
                _totalTime = (float)watch.ElapsedMilliseconds / 1000;
                _totalTime = Math.Round(Convert.ToDouble(_totalTime), 2);
                _totalResutl = hitsTemp.TotalHits;
                Sort.RELEVANCE).ScoreDocs;
                var hits = hitsTemp.ScoreDocs;
                var results = _mapLuceneToDataList(hits, searcher); 
                analyzer.Close();
                //searcher.Close();
                searcher.Dispose();
                return results;
            }
        }
    }

    public static IEnumerable<CrawlingData> Search(string input, string fieldName = "")
    {
        if (string.IsNullOrEmpty(input)) return new List<CrawlingData>();

        var terms = input.Trim().Replace("-", " ").Split(' ')
            .Where(x => !string.IsNullOrEmpty(x)).Select(x => x.Trim() + "*");
        input = string.Join(" ", terms);

        return _search(input, fieldName);
    }

    public static IEnumerable<CrawlingData> SearchDefault(string input, string fieldName = "")
    {
        return string.IsNullOrEmpty(input) ? new List<CrawlingData>() : _search(input, fieldName);
    }

    public static IEnumerable<CrawlingData> GetAllIndexRecords()
    {

        if (!System.IO.Directory.EnumerateFiles(_luceneDir).Any()) return new List<CrawlingData>();

        var searcher = new IndexSearcher(_directory, false);
        var reader = IndexReader.Open(_directory, false);
        var docs = new List<Document>();
        var term = reader.TermDocs();
        while (term.Next()) docs.Add(searcher.Doc(term.Doc));
        reader.Dispose();
        //searcher.Close();
        searcher.Dispose();
        return _mapLuceneToDataList(docs);
    }

     }
    } 
```

4.爬取功能。我正在使用 HtmlAgilityPack.dll 来解析 html 文本。爬行（默认.aspx）

```
 <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div class="crawlText">
        <h2 class="customAlignMent">
            <font color="red">A</font><font color="blue">R</font><font color="black">Y</font><font
                color="green">A</font>
        </h2>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:TextBox ID="txtCrawl" runat="server" TextMode="SingleLine" Width="60%"></asp:TextBox>
                <asp:Button ID="btnCrawling" runat="server" Text="Start Crawling" CssClass="submitButton"
                    OnClick="btnCrawling_Click" OnClientClick="javascript:ClearOldText();"/>
                <p>
                    <asp:RequiredFieldValidator ID="txtCrawlUrl" runat="server" ErrorMessage="*Required!"
                        ControlToValidate="txtCrawl" CssClass="failureNotification" Display="Dynamic"></asp:RequiredFieldValidator>
                    <asp:RegularExpressionValidator ID="txtCrawlUrlR" runat="server" ErrorMessage="Please Enter Valid Url!"
                        ControlToValidate="txtCrawl" CssClass="failureNotification" ValidationExpression="^(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$"
                        Display="Dynamic"></asp:RegularExpressionValidator>
                </p>
                <p>
                    &nbsp;</p>
                <div id="showExtractConetent" runat="server" class="ExtractContent">
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1"
            DisplayAfter="5">
            <ProgressTemplate>
                <div id="divStatusID" runat="server">
                    <p class="textEntry">
                        please wait,processing....</p>
                    <asp:Image ID="ajaxloading" runat="server" ImageUrl="~/Image/loading.gif" AlternateText="processing...." />
                </div>
            </ProgressTemplate>
        </asp:UpdateProgress>
    </div>
    <script type="text/javascript">
    <!--
        function ClearOldText() {

            $get("<%=showExtractConetent.ClientID%>").innerHTML = '';
        }
    -->
    </script>
</asp:Content> 
```

**代码隐藏文件**

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;
using System.IO;
using System.Text.RegularExpressions;
using System.Text;
using DataManager.BOL;
using DataManager.BLL;
using AryaSearch.LuceneSearch;
using HtmlAgilityPack;
using System.Web.UI.HtmlControls;

public partial class _Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnCrawling_Click(object sender, EventArgs e)
    {
        showExtractConetent.InnerHtml = string.Empty;
        Webcrawling(txtCrawl.Text.Trim());   
    }

    private void Webcrawling(string url)
    {
        CrawlingData cData = new CrawlingData();
        string _requestUrl = url.Trim();
        string _encodingType = "utf-8";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(_requestUrl);            
        request.AllowAutoRedirect = true;
        request.MaximumAutomaticRedirections = 3;
        request.UserAgent = "Mozilla/6.0 (MSIE 6.0; Windows NT 5.1; Arya.NET Robot)";
        request.KeepAlive = true;            request.Timeout = 15 * 1000;

        System.Net.HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        showExtractConetent.InnerHtml = ((HttpWebResponse)response).StatusDescription;
        showExtractConetent.InnerHtml += "<br/>";
        _encodingType = GetEncodingType(response);
        System.IO.StreamReader reader = new System.IO.StreamReader
                                       (response.GetResponseStream(), Encoding.GetEncoding(_encodingType));
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        ISet<string> Links = ExtractLinkFromContent(responseFromServer);//gets the links only
        //Display the title
        string pageTitle = getPageTitle(responseFromServer);
        showExtractConetent.InnerHtml = "<h1 class=bold>" + pageTitle + "</h1>";
        // Display the content.
        //Console.WriteLine(responseFromServer);
        showExtractConetent.InnerHtml += StripHtmlTags(responseFromServer);
        showExtractConetent.InnerHtml += "<br/>";
        //Dispaly the Links of all page.
        string urls = string.Empty;
        foreach (string l in Links)
        {
            urls += l.ToString() + "<br/>";

        }
        showExtractConetent.InnerHtml += "<h1 class=bold>Links of Pages</h1>";
        showExtractConetent.InnerHtml += urls;
        cData.Url = _requestUrl;
        cData.Title = pageTitle;
        cData.Contents = StripHtmlTags(responseFromServer);
        var dbstatus = DataManagerBLL.InsertCrawlingData(cData);
        //Create Lucene Index For This Data.
        if (dbstatus>0)
        {
            cData.Id = (int)dbstatus;
            LuceneSearch.AddUpdateLuceneIndex(cData);
        }
        // Clean up the streams.
        reader.Close();
        //dataStream.Close();
        response.Close();

    }

    private ISet<string> ExtractLinkFromContent(String content)
    {
        Regex regexLink = new Regex("(?<=<a\\s*?href=(?:'|\"))[^'\"]*?(?=(?:'|\"))");

        ISet<string> newLinks = new HashSet<string>();
        foreach (var match in regexLink.Matches(content))
        {
            if (!newLinks.Contains(match.ToString()))
                newLinks.Add(match.ToString());
        }

        return newLinks;
    }
    private string GetEncodingType(HttpWebResponse response)
    {
        string pageCharset = string.Empty;
        if (response.ContentType != string.Empty)
        {
            pageCharset = response.ContentEncoding;
        }

        return !string.IsNullOrEmpty(pageCharset) ? pageCharset : "utf-8";

    }
    private string StripHtmlTags(string html)
    {
        if (String.IsNullOrEmpty(html))
            return string.Empty;
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.OptionFixNestedTags = true;
        doc.LoadHtml(html);
        doc.DocumentNode.Descendants()
                .Where(n => n.Name == "script" || n.Name == "style" || n.Name == "#comment")
                .ToList()
                .ForEach(n => n.Remove());
        //Read the body content only.
        HtmlNode.ElementsFlags.Remove("form");
        HtmlNode.ElementsFlags.Remove("a");
        HtmlNode.ElementsFlags.Remove("img");
        HtmlAgilityPack.HtmlNode bodyNode = doc.DocumentNode.SelectSingleNode("//body");
        HtmlAgilityPack.HtmlNode formNode = bodyNode.SelectSingleNode("//form");
        HtmlNodeCollection tags = bodyNode.SelectNodes("//form | //input | //select | //textarea");
        if (tags != null && tags.Count > 0)
        {
            for (int i = 0; i < tags.Count; i++)
                tags.Remove(i);
        }
        if (bodyNode != null)
        {
            HtmlGenericControl div = new HtmlGenericControl();
            div.InnerText = bodyNode.InnerText;
            string tempdivtext = div.InnerText;
            //tempdivtext=tempdivtext.Replace(formNode.InnerText,"");
            tempdivtext = tempdivtext.Replace("\r\n", string.Empty);
            tempdivtext = tempdivtext.Replace("\n", string.Empty);
            tempdivtext = tempdivtext.Replace("\t", string.Empty);
            return tempdivtext.Trim().ToString();
        }

        return doc.DocumentNode.InnerText;
    }

    private string getPageTitle(string html)
    {
        if (String.IsNullOrEmpty(html))
            return string.Empty;
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.OptionFixNestedTags = true;
        doc.LoadHtml(html);
        //Read the body content only.
        HtmlAgilityPack.HtmlNode titleNode = doc.DocumentNode.SelectSingleNode("//title");
        if (titleNode != null)
            return titleNode.InnerText;

        return doc.DocumentNode.InnerText;

    }
} 
```

现在搜索 **Search.aspx**

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Search.aspx.cs" Inherits="Search" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <div class="SearchHeadingText">
        <h2 class="customAlignMent">
            <font color="red">A</font><font color="blue">R</font><font color="black">Y</font><font
                color="green">A</font>
        </h2>

           <asp:UpdatePanel ID="UpdatePanelForSearch" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:TextBox ID="txtSearch" runat="server" TextMode="SingleLine" Width="70%"></asp:TextBox>
                    <asp:Button ID="btnAryaSearch" runat="server" Text="Arya Search" 
                        CssClass="submitButton" onclick="btnAryaSearch_Click" />

                    <p>
                        &nbsp;</p>
                    <div id="showExtractConetent" runat="server" class="SearchResult">
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel>
            <asp:UpdateProgress ID="UpdateProgressSearch" runat="server" AssociatedUpdatePanelID="UpdatePanelForSearch"
                DisplayAfter="5">
                <ProgressTemplate>
                    <div id="divStatusID" runat="server">
                        <p class="textEntry">
                            please wait,Searching....</p>
                        <asp:Image ID="ajaxloading" runat="server" ImageUrl="~/Image/loading.gif" AlternateText="processing...." />
                    </div>
                </ProgressTemplate>
            </asp:UpdateProgress>
    </div>
</asp:Content> 
```

**文件 search.aspx.cs 后面的代码**

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using DataManager.BOL;
using DataManager.BLL;
using System.Text;

public partial class Search : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnAryaSearch_Click(object sender, EventArgs e)
    {

        string input = txtSearch.Text.Trim();
        string fieldName = string.Empty;
        //fieldName = "Title";
        List<CrawlingData> result = DataManagerBLL.searchResult(input, fieldName);
        //Build the text format using string builder to dispaly the result
        StringBuilder resultText = new StringBuilder();
        if (result != null && result.Count > 0)
        {
            resultText.AppendFormat("<p>About {0} results ({1} seconds)</p>", result[0].Total.ToString(), result[0].Time.ToString());
            foreach (CrawlingData s in result)
            {
                resultText.AppendFormat("<a href='{0}' target='{1}'>{2}</a>", s.Url, "_blank", s.Title);
                resultText.AppendFormat("<br/>");
                resultText.AppendFormat("<em class=\"customlink\">{0}</em>", s.Url);
                resultText.AppendFormat("<br/>");
                resultText.AppendFormat("<span class=\"searchContent\"><em>{0}<em></span>", s.Contents);
                resultText.AppendFormat("<br/><br/>");

            }
            showExtractConetent.InnerHtml = resultText.ToString();
        }
        else
        {
            showExtractConetent.InnerText = "No results found";
        }

    }
} 
```

**Linq to Sql 业务对象**

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
namespace DataManager.BOL
{

public class CrawlingData
{
    public Int32 Id { get; set; }
    public string Url { get; set; }
    public string Title { get; set; }
    public string Contents { get; set; }
    public long Total { get; set; }
    public double Time { get; set; }
}

} 
```

**Linq to Sql 业务逻辑（Crud 选项）**

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using DataManager.BOL;
using DataManagerDAL;
using AryaSearch.LuceneSearch;
namespace DataManager.BLL
{
    public static class DataManagerBLL
    {
        public static long InsertCrawlingData(CrawlingData cdata)
        {
            long lastInsertId = 0;
            try
            {
                using (DataClassesDataContext _db = new DataClassesDataContext())
                {

                    tblCrawlingData dataUpdate = _db.tblCrawlingDatas.Where(c => c.Url.ToLower() == cdata.Url.ToLower()).Take(1).SingleOrDefault();
                    if (dataUpdate == null)
                    {
                        tblCrawlingData data = new tblCrawlingData();
                        data.Id = cdata.Id;
                        data.Url = cdata.Url;
                        data.Title = cdata.Title;
                        data.Contents = cdata.Contents;
                        _db.tblCrawlingDatas.InsertOnSubmit(data);
                        _db.SubmitChanges();
                        lastInsertId =data.Id;
                    }
                    else
                    {
                        //data.Id = cdata.Id;
                        dataUpdate.Url = cdata.Url;
                        dataUpdate.Title = cdata.Title;
                        dataUpdate.Contents = cdata.Contents;
                        _db.SubmitChanges();
                        lastInsertId = dataUpdate.Id;
                    }
                    return lastInsertId;
                }
            }
            catch (Exception ex)
            {

                return 0;
            }
        }

        public static bool UpdateCrawlingData(CrawlingData cdata)
        {
            try
            {
                using (DataClassesDataContext _db = new DataClassesDataContext())
                {
                    //tblCrawlingData data = new tblCrawlingData();
                    tblCrawlingData data=_db.tblCrawlingDatas.Where(c => c.Id == cdata.Id).Take(1).SingleOrDefault();                    
                    if (data == null)
                        return false;
                    data.Id = cdata.Id;
                    data.Url = cdata.Url;
                    data.Title = cdata.Title;
                    data.Contents = cdata.Contents;
                    _db.SubmitChanges();
                    LuceneSearch.Optimize();    
                    return true;
                }
            }
            catch (Exception ex)
            {
                return false;
            }
        }

        public static List<CrawlingData> searchResult(string input, string fieldName)
        {
            LuceneSearch.Optimize();            
            return LuceneSearch.Search(input, fieldName).ToList();

        }

    }
} 
```

*如果任何身体有任何问题。请联系我。我非常努力地做到了这一点。所以如果有人从中得到帮助，请给我投票。谢谢*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:01:23.393

也许看看其中一个开源爬虫的文档/源代码？[例如， Apache Nutch](http://nutch.apache.org/)是用 Java 编写的，因此如果您使用 C# 进行开发，阅读起来应该不会太难。

你也可以尝试自己使用谷歌...

[Nutch Wiki](http://wiki.apache.org/nutch/FrontPage)和一些[关于 Nutch 的有趣论文](http://wiki.apache.org/nutch/AcademicArticles)。

[有关开源爬虫](http://en.wikipedia.org/wiki/Web_crawler#Open-source_crawlers)的列表，请参阅 Wikipedia 。

# c# - 在 Rhinoceros 4.0 中绘制类似“InterpCrv”（曲线：插值点）的曲线

> ID：13365005
> 
> 赞同：0
> 
> 时间：2012-11-13T16:50:54.137
> 
> 标签：c#, draw, curve, interpolation

你能帮我画曲线吗？

Rhinoceros 4.0 中的曲线：

[http://habrastorage.org/storage2/6be/922/279/6be9222791436832a5374264ac877606.png](http://habrastorage.org/storage2/6be/922/279/6be9222791436832a5374264ac877606.png)

当我在 C# 中使用 DrawCurve 时，我的曲线很丑:(

[http://habrastorage.org/storage2/84f/e58/c2c/84fe58c2cbef9a0e10e7be8cd7dd04a9.png](http://habrastorage.org/storage2/84f/e58/c2c/84fe58c2cbef9a0e10e7be8cd7dd04a9.png)

我怎样才能让我的曲线像犀牛一样漂亮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:56:44.577

DrawCurve 有一个参数“张力”。您可以根据需要调整它以柔化曲线。

[http://msdn.microsoft.com/en-us/library/554h284b.aspx](http://msdn.microsoft.com/en-us/library/554h284b.aspx)

# database-design - 是否有正当理由将国际代码与其他号码分开存储？

> ID：13365006
> 
> 赞同：1
> 
> 时间：2012-11-13T16:50:54.620
> 
> 标签：database-design, internationalization, phone-number

我看过谷歌图书馆的 libphonenumber，我正在考虑用它来格式化用户在国际网站上输入的电话号码。最终结果需要保持一致，因为内部 CRM 与电话系统集成，以便在客户打电话时提取正确的用户帐户详细信息。电话系统将始终包含该用户的国际代码，即使呼叫来自与办公室相同的国家/地区。

因此，我打算提供一个带有国际拨号代码的下拉列表，然后将电话字段的其余部分保留为自由格式，但仅限于数字、空格、括号和破折号。然后将通过删除除数字之外的所有内容来清理条目。

libphonenumber 将进行初始健全性检查以确定它是否看起来是一个有效的数字，然后将其转换为正确的国际格式。

我认为将区号和用户号码分开分开会有点过分，但我的问题是是否只存储最终的完全国际格式的条目，或者将国际代码分别存储到号码的其余部分（例如 2 db 字段）。这样做有正当的技术原因，还是纯粹的商业决策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:30:28.590

> ...我的问题是是否只存储最终的完全国际格式的条目，或者将国际代码单独存储到数字的其余部分（例如 2 db 字段）。这样做有正当的技术原因，还是纯粹的商业决策？

每当您在数据库行中创建字段时，都需要出于业务原因来存储该信息。

在您的示例中，单独存储国际拨号代码可以确定您从不同国家/地区呼叫的客户数量（对国际拨号代码进行分组和求和）。此外，在同一国家/地区拨打电话时，您不需要国际拨号代码。因此，在大多数情况下，显示没有国际拨号代码的电话号码可能不会让用户感到困惑。

对于大多数企业来说，将国际电话号码分成不同的字段是很困难的，而且可能是矫枉过正。但是，如果您有这样做的商业原因，您可以将大多数电话号码分解为区域、区域和地区段。（我不熟悉所有国际电话号码格式，因此您可能需要添加其他部分。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T10:03:21.937

在您的数据库中存储两个字段：

> 1.  两位数国家代码（字符串）
> 2.  电话号码的国家部分（字符串）

使用[libphonenumber](https://github.com/googlei18n/libphonenumber)，您可以解析数字以生成您可能希望在数据库之外使用的不同格式。

例如：

```
| countryCode | nationalNumber
--------------------------------
| US          | 800-flowers 
```

可以按如下方式使用（假设这个[Javascript lib](https://www.npmjs.com/package/google-libphonenumber)）：

```
// Google's libphonenumber library
import libphonenumber from 'google-libphonenumber';

// Grab the parts of the lib we'll need
const phoneUtil = libphonenumber.PhoneNumberUtil.getInstance();
const phoneFormat = libphonenumber.PhoneNumberFormat;

// Parse the number -- assume we already got this from the DB
let parsed;

try {
  parsed = phoneUtil.parse(db.nationalNumber, db.countryCode);
} catch(e) {
   throw new Error("Couldn't parse the phone number");
}

// Now print a few examples
console.log(phoneUtil.format(parsed, phoneFormat.NATIONAL));
console.log(phoneUtil.format(parsed, phoneFormat.INTERNATIONAL));
console.log(phoneUtil.format(parsed, phoneFormat.E164)); 
```

将输出：

> (800) 356-9377
> 
> +1 800-356-9377
> 
> +18003569377

...这足以分别显示给本地用户、国际拨号和编程使用（例如 SMS 消息传递）。

# c# - 如何以编程方式访问 Office Word 2010 中的“打印预览和打印”页面

> ID：13365007
> 
> 赞同：1
> 
> 时间：2012-11-13T16:50:56.477
> 
> 标签：c#, printing, word-automation, word-2010

我正在编写一个与 Microsoft Office Word 2010 相关的医疗程序（使用 C# 语言）。在 Word 2010 中有一个页面“打印预览和打印”，您可以通过按`Ctrl`+访问该页面`P`。启动 Office Word 后，我想查看“打印预览和打印”，但我看到的是 Office 2007/2003 的旧打印预览，这意味着我不知道如何从 office com 对象访问此页面。

我试过的代码：

```
oWordDoc.PrintPreview();
_oWord.Visible = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:13:50.297

您可以随时尝试使用[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)来执行与热键`CTRL`+相同的操作`P`

```
SendKeys.Send("^P"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:12:34.220

尝试

```
int dialogResult = wordApp.Dialogs[Word.WdWordDialog.wdDialogFilePrint].Show(ref missing);
if (dialogResult == 1)
{
    oWordDoc.PrintOut(ref missing, ref missing, ref missing, ref missing,
                      ref missing, ref missing, ref missing, ref missing,
                      ref missing, ref missing, ref missing, ref missing,
                      ref missing, ref missing, ref missing, ref missing,
                      ref missing, ref missing);
} 
```

# objective-c - 在 Objective-C 中创建两个线程

> ID：13365009
> 
> 赞同：6
> 
> 时间：2012-11-13T16:51:00.080
> 
> 标签：objective-c, xcode, multithreading, network-programming

我对 Xcode 和 Objective-C 很陌生，所以我还不知道自己在做什么！;-)
基本上我想要一个可以运行两个线程的 iPhone 应用程序，稍后将`UDP Sockets`用于与其他应用程序通信。

`start-Thread/stop-Thread`当按下 UI 中的按钮时，我已经设置了函数来做出反应，现在我想用代码填充它们以实际创建和启动线程。

*   这里的正确程序是什么？

*   我需要子类 `NSThread`吗？

*   我在哪里实现新线程将执行的代码？

    我看不到运行方法或类似的东西。我想这与**`selector`**我不明白的有关。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T16:59:31.340

使用[调度队列](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)。它们本质上是轻量级线程，您无需直接担心线程或排队。

```
-(void) spawn
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        [self doWorkInBackground];
    });
} 
```

您可以使用内置队列之一或您自己的。

而且您可能也应该阅读[块](http://developer.apple.com/library/ios/#featuredarticles/Short_Practical_Guide_Blocks/_index.html)，特别是内存管理方面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:12:39.967

```
- (void)performBlockInBackground:(void (^)())block {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        block();
    });
} 
```

然后你这样称呼它：

```
[self performBlockInBackground:^{
    NSLog(@"Log from background");
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:58:26.073

这是一个非常深入的讨论，但 Apple 的“[并发编程指南](http://developer.apple.com/library/ios/ipad/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)”应该可以帮助您入门。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T08:13:37.800

您也可以考虑使用[NSOperation](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)。它在后台使用调度队列，但提供更高级别的 API 和取消正在进行的操作的可能性（这可能对您有帮助）。

# powershell - Powershell - Exchange 联系人中的自定义属性

> ID：13365011
> 
> 赞同：0
> 
> 时间：2012-11-13T16:51:05.263
> 
> 标签：powershell, contacts, powershell-2.0, exchange-server-2010, user-defined

列出“共享公用文件夹”中的联系人：

```
# First create Outlook object and get the Mapi namespace. 
$Outlook       = New-Object -com Outlook.Application 
$Namespace     = $outlook.GetNamespace("MAPI") 
$PublicFolder  = $Namespace.Folders.Item("Public Folders - me@company.com")
$PublicFolders = $PublicFolder.Folders.Item("All Public Folders")
$AddressBook   = $PublicFolders.Folders.Item("Company Address Book")
$Contacts      = $AddressBook.Items        
foreach ($Contact in $Contacts){
    $Contact.FullName
} 
```

每个联系人都有一些自定义属性。例如 EmpID、“Contact Type”、“IsManager”……我似乎无法弄清楚如何通过 Powershell 加载在 Outlook 中创建的 User-Defined 属性。

我发现[这篇文章](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopmentlegacy/thread/c870b2e2-3ef2-4a9f-a421-422b724dc43d)涉及：定义自定义属性，然后使用该定义加载自定义属性......但我不确定这是否是正确的地方，因为我尝试处理的所有内容都会给出我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:20:47.407

```
foreach ($Contact in $Contacts){
    $EmpID = $Contact.UserProperties.Find('EmpID').Value
    $Contact.FullName
    $EmpID
} 
```

# apache - web&WebSocket 是哪个框架？

> ID：13365013
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:51:10.813
> 
> 标签：apache, websocket

我正在寻找将用于 Web 项目并与 WebSocket 一起使用的框架。我有一台服务器（apache），除了安装新的 mod 之外，我无法更改任何其他内容 - 如果没有任何框架支持仅在一台服务器上运行或者它没有良好的文档，则排除这个。如果 WebSocket 可以在后台运行而不是一直在控制台中运行，那就太好了。

我看过看起来很有前途的 Python，并且我有使用 PHP 的经验，但是有问题我将如何解决持续运行 WebSocket 的问题。我实际上不知道从哪里开始以及我应该选择哪种语言，所以我想请你帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:23:38.293

如果您已经倾向于编写脚本，那么您应该看看 Node.JS，它可以让您同时运行 http 和 WS。Node.JS 上最好的 WS 实现是[https://github.com/einaros/ws](https://github.com/einaros/ws)，您可以在 Node.JS 原生 http 服务器旁边运行它。

如果您对只有一台服务器的商业级解决方案感兴趣，那么看看 Kaazing，但请记住，独立运行的服务器面向纯 HTML5+WS 应用程序，换句话说，您编写丰富的 HTML5 应用程序在浏览器中运行并利用最适合应用程序的任何协议。但是，如果您想保留 Apache 并仍然使用 CGI，Kaazing 将与 Apache 一起运行。

# .net - 有没有办法直观地创作 WPF 自定义控件？

> ID：13365017
> 
> 赞同：1
> 
> 时间：2012-11-13T16:51:24.853
> 
> 标签：.net, wpf, visual-studio, custom-controls, expression-blend

有没有办法使用可视化 XAML 设计器来创作 WPF**自定义控件**，就像使用用户控件一样？

据我所知，在 Visual Studio 2010 和 2012 中没有这样的东西。我也看过 Expression Blend 4，但似乎没有一个支持这一点。

我觉得这很难相信，因为在我看来这将是一个明显且必要的功能。

为了清楚起见，我正在寻找一个 XAML 编辑器，当我使用它时，我可以在其中直观地看到 XAML 的结果作为呈现的控件，就像在 Visual Studio 2010 中创作用户控件时一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:14:46.737

这是我想出的一件事：

1.  在 Visual Studio 2010 中创建一个新的 WPF 自定义控件项目。
2.  添加一个名为**CustomControl1Dictionary.xaml**的新资源字典。
3.  添加一个名为**CustomControl1View.xaml**的新用户控件。
4.  像这样更改项目中的代码：

    **CustomControl1Dictionary.xaml**

    ```
    <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:local="clr-namespace:WpfCustomControlLibrary1">
        <Style TargetType="{x:Type local:CustomControl1}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="30" FontWeight="Bold">This freaking sucks!</TextBlock>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>    
    </ResourceDictionary> 
    ```

    **主题\Generic.xaml**

    ```
    <ResourceDictionary
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/WpfCustomControlLibrary1;component/CustomControl1Dictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary> 
    ```

    **CustomControl1View.xaml**

    ```
    <UserControl x:Class="WpfCustomControlLibrary1.CustomControl1View"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 xmlns:local="clr-namespace:WpfCustomControlLibrary1"
                 mc:Ignorable="d" 
                 d:DesignHeight="292" d:DesignWidth="786">
        <local:CustomControl1 />
    </UserControl> 
    ```

这使我可以将用户控件作为弹出窗口打开，并且在构建项目并单击用户控件设计器后，我可以看到我在自定义控件资源字典中对 XAML 所做的更改。

# ios - UIPickerview 填满屏幕

> ID：13365018
> 
> 赞同：0
> 
> 时间：2012-11-13T16:51:26.587
> 
> 标签：ios, height, width, picker

我想要一个填满整个屏幕的 UIPickerView。这是我的代码...

```
pickerView1 = [[UIPickerView alloc] init];
[pickerView1 setDelegate: self];
[pickerView1 setFrame: CGRectMake(0,0, 480, 320)];
[self.view addSubview: pickerView1]; 
```

这只是填充宽度，而不是高度，我在输出中收到这条消息：“invalid height value 320.0 pinned to 216.0”

为什么 ？如何调整选择器的高度？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:57:00.877

您只是无法调整 UIPickerView 的高度。检查此主题以获取更多信息：[这里](https://stackoverflow.com/questions/573979/how-to-change-uipickerview-height)

但是，您可以更改宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:01:16.823

我不相信您可以将选择器视图的高度增加到某个点以上。（虽然不确定那是什么，但它大约是 240 最大值）不确定是不是因为这个例子，但是您的 W 和 H 是倒置的，所以你的选择器因此而离开屏幕。

```
UIPickerView *pickerView1 = [[UIPickerView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 240.0)]; 
```

# jsf - Primefaces 程序化 tabMenu 动作监听器

> ID：13365023
> 
> 赞同：0
> 
> 时间：2012-11-13T16:51:38.570
> 
> 标签：jsf, primefaces

## 背景和目的：

我想使用 tabMenu 来根据选定的选项卡在同一页面上切换一些显示的内容。我选择 tabMenu 是因为它支持模型绑定，从而使我能够使用编程模型。我不想使用 tabMenu 进行导航，也不想再次请求当前页面。我将我的实现放入一个复合组件 (CC) 中，以便在设计部分具有灵活性，以防 CC 被重用或放置在其他页面上。我的这个 CC 的支持 bean 实现了 ActionListener 接口，该接口被添加到添加到菜单模型的每个 primefaces menuItem 中。然后，重写方法的实现应该在后台更新模型，以便根据单击的 menuItem 正确显示动态内容。在我尝试使用 CC 的页面上，我还使用 primefaces tabView 来分隔不同的内容。在我想使用我的 CC 的选项卡中，我也在使用 primefaces AccordionPanel，其中我的 CC 是它的一个选项卡的内容。

## 错误情况和预期行为：

将我的复合组件放在我的页面上的手风琴面板选项卡之一中，菜单模型正确构建在我的支持 bean 中并显示。单击一个菜单项不会导致触发操作（我可以判断，因为 eclipse 不会在我的 processAction 方法的断点处停止）。根据服务器日志没有抛出异常。

由于 menuItem 具有可用于服务器端回调的 actionListener 属性，因此我希望使用 addActionListener() 方法添加到 menuItem 的 ActionListener 具有相同的功能。

我还尝试将我的 CC 放在外部 tabView 之外，结果相同。

## 问题：

是否有可能实现我打算用 tabMenu 做的事情？除了 tabMenu，我还有其他选择吗？为了获得所需的行为，我必须改变什么？

页面定义：

```
 <p:tabView id="someTabViewId">
    <p:tab id="tabViewsFirstTab>
      <p:accordionPanel id="accordionPanelId" multiple="true" cache="false">
        <p:tab id="someTab1Id" title="someTab1Title">
... someTab1 content here ...
        </p:tab>

        <p:tab id="ccTab" title="ccTabTitle">
          <ccNameSpace:ccComponentName id="ccId" />
        </p:tab>

        <p:tab id="someTab2Id" title="someTab2Title">
... someTab2 content here ...
        </p:tab>
      </p:accordionPanel>
    </p:tab>
 </p:tabView> 
```

CC定义：

```
 <composite:interface>
  </composite:interface>
  <composite:implementation xmlns:anotherCCNameSpace="http://java.sun.com/jsf/composite/components/someEntity/someSpecialContent">
    <h:panelGrid style="width:100%;">
      <p:tabMenu id="test1" model="#{ccBean.tabMenuModel}" />
      <anotherCCNameSpace:specialComponent id="test" />
    </h:panelGrid>
  </composite:implementation> 
```

豆定义：

```
@Named
@ViewScoped
public class CcBean implements ActionListener, SomeCustomInterface {

  private MenuModel menuModel;

...

  @Override
  public void processAction(ActionEvent event) throws AbortProcessingException {
    this.doSomePreparations(event);
  }

 @PostConstruct
  public void postConstruct() {
    this.menuModel = new DefaultMenuModel();
    for (SomeGroupEntity groupEntity : this.getAllSomeGroupEntities()) {
      MenuItem menuItem = new MenuItem();
      menuItem.setId("menuItem" + groupEntity.getId());
      menuItem.setUpdate("test1 test");
      menuItem.addActionListener(this);
      menuItem.setImmediate(true);
      menuItem.setValue(groupEntity.getName());
      this.menuModel.addMenuItem(menuItem);
    }
  }

  public MenuModel getTabMenuModel() {
    return this.menuModel;
  }

...
} 
```

# asp.net - 我应该为 ASP.NET MVC 和 ASP.NET Web API 创建单独的模型吗？

> ID：13365025
> 
> 赞同：1
> 
> 时间：2012-11-13T16:51:56.963
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我在同一个项目中使用 ASP.NET MVC 和 ASP.NET Web API。我正在争论是否将这些模型分开（即，将 MVC 模型放在“Models”文件夹中，并将 Web API 模型放在“ApiModels”文件夹中）。

我应该（不）这样做吗？将它们分开会导致问题吗？将它们放在一起并为 MVC 和 Web API 使用相同的模型会导致问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:22:26.967

> 我应该（不）这样做吗？

我必须同意 codehunter 和 HollyStyles。这取决于，但你应该倾向于“让它们分开”。

> 将它们分开会导致问题吗？

不一定，但这取决于您对问题的定义。如果你有一个天真或没有经验的开发人员在编写代码，他们可能会看着它说“嘿，你的代码不是 DRY，你太烂了。” 他们当然可能是错的，但你仍然必须向他们解释原因，所以这可能是个问题。

> 将它们放在一起并为 MVC 和 Web API 使用相同的模型会导致问题吗？

不，让我给出一个理由。MVC 和 WebAPI 的模型由不同的框架使用。例如，为了确保模型属性呈现为隐藏输入，您可以使用 [HiddenInput] 属性对其进行装饰。WebAPI 模型中没有这样的概念。同样，MVC 具有 Display、Remote 和其他您通常不会在 WebAPI 模型上使用的属性。

另一方面，WebAPI 模型可以使用在 MVC 中没有任何意义的 [DataContract] 和 [DataMember] 属性。您可以使用它们为 API 输出指定特殊名称（例如，重命名 XML 或 JSON 节点）。

虽然您可以在 MVC 和 WebAPI 中使用单个模型替身，但您最终可能会得到具有混合问题的模型：例如，用于 API 输出格式的 [DataMember] 属性和用于 MVC 表单视图的 [HiddenField] 属性渲染。人们可以将其视为污染的一种表现。

只要您的模型类是没有方法或智能行为的简单数据容器，拥有具有相同属性/模式的不同模型类并不违反 DRY。为什么？因为它允许您使用解决不同问题的不同属性来装饰这些类。

再说一次，如果您的模型不使用这些属性中的任何一个，并且您不打算这样做，那么将相同的模型加倍用于 MVC 和 WebAPI 是可以的。所以答案真的是，这取决于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:08:13.180

像往常一样，这类问题的答案是：“嗯，这取决于”

就我个人而言，我有一个专门用于数据层、我的宁静层和 Web 应用程序都引用的 poco 模型的类库。

在此之前我发现的唯一问题是 LinqToSql 生成的类（因此也可能是 EF）可以具有循环引用，当在 ApiController 类中序列化为 JSON 时，WebApi 会阻塞，最终进入无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:50:53.580

我一见钟情说不，因为两者都有自己的目的*。*

mvc 中的 viewmodel 用于表示视图和对其处理的数据进行验证的属性。web api 似乎没有用于此目的。因此，即使我们有可以用作视图模型的实体，我们也总是有属性。

此外，这将使应用程序更难管理更改。

但是，如果您的应用程序相当小，您可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T23:33:23.277

我想说，如果你将不得不重新编码或复制并过去所有内容，如果你将它们分开，那么不要将它们分开。如果将它们分开意味着不复制任何内容，那么您可以安全且明智地分开。

# oracle - Oracle - 在插入之前触发检查约束

> ID：13365026
> 
> 赞同：1
> 
> 时间：2012-11-13T16:51:57.540
> 
> 标签：oracle, plsql, triggers

我想创建一个简单的触发器来检查表中存储的变量。
如果变量的值为'1'，则批准插入，
否则如果变量的值为'2'，则提示错误信息。

```
CREATE OR REPLACE TRIGGER approval 
BEFORE INSERT ON VIP
REFERENCING OLD AS MEMBER
FOR EACH ROW
DECLARE 
  CONDITION_CHECK NUMBER;
BEGIN
  SELECT CONDITION INTO CONDITION_CHECK FROM MEMBER; 
  IF CONDITION_CHECK = '2' THEN
    RAISE_APPLICATION_ERROR (-20000, ' UPGRADE DENIED!');
  END IF;
END; 
```

但是即使条件值为“1”，此触发器也会禁用所有条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:58:10.580

您可以简单地`:new.condition`在触发器中引用

```
CREATE OR REPLACE TRIGGER approval 
  BEFORE INSERT ON VIP
  FOR EACH ROW
BEGIN
  IF :new.condition = '2' THEN
    RAISE_APPLICATION_ERROR (-20000, ' UPGRADE DENIED!');
  END IF;
END; 
```

但是，将这种逻辑放入触发器中几乎没有意义。`CHECK`在列上定义一个约束以确保它`condition`是一组允许的值之一会更有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:02:23.053

使用`AFTER`触发器检查条件：值可以被其他`BEFORE`触发器修改。在`AFTER`触发器中，您可以保证该值之后不会更改。

看来您缺少一个条件`SELECT`（如果我相信您正试图从另一个表中获取值）：

```
CREATE OR REPLACE TRIGGER approval 
AFTER INSERT ON VIP
FOR EACH ROW
DECLARE 
  CONDITION_CHECK NUMBER;
BEGIN
  SELECT CONDITION 
    INTO CONDITION_CHECK 
    FROM MEMBER 
   WHERE member_id = :new.member_id; 
  IF CONDITION_CHECK = '2' THEN
    RAISE_APPLICATION_ERROR (-20000, 'UPGRADE DENIED!');
  END IF;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:55:38.870

您引用的是旧数据而不是新数据 - 大概这不是您想要的？

# javascript - 用户更改文本框的值时的jQuery / Javascript函数

> ID：13365027
> 
> 赞同：0
> 
> 时间：2012-11-13T16:52:07.977
> 
> 标签：javascript, jquery, html, forms

当用户更改文本框的值时，我想触发一个函数。不是当他们点击它时（喜欢`onfocus`，`.focus`或`.change`），而是当他们从预填充值编辑内容时。

HTML：

```
<input id="formloginpassword" type="text" name="pass" placeholder="Password" value="filled-from-backend"></input> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:56:10.400

你可以试试[`keyup`](http://api.jquery.com/keyup/)，[`keydown`](http://api.jquery.com/keydown/)或者[`keypress`](http://api.jquery.com/keypress/)：

```
​$("input").on("keyup", function(){
    console.log($(this).val())
});​ 
```

**[例子](http://jsfiddle.net/ChaseWest/mB2g6/)**

在这里查看有关这 3 个事件的更多详细信息：[jQuery keypress、keydown、keyup black magic（在 Mac 上）背后的理论是什么？](https://stackoverflow.com/questions/12827408/whats-the-theory-behind-jquery-keypress-keydown-keyup-black-magic-on-macs/12827516#12827516)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:56:41.443

也许没有按键？

```
$("#formloginpassword").keypress(function() {
   alert("Handler for .keypress() called.");
}); 
```

此处的文档->[按键](http://api.jquery.com/keypress/)

# azure - 如何让云服务与 Azure 中的 VM 通信？

> ID：13365028
> 
> 赞同：2
> 
> 时间：2012-11-13T16:52:10.503
> 
> 标签：azure, virtual-machine

我在 Azure 中设置了云服务和 VM 角色。My Cloud Service 是一个在 Server 2012 上运行的简单 MVC 站点，VM 是一个安装了 redis 的 Ubuntu 操作系统。Azure 中的角色间通信应该如何工作？（一切都在同一个数据中心。）

我可以在 VM 上设置一个公共端点，但我宁愿不暴露我的 redis 机器。有没有合适的方法来做到这一点？分配给我的 VM 的私有 IP 是否固定？如果是这样，我可以使用它，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:40:47.143

您必须使用 Windows Azure 虚拟网络 (WAVN) 才能打开 Windows Azure 虚拟机和 Windows Azure 云服务之间的通信。

请注意，WAVN 明确要求指定关联组。因此，如果您没有 - 您将能够在创建虚拟网络时创建。现在，您的云服务（即您的网络/工作人员角色）必须在同一个关联组中才能“加入”该虚拟网络。我不确定在创建服务后是否可以更改云服务的关联组。因此，只需通过指定您创建虚拟网络的关联组来创建新的云服务。

下一步是配置虚拟机以使用您创建的虚拟网络 - 它是“从图库”过程的一部分。

现在您需要指示云服务（web/worker 角色）。这是通过 Visual Studio 中 Cloud 项目的 .csconfig 文件完成的。目前还没有用于配置网络的 UI。您必须包含一个`NetworkConfiguration`部分作为`Configuration`根元素的直接后代：

```
<NetworkConfiguration>
  <VirtualNetworkSite name="SampleNetwork" />
  <AddressAssignments>
    <InstanceAddress roleName="ContactManager.Web">
      <Subnets>
        <Subnet name="FrontEnd" />
      </Subnets>
    </InstanceAddress>
  </AddressAssignments>
</NetworkConfiguration> 
```

您描述您的角色以及您希望角色驻留的虚拟网络名称和子网。

手指交叉，现在一切都将在同一个网络中 - 你创建的那个。名称解析必须正常工作，但它处于预览状态，因此预计会出现问题。现在，您的 MVC 应用程序可以直接“调用”您的 Linux VM。对于寻址，只需使用 VM 名称。

如果您想从 Linux VM 调用 MVC - 您必须处理 WebRole 的特定实例。

至于 IP 地址 - 内部 IP 地址（AKA 直接 IP 地址或 DIP）永远不会固定！即使您创建了虚拟网络，也只能让 DHCP 分配 IP 地址。它们将从您在虚拟网络设置中指定的池中分配。

可以在[此处](http://convective.wordpress.com/2012/08/26/windows-azure-cloud-services-and-virtual-networks/)找到有关 Windows Azure 虚拟网络的好读物。

# ruby-on-rails - 如何在 .html.erb 页面上显示控制器的变量（在循环中）？铁轨上的红宝石

> ID：13365040
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:52:42.370
> 
> 标签：ruby-on-rails, ruby, loops, hash, render

我的控制器中有以下代码：

```
struc = {'en' => 'english', 'es' => 'espaniol', 'de' => 'germany', 'fr' => 'french', 'it' => 'italy'}
struc.each_pair do |key, value|
  @key=key
  @value=value
end 
```

在我的 application.html.erb 我有以下

```
<select name="Language" onchange="location=this.options[this.selectedIndex].value;">
    <option value="/<% @key %>/<%= @rem %>"><%= @value %></option>
</select> 
```

现在我怎样才能让'@key'和'@value'的值递归显示在（application.html.erb）上？

**另外我怎样才能改变它的样式，即使值看起来更小，很好地藏起来？**

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:57:19.520

为什么不喜欢

```
in controller

@langs = { :en => 'english', 
           :es => 'espaniol', 
           :de => 'germany', 
           :fr => 'french', 
           :it => 'italy' }

in view

<select name="language" onChange="location = this.options[this.selectedIndex].value;">
  <% @langs.each_pair do |short, long| %>
    <option value="<%= short %>"><%= long %></option>
  <% end %>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:56:53.003

您需要通过将 struc 转换为实例变量（即@struc）来使视图对它可用。然后在你看来做

```
<select name="Language" onchange="location=this.options[this.selectedIndex].value;">

<% @struc.each_pair do |key, value| %>
        <option value="/<%= key %>/<%= @rem %>"><%= value %></option>
<% end %>

</select> 
```

# image - 获取Java中每种文件类型的内容

> ID：13365043
> 
> 赞同：1
> 
> 时间：2012-11-13T16:53:11.857
> 
> 标签：image, input, copy, bufferedreader, file-type

我想做的首先是一些文件的一种复制程序：

你输入一个字典，它应该被粘贴到某个地方。

一切正常，除了不是 .txt 的每个文件类型！所有word数据都打不开……png、jpg、gif数据都打不开文件传输后！？

所以这就是我得到的：

```
@SuppressWarnings("deprecation")
static void crypt(String input, String output){
     File folder = new File(input);
     File[] listOfFiles = folder.listFiles();
     for (File file : listOfFiles){
         FileInputStream fis = null;
         BufferedInputStream bis = null;
         DataInputStream dis = null;
         System.out.println("['"+file.getName()+"' is copied]");
         try {
              fis = new FileInputStream(file);

              // Here BufferedInputStream is added for fast reading.
              bis = new BufferedInputStream(fis);
              dis = new DataInputStream(bis);
              FileWriter fstream;
              if(output.endsWith(file.separator) || output.endsWith("/")){  
                  fstream = new FileWriter(output+file.getName());
              }else{
                  fstream = new FileWriter(output+file.separator+file.getName());
              }
              BufferedWriter out = new BufferedWriter(fstream);

              //Close the output stream

              // dis.available() returns 0 if the file does not have more lines.
              while (dis.available() != 0) {

              // this statement reads the line from the file and print it to
                // the console.
                out.write(dis.readLine());
                out.newLine();
              }
              out.close();
              // dispose all the resources after using them.
              fis.close();
              bis.close();
              dis.close();

            } catch (FileNotFoundException e) {
              e.printStackTrace();
            } catch (IOException e) {
              e.printStackTrace();
            }

     }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:55:11.400

这

```
 out.write(dis.readLine());
    out.newLine(); 
```

是你的问题。并非每种文件类型都是行分隔的。我将简单地执行逐字节复制以保留内容。也许您可以查看许多可用的[IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html) `copy()`方法？

# python - Python错误：AttributeError：'int'对象没有属性'append'

> ID：13365053
> 
> 赞同：4
> 
> 时间：2012-11-13T16:53:54.290
> 
> 标签：python, dictionary

所以我查看了类似的问题，但我仍然遇到同样的问题，无法弄清楚。对于这个编程任务，我正在为 Clite 词典的一小部分创建一个简化版本的词法分析。我正在从输入文件中提取标记，输出我的分析结果。我正在使用字典为找到的标识符创建一个符号表。当我在不同的行上找到相同的标识符时，我需要将找到它的行附加到符号表中。例如，我在第 2 行和第 7 行找到标识符“number18”。所以符号表需要从 {number18: 2} 到 {number18: 2,7}

当我尝试将新行号附加到当前字典条目时，问题就出现了。当我在问题标题中发布时，我收到了错误。到目前为止，这是我的代码

```
y = 0
s2 = ()
stable = dict()

for line in open("Sample.txt","r"):
    x1 = ''
    for char in line:
    if char.isalpha():
        x1 = x1 + char
    elif char.isdigit():
        x1 = x1 + char
    elif char == '.':
        x1 = x1 + char
    elif x1 != '':
        break

    #print (x1)    
    if (x1 == "for" or x1 == "bool" or x1 == "char" or x1 == "else" or x1 == "false" or x1 == "float" or x1 == "if" or x1 == "int" or x1 == "main" or x1 == "true" or x1 == "while"):
        s2=(y,"Keyword",x1)
    elif x1.isidentifier():
        s2=(y,"Identifier",x1)
    if x1 in stable.keys():
        stable[x1].append(y)
    else:
        stable[x1]=y

    elif x1.isdigit():
        s2=(y,"Int",x1)
    else:
        s2=(y,"Float",x1)
    print (s2)
    y=y+1

print (stable) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T16:55:58.337

您首先将您的`dict`值设置为`int`：

```
 stable[x1]=y 
```

但后来你试着把它当作一个`list`：

```
 stable[x1].append(y) 
```

从`list`包含你的第一个开始`int`：

```
 stable[x1]=[y] 
```

并且`.append()`意志奏效。

或者，您可以使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
stable = defaultdict(list) 
```

然后随意附加而无需测试密钥是否已经存在：

```
 stable[x1].append(y)  # No need to do `if x1 in stable`. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:56:03.533

```
elif x1.isidentifier():
    s2=(y,"Identifier",x1)
    if x1 in stable.keys():
        stable[x1].append(y)
    else:
        stable[x1]=y 
```

在上面的 else 部分中，您是`integer`第一次添加。因此，当您`append`下次使用时，您会收到该错误。

当您第一次将值添加到 dict 时，而是将整数包装`y`在列表中`[y]`

```
 else:
        stable[x1]=[y] 
```

好吧，您已经从*@Martijn 的回答*中知道，在这里使用 a`defaultdict`会是更好的选择，因为这样您就不需要检查`containment`of `key`。

但是，仍然与您检查 dict 中的键的方式有关：-

```
if x1 in stable.keys(): 
```

您不需要使用`stable.keys()`，只需使用`stable`，`keys`它只会签入。

```
if x1 in stable: 
```

# c# - Windows 事件 - 有人知道如何指定“关键字”值吗？

> ID：13365060
> 
> 赞同：2
> 
> 时间：2012-11-13T16:54:11.760
> 
> 标签：c#, windows, events, keyword

使用 C# 将事件写入 Windows 事件时，“关键字”值始终为“经典”。我一直在网上搜索，找不到任何东西。
这可能吗？如果是这样，我会很感激一个例子。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:45:15.263

因此，当我让您正确时，您的意思是[StandardEventKeywords](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.standardeventkeywords.aspx)枚举。你想写在windows日志中。正确的？

在这种情况下，您需要使用[EventProvider.WriteEvent](http://msdn.microsoft.com/en-us/library/bb382834.aspx)方法。在[EventProvider.WriteEvent](http://msdn.microsoft.com/en-us/library/bb382834.aspx)的描述中，您可以找到示例。

如果您想添加除“经典”之外的其他“关键字” - 我想您需要在 eventPayload 数组中添加适当的枚举值。试试看，让我知道结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T14:52:33.413

要编写使用自定义关键字标记的事件日志条目，您必须创建一个事件清单文件以及一个资源 dll。然后您必须注册此清单，清单必须引用资源文件。有两种方法可以实现这一点：

1.  使用[ecmangen手动](https://msdn.microsoft.com/en-us/library/windows/desktop/dd996930%28v=vs.85%29.aspx)
2.  使用[Microsoft EventSource Library](https://www.nuget.org/packages/Microsoft.Diagnostics.Tracing.EventSource) nuget 包提供的 eventregister 程序

手动路线更复杂，但会给您带来更清晰的结果。借助Daniel Gordon[撰写的“在 .NET 中写入事件日志 - 正确方式](http://blog.dlgordon.com/2012/06/writing-to-event-log-in-net-right-way.html)”一文，您将能够正确记录您的事件。

总结一下过程：首先，使用 ecmangen 创建一个清单。阅读该工具提供的帮助，它将引导您完成创建过程。使用自定义部分编写清单后`keywords`，使用 mc 对其进行编译，然后按照文章中的说明生成资源文件。要使用您的清单，您必须将其安装为事件日志源。使用 wevtutil 程序执行此操作。如果您不更改清单以指向之前创建的资源 dll，程序将失败。关于这个过程的一个奇怪的事情是 wevtutil 程序不断报告错误，除非您已将资源文件复制到其路径中不包含空格的位置。

成功注册事件源后，您可以使用 System.Diagnostics.Eventing 命名空间将事件记录到其中。像这样创建一个 EventProvider：

```
var provider = new EventProvider( new Guid( "VALUE-OF-GUID-ATTRIBUTE-OF-PROVIDER-ELEMENT-IN-MANIFEST" ) ); 
```

指定与您的清单相对应的事件描述符。看一下编译清单时生成的 cs 文件。

```
EventDescriptor customDescriptor;
unchecked
{
    customDescriptor = new EventDescriptor( 0x2, 0x0, 0x10, 0x4, 0xa, 0x1, ( long ) 0x8000000000000001 );
} 
```

最后，将 Eventdescriptor 传递给您的提供者以记录一条消息：

```
var customEventResult = provider.WriteEvent( ref customDescriptor, (long)1, 1, "Custom Event" ); 
```

这将创建一个事件日志条目，其关键字设置为清单中定义的任何内容，即带有 mask 的关键字`0x1`。

如果您想从所有这些手动编译之类的东西中解脱出来，您可以使用 nuget 安装 Microsoft EventSource 库。不幸的是，这条路线有两个缺点，一是您无法定义自定义渠道，二是自定义关键字“脏”，请参阅我的冗长问题[here](https://stackoverflow.com/questions/37320200/how-to-properly-define-keywords-in-microsoft-diagnostics-tracing-eventsource)。

# ruby - Windows 7 上的 ChiliProject

> ID：13365064
> 
> 赞同：2
> 
> 时间：2012-11-13T16:54:18.860
> 
> 标签：ruby, windows, chiliproject

当我使用 -d 前缀启动服务器时，它会出错：

```
C:\ruby\chili>bundle exec ruby script/server -e production -p 3005 -d
=> Booting WEBrick
=> Rails 2.3.14 application starting on http://0.0.0.0:3005
C:/ruby/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/process/daemon.rb:4:in `fork': fork() function is unimplemented on this machine (NotImplementedError)
    from C:/ruby/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/process/daemon.rb:4:in `daemon'
    from C:/ruby/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/commands/server.rb:62
    from script/server:4:in `require'
    from script/server:4 
```

是否可以将其作为服务运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:38:49.970

我通过使用 FireDaemon（它使任何程序作为 Windows 服务运行）解决了这个问题。

# css - 置顶帖子仅在第一页正确显示

> ID：13365067
> 
> 赞同：0
> 
> 时间：2012-11-13T16:54:41.383
> 
> 标签：css, wordpress, posts, sticky

我有 2 个循环来显示粘性帖子（循环 1）和所有帖子（循环 2）。粘性帖子的样式与循环 2 的帖子不同。现在我添加`posts_nav_link();`到我的代码中，每页仅显示循环 2 的 6 个帖子。导航有效，但是当我导航粘性帖子时，仅在第一页上正确设置样式。

我将粘性帖子的样式设置为：

HTML：

```
<?php // div class for styling sticky posts. ?>
<div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

    <h2><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>          
    <?php the_excerpt(); // Show summary of posts only. ?>

</div> <!-- end class sticky --> 
```

CSS：

```
.sticky {
    border: 1px solid black;
    background-color: white;
    width: 200px;
} 
```

第一页上的 HTML（带有萤火虫）：

```
<div class="blogpost">
<div id="post-324" class="post-324 post type-post status-publish format-standard sticky hentry category-uncategorized">
<h2>
<a title="This is a sticky post" href="http://mywebsite.com/?p=324">This is a sticky post</a>
</h2>
<p>
Written on 10/08/2012\. Filed under
<a rel="category" title="View all posts in Uncategorized" href="http://mywebsite.com/?cat=1">Uncategorized</a>
.
</p>
<p>
Content of the post.
<a href="http://mywebsite.com/?p=324">[Read more ...]</a>
</p>
</div>
</div> 
```

所有其他页面上的 HTML（带有萤火虫）：（对我来说看起来一样。）

```
<div class="blogpost">
<div id="post-324" class="post-324 post type-post status-publish format-standard hentry category-uncategorized">
<h2>
<a title="This is a sticky post" href="http://mywebsite.com/?p=324">This is a sticky post</a>
</h2>
<p>
Written on 10/08/2012\. Filed under
<a rel="category" title="View all posts in Uncategorized" href="http://mywebsite.com/?cat=1">Uncategorized</a>
.
</p>
<p>
Content of the post.
<a href="http://mywebsite.com/?p=324">[Read more ...]</a>
</p>
</div>
</div> 
```

有没有一种方法可以在导航时在每个页面上显示带有自己的 CSS 的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:10:30.667

您的“sticky 类仅出现在首页。您可以在第二个 html 上看到您的 ID 为“post-324”的 div 没有呈现该类。您也可以手动添加 Sticky 类，方法是：

```
 <div id="post-<?php the_ID(); ?>" <?php post_class('class-name'); ?>> 
```

所以你的代码应该是这样的：

```
 <div id="post-<?php the_ID(); ?>" <?php post_class('sticky'); ?>> 
```

我还没有尝试过，但它应该根据 wordpress 法典工作。

我希望它能成功。

# sql - 嵌套 SQL 计数

> ID：13365068
> 
> 赞同：2
> 
> 时间：2012-11-13T16:54:41.463
> 
> 标签：sql

我有两张表，成员和国家，我想做的是找到所有没有成员的国家。我有点迷路，这是我最好的猜测，但它不起作用：

```
SELECT CountryID
FROM Country 
WHERE (SELECT COUNT(MemberID) FROM Member WHERE PrCountryID = CountryID) = 0 
```

任何帮助将不胜感激。

新杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:56:33.317

```
select countryID from Country C left join member M on C.CountryID=M.CountryID where M.MemberID is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:56:27.947

尝试使用`not exists`子句：

```
SELECT C.CountryID
FROM Country C
WHERE not exists(SELECT 1 FROM Member M WHERE M.PrCountryID = C.CountryID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:59:02.963

在没有看到表格的情况下，我认为您需要这样的东西

```
select * from Country c
left outer join Member m on m.PrCountryID = c.CountryID
where m.PrCountryID is null 
```

# json - 在客户端和服务器之间共享 GWT 类实现

> ID：13365074
> 
> 赞同：1
> 
> 时间：2012-11-13T16:55:07.063
> 
> 标签：json, gwt, serialization, deserialization, autobean

假设我在 GWT 中有一个比 POJO 更复杂的类实现，但它的方法仍然相对简单，即除了它的 getter 和 setter 之外，它还有一些实用方法，这样我就可以在客户端和客户端中成功调用 new Foo()服务器代码。

我的问题是：如果我有这样一个对象的实例，我如何在 GWT 服务器和客户端之间进行通信？也就是说，当对象被反序列化时，我如何在传输其字段的同时保留调用其他方法的能力？

我们目前在服务器端使用 Jackson，在客户端使用 AutoBeans，但这仅限于 POJO 类，因为 AutoBeans 来自仅包含 getter 和 setter 的接口，并且无法（自动）将数据拉入更有用的目的。

为了完整起见，这里是有问题的对象[http://pastebin.com/H2ea0W6A](http://pastebin.com/H2ea0W6A)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:25:16.767

您实际上可以将*逻辑*放入您的 AutoBeans 中，使用`@Category`：
[https ://code.google.com/p/google-web-toolkit/wiki/AutoBean#Categories](https://code.google.com/p/google-web-toolkit/wiki/AutoBean#Categories)

但是，它不适用于您的`setKWHR`and `getKWHR`（至少如果命名为属性访问器）。

`Energy`将这些方法移出类以使其仅作为 DTO可能会更容易。
或者，将这样的 DTO（至少在客户端，DTO 是 AutoBean）包装到另一个可以带来逻辑的对象中（并简单地委托`getMMBTU`和`getDisplayUnit`包装的 DTO）。

或者使用[Piriti](https://github.com/hpehl/piriti)之类的东西在客户端进行反序列化，而不是 AutoBeans；或将您的 AutoBean 数据复制到一个`Energy`实例中。

# python - 绝对初学者的Python编程第5章挑战4

> ID：13365075
> 
> 赞同：1
> 
> 时间：2012-11-13T16:55:07.533
> 
> 标签：python, python-3.x

挑战是通过添加让用户输入名称并取回祖父的选项来改进先前的挑战“谁是你的爸爸”（参见我的成功代码： http: [//pastebin.com/AU2aRWHk ）。](http://pastebin.com/AU2aRWHk)程序仍然应该只使用一本父子对的字典。

我不能让它工作。到目前为止，我的整个代码都可以在以下位置看到： http: [//pastebin.com/33KrEMhT](http://pastebin.com/33KrEMhT)

我显然让这种方式变得比它需要的更困难，现在我被困在一个复杂的世界中。这是我 F'd up 的代码：

```
# create dictionary
paternal_pairs ={"a": "b",
                 "b": "c",
                 "c": "d"}

# initialize variables
choice = None

# program's user interface
while choice != 0:
print(
"""
   Who's Yo Daddy:

   2 - Look Up Grandfather of a Son
   """
)

choice = input("What would you like to do?: ")
print() 

    # look up grandfather of a son
    if choice == "2":
        son = input("What is the son's name?: ")
        # verify input exists in dictionary
        if son in paternal_pairs.values():
            for dad, boy in paternal_pairs.items():
                if dad == son:
                    temp_son = dad
                    for ol_man, kid in paternal_pairs.items():
                        if temp_son == kid:
                            print("\nThe grandfather of", son, "is", ol_man)
                        else:
                            print("\nNo grandfather listed for", son)
                else:
                    print("\nNo grandfather listed for", son)
        # if input does not exist in dictionary:
        else:
            print("Sorry, that son is not listed. Try adding a father-son pair.") 
```

选择“2”后，我的输出：

```
What is the son's name?: d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d

No grandfather listed for d 
```

显然暂时被困在一个小循环中，它不起作用。所有其他代码都按预期工作。帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:19:10.750

您遍历字典中的每个条目，并匹配该值，如果它不匹配，那么对于您打印的每个键值对它不匹配。

它等效于以下简化循环：

```
>>> for i in range(3):
...     if i == 5:
...         print(i)
...     else:
...         print('Not 5')
... 
Not 5
Not 5
Not 5 
```

请改用[循环的](http://docs.python.org/3/reference/compound_stmts.html#the-for-statement)[`else:`子句，`for`](http://docs.python.org/3/reference/compound_stmts.html#the-for-statement)只有在完成所有值的遍历后才会调用它；`break`如果找到匹配项，请使用 a ：

```
for ol_man, kid in paternal_pairs.items():
    if temp_son == kid:
        print("\nThe grandfather of", son, "is", ol_man)
        break
else:
    print("\nNo grandfather listed for", son) 
```

与循环`else:`一起使用时子句如何工作的小演示：`for`

```
>>> for i in range(3):
...     if i == 1:
...         print(i)
...         break
... else:
...     print('Through')
... 
1
>>> for i in range(3):
...     if i == 5:
...         print(i)
...         break
... else:
...     print('Through')
... 
Through 
```

在第一个示例中，我们使用 a 跳出循环`break`，但在第二个示例中，我们从未到达`break`语句（`i`从不等于`5`），因此到达并打印了`else:`子句。`Through`

# c# - 可以表达吗 > 变量可以可靠地用作字典中的键吗？

> ID：13365083
> 
> 赞同：3
> 
> 时间：2012-11-13T16:55:16.343
> 
> 标签：c#

我有一个当前使用 a`Func<T1, T2>`作为参数的函数。
我希望它使用`Expression<Func<T1, T2>>`as 参数，以便在某些情况下可以遍历表达式树。

对于我想使用该函数的每个调用，因此我需要`Compile()`表达式。为了不必重新编译所有表达式，我想将它们放入字典中。

对我的方法的调用如下所示：

```
var foo = MyFunc(x => x.Field); 
```

关于`Expression`用作字典键的以下解决方案是否正确？

```
static Dictionary<Expression<Func<T1, T2>>, Func<T1, T2>> s_functions = new Dictionary<Expression<Func<T1, T2>>, Func<T1, T2>>();

public T2 MyFunc(Expression<Func<T1, T2>> selectorExpression)
{
    if (!s_functions.ContainsKey(selectorExpression))
    {
        s_functions.Add(selectorExpression, selectorExpression.Compile());
    }

    Func<T1, T2> selector = s_functions[selectorExpression];
} 
```

**编辑**

从性能的角度来看，什么是解决它的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:59:54.113

不幸的是，没有，但问题只会表现为性能错误。

问题是它[`Expression<TDelegate>`](http://msdn.microsoft.com/en-us/library/bb335710.aspx)没有实现`IEquatable<Expression<TDelegate>>`，所以字典使用的默认相等比较器只会做引用相等。这意味着相同表达式的不同实例不会比较相同，这将导致本应命中的缓存未命中。另一方面，不同表达式的实例*总是*比较不同，因此没有逻辑错误。

您可以通过为字典提供[自定义相等比较器](http://msdn.microsoft.com/en-us/library/ms132072.aspx)来解决此问题，但还有一个小问题是必须编写一个 - 这将是一项艰巨的任务。

从好的方面来说，可以编写一个与原始实现具有相同性能错误（但范围缩小）的比较器以换取方便——范围缩小可能解释了您实际遇到的所有或大多数情况要去遇到！例如，您可能想尝试基于`ToString()`表示的相等性进行比较。只要比较器不产生任何误报，就只有改进的余地。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:45:28.847

用作`selectorExpression.ToString()`键。它并不完美，因为使用不同参数名称的等效表达式会产生不同的字符串，但这是一种非常简单的方法。

测试：

```
Expression<Func<int,int>> expr = x => x * x;
MessageBox.Show(expr.ToString()); // ==> "x => (x * x)" 
```

# php - 如何使用数组的所有偶数索引元素作为所有奇数元素的键（PHP）

> ID：13365084
> 
> 赞同：1
> 
> 时间：2012-11-13T16:55:15.500
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
array(10) {
  [0]=>
  string(10) "2012-11-03"
  [1]=>
  string(1) "1"
  [2]=>
  string(10) "2012-11-04"
  [3]=>
  string(1) "3"
  [4]=>
  string(10) "2012-11-05"
  [5]=>
  string(1) "2"
  [6]=>
  string(10) "2012-11-06"
  [7]=>
  string(1) "7"
  [8]=>
  string(10) "2012-11-07"
  [9]=>
  string(1) "4"
} 
```

我想从中得到一个新的多维数组，它有 5 个元素，每个元素看起来像这样：$date => $number。

```
array(5) {
      [0]=> array(2012-11-03 => 1)
      [1]=> array(2012-11-04 => 3)
      [2]=> array(2012-11-05 => 2)
      [3]=> array(2012-11-06 => 7)
      [4]=> array(2012-11-07 => 4)
    } 
```

我想使用日期作为它们之后的值的键。（我最终想在折线图上绘制这些值，其中 x 轴有日期，y 有值）

我可以写什么样的（foreach？）循环来做到这一点？

我从以下代码行中获取此数组：

```
$data = "$start_date\n$value\n";
file_put_contents($id . '.csv', $data, FILE_APPEND);
$data = file_get_contents($id . '.csv');
$data_array = explode("\n", trim($data, "\n"));
var_dump($data_array); exit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:01:22.743

我假设您的数组包含偶数个元素，正如预期的那样。

您可以使用以下代码段：

```
<?php

$newArray = array();
for ($i = 0; $i < count($data_array); $i += 2) {
    $newArray[$data_array[$i]] = $data_array[$i + 1];
}

?> 
```

^ 上面的代码说我们从 的索引开始`0`，`$data_array`这是一个日期。它`newArray`从偶数元素生成一个键，并将下一个奇数元素的值附加到该键。数组将如下所示：

```
Array(
    '2012-11-03' => "1",
    '2012-11-04' => "3",
    '2012-11-05' => "2",
    ...
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:59:47.913

```
<?php
$output = array();
for($i = 0; $i < count($data_array); $i++) {
    $output[$data_array[$i]] = $data_array[++$i];
}
?> 
```

恐怕我还没有测试过，但它应该可以工作。

# animation - 如何在 Maya 中触发带有条件的辅助关键帧动画？

> ID：13365085
> 
> 赞同：0
> 
> 时间：2012-11-13T16:55:18.547
> 
> 标签：animation, triggers, conditional-statements, maya

**假设目标：** 一个球在人行道上滚动的动画。当球在人行道上经过每个灯柱时，一根藤蔓开始在灯柱上长出。

**起点（两个文件）：**

**文件 1：（**父）一个场景文件，其中包含一个主动刚体球滚下被动刚体人行道。这个球上的动画可能会因改变障碍物的位置等而改变。

**文件 2：（**子）单个多边形藤蔓动画长出单个多边形灯柱。

**问题：**是否可以在父场景文件中放置多个对灯柱文件的引用，然后在球滚下人行道时触发嵌入的 vineGrow 动画？几乎就好像在满足条件时，将 vineGrow 动画的“Trax 剪辑”及时捕捉到当前位置。

如：

```
if((ballHasPassedMeCondition)&&(triggeredStatus=="NotTriggered")){
    beginSecondaryAnimation();
    triggeredStatus = "triggered";
} 
```

虽然这种动画方法对于这样一个简单的场景是不必要的，但我想了解如何实现这种类型的动画以用于更复杂的场景。在更复杂的场景中，我不想担心手动启动所有这些辅助动画，然后在驾驶动画发生变化时重新启动它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:17:34.447

您可以尝试设置一个从动键来将球平移到它滚下山坡的任何方向，并将其连接到藤蔓生长属性。

# ruby-on-rails-3 - 使用 kaminari 查找给定记录的页面

> ID：13365089
> 
> 赞同：3
> 
> 时间：2012-11-13T16:55:29.273
> 
> 标签：ruby-on-rails-3, kaminari

Ruby on Rails 3 项目。更新记录后，我们返回所有记录的索引（不是更新记录的视图）。该索引与 Kaminari 分页。我们如何返回到包含更新记录的索引页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:04:28.773

Java JPA/Hibernate 有一个类似的问题和答案，[使用 JPA (Hibernate) 查找包含给定记录的页面](https://stackoverflow.com/questions/10470273/finding-out-the-page-containing-a-given-record-using-jpa-hibernate)，它显示了在索引视图中获取记录偏移量所需的 sql。就像是

```
SELECT COUNT(*)
FROM Model r
WHERE r.column < ?
ORDER BY r.id 
```

页码将为 offset/records_per_page + 1。

那么问题是如何从 Kaminari 获取 records_per_page ？Kaminari 允许您在配置中设置每页的记录数，并通过 Model.paginates_per 设置特定模型。它提供了 Model.default_per_page 方法来为模型生成每页的记录数。

决定页面的最佳位置是在显示索引的控制器方法中。该方法已经获取页面参数（如果存在）以显示正确的页面。另一种方法是在重定向之前计算页面并发送页面参数。让我们试试前者。

保存编辑后，我们使用参数重定向到索引，该参数标识我们希望包含在索引页面[重定向中的记录 params](https://stackoverflow.com/questions/5433591/rails-redirect-with-params#5433634)。该索引按 Model.column 排序。

```
redirect_to model_index_url(:for_column => @model_record.column), 
   :notice => 'Record saved' 
```

然后在控制器的 index 方法中，我们让页面参数管理，或者从 for_column 参数（如果存在）计算页面。

```
page = 1 
if (params[:page])
  page = params[:page]
elsif (params[:for_column])
  offset = Model.select('count(*) as count').where('? < column',
     params[:for_column]).order(id).first
  page = offset.count/Model.default_per_page + 1
end
@records = Model.all.order('column desc').page(page) 
```

当然，Model 和 Model.column 代表应用程序的模型和列名。

# c++ - 书写矢量 到二进制文件并再次读取它

> ID：13365097
> 
> 赞同：5
> 
> 时间：2012-11-13T16:55:54.470
> 
> 标签：c++, file, vector, binary

我正在尝试将双精度向量写入二进制文件。这样做之后，我想阅读它。这似乎不起作用。这是代码：

```
ofstream bestand;
vector<double> v (32);
const char* pointer = reinterpret_cast<const char*>(&v[0]);
size_t bytes = v.size() * sizeof(v[0]);
bestand.open("test",ios::out | ios::binary);
for(int i = 0; i < 32; i++)
{
   v[i] = i;
   cout << i;
   }
bestand.write(pointer, v.size());
bestand.close();
ifstream inlezen;
vector<double> v2 (32);
inlezen.open("test", ios::in | ios::binary);
char byte[8];
bytes = v2.size() * sizeof(v2[0]);
inlezen.read(reinterpret_cast<char*>(&v2[0]), bytes);
for(int i =0; i < 32; i++){

 cout << endl << v2[i] << endl;
 } 
```

这输出“0 1 2 3 0 0 0......”所以它似乎正确读取了前 4 个数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:59:18.080

这`.write()`需要*字节*数，而不是要写入的*项目数：*

```
bestand.write(pointer, v.size()); 
```

由于您已经计算出正确的值，请使用它：

```
bestand.write(pointer, bytes ); 
```

# iphone - Scrollview 不显示其内容的顶部而不在 iphone 应用程序中向下滚动

> ID：13365104
> 
> 赞同：0
> 
> 时间：2012-11-13T16:56:11.363
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uiscrollview

我有一个包含滚动视图的视图。滚动视图包含按钮、标签和几个文本字段。要查看滚动视图的顶部内容，我必须向下滚动它。否则它只显示底部。如何显示顶部元素我的滚动视图没有向下滚动？可以向上滚动以查看滚动视图的底部内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:18:04.810

@harshiYL 如果您发布一些代码以检测错误会更好。我怀疑您的滚动视图框架和内容大小。使用下面的代码：-

```
- (void)viewDidLoad
 {
 [super viewDidLoad];
 scrollView.frame = CGRectMake(0, 0, 320, 460);
 [scrollView setContentSize:CGSizeMake(320, 678)];
 } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T13:54:49.903

我有一个类似的问题。我必须拉下滚动视图才能查看顶部的内容，但释放时它会“反弹”回来吗？

我的问题原来是自动布局。我在滚动视图中放置的视图被居中。结果，随着布局期间发生的所有变化，我认为视图被推到了负空间。

对我来说，解决方案是更改布局，使视图锚定在滚动视图的顶部而不是中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:10:39.337

默认情况下，scrollView 始终显示在顶部。表示 ContentOffset 为 0。在启动应用程序并显示滚动视图后，方向是否随时发生变化？也许您可以在 Size Inspector 中检查您的 Autosizing 设置。

希望有帮助！

# java - 使用资源为 Swing 项目创建安装盾

> ID：13365107
> 
> 赞同：2
> 
> 时间：2012-11-13T16:56:18.490
> 
> 标签：java, eclipse, swing, installshield

我创建了一个简单的 java 应用程序，它使用了一些外部资源（文件夹）。如何创建一个安装屏蔽来创建文件夹安装（如`C:\Program Files\MyApp`）并将外部资源复制到此目标？我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:04:00.040

为什么不创建一个包含嵌入式资源的完全独立的 Jar 文件。

将您的资源放在 source/package 文件夹中并使用：

[`getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)or [`getResourceAsStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)检索*资源*的`URL`or ：`InputStream`

 **   从 Jar 中的不同包中提取文件：

    ```
    package org.main //our package name
    ...
    Image img = ImageIO.read(getClass().getResourceAsStream("/org/main/test.jpg")); 
    ```

*   或者如果它与当前类在同一个包中：

    ```
    Image img = ImageIO.read(getClass().getResourceAsStream("test.jpg")); 
    ```

如果您正在寻找 Java 安装盾/向导，请查看这些开源应用程序：

*   [安装4j](http://freecode.com/projects/install4j)
*   [发射4j](http://launch4j.sourceforge.net/)
*   [JS平滑](http://jsmooth.sourceforge.net/)
*   [Packlet 安装程序工具](http://packlet.sourceforge.net/)
*   [还有更多](http://www.java2s.com/Product/Java/Development/Installer.htm)（虽然不是全部免费）*

# php - 教义 2 可记录的 gedmo 与 XML

> ID：13365118
> 
> 赞同：1
> 
> 时间：2012-11-13T16:56:48.853
> 
> 标签：php, xml, doctrine-orm

我试图让 DoctrineExtensions 结合 XML 为我的 Doctrine 2 工作。

看起来我很接近了，但每次我尝试加载一个实体时，我的网站都会因致命错误而死：

```
Class must be annoted with Loggable annotation in order to track versioned fields 
in class 
```

我的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xmlns:gedmo="http://gediminasm.org/schemas/orm/doctrine-extensions-mapping">
    <entity name="Base\Activity\Organisation" table="activity_organisation">
        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY"/>
        </id>
        <field name="name" type="string" column="name" length="255" precision="0" scale="0">
            <gedmo:versioned/>
        </field>
    </entity>
</doctrine-mapping>` 
```

现在的问题是：如何使用 Loggable 注释来注释我的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:27:08.800

我忘记了xml的一部分。我不得不添加以下内容：

`<gedmo:loggable log-entry-class="Log\Location"/>`

其中 log-entry-class 是您要用于记录的类。现在完成xml：

```
<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xmlns:gedmo="http://gediminasm.org/schemas/orm/doctrine-extensions-mapping">
    <entity name="Base\Activity\Organisation" table="activity_organisation">
        <gedmo:loggable log-entry-class="Log\Location"/>
        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY"/>
        </id>
        <field name="name" type="string" column="name" length="255" precision="0" scale="0">
            <gedmo:versioned/>
        </field>
    </entity>
</doctrine-mapping> 
```

# c++ - 在实例“std::runtime_error”上终止 Hiphop-Php

> ID：13365125
> 
> 赞同：3
> 
> 时间：2012-11-13T16:57:00.097
> 
> 标签：c++, runtime-error, hiphop

我已经在 ubuntu 服务器 12.04 LTS 上成功构建了 Hiphop-Php，但是当我运行命令时：

`$HPHP_HOME/src/hphp/hphp test.php`

发生此错误：

`terminate called after throwing an instance of 'std::runtime_error' what(): locale::facet::_S_create_c_locale name not valid Aborted (core dumped)`

命令期间发生了同样的错误，`make`但我使用`sudo make`并处理了该错误，但在上面使用 sudo 只是删除了`Aborted (core dumped)`. 这发生在远程服务器上，但在虚拟机上测试之前我已经做了完全相同的事情。我什至获得了 root 访问权限，因为我认为这会有所帮助，但它什么也没做。

你知道我用 USE_HHVM=0 构建的，我需要不可读的代码并且字节码格式可以做到这一点，但我构建的 VM 也是如此，我只是难住了！提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:01:13.443

该错误来自 GCC 的 C++ 库。这意味着程序环境中的某些东西设置了一个区域设置，该区域设置数据文件没有安装在盒子上。例如`LANG=foo_FOO.utf8`，`foo_FOO`没有安装语言环境数据文件的地方。

`LANG=C`在运行之前尝试设置。不要`sudo`用来修复崩溃。这甚至没有错。

# vim - 为什么我在安装 vundle 后无法获取我的 vimrc？

> ID：13365129
> 
> 赞同：1
> 
> 时间：2012-11-13T16:57:13.170
> 
> 标签：vim

我试图让我的 Vim 在编辑 vimrc 后即时更新。所以我按照[Vimcast](http://vimcasts.org/episodes/updating-your-vimrc-file-on-the-fly/)上的说明进行操作，基本上每次点击保存时都会获取 vimrc。

但这由于某种原因不起作用（当我保存我的 vimrc 时它没有给出任何错误），所以我决定`source $HOME/.vimrc`手动运行，这就是我得到的：

```
 -bash:  Configuration file for vim
            set nocompatible                              : command not found
    -bash:  Plugin Management {
            filetype off                                  : command not found
    -bash: .vimrc: line 7: syntax error near unexpected token `('
    -bash: .vimrc: line 7: `        call vundle#rc()' 
```

这是我的 Vim 信息（我正在运行 Mac OS X 10.7.3）：

```
 VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Jul 31 2011 19:27:29)
    Compiled by root@apple.com
    Normal version without GUI.  Features included (+) or not (-):
    -arabic +autocmd -balloon_eval -browse +builtin_terms +byte_offset +cindent 
    -clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
    -conceal +cryptv +cscope +cursorbind +cursorshape +dialog_con +diff +digraphs 
    -dnd -ebcdic -emacs_tags +eval +ex_extra +extra_search -farsi +file_in_path 
    +find_in_path +float +folding -footer +fork() -gettext -hangul_input +iconv 
    +insert_expand +jumplist -keymap -langmap +libcall +linebreak +lispindent 
    +listcmds +localmap -lua +menu +mksession +modify_fname +mouse -mouseshape 
    -mouse_dec -mouse_gpm -mouse_jsbterm -mouse_netterm -mouse_sysmouse 
    +mouse_xterm +multi_byte +multi_lang -mzscheme +netbeans_intg -osfiletype 
    +path_extra -perl +persistent_undo +postscript +printer -profile -python 
    -python3 +quickfix +reltime -rightleft -ruby +scrollbind +signs +smartindent 
    -sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
    +tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
    -toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
    +vreplace +wildignore +wildmenu +windows +writebackup -X11 -xfontset -xim -xsmp
    -xterm_clipboard -xterm_save 
    system vimrc file: "$VIM/vimrc"
    user vimrc file: "$HOME/.vimrc"
    user exrc file: "$HOME/.exrc"
    fall-back for $VIM: "/usr/share/vim"
    Compilation: gcc -c -I. -D_FORTIFY_SOURCE=0 -Iproto -DHAVE_CONFIG_H -arch i386 -arch x86_64 -g -Os -pipe
    Linking: gcc -arch i386 -arch x86_64 -o vim -lncurses 
```

有人可以帮我看看吗？非常感谢！

== 更新 ==

所以正如你们所有人所指出的，我把 Vim 源代码和 Bash 源代码命令混在一起了——谢谢。

现在我尝试在 Vim 中运行源代码，它可以正常工作。但是，它似乎仍然没有更新我的 vimrc。我的 vimrc 中有这一行

```
 nnoremap <leader><TAB> :sp ~/.vimrc<CR> 
```

无论我是否注释掉该行，`<leader><TAB>`运行后点击`source ~/.vimrc`仍然会在分屏中打开我的vimrc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:18:06.553

也就是说`:source ...`，在 Vim 中执行。从您的输出来看，您似乎错误地在 Bash shell 本身中执行了它（可能是通过`:!source`）；`source`也是一个 Bash 内置命令（如`.`），用于将文件内容作为 Bash 命令执行。

要调试`:autocmd`对您不起作用的，您可以临时添加

```
:echomsg "executing .vimrc" 
```

或写`.vimrc`with`:15verbose write`看看发生了什么。

# android - 使用样式 Theme.Sherlock 时未找到资源

> ID：13365134
> 
> 赞同：11
> 
> 时间：2012-11-13T16:57:18.723
> 
> 标签：android, actionbarsherlock

我正在尝试使用夏洛克。在我的项目 min sdk 2.2 和 max api 15 时，我确实将 abc 库引入我的项目的步骤。问题是我无法设置使用它的样式。错误

```
Error retrieving parent for item: No resource found that matches the given name '@style/  Theme.Sherlock'. 
```

我的xml代码：

```
<resources>

    <style name="AppTheme" parent="@style/Theme.Sherlock" />

</resources> 
```

我的清单文件：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"> 
```

我使用的java是1.6。我正在运行 4.0.3 avd。我知道你会给我一个网站链接，但我没有找到任何可以帮助的东西。我正在使用 eclipse 和 Sherlock 4.0.3。如果你能给我解决方案，如何通过说明简单地完成它。

**更新：** 我不知道为什么，但是当我在项目中导入库 abc 时，它看起来还可以，但是当我单击应用并在返回库后退出设置时，我看到红色 x。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T18:38:53.027

“我不知道为什么，但是当我在我的项目中导入到库时，ABC 看起来不错，但是当我单击应用并退出设置后，返回库并看到红色 x。” 当库文件与您的项目不在同一个工作区或目录中时，就会发生这种情况。1.尝试将库复制到同一个工作区，2.将其导入 Eclipse 3.将其应用于您的项目。

我希望这能解决你的问题。

并在清单中

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/Theme.Sherlock"
> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-13T17:01:41.543

你应该在清单中设置你的主题

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/Theme.Sherlock"
> 
```

# xcode - 在uiview之间传递数据

> ID：13365136
> 
> 赞同：0
> 
> 时间：2012-11-13T16:57:39.037
> 
> 标签：xcode, uiview

我在视图之间传递数据时遇到问题。我可以使用以下方法轻松传递我的 NSMutableArray：

* * *

```
DetailViewController *detailNote = [self.storyboard instantiateViewControllerWithIdentifier:@"detailNote"];

 detailNote.ArrayItem = [allAnotacionsEntries objectAtIndex:indexPath.row];

[self.navigationController pushViewController:detailNote animated:YES]; 
```

* * *

但我想将额外的 NSMutableArray 传递给视图，但我不知道该怎么做。

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:28:22.403

在 Class 中创建一个新属性将其`DetailViewController`添加到 .h 文件中。

```
@property (strong) NSMutableArray *yourPropertyName; 
```

然后你可以像这样设置数组：

```
detailNote.yourPropertyName = [NSMutableArray array]; 
```

# magento - Magento 表费率自定义选项

> ID：13365137
> 
> 赞同：0
> 
> 时间：2012-11-13T16:57:40.690
> 
> 标签：magento, options, shipping, rates

在 Tablerate.php 中，我想更改计算。

因此，对于某些具有自定义选项（如宽度、高度）的产品，运输成本必须改变。我尝试使用这种方法来确定购物车中的一个产品的宽度或高度是否大于 60 厘米（示例）。

但目前我不知道如何获得自定义选项值......

这段代码运行良好。

```
foreach ($request->getAllItems() as $item) {

        echo 'Name: '.$item->getName().
            '<br/> SKU:'.$item->getSku().
            '<br/> ProductID: '.$item->getProductId().
            '<br/> Price: '.$item->getPrice().'<br/>';   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:08:30.637

如果自定义属性是，例如 cm_size 然后执行：

```
$item->getCmSize() 
```

或者`$item->getData('cm_size')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:13:23.627

这行得通

```
foreach ($request->getAllItems() as $item) {
    $selectedOpt = $item->getProduct()->getTypeInstance(true)->getOrderOptions($item->getProduct());
    $counted =  count($selectedOpt['options']);
    for ($i = 0; $i < $counted; $i++) {
        echo '<br/>'. var_dump($selectedOpt['options'][$i]['option_value']);
    }
    echo '<br/>';
} 
```

# php - 模型默认顺序

> ID：13365139
> 
> 赞同：0
> 
> 时间：2012-11-13T16:57:59.383
> 
> 标签：php, yii

我想让模型默认出现`order by`在所有发现中。相对而言，我可以声明默认值`order by`，有什么方法可以`order by`为模型声明默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:00:53.890

一切你需要的

```
public function defaultScope()
{
    return array(
            'order'=>$this->getTableAlias(false, false).'.fieldname DESC',
    );
} 
```

Yii 手册：[http ://www.yiiframework.com/doc/guide/1.1/en/database.ar](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)

# python - 我正在尝试使用坐标在 Pygame 中移动一个矩形，但不起作用

> ID：13365140
> 
> 赞同：0
> 
> 时间：2012-11-13T16:58:03.637
> 
> 标签：python, pygame, rect

这是我的代码

```
 import pygame
    from pygame.locals import *
    import sys
    pygame.init()
    pygame.display.set_caption("*no current mission*")
    size = (1280, 750)
    screen = pygame.display.set_mode(size)
    clock = pygame.time.Clock()
    bg = pygame.image.load("bg1.png")
    guy = pygame.image.load("hero_stand.png")
    rect = guy.get_rect()
    x = 10
    y = 10
        while True:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    sys.exit()
                if event.type == KEYDOWN:
                    _if event.key == K_RIGHT:
                        x += 5
                        rect.move(x,y)_
        rect.move(x,y) 
        screen.blit(bg,(0,0))
        screen.blit(guy, rect)
        pygame.display.flip() 
```

这只是一个简单的测试，看看我是否可以移动一个矩形。除了我用斜体写的代码外，一切似乎都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:18:21.470

我对 PyGame 一无所知，但看起来该`while`循环永远不会退出，并且缩进使得从第二个`rect.move(x,y)`开始的所有内容都在循环之外，因此无法访问。从那里开始缩进所有内容，以便它在 while 循环中并且可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:00:33.167

问题在于 .flip() 方法。您必须在每次 blit 和更新时调用它一次，因此它会在屏幕上显示更改。将它们放在 While 循环中，它应该可以工作。基本的 pygame 循环应该如下所示：

```
#capture user input and call functions responsible
delta = timer.tick()
#this takes into account the speed of the machine, so it moves the sprites indepented of speed
updateSprites(delta) #moves the sprites
drawSprites()#blits the sprites at their positions
screen.diplay.flip() #flips the screen to show changes. 
```

# windows-phone-7 - 如何让应用程序在后台运行？

> ID：13365142
> 
> 赞同：0
> 
> 时间：2012-11-13T16:58:17.413
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我开发了一个 windows phone 应用程序，它运行良好。它使用 GPS 和 GPRS 连接并进行一些计算。现在我希望它在后台或锁定屏幕下运行，直到用户选择不在锁定屏幕或后台运行它.

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:10:48.623

您很幸运，WP8 中的 GeoLocation 应用程序专门支持新的后台处理模型。

更多的信息：

如何在 Windows Phone 8 的后台运行位置跟踪应用程序：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935(v=vs.105).aspx)

应用程序在后台跟踪地理位置：http: [//www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:44:12.737

如果您正在为 WP 用户编写应用程序，我建议您最初将其编码为针对 WP7.5，否则现有 WP 用户群将无法使用您的应用程序。

诚然，WP7 用户只有 14-1500 万，但我敢打赌 WP8 用户要少得多。WP7.5 应用程序在 WP8 上运行，而不是相反！

在 WP7.5 世界中，您想要使用的是后台代理。这是一个每 15-30 分钟运行一次的进程，可以进行一些计算、连接到网络等。以下是有关它的一些详细信息：[后台代理信息](http://www.silverlightshow.net/items/Windows-Phone-7.5-Use-Background-agents.aspx)

# user-interface - 如何在雷区游戏中测试邻接性

> ID：13365147
> 
> 赞同：1
> 
> 时间：2012-11-13T16:58:32.310
> 
> 标签：user-interface, methods, jframe, adjacency-list, adjacency-matrix

我对 Java 很陌生，我才研究了几个星期，这个项目让我很困惑。说明是创建一个雷区游戏，该游戏生成一个随机起点、一个随机终点和两个地雷。用户必须在不撞到地雷的情况下从头到尾导航。我的目标是测试用户是否进行了有效的移动，然后更改他单击的按钮的颜色。因此，从头到尾制作了一条路径。当他点击检查按钮时，它会告诉他他是否点击了一个隐藏的矿井，以及他是赢还是输。

这是我到目前为止所拥有的。

任何有关方法的帮助，或有关如何提高效率的建议将不胜感激。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.EventObject;
import java.util.Random;

import javax.swing.*;

public class MineField extends JFrame implements ActionListener {
    private JFrame main = new JFrame("MineField Game");

    private JPanel top = new JPanel();
    private JPanel bottom = new JPanel();
    private int y;
        private int x;

/**
 * @return the grid
 */
public JButton[][] getGrid() {
    return grid;
}

/**
 * @param grid the grid to set
 */
public void setGrid(JButton[][] grid) {
    this.grid = grid;
}
JButton[][] grid; //names the grid of buttons

public MineField(int width, int length){ //constructor with 2 parameters
        Container container = getContentPane();
        container.setLayout(new GridLayout(2,1));
        top.setLayout(new GridLayout(width,length)); //set layout of frame
        grid=new JButton[width][length]; //allocate the size of grid

        //Generates 4 random numbers for coordinates.
        Random generator = new Random();
        int a = generator.nextInt(width);
        int b = generator.nextInt(length);
        int c = generator.nextInt(width);
        int d = generator.nextInt(length);
        int mine1x = generator.nextInt(width);
        int mine1y = generator.nextInt(length);
        int mine2x = generator.nextInt(width);
        int mine2y = generator.nextInt(length);

        //Starts for loop to initiate the grid.
        int t = 0;
        for(y=0; y<length; y++){ 
                for(x=0; x<width; x++){

                    if(a == x && b == y){
                        grid[a][b] = new JButton("Start");
                        grid[a][b].setOpaque(true);
                        grid[a][b].setBackground(Color.green);
                        top.add(grid[a][b]);
                        grid[a][b].addActionListener(this);
                        grid[a][b].setActionCommand("start");
                    }
                    else if(c == x && d == y){
                        grid[c][d] = new JButton("Finish");
                        grid[c][d].setOpaque(true);
                        grid[c][d].setBackground(Color.green);
                        top.add(grid[c][d]);
                        grid[c][d].addActionListener(this);
                        grid[c][d].setActionCommand("finish");
                    }
                    else if(mine1x == x && mine1y == y){
                        grid[mine1x][mine1y] = new JButton();
                        top.add(grid[mine1x][mine1y]);
                        grid[mine1x][mine1y].addActionListener(this);
                        grid[mine1x][mine1y].setActionCommand("mine");

                    }
                    else if(mine2x == x && mine2y == y){
                        grid[mine2x][mine2y] = new JButton();
                        top.add(grid[mine2x][mine2y]);
                        grid[mine2x][mine2y].addActionListener(this);
                        grid[mine2x][mine2y].setActionCommand("mine");
                    }
                    else{
                        grid[x][y]=new JButton();  
                        top.add(grid[x][y]);
                        grid[x][y].addActionListener(this);
                        grid[x][y].setActionCommand("color");
                        ++t;   
                     }    
                }
        }
        //Prints coordinates of start and end points.
        System.out.println("Start: " +a+ "," +b);
        System.out.println("Finish: " +c+ "," +d);
        System.out.println("Mine 1: " +mine1x+ "," +mine1y);
        System.out.println("Mine 2: " +mine2x+ "," +mine2y);
        System.out.println(getAlignmentX());
        System.out.println(getAlignmentY());

        //Creates buttons for clear and check at the bottom of the window.
        JButton clear = new JButton("Clear");
        clear.addActionListener(this);
        clear.setActionCommand("clear");
        JButton check = new JButton("Check");
        check.addActionListener(this);
        check.setActionCommand("check");

        //Adds the buttons to the panel.
        bottom.add(clear);
        bottom.add(check);

        //Adds panels to the JFrame.
        container.add(top, BorderLayout.NORTH);
        container.add(bottom, BorderLayout.NORTH); 
        main.add(container);
        main.pack();
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        main.setVisible(true);

}

public void actionPerformed(ActionEvent event){
    //When clear button is pressed.
    if(event.getActionCommand().equals("clear")){
        String len = JOptionPane.showInputDialog(null, "Set amount of rows.");
        int lenInt = Integer.parseInt(len);
        String wid = JOptionPane.showInputDialog(null, "Set amount of columns.");
        int widInt = Integer.parseInt(wid);
        MineField a = new MineField(widInt, widInt);
    }

    //When a button on the grid is selected.
    if(event.getActionCommand().equals("color")){
        JButton selected;
        JButton clickedOn = (JButton)event.getSource();
        clickedOn.setOpaque(true);
        clickedOn.setBackground(Color.GREEN);
        selected = clickedOn;
    }
    if(event.getActionCommand().equals("check")){

    }

}
//I don't know what is going on here.
public boolean adjacentTo(){

}

/**
 * @author Trevor W. Hutto
 * @version 1.0
 * This program is a version of minefield
 * You must navigate from start to finish without hitting a mine.
 */
public static void main(String[] args) {
    JOptionPane.showMessageDialog(null, "-This is a minefield game. \n-You can move side to side or up and down. \n-You must navigate from start to finsih without hitting a mine.");
    String len = JOptionPane.showInputDialog(null, "Set amount of rows.");
    int lenInt = Integer.parseInt(len);
    String wid = JOptionPane.showInputDialog(null, "Set amount of columns.");
    int widInt = Integer.parseInt(wid);
    MineField a = new MineField(lenInt,widInt);

} 
```

}

# twitter-bootstrap - Twitter Bootstrap - 如何显示活动/选定项目

> ID：13365148
> 
> 赞同：0
> 
> 时间：2012-11-13T16:58:33.153
> 
> 标签：twitter-bootstrap

`<li>`在`<ul>`使用 Twitter Bootstrap中表示选择/活动项目的“标准”方式是什么？我有一个项目列表，并且希望一次只能选择一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:16:38.503

> 对 li 应用一个活动类。相关选择器/标记： .nav-list > .active > a, .nav-list > .active > a:hover { 将样式应用于 ul.nav-list li.active a; 如果这就是你的意思——</p>

罗斯 17 小时前

# r - 在一条线段上，找到沿该线 x 个单位的点

> ID：13365151
> 
> 赞同：4
> 
> 时间：2012-11-13T16:58:42.520
> 
> 标签：r, geospatial, spatial

`SpatialLines`让我们假设一个长度类的线段`len`。这条特定的线从左上角开始。

```
library(sp)
x <- structure(list(x = c(-7.23437435517476, 6.35937810318614, -5.86718660792582, 
                        7.96094089282062), y = c(7.08139459814975, 6.8633712983227, -7.61337581019376, 
                        -6.2180266913006)), .Names = c("x", "y"))

xline <- SpatialLines(list(Lines(Line(x), ID = 1)))
#len <- LineLength(as.matrix(data.frame(x)))
len <- LineLength(as.matrix(data.frame(coordinates(xline))))

plot(0,0, xlim = c(-10, 10), ylim = c(-10, 10), type = "n")
lines(xline) 
```

![在距起点所需距离的线上找到点](../Images/66f64bfc471eb574ef96a710c1724f49.png)

我想在这条线上找到一个点，它`findme`距离线的起点有一个单位。例如，如果我要从起点开始沿着直线寻找一个 10 个单位的点，我会在第一段和第二段之间的节点附近找到一个点。欢迎您对更强大的解决方案提出意见。

我尝试使用`spsample`（见下文）找到它，但这种方法（太）不可靠，不适用于线的后半部分。

```
# very approximate method, not very suitable
findme <- 11 # 11, 12 and 13 give same result
segs <- 1/(findme/xline.length)
xsam <- spsample(x = xline, n = segs, type = "regular", offset = 0)
points(xsam) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:56:36.587

以下步骤将帮助您找到坐标。

线路的一般信息：

```
library(np)

coord <- coordinates(xline)[[1]][[1]] 
nLines <- nrow(coord) - 1
#lengths <- sapply(seq_len(nLines), function(x) LineLength(coord[c(x, x + 1), ]))
lengths <- LineLength(coord, sum = FALSE) 
```

找到新坐标：

```
findme <- 11 # the distance of the new coordinates

distances <- cumsum(lengths) - findme         # distances from the nodes
segment <- which(distances >= 0)[1]           # the segment of interest
distToNode <- distances[segment]
ratio <- distToNode / lengths[segment]
segCoord <- coord[c(segment, segment + 1), ]
newCoord <- (1 - ratio) * segCoord[2 , ] + ratio * segCoord[1 , ] 
```

阴谋：

```
points(newCoord[1], newCoord[2]) 
```

![在此处输入图像描述](../Images/7d56ddd2ac648527ab36d3ff0d10d597.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:13:33.960

您可以...吗：

*   确定段的顺序
*   确定每段的长度
*   使用顺序和长度来确定点在哪个段上
*   从 order * length 中减去段的开头（例如，如果您知道自己在第三段上，则将减去第三段和第二段相交点的长度（这只是段 1 的总和） 2）从整行开始）。因此，如果您试图从线的起点找到 7 个单位的点，并且段 1 和 2 的总和为 5，那么您将得到 2。
*   然后只需使用[此方法](https://stackoverflow.com/questions/1934210/finding-a-point-on-a-line)处理唯一剩余的段，以确定该段向下 2 个单位的点。

如果这不是完整的解决方案，我很抱歉。但也许它会给你一个可以解决的方法。

希望有帮助...

# dynamics-crm-2011 - 防止在插件中创建

> ID：13365153
> 
> 赞同：2
> 
> 时间：2012-11-13T16:58:51.000
> 
> 标签：dynamics-crm-2011

我在服务活动的预创建上注册了一个插件。在插件中，我检查了一些条件，如果满足，我想停止创建服务活动。我想创建另外两个替代服务活动，而不是那个服务活动。但我不希望用户收到这一切的通知。

有没有办法停止在 CRM 2011 插件中创建 SA 记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:27:57.920

因此，如果用户通过 Dynamics CRM GUI 触发服务活动的创建，通常会保存表单（通过发送 internal `UpdateRequest`），然后通过另一次访问数据库来刷新。如果您通过插件删除了两个事件之间的记录，用户*肯定*会收到标准的“找不到记录”错误消息。在这种情况下，在阻止创建记录的插件中抛出异常相当于通知用户，但至少他会看到一条可自定义的消息，可能会告诉他为什么保存不起作用。

在我看来，通过插件处理这个问题的最好方法是

1.  检查你的条件。
2.  *更改*（而不是删除）现有的保存服务活动以匹配您要创建的其他服务活动之一的标准。这样就不会不必要地删除任何内容。
3.  创建其他服务活动。
4.  使用现在更改的服务活动刷新表单后，您可以在 javascript 中做任何您想做的事情（打开另一条记录，关闭当前记录等）。

如果您可以控制 GUI，则可以做一些不同的事情（例如，删除记录发布操作，尽管这仍会导致额外的不必要的数据库操作），并且您始终可以使用 javascript 进行客户端验证.

还有一点：我还必须补充一点，从用户的角度来看，保存记录然后没有立即看到它会构成意外的 CRM 行为。如果发生这样的事情，我至少希望接受一些关于 CRM 的该部分如何工作的培训，或者收到关于实际上发生了根本不同的事情的通知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T17:43:04.327

不直接 -`Target`从`InputParameters`example 中删除 会导致引发错误。

终止插件的常用方法是抛出异常，但您的用户当然会看到这一点（而且它可能会回滚您之前实现的任何其他逻辑）。

我发现的最佳解决方案是有一个同步的操作前插件来创建您想要的记录（大概基于原始记录中提供的数据）和一个异步的操作后插件来删除不需要的记录。它必须是异步的，例如，如果没有引发异常，对话流程或工作流假定记录已成功创建，并在创建后立即尝试访问记录（即使不需要进一步处理）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:41:19.997

如果抛出异常，您可以停止，如下所示：

```
throw new InvalidPluginExecutionException("Something is wrong!"); 
```

希望这可以帮助。如果我回答了您的问题，请将回复标记为答案并投票为有帮助。

# .net - 在 Ubuntu/Debian 中安装 Mono 3.x

> ID：13365158
> 
> 赞同：59
> 
> 时间：2012-11-13T16:59:07.357
> 
> 标签：.net, mono

我最近读到 Mono 3.0 已经发布了一个 C# 5 编译器和对 MVC 4 的支持：

[http://www.mono-project.com/Release_Notes_Mono_3.0](http://www.mono-project.com/Release_Notes_Mono_3.0)

和

[http://tirania.org/blog/archive/2012/Oct-22.html](http://tirania.org/blog/archive/2012/Oct-22.html)

对于我的一生，我无法弄清楚从哪里获得它作为 Linux 甚至 Windows 的软件包。

此页面似乎表明它仍处于测试阶段：

[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

我试过`apt-get install mono-complete`在 Ubuntu 12.10 上做一个，但它安装的是 2.10.8.1。

我已经尝试在我的 Windows 机器上安装 MonoDevelop 3，但它只向我展示了 MVC 3 项目，并且似乎正在使用 .NET 框架。

我对 Mono 完全陌生，我已经用谷歌搜索了所有可能的东西，试图看看它是如何工作的，但我感到困惑。如果可能的话，我很想在 Linux 上运行它并尝试一些东西。

有人可以对此有所了解，还是我需要考虑从源头构建它？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-16T21:45:39.467

这是安装单声道 3.0.1 的完整指南

对于不知道如何在 Ubuntu 12.04 上获得新的 Mono 3.0.1 版本的初学者（因为我是初学者，我已经为此工作了 3 天，然后才使它工作）

**获取 root 访问权限以安装和配置 Mono 3.0.1**

```
sudo -s
***type your root password*** 
```

**安装 vim 编辑器**

```
apt-get install vim 
```

**安装 apache2**

```
apt-get install apache2 
```

**安装编译单声道的工具**

```
apt-get install autoconf automake libtool g++ gettext libglib2.0-dev libpng12-dev libfontconfig1-dev
apt-get install mono-gmcs
apt-get install git 
```

**安装 apache2-threaded-dev (编译 mod_mono 需要) *****

```
apt-get install apache2-threaded-dev 
```

**稍后我们将回到 apache2 配置**

**制作获取源代码所需的结构**

```
cd /opt
mkdir mono-3.0 
```

**在获取源代码之前进入该新文件夹**

```
cd /opt/mono-3.0 
```

**从 GitHub 获取源代码**

```
git clone git://github.com/mono/mono.git
git clone git://github.com/mono/xsp.git
git clone git://github.com/mono/libgdiplus.git
git clone git://github.com/mono/mod_mono.git 
```

**编译 libgdiplus**

```
cd /opt/mono-3.0/libgdiplus
./autogen.sh --prefix=/usr  (the prefix is very important for Ubuntu 12.04)
make
make install 
```

**编译单声道**

```
cd /opt/mono-3.0/mono/
make clean
./autogen.sh --prefix=/usr  (the prefix is very important for Ubuntu 12.04)
make
make install 
```

**编译 xsp**

```
cd /opt/mono-3.0/xsp
./autogen.sh --prefix=/usr  (the prefix is very important for Ubuntu 12.04)
make
make install 
```

**编译 mod_mono**

```
cd /opt/mono-3.0/mod_mono
./autogen.sh --prefix=/usr  (the prefix is very important for Ubuntu 12.04)
make
make install 
```

**安装 mod_mono 后，文件 mod_mono.conf** **已添加到您的 apache2 文件夹（/etc/apache2）* *

**配置 apache2**

**配置apache的默认站点###（可选***）**

```
vim /etc/apache2/sites-available/default
Modify the line "DocumentRoot /var/www" by "DocumentRoot /var/www/YourFolder" (YourFolder is the folder where you publishing your website!) 
```

**配置YourFolder的权限（可选***）**

```
cd /var/www/YourFolder
sudo chown -R root:www-data .
sudo chmod -R 774 .
sudo usermod -a -G www-data <yourusername> 
```

**在 apache2.conf 中添加 mod_mono 包含**

```
vim /etc/apache2/apache2.conf
Add "Include /etc/apache2/mod_mono.conf" at the end of the file (without quotes!) 
```

**在 mod_mono.conf 中添加指向 ASP .NET 4.0 的指针**

```
vim /etc/apache2/mod_mono.conf
Add "MonoServerPath /usr/bin/mod-mono-server4" (without quotes!) under the "If Modules condition" 
```

**重启apache2服务器** /etc/init.d/apache2 restart

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-14T17:42:05.250

Mono 3.x 对于 Ubuntu 12.10 来说太前沿了。以这种方式从 directhex 的 PPA 中获取预览包（这将安装 3.2.1）：

```
sudo add-apt-repository ppa:directhex/monoxide 
```

（如果您使用的是 Ubuntu saucy 13.10，在添加存储库后您需要编辑文件`/etc/apt/sources.list.d/directhex-monoxide-saucy.list`并将单词**saucy**替换为**raring**）

然后，在那之后：

```
sudo apt-get update && sudo apt-get dist-upgrade 
```

如果您之前安装了 monodevelop，这也将为您提供 MonoDevelop 4.x。

**注意**：directhex 不是随便创建 PPA 的人，他是所有基于 Mono 和 Mono 的软件包的 Debian/Ubuntu 维护团队的一员。因此，使用这是升级基础架构的最正式方式。

* * *

对于 debian 用户：mono 3.0.6 和 MonoDevelop 4.0.x[已经在 debian testing 中可用](http://release.debian.org/migration/testing.pl?package=mono)。所以我建议得到这个是：

1.  安装 debian testing（当前名为 debian jessie）。
2.  通过这样做卸载单声道`sudo apt-get purge mono-runtime`（在这样做之后，抵制这样做的诱惑，`sudo apt-get autoremove`否则你会破坏你的系统，我[在这里](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=711322)报告为一个错误）。
3.  修改`/etc/apt/sources.list`，找到提到`main`来源的第一行，并将单词重命名`jessie`为`sid`。
4.  做`sudo apt-get update`。
5.  通过安装 monodevelop `sudo apt-get install monodevelop`，它也会将 mono 作为依赖项。
6.  还原您在第 3 步中所做的操作。
7.  再次执行第 4 步。

这样你就有了一个或多或少的现代发行版（与 debian stable 不同），加上非常非常现代的 mono 包（Mono 的前沿版本通常非常稳定）。

F# 用户：Mono 3.0.6 有一个错误导致该语言无法在此版本中工作，请改用 Mono 3.2.x。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-25T04:37:26.457

我已经从源代码安装单声道 3.x 到 Ubuntu Raring 上的几个步骤：

1：一键获取依赖项：

```
sudo apt-get install build-essential autoconf automake \
bison flex gtk-sharp2-gapi boo gdb valac libfontconfig1-dev \
libcairo2-dev libpango1.0-dev libfreetype6-dev libexif-dev \
libtiff4-dev libgif-dev zlib1g-dev libatk1.0-dev libjpeg8-dev \
libjpeg-turbo8-dev libglib2.0-dev libgtk2.0-dev libglade2-dev \
libart-2.0-dev libgnomevfs2-dev libgnome-desktop-dev \
libgnome2-dev libgnomecanvas2-dev libgnomeui-dev libgnomeprint2.2-dev \
libgnomeprintui2.2-dev libpanel-applet-4-dev \
libnautilus-extension-dev librsvg2-dev libgtkhtml3.14-dev \
libgtksourceview2.0-dev libgtksourceview2.0-dev libvte-dev \
libwnck-dev libnspr4-dev libnss3-dev libwebkit-dev libvala-0.18-dev 
```

2：在某处创建一个文件夹来保存源：

```
sudo mkdir /opt/mono-3 
```

3：用git克隆到文件夹中

```
cd /opt/mono-3
sudo git clone git://github.com/mono/mono.git
cd  mono
sudo git checkout mono-3.0.12 
```

4：构建和安装

```
sudo ./autogen.sh --prefix=/usr/local
sudo make
sudo make install 
```

就是这样！

要获得 System.Drawing.dll 和 System.Windows.Forms.dll 的最新更改，您还需要配置、构建和安装 libgdiplus。

```
 cd libgdiplus
 ./autogen.sh --prefix=/usr/local
 make
 make install 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-13T18:47:44.870

`apt-get install`安装您的发行版附带的任何版本的 Mono，这似乎是 2.10.8.1。您的发行版可能有也可能没有较新的 Mono 包，您可能必须在发行版的包管理器中选择一些较新的更新渠道。由于您没有提及您使用的是哪个 Linux 发行版（以及它的哪个版本），因此无法回答。

`apt-get`表明它是基于 Debian/Ubuntu 的，但有许多不同的版本。我是Mac人，所以我不知道。

有关如何从源代码编译的说明，请参阅[http://www.mono-project.com/Compiling_Mono 。](http://www.mono-project.com/Compiling_Mono)

但是，这个问题确实属于 superuser.com，如果你在那里问，你会得到更好的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-09T19:13:44.047

我没有从任何地方找到这个链接，所以它可能是非官方的，但你可以从这里获得 Mono 3.0.10 的 Windows 安装程序：

[http://download.mono-project.com/archive/3.0.10/windows-installer/mono-3.0.10-gtksharp-2.12.11-win32-0.exe](http://download.mono-project.com/archive/3.0.10/windows-installer/mono-3.0.10-gtksharp-2.12.11-win32-0.exe)

**编辑**：为确保您下载的是最新版本，请打开[http://download.mono-project.com/archive/](http://download.mono-project.com/archive/)并检查每个版本子目录（从最后一个开始并向后移动），直到找到一个包含一个“windows-installer”子目录。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-14T17:27:55.337

现在有一个指向 Mono 3.0.1 的 Windows 安装程序的链接。不幸的是，它似乎没有安装在 Windows 7 64 位上。你可能会有更好的运气。

[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-13T22:27:59.483

为了完成 Dominique Goudreault 关于“Denis The Menace 在评论中的问题”的出色解决方案，Ubuntu 13.04 x86\. 它说 /usr/bin/ld: testgdi.o: undefined reference to symbol 'g_print'"

请按照这个简单的技巧为我完成它。

[http://www.sgvulcan.com/libgdiplus-2-10-9-build-fails-on-slacware-current64-2012-06/](http://www.sgvulcan.com/libgdiplus-2-10-9-build-fails-on-slacware-current64-2012-06/)

我无法如我所愿地回复评论，所以我必须在这里提出另一个答案，有什么更好的做法建议吗？

更新：Opps，我没有注意到 David V 已经指出了解决方案，把所有的功劳都归功于他，我的链接说的是同样的事情，但可能提供了一条更清晰的路径。:P

# winforms - Graphics.DrawLines：参数无效

> ID：13365165
> 
> 赞同：2
> 
> 时间：2012-11-13T16:59:41.877
> 
> 标签：winforms, graphics, delphi-prism, oxygene

对于这个问题，我确实梳理了 Stackoverflow 中类似的问题来寻找答案。尽管他们中的很多人很有帮助，但他们并没有解决我的问题。我的程序使用 graphics.DrawLines 方法在 Winform 上绘制多边形，如下所示。

```
g.DrawLines(thepen,pts); 
```

但这不断提高，“参数无效”，错误。因此，我将那行代码更改如下，看看它是否有任何不同。

```
g.DrawLines(new pen(color.Black),pts); 
```

同样，它引发了同样的错误。pts 是 system.drawing.point 的数组，而 thepen 是 system.drawing.pen。

如果我完全注释掉它，我的程序就没有问题，它不会引发任何错误。然而，奇怪的是在过去的 3 或 4 个月内，相同的代码可以正常工作。从昨天开始，我似乎无法让它再次工作。

winform是否有需要设置的属性设置？

**更新**这是实际的绘制方法

```
method TMakerPoly.Draw;
var
  pts: Array of point;
  i:integer;
  theBrush1:HatchBrush;
  theBrush2:SolidBrush;
begin
  if (theBrushStyle = HatchStyle.Wave) then
     theBrush1 := new HatchBrush(theBrushStyle,Color.Transparent,color.Transparent)
  else if (theBrushStyle = HatchStyle.ZigZag) then
     thebrush2 := new SolidBrush(FillColor)
  else
     theBrush1 := new HatchBrush(theBrushStyle,FillColor,color.Transparent);

  if (thePen.DashStyle = DashStyle.Custom) then
    thepen.Color := Color.Transparent;

  pts := new point[pcount];

  if pcount >= 2 then
  begin
    if Active then
    begin
      for i := 0 to pcount-1 do
        pts[i] := point(points[i]);
      Translate(var pts,pcount);

      thepen.Color := EdgeColor(thepen.Color);
      fillColor := self.BackColor(FillColor);
      if visible then
      begin
        if filled then
        begin
            if theBrushStyle = HatchStyle.ZigZag then
                g.FillPolygon(theBrush2,pts)
            else 
                g.FillPolygon(thebrush1,pts);

            g.DrawPolygon(thepen, pts);
        end
        else
            g.DrawLines(thePen, pts);
      end;
    end
    else
    begin
      for i := 0 to pcount-1 do
        pts[i] := point(points[i]);

      if filled then
      begin
            if theBrushStyle = HatchStyle.ZigZag then
                g.FillPolygon(theBrush2,pts)
            else 
                g.FillPolygon(thebrush1,pts);

            g.DrawPolygon(thepen,pts);        
      end
      else
        g.DrawLines(new Pen(color.Black),pts);
    end;
  end;
end; 
```

任何帮助或提示或线索将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:23:13.017

如果您的 pts 数组的点数少于 2，则会抛出参数无效错误。

确保您的数组有足够多的点来绘制线条。

# django - 如何在tastepie 中创建自定义嵌套的ToMany 资源？

> ID：13365175
> 
> 赞同：1
> 
> 时间：2012-11-13T17:00:11.583
> 
> 标签：django, tastypie

我在 django 中有一个稍微复杂的模型结构，其中包括一个 UserProfile

```
class UserProfile(models.Model):
    shoppinglist = models.ManyToManyField(Offer)
    user         = models.OneToOneField(User)
    follows = models.ManyToManyField('self', related_name='followers', symmetrical=False, blank=True) 
```

和报价

```
class Offer(models.Model):
    description = models.CharField(max_length=200) 
```

这意味着每个用户都可以关注其他用户，并可以创建一个包含他们喜欢的优惠的购物清单。

我可以创建一个查询来查看优惠是否在我关注的任何人的购物清单中

```
profile.follows.filter(shoppinglist=offer) 
```

它返回一个 UserProfile 对象的查询集。

现在，我的美味派 API 中有代表这两个模型的 OfferResource 和 UserProfileResource。

我需要做的是，每当我获得优惠列表时，为每个优惠添加一个自定义字段，其中包含我关注的“喜欢”该优惠的人员列表。

```
offer: {
    description: 'Something'
    liked_by: [
        { ... },
        { ... }
    ]
} 
```

我知道我可以覆盖“脱水”方法来添加自定义字段，但如果我添加

```
def dehydrate(self, bundle):
    bundle.data['liked_by'] = profile.follows.filter(shoppinglist=bundle.obj) 
```

like_by 字段中生成的用户列表未序列化或脱水。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:06:16.177

您可以通过对 OfferResource 上的 ToManyField 的“属性”参数使用 lambda 函数来“嵌入”包。例如：

```
liked_by = fields.ToManyField(
    UserProfileResource,
    attribute=lambda bundle: bundle.request.user.get_profile().follows.filter(
        shoppinglist=bundle.obj),
    full=True,
    null=True) 
```

[一些关于此的文档。](http://django-tastypie.readthedocs.org/en/latest/fields.html#tomanyfield)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:07:47.400

您可以使用 UserProfileResource 对对象列表进行脱水：

```
class OfferResource(ModelResource):

    ...
    users = fields.ToManyField(UserProfileResource, attribute='users', full=True)

    ...
    def dehydrate_users(self, bundle):
        res = UserProfileResource()
        objects = profile.follows.filter(shoppinglist=bundle.obj)
        bundles = [res.build_bundle(obj=obj, request=bundle.request) for obj in objects]
        return [res.full_dehydrate(bundle) for bundle in bundles] 
```

也可以为`attribute`kwarg 提供一个可调用对象，但不清楚您需要什么才能查找您的`profile`对象。如果您可以在该范围内获得它，那么您只需要返回一个查询集：

```
class OfferResource(ModelResource):

    ...
    users = fields.ToManyField(UserProfileResource, 
        attribute=lambda bundle: get_profile(bundle.request).follows.filter(shoppinglist=bundle.obj),
        full=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:18:19.223

对我来说，您可能需要阅读美味的文档并弄清楚您需要扩展什么。因为我的猜测是你需要在那里扩展一些东西。不在模型中，而是在美味派（序列化程序，字段）中。IT 很难回答，因为您的意图仍然不是 100% 清楚。

此外，由于您似乎想要聚合更多模型，请查看[此链接](https://groups.google.com/forum/?fromgroups=#!topic/django-tastypie/JGmY8tUzlX0)是否对您有帮助：

# python - python 正则表达式的字符集中的反斜杠（如何指定“非反斜杠”字符集）？

> ID：13365179
> 
> 赞同：5
> 
> 时间：2012-11-13T17:00:29.353
> 
> 标签：python, regex

我想使用 python 正则表达式来删除 LaTeX 文件中的注释。在 LaTeX 中，注释以“%”开头。但是如果 % 字符被转义（“\%”）那么它不是注释，它的符号百分比。

这个任务只是我在 LaTeX 文本中应用的众多正则表达式之一。我将所有这些 reg exp 存储在字典列表中。

我面临的问题是我用于修剪评论的正则表达式不起作用（因为我不知道如何指定字符集'非反斜杠'）。字符集中的反斜杠转义了结束的 ']' 并且正则表达式不正确。

我的代码：

```
regexps=[]
regexps.append({r'left':'%.*', 'right':r''}) # this strips all the comments, but messes up with the percent characters (\%)
regexps.append({r'left':'[^\]%.*', 'right':r''}) # this is incorrect (escapes the closing "]" )
return applyRegexps(latexText, regexps)

def applyRegexps(text, listRegExp):
    """ Applies successively many regexps to a text"""
    if testMode:
        print str(listRegExp)
    # apply all the regexps in the list
    for element in listRegExp:
        left = element['left']
        right = element['right']
        r=re.compile(left)
        text=r.sub(right,text)
    return text 
```

任何帮助都感激不尽。谢谢！

吉尔斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:03:18.853

只需将反斜杠加倍，但请使用原始字符串文字以避免*再次*将它们加倍：

```
regexps.append({'left':r'[^\\]%.*', 'right':r''}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:16:46.383

尽管 Martijn Pieters 的答案是您所要求的，但我不确定这是否是您真正想要的。例如，此模式不会将 a`%`作为字符串的第一个字符匹配（因为它前面没有非反斜杠字符）。你真正想要的可能是一个负前瞻（你仍然需要转义反斜杠）：

```
r'(?<!\\)%.*' 
```

区别在于：

*   `[^\\]%`匹配`%`前面有一个非反斜杠字符（包括匹配中的那个字符）
*   `(?<!\\)%`匹配`%`前面没有反斜杠字符的 a（不包括在匹配中）

后一个也适用`%`于字符串的开头。

# asp.net - 使用 MDX 检索多个 CellSet

> ID：13365181
> 
> 赞同：0
> 
> 时间：2012-11-13T17:00:32.747
> 
> 标签：asp.net, sql, ssas

我们有一个通过 SQL SSAS 托管的数据立方体。目前，我们有用户可以打开 Excel 电子表格，插入客户 ID，电子表格将根据该客户返回相关的多维数据集信息……例如销售至今、上次销售等。

我遇到的问题是.. 我试图通过 ASP.NET 启用此报告界面。我正在使用 ADOMD.NET 来读取多轴单元组，但这只是为了拉出一个特定的值以显示在页面上。

在关系\SQL 世界中，我会尝试将所有这些数据作为一个查询提取。将其存储在存储过程中。并调用它来提取我的所有数据。我将如何在多维世界中做类似的事情？简而言之，如果我必须从多维数据集中提取 10 个不同的单元格值，我不想进行 10 次单独的 SSAS 之旅来获取我的数据。

提前感谢您提供的任何指导！

--- 编辑 1--- 好的，想知道我是否有办法将我需要的所有数据“编译”成二维视图？如果我知道我需要 10 个不同的多维数据集值，我可以生成这些值，将它们存储为视图，然后在运行时查找该表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:32:25.160

There are two approaches but in the multi-dimensional world this can be a tad tricky.
1) If the cell values you are getting belong to the same axes, you could always specify the exact cells you want to obtain (e.g. [Dimension].[Level].[A], [Dimension].[Level].[B], etc.)

2) Another approach based on your edit is to run the query as you suggested and store it into a SQL table for example. You could use an OpenQuery statement that has a linked server connection to your SSAS cube to run the MDX query, and place the results into a table for you to get a later time (sort of like a poor-man's cache).

HTH!

# outlook - 在 IE 中启动时在 Outlook 中获取“不是有效的 Internet 日历文件”，而不是其他浏览器

> ID：13365182
> 
> 赞同：1
> 
> 时间：2012-11-13T17:00:43.053
> 
> 标签：outlook

我正在尝试从 Outlook 2010 订阅 Internet 日历。该网站包含一个 webcal 链接。当我单击 Chrome 或 FF 中的链接时，我会收到浏览器警告消息，然后是 Outlook 警告消息，然后 Outlook 会毫无问题地创建订阅。

但是，当我在 IE (IE9) 中单击相同的 webacal 链接时，我会收到两个警告，但是当 Outlook 尝试订阅时，我会收到文件“不是有效的 Internet 日历文件”消息。如果我从 IE 复制 webcal 链接，而是使用文件 --> 信息 --> 帐户设置 --> Internet 日历手动粘贴 Internet 日历 URL，则效果很好。

换句话说，它适用于除 IE 之外的所有浏览器。

# php - 2 使用 jQuery 或 Ajax 的自动完成/建议输入框，第二个框基于具有多个项目的第一个选择

> ID：13365185
> 
> 赞同：0
> 
> 时间：2012-11-13T17:00:57.237
> 
> 标签：php, javascript, jquery, mysql, ajax

我尝试了许多 jquery 和 ajax 自动完成脚本。我发现很难尝试将它们中的任何一个集成到我需要的东西中。

让我解释一下我想要实现的目标。

我需要 2 个自动完成框。第二个从第一个中提取数据。此外，它们都必须支持多个条目。查询数据库以获取数据。我现在使用本地数据，但将来可以更改。

我们将使用州和城市作为示例。

我有一个 mysql 数据库，它包含：- id、state、city。我使用 JSON 格式来提取结果。

因此，如果我们在第一个框中选择 2 个州。我在西班牙，所以说马拉加和加的斯。然后在城市的第二个自动完成框中，而不是查询我的所有城市的数据库，它只给出马拉加和加的斯城市的结果。

我使用的所有脚本似乎都没有足够详细的解释来实现这一点。我对 PHP 非常熟悉，但在 JS-jQuery/JSON/Ajax 方面完全是个菜鸟。我取得了进展，我可以让第一个自动完成框工作并拉动 2 个状态，但在那之后我似乎无法取得任何进展。

我目前使用的脚本是 Drew Wilsons Auto 建议。[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

如果我想要实现的目标可以用这个脚本来完成，那就太好了。我也愿意接受其他建议脚本或想法。

这是我的 php 脚本中的一些代码。（p3.php）它不能按我的需要工作，因为我似乎被卡在了某个地方。它确实选择了多个州！至少是一个好的开始。

```
<?php
// DB connection details (removed from here)
//DB Connection
$dblink_main = mysql_connect($host_main,$user_main,$pass_main);
$selectdb_main=mysql_select_db($database_main,$dblink_main);

// changed default q in autosuggest.php!
$input  = $_GET["plkup"];
//$input2   = $_GET["clkup"];
//$province2    = $_GET["province2"];
//$province = 'Cadiz';
//$province2    = "Cadiz";

$data = array();
// query your DataBase here looking for a match
$query = mysql_query("SELECT distinct province FROM spanish_regions WHERE province LIKE         '%$input%'");
// query 2 - doing this wrong!
//$query2 = mysql_query("SELECT city, province FROM spanish_regions WHERE province LIKE     '%$input2%'");

while ($row = mysql_fetch_assoc($query)) {
$json = array();
$json['province'] = $row['province'];
$data[] = $json;
}
//while ($row = mysql_fetch_assoc($query2)) {
//$json = array();
//$json['city'] = $row['city'];
//$data[] = $json;
//}

header("Content-type: application/json");
echo json_encode($data);
?> 
```

HTML 代码。

```
<form action="">
<label>Province: </label><input type="text" id="province" name="" size="20" value=""         autocomplete="off" />
</form>
<form action="">
<label>City: </label><input type="text" id="city" name="" size="20" value=""     autocomplete="off" />
</form>

<script language="javascript" type="text/javascript">
jQuery(function(){
jQuery( "#province" ).autoSuggest("p3.php",  {selectedItemProp: "province",         selectedValuesProp: "province", searchObjProps: "province", queryParam: "plkup", minChars:     1, matchCase: false}); 
});
// Below does not work. Again I am probably going around this wrong way.
jQuery(function(){
jQuery( "#city" ).autoSuggest("p3.php",  {selectedItemProp: "city", selectedValuesProp:     "city", searchObjProps: "city", minChars: 1, queryParam: "clkup", matchCase: false}); 
});
</script> 
```

我真的不确定如何让第二个自动完成框仅通过第一个选择的状态从数据库过滤中获取数据。任何想法或解决方案或想法将不胜感激。

非常感谢马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:35:23.647

这是一个非常简单的程序。我将只显示主要骨架。添加快速肉类将由您负责。

假设我们有两个这样`<select>`的：`ajax.php`

```
 <select id="parent">
        <option value="1">value1</option>
        <option value="2">value2</option>
        <option value="3">value3</option>
        <option value="4">value4</option>
    </select>

    <select id="child">

    </select> 
```

那么我们需要什么？我们需要填充`<select>`其选择的第二个事件。

这是javascript部分**（ajax.php）**

* * *

```
<script type="text/javascript">
            $(function(){                    
                $('#parent').change(function(){ //on change event
                var parentVal = $('#parent').val(); //<----- get the value from the parent select
                $.ajax({
                    url     : 'process.php', //the url you are sending datas to which will again send the result
                    type    : 'GET', //type of request, GET or POST
                    data    : { parentValue: parentVal}, //Data you are sending
                    success : function(data){$('#child').html(data)}, // On success, it will populate the 2nd select
                    error   : function(){alert('an error has occured')} //error message
                })
            })

            })
    </script> 
```

这会将请求发送到`process.php`

现在来了**`process.php`**

* * *

这里我们需要数据来填充第二个`<select>`

现在里面有`<select>`什么？

`<option value="someValue">someText</option>`

您需要输出如下内容：

```
 <option value="11">value11</option>
    <option value="12">value12</option>
    <option value="13">value13</option>
    <option value="14">value14</option> 
```

值和里面的文字填满了你的需要。

因为它将来自数据库：

*   您可以`process.php`使用`$_GET['parentValue']`
*   使用该值，查询数据库
*   然后从数据库返回的结果中，使用循环`while`，`foreach`或者`for`（取决于您检索它的方式），制作 `<option value="someValue">someText</option>`.
*   你完成了！

**对于多选**

为了让生活更轻松，您可以使用[选择的多选](http://harvesthq.github.com/chosen/)

**一个建议**

`mysql_*`已弃用。改用 PDO。这是[一个教程的链接](http://www.phpeveryday.com/articles/PDO-Insert-and-Update-Statement-Use-Prepared-Statement-P552.html)

# json - 使用 Jerkson 将 JSON 反序列化为用户定义的案例类

> ID：13365186
> 
> 赞同：7
> 
> 时间：2012-11-13T17:01:03.510
> 
> 标签：json, scala, playframework, jerkson

我遇到了这个关于使用 Jerkson 在 Scala 中处理 JSON 的优秀[教程](http://bcomposes.wordpress.com/2012/05/12/processing-json-in-scala-with-jerkson/)。特别是，我对将 JSON 反序列化为用户定义的案例类感兴趣。文章有一个简单的例子

```
case class Simple(val foo: String, val bar: List[String], val baz: Map[String,Int])

object SimpleExample {
  def main(args: Array[String]) {
    import com.codahale.jerkson.Json._
    val simpleJson = """{"foo":42, "bar":["a","b","c"], "baz":{"x":1,"y":2}}"""
    val simpleObject = parse[Simple](simpleJson)
    println(simpleObject)
  }
} 
```

我运行它时遇到此错误，我在 Play 2.0.1、Scala 2.9.1-1、Jerkson 0.5.0 上。

```
Execution exception [[ParsingException: Unable to find a case accessor 
```

在 Google Groups 上也找到[了这个](https://groups.google.com/forum/#!msg/play-framework/MKNPYOj9LBA/Ll6Fch98ZBkJ)，但它没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T06:28:51.770

不幸的是，我不认识 Jerkson，但 Spray-Json 让这类事情变得简单。下面的示例来自[Spray-Json 自述文件](https://github.com/spray/spray-json)：

```
 case class Color(name: String, red: Int, green: Int, blue: Int)

object MyJsonProtocol extends DefaultJsonProtocol {
  implicit val colorFormat = jsonFormat4(Color)
}

import MyJsonProtocol._

val json = Color("CadetBlue", 95, 158, 160).toJson
val color = json.convertTo[Color] 
```

[这是与某人的 git 存储库](https://github.com/jestan/spray-json-examples/blob/master/src/main/scala/cc/spray/json/example/SprayJsonExamples.scala)略有不同的示例：

```
package cc.spray.json.example

import cc.spray.json._

object EnumSex extends Enumeration {
  type Sex = Value
  val MALE = Value("MALE")
  val FEMALE = Value("FEMALE")
}

case class Address(no: String, street: String, city: String)

case class Person(name: String, age: Int, sex: EnumSex.Sex, address: Address)

object SprayJsonExamples {
  def main(args: Array[String]) {
    val json = """{ "no": "A1", "street" : "Main Street", "city" : "Colombo" }"""
    val address = JsonParser(json).fromJson[Address]
    println(address)

    val json2 = """{ "name" : "John", "age" : 26, "sex" : 0 , "address" : { "no": "A1", "street" : "Main Street", "city" : "Colombo" }}"""

    val person = JsonParser(json2).fromJson[Person]
    println(person)
  }
} 
```

# c# - 自托管 SignalR 和访问控制允许来源

> ID：13365192
> 
> 赞同：2
> 
> 时间：2012-11-13T17:01:26.003
> 
> 标签：c#, winforms, signalr

我正在尝试实现以下目标： 1\. 托管 SignalR 持久连接的服务器（现在为 WinForms） 2\. ASP.NET MVC 客户端

服务器在端口 8000 上运行，客户端在端口 22914 上运行（通过 Visual Studio）。但是当我对此进行测试时，出现以下错误：

```
XMLHttpRequest cannot load http://localhost:8000/echo/negotiate?_=1352825948654\. Origin http://localhost:22914 is not allowed by Access-Control-Allow-Origin. 
```

到目前为止一切顺利，我需要指定允许跨域通信。我认为这需要在服务器上完成。但是在哪里以及如何？我找不到解决方案，不幸的是，网络上没有很多关于在 WinForms 应用程序中自托管 SignalR 连接的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:55:57.980

CORS 有两种工作方式：简单请求和飞行前请求。

简单请求只是使用`GET`/`POST`动词发出正常请求，并期望`Access-Control-Allow-Origin`在正常响应中找到标头。在飞行前的场景`OPTION`中，发送了一个请求，您需要专门处理该动词并使用一堆`Access-Control-XXX`标头进行响应。

如果不完全进入[规范](http://www.w3.org/TR/access-control/)来支持这一点，您将需要进入主机的响应中间并`Access-Control-Allow-Origin`为简单请求注入标头。`OPTION`如果您希望客户可能使用飞行前方法，您还需要为动词添加特定处理。由于我不确切知道您是如何进行自定义托管的，因此我无法就如何执行此操作为您提供具体建议，但希望这能让您顺利上路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:37:05.907

我最近自己也遇到了这个问题；答案是在您的客户端应用程序中指定服务器 URL 和端口，即针对以下场景：

服务器：`http://localhost:8000/`

客户：`http://localhost:22914/`

**客户申请：**

```
$.connection.hub.url = 'http://localhost:8000/signalr'

$.connection.hub.start(); 
```

[记录在Github 上 SignalR Client Hubs Wiki](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)的底部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T18:52:20.177

在查看 SignalR 代码时，它看起来好像自托管服务器在响应时自动添加 Access-Control-Allow-Origin，只需在请求标头中反映“Origin”值。

来自`Microsoft.AspNet.SignalR.Hosting.Self.Server.ProcessRequestAsync()`：

```
string origin = context.Request.Headers["Origin"];
if (!String.IsNullOrEmpty(origin))
{
    context.Response.AddHeader("Access-Control-Allow-Origin", origin);
    context.Response.AddHeader("Access-Control-Allow-Credentials", "true");
} 
```

显然假设是，如果您是自托管的，那么一切都将是跨域的，所以让我们继续并允许一切。我不确定这是否是最好的假设，但在接线时肯定会减少一件事。

此外，它不一定能解决您的问题 - 但它确实意味着问题可能与没有在标题中设置 Access-Control-Allow-Origin 无关。

# php - 在 PHP 中将值添加到 HashMap

> ID：13365196
> 
> 赞同：0
> 
> 时间：2012-11-13T17:01:29.810
> 
> 标签：php

我有一个这样的数组：

```
$my = array('hello'=>'hi', 'goodbye'=>'bye'); 
```

如何将另一个元素添加到此数组中？

我试过：

```
array_push($my, array('submit'=>'send')); 
```

如何将值添加到 HashMap？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T17:03:12.890

请阅读[有关数组的手册](http://php.net/manual/en/language.types.array.php)。这是用 PHP 开发软件的一个基本且极其微不足道的部分。

```
$my['new key'] = 'new value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:05:36.680

试试这个： $my['submit'] = "send";

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T17:15:28.950

查看[array_push](http://fr2.php.net/manual/fr/function.array-push.php)文档。

每次您需要在 PHP 中做某事时，您都必须先阅读文档。

# java - 如何检查重复项未添加到 LinkedBlockingQueue？

> ID：13365197
> 
> 赞同：4
> 
> 时间：2012-11-13T17:01:37.963
> 
> 标签：java, multithreading, jakarta-mail, blockingqueue

我正在使用 Java 邮件 API 接收来自多个 gmail 帐户的邮件。不同的帐户正在由不同的线程处理，我正在使用 a`LinkedBlockingQueue`来存储电子邮件。但是，我不希望将相同的电子邮件重复添加到`Queue`. 这是我到目前为止的代码：

```
public synchronized void readMail(){
    try {
        boolean alreadyAdded = false;
        Folder inbox = store.getFolder("Inbox");
        inbox.open(Folder.READ_ONLY);
        Message [] received = inbox.getMessages();

        if(messages.isEmpty()){
            for(Message newMessage:received){
                System.out.println("Queue empty, adding messages");
                messages.put(newMessage);
            }
        }

        else{
            for(Message existingMessage:messages){
                for(Message newMessage:received){
                    if (alreadyAdded == true)
                        break;

                    else{
                        if(existingMessage.getSubject().equals(newMessage.getSubject())){
                            alreadyAdded = true;
                            System.out.println("boolean changed to true, message "+newMessage.getSubject()+"won't be added");
                        }

                        else{
                            alreadyAdded = false;
                            System.out.println("Non-duplicate message "+newMessage.getSubject());
                            messages.put(newMessage);
                        }
                    }
                }
            }
        }
    } 
    catch (MessagingException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

我遇到的问题是在检查队列是否为空`else`之后的块中。`if`我希望它检查刚刚读入的消息集，并将这些消息与`Queue`. 如果消息在，`Queue`请不要再次添加。我不能简单地使用`.contains()`，因为每次下载消息时，它们都会被赋予不同的内存位置，因此尽管`Message`对象实际上可能是相同的（例如具有相同的主题、内容等），但它不会具有相同的签名（例如第一次下载它可能是`Messagehgshsh676767`但下一次可能是`Messageyyetwt8965`）。

我碰到了一堵砖墙，谁能建议一种方法来确保不添加重复项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:18:26.290

您可以为您的消息创建一个包装类，该类将包含一个适当的[equals](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法，基于例如主题

```
public class MyMessage {
    final private Message msg;

    public MyMessage (final Message msg) {
        this.msg = msg;
    }

    public boolean equals (final Object other) {
        if (!(other instanceof MyMessage)) {
            return false;
        }

        final MyMessage otherMessage = (MyMessage) other;
        return msg.getSubject ().equals (otherMessage.getSubject ());
    }

    public Message getMessage () {
        return msg;
    }
} 
```

如果你不关心顺序，你可以使用一些线程安全的[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)实现

```
final Set<MyMessage> messages = Collections.synchronizedSet (new HashSet<MyMessage> ());

Message [] received = inbox.getMessages();
for (final Message msg : reveived) {
    messages.add (msg);
} 
```

这样你就不会重复了。

如果您关心订单，请使用一些[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)，例如：

```
public class MyMessage implements Comparable<MyMessage> {
    ... //the same as above

    public int compareTo (final MyMessage otherMessage) {
        return msg.getReceivedDate ().compareTo (otherMessage.getReceivedDate ());
    }
}

final Set<MyMessage> messages = Collections.synchronizedSet (new TreeSet<MyMessage> ()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T17:10:13.063

```
if(!queue.contains(element)) {
    queue.add(element);
} 
```

如果你想要一个 Set，你可以扩展 LinkedBlockingQueue 并覆盖 add：

```
public boolean add(E e)
    if(!this.contains(e)) {
        return super.add(e);
    } else {
        return false;
    }
} 
```

但是您应该要么制作它并在本地使用它，要么正确地覆盖它——所有可以向它添加元素的方法和构造函数。

关于包含问题，在收到的消息上创建一个包装器并正确实施该`public boolean equals(Object o)`方法。当您收到消息时，将其放入此包装器并将此包装器放入集合中。

# java - BufferedImage 颜色处理

> ID：13365201
> 
> 赞同：3
> 
> 时间：2012-11-13T17:01:53.943
> 
> 标签：java, colors, rgb, bufferedimage

我目前正在开发一个需要更改 BufferedImage 中某些颜色的应用程序。（例如黑色到红色）

在使用 BufferedImage 类的 setRGB 方法时，我注意到一些奇怪的行为。

除非指定的 RGB 值已经在图像中的某处具有特征，否则 setRGB 将简单地将其设置为完全透明的像素。

显而易见的解决方法是在图像中包含所有所需的颜色，但是任何人都可以向我解释为什么会发生这种情况，或者如何解决它？谢谢。

```
public Texture replaceColour(final TextureColour TARGET, final TextureColour REPLACEMENT)
{
            /*
             * You needn't worry about this bit, just some checks my program
             * uses to determine if a similar image has already been created.
             */
    final String PATH = loadedTexturesFilenames.get(REFERENCE) + "!replacedColour:" + TARGET.RGB + ":" + REPLACEMENT.RGB;
    final Texture PATH_TEXTURE = getTexture(PATH);
    if (PATH_TEXTURE == null)
    {
                    /*
                     * This is where the color changing happens.
                     * See below for information on the 'Texture' and
                     * 'TextureColour' classes.
                     */
        final BufferedImage IMAGE = cloneImage(BUFFERED_IMAGE);
        for (int x = 0; x != IMAGE.getWidth(); x++)
        {
            for (int y = 0; y != IMAGE.getHeight(); y++)
            {
                if (getColour(x, y) == TARGET)
                {
                    IMAGE.setRGB(x, y, REPLACEMENT.RGB);
                }
            }
        }
        return new Texture(IMAGE, PATH);
    }
    else
    {
        return PATH_TEXTURE;
    }
}

public static BufferedImage cloneImage(final BufferedImage I) 
{
     ColorModel colour = I.getColorModel();
     boolean alpha = colour.isAlphaPremultiplied();
     WritableRaster writableRaster = I.copyData(null);
     return new BufferedImage(colour, writableRaster, alpha, null);
} 
```

关于代码的一些注释：

*   我的程序使用“纹理”类来“有效地”存储 BufferedImages。
*   以下方法在 Texture 类中。
*   'TextureColour' 类在另一个包含颜色的 BufferedImage 上存储使用 getRGB(x, y) 生成的 RGB 值。这样做是为了避免混淆 RGB 值并允许在不更改代码的情况下更改颜色。
*   getColour(x, y) 消息根据 BufferedImage.getRGB(x, y) 给出的结果返回“TextureColour”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:09:00.977

我猜图像使用的是索引颜色模型，因此只能绘制图像中已经存在的颜色。尝试使用 TYPE_INT_ARGB 创建克隆图像。就像是：

```
BufferedImage image = new BufferedImage(I.getWidth(), I.getHeight(), BufferedImage.TYPE_INT_ARGB);
Graphics g = image.getGraphics();
//draw original image I to the new graphics
g.dispose();
return image; 
```

我希望这可以解决您的问题，如果没有您的图像数据，很难在本地重现它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:10:40.830

请注意，[setRGB 的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#setRGB%28int,%20int,%20int%29)指出“对于具有 IndexColorModel 的图像，选择具有最接近颜色的索引。”

在您的包装类中，您的 BufferedImages 是否有任何方式可能是索引类型？如果是这样，您可能希望在操作之前从现有的类型为 TYPE_INT_ARGB 而不是索引类型创建一个新的 BufferedImage。

# wordpress - Paypal Payment Standard 默认输入卡详细信息

> ID：13365205
> 
> 赞同：1
> 
> 时间：2012-11-13T17:02:04.500
> 
> 标签：wordpress, paypal, payment, woocommerce

我确定这个话题已经在这里了，但我刚刚与 Paypal 通了电话，试图找出他们的帐户上是否有一个设置可以让客户看到“输入卡详细信息区域”而不是自动（默认设置）指导您登录/注册到您的贝宝帐户。Paypal 说他们没有设置可以做到这一点，但 moo.com 会在您结帐时做到这一点，即使您在他们的网站将您转移到 paypal 网站进行付款后登录到 paypal，它也会显示输入卡详细信息区域。所以贝宝声称这是moo的网站告诉贝宝做的事情，而不是相反。我知道许多卖家都存在同样的问题，因为支付宝显示结账方式，许多购物者认为它只适用于贝宝账户持有人。

我很不擅长解释东西，所以很抱歉它这么长。这不是我要求的，这只是我们许多人可能有的想法。谢谢！

劣质煤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T02:04:26.240

这是关于 WooCommerce PayPal 标准支持的常见问题，并提供了一些关于所需内容的提示。基本上有两点：

1.  确保 PayPal Account Optional 为 On

2.  不要让 WooCommerce 将用户的电子邮件发送到 PayPal

该电子邮件将导致 PayPal 认为用户有一个帐户，因此您使用 WooCommerce 过滤器删除电子邮件：

```
function smw_woo_paypal_args($args) {
    $args['email'] = '';
    return $args;
}
add_filter( 'woocommerce_paypal_args', 'smw_woo_paypal_args', 99); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:45:03.430

如果您使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)，您可以设置 SOLUTIONTYPE=Sole 和 LANDINGPAGE=Billing 以强制选择使用信用卡付款，而不是登录到 PayPal 帐户。

您还需要确保在网站付款首选项下的 PayPal 帐户配置文件中禁用“PayPal Account Optional”。

# c# - 即使编码正确 UTF-8，上传 .csv 文件时也不会出现特殊字符的问题

> ID：13365210
> 
> 赞同：1
> 
> 时间：2012-11-13T17:02:21.103
> 
> 标签：c#, csv

这是我的情况，在我看过的任何帖子中都没有找到答案。我正在开发的应用程序允许用户选择要上传的 .csv 文件，但西班牙语和葡萄牙语字符（例如 á、é、ñ 和 õ）显示为带有“？”的黑色菱形。在里面。现在，我验证了 .csv 文件以 UTF-8 格式保存，但是在执行以下代码片段时：

```
using (StreamReader objStreamReader = new StreamReader(p_strFilename, Encoding.UTF8))
{
     string strLine;
     while ((strLine = objStreamReader.ReadLine()) != null && lstErrors.Count <= _MAX_ERRORS) 
```

strLine 包含带有“？”的黑色菱形 特殊字符应该在 ReadLine() 执行后的位置。请注意，我的 .csv 文件已被验证为 UTF-8，并且 StreamReader 需要 UTF-8。因此，为什么特殊字符没有正确显示？如果有人对此有洞察力，您的答案将不胜感激。

谢谢。吉姆·B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:37:37.770

听起来您的用户在 aspx 页面上的字符编码方面遇到了困难。默认情况下，本地浏览器使用本地字符集（有意义，对吧？）。如果您的源数据使用不同的字符集/编码，您可能需要向页面添加元标记，以便浏览器正确显示数据。从微软页面： [全球化一步一步](http://msdn.microsoft.com/en-us/goglobal/bb688114.aspx)：

> <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=">
> 您可以使用任何支持的字符集友好名称（例如，UTF-8）或任何代码页名称（例如，窗口 1251）。

查找有关此主题的更多信息的其他一些好地方是：

[ASP 和 ASP.NET 中](http://support.microsoft.com/kb/893663)
[的全球化问题 设置 HTTP 字符集参数](http://www.w3.org/International/O-HTTP-charset.en.php)

# javascript - 事件驱动编程node.js？

> ID：13365213
> 
> 赞同：0
> 
> 时间：2012-11-13T17:02:36.797
> 
> 标签：javascript, multithreading, node.js

我正在阅读这篇文章，如果有人对我清楚，我有一个特别的疑问。

[http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)

```
var fs = require('fs')
  , sys = require('sys');

fs.readFile('treasure-chamber-report.txt', function(report) {
  sys.puts("oh, look at all my money: "+report);
});

fs.writeFile('letter-to-princess.txt', '...', function() {
  sys.puts("can't wait to hear back from her!");
}); 
```

您的代码为节点提供了读取和写入文件的两个任务，然后进入睡眠状态。一旦节点完成任务，就会触发它的回调。但同时只能触发一个回调。在该回调完成执行之前，所有其他回调必须排队等待。除此之外，无法保证回调触发的顺序。

**“所以我不必担心代码会同时访问相同的数据结构？”** 你说对了！这就是 JavaScript 单线程/事件循环设计的全部魅力！

1.  谁能解释我上面的粗体线。？为什么我们不担心两个不同的程序不会访问该对象。
2.  当前的线程方式怎么会有问题？
3.  触发回调的顺序会有问题吗？假设我希望callBack A() 在callBack b() 之前先返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:14:23.833

1）如果您运行的是单线程，则不必担心多线程应用程序带来的问题。这包括 2 个不同的线程试图同时使用同一个对象。例如，想象一下，如果一个线程试图从哈希中读取数据，而另一个线程正在从同一个哈希中删除数据。键/值对可能看起来像是存在于一行代码中，但由于在它到达下一行时的线程化，数据可能不再存在。同样，您不必处理避免这些问题所涉及的所有额外代码和麻烦。

2) 见#1。与其说是权衡，倒不如说是个问题。如今，许多计算机都有多个处理器/内核，因此让程序一次使用多个线程可能是有益的。当您期望线程阻塞时，它也很有用。例如，在另一种多线程语言中，读取文件的内容并在不添加回调的情况下输出它们是很常见的。但是，这意味着线程在文件读取操作完成之前什么都不做（阻塞）。多线程编程也很难正确完成。

3) 你不会得到保证的订单。如果要确保正确的顺序，请等待执行第二个调用，直到第一个调用返回。例如

```
fs.readFile('treasure-chamber-report.txt', function(report) {
    sys.puts("oh, look at all my money: "+report);

    fs.writeFile('letter-to-princess.txt', '...', function() {
      sys.puts("can't wait to hear back from her!");
    });
}); 
```

请注意，这有时会使您陷入通常所说的“回调地狱”

编辑：解决您的意见：

1）即使您正在“等待”NodeJS 来读取文件，但在 NodeJS 中，这是一个非阻塞操作。这意味着方法调用 ( `readFile`) 会立即返回，甚至在读取文件之前。这是因为它将数据 IO 请求传递给底层操作系统，底层操作系统有自己的线程来处理此类请求。当操作系统完成读取（或写入）时，它会通知原始进程它已准备好接收数据。当操作系统在做这项工作时，NodeJS 可以让它的一个线程在等待时继续做其他工作。这就是你需要回调的原因——你需要一种方法来告诉 NodeJS 当你最终获得数据时下一步该做什么。

2）回调地狱本质上没有什么不好的，除了它很难阅读。有人可能会想象，如果您尝试做的事情包括几个不同的异步过程（例如读取和写入磁盘），您可能会得到如下所示的内容：

```
var doSomething function(){
    fs.readFile('step1.txt', function(result){
        // do something with the result
        fs.writeFile('step2.txt', function(){
            // okay, step2 is ready, so process that
            fs.readFile('step2.txt', function(result){
                fs.writeFile('step3.txt', function(){
                    //etc, etc
                });
            });
        });
    });
} 
```

您可以看到嵌套会很快变得相当深，并且难以阅读。如果你搜索“JavaScript 回调地狱”，这里和其他地方会有很多讨论这个问题。扁平化事物的一种方法是避免使用内联/匿名函数，并使用命名函数将其扁平化，因此您的回调不会嵌套在编辑器中那么深（尽管从词法的角度来看嵌套仍在发生）。

# javascript - JQuery从有序列表中删除第一项

> ID：13365214
> 
> 赞同：5
> 
> 时间：2012-11-13T17:02:41.167
> 
> 标签：javascript, jquery

我有一个无序列表，我将数据添加到如下：

```
jQuery("#mylist").prepend(newItem); 
```

当列表达到一定大小时，我需要删除插入的第一个项目，然后再添加新项目。

我如何根据通过它的 id 访问有序列表来删除第一个项目。

就像是：

```
 jQuery("#mylist")[0].remove(); 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T17:03:30.113

既然你提到了有序列表，我假设 #mylist 里面包含 li 标签，因此这应该有效

```
jQuery("#mylist li:first-child").remove(); 
```

我看到你在前面，如果你想删除最后一个元素

```
jQuery("#mylist li:last-child").remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:05:37.333

因为你正在做`.prepend()`，插入的*第一个*项目将是列表中的最后一个项目，所以你会这样做：

```
$("#mylist").children().last().remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:05:38.120

与选择 DOM 元素`[0]`相同。`get(0)`DOM 没有`.remove()`. 另外，您选择的是父元素而不是子元素。

您可以使用 eq(0) 选择第一个

```
 jQuery("#mylist li").eq(0).remove(); 
```

还有其他 jQuery 选择器/方法，例如 .first()、:first、:first-child

# vba - 连续形式的动态工具提示

> ID：13365215
> 
> 赞同：4
> 
> 时间：2012-11-13T17:02:43.457
> 
> 标签：vba, ms-access, ms-access-2010

问题是我有一个连续的表格，并且有一列工具提示对于每一行都不相同。

例如：

用户习惯于将区域称为数字，因此我将显示为数字，并在工具提示中显示完整的名称。这样我可以节省空间并且没有滚动条。

我所做的是在我当前的表单事件中放置一个带有工具提示值的隐藏字段

```
txtRegionID.controltipText = hiddenRegionName 
```

正如我所想，工具提示设置为每行的第一个值。

我想这是不可能的，因为连续表单就像一个单一的表单，所以它总是相同的控件，你不能根据记录来改变它的属性。

我对吗？有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:31:02.167

如下图所示，第 3 行被选中，第 1 行悬停显示提示三，这对于第 1 行是错误的，但对于第 3 行是正确的。状态栏文本显示提示三，这是正确的提示为行。状态栏只会在选择一行时显示。

![控制技巧](../Images/117b9e0881e107cbbce786e11caf35ac.png)

```
Private Sub Form_Current()
    Me.ID.ControlTipText = Me.Tip
    Me.ID.StatusBarText = Me.Tip
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:03:54.757

也许可以试试[Stephen Lebans 网站上](http://www.lebans.com/tooltip.htm)的工具提示代码——它允许您让工具提示以连续的形式显示当前值（除其他外）。

它可能无法在较新版本的 Access - 2007+ 下工作。作者也退出了Access，所以不要在那里寻求支持。

# python - Google Search API：“索引”对象在本地运行时没有属性“放置”

> ID：13365216
> 
> 赞同：0
> 
> 时间：2012-11-13T17:02:47.857
> 
> 标签：python, google-app-engine

使用 App Engine 的实验性 Google Search API 并在本地运行：

```
search.Index(name=_INDEX_NAME).put(document_to_index) 
```

这与此处的 Google 文档完全相同：[https ://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)

但是会产生以下错误：

> AttributeError：“索引”对象没有属性“放置”

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:56:02.393

您需要更新您的 SDK。在 1.7.3 版`add`中被弃用，取而代之。`put`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:20:19.843

似乎该功能已被重新命名为“添加”。这很好用：

```
search.Index(name=_INDEX_NAME).add(document_to_index) 
```

# algorithm - 将 TSP 降低到哈密顿电路

> ID：13365217
> 
> 赞同：3
> 
> 时间：2012-11-13T17:02:50.640
> 
> 标签：algorithm, graph, graph-algorithm, np-complete, reduction

如何将旅行商问题的（决策版本）转换为哈密顿电路问题（即如何将 TSP 简化为 HCP，以便如果我有 HCP 的解决方案，那么我将使用该解决方案来解决 TSP 问题）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T06:28:34.553

NP 中的每个问题都可以多项式时间简化为任何 NP 完全问题——这就是使 NP 完全问题如此重要的原因。

这是一个减少链：

1.  顶点覆盖可以简化为哈密顿回路。
2.  3-SAT 可以简化为 Vertex Cover。
3.  可满足性可以降低到 3-SAT。
4.  NP 中的任何决策问题都可以简化为可满足性（Cook-Levin 定理）

TSP 是 NP 中的一个问题，因此可以在非常长的多项式时间内将其简化为哈密顿回路。

我从[Computers and Intractability: A Guide to the Theory of NP-Completeness 中得到了简化](https://rads.stackoverflow.com/amzn/click/com/0716710455)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:19:23.713

哈密​​顿循环问题被证明是 NP 完全的（截至今天，已知解决的最佳性能算法具有指数复杂度），

此外，哈密顿循环问题是一个决策问题（给定一个图，是否存在一个覆盖所有顶点的非重叠边的循环？）而 TSP 是一个搜索问题（在所有哈密顿循环中，给我一个较低的成本）。

所以....复杂性对于足够大的问题是不切实际的）。

如果您只想解决 TSP，则只需使用[已知算法](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms)之一。其中一些被设计为在少数顶点上表现得相当好（这对你来说可能就足够了）。

**注意：**我假设您的意思是 TSP 搜索问题和哈密顿循环决策问题，情况可能并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T19:38:36.457

拿你的图表并删除所有的边。取任意顶点 v 并从该顶点开始添加反向有向边，如果添加的边目标距离 v 不远，而不是 k 来自 tsp 决策问题的长度常数。

如果构建的图有一个哈密顿圈，那么它也是原始图中长度 < k 的环，因此是 TSP 的一种解决方案。

相反，如果图中没有哈密顿循环：因为您已经构建了从顶点 v 开始的所有长度 < k 的路径，并且作为 TSP 的解决方案，是从 v 开始的长度 < k 的路径和一个哈密顿循环，原始图中没有 TSP 的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T18:48:41.307

从维基百科关于[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)的文章，可能会给你一个提示：

“哈密顿循环问题也是旅行商问题的一个特例，通过将两个城市之间的距离设置为如果它们相邻，则设置为 1，否则为 2，并验证行进的总距离等于 n（如果是，则路线是哈密顿回路；如果没有哈密顿回路，那么最短的路线会更长）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T18:05:22.730

TSP 的输入实例是一个完全图，Ham_Cycle 的输入实例是一个无向图 G(u,v)。然后你的转换函数必须将图 G 映射到一个完整的图。

* * *

*   在 G 的相同顶点上构造一个完全图 G'，权重为 fn w(u,v)
*   w(u,v) = 1 如果边 e(u,v) 在 G 中存在
*   w(u,v) = INF 否则
*   将权重 k 设置为 |V| （六）
*   在 G' 上运行 TSP 问题

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-13T22:01:35.337

好吧，问题是你到底想做什么。通常，TSP 是关于寻找`smallest`方法的。如果你想找到最小的方法，那么你不能这样做。仅当您从汉密尔顿问题中获得所有解决方案时。
因为汉密尔顿问题不关心边权重，但对于推销员来说这是必要的。

示例：图 A、B、C 与 A-(10)-B、B-(10)-C、C-(1)-A

显然，A->B->C 是汉密尔顿方式，但 TSP 的最佳解决方案是 A->C->B

如果您只是想为 TSP 找到任何解决方案，不一定是最小的，那么您只需将 TSP 节点映射到 Hamilton 节点，解决它，返回映射就完成了。

# java - 使用 Spring Data Read Converters 访问 MongoDB 文档中的嵌套字段

> ID：13365218
> 
> 赞同：4
> 
> 时间：2012-11-13T17:02:54.520
> 
> 标签：java, mongodb, spring-data, spring-data-mongodb

我将 Spring Data 与 MongoDB 一起使用，但在访问 Mongo 文档中的嵌套元素并将其转换为 Java 字段时遇到问题。以下 Spring 查询：

```
Query query = new Query().limit(1);
query.fields().include("a.d").exclude("_id");
mongoTemplate.find(query, MyObject.class); 
```

返回以下 DBObject：

```
{ "a" : { "d" : { "e" : 7.0 , "f" : 9.0}}} 
```

我只对“e”和“f”感兴趣，所以我决定使用`Converter<DBObject, MyObject>`. 这是我的转换器功能：

```
public MyObject convert(DBObject dbObject) {

    DBObject dboA = (DBObject) dbObject.get("a");
    DBObject dboD = (DBObject) dboA.get("d");

    MyObject myObj = new MyObject();
    myObj.setE((Double) dboD.get("e"));
    myObj.setF((Double) dboD.get("f"));

    return myObj;
} 
```

假设我嵌套了深度为 20/30 的文档，我的转换器写起来会很痛苦。有没有一种不那么笨拙和更优雅的方法呢？

是否可以使用注释来做到这一点？像`@Field(value = "a.d.e")`...

我觉得我错过了一些东西......谢谢！

# c++ - cmake 不使用 boost 多线程库

> ID：13365228
> 
> 赞同：2
> 
> 时间：2012-11-13T17:03:30.370
> 
> 标签：c++, multithreading, boost, cmake

我有`set(Boost_USE_MULTITHREADED ON)` ，但它仍然不使用`-mt`库。

```
cmake_minimum_required(VERSION 2.6)
PROJECT(app)
set(Boost_USE_MULTITHREADED ON)
FIND_PACKAGE(Boost COMPONENTS filesystem program_options thread serialization REQUIRED)
ADD_EXECUTABLE(app long_list_of_files)
TARGET_LINK_LIBRARIES(app ${Boost_LIBRARIES}) 
```

我可以看到序列化过程只使用一个 CPU 内核（100%）而不使用其他内核。而且 ldd 也不显示`-mt`库

```
linux-gate.so.1 =>  (0xb781f000)
libboost_filesystem.so.1.42.0 => /usr/lib/libboost_filesystem.so.1.42.0 (0xb77e9000)
libboost_program_options.so.1.42.0 => /usr/lib/libboost_program_options.so.1.42.0 (0xb7795000)
libboost_thread.so.1.42.0 => /usr/lib/libboost_thread.so.1.42.0 (0xb7780000)
libpthread.so.0 => /lib/libpthread.so.0 (0xb7766000)
libboost_serialization.so.1.42.0 => /usr/lib/libboost_serialization.so.1.42.0 (0xb76f3000)
libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb7608000)
libm.so.6 => /lib/libm.so.6 (0xb75e2000)
libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb75c5000)
libc.so.6 => /lib/libc.so.6 (0xb7468000)
libboost_system.so.1.42.0 => /usr/lib/libboost_system.so.1.42.0 (0xb7463000)
librt.so.1 => /lib/librt.so.1 (0xb745a000)
/lib/ld-linux.so.2 (0xb7820000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:13:21.717

**Boost Serialization 旨在提供线程安全，但不是通过线程进行并发序列化。**

通过包管理器安装 Boost 时，您通常会在其中找到库别名，`/usr/lib`将更详细的库名称映射到规范名称。`-mt`在 Boost 的情况下，“标记”名称通过后缀包含多线程能力。

`ldd`仅显示 CMake 在调用链接器时使用的名称，这是规范名称，而不是带有`*-mt`后缀的详细名称。因为您的 Boost 包安装涉及创建形式的符号链接

```
/usr/lib/libboost_thread-mt.so -> libboost_thread.so.1.42.0 
```

您不必担心链接了错误的库。

事实上，Boost Serialization 本身并不会产生线程，因此您不应该仅仅通过使用该库就看到线程数量的增加。在内部，序列化库使用互斥锁来保护共享指针的计数器。

# mysql - 加快 MySQL 字符串 LIKE 查询

> ID：13365229
> 
> 赞同：0
> 
> 时间：2012-11-13T17:03:35.297
> 
> 标签：mysql, sql, performance

我有一张（目前）超过 200.000 行的表格。每一行都是我网站上的一个页面，我使用友好的 URL，例如 site.com/itemName。

在我的 SlowQueries 日志中，我有该查询，重复了 1500 多次，加载时间为 1.5 秒。

这是查询：

```
SELECT * FROM table WHERE `name` LIKE 'S' ORDER BY id DESC LIMIT 1 
```

表类型是 MyISAM。该字段是 varchar 250，上面有 FULLTEXT 索引。另外，我得到了这个 MySQLTuner 结果：

```
-------- General Statistics --------------------------------------------------
[--] Skipped version check for MySQLTuner script
[OK] Currently running supported MySQL version 5.1.61-log
[OK] Operating on 64-bit architecture

-------- Storage Engine Statistics -------------------------------------------
[--] Status: -Archive -BDB -Federated +InnoDB -ISAM -NDBCluster 
[--] Data in MyISAM tables: 191M (Tables: 4)
[--] Data in InnoDB tables: 48K (Tables: 1)
[!!] Total fragmented tables: 1

-------- Performance Metrics -------------------------------------------------
[--] Up for: 1d 4h 56m 2s (3M q [34.272 qps], 37K conn, TX: 36B, RX: 3B)
[--] Reads / Writes: 91% / 9%
[--] Total buffers: 290.0M global + 2.7M per thread (151 max threads)
[OK] Maximum possible memory usage: 705.2M (68% of installed RAM)
[OK] Slow queries: 0% (2K/3M)
[OK] Highest usage of available connections: 8% (13/151)
[OK] Key buffer size / total MyISAM indexes: 8.0M/63.3M
[OK] Key buffer hit rate: 100.0% (581M cached / 182K reads)
[!!] Query cache efficiency: 4.7% (146K cached / 3M selects)
[OK] Query cache prunes per day: 0
[!!] Sorts requiring temporary tables: 32% (8K temp sorts / 26K sorts)
[OK] Temporary tables created on disk: 5% (3 on disk / 53 total)
[OK] Thread cache hit rate: 99% (13 created / 37K connections)
[OK] Table cache hit rate: 53% (33 open / 62 opened)
[OK] Open file limit used: 5% (59/1K)
[OK] Table locks acquired immediately: 99% (3M immediate / 3M locks)
[OK] InnoDB data size / buffer pool: 48.0K/8.0M 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:12:36.633

一些随意的想法：

*   `WHERE name LIKE 'S'`与 相同`WHERE name='S'`。MySQL 可能足够聪明，可以生成相同的执行计划（我没有检查过），但这很令人困惑。
*   `FULLTEXT`索引用于全文搜索。你没有做一个，所以索引对于这个查询是没有用的。您应该创建一个常规索引。
*   您的服务器设置可能比查询执行计划提供的信息少。将`EXPLAIN`或`EXPLAIN EXTENDED`添加到 SQL 代码以获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:10:43.327

您可能需要使用[全文搜索功能](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)来利用这些索引。据我所知，`LIKE`不能自动使用它们。

# xml - XSLT / XML 转换启动器

> ID：13365232
> 
> 赞同：0
> 
> 时间：2012-11-13T17:03:45.510
> 
> 标签：xml, xslt

XSLT/XML 转换的新手，如果可能的话需要一些基本的帮助。

我有一个类似于的 XML 文件

```
<inputName attribute1="renameUsingThis"> Data </inputName> 
```

我要求输出是

```
<renameUsingThis attribute1="renameUsingThis"> Data </renameUsingThis> 
```

我在这里看到了一些示例，但无法调整到我需要它的方式，并且目前还没有足够的知识进行逆向工程。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:15:07.283

尝试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="inputName">
        <xsl:element name="{@attribute1}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

您可以在这里测试转换：[http ://www.xsltcake.com/slices/4DKz0w](http://www.xsltcake.com/slices/4DKz0w)

# php - Smarty 修饰符的多个参数

> ID：13365238
> 
> 赞同：4
> 
> 时间：2012-11-13T17:04:02.763
> 
> 标签：php, smarty

假设我有一个如下所示的修饰符：

```
{$smarty.now|my_modifier:"param1"} 
```

但是想象一下 my_modifier 现在需要两个参数，而不仅仅是`"param1"`. 我将如何通过这些？

我想做这样的事情：

```
{$smarty.now|my_modifier:"param1","param2"} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T17:08:14.087

根据[文档](http://www.smarty.net/docsv2/en/language.modifiers.tpl)，您只需用冒号“：”将它们分开

变量修饰符可以应用于变量、自定义函数或字符串。要应用修饰符，请指定后跟 | 的值 （管道）和修饰符名称。修饰符可以接受影响其行为的附加参数。**这些参数跟在修饰符名称之后，并用 :（冒号）分隔。**此外，所有 php 函数都可以隐式用作修饰符（更多下文），并且可以组合修饰符。.

所以我会假设

`{$smarty.now|my_modifier:"param1":"param2"}`

# css - Twitter bootstrap 模态弹出表单 - 如何降低显示的表单

> ID：13365239
> 
> 赞同：1
> 
> 时间：2012-11-13T17:04:09.180
> 
> 标签：css, twitter-bootstrap

我最近下载了 TB 2，并开始熟悉它。我正在根据英雄示例创建一个页面。

我使用在[这里](http://www.w3resource.com/twitter-bootstrap/modals-tutorial.php)找到的代码向页面添加了一个弹出表单。到目前为止，这一切似乎都有效 - 但是，我觉得显示的弹出框太高了。我想把它降低一点，这样我就可以（至少）看到显示表格的顶部。

我用萤火虫检查了CSS。我注意到样式来自引导程序，来自这些行（按给定顺序）：

```
element.style {
    display: block;
}
.modal.fade.in {
    top: 50%;
}
.modal.fade {
    top: -25%;
    transition: opacity 0.3s linear 0s, top 0.3s ease-out 0s;
}
.fade.in {
    opacity: 1;
}
.hide {
    display: none;
}
.modal {
    background-clip: padding-box;
    background-color: #FFFFFF;
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 6px 6px 6px 6px;
    box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
    left: 50%;
    margin: -250px 0 0 -280px;
    outline: 0 none;
    position: fixed;
    top: 50%;
    width: 560px;
    z-index: 1050;
}
.fade {
    opacity: 0;
    transition: opacity 0.15s linear 0s;
} 
```

要做的“显而易见”的事情是向显示表单的元素添加一个选择器，并向我的外部样式表添加一个新的 CSS 规则，或者可能覆盖/自定义 TB 提供的样式。

但是，由于我真的不知道自己在做什么（我还在学习 TB），所以我认为最好在这里问一下，以防我最终破坏了到目前为止的布局。

降低弹出表单的推荐方法是什么，以便我可以看到表单的顶部，也许还有它后面的一点导航栏（不过，理想情况下，我希望弹出表单显示在导航栏下方菜单 - 但这可能太复杂了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:50:52.453

不要害怕修改代码。只需采用您自己的规则并将其显示在底部即可。你以后可以随时将其删除。不要编辑引导 css 代码本身。最低的代码覆盖前面的代码。

并使用萤火虫及其样式和计算样式面板进行测试。

# cocoa-touch - 同一个 nibLoaded 自定义视图的多个实例

> ID：13365241
> 
> 赞同：0
> 
> 时间：2012-11-13T17:04:12.800
> 
> 标签：cocoa-touch

我用 Nib 创建了一个视图。我想添加这个子视图的多个实例，但只显示我添加的最后一个。

```
NSArray * nibArray = [[NSBundle mainBundle] loadNibNamed:@"SBFiveBarCountView"
                                                   owner:self
                                                 options:nil];

SBFiveBarCountView * fiveBarCount1 = (SBFiveBarCountView *)[nibArray objectAtIndex:0];
fiveBarCount1.frame = CGRectMake(22, 15, 16, 57);

SBFiveBarCountView * fiveBarCount2 = (SBFiveBarCountView *)[nibArray objectAtIndex:0];
fiveBarCount2.frame = CGRectMake(45, 15, 16, 57);

[self.view addSubview:fiveBarCount1];
[self.view addSubview:fiveBarCount2]; 
```

在我这样做之后，只有`fiveBarCount2`实际添加到视图中

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:39:20.030

您将同一对象分配给两个不同的变量。也就是说，无论您如何命名，它都是位于数组零位置的对象。

由于`loadNibNamed:`是创建对象的新实例（在数组内）的方法，因此您需要再次调用它以获取不同的`SBFiveBarCountView`对象。

# javascript - jQuery isotope - 在 Firefox 中单击嵌入的 youtube 视频时页面跳转到顶部

> ID：13365243
> 
> 赞同：1
> 
> 时间：2012-11-13T17:04:17.197
> 
> 标签：javascript, jquery, css, firefox, jquery-isotope

我有一个使用 jQuery 同位素和砖石布局的页面。有许多 div，一个是嵌入为 html5 的 youtube 视频。

由于某种原因，在 Firefox 中单击 youtube 视频时，页面会跳回页面顶部。它在 Safari/Chrome 中完美运行。

如果有人有任何想法可能导致这种情况，将不胜感激！

JSBIN：http: [//jsbin.com/iwehev/2](http://jsbin.com/iwehev/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:12:21.403

你的例子没有做你为我描述的事情。听起来你正在寻找`preventDefault();`。在任何元素给您点击问题的点击功能中使用它。

```
$('a').click(function(evt){
    evt.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:57:09.877

```
$('#wall').isotope({
    itemSelector: '.box',
    animationEngine: 'css,
    layoutMode: 'masonry',
    transformsEnabled: false //Disable transformations
}); 
```

将 transformsEnabled: false 添加到 isotope 函数。

# asp.net - 在标签中调用函数

> ID：13365244
> 
> 赞同：0
> 
> 时间：2012-11-13T17:04:18.727
> 
> 标签：asp.net, vb.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:15:13.190

正确的做法是添加一个[链接按钮](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)，将其拖放到页面中，然后转到该按钮的属性并添加 OnClick 方法，也就是在后面的代码上创建一个自动化功能，在其中运行 DownloadFile

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:15:27.517

1）尝试使用[LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)。

2）你不能传回参数，你必须在服务器上获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:17:48.987

如果您对它必须直接作为锚标记这一事实很灵活，并且不介意将其创建为“按钮”，则可以使用以下内容：

[调用代码隐藏函数的代码隐藏中的 ASP.Net 按钮](https://stackoverflow.com/questions/3339956/asp-net-button-in-codebehind-that-calls-codebehind-function)

如果没有，这里有一个使用 JavaScript 和回发来实现类似功能的解决方案。我个人认为使用上述按钮解决方案会更灵活，更接近你想要的。

[我可以从 div onclick 事件中调用函数背后的代码吗？](https://stackoverflow.com/questions/10596944/can-i-call-a-code-behind-function-from-a-div-onclick-event)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:21:39.520

如果将锚标记用作服务器控件，则需要设置 onServerClick 事件。您可以将自定义标签添加到您的锚点以便使用。

```
<a id="hypDownload" href="javascript:void(0);" runat="server" onserverclick="DownloadFile()" filename="files/Notes.doc" forcedownload="true"></a>

Private Sub hypDownload_ServerClick(sender As Object, e As EventArgs) Handles hypDownload.ServerClick
    Dim filename As String = hypDownload.Attributes("filename") 'Also:  CType(sender, HtmlAnchor).Attributes("filename")
    Dim forcedownload As Boolean = hypDownload.Attributes("forcedownload").ToString().ToLower() = "true"
    DownloadFile(filename, forcedownload)
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T14:31:44.873

将此 javascript 放在 ASPX 页面上。

```
<script type="text/javascript">   
    function DownloadFile() {    
        document.getElementById(<%= DownloadFile.ClientID%>).click();
    }    
</script> 
```

* * *

将按钮放置在显示样式隐藏的 div 标记中 不要将按钮的显示样式设置为隐藏，因为 javascript 将无法在页面上找到该按钮。

```
<div style="display= hidden;">
    <asp:button id="DownloadFile" runat="server" />    
</div> 
```

然后设置你`<a>`的标签，如下所示：

```
<a href="javascript:DownloadFile();">link text</a> 
```

然后使用您的子例程作为 asp:button 的点击事件

说了这么多，asp:linkbutton 选项会减少很多代码。

# c# - 获取在 WinRT 中实现给定接口的所有类

> ID：13365245
> 
> 赞同：9
> 
> 时间：2012-11-13T17:04:21.417
> 
> 标签：c#, reflection, windows-8, windows-runtime, windows-store-apps

我正在尝试获取在 Windows 8 商店应用程序中实现某个接口的类列表，但 WinRT 中的反射似乎非常不同，到目前为止我找不到这样做的好例子。

有谁知道，如何加载当前程序集并循环遍历它？

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T20:53:41.253

从 MSDN 论坛得到答案。把它贴在这里，以防其他人正在寻找同样的东西。

此代码将获取所有实现 IDisposable 接口的类：

```
// We get the current assembly through the current class
var currentAssembly = this.GetType().GetTypeInfo().Assembly;

// we filter the defined classes according to the interfaces they implement
var iDisposableAssemblies = currentAssembly.DefinedTypes.Where(type => type.ImplementedInterfaces.Any(inter => inter == typeof(IDisposable))).ToList(); 
```

# java - Spring可以在try块中使用RunTimeException在finally块中提交事务

> ID：13365246
> 
> 赞同：3
> 
> 时间：2012-11-13T15:09:53.140
> 
> 标签：java, spring, hibernate, transactions, try-catch-finally

该项目使用了 Spring + Hibernate

示例代码：

```
public void method(){    
   try{  
    　dao.saveA(entityA);  
    　//condition may be throw RuntimeException;  
    　dao.saveB(entityB);  
    }catch(RuntimeException e){  
    　throw e;  
    }finally{  
     　dao.saveC(entityC)  
    }  
} 
```

最后，只有 entityC 将被保存在测试中的数据库中。
我认为 saveA、saveB、saveC 在同一个事务中，它们不应该被提交。
在这种情况下，我想知道为什么要提交 entityC。
Spring 如何在 finally 块中做到这一点？

//----------------------------------------//
其实我的问题是：spring如何确保事务在finally块中提交。Spring 会在 finally 块中获得新的连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:37:50.973

# iis - Azure 1.8（2012 年 10 月）是否改变了您在 ServiceDefinition 中配置多个站点的方式？

> ID：13365254
> 
> 赞同：8
> 
> 时间：2012-11-13T17:04:41.470
> 
> 标签：iis, azure

在升级到 1.8（2012 年 10 月）之前，这是我们在 ServiceDefinition 中配置站点的方式。

```
<Site name="Admin" physicalDirectory="..\Company.Admin">
  <Bindings>
    <Binding name="AdminBindingHttp" endpointName="HttpEndpoint" hostHeader="admin.company.com" />
  </Bindings>
</Site> 
```

升级后，我在尝试发布时收到以下错误。

```
Error 125 Cannot find the physical directory 'C:\Users\Me\Code\Company.Cloud\bin\Company.Admin' for virtual path Admin/. 
```

我们必须更新***物理目录***值并向上移动 2 个文件夹。

```
<Site name="Admin" physicalDirectory="..\..\..\Company.Admin">
  <Bindings>
    <Binding name="AdminBindingHttp" endpointName="HttpEndpoint" hostHeader="admin.company.com" />
  </Bindings>
</Site> 
```

似乎在 1.8 之前的 Azure 是在 csdef 文件的原始位置的上下文中执行的，但现在它是从*bin\Release\ServiceDefinition.csdef*执行的，它比 2 个文件夹更深。

我在网上找不到专门讨论与最新 SDK 版本一起使用的此功能的教程。这是官方的改动吗？我还应该提到，我们也同时升级到了 VS 2012。

我觉得这个功能经常被忽视。（请参阅缺少 .config 转换问题）。我们很想切换到 Azure 网站，但在 SSL/HTTPS 可用且不在预览版之前，我们无法这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T17:41:25.450

是的，这是官方更改，但除了升级报告中包含的内容之外，我找不到任何关于它的文档：

“Site 元素的物理目录属性 '..\MyWebRole' 包含一个相对路径。此路径与打包时目标服务定义文件所在的目录相关。在以前的版本中，此文件位于项目根目录中。在此版本中，默认情况下，此文件位于项目输出目录中。您可能需要更新相对路径以反映目标服务定义文件的新位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T20:22:36.327

在回复 sudhAnsu63 的问题时，我遇到了同样的问题，我将更新物理目录属性，但它会重新加载文件并恢复到旧的（现在不正确的）配置。我仍然不明白为什么，但我注意到 VS 有时会打开同一个文件的多个版本。我不得不关闭所有其他文件，进行编辑，保存并关闭文件，然后它终于接受了我的编辑并开始工作。我相信在 VS 外部编辑文件（如在记事本中）可能会起作用。奇怪的是，一旦我让它工作一次，它似乎就不再遇到这个问题了。

# php - 根据查询结果在两个 php 页面之间进行选择

> ID：13365255
> 
> 赞同：1
> 
> 时间：2012-11-13T17:04:41.577
> 
> 标签：php, mysql, redirect

我想通过使用从菜单调用的 sectr1input.php 页面根据查询结果在两个 php 页面之间进行选择。在登录期间，我发布变量-clientnum，它用于多个表。我想展示一个用于“更新”的页面（表单）与变量的现有数据 - clientnum 或使用另一页（表单）进行初始输入。

所有这些都基于特定客户端编号的“键索引”而不是 NULL。该查询在 MAMP 中有效，但我无法让 if() 工作。这是我目前的直接做法。或者，我是否应该创建一个决策页面，从菜单中调用它并根据查询结果重定向到两个页面之一？

```
<?php
/**show user name*/
session_start();
if (array_key_exists("user", $_SESSION)) {
    echo "Welcome: " . $_SESSION['user'];
} else {
    header('Location: index.php');
    exit;
}
echo "<br/>"
?><br/>
<?php
/* * show client number */
session_start();
if (array_key_exists("clientnum", $_SESSION)) {
    echo "Your Client Number: " . $_SESSION['clientnum'];
} else {
    header('Location: index.php');
    exit;
}
?>

<?php

/* * select the sector 1 table data - based on client number and if the record exist */
session_start();
          $cnum = $_SESSION['clientnum'];
          $con = mysqli_connect("localhost", "phpuser", "phpuserpw","telesisBWT");
          if (!$con) {
              die('Could not connect: ' . mysql_error());
          }

          $result = mysql_query("SELECT sect1_id From sctr_1_qstns Where client_num='$cnum'");
          $row = mysql_fetch_row($result);
            If ($row > 0)
          {
              header('Location: sectr1viewup.php');
              exit;
          }

          Else {
              header('Location: sectr1input.php');
              ;
          }

mysql_close($con);
?> 
```

# vba - 自定义函数太慢

> ID：13365258
> 
> 赞同：2
> 
> 时间：2012-11-13T17:04:50.087
> 
> 标签：vba, ms-access

我创建了一个用于查询的自定义函数。该函数打开一个小表（50 个单元格）并根据查找结果将日期添加到查询中的一列。该函数执行速度太慢，我认为这可能是因为我为查询中的每条记录打开和关闭了记录集。有没有办法避免每次调用函数时打开记录集并关闭它？我怀疑这首先破坏了使用函数的目的，但我希望有人有解决方案。

**在原帖后添加。**

基于下面的结构，我需要将表中的描述获取到查询中的 CustomFunctionField 中，并且日期字段是连接。该表包含日期范围，并且查询在日期范围内具有特定日期。

--查询-- ID | 信息 | 日期 | 自定义函数字段

--表-- ID | 开始日期 | 结束日期 | 描述

以下是代码：

```
Public Function SelectTerm(DateFull)

    Dim rstin As DAO.Recordset
    Dim dx As Date
    Dim dterm As String

    Set rstin = CurrentDb.OpenRecordset("tblTerms", dbOpenSnapshot)

    dx = "1/1/2000"

    If Not rstin.EOF And Not rstin.BOF Then
        Do Until rstin.EOF Or dx >= DateFull
            dx = rstin.Fields("DateEnd")
            rstin.MoveNext
        Loop

        rstin.MovePrevious
        dterm = rstin.Fields("Description")
        rstin.Close
    End If

    SelectTerm = dterm

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:35:37.590

使用相关子查询根据主表中`tblTerms`的日期/时间字段查找术语描述。`DateFull`

```
SELECT
    y.DateFull,
    (
        SELECT TOP 1 [Description]
        FROM tblTerms
        WHERE DateEnd <= y.DateFull
        ORDER BY DateEnd DESC
    ) AS term_description
FROM YourTable AS y; 
```

相关子查询并不以出色的性能而闻名。但是，这种方法应该比打开记录集并在行中移动直到找到所需值的 UDF 快得多。

# jquery - jquery slideToggle 在主干上工作不好

> ID：13365260
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:05:00.843
> 
> 标签：jquery, backbone.js

我正在使用 slideToggle() 函数来制作下拉菜单。

我的主干代码是：

```
events: {
     "mouseover .dropdownColl"  :   "toggleColl"
},
toggleColl: function(e) {
    $('.dropdownAbout .sub_navigation').stop(true, true).slideUp('fast'); 
},
... 
```

和html代码：

```
<li class="dropdownColl">
   <a>menu</a>
   <ul class="sub_navigation">
      <li><a href="#">voice 1</a></li>
      <li><a href="">voice 2</a></li>
      <li><a href="">voice 3</a></li>
      <li><a href="">voice 4</a></li>
      <li><a href="">voice 5</a></li>
   </ul>
</li> 
```

我有两个问题：第一个是当我的鼠标悬停在 li.dropdownColl 上时，我在 sub_navigation 上的 slideToggle 可以工作，但是当鼠标悬停在 a 标签上时，我的 sub_navigation 使 slideDown ..我不知道为什么。其次，当我制作 slideToggle 并且我的鼠标继续 ul.subnavigation > li 时，ul 再次制作 slideDown。我尝试在一个普通的 html 页面中制作它并且它工作正常，但是在主干上我遇到了问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:11:05.950

您应该阅读有关javascript 中的**事件传播、委托和冒泡的信息。**这个问题和答案可能是一个开始[什么是事件冒泡和捕获](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)

# c# - 扩展 IEnumerable：如何返回最后一个 not string.empty 元素？

> ID：13365263
> 
> 赞同：0
> 
> 时间：2012-11-13T17:05:27.773
> 
> 标签：c#, generics, ienumerable, generic-collections

我想创建一个类 IEnumerable 的扩展方法，并创建一个方法来检索集合中不是*string.empty*的最后一项。集合将**始终**是一个数组，返回值是一个字符串。

我认为空值是一个空字符串。

我不知道如何以*泛型*方式做到这一点。我想知道是否应该将其设为通用方法，因为该类型将是字符串数组。

我会这样调用这个函数：

```
 string s = myArray.LastNotEmpty<???>(); 
```

我该如何面对？

```
static class Enumerable
{
    public static TSource LastNotEmpty<TSource>(this IEnumerable<TSource> source)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:08:19.123

```
static class MyEnumerable
{
    public static TSource LastNotEmpty<TSource>(this IEnumerable<TSource> source) where TSource:String
    {
        return source.LastOrDefault(x=>!string.isNullOrEmpty(x));
    }
} 
```

或更具体

```
static class MyEnumerable
{
    public static string LastNotEmpty(this IEnumerable<string> source) 
    {
        return source.LastOrDefault(x=>!string.isNullOrEmpty(x));
    }
} 
```

如其他答案所述， Enumerable 已存在于 System.Linq 命名空间中，因此静态类在此处的命名不同。

然后，您只需确保您的调用代码具有`using`此类的名称空间，然后只需使用

```
string s = myArray.LastNotEmpty(); 
```

`s`如果没有出现，将等于 null。

LastNotEmpty 的任一实现都可以使用上述调用方法，因为编译器可以计算出 GenericType 参数。

**此行下方的更新不需要回答问题，它们只是作为更通用方法的替代解决方案提供**

**更新 - 只是为了取悦想要一个完全通用的解决方案的递归。OP 已经声明该集合将始终是字符串，但是......**

```
static class MyEnumerable {
  public static string LastNotEmpty<TSource>(this IEnumerable<TSource> source) {
    if (source==null) return null;  // Deals with null collection
    return source.OfType<string>().LastOrDefault(x=>!string.IsNullOrEmpty(x);
  }
} 
```

这将首先将集合过滤为字符串类型的集合。结果将是`null`如果集合为空或没有找到结果..

**再次更新 - 这只是为了尝试让递归感觉良好:)**

此版本将返回`TSource`不等于空字符串或 null 的第一个。之所以使用，`ReferenceEquals`是因为 resharper 抱怨将可能的值类型与 null 进行比较...

```
static class MyEnumerable {
  public static TSource LastNotEmpty<TSource>(this IEnumerable<TSource> source) {
    if (source==null) return null;  // Deals with null collection
    return source.LasdtOrDefault(x=>
                                    !ReferenceEquals(x,null)
                                    &&
                                    !x.Equals(String.Empty)
                                 );
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:09:29.403

假设你有一个`IEnumerable<string>`，你可以打电话

```
string lastNotEmpty = myIEnumerableString.Last(s => !String.IsNullOrEmpty(s)); 
```

就像[这里](http://msdn.microsoft.com/en-us/library/bb549138.aspx)一样。

# java - 将密码保存到黑莓内存的最佳方法

> ID：13365271
> 
> 赞同：1
> 
> 时间：2012-11-13T17:06:01.297
> 
> 标签：java, blackberry, storage, password-protection

我正在为黑莓 4.6.1 开发一个应用程序。我需要存储用户的密码（允许您保存密码的典型功能，因此您无需再次输入）。我正在考虑将它以文件的形式存储到设备中，但我不知道这是否是个好主意，因为任何可以将设备连接到 PC 的人都可以获取此文件。

当然，这个内容会被加密，但我仍然认为那是不安全的。据我所知，iOS 为每个应用程序定义或设置了一块硬盘，因此用户无法访问它，从而使存储更安全，但我不知道黑莓是否有类似的东西。

任何的想法？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:46:46.673

一个更好的选择是 PersitentStore，它本身可能就足够了。密码仍然可以从设备中提取，但会更困难一些。如果这仍然是一个问题，您可以利用访问控制。请参阅[此开发人员指南](http://docs.blackberry.com/en/developers/deliverables/29299/Security_of_persistent_objects_1253846_11.jsp)。

# javascript - 仅在 ajax 请求期间呈现剔除模板

> ID：13365272
> 
> 赞同：1
> 
> 时间：2012-11-13T17:06:04.587
> 
> 标签：javascript, jquery, knockout.js

我正在尝试使用敲除对从 jQuery 请求中接收到的 JSON 数据进行快速模板渲染。

基本上，我会用已经预渲染的 HTML 内容加载页面（这样我就可以显示内容，如果用户的浏览器禁用了 javascript，我不会假装所有功能都在工作，但至少显示基本内容）。

下次用户单击该链接时，我不会重新加载页面，而是使用 Ajax 提交一个 get-request 并获取一些 json。那是我应该代替旧内容呈现的数据。

问题非常简单：我将敲除模板与我的 HTML 标记集成，但是在调用后加载页面时，`ko.applyBindings(myviewmodel)`我会删除所有预渲染的内容。这是因为我的模型没有任何要渲染的项目。

**有没有办法为 HTML 请求使用预渲染的数据，只为 Ajax 请求使用淘汰模板？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:30:53.753

这是一个演示`visible`绑定如何显示/隐藏模板[的小提琴。](http://jsfiddle.net/tyrsius/Dm5W9/)请注意，如果您从左侧列表中取消选择 Knockout，“欢迎”部分仍会正确显示。单击该按钮以模仿 ajax 请求，并查看模板部分显示。

可见绑定是控制控件是否显示的标准 Knockout 绑定。它看起来像这样：

```
<div data-bind="visible: welcome"> 
```

`welcome`您的视图模型上的可观察属性在哪里。

If this still isn't clear, I strongly recommend the [Knockout Interactive Tutorials](http://learn.knockoutjs.com/), they will cover this and other basic usage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:24:50.000

与其尝试做两件不同的事情，不如不做以下事情：

1.  使用将保存内容数据的可观察属性定义您的视图模型。
2.  在初始页面加载时，使用您的预渲染数据初始化 observable 属性（也许从隐藏字段中检索？）。
3.  使用您的模板将您的内容元素绑定到可观察对象。

然后，当您发出 ajax 请求时，只需使用从您的请求中检索到的数据更新 observable 属性中的数据，UI 应该会自动更新。

**编辑：**

这是一个演示该概念的快速[jsFiddle](http://jsfiddle.net/poztin/VVbn3/3/)（注释 javascript 以模拟禁用的 javascript）。

```
<input id="initialstate" type="hidden" value="4,5,6" />

<ul id="content" data-bind="template: { name: 'item-template', foreach:data }">
    <li>1</li>
    <li>2</li>
    <li>3</li>    
</ul>

<script type="text/html" id="item-template">
    <li data-bind="text: $data"></li>
</script>​

var viewModel = (function()
{
    var self = {};

    self.data = {};

    function init() {
        $('#content').empty(); 
        self.data = ko.observableArray($('#initialstate').val().split(','));
    }

    init();

    return self;
}());

ko.applyBindings(viewModel); 
```

# java - 以处理语言重复文本

> ID：13365276
> 
> 赞同：0
> 
> 时间：2012-11-13T17:06:19.610
> 
> 标签：java, processing

所以我需要重复文本 40 次，我想出了如何做一行一定次数，但是对文本使用相同的过程是行不通的，我尝试过使用不同的代码，但我被卡住了。

任何帮助都会很棒。

我只需要在程序中重复“文本”这个词 40 次。

这是我当前的代码：

```
void setup() {
    size(640, 360);
    textFont(createFont("Georgia", 24));
}

void draw() {
    background(102);
    textAlign(RIGHT);
    drawType(width * 0.10);
}

void drawType(float x) {

    fill(0);

    float y = 35;
    int spacing = 50;
    int endLine = 640;

    while (x <= endLine){
        text("text", x, y, 50, 50);
        x = x + y + spacing;
    }
} 
```

我正在使用语言处理 (processing.org)，它是一种 JAVA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:17:31.100

只是想我会清楚我的评论：

尝试

```
String var="";
 for(int i=0;i<40;i++)
    {
       var=var+"text";
     }

//Then use the variable got 

 text(var, x, y, 50, 50); 
```

可能有内置函数可以更好地执行此操作，但这将是解决您的问题的简单方法。

这种方法虽然效率低下，因为 String 操作在 Java 中成本很高，因为它们是不可变的。

上面的示例将在一行中打印相同的字符串 40 次（取决于行的长度）。

If the horizontal length of the line is not sufficient, either increase the line size or decrease the spacing or decrease the number of times you are repeating the string.

# internet-explorer-8 - dijit.byId 不适用于带有 dojo.addOnLoad 的 IE8

> ID：13365287
> 
> 赞同：2
> 
> 时间：2012-11-13T17:07:08.877
> 
> 标签：internet-explorer-8, dojo

当我用 IE8 加载这个脚本时，我得到了异常`Object does not support this property or method`。但它适用于其他浏览器。

我使用 dijit 1.3.1，但我不明白。

```
dojo.addOnLoad(init);
var DG;
var datas;

function init(){
    DG = dijit.byId("DG");
} 
```

我有 parseOnload: true 但它改变了任何东西。

```
<script type="text/javascript" src="dojo/dojo.js"
        djConfig="parseOnLoad: true">
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:55:09.013

这可能无法解决问题，但该函数`init()`在声明之前就已使用。试试这个：

```
 var DG;
    var datas;

    function init(){
        DG = dijit.byId("DG");
    }

    dojo.addOnLoad(init); 
```

它有效吗？

# php - 在后台服务浏览器中看不到服务

> ID：13365289
> 
> 赞同：0
> 
> 时间：2012-11-13T17:07:16.983
> 
> 标签：php, actionscript-3, amfphp

我正在尝试制作一个与 AMFPHP 2.1 连接的 Flash 应用程序。

我让 WAMP 工作，一切似乎都很好，但是后台服务浏览器找不到我在服务文件夹中放置的任何服务，甚至没有示例。我已经检查了config.php文件中的路径，没问题。

客户端生成器这样说：

“警告：第 44 行 C:wampwwwBackOfficeClientGenerator.php 中为 foreach() 提供的参数无效”</p>

不知道该怎么办。

任何关于可能是什么问题的帮助或想法将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:59:21.003

好的，为可能对 AMF PHP 有更深入了解或可能失败的潜在原因的任何其他人拉下代码，将其发布在这里：

```
$amfphpUrl = $config->resolveAmfphpEntryPointUrl();
$serviceCaller = new Amfphp_BackOffice_ServiceCaller($amfphpUrl);
//load service descriptors
$services = $serviceCaller->makeAmfphpJsonServiceCall("AmfphpDiscoveryService", "discover");
//remove discovery service from list
unset ($services->AmfphpDiscoveryService);
//list services 
echo '<ul>';
foreach ($services as $service) {
    echo "<li>$service->name</li>";
}
echo '</ul>'; 
```

OP 问题中的 foreach 循环从底部向上四行。为什么它不能得到这个服务列表虽然需要进一步挖掘 BackOffice 文件（个人只是现在还不够感兴趣）。我的猜测是配置入口点是错误的，但很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:02:34.807

好吧，由于错误，我从服务调用者中删除了几行，恢复它工作得很好。

（特别感谢 Ariel Sommeria）

# html - iPad 视网膜图像 CSS

> ID：13365293
> 
> 赞同：3
> 
> 时间：2012-11-13T17:07:35.223
> 
> 标签：html, css

我有一组 2048 x 1496 大小的图像，我仅用于 iPad Retina 显示屏。我的网站只针对 iPad Retina，所以我现在不必担心下采样或其他任何事情。我刚刚创建了仅用于视网膜显示的网页。

我有 css 和 html 指定图像（作为背景图像）。但是当我在 Retina 上看到页面时，它不是完全可见的，它是部分可见的。

当图像实际上是 2048 x 1496 像素时，为什么会这样？有没有什么设置要做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:56:24.797

您是否尝试过在具有大视网膜图像作为背景的元素上设置“背景大小”属性？

它看起来像这样：

```
#retinaImage {
 background: url(images/huge-retina-image.jpg) no-repeat;
 width: 1024px;
 height: 768px;
 background-size: 1024px 768px;
} 
```

iPad 的分辨率是 2048x1536，但在“CSS 像素”中仍然是 1024x768——只是这些 CSS 像素中的每一个都包含 4 个设备像素。从概念上讲，您可能很难理解这一点。这是一篇可能有帮助的文章：

[迈向视网膜网络（Smashing Magazine）](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:34:13.653

阅读 Chris 分享的文章（[Towards A Retina Web](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)）。您不需要使用 2048 x 2744。1024 X 768 分辨率的图像就足够了。Ipad Ratina 显示器将自动处理其分辨率。

使用 1024 X 768 分辨率。您将自动以小文件大小获得更好的显示图像。不需要在 CSS 中使用背景大小。

# signalr - SignalR 日期时间格式

> ID：13365294
> 
> 赞同：3
> 
> 时间：2012-11-13T17:07:39.853
> 
> 标签：signalr

我在我的服务器端代码 c# .net4 中使用 SignalR。在客户端我使用 javascript。

例如，当我从服务器调用客户端方法时

```
 Caller.ShowDate(DateTime.Now); 
```

客户端javascript获取“2012-11-13T19:02:39.3386544+02:00”作为字符串的值。

如何在 javascript 中使用它作为日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:11:03.420

请记住，由于时区/客户端修改时钟等，客户端时间可能与服务器时间有很大不同。话虽如此：

C＃：

```
Caller.ShowDate(DateTime.UtcNow); 
```

JavaScript：

```
myHub.client.ShowDate = function(d) {
    var serverTime = new Date(d); // The Server Time in JavaScript
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T12:12:29.163

如果你不喜欢使用 IE8 的人，那么可以阅读下面的评论：

SignalR 使用 Json.Net 库来（反）序列化数据。

在 .NET 4.5 之前，Json.NET 使用 epoch-format ("/Date(1198908717056)/")，然后开始使用 ISO8601 标准 ("2012-03-19T07:22Z") [请参阅[JSON 中的序列化日期]](http://james.newtonking.com/projects/json/help/html/DatesInJSON.htm)。

如果你想使用 epoch-format，你需要重新配置 json-serializator [参见[更换 IJsonSerializer]](https://github.com/SignalR/SignalR/wiki/Extensibility)：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        var serializer = new JsonNetSerializer(new JsonSerializerSettings
        {
            DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
            NullValueHandling = NullValueHandling.Ignore
        });

        GlobalHost.DependencyResolver.Register(typeof(IJsonSerializer), () => serializer); 
    }
} 
```

在客户端，您可以使用此代码将纪元时间转换为日期：

```
function epochUtcToDate(epochUtc) {
    return new Date(parseInt(epochUtc.substr(6), 10));
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T15:37:33.530

如果您已将时区添加到 Json 日期，则需要使用服务器的本地时间

```
public class Startup
{
    public void Configuration(IAppBuilder app)
    {
        GlobalHost.HubPipeline.AddModule(new ElmahPipelineModule());
        app.Map("/signalr", map =>
        {
            map.UseCors(CorsOptions.AllowAll);
            var hubConfiguration = new HubConfiguration
            {
            };
            map.RunSignalR(hubConfiguration);
        });
        var jsonSerializer =  new JsonSerializer();
        jsonSerializer.DateFormatHandling = DateFormatHandling.IsoDateFormat;
        jsonSerializer.DateTimeZoneHandling = DateTimeZoneHandling.Local;
        jsonSerializer.NullValueHandling = NullValueHandling.Ignore;
        GlobalHost.DependencyResolver.Register(typeof(JsonSerializer), () => jsonSerializer);

    }
} 
```

# android - Android Listview 未更新

> ID：13365296
> 
> 赞同：7
> 
> 时间：2012-11-13T17:07:51.527
> 
> 标签：android, android-listview, layout-animation

我有一个带有自定义适配器的 ListView，显示来自数据库的信息。当我启动应用程序时，从数据库中读取数据，将其提供给适配器，然后将其附加到 ListView。在 ListView 上运行一个 LayoutAnimationController，平滑地显示内容。

```
 this._lvList = (ListView)_v.findViewById(R.id.lvList);
    this._lvList.setAdapter(new TableAdapter(getActivity(),R.layout.tablerow,Category.getCategories()));
    LayoutAnimationController lac = new LayoutAnimationController(AnimationUtils.loadAnimation(getActivity(), R.anim.slide_in_left));
    lac.setDelay(0.2f);
    this._lvList.setLayoutAnimation(lac);       
    this._lvList.startLayoutAnimation(); 
```

完全没有问题。

现在，当我单击 ListView 的任何条目时，未单击的条目会消失，单击的条目将成为列表中唯一的条目，并按预期显示在顶部。

```
View v;
for(int i = 0;i<_lvList.getChildCount();i++) {
    v = this._lvList.getChildAt(i);
    if(v!=clickedView) {
           Animation animSlideOut = AnimationUtils.loadAnimation(getActivity(), i%2==0?R.anim.slide_out_left:R.anim.slide_out_right);
           animSlideOut.setStartOffset(i*50);

           // some more stuff

    }
    v.startAnimation(animSlideOut);
} 
```

这也有效，但现在的问题是，如果我再次单击该单个列表条目，我希望重新填充列表，再次显示所有项目。

我想我可以从一开始就使用代码（第一个片段），因为它在启动应用程序时工作正常，但是......这次......它没有。没有动画发生。原因是，我的 ListView 中没有动画视图（上一步中的视图除外）。

我没有创建一个新的 Tableadapter 我已经尝试清除它，而是将其填充为新的，称为 notifyDataSetChanged()... 没用，因为

```
_lvList.getChildCount(); 
```

Stills 返回 1 个视图，而适配器包含所有 18 个条目。我也试过

```
requestLayout();
forceLayout();
invalidate();
invalidateViews(); 
```

强制 ListView 在动画之前生成其子视图，但它不起作用。因此，在我调用布局动画之后，atm ListView 会立即出现。

摘要：我的 ListView 在布局动画开始之前不包含子视图，我该如何强制它生成它们？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:14:25.833

嗯……你做过吗？（以下）

在您的自定义适配器中，覆盖该方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent){
    //the position of the item, the convertView is the view layout of what that row is

} 
```

更改列表视图的更新方式。这个 getView 方法被 Android 每隔一段时间调用一次以刷新视图（你不需要手动调用它）

另外，我想你只需要打电话

`listView.notifiyDataSetChanged()`并`listView.invalidate()`在重新填充列表后强制更新

您可以在此处阅读有关列表视图的更多信息：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

[http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

# php - 使用带有更多 xml 的 ActiveX XMLHTTP

> ID：13365299
> 
> 赞同：2
> 
> 时间：2012-11-13T17:08:11.527
> 
> 标签：php, xml, ajax, codeigniter, xmlhttprequest

大家好，我有一个用codeigniter开发的网站。在此站点中，我必须使用此代码向 10 个服务器发出请求，例如在 javascript 中：

```
var XML_req = new ActiveXObject("Microsoft.XMLHTTP");
XML_req.open("POST", link_server, false);
XML_req.send(unsescape(XMLdata)); 
```

我提出一个请求，结果返回给我 var_XML_req.responseText 问题是：xml 响应可以有数千个节点，我必须为每个服务器发出 10 次相同的请求。我在单个大 xml 中有 10 个请求（所有服务器都相同）和 10 个响应。

我知道这个请求是异步的，但在这种情况下，我不知道是否存在处理这个请求和这个大响应的方法，因为多个用户可以同时发出请求。我有一个功能很好的服务器，但我不知道这个请求和大响应是否会很慢。存在处理这个问题的方法吗？我曾想过为每台服务器制作一个 cronjob ebery 小时并将其存储到数据库中，但在这种情况下，我没有实时数据，我必须购买一个非常大的数据库，因为我可以在许多表中拥有数百万个数据。

我对这种处理大量数据的工作没有太多经验。我希望有人可以向我解释处理此请求和响应的正确、最佳和更快的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T19:34:04.197

老实说，如果您在单个请求中返回数百万行，那就错了。您的查询应该很小，并且应该只返回人们正在寻找的信息，而不是完整的集合：

[在 Ajax 中处理大数据](http://css.dzone.com/articles/dealing-large-data-ajax "在 Ajax 中处理大数据")

在浏览器中始终可以选择使用本地存储：

[jQuery Ajax 本地存储](https://github.com/paulirish/jquery-ajax-localstorage-cache "jQuery Ajax 本地存储")

这是另一个答案，也可能提供一些见解：

[LocalStorage，几个 Ajax 请求还是巨大的 Ajax 请求？](https://stackoverflow.com/questions/8086773/localstorage-several-ajax-requests-or-huge-ajax-request "LocalStorage，几个 Ajax 请求还是巨大的 Ajax 请求？")

祝你好运！

# windows-8 - 如何检查 Internet 连接是否可用于 Windows 8 Store HTML/JS 应用程序中的多个页面？

> ID：13365307
> 
> 赞同：5
> 
> 时间：2012-11-13T17:08:27.513
> 
> 标签：windows-8, winjs

在主页中，我使用了 registerForNetworkStatusChangeNotif() 函数（[我从 MSDN 借来的](http://code.msdn.microsoft.com/windowsapps/Network-Information-Sample-63aaa201/sourcecode?fileId=43860&pathId=556640359)）来注册网络通知更改。该函数添加了一个事件监听器networkstatuschanged，它仅适用于该页面，即当连接中断时显示错误，并且在恢复连接时自动刷新页面 -

var networkInfo = Windows.Networking.Connectivity.NetworkInformation; ... networkInfo.addEventListener("networkstatuschanged", onNetworkStatusChange);

我应该如何处理其他页面的 Internet 可用性检查？

我尝试在 default.js 中注册此功能，以便它可用于所有页面。我的应用程序使用地理定位功能，并且 statuschanged 事件与 networkstatuschanged 事件发生冲突，并且我的应用程序无法显示 Internet 连接丢失错误。如何解决此问题，以便正确处理 Internet 连接不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:56:51.140

您需要收听特定事件。当它触发时，您会检查互联网连接。

```
var networkInformation = Windows.Networking.Connectivity.NetworkInformation;
...

ready: function(element, options)
{
   // Registering for connection change
   networkInformation.addEventListener("networkstatuschanged", this.onNetworkStatusChanged);
   ...
}

unload: function()
{
   // Unregistering for connection change
   networkInformation.removeEventListener("networkstatuschanged", this.onNetworkStatusChanged);
   ...
}

onNetworkStatusChanged: function(eventArgs)
{
    // Retrieve the InternetConnectionProfile
    var internetConnectionProfile = networkInformation.getInternetConnectionProfile();
    // Accesses the NetworkConnectivityLevel
    var networkConnectivityLevel = internetConnectionProfile.getNetworkConnectivityLevel();
    // Switch on NetworkConnectivityLevel
    switch (networkConnectivityLevel) {
        case Windows.Networking.Connectivity.NetworkConnectivityLevel.none:
           ...
        case Windows.Networking.Connectivity.NetworkConnectivityLevel.localAccess:
           ...
        case Windows.Networking.Connectivity.NetworkConnectivityLevel.constrainedInternetAccess:
           ...
        case Windows.Networking.Connectivity.NetworkConnectivityLevel.internetAccess:
           ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:32:23.243

我希望自动页面“刷新”是由于数据绑定。要获得更多控制权，您需要在“ready”页面上绑定到 Networking 对象，并在“unload”页面上再次取消绑定。例如：

```
var networkInfo = Windows.Networking.Connectivity.NetworkInformation;
this.networkHandler = this._doSomething();
...
..

ready: function(element, options)
{
   networkInfo.addEventListener(this.networkHandler);
   ...
   ..
}

unload: function()
{
   networkInfo.removeEventListener(this.networkHandler);
   ...
   ..
}

_doSomething : function(event)
{
    // Examine the 'event' object and perform 'refresh' accordingly
    // Most likely a call to WinJS.Binding.processAll(...)
} 
```

然后，您需要定义处理程序方法“_doSomething()”来检查“事件”对象传递的连接细节并相应地触发您的绑定/刷新逻辑。

希望这可以帮助！

# ios - 内存警告-MapOverlay

> ID：13365310
> 
> 赞同：0
> 
> 时间：2012-11-13T17:08:49.400
> 
> 标签：ios, ios6, mkmapview

我对ios的内存使用有疑问。我已经实现了如下所示的代码，并在设备上运行了大约 10 分钟，它停止并给了我警告“收到内存警告”。我想知道为什么我会收到这个警告。

```
NSArray *ants = [mapView overlays];
for(bb = 0; bb < [polygonArray count]; bb++){
        int attr=[[idArray objectAtIndex:bb]floatValue];

        coords = malloc(sizeof(CLLocationCoordinate2D) * [[polygonArray objectAtIndex:bb] count]);
        for (int a = 0;a < [[polygonArray objectAtIndex:bb] count]; a++){
            coords[a].latitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:0]doubleValue];
            coords[a].longitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:1]doubleValue];
        }
        polygon = [[MKPolygon alloc]init];
        polygon = [MKPolygon polygonWithCoordinates:coords count:[[polygonArray objectAtIndex:bb]count]]; 
        //free(coords);
        [previousPolygons addObject:polygon];

            }
        [mapView addOverlay:polygon];
        }

    }
[mapView removeOverlays:ants]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:32:54.507

你似乎有更多的右括号，你有更多的左括号，所以可能比你向我们展示的更多，但我已经展示了我认为会改进你的代码的下面

```
NSArray *ants = [mapView overlays];
for(bb = 0; bb < [polygonArray count]; bb++){
    int attr=[[idArray objectAtIndex:bb]floatValue];

    coords = malloc(sizeof(CLLocationCoordinate2D) * [[polygonArray objectAtIndex:bb] count]);
    for (int a = 0;a < [[polygonArray objectAtIndex:bb] count]; a++){
        coords[a].latitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:0]doubleValue];
        coords[a].longitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:1]doubleValue];
    }
    //Remove the next line because polygonWIthCoordinates creates one for you
    //polygon = [[MKPolygon alloc]init];
    polygon = [MKPolygon polygonWithCoordinates:coords count:[[polygonArray objectAtIndex:bb]count]]; 
    //reinstate this line
    free(coords);
    [previousPolygons addObject:polygon];

}
//This is outside the for-loop so you'll only be adding the last polygon
[mapView addOverlay:polygon];
}

}
[mapView removeOverlays:ants]; 
```

# php - 带有 Jquery 和 PHP 的 AJAX 复选框

> ID：13365311
> 
> 赞同：2
> 
> 时间：2012-11-13T17:08:52.337
> 
> 标签：php, jquery, html, ajax

我有两行复选框。当用户单击任何单个复选框（在某一行中）时，我想在 PHP 中的总和中添加一个数字。如果他取消选择单个复选框，我想在不刷新页面的情况下实时从总数中减去。**我的问题是我的 AJAX 调用的数据字段中有什么？**

***这是正确的方法吗？***

## HTML

```
<input type="checkbox" name="standard_form[]" value="A" onclick="processForm()">
<input type="checkbox" name="premium_form[]" value="B" onclick="processForm()"> 
```

## 查询

```
<script type="text/javascript">
function processForm() { 
        $.ajax( {
            type: 'POST',
            url: 'submit_form.php',
            data: '',

            success: function(data) {
                $('#message').html(data);
            }
        } );
}
</script> 
```

## PHP

```
 if(IsChecked('standard_form','A'))
    {
      $price += IsChecked('standard_form','A') ? 10 : 0;
    }
   return $price ; 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:17:30.187

尝试：

```
<script type="text/javascript">
 function processForm() { 
    $.ajax( {
        type: 'POST',
        url: 'submit_form.php',
        data: { checked_box : $('input:checkbox:checked').val()},

        success: function(data) {
            $('#message').html(data);
        }
    } );
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:24:35.603

您必须将表单序列化为 JS 对象，这就是进入数据字段的内容。这是一个简单的序列化函数，可以改进，但会给你一个想法

```
function serializeForm(form) {
    var obj = {};
    for (var i = 0; i < form.elements.length; i++) {
        var el = form.elements[i];
        if (el.name) {
            if (obj[el.name] && obj[el.name].constructor == Array ) {
               obj[el.name].push(el.value);              
            } else if (obj[el.name]) {
               obj[el.name] = [obj[el.name], el.value];
            } else {
               obj[el.name] = el.value;
            }
        }
    }
    return obj; 
} 
```

有一个插件可以让您轻松地使用AJAX 提交表单[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)请参阅[jQuery AJAX 提交表单](https://stackoverflow.com/questions/1960240/jquery-ajax-submit-form)

假设以下 HTML

```
<form id="myForm" action="submit_form.php" method="post"> 
  <input type="checkbox" name="standard_form[]" value="A" onclick="processForm()">
  <input type="checkbox" name="premium_form[]" value="B" onclick="processForm()">
</form> 
```

You can just do the following to have the form posted with AJAX

```
// attach handler to form's submit event 
$('#myForm').submit(function() { 
    // submit the form 
    $(this).ajaxSubmit(); 
    // return false to prevent normal browser submit and page navigation 
    return false; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:15:09.180

在复选框中尝试`onclick="processForm(this)"`，然后在 JavaScript 中：

```
<script type="text/javascript">
function processForm(elm) { 
        $.ajax( {
            type: 'POST',
            url: 'submit_form.php',
            data: elm.name+'='+elm.value,

            success: function(data) {
                $('#message').html(data);
            }
        } );
}
</script> 
```

# iphone - iPhone 5 的 UITableView 静态单元格调整大小

> ID：13365312
> 
> 赞同：1
> 
> 时间：2012-11-13T17:08:54.797
> 
> 标签：iphone, xcode, uitableview, resize, iphone-5

我已经看到处理 iPhone 5 屏幕的许多线程，并且我添加了 Default-568h@2x.png。我的应用程序的顶视图相应调整大小，但我有一个容器，其中包含一个带有静态单元格的 UITableViewController，当在 iPhone 5 上运行时会添加更多单元格。我需要让静态单元格与应用程序的其余部分一起调整大小，所以它们占据相同的屏幕区域。

Storyboard 允许您在 3.5 和 4 英寸布局之间切换，但您所做的更改会延续到另一个，这与旋转视图以调整屏幕旋转布局时不同......

我发现了很多关于为 5 添加第二个故事板的信息，但这似乎是一种低效的方法。有没有其他方法可以让静态单元格相应地调整大小？非常感谢！

![在此处输入图像描述](../Images/ce6e365d2ea2f26f74479b3e89a06553.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:02:56.487

将`rowHeight`您的 tableView 设置为`self.tableView.frame.size.height / 5`

# .htaccess - .htaccess 重定向到不同服务器的 IP 地址

> ID：13365323
> 
> 赞同：0
> 
> 时间：2012-11-13T17:09:27.667
> 
> 标签：.htaccess, url-rewriting, mask, url-masking

我在共享主机 (Hostgator) 上托管我的面向公众的网站，并且域指向相同。我还将我的应用程序托管在具有不同主机的专用服务器上。两台服务器都安装了自己的 SSL 证书。

有没有办法编辑 .htaccess 文件来执行以下操作：

[https://www.domain.com/CUSTOMER](https://www.domain.com/CUSTOMER)重定向到[https://xxxx/CUSTOMER](https://x.x.x.x/CUSTOMER)而浏览器仍显示 www.domain.com/CUSTOMER？

由于 SSL 的影响，我使用不同的框架。我的域名注册商是 Hostway，他们不提供 URL 屏蔽/转发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:20:24.853

确保您在不同的服务器上拥有该站点的副本，并且以前使用相同的数据库，这样您就不会因为 http 和 https 之间的订单号或用户登录而遇到麻烦。证书服务器必须是 SSL 提供的 Web 内容的 Web 服务器。

[在这里查看更多信息。](http://bit.ly/UAMB1f)“谷歌搜索结果”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:15:55.403

这可以通过使您的服务器充当代理来完成。即使您无法访问服务器配置，您也可能很幸运加载了 apaches 代理模块：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

如果是这样，您可以“映射”远程站点 (IP)，就好像由您的普通服务器提供服务一样。`[P]`apaches重写模块也可以通过使用`RewriteRule`.

# c# - 我的 MVC 视图能否仅显示 SQL 日期时间字段的日期部分？

> ID：13365331
> 
> 赞同：0
> 
> 时间：2012-11-13T17:10:07.450
> 
> 标签：c#, asp.net-mvc-4

我有一个 ASP.NET MVC4 应用程序显示来自 SQL 的完整日期时间值（例如“1/1/2012 12:00:00 AM”），我试图让它只显示日期（例如“1 /1/2012”）。

有问题的视图的我的 Index.cshtml 文件使用以下代码将项目拉入：

```
@Html.DisplayFor(modelItem => item.OccurrenceDate) 
```

有没有办法修改它只显示日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:42:57.457

您还可以使用注释装饰您的模型，并将为您处理格式

```
using System.ComponentModel.DataAnnotations;
class myModel {
  [DataType(DataType.Date)]
  public DateTime OccurencDate {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:13:34.367

您可以只使用~~[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性~~ [`ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)方法：

```
@Html.DisplayFor(modelItem => item.OccurrenceDate.ToShortDateString()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:33:06.053

没有必要使用 Html Helper DisplayFor 除非你正在利用模板，这个帮助器实际上是设计来做的。

对于您的情况，只需写：

```
@Model.OccurrenceDate.ToString("M/d/yyyy") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T19:26:24.200

我发现了一些有用的东西：

```
@String.Format("{0:d}", item.OccurrenceDate) 
```

来源：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-网络 mvc 应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-25T05:36:23.500

这对我
有用@item.OpeningDate.Value.ToShortDateString()

# javascript - 为什么这个 javascript 不起作用 - 如果选择框

> ID：13365334
> 
> 赞同：0
> 
> 时间：2012-11-13T17:10:12.753
> 
> 标签：javascript, select

我的网站上有这段代码。这个想法是在选择特定的选择框值时隐藏特定的类。

这是我的代码

```
$(document).ready(function(){
var txt = 'Marketing';
$("div.ginput_container select#input_3_1 option").each(function(){
    if($(this).val()==txt){
        $('.mar').hide();    
    }

   });
}); 
```

我得到的结果是 .mar 类在页面加载后立即被隐藏。我看不到错误，我也尝试过

> 变量数 = 1

但我有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:17:25.687

```
$(document).ready(function() {
    var txt = 'Marketing';
    $("#input_3_1").change(function () {
        if ( this.value == txt ) $('.mar').hide();
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/9Cyxh/](http://jsfiddle.net/9Cyxh/)

* * *

如果要显示`$('.mar')`何时选择了不同的选项，请`toggle`改用：

```
$('.mar').toggle( this.value != txt ); 
```

这是小提琴：http: [//jsfiddle.net/9Cyxh/1/](http://jsfiddle.net/9Cyxh/1/)

* * *

如果您希望它在页面加载时也运行（在手动选择选项之前），请触发更改事件：

```
$(document).ready(function() {
    var txt = 'Marketing';
    $("#input_3_1").change(function () {
        $('.mar').toggle( this.value != txt );
    }).change();
});​ 
```

这是小提琴：http: [//jsfiddle.net/9Cyxh/2/](http://jsfiddle.net/9Cyxh/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:16:17.840

你首先不需要循环

将您的选择附加到 change() 事件处理程序，应该就是它..

```
$(document).ready(function(){

     $("select#input_3_1").on('change', function() {
         var txt = 'Marketing';
         if(this.value === txt){
             $('.mar').hide();    
        };

     }).change()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:15:01.227

如果您只想在值更改且等于“Marketing”时隐藏“.mar”类，请尝试

```
$("#input_3_1").change( function() {
    if( $(this).val().toUpperCase() === "MARKETING" ) {
        $(".mar").hide();
    }
}); 
```

演示[在这里](http://jsbin.com/okimow/2/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:37:47.100

```
$("#input_3_1").change(function(){
  if ($("#input_3_1").val()=='Marketing'){
    $(".mar").hide();
  }
}); 
```

# ios - 航向更新时，CoreLocation 位置不更新

> ID：13365337
> 
> 赞同：0
> 
> 时间：2012-11-13T17:10:19.337
> 
> 标签：ios, core-location

我需要得到位置和标题。一旦我运行我的代码，我只会得到标题更新，位置不会更新，因为它没有出现在日志中。

如果我禁用航向更新，我会得到我的位置坐标。如果标题更新开启，我无法获得位置。有没有人遇到过同样的问题？

这是我的设置例程和方法：

```
locationManager = [[CLLocationManager alloc]init];
locationManager.headingFilter = 1;
locationManager.delegate = self;

[locationManager startUpdatingLocation];
[locationManager startUpdatingHeading];

 -(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation//          fromLocation:(CLLocation *)oldLocation 
{NSString *currentLatitude = [[NSString alloc] initWithFormat:@"%g", newLocation.coordinate.latitude];
NSLog(@"currentLatitude = %@", currentLatitude);

NSString *currentLongitude = [[NSString alloc] initWithFormat:@"%g", newLocation.coordinate.longitude];
NSLog(@"currentLongitude = %@", currentLongitude);

NSString *currentHorizontalAccuracy = [[NSString alloc] initWithFormat:@"%g", newLocation.horizontalAccuracy];
NSLog(@"currentHorizontalAccuracy = %@", currentHorizontalAccuracy);

NSString *currentAltitude = [[NSString alloc] initWithFormat:@"%g", newLocation.altitude];
NSLog(@"currentAltitude = %@", currentAltitude);

NSString *currentVerticalAccuracy = [[NSString alloc] initWithFormat:@"%g", newLocation.verticalAccuracy];
NSLog(@"currentVerticalAccuracy = %@", currentVerticalAccuracy);
}- (BOOL)locationManagerShouldDisplayHeadingCalibration: (CLLocationManager *)manager {
return NO;}

     -(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{
CLLocationDirection trueHeading = newHeading.trueHeading;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:28:58.033

该位置尚未更新，因为该方法已在 ios 6.0 中更新

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
CLLocation* location = [locations lastObject]; 
```

这就是 didUpdateLocations 的样子，现在它需要一个数组。[locations lastObject] 这是数组中的最后一个已知位置。从它你可以得到坐标和其他。

# doxygen - 带有 KIND 参数的 Doxygen 和 Fortran

> ID：13365340
> 
> 赞同：0
> 
> 时间：2012-11-13T17:10:24.890
> 
> 标签：doxygen, fortran90

我正在使用 Doxygen 来记录 Fortran 代码，并且我声明了变量，例如：

```
REAL(KIND=8), PARAMETER :: myParam = 1.0_8 
```

但 Doxygen 感到困惑，似乎认为`REAL`是一个函数并抛出：

```
warning: documented function `real' was not declared or defined. 
```

我已经`OPTIMIZE_FOR_FORTRAN`设置了，`YES`所以这不是问题。

有没有办法纠正这个问题，而不必在我的变量周围包裹一些预处理器保护来在构建文档时将它们声明为`REAL`没有参数？`KIND`

# android - Android片段实例避免重复

> ID：13365343
> 
> 赞同：4
> 
> 时间：2012-11-13T17:10:31.707
> 
> 标签：android, android-fragments, instances

嗨，我不确定我做的是否正确。我在一项活动中有几个片段（未同时显示）。当我添加片段时，我是否必须检查以前的实例是否存在？我正在使用兼容性包，我的片段 CameraFragment 是一个单独的类（在它自己的文件中）：

```
private void addNewFragment(Fragment fragment, String tag) {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.frag1, fragment, tag);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.addToBackStack(null);
    ft.commit();
} 
```

进而 ：

```
public void startPicTaking() {

    addNewFragment(CameraFragment.newInstance(), TAG_PIC_TAKING);

} 
```

因此，每次用户单击按钮拍照时，我都会使用此方法，但是我应该验证片段是否已经存在并首先将其删除，还是静态方法 newInstance 确保片段不重复？

我已多次阅读该文档，但我不明白为什么这行： ft.addToBackStack(null); 它是干什么用的？我知道您可以弹出回栈并保留交易，但如何使用它以及用于什么目的？是否有必要，或者如果我不使用它，我可以跳过它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:17:40.053

> 我在一项活动中有几个片段（未同时显示）。当我添加片段时，我是否必须检查以前的实例是否存在？

不，它只会`Fragment`在添加它的下一个实例时创建一个新实例。它不会影响它的前一个实例。

> 因此，每次用户单击按钮拍照时，我都会使用此方法，但是我应该验证片段是否已经存在并首先将其删除，还是静态方法 newInstance 确保片段不重复？

如果您愿意，您可以这样做，以确保 no`Fragment`在堆栈中出现两次。（因此，当您回击时，您不会再次获得相同的活动。）根据您的后台堆栈中出现的确切内容，您可能*不想*删除较低的内容。（假设用户希望在他点击后退按钮时出现之前的片段。）

> 我已多次阅读该文档，但我不明白为什么这行： ft.addToBackStack(null); 它是干什么用的？

当`Fragment`对象被添加到后栈时，每次用户回击时，他们都会回到栈上的前一个项目。如果您不将项目添加到后退堆栈，则用户在点击后退按钮时将不会遇到它。

# jquery - 我的 jQuery 移动 ajax 链接不加载我的样式

> ID：13365344
> 
> 赞同：4
> 
> 时间：2012-11-13T17:10:33.097
> 
> 标签：jquery, css, jquery-mobile

当我使用 ajax 功能在我的应用程序中链接页面时，我在其中链接的个人样式表`<head>`不适用于链接的页面。当我添加`data-ajax="false"`到我的锚点时没关系...

我试过但没有奏效：

*   从 jquerymobile 样式表导入我的个人样式表
*   从我的个人样式表中导入 jquerymobile 样式表
*   在 jquerymobile 样式表中添加我的个人样式表

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:39:11.357

今天早上我又试了一次，我意识到我出了点问题：我忘记为以下 div 中的不同页面提供唯一的 id，它现在似乎可以工作了。

主页

```
<div data-role="page" id="home">content...<div> 
```

链接页面：

```
<div data-role="page" id="resource">content...<div> 
```

# processing - 随机图像并获得获胜者（处理）

> ID：13365345
> 
> 赞同：1
> 
> 时间：2012-11-13T17:10:36.123
> 
> 标签：processing

嗨，我正在构建一个老虎机游戏，但遇到了一些问题，我对处理很陌生。

我制作了这段代码，需要“轮子”是随机的，但它们都具有相同的图像（垂直）

我知道您将无法看到这些图像，所以如果您想要它们，这里有一些链接。

[http://tinypic.com/r/i1jq7t/6](http://tinypic.com/r/i1jq7t/6)（钻石1）

[http://tinypic.com/r/29fe5cg/6](http://tinypic.com/r/29fe5cg/6) (cherry1)

[http://tinypic.com/r/sen1jo/6](http://tinypic.com/r/sen1jo/6) (bell1)

```
int numFrames = 3;  // The number of frames in the animation
int frame = 0;
int spincount = 0;
int state = 0;
PImage[] images1 = new PImage[3];

PImage[] images2 = new PImage[3];

PImage[] images3 = new PImage[3];

void setup() {
  size(1080, 720);
  frameRate(12);

  // wheel 1 
  images1[0]  = loadImage("bell1.png");
  images1[1]  = loadImage("cherry1.png"); 
  images1[2]  = loadImage("diamond1.png");

  // wheel 3
  images3[0]  = loadImage("cherry1.png");
  images3[1]  = loadImage("bell1.png"); 
  images3[2]  = loadImage("diamond1.png");

  // wheel 2
  images2[0]  = loadImage("diamond1.png");
  images2[1]  = loadImage("bell1.png"); 
  images2[2]  = loadImage("cherry1.png");

} 

void draw() { 
  background(o);
  //test state to see if I should be spinning
  if(state == 1) {
    spin();   
  } 

}

//if a key is pressed then set the wheel to spin 
void keyReleased() {
 state = 1;
}

void spin() {
    //spin for 5 times the break out  
  if (frame == 3) { 
    frame = 0; 
    spincount ++;
      if (spincount == 10) { 
        state = 0;
        spincount = 0;
        //check if its a win and do stuff
        winner();
      }   
  }
    // wheel 1  
    image(images1[frame], 20, 0);
    image(images1[frame], 20, 170); //this is the image to test
    image(images1[frame], 20, 340);

    // wheel 2

    image(images3[frame], 200, 0);
    image(images3[frame], 200, 170); //this is the image to test
    image(images3[frame], 200, 340);

    // wheel 3

    image(images2[frame], 400, 0);
    image(images2[frame], 400, 170); //this is the image to test
    image(images2[frame], 400, 340);

    frame ++;

  }  

 void winner() {

    //are the names of the images the same   
    //if ((images3[frame].get(0,0)) == (images2[frame].get(0,0)) == (images1[frame].get(0,0))) {
       // display a question from you list of questions by generating a random number and selecting the text

       // wait for an answer
      for (int i = 0; i < 400; i = i+1) {
        if (keyPressed == true) {
          // whats the key is it correct
        }
        if (i > 400) {
        //display times up
        }
      }
    }
 // } 
```

我在获得“获胜者”方面也遇到了问题（如果左侧角匹配中的水平图像像素进入“获胜者”。

我非常感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:43:46.617

您的代码存在一些问题。

在绘图函数中，您可能想要绘制黑色背景，但您当前使用的是字母“o”而不是数字 0（零）。

您可能想在绘图功能中将当前车轮状态绘制到屏幕上，现在您只有一个黑色窗口，除非您正在旋转。

你不能直接比较颜色。

这是一些修改后的代码以使其正常工作：

```
int numFrames = 3;  // The number of frames in the animation
int maxSpin = 10;
int frame = 0;
int spincount = 0;
boolean spinning = false;
boolean checkWinner = false;
PImage[] images1 = new PImage[3];
PImage[] images2 = new PImage[3];
PImage[] images3 = new PImage[3];

void setup() {
  size(1080, 720);
  frameRate(12);

  // wheel 1 
  images1[0]  = loadImage("bell1.png");
  images1[1]  = loadImage("cherry1.png"); 
  images1[2]  = loadImage("diamond1.png");

  // wheel 3
  images3[0]  = loadImage("cherry1.png");
  images3[1]  = loadImage("bell1.png"); 
  images3[2]  = loadImage("diamond1.png");

  // wheel 2
  images2[0]  = loadImage("diamond1.png");
  images2[1]  = loadImage("bell1.png"); 
  images2[2]  = loadImage("cherry1.png");
} 

void draw() { 
  background(0);
  //test state to see if I should be spinning

  // wheel 1  
  image(images1[frame], 20, 0);
  image(images1[frame], 20, 170); //this is the image to test
  image(images1[frame], 20, 340);

  // wheel 2

  image(images3[frame], 200, 0);
  image(images3[frame], 200, 170); //this is the image to test
  image(images3[frame], 200, 340);

  // wheel 3

  image(images2[frame], 400, 0);
  image(images2[frame], 400, 170); //this is the image to test
  image(images2[frame], 400, 340);

  if (spinning) {
    spin();
  }

  //this draws circles stroked in the color of the pixel at their center
  //this is just to show how the code works, you can remove this
  noFill(); // make the circles transparent
  loadPixels(); // required before using pixels[]
  color wheel1 = pixels[170*width+20];
  color wheel2 = pixels[170*width+200];
  color wheel3 = pixels[170*width+400];
  stroke(wheel1);
  ellipse(20, 170, 10, 10);
  stroke(wheel2);
  ellipse(200, 170, 10, 10);
  stroke(wheel3);
  ellipse(400, 170, 10, 10);
}

//if a key is pressed then set the wheel to spin 
void keyReleased() {
  if(!spinning) spinning = !spinning;
}

void spin() {
  //spin for maxSpin times then break out  

  if (frame == numFrames-1) { 
    spincount ++;
    if (spincount == maxSpin) { 
      spinning = !spinning;
      spincount = 0;
      //check if its a win and do stuff
      winner();
    }
    else frame = 0;
  }
  else frame++;
}  

void winner() {
  loadPixels();
  color wheel1 = pixels[171*width+21];
  color wheel2 = pixels[171*width+201];
  color wheel3 = pixels[171*width+401];
  if(hue(wheel1) == hue(wheel2) && hue(wheel2) == hue(wheel3)) println("winner");
  else println("not a winner");
} 
```

这包括您检查图像角落颜色的所需方法，但我建议您只跟踪当前显示在中心的图像。

我希望这至少能让你朝着正确的方向前进。

# c - nm：如何在共享库中显示符号的目标文件？

> ID：13365347
> 
> 赞同：0
> 
> 时间：2012-11-13T17:10:36.650
> 
> 标签：c, linker, shared-libraries, elf, objdump

我有 25 个目标文件，它们组合成一个共享库。我已经用 gcc 生成了共享库，当我用**nm -D libmylib.so**寻找暴露的符号时，我在 .bss 部分中发现了两个名为**i**和**y**的不受欢迎的暴露符号。我试图在我的源文件中找到它们，但我找不到它们，所以如果有人能告诉我是否有某种方法可以找到哪个 .o 文件恰好具有这些不希望的暴露符号？我可以用 nm 做还是需要其他工具？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:49:40.187

在包含目标文件的目录中，您可以运行：

```
find . -name '*.o' -exec nm -D {} \; -print 
```

这应该打印符号，然后是文件名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:38:25.000

一旦共享库被链接，您就无法再分辨它的哪些部分来自哪个目标文件。

您可以搜索构建库的各个对象：

```
find . -name '*.o' -print0 | xargs -0 nm -A | egrep ' (i|y)$' 
```

您可以要求链接器在定义它们时告诉您：

```
$(CC) -fPIC -shared -o libmy.so $(OBJS) -Wl,-y,i,-y,y 
```

如果你从用 编译的对象构建库，`-g`你可能会问 GDB 从哪里来：`i``y`

```
gdb -q libmy.so
(gdb) info var ^i$
(gdb) info var ^y$ 
```

# android - 是否可以在 kubuntu12.04 (xubuntu) 中构建 AOSP 项目 (Gingerbread)？

> ID：13365348
> 
> 赞同：2
> 
> 时间：2012-11-13T17:10:38.183
> 
> 标签：android, linux, ubuntu, android-source

我使用旧版本的 Android (Gingerbread 2.3.4)。为了开发这些版本，我现在使用 Ubuntu 10.04。同时，我想使用更新的版本：12.04 或者 12.10。它写[在这里](http://source.android.com/source/initializing.html)：

> 在 Ubuntu 12.04 上构建目前仅受实验性支持，不能保证在 master 以外的分支上工作。

所以这是我的问题，有人尝试在 Ubuntu 12.04 上构建旧版本的 Android 吗？我不喜欢新的统一界面，所以我也考虑 xfce 或 kde。这就是为什么这里是第二个问题，如果我更改窗口系统，我在构建时会遇到任何麻烦吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T10:52:25.857

是的，可以在 Ubuntu 12.10 上构建 Gingerbread。

最大的问题是 Ubuntu 12.10 有更新的 gcc 4.7，这是非常严格的。可以通过修补 Android 源代码以符合新的 gcc 要求来修复它。但是，这可能很难做到，尤其是在涉及修补旧内核源时。

您可以通过简单地安装较旧的 gcc 4.4（这是 Ubuntu 10.10 中的默认版本）来绕过此问题。

```
sudo apt-get install gcc-4.4-multilib g++-4.4-multilib 
```

之后，您需要将 gcc 4.4 设置为 Android 编译的默认编译器。最简单的方法是简单地对 gcc、g++、cpp 进行符号链接以指向旧版本并将其添加到 PATH：

```
mkdir ~/bin
cd ~/bin
ln -s /usr/bin/g++-4.4 g++
ln -s /usr/bin/gcc-4.4 gcc
ln -s /usr/bin/cpp-4.4 cpp
# you might want to add line below to ~/.bashrc:
export PATH=$HOME/bin:$PATH 
```

现在，您需要安装 Java。与较新的 Android 4 不同，Gingerbread 可以使用 OpenJDK 构建，因此您应该能够简单地

```
sudo apt-get install openjdk-6-jdk 
```

获得工作的JDK。

另请参阅[此线程](https://groups.google.com/forum/#!msg/ppcdroid/mmw4xtxJ3wQ/2127u5P8E0EJ)。

# wpf - 使用 MVVM 在 DataGrid 中进行分页和排序

> ID：13365353
> 
> 赞同：0
> 
> 时间：2012-11-13T17:11:02.330
> 
> 标签：wpf, mvvm, datagrid

我正在努力在 WPF 中使用 MVVM 进行分页和排序（在多个标题上）。

我已经使用自定义控件进行分页工作，并且排序也可以工作，但并不完全。

我可以处理将命令绑定到它的事件排序事件，让 SortDescriptions (ICollectionView) 对页面进行排序。这适用于多个标题。

唯一的事情是，当我没有在 DataGridSortingEventArgs 上设置处理时，客户端也会排序。我不想要，但是当我设置 DataGridSortingEventArgs 被处理时，排序指示器没有指示.....

- - 结果 - -

1.  实现了自定义分页。

2.  对 DataGrid 中的每个标题使用 SortDirection 绑定。

3.  处理 DataGrid 排序事件（使用 GalaSoft）

2.1。将参数设置为已处理

2.2\. 手动设置列方向（来自 args）

2.3\. 使用 2 中的绑定删除 SortDescriptions（没有排序方向的）

2.5\. 从 ICollectionView 的列中插入 SortDescription

快速。它按我的需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:24:29.753

您可以取消事件并“手动”设置[SortDirection](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.sortdirection%28v=vs.100%29.aspx)

# mysql - 用于查询多个条件的 SQL 语句，包括 3 个最近的日期

> ID：13365357
> 
> 赞同：2
> 
> 时间：2012-11-13T17:11:17.697
> 
> 标签：mysql, sql, date, greatest-n-per-group, multiple-conditions

我需要帮助来查找与最近日期、下一个最近日期和之后的日期相对应的行，其中某些条件 ABC 为“Y”并按列名 XYZ ASC 对其进行分组，但 XYZ 可以出现多次。所以，假设 XYZ 是 50，那么对于三年内的行，XYZ 将是 50。我有以下代码执行但只返回数千行中的两行，这是不可能的。我尝试只执行日期条件，但它返回的日期也小于或等于 MAX(DATE)-3。不知道我哪里出错了。

```
select * from money.cash where DATE =(
  select
  MAX(DATE)
  from
  money.cash
  where
  DATE > (select MAX(DATE)-3 from money.cash)
)
GROUP BY XYZ ASC
having ABC = "Y"; 
```

表结构如下（只是示意图，不是实物）。

```
Comp_ID   DATE   XYZ   ABC  $$$$ ....
1     2012-1-1    10    Y   SOME-AMOUNT
2     2011-1-1    10    Y
3     2006-1-1    10    Y
4     2011-1-1    20    Y
5     2002-1-1    20    Y
6     2000-1-1    20    Y
7     1998-1-1    20    Y 
```

所需的 o/p 将是 XYZ=10 的前三行（按升序排列）和 XYZ=20 的最近 3 个日期。

最后且重要 - 此表的值随着新数据的进入而不断变化。因此，o/p（将在新表中）必须反映第一个/原始/上表中的动态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:24:39.713

MySQL 没有对`greatest-n-per-group`查询友好的功能。

一种选择是...
- 查找`MAX(Date)`每个组*( `XYZ`)*
- 然后使用该结果查找该`MAX(Date)`日期之前的所有记录
- 然后对该日期之前的所有记录再次执行此操作

这确实是低效的，但 MySQL 还没有有效地做到这一点所需的功能。对不起...

```
CREATE TABLE yourTable
     (
      comp_id                          INT,
      myDate                           DATE,
      xyz                              INT,
      abc                              VARCHAR(1)
)
;

INSERT INTO yourTable SELECT 1, '2012-01-01', 10, 'Y';
INSERT INTO yourTable SELECT 2, '2011-01-01', 10, 'Y';
INSERT INTO yourTable SELECT 3, '2006-01-01', 10, 'Y';
INSERT INTO yourTable SELECT 4, '2011-01-01', 20, 'Y';
INSERT INTO yourTable SELECT 5, '2002-01-01', 20, 'Y';
INSERT INTO yourTable SELECT 6, '2000-01-01', 20, 'Y';
INSERT INTO yourTable SELECT 7, '1998-01-01', 20, 'Y';

SELECT
  yourTable.*
FROM
(
  SELECT
    lookup.XYZ,
    COALESCE(MAX(yourTable.myDate), lookup.MaxDate)  AS MaxDate
  FROM
  (
    SELECT
      lookup.XYZ,
      COALESCE(MAX(yourTable.myDate), lookup.MaxDate)  AS MaxDate
    FROM
    (
      SELECT
        yourTable.XYZ,
        MAX(yourTable.myDate)  AS MaxDate
      FROM
        yourTable
      WHERE
        yourTable.ABC = 'Y'
      GROUP BY
        yourTable.XYZ
    )
      AS lookup
    LEFT JOIN
      yourTable
        ON  yourTable.XYZ    = lookup.XYZ
        AND yourTable.myDate < lookup.MaxDate
        AND yourTable.ABC    = 'Y'
    GROUP BY
      lookup.XYZ,
      lookup.MaxDate
  )
    AS lookup
  LEFT JOIN
    yourTable
      ON  yourTable.XYZ    = lookup.XYZ
      AND yourTable.myDate < lookup.MaxDate
      AND yourTable.ABC    = 'Y'
  GROUP BY
    lookup.XYZ,
    lookup.MaxDate
)
  AS lookup
INNER JOIN
  yourTable
    ON  yourTable.XYZ     = lookup.XYZ
    AND yourTable.myDate >= lookup.MaxDate
WHERE
  yourTable.ABC = 'Y'
ORDER BY
  yourTable.comp_id
;

DROP TABLE yourTable; 
```

还有其他选择，但它们都有点老套。搜索 SO `greatest-n-per-group mysql`。

我使用您的示例数据的结果：

```
Comp_ID | DATE     | XYZ | ABC
------------------------------
   1    | 2012-1-1 | 10  |  Y
   2    | 2011-1-1 | 10  |  Y
   3    | 2006-1-1 | 10  |  Y
   4    | 2011-1-1 | 20  |  Y
   5    | 2002-1-1 | 20  |  Y
   6    | 2000-1-1 | 20  |  Y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:59:06.767

这是另一种方式，希望比 Dems 的回答更有效。
使用以下索引对其进行测试`(abc, xyz, date)`：

```
SELECT m.xyz, m.date                --- for all columns:    SELECT m.* 
FROM 
    ( SELECT DISTINCT xyz
      FROM  money.cash
      WHERE abc = 'Y'
    ) AS dm
  JOIN
    money.cash AS m
      ON  m.abc = 'Y'
      AND m.xyz = dm.xyz
      AND m.date >= COALESCE(
            ( SELECT im.date
              FROM  money.cash AS im
              WHERE im.abc = 'Y'
                AND im.xyz = dm.xyz
              ORDER BY im.date DESC
                LIMIT 1 
                OFFSET 2                --- to get 3 latest rows per xyz 
            ), DATE('1000-01-01') ) ; 
```

如果您有多个相同的行`(abc, xyz, date)`，则查询可能会返回超过 3 行`xyz`（所有并列在第 3 位的都将显示）。

# java - Java JSpinner 使用 9s 时的奇数显示行为

> ID：13365364
> 
> 赞同：2
> 
> 时间：2012-11-13T17:12:04.600
> 
> 标签：java, jspinner

我正在尝试设置 JSpinner 的最大值以匹配最大整数值，以便可以在 MySQL 数据库的 SQL 查询中使用该数字。这是微调器和模型的设置代码：

```
SpinnerNumberModel spinnerModel = 
        new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1);
JSpinner spinner = new JSpinner(spinnerModel);
JFormattedTextField formatSpinner = (
        (JSpinner.NumberEditor) spinner.getEditor()).getTextField();
((NumberFormatter) formatSpinner.getFormatter()).setAllowsInvalid(false); 
```

但是当通过输入 9s 进行测试时，它允许用户输入额外的 9，除非您达到 9,999,999,999，它会将值更改为 1,410,065,398，如果您再次点击 9，它会将值更改为 1,215,752,102 并停止接受更多数字。从那里您可以正常递增该值，直到您到达`Integer.MAX_VALUE`格式化程序正确停止微调器的位置。

如果使用任何其他数字，则微调器通过阻止最后一位数字正常工作（即，3s 只允许用户输入 333,333,333）。

# vb.net - 节省时间不想存储说溢出

> ID：13365365
> 
> 赞同：-2
> 
> 时间：2012-11-13T17:12:07.883
> 
> 标签：vb.net, ado.net, overflow

```
Imports System.Data
Imports System.Data.OleDb
Public Class Form_Input_Data_Kelahiran
    Dim jenis As String
    Dim rd As OleDbDataReader
    Dim nik As Integer
    Dim perintah As New OleDbCommand() 'buat koneksi simpan/insert'
    Dim isi As String
    Sub filtabel()
        Call bukakoneksi()
        Dim dt As New DataTable
        Dim da As OleDb.OleDbDataAdapter
        Dim sql As String

        sql = "SELECT * FROM tblkelahiran ORDER BY no_kk asc"

        da = New OleDb.OleDbDataAdapter(sql, konekOLEDB)
        da.Fill(dt)

        konekOLEDB.Close()
        txtnokk.Focus()
    End Sub
    Sub add()
        Call bukakoneksi()

        Try

            Dim perintah As New OleDbCommand()
            Dim isi As String

            isi = " Insert into tblkelahiran (no_kk,nm_kk,nm_lgkp,jenis_klmn,tmpt_dilahirkan,tmpt_kelahiran,tgl_lhr,umur,jenis_kelahiran,penolong,berat,panjang,nik_ibu,nm_ibu,tgl_ibu,pekerjaan_ibu,alamat_ibu,kewarganegaraan_ibu,kebangsaan_ibu,tgl_pencatatan,nik_ayah,nm_ayah,tgl_ayah,pekerjaan_ayah,alamat_ayah,kewarganegaraan_ayah,kebangsaan_ayah,nik_pelapor,nm_pelapor,hubungan,nik_saksi1,nm_saksi1,nik_saksi2,nm_saksi2) values ('" & txtnokk.Text & "','" & txtnamakeluarga.Text & "','" & txtnama1.Text & "','" & cmbkelamin1.Text & "','" & cmbdilahirkan1.Text & "','" & cmbkelahiran1.Text & "','" & dtplahir1.Text & "','" & txtumur1.Text & "','" & cmbjenis.Text & "','" & txtpenolong1.Text & "','" & txtberat.Text & "','" & txtpanjang.Text & "','" & txtnik2.Text & "','" & txtnama2.Text & "','" & cmbpekerjaan2.Text & "','" & dtplahir2.Text & "','" & txtalamat2.Text & "','" & cmbnegara2.Text & "', '" & cmbbangsa2.Text & "','" & dtppekawinan.Text & "','" & txtnik3.Text & "','" & txtnama3.Text & "', '" & cmbpekerjaan3.Text & "','" & dtplahir3.Text & "','" & txtalamat3.Text & "','" & cmbnegara3.Text & "','" & cmbbangsa3.Text & "','" & txtnik4.Text & "','" & txtnama4.Text & "','" & txthubungan.Text & "','" & txtnik5.Text & "','" & txtnama5.Text & "','" & txtnik6.Text & "','" & txtnama6.Text & "' )"

            perintah = New OleDbCommand(isi, konekOLEDB)
            perintah.ExecuteNonQuery()

            konekOLEDB.Close()
            MsgBox("Data berhasil Dimasukkan")

        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub
    Sub bindingdata(ByVal nis As Integer)

        Dim dbread As OleDbDataReader
        Dim perintah As New OleDbCommand

        bukakoneksi()

        perintah = New OleDbCommand("SELECT * FROM tblkelahiran where no_kk = @no_kk", konekOLEDB)
        perintah.Parameters.AddWithValue("@no_kk", nik)
        dbread = perintah.ExecuteReader
        If dbread.Read() Then
            txtnokk.Text = dbread("no_kk").ToString
            txtnamakeluarga.Text = dbread("nm_kk").ToString
            txtnama1.Text = dbread("nm_lgkp").ToString
            cmbkelamin1.Text = dbread("jenis_klmn").ToString
            cmbdilahirkan1.Text = dbread("tmpt_dilahirkan").ToString
            cmbkelahiran1.Text = dbread("tmpt_kelahiran").ToString
            dtplahir1.Text = dbread("tgl_lhr").ToString
            txtumur1.Text = dbread("umur").ToString
            cmbjenis.Text = dbread("jenis_kelahiran").ToString
            txtpenolong1.Text = dbread("penolong").ToString
            txtberat.Text = dbread("berat").ToString
            txtpanjang.Text = dbread("panjang").ToString
            txtnik2.Text = dbread("nik_ibu").ToString
            txtnama2.Text = dbread("nm_ibu").ToString
            dtplahir2.Text = dbread("tgl_ibu").ToString
            cmbpekerjaan2.Text = dbread("pekerjaan_ibu").ToString
            txtalamat2.Text = dbread("alamat_ibu").ToString
            cmbnegara2.Text = dbread("kewarganegaraan_ibu").ToString
            cmbbangsa2.Text = dbread("kebangsaan_ibu").ToString
            dtppekawinan.Text = dbread("tgl_pencatatan").ToString
            txtnik3.Text = dbread("nik_ayah").ToString
            txtnama3.Text = dbread("nm_ayah").ToString
            dtplahir3.Text = dbread("tgl_ayah").ToString
            cmbpekerjaan3.Text = dbread("pekerjaan_ayah").ToString
            cmbnegara3.Text = dbread("kewarganegaraan_ayah").ToString
            cmbbangsa3.Text = dbread("kebangsaan_ayah").ToString
            txtnik4.Text = dbread("nik_pelapor").ToString
            txtnama4.Text = dbread("nm_pelapor").ToString
            txthubungan.Text = dbread("hubungan").ToString
            txtnik5.Text = dbread("nik_saksi1").ToString
            txtnama5.Text = dbread("nm_saksi1").ToString
            txtnik6.Text = dbread("nik_saksi2").ToString
            txtnama6.Text = dbread("nm_saksi2").ToString

        End If
        konekOLEDB.Close()
    End Sub
    Function validasi() As Boolean
        Dim peringatan As Boolean
        If txtnokk.Text = "" Then
            peringatan = False
            MessageBox.Show("No. Kartu Keluarga Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnokk.Focus()
        ElseIf txtnamakeluarga.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Kepala Keluarga Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnamakeluarga.Focus()
        ElseIf txtnama1.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama1.Focus()
        ElseIf cmbkelamin1.Text = "" Then
            peringatan = False
            MessageBox.Show("Jenis Kelamin Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbkelamin1.Focus()
        ElseIf cmbdilahirkan1.Text = "" Then
            peringatan = False
            MessageBox.Show("Tempat Dilahirkan Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbdilahirkan1.Focus()
        ElseIf cmbkelahiran1.Text = "" Then
            peringatan = False
            MessageBox.Show("Tempat Kelahiran Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbkelahiran1.Focus()
        ElseIf dtplahir1.Text = "" Then
            peringatan = False
            MessageBox.Show("Tanggal Lahir Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            dtplahir1.Focus()
        ElseIf txtumur1.Text = "" Then
            peringatan = False
            MessageBox.Show("Umur Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtumur1.Focus()
        ElseIf cmbjenis.Text = "" Then
            peringatan = False
            MessageBox.Show("Jenis Kelahiran Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbjenis.Focus()
        ElseIf txtpenolong1.Text = "" Then
            peringatan = False
            MessageBox.Show("Penolong Kelahiran Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtpenolong1.Focus()
        ElseIf txtberat.Text = "" Then
            peringatan = False
            MessageBox.Show("Berat Bayi Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtberat.Focus()
        ElseIf txtpanjang.Text = "" Then
            peringatan = False
            MessageBox.Show("Panjang Bayi Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtpanjang.Focus()
        ElseIf txtnik2.Text = "" Then
            peringatan = False
            MessageBox.Show("NIK Ibu  Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnik2.Focus()
        ElseIf txtnama2.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama2.Focus()
        ElseIf dtplahir2.Text = "" Then
            peringatan = False
            MessageBox.Show("Tanggal Lahir Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            dtplahir2.Focus()
        ElseIf cmbpekerjaan2.Text = "" Then
            peringatan = False
            MessageBox.Show("Pekerjaan Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbpekerjaan2.Focus()
        ElseIf txtalamat2.Text = "" Then
            peringatan = False
            MessageBox.Show("Alamat Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtalamat2.Focus()
        ElseIf cmbnegara2.Text = "" Then
            peringatan = False
            MessageBox.Show("Kewarganegaraan Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbnegara2.Focus()
        ElseIf cmbbangsa2.Text = "" Then
            peringatan = False
            MessageBox.Show("Kebangsaan Ibu Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbbangsa2.Focus()
        ElseIf dtppekawinan.Text = "" Then
            peringatan = False
            MessageBox.Show("Tanggal Pencatatan Perkawinan Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            dtppekawinan.Focus()
        ElseIf txtnik3.Text = "" Then
            peringatan = False
            MessageBox.Show("NIK Ayah Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnik3.Focus()
        ElseIf txtnama3.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Ayah Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama3.Focus()
        ElseIf dtplahir3.Text = "" Then
            peringatan = False
            MessageBox.Show("Tanggal Lahir Ayah  Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            dtplahir3.Focus()
        ElseIf cmbpekerjaan3.Text = "" Then
            peringatan = False
            MessageBox.Show("Pekerjaan Ayah Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbpekerjaan3.Focus()
        ElseIf txtalamat3.Text = "" Then
            peringatan = False
            MessageBox.Show("Alamat Ayah Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtalamat3.Focus()
        ElseIf cmbnegara3.Text = "" Then
            peringatan = False
            MessageBox.Show("Kewarganegaraan Ayah Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbnegara3.Focus()
        ElseIf cmbbangsa3.Text = "" Then
            peringatan = False
            MessageBox.Show("Kebangsaan Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            cmbbangsa3.Focus()
        ElseIf txtnik4.Text = "" Then
            peringatan = False
            MessageBox.Show("NIK Pelapor Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnik4.Focus()
        ElseIf txtnama4.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Pelapor Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama4.Focus()
        ElseIf txthubungan.Text = "" Then
            peringatan = False
            MessageBox.Show("Hubungan Pelapor dengan Bayi Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txthubungan.Focus()
        ElseIf txtnik5.Text = "" Then
            peringatan = False
            MessageBox.Show("NIK Saksi I Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnik5.Focus()
        ElseIf txtnama5.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Saksi II Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama5.Focus()
        ElseIf txtnik6.Text = "" Then
            peringatan = False
            MessageBox.Show("NIK Saksi II Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnik5.Focus()
        ElseIf txtnama6.Text = "" Then
            peringatan = False
            MessageBox.Show("Nama Saksi II Belum Terisi", "Perhatian", MessageBoxButtons.OK, MessageBoxIcon.Error)
            txtnama5.Focus()
        Else
            peringatan = True
        End If
        Return peringatan
    End Function
    Private Sub btnsimpan_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsimpan.Click
        If validasi() Then
            Call add()
            Call filtabel()
            data_kelahiran.Show()
        End If
    End Sub

    Private Sub btntutup_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btntutup.Click
        Dim PESAN As String

        PESAN = MessageBox.Show("Terimaksih", "Exit", MessageBoxButtons.OKCancel)
        If PESAN = System.Windows.Forms.DialogResult.OK Then
            'MessageBox.Show("Terimaksih", "Exit", MessageBoxButtons.OK, MessageBoxIcon.Information)
            Me.Close()
        End If
    End Sub

    Private Sub Form_Input_Data_Kelahiran_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Call filtabel()

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:16:20.373

请注意您是如何在您的`bindingdata`方法中进行查询的 - 在您创建 之后`OleDbCommand`，您调用`Parameters.AddWithValue()`以使用数据填充查询。对方法中的插入命令执行相同的操作`add`：

```
isi = "INSERT INTO tblkelahiran (no_kk,nm_kk, ... , nm_saksi2) values (@no_kk,@nm_kk, ... , @nm_saksi2)"
perintah = New OleDbCommand(iki, konekOLEDB)
With perintah.Parameters
    .AddWithValue("@no_kk", txtnokk.Text)
    .AddWithValue("@nm_kk", txtnamakeluarga.Text)
    '...
    .AddWithValue("@nm_saksi2", txtnama6.Text)
End With
perintah.ExecuteNonQuery() 
```

这不会解决问题。但是现在您可以将每个`AddWithValue`调用更改为一个已知值，一次一个，直到问题消失：

```
.AddWithValue("@no_kk", "txtnokk")

.AddWithValue("@nm_kk", "txtnamakeluarga") 
```

等等。当您不再收到错误时，您更改的最后一项就是导致问题的项。

# unit-testing - rspec 单元测试具有无限循环的方法

> ID：13365366
> 
> 赞同：5
> 
> 时间：2012-11-13T17:12:08.820
> 
> 标签：unit-testing, rspec

我有这样的方法

```
class SomeClass
  def self.test_method
    while(true)
      make_heavy_lifting
      sleep(60*60)
    end
  end
end 
```

我如何为此方法编写测试。

我想到的一种解决方案是存根 sleep 方法，它有效，但我无法存根 while 关键字。请建议对具有无限循环的方法进行单元测试的最佳实践。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T18:01:26.897

也许您可以将除了 sleep 之外的所有内容移到另一个方法中，然后只为该方法编写规范，我认为您真的不需要测试您的方法是否具有 while 循环和睡眠（您不需要测试每一行代码:P) 但是如果你想检查这个问题，它有一些你可以尝试[的东西 测试“无限循环”时的最佳实践是什么？](https://stackoverflow.com/questions/5717813/what-is-the-best-practice-when-it-comes-to-testing-infinite-loops)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-08T04:52:57.050

为了测试这个我存根`:loop`并使用它而不是`while(true)`：

班级：

```
class SomeClass
  def self.test_method
    loop do
      make_heavy_lifting
      sleep(60*60)
    end
  end
end 
```

规格：

```
describe SomeClass do
  describe '#test_method' do
    expect(SomeClass).to receive(:loop).and_yield
    expect(SomeClass).to receive(:make_heavy_lifting)
    expect(SomeClass).to receive(:sleep).with(60*60)
end 
```

这样它只会迭代一次。

编辑：似乎在[另一个问题中也建议了这一点](https://stackoverflow.com/a/33348498/2171041)

# r - 在 R 中安装 kernlab 包

> ID：13365369
> 
> 赞同：5
> 
> 时间：2012-11-13T17:12:17.427
> 
> 标签：r, failed-installation, suse

我试图在 SLES 11 SP1 上安装 kernlab 包。我安装了所有必备软件包，例如。gcc-fortran...

使用 install.packages("kernlab") 开始安装后，我收到以下错误消息。如果你们中的任何人都可以帮助我，那就太好了。

```
g++ -L/usr/local/lib64 -o kernlab.so brweight.o ctable.o cweight.o dbreakpt.o dcauchy.o       dgpnrm.o dgpstep.o dprecond.o dprsrch.o dspcg.o dtron.o dtrpcg.o dtrqsol.o esa.o expdecayweight.o inductionsort.o kspectrumweight.o lcp.o misc.o msufsort.o solvebqp.o stringk.o stringkernel.o svm.o wkasailcp.o wmsufsort.o -L/usr/local/lib64/R/lib -lRlapack -L/usr/local/lib64/R/lib -lRblas -lgfortran -lm -L/usr/local/lib64/R/lib -lR
/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../lib64/crt1.o: In function `_start':
/usr/src/packages/BUILD/glibc-2.11.1/csu/../sysdeps/x86_64/elf/start.S:109: undefined    reference to `main'
collect2: ld returned 1 exit status
make: *** [kernlab.so] Error 1
ERROR: compilation failed for package ‘kernlab’
* removing ‘/usr/local/lib64/R/library/kernlab’

The downloaded source packages are in
   ‘/tmp/RtmpCf2yIn/downloaded_packages’
Updating HTML index of packages in '.Library'
Making packages.html  ... done
Warning message:
In install.packages("kernlab") :
installation of package ‘kernlab’ had non-zero exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-15T14:33:51.197

我在 Fedora 19 中使用 Rstudio 时遇到了同样的问题。

通过软件包管理器安装“完整的 R 开发环境元包”来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T16:17:40.447

我在opensuse上遇到了这个问题。

我认为这与您安装 gcc 和 fortran 的路径有关（即问题是 R 没有检查此路径）。

您是否使用 Yast 安装了 gcc 等？

# cryptography - 如何识别单词是否没有意义，也许是一些不可能的音节？

> ID：13365375
> 
> 赞同：2
> 
> 时间：2012-11-13T17:12:32.623
> 
> 标签：cryptography, linguistics, frequency-analysis, text-analysis

最初，我有**m个包含****n 个**字符的数组，其中每个数组包含所需单词的未知（对我而言）字符（条件：单词有意义）。

例如**m** =4，**n** =3：array0={' *t* ',' *e* ',' *c* ' },array1={' g''o''a *'* } *,* array2= *{* *'* *w''d* ' ' *y '}，* *array3* = {'e''o *'* 's ' *}*。每个数组只包含一个正确的字母：在array0中是第一个字母，在array1中-第二个......所以，可能的秘密词是' *code* '：array0[2] =' *c* '，array1[1] =' *o* '，数组2[1] = '

 ***我需要找到所有现有的字母组合，即排除生成的无意义单词。英语中“不可能”的音节/字母组合是否有任何规则/规则？

我正在攻击 Vigenere 的密码。所以，我知道密钥的长度及其可能的字符。我正在改组我的数组并得到许多无意义的单词。问题是过滤它们。据我了解，某些条件可以帮助识别错误的单词。例如，如果字长 > 4，则所有元音字符或所有辅音字符都是错误的。某些音节，例如*kk* *hh* *ww*，一般来说也是不可能的。我在哪里可以找到这样的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:11:33.077

我假设您所说的“单词有意义”是指它是英语词典中的单词。

我相信您应该按照 GregS 的建议从另一个方向解决问题，并通过字典。英语在字母和拼写方面有很多例外，看起来像英语的单词数量比实际的英语单词数量要多得多。您将无法以这种方式大幅减少搜索。

但是因为您知道长度和可能的字符，所以您可以快速抛出许多字典单词。此外，如果消息不是太短，那么尝试使用可能的单词对消息进行解码也会非常快，并通过字母、二字或三字[频率](http://www.cryptograms.org/letter-frequencies.php)丢弃不太可能的解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T20:37:24.913

我不确定我是否遵循您攻击 Vigenere 密码的策略。然而，为了回应：

> 我需要找到所有现有的字母组合，即排除生成的无意义单词。英语中“不可能”的音节/字母组合是否有任何规则/规则？

是的，确实有很多这样的规则。有两种学习和实施这些规则的方法：

1.  认真学习英语的词法，一丝不苟地执行规则。
2.  在英文文本语料库上训练马尔可夫模型。

1 将大大减少工作量，而几乎没有额外的好处。***

# winforms - 远程登录到开发机器时，C# Windows 窗体被剪切

> ID：13365376
> 
> 赞同：0
> 
> 时间：2012-11-13T17:12:33.483
> 
> 标签：winforms, size, rdp

我的窗体大小是 1305,617。

当我远程登录到我的开发机器时，windows 窗体大小被缩减到 1036,617，我无法将其扩大到 1036 以上。我尝试使用更大的显示器但同样的问题

知道为什么吗？以及如何解决？我正在使用框架 2.0 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:07:45.003

所以我将我使用的显示器的分辨率提高到 RDP 并解决了这个问题。

# ember.js - 使用 ember.js 进行 A/B 测试

> ID：13365377
> 
> 赞同：7
> 
> 时间：2012-11-13T17:12:34.137
> 
> 标签：ember.js, ab-testing

关于使用 ember.js 之类的客户端框架进行 A/B 测试，我在 Google 上一无所获。

目标是提供调整后的内容（不同的导航项、标题措辞等），以便对我们的 UI/UX 进行 A/B 测试。我应该注意到没有什么重要的（即站点地图）正在改变，只是一些次要的表现方面。

有几种可能的方法，即使用不同的视图模板/帮助片段，或提供不同的样式表。两者都有优势和挑战，理想情况下，同一位访客将始终获得相同的版本。结果将通过 Mixpanel 之类的服务提供。

我担心我可能不得不在这里推出自己的解决方案，但很想听听任何建议/指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:32:35.390

从根本上讲，大多数 A/B javascript 测试框架将用户作为“A”或“B”组的 cookie，让您可以询问用户是“A”还是“B”并报告“结果”到一个服务来衡量。这可以以与框架相当正交的方式插入 Ember 或其他客户端框架。

我建议将用户的“A”或“B”作为用户的属性（在 Ember 中，可能是您的`UserController`）。然后，您可以使用框架的标准分支或条件来呈现“A” UI 或“B” UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:19:57.640

实际上，我已经为我的创业公司使用 Ember 构建了一个非常强大的 A/B 测试工具。如果有需求，我们实际上正在考虑将其开源。不过，我可以让你知道它现在是如何工作的基本概念。

我有landingPage 对象，然后可以有一堆与之相关的A/B 测试，当用户来到登录页面时，他们被分配了一个cookie，并且对于每个分配了A 或B 的A/B 测试。

我在 Jade 中使用了两种不同的方法来处理 A/B 测试。

对于样式类型的东西，我使用这样的东西

并将视图中的 .css 属性设置为 test-a 或 test-b

或者如果是文本我会做这样的事情

{{查看 view.landingPageText}}

而landingPageText 将被设置为A 的文本或B 的测试。

这个东西还动态设置mixpanel，mailchimp，使用parse.com和node。您可以在此处查看正在运行的代码。

[http://golf.nextstudioapps.com/](http://golf.nextstudioapps.com/)

# windows-phone-7 - WP7 中 ProgressBar 的奇怪行为

> ID：13365383
> 
> 赞同：0
> 
> 时间：2012-11-13T17:12:55.633
> 
> 标签：windows-phone-7, progress-bar

所以，我试图在我的 WP7 Panorama 应用程序中使用进度条。有一页，就是从网上下载数据，所以我想表明我的应用程序正在用 ProgressBar 做一些事情

```
<controls:PanoramaItem Header="news">
            <Popup Name="myWeatherPopup" IsOpen="False" Width="404" Height="Auto" Margin="0,136,4,293">
                <StackPanel>

                    <ProgressBar Height="Auto" IsIndeterminate="True" Width="400" />
                    <TextBlock Text="Loading" HorizontalAlignment="Center" Foreground="Gray" />

                </StackPanel>
            </Popup>
        </controls:PanoramaItem> 
```

它基本上可以正常工作。但是，有一个很小的（和讨厌的错误）。点的第一个...运行（？）出现在每个全景项目上，就在标题下方。之后，它返回新闻项下的正常位置。

同样的事情也发生在模拟器和 Lumia 800 上。

[图片](http://i.stack.imgur.com/pfoqb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:59:48.397

您是否尝试过不使用 Popup，只需在 StackPanel 上设置 Visibility 属性？

# c# - 动态枚举转换器

> ID：13365384
> 
> 赞同：0
> 
> 时间：2012-11-13T17:13:06.720
> 
> 标签：c#, wpf, markup-extensions

我想为我的应用程序中的所有可能的枚举创建一个动态的 2 路转换器。

我不想为每个枚举创建一个转换器，我想创建一个转换器，提供从枚举到字节的转换以及从字节到枚举的转换，反之亦然。

我要怎么去那儿？我的方法已经是 2-way 但需要在代码中进行静态**转换（MyEnum）**：

```
public class MyEnumConverter : MarkupExtension, IValueConverter 
        {
        public object Convert(object value, System.Type targetType, object parameter, CultureInfo culture) {
            return (MyEnum)value;
        }

        public object ConvertBack(object value, System.Type targetType, object parameter, CultureInfo culture) {
            return (byte)value;
        }

        public override object ProvideValue(System.IServiceProvider serviceProvider) {
            return this;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:21:12.057

尝试这些扩展方法，它将从枚举转换为数据类型（int，字节，..），从数据类型（int，字节，..）转换为枚举，反之亦然..

```
 public static T ToEnumValue<T, E>(this E enumType)
    {
        return (T)Enum.ToObject(typeof(E), enumType);
    }

    public static E ToEnumType<T, E>(this T enumString)
    {
        return (E)Enum.Parse(typeof(E), enumString.ToString());
    } 
```

例如：要使用上述方法，请使用枚举

```
public enum EmployeeType
{
    Permanent = 0,
    Contract = 1,
}

int value = EmployeeType.Contract.ToEnumValue<int, EmployeeType>(); // 1
EmployeeType employeeType = value.ToEnumType<int, EmployeeType>();  // Contract 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:46:12.173

我相信你可以用两种不同的方式做到这一点。

选项 1：利用`targetType`转换方法上的参数。当需要转换为枚举时，`targetType`则为枚举类型。您可以使用`System.Enum`类上的静态方法之一进行转换。

选项 2：在您的 xaml 中，使用 ConverterParameter 传入要转换为的枚举类型：

```
Converter={local:MyConverter, ConverterParameter={x:Type MyEnumType}} 
```

如果你走那条路，那么类型将在`parameter`转换方法的参数中。同样，类上的静态方法`System.Enum`将为您完成繁重的工作。

# ruby - Puppet 自定义事实 - 未初始化的常量 Facter (NameError)

> ID：13365388
> 
> 赞同：2
> 
> 时间：2012-11-13T17:13:24.930
> 
> 标签：ruby, puppet

如果我错过了一些东西，我真的很抱歉，这已经得到了回答，我已经搜索了这个网站和谷歌，但无论如何都找不到任何东西，这就去。

我正在运行 Ruby 1.8 和 Puppet 2.7。我对这两者都是新手，但在过去的几周里，我和 Puppet 做了很多工作，在没有让我的网站崩溃的情况下触摸木头 :)

我现在想写一些自定义事实。我一直在尝试[Puppet 文档站点](http://docs.puppetlabs.com/guides/custom_facts.html)上的说明。我写了一个 hardware_platform.rb 如下：

```
# hardware_platform.rb

Facter.add("hardware_platform") do
  setcode do
    Facter::Util::Resolution.exec('/bin/uname -i')
  end
end 
```

我想我应该像这样运行它：

```
# ruby hardware_platform.rb 
```

但是当我这样做时，我得到了这个错误：

```
hardware_platform.rb:3: uninitialized constant Facter (NameError) 
```

有谁知道这里可能出了什么问题？在我继续前进之前，我需要克服这个...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:17:53.860

您可能`require 'facter'`在脚本顶部缺少 a 。还可以通过运行来验证 facter gem 是否已安装`gem install facter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:45:15.633

如果您在 puppet 将查找的 ruby​​ lib 目录以外的任何地方测试此代码，则首先设置 RUBYLIB。例如在目录名***/path/to/dir***下测试，创建**lib/ruby/facter/hardware_platform.rb**

然后你可以

```
export RUBYLIB=/path/to/dir/lib/ruby 
```

然后，你可以运行

```
facter hardware_platform 
```

这应该会给你一个正确的结果。

正如@lucas_clemente 所说，您还需要检查您的系统中是否安装了facter。如果您使用的是 yum，只需检查/安装它，

```
yum list facter 
```

如果安装它会产生类似这样的结果，或者如果没有安装它会显示版本存在于你的仓库中：

```
facter.x86_64        1:1.6.12-2.el5           installed 
```

# youtube - 如何在嵌入的 youtube 视频中播放播放列表的特定视频

> ID：13365389
> 
> 赞同：0
> 
> 时间：2012-11-13T17:13:24.023
> 
> 标签：youtube, youtube-api, youtube-javascript-api, youtube-dl

我已按照本教程[http://www.lavacoms.com/2012/01/embedded-youtube-playlist-autoplay/](http://www.lavacoms.com/2012/01/embedded-youtube-playlist-autoplay/)

这是一个很好的教程。我的问题是，如果我的页面上嵌入了播放列表，但我希望第一个视频可以说是第二个或第三个视频，甚至是播放列表的第一个视频，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:22:57.147

```
<iframe src="http://www.youtube.com/embed/VIDEO_ID?list=PLAYLISTURL&amp;autoplay=1&amp;modestbranding=1&amp;fs=2" frameborder="0" width="640" height="385"></iframe> 
```

它说 VIDEO_ID 将您要从播放列表中首先播放的视频 ID 放在其中。它说 PLAYLISTURL 放置了 url 的 ID。

在[http://911-need-code-help.blogspot.com/2012/07/youtube-iframe-embeds-video-playlist-and-html5.html上找到](http://911-need-code-help.blogspot.com/2012/07/youtube-iframe-embeds-video-playlist-and-html5.html)

希望它可以帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T09:08:41.507

考虑到 php 上的 VIDEO_ID 数组 ( `$filas`)，您可以添加如下：

```
function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      videoId: '<?php echo $filas[0]["trailer"]; ?>',
      playerVars: { 'autoplay': 1, 'controls': 1, 'enablejsapi': 1, 'frameborder': 0,
      'playlist': '<?php for ( $i=1; $i < count($filas); $i++) { if($i == count($filas) -1) echo $filas[$i]["trailer"]; else echo $filas[$i]["trailer"].", "; } ?>' },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
        'onError': onError
      }
    });
  } 
```

请务必捕捉错误，以防视频无法播放

# c# - ClassInitialize 中生成的数据驱动测试：不再在 Visual Studio 2012 中工作

> ID：13365393
> 
> 赞同：5
> 
> 时间：2012-11-13T17:13:35.190
> 
> 标签：c#, unit-testing, visual-studio-2012, mstest, data-driven-tests

我已从 Visual Studio 2010 升级到 Visual Studio 2012。

在我的单元测试项目中，我有一个 [ClassInitialize] 方法，它生成一个 CSV 文件，然后我使用连接到 CSV 的 [DataSource] 将其输入数据驱动的 [TestMethod]。

这在 Visual Studio 2010 中效果很好。

我无法让它在 Visual Studio 2012 中工作。

似乎在 VS2012 中，MS 测试运行器要求连接到 [DataSource] 的文件已经存在，否则将不会运行任何测试。如果我自己创建 CSV，则数据驱动测试会运行，但它们不会获取在 [ClassInitialize] 中创建的数据：似乎 [DataSource] 中的测试列表在 [ClassInitialize] 运行之前进行了评估。

有解决方法吗？

* * *

这是一个重现问题的最小项目。对我来说，这在 VS2010 中成功，但在 VS2012 中失败。

**测试项目.cs**

```
using System.Diagnostics;
using System.IO;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace TestProject
{
    [TestClass]
    public class DataDrivenUnitTest
    {
        private static bool _classInitializeCalled;
        private static int _testCount;

        public TestContext TestContext { get; set; }

        [ClassInitialize]
        public static void ClassInitialize(TestContext testContext)
        {
            // Generate the csv list of tests
            //TestContext = testContext;
            _classInitializeCalled = true;
            string testDirectory;
            testDirectory = testContext.DeploymentDirectory;
            using (var f = new StreamWriter(testDirectory + @"\" + "TestList.csv"))
            {
                f.WriteLine("TestName");
                f.WriteLine("TestA");
                f.WriteLine("TestB");
            }
        }

        [TestMethod]
        [DataSource("CsvTestData32")]
        public void TestMethod1()
        {
            _testCount++;
            var testName = TestContext.DataRow["TestName"];
            Debug.Print("Test {0}: {1}", _testCount, testName);
        }

        [ClassCleanup]
        public static void ClassCleanup()
        {
            Assert.IsTrue(_classInitializeCalled);
            Assert.AreEqual(_testCount, 2);
            Debug.Print("Tests completed: Tests run {0}", _testCount);
        }
    }
} 
```

在我的情况下，“以 32 位运行测试”是默认设置；这可能会在 -

*   在 VS2012 中：测试 > 测试设置 > 默认处理器架构
*   在VS2010中右键单击解决方案资源管理器“解决方案项目”>添加>新项目>测试设置，然后，
*   VS2010 主菜单 > 测试 > 编辑测试设置 > 主机 > 在 32 位或 64 位进程中运行测试。

如果您使用 64 位，请使用 [DataSource("CsvTestData64")]，您可能需要安装[MS Access 64 位 ODBC 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)。最简单的方法是坚持使用 32 位。

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="microsoft.visualstudio.testtools" type="Microsoft.VisualStudio.TestTools.UnitTesting.TestConfigurationSection, Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </configSections>

  <microsoft.visualstudio.testtools>
    <dataSources>
      <add name="CsvTestData32" connectionString="CsvConn32" dataTableName="`TestList.csv`" dataAccessMethod="Sequential" />
      <add name="CsvTestData64" connectionString="CsvConn64" dataTableName="`TestTest.csv`" dataAccessMethod="Sequential" />
    </dataSources>
  </microsoft.visualstudio.testtools>

  <connectionStrings>
    <add name="CsvConn32" connectionString="Driver={Microsoft Text Driver (*.txt; *.csv)};.\;Extensions=csv;" providerName="System.Data.Odbc" />
    <add name="CsvConn64" connectionString="Driver={Microsoft Access Text Driver (*.txt, *.csv)};Dbq=.\;Extensions=csv" providerName="System.Data.Odbc" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-18T18:38:23.243

[MSTestHacks](https://github.com/Thwaitesy/MSTestHacks)可能会有所帮助。

它允许将`IEnumberable`您的测试类用作`DataSource`您的`TestMethod`.

从网站：

## 运行时数据源

你必须从 TestBase 继承你的测试类

```
[TestClass]
public class UnitTest1 : TestBase
{ } 
```

创建一个属性、字段或方法，它返回一个`IEnumerable`

```
[TestClass]
public class UnitTest1 : TestBase
{
    private IEnumerable<int> Stuff
    {
        get
        {
            //This could do anything, fetch a dynamic list from anywhere....
            return new List<int> { 1, 2, 3 };
        }
    }
} 
```

将`DataSource`属性添加到您的测试方法，指向`IEnumerable`之前创建的名称。这需要完全合格。

```
[TestMethod]
[DataSource("Namespace.UnitTest1.Stuff")]
public void TestMethod1()
{
    var number = this.TestContext.GetRuntimeDataSourceObject<int>();

    Assert.IsNotNull(number);
} 
```

# java - Log4j 未在消息前打印名称

> ID：13365395
> 
> 赞同：1
> 
> 时间：2012-11-13T17:13:42.257
> 
> 标签：java, logging, log4j

我有一个 log4j 记录器，我像这样实例化：

`logger = Logger.getLogger("EQUIP(" + id + ")");`

这样做，当我打电话时`logger.info("message")`，我应该得到这样的输出（带有一些日期格式）：

`13/11/12 15:08:27 INFO: EQUIP(1): message`

但我只得到：

`13/11/12 15:08:27 INFO: message`

我还打印`logger.getName()`到控制台进行调试，它给了我正确的“EQUIP(1)”名称。这种行为在我的程序中的某些情况下会发生，我有几个这样的记录器，但主要是在这个特定的类中。我想知道我是否做错了什么，这个名称是否应该只是类/包名称，或者它是否可以是任何东西（它在我的 80% 以上的记录器中运行良好）。我需要打印每台设备的 ID，因为我有几个同时工作，如果没有这些设备，跟踪它们几乎是不可能的。

我应该如何解决这个问题，最好不用资源来更改我的所有日​​志调用以包含此前缀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:21:14.517

输出格式取决于您为 appender 配置的模式。如果模式字符串包含`%c`，那么您将获得包含的记录器名称，如果不包含，则不会。

另一种方法可能是使用[映射的诊断上下文](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html)，它旨在消除来自不同线程写入同一记录器的日志输出之间的歧义。

# javascript - 有没有办法在javascript中获取当前时区？

> ID：13365399
> 
> 赞同：2
> 
> 时间：2012-11-13T17:14:03.260
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中获取客户端的时区](https://stackoverflow.com/questions/1091372/getting-the-clients-timezone-in-javascript)

无论如何要在javascript中获取当前时区。我所看到的只是

```
Date.getTimeZoneOffset() 
```

我面临的问题是，我有一个允许用户下载 pdf 的功能，现在 pdf 必须在其中包含一个“下载日期”，它应该是用户本地日期，必须在 java 中执行此操作。但这一切都令人困惑，我不知道我是否应该设置语言环境，或者只是时区会起作用，每次我尝试某些东西时结果都不一样！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:15:25.577

利用**[`Date.toTimeString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toTimeString)**

**代码：**

```
var date = new Date();
document.write(date.toTimeString()); 
```

**输出：**

```
22:53:21 GMT+0530 (India Standard Time)
              ^offset     ^timezone 
```

# java - 不同url的不同认证方式

> ID：13365400
> 
> 赞同：2
> 
> 时间：2012-11-13T17:14:11.653
> 
> 标签：java, spring, spring-security

我在我的应用程序中使用 spring-security (3.0.5.RELEASE)。这个应用程序为用户托管一个 api 和一些受限访问，我想使用 spring-security 在应用程序的两侧进行身份验证。

*   Api 在 mydomain/api/*
*   用户受限访问位于 mydomain/restricted/*

Api 身份验证必须通过某种 api_key 来完成

用户访问认证由登录表单完成

第一个问题是：有可能吗？
如果是，我该怎么做？我在互联网上阅读了很多东西，但我不知道该怎么做（除了升级到 spring 3.1 ...）

欢迎任何帮助...

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:13:36.320

升级到 Spring Security 3.1 确实是干净利落的最佳方式。如果你不能这样做，你仍然可以达到预期的结果，但它不会那么漂亮。如果您的资源在 URL 空间中完全分离（看起来如此），您可以添加第二个 Spring Security 过滤器，仅覆盖 /api 资源，并确保它在默认资源之前应用。要在 Spring Security 3.0 中分离配置，您需要为第二个过滤器提供单独的应用程序上下文，并配置过滤器以在众所周知的位置找到它 - 例如 DispatcherServlet 创建一个上下文并将其存储在 servlet 上下文中的相关属性中到它的名字（下例中的“api”）：

```
<filter>
    <filter-name>apiSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>contextAttribute</param-name>
        <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.api</param-value>
    </init-param>
</filter>

    <filter-mapping>
    <filter-name>apiSecurityFilterChain</filter-name>
    <url-pattern>/api/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>api</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet> 
```

此示例中的调度程序 servlet 有一个应用程序上下文，`/WEB-INF/api-servlet.xml`其中包含一个带有`id="apiSecurityFilter"`.

# entity-framework - EF Code First Detached Entity 不更新对象引用

> ID：13365401
> 
> 赞同：3
> 
> 时间：2012-11-13T17:14:21.803
> 
> 标签：entity-framework, ef-code-first, stateless

我正在发布确切的实体：

```
 public class Person : ContactableEntity
{

    public Plan Plan { get; set; }

    public int Record { get; set; }

    public int PersonTypeValue { get; set; }

} 
```

我正在使用以下代码以不相关的上下文方式进行更新：

```
 public void Update(DbSet MySet, object Obj)
    {
        MySet.Attach(Obj);
        var Entry = this.Entry(Obj);
        Entry.State = EntityState.Modified;
        this.SaveChanges();
    } 
```

这是我的 dbContext 公开的一个方法 以这种方式调用：

```
PersistentManager.Update(PersistentManager.Personas,UpdatedPersona); 
```

问题是，EF 将更新除引用的 Plan 对象之外的任何属性。有人可以告诉我错误在哪里吗？提前：实体到达更新点并正确设置所有属性。EF 只是无法更新数据库中的 FK（但也不例外） 更新：尝试解决这样的问题，但没有奏效：

```
 PersistentMgr.Contacts.Attach(Obj);
            PersistentMgr.Entry(Obj).State = EntityState.Modified;
            PersistentMgr.Entry(Obj.Plan).State = EntityState.Modified;
            PersistentMgr.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T23:36:27.070

你需要...

```
this.Entry(person).State = EntityState.Modified;
this.Entry(person.Plan).State = EntityState.Modified; 
```

...因为当您将 person 的状态设置为状态时，`person`该`Modified`人会附加到 state 中的上下文，`Modified`但相关实体（例如`person.Plan`state ）会附加到该上下文中`Unchanged`。

`Person`如果和之间的关系在`Plan`实体分离时发生了变化，则更难以正确更新实体（尤其是在您的模型中，当没有外键作为属性公开时（“独立关联”））。您基本上需要从数据库中加载原始对象图，如果关系已更改，则将其与分离图进行比较，然后将更改合并到加载的图中。[这里](https://stackoverflow.com/a/13237269/270591)有一个示例（请参阅该答案中的第二个代码片段）。

**编辑**

显示它有效的示例（使用 EF 5.0）：

```
using System.Data;
using System.Data.Entity;
using System.Linq;

namespace EFModifyTest
{
    public class Person
    {
        public int Id { get; set; }
        public Plan Plan { get; set; }
        public int Record { get; set; }
        public int PersonTypeValue { get; set; }
    }

    public class Plan
    {
        public int Id { get; set; }
        public string SomeText { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<Person> Contacts { get; set; }
        public DbSet<Plan> Plans { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());

            // Create a person with plan
            using (var ctx = new MyContext())
            {
                ctx.Database.Initialize(true);

                var plan = new Plan { SomeText = "Old Text" };
                var person = new Person { Plan = plan, Record = 1, PersonTypeValue = 11 };

                ctx.Contacts.Add(person);

                ctx.SaveChanges();
            }
            // see screenshot 1 from SQL Server Management Studio

            Person detachedPerson = null;
            // Load the person with plan
            using (var ctx = new MyContext())
            {
                detachedPerson = ctx.Contacts.Include(c => c.Plan).First();
            }

            // Modify person and plan while they are detached
            detachedPerson.Record = 2;
            detachedPerson.PersonTypeValue = 12;
            detachedPerson.Plan.SomeText = "New Text";

            // Attach person and plan to new context and set their states to Modified
            using (var ctx = new MyContext())
            {
                ctx.Entry(detachedPerson).State = EntityState.Modified;
                ctx.Entry(detachedPerson.Plan).State = EntityState.Modified;

                ctx.SaveChanges();
            }
            // see screenshot 2 from SQL Server Management Studio
        }
    }
} 
```

SQL Server Management Studio的截图1（修改前，`Person`左`Plan`表，右表）：

![修改前](../Images/886fb70faf4e092c25a3b72883f71463.png)

SQL Server Management Studio的截图2（修改后，`Person`左`Plan`表，右表）：

![修改后](../Images/814a5d705e1611b34af02d249777f31d.png)

如果它对您不起作用，那么我的测试模型和代码肯定有重要区别。我不知道是哪一个，您必须提供更多详细信息。

**编辑 2**

如果您将关系从`Person`另一个（现有）更改，`Plan`则必须加载原始关系，然后更新关系。使用独立关联（模型中没有 FK 属性），您只能通过使用更改跟踪来更新关系（除了`ObjectContext`更改跟踪器中关系条目的更高级修改）：

```
var originalPerson = this.Contacts.Include(c => c.Plan)
    .Single(c => c.Id == person.Id);
this.Plans.Attach(person.Plan);

this.Entry(originalPerson).CurrentValues.SetValues(person);
originalPerson.Plan = person.Plan;

this.SaveChanges(); 
```

# transactions - 处理 SSIS 事务

> ID：13365408
> 
> 赞同：2
> 
> 时间：2012-11-13T17:14:46.873
> 
> 标签：transactions, ssis, sql-server-2008-r2, bids

我在 SQL Server 2008R2 上有以下场景：

*   用于收集数据的存储过程
*   在两个 SQL Server 之间传输数据

这个过程是通过交易来完成的。

以下是我在这种情况下的想法： ![SSIS 包大纲](../Images/7f41595743cac1f67bffd4a82f15245f.png)[1]

综上所述，从服务器 A 到服务器 B 的数据传输是从源到目的地的简单数据流。在这种情况下，我必须在服务器 B 上将选项设置为 "RetainSameConnection" = true。

我的问题如下：

*   首先，这是否概述了一个可行的工作解决方案？
*   由于数据正在从 A 移动到 B，因此必须在服务器 B 上打开并提交/回滚事务？
*   仅在服务器 B 连接上才需要将 RetainSameConnection 设置为 true 吗？
*   我有什么遗漏或建议吗？

我知道还有 MS DTC 处理可用于 SSIS 的事务，我正在收集其中的数据以呈现给操作，但确实希望有另一种可能的解决方案，因为这个过程可以很快地优先考虑“现在”。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:32:49.633

按顺序回答您的问题：是、是、是和否。你没有错过任何东西。

忠告：在所有连接管理器上将 retaisameconnection 设置为 true；这对性能有好处。确保将事务命名为 begin tran A。不要靠近使用 SSIS 内置事务 - 它既缓慢又复杂。

# ruby-on-rails - 如何在 Rails 中回溯产量

> ID：13365409
> 
> 赞同：1
> 
> 时间：2012-11-13T17:14:47.253
> 
> 标签：ruby-on-rails

假设我正在使用现有的 Rails 应用程序。分解应用程序的最佳方法是什么？

如果我从**layouts/application.html.erb**开始，我会看到一个或多个**<%yield%>**语句。如何轻松地从浏览器中呈现的视图退回到构建收益的底层代码？即：无需阅读每个视图中的代码。

* * *

这并不是我在这个问题中真正要寻找的，但它可能会帮助其他人在 Rails 上寻求帮助。我一直在使用**rails-footnotes** gem。它为页面添加了一个页脚，其中包含各种有用的信息：实例变量、视图信息甚至是带有计时的 SQL 语句。

gem 'rails-footnotes' 安装

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T23:57:32.263

如果调试器太复杂，并且您正在寻找更多的跟踪文件，您可能可以通过使用默认的日志输出来获得。例如，发出请求时，默认输出类似如下的输出：

```
Started GET "/login" for 127.0.0.1 at 2012-11-27 17:52:16 -0600
Processing by SessionsController#create as HTML       
  Rendered sessions/create.html.erb within layouts/application (1.0ms)
  Rendered application/_header.html.erb (1.0ms)
  Rendered application/_wrapper.html.erb (54.0ms)
Completed 200 OK in 150ms (Views: 150.0ms | ActiveRecord: 0.0ms) 
```

如您所见，输出包含访问的控制器和操作 ( `SessionsController#create`)，以及为请求呈现的各种部分 (`Rendered sessions/create.html.erb within layouts/application`例如 )。

如果您正在寻找介于简单性和调试器复杂性之间的东西，您可能希望尝试使用[rack-bug](https://github.com/brynary/rack-bug)或[mini-profiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby) ( [railscast](http://railscasts.com/episodes/368-miniprofiler?view=asciicast) ) 之类的东西。

可能您正在寻找的只是一个好的 IDE。一些 Rails 专家可能会对使用 IDE 的想法嗤之以鼻，但我认为它们可以为新手和专家提供许多优势。在您的情况下，您可能会受益于能够轻松设置断点并在代码执行时直观地单步执行代码，并在此过程中检查变量内容。我真的很喜欢[RubyMine](https://www.jetbrains.com/ruby/)，并且会毫无保留地推荐它（不是免费的，但可以免费试用，完全物有所值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:29:32.107

您可以使用 ruby​​ 调试器。

假设您使用的是 Ruby 1.9.3（如果不是，请回复），您暗示执行以下操作：

*   在您的 Gemfile 中，包括：`gem 'debugger'`
*   `bundle`保存后运行
*   在您的控制器（或您想使用它的任何地方）中放置`debugger`您希望代码执行停止的位置。

现在通过浏览器点击您的应用程序并查看您启动服务器的位置，您应该会看到调试提示。

您可能必须在调试模式下启动服务器，您可以执行以下操作：

```
rails server --debugger 
```

[Rails 指南 - 调试 Rails 应用程序](http://guides.rubyonrails.org/debugging_rails_applications.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:21:25.180

只需`raise Exception`在要中断的代码中的任何位置添加它怎么样。这将生成堆栈跟踪。

这是一个非常粗略的解决方案——我倾向于按照@BradWerth 的建议使用记录器——事实上，通常只使用 Rails 日志就足够了。调试器在您确实需要深入挖掘的某些情况下很有用，但根据我的经验，设置和使用是一件非常痛苦的事情:-)

# json - 在 extjs 组合框中使用单值 json

> ID：13365410
> 
> 赞同：2
> 
> 时间：2012-11-13T17:14:59.217
> 
> 标签：json, extjs, extjs4, extjs4.1

这是我得到的 json 响应。我用 JSONLINT 进行了检查，它说有效，但如果你注意到它只给了我没有列标题的价值……列名是“States”。

```
 {"myTable":["VA","CA","CO","OK","PA","TX"]} 
```

是否可以使用此 Json 加载到我的组合框中

```
items: [{
                    xtype: 'combo',
                    id: 'iccombo',
                    scope: this,
                    store: this.store,
                    mode: 'remote',
                    minChars: 0,
                    fieldLabel: 'Short State',
                    displayField: 'States',
                    valueField: 'States',
                    typeAhead: true,
                    name: 'States',
                    labelWidth: 125,
                    anchor: '95%'
                }, 
```

这是我的商店

```
var store = Ext.create('Ext.data.Store', {
        autoLoad: true,
        id: 'OurData',
        scope: this,
        fields: [{ name: 'States' }],
        proxy: {
            type: 'ajax',
            url: 'GetState/getS',
            reader: {
                type: 'json',
                root: 'myTable'
                idProperty: 'States'
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:48:44.050

开箱即用的 Ext 具有几乎匹配的 Array Reader，但需要对您拥有的数据格式进行调整。阵列阅读器可以定制，以获取您的数据格式并将其转换为所需的格式。这种定制对于许多无法在服务器级别修改的服务来说很常见，因此我们可以轻松地在 UI 级别进行调整，这要归功于 Ext JS 数据框架。

这是您可以使用的自定义阅读器以及基于示例的实现以及按记录显示数据的快速循环：

```
/**
 * A customized reader to convert a list to an array for the
 * ArrayReader to take
 */
Ext.define('Ext.ux.data.reader.JsonList', {

    extend: 'Ext.data.reader.Array',

    alias : 'reader.jsonlist',

    root: 'myTable',

    /**
     * this is really the guts of the change
     * convert an array of strings to an array of arrays of strings 
     */
    extractData: function (root) {
        var data;

        if (Ext.isArray(root) && !Ext.isArray(root[0])) {
            root.forEach(function (val, idx, all) {
                /* turn the value into an array */
                all[idx] = [val];
            })
        }

        data = root;

        /* hand the array of arrays up to the ArrayReader */
        return this.callParent([data]);
    }
});

store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    id: 'OurData',
    scope: this,
    fields: [{ name: 'State' }],
    proxy: {
        /* change this back to ajax to get server data */
        type: 'memory',
        url: 'GetState/getS',
        reader: {
            type: 'jsonlist'
        }
    }, 

    /* temp data for simplified demo code */
    data: {"myTable":["VA","CA","CO","OK","PA","TX"]}
});

/* just to demo that there are six records with State as the field name: */
store.each(function (rec, id, total) {
    console.log(rec.get('State'))
}); 
```

# c++ - 删除成员函数中对容器的引用

> ID：13365413
> 
> 赞同：0
> 
> 时间：2012-11-13T17:15:05.720
> 
> 标签：c++, pointers, reference, containers

我有 `class A`，然后我制作了一个向量`class A`； `std::vector<A> b`，我正确初始化它。

我有另一个类的一个成员函数，它有一个指向 A 向量的成员指针；

在这个类中，我也有一个成员函数，并且在这个成员函数里面。我首先建立一个对A类向量的引用，并使用指针的引用对其进行初始化，原因是成员引用只能赋值一次，所以我使用指针，但在成员函数内部，引用的语法是更干净。

问题是，在成员函数中，如果我删除对该向量的引用，它是只删除引用还是删除指针指向的整个容器。容器包含对象而不是指针。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:21:12.133

当引用超出范围时，它不会破坏原始对象。

我假设这是这种情况：

```
class A {};

class B
{
     std::vector<A>* pA;

public:
     B( std::vector<A>* p ): pA(p) {}

     void foo()
     {
          std::vector<A>& arr = *pA;
          //do stuff with arr
          // Arr and pA are still valid after the end of this function
     }
};

int main()
{
    std::vector<A> Arr;
    Arr.push_back( A() );

    B b( &Arr );
    b.foo();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:21:30.067

您应该提供一个示例，但根据您提供的内容，这已经是一个很大的禁忌！

如果您存储 a`std::vector<A>`您将存储 A 类型的实际对象。当您的向量增长时，这些项目将被*复制*到一个新的内存位置，因此在对象向量中保留对项目的指针或引用将无法按预期工作。

考虑改为存储指针 ( `std::vector<A*>`)

删除指向 a 的指针`std::vector<A>`应该会删除所有内容。如果你切换到`std::vector<A*>`你应该删除向量中的每个对象，然后删除向量。

# html - 如何水平对齐以下标题图像？

> ID：13365414
> 
> 赞同：0
> 
> 时间：2012-11-13T17:15:04.907
> 
> 标签：html, css, image, alignment

我已经尝试了整个下午，但我错过了一些东西，有人可以帮我解决这个问题吗？该页面可以在以下链接中找到

[带有我需要修复的图像的页面](http://www.websu.it/tv-film/hello-world/)。

包含图像的代码是：

```
 <headerimage><span>
            <img width="1920" height="600" src="http://www.websu.it/wp-content/uploads/2012/11/suitsheader.jpg" class="attachment-post-thumbnail wp-post-image" alt="Suits Header" title="Suits Header"></span>
        </headerimage> 
```

我想在较小的屏幕上将宽度为 1920px 的图像水平居中。当我给一个类属性 background-position: top center 时，它工作得很好，但是当我需要在页面本身中有一个 -tag 时，我似乎无法实现它。

请帮我看看：）这可能很愚蠢，哈哈。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:16:38.337

在图像上设置`margin: 0 auto;`，如：

```
<headerimage>
  <span>
    <img style="margin:0 auto;" width="1920" height="600" src="http://www.websu.it/wp-content/uploads/2012/11/suitsheader.jpg" class="attachment-post-thumbnail wp-post-image" alt="Suits Header" title="Suits Header">
  </span>
</headerimage> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:37:40.637

我不会把它作为图像而是作为你标题的背景。

```
background-image:url('http://www.websu.it/wp-content/uploads/2012/11/suitsheader.jpg');
background-position-x:center;
background-repeat:no-repeat; 
```

有关粗略演示，请参见[http://jsfiddle.net/dwat001/Q58YZ/](http://jsfiddle.net/dwat001/Q58YZ/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:40:55.673

如果您不能使用背景图像，另一种方法是使用 javascript 来定位图像。

```
<style>
  #imageHolder {
    overflow: hidden; // if image is bigger then holder, clip the image, no scollbars.
  }

  #wideHeaderImage {
    position: relative; // treat "left" as relative to the images normal position.
  }
</style>
<headerimage id="imageHolder">
  <img id="wideHeaderImage" width="1920".../>
</headerimage>

<script src="jquery"></script>
<script>
  // create function to center image;
  var centerImage = function($) {
     var windowWidth = $(window).width(); // get the current width of the window
     var imageSize = $('#wideHeaderImage').width(); // get width of image                                             
     $('#imageHolder').width(windowWidth); // set the containing element to be size of window.
     if(imageSize > windowWidth) { // if image is wider then window
       var offset = (imageSize - windowWidth) / 2; // Establish an offset
       $('#wideHeaderImage').css('left', '-' + offset + 'px'); // apply offset
     }
  };

  jquery(function($) {
    // this code runs within on load

    // register a resize event handler
    $(window).resize(function(event){centerImage($);});
    // resize once on onload.
    centerImage($);
  });
</script> 
```

我没有运行这个，所以我可能犯了一些错误，希望足以让你了解我正在做的事情的要点。

# permissions - Liferay：防止特定角色添加特定的 portlet

> ID：13365418
> 
> 赞同：1
> 
> 时间：2012-11-13T17:15:22.910
> 
> 标签：permissions, liferay, portlet, roles

我有一个我开发的自定义 portlet。我希望只有管理员角色才能将其添加到页面。问题是添加 portlet 的选项出现在所有用户的 Dockbar->Add->More 菜单中。如何防止管理员以外的任何人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:31:38.697

以下程序应使其：

1.  以管理员身份登录
2.  转到控制面板 -> 插件配置（确保在顶部菜单上选择了 Portlet 插件）
3.  搜索您的 portlet 名称并单击它
4.  在权限表中删除所有角色少于管理员
5.  节省

以下链接片段是在 Liferay 6 中从第 3 步开始的快捷方式：

```
[YOUR_SERVER_PROTOCOL_AND_ADDRESS]/group/control_panel/manage?p_p_id=132&p_p_lifecycle=0&p_p_state=maximized&p_p_mode=view&doAsGroupId=10156&refererPlid=10159 
```

# .net - FirstOrDefault 会从 BlockingCollection 中删除值吗

> ID：13365420
> 
> 赞同：0
> 
> 时间：2012-11-13T17:15:25.420
> 
> 标签：.net, vb.net, linq, task-parallel-library

```
 Dim logDetail = (
        From d In UIDLs
        Select d.EmailID
        Where EmailID = UIDL
    ).FirstOrDefault 
```

阻塞集合是 UIDL。
logDetail 对象会从阻塞集合中取出吗？

这可能是对阻塞集合的无效使用，但 UIDL 就在那里，所以我可以并行查找 UIDL 中的值。我正在考虑使用并发字典，这对我来说似乎更糟，因为我基本上只有一个对象数组而不是名称值对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:57:37.857

使用此查询将利用 IEnumerable 接口。

阻塞集合的默认 GetEnumerator 不会从列表中删除项目。

[BlockingCollection.IEnumerable.GetEnumerator 方法](http://msdn.microsoft.com/en-us/library/dd267242.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:25:45.710

`FirstOrDefault()`不会从集合中删除任何项目。如果您使用`GetConsumingEnumerable()`，那么`FirstOrDefault()`将从集合中删除一个项目，以及它之前的所有项目，这不是您想要的。

您说您只有一个“字符串数组”，但您的代码说明了其他内容：您有一个对象集合，并且您希望根据该对象的某些属性在该集合中执行查找。如果是这种情况，`ConcurrentDictionary`应该很好地满足您的需求。有了它，您的代码将类似于：

```
' add item to the dictionary
Dim logDetails = New ConcurrentDictionary(Of String, LogDetail)
Dim d = …
logDetails.TryAdd(d.EmailID, d)

…

' try remove item from the dictionary
Dim emailID = …
Dim removed = logDetails.TryRemove(emailID, d) 
```

# python - “结果[::-1]”是什么意思？

> ID：13365424
> 
> 赞同：10
> 
> 时间：2012-11-13T17:15:29.543
> 
> 标签：python, slice

我刚刚遇到以下让我有点困惑的python代码：

```
 res = self.result[::-1].encode('hex') 
```

编码的东西很清楚，它应该表示为十六进制值。但是，这个 self.result[::-1] 是什么意思，尤其是冒号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T17:16:37.350

它代表从结果中获取的“切片”。第一个元素是起始位置，第二个是结束（不包括），第三个是步骤。冒号之前/之后的空值表示您从开头 ( `s[:3]`) 开始或延伸到结尾 ( `s[3:]`)。您也可以在此处包含实际数字，但尽可能将它们排除在外更为惯用。

例如：

```
In [1]: s = 'abcdefg' 
```

返回从开头开始并在索引位置 2 处停止的字符串切片：

```
In [2]: s[:3]
Out[2]: 'abc' 
```

返回从第三个索引位置开始并延伸到末尾的字符串切片：

```
In [3]: s[3:]
Out[3]: 'defg' 
```

返回从末尾开始并一次后退一个元素的字符串切片：

```
In [4]: s[::-1]
Out[4]: 'gfedcba' 
```

返回包含所有其他元素的字符串切片：

```
In [5]: s[::2]
Out[5]: 'aceg' 
```

它们也可以相互结合使用。在这里，我们返回一个切片，该切片返回从索引位置 6 开始到索引位置 2 的所有其他元素（请注意，`s[:2:-2]`这会更惯用，但我选择了奇怪数量的字母 :)）：

```
In [6]: s[6:2:-2]
Out[6]: 'ge' 
```

step 元素确定要返回的元素。在您的示例中，`-1`表示它将在项目中后退一步，一次一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:17:14.230

这是颠倒列表的常见习语。

```
a = ['a', 'b', 'c', 'd']
b = a[::-1]
print b

['d', 'c', 'b', 'a'] 
```

[您可以在此处](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)阅读有关“扩展切片”的信息。

# reporting-services - SSRS 堆积柱形图 - 多列重叠

> ID：13365426
> 
> 赞同：3
> 
> 时间：2012-11-13T17:15:36.347
> 
> 标签：reporting-services

在 SQL Server Reporting Services 2008 R2 中，我有以下数据集。

```
Date   | Value 1 | Value 2
--------------------------
Week 1 | 52      | 57
Week 2 | 49      | 63
Week 3 | 88      | 71 
```

我有一个堆积柱形图，其中 X 轴为日期，Y 轴为值。图表中的列当前在值 1 之上显示值 2。这将列显示为值 1 和值 2 的总和。因此对于第 1 周，它是 109 等。

现在我的问题是，如何让图表显示每列的总和是数据集中的最高值？这仍然会显示这两个值，但会将整个列的最低值与剩余值放在顶部。因此，对于第 1 周，总数为 57。值 1 的列将是 52，值 2 的列将是 5。

这可能会让人感到困惑，所以我添加了一个我希望最终图表看起来像的虚拟图像。

![在此处输入图像描述](../Images/964b0dc99315f0eef1162f48cda51843.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:22:36.817

也许你可以写一个这样的查询：

```
SELECT LEAST(value1, value2) as value1, GREATEST(value1, value2) as value2
  value1 < value2 as color
FROM ... 
```

# java - 在 Java 程序中选择几个文件作为输入

> ID：13365427
> 
> 赞同：0
> 
> 时间：2012-11-13T17:15:37.157
> 
> 标签：java

> **可能重复：**
> [如何使用 java.awt.FileDialog 选择多个文件](https://stackoverflow.com/questions/5182100/how-to-select-multiple-files-using-java-awt-filedialog)

我正在编写一个小型 java 程序，它将文件作为输入，读取数据，并将所需的输出打印到文件中。我创建了一个小型 JPanel，您可以在其中选择输入和输出文件。我使用[FileDialog](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/FileDialog.html) 来选择输入文件。该程序运行良好，但我想知道我是否能够在 FileDialog 中选择几个文件，它会返回一个文件数组。因为有时输入会在几个文件之间拆分。

请给我你的任何想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:18:18.640

您可以`setMultiSelectionEnabled(true);`在 上使用`FileDialog`，但前提是您使用的是 JDK7。

对于较旧的 JDK 版本，替代方法是`setMultiSelectionEnabled(boolean b)`在`javax.swing.JFileChooser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:19:11.120

您需要使用 AWT 吗？如果没有，请查看摇摆 JFileChooser。有一个[setMultiSelectionEnabled](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setMultiSelectionEnabled%28boolean%29)方法可以帮助

如果您需要 FileDialog 组件，请查看此[方法](http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html#setMultipleMode%28boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:20:15.767

复制自[如何使用 java.awt.FileDialog 选择多个文件](https://stackoverflow.com/questions/5182100/how-to-select-multiple-files-using-java-awt-filedialog)

> [根据 Javadoc，在JDK7](http://download.java.net/jdk7/docs/api/java/awt/FileDialog.html)中似乎是可能的（参见 `setMultipleMode(boolean)`或`getFiles()`返回文件数组）。但是交叉检查[JDK6](http://download.oracle.com/javase/6/docs/api/java/awt/FileDialog.html)的Javadoc在旧版本中是不可能的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:21:35.813

为什么不使用[JFileChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)并调用[getSelectedFiles()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#getSelectedFiles%28%29)？教程[在这里](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)。

# javascript - 更改元素内容但不更改大小

> ID：13365432
> 
> 赞同：1
> 
> 时间：2012-11-13T17:15:52.833
> 
> 标签：javascript, jquery, css

我有一个以设定宽度显示图像的页面。高度是可变的，因此图像保持其纵横比。鼠标悬停时，图像会发生变化，但高度也会发生变化。我怎样才能保持高度和宽度相同，只是让新图像使用最后一个图像的最大高度/最大宽度，这样容器就不会调整大小。

见这里 - [http://jsfiddle.net/z3sxc/11/](http://jsfiddle.net/z3sxc/11/)

```
<style>
li {
    width: 190px;
    border: 1px solid black;
    list-style: none;
}

li img{
    width: 100%;
}
</style>
<body>
    <ul>
        <li onmouseover="clip_1.src='http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg'" onmouseout="clip_1.src='http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg'">
            <img src="http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg" name="clip_1">      
        </li>
        <li onmouseover="clip_2.src='http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg'" onmouseout="clip_2.src='http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg'">
            <img src="http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg" name="clip_2">      
        </li>
    </ul>​
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:24:03.233

你可以试试这个 - [**DEMO**](http://jsfiddle.net/z3sxc/12/)

```
$("li")
    .on("mouseover", function() {
        var h = $(this).height();
        $(this).find("img").prop("src", "http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg");
        $(this).height( h );
})
    .on("mouseout", function() {
        $(this).find("img").prop("src", "http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:31:25.653

**无需 JavaScript/jQuery 即可实现此效果。**

只需在 css 类中定义块元素（例如`<div />`，`<span style="display: inline-block" />`等）的背景图像，然后更改背景图像`:hover`。

见这里：http: [//jsfiddle.net/adamb/z3sxc/15/](http://jsfiddle.net/adamb/z3sxc/15/)

HTML：

```
<div class="picture" /> 
```

CSS：

```
.picture {
    background: url(http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg) no-repeat;
    background-size: 190px;
    width: 190px;
    height: 190px;
    border: 1px solid black;
}

.picture:hover {
    background: url(http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg) no-repeat;   
    background-size: 190px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:24:07.417

您可以添加一个 Javascript 函数来更改元素上的 CSS：

```
function changeImage() {
    clip_1.style.maxWidth = clip_1.width + 'px';
    clip_1.style.maxHeight = clip_1.height + 'px';
    clip_1.src='http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg';
}​

<li onmouseover="changeImage()" ... /> 
```

（[住在这里](http://jsfiddle.net/j5AeH/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:26:15.357

这里有一些可以帮助你入门的东西。

我做的第一个调整是`<div>`用一个通用的 CSS 类名把你的图片包裹起来：

```
<li onmouseover="clip_1.src='http://3.bp.blogspot.com/-7VguOKQL_1A/TZCZqkhCJ8I/AAAAAAAAAEc/Hcch-vkZBMk/s1600/01_08_52---Duck_web.jpg'" onmouseout="clip_1.src='http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg'">
    <div class="clip">
            <img src="http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg" name="clip_1">      
       <div>
</li>​ 
```

然后你可以给那个类一些有助于调整大小的样式：

```
.clip {
    overflow: hidden;
} 
```

然后在上面加上一点 jQuery：

```
$(function() {
    $('.clip img').load(function() {
        $(this).parent('.clip').css({ 
            width: $(this).width(), 
            height: $(this).height() 
        }); 
        $(this).unbind('load'); // only do this once             
    });            
});​ 
```

**[​演示](http://jsfiddle.net/z3sxc/13/)**

# objective-c - UIButtonTypeCustom 类型的 UIButton 上的标签未显示

> ID：13365440
> 
> 赞同：3
> 
> 时间：2012-11-13T17:16:26.280
> 
> 标签：objective-c, ios, uibutton, ios6

我想在我的视图中添加一个无边框的 UIButton。使用界面生成器，我通过从对象库中拖动一个圆形矩形按钮来完成此操作。然后，在属性检查器上，将类型更改为自定义并将标题保留为“按钮”。界面生成器一切正常。但是，程序化方法并非如此。以编程方式，这就是我的做法：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:CGRectMake(x, y, width, height)];
[button setTitle:@"Button" forState:UIControlStateNormal]; 
```

当我运行该应用程序时，该按钮不显示。也许我在这里遗漏了一些东西，但是当我将类型更改`UIButtonTypeRoundRect`为显示按钮时。但是，我希望按钮是无边框的。

无论如何，我总是可以使用界面生成器。但是，我想了解为什么程序化方法不起作用。那么，有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:21:14.133

`UIButtonTypeCustom`真的**，实际上是**一种自定义按钮类型。默认情况下没有为它设置有意义的值。如果要显示它，则必须将其背景颜色和/或其标题颜色设置为不透明的：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:CGRectMake(x, y, width, height)];
[button setTitle:@"Button" forState:UIControlStateNormal];
// Set visible values
[button setBackgroundColor:[UIColor greenColor]];
[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[someSuperview addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:21:38.037

在这里，我使用了您的代码，您缺少的是

```
 [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T10:06:37.907

Hi I was in the same situation. I do not know why somewhere in my code there was

```
button.translatesAutoresizingMaskIntoConstraints = NO; 
```

Once I've deleted that line I was able to set my button frame without any issues. Hope this helps

# error-handling - 检测 SSIS 中的部分行

> ID：13365443
> 
> 赞同：0
> 
> 时间：2012-11-13T17:16:27.887
> 
> 标签：error-handling, ssis, delimiter, script-component

**情况：**来自平面文件源的制表符分隔的行缺少行末尾的列。在平面文件连接管理器中，行由 分隔`{CR}{LF}`，最后一列也由 分隔`{CR}{LF}`。所有其他列由 分隔`Tab {t}`。SSIS 正在导入该行。

例子：

Column_1 `{t}` Column_2 `{t}` Column_3 `{t}` Column_4`{CR}{LF}`

123 `{t}` 123 `{t}` 123 `{t}` 123`{CR}{LF}`

123 `{t}` 123`{CR}{LF}`

123 `{t}` 123 `{t}` 123{ `{t}` 123`{CR}{LF}`

123 `{t}` 123`{t}` `{t}` `{CR}{LF}`

123 `{t}` 123 `{t}` 123 `{t}` 123`{CR}{LF}`

**问题：** 没有用制表符分隔剩余列的部分行（请参见上面的第 2 行）将下一行视为当前行的一部分，而包含空白的制表符分隔列的行（请参见上面的第 4 行）确实不是。

**期望的输出：**需要一个错误来指示部分行。

检查文件中间部分行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:58:39.360

如果解析时缺少列，则 pre-denali (2012) SSIS 似乎会失败。2012 年通过始终检查行分隔符来解决此问题。

请参阅：http: [//blogs.msdn.com/b/mattm/archive/2011/07/17/flat-file-source-changes-in-denali.aspx](http://blogs.msdn.com/b/mattm/archive/2011/07/17/flat-file-source-changes-in-denali.aspx)

在 2012 年之前的 SSIS 中解决此问题的方法包括编写自己的解析器（这是我们选择做的）、在解析数据之前转换数据，或仅使用平面文件源来解析行。

# php - 以下两个代码片段哪个更快，为什么？

> ID：13365446
> 
> 赞同：0
> 
> 时间：2012-11-13T17:16:37.710
> 
> 标签：php, performance

我和[Jim O'Brien](https://stackoverflow.com/users/801702/jim-obrien)编写了两段代码，它们的作用完全相同。但哪个更快？

（代码生成输入数组的偶数和奇数的键值对。如果输入数组是这样的：

```
Array(
    "thirteen",
    13,
    "seven",
    7,
    ...
) 
```

那么输出数组将变成这样：

```
Array(
    "thirteen" => 13,
    "seven" => 7,
    ...
) 
```

**片段1：**

```
<?php

$output = array();
for ($i = 0; $i < count($input); $i++) {
    $output[$input[$i]] = $input[++$i];
}

?> 
```

**片段 2：**

```
<?php

$output = array();
for ($i = 0; $i < count($input); $i += 2) {
    $output[$input[$i]] = $input[$i + 1];
}

?> 
```

哪个片段更快，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:19:06.977

与预先计算`count($input)`而不是每次循环出现时都运行它相比，它们之间的差异是微不足道的。

就在您给出的两个之间，第二个更具可读性，是我会选择的。效率方面，它只是不值得打扰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:21:35.590

这通常被称为微优化。不值得担心，因为两者之间的任何收益/差异充其量都可以忽略不计。与其担心这样的事情，您应该关注可读性并遵循良好的编码实践。此外，正如 Kolink 上面指出的那样，您可以在进入循环之前获得 count() 的结果，这样您就不会在每次迭代时运行不必要的函数调用：

```
<?php

$output = array();
$count = count($input);
for ($i = 0; $i < $count; $i++) {
    $output[$input[$i]] = $input[++$i];
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:35:28.440

如果 PHP 将其编译为汇编指令，它可能会将它们优化为一组 x86 指令（假设您正在为该架构进行基准测试），这些指令占用相同数量的 CPU 周期。

那说：

*   有一条 x86 指令可以将值增加/减少一。这些可能会用于两个片段的内部循环命令（即`++$i`和`$i + 1`）。
*   在第二个片段中，计算结果`$i + 1`将在使用后被丢弃，而
*   第一个片段将保留它。我只能推测生成的指令是否会将其写回内存（这会很慢）或将其保存在 CPU 寄存器中（这会很快）。
*   关于循环的头部，代码段 1 将再次受益于增加指令，而代码段 2 需要添加指令。在现代 CPU 上，两者通常只占用一个 CPU 周期。因此，第二个片段是否使内部循环中计算的结果未被使用并不重要。

In any case, you will only be able to measure a difference when taking a very large number of samples. If you really want to know, you would need a way to look at the generated instructions the PHP compiler produces. As the code is rather small, it shouldn't be too hard to identify the loops and count the CPU cycles by the instructions each snippet produces (see [this question](https://stackoverflow.com/questions/692718/how-to-find-cpu-cycle-for-an-assembly-instruction) for information on how to find the number of cycles per instruction).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:23:11.200

差异可以忽略不计，选择最易读的选项。

# android - Android 两个动画有很多帧

> ID：13365450
> 
> 赞同：3
> 
> 时间：2012-11-13T17:16:43.127
> 
> 标签：android, animation

我正在开发一个 android 应用程序并制作了 120 个模仿自定义倒计时的帧。我需要叠加的两个动画是自定义倒计时和实际计时器。我查看了 AnimationSet，但遇到了制作动画对象的问题，我必须在实际使用它之前添加 120 帧，这导致内存不足异常。第二种方法是使用 LayerDrawable 并逐帧显示。在那里，我遇到了知道要显示哪些帧以及何时显示的问题。

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:34:04.517

我建议使用[Tween 引擎](http://code.google.com/p/java-universal-tween-engine/)，它非常适合动画。对于 android，您可以添加一些额外的代码来制作这样的[动画](http://code.google.com/p/java-universal-tween-engine/wiki/AndroidUI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:41:52.450

我有同样的问题。我使用了 SurfaceView。例如： http: [//obviam.net/index.php/sprite-animation-with-android/](http://obviam.net/index.php/sprite-animation-with-android/)

# jsf-2 - Primesfaces：如何获取过滤器列文本的值

> ID：13365451
> 
> 赞同：3
> 
> 时间：2012-11-13T17:16:43.700
> 
> 标签：jsf-2, primefaces

给定以下primefaces数据

```
<p:dataTable value="#{cc.attributes.playerCollection}" var="player"
    widgetVar="playerWidgetTable" emptyMessage="#{uimsg.ui_not_recordsfound}">
    <!-- filter event handler  -->
    <p:ajax event="filter" listener="#{cc.attributes.viewBean.listenFilter}" update="@this"/>

    <!-- Player first name  -->
    <p:column id="firstnameColumn" headerText="#{uimsg.firstname}"
        filterBy="#{player.firstName}" filterMatchMode="contains">
        <h:outputText value="#{player.firstName}" />
    </p:column>
</p:dataTable> 
```

某人如何（在服务器端）获得用户在过滤器文本列中给出的过滤器“文本”值？

我试图用“listenFilter”收听过滤器事件：

```
@ManagedBean
@ViewScoped
public class PlayerListBean implements Serializable {

......

    public void listenFilter(FilterEvent event) {
        // update datasource
        Map<String, String> tempString = event.getFilters();

        System.out.println("size filter: "+ tempString.size());
        for (String key : tempString.keySet()) {
            System.out.println("key: " + key + " \t values: "
                    + tempString.get(key));

        }

    }

} 
```

但我不能从它开始。他们还有其他选择吗？喜欢将 DataTable 作为绑定组件使用，或者？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:30:50.883

这对我来说很好......

```
public void listenFilter(FilterEvent event) {

    DataTable table = (DataTable) event.getSource();
    Map<String, String>  filters = table.getFilters();
    //grab the value from the required map key (somePropertyName if your filterBy 
     looks like filterBy="#{myBean.somePropertyName}") ... 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:12:33.823

我通常做的是使用实际的 DataModel 来提供给 dataTable 组件，而不是使用普通的集合，就像你似乎在做的那样（你没有发布你的 bean 的其余部分）。我扩展了 LazyDataModel 类并覆盖了 load() 方法，其签名是：

```
public List load(int first, int size, String column, SortOrder order, Map<String, String> filter); 
```

在这种情况下，过滤器字段（地图）包含用户在每个过滤器上输入的任何内容。此外，您实际上并不需要过滤器的任何 ajax 侦听器。我在我的项目中使用它，它工作得很好。如果您需要进一步的帮助，请告诉我。

# ruby - 将方法传递给迭代器方法时发生了什么

> ID：13365452
> 
> 赞同：3
> 
> 时间：2012-11-13T17:16:45.510
> 
> 标签：ruby, methods, proc

众所周知，wo 可以通过`&:`前缀将方法传递给迭代器方法。
例如：

```
["a", "b"].map(&:upcase) #=> ["A", "B"] 
def rettwo
  2
end
["a", "b"].map(&:rettwo) #=> [2, 2] 
```

这是问题所在，当我编写一个方法时，将一个带`&:`前缀的方法传递给它，我收到一条错误消息：“ArgumentError: no receiver given”。
让我展示一下代码：

```
def a_simple_method &proc
  puts proc.class # it shows `Proc`
  proc.call
end
def a_iterator_method
  puts yield
end

a_simple_method &:rettwo #=> ArgumentError: no receiver given
a_iterator_method &:rettwo #=> ArgumentError: no receiver given 
```

我错过了什么`map`，Array 的 like 方法如何处理它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:23:47.453

这是有效的。说明如下。

```
class String
  def rettwo
    self + self
  end
end

def a_simple_method &proc
  proc.call('a')
end

def a_iterator_method
  yield 'b'
end

a_simple_method(&:rettwo) # => "aa"
a_iterator_method(&:rettwo) # => "bb" 
```

该`&:`构造称为`Symbol#to_proc`。它将符号变成一个过程。这个过程需要一个接收器作为第一个参数。其余参数用于调用 proc。您没有传递任何参数，因此出现“未给出接收者”错误。

这是其他参数的演示：

```
class String
  def say name
    "#{self} #{name}"
  end
end

def a_simple_method &proc
  proc.call('hello', 'ruby')
end

a_simple_method(&:say) # => "hello ruby" 
```

这是 2008 年的一些博客文章中对 Symbol#to_proc 的定义。现代 Symbol#to_proc 似乎是用 C 实现的，但这仍然有助于理解。

```
class Symbol
  def to_proc
    Proc.new { |*args| args.shift.__send__(self, *args) }
  end
end 
```

# asp.net-mvc-3 - ninject 3 渲染出对象上下文实例

> ID：13365456
> 
> 赞同：0
> 
> 时间：2012-11-13T17:17:04.593
> 
> 标签：asp.net-mvc-3, entity-framework-4, ninject

Entity Framework 4, Ninject 3, MVC3 目前在我的 web 应用程序中，我一直在使用一种相当基本的方法来对对象上下文的每个请求实例化。所以我正在尝试使用 Ninject 和一些旧的示例代码，但我不确定如何进行以下操作。实际上我希望能够在控制器中执行相当于：DB_Entities.Current.Albums ... 我应该每次都实例化一个 StandardKernel？我正在查看的示例使用以下内容： MvcApplication.Container.Get(); 但是在带有 App_Start 连接的 Ninject 3 中，我无权访问 Container..

我尝试复制上述行在运行时失败。

```
using MusicStoreEntities;
using Ninject;
using TestMVC3WithIOC.App_Start;
using System.Data.Objects;

namespace TestMVC3WithIOC.Models
{
    public partial class MusicStoreEntities
    {
        public static MusicStoreEntities Current
        {
        get
        {
            using (IKernel kernel = new StandardKernel())
            {
            return (MusicStoreEntities)kernel.Get<ObjectContext>();
            }
        }
        }
    }
} 
```

另外，请注意，在 App_Start\NinjectWebCommon.cs 我有以下修改：

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<ILogger>().To<NLogger>();
        kernel.Bind<ObjectContext>().To<MusicStoreEntities>().InRequestScope();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:30:08.747

虽然是一个可行的解决方案，但将整个内核传递给一个类似乎是不明智的，因为它往往会掩盖类实际的、特定的依赖关系。更好的方法是将工厂依赖项传递给控制器​​的构造函数。

```
public partial class MusicStoreEntities
{
    private readonly IEntitiesFactory _factory;

    public MusicStoreEntities(IEntitiesFactory factory)
    {
        _factory = factory;
    }
} 
```

`IEntitiesFactory`有一个简单的实现，只有一个方法`GetObjectContext()`。

* * *

（我相信“工作单元”模式目前也很流行，但我不能真正谈论它，因为我没有使用它。也许值得研究。）

# vba - Excel VBA 合并 csv 和总和值

> ID：13365458
> 
> 赞同：1
> 
> 时间：2012-11-13T17:17:17.477
> 
> 标签：vba, excel, merge

我需要合并以下格式的报告列表

*   第 1 列是一个数字
*   第 2 列是一个字符串
*   最大行数是动态的

以将第 1 列中匹配字符串的数字相加的方式（删除重复项）

目前我正在将 csv 文件与此合并

```
Dim files() As String
files = AllFiles(GetFolder) 'returns array of files in folder
Dim i As Long
For i = 0 To UBound(files)
    Windows("Monthly KB Page Access Report Generator.xls").Activate
    ActiveCell.Value = files(i)
    wrkbookvar2 = Dir(files(i))
    ActiveCell.Offset(1, 0).Activate
    Workbooks.Open Filename:=GetFolder & "\" & files(i)
    Set dataset_workbook = ActiveWorkbook
    Range(ActiveCell.SpecialCells(xlLastCell), Cells(1)).Copy
    Windows("Monthly KB Page Access Report Generator.xls").Activate
    Cells(ActiveCell.SpecialCells(xlLastCell).Row, 1).Select
    ActiveSheet.Paste
    dataset_workbook.Close
Next 
```

这与 2 个问题合并

1.  每个报告的第一个单元格被报告文件名覆盖
2.  打开每个文件后，它会提示用户说剪贴板中有大量数据，我想避免这种情况

我认为以下代码可能可以合并我的数据和总和值，但我不能确定，因为由于报告文件名出现，我目前的类型不匹配

```
' Sort
Windows("filename.xls").Activate
Columns("A:B").Sort Key1:=Range("B1"), Order1:=xlAscending

' merge
LastRow = ActiveSheet.UsedRange.Rows.Count
Set r = ActiveSheet.UsedRange.Resize(1)
With Application.WorksheetFunction
     For iRow = 2 To LastRow
        If Cells(iRow, 2) = Cells(iRow + 1, 2) Then
            Cells(iRow, 1) = Cells(iRow, 1) + Cells(iRow + 1, 1)
            Rows(iRow + 1).Delete
        End If
     Next iRow
End With 
```

任何人都介意帮我解决这个问题，我在 VBA 上很糟糕。

更新：第 1 号已通过删除解决

```
Windows("Monthly KB Page Access Report Generator.xls").Activate
ActiveCell.Value = files(i)
wrkbookvar2 = Dir(files(i))
ActiveCell.Offset(1, 0).Activate 
```

它们是我完全没有注意到的旧副本的一部分。

一切正常，除了我需要调整我的“合并”以考虑超过 2 个值的实例，现在它只会合并 2 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:59:44.687

1）添加`ThisWorkbook.Activate`之前`ActiveCell.Value = files(i)`以避免覆盖问题。`ThisWorkbook`总是指运行宏的工作簿。

2) 添加`Application.CutCopyMode = False`before`dataset_workbook.Close`处理剪贴板提示问题。

# python - 在标记内查找短语的正则表达式

> ID：13365460
> 
> 赞同：1
> 
> 时间：2012-11-13T17:17:24.137
> 
> 标签：python, regex

我需要一个正则表达式来`re.findall`返回“$”符号之间的任何内容：

```
Sentence = "The person, $John Doe$, works at $Lan Tech$ as a $Sales Engineer$." 
```

印刷应产生 =

```
['John Doe', 'Lan Tech', 'Sales Engineer'] 
```

注意：如果更容易的话，我可以使用“$”以外的其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:20:10.070

`re.findall()`与捕获组一起使用：

```
re.findall(r'\$([^$]*)\$', Sentence) 
```

例子：

```
>>> Sentence = "The person, $John Doe$, works at $Lan Tech$ as a $Sales Engineer$."
>>> re.findall(r'\$([^$]*)\$', Sentence)
['John Doe', 'Lan Tech', 'Sales Engineer'] 
```

说明：您需要`$`在正则表达式中转义每个，因为未转义在正则表达式中`$`充当字符串锚的结尾。该组是括号内的所有内容，并且`re.findall()`只会返回组的内容（如果有），这就是`$`结果列表中不包含 s 的原因。在组内，`[^$]*`将匹配任意数量的非`$`.

# c# - Excel 互操作 - 创建可见的工作簿，同时保持主要隐藏

> ID：13365466
> 
> 赞同：1
> 
> 时间：2012-11-13T17:17:36.463
> 
> 标签：c#, .net, vb.net, interop

假设我在 WinForms 应用程序中进行了以下设置：

```
Dim ExcelApp As Microsoft.Office.Interop.Excel.Application
Dim ExcelWorkbook As Microsoft.Office.Interop.Excel.Workbook
Dim wksDataVals As Microsoft.Office.Interop.Excel.Worksheet

ExcelApp.Visible = False 
```

基本上，我有一个不可见的 Excel 实例在后台运行，其中打开了一个工作簿，`ExcelWorkbook`名为`wksDataVals`. 并且用户正在通过用户表单操作此工作表（和其他工作表）并查看基于这些操作的一些输出。

现在，在我的表单上，我有一个按钮`Show Excel Sheet`，一旦用户单击它，我想在一个新的独立工作簿中向他们显示 wksDataVals 的副本，同时将原始文件隐藏在后台以进行进一步的数据操作。我相信我需要通过创建一个新的 Excel 实例来做到这一点，因为我想隐藏这个实例。

有没有比这样做更好的方法：

1.  保存工作表
2.  创建 Excel 的新（可见）实例
3.  在该实例中重新打开工作表

（这可能会导致工作表出现问题，因为我希望它在另一个 Excel 实例中保持打开状态，所以现在只能是只读的） - 我知道我可以通过将工作表重新保存为新名称来克服这个问题，但这一切似乎有点矫枉过正。

关于如何以最简单的方式完成此任务的任何想法？- 也许有一种方法可以在内部保存工作簿/工作表并将其提供给新的 Excel 实例，而不是让 Excel 尝试打开保存的工作表？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:42:29.180

作为对我自己问题的回答，以防万一有人遇到同样的问题（请专家，如果你有更好的方法，请告诉我），我最终做的是：

1.  创建一个新的 Excel 实例
2.  在该实例中创建一个空白的新工作簿
3.  从隐藏表中复制我关心的范围
4.  将它（在我的情况下的值和格式是我想要的）粘贴到新工作簿上
5.  使新的 Excel 实例可见
6.  设置对新应用程序实例、工作簿、工作表等的引用 = 无，所以现在它不再连接到我的程序。

似乎做得很好。

# c# - 卸载 appdomain 时出错。（来自 HRESULT 的异常：0x80131015），在 Windows 服务中

> ID：13365467
> 
> 赞同：6
> 
> 时间：2012-11-13T17:17:38.307
> 
> 标签：c#, exception, appdomain

我在 Windows 服务中收到此错误。这与我之前在[此处的问题中讨论过的服务相同](https://stackoverflow.com/questions/13346899/thread-join-appears-to-return-false-incorrectly)

代码被修改为使用`Parallel.ForEach`（我自己的版本，因为这是一个 3.5 windows 服务）。并行使用的原因归结为这样一个事实，即卸载每个域并并行运行它们所花费的时间太长，应该证明会更快（似乎即使只有一个线程在执行每个卸载？！）。

根据其他帖子，我只能猜测这在某种程度上归结于我使用 a`ThreadPool` `Thread`到s`Unload`的事实。`AppDomain`我只是看不到如何避免它？

```
public partial class SomeService : ServiceBase
{
    private Manager _appDomainManager;

    protected override void OnStop()
    {
        _appDomainManager.Dispose();
    }
}

public class Manager : IDisposable
{
    public void Dispose()
    {
        Log.Debug("Disposing");
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (_disposed) return;
        if (disposing)
        {
            // dispose managed resources
            Parallel.For(0, appdomains.Length, UnloadAppDomian);
        }

        _disposed = true;
    }
}

private UnloadAppDomain(int appDomainIndex);

public static class Parallel35
{
    public static void For(int start, int end, Action<int> action)
    {
        var waitHandles = new WaitHandle[end - start];
        for (int j = 0; j < waitHandles.Length; j++)
        {
            waitHandles[j] = new ManualResetEvent(false);
        }

        for (int i = start; i < end; i++)
        {
            int i1 = i - start;
            ThreadPool.QueueUserWorkItem(
                state =>
                {
                    try
                    {
                        action((int) state);
                    }
                    finally
                    {
                        ((ManualResetEvent) waitHandles[i1]).Set();
                    }
                }, i);
        }
        WaitHandle.WaitAll(waitHandles);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:04:06.653

我将此作为错误追踪到`AppDomain`退出等待从未设置的 WaitHandle 的 s 之一。

> 如果线程没有中止，例如因为它正在执行非托管代码，或者因为它正在执行 finally 块，那么在一段时间后，在最初调用 Unload 的线程中会抛出一个 CannotUnloadAppDomainException。

现在`AppDomain`卸载相对较快，我的服务很快停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:59:23.767

尝试在单个后台任务中卸载所有 AppDomain，而不是为每个 AppDomain 一个后台任务，并使用[ServiceBase.RequestAdditionalTime](http://msdn.microsoft.com/en-US/library/system.serviceprocess.servicebase.requestadditionaltime%28v=vs.110%29.aspx)以便 SCM 不会将您的服务标记为无响应。

# forms - CodeIgniter 将变量传递给 Modal，然后传递给 View

> ID：13365470
> 
> 赞同：0
> 
> 时间：2012-11-13T17:17:41.880
> 
> 标签：forms, codeigniter, url, variables

我的数据库中有一个城市列表。有一个编辑按钮，可以打开一个带有表单的模式，他们可以在其中更改城市名称并提交。我很难让 city_id 从编辑按钮通过模态传递到控制器。我在尝试将 city_id 放入表单开放代码的行中收到“city_id 的未定义变量”消息。

在混合中添加模态让我感到困惑。

查看代码

```
<a href="#" class="btn edit-modal" data-id="<?php echo $c['city_id']; ?>"  data-name="<?php echo  $c['city_name']; ?>">Edit</a>

<!-- Modal for Edit -->
<div class="modal hide" id="editCityDialog">
<div class="modal-header">
    <button class="close" data-dismiss="modal">x</button>
    <h3>Edit City</h3>
</div>
<div class="modal-body">
    <?php $this->load->helper('form'); ?>
        <?php echo form_open('/cities/edit_city/'. $city_id); ?>
        <label class="control-label" for="name">City</label>
        <input type="text" name="city_name" id="city_name" value=""/><br />
        <input type="submit" class="btn-small btn-primary" value="Edit City" />
        <button class="btn-small" data-dismiss="modal">Cancel</button>
    <?php echo form_close(); ?>
</div> 
```

```
<!-- jQuery for Modal -->
<script>
  // scripts for modal windows
$(document).on("click", ".edit-modal", function () {
    var city_name = $(this).data('name');
    var city_id = $(this).data('id');
    $(".modal-body #city_name").val( city_name );
    $('#editCityDialog').modal('show');
});
</script> 
```

控制器代码

```
// Edit City
public function edit_city() {
    $id = $this->uri->segment(3);

    if ($this->input->city('submit')) {
        $city_name = $this->input->xss_clean($this->input->city('city_name'));
        $this->cities_model->edit_city($city_id, $city_name);
    }
} 
```

型号代码

```
// Edit City
public function edit_city($city_id, $city_name) {
    $data = array(
        'city_name' => $city_name
    );
    $this->db->where('city_id', $city_id);
    $this->db->update('cities', $data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:04:56.367

您可以使用`city_id`已有的并设置操作：

```
$(document).on("click", ".edit-modal", function () {
    var city_name = $(this).data('name');
    var city_id = $(this).data('id');
    $(".modal-body #city_name").val( city_name );
    //set the forms action to include the city_id
    $(".modal-body form").attr('action','/cities/edit_city/'+city_id);
    $('#editCityDialog').modal('show');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:26:34.027

如果回`<?php echo $c['city_id']; ?>`显适用于编辑按钮，您应该像这样对 form_open 执行此操作

```
<?php echo form_open('/cities/edit_city/'. $c['city_id']); ?> 
```

我还建议，如果您的`edit_city()`函数仅在有 a 时才被调用`segment(3)`，那么这样做会更容易：

```
// Edit City
public function edit_city($id) {

    if ($this->input->city('submit')) {
        $city_name = $this->input->xss_clean($this->input->city('city_name'));
        $this->cities_model->edit_city($city_id, $city_name);
    }
} 
```

# python - Flask 更新 SQLite 记录

> ID：13365471
> 
> 赞同：3
> 
> 时间：2012-11-13T17:17:45.497
> 
> 标签：python, sqlite, http, flask, patch

使用 Flask，我正在尝试实现 HTTP `PATCH`。我正在使用 SQLite。

这是我所拥有的：

```
if 'name' in data.keys():
    db.execute('UPDATE places SET name=%s WHERE id=%s', (str(data['name']), str(data_id))) 
```

这会产生以下错误：`OperationalError: near "%": syntax error`

我的参数化有什么问题？我查了几个看起来很像这样的例子。我尝试在参数括号之前添加一个 % ，但这也失败了。我也尝试使用`+`'s 连接，但这也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:10:41.423

在 SQLite 中，参数占位符不是`%s`but `?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T09:18:32.143

`name='%s'`需要SQL 语法这样的引用

# matlab - 将范数函数应用于矩阵行 - Matlab

> ID：13365474
> 
> 赞同：24
> 
> 时间：2012-11-13T17:18:00.987
> 
> 标签：matlab

我有一个 3 列 n 行矩阵：

```
[ a,b,c;
  d,e,f;
  g,h,i; ] 
```

我想将范数函数应用于每一行，并得到一个`1xn`包含范数的矩阵：

```
[ norm([a,b,c]);
  norm([d,e,f]);
  norm([g,h,i]); ] 
```

我可以用 for 循环来做到这一点，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-13T17:28:28.733

关于什么

```
 norms = sqrt(sum(A.^2,1)) 
```

或者

```
 norms = sqrt(sum(A.^2,2))? 
```

取决于您的坐标是按行还是按列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T10:19:48.333

如果可读性比性能更重要，您还可以考虑：

```
norms = cellfun(@norm,num2cell(A,2)); 
```

此模式也适用于您可能希望在 MATLAB 本身不支持的情况下执行的其他一维操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:40:47.247

如果第一个维度不是太大：

```
norms = sqrt(diag(A * A')); 
```

# wordpress - Wordpress - 从管理面板中删除子菜单

> ID：13365486
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:18:50.923
> 
> 标签：wordpress, tags, portfolio

我正在尝试从我的投资组合菜单中删除“标签”子菜单，这就是我正在使用的：

```
 add_action( 'admin_menu', 'my_remove_menu_pages' );

        function my_remove_menu_pages() {
        if(!current_user_can('create_users')) {
            remove_submenu_page( 'edit.php', 'tags.php' );
            remove_submenu_page( 'edit.php?post_type=portfolio', 'edit-tags.php?taxonomy=post_tag&post_type=portfolio' );
     }
    } 
```

但它根本不会去。这是 var_dump($submenu); 的输出。功能：

Stackoverflow 需要在帖子中添加更多文本 ¬¬ 所以文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本

```
array(12) {
  ["index.php"]=>
  array(1) {
    [0]=>
    array(3) {
      [0]=>
      string(7) "Início"
      [1]=>
      string(4) "read"
      [2]=>
      string(9) "index.php"
    }
  }
  ["edit.php"]=>
  array(4) {
    [5]=>
    array(3) {
      [0]=>
      string(14) "Todos os Posts"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(8) "edit.php"
    }
    [10]=>
    array(3) {
      [0]=>
      string(14) "Adicionar Novo"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(12) "post-new.php"
    }
    [15]=>
    array(3) {
      [0]=>
      string(10) "Categorias"
      [1]=>
      string(17) "manage_categories"
      [2]=>
      string(31) "edit-tags.php?taxonomy=category"
    }
    [16]=>
    array(3) {
      [0]=>
      string(4) "Tags"
      [1]=>
      string(17) "manage_categories"
      [2]=>
      string(31) "edit-tags.php?taxonomy=post_tag"
    }
  }
  ["upload.php"]=>
  array(1) {
    [5]=>
    array(3) {
      [0]=>
      string(10) "Biblioteca"
      [1]=>
      string(12) "upload_files"
      [2]=>
      string(10) "upload.php"
    }
  }
  ["link-manager.php"]=>
  array(3) {
    [5]=>
    array(3) {
      [0]=>
      string(14) "Todos os Links"
      [1]=>
      string(12) "manage_links"
      [2]=>
      string(16) "link-manager.php"
    }
    [10]=>
    array(3) {
      [0]=>
      string(14) "Adicionar novo"
      [1]=>
      string(12) "manage_links"
      [2]=>
      string(12) "link-add.php"
    }
    [15]=>
    array(3) {
      [0]=>
      string(19) "Categorias de Links"
      [1]=>
      string(17) "manage_categories"
      [2]=>
      string(36) "edit-tags.php?taxonomy=link_category"
    }
  }
  ["edit.php?post_type=page"]=>
  array(2) {
    [5]=>
    array(3) {
      [0]=>
      string(17) "Todas as Páginas"
      [1]=>
      string(10) "edit_pages"
      [2]=>
      string(23) "edit.php?post_type=page"
    }
    [10]=>
    array(3) {
      [0]=>
      string(14) "Adicionar Nova"
      [1]=>
      string(10) "edit_pages"
      [2]=>
      string(27) "post-new.php?post_type=page"
    }
  }
  ["edit-comments.php"]=>
  array(1) {
    [0]=>
    array(3) {
      [0]=>
      string(21) "Todos os Comentários"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(17) "edit-comments.php"
    }
  }
  ["edit.php?post_type=portfolio"]=>
  array(4) {
    [5]=>
    array(3) {
      [0]=>
      string(9) "Portfolio"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(28) "edit.php?post_type=portfolio"
    }
    [10]=>
    array(3) {
      [0]=>
      string(14) "Adicionar Novo"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(32) "post-new.php?post_type=portfolio"
    }
    [15]=>
    array(3) {
      [0]=>
      string(4) "Tags"
      [1]=>
      string(17) "manage_categories"
      [2]=>
      string(55) "edit-tags.php?taxonomy=post_tag&amp;post_type=portfolio"
    }
    [16]=>
    array(3) {
      [0]=>
      string(23) "Categorias de Portfolio"
      [1]=>
      string(17) "manage_categories"
      [2]=>
      string(65) "edit-tags.php?taxonomy=portfolio_category&amp;post_type=portfolio"
    }
  }
  ["edit.php?post_type=slideshow"]=>
  array(2) {
    [5]=>
    array(3) {
      [0]=>
      string(7) "Banners"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(28) "edit.php?post_type=slideshow"
    }
    [10]=>
    array(3) {
      [0]=>
      string(14) "Adicionar Novo"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(32) "post-new.php?post_type=slideshow"
    }
  }
  ["themes.php"]=>
  array(1) {
    [10]=>
    array(3) {
      [0]=>
      string(5) "Menus"
      [1]=>
      string(18) "edit_theme_options"
      [2]=>
      string(13) "nav-menus.php"
    }
  }
  ["profile.php"]=>
  array(1) {
    [5]=>
    array(3) {
      [0]=>
      string(10) "Seu perfil"
      [1]=>
      string(4) "read"
      [2]=>
      string(11) "profile.php"
    }
  }
  ["tools.php"]=>
  array(1) {
    [5]=>
    array(3) {
      [0]=>
      string(12) "Disponíveis"
      [1]=>
      string(10) "edit_posts"
      [2]=>
      string(9) "tools.php"
    }
  }
  ["options-general.php"]=>
  array(1) {
    [0]=>
    array(4) {
      [0]=>
      string(16) "Support settings"
      [1]=>
      int(1)
      [2]=>
      string(16) "support_settings"
      [3]=>
      string(16) "Support settings"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:50:30.790

[Codex 页面`remove_submenu_page`](http://codex.wordpress.org/Function_Reference/remove_submenu_page)上的示例将可选的第三个参数设置[`add_action`](http://codex.wordpress.org/Function_Reference/add_action)为`999`“优先级”。

我不确定将其添加到您的代码中是否会使其正常工作，但值得一试。

```
<?php

add_action( 'admin_menu', 'adjust_the_wp_menu', 999 );
function adjust_the_wp_menu() {
  $page = remove_submenu_page( 'themes.php', 'widgets.php' );
}

?> 
```

# c++ - 用于从 cmd 运行参数中获取值的库或片段

> ID：13365487
> 
> 赞同：0
> 
> 时间：2012-11-13T17:18:52.560
> 
> 标签：c++, command-line-arguments

我正在寻找小型库或片段，它可以简单地用命令行中给出的参数填充我的程序（c++ with qt）变量。你有什么建议吗？

例如。`string myVariable = libraryFunction("something");`. 函数在参数列表中搜索“-something”键并将其值发送到我的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:21:45.160

查看[Boost Program_options](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options.html)。您还提到了 QT，所以[这个 SO 答案](https://stackoverflow.com/questions/2918353/obtaining-command-line-arguments-in-a-qt-application)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:32:19.267

我认为其他人建议使用 Boost 程序选项可能是正确的选择。

然而，一些替代方案：

[命令行选项解析器 - Glib](http://developer.gnome.org/glib/2.33/glib-Commandline-option-parser.html)

[TCLAP 模板化 C++ 命令行解析器库](http://tclap.sourceforge.net/)

# powershell - Active Directory / Powershell - 如何识别联合集群中的服务器是否已关闭

> ID：13365492
> 
> 赞同：1
> 
> 时间：2012-11-13T17:19:12.010
> 
> 标签：powershell, active-directory, powershell-2.0, directoryservices

这个问题是在 DC 服务器上运行（或远程访问 DC）的服务的上下文中，以便该服务可以访问 Active Directory，但该服务不知道 Active Directory 服务器，应该有多少台服务器是，服务器地址是什么，等等......

此外，必须在 Active Directory 设置可能涉及一组联合服务器的假设下编写服务。

因此，通过一个例子来说明这个问题 -

假设我正在尝试通过 Powershell v2（或者您可以使用目录服务）运行一个非常简单的 AD 查询，以获取所有 ADUser：

$users = 获取 ADUser

现在让我们假设示例公司 Contoso 在纽约（用于他们的纽约办公室）和西雅图（用于他们的西雅图办公室）有一个 AD 服务器。此外，该服务将指向作为纽约数据中心服务器的 DC。

因此，为了简单起见，假设 $users 返回两个用户对象，其显示名称属性为：

丹跳吉姆威尔逊

现在让我们假设西雅图服务器已关闭，所以我再次运行查询并得到：

丹跳

据我了解-AD 不会返回指示西雅图服务器已关闭的错误..它只会返回它可以找到的用户..

我知道可以检测到已删除的对象，因此，如果我保存了所有用户的列表，我可能会验证用户是否已被删除……但这有点开销，特别是如果我对列表感兴趣的不仅仅是列表的用户

那么有没有办法在我运行查询之前检测到联合集群中的一个或多个 AD 服务器已关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:13:40.360

在使用以下任何内容之前，您可能想阅读[此内容。](http://technet.microsoft.com/en-us/library/cc755809.aspx)S.DS 和 S.DS.AD 抽象了很多发生的事情，但其中有很多有用的信息，它可能会帮助您澄清您的要求。

我不知道有一个函数可以返回关闭的 DC，但[System.DirectoryServices.ActiveDirectory](http://msdn.microsoft.com/en-us/library/wwzcae1f.aspx)命名空间包含您需要确定域拓扑的类。例如，[Forest](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.forest.aspx)类将返回[Domain](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domain.aspx)对象（以及[Site](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.activedirectorysite.aspx)和许多其他有用的属性）的集合。 [Domain](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domain.aspx)将允许您访问[DomainController](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domaincontroller.aspx)对象的集合（以及[子](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domain.children.aspx)域和父域以及许多其他道具和方法）。

您可以遍历域以获取所有 DC，然后遍历 DC 并尝试 ping，尽管这可能不适用于安全且分段的网络。您可能会考虑尝试使用 S.DS.DirectoryEntry 连接到每个 DC，因为这在任何情况下都可以从 DC 工作。当然，如果您的网络人员对他们的锁定过于热心，那么即使这样也可能行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:37:57.147

这听起来像是[www.serverfault.com的优秀人士的工作](http://www.serverfault.com)

我看不出这是程序员特有的吗？这听起来像网络故障排除？无论如何...

IMO，这取决于您的联合服务器所在的位置。他们在云端吗？它们是虚拟的吗？如果是这样，通过对服务器平台的简单 API 调用，很容易检测到它们何时出现故障。

或者您可以尝试实现服务器 ping 机制，例如本网站上的[示例](http://www.simple-talk.com/sql/database-administration/let-powershell-do-an-inventory-of-your-servers/)：

```
$servers = Get-Content 'servers.txt'
ForEach-Object ($server in $servers) {
   # Ping the machine to see if it's on the network
   $results = Get-WMIObject -query "select StatusCode from
Win32_PingStatus where Address = '$server'"
   $responds = $false  
   ForEach-Object ($result in $results) {
      # If the machine responds break out of the result loop and indicate success
      if ($result.statuscode -eq 0) {
         $responds = $true
         break
      }
   }
         If ($responds) {
      # Gather info from the server because it responds
      Write-Output "$server responds"
   } else {
      # Let the user know we couldn't connect to the server
      Write-Output "$server does not respond"
   }
} 
```

** 这假设您的服务器是“可ping 通的”。

您可能还可以在这里使用 MS Technet 上的**AD-GetComputer cmdlet** [。](http://technet.microsoft.com/en-us/library/ee617192.aspx)

> Get-ADComputer cmdlet 获取计算机或执行搜索以检索多台计算机。
> 
> Identity 参数指定要检索的 Active Directory 计算机。您可以通过可分辨名称 (DN)、GUID、安全标识符 (SID) 或安全帐户管理器 (SAM) 帐户名称来识别计算机。您还可以将参数设置为计算机对象变量，例如 $ 或通过管道将计算机对象传递给 Identity 参数。
> 
> 要搜索和检索多台计算机，请使用 Filter 或 LDAPFilter 参数。Filter 参数使用 PowerShell 表达式语言为 Active Directory 编写查询字符串。PowerShell 表达式语言语法为 Filter 参数接收的值类型提供丰富的类型转换支持。有关 Filter 参数语法的详细信息，请参阅 about_ActiveDirectory_Filter。如果您有现有的 LDAP 查询字符串，则可以使用 LDAPFilter 参数。
> 
> 此 cmdlet 检索一组默认的计算机对象属性。要检索其他属性，请使用 Properties 参数。有关如何确定计算机对象属性的详细信息，请参阅属性参数说明。

# sugarcrm - 如何修复帐户、联系人和潜在客户中的 propect_lists 子面板？

> ID：13365495
> 
> 赞同：0
> 
> 时间：2012-11-13T17:19:40.390
> 
> 标签：sugarcrm

Robert Lausegger ( [iscon group](http://iscon.at/index.php/docman/cat_view/12-verschiedenes) ) 的描述使得在其他模块的子面板中显示潜在客户列表成为可能。[但自从 SugarCRM 6.3 以来，这不再起作用了。](https://plus.google.com/u/0/111259540860581794293/posts/GwZowKcKv8n)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T16:23:40.810

上述链接中引用的站点是德语的，因此，由该站点的作者、德国 iscon 集团 (www.iscongroup.net) 的 Robert Laussegger 提供，这里是该方法的英文版本。我在带有 CentOS 6.4 基础的 LAMP 堆栈上运行的 SugarCRM CE v 6.5 上使用了它，它运行良好。根据您的安装进行调整。

给出的示例显示了如何将目标列表（在 SugarCRM 内部称为潜在客户列表）添加到联系人详细信息视图；调整潜在客户的设置，...

如果显示的目录不存在，请创建它们，注意不仅要匹配拼写而且要匹配大小写。您将在 3 个单独的目录中添加 3 个文件。

请记住设置文件权限和所有者/组以允许服务器访问创建的文件。

完成添加文件和设置权限后，作为 CRM 管理员，运行：Admin -> Repair -> Rebuild Relations (to flush cache) Admin -> Repair -> Quick Repair and Rebuild

在显示的目录中创建以下文件：

在 /var/www/html//custom/Extension/modules/Contacts/Ext/Language -创建文件 en_us.prospectlist_in_contacts_language.php 并放入文件中（文件名“prospectlist_in_contacts_language”的部分可以是任何你想要的，只要当您使用前缀“en_us.”（用于美国英语）和后缀“.php”）

```
<?php
$mod_strings['LBL_PROSPECTLISTS_CONTACTS_FROM_PROSPECTLISTS_TITLE'] = 'Target Lists';
?> 
```

在/var/www/html//custom/Extension/modules/Contacts/Ext/Layoutdefs 创建文件prospectlist_in_contacts_layoutdef.php 并放入文件中（文件名“prospectlist_in_contacts_layoutdef”的部分可以是任何你想要的，只要你使用后缀“.php”）

```
<?php 
$layout_defs["Contacts"]["subpanel_setup"]["prospect_list_contacts"] = array ( 
'order' => 100, 
'module' => 'ProspectLists', 
'subpanel_name' => 'default', 
'sort_order' => 'asc', 
'sort_by' => 'id', 
'title_key' => 'LBL_PROSPECTLISTS_CONTACTS_FROM_PROSPECTLISTS_TITLE', 
'get_subpanel_data' => 'prospect_list_contacts', 
'top_buttons' => 
array ( 
0 => 
array ( 
'widget_class' => 'SubPanelTopButtonQuickCreate', 
), 
1 => 
array ( 
'widget_class' => 'SubPanelTopSelectButton', 
'mode' => 'MultiSelect', 
), 
), 
);
?> 
```

在/var/www/html//custom/Extension/modules/Contacts/Ext/Vardefs 创建文件prospectlist_in_contacts_vardef.php 并放入文件中（文件名“prospectlist_in_contacts_vardef”的部分可以是任何你想要的，只要你使用后缀“.php”）

```
<?php 
$dictionary["Contact"]["fields"]["prospect_list_contacts"] = array ( 
'name' => 'prospect_list_contacts', 
'type' => 'link', 
'relationship' => 'prospect_list_contacts', 
'source' => 'non-db', 
'vname' => 'LBL_PROSPECTLISTS_CONTACTS_FROM_PROSPECTLISTS_TITLE', 
);
$dictionary["Contact"]["fields"]["prospect_list_name"] = array (

'name' => 'prospect_list_name',
'rname' => 'name',
'id_name' => 'prospect_list_id',
'vname' => 'LBL_PROSPECTLISTS_CONTACTS_FROM_PROSPECTLISTS_TITLE',
'type' => 'relate',
'link' => 'prospect_lists',
'table' => 'prospect_lists',
'isnull' => 'true',
'module' => 'ProspectLists',
'dbType' => 'char',
'len' => '255',
'source' => 'non-db',
);
?> 
```

重置所有者/权限

以 CRM 管理员身份运行 Admin -> Repair -> Rebuild Relations (to flush cache) Admin -> Repair -> Quick Repair and Rebuild

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:21:42.757

`vardefs`必须更改为：

```
$dictionary["Lead"]["fields"]["prospect_lists"] = array(
  'name' => 'prospect_lists', 
```

和`layoutdefs`

```
'get_subpanel_data' => 'prospect_lists', 
```

这解决了问题。

# java - 错误：无法找到或加载主类

> ID：13365496
> 
> 赞同：0
> 
> 时间：2012-11-13T17:19:42.043
> 
> 标签：java, main

我在运行以下代码时遇到问题，它说`Error: Could not find or load main class`但我显然在代码中有一个主...

```
 package abc;

import java.io.IOException;
import javax.swing.JOptionPane;

// As its name implies, this is what is driving the program, asking for input, giving output, etc.
public class driver
{
    @SuppressWarnings("unused")
    public static void main(String args[]) throws IOException // a main that throws an exception... hmmm... yes it's odd, but apparently not illegal
    {
        ....}

    private static void processTransaction(String trans, Customer[] customers) throws IOException // this is the function that processes the given transaction
    {
        ...
}

// An object representing a person who may have one or more bank accounts
class Customer
{
    ...
}

class BankAccount 
{
    ...
}

class CheckingAccount extends BankAccount // extends BankAccount with added functionality
{
    ...
}

class SavingsAccount extends BankAccount // extends BankAccount with added functionality
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:23:29.477

尝试将您的类访问说明符公开

```
public class driver 
```

# mysql - MySQL 用 group by 显示缺失的日期

> ID：13365498
> 
> 赞同：1
> 
> 时间：2012-11-13T17:19:49.243
> 
> 标签：mysql

> **可能重复：**
> [MySQL 如何在范围内填充缺失的日期？](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)

我有一张表，其中一列是时间戳。我想要每天点击计数的结果（1hit = 1row）

我的实际请求如下所示：

```
SELECT 
count(id) as count, 
date(FROM_UNIXTIME(`time`)) as completedate 
FROM `logs` 
group by date(FROM_UNIXTIME(`time`))
order by completedate DESC 
Limit 0,20 
```

这给了我这个结果：

```
count   completedate
1       2012-11-13
1       2012-11-12
56      2012-11-11
18      2012-11-09 
```

现在我想缺少：

```
count    completedate
0        2012-11-10 
```

在它里面，这可能吗？

# string - 如何将子功能应用于数据框？

> ID：13365500
> 
> 赞同：2
> 
> 时间：2012-11-13T17:19:56.913
> 
> 标签：string, r, lapply

我有一个包含字符串列表的数据框

```
 df$a
=========
"4343-2"
"7889-5"
"4-3456"
"334-45"
"8765-4" 
```

我想对列表执行字符串操作以删除破折号，所以我这样做了..

```
df$a <- lapply(df$a, sub, "-","", df$a) 
```

..它只产生一组完全空的字符串。我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:23:42.837

你可以直接使用`sub`。

```
df$a <- sub('-', '', df$a) 
```

`lapply`因为 sub 是“矢量化的”，而不是你正在做的复杂的事情。`gsub`如果您认为每个条目可能有多个破折号，也可以使用。

# python - 如何在 Django 中按 id 分组和按计数排序

> ID：13365502
> 
> 赞同：1
> 
> 时间：2012-11-13T17:20:08.887
> 
> 标签：python, mysql, sql, django

我无法转换编写正确的 Python 脚本来完成我可以完成的工作`MYSQL`

下面是完成我想要的 SQL 查询。`python`我在`GROUP BY`声明中被绊倒的地方。

```
SELECT COUNT(story_id) AS theCount, `headline`, `url` from tracking
GROUP BY `story_id`
ORDER BY theCount DESC
LIMIT 20 
```

这是我`python`到目前为止所拥有的。这可以很好地查询所有文章，但它缺少任何类型的`groupby()`或`order_by()`基于`COUNT`.

```
articles = ArticleTracking.objects.all().filter(date__range=(start_date, end_date))[:20]

article_info = []    
for article in articles:
    this_value = {
        "story_id":article.story_id,
        "url":article.url,
        "headline":article.headline,
        }

    article_info.append(this_value) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T02:22:49.910

正确的方法是使用聚合。

```
articles = ArticleTracking.objects.filter(date__range=(start_date, end_date))
articles = articles.values('story_id', 'url', 'headline').annotate(count = Count('story_id')).order_by('-count')[:20] 
```

还要浏览 Django 中的聚合文档。

[https://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:43:24.660

不要在家里尝试这个。

您可以像这样将 group_by 子句添加到查询集中：

```
qs = ArticleTracking.objects.all().filter(date__range=(start_date, end_date))
qs.query.group_by = ['story_id']
articles = qs[:20] 
```

这不是公共 api 的一部分，因此它可能会发生变化，并且根据您使用的特定数据库后端，它可能会以不同的方式工作（或不可用）。值得一提的是，我不确定在过滤器之前或之后应用 group_by 子句是否有任何区别。不过，我已经通过 MySQL 后端取得了成功。

# performance - 使用 Haskell 在功能上将数据集相互比较一次

> ID：13365503
> 
> 赞同：6
> 
> 时间：2012-11-13T17:20:10.500
> 
> 标签：performance, haskell, functional-programming, dataset, comparison

经过一年多的心理争论，我终于对 Haskell 有了足够的了解，可以将它视为满足我大部分一般编程需求的主要语言。我非常喜欢它。

但是我仍然在努力以一种功能性的方式进行非常具体的操作。

一个简化的例子：

```
Set = [("Bob", 10), ("Megan", 7), ("Frank", 2), ("Jane", 11)] 
```

我想将这些条目相互比较。对于像 C 或 Python 这样的语言，我可能会创建一些复杂的循环，但我不确定哪种方法（映射、折叠、列表理解？）对于函数式语言来说是最好的或最有效的。

这是我开始处理的代码示例：

```
run xs = [ someAlgorithm (snd x) (snd y) | x <- xs, y <- xs, x /= y ] 
```

谓词阻止列表推导式将条目与其自身进行比较，但该函数效率不高，因为它比较已经比较过的条目。例如。它会将 Bob 与 Megan 进行比较，然后将 Megan 与 Bob 进行比较。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T17:38:52.637

如果你对你的数据类型有一个排序，你可以使用`x < y`代替`x /= y`.

另一种方法是用来`tails`避免比较相同位置的元素：

```
[ ... | (x:ys) <- tails xs, y <- ys] 
```

这具有仅挑选原始列表中`y`之后出现的项目的效果。`x`如果您的列表包含重复项，您需要将其与之前的显式过滤相结合。

# apache - Xampp/Mac - 使 JPEG 文件可通过 HTTP 访问

> ID：13365509
> 
> 赞同：0
> 
> 时间：2012-11-13T17:20:32.947
> 
> 标签：apache, xampp

我设置了一个虚拟目录：

```
<Directory "/Applications/XAMPP/branding">
    Options None
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

定义了别名：

```
Alias /branding "/Applications/XAMPP/branding" 
```

我在该文件夹中放置了一个 jpeg 文件并尝试通过以下方式访问它：

```
http://127.0.0.1/branding/image.jpeg 
```

我收到一个身份验证错误：

```
Access forbidden!

You don't have permission to access the requested object. It is either read-protected or not readable by the server.

If you think this is a server error, please contact the webmaster.

Error 403

127.0.0.1
Tue Nov 13 12:15:14 2012
Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 
```

进行更改后，我重新启动了 Web 服务器。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:25:39.990

该文件是否具有对运行 Apache 的用户可见的权限？

如果你执行“ls -lah”，你的输出是什么？

# c# - 如何忽略异常

> ID：13365513
> 
> 赞同：1
> 
> 时间：2012-11-13T17:20:51.713
> 
> 标签：c#, exception, kinect, kinect-sdk

我正在用 C# 编写一个 kinect 应用程序，我有这个代码

```
try             //start of kinect code
{
    _nui = new Runtime();
    _nui.Initialize(RuntimeOptions.UseSkeletalTracking | RuntimeOptions.UseDepthAndPlayerIndex | RuntimeOptions.UseColor);

    // hook up our events for video
    _nui.DepthFrameReady += _nui_DepthFrameReady;
    _nui.VideoFrameReady += _nui_VideoFrameReady;

    // hook up our events for skeleton
    _nui.SkeletonFrameReady += new EventHandler<SkeletonFrameReadyEventArgs>(_nui_SkeletonFrameReady);

    // open the video stream at the proper resolution
    _nui.DepthStream.Open(ImageStreamType.Depth, 2, ImageResolution.Resolution320x240, ImageType.DepthAndPlayerIndex);
    _nui.VideoStream.Open(ImageStreamType.Video, 2, ImageResolution.Resolution640x480, ImageType.Color);

    // parameters used to smooth the skeleton data
    _nui.SkeletonEngine.TransformSmooth = true;
    TransformSmoothParameters parameters = new TransformSmoothParameters();
    parameters.Smoothing = 0.8f;
    parameters.Correction = 0.2f;
    parameters.Prediction = 0.2f;
    parameters.JitterRadius = 0.07f;
    parameters.MaxDeviationRadius = 0.4f;
    _nui.SkeletonEngine.SmoothParameters = parameters;

    //set camera angle
    _nui.NuiCamera.ElevationAngle = 17;
}
catch (System.Runtime.InteropServices.COMException)
{
    MessageBox.Show("Could not initialize Kinect device.\nExiting application.");
    _nui = null;

} 
```

我正在寻找一种方法，让我的应用程序在 kinect 未连接时不会崩溃（要忽略的异常）。[我在这里](https://stackoverflow.com/questions/13360443/checking-if-kinect-is-connected-or-not)创建了另一个问题，但解决方案无法应用于我的场合，因为我被迫使用过时的 sdk，没有人能解决这个问题，所以我尝试使用不同的方法。如何忽略此异常？（之后我可以自己撤销对 _nui 所做的更改）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:28:21.323

目前，您正在捕获所有 ComExceptions。如果要捕获其他异常，则需要为每个异常提供特定类型。

您可以在 catch 块之后添加异常类型，如下所示：

```
 catch (System.Runtime.InteropServices.COMException)
    {
        MessageBox.Show("Could not initialize Kinect device.\nExiting application.");
        _nui = null;

    } catch (Exception ex) //this will catch generic exceptions.
    {

    } 
```

如果你希望你的代码在 catch 之后执行，无论如何。你也可以尝试使用[finally](http://msdn.microsoft.com/en-us/library/zwc8s4fz%28v=vs.80%29.aspx)

像这样

```
try
{
  //logic
}
finally
{
  //logic. This will be executed and then the exception will be catched
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:27:45.457

如果您想忽略所有异常：

```
try 
{
// your code... 
} 
catch (Exception E)
{ 
// whatever you need to do...
}; 
```

以上是一个包罗万象的内容（尽管某些异常不能像 Stackoverflow 那样被捕获）。

**评论**

**你不应该使用上面的......你应该找出抛出了什么样的异常并抓住它！**

# iphone - 在设备上测试时发出 SIGABRT 信号，它适用于模拟器。简单的代码

> ID：13365514
> 
> 赞同：2
> 
> 时间：2012-11-13T17:21:00.930
> 
> 标签：iphone, ios, xcode, ipad, xcode4

我没有编程经验。

我正在尝试做一个简单的 iOS 应用程序（只是为了尝试一些教程），它可以作为“sendmail”使用

简单的界面，只有 1 个按钮，当按下时，它会打开 MFMailComposeViewController 窗口。

这就是代码。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <MessageUI/MFMailComposeViewController.h>
#import <MessageUI/MessageUI.h>

@interface ViewController : UIViewController <MFMailComposeViewControllerDelegate>

-(IBAction)showPicker:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(IBAction)showPicker:(id)sender
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;
    NSArray *toRecipients = [NSArray arrayWithObject:@"example@example.com"];
    [picker setToRecipients:toRecipients];
    [picker setSubject:@"TEST SUBJECT"];
    [self presentViewController:picker animated:YES completion:nil];
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

在 iPhone 和 iPad 模拟器上，它就像一个魅力。但是在设备上对其进行测试时，它会崩溃并给出信号 SIGABRT 并显示 main.m 的一部分作为证据：

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

附近有“线程 1 - 信号 SIGABRT”。

任何提示？

提前感谢大家。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T17:33:34.133

在 showPicker 的开头：添加：

```
if [MFMailComposeViewController canSendMail]
{
  // Your code
}
else
  NSLog(@"No mail account configured on device or not supported"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T17:26:26.960

有两件事要尝试：

1.  清理文件 < `SHIFT+CMD+K`>

2.  从您的设备中卸载文件并尝试使用已清理的文件

# c# - 从两个数据表比较返回数据表/列值

> ID：13365515
> 
> 赞同：0
> 
> 时间：2012-11-13T17:21:00.637
> 
> 标签：c#

我的数据表 1 (dtOutput) 格式`(termid,faultid,faultdesc,faulttime,devicetype)`

我的数据表 2 (dtOpenEvent) 格式`(termid,faultid)`

我想检索 Datatable 2 中存在但 Datatable 1 中不存在的那些值...基于两列`(termid,faultid)`没有表具有主键。

我在网上搜索并找到返回两个数据表之间差异的代码......

**现在我如何从中检索列值？在另一个数据表或字符串变量中**

代码 ：-

```
DataTable dtOpenEvent;
dtOpenEvent = Generix.getOpenEvents(ref Connection);
DataTable dtOutput;
dtOutput = Generix.getFeedData(ref Connection);
var matched = from table1 in dtOpenEvent.AsEnumerable()
              join table2 in dtOutput.AsEnumerable() on table1.Field<string>("ATM") equals table2.Field<string>("termid")
              where table1.Field<int>("Event") == table2.Field<int>("faultid") 
              select table1;
var missing = from table1 in dtOpenEvent.AsEnumerable()
              where !matched.Contains(table1)
              select table1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:47:38.223

您可以删除 dt1 中的所有列，然后执行 except。

像这样：
`var diff =dt2.AsEnumerable().Except(dt1.AsEnumerable(), DataRowComparer.Default);`

完整示例：

```
 DataTable dt1 = new DataTable();
            DataTable dt2 = new DataTable();

            dt1.Columns.Add("termid", typeof(Int32));
            dt1.Columns.Add("faultid", typeof(Int32));
            dt1.Columns.Add("faultdesc");
            dt2.Columns.Add("termid", typeof(Int32));
            dt2.Columns.Add("faultid", typeof(Int32));

            dt1.Rows.Add(1,2,"desc");
            dt1.Rows.Add(3, 4, "desc");
            dt1.Rows.Add(5, 6, "desc");
            dt2.Rows.Add(1, 2);
            dt2.Rows.Add(3, 4);
            dt2.Rows.Add(7, 8);

            dt1.Columns.Remove("faultdesc");
            var diff =dt2.AsEnumerable().Except(dt1.AsEnumerable(), DataRowComparer.Default);

            foreach (var row in diff)
            {
                Console.WriteLine(row["termid"] + " " + row["faultid"]); //prints 7 8
            } 
```

或者您可以通过 linq 或 dataview 选择它们而不是删除列，如下所示：

```
 var view = new DataView(dt1);
        DataTable dt3 = view.ToTable(true, "termid", "faultid"); 
```

修改示例：

```
 DataTable dt1 = new DataTable();
            DataTable dt2 = new DataTable();

            dt1.Columns.Add("termid", typeof(Int32));
            dt1.Columns.Add("faultid", typeof(Int32));
            dt1.Columns.Add("faultdesc");
            dt2.Columns.Add("termid", typeof(Int32));
            dt2.Columns.Add("faultid", typeof(Int32));

            dt1.Rows.Add(1,2,"desc");
            dt1.Rows.Add(3, 4, "desc");
            dt1.Rows.Add(5, 6, "desc");
            dt2.Rows.Add(1, 2);
            dt2.Rows.Add(3, 4);
            dt2.Rows.Add(7, 8);

            var view = new DataView(dt1);
            DataTable dt3 = view.ToTable(true, "termid", "faultid");
            var diff =dt2.AsEnumerable().Except(dt3.AsEnumerable(), DataRowComparer.Default);

            foreach (var row in diff)
            {
                Console.WriteLine(row["termid"] + " " + row["faultid"]);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:50:36.420

```
As you said : I want to retrieve those values which are present in Datatable 2
but not in Datatable 1...based on two columns `(termid,faultid)` 
```

*根据问题的上下文*翻译*`dtOutput`：你有两个表和`dtOpenEvent`。您希望在第三个表中获取 的值，`dtOutput`以使第三个表中的任何行都没有与 的任何行的前两个单元格具有相同的值`dtOpenEvent`。那么这里就是*

 *```
DataTable dt3 = new DataTable();
dt3.Columns.Add("termid");
dt3.Columns.Add("faultid");
int nr = 0;
for (int i = 0; i < dtOutput.Rows.Count; i++)
{
    bool found = false;
    for (int j = 0; j < dtOpenEvent.Rows.Count; j++)
    {
        if (dtOutput.Rows[i][0] == dtOpenEvent.Rows[j][0] 
            && dtOutput.Rows[i][1] == dtOpenEvent.Rows[j][1])
        {
            found = true;
            break;
        }
    }
    if (!found)
    {
        dt3.Rows.Add(dt3.NewRow());
        dt3.Rows[nr][0] = dtOutput.Rows[i][0];
        dt3.Rows[nr][1] = dtOutput.Rows[i][1];
        nr++;
    }
} 
```*

# python - API 设计 - JSON 或 URL 参数？

> ID：13365521
> 
> 赞同：1
> 
> 时间：2012-11-13T17:21:18.873
> 
> 标签：python, api, flask

我刚刚开始学习如何设计/编写 RESTful API。我有一个普遍的问题：

假设我有某种简单的 SQL 数据库，并且我正在编写一个 API，它允许创建新记录、查看记录、删除记录或更新记录。

假设我想删除一条记录，通常是在 URL 中传入记录的 ID 更好，例如，`/api/delete_record?id=10`还是最好执行以下操作：

`/api/record`并让它接受`GET`、和`POST`，并且数据通过请求中的 JSON 正文进行处理。`PATCH``DELETE`

我在 Python 中使用 Flask 编写了一个小型 API，而我只有一个 URL：`/record`它接受上述所有 HTTP 方法。它查看请求中的方法，并相应地期望 JSON 中的请求正文。这被认为是好的还是坏的做法？

任何建议将不胜感激。请注意，我对这一切还是很陌生。我以前使用过 API，但从未开发过任何 API。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:27:46.017

删除资源的正确 RESTful 方式是发送 DELETE 请求，并将范围信息放在 URI（而不是正文）中，例如`/api/records?id=10`or `/api/records/10`。方法信息应该在 HTTP 方法中，而不是 URI。

我建议您阅读“RESTful Web 服务”以了解 API 设计的最佳实践。

# ruby - 为什么使用 ruby eval 执行包含函数调用的字符串失败

> ID：13365534
> 
> 赞同：0
> 
> 时间：2012-11-13T17:21:47.203
> 
> 标签：ruby

我对 Ruby 很陌生，所以我希望这个问题还没有在其他地方得到回答。但是我在这里和互联网上搜索了很长时间，但还没有结果。

我正在从文本文件中读取一堆文件路径。每个文件路径都有一些嵌入到字符串中的表达式（即 #{...} ）。例如：

```
input = 'E:/files/storage/#{high_or_low}/#{left_or_right}/*.dll' 
```

无论如何，我想评估这些字符串，就好像它们是 ruby​​ 代码一样，并替换这些表达式。例如：

```
def high_or_low
    'low'
end

def left_or_right
    'left'
end

# It represents a file path on the disk drive
input = 'E:/files/storage/#{high_or_low}/#{left_or_right}/*.dll'
puts input

# Now how do I execute this 'input' string so that it behaves as if it was defined with quotes?
result = eval input
puts result 
```

我故意在原始输入字符串周围加上单引号，以表明当字符串从磁盘中取出时，嵌入在字符串中的表达式是不求值的。那么如何使用这些表达式评估字符串呢？如上所示使用 eval 似乎不起作用。我收到此错误：

```
test_eval.rb:15: compile error (SyntaxError)
test_eval.rb:15: syntax error, unexpected tIDENTIFIER, expecting $end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:35:06.967

pst 指出了它失败的原因。作为替代方案，这可能会或可能不会工作，具体取决于您的数据的样子......但如果它是带有方法名称的简单字符串（特别是不包含嵌套的“}”......

```
result = input.gsub(/\#{(.*?)}/) {|s| send($1)}
puts result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:04:11.547

啊找到了。pst 让我朝着正确的方向开始。因此，一旦我将输入变量用这样的引号括起来，它就起作用了：

```
result = eval '"' + input + '"'
puts result 
```

=> E:/files/storage/low/left/*.dll

# javascript - 带有单选按钮和复选框的 Acrobat JavaScript 计算

> ID：13365535
> 
> 赞同：2
> 
> 时间：2012-11-13T17:21:51.040
> 
> 标签：javascript, pdf, conditional, acrobat

我正在尝试为我设计的保险销售表格编写 Javascript 计算。我对 JS 很陌生，无法让脚本正常工作。如果您能帮助指出我所缺少的，我将不胜感激！非常感谢。

该脚本旨在根据两个复选框 (vars cb1 & cb2)、一对指示投保车辆是短途旅行还是长途旅行的单选按钮 (var haul) 以及投保车辆的数量 (vars Trucks_num、cars_num、pvthire_num、bus_num、trailers_num）。

最后，我希望溢价（var premium）显示在“totalpremium”字段中。

我真的很感谢你的帮助！

谢谢 ：）。

```
var cb1 = this.getField("cbexcellent");
var cb2 = this.getField("cbsatisfactory");

var haul = this.getField("haul");

var premium = this.getField("totalpremium");
var trucks_num = this.getField("over4.5t_num").value;
var cars_num = this.getField("cars_num").value;
var pvthire_num = this.getField("pvthire_num").value;
var buses_num = this.getField("buses_num").value;
var trailers_num = this.getField("trailers_num").value;

if((cb1 == "1") && (cb2 == "0") && (haul.valueAsString == "short")) {
var premium = (trucks_num.value * 150) + (cars_num.value * 100) + (pvthire_num.value * 250) + (buses_num.value * 150) + (trailers_num.value * 50);
}

if((cb1 == "0") && (cb2 == "1") && (haul.valueAsString == "short")) {
var premium = (trucks_num.value * 190) + (cars_num.value * 100) + (pvthire_num.value * 250) + (buses_num.value * 150) + (trailers_num.value * 50);
}

if((cb1 == "1") && (cb2 == "0") && (haul.valueAsString == "long")) {
var premium = (trucks_num.value * 190) + (cars_num.value * 100) + (pvthire_num.value * 250) + (buses_num.value * 150) + (trailers_num.value * 50);
}

if((cb1 == "0") && (cb2 = "1") && (haul.valueAsString == "long")) {
var premium = (trucks_num.value * 235) + (cars_num.value * 100) + (pvthire_num.value * 250) + (buses_num.value * 150) + (trailers_num.value * 50);
}

this.getField("totalpremium").value = premium.valueAsString 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-20T17:31:25.103

检查复选框的导出值是否与 if 语句中要求的值相匹配。默认情况下，这些设置为是或否。如果它们不匹配，您的脚本将无法正常运行。

# testing - 如何Junit测试具有特定响应的servlet过滤器

> ID：13365536
> 
> 赞同：3
> 
> 时间：2012-11-13T17:21:58.187
> 
> 标签：testing, servlets, junit, mockito, servlet-filters

对此代码进行单元测试的最佳方法是什么？我需要为 httpResponse 建立一个一致的检查，当条件为真时 sendError() 。提前致谢！

编辑：不幸的是，这个过滤器不适用于 Spring MVC，所以我的选择是有限的。

```
 public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain filterchain) throws IOException, ServletException {

    String ipAddress = request.getRemoteAddr();
    if( SomeParameterCheckingFunction ((request)) ) {
        logger.error("Error detected! Time: " + new Date().toString() + ", Originating IP: " + ipAddress);
        if (response instanceof HttpServletResponse){
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            httpResponse.sendError(HttpServletResponse.SC_FORBIDDEN,"You are not allowed to access the server!");
        }
    }
    filterchain.doFilter(request, response);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-09T08:50:48.960

例如，当使用**Mockito**模拟框架时，`doFilter()`可以使用以下测试用例对提供的方法进行 JUnit 测试：

```
@Test
public void testDoFilter() throws IOException, ServletException {
    // create the objects to be mocked
    HttpServletRequest httpServletRequest = mock(HttpServletRequest.class);
    HttpServletResponse httpServletResponse = mock(HttpServletResponse.class);
    FilterChain filterChain = mock(FilterChain.class);
    // mock the getRemoteAddr() response
    when(httpServletRequest.getRemoteAddr()).thenReturn("198.252.206.16");

    AccessFilter accessFilter = new AccessFilter();
    accessFilter.doFilter(httpServletRequest, httpServletResponse,
            filterChain);

    // verify if a sendError() was performed with the expected values
    verify(httpServletResponse).sendError(HttpServletResponse.SC_FORBIDDEN,
            "You are not allowed to access the server!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T18:30:13.570

2018 年 2 月更新：[OpenBrace Limited 已关闭](https://closingbraces.net/openbrace/)，不再支持其 ObMimic 产品。

下面是一个示例，说明如何使用我的[ObMimic](http://www.openbrace.com)库为 Servlet API 提供容器外测试替身来测试“sendError”。

首先，关于给定 doFilter 代码的一些注释：

*   “（（请求））”大概意味着只是“（请求）”。

*   没有显示“记录器”的性质，所以我暂时忽略了它，因为它无关紧要。

*   给定的过滤器将检查非 HTTP 请求，但如果它们被拒绝，则写入通常的日志消息，然后跳过 sendError 并执行正常处理。根据您尝试执行的操作，您可能希望预先拒绝非 HTTP 请求，或者根本不检查它们，或者使用其他类型的拒绝来代替“sendError”。现在我假设我们只对如何在 HTTP 请求上测试“sendError”感兴趣。

*   下面的示例测试表明，即使调用了 sendError，处理仍然会直接进入正常的“doFilter”调用。假设这不是故意的，“sendError”应该跟一个“return”，或者“doFilter”应该在一个“else”子句中。

对于下面的示例代码：

*   我使用 JUnit 作为测试框架，但它也可以是 TestNG 或其他任何东西。

*   对于“SomeParameterCheckingFunction”，我刚刚使用了一个如果远程 IP 地址为“1.1.1.1”则返回 true。

*   “sendError”产生一个显示给定消息的 HTML 响应。对于这个例子，我只是检查响应正文是否包含给定的消息。如果您想检查传递给“sendError”的参数值，ObMimic 的“专业版”有一个“历史”功能可以让您这样做。或者您可以在单独的响应实例上执行“sendError”，然后检查响应主体是否完全匹配。

无论如何，这是示例代码：

```
package com.openbrace.experiments.examplecode.stackoverflow13365536;

import static org.junit.Assert.*;
import com.openbrace.experiments.examplecode.stackoverflow13365536.YourFilter;
import com.openbrace.obmimic.mimic.servlet.FilterChainMimic;
import com.openbrace.obmimic.mimic.servlet.FilterConfigMimic;
import com.openbrace.obmimic.mimic.servlet.ServletMimic;
import com.openbrace.obmimic.mimic.servlet.http.HttpServletRequestMimic;
import com.openbrace.obmimic.mimic.servlet.http.HttpServletResponseMimic;
import com.openbrace.obmimic.support.servlet.EndPoint;
import org.hamcrest.CoreMatchers;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

/**
 * Example tests for {@link YourFilter#doFilter(ServletRequest, ServletResponse,
 * FilterChain)}.
 *
 * @author Mike Kaufman, OpenBrace Limited
 */
public class YourFilterTest {

    /** The filter to be tested by this instance's test. */
    private YourFilter filter;

    /** The "mimic" request to be used in this instance's test. */
    private HttpServletRequestMimic request;

    /** The "mimic" response to be used in this instance's test. */
    private HttpServletResponseMimic response;

    /** The filter chain to be used in this instance's test. */
    private FilterChainMimic filterChain;

    /**
     * Set up for this instance's test by creating an initialized filter and a
     * request, response and filter chain for use in the test.
     *
     * @throws ServletException if the filter's init method throws such an
     *     exception.
     */
    @Before
    public void setUp() throws ServletException {
        /*
         * Note that for this example's simple filter and tests:
         * - We don't need anything particular in the filter's FilterConfig.
         * - We don't need any particular ServletContext, so we can leave
         *   ObMimic to use its default ServletContext throughout.
         * - We don't need to retain any references to the filter's FilterConfig
         *   or ServletContext.
         * - We can use a FilterChainMimic with default values as the filter
         *   chain. This has a ServletMimic as the next thing in the chain, and
         *   ServletMimic keeps a count of the calls to its service method, so
         *   we can use this to check whether the filter chain's doFilter has
         *   been invoked.
         */
        filter = new YourFilter();
        filter.init(new FilterConfigMimic());
        request = new HttpServletRequestMimic();
        response = new HttpServletResponseMimic();
        filterChain = new FilterChainMimic();
    }

    /**
     * Test the doFilter method with an example request for which
     * SomeParameterCheckingFunction returns true (so that the FORBIDDEN
     * response should result).
     *
     * @throws ServletException if the servlet throws such an exception.
     * @throws IOException if the servlet throws such an exception.
     */
    @Test
    public void testYourFilterWithForbiddenRequest()
            throws ServletException, IOException {

        // Configure the request so that SomeParameterCheckingFunction will
        // return true, which for purposes of this example is triggered by a
        // particular "remote address".
        request.getMimicState().setRemoteEndPoint(
            new EndPoint(null, "1.1.1.1", null));

        // Invoke the doFilter method.
        filter.doFilter(request, response, filterChain);

        // Check that the response is now FORBIDDEN, and that its HTML content
        // does include the expected text message.
        int responseCode = response.getMimicState().getHttpStatusCode();
        String responseBody = response.getMimicState().getBodyContentAsString();
        String expectedMessage = "You are not allowed to access the server!";
        assertEquals("Response has incorrect status code",
            HttpServletResponse.SC_FORBIDDEN, responseCode);
        Assert.assertThat("FORBIDDEN response does not include expected message",
            responseBody, CoreMatchers.containsString(expectedMessage));

        // Check that the filter chain was not invoked. As we've used a
        // FilterChainMimic with default values, its "target" is a ServletMimic,
        // so we can just check if there have been any calls to that Servlet.
        ServletMimic targetServlet
            = (ServletMimic) filterChain.getMimicState().getTarget();
        boolean filterChainInvoked
            = targetServlet.getMimicState().getServiceCount() > 0;
        assertFalse("FORBIDDEN response but filterChain.doFilter still called",
            filterChainInvoked);

    }

} 
```

如果您想尝试一下，可以在[ObMimic](http://www.openbrace.com)网站上免费下载 ObMimic 的完整详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:04:31.120

一种选择可能是将定义`SomeParameterCheckingFunction`从过滤器本身中提取出来（并在过滤器中使用它）。然后，您可以单独对该逻辑进行单元测试。但是，我不确定这对你来说是否足够。

另一种选择可能是使用 Mockito 测试过滤器类。这将涉及一些劳动，模拟请求、响应、过滤器链、日志记录等。之后您应该能够验证 response.sendError() 调用类似这样（假设静态导入 Mockito.* 方法）：

```
//setup mock with concrete class for instanceof check
ServletResponse resp = mock(HttpServletResponse.class);

//define behavior for desired method with void return type.  this appears optional for mocks.
//doNothing().when(resp).sendError(anyInt(), anyString());

//your test here, passing in resp       
if(resp instanceof HttpServletResponse) resp.sendError(400, "blah");

//verify method was called      
verify(resp).sendError(400, "blah"); 
```

可能有也可能没有一种方法可以使用[HttpUnit](http://httpunit.sourceforge.net/)测试您的过滤器，但这可能无法满足您对适当单元测试的需求。

# algorithm - 对我网站的排名算法选项的反馈

> ID：13365539
> 
> 赞同：6
> 
> 时间：2012-11-13T17:22:04.830
> 
> 标签：algorithm, math, ranking

我目前正在为我计划很快推出的新网站编写算法。索引页面将显示当前“最热门”的帖子。要考虑的变量是：

*   票数
*   帖子的争议程度（# 介于 0-1 之间）
*   自发布以来的时间

我想出了两种可能的算法，第一种也是最简单的是：

```
controversial * (numVotesThisHour / (numVotesTotal - numVotesThisHour)
Denom = numVotesTuisHour if numVotesTotal - numVotesThisHour == 0 
```

*最高的数字是最热的*

我的另一个选择是使用类似于 Reddit 的算法（除了分数随着时间的推移而降低）：

```
[controversial * log(x)] - (TimePassed / interval)
x = { numVotesTotal if numVotesTotal >= 10, 10 if numVotesTotal < 10 
```

*最高的数字是最热的*

第一个算法将允许较旧的帖子在未来再次变得“热门”，而第二个则不会。

所以我的问题是，你认为这两种算法中哪一种更有效？你认为哪一个会展示当下真正“火爆”的话题？您能想到使用其中一种的优点或缺点吗？我只是想确保我不会忽略任何内容，以便确保内容尽可能相关。任何反馈都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:49:17.930

我是不是错过了什么。在第一个公式中，分母中有 numVotesTotal。因此，更高的票数意味着它永远不会那么热，即使它不是那么老。

例如，如果我有两个帖子 - P1 和 P2（都同样有争议）。假设 P1 的 numVotesTotal = 20，P2 的 numVotesTotal = 1000。现在在过去的一小时内，P1 的 numVotesThisHour = 10，P2 的 numVotesThisHour = 200。

根据算法，P1 比 P2 更出名。这对我来说没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:25:58.413

我认为第一个算法过于依赖瞬时趋势。想想 NASCAR，目前的领导者可能会以 0 英里/小时的速度行驶，因为他在进站。第二个使用平均趋势的概念。我认为两者都有其用途。

因此，对于两个具有相同总票数和有争议评分的帖子，但其中一个帖子在第一小时获得 20 票，第二小时获得 0 票，而另一个帖子每小时获得 10 票。第一个帖子将被第一个算法掩埋，但第二个算法将对它们进行平均排名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T07:11:06.837

YMMV，但我认为“热度”完全取决于时间框架，而不是总票数，除非你的时间框架是“所有时间”。此外，在我看来，相关时间范围内所有选票的*比例*，而不是绝对数量，才是重要的数字。

您可能有几类热点：

*   这个小时最热
*   本周最热
*   自您上次访问以来最热
*   史上最热

因此，“最近 [whatever] 中最热的”可以这样计算：

```
votes_for_topic_in_timeframe / all_votes_in_timeframe 
```

如果您特别想要一个介于 0 和 1 之间的数字（对于跨类别比较很有用），或者，如果您只想要特定时间范围内的数字，只需`votes_for_topic_in_timeframe`取值并按降序排序。

如果您不希望用户明确选择时间范围，您可能需要计算所有（例如）四个版本（或者可能只是前 3 个），为每个类别分配一个乘数以赋予每个类别相对重要性，然后计算每个主题的总值取前*n*位。这样做的好处是可能会向用户隐藏过去一小时内根本没有人投票的情况；）

# android - TagHandler 处理 Youtube 标签 ?

> ID：13365544
> 
> 赞同：2
> 
> 时间：2012-11-13T17:22:23.737
> 
> 标签：android, html

I'm parsing html using Html.fromHtml(). My problem is that my html text has youtube embeded links (basically `<iframe>` tags)

So, since [Html](https://developer.android.com/reference/android/text/Html.html) class does NOT support `<iframe>` tag, I need to define my own [TagHandler](https://developer.android.com/reference/android/text/Html.TagHandler.html) to handle it. What I'm trying to do is to convert the `<iframe>` to a regular `<a>` tag so that it can be rendered correctly.

```
//convert this
<iframe src="http://www.youtube.com/embed/xAEdMI2ZE88" frameborder="0" width="560" height="315"></iframe>
//To this
<a href="http://www.youtube.com/embed/xAEdMI2ZE88">Click to Watch</a> 
```

My problem is that **I couldn't find a way to get the `src` link of the youtube from the `<iframe>` tag.**

Here is my TagHandler's `handleTag()` method:

```
@Override
public void handleTag(boolean opening, String tag, Editable output, XMLReader xmlReader) {
    if (tag.equals("iframe")) {
        if(opening) {
            output.append("<a href=");
            //How to get YouTube video link and append it?
        }
        else {
            output.append("Click To Watch</a>");
        }
    }
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-21T14:59:24.813

您也可以使用此正则表达式。

```
htmlString.replaceAll("<iframe\\s+.*?\\s+src=(\".*?\").*?<\\/iframe>", "<a href=$1>CLICK TO WATCH</a>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:13:02.037

目前，我接受了 CommonsWare 的建议并修改了`before`将其传递给`Html.fromHtml`.

```
//Opening tag
Pattern p = Pattern.compile("<iframe src");
Matcher m = p.matcher(htmlString);
while (m.find())
    htmlString= m.replaceAll("<a href");

//Closing tag    
p = Pattern.compile("frameborder=.*</iframe>");
m = p.matcher(htmlString);
while (m.find())
    htmlString= m.replaceAll(">CLICK TO WATCH</a>"); 
```

# jquery - jQuery 和 WCF WebService 反序列化问题

> ID：13365546
> 
> 赞同：1
> 
> 时间：2012-11-13T17:22:26.510
> 
> 标签：jquery, asp.net, wcf, deserialization

我在 ASMX 文件中有一个 WebService，但是我最终遇到了问题，因为在某些情况下我有太多数据（打印分页网格，检索所有数据）。发现我无法使用 ASMX 服务配置与消息大小相关的任何内容，因此我决定采用 WCF 路线来解决我的问题。

转换我现有的 WebService，我创建了一个接口和实际服务，然后将我的配置添加到我的 WebConfig。到目前为止，一切都很好。转换后，我无法让它运行。我的方法的第一行有一个断点，但它永远不会到达它。

Chrome 在通话中给了我“400（错误格式）”错误，所以我去配置了跟踪。在跟踪中，我看到调用我的方法时引发了异常。

```
There was an error while trying to deserialize parameter http://tempuri.org/:jsonAOData. Please see InnerException for more details. 
```

（完全例外，法语对不起）

```
Le serveur a rencontré une erreur lors du traitement de la demande. Le message d'exception est 'Le module de formatage a généré une exception en tentant de désérialiser le message : Une erreur s'est produite en tentant de désérialiser le paramètre http://tempuri.org/:jsonAOData. Le message InnerException était 'Une erreur s'est produite lors de la désérialisation de l'objet de type System.String. Jeton 'null' attendu, mais 'name' a été trouvé.'. Pour plus d'informations, consultez InnerException.'. Pour plus d'informations, consultez les journaux du serveur. La trace de la pile d'exception est :

à System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part) 
à System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameter(XmlDictionaryReader reader, PartInfo part) 
à System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameters(XmlDictionaryReader reader, PartInfo[] parts, Object[] parameters, PartInfo returnInfo, Object& returnValue) 
à System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBodyCore(XmlDictionaryReader reader, Object[] parameters, Boolean isRequest) 
à System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest) 
à System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest) 
à System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest(Message message, Object[] parameters) 
à System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest(Message message, Object[] parameters) 
à System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest(Message message, Object[] parameters) 
à System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest(Message message, Object[] parameters) à System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 
à System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

查看 chrome 中的调用，它指定以下内容：

```
Request URL:http://localhost:2806/MyWebApp/WebServices.svc/GetRequests
Request Method:POST
Status Code:400 Bad Request
Request Headersview source
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8,fr-CA;q=0.6,fr;q=0.4
Connection:keep-alive
Content-Length:3436
Content-Type:application/json; charset=UTF-8
Cookie:DOKU_PREFS=list%23thumbs; ASP.NET_SessionId=bttjyzhltsrxflcn43i0v43f; MyWebApp=ECFF341038FFA20B7357CAEE592127F98B46F7421F5388A6CCB1D8460A1A66E345D82E62F634BF2854F9008DD01C875B53B3864E3EE3511AFAC67C40AE9BB4013E367D50605B326755CA7F286EF18CD7A3E229EDA2EE8066A12DC330B293AEE549322C7AADC46306CA63402A27F6F125703D070B07EE8BBDA9AC2F185CF546DDEAF1AA6AEE6B42BAFF41BDDC690CDED8
Host:localhost:2806
Origin:http://localhost:2806
Referer:http://localhost:2806/MyWebApp/Viewer.aspx
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
X-Requested-With:XMLHttpRequest 
```

有效负载（我使用 JSONLint 验证）：

```
{"jsonAOData": "[{"name":"sEcho","value":1},{"name":"iColumns","value":33},{"name":"sColumns","value":"FileId,StateDesc,DeptDescription,Division,ConfirmProblem,TaskDescription,GenComment,FileType,Problem,TreatmentTargetDate,TreatmentPlannedDate,Responsable,ReceivedDate,NoCiv,Generic,Streetname,StreetDirection,StreetDescription,TreatmentStartDate,TreatmentCompleteDate,TreatmentDemandDate,SiteDesc,SectorOld,District,AreaOld,IntersectStreetId,Prepose,PrintedDate,Requester,AdressC,LocationPrecision,RealisedFor,Source"},{"name":"iDisplayStart","value":0},{"name":"iDisplayLength","value":-1},{"name":"mDataProp_0","value":"FileId"},{"name":"mDataProp_1","value":"StateDesc"},{"name":"mDataProp_2","value":"DeptDescription"},{"name":"mDataProp_3","value":"Division"},{"name":"mDataProp_4","value":"ConfirmProblem"},{"name":"mDataProp_5","value":"TaskDescription"},{"name":"mDataProp_6","value":"GenComment"},{"name":"mDataProp_7","value":"FileType"},{"name":"mDataProp_8","value":"Problem"},{"name":"mDataProp_9","value":"TreatmentTargetDate"},{"name":"mDataProp_10","value":"TreatmentPlannedDate"},{"name":"mDataProp_11","value":"Responsable"},{"name":"mDataProp_12","value":"ReceivedDate"},{"name":"mDataProp_13","value":"NoCiv"},{"name":"mDataProp_14","value":"Generic"},{"name":"mDataProp_15","value":"Streetname"},{"name":"mDataProp_16","value":"StreetDirection"},{"name":"mDataProp_17","value":"StreetDescription"},{"name":"mDataProp_18","value":"TreatmentStartDate"},{"name":"mDataProp_19","value":"TreatmentCompleteDate"},{"name":"mDataProp_20","value":"TreatmentDemandDate"},{"name":"mDataProp_21","value":"SiteDesc"},{"name":"mDataProp_22","value":"SectorOld"},{"name":"mDataProp_23","value":"District"},{"name":"mDataProp_24","value":"AreaOld"},{"name":"mDataProp_25","value":"IntersectStreetId"},{"name":"mDataProp_26","value":"Prepose"},{"name":"mDataProp_27","value":"PrintedDate"},{"name":"mDataProp_28","value":"Requester"},{"name":"mDataProp_29","value":"AdressC"},{"name":"mDataProp_30","value":"LocationPrecision"},{"name":"mDataProp_31","value":"RealisedFor"},{"name":"mDataProp_32","value":"Source"},{"name":"iSortCol_0","value":0},{"name":"sSortDir_0","value":"asc"},{"name":"iSortingCols","value":1},{"name":"bSortable_0","value":true},{"name":"bSortable_1","value":true},{"name":"bSortable_2","value":true},{"name":"bSortable_3","value":true},{"name":"bSortable_4","value":true},{"name":"bSortable_5","value":true},{"name":"bSortable_6","value":true},{"name":"bSortable_7","value":true},{"name":"bSortable_8","value":true},{"name":"bSortable_9","value":true},{"name":"bSortable_10","value":true},{"name":"bSortable_11","value":true},{"name":"bSortable_12","value":true},{"name":"bSortable_13","value":true},{"name":"bSortable_14","value":true},{"name":"bSortable_15","value":true},{"name":"bSortable_16","value":true},{"name":"bSortable_17","value":true},{"name":"bSortable_18","value":true},{"name":"bSortable_19","value":true},{"name":"bSortable_20","value":true},{"name":"bSortable_21","value":true},{"name":"bSortable_22","value":true},{"name":"bSortable_23","value":true},{"name":"bSortable_24","value":true},{"name":"bSortable_25","value":true},{"name":"bSortable_26","value":true},{"name":"bSortable_27","value":true},{"name":"bSortable_28","value":true},{"name":"bSortable_29","value":true},{"name":"bSortable_30","value":true},{"name":"bSortable_31","value":true},{"name":"bSortable_32","value":true}]"} 
```

作为参考，我还包括一些配置/代码片段来帮助解决它：

我的（部分）jQuery（DataTables）初始化

```
sAjaxSource: "WebServices.svc/GetRequests",
fnServerData: function (sSource, aoData, fnCallback) {
    var jsonAOData = JSON.stringify(aoData);
    $.ajax({
        type: "POST",
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        url: sSource,
        data: '{"jsonAOData": "' + jsonAOData + '"}',
        success: function (msg) {
            fnCallback(msg.d);
            }
        });
    } 
```

我在 IWebServices 中的方法定义：

```
[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
FormatedList GetRequests(string jsonAOData); 
```

它是 WebServices.cs 中的实现（它周围没有属性/装饰），WebServices.svc 继承了它。

```
public FormatedList GetRequests(string jsonAOData)
{
    // My code that was working before but never gets call now.
} 
```

我的网络配置

```
<system.serviceModel>
   <behaviors>
      <serviceBehaviors>
         <behavior name="WebServicesBehavior">
            <serviceMetadata httpGetEnabled="true"/>
            <serviceDebug includeExceptionDetailInFaults="true"/>
         </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
         <behavior name="WebServicesAspNetAjaxBehavior">
            <webHttp/>
         </behavior>
      </endpointBehaviors>
   </behaviors>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
   <services>
      <service behaviorConfiguration="WebServicesBehavior" name="WebServices">
         <endpoint address="" behaviorConfiguration="WebServicesAspNetAjaxBehavior"
            binding="webHttpBinding" contract="IWebServices" />
      </service>
   </services>
</system.serviceModel> 
```

知道我缺少什么吗？我确信我已经接近我的目标，只是无法掌握最后一点......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:16:08.693

问题是您的 JSON 数据无效。

```
{"jsonAOData": "[{"name":"sEcho"... 
```

JSON 字符串以`"`字符开头并以匹配`"`字符结尾（除非它被转义为`\"`）。您的字符串从那里开始`[{`并结束。之后的字符无效 ( `name`)。

如果您希望字符串按原样传递，您实际上需要“重新 JSONify”它。首先，您将创建一个要传递给服务的 JSON 字符串 ( `jsonAOData`)。然后，您将创建一个新对象，该对象将传递给 WCF 服务（并且该对象也需要进行 JSON 化） - 见下文。

```
var jsonAOData = JSON.stringify(aoData);
var inputBody = JSON.stringify({ jsonAOData: jsonAOData });
$.ajax({
    type: "POST",
    dataType: 'json',
    contentType: "application/json; charset=utf-8",
    url: sSource,
    data: inputBody,
    success: function (msg) {
        fnCallback(msg.d);
        }
    });
} 
```

# android - 选项卡中的图标 (API 16+)

> ID：13365549
> 
> 赞同：0
> 
> 时间：2012-11-13T17:22:40.587
> 
> 标签：android, drawable, tabwidget

我在[这里](https://stackoverflow.com/questions/4460806/tabs-without-icon)看到了这个问题。解决方案是为图标制作一个 xml，然后 `getResources().getDrawable(R.drawable.tabicon);` 打开。所以这是在我的 java 中：

```
TabHost tabhost = (TabHost)findViewById(R.id.tabhost);
    tabhost.setup();
    TabSpec tabspecs1 = th.newTabSpec("example");
    tabspecs1.setContent(R.id.tab1);
    tabspecs1.setIndicator("Example");
    getResources().getDrawable(R.drawable.tabicon);
    th.addTab(tabspecs1);
    listView = getListView(); 
```

我的 tabicon.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use icon1 -->
    <item android:drawable="@drawable/ic_action_line_chart"
          android:state_selected="true" />
    <!-- When not selected, use icon2-->
    <item android:drawable="@drawable/ic_action_calculator" />
</selector> 
```

折线图和计算器位于可绘制文件夹中。我错过了什么？标签工作正常，但没有图标...？

* * *

好的，我是这样做的：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);
    setTitle("MyApp");
    listView = getListView();
    TabHost th = (TabHost)findViewById(R.id.tabhost);
    th.setup();
    TabSpec tabspecs1 = th.newTabSpec("tag01");
    tabspecs1.setContent(R.id.tab1);
    tabspecs1.setIndicator ("exlample"),getResources().getDrawable(R.drawable.tabicon));
    th.addTab(tabspecs1);
    TabSpec tabspecs2 = th.newTabSpec("tag02");
    tabspecs2.setContent(R.id.tab2);
    tabspecs2.setIndicator ("lululu", getResources().getDrawable(R.drawable.tabicon));
    th.addTab(tabspecs2);
} 
```

我对两者都使用了 tabicon.xml，只进行了 4 次测试。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected, use icon1 -->
<item android:drawable="@drawable/ic_icon1"
      android:state_selected="true" />
<!-- When not selected, use icon2-->
<item android:drawable="@drawable/ic_icon2" />
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:24:33.473

你得到了drawable，但没有设置它。试试这个方法：

[http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator(java.lang.CharSequence](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator(java.lang.CharSequence) , android.graphics.drawable.Drawable)

```
setIndicator ("Example", getResources().getDrawable(R.drawable.tabicon)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:24:29.773

这个

```
getResources().getDrawable(R.drawable.tabicon); 
```

不做任何事情。您没有在任何地方设置检索到的 Drawable。

# linux - 使用 bash 设置参数

> ID：13365553
> 
> 赞同：7
> 
> 时间：2012-11-13T17:22:55.440
> 
> 标签：linux, bash, unix

我经常运行一个简单的 bash 命令：

```
rpm -Uvh --define "_transaction_color 3" myPackage.rpm 
```

哪个工作正常。

但现在我正在尝试将其编写成 bash 文件，并使其更加灵活：

```
#!/bin/bash
INSTALL_CMD=rpm
INSTALL_OPT="-Uvh --define '_transaction_color 3'"

${INSTALL_CMD} ${INSTALL_OPT} myPackage.rpm 
```

但是，这会不断产生错误：

```
error: Macro % has illegal name (%define) 
```

错误来自如何处理`--define`引用`_transaction_color`的内容。
我尝试了各种转义、不同的措辞，甚至制作`INSTALL_OPT`了一个数组，用`${INSTALL_OPT[@]}`.

到目前为止，我的尝试没有奏效。
显然，我想要的非常简单。我只是不确定如何完成它。

如何让 bash`--define`正确处理我的论点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T17:28:40.290

问题是在变量替换后不处理引号。所以看起来你正在尝试定义一个名为`'_transaction_color`.

尝试使用数组：

```
INSTALL_OPT=(-Uvh --define '_transaction_color 3') 
```

然后：

```
"$INSTALL_CMD" "${INSTALL_OPT[@]}" myPackage.rpm 
```

重要的是放在`${INSTALL_OPT[@]}`双引号内以获得重新引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T17:31:11.817

空间上的分词可能是一个 bash 问题：

尝试：

```
#!/bin/bash

IFS=$'\n'

INSTALL_CMD=rpm
INSTALL_OPT='-Uvh'
INSTALL_OPT_DEFINE='--define _transaction_color 3'

${INSTALL_CMD} ${INSTALL_OPT} ${INSTALL_OPT_DEFINE} myPackage.rpm 
```

# java - 如何使用java检查字符串中的所有字符是否为小写

> ID：13365554
> 
> 赞同：9
> 
> 时间：2012-11-13T17:22:55.123
> 
> 标签：java, regex

我试过这样但它输出错误，请帮助我

```
String inputString1 = "dfgh";// but not dFgH
String regex = "[a-z]";
boolean result;

Pattern pattern1 = Pattern.compile(regex);
Matcher matcher1 = pattern1.matcher(inputString1);
result = matcher1.matches();
System.out.println(result); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-13T17:24:52.157

您的解决方案几乎是正确的。正则表达式必须说 —`"[a-z]+"`包含一个量词，这意味着您匹配的不是单个字符，而是一个或多个小写字符。请注意，与Unicode 中的**任何**小写字符匹配的超级正确解决方案是：

```
"\\p{javaLowerCase}+" 
```

另外请注意，您可以使用更少的代码来实现这一点：

```
System.out.println(input.matches("\\p{javaLowerCase}*")); 
```

（这里我交替使用 * 量词，表示零或多个。根据所需的语义进行选择。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T17:24:45.970

你快到了，除了你只检查一个字符。

```
String regex = "[a-z]+"; 
```

上面的正则表达式将检查输入字符串是否包含任意数量的`a`字符`z`

[阅读有关如何在正则表达式中使用量词的信息](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T17:24:55.183

使用这种模式：

```
String regex = "[a-z]*"; 
```

只有当测试的字符串只有一个字符时，您当前的模式才有效。

请注意，它完全按照它的样子：它并没有真正测试字符串是否为小写，但它是否不包含外部字符`[a-z]`。这意味着它对于像`"àbcd"`. Unicode 世界中的正确解决方案是使用[Character.isLowercase()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isLowerCase%28char%29)函数并遍历字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T17:25:59.283

它应该是

```
^[a-z]+$ 
```

`^`是字符串的开头

`$`是字符串的结尾

`[a-z]+`匹配 1 到多个小字符

You need to use quantifies like `*` which matches 0 to many chars,`+` which matches 1 to many chars..They would matches 0 or 1 to many times of the preceding character or range

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T17:39:06.220

Why bother with a regular expression ?

```
String inputString1 = "dfgh";// but not dFgH
boolean result = inputString1.toLowerCase().equals( inputString1 ); 
```

# python - Django 查看问题-ForeignKey

> ID：13365555
> 
> 赞同：0
> 
> 时间：2012-11-13T17:22:59.617
> 
> 标签：python, django, django-templates, django-views

我在使用相关模型类时遇到了麻烦。我有一个看起来像这样的模型：

```
class Cine(models.Model):
    nombre = models.CharField(max_length=150)
    ciudad = models.ForeignKey(Ciudad, db_column='ciudad')
    slug = models.SlugField(unique=True, blank=True)
    ...

class Funcion(models.Model):
    idpelicula = models.ForeignKey(Pelicula, db_column='idpelicula')
    idcine = models.ForeignKey(Cine, db_column='idcine', null=True)
    hora = models.TimeField(null=True)
    ... 
```

我的观点是这样的：

```
def FuncionesByCine(request, id):
    funcionesByCine = Funcion.objects.filter(idcine=id)
    context = {'funcionesByCine': funcionesByCine}
    return render_to_response('funciones-by-cine.html', context, context_instance=RequestContext(request))

def CineDetail(request, cineslug):
    cine = Cine.objects.get(slug=cineslug)
    context = {'cine': cine}
    return render_to_response('cine-individual.html', context, context_instance=RequestContext(request)) 
```

和网址：

```
#Queryset containing all the Cine objects
cine_info = {
    'queryset': Cine.objects.all(),
    'template_name': 'cines-all.html',
}

url(r'^complejos/$', list_detail.object_list, cine_info),
url(r'^complejos/(?P<cineslug>.*)/$', views.CineDetail),
url(r'^complejos/(?P<cineslug>.*)/funciones/(?P<id>.*)/$', views.FuncionesByCine),
url(r'^funciones/$', views.FuncionesAll),
url(r'^funciones/(?P<id>.*)/$', views.FuncionesByCine), 
```

当我从这样的 url 调用它时，这给了我与来自 Funcion 的“电影”相关联的所需“funciones”：localhost:8000/funciones/1。

现在，我想要做的是从显示单个电影院（'cine'）的模板中调用此视图，并使用此视图能够显示其上的所有放映时间（'funciones'） '电影'。

我正在尝试使用相同的视图但不同的网址：

```
url(r'^complejos/(?P<cineslug>.*)/funciones/(?P<id>.*)/$', views.FuncionesByCine), 
```

模板调用如下所示：

```
{% extends 'cines-menu.html' %}
    {% block content %}
    <div class="cine">
        <p>Nombre: <a href="funciones/{{cine.id}}">{{cine}}</a></p>
        <p>Ciudad:{{cine.ciudad}}</p>
        <p>Direccion:{{cine.direccion}}</p>
    {% endblock %} 
```

这目前不起作用。有任何想法吗？谢谢！

编辑：我添加了其他视图和网址（也是使用 cineslug 的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:32:51.147

具体是什么不起作用？你收到什么错误？

我看到您试图将其传递`cineslug`给您的视图函数并作为参数。

当您使用[命名组](https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups)时，它们会作为位置参数传递给视图。

`def FuncionesByCine(request, id):`

应该是

`def FuncionesByCine(request, cineslug, id):`

但我相信这会破坏你原来的网址，

您可以将函数定义更改为`def FuncionesByCine(request, cineslug, id):`

并传入默认值`cineslug`

`url(r'^funciones/(?P<id>.*)/$', views.FuncionesByCine, {'cineslug': None})`

```
def FuncionesByCine(request, cineslug, id):
  if cineslug is None:
     # this is from funciones/{id} 
```

`Funcion`您可以通过 slug检索's，例如：

`funciones = Funcion.objects.filter(idcine__slug={{ your slug value here }})`

# android - SQLiteStatement 执行一个 SELECT / INSERT / DELETE / UPDATE

> ID：13365558
> 
> 赞同：6
> 
> 时间：2012-11-13T17:23:22.283
> 
> 标签：android, sqlite, android-sqlite

我正在使用`SQLiteStatement`事务编译来优化 SQLite 事务，但我正在阅读该[`execute`](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html#execute%28%29)函数的文档：

> 执行此 SQL 语句，*如果它不是 SELECT / INSERT / DELETE / UPDATE*，例如 CREATE / DROP 表、视图、触发器、索引等。

这似乎暗示这个函数不应该与`SELECT / INSERT / DELETE / UPDATE`语句一起使用，但我有代码将它与插入一起使用并且可以工作。

我知道`executeInsert`其他方法，但`executeUpdateDelete`在我的 API 级别中不可用，所以我可以使用`execute`吗？

此外，如果我不需要最后一个插入 id 或受影响的行数，我应该使用`execute`而不是`executeInsert`等等，换句话说，它是否更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:54:42.817

`execute`可能不比 快`executeInsert`，甚至可能更慢（在 ICS[`execute`](https://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/java/android/database/sqlite/SQLiteStatement.java#L69)调用上`executeUpdateDelete`并丢弃返回值）。您需要对其进行测试，但我怀疑您会在这里找到真正的区别。

AFAIK，仅`execute`当您不需要返回值时使用它是安全的，但我不会指望在未来的 Android 版本中保持这种情况。文档说不，所以也许有人会改变行为以反映这一点。较旧的实现似乎`execute`也在使用（例如[2.1 `delete()`sourcecode](https://github.com/android/platform_frameworks_base/blob/eclair-release/core/java/android/database/sqlite/SQLiteDatabase.java#L1475)）。例如，果冻豆在 SQLite 的幕后发生[了很大变化，但在使用时它应该仍然可以工作](https://github.com/android/platform_frameworks_base/blob/jb-release/core/java/android/database/sqlite/SQLiteSession.java)`execute`

此外，如果您不`SQLiteStatement`一遍又一遍地使用相同的参数，而只是重新绑定参数，则可能不值得使用它。与实际的数据库访问和所需的磁盘 I/O 相比，每次调用常规`insert`, , ... 方法时都构建一个新的方法要快。`update`另一方面，事务有很大帮助，因为在磁盘上为每个语句同步数据库状态真的很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:08:16.587

使用[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)而不是[SQLiteStatement](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)与您的数据库进行交互。SQLiteStatements 不是线程安全的，所以我不会将它们用于 SELECT / INSERT / DELETE / UPDATE。此外，您应该尽量不要将原始数据库查询用于`Selects`. 有内置的辅助函数可以提高您的数据库性能。在您的实例上，`SQLiteDatabase`您有 .insert、.update、.delete，我使用 .rawQuery 进行选择。

# spring-batch - 在 Spring Batch 服务类中获取数据库连接

> ID：13365562
> 
> 赞同：1
> 
> 时间：2012-11-13T17:23:37.867
> 
> 标签：spring-batch

在某些情况下，我想在 Spring Batch 服务类中连接到已配置的数据库，例如在处理器或自定义编写器中。我可以将数据源注入我的班级，但我想获得与它的连接。开箱即用的 Spring Batch 数据库读取器和写入器会自动获得连接，因此我想使用它而不是编写自己的连接代码。所以在作家示例中说我的类使用 ItemWriterAdapter 并且我需要在其中进行查询。如何获取到已配置数据源的已建立连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:25:03.663

将此添加到您的 context.xml 中（假设定义了 dataSource bean）

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource"/>
</bean> 
```

在您的 Writer 或 Processor 中，注入此 jdbcTemplate

```
private JdbcTemplate jdbcTemplate;
public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
    this.jdbcTemplate = jdbcTemplate;
} 
```

现在您可以使用相同的数据源查询 Spring Jdbc [http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html)

# ruby - 在 Sidekiq 工作者中使用 Eventmachine http 请求

> ID：13365563
> 
> 赞同：2
> 
> 时间：2012-11-13T17:23:38.913
> 
> 标签：ruby, sinatra, eventmachine, sidekiq

因此，假设我有一个 sidekiq 进程，它发送一个我不想等待的 http post 请求。我不希望这成为工人速度的障碍。

我的一个想法是将这个简单的示例代码用于 EventMachine Http Request

```
 EventMachine.run do
    http = EventMachine::HttpRequest.new("http://www.example.com").post :options => {...}
    http.callback do
      puts "got a response"
      puts http.response
      EventMachine.stop
    end
    puts "worker finished"
  end 
```

所以让我们假设我的工作进程在调用回调之前完成。这里会发生什么？这是否意味着指向回调的指针会失败？我想了解这里的控制流程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:37:02.877

根据您的需要：

1.  您想**利用 CPU**
    Sidekiq 工作人员非常轻量级。您可以在等待响应时运行更多它们以利用 CPU。
2.  您希望工人**完成得更快**。
    您可以将每个请求排入队列以由不同的工作人员处理。就像 EM 中的 next_tick() 一样。我对 Sidekiq 和赛璐珞感到兴奋，因为它改变了我们的思维方式。[http://www.slideshare.net/KyleDrake/hybrid-concurrency-patterns?utm_source=rubyweekly&utm_medium=email](http://www.slideshare.net/KyleDrake/hybrid-concurrency-patterns?utm_source=rubyweekly&utm_medium=email)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:41:14.327

在您调用之前，该`EventMachine.run`块不会返回`EventMachine.stop`。因此，在您的情况下，如果没有运行回调，工作人员将无法完成。

# html - 如何隐藏视频 html 标签的 src？

> ID：13365565
> 
> 赞同：3
> 
> 时间：2012-11-13T17:23:45.480
> 
> 标签：html, video, src, hidden-field

我想拥有视频流，而用户可以使用浏览器的检查元素选项在 html 和 js 文件中查看视频的 src。

我回顾了一些框架，例如：

[http://flowplayer.org/](http://flowplayer.org/)

[http://www.jplayer.org/](http://www.jplayer.org/)

但是他们显示了视频的src。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:03:15.850

谢谢大家，我使用了这个选项，允许下载或不允许下载视频

[http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/TutorialStreamingFlowplayer.html](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/TutorialStreamingFlowplayer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:37:36.603

您需要检查**流式传输**选项。像**彩信**流和类似的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-29T20:08:29.467

如果 src 看起来像 src="*"，请查看 [https://www.npmjs.com/package/location-hide](https://www.npmjs.com/package/location-hide)

如果它看起来不一样，问他也许他会添加它

# javascript - 全屏黑色背景，不透明度淡入/淡出

> ID：13365573
> 
> 赞同：0
> 
> 时间：2012-11-13T17:24:24.153
> 
> 标签：javascript, jquery, html, css, ajax

我正在尝试制作一个不透明的全屏黑色背景，当鼠标进入正文时它看起来很平滑，当用户离开页面正文（这是整个导航内容屏幕）时它会平滑淡出。

我正在尝试使用此脚本进行操作：

```
 $("body").bind('mouseover', function() {
        $("#bg_black").fadeIn("slow", 0.33);
    });
    $("body").bind('mouseleave', function() {
        $("#bg_black").fadeOut();
    }); 
```

用这个CSS：

```
 #bg_black{
        position: absolute;
        z-index: 1;
        background: black;
        opacity: 0.5;
        width: 100%;
        height: 100%;
        display: none;
    } 
```

但是淡出不起作用，而且淡入非常快速和沉重。

有什么想法可以实现它，让它也兼容 IE 吗？（不使用css3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:59:14.093

我通过在 body 中添加一个 div 来完成这项工作。

```
<div id="bg"></div> 
```

用 css 设计它

```
#bg {

  // so if user scrolls it doesn't matter
  position: fixed; 
  background-color: black;

  // expand to height & width
  height: 100%;
  width: 100%;
  margin: 0;
  padding:0;

  // hidden initially
  opacity: 0;
}

body {
  background-color: white;
} 
```

javascript淡入和淡出

```
$("#bg").hover(function() {

  // should user hover in and out quickly stop animations
  $(this).stop().animate({ opacity: 1 }, 1000);

}, function( ) {

  // should user hover in and out quickly stop animations
  $(this).stop().animate({ opacity: 0 }, 1000);

}); 
```

演示[在这里](http://jsbin.com/okimow/6/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:06:36.317

试试这个：

```
$(function(){

  $("body").hover(function() {
    $("#bg_black").fadeIn("slow");
  },function(){
    $("#bg_black").fadeOut("slow");
  });

}); 
```

# java - 是否可以从“list-child”访问“list-owner”？

> ID：13365584
> 
> 赞同：1
> 
> 时间：2012-11-13T17:24:54.997
> 
> 标签：java, list, jakarta-ee, arraylist

我有一个`objectA`from `ClassA`which 有一个来自`List`的对象`ClassB`。

我可以`objectA`从访问`objectB`吗？我的意思是，我在问是否有类似的东西`objectB.getListOwner()`返回`objectA`。

我知道我可以在创建时设置`ClassA`属性`ClassB`并设置它，但我想知道是否有更直接的东西。`objectA``objectB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:29:21.007

不是直接的或自动的。

您可以做的是在 ClassA 中有一个方法，例如，`addToList(ClassB objectB)` 它的作用如下：

```
public void addToList(ClassB objectB)
{
  objectB.setClassAOwner(this);
  list.add(objectB);
} 
```

然后您使用该方法将`ClassB`对象添加到`ClassA`.

显然`ClassB`需要有一个方法`setClassAOwner(ClassA owner)`和相应的成员变量`ClassA`owner，而且很可能需要一个匹配的 getter 方法`getClassAOwner()`

关于这种方法的小评论。这引入了直接的循环依赖，从设计原则的角度来看，这通常是不受欢迎的，原因超出了这个问题的范围。但它实现了你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:26:50.980

如果你说：我可以问一个列表条目它来自哪个列表吗？答案是否定的，你不能，没有提供开箱即用的东西。该对象不知道它在哪个列表上（它可能在多个列表上，或者根本没有）。

例如：

```
List list1 = new ArrayList();

list1.add(new Object());
list1.add(new Object());
list1.add(new Object());

for (Object o : list1) {
    doSomething(o);
} 
```

无法`doSomething`确定传递给它的对象来自`list1`，您必须自己创建结构。

# c# - 为什么 ++ 运算符重载时 ++foo 和 foo++ 没有区别？

> ID：13365585
> 
> 赞同：4
> 
> 时间：2012-11-13T17:24:58.193
> 
> 标签：c#, operator-overloading, increment, post-increment, pre-increment

> **可能重复：**
> [后增量运算符重载](https://stackoverflow.com/questions/668763/post-increment-operator-overloading)
> [为什么后缀 ++/— 在 C# 中被归类为主要运算符？](https://stackoverflow.com/questions/7049368/why-are-postfix-categorized-as-primary-operators-in-c)

我看到我可以重载`++`and`--`运算符。通常您通过两种方式使用这些运算符。前后递增/递减一个 int 示例：

```
int b = 2; 
//if i write this
Console.WriteLine(++b); //it outputs 3
//or if i write this
Console.WriteLine(b++); //outpusts 2 
```

但是在运算符重载方面情况有点不同：

```
 class Fly
    {
        private string Status { get; set; }

        public Fly()
        {
            Status = "landed";
        }

        public override string ToString()
        {
            return "This fly is " + Status;
        }

        public static Fly operator ++(Fly fly)
        {
            fly.Status = "flying";
            return fly;
        }
    }

    static void Main(string[] args)
    {
        Fly foo = new Fly();

        Console.WriteLine(foo++); //outputs flying and should be landed
        //why do these 2 output the same?
        Console.WriteLine(++foo); //outputs flying
    } 
```

我的问题是为什么最后这两行输出相同的东西？更具体地说，为什么第一行（两行）输出`flying`？

* * *

解决方案是将运算符重载更改为：

```
 public static Fly operator ++(Fly fly)
        {
            Fly result = new Fly {Status = "flying"};
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:33:36.693

前缀和后缀的区别在于`++`，of`foo++`的值是`foo`调用`++`运算符之前的值，而是运算符返回`++foo`的值。`++`在您的示例中，这两个值是相同的，因为`++`运算符返回原始`fly`引用。相反，如果它返回一个*新*的“飞行” Fly，那么您会看到您期望的差异。

# matlab - 从乳腺钼靶筛查数字数据库 (DDSM) 获取数据

> ID：13365587
> 
> 赞同：7
> 
> 时间：2012-11-13T17:25:12.017
> 
> 标签：matlab

我正在尝试以可读格式获取 DDSM 数据集。

有没有人有 DDSM 的 heathusf 程序的工作版本，可以在 linux 或 windows 上正常化？[我知道在http://www.cs.unibo.it/~roffilli/sw.html](http://www.cs.unibo.it/~roffilli/sw.html)上有一个适用于 DDSM 的 jpeg 程序的工作版本， 我编译并测试了它。我使用此处描述的 MATLAB 代码来查看图像。它仅对某些扫描仪正确显示。

如论文[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.111.3846](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.111.3846)中所述，正确编译后，DDSM 软件将图像数据输出为原始字节流；然后必须根据用于对原始胶片进行成像的数字化仪模型对这些进行归一化，然后创建一个可由自己的图像分析软件环境读取的图像文件。有没有人有标准化图像数据的解决方案？

任何帮助是极大的赞赏。谢谢你！

程

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T09:00:20.780

DDSM 图像以 .LJPEG 格式压缩，在处理它们之前需要先解压缩。

我已经想出了一种将 DDSM 图像转换为原始图像的方法，但它还有很长的路要走，而且我没有更好的方法。

*   **分步读取 DDSM 数据集图像：**

    1.  [在https://github.com/multinormal/ddsm](https://github.com/multinormal/ddsm)克隆存储库，其中包含两个可执行文件 [`jpeg.exe`和`ddsmraw2pnm.exe`]。

2-下载并安装[cygwin](http://cygwin.com/setup.exe)。

3- 下载并设置 [Matlab pnmreader 代码](http://www.mathworks.com/matlabcentral/fileexchange/4176-pnm-toolbox-3-01?download=true)。

4-创建一个文件夹并使其内容如下：

*   JPEG文件
*   ddsmraw2pnm.exe
*   ConvertDDSMImageToRaw.m [*实现稍后在回答*]
*   cygwin1.dll [*来自 "C:\cygwin" 或您安装 cygwin 的其他地方*]

5-`ConvertDDSMImageToRaw`功能实现。

```
function ConvertDDSMImageToRaw(filename, columns, rows, digitizer)
%// ConvertDDSMImageToRaw Convert an image of ddsm database to raw image.
%// -------------------------------------------------------------------------
%// Input:-
%//  o filename : String representing ddsm image file name.
%//  o columns  : Double representing number of columns in the image.
%//  o rows     : Double representing number of rows in the image.
%//  o digitizer: String representing image normalization function name,
%//     which differ from one case to another and have the set of 
%//    values ['dba', 'howtek-mgh', 'howtek-ismd' and 'lumisys' ]
%// -------------------------------------------------------------------------
%// Prepare and execute command of image decompression
commandDecompression = [which('jpeg.exe') ' -d -s ' filename];
dos(commandDecompression);
%// -------------------------------------------------------------------------
%// Prepare and execute command that convert the decompressed image to pnm format.
rawFileName          = [ filename '.1'];
columns              = num2str(columns);
rows                 = num2str(rows);
digitizer            = ['"' digitizer '"'];
commandConversion    =[ which('pnm.exe') ,' ',rawFileName,' ',columns,' ',rows,' ',digitizer];
dos(commandConversion);
%// -------------------------------------------------------------------------
%// Wrtie the image into raw format
pnmFileName          = [rawFileName '-ddsmraw2pnm.pnm'];
image                = pnmread(pnmFileName);
imwrite(image,[filename '.raw']);
end 
```

6-`[cols,rows,digitizer]`从 .ics 文件中获取图像信息：

![.ics 文件示例](../Images/ee2e4b2f396e819152cc4209aba2bb18.png)

如果数字化仪是“howtek”，则将其用作“howtek-mgh”，这就是我想出来的。

7-现在使用我们实现的功能转换您的图像，如下所示：

```
filename  = 'A_1709_1.LEFT_CC.LJPEG';
digitizer = 'howtek-mgh';       
imageSize = [ 5341  2806 ];
ConvertDDSMImageToRaw(filename, imageSize(1) , imageSize(2), digitizer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T05:28:46.293

我找到了一个**完整**的解决方案，可以下载、规范化（基于扫描仪）并将 DDSM 图像转换为 PNG 格式。Chris Rose 博士编写了该程序，该程序可在 GitHub 上的[https://github.com/multinormal/ddsm获得](https://github.com/multinormal/ddsm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T15:11:14.437

[这](https://github.com/trane293/DDSMUtility)是一个更好的来源。

正如教程中提到的，这不是劳动密集型的。

我已经使用它了。它完美而轻松地工作。请记住仅使用 32 位版本的 cygwin。它不适用于我的 64 位 cygwin。

# c++ - FILE*、fopen_s 和初始化列表

> ID：13365590
> 
> 赞同：1
> 
> 时间：2012-11-13T17:25:18.833
> 
> 标签：c++, initialization-list

我有一个这样声明的类（仅显示相关部分）：

```
class X
{
  public:
     X(int x);

  private:
     FILE *stream;
     int _x;
} 
```

构造函数打开一个文件：

```
X::X(int x) : _x(x)
{
   int err = fopen_s(&stream, "myfile.txt", "w");
   fputs("some text", stream);
   ...
} 
```

它在另一个类中使用，如下所示：

```
class Y
{
   public:
      Y();

   private:
      X myX;
} 
```

在 Y 的构造函数中，myX 通过初始化列表进行初始化，并在其上调用一个方法：

```
Y::Y() : myX(100)
{
   myX.init();
} 
```

当我单步执行 X 的构造函数时，流被分配和写入而没有错误。如果我在 Y 的构造函数的左大括号处放置一个断点，则流的值与 X 的构造函数期间相同。但是，当我进入 Y 的构造函数的主体时，流的值会发生变化，并且下次使用它（例如在 init() 中）导致访问冲突。如果我将 Y 更改为存储指向 X 的指针而不是直接引用并在堆上分配 X，则一切正常。我怀疑它与 fopen_s 分配 FILE* 的位置有关，但我无法确认这一点。谁能解释为什么这会失败？

# java - 未找到 Java3D 类

> ID：13365593
> 
> 赞同：3
> 
> 时间：2012-11-13T17:25:26.077
> 
> 标签：java, osx-mountain-lion, java-3d

我正在尝试运行 Java 应用程序并收到以下错误消息。应用程序本身加载正确，只是它的某些部分似乎失败了。

```
Nov 13, 2012 2:43:53 PM org.jdesktop.application.Task failed
SEVERE: My.Application$9@7c4f8358 failed: java.lang.NoClassDefFoundError: javax/media/opengl/GLCapabilitiesChooser
java.lang.NoClassDefFoundError: javax/media/opengl/GLCapabilitiesChooser
at jpl.mipl.jade.jadis.agile2d.swing.JOGLPluggableRenderer.notifyBeforeSetRootPane(JOGLPluggableRenderer.java:105)
at jpl.mipl.jade.jadis.StereoJFrame.setRootPane(StereoJFrame.java:264)
at javax.swing.JFrame.frameInit(JFrame.java:236)
at javax.swing.JFrame.<init>(JFrame.java:159)
at jpl.mipl.jade.jadis.StereoJFrame.<init>(StereoJFrame.java:172)
at StereoWS.DSStereoFrame.<init>(DSStereoFrame.java:70)
at StereoWS.StereoWSView$9.doInBackground(StereoWSView.java:1067)
at org.jdesktop.swingworker.SwingWorker$1.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at org.jdesktop.swingworker.SwingWorker.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: javax.media.opengl.GLCapabilitiesChooser
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 14 more 
```

我正在运行完全更新的 OS X 10.8，我已经安装了 JDK 7，并且很沮丧地安装了 Apple 的 Java 开发工具。该程序依赖于许多外部库，但这些库是随 jar 提供的，我相信该程序在运行时确实会在分发目录中查找它们（尽管错误不是由于这些包引起的，我相信） . 据我所知，我需要运行该应用程序的所有内容要么已经安装，要么已经安装在 jar 可以找到它的地方

我不知道我还需要做些什么来设置我还没有做过的环境，所以如果有人可以提出一些建议，我会全力以赴！我将提供所需的任何额外信息，但我不知道有什么帮助——无论如何我都不是 Java 专家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T21:59:10.730

我相信您正在使用旧 Oracle 站点中的 Java3D jar 和最新的 JogAmp JOGLv2，这将不起作用，原因有两个 A) jogl.jar 现在重命名为 jogl-all.jar B) 内部命名空间更改，所有 com. sun.* 类现在可以在 com.jogamp.* 下找到，这会混淆需要 com.sun.* 命名空间的旧 Java3D 代码。

JOGL 和 Java3D 现在都由 JogAmp 社区的成员维护： 移动背景：[http](http://labb.zafena.se/?p=656) ://labb.zafena.se/?p=656 目前唯一支持使用 Java3D 的方式是结合使用社区维护的 Java3D使用最新的 JogAmp JOGL v2。

关于如何设置最新社区维护的 Java3D 与 JOGLv2 结合的教程。Julien Gouesse：Java 3D est de retour [Java 3D 回归] [http://gouessej.wordpress.com/2012/08/01/java-3d-est-de-retour-java-3d-is-back/](http://gouessej.wordpress.com/2012/08/01/java-3d-est-de-retour-java-3d-is-back/)

# jquery - 使用 Append 将 JQuery 对象返回到 DOM

> ID：13365594
> 
> 赞同：0
> 
> 时间：2012-11-13T17:25:25.807
> 
> 标签：jquery, append

我创建了一个创建元素的函数 createFileSelect()：

```
function createFileSelect() {

    var fSpan = $("<span/>",
        {
            "id" : "fileUpload-span",
            "class" : "btn btn-add",
            "text" : "Add a file.."
        }); 

    var fInput = $("<input/>", {
        "type": "file",
        "name": "files[]",
        "id": "fileUpload"       
    });

    return $(fSpan + fInput);
} 
```

然后我使用以下方法调用它：

```
$("#fileUpload-holder").append(createFileSelect()); 
```

但是，我收到一个错误

```
Syntax error, unrecognized expression: [object Object][object Object] 
```

如何使用函数将 (2) 元素与 dom 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:27:58.480

更改 return 语句以使用 jQuery 的[`.add`](http://api.jquery.com/add/)方法：

```
return fSpan.add(fInput); 
```

* * *

如果您想要`input`在 中`span`，请改用：

```
return fSpan.append(fInput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:29:27.403

javascript中`+`没有为对象定义运算符，因此它们首先被强制转换为字符串（即`"[object Object][object Object]"`字符串）。然后，当您将字符串传递给`$`函数时，它会尝试将其解释为 HTML，这反过来会产生您所看到的语法错误。

要将两个 jQuery 对象合并在一起，您可以使用该[`.add()`](http://api.jquery.com/add/)函数，该函数返回一个包含两者的新对象：

```
return fSpan.add(fInput); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:28:01.307

替换您的以下行：

```
return $(fSpan + fInput); 
```

对于这个：

```
return fSpan.add(fInput); 
```

# c# - 如何确定存储过程是否需要参数？

> ID：13365596
> 
> 赞同：1
> 
> 时间：2012-11-13T17:25:35.400
> 
> 标签：c#, .net, sql-server, massive

> **可能重复：**
> [如何从 SQL Server 中的存储过程中检索参数列表](https://stackoverflow.com/questions/33761/how-can-i-retrieve-a-list-of-parameters-from-a-stored-procedure-in-sql-server)

我正在使用 Massive 创建一个通用的存储过程执行器。基本上，我有一个函数，它采用过程名称和可变数量的参数。然后，我盲目地尝试使用传递的参数执行该存储过程并返回结果或处理错误。

我的问题是：有没有办法让我在调用存储过程之前确定存储过程需要哪些参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:30:54.287

尝试这个：

```
SELECT 
    ProcedureName = pr.Name,
    ParameterName = p.Name,
    Typename = ty.name 
FROM 
    sys.parameters p
INNER JOIN 
    sys.procedures pr ON p.object_id = pr.object_id
INNER JOIN 
    sys.types ty ON p.user_type_id = ty.user_type_id
WHERE   
    pr.Name = '.....'   -- put your stored procedure name here
ORDER BY 
    p.Name, p.parameter_id 
```

这将检查系统目录视图并向您显示给定过程的参数及其类型。

系统目录视图包含附加信息（比如参数是否有默认值，如果有，它是什么；是否是 XML 参数等等） - 查看[MSDN 文档了解所有详细信息](http://msdn.microsoft.com/en-us/library/ms176074.aspx)！

# jquery - IE9 不显示导航

> ID：13365598
> 
> 赞同：2
> 
> 时间：2012-11-13T17:25:47.123
> 
> 标签：jquery, navigation, internet-explorer-9

我的导航不会在 IE9 中显示，但会在所有其他浏览器中显示。

请帮忙，不确定IE8或之前的版本..

我的问题是什么？网址：www.govansk.com

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:35:33.580

要做的第一件事是将 jQuery 提升为第一个包含的 JavaScript 文件。这解决了“jQuery 未定义”错误。把它移到前面`cufon-yui.js`：

```
<!-- ////////////////////////////////// -->
<!-- //      Javascript Files        // -->
<!-- ////////////////////////////////// -->
<SCRIPT type="text/javascript" src="js/jquery-1.4.3.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="js/cufon-yui.js"></SCRIPT> 
```

~~然后您似乎缺少 s3slider 插件的包含。通过快速的 Google 搜索判断，在包含 jQuery 之后，您必须在某处有此行：~~

```
<script src="js/s3Slider.js" type="text/javascript"></script> 
```

当然，您必须确保该文件的存在。也许那条违规行是切换到任何 nivo 滑块之前的剩余部分，因为两者似乎都针对该`#slider`元素。

我很确定就是这样。删除此代码：

```
$("#slider").s3Slider({
    timeOut: 12000,
    captionOpacity: 0.7            
}); 
```

编辑：至于 Cufon，我发现了这篇文章：http: [//blog.ninanet.com/2011/04/29/cufon-and-ie9](http://blog.ninanet.com/2011/04/29/cufon-and-ie9)

如果没有帮助，我建议在 IE 中搜索更多关于 Cufon 的内容。我没有使用 Cufon 的经验，所以恐怕无法进一步帮助您。

# json - 如何从 json 文件中填充模型数据

> ID：13365602
> 
> 赞同：3
> 
> 时间：2012-11-13T17:26:06.100
> 
> 标签：json, backbone.js, model

我目前必须在下面编写代码和一个静态 json 文件。但是如何将我的模型默认设置为 json 文件中的数据？我的 JSON 文件有几页 - 我希望能够获取默认值并设置默认值。

```
var PageModel = Backbone.Model.extend({
initialize: function () {
    console.log('initiliazed model');
},

url: "data/data.json",

defaults: function() {
    return PageView.defaultsFromJSON;
}

});

var PageView = Backbone.View.extend ({
initialize: function () {
    console.log('initiliazed view')
    _.bindAll(this);
    this.model.fetch();
    this.render();
    this.model.on('change',this.render);
},

el : '#ev-wrapper',

render: function () {
    $('#ev-wrapper').append(Handlebars.compile($('#ev-template').html())(this.model.toJSON()));

    $('.ev-asset-loader').fadeOut('slow', function (event) {
        this.remove();

    });
}

});

pageModel = new PageView({model: new PageModel()}); 
```

json 文件 -

```
{
"page":[{
        "id":"p05",
        "title":"ptitle1",
        "text":"pinitialtext"
},
{
        "id":"p10",
        "title":"ptitle2",
        "text":"pinitialtext"
}]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:14:48.257

您是否使用服务器端语言呈现页面？如果是，则将 JSON 字符串注入包含默认值的视图中，并用它填充模型。

```
var data = <?php echo $json ?>, 
    model = new PageModel(data),
    view = new PageView({model: model, el : $('#ev-wrapper')[0]}); 
```

如果您不使用服务器端语言，我认为您可以使用 JQuery 发出 AJAX 请求来加载您的 JSON 数据，但这与调用`fetch`.

我看不到以另一种方式“包含”JSON文件的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T14:25:38.790

我正在尝试解决类似的问题（Populating Backbone models from a static JSON file for a demo）。

我在 Backbone.Leaflet 库中遇到了一个示例： [https ://github.com/LuizArmesto/backbone.leaflet/blob/master/examples/map.html](https://github.com/LuizArmesto/backbone.leaflet/blob/master/examples/map.html)

```
 // This isn't the backbone way, but we want to keep this example
  // as simple as possible.
  $( '#render' ).click( function () {
    geoCollection.reset( JSON.parse( $( '#geoJSON' ).val() ) );
  }); 
```

在此示例中，相关 ID (#geoJSON) 是一个文本区域，其中包含作者 (LuizArmesto) 尝试加载到模型中的 JSON。

```
 <textarea id="geoJSON">
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[-46.6155, -23.5023], [-46.6193, -23.5030], [-46.6247, -23.5073], [-46.6252, -23.5117], [-46.6218, -23.5115], [-46.6154, -23.5080], [-46.6150, -23.5037], [-46.6155, -23.5023]]]
      },
      "properties": {}
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [[-46.6318, -23.4900], [-46.6256, -23.4916], [-46.6200, -23.4900], [-46.6100, -23.4900]]
      },
      "properties": {}
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [-46.6368, -23.5100]
      },
      "properties": {}
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [-46.6156, -23.5016]
      },
      "properties": {}
    }
  ]
}

</textarea> 
```

正如他在评论中所说，这不是骨干网（或“骨干网方式”）的惯用语，但它对于不需要服务器的小型副项目非常有用。

# shell - HDFS 命令行追加

> ID：13365604
> 
> 赞同：2
> 
> 时间：2012-11-13T17:26:14.883
> 
> 标签：shell, command-line, hadoop, append, hdfs

有什么方法可以从命令行附加到 HDFS 上的文件，例如复制文件：

```
hadoop fs -copyFromLocal <localsrc> URI 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:52:45.530

此功能在 Hadoop 2.3.0 中作为[appendToFile](http://hadoop.apache.org/docs/r2.3.0/hadoop-project-dist/hadoop-common/FileSystemShell.html#appendToFile "appendToFile hdfs 命令")实现，语法如下：

```
hdfs dfs -appendToFile localfile /user/hadoop/hadoopfile 
```

（它在 2009 年首次提出，当时正在考虑 HDFS 附加功能： [https](https://issues.apache.org/jira/browse/HADOOP-6239) ://issues.apache.org/jira/browse/HADOOP-6239 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:04:33.567

cli 不支持追加，但 httpfs 和 fuse 都支持追加文件。

```
w301% ls -lA
total 0
-rw-r--r-- 1 hdfs supergroup 0 Nov 14 01:02 test.me
w301% cat test.me
w301% sync
w301% cat test.me
hello
w301% echo "more rows" >> test.me
w301% sync
w301% cat test.me 
hello
more rows 
```

编辑：但请记住，只有一个客户端可以附加到文件。

# javascript - 在隐藏元素上加载 JW Player

> ID：13365606
> 
> 赞同：4
> 
> 时间：2012-11-13T17:26:21.540
> 
> 标签：javascript, jquery, jwplayer

我正在使用 JW Player 来显示 Flash 视频（尽管它很快就会有浏览器支持允许的 HTML5 源）。

在用户在页面上执行操作之前，视频需要不可见（但已加载）。一旦他们采取了行动，视频`div`就会显示出来，我想尽快`play()`观看视频。

这是我的`setup()`电话。`<div id="video">`隐藏在我的 CSS 文件中，就像 JW Player 的一样`<div id="video_wrapper">`（都设置为`display: none;`最初）。

```
jwplayer("video").setup({
  playlist: [
    {
      sources: [
        { file: 'http://example.com/video.flv' }
      ]
    }
  ],
  controls: false,
  wmode: 'transparent'
}); 
```

一段时间后，我正在这样做：

```
$('#video').show();
$('#video_wrapper').show();
jwplayer().play(); 
```

如果我不先`div`在我的 CSS 文件中隐藏包含的 s，我不会在控制台中收到任何错误，并且视频可以正常播放。

JW Player 不会`setup()`在隐藏元素上触发其方法吗？如果没有，我应该如何达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T16:47:53.987

看看这里的解决方案是否适合您：

[隐藏 JWPlayer 时无法播放音频](https://stackoverflow.com/questions/15070196/unable-to-play-audio-when-jwplayer-is-hidden)

定位包含的 div 使其不再可见，然后在其上调用 setup 函数。您的显示功能必须稍微复杂一点，才能将显示设置更改回您想要的样子。

# gcc - 使用代码块时缺少 g++

> ID：13365608
> 
> 赞同：0
> 
> 时间：2012-11-13T17:26:25.757
> 
> 标签：gcc, g++

我正在使用 fedora-16 的代码块。当我尝试构建时，它会启动构建，但随后会显示“/bin/sh: g++ command not found”。

如果我选择编译，它编译确定。

所以看着这个网站，他们说 gcc 使用 g++，所以我尝试`"gcc -c this.c"`了并且成功了。

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:34:12.273

为了在 Fedora 中编译 .c 和 .cpp 文件，您需要安装编译器。要安装 gcc 和 g++ 编译器，您将需要 build-essential 包。这也将安装 GNU make。

build-essential 包含一个包列表，这些包对于构建 Ubuntu 包至关重要，包括 gcc 编译器、make 和其他必需的工具。

```
$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install build-essential
$ gcc -v
$ make -v 
```

现在，您应该能够使用 C/C++ 编译器编译软件了。

要安装用于 c 和 c++ 开发的手册页，请安装 manpages-dev 包。

如果

```
$ sudo apt-get install build-essential 
```

不起作用，试试这个：

```
 su -    
yum install make automake gcc gcc-c++ kernel-devel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:26:16.283

Codeblock 调用 g++ 来链接库。

# python - matplotlib 的大量子图

> ID：13365617
> 
> 赞同：15
> 
> 时间：2012-11-13T17:26:57.923
> 
> 标签：python, graphics, plot, matplotlib, subplot

我想用 Python matplotlib 创建带有许多（100）个子图的图。我找不到合适的语法：

我想要类似的东西（这不起作用）

```
plt.subplot(10,10,i,X1, Y) 
```

在 i 从 0 到 99 的循环中，然后

```
plt.show() 
```

许多教程中都提供了语法，以应对只有少数子图的情况。那么，语法可以是

```
plt.close('all')
fig = plt.figure()

ax1 = plt.subplot(221)
ax2 = plt.subplot(223)
ax3 = plt.subplot(122)

example_plot(ax1)
example_plot(ax2)
example_plot(ax3)

plt.tight_layout() 
```

[代码来自这里](http://matplotlib.org/users/tight_layout_guide.html)。

对于我的问题，我想我不能使用与`plt.subplot(10101)`我不理解的相同的语法，等等。

你有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T17:33:15.257

试试这个：

```
fig, ax = plt.subplots(10, 10) 
```

其中 ax 将在一个列表（列表）中包含一百个轴。

这是一个非常方便的功能，来自[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.subplots)：

```
Definition: plt.subplots(nrows=1, ncols=1, sharex=False, sharey=False, squeeze=True, subplot_kw=None, **fig_kw)
Create a figure with a set of subplots already made.

This utility wrapper makes it convenient to create common layouts of
subplots, including the enclosing figure object, in a single call. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-20T19:33:12.087

这是一个完整的代码解决方案，它显示了事物的编号方式，因为看起来人们仍然会来这里查看：

```
columns = 10
rows = 4
fig, ax_array = plt.subplots(rows, columns,squeeze=False)
for i,ax_row in enumerate(ax_array):
    for j,axes in enumerate(ax_row):
        axes.set_title('{},{}'.format(i,j))
        axes.set_yticklabels([])
        axes.set_xticklabels([])
#         axes.plot(you_data_goes_here,'r-')
plt.show() 
```

它输出这个来向你展示编号是如何工作的（我只做了 4 行而不是 10 以使图片更小，只需将“行”更改为 10 以获得 10 行子图）：

## [![Matplotlib 子图数组](../Images/8712830617de6d63cfb5a6d4368ba43f.png)](https://i.stack.imgur.com/bRnK1.png)

编号显示您在每个位置将拥有的 i 和 j 值，因此您可以在 matplotlib 子图数组中按照您想要的方式排列。这包含了您想要的任何布局的数组中的子图。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-13T17:32:26.537

你的例子几乎是正确的。请用：

```
for i in range(100):
    ax = plt.subplot(10,10,i)
    ax.plot(...) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-13T23:02:29.627

如果您尝试生成约 100 个子图，则实际上您可能想做这样的事情[，](https://stackoverflow.com/a/13060980/380231)它会运行得更快。您放弃了单独的轴标签，但有 100 个子图，除非您进行*大量*打印，否则您将无法阅读标签。

# javascript - 更新 Google Visualization DataTable 中的数据

> ID：13365618
> 
> 赞同：3
> 
> 时间：2012-11-13T17:26:58.127
> 
> 标签：javascript, google-visualization, google-datatable

如何更新谷歌可视化数据表中的数据？例子：

```
var data = new google.visualization.DataTable();

data.addColumn('string', 'Name');
data.addColumn('string', 'Occupation');

data.addRow(['Bob', 'Shoe Wearer']);
data.addRow(['Henry', 'Transformer']);
data.addRow(['Betty', 'Seltzer Connoisseur']);

// Time passes and Bob changes jobs:
data.addRow(['Bob', 'Beach Comber']); 
```

当然，这增加了一个新行，现在我有两个 Bobs。**如何更新 Bob 的职业？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T09:50:59.053

由于 Bob 是您插入的第一行，因此他的职业位于索引为 0 的行和索引为 1 的列中：

```
data.setValue(0, 1, 'Beach Comber'); 
```

如果您不知道要更新职业的人的行索引，我建议迭代或过滤以查找所有 Bob 行（或您的情况下*的一个*Bob 行）。迭代是“蛮力”的方式，就像这样

```
for (var y = 0, maxrows = data.getNumberOfRows(); y < maxrows; y++) {
    if (data.getValue(y, 0) == 'Bob') {
        data.setValue(y, 1, 'Beach Comber');
    }
} 
```

过滤更优雅：

```
var foundRows = data.getFilteredRows([{column: 0, value: 'Bob'}]);
for (var y = 0, maxrows = foundRows.length; y < maxrows; y++) {
     data.setValue(foundRows[y], 1, 'Beach Comber');
} 
```

参考 API-Doc 可以在此处找到：[https](https://developers.google.com/chart/interactive/docs/reference#DataTable) ://developers.google.com/chart/interactive/docs/reference#DataTable并拥有一堆很好的示例。

# c# - 如何从 PostgreSQL 导出数据库？

> ID：13365619
> 
> 赞同：1
> 
> 时间：2012-11-13T17:26:58.580
> 
> 标签：c#, database, postgresql

我正在做一个对象关系数据库的团队项目，我们中的一个人在 PostgreSQL 中制作了数据库，我们其他人将基于该数据库制作应用程序。他如何导出数据库以供我们与 C# (Visual Studio) 一起使用？Postgres 可以用数据库或类似的东西制作一些文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:57:22.770

@andrefsp 非常正确，您可能希望转储数据库模式，然后将其加载到您机器上的本地 PostgreSQL 安装中以进行测试。

此外，创建一些模式可视化和文档通常很有帮助。我发现免费工具[SchemaSpy 对此](http://schemaspy.sourceforge.net/)很有用，但还有许多其他工具。它会生成一个 HTML 文件和图像树，您可以使用它们来浏览数据库结构。

PgAdmin-III（通常与 PostgreSQL 一起安装）还提供了一些用于查看数据库结构的基本工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:30:56.513

是的，PostgreSQL 可以做到这一点以及更多。您正在寻找的是数据库的转储，它基本上是一个包含所有数据库的文件。

看看[官方文档`pg_dump`](http://www.postgresql.org/docs/current/static/app-pgdump.html)

此命令将从原始数据库生成备份，然后您可以将其与[`pg_restore`命令](http://www.postgresql.org/docs/current/static/app-pgrestore.html)一起使用以将数据库加载到其他地方。

# android - 设置日期格式，使其仅显示月份和年份 - Android

> ID：13365623
> 
> 赞同：0
> 
> 时间：2012-11-13T17:27:14.547
> 
> 标签：android

我需要将日期格式化为只有 MONTH 和 YEAR。不包括DAY，在android中显示。

这是我的代码：

```
Date fechaDatePicker= new Date(txtRespTexto1.getYear()-1900,
txtRespTexto1.getMonth(),
txtRespTexto1.getDayOfMonth()); 
```

这是我用来格式化日期的代码：

```
static String DATE_FORMAT_PICKER = "yyy-MM";
static SimpleDateFormat sdfPicker = new SimpleDateFormat(DATE_FORMAT_PICKER); 
```

这是格式方法：

```
sdfPicker.format(fechaDatePicker))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:32:36.257

格式不正确。它应该是`yyyy-MM`

```
static String DATE_FORMAT_PICKER = "yyyy-MM"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:33:40.380

我不确定是否可以使用默认的 android 日期选择器来做到这一点。最简单的选择是使用自定义日期选择器。这是一个 -

*   [http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

如果您不喜欢那个，您可以创建自己的日期选择器，这里是创建自定义组件的链接

*   [http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

# php - 如果存在则调用子类的 __call 方法，如果不存在则抛出异常

> ID：13365625
> 
> 赞同：4
> 
> 时间：2012-11-13T17:27:15.190
> 
> 标签：php, oop, magic-methods

[编辑] 更新了标题以更准确地反映问题

我要解决的问题是：我需要知道是否调用了一个方法`parent::`，虽然我可以使用`debug_backtrace`它，但似乎必须有更好的方法来做到这一点。

我一直在研究后期静态绑定，但也许我对它的理解还不够深入，无法找到解决方案。

有问题的方法是`__call`，所以我不能简单地传入一个额外的参数，因为它的错误多或少正好是两个。

试图解决这个问题的原因是父类有`__call`，而子类可能有也可能没有`_call`。如果孩子没有它，并且父母没有调度调用，那么我想抛出异常或错误。如果孩子确实有方法，那么我会返回`false`（不，我们没有处理这个）并让孩子`_call`方法继续。

到目前为止，我唯一可行的解​​决方案是将子调用`parent::__call`包装在 try/catch 块中，如果父进程不路由请求，则默认情况下让父进程抛出异常。

IE。

```
class Parent {
  public function __call( $method, $params ) {
    if( preg_match( $this->valid, $method ) {
      $this->do_stuff();
      // if child has a call method, it would skip on true
      return true;
    }
    elseif( ** CHILD HAS CALL METHOD ** ) {
      // this would let the child's _call method kick in
      return false;
    }
    else {
      throw new MethodDoesNotExistException($method);
    }
  }
}

class Child extends Parent {
  public function __call( $method, $params ) {
    if( ! parent::__call( $method, $params ) ) {
      do_stuff_here();
    }
  }
} 
```

如果父级不处理该方法有效，则抛出异常，我只是想看看是否有更优雅的解决方案，因为对流控制使用异常似乎不太正确。但是也没有使用堆栈跟踪来找出调用者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:31:35.807

这应该在您的父类中执行：

```
if (__CLASS__ != get_class($this)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:02:08.193

我不完全确定这是否符合您的需求，而且从 OO 设计的角度来看，我也认为这种黑客行为非常糟糕。但是，编码是一件有趣的事情:)

```
<?php

class ParentClass 
  {
  public function __call( $method, $params ) 
  {
    if($method === 'one')
    {
      echo "Parent\n";
      return true;
    }
    elseif($this->shouldForwardToSubclass($method)) 
      {
        return false;
      }
    else 
    {
      throw new Exception("No method");
    }
  }

   protected function shouldForwardToSubclass($methodName)
   {
      $myClass = get_class($this);
      if (__CLASS__ != $myClass)
      {
        $classObject = new ReflectionClass($myClass);
        $methodObject = $classObject->getMethod('__call');
        $declaringClassName = $methodObject->getDeclaringClass()->getName();
        return $myClass == $declaringClassName;
      }
      else 
          {
            return false;
          }
}

}

class ChildClass1 extends ParentClass {
  public function __call( $method, $params ) {
    if( ! parent::__call( $method, $params ) ) 
    {
      echo "Child handle!\n";
    }
  }
}

class ChildClass2 extends ParentClass {
} 
```

后来做：

```
$c = new ChildClass1();
$c->one();
$c->foo();

$c = new ChildClass2();
$c->foo(); 
```

会产生：

```
Parent
Child handle!
PHP Fatal error:  Uncaught exception 'Exception' with message 'No method' in /home/andres/workspace/Playground/test.php:18
Stack trace:
#0 /home/andres/workspace/Playground/test.php(58): ParentClass->__call('foo', Array)
#1 /home/andres/workspace/Playground/test.php(58): ChildClass2->foo()
#2 {main} 
```

高温高压

# sql - 在 PostgreSQL 中创建表时，会创建表，但不会创建列

> ID：13365626
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:27:15.717
> 
> 标签：sql, postgresql, ddl

当我运行以下语句时，表已创建，但没有列：

```
CREATE TABLE "mod_1237" ("Collecteddepth" float8 NOT NULL, "Collectedtime"
float8 NOT NULL, "CollectedData" Varchar(45) NOT NULL, "Collectedpass"
float8 NOT NULL, "Collectedmodtime" float8 NOT NULL) WITH (OIDS = FALSE); 
```

我知道我没有创建主键，但这不应阻止生成列。当我运行此代码时，它也不会产生任何错误，因此在我尝试写入表之前一切看起来都很好。关于为什么这不起作用或如何使用给定列制作表格的任何想法？

我在 Windows Server Standard SP2 上使用 PostgreSQL 版本 9.1.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:01:06.027

Hubert（“Depesz”）在 PostgreSQL 邮件列表上回答了[这个问题，该问题被交叉发布](http://archives.postgresql.org/message-id/E1TYJq5-00038e-4s@wrigleys.postgresql.org)。供任何在这里阅读它的人参考，[这里是答案](http://archives.postgresql.org/message-id/20121113231947.GA7849@depesz.com)。由于尚未将其添加到档案中，该链接将在一段时间内出现 404，因此我将在下面复制 Herbert 的答案：

* * *

> 您很可能确实插入了：
> 
> ```
> insert into mod_1237 (Collecteddepth) values (...) 
> ```
> 
> 即你没有引用列名。因此问题。
> 
> 在 psql 中，您可以执行以下操作：
> 
> ```
> \d mod_1237 
> ```
> 
> 你会看到列在那里。
> 
> 此致，
> 
> 德佩斯

换句话说：如果您在表定义中使用双引号，请在您引用它们的任何地方双引号。

这是一个常见问题解答；看：

*   [PostgreSQL - 不带引号的查询语法](https://stackoverflow.com/q/6304268/398670)
*   [省略双引号在 PostgreSQL 上进行查询](https://stackoverflow.com/q/6331504/398670)

和更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:34:56.267

只需去掉引号，因为它们是不需要的。

```
CREATE TABLE mod_1237 (Collecteddepth float8 NOT NULL, Collectedtime float8 NOT NULL, CollectedDate Varchar(45) NOT NULL, Collectedpass float8 NOT NULL, Collectedmodtime float8 NOT NULL) WITH (OIDS = FALSE); 
```

# reporting-services - 使用多值参数和 subr 时，在主报告中为每个驱动程序显示一个新页面

> ID：13365629
> 
> 赞同：2
> 
> 时间：2012-11-13T17:27:43.023
> 
> 标签：reporting-services, ssrs-grouping

我正在编写一份使用多个子报告的报告。我有两个参数：报告的 t_driver_pk 和 BatchID。我已经能够使用分页符和重复标题选项在子报表的新页面上显示每个驱动程序的数据（所有子报表都按 t_driver_pk 分组）。但是，当我转到主报告并运行它时，在**t_driver_pk**参数上选择多个驱动程序。我得到一份报告，其中结合了所有这些驱动程序的数据。本质上，我希望它显示如下：

**参数：** * ***t_driver_pk**** : 5000,4500 **BatchID** :610

**第一司机**

子报表1

子报表2

子报表3

子报表4

**第二司机**

子报表1

子报表2

子报表3

子报表4

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:25:50.267

您是否尝试将数据集添加到由所选 t_driver_pk 值驱动的报表中（即，如果在参数中选择了 5000 和 4500，则新数据集返回相同的值）。

您应该能够将此数据集与列表数据区域一起使用，您可以将子报表插入其中，然后将 t_driver_pk 的当前值从新数据集传递到子报表。这应该对 t_driver_pk 的每个值重复它们。

# jsf - 具有 @ViewScoped 行为的 @SessionScoped bean

> ID：13365633
> 
> 赞同：0
> 
> 时间：2012-11-13T17:27:54.153
> 
> 标签：jsf, jakarta-ee, jsf-2, javabeans, scopes

我的会话范围 bean 出现了奇怪的行为。我使用以下导入和注释使其具有会话范围：

编辑：更多代码

```
 import javax.enterprise.context.SessionScoped;
    import javax.inject.Named;

    @Named
    @SessionScoped
    public class DetailsBean implements Serializable {

    private LinkedHashMap<String, String> folder;
    @Inject
    private ApplicationBean appBean;
    @Inject
    private UserBean userBean;

    @PostConstruct
    public void resolveID() {
    this.folder = new LinkedHashMap<String, String>();
    for (LinkedHashMap<String, String> tempfolder : appBean.getRepositoryContent()) {
        if (tempfolder.get("text:nodeid").equals(URLid)) {
            this.folder = tempfolder;
          }
        }
    } 
```

JSF 页面的代码片段：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:rich="http://richfaces.org/rich">
    <f:metadata>
      <f:viewParam name="id" value="#{detailsBean.URLid}" required="true" requiredMessage="You must provide an Object Id"/>
      <f:event type="preRenderView" listener="#{detailsBean.resolveID}" />
    </f:metadata>
    <h:head>
      <title>Dataset #{detailsBean.name}</title>
    </h:head>
    <h:body>
     <h:form>
        <h:panelGrid columns="2" columnClasses="fixed-column">
            Name <h:inputText value="#{detailsBean.name}"
                              id="name" required="true"
                              requiredMessage="name required"/>
            <rich:message for="name" ajaxRendered="true"/>
        </h:panelGrid>
    </h:body>
    </h:form>
    </html> 
```

现在，当我单击 jsf 页面中的链接时，会实例化这样的 DetailsBean。当我单击具有不同内容的另一个链接时，将使用相同的 bean，因为我仍在同一个会话中。现在奇怪的是，即使我创建了 2 个不同的浏览器选项卡，即使在刷新页面后它们也会显示不同的内容。同一个 bean 实例如何显示不同的内容？我认为通常只有 @ViewScoped bean 可以实现这一点？不要误会我的意思，我确实希望他们显示不同的内容，所以@ViewScoped 将是在这里使用的正确决定，但我只是想知道这怎么可能......

EDIT2：当我使用 javax.faces.ViewScoped 时，上面的代码不再起作用（然后由于 LinkedHashMap，我得到 java.io.NotSerializableException）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T19:45:39.870

我相信您在导入行中有错误。`import javax.enterprise.context.SessionScoped;`. 您应该从`javax.faces.bean.SessionScoped`.

# c++ - 有没有办法在不使用流的情况下将 INT 解析为 string/char*？

> ID：13365638
> 
> 赞同：2
> 
> 时间：2012-11-13T17:28:03.100
> 
> 标签：c++, parsing

有很多关于从 int 转换为 string 的帖子，但它们实际上都只涉及打印到屏幕或使用 ostringstream。

我正在使用 ostringstream，但我的公司不希望我使用任何流，因为它有可怕的运行时。

我在 C++ 文件中执行此操作。

我的问题是，我打算在执行过程中创建数百万个流，写入缓冲区，然后将内容复制到字符串中，如下所示：

```
ostringstream OS;
os << "TROLOLOLOLOL";
std::string myStr = os.str(); 
```

存在冗余，因为它正在制作此缓冲区然后将其全部复制。啊！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:31:07.120

在 C++11 中：

```
string s = std::to_string(42); 
```

几周前我做了一个基准测试，得到了这些结果（使用当前 Xcode 附带的 clang 和 libc++）：

```
stringstream took 446ms
to_string took 203ms
c style took 170ms 
```

使用以下代码：

```
#include <iostream>
#include <chrono>
#include <sstream>
#include <stdlib.h>

using namespace std;

struct Measure {
  chrono::time_point<chrono::system_clock> _start;
  string _name;

  Measure(const string& name) : _name(name) {
    _start = chrono::system_clock::now();
  }

  ~Measure() {
    cout << _name << " took " << chrono::duration_cast<chrono::milliseconds>(chrono::system_clock::now() - _start).count() << "ms" << endl;
  }
};

int main(int argc, const char * argv[]) {
  int n = 1000000;
  {
    Measure m("stringstream");
    for (int i = 0; i < n; ++i) {
      stringstream ss;
      ss << i;
      string s = ss.str();
    }
  }
  {
    Measure m("to_string");
    for (int i = 0; i < n; ++i) {
      string s = to_string(i);
    }
  }
  {
    Measure m("c style");
    for (int i = 0; i < n; ++i) {
      char buff[50];
      snprintf(buff, 49, "%d", i);
      string s(buff);
    }
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:30:59.487

在 C++11 中，你有[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string). 尽管它可能使用了`stringstream`幕后技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:39:58.943

你应该看看性能图表`boost::lexical_cast`：

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast/performance.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast/performance.html)

它将 lexical_cast 与 stringstream（有和没有构造）和 scanf/printf 进行比较。

> 大多数情况下 boost::lexical_cast 比 scanf、printf、std::stringstream 快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T18:13:39.377

重用字符串流缓冲区。请注意，这不是线程安全的。

```
#include <sstream>
#include <iostream>
#include <string>

template<class T>
bool str_to_type(const char *str, T &value) {
  static std::stringstream strm;
  if ( str ) {
    strm << std::ends;
    strm.clear();
    strm.setf(std::ios::boolalpha);
    strm.seekp(0);
    strm.seekg(0);
    strm << str << std::ends;
    strm >> value;
    return !strm.fail();
  }
  return false;
}

int main(int argc, char *argv[])
{
  int i;
  if (!str_to_type("42", i))
    std::cout << "Error" << std::endl;
  std::cout << i << std::endl;
    return 0;
} 
```

# windows - 有没有一种简单的方法可以从 Windows 命令行获取当前时间到最接近的毫秒？

> ID：13365640
> 
> 赞同：0
> 
> 时间：2012-11-13T17:28:18.857
> 
> 标签：windows, windows-7, command-line, time, command

我注意到你可以用它`echo %time:~0,12%`来获得最接近的 100 秒的时间。

但是，理想情况下，我希望获得自 1970 年 1 月 1 日格林威治标准时间 00:00 以来的时间，以秒为单位，精确到小数点后三位（例如`1352822663.863`）。

似乎没有简单的方法可以做到这一点......有人可以推荐一个好的起点吗？

# c# - 实体框架 4：我的加载方法和 IsLoaded 属性在哪里？

> ID：13365645
> 
> 赞同：2
> 
> 时间：2012-11-13T17:28:27.887
> 
> 标签：c#, entity-framework

我正在使用 EF4，并且在我的班级中使用 System.Data.Entity dll。但是，我看不到我的实体导航属性的加载方法。

如何访问此方法？

我正在做的是创建 .NET 的 e 4.0 项目，从数据库创建我的 edmx，右键单击模型 edmx 并生成一个 DBContext。

但是，我可以访问我的上下文的本地属性，我认为这是 EF4 的一个特性。

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T18:00:09.287

对于`DbContext`方法，`IsLoaded`属性和`Load`方法已被移动：

```
context.Entry(yourEntity)
   .Collection(entity => entity.NavigationProperty)
   .IsLoaded;

context.Entry(yourEntity)
   .Collection(entity => entity.NavigationProperty)
   .Load(); 
```

*   `Entry`方法： http: [//msdn.microsoft.com/en-us/library/gg696578 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696578(v=vs.103).aspx)
*   `Collection`方法： http: [//msdn.microsoft.com/en-us/library/gg671324 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg671324(v=vs.103).aspx)
*   `IsLoaded`属性： http: [//msdn.microsoft.com/en-us/library/gg696146 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696146(v=vs.103).aspx)
*   `Load`方法： http: [//msdn.microsoft.com/en-us/library/gg696220 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696220(v=vs.103).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:43:05.950

当您编写查询时（所有这些也适用于 lambda 语法，顺便说一句）

```
From a in context.EntitySet.Include("Navigation Property NAme")
select a 
```

一切都将在那里;) .. 或更多导航属性将被填充。

虽然有很多连接可能会很奇怪

你也可以

```
From a in context.EntitySet.Include("Navigation1.Navigation2.Navigation2")
                           .Include("SomeOtherNavigation")
    select a 
```

其中 navigation1 和 SomeOtherNavigation 是实体集上的导航属性

如果失败，您可以在上下文中打开延迟加载。但它的邪恶imo。此外，当您采用 SOA 方法时，它并不能很好地扩展，因为您需要在了解存储库中的延迟加载之前将其包括在内。

即你在你的存储库中运行查询，通过服务发送东西，然后想要前端的导航属性......到那时它为时已晚，无法延迟加载......EG你正在使用一个不支持的wcf服务使用数据服务。

需要注意的是，您必须在 EntitySet 上使用 Include，它不在 IQueryable<> 上。

一个真实的例子：

```
 var csg = from ucsg in c.UserCarShareGroups.Include("UserCarShareGroups.User.UserVehicles")
                      where ucsg.User.UserName.ToLower() == userName.ToLower()
                      && ucsg.CarShareGroup.Carpark.Name.ToLower().Equals(carparkName.ToLower())
                      && ucsg.DeletedBy == null
                      select ucsg.CarShareGroup; 
```

（由于某种原因，数据库有区分大小写的排序规则）

另一种方法（也许更相关的是这里） [实体框架 - .Load（）的麻烦](https://stackoverflow.com/questions/11621611/entity-framework-trouble-with-load?rq=1)

但是，我喜欢按我说的方式做，因为它是明确的，而且我确切地知道要提取什么。尤其是在处理大型数据集时。

将我的担忧与 Load() 结合起来的问题的答案在这里： [Entity Framework 4 load and include combine](https://stackoverflow.com/questions/11015508/entity-framework-4-load-and-include-combine?rq=1)

# java - 调试 libjvm.so 中的 SIGSEGV Java 致命错误

> ID：13365646
> 
> 赞同：5
> 
> 时间：2012-11-13T17:28:31.320
> 
> 标签：java, jvm

我正在尝试在 Centos 5.7 vagrant box 内运行 jetty（它在“真实”计算机上运行良好；使用 centos 和 linux mint 测试）。这是标题错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00002abb2551a8b1, pid=4299, tid=1105414464
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode linux-amd64 )
# Problematic frame:
# V  [libjvm.so+0x87a8b1]  YieldingFlexibleWorkGang::start_task(YieldingFlexibleGangTask*)+0x11
#
# An error report file with more information is saved as:
# /usr/local/jetty-7.6.7/bin/hs_err_pid4299.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#
Aborted 
```

我在这里粘贴了日志：[https ://raw.github.com/gist/4067152/3ce91df20828ba1d83271aacbc56c985a4e22ab1/gistfile1.txt](https://raw.github.com/gist/4067152/3ce91df20828ba1d83271aacbc56c985a4e22ab1/gistfile1.txt)

我试图得到一些提示。:) 已经在[http://bugs.sun.com/](http://bugs.sun.com/)上搜索了 google 和 bug 数据库。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:08:41.077

如果您能够轻松地重现这一点，您应该配置您的系统以创建核心转储。

使用`ulimit -c unlimited`将使您的系统能够在下一个`SIGSEGV`事件中生成这样的转储。创建核心转储文件后，您将能够使用`gdb`.

有关用于确定原因的选项的详细信息，请参阅[确定崩溃发生的位置。](http://www.oracle.com/technetwork/java/javase/crashes-137240.html#gdywn)

# ruby-on-rails-3 - Ruby on Rails：如何使用“ehlo”而不是“helo”连接到邮件服务器

> ID：13365650
> 
> 赞同：0
> 
> 时间：2012-11-13T17:28:57.840
> 
> 标签：ruby-on-rails-3, mail-server

我有一个 SMTP 服务器需要使用扩展 smtp (esmtp) 进行身份验证，但我找不到让我的 rails 应用程序使用 EHLO 而不是 HELO 进行身份验证的方法。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:01:45.760

你确定 Rails 还没有这样做吗？挖掘源代码，Rails 委托给 Mail gem，该 gem 委托给`Net::SMTP`. 如果您查看 lib/net/smtp.rb 的 Ruby 源代码，您会发现它有时会调用一个私有`do_helo`方法来检查`@esmtp`变量，如果为真，则执行 ehlo 而不是 helo。回顾初始化，`@esmtp`默认情况下它设置为 true。我没有看到它在任何地方变得不稳定。

也许是别的东西？

`do_helo`供参考`Net::SMTP`

```
def do_helo(helodomain)
   begin
     if @esmtp
       ehlo helodomain
     else
       helo helodomain
     end
   rescue Net::ProtocolError
     if @esmtp
       @esmtp = false
       @error_occured = false
       retry
     end
     raise
   end
end 
```

# java - Java 中的流式数据：RMI 与 Socket

> ID：13365652
> 
> 赞同：2
> 
> 时间：2012-11-13T17:29:10.383
> 
> 标签：java, sockets, rmi

我有一台服务器需要在观察者模式中尽快将数据流式传输到多个客户端。

每秒至少需要向每个客户端发送 200 条消息，直到客户端断开与服务器的连接，每条消息由几种原始类型的 8 个值组成。因为每条消息都需要在创建后立即发送，所以消息不能合并为一条大消息。服务器和客户端都驻留在同一个 LAN 上。

这种情况下哪种技术更适合实现流式传输，RMI还是socket？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:34:17.807

RMI 的开销很大，因此它不适合。最好创建一个简单的协议并使用套接字来发送数据。

根据可接受的延迟，您应该配置套接字缓冲区大小并关闭 Nagle 算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:41:26.080

我不会为此使用 RMI，RMI 只是用于远程方法调用，即当客户端想要在服务器端执行方法（即某些业务逻辑）时。

套接字适用于此，但您可能需要考虑 JMS（Java 消息传递服务）用于此特定场景。JMS 支持称为主题的东西，它本质上是向所有对该主题感兴趣的听众*广播。*它通常也被优化为非常快。

您可以使用[Apache ActiveMQ 之](http://activemq.apache.org/)类的东西来实现您想要的。您还有很多选项，例如持久性（如果队列出现故障，消息仍保留在队列中）、消息过期（如果您希望消息在客户端不接收的情况下过期）等。

您显然可以使用普通的 Sockets 实现所有这些并自己处理所有事情，但是 JMS 为您提供了所有这些。您可以发送文本或二进制数据，甚至是序列化对象（我个人不推荐后者）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:40:39.200

RMI 是请求/响应协议，而不是流协议。使用 TCP。

# build - cmake查找模块wrt版本

> ID：13365655
> 
> 赞同：2
> 
> 时间：2012-11-13T17:29:25.157
> 
> 标签：build, module, cmake, system

我有一个关于 CMake 的问题：最近在标准安装中添加了很多模块，例如 GLEW 或 Mercurial。

然而，很多安装基础可能有一个旧版本，没有所有可用的新模块，所以你不得不发布你自己的版本（例如）FindGLEW.cmake

是否可以检查给定的 FindXXX 模块是否可用并在这种情况下使用它，否则提供适当的替代方案？甚至在运行时检查 cmake 版本（但这并不总是可靠且难以维护）......？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:38:13.773

CMake 的[`include`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3ainclude)命令 wrt 模块的默认搜索行为是：

> `<modulename>.cmake`首先在 中搜索具有名称的文件`CMAKE_MODULE_PATH`，然后在 CMake 模块目录中搜索。

（还有更多内容 - 请参阅文档或运行`cmake --help-command include`）

您所要求的似乎与此相反；首先检查 CMake 模块目录中的官方模块，如果不存在，则回退使用您自己的。

假设您的模块在 中`${CMAKE_SOURCE_DIR}/my_cmake_modules`，您可以通过执行以下操作来反转 CMake 的默认行为：

```
set(CMAKE_MODULE_PATH ${CMAKE_ROOT}/Modules ${CMAKE_SOURCE_DIR}/my_cmake_modules) 
```

如果您完全按照官方模块命名自己的模块，那么这应该可以实现您的目标。如果您希望稍后在脚本中恢复正常的 CMake 行为，您可以执行以下操作：

```
set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/my_cmake_modules) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:19:53.747

作为上述解决方案的可能替代方案，我发现了这个 cmake 政策

```
CMP0017
   Prefer files from the CMake module directory when including from
   there.

   Starting with CMake 2.8.4, if a cmake-module shipped with CMake (i.e.
   located in the CMake module directory) calls include() or
   find_package(), the files located in the the CMake module directory
   are preferred over the files in CMAKE_MODULE_PATH.  This makes sure
   that the modules belonging to CMake always get those files included
   which they expect, and against which they were developed and tested.
   In call other cases, the files found in CMAKE_MODULE_PATH still take
   precedence over the ones in the CMake module directory.  The OLD
   behaviour is to always prefer files from CMAKE_MODULE_PATH over files
   from the CMake modules directory.

   This policy was introduced in CMake version 2.8.4\.  CMake version
   2.8.9 warns when the policy is not set and uses OLD behavior.  Use the
   cmake_policy command to set it to OLD or NEW explicitly. 
```

希望这可以帮助。

# ios - 将 setContentMode 与 UIViewContentModeScaleToFill 一起使用后图像模糊

> ID：13365657
> 
> 赞同：0
> 
> 时间：2012-11-13T17:29:33.180
> 
> 标签：ios, uiimage, cgimage, alassetslibrary

```
UIImageView *assetImageView = [[UIImageView alloc] initWithFrame:viewFrames];
[assetImageView setContentMode:UIViewContentModeScaleToFill];
[assetImageView setImage:[UIImage imageWithCGImage:[self.asset thumbnail]]];
[self addSubview:assetImageView]; 
```

由于质量下降，这段代码生成了一个模糊的图像，我发现我需要使用它

```
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
```

但是我如何在我的情况下应用此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:33:16.050

我建议阅读[这篇文章](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)。在将图像传递给 UIImageView 之前，使用那里的代码将图像调整为正确的大小。

# java - JAVA客户端服务器读取带有新行的字符串

> ID：13365659
> 
> 赞同：4
> 
> 时间：2012-11-13T17:29:37.653
> 
> 标签：java, client-server, bufferedreader, printwriter

我正在编写一个带有客户端和服务器的小程序。服务器程序中包含计算器程序。当服务器和客户端运行时，客户端可以输入和方程式，例如。2 + 2，服务器将计算它并将答案发送给客户端。该程序还应该包含一个帮助选项，因此当命令帮助从客户端发送到服务器时，服务器应该返回一个帮助菜单。我的问题是它正在返回帮助菜单，但都在一行中，它没有在单独的行中将其打印到控制台。谢谢你的帮助。

服务器代码：

```
package One;

    import java.io.*;
    import java.net.*;

    public class ServerCalculator {

        static double answer;

        public ServerCalculator(){

            System.out.println("Server...");

            theServer();

            }
        void theServer(){

            try{

                ServerSocket ss = new ServerSocket(9990);
                while(true){

                    Socket sc = ss.accept();
                    Help hp = new Help();
                    BufferedReader br = new BufferedReader(new InputStreamReader(sc.getInputStream()));
                    String compute = br.readLine();

                    Maths(compute);
                    PrintWriter pw = new PrintWriter(sc.getOutputStream());

                    if(compute.equals("help")){
    //                  pw.println(hp.noOfLines());
                        pw.println(hp.menu());
                    }

                    if(compute.equals("exit")){
                        ss.close();
                    }

                    else{
                        pw.println(answer); 
                    }

                    pw.flush();
                }

            }

            catch (Exception ee){
                ee.printStackTrace();
            }

        }

        static double Maths(String compute){

          String message[] = compute.split(" ");

          if(message[0].equalsIgnoreCase("Help"))
          {
              return -2;
          }

          if(message[0].equalsIgnoreCase("Exit"))
          {
              return -1;
          }

          double rad = 0;

          double a = Integer.parseInt(message[0]);
          double b = Integer.parseInt(message[2]);

          if(message[1].equalsIgnoreCase("Sin")){
                rad = Math.toRadians(a);
                answer = Math.sin(rad);
            }
            if(message[1].equalsIgnoreCase("Cos")){
                if(a==90 || a==270){
                    answer = 0;
                }
                else{
                    rad = Math.toRadians(a);
                    answer = Math.cos(rad);
                }
            }
            if(message[1].equalsIgnoreCase("Tan")){
                if(a==90 || a==270){
                    System.out.println("Invalid Calculation");
                    answer =  0;
                }
                else if(a==45 || a==135){
                    rad = Math.toRadians(a);
                    answer = Math.tan(rad);
                }
                rad = Math.toRadians(a);
                answer = Math.tan(rad);
            }
        if(message[1].equalsIgnoreCase("Power") || (message[1].equalsIgnoreCase("^")))
        {
            answer = Math.pow(a, b);  
        }

          if(message[1].equalsIgnoreCase("Multiply") || (message[1].equalsIgnoreCase("*")))
          {
              answer = a*b;  
          }
          if(message[1].equalsIgnoreCase("Add") || (message[1].equalsIgnoreCase("+")))
          {
            answer = a+b;
          }
          if(message[1].equalsIgnoreCase("Subtract") || (message[1].equalsIgnoreCase("-")))
          {
            answer = a-b;
          }
          if(message[1].equalsIgnoreCase("Divide") || (message[1].equalsIgnoreCase("/")))
          {
            answer = a/b;
          }
            return answer;

      }

    } 
```

客户代码：

```
package One;

import java.net.*;
import java.util.Scanner;
import java.io.*;

    public class ClientCalculator {

        public static void main(String[] args) {

            Socket sc;  

            System.out.println("Client...");

            while(true){

                try
                {
                    Scanner sin = new  Scanner(System.in);
                    String question = sin.nextLine(); 
                    System.out.println("Processing: " + question);

                    sc = new Socket("localhost",9990);

                    PrintWriter pw = new PrintWriter(sc.getOutputStream());

                    pw.println(question);   
                    pw.flush();

                    BufferedReader br = new BufferedReader(new InputStreamReader(sc.getInputStream()));
                    String answer = br.readLine();
                    System.out.println(question + " = " + answer);
//                  sc.close();
//                  sin.close();
                }

                catch(Exception ee){

                }
            }
     }

    } 
```

帮助菜单：

```
package One;

public class Help {

String menu(){

    String helpMenu = 
    "Instructions for the calculator " +
    "Input the number followed by space and then by word or operator and by number to get result " +
    "e.g. 5 + 5\. or 30 Sin 30 - where 30 is the angle. " + 
    "Options are " + 
    "Multiply or (*) " + 
    "Add or (+) " +  
    "Subtract or (-) " + 
    "Divide or (/) " + 
    "Sin, Cos, Tan ";

    return helpMenu;

}

//  String noOfLines() {
//      
//      return "9";
//  }

} 
```

运行代码：

```
package One;

public class TestClass {

    public static void main(String[] args) {

        new ServerCalculator();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:32:27.240

使用“\n”字符插入新行。

代替

```
String helpMenu = 
    "Instructions for the calculator " +
    "Input the number followed by space and then by word or operator and by number to get result " +
    "e.g. 5 + 5\. or 30 Sin 30 - where 30 is the angle. " + 
    "Options are " + 
    "Multiply or (*) " + 
    "Add or (+) " +  
    "Subtract or (-) " + 
    "Divide or (/) " + 
    "Sin, Cos, Tan "; 
```

和

```
String helpMenu = 
    "Instructions for the calculator\n" +
    "Input the number followed by space and then by word or operator and by number to get result\n" +
    "e.g. 5 + 5\. or 30 Sin 30 - where 30 is the angle. \n" + 
    "Options are \n" + 
    "Multiply or (*) \n" + 
    "Add or (+)\n " +  
    "Subtract or (-) \n" + 
    "Divide or (/) \n" + 
    "Sin, Cos, Tan \n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:43:48.053

您必须在客户端的 readline 方法周围添加一个 while 循环：

```
String answer = null;
while((answer=br.readLine()) != null)
{
//print answer
} 
```

最好使用常量而不是硬编码：`System.getProperty("line.separator");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T17:33:18.453

那是因为你在一行中发送它们。您需要`newline (\n)`在每行之后附加一个，以将它们显示在不同的行中。

另请注意： -`StringBuilder`如果您想使用过多的字符串连接，最好使用 。

您可以将菜单方法更改为：

```
String menu(){
    StringBuilder helpMenu = new StringBuilder();

    helpMenu.append("Instructions for the calculator \n")
            .append("Input the number followed by space and then by word or operator and by number to get result \n")
            .append("e.g. 5 + 5\. or 30 Sin 30 - where 30 is the angle. \n")
            .append("Options are: \n")
            .append("\tMultiply or (*) \n")
            .append("\tAdd or (+) \n")
            .append("\tSubtract or (-) \n")
            .append("\tDivide or (/) \n")
            .append("\tSin, Cos, Tan \n");

    return helpMenu.toString();

} 
```

# c - Printf char[] 缓冲区溢出

> ID：13365661
> 
> 赞同：2
> 
> 时间：2012-11-13T17:29:42.630
> 
> 标签：c, printf

我有这个问题，我的名字是 char[20]，如果我插入一些字符，数组就会溢出并写入另一个数组（认知）。

我试图用 puts() 改变 scanf()，但最后一个不能正常工作，因为它跳出输入并且什么也不读。

* * *

有人知道解决方案吗？

这是代码

```
void addStudent(){
    struct student s;
    printf("Inserire Nome: ");
    scanf("%20s",s.nome);
    printf("\nInserire Cognome: ");
    scanf("%30s",s.cognome);
    printf("\nInserire eta': ");
    scanf("%d",&s.anni);
} 
```

结果

```
Inserire Nome: cjhsdjkhbsdkhfgsdjkhfgskjhgjkhsfs

Inserire Cognome: 
Inserire eta': 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:30:52.147

更改为`"%19s"`。`scanf()`在写入空终止符时，它必须比数组大小小一。在调用之后，`scanf()`您需要跳过任何未处理的输入，这可以通过阅读直到下一个换行符来实现：

```
int ch;
while ((ch = getchar()) != EOF && ch != '\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:35:33.353

你少了一个字符，你应该为空字节留下一个字符，同样适用于`s.cognome`

```
scanf("%19s",s.nome); 
```

此外，`scanf`并且`puts`不可互换，第一个读取某些内容，第二个输出某些内容，您可能的意思`gets`或更好`fgets`：

```
fgets(s.nome, 20, stdin); 
```

# azure - MVC + SQL 数据库 + 调度程序 - 在 Azure 上部署

> ID：13365663
> 
> 赞同：2
> 
> 时间：2012-11-13T17:29:53.080
> 
> 标签：azure

我们计划在 Microsoft Azure 平台上部署我们的报告应用程序/产品之一，用于测试和研究目的。

应用程序基于 .NET 框架 4.5 构建，幸运的是 Azure 现在支持 4.5。

应用程序尚未准备好 Azure。我假设在 Azure 上部署它需要一些配置级别的更改。不过，Azure 网站上的要求并不高。

我们的应用程序具有**三个主要组件**，一个是使用 n 层方法构建的 MVC Web 层。**第二个组件**是一个独立的窗口服务，它定期从外部系统中提取数据，并将其推送到**第三个组件 SQL Server 数据库**中。MVC Web 层与业务层结合使用此 SQL 服务器来执行 R/W 操作。

如果这是带有数据库的 Web 应用程序的典型案例，我会选择 Azure 网站。现在我在图片中也有一个窗口服务/（**基于计划的数据提取器**），我很困惑我应该在 Azure 平台内选择哪些帐户和服务？

Azure 提供了大量服务，例如网站、服务总线、云服务、VM 等，但我很困惑哪种设置适合这个应用程序。

**有关该应用程序的一些其他详细信息：**

*   UserBase（对于单个实例）：给定时间 10-30 个用户。
*   从外部系统/网络服务收集的数据量：每天约 100 mb。

我是否需要在一端设置多个服务，例如带有数据库的 Azure 网站，以及用于调度程序/窗口服务的其他服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:04:35.167

由于您目前有后台 Windows 服务一直在提取数据，因此我建议您使用 Windows Azure 云服务 (WACS)。您可以将 MVC Web 门户作为 Web 角色迁移，并将后台服务逻辑迁移到辅助角色。然后，您的辅助角色可以从外部服务中提取数据并将数据插入 Windows Azure SQL 数据库 (WASD)。然后，您的 Web 角色可以从 WASD 读/写数据并将它们显示在门户中。

Windows Azure 网站 (WAWS) 目前没有作为工作角色的对称功能。但是由于 WAWS 和 WACS 都可以使用 WASD，因此您可以将您的 Web 门户移至 WASD，并将您的后台作业移至 WACS 工作者角色。

希望这有意义并有所帮助

# php - 在其他端口上使用 socket.io

> ID：13365664
> 
> 赞同：1
> 
> 时间：2012-11-13T17:29:53.237
> 
> 标签：php, node.js, socket.io

我正在尝试基于 NodeJS 和 Socket.IO 进行聊天，当我在同一个端口 4040 上运行它时，所有的工作都很好

但是当我将 socket.io 的源代码放在其他端口上时，它在 ie6 和 ie7 和 8 上不起作用我看到每次获取新数据时页面都会刷新

不久，我有一个基于 PHP 端口 80 的网站，我基于 nodeJs 端口 4040 进行聊天

网站工作正常，聊天在端口 4040 上也能正常工作

这是socket.io的来源

在端口 4040 上工作正常：

```
<script src="/socket.io/socket.io.js"></script> 
```

工作，但在 ie 6 7 8 上有问题

```
<script src="http://mywebsite.com:4040/socket.io/socket.io.js"></script> 
```

***请不要降级我的问题，因为我知道你们中的许多人不理解我的问题 100%***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-10-20T01:59:41.093

我是新手，`socket.io`到目前为止我真的很喜欢我所看到的。

我只是想指出对@sdedelbrock 帖子的一个小修正。

您可能不应该**使用**（如建议的那样）：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:4040');
</script> 
```

因为这将假定服务器也在同一台机器上（使用`localhost`）。这就是我的一些开发人员所做的，当我部署他们的代码时，它根本不起作用（客户端页面找不到我们的服务器）。

我尝试过并且似乎效果很好的方法是让`host`XHR 自动解析该部分，只提供端口号。

**请改用以下内容**：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect(':4040');
</script> 
```

因此，无论我部署到哪个环境（即：DEV、TEST、STAGE 或 PROD 等），它总是会解析正确的主机名客户端。这就是我们想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:43:57.677

您不应该那样更改端口，这是更改端口的最佳方法。

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:4040');
</script> 
```

这里我们调用相对于你的应用的JS文件，并在socket的初始化中指定端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-20T16:55:21.250

这是关于如何初始化客户端的 socket.io 文档的链接：[https ://socket.io/docs/v4/client-initialization/](https://socket.io/docs/v4/client-initialization/)

# mysql - MySQL 复制 - 不同数据库中具有相同名称的表

> ID：13365665
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:01.217
> 
> 标签：mysql

我已经使用replicate-do-db 设置了复制。我有 5 个模式，它们都具有相同的表结构 - 当然数据不同。

我想只复制模式中选定的表。是否可以只在 replicate-do-table 中指定一个表名，它会从所有模式中复制所有具有该名称的表？

例如，我有以下数据库和表

```
A.test

B.test 
```

并配置复制如下

```
replicate-do-db=A;B

replicate-do-table=test 
```

这会复制两个表吗？还是我需要指定`replicate-do-table=A.test;B.test`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:59:17.517

你见过[replicate-wild-do-table](http://dev.mysql.com/doc/refman/5.0/en/replication-options-slave.html#option_mysqld_replicate-wild-do-table)吗？

# .net - IEquatable(Of T)/IEqualityComparer(Of T) 未被调用

> ID：13365667
> 
> 赞同：2
> 
> 时间：2012-11-13T17:30:06.023
> 
> 标签：.net, linq, iequalitycomparer, iequatable

我有一些带有两个对象列表的代码。第一个列表比第二个列表更具包容性。我希望从第一个列表中排除第二个列表中的项目。经过一些研究，我发现扩展方法`Except`是做到这一点的方法。因此`IEquatable(Of T)`，`IEqualityComparer(Of T)`我在我的代码中实现了这样的东西：

```
Partial Public Class CustomerData
    Implements IEquatable(Of CustomerData)
    Implements IEqualityComparer(Of CustomerData)

    Public Overloads Function Equals(other As CustomerData) As Boolean Implements IEquatable(Of ToolData.CustomerData).Equals
        If other Is Nothing Then
            Return False
        Else
            Return Me.CustomerID = other.CustomerID
        End If
    End Function

    Public Overloads Function Equals(this As CustomerData, that As CustomerData) As Boolean Implements IEqualityComparer(Of ToolData.CustomerData).Equals
        If this Is Nothing OrElse that Is Nothing Then
            Return False
        Else
            Return this.CustomerID = that.CustomerID
        End If
    End Function

    Public Overloads Function GetHashCode(other As CustomerData) As Integer Implements IEqualityComparer(Of ToolData.CustomerData).GetHashCode
        If other Is Nothing Then
            Return CType(0, Integer).GetHashCode
        Else
            Return other.CustomerID.GetHashCode
        End If
    End Function 
```

然后我像这样打一个简单的电话：

```
customerCollection = CustomerData.LocalCustomers.Except(CustomerData.RecentCustomers).OrderBy(Function(x) x.FullName).ToList 
```

这行不通。这也不是：

```
customerCollection = CustomerData.LocalCustomers.Except(CustomerData.RecentCustomers, EqualityComparer(Of CustomerData).Default).OrderBy(Function(x) x.FullName).ToList 
```

但是，这确实有效：

```
customerCollection = CustomerData.LocalCustomers.Except(CustomerData.RecentCustomers, New CustomerData).OrderBy(Function(x) x.FullName).ToList 
```

既然`RecentCustomers`和`LocalCustomers`都是`List(Of CustomerData)`为什么默认的比较方法不起作用？当我说它不起作用时，我的意思是我可以在`Equals`and`GetHashCode`例程中放置断点，它们永远不会被击中，并且返回的列表与`LocalCustomers`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:50:43.100

首先，你不需要实现`IEqualityComparer(Of T)`接口；如果你想为同一个类提供多种类型的相等，你通常会在另一个类中实现它。

其次，您需要覆盖`GetHashCode`and`Equals(Object)`方法：

```
Partial Public Class CustomerData
   Implements IEquatable(Of CustomerData)

   Public Override Function GetHashCode() As Integer
      Return CustomerID.GetHashCode()
   End Function

   Public Override Function Equals(ByVal obj As Object)
      Return Equals(TryCast(obj, CustomerData))
   End Function

   Public Overloads Function Equals(other As CustomerData) As Boolean Implements IEquatable(Of ToolData.CustomerData).Equals
      If other Is Nothing Then
         Return False
      Else
         Return Me.CustomerID = other.CustomerID
      End If
   End Function

   ... 
```

这是一篇解释原因的博客文章：http: [//blogs.msdn.com/b/jaredpar/archive/2009/01/15/if-you-implement-iequatable-t-you-still-must-override-object- s-等于和-gethashcode.aspx](http://blogs.msdn.com/b/jaredpar/archive/2009/01/15/if-you-implement-iequatable-t-you-still-must-override-object-s-equals-and-gethashcode.aspx)

# objective-c - 如何检查可变数组中是否存在 b2Body？

> ID：13365669
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:13.300
> 
> 标签：objective-c, pointers, cocos2d-iphone, box2d

我有一个 b2Bodies 数组，要通过我的更新循环在安全点上删除，但有时我需要删除对象而不将它们添加到这个数组中。在我这样做之前，我想检查主体是否已经在数组中，如果它被删除，那么对象不会被删除两次（导致异常）。我知道如果主体是客观的 c 对象，这将很简单。

对象被添加到数组中，如下所示：

```
[bodiesToBeDestroyedMutableArray addObject:[NSValue valueWithPointer:body]]; 
```

我可以将对象`bodiesToBeDestroyedMutableArray`与给定的 b2Body 指针进行比较，以查看它们是否（指向）同一个主体？我试过了：

```
if ([bodiesToBeDestroyedMutableArray containsObject:[NSValue valueWithPointer:body]]) 
```

和

```
for(NSValue *bodyValue in bodiesToBeDestroyedMutableArray) {
    b2Body *bodyToTest = (b2Body*)[bodyValue pointerValue];

    if(bodyToTest == body){
        NSLog(@"body found in bodies to be destroyed");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T12:09:34.150

没有检查你提到的平等测试是否正常工作......

您可以使用 body->SetUserData 设置某种标识符（标签），以便稍后检查标签之间的公平性。

万一您已经将其他内容设置为主体作为用户数据（例如在 mi 情况下），通过将此“标签”设置为您拥有的任何用户数据，相同的方法是有效的。

例如：

```
// Get the user data
XXSomeClass *block = (__bridge XXSomeclass*)b->GetUserData();

// Retrieve body from array
// Might need to cast the returning item from the array with (XXTypeAtArray *)
XXTypeAtArray *item = [arrayOfBlocks objectAtIndex:block.tag]; 
```

# jquery - 嵌入列表项上的 jQuery 悬停菜单

> ID：13365671
> 
> 赞同：2
> 
> 时间：2012-11-13T17:30:20.650
> 
> 标签：jquery

努力理解这一点。为愚蠢道歉。

我有一个看起来像这样的菜单——不是我选择的格式，它是从 WordPress 自动生成的：

***CSS***

```
​.menu_body {
    display: none;   
}​ 
```

***HTML***

```
<ul id="menu-list">
    <li class="menu_head"><a href="#">Header-1</a></li>
    <li class="menu_head"><a href="#">Header-2</a>
    <ul class="menu_body">
        <li><a href="#">Link-1</a></li>
        <li><a href="#">Link-2</a></li>
    </ul>
    </li>
    <li class="menu_head"><a href="#">Header-3</a>
    <ul class="menu_body">
        <li><a href="#">Link-3</a></li>
        <li><a href="#">Link-4</a></li>
    </ul>
    </li>
    <li class="menu_head"><a href="#">Header-4</a></li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我要做的是编写一个基于 jQuery 悬停的函数，当悬停在具有类 menu_head 的项目上时，会在其下方显示类“menu_body”中的项目。

从其他地方我得到了一个想法，即使用一个打开一个菜单并*关闭所有其他*菜单的功能是整洁的。它看起来像这样：

```
$("#menu-list li.menu_head").mouseover(function()
{
 $(this).children('.menu_body').slideDown(500).siblings(".menu_body").slideUp("slow");

});​ 
```

这不起作用，但您可以看到我正在尝试做的事情 - 获取第一个相关的“menu_body”项目并将其向下滑动，然后获取所有其他“menu_body”项目并将它们向上滑动。

你可以在这里看到一个带有 DIV 的示例（我从这里偷了这个想法）：

**[示例链接](http://roshanbh.com.np/2008/06/accordion-menu-using-jquery.html)**

但是为了让它与嵌套的 div 一起工作而付出了巨大的努力。

有人可以建议我需要做什么并解释一下，以便我能理解我做错了什么吗？

干杯，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:34:14.753

像这样试试 - [**DEMO**](http://jsfiddle.net/YFLjU/)

```
$("#menu-list li.menu_head").mouseover(function() {
    $(".menu_body").stop().slideUp("slow");
    $(this).children('.menu_body').delay(600).stop().slideDown(500);
}); 
```

您的`.menu_body`项目彼此不是兄弟姐妹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:42:01.127

我建议使用 mouseOver 和 mouseLeave。

```
$("#menu-list li.menu_head").mouseOver(function() {
    $(this).children('.menu_body').slideDown(500);
});
$("#menu-list li.menu_head").mouseLeave(function() {
    $(this).children('.menu_body').stop().slideUp(500);
}); 
```

否则，如果您不滚动到另一个菜单元素，比如说下面的内容，您的向上滑动可能不会被正确调用。

[例子](http://jsfiddle.net/jZWgm/1/)

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:36:12.910

在动画之间添加延迟，如下所示：

```
$(this).children('.menu_body').slideDown(500).delay(500).siblings(".menu_body").slideUp("slow"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:49:03.253

马特，尝试使用延迟。

以下内容可能有助于作为起点。

```
$.when($('div').animate({"opacity": "0"}, 1000)).done(function(){
    // divs hidden, run code to show them
    $('div').animate({"opacity": "100"}, 1000)
}); 
```

# asp.net-mvc-4 - 实体框架 5 迁移到生产（文件系统发布）

> ID：13365672
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:29.210
> 
> 标签：asp.net-mvc-4, entity-framework-5, entity-framework-migrations

我不确定在使用迁移和通过文件系统的发布选项进行生产时应该关心哪些更改。我的意思是，例如，我想我在生产时不应该使用任何初始化程序，对吧？因为我可能会在那里删除数据，所以我认为我应该始终获取脚本并在生产数据库中运行它。它是否正确？

配置类呢？我应该在每次发布时转向 false AutomaticMigrationsEnabled 吗？

每次我想发布我的代码时，有没有比将 web.config 和 app.config 中的连接字符串从 dev 修改为 production 更好的方法？

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:45:10.863

我通过 Web Config 转换找到了完美的答案

这个想法是拥有 Web.Config 和 Web.< environment >.Config。然后，每个 Web..Config 都会对原始 Web.Config 的值进行替换，因此当我们发布所选环境的转换时，将运行并且 ConnectionString 可以自动更改为生产环境中的值。

[这个介绍性视频](https://www.youtube.com/watch?v=S3nF5jf72q0)非常适合参与其中。然后互联网上有很多教程和一个叫做 SlowCheetah 的东西来处理这个更容易。

最好的祝福。吉列尔莫。

# mysql - MySQL按组排序表

> ID：13365675
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:37.370
> 
> 标签：mysql, sql-order-by

我有一个包含字段*id*、*group*、*left*、*level*和*createdAt*的表。

每一行都属于一个*组*。*level* = 0的行是组“领导者”。

我想按领导者的日期对表格进行排序，并在每个组中按*left*对行进行排序。例如，在此表中：

```
Id - Group - Left - Level - CreatedAt
1    1       1      0       00:10
2    1       2      1       00:20
3    2       1      0       00:00
4    1       3      1       00:30
5    2       2      1       00:40 
```

顺序应该是：

```
Id - Group - Left - Level - CreatedAt
3    2       1      0       00:00
5    2       2      1       00:40
1    1       1      0       00:10
2    1       2      1       00:20
4    1       3      1       00:30 
```

因为第 3 行是最新的组长，所以它应该是第一个，然后是由*left*排序的所有组。之后是第 1 行，它是第二个新的领导者，其次是由*left*排序的组。ETC..

我希望我解释得足够清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:31:58.023

本质上，您需要将您的表加入领导者的时间：

```
SELECT my_table.*
FROM   my_table NATURAL JOIN (
  SELECT   my_table.Group, MIN(my_table.CreatedAt) AS LeaderTime
  FROM     my_table
  WHERE    my_table.Level = 0
  GROUP BY my_table.Group
) t
ORDER BY t.LeaderTime, my_table.Left 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/0ee9c/1/0)上查看。

如果你可以*保证*每个组都有一个明确的领导者——例如，因为你已经定义了一个`UNIQUE`约束`(Group, Level)`，而你不能拥有这个约束，因为你的示例包含两个记录`Group = 1`——`Level = 1`那么你可以避免分组操作：

```
SELECT   my_table.*
FROM     my_table JOIN my_table AS leader
      ON leader.Group = my_table.Group AND leader.Level = 0
ORDER BY leader.CreatedAt, my_table.Left 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:48:11.187

为了对组长的 createdAt 进行排序，您可以将每一行连接到描述组长的行，然后进行排序：

```
SELECT t1.*
FROM my_table t1
INNER JOIN  my_table t2
ON t1.Group = t2.Group AND t2.Level = 0
ORDER BY t2.CreatedAt, t1.Left; 
```

# html - 如何在文本下方稍微对齐图像

> ID：13365676
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:39.680
> 
> 标签：html, css, image

我有一个导航栏。水平的。

我在左边有一个图像。右边的文字。显示如下：

![不是我想要的](../Images/f47c454020adab8e4a9684a33e3acdcb.png)

我想拍摄图像，使其位于文本下方，因此基本上图像需要在文本左侧下方滑动一点。如下图所示：

![我多么想要](../Images/c1d83316b4307f1f7ac8fb418bd74e40.png)

我当前的 HTML 是：

```
<p class="menu_text">
    <img class="tgss_icon" src="http://www.thegoldservicescholarship.co.uk/images/icon.jpg" alt="TGSS Icon"/>
    <a class="menu_links" href="contact_us.php">Contact Us</a>
</p>​ 
```

我当前的 CSS 是：

```
img.tgss_icon{
  height: 30px;
  width: 35px;
  padding-bottom: 7px;
}

a.menu_links:link { color: #58595B; text-decoration: none;}
a.menu_links:visited  { color: #58595B; text-decoration: none; }
a.menu_links:active { color: #E6BD13; text-decoration: none; }
a.menu_links:hover  { color: #E6BD13; text-decoration: none; }

p.menu_text{
  font-size: 15pt;
  /*color: #58595B;*/
}​ 
```

提前致谢！克里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:32:20.593

您可以在链接上使用负边距来执行此操作。

```
a.menu_links { margin-left: -20px; } 
```

[演示](http://jsbin.com/azaref/1)

# javascript - 脚本中的这个函数有什么作用？

> ID：13365677
> 
> 赞同：0
> 
> 时间：2012-11-13T17:30:44.127
> 
> 标签：javascript, d3.js

我是这个**d3.js**的新手，所以这可能是一个很简单的问题。这是代码

```
d3.selectAll("p")
.data([4, 8, 15, 16, 23, 42])
.style("font-size", function(d) { return d + "px"; }); 
```

这是`function(d) { return d + "px"; }`做什么的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:36:51.893

从[文档中](https://github.com/mbostock/d3/wiki/Selections#wiki-style)：

> 如果 value 是一个函数，则对每个选定元素（按顺序）评估该函数，传递当前数据 d 和当前索引 i，并将 this 上下文作为当前 DOM 元素。然后使用该函数的返回值来设置每个元素的样式属性。

因此，该函数与数组中的每个成员一起调用，从而为每个成员生成不同的字体大小：“4px”、“8px”、“15px”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:53:43.570

```
what does this function(d) { return d + "px"; }  do 
```

很简单，该函数调用将 d （通过`toString()`）字符串化，附加字符串“px”，返回结果。

# c++ - 视觉工作室 while 循环突然停止而没有完成所有迭代

> ID：13365689
> 
> 赞同：0
> 
> 时间：2012-11-13T17:31:21.797
> 
> 标签：c++, visual-studio-2010, while-loop, break

我正在使用visual studio 2010。这里我有一个while循环，代码如下

```
while(cx!=ex && cy!=ey){
 //a* algorithm code inside
} 
```

然而，在第 12 次迭代之后，尽管条件仍未满足，while 循环突然中断。没有“越界”错误或类似的错误。这可能是什么原因造成的？什么是最好的解决方案，因为我可以说可能有大约几到一百次迭代。谢谢。

编辑：代码在 C++ 中。对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:35:52.363

你能提供更多的代码吗？（C++？）
例如，如果你使用 MACROS，你可能有“隐藏”的 Break 语句等。
你调试过它吗？在循环之后放置一个断点并检查 cx 和 cy 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:36:19.930

由于 while 循环不太可能无缘无故地突然停止，因此我建议您首先确保 while 条件确实为假。

您没有说明您使用的是什么语言，在 C# 中您可以使用：

```
 Debug.Print(cx == ex);
 Debug.Print(cy == ey); 
```

这应该可以帮助您找到问题所在。如果您的代码有问题，其中之一将返回`true`

**更新：** 对于 C++，方法相同，在循环结束后立即检查 4 个变量的值。

# expressionengine - ExpressionEngine 的桌面（内容）编辑软件

> ID：13365692
> 
> 赞同：2
> 
> 时间：2012-11-13T17:31:33.117
> 
> 标签：expressionengine

我知道 EE 官方页面上有两个应用程序，Marsedit 和 Ecto，但两者似乎都已经过时了，有人可以确认他们可以使用 EE2 进行发布等工作，还是有另一个应用程序在做同样的工作？

我发现这篇文章[http://eeinsider.com/blog/using-marsedit-3-with-expressionengine-2/](http://eeinsider.com/blog/using-marsedit-3-with-expressionengine-2/)但我猜教程已经消失了:(

谢谢

# python - 在 virtualenv 中安装 Python-Dbus

> ID：13365697
> 
> 赞同：23
> 
> 时间：2012-11-13T17:31:50.157
> 
> 标签：python, installation, virtualenv, dbus

我在需要访问 DBus 的虚拟环境中运行应用程序（主要是与网络管理器交互）。

我尝试使用 easyinstall 和 pip 安装 Dbus-Python，但都失败了。

当我尝试这样做时：

```
(myvirtualenv)borrajax@borrajax-computer:~/Documents/Projects/VirtualEnvs/current_env$ bin/pip install dbus-python 
```

皮普冲我吼道：

```
Downloading/unpacking dbus-python
  Downloading dbus-python-1.1.1.tar.gz (596kB): 596kB downloaded
  Running setup.py egg_info for package dbus-python
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
    IOError: [Errno 2] No such file or directory: '/home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python/setup.py'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

IOError: [Errno 2] No such file or directory: '/home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python/setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /home/borrajax/Documents/Projects/VirtualEnvs/current_env/build/dbus-python
Storing complete log in /home/borrajax/.pip/pip.log 
```

过去，我的 Python 模块中的 python dbus 绑定及其“可访问性”存在一些问题，所以我真的不知道在虚拟环境中设置 Dbus-Python 的最佳方法是什么。有没有人成功做到这一点？或者有没有人知道如何做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2019-01-07T10:05:20.977

转到您的 Venv 请按照以下 2 个步骤操作：

```
1)sudo apt-get install libdbus-glib-1-dev libdbus-1-dev

2)pip install dbus-python 
```

验证：

```
3) pip freeze 
```

> 如果安装正确，您将看到：dbus-python==1.2.8

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-13T19:36:17.093

我的建议是为 Python DBUS 绑定安装系统包，然后使用命令行选项创建virtualenv*以*允许从激活的*virtualenv*`--system-site-packages`访问系统范围的 Python 包（包括包） 。例如在 Debian/Ubuntu（或衍生发行版）上：`dbus`

 *```
$ sudo apt-get install python-dbus
$ virtualenv --system-site-packages dbus-venv 
```

要使用内置的 Python 3[`venv`](https://docs.python.org/3/library/venv.html)模块而不是`virtualenv`：

```
$ sudo apt-get install python-dbus
$ sudo apt-get install python3-venv
$ python3 -m venv --system-site-packages my_venv 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-13T19:40:07.017

当`pip`试图安装一个包时，它会寻找`setup.py`没有`dbus-python`的，所以你必须[下载源代码](http://dbus.freedesktop.org/releases/dbus-python/)并手动编译它。不应该太难：

```
PYTHON=python3.3 ./configure --prefix=/tmp/dbus-python
make
make install 
```

然后您可以将编译后的文件移动到您的 virtualenv。

* * *

编辑：从 dbus-python-1.2.2 开始（2016-02-22 发布） dbus-python 有一个`setup.py`，所以 pip 应该能够安装它

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-23T07:30:47.670

另一种解决方法是手动将`dbus`文件/库直接复制到您的 virtualenv：

```
cp -r /usr/lib/pythonX.X/{site or dist}-packages/dbus myvirtenv/usr/lib/pythonX.X/site-packages/    
cp -r /usr/lib/pythonX.X/{site or dist}-packages/_dbus_*.so myvirtenv/usr/lib/pythonX.X/site-packages/ 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-16T12:09:28.460

OP 似乎为此[在 freedesktop.org 上开了一张票，](https://bugs.freedesktop.org/show_bug.cgi?id=55439)该票仍然开放；但是[，该票附带了一个补丁，](https://bugs.freedesktop.org/attachment.cgi?id=80061)该补丁可以应用于大多数任何版本的 python-dbus，然后重新打包为新的 tarball。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-22T07:30:41.977

@TheMeaningfulEngineer 非常感谢，我在通过 pip 安装 dbus 时遇到了一些问题，这就是我所需要的，我希望无论你在哪里都过得愉快；）

检查本地是否有 -`sudo apt list --installed | grep pakage-name`

`sudo apt-get install libdbus-glib-1-dev libdbus-1-dev`

在这行之后我确实安装了`dbus`并且`networkmanager`没有任何错误

这正是我所做的，在此之前，我检查了我所有的 dbus 版本和网络管理器，之后做了@TheMeaningfulEngineer 所说的工作，如果我在此评论中做错了什么，请尝试向我解释是什么或为什么，非常抱歉我的英语。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-18T13:41:20.370

对于 Python，因为**dbus-python**现在已过时，您应该使用**pydbus**：

* * *

```
pip install pydbus 
```

这对我有用。*

# ember.js - 我们如何将多个实例加载到模板中？

> ID：13365702
> 
> 赞同：0
> 
> 时间：2012-11-13T17:32:16.193
> 
> 标签：ember.js

我们正在尝试构建一个门户，其中一个布局可以在主布局中以任意顺序包含任意数量的核心小部件。

为了模拟这一点，我们有许多出口：

```
<h1>{{title}}</h1>

{{outlet pos1}}
{{outlet pos2}}
{{outlet pos3}}
{{outlet pos4}}
{{outlet pos5}}
{{outlet pos6}}
{{outlet pos7}}
{{outlet pos8}}
{{outlet pos9}}
{{outlet pos10}} 
```

在路由器中，我们尝试将它们一一加载：

```
 connectOutlets: function(router, group) {
    router.get('applicationController').connectOutlet('group', group);
    router.get('groupController').connectOutlet('pos9', 'toDo', App.ToDo.find(41));
    router.get('groupController').connectOutlet('pos3', 'toDo', App.ToDo.find(15)); 
```

但是，当有多个时，将使用最终上下文。所以在这个例子中，我们得到了 toDo 对象的两个实例，它们都是针对 id #15 的。

我是否以正确的方式处理这个问题，是否有可能以编程方式做到这一点，而不是拥有固定的网点布局？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:11:50.817

**编辑：我的回答是基于您的情况确实需要这种复杂的解决方案的假设。根据您的简单示例，您还可以说，您可以对所有 ToDo 项目使用 ArrayController。但这是我对复杂问题答案的尝试：**

问题是以下两行：

```
router.get('groupController').connectOutlet('pos9', 'toDo', App.ToDo.find(41));
router.get('groupController').connectOutlet('pos3', 'toDo', App.ToDo.find(15)); 
```

你基本上在那里做的是：

1.  将名为 pos9 的插座与名为“todo”的控制器连接起来。将此控制器的内容设置为 Id 41 的 ToDo。
2.  将名为 pos3 的插座与名为“todo”的控制器连接起来。将此控制器的内容设置为 Id 15 的 ToDo（因此您将覆盖同一控制器的内容）。
3.  结果是您最终将两个出口连接到控制器的同一实例。和你相同的待办事项，因为你已经设置了这个单个实例的内容属性两次。**从我的角度来看，核心问题是：EmberJS 默认使用单个控制器实例。**

所以我的解决方案是为你拥有的每个插座实例化一个新的控制器。不幸的是，这也需要修改视图的查找。您可能知道，Controller 和 View 按名称匹配。所以粗略的算法将是伪代码：

1.  创建新的Controller实例，例如： var newController = App.ToDoController.create();
2.  将此控制器注入到具有适当名称的路由器中，例如 router.set('todoControllerForPos9', newController);
3.  根据这个名称，你必须启用 Ember 才能找到匹配的视图，例如 App.set('TodoControllerForPos9View', App.ToDoView);
4.  最后在路由器上调用connectOutlet，例如：router.get('groupController').connectOutlet('pos9', 'todoControllerForPos9', App.ToDo.find(41));

正如你可能猜到的，我自己也遇到了这个问题。我之前确实问过这个问题，这就是我想出的解决方案。我认为，这是我所缺少的功能。我称之为动态插座名称。在这里查看我的原始问题：[如何实现多个元素的列表，其中一个元素可以通过单击展开？（动态插座名称？）](https://stackoverflow.com/questions/13056851/how-to-implement-a-list-of-multiple-elements-where-an-element-can-be-expanded-b)

看看更新部分和那里提供的小提琴，你会认出我在这里提供的伪代码。

**如果有人可以看看我的解决方案，那仍然很棒，因为它目前仍然很老套，但对我来说似乎很有价值。希望现在有了这个大答案，这会引起一些关注:-)**

# javascript - JSF .xhtml 页面中的 Google 地址自动完成功能 - 任何示例？

> ID：13365705
> 
> 赞同：4
> 
> 时间：2012-11-13T17:32:24.323
> 
> 标签：javascript, jsf-2, google-maps-api-3

我正在尝试在我的 JSF 应用程序的页面上使用谷歌自动完成添加地址输入的文本字段，但运气不佳。

我在 StackOverflow 中查看了以下示例： [谷歌地图 Places API V3 自动完成 - 在输入时选择第一个选项](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter) 并将[自动完成添加到谷歌地理编码器](https://stackoverflow.com/questions/13211671/adding-autocomplete-to-google-geocoder) 和[地方自动完成示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)中的示例，以了解我需要做什么。

但是，所有这些示例都表明我需要通过插入以下内容来包含 Google 地方库：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script> 
```

但是当我尝试将它与我的其他引用添加时，我收到以下错误：

**错误跟踪[行：18] 对实体“库”的引用必须以“;”结尾 分隔符。**

所以我从一开始就死了。我有另一个没有错误的 googleapi 参考：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

所以我不知道为什么会出现这个错误。

我对 xe 示例中的实现还有其他几个问题，但是现在，我无法通过添加对 google 地方库的引用。

首先，有谁知道如何在不出现上述错误的情况下添加 google api 参考？

其次，有谁知道我在哪里可以找到一个使用 PrimeFaces 组件或最好是 PrimeFaces 组件实际将地址自动完成功能添加到 JSF 应用程序的示例？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:38:29.887

您的标签应类似于：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;sensor=true&amp;key=#{googleAPIKey}"></script> 
```

请注意*key*参数 - 它是可选的，但建议您从 Google API 控制台获取您的 API 密钥。

有关Google Places 自动完成 JSF 组件，请参阅[https://github.com/rootkit007/google-places-facelet](https://github.com/rootkit007/google-places-facelet)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T12:43:54.637

对于 Google 地图自动完成示例，您可以使用我的。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>

    <title>Places Autocomplete</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"></meta>
    <meta charset="utf-8"></meta>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet"></link>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false&amp;libraries=places"></script>

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map-canvas, #map_canvas {
            height: 100%;
        }

        @media print {
            html, body {
                height: auto;
            }

            #map_canvas {
                height: 650px;
            }
        }

        #panel {
            position: absolute;
            top: 5px;
            left: 50%;
            margin-left: -180px;
            z-index: 5;
            background-color: #fff;
            padding: 5px;
            border: 1px solid #999;
        }

        input {
            border: 1px solid  rgba(0, 0, 0, 0.5);
        }
        input.notfound {
            border: 2px solid  rgba(255, 0, 0, 0.4);
        }
    </style>

    <script>
    // <![CDATA[
        function initialize() {
          var mapOptions = {
            center: new google.maps.LatLng(-33.8688, 151.2195),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

          var input = /** @type {HTMLInputElement} */(document.getElementById('searchTextField'));
          var autocomplete = new google.maps.places.Autocomplete(input);

          autocomplete.bindTo('bounds', map);

          var infowindow = new google.maps.InfoWindow();
          var marker = new google.maps.Marker({
            map: map
          });

          google.maps.event.addListener(autocomplete, 'place_changed', function() {
            infowindow.close();
            marker.setVisible(false);
            input.className = '';
            var place = autocomplete.getPlace();
            if (!place.geometry) {
              // Inform the user that the place was not found and return.
              input.className = 'notfound';
              return;
            }

            // If the place has a geometry, then present it on a map.
            if (place.geometry.viewport) {
              map.fitBounds(place.geometry.viewport);
            } else {
              map.setCenter(place.geometry.location);
              map.setZoom(17);  // Why 17? Because it looks good.
            }
            marker.setIcon(/** @type {google.maps.Icon} */({
              url: place.icon,
              size: new google.maps.Size(71, 71),
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(17, 34),
              scaledSize: new google.maps.Size(35, 35)
            }));
            marker.setPosition(place.geometry.location);
            marker.setVisible(true);

            var address = '';
            if (place.address_components) {
              address = [
                (place.address_components[0] && place.address_components[0].short_name || ''),
                (place.address_components[1] && place.address_components[1].short_name || ''),
                (place.address_components[2] && place.address_components[2].short_name || '')
              ].join(' ');
            }

            infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
            infowindow.open(map, marker);
          });

          // Sets a listener on a radio button to change the filter type on Places
          // Autocomplete.
          function setupClickListener(id, types) {
            var radioButton = document.getElementById(id);
            google.maps.event.addDomListener(radioButton, 'click', function() {
              autocomplete.setTypes(types);
            });
          }

          setupClickListener('changetype-all', []);
          setupClickListener('changetype-establishment', ['establishment']);
          setupClickListener('changetype-geocode', ['geocode']);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    // ]]>
    </script>
</h:head>

<h:body>
    <div id="panel" style="margin-left: -260px">
      <input id="searchTextField" type="text" size="50"></input>
      <input type="radio" name="type" id="changetype-all" checked="checked"></input>
      <label for="changetype-all">All</label>

      <input type="radio" name="type" id="changetype-establishment"></input>
      <label for="changetype-establishment">Establishments</label>

      <input type="radio" name="type" id="changetype-geocode"></input>
      <label for="changetype-geocode">Geocodes</label>
    </div>
    <div id="map-canvas"></div>

</h:body>
</html> 
```

# c# - GroupPrincipal 重命名组

> ID：13365708
> 
> 赞同：4
> 
> 时间：2012-11-13T17:32:35.353
> 
> 标签：c#, linq, rename, principalcontext, groupprincipal

我正在尝试重命名一个组。我的代码如下所示

```
PrincipalContext context = new PrincipalContext(ContextType.Machine);
GroupPrincipal group = GroupPrincipal.FindByIdentity(context, "GroupName");
group.SamAccountName = "NewGroupName";
group.DisplayName = "NewGroupName";
group.Name = "NewGroupName";
group.Save(); 
```

问题是它崩溃`group.DisplayName = "NewGroupName";`并抛出异常

> 属性对此商店类型无效。

如果我注释掉该行，代码将继续运行，但我想更改显示名称。我做了一些研究，发现[了这一点。](https://stackoverflow.com/questions/2086806/inexplainable-invalidoperationexception-with-groupprincipal-and-sam-principalcon)但是我使用的是框架 4.0。有谁知道另一个该怎么做，或者我会以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:21:06.423

经过深思熟虑，我发现开始`group.Name = "Newname";`工作的唯一方法是获取 DirectoryEntry 对象，然后对其进行更改。下面的代码

```
PrincipalContext context = new PrincipalContext(ContextType.Machine);
GroupPrincipal group = GroupPrincipal.FindByIdentity(context, "GroupName");
var Groupentry = (DirectoryEntry)group.GetUnderlyingObject();
Groupentry.Rename("newname");
Groupentry.CommitChanges(); 
```

# objective-c - 通过系统或其他应用程序打开图像/PDF

> ID：13365714
> 
> 赞同：0
> 
> 时间：2012-11-13T17:33:01.357
> 
> 标签：objective-c, ios

我想知道是否有办法告诉系统（例如照片或 adobe 应用程序）用自己的应用程序打开/共享文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:50:27.983

是的，你只需要知道你想要的应用程序的 URL，iOS 可以处理其余的：

```
// This will open in Safari
NSURL *url = [NSURL URLWithString:@"http://www.apple.com"];
[[UIApplication sharedApplication] openURL:url];

// This will open in Yelp
NSURL *url = [NSURL URLWithString:@"yelp:///search?term=burritos"];
[[UIApplication sharedApplication] openURL:url]; 
```

还有一些内置对象可以在不离开您的应用程序的情况下执行各种操作。例如，[本文档](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/PickinganItemfromthePhotoLibrary.html)描述了如何访问用户的照片，而无需实际切换应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:03:04.637

简短的回答是**肯定**的，您可以通过为要使用自己的应用程序打开的文件添加文件扩展名和 mime 类型来做到这一点。

长答案：[在我的 iOS Mail 和 Safari 应用程序中支持 Open In... 菜单项](https://stackoverflow.com/questions/7942597/supporting-open-in-menu-item-in-my-app-for-ios-mail-and-safari)

# android - android - 如何显示图像取决于 2 个微调器值？

> ID：13365724
> 
> 赞同：0
> 
> 时间：2012-11-13T17:33:21.967
> 
> 标签：android, android-intent, imageview, spinner

我有 2 个微调器，每个有 10 个值，现在我想要的是当用户选择 2 个值时返回另一个名为“YourPath”的活动的特定图片

这是第一个活动的代码

```
private Spinner spinner1, spinner2;
private Button btnSubmit;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.locationlist);

    addListenerOnButton();
    addListenerOnSpinnerItemSelection();

}

public void addListenerOnSpinnerItemSelection() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner2 = (Spinner) findViewById(R.id.spinner2);

}

public void addListenerOnButton() {

    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner2 = (Spinner) findViewById(R.id.spinner2);
    btnSubmit = (Button) findViewById(R.id.button1);

    btnSubmit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            AlertDialog alertDialog = new AlertDialog.Builder(
                    LocationList.this).create(); // Read Update
            alertDialog.setTitle("Confirm Message");
            alertDialog.setMessage("You are in "
                    + String.valueOf(spinner1.getSelectedItem())
                    + "\nAnd You are going to "
                    + String.valueOf(spinner2.getSelectedItem()));

            alertDialog.setButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {

                            launchIntent();

                        }
                    });

            alertDialog.setButton2("No",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {

                        }
                    });

            alertDialog.show();
        }

        private void launchIntent() {
            Intent it = new Intent(LocationList.this, YourPath.class);
            it.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(it);
        }

    });

} 
```

}

现在我需要一个数据库来做到这一点！

你有什么想法我该怎么做！！！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:21:12.493

您根本不需要数据库。事实上，您这样做的唯一原因是，如果您想动态更改用户可能最终出现在“您的路径”​​上的图像。

如果您可以在创建应用程序时提供所有图像，只需将它们全部放在 /Drawable 文件夹中，然后您将在 YourPath Activity 中访问您想要的图像。

我会抓取这些值并将它们放入一个变量中以像这样使用它们：

```
String value1 = spinner1.getSelectedItem().toString();
String value2 = spinner2.getSelectedItem().toString(); 
```

然后，我会将几个字符串值粘贴到您发送到 YourPath 活动的意图中。您将在 launchIntent 方法中执行此操作，如下所示：

```
private void launchIntent() {
        Intent it = new Intent(LocationList.this, YourPath.class);
        it.putExtra("value1", value1);
        it.putExtra("value2", value2);
        startActivity(it);
    } 
```

然后，在 YourPath 类中，像这样获取这些值：

```
Intent i = getIntent();
Bundle extras = i.getExtras();

String value1 = extras.getString("value1");
String value2 = extras.getString("value2"); 
```

然后，您将执行一些 if-else（或最好是 switch）语句来确定要显示的图像

```
if(value1.equals("somevalue") && value2.equals("othervalue")){
    int imageResource = R.drawable.mypic;

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

**然后将您的 my_path 布局文件添加到 res/layout 文件夹**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/myImageView"
    ></ImageView>
</LinearLayout> 
```

您现在应该可以在 myPath 活动中访问图像视图，只是不要忘记设置内容视图：

```
setContentView(R.layout.my_path); 
```

# c# - 如何在 Windows 8 Metro App 中平滑滚动 ScrollViewer？

> ID：13365729
> 
> 赞同：3
> 
> 时间：2012-11-13T17:33:37.223
> 
> 标签：c#, windows, xaml

我有这样的问题：我在 Windows 8 的 XAML/C# 应用程序中有一个 ScrollViewer。在 ScrollViewer 中有一个具有动态列数的网格，我在加载程序时在代码中设置了 ColumnDefenitions。但是当我尝试在 ScrollViewer 中滚动这个网格时

```
scrollViewer.ScrollToHorizontalOffset(myOffset); 
```

它立即滚动，但我希望它滚动一段时间，顺利。请帮助我，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:49:46.983

可以使用 来实现`Storyboard`，请参见以下示例（甚至可以应用于 Windows Phone 8）：

[http://blogs.msdn.com/b/delay/archive/2009/08/04/scrolling-so-smooth-like-the-butter-on-a-muffin-how-to-animate-the-horizo​​ntal-垂直偏移属性-的-a-scrollviewer.aspx](http://blogs.msdn.com/b/delay/archive/2009/08/04/scrolling-so-smooth-like-the-butter-on-a-muffin-how-to-animate-the-horizontal-verticaloffset-properties-of-a-scrollviewer.aspx)

**编辑：**

新链接：[http](http://dlaa.me/blog/post/9857745) ://dlaa.me/blog/post/9857745 （[备份](https://web.archive.org/web/20160408030156/http://dlaa.me/blog/post/9857745)）

# r - 在R中按ASCII顺序对非字母数字字符进行排序

> ID：13365732
> 
> 赞同：3
> 
> 时间：2012-11-13T17:33:46.707
> 
> 标签：r, sorting, ascii

知道如何按 ASCII 顺序（如 C）对包含非字母数字字符的字符向量进行排序吗？一个例子来说明：

```
> v<-c("#1-adfgh3$","-d","!cd3&")
> sort(v)
[1] "-d"         "!cd3&"      "#1-adfgh3$" 
```

然而 ”！” 应该按 ASCII 顺序出现在“-”之前。

非常感谢。

干杯，约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T18:19:46.260

这是一个想法：

```
asciiSort <- function(vec) {
    x <- sapply(vec, 
                function(X) {
                    paste0(strtoi(charToRaw(X), base=16), collapse="")
                })
    vec[order(x)]
}

asciiSort(v)
# [1] "!cd3&"      "#1-adfgh3$" "-d" 
```

# php - Drupal 节点 2 页内容拆分

> ID：13365733
> 
> 赞同：1
> 
> 时间：2012-11-13T17:34:06.913
> 
> 标签：php, drupal, drupal-7

我的雇主要求网站上的某些页面具有两页功能。这意味着一些默认内容正常显示在 node_view 页面上，但第二部分应在单击链接时显示。

如果我可以跨多个节点执行此操作，这将很容易，但要求是所有数据都存储在一个节点中，但跨两个页面显示。

我一起破解了以下代码：

```
function mymodule_node_view($node, $view_mode, $langcode){

$path = current_path();
$path_alias = drupal_lookup_path('alias',$path);

$links = array( 'test' => array('title'=>'my_link', 'query'=>'', 'href'=>"{$path_alias}/nextpage") );

$node->content['my_module'] = array(
    '#theme' => 'links__node__mymodule',
    '#links' => $links,
    '#attributes' => array('class' => array('links', 'inline')),
);
} 
```

这会在我的内容区域顶部创建一个名为**my_link**的超链接——这很棒。

当我单击超链接时，问题就开始了。假设我在**[http://example.org/homepage](http://example.org/homepage)**上并单击超链接，我希望被重定向到**[http://example.org/homepage/nextpage](http://example.org/homepage/nextpage)**。此外，我仍然想维护我所在的实际节点的视图和编辑选项卡。但是，Drupal 正确地给了我一个“找不到页面”的错误。

有趣的是，如果我使用**[http://example.org/node/1](http://example.org/node/1)**并访问了**[http://example.org/node/1/nextpage](http://example.org/node/1/nextpage)**，我没有得到我上面描述的问题，但 url 的描述性较差。

为了解决这个问题，我确信我必须扩展**hook_menu**但我不知道如何解释导致实际节点标题的任何数量的分类术语。**所以，我无法预测在节点标题和/nextpage**之前需要多少**%**。但是，我希望**/nextpage**仍然具有其父页面的查看和编辑选项卡。

 ****这对我来说都是未开发的领域。

## 更新

我发现以下函数可以很好地返回包含分类法的整个节点路径：

```
$path = current_path();
$path_alias = drupal_lookup_path('alias',$path); 
```

我不知道如何在**hook_menu**中利用这一点为我的节点动态创建**/ nextpage 。**

请记住，我真的不希望**/nextpage**完全独立于原始的和实际的 Drupal 节点。在 /nextpage 上时，我希望能够访问节点的视图、编辑等选项卡。

因此，**/nextpage**实际上只是 Drupal 节点页面的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:43:13.313

有一种快速的方法可以做到这一点。使用[视图模块](http://drupal.org/project/views)。

在字段部分选择您要查看的字段。并在参数中添加`nid`.

然后将链接添加到您已经创建的节点视图。

最终结果`http://mysite/views-page/[nid]`

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:01:42.137

我会检查 node_menu() 函数以获取有关它如何实现的一些参考。

不确定您的分类要求，所以这可能不够，但我会按照我的理解进行。

但是在我的脑海中，我会选择类似的东西：

```
function mymodule_menu() {
  $items['node/%node/nextpage'] = array(
    'title' => 'Next page',
    'type' => MENU_LOCAL_TASK, // Makes it a tab on node/%node-pages
    'page callback' => 'mymodule_node_page_view', // Your page display function
    'page arguments' => array(1), // First will be a node object, second will be whatever value is passed in the  url
    // You should rip access callback and access arguments from node_menu()
  );

  return $items;
} 
```

那应该做一些你所要求的事情。

使用面板/页面（另请参见 Chaos 工具）或可以说是视图来执行此操作也是可能的、更容易且绝对推荐的，因为它们非常有能力完成所有这些工作，并且通常比自定义代码更好地利用 Drupal 的优势。

**更新**

为了澄清我已经简化了菜单挂钩，您应该能够使用下面的页面查看功能。我仍然相信您会使用面板和覆盖 node_view 等做出更好的解决方案。

菜单挂钩中的 MENU_LOCAL_TASK 部分应将其与查看和编辑一起变成另一个选项卡。

```
function mymodule_node_page_view($node) {
    die("It works: ".$node->title);
} 
```

希望这更有帮助。****

# javascript - 如何从表格中获取显示的值？

> ID：13365740
> 
> 赞同：0
> 
> 时间：2012-11-13T17:35:00.083
> 
> 标签：javascript, jquery, oracle-apex

我有一个问题，我不知道如何解决它。在我的网页上，我从其他 apex 应用程序动态加载表（并且只有用户想要）：

```
function getParameter (filter){
  var url;
  var html;
  filter = filter.replace(/ /g,'%20')
  url = 'http://xxx.xxx.xxx.xxxx:8080/apex/f?p=PAR_PARAMETER:1:'+APP_SESSION+
    ':IR_REPORT_Query_Parameter::RIR,CIR:IR_P_SYS.SZGETTEXT(T.EZS_NO):'+filter;
 html = $('#ParameterSettings').load(url +' .apexir_WORKSHEET_DATA'); 
```

}

这很好用。

我现在的问题是用户可以选择： 我想编辑值，在这种情况下，**值 col**（仅显示）将替换为：

```
'<input type="text" value="|HTML|" size="30" maxlength="4000" class="P3_PARAMETER_VALUES">' 
```

这也可以正常工作，但我怎样才能获得用户现在可以输入输入字段的值？

前面的表格是可编辑的：

```
<div id="P3_PARAMETERSETTING">
<table>
 <thead></thead>
 <tbody>
   <tr>
   <tr class="even">
    <td headers="LINK">
    <td align="left" headers="P_SYS.SZGETTEXT(T.EZS_NO)">(Dist) Driving time</td>
    <td align="left" headers="NAME">REQ.data.source.trip</td>
    <td align="left" headers="Value">tadaaa</td>
    <td align="left" headers="Default">0</td>
    <td align="left" headers="P_SYS.SZGETTEXT(D.EZS_NO)">Data source for trips to use         in the query: 0 = all, 1 = online recorded data, 2 = vehicle recorded data</td>
    <td align="left" headers="Max">2</td>
    <td align="left" headers="Min">0</td>
   </tr>
 </tbody>
</table>
</div> 
```

切换到可编辑后：

```
<div id="P3_PARAMETERSETTING">
<table>
 <thead></thead>
 <tbody>
  <tr class="odd">
   <td headers="LINK">
   <td align="left" headers="P_SYS.SZGETTEXT(T.EZS_NO)">(Dist) Driving time</td>
   <td align="left" headers="NAME">REQ.grid.value.size</td>
   <td align="left" headers="Value">
    <input class="P3_PARAMETER_VALUES" type="text" maxlength="4000" size="30" value="tadaaa">
   </td>
   <td align="left" headers="Default">60</td>
   <td align="left" headers="P_SYS.SZGETTEXT(D.EZS_NO)">Default data query value grid size</td>
   <td align="left" headers="Max">43200</td>
   <td align="left" headers="Min">10</td>
  </tr>
 </tbody>
</table>
</div> 
```

谢谢马里奥

如果有人需要更多代码，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:08:35.890

如果您能够更改 HTML，那么最简单的答案是确保为每个新输入元素添加唯一的 id。

```
<input id="VALUE_1" class="P3_PARAMETER_VALUES" type="text" maxlength="4000" size="30" value="tadaaa"> 
```

然后你可以使用普通的 JavaScript 访问

```
var value1 = document.getElementById('VALUE_1').value; 
```

你可以通过使用像 jQuery 这样的 JavaScript 库来使这种选择更加强大：

[http://jquery.com/](http://jquery.com/)

您可能还想查看 contenteditable：

[https://developer.mozilla.org/en-US/docs/HTML/Content_Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)

# sql - 存储过程：从一个表中获取 3 个值并将它们保存到另一个表中

> ID：13365745
> 
> 赞同：0
> 
> 时间：2012-11-13T17:35:09.510
> 
> 标签：sql, database, postgresql, stored-procedures, plpgsql

我有以下数据库结构：

```
CREATE TABLE songs (_id SERIAL PRIMARY KEY, _artist TEXT, _name TEXT);
CREATE TABLE cafes (_id SERIAL, _ip TEXT PRIMARY KEY);
CREATE TABLE users (_id SERIAL UNIQUE, _imei TEXT PRIMARY KEY);
CREATE TABLE votes (_id SERIAL PRIMARY KEY, _cafe TEXT, _user INTEGER, _song INTEGER, _vote INTEGER); 
```

我有一个存储过程来检查某些行是否存在，如果它们不存在则创建它们。
存储过程：

```
CREATE OR REPLACE FUNCTION testfunc(user_imei text, cafe_ip text, song_artist text, song_name text) RETURNS void AS $$
DECLARE 
id_cafe INTEGER;
id_user INTEGER;
id_song INTEGER;
temp_row RECORD;
BEGIN
IF NOT EXISTS (SELECT _id FROM users WHERE _imei = user_imei) THEN
    insert into users (_imei) values (user_imei);
END IF;

IF NOT EXISTS (SELECT _id FROM cafes WHERE _ip = cafe_ip) THEN
    insert into cafes (_ip) values (cafe_ip);
END IF;

IF NOT EXISTS (SELECT _artist FROM songs WHERE _artist = song_artist AND _name = song_name) THEN
    insert into songs (_artist, _name) values (song_artist, song_name);
END IF;    

END;
$$ LANGUAGE plpgsql; 
```

毕竟我想在 table 中插入一个新行`vote`，其中：

_cafe = cafes._id
_song = song._id
_user = users._id

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T01:13:09.840

我做了一些调整。

*   `user`是一个[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，我用`usr`它作为列名。
*   假设列`votes.cafe`是`integer`，不是`text`。
*   从列名中删除了前导下划线。这是一个特殊的命名约定。我通常将它用于 plpgsql 函数中的变量，因此它们永远不会与列名冲突..

```
CREATE OR REPLACE FUNCTION testfunc(
    _user_imei text
   ,_cafe_ip text
   ,_song_artist text
   ,_song_name text) RETURNS void AS
$func$
DECLARE 
   id_cafe integer;
   id_user integer;
   id_song integer;
BEGIN

-- user
SELECT INTO id_user  id FROM users WHERE imei = _user_imei;

IF NOT FOUND THEN
   INSERT INTO users (imei) VALUES (user_imei)
   RETURNING id INTO id_user;
END IF;

-- cafe
SELECT INTO id_cafe  id FROM cafes WHERE ip = _cafe_ip;

IF NOT FOUND THEN
   INSERT INTO cafes (ip) VALUES (cafe_ip)
   RETURNING id INTO id_cafe;
END IF;

-- song
SELECT INTO id_song  id FROM songs
WHERE artist = _song_artist AND name = _song_name;

IF NOT FOUND THEN
   INSERT INTO songs (artist, name) VALUES (_song_artist, _song_name)
   RETURNING id INTO id_song;
END IF;

INSERT INTO votes (cafe, usr, song)  -- What about column vote??
VALUES (id_cafe, id_user, id_song);  -- Assuming cafe is type integer

END
$func$ LANGUAGE plpgsql; 
```

# ruby-on-rails - 是否有支持 Heroku 的方法来以秒为单位获取音频文件的长度？

> ID：13365748
> 
> 赞同：2
> 
> 时间：2012-11-13T17:35:14.783
> 
> 标签：ruby-on-rails, audio, heroku, ffmpeg, mp3

我正在尝试实施

[http://blog.firmhouse.com/validate-length-of-an-audio-file-when-using-paperclip-and-s3](http://blog.firmhouse.com/validate-length-of-an-audio-file-when-using-paperclip-and-s3)

但我不确定 FFMpegWrapper 提供了什么 gem，我想使用 Heroku 部署我的应用程序进行测试。heroku 是否支持对此有用的东西？

完整的 Rails 应用程序源：

[https://github.com/mrgenixus/sound-byte](https://github.com/mrgenixus/sound-byte)

相关型号：

[https://github.com/mrgenixus/sound-byte/blob/master/app/models/episode.rb](https://github.com/mrgenixus/sound-byte/blob/master/app/models/episode.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T09:40:46.773

很久以前，但这帮助了我：

```
https://github.com/streamio/streamio-ffmpeg

audio = FFMPEG::Movie.new("path/to/audio.mp3")
audio.duration # 7.5 (duration of the audiofile in seconds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:43:03.757

我正在开发同一种应用程序（你可以在这里看到 - [https://github.com/taelor/radio](https://github.com/taelor/radio)），我也有同样的问题。

现在，我还需要使用 wkhtmltopdf，所以我只需将它放在 app/bin/wkhtmltopdf 中，并可以将 wicked_pdf 指向该二进制文件。我将对其进行试验并回复您。

# sql - character_length Teradata SQL 助手

> ID：13365749
> 
> 赞同：1
> 
> 时间：2012-11-13T17:35:16.250
> 
> 标签：sql, teradata

我必须运行列检查以确保数据的一致性，而唯一让我的代码出错的是检查某些参数之间日期的字符长度。

```
SEL
sum(case when ( A.date is  null or (character_length(A.date) >8)) then 1 else 0 end ) as Date
from
table A
; 
```

该列的日期格式为 YYYY-MM-DD，类型为 DA。在 SQL 助手中运行脚本时，我收到错误 3580“非法使用 CHARACTERS、MCHARACTERS 或 OCTET_LENGTH 函数”。

初步研究表明 SQL 助手的 character_length 函数存在问题，但我不知道如何调整代码使其运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:41:45.033

您是否要使用chareter长度来使用内存？因为如果是这样，那对于日期字段来说是恒定的。如果您试图获取字符串表示的长度，我认为`LENGTH(A.date)`就足够了。不幸的是，由于 teradata 将在转换为字符串时填充零，我认为这可能总是返回 10。

更新 ：

好的，所以如果您在输出时想要一个特殊“形式”的日期，您需要正确选择它。在与大多数数据库一样的 teradata 中，日期不是存储在字符串中，而是以整数形式存储，从数据库的给定“纪元”日期开始计算天数（例如，纪元可能是 01/01/0000）。teradata 中的每个日期类型都有一个格式参数，该参数放置在记录标题中，说明如何在选择时格式化输出。默认情况下，`DATE FROMAT 'MM/DD/YYYY'`我相信日期格式设置为此。你可以通过强制转换来改变它。

试试`SELECT cast(cast(A.date as DATE FORMAT 'MM-DD-YYYY') as CHAR(10)) FROM A`。看看会发生什么。应该不需要通过小样本验证日期的形式来查看格式是否正确。第二次强制转换强制数据库执行转换并使用指定的格式头。否则，您可能会看到数据库将以日期形式将日期传递给 SQL 助手，而 sql 助手将在应用程序级别执行转换，使用在其自己的设置中指定的格式，而不是在数据库中设置的格式。

# javascript - 如何从Javascript中的字符串获取时区偏移量

> ID：13365756
> 
> 赞同：6
> 
> 时间：2012-11-13T17:35:35.187
> 
> 标签：javascript, timezone

我收到带有偏移量的字符串格式的日期，但 javascript 将其转换为本地设备时间

```
var d = new Date("2012-11-13T11:34:58-05:00");
debug.log(d); 
```

返回**2012 年 11 月 13 日星期二 17:34:58 GMT+0100 (CET)**

```
var offset = d.getTimezoneOffset();
debug.log(offset); 
```

返回**-60**（我的设备是 UTC +1h）

我只想知道偏移量的时间，或者字符串中提到的时区偏移量（示例中为-5h）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:03:47.413

那么我发现的唯一解决方案是通过解析字符串来创建我的自定义时间对象

```
//ex: 2012-11-13T10:56:58-05:00
function CustomDate(timeString){

    var completeDate = timeString.split("T")[0];
    var timeAndOffset = timeString.split("T")[1];
    //date
    this.year = completeDate.split("-")[0];
    this.month = completeDate.split("-")[1];
    this.day = completeDate.split("-")[2];

    this.date = this.year + "/" + this.month + "/"+this.day;

    //negative time offset
    if (timeAndOffset.search("-") != -1){
        var completeOffset = timeAndOffset.split("-")[1];
        this.offset = parseInt(completeOffset.split(":")[0]) * -1;

        var originalTime = timeAndOffset.split("-")[0];
        this.hours = parseInt(originalTime.split(":")[0]);
        this.minutes = parseInt(originalTime.split(":")[1]);
        this.seconds = parseInt(originalTime.split(":")[2]);

        this.time = this.hours + ":" + this.minutes + ":"+this.seconds;

    }
    ///positive time offset
    else if (timeAndOffset.search(/\+/) != -1){

        var completeOffset = timeAndOffset.split("+")[1];
        this.offset = parseInt(completeOffset.split(":")[0]);

        var originalTime = timeAndOffset.split("+")[0];
        this.hours = parseInt( originalTime.split(":")[0]);
        this.minutes = parseInt(originalTime.split(":")[1]);
        this.seconds = parseInt(originalTime.split(":")[2]);

        this.time = this.hours + ":" + this.minutes + ":"+this.seconds;
    }
    //no time offset declared
    else{
        this.hours = parseInt(timeAndOffset.split(":")[0]);
        this.minutes = parseInt(timeAndOffset.split(":")[1]);
        this.seconds = parseInt(timeAndOffset.split(":")[2]);
        this.offset = 0;

        this.time = this.hours + ":" + this.minutes + ":"+this.seconds;
    }
} 
```

例如，如果我想在指定的时区偏移量中显示接收到的时间 2012-11-13T11:34:58-05:00 ：

```
var aDate = new CustomDate("2012-11-13T11:34:58-05:00");
alert("date: " + aDate.date +" time: "+aDate.time+" offset: "+aDate.offset); 
```

我得到

```
date: 2012/11/13 time: 11:34:58 offset: -5 
```

这个解决方案的问题是日期和时间约定是在代码中手动定义的，因此它们不会自动适应用户的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:41:20.563

我不完全确定我知道你的要求，但我不认为 javascript 可以提供除本地之外的偏移量，因为它不知道你给它的时间来自哪里..

所以你给了它“2012-11-13T11:34:58-05:00”但是没有关于这个时间起源的信息，它可能是世界上任何地方的时间，所以它默认为你当地的时区如果为偏移量。

# excel - VBA从模块更改实例变量（excel）

> ID：13365758
> 
> 赞同：2
> 
> 时间：2012-11-13T17:35:38.377
> 
> 标签：excel, vba, variables, module, instance

在 VBA 中，我需要一个模块子来告诉实例设置一些变量。

在模块 1 中，我有：

```
Sub Load()
ThisWorkbook.SetupVariables
ThisWorkbook.TestVariables
End Sub 
```

在 ThisWorkbook 我有：

```
Private Variable1 As Integer
Private Variable2 As String
Private Variable3 As MyUserDefinedObjectType

Public Sub SetupVariables()
Variable1 = 5
Variable2 = "Five"
Set Variable3 = New MyUserDefinedObjectType()
End Sub

Sub TestVariables()
MsgBox Variable1 & " is spelled " & Variable2
Variable3.SomeFunction
End Sub 
```

在 Load() 中对 TestVariables 的调用会产生正确的结果，但对 TestVariables 的后续调用会失败。如何让 Variable1 和 Variable2 保持它们的值？（在我的实际情况下，这些变量是我定义的对象，不能成为公共变量。）

事件顺序：

`Load`存储在 中`Module1`并与 上的表单按钮相关联`Worksheet1`。这是首先按下的。

随后，一个 ActiveX 控件`Worksheet2`告诉`ThisWorkbook`调用`TestVariables`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:42:20.173

它对我有用，就像你拥有它一样。为变量 1 创建一个观察（视图 - 观察窗口）并选择值更改时中断。您应该能够看到它何时变为零。

# css - 移动网络应用程序，以百分比为单位的样式；我无法获得工作高度

> ID：13365770
> 
> 赞同：1
> 
> 时间：2012-11-13T17:31:10.533
> 
> 标签：css, mobile

我正在为一个乐队构建一个移动应用程序，显然希望它能够在当今所有过多的手机中很好地显示。我一开始是为我自己的设备构建的，它看起来和工作都很棒，所以现在我正在按百分比重新设计它，以便它可以在所有设备上运行。

我有一个滑块（jquerytools），如果我将宽度设置为 100%，那么它在我的 iphone 和我的 ipad 中非常宽......成功，但是我对高度没有任何运气。它似乎只接受以 px 为单位的高度。如果我以百分比设置高度，它就不会显示。

有任何想法吗？

更新的 CSS：

```
#header{
width:100%;

position:relative;
z-index: 20;
box-shadow: 0 0 10px white;
}

.scrollable {
position:relative;
overflow:hidden;
width: 100%;
height: 100%;
box-shadow: 0 0 20px purple;
/*  height:198px; */
z-index: 20;
}

.scrollable .items {
/* this cannot be too large */
width:1000%;
position:absolute;
clear:both;
box-shadow: 0 0 30px green;

}

.items div {
float:left;
width:10%;
height:100%;

}

/* single scrollable item */
.scrollable img {
    float:left;
    width:100%;
   height: auto;
 /*    height:198px; */
}

/* active item */
.scrollable .active {
    border:2px solid #000;
    position:relative;
    cursor:default;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:24:04.020

如果你的元素不能是`position:relative`，我会那样做

```
.scrollable {
   position:absolute; // instead of relative
   overflow:hidden;
   width: 100%;
   top:0;
   bottom:0;// instead of height: 100%;
   box-shadow: 0 0 20px purple;
   /*  height:198px; */
   z-index: 20;
} 
```

基本上我将位置定义为绝对位置，并添加了元素从顶部零开始，从底部零开始的事实，这相当于`height:100%;`

# c++ - C++ - 两个类相互实例化，不能使用前向声明

> ID：13365771
> 
> 赞同：1
> 
> 时间：2012-11-13T17:37:06.477
> 
> 标签：c++

我有 A 类和 B 类，它们的头文件都带有包含保护。一读：

```
#ifndef A_H
#define A_H

#include "B.h"

class A
{
B b;
};

#endif 
```

还有一个：

```
#ifndef B_H
#define B_H

#include "A.h"

class B
{
A a;
};

#endif 
```

现在我使用以下 main.cpp 对其进行测试：

```
#include "A.h"

int main()
{
        A a;
} 
```

编译错误如下：

```
# make main
g++     main.cpp   -o main
B.h:8: error: ‘A’ does not name a type 
```

除了使用指针/引用和前向声明之外，有没有解决这种情况的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:39:15.617

不，这是不可能的：其中之一需要是指针或引用：因为如果 A 包含 B，B 包含 A，A 又包含 B，那么您就有无限递归并试图指定无限大小的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T17:38:19.267

不幸的是，除了使用指针/引用和前向声明之外别无选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:38:29.720

你不能这样做，你会导致无限递归（A 将包含 B，B 将包含，A ...），而且编译器不会允许它，因为在一个类声明中，另一个类将是不完整的. （未完全定义）

如果其中之一是指针或引用，则可以这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T17:56:00.137

如果可能，我建议使用 pImpl 成语（Pointer-to-implementation，其他名称：不透明指针、Handle-body 成语、柴郡猫……详情请参见[此处](http://en.wikipedia.org/wiki/Opaque_pointer)。）

它基本上允许您从您的类用户通常可见的实现细节中“释放”您的类声明（即使它们不可用，假设`private`访问）。

您只需按如下方式声明您的类：

```
#ifndef A_H
#define A_H

class A{
public:
     //declare public methods -> "interface"
private:
     struct Private;
     Private * mp_d;  //feel free to use smart pointer
};

#endif 
```

前向声明`struct`（或`class`）仅*在您的源文件*中定义，并包含所有实现细节，例如您的数据成员和类内部的函数。

```
#include "B.h"
struct A::Private {
      B a;
};

A::A() : mp_d( new Private()) {
} 

A::~A(){
    delete mp_d;   //not required if using smart pointer
} 
```

**注意：**现在编译器生成的复制构造函数和赋值运算符不再起作用（如预期的那样）。确保自己实现它们，或者只是通过声明它们`private`（不实现）来阻止编译器生成它们。（这基本上是 C++03 风格；我*认为*在 C++11 中，您只需`= delete`在声明后添加即可防止编译器生成。）

编辑：添加了 pImpl 的“长”名称

# sql - SQL Server 转换错误

> ID：13365775
> 
> 赞同：1
> 
> 时间：2012-11-13T17:37:19.817
> 
> 标签：sql, sql-server, sql-server-2005

这是我面临的一个非常奇怪的问题。当我运行以下查询时：

```
select p1.*  
from art_asset as p0 
inner join  
   (select   
       t0.art_asset_id as Id, t0.Host, 
       convert(INT, substring(t0.host, len(rtrim(t0.host)) -1 , 2)) as Number    
    from art_asset t0   
    where t0.manufacturer = 'McAfee' and decommissioned = 0) as p1 on p1.Id = p0.art_asset_id 
```

我得到了 3 列，一切看起来都和我猜想的一模一样。我得到一`Id`列，一`Host`列和一`Number`列。

但是，当我将 where 子句添加到此查询的末尾时，如下所示：

```
select p1.*  
from art_asset as p0 
inner join  
   (select
       t0.art_asset_id as Id, t0.Host, 
       convert(INT, substring(t0.host, len(rtrim(t0.host)) -1 , 2)) as Number    
    from art_asset t0   
    where t0.manufacturer = 'McAfee' and decommissioned = 0 ) as p1 on p1.id = p0.art_asset_id
where p1.Number <> 1 
```

我收到以下错误！？！

> *消息 245，级别 16，状态 1，行 1
> 将 varchar 值“1Z”转换为数据类型 int 时转换失败。*

以下是数据示例：

```
| Id    | Host                | Number |
----------------------------------------
| 1     | DEVICENAME80        | 80     |
| 2     | DEVICENAME81        | 81     |
| 3     | DEVICENAME60        | 60     | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:25:46.507

尝试将您的 where 子句更改为：

```
 WHERE ISNUMERIC(p1.Number)=1 AND p1.Number <> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:15:43.440

[CONVERT 在 where 子句](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)有效，因此您的原始查询应该有效：

```
SELECT
  art_asset_id as Id, 
  Host, 
  CONVERT(INT, SUBSTRING(host, len(rtrim(host)) -1 , 2)) as Number    
FROM art_asset  
WHERE manufacturer = 'McAfee'
  AND decommissioned = 0
  AND CONVERT(INT, SUBSTRING(host, len(rtrim(host)) -1 , 2)) <> 1 
```

但是既然你说这个 CONVERT 语句失败了，一个使用[隐式转换](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)的 WHERE 子句也可以工作：

```
WHERE manufacturer = 'McAfee'
  AND decommissioned = 0
  AND SUBSTRING(host, len(rtrim(host)) -1 , 2) <> 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:25:39.817

问题是转换正在优化以在您不希望它运行时运行。看看[这个](https://stackoverflow.com/questions/4384709/sql-server-datetime-subquery-conversion-error)

# haskell - 我的递归挂起

> ID：13365777
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:37:32.890
> 
> 标签：haskell, recursion

它编译正确，但不起作用。

它适用于`[]`但如果它有其他任何东西，它就会永远挂起。`test1`- 好的，`test 2`挂了。

```
--Tests pour 'effectuerAchat'.
test1 = effectuerAchat achat1_1 [] == ([],achat1_1)
test2 = effectuerAchat achat1_1 [offre1_1_1_100] == ([(Commande "fournisseur1" "article1" 1 100)],Achat "article1" 0) 
```

这是代码...

```
effectuerAchat a os = rfred a (offresPour a os) (achatQuantite(a)) []
   where rfred a os n lc = 
            if os == []|| n==0
            then (lc,(Achat (achatArticle(a)) n))
            else 
                 if n>=(offreQuantite(head(os)))
                 then let c= (Commande (offreFournisseur(head(os))) (achatArticle(a)) (offreQuantite(head(os))) (offrePrix(head(os))))
                          n= n-(offreQuantite(head(os)))
                          xs =  tail(os)
                      in  rfred a xs n (c:lc)
                 else let c= (Commande (offreFournisseur(head(os))) (achatArticle(a)) n (offrePrix(head(os))))
                          n= 0
                          xs =  tail(os) 
                      in  rfred a xs n (c:lc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:00:29.907

你有一个无限循环

```
let c= (Commande (offreFournisseur(head(os))) (achatArticle(a)) (offreQuantite(head(os))) (offrePrix(head(os))))
    n= n-(offreQuantite(head(os)))
    ^^^^^ 
```

`n`右侧的不是来自`n`上面的测试，而是在`n`绑定的左侧引入（它遮住了外部范围的那个）。如果`os (= offresPour achat1_1 [offre1_1_1_100])`包含多于一项，`n`则在测试中需要

```
if os == []|| n==0 
```

在递归调用中，评估挂起。

以不同的方式命名变量，

```
let c = ...
    n' = n - ...
in rfred ... n' ... 
```

# actionscript-3 - 导入的 Flex 项目的路径不正确

> ID：13365781
> 
> 赞同：1
> 
> 时间：2012-11-13T17:37:43.203
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在尝试将其他人的 Flex 项目文件夹导入 Flash Builder 4.5，但路径存在一些问题。当我加载所有内容时，我收到错误消息，指出所有位于**src**中的 .as 文件的“类型未找到或不是编译时常量” 。看起来根据路径设置，它找不到那些文件。

所以我去了**Package > Properties**并尝试将 src 文件夹添加到 Source Path 列表中，但那里也没有运气。

一件奇怪的事情是，当我查看底部的错误时，我看到**Path**设置为**/ProjectName/src/**。那是绝对路径吗？如果是的话，它当然不会找到他们。

任何人都可以了解让我的 Flex 项目找到我的**src**文件夹吗？

谢谢，

怀特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:47:54.773

Flash Builder 中的 /ProjectName/foo/bar 将被解析为项目的 foo/bar 目录，因此它不是绝对路径。

您遇到的项目也可能与您的项目引用的库 (SWC) 未正确引用有关。您可以`Project -> Properties -> Flex Build Path -> Library path (tab)`像添加源路径一样去添加对库的引用。

此外，在正确添加源路径后，您还会注意到引用项目中出现了一个“虚拟文件夹”，您可以直接加载和编辑被引用项目的源代码。

# mysql - CakePHP saveMany 遇到外键约束失败错误？

> ID：13365786
> 
> 赞同：0
> 
> 时间：2012-11-13T17:38:03.503
> 
> 标签：mysql, cakephp, foreign-keys

我尝试 $this->MembersQuestionsAnswer->saveMany($data)。

$data 是这样的：

```
array(
    (int) 0 => array(
        'member_id' => '4',
        'questions_anwser_id' => '102'
    ),
    (int) 1 => array(
        'member_id' => '4',
        'questions_anwser_id' => '203'
    )
) 
```

然后我得到了错误

> 错误：SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`dating_sys`. `members_questions_answers`, CONSTRAINT `members_questions_answers_ibfk_2`FOREIGN KEY ( `questions_answer_id`) REFERENCES `questions_answers`( `id`)）
> 
> SQL 查询： INSERT INTO `dating_sys`。`members_questions_answers` ( `member_id`, `modified`) 值 (4, '2012-11-14 01:13:27')

我检查了数据库。表 questions_answers id 字段中确实存在 102 和 203。而且我也可以手动将它们插入表格中。正如我检查的那样，外键约束也有效。

并且表 members_questions_answers 表 DDL 是

```
CREATE TABLE `members_questions_answers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `member_id` int(10) unsigned NOT NULL,
  `questions_answer_id` int(10) unsigned NOT NULL,
  `modified` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `member_fk` (`member_id`) USING BTREE,
  KEY `questions_answer_fk` (`questions_answer_id`) USING BTREE,
  CONSTRAINT `members_questions_answers_ibfk_2` FOREIGN KEY (`questions_answer_id`) REFERENCES `questions_answers` (`id`),
  CONSTRAINT `members_questions_answers_ibfk_1` FOREIGN KEY (`member_id`) REFERENCES `members` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ; 
```

感觉就像 questions_answers 表由于某种原因没有真正被识别。我确实更改了该表的名称及其外键引用。有缓存之类的吗？

任何人都可以帮助或指出我的新方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:11:00.517

是的，它看起来像一个缓存问题。清除 app/tmp/cache/models 中的模型缓存文件（或您正在使用的任何缓存引擎）

# php - 如何计算下面示例中的差异

> ID：13365789
> 
> 赞同：0
> 
> 时间：2012-11-13T17:38:18.847
> 
> 标签：php, javascript, jquery, html

我想计算问题中的“总分”与问题中每个答案的文本输入之间的差异。此外，如果一个问题只有一个答案，那么它应该将文本输入显示为只读，并显示与该文本输入中该问题的“总分”下的数字相同的值。

下面是一个屏幕截图，显示了表格和我在这两种情况下遇到的书面问题：

![表格截图和问题信息](../Images/7524fa0c95e52ac5f1ec0e7f54a4cc90.png)

下面是当前的 jquery 变量，它应该进行计算并在必要时显示只读文本框。但目前它不起作用。另外，目前我在计算时将总分的数字显示为“5”，这是不正确的，因为它应该是每行内的数字，所以我相信`$sessionMarks`应该是数字的变量，而不是 5。

```
$(function(){             
var questions = $('#markstbl td[class*="_ans"]').length-1;

//disable single entry
for (var i=0;i<=questions;i++){   
if($("[class*=q"+i+"_mark]").length ==1){
$("[class*=q"+i+"_mark]").attr("disabled","disabled")
}                    
}

//find each question set and add listeners
for (var i=0;i<=questions;i++){                                     
$('input[class*="q'+i+'"]').keyup(function(){
var cl = $(this).attr('class').split(" ")[1]
var questionno = cl.substring(cl.indexOf('q')+1,cl.indexOf('_'))
var t=0;
$("[class*=q"+questionno+"_mark]").each(function(){
var num = (isNaN(parseInt($(this).val())))?0:parseInt($(this).val());
t+=parseInt(num);                             
})   
var fixedno = 5;
$(".q"+questionno+"_ans").text((t>fixedno)?fixedno:t);
})
}
}) 
```

下面是表格的代码，它从查询中输出数据库中每个问题的详细信息，然后将其显示在表格中：

```
<?php

$assessment = $_SESSION['id'] . $sessionConcat;

include('connect.php');

   $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
   FROM Session s 
   INNER JOIN Question q ON s.SessionId = q.SessionId
   JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
   WHERE s.SessionName = ?
   ORDER BY q.QuestionId, an.Answer
   ";

   // prepare query
   $stmt=$mysqli->prepare($query);
   // You only need to call bind_param once
   $stmt->bind_param("s", $assessment);
   // execute query
   $stmt->execute(); 

       // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();
    $searchMarks = array();

    // Fetch the results into an array

   // get result and assign variables (prefix with db)
   $stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
      while ($stmt->fetch()) {
        $searchQuestionId[] = $dbQuestionId;
        $searchQuestionContent[] = $dbQuestionContent;
        $searchAnswer[] = $dbAnswer;
        $searchMarks[] = $dbQuestionMarks;
      } 

?>  

....

<tbody>
<tr>
<?php
$previous_question_id = null;
$rowspans = array_count_values($searchQuestionId);
$output = "";
$questionid = 0; //whole question
$questionno = 0; //part of question
foreach ($searchQuestionContent as $key => $question) {
if ($previous_question_id != $searchQuestionId[$key]){
$questionno=0;
}

// removed logic, not necessary to set empty strings if you're skipping them
$output.= '<tr class="questiontd">' . PHP_EOL;
if ($previous_question_id != $searchQuestionId[$key]) {
$output.= '<td class="questionnumtd" name="numQuestion" rowspan="' . $rowspans[$searchQuestionId[$key]] . '">' . htmlspecialchars($searchQuestionId[$key]) . '</td>' . PHP_EOL;
$output.= '<td class="questioncontenttd q{$questionno++}_mark{$questionid}" rowspan="' . $rowspans[$searchQuestionId[$key]] . '">' . htmlspecialchars($question) . '</td>' . PHP_EOL;
}

$output.= '<td class="answertd" name="answers[]">';
$output.= $searchAnswer[$key];
$output.= '</td>';
$output.= '<td class="answermarkstd"><input class="individualMarks" q_group="1" name="answerMarks[]" id="individualtext" type="text" /></td>' . PHP_EOL;

if ($previous_question_id != $searchQuestionId[$key]) {
$output.= '<td class="noofmarkstd  q{$questionid++}_ans" q_group="1" rowspan="' . $rowspans[$searchQuestionId[$key]] . '">' . htmlspecialchars($searchMarks[$key]) . '</td>' . PHP_EOL;
}

// moved this to the end
if ($previous_question_id != $searchQuestionId[$key]) {
$previous_question_id = $searchQuestionId[$key];
}
}
echo $output;
?>
</tr>
</tbody> 
```

**更新：**

在这个[小提琴](http://jsfiddle.net/JWTQk/18/)中的示例 HTML 中，我可以让它工作（除了我希望计算是总分减去文本输入中输入的数字，而不是它现在正在做的事情，即当我在文本输入中输入一个数字时执行从 0 到文本输入中输入的任何数字的加法），但是当我尝试编辑上面的代码来做同样的事情时，它不起作用，什么也没有发生。

示例 html 如下：

```
<form id="Marks" action="/u0867587/Mobile_app/individualmarks.php" method="post">

<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Total Marks</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
<td class="questionnumtd" name="numQuestion" rowspan="3">1</td>
<td class="questioncontenttd" rowspan="3">Name three features in a ROM</td>
<td class="answertd" name="answers[]">A</td>
<td class="answermarkstd">
<input class="individualMarks q0_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="noofmarkstd q0_ans"  q_group="1" rowspan="3">5</td>
</tr>
<tr class="questiontd">
<td class="answertd" name="answers[]">B</td>
<td class="answermarkstd">
<input class="individualMarks q0_mark_1" q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
</tr>
<tr class="questiontd">
<td class="answertd" name="answers[]">D</td>
<td class="answermarkstd">
<input class="individualMarks q0_mark_2" q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
</tr>
<tr class="questiontd">
<td class="questionnumtd" name="numQuestion" rowspan="1">2</td>
<td class="questioncontenttd" rowspan="1">Here is a single answer</td>
<td class="answertd" name="answers[]">True</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark_0" q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="noofmarkstd q1_ans" q_group="1" rowspan="1">5</td>
</tr>
</tbody>
</table>
</form> 
```

下面是数据库表的样子，（这将遵循与屏幕截图中相同的数据）

**会话表：（**存储考试详细信息的位置）

```
SessionId  SessionName
1          AAA 
```

**问题表：（**存储每个考试的问题）

```
SessionId   QuestionId       QuestionContent                Total Marks
1                 1          Name three features in a ROM        5 
1                 2          Here is a single answer             5 
```

**答案表：（**存储每个考试中每个问题的答案）

```
AnswerId(auto)  SessionId QuestionId  Answer
1               1         1           A
2               1         1           B
3               1         1           D
4               1         2           True 
```

**Individual_Answer 表：（**存储每个单独答案的每个单独标记）

```
AnswerId   AnswerMarks
1          2
2          2
3          1
4          5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:50:05.720

使用 html() 从某种程度上属于计算或整数值的 html 元素获取和放置值不是一个好习惯，因此对于此类问题始终使用隐藏字段，就像我已经包含了两个隐藏字段，一个用于原始值，一个用于对于最终值，最后您可以从隐藏字段中轻松获取总分值。

代码已针对动态数据进行更新。使用您自己的代码进行查询，我的是一个粗略的代码。

```
 <html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(function() {           
                var questions = $('#markstbl td[class*="_ans"]').length;

                //disable single entry
                for (var i=1;i<=questions;i++){   
                    if($("[class*=q"+i+"_marks]").length ==1){
                        var t_marks = $("[class*=q"+i+"_ans]").html();
                        alert(t_marks);
                        $("[class*=q"+i+"_marks]").val(t_marks).attr("disabled","disabled");
                        //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
                    }                    
                }

                //find each question set and add listeners
                for (var i=0;i<=questions;i++){                                     
                    $('input[class*="q'+i+'"]').keyup(function(){
                        var cl = $(this).attr('class').split(" ")[1]
                        var questionno = cl.substring(cl.indexOf('q')+1,cl.indexOf('_'));
                        var tot_marks = $(".q"+questionno+"_ans_org").val();

                        var ans_t=0;
                        $("[class*=q"+questionno+"_marks]").each(function(){
                            var num = (isNaN(parseInt($(this).val())))?0:parseInt($(this).val());
                            ans_t+=parseInt(num);                             
                        });
                        ans_t=tot_marks-ans_t;                             

                        var ans = (parseInt(ans_t)<0)?tot_marks:ans_t;
                        $(".q"+questionno+"_ans").val(ans);
                        $(".q"+questionno+"_ans_text").html(ans);
                    });
                }
            });
        </script>
    </head>
<body>
<form id="Marks" action="/u0867587/Mobile_app/individualmarks.php" method="post">
    <?php
    $ident = mysqli_connect('localhost','root','');
    mysqli_select_db($ident,'testdata');

    $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
    FROM session s 
    INNER JOIN question q ON s.SessionId = q.SessionId
    JOIN answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
    ORDER BY q.QuestionId, an.Answer
    ";

    $res = mysqli_query($ident,$query);
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();
    $searchMarks = array();

   while ($row = mysqli_fetch_array($res)) {
        $searchQuestionId[] = $row['QuestionId'];
        $searchQuestionContent[] = $row['QuestionContent'];
        $searchAnswer[] = $row['Answer'];
        $searchMarks[] = $row['QuestionMarks'];

    } 

?>  

<form id="Marks" action="/u0867587/Mobile_app/individualmarks.php" method="post">

<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Total Marks</th>
</tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionId);
$output = '';
$rowCount = 1;
$newQuest_id = true;

foreach($searchQuestionId as $key=>$questionId){

    if($newQuest_id == true){

        $output.= '<tr class="questiontd">';
        $output.= '<td class="questionnumtd" name="numQuestion" rowspan="'.$row_span[$questionId].'">'.$questionId.' <input type="hidden" name="q'.$questionId.'_ans_org" class="q'.$questionId.'_ans_org" value="'.$searchMarks[$key].'"><input type="hidden" name="q'.$questionId.'_ans" class="q'.$questionId.'_ans" value="'.$searchMarks[$key].'"></td>';
        $output.= '<td class="questioncontenttd" rowspan="'.$row_span[$questionId].'">'.$searchQuestionContent[$key].' </td>';
    }

    $output.= '<td class="answertd" name="answers[]">'.$searchAnswer[$key].'</td>';
    $output.= '<td class="answermarkstd">';
    $output.= '<input class="individualMarks q'.$questionId.'_marks"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />';
    $output.= '</td>';

    if($newQuest_id == true){
        $output.= '<td class="noofmarkstd q'.$questionId.'_ans_text"  q_group="1" rowspan="'.$row_span[$questionId].'">'.$searchMarks[$key].'</td>';
        $newQuest_id = false;
    }
    $output.= '</tr>';

    if($row_span[$questionId] == $rowCount){
        $newQuest_id = true;
    }

    $rowCount++;
}

echo $output;
?>
</tbody>
</table>
</form>
</form>
</body>
</html> 
```

# olap - 当未选择强制维度时，我们如何使后处理器测量不显示数据？

> ID：13365792
> 
> 赞同：3
> 
> 时间：2012-11-13T17:38:25.430
> 
> 标签：olap, aggregation, activepivot

我们不希望在未选择某些强制维度时执行后处理器。例如，我们有称为风险类型、敏感曲线、期限、货币1 和显示货币的维度。我们还有一个称为 Rate.Move 的后处理措施——它实现了 doLeafEvaluation。

在我们的客户中，

1.  如果未选择敏感曲线，我们不想在风险类型为 RateRisk 时显示 Rate.Move
2.  如果没有选择货币 1，我们不想在风险类型为 BasisSwapRisk 时显示 Rate.Move

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:18:08.440

从后处理器内部，只有一种方法可以发现用户最初选择的维度和级别（最有可能在 MDX 查询中）：您内省后处理器评估的*位置。*

这是一个小型后处理器示例（它被设计为在 ActivePivot Sandbox 应用程序中运行）。后处理器定义了一个*上下文*维度，在这个例子中是时间维度。如果用户已扩展时间维度，则评估位置的深度将至少为 2（深度 1 表示该维度仅选择 AllMember）。然后，您可以决定根据该知识返回不同的度量或计算。

```
/*
 * (C) Quartet FS 2010
 * ALL RIGHTS RESERVED. This material is the CONFIDENTIAL and PROPRIETARY
 * property of Quartet Financial Systems Limited. Any unauthorized use,
 * reproduction or transfer of this material is strictly prohibited
 */
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.Properties;

import com.quartetfs.biz.pivot.IActivePivot;
import com.quartetfs.biz.pivot.ILocation;
import com.quartetfs.biz.pivot.impl.Util;
import com.quartetfs.biz.pivot.postprocessing.impl.ABasicPostProcessor;
import com.quartetfs.fwk.QuartetException;
import com.quartetfs.fwk.QuartetExtendedPluginValue;

/**
 * 
 * @author Quartet FS
 *
 */
@QuartetExtendedPluginValue(
    interfaceName = "com.quartetfs.biz.pivot.postprocessing.IPostProcessor",
    key = ContextualPostProcessor.PLUGIN_TYPE
)
public class ContextualPostProcessor extends ABasicPostProcessor<Double> {

    /** serialVersionUID */
    private static final long serialVersionUID = 4484708084267009957L;

    /** Plugin key */
    static final String PLUGIN_TYPE = "CTX";

    /** Ordinal of the time dimension */
    protected int timeDimensionOrdinal = -1;

    /** Constructor */
    public ContextualPostProcessor(String name, IActivePivot pivot) {
        super(name, pivot);
    }

    @Override
    public String getType() { return PLUGIN_TYPE; }

    @Override
    public void init(Properties properties) throws QuartetException {
        super.init(properties);

        // Store the ordinal of the time dimension
        timeDimensionOrdinal = Util.findDimension(pivot.getDimensions(), "TimeBucket");
    }

    @Override
    protected Double doEvaluation(ILocation location, Object[] underlyingMeasures) throws QuartetException {
        if(location.getLevelDepth(timeDimensionOrdinal - 1) > 1) {
            return (Double) underlyingMeasures[0];
        } else {
            return (Double) underlyingMeasures[1];
        }
    }

} 
```

以下是在多维数据集描述中声明后处理器的方法：

```
 <measure name="ctx" isIntrospectionMeasure="false">

        <!-- This post processor dynamically buckets an underlying measure -->
        <!-- It works together with a dynamic bucket dimension.            -->
        <postProcessor pluginKey="CTX">
            <properties>
                <entry key="id" value="SUM" />
                <entry key="underlyingMeasures" value="pv.SUM,pnl.SUM" />
            </properties>
        </postProcessor>
    </measure> 
```

# java - 插入和选择日期 (Java) (MySQL)

> ID：13365795
> 
> 赞同：4
> 
> 时间：2012-11-13T17:38:30.687
> 
> 标签：java, mysql, sql, date, jdbc

我有一个表，我必须在其中执行 a `SELECT ... BETWEEN start_date AND end_date`，并将`Date`值插入到同一个表中。

我读过类似的东西：

```
java.util.Date now = new java.util.Date();
pStmt.setDate( 1, new java.sql.Date( now.getTime() ) );
pStmt.setTimestamp( 2, new java.sql.Timestamp( now.getTime() ) );
pStmt.executeUpdate(); 
```

但是那种代码设置或获取当前日期，不是吗？我想自己插入和选择自定义日期。

我也在*[StackOverflow](http://stackoverflow.com)*上阅读了它：

```
SELECT *
FROM myTable
WHERE ( YEAR(myfield) = '2009')
  AND ( MONTH(myfield) = '1') 
```

是否也可以制作`Date`字段`String`，然后用于`StringTokenizer`仅提取日、月或年信息并以`SELECT`类似于此代码的方式使用它们？（如果我的第一个 - 也是更简单的 - 想法是不可能的。）

所以到目前为止，有两种可能的解决方案。我还需要知道哪个更快，因为访问的数据库位于具有大量数据的故障安全/关键系统（银行）中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:56:02.197

第一种方法更好，因为您可以使用日期函数来操作值。

```
private void executeQuery(java.util.Date startDate, java.util.Date endDate) throws SQLException {
  Connection conn = null;
  PreparedStatement pstmt = null;
  try {
    conn = getConnection();
    String query = "select ... between ? and ?";
    pstmt = conn.prepareStatement(query);
    pstmt.setDate(1, new java.sql.Date(startDate.getTime()));
    pstmt.setDate(2, new java.sql.Date(endDate.getTime()));
    //return results
    ResultSet rs = pstmt.executeQuery();
    rs.last();
    System.out.println("last row = " + rs.getRow());
  } finally {
    if (pstmt != null) {
      pstmt.close();
    }
    if (conn != null) {
      conn.close();
    }
  }
} 
```

# command-line - 谷歌代码附加问题

> ID：13365797
> 
> 赞同：0
> 
> 时间：2012-11-13T17:38:36.970
> 
> 标签：command-line, google-code

我一直在尝试使用[此处](http://www.codeproject.com/Articles/167283/Google-Code-Upload-Utility)提供的库，但总是出错。

我正在运行的命令：

```
GCUpload.exe -u:myUserName -p:myPassword -n:myProjectName -s:Test -f:myFile 
```

但我得到以下错误：

```
 That's an error. Your client does not have the permission to get URL /files from this server.
    (Client IP address: <My IP address>)

    Please sign in to upload a file. 
```

我可以用用户登录谷歌代码并且项目存在。我做错了什么，我该如何解决这个问题？谢谢。

编辑：也许必须提供一些凭据，但我不确定需要什么。我试过这个命令没有成功：

```
net use \\code.google.com\projectname /user:username password 
```

错误是：

```
The network path was not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:07:12.593

问题是我用我的谷歌用户密码运行了命令，但是可以在[这里](https://code.google.com/hosting/settings)找到一个单独的谷歌代码密码，但你必须登录才能看到它。

# c - 画一个立方体并旋转它：立方体的一部分消失了

> ID：13365805
> 
> 赞同：0
> 
> 时间：2012-11-13T17:39:15.180
> 
> 标签：c, opengl, rendering, glut

在这段代码中，我尝试绘制一个立方体。我尝试逆时针绘制所有面顶点。
问题是，如果我不旋转立方体，只绘制红色面，如果我将它旋转 5 度，我只会看到立方体的一部分。

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>

int width=500, height=500, depth=500;

void init()
{
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(200, 200,-200, 200, 200, 0, 0, 1, 0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0,width,0,height);
    gluPerspective(90, 1, -100, 100);
    glViewport(0, 0, width, height);
}

void drawCube()
{
    int vertices[8][3]= { {100,100,0} , {300,100,0}, {300,300,0}, {100,300,0}, {100,100,300} , {300,100,300}, {300,300,300}, {100,300,300} };
    glBegin(GL_QUADS);

    glColor4f(1, 0, 0, 0);
    glVertex3iv(vertices[0]);
    glVertex3iv(vertices[1]);
    glVertex3iv(vertices[2]);
    glVertex3iv(vertices[3]);

    glVertex3iv(vertices[4]);
    glVertex3iv(vertices[5]);
    glVertex3iv(vertices[6]);
    glVertex3iv(vertices[7]);

    glColor4f(0, 1, 0, 0);
    glVertex3iv(vertices[1]);
    glVertex3iv(vertices[5]);
    glVertex3iv(vertices[6]);
    glVertex3iv(vertices[4]);

    glVertex3iv(vertices[0]);
    glVertex3iv(vertices[4]);
    glVertex3iv(vertices[7]);
    glVertex3iv(vertices[3]);

    glColor4f(0, 0, 1, 0);
    glVertex3iv(vertices[3]);
    glVertex3iv(vertices[2]);
    glVertex3iv(vertices[6]);
    glVertex3iv(vertices[7]);

    glVertex3iv(vertices[0]);
    glVertex3iv(vertices[1]);
    glVertex3iv(vertices[5]);
    glVertex3iv(vertices[4]);

    glEnd();
}

void display()
{
    glClearColor(0.0, 0.0, 0.0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(200,200,150);
    glRotatef(5, 0, 1, 0);
    glTranslatef(-200,-200,-150);
    drawCube();
    glutSwapBuffers();
}

void idle(void)
{
}

int main(int argc, char * argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width, height);
    glutCreateWindow("Test");
    glutDisplayFunc(display);
    glutIdleFunc(idle);
    init();
    glutMainLoop();
    return 0;
} 
```

这就是我所看到的：

![Window](../Images/5a06bce5ff3fdde4e9120da9b42205a5.png)

但我应该看到一个旋转的立方体，所以我应该看到右边另一张脸的部分。我怀疑我按逆时针顺序绘制顶点或其他什么东西出错了。

PS：代码已经过时了，因为在我的大学我没有机会学习最新版本的OpenGL，我必须使用GLUT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:46:30.753

几个问题：

1.  您的投影矩阵设置不合理。

    首先，您应该决定是否需要正交投影或透视投影。

    If you want orthographic, use gluOrtho2d. If you want a perspective projection, use gluPerspective. Using both will generate a bizarre transformation that's certainly not what you want.

2.  gluPerspective can't have a negative near plane. The near plane should be greater than zero, perhaps something small like `1`, with a far plane defining how far away from the camera you want the back clip plane to be. Since you seem to be using units in the hundreds, I might recommend a back plane of `1000` or so.

3.  You're calling gluLookAt, but erasing the view matrix by calling `glLoadIdentity` in `display()`. If you want a view matrix, don't erase it after you program it.

# python - Sqlite 操作字符串出数据库

> ID：13365807
> 
> 赞同：2
> 
> 时间：2012-11-13T17:39:17.330
> 
> 标签：python, html, sqlite

在我的登录方法中，我试图检查数据库中的密码是否与用户提交的密码相对应。我使用这段代码：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
error = None
db = get_db()
if request.method == 'POST':
    cur = db.execute('select password from users where username = ?', (request.form['username'], ))
    password = cur.fetchone()
    print password
    print request.form['password']
    if request.form['password'] != password:
        error = 'Invalid username/password combination'
    else:
        session['logged_in'] = True
        flash('You were logged in')
        return redirect(url_for('show_entries'))
return render_template('login.html', error=error) 
```

例如，当密码为默认密码时，打印命令显示的内容如下：

```
print password : (u'default',)
print request.form['password'] : default 
```

所以他们确实是不平等的。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:41:04.160

数据库返回的每一行都是一个列元组。您检索了一行 ( `.fetchone()`)，并且该行是具有一个元素的元组（您仅选择​​了`password`列）。只需使用它的索引从元组中*取出它：*

```
password = cur.fetchone()[0] 
```

# vb6 - 对许多对象应用命令？VB6

> ID：13365810
> 
> 赞同：1
> 
> 时间：2012-11-13T17:39:42.403
> 
> 标签：vb6

谢谢阅读。我正在编写一个程序来创建一个由 8 个列组成的列表。所以有8个列表框和每个下面的文本框。如果有人为空，我想一一检查每个文本框。...而且不知道该怎么做！

我需要你的帮助！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:41:16.537

而不是使用 8 个列表框，您可能会考虑使用 flexgrid 控件

但是使用 8 个列表框和 8 个文本框，您可以将它们创建为数组并按如下方式检查它们：

```
'1 form with with
'    1 listbox : name=List1   index=0
'    1 textbox : name=Text1   index=0
'    1 commandbutton : name=Command1

Option Explicit

Private Sub Command1_Click()
  If IsEmpty Then
    MsgBox "Textboxes are all empty", vbInformation, "IsEmpty"
  Else
    MsgBox "At least 1 Textbox is not empty", vbInformation, "IsEmpty"
  End If
End Sub

Private Sub Form_Load()
  Dim intIndex As Integer
  For intIndex = 1 To 7
    Load List1(intIndex)
    Load Text1(intIndex)
    List1(intIndex).Visible = True
    Text1(intIndex).Visible = True
  Next intIndex
  Move 0, 0, 10000, 10000
End Sub

Private Function IsEmpty() As Boolean
  Dim intIndex As Integer
  Dim blnEmpty As Boolean
  blnEmpty = True
  For intIndex = 0 To Text1.Count - 1
    If Len(Text1(intIndex).Text) > 0 Then
      blnEmpty = False
      Exit For
    End If
  Next intIndex
  IsEmpty = blnEmpty
End Function

Private Sub Form_Resize()
  Dim intIndex As Integer
  Dim sngWidth As Single
  Dim sngListWidth As Single, sngListHeight As Single
  Dim sngTextHeight As Single
  Dim sngCmdHeight As Single
  sngWidth = ScaleWidth
  sngListWidth = sngWidth / List1.Count
  sngTextHeight = 315
  sngCmdHeight = 315
  sngListHeight = ScaleHeight - sngTextHeight - sngCmdHeight
  For intIndex = 0 To List1.Count - 1
    List1(intIndex).Move intIndex * sngListWidth, 0, sngListWidth, sngListHeight
    Text1(intIndex).Move intIndex * sngListWidth, sngListHeight, sngListWidth, sngTextHeight
  Next intIndex
  Command1.Move 0, sngListHeight + sngTextHeight, sngWidth, sngCmdHeight
End Sub 
```

# php - 很难理解 Codeigniter URL

> ID：13365811
> 
> 赞同：0
> 
> 时间：2012-11-13T17:39:43.287
> 
> 标签：php, codeigniter

这是让我觉得自己像个 idjut 的事情之一。

好的 - 所以我刚刚开始使用 Codeigniter，我只是花了很多时间来了解 URL 系统。

以下是一些相关的配置设置（我现在在 MAMP/localhost 上）

```
$config['base_url'] = 'http://localhost:8888/MY_SITE/';
$config['index_page'] = 'index.php';
$route['default_controller'] = "home"; 
```

我的`.htaccess`文件现在是空白的。

所以我有一个“家”控制器，我打得很好，它加载了我的“home_view”。在上面我有一个注册链接...

```
<p>Not a member yet? <a href="<?php echo site_url('registration'); ?>">Sign Up!</a></p> 
```

这呈现为以下 HTML ...

```
<a href="http://localhost:8888/MY_SITE/index.php/registration">Sign Up!</a> 
```

到目前为止一切都很好。但是当我单击时，我得到一个“404 Page Not Found”。我*有*一个带有加载“registration_view.php”的索引方法的“registration.php”控制器。

这是我的地址栏中显示的内容

```
http://localhost:8888/MY_SITE/index.php/registration 
```

为什么我不打它？

我的日志显示..

```
ERROR - 2012-11-13 18:21:12 --> 404 Page Not Found --> registration/index 
```

.. 为什么命运如此恨我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:45:33.143

404 的许多可能和最接近的原因之一可能是`index()`您的控制器中没有功能。可以发下代码吗？？

**编辑（因为ans被否决了）**我必须给出更多解释。

在这种情况下，404 错误的可能原因可能是 -

1.  您的默认控制器设置为**home**并且您获得 404 的 url 正在调用`registration`控制器。
2.  如果没有注册控制器，你会得到 404。
3.  如果`registration`您的默认家庭控制器中没有命名为存在的功能。
4.  URI 中的第一个参数（在 index.php [如果 htaccess 不用于删除 index.php] 之后）是针对将被调用的控制器。index.php 之后的第二个参数是将从第一个参数中提到的控制器调用的函数。在这两种情况下，即控制器和功能不存在，您都会得到 404。
5.  如果注册是功能并且它的可见性设置为，`private`那么你会得到 404。

请注意，为了使 URL 更具可读性，您应该包含 htaccess 并添加规则以删除 index.php。

# android - 服务器连接Handler方式

> ID：13365812
> 
> 赞同：0
> 
> 时间：2012-11-13T17:39:50.603
> 
> 标签：android, sockets, handler

我有我的用户界面，我正在另一个线程中启动与服务器的 Socket 连接。问题是，我需要等待服务器回复。当它到达时，我需要执行特定的功能。我发现 Handler 方法是可能的，但其他网站告诉这不是真的。你有什么建议？处理程序解决方案是否正确以及如何有效地做到这一点？有什么例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:42:22.673

您是否尝试过使用 AsyncTask？

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

执行网络操作`doInBackground()`

一旦它返回，`onPostExecute()`将由能够更新 GUI 等的主线程执行。

# android - Activity 的自定义动画

> ID：13365813
> 
> 赞同：0
> 
> 时间：2012-11-13T17:39:50.747
> 
> 标签：android, animation

我正在开发一个应用程序，我想要一个活动的自定义动画。更具体地说，我有一个片段和一个活动。当用户单击`ListView`片段中的项目时，用户将被导航到一个新活动，该活动应该来自底部而不是默认动画（我认为淡入）。我用谷歌搜索了它，并找到了一些解决方案，但其中大多数是从一项活动到另一项活动。所以他们使用：

```
Intent intent = new Intent(this.getActivity() ,x.class);
getActivity().startActivity(intent);
overridePendingTransition(R.anim.slide_in, R.anim.slide_out); 
```

由于我从片段中调用第二个活动，Android 不支持此方法（`overridePendingTransition`）。谁能告诉我有什么办法可以克服这个问题？简而言之，如果用户从片段导航到第二个活动，则第二个活动应该来自底部而不是正常动画。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:44:08.297

在将调用动画的活动中，您应该使用它：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        overridePendingTransition(R.anim.anim_right_to_center, R.anim.anim_hold);
        setLayoutContent(R.layout.myactivtiy);
} 
```

如果你想用动画出去，你应该使用这个：

```
@Override
    public void onPause(){
        //todo detach from updater
        super.onPause();
        overridePendingTransition(R.anim.anim_hold, R.anim.anim_center_to_right);
    } 
```

其中 R.anim.center_to_right ：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
       android:duration="500"
       android:fromXDelta="100%"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:toXDelta="0%"> 
```

其中 R.anim.anim_hold ：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
       android:duration="500"
       android:fromXDelta="0%"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:toXDelta="0"> 
```

# java - Jetty：提供消息体总是会导致 STATUS_EXCEPTED

> ID：13365816
> 
> 赞同：0
> 
> 时间：2012-11-13T17:40:00.770
> 
> 标签：java, http, jetty

我们正在使用 Jetty 将数据从服务器应用程序发送到也使用 Jetty 的客户端应用程序。

出于某种原因，当设置消息内容时，响应始终为 HttpExchange.STATUS_EXCEPTED。然而，消息正在另一端接收，一切似乎都完好无损。

这是用于构建和发送请求的服务器应用程序的代码：

```
HttpClient client = new HttpClient();

        try
        {
            client.start();

            ContentExchange exchange = new ContentExchange(true);
            //exchange.setMethod("POST");

            // Set the request URL
            logger.info("1");
            exchange.setURL("http://localhost:8180/network/");

            // Set the data contents type.
            logger.info("2");
            //exchange.setRequestContentType("application/zip");

            // Create a file input stream
            logger.info("3");
            FileInputStream inputFile = new FileInputStream(new File("ECF43d01.zip"));

            // Stream the file into the request
            logger.info("4");
            exchange.setRequestContentSource(inputFile); // <- This line makes the response always STATUS_EXCEPTED

            // Send the request
            logger.info("5");
            client.send(exchange);

            //logger.info(baseRequest.getMethod());

            // Waits until the exchange is terminated
            int exchangeState = exchange.waitForDone();

            if (exchangeState == HttpExchange.STATUS_COMPLETED)
                response.getWriter().println("Completed "+exchange.getResponseContent());
            else if (exchangeState == HttpExchange.STATUS_EXCEPTED)
                response.getWriter().println("Error with handler HttpExchange.STATUS_EXCEPTED");
            else if (exchangeState == HttpExchange.STATUS_EXPIRED)
                response.getWriter().println("Timeout"); 
```

这是客户端接收代码：

```
public void handle(String target, Request baseRequest, HttpServletRequest arg2, HttpServletResponse response) throws IOException, ServletException 
{
    Logger logger = LoggerFactory.getLogger(AbstractHandler.class);

    logger.info("Starting");
    response.setContentType("text/html;charset=utf-8");
    logger.info("Output");

    // We have handled the request. Send back a successful response
    response.setStatus(HttpServletResponse.SC_OK);
    baseRequest.setHandled(true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:54:18.230

您不能简单地将 ZIP 文件中的二进制字节通过管道传输到 HTTP 请求中。您可能会考虑对其进行 UUENCOD 编码并确保该方法是 POST，这样它就不会被附加到请求 URL 的末尾。这是一个很好的例子：

[http://wiki.developerforce.com/page/JavaClientExample.java](http://wiki.developerforce.com/page/JavaClientExample.java)

# hadoop - “映射输出物化字节”与“映射输出字节”

> ID：13365818
> 
> 赞同：7
> 
> 时间：2012-11-13T17:40:06.390
> 
> 标签：hadoop, mapreduce

在 hadoop 作业计数器中，“映射输出物化字节”与“映射输出字节”有什么区别？当我禁用地图输出压缩时，我没有看到前者，所以我猜它是真正的输出字节（压缩），而后者是未压缩的字节？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T00:41:23.707

我想你是对的。从[http://hadoop.apache.org/docs/r1.0.4/releasenotes.html](http://hadoop.apache.org/docs/r1.0.4/releasenotes.html)：

MAPREDUCE-2365。FileInputFormat (BYTES_READ) 和 FileOutputFormat (BYTES_WRITTEN) 的新计数器。用于压缩 MapOutputSize 的新计数器 MAP_OUTPUT_MATERIALIZED_BYTES。（悉达多赛斯）

（自 Hadoop 0.20.2 以来的变化）

..................................................... ..................................................... ..................................................

这是 Tom White 的“Hadoop Definitive Guide”第 3 版（表 8-2，第 261 页）的引述：

“映射输出物化字节” - 映射输出实际写入磁盘的字节数。如果启用映射输出压缩，这将反映在计数器值中。

“映射输出字节数” - 作业中所有映射产生的未压缩输出的字节数。每次`collect()`在地图的`OutputCollector`.

# c# - 在加载项中的现有弹出窗口上添加命令

> ID：13365819
> 
> 赞同：0
> 
> 时间：2012-11-13T17:40:25.270
> 
> 标签：c#, visual-studio-2010, add-in

过去，我在另一个项目中创建了一个插件。它创建一个弹出窗口“blah”，将两个子项分组，都在解决方案资源管理器下。

我正在创建一个不同的插件，在不同的项目中，我想让它在同一个弹出文件夹下运行。

如何测试命令栏类型 ["Project"] 下名为 "blah" 的弹出窗口是否存在，如果存在，则在现有命令中添加一个命令？（如果没有，添加弹出窗口）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:31:47.740

我没有找到使用弹出字幕的方法。

有两种选择：

*   使用标签
*   使用身份证

无论哪种方式，我都必须修改现有的加载项，给它一个标签（和/或一个 ID），然后

```
myPopup = (CommandBarPopup)proj.FindControl(Type: MsoControlType.msoControlPopup, Tag: "myTag");
if (myPopup == null)
{
  // create it
} 
```

# wpf - Expander 展开时滚动 ScrollViewer

> ID：13365821
> 
> 赞同：4
> 
> 时间：2012-11-13T17:40:53.070
> 
> 标签：wpf, mvvm, scroll, expander

我有一个 WPF MVVM 应用程序，其中 ScrollViewer 包含一个带有多个扩展器的用户控件

```
<UserControl>   
    <Expander>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                ...               
            </Grid.RowDefinitions>

            <Expander Grid.Row="0" />

            <Expander Grid.Row="1" />
            ... 

        </Grid>
    </Expander>
</UserControl> 
```

我怎样才能使扩展扩展器滚动到视图中，使其内容可见？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T19:16:19.693

在用户控件后面的代码中处理`Expanded.Expanded`事件，然后调用“Expander.BringIntoView()”。

注意：对于特定于 VIEW 的事物使用背后的代码没有任何问题，因此这不会破坏 MVVM，IMO。

# sql - 将 SQL 数据库导出到 phpMyAdmin 5.1.65

> ID：13365825
> 
> 赞同：0
> 
> 时间：2012-11-13T17:41:13.037
> 
> 标签：sql, import, phpmyadmin, export

我目前正在尝试按照[本网站](http://www.siteground.com/tutorials/php-mysql/mysql_export.htm)的说明将 SQL 数据库导出到存储在另一台服务器上的数据库。

发生的问题是我正在尝试将来自 phpMyAdmin 2.7.0 的 SQL 数据库导出到 phpMyAdmin 5.1.65。每当我尝试导入它时，我不断收到的错误消息是：

> 您试图加载具有不受支持的压缩（应用程序/zip）的文件。您的配置未实现或禁用对它的支持。

是不是旧数据库不兼容新版本的phpMyAdmin？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T17:50:12.167

phpMyAdmin 不是数据库服务器。它只是一个使用 GUI 访问 MySQL 数据库服务器的工具。导出/导入出错的原因有很多，包括：

*   使用不同版本的 MySQL
*   服务器之间的 MySQL 用户配置差异
*   phpMyAdmin 在旧版本上创建导出脚本的方式存在问题，导致与较新服务器上的 MySQL 不兼容。

我建议您仔细查看您收到的错误消息，作为尝试找出问题的起点。

也许将 phpMyAdmin 完全排除在外，并通过 MySQL 命令行工具（mysql 和 mysqldump）进行 DB 转储/导入，这样您就可以立即获得可能存在问题的反馈。

# asp.net - 如何查看当前ASP会员服务的Hash算法？

> ID：13365827
> 
> 赞同：2
> 
> 时间：2012-11-13T17:41:16.203
> 
> 标签：asp.net, hash, membership

默认情况下，ASP.NET 4 使用 HMACSHA256 算法对 cookie 和视图状态进行哈希运算。有什么简单的方法可以查看当前ASP会员服务的Hash算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:54:33.700

有两个地方（我知道）可以看——

检查您的 web.config - 您可以在那里为您的会员服务设置哈希值，这将覆盖机器设置。

```
<membership hashAlgorithmType="SHA1">...</membership> 
```

如果这不适用于您，那么您可以检查 IIS 中的 machineKey。

[http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-aspnet-configuration-management#TOC301270285](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-aspnet-configuration-management#TOC301270285)

# c# - 在 AppHarbor 上使用 MailGun 发送电子邮件

> ID：13365831
> 
> 赞同：1
> 
> 时间：2012-11-13T17:41:20.323
> 
> 标签：c#, asp.net-mvc-3, appharbor, mailgun

我正在尝试使用 AppHarbor 和 MailGun 插件向我的用户发送一封简单的电子邮件。我还安装了 MailGun NuGet 包，以便从我的 C# 代码更轻松地发送电子邮件。

我收到以下错误：

```
System.InvalidOperationException: Domain not found 
```

这是我正在运行的代码：

```
/* Send welcome email. */
var client = new MailgunClient("foo.apphb.com", "key-1-jpn-190fj8102i3nf12i3fno213f");
client.SendMail(new System.Net.Mail.MailMessage("welcome@foo.apphb.com", "sergiotapia@outlook.com")
{
    Subject = "Hello from mailgun",
    Body = "this is a test message from mailgun."
}); 
```

任何想法为什么会弹出此错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:29:55.423

您可能不应该`foo.apphb.com`在配置 MailGun 客户端时使用。我猜，但您可能应该使用`MAILGUN_SMTP_SERVER`在 AppHarbor 上部署您的应用程序时注入的配置变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T04:30:51.553

当您与您的应用程序集成时，MailGun 会提供一个域名。在此处使用此域名。它应该类似于“abcd.mailgun.org”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:51:05.313

`ping foo.apphb.com`，我没有得到任何回应。

# android - 调试 Android 2.3 浏览器崩溃

> ID：13365834
> 
> 赞同：7
> 
> 时间：2012-11-13T17:41:27.327
> 
> 标签：android, debugging, android-browser

最近，我一直在尝试查找（并希望修复）影响 SB Nation 博客网络的频繁的 Android 2.3 浏览器崩溃。用户将导航到页面，它似乎正在加载，然后大约当您期望 DOM 完成触发时，浏览器似乎强制关闭，您被踢到主屏幕。并非每次页面加载都会发生这种情况，因此如果您打开浏览器并重试，通常会正常加载。

我在我自己的手机、HTC Thunderbolt (2.3.4) 和 Droid Bionic (2.3.4) 上多次重现了这个问题。我没有 Android 开发经验，但我认为连接 adb 调试器可能会让我对这个问题的原因有所了解。以下是我捕获的一些崩溃日志：

*   [HTC 迅雷日志](https://gist.github.com/4066973)
*   [Droid 仿生日志](https://gist.github.com/4066937)

（我会在生产中发布一些导致这些崩溃的 URL，但我已经达到了两个链接的限制。）

您可能会注意到，所有 HTC 日志都不同，而 Bionic 似乎并没有提供太多技术细节。这是我在所有 HTC 日志中发现的唯一共同点：

```
 D/skia    (14225): createPlugin (300,150) screen proportion:(w,h)=(0.813008,0.039288), content ratio:2.000000 mainUrl:http://athleticsnation.local:3000/
 D/skia    (14225): createPlugin F10 typical2 video content (300,150)/(369,3818), url= 
```

我的猜测是 F10 == Flash 10，但 Droid Bionic 甚至没有安装 Flash，所以我不相信这是原因。

无论如何，我对导致这些崩溃的原因一无所知。有没有办法获得有关这些崩溃的更准确信息？无效标记会导致浏览器崩溃吗？JavaScript 限制？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:50:08.960

可能值得查看 allowed_geolocation_origins() 周围的位置权限（和异常处理）：

从 HTC 转储：

> 10：W/ContentService（1646）：binderDied（）在 ObserverNode 名称 allowed_geolocation_origins

# java - 编译器错误：“不是语句”

> ID：13365835
> 
> 赞同：1
> 
> 时间：2012-11-13T17:41:30.317
> 
> 标签：java

这是代码片段：

```
boolean nodesFiltered = false;

filterSet = newNodeSet;
int filterSize;
int i;

for (; predIter.hasNext(); i < filterSize)
{
  eachPred = (Predicate)predIter.next();

  filterSize = filterSet.size();

  i = 0; continue;

  contextNode = filterSet.get(i);

  if (contextNode != null)
  {
    List list = new ArrayList(1);

    list.add(contextNode);

    predContext.setNodeSet(list);

    predContext.setPosition(i + 1);
    predContext.setSize(filterSize);

    predResult = eachPred.evaluate(predContext); 
```

它说`i < filterSize)`编译器说我有一个错误......它说它不是一个声明......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:51:13.800

事实上，这一行是不正确的：

```
for (; predIter.hasNext(); i < filterSize) 
```

在 Java 中~~（以及所有其他 C 语法语言）~~ [`for`语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)具有以下结构：

```
for(initialization; termination; increment) {
  statements...
} 
```

在哪里：

*   `initialization` **语句**被调用一次，当循环开始时

*   `termination`布尔**表达式**在每次迭代之前进行评估。如果它产生`false`，循环终止

*   `increment` **每次迭代后都会调用**语句。****

 **实际上，每个`for`循环都可以表示为`while`循环：

```
initialization;
while(termination) {
  statements;
  increment;
} 
```

正如您在代码片段中看到的，*增量*块是一个布尔表达式（returns `boolean`），而它应该是一个语句（它应该“做”一些事情，比如增加一些变量）。这就是编译器想要表达的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T17:39:59.673

您做错的是在 for 循环中的代码序列是：

```
for(i=0; i<10; i++) {
//Code goes here
} 
```

问题是：

```
//You did *no* initialization, the order was wrong, and no increment. 
for (; predIter.hasNext(); i < filterSize) //wrong
for (i=0; i < filterSize; i++) //Right 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:53:16.987

for 循环的最后一部分应该是一个语句——当控制到达循环底部时将执行它。

请记住，对于 for 循环`for(int i = 0; i < foo; i++)`，控制是这样的：

1.  `int i = 0;`（执行初始化语句）
2.  `i < foo;`（执行条件检查）
3.  如果是，则执行循环体。
4.  `i++`（执行增量步骤）
5.  回到 2。

如您所见，4\. 需要发生一些事情，而不仅仅是获取表达式的值。**

# android - 自定义 listView 中的 TextView 为空

> ID：13365836
> 
> 赞同：0
> 
> 时间：2012-11-13T17:41:35.360
> 
> 标签：android, android-layout, android-listview, textview

我正在使用 Parse.com 服务器，我正在尝试从服务器获取数据并将其放入具有 4 个 TextView 字段的自定义列表中。我很好地收到了数据，但我在列表的第一个位置的适配器中有问题，我在所有 textView 字段上都出现空指针异常。在其他领域没有问题。

这是我正在使用的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_coupon_list);

    init(); 
}

private void init(){
    couponListView = (ListView)findViewById(android.R.id.list);
    couponList = new ArrayList<ParseObject>();
    query = new ParseQuery(COUPON_CLASS_NAME);

    couponListView.setOnItemClickListener(this);

    query.findInBackground(new FindCallback() {             
        @Override
        public void done(List<ParseObject> list, ParseException e) {
            if (e == null) { //objects retrieved well                                                           
                couponList.addAll(list);                                                        
            }
            else {
                toaster("problem find coupons");
            }

            MyAdapter adapter = new MyAdapter(
                    getApplicationContext(), 
                    android.R.layout.simple_list_item_1, 
                    R.id.tv_coupoun_content,
                    couponList);

            setListAdapter(adapter);

        }
    });                     
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_coupon_list, menu);
    return true;
}   

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {}

public class MyAdapter extends ArrayAdapter<ParseObject> {

    public MyAdapter(Context context, int resource, int textViewResourceId, ArrayList<ParseObject> couponList) {
        super(context, resource, textViewResourceId, couponList);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater lf = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row = lf.inflate(R.layout.coupon_row, parent, false);                                     

        tvCouponContent = (TextView)findViewById(R.id.tv_coupoun_content);
        tvBusinessName = (TextView)findViewById(R.id.tv_business_name);
        tvBusinessStreet = (TextView)findViewById(R.id.tv_street);
        tvBusinessCity = (TextView)findViewById(R.id.tv_city);

        //in position 0 the log below is true for all in the rest its false

        Log.d("Shalom","shalom - " + Boolean.toString(tvCouponContent == null)+" "+
                Boolean.toString(tvBusinessName == null)+" "+
                Boolean.toString(tvBusinessStreet == null)+" "+
                Boolean.toString(tvBusinessCity == null)+" "+
                Integer.toString(position));

        /*tvCouponContent.setText(coupons.getString(COUPON_CONTENT));           
        tvBusinessName.setText(coupons.getString(COUPON_BUSINESS_NAME));
        tvBusinessStreet.setText(coupons.getString(COUPON_STREET));
        tvBusinessCity.setText(coupons.getString(COUPON_CITY));*/

        return row;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:50:44.300

您的 Adapter 构造函数错误，请使用以下构造函数：

```
public MyAdapter(Context context, ArrayList<ParseObject> couponList) {
    super(context, R.layout.coupon_row, couponList);
} 
```

实例化它：

```
MyAdapter adapter = new MyAdapter(getApplicationContext(),couponList); 
```

对于将项目充气到列表视图中，您必须使用充气对象：

```
View row = lf.inflate(R.layout.coupon_row, parent, false);

tvCouponContent = (TextView)findViewById(R.id.tv_coupoun_content); //BAD

tvCouponContent = (TextView)row.findViewById(R.id.tv_coupoun_content);//GOOD 
```

您应该使用 View Holder 模式：[http ://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

# java - 如何摆脱膨胀？

> ID：13365838
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:41:37.677
> 
> 标签：java, servlets

嗨，我帮忙，然后我将***myName***参数设为没有扩展名，我尝试使用正则表达式来做到这一点：

```
String myName = request.getParameter("text").replaceFirst("[.][^.]+$", ""); 
```

但我们没有帮助做到这一点）

***myName***参数取的是文件名，我需要在没有帮助的情况下来做 来听解释清楚一点：这里我输入表格（标准 html 表格）的文件名，它可以是什么，无论是 indeks.html 还是 indeks。 tht，myname参数接受我介绍的，但是他接受为indeks.html，我需要未经允许接受，即我在shape中引入indeks.html的例子，我引入的servlet，然后它将打印它，但我需要他没有导出任何 indeks.html，只是索引，我希望现在很清楚，即能够输入表单和 indeks.html 和索引，并且一个 servlet 无论如何都可以找到一个文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:04:28.363

我想我理解你的麻烦。您正在寻找从通过文本参数传递的值（例如：.html、.gif、.jpeg

这应该可以帮助你。（它将值从第一个字符向上剪切到第一个“。”

```
 String myName = request.getParameter("text").substring(0, str.indexOf("."); 
```

请注意，某些字符是特殊的，可能会出现编码。

请参阅此有用的图表： [http ://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)

# postgresql - 如何在 PostgreSQL 中引用 NAMEDATALEN

> ID：13365840
> 
> 赞同：1
> 
> 时间：2012-11-13T17:41:40.277
> 
> 标签：postgresql

我计划使用 PostgreSQL SPI 将 SQL 嵌入到我的 C 代码中，并且我想引用 NAMEDATALEN const，因此我的代码将足够灵活，可以随数据库进行更改。

有没有`#include <>`我可以在我的 C 代码中引用这个常量的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:25:08.430

答案引用自：[完整的 C 类型表](http://www.postgresql.org/docs/9.1/static/xfunc-c.html#XFUNC-C-TYPE-TABLE) *(PostgreSQL v.9.1)*

```
----------------------------------
| SQL Type | C Type | Defined In |
----------------------------------
|   name   |  Name  | postgres.h |
---------------------------------- 
```

看起来我需要做以下事情来实现我的目标......

```
 #include <postgres.h>

 //char my_name[NAMEDATALEN];  // Theoretically, this should also be valid.
 Name my_name; 
```

**编辑：**经过更多的挖掘，我能够证明我的预感是正确的。

* * *

粘贴自[`postgres.h`](http://doxygen.postgresql.org/postgres_8h_source.html)

```
00047 #include "c.h" 
```

粘贴自[`c.h`](http://doxygen.postgresql.org/c_8h_source.html)

```
00443 /*
00444  * Representation of a Name: effectively just a C string, but null-padded to
00445  * exactly NAMEDATALEN bytes.  The use of a struct is historical.
00446  */
00447 typedef struct nameData
00448 {
00449     char        data[NAMEDATALEN];
00450 } NameData;
00451 typedef NameData *Name; 
```

# c# - 如何从 View 和关联的代码隐藏文件中访问我的 ViewModel？

> ID：13365842
> 
> 赞同：1
> 
> 时间：2012-11-13T17:41:48.820
> 
> 标签：c#, asp.net, view, viewmodel

我是 ASP.NET 的真正初学者，在 Visual Studio 2010 中使用 MVC2 + EF4。

我正在尝试使用 MVVM 模式并将我的视图强输入到视图模型中。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master"        AutoEventWireup="True" CodeBehind="~/Views/Options/Index.aspx.cs" Inherits="System.Web.Mvc.ViewPage<OptionsViewModel>" %> 
```

我的 OptionsViewModel 看起来像这样：

```
 public class OptionsViewModel
{
    public List<DeskPreference> DeskPreferences { get; set; }
    public List<DayPreference> DayPreferences { get; set; }
} 
```

在控制器中，我创建了一个新的 OptionsViewModel 并返回 View(myOptionsViewModel);

然后，例如，我想根据 DayPreference 中的内容选中/取消选中某些框。我不知道如何从我的代码隐藏文件中访问模型，如下所示：

```
using System.Web.Mvc;
using DeskRota_v1.ViewModels;

public class OptionsPage : System.Web.Mvc.ViewPage<OptionsViewModel>
{
    protected void Page_Load(object sender, EventArgs e)
    {   
        setCheckBoxes();
    }

    private void setCheckBoxes()
    {           
        foreach (DayPreference dayPreference in Model.DayPreferences)
        {
\\ check boxes here
}
} 
```

它提出“当前上下文中不存在名称'模型'”。另外，如果我尝试做 <% Model. %> 在视图中没有智能感知，我认为应该有。有人可以解释我做错了什么吗？我应该如何访问 ViewModel 及其属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:11:53.463

对于您需要回发的每个视图，您的控制器将为每个操作方法有两个重载：一个带有 HttpGet 签名，一个带有 HttpPost 签名。GET 版本将在第一次加载页面时调用，并将设置初始页面值。

POST 版本将在表单提交时调用，并接受您的视图模型作为参数。MVC 将使用表单中发布的值自动重建它（假设您使用的是相对简单的类型。更复杂的类型是可行的，但更复杂）。

我自己的约定是在 ViewModel 中有一个工作单元，负责持久化或以其他方式处理提交的值。不要把这种东西放在控制器中。

您的视图模型将需要一个无参数构造函数，这是 MVC 在页面提交时重构它时将使用的版本。通常，我在 GET 版本上还使用了第二个构造函数，以便 VM 可以实例化它的初始值。

```
[HttpGet]
public ActionResult Index(int somethingICareAbout)
{
  return View(new IndexViewModel(somethingICareAbout));
}

[HttpPost]
public ActionResult Index(IndexViewModel viewModel)
{
  viewModel.SaveChanges()/DoWork()/Whatever();
  return View(new viewModel());
} 
```

# c# - 过滤 GroupJoin 查询

> ID：13365844
> 
> 赞同：2
> 
> 时间：2012-11-13T17:41:52.373
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, linq-to-entities

我有一个返回如下结果的 GroupJoin 查询：

```
IEnumerable<ICD.ViewModels.HomeSearchViewModel> query = ICDUnitOfWork.AlphaGroups.Find()
    .GroupJoin(ICDUnitOfWork.Alphas.Find(),
        a => a.AlphaGroupID,
        g => g.AlphaGroupID,
        (alphaGroups, alphas) =>
            new ICD.ViewModels.HomeSearchViewModel
            {
                AlphaGroups = alphaGroups,
                Alphas = alphas
            }); 
```

Alphas 是`IEnumerable`，一个 AlphaGroup 包含多个 Alphas。他们都有一个名为“Title”的属性。我需要根据包含字符串“baby”的“Title”属性过滤结果。我怎样才能做到这一点？

编辑：我还应该提到，如果特定的 alpha 组标题包含“婴儿”，则应显示所有具有 AlphaGroupID 的相应 Alpha。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:46:16.497

如果您使用的是 Entity Framework >= 4，则`Contains`可以：

```
.Where(row => 
    row.AlphaGroups.Title.Contains("baby") 
        || row.Alphas.Any(alpha => alpha.Title.Contains("baby"))
 ); 
```

* * *

**编辑**已更新以预过滤分组中的 alpha。最终过滤器排除不包含 alpha 的行（表明*AlphaGroup*标题*和任何*Alpha 都不包含该字符串）。

```
IEnumerable<ICD.ViewModels.HomeSearchViewModel> query = ICDUnitOfWork.AlphaGroups.Find()
    .GroupJoin(ICDUnitOfWork.Alphas.Find(),
        a => a.AlphaGroupID,
        g => g.AlphaGroupID,
        (alphaGroups, alphas) =>
            new ICD.ViewModels.HomeSearchViewModel
            {
                AlphaGroups = alphaGroups,
                Alphas = alphas.Where(alpha 
                    => alphaGroups.Title.Contains("baby")
                        || alpha.Title.Contains("baby"))
            });
    .Where(row => row.Alphas.Any()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:18:00.860

建议反对`.Any()`as can 映射到嵌套联合，而只是过滤预加入

尝试

```
IEnumerable<ICD.ViewModels.HomeSearchViewModel> query = 
     ICDUnitOfWork.AlphaGroups.Find()
                  .Where(g => g.Title.Contains("baby"))
                  .GroupJoin(ICDUnitOfWork.Alphas.Find()
                                          .Where(a => a.Title.Contains("baby"),
                             a => a.AlphaGroupID,
                             g => g.AlphaGroupID,
                             (alphaGroups, alphas) =>
                                new ICD.ViewModels.HomeSearchViewModel
                                 {
                                  AlphaGroups = alphaGroups,
                                  Alphas = alphas
                                 }).AsEnumerable(); 
```

# java - 当某些元素也包含逗号时，如何从逗号分隔的文本中解析元素？

> ID：13365846
> 
> 赞同：1
> 
> 时间：2012-11-13T17:42:03.947
> 
> 标签：java, csv, comma

我有一些用逗号分隔的记录。我需要将文件中的记录分开并将其放入一个数组中。我遇到的问题是文本是逗号分隔的，但某些字段中有逗号，这些不应该是分隔符。

例如，当字段指定地址时，如下例所示：`"2, foo , 403 HAPPY LANE Seattle, WA., etc"`

下面是我正在使用的代码示例：

```
// Start streams....
String str = null;
    List<String> items = null;

    while((str = bufr.readLine()) != null) {
     items = Arrays.asList(str.replace("\"", "").split("\\s*,\\s*"));
     while(true) {
         System.out.println (items); 
```

我知道 csv 和所有这些，但我宁愿不使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:46:50.777

如果您需要忽略的逗号在引号内，那么您可以使用诸如[OpenCSV 之](http://opencsv.sourceforge.net/)类的包。它将忽略引用的昏迷。Apache Commons[在这里](http://commons.apache.org/csv/)也列出了一些其他的。

但是，如果没有引用逗号，则您无法期望计算机知道一个逗号是分隔符而另一个不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:55:18.347

这实际上取决于您的情况，但是我可以想到几种可能的方法来做到这一点。

A）在你的逗号分隔中寻找一个模式。IE。您有一个从中读取值的数据库。您正在查看的表格是包含姓氏、名字和地址的客户表格。如果地址中有一个您不想拆分的额外逗号，您可以编写某种方法来忽略每三个逗号。

B) 将您要分隔值的所有逗号替换为另一个未出现在数据其他位置的特殊字符，并根据该字符而不是逗号拆分数据。

As I said, it's really dependent on your situation, and what data you are reading. Maybe if you provide some more information on the context of your question, you could get a more refined answer.

# python - 我们什么时候需要 Python 导入语句？

> ID：13365848
> 
> 赞同：5
> 
> 时间：2012-11-13T17:42:13.457
> 
> 标签：python, python-import

一段代码有效，我不明白为什么。根据我的理解，它不应该起作用。问题在下面很容易说明：

“主要.py”

```
from x import * #class x is defined
from y import * #class y is defined

xTypeObj = x()
yTypeObj = y()
yTypeObj.func(xTypeObj) 
```

“x.py”

```
class x(object):

    def __init__...
        ...
    def functionThatReturnsAString(self):
        return "blah" 
```

“y.py”

```
#NO IMPORT STATEMENT NEEDED?? WHY

class y(object):
    def __init__...
        ...
    def func(self, objOfTypeX):
        print(objOfTypeX.functionThatReturnsAString()) 
```

我的问题是为什么我不需要在“y.py”类型的导入语句

```
from x import functionThatReturnAString() 
```

它如何确定如何调用此方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T17:49:41.987

Python 是一种面向对象的编程语言。在这样的语言中，值是对象，对象可以有方法。

该`functionThatReturnsAString`函数是一个类的方法，并且`objOfTypeX`是该类的一个*实例*。一个类的实例带有它的类的所有方法。

这就是为什么，例如，`list`python 中的对象有一个`.append()`方法：

```
>>> alist = []
>>> alist.append(1)
>>> alist
[1] 
```

该类`list`有一个`.append()`方法，您无需导入该方法即可调用它。您所需要的只是对列表实例的引用。

[^(从技术上讲，python`list`是一种*type*，但这种区别在这里并不重要。就本次讨论而言，总体而言，类型与类是相同的东西。)]

请务必阅读[Python 教程](http://docs.python.org/2/tutorial/)，它会在后面的章节中解释类（但您可能想先浏览第一组章节）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T17:58:43.847

Python 是一种动态类型语言。与 C++ 和 Java 等静态类型语言不同，对方法的调用在实际执行之前不会被绑定，因此为什么在定义该方法的情况下导入模块是不必要的。这有几个含义：

1.  方法（和数据成员）可以在运行时添加到实例中或从实例中删除，因此类 Foo 的两个实例实际上可以具有不同的方法，即使它们属于同一类型。
2.  方法（和数据成员）可以在运行时添加到类中或从类中删除，这将影响所有当前实例以及新实例。
3.  基类可以在运行时添加和删除到类中。

Note that this is not an exhaustive list of all of the difference between dynamically typed langauges and statically types languages.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:47:25.673

从导入类的位置`yTypeObj.func`调用函数。`main.py`因此，可以构造对象并将其及其所有方法（`functionThatReturnAString`是 的方法`objOfTypeX`）传递给函数。

# objective-c - OSX 的 ASIHTTP 等效项

> ID：13365852
> 
> 赞同：0
> 
> 时间：2012-11-13T17:42:37.443
> 
> 标签：objective-c, macos, cocoa, networking, file-upload

我希望将 xml 文件上传到 1mb 到 50mb 的 php 服务器。据我所知，ASIHTTP 是过去使用的代码，但我正在寻找一个更新的框架来使用。ASIHTTP 网站推荐了 AFNetworking，但我想知道是否还有其他好的我应该研究一下。我对可可编程非常陌生，并且已经开始使用 ARC enable 学习，因此与之兼容的东西也将是理想的。

[https://github.com/AFNetworking/AFNetworking/](https://github.com/AFNetworking/AFNetworking/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:58:51.757

现在AFNetworking是最好的选择。我用过它，它非常好。我推荐它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:29:42.943

如果您正在查看几年前建议您使用第三方库的建议，您可能会考虑再次查看操作系统本身提供的内容。NSURLConnection 仍然不是每个人的最佳解决方案，但它在最近几个 iOS 和 OS X 版本中得到了很大改进。

# listbox - 如何在 mosync 中从 ListBox 中检索标签文本？

> ID：13365854
> 
> 赞同：1
> 
> 时间：2012-11-13T17:42:53.407
> 
> 标签：listbox, mosync

我正在使用 mosync 3.1。我创建了一个列表框并将标签添加为列表框项。我希望能够检索所选标签的文本或名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:49:21.237

您应该实现一个“ItemSelectedListener”类并重写虚拟“itemSelected”方法，如下所示：

virtual void itemSelected (ListBox *sender, Widget *selectedWidget, Widget *unselectedWidget)

然后使用这个 ListBox 方法：

“无效 addItemSelectedListener (ItemSelectedListener *listener)”

当在 ListBox 中选择一个项目时，“itemSelectd”方法已被“选定的小部件”调用。然后你可以得到一个文本：

((标签*)selectedWidget)->getText()

# c# - Activator.CreateInstance 的程序集名称是什么

> ID：13365855
> 
> 赞同：0
> 
> 时间：2012-11-13T17:42:54.347
> 
> 标签：c#, c#-4.0

我想在 C# 中动态加载类。我记得我们在 Java 中使用过`Class.forname("String")`，所以在谷歌搜索后我发现我们可以`Activator.CreateInstance`在 C# 中使用。我无法弄清楚我的程序集名称会在这里。有什么建议么 ？

```
object obj = Activator.CreateInstance("MyAssembly","namespaceA.SomeClassName"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:45:37.947

它只是程序集的名称。这*可能*与命名空间相同，但也可能不同。例如，[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/bb345746.aspx)该类在`System.Core`程序集中 (in `System.Core.dll`)。

如果目标程序集是框架程序集，请查看文档。

如果它在您的控制之下，您应该知道程序集名称 - 它是项目属性的一部分。

# android - AndroidHttpClient 调试请求 URI

> ID：13365859
> 
> 赞同：0
> 
> 时间：2012-11-13T17:43:07.000
> 
> 标签：android

是否可以 Log.d() 使用 HttpGet 时 AndroidHttpClient 创建的实际 URI 字符串？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:40:19.777

当然。使用[AndroidHttpClient.enableCurlLogging(TAG, Log.DEBUG)](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html#enableCurlLogging%28java.lang.String,%20int%29)将记录 URI 字符串和请求内容。

# java - 如何在 Java 中获取鼠标按钮状态？

> ID：13365862
> 
> 赞同：0
> 
> 时间：2012-11-13T17:43:17.493
> 
> 标签：java, api, mouse

需要从简单的 java 应用程序中读取鼠标按钮状态（“按下”或“释放”）。可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:48:56.793

您可以使用[MouseListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)接口，或者它是有用的抽象实现[MouseAdapter](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)：

```
public class MyMouseListener extends MouseAdapter {
    private boolean pressed = false;

    public void mousePressed(MouseEvent e) {
        this.pressed = true;
    }

    public void mouseReleased(MouseEvent e) {
        this.pressed = false;
    }

    public boolean isPressed() {
        return pressed;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:47:05.567

[MouseEvent](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseEvent.html)是您正在寻找的类

# c# - 有没有办法让 System.IO.Directory.GetFiles(string) 在程序目录中查找？

> ID：13365864
> 
> 赞同：2
> 
> 时间：2012-11-13T17:43:22.830
> 
> 标签：c#, asp.net, io, tilde-expansion

我正在尝试使用 `string[] files = System.IO.Directory.GetFiles("~/Pictures/");`在程序中的文件夹中搜索图片文件。这稍后将用于随机选择要在图像框中显示的图片。当它尝试查找 ~/Pictures 时出现错误，因为该方法正在查找 'C:\Program Files (x86)\Common Files\Microsoft Shared \DevServer\10.0\~\图片\'。反而。“~”不是让它在程序目录中查找吗？如果在安装程序之前我不知道它会是什么，如何让它在程序目录中显示？任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:59:31.253

波浪号路径是一个 asp.net 结构，表示当前运行的 asp.net 应用程序的根。它在 asp.net 上下文之外没有任何意义—— Directory.GetFiles 不知道如何使用它。GetFiles*确实*知道如何使用常规文件系统路径。所以问题变成了：我们如何将 asp.net 相对路径转换为 ​​GetFiles 可以使用的路径。答案是[HttpContext.Current.Server.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)。

我现在不在我的网络服务器附近，但是类似

```
var serverPath = HttpContext.Current.Server.MapPath("~/Pictures/");
var files = Directory.GetFiles(serverPath); 
```

应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:47:33.917

我不认为你会发现“~”有任何意义。

尝试 Application.StartupPath

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:47:08.600

提供一个相对目录，比如“图片”，而不是“~/Pictures/”，应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:48:07.567

只需使用`System.IO.Directory.GetFiles('Pictures')`. Windows 上的路径分隔符是`\`, not `/`，并且当前目录下的目录仅作为相对路径位置引用。

# geolocation - 在 WP8 中使用 PhotoCaptureDevice 进行地理标记

> ID：13365865
> 
> 赞同：0
> 
> 时间：2012-11-13T17:43:24.117
> 
> 标签：geolocation, gps, photo, exif, windows-phone-8

我查看了 Windows Phone 8 中新的“PhotoCaptureDevice”和相关类，但找不到将位置数据添加到捕获图像（GPS 位置）的方法。有没有办法在 Windows Phone 8 中添加此类信息？还是只有内置摄像头才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:23:07.330

解决方案是在将图像流（内存流）发送到媒体库之前，手动写入 EXIF 位置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T06:26:24.260

`Extensions.SaveJpeg()`如果启用，则自动保存`Exif geolocation`数据。 我还没有尝试过新课程，但很可能它们的行为方式相同。`ID_CAP_LOCATION`
`WP8`

# iphone - 在 iPhone 上加载到画布上的图像是否有最大尺寸？

> ID：13365870
> 
> 赞同：1
> 
> 时间：2012-11-13T17:43:46.760
> 
> 标签：iphone, image, canvas, image-size

我正在构建一个具有滚动背景的 webapp 游戏。背景只是一个非常高的图像，它被复制到较小`canvas`的切片中，以提供运动的感觉。我开始使用的图像文件高 6000 像素（我的画布高 640 像素）。所有桌面浏览器和 iPad2 (iOS 6) 都可以正常加载图像文件，动画看起来很棒。

但是，在 iPhone 4S (iOS 5) 上 - 根本不会加载背景！我解决了这个问题，只是将大背景图像剪下来直到它低于 2000 像素高，然后 iPhone 终于将图形加载到画布上，一切都很好。

所以我的问题是——javascript`canvas.context`可以处理的最大文件大小是多少？也许只是在某些设备上？

我尝试了各种其他解决方法以确保在 JS 代码在画布上运行之前完全加载文件，但无济于事。

# python - 如何说服 python tox 只为可用的 python 解释器运行测试？

> ID：13365876
> 
> 赞同：12
> 
> 时间：2012-11-13T17:44:17.240
> 
> 标签：python, tox

我正在使用 python [tox](http://pypi.python.org/pypi/tox)为多个版本的 python 运行 python unittest，但是这些 python 解释器并非在我运行 tox 的所有机器或平台上都可用。

如何配置 tox 使其仅在 python 解释器可用时运行测试。

示例`tox.ini`：

```
[tox]
envlist=py25,py27

[testenv]
...
[testenv:py25]
... 
```

最大的问题是我确实想要一个自动检测的 python 环境列表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-07T23:15:25.733

从 Tox 版本 1.7.2 开始，您可以传递`--skip-missing-interpreters`标志来实现此行为。你也可以`skip_missing_interpreters=true`在你的`tox.ini`文件中设置。更多信息[在这里](http://tox.readthedocs.org/en/latest/config.html#confval-skip_missing_interpreters=BOOL)。

```
[tox]
envlist =
    py24, py25, py26, py27, py30, py31, py32, py33, py34, jython, pypy, pypy3
skip_missing_interpreters =
    true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-02T06:15:57.840

首先，如果您没有毒物：`pip install tox`。

使用这个命令 : `tox --skip-missing-interpreters`，它会跳过本地不可用的编译器，只为可用的 python 版本运行

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-14T09:42:16.133

如果找不到解释器，tox 将显示错误。如果应该有一个“SKIPPED”状态并使 tox 返回一个“0”成功结果，那么问题就来了。这可能应该通过命令行选项显式启用。如果您同意，请在[http://bitbucket.org/hpk42/tox](http://bitbucket.org/hpk42/tox)提出问题。

# c++ - 为什么我会收到这个错误？

> ID：13365877
> 
> 赞同：2
> 
> 时间：2012-11-13T17:44:21.740
> 
> 标签：c++, function

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T17:48:52.853

在`print()`您尝试复制`ifstream`对象时，这是不可能的。改用`ifstream&`：

```
void print(ifstream &A_bank, ifstream &B_bank, float mean, float mean1, string n1, string n2); 
```

根据[std::basic_ifstream::basic_ifstream](http://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream)移动可以使用 C++11。

# php - PHP - 使用 == （等于）和 === （相同）的意外行为

> ID：13365878
> 
> 赞同：2
> 
> 时间：2012-11-13T17:44:25.113
> 
> 标签：php

我的代码中有以下内容：

```
$mixed = array();
$mixed[0] = "It's a zero!";
$mixed['word'] = "It's a word!";   

foreach ($mixed as $key => $value) {
  if ($key == 'word') {             
    echo $value.'<br />';
  } 
} 
```

出于某种原因，上面会打印两个“它是零！” 和“这是一个词！”。我期待它只打印“It's a word!”。这是为什么？？我觉得我错过了一些重要的东西。当我`===`在 if 语句中使用时，它按预期工作，换句话说，它只打印“It's a word!”。我知道相等运算符和相同运算符之间存在差异，但是第一个示例不相等是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T17:46:20.783

`==`在比较之前为您进行类型转换。

当你`==`用一个整数做 an 时`0`，它会转换`'word'`成适当的**整数值**。

**[`intval()`](http://php.net/manual/en/function.intval.php)**当提供纯字符串时返回**0 ，因此 0 匹配。**另一个在字符串上下文中匹配，并且也匹配。

* * *

`===`没有**这样的隐式转换**，所以它只在一种情况下返回 true，即字符串实际上是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:45:26.367

PHP 变量有类型。

`==`转换为相同类型后检查相等性，`===`还检查类型。用于`var_dump`查看真正的类型是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:58:21.833

请参阅上面@Cthulhu 的答案，这很清楚。

除此之外，这是一个不同的例子。 [strpos()](http://php.net/manual/en/function.strpos.php)函数返回`needle`from的位置`haystack`。

```
<?php
 $pos_a = strpos('apple', 'a'); // a is in the first position.
 $pos_b = strpos('apple', 'b'); // there is no b.
 if ($pos_a){
    echo 'we got a!'."\n";
 }
 if  ($pos_b){
    echo 'we got b!'."\n";
 } 
```

`strpos``FALSE`如果找不到针，则返回。但是你会看到 php 没有运行任何 echo 语句。

如果您`var_dumo()`d 这 2 个值，您将看到`$pos_a`并`$pos_b`包含`0`and `FALSE`。

`if`语句刚刚失败，因为除非您使用 === 否则`0`两者`FALSE`都被考虑`FALSE`

现在试试这个：

```
 <?php
 $pos_a = strpos('apple', 'a'); // a is in the first position.
 $pos_b = strpos('apple', 'b'); // there is no b.
 if ($pos_a !== FALSE){
    echo 'we got a!'."\n";
 }
 if  ($pos_b !== FALSE){
    echo 'we got b!'."\n";
 } 
```

现在您将看到所需的结果，因为它回显“我们得到了！”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:52:00.943

$a == $b 等于 TRUE 如果在类型杂耍之后 $a 等于 $b。$a === $b 如果 $a 等于 $b 并且它们属于同一类型，则相同 TRUE。

看起来

如果您使用 == 检查字符串 0，则 PHP 返回 true：

php -r 'var_dump(0 == "statuses");' -> 返回 TRUE

但如果您的字符串开头有一个数字，则不是：

php -r 'var_dump(0 == "2statuses");' -> 返回 FALSE

从规范中我得到它尝试转换 - 在这种情况下是字符串到数字。

所以更好用===

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# php - 数据库迁移期间出现 UTF-8 编码错误

> ID：13365880
> 
> 赞同：0
> 
> 时间：2012-11-13T17:44:39.713
> 
> 标签：php, sql, postgresql, utf-8

我不断收到愚蠢的`invalid byte sequence for encoding "UTF8": 0x96`错误或任何错误。现在我已经确定它是我的服务器空间的问题。

问题是我从一个非常相似的数据库迁移而来，它也是 UTF-8。我在第一个数据库上测试了我的 PHP 脚本，它们可以工作，但在我要求的数据库上它们不能。这一定是编码的问题，但我不确定是什么。

我的 PHP 查询在新数据库上失败并产生该错误。

PHP：

```
$name = $_POST["name"];
$type = $_POST["type"];
$contact = $_POST["contact"];
$address = $_POST["address"];
$postcode = $_POST["postcode"];
$phone = $_POST["phone"];
$description = $_POST["description"];
$location = $_POST["location"];

$conn = pg_connect(/*DATABASE CONNECTION DETAILS*/);

$res = pg_query("INSERT INTO address (organisation_type, contact_name, address, postcode, phone_number, description, location_to_town, organisation_name) VALUES ('$type', '$contact', '$address', '$postcode', '$phone', '$description', '$location', '$name')");

 pg_close($conn); 
```

我的意思是这是一个简单的 PHP 写入数据库函数，唯一奇怪的是一个 UTF-8 数据库工作而另一个不工作。有什么方法可以在命令行比较服务器/更改我的 PostGreSQL 服务器的配置？

感谢任何信息将不胜感激。把我的头发扯掉了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:24:12.423

错误消息名称为 0x96，它看起来不像 UTF-8，而是一些 8 位字符集中的破折号。通过在 HTML 中设置正确的元标头，确保您发布的是 UTF-8：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

或者在 PHP 端发送带有内容类型 HTTP 标头的字符集：

```
header('Content-Type: text/html; charset=utf-8'); 
```

# html - HTML5 适用于 Google Chrome，但不适用于 Mozilla Firefox 或 Internet Explorer

> ID：13365882
> 
> 赞同：1
> 
> 时间：2012-11-13T17:45:01.927
> 
> 标签：html, internet-explorer, firefox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:47:30.687

> 我正在使用所有 HTML5 代码构建一个网站，它在 Chrome 中打开得很好，但在 IE 或 Firefox 中没有呈现，只是纯文本。

您可能想检查 CSS 是否正确加载。

你是直接从文件系统打开吗？如果是这样，在 IE 中你可以按 F12 打开内置的开发者工具来检查样式是否正在加载。在 Firefox 中使用 Firebug 插件来检查相同的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:55:18.477

HTML 5 和 CSS3 实现在浏览器之间有所不同，并且不完全支持 IE 和 Firefox 中的标准。对于您的用户群来说，Chromeframe 可能是一个简单的解决方法，因为 webkit 的标准实现是您目前可以获得的最好的：[http](http://www.google.com/chromeframe) ://www.google.com/chromeframe 。另外，这里有一个漂亮的浏览器比较图：[http ://html5readiness.com/](http://html5readiness.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:57:34.427

您是否在 CSS 中进行了重置，重置允许您控制网站的每个部分。如您的特定要求的格式。重置您的 CSS 不仅可以让您为网站创建样式，还可以用于在任何/大多数浏览器上创建起点。即通过重置。重置示例如下：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
  margin: 0;
  padding: 0;
  border: 0;
  outline: 0;
  font-weight: inherit;
  font-style: inherit;
  font-size: 100%;
  font-family: inherit;
  vertical-align: baseline;
} 
```

有很多资源可以涵盖 IE 和所有其他浏览器的许多错误。您需要尝试通过重置您的 CSS 来减少它们。

以下是一些有用资源的链接：

[MEYER WEB IE 重置 CSS](http://meyerweb.com/eric/tools/css/reset/)

[终极 IE 错误 - VIRTUOSI](http://www.virtuosimedia.com/dev/css/ultimate-ie6-cheatsheet-how-to-fix-25-internet-explorer-6-bugs)

[六次修订 - CSS 重置](http://sixrevisions.com/css/a-comprehensive-guide-to-css-resets/)

我希望这有帮助。祝你好运。

# django - Django 单元测试在项目范围内失败，但在应用范围内通过

> ID：13365896
> 
> 赞同：1
> 
> 时间：2012-11-13T17:45:34.190
> 
> 标签：django, unit-testing, python-unittest, django-unittest

我在 Ubuntu 12.10 上使用 Django 1.4 和 Python 2.7。

我有一个包含多个应用程序和数十个单元测试的项目。我们最近在使用`@override_settings`装饰器时遇到了一个小问题。

这是一些代码：

```
@override_settings(MEDIA_URL='/test/media/')
    def test_get_content_dict(self):
        self.assertEqual(
                self.offer.get_content_dict(),
                { 'some stuff': some stuff } 
```

当测试在应用程序级别运行时，一切都会通过。

```
python manage.py test my_app --settings=proton.settings.test 
```

但是当我们在项目级别运行时，它会失败。

```
python manage.py test --settings=proton.settings.test 
```

由于`some stuff`使用`/test/media`但模型方法`offer.get_contect_dict()`使用失败`/media`，这是我们的实际`MEDIA_URL`。

`MEDIA_URL`我们可以更改`settings/test.py`文件中的 ，但这需要使用所有测试`/test/media`（无论如何这可能是个好主意）。

显然问题出在 Django 中`core.files.storage.FileSystemStorage.__init__()`——它`base_url`在测试套件中设置了较早的对象，但在每次测试后不会重新实例化对象（出于明显的原因），因此`@override_settings`实际上并没有做任何事情。

这是一个错误还是按预期工作？除了通过在to中`/test/media`设置`MEDIA_URL`常量来强制使用所有单元测试之外，还有什么优雅的解决方案建议吗？`settings/test.py``/test/media`

# c++ - 从对象外部操作链表

> ID：13365898
> 
> 赞同：1
> 
> 时间：2012-11-13T17:45:37.743
> 
> 标签：c++

我想从对象外部操作链接列表，但它不像我想的那样工作。

情况是这样的：我有一个对象，它有一个基类的指针，指向第一个条目，以标记链表的开头。

```
class theObject {
public:
    theObject() : mFirstEntry(0), mLastEntry(0) {}
    ~theObject() {}

    template<class T>
    void addEntry(const std::string &blah, const std::string &blub, const T &hui)
    {
        child<T> *newEntry = new child<T>(blah, blub, hui);

        if (mFirstEntry) {
            mLastEntry->setNext(newEntry);
            mLastEntry = newEntry;
        }
        else {
            mFirstEntry = newEntry;
            mLastEntry = newEntry;
        }
    }

    base * getFirstEntry() const
    {
        return mFirstEntry;
    }

    void printEntrys() const
    {
        base *data = mFirstEntry;
        while(data) {
            std::cout << data->getBlah() << data->getBlub() << std::endl;
            data = data->getNext();
        }
    }

private:
    base *mFirstEntry;
    base *mLastEntry;
};

class base {
public:
    base() : mBlah(""), mBlub(""), mNext(0) {}

    base(const std::string &blah, const std::string &blub) : mBlah(blah), mBlub(blub), mNext(0) {}

    virtual ~base()
    {
        if (mNext) {
            delete mNext;
        }
    }

    void setNext(base *next)
    {
        mNext = next;
    }

    base * getNext() const
    {
        return mNext;
    }

    std::string getBlah() const
    {
        return mBlah;
    }

    std::string getBlub() const
    {
        return mBlub;
    }

protected:
    std::string mBlah;
    std::string mBlub;
    base *mNext;
}; 
```

链表的每个条目都是子类型，它是一个模板并继承了基类。

```
template<class T>
class child : public base {
public:
    inline child(const std::string &blah, const std::string &blub, const T &hui, base *next = 0) : mHui(hui), base(blah, blub)
    {
        if(next) {
            mNext = next;
        }
    }

    inline child(const child &r)
    {
        *this = r;
    }

    inline const child & operator = (const child &r)
    {
        if (this == &r) return *this;

        mBlah = r.mBlah;
        mBlub = r.mBlub;
        mNext = r.mNext;
        mHui = r.mHui;

        return *this;
    }

    inline const T getData() const
    {
        return mHui;
    }

protected:
    T mHui;
}; 
```

现在我用几个条目填充对象

```
int main(int argc, char* argv[])
{
    theObject data;
    int a(0), b(1), c(2), d(3);
    const std::string blah("blah"), blub("blub");
    data.addEntry(blah, blub, a);
    data.addEntry(blah, blub, b);
    data.addEntry(blah, blub, c);
    data.addEntry(blah, blub, d);

    std::cout << "Original entries" << std::endl;
    data.printEntrys(); 
```

然后我想maipulate链表

```
 base *stuff = data.getFirstEntry();
    std::cout << "Changed in stuff list" << std::endl;
    while(stuff) {
        stuff = new child<double>("noBlah", "noBlub", 3.14, stuff->getNext());
        std::cout << stuff->getBlah() << stuff->getBlub() << std::endl;
        stuff = stuff->getNext();
    } 
```

并希望操纵原件……但它接缝我只操纵了一个副本

```
 std::cout << "linked list in data object should now be stuff list" << std::endl;
    data.printEntrys();

    return 0;
} 
```

有没有人知道为什么它不工作？getFirstEntry() 返回一个指针，所以我想我会操纵它指向的对象。

最好的问候，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:55:10.500

您通过 获得指向第一个元素的指针`base *stuff = data.getFirstEntry();`，然后将其指向新对象而不是`stuff = new child<double>("noBlah", "noBlub", 3.14, stuff->getNext());`. 换句话说，您更改的是指针，而不是指向的值。

我建议您查看有关指针的教程。曾经有人推荐过这个视频：[Binky Pointer Fun](http://cslibrary.stanford.edu/104/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:59:22.617

好的，感谢 ntor，我能够解决这个问题。

这是代码示例（开头的代码仍然有效）

```
template<class T>
child<T> * getnewEntry(const std::string &a, const std::string &b, const T &c, base *next)
{
    child<T> *nc= new child<T>(a, b, c, next);
    return nc;
}

int main(int argc, char* argv[])
{
    theObject data;
    int a(0), b(1), c(2), d(3);
    const std::string blah("blah"), blub("blub");
    data.addEntry(blah, blub, a);
    data.addEntry(blah, blub, b);
    data.addEntry(blah, blub, c);
    data.addEntry(blah, blub, d);

    base *stuff = data.getFirstEntry();
    stuff = getnewEntry("noBlah", "noBlub", 3.14, stuff->getNext());
    data.mFirstEntry->setNext(0);
    delete data.mFirstEntry;
    data.mFirstEntry = stuff;

    while (stuff->getNext()) {
        base *tmpstuff = getnewEntry("noBlah", "noBlub", 3.14, stuff->getNext()->getNext());
        stuff->getNext()->setNext(0);
        delete stuff->getNext();
        stuff->setNext(tmpstuff);
        stuff = tmpstuff;
    }

    data.mLastEntry = stuff;

    return 0;
} 
```

这现在正在更改链表位置的对象并更新链表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:59:35.807

您返回一个指针并更改**本地**指针，而不更改指针指向的值！你应该做：

```
*stuff = child<double>("noBlah", "noBlub", 3.14, stuff->getNext()); 
```

通过这种方式，您实际上会更改指针指向的对象。

LG ntor

# php - 正则表达式以确保安全输入。没有脚本注入html等？

> ID：13365902
> 
> 赞同：0
> 
> 时间：2012-11-13T17:45:49.587
> 
> 标签：php, regex, validation

我正在寻找一个正则表达式来确保在我用 PHP 制作的留言簿中我不想要的东西中没有任何东西。例如，脚本、sqlinjections、html 等。但我仍然希望用户能够使用尽可能多的字符（例如 :)(/?!.,"&-_) 而不会降低网站的安全性。

关于该正则表达式的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:49:55.223

```
htmlspecialchars($output) 
```

请注意，这`htmlspecialchars`有助于防止 XSS，而不是 SQL 注入。要防止 SQL 注入，请使用准备好的语句。为了防止 CRSF，你可以做一些研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:57:53.140

将 PDO 或 MySQLI 与准备好的和绑定的语句一起使用。如果你做对了，你就不需要担心 Regex - 除非你真的想过度杀戮安全;）

# c# - COM 对象是动态的还是静态的

> ID：13365904
> 
> 赞同：1
> 
> 时间：2012-11-13T17:46:02.277
> 
> 标签：c#, .net-4.0, com

我正在尝试做一种代理，我想知道 COM 方法和属性是静态的还是动态的。换句话说，.NET 是否调用 com 对象并告诉它要执行哪个方法，然后让 com 对象假装它已经执行了它（DynamicObject 允许您在 .NET 中执行的方式，只需为 TryInvokeMember 返回 true 而不执行任何操作)，还是 .NET 实际上会直接调用 COM 方法（静态）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:05:55.677

听起来您在问*早期绑定*（静态）和*后期绑定*（动态）之间的区别。C# 支持两者。

[早期绑定要求您使用TlbImp.exe](http://msdn.microsoft.com/en-us/library/tt0cf3sx.aspx)之类的工具创建一个 Interop 程序集，以生成 COM 对象的代理，该代理直接调用接口方法。

要使用后期绑定，您可以使用反射（混乱）或`dynamic`关键字在运行时绑定方法调用。

但是，COM 对象不会“假装”它执行了您要求的方法——如果该方法不存在，您将得到一个运行时异常。

# yii - 在保存到 Yii 之前使用模型规则进行验证

> ID：13365905
> 
> 赞同：0
> 
> 时间：2012-11-13T17:46:04.320
> 
> 标签：yii

我正在构建一个 CSV 导入，并希望在实际执行导入之前运行 CSV 并向用户显示任何潜在错误。

$model->getErrors() 仅在尝试 $model->save() 后才有效，我希望在保存之前获取这些潜在错误，以便导入器可以调整他的 CSV 文件并进行必要的更改以实现完美导入.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:53:04.070

$模型->验证（）；$model->getErrors();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:55:28.130

首先，你为什么不试试我写的这个工具：[http ://www.yiiframework.com/wiki/401/simple-csv-export/](http://www.yiiframework.com/wiki/401/simple-csv-export/)

# behat - 我可以让 Behat/ZombieJS/Mink 模拟单击 “非链接”元素以触发 JS 侦听器吗？

> ID：13365910
> 
> 赞同：6
> 
> 时间：2012-11-13T17:46:20.253
> 
> 标签：behat, zombie.js, mink

我正在使用[Behat](http://mink.behat.org/index.html)进行测试，使用[ZombieJS](http://zombie.labnotes.org/)驱动程序，到目前为止一切都运行良好，但是有一件事情让我感到困扰，我似乎无法弄清楚如何让 Behat 模拟点击非链接元素。我猜这是因为 Mink 是一个“跨浏览器”驱动程序，点击非链接元素并没有什么意义。不过，对于我的用例，我需要它，因为页面上有几个元素附加了 javascript 事件侦听器，我想测试这些功能。

我尝试使用

```
Then I follow "div.sa" 
```

但它失败并出现预期的错误：

```
01\. Link with id|title|alt|text "div.sa" not found. 
```

因为它不是链接元素。Behat 中也有类似的步骤：

我按“button.class”

但这仅适用于按钮。

有没有办法让 Behat 点击不是标签的元素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-20T15:22:19.910

通过一些错误处理：

```
/** Click on the element with the provided xpath query
 *
 * @When /^(?:|I )click on the element "([^"]*)"$/
 */
public function iClickOnTheElement($locator)
{
    $session = $this->getSession(); // get the mink session
    $element = $session->getPage()->find('css', $locator); // runs the actual query and returns the element

    // errors must not pass silently
    if (null === $element) {
        throw new \InvalidArgumentException(sprintf('Could not evaluate CSS selector: "%s"', $locator));
    }

    // ok, let's click on it
    $element->click();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T23:58:40.410

是的，我相信是这样，但是您需要编写一个自定义步骤，类似于这些内容（如果您使用的是`MinkContext`.

```
/**
 * @When /^I click the something$/
 */
public function iClickTheSomething() 
{
    $something = $this->getSession()
                      ->getPage()
                      ->find("css", "div.sa")
                      ->click();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T11:19:46.900

这是我对 Comstar 答案的改编。实现了相同的功能，但是，这样做对我来说似乎更简单。

```
/**
 * @Then /^I click on "([^"]*)"$/
 */
public function iClickOn($arg1)
{
    $page = $this->getSession()->getPage();

    $findName = $page->find("css", $arg1);
     if (!$findName){
        throw new Exception($arg1." could not be found");
    }
    else {
        $findName->click();
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T11:58:26.237

当我执行点击事件时，使当前 URL 等于 javascript：

```
$this->iClickOnTheElementWithXPath(‘//div[@class="'.$arg2.'"]/div/div[@class="edit"]/a[text()="'.$arg1.'"]‘); 
```

在页面html中：

```
<a onclick="editForm('Avatar')" href="javascript:;">Modifier</a> 
```

# javascript - Javascript：变量范围

> ID：13365911
> 
> 赞同：0
> 
> 时间：2012-11-13T17:46:22.807
> 
> 标签：javascript, scope

我是 JavaScript 的初学者。
有人能解释一下为什么这行不通吗？以及如何让它发挥作用？

```
function getResults(keywords) {

        foo.foo = function() {
               var bar = foo.getSomeText; // Contain "blabla"
        };

        return bar;

    }

    // Globale scope

    alert(bar); // Do nothing 
```

编辑（抱歉信息不足）：

那是因为我想从 xhr 请求中返回一些文本，并且我必须使用一个函数来使用 onreadystatechange 事件。这是原始代码：

```
function getResults(keywords) {
     // Effectue une requête et récupère les résultats

    var xhr = new XMLHttpRequest();
    xhr.open('GET', './autoc.php?s='+ encodeURIComponent(keywords));

    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
           var response = xhr.responseText;
          var test = response.split('|');

        }

    };

    xhr.send(null);

    return test;

}

var hum = getResults('test');
console.log(hum); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:50:35.370

javascript中变量的范围很简单。它是：

*   声明它的函数
*   全局范围（`window`在浏览器中），如果它没有在函数中声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:48:49.377

```
foo.foo = function() {
    var bar = foo.getSomeText; // Contain "blabla"
};
return bar; 
```

`foo`忽略似乎没有被声明的事实，`bar`是在函数内部声明的，因此它只存在于那里，因为 JavaScript 具有函数范围。您无法在该功能范围之外访问它，因此您无法`return`在此处尝试访问它。

仅`return bar`当它在该函数之外声明时才可以：

```
var bar = foo.getSomeText; // Contain "blabla"
foo.foo = function() {

};
return bar; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T17:51:24.353

这应该工作

```
var bar;
var foo = {getSomeText : 'blabla'};

function getResults(keywords) {

    foo.foo = (function() {
        return bar = foo.getSomeText; // Contain "blabla"
    })();

    return bar;

}

// Globale scope
bar = getResults('hi');

alert(bar); // Do nothing​​​​​​​​​​​​​​​​​​ 
```

**[小提琴](http://jsfiddle.net/sushanth009/EZtBP/)**

*   由于未定义 bar 语法错误，您的初始代码将无法工作。
*   foo 在这里是一个对象，甚至没有定义。所以你需要创建对象。
*   `getResults`如果您显式执行函数并需要将其分配给全局范围内的变量 bar，则返回可以在函数内部重新定义的 bar。

**更新**

AJAX 是异步的，您正试图从回调函数中设置的函数返回值。因为请求是异步的，所以该函数在到达回调函数时已经返回。所以在第二种情况下测试总是未定义的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T17:54:33.987

任何变量的范围都取决于它的声明位置。如果您直接在脚本标签中声明它，而不是在脚本标签块中的方法中，它将是一个全局变量。

不过，尚不清楚您要在代码示例中做什么，因为在“foo.foo”中，第一个“foo”是未定义的实体。你可以试试这个：

```
<script type="text/javascript">
var foo = {}// creating empty global object named 'foo'

foo.foo = function()//defining method foo() on object foo
{
    var bar = "some random text";

//// more coding here

return bar;

}

var myBar = foo.foo();// get text from method. Note that the method call should be post method definition
alert(myBar);
</script> 
```

Javascript 既简单又有趣。我建议阅读一些介绍性文本并查看代码示例以理解它。

# c - 为什么 C 程序第一次运行时，它的运行速度要慢 10 倍

> ID：13365914
> 
> 赞同：3
> 
> 时间：2012-11-13T17:46:31.037
> 
> 标签：c

我使用排序的 C 程序第一次运行速度比其他时间慢 10 倍。它使用整数文件进行排序，即使我更改数字，程序仍然运行得更快。当我重新启动 PC 时，第一次程序运行速度慢了 10 倍。我`time`用来计算时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T17:49:33.693

即使不再需要，操作系统也会将数据保存在 RAM 中（这称为“缓存”），因此当程序再次运行时，它会从那里获取所有数据并且没有磁盘 I/O。即使您更改数据，该更改首先发生在 RAM 中，并且即使在写入文件后它也会保留在那里。

请注意，它不会永远留在 RAM 中。如果其他东西需要内存，则删除缓存。此时，需要访问磁盘（并且此时它再次缓存在 RAM 中。）

这就是为什么重启后第一次访问总是很慢的原因；由于从未从文件中读取数据，因此尚未缓存数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T04:33:53.513

你必须做出假设并将它们面对现实。您可以合理地做出的第一件事是，它确实闻起来很像缓存问题！

问自己这些问题：

*   我的数据是否适合空闲 RAM（= 我的文件是否被 OS FS 缓存缓存？）
*   我的数据是否适合 CPU 数据缓存？
*   我的数据是否适合 HDD 内部缓存？

    1.  最容易丢弃的假设是 FS 缓存。在 linux 下，只需`sync; echo 3 > /proc/sys/vm/drop_caches`在每次调用程序之间发出。第一个将确保缓存的数据将进入物理介质（硬盘驱动器），第二个将从内存中删除文件系统缓存的内容。

    2.  “物理介质”可能是 HDD 缓存本身，所以要小心......在 linux 下，您可以使用命令禁用此“回写”缓存`hdparm -W 0 <device>`，例如，如果您正在使用驱动器`sda`，`hdparm -W 0 /dev/sda`则可以完成这项工作。您可能希望在完成测试后重新启用它:)

    3.  另一个假设是 CPU 缓存，看看[How can I do a CPU cache flush in x86 Windows?](https://stackoverflow.com/questions/1756825/cpu-cache-flush) 以及[如何清除 CPU L1 和 L2 缓存](https://stackoverflow.com/questions/3446138/how-to-clear-cpu-l1-and-l2-cache)

好吧，它可能是也可能不是其中之一，但尝试并没有什么坏处:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:40:53.970

*如果*您的程序进行网络访问，那么这可能是初始延迟的原因。许多网络协议需要时间来设置。一些例子：

*   DNS：如果您的程序进行*任何*网络访问，它可能需要将主机名解析为 IP 地址。第一次它至少需要一次网络往返来填充本地缓存。以下请求会更短。
*   网络文件系统（NFS、CIFS 和其他）：可以通过网络打开文件。
*   甚至一些看似无害的库函数也可能需要网络访问：主机的用户列表可以位于远程目录服务器上。

从此，您可以使用一些低级跟踪工具来查看时间花在了哪里。在 linux 上，一个基本工具是`strace -r`. 其他系统可能有一些类似的工具。您的编译器还必须附带一个分析器（即`gprof`用于 GCC 或可能是 Valgrind）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-18T08:01:26.987

我有一个非常相似的问题，但我没有加载一个大文件 - 所以我在第一次执行时间很长时感到困惑（缓存不可能是问题）。

这个[答案](https://stackoverflow.com/questions/24894776/first-execution-after-compiling-incredibly-slow-unless-its-obvious-that-all)为我指明了正确的方向——这是我的实时防病毒保护。每次我重新编译程序时，它都会重新扫描它，认为它可能是恶意的。我将我的项目路径作为“例外”添加到 Avira（就我而言）实时病毒防护。

第一次执行时的程序执行速度现在变快了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T14:15:27.733

这是因为编译器优化，它的作用是缓存结果`Temoparal Locality`并保存激活记录，也节省时间，因为在链接阶段不必再次重新加载绑定对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T04:47:42.190

这不是什么新鲜事，不仅仅是你的程序很多流行的商业软件都面临这个问题。

首先查看这篇[关于慢速执行的 MATLAB 文章](http://www.mathworks.in/support/solutions/en/data/1-A03NII/index.html?solution=1-A03NII)

对于在 C# 或 Java 等虚拟机上运行的其他编程语言，这很常见。 [http://en.wikipedia.org/wiki/Just-in-time_compilation#Startup_delay_and_optimizations](http://en.wikipedia.org/wiki/Just-in-time_compilation#Startup_delay_and_optimizations)

缓存是在 C 中发生这种情况的一个很好的理由，但 10 倍仍然是相当长的持续时间。重新启动后，您的系统也可能正在加载其他资源。

您应该在重启后 10 分钟后运行该程序以获得更好的结果。届时将加载所有启动应用程序。（10分钟----取决于启动应用程序的数量和启动每个应用程序所需的时间）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T13:46:51.797

测量的时间有两个组成部分

如果您正在从磁盘读取文件，并将其加载到内存中 - 并排序：

1）读取文件并将其存储在数组中的时间 2）排序时间

这些是分开测量的吗？

你能看看这个吗？ [使 Linux 缓冲区缓存失效](http://aplawrence.com/Linux/buffer_cache.html)

如果重复清除缓存的实验得到相同的结果，而不是重新启动，那么您可以推断文件缓冲区缓存效果没有被考虑在内。

# ajax - 如何将 fancybox 应用于动态异步内容

> ID：13365916
> 
> 赞同：0
> 
> 时间：2012-11-13T17:46:33.903
> 
> 标签：ajax, fancybox

我的网站上有一个日历，它使用 ajax 在不同的月份和年份之间切换。日历显示相应日期的事件标题，当用户将鼠标悬停在标题上时，应弹出一个灯箱，提供更多信息。

我已经完成了这一切，直到用户使用我提供的按钮更改月份或年份。在那之后，fancybox 似乎没有应用于新元素。

我知道这是因为元素是在最初的 fancybox 定义之后添加到 dom 的，并且已经使用类似于以下的代码来处理它：

```
 $('.date').live('focusin', function() {
    var $this = $(this);
    if(!$this.is(':data(datepicker)')) {
        $this.datepicker();
    }
}); 
```

这与 jQuery UI 的 datepicker 结合使用。

我试图用这个复制这段代码：

```
$('div#calendar').live('mouseover', function() {
            $("a.event_link").fancybox({
                'width'             : 610,
                'height'            : 347,
                'autoScale'         : false,
                'overlayOpacity'    : 0.8,
                'overlayColor'      : '#000',
                'type'              : 'iframe',
                'padding'           : '5px',
                'margin'            : '5px',
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic'
            });

            $('a.event_link').live('mouseover', function() {
                $(this).trigger('click');
            });
        }); 
```

使用此代码，当页面首次加载时它仍然可以正常运行，但是一旦用户更改月份或年份，则什么也不会发生。

我已经尝试了很多变体，例如将它放在一个函数中并在结束之前添加一个 setTimeout() ，但我仍然得到相同的行为。

我看到功能代码和非功能代码之间唯一不同的是 $this 的使用，是否有可能我不能将fancybox 广泛分配给这个庄园的多个元素？

如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:22:40.127

如果您使用的是 fancybox v2.x，那么您不需要该`.live()`方法，因为 fancybox v2.x 支持现有的和动态添加的（ajax）元素，所以只需将您的选择器绑定到 fancybox，如下所示：

```
 $(document).ready(function(){
       $("a.event_link").fancybox({
            'width'             : 610,
            'height'            : 347,
            'autoScale'         : false,
            'overlayOpacity'    : 0.8,
            'overlayColor'      : '#000',
            'type'              : 'iframe',
            'padding'           : '5px',
            'margin'            : '5px',
            'transitionIn'  : 'elastic',
            'transitionOut' : 'elastic'
        });
   }); 
```

另一方面，如果您使用的是不支持动态添加元素的 fancybox v1.3.4，请查看[https://stackoverflow.com/a/9084293/1055987](https://stackoverflow.com/a/9084293/1055987)以获得进一步的解释、解决方法和演示。

**更新**（2012 年 11 月 15 日）：在您的特定情况下（使用 fancybox v1.3.4），我们需要重新定义`mouseover`事件的委托方式，因此此代码：

```
$(document).ready(function() {
    // open fancybox on mouseover
    $("div#cal-wrapper").on("mouseover", "a.event_link", function() {
        $("a.event_link").fancybox({
          // API options here
        }).trigger("click");
    }); // on
});​ // ready 
```

...应该做的伎俩。**[见小提琴](http://jsfiddle.net/7AySv/)**

# opengl-es - 随机“位置不适用于当前程序”错误

> ID：13365919
> 
> 赞同：0
> 
> 时间：2012-11-13T17:47:00.620
> 
> 标签：opengl-es, glsl, webgl, uniform

我对 WebGL 有疑问。

有时，当我向应用程序添加新着色器时，当我`uniform4f: location not for current program`在 2D 绘图函数中设置图像绘图着色器的统一时，每帧都会出现错误（显示在 Chrome 控制台中）。

虽然我之前几次遇到同样的错误，但通过随机未知操作来修复它们并不难。然而，当我添加一个屏幕扭曲着色器时，我尽我所能，甚至`glFinish`（我认为错误是由于不同步而发生的），但没有任何帮助。

当我尝试在控制台绘图功能中设置我的 2D 图像[着色器的 vec4 统一时，会发生错误。](http://pastebin.com/sSzx1TGT)如果我交换控制台绘图功能和菜单绘图功能，则不会绘制菜单。

这是我的程序创建和切换功能的源代码：http: [//pastebin.com/zDEWWgKV](http://pastebin.com/zDEWWgKV)

如果我从以下列表中执行任何操作，错误就会停止：

*   关闭菜单。
*   加载地图并进行一些 3D 渲染（导致程序切换至少 4 次）。
*   启用屏幕扭曲（导致程序切换 1 次）。

谁能告诉我，什么可能导致错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:24:45.007

这意味着您使用的位置来自另一个程序。程序不共享位置，即使它们使用相同的着色器。例子：

```
// make a vertex and a fragment shader
var vs = gl.createShader(gl.VERTEX_SHADER);
gl.shaderSource(vs, vSource);
gl.compileShader(vs);

var fs = gl.createShader(gl.FRAGMENT_SHADER);
gl.shaderSource(fs, fSource);
gl.compileShader(fs);

// now make 2 identical programs from those shaders
var p1 = gl.createProgram();
gl.attachShader(p1, vs);
gl.attachShader(p1, fs);
gl.linkProgram(p1);

var p2 = gl.createProgram();
gl.attachShader(p2, vs);
gl.attachShader(p2, fs);
gl.linkProgram(p2);

// Get a uniform location from program1
var location1 = gl.getUniformLocation(p1, "someUniform");

// Try to use that location on program2
gl.useProgram(p2);
gl.uniform4fv(location1, [1, 2, 3, 4]);  // ERROR!!! 
```

不允许尝试在程序 2 上使用程序 1 中的位置。您必须获得程序 2 的位置才能在程序 2 上设置制服。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:40:10.017

有一个函数可以设置投影矩阵并在我的代码中运行每一帧。它迭代所有着色器并`useProgram`对其进行迭代，但不会改变`GL.currentprogram`，所以如果前一帧中的最后一个着色器是`Pic`，并且当前帧中的第一个着色器`Pic`也是，但是循环已经停止，例如`Warp`，我的着色器-selecting 函数会认为当前着色器是`Pic`，而不是，并且不会更改着色器。

我通过在迭代所有着色器之前设置和禁用当前属性数组`GL.currentprogram`来修复它。`null`

# c# - CRM 2011 Silverlight 应用程序 - 无法将项目添加到 DataGridTemplateColumn 单元格内的组合框

> ID：13365922
> 
> 赞同：3
> 
> 时间：2012-11-13T17:47:09.577
> 
> 标签：c#, silverlight, xaml, dynamics-crm-2011

我在我的 xaml 中声明一个 datagrid 模板列，如下所示：

```
<sdk:DataGridTemplateColumn x:Name="MyColumn" Header="User">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox 
                                    x:Name="comboBox1" />
                            </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                        </sdk:DataGridTemplateColumn> 
```

然后我尝试像这样填充组合框：

```
DataServiceQuery<SystemUser> query = (DataServiceQuery<SystemUser>)_context.SystemUserSet;
                query.BeginExecute(OnUserSearchComplete, query); 
```

（在 InitializeComponent() 行之后运行）

进而：

```
private void OnUserSearchComplete(IAsyncResult result)
{
    var query = result.AsyncState as DataServiceQuery<SystemUser>;
    IEnumerable<SystemUser> response = query.EndExecute(result);

    ComboBox comboBox1 = (DataGrid.Columns[4] as DataGridTemplateColumn).CellTemplate.LoadContent() as ComboBox;

    // Enumerate over the results of the query
    foreach (SystemUser record in response)
    {
        comboBox1.Items.Add(record.FullName);
    }
} 
```

但是，当我在 CRM 中运行应用程序时，组合框并没有填充我的系统用户。谁能解释我做错了什么？我现在尝试了几种不同的方法，但我似乎无法让它发挥作用..

谢谢，

杰克

**编辑;** 调试：

*   响应返回 3 个系统用户对象 - 这是正确的。
*   comboBox1 不等于 null。

这是我的网格的布局方式（类似于 SDK 示例）： ![在此处输入图像描述](../Images/d8930ecc40489f569151dfbb82096489.png)

**编辑2；** 由于某种原因，我的代码似乎没有进入 foreach 循环，有什么想法吗？

**编辑3；** 好的，所以使用 Andrew 在下面的回答中提供的信息，我有以下代码：

```
 //Removed for brevity

                    <sdk:DataGridTemplateColumn x:Name="SalesmanColumn" Header="Salesman" Width="150">
                        <sdk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox
                                    x:Name="comboBox1"
                                    ItemsSource="{Binding SystemUsers, ElementName=MyUserControl}"
                                />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellTemplate>
                    </sdk:DataGridTemplateColumn>

                    //Removed for brevity

                </sdk:DataGrid.Columns>
            </sdk:DataGrid>
        </Grid> 
```

不幸的是，我的绑定似乎不起作用，我之所以这么说是因为我使用了一个字符串生成器和一个文本框来存储和显示从 CRM 检索到的用户名，并且它们都被正确检索了，但是他们没有'不会出现在组合框中。谁能解释为什么我的绑定不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:34:44.720

您是否尝试过在 XAML 中绑定 ComboBox.ItemsSource 而不是在代码隐藏中直接添加到 ComboBox.Items？也许是这样的？

```
<UserControl x:Name="MyUserControl">
    <UserControl.Resources>
        <CollectionViewSource
            x:Key="MyCollectionViewSource"
            Source="{Binding SystemUsers, ElementName=MyUserControl}"
            />
    </UserControl.Resources>

    <!-- ... Omitted for brevity ... -->

        <sdk:DataGridTemplateColumn x:Name="MyColumn" Header="User">
            <sdk:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox
                        x:Name="comboBox1"
                        ItemsSource="{Binding Source={StaticResource MyCollectionViewSource}}"
                        />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn>
</UserControl> 
```

然后在代码隐藏中：

```
public ObservableCollection<string> SystemUsers { get; private set; }

public UserControl()
{
    this.InitializeComponent();
    this.SystemUsers = new ObservableCollection<string>();
}

private void OnUserSearchComplete(IAsyncResult result)
{
    var query = result.AsyncState as DataServiceQuery<SystemUser>;
    IEnumerable<SystemUser> response = query.EndExecute(result);

    this.SystemUsers.Clear();
    foreach (SystemUser record in response)
    {
        this.SystemUsers.Add(record.FullName);
    }
} 
```

我猜数据网格在创建单元格时会在运行时调用[LoadContent](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.loadcontent%28v=vs.95%29.aspx) ()，我猜当您在代码中调用 LoadContent() 时，您将获得对 ComboBox 的新实例的引用实际上不在网格中（也根本不在可视树中）。上述解决方案应该通过让每个 ComboBox 拉入其数据而不是让您的代码隐藏负责定位每个 ComboBox 并推入数据来规避该问题。

# asp.net-mvc - 在 MVC 中向 Unity 注册 ObjectContext

> ID：13365926
> 
> 赞同：1
> 
> 时间：2012-11-13T17:47:30.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container

目前，我将工作单元的单个实例注入到我的控制器中的服务层对象中：

```
public class OrderController : Controller
{
private IUnitOfWork _unitOfWork;
private IOrderService _recipeService;
private IInventoryService _inventoryService;

public OrderController(IUnitOfWork unitOfWork, IOrderService orderService, IInventoryService inventoryService)
{
    _unitOfWork = unitOfWork;
    _orderService = orderService;
    _inventoryService = inventoryService
    //Use property injection to apply the Unit of Work context and validation state to our services
    _orderService.Context = _unitOfWork;
    _inventoryService.Context = _unitOfWork;
} 
```

理想情况下，我想从控制器中删除 UoW 上下文，并在注册期间定义 UoW 的生命周期，以便在 HTTP 请求的范围内使用相同的 UoW。在请求期间实例化的每个服务对象都将具有通过 Unity 注入的相同实例 UoW。我也想在我的控制器中使用异步操作，我不确定那里是否有任何影响。

HierarchicalLifetimeManager 的描述听起来像我想要的，但我想 110% 确定，因为我认为如果我弄错了，我最终可能会陷入调试噩梦（参考：[http](http://unitymvc3.codeplex.com/) ://unitymvc3.codeplex.com/ ）

以下注册是否会为我提供所需的行为，还是应该以另一种方式处理？

```
container.RegisterType<IOrderService, OrderService>();
container.RegisterType<IInventoryService, InventoryService>();
container.RegisterType<IUnitOfWork, UnitOfWork>(new HierarchicalLifetimeManager()); 
```

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:20:19.200

HierarchicalLifetimeManager 仅因 Unity.MVC3 解决方案中的其他管道而起作用。LifetimeManager 的工作方式类似于单例 ContainerControlledLifetimeManager，但子容器会获得创建的任何实例的新版本。

Unity.MVC3 项目使用它的方式是，每个请求都使其自己的子容器存储在 HttpRequest.Current.Items 中（请参阅该`UnityDependencyResolver`项目中的 ），然后在请求结束时处理该容器（即`RequestLifetimeHttpModule`）。通常，这意味着将从父容器中检索任何 ContainerControlled 注册，但在每个子容器中重新创建任何分层注册（如您的 UoW）。这意味着你得到你想要的：每个请求的一个新实例，然后是请求结束时的 Dispose。

如果您正在使用 Unity.MVC3 项目的其余部分，则使用 Hierarchical LM 可以正常工作。使用自定义 LifetimeManager 有类似的方法可以实现相同的结果：请参阅CodePlex 上的[此线程](http://unity.codeplex.com/discussions/38588)。

# java - 适用于 Windows 7 的蓝湾

> ID：13365928
> 
> 赞同：1
> 
> 时间：2012-11-13T17:47:34.340
> 
> 标签：java, windows, bluetooth, bluecove

有人知道 Bluecove for Java 是否适用于 Windows 7 32 位？我尝试通过蓝牙将 wiimote 连接到我的计算机，但在我配对设备后无法连接。我知道 x64 计算机存在问题，但这也是 x86 的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T06:44:33.653

是的，它适用于 Windows 7 32 位。下载最新的 bluecove 快照并将其放入您的类路径中。我已经使用它很长一段时间了

# ios - 我将如何使用受 ASCI 艺术启发的形式指定这个简单的居中 NSLayoutConstraint？

> ID：13365930
> 
> 赞同：1
> 
> 时间：2012-11-13T17:47:35.657
> 
> 标签：ios, nslayoutconstraint

我有一个简单的约束，我更愿意使用受 Asci-art 启发的格式来指定它，但是我似乎找不到这样的例子。

```
NSLayoutConstraint *centerXConstraint = [NSLayoutConstraint constraintWithItem: childView
                                             attribute:NSLayoutAttributeCenterX
                                             relatedBy:NSLayoutRelationEqual
                                                toItem: parentView
                                             attribute:NSLayoutAttributeCenterX
                                            multiplier:1.0f
                                              constant:0.0f] 
```

我尝试了一些东西，例如'|-[childView]-|' 但这只会迫使它在其父级左侧的 X 点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:56:09.263

你不能，基本上。视觉格式在它所能实现的方面非常有限，任何复杂的东西要么不起作用，要么接近“一次编写，再也不会理解”的正则表达式级别。布置需要保持彼此之间间距的项目组是可以的，但对于其他任何事情，这是不值得的。

这是一个单一的约束，您已经拥有的代码可以完成正确的工作。我会坚持下去。

如果您经常使用约束，则值得[在 UIView 上使用一个类别](https://github.com/jrturton/UIView-Autolayout)来简化常见的创建，因为现有代码非常冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T16:54:50.973

使用可视格式语言可以实现该结果。

此答案中描述了一种方法： [https ://stackoverflow.com/a/14917695/1072846](https://stackoverflow.com/a/14917695/1072846)

另一种方法是使用“间隔视图”，如[Auto Layout Guide的“](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html)*在视图之间创建相等的间距”*部分中所述。

你的 VFL 看起来像这样：

```
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(viewToCenter, spacerView1, spacerView2);

[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[spacerView1(=>1)][viewToCenter][spacerView2(=>1)]|" options:0 metrics:nil views:viewsDictionary]` 
```

假设`viewToCenter`'s`intrinsicContentSize`已设置。

# shell - gnuplot 和 Shell 脚本读取许多文件并创建图形

> ID：13365932
> 
> 赞同：0
> 
> 时间：2012-11-13T17:47:48.177
> 
> 标签：shell, gnuplot, scripting-language

好的，我正在尝试为一组不同的数据文件（总共 9 个）绘制图形所以我创建了这个 shell 脚本：

```
!/bin/bash
datastorenum=9
PlotOutputLoc=/root/bin/SANscripts/graphs
PlotGname=datastore
Pfext=png
PlotInputName=desktop
PNext=dat
PlotInputLoc=/root/bin/SANscripts/inputdata

write_plotgraph()
{
        i=1
        while [ $datastorenum != $i ]
        do
        gnuplot <<- EOF
        set term png large size 1200,1024
        set output "$PlotOutputLoc/$PlotGname-$i.$Pfext"
        set xdata time
        set timefmt '%H:%M'
        set style data lines
        set ylabel "IOs-Avg-%-kb"
        set ytics 50
        set autoscale
        set xlabel "Hour"
        plot "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:2 title "Total IOs", "$PlotInputLoc/$PlotInputName-$i.$PNext " using 1:3 title "Read %", "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:4 title "CacheHit %", "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:5 title "Current Kb/sec", "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:6 title "Maximum Kb/sec", "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:7 title "Current IO/sec", "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:8 title "Maximum IO/sec"

        i=$(( $i + 1 ))
        EOF
        done
}

write_plotgraph 
```

它不工作exaclty我得到一堆这个：

```
 line 0: warning: Skipping unreadable file "/root/bin/SANscripts/inputdata/desktop-1.dat "
     line 0: warning: Skipping unreadable file "/root/bin/SANscripts/inputdata/desktop-1.dat "
     line 0: warning: Skipping unreadable file "/root/bin/SANscripts/inputdata/desktop-1.dat " 
```

谢谢您的帮助

好的，现在如果我想传递另一个函数怎么办？我喜欢这个功能只绘制totalio？

```
write_plotTios()
{
        i=1
        while [ $datastorenum != $i ]
        do
        gnuplot <<- EOF
        set term png large size 1200,1024
        set output "$PlotOutputLoc/$PlotGname-$i-$TIOS.$Pfext"
        set xdata time
        set timefmt '%H:%M'
        set style data lines
        set ylabel "IOs-Avg-%-kb"
        set ytics 50
        set autoscale
        set xlabel "Hour"
        plot "$PlotInputLoc/$PlotInputName-$i.$PNext" using 1:2 title "Total IOs"

        EOF
        i=$(( $i + 1 ))
        done
}

write_plotTios 
```

这不起作用我收到一条错误消息：

```
 /plot_datastore1t.sh: line 54: warning: here-document at line 37 delimited by end-of-file (wanted `EOF')
./plot_datastore1t.sh: line 55: syntax error: unexpected end of file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:21:30.723

传递给“plot”命令的参数之一有一个尾随空格。这可能被解释为文件名的一部分。删除尾随空格并查看行为是否有所改善。

`$PlotInputLoc/$PlotInputName-$i.$PNext`您多次使用构造“ ”。您可能会发现将其存储为变量而不是一遍又一遍地复制/粘贴相同的东西更不容易出错（并且更具可读性）。

此外，增加`i`变量的代码位于传递给 gnuplot 的脚本中。bash 变量`i`永远不会更新，因此您将不断循环。尝试交换你的`EOF`和`i=$(( $i + 1 ))`线。

# visual-studio-2010 - Visual Studio 异常 - 扩展？

> ID：13365937
> 
> 赞同：1
> 
> 时间：2012-11-13T17:48:16.787
> 
> 标签：visual-studio-2010, visual-studio-2012

我收到屏幕截图中显示的错误：

*Visual Studio 遇到了异常。这可能是由扩展引起的。*

任何想法？我最近在 VS2010 中打开了该项目，并将其设置为允许 Nuget 还原。现在，我在一台只有 VS2010 的机器上打开它。

更新：这是我在 ActivityLog.xml 中看到的毫无意义的 gbbledygook

> System.IO.IOException：目录名称无效。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.__Error.WinIOError() 在 System.IO.Path.GetTempFileName() 在 System.Windows.Input.Cursor.LoadFromStream(Stream cursorStream) 在System.Windows.Input.Cursor..ctor(Stream cursorStream) 在 Microsoft.VisualStudio.Text.Editor.Implementation.LeftSelectionMargin.get_RightArrowCursor() 在 Microsoft.VisualStudio.Text.Editor.Implementation.LeftSelectionMarginProvider.CreateMargin(IWpfTextViewHost textViewHost, IWpfTextViewMargin containerMargin ) 在 Microsoft.VisualStudio.Text.Utilities.ContainerMargin.b__2(IWpfTextViewMarginProvider mp) 在 Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InstantiateExtension[TExtension,TMetadata,TExtensionInstance](Object errorSource, Lazy`2 provider, Func`2 吸气剂

![在此处输入图像描述](../Images/55bf418f736328acb203dddf01e5248b.png)

# css - GWT div aria-hidden 不隐藏在 IE 中

> ID：13365938
> 
> 赞同：2
> 
> 时间：2012-11-13T17:48:23.317
> 
> 标签：css, internet-explorer, gwt, accessibility

我用 GWT 编写了我的登录页面。在 IE 中，我在它的末尾得到了这个空带（我把它涂成绿色，这样你就可以看到它）：

![在此处输入图像描述](../Images/b57d23b8c2b83d3e027402373f198a4c.png)

这只发生在 IE 中（我正在使用 IE9 进行测试）。不在 Chrome 中，不在 Firefox 中，不在 Safari 中。

查看 DOM，负责该区域的是以下 div：

![在此处输入图像描述](../Images/2afe9ca70f9fe3669e424f13d0cc761b.png)

出于某种原因，“ *display:none;* ”内联规则不起作用。如果我取消选中它并再次检查它，那么绿色带就会消失！

但我不会要求我的用户每次加载我的登录页面时都这样做，所以有没有办法摆脱这个 div（显然是由 GWT 生成的），或者使内联样式“ *display:none;* ”工作？？

谢谢！

**附加说明**：我没有编写 aria-hidden HTML div，它们是由 GWT 生成的。我刚刚*观察*到他们负责我要删除的绿色带。观察结果来自这样一个事实，即当我取消选中*display:none;* 在 IE DOM 查看器中查看属性，然后再次检查，绿色带消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:23:58.957

根据我对两者`aria-hidden`和您的问题的了解，您可能错误地使用了该属性。该属性告诉使用屏幕阅读器的人忽略元素中的内容，并且应该与`visibility:none`. 有一个关于[通知用户现在可见`div`](https://stackoverflow.com/questions/10349987/how-to-notify-screen-readers-using-wai-aria-that-a-div-is-now-visible)的问题，这可能是一个很好的阅读。接受答案的作者也写了[一篇](http://www.paciellogroup.com/blog/2012/05/html5-accessibility-chops-hidden-and-aria-hidden/)关于它的博客文章。

# ruby-on-rails - 当我运行“rails server”时，如何让“puma”自动启动（就像 Thin 一样）

> ID：13365940
> 
> 赞同：29
> 
> 时间：2012-11-13T17:48:40.070
> 
> 标签：ruby-on-rails, puma

通常，当你运行`rails server`它时，它会启动 Webrick。如果您安装 'thin' gem，则会启动 'thin'。我想对'puma'服务器做同样的事情。

我看到`start`railties (lib/rails/commands) 中的命令调用 super，但我找不到“super”的各种选项是什么。我还在“瘦”中查看了许多对 Rails 的引用。

我从 2008 年 10 月发现了一个名为“为脚本/服务器添加了精简支持。#488 [Bob Klosinski]”的变更日志条目，但自那次提交 (a93ea88c0623b4f65af98c0eb55924c335bb3ac1) 以来，该代码区域发生了显着变化。

如果有人可以将我引导到正确的代码部分，那将非常有帮助。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-13T12:12:58.483

经过一番挖掘，我找到了这个答案：[https ://stackoverflow.com/a/14911994/604526](https://stackoverflow.com/a/14911994/604526)

要将 Puma 设为默认值，请将此代码粘贴到上面的 script/rails 中 require 'rails/commands'：

```
require 'rack/handler'
Rack::Handler::WEBrick = Rack::Handler.get(:puma) 
```

如果您使用 Puma 现在是默认服务器`rails s`

```
rails s
=> Booting Puma
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Connecting to database specified by database.yml
Puma 1.6.3 starting...
* Min threads: 0, max threads: 16
* Environment: development
* Listening on tcp://0.0.0.0:3000 
```

## 导轨 4

使用 Rails 4，您只需将 puma-gem 添加到 Gemfile。（使用 Rails 4.0.2 和 Puma 2.6.0 测试）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-25T00:26:57.110

至少在 Rails 4 中，您只需将以下内容添加到您的 Gemfile

```
gem 'puma' 
```

然后运行'bundle'，然后当你运行'rails server'时，将使用Puma。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-16T03:53:31.817

这对我有用。Ruby 2.0.0 Rails 3.2.13 Puma 1.6.3

```
rails s puma 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T20:55:26.340

[Puma 文档](https://github.com/puma/puma#rackup)建议您`#\ -s puma`在`config.ru`.

# c# - 如何在 https 上托管 silverlight 应用程序？

> ID：13365944
> 
> 赞同：1
> 
> 时间：2012-11-13T17:48:51.427
> 
> 标签：c#, silverlight, ssl, https

我想知道如何在 https 而不是 http 上托管 silverlight 应用程序。

我目前正在阅读这篇文章，但没有帮助：

[http://msdn.microsoft.com/en-us/library/cc645032%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc645032%28v=vs.95%29.aspx)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:58:32.853

这些文章*肯定会*帮助您逐步设置***Silverlight***应用程序以通过***HTTPS/SSL***运行：

1.  [在 HTTPS 下托管 Silverlight](http://www.i-m-code.com/blog/blog/2011/08/18/hosting-silverlight-under-https/)
2.  [在 IIS7 下设置 Silverlight 和 WCF 之间的 SSL](http://geekswithblogs.net/scottthompson/archive/2009/03/25/setting-up-ssl-between-silverlight-and-wcf-under-iis7.aspx)
3.  [使启用 Silverlight 的 WCF 服务在 SSL 协议下工作的步骤](http://sladapter.blogspot.com/2011/10/steps-to-make-silverlight-enabled-wcf.html)
4.  [使用 WCF 服务设置 Silverlight 应用程序以通过 HTTPS/SSL 运行](http://dotnetspeak.com/index.php/2009/04/setup-silverlight-application-with-wcf-service-to-run-over-httpsssl/)

这方面的详细教程：

[Silverlight 4.0 - 调用使用 SSL 和自签名证书托管的安全 WCF 4.0 服务](http://www.dotnetcurry.com/ShowArticle.aspx?ID=589)

# grails - Grails 域对象看起来像持久保存但实际上不是

> ID：13365947
> 
> 赞同：0
> 
> 时间：2012-11-13T17:49:06.963
> 
> 标签：grails, persistence

当我无法持久保存某些对象时，我遇到了一种情况。这些对象看起来像是成功保存的对象，但后来我在数据库中找不到它们。控制台中没有出现错误或通知（通常它们会出现错误）。那可能是什么？

```
// inside a transactioned service method
def m1 = new Merchant(...)
assert m1.save()                // ok
assert m1.id                    // got some good id
assert Merchant.findById(m1.id) // it fails o_O 
```

其他对象正常保存。

Grails 2.1.1，一些 Oracle

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:55:31.787

Hibernate 通常只会在会话结束时将对象刷新到数据库中。手动刷新会话`sessionFactory.currentSession.flush()`或保存对象`m1.save(flush: true)`以强制在会话完成之前写出对象。

# r - `draw.circle` 大小问题

> ID：13365951
> 
> 赞同：1
> 
> 时间：2012-11-13T17:49:30.590
> 
> 标签：r, plotrix

如果像下面这样画一个圆圈：

```
plot(0.5,0.5,axes=FALSE,ylim=c(0,1),xlim=c(0,1),asp=0)
axis(1,cex.axis=1.5)
axis(2,cex.axis=1.5)

library(plotrix)
draw.circle(0.5,0.5,0.5) 
```

![在此处输入图像描述](../Images/88e33e8196fcf311ecd8799874aaf4de.png)

我希望圆完全由`0`和界定，正如我在函数`1`中指定的原点和半径一样。`draw.circle`

为什么`y-axis`即使两个轴相同，它也会延伸我的……有没有更好的包裹我可以抓住，或者我可以随意`plotrix`做。

# php - 如何包含来自其他网站的内容？

> ID：13365955
> 
> 赞同：-2
> 
> 时间：2012-11-13T17:49:42.190
> 
> 标签：php

我正在为我的学校制作的一首慈善歌曲创建一个网站，我们有一个捐赠页面，我们已经赚了大约 600 英镑。我想要做的是在我的网站上从刚刚提供的页面开始运行总计，而无需每天多次更新。

无论如何，我可以在该页面上搜索我想要的项目并将其包含在我网站的页面上吗？像 javascript 上的 getElementById 之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:55:13.970

这在很大程度上取决于您尝试从中提取数据的页面。

首先，您应该检查 Just Giving 是否有可用于查询项目捐赠的 API。**编辑：**经过审查，有一个[API](https://apimanagement.justgiving.com/) - 这应该是首选方法！

否则，您可以尝试查看金额是否存储在特定的 div 中，这样会更容易找到字符串。此查找必须是“基于字符串的”，因为您的 JavaScript 不会在获取的文档的 DOM 上执行。因此，您需要`.search`在字符串上使用该函数并从那里开始工作，直到找到所需的值。

非常简单的解决方案是简单地在文档中找到“£”并将后面的字符串直到一个空格并将其显示为捐赠金额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:52:57.237

是的。如果 Just Giving 网站公开了一个带有您想要显示的片段的简单页面，您可以使用 JQuery（使用 Javascript）通过 AJAX 简单地获取该页面，并且无论您得到什么，都将它放在您想要显示的 HTML 元素中.

如果你有频繁的捐赠（比如每隔几秒），你也可以有一个每隔几秒更新一次的 Javascript 计时器。

如果您查看[JQuery ajax() 方法](http://api.jquery.com/jQuery.ajax/)，这里有一些示例如何查询另一个页面并获取其内容。获取内容后，您可以使用另一个[名为 .html(htmlstring) 的 JQuery 方法](http://api.jquery.com/html/)，它只是替换 HTML 元素的 HTML 内容。

假设您有刚刚通过`ajax()`变量中的方法获得的页面内容`justgiving`，`<div id='justgiving-snippet'>`然后您可以调用`$('div#justgiving-snippet').html(justgiving);`

你必须熟悉一点 Javascript，但它很容易。检查上面的 2 个链接以获取更多示例。

对了，`justgiving`你通过AJAX接收到的变量也是可以处理的。因此，如果您只想要其中的一个片段（例如带有 class 的元素的内容`raised-so-far`，您可以执行以下操作：

```
mysnippet = $('.raised-so-far', $(justgiving)).html(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T18:04:19.290

这也适用于将站点的一个区域的“部分”或“模块”添加到另一个区域：

采用提取 Just Giving 信息的逻辑并将其保存到单独的文件中。-仅- 仅提供逻辑，没有样式，没有 html 标头/正文/等。只是您希望在其他页面上打印的逻辑和原始数据。

在您的主页或索引页面上，将其放置在您希望数据显示的位置。

这将打印页面“片段”中的逻辑内容。把它想象成一个“模块”系统。这很粗鲁，很粗鲁，但它应该做你需要的。

# java - 将 modelAttribute 传递给 AJAX 方法

> ID：13365957
> 
> 赞同：0
> 
> 时间：2012-11-13T17:49:44.507
> 
> 标签：java, ajax, spring, portlet, modelattribute

我在使用 Spring 和 AJAX 和 JQuery 时很新，我遇到了一些麻烦。

我需要填充一个组合框，这取决于 jsp 中另一个组合框的值。我需要来自 jsp bean 的一些值，所以我需要将 bean 传递给 Ajax 调用。

我试图在我的jsp中做这样的事情：

```
 <script type="text/javascript"> 
    function getData() {

    var myBean = '${myBean}';

    jQ.getJSON("<c:out escapeXml="false" value='${ajaxMyMethod}'/>",
               {myBean: myBean},
               function(data) { 
                 // fill the combo
                 ...
    })

</script>

<form:form id="formMyForm" action="${formAction}" method="post" modelAttribute="myBean" enctype="multipart/form-data">
...
</form:form> 
```

在我的控制器中：

```
@ResourceMapping(value = "ajaxMyMethod")
public final JsonCombomyCombo getData(@RequestParam MyBean myBean) {
    ...
} 
```

但我没有达到该`getData`方法，它抛出一个`org.springframework.web.portlet.NoHandlerFoundException`：

> 没有为 portlet 请求找到匹配的处理程序方法：模式 'view'，阶段 'RESOURCE_PHASE'，参数 map['myBean' -> -> array['MyBean[...

我真的很感激任何帮助。谢谢！

# java - 如何解释“jmap -permstat”的输出？

> ID：13365961
> 
> 赞同：15
> 
> 时间：2012-11-13T17:49:55.113
> 
> 标签：java, permgen, jmap

我正在尝试解决 permgen 泄漏问题，并想就如何解释 jmap -permstat 的输出向你们征求意见。

假设我有一个 jmap -permstat 报告，如下所示：

```
class_loader        classes  bytes     parent_loader       alive?  type

<bootstrap>            4791  25941568                null   live  <internal>
0x00000007203ed508        0         0  0x00000007203ed228   dead  com/example/object/SomeObjectType$FirstClassLoader@0x0000000something1
0x000000071dc17620        1      3056  0x0000000705e692a8   dead  sun/reflect/DelegatingClassLoader@0x0000000something4
0x000000071f26a898        0       100                null   dead  com/example/object/SomeClassLoader@0x0000000something3
0x0000000721c6dba0        0       100                null   dead  com/example/object/SomeClassLoader@0x0000000something3
0x000000071e36df20        0       100                null   dead  com/example/object/SomeClassLoader@0x0000000something3
0x000000072157c1b8      339   2069112  0x000000072157b8d8   dead  com/example/object/SomeObjectType$SecondClassLoader@0x0000000something2
0x00000007128b7830        1      1912  0x0000000700056db8   dead  sun/reflect/DelegatingClassLoader@0x0000000something4
0x0000000707634360        1      3088  0x0000000700056db8   dead  sun/reflect/DelegatingClassLoader@0x0000000something4 
```

以下是我对上述输出的解释——请纠正我在此过程中所犯的任何错误。

“类型”列中的值不是唯一的。我们看到一些对象出现了 3 次。但是，class_loader 的值在所有三个中都是唯一的；因此，它们中的每一个都是一个独特的对象，占据着永久空间。在本例中，每个占用 100 个字节；因此，300 字节的 permgen 空间被 SomeClassLoader 类型的对象占用。

如果 classes 值非零，则此对象必须是某种类加载器，这指的是它引用的类的数量。（注意：在实际文件中，这三个对象在字节列中都有零；我为这个例子添加了值。在实际实践中，我猜测如果类列中有 0，则没有办法bytes 值可以是除零以外的任何值。）

如果存活值为“dead”，则意味着对象已准备好进行垃圾回收，但 JVM 并未这样做。关于为什么会出现这种情况的原因需要单独讨论。

如果 parent_loader 列中有值，那么这是一个被另一个类加载器引用的对象，并且在该对象被垃圾回收之前不能被垃圾回收。

最后：1）如果我在报告中看到 500 行都列出了相同的类型，2）但它们列出了不同的 class_loader 值，3）那么我可以将字节列 4）中的值相加，这将准确地表示多少permgen 空间被该类型的对象占用。

它是否正确？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T15:55:37.550

从这个[博客条目](https://blogs.oracle.com/vikram/entry/getting_permgen_informartion_using_jmap)：

> 对于每个类加载器对象，打印以下详细信息：
> 
> 1.  **(class_loader)**类加载器对象的地址——在实用程序运行时的快照中。
> 2.  **(classes)**加载的类的数量（由这个加载器使用方法（java.lang.ClassLoader.defineClass）定义。
> 3.  **（字节）**此类加载器加载的所有类的元数据消耗的近似字节数。
> 4.  **(parent_loader)**父类加载器的地址（如果有）。
> 5.  **（活的？）** “活”或“死”指示——指示加载器对象将来是否会被垃圾回收。
> 6.  **(type)**这个类加载器的类名。

永久代不包含普通对象，而是类元数据（请参阅[PermGen 实际上代表什么？](https://stackoverflow.com/questions/318942/what-does-permgen-actually-stand-for)）。所以，重写你的陈述：

> 最后：1）如果我在报告中看到 500 行都列出了相同的类型，2）但它们列出了不同的 class_loader 值，3）那么我可以将字节列 4）中的值相加，这将准确地表示多少permgen 空间被**同一 (SomeClassLoader) 类的类加载器对象加载的所有类的元数据**占用。

Eclipse Memory Analyzer 工具显示的“Retained Heap”是指对象消耗的堆内存（年轻+老）。

永久代在堆之外（参见[https://stackoverflow.com/a/12058171/33622](https://stackoverflow.com/a/12058171/33622)）并处理*类元数据*。

# iphone - 在有限边界内拖动视图而不超出该边界

> ID：13365964
> 
> 赞同：0
> 
> 时间：2012-11-13T17:50:09.490
> 
> 标签：iphone, objective-c, ios, drag-and-drop, touchesmoved

在谷歌搜索了很多之后仍然没有找到任何解决方案，我在问一个问题。

我的问题是：-我想将我的视图拖动到特定区域，除此之外，我不希望我的视图拖动，但它应该可以在指定的视图中拖动。如果拖动超出，我能够实现停止拖动，但是当我再次触摸它以拖动到允许的区域时，它不会拖动。

```
My code:-
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {

        UITouch *touch=[touches anyObject];
        CGPoint pt = [[touches anyObject] locationInView:touch.view];
        startLocation = pt;
    }

    - (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
        // Move relative to the original touch point
        UITouch *touch=[touches anyObject];
        CGPoint pt = [[touches anyObject] locationInView:touch.view];
        CGPoint pt2 = [[touches anyObject] locationInView:self.view];

        if ([touch.view isKindOfClass:[MyView class]]) {

            CGRect frame = [touch.view frame];
            CGRect prevFrame=[touch.view frame];
            frame.origin.x += pt.x - startLocation.x;
            frame.origin.y += pt.y - startLocation.y;
            CGRect boundsA = [touch.view convertRect:touch.view.bounds toView:nil];
            CGRect boundsB = [self.canvasVw convertRect:self.canvasVw.bounds toView:nil];

                Boolean viewsOverlap = CGRectContainsRect(boundsB,boundsA );
                if (viewsOverlap==YES) {
                    NSLog(@"intersects");
                    [touch.view setFrame:frame];

                }
                else{
                    NSLog(@"not intersects");

    }
        }
      } 
```

代码中的问题是假设我拖动视图，并且它超出了该区域，然后它不再拖动。

看图片：- ![在此处输入图像描述](../Images/25646581d64ad2425f8cc3d8f40de150.png)

我只需要在白色区域而不是黑色区域拖动红色视图。请建议我如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:02:54.510

好吧，基本上，边界。尽管看起来很无聊，但请确保：

*   红色的 self.frame.position.x 不是 < 0 （零是其父级的位置）
*   self.frame.position.x + self.frame.size.width 不大于 self.superview.size.width

Y的逻辑相同。

* * *

**编辑1：**

```
double possibleNewX = pt.x - startLocation.x;

if (((self.frame.position.x + possibleNewX) > 0) && ((self.frame.size.width + self.frame.position.x + possibleNewX) < self.superview.frame.size.width))
{
   frame.origin.x += possibleNewX;
}

double possibleNewY = pt.y - startLocation.y;

if (((self.frame.position.y + possibleNewY) > 0) && ((self.frame.size.height + self.frame.position.y + possibleNewY) < self.superview.frame.size.width))
{
   frame.origin.y += possibleNewY;
} 
```

# git - 撤消一堆 Git 混乱

> ID：13365966
> 
> 赞同：0
> 
> 时间：2012-11-13T17:50:22.320
> 
> 标签：git

我想恢复到特定的提交 ID。恢复我“git rm”编辑的文件。清除从那时起所做的所有提交。然后提交该回购。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:55:17.043

```
$ git reset --hard <commit ID>    # Will reset to a specific commit
$ git push -f <remote>            # Push branch into remote, with force 
```

请注意，任何克隆了您的 repo 的人都可能会遇到小问题，如果他们只是拉入您的更改（因为您在提交历史记录中强制分支向后退）；他们应该这样做以获得您的更改：

```
$ git fetch <remote>
$ git reset --hard <remote>/<branch> 
```

请注意，这也会消除*他们*在当前分支中的任何更改。但是，如果他们有从当前分支创建的任何分支，这些分支仍然会有你“吹走”的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:54:16.883

也许您正在寻找`git reset --soft {ID}`.

```
 git reset --<mode> [<commit>]
       This form resets the current branch head to <commit> and possibly updates the index (resetting it to the tree of <commit>) and the working tree depending on <mode>, which must be one of the
       following:

       --soft
           Does not touch the index file nor the working tree at all (but resets the head to <commit>, just like all modes do). This leaves all your changed files "Changes to be committed", as git
           status would put it. 
```

不确定“打击”的真正含义是什么，为什么`--hard`模式也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:54:41.820

您可以使用**git revert my_commit_id**命令。

如果是之前的一两次提交，则分别使用`git revert HEAD`和进行`git revert HEAD^`。

如果这不能解决您的问题，请使用您的提交 ID 而不是 HEAD。

这还将为您提供再次编辑提交消息并创建新提交的选项。`

# sql-server-2008 - 使用 sql server 2008 或 Oracle 11g 安装 GLPI 应用程序

> ID：13365967
> 
> 赞同：1
> 
> 时间：2012-11-13T17:50:25.247
> 
> 标签：sql-server-2008, oracle11g

我想用 sql server 2008 或 Oracle 11g 安装 GLPI。

我已经知道 GLPI 使用 mysql。

是否可以使用 sql server 2008 或 Oracle 11g 安装 GLPI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T12:05:07.163

GLPI 手册：目前，GLPI（MyISAM 引擎）仅支持 MySQL 数据库服务器和 MariaDB 数据库服务器。

# c# - 类变量之间的歧义

> ID：13365973
> 
> 赞同：2
> 
> 时间：2012-11-13T17:50:45.593
> 
> 标签：c#, asp.net, .net, code-behind

我正在构建一个系统，其中我有一些与这个相同的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Class to handle operations at Status table
/// </summary>
public class Status
{
    #region Vars and Class Objects
    protected Dados d;
    protected string sql;
    protected Logs log;
    protected Permissoes p;
    protected List<string> Mensagens;
    #endregion

    #region Constructor e Destructor
    public Status()
    {
        d = new Dados();
        log = new Logs();
        p = new Permissoes();
        Mensagens = new List<string>();
    }

    ~Status()
    {
        d = null;
        p = null;
        log = null;
        sql = null;
    }
    #endregion
} 
```

（Class Logs 和 Class Permissoes 具有相似的代码结构）。

在上面的代码中，VS2010 IDE 显示以下错误，对于构造函数中的所有声明：

```
错误文件行列             
“Status.d”和“Status.d”Status.cs 22 9 之间的歧义
“Status.log”和“Status.log”Status.cs 之间的歧义 23 9
“Status.p”和“Status.p”Status.cs 之间的歧义 24 9
“Status.Mensagens”和“Status.Mensagens”Status.cs 之间的歧义 25 9
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 21 9
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 22 9
“Status.log”和“Status.log”之间的歧义 Prioridades.cs 23 9
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 28 3
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 29 9
“Status.log”和“Status.log”之间的歧义 Prioridades.cs 30 9
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 31 9
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 45 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 53 5
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 54 5
“Status.log”和“Status.log”之间的歧义 Prioridades.cs 58 17
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 78 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 86 17
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 87 17
“Status.log”和“Status.log”之间的歧义 Prioridades.cs 88 17
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 106 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 114 17
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 115 17
“Status.log”和“Status.log”之间的歧义 Prioridades.cs 116 17
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 136 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 137 13
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 138 17
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 157 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 158 13
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 159 26
“Status.p”和“Status.p”之间的歧义 Prioridades.cs 177 18
“Status.sql”和“Status.sql”之间的歧义 Prioridades.cs 178 4
“Status.d”和“Status.d”之间的歧义 Prioridades.cs 179 17

```

奇怪的是：我用同样的方法构建了另一个系统，它就像一个魅力。我只是将这些文件复制粘贴到另一个网站，我正在修改类以创建另一个系统。

有任何想法吗？闻起来像虫子...

编辑：

才发现。发生了什么：我复制粘贴了 Prioridades 类，将其重命名并在 VS2010 上使用了 Refactoring。它将 ALL REFERENCES 重命名为“Prioridades”，重命名为“Status”，包括原来的类……一切都变得一团糟。

解决方案：使用 Refactoring 时要小心。

对不起，伙计们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:54:16.257

有趣的是它反对 Prioridades.cs 中的“Status.d”。在我看来，Prioridades.cs 好像包含一个名为“Status”的类，而不是“Prioridades”。当您复制和粘贴类内容（或整个文件）时，请务必更改类名称。这是一件很容易忘记做的事情。

# ruby-on-rails - Rails 辅助方法问题

> ID：13365978
> 
> 赞同：0
> 
> 时间：2012-11-13T17:51:02.550
> 
> 标签：ruby-on-rails, helper, link-to

我是 Rails 新手，我认为这是一个非常简单的问题。

我有一个“任务”列表。当您单击一个任务时，我想更新它在数据库中的行以将其标记为完成（将“状态”列从 0 更改为 1）。

**以下是我认为链接的样子：**

```
<td><%= link_to t.name, change_task_status_path(:id => t.id) %> 
```

**这是我的 tasks_controller.rb 中的内容：**

```
def change_task_status
  @t = Task.find_by_id(params[:id])
  @t.status = '1' # 1 = complete
  @t.save
  render :nothing => true
end 
```

我无法弄清楚如何正确格式化链接！加载视图时出现此错误：

```
undefined method `change_task_status_path' for #<#<Class:0x3a6c144>:0x3a69d54> 
```

**编辑** *耙路线显示：*

```
 tasks GET    /tasks(.:format)             tasks#index
             POST   /tasks(.:format)             tasks#create
    new_task GET    /tasks/new(.:format)         tasks#new
   edit_task GET    /tasks/:id/edit(.:format)    tasks#edit
        task GET    /tasks/:id(.:format)         tasks#show
             PUT    /tasks/:id(.:format)         tasks#update
             DELETE /tasks/:id(.:format)         tasks#destroy
      phases GET    /phases(.:format)            phases#index
             POST   /phases(.:format)            phases#create
   new_phase GET    /phases/new(.:format)        phases#new
  edit_phase GET    /phases/:id/edit(.:format)   phases#edit
       phase GET    /phases/:id(.:format)        phases#show
             PUT    /phases/:id(.:format)        phases#update
             DELETE /phases/:id(.:format)        phases#destroy
    projects GET    /projects(.:format)          projects#index
             POST   /projects(.:format)          projects#create
 new_project GET    /projects/new(.:format)      projects#new
edit_project GET    /projects/:id/edit(.:format) projects#edit
     project GET    /projects/:id(.:format)      projects#show
             PUT    /projects/:id(.:format)      projects#update
             DELETE /projects/:id(.:format)      projects#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:00:02.167

把它放在你的 routes.rb 中：

```
resources :tasks do
  member do
    get :change
  end
end 
```

它将添加`change_task`传递任务 ID 的辅助路径。
并将您的链接更改为：

```
<td><%= link_to t.name, change_task_path(:id => t.id) %> 
```

和控制器：

```
def change 
```

编辑：

为了使它成为一个ajax调用，你做对了，`:remote => true`像这样添加到你的链接中：

```
<%= link_to t.name, change_task_path(:id => t.id), :remote => true %> 
```

这样，您的控制器上的响应应该是一种`js`格式。

```
def change
  # do your thing
  respond_to do |format|
    format.js
  end
end 
```

执行此操作时，您应该`change.js.erb`在视图文件夹中有一个文件，该文件会对页面进行所有更改。像这样的东西：

```
$('#tasks_list').children().remove();
$('#tasks_list').html(
"<%= j(render('tasks_list')) %>"
); 
```

请记住，如果您这样做，您将需要一个 partial( `_tasks_list.html.erb`)。

# verilog - 在verilog中将移位寄存器的输出存储在RAM中

> ID：13365980
> 
> 赞同：-1
> 
> 时间：2012-11-13T17:51:10.713
> 
> 标签：verilog

我正在编写一个代码来移动 128 位寄存器 25 位置，然后将它的前 96 位存储在 RAM 中（RAM 中的 mem_bank 宽度 = 16 位），我尝试清除计数器以在第一个时钟周期进行移位并存储子值在接下来的 6 (96/16) 个周期中，在 RAM 中。我使用计数器进行索引，但我有一个问题，即计数器不是恒定的？？？这是RAM的代码

```
module RAM(clk,we,din,dout,address);
input clk,we,re;
input [15:0] din;
input [5:0] address;
output [15:0] dout;

reg [15:0] dout;
reg [15:0] mem_bank [0:51];
integer i;
initial 
begin
    for (i=0;i<52;i=i+1)
    mem_bank[i] <=0;
end

always @(posedge clk)
begin 
if(we)
    mem_bank[address] <= din;
dout <= mem_bank[address];
end
endmodule 
```

这是移位寄存器的代码

```
module keygen(clk,load,data0,data1,data2,data3,out1,out0);
input clk,load;
input [31:0] data0,data1,data2,data3;
output [31:0] out1,out0;
reg [127:0] reg128;
integer adrs = 0;  //address of RAM from 0 to 51
integer count=0;
parameter KEYSIZE = 16;
integer lowindex=0;
integer highindex=0;

always @(posedge clk)
begin
if(load)
    reg128 <= {data3,data2,data1,data0};
else if(count < 1)
begin

    reg128 [127:25] <= reg128 [102:0];
    reg128 [24:0] <= reg128 [127:103];
    count =count + 1;       
end
else if(count <8 && adrs < 52)
begin 
//  lowindex= (count-2)*KEYSIZE;
//  highindex = (count-2)*KEYSIZE+KEYSIZE-1;
RAM ram(.clk(clk),.we(1),.din(reg128[(count-2)*KEYSIZE:(count-2)*KEYSIZE+KEYSIZE-1]),.address(adrs));
adrs=adrs+1;
if (count < 8)
count =count + 1;       
else
count = 0;
end
end
assign out0=reg128[31:0];
assign out1=reg128[63:32];
//assign out2=reg128[95:64];
//assign out3=reg128[127:96];

endmodule 
```

任何帮助请解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:21:45.053

首先，您在`always`块内有一个 RAM 实例化。这很糟糕 - 把它移到外面。并为您的计数器更新使用非阻塞分配 ( `<=`)。

要解决您的其他问题，请使用“索引部分选择”。对于您的问题，我会尝试重写

```
reg128[(count-2)*KEYSIZE:(count-2)*KEYSIZE+KEYSIZE-1] 
```

作为

```
reg128[(count-2)*KEYSIZE+KEYSIZE-1 -: KEYSIZE ]; 
```

传统上，对于 verilog 中的部分选择（例如`reg_a[3:4]`），限制必须是恒定的。在最新版本的 verilog 中，有新的“索引部分选择”，它允许您改变其中一个维度。它的形式是`reg_a[START +: WIDTH]`，因此`reg_a[3 +: 4]`与`reg_a[3:6]`- 从索引 3 开始的 4 位相同。此处的 START 可以变化，但宽度必须保持不变。

另一种变体，`reg_a[3 -: 4]`会给你`reg_a[3:0]`。

# mysql - 选择最后一组数据

> ID：13365982
> 
> 赞同：1
> 
> 时间：2012-11-13T17:51:15.407
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3

我有一张这样的桌子

**测量**

```
id    object_id   generated_at (v)    
110   4           2012-11-13 10:29:00   
109   4           2012-11-13 10:28:00   
108   4           2012-11-13 10:27:00
107   3           2012-11-13 10:26:00
106   3           2012-11-13 10:25:00
105   4           2012-11-13 10:24:00
104   4           2012-11-13 10:23:00
103   1           2012-11-13 10:22:00
102   1           2012-11-13 10:21:00
... 
```

按`generated_at`列排序。

我的问题：有没有选择的能力

```
id    object_id   generated_at (v)    
110   4           2012-11-13 10:29:00   
109   4           2012-11-13 10:28:00   
108   4           2012-11-13 10:27:00 
```

最后一组（按 排序`generated_at`）相同的测量值`object_id`？

它可以是 Rails 中用于测量模型的示例，也可以是 SQL 查询，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:15:13.847

您最初的问题显然想要最近组中的对象，而不是所有对象。为此，您需要计算最大对象 id 和其他对象的最大生成时间：

```
select *
from t cross join
     (select max(object_id) maxobject_id from t) maxt
where object_id = maxt.maxobject_id and
      generated_at > (select max(generated_at) from t where object_id <> maxt.maxobject_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:29:04.990

以下查询将获得结果：

```
select * from Measurements
left join Measurements as M2
on
(M2.generated_at > Measurements.generated_at and M2.object_id <> Measurements.object_id)
where 
M2.id IS NULL
and
Measurements.object_id = 
(select object_id from Measurements where generated_at = (select MAX(generated_at) from Measurements)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:57:58.247

我相信这会奏效：`SELECT * FROM table WHERE object_id = (SELECT MAX(object_id) FROM table)`

# javascript - 如何使用 JavaScript 在一次操作中将一组子节点附加到父节点？

> ID：13365987
> 
> 赞同：13
> 
> 时间：2012-11-13T17:51:45.790
> 
> 标签：javascript

在 JavaScript 中，有没有办法在一次操作中将一组子节点添加到父节点？

我想在一次操作中做到这一点，以防止不必要的重绘。

我试过 parent `.appendChild(arrayOfNodes)`，但这给出了一个例外。

我正在制作一个将在多个项目中重用的小组件，我不想依赖任何像 jQuery 或 Zepto 这样的库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T17:58:18.230

您可以使用一个 intermediate `DocumentFragment`，这有点复杂，但如果您将新创建的节点附加到文档中的现有节点，它可能比一次执行一个节点更好：

```
var frag = document.createDocumentFragment();
for (var i = 0; i < arrayOfNodes.length; ++i) {
    frag.appendChild(arrayOfNodes[i]);
}
someElement.appendChild(frag); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:56:00.897

[您可以向Node](https://developer.mozilla.org/en-US/docs/DOM/Node)添加一个方法，该方法在内部调用 appendChild 方法：

```
(function () {
  Node.prototype.appendChildren(arrayOfNodes) {
    var length = arrayOfNodes.length;
    for (var i = 0; i < length; i++) {
      this.appendChild(arrayOfNodes[i]);
    }
  }()); 
```

然后可以像这样使用：

```
node.appendChildren(arrayOfNodes) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T14:46:58.607

我知道这有点老了，但我有一个类似的问题。我决定编写一个简单的函数，它需要一个父节点（节点）和子节点（nodeList 或节点数组），而不是扩展任何原型或使它比我想象的更复杂......

```
 function appendChildren(parent, children) {
     for (var i=0; i<children.length;i++) {
         child = children[i];
         parent.appendChild(child);
     }
     return parent;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-29T22:14:50.553

使用 ES6 扩展运算符，可以将 NodeList 附加到一行中的元素：

```
parent.append(...children); 
```

# javascript - 两个查询，其中第二个依赖于第一个

> ID：13365988
> 
> 赞同：0
> 
> 时间：2012-11-13T17:51:56.820
> 
> 标签：javascript, cordova, asynchronous, transactions

我正在尝试在 Phonegap (Cordova) 应用程序中显示项目列表，其中每个项目都需要额外的查询。

为简单起见，我将举例说明。假设 a`student`可以有多个`course`s，a`course`可以有多个`student`s（多对多），我想显示一个列表，显示学生注册了哪些课程。像这样：

*   学生 1：课程 1、课程 2
*   学生 2：课程 1、课程 3、课程 5
*   学生 3：课程 2
*   ...

首先，我需要一个查询来遍历所有学生，然后对于每个学生，我需要查询数据库以了解学生注册了哪些课程：

```
db.transaction(function(tx) {
    tx.executeSql('SELECT `student`.`id`, `student`.`name` ' +
            'FROM `student`',
            [],
            function(tx, resultSet) {
                for(var i = 0; i < resultSet.rows.length; i++) {
                    tx.executeSql('SELECT `course`.`name` ' +
                            'FROM `student_has_course` ' +
                            'INNER JOIN `student` ON `student_has_course`.`student_id` = `student`.`id` ' +
                            'INNER JOIN `course` ON `student_has_course`.`course_id` = `course`.`id` ' +
                            'WHERE `student`.`id` = ?'
                            [resultSet.rows.item(i).id],
                            function(tx2, resultSet2) {
                                // TODO
                            });
                }
            });
}, function(err) {
    showError('Error getting students from the DB (' + err.message + ')');
}, function() {
    alert('success!');
}); 
```

现在，问题是在第二个回调函数（“TODO”所在的位置）中，我没有引用前一个查询的任何数据。例如，如果我尝试`alert(i)`它会警告 76，相当于`resultSet.rows.length`. 这显然是因为这两个回调函数都是异步的。我怎样才能克服这个问题并打印如上所示的列表？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:30:04.587

您应该能够通过将属性附加到回调函数本身来解决此问题，如下所示：

```
cb = function cbfunc() {
     doStuffWith(cbfunc.data)
}
cb.data = ... // whatever
tx.executeSQL(..., cb) 
```

尽管如此，如果我可以通过使用单个查询产生预期结果来避免第二次回调，我会三思而后行。在这种情况下：

```
select student.id, student.name, course.name from student
    inner join student_has_course on student.id = student_has_course.student_id
    inner join course on student_has_course.course_id = course.id
        order by student.id; 
```

并在循环中，将 student.id 与上一次迭代中的比较，以了解何时打印换行符和新学生姓名，以获得所需的输出格式。

# php - Magento - 半分页

> ID：13365990
> 
> 赞同：1
> 
> 时间：2012-11-13T17:52:31.153
> 
> 标签：php, javascript, magento

我在magento商店遇到了一个问题。页面显示一半，然后中断。这是我的页面。

[http://www.statecertification.com/regshop/class-locator.html](http://www.statecertification.com/regshop/class-locator.html)

如果您查看页面源代码，这是它中断的代码

```
<script type="text/javascript">

        var marker, i;
        var map;
        var store_locations = <?php echo json_encode($Stores); ?>; 
```

任何人都可以查看，同一页面正在其他服务器上运行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:24:34.133

启用开发人员模式并将您的 index.php 设置为显示错误。

在第 75-79 行附近：

```
#if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
#}

ini_set('display_errors', 1); 
```

这将启用它 - 确保在完成后恢复它。

还要检查`/var/log`您的 Apache 日志文件夹，以找出它崩溃的确切原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:55:21.193

用单引号括起来：

```
var store_locations = '<?php echo json_encode($Stores); ?>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:57:10.550

你不需要回声：

```
 var store_locations = <?= json_encode($Stores); ?>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T18:02:26.623

您使用的是什么版本的 Magnento 和 php，因为它肯定是 php 错误？json_encode 需要 php >= 5.2.0

也试试

```
var store_locations = '<?php echo Mage::helper('core')->jsonEncode($Stores);?>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T20:34:26.080

不需要报价，因为它是 JSON ..

```
var test = {'var1':1, 'var2':2};
//this is totally OK and must not be enclosed bu quotes (a JSON object is not a string!) 
```

顺便说一句，这不是 javascript 问题，而是 PHP 隐藏的致命错误。（HTML 被截断，带或不带引号..）

要查看发生了什么，您需要激活错误显示：

```
<?php
ini_set('display_errors' 1);
error_reporting(E_ALL);
?> 
```

查看您的来源，可能存在两个问题：

*   json_encode 函数丢失（你的 PHP 版本是什么？）
*   $Stores 变量未定义或不是字符串

玩得开心

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T20:54:48.730

根据我的观点，问题不在于引号等。

我敢打赌，变量 $Stores 不存在。

作者还可以通过以下操作来发现问题：

在 index.php 中使用 ini_set('display_errors', '1'); 而不是 #ini_set('display_errors', '1'); 这将告诉你，确切的错误是什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-11T17:31:38.987

我今天有确切的情况。主页加载到一半然后中断，没有页脚等。我已经安装了 ioncube 加载程序，这不是问题。在我的情况下，它原来是我的主题文件夹 /app/design/frontend/yourthemehere/default/template/page/html/midcolumn.phtml 中的一个文件 midcolumn.phtml 因为我昨天编辑了这个文件，当我恢复原始文件时主页再次正常工作。不过，这不是你的情况。我建议通过取消注释 index.php 文件中的行来进行 magento 调试

# ini_set('display_errors', 1);

*（删除＃并在完成后将其放回）

# ios - 带有内核的 OpenCV Filter2D iPhone

> ID：13365992
> 
> 赞同：1
> 
> 时间：2012-11-13T17:52:35.473
> 
> 标签：ios, opencv, computer-vision

我正在尝试在 iOS 上为 OpenCV 定义一个自定义内核。我似乎找不到明确的方法来做到这一点。我看到其他人使用的方法就是这种方法，我似乎无法让它完全按照我想要的方式工作。我正在使用这样的 cVVideoCamera 委托：

```
- (void)processImage:(Mat&)image;
{
// Do some OpenCV stuff with the image

  double m[] =    {1.0, 1.0, 1.0,
                  2.0, 2.0, 2.0,
                  1.0, 1.0, 1.0};
  cv::Mat kernel = cv::Mat(3, 3, CV_32FC2, m);
  int ddepth = -1;

  cv::filter2D(image, image, ddepth, kernel);

} 
```

这似乎不起作用。我认为这可能是因为 cv:Mat 构造函数（CV_32FC2）中的类型。有谁知道这应该是 iPhone 相机通常是什么？还是有其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:06:13.137

类型 CV_32FC2 不是指您传入的图像的类型，它指的是您正在制作的内核中的类型。将 m 的类型更改为 float 并将 CV_32FC2 更改为 CV_32f ，它应该可以工作。如果性能有问题，您还应该像他建议的那样尝试 Brad Larson 的框架。

# python - BeautifulSoup 在 div 中提取数据

> ID：13365996
> 
> 赞同：1
> 
> 时间：2012-11-13T17:53:07.370
> 
> 标签：python, html, beautifulsoup

我已经浏览了一个小时以前的问题并尝试了各种解决方案，但我无法让它发挥作用。我已经从网站中提取了我想要的结果，现在我只需要挖掘这些 div 来获取我想要的特定信息。

结果是这样隔离的：

```
items=soup.findAll(id=re.compile("itembase")) 
```

对于每个项目，我想从这段 html 中提取例如纬度和经度：

```
<div id="itembase29" class="result-item -result unselected clearfix even" data-
part="fl_base" **data-lat="51.9006" data-lon="-8.51008"** data-number="29" 
is-local="true" data-customer="32060963" data-addrid="1" 
data-id="4b00fae498e3cc370133e8a14fd75160">
<div class="arrow">
</div> 
```

我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:17:32.517

1.  将您的 html 对象传递给美丽的汤。

    ```
    soup = BeautifulSoup(html) 
    ```

2.  找到分区。

    ```
    div = soup.div 
    ```

3.  从 div 中获取您要查找的属性。

    ```
    lat, lon = div.attrs['data-lat'], div.attrs['data-lon'] 
    ```

4.  打印。

    ```
    >>> print lat, lon
    51.9006 -8.51008 
    ```

为了清楚起见，我将`.attrs`方法留在那里，但更笼统地说，您可以访问*任何*元素的属性，例如字典，您甚至不需要该`.attrs`方法，如下所示 `div['data-lon']`：这显然不适用于`div`s 列表，您需要遍历列表。

```
for div in divs:
    print div['data-lon'], div['data-lat'] 
```

或列表理解。

```
[(div['data-lon'], div['data-lat']) for div in divs] 
```

# ios - iOS 直接打印到网络打印机

> ID：13365998
> 
> 赞同：3
> 
> 时间：2012-11-13T17:53:21.213
> 
> 标签：ios, xcode, ipad, printing, bonjour

我们寻找从 iPad 应用程序直接打印到网络上的打印机的可能性。我们不能使用 AirPrint，因为打印应该在后台以编程方式自动完成。我找到了打印机专业应用程序和爱普生的一些 SDK，但没有可能对实现这一目标有用的库。以前有人做过吗？作为后备方案，我们会考虑添加一个固定 IP 作为目的地，从而避免实施一些网络打印机检测机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T05:13:11.477

我不是 iOS 用户，但您可以使用固定 IP 或尝试解析打印机名称，然后通过端口 9100 连接并发送您要打印的数据。您需要生成自己的 Postscript 或 PCL 或打印机可以理解的其他语言。好消息是，如今许多设备都支持 TIFF、JPEG 和 PDF 作为本机文件格式，因此直接在设备上触发文档/图像应该会产生输出。