# StackOverflow 问答 15269000-15269999

# .net - 加载列表框时图表损坏

> ID：15269005
> 
> 赞同：1
> 
> 时间：2013-03-07T10:42:05.433
> 
> 标签：.net, vb.net, charts, listbox

我有一个奇怪的问题，我是一个初学者制作小程序使用列表框解决一些统计数据并显示 2 个图表问题是当我尝试将前 3 个主列表框保存到 txt 文件并再次加载并进行相同的过程时在保存一切正常之前除了一个具有正确绘制的阶梯线但在X轴上放大的图表在保存之前是不同的，并且根据阶梯线中的点绘制了另一条交叉线，它绘制在与保存之前不同的错误位置

即使我为交叉线输入特定的 X、Y 值，在保存之前它看起来也不一样

这是保存按钮的代码

```
 Dim i As Integer
    Dim w As IO.StreamWriter
    Dim strFilename As String
    SaveFileDialog1.Filter = "Text Files (*.txt)|*.txt"
    SaveFileDialog1.FileName = "Table"
    SaveFileDialog1.Title = "Save Table"
    SaveFileDialog1.OverwritePrompt = True
    If SaveFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        strFilename = SaveFileDialog1.FileName
        w = New IO.StreamWriter(strFilename)
        For i = 0 To lstFrom.Items.Count - 1
            w.WriteLine(lstFrom.Items.Item(i))
        Next
        w.WriteLine("*")
        For i = 0 To lstFrom.Items.Count - 1
            w.WriteLine(lstTo.Items.Item(i))
        Next
        w.WriteLine("**")
        For i = 0 To lstFrom.Items.Count - 1
            w.WriteLine(lstF.Items.Item(i))
        Next
        w.Close()
    End If 
```

这是打开按钮的代码

```
 ClearAll()
    Dim strFileName As String
    With OpenFileDialog1
        .Filter = "Text Files (*.txt)|*.txt"
        .Title = "Open Table"
    End With
    If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        strFileName = OpenFileDialog1.FileName
        Dim myreader As New StreamReader(strFileName)
        Dim line As String
        line = myreader.ReadLine()
        Do Until line = "*"
            lstFrom.Items.Add(line)
            line = myreader.ReadLine()
        Loop
        Do Until line = "**"
            lstTo.Items.Add(line)
            line = myreader.ReadLine()
        Loop
        Do Until line = ""
            lstF.Items.Add(line)
            line = myreader.ReadLine()
        Loop
        myreader.Close()
        lstTo.Items.Remove(lstTo.Items(0)) ' that's remove the "*"
        lstF.Items.Remove(lstF.Items(0)) ' That's remove the "**"
        AllWork()
    End If 
```

AllWork() 是相同的方法 使整个过程和显示图表

这是在打开按钮中重新绘制损坏图表的所有代码

这是来自 ClearAll() 方法

```
 Chart2.Series(0).Points.Clear()
    Chart2.Series(1).Points.Clear()
    Chart2.Series(2).Points.Clear()
    Chart2.Series(3).Points.Clear()
    Chart2.Series(4).Points.Clear() 
```

这是在 AllWork() 方法中

```
 Chart2.Series(0).Points.Clear()
    Chart2.Series(1).Points.Clear()
    Chart2.Series(2).Points.Clear()
    Chart2.Series(3).Points.Clear()
    Chart2.Series(4).Points.Clear()

             For i = 0 To lstVariableFrequency.Items.Count - 1
                If lstVariableFrequency.Items(i) = dblHighestVariableFrequency Then
                    dblF1 = lstVariableFrequency.Items(i - 1)
                    dblF2 = lstVariableFrequency.Items(i + 1)
                    dblClassBoundry2 = lstTo.Items(i) - lstFrom.Items(i)
                    dblVersusF = lstFrom.Items(i)

                    Chart2.Series(0).Points.AddXY(lstFrom.Items(i - 1), lstVariableFrequency.Items(i - 1))
                    Chart2.Series(0).Points.AddXY(lstFrom.Items(i), lstVariableFrequency.Items(i))
                    Chart2.Series(0).Points.AddXY(lstFrom.Items(i + 1), lstVariableFrequency.Items(i + 1))

                    Chart2.Series(1).Points.AddXY(lstFrom.Items(i), lstVariableFrequency.Items(i - 1))
                    Chart2.Series(1).Points.AddXY(lstFrom.Items(i + 1), lstVariableFrequency.Items(i))

                    Chart2.Series(2).Points.AddXY(lstFrom.Items(i), lstVariableFrequency.Items(i))
                    Chart2.Series(2).Points.AddXY(lstFrom.Items(i + 1), lstVariableFrequency.Items(i + 1))

                    dblMode = dblVersusF + (dblF2 / (dblF1 + dblF2)) * dblClassBoundry2
                    Exit For
                End If 
```

在打开按钮中设置表示图表中 x 轴的 lstfrom 列表

```
 If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
    strFileName = OpenFileDialog1.FileName
    Dim myreader As New StreamReader(strFileName)
    Dim line As String
    line = myreader.ReadLine()
    Do Until line = "*"
        lstFrom.Items.Add(line)
        line = myreader.ReadLine()
    Loop 
```

此代码设置表示 Y 轴的 lstVariableFrequency 列表

```
 For i = 0 To lstFrom.Items.Count - 1
            lstL.Items.Add(lstTo.Items(i) - lstFrom.Items(i))
            lstVariableFrequency.Items.Add(lstF.Items(i) / lstL.Items(i))
        Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:45:40.163

尝试将您的开放代码更改为以下

```
ClearAll()
Dim strFileName As String
With OpenFileDialog1
    .Filter = "Text Files (*.txt)|*.txt"
    .Title = "Open Table"
End With
If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
    strFileName = OpenFileDialog1.FileName
    Dim myreader As New StreamReader(strFileName)
    Dim line As String
    Do Until line = "*"
        line = myreader.ReadLine()
        If line <> "*" Then
            lstFrom.Items.Add(line)
            line = myreader.ReadLine()
        End If
    Loop
    Do Until line = "**"
        line = myreader.ReadLine()
        If line <> "**" Then
            lstTo.Items.Add(line)
            line = myreader.ReadLine()
        End If
    Loop
    Do Until line = ""
        lstF.Items.Add(line)
        line = myreader.ReadLine()
    Loop
    myreader.Close()
    AllWork()
End If 
```

您使用的分隔符（* 和/或 **）似乎与数据混淆了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:40:34.497

最后我解决了问题，这是微不足道的事情！我不相信绘制图表的代码必须有这样的转换函数的所有问题

```
Chart2.Series(0).Points.AddXY(CDbl(lstFrom.Items(i - 1)), CDbl(lstVariableFrequency.Items(i - 1))) 
```

感谢任何人阅读了我的问题并试图解决它

# javascript - 在html中区分一页和另一页

> ID：15269011
> 
> 赞同：0
> 
> 时间：2013-03-07T10:42:21.337
> 
> 标签：javascript, jquery, html

我认为标题具有误导性……因为它想不出一个合适的标题。

我有 4 个要演示的网页..

```
[page1] [page2] [page3] [page4] 
```

我想要的是..在我所有的页面之上..有这样的4个“按钮”（或其他东西）

当我在第 1 页时..第 1 页按钮为粗体，其余三个为浅色..当我在第 2 页时..第 2 页按钮为粗体，依此类推..

并且他们每个人都相互链接。

有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:07:36.930

```
<style>

button {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #123d54;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #afd9fa 0%,
        #588fad);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#afd9fa),
        to(#588fad));
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    border: 1px solid #003366;
    -moz-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    -webkit-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.7),
        0px 1px 0px rgba(255,255,255,0.3);
    }

button.current {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #faafaf 0%,
        #d11919);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#faafaf),
        to(#d11919));
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    border: 1px solid #003366;
    -moz-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    -webkit-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.7),
        0px 1px 0px rgba(255,255,255,0.3);
}
</style>

<a href="/page1.html">
    <button class="current">Demo Page 1</button>
</a>

<a href="/page1.html">
    <button class="">Demo Page 2</button>
</a>

<a href="/page1.html">
    <button class="">Demo Page 3</button>
</a>

<a href="/page1.html">
    <button class="">Demo Page 4</button>
</a> 
```

在您拥有的每个页面的顶部复制上述内容，对于第一页，按钮类应该是最新的，对于第二个页面，第二个按钮应该是最新的，依此类推。

这些按钮是出于说明目的生成的[CSS3 按钮](http://css3button.net/)

# knockout.js - 绑定敲除foreach时的表格行号

> ID：15269012
> 
> 赞同：10
> 
> 时间：2013-03-07T10:42:21.957
> 
> 标签：knockout.js

我有一个带有标题（＃，用户名，用户姓氏）的表，并且正在执行淘汰赛foreach循环以在用户从复选框列表中选择用户名时添加行。这是我的[小提琴。](http://jsfiddle.net/JanGous/qpkYd/)

**HTML**

```
<div>
    <table class="table table-bordered">
       <thead>
           <th>#</th>
           <th>User Name</th>
           <th>User Surname</th>
       </thead>
       <tbody data-bind="foreach: users">
           <tr data-bind="if: userselected">
               <!-- The table row number -->
               <td data-bind="text: $index() + 1"></td>
               <td data-bind="text: username"></td>
               <td data-bind="text: usersurname"></td>
           </tr>
       </tbody>
   </table>
</div> 
```

**JS**

```
var myViewModel = {
     users: ko.observableArray([{
         username: 'Name 1',
         usersurname: 'Surname 1',
         userselected: ko.observable(false)
     }, {
         username: 'Name 2',
         usersurname: 'Surname 2',
         userselected: ko.observable(false)
     }, {
         username: 'Name 3',
         usersurname: 'Surname 3',
         userselected: ko.observable(false)
     }])
 };

 $(document).ready(function () {
     //Bind View model
     ko.applyBindings(myViewModel);
 }); 
```

当用户选择用户 1 和 3 时，问题就出现了，$index() + 1 不适用于行号。

我需要一种动态设置行号的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T10:55:41.420

我会在我进行过滤的地方创建一个计算出的 observable。然后`$index()`将提供正确的行号：

所以添加一个新的属性`selectedUsers`到你的`myViewModel`：

```
myViewModel.selectedUsers = ko.computed(function () {
     return ko.utils.arrayFilter(myViewModel.users(), function (item) {
         return item.userselected();
     });
 }); 
```

然后在你的表中绑定它：

```
<tbody data-bind="foreach: selectedUsers">
        <tr>
            <!-- The table row number -->
            <td data-bind="text: $index() + 1"></td>
            <td data-bind="text: username"></td>
            <td data-bind="text: usersurname"></td>
        </tr>
</tbody> 
```

演示[JSFiddle](http://jsfiddle.net/Rc29Z/)。

# c# - 通过从 WinForms ListView 中删除项目来优化性能

> ID：15269013
> 
> 赞同：2
> 
> 时间：2013-03-07T10:42:24.987
> 
> 标签：c#, winforms, performance, listview

我有一个 ListView，它显示来自另一个应用程序的传入消息。我会在很长一段时间内收到这些消息，所以我无法将它们全部保存在 ListView 中，有时内存会满。此外，我每秒收到很多项目，我的整个应用程序应该有良好的性能。

目前我的 ListView 在虚拟模式下运行。为了减少所需的内存，如果达到最大项目数，我会从我的虚拟列表中删除索引 0 处的项目。

我此时的问题是删除所需的时间非常长。有没有办法优化这个？

这是我的一些代码来阐明我的工作：

```
private uint maxItems = 10000;
private List<ListViewItem> virtualList = new List<ListViewItem>();
private bool autoScroll = true;

public void AddLine(ListViewItem newLine)
{    
    BeginUpdate();

    virtualList.Add(newLine);

    if (virtualList.Count >= maxItems)
    {
        virtualList.RemoveAt(0);
    }
    else
    {
        this.VirtualListSize = virtualList.Count;
    }

    if (autoScroll)
    {
        this.TopItem = Items[Items.Count - 1];
    }
    else
    {
        if (virtualList.Count == maxItems - 1)
        {
            this.TopItem = Items[this.TopItem.Index - 1];
        }
    }

    EndUpdate();
}

private void ListView_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
{
    e.Item = virtualList[e.ItemIndex];
} 
```

# spring - Spring Hibernate JPA 不持久化云代工

> ID：15269014
> 
> 赞同：0
> 
> 时间：2013-03-07T10:42:27.123
> 
> 标签：spring, hibernate, jpa, cloud-foundry, object-persistence

我正在使用 spring hibernate & jpa 开发一个项目，并将其部署在云代工厂上。我的问题是，当我调用 Dao 将我的实体持久保存到 mysql 数据库时，什么也没有发生。没有抛出错误，我尝试将持久性包装在 try catch 块中，但什么也没有。

我将persistance.xml 中的show sql 属性设置为true。当我使用其他只查询数据库的 Dao 方法时，我可以看到运行的 SQL。但是当我尝试持久化时，没有 SQL 被写入控制台。

来自查询的示例控制台反馈

```
Hibernate: select animal0_.animal_id as animal1_1_, animal0_.about as about1_, animal0_.animaltype as animaltype1_, animal0_.breed as breed1_, animal0_.date_in as date5_1_, animal0_.date_out as date6_1_, animal0_.image_1 as image7_1_, animal0_.image_1_content_type as image8_1_, animal0_.image_1_file_name as image9_1_, animal0_.image_1_file_size as image10_1_, animal0_.image_2 as image11_1_, animal0_.image_2_content_type as image12_1_, animal0_.image_2_file_name as image13_1_, animal0_.image_2_file_size as image14_1_, animal0_.image_3 as image15_1_, animal0_.image_3_content_type as image16_1_, animal0_.image_3_file_name as image17_1_, animal0_.image_3_file_size as image18_1_, animal0_.name as name1_, animal0_.status as status1_ from animals animal0_
INFO : com.lasthope.web.animals.service.AnimalsServiceImpl - Found 0 animals in care. 
```

来自持久化的示例控制台反馈：

```
INFO : com.lasthope.web.animals.service.AnimalsServiceImpl - Saving Gerry to database.
INFO : com.lasthope.web.animals.dao.AnimalsDaoImpl - DAO, saving animal Gerry ID: null 
```

任何反馈将不胜感激！

根上下文.xml：

```
<cloud:data-source id="dataSource" />

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
 <property name="dataSource" ref="dataSource" />
</bean>

<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

服务：

```
@Service("animalsService")
public class AnimalsServiceImpl implements AnimalsService {

@Autowired
private AnimalsDao animalsDao;

    @Override
@Transactional
public void saveAnimal(Animal animal) {

    logger.info("Saving "+animal.getName()+ " to database.");

    animalsDao.saveAnimal(animal);

} 
```

道：

```
@Repository("animalsDao")
public class AnimalsDaoImpl implements AnimalsDao {

private static final Logger logger = LoggerFactory.getLogger(AnimalsDaoImpl.class);

   private EntityManager entityManager;

    public EntityManager getEntityManager() {
        return entityManager;
    }

    @PersistenceContext
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }

@Override
public void saveAnimal(Animal animal) {

    logger.info("DAO, saving animal " +animal.getName() +" ID: " +animal.getAnimalId());    

    getEntityManager().persist(animal);         

} 
```

持久性.xml

```
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
        <property name="hibernate.show_sql" value="true"/> 
    </properties>
</persistence-unit> 
```

动物类：

```
@Entity
@Table(name="animals")
public class Animal implements Serializable  {

@Id
@Column(name = "ANIMAL_ID")
@GeneratedValue(strategy = GenerationType.AUTO)
private Integer animalId;

@Column(name = "ANIMALTYPE")
private String animalType;

@Column(name = "BREED")
private String breed;

@Column(name = "NAME")
private String name;

@Column(name = "IMAGE_1")
@Lob
private Blob image1;

@Column(name = "IMAGE_1_CONTENT_TYPE")
private String image1ContentType;

@Column(name = "IMAGE_1_FILE_NAME")
private String image1FileName;

@Column(name = "IMAGE_1_FILE_SIZE")
private String image1FileSize;

@Column(name = "IMAGE_2")
@Lob
private Blob image2;

@Column(name = "IMAGE_2_CONTENT_TYPE")
private String image2ContentType;

@Column(name = "IMAGE_2_FILE_NAME")
private String image2FileName;

@Column(name = "IMAGE_2_FILE_SIZE")
private String image2FileSize;

@Column(name = "IMAGE_3")
@Lob
private Blob image3;

@Column(name = "IMAGE_3_CONTENT_TYPE")
private String image3ContentType;

@Column(name = "IMAGE_3_FILE_NAME")
private String image3FileName;

@Column(name = "IMAGE_3_FILE_SIZE")
private String image3FileSize;  

@Column(name = "ABOUT")
private String about;

@Column(name = "DATE_IN")
private Date dateIn;

@Column(name = "DATE_OUT")
private Date dateOut;

@Column(name = "STATUS")
private String status; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:16:55.170

得到它的工作！最后！

这是我必须进行的更改的摘要。

在 Animal 类（实体对象）中，我将 id 字段从 Integer 更改为 long。（我怀疑这与修复有什么关系！）并删除了可序列化的工具。

在根上下文中，我将 tx 从

```
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/> 
```

至

```
<tx:annotation-driven/> 
```

我加了

```
<context:component-scan base-package="com.lasthope.web"/> 
```

然后在我的servlet上下文中我添加了

```
<context:component-scan base-package="com.lasthope.web.controllers" /> 
```

看起来这是竞争扫描之间的冲突。

为什么它在指向我永远不会知道的 Oracle 数据库时起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:45:13.300

尝试将`GeneratedValue`策略设置为标识，确保将`ANIMAL_ID`列指定为自动编号。

```
@Id
@Column(name = "ANIMAL_ID")
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer animalId; 
```

此外，如果您使用新版本的 mySql (v5.x+)，在 persistence.xml 文件中，您应该将方言指定为：

```
<property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" /> 
```

在持久化时尝试创建事务：

```
public void saveAnimal(Animal animal) {

    logger.info("DAO, saving animal " +animal.getName() +" ID: " +animal.getAnimalId());    

    EntityManager em = getEntityManager();
    em.getTransaction().begin();
    em.persist(animal);
    em.getTransaction().commit();         

} 
```

# asp.net - 回发后代码后面找不到单选按钮

> ID：15269016
> 
> 赞同：0
> 
> 时间：2013-03-07T10:42:34.127
> 
> 标签：asp.net, radio-button, postback, viewstate

我有一个调查页面，我在表单加载事件中动态插入单选按钮。当我单击按钮发送结果时，回发后，单选按钮仍然存在，并且选中状态正确。但是，如果我在后面的代码中执行一些代码，试图检查其中一个是否被检查（通过 FindControl(id)），页面就会崩溃。我不能调试，所以我不知道错误是什么。

* * *

```
<%@ Control language="vb" AutoEventWireup="false" Explicit="True" Inherits="DotNetNuke.UI.Skins.Skin" %>
<%@ Register TagPrefix="dnn" TagName="USER" Src="~/Admin/Skins/User.ascx" %>
<style>
body {background-image:none; background-color:transparent;}
</style>
<div style="float:left; width:420px; height:335px;" id="divPerguntas" enableviewstate="true" runat="server"></div>
<div style="float:left; width:420px; height:75px;"><asp:ImageButton ImageUrl="/Portals/_default/Skins/AdWin/img/Enviar.png" id="imgEnviar" runat="server" style="cursor:pointer;" /></div>

<div id="ContentPane" runat="server"></div>

<script runat="server">
    Protected Sub EnviarClick() Handles imgEnviar.Click

        Dim conexao As SqlConnection
        Dim comando As SqlCommand
        Dim myReader As SqlDataReader
        Dim sql As String

        sql = "SELECT S.SurveyID, SO.SurveyOptionID FROM AdWin_Demo.dbo.Surveys S INNER JOIN AdWin_Demo.dbo.SurveyOptions SO ON S.SurveyID = SO.SurveyID WHERE S.VideoId = " + Request.QueryString("id") + " ORDER BY S.ViewOrder, SO.ViewOrder"
        conexao = New SqlConnection("#CONNECTIONSTRING#")
        conexao.Open()
        comando = New SqlCommand(sql, conexao)

        myReader = comando.ExecuteReader

        If myReader.HasRows Then
            Dim dt As New DataTable
            dt.Load(myReader)
            Dim SurveyID As Integer = 0
            Dim FirstQuestion As Boolean = True
            Dim checkedGroup As Boolean = False
            Dim insertList As New DataTable
            Dim ColumnIDSurveyOption As New DataColumn("c", GetType(Integer))
            insertList.Columns.Add(ColumnIDSurveyOption)
            Dim row As DataRow

            For Each dr As DataRow In dt.Rows
                If FirstQuestion Then
                    SurveyID = dr("SurveyID")
                    FirstQuestion = False
                End If
                If SurveyID <> dr("SurveyID") Then
                    SurveyID = dr("SurveyID")
                    checkedGroup = False
                End If
                If SurveyID = dr("SurveyID") And checkedGroup = False Then
                        Dim radiobuttonToCheck As RadioButton = FindControl(dr("SurveyOptionID").ToString())
                        If radiobuttonToCheck.Checked Then
                        checkedGroup = True
                        row = insertList.NewRow()
                        row("insertList") = dr("SurveyOptionID")
                        insertList.Rows.Add(row)
                        End If
                End If
            Next

            If checkedGroup = True Then
                Dim dnnUserCtrl As New DotNetNuke.Entities.Users.UserController
                For Each dr As DataRow In insertList.Rows
                    sql = "INSERT INTO AdWin_Demo.dbo.Adwin_RespostasDadas (IDUser, SurveyOptionID) SELECT " & dnnUserCtrl.GetCurrentUserInfo.UserID & ", " & dr("SurveyOptionID").ToString()
                    comando = New SqlCommand(sql, conexao)
                    myReader = comando.ExecuteReader
                Next
            Else
                Response.Write("Nao respondeste a tudo")
            End If
        End If

        myReader.Close()
        conexao.Close()

    End Sub
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
        Me.EnableViewState = True

        'If Not Page.IsPostBack Then

        Dim conexao As SqlConnection
        Dim comando As SqlCommand
        Dim myReader As SqlDataReader
        Dim sql As String

        sql = "SELECT S.SurveyID, S.Question, SO.OptionName, SO.SurveyOptionID FROM AdWin_Demo.dbo.Surveys S INNER JOIN AdWin_Demo.dbo.SurveyOptions SO ON S.SurveyID = SO.SurveyID WHERE S.VideoId = " + Request.QueryString("id") + " ORDER BY S.ViewOrder, S.SurveyID, SO.ViewOrder"
        conexao = New SqlConnection("#CONNECTIONSTRING#")
        conexao.Open()
        comando = New SqlCommand(sql, conexao)

        myReader = comando.ExecuteReader

        If myReader.HasRows Then
            Dim dt As New DataTable
            dt.Load(myReader)
            Dim SurveyID As Integer = 0
            Dim FirstQuestion As Boolean = True
            Dim ActualDiv As System.Web.UI.HtmlControls.HtmlGenericControl

            For Each dr As DataRow In dt.Rows
                If SurveyID = dr("SurveyID") Then

                    Dim rb As New RadioButton
                    rb.GroupName = "Group" & SurveyID.ToString()
                    rb.ID = dr("SurveyOptionID").ToString()
                    rb.Text = dr("OptionName").ToString()
                    rb.EnableViewState = True
                    ActualDiv.Controls.Add(rb)
                    ActualDiv.Controls.Add(New LiteralControl("<br/>"))

                Else
                    SurveyID = dr("SurveyID")

                    If FirstQuestion = False Then
                        Dim hr2 As New HtmlGenericControl("hr")
                        divPerguntas.Controls.Add(hr2)
                    End If

                    Dim div As New System.Web.UI.HtmlControls.HtmlGenericControl("DIV")
                    div.Style.Add("float", "left")
                    div.Style.Add("width", "400px")
                    div.Style.Add("color", "#777")
                    div.Style.Add("font-size", "11px")
                    div.Style.Add("line-height", "15px")
                    divPerguntas.Controls.Add(div)
                    ActualDiv = div

                    ActualDiv.InnerText = dr("Question").ToString()
                    ActualDiv.Controls.Add(New LiteralControl("<br/>"))

                    Dim rb As New RadioButton
                    rb.GroupName = "Group" & SurveyID.ToString()
                    rb.ID = dr("SurveyOptionID").ToString()
                    rb.Text = dr("OptionName").ToString()
                    rb.EnableViewState = True
                    ActualDiv.Controls.Add(rb)
                    ActualDiv.Controls.Add(New LiteralControl("<br/>"))

                    FirstQuestion = False
                End If
            Next
            Dim hr As New HtmlGenericControl("hr")
            divPerguntas.Controls.Add(hr)
        End If

        myReader.Close()
        conexao.Close()

    End Sub
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:39:08.660

```
Dim radiobuttonToCheck As RadioButton = FindControl(dr("SurveyOptionID").ToString()) 
```

->

```
Dim radiobuttonToCheck As RadioButton = Me.FindControl(dr("SurveyOptionID").ToString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:47:23.203

尝试在事件中向页面添加控件`PreInit`，看看是否可以正确访问数据。更多细节在这里[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# methods - AudioFileGetProperty - .mm 源文件中没有匹配的函数调用，但在 .m 中可以吗？

> ID：15269020
> 
> 赞同：2
> 
> 时间：2013-03-07T10:42:42.720
> 
> 标签：methods, core-audio, objective-c++

我需要将 obj-C 源文件从 .m 更改为 .mm 才能访问一些 c++ 类。只要我这样做，AudioFileGetProperty() 和 AudioFileReadPackets() 就会报告“无匹配函数调用”错误。

如果我将它从方法中移出并移到实现之外的 C 样式块中，或者重命名为 .m，它就可以工作。

为什么我不能在 .mm 文件的方法中使用 AudioFileGetProperty()？

```
- (SInt16*)loadSingleWAVBuffer:(NSString*)inName ofLength:(UInt32*)outLength
{
    AudioFileID audioFileID;
    SInt64  dataSize, packetsRead, numBytesRead, storageSize, packetCount;
    NSString *filePath = [NSString stringWithFormat:@"%@/%@%@%@", [[NSBundle mainBundle] bundlePath], self.lessonName, @"/Phrase Data/", inName];

    CFURLRef myFileURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)filePath, kCFURLPOSIXPathStyle, false);
    OSStatus    err = AudioFileOpenURL(myFileURL, kAudioFileReadPermission, 0, &audioFileID);
    AudioStreamBasicDescription asbd;
    UInt32 propSize = sizeof(asbd);
    AudioFileGetProperty(audioFileID, kAudioFilePropertyDataFormat,&propSize, &asbd);
    dataSize = sizeof packetCount;

    OSStatus result = AudioFileGetProperty(audioFileID, kAudioFilePropertyAudioDataPacketCount, &dataSize, &packetCount);
    packetsRead = packetCount;
    printf("File Opened, packet Count: %lld", packetCount);
    storageSize = 2 * packetCount; 
    SInt16* outBuffer = (SInt16*)malloc( storageSize);

    result = AudioFileReadPackets (audioFileID, false, &numBytesRead, NULL, 0, &packetsRead,  outBuffer);
    *outLength = packetsRead;
    return outBuffer;
} 
```

我正在使用 AudioToolbox 框架并包含标题。

```
#import <AudioToolbox/AudioToolbox.h> 
```

我正在使用 iOS 6.1 SDK 构建，针对 iOS 6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:31:48.593

您为某些变量提供了错误的类型，请使用以下替换：

```
UInt32 dataSize, numBytesRead, packetsRead;
UInt64 packetCount; 
```

当编译为 .m 文件时，它确实会警告您它是错误的类型（至少使用默认编译器设置），似乎 .mm 更严格，因此会给您一个错误。

# iphone - 如何改变 UIImageView 的角位置？

> ID：15269023
> 
> 赞同：0
> 
> 时间：2013-03-07T10:42:54.153
> 
> 标签：iphone, ios, objective-c, uiimageview, uikit

我想使用 UIImageView 显示波纹管图像。

![在此处输入图像描述](../Images/8bb26fdac698bd804d0190cc8f7f1974.png)

是否可以通过 UIImageView 或我们可以显示的任何其他方式显示。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:58:38.723

您需要设计师提供以下类型的设计：

![在此处输入图像描述](../Images/af1bbe4b2dde8fa08788b638e72a9647.png)

在上图中。红框内的白色部分将是透明的。然后您可以将此图像设置为`UIImageView`

# c# - 顺序读取 IList 或数组中的字符串值 C#

> ID：15269026
> 
> 赞同：-3
> 
> 时间：2013-03-07T10:42:57.540
> 
> 标签：c#, .net, arrays, ilist

我希望能够读取文本文件并将字符串值放入 IList<> 或 Array[] 中。

我希望能够按顺序读取 IList<> 或 array[] 中的值。

我希望能够读取 IList<> 或 array[] 中的第一个值，保留指针或位置，处理读取的值，然后按顺序返回下一个值，读取值保留指针，处理值并按顺序返回下一个，直到到达列表或数组的末尾。

我不知道这是否是最有效的算法，但我如何在 C# 中做到这一点？

如果可以在课堂上做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:46:12.557

当你有一个函数 Process 来处理一行时，你可以这样做：

```
foreach( var line in File.ReadLines("file.txt"))
{
  Process(line);
} 
```

# perl - Perl：比较 2 个文件的值并打印第 2 个文件的值，这些值位于第一个文件的特定值范围内

> ID：15269035
> 
> 赞同：0
> 
> 时间：2013-03-07T10:43:12.563
> 
> 标签：perl, hash, bioinformatics

我遇到了一个小故障。我有 2 个文件，如下所示：

**文件 1**

```
chr10   179423  181499  181423  2076    +   NM_001202464    ZMYND11
chr10   693887  696118  695887  2231    +   NR_027151   C10orf108
chr10   694016  696382  696016  2366    +   NR_027152   C10orf108
chr10   1032348 1034467 1034348 2119    +   NM_012341   GTPBP4
chr10   1203707 1205930 1205707 2223    +   NR_015376   LINC00200 
```

**文件2**

```
chr10   176225
chr10   180990
chr10   181315
chr10   181529
chr10   181695
chr10   182183
chr10   686673
chr10   686699
chr10   688273
chr10   695323
chr10   698323
chr10   722737
chr10   906075
chr10   908409
chr10   928052
chr10   950429
chr10   989722
chr10   1006348
chr10   1010731
chr10   1020229
chr10   1034526
chr10   1064089
chr10   1103000
chr10   1103198
chr10   1103267
chr10   1114980
chr10   1135327
chr10   1150625
chr10   1193412
chr10   1193677
chr10   1199817
chr10   1212181
chr10   1212310
chr10   1216875
chr10   1218919
chr10   1226134
chr10   1226254 
```

**需要什么**

逐行，对于每个`4th element`from`File1`打印出其中的`File2`值`>= 2nd element from file1 & <= (4th element from file1+2000)`

例如， in `File1`， in 的第 4 个元素`row1`是*181423*。从`File2`中，`>= 2nd element from file1` *(179423)*和`<= 4th element from file1+2000`*(183423)*的值为 18090,181315,181529,181695,182183。

如果没有找到值，`NA`则应打印。

**期望的输出**

一个制表符分隔的文件，如下所示：

```
chr10   179423  181423  183423  NM_001202464    ZMYND11     180990
                                                            181315
                                                            181529
                                                            181695
                                                            182183
chr10   693887  695887  697887  NR_027151   C10orf108       695323
chr10   694016  696016  698016  NR_027152   C10orf108       695323
chr10   1032348 1034348 1036348 NM_012341   GTPBP4          1034526
chr10   1203707 1205707 1207707 NR_015376   LINC00200       NA 
```

**我的代码**

我完全不知道如何去做。最初，有人告诉我，我只需要找到那些`file2`介于`2nd`和`4th`元素之间的值`file1`。为此，我使用哈希编写了以下代码，虽然可以工作，但并没有完成完整的工作。（循环中的`&&`部分`if`没有做我认为应该做的事情，所以所有更大的值都被打印出来了）

现在这段代码完全没用了：/我束手无策，因为我不知道是否在进入 Perl 编程的 3 个月内，我应该能够编写狡猾的程序。

```
use 5.014;
use warnings;

#Assign filenames
my $file1 = 'file1.txt' || die $!; #File with TSS coordinates
my $file2 = 'file2.txt' || die $!; #File with G4 coordinates

#Open files
open my $fh1, '<' , $file1 || die $!;
open my $fh2, '<' , $file2 || die $!;

#Open output
open OUT, ">G4_coordinates_promoters$file1.out" || die $!;

#Read files
while (<$fh1>) {
    chomp;
    my %data1; #Hash for TSS
    my ($key1, $val1) = (split) [1,3];
    $data1{$key1} = $val1;
    while (<$fh2>) {
        chomp ;
        my %data2; #Hash for G4 coordinates
        my ($key2, $val2) = (split) [1,2];
        $data2{$key2} = $val2;

        #Compare hashes
        if ( ($key2 > $key1) && 
             ($key2 << $data1{$key1})){ #Here the code after && is NOT working
            say OUT $key2
        }
    }
} 
```

谢谢你解决我的问题。如果能找到一些直接的方法来解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:09:31.030

该程序似乎可以满足您的需求。

输出以制表符分隔格式写入 - 与您的输入数据相同 - 因此连续行具有正确数量的制表符，但与初始行没有物理对齐。如果您想要不同的东西，请说出来。

中的所有值`file2`都被拉入数组`@file2`并从那里处理。代码假定这些值已经排序。

```
while (<$fh>) {
  chomp;
  my @fields = split /\t/;

  my $min = $fields[1];
  my $max = $fields[3] + 2000;

  my @values;
  for my $val (@file2) {
    last if $val > $max;
    push @values, $val if $val >= $min;
  }
  push @values, 'NA' unless @values;

  for my $val (@values) {
    print join("\t", @fields, $val), "\n";
    $_ = '' for @fields;
  }
} 
```

**输出**

```
chr10 179423  181499  181423  2076  + NM_001202464  ZMYND11 180990
                181315
                181529
                181695
                182183
chr10 693887  696118  695887  2231  + NR_027151 C10orf108 695323
chr10 694016  696382  696016  2366  + NR_027152 C10orf108 695323
chr10 1032348 1034467 1034348 2119  + NM_012341 GTPBP4  1034526
chr10 1203707 1205930 1205707 2223  + NR_015376 LINC00200 NA 
```

# android - 未调用 GCM 广播接收器 onReciever

> ID：15269039
> 
> 赞同：2
> 
> 时间：2013-03-07T10:43:19.117
> 
> 标签：android, google-cloud-messaging

我正在尝试为我的 android 应用程序实现通知，但我没有收到`OnReceive`调用 MyBroadcastReciever 的事件。

这是我的清单文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<permission android:name="com.example.gcm.permission.C2D_MESSAGE" 
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.gcm.permission.C2D_MESSAGE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.gcmtester.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="com.example.gcm.MyBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.gcm" />
        </intent-filter>
    </receiver>
    <service android:name="com.example.gcm.MyIntentService" />
</application>
</manifest> 
```

这是我尝试调用该服务的方式。

```
 Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", "MY_SENDER_ID");
    startService(registrationIntent); 
```

该`MyIntentService`代码也类似于[此处](http://developer.android.com/google/gcm/gcm.html#handling_intents)提到的代码。但是我的`BroadcastReciever`onRecieve 方法仍然没有被调用。我忘记了什么问题是什么？

**注意：** `MyIntentService and BroadcastReciever`类与包位于单独`(com.example.gcm)`的`Main Activity`包中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:24:30.567

以下是使用谷歌提供的 gcm.jar 库使用谷歌云消息服务的方法。

转到 SDK Manager>Extras 并下载“Google Cloud Messaging for android”库。您可以在 android 安装文件夹中找到该 jar 文件。Android>extras>google>gcm>gcm-client>dist>gcm.jar

在你的项目中包含这个 jar。

第 1 步：修改清单文件：

添加此接收器

```
 <receiver 
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        </intent-filter>
    </receiver> 
```

添加此服务：

```
<service android:name="com.your.package.GCMIntentService" /> 
```

第 2 步：创建 GCMIntentService 扩展 GCMBaseIntentService。确保将其放入应用程序的默认包中，如 manifest.xml 中清单的包属性中定义的那样

这就是它的样子

```
public class GCMIntentService extends GCMBaseIntentService {

@Override
protected void onError(Context arg0, String arg1) {
    // TODO Auto-generated method stub

}

@Override
protected void onMessage(Context arg0, Intent arg1) {
    // TODO Auto-generated method stub

}

@Override
protected void onRegistered(Context arg0, String arg1) {
    // TODO Auto-generated method stub

}

@Override
protected void onUnregistered(Context arg0, String arg1) {
    // TODO Auto-generated method stub

}

} 
```

第 3 步：注册设备。

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
GCMRegistrar.register(this, SENDER_ID); 
```

此 SENDER_ID 是您在注册 GCM 时获得的发件人 ID（或我忘记的项目 ID）。就是这样，你就完成了。现在以您想要的方式覆盖 GCMIntentService 中的任何方法。可能会记录一些信息并查看。被覆盖的方法具有明显的名称。就像设备注册完成时将调用 onRegistered 一样，String 参数是 GCM 注册 ID。更多信息请点击[这里](http://developer.android.com/google/gcm/gs.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:22:07.787

我建议您删除当前项目并重新开始。请仔细按照本[教程](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)中的步骤进行实施。

GCM 标准文档相当混乱。我按照上面的教程成功实现了 GCM。

**补充笔记：**

1.  GCM 需要带有 Google API 的模拟器。
2.  对于低于 4.2 的 android 版本，必须至少有一个登录的 google 帐户。

# java - 在 FIT 中解析嵌套对象

> ID：15269040
> 
> 赞同：1
> 
> 时间：2013-03-07T10:43:20.397
> 
> 标签：java, fit-framework

我正在使用集成测试框架。我知道如何使用`ColumnFixture`，`RowFixture`而且`ActionFixture`基本上。现在我的问题是，如果我有嵌套对象，比如`Customer`object`Address`包含一些字段的对象，我该如何解析这种对象。

前任：

```
 package com.sample;

        import java.sql.Date;

        public class Customer {
            private String name;
            private int no;
            private Date dob;
            private Address address;

            public String getName() {
                return name;
            }

            public void setName(String name) {
                this.name = name;
            }

            public int getNo() {
                return no;
            }

            public void setNo(int no) {
                this.no = no;
            }

            public Date getDob() {
                return dob;
            }

            public void setDob(Date dob) {
                this.dob = dob;
            }

            public Address getAddress() {
                return address;
            }

            public void setAddress(Address address) {
                this.address = address;
            }

            @Override
            public String toString() {
                return "Customer [name=" + name + ", no=" + no + ", dob=" + dob
                        + ", address=" + address + "]";
            }

        }
        package com.sample;

        public class Address {
            private int dno;
            private String street;
            private String city;

            public int getDno() {
                return dno;
            }

            public void setDno(int dno) {
                this.dno = dno;
            }

            public String getStreet() {
                return street;
            }

            public void setStreet(String street) {
                this.street = street;
            }

            public String getCity() {
                return city;
            }

            public void setCity(String city) {
                this.city = city;
            }

            @Override
            public String toString() {
                return "Address [dno=" + dno + ", street=" + street + ", city=" + city
                        + "]";
            }
        } 
```

现在，在我的夹具中，我想检查（使用`ActionFixture`）`getCustomer()`返回客户对象的方法。现在在`parse(String s, Type)`where 's' 是来自输入文件的客户对象的字符串格式，我如何将其转换为`Customer`对象。

我的方法合适吗？

# c# - 我的 listView 不显示我的数据

> ID：15269050
> 
> 赞同：0
> 
> 时间：2013-03-07T10:43:51.960
> 
> 标签：c#, wpf, listview

我的列表视图不显示绑定到它的数据以寻求帮助我在这里给出了仅显示一个元素的示例我想知道我的代码的问题在哪里请帮助我:(

这是我的代码：

```
<ListView ItemsSource="{Binding Path=MovieData}">
            <ListView.View>
                <GridView>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=MovieId}" Header="Movie Id" />
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Title}" Header="Title" />
                    <!-- Can Bind to complex subclass -->
                    <GridViewColumn Header="Movie(s)">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <ItemsControl ItemsSource="{Binding Path=MovieImage}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <!-- Binding with data triggers -->

                    <!-- Simple binding -->
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Recommendation}" Header="Recommendations" />

                </GridView>
            </ListView.View>
        </ListView> 
```

这是我的班级电影：

```
public class Movie
    {
        public int MovieId { get; set; }
        public string Title { get; set; }
        public BitmapImage MovieImage { get; set; }
        public string Recommendation { get; set; }
        public Movie() { }

        public void CreateMovie(int i, string T , string R)
        {
            MovieId = i;
            Title = T;
            Recommendation = R;
            BitmapImage bi = new BitmapImage();
            bi.BeginInit();
            bi.UriSource = new        Uri(@"http://pierre.chachatelier.fr/programmation/images/mozodojo-original-image.jpg");
            bi.EndInit();
            MovieImage = bi;

        }

    } 
```

这里我只添加一个元素进行测试：

```
 public List<Movie> MovieData= new List<Movie>();
 Movie m = new Movie();
 m.CreateMovie(5, "d", "s");
 MovieData.Add(m); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:11:57.027

如果您在后面的代码中使用[视图模型方法：](http://msdn.microsoft.com/it-it/magazine/dd419663.aspx)

```
public class MovieViewModel
{
   public ObservableCollection<Movie> MovieData { get; set; }

   public MovieViewModel()
   {
      //the code you post
      MovieData = new ObservableCollection<Movie>();
      Movie m = new Movie();
      m.CreateMovie(5, "d", "s");
      MovieData.Add(m);
   }
} 
```

并在您的窗口构造函数中：

```
private MovieViewModel vm;
public MyWindow()
{
   InitializeComponent();
   vm = new MovieViewModel();
   this.DataContext = vm;
} 
```

**编辑**：我刚刚阅读了您的评论。如果您的列表永远不会改变并且仅从数据库加载，您可以忽略我上面的答案，并且：

*   `ItemsSource="{Binding Path=MovieData}"`从 XAML 中的 ListView 中删除
*   给 Listview 起个名字`Name="movieListView"`

将您的代码更改为以下内容：

```
List<Movie> MovieData= new List<Movie>();
Movie m = new Movie();
m.CreateMovie(5, "d", "s");
MovieData.Add(m);
movieListView.ItemsSource = MovieData; 
```

# c++ - QThread - 如何停止工人？

> ID：15269051
> 
> 赞同：2
> 
> 时间：2013-03-07T10:43:56.187
> 
> 标签：c++, qt

我正在阅读我应该使用 worker 对象并通过 moveToThread 将其移动到线程，而不是直接从 QThread 继承。但是我找不到如何在我的对象工作者中停止循环的解决方案。例如我有测试循环：

```
void CollectionWorker::doWork()
{
    for (int i = 0; i < 10; ++i) {
        sleep(1);
        emit ping(i);
    }
} 
```

现在我将这个对象移动到线程：

```
worker->moveToThread(mTh); 
```

这工作正常。但是当我调用 mTh.quit() 时，线程正在等待，直到 doWork 中的循环结束。当我直接从 QThread 继承时，我可以在每个循环上检查线程状态并在 thred 完成时中断循环，但不知道如何在工作对象中执行此操作。我可以在工作对象中创建一些标志并从主线程切换它吗？或者也许我可以找到线程所有者并检查它的状态？或者在启动线程之前更好，在工作对象中设置线程指针然后检查状态？什么是最好的线程安全解决方案？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-20T22:28:48.747

在线程对象上调用 quit() 或 exit() 将简单地结束线程的事件循环（如果有任何运行）。但是正如您正确指出的那样，最初的问题仍然存在。如果工作函数已经被事件循环执行并且是一个具有永久构造的长时间运行函数怎么办。对 quit() 或 exit() 的调用将简单地等待工作函数返回。

除了使调用者可以使用公共函数以更改内部标志之外，还可以建议几种方法。

*   在你的工人阶级中给出一个终止信号和槽。如下所示。

```
 signals:
        void signalTermination();
    public slots:
        void setTerminationFlag();
    private:
        QMutex mutex;
        bool terminationRequested; 
```

你的插槽看起来像东西。

```
void setTerminationFlag()
{
    QMutexLocker locker(&mutex);
    terminationRequested = true;
} 
```

然后，您可以在永远循环的每次迭代中检查 doWork 函数中的变量。

```
mutex.lock();
if(terminationRequested)
{
    //break from loop and effectively doWork function
}
mutex.unlock(); 
```

使用信号和槽而不是普通成员函数的原因之一是，如果您的工作函数在同步代码块内执行一些长时间运行的任务，则公共函数将保持阻塞状态，直到它访问同步对象。如果您的公共终止方法的调用线程是 UI 线程，这可能会产生不利影响。

*   如果您使用 Qt 5.2 及更高版本，则另一种干净且更简单的方法

使用 QThread 的 requestInterruption() 方法。此方法在线程对象中设置一个咨询标志，您可以通过 doWork() 函数中的 isInterruptionRequested() 函数调用来检查它。[请参阅QThread::isInterruptionRequested](http://doc.qt.io/qt-5/qthread.html#isInterruptionRequested "QThread isInterruptionRequested")文档中给出的以下代码片段。

```
void long_task() {
    forever {
        if ( QThread::currentThread()->isInterruptionRequested() ) {
            return;
        }
    }
} 
```

你也可以在这里直接调用quit()来结束线程的事件循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:05:50.927

编辑：对不起，我误解了你的问题。

有几种选择。您可以创建一些标志，并在处理循环的每次迭代之前检查标志是否已设置。或者，如果您在列表/队列中处理数据，您可能可以用特殊的数据结束元素发出终止进程的信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T09:30:30.460

我和Dibo有同样的问题。我在我的`doWork()`函数中运行一个很长的计算循环，并且需要能够从我的主线程中停止它。

Chadick Robbert 的回答对我没有用。第一个建议的行为就像他为成员函数所描述的那样。也就是说，虽然我们使用了信号和槽，`setTerminationFlag`但从主线程中发出的信号调用槽，正确连接到它，只有在循环结束后才会执行。但也许我在实现上做错了。如果它真的应该起作用，请告诉我，因为这似乎是交易破坏者。

`QThread::currentThread()->isInterruptionRequested()`如果不是因为如果您计划将线程和工作程序重用于某些类似的处理密集型循环（如果不是相同），那么您无法重置此标志，那么他使用告诉线程停止的第二种选择会很好用. 当然，您可以通过停止和启动线程来完成它，但我不确定它是否不会产生诸如清除执行队列之类的不利影响。这个问题实际上是作为[错误报告](https://bugreports.qt.io/browse/QTBUG-40400)发布的，如果我可以引用他的话，Thiago Macieira（Qt 的关键开发人员）在那里提到：

> requestInterruption 函数的目的是结束线程。

这`requestInterruption`对于这项工作来说是不够的，因为它只在线程开始和结束时被重置。

我发现的一个对我来说似乎并不那么干净的解决方案是包含`QCoreApplication`在工人阶级中并不时调用`QCoreApplicaton::processEvents()`，以处理 Chadick Robbert 的第一个建议中的那些排队信号或更新工人阶级对标志变量的认识线程之间共享。

因为在你的循环中调用`QCoreApplicaton::processEvents()`会大大减慢它我所做的事情是这样的：

```
for(unsigned long int i=0; i<800000000 && !*stop; i++){
    f += (double)i * .001; // dummy calculation
    if(i%10000000 == 0) // Call it only from time to time
        QCoreApplication::processEvents(); // update *stop according to main Thread
} 
```

如您所见，使用此解决方案，循环只会在“10000000”的整数倍处中断，这对于某些用例可能不够用。

如果有人知道对此的杀手级解决方案，我很想听听。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:09:36.197

Qt 中销毁工作线程的惯用方式是使用信号/插槽接口：

```
 CollectionWorker *worker = new CollectionWorker;
 QThread *workerThread = new QThread(this);

 connect(workerThread, SIGNAL(started()), worker, SLOT(doWork()));
 connect(workerThread, SIGNAL(finished()), worker, SLOT(deleteLater()));
 worker->moveToThread(workerThread); 
```

为了使它工作，CollectionWorker 必须从 QObject 类继承并声明 Q_OBJECT 宏。

# jsf - Tomcat 7 错误渲染响应：/send-receive-updates

> ID：15269056
> 
> 赞同：0
> 
> 时间：2013-03-07T10:44:05.587
> 
> 标签：jsf, tomcat, tomcat7, icefaces, icefaces-1.8

我在 renderResponse 中遇到错误问题：在 ExternalContext 中找不到 /send-receive-updates 作为资源。

应用程序在 Jboss 4.2.3 中运行良好，现在正在将其迁移到 tomcat 7 和 icefaces 版本 1.8.2。

需要你的帮助

我的项目 web inf 中的 jars 是：

ant-1.5.1、backport-util-concurrent、bsf、c3p0-0.9.1.2、ch、commons-beanutils、commons-codec、commons-collections、commons-digester、commons-el、commons-fileupload、commons-logging、 commons-net-1.3.0、commons-pool-1.3、dom4j-1.4、el-ri、hibernate3、icefaces、icefaces-comps、icefaces-facelets、iReport、itext-1.3.1、krysalis-jCharts-1.0.0- alpha-1、servlet-api、slf4j-api-1.5.0、slf4j-log4j12-1.5.0、spring、spring-mock、xercesImpl、xml-apis、log4j-1.2.15、jsf-api-1.2、jsf- impl-1.2，jstl。

# mercurial - 强制合并分支

> ID：15269060
> 
> 赞同：11
> 
> 时间：2013-03-07T10:44:16.273
> 
> 标签：mercurial

有什么方法可以强制在分支 B 中合并分支 A，所有可能的冲突都将在分支 B 中得到解决？

总而言之，如何在分支 A 中推送最后一个分支 B 修订版，而不会因冲突而虚荣？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T10:58:33.360

您可以决定通过使用`hg merge --tool internal:other`或`hg merge --tool internal:local`

我不确定您要合并哪种方式，但是如果您想将 A 合并到 B 并从 B 中进行所有更改，那么您将执行以下操作：

```
> hg update B
> hg merge A --tool internal:local
> hg commit -m "Merge" 
```

合并`internal:local`工具将采用当前修订版中的更改（由于 是 B `hg update B`），而不是其他修订版中的更改，`internal:other`将采用 A 中的所有更改。

有关更多信息，请使用以下命令： `hg help merge`和`hg help merge-tools`

# networking - 是否可以让 USB 控制器也桥接连接？

> ID：15269062
> 
> 赞同：1
> 
> 时间：2013-03-07T10:44:16.900
> 
> 标签：networking, usb, usbserial

我只是想知道我是否可以将两个都连接到同一台电脑的 USB 设备连接在一起。我希望将设备连接在一起，就像它们通过电缆直接连接一样，而不是连接 PC。我问这个是因为我现在实际上没有电缆转换器来将我的 Android 连接到 PS3 控制器，然后我突然想到这样做。就像网桥一样。

# c# - c# 在数据绑定 ListView 中动态创建的 ImageButton 不会回发

> ID：15269065
> 
> 赞同：0
> 
> 时间：2013-03-07T10:44:25.287
> 
> 标签：c#, listview, data-binding, postback, imagebutton

我很确定我知道为什么会发生这种情况，本质上是控件在页面生命周期中动态创建为时已晚，事件连线系统无法看到它，但我不确定该怎么做：

我有一个 ListView 正在为我的自定义论坛显示论坛帖子。有些帖子有附件。在 ItemDataBound 事件期间呈现附件：在 Item 的内容中搜索 asp PlaceHolder，并动态创建 ImageButton 并将其添加到占位符：

```
 ImageButton ib_Delete = new ImageButton();
      ib_Delete.ID = "ib_DeleteAttachment_" + myfile.Id.ToString();
      ib_Delete.ImageUrl = "~/images/icons/delete.png";
      ib_Delete.Width = 16;
      ib_Delete.Height = 16;
      ib_Delete.CssClass = "attachmentDeleteButton";
      ib_Delete.OnClientClick = "return ConfirmDeleteAttachment();";
      ib_Delete.CommandArgument = mf.Id.ToString() + '@' + m.Id;
      ib_Delete.Click += new ImageClickEventHandler(DeleteMessageAttachment_Click);
      myPlaceHolder.Controls.Add(ib_Delete); 
```

现在，.cs 中的 DeleteMessageAttachment_Click 方法永远不会触发，实际上 javascript onclick 看起来像：

> onclick="return ConfirmDeleteAttachment();"

实际上，我从同一个项目中的另一个页面复制了 ImageButton 创建代码，该代码*没有*在数据绑定相关事件中呈现 ImageButton，客户端的代码如下所示：

> onclick="return ConfirmDeleteAttachment();WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$ctl00$cphPage$MC2$ib_DeleteAttachment_12345", "", true, "", "", false, false))"

..所以我很确定这是一个问题，因为我在页面生命周期的错误点创建了我的控件，但问题是我如何在正确的时间做到这一点？我是否应该在我的 Page_Load 中预先创建大量 ImageButton 并将它们保存在类范围的 Dictionary<> 中，以便我可以在正确的时间将它们拉出来？如果我这样做，事件连接系统会看到它们吗？只是不确定人们做了什么来确保在正确的时间创建东西以便可以在其他时间使用它。

谢谢大家

# c# - 导出事件日志，滚动文件解决方案

> ID：15269069
> 
> 赞同：0
> 
> 时间：2013-03-07T10:44:39.807
> 
> 标签：c#, event-log

我们目前有一个事件日志，我们希望在某个时候将其导出到文件中。我目前已将其设置为以下内容：

```
 public static void ExtractLog() {
        var logSession = new EventLogSession();
        logSession.ExportLogAndMessages(SPDClientLog, PathType.LogName, "*", @"C:\Users\Public\logfile.evtx", true, CultureInfo.CurrentCulture);
        logSession.Dispose();
    } 
```

但据我了解，这意味着每次运行该方法时都会覆盖日志文件。我们希望每次导出时都有不同的副本，最多可以说 10 个文件左右。

使用事件日志可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:47:34.950

这与 EventLog 无关。您只需要在导出中指定不同的名称...

# extjs - 如何将商店绑定到 Combobox

> ID：15269072
> 
> 赞同：1
> 
> 时间：2013-03-07T10:44:50.187
> 
> 标签：extjs, extjs4

如何使用组合框 ID 将商店绑定到组合框，例如：

`Ext.getCmp('combobox-id').store(unitStore);`

组合框的名称-“configuration-unit-form-select-Merge-with-unit”商店是-“unitStore”；在 extjs 3.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:30:02.653

Do it like this:

`Ext.getCmp('comboid').bindStore(unitStore);`

Thats the proper way of binding a store to an existent combo.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:25:35.807

Ext.getCmp(id) 将 id 作为参数而不是名称，所以这是您应该进行的第一个更改。[文档链接](http://docs.sencha.com/ext-js/3-4/#!/api/Ext-method-getCmp)

考虑 configuration-unit-form-select-Merge-with-unit 作为 Combo 的 id 属性，试试下面

```
Ext.getCmp('configuration-unit-form-select-Merge-with-unit').store.loadData(unitStore); 
```

# javascript - 在谷歌地图的标记上方放置一个可拖动的图像

> ID：15269076
> 
> 赞同：0
> 
> 时间：2013-03-07T10:45:00.407
> 
> 标签：javascript, google-maps-api-3

有没有办法做到这一点？我在地图上放置了标记，但在它上方，我想添加一个看起来与标记完全一样的图像，我可以拖动它。我想达到的效果是我将图像拖动到定义的位置，同时标记仍将保留在那里，所以我实际上是在使用这个标记的副本进行操作。

谢谢。

# windows-phone - 在 Windows Phone 商店上传应用程序时，地图令牌是什么意思？

> ID：15269077
> 
> 赞同：3
> 
> 时间：2013-03-07T10:45:02.317
> 
> 标签：windows-phone

我在我的 Windows Phone 应用程序中使用了必应地图服务。我已经在必应网站上注册了该应用程序并获得了

在应用程序中使用的映射键。但我想知道在将应用程序上传到 Windows 手机商店时有

4 号位置的地图标记选项。

该地图令牌的目的是什么，我是否必须让该地图令牌在我的应用程序中使用地图服务，尽管我在我的应用程序中使用了 bing 地图密钥，如果是，那么如何

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-19T16:10:13.180

地图令牌是您在市场上上传应用程序时将获得的密钥。以下是链接，它将指导您详细了解这一点。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn741528.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn741528.aspx)

# javascript - Jquery 从预定义列表中随机化 div 的位置

> ID：15269078
> 
> 赞同：0
> 
> 时间：2013-03-07T10:45:06.890
> 
> 标签：javascript, jquery, css, arrays, random

我一直在尝试从数组中预定义的位置列表中随机化 div 的位置，但没有成功，我想我可能很接近，但我看不出我哪里出错了。

变量位置数组 = [];

```
 function Position(left, top) {
        this.left=left;
        this.top=top;
    }

    function rand(ar){
        return 0.5-Math.random();
    }

    var positionArray = [
          new Position(0,  0) 
        , new Position(50, 50) 
        , new Position(100,100) 
        , new Position(150,150) 
        , new Position(200,200) 
        , new Position(250,250) 
        , new Position(300,300) 
        , new Position(350,350) 
    ];

    function init() {                
            var min = 0;
            var max = 7;
            var posIndex = Math.floor(Math.random() * (max - min + 1)) + min;
            alert(posIndex)                               
            $(".start-journey-marker").css({
                top     : positionArray[posIndex].top,
                left    : positionArray[posIndex].left
            });
    };

    positionArray.sort(rand);

    init(); 
```

看这里的例子：http: [//jsfiddle.net/qQWYW/](http://jsfiddle.net/qQWYW/)

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:49:52.747

要使 CSS生效，您需要向`top`元素添加或。（编辑：或添加。）`left``position : relative``position : absolute``position : fixed`

此外，您的演示也不起作用，因为您没有包含 jQuery（左侧的框架面板）。

更新演示：http: [//jsfiddle.net/qQWYW/1/](http://jsfiddle.net/qQWYW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:49:50.593

这是一个造型问题。只需添加

```
position: absolute; 
```

到您的`.start-journey-marker`选择器。

PS 它不会在小提琴上工作，因为你忘记包含 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:51:06.903

请`.start-journey-marker`在您的 CSS 中添加位置属性

# c# - 使用正则表达式匹配子字符串的最后一个单词

> ID：15269082
> 
> 赞同：0
> 
> 时间：2013-03-07T10:45:17.183
> 
> 标签：c#, regex

我需要匹配一个句子中的一个单词，它几乎可以是任何东西。该句子类似于以下内容：

老人今天走了很长时间。

在句子中，“盲人”可以是任何东西，可以是一个或多个词，“今天”可以是任何东西，但始终是一个词和“很长一段时间”。总是一样的。我试图让“散步”每次都是不同的词。

我尝试过的是： (.+)(?= .+ 很长一段时间。)

这让我“老人走路”

我试图从那里做的是获取该子字符串的最后一个单词，但我不知道要在正则表达式中添加什么来获取它。只为此使用子字符串方法会更好吗？

编辑：写错了我要找的词，在上面的文字中更正了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:48:26.970

您可以匹配整个事物并仅将您关心的事物分组在 ( ) 中。像这样：

```
string s = "^.* ([^ ]+) for a long time\\.$";

Regex r = new Regex(s);
Match m = r.Match("The old man walks today for a long time.");
if(m.Success)
{
    Console.WriteLine(m.Groups[1].Value);
} 
```

# php - 将子网的特定 IPv6 地址分配给 cURL

> ID：15269085
> 
> 赞同：3
> 
> 时间：2013-03-07T10:45:19.627
> 
> 标签：php, curl, ip-address, ipv6, subnet

我已经通过`/etc/network/interfaces`（分发是 Debian Squeeze）为我的专用主机分配了一个 /64 IPv6 子网

```
iface eth0 inet6 static
  address 2a01:4f8:XXXX:YYYY::2
  netmask 64
  gateway fe80::1 
```

现在，我想让 cURL (PHP 5.3.22-1~dotdeb.0) 使用该子网的一个特定 IP 地址，pe`2a01:4f8:XXXX:YYYY::3`所以我的代码如下所示：

```
curl_setopt($this->_curl, CURLOPT_INTERFACE, '2a01:4f8:XXXX:YYYY::3');
curl_setopt($this->_curl, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V6); 
```

跑步时`curl_exec`我得到`bind failed with errno 99: Cannot assign requested address`. 为什么会这样？将每个 IPv6 地址定义为 /128 in 时`/etc/network/interfaces`，例如：

```
iface eth0 inet6 static
  address 2a01:4f8:XXXX:YYYY::2
  netmask 128
  up ip -6 addr add 2a01:4f8:XXXX:YYYY::3/128 dev eth0 preferred_lft 0
  gateway fe80::1 
```

那么一切都很好，cURL 使用`::3`IP。但是我的意图是使用我子网中的很多 IP（真的很多 IP），所以这是不切实际的。有谁知道为什么 cURL 不能分配 /64 子网的子 IP？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:55:45.553

cURL 无法绑定到 2a01:4f8:XXXX:YYYY::3 因为 2a01:4f8:XXXX:YYYY::3 不是分配给任何接口的 IP 本地地址。主机只能在分配给它们的地址上接收数据包，因此，您只能绑定到这些地址。

正如您所描述的，如果您使用 2a01:4f8:XXXX:YYYY::3 作为接口上的地址添加`ip addr add`，它可以工作。这是可以预料的。

我不知道有一种方法可以将一大组地址分配给本地系统，而不必逐个添加它们。有一个技巧，但它仅适用于某些操作系统（可能仅适用于 Linux）并且仅适用于 IPv4 并且仅适用于环回接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:55:28.383

您误解了网络掩码的含义。在您的两个示例中，您都在接口上配置了一个地址。您指定的网络掩码是整个网络的掩码。

如果要使用多个地址，则必须分别配置每个地址。

# java - 我的登录/索引 zul 页面加载了两次，因为我只调用了一次

> ID：15269086
> 
> 赞同：1
> 
> 时间：2013-03-07T10:45:19.813
> 
> 标签：java, zk

我正在使用 zk ce 6.5 版，但我遇到了问题。我的登录/索引页面被加载了两次。

1.  当我在注销按钮上调用这个：

    Executions.createComponents("登录", center, null);

上面的页面有两个字段，我正在使用 MVVM 方法。

现在它加载正常，但是只要我在文本框中输入用户名或在文本框中输入密码，页面就会自动刷新。我已经检查了我的代码，我没有在此处的进程中的其他任何地方调用上述方法。

请告诉我为什么在文本框/密码文本框上我会在登录页面出现这种行为。重新加载两次后，它会获取用户名并将我带到主页。现在我注销和相同的情况。

有两次，我接到了这个方法的调用，一次很明显，因为注销时我调用了它，但是在文本框中输入任何文本并从中删除焦点。然后再次调用此方法。

```
@AfterCompose
public void afterCompose(@ContextParam(ContextType.VIEW) Component view){
    Selectors.wireComponents(view, this, false);
 } 
```

我也检查了我的代码，任何文本字段都没有事件。

登录.zul

```
<zk>
    <window id="loginWin" border="none" width="100%" height="100%"
        apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vmc') @init('com.example.LoginViewModel')"
        validationMessages="@id('vmsgs')">

        <borderlayout>
            <west border="normal" size="70%" title="What Intelliops Do?">
                <div width="100%" height="100%">
                    asdasd as asd a d asdasd a sd asd asasd asd d asdasd as
                    d a d asdasd a sd asd asasd asd a d asdasd a sd asd
                    asasd asd a d asdasd a sd asd asasd asd
                </div>
            </west>
            <east border="normal" size="30%" title="Login">
                <div width="100%" height="100%">
                    <grid sizedByContent="true"
                        form="@id('lv') @load(vmc.userDto)
                       @save(vmc.userDto, before='loginButtonInvoke')
                       @validator('com.example.LoginValidator')">
                        <columns>
                            <column width="50%"></column>
                            <column width="50%"></column>
                        </columns>
                        <rows>
                            <row align="left" width="100%"
                                style="background:white;.row:hover{background-color: #fff};border:none">
                                <cell style="text-align:right">
                                    User Name
                                </cell>
                                <cell>
                                    <textbox id="userNameTextBox" type="text"
                                        value="@bind(lv.user.username)" maxlength="50" />
                                    <image src="@load(vmsgs['userNameTextBoxError'])" width="12px"
                                        height="12px" tooltiptext="@load(vmsgs['userNameTextBox'])"></image>
                                </cell>
                            </row>
                            <row width="100%"
                                style="background:white;.row:hover{background-color: #fff};border:none">
                                <cell style="text-align:right">
                                    Password
                                </cell>
                                <cell>
                                    <textbox id="passwordTextBox" type="password"
                                        value="@bind(lv.user.password)" maxlength="20" />
                                    <image src="@load(vmsgs['passwordTextBoxError'])" width="12px"
                                        height="12px" tooltiptext="@load(vmsgs['passwordTextBox'])" />
                                </cell>
                            </row>
                            <row width="100%"
                                style="background:white;.row:hover{background-color: #fff};border:none">
                                <cell style="text-align:right">
                                    <button id="loginButton" label="Login"
                                        onClick="@command('loginButtonInvoke')" />
                                </cell>
                                <cell>
                                    <label id="loginErrorLabel" style="color:red" />
                                </cell>
                            </row>
                            <row spans="2" width="100%"
                                style="background:white;.row:hover{background-color: #fff};border:none">
                                <cell colspan="2" style="text-align:right">
                                    <a id="forgetPasswordLink">
                                        Forgot Password?
                                    </a>
                                </cell>
                            </row>
                        </rows>
                    </grid>
                </div>
            </east>
        </borderlayout>
    </window>
</zk> 
```

登录视图模式类

```
package com.example;

import org.apache.log4j.Logger;
import org.zkoss.bind.annotation.AfterCompose;
import org.zkoss.bind.annotation.Command;
import org.zkoss.bind.annotation.ContextParam;
import org.zkoss.bind.annotation.ContextType;
import org.zkoss.zk.ui.Component;
import org.zkoss.zk.ui.select.Selectors;
import org.zkoss.zk.ui.select.annotation.Wire;
import org.zkoss.zkplus.spring.SpringUtil;
import org.zkoss.zul.Label;
import org.zkoss.zul.Textbox;

import com.example.UserDTO;
import com.example.IUserService;
import example.Pages;
import example.TemplateUtil;
import example.UserUtil;

public class LoginViewModel{

    private Logger logger = Logger.getLogger(this.getClass().getName());

    IUserService userService = (IUserService)SpringUtil.getBean("userService");

    UserDTO userDto = new UserDTO();

    private static final String USER_ROLES = "userRoles";
    private static final String MASTER = "master";

    @Wire("#userNameTextBox")
    Textbox userNameTextBox;

    @Wire("#passwordTextBox")
    Textbox passwordTextBox;

    @Wire("#loginErrorLabel")
    Label loginErrorLabel;

    @AfterCompose
    public void afterCompose(@ContextParam(ContextType.VIEW) Component view){
        Selectors.wireComponents(view, this, false);
     }

    @Command("loginButtonInvoke")
    public void loginButtonInvoke(){
        logger.info("LoginViewModel:afterCompose >>>>>>>>>>>>>>>");
        logger.info("loginButtonInvoke: " + userDto.getUserIntelliOps().getUsername() + " " + userDto.getUserIntelliOps().getPassword());
        userDto = userService.getUserAuthentication(userDto);

        if(userDto!=null){
            UserUtil.setSession(userDto);
            logger.info("loginButtonInvoke:userDto!=null ");
            /*List<ViewObjectOperation> list = userService.getAllOtherOperationsService().userAuthorizationMatrix(userDto.getUserIntelliOps().getRoles().get(0).toString());*/
            //List<ViewObjectOperation> list = userService.getAllOtherOperationsService().userAuthorizationMatrix(3+"");
            //logger.info("asdasdas   " + list.size());
            /*getUserAuthorizedMenu*/
            //TODO what is the following line doing here????
            userService.getUserAuthorizedMenu();

            TemplateUtil.loadContent(Pages.HOME_FILE,true);
        }else{
            if(userDto==null){
                userDto = new UserDTO();
            }
        loginErrorLabel.setValue("Invalid username or password.");
        }

    }

    public UserDTO getUserDto() {
        return userDto;
    }

    public void setUserDto(UserDTO userDto) {
        this.userDto = userDto;
    }

} 
```

TemplateUtil 类来绘制页面

```
package com.example;

import org.apache.log4j.Logger;

import org.zkoss.zk.ui.Executions;
import org.zkoss.zk.ui.Path;
import org.zkoss.zul.A;
import org.zkoss.zul.Borderlayout;
import org.zkoss.zul.Button;
import org.zkoss.zul.Center;
import org.zkoss.zul.Include;
import org.zkoss.zul.North;

public class TemplateUtil {

    static Logger logger = Logger.getLogger(TemplateUtil.class.getName());

    public static void loadContent(String contentPage, boolean isMenu) {

        logger.info("TemplateUtil: loadContent().......... ");

        Borderlayout mainlayout = (Borderlayout) Path.getComponent("/main/mainLayout");
        North topHeader = mainlayout.getNorth();

        topHeader.getFellow("menuDiv").setVisible(isMenu);

        //TODO remove the following logger

        if(isMenu==true ){
            anchorUsername.setLabel(UserUtil.getUserName());
            logger.info("isMenu==true....");
            Executions.createComponents(Pages.MENU_FILE, topHeader.getFellow("menuDiv"), null);
            UserUtil.setSession(true);
        }

        topHeader.invalidate();

        Center center = mainlayout.getCenter();
        center.getChildren().clear();
        logger.info("contentPage: " + contentPage);
        Executions.createComponents(contentPage, center, null);

    }

} 
```

请帮助我

让我更新你。1.第一次没有刷新 2.登录后，当我点击注销并进入登录页面时，只要我在任何文本框中添加值，页面就会刷新。没有对这些字段中的任何一个进行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:10:42.423

我无法理解你为什么这样做......

```
Executions.createComponents("login", center, null); 
```

当您要**注销时**

据我了解，您可以这样做...

```
//Executions.getCurrent().getDesktop().invalidate();//Condition base if you needed use it otherwise dont use it
Executions.getCurrent().getSession().invalidate();
Executions.sendRedirect("/login.zul"); 
```

# jquery - 更改下拉菜单的功能未被击中

> ID：15269087
> 
> 赞同：-2
> 
> 时间：2013-03-07T10:45:23.347
> 
> 标签：jquery, asp.net-mvc

我有以下下拉列表

```
@Html.DropDownList("SalesChannelId", Model.SalesChannels, @AuctionControllerResource.SelectSalesChannel, new { id="salesChannel", required = "required" }) 
```

我有以下 Javascript

```
$('#salesChannel').change(function() {
    var selectedSalesChannel = $("#salesChannel").val();
    var seenSalesChannel = $("#seenSalesChannelId").val();
    if (selectedSalesChannel == seenSalesChannel) {
        $("#remarketingSiteList").show();
    } else {
        $("#remarketingSiteList").hide();
    }
}); 
```

但是由于某种原因，当我更改下拉列表中的值时，这段代码永远不会被击中。我在 Firebug 中放了一个断点，但没有任何乐趣。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:45:56.253

尝试

```
$("#SalesChannelId").change 
```

代替

```
$('#salesChannel').change 
```

因为生成的 id 是helper func 中指定的*SalesChannelId*

```
@Html.DropDownList("SalesChannelId" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:47:29.087

你选错了`Id`

尝试这个

```
$(document).ready(function(){
$('#SalesChannelId').change(function() {
    var selectedSalesChannel = $("#SalesChannelId").val();
    var seenSalesChannel = $("#seenSalesChannelId").val();
    if (selectedSalesChannel == seenSalesChannel) {
        $("#remarketingSiteList").show();
    } else {
        $("#remarketingSiteList").hide();
    }
});
}); 
```

# c++ - 如果 stdin 被另一个进程的管道替换，则 std::getline 中断

> ID：15269090
> 
> 赞同：1
> 
> 时间：2013-03-07T10:45:32.957
> 
> 标签：c++, winapi, visual-c++, process, pipe

我有一个简单的示例程序，它从 std::cin 读取并写入 std::cout。如果在 cmd.exe 或 Visual Studio 调试器中运行，它工作正常。代码（server.cpp）：

```
#include <iostream>
#include <istream>
#include <ostream>
#include <string>

int main(int argc, char* argv[])
{
    std::string input;
    while (std::getline(std::cin, input))
    {
        if (input == "dog")
        {
            std::cout << "cat" << std::endl;
        }
        else if (input == "white")
        {
            std::cout << "black" << std::endl;
        }
        else if (input == "quit")
        {
            std::cout << "exiting" << std::endl;
            return 0;
        }
        else if (input != "")
        {
            std::cout << "unknown" << std::endl;
        }
    }

    std::cout << "error" << std::endl;
} 
```

现在我想从另一个写入其标准输入并从标准输出读取的进程运行它。我创建两个管道并使用 CreateProcess 启动一个进程，其中一个管道的读取句柄作为 StdInput 句柄，另一个管道的写入句柄作为 Stdouput 句柄。代码（client.cpp）：

```
#include <Windows.h>

#include <cassert>
#include <iostream>
#include <ostream>
#include <string>

namespace
{
    class Server
    {
    public:
        Server() :
            m_pi()
        {
            SECURITY_ATTRIBUTES sa = {sizeof(SECURITY_ATTRIBUTES)};
            sa.bInheritHandle = TRUE;
            assert(CreatePipe(&m_ro, &m_wo, &sa, 0));
            assert(SetHandleInformation(m_ro, HANDLE_FLAG_INHERIT, 0));
            assert(CreatePipe(&m_ri, &m_wi, &sa, 0));
            assert(SetHandleInformation(m_ri, HANDLE_FLAG_INHERIT, 0));

            STARTUPINFO si = {sizeof(STARTUPINFO)};
            si.dwFlags |= STARTF_USESTDHANDLES;
            si.hStdInput = m_ri;
            si.hStdOutput = m_wo;

            assert(CreateProcess(L"..\\Debug\\server.exe", 0, 0, 0, 1, 0, 0, 0, &si, &m_pi));
        }

        ~Server()
        {
            execute("quit\n");
            assert(WaitForSingleObject(m_pi.hProcess, INFINITE) != WAIT_FAILED);

            assert(CloseHandle(m_pi.hThread));
            assert(CloseHandle(m_pi.hProcess));
            assert(CloseHandle(m_wi));
            assert(CloseHandle(m_ri));
            assert(CloseHandle(m_wo));
            assert(CloseHandle(m_ro));
        }

        std::string execute(std::string const& cmd)
        {
            DWORD num_bytes;
            assert(WriteFile(m_wi, cmd.c_str(), (DWORD)cmd.size(), &num_bytes, 0));

            std::string output;

            DWORD n = 0;
            while (n == 0)
            {
                Sleep(0);

                assert(PeekNamedPipe(m_ro, 0, 0, 0, &n, 0));
                if (n > 0)
                {
                    output.resize(n);
                    assert(ReadFile(m_ro, &output[0], n, &num_bytes, 0));
                }
            }

            return output;
        }

    private:
        HANDLE m_wo, m_ro, m_wi, m_ri;
        PROCESS_INFORMATION m_pi;
    };

    Server g_server;
}

int main(int argc, char* argv[])
{
    std::cout << g_server.execute("white\n") << std::endl;
    std::cout << g_server.execute("foobar\n") << std::endl;
    std::cout << g_server.execute("dog\n") << std::endl;
} 
```

问题是客户端只接收到按摩“错误”，所以服务器的std::cin似乎坏了。

我的问题是，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:52:19.247

您正在为孩子将用来读取的句柄禁用继承`stdin`- 孩子需要继承该句柄。代替：

```
SetHandleInformation(m_ri, HANDLE_FLAG_INHERIT, 0); 
```

尝试以下操作以禁用服务器进程将用于写入子进程的句柄上的继承`stdin`：

```
SetHandleInformation(m_wi, HANDLE_FLAG_INHERIT, 0); 
```

# mysql - rails + database.yml 中的最大连接池大小

> ID：15269096
> 
> 赞同：2
> 
> 时间：2013-03-07T10:45:50.403
> 
> 标签：mysql, ruby-on-rails, connection, database-connection

我可以在我的 database.yml 中设置的最大池大小是多少？我正在使用 Mysql 数据库。

我有 20 个独角兽进程在 24 核、32GB RAM 机器上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:49:35.447

MySQL 中的默认配置是 100 个连接。

来自 MySQL 5.5 页面

> Linux 或 Solaris 通常能够支持 500 到 1000 个同时连接，如果您有许多 GB 的可用 RAM 并且每个连接的工作负载很低或响应时间目标要求不高，那么它应该能够支持多达 10,000 个连接。由于该平台上使用的 Posix 兼容层，Windows 被限制为（打开的表 × 2 + 打开的连接）< 2048。

您必须自己弄清楚，我认为与数据库的同时连接不会成为您的瓶颈。

从 Rails 连接池：

> 连接池将线程访问同步到有限数量的数据库连接。基本思想是每个线程从池中检出一个数据库连接，使用该连接，然后再检入该连接。 ConnectionPool 是完全线程安全的，将确保一个连接不能被两个线程同时使用，只要正确遵循 ConnectionPool 的合同。它还将处理线程多于连接的情况：如果所有连接都已签出，并且一个线程无论如何都尝试签出一个连接，那么 ConnectionPool 将等待，直到某个其他线程签入一个连接。

因此，您唯一不应该做的就是在 Rails 池大小中拥有比在 mysql 配置中更多的连接。

# mongodb - 获取 mongo shell 脚本的输出

> ID：15269098
> 
> 赞同：6
> 
> 时间：2013-03-07T10:45:51.603
> 
> 标签：mongodb

作为我的 mongoDB 维护的一部分，我正在运行 mongo shell 并使其加载 2 个脚本。我正在运行的命令如下所示：

> `$MONGO_HOME/bin/mongo --verbose --port 27017 replSetConfig.js initializeReplicaSet.js`

我得到的输出是：

```
MongoDB shell version: 2.2.3
Thu Mar  7 03:00:00 versionCmpTest passed
Thu Mar  7 03:00:00 versionArrayTest passed connecting to: 127.0.0.1:27017/test
Thu Mar  7 03:00:01 creating new connection to:127.0.0.1:27017
Thu Mar  7 03:00:01 BackgroundJob starting: ConnectBG
Thu Mar  7 03:00:01 connected connection!
loading file: js/replSet.config.js
loading file: js/initializeReplicaSet.js 
```

我正在将输出重定向到日志文件，但我也想查看加载脚本的一些输出。即，如果我启动它并调用`load("...")`相同的脚本，我在 shell 中看到的输出。有没有办法捕获输出？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T11:41:11.873

要添加脚本的输出，您必须使用`print()`or`printjson()`语句，否则 MongoDB 将对脚本的任何输出保持沉默。

# udp - JGroups 没有与 UDP 形成集群

> ID：15269104
> 
> 赞同：0
> 
> 时间：2013-03-07T10:46:21.457
> 
> 标签：udp, protocols, multicast, jgroups

我正在尝试使用 JGroups 创建一个领导者选举协议，以便我的程序的 N 个实例可以选择一个主节点，并且所有客户端都可以获得该主节点的 ip。当前的实现或多或少依赖于每个实例尝试获取锁通道上的锁，当它成功获取该通道时，它成为主通道，所有其他实例都切换到客户端。

```
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.util.*;
import org.jgroups.*;
import org.jgroups.blocks.locking.LockService;

public class AutoDiscovery
{
    static org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(AutoDiscovery.class); //used for logging purposes (see log4j library)
    /* this variable indicates whether I have become the master or I'm just a client*/
    public volatile AtomicBoolean becomeMaster = new AtomicBoolean(false);
    /* The address of the server if we are a client or of ourself if we are
     * server */
    public String serverAddress;
    /* A channel on which to acquire a lock, so that only one can become server */
    private JChannel lockChannel;
    /* A shared channel ffor communication between client and master*/
    private JChannel communicationChannel;
    private LockService lockService;
    /* A thread which tries to acquire a lock */
    private Thread acquiringThread;
    /* A thread which listens for the server ip which may change */
    private Thread listeningThread;
    /* A thread which lists the status and initializes the acquiring thread*/
    private Thread statusThread;
    private String name;
    /* If we pass from being a client to being a server we must stop the listening
     * thread however we cannot call listeningThread.stop() but instead we change
     * the stopListening boolean to true */
    private boolean stopListening = false;
    /* This lock communicates I have finally become either master or client so
     * the serverAddress and becomeMaster variables are correctly set */
    public final Object finishedLock = new Object();

    public static void main(String[] args) throws Exception
    {
        Thread.currentThread().setName("MyMainThread");
        Random rand = new Random();

        AutoDiscovery master = new AutoDiscovery("Node" + rand.nextInt(10));

        master.lockChannel = new JChannel(AutoDiscovery.class.getResource("/resource/udp.xml"));
        master.lockChannel.connect("lock-channel");

        master.communicationChannel = new JChannel(AutoDiscovery.class.getResource("/resource/udp.xml"));
        master.communicationChannel.connect("communication-channel");

        master.lockService = new LockService(master.lockChannel);
        master.startStatusPrinterThread();
    }

    public AutoDiscovery(String name)
    {
        this.name = name;
    }

    public AutoDiscovery()
    {
        try
        {
            Thread.currentThread().setName("MyMainThread");
            Random rand = new Random();

            this.name = ("Node" + rand.nextInt(10));

            lockChannel = new JChannel(AutoDiscovery.class.getResource("/resource/udp.xml"));
            lockChannel.connect("lock-channel");

            communicationChannel = new JChannel(AutoDiscovery.class.getResource("/resource/udp.xml"));
            communicationChannel.connect("communication-channel");

            lockService = new LockService(lockChannel);
            startStatusPrinterThread();
        }
        catch (Exception ex)
        {
            Logger.getLogger(AutoDiscovery.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void startAcquiringThread()
    {
        acquiringThread = new Thread()
        {
            @Override
            public void run()
            {
                while (true)
                {
                    //if you have become Master send your ip every now and then
                    if (becomeMaster.get())
                    {
                        try
                        {
                            communicationChannel.send(new Message(null, null, "serverip " + serverAddress));
                        }
                        catch (Exception ex)
                        {
                            Logger.getLogger(AutoDiscovery.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                    else
                    {
                        try
                        {
                            Thread.currentThread().setName(name + "AcquiringThread");
                            Lock lock = lockService.getLock("serverLock");
                            if (lock.tryLock(4, TimeUnit.SECONDS))
                            {
                                becomeMaster.set(true);
                                stopListening = true;
                                /* Now that I'm server I must find out my own ip address on which to listen */
                                Enumeration<NetworkInterface> networkInterfaces;
                                try
                                {
                                    networkInterfaces = NetworkInterface.getNetworkInterfaces();
                                    for (NetworkInterface netint : Collections.list(networkInterfaces))
                                    {
                                        Enumeration<InetAddress> inetAddresses = netint.getInetAddresses();
                                        for (InetAddress inetAddress : Collections.list(inetAddresses))
                                        {
                                            if (isIPAddress(inetAddress.getHostAddress())
                                                    && !inetAddress.getHostAddress().equals("127.0.0.1"))
                                            {
                                                serverAddress = inetAddress.getHostAddress();
                                            }
                                        }
                                    }
                                    /* I notify to the rest of the program I have correctly initialized 
                                     * becomeMaster and serverAddress */
                                    synchronized (finishedLock)
                                    {
                                        finishedLock.notify();
                                    }
                                }
                                catch (Exception e)
                                {
                                    Logger.getLogger(AutoDiscovery.class.getName()).log(Level.SEVERE, null, e);
                                    System.exit(0);
                                }
                                log.info(Thread.currentThread().getName() + ": I acquired lock! will become master! my ip is " + serverAddress);
                            }
                            else
                            {
                                becomeMaster.set(false);
                                stopListening = false;
                                if (listeningThread == null || !listeningThread.isAlive())
                                {
                                    if (!stopListening) //??? this codnition might be useless
                                    {
                                        startListeningThread();
                                    }
                                }
                            }
                        }
                        catch (Exception e)
                        {
                            e.printStackTrace();
                        }
                    }
                    try
                    {
                        sleep(5000L);
                    }
                    catch (InterruptedException ex)
                    {
                        Logger.getLogger(AutoDiscovery.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        };
        acquiringThread.setDaemon(true);
        acquiringThread.start();
    }

    public void startListeningThread()
    {
        listeningThread = new Thread()
        {
            @Override
            public void run()
            {
                try
                {
                    while (true)
                    {
                        Thread.currentThread().setName(name + "ListeningThread");
                        communicationChannel.setReceiver(new ReceiverAdapter()
                        {
                            @Override
                            public void receive(Message msg)
                            {
                                if (msg.getObject() != null)
                                {
                                    String leaderServerAddress = (msg.getObject().toString().substring(9));
                                    if (isIPAddress(leaderServerAddress))
                                    {
                                        serverAddress = leaderServerAddress;
                                        log.info(name + " Master server has ip" + serverAddress);
                                        /* I notify to the rest of the program I have correctly initialized 
                                         * becomeMaster and serverAddress */
                                        synchronized (finishedLock)
                                        {
                                            finishedLock.notify();
                                        }
                                    }
                                    else
                                    {
                                        log.info(name + ": discarded message " + msg.getObject().toString());
                                    }
                                }
                            }
                        });
                        sleep(10000L);
                        if (stopListening)
                        {
                            return;
                        }
                    }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            }
        };
        listeningThread.setDaemon(true);
        listeningThread.start();
    }

    private void startStatusPrinterThread()
    {
        statusThread = new Thread()
        {
            @Override
            public void run()
            {
                Thread.currentThread().setName(name + "StatusPrinterThread");
                startAcquiringThread();
                while (true)
                {
                    try
                    {
                        if (becomeMaster.get())
                        {
                            log.info(name + " startStatusPrinterThread(): I am happily a Master!");
                        }
                        else
                        {
                            if (!acquiringThread.isAlive())
                            {
                                startAcquiringThread();
                            }
                        }
                        sleep(5000L);
                    }
                    catch (InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };
        statusThread.setDaemon(true);
        statusThread.start();
    }

    private static boolean isIPAddress(String str)
    {
        Pattern ipPattern = Pattern.compile("^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\."
                + "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\."
                + "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\."
                + "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$");
        return ipPattern.matcher(str).matches();
    }
} 
```

现在我当前的 udp.xml 是

```
<config xmlns="urn:org:jgroups"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/JGroups-3.0.xsd">
    <UDP
        mcast_port="${jgroups.udp.mcast_port:45588}"
         tos="8"
         ucast_recv_buf_size="20M"
         ucast_send_buf_size="640K"
         mcast_recv_buf_size="25M"
         mcast_send_buf_size="640K"
         loopback="true"
         level="WARN"
         log_discard_msgs="false"
         max_bundle_size="64K"
         max_bundle_timeout="30"
         ip_ttl="${jgroups.udp.ip_ttl:8}"
         enable_diagnostics="true"
         thread_naming_pattern="cl"

         timer_type="new"
         timer.min_threads="4"
         timer.max_threads="10"
         timer.keep_alive_time="3000"
         timer.queue_max_size="500"

         thread_pool.enabled="true"
         thread_pool.min_threads="2"
         thread_pool.max_threads="8"
         thread_pool.keep_alive_time="5000"
         thread_pool.queue_enabled="true"
         thread_pool.queue_max_size="10000"
         thread_pool.rejection_policy="discard"

         oob_thread_pool.enabled="true"
         oob_thread_pool.min_threads="1"
         oob_thread_pool.max_threads="8"
         oob_thread_pool.keep_alive_time="5000"
         oob_thread_pool.queue_enabled="false"
         oob_thread_pool.queue_max_size="100"
         oob_thread_pool.rejection_policy="Run"/>

    <PING timeout="2000"
            num_initial_members="3"/>
    <MERGE2 max_interval="30000"
            min_interval="10000"/>
    <FD_SOCK/>
    <FD_ALL/>
    <VERIFY_SUSPECT timeout="1500"  />
    <BARRIER />
    <pbcast.NAKACK exponential_backoff="300"
                   xmit_stagger_timeout="200"
                   use_mcast_xmit="false"
                   discard_delivered_msgs="true"/>
    <UNICAST />
    <pbcast.STABLE stability_delay="1000" desired_avg_gossip="50000"
                   max_bytes="4M"/>
    <pbcast.GMS print_local_addr="true" join_timeout="3000"
                view_bundling="true"/>
    <UFC max_credits="2M"
         min_threshold="0.4"/>
    <MFC max_credits="2M"
         min_threshold="0.4"/>
    <FRAG2 frag_size="60K"  />
    <pbcast.STATE_TRANSFER />
    <CENTRAL_LOCK />
    <!-- pbcast.FLUSH  /-->
</config> 
```

现在，当我在同一台机器上运行程序的 N 个实例（N-1 个成员成为客户端，1 个成为主控）时，上述方法有效。当在连接到同一个 LAN 的两台不同机器上运行时，显然在每个成员中使用相同的集群名称调用 JChannel.connect() 之后，每个成员都会创建自己的通道，并且不会创建公共集群。结果是，当向客户端发送消息时，另一个主服务器看到相同集群名称的不同物理地址，并且所有消息都被丢弃。

所以我收到如下警告：

```
7683 [Incoming-1,communication-channel,pc-home-41714] WARN org.jgroups.protocols.pbcast.NAKACK  - [JGRP00011] pc-home-41714: dropped message 293 from non-member cf8b4ea6-8cc8-cb21-538f-b03f3fa7413d (view=[pc-home-41714|0] [pc-home-41714])

1207996 [TransferQueueBundler,communication-channel,pc-home-5280] WARN org.jgroups.protocols.UDP  - pc-home-5280: no physical address for cf8b4ea6-8cc8-cb21-538f-b03f3fa7413d, dropping message
1209526 [TransferQueueBundler,lock-channel,pc-home-59082] WARN org.jgroups.protocols.UDP  - pc-home-59082: no physical address for efbe6408-0e21-d119-e2b8-f1d5762d9b45, dropping message 
```

如果我将 udp.xml loopback="true" 更改为 loopback="false" 会发生什么，它们都连接到同一个集群，但是它们会给出如下错误：

```
55539 [Node0StatusPrinterThread] INFO plarz.net.planningig.autodiscovery.AutoDiscovery  - Node0 startStatusPrinterThread(): I am happily a Master!
59077 [TransferQueueBundler,lock-channel,pc-test-6919] ERROR org.jgroups.protocols.UDP  - pc-test-6919: exception sending bundled msgs: java.lang.Exception: dest=/fe80:0:0:0:226:18ff:fece:6ccc%2:43109 (130 bytes):, cause: java.io.IOException: Network is unreachable
59505 [TransferQueueBundler,communication-channel,pc-test-35303] ERROR org.jgroups.protocols.UDP  - pc-test-35303: exception sending bundled msgs: java.lang.Exception: dest=/fe80:0:0:0:226:18ff:fece:6ccc%2:55053 (139 bytes):, cause: java.io.IOException: Network is unreachable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T11:15:59.903

> 错误：
> 
> **[Server:ha-server-3] 13:59:13,122 WARNING [org.jgroups.protocols.UDP]** **(OOB-15,null) null:** **766de5c9-8ac2-6d30-89ef-78d39aa5f7eb 没有物理地址，丢弃消息**
> 
> 在我的情况下，这是由于在同一个网络中有多个 jboss 集群，并且每个集群都具有相同的名称。例如 ha-server-1 和 ha-server-2 存在于不同机器的两个不同集群中。
> 
> 集群 1（10.10.10.10）：| +- ha-server-1 +- ha-server-2
> 
> 集群 2（10.10.10.20）：| +- ha-server-1 +- ha-server-2
> 
> 我已经通过更改 ha-server 名称解决了这个问题。注意：两者都是独立的集群。我认为这是由于 JGroups 的多播问题而发生的。像您这样的专家的任何进一步解释都会很好。

参考[http://icfun.blogspot.com/2013/10/no-physical-address-for-766de5c9-8ac2.html](http://icfun.blogspot.com/2013/10/no-physical-address-for-766de5c9-8ac2.html)

# r - 对列进行排名并将得分最高的列放在首位，依此类推

> ID：15269106
> 
> 赞同：3
> 
> 时间：2013-03-07T10:46:27.493
> 
> 标签：r, dataframe

假设我有一个非常大的 data.frame，每列包含分数。

例如：

```
MA0001.1 AGL3 MA0003.1 TFAP2A MA0004.1 Arnt  MA0005.1 AG   MA0006.1 Arnt::Ahr
7.789524e-09  0.4012127249    3.771518e-03   1.892011e-06  0.002733200
5.032498e-07  0.0001873801    9.947449e-05   3.284222e-05  0.001367041
1.194487e-06  0.0009357406    6.943634e-05   1.589373e-05  0.002551519
4.833494e-06  0.0150703600    1.003488e-04   1.197928e-03  0.001431416
6.865040e-05  0.0000732607    3.857193e-04   5.388744e-03  0.001363706 
```

R数据帧：

```
testfr<-structure(list(`MA0001.1 AGL3` = c(7.78952366977488e-09, 5.03249791215203e-07, 
1.19448739380034e-06, 4.83349413748598e-06, 6.86504034402563e-05
), `MA0003.1 TFAP2A` = c(0.401212724871542, 0.000187380067026448, 
0.000935740631438077, 0.0150703600158589, 7.32607018758816e-05
), `MA0004.1 Arnt` = c(0.00377151826447817, 9.94744903768433e-05, 
6.94363387424972e-05, 0.000100348764966112, 0.00038571926458373
), `MA0005.1 AG` = c(1.89201084302835e-06, 3.2842217133538e-05, 
1.58937284554136e-05, 0.00119792816070882, 0.00538874414923338
), `MA0006.1 Arnt::Ahr` = c(0.00273319966783363, 0.00136704060025893, 
0.00255151921946167, 0.00143141576426544, 0.00136370552325235
)), .Names = c("MA0001.1 AGL3", "MA0003.1 TFAP2A", "MA0004.1 Arnt", 
"MA0005.1 AG", "MA0006.1 Arnt::Ahr"), class = "data.frame", row.names = c(4L, 
2L, 5L, 1L, 3L)) 
```

现在我想选择其中具有最高值的列并将该列放在第一位。所以 1 列的值应该保持在相同的列名之下，并且整个列应该按等级移动。

我尝试了以下方法：

```
ranked<-unlist(lapply(testfr,rank))
testranked<-testfr[ranked, ] 
```

这会产生一个具有 2259obs*459vars 的数据帧，而原始数据帧是 5*459。

请注意，testfr 是从一个函数派生的 data.frame，该函数将序列打分到矩阵列表中！并将该分数返回到 data.frame 中，其中行是序列，列是矩阵。

我知道我在索引或取消列出方面做错了，但我不知道如何解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T10:49:45.523

这个怎么样？

```
> testfr[rev(order(sapply(testfr, max, na.rm = TRUE)))] 
```

分解：

```
sapply(test.fr, max, na.rm = TRUE) # get max of each column (after removing NA)
order(.) # get the order of these values in increasing order
rev(.)   # get the reverse order so that highest value index stays first
testfr[.] # get the columns in this order back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:15:54.617

我会使用`apply`可读性，

```
testfr[order(apply(testfr, 2, max, na.rm = TRUE),decreasing=T)] 
```

我在这里为每个边距、列应用 max ，然后按降序对列进行排序。

# javascript - YUI Dialog，表单提交成功后回调

> ID：15269107
> 
> 赞同：0
> 
> 时间：2013-03-07T10:46:27.800
> 
> 标签：javascript, yui

我有一个对话框弹出，它使用 YUI 库发布一个表单，到目前为止它正在工作。但是表单提交成功后如何调用另一个函数。我基本上需要从刚刚由表单提交创建的数据库表行中提取一个字段。

到目前为止，这是我的代码：

```
 var callback = {

    success: function(result) {

        form = result.responseText;

        dialog = new YAHOO.widget.Dialog('dialog1', {
            width: '400px',

            fixedcenter : "contained",
            visible : false,
            draggable: true,
            effect:[{effect:YAHOO.widget.ContainerEffect.SLIDE, duration:0.2},
                    {effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}],
            modal:true
        });

        dialog.setHeader(titleval);
        dialog.setBody(form);

        var handleCancel = function() {
            this.cancel();

        };
        var handleSubmit = function() {

            date_box = dialog.getData().date;
            reason_box = dialog.getData().reason;
            hours = dialog.getData().date_start_hours;
            mins = dialog.getData().date_start_minutes;
            format = dialog.getData().format;
            ampm = dialog.getData().date_start_meridiem;
            username = dialog.getData().user;

            //basic validation
            if(date_box == '' && reason_box == '' ){

                document.getElementById('error1').style.display = "";
                document.getElementById('error2').style.display = "";

            }else if(date_box == '' || !isDate(date_box)){

                document.getElementById('error1').style.display = "";
                document.getElementById('error2').style.display = "none";

            }
            else if(reason_box == '' && !isDate(date_box)){

                document.getElementById('error1').style.display = "";
                document.getElementById('error2').style.display = "";

            }
            else if(reason_box == ''){

                document.getElementById('error1').style.display = "none";
                document.getElementById('error2').style.display = "";

            }
            else{

                 this.submit();
                 update(date_box, hours, mins, format, ampm, reason_box, username);
            }

        };
        var myButtons = [{ text: "Save", handler: handleSubmit, isDefault: true },
                         { text: "Cancel", handler:handleCancel }];

        dialog.cfg.queueProperty("buttons", myButtons);
        dialog.render(document.body);
        dialog.show();

        document.getElementById('call_id').value = id.value;
        eval(document.getElementById('script').innerHTML);
        eval(document.getElementById('script2').innerHTML);

    }

}

var connectionObject = YAHOO.util.Connect.asyncRequest ("GET", "index.php?entryPoint=Reschedule&call_id="+id.value, callback); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:37:50.147

我相信这个页面包含答案：http: [//developer.yahoo.com/yui/container/dialog/](http://developer.yahoo.com/yui/container/dialog/)

向下滚动到标题为“提交表​​单数据”的部分。它显示了如何配置回调。

# javascript - 一个真正的 JavaScript 关键字还是只是 Notepad++ 中的一个错误？

> ID：15269111
> 
> 赞同：2
> 
> 时间：2013-03-07T10:46:44.857
> 
> 标签：javascript, jquery, oop, object, notepad++

我使用 Notepad++ 进行网络开发。当我发现这个奇怪的东西时，我正在用 JavaScript 编码。我将一个变量命名为`private`（我知道它不是 JavaScript 中的保留关键字）。但是当我输入时，它变成了蓝色（所有 JavaScript 关键字在 Notepad++ 中都显示为蓝色）。所以我认为还会有`public`,`class`和`protected`关键字。令我惊讶的是，它们也变成了蓝色！那么这是否意味着 JavaScript 具有基于类的面向对象模型以及原型模型？我检查了以下代码 -

```
public class Foo {
    private bar;
} 
```

但是控制台说 - `SyntaxError: Unexpected reserved word`。

**问题**- JavaScript 是否支持基于类的面向对象模型，或者它只是 Notepad++ 中的一个错误，还是我的语法错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:48:50.347

它是一个[保留关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，因此将来可以在不破坏现有代码的情况下添加此功能。

如果您允许`private`，那么稍后向该语言添加`private`功能将破坏任何`private`用作正常标识符的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:49:38.997

`private`and`public`是 Java 关键字，由 JavaScript 保留。

`class`是一个 ECMAScript 保留字。

对于 JavaScript 中基于 OO 类的实现，请参见**[此处](http://www.htmlgoodies.com/beyond/javascript/javascript-tutorial-functions-and-classes.html)**

# php - 多维 in_array()

> ID：15269113
> 
> 赞同：1
> 
> 时间：2013-03-07T10:46:53.000
> 
> 标签：php, jquery, xml

我正在创建实时比分网球脚本。结果以 xml 格式获取，并通过`simplexml_load_file()`. 这将创建一个多维数组。

我需要添加一个“过滤器”来显示已安排的、正在进行的或已完成的比赛。这是通过 jquery 完成的。

结构是这样的：

```
<league>
 <container>
  <match status="FT | Set 1 | 12:00|">
   ...
  </match>
  <match status="FT | Set 1 | 12:00|">
   ...
  </match>

 </container>
</league> 
```

当我遍历文件时，我输出了一个`league`div 框，然后在其中一个表中的所有匹配项。表格行包含根据过滤器切换的状态。

现在，当我过滤时，我可以切换行，但不能切换 div 框。如何检查联赛是否仅包含 FT、Only Set* 或循环前的时间格式。这样，如果它只包含一种状态，我可以给它一个类并切换联赛，而不是有一个空的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:15:44.520

我会回答我自己的。我在比赛中添加了一个计数器。如果类别包含匹配项，我会在类别框中添加一个类。在 jquery 中，我使用了 :not 选择器，它在没有特定类的情况下切换类别框。

以防万一有人正在寻找类似问题的解决方案。

# java - 我应该/我可以制定 Struts 2 约定来忘记操作的 execute() 方法吗？

> ID：15269114
> 
> 赞同：3
> 
> 时间：2013-03-07T10:46:56.823
> 
> 标签：java, struts2, crud, struts2-convention-plugin, dmi

我正在使用 Struts 2 和[struts2-convention-plugin](https://struts.apache.org/plugins/convention)迈出第一步，目前正在`SongCrudAction`使用一些典型`create()`的`edit()`、`view()`和`delete()`action 方法处理一个 CRUD 动作类 ( )。所有这些方法都用`@Action`.

通常，我想从 继承有用的默认行为`ActionSupport`，但这也包括继承`execute()`方法。

使用配置浏览器，我可以看到有一个名为`song-crud`指向它的动作。该`song-crud`操作已过时，我想摆脱它，因为我有自己的操作方法可用于所有所需的操作。我想，由于 Struts2 的约定，`song-crud`尽管我没有在任何地方声明它，但该操作是假定的。

在这种特殊情况下，一种可能的解决方案是赋予该`execute()`方法一些合理的含义，例如我可以将它用于`view()`操作。一个缺点是动作类应该根据`execute()`方法的行为重命名（或注释？）（例如`ViewSongAction`，而不是`SongCrudAction`）。否则，视图操作的 URL 将不合适（即`/view-song?id=5`比 更适合`/song-crud?id=5`）。

另一方面，重命名类也很丑陋，因为它只是一个 CRUD 而不是视图操作类。

无论如何，一般问题仍然存在：每当我从 继承时`ActionSupport`，它都会为我提供一种`execute()`方法，该方法可能对我正在做的事情有用，也可能没有用。

因此，以某种方式告诉 Struts 2 异常忘记`execute()`我的 CRUD 操作类中的方法似乎是合理的。这是对的，我怎样才能做到这一点？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:27:26.173

如果您未在操作配置中指定属性，该`execute`方法将默认运行。`method`如果你不使用[DMI](https://struts.apache.org/core-developers/action-configuration.html#dynamic-method-invocation)来运行你的方法。`ActionSupport`已经实现了`execute`方法，因为它实现[了`Action`接口](https://struts.apache.org/core-developers/action-configuration.html#action-methods)。但是下面带有感叹号的注释看起来很奇怪。

> 如果配置中没有指定执行方法和其他方法，框架将抛出​​异常。

无论如何，这是正确的，如果您有execute方法和其他方法则相反，那么将执行哪个方法？您可以省略`method`操作配置中的属性，并使用 DMI 调用操作中的任何方法，包括`execute`方法（如果未指定方法）。

# c# - 类中的 C# 命名空间

> ID：15269117
> 
> 赞同：0
> 
> 时间：2013-03-07T10:47:08.640
> 
> 标签：c#, class, inheritance, methods, nested

我对类和方法有基本的了解。我可以创建类，并为它们定义方法：

```
myClass.awesome("test"); (example) 
```

但是我看到一个类有以下方法：

```
anotherClass.something.methodName(arguments); 
```

如何创建具有附加命名空间的方法。我试过：

```
public Class test
{
    namespace subname
    {
        public void Test()
        {
            return;
        }
    }

    //also i tried:
    public void lol.Test()
    {
        return;
    }
} 
```

但是他们都说不要那样做，如何正确地做，所以我可以更好地订购/分组我的方法？

请不要问为什么，或者给个替代方案，我只想做一个有这种方法的类（`Class.sub.Method()`或`Class.sub.sub....sub.Method()`）

感谢您阅读我的问题，并可能给出答案:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T10:48:37.630

> 我看到一个类有以下方法： anotherClass.something.methodName(arguments);

该方法不是来自类`anotherClass`，而是来自 object 类`something`。

该类`anotherClass`具有另一个类类型的字段/属性`something`，该类具有方法`methodName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:52:40.007

你认为你看到的实际上是不正确的。它可以是以下任何一种：

*   `anotherClass`是命名空间，`something`是类，`methodName`是静态方法
*   `anotherClass`是对象，`something`是 的属性`anotherClass`，`methodName`是方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:07:57.083

如果你想对你的方法进行分组，你应该考虑使用这样的静态类：

```
public class Test
{
    public static class InnerGroup
    {
        public static void Method1() { }
    }
    public static class AnotherInnerGroup
    {
        public static void Method2() { }
    }
} 
```

或像这样的类属性：

```
public class Test
{
    public class InnerGroup
    {
        public static void Method1() { }
    }

    public class AnotherInnerGroup
    {
        public static void Method2() { }
    }

    public InnerGroup InnerGroup { get; set; }

    public AnotherInnerGroup AnotherInnerGroup { get; set; }

    public Test()
    {
        InnerGroup = new InnerGroup();
        AnotherInnerGroup= new AnotherInnerGroup();
    }
} 
```

希望你明白。

# wcf - WCF 服务未显示我的功能

> ID：15269125
> 
> 赞同：2
> 
> 时间：2013-03-07T10:47:23.903
> 
> 标签：wcf, web-services, asp.net-4.0

我编写了以下代码，但只有服务中的第一个方法出现在客户端，但其余两个没有:(

任何人指导我可能是什么问题？

**服务接口：**

```
[ServiceContract]
    public interface IService1
    {

       [OperationContract]
        claimantResponse SaveClaimant(claimant claimant);

        [OperationContract]
         claimantResponse RenewExpiry(claimantMin claimantMin);

        [OperationContract]
         claimantResponse getAccessCode(claimantMin claimantMin);
    } 
```

**服务实现：**

```
 public class Service1 : IService1
    {

        public claimantResponse SaveClaimant(claimant claimant)
        {
            return new claimantBLL().SaveClaimant(claimant);
        }

        public claimantResponse RenewExpiry(claimantMin claimantMin)
        {
            return new claimantBLL().RenewExpiry(claimantMin);
        }

        public claimantResponse getAccessCode(claimantMin claimantMin)
        {
            return new claimantBLL().getAccessCode(claimantMin);
        }

    } 
```

**数据：**

```
[DataMember]
public class claimantResponse 
    {
       private List<string> _ErrorMessage = new List<string>();

       [DataMember]
       public List<string> ErrorMessage
        {
            get { return _ErrorMessage; }
            set { _ErrorMessage = value; }
        }

       private List<int> _ErrorCode = new List<int>();

       [DataMember]
       public List<int> ErrorCode
       {
           get { return _ErrorCode; }
           set { _ErrorCode = value; }
       }

       [DataMember]
        public String FormStatus { get; set; }
       [DataMember]
        public DateTime ExaminationDate { get; set; }
       [DataMember]
        public String AccessCode { get; set; }
       [DataMember]
        public String Status { get; set; }
        [DataMember]
        public string temp2 { get; set; }
    } 
```

![运行服务](../Images/6eb2497b8acc0d9945f1423838c118ee.png)

它显示了两个奇怪的方法 getdata 和 getdataobject 而不是我自己的方法.. :(

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:44:47.933

您发布的代码将无法编译。由于类上的数据成员属性。

如果您然后按“仍然运行”（不记得确切的文本，但接近那个）。然后它将运行已编译的代码的最后一个版本。您看到的方法名称可能在您用于创建服务的原始模板中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T05:41:51.507

我通过简单地重新启动 Visual Studio 2012 解决了这个问题 :-)

我的问题是重命名方法和从接口中删除 OperationContract 属性并没有改变我在运行 WCF 测试客户端时看到的方法。我什至注释掉了一个方法，Visual Studio 为该方法运行了调试器！我重新启动了 Visual Studio，它恢复了正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:42:59.200

我得到了这个问题的解决方案并在这里发布，所以可能会帮助其他任何有相同情况的人：

1) 从类和属性中删除 [DataMember] 属性。2）创建一个新的 WCF 简单服务并使用相同的代码。

我确实从旧服务中删除了 datamember 属性，但它不起作用，所以我认为我的服务已损坏，因为它没有显示新服务所做的任何新方法:(

3) web.cofig 从您创建 wcf 样本时起将保持不变，在这种情况下不需要更改。

谢谢！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-05T22:58:47.623

所以我遇到了同样的问题，并且看不到任何添加的新方法，无论 Datacontract

您需要公开方法的第一件事是接口内方法上方的数据注释（属性）OperationContract，如下例所示： `[ServiceContract] public interface IService { [OperationContract] Student_Identification GetStudentIdentification(int StudentId); }`

这是我的第一个问题，但我仍然看不到它，所以我决定在引用它的应用程序中更新我的服务引用

[![在此处输入图像描述](../Images/eb5ab960233dfbf971ba51497259dfcc.png)](https://i.stack.imgur.com/HHM4u.png)

当我单击更新服务参考时，显示一条错误消息，指出无法连接到服务器。就我而言，该服务指向不同的服务器。但是我需要指向我的本地计算机，所以我点击了配置服务参考
[![在此处输入图像描述](../Images/a4e5795d2fb449d99c9a69b2a7f8adcf.png)](https://i.stack.imgur.com/c7dyF.png)

我的问题是，客户端地址设置为不同的 url，而不是我的本地开发机器。我尝试使用服务正在使用的现有 url 在我的主机文件中添加一个主机条目，但这仍然没有解决我的问题。所以我继续打开 IIS，因为我在本地设置了这个项目。选择我的网站，右键单击并选择编辑绑定...
[![在此处输入图像描述](../Images/8d86e200e28b5422ba3bdb9b77919b75.png)](https://i.stack.imgur.com/1gAzE.png)

单击添加并在服务中添加 url 地址，不要忘记将其添加到您的主机文件中以防万一。通常位于此处 -> C:\Windows\System32\drivers\etc [![在此处输入图像描述](../Images/b0621e9e354a5c188ab9e52242f6fd81.png)](https://i.stack.imgur.com/t89H3.png)

返回引用服务的应用程序，右键单击服务引用并选择更新服务引用。这对我有用，希望这对他们的旅程有所帮助。

# php - 在多维关联数组中获取值？

> ID：15269130
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:47:34.273
> 
> 标签：php, associative-array

我有一个会话数组**$_SESSION['cart']**

例如它的价值为

```
Array
(
    [0] => 
    [1] => Array
        (
            [item_id] => 1420
            [item_qty] => 1
        )
    [2] => Array
        (
            [item_id] => 1522
            [item_qty] => 1
        )
) 
```

现在假设我有**item_id = 1420**

现在我想增加 item_id = 1420 的item_qty**并且****我** 必须将它设置在该 SESSION 数组中。

 **我试过了：

```
 foreach($_SESSION['Cartquantity'] as $key => $d)
    {
         if(isset($d)) {
                   if($d['item_id'] == $_GET['item_id'])
                   {
                        $d['item_quntity'] = $d['item_quantity']+1;
                   }
           }
            else{

               }
   } 
```

它不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T10:52:12.130

您正在迭代，`$_SESSION['Cartquantity']`但告诉我们该数组存储在`$_SESSION['cart']`.

另外，这个：

```
$d['tem_quntity'] = $d['item_quantity']+1; 
```

应该：

```
$d['item_qty'] = $d['item_qty']+1; 
```

最后，您需要通过在条件中添加与号 ( ) 来进行`$d`引用。`&``foreach`

```
foreach($_SESSION['cart'] as $key => &$d)
    {
         if($d) {
                   if($d['item_id'] == $_GET['item_id'])
                   {
                        $d['item_qty'] = $d['item_qty']+1;
                   }
           }
            else{

               }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:52:18.043

使用参考 &$d

```
foreach($_SESSION['Cartquantity'] as $key => &$d)
    {
         if($d) {
                   if($d['item_id'] == $_GET['item_id'])
                   {
                        $d['tem_quntity'] = $d['item_quantity']+1;
                   }
           }
            else{

               }
   } 
```

或者

```
foreach($_SESSION['Cartquantity'] as $key => $d)
    {
         if($d) {
                   if($d['item_id'] == $_GET['item_id'])
                   {
                        $_SESSION['Cartquantity'][$key]['item_quntity'] = $d['item_quantity']+1;
                   }
           }
            else{

               }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:50:48.513

尝试检查`!empty($array)`

```
if(!empty($d)) 
```

因为它是数组，所以你需要检查它里面是否没有任何元素。

如果您想知道数组是否已定义，请使用`isset($d)`.

如果您想知道是否定义了特定键，请使用`isset($d['item_id'])`.

如果您想知道一个数组是否不为空并且有键值对，请使用`!empty($d)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T10:51:24.580

用它：

```
foreach($_SESSION['cart'] as $key => $d)
    {
         if($d) {
                   if($d['item_id'] == $_GET['item_id'])
                   {
                        $d['tem_quntity'] = $d['item_qty']+1;
                   }
           }
            else{

               }
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T10:53:22.053

改变这个

```
$d['tem_quntity'] = $d['item_quantity']+1; 
```

到

```
$d['item_qty'] = $d['item_qty']+1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T10:55:37.747

你可以打电话

```
foreach ($_SESSION['Cartquantity'] as $value))
{
  if(isset($value))
  {
   if($value['item_id'] == $_GET['item_id'])
     {
      $value['item_quntity'] = $value['item_quantity']+1;
     }
  }
  else
  {

  }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T11:04:55.490

```
foreach($_SESSION['cart'] as $key=>$val)
{
    foreach($val as $subK)
    {
       if($_GET["item_id"]==$subk["item_id"])
       {
            $_SESSION['cart'][$key]["item_id"]=$_SESSION['cart'][$key]["item_quantity"]+1;
       }
    }
} 
```**

# javascript - 使用 Javascript 检索帐户的所有子帐户

> ID：15269137
> 
> 赞同：2
> 
> 时间：2013-03-07T10:47:43.883
> 
> 标签：javascript, dynamics-crm-2011, odata, crm

我想显示一个包含帐户所有子帐户的低级树视图。但是我无法通过特定帐户的 oData 检索所有相关的子帐户。

我使用 OData 查询设计器尝试了一些建议，但我总是收到“NotFound”消息。我目前的查询是

```
http://localdev:5555/DynamicsCRM2011/xrmservices/2011/OrganizationData.svc/AccountSet(guid'19F4DA91-B0FD-E111-BAA8-00155D03A50D')/account_parent_account 
```

关系是 1:N。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:46:06.140

要获取相关记录，您必须使用 $expand，如下所示：

```
/AccountSet?$expand=opportunity_customer_accounts 
```

[在此处](http://msdn.microsoft.com/en-us/library/gg309461.aspx#BKMK_expand)查看更多示例。

# python - 分叉对现有 mysql 连接的影响

> ID：15269140
> 
> 赞同：0
> 
> 时间：2013-03-07T10:47:58.443
> 
> 标签：python, mysql, mysql-python

我有一台服务器，它/应该能够同时处理很多连接。现在有时我有一个错误：“在查询期间丢失了与 MySQL 服务器的连接”。当时我正在解决这个问题

```
def mysql_handling(string):
    global cursor
    tries=0
    while True:
        if tries<5:
            try: 
                cursor.execute(string)
                if 'SELECT' not in string:
                    db.commit()
                break
            except MySQLdb.Error, e:
                print("Error %d: %s" %(e.args[0], e.args[1]))
                cursor.close() 
                time.sleep(0.1)
                cursor = get_cursor() #setting up a new mysql connection
                #mysql_error_tracking(string)
                tries+=1
        else:
            sys.exit(1) 
```

所以现在我能够同时处理很多连接，但有时我有这个错误（丢失连接。）我想知道在哪个查询发生这种情况，以及其中是否存在某种模式。所以为了跟踪这个，我还想用一个有点像这样的脚本将它存储在 mysql-database 中：

```
def mysql_error_tracking(string):
    #Clone/fork
    try:
        error_serv = os.fork()
    except:
        print "error_FORK failed!"

    if error_serv:
        print 'there is a MYSQL-ERROR, SAVE!!!'

        cursor.execute("SELECT count FROM query_errors WHERE string= "+"'"+str(string)+"'")
        data=cursor.fetchone()
        print data
        if data is None:
            cursor.execute("INSERT INTO query_errors (string) VALUES ("+"'"+str(string)+"')")
            db.commit()
            print 'insert in queries'
        else:
            cursor.execute("UPDATE query_errors SET count=count+1 WHERE string= "+"'"+str(string)+"'")
            db.commit()
            print 'count ploes 1'
        sys.exit(0) 
```

这确实有效，但是**分叉**​​连接似乎真的给已经存在的 mysql-connection 带来了压力，而不是不分叉更好吗？

# vba - 如何在 VB 中运行 SQL 选择语句

> ID：15269146
> 
> 赞同：0
> 
> 时间：2013-03-07T10:48:19.987
> 
> 标签：vba, ms-access

我一直在环顾四周，但似乎无法找到如何做到这一点。

我正在尝试在 VB 中执行一个 SELECT sql 语句，该语句从表单中获取参数。例如，用户选择 From 和 To 日期，SQL 应该采用他们选择的内容。

我知道您不能对 SELECT SQL 使用 DoCmd.Execute 方法，所以我需要打开记录集 - 但是如何？这是我迄今为止尝试过的

```
Dim recordSet As DAO.recordSet
Dim SQL As String

SQL = "SELECT * FROM tblWebMeetingData"
Set recordSet = CurrentDb.OpenRecordset(SQL)

'More code in here

recordSet.Close

Set recordSet = Nothing 
```

因为这个执行没有错误，我假设它实际上得到了结果 - 那么有没有办法查看它实际返回的内容？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:57:37.130

第一：将记录集重命名为 rs 是一个很好的建议，例如，因为“记录集”是保留名称。这是误解。

此记录集包含您通过 SQL 语句查询的记录。您可以通过 访问这些数据`rs.fields("fieldname").value`。使用 移动到下一个记录集`rs.movenext`。

为了合并表单的控制值，我使用了在打开记录集之前构建完整 SQL 语句的方法。假设表单名为“myform”，控件名为“mycontrol”，您可能会编写某种

```
SQL = "SELECT * FROM tblWebMeetingData WHERE myfield = " & forms!myform.mycontrol.value 
```

请确保表单只包含有效值，因为任何格式错误的值都会直接导致 SQL 执行错误。

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:13:56.093

在这里，您获得了有关迭代 trought RecordSet 并使用其中的值的示例代码（希望对您有所帮助）：

```
Dim i As Integer
Do While Not rs.EOF
        Sheets("D_" & day).Cells(i, 1) = rs.Fields(0).Value
        Sheets("D_" & day).Cells(i, 2) = rs.Fields(1).Value
        rs.MoveNext
        i = i + 1
Loop

rs.Close 
```

# sql - 循环动作

> ID：15269150
> 
> 赞同：1
> 
> 时间：2013-03-07T10:48:23.433
> 
> 标签：sql, database, vb.net

我是 Visual Basic 的新手，但是我需要遍历数据表中的行并在测试脚本中使用这些值，脚本如下 -

```
Public Function TestMain(ByVal args() As Object) As Object
    StartApp(URL)

    ' HTML Browser '
    Browser_HtmlBrowser(Document_HomePage(),DEFAULT_FLAGS).Maximize()

    Button_AddNewProfilesubmit().Click()

    'here is where the rows would be read and the loop would start'

    Text_Ctl00MainContentProfileNa().Click(AtPoint(6, 13))
    Browser_HtmlBrowser(Document_Http1921685526UserCon(), DEFAULT_FLAGS).InputChars("dataBase_Row_Value")
    Table_HtmlTable_1().Click(AtCell( _
                                    AtRow(AtIndex(0)), _
                                    AtColumn(AtIndex(1))))

    'here is where the loop would end after all rows had been read'

    Return Nothing
End Function 
```

我有一个想法来实现这一点，首先做一个数据库连接，然后创建循环 -

```
 Dim pName As String
    Dim datas As DataSet
    Dim datar As DataRow
    Dim oledat As SqlDataAdapter
    oledat = New SqlDataAdapter("SELECT COLUMN FROM DATABASE",ConnectionString)
    oledat.Fill(datas)
    For Each datar In datas.Tables(0).Rows
        pName = datar.Item("PROFILENAME")

        Text_Ctl00MainContentProfileNa().Click(AtPoint(6, 13))
        Browser_HtmlBrowser(Document_Http1921685526UserCon(), DEFAULT_FLAGS).InputChars(pName)
        Table_HtmlTable_1().Click(AtCell( _
                                    AtRow(AtIndex(0)), _
                                    AtColumn(AtIndex(1))))
    Next 
```

然而，这是破坏性的，即使 Visual Studio 中没有错误，也只有在`datas`分配值之前使用的警告。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:03:48.010

我相信您必须在使用新数据集之前对其进行初始化。例子：

```
Dim ds As DataSet = New DataSet()
Dim connection As OleDb.OleDbConnection
Dim command As OleDb.OleDbCommand
Dim adapter As New OleDb.OleDbDataAdapter
Dim connString As String = "my Connection string stuff;"

connection = New OleDb.OleDbConnection(connString)
Try
    'open the connection
     If connection.State = ConnectionState.Open Then
     Else
          connection.Open()
     End If
     'fill each data table
     command = New OleDb.OleDbCommand(selectOne, connection)
     adapter.SelectCommand = command
     adapter.Fill(ds, "someTableName")
 Catch ex As OleDb.OleDbException
   'error, do something
 Finally
    'close everything down
    adapter.Dispose()
    If (Not command Is Nothing) Then
        command.Dispose()
    End If
    connection.Close()
End Try 
```

此示例使用 OLEDB，但应该与您正在执行的操作相当。一旦你填写它，你应该能够迭代表。但是，首先，检查以确保您首先创建了一个数据集：

```
If (ds IsNot Nothing) Then
  'do for statement here
End If 
```

如果这不起作用，请告诉我。

# c# - 通过 listview 和 textbox sql server compact 4 更新数据

> ID：15269153
> 
> 赞同：1
> 
> 时间：2013-03-07T10:48:27.617
> 
> 标签：c#, database, listview

我做了一个数据库应用程序。目前我有一个添加和删除功能，但现在我正在寻找更新功能的帮助。我已经在整个网站上搜索了答案，但我想没有运气。所以我想要的是，如果我单击 ListView 中的记录，它会自动显示在文本框中，以便我可以更改内容，并且当我单击“更新”按钮时，它必须更新记录。

帮助将不胜感激！

我的Form1代码

```
 public SqlCeConnection conn = new SqlCeConnection(@"Data Source=E:\Users\Ali\Documents\automail.sdf");

    ////////////////////////////////////Methodes////////////////////////////////////

    private void Populate()
    {
        SqlCeCommand cm = new SqlCeCommand("SELECT * FROM Emails ORDER BY principalID", conn);
        listView1.Items.Clear();

        try
        {
            SqlCeDataReader dr = cm.ExecuteReader();

            while (dr.Read())
            {
                ListViewItem it = new ListViewItem(dr["principalID"].ToString());
                it.SubItems.Add(dr["email"].ToString());
                it.SubItems.Add(dr["query"].ToString());
                it.SubItems.Add(dr["subject"].ToString());
                listView1.Items.Add(it);        
            }

            dr.Close();
            dr.Dispose();
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            Application.ExitThread();
        }
    }

    ////////////////////////////////////Methodes////////////////////////////////////

    // Insert button (for data insert)
    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == "" || textBox2.Text == "" || textBox3.Text == "")
        {
            MessageBox.Show("Fill in all the information first!");
        }
        else
        {
            SqlCeCommand cmd = new SqlCeCommand("INSERT INTO Emails(principalID, email, query, subject) VALUES(@principalID, @email, @query, @subject)", conn);
            cmd.Connection = conn;
            cmd.Parameters.AddWithValue("@principalID", textBox1.Text);
            cmd.Parameters.AddWithValue("@query", textBox2.Text);
            cmd.Parameters.AddWithValue("@email", textBox3.Text);
            cmd.Parameters.AddWithValue("@subject", textBox4.Text);
            try
            {
                int affectedrows = cmd.ExecuteNonQuery();
                if (affectedrows > 0)
                {
                    Populate();
                    MessageBox.Show("Email added successfully!");    
                }
                else
                {
                    MessageBox.Show("Failed to add email!");
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

        } 

    }
    //if form shown update listview
    private void Form1_Shown(object sender, EventArgs e)
    {
        try
        {
            conn.Open();
            Populate();
        }

        catch (SqlCeException ex)
        {
            MessageBox.Show(ex.Message);
            Application.ExitThread();
        }

    }
    //open form 2 and hide this
    private void button2_Click(object sender, EventArgs e)
    {
        this.Hide();
        Form2 form2 = new Form2();
        form2.Show();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
    //if listview selected enable button, else disable
    private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (listView1.SelectedItems.Count > 0)
        {
            button3.Enabled = true;
        }

        else
        {
            button3.Enabled = false;
        }

    }

    private void button3_Click(object sender, EventArgs e)
    {

    }
    //delete record button
    private void button3_Click_1(object sender, EventArgs e)
    {
        if (listView1.SelectedItems.Count <= 0)
        {
            MessageBox.Show("Select a record!");
        }
        else
        {
            for (int i = 0; i < listView1.SelectedItems.Count; i++)
            {
                SqlCeCommand cm = new SqlCeCommand("DELETE FROM Emails WHERE principalID = @principalID", conn);
                cm.Parameters.AddWithValue("@principalID", listView1.SelectedItems[0].Text);

                try
                {
                    cm.ExecuteNonQuery();
                    Populate();
                }

                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }   
        }
    }

    private void button2_Click_1(object sender, EventArgs e)
    {
        if (listView1.SelectedItems.Count > 0)
        {
            ListViewItem itm = listView1.SelectedItems[0];
            string principalid = itm.SubItems[0].Text;
            string query = itm.SubItems[1].Text;
            string email = itm.SubItems[2].Text;

            Form2 form2 = new Form2();

            form2.Show();

            form2.PrincipalID = principalid;
            form2.Query = query;
            form2.Email = email;

        }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:54:58.390

你为什么使用listview。你可以使用datagridview。你可以将数据库文件与datagridview绑定，这将创建更新、选择和插入命令本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:22:34.720

我不明白你为什么不能这样做。在列表视图中更新项目相对容易。

您需要`EditItemTemplate`为您的 , 创建 ,`ListView`以便文本框出现在要编辑的行中。

你可以在`ItemEditing`事件中处理这个。然后你通过`ItemUpdating`事件处理更新`ListView`。

下面我发布了一个示例：它可能会对您有所帮助：

像这样创建您的 ListView 标记：

```
<asp:ListView ID="lvwTest" runat="server" OnItemDeleting="lvwTest_ItemDeleting" OnItemEditing="lvwTest_ItemEditing"
            OnItemUpdating="lvwTest_ItemUpdating">
            <LayoutTemplate>
                <table>
                    <tr>
                        <td>
                            Column1
                        </td>
                        <td>
                            Column2
                        </td>
                        <td>
                            Column3
                        </td>
                        <td>
                            Action
                        </td>
                    </tr>
                    <tr id="itemplaceholder" runat="server">
                    </tr>
                </table>
            </LayoutTemplate>
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:Label ID="lbl1" runat="server" Text='<%#Eval("col1") %>'></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="Label1" runat="server" Text='<%#Eval("col2") %>'></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="Label2" runat="server" Text='<%#Eval("col3") %>'></asp:Label>
                    </td>
                    <td>
                        <asp:Button ID="btnEdit" CommandName="Edit" runat="server" Text="Edit" />
                    </td>
                </tr>
            </ItemTemplate>
            <EditItemTemplate>
                <tr>
                    <td>
                        <asp:TextBox ID="txt1" runat="server" Text='<%#Bind("col1") %>'></asp:TextBox>
                    </td>
                    <td>
                        <asp:TextBox ID="txt2" runat="server" Text='<%#Bind("col2") %>'></asp:TextBox>
                    </td>
                    <td>
                        <asp:TextBox ID="txt3" runat="server" Text='<%#Bind("col3") %>'></asp:TextBox>
                    </td>
                    <td>
                        <asp:Button ID="btnUpdate" CommandName="Update" Text="Update" runat="server" />
                        <asp:Button ID="btnCancel" CommandName="Cancel" Text="Cancel" runat="server" />
                    </td>
                </tr>
            </EditItemTemplate>
        </asp:ListView> 
```

所以基本上你已经创建了`EditItemTemplate`.

看看如何在最后一列`ItemTemplate`有一个按钮“ ”，并有两个按钮“ ”和“ ”，而不是用适当的那个。`btnEdit``EditItemTemplate``btnUpdate``btnCancel``CommandName`

现在这里是您的活动：

物品编辑：

```
protected void lvwTest_ItemEditing(object sender, ListViewEditEventArgs e)
 {
            lvwTest.EditIndex = e.NewEditIndex;
 } 
```

物品更新：

```
protected void lvwTest_ItemUpdating(object sender, ListViewUpdateEventArgs e)
 {
    TextBox txt = (lvwTest.Items[e.ItemIndex].FindControl("txt1")) as TextBox;
    //as above find othe textboxes as well/

     //create your update query
    //SqlCeCommand cmd = new SqlCeCommand(updateQuery, cn);
    //and rest of the syntax
    lvwTest.EditIndex = -1;
    BindGrid();
 } 
```

您的数据源：

```
public void BindGrid()
        {
            DataTable db = new DataTable();
            db.Columns.Add("col1");
            db.Columns.Add("col2");
            db.Columns.Add("col3");
            db.Rows.Add("1", "2", "3");
            db.Rows.Add("1", "2", "3");
            db.Rows.Add("1", "2", "3");

            lvwTest.DataSource = db;
            lvwTest.DataBind();
        } 
```

内页的`Page_Load`

```
if (!IsPostBack)
      BindGrid(); 
```

# java - iText Java 到 PDF：如何输出 JPanel 而无需将其添加到容器

> ID：15269154
> 
> 赞同：2
> 
> 时间：2013-03-07T10:48:30.007
> 
> 标签：java, swing, pdf-generation, jpanel, itext

我有一个 Java 应用程序，它有一个 JPanel，其中包含我想要输出到 PDF 的信息（使用 iText）。唯一的转折是我需要在 PDF 上给这个 JPanel 一个不同的格式。由于 JPanel 显示在 GUI 上，因此我无法将其更改为我希望在 PDF 上显示的方式，因为这会更改显示的 JPanel。所以我要做的是用我的 PDF 格式创建一个新的 JPanel，用原始的信息填充它，然后将这个新的输出到 PDF。到目前为止没问题，除了我只能将此 JPanel 输出到 PDF 如果它被添加到容器中。显然我不希望它出现，因为我不希望显示这个新的 JPanel。我什至试图将它设置为不可见，但这样它也不会被输出。

新的JPanel：

```
JPanel myFormattedPanel = new JPanel(); {
myFormattedPanel.setLayout(new GridLayout(2, 3, 0, 2));
myFormattedPanel.setBackground(Color.WHITE);

(...)

getContentPane().add(myFormattedPanel); //How to not need this?? 
```

输出为 PDF：

```
Document document = new Document();
PdfWriter writer = PdfWriter.getInstance(document, out);
document.open();

PdfContentByte cb = writer.getDirectContent();

float width = PageSize.A4.getWidth();
float height = PageSize.A4.getHeight() / 2;

PdfTemplate resultsPanelPdfTemplate = cb.createTemplate(width, height);
Graphics2D g2d2 = new PdfGraphics2D(resultsPanelPdfTemplate, width, height);
myFormattedPanel.paint(g2d2);
g2d2.dispose();
cb.addTemplate(resultsPanelPdfTemplate, 0, 0);

document.close(); 
```

所以基本上，使用 iText 将 JPanel 输出到 PDF 的方法是什么，而不必将其添加到容器中，或者至少不必使其可见？

首先十分感谢。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:03:21.723

*   用于`setSize`为组件提供空间以绘制其内容。`getPreferredSize`如果您想获得推荐的尺寸，您可以使用
*   使用`printAll`而不是`paint`. `printAll`不是双缓冲的，也不会遭受 NullPointerException （根据经验可能在 Windows 下发生）

# mysql - Mysql查询，需要一些帮助。异或运算

> ID：15269159
> 
> 赞同：0
> 
> 时间：2013-03-07T10:48:38.650
> 
> 标签：mysql

我有一个带有 isbn 和书名的 Books 表，我有一个带有 oisbn（外键）和 ocid（外键，购买该书的客户 ID）的表 orders。一种

我想列出那些只订购了 ocid=123 或 ocid = 567 的客户的 cid，而不是两者。有点像异或。

我如何在mysql中完成这个？我想了很久，还是想不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:57:18.873

```
SELECT
foo
FROM
bar
WHERE ocid IN (123, 567)
GROUP BY customerId
HAVING COUNT(*) = 1 
```

# python - 在 Python 中，如何将元组列表加入一个列表？

> ID：15269161
> 
> 赞同：28
> 
> 时间：2013-03-07T10:48:43.627
> 
> 标签：python, tuples

继我之前的问题[如何将列表项分组到元组中？](https://stackoverflow.com/questions/15266593/how-to-group-list-items-into-tuple)

例如，如果我有一个元组列表

```
a = [(1,3),(5,4)] 
```

如何解压缩元组并将其重新格式化为一个列表

```
b = [1,3,5,4] 
```

我认为这也与`iter`功能有关，但我真的不知道该怎么做。请赐教。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-07T10:51:18.477

```
b = [i for sub in a for i in sub] 
```

那会成功的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-07T10:53:47.903

```
In [11]: list(itertools.chain(*a))
Out[11]: [1, 3, 5, 4] 
```

如果你只需要迭代`1, 3, 5, 4`，你可以摆脱`list()`调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T10:53:26.483

只需遍历列表 a 并解压缩元组：

```
l = []
for x,y in a:
   l.append(x)
   l.append(y) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T10:54:24.937

其他方式：

```
a = [(1,3),(5,4)]
b = []

for i in a:
    for j in i:
        b.append(j)

print b 
```

这只会处理列表 (a) 中的元组。如果您也想解析松散变量，则需要添加 if-else 语句，例如；

```
a = [(1,3),(5,4), 23, [21, 22], {'somevalue'}]
b = []

for i in a:
    if type(i) == (tuple) or type(i) == (list) or type(i) == (set):
        for j in i:
            b.append(j)
    else:
        b.append(i)

print b 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T10:51:57.653

```
import itertools
b = [i for i in itertools.chain(*[(1,3),(5,4)])] 
```

# sql - 条件相同的案例陈述

> ID：15269164
> 
> 赞同：0
> 
> 时间：2013-03-07T10:48:53.340
> 
> 标签：sql, sql-server, case

我想知道“ONE”（大写）何时会打印在下面的代码中？？

```
CREATE PROCEDURE TESTCASE
@ID bigint 
AS DECLARE
@VAR bigint     
BEGIN

SELECT 
CASE @ID 
    WHEN 1 THEN 'One'
    WHEN 2 THEN 'Two'
    WHEN 1 THEN 'ONE'
END

END

EXEC TESTCASE 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:51:13.433

它永远不会被打印出来。当`ID`为 1 时，第一个`WHEN`将被执行，case 语句将退出。

# nagios - nagios 从哪里运行自定义插件

> ID：15269167
> 
> 赞同：1
> 
> 时间：2013-03-07T10:49:09.440
> 
> 标签：nagios

我正在使用 nagios 3.2 进行监控。我有一个自定义插件，我已经放置在...

/usr/local/nagios/libexec，用于 nagios 监控。

我的自定义插件读取配置文件以正常运行。并且此配置文件应位于同一目录中。

形成这个目录（../nagios/libexec），我可以执行二进制文件。

但是，当 nagios 尝试运行它时，它无法读取关联的配置文件。

已尝试故障排除：-

1.) 我已授予二进制文件和配置文件的完全权限

-rwsrwxrwx 1 root root 2102 Mar 7 04:53 ------.properties -rwsrwxrwx 1 root root 2079462 Mar 6 12:03 二进制

请让我知道 nagios 是否从任何其他目录运行自定义插件？或任何其他建议...

谢谢， 鲁契尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:31:09.647

检查 /usr/local/nagios/etc/resource.cfg $USER1$ 变量。它指向插件目录。您的插件是否需要任何权限才能访问特定的目录或其他东西？可能 nagios 用户无权访问它，或者您需要将 nagios 添加到 sudoers。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:36:20.993

因此，我可以通过用提供目录（PWD）的脚本替换插件来找出答案，并发现它正在从 / （根）目录运行 nagios 守护进程。

所以我把我的配置文件放在那里并且它工作了。

谢谢大家的建议！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T04:40:47.370

这个插件是用什么语言编写的（这有时会影响插件处理环境变量的方式）？您是否尝试过在插件中使用配置文件的完整路径（不仅仅是“./conffile”）？如果您向 Nagios 用户发送并尝试执行所述插件（使用配置），它是否有效？

# scala - 使用附加隐式参数实现特征的方法

> ID：15269169
> 
> 赞同：7
> 
> 时间：2013-03-07T10:49:25.037
> 
> 标签：scala, implicit, traits

我想要一个对象来实现特征`Iterable`并将一个额外的隐式参数传递给实现的方法：

```
object MyRepository extends Iterable[Something] {

  def iterator(implict entityManager: EntityManager): Iterator[Something] = ...

} 
```

显然这不起作用，因为该`iterator`方法没有隐式参数，因此不是由上面显示的方法实现的。

一个示例用例是`map`我想应用于存储库值的方法：

```
 def get = Action {
     Transaction { implicit EntityManager => 
       val result = MyRepository.map(s => s ...)
     }
   } 
```

有没有办法实现`Iterable`特征并捕获隐式参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T11:24:41.253

鉴于`Iterable.iterator`在其签名中没有 this 隐式，您不能期望在添加 this 隐式时能够实现此方法：那将是另一种方法（特别是另一个重载）。

但是，如果`MyRepository`是类而不是对象，则可以捕获类构造函数中的隐式。如果你想保持相同的使用风格（如`MyRepository.map{ ... }`而不是`new MyRepository.map{ ... }`），你可以做的是提供从对象到类的隐式转换。

这是一个例子：

```
object MyRepository {  
  class MyRepositoryIterable(implicit entityManager: EntityManager) extends Iterable[Something] {
    def iterator: Iterator[Something] = ???
  }
  implicit def toIterable(rep: MyRepository.type)(implicit entityManager: EntityManager): MyRepositoryIterable = new MyRepositoryIterable
} 
```

当你这样做时，现在发生的事情`MyRepository.map(...)`是对象被隐式转换为`MyRepositoryIterable`捕获隐式`EntityManager`值的实例。`MyRepositoryIterable`是实际实现的类`Iterable`。

# android - 无法使用 AlarmManager 设置闹钟

> ID：15269170
> 
> 赞同：0
> 
> 时间：2013-03-07T10:49:30.823
> 
> 标签：android, alarmmanager, alarm

我已经尝试了很多次，但没有。

这是应该设置警报的类的代码，但在指定的时间和日期没有任何反应。

```
package com.beppe.reminder;

import java.util.Calendar;
import java.util.Date;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.provider.AlarmClock;

public class ReminderManager {

private Context mCtx;
private AlarmManager alarm;

public ReminderManager(Context Ctx){
    mCtx=Ctx;

}

public void setAlarm(Date d, long taskID){

    alarm=(AlarmManager) mCtx.getSystemService(Context.ALARM_SERVICE);

    Intent intent=new Intent(mCtx, OnAlarm.class);
    intent.putExtra(DBAdapter.KEY_ROWID, taskID);

    PendingIntent pi=PendingIntent.getBroadcast(mCtx, 0, intent, PendingIntent.FLAG_ONE_SHOT);

    Calendar cal = Calendar.getInstance();
    cal.setTimeInMillis(System.currentTimeMillis());
    cal.clear();
    cal.set(d.getYear()+1900,d.getMonth(),d.getDate(),d.getHours(),d.getMinutes());

    alarm.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pi);
}

} 
```

这条线`d.getYear()+1900`是因为 Date 类从 1900 年返回年份。

我试图打印日期和时间，它们似乎是正确的（月份正确地是从零开始的 int）。

如果警报设置正确，我可以在哪里看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:00:17.793

```
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);                 

                //---get current date and time---
                Calendar calendar = Calendar.getInstance();       

                //---sets the time for the alarm to trigger---
                calendar.set(Calendar.YEAR, datePicker.getYear());
                calendar.set(Calendar.MONTH, datePicker.getMonth());
                calendar.set(Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth());                 
                calendar.set(Calendar.HOUR_OF_DAY, timePicker.getCurrentHour());
                calendar.set(Calendar.MINUTE, timePicker.getCurrentMinute());
                calendar.set(Calendar.SECOND, 0);

                //---PendingIntent to launch activity when the alarm triggers---                    
                Intent i = new Intent("net.learn2develop.DisplayNotification");

                //---assign an ID of 1---
                i.putExtra("NotifID", 1);                                

                PendingIntent displayIntent = PendingIntent.getActivity(
                    getBaseContext(), 0, i, 0);               

                //---sets the alarm to trigger---
                alarmManager.set(AlarmManager.RTC_WAKEUP, 
                    calendar.getTimeInMillis(), displayIntent);
            } 
```

请参考此链接。 [http://mobiforge.com/developing/story/displaying-status-bar-notifications-android](http://mobiforge.com/developing/story/displaying-status-bar-notifications-android)

# iphone - 播放库中的视频并同时通过相机录制视频 - Objective c

> ID：15269172
> 
> 赞同：4
> 
> 时间：2013-03-07T10:49:35.807
> 
> 标签：iphone, ios, objective-c, xcode

我正在构建一个应用程序，它可以播放库中的视频，同时使用相机录制视频。是否可以同时观看视频和录制视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:00:35.837

[这里是链接 iPhone 媒体库中的示例，用于在此处](https://github.com/yfujiki/FGallery-with-Video)提供图像和视频支持

# powershell - Powershell：使用 x86 powershell/ise 运行的脚本

> ID：15269176
> 
> 赞同：1
> 
> 时间：2013-03-07T10:49:48.027
> 
> 标签：powershell

我创建的脚本使用仅适用于 32 位版本的 powershell 的组件。

默认情况下，windows 使用 powershell x64 执行脚本，它会导致几个错误。

是一种在脚本开头设置值以强制 Windows 使用 powershellx86 而不是 x64 的方法吗？

例子：

```
using powershell(x86).exe

scriptblock 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:10:35.047

你不能只启动“powershell(x86).exe”文件吗？

%SystemRoot%\syswow64\WindowsPowerShell\v1.0\powershell.exe

/弗雷德里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:34:12.190

没有直接的方法可以做到这一点，但是有一种方法可以在 x64 主机中调用另一个 Powershell 主机实例，该实例也可能是 x86。**$env:PROCESSOR_ARCHITECTURE**将告诉您正在运行的 Powershell 主机版本。

只是一个草图，用凿子和砂纸完成。

```
function Execute-Scriptx86
{
    param(
    [Parameter(Mandatory=$True,Position=1)]
    [string]$ScriptFile
    )

    if($env:PROCESSOR_ARCHITECTURE -eq "AMD64")
    {
        $powershellx86 = $env:SystemRoot + "\syswow64\WindowsPowerShell\v1.0\powershell.exe"
        & $powershellx86 -File $ScriptFile
    }
    else
    {
        & $ScriptFile
    }
} 
```

# ios - UITapGestureRecognizer 不适用于 UIButton

> ID：15269181
> 
> 赞同：0
> 
> 时间：2013-03-07T10:49:56.607
> 
> 标签：ios, objective-c, uibutton, uitapgesturerecognizer

```
UITapGestureRecognizer *PressRecognizer1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handlePress:)];
        [PressRecognizer1 setNumberOfTouchesRequired:1];
         [firstBtn addGestureRecognizer:PressRecognizer1];

-(void)handlePress:(UITapGestureRecognizer*)PressRecognizer {

    NSLog(@"working");
      if (PressRecognizer.state == UIGestureRecognizerStateBegan) {
          UIButton *whichButton=(UIButton *)[PressRecognizer view];
          NSLog(@"whichButton %d\n",whichButton.tag);
          if (whichButton.tag == 0) {
              NSLog(@"currentImageId1 %d",currentImageId1);
              [delegate imageZoom:currentImageId1];
          } 
```

我创建了一个`UITabelView`自定义单元格，每行有三个图像。当点击一个名为的图像`hadlePress`方法时。但如果条件，我不会先进入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:37:52.340

来自苹果文档：

尽管轻击是离散的手势，但它们对于手势识别器的每个状态都是离散的；因此，相关的动作消息在手势开始时发送，并针对每个中间状态发送，直到（包括）手势的结束状态。因此，处理轻击手势的代码应该测试手势的状态，例如：

```
- (void)handleTap:(UITapGestureRecognizer *)sender {
     if (sender.state == UIGestureRecognizerStateEnded)     
     {         
          // handling code     
     } 
} 
```

如果您在方法中使用 NSLog(@"%d",sender.state) （在 if 语句之前），您将看到该方法仅在 UIGestureRecognizerStateEnded 状态下被触发，因此您应该更改您的

```
if (PressRecognizer.state == UIGestureRecognizerStateBegan) 
```

到

```
if (PressRecognizer.state == UIGestureRecognizerStateEnded) 
```

# javascript - 多次动态更改 div 标签的内容

> ID：15269182
> 
> 赞同：1
> 
> 时间：2013-03-07T10:49:59.493
> 
> 标签：javascript, html

我曾经使用过更改了`div`标签 的内容

```
document.getElementById("di").innerHTML = content; 
```

在更改的内容中，我有一个正在调用函数的按钮，我希望该函数将同一`div`标签的内容再次更改为其他。我试过做同样的事情，即使用

```
document.getElementById("di").innerHTML = content2; 
```

但它不起作用。可以使用其他方式完成，还是当前方法有什么问题？

```
function change(){
    document.getElementById("di").innerHTML = "";
    var content = "<span class='senr'><input type='button' value='sender' onclick='sen()'></input></span>";
    document.getElementById("di").innerHTML = content;
}
function sen(){
    document.getElementById("di").innerHTML = "";
    var content1="<span class='prp'>hello</span>";
    document.getElementById("di").innerHTML = "content1";
}

 <div onclick="change()">welcome to page!</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T23:37:41.187

它在这里工作： http: [//jsfiddle.net/1j01/AXcZx/0/](http://jsfiddle.net/1j01/AXcZx/0/) 注意设置“ `No wrap - in <body>`​​”。这是因为 onload 选项将源代码包装在一个函数中，使得源代码中的函数无法从 DOM 中访问。您不应该将事件处理程序放在属性中。

这里是代码中定义的事件处理程序：http: [//jsfiddle.net/1j01/AXcZx/1/](http://jsfiddle.net/1j01/AXcZx/1/)`<body>`这在or 的末尾起作用`onload`。此外，将元素的引用存储在变量中是一个好习惯，这样您就不必每次都在文档中搜索它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T10:59:17.997

这是在按钮上调用的 ajax 函数，文件名是带有替换此 div 的 html 代码的文件

```
 function functionname(id){                                                   
        var p_url=filename,
        jQuery.ajax({          
        type: "GET",
           url: p_url,                   
           data: "&id=" +id+',
            success: function(data) {
             jQuery(".classnameoddiv").html(data);
        }                                                                                                                                                                                                  
         });                                                                                                                        
        } 
```

# python - 一个脚本中的多个图形 - matplotlib

> ID：15269184
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:50:08.093
> 
> 标签：python, image, matplotlib, figure

我正在处理一项任务，其中涉及在脚本运行时需要在屏幕上显示多个数字（以及保存它们）。我必须同时使用 imshow 和 show 才能将图像显示在屏幕上。这很好用，但我读过 show() 每个脚本只能使用一次。还有另一种显示图像的方法吗？保存的图像文件也保存为空白 800x600 白色图像。这是我的代码：

```
img = np.zeros((100,100))
plt.figure(0)
plt.imshow(img)
plt.show()
plt.savefig("images/img.png")
plt.close(0) 
```

每个其他图形都遵循相同的语法（显然具有不同的图像名称和新的图形编号。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:20:40.347

通常，`figure()`如果这是您想听到的，您可以使用为要在屏幕上显示的每个图形创建一个新图形对象并保存到文件的方法。

我不确定您在这方面的实际问题是什么，因此如果您还想知道其他问题，我会认真建议您编辑您的问题。

关于第二个问题：根据使用的后端，`show()`可能会破坏图中的对象（关闭时），这就是为什么你通常应该`savefig()`先`show()`. 这[在此处](http://matplotlib.org/faq/howto_faq.html#use-show)记录。

# android - 如何从非root手机中获取正在运行的应用程序中的数据

> ID：15269190
> 
> 赞同：0
> 
> 时间：2013-03-07T10:50:30.540
> 
> 标签：android

我正在写一些关于 Android 设备的小型安全报告，这些报告通常与从 RAM 访问信息有关。主要条件是设备最初是无根的。

用例：用户打开 3rd-party 应用程序，在密码字段中输入一些密码。之后，该正在运行的应用程序会丢失设备。此应用程序的源代码显示此密码信息在应用程序启动并运行时在 RAM 中可用。例如在公共字符串 myPassword 中的 AllMyAppPasswords 类中。现在是关于访问此密码信息的可能方法的问题（如果我错了，请纠正我）：

1.  访问这个密码的方法是转储内存。
2.  对于内存转储，我需要让设备植根。
3.  为了根设备，我需要解锁引导加载程序。
4.  要实现解锁引导加载程序和 root 操作，需要至少重新启动设备一次。
5.  设备重新启动后，有关密码的信息从 RAM 中消失了

结论：如果设备是非 root 的，则无法从应用程序获取驻留在 RAM 内存中的密码。这是对的吗？

用例更新：我们假设用户刚刚拆箱新设备并且 100% 确定它没有被 root 并且不包含任何键盘记录应用程序。所以用户刚刚安装了我的应用程序，输入了密码，并且应用程序在运行时在内部使用这个密码来定期连接服务器（密码只有 RAM，从不存储在磁盘上）。因此，从视觉上看，编辑文本字段中没有任何内容，有关密码的信息仅在应用程序内存中供内部使用，当然不可能仅从屏幕上读取密码文本。现在用户丢失了他的手机。用户是否应该担心找到他手机的人可以从 RAM 中获取此密码信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:45:23.183

虽然不是该领域的亲身实践者，但我会声称我的兴趣肯定高于平均水平，以下是我的想法。不过，并不是说您可能不知道这一点。

*   是的，Linux 保护进程内存免受其他普通用户（root 不是普通用户）的影响。
*   我不明白为什么在您描述的场景中，找到手机的人不会简单地将有问题的应用程序带到前台并显示所有机密信息，因为您的场景已经假设找到设备的人可以成功解锁它，并且该应用程序仍在运行。
*   但是，我怀疑（受您假设的*AllMyAppPasswords*类的启发）您打算构建一个类似于以下内容的参数：*如果我的“密码安全”应用程序启动并识别出设备未植根，则需要重新启动才能改变这一事实，并且由于在非 root 设备上无法访问我的应用程序的内存，因此在 RAM 中保存解密的机密信息是安全的*。如果这符合您的预期理由，我想请您注意以下方面。
    *   即使您应用了字节码混淆器，从您的 APK 逆向工程代码也相对容易。如果有人认为您的应用程序内存中保存的机密信息对他们来说足够重要，则尤其如此。这意味着每个人一旦获得访问权限，就可以相对容易地确定要查找的内容。
    *   *Linux 和 Java 虚拟机都*存在安全漏洞，Android 设备厂商的更新策略在这方面并不完全透明。换句话说，即使手机没有root，也可能有一种方法，直接或结合错误，在root上下文中或使用应用程序的用户ID执行代码。
    *   一旦您的应用程序发布，root 手机的方式可能会发生变化，因此您可能无法可靠地识别已root 手机。
    *   任何加密数据和密钥必须仅存在于受信任的服务器上，否则人们只会从您的应用程序中提取密钥并访问存储在 Android 设备（如果有）上的加密数据，而不是尝试访问应用程序 RAM。
*   如果有人拥有允许连接在线调试器的 Android 设备，那么所有的赌注都将失败，理论上这将允许在没有任何软件意识到这一点的情况下直接访问内存。我不确定这种情况的确切先决条件，我也不知道各个制造商在这方面采取了哪些预防措施。

我在一定程度上扩大了您最初问题的范围，但也许它对您仍然有用。即使一个字一个字地坚持你的问题，我相信*安全漏洞*点真的很痛，除了我不知道有任何可靠的（现在和将来完全没有疑问的）方法来识别根设备。

直接硬件访问可能超出您所针对的安全级别的范围，但我似乎记得我最近读过一些关于此的内容。

# java - WADL 是 REST 应用程序的标准吗？

> ID：15269191
> 
> 赞同：7
> 
> 时间：2013-03-07T10:50:31.163
> 
> 标签：java, jersey, wadl

WADL 是像 WSDL 一样的真正标准吗？WADL URI 必须以“.wadl”扩展名结尾吗？

我在泽西岛创建了一个 HelloWorld 示例，并且从 URL 获得了 WADL。然后我使用“wadl-client-plugin”创建了一个客户端，它可以工作。

我的问题是：如果我使用另一个生成 WADL 的框架（即 CXF），我可以在我的“wadl-client-plugin”中使用它来创建客户端吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:59:21.933

REST 方法比 SOAP 更简单，但遗憾的是目前还没有标准。

更具体地说，关于 WADL，[W3 团队回答](http://www.w3.org/Submission/2009/03/Comment)：

> W3C 很高兴收到来自 SUN Microsystems Inc. 的 Web 应用程序描述语言。截至今天，W3C 没有计划根据此提交内容开展工作。我们鼓励对这项工作感兴趣的人在 public-web-http-desc@w3.org 邮件列表上讨论

但是，有一些方法可以[从 WADL 创建客户端](https://stackoverflow.com/questions/9159881/restful-client-from-wadl)

# lisp - Lisp中递归函数调用的堆栈溢出

> ID：15269193
> 
> 赞同：10
> 
> 时间：2013-03-07T10:50:37.967
> 
> 标签：lisp, common-lisp, tail-recursion, clisp, land-of-lisp

我正在从 Conrad Barski 的“The Land of Lisp”一书中学习 Lisp。现在我遇到了我的第一个绊脚石，作者说：

> 以这种方式称呼自己不仅在 Lisp 中是允许的，而且经常被强烈鼓励

在显示以下示例函数来计算列表中的项目后：

```
(defun my-length (list)
  (if list
    (1+ (my-length (cdr list)))
    0)) 
```

`my-length`当我使用包含一百万个项目的列表调用此函数时，出现堆栈溢出错误。因此，要么您永远不会期望在 Lisp 中有这么长的列表（所以也许我的用例没用），或者还有另一种方法可以计算如此长的列表中的项目。你能对此有所启发吗？（顺便说一下，我在 Windows 上使用 GNU CLISP）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T12:54:45.613

CLISP 中的 TCO（尾调用优化）使用 Chris Taylor 的示例：

```
[1]> (defun helper (acc list)
       (if list
           (helper (1+ acc) (cdr list))
           acc))

(defun my-length (list)
  (helper 0 list))

HELPER 
```

现在编译它：

```
[2]> (compile 'helper)
MY-LENGTH
[3]> (my-length (loop repeat 100000 collect t))

*** - Program stack overflow. RESET 
```

现在，上面不起作用。让我们将调试级别设置为低。这允许编译器进行 TCO。

```
[4]> (proclaim '(optimize (debug 1)))
NIL 
```

再次编译。

```
[5]> (compile 'helper)
HELPER ;
NIL ;
NIL
[6]> (my-length (loop repeat 100000 collect t))
100000
[7]> 
```

作品。

允许 Common Lisp 编译器执行 TCO 通常由调试级别控制。在调试级别较高的情况下，编译器会为每个函数调用生成使用堆栈帧的代码。这样每个调用都可以被跟踪，并且可以在回溯中看到。使用较低的调试级别，编译器可以用编译代码中的跳转代替尾调用。然后这些*调用*将不会在回溯中看到 - 这通常会使调试更加困难。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-07T11:05:11.307

您正在寻找*尾递归*。目前您的功能定义为

```
(defun my-length (list)
  (if list
    (1+ (my-length (cdr list)))
    0)) 
```

请注意，在`my-length`调用了自身之后，它需要在结果中加一，然后再将该值传递给它的调用函数。这需要在返回之前修改值意味着您需要为每次调用分配一个新的堆栈帧，所使用的空间与列表的长度成正比。这就是导致长列表堆栈溢出的原因。

您可以重写它以使用辅助函数

```
(defun helper (acc list)
  (if list
    (helper (1+ acc) (cdr list))
    acc))

(defun my-length (list)
    (helper 0 list)) 
```

辅助函数有两个参数，一个是*累积参数* `acc`，它存储到目前为止列表的长度，`list`另一个是我们正在计算长度的列表。

重要的一点是`helper`tail是递归写的，这意味着调用自己是它做的最后一件事。这意味着您不需要在每次函数调用自身时分配新的堆栈帧 - 因为最终结果无论如何都会一直传递回堆栈帧链，您可以避免覆盖旧的堆栈帧使用新的，因此您的递归函数可以在恒定空间中运行。

这种形式的程序转换——从递归（但非尾递归）定义到使用尾递归辅助函数的等效定义是函数式编程中的一个重要习惯用法——值得花一点时间理解。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-07T10:58:14.283

在 lisp 中创建递归函数来操作递归数据结构确实有好处。列表（在 lisp 中）被定义为递归数据结构，所以你应该没问题。

但是，正如您所经历的那样，如果使用递归遍历数据结构一百万个深度，也会在堆栈上分配一百万帧，并且除非您特别要求运行时环境分配大量堆栈空间，否则您可能会出现堆栈溢出（我不知道你是否或如何在 gnu clisp 中做到这一点......）。

首先，我认为这表明列表数据结构并不是对所有事情都是最好的，在这种情况下，另一种结构可能会更好（但是，你可能还没有在你的 lisp 书中找到向量；- )

另一件事是，为了使像这样的大型递归有效，编译器应该优化尾递归并将它们转换为迭代。我不知道 clisp 是否具有此功能，但您需要更改您的功能才能真正优化。（如果“尾递归优化”没有意义，请告诉我，我可以挖掘一些参考资料）

有关其他迭代方式，请查看：

*   [http://www.lispworks.com/documentation/HyperSpec/Body/c_iterat.htm](http://www.lispworks.com/documentation/HyperSpec/Body/c_iterat.htm)
*   [http://www.lispworks.com/documentation/HyperSpec/Body/06_a.htm](http://www.lispworks.com/documentation/HyperSpec/Body/06_a.htm)

或其他数据结构：

*   [http://www.lispworks.com/documentation/HyperSpec/Body/t_vector.htm](http://www.lispworks.com/documentation/HyperSpec/Body/t_vector.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-29T17:04:56.253

```
(DEFUN nrelem(l) 
    (if (null l)
        0
       (+ (nrelem (rest l)) 1)
)) 
```

# twitter-bootstrap - 如何在下拉列表中停止事件气泡？

> ID：15269200
> 
> 赞同：0
> 
> 时间：2013-03-07T10:50:49.353
> 
> 标签：twitter-bootstrap, event-bubbling

```
Here is my jsfiddle : http://jsfiddle.net/FAehp/3/ 
```

我想为父视图添加一个均匀的监听器。但它被下拉菜单冒泡了。

有人遇到这个问题吗？还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:10:44.770

[http://jsfiddle.net/FAehp/7/](http://jsfiddle.net/FAehp/7/)

这可能会有所帮助，但为规则创建例外可能会很烦人。如果您决定添加更多内容，您可以使用`.is()`或创建一般规则（例如[http://jsfiddle.net/FAehp/14/](http://jsfiddle.net/FAehp/14/)）`.closest()`

您还可以使用`.is()`它来确保它实际上是父 div： http: [//jsfiddle.net/FAehp/11/](http://jsfiddle.net/FAehp/11/)但如果您向其中添加任何子元素，则它将无法正常工作。

# c# - 如何在 MVC 中使用 Facebook C# SDK 获得生日（和其他字段）的权限

> ID：15269201
> 
> 赞同：0
> 
> 时间：2013-03-07T10:50:55.593
> 
> 标签：c#, facebook, asp.net-mvc-4

我正在构建一个允许用户通过 Facebook 登录的 MVC 4 网站。所有这些都像是开箱即用的魅力。

但现在我被困在从 Facebook 获取用户的生日。我已经从 Nuget 安装了最新版本的 Facebook C# SDK (6.1.4)。我已经在 Facebook 中设置了我的应用程序以请求 user_birthday 的权限。当我查看登录对话框时，预览生日在权限列表中。

当我运行我的 MVC 应用程序并通过我自己的 facebook 帐户登录时，我会在响应中得到我的生日，但是一旦我使用其他帐户登录，就不会传回生日，也没有用户可以授予我的登录对话框应用程序使用生日字段的权限。下面是我的 ExternalLoginCallback() 操作的完整代码：

```
[AllowAnonymous]
public ActionResult ExternalLoginCallback(string returnUrl)
{
    AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));

    if (!result.IsSuccessful)
    {
        return RedirectToAction("ExternalLoginFailure");
    }

    // Get the Facebook access token
    if (result.ExtraData.Keys.Contains("accesstoken"))
    {
        Session["facebooktoken"] = result.ExtraData["accesstoken"];
    }

    if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false))
    {
        return RedirectToLocal(returnUrl);
    }

    if (User.Identity.IsAuthenticated)
    {
        // If the current user is logged in add the new account
        OAuthWebSecurity.CreateOrUpdateAccount(result.Provider, result.ProviderUserId, User.Identity.Name);

        return RedirectToLocal(returnUrl);
    }
    else
    {
        // User is new, ask for their desired membership name
        string loginData = OAuthWebSecurity.SerializeProviderUserId(result.Provider, result.ProviderUserId);

        ViewBag.ProviderDisplayName = OAuthWebSecurity.GetOAuthClientData(result.Provider).DisplayName;

        ViewBag.ReturnUrl = returnUrl;

        var client = new FacebookClient(Session["facebooktoken"].ToString());

        dynamic response = client.Get("me", new { fields = "gender, birthday" });

        return View("ExternalLoginConfirmation", 
            new RegisterExternalLoginModel 
            { 
                UserName = result.UserName, 
                FullName = result.ExtraData["name"], 
                DateOfBirth = DateTime.ParseExact(response["birthday"], "MM/dd/yyyy", CultureInfo.InvariantCulture), 
                ExternalLoginData = loginData 
            });
    }
} 
```

我希望有人能告诉我我在这里做错了什么。我已经用谷歌搜索了两天，但不知何故我无法找到正确的答案。或者也许我只是愚蠢地理解它。

任何帮助将不胜感激。

欧文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T13:00:26.757

You have to make sure that you add the birthday to the scope! Default it is not grapped by the facebookAuthenticationvar fbAuthOpt = new FacebookAuthenticationOptions();

```
 fbAuthOpt.Scope.Add("email");
        fbAuthOpt.Scope.Add("user_birthday");
        fbAuthOpt.AppId = "";
        fbAuthOpt.AppSecret = "";
        fbAuthOpt.SignInAsAuthenticationType = DefaultAuthenticationTypes.ExternalCookie;
        fbAuthOpt.Provider = new FacebookAuthenticationProvider
        {
            OnAuthenticated = async context =>
            {
                context.Identity.AddClaim(new System.Security.Claims.Claim("FacebookAccessToken", context.AccessToken));

                foreach (var claim in context.User)
                {
                    var claimType = string.Format("urn:facebook:{0}", claim.Key);
                    var claimValue = claim.Value.ToString();

                    if (!context.Identity.HasClaim(claimType, claimValue))
                        context.Identity.AddClaim(new System.Security.Claims.Claim(claimType, claimValue, "XmlSchemaString", "Facebook"));
                }

            }
        };

        app.UseFacebookAuthentication(fbAuthOpt); 
```

Later on I grap this with "urn:facebook:birthday".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T18:05:11.810

这篇文章有一个对我很有用的修复程序！他创建了一个自定义 facebook 提供程序，您可以在其中创建请求权限的范围，然后创建查询字符串以获取信息。

[http://savvydev.com/authenticating-facebook-users-with-mvc-4-oauth-and-obtaining-scope-permissions/](http://savvydev.com/authenticating-facebook-users-with-mvc-4-oauth-and-obtaining-scope-permissions/)

# javascript - 似乎无法 +1 javascript 变量

> ID：15269202
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:50:56.073
> 
> 标签：javascript, jquery

我试图在前一个数字之后将 1 添加到变量中，以便在用户附加字段时将其添加到文本框的值中。在这个阶段，它从一个开始，单击加号图标，它转到两个。但再次按下它，它会保持在两个状态。

如何在前一个数字上加 1？

```
function addAucField() {
    var fieldCount = 1;
    var newCount = parseInt(fieldCount+1);
    $("#addField").append("<br /><br />\n<input type=\"text\" name=\"aucSpots[]\" placeholder=\"Spot "+newCount+"\" class=\"span9\">");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:53:33.670

你正在添加**fieldCount** .. 所以当点击时，**fieldCount**是 1 并且函数得到 2..bravoo .. 工作正常.. 但是第二次点击... **fieldCount**是 1 （再次）... 所以得到 2 （所以你的函数是很好......）......但输出不正确......所以放在`fieldCount`函数之外......并将其更改为newcount的值..下次**fieldCount**是2，你会得到3。

它应该是

```
 var fieldCount = 1;
 function addAucField() {
    var newCount = parseInt(fieldCount+1);
    fieldCount=newCount;
    $("#addField").append("<br /><br />\n<input type=\"text\" name=\"aucSpots[]\" placeholder=\"Spot "+newCount+"\" class=\"span9\">");
   return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:53:43.377

我认为问题是每次调用函数 addAucField() 时，fieldCount 变量都会设置回 1。尝试在函数之外定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T10:56:37.777

只需创建一个闭包并实际递增`fieldCount`：

```
var addAucField = (function() {
    var fieldCount = 1;
    return function() {    
        var newCount = ++fieldCount; // increment fieldCount
        $("#addField").append("<br /><br />\n<input type=\"text\" name=\"aucSpots[]\" placeholder=\"Spot "+newCount+"\" class=\"span9\">");
        return false;
    };
})(); 
```

您也可以`fieldCount`设为全局，但污染全局命名空间几乎总是一个坏主意。请注意，您**需要增加`fieldCount`**：

```
var fieldCount = 1;
function addAucField(){
    var newCount = ++fieldCount; // increment fieldCount
    $("#addField").append("<br /><br />\n<input type=\"text\" name=\"aucSpots[]\" placeholder=\"Spot "+newCount+"\" class=\"span9\">");
    return false;
 }; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-07T10:53:39.623

`var newCount = parseInt(fieldCount+1);`换成怎么样`var newCount = parseInt(fieldCount)+1;`

（未经测试）

# javascript - 通过克隆附加事件的最后一行在表 tbody 上添加新行

> ID：15269205
> 
> 赞同：0
> 
> 时间：2013-03-07T10:51:04.877
> 
> 标签：javascript, jquery, clone

我正在尝试使用可能附加事件的输入字段克隆表的最后一行（在本例中是 keyup 事件）。我还更改了输入字段的 ID 以反映它们所在的行，例如：

表[0].field1、表[0].field2...表[1].field1...等。

问题是我可以添加一行，它也可以获取事件，当我在新的克隆输入上写入时，它们确实会启动事件。但仅在创建的第一行。如果我创建一个新的，它将正确呈现带有输入的行，而不是事件。这是方法：

```
addRow= function(tableid){

    //jquery selector get table tbody with id 
    var table=jQuery('table[id="'+tableid+'"] >tbody');

    //get last row containing input fields with tr class hoverTransparente      
    var lastRow=jQuery('table[id="'+tableid+'"] > tbody > tr:last');

    //make a clone of the row
    var clones = lastRow.clone(true); // copy events/children too

    //get the input fields from the cloned row
    var clonedInPuts=clones.find('input');

    //for each input
    jQuery(clonedInPuts).each(function (){

        //set new input val to empty
        jQuery(this).val("");
        var inputId=jQuery(this).attr('id');

        //table id
        var table=inputId.split("[")[0];
        //column id
        var tableField=inputId.split(".")[1];

        var idnumber=inputId.indexOf("[")+1;

        //convert to number to make addition for new id index
        var number = Number(inputId.charAt(idnumber))+1;
        //replace id index with incrementaed value
        var newId=inputId.replace(inputId.charAt(idnumber),number);

        //change id for new one
        jQuery(this).attr('id',newId);

        //check if this variable exists/is not undefined
        if(window["elements_"+table+"_"+tableField]){
            window["elements_"+table+"_"+tableField].push(jQuery(this).get(0));
        }
    });

    clones.appendTo(table);

} 
```

有任何想法吗？当我尝试在 chrome 中调试时，输入元素的 domtree 中的事件 onkeyup 为空，但如果我直接选择使用 jquery 并获取 .data('events') 方法，它确实返回一个数组，其中包含附加到输入字段的事件. onkeyup 不应该返回与 null 不同的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:28:37.130

好的，所以问题不在于这一方面，而在于在现有行的原始输入中创建事件的原始方法。你需要这样做：

```
var selectorStr='input[id^='+table+']&[id$='+tableField+']';
jQuery(document).on('keyup',selectorStr,function(event) {...}) 
```

代替：

```
var elements=jQuery('input[id^='+table+']&[id$='+tableField+']');

elements.each(function() {

jQuery(this).keyup(function(){...})
}); 
```

这将解决向平板电脑添加新行的问题，并且输入事件实际上搜索新添加的输入。

# iphone - 从 uiviewcontroller 中删除标签栏控制器

> ID：15269206
> 
> 赞同：0
> 
> 时间：2013-03-07T10:51:05.217
> 
> 标签：iphone, ios, uitabbarcontroller

我正在从 uiview 控制器添加一个 tabbarcontroller。请检查我的代码：

```
UITabBarController *tabBarController = [[UITabBarController alloc] init];
            NSMutableArray *arrControllers = [[NSMutableArray alloc] init];
            for(int i = 0; i<arrTabs.count;i++){
                NSArray *arr = [arrTabs objectAtIndex:i];
                if([[arr objectAtIndex:0] isEqualToString:@"PICS"]){
                    picTabViewController *pics = [[picTabViewController alloc] initWithNibName:@"picTabViewController" bundle:nil];
                    UINavigationController *picsNVC = [[UINavigationController alloc] initWithRootViewController:pics];
                    picsNVC.tabBarItem.image = [UIImage imageNamed:@"tab-news.png"];
                    picsNVC.tabBarItem.title = [arr objectAtIndex:1];
                    [arrControllers addObject:picsNVC];
                }
                if([[arr objectAtIndex:0] isEqualToString:@"MAP"]){
                    mapTabViewController *maps = [[mapTabViewController alloc] initWithNibName:@"mapTabViewController" bundle:nil];
                    UINavigationController *mapsNVC = [[UINavigationController alloc] initWithRootViewController:maps];
                    mapsNVC.tabBarItem.image = [UIImage imageNamed:@"tab-news.png"];
                    mapsNVC.tabBarItem.title = [arr objectAtIndex:1];
                    [arrControllers addObject:mapsNVC];
                }
                if([[arr objectAtIndex:0] isEqualToString:@"HTML"]){
                    htmlTabViewController *html = [[htmlTabViewController alloc] initWithNibName:@"htmlTabViewController" bundle:nil];
                    UINavigationController *htmlNVC = [[UINavigationController alloc] initWithRootViewController:html];
                    htmlNVC.tabBarItem.image = [UIImage imageNamed:@"tab-news.png"];
                    htmlNVC.tabBarItem.title = [arr objectAtIndex:1];
                    [arrControllers addObject:htmlNVC];
                }
            }
            tabBarController.viewControllers = arrControllers;
            self.tabBarController.selectedIndex = 0;
            [self.view.window addSubview:tabBarController.view]; 
```

根据需要添加选项卡栏控制器。但是现在我想添加一个按钮以返回上一页，或者您可以说从添加它的视图控制器中删除标签栏及其视图控制器。有人可以建议我怎么做吗？
请记住，我从 viewcontroller 添加了 tabbarcontroller 而不是 app delegate。

问候
潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:00:27.367

只需将此方法放入`AppDelegate.m`文件中，当您想从超级视图中删除 tabbarcontroller 并将另一个视图设置为 parentviewController 时调用此方法

```
-(void)setMainView 
{

     yourViewController *masterViewController = [[[yourViewController alloc] initWithNibName:@"yourViewController" bundle:nil] autorelease];
     self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
     self.navigationController.navigationBar.hidden=YES;
     self.window.rootViewController = self.navigationController;

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:kAnimationKey];
} 
```

并使用 AppDelegate 类的对象调用上述方法 For Ex..

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate setMainView]; 
```

我希望这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:02:03.067

我已经使用了一个 tabbar 和 alloc-init 一次，然后我将在不同`UIView`的 s 上显示和隐藏。
所以没有必要一直删除和分配。

显示标签栏

```
[self showTabBar:self.tabBarController]; 
```

隐藏标签栏

```
[self hideTabBar:self.tabBarController]; 
```

显示代码->通过设置'Y'会自动出现::

```
- (void) showTabBar:(UITabBarController *) tabbarcontroller
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.4];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            if ([[UIScreen mainScreen] bounds].size.height == 568)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 519, view.frame.size.width, view.frame.size.height)];
            }
            else if ([[UIScreen mainScreen] bounds].size.height == 480)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
            }
        }
        else
        {
            if ([[UIScreen mainScreen] bounds].size.height == 568)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 519)];
            }
            else if ([[UIScreen mainScreen] bounds].size.height == 480)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
            }
        }
    }
    [UIView commitAnimations];
} 
```

隐藏代码 -> 它会通过设置它的'Y'自动消失::

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.4];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            if ([[UIScreen mainScreen] bounds].size.height == 568)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 568, view.frame.size.width, view.frame.size.height)];
            }
            else if ([[UIScreen mainScreen] bounds].size.height == 480)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
            }
        }
        else
        {
            if ([[UIScreen mainScreen] bounds].size.height == 568)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 568)];
            }
            else if ([[UIScreen mainScreen] bounds].size.height == 480)
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
            }
        }
    }

    [UIView commitAnimations];
} 
```

如果不想在申请期间一直分配和释放，希望它会对您有所帮助。
谢谢。

# colors - XNA 4.0 奇怪的颜色错误

> ID：15269216
> 
> 赞同：2
> 
> 时间：2013-03-07T10:51:34.397
> 
> 标签：colors, xna-4.0, light

我在使用 XNA 绘制地形时遇到问题，特别是颜色（VertexPositionColorNormal 和 VertexPositionTextureNormal 会发生这种情况）。我的代码如下：

```
public BasicEffect GetEffectForColoredTerrain()
{
    this.coloredTerrainEffect.EnableDefaultLighting();
    this.coloredTerrainEffect.SpecularPower = 0.01f; //Power of the light
    this.coloredTerrainEffect.AmbientLightColor = new Vector3(0.1f, 0.1f, 0.1f); //Color of the light when it reflects on a surface
    this.coloredTerrainEffect.EmissiveColor = new Vector3(1, 0, 0);
    this.coloredTerrainEffect.DirectionalLight0.Enabled = true; //Enable directional light
    this.coloredTerrainEffect.DirectionalLight0.DiffuseColor = (new Vector3(0.2f, 0.2f, 0.2f)); //Diffuse color
    this.coloredTerrainEffect.DirectionalLight0.SpecularColor = (new Vector3(0.2f, 0.2f, 0.2f)); //Specular color
    this.coloredTerrainEffect.DirectionalLight0.Direction = Vector3.Normalize(new Vector3(1, -1f, 1)); //Direction where the light comes from.
    this.coloredTerrainEffect.View = Camera.GetInstance().GetViewMatrix();
    this.coloredTerrainEffect.Projection = Camera.GetInstance().GetProjectionMatrix();
    this.coloredTerrainEffect.Alpha = (float)((float)Configuration.GetInstance().TerrainOpacity / (float)100);
    this.coloredTerrainEffect.VertexColorEnabled = true;

    return this.coloredTerrainEffect;
} 
```

而这个绘制地形的代码：

```
RasterizerState rs = new RasterizerState();
rs.CullMode = CullMode.None;
WorldContent.CommonGraphicsDevice.RasterizerState = rs;
//Restore things that SpriteBatch can have overriden
WorldContent.CommonGraphicsDevice.BlendState = BlendState.AlphaBlend;
WorldContent.CommonGraphicsDevice.DepthStencilState = DepthStencilState.Default;
WorldContent.CommonGraphicsDevice.SamplerStates[0] = SamplerState.LinearClamp;

BasicEffect shader = ShadersHandler.GetInstance().GetEffectForColoredTerrain();
foreach (EffectPass pass in shader.CurrentTechnique.Passes)
{
    pass.Apply();
    WorldContent.CommonGraphicsDevice.Indices = indexBufferVertices;
    WorldContent.CommonGraphicsDevice.SetVertexBuffer(vertexBufferVertices);
    WorldContent.CommonGraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertexPositionColorNormalList.Length, 0, indicesVertices.Length / 3);
} 
```

然而，结果真的很奇怪，如下图所示：

[横向地形](http://imageshack.us/photo/my-images/805/terrainlateral.png/)

[地形底部](http://imageshack.us/photo/my-images/254/terrainbottom.png/)

颜色是从黄色到白色的渐变（黄色向上，白色向下）。但是，如果我使用 Riemers 教程中的效果文件（3D 系列 1 中的 effects.fx），一切都是正确的，如您在此处看到的：

[横向地形好](http://imageshack.us/photo/my-images/441/terraingoodlateral.png/)

[地形好底](http://imageshack.us/photo/my-images/35/terrainggoodbottom.png/)

如果您愿意，可以在此处查看效果代码：[效果文件](http://pastebin.com/a2A8J33W)

所以**问题**：有谁知道BasicEffect在这里发生了什么？我想使用 Riemers 文件（一切似乎都正确），但我需要使用透明度，并且 BasicEffect 对象为我提供了 alpha 属性，这非常适合我正在寻找的东西。

PD：纹理地形也会出现同样的问题，使用 VertexPositionNormalTexture

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:08:38.997

查看图像，变色似乎是一个非常漂亮的圆圈，就像来自定向光一样。我会尝试删除您在 BasicEffect 示例中使用的 DirectionalLight0 属性设置，看看是否可以纠正变色。

# c# - MVC4 - 表单数据并在动态呈现的视图上刷新

> ID：15269218
> 
> 赞同：0
> 
> 时间：2013-03-07T10:51:47.243
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

一直致力于创建一个界面以允许对 UI 采用模块化方法，背景：

允许用户将模块拖放到 div jQUery 使用模块和面板名称发回控制器控制器返回一个 JsonResult 包含已呈现的视图，特定于该模块

这是 UI 的图片，因此您可以看到我在做什么：

[图片](http://files.noirenex.com/module_ui.png)

现在，我要做的是在那个 JsonResult （其中包含视图渲染的字符串输出）中，将一些数据保存回模型，并刷新动态渲染的视图，以便只有面板（视图在哪里已呈现）更新。

我知道听起来很复杂，所以这里有一些代码：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public JsonResult AddModule(string id, string returnTo)
    {
        string content = RenderView(id);
        return Json(new { Target = returnTo, Content = content });
    }
    private string RenderView(string moduleName)
    {
        string result = "";

        ContentModule module = (ContentModule)Activator.CreateInstance(Type.GetType("TrustMRM.BLL.ContentModules." + moduleName + ",TrustMRM.BLL"));
        module.TrustID = Settings.Default.TrustID;
        module.DataBind();
        this.ViewData.Model = module;

        using (var sw = new System.IO.StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(this.ControllerContext, moduleName);
            var viewContext = new ViewContext(this.ControllerContext, viewResult.View, this.ViewData, this.TempData, sw);
            viewResult.View.Render(viewContext, sw);
            result = sw.GetStringBuilder().ToString();
        }
        return result;
    } 
```

以上是处理模块“丢弃”的内容。我有一个抽象类 ContentModule 和一个名为 BLLForumModule 的实现，有一个匹配的视图 BLLForumModule.cshtml，它被构建并在该字符串中返回，与 BLLForumModule 紧密绑定。

呈现的是一个下拉列表，等于配置该特定模块的一些数据：

```
@model TrustMRM.BLL.ContentModules.BLLForumModule
@{

Layout = null;
}

@if (Model.IsConfigured)
{ 
    <span>I am configured</span>
}
else
{
using (Html.BeginForm("RefreshModule", "Home"))
{
    <h3 class="panelHeader">@Html.DisplayTextFor(m => m.Title)</h3>
    <span>Select group</span>
    @Html.DropDownListFor(m => m.SelectedGroupID, Model.GroupSelection.Select(t => new SelectListItem { Text = t.GroupName, Value = t.GroupID.Value.ToString() }));
    @Html.HiddenFor(x => x.ModuleID);                                                                                                                     
    <input type="submit" value="Ok" />                                                                                                                                                           

    }
} 
```

现在，我不确定要返回什么，或者如何处理这篇文章以刷新该视图，该视图被呈现为字符串并被发回，对此的任何见解，以及是否有人以前做过类似的事情，也许我将视图呈现为字符串是错误的方法吗？

接受表单发布的代码：

```
public ActionResult RefreshModule(string ModuleID)
    {
        return View();
    } 
```

（不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:18:56.597

类似的东西将帮助您 [将 Ajax.BeginForm 与 A​​SP.NET MVC 3 Razor 一起使用](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)

只需使用 Ajax.BeginForm 并提供替换元素的 id。

在此处附加 ajax 请求后的 [验证 MVC3 Unobtrusive Validation Not Working after Ajax Call](https://stackoverflow.com/questions/7048726/mvc3-unobtrusive-validation-not-working-after-ajax-call)

# sql-server - Redgate SQL Monitor 基本监控权限

> ID：15269220
> 
> 赞同：0
> 
> 时间：2013-03-07T10:51:49.057
> 
> 标签：sql-server, windows, monitoring, redgate

我正在设置 Redgate 的 SQL 监视器。*Base Monitor*是实际从受监控的 SQL Server 实例及其主机收集数据的位。[此页面](http://www.red-gate.com/supportcenter/content/SQL_Monitor/help/3.2/SM_Account_Permissions)描述了运行各种组件的帐户所需的权限，并断言该帐户“应该是机器上的管理员”。

出于多种原因，我们不希望此帐户成为管理员。**是否有运行此程序所需的实际细粒度权限列表？**

第一刺包括：

*   可能是性能监视器用户的成员
*   可能是性能日志用户的成员
*   也许是事件日志阅读器的成员
*   WMI - 在 root\CIMV2 上远程启用（[参考](http://msdn.microsoft.com/en-us/library/ms188690%28v=sql.110%29.aspx)）
*   需要能够读取至少部分注册表 ( `HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation`)

目前我只是追查每一个并找到一个允许它的权限，但这很乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T01:13:21.310

我知道您的原始帖子大约是 2 年前发布的，但我想说 Red Gate 已经更新了权限，以便对 Base Monitor Service 更加细化。有关详细信息，请参阅以下内容： [SQL 监视器权限](http://documentation.red-gate.com/display/SM4/Requirements)

此外，我发现以下链接对于排除 SQL Monitor 的权限或连接问题非常有帮助：

[测试数据收集](http://documentation.red-gate.com/pages/viewpage.action?pageId=20743047)

可能晚了几年，但希望这会有所帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:07:59.087

Red Gate 没有可用的特定权限列表。我很确定帮助页面说该帐户必须是管理员，因为您需要它来远程访问性能计数器。

# wpf - 为什么绑定到“自我”不起作用？

> ID：15269224
> 
> 赞同：2
> 
> 时间：2013-03-07T10:52:12.627
> 
> 标签：wpf, xaml, binding, relativesource

我尝试将控件的属性绑定`Tag`到控件的`Visibility`属性，但在 VS 中收到以下错误：

> 你调用的对象是空的

XAML 如下所示：

```
<RadioButton GroupName="NavButtonSide" 
             Tag="7"  
             Visibility="{Binding Path=Tag, 
                                  Converter={StaticResource ControlTagVisibilityConverter}, 
                                  RelativeSource={RelativeSource Mode=Self}}"/> 
```

谁能告诉我如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:19:55.913

你的装订没什么问题。这对我来说很好；

```
<Window.Resources>
    <local:ControlTagVisibilityConverter x:Key="ControlTagVisibilityConverter" /> 
</Window.Resources>

<RadioButton 
    Tag="7" 
    Visibility="{Binding Path=Tag, 
        Converter={StaticResource ControlTagVisibilityConverter}, 
        RelativeSource={RelativeSource Mode=Self}}"/> 
```

ControlTagVisibilityConverter.cs

```
public class ControlTagVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var valueAsString = (string) value;
        var valueAsInt = int.Parse(valueAsString);

        switch (valueAsInt)
        {
            case 7:
                return Visibility.Visible;
            default:
                return Visibility.Hidden;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# regex - 如何匹配特殊字符？

> ID：15269227
> 
> 赞同：0
> 
> 时间：2013-03-07T10:52:29.863
> 
> 标签：regex

我有一个正则表达式查询

```
^(show/tiger\+season\+2/video)$ 
```

应该匹配

> 节目/老虎+季节+2/视频

这正在 IIS 中进行测试，但无法正常工作。有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:56:34.803

尝试在特殊字符之前添加反斜杠。

IE：

```
 ^(show/tiger\+season\+2/video)$ 
```

# jquery - jQuery 对象和属性

> ID：15269229
> 
> 赞同：0
> 
> 时间：2013-03-07T10:52:34.170
> 
> 标签：jquery, object

```
var firstBodyChild = document.body.children[0];
$('li', firstBodyChild);

// make a selection within a previous selection
var paragraph = $('p');
$('a', paragraph); 
```

[这是网站http://jqfundamentals.com](http://jqfundamentals.com)上的指南示例。

有几点不明白：

1.  据我了解，该格式`$()`创建了一个对象。所以这意味着`paragraph`是一个对象 - 但它的属性是什么？它是一个什么样的对象？

2.

```
var firstBodyChild = document.body.children[0];
$( 'li', firstBodyChild ); 
```

如果有人可以解释这部分，我会很高兴。`firstBodyChild`将是`firstChild`身体部分，但第二行是什么意思/做什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:01:02.177

1.  'paragraph' 变量成为一个 jQuery 对象并且可以使用 jQuery 的标准函数集。

2.  那里的第二行表明 jQuery 应该在 'firstBodyChild' 元素的上下文中查找 <li> 元素。有关详细信息，请参阅此处的文档：http: [//api.jquery.com/jQuery/#jQuery1](http://api.jquery.com/jQuery/#jQuery1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:02:13.100

`$()`扩展一个对象——在本例中是一个 DOM 元素——使用所有标准的 jQuery 方法。

和（恕我直言）：

`$( 'li', document.body.children[0])`是一种令人困惑的说法：

`$('body *:first li')`

换句话说，传递给`$()`方法的第二个参数定义了`li`应该在其中找到元素的上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:04:04.847

1.  The`$()`是 的别名`jQuery()`，它可能更具可读性。所以你正在调用一个函数并将参数传递给它。
2.  通常，第一个参数是一个选择器，正如您从 CSS 中知道的那样。第二个参数是可选的，称为上下文。

假设您`ul`的正文中有两个列表，并且想要将第一个列表元素设为红色，您可以使用正文`.children[0]`作为上下文来仅获取此元素列表项，如您的第一个代码示例中所示。

然后，您可以继续使用 jQuery 获取所有`li`元素的列表，无论是在整个文档中（使用`$('li')`），还是在特定上下文中，例如，`ul`您已经保存在变量中的第一个列表，使用`$('li', firstBodyChild)`.

调用 jQuery 返回的对象是 DOM 节点的包装器。因此，它存储了可以通过传递的查询识别的元素以及可用于过滤和修改这些元素的一大堆函数。

为了完成这个示例，要将这些列表元素染成红色，您可以使用 jQueries`.css`来修改这些元素的外观。

```
var firstBodyChild = document.body.children[0];
$('li', firstBodyChild).css({color: 'red'}); 
```

# jquery - jQuery：某些元素的数据属性选择失败 - 为什么？

> ID：15269232
> 
> 赞同：1
> 
> 时间：2013-03-07T10:52:53.083
> 
> 标签：jquery, html, jquery-selectors

鉴于该 HTML 代码：

```
<div id="details" data-type="motion">
    <p>Lorem ipsum</p>
</div>
<img src="http://placehold.it/50x50" data-type="motion" />
<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidun...</p> 
```

为什么以下脚本的选择器无法正常工作？

```
$(document).ready(function () {

    $('[data-type="motion"]').each(function() {

        $this = $(this);

        $(window).bind('scroll', function() {

            var yOffset = (window.pageYOffset / $this.data('speed')) + 'px';

            $this.css({'border': '1px solid red'});
        });

    });

}); 
```

使用`'[data-type="motion"]'`，仅选择图像。`'div[data-type="motion"]'`当然只选择具有该数据属性的 div。`'*[data-type="motion"]'`也只匹配图像，`'img[data-type="motion"], div[data-type="motion"]'`似乎有点多余，也不起作用。

这是一个演示该行为的小提琴：http: [//jsfiddle.net/Y7QXn/](http://jsfiddle.net/Y7QXn/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T10:56:36.513

问题不在于选择器，而是不是本地的局部变量：

```
$this = $(this); 
```

这将创建一个全局变量，因此每个元素的事件处理程序都会影响最后一个元素。

使其成为局部变量：

```
var $this = $(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T10:56:39.233

在您的 HTML 中：

```
<div id="details" data-type="motion">
    <p>Lorem ipsum</p>
</div>
<img src="http://placehold.it/50x50" data-type="motion" />
<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidun...</p> 
```

失败，因为`$this.data('speed')`没有`data-speed=""`.

而且您还需要以这种方式更改变量的范围：

```
var $this = $(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:04:54.843

我认为应该这样做：[**小提琴**](http://jsfiddle.net/Y7QXn/4/)

```
 $(window).bind('scroll', function () {
        $('[data-type="motion"]').each(function () {
            $this = $(this);
            var yOffset = (window.pageYOffset / $this.data('speed')) + 'px';
            $this.css({
                'border': '1px solid red'
            });
        });
    }); 
```

# ruby-on-rails - Rails 被最后一个分隔符分割

> ID：15269235
> 
> 赞同：2
> 
> 时间：2013-03-07T10:53:08.980
> 
> 标签：ruby-on-rails, ruby, regex, split, delimiter

我希望能够将字符串拆分为 2 个元素，因为每个字符串都至少包含一个分隔符。

示例：`"hello_world"`。如果我申请`.split("_")`，我会收到：`["hello", "world"]`.

当我有一个带有两个或多个分隔符的字符串时，就会出现问题。例子`"hello_to_you"`。我想收到：`["hello_to", "you"]`。

我知道 split 函数的 limit 选项：`.split("_", 2)`，但它产生：`["hello", "to_you"]`。

所以，基本上，我只需要用最后一个分隔符（“_”）分割整个字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T15:51:16.627

这正是这样[`String#rpartition`](http://ruby-doc.org/core-2.0/String.html#method-i-rpartition)做的：

```
first_part, _, last_part = 'hello_to_you'.rpartition('_')
first_part # => 'hello_to'
last_part # => 'you' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T10:57:06.827

尝试

```
'hello_to_you'.split /\_(?=[^_]*$)/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:00:29.900

```
class String
  def split_by_last_occurrance(char=" ")
    loc = self.rindex(char)
    loc != nil ? [self[0...loc], self[loc+1..-1]] : [self]
  end
end

"test by last_occurrance".split_by_last  #=> ["test by", "last"]
"test".split_by_last_occurrance               #=> ["test"] 
```

# vim - 使用带有两个文件名的 vim -d，如何将第二个设置为只读（从命令行）？

> ID：15269237
> 
> 赞同：2
> 
> 时间：2013-03-07T10:53:15.583
> 
> 标签：vim

我经常`gvim -d`用两个文件名调用；我希望以只读方式系统地打开第二个（因为它位于参考目录中，不应修改）。但是，第一个不应该是只读的，因为我会将第二个中的一些差异拉入其中。那么我必须做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:17:57.323

```
$ gvim -d file1 file2 +'wincmd l | set ro | wincmd h' 
```

成功了。

假设您使用 bash，您可以将其放入别名中：

```
alias vd='/usr/bin/gvimdiff +"wincmd l | set ro | wincmd h"' 
```

# java - 具有现有数据库触发器的 JPA 审计/历史数据

> ID：15269244
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:22.317
> 
> 标签：java, sql, database, jpa, audit-tables

我正在将 JPA 应用程序添加到许多现有应用程序的复杂系统中（用 MS Access、Delphi、Perl、C#、PHP 等编写）。底层 MS-SQL 数据库使用数据库触发器将任何更改的数据库条目的副本写入历史数据库表中，添加`SYSTEM_USER`和`GETDATE()`.

由于我的新 JPA 应用程序使用连接池 - 数据库表的所有更改将始终由我们的技术用户（用户：“Java”）进行，并且 JPA 应用程序的所有历史数据库表条目将始终将“Java”作为 SYSTEM_USER。

如何让在历史表中自动创建条目-而不删除现有触发器？

我想过：

1.  每当用户“Java”修改表并自己创建历史数据库表条目时，告诉现有触发器不要启动。因此，我必须为我的每个历史数据库表创建许多新的实体类。不是很方便。
2.  禁用连接池并为每次修改创建单独的连接 - 使用实际用户连接到数据库。但这会有性能缺陷。而且我不知道如何禁用连接池。
3.  使用临时表始终存储当前用户 - 数据库触发器在历史数据库表中创建条目时应使用该存储用户
4.  操作后手动更改历史数据库表中的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:27:46.727

1 - 如果您使用的是 EclipseLink，您可能会使用它的历史支持。见，[http://wiki.eclipse.org/EclipseLink/Examples/JPA/History](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History)

2 - 在 EclipseLink 中，您可以向 createEntityManager() 提供用户/密码属性以使用非池连接。见，[http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing#Provide_each_application_user_with_a_database_user_id](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing#Provide_each_application_user_with_a_database_user_id)

4 - 您可以为此使用 JPA 或 EclipseLink 事件。

# plsql - 如何临时存储用户响应以供以后使用？

> ID：15269246
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:27.690
> 
> 标签：plsql, oracle-apex

我正在寻找存储在 Oracle ApEx 应用程序中输入的信息的最佳方式，该应用程序像向导一样被分割。

基本上屏幕上有许多字段，即文本框、文本区域、选择列表、复选框以及单选组按钮，但不附加到任何特定的数据库表。

我想做的基本上是让用户在一个窗格上输入所需的答案，这可能总共有 5 个项目，即 2 个文本字段、1 个无线电组、1 个选择列表和 1 个复选框，当他们按下“下一步>”按钮时在转到下一个窗格之前​​，将这些答案存储到针对特定 Id 的 ApEx 集合中，并在以下输入的答案窗格中执行相同的过程。

我正在使用 Oracle ApEx 4.1.2。基本上想要即时存储值并在以后重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:51:23.100

正如我在上面的最后一条评论中提到的，Plouf 带着货物过来了。毕竟，我不需要 ApEx 收藏 - 常规物品就可以了。

# c# - 来自 MainWindow 的 WPF 调用方法不起作用

> ID：15269251
> 
> 赞同：1
> 
> 时间：2013-03-07T10:53:38.510
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我有以下课程：

主窗口：

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        MainMenu mainMenu = new MainMenu(this);
        menuFrame.Navigate(mainMenu);
        UserPage userP = new UserPage();
        contentFrame.Navigate(userP);
    }

    public void LoadAPage(Page page)
    {
        contentFrame.Navigate(page);
    }
} 
```

主菜单：

```
public partial class MainMenu : Window
{
    private Window switchPage;

    public MainMenu(MainWindow mainP)
    {
        Window mainWindow = mainP;
        InitializeComponent();
        switchPage = mainP;
    }

    private void btn_navigate_user(object sender, EventArgs e)
    {
        UserPage userP = new UserPage(ServiceLogic);

        //switchPage = Window.GetWindow(PageSwitcher);
        //switchPage.LoadAPage(new UserPage());
    } 
```

如您所见，我正在尝试使用`LoadAPage`MainWindow 中的 - 方法。MainMenu 和 UserPage 是 MainWindow 的子项。问题是，无论我尝试什么，我都无法达到`LoadAPage`方法。我试过设置所有者，但这不起作用。尝试时`mainMenu.Owner = this;`，Visual Studio 说`Mainmenu does not contain a definition for 'Owner``. When I give the parent class as a parameter to the child class, there are no errors but the method`LoadAPage` 在那里是未知的。

我究竟做错了什么？我应该如何解决这个问题？

编辑：将 MainMenu 更改为 Window 而不是 UserControl 使我能够设置所有者。仍然，我无法达到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:14:30.430

真是一团糟:)试试这个

```
private MainWindow switchPage;

public MainMenu(MainWindow mainP)
{
    InitializeComponent();
    switchPage = mainP;
}

private void btn_navigate_user(object sender, EventArgs e)
{
    UserPage userP = new UserPage(ServiceLogic);
    switchPage.LoadAPage(userP);
} 
```

但是我认为你最好使用事件，而不是将你的窗口对象传递给它的孩子。

# c++ - 尝试从另一个项目链接类时出现链接器错误

> ID：15269254
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:42.157
> 
> 标签：c++

在 VS 2008 中，我得到了这个链接器错误。

```
error LNK2001: unresolved external symbol "public: __thiscall Classname::Classname(void)" 
```

我可以看到`classname::classname()`我的文件中已经定义了构造函数定义，但我仍然收到此链接器错误。

我正在尝试将此类与其他项目联系起来。我已经在属性中给出了所有输入路径。我可以通过 GO 浏览文件到 VS 工具的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:02:55.060

如果构造函数是在`.cpp`文件中定义的，请确保将此`.cpp`文件添加到您的项目中。

# marklogic - 使用 .Net Xcc 检查 MarkLogic 集合中的文档

> ID：15269257
> 
> 赞同：2
> 
> 时间：2013-03-07T10:53:45.597
> 
> 标签：marklogic

如何使用 .Net XCC 检查 MarkLogic 数据库的集合中是否存在文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:58:18.507

如果性能很重要，您可能希望避免为`xdmp:document-get-collections`. 如果您启用了 URI 词典，这是可能的。

```
exists(
  cts:uris(
    (), (),
    cts:and-query(
      (cts:document-query($document-uri),
       cts:collection-query($collection-uri))))) 
```

这会询问 URI 词典是否有任何文档 uri 与指定的集合 URI 和文档 URI 匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:46:43.630

假设您了解基本知识`XCC`，请使用`AdHoc`查询 [http://docs.marklogic.com/6.0/javadoc/xcc/com/marklogic/xcc/AdhocQuery.html](http://docs.marklogic.com/6.0/javadoc/xcc/com/marklogic/xcc/AdhocQuery.html)

我知道的最简单的方法是使用

```
 xdmp:document-get-collections() 
```

[http://docs.marklogic.com/xdmp:document-get-collections](http://docs.marklogic.com/xdmp:document-get-collections)

因此，您可以像这样构建一个临时查询：

```
xdmp:document-get-collections("doc.xml") = "collection" 
```

注意“=”是一组等于

结果是一个布尔值

如果您担心 XQuery 注入（即您无法完全控制字符串“doc.xml”，则应该使用外部参数。

```
declare variable $doc external ;
declare variable $collection external ;
xdmp:document-get-collections($doc) = $collection 
```

然后将参数“ `doc`”和“ `collection:`”的值作为外部变量传递给查询。

# c# - 发布后 ASP.NET MVC 4 模型为空

> ID：15269259
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:50.077
> 
> 标签：c#, asp.net-mvc, model, http-post

您好，这是我的产品控制器，我有一张一张桌子和一张表格。当我提交模型时。产品一切正常，但是当我从 HttpPost 索引模型返回视图时，它始终为空。

如果我重新加载页面模型已填充。

```
 public ActionResult Index()
     {
        var model = new ProductViewModel();
        var suppliers = new List<Supplier>();
        var categories = new List<GoodsCategory>();
        using (var session = _sessionFactory.OpenSession())
        {
            model.Products = session.Query<Product>().ToList();
            suppliers = (from d in session.Query<Supplier>()
                         select new Supplier
                             {
                                 Id = d.Id,
                                 Name = d.Name
                             }).ToList();

            categories = session.Query<GoodsCategory>().ToList();

            model.Suppliers = suppliers;
            model.Categories = session.Query<GoodsCategory>().ToList();
        }

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(ProductViewModel model)
    {
        return View()
    } 
```

有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:57:45.027

输入`return View(model);`帖子操作

# php - 与 LMS 兼容的 PHP 创作工具

> ID：15269260
> 
> 赞同：2
> 
> 时间：2013-03-07T10:53:53.207
> 
> 标签：php, scorm

我开发了一个生成 3D 内容的 PHP 创作工具。我希望学习管理系统可以连接到此工具以生成 SCORM 兼容格式的 3D 内容。

例如，如果我的 PHP 创作工具是，`index.php`我想有办法将此页面集成到 LMS 中，方法是将其添加到清单中。

我已经看到有用于生成 SCO 文件的 JavaScript API，但我不确定这是否适用于整个创作工具或 3D 内容。

我应该使用 API 使这个 PHP 工具成为 LMS 的一部分，还是应该使用该工具直接生成 SCORM 输出并导入到 LMS？解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:27:09.783

您的工具应该生成（导出）一个现成的 scorm zip 包。然后任何人都可以将其导入 LMS。这就是所有 scorm 工具的工作原理。

# c# - 在 asp.net 中创建数据驱动菜单的问题

> ID：15269261
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:56.607
> 
> 标签：c#, asp.net, sql-server-2008, visual-studio-2008

我在 asp.net 中创建一个数据驱动的动态菜单，使用 sql server 2008 R2 作为我的数据库。第一级的父节点和子节点工作得很好。但是子节点下面有另一个子节点，应用程序产生异常。我的问题的 c# 代码如下：

```
public partial class LeaveManagementSystemMasterPage : System.Web.UI.MasterPage
{
SqlConnection conn;
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        getMenu();
    }
}

private void getMenu()
{
    Connect();
    conn.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sqlQuery = "select * from menu";
    SqlDataAdapter da = new SqlDataAdapter(sqlQuery, conn);
    da.Fill(ds);
    dt = ds.Tables[0];
    DataRow[] rowParent = dt.Select("ParentID=" + 0);
    DataRow[] rowChild = dt.Select("ParentID>"+0);

    //populating the first level of the menu
    foreach (DataRow dr in rowParent)
    {
        Menu1.Items.Add(new MenuItem(dr["MenuName"].ToString(),dr["MenuID"].ToString(),"",""));
    }

    //populating the children in menu
    foreach (DataRow dr in rowChild)
    {
        MenuItem child = new MenuItem(dr["MenuName"].ToString(), dr["MenuID"].ToString(), "", "");
        Menu1.FindItem(dr["ParentID"].ToString()).ChildItems.Add(child);

    }

    conn.Close();

}

public void Connect()
{
    string conStr="Data Source=HO-0000-LAP; Initial Catalog=LeaveManagementSystem; Integrated Security=true";
     conn = new SqlConnection(conStr);
} 
```

}

这是我在 sqlserver 2008 中设计的表：-

![菜单数据库](../Images/739076a03ffe9568f3df9c2b8c259ec1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:37:44.340

我发现对这个问题有用的解决方案位于

[从 asp.net 的数据库中获取菜单项](https://stackoverflow.com/questions/12349163/getting-menu-items-from-database-in-asp-net?rq=1)

这是我的源代码：-

```
public partial class LeaveManagementSystemMasterPage : System.Web.UI.MasterPage 
```

{ SqlConnection 连接；protected void Page_Load(object sender, EventArgs e) { if (!IsPostBack) { getMenu(); } }

```
private void getMenu()
{
    Connect();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sqlQuery = "select * from menu";
    SqlDataAdapter da = new SqlDataAdapter(sqlQuery, conn);
    da.Fill(ds);
    dt = ds.Tables[0];
    AddTopMenuItems(dt);

}

private void AddTopMenuItems(DataTable menuData)
{
    DataView view = new DataView(menuData);
    view.RowFilter = "ParentID = 0";
    foreach (DataRowView rowView in view)
    {
        MenuItem topItem = new MenuItem(rowView["MenuName"].ToString(),rowView["MenuID"].ToString());
        Menu1.Items.Add(topItem);
        AddChildItems(menuData, topItem);
    }

}

private void AddChildItems(DataTable menuData, MenuItem parentMenuItem)
{
    DataView view = new DataView(menuData);
    view.RowFilter = "ParentID = " + parentMenuItem.Value;

    foreach(DataRowView rowView in view)
    {
        MenuItem childItem = new MenuItem(rowView["MenuName"].ToString(), rowView["MenuID"].ToString());
        parentMenuItem.ChildItems.Add(childItem);
        AddChildItems(menuData, childItem);
    }

}

public void Connect()
{
    string conStr="Data Source=HO-0000-LAP; Initial Catalog=LeaveManagementSystem; Integrated Security=true";
     conn = new SqlConnection(conStr);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:23:50.630

在这里冒险猜测一下，它与 3 级子项的创建顺序有关。

您将父项从 rowParent 集合显式添加到菜单，然后添加“其余”。问题是，当您开始第二个 for 循环以添加子项时，您依赖于项目的顺序，以便首先添加更高级别的项目。这不能保证。

所以可能发生的事情（如果您发布我们可以确认的异常）是这样的

在 foreach 循环（在 rowParent 上）之后，您的菜单对象添加了所有 5 个父项

```
Administration (ID 1), 
Setup (ID 2)
Operations (ID 3) 
Reports (ID 4) 
Logout (ID 5) 
```

例如，在第 2 次 foreach 中，让您有 2 个项目，例如因为这可能是您的问题所在

```
Management ID 31, ParentID 3
Initiate Application ID 311, ParentID 31 
```

如果首先添加管理，则启动应用程序将作为 FindItem() 将找到要添加的父项。

但是，如果先启动Application，并且还没有添加管理，则会抛出错误，因为FindItem()会失败（尚未添加项目）。

您可以添加 order by 子句和 order by Parent ID，以确保按顺序添加项目，以便首先添加编号较低的父项目。

或者您可以创建一个函数并将每个级别的父 ID 多次传递，以确保您始终将子项添加到已添加的父项。现在在 iPad 上，但很快会添加一些代码。

# javascript - 声明具有多个 if 的多个 var，但执行任何 if，而不是一个、全部或无。[HTML + JavaScript]

> ID：15269262
> 
> 赞同：0
> 
> 时间：2013-03-07T10:53:57.093
> 
> 标签：javascript, html

像这样的东西：

```
<!-- HTML on page -->

<!-- hide the following div by class-->
<div id="bed" class="blankets"> 
    We sell blankets
</div>

<!-- hide the following div by ID -->
<div id="animal" class="frogs">
    We sell frogs
</div>

<!-- this is the only div I want visible -->
<div id="house" class="speakers">
    We sell houses and speakers
</div>

<!-- hide the following div by class -->
<div id="car" class="suvs">
    We sell cars
</div> 
```

JavaScript 通过 UserScript 在页面上注入并与 GreaseMonkey、Safari、Google Chrome 和 Opera 兼容。

```
var div = document.getElementById("animal"); 

if (div) {
    div.parentNode.removeChild(div);
};

var cur_columns = document.getElementsByClassName('blankets');
var cur_columns = document.getElementsByClassName('suvs');

if (div) {
    div.parentNode.removeChild(div);
}; 
```

我只想看到页面中间的内容，而如果顶部改变了服务器端的值，但底部保持不变，底部仍然会隐藏，现在我只需将代码更新为该值。

我在互联网上看到的只是执行一个变量的方法，如果匹配全部，或者（另一个）。它必须将整个规则匹配到一个点。

我希望这适用于评论中提到的浏览器。我也不知道如何使用评论。我使用了 // 和 /* */，是 /* *\ 关闭评论的方式吗？

更新

现在如何为 Class 上的 var 添加另一行以便隐藏第 4 个 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:17:51.283

在这里很难弄清楚你想要实现什么，但我可以解释一下你当前的脚本做了什么：

```
// The variable 'div' refers to <div id="frogs">
var div = document.getElementById("frogs"); 

// If 'div' exists, remove it
if (div) {
    div.parentNode.removeChild(div);
};

// The variable 'cur_columns' refers to all elements with class="speaker"
var cur_columns = document.getElementsByClassName('speakers');
// ...and now it refers to all elements with class="suvs"!
var cur_columns = document.getElementsByClassName('suvs');

// If 'div' exists, remove it (again)
if (div) {
    div.parentNode.removeChild(div);
}; 
```

# java - 将 XML 文档插入到另一个 XML 文档上的特定节点（java）

> ID：15269263
> 
> 赞同：1
> 
> 时间：2013-03-07T10:54:00.337
> 
> 标签：java, xml, xmldocument, appendchild

我有一个 XML1：

```
<letterContent>
    <key1>key1</key1>
    <key2>key2</key2>
    <type>456</type>
    <object1>789</object1>
    <effectiveDate>00</effectiveDate>
    <expandedData />
</letterContent> 
```

...和 ​​XML 2：

```
<expandedData>
    <rsnForReg>
        <legacyTIN>
            <asCurrent>leg123</asCurrent>
        </legacyTIN>
        <etpmTIN>
            <asCurrent>etpm123</asCurrent>
        </etpmTIN>
        <regType>
            <asCurrent/>
        </regType>
    </rsnForReg>
</expandedData> 
```

我想使用 JAVA 在扩展数据节点上的 XML 1 文档中插入 XML 2。

最终的 XML1 应如下所示：

```
<letterContent>
    <key1>key1</key1>
    <key2>key2</key2>
    <type>456</type>
    <object1>789</object1>
    <effectiveDate>00</effectiveDate>
    <expandedData>
        <rsnForReg>
            <legacyTIN>
                <asCurrent>leg123</asCurrent>
            </legacyTIN>
            <etpmTIN>
                <asCurrent>etpm123</asCurrent>
            </etpmTIN>
            <regType>
                <asCurrent/>
            </regType>
        </rsnForReg>
    </expandedData>
</letterContent> 
```

XML2 插入到 XML1 的扩展数据节点上。有任何想法吗？我知道我需要构建一个递归函数来循环遍历 XML 2，但不确定如何在 java 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:32:38.900

考虑使用[XPath](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)：

```
import static javax.xml.xpath.XPathConstants.*;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class Xml2into1 {
  public static void main(String[] args) throws Exception {
    // read from files
    InputSource xml1 = new InputSource("xml1.xml");
    InputSource xml2 = new InputSource("xml2.xml");
    // find the node to add to
    XPath xpath = XPathFactory.newInstance()
        .newXPath();
    Node expandedData1 = (Node) xpath.evaluate("//expandedData", xml1, NODE);
    Document doc1 = expandedData1.getOwnerDocument();
    // insert the nodes
    Node expandedData2 = (Node) xpath.evaluate("//expandedData", xml2, NODE);
    expandedData1.getParentNode()
        .replaceChild(doc1.adoptNode(expandedData2), expandedData1);
    // print results
    TransformerFactory.newInstance()
        .newTransformer()
        .transform(new DOMSource(doc1), new StreamResult(System.out));
  }
} 
```

# ios - 在 UIButton 中放置一个 UIActivityIndi cator

> ID：15269264
> 
> 赞同：17
> 
> 时间：2013-03-07T10:54:06.533
> 
> 标签：ios, uiactivityindicatorview

我知道我错过了一些愚蠢的东西，但无论如何，这是我的代码：

```
UIActivityIndicatorView indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
indicator.hidesWhenStopped = YES;
indicator.frame = btnLogin.frame;
indicator.center = btnLogin.center;
[self.view addSubview:indicator];
[indicator bringSubviewToFront:indicator]; 
```

这是最终结果：

![UIActivityIndi​​cator错位截图](../Images/5279a2db33732ab9ca0cac793d7380e1.png)

[http://img542.imageshack.us/img542/8172/uiactivity.png](http://img542.imageshack.us/img542/8172/uiactivity.png)

先感谢您！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T14:33:09.020

我认为您缺少的概念是视图的框架（及其中心）都与其父视图相关。根据您的屏幕截图，我猜您的文本字段和按钮都在充当容器的视图中。因此，您的按钮的框架和中心与该容器视图相关，而不是与视图控制器的整体视图相关。您将相同的框架和中心分配给活动指示器，但随后将指示器添加为主视图的子视图，而不是容器视图。所以你现在有两个视图（按钮和指示器）具有相同的框架，但该框架与两个不同的超级视图相关。

最简单的更改就是将您的指标添加到您正在使用的容器视图中。但我建议将指标添加为按钮的子视图，然后只需进行一些数学运算即可调整其位置。

```
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
CGFloat halfButtonHeight = btnLogin.bounds.size.height / 2;
CGFloat buttonWidth = btnLogin.bounds.size.width;
indicator.center = CGPointMake(buttonWidth - halfButtonHeight , halfButtonHeight);
[btnLogin addSubview:indicator];
[indicator startAnimating]; 
```

作为旁注：您在视图框架之后设置视图中心是多余的。此外，作为子视图添加的最后一个视图会自动成为前子视图。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-09-15T06:46:43.747

基于@Musa almatri 的回答，我创建了扩展：

```
extension UIButton {
func loadingIndicator(show show: Bool) {
    let tag = 9876
    if show {
        let indicator = UIActivityIndicatorView()
        let buttonHeight = self.bounds.size.height
        let buttonWidth = self.bounds.size.width
        indicator.center = CGPointMake(buttonWidth/2, buttonHeight/2)
        indicator.tag = tag
        self.addSubview(indicator)
        indicator.startAnimating()
    } else {
        if let indicator = self.viewWithTag(tag) as? UIActivityIndicatorView {
            indicator.stopAnimating()
            indicator.removeFromSuperview()
        }
    }
}} 
```

那么你可以像这样使用它：

```
yourButton.loadingIndicator(show: true) //hide -> show: false 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-21T15:29:29.203

这是一个 Swift 3 版本，没有使用标签。

```
import UIKit

extension UIButton {
    func loadingIndicator(show: Bool) {
        if show {
            let indicator = UIActivityIndicatorView()
            let buttonHeight = self.bounds.size.height
            let buttonWidth = self.bounds.size.width
            indicator.center = CGPoint(x: buttonWidth/2, y: buttonHeight/2)
            self.addSubview(indicator)
            indicator.startAnimating()
        } else {
            for view in self.subviews {
                if let indicator = view as? UIActivityIndicatorView {
                    indicator.stopAnimating()
                    indicator.removeFromSuperview()
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-16T21:19:00.990

小升级：（在superview上添加按钮）

```
extension UIButton {
    func loadingIndicator(_ show: Bool) {
        let indicatorTag = 808404
        if show {
            isEnabled = false
            alpha = 0
            let indicator = UIActivityIndicatorView(activityIndicatorStyle: .gray)
            indicator.center = center
            indicator.tag = indicatorTag
            superview?.addSubview(indicator)
            indicator.startAnimating()
        } else {
            isEnabled = true
            alpha = 1.0
            if let indicator = superview?.viewWithTag(indicatorTag) as? UIActivityIndicatorView {
                indicator.stopAnimating()
                indicator.removeFromSuperview()
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-09T08:10:33.157

**快速解决方案**：

```
var indicator = UIActivityIndicatorView()
var halfButtonHeight = SOME_BUTTON.bounds.size.height / 2;
var buttonWidth = SOME_BUTTON.bounds.size.width;
indicator.center = CGPointMake(buttonWidth - halfButtonHeight , halfButtonHeight);
SOME_BUTTON.addSubview(indicator)
indicator.startAnimating() 
```

并使其位于按钮的中心

```
indicator.center = CGPointMake(buttonWidth/2, halfButtonHeight); 
```

**或者使用很棒的图书馆**

[https://github.com/souzainf3/RNLoadingButton-Swift](https://github.com/souzainf3/RNLoadingButton-Swift)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-06T16:25:28.177

我正在使用约束使 UIButton 内的指示器居中。调整@DanielQ 的扩展，变成：

```
extension UIButton {
    func loadingIndicator(show: Bool) {
        let tag = 9876
        if show {
            let indicator = UIActivityIndicatorView()
            indicator.tag = tag
            self.addSubview(indicator)
            indicator.translatesAutoresizingMaskIntoConstraints = false
            let horizontalConstraint = NSLayoutConstraint(item: indicator, attribute: NSLayoutAttribute.centerX, relatedBy: NSLayoutRelation.equal, toItem: self, attribute: NSLayoutAttribute.centerX, multiplier: 1, constant: 0)
            let verticalConstraint = NSLayoutConstraint(item: indicator, attribute: NSLayoutAttribute.centerY, relatedBy: NSLayoutRelation.equal, toItem: self, attribute: NSLayoutAttribute.centerY, multiplier: 1, constant: 0)
            self.addConstraints([horizontalConstraint, verticalConstraint])
            indicator.startAnimating()
        } else {
            if let indicator = self.viewWithTag(tag) as? UIActivityIndicatorView {
                indicator.stopAnimating()
                indicator.removeFromSuperview()
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-22T17:32:47.577

我从按钮中删除了标题，然后在动画完成后将其添加回来，而不是覆盖标题的指示器：

```
extension UIButton {

func loadingIndicator(show: Bool) {
    let tag = 9876

    var color: UIColor?

    if show {
        color = titleColor(for: .normal)
        let indicator = UIActivityIndicatorView()
        let buttonHeight = self.bounds.size.height
        let buttonWidth = self.bounds.size.width
        indicator.center = CGPoint(x: buttonWidth/2, y: buttonHeight/2)
        indicator.tag = tag
        indicator.color = UIColor.white
        setTitleColor(.clear, for: .normal)

        self.addSubview(indicator)
        indicator.startAnimating()
    } else {
        if let indicator = self.viewWithTag(tag) as? UIActivityIndicatorView {
            indicator.stopAnimating()
            indicator.removeFromSuperview()
            setTitleColor(color, for: .normal)
        }
    }
}
} 
```

# google-drive-api - 谷歌驱动SDK安装应用程序和Web应用程序的区别

> ID：15269265
> 
> 赞同：0
> 
> 时间：2013-03-07T10:54:07.513
> 
> 标签：google-drive-api

我将使用 Google drive SDK 访问。为了访问 API，我应该创建已安装的应用程序配置还是 Web 应用程序配置？主要区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:05:42.820

不同之处的答案是： [https ://developers.google.com/accounts/docs/OAuth2#scenarios](https://developers.google.com/accounts/docs/OAuth2#scenarios)

# java - @Cacheable - 如何在不知道缓存 ID 的情况下驱逐对象？

> ID：15269266
> 
> 赞同：0
> 
> 时间：2013-03-07T10:54:07.810
> 
> 标签：java, performance, spring, ehcache

我有一个简单的 Spring 应用程序，它有一个方法：

```
@Cacheable("getSession")
public Session getSession(String sessionId) { ... 
```

它由 eh-cache 支持并且运行良好。我遇到的问题是我需要从这个缓存中逐出对象，而不是基于 sessionId（它们在缓存中键入的 GUID），而是返回对象的数据库 Id：

```
public void evictSessionFromCache(long id) { ... 
```

在需要驱逐该对象时，我无法知道 sessionId。

有人对此有任何指示吗？我尝试扩展 EhCacheCacheManager 以返回一个包装好的 Cache 对象，其中包含 db ID 和 sessionID 之间的映射，但这感觉像是一个笨重的解决方案：

```
if(name.equals("getSession")) {
    if(wrappedCache == null) {
        wrappedCache = new WrappedCache(super.getCache(name));
    }
    return wrappedCache;
} else {
    return super.getCache(name);
} 
```

是否有任何开箱即用的属性来利用此注释并通过多个 id 访问对象？或者我应该忘记注释并直接操作缓存/缓存管理器？

谢谢！

# sql - SQL Server 查询到 Oracle 查询的转换

> ID：15269267
> 
> 赞同：0
> 
> 时间：2013-03-07T10:54:19.630
> 
> 标签：sql, oracle

我需要在 Oracle 中编写查询，但我更熟悉 SQL Server。

在 SQL Server 中，查询如下所示：（简化）

```
if exists (
    select * from table where a=1
)
begin
    update table set b=1 where a=1 
end else 
begin 
    insert table (a,b) values(1,1) 
end 
```

谢谢你的帮助 ：）

==================================================== ==============================

这是合并选项，（我认为）：

```
MERGE INTO table T
USING (
    SELECT a,b
    FROM table
) Q
ON T.a = Q.a
WHEN MATCHED THEN
    UPDATE SET T.a = 1
WHEN NOT MATCHED THEN
    INSERT table (a,b) VALUES (1,1); 
```

这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:37:32.620

这应该是 Oracle 11g 的正确语法。我不是 Oracle 方面的专家，所以也许其他人可以更好地解释它，但我相信`dual`在插入新值或尝试合并来自另一个表时使用该表。

```
MERGE INTO table1 T
USING (
    SELECT 1 a, 1 b FROM dual
) Q
ON (T.a = Q.a)
WHEN MATCHED THEN
    UPDATE SET b = 1
WHEN NOT MATCHED THEN 
    INSERT (a,b) VALUES (Q.a,Q.b); 
```

[工作示例](http://sqlfiddle.com/#!4/54404/1)

# android - 如何在 Android 中捕获弹出关闭事件？

> ID：15269270
> 
> 赞同：1
> 
> 时间：2013-03-07T10:54:25.810
> 
> 标签：android

如何在 Android 中捕获弹出关闭事件？我想在用户关闭弹出窗口时执行一些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:58:01.967

覆盖`OnCancelListener`..

```
dialog.setOnCancelListener(new OnCancelListener() {         
@Override
public void onCancel(DialogInterface dialog) {
    //do somethiing
}
}); 
```

如果您正在使用，`PopupWindow`则覆盖`PopupWindow.OnDismissListener`

# java - Struts 1：如何设置 使用表单 bean 的价值？

> ID：15269271
> 
> 赞同：0
> 
> 时间：2013-03-07T10:54:30.043
> 
> 标签：java, jsp, struts

我想从表单中动态设置我的 multibox 的值。我正在使用`<display:table />`标签在表格中的表格中显示列表但是，我在表格的每一行上都有复选框，我希望根据列表中`value`与`disabled`表格中该行对应的对象设置属性. 这就是我目前正在做的事情。

```
<display:table  name="sessionScope.SearchForm.companyDevices" requestURI="my/action.jspa">
        <display:column>
                <html:multibox property="selectedDevices" 
value="${macAddress}" <!-- HERE -->
disabled="${isAssigned}"/> <!-- AND HERE -->
        </display:column>
        <display:column property="macAddress" title="Mac Address" />
        <display:column property="vendor" title="Vendor"/>
        <display:column property="model" title="Model"/>
        <display:column property="deviceStatus" title="Device Status" />

</display:table> 
```

正如您所看到的，列属性使用相同的`macAddress`bean 值并且它在那里成功显示了 macAddress，但是在 multibox 中由于某种原因它没有将值设置为 macAddress。`disabled`属性也是如此。

我似乎无法确定出了什么问题。如何为 a 中的多框设置动态值`display:table`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:22:31.870

我想出了一个办法。我将上面的 multibox 标签替换为

```
 <display:table  name="sessionScope.SearchForm.companyDevices" requestURI="my/action.jspa" id="device"> <!-- ID ATTRIBUTE ADDED -->

<html:multibox property="selectedDevices"><bean:write name="searchForm" property="companyDevices[${row_rowNum - 1}].macAddress" /></html:multibox> 
```

`rowNum`是 struts 中隐式创建的变量，用于检索特定行的行号。要识别行，需要分配 Id。通过在`display:table`我使用中将 id 设置为“设备”（从我的属性和`device_rowNum`的组合中隐式创建的变量）获取与其在列表中的位置相关联的行的特定数字，以便能够检索我想要的值.`id``rowNum`

# php - 我需要在 PHP 中将“1 小时 9 分钟”之类的内容转换为秒

> ID：15269273
> 
> 赞同：-1
> 
> 时间：2013-03-07T10:54:35.453
> 
> 标签：php, javascript, regex, google-maps, time

我正在编写一个基于谷歌 API 的在线导航应用程序，需要对文本到语音和弹出窗口进行计时。

这是我的情况：我收到类似“在 15 号交叉口，驶入 M4 朝伦敦方向出口（109 英里，1 小时 41 分钟）”之类的字符串，需要提取“1 小时 41 分钟”部分并将其转换为秒，这谷歌告诉我是 6060 秒。有人能帮忙吗？

我还需要提取“109 英里”部分（可能是“0.3 英里”或“16 英尺”）。我不知道该怎么做。我可以做 Ajax 和 API 的事情，我只需要以秒为单位的距离和时间（对于 JavaScript 的 setTimeout）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:58:39.243

通过 PHP，您可以将字符串转换为秒，如下所示：

```
strtotime("1 hour 9 minutes") - time(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:02:15.980

使用 JavaScript 提取数据，您可以使用返回的字符串`string.match(/\((\d+) mi, (.*)\)/)`在哪里。`string`

`119`对于这种情况，这将为您提供一个带有 [1]和 [2]的数组`1 hour 41 min`。然后你可以将它 ajax 到服务器并做你需要做的事情。

**也许一个更好的正则表达式会是** `string.match(/\((\d+) (mi|ft), (.*)\)$/)`，现在您知道第一个数字是*mi*还是*ft*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:00:10.350

有很多方法可以做到这一点，包括仅使用基于 stripos(x,y) 和 substr(x,y) 的函数，以及用于删除空格的修剪...

这是功能：

```
function extract_unit($string, $start, $end)
{
    $pos = stripos($string, $start);
    $str = substr($string, $pos);
    $str_two = substr($str, strlen($start));
    $second_pos = stripos($str_two, $end);
    $str_three = substr($str_two, 0, $second_pos);
    $unit = trim($str_three);
    return $unit;
} 
```

[在这里](http://www.bitrepository.com/extract-content-between-two-delimiters-with-php.html)阅读更多。

在您的情况下使用示例：

```
$text = '1 hour 9 mins';
$hours = (int)extract_unit($text, '', 'hour'); // Returns 1
$mins = (int)extract_unit($text, 'hour', 'mins'); // Returns 9
$secs = ($hours*3600) + ($mins*60); // Returns 4140 
```

# php - 如何按顺序从多维数组中获取数组

> ID：15269281
> 
> 赞同：0
> 
> 时间：2013-03-07T10:55:17.703
> 
> 标签：php, arrays, recursion, multidimensional-array

我有这种数组：

```
array(2) {
[1] => array(3) {
  [3] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(1) "3"
      ["depth"] => string(1) "1"
      ["parent_id"] => NULL
    }
  }
  [4] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(1) "4"
      ["depth"] => string(1) "1"
      ["parent_id"] => NULL
    }
  }
  [2] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(1) "2"
      ["depth"] => string(1) "1"
      ["parent_id"] => NULL
    }
  }
}
[2] => &array(3) {
  [15] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(2) "15"
      ["depth"] => string(1) "2"
      ["parent_id"] => string(1) "3"
    }
  }
  [16] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(2) "16"
      ["depth"] => string(1) "2"
      ["parent_id"] => string(1) "2"
    }
  }
  [18] => array(3) {
    ["data"] => array(3) {
      ["id"] => string(2) "18"
      ["depth"] => string(1) "2"
      ["parent_id"] => string(1) "4"
    }
  }
}
} 
```

第一级意味着深度（1 没有孩子，2 有父母没有孩子，等等）。数组项的顺序是正确的。我需要以相同的顺序获取不同的数组（当然取决于级别）。

```
array(6) {
[3] => array(3) {
  ["data"] => array(3) {
    ["id"] => string(1) "3"
    ["depth"] => string(1) "1"
    ["parent_id"] => NULL
  }
}
[15] => array(3) {
  ["data"] => array(3) {
    ["id"] => string(1) "15"
    ["depth"] => string(1) "1"
    ["parent_id"] => 3
  }
}
[4] => array(3) {
  ["data"] => array(3) {
    ["id"] => string(1) "4"
    ["depth"] => string(1) "1"
    ["parent_id"] => NULL
  }
}
[18] => &array(3) {
  ["data"] => array(3) {
    ["id"] => string(2) "18"
    ["depth"] => string(1) "2"
    ["parent_id"] => string(1) "4"
  }
}
[2] => array(3) {
  ["data"] => array(3) {
    ["id"] => string(2) "2"
    ["depth"] => string(1) "2"
    ["parent_id"] => NULL
  }
}
[16] => array(3) {
  ["data"] => array(3) {
    ["id"] => string(2) "16"
    ["depth"] => string(1) "2"
    ["parent_id"] => string(1) "2"
  }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:34:30.063

**

## 第一个解决方案

**

我找到了解决方案，但我不知道如何从中进行递归。它仅适用于两个级别。第三级是糟糕的秩序。变量 $this->hierarchicalData 包含第一个数组。

```
$_sortedHierarchyData = array();
foreach ($this->hierarchicalData as $levelKey => $_level) {
  foreach ($_level as $itemKey => $item) {
    if (isset($this->hierarchicalData[$levelKey + 1])) {
      $_sortedHierarchyData[$item['data']['id']] = $item;
      $children = $this->searchChildrenFromLevelOfHieararchicalSortedData($item['data']['id'], $this->hierarchicalData[$levelKey + 1]);
      $_sortedHierarchyData += $children;
    }               
  }
}

function searchChildrenFromLevelOfHieararchicalSortedData($parent_id, $level)
{
  $_children = array();
  foreach ($level as $key => $item) {
    if ($item['data']['parent_id'] === $parent_id) {
      $_children[$key] = $item;
    }
  }
  return $_children;
} 
```

# javascript - 向元素添加类

> ID：15269283
> 
> 赞同：-2
> 
> 时间：2013-03-07T10:55:26.257
> 
> 标签：javascript, jquery

*在下面的代码中，在方法之后生成新的 jquery 对象。如果不是，为什么 addClass 方法在div*和*p*元素上都是 addind class 'foo'

```
$('<div/>').after('<p></p>').addClass('foo')
  .filter('p').attr('id', 'bar').html('hello')
.end()
.appendTo('body'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:03:46.607

jQuery API 中解释了这个确切的场景：

“结果是一个 jQuery 集，其中包含一个 div 和一个段落，按此顺序。”

[http://api.jquery.com/after/](http://api.jquery.com/after/)

# bluetooth - 如何使用 Visual C++ 和 PC 连接蓝牙 OBD II

> ID：15269284
> 
> 赞同：1
> 
> 时间：2013-03-07T10:55:26.770
> 
> 标签：bluetooth, virtual, winsock, obd-ii

我正在尝试使用蓝牙 OBDII（车载诊断）与连接到我的计算机的蓝牙加密狗连接（我的操作系统是 windows 7）。加密狗连接到设备并为其分配了 2 个虚拟 com 端口（COM4 用于传入，COM5 用于传出），但不幸的是我无法通过虚拟 com 端口与该设备通信。我也尝试使用 winsock 库，但我没有找到任何使用蓝牙 OBD 和发送和接收仪器的示例。我刚刚找到了一个适用于 android 的蓝牙 API，但它对我没有用，因为我想在可视化 C++ 和 PC 中实现它。现在我有两个问题： 1\. 哪种方法更好，Virtual com port 或 winsock 以及如何？2\. 你有任何使用蓝牙 OBD 的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:47:40.417

1：你的设备有ELM327芯片吗？如果是这样，您可以通过蓝牙设置串行端口，并与该端口通信。我不太了解winsock，但我认为串口更适合这项工作。要进行设置，请查看此处：[http](http://windows.microsoft.com/en-us/windows7/choose-a-com-port-for-a-bluetooth-enabled-device) ://windows.microsoft.com/en-us/windows7/choose-a-com-port-for-a-bluetooth-enabled-device 如果您可以与设备，windows 7会自动设置吗？

2：您可能想看看：http: [//icculus.org/obdgpslogger/](http://icculus.org/obdgpslogger/)

它是开源的，所以你可以看看它是如何工作的。包中还有一个模拟器，可以帮助您开发/测试。大部分是基于 Linux 的，但它应该会给你提示去哪里。模拟器也有可用的 Windows 安装程序。

# c++ - 不稳定的单身成员？

> ID：15269285
> 
> 赞同：0
> 
> 时间：2013-03-07T10:55:27.047
> 
> 标签：c++, multithreading, locking, singleton, volatile

我有一个使用单例软件设计模式的状态引擎。状态引擎可以被多个线程访问。该对象是在程序启动时从主线程初始化的，不是为延迟初始化而设计的。

我的问题是，我是否应该像这样使公共静态成员变得易变：

```
class CStateEngine final
{
    private:
        /* Contains the Singleton object */
        static CStateEngine* instance;
    protected:
        CStateEngine();
    public:
        static CStateEngine* Instance() volatile;   // Returns the Singleton instance
        static void DeleteInstance() volatile;  // Deletes the Singleton instance
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:02:47.523

C++ 中的`volatile`关键字与任何其他语言中的关键字都不相同。在 C++ 中，这意味着编译器将确保始终从内存中新读取该值，并且从不使用缓存值。

它有它使用的嵌入式世界和其他地方。如果您想始终查看某个变量的最新视图，请将其标记为`volatile`.

然而，它与多线程无关。

您不应该在多线程环境中使用单例，因为当多个线程尝试访问您的对象时，这将成为争用的原因。这将导致您的程序滞后，并且首先完全无法使用线程。

您应该传递对象，并且应该能够根据需要创建新对象。

如果您不能这样做，请检查您的设计。

# java - 在流程构建器中获取实际命令的退出值

> ID：15269286
> 
> 赞同：2
> 
> 时间：2013-03-07T10:55:32.067
> 
> 标签：java, jar, cmd, processbuilder

我正在使用 ProcessBuilder 通过 java 代码执行 windows 命令，这是我的代码

```
String[] command = {"cmd.exe","/c","jar.exe"};
ProcessBuilder processBuilder  = new ProcessBuilder(command);
Process pro = processBuilder.start();
pro.waitFor();
int j = pro.exitValue(); 
```

在这种情况下，我得到“cmd.exe”的exitValue，我怎样才能得到“jar.exe”命令的exitValue

问候

# php - 注意：symfony2（连接用户）的 unserialize()

> ID：15269289
> 
> 赞同：2
> 
> 时间：2013-03-07T10:55:40.197
> 
> 标签：php, sql, symfony, bundle

在这里，当我单击提交按钮进行连接时出现此错误。

`Notice: unserialize(): Error at offset 0 of 9 bytes in /var/www/Blog/Symfony/vendor/doctrine/dbal/lib/Doctrine/DBAL/Types/ArrayType.php line 48`

要点：[https ://gist.github.com/AnthonyPavaux/5104546](https://gist.github.com/AnthonyPavaux/5104546)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-22T13:35:07.473

您可以替换此数组字段中的字符串。

我的“角色”专栏也遇到了这个问题。

将字符串替换为：

> 一：0：{}

对于用户角色，以及

> {i:0;s:10:"ROLE_ADMIN";}

管理员角色纠正了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-30T22:41:46.360

我遇到了同样的错误，因为我最近将我的一个实体字段更改为一个数组。此错误在列出所有实体的页面上弹出，但因为我从未更新此字段的数据库值（它们仍然是整数，当 php 期望序列化数组格式时），它会因此错误而死。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T20:55:18.293

我遇到了同样的错误，但是在安装 fos_user 时，在我的情况下，我需要一个像“a：{}”这样的 json 格式值，但是在我的字段中，由于某种原因，我得到了“（排除）”，所以当我试图弄清楚发生了什么时，我检查了一个数据库备份并注意到我需要的是插入一个“a：{}”值，一切都很顺利。

# php - Mysql选择多个表获取具有相同列的值

> ID：15269297
> 
> 赞同：0
> 
> 时间：2013-03-07T10:55:58.983
> 
> 标签：php, mysql

好吧，这很苛刻，

无论如何，我修改了我的问题并在这里做了一个代码示例。

我想要做的是，我**需要**获取**赠品表的列标题值**和**竞赛列标题值**

```
$query = "SELECT giveaway_table.title, competition.title FROM giveaway_table, competition WHERE giveaway_table.status=competition.status";
$result = db_query($query)->fetchObject(); 
```

如何检索值？

当我使用这个

```
echo $result->title; 
```

它只会呼应比赛的冠军价值。

**如何检索赠品表的标题列值？**

我用这个

```
$result->title[0] 
```

它只显示比赛标题值的第一个字母。

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:57:10.367

使用不同的别名：

```
$query = "SELECT giveaway_table.title as gtitle, competition.title as ctitle FROM giveaway_table, competition WHERE giveaway_table.status=competition.status"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:58:06.673

您可以使用别名来消除歧义：

```
$query = "SELECT giveaway_table.title AS giveaway_title, competition.title AS competition_title FROM giveaway_table, competition WHERE giveaway_table.status=competition.status";
$result = db_query($query)->fetchObject(); 
```

然后回显：

```
echo $result->competition_title;
echo $result->giveaway_title; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:02:28.263

使用别名

```
SELECT
  giveaway_table.title AS GiveAwayTitle,
  competition.title AS CompetitionTitle
FROM giveaway_table,
  competition
WHERE giveaway_table.status = competition.status 
```

用php

```
echo $result->GiveAwayTitle;
echo $result->CompetitionTitle; 
```

# objective-c - 检查一个 NSArray 的内容是否都在另一个数组中

> ID：15269301
> 
> 赞同：6
> 
> 时间：2013-03-07T10:56:11.520
> 
> 标签：objective-c, cocoa, cocoa-touch, collections, nsarray

我有一个`NSArray`字符串对象中的名称，如下所示：`@[@"john", @"smith", @"alex", @"louis"]`，我还有另一个包含很多名称的数组。如何检查第一个数组中的所有对象是否都在第二个数组中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T11:05:02.370

`NSSet`具有您正在寻找的功能。

如果我们暂时忽略性能问题，那么以下代码段将在一行代码中完成您需要的操作：

```
BOOL isSubset = [[NSSet setWithArray: array1] isSubsetOfSet: [NSSet setWithArray: mainArray]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:26:13.290

使用此代码..

```
NSArray *temp1 = [NSArray arrayWithObjects:@"john",@"smith",@"alex",@"loui,@"Jac", nil];
NSArray *temp2 = [NSArray arrayWithObjects:@"john",@"smith",@"alex",@"loui,@"Rob", nil];

NSMutableSet *telephoneSet = [[NSMutableSet alloc] initWithArray:temp1] ;
NSMutableSet *telephoneSet2 = [[NSMutableSet alloc] initWithArray:temp2];

[telephoneSet intersectSet:telephoneSet2];

 NSArray *outPut = [telephoneSet allObjects];
 NSLog(@"%@",outPut); 
```

输出数组包含：

```
"john","smith","alex","loui 
```

根据您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:04:10.290

```
int num_of_matches = 0;
for(NSString *name in mainArray)
{
      if(array1 containsObject:name){
      num_of_matches++;
     }
}
if(num_of_matches == [array1 count]{
      // All objects present
}else {
      // Matched number is equal of number_of_matches
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:04:22.097

如果您只需要检查 array1 中的所有对象是否都在 mainArray 中，您应该只使用`NSSet` 例如

```
BOOL isSubset = [[NSSet setWithArray:array1] isSubsetOfSet:[NSSet setWithArray:mainArray]] 
```

如果你需要检查 mainArray 中有哪些对象，你应该看看`NSMutableSet`

```
NSMutableSet *array1Set = [NSMutableSet setWithArray:array1];
[array1Set intersectSet:[NSSet setWithArray:mainArray]];
//Now array1Set contains only objects which are present in mainArray too 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:06:51.427

使用 NSArray filteredArrayUsingPredicate: 方法。在两个数组中找出相似类型的对象真的很快

```
NSPredicate *intersectPredicate = [NSPredicate predicateWithFormat:@"SELF IN %@", otherArray];
NSArray *intersectArray = [firstArray filteredArrayUsingPredicate:intersectPredicate]; 
```

从上面的代码相交数组为您提供了其他数组中的相同对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T11:07:13.043

试试这个方法；

```
NSArray *mainArray=@[@"A",@"B",@"C",@"D"];
NSArray *myArray=@[@"C",@"x"];

BOOL result=YES;
for(id object in myArray){
    if (![mainArray containsObject:object]) {
        result=NO;
        break;
    }
}
NSLog(@"%d",result); //1 means contains, 0 means not contains 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T11:03:14.813

您可以使用 的概念`[NSArray containsObject:]`，您的对象将来自您的 array1 就像您说 "john","smith","alex","loui"

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-07T11:00:53.397

运行一个循环并用于`isEqualToStiring`验证 mainArray 中是否存在 array1 对象。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-07T11:08:00.227

```
 NSArray *array1 = [NSArray arrayWithObjects:@"a", @"u", @"b", @"v", @"c", @"f", nil];
    NSMutableArray *mainArray = [NSMutableArray arrayWithObjects:@"a", @"u", @"I", @"G", @"O", @"W",@"Z",@"C",@"T", nil];
    int j=0;
    for(int i=0; i < mainArray.count; i++)
    {
        if (j < array1.count)
        {
            for( j=0; j <= i; j++)
            {
                if([[mainArray objectAtIndex:i] isEqualToString:[array1 objectAtIndex:j]] )
                {
                    NSLog(@"%@",[mainArray objectAtIndex:i]);
                }
            }
        }

    } 
```

# ios - 带有长标签的 UITableViewCells 在编辑模式下不会缩进

> ID：15269304
> 
> 赞同：1
> 
> 时间：2013-03-07T10:56:28.440
> 
> 标签：ios, uitableview, ios6

我在 iOS 6.1 中有一个带有基本 (UITableViewCellStyleDefault) UITableViewCells 的普通 (UITableViewStylePlain) UITableView。当它进入编辑模式时，它的单元格按我想要的方式缩进。但只有在所有单元格标签都很短的情况下：如果一个单元格的标签足够长，可以在右侧剪裁，则表格单元格将不再缩进。

例如：

1.  一个单元格的表格：（SHORT）=>缩进，即有效
2.  有两个单元格的表格：(LONG) (SHORT) => 两个单元格都没有缩进，即不起作用

有哪些简单的步骤可以解决这种情况？例如，似乎我无法更改基本的预设大小属性，即 Xcode 中的非自定义表格视图单元格。

**更新：**这里有两张图片进一步描述了这个问题（第一个：正确的情况，第二个：不正确的情况）：

![在此处输入图像描述](../Images/42dc463a098d2fc56fc27b6c4aa5855c.png) ![在此处输入图像描述](../Images/c1540ec2eeb806aeb0a65a647e71281c.png)

**更新：**事实证明，根本原因不是标签的长度。相反，它似乎与我的异步有关。与此表视图相关的 KVO 处理。我`tableView:cellForRowAtIndexPath:`在单元格的底层托管（核心数据）对象上调用了一个 getter。似乎托管对象的默认 getter 依次调用它们自己的 setter，可能是在实现[错误](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)对象时。由于我的 KVO 的设置方式，这会导致另一个调用`tableView:cellForRowAtIndexPath:`. 碰巧的是，只有第二种情况涉及 KVO 通知，随后的递归调用可能会导致问题（无论如何这似乎有点奇怪）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:24:17.870

我已经能够通过在表视图的数据源的构造函数中“预取”底层托管对象来解决这个问题。我通过访问表格单元格中显示的属性来做到这一点。这样，第一个 KVO 通知将在不会导致不必要的递归调用`tableView:cellForRowAtIndexPath:`.

如果有更好（更优雅）的方式来处理这种情况，我仍然有兴趣了解它。

# c++ - 重新展开树视图项

> ID：15269305
> 
> 赞同：0
> 
> 时间：2013-03-07T10:56:28.547
> 
> 标签：c++, mfc, treeview, treeviewitem

我正在开发一个旧的 MFC 应用程序。应用程序中有一个 TreeView 控件。OnItemExpanding 函数被覆盖。我得到一个 TreeViewItem 的孩子，它被扩展了。如果一个节点第一次展开，它的子节点被填充。如果项目没有子项，则展开图标（+ 号）将从 TreeViewItem 中删除。

现在的问题是我扩展了一个没有子节点的节点。完成一些工作后，子节点被添加到该节点。但是现在我无法获得新添加的孩子，因为缺少展开图标。如何刷新 TreeView 中的特定节点。我创建了一个刷新按钮。这样我就可以在 TreeView 中找到我当前选择的节点，但是接下来要做什么。

这是代码。

```
void CMyTreeView::OnItemExpanding(CTreeCtrl& tree, NMHDR* pNMHDR, LRESULT* pResult) 
{
   //This is only called when I click on expand (+ sign)
   //some check here which populates children.
}

void CMyTreeView::RefreshNode(CTreeCtrl& tree, HTREEITEM selectedNode)
{
    // What should I do here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:08:21.047

您必须将 TVITEM 的 cChildren 设置为“一”：

```
TVITEM tvItem = {0};
tvItem.mask   = TVIF_HANDLE | TVIF_CHILDREN;
tvItem.hItem  = selectedNode;
tvItem.cChildren = 1;
tree.SetItem(&tvItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:26:41.890

您正在尝试重新发明通用控件库已经可以为您做的事情。

您需要做的是，当您插入一个“文件夹”项集时`itemex.cChildren = I_CHILDRENCALLBACK`，它将告诉树`TVN_GETDISPINFO`在需要知道该项是否有子项时向您发送通知。然后它会类似地发送`TVN_GETDISPINFO`给每个孩子。

它只会在绝对必要时发送通知，因此您无需白做任何昂贵的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:08:42.670

我会说，您需要更改 ItemState：http: [//msdn.microsoft.com/de-de/library/ce034e69%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/ce034e69%28v=vs.80%29.aspx)

BOOL SetItemState(HTREEITEM hItem, UINT nState, UINT nStateMask);

看看HTREEITEM：

```
typedef struct tagTVITEM {
  UINT      mask;
  HTREEITEM hItem;
  UINT      state;
  UINT      stateMask;
  LPTSTR    pszText;
  int       cchTextMax;
  int       iImage;
  int       iSelectedImage;
  int       cChildren;
  LPARAM    lParam;
} TVITEM, *LPTVITEM;

cChildren Type: int

Flag that indicates whether the item has associated child items. This member can be one of the following values. 
```

# javascript - 如何从具有 $.Ajax() 方法的 javascript 函数返回状态值

> ID：15269309
> 
> 赞同：0
> 
> 时间：2013-03-07T10:56:33.043
> 
> 标签：javascript, asp.net

我有一个返回状态值的 java 脚本函数。我的功能如下：

```
function IsReportAlreadyExists() {
            var result=true;
            $.ajax({
                type: "POST",
                url: "ReportDetail.aspx/CheckReport",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d != "") {
                       result= confirm(msg.d);
                    }
                },
                failure: function (response) {
                    alert(response.d);
                },
                error: function (response) {
                    alert(response.d);
                }
            });
            return result;
        } 
```

我在 asp.net 按钮控件的客户端单击事件上调用此函数。

```
 <asp:Button ID="btnSave" Style="margin-right: 10px" runat="server" CausesValidation="false"
                                                    OnClick="btnSave_Click" Text="Save" Width="70px" OnClientClick="return IsReportAlreadyExists();" /> 
```

在客户端单击按钮时，javascript 函数总是返回一个真值。我的意思是我没有得到由确认（msg.d）设置的结果值。有什么方法可以实现吗？请帮帮我。您的帮助将不胜感激。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:30:21.987

这是因为代码是异步的。首先它返回 result=true ，然后在 ajax 调用完成后结果被改变。您需要在成功回调中处理您的结果。

# javascript - 单选按钮列出javascript中的选定项目值

> ID：15269311
> 
> 赞同：2
> 
> 时间：2013-03-07T10:56:34.487
> 
> 标签：javascript, asp.net

我正在使用以下代码来获取单选按钮列表中的选定元素值。

```
function SelectRadioButton()
{
   var radiobutton = document.getElementsByName('<%=RadioButtonList1.ClientID %>');
   alert(radiobutton.length);
for(var x = 0; x < radiobutton.length; x++)
            {
                if(radiobutton[x].checked)
                {
                    alert('selected is ' + radiobutton[x].id);
                }
             }
 } 
```

以下是 HTML 标记

```
 <table id="ctl00_ContentPlaceHolder1_idControl_RadioButtonList1" class="chk" onclick="javascript:SelectRadioButton(this, ctl00_ContentPlaceHolder1_idControl_RadioButtonList1)" border="0">
    <tr>
        <td><input id="ctl00_ContentPlaceHolder1_idControl_RadioButtonList1_0" type="radio" name="ctl00$ContentPlaceHolder1$idControl$RadioButtonList1" value="1" checked="checked" /><label for="ctl00_ContentPlaceHolder1_idControl_RadioButtonList1_0">List</label></td><td><input id="ctl00_ContentPlaceHolder1_idControl_RadioButtonList1_1" type="radio" name="ctl00$ContentPlaceHolder1$idControl$RadioButtonList1" value="2" /><label for="ctl00_ContentPlaceHolder1_idControl_RadioButtonList1_1">Assignment</label> 
```

但我在警报中得到长度 0(radiobutton.length); 陈述。为什么会这样。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:18:47.643

您可以使用 jquery 来执行此操作。

```
 alert($(".chk").find("input:checked").length); // chk is your css class name applied to Checkbox List element. 
```

您可以使用此获取特定元素

```
alert($(".chk").find("input:checked")[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:01:39.587

`RadioButtonList1`将被转换为具有 ids 的单选按钮`RadioButtonList1`，您可以遍历 DOM 并查找匹配`ids`并将它们放入某个数组或直接执行您想要的操作。

```
radiobutton = [];

for(i=0;i<document.forms[0].length;i++)
{
    e=document.forms[0].elements[i];
    if (e.id.indexOf("RadioButtonList1") != -1 )
    {
           radiobutton.push(e); 

    }       
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:33:25.570

如果您不想使用，这里是仅使用 javascript 的方法`getElementById`

* * *

## 代码 | [JSFiddle](http://jsfiddle.net/Qusxt/)

```
function SelectRadioButton(){
    var radiolist = getElementsByClass("table", "chk")[0],
        radios = radiolist.getElementsByTagName("input");

    for(var i = 0; i < radios.length; i++){
        if(radios[i].checked){
            alert('Selected radiobutton is ' + radios[i].id);
        }
    }
 }

function getElementsByClass(tag, name){
    var elements = document.getElementsByTagName(tag);
    var ret = [];

    for(var i = 0; i < elements.length; i++){
        if(elements[i].className.indexOf(name) !== -1){
            ret.push(elements[i]);
        }
    }

    return ret;
} 
```

# android - solo.clickOnButton() 无法正常工作

> ID：15269314
> 
> 赞同：0
> 
> 时间：2013-03-07T10:56:36.607
> 
> 标签：android, listview, button, robotium

我正在尝试在循环中使用 solo.clickOnButton()，但该按钮仅是第一次单击。之后，它根本不点击。场景是这样的：我有一个 listView，当我单击列表中的每个项目时，会打开一个活动并且该活动有一个按钮。我试图每次都点击那个按钮。这是我的代码：

```
for(int i=0; i < list.getAdapter().getCount(); i++){
            solo.clickOnView(getViewAtIndex(list, i, getInstrumentation()));

            solo.assertCurrentActivity("DetailsActivity not found", "DetailsActivity");
            Button fullDetails = (Button) solo.getCurrentActivity().findViewById(
                    R.id.btn);
                solo.sleep(2000);
                //solo.waitForView(fullDetails, 4000, true);
                solo.clickOnView(fullDetails);
                    solo.goBack();
                  } 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:04:10.523

你有没有尝试过：

```
solo.clickOnView(solo.getView(com.example.test.R.id.your_view)); 
```

[如果问题仍然存在，我建议你在这里](https://code.google.com/p/robotium/issues/list)问机器人人

祝你好运

# scala - 是否可以以编程方式更改 Scala REPL 的提示？

> ID：15269324
> 
> 赞同：9
> 
> 时间：2013-03-07T10:57:14.423
> 
> 标签：scala, read-eval-print-loop

我想更改 Scala REPL 的提示。我发现我可以在电源模式下更改提示，如下所示。

```
scala> 

scala> :power
** Power User mode enabled - BEEP WHIR GYVE **
** :phase has been set to 'typer'.          **
** scala.tools.nsc._ has been imported      **
** global._, definitions._ also imported    **
** Try  :help, :vals, power.<tab>           **

scala> repl.setPrompt("\ncool prompt!> ")

cool prompt!> 
```

现在我想在正常模式或`initialCommands`sbt 控制台中执行此操作。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T13:44:17.110

斯卡拉 2.10.0

```
$intp.asInstanceOf[scala.tools.nsc.interpreter.ILoop$ILoopInterpreter]
     .getClass
     .getDeclaredField("$outer").get($intp)
     .asInstanceOf[scala.tools.nsc.interpreter.ILoop]
     .setPrompt("\ncool prompt!> ") 
```

# .net - 无法在单个 Windows 服务下访问多个 WCF 服务

> ID：15269326
> 
> 赞同：0
> 
> 时间：2013-03-07T10:57:17.060
> 
> 标签：.net, wcf, windows-services

我已经构建了具有 2 个服务的 WCF 应用程序。我想在 Single Windows 服务下访问它们。我只能访问 2 项服务中的一项。我的 app.config 如下所示：

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
  <services>
    <service behaviorConfiguration="DefaultBehavior" name="FinalTest.CalculatorService">
      <endpoint address="" binding="netTcpBinding" bindingConfiguration="TCPBindingConfig" name="TCPEndpoint" contract="FinalTest.ICalculator" />
      <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="TcpMetaData" contract="IMetadataExchange" />
      <host>
        <baseAddresses>
          <add baseAddress="net.tcp://localhost:8001/FinalTest/CalculatorService" />
        </baseAddresses>
      </host>
    </service>
    <service behaviorConfiguration="DefaultBehavior" name="FinalTest.Hello">
      <endpoint address="" binding="netTcpBinding" bindingConfiguration="TCPBindingConfig" name="TCPEndpoint" contract="FinalTest.IHello" />
      <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="TcpMetaData" contract="IMetadataExchange" />
      <host>
        <baseAddresses>
          <add baseAddress="net.tcp://localhost:8002/FinalTest/Hello" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <bindings>
    <netTcpBinding>
      <binding name="TCPBindingConfig" maxBufferSize="5242880" maxReceivedMessageSize="5242880">
        <readerQuotas maxStringContentLength="5242880" />
        <security mode="None" />
      </binding>
    </netTcpBinding>
  </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior name="DefaultBehavior">
        <serviceMetadata httpGetEnabled="false" />
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceThrottling maxConcurrentCalls="21" maxConcurrentSessions="50" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel>

</configuration> 
```

我正在参考[这个](http://blog.thijssen.ch/2009/08/hosting-multiple-wcf-services-under.html)示例来访问单个 Win 下的多个 WCF 服务。服务。

我的服务一代码如下所示：

```
 [ServiceContract(Namespace = "http://FinalTest")]
    public interface IHello
    {
        [OperationContract]
        string GetHello();
    }
    /// <summary>
    /// TODO: Update summary.
    /// </summary>
    public class Hello:IHello
    {
        public string GetHello()
        {
            return "Hello World";
        }
    } 
```

我实现了 ServiceManager 类。

```
public class ServiceManager
    {
        public ServiceHost serviceHost = null;
        readonly List<ServiceHost> serviceHosts = new List<ServiceHost>();

        public void OpenAll()
        {
            OpenHost<CalculatorWindowsService>();
            OpenHost<Hello>();
        }

        public void CloseAll()
        {
            foreach (ServiceHost serviceHost in serviceHosts)
                serviceHost.Close();
        }

        private void OpenHost<t>()
        {
            Type type = typeof(t);
            ServiceHost serviceHost = new ServiceHost(type);
            serviceHost.Open();
            serviceHosts.Add(serviceHost);
        }
    } 
```

我的 Windows 服务代码

public class WindowsService : ServiceBase { // public ServiceHost serviceHost = null; //public CalculatorWindowsService() //{ // // 命名 Windows 服务 // ServiceName = "WCFWindowsServiceSample"; //}

```
public static string WindowsServiceName = "TestService";
public static string WindowsServiceDescription = "Windows Service Description";
public static string WindowsServiceUsername = @"Rahul";
public static string WindowsServicePassword = "password";

private readonly ServiceManager serviceManager = new ServiceManager();

private readonly IContainer components = new Container();

protected override void Dispose(bool disposing)
{
    if (serviceManager != null) serviceManager.CloseAll();
    if (disposing && (components != null)) components.Dispose();
    base.Dispose(disposing);
}

public WindowsService()
{
    ServiceName = WindowsServiceName;
    CanStop = true;
}

protected override void OnStart(string[] args)
{
    base.OnStart(args);
    serviceManager.OpenAll();
}

protected override void OnStop()
{
    serviceManager.CloseAll();
    base.OnStop();
}

public static void Main()
{
    //ServiceBase.Run(new CalculatorWindowsService());

    if (Environment.UserInteractive)
    {
        ServiceManager serviceManager = new ServiceManager();
        serviceManager.OpenAll();
        Console.ReadKey();
        serviceManager.CloseAll();
    }
    else
        ServiceBase.Run(new WindowsService());
} 
```

}

和安装程序代码

```
 [RunInstaller(true)]
    public class ProjectInstaller : Installer
    {

        public ProjectInstaller()
        {  
        Installers.Add(new ServiceInstaller  
                           {  
                               StartType = ServiceStartMode.Automatic,  
                               ServiceName = WindowsService.WindowsServiceName,  
                               Description = WindowsService.WindowsServiceDescription  
                           });  
        Installers.Add(new ServiceProcessInstaller { Account = ServiceAccount.User, Username = WindowsService.WindowsServiceUsername, Password = WindowsService.WindowsServicePassword });  
    }  
    } 
```

# php - 当我使用 mod_rewrite 时返回错误的参数

> ID：15269332
> 
> 赞同：0
> 
> 时间：2013-03-07T10:57:28.263
> 
> 标签：php, apache, mod-rewrite

我想拥有像这种格式的动态网址：

```
[SITE_URL]/[MODULE]/[PARAMETERS] 
```

所以我写了这段`mod_rewrite`代码：

```
RewriteRule (.*)/(.*)$ module.php?mod=$1&req=$2 [L] 
```

示例网址为：test-domain.com/users/register/step/2

上面的`mod_rewrite`代码会将参数返回给 php，但我的 php 中有这个参数：

```
echo $_GET['mod']; // return users/register/step/2
echo $_GET['req']; // return empty 
```

我希望我的重写代码返回`users`为.`mod``register/step/2``req``module.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:46:37.120

试试这个：

```
RewriteRule ^([^/]+)/(.*)$ module.php?mod=$1&req=$2 [L] 
```

# git - Git 扩展 - 无法连接到 GitHub，但使用命令行很好

> ID：15269334
> 
> 赞同：1
> 
> 时间：2013-03-07T10:57:33.430
> 
> 标签：git, git-extensions

非常感谢您的帮助！

我正在尝试将本地存储库拉到 GitHub，但由于某种原因，Git Extensions 无法与其连接。我已经尝试了一切，但我完全没有想法或地方来寻找解决方案。

这是我使用 Putty（实际上是 Puttycyg）推送存储库时得到的结果：

![在此处输入图像描述](../Images/f119045c64ecf7243b0326c2b3cd9ae8.png)

这是我尝试使用 Git Extensions 推送我的存储库时得到的结果：

![在此处输入图像描述](../Images/f1841800aaf590441e0a966c311b3044.png)

这是我的遥控器标签：

![在此处输入图像描述](../Images/3d9bfa8bda3fd7ce19bc992a7b2aa953.png)

这是我点击测试时得到的：

![在此处输入图像描述](../Images/4bc0571790484c170427921e94ff0cdc.png)

最后，还有更多内容展示了我的计算机和 GitHub 中的内容：

![在此处输入图像描述](../Images/1dbb6f6e3da20fe3f06e3968761515f9.png)

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:12:57.990

检查`%HOME%`PowerShell 会话中的内容。

如果你想让 ssh 找到你的密钥，`HOME`应该设置为: `C:\Users\rafaelgp\AppData\Roaming`，以便找到`.ssh`你的密钥所在的目录。

或者至少将私钥的完整路径放在“远程存储库”对话框中的“PuTTY SSH 私钥文件”字段中。

# javascript - 如何在客户端获取服务器端 html 复选框的值？

> ID：15269339
> 
> 赞同：1
> 
> 时间：2013-03-07T10:57:41.433
> 
> 标签：javascript, html, server-side

假设我在页面上有一些服务器端 HTML 元素，如下所示：

```
<div id="cblDomain" runat="server">
    <input runat="server" id="cblDomain_com" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain" checked="checked"><label for="cblDomain_com">com - 10</label><br>
    <input runat="server" id="cblDomain_net" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_net">net - 10</label><br>
    <input runat="server" id="cblDomain_info" value="5" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_info">info - 5</label><br>
    <input runat="server" id="cblDomain_me" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_me">me - 10</label>
</div>

<select runat="server" name="ddlDomainPeriod" onchange="subsumDomain()" id="ddlDomainPeriod">
    <option value="1">1 yr</option>
    <option value="2">2 yrs</option>
    <option value="3">3 yrs</option>
    <option value="4">4 yrs</option>
    <option value="5">5 yrs</option>
</select>
<div name="sum" id="sumDomain">10</div> 
```

我想用 Domains & Year 进行计算，并在 SUM (div) 中显示结果。

JavaScript 工作正常，因为它没有`runat="server"`属性，但不是它不工作。

这是我在添加`runat`s 之前使用的（工作）JavaScript：

```
 <script type="text/javascript">
        function subsumDomain() {
            var _sum = 0;
            var _cblDomain = document.getElementsByName('cblDomain');
            for (i = 0; i < _cblDomain.length; i++) {
                if (_cblDomain[i].checked == true)
                    _sum += Number(_cblDomain[i].value);
            }
            var _domainPeriod = Number(document.getElementById('ddlDomainPeriod').options[document.getElementById('ddlDomainPeriod').selectedIndex].value);
            document.getElementById('sumDomain').innerHTML = moneyConvert(_sum * _domainPeriod);
        }
</script> 
```

现在代码对我来说有点复杂，我不知道如何修复它并获得正确的答案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:53:54.010

这里有很多问题：

在您的下方`inputs`并且`br`没有结束标签。

```
<input runat="server" id="cblDomain_com" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain" checked="checked"><label for="cblDomain_com">com - 10</label><br> 
```

我无法让下面的代码与服务器控件一起使用，数组为空。

```
var _cblDomain = document.getElementsByName('cblDomain');
var _cblDomain = $(".cblDomain :input"); <-- USE THIS INSTEAD (jQuery) * 
```

还

```
document.getElementById('ddlDomainPeriod')
document.getElementById('<%= ddlDomainPeriod.ClientID %>') <-- USE THIS INSTEAD * 
```

完整的工作代码如下：

标记

```
<div class="cblDomain" id="cblDomain" runat="server">
  <input runat="server" id="cblDomain_com" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain" checked="checked" /><label for="cblDomain_com">com - 10</label><br>
  <input runat="server" id="cblDomain_net" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_net" />net - 10</label><br>
  <input runat="server" id="cblDomain_info" value="5" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_info" />info - 5</label><br>
  <input runat="server" id="cblDomain_me" value="10" onchange="subsumDomain()" type="checkbox" name="cblDomain"><label for="cblDomain_me" />me - 10</label>
</div>
  <select runat="server" name="ddlDomainPeriod" onchange="subsumDomain()" id="ddlDomainPeriod">
    <option value="1">1 yr</option>
    <option value="2">2 yrs</option>
    <option value="3">3 yrs</option>
    <option value="4">4 yrs</option>
    <option value="5">5 yrs</option>
  </select>
<div name="sum" id="sumDomain">10</div> 
```

Javascript，**也使用 jQuery**。

```
function subsumDomain() {
  var _sum = 0;
  var _cblDomain = document.getElementsByName('cblDomain');
  var _cblDomain = $(".cblDomain :input");
  for (i = 0; i < _cblDomain.length; i++) {
    if (_cblDomain[i].checked == true)
      _sum += Number(_cblDomain[i].value);
  }
  var _domainPeriod = Number(document.getElementById('<%= ddlDomainPeriod.ClientID %>').options[document.getElementById('<%= ddlDomainPeriod.ClientID %>').selectedIndex].value);
  document.getElementById('sumDomain').innerHTML = _sum * _domainPeriod;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:56:42.510

如果在添加 runat="server" 之前它正在工作，那么问题可能是由于 ASP.NET 更改了控件的 ID。

如果您使用的是 ASP.NET 4，您可以使用 ClientIDMode 属性来阻止 ID 被更改 ( [http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx) ) ：

例如 div 将是

```
<div id="cblDomain" runat="server" ClientIDMode="Static"> 
```

下拉菜单是

```
<select runat="server" name="ddlDomainPeriod" onchange="subsumDomain()" id="ddlDomainPeriod" CliendIDMode="Static"> 
```

您还需要更改 javascript 以通过 ID 而不是名称获取 div 元素：

```
var _cblDomain = document.getElementById('cblDomain'); 
```

如果您使用的是 ASP.NET 2，那么您将需要获取控件的 ClientID。如果 javascript 是 .aspx 页面的一部分，那么您可以这样做：

```
var _cblDomain = document.getElementById('<%= cblDomain.ClientID %>'); 
```

# google-chrome - iText 不兼容问题，适用于 Internet Explorer，但不适用于 Chrome 或 Firefox

> ID：15269340
> 
> 赞同：1
> 
> 时间：2013-03-07T10:57:41.820
> 
> 标签：google-chrome, firefox, adobe, itext, incompatibility

早上好，

我想知道 Firefox 或 Chrome 是否存在 iText 兼容性问题。我正在创建一个自打印的 pdf 文档，其中嵌入了 javascript。这个 javascript 是一个函数调用，它调用位于

C:\Program Files (x86)\Adobe\Reader 11.0\Reader\Javascripts

问题是我可以从 Internet Explorer 正确打印它，但不能从 Firefox 或 Chrome 打印。所以我想知道这些元素之间是否存在兼容性问题。我正在使用以下内容：

*   Windows 7的
*   文本 2.0.2
*   火狐 19
*   铬 25
*   互联网浏览器 9

我还看到我的应用程序没有调用 .js，就好像它找不到它一样。我知道这一点是因为我在 .js 的开头添加了一个虚拟警报。这适用于 IE，但不适用于其他浏览器

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T23:29:41.020

PDF.js 不完全支持自动打印，但只要您使用标准的 print() 函数，打印对话框应该会从 Firefox 20 开始自动出现。见[https://bugzilla.mozilla.org/show_bug.cgi?id=843342](https://bugzilla.mozilla.org/show_bug.cgi?id=843342)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:39:06.380

我不确定这是否有帮助，但我遇到了 FF 原生阅读器的间距问题，所以一个带有标签的句子（下面记为 VARIABLE）在 Adob​​e 上读起来像这样

```
"This has spaces between a VARIABLE" 
```

但是在 FF 本机阅读器上这样阅读 `"This has spaces between aVARIABLE"`（变量之间没有空格）

我使用 Unicode 字符在标签之间插入空格，但事实证明这是导致问题的原因。另外，如果我只是将变量放在新行上，之前的行上有一个空格，那似乎也可以

# java - 如何从 Java 控制器将值传递给 jsp 变量

> ID：15269346
> 
> 赞同：-2
> 
> 时间：2013-03-07T10:57:54.013
> 
> 标签：java, jsp, spring-mvc

我的 .jsp 中有以下代码：

```
 <% for(int i=0; i <= 10; i++) 
{ %>
    <TR>
        <td>${values[i][0]}</td>
        <td>${values[i][1]}<input type="button" width="60" value="EDIT"></td>
        <td>${values[i][2]}<input type="button" width="60" value="RESET"></td>
    </TR>
<% } %> 
```

我在 Java 中的控制器类返回一个数组，我想将它分配给 jsp 的变量：

```
 model.addAttribute("values", results); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:07:20.120

检查您的 EL 表达式，`${values[i][0]}`这是不正确的。

试试这个代码：

```
<c:forEach var="value" items="${values}">
    <td>${value.name}</td> <!-- will be attributes of the object stored in controller -->
</c:forEach> 
```

# php - 单个php行内的关联数组

> ID：15269352
> 
> 赞同：0
> 
> 时间：2013-03-07T10:58:12.457
> 
> 标签：php, mysql

我想咨询如何最好地做到以下几点：

我有某些主要值，我想将它们作为数组插入到我的 MySQL 数据库中，假设这是父母。

```
array(parent1,parent2,parent3,parent4); 
```

现在，这些父母各有一个或多个孩子，例如：

```
parent1 => child1,
parent2 => child1,child2,child3,
parent3 => child1, child2, child3 
```

等等...

我将有一个表单，您可以在其中添加父级，添加此表单后，您可以向其中添加 X 个子级。

那么处理这种情况的最佳方法是什么，我想它需要一个关联数组，有人可以给我一个建议，使用 php 和 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:29:54.777

您可以创建一个如下所示的数组：

```
$arr = array(
    'parent1' => array('child1'),
    'parent2' => array('child1', 'child2'),
    'parent3' => array('child1', 'child2', 'child3')
);
// Debugging...
var_dump(array_keys($arr)); // These are the parents
var_dump(array_values($arr)); // And these are their children 
```

然后，插入：

```
var_dump('INSERT INTO `parents` (`name`) VALUES ("'.implode('"), ("', array_keys($arr)).'");'); // These are the parents
foreach ($arr as $parent => $children)
    var_dump('INSERT INTO `children` (`parent_name`, `name`) VALUES ("'.$parent.'", "'.implode('"), ("'.$parent.'", "', array_keys($children)).'");'); // These are the children 
```

更改`var_dump()`为用于运行查询的相应方法。

# iphone - 添加 % 登录标签值

> ID：15269360
> 
> 赞同：0
> 
> 时间：2013-03-07T10:58:38.713
> 
> 标签：iphone, ipad, uilabel

如何使用以下代码为标签值添加 % 符号以在标签上设置值

```
 deathLabelOne.text=[NSString stringWithFormat:@"%.2f",r_Fatal_NV]; 
```

我想要这个值之后的标签

```
 I have tried like this 

        deathLabelOne.text=[NSString stringWithFormat:@"%.2f%",r_Fatal_NV]; 
```

但这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:01:40.600

这不是标签的事实，而是格式字符串的事实 - 在任何使用格式字符串的地方都会遇到这个问题。格式字符串中百分号的表示形式是`%%`. 所以你想要这个：

```
deathLabelOne.text=[NSString stringWithFormat:@"%.2f%%",r_Fatal_NV]; 
```

有关更多详细信息，请参阅[字符串格式说明符](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)。

# ios6 - 无法在 viewdidload 之外访问 NSString

> ID：15269365
> 
> 赞同：0
> 
> 时间：2013-03-07T10:58:54.627
> 
> 标签：ios6, nsstring, nsarray

我`NSString`在 .h 文件中有一个声明。然后我在`ViewDidload`. 在我的`didSelectRowatIndex`事件中，想要将该值分配给先前 Viewcontroller 中的另一个字符串。

。H

`

```
 NSString *strWifiId;

 NSArray *arrstrWifiId;` 
```

`
- (void)viewDidLoad {

```
 arrstrWifiId=[arrWorkflow valueForKey:@"WFID"];

        strWifiId=[NSString stringWithFormat:@"%@",[arrstrWifiId objectAtIndex:0] ];
 } 
```

`

`

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSArray *array = [self.navigationController viewControllers];

NSLog(@"navi array count ----- %d",[array count]);

UITableViewCell *selectedCell=[tableView cellForRowAtIndexPath:indexPath];

for (UIViewController* viewController in self.navigationController.viewControllers) {

    if ([viewController isKindOfClass:[SendTimeChangeRequestViewController class]] ) {

        SendTimeChangeRequestViewController *groupViewController = (SendTimeChangeRequestViewController*)viewController;

        [groupViewController.btnwrkflwFirstApprove setTitle:selectedCell.textLabel.text forState:UIControlStateNormal];

        groupViewController.pWorkFlowID=strWifiId;

        NSLog(@"WFID---- %@",groupViewController.pWorkFlowID);
        //NSLog(@"CELL TAG----- %@",groupViewController.pAuthEmployeeCode);

        [self.navigationController popToViewController:groupViewController animated:YES];
    }
} 
```

`

这里`NSLog`打印一些垃圾值。为什么那是 n 我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:57:50.520

您拥有`initWithFormat`您负责释放的返回对象，但您不拥有`stringWithFormat`返回自动释放字符串的返回对象，因此不需要释放它（如果您确实想拥有它的所有权，则必须保留它）。

因此，为了解决您的问题，请尝试像这样分配您的价值，

```
- (void)viewDidLoad {

        arrstrWifiId=[arrWorkflow valueForKey:@"WFID"];

        strWifiId=[[NSString alloc] initWithFormat:@"%@",[arrstrWifiId objectAtIndex:0] ];
 } 
```

# extjs - 如何在 Ext.js 中设计图表？

> ID：15269368
> 
> 赞同：2
> 
> 时间：2013-03-07T10:59:07.520
> 
> 标签：extjs, extjs4, extjs4.1, sencha-charts

我已经开始使用 Ext.js 处理图表。我是这个 Ext.js 的新手。我附上了图片chart1和chart2。我需要设计类似chart1 的图表，但它不会来。我做了图表，但它显示像chart2。怎样才能实现像chart1。**我附上了两张图片以供参考。任何人都可以给我提示/解决方案如何解决这个问题。基于日期和工作价值的图表线必须出现，另一条基于停机时间和日期的图表线必须出现**。在第一个图表中，蓝色/红色点和线显示在值上，我还想知道一件事，是否有可能在 Ext.Js 图表中绘制非连续线？非常感谢，谢谢

**这里商店代码：**

```
Ext.define('Graph.store.GraphStore', {
    extend: 'Ext.data.Store',
    model: 'Graph.model.GraphModel',
    data: [
        { status: '0', date: new Date(2012, 1, 1),mdate: new Date(2012, 2, 1) },
        { status: 'Jobs', date: new Date(2012, 1, 15),mdate: new Date(2012, 2, 5) },
        { status: 'Down Time', date: new Date(2012, 1, 29),mdate: new Date(2012, 2, 28) }
    ],
    autoLoad: true
}); 
```

**这里型号代码：**

```
Ext.define('Graph.model.GraphModel', {
    extend: 'Ext.data.Model',
    fields: ['status', 'date','mdate']
}); 
```

**在这里查看代码：**

```
Ext.define("Graph.view.GraphView", {
    extend:'Ext.container.Container',
    alias:'widget.mainGraphView',
    requires:['Ext.chart.Chart','Ext.chart.axis.Numeric','Ext.chart.axis.Time','Ext.chart.series.Line','Ext.chart.axis.Category'],
    initComponent: function() {

        this. layout={
            type: 'vbox',
            align:'stretch',
            pack: 'center'
        };
        this.items=[
                {
                    xtype: 'chart',
                    animate: true,
                    theme: 'Green',
                    background: {
                        fill: '#ccc'
                    },
                    shadow: true,
                    width: window.innerWidth,
                    height: window.innerHeight,
                    store : 'GraphStore',
                    axes: [
                        {
                            title: 'MCF',
                            type: 'Category',
                            position: 'left',
                            fields: ['status'],
                            grid: {
                                odd: {
                                    opacity: 1,
                                    fill: '#ddd',
                                    stroke: '#bbb',
                                    'stroke-width': 1
                                }
                            }
                        },
                        {
                            type: 'Time',
                            position: 'bottom',
                            fields: ['date'],
                            title: 'Day',
                            dateFormat: 'F, Y',
                            constrain: true,
                            fromDate: new Date('1/1/12'),
                            toDate: new Date('3/30/12'),
                            grid: true
                        }
                    ],
                    series: [
                        {
                            type: 'line',
                            xField: 'date',
                            yField: 'status'
                        },
                        {
                            type: 'line',
                            xField: 'mdate',
                            yField: 'status'
                        }
                    ]
                }
            ]
        this.callParent(arguments);
    }
}); 
```

![图1](../Images/238f9b1f276b451bf4038f889f2467c3.png) ![图2](../Images/41a3c0e0974cd3c5aca5c794c2dd91c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:25:03.230

嗨，我从 sencha 论坛得到了答案，我们不能做断线图。[http://www.sencha.com/forum/showthread.php?258157-Is-it-possible-to-draw-non-continuous-line-chart-(Line-break-chart)-in-sencha-Ext。 &p=945869#post945869](http://www.sencha.com/forum/showthread.php?258157-Is-it-possible-to-draw-non-continuous-line-chart-(Line-breaking-chart)-in-sencha-Ext.&p=945869#post945869)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T15:09:17.297

这可以通过将系列样式 connectDiscontinuousPoints 设置为 false 并确保“缺失”点的值的数据设置为 null 来完成。

例子：

```
var store = new Ext.data.JsonStore({
  fields:['name', 'visits', 'views'],
  data: [
    {name:'Jul 07', visits: 245000},
    {name:'Aug 07', visits: 240000},
    {name:'Sep 07', visits: 355000},
    {name:'Oct 07', visits: null},
    {name:'Nov 07', visits: null},
    {name:'Dec 07', visits: 495000},
    {name:'Jan 08', visits: 520000},
    {name:'Feb 08', visits: 620000}
  ]
});

new Ext.Panel({
  title: 'Line with a break',
  renderTo: 'chart',
  width:500,
  height:300,
  layout:'fit',

  items: {
    xtype: 'linechart',
    store: store,
    xField: 'name',
    yField: 'visits',
    seriesStyles: {connectDiscontinuousPoints: false}
  }
}); 
```

# php - 使用 AJAX 将随机图像从本地文件上传到 html5 画布

> ID：15269369
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:09.007
> 
> 标签：php, ajax, html, canvas

我有一块画布，人们可以在上面涂鸦。我制作了一个按钮，可以将每个绘图提交到我的目录中名为“images”的文件中，该文件位于主文件“Espace Utopique”中。每个文件都有不同的名称“monimage_”time()。所有这一切都完美无缺，图像以 png 格式发送到我的文件夹，我可以阅读它们。

我遇到的麻烦是在窗口打开时将这些随机图像之一插入到我的画布中。这个想法是人们建立在其他人的图纸上。我找到了一个 PHP 代码，它保存在一个名为“retrieve.php”的 PHP 文件中：

```
<?php
$imagesDir = 'Espace Utopique/images';

$images = glob($imagesDir . '*.{png}', GLOB_BRACE);

$randomImage = $images[array_rand($images)];
if($res) {
      echo "ok";
  }
      else {echo "ko";}
?> 
```

我找到了可以让我将图像放入 html5 画布的代码：例如。

```
<script>
window.onload = function() {
var canvas=document.getElementById("drawing"); // grabs the canvas element
var context=canvas.getContext("2d"); // returns the 2d context object
var img=new Image() //creates a variable for a new image

img.src= "images/vft.jpg" // specifies the location of the image
context.drawImage(img,20,20); // draws the image at the specified x and y location
}
</script> 
```

我遇到的麻烦是将两者放在一起。我曾尝试将此 AJAX 代码放在某个地方，但似乎没有任何效果：

```
 $.ajax({

  type: "POST",
  url: "retrieve.php",

}).done(function( msg ) {
  alert( msg );

});

} 
```

请有人帮帮我:)我一定错过了一些非常明显和愚蠢的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:19:27.113

像这样的东西应该可以工作，这两个功能结合起来；）

```
<script>
window.onload = function() {
    $.ajax({
        type: "POST",
        url: "retrieve.php",
        succes: function( data ) {
            var canvas=document.getElementById("drawing"); // grabs the canvas element
            var context=canvas.getContext("2d"); // returns the 2d context object
            var img = new Image(); //creates a variable for a new image

            img.src = data; // specifies the location of the image
            context.drawImage(img,20,20); // draws the image at the specified x and y location
        }
    });
}
</script> 
```

检索.php：

```
$imagesDir = 'Espace Utopique/images';

$images = glob($imagesDir . '*.{png}', GLOB_BRACE);

$randomImage = $images[array_rand($images, 1)];
if($randomImage) {
    echo $randomImage;
}
else {echo "path/to/default/image";} //in case $randomimage fails 
```

# html - 填 用行缩进

> ID：15269371
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:11.663
> 
> 标签：html, css

`<UL>`是否可以用一条线（或点或其他什么）填充缩进？

html

```
<ul>Foo
   <ul>Bar
      <ul>Foo
      </ul>
   </ul>
</ul> 
```

结果

```
Foo 
-----Bar 
----------Foo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:07:55.357

这不是一个通用的解决方案，而是一个快速的胜利：

**HTML：**

```
<ul>Foo
   <ul>Bar
      <ul>Foo
      </ul>
   </ul>
</ul> 
```

**CSS：**

```
ul {
    margin: 0;
    padding: 0;
}
ul > ul:before {
    content: "------";
}

ul > ul > ul:before {
    content: "------------";
} 
```

在这个[**jsFiddle**](http://jsfiddle.net/Cz4HG/)中亲自看看！

# c# - 这个角色是什么？Ø

> ID：15269373
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:18.820
> 
> 标签：c#, string, character-encoding

我有一些来自提要的文本，如下所示，带有这个不寻常的字符：

新的 Siri 语音控制助手可让您使用语音发送消息、安排会议、拨打电话等等。Siri 能听懂你说什么，明白你的意思，甚至会回嘴。例如，您可以说“告诉我妻子我迟到了”、“提醒我给兽医打电话”或“明天天气怎么样？” Siri 会回答。

它是什么，我该如何摆脱它？我无法进行替换，因为我不确定它实际上是什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:00:58.230

这是显示的替换字符，而不是当前编码无法显示的字符。

尝试将您的编码切换到源提要使用的编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:29:25.930

字符“�”为 U+FFFD REPLACEMENT CHARACTER，表示字符级数据错误。参考：Unicode 标准，[ch。16](http://www.unicode.org/versions/latest/ch16.pdf)条，第 16.8 条。

如今，它通常似乎表明某些数据包含在所应用的字符编码中没有意义的字节。所以它表示没有有效的字符数据，而不仅仅是某种不正确或无法显示的字符。

一个典型的情况是拉丁 1 编码的数据被解释为 UTF-8 编码。在您的示例中，似乎所有非 Ascii 字符，例如“智能”引号、撇号，也许还有破折号都变成了“�”。数据本身很可能是正确的；只是有关其编码的信息是错误的。如果可以在程序设置中更改编码（根据解释数据的方式），那么尝试 UTF-8 可能会有所帮助。

当数据已从一种编码转换为另一种编码并且数据中有一个字符在目标编码中没有表示时，也可能出现字符“�”。在这种情况下，原始数据将丢失，需要进行猜测或返回原始编码数据以恢复信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:02:34.073

这是因为您没有正确的编码 - 这是一个很好的阅读，其中更详细： [http ://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

# php - 如何将数组内的字符串分解为更多数组PHP

> ID：15269374
> 
> 赞同：2
> 
> 时间：2013-03-07T10:59:19.607
> 
> 标签：php, arrays, preg-split

基本上我有一个包含多个字符串作为值的数组（不是关联数组）。我需要获取每个字符串的特定部分并将其转换为具有两个值的数组。

这是我的数组的结构：

```
$data = array(
"A1 -- B1",
"A2 -- B2",
"A3 -- B3",
"A1 -- A2",
"A2 -- A3",
"B2 -- B3",
"B1 -- B3",
); 
```

所以我需要这些值中的每一个变成这样的数组：

```
$data = array(
    array("A1", "B1");
    array("A2", "B2");
    ...
); 
```

我一直在考虑使用`preg_split`来分解每个字符串，但无法让它在数组中工作。不确定`preg_split`是最好的方法，所以我愿意接受建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:02:42.067

尝试：

```
foreach($data as $k => $c){
    $data[$k] = explode(" -- ", $c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:03:26.710

试试这个 ：

```
$data = array(
"A1 -- B1",
"A2 -- B2",
"A3 -- B3",
"A1 -- A2",
"A2 -- A3",
"B2 -- B3",
"B1 -- B3",
);

$res             = array();
foreach($data as $key=>$val){
   $res[$key]    = explode(" -- ",$val);
}

echo "<pre>";
print_r($res); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => A1
            [1] => B1
        )

    [1] => Array
        (
            [0] => A2
            [1] => B2
        )

    [2] => Array
        (
            [0] => A3
            [1] => B3
        )

    [3] => Array
        (
            [0] => A1
            [1] => A2
        )

    [4] => Array
        (
            [0] => A2
            [1] => A3
        )

    [5] => Array
        (
            [0] => B2
            [1] => B3
        )

    [6] => Array
        (
            [0] => B1
            [1] => B3
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:03:32.800

```
$data = array(
"A1 -- B1",
"A2 -- B2",
"A3 -- B3",
"A1 -- A2",
"A2 -- A3",
"B2 -- B3",
"B1 -- B3",
);

$new = array();
foreach($data as $d){
$new[] = split(" -- ", $d);
}

var_dump($new); 
```

给出：

```
array
  0 => 
    array
      0 => string 'A1' (length=2)
      1 => string 'B1' (length=2)
  1 => 
    array
      0 => string 'A2' (length=2)
      1 => string 'B2' (length=2)
 ... etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:05:06.540

试试这个：

```
$newArray = array();
foreach($data as $key=>$value)
{
    $expArray = explode(' -- ', $value);
    $newArray[] = array($expArray[0], $expArray[1]);
}

$newArray 
```

是最终的数组。

我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:11:07.557

```
Try:
$result_array=array();

foreach($data as $val){
    $ex = explode(" -- ", $val);
    array_push($result_array,$ex);
}

print_r($result_array); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-07T11:08:54.513

我会加入答案，因为无论如何我已经准备好了。

我还创建了一个自定义 foreach 循环来遍历数组中的每个项目，然后将该项目（如果它是一个字符串）拆分为一个数组。

您还可以扩展我编写的函数以允许递归。例如，如果不是数组中的所有项都是字符串，但如果某些项也是包含字符串的数组`explode`，那么就需要递归。

但我在这个例子中忽略了这一点：

[http://codepad.viper-7.com/xYjXur](http://codepad.viper-7.com/xYjXur)

* * *

```
<?php

function splitStringInArrayToArray ( $delimiter = ' -- ', array $array )
{
    foreach ( $array as &$item )
    {
        if ( is_array ( $item ) )
            throw new Exception("oh noes, problem");

        $item = explode ( $delimiter, $item );
    }

    return $array;
}

$data = array(
"A1 -- B1",
"A2 -- B2",
"A3 -- B3",
"A1 -- A2",
"A2 -- A3",
"B2 -- B3",
"B1 -- B3"
);

$new = splitStringInArrayToArray ( ' -- ', $data );

echo '<pre>';
print_r($new);
echo '</pre>'; 
```

# jquery - 单击链接时的jQuery切换跨度类

> ID：15269375
> 
> 赞同：2
> 
> 时间：2013-03-07T10:59:19.963
> 
> 标签：jquery, toggle

单击 $menulink 时，我希望 .menu-link 中的跨度可以切换它的类。我尝试了下面的代码，但我做错了，因为它不起作用：

```
$(document).ready(function() {
$('body').addClass('js');
var $menu = $('#menu'),
$menulink = $('.menu-link'),
$arrow = $('.arrow-down');

$menulink.click(function() {
$menulink.toggleClass('active');
$menu.toggleClass('active');
$arrow.toggleClass('visible');
return false;
});});
})(); 
```

标记：

```
<a class="menu-link" href="#menu"><span class="arrow-down"></span><span>Menu</span></a>
<nav role="navigation" id="menu" class="">
<ul class="menu">
<li>stuff</li>
</ul>
</nav> 
```

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:07:43.250

尝试

```
$menulink.find('span').toggleClass('active'); 
```

如果你只想要第一个跨度那么

```
$menulink.find('span:first').toggleClass('active'); 
```

或者想要`arrow-down`上课

```
$menulink.find('span.arrow-down').toggleClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:03:47.403

```
$menulink.children('span').toggleClass('whatever'); 
```

在点击功能内。

或者，如果您只想定位`arrow-down`跨度

```
$menulink.children('span.arrow-down').toggleClass('whatever'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:07:25.150

试试这个

```
$menulink.children(':first').toggleClass('active'); 
```

这会找到你的第一个`<span>`孩子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:08:45.887

您使用的代码将切换页面上具有该类的所有元素。试试这个：

```
$(document).ready(function() {
   $('.menu-link').click(function() {
      $(this).toggleClass('active');
      $(this).children('.arrow-down').toggleClass('visible');
      $('#menu').toggleClass('active');
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:08:52.690

我猜是因为`$menu-link`是一个锚标签，浏览器正在离开页面？

如果您的答案无效，我不明白为什么上述任何答案都会起作用。

尝试设置一个jsfiddle？

# css - gRaphael 脚本 403（禁止）

> ID：15269378
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:22.257
> 
> 标签：css, xampp, raphael, graphael

我在我的 Xampp 服务器上使用了与[此处相同的代码。](http://g.raphaeljs.com/barchart2.html)
我只用这个改变了 3 个脚本行：

```
<script src="http://raphaeljs.com/raphael.js"></script>
<script src="http://g.raphaeljs.com/g.raphael.js"></script>
<script src="http://g.raphaeljs.com/g.bar.js"></script> 
```

但是当我这样做时，Chrome 会返回此消息：

```
GET http://raphaeljs.com/raphael.js 403 (Forbidden) barchart2.html:8
Uncaught ReferenceError: Raphael is not defined g.raphael.js:7
Uncaught ReferenceError: Raphael is not defined g.bar.js:7
Uncaught ReferenceError: Raphael is not defined barchart2.html:13 
```

从我的服务器加载脚本时，我尝试了一些更改：

```
<script src="js/raphael.js"></script>
<script src="js/g.raphael.js"></script>
<script src="js/g.bar.js"></script> 
```

但是当我这样做时，我会遇到这个烦人的问题：

![在此处输入图像描述](../Images/6a995da0abfae686a7cc93255f174c05.png)

我还更改了 CSS 行：

```
<link rel="stylesheet" href="http://g.raphaeljs.com/demo.css" media="screen">
<link rel="stylesheet" href="http://g.raphaeljs.com/demo-print.css" media="print"> 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:36:28.453

这是一个工作版本，一个完整的 html 文件源......（使用 jQuery 加载*准备好的*页面）

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="http://raphaeljs.com/raphael.js" ></script>
<script type="text/javascript" src="http://g.raphaeljs.com/g.raphael.js" ></script>
<script type="text/javascript" src="http://g.raphaeljs.com/g.bar.js" ></script>

</head>
<body>

<script language="javascript" type="text/javascript" defer>
$(function() {
   var r = Raphael("holder"),
                    fin = function () {
                        this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
                    },
                    fout = function () {
                        this.flag.animate({
                            opacity: 0
                        }, 300, function () {
                            this.remove();
                        });
                    },
                    fin2 = function () {
                        var y = [],
                            res = [];
                        for (var i = this.bars.length; i--;) {
                            y.push(this.bars[i].y);
                            res.push(this.bars[i].value || "0");
                        }
                        this.flag = r.popup(this.bars[0].x, Math.min.apply(Math, y), res.join(", ")).insertBefore(this);
                    },
                    fout2 = function () {
                        this.flag.animate({
                            opacity: 0
                        }, 300, function () {
                            this.remove();
                        });
                    },
                    txtattr = {
                        font: "12px sans-serif"
                    };

                r.text(160, 10, "Single Series Chart").attr(txtattr);
                r.text(480, 10, "Multiline Series Stacked Chart").attr(txtattr);
                r.text(160, 250, "Multiple Series Chart").attr(txtattr);
                r.text(480, 250, "Multiline Series Stacked Chart\nColumn Hover").attr(txtattr);

                r.barchart(10, 10, 300, 220, [
                    [55, 20, 13, 32, 5, 1, 2, 10]
                ]).hover(fin, fout);
                r.hbarchart(330, 10, 300, 220, [
                    [55, 20, 13, 32, 5, 1, 2, 10],
                    [10, 2, 1, 5, 32, 13, 20, 55]
                ], {
                    stacked: true
                }).hover(fin, fout);
                r.hbarchart(10, 250, 300, 220, [
                    [55, 20, 13, 32, 5, 1, 2, 10],
                    [10, 2, 1, 5, 32, 13, 20, 55]
                ]).hover(fin, fout);
                var c = r.barchart(330, 250, 300, 220, [
                    [55, 20, 13, 32, 5, 1, 2, 10],
                    [10, 2, 1, 5, 32, 13, 20, 55]
                ], {
                    stacked: true,
                    type: "soft"
                }).hoverColumn(fin2, fout2);
                });
</script>
<div id="holder"></div>
</body>
</html> 
```

# c - 用openssl实现ECDSA签名和验证的C语言

> ID：15269379
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:27.170
> 
> 标签：c, openssl, signature, verification, ecdsa

我正在尝试创建 C 程序，如果我可以从菜单中选择我想要从签署消息和验证消息中选择的选项。我有签名消息并同时验证的代码。我想要的是能够解析一条消息并对其进行签名，然后输出证书。接下来，当我选择验证时，我将插入相同的消息和证书，这样我就可以实际验证或不验证消息。

我使用的代码来自： [Signing a message using ECDSA in OpenSSL](https://stackoverflow.com/questions/2228860/signing-a-message-using-ecdsa-in-openssl/6006898#6006898)

PS：基本上我不知道如何实际打印签名、私钥和公钥。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:27:51.280

我想我找到了打印 r 和 s 值的方法。签名中的密钥对 (r,s)

在我们自己签名后：

```
ECDSA_SIG *signature = ECDSA_do_sign(hash, strlen(hash), eckey); 
```

我们可以这样打印 r 和 s 值：

```
 printf("(sig->r, sig->s): (%s,%s)\n", BN_bn2hex(ECDSA_SIG_get0_r(signature)), BN_bn2hex(ECDSA_SIG_get0_s(signature))); 
```

谢谢最好的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:00:12.963

使用这些功能：

```
int i2d_ECDSA_SIG(const ECDSA_SIG *sig, unsigned char **pp);

ECDSA_SIG* d2i_ECDSA_SIG(ECDSA_SIG **sig, const unsigned char **pp, long len); 
```

根据 OpenSSL 文档：

" i2d_ECDSA_SIG() 创建 ECDSA 签名 sig 的 DER 编码，并将编码后的签名写入 *pp（注意：如果 pp 为 NULL，i2d_ECDSA_SIG 返回 DER 编码签名的预期长度（以字节为单位）。i2d_ECDSA_SIG 返回 DER 编码的长度签名（或 0 错误）。

d2i_ECDSA_SIG() 对 DER 编码的 ECDSA 签名进行解码，并在新分配的 ECDSA_SIG 结构中返回解码后的签名。*sig 指向包含大小为 len 的 DER 编码签名的缓冲区。"

如果您想在屏幕上打印签名，则必须使用 Base64 :)

# mootools - 如何在 mootools 中按 id 一次将事件添加到多个元素？

> ID：15269381
> 
> 赞同：1
> 
> 时间：2013-03-07T10:59:38.670
> 
> 标签：mootools

我有两个元素 ID，a 和 b。我想做这样的事情：

```
[$('a'), $('b')].addEvent('click', myFunction); 
```

但是该特定代码给出了“TypeError：（中间值）.addEvent 不是函数”。

我是否需要显式循环（或复制 addEvent 调用）？

```
[$('a'), $('b')].each(function(el){
    el.addEvent('click', myFunction);
}); 
```

或者

```
$('a').addEvent('click', myFunction);
$('b').addEvent('click', myFunction); 
```

还是有更清洁的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:17:48.923

您可以使用 elements 构造函数或让`$$`( `document.getElements`) 为您完成。

例子：

```
// via slick - same as document.getElements 
$$("#a, #b").addEvent('click', fn);

// with existing elements:
$$([el1, el2]).addEvent('click', fn);

// with Elements constructor w/o involving slick if you have them saved
new Elements([el1, el2]).addEvent('click', fn); 
```

# magento - Magento 1.7 - 调试可用

> ID：15269383
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:43.160
> 
> 标签：magento, option, product

我有一个多商店有一些奇怪的问题：在一个商店 $product->isAvailable() 在某些产品上返回 true，但在另一家商店 $product->isAvailable() 总是返回 null。

在这个函数中 isAvailable()

```
$this->getTypeInstance(true)->isSalable($this) 
```

和

```
Mage::helper('catalog/product')->getSkipSaleableCheck(); 
```

两者都返回 null。两种产品具有相同的属性，并且两个商店都使用与库存可用性有关的一般商店配置。

在升级之前，我使用了 v.1.4.0.2，我想 isAvailable()/isSaleable() 的逻辑发生了一些变化。我不明白这两种产品的区别，这是一种产品不可用的原因。

**//编辑 ：**

经过一些调试，我发现该方法

```
isSalable($product = null) 
```

isAvailable() 中的 $this->getTypeInstance(true)->isSalable($this) 调用返回 0，因为

```
$this->getProduct($product)->getData('is_salable') 
```

是 0。这导致了哪些属性负责这个生成的 is_saleable 属性的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T15:07:04.637

[您可以尝试这里](http://www.dconstructing.com/2011/12/14/magento-products-is_salable-attribute-from-the-admin)提到的解决方案

本质上，它涉及在调用 isSaleable() 或 isAvailable() 之前切换到默认存储。

```
$originalStore = Mage::app()->getStore(); // save the original store setting
        Mage::app()->setCurrentStore('default'); //switch to the default store
        $productsCollection = Mage::getModel('catalog/product')->getCollection();
        foreach ($productsCollection as $product) {
            if (!$product->isSalable()) {
                // Do what you gotta do
            }
        }
        Mage::app()->setCurrentStore($originalStore->getId()); // switch back to the original
    } 
```

# python - Python - 如何查找和保存两个特定字符串之间的所有单词

> ID：15269384
> 
> 赞同：0
> 
> 时间：2013-03-07T10:59:47.083
> 
> 标签：python, regex, string, search

在搜索时我发现了这个[威胁](https://stackoverflow.com/questions/13746721/using-re-to-capture-text-between-key-words-over-the-course-of-a-doc)。这很安静，接近我的需要。

这直接导致了我的第一个问题：

我的字符串是：

```
line = <draw:line draw:style-name="gr1" draw:text-style-name="P1" draw:layer="layout" svg:x1="0cm" svg:y1="0cm" svg:x2="3.5cm" svg:y2="2.7cm"> 
```

我需要提取 svg:x1= 标签后的值。所以我尝试了

```
print re.findall(r"(?<=svg:x1) (.*?) (?=svg:y1)", line) 
```

但是除了 [] 之外什么都没有打印。

第二个问题是我然后尝试了类似的东西

```
line = 'string1 string2 string3' 
```

进而

```
print re.findall(r"(?<=string1) (.*?) (?=string3)", line) 
```

这给了我想要的东西，但是当我尝试时

```
file.write(re.findall(r"(?<=string1) (.*?) (?=string3)", line)) 
```

（我要写入的文件当然是之前定义的，所以我可以往里面写东西）

我得到“TypeError：期望一个字符缓冲区对象”

所以现在我的问题是一个完整的句子：
如何提取特定字符串之间的字符串并将其保存在文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:16:59.387

以下正则表达式

```
print re.findall(r"(?<=svg:x1) (.*?) (?=svg:y1)", line) 
```

您写的 svg:x1 后需要一个空格，而原始字符串中的情况并非如此。正确的正则表达式是

```
print re.findall(r"(?<=svg:x1)(.*?)(?= svg:y1)", line) 
```

您编写的正则表达式返回一个列表。您将不得不迭代列表以将项目写入文件。

```
data=re.findall(r"(?<=svg:x1)(.*?)(?= svg:y1)", line)
fl.write(' '.join(data)) 
```

不要`file`用作变量。它是 Python 中的保留字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:15:29.447

你可以在没有正则表达式的情况下做到这一点，就像这样。

```
def get_middle_text(line, string_start, string_end):
    temp = line.split(string_start)[1]
    return temp.split(string_end)[0]

result = get_middle_text(line, 'string1', 'string2') 
```

编辑：

如果您可以有多个匹配项，您可以执行以下操作，并返回匹配项：

```
def get_middle_text(line, string_start, string_end):
    tmp = line.split(string_start)
    result = []
    if len(tmp) == 1:
        return result
    for x in range(1, len(tmp)):
        temp = tmp[x].split(string_end)[0]
        result.append(temp)
    return result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:22:33.187

这是你想要的吗？

```
In [10]: re.findall('svg:x1="([^"]*)"', line)
Out[10]: ['0cm'] 
```

编辑：

```
re.findall('svg:x1="(\d*)cm"', line)

In [11]: re.findall('svg:x1="(\d*)cm"', line)
Out[11]: ['0'] 
```

# ios - 如何将 Windows unity3d 许可证加载到 Mac 机器中？

> ID：15269389
> 
> 赞同：1
> 
> 时间：2013-03-07T11:00:04.517
> 
> 标签：ios, unity3d

我有适用于 windows 的 Unity3d pro 许可证，我想在 Mac 中使用该 windows 许可证，所以我如何在我的 Mac 中使用它。我知道我可以导出我的许可证，但问题是当我从 Windows 机器导出我的许可证时，它的扩展名是 .alf 而我的 mac 机器只接受 .ulf。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:39:30.947

您可以在两台机器上使用相同的许可证（最多）。基本上在您的 Mac 上下载 Unity 并使用您的序列号激活。如果您想实际“移动”许可证（即您更换了机器），那么最好直接联系统一。

# gzip - 为什么 Yslow 建议我 gZip 我的文件？

> ID：15269394
> 
> 赞同：1
> 
> 时间：2013-03-07T11:00:19.213
> 
> 标签：gzip, yslow

当我使用 Chrome 扩展程序通过 YSlow 运行页面时，它为页面提供了 gzip 的 E 级，建议“使用 gzip 压缩组件”，选出四个 javascript 文件。

如果我检查这些文件的标题，它们都表明它们是 gZipped：

**请求标头：** Accept-Encoding:gzip,deflate,sdch

**响应** 内容编码：gzip

是什么赋予了？是 YSlow 的错误吗？

# scikit-learn - 随机搜索与 GridSearchCV

> ID：15269397
> 
> 赞同：6
> 
> 时间：2013-03-07T11:00:22.140
> 
> 标签：scikit-learn

我想使用随机搜索算法而不是 scikit-learn 的网格搜索。但我只能在文档中找到 GridSearchCV 估计器。是否可以在 scikit-learn 中使用随机搜索而不是网格搜索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:31:23.940

随机搜索是5 天前[添加到开发版的](https://github.com/scikit-learn/scikit-learn/commit/0c94b55c63fcd28a47b156cbc0cf331ec6d42a7a)，所以可以，如果您愿意使用最前沿的版本。否则，要么等待下一个 (0.14) 版本，要么考虑使用[hyperopt](http://jaberg.github.com/hyperopt/)。

# php - 我应该使用哪个 Paypal API 来支付我们员工的费用？

> ID：15269398
> 
> 赞同：0
> 
> 时间：2013-03-07T11:00:24.237
> 
> 标签：php, api, paypal, paypal-adaptive-payments

我们正在我们的内部网中构建一个系统，以便轻松快速地向我们的外部员工支付他们的月度服务费用，支付的数量每两周就会改变一次。

[根据这个问题](https://stackoverflow.com/questions/4820789/which-paypal-api-should-i-use-to-send-payments-to-affiliates)，我们主要有两种选择支付给我们的员工

*   批量付款：我们无法使用它，因为我们还没有获得所需的最低金额
*   自适应支付

所以我们选择了第二个，我们采用了[adaptivepayments-sdk-php](https://packagist.org/packages/paypal/adaptivepayments-sdk-php)，并决定使用最简单的方式从我们自己的账户通过电子邮件向拥有基本paypal账户的人付款，代码如下：

```
 #Create Request
 $receiver = new Receiver();
 $receiver->email = 'the.employee.email@example.com';
 $receiver->amount = '10';
 $receiver->paymentType = 'SERVICE';

 $receiverList = new ReceiverList($receiver);
 $cancelUrl='...';
 $returnUrl='...';
 $payRequest = new PayRequest(new RequestEnvelope("en_US"),'PAY', $cancelUrl,'USD',$receiverList,$returnUrl);
 $payRequest->feesPayer = 'SENDER';

 #Send Request
 $service = new AdaptivePaymentsService();
 $response = $service->Pay($payRequest); 
```

这会是满足我们需求的正确方法吗？或者有一个更简单的解决方案吗？

[要使用自适应支付，您需要在其www.x.com](http://www.x.com)网站上向 paypal 请求一个 APP ID ，问题是他们要求提供 TEST URL/USER/PASS，而我们只是不能授予每个访问我们的 Intranet 的权限我们公司的政策，我也不确定我们的“申请”是否在他们的指导范围内

任何帮助将不胜感激，我在这里感到有点失落，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:34:39.480

大规模付款将是最简单的途径。没有最低金额要求，只需满足以下条件：

*   保持良好状态 90 天或更长时间
*   得到验证
*   确保删除所有 PayPal 限制（这可以通过登录到您的 PayPal 帐户并转到[https://www.paypal.com/us/cgi-bin/webscr?cmd=_show-limits&req_from=view_limits](https://www.paypal.com/us/cgi-bin/webscr?cmd=_show-limits&req_from=view_limits)来检查）
*   帐户所有者必须联系 PayPal

***注意：未来可能会更改标准。

如果您满足上述所有条件，请致电 866-837-1851 联系 PayPal 支持并请求启用批量付款。即使您发送一笔付款，Mass Payments 也可以为其提供便利。

如果不能选择批量付款，那么可以选择自适应付款。您需要申请隐式付款，以便每次 API 调用都会发送付款。这是一条更复杂的路线，但一旦实施，它就可以以非常有效的方式使用。

至于测试环境，PayPal 需要查看应用程序以确保它符合他们的规则和规定。如果可能的话，我建议您使用一个带有简单界面的外部站点来说明您计划如何使用 API。贝宝可以访问内网不是必需的。

# boost - 配置找不到库的版本

> ID：15269399
> 
> 赞同：3
> 
> 时间：2013-03-07T11:00:26.250
> 
> 标签：boost, compilation, makefile, gnu, configure

我正在尝试在我的 64 位 Ubuntu 12.04 机器上编译一个名为 fuego 的程序。如果我尝试运行配置，我会得到所描述的标题中的错误。我试图用相同的结果编译旧版本的 fuego。我试图安装不同的库并链接到它们，但似乎我做错了，或者这是错误的方法。我对 UNIX 系统有基本的了解。我添加了 configure.log（我将其重命名）以提供信息。如果您需要任何其他日志，请告诉我。我很感激任何帮助或建议。

[我在 pastebin 上的 configure_v1.log](http://pastebin.com/iiLCUiE2)

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-05T19:01:44.837

Try running this instead:

```
./configure --with-boost-libdir=/usr/lib/x86_64-linux-gnu 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-22T06:43:02.190

对于 ARM 架构（Raspberry Pi 等）：在末尾添加 --with-boost-libdir=/usr/lib/arm-linux-gnueabihf 以避免 boost 库错误

# ios - 链接器错误未定义符号

> ID：15269402
> 
> 赞同：0
> 
> 时间：2013-03-07T11:00:32.400
> 
> 标签：ios, objective-c, xcode, linker-errors, bdmultidownloader

我使用这个[库](https://github.com/norsez/BDMultiDownloader/tree/master/Classes)来下载文件。但是当我编译我的项目时，链接器会给我一个错误。架构是armv7。

![在此处输入图像描述](../Images/995f8d223769a474c68cb763d4d665b8.png)

这个错误的根源是因为我使用：

```
[[BDMultiDownloader shared] queueRequest:[urlFolder stringByAppendingString:video] completion:^(NSData* data){
                [data writeToFile:file atomically:TRUE];
            }]; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:04:21.113

当您将文件添加到项目中时，您正在构建的目标是否已勾选？

在左侧边栏中的项目导航器中选择`BDMultiDownloader.m`文件，然后在右侧边栏中选择文件检查器。确保目标成员资格包括您正在构建的目标。

# apache-flex - 如何在 flex 中创建视频库

> ID：15269403
> 
> 赞同：0
> 
> 时间：2013-03-07T11:00:33.303
> 
> 标签：apache-flex

我正在尝试为我的论坛创建视频库，但没有任何想法并搜索了网络，但只获得了带有免费源代码的图片库示例，但视频库应用程序是付费的。谁能给出使用 flex 创建视频库的想法？

**例如：**

首先在用户点击缩略图时显示组件中的缩略图集，此时需要显示带有相关视频的弹出窗口。

下面我给出了示例链接：

```
 http://example.procontent.net/Carousel/carousel_flex.html 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:02:51.540

这是一个相当模糊的问题。

[通过使用FFMPEG](http://www.ffmpeg.org/)生成视频剪辑，您可以获得相当多的解决方案。然后使用您的轮播链接到这些并在弹出窗口中播放。您的播放可以从[Red5](https://code.google.com/p/red5/)（或类似的）流式传输。

# android - 如何与数据一起从一项活动导航到另一项活动？

> ID：15269404
> 
> 赞同：2
> 
> 时间：2013-03-07T11:00:33.307
> 
> 标签：android

我在活动 A 中，现在导航到活动 B。在活动 B 中完成工作后，我切换回活动 A（在按钮的 onclick() 事件中调用 finish(); 函数）。这个finish(); 函数通过恢复活动 A 将我带回活动 A。如何从活动 B 导航到 A 以及数据。

这是代码：-活动A：-

新Main.java

```
public void onRestoreInstanceState(Bundle savedInstanceState) {
        // Always call the superclass so it can restore the view hierarchy
        super.onRestoreInstanceState(savedInstanceState);

        // Restore state members from saved instance

        alarmname1 = savedInstanceState.getString("EXTRA_MESSAGE");
        range1 = savedInstanceState.getInt("EXTRA_MESSAGE_RANGE", 100);
        //Toast.makeText(NewMain.this, longi1, 2000).show();

    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == 1) {

             if(resultCode == RESULT_OK){   

                 /*Bundle bu_lati = getIntent().getExtras();
                    lati1= Double.parseDouble( bu_lati.getString("EXTRA_MESSAGE_LATITUDE"));
                    Bundle bu_longi = getIntent().getExtras();
                    longi1=Double.parseDouble( bu_longi.getString("EXTRA_MESSAGE_LONGITUDE"));
                    */

                 Bundle lati1=data.getBundleExtra("EXTRA_MESSAGE_LATITUDE");   
                 Bundle longi1=data.getBundleExtra("EXTRA_MESSAGE_LONGITUDE");
             }
             if (resultCode == RESULT_CANCELED) {    
                 //Write your code on no result return 
             }
          }
        }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.newgui1);

         alarmname=(EditText) findViewById(R.id.editText1);
         range=(EditText) findViewById(R.id.editText2);
        Button button = (Button) findViewById(R.id.button2);
        im1=(ImageButton) findViewById(R.id.imageButton1);

        Button lnl = (Button) findViewById(R.id.button3);

        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                //alarmname

                alarmname1=alarmname.getText().toString();
                //range

                range1=Integer.parseInt(range.getText().toString());

               Intent myIntent = new Intent(NewMain.this, NewMain2.class);
              myIntent.putExtra("EXTRA_MESSAGE", alarmname1);
              myIntent.putExtra("EXTRA_MESSAGE_RANGE", range1);
              myIntent.putExtra("EXTRA_MESSAGE_LATITUDE1", lati1);
              myIntent.putExtra("EXTRA_MESSAGE_LONGITUDE1", longi1);
              NewMain.this.startActivity(myIntent);

           }
         });

        lnl.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

               Toast.makeText(NewMain.this, longi1, 2000).show();

            }
         });
        im1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

               Intent myIntent = new Intent(NewMain.this, MapViewDemo.class);
              NewMain.this.startActivity(myIntent);

           }
         }); 
        }

    } 
```

活动 B：-

```
MapViewDemo.java

public boolean onTouchEvent(MotionEvent event, MapView mapView) 
            {   
                //---when user lifts his finger---
                if (event.getAction() == 1) {                
                    GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
                    lati=p.getLatitudeE6() / 1E6;
                    longi=p.getLongitudeE6() /1E6;
                        Toast.makeText(getBaseContext(), lati+ "," +longi, 
                            Toast.LENGTH_SHORT).show();

                }                            
                return false;
            }        

        } 

            Button buttondone = (Button) findViewById(R.id.btndone);
            buttondone.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {

                    Intent myIntent1 = new Intent();

                     myIntent1.putExtra("EXTRA_MESSAGE_LATITUDE", lati);
                     myIntent1.putExtra("EXTRA_MESSAGE_LONGITUDE", longi);

                     setResult(NewMain.RESULT_OK, myIntent1);
                    finish();

                }
             });

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:09:26.523

开始您的 B 活动，例如，

```
Intent intent = new Intent(ActivityA.this, ActivityB.class);
    startActivityForResult(intent, 1); 
```

在完成 B 活动 setResult() 之前，

```
Intent i =new Intent();
    i.putExtra("yourdata", "abc");
    setResult(2, i);
    finish(); 
```

在你的 A 活动上

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==2){
        String s = data.getStringExtra("yourdata");
    }
} 
```

这样您就可以将数据从子活动传递到父活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:08:35.850

最好的方法是使用将Intent 和请求代码作为参数的模式[startActivityForResult 。](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

与 startActivity 相同，但您可以在活动 B 完成时等待结果。

在调用活动 B 的完成之前，您必须在活动 B 上使用[setResult](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)，然后使用 finish()。setResult 有 2 个参数：一个意图（您想要传递回 A 的数据）和一个 resultCode（好的，错误代码）。

在活动 A 上，您可以等待并获取结果覆盖方法[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)

这是一个很好的教程：[从活动中获取结果](http://developer.android.com/training/basics/intents/result.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:11:26.613

从您的活动 newMain 传递 requestcode 并使用`startActivityForResult`而不是
`NewMain.this.startActivity(myIntent)`：

```
startActivityForResult(intent, 10); 
```

现在让你`(requestCode == 10)`处于你的 if 条件。

希望它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:12:59.530

使用此代码。
开始第二个活动：

```
 Intent myIntent = new Intent(NewMain.this, MapViewDemo.class);
startActivityForResult(launchNewIntent, 2); 
```

在活动 A

```
 int result1 ;
int result2 ;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 2) {
        if (resultCode == RESULT_OK) {
            result1=data.getExtras().getInt("EXTRA_MESSAGE_LATITUDE");
            result2 =data.getExtras().getInt("EXTRA_MESSAGE_LONGITUDE");
        }
    }
} 
```

在活动 B

```
 Intent myIntent1 = new Intent();
    myIntent1.putExtra("EXTRA_MESSAGE_LATITUDE", lati);
    myIntent1.putExtra("EXTRA_MESSAGE_LONGITUDE", longi);
    setResult(Activity.RESULT_OK, resultData);
    finish(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:28:05.237

参考[链接](http://www.vogella.com/articles/AndroidIntent/article.html)，你会明白整个概念..

# python - Python中的“with”语句

> ID：15269405
> 
> 赞同：0
> 
> 时间：2013-03-07T11:00:37.170
> 
> 标签：python, proxy

我的代码中实现了很多类。现在我意识到，对于为所有这些类调用的每个方法，我需要添加一行：

```
with service as object: 
```

所以我正在尝试使用代理模式来自动完成这项工作，这是我的示例代码

```
 class A(object):
    def __init__(self, name):
        self.name = name
    def hello(self):
        print 'hello %s!' % (self.name)
    def __enter__(self):
        print 'Enter the function'
    def __exit__(self, exc_type, exc_value, traceback):
        print 'Exit the function'
#        
class Proxy(object):
    def __init__(self, object_a):
#        object.__setattr__(self, '_object_a', object_a)
        self._object_a = object_a

    def __getattribute__(self, name):
        service = object.__getattribute__(self, '_object_a')
#        with service as service:
        result = getattr(service, name)
        return result    

if __name__=='__main__':
    a1 = A('A1')
    b = Proxy(a1)
    b.hello()
    a2 = A('A2')
    b = Proxy(a2)
    b.hello() 
```

一切正常，我有输出：

```
hello A1!
hello A2! 
```

但是当我取消注释该`with`语句时，我有错误

```
Enter the function
Exit the function
Traceback (most recent call last):
  File "/home/hnng/workspace/web/src/test.py", line 30, in <module>
    b.hello()
  File "/home/hnng/workspace/web/src/test.py", line 24, in __getattribute__
    result = getattr(service, name)
AttributeError: 'NoneType' object has no attribute 'hello' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:04:38.633

您的`__enter__`方法正在返回`None`而不是返回对象。它应该是：

```
def __enter__(self):
    print 'Enter the function'
    return self 
```

# mysql - 将简单的 postgreSQL 函数转换为 Mysql

> ID：15269406
> 
> 赞同：0
> 
> 时间：2013-03-07T11:00:41.520
> 
> 标签：mysql, sql, database, linux, postgresql

我想知道我是否可以得到一些帮助。我在 Postgresql 中有以下函数，它旨在给我一个“solrid”值，而不必每次都将它存储在数据库中，并且基本上通过在值的开头放置一个“A”来工作。

```
-- Setup Solrid Function
CREATE OR REPLACE FUNCTION solrid(IN local_id INTEGER, OUT result TEXT) AS $$
DECLARE
    database_id TEXT := 'A';
BEGIN
    result := database_id || local_id::TEXT;
END;
 $$ LANGUAGE PLPGSQL; 
```

我现在必须将我的数据库移动到 MySql，我想知道是否有人可以告诉我如何将此函数转换为与 MySQL 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:40:44.570

这是 MySQL 中的相同函数：

```
DELIMITER //

DROP FUNCTION IF EXISTS solrid //

CREATE FUNCTION solrid(local_id INTEGER) RETURNS TEXT
BEGIN
  DECLARE database_id TEXT;
  SET database_id = 'A';
  RETURN CONCAT(database_id, CAST(local_id AS CHAR));
END //

DELIMITER ; 
```

# jquery - 悬停时li元素上的嵌套css样式

> ID：15269407
> 
> 赞同：1
> 
> 时间：2013-03-07T11:00:45.223
> 
> 标签：jquery, html, css, css-selectors

我有这样的标记。

```
<div id="chromemenu" class="chromestyle">
  <ul>
    <li><a rel="dropmenu1" href="#" class="">Buy</a></li>
    <li><a rel="dropmenu2" href="#" class="">Sell</a></li>
    <li><a rel="dropmenu3" href="#" class="">Community</a></li>
    <li><a rel="dropmenu6" href="#" class="">Languages</a></li>
    <li><a rel="dropmenu4" href="#" class="">My Account</a></li>
  </ul>
</div> 
```

现在我已经`jQuery`在所选的类中添加了一个类。因此，当用户将鼠标悬停在链接上（此处为购买链接）时，标记变成这样

```
<div id="chromemenu" class="chromestyle">
  <ul>
    <li><a rel="dropmenu1" href="#" class="selected">Buy</a></li>
    <li><a rel="dropmenu2" href="#" class="">Sell</a></li>
    <li><a rel="dropmenu3" href="#" class="">Community</a></li>
    <li><a rel="dropmenu6" href="#" class="">Languages</a></li>
    <li><a rel="dropmenu4" href="#" class="">My Account</a></li>
  </ul>
</div> 
```

现在我只想给选择了一个类的 li 赋予样式。我对 li 的风格是给 li 元素加上边框。那么有人可以告诉我该怎么做吗？任何帮助和建议都将是非常可观的。谢谢....

**更新** 我想给我的`li`元素加上边框，`a`所以请在那个领域帮助我。这可以用简单的 CSS 实现吗？嘿，我仍然在寻找答案......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:06:55.403

当您根据其后代的类名设置元素的父级样式时：

```
$('a.selected').closest('li').css('border-top','1px solid #000'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jUkZp/)。

或者，稍微好一点，因为它删除了边框（假设这*可能*是用于鼠标悬停/鼠标悬停）：

```
$('a.selected').closest('li').hover(function(){
    $(this).css('border-top','1px solid #000');
},function(){
    $(this).css('border-top-width','0');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jUkZp/1/)。

用于样式的纯 JavaScript 选项：

```
var selected = document.querySelector('a.selected');
selected.parentNode.style.borderTop = '1px solid #000'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jUkZp/2/)。

```
var selected = document.getElementsByClassName('selected')[0];
selected.parentNode.style.borderTop = '1px solid #000'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jUkZp/3/)。

一种改进的替代方法，使用 jQuery 的`hover()`方法，`addClass()`而不是直接操作元素的内联样式：

```
$('a.selected').closest('li').hover(function(){
    $(this).addClass('activeParent');
},function(){
    $(this).removeClass('activeParent');
}); 
```

以及以下 CSS：

```
li {
    /* to prevent jumping down of the li when the border is shown */
    border-top: 1px solid transparent;
}
.activeParent {
    border-top-color: #000;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jUkZp/4/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:02:30.753

要给`li`边框，在你调用之后`addClass`，只需执行以下操作：

```
$("a.selected").parent().css("border", "1px solid #000"); 
```

然后在取消选择时，您可以简单地将其删除：

```
$("a:not(.selected)").parent().css("border", "none"); 
```

小提琴：http: [//jsfiddle.net/BMTAE/](http://jsfiddle.net/BMTAE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:41:04.580

我意识到这可能不是您想要的答案，但无论如何我都会给出它。

您已经在使用 jQuery 将`selected`类添加到您的`a`标签中；可能使用类似的东西：

```
$('a').hover(
    function(){
        $(this).addClass('selected');
    },
    function(){
        $(this).removeClass('selected');
    }
); 
```

如果您将其更改为：

```
$('a').hover(
    function(){
        $(this).parent().addClass('selected');
    },
    function(){
        $(this).parent().removeClass('selected');
    }
); 
```

您将类添加到父类，`li`然后可以使用

```
li {border: 1px solid black;} 
```

或者

```
.chromestyle li {border: 1px solid black;} 
```

为您的`li`.

这样做的主要好处是您可以将 CSS 完全保存在样式表中，以便您的代码的未来维护者能够轻松找到它，而不是在您的 javascript 文件中翻找悬停事件处理程序。

添加`parent()`可能会稍微减慢速度，但任何其他解决方案都需要使用 jQuery 将 CSS 添加到父级，因此总体上应该会提高速度，因为 CSS 内容将由浏览器而不是 javascript 处理。

# compression - 从一维条码中读取的键值对的有效压缩和表示

> ID：15269408
> 
> 赞同：2
> 
> 时间：2013-03-07T11:00:46.387
> 
> 标签：compression, barcode, huffman-code, code128

我目前正在为 Windows Mobile 编写一个应用程序，它需要能够从一维条码（配置设置）中获取键值对。需要扫描的条码越少越好。样本输入：

```
------------------------------
| Key | Value                |    
------------------------------
| 12  | Söme UTF-8 Strîng    |
|  9  | & another string     |
------------------------------ 
```

我想到了以下算法：

**1.连接键值对并使用Base64对值进行编码**

所以我们会得到类似的东西`12=U8O2bWUgVVRGLTggU3Ryw65uZw==&9=JiBhbm90aGVyIHN0cmluZw==`

**2.使用霍夫曼编码压缩数据**

为此，我将使用固定的 Huffman 树，并提供以下信息来帮助我压缩数据：

```
-------------------------------------------
| Enties                       | Priority |    
-------------------------------------------
| =, &                         | High     |
| 0-9                          | Medium   |
| 5-bit Base64 Words (w/o 0-9) | Low      |
------------------------------------------- 
```

**3\. 从编码数据生成 Code 128B 条码**

将 Base96 编码应用于 Huffman 算法生成的比特流，以获得可在 Code 128B 条码中使用的 ASCII 字符。根据需要将生成的字符串拆分为多个条形码。

编写这些步骤对我来说不是问题，但我想对算法的效率和设计有一些反馈。

**问题**

*   我是否在某处失去了更好压缩/更短字符串的潜力？
*   有没有更好的方法来压缩随机 UTF8 编码的数据？
*   我应该将动态霍夫曼表嵌入到编码数据中吗？
*   如何考虑 Code 128B 的压缩（ a`0`需要的空间比 a 少`&`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:16:27.653

一种简单的方法是定义直接映射到 code128 的所有 64 个字符。这将留下 30-40 个可用代码 128 个插槽。在剩余的插槽中定义一些双字符。== =& 0= 1= 2= 3= 4= 5= 6= 7= 8= 9= &0 &1 &2 &2 &5 &5 &6 &7 &8 &9 (重复最后一个字符)= =(双下一个字符) &(双下一个特点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T08:11:05.473

经过一番折腾，我们最终选择了这种方式：

**1\. 将设置编码成字节流**

字段值被序列化为字节流，每个字段都有一个标头。标头占用一个字节并包含字段的 ID 和一些有助于减少要传输的数据量的标志。根据字段的类型（例如字符串、数字或 IP 地址），该值被有效地编码到字节流中。例如，IP 地址用 4 个字节编码，而布尔标志直接编码到字段头中。这样，如果需要，我们甚至可以将 SSL 证书编码到流中。由于典型的条形码格式无法传输任意字节值，我们需要在下一步中对字节流进行编码。

**2.转换成条码格式**

生成的字节数组现在被视为一个大整数，并使用基本编码和字符集转换为目标条形码格式（请参阅[此问题](https://stackoverflow.com/questions/16164538/convert-number-into-7-bit-words-with-96-states-max)）。这样，我们有效地使用条形码格式来传输我们的数据（与 Base64 或其他编码相反）。从得到的字符串中，我们可以将单个条形码大块并添加一些额外的标题信息（例如，必须扫描多少个条形码？数据是否加密？...）。

当在移动设备上扫描条形码时，可以恢复编码字符串并将其转换为相同的大整数。然后可以将此整数视为字节数组，当字段序列化格式已知时可以对其进行解析。

这种方法被证明是非常有效和快速的（我们对 CF 上的[BigInteger 实现](https://svn.apache.org/repos/asf/incubator/heraldry/libraries/csharp/openid/trunk/Mono/Mono.Math/BigInteger.cs)有些担忧）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T18:46:03.613

虽然某些条形码格式具有一组固定的字符，它们可以表示并使用相同数量的空间来保存每个字符，但其他条形码格式要么使用多个字符集，要么使用可变数量的空间来保存每个字符。例如，“经典”代码 39 定义了 43 个字符，每个字符由 43 个符号之一表示，并且根本不能表示任何其他字符，但是还有另一个代码 39 变体，它使用一个符号表示 39 个常见字符，其他字符使用两个字符序列。例如，假设有人想将一堆二进制数据存储在 code-39 条形码中。如果将数据转换为 base-64 格式，则与三个八位字节的原始数据相关的四个字符可能平均需要大约 5 个字符。存储 69 个符号 [base64 中使用的 64 个字符中约有 27 个需要两个符号存储在 code39 中]。如果一个人选择了 32 个字符，每个字符可以用一个符号表示，则可以使用五个八位字节存储 24（或 25）位，每个八位字节存储五个位[一致的每个八位字节有 1.67 个符号，而平均值为 1.89，最坏情况为 2.67 ]。如果使用“经典”代码 39（每个使用一个符号可以表示 43 个字符），甚至可以在六个符号中存储四个八位字节[平均每个八位字节 1.5 个符号]。

针对不同的字符集“优化”了不同的条码格式；有些像 Code 128 有多个字符集，并且可以有效地与使用一个字符集的全部范围的数据一起使用，同时避免使用它之外的字符。我不知道有什么特别推荐的方法来重新格式化数据以优化特定符号系统字符集的使用，但是检查符号系统使用的编码和您的特定要求应该可以帮助您找出最适合您的编码应用。

# image - 基于图像的纹理映射

> ID：15269414
> 
> 赞同：0
> 
> 时间：2013-03-07T11:01:09.550
> 
> 标签：image, image-processing

我正在研究纹理映射，并希望为此目的实现一个软件。我到底想要的是这种方法：

[![图片](../Images/115f6160e5bddcbd5df052fff40dbaeb.png)](https://i.stack.imgur.com/DXuP6.png)

我需要你的建议：

1.  opengl适合开发吗？
2.  您知道任何描述此主题的文档吗？
3.  这个主题的域名是什么？**纹理映射**? 当我在网上搜索时，我只得到 3d 样本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:01:20.207

你想要的是颜色混合。

有用的链接：

[在这里](http://www.photoshopessentials.com/photo-effects/blend-textures-with-photos/)和[这里](http://www.cgtextures.com/content.php?action=tutorial&name=blendif)为 Photoshop 示例提供更好的视觉理解。

[在这里](http://msdn.microsoft.com/en-us/library/bb976070.aspx)和[这里](http://en.wikipedia.org/wiki/Blend_modes)获取更多学术信息。

[在这里](http://blogs.msdn.com/b/shawnhar/archive/2008/11/03/detail-textures.aspx)和[这里，](http://www.gamasutra.com/features/20020626/hargreaves_01.htm)您可以找到一种将细颗粒纹理添加到平面颜色纹理的技术。

# java - 码头 - 如何在接受队列中花费时间？

> ID：15269415
> 
> 赞同：3
> 
> 时间：2013-03-07T11:01:12.783
> 
> 标签：java, jetty

当客户端连接到我们的 Jetty 服务器时，我们的应用程序遇到了一些延迟问题。我们可以看到在调度程序线程中花费的时间非常短（10 毫秒），但是我怎样才能找到请求在被处理之前在接受队列上的时间呢？

我们目前在 Linux 操作系统上使用 Jetty 6.1.24，具有 20 个接受器（可能太高）、20 个调度程序线程和 512 的队列大小。如果 Jetty 在该区域有任何调试日志记录，则更可取的解决方案是 log4j 设置，但是如果需要，我们还可以实现特定的侦听器来找到这个时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:54:45.740

您是否尝试过通过 JConsole 建立 JMX 连接？（只需在 shell 中输入 jconsole；该应用程序是 jdk 的一部分）

也许（并且可能）服务器提供了一些用于检索此类信息的 JMX 接口......

# java - 如何在android中旋转画布上的drawable

> ID：15269416
> 
> 赞同：2
> 
> 时间：2013-03-07T11:01:15.513
> 
> 标签：java, android, rotation, android-canvas, android-drawable

假设我在不同位置的画布上放置了多个可绘制对象。我愿意以某种形式旋转每个图像（一定角度）。所以我需要在画布上旋转drawable的代码。问题是任何drawable的旋转都不能反映到Canvas上的另一个drawable。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-03T09:44:28.347

尝试

```
yourCanvas.rotate(90); 
```

[Android.Developers 上的公共 void 旋转（浮动度数）](http://developer.android.com/reference/android/graphics/Canvas.html#rotate%28float%29)

# java - 在 Java (JSSE) 中使用默认 KeyStore 时如何提供特定的 TrustStore

> ID：15269419
> 
> 赞同：6
> 
> 时间：2013-03-07T11:01:33.813
> 
> 标签：java, ssl, client-certificates, jsse

# 概述

JSSE 允许用户通过指定 javax.net.ssl.* 参数来提供默认的信任库和密钥库。我想为我的应用程序提供一个非默认的 TrustManager，同时允许用户像往常一样指定 KeyManager，但似乎没有任何方法可以实现这一点。

# 细节

[http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#CustomizingStores](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#CustomizingStores)

假设在 unix 机器上我希望允许用户使用 pkcs12 密钥库进行身份验证，而在 OS XI 上希望允许用户使用系统钥匙串。在 OS X 上，应用程序可能按如下方式启动：

```
java -Djavax.net.ssl.keyStore=NONE -Djavax.net.ssl.keyStoreType=KeychainStore \
     -Djavax.net.ssl.keyStorePassword=- -jar MyApplication.jar 
```

这将正常工作：当应用程序访问需要相互身份验证（客户端证书身份验证）的 https 服务器时，将提示用户允许访问其钥匙串。

## 问题

现在假设我想将自签名证书颁发机构与我的应用程序捆绑在一起。我可以通过构造 TrustManagerFactory 并传入包含我的证书 ( [javadoc](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/TrustManagerFactory.html#init%28java.security.KeyStore%29) ) 的 KeyStore 来覆盖默认信任管理器。但是，要使用这个非默认信任管理器，我需要创建并初始化一个 SSLContext。问题就在这里。

通过调用[init(..)](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLContext.html)并同时传递 KeyManager 和 TrustManager 来初始化 SSLContext。但是，使用 javax.net.ssl.* 参数创建 KeyManager 的逻辑嵌入在默认 SSLContexts 的实现中——我找不到使用默认行为获取 KeyManager 或 KeyManagerFactory 的方法，同时还指定了非默认 TrustManager 或 TrustManagerFactory。因此，似乎不可能使用例如适当的操作系统特定的钥匙串实现，同时还提供用于验证远程服务器的根证书。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T12:13:03.947

听起来您面临与[此问题](https://stackoverflow.com/a/15144731/372643)类似的问题，因为使用信任管理器`null`参数`SSLContext.init(...)`恢复为默认信任管理器，而密钥管理器则没有。

话虽如此，使用默认系统属性初始化 KeyManager 并不难。像这样的东西应该可以工作（代码直接写在这个答案中，所以你可能需要修复一些小事情）：

```
String provider = System.getProperty("javax.net.ssl.keyStoreProvider");
String keystoreType = System.getProperty("javax.net.ssl.keyStoreType", KeyStore.getDefaultType());
KeyStore ks = null;
if (provider != null) {
    ks = KeyStore.getInstance(keystoreType, provider);
} else {
    ks = KeyStore.getInstance(keystoreType);
}
InputStream ksis = null;
String keystorePath = System.getProperty("javax.net.ssl.keyStore");
String keystorePassword = System.getProperty("javax.net.ssl.keyStorePassword");
if (keystorePath != null && !"NONE".equals(keystorePath)) {
    ksis = new FileInputStream(keystorePath);
}
try {
    ks.load(ksis, keystorePassword.toCharArray());
} finally {
     if (ksis != null) { ksis.close(); }
}

KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(ks, keystorePassword.toCharArray());
// Note that there is no property for the key password itself, which may be different.
// We're using the keystore password too.

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(kmf.getKeyManagers(), ..., null); 
```

（更具体地说，[这个实用程序类](http://code.google.com/p/jsslutils/source/browse/trunk/jsslutils/src/main/java/org/jsslutils/keystores/KeyStoreLoader.java)`getKeyStoreDefaultLoader()`也可能很有趣。）

**编辑：（**根据您的附加评论）

恐怕当您只想自定义一半的`SSLContext`. 您在 Oracle JSSE 文档中链接到的部分说：“*如果由 javax.net.ssl.keyStore 系统属性和适当的 javax.net.ssl.keyStorePassword 系统属性指定密钥库，则由默认 SSLContext 创建的 KeyManager将是用于管理指定密钥库的 KeyManager 实现。* ” 这在这里并不适用，因为您使用的是 custom `SSLContext`，而不是默认的（即使您正在自定义其中的一部分）。

无论如何，Oracle JSSE 参考指南和 IBM JSSE 参考指南在这个主题上有所不同。（我不确定其中有多少是“标准”，以及原则上是否应该与另一个兼容，但显然情况并非如此。）

两个“*创建`SSLContext`对象*”部分*几乎*相同，但它们不同。

[Oracle JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#SSLContext)说：

> 如果 KeyManager[] 参数为 null，则将为该上下文定义一个空的 KeyManager。

[IBM JSSE 参考指南](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp?topic=%2Fcom.ibm.java.security.component.doc%2Fsecurity-component%2Fjsse2Docs%2Fsslcontext.html)说：

> 如果 KeyManager[] 参数为空，将在已安装的安全提供程序中搜索 KeyManagerFactory 的最高优先级实现，从中获取适当的 KeyManager。

不幸的是，如果您希望在具有不同规范的实现之间具有相同的行为，您将不得不编写一些代码，即使这实际上是在复制其中一个实现已经做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T12:11:03.723

编写具有默认行为的 KeyManager 并不难。这只是几行代码。令人惊讶的是，SSLContexts 在 KeyManager 中的行为并不像在 TrustManager 中那样。IBM 的 JSSE 确实如此。但是自己合成并不难：

```
SSLContext  context = SSLContext.getInstance("TLS");
String  keyStore = System.getProperty("javax.net.ssl.keyStore");
String  keyStoreType = System.getProperty("javax.net.ssl.keyStoreType", KeyStore.getDefaultType());
String  keyStorePassword = System.getProperty("javax.net.ssl.keyStorePassword","");
KeyManager[]    kms = null;
if (keyStore != null)
{
    KeyManagerFactory   kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
    KeyStore    ks = KeyStore.getInstance(keyStoreType);
    if (keyStore != null && !keyStore.equals("NONE")) {
        fs = new FileInputStream(keyStore);
    ks.load(fs, keyStorePassword.toCharArray());
    if (fs != null)
        fs.close();
    char[]  password = null;
    if (keyStorePassword.length() > 0)
        password = keyStorePassword.toCharArray();
    kmf.init(ks,password);
    kms = kmf.getKeyManagers();
}
context.init(kms,null,null); 
```

# asp.net-mvc - 为什么我在发布到网络服务器时遇到连接问题，但仅限于特定用户？

> ID：15269420
> 
> 赞同：0
> 
> 时间：2013-03-07T11:01:35.750
> 
> 标签：asp.net-mvc, http, iis

我使用下面的（标准）代码发布，然后在 IIS 7.5 Web 服务器上处理文件。这对大多数用户来说都很好，但是对于一个用户来说，我们遇到了问题。

大约 10 秒后（虽然原始请求仍在 Web 服务器上运行），客户端计算机显示“Internet Explorer 无法显示网页”错误。似乎它正在尝试访问页面：`http://servername/application/controller/UploadFile`url 作为获取请求？

如果我们减少处理文件（在服务器上）所需的时间，那么这个问题就不会发生。

它是用户而不是特定于机器的，因为当用户登录到以前的工作机器时会发生相同的错误。

什么可能导致只有这个用户有问题而没有其他人有问题？

```
<form action="@Url.Action("UploadFile", "DirectReport")" method="post" enctype="multipart/form-data">
    <input type="file" id="file" name="file" />
    <input type="submit" value="Upload File" />

    <div id="UploadedFilePlaceholder">
        @Html.DisplayTextFor(x => x.UploadedFile)
    </div>    
</form>

[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase file)
{
    var model = new DirectReportingIndexViewModel() { UploadedFile = Path.GetFileName(file.FileName) };

    if (file.ContentLength > 0)
    {
        var path = SaveFile(file);
        var result = _directReportRunner.Run(path, file.FileName);
        model.DirectReportRunnerResult = result;
    }

    model.HasRun = true;

    return RedirectToAction("Index");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:41:28.837

原来是由注册表中的设置引起的：

[http://support.microsoft.com/kb/181050](http://support.microsoft.com/kb/181050)

# java - 如何在java中的文件中写入多次？

> ID：15269424
> 
> 赞同：1
> 
> 时间：2013-03-07T11:01:39.930
> 
> 标签：java, swing, file, bufferedwriter, bufferedinputstream

我之前提出了同样的[问题](https://stackoverflow.com/questions/15087221/how-to-free-the-content-of-a-file)，但我尝试了所有给定的答案，但没有人选择我的 prog。我创建了一个写入文件的方法，并将通过其他方法使用该文件。我的问题是当我想写另一个时间。我想从文件的开头开始，所以删除内容。这是我使用的课程，`if exist delete`否则`BufferedWriter bw = new BufferedWriter(new FileWriter(f, false));`我将只有执行的最后一行。我想如果我不能在某个时间使用某些文件进行读写。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.URLDecoder;
import java.util.ArrayList;
import java.util.List;

import javax.swing.SwingWorker;

/**
 * 
 * @author 
 */
 class InstallApk extends SwingWorker<Integer, Integer>{

    // File wd = new File("/myhomedir/");
    private InputStream pi;
    public static String dir;
    public static String cmd;
    public static String log;
    public static String testPath ;
    public static ArrayList<String> mlog = new ArrayList();
    public static String userHome = System.getProperty("user.home");
    public static int value = 0;
    private static Process runningProcess = null;
    public static Process process;
    static File f = new File(testPath + "/logtest.txt");
    private static final int DELAY = 1000;

    public InstallApk() {

    }

    public static String getPath() {
        String decodedPath = null;
        try {
            String path = NewJFrame.class.getProtectionDomain()
                    .getCodeSource().getLocation().getPath();
                    String f = NewJFrame.class.getProtectionDomain().getCodeSource().getLocation().getFile();
                    //.getCodeSource().getLocation().getPath();
            // URLDecoder decoder = new URLDecoder();
            decodedPath = URLDecoder.decode(path, "UTF-8");
        } catch (Exception e) {
            e.printStackTrace();

        }
        return decodedPath;
    }

    public static void writeToFile(String text) {
        try {

            BufferedWriter bw = new BufferedWriter(new FileWriter(f, true));
            //FileWriter out = new FileWriter(f);
            bw.write(text);
            bw.newLine();
            bw.close();
            //out.close();

        } catch (Exception e) {

        }
    }

      protected Integer doInBackground() throws Exception {
        int i = 0;
        int count = 10;
        Runtime runtime = Runtime.getRuntime();
        process = runtime.exec(new String[] { "sh",
                testPath + "/install.sh", cmd });
        while (!isCancelled() && i < count) {
          i++;
          publish(new Integer[] { i });
          setProgress(count * i / count);
          Thread.sleep(DELAY);
        }

     // read process output first
        BufferedReader buf = new BufferedReader(
                new InputStreamReader(process.getInputStream()));
        String line = "";
        try {

            if(f.exists()){
                 f.delete();

             }
            while ((line = buf.readLine()) != null) {
                System.out.println("exec response: " + line);
                if(line.startsWith("Failure")){

                    mlog.add(line);

                }
                log = line;
                writeToFile(line);
                //WriteFile.write(line, f);
                value ++;
            }
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
         System.out.println("la valeur d'execution "+InstallApk.value);
        // only once we've run out of output can we call waitFor
        while (true) {
            try {
                return runningProcess.waitFor();
            } catch (InterruptedException e) {
                // do nothing, wait again
            } finally {
                Thread.interrupted();
            }
        }

      }

      protected void processus(List<Integer> chunks) {
        for (int i : chunks)
          System.out.println(i);
      }

      protected void arret() {
        if (isCancelled())
          System.out.println("Annuler");
        else
          System.out.println("Terminer");
      }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:43:18.053

来自 javadoc 的 RandomAccessFile

```
Instances of this class support both reading and writing to a 
* random access file. A random access file behaves like a large 
* array of bytes stored in the file system. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:43:24.113

我只是使用 printWriter 就是这样。

```
protected Integer doInBackground() throws Exception {
        int i = 0;
        int count = 10;
        Runtime runtime = Runtime.getRuntime();
        process = runtime.exec(new String[] { "sh",
                testPath + "/install.sh", cmd });
        while (!isCancelled() && i < count) {
          i++;
          publish(new Integer[] { i });
          setProgress(count * i / count);
          Thread.sleep(DELAY);
        }
         File f = new File(testPath + "/logtest.txt");
     // read process output first
        BufferedReader buf = new BufferedReader(
                new InputStreamReader(process.getInputStream()));
        String line = "";
        try {

            PrintWriter writer = new PrintWriter(f, "UTF-8");

            while ((line = buf.readLine()) != null) {
                System.out.println("exec response: " + line);
                if(line.startsWith("Failure")){

                    mlog.add(line);

                }
                log = line;
                //writeToFile(line);
                writer.println(line);
                //WriteFile.write(line, f);
                value ++;
            }
            writer.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
         System.out.println("la valeur d'execution "+InstallApk.value);
        // only once we've run out of output can we call waitFor
        while (true) {
            try {
                return runningProcess.waitFor();
            } catch (InterruptedException e) {
                // do nothing, wait again
            } finally {
                Thread.interrupted();
            }
        }

      } 
```

# asp.net - ASP.NET 负载均衡器 IP 检测

> ID：15269439
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:02:05.873
> 
> 标签：asp.net

我目前正在使用以下代码来检测 IP 地址。

```
<code>
    IP = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
</code> 
```

这在我们没有负载均衡器时有效，但在负载均衡器存在的情况下不起作用。

我需要两个都支持。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:30:11.703

我在上面的代码中使用下面提到的代码，在上下文中不存在：-

```
IP = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

//Not Behind the Load balancer or proxy server
   if (IP == null)
    {
      IP = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:13:57.723

原始请求 IP 被负载均衡器 IP 覆盖，因为负载均衡器是接收请求的机器。您的 Web 服务器接收来自平衡器的请求，而不是来自客户端浏览器的请求。

一些负载均衡器将原始请求 IP 放在 HTTPHeaders 中。您可以从 ASP.NET 读取此 httpheader。

无论如何，您必须阅读负载均衡器文档并检查负载均衡器如何将客户端浏览器 IP 发送到 Web 服务器。

一旦您知道如何从负载均衡器获取客户端 IP，您就可以检查代码中的值。

前任：

```
function getClientIP{

    var IP = getClientIPfromLoadBalancer();

    If  (IP != null){return IP;}
    else {return getClientIPfromRequest();}
}

IP = getClientIP(); 
```

由于我不知道您的负载均衡器是如何工作的，因此我无法更明确地使用示例代码。

# c# - 比较MVC的datavalidation属性中的dateTime和string

> ID：15269444
> 
> 赞同：0
> 
> 时间：2013-03-07T11:02:21.020
> 
> 标签：c#, asp.net-mvc

我有一个包含员工基本细节的模型。在详细信息中有一个名为 的字段`Date of Birth`。下面给出了带有数据注释的属性：

```
[RegularExpression("(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20[0-9][0-9]", ErrorMessage = "Date should be in dd/mm/yyyy format")]
public string DateOfBirth
{
    get; set;
} 
```

出生日期应该有两个验证条件：-

1.  它应该是`dd/mm/yyyy`格式。
2.  `Date of Birth`应该小于今天的日期。

如您在上面看到的，对于第一个条件，我应用了正则表达式。

我想要第二个验证条件的解决方案。既然`Data of Birth`是`String`格式，怎么能和`DateTime`格式比较呢？有什么解决办法吗？

# highcharts - Highchart 手动管理状态

> ID：15269445
> 
> 赞同：0
> 
> 时间：2013-03-07T11:02:25.997
> 
> 标签：highcharts

有没有办法在 highchart 中删除默认状态机制？

似乎自动更改悬停状态正在重置我手动设置的状态。

我想要实现的是当用户点击它时选择系列。

我添加了这样的选择状态：

```
plotOptions: {
        series: {
               states: {
                     select: {

                            lineWidth: 2
                     }
               }, 
```

我正在手动设置此状态：

```
this.setState(this.state === 'select' ? '' : 'select'); 
```

lineWidth 更改是有效的，但是当我在它周围移动鼠标时会重置 lineWidth （我猜是因为触发了一些悬停事件，但我不确定。）

我已经尝试禁用悬停状态，但没有任何成功：

```
states: {
    hover: {
        enabled: false
    },
    select: {
            lineWidth: 3 
```

当您单击系列行时，可以在此[jsfiddle](http://jsfiddle.net/G9d9H/5/)上看到确切的问题，它被选中然后在它周围移动取消选择......我无法理解为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:33:20.423

如果您始终手动设置状态，则可以在实例化任何图形之前通过将以下代码段添加到代码中来关闭“正常”/重置状态。如果没有传递参数，它所做的就是取消 setState 操作（也就是 Highcharts 源代码试图将系列恢复正常）。

```
Highcharts.Series.prototype.setState = (function (func) {
        return function () {
            if (arguments.length>0){
                func.apply(this, arguments);
            }
        };
    } (Highcharts.Series.prototype.setState)); 
```

让我知道这是否是您正在寻找的东西！这是修改后的 JSFiddle：http: [//jsfiddle.net/G9d9H/8/](http://jsfiddle.net/G9d9H/8/)

编辑：只是一点但进一步解释，Highcharts 源代码实际上在做什么，如果你`mouseOver`是一个系列，它会自动将所有其他系列恢复为默认样式。由于这很可能是状态功能的 #1 用例，我假设这就是他们以这种方式编码的原因。

# image - 批量调整大小并输出多张图像

> ID：15269449
> 
> 赞同：-2
> 
> 时间：2013-03-07T11:02:36.517
> 
> 标签：image, batch-file, resize, photoshop, photoshop-script

我需要批量调整多个图像的大小，这在 Photoshop 中非常容易插入一个文件夹并在另一个文件夹中获得输出。

但我需要一个图像的多个图像。

我拥有的是一个包含所有原始图像的文件夹，以及我需要四种不同尺寸的每个图像，请参阅：

![](../Images/e79a21a5b42cf9a1ca854f43285c35ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:59:54.127

This script will do what you want: Save out four images in the size required as gifs in a directory called "export"

```
app.preferences.rulerUnits = Units.PIXELS;

// call the source document
var srcDoc = app.activeDocument;
var imageWidth = srcDoc.width.value;
var imageHeight = srcDoc.height.value;
var resizeRes = 72;
fileName = app.activeDocument.name;
docName = fileName.substring(0,fileName.length -4);

//turn it RGB
var id60 = charIDToTypeID( "CnvM" );
var desc12 = new ActionDescriptor();
var id61 = charIDToTypeID( "T   " );
var id62 = charIDToTypeID( "RGBM" );
desc12.putClass( id61, id62 );
executeAction( id60, desc12, DialogModes.NO );

// create directory called export
var myExportDir = "export"
var myDirectoryName = srcDoc.path + "/" + myExportDir;
var myDirectory = new Folder(myDirectoryName);
if(!myDirectory.exists) myDirectory.create();

// define the array to hold the sizes of the shrunk images
var reSizeArr = [
   [125,  70,  ResampleMethod.BICUBIC],
   [640,  360, ResampleMethod.BICUBIC],
   [320,  180, ResampleMethod.BICUBIC],
   [1005, 565, ResampleMethod.BICUBIC],
      ]

for (var i=0; i<reSizeArr.length; i++)
   {
   var shrinkWidth =  reSizeArr [i][0];
   var shrinkHeight = reSizeArr [i][1];
   var mySaveName = shrinkWidth + "x" + shrinkHeight;
   var resizeMethod = reSizeArr [i][2];

   // duplicate image into new document
   // =======================================================
   var id428 = charIDToTypeID( "Dplc" );
   var desc92 = new ActionDescriptor();
   var id429 = charIDToTypeID( "null" );
   var ref27 = new ActionReference();
   var id430 = charIDToTypeID( "Dcmn" );
   var id431 = charIDToTypeID( "Ordn" );
   var id432 = charIDToTypeID( "Frst" );
   ref27.putEnumerated( id430, id431, id432 );
   desc92.putReference( id429, ref27 );
   var id433 = charIDToTypeID( "Nm  " );
   desc92.putString( id433, mySaveName );
   executeAction( id428, desc92, DialogModes.NO );

   // resize image
   activeDocument.resizeImage(shrinkWidth, shrinkHeight, resizeRes, resizeMethod);

   // set to 256 cols
   var id111 = charIDToTypeID( "CnvM" );
   var desc23 = new ActionDescriptor();
   var id112 = charIDToTypeID( "T   " );
   var desc24 = new ActionDescriptor();
   var id113 = charIDToTypeID( "Plt " );
   var id114 = charIDToTypeID( "ClrP" );
   var id115 = charIDToTypeID( "Exct" );
   desc24.putEnumerated( id113, id114, id115 );
   var id116 = charIDToTypeID( "FrcC" );
   var id117 = charIDToTypeID( "FrcC" );
   var id118 = charIDToTypeID( "None" );
   desc24.putEnumerated( id116, id117, id118 );
   var id119 = charIDToTypeID( "Trns" );
   desc24.putBoolean( id119, false );
   var id120 = charIDToTypeID( "IndC" );
   desc23.putObject( id112, id120, desc24 );
   executeAction( id111, desc23, DialogModes.NO );

   // Set filePath and fileName to source path
   filePath = srcDoc.path + "/" + myExportDir + "/" + mySaveName  + ".gif";

   // save out the image
   var gifFile = new File(filePath);
   gifSaveOptions = new GIFSaveOptions();
   gifSaveOptions.colors = 256;
   gifSaveOptions.dither = Dither.NONE;
   gifSaveOptions.matte = MatteType.NONE;
   gifSaveOptions.preserveExactColors = 0;
   gifSaveOptions.transparency = 1;

   activeDocument.saveAs(gifFile, gifSaveOptions, false, Extension.LOWERCASE);

   // close that saved gif
    app.activeDocument.close()
   } 

   //close without saving
   app.activeDocument.close(SaveOptions.DONOTSAVECHANGES); 
```

# svn - 是否可以重命名svn标签

> ID：15269454
> 
> 赞同：11
> 
> 时间：2013-03-07T11:02:51.270
> 
> 标签：svn, tags, rename

是否可以在颠覆中重命名标签？

每当我发布应用程序的生产版本时，我都会用相应的编号标记修订版，例如，当版本`1.0.0`发布时，会创建相应的标记：

```
svn copy https://svn.mydomain.com/project/trunk https://svn.mydomain.com/project/tags/v_1.0.0 
```

以同样的方式，我只是签入`1.0.3`了应用程序版本的代码并创建了相应的标签。但是我注意到，当`1.0.2`发布时，标签被创建为`v_1.2`而不是`v_1.0.2`. 有没有办法重命名标签？目前，我有这个：

```
r14 - final changes for version 1.0.2
r15 - tag 1.2 created
r16 - more changes
r17 - more changes
r18 - final changes for 1.0.3
r19 - tag 1.0.3 created 
```

我想将标签重命名`1.2`为`1.0.2`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T11:51:11.553

是的，您可以重命名Subversion 存储库中子树的**任何**部分。

标签（任何标签）只是 /tags 中的目录（如果您使用常规布局）。并且可以对其应用重命名

`svn mv <REPO>/tags/v_1.2 <REPO>/tags/v_1.0.2`

# cognos - 在 Cognos Report 中使用 sysdate

> ID：15269455
> 
> 赞同：0
> 
> 时间：2013-03-07T11:02:52.550
> 
> 标签：cognos, cognos-8, sysdate

我的 cognos 报告使用 sysdate-n 检索指定日期的记录。报告执行时间各不相同。假设我的报告运行到第二天，即上午 12:00 之后，收到的记录是否会混乱，或者检索到的记录是否仅取决于执行报告的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:09:25.663

如果没有看到报告中 Cognos 生成的 SQL 有多复杂，这是一个很难回答的问题。

正如 Sana 评论所暗示的那样，通常 SQL 将在第一次命中时被执行并设置 sysdate 的值，但是当有复杂的报告时，我们在数据库中看到了一些非常奇怪的日志，其中针对不同的过滤器执行了不同的 SQL 部分 -这意味着当这些 SQL 片段运行时，它*可能*会给您带来问题。

如果您可以发布有帮助的报告的 sql，但最好的选择可能是对其进行测试 - 在晚上 11:55 运行报告，看看结果与在上午 12:01 运行时的结果有何不同

# css - HTML, CSS - 我如何将样式转移到 ActionLink

> ID：15269456
> 
> 赞同：1
> 
> 时间：2013-03-07T11:02:53.000
> 
> 标签：css, asp.net-mvc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:07:21.447

您可以将所有样式放在一个类中，然后将类交给 ActionLink

```
 @Html.ActionLink("דף הבית", "Index", "Home", null, new { id = "something", @class="something you give to anchor" } 
```

例如

```
a,.anchorstyle{
text-decoration:none;
color:blue;

}

<a href="#">hello </a> 
```

或者

```
<a class="anchorstyle" href="#">hello </a> 
```

或将此类添加到 ActionLink

```
 @Html.ActionLink("דף הבית", "Index", "Home", null, new { id = "something", @class="anchorstyle" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:07:09.550

```
@Html.ActionLink("דף הבית", "Index", "Home", null, new { id = "something", @class="someCssClass" } 
```

或者

```
@Html.ActionLink("דף הבית", "Index", "Home", null, new { id = "something", @class="someCssClass", @style="color:white;" } 
```

# sql-server - 如何在sql server中为给定的序列号生成日期

> ID：15269460
> 
> 赞同：0
> 
> 时间：2013-03-07T11:03:10.990
> 
> 标签：sql-server, sql-server-2008

我需要为给定的序列号生成日期值（从 getdate 开始并增加 1）

```
 SlNr  Date
    1     3/7/2013
    2     ?
    3     ?
    4     ?
    5     ?
    6     ?
    7     ?
    8     3/14/2013
    .     ?
    .     ? 
```

如何编写sql查询。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:15:51.127

尝试这个 ：

```
with cte as
(select 1 Sno, convert(date,GETDATE(),103) mydate
union all

select Sno+1,DATEADD(dd,1,mydate) from cte where Sno<=10)

select * from cte 
```

更改`WHERE`子句以获取更多日期。您可以使用`Insert into`before`select`在某个表中插入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:11:12.597

看看[这里](http://msdn.microsoft.com/de-de/library/ms186819.aspx)`DATEADD()`的功能。

```
SELECT SlNr, DATEADD(DAY, SlNr, GETDATE()) FROM yourTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:18:36.323

您可以使用`ROW_NUMBER`和`DATEADD`

```
WITH cte 
     AS (SELECT slnr, 
                date, 
                RN = Row_number() 
                       OVER( 
                         ORDER BY slnr) 
         FROM   dates) 
UPDATE cte 
SET    date = Dateadd(dd, cte.RN - 1, GETDATE()) 
WHERE  date IS NULL; 
```

[**演示**](http://www.sqlfiddle.com/#!3/7e627/4/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:16:15.290

要获得显示的结果：

```
declare @firstdate date = '20130307' --Your first date in yyyymmdd format

select slnr, dateadd(day, (slnr-1), @firstdate) [date]
from yourTable
order by slnr 
```

如果您使用`getdate()`，每天的结果都会有所不同。如果那你需要的只是`replace @firstdate with getdate()`功能。

# php - 如何延长 php 中设置的 cookie 的过期时间？

> ID：15269462
> 
> 赞同：0
> 
> 时间：2013-03-07T11:03:18.493
> 
> 标签：php, javascript

我在 php 中设置了 cookie，即

```
setcookie("username",$username,time()+3600); 
```

如果用户处于活动状态，现在在一个小时后的 javascript 中，我想延长 cookie 的时间。而且，如果用户空闲超过 15 分钟，我想删除 javascript 中的 cookie。可能吗 ？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:04:58.247

难道你不能通过一个 ajax 例程来检查用户是否超过 15 分钟处于非活动状态，该例程会每隔 n 毫秒 ping 一个后端 PHP 例程，它会检查最后一次访问时间，如果用户在过去 15 分钟内一直处于活动状态。

您可以将“上次访问”时间添加到 cookie 值中，因此 cookie 的值将（可能）是（由 PHP 初始设置）$username.';'.time()。然后，您可以针对它运行日期例程。

无需等待一个小时通过 JavaScript 更新 cookie，您可以简单地通过 PHP 跨页面加载更新 cookie 的“上次访问”时间，或者使用 ajax 例程来实现这一点。

# ruby-on-rails - '耙子中止了！无法加载此类文件 - 机架错误

> ID：15269463
> 
> 赞同：0
> 
> 时间：2013-03-07T11:03:20.677
> 
> 标签：ruby-on-rails, ruby, rack, redmine

我在 CentOS v5.6 上安装 Redmine v2.2.3。我安装了 ruby​​ v1.9.3p385。当我这样做`rake generate_secret_token`或`bundle exec rake generate_secret_token`我得到错误时`'rake aborted! cannot load such file -- rack'`。完整的trace如下

```
rake aborted!
cannot load such file -- rack
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch.rb:35:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch.rb:35:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/railtie.rb:1:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/railtie.rb:1:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails.rb:14:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails.rb:14:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/all.rb:1:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/all.rb:1:in `<top (required)>'
/mnt/projects/redmine/config/application.rb:3:in `require'
/mnt/projects/redmine/config/application.rb:3:in `<top (required)>'
/mnt/projects/redmine/Rakefile:5:in `require'
/mnt/projects/redmine/Rakefile:5:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>' 
```

机架 gem 已安装。我什么时候`bundle show rack`得到

```
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T01:21:40.097

我删除了整个捆绑包并重新捆绑了项目。

# java - 最终作为参数传递

> ID：15269473
> 
> 赞同：2
> 
> 时间：2013-03-07T11:03:49.600
> 
> 标签：java, parameters, final

在以下示例中，它通过将参数设置为来工作和`int i`编译`final`

```
class Miner1
{
    Miner getMiner(final int i) {
        return new Miner() {                
           public void perform_work() { 
              System.out.println(i);
           }
        };
    }

interface Miner { void perform_work(); } 
```

否则，如果没有像前面的示例那样设置为 final，它将无法编译。有人知道为什么吗？即使没有，它也应该在范围内，`final`因为花括号尚未关闭。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:07:40.350

这与范围无关，而是与[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)有关。

您不能从在父类中声明的匿名类访问局部变量，除非该变量是`final`.

看看关于 SO[的](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)另一个问题，它解释了逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:06:34.933

它与范围没有任何关系。

在 Java 中，匿名类只能从`final`.

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)：

> 必须声明任何使用但未在内部类中声明的局部变量、形式参数或异常参数`final`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:08:59.720

Java 只允许从定义在方法/构造函数中的匿名类引用最终变量/参数。这是为了使代码的行为更直观。变量/参数的值在创建实例时通过隐藏的构造函数参数传递给匿名类的实例，因此匿名类的实例无法跟踪变量的进一步变化。如果允许访问非最终变量，则可以编写以下内容：

```
int a = 5;

Thread t = new Thread ()
{
    @Override
    public void run ()
    {
        System.out.println (a); // This will print 5, rather than 6!
    }
};

a = 6;

t.start (); 
```

并期望`6`被打印出来。要理解为什么上面的代码会打印`5`，请注意这段代码等价于以下代码：

```
class MyThread extends Thread
{
    int _a;

    public MyThread (int a)
    {
        this._a = a;
    }

    @Override
    public void run ()
    {
        System.out.println (_a);
    }
}

int a = 5;

Thread t = new MyThread (a); // Value `5` is passed

a = 6;

t.start (); // Value `5` passed to the constructor earlier is printed here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:24:51.460

这是因为，在 Java 中，匿名内部类只能访问 final 局部变量和类的字段。
现在的问题是**为什么？**
这是因为方法的局部变量（`getMiner`在您的情况下）存在于堆栈中，并且仅在方法的生命周期内存在。局部变量的范围仅限于声明变量的封闭方法。当方法结束时，堆栈帧被吹走，变量是历史。但是即使在方法完成之后，在其中创建的内部类对象可能仍然在堆上存活。如果例如`Miner`通过获得匿名内部类的引用`getMiner`被传递到代码的其他位置并在那里使用，因为局部变量已经被炸毁，这对于该对象来说将是一个奇怪的情况。此问题的一种解决方案可能是匿名内部类对象制作局部变量的副本。但同样不能保证匿名内部类对象会看到该变量的最新值，因为局部变量容易受到更改。

但是如果局部变量是final的，它保证了变量值在初始化后在任何情况下都不会改变，所以方法局部内部类可以只复制它以供私有使用，即使在原始值之后仍然存在已从堆栈中移除。

# php - 从 php 对 mysql 进行动态查询

> ID：15269478
> 
> 赞同：0
> 
> 时间：2013-03-07T11:04:10.787
> 
> 标签：php, mysql

当用户可以在下拉菜单中选择字段以在简单的 mySql 数据库中进行查询时，我想创建一个页面，然后在屏幕上打印结果。

一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:07:38.677

如果您有 Microsoft Access，请查看使用 GUI 选择字段时生成查询的方式（切换到 SQL 视图以查看查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:07:48.330

只需生成一个 HTML 表单，列出数据库中的可用选项，然后从最终用户的输入中，将输入/字符串连接在一起以构成将返回的有效 MySQL 查询。

但实际编码的是你；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:21:23.937

在这里检查我的答案..类似的问题。希望对您有所帮助

[PHP/MSSQL - 过滤用户输入 (HTML)](https://stackoverflow.com/questions/14603807/php-mssql-filtering-from-user-input-html/14604096#14604096)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:29:34.493

你可以这样做：

```
$get_dropdown_value=isset($_REQUEST["result"])?$_REQUEST["result"]:"";

//Query
mysql_query("SELECT * FROM $get_dropdown_value"); 
```

从您的代码中获取下拉值。并将其分配在`$get_dropdown_value`.

# html - 与 box-shadow 重叠的子元素

> ID：15269482
> 
> 赞同：0
> 
> 时间：2013-03-07T11:04:27.610
> 
> 标签：html, z-index, overlap, css

嗨，伙计们，

我有一个问题：来自.elem3 的盒子阴影不应该与.elem2 重叠。我试图用 z-index 来解决这个问题。首先，我认为这是 IE 中的一个错误，但在所有浏览器中都是相同的结果。

有人知道答案吗？

..对不起我的英语不好我是德国人:)

HTML：`

```
 <div class="elem1">
        <div class="elem2">

        </div>
    </div>
    <div class="elem3">

    </div>` 
```

CSS：

`

```
 body {
            margin: 0;
        }

        .elem1 {
            position: absolute;
            height: 50px;
            width: 400px; 
            background: linear-gradient(top, #70ACD7, #005DA8);
            background: -moz-linear-gradient(top, #70ACD7, #005DA8);
            background: -webkit-linear-gradient(top, #70ACD7, #005DA8);
            z-index: 1;
            margin-top: 20px;
        }

        .elem2 {
            position: absolute;
            height: 50px;
            width: 100px;
            margin-left: 100px;
            background: linear-gradient(top, #CCC, #AAA);
            background: -moz-linear-gradient(top, #CCC, #AAA);
            background: -webkit-linear-gradient(top, #CCC, #AAA);
            background: -ms-linear-gradient(bottom, rgb(170,170,170) 43%, rgb(204,204,204) 72%);
            z-index: 3;
            box-shadow: 0px 0px 8px black;
        }

        .elem3 {
            position: absolute;
            top: 70px;
            left: 100px;
            width: 150px;
            height: 100px;
            background: linear-gradient(top, #AAA, #CCC);
            background: -moz-linear-gradient(top, #AAA, #CCC);
            background: -webkit-linear-gradient(top, #AAA, #CCC);
            background: -ms-linear-gradient(bottom, rgb(170,170,170) 43%, rgb(204,204,204) 72%);
            z-index: 2;
            box-shadow: 0px 0px 8px black;
        } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:09:03.860

这是不可能的，因为`elem2`它的子级`elem1`和子级的 z-index 不能高于其父级，您必须从 中删除`elem2`，`elem1`如下所示：

```
<div class="elem1"></div>
<div class="elem2"></div>
<div class="elem3"></div> 
```

您可以通过添加一个`margin-top: 20px`to将其定位回原来的位置`elem2`。然后给出`elem1`1`elem2`的 z-index、3`elem3`的 z-index 和 2 的 z-index。

希望有帮助。

# windows - Mac 的 CodeKit - Windows 等效？

> ID：15269483
> 
> 赞同：9
> 
> 时间：2013-03-07T11:04:31.940
> 
> 标签：windows, frontend, codekit

我一直在使用[CodeKit](http://incident57.com/codekit/)在 Mac 上进行前端开发。最方便的功能是：

*   项目文件组织
*   轻松编译和缩小 SCSS、LESS 和 CoffeeScript
*   项目观察，自动编译
*   浏览器自动重新加载和 CSS 注入

这些功能非常有用且省时。因此，我想知道 Windows 上是否有具有相同功能的等效软件？或者，我可以通过结合所有现有工具来DIY这样的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T05:28:00.863

[http://mixture.io](http://mixture.io)

我只使用了五分钟，它已经自动编译了我的 LESS 文件并在我的浏览器中重新加载。

它仍处于测试阶段，它提供了我刚刚开始阅读的大量内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-18T17:07:25.490

您可以尝试[http://alphapixels.com/prepros](http://alphapixels.com/prepros)。通过实时浏览器刷新，它可以编译更少、sass、scss、coffee 等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-26T15:08:53.463

Koala 是一个与 codekit 非常相似的替代方案，虽然没有那么好但足够接近。

[http://koala-app.com/](http://koala-app.com/)

# wordpress - 问题将 wordpress 网站移动到 plesk

> ID：15269487
> 
> 赞同：0
> 
> 时间：2013-03-07T11:04:48.430
> 
> 标签：wordpress, ftp, plesk

我最近一直在将 localhost wordpress 站点导入 plesk。我已经使用 ftp 将我所有的 wordpress 文件从 localhost 上的 htdocs 移动到 plesk 中的 httpdocs。我还将我的 wp 内容导入到服务器上的一个新数据库中，我已经在 wordpress 的 config.php 中设置了正确的详细信息。但是，当我尝试查看该网站时，它首先显示一个 plesk 默认页面，当我从 httpdocs 中删除该索引文件时，一个 apache 默认页面显示“您现在可以将内容添加到目录 /var/www/html/ . 请注意，在您这样做之前，访问您网站的人将看到此页面而不是您的内容。要防止此页面被使用，请按照文件 /etc/httpd/conf.d/welcome.conf' 中的说明进行操作。

对不起，如果我很密集，但我认为如果没有 public_html，所有的 web 文件都应该移动到 httpdocs？另外，我在哪里可以找到 var/www/html/？因为我在使用 ftp 时在任何地方都看不到这个目录。

再次抱歉，如果这是一个愚蠢的问题，但我是 plesk 的新手！

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:07:13.763

您需要为您的 plesk 站点激活 php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:52:28.390

您在 Plesk 中有任何域吗？由 plesk 创建的域的 Http 根被放置到

```
/var/www/vhosts/<domain name>/httpdocs/ 
```

您可以通过以下命令检查当前 apache 的虚拟主机：

```
 apachectl -S 
```

或者

```
apache2ctl -S 
```

# wpf - 带导航的 ICommand

> ID：15269489
> 
> 赞同：0
> 
> 时间：2013-03-07T11:04:52.890
> 
> 标签：wpf, xaml, mvvm, winrt-xaml, icommand

我正在开发一个 WinRT 应用程序，我正在尝试对按钮使用命令。

```
public class addCommand : ICommand
{
    private async Task AddNewVehicle()
    {
        vvm VM = new vvm();
        await VM.AddNewVehicleInfo();
    }

public bool CanExecute(object parameter)
{
    return true;
}

public event EventHandler CanExecuteChanged;

public void Execute(object parameter)
{
    AddNewVehicle();

} 
```

}

在调用并完成 AddNewVehicle() 方法后，我想转到我的详细信息页面。在点击事件中，我有这样的事情：

```
 this.Frame.Navigate(typeof(VehicleItemDetailPage), 0); 
```

但是，当我将它添加到我的命令时，我收到错误，它不知道是什么`Frame`。

执行命令后如何导航到我的详细信息页面？

**更新的 XAML 代码：**

```
<Button x:Name="addButton" Style="{StaticResource AddAppBarButtonStyle}" Command="{Binding AddCommand}" CommandParameter="{Binding ElementName=Frame}"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T13:34:34.383

我只想打电话

> ((Frame)Window.Current.Content).Navigate(typeof(VehicleItemDetailPage), 0);

而不是`this.Frame`从 XAML 传递您不需要的任何参数的事物。因为框架是静态的。所以你不需要当前启动的代码视图的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:13:46.440

您可以将 Frame 字段作为`Execute`参数传递。例如

```
<Button Command="{Binding CommandName,CommandParameter={Binding ElementName=Frame}}"/> 
```

之后，您只需投射并根据`parameter`需要`Frame`使用它。

# sharepoint-2010 - 用于具有多个存储过程的大型数据库的 Business Connectivity Services

> ID：15269495
> 
> 赞同：0
> 
> 时间：2013-03-07T11:04:57.430
> 
> 标签：sharepoint-2010, sharepoint-2013, bcs, sharepoint2010-bcs

我正在开发一个包含多个存储过程的大型数据库的项目，我需要使用 SharePoint 2013 中的数据，该数据库位于 SQL Server 2008 R2 中

根据我的理解，我有两种选择：

1）是创建一个Web服务，使用实体框架与数据库交互，很可能会使用WebAPI。我的逻辑将在存储过程或 DAL 层中。

2) 其次，我做了一些研究，了解了 SharePoint 2010/2013 提供的业务连接服务，因为我正在使用 2013，所以我将使用 Visual Studio 2012。现在了解有关 BCS 的更多信息，我了解到我可以将每个表映射为内容类型，然后以某种方式定义关系。Anwyay，实施 BCS 是一个单独的问题，我想我会以某种方式管理。

我的问题是我将如何导入/包含我的存储过程？如果不是存储过程，那么我将在哪里编写查询以从 BCS 获取数据？

请指引我正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T16:37:57.510

使用自定义 BCS 连接器，您可以实现从数据库中检索数据的方式（直接在 C# 中），因此您可以直接查询表或存储过程。

如果您想尝试使用 BCS 连接器来创建要在 SharePoint 中使用的外部内容类型，请查看[我的博客](http://jmecwel.wordpress.com/2013/08/15/sp13-search-index-sql-products/)。我的示例与为搜索建立索引 sql 数据有关，但它在 SharePoint 中完成的方式是创建一个外部内容类型，而此内容类型就是您索引的内容类型。因此，您将找到有关如何创建该 BCS 连接器的有用信息。

# c++ - 如何用android ndk和eclipse编译c++11代码？

> ID：15269496
> 
> 赞同：15
> 
> 时间：2013-03-07T11:04:58.790
> 
> 标签：c++, gcc, c++11, android-ndk, smart-pointers

我正在使用 android NDK r8d 和 eclipse Juno。我正在尝试在 Eclipse 的原生 android 项目中编译使用 C++11 之类的 C++ 代码，如`mutex`, `lock_guard`,`shared_ptr`等。

我收到如下错误：

> “错误：‘shared_ptr’不是‘std’的成员”
> 
> “致命错误：互斥锁：没有这样的文件或目录”

[我在这里](https://stackoverflow.com/questions/14532057/smart-pointers-not-working-with-android-ndk-r8)遇到了一个类似的问题。它似乎对他们有用，但那里的解释并不完整，所以我无法让它为我工作。

我添加`"NDK_TOOLCHAIN_VERSION=4.7"`到`Application.mk`和文件中`"LOCAL_CFLAGS += -std=c++11"`。`Android.mk`尽管如此，它仍然无法编译。

在上面的链接中它说：

> “确保标准库包含路径（如 /android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.7/include）在目标设置中。”

我如何以及在哪里插入它？

我还在 eclipse IDE 中遇到错误（在源代码上，在编译之前）。我知道我应该定义`"__GXX_EXPERIMENTAL_CXX0X__"`来解决它们，但我只是不知道把它放在哪里。

因此，如果有人可以发布一个完整解释如何编译和使 eclipse 与 C++11 一起工作的答案，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:12:44.827

关于你的第一个问题：

1.  转到项目 > 属性 > C/C++ 常规/路径和符号

2.  在“包含”选项卡中，添加正确的目录，例如 /android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.7/include

关于你的第二个问题，我也在寻找答案。绝对不清楚如何在 Eclipse 中定义**GXX_EXPERIMENTAL_CXX0X**宏。

有人说它应该“作为预定义的宏添加到索引器”，但看起来我们都找不到实现它的方法......

我在其他地方读到它应该被添加到“C/C++ General / Paths and Symbols / Symbols / GNU C++”，但我在我的 Indigo 版本中找不到“Symbols / GNU C++”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T14:35:03.520

我发现在我启动 eclipse 之前导出一个环境变量 NDK_TOOLCHAIN_VERSION=4.8 可以解决这个问题。

Eclipse 使用 ndk 的默认工具链版本 4.6，如果没有定义 NDK_TOOLCHAIN_VERSION，并且 gcc 巫婆这个版本不支持所有 c++11 的未来如多线程等。

# php - 如果字符串是唯一的，则PHP追加到文件

> ID：15269500
> 
> 赞同：7
> 
> 时间：2013-03-07T11:05:08.570
> 
> 标签：php, file, append

是否可以检查正在添加到文件的字符串是否不在文件中，然后才添加它？现在我正在使用

```
 $myFile = "myFile.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = $var . "\n";
    fwrite($fh, $stringData);
    fclose($fh); 
```

但是我得到了许多重复的 $var 值，并想摆脱它们。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:09:23.123

用这个

```
$file = file_get_contents("myFile.txt");
if(strpos($file, $var) === false) {
   echo "String not found!";
   $myFile = "myFile.txt";
   $fh = fopen($myFile, 'a') or die("can't open file");
   $stringData = $var . "\n";
   fwrite($fh, $stringData);
   fclose($fh);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:09:27.627

最好的方法是`file_get_contents`仅当 $var 不在您的文件中时才使用和执行操作。

```
$myFile = "myFile.txt";
$file = file_get_contents($myFile);
if(strpos($file, $var) === FALSE) 
{
   $fh = fopen($myFile, 'a') or die("can't open file");
   $stringData = $var . "\n";
   fwrite($fh, $stringData);
   fclose($fh);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:09:40.257

```
$myFile = "myFile.txt";
$filecontent = file_get_contents($myFile);
if(strpos($filecontent, $var) === false){
$fh = fopen($myFile, 'a') or die("can't open file");
$stringData = $var . "\n";
fwrite($fh, $stringData);
fclose($fh);
}else{
 //string found
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:08:44.143

可能的解决方案可能是：

```
1\. Fetch the contents using fread or file_get_contents
2\. Compare the contents with the current contents in file
3\. add it if it is not there. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:09:03.223

```
function find_value($input) {

  $handle = @fopen("list.txt", "r");
   if ($handle) {
    while (!feof($handle)) {
     $entry_array = explode(":",fgets($handle));
     if ($entry_array[0] == $input) {
      return $entry_array[1];
     }
  }
 fclose($handle);
}
return NULL;
} 
```

你也可以这样做

```
$content = file_get_contents("titel.txt");
$newvalue = "word-searching";
//Then use strpos to find the text exist or not 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T11:09:43.820

您可以将所有添加的字符串保存在一个数组中，并使用[in_array](http://php.net/manual/en/function.in-array.php)检查当前字符串是否已添加。

第二种选择是每次要写入文件时[读取文件并对其执行](http://php.net/manual/en/function.readfile.php)[strstr](http://php.net/manual/en/function.strstr.php)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T11:21:53.747

我相信**[fgets](http://php.net/manual/en/function.fgets.php)**是这里的答案。

```
$handle = fopen($path, 'r+');      // open the file for r/w
while (!feof($handle)) {            // while not end
    $value = trim(fgets($handle)); // get the trimmed line
    if ($value == $input) {        // is it the value?
        return;                    // if so, bail out
    }                              //
}                                  // otherwise continue
fwrite($handle, $input);           // hasn't bailed, good to write
fclose($handle);                   // close the file 
```

这个答案完全基于您`"\n"`在代码中添加了换行符 ( ) 的事实，这就是为什么`fgets`会在这里工作。这可能比使用 将整个文件拉入内存更可取`file_get_contents()`，因为文件的大小可能会让人望而却步。

或者，如果值不是换行符分隔，而是固定长度，您始终可以使用`$length`参数`fgets()`来精确提取`$n`字符（*或使用`fread()`精确提取`$n`字节*）

# jquery - 如何初始化每个 JQuery UI 手风琴，以便它们根据数据标签打开不同的项目？

> ID：15269502
> 
> 赞同：0
> 
> 时间：2013-03-07T11:05:09.403
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在尝试初始化几个最初打开不同项目的 JQuery UI 手风琴。我不想单独初始化每个手风琴，而是希望将它们全部包含在一个函数中（也使其更容易与 CMS 集成）。我正在尝试以这种方式完成它：

```
<div class="accordion" data-initiallyopen="1">
    <h3>HEADER 1</h3>
    <div class="details">...</div>
    <h3>HEADER 2</h3>
    <div class="details">...</div>
</div>

$(".accordion").accordion({
    active: $(this).data("initiallyopen"),
    collapsible: true,
    heightStyle: "content"
}); 
```

不幸的是，这不起作用。没有控制台错误。$(this) 显然不是正确的对象-但是有没有办法从 init 中访问手风琴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:11:00.047

在[这个小提琴](http://jsfiddle.net/dBNFd/)中测试，尝试：

```
$(".accordion").each(
    function () {
        $(this).accordion( {
            active: $(this).data("initiallyopen"),
            collapsible: true,
            heightStyle: "content"
        })
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:14:44.940

如果您正在使用引导手风琴功能，如果您将 HTML 类设置为“折叠”以及手风琴，您可以选择哪些手风琴处于打开状态 - 例如：

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                Collapsible Group Item #1
            </a>
        </div>
        <div id="collapseOne" class="accordion-body collapse in">
            <div class="accordion-inner">
                Anim pariatur cliche...
            </div>
        </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                Collapsible Group Item #2
            </a>
        </div>
        <div id="collapseTwo" class="accordion-body collapse">
            <div class="accordion-inner">
                Anim pariatur cliche...
            </div>
        </div>
    </div>
</div> 
```

在这个例子中，第二个手风琴将被关闭，因为它的类是“手风琴崩溃”，而第一个手风琴有“手风琴崩溃”。

# css - 如何为 dojo ValidationTextBox 赋予自定义样式？

> ID：15269503
> 
> 赞同：1
> 
> 时间：2013-03-07T11:05:10.623
> 
> 标签：css, dojo

如何为 dojo ValidationTextBox 赋予自定义样式？

我们需要覆盖应用于 dojo ValidationTextBox 的默认 css。目前，当需要该字段时，它会在文本框周围显示一些黄色背景和一个感叹号。

见下文

![在此处输入图像描述](../Images/f40f8a8ea86ed5dc19909706dd3ef255.png)

或者是否可以删除黄色背景和感叹号并保留工具提示错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:49:18.213

```
.tundra .dijitSelectError .dijitButtonContents, 
.tundra .dijitTextBoxError, 
.tundra .dijitTextBoxError .dijitButtonNode {
    border-color: #d46464;
}

.tundra .dijitError {
    background-color: #d46464;
}

.tundra .dijitValidationTextBoxError .dijitValidationIcon {    
    background: url('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5') no-repeat -55px -66px;
} 
```

[http://jsfiddle.net/cswing/Yytzj/](http://jsfiddle.net/cswing/Yytzj/)

# java - Java IMAP 主题解码

> ID：15269505
> 
> 赞同：-2
> 
> 时间：2013-03-07T11:05:15.857
> 
> 标签：java, jakarta-mail

我正在使用javamail。如果电子邮件是西里尔文，主题是“Текст =?UTF-8?B?INCv0L3QtNC10LrRgS7QlNC10L3RjNCz0LDRhQ==?=" 如何解码？我试过 MimeUtility，但没有结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:00:44.263

如果消息格式正确，Message.getSubject 将为您解码主题文本。您的示例看起来在 "=?UTF-8" 部分之前有一些非 ASCII 文本。如果是这样，则表明该消息一开始就没有正确编码。

使用什么邮件程序发送您要阅读的邮件？

如果消息被正确解码，您期望什么结果？

# mysql - Mysql：事件表：时序连续连接

> ID：15269506
> 
> 赞同：0
> 
> 时间：2013-03-07T11:05:22.320
> 
> 标签：mysql, sql

我有下表：

```
user_id | Membership_type | start_Date
1       |         1       |      1
1       |         1       |      2
1       |         2       |      3
1       |         3       |      4 
```

有几个用户，我需要为每个用户找出会员类型何时发生变化以及变化是什么，格式如下（开始日期为日期时间，为了便于理解，将其放在 int 中）

```
user_id |Membership_change| change_Date
1       |      1 to 2     |     3
1       |      2 to 3     |     4 
```

我试过了

```
select m1.user_id, concat(m1.Membership_type, ' to ',m2.Membership_type), m2.start_date
from table_membership m1 
join table_membership m2
on m1.user_id=m2.user_id and m1.start_date<m2.start_date and m1.membership_type<>m2.membership_type 
```

但这会回来

```
user_id |Membership_change| change_Date
1       |      1 to 2     |     3
1       |      1 to 2     |     3
1       |      1 to 3     |     4
1       |      2 to 3     |     4 
```

重复的 1 到 2 不是通过分组删除的问题，但我似乎无法想出避免出现 1 到 3 结果的方法。我基本上只需要按时间顺序从一个成员加入到下一个成员

任何想法，将不胜感激！

编辑：有一个想法添加列 m1.start_date 并按 account_id 和 m1.start_date 分组，所以我只会得到每个条目加入的第一行。在加入之前按日期进行预排序，以确保它们都井然有序。会测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:06:49.397

您缺少 GROUP BY

```
select
  m1.user_id,
  concat(m1.Membership_type, ' to ',m2.Membership_type),
  m2.start_date
from table_membership m1
  join table_membership m2
    on m1.user_id = m2.user_id
      and m1.start_date < m2.start_date
      and m1.membership_type <> m2.membership_type
GROUP BY user_id, Membership_change, change_Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:03:12.133

有一个想法添加列 m1.start_date 并按 account_id 和 m1.start_date 分组，所以我只会得到每个条目加入的第一行。在加入之前按日期进行预排序，以确保它们都井然有序。

```
select m.user_id, m.membership_change, m.change_date from
(
select
  m1.user_id,
  concat(m1.Membership_type, ' to ',m2.Membership_type) as membership_change,
  m2.start_date as change_date, 
m1.start_date
from (select * from table_membership order by start_date asc)m1
  join (select * from table_membership order by start_date asc)m2
    on m1.user_id = m2.user_id
      and m1.start_date < m2.start_date
      and m1.membership_type <> m2.membership_type
GROUP BY m1.user_id,  m1.start_Date
)m group by 1,2,3 
```

# java - 如何在 swing 代码中使用正则表达式验证电子邮件 ID 的 JTextField？

> ID：15269507
> 
> 赞同：1
> 
> 时间：2013-03-07T11:05:26.167
> 
> 标签：java, regex, swing, netbeans-6.9

我已经为此验证做了很多尝试，但我不知道在哪里放置以下代码

```
String expression="^[\\w\\-]([\\.\\w])+[\\w]+@([\\w\\-]+\\.)+[A-Z]{2,4}$";. 
```

请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T11:12:42.780

我希望这将有所帮助。当您单击 SWING UI 上的提交按钮时，在 actionListener 中编写验证代码。

```
 Emailvalidator emailValidator = new Emailvalidator();
   if(!emailValidator.validate(emailField.getText().trim())) {
        System.out.print("Invalid Email ID");
        /*
           Action that you want to take. For ex. make email id field red
           or give message box saying invalid email id.
        */
   } 
```

这是单独的类 EmailValidator

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class EmailValidator {

    private Pattern pattern;
    private Matcher matcher;

    private static final String EMAIL_PATTERN = 
        "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
        + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

    public EmailValidator() {
        pattern = Pattern.compile(EMAIL_PATTERN);
    }

    /**
     * Validate hex with regular expression
     * 
     * @param hex
     *            hex for validation
     * @return true valid hex, false invalid hex
     */
    public boolean validate(final String hex) {

        matcher = pattern.matcher(hex);
        return matcher.matches();

    }
} 
```

附带说明一下，这将使您输入的电子邮件 ID 格式正确。如果您想验证 ID，请发送一封包含确认号的电子邮件，并要求用户在您的 UI 上输入该号码，然后继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:26:40.797

电子邮件地址的格式会变得[相当复杂](http://www.regular-expressions.info/email.html)。事实上，它的复杂性几乎是[传奇](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)。

[JavaMail](http://www.oracle.com/technetwork/java/javamail/)中的`InternetAddress`类是解析电子邮件地址的一种比正则表达式更可靠的方法。

# python - 如何通过python访问simulink？

> ID：15269513
> 
> 赞同：1
> 
> 时间：2013-03-07T11:05:49.537
> 
> 标签：python, matlab, simulink

我想在 simulink 模型中搜索特定对象并指出它的目录。（模型路径）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:20:43.957

您也可以只运行一个 MATLAB 脚本，该脚本对传入的模型文件名执行 find_system 并吐出块的名称，从而避免任何兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:32:51.500

也许这可以帮助你： http: [//www.fauskes.net/nb/parsing-simulink/](http://www.fauskes.net/nb/parsing-simulink/) 但从 Matlab 2012 开始，还有一种由压缩 xml 文件组成的二进制格式。如果你有这种格式，你需要使用一个 xml 解析器。

# c# - LightSwitch：将数据从一个屏幕传递到另一个屏幕

> ID：15269515
> 
> 赞同：1
> 
> 时间：2013-03-07T11:06:03.253
> 
> 标签：c#, sharepoint-2010, lightswitch-2012

是否可以将一种信息从一个屏幕传递到另一个屏幕？

这是我的主屏幕：

![主屏幕](../Images/3200bd4f92daf0cc13a211b03aff91cd.png)

我想将其中一位用户添加到编写“Leiter”的位置。

![用户屏幕](../Images/9424dfc5ccbc22a443bbc994f382b836.png)

一些想法如何管理它？哦，是的，数据来自 SharePoint……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:41:02.043

在您的列表详细信息中，您需要创建一个数据项来存储用户名。在该数据项的属性中，您需要检查“是参数”。

[![是参数复选框](../Images/dbe0d8bf76f4e7dbb619efa944e6f6fd.png)](http://www.c-sharpcorner.com/uploadfile/dbd951/passing-parameter-to-screen-in-lightswitch-beta-2/)

当您从屏幕中的代码调用第二个屏幕时`SearchUserInformationLists`，您将该数据项的值传递给它。

`this.Application.ShowZeiterfassungsListDetail(this.MyUserName);`

屏幕参数应该是屏幕设计器左侧数据项列表中的第一项。您可以传递多个参数，并且传递它们的顺序是它们在数据项列表中列出的顺序。

`this.Application.ShowZeiterfassungsListDetail(this.Param1, this.Param2, this.Param3);`

# javascript - 无法获取从 html 传递的元素

> ID：15269516
> 
> 赞同：-1
> 
> 时间：2013-03-07T11:06:09.440
> 
> 标签：javascript, html, jsp

我正在创建以下 jsp 页面。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script type="text/javascript">

        function show(x)
        {
            document.getElementById(x).style.display='block';
        }
    function hide(x)
        {
            document.getElementById(x).style.display='none';
        }
        function handleKeyEvent(e) {
    var charCode;

    if (e && e.which) {
        charCode = e.which;
    } else if (window.event) {
        e = window.event;
        charCode = e.keyCode;
    }

    if (charCode == 13) {
        //document.getElementById("yourForm").submit();
        var m=document.getElementById(e);
        alert(m);
                hide(x);
    }
}

        </script>
    </head>
    <body>
        <form name="form1" method="post" action="abc.jsp">
          <table width="722">
            <tr>
              <td width="431" height="190">
              <table width="439" >
                <tr>
                  <td width="129">PARTS Updated</td>
                  <td width="108"><p>
                    <select name="PARTS_Updated" id="PARTS_Updated" >
                      <option value=""></option>
                      <option value="N/A">N/A</option>
                    </select>
                  </p></td>
                  <td width="186"><label for="PARTS_Updated"></label></td>
                </tr>
                <tr>
                  <td>TSI OK&#13;</td>
                  <td><p>
                          <input type="radio" name="radio" id="TSI_N/A" value="TSI_N/A" onClick="hide('TSI_Query_Box')">
                    N/A
                  </p>
                  <p>
<input type="radio" name="radio" id="TSI_Query" value="TSI_Query" onClick="show('TSI_Query_Box')">              TSI Query</p></td>
                  <td><label for="TSI_Query_Box"></label>
                      <textarea name="TSI_Query_Box" id="TSI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="handleKeyEvent('TSI_Query_Box')"></textarea></td>

                </tr>
                <tr>
                  <td height="65">Special Ins OK&#13;</td>
                  <td><p>
                    <input type="radio" name="radio" id="SI_N/A" value="TSI_OK" onClick="hide('SI_Query_Box')">
                    N/A
                  </p>
                    <p>
   <input type="radio" name="radio" id="SI_Query" value="SI_Query" onClick="show('SI_Query_Box')"> SI Query</p></td>
                  <td><label for="SI_Query_Box"></label>
                      <textarea name="SI_Query_Box" id="SI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="handleKeyEvent('SI_Query_Box')"></textarea></td>
                </tr>
              </table></td>
              <td width="279">
                  <table width="279" align="center">
                <tr>
                  <td width="87"><p>Shipment ID&#13;</p></td>
                  <td width="97"><label for="Ship_ID"></label>
                  <input type="text" name="Ship_ID" id="Ship_ID"></td>
                </tr>
              </table></td>
            </tr>
          </table>
          <p>&nbsp;</p>
          <table width="721" border="1">
            <tr>
              <td width="374" align="center">
                  <input type="submit" name="Send for CT Review (SCTR)" id="Send for CT Review (SCTR)" value="Send for CT Review (SCTR)"></td>
              <td width="331" align="center">
                  <input type="submit" name="CT Review Complete (CTRC" id="CT Review Complete (CTRC)" value="CT Review Complete (CTRC)"></td>
            </tr>
            <tr>
              <td align="center">
                  <input type="submit" name="Cleanup Queries" id="Cleanup Queries" value="Cleanup Queries"></td>
              <td align="center">
                  <input type="submit" name="Cleanup  Complete" id="Cleanup  Complete" value="Cleanup  Complete"></td>
            </tr>
            <tr>
              <td colspan="2" align="center"><input type="submit" name="Go_To_Main_Page" id="Go_To_Main_Page" value="Go To Main Page"></td>
            </tr>
          </table>
          <p>&nbsp;</p>
        </form>
        <h1>&nbsp;</h1>
    </body>
</html> 
```

我想看看当我在 textarea 中输入文本并按 Enter 键时，我想查看文本。在本例中，它正在警告消息 [object]。此外，当我检查单选按钮时，如果我检查 TSI 查询单选按钮，然后是 SI 查询单选按钮，反之亦然，两者都会显示，我只希望一个文本区域显示一次。

对于屏幕截图，您可以查看此链接

[http://jsfiddle.net/dYy26/](http://jsfiddle.net/dYy26/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:26:21.690

检查这个：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script type="text/javascript">

    function show(x,y)
    {
        document.getElementById(x).style.display='block';
        document.getElementById(y).style.display='none';
        document.getElementById('Ship_IDl').style.display='block';
    }
function hide(x,y)
    {
        document.getElementById(x).style.display='none';
        document.getElementById(y).style.display='block';
        document.getElementById('Ship_IDl').style.display='none';
    }

function myKeyPress(e,x,y){
    var keynum;
    if(window.event){ // IE
        keynum = e.keyCode;
    }else
    if(e.which){ // Netscape/Firefox/Opera
        keynum = e.which;
    }
    //alert(String.fromCharCode(keynum));
    //alert(keynum);
    if (keynum == 13) {
        //document.getElementById("yourForm").submit();
        var m=document.getElementById(x).value;
        alert(m);
        hide(x,y);
    }
}
    </script>
</head>
<body>
    <form name="form1" method="post" action="abc.jsp">
      <table width="722">
        <tr>
          <td width="431" height="190">
          <table width="439" >
            <tr>
              <td width="129">PARTS Updated</td>
              <td width="108"><p>
                <select name="PARTS_Updated" id="PARTS_Updated" >
                  <option value=""></option>
                  <option value="N/A">N/A</option>
                </select>
              </p></td>
              <td width="186"><label for="PARTS_Updated"></label></td>
            </tr>
            <tr>
              <td>TSI OK&#13;</td>
              <td><p>
                      <input type="radio" name="radio" id="TSI_N/A" value="TSI_N/A" onClick="hide('TSI_Query_Box','SI_Query_Box')">
                N/A
              </p>
              <p>
<input type="radio" name="radio" id="TSI_Query" value="TSI_Query" onClick="show('TSI_Query_Box','SI_Query_Box')">              TSI Query</p></td>
              <td><label for="TSI_Query_Box"></label>
                  <textarea name="TSI_Query_Box" id="TSI_Query_Box" cols="15" rows="5" style="display:none"  onkeypress="return myKeyPress(event,'TSI_Query_Box','SI_Query_Box')"></textarea></td>

            </tr>
            <tr>
              <td height="65">Special Ins OK&#13;</td>
              <td><p>
                <input type="radio" name="radio" id="SI_N/A" value="TSI_OK" onClick="hide('SI_Query_Box','TSI_Query_Box')">
                N/A
              </p>
                <p>
<input type="radio" name="radio" id="SI_Query" value="SI_Query" onClick="show('SI_Query_Box','TSI_Query_Box')"> SI Query</p></td>
              <td><label for="SI_Query_Box"></label>
                  <textarea name="SI_Query_Box" id="SI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="return myKeyPress(event,'SI_Query_Box','TSI_Query_Box')""></textarea></td>
            </tr>
          </table></td>
          <td width="279">
              <table width="279" align="center">
            <tr>
              <td width="87"><p>Shipment ID&#13;</p></td>
              <td width="97"><label for="Ship_ID" id="Ship_IDl"></label>
              <input type="text" name="Ship_ID" id="Ship_ID"></td>
            </tr>
          </table></td>
        </tr>
      </table>
      <p>&nbsp;</p>
      <table width="721" border="1">
        <tr>
          <td width="374" align="center">
              <input type="submit" name="Send for CT Review (SCTR)" id="Send for CT Review (SCTR)" value="Send for CT Review (SCTR)"></td>
          <td width="331" align="center">
              <input type="submit" name="CT Review Complete (CTRC" id="CT Review Complete (CTRC)" value="CT Review Complete (CTRC)"></td>
        </tr>
        <tr>
          <td align="center">
              <input type="submit" name="Cleanup Queries" id="Cleanup Queries" value="Cleanup Queries"></td>
          <td align="center">
              <input type="submit" name="Cleanup  Complete" id="Cleanup  Complete" value="Cleanup  Complete"></td>
        </tr>
        <tr>
          <td colspan="2" align="center"><input type="submit" name="Go_To_Main_Page" id="Go_To_Main_Page" value="Go To Main Page"></td>
        </tr>
      </table>
      <p>&nbsp;</p>
    </form>
    <h1>&nbsp;</h1>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:33:52.497

检查此代码：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script type="text/javascript">

    function show(x,y)
    {
        document.getElementById(x).style.display='block';
        document.getElementById(y).style.display='none';
        document.getElementById('Ship_IDl').style.display='block';
    }
function hide(x,y)
    {
        document.getElementById(x).style.display='none';
        document.getElementById(y).style.display='block';
        document.getElementById('Ship_IDl').style.display='none';
    }
function handleKeyEvent(e) {
var charCode;
if (e && e.which) {
    charCode = e.which;
} else if (window.event) {
    e = window.event;
    charCode = e.keyCode;
}
if (charCode == 13) {
    //document.getElementById("yourForm").submit();
    var m=document.getElementById(e);
    alert(m);
            hide(x);
}
}
</script>
</head>
<body>
    <form name="form1" method="post" action="abc.jsp">
      <table width="722">
        <tr>
          <td width="431" height="190">
          <table width="439" >
            <tr>
              <td width="129">PARTS Updated</td>
              <td width="108"><p>
                <select name="PARTS_Updated" id="PARTS_Updated" >
                  <option value=""></option>
                  <option value="N/A">N/A</option>
                </select>
              </p></td>
              <td width="186"><label for="PARTS_Updated"></label></td>
            </tr>
            <tr>
              <td>TSI OK&#13;</td>
              <td><p>
                      <input type="radio" name="radio" id="TSI_N/A" value="TSI_N/A" onClick="hide('TSI_Query_Box','SI_Query_Box')">
                N/A
              </p>
              <p>
<input type="radio" name="radio" id="TSI_Query" value="TSI_Query" onClick="show('TSI_Query_Box','SI_Query_Box')">              TSI Query</p></td>
              <td><label for="TSI_Query_Box"></label>
                  <textarea name="TSI_Query_Box" id="TSI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="handleKeyEvent('TSI_Query_Box')"></textarea></td>

            </tr>
            <tr>
              <td height="65">Special Ins OK&#13;</td>
              <td><p>
                <input type="radio" name="radio" id="SI_N/A" value="TSI_OK" onClick="hide('SI_Query_Box','TSI_Query_Box')">
                N/A
              </p>
                <p>
<input type="radio" name="radio" id="SI_Query" value="SI_Query" onClick="show('SI_Query_Box','TSI_Query_Box')"> SI Query</p></td>
              <td><label for="SI_Query_Box"></label>
                  <textarea name="SI_Query_Box" id="SI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="handleKeyEvent('SI_Query_Box')"></textarea></td>
            </tr>
          </table></td>
          <td width="279">
              <table width="279" align="center">
            <tr>
              <td width="87"><p>Shipment ID&#13;</p></td>
              <td width="97"><label for="Ship_ID"></label>
              <input type="text" name="Ship_ID" id="Ship_ID"></td>
            </tr>
          </table></td>
        </tr>
      </table>
      <p>&nbsp;</p>
      <table width="721" border="1">
        <tr>
          <td width="374" align="center">
              <input type="submit" name="Send for CT Review (SCTR)" id="Send for CT Review (SCTR)" value="Send for CT Review (SCTR)"></td>
          <td width="331" align="center">
              <input type="submit" name="CT Review Complete (CTRC" id="CT Review Complete (CTRC)" value="CT Review Complete (CTRC)"></td>
        </tr>
        <tr>
          <td align="center">
              <input type="submit" name="Cleanup Queries" id="Cleanup Queries" value="Cleanup Queries"></td>
          <td align="center">
              <input type="submit" name="Cleanup  Complete" id="Cleanup  Complete" value="Cleanup  Complete"></td>
        </tr>
        <tr>
          <td colspan="2" align="center"><input type="submit" name="Go_To_Main_Page" id="Go_To_Main_Page" value="Go To Main Page"></td>
        </tr>
      </table>
      <p>&nbsp;</p>
    </form>
    <h1>&nbsp;</h1>
</body>
</html> 
```

# android - 如何将线性布局分成两列？

> ID：15269517
> 
> 赞同：13
> 
> 时间：2013-03-07T11:06:10.590
> 
> 标签：android, android-linearlayout

我必须将单个线性布局拆分为两列（**如报纸专栏**）。线性布局包含**文本视图**和**图像视图**

我已经采用了屏幕宽度并将其划分为一半并将`TextView`and`ImageView`放在第一列中，即`A B C` 下图中的块..现在剩下的`TextView`and '必须像这样进入`ImageView`下一列`D E F`.所以如果有人给我任何代码或想法来实现它会很有帮助..我尝试过`GridView`不适合我的问题。*由于`TextView`和`ImageView`大小不明确。*

![在此处输入图像描述](../Images/3ade20d6295adfbb3678acc37940f8ed.png)

我不知道如何拆分 Liner 布局。我尝试像这样计算rootlayout高度

```
linearLayout.post(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                int linsize=linearLayout.getHeight();
                int relsize=root.getHeight();
                int textsize=txt1.getHeight();
                mainheight=relsize;
                subheight=linsize;
                Toast.makeText(getApplicationContext(), "Linerlayout "+linsize, Toast.LENGTH_LONG).show();
                Toast.makeText(getApplicationContext(), "Relative layout"+relsize, Toast.LENGTH_LONG).show();
                Toast.makeText(getApplicationContext(), "text height "+textsize, Toast.LENGTH_LONG).show();

                if(mainheight==subheight)
                {
                    Toast.makeText(getApplicationContext(), "make a new linear layout", Toast.LENGTH_LONG).show();
                    createsubview();
                }
            }
        }); 
```

**截屏**

![在此处输入图像描述](../Images/9a4a08d07ae609096b328b7d25e7024b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T11:45:47.350

您可以使用嵌套轻松做到这一点`LinearLayouts`：

```
 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/item" />

            <TextView
                android:id="@+id/text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <ImageView
                content here/>

            <TextView
                content here/>

        </LinearLayout>
    </LinearLayout> 
```

然后，您需要做的就是将 A、B 和 C 放在第一个垂直布局中，将 D、E 和 F 放在第二个垂直布局中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:45:55.147

> > 你不能用 GridView 做到这一点。您必须创建一个自定义视图来执行此操作。

如果你知道你的网格项目有多大，你可以偷工减料。GridView 很复杂，主要是因为它处理任何大小的项目并动态加载它们。对您来说更简单的方法可能是：

1.创建一个Horizo​​ntalScrollView，里面有一个水平的LinearLayout。

2.确定您的项目的多少行将适合屏幕。调用此行。

3.虽然你还有需要布局的项目：

```
 1.Create a vertical LinearLayout, adding rows or less items to it.
    2.Add your new vertical LinearLayout to the horizontal one. 
```

与“水平 GridView”相比，有一些缺点：

```
1.All the views are loaded up immediately, which is bad for huge lists of items.
2.You need to know how big your items are, and they need to be the same size. 
```

优点：

```
1.It's very easy to implement. 
```

[有关更多信息，请参阅此链接](https://stackoverflow.com/questions/5354292/possible-to-fill-a-grid-like-view-by-column-rather-than-by-row)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ScrollView scrollView = new ScrollView(this);//ScrollView
    LinearLayout ll = new LinearLayout(this); //root LinearLayout
    ll.setOrientation(LinearLayout.HORIZONTAL);//with horizontal orientation
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT,1f);
    LinearLayout l2 = new LinearLayout(this); //sub linearlayout
    l2.setOrientation(LinearLayout.VERTICAL);//with vertical orientation
    l2.setLayoutParams(layoutParams);
    LinearLayout l3 = new LinearLayout(this); //sub linearlayout
    l3.setOrientation(LinearLayout.VERTICAL);//with vertical orientation
    l3.setLayoutParams(layoutParams);
    int totalvalues=41;     //i take count as 41
    for(int i=0;i<totalvalues;i++){  // add the buttons in the layout based on condition
        Button okButton=new Button(this);
        okButton.setText("Button"+i);
        if(i<=totalvalues/2){
        l2.addView(okButton);
        }
        else{
        l3.addView(okButton);   
        }
    }
    ll.addView(l2);   //add sub linearlayout to root linearlayout
    ll.addView(l3);  //add sub linearlayout to root linearlayout

    scrollView.addView(ll); //add the root linearlayout to scrollview

    setContentView(scrollView);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T09:23:41.130

你有没有尝试过：

```
DisplayMetrics metrics = getResources().getDisplayMetrics();
float dpW = 0f;
int pixelsW = (int) (metrics.density * dpW + 0.5f);
TableLayout.LayoutParams lp = new TableLayout.LayoutParams(pixelsW, LayoutParams.WRAP_CONTENT, 1f);
TextView txt = new TextView(MainActivity.this);
ImageView img = new ImageView(MainActivity.this);
txt.setLayoutParams(lp);
img.setLayoutParams(lp); 
```

使用 TableLayout 的 LayoutParams 可以设置视图的权重，如你所知，它必须为 1。我们还使用 DisplayMetrics 将浮点数转换为 xml 中使用的“dp”格式。

编辑：

您还可以将此 LayoutParams 设置为 LinearLayout。

# java - 抽象类的自动装配依赖项注入失败

> ID：15269520
> 
> 赞同：3
> 
> 时间：2013-03-07T11:06:20.787
> 
> 标签：java, spring, hibernate, abstract-class

我正在使用 Spring 3 和 Hibernate 4

我有以下类结构

```
public interface GenericDAO<T> {

    public void create(T entity);
    public void update(T entity);
    public void delete(T entity);
} 
```

**DAO 类**

```
public interface EmployeeDAO extends GenericDAO<Employee>  {

    public void findEmployee(EmployeeQueryData data);
} 
```

**DAO 实现类**

```
@Repository("employeeDAO")
public abstract class EmployeeDAOImpl implements EmployeeDAO {

protected EntityManager entityManager;

@Override
public void findEmployee(EmployeeQueryData data) {

...... code

} 
```

我面临的问题是当我尝试部署时，出现以下异常。如果我`abstract`从中`EmployeeDAOImpl`删除并从中删除`extends GenericDAO<Employee>`，`EmployeeDAO`则应用程序将被部署而没有错误。所以不可能有`abstract`类，`EmployeeDAOImpl`或者我需要在没有的`GenericDAO`情况下实现DAO实现中的所有方法`abstract`？

```
Error creating bean with 
name 'employeeService': Injection of autowired dependencies failed; \
nested exception is org.springframework.beans.factory.BeanCreationException:
Could not autowire field: test.dao.EmployeeDAO 
test.service.EmployeeServiceImpl.employeeDAO; nested exception is
org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No matching bean of type [test.dao.EmployeeDAO] found for dependency: 
expected at least 1 bean which qualifies as autowire candidate for 
this dependency. Dependency annotations: 
{@javax.inject.Inject()}. 
```

**编辑 1**

**通用DAOImpl**

```
public class GenericDAOImpl<T> implements GenericDAO<T> {    

    public void create(T entity) {
    }       
    public void update(T entity) {
    }
    public void delete(T entity) {
    } 
```

**EmployeeDAOImpl**

```
public class EmployeeDAOImpl extends GenericDAOImpl<Employee> implements EmployeeDAO { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:16:30.007

Java（以及 Spring）不能创建抽象类的实例：在 Java 允许您创建实例之前，每个方法都必须有一个实现，否则当您尝试调用该方法时会出现运行时错误。您需要从 EmployeeDAOImpl 中删除“抽象”并实现从 GenericDAO 继承的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:15:00.150

为什么要将类实现声明为抽象？从概念上讲，这是一个矛盾。显然 Spring 无法实例化它并失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:12:51.463

确认您的 EmployeeDAOImpl 或其他带注释的类包是否在以下标记的 spring 上下文 xml 中提及。除非这样做，否则注释将不会被读取并且不会被初始化。

```
<context:component-scan base-package="com.app.service" /> 
```

# jquery - jQueryUI datepicker 小部件在小部件初始化后添加“onClose”功能

> ID：15269532
> 
> 赞同：7
> 
> 时间：2013-03-07T11:06:51.633
> 
> 标签：jquery, jquery-ui, datepicker

假设我有一个#date 字段。起初我用一些选项初始化它（目前它们并不重要）：

```
$('#date').datepicker(options); 
```

然后，如果我尝试添加`onClose`功能，我会这样做：

```
$('#date').datepicker({onClose: function(dateText, inst){console.log("Hello World");}}); 
```

但是，这会覆盖之前设置的选项。假设我无权访问这些选项 - datepicker 已初始化，选项已设置，现在我需要添加 function `onClose`。怎么做？我试过`.datepicker('option','onClose',function(){});`没有效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:13:38.263

试试看

```
$('#date').datepicker( 'option' , 'onClose', function() {} ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-07T12:04:38.460

Try this:

```
$('#date').datepicker();
...
$('#date').datepicker("option", {
  onClose: function(dateText, inst){console.log("Hello World");}
}); 
```

Of course this would override the previous onClose function you've set before. source: [jQuery forum post](http://forum.jquery.com/topic/datepicker-bind-onclose-event-during-runtime#14737000002669091)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T19:38:28.790

在初始化中将您的关闭功能定义为您的选项之一。这对我有用。

```
$('#date').datepicker({
    dateFormat: "dd/mm/yy",
    onClose: function(dateText, inst){console.log("Hello World");}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:18:07.760

尝试这个 ：

```
$('#date').datepicker().bind('onClose',function(){
    console.log("Hello World");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T08:29:48.010

我也面临同样的问题，旧的关闭功能被替换。经过大量搜索，我已经实现了自己的功能来处理这个问题。下面是代码片段

```
function addCloseFunctionToDatePicker(id, funHandler) {
    var $datePicker=$('#' + id);
    var prevhandler = $datePicker.datepicker('option', 'onClose');
    $datePicker.datepicker('option', {
        onClose: function (dateText, inst) {                    
            if (prevhandler) {
                prevhandler(dateText, inst);
            }
           funHandler(dateText, inst);                
        }            
    });    
} 
```

调用机制：

```
 addCloseFunctionToDatePicker('myDatePicker', function(){ alert("I'm next method"); }); 
```

# javascript - Requirejs、d3 和 nvd3 集成

> ID：15269535
> 
> 赞同：6
> 
> 时间：2013-03-07T11:06:58.937
> 
> 标签：requirejs, d3, nvd3, javascript, module, d3.js, requirejs

我面临着将[requirejs](/questions/tagged/requirejs "显示标记为“requirejs”的问题")与[d3](/questions/tagged/d3 "显示标记为“d3”的问题")和[nvd3](/questions/tagged/nvd3 "显示标记为“nvd3”的问题")集成的问题，我找到了一个使用 require [shim](http://requirejs.org/docs/api.html#config-shim)的简单解决方案。使用 shim 我可以导出一个变量，我还可以定义依赖项：

```
d3: { exports: 'd3' },
nvd3: {
  exports: 'nv',
  deps: ['d3']
}, 
```

这样，我简单地用 bower 安装 d3 和其他包，并用 require 包含它们，它非常快速和干净。

尽管如此，我还是遇到了以下问题：全局 d3 变量和本地变量（注入到所需模块中的变量）之间可能存在一些冲突。这是一个与转换和选择相关的 d3 / require / nvd3 集成问题。我不完全理解这个问题，但我已经可以考虑一些问题了。

*   jquery 与 require 有同样的问题，他们提供了 noconflict 方法来修复它
*   许多库都有这种行为，它们导出一个全局符号，但据我所知，requirejs 没有针对一般问题的现成修复
*   如果我将所有全局引用重命名`d3`为 d3 源，则问题已解决。我仍然`d3`在注入的模块中，但它不再冲突

据我所见，所有 d3 功能都以这种方式工作，但其中一个 nvd3 图表的转换中断可能是因为选择或调度程序被覆盖。它需要对 d3 内部结构的深入了解才能准确地发现错误，但是对全局符号的简单而正确的处理可能会清除所有类似问题。

可能由于 requirejs 处理 shim 依赖项的方式，全局 d3 符号会暴露给 nvd3。无论如何，相同的符号不适用于需要模块，并且如果注入（包含在模块依赖项中）会以某种方式被覆盖。

我还尝试将 d3 包装在一个模块中并正确返回一个本地 d3 变量，但看起来问题仍然存在。

我还在[这个 d3 小组讨论](https://groups.google.com/d/topic/d3-js/PSPKF8V0D00/discussion)中寻求帮助，该小组讨论了一些关于 d3 和模块的先前帖子。

* * *

我在这里添加了一个测试用例：[https ://github.com/danse/requirenvd3](https://github.com/danse/requirenvd3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:47:41.367

问题似乎不在于您的 RequireJS 配置，而在于您使用的是 d3.v3 而不是 d3.v2。我在您的测试用例中降级了 d3，并且转换效果很好。（弹出窗口仍然偏向一边，我认为它们不应该如此，但这似乎不是您目前关心的问题。）据我了解，nvd3 与 d3.v3 存在一些问题，这可能是一个。另外，请注意 ddotsenko 的 jsFiddle 中的 d3 版本。这可以解释为什么当您使用自己的 d3.v3 库实现它时他的解决方案不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:40:50.980

首先，您可以绕过`shim`您不需要它来为纯 JS 返回任何内容。只需使用全局变量。

[未注入通过 RequireJS 从 CDN 加载 Angular](https://stackoverflow.com/questions/14683072/loading-angular-from-cdn-via-requirejs-is-not-injected/14715393#14715393)

其次，虽然`shim`对于声明脚本的依赖关系是半有用的，但您也可以显式地执行它们：

```
require(['path/to/d3.min'], function(){
    // nesting to insure d3 loads before nvd3
    require(
        [
            'path/to/mylogic' // <- AMD module
            ,'path/to/nvd3.min' // <- actually a plain JS file
        ]
        , function(mylogic /*, we ignore what nvd3 returns */){
            window.nv // is available for you
        }
    )
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T03:21:25.273

看看我在[这个 main.js 文件](https://github.com/elycruz/edm-ajax-interface/blob/master/src/edm/main.js)中做了什么（使用“depend”requirejs 插件），然后在其他需要导出到全局变量的文件中，我做了：

```
    定义（['d3']，函数（d3）{
        // 这里的代码...
    });

```

依赖插件非常好，它允许您通过depend!plugin[dependancy1,dependancy2]设置分层加载（“plugin”在“dependancy1”和“dependancy2”加载后加载。

# java - 如何在 Struts 2 中将 QRCode 图像从动作类发送和显示到 JSP

> ID：15269541
> 
> 赞同：2
> 
> 时间：2013-03-07T11:07:16.517
> 
> 标签：java, image, jsp, struts2, qr-code

我正在提交一个带有字符串的 JSP 表单，并且在提交时我正在调用一个 Struts 2 操作。在该操作中，我正在使用 QRGen 库创建一个 QRCode 图像，如下所示

```
File QRImg=QRCode.from("submitted String").to(ImageType.PNG).withSize(100, 100).file(); 
```

**我的 JSP 表单：**

```
<form action="createQR">
Enter Your Name<input type="text" name="userName"/><br/>
<input type="submit" value="Create QRCode"/>
</form> 
```

**我的动作映射`struts.xml`：**

```
<action name="createQR" class="CreateQRAction">
 <result name="success">displayQR.jsp</result>
</action> 
```

**我的动作课：**

```
import java.io.File;
import net.glxn.qrgen.QRCode;
import net.glxn.qrgen.image.ImageType;  
import com.opensymphony.xwork2.ActionSupport;
public class CreateQRAction extends ActionSupport{
 private File QRImg;
 Private String userName;

 public String execute() {
   QRImg=QRCode.from(userName).to(ImageType.PNG).withSize(100, 100).file();
return SUCCESS;
}

public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}
public File getQRImg() {
    return QRImg;
}

public void setQRImg(File QRImg) {
    this.QRImg = QRImg;
}
} 
```

现在如果结果是成功的，我想在我的 JSP 上显示这个图像。

```
<s:property value="QRImg"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:59:08.323

看来您需要可以在标签中`<s:url`替换为属性的操作来检索类似于使用文件夹中的静态图像的图像。`<img``href``/images`

让我们称之为`ImageAction`。这是一个写入响应的简单操作。要使用它，您需要将带有图像的文件放入会话中。因为图像是由单独的线程检索的。在执行方法中写

```
@Action(value = "image",  interceptorRefs = @InterceptorRef("basicStack"))
public class ImageAction extends ActionSupport {

public String execute() { 
```

从会话中获取文件

```
File file = session.get("file"); 
```

那么你需要读取文件

```
FileInputStream fis = new FileInputStream(file);
byte[] data = new byte[fis.available()];
fis.read(data);
fis.close(); 
```

然后写出响应

```
response.setContentType("image/png");

BufferedImage bi;
OutputStream os = response.getOutputStream();
bi = ImageIO.read(new ByteArrayInputStream(data));
ImageIO.write(bi, "PNG", os);
os.flush(); 
```

并返回 NONE 结果，因为此操作仅写入响应

```
return NONE;
} 
```

完毕

然后在从您的操作转发的 JSP 中使用`<img src="<s:url action="image"/>" style="width:100%;"/>`. 如果您需要添加路径，请在 url 中的操作和属性上使用命名空间注释。

我感觉你对 Struts2 中的 session 概念很熟悉，即如何将 session 注入到你的 action 中并在其中映射对象。在返回结果之前在您的操作中映射文件对象。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T07:49:31.613

您需要在 struts2 中使用“org.apache.struts2.dispatcher.StreamResult”。基本上在您的操作中读取图像并填充 InputStream。还设置正确配置“流”结果所需的其他变量。在动作映射中使用这些属性来配置类型为“流”的结果

# c# - 如何同时登录同一个网站、不同帐户、不同代理？

> ID：15269545
> 
> 赞同：0
> 
> 时间：2013-03-07T11:07:21.643
> 
> 标签：c#, .net, internet-explorer, watin

大家好，我想制作一个测试程序来登录同一个网站，使用不同的帐户和不同的代理，这样所有帐户都会从不同的代理同时在线。不需要其他东西，只需登录即可。

我尝试使用 Watin，尽管我可以将 IE 设置为 nomerge，但我仍然不能为每个会话使用不同的代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:14:12.873

watin 不可能，您可以直接从 WebRequest 中完成，但不能使用 watin。

# sql-server - 从现有表创建新表，没有要复制的身份属性

> ID：15269548
> 
> 赞同：2
> 
> 时间：2013-03-07T11:07:28.663
> 
> 标签：sql-server, tsql

我正在使用`select * into`从另一个表创建表并用于`SET IDENTITY_INSERT ON`新创建的表以接受包括标识列的数据。

现在我的问题是，有没有办法从另一个现有表（比如表 B）创建一个表（比如表 A），而不会将表 B 的身份属性复制到表 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:11:19.203

当然，假设`TABLEA`看起来像这样：

```
CREATE TABLE TABLEA (
    ID INT PRIMARY KEY IDENTITY(1, 1),
    Column1 VARCHAR(50)
) 
```

让我们假设`TABLEB`看起来一样。如果我们想在不移动标识列的情况下将数据从`TABLEB`其中`TABLEA`移动，我们将编写以下语句：

```
INSERT INTO TABLEA (Column1)
    SELECT Column1 FROM TABLEB 
```

这将导致每个新行都`TABLEA`获得自己的身份值。

但请注意，您不能发出 a `SELECT * FROM TABLEB`，因为这也会选择该`ID`列。您必须单独列出您想要的所有字段。但是，一般来说，我认为很多非常有经验的 DBA 和程序员会说这`SELECT * FROM Table`真的很危险，因为如果模式发生变化，一切都会中断。你真的想***永远***是具体的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:32:47.213

SELECT STUFF((SELECT ', ' + c.name FROM sys.columns c where c.object_id = OBJECT_ID('dbo.TABLE_NAME') and c.is_identity <> 1 FOR XML PATH('')),1, 2, '') 作为 CSV 列

这将为您提供每个表的列的逗号分隔列表。将这些语句复制到记事本中以创建可以运行的脚本。

# c# - BindingExpression 路径错误 - 在“MyObjectsVM”上找不到“颜色”属性

> ID：15269549
> 
> 赞同：0
> 
> 时间：2013-03-07T11:07:30.270
> 
> 标签：c#, binding

我已经检查了 StackOverflow 以寻找答案，在这里问是我最后的手段，所以请不要投反对票。我需要比我更有经验的数据绑定的人的意见：这是我要绑定的内容：

```
<Grid x:Name="all" Grid.Row="1">
    <TextBlock Text="all"  Foreground="{Binding Color}" x:Name="allTxt" Grid.Row="0" Padding="10,21,0,0" FontWeight="Light" FontSize="{StaticResource PhoneFontSizeExtraLarge}" Tap="TextBlock_Tap_1"  />
</Grid> 
```

这就是我设置 Grid 组件的 DataContext 的方式

```
public Multiplication()
{
    InitializeComponent();
    this.all.DataContext = App.MyObjectsViewModel.allObjectsVisible;
} 
```

这是 MyObjectsViewModel 的构造函数

```
public MyObjectsViewModel(DataContextManager manager)
{
    allObjectsVisible = new allVisibleBtn() { Allvisible = true, Color = "white" };
} 
```

这是 allObjectsVisible 属性：

```
 private allVisibleBtn _allObjectsVisible;
 public allVisibleBtn allObjectsVisible
 {
    get { return _allObjectsVisible;}
    set { _allObjectsVisible= value; NotifyPropertyChanged("allObjectsVisible"); }
 } 
```

最后是 allObjectsBtn 的类：

```
public class allVisibleBtn : BaseViewModel
    {
        private bool _Allvisible;
        public bool Allvisible
        {   get { return _Allvisible; }
            set { NotifyPropertyChanging("Allvisible"); _Allvisible = value; NotifyPropertyChanged("Allvisible"); }
        }

        private string _Color;
        public string Color
        {
            get { return _Color; }
            set { if (value != null) { NotifyPropertyChanging("Color"); _Color = value; } NotifyPropertyChanged("Color"); }
        }
    } 
```

预期的行为是在有人点击它的那一刻改变文本块前景。OFC 在点击后还有一些事情要做，但从问题的角度来看没有什么意义。所以请帮助我，为什么我会收到以下错误：

```
`System.Windows.Data Error: BindingExpression path error: 'Color' property not found on 'Project.MyObjectsViewModel' 'Project.MyObjectsViewModel' (HashCode=50930930). BindingExpression: Path='Color' DataItem='Project.MyObjectsViewModel' (HashCode=50930930); target element is 'System.Windows.Controls.TextBlock' (Name='allTxt'); target property is 'Foreground' (type 'System.Windows.Media.Brush')..` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:17:38.067

TextBlock 的 DataContext 似乎是 的实例 `Project.MyObjectsViewModel`，并且该类型没有 Color 属性。因此，您需要将 TextBlock 的 DataContext 设置为`allVisibleBtn`. 尝试

```
<TextBlock DataContext="{Binding Path=allObjectsVisible}" ... /> 
```

一旦你开始工作，你需要改变 Color 属性的类型`allVisibleBtn`。TextBlock 的 Foreground 属性需要一个 Brush，而不是字符串。

# xslt - 使用 XSLT，我怎样才能正常处理，但保留一些节点直到结束，然后一次全部输出（例如脚注）？

> ID：15269554
> 
> 赞同：0
> 
> 时间：2013-03-07T11:07:38.443
> 
> 标签：xslt

我有一个 XSLT 应用程序，它读取 Microsoft Word 2007/2010 压缩 XML 的内部格式，并使用 XSLT 将其转换为 HTML5。我正在研究如何添加选择性阅读 OpenOffice 文档而不是 MSWord 的功能。

Microsoft 将脚注文本的 XML 与文档文本的 XML 分开存储，这恰好适合我，因为我希望将脚注放在输出 HTML 页面末尾的块中。

然而，对我来说不幸的是，OpenOffice 将每个脚注放在其引用旁边，与文档文本内联。这是一个简单的段落示例：

```
 <text:p text:style-name="Standard">The real breakthrough in aerial mapping 
    during World War II was trimetrogon
    <text:note text:id="ftn0" text:note-class="footnote">
      <text:note-citation>1</text:note-citation>
      <text:note-body>
        <text:p text:style-name="Footnote">Three separate cameras took three
          photographs at once, a direct downward and an oblique on each side.</text:p>
      </text:note-body>
    </text:note>
    photography, but the camera was large and heavy, so there were problems finding
    the right aircraft to carry it.
  </text:p> 
```

我的问题是，XSLT 是否可以正常处理 XML，但将每个 text:note 项保留到文档文本的末尾，然后一次全部发出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:59:00.850

您认为您的逻辑是由输入中的事物顺序驱动的，但在 XSLT 中，您需要由输出中的事物顺序驱动。当您到达要输出脚注的位置时，请在输入中的任何位置查找脚注文本。诚然，这并不总是适用于明确输入驱动的应用模板递归下降处理模型。但是，这就是你必须这样做的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:37:46.840

您可以使用 <xsl:apply-templates mode="..."/>。我不确定确切的语法和您的用例，但也许下面的示例将为您提供有关如何解决问题的线索。

基本思想是两次处理你的节点。第一次迭代与现在几乎相同，第二次迭代只查找脚注并输出那些。您可以通过设置“模式”参数来区分这些迭代。

也许这个例子会给你一个线索如何解决你的问题。请注意，我在您的代码中使用了不同的标签，因此示例会更简单。

XSLT 表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="doc">
    <xml>
      <!-- First iteration - skip footnotes -->
      <doc>
        <xsl:apply-templates select="text" />
      </doc>

      <!-- Second iteration, extract all footnotes.
           'mode' = footnotes -->
      <footnotes>
        <xsl:apply-templates select="text" mode="footnotes" />
      </footnotes>
    </xml>
  </xsl:template>

  <!-- Note: no mode attribute -->
  <xsl:template match="text">
    <text>
      <xsl:for-each select="p">
        <p>
          <xsl:value-of select="text()" />
        </p>
      </xsl:for-each>
    </text>
  </xsl:template>

  <!-- Note: mode = footnotes -->
  <xsl:template match="text" mode="footnotes">
    <xsl:for-each select=".//footnote">
      <footnote>
        <xsl:value-of select="text()" />
      </footnote>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<doc>
  <text>
    <p>
      some text
      <footnote>footnote1</footnote>
    </p>
    <p>
      other text
      <footnote>footnote2</footnote>
    </p>
  </text>
  <text>
    <p>
      some text2
      <footnote>footnote3</footnote>
    </p>
    <p>
      other text2
      <footnote>footnote4</footnote>
    </p>
  </text>
</doc> 
```

输出 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
  <!-- Output from first iteration -->
  <doc>
    <text>
      <p>some text</p>
      <p>other text</p>
    </text>
    <text>
      <p>some text2</p>
      <p>other text2</p>
    </text>
  </doc>

  <!-- Output from second iteration -->
  <footnotes>
    <footnote>footnote1</footnote>
    <footnote>footnote2</footnote>
    <footnote>footnote3</footnote>
    <footnote>footnote4</footnote>
  </footnotes>
</xml> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:38:13.463

不要将其视为“持有”这些`text:note`项目，而是简单地在主通道中忽略它们，然后在最后用 a 收集它们并在`//text:note`那里处理它们，例如

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:text="whateveritshouldbe">
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <!-- normal mode - replace text:note element by [reference] -->
  <xsl:template match="text:note">
    <xsl:value-of select="concat('[', text:note-citation, ']')" />
  </xsl:template>

  <xsl:template match="/">
    <document>
      <xsl:apply-templates select="*" />
      <footnotes>
        <xsl:apply-templates select="//text:note" mode="footnotes"/>
      </footnotes>
    </document>
  </xsl:template>

  <!-- special "footnotes" mode to de-activate the usual text:node template -->
  <xsl:template match="@*|node()" mode="footnotes">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" mode="footnotes" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# php - 更改 httpd.conf 中的 DocumentRoot，$_SERVER['DOCUMENT_ROOT'] 还是一样

> ID：15269556
> 
> 赞同：0
> 
> 时间：2013-03-07T11:07:40.223
> 
> 标签：php, xampp, document-root

所以我更改`DocumentRoot`了我的`httpd.conf`文件，`$_SERVER['DOCUMENT_ROOT']`但在 XAMPP 上似乎仍然相同。我重新启动了服务器，问题仍然存在。我`DocumentRoot`以前从原始`xampp/htdocs`文件夹更改过，效果很好。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:50:59.497

httpd.conf 文件中有另一行需要更改。在我的文件中，它位于 DocumentRoot 设置下方约 30 行。由于前面的注释行，我找到了它

```
#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "C:/work/htdocs"> 
```

我刚刚移动了整个 htdocs 目录，所以我还必须更改 httpd-xampp.conf 文件中的一行。

```
<Directory "C:/work/htdocs/xampp"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:38:04.273

注意 PHP 的 DOCUMENT_ROOT 可能与 Apache 不同。DOCUMENT_ROOT 是 PHP 文件所在的位置。这可以在文档根目录上或通过不同的目录。

# gwt - GWT 小部件中的交互元素

> ID：15269563
> 
> 赞同：0
> 
> 时间：2013-03-07T11:07:51.217
> 
> 标签：gwt, autocomplete, widget, interactive

我计划使用 GWT 实现智能自动完成搜索栏。

用户必须能够输入文本，而建议显示在搜索栏下方。使用 GWT 的 SuggestBox 小部件可以轻松实现此功能。但是，一旦用户选择了建议的单词之一，如果可能的话，该单词应该作为交互式小部件显示在搜索栏中（这样它就不会显示为简单的字符串，而是作为包含所选字符串的新小部件例如，可以单击以打开包含更多信息的弹出窗口并通过单击小部件中的“x”将其删除。如果这是不可能的，结果也可以显示在搜索栏旁边的某个地方。

用户应该能够继续键入并向搜索栏添加更多元素。作为参考，当在 stackoverflow 上提问时，它应该非常像“标签”栏。

我已经对这个挑战进行了大量研究，但还没有真正找到任何适合我需求的信息，所以我想问问 stackoverflow 社区是否有人做过类似的事情并且可以为我指明正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:39:08.623

[这篇文章](https://stackoverflow.com/questions/2666488/gwt-suggest-box-with-multiple-words)已经讨论过了。

在以下站点上，它描述了如何处理它。 [http://raibledesigns.com/rd/entry/creating_a_facebook_style_autocomplete](http://raibledesigns.com/rd/entry/creating_a_facebook_style_autocomplete)

# asp.net - 在 IIS 中运行 asp 页面

> ID：15269568
> 
> 赞同：0
> 
> 时间：2013-03-07T11:08:04.993
> 
> 标签：asp.net, iis

我已经在 IIS 中运行我的 asp.net 应用程序以测试 http 和 https。问题是当我加载 asp 页面时，我收到此错误“解析器错误消息：无法加载类型 'SSLTest.Page1'。” 我已经构建了我的解决方案并检查了框架版本。我哪里错了？ ![错误信息](../Images/05a5532332235fd46a98e47512a69c09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:14:43.583

您的`.aspx`文件继承自您网站的程序集文件（`.dll`文件）中的一个类，这是您的“代码隐藏类”。

该文件不仅`.dll`需要位于`bin`应用程序根目录的文件夹中，而且您还需要在 IIS 中定义一个“应用程序范围”，告诉它应用程序在文件系统中的哪个位置开始。`SSLProject\SSLTest`在这种情况下，您的 IIS 网站根目录中有一个名为“”的文件夹。您需要打开 IIS 管理器并右键单击该`SSLTest`文件夹并选择“转换为应用程序”，然后它将工作。

或者，将您的`bin`文件夹移动到您网站的根目录，尽管这可能会破坏您已部署的任何其他应用程序。

# c++ - 让编译器检查数组初始值设定项的数量

> ID：15269574
> 
> 赞同：18
> 
> 时间：2013-03-07T11:08:41.623
> 
> 标签：c++, c, gcc, compiler-warnings, gcc-warning

初始化一个数组（在 C++ 中，但任何适用于 C 的解决方案也可能在这里工作）使用少于元素的初始化器是完全合法的：

```
int array[10] = { 1, 2, 3 }; 
```

但是，这可能是隐蔽错误的来源。有没有办法让编译器（gcc）检查一个特定数组的初始化程序的数量，如果声明的和实际大小不匹配，则发出警告甚至错误？

我知道我可以使用`int array[] = { 1, 2, 3 };`并且可以使用静态断言`sizeof(array)`来验证我的期望。但我`array`在其他翻译单元中使用，所以我必须用明确的大小声明它。所以这个技巧对我不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T12:59:45.503

（根据要求从评论中提升）

如果数组中的值对系统的正确功能很重要，并且最后初始化为零的值会导致错误，那么我只需添加一个单元测试来验证数组是否包含正确的数据，而不是尝试强制执行它在代码中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T12:14:53.330

由于您`array`在其他翻译单元中使用，它显然具有外部链接。在这种情况下，您可以声明它两次，只要声明给它相同的类型。所以只需声明它两次，一次允许编译器计算初始值设定项，一次指定大小。将此行放在一个源文件中，在任何声明的标题之前`array`：

```
int array[] = { 1, 2, 3 }; 
```

稍后在同一个文件中，放置`#include`一行声明`array`，其中一行如下：

```
extern int array[10]; 
```

如果两个声明的数组大小不同，编译器会报错。如果它们相同，编译器将接受它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T11:55:57.427

我有个主意。

```
#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]

#define NUM_ARGS__(X, \
                      N64,N63,N62,N61,N60, \
  N59,N58,N57,N56,N55,N54,N53,N52,N51,N50, \
  N49,N48,N47,N46,N45,N44,N43,N42,N41,N40, \
  N39,N38,N37,N36,N35,N34,N33,N32,N31,N30, \
  N29,N28,N27,N26,N25,N24,N23,N22,N21,N20, \
  N19,N18,N17,N16,N15,N14,N13,N12,N11,N10, \
  N09,N08,N07,N06,N05,N04,N03,N02,N01,  N, ...) N

#define NUM_ARGS(...) \
  NUM_ARGS__(0, __VA_ARGS__, \
                 64,63,62,61,60, \
  59,58,57,56,55,54,53,52,51,50, \
  49,48,47,46,45,44,43,42,41,40, \
  39,38,37,36,35,34,33,32,31,30, \
  29,28,27,26,25,24,23,22,21,20, \
  19,18,17,16,15,14,13,12,11,10, \
   9, 8, 7, 6, 5, 4, 3, 2, 1, 0)

#define DECL_INIT_ARRAYN(TYPE, NAME, COUNT, N, ...) \
  C_ASSERT(COUNT == N); \
  TYPE NAME[COUNT] = { __VA_ARGS__ }

#define DECL_INIT_ARRAY(TYPE, NAME, COUNT, ...) \
  DECL_INIT_ARRAYN(TYPE, NAME, COUNT, NUM_ARGS(__VA_ARGS__), __VA_ARGS__)

DECL_INIT_ARRAY(const int, array3_3, 3, 1, 2, 3);

int main(void)
{
  DECL_INIT_ARRAY(const int, array5_4, 5, 1, 2, 3, 4);
  DECL_INIT_ARRAY(const int, array5_6, 5, 1, 2, 3, 4, 5, 6);
  return 0;
} 
```

输出（[ideone](http://ideone.com/J0zWrX)）：

```
prog.c: In function ‘main’:
prog.c:33:3: error: size of array ‘CAssertExtern’ is negative
prog.c:34:3: error: size of array ‘CAssertExtern’ is negative
prog.c:34:3: error: excess elements in array initializer [-Werror]
prog.c:34:3: error: (near initialization for ‘array5_6’) [-Werror]
prog.c:34:3: error: unused variable ‘array5_6’ [-Werror=unused-variable]
prog.c:33:3: error: unused variable ‘array5_4’ [-Werror=unused-variable]
prog.c:34:3: error: unused variable ‘CAssertExtern’ [-Werror=unused-variable]
cc1: all warnings being treated as errors 
```

* * *

**UPD**：OP 找到了一个更短的 C++11 解决方案，基于相同的使用思想`__VA_ARGS__`和静态/编译时断言：

```
#include <tuple>

#define DECL_INIT_ARRAY(TYPE, NAME, COUNT, ...)                         \
  static_assert(COUNT ==                                                \
    std::tuple_size<decltype(std::make_tuple(__VA_ARGS__))>::value,     \
    "Array " #NAME " should have exactly " #COUNT " initializers");     \
  TYPE NAME[COUNT] = { __VA_ARGS__ }

DECL_INIT_ARRAY(const int, array3_3, 3, 1, 2, 3);

int main(void)
{
  DECL_INIT_ARRAY(const int, array5_4, 5, 1, 2, 3, 4);
  DECL_INIT_ARRAY(const int, array5_6, 5, 1, 2, 3, 4, 5, 6);
  return 0;
} 
```

输出（[ideone](http://ideone.com/H1RMlM)）：

```
prog.cpp: In function ‘int main()’:
prog.cpp:13:3: error: static assertion failed: Array array5_4 should have exactly 5 initializers
prog.cpp:14:3: error: static assertion failed: Array array5_6 should have exactly 5 initializers
prog.cpp:14:3: error: too many initializers for ‘const int [5]’
prog.cpp:13:3: warning: unused variable ‘array5_4’ [-Wunused-variable]
prog.cpp:14:3: warning: unused variable ‘array5_6’ [-Wunused-variable] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-23T10:47:48.197

我在 C99 中四处寻找对此的具体答案，并在这里找到了答案：[如何在预处理器宏中使用“sizeof”？](https://stackoverflow.com/questions/4079243/how-can-i-use-sizeof-in-a-preprocessor-macro)

如果您没有定义数组的大小并使用：

```
int test[] = {1,2} 
STATIC_ASSERT(sizeof(test)/sizeof(test[0]) == 3)
/* with C11 support: */
_Static_assert(sizeof(test)/sizeof(test[0]) == 3)
/* or more easily */
ASSERT_ARRAY_LENGTH(test, 3); 
```

您可以轻松检测数组的大小是否符合您的预期。如果静态断言失败，将引发编译错误。没有运行时开销。可以在这里找到一个非常可靠的静态断言实现： [静态断言实现 C](http://www.pixelbeat.org/programming/gcc/static_assert.html)

为了您的方便：

```
#define ASSERT_CONCAT_(a, b) a##b
#define ASSERT_CONCAT(a, b) ASSERT_CONCAT_(a, b)
/* These can't be used after statements in c89\. */
#ifdef __COUNTER__
#define STATIC_ASSERT(e,m) \
;enum { ASSERT_CONCAT(static_assert_, __COUNTER__) = 1/(int)(!!(e)) }
#else
/* This can't be used twice on the same line so ensure if using in headers
* that the headers are not included twice (by wrapping in #ifndef...#endif)
* Note it doesn't cause an issue when used on same line of separate modules
* compiled with gcc -combine -fwhole-program.  */
#define STATIC_ASSERT(e,m) \
;enum { ASSERT_CONCAT(assert_line_, __LINE__) = 1/(int)(!! (e)) }
#endif 
```

我在此之上添加了一个宏，专门用于验证数组的大小。元素的数量必须与指定的长度完全匹配：

```
#define ASSERT_ARRAY_LENGTH(array, length)\
STATIC_ASSERT(sizeof(array)/sizeof(array[0]) == length,\
    "Array is not of expected length") 
```

如果您不需要支持 C99，您可以使用新的 C11 功能 _Static_assert。更多信息[在这里](http://www.robertgamble.net/2012/01/c11-static-assertions.html)。如果不需要 C 支持，也可以依赖 c++ 静态断言：

```
std::size(test) == 3; /* C++ 17 */
(std::end(test) - std::begin(end)) == 3; /* C++ 14 */ 
```

# javascript - 第二次点击 jQuery

> ID：15269581
> 
> 赞同：1
> 
> 时间：2013-03-07T11:08:49.597
> 
> 标签：javascript, jquery, html

我正在尝试制作一个动画，当我单击搜索图标时，它会在搜索输入中淡入并添加一个类以使其更宽。问题是我不知道如何在搜索输入已经显示后的第二次单击中使其淡出：

这是我的代码：

```
 $('#menu_search').click(function(){
        $('.search_input').fadeIn().toggleClass('full');
    });

    <li id="menu_search">
        <a href="javascript:void(0)"></a>
        <div class="search_input_container">
            <input type="text" class="search_input" value="Buscar">
        </div>
    </li>

        &#menu_search{
            background: url('../img/sprites.png') #000 2px 2px;
            width: 34px;
            height: 28px;
            padding: 0;
            margin-right: 0;
            a{
                display: inline-block;
                width: 100%;
                height: 100%;
            }
            .search_input_container{
                width: 500px;
                height: 30px;
                position: absolute;
                z-index: 20;
                left: -466px;
                .search_input{
                    float: right;
                    width: 100px;
                    background: #ffffff;
                    height: 30px;
                    border: none;
                    .round_corners();
                    .animate();
                    display: none;
                    &.full{
                        width: 772px;
                        display: block;
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:10:09.413

jQuery 中也有一个`fadeToggle`。试试这个：

```
$('#menu_search').click(function(){
    $('.search_input').fadeToggle().toggleClass('full');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:10:38.017

如果始终是第二次点击，则应`fadeToggle()`改为使用。

# asp.net - 使用选项将变量插入到 oracle 表中

> ID：15269595
> 
> 赞同：0
> 
> 时间：2013-03-07T11:09:18.767
> 
> 标签：asp.net

我有两张桌子

表 A 姓名 姓氏 tshirt-color

表 B tshirt_id tshirt-color

在表 A 中，T 恤颜色以取自 table_B 的 tshirt_id 的形式表示。然而，用户在插入期间不会输入 tshirt_id，他们将输入实际颜色。l 需要该语句查看表 B 并在用户输入实际颜色的位置插入 tshirt_id

所以我想说的是：将值插入表 A (name, lastname, tshirt_id) where tshirt_color = tshirt_id

# ruby - 与 Ruby 中 IRB 的方法调用混淆

> ID：15269606
> 
> 赞同：2
> 
> 时间：2013-03-07T11:09:51.640
> 
> 标签：ruby

我在玩方法定义并在`main`IRB 中调用它们。

```
def show
 p "hi"
end
#=> nil

show
#"hi"
#=> "hi"

self.show
#"hi"
#=> "hi" 
```

上面说的很好理解。

现在让我们尝试一些不同的东西：

```
def Foo
 p "hi"
end
#=> nil

Foo
#NameError: uninitialized constant Foo
        #from (irb):4
        #from C:/Ruby193/bin/irb:12:in `<main>' 
```

虽然调用`Foo`已引发上述错误，但以下如何删除该错误？

```
self.Foo
#"hi"
#=> "hi" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T13:05:54.660

在 Ruby 中，您可以在没有接收器和参数列表的情况下调用方法。但是，这意味着存在歧义：是指“在不带参数的隐式接收器上`foo`调用方法，即等效于”还是意味着“取消引用变量”？Ruby 不知道你的意思，所以有一些简单的规则。`foo``self``self.foo()``foo`

对于局部变量，规则是`foo`始终*是*方法调用，除非在解析`foo`时*静态已知为*局部变量。那么，什么时候静态地知道它是一个变量呢？当对该变量进行赋值时，该变量在使用前已*解析*（但不一定执行！）。

例子：

```
foo        # method call

if false
  foo = 42 # will never be executed, but *will* be parsed
end

foo        # variable dereference, since the `foo` assignment was parsed 
```

对于常量变量，规则更简单：`Foo`总是*被*解释为常量解引用。时期。

那么，如何调用具有这样名称的方法呢？简单：就像我说的，歧义只出现在没有参数列表和显式接收器的方法调用中。因此，如果我们添加其中一个或两个，Ruby 将知道我们正在尝试调用方法而不是取消引用变量：

```
foo()
self.foo
self.foo()

Foo()
self.Foo
self.Foo() 
```

当然，在您上面给出的示例中，只有第一个可以工作。当您在顶层定义一个方法时，它会作为`private`方法添加到`Object`，并且`private`方法只能在*没有*显式接收器的情况下调用，即使该接收器是`self`。所以，`self.Foo`不会工作，因为`Foo`是私人的。（除了在 IRb 中，为了方便起见，顶级方法是`public`.）

# c# - 默认情况下使用自定义类 IEquality 而不是将其指定为参数？

> ID：15269611
> 
> 赞同：0
> 
> 时间：2013-03-07T11:09:57.073
> 
> 标签：c#, dictionary

是否可以让类在它使用的`Dictionary<>`类中使用`IEqualityComparer`指定的作为键，而不是在每次构造它时将其指定为参数？

```
 public class mytest : IEqualityComparer<mytest>
    {
        public string name = "foo";
        bool IEqualityComparer<mytest>.Equals(mytest x, mytest y) { return x.name == y.name; }
        int IEqualityComparer<mytest>.GetHashCode(mytest obj) { return obj.name.GetHashCode(); }
        public override int GetHashCode() { return name.GetHashCode(); }
    } 
```

...

```
 var a = new Dictionary<mytest, int>();
    a.Add(new mytest(), 1);
    a.Add(new mytest(), 2);//does not throw error...bad!

    var b = new Dictionary<mytest, int>(new mytest());
    b.Add(new mytest(), 1);
    b.Add(new mytest(), 2);//will throw error...good! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:15:30.047

您只需要覆盖*mytest的***Equals**和**GetHashCode**方法或实现**IEquatable**

 ***[http://msdn.microsoft.com/en-us/library/xfhwa508(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xfhwa508(v=vs.80).aspx)

> 字典需要一个相等的实现来确定键是否相等。
> 
> 您可以 使用接受比较器参数的构造函数来指定**IEqualityComparer通用接口的实现；**如果未指定实现，则使用默认的通用相等比较器 EqualityComparer.Default。
> 
> 如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。***

# java - 如何使用 Eclipse Marketplace 中的 Zest？

> ID：15269612
> 
> 赞同：4
> 
> 时间：2013-03-07T11:10:02.773
> 
> 标签：java, eclipse, eclipse-marketplace, zest

在 Eclipse Marketplace 上，我安装了 Zest。现在我想知道，我该如何使用它？

库文件（jar）在哪里？以及如何添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T11:48:22.860

最简单的入门方法是创建一个依赖于 Zest 包的插件项目。

查看[Lars Vogel 的教程，](http://www.vogella.com/articles/EclipseZest/article.html)了解详细的分步介绍。在 Eclipse（Help -> Help Contents）和[wiki](http://wiki.eclipse.org/Zest/DOT)中也有可用的文档。

请注意，市场版本现在提供最新版本的 Zest，它是 GEF4 的一部分，并且有一个新的命名空间`org.eclipse.gef4.zest.*`而不是`org.eclipse.zest.*`.

# windows-phone - 如何在 Windows Phone 应用程序中缩放图像轴？

> ID：15269618
> 
> 赞同：0
> 
> 时间：2013-03-07T11:10:24.687
> 
> 标签：windows-phone, scaletransform

如图所示，我在网格中使用 4 个图像。现在我想在点击时将相应的图像缩放到提到的箭头方向上的网格大小，例如

image2 size(width and height) = grid(dimension) on tap 和 image2 向左缩放，如图所示。

![在此处输入图像描述](../Images/595a3e4fa33443e7a1903f24772b017d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:21:06.737

你能检查一下吗

[在 Windows Phone 7 中调整图像大小](http://blogs.msdn.com/b/mikeormond/archive/2010/12/09/resizing-images-in-windows-phone-7.aspx)

# cakephp-2.3 - cakePHP 2.3.1：hasMany 超过 2 个表

> ID：15269619
> 
> 赞同：0
> 
> 时间：2013-03-07T11:10:31.997
> 
> 标签：cakephp-2.3

我对模型关系有疑问，我不确定是否应该使用 hasMany through 或其他技术。我正在尝试创建一个用于创建调查的应用程序。我有以下关系：

```
Topics hasMany Quests
Quests hasMany Questoptions 
```

但是当我试图通过 TopicsController 访问主题模型时，我只得到主题和链接的任务，而不是任务选项。当我访问任务模型时，我会获得所有任务和链接的任务选项。如何在一个数组中获取所有带有链接任务和链接任务选项的主题？

hasMany through 似乎不是答案，因为它不是多对多的情况......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:51:09.017

是的，递归会完成这项工作，但你最好使用可包含行为：[http ://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

基本上，设置递归设置 Cake 将应用于该模型中的所有关系的级别 - 因此可能导致您获得比您真正需要的更多的数据，并使您的应用程序比它可能的速度慢。

Containable 的粒度更细，允许您针对对数据库的任何给定请求准确选择您需要和不想返回的相关数据。

# ios - mapView 的 iOS 内存问题

> ID：15269622
> 
> 赞同：1
> 
> 时间：2013-03-07T11:10:39.033
> 
> 标签：ios, xcode, memory, mkmapview

我用导航控制器创建了一个非常简单的项目，它的根控制器是 viewController，只有一个按钮指向包含 mapView 的新 mapViewControler。

NavigatioController --> viewController - button --push--> mapViewController with mapView。

这是我的 mapViewController.h 代码：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface mapViewController : UIViewController

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

@end 
```

这是我的 mapViewController.m 代码：

```
#import "mapViewController.h"    

@implementation mapViewController       
- (void)viewDidLoad
{
    [super viewDidLoad];        
}

-(void) viewWillDisappear:(BOOL)animated {

   //trigered when Back button pressed
   if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
        [self setMapView:nil];
        self.mapView.delegate = nil;
    }
    [super viewWillDisappear:animated];
}
@end 
```

因此，当我单击按钮（segue - push）时，mapViewController 会显示并且 Live Bytes 增加 40MB - 我想是因为地图图像，但是当我单击返回按钮（navigationControl）时，内存仅减少 39 MB。所以 1MB 留在某处。如果我重复 100 次，则为 100MB。泄漏工具显示没有泄漏。

有人可以解释为什么每次单击“返回”时都会保留 1MB 以及如何摆脱它吗？

# c++ - 继承中的析构函数

> ID：15269636
> 
> 赞同：0
> 
> 时间：2013-03-07T11:11:25.853
> 
> 标签：c++, inheritance, destructor

当我浏览下面的代码时，我有疑问。即为什么即使派生类的对象超出以下代码的范围，也不会调用派生类的析构函数：

```
#include "stdafx.h"
#include <iostream>
#include <conio.h>
using namespace std;

class ClassA
{
    protected:
        int width, height;
    public:
      void set_values(int x, int y)
      {
        width = x;
        height = y;
      }
      virtual int area()
      {
        return 0;
      }
      ~ClassA()
      {
         cout << "base class destructor called" << endl;
      }
 };

class ClassB : public ClassA
{
      public :
   int area()
   {
     return (width * height);
   }
   ~ClassB()
       {
      cout << "derived class destructor called" << endl;
   }
 };

 int main()
 {
   ClassA *Ptr = NULL;
   ClassB Obj;
   Ptr = &Obj;
   Ptr->set_values(10, 20);
   cout << Ptr->area() << endl;
   delete Ptr;
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:13:05.037

你不应该调用`delete`指向派生类对象的基类指针，除非基类析构函数是`virtual`你得到的是**Undefined Behavior**。

基类中的析构函数需要标记`virtual`。

```
virtual ~ClassA(){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:12:26.663

`virtual`在基类中制作你的析构函数。否则，它调用 base 的析构函数。

```
class ClassA
{
// ...
      virtual ~ClassA()
      {
         cout << "base class destructor called" << endl;
      }
}; 
```

# javascript - JavaScript 数组删除特殊

> ID：15269640
> 
> 赞同：0
> 
> 时间：2013-03-07T11:11:37.713
> 
> 标签：javascript

我有一个像这样的数组：

```
var abc = ["a","b","c"]; 
```

并且索引是0,1,2

假设，我想删除第二个项目“b”并且索引滑动！

输出：

```
abc = ["a","c"] 
```

并且索引是 0,1

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:14:13.667

使用[拼接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)功能：

```
abc.splice(1,1) // from index 1, removes 1 element 
```

请注意，这会更改原始数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:14:35.543

使用`splice()`. 例如：

```
abc.splice(1, 1); 
```

会在你的例子中执行你想要的。`abc[1]`现在是`"c"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:16:49.567

可以使用数组拼接`abc.splice(1,1);`

详细信息： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:34:04.813

看看它......我想这就是你想要的......

```
var arr = ["a","b","c"];

arr.splice(1,1);

alert("["+arr.indexOf('a')+","+arr.indexOf('c')+"]"); 
```

# c++ - 抽象基类中的重写函数

> ID：15269641
> 
> 赞同：1
> 
> 时间：2013-03-07T11:11:38.640
> 
> 标签：c++, inheritance, overriding

我有一个基类，其中包含两个同名函数，一个以 a`vector<int>`作为参数，一个以`int`. 这个想法是子类将定义自己的方法来处理 int，而基类将能够处理任一选项。但它目前无法编译。

```
class base {
public:
  virtual void toBeCalled(int i) const = 0;

  virtual void toBeCalled(std::vector<int> iVec) const
  {
    std::cout << "base::toBeCalled(vec<int>)" << std::endl;
  }
};  

class derived : public base {
public:
  virtual void toBeCalled(int i) const
  {
    std::cout << "derived::toBeCalled(int)" << std::endl;
  }
};

int main(int argc, char* argv[])
{
  derived d;
  std::vector<int> iVec;

  int i = 0;

  d.toBeCalled (i);
  d.toBeCalled (iVec);  //<< Compile error: Cannot convert from std::vector<int> to int

  return 0;
} 
```

我可以通过在 main() 中使用基类对象来使其工作，`base *d = new derived()`但如果可能的话，我不想这样做，因为我想访问一些派生类函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:14:35.437

放入。`using base::toBeCalled;`_`class derived`

我很确定这是一个骗局，但我找不到，所以我不会详细说明。但是，当您覆盖（或重载）派生类中的函数时，您会隐藏该函数的所有基类版本。

此处讨论了该行为的基本原理：[https ://stackoverflow.com/a/12036004/13005](https://stackoverflow.com/a/12036004/13005)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:15:05.077

你没有导致`class derived`从基础派生。

```
class derived: public base { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:27:18.987

我假设您在此处复制代码时忘记指定基类。这是，而不是：

```
class derived {
public: // and so on 
```

你有：

```
class derived : public base {
public: // and so on 
```

为类定义方法时，这些方法会隐藏基类中的所有同名方法。在这种情况下，当您覆盖 method 时`toBeCalled()`，您是说该类`derived`将仅具有您指定的那些签名；基类中的任何其他签名都将被隐藏：

```
class derived : public base {
public:
  virtual void toBeCalled(int i) const
  {
    std::cout << "derived::toBeCalled(int)" << std::endl;
  }
  // void base::toBeCalled(std::vector<int> iVec) const is hidden and
  // cannot be accessed through this class
}; 
```

由于您不想在派生类中覆盖该方法的第二个版本，因此最好的方法是明确告诉编译器您要将该方法的所有基类版本导入（而不是隐藏）到派生类中班级。这是通过一个`using`子句完成的：

```
class derived : public base {
public:
  using base::toBeCalled; // Any version of method toBeCalled() not overriden here
                          // will now be taken from the base class
  virtual void toBeCalled(int i) const
  {
    std::cout << "derived::toBeCalled(int)" << std::endl;
  }
  // void base::toBeCalled(std::vector<int> iVec) const is taken
  // from the base class now
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:17:06.690

你可以这样称呼它，

```
 base.toBeCalled(iVec);  // here base is not base class name...it is reference to Parent Class 
```

另一种方式 -

```
class derived : base  {  // inherit base class
public:
  virtual void toBeCalled(int i) const
  {
    std::cout << "derived::toBeCalled(int)" << std::endl;
  }
}; 
```

# regex - notepad++ 常规查找和替换

> ID：15269643
> 
> 赞同：0
> 
> 时间：2013-03-07T11:11:43.923
> 
> 标签：regex, notepad++

我试图从线条中找到弓然后用**专业** 替换**专业（aspeed 700）**

用记事本++正则表达式

```
(item (name 767) (Index 567) (Image "wea098") (Action 10 2) (class weapon bow) (code 1 2 2 2) (country 2) (level 56) (wear 1) (limit archer 56) (range 176) (buy 0) (sell 1) (endurance 30) (maxprotect 150) (specialty    (Str 1) (Dex 4) (Attack 172 232) (hp 150) (mp 50) (hit 72)))

(item (name 770) (Index 570) (Image "wea101") (Action 10 2) (class weapon wand) (code 1 2 1 3) (country 2) (level 56) (wear 1) (limit mage 56) (range 18) (buy 0) (sell 1) (endurance 30) (maxprotect 150) (specialty   (aspeed 1000) (Int 5) (Attack 150 160) (Magic 220 300) (mp 250) (hit 64))) 
```

我试过

```
Find What : .*class\s*weapon\s*bow.*specialty[^.]
Replace With \1 (aspeed 700) 
```

结果是：

```
(aspeed 700)   (Str 1) (Dex 4) (Attack 172 232) (hp 150) (mp 50) (hit 72))) 
```

我想要的结果应该是：

```
(item (name 767) (Index 567) (Image "wea098") (Action 10 2) (class weapon bow) (code 1 2 2 2) (country 2) (level 56) (wear 1) (limit archer 56) (range 176) (buy 0) (sell 1) (endurance 30) (maxprotect 150) (specialty (aspeed 700)   (Str 1) (Dex 4) (Attack 172 232) (hp 150) (mp 50) (hit 72))) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:22:17.237

如果`bow`总是会在`specialty`此之前使用：

```
Find what:     (.*bow.*)(specialty)
Replace with:  $1specialty (aspeed 700) 
```

如果`bow`以后出现，`specialty`使用两个正则表达式可能最容易做到这一点，上面的一个和这个：

```
Find what:     (specialty)(.*bow.*)
Replace with:  specialty (aspeed 700)$2 
```

如果您是铁杆，那么您可能可以将这两个正则表达式结合起来，我现在可以想办法做到这一点:)

PS 旧版本的 Notepad++ 存在正则表达式问题。获取[最新版本](http://notepad-plus-plus.org/download)（撰写本文时为 6.3）以确保您没有问题。

# eclipse-cdt - /usr/bin/ld: 找不到 -lCImg

> ID：15269647
> 
> 赞同：0
> 
> 时间：2013-03-07T11:11:58.407
> 
> 标签：eclipse-cdt

我同时是 C++ 和 Eclipse 的新手......我想使用 CImg 库，但是当我只使用一条线时，我遇到了下面描述的问题：

我的代码是：

```
#include "CImg.h"   
using namespace cimg_library;   
int main() {    
CImg <unsigned char> img(640,400,1,3); 
return 0;} 
```

我得到的错误是： /usr/bin/ld: cannot find -lCImg collect2: ld returned 1 exit status

我昨天搜索了很多，我尝试了很多我发现的东西。我几乎尝试了 X11 库和路径读取的所有内容。我多次更改项目设置中的标志......提前谢谢你。

PS：我知道这里有一个类似（几乎相同的问题）[g++: No such file or directory？](https://stackoverflow.com/questions/10895879/g-no-such-file-or-directory)但就我而言，我无法更改makefile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:29:41.903

CImg 是一个基于模板的库，它使用您的程序“动态”编译，因此它不是预编译的，因此没有与之关联的 libCImg.so 或 libCImg.a 文件。当您调用 g++ 时，您只是不需要选项“-lCImg”。最后，如果您使用 CImg 的显示功能（这是默认行为），您需要添加

```
-lX11 -lpthread 
```

在您的编译行上，但仅此而已（如果您根本不使用 CImgDisplay，甚至可以通过将这些依赖项删除

```
-Dcimg_display=0 
```

使用 g++ 编译时）。

# java - Java - 我如何在调用 Web 服务的服务层中构建应急措施

> ID：15269649
> 
> 赞同：1
> 
> 时间：2013-03-07T11:12:07.477
> 
> 标签：java, web-services, spring

我有一个调用 web 服务的服务层。服务层生成的请求数量可能非常大，我想建立一些应急措施，以防 Web 服务处理的请求量过多。我知道我可以添加一些异常处理来判断请求是否失败，但是如果服务关闭或难以处理请求，我不想继续点击服务。

我如何告诉我的服务层在服务不可用时停止拨打电话，然后在服务再次激活时恢复？我知道这可以使用包含标志的文件手动完成，在调用 web 服务之前服务会检查该标志。然后可以在服务器下降时更新这个标志，但是我更喜欢自动的东西。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:26:03.807

我认为这很容易用[拦截器](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/support/interceptor/ClientInterceptor.html#handleRequest%28org.springframework.ws.context.MessageContext%29)完成。只需制作自己的拦截器并在此处实现逻辑即可。

# asp.net - 为什么 ExecuteURL 会剥离 File 没有的现有标头？

> ID：15269650
> 
> 赞同：1
> 
> 时间：2013-03-07T11:12:08.997
> 
> 标签：asp.net, iis-7, web-config, custom-error-pages

似乎众所周知，使用`responseMode`of`ExecuteURL`而不是提供自定义错误页面`File`会导致 HTTP 状态代码不被维护。

剩余的标头在此过程中也会丢失，导致没有`cache-control`标头被保留等等。

引擎盖下到底发生了什么？为什么不维护标题？

我可以找到很多资源来解释解决方案，但首先没有扩展问题的推理。

# android - 安卓支持多屏？

> ID：15269652
> 
> 赞同：0
> 
> 时间：2013-03-07T11:12:17.133
> 
> 标签：android, android-ui, android-screen-support

在我的应用程序中，我正在设置多屏幕支持。在我的布局中，我使用 layout-normal 它支持 320x480 和 480X720hdpi（我认为，因为它从 layout-normal 获取）每个布局都非常适合两种分辨率，但弹出窗口不适合 480X720 分辨率。

请参考我的图像**320x480 屏幕图像**和**480x720 屏幕图像**就会知道问题所在。如何解决问题。

![320X480屏幕](../Images/3a4ad006e0d6180a195098f3f9a8991a.png)

![480x720 屏幕](../Images/3a890c0658c5ef9ee088c6b0779736ed.png)

1.320X480 屏幕 2.480x720 屏幕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:38:07.807

将您的布​​局添加到每个文件夹，例如

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

在清单中添加支持屏幕

```
<supports-screens android:resizeable=["true"| "false"]
                  android:smallScreens=["true" | "false"]
                  android:normalScreens=["true" | "false"]
                  android:largeScreens=["true" | "false"]
                  android:xlargeScreens=["true" | "false"]
                  android:anyDensity=["true" | "false"]
                  android:requiresSmallestWidthDp="integer"
                  android:compatibleWidthLimitDp="integer"
                  android:largestWidthLimitDp="integer"/> 
```

有关更多信息，请查看此[链接](http://developer.android.com/guide/practices/screens_support.html)

# jquery - Jquery，如何处理高数字

> ID：15269653
> 
> 赞同：0
> 
> 时间：2013-03-07T11:12:20.373
> 
> 标签：jquery, numbers

我需要验证一些 22 个字符长的整数。我需要除以那个数字并得到商以及占卜的余数。但是，当我将它发送到模函数时，它返回 7.04406000774059e+21

```
labas = modulo(7044060007740589212932, 97);
function modulo (divident, divisor){
alert(divident);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:28:37.923

有几个库用于处理 js 中的大数字：

*   [大整数](https://github.com/silentmatt/javascript-biginteger)（和[描述](http://silentmatt.com/biginteger/)）
*   [大数](http://jsfromhell.com/classes/bignumber)
*   [jsbn](http://www-cs-students.stanford.edu/~tjw/jsbn/)
*   [大号](https://github.com/jtobey/javascript-bignum)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T03:29:38.687

我认为您的意思是**除法**（不是“神圣”）和**余数**（不是“坏部分”）。
我掷了一些有趣的骰子来得到一个随机数（8233），我将用它来做一些例子。
* 8233除以8，余数为1。`8233 = (8 * 1029) + 1`
* 8233除以9，余数为7。`8233 = (9 * 914) + 7`
* 8233除以10，余数为3。`8233 = (10 * 823) + 3`
* 8233除以11，余数为5.`8233 = (11 * 748) + 5`

回答您的问题：
在 JavaScript 中处理数字时，您必须记住只有前 15 位或 16 位数字是好的。如果数字有更多位数，结果通常不会准确。
您的示例使用此数字：`7044060007740589212932` JavaScript 无法准确处理该数字。它所能做的最好的就是`7044060007740589735936`，`523004`太高了。但你不想要`7044060007740589735936`，你想要`7044060007740589212932`。
这是一种解决方法：
将您的号码保留为*字符串*，而不是数字。
`"7044060007740589212932"`
然后将字符串分成两部分，就在中间。
`"70440600077"`现在`"40589212932"`
你有两个字符串，每个字符串都包含 11 位数字。
然后执行以下操作：
`parseInt("70440600077", 10)`让你得到号码`70440600077`
`(70440600077 % 97)`让你得到号码`36`
请注意，`(97 * 726191753) + 36 = 70440600077`
Then 获取`36`并执行以下操作：
`(36 + "40589212932")`获取字符串`"3640589212932"`
（数字加字符串进行字符串连接。） `parseInt("3640589212932", 10)`获取数字`3640589212932` `(3640589212932 % 97)`获取数字`0`，这是您的最终结果。请注意这一点`97 * 37531847556 = 3640589212932`。

```
72619175300000000000 * 97 =  7044060004100000000000
         37531847556 * 97 =           3640589212932
====================         ======================
72619175337531847556 * 97 =  7044060007740589212932 
```

你去吧。

# python - 单个 hxs.select 工作时清空刮板输出？

> ID：15269656
> 
> 赞同：0
> 
> 时间：2013-03-07T11:12:29.737
> 
> 标签：python, web-crawler, scrapy, scrapyd

主文件

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from bloggerx.items import BloggerxItem
from scrapy.spider import BaseSpider

class BloggerxSpider(BaseSpider):
    name = 'bloggerx'
    allowed_domains = ['abcr.com']
    start_urls = ['http://www.abcr.com/profile/07372831905432746031']
    def parse(self,response):
        hxs = HtmlXPathSelector(response)
        item = BloggerxItem()
        item['gender'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Gender")]/following-sibling::node()/text()').extract()
        item['blogger_since'] = hxs.select('/html/body/div[2]/div/div[2]/div/p[2]/text()').re('\d+')
        item['profile_views'] = hxs.select('/html/body/div[2]/div/div[2]/div/p[3]/text()').re('\d+')
        item['industry'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Industry")]/following-sibling::node()/span/a/text()').extract()
        item['occupation'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Occupation")]/following-sibling::node()/span/a/text()').extract()
        item['locality'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="locality"]/a/text()').extract()
        item['region'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="region"]/a/text()').extract()
        item['country'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="country-name"]/a/text()').extract()
        item['introduction'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Introduction")]/following-sibling::node()/text()').extract()
        item['interests'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Interests")]/following-sibling::node()/span/a/text()').extract()
        item['email1'] = hxs.select('//html/body/div[2]/div/div[2]/div/ul/li/script/text()').re('[\w.]+@[\w.]+[com]')
        item['email2'] = hxs.select('/html/body/div[2]/div/div[2]/div/ul/li[3]/div/text()').extract()
        item['website'] = hxs.select('//html/body/div[2]/div/div[2]/div/ul/li[2]/a/@href').extract()
        item['films'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Films")]/following-sibling::node()/span/a/text()').extract()
        item['music'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Music")]/following-sibling::node()/span/a/text()').extract()
        item['books'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Books")]/following-sibling::node()/span/a/text()').extract()
        item['blogs_follow'] = hxs.select('//html/body/div[2]/div/div[3]/ul[2]/li/a/text()').extract()
        item['blogs_follow_link'] = hxs.select('//html/body/div[2]/div/div[3]/ul[2]/li/a/@href').extract()
        item['author_blogs'] =  hxs.select('//html/body/div[2]/div/div[3]/ul/li/span/a/text()').extract()
        item['author_blogs_link'] = hxs.select('//html/body/div[2]/div/div[3]/ul/li/span/a/@href').extract()
        return item 
```

项目文件

```
from scrapy.item import Item, Field

class BloggerxItem(Item):
    # define the fields for your item here like:
    # name = Field()
    gender = Field()
    blogger_since = Field()
    profile_views = Field()
    industry = Field()
    occupation = Field()
    locality = Field()
    introduction = Field()
    interests = Field()
    email1 = Field()
    website = Field()
    films = Field()
    music = Field()
    books = Field()
    region = Field()
    country = Field()
    email2 = Field()
    blogs_follow = Field()
    blogs_follow_link = Field()
    author_blogs = Field()
    author_blogs_link = Field()
    pass 
```

我运行时的输出：scrapy crawl bloggerx -o items.json -t json

```
2013-03-07 16:39:24+0530 [scrapy] INFO: Scrapy 0.16.4 started (bot: bloggerx)
2013-03-07 16:39:24+0530 [scrapy] DEBUG: Enabled extensions: FeedExporter, LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-03-07 16:39:25+0530 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-03-07 16:39:25+0530 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-03-07 16:39:25+0530 [scrapy] DEBUG: Enabled item pipelines: 
2013-03-07 16:39:25+0530 [bloggerx] INFO: Spider opened
2013-03-07 16:39:25+0530 [bloggerx] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-03-07 16:39:25+0530 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6028
2013-03-07 16:39:25+0530 [scrapy] DEBUG: Web service listening on 0.0.0.0:6085
2013-03-07 16:39:27+0530 [bloggerx] DEBUG: Crawled (200) <GET http://www.abcr.com/profile/07372831905432746031> (referer: None)
2013-03-07 16:39:27+0530 [bloggerx] INFO: Closing spider (finished)
2013-03-07 16:39:27+0530 [bloggerx] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 249,
     'downloader/request_count': 1,
     'downloader/request_method_count/GET': 1,
     'downloader/response_bytes': 13459,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2013, 3, 7, 11, 9, 27, 320389),
     'log_count/DEBUG': 7,
     'log_count/INFO': 4,
     'response_received_count': 1,
     'scheduler/dequeued': 1,
     'scheduler/dequeued/memory': 1,
     'scheduler/enqueued': 1,
     'scheduler/enqueued/memory': 1,
     'start_time': datetime.datetime(2013, 3, 7, 11, 9, 25, 967450)}
2013-03-07 16:39:27+0530 [bloggerx] INFO: Spider closed (finished) 
```

生成的输出文件是空的，并且在 scrapy shell 上尝试时单独的 hxs.select 语句工作正常。我在做什么傻事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T07:16:20.363

好像晚了。但是最近我学会了scrapy，就我的研究而言......

您正在从标头调用爬虫并使用基本蜘蛛错误：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
class BloggerxSpider(BaseSpider): 
```

修正后：

```
 from scrapy.contrib.spiders import **CrawlSpider**, Rule

class BloggerxSpider(**CrawlSpider**): 
```

**或者**

```
from scrapy.spider import BaseSpider

class BloggerxSpider(BaseSpider): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:49:06.630

如果您没有明确定义规则并且不关心以下链接，请改用 BaseSpider，但将回调命名为`parse`.

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from bloggerx.items import BloggerxItem

class BloggerxSpider(BaseSpider):
    ... 
```

请注意，对于 CrawlSpider，[文档明确指出](http://doc.scrapy.org/en/latest/topics/spiders.html#crawling-rules)您不应命名您的回调`parse`，因为这将覆盖 CrawlSpider 的`parse`方法，并且蜘蛛将无法正确爬行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:28:23.000

取而代之的是 def parse_blogger 你需要把 def parse.

def parse is default one for parsing in framework, and if you want to name it different you need to send your responses to that new one.

For using your own parse method you need to call is as callback, this is example when you create your own Request:

```
request = Request("http://something", callback=self.parse_blogger) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T02:52:48.710

您的日志输出对我来说似乎很奇怪，因为您的 没有条目`start_urls`，服务器以 404 响应，默认情况下 Scrapy 将忽略该条目，因此不会返回任何项目。此外，您的蜘蛛没有声明`BaseSpider`这意味着该代码甚至无法编译，因此这里似乎存在一些复制/粘贴问题。

编辑 - - - - - - - - -

我将域更改为 blogger.com，现在它返回一个项目：

```
2013-03-08 09:02:28-0600 [scrapy] INFO: Scrapy 0.17.0 started (bot: oneoff)
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Overridden settings: {'NEWSPIDER_MODULE': 'oneoff.spiders', 'SPIDER_MODULES': ['oneoff.spiders'], 'USER_AGENT': 'Chromium OneOff 24.0.1312.56 Ubuntu 12.04 (24.0.1312.56-0ubuntu0.12.04.1)', 'BOT_NAME': 'oneoff'}
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Enabled item pipelines:
2013-03-08 09:02:28-0600 [bloggerx] INFO: Spider opened
2013-03-08 09:02:28-0600 [bloggerx] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6024
2013-03-08 09:02:28-0600 [scrapy] DEBUG: Web service listening on 0.0.0.0:6081
2013-03-08 09:02:28-0600 [bloggerx] DEBUG: Crawled (200) <GET http://www.blogger.com/profile/07372831905432746031> (referer: None)
2013-03-08 09:02:28-0600 [bloggerx] DEBUG: Scraped from <200 http://www.blogger.com/profile/07372831905432746031>
    {'author_blogs': [u'Inserire comunicati stampa per il turismo',
                      u'Inserire Comunicati stampa e Article Marketing',
                      u'Video Quacos'],
     'author_blogs_link': [u'http://comunicati-stampa-per-il-turismo.blogspot.com/',
                           u'http://comunicati-stampa-vendita-online.blogspot.com/',
                           u'http://quacos.blogspot.com/'],
     'blogger_since': [u'2008'],
     'blogs_follow': [u'Abandonware Time',
                      u'AltroSeo.com',
                      u'ANSIMA notizie',
                      u'Cinnamon Girl',
                      u'enigmamigarun',
                      u'Fake Books - Libri di una riga.',
                      u'FM - COSMETICA E NON SOLO ',
                      u'GS BARBARIANS',
                      u'Il Disinformatico',
                      u'Linus&#39; blog',
                      u'Montefeltro Nuoto Master',
                      u'Nella Tana del Coniglio',
                      u'PHP and tips'],
     'blogs_follow_link': [u'http://squakenet.blogspot.com/',
                           u'http://www.altroseo.com/',
                           u'http://ansima.blogspot.com/',
                           u'http://cinnamongirl82.blogspot.com/',
                           u'http://enigmaamigarun.blogspot.com/',
                           u'http://fake-books.blogspot.com/',
                           u'http://valeriacosmeticafm.blogspot.com/',
                           u'http://gsbarbarians.blogspot.com/',
                           u'http://attivissimo.blogspot.com/',
                           u'http://torvalds-family.blogspot.com/',
                           u'http://montefeltronuotomaster.blogspot.com/',
                           u'http://anonimoconiglio.blogspot.com/',
                           u'http://phpntips.blogspot.com/'],
     'books': [],
     'country': [],
     'email1': [u'bloggiovanni.cappellini@gmail.com'],
     'email2': [u'cappogio@hotmail.com'],
     'films': [],
     'gender': [],
     'industry': [],
     'interests': [],
     'introduction': [],
     'locality': [],
     'music': [],
     'occupation': [],
     'profile_views': [u'553'],
     'region': [],
     'website': [u'http://www.quacos.com']}
2013-03-08 09:02:28-0600 [bloggerx] INFO: Closing spider (finished)
2013-03-08 09:02:28-0600 [bloggerx] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 288,
     'downloader/request_count': 1,
     'downloader/request_method_count/GET': 1,
     'downloader/response_bytes': 13615,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2013, 3, 8, 15, 2, 28, 948533),
     'item_scraped_count': 1,
     'log_count/DEBUG': 9,
     'log_count/INFO': 4,
     'response_received_count': 1,
     'scheduler/dequeued': 1,
     'scheduler/dequeued/memory': 1,
     'scheduler/enqueued': 1,
     'scheduler/enqueued/memory': 1,
     'start_time': datetime.datetime(2013, 3, 8, 15, 2, 28, 379242)}
2013-03-08 09:02:28-0600 [bloggerx] INFO: Spider closed (finished) 
```

蜘蛛：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from bloggerx.items import BloggerxItem

class BloggerxSpider(BaseSpider):
    name = 'bloggerx'
    allowed_domains = ['blogger.com']
    start_urls = ['http://www.blogger.com/profile/07372831905432746031']

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        item = BloggerxItem()
        item['gender'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Gender")]/following-sibling::node()/text()').extract()
        item['blogger_since'] = hxs.select('/html/body/div[2]/div/div[2]/div/p[2]/text()').re('\d+')
        item['profile_views'] = hxs.select('/html/body/div[2]/div/div[2]/div/p[3]/text()').re('\d+')
        item['industry'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Industry")]/following-sibling::node()/span/a/text()').extract()
        item['occupation'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Occupation")]/following-sibling::node()/span/a/text()').extract()
        item['locality'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="locality"]/a/text()').extract()
        item['region'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="region"]/a/text()').extract()
        item['country'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Location")]/following-sibling::node()/span[@class="country-name"]/a/text()').extract()
        item['introduction'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Introduction")]/following-sibling::node()/text()').extract()
        item['interests'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Interests")]/following-sibling::node()/span/a/text()').extract()
        item['email1'] = hxs.select('//html/body/div[2]/div/div[2]/div/ul/li/script/text()').re('[\w.]+@[\w.]+[com]')
        item['email2'] = hxs.select('/html/body/div[2]/div/div[2]/div/ul/li[3]/div/text()').extract()
        item['website'] = hxs.select('//html/body/div[2]/div/div[2]/div/ul/li[2]/a/@href').extract()
        item['films'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Films")]/following-sibling::node()/span/a/text()').extract()
        item['music'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Music")]/following-sibling::node()/span/a/text()').extract()
        item['books'] = hxs.select('//html/body/div[2]/div/div[3]/table/tr/th[contains(text(),"Favourite Books")]/following-sibling::node()/span/a/text()').extract()
        item['blogs_follow'] = hxs.select('//html/body/div[2]/div/div[3]/ul[2]/li/a/text()').extract()
        item['blogs_follow_link'] = hxs.select('//html/body/div[2]/div/div[3]/ul[2]/li/a/@href').extract()
        item['author_blogs'] = hxs.select('//html/body/div[2]/div/div[3]/ul/li/span/a/text()').extract()
        item['author_blogs_link'] = hxs.select('//html/body/div[2]/div/div[3]/ul/li/span/a/@href').extract()

        return item 
```

# jquery - 列中最后输入的数据单元格索引

> ID：15269658
> 
> 赞同：0
> 
> 时间：2013-03-07T11:12:41.203
> 
> 标签：jquery, html

在表格中如何查找最后输入的数据列中的单元格索引。
我的桌子如下

```
<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
<tr>
<td>row 3, cell 1</td>
<td>row 3, cell 2</td>
</tr>
<tr>
<td></td>
<td>row 4, cell 2</td>
</tr>
<tr>
<td>row 5, cell 1</td>
<td>row 5, cell 2</td>
</tr>
<tr>
<td></td>
<td>row 6, cell 2</td>
</tr>
<tr>
<td>row 7, cell 1</td>
<td>row 7, cell 2</td>
</tr>
<tr>
<td>row 8, cell 1</td>
<td>row 8, cell 2</td>
</tr>
<tr>
<td></td>
<td>row 9, cell 2</td>
</tr>
<tr>
<td></td>
<td>row 10, cell 2</td>
</tr>
 </table> 
```

在上表中，我希望第一列最后输入的单元格索引为 8。
如何使用 jquery 使用动态表达式找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:15:43.863

如果您正在查看第一行最后一列

**[现场演示](http://jsfiddle.net/YJtG9/)**

```
$('tr:eq(1) td:last').index() 
```

根据 OP 的评论进行编辑，从 end 开始找到第一个非空的 td。

**[现场演示](http://jsfiddle.net/YJtG9/3/)**

```
tds = $('tr td:nth-child(2n+1)');
for(i=tds.length-1; i >=0; i--) 
    if($.trim(tds.eq(i).text()) != "")
        break;    
alert($(tds[i]).text()); 
```

# asp.net - OutputCache 不适用于 Composite C1 CMS 中的单个新闻页面

> ID：15269661
> 
> 赞同：1
> 
> 时间：2013-03-07T11:12:50.230
> 
> 标签：asp.net, outputcache, c1-cms

我刚刚安装了 Composite.News 包并试图使它与 OutputCache 一起工作。
新闻页面本身由 OutputCache 提供服务，但带有 News/2013/02/22/MyNewsItem 之类的 url 的单个 NewsItem 不希望被缓存！

有什么方法可以为 NewsItems 启用 OutputCache（以及通常使用 RegisterPathInfoUsage 注册的任何 url）？谢谢！

# multithreading - Monotouch 线程问题 - 下载文件时更新 BTProgressHUD

> ID：15269663
> 
> 赞同：0
> 
> 时间：2013-03-07T11:12:51.953
> 
> 标签：multithreading, xamarin.ios

请你帮我穿线。我正在尝试下载文件并同时更新 BTProgressHUD 进度显示。我知道它不起作用的原因是使用主线程进行下载并且不允许我更新 UI 但我无法弄清楚如何正确使用线程池以允许我在更新 BTProgressHUD 时文件正在下载。请帮忙！！

`

```
 BTProgressHUD.Show("Downloading...", progress);
                string this_file = "example.pdf";

                string file_url = "http://our_server.com/files/" + this_file;
                Uri url = new Uri(file_url);

                var documents = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
                var folder = Path.Combine (documents, "", "PDF");

                System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);
                System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
                response.Close();

                Int64 iSize = response.ContentLength;

                // keeps track of the total bytes downloaded so we can update the progress bar
                Int64 iRunningByteTotal = 0;

                // use the webclient object to download the file
                using (System.Net.WebClient client = new System.Net.WebClient())
                {
                    // open the file at the remote URL for reading
                    using (System.IO.Stream streamRemote = client.OpenRead(new Uri(file_url)))
                    {
                        // using the FileStream object, we can write the downloaded bytes to the file system
                        using (Stream streamLocal = new FileStream(folder + "/" + this_file, FileMode.Create, FileAccess.Write, FileShare.None))
                        {

                            // loop the stream and get the file into the byte buffer
                            int iByteSize = 0;
                            byte[] byteBuffer = new byte[iSize];
                            while ((iByteSize = streamRemote.Read(byteBuffer, 0, byteBuffer.Length)) > 0)
                            {
                                // write the bytes to the file system at the file path specified
                                streamLocal.Write(byteBuffer, 0, iByteSize);
                                iRunningByteTotal += iByteSize;

                                // calculate the progress out of a base "100"
                                double dIndex = (double)(iRunningByteTotal);
                                double dTotal = (double)byteBuffer.Length;
                                double dProgressPercentage = (dIndex / dTotal);
                                int iProgressPercentage = (int)(dProgressPercentage * 100);

                                if (iProgressPercentage == 100)
                                {

                                    var z = new UIAlertView ("Download Complete", this_file + " downloaded.", null, "OK", null);
                                    z.Show();

                                    BTProgressHUD.Dismiss();                                            
                                }

                                if (iProgressPercentage % 10 == 0)
                                {
                                    // THIS BUT NEVER HAPPENS!!!  Cannot update the progress display
                                    progress += 0.1f;
                                    BTProgressHUD.Show("XXX", progress);
                                }

                            } // while..

                            streamLocal.Close();  // clean up the file stream

                        } // using stream

                        streamRemote.Close(); // close the connection to the remote server

                    } // using I.O

                } // using system.net 
```

`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:51:57.277

我使用 TPL 来启动后台线程，然后使用 InvokeOnMainThread 回调 UI。我已将 BTProgressHUD 替换为 UILabel，但它应该可以正常工作。这是它的工作原理：

```
private void DownloadCoffeePDF()
    {
        Task.Factory.StartNew (() => {
            InvokeOnMainThread(() => {
                this.TheLabel.Text = string.Format("Downloading...{0}", progress);
            });
            string file_url = "http://www.pnf.org/coffeeedited041001.pdf";
            Uri url = new Uri(file_url);

            var documents = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
            var folder = Path.Combine (documents, "", "PDF");

            System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);
            System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
            response.Close();

            Int64 iSize = response.ContentLength;

            // keeps track of the total bytes downloaded so we can update the progress bar
            Int64 iRunningByteTotal = 0;

            // use the webclient object to download the file
            using (System.Net.WebClient client = new System.Net.WebClient())
            {
                // open the file at the remote URL for reading
                using (System.IO.Stream streamRemote = client.OpenRead(new Uri(file_url)))
                {
                    // using the FileStream object, we can write the downloaded bytes to the file system
                    using (Stream streamLocal = new FileStream(folder + "/" + "Coffee.pdf", FileMode.Create, FileAccess.Write, FileShare.None))
                    {

                        // loop the stream and get the file into the byte buffer
                        int iByteSize = 0;
                        byte[] byteBuffer = new byte[iSize];
                        while ((iByteSize = streamRemote.Read(byteBuffer, 0, byteBuffer.Length)) > 0)
                        {
                            // write the bytes to the file system at the file path specified
                            streamLocal.Write(byteBuffer, 0, iByteSize);
                            iRunningByteTotal += iByteSize;

                            // calculate the progress out of a base "100"
                            double dIndex = (double)(iRunningByteTotal);
                            double dTotal = (double)byteBuffer.Length;
                            double dProgressPercentage = (dIndex / dTotal);
                            int iProgressPercentage = (int)(dProgressPercentage * 100);

                            if (iProgressPercentage == 100)
                            {
                                   InvokeOnMainThread(() => {
                                    var z = new UIAlertView ("Download Complete", "Coffee.pdf" + " downloaded.", null, "OK", null);
                                    z.Show();

                                    this.TheLabel.Text = "Download Complete"; 
                                });
                            }

                            if (iProgressPercentage % 10 == 0)
                            {
                                InvokeOnMainThread(() => {
                                // THIS BUT NEVER HAPPENS!!!  Cannot update the progress display
                                    progress += 0.1f;
                                    this.TheLabel.Text = string.Format("{0}", progress);
                                });
                            }

                        } // while..

                        streamLocal.Close();  // clean up the file stream

                    } // using stream

                    streamRemote.Close(); // close the connection to the remote server

                } // using I.O

            } // using system.net
        });
    } 
```

# c# - 获取有序集合中的范围

> ID：15269666
> 
> 赞同：1
> 
> 时间：2013-03-07T11:12:56.290
> 
> 标签：c#, linq, collections

我有一个有序的`DateTime`值集合。我想检索特定开始时间和结束时间之间集合中的所有值。我应该使用什么集合以最有效的方式以及如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:19:21.907

您可以使用 a`List<T>`但保持有序。使用[BinarySearch](http://msdn.microsoft.com/en-gb/library/w4e7fxsh.aspx)方法在列表中找到您的起点`DateTime`。请注意，它返回：

> 排序列表中项目的从零开始的索引（如果找到项目）；否则，负数是下一个大于 item 的元素的索引的按位补码，或者如果没有更大的元素，则为 Count 的按位补码。

因此，如果该值为负数，您将需要应用按位补码（`~`运算符）来查找范围内的第一个索引。然后，您可以使用相同的过程并减去 1 来查找范围内的最后一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:27:25.757

使用 LINQ（因为这是您的标签之一），您可以这样做：

```
IEnumerable<DateTime> orderedDateTimes; // Your ordered DateTime collection
DateTime start;     // The start date/time, inclusive
DateTime end;       // The end date/time, inclusive

var range = orderedDateTimes
            .SkipWhile(dt => dt < start)
            .TakeWhile(dt => dt <= end); 
```

这将需要*O(n)*最坏的情况来获得一个范围。但是，您可以强制将结果放入列表或数组中，以便能够有效地重用它：

```
DateTime[] rangeArray = range.ToArray();
// -or-
List<DateTime> rangeList = range.ToList(); 
```

# java - Java 实例方法

> ID：15269668
> 
> 赞同：0
> 
> 时间：2013-03-07T11:13:02.950
> 
> 标签：java

我有以下课程：

```
public class Example(

   private String id;
   private ArrayList<String> docs = new ArrayList();

   public Example(string startid){
      id = startid;
      docs = null;
   }

   public void myMethod(String externalID){

      Example myExample = new Example(externalID);

} 
```

如果我在调用 myMethod 时理解得很好，它将创建一个名为 myExample 的 Example 实例，其中 id = externalID 和 docs = null。

我想要这个类做的是：从将创建一个实例（myExample）的外部点同时调用 myMethod，并确保外部调用不能覆盖 myExample 的任何变量（线程安全？）我还希望它做的是从适当的 myExample 实例中的外部调用填充 docs 数组。这是可能的，还是我必须同时传递带有 startid 的 ArrayList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:26:32.257

你理解错了。

为了调用`myMethod`，您需要已经创建了一个 Example 实例，调用`myMethod`将使用 externalId 实例化一个新实例，然后他们会立即丢弃它。

据我了解，您想要的是以下内容：

```
public class Example {

  // Final so it can't be modified once set.
  private final String id;

  // Final so it can't be switch to a different list.
  // Public so others can add to it and have acces to List methods.
  // Synchronized so acces to it from multiple threads is possible.
  // Note: You should probably make this private and have a getList() method that
  //       returns this instance to have nice encapsulation.
  public final List<String> docs = Collections.synchronizedList(new ArrayList());

  // Make default constructor private to force setting the startId.
  private Example() {}

  public Example(final String startId){
     this.id = startId;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:43:09.687

根据 Benoit 对您想要实现的目标的想法，我认为最好的方法是使用 Map （如果您想要线程安全，则使用 ConcurrentMap ）：

```
ConcurrentMap<String, List<String>> myData = new ConcurrentHashMap<>(); 
```

这样您就可以通过您提供的 id 来处理任何列表。

```
List<String> myList = myData.get(id); 
```

如果您想限制列表的访问器（例如只提供 add 方法），您需要将列表封装在一个类中：

```
public final class Example {
    private final List<String> docs = new ArrayList<>();

    public boolean addDoc(final String doc) {
        return docs.add(doc);
    }
} 
```

然后使用 Map 如下：

```
ConcurrentMap<String, Example> myData = new ConcurrentHashMap<>(); 
```

并添加这样的文档：

```
myData.get(id).addDoc(myDoc); 
```

希望这可以帮助...

关于评论中讨论的主题：设置变量

您有这样的课程：

```
public class Example {
    public String var;
} 
```

像这样的一个例子

```
Example ex = new Example(); 
```

您可以使用

```
ex.var = "abc"; 
```

有了这样的课程

```
public class Example {
    private String var;
    public void setVar(String var) {
        this.var = var;
    }
} 
```

采用

```
ex.setVar("abc"); 
```

管理多个实例：

1）您的网络服务获取带有 id 的信息

2）您的服务器应用程序存储一个实例映射，您可以通过 ID 访问它（参见上面的映射示例）。在您调用的网络服务中

```
Example ex = ReportHolder.getReport(id); 
```

假设这样的课程：

```
public class ReportHolder {
    private static ConcurrentMap<String, Example> map = new ConcurrentMap<>();
    public static Example getReport(final String id) {
        return map.get(id);
    }
} 
```

3）然后你可以操作实例。

确保您正确理解术语变量、类、实例和静态。否则将很难理解您的错误发生的原因。

# c# - 无法从客户端连接到 WCF 服务

> ID：15269671
> 
> 赞同：0
> 
> 时间：2013-03-07T11:13:05.723
> 
> 标签：c#, wcf, web-services

我在尝试从 ac# 客户端访问 iis（本地）托管的 WCF 服务时收到此错误：

> 在 ServiceModel 客户端配置部分中找不到名称为“X”和合同“合同名称”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

这是客户端的 app.config（它是一个 NUnit 夹具，只是为了测试连接）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_MyWs" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
           <endpoint address="https://localhost/MyWs/MyWs.svc"
                    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_MyWs"
                    contract="MyServiceSvc.IMyWs"
                    name="BasicHttpBinding_MyWs" />
        </client>
   </system.serviceModel>
</configuration> 
```

如果我浏览

```
https://localhost/MyWs/MyWs.svc?wsdl 
```

我得到正确的输出，所以服务器部分工作正常。
此外，我可以使用soapUI 测试我的ws，所以问题一定出在客户端，可能在app.config 中。

我的客户端代码，以防万一有人想看它：

```
 [TestFixture]
    public class MyWsProxyFixture
    {
        private readonly MyWsClient _client = new MyWsClient();

        [Test]
        public void ProxyCreation()
        {
            Assert.IsNotNull(_client);
        }

        //More tests here
} 
```

更有趣的是，完全相同的配置和客户端在另一台机器上工作。是的，它是真实的。我自己都不敢相信，但事实就是如此。

你能给出一些提示或建议来解决这个问题吗？
谢谢！

PS：客户端中的服务参考很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:22:49.927

据我所知，这可能是一个多项目配置问题：

如果您的解决方案中有多个项目，那么您必须将该配置文件放在使用 wcf 服务的特定项目的配置中。

假设您有 2 个项目，那么将有 2 个相应的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:56:26.993

结果发现问题根本不在 App.config 中。
事实上，同样的 App.config 在另一台机器上运行良好。
问题出在 Nunit 上。默认情况下，它使用“影子复制”设置复制临时文件夹中的所有 dll 并从那里执行二进制文件。我无法理解的是为什么它会复制 dll 而不是 .config。这毫无意义！
在我将影子副本设置为 false 后，它也开始在我的机器上工作。

PS：客户端在其他机器上工作，因为环境在 Resharper 下运行，默认情况下会关闭卷影副本。
现在有道理了！

希望这可以帮助有同样愚蠢问题的人

# java - Axis 2 从 WSDL 自动生成的类不会被编译

> ID：15269672
> 
> 赞同：0
> 
> 时间：2013-03-07T11:13:16.140
> 
> 标签：java, web-services, wsdl, axis2

我正在尝试使用 Axis 2 为 Java 中的 Web 服务创建客户端。

我尝试通过两种方式从 wsdl 生成类：

**第一种方式**

通过输入有效的命令`wsdl2java -uri *pathToWsdl*`，类已经生成，但它们不会被编译，我有一个错误：

> 未为类型 ConverterUtil 定义方法 convertToPHMaterialMaster_type0(String)

在线：

```
object.setPHMaterialMaster(org.apache.axis2.databinding.utils.ConverterUtil.convertToPHMaterialMaster_type0(content)); 
```

确实，在查看了`ConverUtil`类的规范之后，我找不到方法

```
converToPHMaterialMaster_type0 
```

另外，我收到一个错误

> convertToPHCustomerMaster_type0(String) 方法

**第二种方式**

按照[本教程](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html#comment-form)。我尝试从 eclipse 生成类。它们是生成的，但同样，我得到了同样的错误。

我还尝试按照该教程中的描述从头开始创建 Web 服务和客户端，并且效果很好。但是当我使用客户提供给我的 wsdl 时，我得到了这些错误。

我是 Web 服务的新手，所以我可能遗漏了一些非常重要的东西。

那么，我应该去哪里寻找问题呢？

*编辑：*我刚刚使用 Eclipse WSDL 验证器检查了 WSDL - 它是有效的。

*EDIT2：*我使用了 ADB 数据绑定

*EDIT3：*不幸的是，我不知道如何找到相关部分，所以[这里](http://dl.dropbox.com/u/3396301/CatalogServices-1.1.0.wsdl)是完整的 wsdl 文件

# php - 是否有任何在线工具或可以简化此 MySQL SELECT 查询的人？

> ID：15269676
> 
> 赞同：0
> 
> 时间：2013-03-07T11:13:29.387
> 
> 标签：php, mysql, select

我正在为图书馆的搜索框编写一个自动建议，它非常慢。有没有在线工具或者愿意帮我优化的人？

```
 SELECT *,
       grbc_books.id book_id
FROM   grbc_books
       LEFT JOIN grbc_series
              ON grbc_books.series_id = grbc_series.id
       JOIN grbc_collections
         ON grbc_books.collection_id = grbc_collections.id
       LEFT JOIN grbc_places
              ON grbc_books.place_id = grbc_places.id
       RIGHT JOIN grbc_books_subjects
               ON grbc_books_subjects.book_id = grbc_books.id
       LEFT JOIN grbc_subjects
              ON grbc_books_subjects.subject_id = grbc_subjects.id
       RIGHT JOIN grbc_books_authors
               ON grbc_books_authors.book_id = grbc_books.id
       LEFT JOIN grbc_authors
              ON grbc_books_authors.author_id = grbc_authors.id
                 AND ( ( title LIKE "%yea%" )
                        OR ( subtitle LIKE "%yea%" )
                        OR ( series LIKE "%yea%" )
                        OR ( `subject` LIKE "%yea%" )
                        OR ( `first` LIKE "%yea%" )
                        OR ( `last` LIKE "%yea%" )
                        OR ( place LIKE "%yea%" ) )
GROUP  BY `title`,
          subtitle
ORDER  BY title
LIMIT  10; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:17:08.003

将“*”替换为您真正需要的列...现在您将获得所有表的所有列！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:21:00.590

这里的主要放缓将是`LIKE '%yea%'`条件。（另外——它们不应该在一个`WHERE`子句中，而不是最后一个`LEFT JOIN ... ON...`子句中吗？）这种查询的问题是 MySQL 不能使用任何索引来查找必要的行。每次都需要进行全面扫描。正确的解决方案是使用[全文索引](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)。

此外，正如[Oli 建议](https://stackoverflow.com/a/15269758/41360)的那样，删除`*`可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:26:18.147

正如其他人提到的那样，LIKE 可能是您的瓶颈。我的建议是让你开始使用 MATCH AGAINST 而不是 like。 [http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T11:35:16.027

请注意，“%yea%”不能使用索引，因此效率低下，但“yea%”可以，因此速度更快。

请记住，如果有可能其中没有关联的数据，您只需要外部连接一个表。我不知道您的数据结构，但对于像主题和作者这样的表，这似乎不太可能。

如果我正在编写这个查询，而不是切换到使用 FULLTEXT，那么我希望它看起来像这样......

```
 SELECT DISTINCT b.title
               , b.subtitle
               , b.id book_id
   FROM grbc_books b
   JOIN grbc_collections c
     ON c.id = b.collection_id
   JOIN grbc_books_subjects bh
     ON bh.book_id = b.id
   JOIN grbc_subjects h
     ON h.id = bh.subject_id 
   JOIN grbc_books_authors ba  
     ON ba.book_id = b.id
   JOIN grbc_authors a
     ON a.id = ba.author_id 
   LEFT 
   JOIN grbc_series s
     ON s.id = b.series_id
    AND s.series  LIKE "%yea%" 
   LEFT 
   JOIN grbc_places p
     ON p.id = b.place_id 
    AND p.place   LIKE "%yea%" 
  WHERE b.title LIKE "%yea%" 
     OR b.subtitle LIKE "%yea%" 
     OR h.subject LIKE "%yea%" 
     OR a.first LIKE "%yea%" 
     OR a.last LIKE "%yea%" 
  ORDER  
     BY b.title
  LIMIT 10; 
```

...但是我的猜测是，这只会对性能产生很小的影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T11:35:27.610

通过从等式中删除数据库来“优化”全文搜索。您的选择是：

*   索尔
*   弹性搜索
*   狮身人面像

当涉及到全文搜索时，关系数据库非常慢，您对此无能为力。如果您预计流量较小并且您可以接受缓慢，请尝试将索引添加到您的文本字段。它会使 INSERT 语句与数据量成比例地变慢。

最后，您可以通过在语句之前添加“EXPLAIN”来解决您的查询：

```
EXPLAIN SELECT *,
       grbc_books.id book_id
FROM   grbc_books
       LEFT JOIN grbc_series
              ON grbc_books.series_id = grbc_series.id
       JOIN grbc_collections
         ON grbc_books.collection_id = grbc_collections.id
       LEFT JOIN grbc_places
              ON grbc_books.place_id = grbc_places.id
       RIGHT JOIN grbc_books_subjects
               ON grbc_books_subjects.book_id = grbc_books.id
       LEFT JOIN grbc_subjects
              ON grbc_books_subjects.subject_id = grbc_subjects.id
       RIGHT JOIN grbc_books_authors
               ON grbc_books_authors.book_id = grbc_books.id
       LEFT JOIN grbc_authors
              ON grbc_books_authors.author_id = grbc_authors.id
                 AND ( ( title LIKE "%yea%" )
                        OR ( subtitle LIKE "%yea%" )
                        OR ( series LIKE "%yea%" )
                        OR ( `subject` LIKE "%yea%" )
                        OR ( `first` LIKE "%yea%" )
                        OR ( `last` LIKE "%yea%" )
                        OR ( place LIKE "%yea%" ) )
GROUP  BY `title`,
          subtitle
ORDER  BY title 
```

如果您决定继续使用数据库方法，请考虑缓存以不重复查询。

# process - 如何在 WMI 中获取所有用户进程

> ID：15269677
> 
> 赞同：3
> 
> 时间：2013-03-07T11:13:32.087
> 
> 标签：process, wmi

我想获取任务管理器进程（系统、管理员、网络服务和本地服务）中所述的所有用户进程。

我需要通过 WMI 获取它，我找不到每个进程的用户名，我检查了 wmi 进程和任务管理器进程，wmi 仅显示管理员进程。

你能帮我获取所有用户的进程列表吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:43:08.307

您可以浏览[Win32_Process 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)以获取进程详细信息：

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
                ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher("root\\CIMV2", 
                    "SELECT * FROM Win32_Process"); 

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_Process instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Caption: {0}", queryObj["Caption"]);
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

或在 c# 中，不使用`WMI`：

```
Process[] processlist = Process.GetProcesses();
foreach(Process theprocess in processlist)
  {
    Console.WriteLine(“Process: {0} ID: {1}”, theprocess.ProcessName, theprocess.Id);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T08:54:27.053

也许有点晚了，但我认为可以通过 Win32_Process 类的 GetOwner() 方法使用 WMI，该方法检索用户名和域（下面的代码不是我的，我是从[http://social.msdn 中提取的。 microsoft.com/Forums/en-US/d842c407-18f5-478b-8c4f-7e14ac4f​​bbe6](http://social.msdn.microsoft.com/Forums/en-US/d842c407-18f5-478b-8c4f-7e14ac4fbbe6/get-owner-of-curently-runing-procesess) /get-owner-of-curently-runing-processes ）：

```
using System;
using System.Diagnostics;
using System.Management;   // Add reference to System.Management!!

class Program {
  static void Main(string[] args) {
    ManagementObjectSearcher searcher =
         new ManagementObjectSearcher("root\\CIMV2",
         "SELECT * FROM Win32_Process");

    foreach (ManagementObject queryObj in searcher.Get()) {
      ManagementBaseObject outParams =
         queryObj.InvokeMethod("GetOwner", null, null);
      Console.WriteLine("{0} owned by {1}\\{2}", queryObj["Name"],
        outParams["Domain"], outParams["User"]);
    }
    Console.ReadLine();
  }
} 
```

此外，如果您有兴趣，可以使用以下代码使用 vbscript 来确定运行进程的帐户名称（有关更多详细信息，请参见下面的页面[http://msdn.microsoft.com/en-us/library/ aa394599(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa394599(v=vs.85).aspx) ):

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & strComputer & "\root\cimv2")
Set colProcessList = objWMIService.ExecQuery _
    ("Select * from Win32_Process")
For Each objProcess in colProcessList
    colProperties = objProcess.GetOwner( _
        strNameOfUser,strUserDomain)
    Wscript.Echo "Process " & objProcess.Name _
        & " is owned by " _ 
        & strUserDomain & "\" & strNameOfUser & "."
Next 
```

希望能帮助到你！

# symfony - 在登录表单上禁用 CSRF 令牌

> ID：15269680
> 
> 赞同：17
> 
> 时间：2013-03-07T11:13:44.023
> 
> 标签：symfony, login, csrf, fosuserbundle, symfony-2.0

我正在使用 Symfony2.0 和 FOSUserBundle，并且想在我的登录表单上禁用 csrf 令牌。

我在 config.yml 中的网站上全局禁用了 csrf 保护：

```
framework:
    csrf_protection:
        enabled:        false 
```

这很好用，我的表单中没有添加 csrf 字段。但是，这不适用于登录表单。仅在此表单上，如果我未在表单中包含以下令牌，则会收到“无效的 CSRF 令牌”错误：

```
<input type="hidden" name="_csrf_token" value="{{ csrf_token }}" /> 
```

如何在登录表单上禁用 CSRF 令牌？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-07T11:16:47.117

您可以通过`'csrf_protection' => false`在其选项数组中设置来禁用表单类中的 CSRF 保护：

```
class LoginType extends AbstractType
{
    // ...

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class'      => 'Acme\UserBundle\Entity\User',
            'csrf_protection' => false
        );
    }

    // ...

} 
```

如果您使用 FormBuilder 而不是 AbstractType 类来创建表单，则可以将 options 数组作为第二个参数传递，`createFormBuilder()`如下所示：

```
$form = $this->createFormBuilder($users, array('csrf_protection' => false))
        ->add( ... )
        ->getForm(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-11T14:18:43.847

如果您只是转到您的 security.yml 文件并从 form_login 指令中删除 csrf_provider，则不需要更新操作类或任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T19:39:50.513

如果您正在使用 FOSUserBundle，并且您希望仅在登录表单上禁用 CSRF 保护，则需要遵循几个步骤。

步骤 1) 创建您自己的用户包和安全控制器文件

为了覆盖 FOSUserBundle 中内置的 SecurityController，您必须首先创建自己的用户包。

因此，创建一个名为 app/src/{YourApp}/UserBundle/Controller/SecurityController.php 的文件您应该扩展原始的 SecurityController 类，并复制 loginAction 方法

```
use FOS\UserBundle\Controller\SecurityController as SecurityControllerOrig;
class SecurityController extends SecurityControllerOrig
{
   public function loginAction(Request $request)
   {
   }
} 
```

在 loginAction 方法中，注释掉或删除这些行：

```
$csrfToken = $this->container->has('form.csrf_provider')
        ? $this->container->get('form.csrf_provider')->generateCsrfToken('authenticate')
        : null; 
```

然后确保没有任何东西被传递给查看 CSRF 令牌：

```
return $this->renderLogin(array(
        'last_username' => $lastUsername,
        'error'         => $error,
        'csrf_token' => false,
    )); 
```

步骤 2) 在 Symfony 的防火墙 (security.yml) 中禁用 CSRF 检查

确保注释掉 security.yml 中现有的“csrf_provider:”行：

```
firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                #csrf_provider: form.csrf_provider 
```

步骤 3) 覆盖 FOSUserBundle 的安全控制器 (routing.yml) 的路由

在 routing.yml 中，注释掉这些行：

```
fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"
    options:
        expose: true 
```

在注释掉的行下面添加这些行：

```
#Over-ride the SecurityController of the FOSUserBundle:
fos_user_security_login:
  path: /login
  defaults:  { _controller: YourAppUserBundle:Security:login }
  methods:  [GET]
  options:
    expose: true

fos_user_security_check:
  path: /login_check
  defaults:  { _controller: FOSUserBundle:Security:check }
  methods:  [POST]
  options:
    expose: true

fos_user_security_logout:
  path: /logout
  defaults:  { _controller: FOSUserBundle:Security:logout }
  methods:  [GET]
  options:
    expose: true 
```

注意 1：我只要求它使用自定义 SecurityController 中的 loginAction 方法。其他两种方法转到父类（不确定是否有区别）。

注意2：您需要“expose：true”部分！否则，你会从 fos js 路由包中得到一个 JavaScript 错误。

应该这样做！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:04:15.453

我必须[覆盖 FOSUserBundle 的 SecurityController](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_controllers.md) loginAction，其中登录表单被实例化。

我更换了：

```
$csrfToken = $this->container->get('form.csrf_provider')->generateCsrfToken('authenticate');

return $this->container->get('templating')->renderResponse('FOSUserBundle:Security:login.html.'.$this->container->getParameter('fos_user.template.engine'), array(
        'last_username' => $lastUsername,
        'error'         => $error,
        'csrf_token' => $csrfToken,
    )); 
```

和：

```
return $this->container->get('templating')->renderResponse('FOSUserBundle:Security:login.html.'.$this->container->getParameter('fos_user.template.engine'), array(
        'last_username' => $lastUsername,
        'error'         => $error,
        'csrf_token' => false,
    )); 
```

# python - Python Tkinter Canvas 无法绑定键盘

> ID：15269682
> 
> 赞同：10
> 
> 时间：2013-03-07T11:13:55.523
> 
> 标签：python, tkinter

我一直在运行这样的小脚本

```
from Tkinter import *
root = Tk()
def callback(event):
    print "callback"
w = Canvas(root, width=300, height=300)
w.bind("<Key>", callback)
w.pack()
root.mainloop() 
```

但是，在我的情况下没有处理键盘事件（我在窗口 7 上使用 python 2.7）

如果我使用

```
w.bind("<Button-1>", callback) 
```

一切正常。

所以，这真的让我很困惑。请任何人告诉我为什么会这样，在此先感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T12:15:39.690

键绑定仅在具有键盘焦点的小部件获得键事件时触发。默认情况下，画布*不会*获得键盘焦点。您可以使用该`focus_set`方法对其进行重点关注。通常，您会在鼠标按钮的绑定中执行此操作。

将以下绑定添加到您的代码中，然后在画布中单击，您的键绑定将开始工作：

```
w.bind("<1>", lambda event: w.focus_set()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-14T22:15:25.363

为了避免“单击画布以激活键绑定”，我在以下站点找到了更简单的代码：

[http://ubuntuforums.org/showthread.php?t=1378609](http://ubuntuforums.org/showthread.php?t=1378609)

他正在尝试绑定一个框架，但我在自己的代码中实现了它，并且画布小部件也可以工作。您的代码将如下所示：

```
w.focus_set()
w.bind(<Key>, callback) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-25T19:33:13.293

tkinter 中有一个名为“Enter”的方便事件，它跟踪鼠标何时进入小部件。如果将它绑定到画布，并且在该事件的绑定回调中使用 canvas.focus_set，那么只要鼠标在画布上，您就会获得焦点，因此键盘绑定将起作用。

即使画布失去焦点（例如通过在另一个小部件中输入文本），这也会起作用，因为当鼠标再次进入画布时，它将重新获得焦点。

# eclipse-rcp - eclipse rcp文本框中的十进制值

> ID：15269687
> 
> 赞同：0
> 
> 时间：2013-03-07T11:14:00.470
> 
> 标签：eclipse-rcp

我有一个带小数点的数字（类似于 1256122.234589238），但是 swt 文本小部件 ( `org.eclipse.swt.widgets.Text`) 不显示小数点后的所有数字，而是仅显示小数点后的 3 个数字（如上述数字的 1,256,122.235）。

我有这样的代码（定义 swt 文本）：

```
textField = new Text(parent, SWT.BORDER);
GridDataFactory.fillDefaults().grab(true, false).applyTo(textField);
GridData gridData = new GridData(GridData.FILL, GridData.CENTER, true, false);
gridData.horizontalSpan = 2;
textField.setLayoutData(gridData); 
```

任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:47:58.580

您可能有一些侦听器会阻止将文本添加到文本字段中。请核实。

# android - Android Viewpager 性能

> ID：15269688
> 
> 赞同：2
> 
> 时间：2013-03-07T11:14:09.777
> 
> 标签：android, android-viewpager

我目前正在使用`ViewPager`带有`FragmentStatePager`适配器的 a，大约有 25 个不同的片段（和不同的`relativelayouts`）。当我滚动时，我通常会在滑动到某些视图时注意到明显的延迟，除非我声明`viewpager.setoffscreenpagelimit(25)`. 有没有办法在`viewpager`不加载所有页面的情况下提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:19:36.457

使用开箱即用的 ViewPager 将加载最多三个片段/视图。留在那个号码。慢的不是 ViewPager，而是您在代码中执行的操作使其变慢。您的任何 Fragment 是否执行任何阻塞或消耗 CPU 的任务？例如加载位图？您是否有一些可以在 AsyncTask 中完成的解析？也许您可以将这些东西放在其他地方并将其保存到数据库中，然后当您加载 Frament 时，如果从数据库中读取，它将保持非常干净和高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:20:53.837

您能否为您的问题添加更多细节？例如，您在每个页面中都在做什么？

您是否已更新到最新的[Android 支持库](http://developer.android.com/tools/extras/support-library.html)？

v4 支持库的更改：

*   改进了 ViewPager 的交互行为。
*   修复了可能导致 ViewPager 选择错误页面的错误。
*   修复了在 ViewPager 布局期间使用 removeView() 方法。
*   修复了 SearchViewCompat 使用后退按钮关闭搜索文本时无法清除的问题。此修复仅适用于主机 API 级别 14 及更高级别。

您必须始终记住 FragmentStatePagerAdapter 会自动保存页面并在不使用时将其删除。因此，如果您快速滑动，将会有很多页面加载/卸载。您可以尝试增加内存中加载的页面数量。

# iphone - 搜索 NSArray 包含 NSDictionary，具有“时间效率”

> ID：15269691
> 
> 赞同：3
> 
> 时间：2013-03-07T11:14:12.607
> 
> 标签：iphone, nsarray, nsdictionary, nspredicate, cfarraybsearchvalues

我知道已经有很多问题被问到了，但是我要再提出一个问题。我有一个数组包含大量（数千条记录）`NSDictionary`格式的数据，我正在尝试在字典中的键中执行搜索到数组中。

我正在`UITextField` `- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;` 数据源方法中执行搜索，

我的搜索要求在整个字符串中，

示例字符串，

> aaa, abeb, abcd, abbec 类似字符串

搜索流程，

如果`a`返回我所有的字符串，

如果`aa`只返回 aaa，

如果`ab`返回`abeb, abcd, abbec`喜欢，

重要的是，如果`cd`它只返回 abcd

我用这些方法试过了，

使用**NSPredicates**

```
NSLog(@"start search at : %@",[NSDate date]);
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Name contains[cd] %@", matchString];
searchArray = [[meadArray filteredArrayUsingPredicate:predicate] mutableCopy];
NSLog(@"Search found count = %d",searchArray.count);
[tableCheck reloadData];
NSLog(@"End search at : %@",[NSDate date]); 
```

另一种方式 - 通过**迭代**，

```
NSLog(@"start search at : %@",[NSDate date]);
for (NSDictionary *word in arrayNames)
{
    if ([matchString length] == 0)
    {
        [searchArray addObject:word];
        continue;
    }
    NSRange lastRange = [[[word valueForKey:@"Name"] uppercaseString] rangeOfString:upString];

    if ( lastRange.location != NSNotFound)
    {
        if(range.location == 0 || lastRange.location == 0)
        {
            [searchArray addObject:word];
        }
    }
}    
NSLog(@"End search at : %@",[NSDate date]); 
```

这两种方法都运行良好，结果如我所料，但仅在模拟器中！当我在设备中测试相同的内容时，根据搜索的扩展，它大约需要 1 / 2 / 3 秒，首先说如果我输入，`a`它需要 3 秒，因为`aa`它需要大约 2 秒，依此类推。`IT LOOKS CLUMSY ON DEVICE, ANY PRESSED KEY WILL BE REMAIN HIGHLIGHTED UNTIL SEARCH NOT DONE`.

有什么方法可以让我使用我正在使用的相同方法或任何其他替代方法执行更快的搜索！

**更新 1**

还尝试使用**CFArrayBSearchValues**它只返回搜索字符串的索引，但我想要返回所有匹配的字符串的东西。

```
unsigned index = (unsigned)CFArrayBSearchValues((CFArrayRef)meadArray, CFRangeMake(0, CFArrayGetCount((CFArrayRef)meadArray)), (CFStringRef)matchString,(CFComparatorFunction)CFStringCompare, NULL); 
```

**更新 2**

As per the `Alladinian` comment, I performed search operation in background thread, **yes now its not lock UI, but still searching is too slow,** What I'm doing is, performing a selector for some delay say 0.25 seconds, also cancelling any previous selector calls, and then performing searching in background, also reloading table in main thread. Its working like, If I type character with some delay, its works good, but if I type whole word at once, it will loading / updating table as per the characters pressed, at last it will show me the actual output, takes 3-4 seconds for showing the actual content.

Any suggestion or help highly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T13:02:28.523

Your search is slower than it needs to be. searchString.length shouldn't be checked in the loop, that should be done outside. valueForKey: is a very general method that allows you to access any kinds of different key paths - objectForKey is a lot lot faster! Next, your check for a case sensitive match always translates the whole word to uppercase. That's not only incorrect once your users enter some more interesting search strings, but it's also slow and memory intensive (if there are thousands of strings, you are creating thousands of auto-released objects). Use rangeOfString:options: instead.

Finally, you can try the NSArray methods enumerateObjectsUsingBlock: or enumerateObjectsWithOptions:usingBlock: which allows the enumeration to happen on multiple threads.

indexesOfObjectsPassingTest: or indexesOfObjectsWithOptions:passingTest: gets the indexes of the elements you are looking for, which will be faster. This is especially useful if you do another search for a longer string, for example searching for abc after searching for ab, because there are NSArray methods restricting a search to an index set.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:48:42.340

I have used sqlite's [Full Text Search modules](http://www.sqlite.org/fts3.html) in several projects and they work extremely well. It will require providing your own compiled version of sqlite, which can be a bit tricky - but the whole process is explained [here](http://longweekendmobile.com/2010/06/16/sqlite-full-text-search-for-iphone-ipadyour-own-sqlite-for-iphone-and-ipad/).

Depending on what you need to do, you may want to pre-fill this database, or insert data as you receive it - or some combination of both. Trying to program a solution yourself would be an interesting exercise, but you would be reinventing algorithms that already exist in sqlite FTS.

If you are doing a search-as-you-type, you have to make sure you are queuing your operations properly in the background and that they are cancellable - there are many ways to pull this off; [a very popular one uses NSOperation](https://stackoverflow.com/questions/2840406/nsoperations-or-nsthread-for-bursts-of-smaller-tasks-that-continuously-cancel-ea).

Hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:53:47.437

This answer is following `anktastic` answer, I am also adding my answer because someone will directly get a solution for which we made lots of effort :)

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{
    //Cancel any previous selector calls
    [NSRunLoop cancelPreviousPerformRequestsWithTarget:self];

        if(string.length > 0)
        {
            NSString *str = [txt1.text substringToIndex:[txt1.text length] - 1];
            //delay is useful in smooth search - if you're performing web service calls for searching on cloud, then you should give delay as per your test
            [self performSelector:@selector(startSearch:) withObject:str afterDelay:0.05f];
        }
    }
}

- (void) startSearch:(NSString *)matchString
{
    //Cancel any previous operation added in queue
    [queue cancelAllOperations];
    //Create new operation
    NSInvocationOperation* operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(search:) object:matchString];
    [queue addOperation:operation];
}

- (void) search:(NSString *)matchString
{
    //Performing search operation
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Name contains[cd] %@", matchString];
    searchArray = [[meadArray filteredArrayUsingPredicate:predicate] mutableCopy];
    //only call again after any previous reload done
    [self performSelectorOnMainThread:@selector(reloadInMainThread) withObject:nil waitUntilDone:YES];
}

- (void) reloadInMainThread 
{
    //Reloading table in main thread for instance search effect
    [tableCheck reloadData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:31:59.533

Does the strings in array/dictionary change? If not, I suggest that you extract all keys in dictionary to a single array. Do this before you search, and you only need to do this once.

If I didn't misunderstood your question, my suggestion is like this:

```
NSArray *arrayOfDicts = /*the array with dictionarys you have*/

NSMutableArray *allKeys = [NSMutableArray array]

for (NSDictionary *d in arrayOfDicts) {
     for (NSString *key in d) {
          [allKeys addObject:key];
     }
} 
```

then search the allKeys array.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T09:03:22.947

Case insensitive string comparison is slower than case sensitive comparison. You could store `uppercaseName` as an additional key in your dictionaries (or as additional column in the sqlite table) and change the predicate to

```
[NSPredicate predicateWithFormat:@"uppercaseName CONTAINS %@", [matchString uppercaseString]] 
```

# gwt - 如何在 GWT Bootstrap Modal 关闭时销毁它

> ID：15269693
> 
> 赞同：0
> 
> 时间：2013-03-07T11:14:15.463
> 
> 标签：gwt, gwt-bootstrap

我有一些数据显示在 CellTable 中，其中一列是可点击的。[单击该列时，我会在Modal](http://gwtbootstrap.github.com/gwt-bootstrap/apidocs/com/github/gwtbootstrap/client/ui/Modal.html)内的另一个 CellTable 中显示与其关联的数据。

我为此设置了一个 UIBinder 元素。

在 FieldUpdater 中，我创建了一个 UIBinder 元素的新实例，在它关闭后，我希望它被销毁或从`DOM`. 这个元素有一个[GWT Bootstrap](http://gwtbootstrap.github.com/gwt-bootstrap/apidocs/com/github/gwtbootstrap/client/ui/Modal.html) Modal

现在发生的事情是它被隐藏了，当我单击时，新实例被创建。我认为当数据的大小增加和应用程序的长时间使用时，这将是一个问题。

我想知道如何重新打开现有元素或在元素关闭后将其销毁。我找不到任何类似的活动`onClose`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:49:58.627

“setDynamicSafe”不正是你想要的吗？

> 设置模态以防止内存泄漏。当 modal 被隐藏时，将移除所有事件处理程序，它们会从文档 DOM 中移除 modal DOM。默认为假。
> 
> 参数：动态安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:31:30.857

您可以覆盖 hide() 方法。

如果要发送 onClose 事件，请创建[自定义事件](https://stackoverflow.com/questions/2951621/gwt-custom-events)。

# java - 通过代理使用 netty 3.4.2.Final

> ID：15269695
> 
> 赞同：2
> 
> 时间：2013-03-07T11:14:20.640
> 
> 标签：java, netty, socks

有没有可能使用这里描述的 Netty：http: [//docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

也许有一些选择，例如：

```
System.getProperties().put("socksProxySet","true");
System.getProperties().put("socksProxyHost","127.0.0.1");
System.getProperties().put("socksProxyPort","1080"); 
```

我试过了，但 netty 不接受属性，也不通过 socks 代理代理请求。

```
ChannelFuture future =
                    bootstrap.connect(
                            new InetSocketAddress(uri.getHost(), uri.getPort())); 
```

我的 netty 客户端通过 websockets 连接到 netty 服务器。

Java NIO 不支持代理。Netty 基于 Java NIO。我只是希望这种可能性存在/可以添加到netty。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:19:04.093

这很简单。您必须使用自己的处理程序创建您的侦听器。示例可以在这里找到： [https ://github.com/shenfeng/async-http-client](https://github.com/shenfeng/async-http-client)

类：

me.shenfeng.http.ConnectionListener
me.shenfeng.http.SocksHandler

来自 3.6.2.final 的 Netty 包含包 *.socks： [http](http://netty.io/4.0/api/io/netty/handler/codec/socks/package-summary.html) ://netty.io/4.0/api/io/netty/handler/codec/socks/package-summary.html 。
所以这个对象模型可以用来编码/解码 socks 消息到/来自 socks 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T14:40:31.473

由于您使用从客户端到服务器的 WebSockets 连接，并且 web-sockets 协议基于 HTTP，因此这种结构应该可以工作（它与您编写的略有不同）：

```
//System.setProperty("socksProxySet","true"); //it's commented, because it seems to be not necessary
System.setProperty("socksProxyHost","127.0.0.1");
System.setProperty("socksProxyPort","1080"); 
```

但是正如您所说，它不适合您，那么我建议您查看官方 netty 的代理[示例](https://github.com/netty/netty/tree/3.2/src/main/java/org/jboss/netty/example/proxy)。

# matlab - 连接到远程 Matlab：本地 GUI、远程代码

> ID：15269702
> 
> 赞同：3
> 
> 时间：2013-03-07T11:14:36.030
> 
> 标签：matlab, remote-access

在 Python 中，我可以[连接到远程内核](https://stackoverflow.com/a/15268945/974555)。

是否可以在 Matlab 中做同样的事情？当然，我可以[通过 SSH 登录，然后运行图形化 Matlab](https://stackoverflow.com/a/6409050/974555)，但这很慢。我也可以使用命令行版本（这是我通常做的），但是交互式调试等要困难得多。

是否可以在本地拥有 GUI 和所有内容，但远程运行 Matlab？如果是，这需要一个或两个许可证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:40:10.600

您可以通过 COM 自动化连接到远程 Matlab 进程。GUI 可以在本地运行一切，实例化 COM 对象并请求远程 Matlab 进程上的计算。

我认为调试会很尴尬，并且可能会消耗另一个许可证。

# java - 无法在 Netbeans 7.3 中测试 RESTful Web 服务，如何去除路径上多余的“/”

> ID：15269703
> 
> 赞同：1
> 
> 时间：2013-03-07T11:14:38.313
> 
> 标签：java, rest, netbeans, jboss

也许是愚蠢的问题，但无论如何我都会尝试：

我正在使用 Netbeans 7.3，我想从 IDE 测试 RESTful Web 服务。

一旦我右键单击我的服务并说“测试资源 Uri”，我会收到以下消息：

无法打开资源 URL：

```
http://localhost:8080//ads-api/rs/ads 
```

ads-api 是我的战争文件的名称

出于某种原因，Netbeans 在路径中添加了额外的“/”，就在端口号之后。

即使我在配置中将路径指定为 ads-api/rs，它也总是被 /ads-api/rs 覆盖。所以，我想，我应该去掉“/”，`http://localhost:8080/`但我不知道在哪里可以找到它（它是从命令行运行的 JBoss 4.2，虽然在 Netbeans 中可见）

谁能帮我？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T10:00:03.097

双斜杠不是问题，您可以在此处重现：

[http://news.yahoo.com/world/](http://news.yahoo.com/world/)

[http://news.yahoo.com//world/](http://news.yahoo.com//world/)

两个链接都工作正常。因此，要么您的 JBoss-Server 存在问题，要么更有可能是您项目中的其余配置存在问题。您可以尝试让 Ne​​tbeans 使用基于实体类或数据库表的向导自动为您创建其余端点。所以你可以看看一个可行的解决方案，只是为了学习。

# java - 如何在 Android 中获取传入和传出彩信的总数？

> ID：15269710
> 
> 赞同：0
> 
> 时间：2013-03-07T11:14:53.667
> 
> 标签：java, android

我正在尝试获取 Android 中传出和传入彩信的总数。我已尝试搜索有关如何执行此操作的信息，但无法找到有效的解决方案。任何人都可以提供有关我将如何实现这一目标的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:56:50.317

```
Uri mmsUri = Uri.parse("content://mms");

//msg_box is the equivalent of type in SMSs, 1=Inbox and 2=sent
Cursor mmsCursor = getContentResolver().query(mmsUri,new String[] {"_id","msg_box"}, "msg_box=1 OR msg_box=2", null, null);
int mmsCount = mmsCursor.getCount(); 
```

或者

```
Uri mmsInboxUri = Uri.parse("content://mms/inbox");
Uri mmsSentUri = Uri.parse("content://mms/sent");

Cursor mmsInboxCursor = getContentResolver().query(mmsInboxUri ,new String[] {"_id"},  null, null);
Cursor mmsSentCursor = getContentResolver().query(mmsSentUri ,new String[] {"_id"}, null, null);
int mmsCount = mmsInboxCursor.getCount() + mmsSentCursor.getCount(); 
```

第二个应该可以工作，我对第一个不太确定，我无法真正测试它，但如果第一个工作，使用它，它应该更有效。

# javascript - 通过 api 返回列表将选项卡添加到页面，但通过浏览器 ping 请求返回 true

> ID：15269714
> 
> 赞同：0
> 
> 时间：2013-03-07T11:15:01.130
> 
> 标签：javascript, facebook, facebook-graph-api, tabs, facebook-javascript-sdk

我正在尝试向页面添加选项卡，facebooks graph api 声明应发出具有以下参数的请求：

```
/PAGE_ID/tabs?app_id=MY_APP_ID&method=post&access_token=PAGE_ACCESS_TOKEN 
```

当我将它与 FB.api 一起使用时：

```
FB.api("/PAGE_ID/tabs?app_id=MY_APP_ID&method=post&access_token=PAGE_ACCESS_TOKEN", function(response) {

}); 
```

响应只是页面上的选项卡列表，但是当我转到浏览器并输入相同的内容时：

```
https://graph.facebook.com/PAGE_ID/tabs?app_id=MY_APP_ID&method=post&access_token=PAGE_ACCESS_TOKEN 
```

相同的请求仅手动返回 true 并添加一个选项卡。

**注意：** 我有页面访问令牌和页面 ID，如此处的说明**[，](https://developers.facebook.com/docs/reference/api/page/#tabs)** “创建”小节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:26:48.617

> 响应只是页面上的选项卡列表

这就是你得到的 GET 请求`/pageid/tabs`。

所以这表明你的参数`method=post`没有被正确识别，因此没有 POST 而是发出了一个 GET 请求……你得到了页面的选项卡列表。

改用它，然后它应该可以工作：

```
FB.api("/PAGE_ID/tabs?app_id=MY_APP_ID&access_token=PAGE_ACCESS_TOKEN",
  "post",
  function(response) { console.log(response); }
); 
```

在这里通过第二个参数告诉 FB.api 要使用什么方法，只需将方法名称作为字符串传递，`"post"`.

刚刚使用我的页面和应用程序对此进行了测试——它只是`true`按预期在控制台中返回，然后该应用程序作为页面标签应用程序安装在页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:01:42.883

你可以试试这个代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>My Add to Page Dialog Page</title>
  </head>
  <body>
    <div id='fb-root'></div>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<p><a onclick='addToPage(); return false;'>Add to Page</a></p>
<p id='msg'></p>

<script> 
  FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

  function addToPage() {

    // calling the API ...
    var obj = {
      method: 'pagetab',
      redirect_uri: 'REDIRECT_URI',
    };

    FB.ui(obj);
  }

    </script>
  </body>
</html> 
```

# c# - 从 ViewModel (MVVM) 中的命令调用 HttpWebRequest

> ID：15269715
> 
> 赞同：0
> 
> 时间：2013-03-07T11:15:01.780
> 
> 标签：c#, mvvm, windows-phone-8, winrt-xaml

我第一次在我的应用程序中使用了 MVVM 模式。我创建了一个视图类、一个 viewModel 类和一个 Command 类。当我在 Button 的视图中单击时，我会在我的 viewModel 中启动绑定命令。在此命令中，我创建了一个 HttpWebRequest，以将来自 Web 服务的新闻作为 json 对象加载。在“GetNewsResponseCallback”方法中，我将数据作为 json 流获取。序列化工作正常。当我在这个方法中调用'PropertyChanged(this, new PropertyChangedEventArgs("News"))'时，我得到一个 COMException。但我需要 PropertyChange 事件来更新我视图中的 Listview。我该如何解决这个问题？从我的命令启动服务是否正确？我是使用 MVVM 模式开发的新手。在下面我的代码中：

> ```
> <Canvas>
>     <Button Content="Aktualisieren"
>             Canvas.Top="20"
>             Canvas.Left="600"
>             Command="{Binding SynchronizeNewsCommand}"/>
> 
>     <ListView x:Name="viewBox"
>               ItemsSource="{Binding News}"
>               ItemTemplate="{StaticResource newsTemplate}"/>
> 
> </Canvas> 
> ```

```
public class MyCommand<T> : ICommand
    {
        readonly Action<T> callback;

        public MyCommand(Action<T> callback)
        {
            this.callback = callback;
        }

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;

        public void Execute(object parameter)
        {
            if (callback != null) { callback((T)parameter); }
        }

    }

public class NewsViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public ObservableCollection<NewsSerializer> News { get; set; }

        public MyCommand<object> SynchronizeNewsCommand { get; set; }

        public NewsViewModel()
        {
            SynchronizeNewsCommand = new MyCommand<object>(SynchronizeNews);
        }

        private void SynchronizeNews(object obj)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Constans.uri);
            request.ContentType = "application/json; charset=utf-8";
            request.Accept = "application/json";
            request.Method = "POST";
            request.BeginGetRequestStream(new AsyncCallback(GetNewsRequestStreamCallback), request);
        }

        private void SynchronizeFinished(object obj)
        {
            PropertyChanged(this, new PropertyChangedEventArgs("News"));
        }

        private void GetNewsRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            request.BeginGetResponse(new AsyncCallback(GetNewsResponseCallback), request);
        }

        private void GetNewsResponseCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();

            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(ObservableCollection<NewsSerializer>));
            News = (ObservableCollection<NewsSerializer>)ser.ReadObject(streamResponse);

            PropertyChanged(this, new PropertyChangedEventArgs("News"));
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:51:28.740

通常，在使用 ObservableCollection 时 - 您不会每次都重新创建它。您应该改为调用 Clear() （或删除已删除的项目），然后将新项目一一添加到其中。您的视图将自动收到更改通知，您无需调用 PropertyChanged

```
 private void GetNewsResponseCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        // End the operation
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();

        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(ObservableCollection<NewsSerializer>));
        var res = (IList<NewsSerializer>)ser.ReadObject(streamResponse);

        News.Clear();
        foreach(var item in res)
        {
            News.Add(item);
        }
    } 
```

在您的情况下，您还应该考虑通过实现 AddRange 方法来扩展 ObservableCollection 类。

# java - java中类似于fork()的函数

> ID：15269720
> 
> 赞同：0
> 
> 时间：2013-03-07T11:15:17.343
> 
> 标签：java, android, multithreading, android-fragments, fork

我正在为 Android 中的应用程序编写代码，并面临以下问题。

我必须重写一个内置函数`Fragment getItem(int position)`来返回图像的位图，但由于图像很大，加载需要很长时间。所以，UI 响应有点慢。为了解决这个问题，我认为可以像下面的代码一样解决。它基本上会立即返回一个空白图像，当加载真实图像时，它会返回正确的图像。

```
@Override
    public Fragment getItem(final int position) {
        pid = fork();  //NOT POSSIBLE / ERROR
        if (!pid)
            return  (code for empty image);
        return new ScreenSlidePageFragment(files[position].getAbsolutePath(), width, height);
    } 
```

但是，我不知道类似于`fork()`Java 的函数。你能帮我解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:31:31.137

在 Java 中，您将为此使用`Thread`该类。但是，如果您正在为 Android 开发，您可以考虑使用`AsyncTask`并参考官方的 android 开发人员培训

[从 UI 线程处理位图](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:17:37.557

在 Java 中，您无需分叉新进程，而是为此类情况打开线程。有关如何执行此操作的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:28:49.697

您可以定义一个 AsynTask 并在实现他的功能时执行类似的操作

```
public class imageLoader extends AsyncTask<Void, Void, Void>{

 protected preExecute(){
  //load the blank image
  //this function is executed on the UI thread
 }

 protected doInBackground(){
  //load the real one
  //that one is not executed on the UI thread
 }

 protected postExecute(){
  //set the new image 
  //this one is executed on the UI thread
 }
} 
```

# c# - 无法访问方法中的事务

> ID：15269722
> 
> 赞同：1
> 
> 时间：2013-03-07T11:15:21.550
> 
> 标签：c#, .net, vb.net, transactions, transactionscope

我创建了一个隐式事务，如下所示：

```
Using ts As New TransactionScope(TransactionScopeOption.Required, New TimeSpan(1, 0, 0, 0))

MethodA()
ts.Complete()

End Using 
```

`MethodA()`依次调用一些成功加入环境事务的方法，我可以看到它：

![在此处输入图像描述](../Images/ce9ccc4c8a4e331e441e99b4dfc7f7d2.png)

但是，一种方法（从`TransactionScope`上面的创建到调用堆栈的深度为 4）似乎我们不再可以访问环境事务：

![在此处输入图像描述](../Images/6ef6dd2c757c30e28fdf9eed0be91362.png)

我相信这将在事务中堆栈的任何较低位置可用，这可能是此方法中的代码无法访问此事务中的数据的原因。

任何想法为什么环境交易不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:18:33.627

如果`Transaction`未声明，则听起来该文件只是缺少`using`将其纳入范围的指令。尝试将手表设置为

```
System.Transactions.Trasaction.Current.TransactionTraceId.TransactionIdentifier 
```

相反，因为无论有没有`using`指令都可以。

如果是*环境事务不可用*的情况，那么`Transaction`仍然可以，但`Transaction.Current`可以`null`。一个常见的原因是任何切换线程的东西，例如`async`代码。了解执行上下文中的内容是很棘手的。

# java - 数组包含（）没有区分大小写的查找？

> ID：15269723
> 
> 赞同：22
> 
> 时间：2013-03-07T11:15:25.973
> 
> 标签：java, arrays

我可以以某种方式告诉 array.contains() 方法不要使查找区分大小写吗？

```
List<String> data = Arrays.asList(
  "one", Two", "tHRee"); //lots of entries (100+)

data.contains("three"); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-07T11:21:50.483

`contains`只需检查列表中是否存在对象。所以你不能在这里进行不区分大小写的查找，因为“三”与“三”是不同的对象。

解决这个问题的一个简单方法是

```
public boolean containsCaseInsensitive(String s, List<String> l){
     for (String string : l){
        if (string.equalsIgnoreCase(s)){
            return true;
         }
     }
    return false;
  } 
```

接着

```
containsCaseInsensitive("three", data); 
```

Java 8+ 版本：

```
public boolean containsCaseInsensitive(String s, List<String> l){
        return l.stream().anyMatch(x -> x.equalsIgnoreCase(s));
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T11:31:11.097

它将要求您编写自己的`contains()`方法。自定义指针`contains()`：

1.  遍历列表中的所有元素。
2.  将参数字符串与中的所有值进行比较
3.  要使比较不区分大小写，请务必在 BOTH 参数和当前元素上应用 toLowerCase 或 toUpperCase 中的任何一个。

    列表列表；公共布尔包含（字符串 str）{

    ```
     for(int i=0;i<list.size();i++){
           if(list.elementAt(i).toLowerCase().Equals(str.toLowerCase())) return true;
       }
    return false;
    } 
    ```

# ruby-on-rails - Guard Rspec Spork Rails 2 未启动

> ID：15269727
> 
> 赞同：0
> 
> 时间：2013-03-07T11:15:35.500
> 
> 标签：ruby-on-rails, ruby, rspec, guard, spork

我在**ruby​​-1.9.2-p180**上运行**rails** 2.3.14 我正在尝试让 guard rspec 运行。

 **我安装了相关的**gems**，这是我的文件内容，用于**Gemfile**、**/spec/spec_helper.rb**和**Guardfile**

* * *

### 宝石文件

```
group :test, :development do
  gem 'rspec-rails', '~> 1.3.2', :require => false
  gem 'simplecov', :require => false
end

group :test do
  gem 'test-unit', '1.2.3', :require => false # for rspec
  gem 'rspec', '~> 1.3.2', '~> 1.2', :require => false
  gem 'guard', :require => false
  gem 'rb-inotify', '~> 0.9', :require => false
  gem 'spork', '~> 0.8', :require => false
  gem 'guard-rspec', :require => false
  gem 'guard-spork', :require => false
  gem 'growl', :require => false      # notifications; optional
  gem 'listen', '>= 0.5.1', :require => false
  gem 'machinist', '~> 2.0', :require => false
  gem 'database_cleaner', '~> 0.9.1', :require => false
end 
```

* * *

### spec_helper.rb

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path(File.join(File.dirname(__FILE__),'..','config','environment'))
  require 'spec/autorun'
  require 'spec/rails'
end

Spork.each_run do
  Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each { |f| require f }
end

Spec::Runner.configure do |config|  
  config.use_transactional_fixtures = true
  config.use_instantiated_fixtures  = false
  config.fixture_path = RAILS_ROOT + '/spec/fixtures/'
end 
```

* * *

### 保护文件

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch('config/environments/test.rb')
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb') { :rspec }
  watch('test/test_helper.rb') { :test_unit }
  watch(%r{features/support/}) { :cucumber }
end

guard 'rspec', :version => 1 do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara request specs
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/requests/#{m[1]}_spec.rb" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
end 
```

* * *

当我跑

> 耙规格

**它工作正常**

* * *

但是当我跑步时

> 警卫

它向我显示了**这个错误**

```
13:04:24 - INFO - Guard uses NotifySend to send notifications.
13:04:24 - INFO - Guard uses TerminalTitle to send notifications.
13:04:24 - INFO - Starting Spork for RSpec
Using RSpec
Preloading Rails environment
no such file to load -- /home/francois/sites/easylodge/config/application (LoadError) 
```

* * *

# 更新

**当我在Guardfile**中注释掉这部分时，它看起来启动正常

```
# guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do
#   watch('config/application.rb')
#   watch('config/environment.rb')
#   watch('config/environments/test.rb')
#   watch(%r{^config/initializers/.+\.rb$})
#   watch('Gemfile')
#   watch('Gemfile.lock')
#   watch('spec/spec_helper.rb') { :rspec }
#   watch('test/test_helper.rb') { :test_unit }
#   watch(%r{features/support/}) { :cucumber }
# end 
```

导致控制台

```
13:17:01 - INFO - Guard uses NotifySend to send notifications.
13:17:01 - INFO - Guard uses TerminalTitle to send notifications.
13:17:01 - INFO - Guard::RSpec is running, with RSpec 1!
13:17:01 - INFO - Running all specs
13:17:07 - INFO - Guard is now watching at '/home/francois/sites/easylodge' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:49:17.197

# gemfile 中的错误版本：/

## 新的宝石文件

```
group :test, :development do
  gem 'rspec-rails', '~> 1.2', :require => false
  gem 'simplecov', :require => false
end

group :test do
  gem 'test-unit', '1.2.3', :require => false # for rspec
  gem 'rspec', '~> 1.2', :require => false
  gem 'guard', :require => false
  gem 'spork', '~> 0.8.0', :require => false
  gem 'guard-rspec', :require => false
  gem 'guard-spork', :require => false
  gem 'growl', :require => false      # notifications; optional
  gem 'listen', '>= 0.5.1', :require => false
  gem 'machinist', '~> 2.0', :require => false
  gem 'database_cleaner', '~> 0.9.1', :require => false
end 
```

* * *

感谢这篇文章

* * *

# 在 Rails 2 项目中设置 RSpec、Guard 和 Spork

我已经做过几次了；希望这对需要维护 Rails 2.3 应用程序的人有所帮助。这对我开发的应用程序非常有用，但我欢迎其他人提出额外步骤的建议。

本指南假定Bundler 上的**Rails 2.3.x 项目**

摆脱了项目中任何旧的 rspec 插件，如果有的话。RSpec 位可能隐藏在：

*   耙文件
*   **lib/tasks/rspec.rake**
*   **供应商/插件/rspec**
*   （你能找到的任何其他东西）

RSpec 2 与 Rails 2 不兼容；使用 RSpec 1（文档）。将最新的兼容 gem 版本放入您的 Gemfile：

```
gem 'test-unit', '1.2.3', :require => false # for rspec
gem 'rspec', '~> 1.2', :require => false
gem 'rspec-rails', '~> 1.2', :require => false
gem 'guard', :require => false
gem 'spork', '~> 0.8.0', :require => false
gem 'guard-rspec', :require => false
gem 'guard-spork', :require => false
gem 'growl', :require => false      # notifications; optional
gem 'rb-fsevent', :require => false # for OSX; optional
gem 'listen', '>= 0.5.1', :require => false
gem 'machinist', '~> 2.0', :require => false
gem 'database_cleaner', '~> 0.9.1', :require => false 
```

安装捆绑包。**对Gemfile**

中已经存在的任何 gem 使用 bundle update 。 确保**lib/tasks/rspec.rake** **spec/spec_helper.rb**不存在。

 ******```
./script/generate rspec 
```

删除添加到**config/environments/test.rb的***config.gem*行；该应用程序使用捆绑器。

 **```
spork --bootstrap 
```

然后编辑**spec/spec_helper.rb**并按照说明进行操作。

将股票**spec_helper.rb**中的所有内容移动到 prefork 块中，

```
except:Dir[File.expand_path(File.join(File.dirname(__FILE__),'support','**','*.rb'))].each {|f| require f} 
```

属于each_run。

安装 database_cleaner。在**spec/spec_helper.rb**中，在 prefork 块中： `require 'database_cleaner'` 在 each_run 块中： `DatabaseCleaner.clean`

初始化 Guardfile

```
guard init spork

guard init rspec 
```

修改 Guardfile 的 rspec 保护以使用正确的版本和 drb (spork)：

```
guard 'rspec', :version => 1, :cli => '--drb --color' do 
```

根据您的项目 Run rake 规范修改 Guardfile。您应该没有输出（如果您没有测试）。如果您遇到错误，请解决它们。

跑卫。没有错误？太好了，测试一下！
问题？通过运行规范规范而不是重新运行守卫来更快地重试。**********

# angularjs - 为什么 ngModel.$setViewValue(...) 不起作用

> ID：15269737
> 
> 赞同：31
> 
> 时间：2013-03-07T11:16:12.417
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在编写一个需要隔离范围的指令，但我想通过[ngModel](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)将它绑定到父范围。

这里的问题是父级的范围值没有改变。

标记

```
<form name="myForm" ng-app="customControl">
    <div ng-init="form.userContent"></div>
    <div contenteditable name="myWidget" ng-model="form.userContent" required>Change me!</div>
    <span ng-show="myForm.myWidget.$error.required">Required!</span>
    <hr />
    <textarea ng-model="form.userContent"></textarea>
</form> 
```

JS

```
angular.module('customControl', []).directive('contenteditable', function() {
    return {
        restrict : 'A', // only activate on element attribute
        require : '?ngModel', // get a hold of NgModelController
        scope: {},
        link : function(scope, element, attrs, ngModel) {
            if (!ngModel)
                return; // do nothing if no ng-model

            // Specify how UI should be updated
            ngModel.$render = function() {
                element.html(ngModel.$viewValue || '');
            };

            // Listen for change events to enable binding
            element.bind('blur keyup change', function() {
                        scope.$apply(read);
                    });
            read(); // initialize

            // Write data to the model
            function read() {
                ngModel.$setViewValue(element.html());
            }
        }
    };
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Hwv7E/4/)。

如果我不为指令使用隔离范围，这很好用

演示：[小提琴](http://jsfiddle.net/arunpjohny/Hwv7E/3/)。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-07T13:22:38.147

原因是由于您为`contenteditable`指令创建了一个隔离范围，`ng-model`同一元素上的指令也获得了该隔离范围。这意味着您有两个不相互连接的不同范围，它们都有一个`form.userContent`单独更改的属性。我想您可以通过以下代码来举例说明：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    angular.module('myApp', []).controller('Ctrl', function($scope) {

    })
    .directive('contenteditable', function() {
        return {
            restrict : 'A', // only activate on element attribute
            require : '?ngModel', // get a hold of NgModelController
            scope: {},
            link : function(scope, element, attrs, ngModel) {
                if (!ngModel)
                    return; // do nothing if no ng-model

                setInterval(function() {
                    if (angular.element('#contenteditable').scope().form)
                        console.log(angular.element('#contenteditable').scope().form.userContent);

                    if (angular.element('#textarea').scope().form)
                        console.log(angular.element('#textarea').scope().form.userContent);
                }, 1000);

                // Specify how UI should be updated
                ngModel.$render = function() {
                    element.html(ngModel.$viewValue || '');
                };

                // Listen for change events to enable binding
                element.bind('blur keyup change', function() {
                            scope.$apply(read);
                        });
                read(); // initialize

                // Write data to the model
                function read() {
                    ngModel.$setViewValue(element.html());
                }
            }
        };
    });
    </script>
</head>
<body ng-controller="Ctrl">
    <form name="myForm">
        <div ng-init="form.userContent"></div>
        <div contenteditable name="myWidget" ng-model="form.userContent" id="contenteditable" required>Change me!</div>
        <span ng-show="myForm.myWidget.$error.required">Required!</span>
        <hr />
        <textarea ng-model="form.userContent" id="textarea"></textarea>
    </form>
</body>
</html> 
```

正如您将在控制台中看到的那样，有两个不同的范围，`form.userContent`如果您更改 textarea 中的文本或更改 contenteditable div 中的文本，它们会分别更改。

所以我敢打赌你在想“解释够了，给我一个解决方案！”。好吧，（据我所知）没有一个很好的解决方案，但是有一个有效的解决方案。您要做的是将模型的引用带入您的隔离范围，并确保它在您的隔离范围中与父范围中的名称相同。

这是您所做的，而不是像这样创建一个空范围：

```
...
scope: {}
... 
```

你像这样绑定模型：

```
...
scope: {
    model: '=ngModel'
}
.... 
```

现在，您`model`在隔离范围上有一个属性，它是`form.userContent`对父范围的引用。但`ng-model`不是在寻找`model`属性，而是在寻找`form.userProperty`在我们的孤立范围内仍然不存在的属性。所以为了解决这个问题，我们在链接函数中添加了这个：

```
scope.$watch('model', function() {
    scope.$eval(attrs.ngModel + ' = model');
});

scope.$watch(attrs.ngModel, function(val) {
    scope.model = val;
}); 
```

第一个监视`form.userContent`将来自我们指令之外的更改同步到我们的 isolated `form.userContent`，第二个监视确保我们将隔离`form.userContent`的任何更改传播到父范围。

我意识到这是一个冗长的答案，也许不太容易理解。因此，我很乐意澄清您认为模糊的任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-03T03:49:16.760

第一个答案很好地解释了这个问题，我相信我有一个更简单的解决方案，可以避免额外的手表。

总结答案 1\. ngModel 无法在隔离范围内工作，因为您希望它绑定的元素不在其范围内。它们在父范围内。

解决方案1，绑定到父级的属性

```
<div contenteditable name="myWidget" ng-model="form.userContent" required>Change me!</div> 
```

变成

```
<div contenteditable name="myWidget" ng-model="$parent.form.userContent" required>Change me!</div> 
```

解决方案2，将ngModel移到隔离范围之外

`require : '?ngModel',`变成`require : '?^ngModel',`^ 告诉你的指令在父元素中查找 ngModel

```
<div contenteditable name="myWidget" ng-model="form.userContent" required>Change me!</div> 
```

变成

```
<div ng-model="form.userContent">
    <div contenteditable name="myWidget" required>Change me!</div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-09T07:32:13.913

我不确定这是否适合你。不过你可以试一试。

html:

```
<form name="myForm" ng-app="customControl">
    <div ng-init="form.userContent"></div>
    <div contenteditable name="myWidget" ng-model="form" required>Change me!</div>
    <span ng-show="myForm.myWidget.$error.required">Required!</span>
    <hr />
    <textarea ng-model="form.content"></textarea>
</form> 
```

js

```
angular.module('customControl', []).directive('contenteditable', function() {
    return {
        restrict : 'A', // only activate on element attribute
        require : '?ngModel', // get a hold of NgModelController
        link : function(scope, element, attrs, ngModel) {
            if (!ngModel)
                return; // do nothing if no ng-model
            // Specify how UI should be updated
            ngModel.$render = function() {
                element.html(ngModel.$viewValue || '');
            };

            // Listen for change events to enable binding
            element.bind('blur keyup change', function() {
                        scope.$apply(read);
                    });
            read(); // initialize

            // Write data to the model
            function read() {
                ngModel.$setViewValue({'content': element.html()});
            }
        }
    };
}); 
```

# qr-code - 如何在基于 arm 的手持终端中读取 QR 码

> ID：15269741
> 
> 赞同：-4
> 
> 时间：2013-03-07T11:16:17.790
> 
> 标签：qr-code, handheld

现在我们正在研究二维码，那么如何使用 c++ 或 C# 在基于 arm 的手持终端中读取二维码

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:18:54.077

通过使用库。我没有使用过它，但谷歌的第一次点击表明[libqr](http://www.norisys.jp/libqr/)是众所周知的。用 C89 编写，您应该可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:57:31.260

[zxing](https://code.google.com/p/zxing/)有一个积极维护的 C++ 解码器（FWIW，我是 C++ 端口的主要维护者。）

# c# - 如何使用 Linq 从表中选择重复值？

> ID：15269742
> 
> 赞同：-2
> 
> 时间：2013-03-07T11:16:17.783
> 
> 标签：c#, .net, linq

MyTable 包含具有重复值的**Col1 。**

如何使用 Linq 从我的表中选择重复值

我的表如下

表格1

```
Col1      Col2 
 1         A
 1         B
 1         C
 2         D
 2         E
 3         F
 3         G
 4         H 
```

直到现在我只能从表中选择不同的值

```
List<int> MyList=Table1.AsEnumerable()
                   .Select(row => row.Field<int>("Col1"))
                   .Distinct().ToList(); 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:25:39.480

```
List<int> MyList = Table1.AsEnumerable()
                         .GroupBy(row => new {
                                             Col1 = row.Field<int>("Col1"),
                                             Col2 = row.Field<string>("Col2")
                                         })
                         .Where(g => g.Count() > 1)
                         .Select(g => g.Key.Col1)
                         .ToList(); 
```

# php - Magento：网址重写 - 类别页面错误

> ID：15269743
> 
> 赞同：0
> 
> 时间：2013-03-07T11:16:22.040
> 
> 标签：php, magento

我正在使用 URL 重写来保持良好的 SEO 和用户友好的链接。最近我注意到一个奇怪的错误：在类别页面（并且只有在那里）Magento 一直忽略重写并将链接显示为：

```
/catalog/product/view/id/17/s/category/8/ 
```

在导航，页脚等中。我没有想法......重写索引被刷新了一段时间。

有任何想法吗？提前致谢。

# java - 如何从 GUI 访问许多参数

> ID：15269745
> 
> 赞同：1
> 
> 时间：2013-03-07T11:16:28.443
> 
> 标签：java, user-interface, human-interface

我正在编写一个 Java 应用程序，它需要很多参数作为输入（~100）。我在 GUI 中公开了一些，但当然不可能一次显示所有这些。

我很好奇是否有一种共享方式可以让用户访问大量这样的参数。现在，我在 GUI 中有一些按钮，每个按钮都会打开一个 JPanel，其中显示参数的子集。这是一个常见的解决方案吗？还是从人机界面的角度来看有更有效的解决方案？

提前感谢您的建议，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:37:10.350

我认为用户如何最好地理解大量信息会产生很大的不同。它是按类别组织的，用户想要浏览的东西吗？是否存在用户更可能想知道的显着参数，因此应该更容易访问？您可以有一个选项卡式面板，其中包含用于参数组的选项卡，您可以按字母顺序排列它们并为它们着色并将它们放入不同的字体等，但无论参数是什么，都不会有一个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:32:22.373

我建议使用向导来指导用户完成所有参数。有关创建用户界面的所有一般信息，请参阅 ISO DIN 9241。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:10:43.860

我发现一种有效的方法是在用户界面的左侧有一个单选 JTree。每当用户选择一个树节点时，相应的面板就会显示在右侧。我通常会将所有面板放入 CardLayout 以确保 UI 的首选尺寸能够容纳所有面板。

这具有允许您分层组织信息的优势。

# objective-c - 如何将 3d 数组的新随机元素归零

> ID：15269748
> 
> 赞同：0
> 
> 时间：2013-03-07T11:16:40.523
> 
> 标签：objective-c, random, multidimensional-array, zero

我需要一种算法，它从 3d 数组中获取一些随机元素并将它们的值设置为零，然后无法选择一个被挑选的元素，它一直持续到特定数量的元素设置为零。我知道一些需要大量内存和操作的方法。但我需要一些可以用最少的操作功能来做到这一点的东西。非常感谢。哦...忘了说语言是Objective-C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:28:37.857

假设数组中只允许使用非零元素，则使用以下算法

```
-(void) randZeroMaker:(NSMutableArray*)array withNumberElements:(NSInteger*)count {
    while(count > 0){
        int x = randGen(array.length);
        int y = randGen([array objectAtIndex:0].length);
        int z = randGen([[array objectAtIndex:0] objectAtIndex:0].length);
        if ( [[[array objectAtIndex:x] objectAtIndex:y] objectAtIndex:z] == 0 ) {
            [[[array objectAtIndex:x] objectAtIndex:y] objectAtIndex:z] = 0;
            count--;
        }
    }
} 
```

如果我错了，请纠正我！

这是空间上的 O(1) 和时间上的 O(count + k)。我认为这是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:35:01.173

```
NSMutableArray *alreadyPicked=[NSMutableArray new];
NSInteger loop=0;
while(loop<=array[0].count+array[1].count+array[2].count){
    NSInteger index0D=arc4random()%array[0].count;
    NSInteger index1D=arc4random()%array[1].count;
    NSInteger index2D=arc4random()%array[2].count;

    // pickedElement
    array[index0D][index1D][index2D]=0;
    NSString *temp=[NSString stringWithformat:@"%d,%d,%d",index0D,index1D,index2D];
    if(![alreadyPicked containsObject:temp]){
        [alreadyPicked addObject:temp];
        loop++1;
    }
} 
```

# sql - 为什么 SQL 服务器不删除冗余 indexex 而不是更新它们？

> ID：15269749
> 
> 赞同：0
> 
> 时间：2013-03-07T11:16:40.360
> 
> 标签：sql, sql-server

当我创建这样的表时

```
CREATE TABLE Test
(TestId INT IDENTITY(1,1) NOT NULL,
FName VARCHAR(255) NOT NULL,
LName VARCHAR(255) NOT NULL,
CONSTRAINT PK_TestID PRIMARY KEY(TestId)) 
```

SQL Server 创建与主键相关的一个 in`sys.key_constraints`和一个 in `sys.indexes`。从运行下面的查询可以看出，在创建表之前和之后。

```
SELECT Count(*)
FROM
    sys.key_constraints

SELECT Count(*)
FROM
    sys.indexes
WHERE
    object_id IN (SELECT object_id
                  FROM
                      sys.objects
                  WHERE
                      type_desc = 'USER_TABLE') 
```

它也使用它们。

当我运行这个

```
INSERT INTO test
VALUES
    ('Me', 'You') 
```

执行计划显示`Clustered Index Insert`。

但是当我放弃约束时

```
ALTER TABLE Test
DROP CONSTRAINT PK_TestID
GO 
```

然后运行上面的查询2个查询，它的`sys.key_constraints`计数比它所拥有的少1，如果它正是它应该是的。但是`sys.indexes`仍然有相同的计数，尽管当我运行它时

```
SELECT *
FROM
    sys.indexes
WHERE
    object_id IN (SELECT object_id
                  FROM
                      sys.objects
                  WHERE
                      type_desc = 'USER_TABLE')
    AND
    object_id = object_id(N'Test')
ORDER BY
    [name] 
```

`name`设置为`NULL`和`index_id`0。但是为什么不像我们对中的那一行所做的那样删除它呢`sys.key_constraint`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:23:20.843

您的主键约束恰好由聚集索引强制执行。当你删除约束时，你也会删除聚集索引，留下一个[堆](http://msdn.microsoft.com/en-us/library/ms188270%28v=sql.105%29.aspx)。堆有自己的条目[`sys.indexes`](http://msdn.microsoft.com/en-us/library/ms173760.aspx)：

> 索引类型：
> **0 = 堆**
> 1 = 集群
> 2 = 非 集群

# c# - Rx groupby 直到条件改变

> ID：15269753
> 
> 赞同：8
> 
> 时间：2013-03-07T11:16:53.873
> 
> 标签：c#, system.reactive

我被 rx 和一个特定的查询困住了。问题：

> 许多单次更新操作是由连续流产生的。操作可以是插入或删除。我想缓冲这些流并同时执行一些操作，但保持顺序非常重要。此外，操作应该每 X 秒缓冲一次并按顺序完成

例子：

在：

```
insert-insert-insert-delete-delete-insert-delete-delete-delete-delete 
```

出去：

```
insert(3)-delete(2)-insert(1)-delete(4) 
```

我写了一个简单的应用程序来测试它，它或多或少像我一样工作，但它不尊重传入插入/删除的顺序

```
namespace RxTests
{
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Reactive.Concurrency;
using System.Reactive.Linq;
using System.Reactive.Subjects;
using System.Text;
using System.Threading;

internal class Program
{
    private static readonly Random Random = new Random();

    private static readonly CancellationTokenSource ProducerStopped = new CancellationTokenSource();

    private static readonly ISubject<UpdateOperation> operations = new Subject<UpdateOperation>();

    private static void Main(string[] args)
    {
        Console.WriteLine("Starting production");
        var producerScheduler = new EventLoopScheduler();
        var consumerScheduler = new EventLoopScheduler();
        var producer =
            Observable.Interval(TimeSpan.FromSeconds(2))
                      .SubscribeOn(producerScheduler)
                      .Subscribe(Produce, WriteProductionCompleted);
        var consumer =
            operations.ObserveOn(producerScheduler)
                      .GroupBy(operation => operation.Delete)
                      .SelectMany(observable => observable.Buffer(TimeSpan.FromSeconds(8), 50))
                      .SubscribeOn(consumerScheduler)
                      .Subscribe(WriteUpdateOperations);
        Console.WriteLine("Type any key to stop");
        Console.ReadKey();
        consumer.Dispose();
        producer.Dispose();
    }

    private static void Produce(long time)
    {
        var delete = Random.NextDouble() < 0.5;
        Console.WriteLine("Produce {0}, {1} at {2}", time + 1, delete, time);
        var idString = (time + 1).ToString(CultureInfo.InvariantCulture);
        var id = time + 1;
        operations.OnNext(
            new UpdateOperation(id, delete, idString, time.ToString(CultureInfo.InvariantCulture)));
    }

    private static void WriteProductionCompleted()
    {
        Console.WriteLine("Production completed");
        ProducerStopped.Cancel();
    }

    private static void WriteUpdateOperation(UpdateOperation updateOperation)
    {
        Console.WriteLine("Consuming {0}", updateOperation);
    }

    private static void WriteUpdateOperations(IList<UpdateOperation> updateOperation)
    {
        foreach (var operation in updateOperation)
        {
            WriteUpdateOperation(operation);
        }
    }

    private class UpdateOperation
    {
        public UpdateOperation(long id, bool delete, params string[] changes)
        {
            this.Id = id;
            this.Delete = delete;
            this.Changes = new List<string>(changes ?? Enumerable.Empty<string>());
        }

        public bool Delete { get; set; }

        public long Id { get; private set; }

        public IList<string> Changes { get; private set; }

        public override string ToString()
        {
            var stringBuilder = new StringBuilder("{UpdateOperation ");
            stringBuilder.AppendFormat("Id: {0}, Delete: {1}, Changes: [", this.Id, this.Delete);
            if (this.Changes.Count > 0)
            {
                stringBuilder.Append(this.Changes.First());
                foreach (var change in this.Changes.Skip(1))
                {
                    stringBuilder.AppendFormat(", {0}", change);
                }
            }

            stringBuilder.Append("]}");
            return stringBuilder.ToString();
        }
    }
} 
```

}

任何人都可以帮助我进行正确的查询吗？

谢谢

**更新 08.03.13（JerKimball 的建议）**

以下几行是对 JerKimball 代码的小改动/添加，用于打印结果：

```
using(query.Subscribe(Print))
{
    Console.ReadLine();
    producer.Dispose();        
} 
```

使用以下打印方法：

```
private static void Print(IObservable<IList<Operation>> operations)
{
    operations.Subscribe(Print);
}

private static void Print(IList<Operation> operations)
{
    var stringBuilder = new StringBuilder("[");
    if (operations.Count > 0)
    {
        stringBuilder.Append(operations.First());
        foreach (var item in operations.Skip(1))
        {
            stringBuilder.AppendFormat(", {0}", item);
        }
    }

    stringBuilder.Append("]");
    Console.WriteLine(stringBuilder);
 } 
```

以及以下为操作字符串：

```
public override string ToString()
{
    return string.Format("{0}:{1}", this.Type, this.Seq);
} 
```

订单被保留，但是：

*   我不确定是否要在另一个订阅中订阅：它是否正确（这是我很久以前就提出的一个问题，我一直不清楚）？
*   我总是在每个列表上不超过两个元素（即使流产生两个以上具有相同类型的连续值）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:53:46.937

`GroupByUntil`我认为您可以通过,`DistinctUntilChanged`和的混合获得您想要的东西`Buffer`：

这需要进行一些调整以适合您的示例代码，但查询（和概念）*应该*保持：

（编辑：doh - 错过了一点......）

```
void Main()
{
    var rnd = new Random();
    var fakeSource = new Subject<Operation>();
    var producer = Observable
        .Interval(TimeSpan.FromMilliseconds(1000))
        .Subscribe(i => 
            {
                var op = new Operation();
                op.Type = rnd.NextDouble() < 0.5 ? "insert" : "delete";
                fakeSource.OnNext(op);
            });    
    var singleSource = fakeSource.Publish().RefCount();

    var query = singleSource
        // We want to groupby until we see a change in the source
        .GroupByUntil(
               i => i.Type, 
               grp => singleSource.DistinctUntilChanged(op => op.Type))
        // then buffer up those observed events in the groupby window
        .Select(grp => grp.Buffer(TimeSpan.FromSeconds(8), 50));

    using(query.Subscribe(Console.WriteLine))
    {
        Console.ReadLine();
        producer.Dispose();        
    }
}

public class Operation { 
    private static int _cnt = 0;
    public Operation() { Seq = _cnt++; }
    public int Seq {get; set;}
    public string Type {get; set;}    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:40:57.837

让我们尝试一种新方法（因此是新答案）：

首先，让我们定义一个扩展方法，该方法将基于键“折叠”项目列表，同时保留顺序：

```
public static class Ext
{
    public static IEnumerable<List<T>> ToRuns<T, TKey>(
            this IEnumerable<T> source, 
            Func<T, TKey> keySelector) 
    {
        using (var enumerator = source.GetEnumerator()) 
        {
            if (!enumerator.MoveNext())
                yield break;

            var currentSet = new List<T>();

            // inspect the first item
            var lastKey = keySelector(enumerator.Current);
            currentSet.Add(enumerator.Current);

            while (enumerator.MoveNext()) 
            {
                var newKey = keySelector(enumerator.Current);
                if (!Equals(newKey, lastKey)) 
                {
                    // A difference == new run; return what we've got thus far
                    yield return currentSet;
                    lastKey = newKey;
                    currentSet = new List<T>();
                }
                currentSet.Add(enumerator.Current);
            }

            // Return the last run.
            yield return currentSet;

            // and clean up
            currentSet = new List<T>();
            lastKey = default(TKey);
        }
    }
} 
```

相当简单 - 给定一个`IEnumerable<T>`, 将返回一个`List<List<T>>`每个子列表将具有相同键的位置。

现在，喂它并使用它：

```
var rnd = new Random();
var fakeSource = new Subject<Operation>();
var producer = Observable
    .Interval(TimeSpan.FromMilliseconds(1000))
    .Subscribe(i => 
        {
            var op = new Operation();
            op.Type = rnd.NextDouble() < 0.5 ? "insert" : "delete";
            fakeSource.OnNext(op);
        });    

var singleSource = fakeSource
    .Publish().RefCount();

var query = singleSource
    // change this value to alter your "look at" time window
    .Buffer(TimeSpan.FromSeconds(5))    
    .Select(buff => buff.ToRuns(op => op.Type).Where(run => run.Count > 0));

using(query.Subscribe(batch => 
{
    foreach(var item in batch)
    {
        Console.WriteLine("{0}({1})", item.First().Type, item.Count);
    }
}))
{
    Console.ReadLine();
    producer.Dispose();     
} 
```

试一试——这是我在典型运行中看到的：

```
insert(4)
delete(2)
insert(1)
delete(1)
insert(1)
insert(1)
delete(1)
insert(1)
delete(2)
delete(2)
insert(2)
delete(1)
insert(1)
delete(2)
insert(2) 
```

# centos - 如何向 LSF 平台添加新用户？

> ID：15269756
> 
> 赞同：0
> 
> 时间：2013-03-07T11:17:06.577
> 
> 标签：centos, cluster-computing, hpc, lsf

我在网上和手册上搜索了这个问题需要的简单答案。

如果我在我的集​​群上创建新用户，并且如果我选中“busers all”，它们就不会出现。因此，他们不能使用“bjobs”、“bhosts”等......

一点帮助会很好！

干杯，

- 最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:31:07.713

您系统上的所有用户都可以使用 LSF。只要他们在他们的个人资料中加载了 LSF。我通常运行这些命令，以便每个人在登录时加载 LSF：

1.  cd /etc/profile.d
2.  ln -s $LSF_CONFDIR/profile.lsf lsf.sh
3.  ln -s $LSF_CONFDIR/cshrc.lsf lsf.csh

这会在您的配置文件中加载 LSF 路径和二进制文件，即您可以运行 lsid、bsub、bjobs 等，而无需指定路径。

我从未亲自使用过 busers，但该命令与 lsb.users 相关。在该文件中，您定义要在 lsb.queues 中用于队列定义的用户和组，例如，您希望某个队列仅可用于某个组。

# c# - 使用正则表达式根据 C 语言中的字段值打印所需的行？

> ID：15269765
> 
> 赞同：1
> 
> 时间：2013-03-07T11:17:39.100
> 
> 标签：c#

在我的日志文件中，字段“appGUID”主要有 3 种类型的值，即“wx”、“null”和包含字符和数字混合的值。我想以这样一种方式过滤掉内容，即包含“wx”和“null”的所有 appGUID 值都存储在一个空的新字符串中，并且包含字符和数字混合的 appGUID 值被丢弃。我无法弄清楚它的正则表达式模式。请帮忙。

我的日志文件格式为：

> INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误: 3419432 服务器: yukon.corp.adobe.com 用户:prerelease appGUID: fcdd2153-bbdf INFO [ com.adobe.watson.vo.BugServices] WX 编辑错误：3419432 服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153-bbdf INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: wx INFO [com.adobe.watson.vo.BugServices] WX 编辑错误: 3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: wx INFO [com. adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3419432服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153-bbdf INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3419432 服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153- bbdf

我的代码在这里：

```
StreamReader reader = new StreamReader(@"C:\Users\karansha\Desktop\Karan Logs\20110717.txt");
string x = reader.ReadToEnd();
List<string> users = new List<string>();
Regex regex = new Regex(@"appGUID:\s*(?<value>.*?)\s");
MatchCollection matches = regex.Matches(x);
foreach (Match match in matches)
{
    var user = match.Groups["value"].Value;
    if (!users.Contains(user)) users.Add(user);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:38:06.170

您可以使用`appGUID: (?<value>wx|null)`：

```
StreamReader reader =
    new StreamReader(@"C:\Users\karansha\Desktop\Karan Logs\20110717.txt");
string x = reader.ReadToEnd();
List<string> users = new List<string>();
Regex regex = new Regex(@"appGUID: (?<value>wx|null)");
MatchCollection matches = regex.Matches(x);
foreach (Match match in matches)
{
    var user = match.Groups["value"].Value;
    if (!users.Contains(user))
        users.Add(user); 
```

# java - 将字符串解析为 Datestamp 不起作用。爪哇

> ID：15269766
> 
> 赞同：0
> 
> 时间：2013-03-07T11:17:39.527
> 
> 标签：java

我正在尝试将格式为 MMM-dd-yyyy 的字符串解析为时间戳。我这样做如下：

```
String dateto = "Dec-01-2013";
try{
    DateFormat datetoDF = new SimpleDateFormat("MMM-dd-yyyy");
    Date datetoD = (Date)datetoDF.parse(dateto);
    datetoTS = new Timestamp(datetoD.getTime());
}
catch(ParseException e)
{
    log.error("RegisteredUserDataProvider:getFilteredUsers:ParseException: " + e.getMessage());
    String stackTrace = ExceptionUtils.getStackTrace(e);
    log.error(stackTrace);
} 
```

为什么它只适用于 3 月（例如 Mar-01-2013）？当我给出其他月份的任何其他日期时，我得到

```
java.text.ParseException: Unparseable date: "Dec-01-2013" 
```

我每个月都检查了一组变量：“Dec-01-2013”​​、“Nov-01-2013”​​、“Oct-01-2013”​​、“Sep-01-2013”​​、“Aug-01- 2013 年”、“2013 年 7 月 1 日”、“2013 年 6 月 1 日”、“2013 年 5 月 1 日”、“2013 年 4 月 1 日”、“2013 年 2 月 1 日”、“2013 年 1 月 1 日”和“2013 年 3 月 4 日”。它仅适用于 Mar。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:26:33.357

看起来你的默认值`Locale`是不同的。

```
DateFormat datetoDF = new SimpleDateFormat("MMM-dd-yyyy", Locale.ENGLISH); 
```

您的默认语言环境可能无法识别“Jan”、“Feb”等词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:38:26.527

所有关于本地或您正在通过`Dec -01-2013`空间传递日期。提供没有空格的正确日期，例如，如果您的默认设置为韩国，则`Dec-01-2013`尝试打印，那么您肯定会收到此异常，然后尝试使用 like`Locale.getDefault()`

`DateFormat datetoDF = new SimpleDateFormat("MMM-dd-yyyy",Locale.ENGLISH);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:34:00.687

你可以使用这个。

```
 String dateto = "Dec-01-2013";
 Date datetoD = new SimpleDateFormat("MMMM d, yyyy", Locale.ENGLISH).parse(dateto );
 datetoTS = new Timestamp(datetoD.getTime()); 
```

# ios - 如何在 iOS 中以编程方式创建自定义 .xls 文件

> ID：15269767
> 
> 赞同：3
> 
> 时间：2013-03-07T11:17:41.200
> 
> 标签：ios, iphone, xcode, cocoa-touch

我需要 Header 具有背景颜色、文本颜色的 excel 文件，但我不能这样做。我能够创建无法自定义的 csv 文件。我也尝试创建 .xml 文件，但无论如何我都无法根据格式创建自定义文件。

# iphone - 后台核心数据更新

> ID：15269768
> 
> 赞同：0
> 
> 时间：2013-03-07T11:17:41.280
> 
> 标签：iphone, nsmanagedobjectcontext, nsthread

我基本上需要在后台线程中更新我的核心数据而不阻塞 UI 并保存它。保存后应重新加载表视图以查看更改。所以为此我想到了使用

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Add code here to do background processing
   NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    self.backgroundManagedObjectContext = context;
    if(self.managedObjectContext == nil)
        self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    self.backgroundManagedObjectContext.parentContext = self.managedObjectContext;

    //update data
    [self getDataFromFile];

dispatch_async( dispatch_get_main_queue(), ^{
        // Add code here to update the UI/send notifications based on the
        // results of the background processing
        [[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil];
        [context release];
    });
}); 
```

当我尝试获取数据时在 getDataFromFile

```
if(![NSThread isMainThread])
{
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"LogDetails" inManagedObjectContext:self.backgroundManagedObjectContext];
    [request setEntity:entity];
    logs = [self.backgroundManagedObjectContext executeFetchRequest:request error:nil];
} 
```

我收到错误***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“LogDetails”的 NSManagedObjectModel

谁能解释我为什么会收到此错误

另外，我还有另一个疑问是将其作为后台 managedObjectContext 还是将其作为父线程作为主线程 managedObjectContext 的子 managedObjectContext

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:41:11.083

一个 NSManagedContext 只能在一个线程中使用。在线程之间传递 NSManagedObject 可能是不安全的。

# sql - 如何合并两个结果

> ID：15269769
> 
> 赞同：0
> 
> 时间：2013-03-07T11:17:42.893
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有两种类型的 sql 查询，它返回相同的数据，我需要合并其中的两个，如果我使用 Union，它会将第二个结果放在第一个结果中，但我不需要这个，我需要合并日期或者有没有办法合并两个 sql查询一个查询？

```
SELECT TO_CHAR(s.CR_DATE, 'DD') DAY, TO_CHAR(s.CR_DATE, 'MM') MONTH, count(*) total FROM SUSR s
left outer join SUSR_ACCT sa on (s.SUSR_ID = sa.SUSR_ID) 
WHERE s.CR_DATE > '01-01-2012' AND s.CR_DATE < '01-01-2014' and sa.ACCT_ID =  123
GROUP BY TO_CHAR(s.CR_DATE, 'DD'), TO_CHAR(s.CR_DATE, 'MM') 

SELECT TO_CHAR(s.CR_DATE, 'DD') DAY, TO_CHAR(s.CR_DATE, 'MM') MONTH, count(*) total FROM SUSR s
WHERE s.CR_DATE > '01-01-2012' AND s.CR_DATE < '01-01-2014' and s.APP_ACCT_ID =  123
GROUP BY TO_CHAR(s.CR_DATE, 'DD'), TO_CHAR(s.CR_DATE, 'MM')
ORDER BY month, day 
```

谢谢 ！

![在此处输入图像描述](../Images/5702a0aed90513c3358400f35e8a8ca3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:22:35.850

您想要聚合这两个结果：

```
SELECT day, month, SUM(total)
  FROM ( /* first_query */
        UNION ALL
         /* second_query */)
 GROUP BY day, month 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:28:55.563

假设我正确理解了您的合并策略背后的意图，您应该添加第二级`GROUP BY`，并将相应的总数加起来，如下所示：

```
SELECT DAY, MONTH, SUM(total) FROM (
    SELECT TO_CHAR(s.CR_DATE, 'DD') DAY, TO_CHAR(s.CR_DATE, 'MM') MONTH, count(*) total
    FROM SUSR s
    left outer join SUSR_ACCT sa on (s.SUSR_ID = sa.SUSR_ID) 
    WHERE s.CR_DATE > '01-01-2012' AND s.CR_DATE < '01-01-2014' and sa.ACCT_ID =  123
    GROUP BY TO_CHAR(s.CR_DATE, 'DD'), TO_CHAR(s.CR_DATE, 'MM') 
UNION ALL
    SELECT TO_CHAR(s.CR_DATE, 'DD') DAY, TO_CHAR(s.CR_DATE, 'MM') MONTH, count(*) total
    FROM SUSR s
    WHERE s.CR_DATE > '01-01-2012' AND s.CR_DATE < '01-01-2014' and s.APP_ACCT_ID =  123
    GROUP BY TO_CHAR(s.CR_DATE, 'DD'), TO_CHAR(s.CR_DATE, 'MM') 
) src
GROUP BY DAY, MONTH
ORDER BY DAY, MONTH 
```

如果您`1 2 5`在第一个结果中有`1 2 4`一行，在第二个结果中有一行，您将`1 2 9`在输出中看到一行（即前两列将用于分组，最后一列将相加）。

# linux - 在 Red Hat 64 位上安装 xampp

> ID：15269773
> 
> 赞同：0
> 
> 时间：2013-03-07T11:17:53.673
> 
> 标签：linux, 64-bit, redhat, lampp

在 RHEL 5.6(Tikanga) 64 位上安装 xampp 并启动​​它时，我收到以下错误：

```
lampp]# ./lampp start
XAMPP is currently only availably as 32 bit application. Please use a 32 bit compatibility     library for your system. 
```

做一些阅读，解决方案似乎只适用于 ubuntu 安装正确的库。Red Hat的解决方案已经“将lampp可执行脚本中的64位检查注释掉”如下：

```
================= 
# XAMPP is currently 32 bit only 
#case `uname -m` in 
# *_64) 
# if /opt/lampp/bin/php -v > /dev/null 2>&1 
# then 
# : 
# else 
# $de && echo "XAMPP gibt es zur Zeit nur als 32-Bit Applikation. Bitte verwende eine      32-Bit Kompatibilitaetsbibliothek fuer Dein System." 
# $de || echo "XAMPP is currently only availably as 32 bit application. Please use a 32    bit compatibility library for your system." 
# exit 
# fi 
# ;; 
#esac 
================ 
```

我已经这样做了，再次启动lampp，现在我得到了这个：

```
lampp]# ./lampp start
cat: /opt/lampp/lib/VERSION: No such file or directory
./lampp: line 126: /opt/lampp/share/lampp/selinux: No such file or directory
Starting XAMPP for Linux ...
./lampp: line 133: /opt/lampp/share/lampp/nogroupcheck: No such file or directory
cat: /opt/lampp/lib/VERSION: No such file or directory
./lampp: line 126: /opt/lampp/share/lampp/selinux: No such file or directory
cat: /opt/lampp/lib/VERSION: No such file or directory
./lampp: line 126: /opt/lampp/share/lampp/selinux: No such file or directory
./lampp: line 506: /opt/lampp/share/lampp/phpstatus: No such file or directory
XAMPP: Starting Apache...
./lampp: line 226: /opt/lampp/bin/apachectl: No such file or directory
XAMPP: Error 127! Couldn't start Apache!
./lampp: line 233: /opt/lampp/share/lampp/diagnose: No such file or directory
cat: /opt/lampp/lib/VERSION: No such file or directory
./lampp: line 126: /opt/lampp/share/lampp/selinux: No such file or directory
XAMPP: Starting MySQL...
./lampp: line 253: /opt/lampp/bin/mysql.server: No such file or directory
XAMPP: Couldn't start MySQL!
cat: /opt/lampp/lib/VERSION: No such file or directory
./lampp: line 126: /opt/lampp/share/lampp/selinux: No such file or directory
./lampp: line 140: /opt/lampp/share/lampp/alladdons: No such file or directory
XAMPP for Linux started. 
```

原来我可能确实需要某种图书馆。谁能帮我看看哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T09:47:32.313

您需要安装“ **ia32-libs** ”以允许 32 位二进制文​​件在 64 位架构上运行。

# python - Python中的代理模式

> ID：15269774
> 
> 赞同：2
> 
> 时间：2013-03-07T11:17:54.393
> 
> 标签：python, proxy-pattern

我的代码中实现了很多类。现在我意识到，对于为所有这些类调用的每个方法，我需要添加一行：

```
with service as object: 
```

所以我正在尝试使用代理模式来自动完成这项工作，这是我的示例代码

```
class A(object):
    def __init__(self, name):
        self.name = name
    def hello(self):
        print 'hello %s!' % (self.name)
    def __enter__(self):
        print 'Enter the function'
        return self
    def __exit__(self, exc_type, exc_value, traceback):
        print 'Exit the function'
class Proxy(object):
    def __init__(self, object_a):
#        object.__setattr__(self, '_object_a', object_a)
        self._object_a = object_a

    def __getattribute__(self, name):
        service = object.__getattribute__(self, '_object_a')
        with service as service:
            result = getattr(service, name)
        return result    

if __name__=='__main__':
    a1 = A('A1')
    b = Proxy(a1)
    b.hello()
    a2 = A('A2')
    b = Proxy(a2)
    b.hello() 
```

一切正常，我有输出：

```
Enter the function A1
Exit the function A1
hello A1!
Enter the function A2
Exit the function A2
hello A2! 
```

但这并不完全是我需要的，因为我需要的是相当于：

```
with a1 as a1:
    a1.hello() 
```

我必须有输出：

```
Enter the function A1
hello A1!
Exit the function A1
Enter the function A2
hello A2!
Exit the function A2 
```

我需要什么才能得到这个结果？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T11:43:58.677

我会使用装饰器：

```
class Proxy(object):
    def __init__(self, object_a):
        self._object_a = object_a

    def decorateEnterExit(self, obj, f):
        def inner(*args, **kwargs):
            with obj as _:
                return f(*args, **kwargs)
        return inner

    def __getattribute__(self, name):
        obj = object.__getattribute__(self, '_object_a')
        dee = object.__getattribute__(self, 'decorateEnterExit')
        return dee(obj, getattr(obj, name)) 
```

这样，只有在执行函数时才会评估 with 。您执行此操作的方式将首先评估 with （包括退出它），然后将返回该*函数以进行调用。*现在我们返回一个函数，该函数本身将进入 with 并在其中调用该函数。

```
>>> Proxy(A('Ax')).hello()
Enter the function
hello Ax!
Exit the function 
```

请注意，您需要`self`在您的`__enter__`方法中返回`A`：

```
def __enter__(self):
    print 'Enter the function'
    return self 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:38:11.573

您的方法中缺少一个 return 语句，它应该返回您的 class( )`__enter__`的一个实例。`self`

至于问题，在您的`Proxy`中，很可能在上下文关闭后评估该结果。试试这个看看你实际返回什么 - 是一个绑定方法：

```
def __getattribute__(self, name):
    service = object.__getattribute__(self, '_object_a')
    with service as service:
        result = getattr(service, name)
        print result
    return result 
```

这将显示

```
Enter the function
<bound method A.hello of <__main__.A object at 0x022A2950>>
Exit the function 
```

只有 then 方法被调用，在`__getattribute__`返回它之后。

# itext - 在表格中插入可填写字段 [iText]

> ID：15269777
> 
> 赞同：1
> 
> 时间：2013-03-07T11:18:02.090
> 
> 标签：itext, pdfptable

我刚刚花了一点时间弄清楚如何使用 iText 将可填充字段插入到 PdfPTable 中。通过阅读这本书和谷歌搜索，我知道应该通过直接内容添加字段，并且由于我需要将字段添加到我正在构建的表格中的特定单元格，我应该使用单元格事件来执行此操作。

为了提高我的理解，我希望有人可以确认我们这样做的原因是因为 PdfPCellEvent 给了我们一个 Rectangle ，它为我们提供了表格单元格的确切位置？

抱歉，如果这看起来很明显 - 我的 Java 知识是通过解决特定要求而不是通过结构化方式学习来建立的，因此可能缺少一些非常基本的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:18:48.053

PdfPTable/PdfPCell 将线条和文本绘制到 PDF 的内容流中。

字段不是内容流的一部分。字段是一个抽象概念，可以通过小部件注释在页面上进行可视化。注释不是内容流的一部分。它们存储在从页面字典引用的 PDF 字典中（而不是出现在页面的内容流中）。这些字典包含注释的坐标。

这就是为什么您应该使用单元格事件将字段添加到表格中的原因。将表格添加到页面时，iText 会创建内容流。在渲染完成之前，iText 并不知道每一行和文本片段的坐标。那是触发表格和单元格事件的时候。您可以使用传递给事件的坐标来创建注释。

# php - PHP 连接到其他服务器中的 MySQL 数据库

> ID：15269778
> 
> 赞同：0
> 
> 时间：2013-03-07T11:18:06.770
> 
> 标签：php, mysql

我有 2 个共享主机：1.1.1.1 和 2.2.2.2
我在 1.1.1.1 中有一个 PHP 脚本，它连接到 2.2.2.2 中的数据库
在远程数据库访问主机 (2.2.2.2) 中我输入 '%' 表示我允许从 2.2.2.2 中的任何 IP
数据库用户名连接：foo 2.2.2.2
中的数据库密码：bar

我的 PHP 脚本：

```
mysql_connect('2.2.2.2:3306', 'foo', 'bar', true); 
```

我收到了这个错误：

```
Warning: mysql_connect() [function.mysql-connect]: Can't connect to MySQL server on '2.2.2.2' (4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:23:45.903

如果您的服务器已连接，请确保服务器 2.2.2.2 上的“my.cnf”mysql 配置文件允许远程连接。[这](http://wiki.r1soft.com/display/CDP3/Allowing+Remote+Connections+to+MySQL+Instance)可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:30:29.620

谢谢你的帮助。这是关于防火墙的，我联系了我的主机，他们为我修复了它。

# python - Python和集合交集的有效循环（使用树）

> ID：15269780
> 
> 赞同：0
> 
> 时间：2013-03-07T11:18:07.757
> 
> 标签：python, tree

以下是决策树的属性和值的不同路径。如果我要枚举每个组合的树，树会很大。所以......树的每条路径都是叶节点的所有不同属性和值。

如果给出要评分的值列表，即找到具有最常见元素的节点，我使用下面的代码。

尝试完成我想要的最快速的方法是什么？下面的工作，但时间是最重要的，所以值得使用`c`和导入python。

树结构会更快吗？如果是这样 - 什么结构？scipy weave 会更快吗？

```
nodes = {}
nodes[1] = ['hod=1','hod=2','state=NY','state=LA']
nodes[2] = ['hod=3','hod=4','state=FL','state=NV']
nodes[3] = ['hod=5','hod=6','state=WY','state=HI']
nodes[4] = ['hod=5','hod=6']

score = ['hod=6','state=WY','dow=4']
score_size = len(score)

max_node = -1
max_len = -1
for node_id, node in nodes.iteritems():
    this_node_interection_len = len(set(score).intersection(node))
    if this_node_interection_len>max_len:
        max_len = this_node_interection_len
        max_node = node_id   
    #print node_id, len(set(score).intersection(node))

print 'max_node',3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:37:35.170

将数据存储在堆中*可能*会更快，其中`len(score.intersection(node))`是每个节点的键值。这样，构建初始数据结构会比制作平面字典要慢一些，但您可以快速检索前几个节点，而不仅仅是得分最高的节点。

您还应该考虑使用 PyPy 或类似的东西来优化性能。

# java - 密钥库和 Android 的签名问题

> ID：15269781
> 
> 赞同：0
> 
> 时间：2013-03-07T11:18:12.020
> 
> 标签：java, android, code-signing, keystore, android-keystore

所以我在市场上有一个Android应用程序，现在我需要更新它。我一直在尝试签署新的 apk，但遇到了困难。

我有密钥库，并已使用`keytool -list -v -keystore deployment.keystore`. 密钥库没有密码，不记得这样做了，但你去了。如果我输入任何内容，我会收到一个错误，如果我不输入，那么它会接受命令并列出包含的证书。

现在的问题是，当尝试在 Eclipse 中导出 apk 文件时，使用导出向导，我不允许在密钥库上没有密码，因此我无法获取里面的凭据。因此，我尝试运行以下命令以尝试更改 keystore 上的密码`keytool -storepasswd -keystore deployment.keystore`。我被要求输入密码，空字符串密码和我要设置的新密码都不被接受。如果它的长度 < 6 个字符，我会再次收到提示，如果它 > 6 个字符，我会收到以下错误：`keytool error: java.io.IOException: Keystore was tampered with, or password was incorrect`.

现在我不知道该怎么办，并寻求SO的集体知识来帮助我。

**更新**：我现在已导出证书，然后将其再次成功导入新的密钥库。`Unhandled event loop exception`现在的问题是，当我尝试签名时，我在 Eclipse 中得到了一个。有任何想法吗？

**更新 2：**尝试通过终端签名以避免 Eclipse 抛出的异常出现了新问题。我正在尝试以下操作`jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore new.keystore myApp.apk myAlias`：我的新密钥库中只有证书，但没有私钥，所以我一直在尝试通过运行将它们从旧密钥库导出为 p12 `keytool -importkeystore -srckeystore deployment.keystore -destkeystore myKeystore.p12 -deststoretype PKCS12`。

现在我收到以下警告：

> ****** *** ** *** *** 警告 警告 警告 ***** ** *** ** *******
> 
>  **存储在 srckeystore* * 中的信息的完整性尚未得到验证！为了验证其完整性， * * 您必须提供 srckeystore 密码。
> 
> ****** *** ** *** *** 警告 警告 警告 ***** ** *** ** *********

 ****这现在提示我输入 srckeystore 的密码，该密码是空字符串。这是我似乎陷入的一些循环漏洞！

**更新 3：** 我现在通过使用 command 成功更改了原始密钥库密码`-storepass`。但是，现在提示我输入密钥库中实际私钥/公钥对的密钥传递。我不记得设置这些，即使我读过`they default to the keystore password if not set`他们不接受我输入的任何内容。我的搜索还在继续。

-德累斯顿先生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:05:40.237

在尝试了一些不同的事情之后，我们最终使用新密钥库中的新密钥重新发布了应用程序。值得庆幸的是，它只发布了几个小时，根本没有被推广，所以只有大约 10 个用户受到影响。这仍然是许多人。

毕竟，我们已经开始设置 Maven，所有发布都将在 Maven 服务器编译并签署应用程序后完成。一切都已备份，所有密码都被记录下来等。****

# cassandra - 复合键上的 CQL2 列切片和 CQL3 wheres 是否等效？

> ID：15269782
> 
> 赞同：1
> 
> 时间：2013-03-07T11:18:14.713
> 
> 标签：cassandra, cql, cql3

我有一些问题让我的大脑围绕着 CQL。我一直在尝试在 CQL3 中使用列切片（我认为这是正确的术语），但所有关于它的文档似乎都参考了 CQL2。

例如我有下表：

```
CREATE TABLE eventindex (
  key uuid,
  column1 int,
  value uuid,
  PRIMARY KEY (key, column1)
) WITH COMPACT STORAGE 
```

现在，在 CQL2 中，我可以执行以下操作：

```
select '1234567890'..'1234567895' from eventindex; 
```

它返回所有行范围内的所有列

现在，在 CQL3 中我不能这样做（至少，不能在 cqlsh 上），但我可以这样做：

```
select value from eventindex WHERE column1 > 1234567890 AND column1 <= 1234567895 allow filtering; 
```

这让我得到了基本相同的信息，但格式略有不同。

问题是——这些是等价的吗？如果我不添加允许过滤，cqlsh 会警告我有关性能问题的事实告诉我，CQL2 版本更有效，并且我的 CQL3 查询运行方式不同，但我真的无法找到一个直接的答案来确认我的直觉在这里。

**编辑：**让我担心的具体事情是运行 CQL2 查询不会引起 cqlsh 的抱怨，但是运行 CQL3 查询*而不*“允许过滤”会使 cqlsh 由于担心性能不可预测而拒绝执行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:15:48.330

我认为它们本质上是相同的，尽管我从未遇到过“允许过滤”命令。令我惊讶的是，您实际上可以完全运行该 cql，而无需指定密钥。它不应该是这样的：

```
select value from eventindex WHERE key = '<key>' 
AND column1 > 1234567890 AND column1 <= 1234567895 
```

我发现这篇文章对于理解 CQL3 在幕后所做的工作非常有用：

[http://www.datastax.com/dev/blog/thrift-to-cql3](http://www.datastax.com/dev/blog/thrift-to-cql3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T16:38:50.630

允许过滤命令在那里，因为您的查询可能会导致读取大量（或至少未确定）的数据，这些数据不会在您的查询中使用。

```
select value from eventindex WHERE column1 > 1234567890 AND column1 <= 1234567895; 
```

此查询将需要读取每一行 - 因为如果不查看该行就无法知道特定行是否在该范围内具有 column1 值。然后过滤掉不满足 WHERE 谓词的行。

考虑到大型数据存储中可能有多少行，默认情况下不允许这样做是可以理解的。但是，在某些情况下，您可能对您的数据足够了解，可以说“这是合理的，我想这样做”。在这种情况下，您可以使用 ALLOW FILTERING 来允许它。

当您使用指定分区键值的谓词（例如 WHERE key = .....）时，您不会收到此消息，因为只需要查看满足这部分谓词的行.

有关详细信息，请参阅以下内容：http: [//cassandra.apache.org/doc/cql3/CQL.html#selectStmt](http://cassandra.apache.org/doc/cql3/CQL.html#selectStmt)

# flash - Stage3d着色器奇怪的行为添加变量

> ID：15269784
> 
> 赞同：0
> 
> 时间：2013-03-07T11:18:17.997
> 
> 标签：flash, shader, vertex-shader, stage3d

我正在使用这个着色器，结果如下：

```
<script id="per-fragment-lighting-vs2" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uMV2Matrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    varying vec2 vTextureCoord;
    varying vec3 vTransformedNormal;
    varying vec4 vPosition;

    void main(void) {
        gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0);
        vTextureCoord = aTextureCoord;
        vTransformedNormal = uNMatrix * aVertexNormal;        
    }
</script>

<script id="per-fragment-lighting-fs2" type="x-shader/x-fragment">
    precision mediump float;

    varying vec2 vTextureCoord;
    varying vec3 vTransformedNormal;
    varying vec4 vPosition;

    uniform float uMaterialShininess;

    uniform vec3 uAmbientColor;

    uniform vec3 uPointLightingLocation;
    uniform vec3 uPointLightingSpecularColor;
    uniform vec3 uPointLightingDiffuseColor;

    uniform sampler2D uSampler;

    void main(void) {
        vec4 fragmentColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        gl_FragColor = fragmentColor;
    }
</script> 
```

![在此处输入图像描述](../Images/2e81a6ac11e1b449c15a816fb11cb6a9.png)

但是如果我在着色器上添加​​一个变量，它会完全改变结果，尽管它没有在片段着色器上使用：

```
<script id="per-fragment-lighting-vs2" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uMV2Matrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    varying vec2 vTextureCoord;
    varying vec3 vTransformedNormal;
    varying vec4 vPosition;

    void main(void) {
        gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0);
        vTextureCoord = aTextureCoord;
        vTransformedNormal = uNMatrix * aVertexNormal;
        **vPosition = vec4(1,1,1,1);**
    }
</script> 
```

![在此处输入图像描述](../Images/e67b310a28a978c17f42cec60a77ad29.png)

你能帮我解释一下这里发生了什么吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:35:36.663

glsl2agal 的问题是在顶点和像素着色器中映射变量的方式不同。

例如：

```
Vertex Shader                   
v0 vPosition                    
v1 vTextureCoord                
v2 vTransformedNormal

Fragment Shader
v1 vPosition
.... 
```

这显然会导致纹理输出不佳但顶点定位良好。

为了解决这个问题，我必须制作一个补丁来重新映射所有变量并搜索和替换生成的 AGAL 代码。

现在它工作正常。

# java - Struts 2 Json Result Hibernate LazyInitialization - 如何在休眠会话中反序列化

> ID：15269786
> 
> 赞同：3
> 
> 时间：2013-03-07T11:18:22.473
> 
> 标签：java, json, hibernate, struts2, lazy-initialization

我正在尝试实现一个 Hibernate 会话/事务拦截器以避免`LazyInitializationException`Struts2 中的 json 结果，但我还是得到了这个异常：

```
245968 [http-8080-7] ERROR util.HibernateEndTransInterceptor  - org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.reflect.InvocationTargetException
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.reflect.InvocationTargetException
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    at org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    at org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    at org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    at org.apache.struts2.json.JSONWriter.write(JSONWriter.java:95)
    at org.apache.struts2.json.JSONUtil.serialize(JSONUtil.java:116)
    at org.apache.struts2.json.JSONResult.createJSONString(JSONResult.java:196)
    at org.apache.struts2.json.JSONResult.execute(JSONResult.java:170)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    at util.HibernateEndTransInterceptor.intercept(HibernateEndTransInterceptor.java:55)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at util.HibernateBeginTransInterceptor.intercept(HibernateBeginTransInterceptor.java:32)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at util.LoginInterceptor.intercept(LoginInterceptor.java:36)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:831)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:652)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1203)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.reflect.InvocationTargetException
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    at org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    at org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    at org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    at org.apache.struts2.json.JSONWriter.add(JSONWriter.java:363)
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:223)
    ... 73 more
Caused by: org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: java.lang.reflect.InvocationTargetException
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    at org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    at org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    at org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    at org.apache.struts2.json.JSONWriter.add(JSONWriter.java:363)
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:223)
    ... 78 more
Caused by: org.apache.struts2.json.JSONException: java.lang.reflect.InvocationTargetException
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:238)
    at org.apache.struts2.json.JSONWriter.processCustom(JSONWriter.java:171)
    at org.apache.struts2.json.JSONWriter.process(JSONWriter.java:161)
    at org.apache.struts2.json.JSONWriter.value(JSONWriter.java:127)
    at org.apache.struts2.json.JSONWriter.add(JSONWriter.java:363)
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:223)
    ... 83 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:218)
    ... 88 more
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:165)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:272)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at com.lm.model.common.Language_$$_javassist_0.getName(Language_$$_javassist_0.java)
    ... 93 more 
```

我的拦截器看起来像这样：

```
package util;

import java.util.Map;

import org.apache.log4j.Logger;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;

import util.hibernate.HibernateUtil;

import com.lm.action.ActionsConstants;
import com.lm.action.user.Constants;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;

public class HibernateEndTransInterceptor implements Interceptor, Constants, ActionsConstants {

    private static final long serialVersionUID = -8734958511612355789L;

    private static SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
    private transient Logger log = Logger.getLogger(HibernateEndTransInterceptor.class);
    private Session s=null;
    private Transaction t=null;

    @Override
    public void destroy() {
    }

    @Override
    public void init() {
    }

    @Override
    public String intercept(final ActionInvocation invocation) throws Exception {
        /*invocation.addPreResultListener(new PreResultListener() {

            @Override
            public void beforeResult(ActionInvocation arg0, String arg1) {
                Map<String, ResultConfig> resultsMap = invocation.getProxy().getConfig().getResults();
                //ResultConfig finalResultConfig = resultsMap.get(resultCode);

            }
        });*/

        Map<String,Object> strutsSession = invocation.getInvocationContext().getSession();
        String res=null;
        try {
            s=sessionFactory.openSession();
            t = s.beginTransaction();
            strutsSession.put("hibernateSession", s);
            strutsSession.put("hibernateTransaction", t);
            res=invocation.invoke();
            t.commit();
        } catch (Throwable t2) {
            log.error(t2,t2);
            try {
                t.rollback();
            } catch (Throwable t3) {
                log.error(t3,t3);
            }
        } finally {
            try {
                s.close();
            } catch (Throwable t) {
                log.error(t,t);
            }
            strutsSession.remove("hibernateSession");
            strutsSession.remove("hibernateTransaction");
        }
        return res;
    }

} 
```

这是行不通的，我`LazyInitializationException`什至以前`trans.commit()`和`session.close();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:58:00.963

不要重新实现轮圈。如果您需要在视图概念中实现开放会话，请使用[Hibernate Full Plugin](http://code.google.com/p/full-hibernate-plugin-for-struts2/)。如果您想修复收藏品上的`LazyInitializationException`放置。`FetchType.EAGER`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:18:59.927

好的，最后我解决了将通用 DAO（带有会话和事务）注入到 genericAction 的问题。这适用于带有惰性休眠 bean 的 JSONResults 和 jsp。

感谢对“bmorris591”和“Roman C”的贡献（我不想要，甚至不需要，所有这些插件）。

我留下我的例子，我希望我不会忘记任何事情......

拦截器配置（struts.xml 片段）：

```
<package name="lmp" extends="struts-default,json-default">
    <interceptors>
        <interceptor name="login" class="util.LoginInterceptor"/>
        <interceptor name="hibernateSessionTransInjector" class="util.HibernateSessionTransInjectorInterceptor"/>
        <interceptor-stack name="loggingStack">
            <interceptor-ref name="login" />
            <interceptor-ref name="defaultStack" />
            <interceptor-ref name="hibernateSessionTransInjector"/>
        </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="loggingStack"/>

    <global-results>
        <result name="login" type="redirectAction">login</result>
    </global-results>
</package>
<package name="myAction" extends="lmp">

    <action name="myAction" class="com.lmp.MyAction">
        <result name="json" type="json">
            <param name="ignoreHierarchy">false</param>
        </result>
        <result name="*">/jsp/myAction.jsp</result>
    </action>
</package> 
```

拦截器实现：

```
package util;

import org.apache.log4j.Logger;
import org.hibernate.Session;
import org.hibernate.SessionFactory;

import util.hibernate.HibernateUtil;

import com.lm.action.ActionsConstants;
import com.lm.action.user.Constants;
import com.lm.dao.DAO;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;

public class HibernateSessionTransInjectorInterceptor implements Interceptor, Constants, ActionsConstants {

    private static final long serialVersionUID = -8734958511612355789L;

    private static SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
    private transient Logger log = Logger.getLogger(HibernateSessionTransInjectorInterceptor.class);

    @Override
    public void destroy() {
    }

    @Override
    public void init() {
    }

    @Override
    public String intercept(final ActionInvocation invocation) throws Exception {
        String res=null;
        DAO dao=null;
        try {
            Session s=sessionFactory.openSession();
            dao = new DAO(s);
            dao.beginTransaction();
            **invocation.getStack().setValue("dao", dao, true);**
            res=invocation.invoke();
            boolean rollback=(Boolean)invocation.getStack().findValue("rollbackTransaction", Boolean.class);
            if (rollback)
                dao.rollBackTransaction();
            if (!dao.getT().wasRolledBack())
                dao.commitTransaction();
        } catch (Throwable t2) {
            log.error(t2,t2);
            if (dao!=null)
            try {
                dao.rollBackTransaction();
            } catch (Throwable t3) {
                log.error(t3,t3);
            }
        } finally {
            if (dao!=null)
            try {
                dao.finallyClose();
            } catch (Throwable t) {
                log.error(t,t);
            }
        }
        return res;
    }

} 
```

用户DAO示例：

```
public class UserDAO extends DAO {

[...]
    public UserDAO(Session s) {
        super(s);
    }
[...]
} 
```

通用 DAO 示例：

```
public class DAO {

    protected static final transient Logger log = Logger.getLogger(DAO.class);

    public static SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
    public Session s = null;
    public Transaction t = null;

    public DAO(Session s) {
        this.s=s;
    }

    public void beginTransaction(Transaction t) {
        this.t=t;
    }

    private int exceptionErr=0;
    public void beginTransaction() {
        try {
            t=s.beginTransaction();
        } catch (Throwable t) {
            log.error(t,t);
        }
    }
    public void rollBackTransaction() {
        if (t!=null && t.isActive())
            t.rollback();
    }
    public void commitTransaction() {
        if (t!=null && t.isActive())
            t.commit();
    }

    public void finallyClose() {
        if (t!=null && t.isActive()) 
            t.rollback();
        if (s!=null && s.isOpen())
            s.close();
    }

    public Session getS() {
        return s;
    }

    public void setS(Session s) {
        this.s = s;
    }

    public Transaction getT() {
        return t;
    }

    public void setT(Transaction t) {
        this.t = t;
    }

} 
```

通用动作：

```
public class GenericAction extends ActionSupport  {

    private DAO dao=null;  //Interceptor injects here

    public GenericAction() {
    }

...
    @JSON(deserialize=false, serialize=false)
    public DAO getDao() {
        return dao;
    }

    @JSON(deserialize=false, serialize=false)
    public void setDao(DAO dao) {
        this.dao = dao;
    }

} 
```

我的行动：

```
public class MyAction extends GenericAction {

    public MyAction() {
    }

    @Override
    public String execute() throws Exception {
        super.execute();
        UserDAO userDAO=new UserDAO(getDao().getS());
        OtherDAO otherDAO=new OtherDAO(getDao().getS());
        userDAO.loadUsers(...);
            return SUCCESS;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:28:11.067

如果这是一个 Struts2 拦截器，这**绝对不是**实现它的方法。

应用程序对**所有请求**都有一个拦截器实例，因此一个请求在方法中设置变量，`intercept`然后另一个请求进入并在第一个请求仍在处理时重置它们。然后第一个请求`session.close()`在第二个请求的会话上返回。

你的拦截器应该看起来更像这样：

```
@Override
public String intercept(final ActionInvocation invocation) throws Exception {
    final Map<String, Object> strutsSession = invocation.getInvocationContext().getSession();
    String res = null;
    Session s = null;
    Transaction t = null;
    try {
        s = sessionFactory.openSession();
        t = s.beginTransaction();
        strutsSession.put("hibernateSession", s);
        strutsSession.put("hibernateTransaction", t);
        res = invocation.invoke();
        t.commit();
    } catch (Throwable t2) {
        log.error(t2, t2);
        t.rollback();
    } finally {
        s.close();
        strutsSession.remove("hibernateSession");
        strutsSession.remove("hibernateTransaction");
    }
    return res;
} 
```

请注意，所有变量都是本地变量，除非您希望它们在请求之间共享。

此外，最好的做法是进行扩展`AbstractInterceptor`，这样您就不会拥有所有的空方法。

# cakephp - 如何隐藏 id 输入并在 cakephp 中给它一个值

> ID：15269787
> 
> 赞同：0
> 
> 时间：2013-03-07T11:18:26.967
> 
> 标签：cakephp

我有 2 个相关的模型，我想做的是在我的添加视图中我想将 id 字段设置为隐藏字段，以便它不会显示在我的添加视图中，当我将其设置为隐藏时表单不会不提交。有没有办法将 id 值作为隐藏字段传递？

这是我的添加视图

```
<?php echo $this->Form->create('ItQueryComment'); ?>
<?php echo __('Add It Query Comment'); ?>
<?php
echo $this->Form->hidden('it_query_id');
echo $this->Form->input('comment');
?>

<?php echo $this->Form->end(__('Submit')); ?> 
```

这是 ItQueries 控制器的添加功能

```
public function add() {
if ($this->request->is('post')) {
$this->ItQuery->create();
if ($this->ItQuery->save($this->request->data)) {
$this->Session->setFlash(__('The it query has been saved'));
$this->redirect(array('action' => 'index'));
} else {
$this->Session->setFlash(__('The it query could not be saved. Please, try again.'));
}
}
$itQueryTypes = $this->ItQuery->ItQueryType->find('list');
$this->set(compact('itQueryTypes'));
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:38:26.740

您不会将它们添加到视图表单中，然后只是再次将它们传递给控制器​​。

尝试在保存之前将它们添加到数据数组中：

```
if ($this->request->is('post')) {
    $this->ItQuery->create();
    // add the content before passing it on to the model
    $this->request->data['ItQuery']['it_query_id'] = $id;
    if ($this->ItQuery->save($this->request->data)) {
        ... 
    }
} 
```

表单不必知道它们。没有人可以阅读或篡改它们。

请参阅“默认值 - 隐藏！” 在[http://www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/)

# python - 詹金斯和 django：django-jenkins 运行中的 popen 时“无法分配内存”

> ID：15269788
> 
> 赞同：3
> 
> 时间：2013-03-07T11:18:30.317
> 
> 标签：python, django, jenkins, popen, django-jenkins

我正在使用 jenkins 运行我的 django 测试，使用[django-jenkins](https://github.com/kmmbvnr/django-jenkins)

几天后（不更改配置），当我运行 django-jenkins 时出现错误

```
OSError: [Errno 12] Cannot allocate memory 
```

即使我的测试通过了。

完整的错误（来自詹金斯）在这里[https://gist.github.com/apelliciari/5106439](https://gist.github.com/apelliciari/5106439)

在我的测试中，我有一些带有 Selenium 的 LiveServerTestCase。

搜索错误，我发现了这些

[Python subprocess.Popen “OSError：[Errno 12] 无法分配内存”](https://stackoverflow.com/questions/1367373/python-subprocess-popen-oserror-errno-12-cannot-allocate-memory)

[http://bramp.net/blog/2010/05/python-close_fds-issue/](http://bramp.net/blog/2010/05/python-close_fds-issue/)

希望它们有用，不幸的是，我对 python/unix 的了解不是很深，我不知道如何修复它。

有没有办法运行测试避免分叉？我不在乎他们是否需要更多时间。

# ios - 可以使用 NSURLProtocol 的子类播放视频，使用 MPMovieController 或 AVFoundation？

> ID：15269790
> 
> 赞同：5
> 
> 时间：2013-03-07T11:18:34.800
> 
> 标签：ios, mpmovieplayercontroller, avfoundation, avplayer, nsurlprotocol

我目前正在尝试将视频播放到具有自定义 NSURLProtocol 子类中定义的自定义方案的 URL。最初我使用 MPMoviePlayerController 试图完成此操作，但在遇到问题并检查堆栈溢出后，我发现 MPMoviePlayerController 没有按预期处理 NSURLProtocol 子类。

[如何使用自定义 NSURLProtocol 播放带有 URL 的电影？](https://stackoverflow.com/questions/4383388/how-to-play-movie-with-a-url-using-a-custom-nsurlprotocol)

结果我决定查看 AVFoundation 框架，但是，这似乎也不起作用。我只是想知道这是否可能，还是我想穿过墙壁？

使用 AVFoundation，我使用的方法如下所示。值得一提的是，这在使用标准 URL 指向 Internet 上托管的视频时有效，但不适用于自定义 NSURLProtocol。

```
// this doesn't work
//AVPlayer *player = [[AVPlayer alloc] initWithURL:[NSURL urlWithString:@"custom URL scheme"]];
// this works
AVPlayer *player = [[AVPlayer alloc] initWithURL:[NSURL urlWithString:@"some url to video on remote server"]];

AVPlayerLayer *layer = [AVAVPlayerLayer playerLayerWithPlayer:player];
// configure the layer
[self.view.layer addSublayer:layer];

[player play]; 
```

为了从定义的 NSURLProtocol 子类中播放，是否需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-24T06:04:28.050

最近，我设法让 NSURLProtocol 与 MPMoviePlayerController 一起工作。这主要是有用的，因为 MPMoviePlayerController 只接受一个 NSURL，所以它不允许我们传递 cookie 或标头（用于身份验证）。NSURLProtocol 的使用允许这样做。我想我会在这里为社区分享一些代码。

基本上，通过使用 NSURLProtocol，我们可以拦截 MPMoviePlayerController 和流请求之间的通信，沿途注入 cookie，或者可能离线保存流，或者将其替换为猫视频等......为此，您需要创建一个新类我的扩展 NSURLProtocol：

**MyURLProtocol.h：**

```
#import <Foundation/Foundation.h>

@interface MyURLProtocol : NSURLProtocol
+ (void) register;
+ (void) injectURL:(NSString*) urlString cookie:(NSString*)cookie;
@end 
```

**MyURLProtocol.m：**

```
#import "MyURLProtocol.h"

@interface MyURLProtocol() <NSURLConnectionDelegate> {
    NSMutableURLRequest* myRequest;
    NSURLConnection * connection;
}
@end

static NSString* injectedURL = nil;
static NSString* myCookie = nil;

@implementation MyURLProtocol
// register the class to intercept all HTTP calls
+ (void) register
{
    [NSURLProtocol registerClass:[self class]];
}

// public static function to call when injecting a cookie
+ (void) injectURL:(NSString*) urlString cookie:(NSString*)cookie
{
    injectedURL = urlString;
    myCookie = cookie;
}

// decide whether or not the call should be intercepted
+ (BOOL)canInitWithRequest:(NSURLRequest *)request {
    if([[[request allHTTPHeaderFields] objectForKey:@"BANANA"] isEqualToString:@"DELICIOUS"])
    {
        return NO;
    }
    return [[[request URL] absoluteString] isEqualToString:injectedURL];
}

// required (don't know what this means)
+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request {
    return request;
}

// intercept the request and handle it yourself
- (id)initWithRequest:(NSURLRequest *)request cachedResponse:(NSCachedURLResponse *)cachedResponse client:(id<NSURLProtocolClient>)client {

    if (self = [super initWithRequest:request cachedResponse:cachedResponse client:client]) {
        myRequest = request.mutableCopy;
        [myRequest setValue:@"DELICIOUS" forHTTPHeaderField:@"BANANA"]; // add your own signature to the request
    }
    return self;
}

// load the request
- (void)startLoading {
    //  inject your cookie
    [myRequest setValue:myCookie forHTTPHeaderField:@"Cookie"];
    connection = [[NSURLConnection alloc] initWithRequest:myRequest delegate:self];
}

// overload didReceive data
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [[self client] URLProtocol:self didLoadData:data];
}

// overload didReceiveResponse
- (void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse *)response {
    [[self client] URLProtocol:self didReceiveResponse:response cacheStoragePolicy:[myRequest cachePolicy]];
}

// overload didFinishLoading
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [[self client] URLProtocolDidFinishLoading:self];
}

// overload didFail
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [[self client] URLProtocol:self didFailWithError:error];
}

// handle load cancelation
- (void)stopLoading {
    [connection cancel];
}

@end 
```

**用法：**

```
[MyURLProtocol register];
[MyURLProtocol injectURL:@"http://server/your-video-url.mp4" cookie:@"mycookie=123"];
MPMoviePlayerController* moviePlayer = [[MPMoviePlayerController alloc]initWithContentURL:@"http://server/your-video-url.mp4"];
[moviePlayer play]; 
```

# python - 通过 Python 中的文本文件的索引创建矩阵

> ID：15269796
> 
> 赞同：2
> 
> 时间：2013-03-07T11:18:58.387
> 
> 标签：python, matrix

我有以下问题，我有一个由另一个程序生成的矩阵并写入一个txt文件，文件如下所示：（我只包含了部分矩阵，总共36行）

```
 1     1   7.225655E+03
 1     2   0.000000E+00
 1     3   0.000000E+00
 1     4   0.000000E+00
 1     5   2.384466E+04
 1     6   0.000000E+00
 2     1   0.000000E+00
 2     2   7.225655E+03         .
          .
          .
 5     5   4.175514E+06
 5     6   0.000000E+00
 6     1   0.000000E+00
 6     2  -2.829306E+03
 6     3   0.000000E+00
 6     4   0.000000E+00
 6     5   0.000000E+00
 6     6   3.916341E+06 
```

我已经在一个 numpy 数组中加载了这个矩阵，但现在我想编写一个简单的函数，根据前两列的索引将值放入 6x6 矩阵中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:24:41.930

如果`a`是您从文件中读取的树列矩阵，则应执行以下操作：

```
>>> m = np.zeros((6,6))
>>> for row, col, val in a:
...    m[row - 1, col - 1] = val 
```

# python - 使用 Python 解析多个 vCard

> ID：15269797
> 
> 赞同：3
> 
> 时间：2013-03-07T11:19:05.740
> 
> 标签：python, vcf-vcard, vobject

我从 Google 的联系人导出功能中获得了一个 vcf 文件。它是用 UTF-8 编码的，但我的 WinMobile 电话需要将 win1251 字符导入通讯录。我将其重新编码为 win1251 并尝试使用[vObject](http://vobject.skyhouseconsulting.com/)库解析文件。结果我得到的是混合字段，其中一些被正确编码为 Unicode，而另一些被替换为“?????” 文本。例如，我包含了这样一个联系人的 prettyPrint：

```
 VCARD
    TEL: +7812000000
    params for  TEL:
       aKey TYPE [u'CELL']
    TEL: +7921000000
    params for  TEL:
       aKey TYPE [u'HOME']
    URL: http\://www.diamantstroy.spb.ru
    X-ABLABEL: _$!<HomePage>!$_
    N:  Alexei  ??????? 
    VERSION: 3.0
    ORG: [u'\u041e\u041e\u041e \u0414\u0438\u0430\u043c\u0430\u043d\u0442-\u0421\u0442\u0440\u043e\u0439-\u0421\u0435\u0440\u0432\u0438\u0441']
    FN: Alexei ??????? 
```

我在源代码中找不到一个地方，我应该应用某种编码（）/解码（）补丁来满足我的需要。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T14:32:58.577

当您将输入传递给`readOne`（或您正在使用的任何解析函数）时，请确保您的输入是 unicode。如果您想回到 Windows-1251 编码，请在解析 vcard 后使用`result.encode('cp1251')`或`codecs.open(filename, 'w', 'cp1251').write(result)`.

您要通过的流程有点令人困惑。你在做`phone -> google -> code`，还是因为你使用了“[期望](https://stackoverflow.com/q/15269797/2087463)”这个词，你在做`google -> code -> phone`吗？

这个[答案](https://stackoverflow.com/a/5807248/2087463)可能有助于转换。

# c# - 是否有像 string.Space 这样的命名常量来替换“”

> ID：15269798
> 
> 赞同：13
> 
> 时间：2013-03-07T11:19:06.760
> 
> 标签：c#

使用`string.Empty`而不是`""`真的很可爱，并且使代码更清晰。我想知道是否也有一个好的命名常量可以替换`" "`。我发现了一些想法，例如使用`string.Empty.PadLeft(1)`or `string.Empty.PadRight(1)`，但我不喜欢它。

喜欢`string.Space`使用而不是`" "`适合这种情况的东西。

（评论后编辑）

为了让我的问题更清楚：

在多元文化的情况下，不应该有像`"Can not open the file"`. 应将字符串文字移至资源文件，然后使用 like `Resources.CanNotOpenTheFile`。

为了确保发生这种情况，这似乎是一个很好的规则，代码中不要有任何字符串文字。所以看一眼代码，就能很快找到不好的实现。我认为这很好地解释了为什么我试图不在`"`代码中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:20:41.393

没有，但您可以定义自己的。

```
public static class MyString 
{
    public const string Space = " ";
} 
```

然后像这样使用它：

```
Console.Write("Test" + MyString.Space + "Text"); 
```

**编辑**但你不应该，IMO *（并且基于 Marc Gravell 和 PaulRuane 的评论）*，因为这会使代码的可读性降低

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:27:37.170

使用常量字符，真的不需要像 Habib 推荐的那样使用字符串。

```
public static class StringTools
{
    public const char Whitespace = ' ';
} 
```

# ruby-on-rails - has_many 与多态关联中的 class_name

> ID：15269802
> 
> 赞同：3
> 
> 时间：2013-03-07T11:19:20.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

在我的新 Rails 项目中，我需要访问我的旧数据库。所以我创建了一些遗留模型。我在照片和评论之间有一个多态关联（commentable_id 和 commentable_type）

当我打电话

> 旧版::Photo.last.comments

它不起作用，因为 commentable_type 是“Photo”而不是“LegcayPhoto”。

```
SELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = $1 AND "comments"."commentable_type" = $2  [["commentable_id", 123], ["commentable_type", "Legacy::Photo"]] 
```

遗留/照片.rb

```
module Legacy
  class Photo < ActiveRecord::Base
    establish_connection "legacy_#{Rails.env}"
    belongs_to :user, :class_name => 'Legacy::User' #works fine
    has_many :comments, :class_name => 'Legacy::Comment', :as => :commentable
  end
end 
```

遗留/comment.rb

```
module Legacy
  class Comment < ActiveRecord::Base
    establish_connection "legacy_#{Rails.env}"
    #?? belongs_to :commentable,  :polymorphic => true
  end
end 
```

我在 legacy/comments.rb 中也有问题。有没有办法为 belongs_to :commentable, :polymorphic => true 添加命名空间？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-15T11:36:10.833

也许不是最理想的方法，但`has_many`您现在可以轻松定义一个返回 ActiveRecord 查询的方法，而不是构建关联，该方法模仿`has_many`返回的内容：

```
module Legacy
  class Photo < ActiveRecord::Base
    establish_connection "legacy_#{Rails.env}"
    belongs_to :user, :class_name => 'Legacy::User' #works fine

    def comments
      Comment.where("commentable_type='LegacyPhoto' AND commentable_id=?", self.id)
    end
  end
end 
```

现在，您仍然可以这样说：

```
Legacy::Photo.comments.where(created_at > 1.day.ago) 
```

它仍然可以工作。

# javascript - 如何在 angularjs 准备好的 $rootScope 上注册一个函数

> ID：15269803
> 
> 赞同：17
> 
> 时间：2013-03-07T11:19:21.510
> 
> 标签：javascript, jquery, angularjs, frontend

我需要在 angularjs 中注册一个随处可用的方法。此方法有 2 个参数（资源 id，删除成功时的回调），它使用资源提供者来实际删除项目。

然后注册它，我需要 angularjs 向我注入`$rootScope`and `MyResourceProvider`。我的第一个想法是在我的主页控制器中执行此操作：

```
    var HomeCtrl = function ($rootScope, MyResourceProvider) {
        $rootScope.confirmAndDeletePackage = function (sId, fCallback) {
            // 做一些事情
            MyResourceProvider.delete({id: sId}, fCallback);
        }
    }

```

这里开始实际上我的问题。这在常规导航（主页 -> 列表 -> 选择 -> 删除）中工作正常，但如果用户直接访问删除按钮可用的页面，而无需通过主页，则此方法将不可用（因为HomeController 尚未初始化）...

所以，我的问题是我可以将这段代码移动到哪里，以确保它始终在应用程序引导程序中执行。

我尝试过，`myApp.config()`但没有成功...

任何想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-07T15:18:38.470

正如评论中提到的@ganaraj，服务可能是更好的选择。

但是，要回答您的问题，您可以使用[run()](http://docs.angularjs.org/api/angular.Module#run)方法。

```
myApp.run(function($rootScope, MyResourceProvider) {
    $rootScope.confirmAndDeletePackage = function (sId, fCallback) {
        // do some stuff
        MyResourceProvider.delete({id: sId}, fCallback);
    }
}) 
```

在加载所有模块后调用 run()。

# javascript - AmplifyJS 不在本地存储中存储 JavaScript 数组

> ID：15269813
> 
> 赞同：0
> 
> 时间：2013-03-07T11:20:29.577
> 
> 标签：javascript, jquery, arrays, local-storage, amplifyjs

我在使用 AmplifyJS 时遇到问题，我将数组数组存储到本地存储中，使用 的键进行设置，`product_array_to_add`然后尝试使用以下命令访问它：

`var prod_array = amplify.store('product_array_to_add');`

我得到一个空数组。

```
// this code works
var product_ids = amplify.store('product_ids_to_add').split(':');
console.log(product_ids);

// both console output statements produce empty arrays
var prod_array = amplify.store('product_array_to_add'); 
console.log(prod_array);
console.dir(prod_array); 
```

以下代码是我*设置*值的方式：

```
amplify.store('product_ids_to_add', product_ids);
amplify.store('product_array_to_add', ProductsArr); 
```

AmplifyJS 是否存在存储数组数组的问题？我无法访问数组还有其他原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:28:38.093

从那以后，我发现问题归结于我没有将 JS 对象推入数组。所以我改变了我的代码来做到这一点，Amplify 很高兴允许我在另一端检索数据。

```
var ProductsArr = new Array();

$.each($("#container .product"), function(){

   productObj = {       
      name: $(this).find('.prod_name').text(),
      code: $(this).find('.prod_code').text(),
      price: parseInt($(this).find('.prod_price').text()),
      prod_id: $(this).find('.size_select').val()                       
   };

   ProductsArr.push(productObj);        

});

amplify.store('product_array_to_add', ProductsArr); 
```

# php - Php/Mysql：CAST/CASE 如果行 + '_remove' 存在则不要选择

> ID：15269816
> 
> 赞同：1
> 
> 时间：2013-03-07T11:20:39.140
> 
> 标签：php, mysql, sql, casting, case

我想在我的查询中包含一个非常具体的内容`CAST/CASE`，但我不确定如何执行此操作。这是我的 SQL 行：

```
SELECT * FROM table WHERE (

         type = 'aaa' OR
         type = 'bbb' OR
         type = 'ccc' OR
         type = 'ddd')

         AND (points NOT LIKE '-%')

         ORDER BY id DESC LIMIT 10 
```

我想要执行的是：

```
if   : 'type'_remove EXISTS and 'type'->data == 'type'_remove->data
then : Don't select the 'type' row. 
```

示例，以及我希望查询选择或不选择的内容：

```
id    type          data  points
----------------------------------
1     aaa            1      1     don't select : aaa_remove exists and data are the same
2     bbb            1      3     select       : bbb_remove exists BUT data aren't the same
3     ddd            1     -1     don't select : points IS LIKE '-%'
4     aaa_remove     1     -1
5     ddd            1     -3     don't select : points IS LIKE '-%'
6     bbb_remove     2     -1
7     ccc            1      1     select       : ccc_remove doesn't exists with the same data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:33:34.967

我建议使用一个名为 的字段`removed`，这会使整个事情变得更容易/更干净，但如果你有你的理由，你可以试试这个：

```
SELECT *
FROM `table` AS `outer`
WHERE
    `outer`.`type` IN('aaa', 'bbb', 'ccc', 'ddd') AND
    `outer`.`points` >= 0 AND
    (
        SELECT `inner`.`id`
        FROM `table` AS `inner`
        WHERE
            `inner`.`type` = CONCAT(`outer`.`type`, '_remove')  AND
            `inner`.`data` = `outer`.`data`
        LIMIT 1
    ) IS NULL
ORDER BY `outer`.`id` DESC
LIMIT 10; 
```

此外，如果您要对许多类型进行相同的基本设置，您可以只选择`type NOT LIKE '%_remove'`而不是列出您想要的所有类型。

# facebook - Facebook API 帖子以提供更大的图像？

> ID：15269818
> 
> 赞同：5
> 
> 时间：2013-03-07T11:20:40.510
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins, facebook-sharer

我尝试将帖子自动分享到我的 Facebook 页面。它工作得很好，但我想在共享帖子中使用更大的图像。 [http://cdn.tips4php.net/wp-content/uploads/2010/12/final_post.jpg](http://cdn.tips4php.net/wp-content/uploads/2010/12/final_post.jpg)

我使用以下代码发布它：

```
 try {
 $page_info = $facebook->api("/$pageId?fields=access_token");

 $attachment = array(
 'access_token' => $MYACCESTOKEN,
 'message' => $msg,
 'name' => $title,
 'link' => $uri,
 'description' => $desc,
 'picture'=>$pic,
 'actions' => json_encode(array('name' => $action_name,'link' => $action_link))
 );

$status = $facebook->api("/$pageId/feed", "post", $attachment);

 } catch (FacebookApiException $e) {
 error_log($e);
 $user = null;
 } 
```

我怎样才能在这篇文章中使用更大的图片？我从其他 Facebook 页面看到了一些共享的帖子，它们有大图。等待你的答复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T16:05:20.810

仅当管理员手动共享图像/帖子时，才会显示较大的图像。如果您使用 API，Facebook 会故意使用较小的图像。基本上，Facebook 希望促进手动共享内容，而不是自动共享。

在你看到的例子中，有没有像你的截图那样有“via xxx app”？这是关于帖子是手动共享还是通过应用程序共享的赠品。

# java - Java：重命名文件系统中的文件（修剪扩展名）

> ID：15269820
> 
> 赞同：0
> 
> 时间：2013-03-07T11:20:46.960
> 
> 标签：java, file

我正在尝试使用这种方式修剪文件系统中的文件扩展名：

```
private void passingFileRename(File f) throws Exception 
{
  String filename = f.getName();
  String ext = ".txt";

  File newfile = new File(filename.substring(0, filename.length() - ext.length()));
  f.renameTo(newfile); 
} 
```

但它不起作用，我得到了`filename`but`renameTo`方法似乎被锁定或什么的..我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:29:05.823

请看这个[问题](https://stackoverflow.com/questions/1000183/reliable-file-renameto-alternative-on-windows)。看起来Java的`file.renameTo(file)`问题很大。

# android - 在没有 3G 连接的情况下创建 android AVD

> ID：15269821
> 
> 赞同：2
> 
> 时间：2013-03-07T11:20:47.253
> 
> 标签：android, android-emulator, emulation, android-wifi

我的应用程序中的一项功能通过互联网发送数据。在尝试发送数据之前，我检查是否存在连接：

```
private boolean isConnected() {
    ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo.State val1 = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState();
    NetworkInfo.State val2 = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState();
    return NetworkInfo.State.CONNECTED.equals(val1) || NetworkInfo.State.CONNECTED.equals(val2);
} 
```

这在模拟器和我测试过的几个真实设备上运行得非常好。然后我收到了客户的错误报告，经调查发现是`NullPointerException`在线`getState`的`TYPE_MOBILE`.

显然，在没有 3G 的设备（仅限 WiFi 的平板电脑）上`connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)`返回。`null`虽然我在 Nexus 7 模拟器上进行了测试，但我没有收到此错误。

因此，我感兴趣的是创建一个明确没有 3G 的 AVD（即仅用于 WiFi 设备的 AVD），以便我可以调查/测试此类场景。我在模拟器选项中没有找到任何东西，但也许我只是在找错地方。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:10:32.757

您应该能够更改 AVD 的硬件设置以移除调制解调器。该选项标记为`hw.gsmModem`，但我相信它会禁用所有“手机数据”连接，而不仅仅是 GSM。

如果您想在不使用 AVD 管理器的情况下更改硬件选项，请编辑`config.ini`avd 文件夹中的文件。默认情况下，该文件夹位于：

*   **Linux/Mac：** ~/.android/avd/yourAvdName

*   **Windows Vista/7/(8?):** C:\Users\.android\yourAvdName

*   **Windows XP：** C:\Documents and Settings\.android\yourAvdName

只需添加一行内容：

```
hw.gsmModem=no 
```

有关更多详细信息，请参见[此处](http://developer.android.com/tools/devices/managing-avds.html#hardwareopts)和[此处](http://developer.android.com/tools/devices/managing-avds-cmdline.html)。

* * *

但是，您可以通过`F8`在模拟器中按下来关闭 3G 来测试它。我不知道这是否会模拟您正在寻找的空值，但值得一试。

有关更多快捷方式，请参见[此处](http://developer.android.com/tools/help/emulator.html#KeyMapping)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:48:09.673

我不相信有一个简单的解决方案。同时，我采用了如下代码：

```
private boolean isConnected(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info1 = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    NetworkInfo info2 = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    NetworkInfo.State val1 = (info1 == null ? null : info1.getState());
    NetworkInfo.State val2 = (info2 == null ? null : info2.getState());
    return (info1 != null && NetworkInfo.State.CONNECTED.equals(val1)) || (info2 != null && NetworkInfo.State.CONNECTED.equals(val2));
} 
```

`null`当接口不存在时，这会处理值。

# java - 如何在java中使用resttemplate传递键值对

> ID：15269822
> 
> 赞同：27
> 
> 时间：2013-03-07T11:20:47.627
> 
> 标签：java, resttemplate

我必须在发布请求的正文中传递键值对。但是当我运行我的代码时，我收到错误消息“无法写入请求：没有为请求类型 [org.springframework.util.LinkedMultiValueMap] 和内容类型 [text/plain] 找到合适的 HttpMessageConverter”

我的代码如下：

```
MultiValueMap<String, String> bodyMap = new LinkedMultiValueMap<String, String>();
bodyMap.add(GiftangoRewardProviderConstants.GIFTANGO_SOLUTION_ID, giftango_solution_id);
bodyMap.add(GiftangoRewardProviderConstants.SECURITY_TOKEN, security_token);
bodyMap.add(GiftangoRewardProviderConstants.REQUEST_TYPE, request_type);

HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.TEXT_PLAIN);

HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<MultiValueMap<String, String>>(bodyMap, headers);

RestTemplate restTemplate = new RestTemplate();
ResponseEntity<String> model = restTemplate.exchange(giftango_us_url, HttpMethod.POST, request, String.class);
String response = model.getBody(); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-08T15:17:45.467

`FormHttpMessageConverter`用于转换对象以`MultiValueMap`在 HTTP 请求中发送。此转换器的默认媒体类型是`application/x-www-form-urlencoded`和`multipart/form-data`。通过将内容类型指定为`text/plain`，您告诉 RestTemplate 使用`StringHttpMessageConverter`

```
headers.setContentType(MediaType.TEXT_PLAIN); 
```

但是该转换器不支持转换 a `MultiValueMap`，这就是您收到错误的原因。你有几个选择。您可以将内容类型更改为`application/x-www-form-urlencoded`

```
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED); 
```

或者您不能设置内容类型并让 RestTemplate 为您处理它。它将根据您尝试转换的对象确定这一点。尝试使用以下请求作为替代。

```
ResponseEntity<String> model = restTemplate.postForEntity(giftango_us_url, bodyMap, String.class); 
```

# git - Git：暂时恢复推送的提交

> ID：15269824
> 
> 赞同：1
> 
> 时间：2013-03-07T11:20:48.257
> 
> 标签：git, reset, undo, revert

比如说，您已经推送了一些提交并将它们拉入生产环境，例如在您的服务器的 webroot 中。然后出了点问题。显然，您通常想要做的是将 webroot 中的文件暂时恢复到以前的状态，然后返回您的本地开发位置，修复损坏的地方，测试它，在损坏的提交之上提交并推送这些新的修复提交到主分支。然后再次转到生产 webroot 并将所有内容拉到最新提交，这样所有内容都已修复并正常工作。然后每个人都可以拉出 master 分支，而不必担心提交失败或重置 git head 或其他令人沮丧的事情。

**那么：这是一种合法且安全的方法吗**

*在生产 webroot 中，在 master 分支上*

```
>git log --pretty=format:"%h %ad | %s [%an]" --date=short

0fu83bd Wed Mar 6 17:47:42 2013 | Merge branch 'sample' [developer1]
fd442f8 Wed Mar 6 17:47:10 2013 | Some updates [developer1]
ad84471 Wed Mar 6 17:25:12 2013 | Added something [developer2] 
```

*找到你想暂时恢复文件状态的提交，比如**ad84471***

```
>git checkout ad84471
>git branch
* (no branch)
  master 
```

*去任何你开发、修复、提交、[合并]、推送主分支的地方。当您这样做时，生产文件处于 ad84471 状态，没有人修改它们。然后回到生产 webroot：*

```
>git checkout master
>git pull
>git branch
* master
>git log --pretty=format:"%h %ad | %s [%an]" --date=short
7guffbd Wed Mar 6 17:47:42 2013 | Fixed 0fu83bd bugs [developer1]   <---new commit
0fu83bd Wed Mar 6 17:47:42 2013 | Merge branch 'sample' [developer1]
fd442f8 Wed Mar 6 17:47:10 2013 | Some updates [developer1]
ad84471 Wed Mar 6 17:25:12 2013 | Added something [developer2] 
```

*现在我们在 master 分支中，一切正常。每个人都只需拉出最新的更改就可以了。*

我已经使用 md5deep 检查了文件，以确保一切都返回（在修复之前）到我们恢复的状态：

```
>md5deep -rel webroot > hashes_master_before_checkouting_ad84471
>git checkout ad84471
>git checkout master
>md5deep -rel webroot > hashes_master_after_checkouting_master_again 
```

*这些哈希之间的差异仅显示*

```
webroot/.git/logs/HEAD
webroot/.git/index 
```

*已经改变。*

所以这似乎是一个快速修复问题的好方法，或者我错了？

免责声明：我知道在很多项目中这与预期的工作流程背道而驰，而且这种做法不是很好，而且之前应该有自动化测试，但是对于开发人员很少的小项目，这通常是不可能或不切实际的，因此与使用 git reset 或 revert 相比，此方法可以节省大量时间并简化事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:29:55.667

对我来说，紧急修复似乎很好。

如果您想更加“严谨”，您可以改为从“已知良好”提交中创建一个分支并在生产中检查它，因为它会留下更多的审计线索。

在开发机器上：

```
git branch hotfix-20130307 ad84471
git push origin hotfix-20130307 
```

在产品机器上：

```
git fetch
git checkout hotfix-20130307 
```

然后在 master 分支修复后，只需在 prod 机器上再次 checkout master 并更新它：

```
git checkout master
git pull 
```

这样做的好处是，如果有人去生产机器并运行`git branch`，他们会得到更多信息，并且可能会`hotfix-20130307`在错误跟踪器中找到分支的一些记录，并知道为什么这样做。如果它是一个小团队，并且唯一可能查看 prod 机器的人已经知道情况如何，那么这可能是矫枉过正。

# java - 如何在java中处理ClassCastException

> ID：15269827
> 
> 赞同：0
> 
> 时间：2013-03-07T11:20:57.197
> 
> 标签：java

我有一个基类和一个派生类。我正在编写的代码是

```
class Base {
    ...
}

class derived extends base {
}

class Main {
    public static void main(String[] args){
        derived d = (derived) new Base(); //throws a ClassCastException 
    }
} 
```

这是如何处理的？我想在不使用 super 关键字的情况下调用基类方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:23:48.440

基类是超类，派生类是子类。您无法在子类的引用中捕获超类的对象。

```
Base b = new Derived(); 
```

以上说明可行，但

但以下将不起作用。

```
Derived d = new Base(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:39:49.940

你可以只调用超类的方法而不使用 super。

根据：

```
public class Base {

    public void print() {
        System.out.println("Base");
    }

} 
```

衍生的：

```
public class Derived extends Base {...} 
```

主要的：

```
public static void main(String[] args) {
    Derived d = new Derived();
    d.print();
} 
```

打印出来：

`Base`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:20:57.453

在 java 中不能向下转换。只有当基类存储派生类的引用时才有可能

```
Base b = new Derived()

// Check is required. It may lead to ClassCastException otherwise
if (b instancof D)     
    Derived d = (Derived) b; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:46:09.417

实际上“Base”不是“Derived”，因此无法进行强制转换。

在以下情况下是可能的

Base b = new Derived() Derived d = (Derived)b;

# facebook-like - Facebook 新的“内联”按钮

> ID：15269828
> 
> 赞同：0
> 
> 时间：2013-03-07T11:20:57.607
> 
> 标签：facebook-like, inline

在过去的几天里，我注意到，每当我从某个有 facebook 页面的网站分享一个网页并且我还没有喜欢这个页面时，我会在我的新闻源上得到一个喜欢按钮，上面写着“想了解更多关于 xyz 的信息吗？ " 和一个“喜欢页面”按钮。但是，并非我测试过的每个网站/页面都具有此功能，我想知道我们是否需要在 Facebook 页面或网站上进行任何更改以使这种“魔术”发生： -)

谢谢，P

# android - 从 Android 应用托管本地网页

> ID：15269830
> 
> 赞同：2
> 
> 时间：2013-03-07T11:20:59.403
> 
> 标签：android, ip, host

我刚刚开始使用一个名为“wifi 文件传输”的应用程序。它的工作方式是您在手机上运行该应用程序，手机托管一个网页，您可以从该网络上的任何计算机使用手机 IP 地址和端口号访问它。

我只是想知道它是如何工作的，任何人都知道任何教程或任何我可以开始的地方吗？

编辑：我正在寻找 java 代码来看看它是如何工作的，而不仅仅是另一个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:49:55.260

您可以尝试[NanoHTTPD](http://elonen.iki.fi/code/nanohttpd/)。它体积小、重量轻且易于配置。

# php - 使用方法 get 从下拉菜单中获取不同的值

> ID：15269832
> 
> 赞同：0
> 
> 时间：2013-03-07T11:21:02.560
> 
> 标签：php, forms

如何使用 $_GET 获得不同的值

问题是我想包含不同选项的不同脚本

代码：

```
 <Select NAME="offer">
 <Option VALUE="status">Status</option>
 <Option VALUE="company">Advertisers</option>
 <Option VALUE="category">Categories</option>
 <Option VALUE="country">Countries</option>
 <Option VALUE="default_payout">Payouts</option>
 </Select>

<?php if(isset($_GET['offer'])== status){ 
               include_once 'include/offer.php'; 
               include_once 'include/offer_tabel.php'; 
      }

      if(isset($_GET['offer']) == 'company'){
                include_once 'include/advertiser.php';
                include_once 'include/advertiser_tabel.php';

}
?> 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:22:02.033

将其更改`if(isset($_GET['offer'])== status`为

```
if(isset($_GET['offer']) &&  $_GET['offer'] == 'status') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:23:49.457

你使用了错误的 if 条件。用这个：

```
if(isset($_GET['offer']) && $_GET['offer'] == 'status') 
```

公司也一样

```
if(isset($_GET['offer']) && $_GET['offer'] == 'company') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:34:29.147

你错了：

```
if(isset($_GET['offer'])== status){ 
```

`isset()`函数返回一个`bool`值： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

编写脚本的好方法是：

```
<?php
    if(isset($_GET['offer'])){
        switch(strtolower(trim($_GET['offer']))){
            case 'status':
                // include your files for status offer
            break;

            case 'company':
                // include your files for company offer
            break;

            default:
                //Some default action
            break;
        }
    }
    else {
        //No offer selected
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:24:01.347

问题是，您不能`isset()`用来与其他字符串进行比较。因为这个函数只会返回**布尔**值。将其更改为，

```
<?php if(isset($_GET['offer']) && ($_GET['offer'] == 'status')){ 
               include_once 'include/offer.php'; 
               include_once 'include/offer_tabel.php'; 
      }

      if(isset($_GET['offer']) && ($_GET['offer'] == 'company')){
                include_once 'include/advertiser.php';
                include_once 'include/advertiser_tabel.php';

       }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:58:21.270

除了其他答案之外，请确保您的表单方法是`get`和不是`post`; 否则，您将需要测试 的值`$_POST['offer']`。

# java - MQ 异步处理、聚合和发布数据

> ID：15269833
> 
> 赞同：7
> 
> 时间：2013-03-07T11:21:04.927
> 
> 标签：java, notifications, redis, message-queue, dataflow

*一些背景，在真正的问题之前：*

我正在开发一个由几个不同模块组成的后端应用程序。目前，每个模块都是一个命令行 java 应用程序，它是“按需”运行的（稍后会详细介绍）。

每个模块都是一个“步骤”，是您可以将其视为数据流的更大流程的一部分；第一步从外部源收集数据文件并将它们推送/加载到一些 SQL 数据库表中；然后以下步骤，根据不同的条件和事件（时间、数据库中数据的存在、通过 Web 服务/Web 接口完成的消息和详细说明），从（1 个或多个）数据库表中获取数据，处理它们，并将它们写在不同的桌子上。步骤在三个不同的服务器上运行，并从三个不同的 DB 读取数据，但仅写入单个 DB。目的是聚合数据、计算指标和统计数据。

目前，每个模块都是定期执行的（从第一个模块的几分钟/小时，到链中最后一个模块的几天，这需要聚合更多数据，因此等待它们“更长”时间才能可用），使用定时任务。一个模块（目前是一个 java 控制台应用程序）正在运行，它检查数据库在给定的日期时间窗口中是否有新的、未处理的信息，并完成它的工作。

问题：它有效，但是.. 我需要扩展和维护它，这种方法开始显示其局限性。

1.  我不喜欢依赖“投票”；这是一种浪费，考虑到先前模块的信息可能足以“告诉”链条下游的其他模块，当它们需要的信息可用时，它们可以继续进行。
2.  它是“慢”的：链下模块的几天延迟是存在的，因为我们必须确保数据到达并由之前的模块处理。所以我们“停止”这些模块，直到我们确定我们拥有所有数据。新增内容需要对某些指标进行实时（不难，但“尽快”）计算。一个很好的例子是这里发生的事情，在 SO 上，有徽章！:) 我需要获得一些非常相似的东西。

为了解决第二个问题，我将介绍“部分”或“增量”计算：只要我有一组相关信息，我就会对其进行处理。然后，当一些其他链接信息到达时，我计算差异并相应地更新数据，但我还需要通知其他（依赖）模块。

## 问题

~~- 1) 最好的方法是什么？- 2）相关：这是“通知”其他模块（在我的情况下是java可执行文件）相关数据可用的最佳方式？~~

我可以看到三种方式：

~~*   将其他“非数据”表添加到数据库中，每个模块在其中写入“嘿，我已经完成了这个并且它是可用的”。当 cronjob 启动另一个模块时，它读取表，决定他可以计算子集 xxx，然后执行它。等等*   使用消息队列，如 ZeroMQ，（或 Apache Camel，如建议的@mjn）而不是 DB 表~~
*   ~~使用键值存储，例如 Redis，而不是 DB 表~~

> 编辑：我确信基于队列的方法是可行的方法，我添加了“表+轮询”选项以确保完整性，但现在我明白这只是一种干扰（显然，每个人都会回答“是的，使用队列，投票是邪恶的”——这是正确的！）。因此，让我将问题重新表述为： **与 Redis 之类的带有 pub/sub 的键值存储相比，使用 MQ 有哪些优点/缺点？**

*   3）有什么解决方案可以帮助我完全摆脱 cronjobs 吗？

> 编辑：特别是，在可能的情况下，这意味着：**在某些 MQ 和/或键值存储中是否有一种机制可以让我发布带有“时间”的消息？**比如“1天送达”？有了坚持和“几乎一次”的交付保证，显然

*   4) 我是否应该将此基于消息（事件？）的解决方案构建为集中式服务，在其中一台服务器上将其作为守护程序/服务运行？
*   5）我是否应该放弃按需启动订阅者的想法，让每个模块作为守护程序/服务连续运行？
*   6) 有哪些优点和缺点（可靠性、单点故障与资源使用和复杂性......）？

> 编辑：这是我最关心的一点：我想自己“排队”以根据队列中的消息激活“模块”，类似于 MSMQ 激活。**这是个好主意吗？Java 世界中有什么可以做到的吗，我应该自己实现它（通过 MQ 还是通过 Redis），还是应该将每个模块作为守护进程运行？**（即使某些计算通常是突发的，两个小时的处理，然后是两天的空闲时间？）

注意：我不能使用重型容器/EJB（没有 Glassfish 或类似的）

> 编辑：骆驼对我来说似乎也有点太重了。我在**这里寻找真正轻松的东西**，无论是在资源方面还是在开发的复杂性方面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:41:55.870

队列任务描述部分听起来像基于“[企业集成模式](http://camel.apache.org/enterprise-integration-patterns.html)”的系统，如[Apache Camel](http://camel.apache.org/)所做的。

[延迟消息](http://camel.apache.org/delayer.html)可以用常量表示

```
from("seda:b").delay(1000).to("mock:result"); 
```

或变量，例如消息头值

```
from("seda:a").delay().header("MyDelay").to("mock:result"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:59:51.677

1> 我建议使用消息队列，根据你的要求选择队列，但大多数情况下任何人都可以，我建议你选择基于协议JMS（活动mq）或AMQP（兔子mq）的队列并编写一个简单的包装它或使用 spring-> spring-jms 或 spring-amqp 提供的那些

2> 您可以编写队列消费者，以便他们通知您的系统有新消息到达，例如在兔子中，您可以实现 MessageListener 接口

```
 public class MyListener implements MessageListener {
     @Override
public void onMessage(Message message) {
     /* Handle the message */        

    }
} 
```

3> 如果你像 <2> 那样使用异步消费者，你可以摆脱所有轮询和 cron 作业

4> 取决于您的要求 -> 如果您有数百万个事件/消息通过您的队列，那么在集中式服务器上运行队列中间件是有意义的。

5> 如果资源消耗不是问题，那么让您的消费者/订阅者一直运行是最简单的方法。如果这些消费者是分布式的，那么您可以使用诸如 zookeeper 之类的服务来编排它们

6> 可扩展性 -> 大多数队列系统都提供了简单的消息分发，因此只要您的消费者是无状态的，那么只需添加新的消费者和一些配置就可以进行扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T13:37:44.680

实施后，我觉得回答我自己的问题对将来会来访问 StackOverflow 的人有好处。

最后，我选择了 Redis。它*真的*很快，而且可扩展。而且我非常喜欢它的灵活性：它比消息队列灵活得多。我是否断言 Redis 在 MQ 方面比现有的各种 MQ 更好？好吧，在我的具体情况下，我相信是这样。关键是：如果某些东西不是开箱即用的，您可以构建它（通常使用 MULTI - 但您甚至可以使用 LUA 进行更高级的定制！）。

例如，我遵循[这个很好的答案](https://stackoverflow.com/a/13870139/863564)来实现一个“持久的”、可恢复的 pub/sub（即允许客户端死亡并重新连接而不会丢失消息的 pub/sub）。

这对我的可扩展性和“可靠性”要求都有帮助：我决定让管道中的每个部分保持独立（现在是一个守护进程），但添加一个监视器来检查 Redis 上的列表/队列；如果某些东西没有被消费（或消费太慢），监视器就会产生一个新的消费者。我也在想真正的“弹性”，增加消费者在无事可做时自杀的能力。

另一个例子：计划活动的执行。我目前正在遵循[这种](https://stackoverflow.com/a/4342350/863564)似乎很流行的方法。但我很想尝试[keyspace 通知](http://redis.io/topics/notifications)，看看是否将过期密钥和通知结合起来是一种更好的方法。

最后，作为一个访问 Redis 的库，我选择了 Jedis：它很受欢迎，受支持，并且提供了一个很好的接口来实现 pub/sub 作为监听器。这不是 Scala 的最佳方法（惯用），但效果很好。

# html - 多部分请求中的“部分”是什么？

> ID：15269835
> 
> 赞同：4
> 
> 时间：2013-03-07T11:21:16.027
> 
> 标签：html, forms, multipartform-data

我喜欢这个主题中的问答对：

[enctype='multipart/form-data' 是什么意思？](https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean)

我觉得缺少的是浏览器/服务器如何感受到普通表单帖子和`multipart`帖子之间的区别。因为作为用户，我认为浏览器对表单提交的反应没有什么不同，而作为一名想要成为 Web 开发人员的人，我会收到整个帖子（例如文件），而不是“部分”......

***一个好的答案可以解释multipart*中的*部分*到底是什么？**

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:39:57.243

就像您提到的问题中提到的那样，可以通过两种方式`post`发送表单的编码：`application/x-www-form-urlencoded`或`multipart/form-data`.

它们都将在请求的正文中`post`发送。而不是像`get`它与 url 本身一起传递的地方。

这是两者的示例：http: [//www.htmlcodetutorial.com/forms/form_enctype.html](http://www.htmlcodetutorial.com/forms/form_enctype.html)

您可以说`part`是`get`请求的 urlencoded 形式的参数名称的另一种表示形式。

**urlencoded：** `realname=` **部分：** `Content-Disposition: form-data; name="realname"`

不同的部分由标题中定义的边界分隔： `Content-type: multipart/form-data; boundary=---------------------------7cd1d6371ec`

**编辑** 床边编码的区别最重要的是，`multipart/form-data`客户端可以向键/值对添加其他信息，例如值的类型（例如`Content-Type: image/jpeg`）或文件名。有了这些信息，服务器就可以对不同类型的值执行某些操作。

使用`application/x-www-form-urlencoded`时，无法以标准化方式存储键/值对的附加信息。

这就是为什么你必须使用`multipart/form-data`如果你想用`post`请求提交文件的原因。这不是因为无法将文件作为 url 格式的 base64 编码值传递，而是因为 urlencoding 没有标准的方法来告诉服务器它是文件而不是字符串。*

# caching - Symfony2.2 渲染 ESI 模板

> ID：15269836
> 
> 赞同：2
> 
> 时间：2013-03-07T11:21:22.313
> 
> 标签：caching, symfony, esi, symfony-2.2

从[文档](http://symfony.com/doc/current/book/http_cache.html#using-esi-in-symfony2)中，没有关于如何使用 ESI 在模板中呈现模板的示例。有可能这样做吗？

例如，我有一个模板`index.html.php`，我想`form.html.php`用 ESI 渲染模板。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T12:03:48.787

作为您提供的文档页面，您可以使用以下方法在另一个控制器中呈现一个控制器：

```
{{ render_esi(controller('YourBundle:Default:news', { 'max': 5 })) }} 
```

您还可以使用路由名称而不是控制器引用：

```
{{ render_esi(url('latest_news', { 'max': 5 })) }} 
```

但是，您需要设置[网关缓存](http://symfony.com/doc/current/book/http_cache.html#caching-with-a-gateway-cache)才能使 ESI 正常工作。

# io - 通过 LAN 从 NFS v4 服务器读取 500KB 文件的典型访问时间是多少

> ID：15269838
> 
> 赞同：0
> 
> 时间：2013-03-07T11:21:25.277
> 
> 标签：io, nfs

将其计算为网络时间 (2ms) + 磁盘查找和块读取 (10ms) ~= 12ms 是否正确？那会是正确的数量级吗？

注意：
- 使用 Java。
- 请注意，我对响应时间感兴趣，而不是绝对速率。
- 假设没有缓存的中档硬件（访问模式太随机，缓存无法生效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:46:42.213

一般来说，是的。

如果没有任何缓存（NFS 客户端缓存、服务器磁盘缓存、磁盘阵列缓存、SSD），从物理磁盘获取数据的时间将比任何网络延迟大很多（我们谈论的是本地 1 Gbit LAN，它应该有 <平均延迟 1 毫秒）。NFS 还具有预读功能，因此即使以小块读取数据也不会对延迟产生太大影响。

# html - px 中的字体大小在 pdf 文件中不起作用

> ID：15269840
> 
> 赞同：0
> 
> 时间：2013-03-07T11:21:28.693
> 
> 标签：html, css, font-size

我有一个 HTML 表格，表格中的内容应该保存在 MSword、MSexcel 和 pdf 中。对于表格中的内容，如果我将字体大小样式设置为 10px，则它适用于 MSword、MSexcel 文件。但不适用于 PDF 文件。我将样式定义为：

```
font-size: 10px; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:31:16.763

我认为字体大小必须定义为 pt 而不是 px 的pdf：

```
font-size: 7.5pt; 
```

有关 pt 的更多信息，请参阅：

[我应该使用pt还是px？](https://stackoverflow.com/questions/3557260/css-newbie-pt-or-px)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:33:47.287

像素是在屏幕媒体中使用的固定大小的单位（即在计算机屏幕上读取）。

和

点传统上用于印刷媒体（任何要在纸上印刷的东西，等等）。一点等于 1/72 英寸。点很像像素，因为它们是固定大小的单位，不能按大小缩放。

所以使用 pt 而不是 px

**实际使用时字体大小单位**之间的差异****

 **```
1em = 12pt = 16px = 100% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:33:08.107

根据您用于转换的工具（我猜是 PHP），通常对 CSS 的支持有限。请告诉我们您打算如何将 HTML 转换为 PDF。我建议使用基本的 HTML 标签，例如为`<font>`您的文档设置样式**

# c# - LINQ 使用索引加入集合

> ID：15269842
> 
> 赞同：0
> 
> 时间：2013-03-07T11:21:43.510
> 
> 标签：c#, linq

我们有一个包含字符串的基本集合，我们想使用 LINQ 基于从数据库返回的 int 加入这个集合（在同一个 linq 语句中），但是集合没有这样的“索引”，所以我们是希望我们可以简单地引用集合的索引，即。项目放置在集合中的位置。

简单来说，在 linq 之外，我们会做

```
string MyString = MyCollection[MyIndex]; 
```

但这在 LINQ 中不受支持。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:23:33.337

要在 LINQ 查询中引用索引，您可以利用以下重载`Select()`或`Where()`

```
collection.Select((item, index) => new { item, index })
          .Select(p => /* now you can refer to p.item and p.index */);

collection.Where((item, index) => index == indexFromDb); 
```

LINQ 还提供[ElementAt()](http://msdn.microsoft.com/en-gb/library/bb299233.aspx) / [ElementAtOrDefault()](http://msdn.microsoft.com/en-us/library/bb494386.aspx)方法，允许通过索引访问单个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:28:34.013

如果您的意思是您的 Linq 集合不可索引（可通过索引访问，例如`MyCollection[0]`），您可以获取结果集合并调用`ToList()`or `ToArray()`。结果列表（或数组）确实有一个索引器。

# sql-server - SQLServer Regexp 空字符串匹配

> ID：15269843
> 
> 赞同：2
> 
> 时间：2013-03-07T11:21:48.273
> 
> 标签：sql-server, regex

使用 SQLServer 的 RegExp 功能，我需要找到所有不以字母“M”开头的字符串，但`[^M]%`似乎可以工作，以便它搜索不以“M”开头的字符串，但字符串仍然需要有至少一个字符，所以这个模式不会返回空字符串！！

那么有没有`[^M]%`检查零或一个字符的模式？

ps`NOT LIKE`在我的情况下，使用不是一个选项，也不是对 where 子句的任何修改，除了正则表达式模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:00:45.877

对于纯正则表达式，您必须使用 CLR 用户定义函数。

使用正则表达式支持，您可以搜索`\b|[^M].*`允许**空白或非 M 字符后跟零个或多个字符**的表单。

[http://msdn.microsoft.com/en-us/magazine/cc163473.aspx](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:34:20.530

进行`[^M]%`匹配的一种方法`''`是只附加一个不`M`属于输入的字符；

```
where Fld + '?' like '[^M]%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:28:28.590

你可以提出一个条件`OR MyField = ''`。您使用的是 SQL Server 2012，对吧？通过查看帮助页面，我看不到正则表达式[http://msdn.microsoft.com/en-us/library/ms179859.aspx的任何“或”条件](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

# java - QueryDSL：从谓词（BooleanExpression）对象中提取表名

> ID：15269845
> 
> 赞同：1
> 
> 时间：2013-03-07T11:21:49.353
> 
> 标签：java, reflection, querydsl

一种方法正在动态构建一个`Predicate`s 列表，该列表稍后将传递给数据库服务对象。为了基于谓词列表创建表连接，我需要确定每个谓词的基础生成类 Q*。在谓词上调用`getType()`or`getClass()`没有帮助。

这就是我构建谓词的方式：

```
Class<?> tableClazz = Class.forName("foo.bar.database.model.Q"+ WordUtils.capitalize(tableName));
Object tableObj = tableClazz.getConstructor(String.class).newInstance(tableName +"1000");
Field colField = tableClazz.getDeclaredField(fieldName);
Object colObj = colField.get(tableObj);
// method name is one of eq, ne, like...
Method m = colObj.getClass().getMethod(methodName, classParam );
return (Predicate) m.invoke(colObj, operand); 
```

查询构建代码：

```
JPAQuery query = new JPAQuery(entityManager);
query = query.from(company);
for(Predicate p : predicates){
   // if there's at least one predicat with the underlying db class Foo:
   query = query.join(company.foos, new QFoo());
   break;
}
List<Object[]> rows = query.where(predicates.toArray(new Predicate[0])).listDistinct(company.id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:00:47.920

不要将生成的 Q 类型用于动态表达式创建。您可以改用动态路径[http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch03.html#d0e1379](http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch03.html#d0e1379)

在你的情况下是这样的

```
Class<?> entityType = Class.forName(...)
PathBuilder entityPath = new PathBuilder(entityType, "entity");
PathBuilder relation = entityPath.get("relation");
Predicate predicate = relation.get...(...).eq(...) 
```

对于路径提取，请使用此类[http://www.querydsl.com/static/querydsl/2.9.0/apidocs/com/mysema/query/types/PathExtractor.html](http://www.querydsl.com/static/querydsl/2.9.0/apidocs/com/mysema/query/types/PathExtractor.html)

`PathExtactor`从给定的路径中提取第一条路径`Expression`

# android - 带有光标适配器的 Android 表格

> ID：15269847
> 
> 赞同：0
> 
> 时间：2013-03-07T11:21:51.793
> 
> 标签：android, gridview, cursor, tableview

我正在尝试创建`tableview`（如 Excel 中的电子表格）。该表需要从（例如 30k 条记录）中读取数据并使用和`cursor`之类的视图回收。该表必须快速并且有列（例如我喜欢有 4 列，每列都有不同的大小）。`ListView``GridView``re-sizable`

我做了什么 ：

1.  `GridView`使用自定义光标适配器

    *   看起来像带有标题行的表格（列的名称）
    *   表格很快，阅读表格光标和回收视图
    *   无法重新调整列大小，因为在 GridView 上绘制所有列的大小相同
2.  每列都是`ListView`并且他们有同步的滚动监听器

    *   看起来像桌子
    *   如果您触摸某个列表，它将停止滚动，而其他列表将继续滚动
    *   去脏溶液
3.  `TableLayout`带适配器

    *   正在阅读表单适配器
    *   没有回收视图，并且记录大量内存异常被抛出
4.  风俗`GridView`

    *   扩展 AbsListView 的自定义 TableView ，我无法使用 AbsListView 中的字段，因为它们受包保护。

我认为最好的视图将是带有适配器的 TableLayout/View。请帮助我找到这种视图的最佳解决方案。

ps 也许 Roman Guy 可以为下一个 android 版本提供帮助和编码 TableView :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:03:58.393

如果您的 tableview 不必水平滚动，那么您可以使用 a`ListView`和自定义行视图。这样的行将是一个`LinearLayout`（具有水平方向），具有与`TextView`您需要的列一样多的 s，每个列都有一个`weight`属性以使其宽度合适。

如果它必须水平滚动，那么我看到的唯一方法是实现你自己的基于`AdapterView`.

# jquery - 调整窗口大小时获取文档的大小

> ID：15269850
> 
> 赞同：2
> 
> 时间：2013-03-07T11:21:54.793
> 
> 标签：jquery, html

当我调整窗口大小时，我可以找到窗口的大小。像这样

```
<script type="text/javascript">

    jQuery(window).resize(function () {
      var width = jQuery(window).width();
      var height = jQuery(window).height();
      console.log(width);
      console.log(height);
    })
</script> 
```

现在我想在调整窗口大小时获取文档大小。每次调整窗口大小时如何获取大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:25:14.430

> $(窗口).width(); // 返回浏览器视口的宽度
> 
> $(文档).width(); // 返回 HTML 文档的宽度

[http://api.jquery.com/width/](http://api.jquery.com/width/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:27:20.957

您可以使用该`document`对象：

```
var width = jQuery(document).width();
var height = jQuery(document).height(); 
```

演示：http: [//jsfiddle.net/wyHwp/](http://jsfiddle.net/wyHwp/)

如您所见，当窗口较小时，文档的大小是相同的值。当窗口变得比文档需要的大时，文档将拉伸到窗口的大小。

您还可以获取`document.body`元素的大小：

```
var width = jQuery(document.body).width();
var height = jQuery(document.body).height(); 
```

不同之处在于即使窗口更高，您也会获得 body 元素的高度，即 body 元素不会自动拉伸到窗口底部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:37:49.193

不确定你是否想要这个：

```
jQuery(window).resize(function () {
   var winwidth = jQuery(window).width();
   var winheight = jQuery(window).height();
   var docwidth = jQuery(document).width();
   var docheight = jQuery(document).height();
   console.log('window width is -> ' + winwidth + 'window height is -> ' + winheight);
   console.log('document width is -> ' + docwidth + 'document height is -> ' + docheight);
}).resize();
//-^^^^^^^^----this will log everytime on doc ready 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T11:27:51.217

修改您的示例代码以同时获取它。

```
<script type="text/javascript">

    jQuery(window).resize(function () {
      var width = jQuery(window).width();
      var height = jQuery(window).height();
      var documentWidth = jQuery(document).width();
      var documentHeight = jQuery(document).height();
      console.log(width);
      console.log(height);
    })
</script> 
```

# iphone - 我可以从我的 Windows 上传 .ipa 文件到 itune 连接吗

> ID：15269854
> 
> 赞同：1
> 
> 时间：2013-03-07T11:22:10.840
> 
> 标签：iphone, cordova, app-store-connect

我无法在我的 iTunes Connect 帐户中找到二进制上传链接。我已上传 .ipa 文件，但状态与过去 1 周“等待上传”相同。

请任何人帮助我从 Windows 上传我的 .ipa 文件到 iTunes 连接。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:36:59.210

不，您不能将 ipa 文件从 Windows 系统上传到 iTunes。

上传后是否有上传成功的提示？因为一旦您将二进制文件上传到 iTunes，状态将变为“上传已接收”，然后变为“等待审核”。

# java - 对于 T 类型的方法，当它接受两个参数时，它的“推断”类型应该是什么？

> ID：15269856
> 
> 赞同：7
> 
> 时间：2013-03-07T11:22:19.790
> 
> 标签：java, unit-testing, generics, junit, hamcrest

hamcrest 库中有一个方法：

```
package org.hamcrest.core

...

public static <T> Matcher<T> allOf(Matcher<? super T> first, Matcher<? super T> second) {
    List<Matcher<? super T>> matchers = new ArrayList<Matcher<? super T>>(2);
    matchers.add(first);
    matchers.add(second);
    return allOf(matchers);
} 
```

在我的代码中，我用`first`being`Matcher<Object>`和`second`being 来调用这个方法`Matcher<SomeException>`。

现在：

*   当我使用带有 1.6 目标的 Eclipse 编译它时，它会生成`<T>` `Matcher<SomeException>`.
*   当我使用带有 1.6 目标的 javac 1.7 编译它时，它会生成`<T>` `Matcher<SomeException>`.
*   当我使用带有 1.6 目标的 javac 1.6 编译它时，它使`<T>` `Matcher<Object>`

问题是，`<T>`在这种情况下应该怎么做？

我的理解是，javac 1.6 中存在一个错误，它应该是`Matcher<SomeException>`，因为这是输入参数的常见类型（SomeException 是 Object 的子类型），然后，100% 肯定返回的 Matcher 将是`Matcher<SomeException>`.

我对吗？有没有办法强制 javac 1.6 正常运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:59:17.413

编译器将[根据实际参数进行推断](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7)。它将从 和 的初始约束`Matcher<Object> << Matcher<? super T>`开始`Matcher<SomeException> << Matcher<? super T>`。从中它将推断出约束`T << Object`和`T << SomeException`。`Object`将在构建[最小擦除候选集](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7-460)时被消除。剩下的候选人`SomeException`（最终：D）将被替换`T`。

到目前为止，我们已经展示了 eclipse 和 JDK7 在这种情况下的正确行为。我认为没有任何方法可以强制 javac 也正常运行。您可以显式声明类型参数或使用 JDK7（将源和目标指定为 6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:02:21.110

您应该考虑两件事：

1.  首先，您可以像这样使用它：`CoreMatcher.<SomeException>allOf(...)`它将显式设置`T`.

2.  其次，由于类型擦除，作为运行时你总是有一个`Matcher<Object>`. 因此，在任何一种情况下，运行时行为都是相同的。

# c# - 仅登录一次 Google\YouTube

> ID：15269861
> 
> 赞同：0
> 
> 时间：2013-03-07T11:22:31.083
> 
> 标签：c#, .net, wpf, youtube

我正在构建能够让用户登录的 .Net 应用程序`YouTube`，并使用以下方法获取用户的历史记录和最喜欢的播放列表：

```
 YouTubeRequestSettings settings = new YouTubeRequestSettings(appname, developerkey, username, password);
    YouTubeRequest request = new YouTubeRequest(settings);

    Uri videoEntryUrl = new Uri("https://gdata.youtube.com/feeds/api/users/default/watch_history?v=2&max-results=50");
    Feed<Video> videos = request.Get<Video>(videoEntryUrl); 
```

现在我的问题是我可以在获取用户登录详细信息时登录然后获取令牌并在每个请求中使用它吗？

我想在每次不询问登录详细信息的情况下发出请求，我看到有`YouTubeRequestSettings`使用令牌发送的选项：

```
public YouTubeRequestSettings(string applicationName, string developerKey, string authSubToken); 
```

我如何得到这个令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:31:38.280

我还没有使用过这个版本的 Youtube API，但是如果你不能存储`YouTubeRequestSettings`从初始登录返回的信息以供将来的请求使用（我猜它已经过期了？）你能不缓存用户登录详细信息并在没有的情况下发出新的请求吗？用户交互是否以及何时需要？

# ruby - where 子句中的“case”

> ID：15269862
> 
> 赞同：0
> 
> 时间：2013-03-07T11:22:32.393
> 
> 标签：ruby, ruby-on-rails-3

我有以下类方法，并且想知道是否有更漂亮（更多 ruby​​-ist）的方式来解决这个问题。

```
def self.of_users_that(type)
  case type 
  when "registered"
    type = 1
  when "apologized"
    type = 2
  end
  Subscription.where(:regoption_id => type)
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:25:42.327

重新定义这样的变量（将其从字符串转换为整数）被认为是不好的味道（代码味道）。

这是您的代码的更简洁版本：

```
def self.of_users_that(type)
  map = {'registered' => 1, 
         'apologized' => 2}
  Subscription.where(:regoption_id => map[type])
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:32:36.823

我通常在模型中为这些类型的常量声明一个常量。与 Sergio 的答案相同，但使用常数

```
class Subscription < ActiveRecord::Base
  USER_TYPES = { 'registered' => 1, 'apologized' => 2 }

  def self.of_users_that(type)
    where(regoption_id: USER_TYPES[type])
  end
end 
```

或者只使用范围

```
scope :registered, where(regoption_id: 1)
scope :apologized, where(regoption_id: 2) 
```

或组合

```
class Subscription < ActiveRecord::Base
  USER_TYPES = { 'registered' => 1, 'apologized' => 2 }

  scope :registered, where(regoption_id: USER_TYPES['registered'])
  scope :apologized, where(regoption_id: USER_TYPES['apologized'])
end 
```

# smpp - 逻辑 SMPP session.submitMulti(request);

> ID：15269867
> 
> 赞同：1
> 
> 时间：2013-03-07T11:22:58.407
> 
> 标签：smpp

我试图通过使用“submitMulti(request);”发送多条消息 方法。即使所有参数都已正确设置，控制台中仍会出现错误消息“提交多操作失败。java.lang.NullPointerException”。我需要一个快速的答案。这是我的代码。

```
 SubmitMultiSM request = new SubmitMultiSM();
        SubmitMultiSMResp response;

        for (int i=0; i<3; i++) {
            request.addDestAddress(new DestinationAddress("94710486836"););
        }

        // set other values
        request.setServiceType("CMT");
        request.setSourceAddr("94115933333");
        request.setReplaceIfPresentFlag(replaceIfPresentFlag);
        request.setShortMessage("Test");
        request.setScheduleDeliveryTime(scheduleDeliveryTime);
        request.setValidityPeriod(validityPeriod);
        request.setEsmClass(esmClass);
        request.setProtocolId(protocolId);
        request.setPriorityFlag(priorityFlag);
        request.setRegisteredDelivery(registeredDelivery);
        request.setDataCoding(dataCoding);
        request.setSmDefaultMsgId(smDefaultMsgId);

        response = session.submitMulti(request); 
```

谢谢你。

# mysql - Mysql - 类似 IN 的操作匹配所有值

> ID：15269868
> 
> 赞同：0
> 
> 时间：2013-03-07T11:22:59.393
> 
> 标签：mysql

我有一个订单表，其中包含订购书籍的客户的 CustID 和 BookNo。我有另一个表 Books，其中包含所有 BookNo。

我想显示订购了所有 BookNo 的所有 CustID。

将集合中的所有值匹配为“AND”而不是“OR”的“IN”函数之类的东西会很方便。

任何快速的线索，如果没有答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:38:38.190

不知道使用`IN`或类似方法可以做到这一点，但是一个简单的`GROUP BY`/`HAVING`应该可以很好地做到这一点。添加 是为了确保同一本书的`DISTINCT`两个订单仍然算作一本书。

```
SELECT CustID
FROM Orders
GROUP BY CustID
HAVING COUNT(DISTINCT BookNo) = (SELECT COUNT(BookNo) FROM Books); 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/55ce7/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:26:53.800

要仅获取订购所有书籍的客户，您可以按每个客户分组，然后计算客户订购的书籍数量并将其与书籍总数进行比较

```
select c.custid 
from customers c
inner join books b on b.bookno = c.bookno
group by c.custid
having count(distinct b.bookno) = (select count(distinct bookno) from books) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:37:39.343

通过具有 count(*) = (select count(distinct bookNo) from Books) 的 CustID 从 Orders 组中选择 custId；

# jquery - jquery解析属性错误

> ID：15269871
> 
> 赞同：1
> 
> 时间：2013-03-07T11:23:09.577
> 
> 标签：jquery, xml

所以我有这个JS代码：

```
var messages = xml;
console.log( messages ); 
```

它返回这个：

```
<messages test='foo'></messages> 
```

**考虑到以下内容不起作用**，我如何获得“测试” ？

```
$(xml).find('messages').attr('test'); //returns undefined. 
```

提前致谢。

添加了jsFiddle：http: [//jsfiddle.net/yJy8L/1/](http://jsfiddle.net/yJy8L/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:25:30.457

试试这个：

```
 $(xml).filter('messages').attr('test'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:26:55.237

请尝试此代码

```
var xml = "<messages test='foo'></messages>", messages = xml;
 $(messages).attr('test'); 
```

# macos - CSS3 @font-face 未在 Mac OS X Safari 5.x 或 Chrome 上显示

> ID：15269872
> 
> 赞同：0
> 
> 时间：2013-03-07T11:23:12.637
> 
> 标签：macos, google-chrome, css, safari, font-face

嗨，伙计们对@Font-Face 有点进退两难，不知道为什么。我已经对要使用的最佳@font-face 代码进行了无数小时的研究，并对为什么它不会在 Mac OS X 浏览器上显示进行故障排除。

目前的情况是，我正在使用...

```
@font-face {
font-family: 'Avenir LT 55 Roman';
src: url('fonts/avenir-55.eot?#iefix') format('embedded-opentype'), 
     url('fonts/avenir-55.woff') format('woff'), 
     url('fonts/avenir-55.ttf')  format('truetype'),
     url('fonts/avenir-55.svg#AvenirLT-Roman') format('svg');
     font-weight: normal;
     font-style: normal;
} 
```

结果页面显示为...

*Windows 操作系统 - 适用于所有浏览器（Chrome、Firefox、IE）

*Apple Mac OS X - 适用于 Firefox 和 Safari 6.x，但不适用于 Chrome 或 Safari 5.x

*Apple iOS iPhone 和 iPad - 工作正常

我将不胜感激有关此事的任何指导。

如果您想亲自查看，请查看[http://gradtouch.com/test](http://gradtouch.com/test)

我只是很困惑为什么它不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:14:12.463

问题出在您的`ttf`文件上（它已损坏 - 似乎基线以一种字体出现严重裁剪的方式进行了更改），这就是您出现这种行为的原因。提供其他格式（eot、woff、svg）的浏览器工作得很好，但是当浏览器选择提供服务时，`ttf`您会得到一个空白页面（尽管从技术上讲没有任何错误）。修复你的文件，你会很高兴的。

这是你的`woff`文件： ![在此处输入图像描述](../Images/31c8115559379922c1dfc30dbe6a2314.png)

这是你的`ttf`文件： ![在此处输入图像描述](../Images/1b69990d8d6fdc867608fc07df57e28b.png)

# knockout.js - 淘汰赛：在自定义绑定初始化中添加另一个绑定

> ID：15269873
> 
> 赞同：3
> 
> 时间：2013-03-07T11:23:15.623
> 
> 标签：knockout.js, ko-custom-binding

我想创建一个自定义绑定作为添加其他绑定的简写——比如宏。

```
<div data-bind="foo: 1"></div> 
```

应该做同样的事情

```
<div data-bind="click: clickHandler, css: { someClass: someObservable }, ...">
</div> 
```

就像是：

```
ko.bindingHandlers.foo = {
    init: function(el,val,bindings,model,context) {
        // some way to add { click: clickHandler } to bindings()
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T12:13:07.037

您可以`ko.applyBindingsToNode`从`init`绑定处理程序中调用，例如：

```
ko.applyBindingsToNode({ click: someHandler, text: someText }); 
```

如果您正在应用控制流之类的东西，那么您可能希望在第二个参数中传递上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:36:25.527

您是否尝试过在自定义活页夹中使用 jQuery：

```
ko.bindingHandlers.foo = {
    init: function(el,val,bindings,model,context) {
        $(el).attr('data-bind', 'click: clickHandler');
    }
} 
```

# asp.net - Ajaxcombox listitems 仅显示 chrome 中的文本宽度

> ID：15269875
> 
> 赞同：1
> 
> 时间：2013-03-07T11:23:17.020
> 
> 标签：asp.net

Ajax 组合框项目列表在 Chrome 中仅采用文本宽度（版本 25.0.1364.152 m）。宽度设置为 120px 的 UL，但它只占用 36px。

在其他浏览器中它工作正常。

除了在 WinXP 和 Chrome 中相同的组合框显示在错误的位置之外，它在父级下方大约 350 像素。

```
.ftbox7 input{ width:80px; height:18px; float:left; border:1px solid #ebdaa5;} 
<div class=ftbox7>
<ajax:ComboBox ID="cmbLocation" runat="server" DropDownStyle="DropDownList"
               AutoCompleteMode="SuggestAppend" CaseSensitive="False"        
               CssClass="ajaxSmallComboBox" ItemInsertLocation="Append" MaxLength="10"          
               AppendDataBoundItems="True" DataTextField="LocationCode"      
               DataValueField="LocationId">
</ajax:ComboBox>
</div> 
```

# .net - 在某些计算机上启动 Windows 服务（WCF）时出现异常？

> ID：15269884
> 
> 赞同：0
> 
> 时间：2013-03-07T11:23:41.550
> 
> 标签：.net, windows, wcf, security, windows-services

我有一个使用 net.tcp 与胖 winforms 客户端通信的 WCF 服务。使用如下所示的 install.bat 安装 Windows 服务：

```
@ECHO OFF

REM The following directory is for .NET 4.0
set DOTNETFX2=%SystemRoot%\Microsoft.NET\Framework\v4.0.30319
set PATH=%PATH%;%DOTNETFX2%

echo Installing IEPPAMS Win Service...
echo ---------------------------------------------------
C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil "%~dp0MyApp.WindowsService.exe"
echo ---------------------------------------------------
pause
echo Done. 
```

在某些计算机上，我需要将此 bat 保存为 ASKI 并获得对 .NET Framework 4.0 文件夹的完全权限，但除此之外，该服务通常已安装并启动而没有问题。

但是在某些计算机上，尝试启动服务时会收到以下消息：

> MyComputer 上的 MyApp 服务启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。

Windows 事件日志指出此异常：

> 无法启动服务。System.ServiceModel.FaultException`1[MyApp.DataContracts.FaultContracts.Generellt.GeneralFault]：（故障详细信息等于 MyApp.DataContracts.FaultContracts.Generellt.GeneralFault）。

启动服务时，将启动 3 个 WCF 服务，并且它们都有自己的基本地址和端口号。

我怀疑这与额外的安全环境有关？但我不知道如何解决它。

这已经在 Windows 2003 和 2008 R2 上测试过了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:34:46.227

`FaultException`调用服务时抛出A。如果您发布完整的例外情况，我相信我们会看到的。

当 WCF 从服务接收到 SOAP 错误消息时，会引发此类异常。该服务似乎正在抛出一个`FaultException<MyApp.DataContracts.FaultContracts.Generellt.GeneralFault>`.

您应该询问服务为什么这样做。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:35:27.980

这里的问题是数据库中的数据存在错误，并且异常处理在启动时不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T13:44:36.107

可能是供股问题，这将解释可变性。在端口上设置侦听器需要对主机服务器具有“管理员”权限。您可以运行以下命令（在 CMD 提示符下）以确保 Web 服务在启动时没有任何权限问题：

```
netsh http add urlacl url=http://+:8000/MyUri user=\everyone listen=yes 
```

显然，这仅用于开发和测试，而不是生产。

这里有一个解释：http: [//msdn.microsoft.com/en-us/library/windows/desktop/cc307223 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc307223(v=vs.85).aspx)

# ios - UITableViewCell 中的 UIButton 没有释放它创建的 UIViewController

> ID：15269885
> 
> 赞同：0
> 
> 时间：2013-03-07T11:23:45.233
> 
> 标签：ios, uitableview, uibutton

在我的`UITableViewCell`子类中，`UIButton`里面应该推一个新制作的`UIViewController`.

我做了两种这样的方法：

```
- (void)configureCellWithObject:(Object *)object {
    self.object = object;
    [self.button1 addTarget:self action:@selector(initCustomController) forControlEvents:UIControlEventTouchUpInside];
    // self.button1 is a UIButton
}

- (void)initCustomController {
    CustomViewController *cvc = [[CustomViewController alloc]initWithObject:self.object];
        // self.nc is the navigation controller of the UITableView presenting the cell
        [self.nc pushViewController:cvc animated:YES];
} 
```

而我的问题是，`CustomViewController`当我触摸左上角的“”按钮时，created 永远不会被释放`back`（它消失但没有被释放）。

如果我做了所有这些，`tableView:didSelectRowAtIndexPath:`它就会按我的预期工作并得到适当的释放。

我虽然我做的一切都是正确的，但不知道如何使它正确:(

编辑：是的，我正在使用`ARC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:32:04.123

您可以创建自定义按钮，并在 tableviewCellForRowAtIndexPath 中为每个按钮提供不同的标签，例如在需要时传递选定的值，否则不需要。

```
cell.button.tag= indexPath.row + 1; 
```

你可以这样写你的按钮方法

```
[cell.button addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

在 btnClicked 方法中，只需编写导航代码即可。

只希望它对你有用

# c# - 使用 NetFwTypeLib 通过防火墙设置阻止或取消阻止端口在 Windows XP 上不起作用

> ID：15269887
> 
> 赞同：0
> 
> 时间：2013-03-07T11:23:47.243
> 
> 标签：c#, windows-7, tcp, windows-xp, windows-firewall-api

我试图通过以下代码使用 80 TCP 端口阻止或解除阻止：

```
 const string guidFWPolicy2 = "{E2B3C97F-6AE1-41AC-817A-F6F92166D7DD}";
const string guidRWRule = "{2C5BC43E-3369-4C33-AB0C-BE9469677AF4}";
Type typeFWPolicy2 = Type.GetTypeFromCLSID(new Guid(guidFWPolicy2));
Type typeFWRule = Type.GetTypeFromCLSID(new Guid(guidRWRule));
INetFwPolicy2 fwPolicy2 =(INetFwPolicy2)Activator.CreateInstance(typeFWPolicy2);
 INetFwRule newRule = (INetFwRule)Activator.CreateInstance(typeFWRule);
newRule.Name = "MabuAsTcpLocker_OutBound_Rule";
newRule.Description = "Block outbound traffic  over TCP port 80";
newRule.Protocol = (int)NET_FW_IP_PROTOCOL_.NET_FW_IP_PROTOCOL_TCP;
newRule.RemotePorts = "80";                 
newRule.Direction = NET_FW_RULE_DIRECTION_.NET_FW_RULE_DIR_OUT;
newRule.Enabled = true;
newRule.Profiles = fwPolicy2.CurrentProfileTypes;
newRule.Action = NET_FW_ACTION_.NET_FW_ACTION_BLOCK;
fwPolicy2.Rules.Add(newRule); 
```

此代码在 Windows 7 上运行良好，但在 Windows XP 上不起作用。在我的项目中，我只是引用了 NetFwTypeLib COM 库。异常说它无法使用 {E2B3C97F-6AE1-41AC-817A-F6F92166D7DD} Guid 找到并实例化该类。请问你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:40:10.790

您似乎正在针对适用于 vista 的高级安全 API 的 Windows 防火墙进行编写。赠品是您指的是 INetFwPolicy2。

引用自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366453%28v=vs.85%29.aspx "MSDN")

> Windows 防火墙 API 在带有 Service Pack 2 (SP2) 的 Windows XP 上受支持。（对于 Windows Vista 及更高版本，建议使用具有高级安全 API 的 Windows 防火墙。）

我会看看[Using Windows Firewall for Windows XP with SP2 API (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366415%28v=vs.85%29.aspx "使用带有 SP2 API 的 Windows XP 的 Windows 防火墙") 这应该会给你一些指示，或者至少为进一步的谷歌搜索提供更多的弹药。

# c# - 不在正则表达式中

> ID：15269891
> 
> 赞同：3
> 
> 时间：2013-03-07T11:23:59.327
> 
> 标签：c#, regex, replace, string-matching, regex-greedy

我正在尝试编写一个正则表达式模式来查找不在引号内的特定字符串。例如;

```
where value = '~foo'; //no match

where value = ~foo; //match 
```

我可能会一直寻找直到找到像这样的特定字符串；

> ^(?:(?!~).)*

但这并没有真正帮助我。如果我可以定义可以解决我的问题的文字字符串“不在”语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T11:25:35.603

您可以使用这样的环视

```
(?<!')yourWordGoesHere(?!') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:27:17.177

这似乎有效：

```
~foo(?!(.(?<!'))*?') 
```

结果：

![不在引号内](../Images/be80f61fceda8d49ea1d518f62ca9f78.png)

# javascript - jquery删除变量内的html元素（jquery对象）

> ID：15269894
> 
> 赞同：13
> 
> 时间：2013-03-07T11:24:27.830
> 
> 标签：javascript, jquery

在 HTML 里面我有这个 DIV：

```
<div class="teaser">
  <img src="thumb1.jpg"><img src="thumb2.jpg"><br>  // usually one thumb image; can be up to three
  some text goes here, sometimes not<br>
  <a href="example.html">always a link here</a><br>
  and sometimes another line here
</div> 
```

我需要捕获 DIV 的内容减去变量中的第一行（拇指），以作为标题（标题）传递给灯箱脚本。然而，在一天之内，我学到了一些关于 javascript 和 jquery 的东西（两者都是我的弱点），但是我通过搜索网络没有发现任何东西，包括 stackoverflow 上的几个线程，做到了，要么抛出错误，要么仍然包括拇指或也删除文本，甚至从 DOM 中删除拇指：

```
// takes the whole
var teaser = $(".teaser");

// TypeError: $(...).html(...).find is not a function
var teaser = $(".teaser").find("img").remove();

// IMGs removed from DOM
var teaser = $(".teaser").find("img").remove();

// IMGs still included; I think I understand why
var teaser = $(".teaser").not("img");

// ditto
var teaser = $(".teaser").clone().not("img");

// ditto:
var teaser = $(".teaser");
$(teaser).find("img").remove();

// no teaser at all (everything removed, not just the IMGs)
var teaser = $(".teaser");
teaser = $(teaser).find("img").remove();

// ditto
var teaser = $(".teaser").clone().find("img").remove(); 
```

更改链接中的顺序也不起作用（尽管我可能错过了一个或另一个）。

这种解决方法似乎没问题：

```
var teaser = $(".teaser").html().replace(/(<img.*?)+<br[^>]*?/i,""); 
```

但是，根据浏览器中的正则表达式实现，它可能会不稳定，所以我宁愿拥有更强大的东西，特别是根本没有得到第一行。

TIA 的任何建议-希望我能说清楚。

**编辑：**

`clone()`结合使用或`children()`让`contents()`我更进一步。但是，这两个也会删除第一个文本节点，留下两个空`BR`的：

```
$("div.teaser").each(function() {
  var teaser = $(this).clone().children().not("img");
  var teaser = $(this).clone().contents().not("img");
}); 
```

OTOH `filter("img")`，`find("img")`或`not("img")`随后`remove()`删除除 IMG 之外的所有内容，除了 IMG`not()`

```
var teaser = $(this).clone().find("img").remove(); 
```

**编辑2：**

总结一下：

这是@karaxuna 建议的解决方案。重新分配变量很重要。

```
var teaser = $(this).clone();
teaser.find("img,br:first").remove();
teaser = $.trim(teaser.html()); 
```

在做一些进一步阅读以更好地理解失败背后的逻辑和最终解决方案时，我得到了一个线索，可以稍微多*一点 jquerish*：

```
var teaser = $(this).clone();
teaser = $.trim($("img,br:first",teaser).remove().end().html()); 
```

线索是添加到`$()`选择器的范围或上下文。在这里使用*它*已经很熟悉了，但我从未想过使用 var. 此外，`end()`将`remove()`不再一直到 DOM ......

`$.trim`当然，技术上没有必要，HTML 无论如何都会忽略空行。

因此，包括上述正则表达式的解决方法，至少有三种方法可以去——有点让我想起 Perl ;)

感谢@karaxuna 和@Ravi 分享他们的经验和想法！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T11:27:07.633

不需要`html()`

```
var teaser = $(".teaser").find("img").remove(); 
```

编辑：

试试这个：

```
var teaser = $(".teaser").clone();
teaser.find("img").remove()
// use teaser 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:30:17.290

如果你想删除整个 html。然后你可以使用 empty() 方法

```
$(".teaser").empty(); 
```

如果您仅删除图像。然后

```
$(".teaser").find("img").remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T03:01:20.397

来晚了，试试这个`$('img',$('.teaser')).remove().end().clone()`

# c# - 检测是否可以加入

> ID：15269902
> 
> 赞同：2
> 
> 时间：2013-03-07T11:24:44.550
> 
> 标签：c#, .net, sql, sql-server, database

我正在构建一个系统来检测表何时可以连接在一起。例如，在两个简单表的情况下 - 如果`Table A`有一个主键链接到 中的外键`Table B`，那么系统将检测到两个表之间可能存在连接。到目前为止，这在 C# 中运行良好，只需遍历所有外键并检查哪些表具有引用相应 FK 的主键。

然而，现在事情变得复杂了。我添加了虚拟表的概念，以`View`. 因此，可以使用已连接的表来创建视图，然后可以使用同一视图与其他表进行连接。这样做是为了能够简化可能存在超过 3 个或更多表的连接的情况。因此，由于使用了视图，因此允许用户以简单的方式将 3 个或更多表连接在一起。

我的问题是视图似乎不存储诸如主键和外键之类的概念。因此，我将如何检测特定表和视图之间是否可以连接？例如，我可以有以下视图：

```
CREATE VIEW [View A] 
AS 
SELECT  Children.Child_ID,
        Social_Workers.Social_ID 
FROM Children 
INNER JOIN Social_Workers 
    ON Children.Social_ID = Social_Workers.Social_ID 
```

接下来，我可以决定用这样的表加入该视图：

```
SELECT  [View A].Child_ID,
        Sponsors.User_ID 
FROM [View A]
INNER JOIN Sponsors 
    ON [View A].Child_ID = Sponsors.Child_ID 
```

我将如何检测视图和表之间连接的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:40:02.563

您有两种方法，您选择哪种方法取决于您是想要快速解决方案来更改 DBMS，还是进行艰苦的工作。

* * *

**获取您的视图架构，在 DBMS 中创建一个临时表并使用您现有的逻辑**

即使您必须创建表以匹配视图架构，我认为这是一个快速的解决方案，因为所有测试负担都转移到了 SQL Server。

* * *

**将两个表的模式加载到 DataTable 并手动进行测试**

*   检查连接列的数量是否同时用于父表和子表
*   检查两个表中匹配列的类型是否完全匹配
*   检查每列是否仅在其连接侧出现一次
*   检查数据库中是否存在具有完全相同列的关系
*   检查子列是否没有唯一（并且取决于您需要非空）约束

# python - 使用函数输入作为代码 Python

> ID：15269903
> 
> 赞同：0
> 
> 时间：2013-03-07T11:24:45.277
> 
> 标签：python, sqlalchemy

我有这个功能（SQLAlchemy）：

```
# table: Table to search (should be the class name)
# column: filter to use
# search: search term
#
# Returns a list [object] with the found entries in the database
# Uses the SQL LIKE statement

def search(table, column, search):
    results = dbsession.query(table).filter(column.like('%' + search + '%')).all()
    return results 
```

所以这个搜索函数在类'table'中搜索，使用过滤器'column'并搜索'search'。我现在遇到的问题是，如果我为“列”输入一个值（实际上不是字符串，而是一段代码），我总是会收到一个错误，即名称不存在：

```
 users =  search(User, fname, 'Jo')
NameError: name 'fname' is not defined 
```

有人知道如何正确编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:28:55.027

改为使用`users = search(User, User.fname, 'Jo')`。

# php - PHP 导出到 CSV 文件在 Excel 2007 和 2010 中的不同行为

> ID：15269905
> 
> 赞同：0
> 
> 时间：2013-03-07T11:24:49.037
> 
> 标签：php, excel, csv, fputcsv

我正在尝试使用 PHP 的 fputcsv 函数将数组导出到 CSV 文件。但是，在 Excel 2007 和 2010 中打开文件时，我得到了两种完全不同的行为。

在 Excel 2007 中，我得到了我想要的，因为所有字段都在它自己的单独列中，如下所示：

啊！bbb | 抄送 | dddd

123 | 第456章 789

“啊啊” | "bbb" |

但在 Excel 2010 中，所有字段都在同一列上，如下所示：

aaa,bbb,ccc,dddd
123,456,789
"aaa","""bbb"""

如何获得 Excel 2007 和 2010 的 Excel 2007 行为？

我使用了以下脚本：

```
 $filename = "test.csv";
    //header("Content-Type: application/vnd.ms-excel;");
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename="' . $filename . '"');
    header("Pragma: no-cache");
    header("Expires: 0");
    $list = array (
        array('aaa', 'bbb', 'ccc', 'dddd'),
        array('123', '456', '789'),
        array('"aaa"', '"bbb"')
    );
    $fp = fopen("php://output", 'w');
    foreach ($list as $fields) {
        fputcsv($fp, $fields);
    }
    fclose($fp); 
```

我试过使用 header("Content-Type: application/vnd.ms-excel;"); 或 header('Content-Type: text/csv'); 但我得到了同样的行为。:S

先感谢您。

编辑：我刚结束使用 PHPExcel。这是一个很棒的图书馆！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:57:47.843

这不是 PHP 的错。在导入 CSV 时出现垃圾是 Excel 的错。

Excel 的 CSV 处理（或者更准确地说，当您双击 CSV 文件的图标以在 Excel 中打开它时的默认 CSV 处理）中存在许多错误。

一个常见的问题是 UTF-8：Excel 阻塞 UTF-8 编码的 CSV 文件。检查编码；如果您将文件保存为 UTF-8，请尽可能切换到标准 ASCII。

可能导致所描述问题的另一个问题是，如果您的 Excel 具有使用逗号作为小数分隔符的区域设置。这会破坏 Excel 读取 CSV 文件的能力，因为它会将逗号视为字段值的一部分。

几乎所有问题都可以通过从 Excel 中打开文件来解决，而不是双击文件的图标。以这种方式打开 CSV 文件将导致 Excel 引导您完成其文本导入向导，该向导允许您指定文件格式，以便 Excel 正确打开它。这并不理想，但对于某些 CSV 文件，即使是那些看起来相当标准的文件（无论它们是否使用 PHP 创建），它都是唯一的选择。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:26:25.197

有一个设置可以更改excel中的分隔符，将其设置为'，'字符，它将起作用。

阅读： http: [//office.microsoft.com/en-gb/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx#BMimport_data_from_a_text_file_by_openi](http://office.microsoft.com/en-gb/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx#BMimport_data_from_a_text_file_by_openi)

# c++ - C++ 中的网络库

> ID：15269909
> 
> 赞同：2
> 
> 时间：2013-03-07T11:24:59.490
> 
> 标签：c++, network-programming, boost-asio, zeromq

我将在 Windows 上运行的 C++ 中的客户端/服务器应用程序上工作，服务器本身由“管理器”可执行文件组成，生成一次，“工作人员”可执行文件生成 1 到 29 次，具体取决于配置。

coms 位于客户端和“管理器”进程之间，“管理器”进程和“工作”进程之间（配置它们，将数据发送到进程）以及一些“工作”进程之间。附带说明：当我说工作进程时，我并不是指进程并行执行完全相同的工作以获得超级性能：它们的配置都不同，做不同的工作，性能真的不是问题。这里的几个过程中的分离更多是关于稳定性。

现在我不知道选择什么网络库来做这一切。

我知道 boost::asio，我熟悉 boost 和它的特殊风格，但恐怕我团队的其他成员不熟悉。我还被建议使用 zeroMq。我已经看到了其他一些人的优点和缺点。但我有点失落！

使用 zeroMq，我认为我们失去了 asio 的 proactor？所以从某种意义上说它感觉它是低级的？另一方面，它提供了我认为对我们没有用的发布/订阅等功能。

这些库都不会帮助我们处理序列化部分（交换的数据是异构的）。我在想谷歌协议缓冲区可以在这一点上帮助我们，除非周围有一个全能库？

我们隐约考虑过的其他选择是 Corba、amqp。前者感觉笨拙，我们被建议不要这样做。后者感觉过于复杂。（？）

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:38:25.160

如果您选择走那条路，ZeroMQ[可以与 Boost.Asio 完美集成。](https://stackoverflow.com/q/12829005/283302)也就是说，如果你熟悉的话，我建议你使用 Boost.Asio 来实现你的客户端和服务器。这是一个写得很精彩的库，有据可查，如果你有问题，它有一个活跃的用户社区（就是我们）。

根据我的经验，大多数倾向于回避 Asio 的开发人员不熟悉非阻塞 I/O，并且更喜欢使用每个连接线程的方法来孤立他们的设计，这种方法不会超出琐碎的示例。将您的同事指向[Asio 示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/examples.html)，将他们发送到 StackOverflow，以便他们阅读[boost-asio](/questions/tagged/boost-asio "显示标记为“boost-asio”的问题")标签中的问题。如果他们仍然不相信，也许向他们展示基于 Asio的[TR2 网络库提案，它可能会在某一天最终成为标准。](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3360.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:42:44.463

使用 ZMQ，您可能希望使用发布/订阅模型（与 zmq 2.2 相比，在 zmq 3.x 中特别有效，因为 3.x 执行基于发布的订阅过滤，而 2.2 执行基于客户端的过滤）。

所有工作人员都将使用 SUB 套接字连接到管理器（无论他们是什么类型的工作人员）并订阅它需要处理的消息。管理器将绑定一个 Pub 套接字并推送它从客户端接收到的所有消息。工作人员只会收到它订阅的消息。这是非常有效的，老实说，这是我实现这种行为的方式。

如果您有多个工作人员处理相同的消息（出于性能考虑），您需要创建一个中间“工作人员”来订阅该特定消息类型并绑定一个 PUSH 套接字，相同类型的工作人员将连接到该套接字带有 PULL 套接字的中间“工人”（也称为路由器）。这样，传入的消息将在每个工作人员完成一项任务时“排队”并散开。

我可能会从一开始就创建那个中间步骤，这样你就可以在没有太多问题的情况下开箱即用（如果真的需要的话）。

# css - CSS table tr 悬停一种颜色/边框，td 悬停另一种颜色/边框，不重要

> ID：15269921
> 
> 赞同：5
> 
> 时间：2013-03-07T11:25:27.840
> 
> 标签：css, hover, css-tables, tablerow

我有以下[小提琴](http://jsfiddle.net/TR8Zg/3/)。

编辑：应用行边界样式：

```
table,th,td
{
    border:2px solid black;
    border-collapse:collapse;
}
tr:hover td
{
    background-color:grey;
    border-top: 2px solid rgb(10, 0, 255);
    border-bottom: 2px solid rgb(10, 0, 255);
}
td:hover
{
    background-color:rgb(214,214,214) !important;
    border:2px solid red !important;
    border-top: 2px solid red;
    border-bottom: 2px solid red;
} 
```

我所追求的是突出 ROW 和 CELL。本来想做一些十字准线，但列背景着色需要 JavaScript，我暂时避免使用。

对此，希望`ROW:hover`背景颜色较暗，并强调边框。

然后`td:hover`是不同的颜色，并且边框强调不同。

在 Chrome 中检查，而不是在 Firefox 中检查。

问题：需要使用`!important`. 单元格边框左侧和顶部未着色为红色？

那么有没有办法`important!`在 TD 单元格上编写不使用和正确边框样式的 CSS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:12:54.947

你可以只用 CSS（没有 Javascript）来做你原来的十字准线想法。使用`::before`和`::after`伪元素突出显示。使用这种方法的 Firefox 有一个小问题，所以我为它写了一个修复程序。

`border-collapse: collapse`使边界`<tds>`以奇怪的方式表现。相反，将边框放在`<trs>`and上`<cols>`。`border-collapse: collapse`也切断边缘。为了解决这个问题，您必须发挥创造力并在所有外部`<tds>`和`<ths>`. 更奇怪的是，它“吃掉”了顶部的一个像素和底部的两个像素。因此，您需要`3px`在顶部获得`2px`边框，`4px`在底部获得`2px`边框。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/Xv6La/)]]]

### CSS：

```
table {
    border-collapse: collapse;
    overflow: hidden;
    z-index: 1;
}
td, th, .row, .col, .ff-fix {
    cursor: pointer;
    padding: 10px;
    position: relative;
}
tr:last-child td {
    border-bottom: 4px solid black;
}
tr, col {
    border: 2px solid black;
}
th {
    border-top: 3px solid black;
}
th:last-child, td:nth-child(3n) {
    border-right: 4px solid black;
}
td:first-child, th:first-child {
    border-left: 3px solid black;
}
td:hover {
    border: 2px solid red;
}
td:hover:first-child {
    border-left: 3px solid red;
}
td:hover:nth-child(3n) {
    border-right: 4px solid red;
}
tr:last-child td:hover {
    border-bottom: 4px solid red;
}
td:hover::before,
.row:hover::before,
.ff-fix:hover::before { 
    background-color: #ffa;
    content: '\00a0';  
    height: 100%;
    left: -5000px;
    position: absolute;  
    top: 0;
    width: 10000px;   
    z-index: -1;   
}
td:hover::after,
.col:hover::after,
.ff-fix:hover::after { 
    background-color: #ffa;
    content: '\00a0';  
    height: 10000px;    
    left: 0;
    position: absolute;  
    top: -5000px;
    width: 100%;
    z-index: -1;        
} 
```

HTML：

```
<table>
    <col /><col /><col />
    <tr>
        <th class="col">First Name</th>
        <th class="col">Middle Name</th>
        <th class="col">Last Name</th>
    </tr>
    <tr>
        <td>Peter</td>
        <td>Jeffery</td>
        <td>Griffin</td>
    </tr>
    <tr>
        <td>Lois</td>
        <td>Marie</td>
        <td>Griffin</td>
    </tr>
    <tr>
        <td>Margie</td>
        <td>Ann</td>
        <td>Thatcher</td>
    </tr>
</table> 
```

### 脚本：

```
function firefoxFix() {
    if ( /firefox/.test( window.navigator.userAgent.toLowerCase() ) ) {
        var tds = document.getElementsByTagName( 'td' ),
            ths = document.getElementsByTagName( 'th' );
        for( var index = 0; index < tds.length; index++ ) {
            tds[index].innerHTML = '<div class="ff-fix">' + tds[index].innerHTML + '</div>';                     
        };
        for( var index = 0; index < ths.length; index++ ) {
            ths[index].innerHTML = 
                  '<div class="' + ths[index].className + '">' 
                + ths[index].innerHTML 
                + '</div>';                     
            ths[index].className = '';
        };
        var style = '<style>'
            + 'td, th { padding: 0 !important; }' 
            + 'td:hover::before, td:hover::after { background-color: transparent !important; }'
            + '</style>';
        document.head.insertAdjacentHTML( 'beforeEnd', style );
    };
};

firefoxFix(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:56:40.127

您的示例工作正常，您不需要使用`!important`. 删除`border-collapse: collapse`，你会看到（[jsfiddle](http://jsfiddle.net/TR8Zg/5/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T09:34:53.700

这是一个更简单的解决方案：将以下样式设置为all`table`和：`tr``td`

```
border: 2px inset black;
border-collapse: collapse;
border-spacing: 0; 
```

制作`border` `inset`就行了。`inset`很有用：

> 当父元素和子元素都有边框时，使用这种技术你不会得到两个边框（看起来很难看）。这是因为子元素是在嵌入框阴影上渲染的，而不是在嵌入框阴影内。

参考： http: [//makandracards.com/makandra/12019-css-emulate-borders-with-inset-box-shadows](http://makandracards.com/makandra/12019-css-emulate-borders-with-inset-box-shadows)

工作示例：http: [//jsfiddle.net/TR8Zg/146/](http://jsfiddle.net/TR8Zg/146/)

它在 Chrome 上运行良好。但是在 IE 和 FireFox 上填充了插入效果。所以需要对它们进行一些修复。

# iphone - 将 iPhone 应用程序本地数据库同步到远程桌面

> ID：15269928
> 
> 赞同：1
> 
> 时间：2013-03-07T11:25:49.217
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我做了一个交易申请。

我将事务数据插入到本地 SQLITE 数据库表中。

现在我想同步这个数据库并将其保存在桌面上。

我怎样才能做到？如果有任何想法或参考可以很好地实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:31:25.123

您可以使用 Web 服务将数据发送到服务器。

该方法将在您的服务器上托管一个服务（以任何编程语言），您将从 sqlite 获取数据，创建其 xml/json，并将 XML/json 格式的数据发送到服务器。在这里，您的服务器将解析 xml 并将数据存储在您的数据库服务器中。

希望这些信息对你有帮助..

Web 服务创建示例

[http://www.w3schools.com/webservices/ws_example.asp](http://www.w3schools.com/webservices/ws_example.asp)

要在 iPhone 中创建 XML，您可以查看[此链接](https://stackoverflow.com/questions/1825605/create-xml-file-dynamically-in-iphone)

# javascript - jQuery BlockUI. Do a function after BlockUI fades out

> ID：15269931
> 
> 赞同：0
> 
> 时间：2013-03-07T11:25:57.930
> 
> 标签：javascript, jquery

I use jQuery BlockUI plugin.

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

I want to chage some text after jQuery BlockUI fades out.

Here is my code;

```
$('#cls').click(function() {
        setTimeout($.unblockUI, 0);
        $('#status').text("Processing...");
}); 
```

But the text changes back even before the fade completes. I want to do it hidden, without being visible, ie the text may be changed only after the fading is complete. How can I do this?

Here is the live demo [http://jsfiddle.net/yHCjF/4/](http://jsfiddle.net/yHCjF/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:31:51.737

Use `onUnblock` callback

```
onUnblock: function(){
    $('#status').text('Processing...');
} 
```

[http://jsfiddle.net/jJxvS/](http://jsfiddle.net/jJxvS/)

# asp.net - 本地化 ASPX 标记不起作用

> ID：15269942
> 
> 赞同：0
> 
> 时间：2013-03-07T11:26:27.797
> 
> 标签：asp.net, localization, markup

1.  创建文件资源：“Master”。
2.  把它放在 App_GlobalResources 目录中，
3.  添加键 - Menu_Contact。
4.  创建另一个文件资源：“Master.he”。
5.  添加键 - Menu_Contact。
6.  将线程文化设置为“he-IL”。

    ```
     System.Threading.Thread.CurrentThread.CurrentCulture =
        System.Threading.Thread.CurrentThread.CurrentUICulture =
        (System.Globalization.CultureInfo)Session["Calture"]; 
    ```

7.  将标记添加到 aspx 文件：

这是测试的标记和行：

```
<a href="#">
    <% Response.Write(Resources.Master.Menu_Contact); %>
     <asp:Label runat="server" Text='<%$Resources:Master,Menu_Contact%>'></asp:Label>
</a> 
```

第一个选项有效，标记无效。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:43:30.720

那是我的问题。我修好了它。现在我在 InitializeCulture 上设置了文化，它的工作！

# java - 在 Java 集合中实现 CONTAINS 子句

> ID：15269947
> 
> 赞同：2
> 
> 时间：2013-03-07T11:26:34.393
> 
> 标签：java, collections

谁能告诉我如何`CONTAINS`在 java 集合中实现类型功能。我的问题是我有一个名字列表。例如：-`List<String> nameList = new ArrayList<String>();` 这个列表有 100 个元素。假设我`Paras Anand`在列表中有一个名字。现在，如果我搜索`ara ana`or `ana ara`，我应该得到结果。它类似于`CONTAINS`我想要的 SQL 中使用的子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:12:01.380

这是另一种解决方案：更优雅的方式和简单的方式:)：

覆盖and的自定义`ArrayList`实现：`contains``containsAll`

```
import java.util.ArrayList;
import java.util.Collection;

public class CustomStringList extends ArrayList<String> {

    private static final long serialVersionUID = -3513906584235908802L;

    public CustomStringList(Collection<String> aist) {
        super(aist);
    }

    @Override
    public boolean contains(Object obj) {
        String paramString = (String) obj;

        for (String string : this) {
            if (string.toLowerCase().indexOf(paramString.toLowerCase()) != -1) {
                return true;
            }
        }

        return false;
    }

    @Override
    public boolean containsAll(Collection<?> collection) {
        for (Object obj : collection) {
            if (!contains(obj)) {
                return false;
            }
        }

        return true;
    }
} 
```

主要`Controller`用于测试：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Controller {
    private static List<String> names = new ArrayList<String>();;

    static {        
        names.add("shyamali bose");
        names.add("SHYAMALI BOSE");
        names.add("aShoK BoSE");
    }

    private static List<String> contains(String search) {
        CustomStringList searchParts = new CustomStringList(Arrays.asList(search.split("\\s")));
        List<String> matcheResults = new ArrayList<String>();

        for(String name : names) {              
            CustomStringList nameParts = new CustomStringList(Arrays.asList(name.split("\\s")));

            if(nameParts.containsAll(searchParts)) {
                matcheResults.add(name);
            }
        }

        return matcheResults;
    }

    public static void main(String... args) {               
        String searchString = "ose ose";
        System.out.println("Matched for: " + searchString + " | " + (contains(searchString).size() > 0));       

        searchString = "ame osa";
        System.out.println("Matched for: " + searchString + " | " + (contains(searchString).size() > 0));

        searchString = "ama OSE";
        System.out.println("Matched for: " + searchString + " | " + (contains(searchString).size() > 0));

        searchString = "ose AMA";
        System.out.println("Matched for: " + searchString + " | " + (contains(searchString).size() > 0));
    }
} 
```

输出：

```
Matched for: ose ose | true
Matched for: ame osa | false
Matched for: ama OSE | true
Matched for: ose AMA | true 
```

如果您有任何疑问，请随时询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:38:41.240

**编辑**
长时间后编辑此代码。我今天刚刚看到`CONTAINS`Oracle 中的功能，并觉得有必要更新此代码以使其行为与`SQL`. 你可以这样尝试：

```
import java.util.*;
public class Reg
{
    public int contains(String val)
    {
        List<String> records = new ArrayList<String>();
        String arr[] = val.split("\\s");
        boolean found = false;
        for (String value : list) //Let list be the object of that Collection , say ArrayList
        {
            found = false;
            String[] valArr = value.split("\\s");
            int counter = 0;
            int i = 0;
            for (i = 0 ; i < valArr.length ; i++ )
            {
                if (counter == arr.length)
                {
                    if (found)
                    {
                        break;
                    }
                }
                if (valArr[i].contains(arr[counter]))
                {
                    counter++;
                    found = true;
                }
                else
                    found = false;
            }
            if ( i < arr.length )
            {
                found = false;
            }
            if (found)
            {
                records.add(value);
            }
        }
        return  records.size();//Now returning the total number of record matching the input String..
    }
    ArrayList<String> list = new ArrayList<String>()
    {
        {
            add("John fine here");
            add("oh ere");
            add("Fox channel scam");
            add("Michael sam");
            add("Michael");
        }
    };
    public static void main(String st[])
    {
        Reg re = new Reg();
        System.out.println(re.contains("el am"));
    }
} 
```

# jquery - 我需要确保使用 jquery get 或 post 的最新响应

> ID：15269948
> 
> 赞同：1
> 
> 时间：2013-03-07T11:26:35.663
> 
> 标签：jquery

我有一个大表单，其中更改任何值都应该触发对服务器的 ajax 调用，执行一些计算并返回结果。但问题是，用户不会等待每个 ajax 调用完成，并且在几次这样的调用堆积之后，我最后得到的结果可能不是最近对服务器的调用，因为每个调用的响应时间ajax 调用可能也将根据数据和其他相关因素而有所不同。但我需要确保向用户呈现与最新更改相对应的数据。所以，

1) 有没有办法在使用 $.get() 或 $.post() 时避免这种情况？

2）有没有办法在上述两种方法中使用同步/异步？还是我必须使用 $.ajax()？

编辑：

我正在使用一个简单的ajax方法

```
$("#someField").blur(function(e){

    $.get("someURL.php?v="+$(this).val(),function(d){

       $("#result").html(d);
    });

}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:39:05.800

如果您在完成之前调用的相同请求之前再次调用相同的请求，那么您想要中止先前的请求并继续执行新请求。

```
var xhr = null;
$("#someField").blur(function(e){
    if(xhr)xhr.abort();
        xhr=$.get("someURL.php?v="+$(this).val(),function(d){
              $("#result").html(d);
            }).done(function() { xhr = null; });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T11:34:40.570

2）您可以使用它来设置 ajax 调用同步或异步：

```
$.ajaxSetup({async: false}); 
```

在此函数调用之后，以下 ajax 调用（$.ajax、$.post、$.get）会同步运行。而且我认为您可以在 post 中使用 async 参数并像在 ajax 方法中一样使用 get 方法。（但不确定）

但我不推荐它。Javascript 应该用作异步语言。你应该停止以前的电话。正如另一位评论者所写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:33:42.317

如果 ajax 调用没有对数据进行任何更改（只是计算和读取）。如果您在再次调用 ajax 之前中止任何先前的调用，那就没问题了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T11:38:42.360

jQuery Autocomplete 插件 ( [http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/) ) 使用的一种方法是在响应中包含查询，以确保显示的结果适用于正确的查询。

在您的情况下，您可以考虑在每个 ajax 请求中包含增加的请求代码并在 jQuery 中跟踪它。收到响应后，您可以将其与当前请求代码进行比较，以确定结果是针对最新查询还是针对先前查询。虽然收到的最新响应低于发送的最新查询，但您可以直观地提示某些操作处于待处理状态，或者包含所有结果。当然，我们需要一些额外的信息来确保这在您的情况下是可能的。

不确定我是否理解你的第二个问题——上面的 Kovge 可能已经回答了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T11:49:36.590

幸运的是，jqXHR 对象支持`abort()`底层 XMLHttpRequest 对象的方法，允许中止未解析/未拒绝的 ajax 请求。

这可以通过保留对前一个返回的 jqXHR 对象的引用来完成`$.get()`。

```
var blurPromise;

$("#someField").blur(function(e) {
    if(blurPromise) blurPromise.abort();
    blurPromise = $.get("someURL.php?v="+$(this).val(), function(d) {
       $("#result").html(d);
    });
}); 
```

`if(blurPromise)`当 blurPromise 未定义时，该测试用于处理初始条件。

没有必要取消 blurPromise。调用`abort()`已解析的 jqXHR 将被忽略。

# bash - 查找命令上的 Bash 脚本循环：输出有空格

> ID：15269951
> 
> 赞同：0
> 
> 时间：2013-03-07T11:26:46.127
> 
> 标签：bash, find, spaces

我有以下代码尝试查找与某些模式匹配的所有文件并将它们复制到新目录，如果文件已存在则添加后缀。这是因为重复的文件名出现在原始列表中 - 因为它们位于不同的目录中。

它按预期工作，除了包含作为分隔符`spaces`的文件名。`for in loop`

这段代码来自stackoverflow的各个部分，我已经使用过，但我并不完全理解。

我尝试了引用文件名的各种组合，在某种程度上我只复制了带空格的文件。

有人可以建议我如何解决这个问题

```
patterns=( "wom*.gif" "StarB*.gif" "logos*.gif" )
for pattern in "${patterns[@]}"
do
  for fname in $(find $source -name $pattern); 
  do
    echo Path-and-Filename: $fname
    filename=$(basename "$fname")
    extension=${filename##*.}
    filename=${filename%.*}
    echo Just-Filename: $filename.$extension
    suffix=""
    count=0
    while [ -f $dest$filename$suffix.$extension ]
    do
      count=$(($count+1))
      suffix="("$count")"
    done

    cp -v -p "$fname" $dest"$filename"$suffix.$extension >>$dest"CopyImageFiles-"$(date +"%Y-%m-%d").log 2>>$dest"CopyImageFiles-"$(date +"%Y-%m-%d").log
  done
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:44:33.493

好吧，我使用@ormaaj 使用while 循环进行阅读的想法让它工作了。我还没有正确地弄清楚它的作用，但我现在已经复制了我所有的文件，这就是我想要的。

我相信它仍然是“脆弱的”，任何建议都将不胜感激。

我没有使用 -print0 因为我不知道如何读取输出的行，它显示为一长行。我假设我需要为每个文件名设置分隔符，但无法弄清楚。现在的大脑很慢。

```
patterns=( "*.gif" "*.GIF" "*.tif"  "*.TIF" "*.jpg" "*.JPG" "*.png" "*.PNG")
for pattern in "${patterns[@]}"
do
  find "/Volumes/Public/media_pics" -name "$pattern" | while IFS= read -r fname;
    do
      echo Full-Filename: "$fname"
      filename=$(basename "$fname")
      extension=${filename##*.}
      filename=${filename%.*}
      echo Just-Filename: $filename.$extension
      suffix=""
      count=0
      while [ -f $dest$filename$suffix.$extension ]
      do
        count=$(($count+1))
        suffix="("$count")"
      done

      cp -v -p "$fname" "$dest$filename$suffix.$extension" >>$dest"CopyImageFiles-"$(date +"%Y-%m-%d").log 2>>$dest"CopyImageFiles-"$(date +"%Y-%m-%d").log
  done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:43:59.393

你做得很好。

`for pattern in "${pattern[@]}"`工作正常，空格被保留到`pattern`变量中。

`for fname in $(find $source -name $pattern);`被打破。
请记住，`pattern`其中包含一个空格。
将其修复为：

```
for fname in $(find "$source" -name "$pattern"); 
```

**将引号添加到进一步的语句中作为练习 ;-)**

# c++ - C++ 矢量擦除崩溃程序

> ID：15269960
> 
> 赞同：0
> 
> 时间：2013-03-07T11:26:58.490
> 
> 标签：c++, vector, erase, projectile

我的程序创建了向前移动的射弹，如果它们超出特定范围，它们将从存储它们的向量中删除。向量存储 xcord、ycord、zcord 及其各自的方向。

```
int size = bullet.size();
        for(int i = 0; i < size; i+=6)
        {
                float xc = bullet[i];
                float yc = bullet[i+1];
                float zc = bullet[i+2];
                float xd = bullet[i+3];
                float yd = bullet[i+4];
                float zd = bullet[i+5];
                if(xc > 100 || yc > 10 || zc > 100 || xc < -100 || yc < -10 || zc < -100)
                {
                      bullet.erase(bullet.begin()+i, bullet.begin()+i+5);
                      size=size-6;
                      i = i-6;
                }
                else
                {
                     glEnable(GL_TEXTURE_2D);
                     glBindTexture ( GL_TEXTURE_2D, texture_id[3] );
                     glPushMatrix(); 
                     glTranslatef( xc+(xd/2), yc+(yd/2), zc+(zd/2));   //x y z coord of sphere
                     glRotatef( 0,0,1,0);
                     glRotatef( -80,1,0,0); 
                     glRotatef( 0,0,0,1); 
                     glScalef( 0.10f, 0.10f, 0.10f); 
                     gluQuadricTexture(quadric,1);
                     gluSphere(quadric,10.0,72,72); 
                     glPopMatrix();
                     glDisable(GL_TEXTURE_2D);
                     bullet[i] = xc+xd;
                     bullet[i+1] = yc+yd;
                     bullet[i+2] = zc+zd;
                }
        } 
```

但是当“子弹”越界时，我的程序似乎崩溃了。有任何想法吗？

* * *

好变的

```
bullet.erase(bullet.begin()+i, bullet.begin()+i+5); 
```

至

```
bullet.erase(bullet.begin()+i, bullet.begin()+i+6); 
```

似乎已经修好了

* * *

对于那些有兴趣的人

```
 bullet.push_back(xpos);
      bullet.push_back(0.0f);
      bullet.push_back(zpos);
      bullet.push_back(nxpos);
      bullet.push_back(nypos);
      bullet.push_back(nzpos); 
```

每当单击鼠标时发生

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T11:28:11.567

你有

```
i < size 
```

作为您的条件，并访问元素

```
bullet[i] .... bullet[i+5] 
```

看看那里有什么问题吗？`i`到达时会发生什么`size-1`。你会访问`bullet[size + 4]`的，对吧？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:32:41.303

[http://www.cplusplus.com/reference/vector/vector/erase/](http://www.cplusplus.com/reference/vector/vector/erase/)

> 指定要删除的向量内的范围的迭代器：[first,last)。即，范围包括 first 和 last 之间的所有元素，包括 first 指向的元素，**但不**包括 last 指向的元素。

问题是您只删除了 5 个元素而不是 6 个。

# android - 如何在android中使用后台线程显示listview项目

> ID：15269966
> 
> 赞同：1
> 
> 时间：2013-03-07T11:27:13.277
> 
> 标签：android, listview

我从 中读取数据`webService`并显示`listview`，当数据很大时我会占用很多。是否有可能像使用线程的列表视图一样一一显示数据？

# iphone - 对齐 UIButton 的文本？

> ID：15269971
> 
> 赞同：12
> 
> 时间：2013-03-07T11:27:25.423
> 
> 标签：iphone, objective-c, xcode, uibutton

我正在生成一些按钮。在按钮中，我显示日期和用户提供的参考 ID。我希望这些数据在按钮中保持对齐。

我试过的：

```
[button.titleLabel setTextAlignment:UITextAlignmentLeft]; 
button.titleLabel.textAlignment = UITextAlignmentLeft; 
```

但这不起作用。

```
 - (void)viewDidLoad
{
 [super viewDidLoad];
 [scrollView setScrollEnabled:YES];
 [scrollView setContentSize:CGSizeMake(320, 500)];

int i = 0;

for (CalculatorData *data in calcDatas) {

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    button.frame = CGRectMake(1 , 20 + i*40, 295, 30);

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MM/dd/yyyy HH:MM:SS"];

    NSString *dateString = [dateFormat stringFromDate:data.updateDate];

    NSString *title = [NSString stringWithFormat:@"%@ : %@",dateString,[data dataKey]];

    [button setTitle:title forState:UIControlStateNormal];

    [button addTarget:self action:@selector(buttonPressed:)
    forControlEvents:UIControlEventTouchUpInside];
    button.tag = data.calcId;

    [scrollView addSubview:button];
    i++;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-07T11:29:31.267

您可以使用[contentHorizo​​ntalAlignment](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)：

> “接收器内内容（文本或图像）的水平对齐。”

和[contentVerticalAlignment](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)属性：

> “接收器中内容（文本或图像）的垂直对齐方式。”

**示例用法：**

```
button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
button.contentVerticalAlignment = UIControlContentVerticalAlignmentTop; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T11:34:56.057

用这个 ：

```
button.contentVerticalAlignment = UIControlContentVerticalAlignmentFill; 

button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;

button.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T11:31:01.790

```
button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
button.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-07T15:50:13.310

[![在此处输入图像描述](../Images/e034d81dc075db0d1ec42315d59bf188.png)](https://i.stack.imgur.com/lyZ4S.png)

***查看情节提要中的 Content-Alignment Vertical***

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-30T23:12:06.280

对于 Swift 3，以下内容对我有用：

```
button.contentHorizontalAlignment = .left
button.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T11:55:35.663

button.titleLabel.textAlignment = NSTextAlignmentLeft;

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-09T18:22:51.093

在 Swift 中，你可以使用这个：

uibutton/uilabel.titleLabel?.textAlignment = .Center

NSTextAlignment 是一个枚举，您可以通过放置一个 .VALUE 来分配它

这是可能的对齐枚举的情况左//视觉左对齐

```
case Center // Visually centered
case Right // Visually right aligned
/* !TARGET_OS_IPHONE */
// Visually right aligned
// Visually centered

case Justified // Fully-justified. The last line in a paragraph is natural-aligned.
case Natural // Indicates the default alignment for script 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-24T18:28:11.557

**斯威夫特 3.x：**

```
button.titleLabel?.textAlignment = .center 
```

# geolocation - 当 POI 靠近用户当前位置时发出 Sencha 警报

> ID：15269974
> 
> 赞同：0
> 
> 时间：2013-03-07T11:27:35.820
> 
> 标签：geolocation, sencha-touch-2, alert

真的可以在一些帮助下做，当用户靠近某个设定的兴趣点时，我试图在 sencha 的帮助下在 android 手机上推送警报。

在我看来，我有一张地图

```
{
        xtype: 'map',
        id: 'mapOne',
        cls: 'center',
        flex: 1,
        width: '100%',

        mapOptions : {
            mapTypeControl : false,
            navigationControl : true,
            streetViewControl : false,
            backgroundColor: 'transparent',
            disableDoubleClickZoom: true,
            zoom: 10,
            draggable: true,
            keyboardShortcuts: true,
            scrollwheel: false,
            enableHighAccuracy: true
        },

        listeners : {
            maprender : function(comp, map){

                var currentMarker = new google.maps.Marker({
                position: new google.maps.LatLng(setlat,setlon),
                //title : 'Sencha HQ',
                map: map,
                icon: image
                });

                setTimeout( function(){map.panTo (new google.maps.LatLng(markerlat, markerlong));} , 1);

            }
 } 
```

在我的控制器中，我在渲染地图之前设置了以下内容

```
 var poi = new google.maps.LatLng(markerlat, markerlong); 
```

然后在我的控制器中初始化一个地理定位对象，如下所示

```
 var geo = Ext.create('Ext.util.Geolocation', {
autoUpdate: true,
frequency :3000,//every 3 seconds
listeners: {
    locationupdate: function(geo) {

        var curlat = geo.position.coords.latitude;
         var curlong = geo.position.coords.longitude;
         console.log('New GEO CURRENT: ' + curlat + ' ' + curlong);
         var me = new google.maps.LatLng(curlat, curlong);

        if (me == poi){
            alert("poi found");
        }

    },
    locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
        if(bTimeout){
            alert('Timeout occurred.');
        } else {
            alert('Error occurred.');
        }
    }
} 
```

});

我还设置了一个地理标记，以查看我是否在 poi 附近被检测到。

```
 GeoMarker = new GeolocationMarker(mapOne); 
```

它直接在标记顶部显示我的 GeoMarker，没有警报。我尝试了一些不同的类似事情，但没有成功，如下所示....

```
 if (GeoMarker == poi){
            alert("poi found");
        } 
```

我知道在这两种情况下我的过程都是错误的，因为我的位置不会与 poi 完全相同，但我无法弄清楚如何将当前位置的适当接近设置为警报。我发现很难找到任何文档来说明如何成功实现与在 poi 警报方面类似的东西。任何可能有帮助的帮助或文档链接将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:06:45.550

我首先通过使用'if'语句来检查两个点的纬度和经度值之间的差异是否小于设置变量，从而获得了成功的结果。但我认为必须有一种更有效的方法通过当前位置周围的某种形式的半径来实现这一点。

终于遇到了这个线程......[计算谷歌地图V3中两点之间的距离](https://stackoverflow.com/questions/1502590/calculate-distance-between-two-points-in-google-maps-v3)，正如它在一个答案中所建议的那样，我成功使用了以下......

```
 google.maps.geometry.spherical.computeDistanceBetween (latLngA, latLngB); 
```

检查两点之间的距离是否小于我想要的距离。希望这对将来的某人有所帮助。

不过，任何人提供的任何有关执行相同操作的替代方法的信息都将受到欢迎。

# sql - 报告服务参数

> ID：15269976
> 
> 赞同：0
> 
> 时间：2013-03-07T11:27:38.397
> 
> 标签：sql, reporting-services

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:22:21.613

听起来[级联参数](http://msdn.microsoft.com/en-us/library/aa337498%28v=sql.105%29.aspx)将完全满足您的需要，除了后面的参数将始终可见，只是禁用，直到它们所依赖的参数发生更改。

级联参数的关键部分是它们只能依赖于报表参数列表中它们之前的参数。（可以使用 BIDS UI 中的向上和向下箭头重新排序。）他们应该从使用较早参数的数据集中获取可用值列表。SSRS 将知道在更改较早的参数时重新运行数据集。

# javascript - 如何覆盖基金会轨道中自动生成的 html？

> ID：15269977
> 
> 赞同：1
> 
> 时间：2013-03-07T11:27:46.630
> 
> 标签：javascript, html, ruby-on-rails, zurb-foundation, orbit

我正在使用出色的 Foundation，但我不想要 Orbit 滑块上的“上一个”和“下一个”按钮。

在我的 application.js 文件中，我设置了以下内容：

```
$(document).foundation('orbit', {
  next_class: false,
  prev_class: false,
}); 
```

但这只是部分起作用，因为由轨道自动生成的 html 仍然提供锚文本来备份图像，其中显示“下一个”和“上一个”，它们现在显示为滑块下方的单词。

对于这么小的事情，我不想完全放弃 zurb-foundation gem 并手动下载并添加所有文件（这也意味着在更新时会丢失）但是任何人都可以想到如何摆脱自动-当它被javascript幻影时生成的html？

[您可以在此处](http://foundation.zurb.com/docs/components/orbit.html)阅读文档。

ps 我还尝试将 stack_on_small: true 设置为 false，因为 'next' 和 'prev' html 元素嵌套在下面，但这会将整个滑块拧紧。

感谢您提供有关如何破解此问题的任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:36:40.400

如果你进入jquery.foundation.orbit.js，有一行JS看起来是这样的：

```
directionalNavHTML: '<div class="slider-nav hide-for-small"><span class="right"></span>    <span class="left"></span></div>', 
```

您可以删除与方向导航有关的所有内容。

如果不想乱搞JS，可以设置如下CSS：

```
.orbit-wrapper .slider-nav span {
    display:none;
} 
```

在下面看到你的评论。如果您还想删除文本，则 JS 中也有一行：

```
 directionalNavRightText: 'Right',
  directionalNavLeftText: 'Left', 
```

它是出于可访问性目的，但很容易删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:51:26.513

在您的代码前面使用`$("div.slider-nav").css({display:"none"});`以删除导航按钮。

检查这个[SO Post](https://stackoverflow.com/questions/7260941/orbit-zurb-jquery-fade-in-fade-out-navigation-button-on-mouseover)。

# css - 输入表单和水平列表在 Chrome 中神秘地错位

> ID：15269982
> 
> 赞同：0
> 
> 时间：2013-03-07T11:28:07.583
> 
> 标签：css, list, firefox, input

我在一个小型企业网站上工作。除了最后一个（令人愤怒的）造型问题外，几乎完成了：

我无法让标题中的电子邮件注册表单和社交媒体链接对齐。浏览器之间的高度差为 1px。

注册是一种形式，社交媒体链接是 ul 列表的一部分。当我向任一元素添加边距时，Chrome 和 IE 会错位。当我减去 1px 时，Firefox 会错位。

该网站建立在 Wordpress 之上，主题经过我大量修改。

这是网站：[http](http://twistbikes.com) ://twistbikes.com ...您可以在右上角看到违规文章。

这是截图：[http ://twistbikes.com/wp-content/uploads/2013/03/widget-area.jpg](http://twistbikes.com/wp-content/uploads/2013/03/widget-area.jpg)

任何线索都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:34:47.270

给`margin:0`和`padding:0`给文本框和按钮元素。

在下面的代码块中提到：

```
input, select, textarea {
     /* other properties */
     margin: 0;
     padding: 0;
} 
```

# javascript - 带分页的 Dojo 增强网格需要访问页面中的行数

> ID：15269985
> 
> 赞同：1
> 
> 时间：2013-03-07T11:28:15.983
> 
> 标签：javascript, dojo, dojox.grid

我正在`Dojo` `EnhancedGrid`用分页实现，有一个叫做`items per page`.

```
10 | 20 | 30 | 40  | 50| all. 
```

`EnhancedGrid`假设我在分页中选择了 20 。如何从程序中访问值 20？我想获取此值并将其存储在变量 say`Page-size`中。我正在使用`Dojo`版本 1.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:28:10.333

您可以使用以下命令访问 dojo 1.6 中的页面大小：

```
yourGrid.pagination.plugin.pageSize; 
```

这是一个使用 dojo 1.6 的工作 jsfiddle：

[http://jsfiddle.net/SM8GS/1/](http://jsfiddle.net/SM8GS/1/)

它使用网格的 onClick 事件。每次单击网格时，它都会提醒当前页面大小。

**请编辑您的初始问题并将 dojo 版本添加到其中！**

卢西安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:48:12.000

该[文档](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/EnhancedGrid/plugins/Pagination.html)指出有一种`currentPageSize()`方法。您可以直接从`EnhancedGrid`对象访问它。我做了一个[JSFiddle](http://jsfiddle.net/KDTcC/)来测试这个。在脚本的底部，您可以找到以下代码：

```
// Display current page size
grid.on("RowClick", function() {
   alert(grid.currentPageSize());    
}); 
```

更改页面大小并单击任意行以查看结果。

其余代码是从文档中复制粘贴的，只是为了获得增强网格的简单示例（不涉及特殊技巧）。

# oauth-2.0 - 框 oauth2：无效的 grant_type 参数或缺少参数

> ID：15269989
> 
> 赞同：10
> 
> 时间：2013-03-07T11:28:24.990
> 
> 标签：oauth-2.0, box-api

我不知道我做错了什么，但是每次我尝试获取令牌时（当然是在用户认证之后），结果总是 Invalid grant_type parameter 或 parameter missing

可能与[Box API 相关，在获取访问令牌时总是返回无效的 grant_type 参数](https://stackoverflow.com/questions/15111710/box-api-always-returns-invalid-grant-type-parameter-on-obtaining-access-token)

这是我的提琴手结果：

```
POST https://api.box.com/oauth2/token HTTP/1.1
Host: api.box.com
Content-Length: 157
Expect: 100-continue
Connection: Keep-Alive

grant_type=authorization_code&code=nnqtYcoik7cjtHQYyn3Af8uk4LG3rYYh&client_id=[myclientId]&client_secret=[mysecret] 
```

结果：

```
HTTP/1.1 400 Bad Request
Server: nginx
Date: Thu, 07 Mar 2013 11:18:36 GMT
Content-Type: application/json
Connection: keep-alive
Set-Cookie: box_visitor_id=5138778bf12a01.27393131; expires=Fri, 07-Mar-2014 11:18:35 GMT; path=/; domain=.box.com
Set-Cookie: country_code=US; expires=Mon, 06-May-2013 11:18:36 GMT; path=/
Cache-Control: no-store
Content-Length: 99

{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

即使遵循 curl 示例也会给出相同的错误。任何帮助，将不胜感激。

编辑：尝试使用额外的 redirect_uri 参数，但仍然出现相同的错误

```
POST https://api.box.com/oauth2/token HTTP/1.1
Content-Type: application/json; charset=UTF-8
Host: api.box.com
Content-Length: 187
Expect: 100-continue
Connection: Keep-Alive

grant_type=authorization_code&code=R3JxS7UPm8Gjc0y7YLj9qxifdzBYzLOZ&client_id=*****&client_secret=*****&redirect_uri=http://localhost 
```

结果：

```
HTTP/1.1 400 Bad Request
Server: nginx
Date: Sat, 09 Mar 2013 00:46:38 GMT
Content-Type: application/json
Connection: keep-alive
Set-Cookie: box_visitor_id=513a866ec5cfe0.48604831; expires=Sun, 09-Mar-2014 00:46:38 GMT; path=/; domain=.box.com
Set-Cookie: country_code=US; expires=Wed, 08-May-2013 00:46:38 GMT; path=/
Cache-Control: no-store
Content-Length: 99

{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T16:45:40.860

看起来 Box`Content-Type: application/x-www-form-urlencoded`除了正确地对参数进行 URL 编码外，还需要正确的请求标头。这似乎同样适用于刷新和撤销请求。

此外，根据[RFC 6749](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3)，`redirect_uri`只有

> 要求，如果“redirect_uri”参数包含在第 4.1.1 节中描述的授权请求中，并且它们的值必须相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-28T17:35:11.780

我面临着类似的问题。

*   问题不在于 Content-Type。
*   问题在于您收到的代码的生命周期。

大多数地方没有提到的一个关键方面是您在重定向时获得的代码仅持续**30 秒**。

要获取访问令牌和刷新令牌，您必须在 30 秒或更短的时间内发出发布请求。

如果你没有这样做，你会得到声明的错误。我在[这里](https://youtu.be/ha26tN8amI0?t=200)找到了信息。

下面的代码对我有用。请记住，30 秒规则。

```
import requests

url = 'https://api.box.com/oauth2/token'

data = [
    ('grant_type', 'authorization_code'),
    ('client_id', 'YOUR_CLIENT_ID'),
    ('client_secret', 'YOUR_CLIENT_SECRET'),
    ('code', 'XXXXXX'),
]

response = requests.post(url, data=data)

print(response.content) 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:44:12.030

您缺少重定向 URI 参数。尝试：

```
POST https://api.box.com/oauth2/token HTTP/1.1
Host: api.box.com
Content-Length: 157
Expect: 100-continue
Connection: Keep-Alive

grant_type=authorization_code&code=nnqtYcoik7cjtHQYyn3Af8uk4LG3rYYh&client_id=[myclientId]&client_secret=[mysecret]&redirect_uri=[your-redirect-uri] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T13:46:52.093

我在实施 oauth2 时也遇到了同样的问题。我有添加`Content-Type: application/x-www-form-urlencoded`。当我添加`content-type`我的问题时解决了。

检查并添加有效`content-type`的 .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-03T21:24:34.010

不确定将来谁可能需要这个，但请确保您发送 POST 请求以获取访问令牌，而不是尝试使用 GET 检索它，或者如果您正在测试 - 粘贴在地址栏中将不起作用，您需要使用 BODY 中的数据发送 POST 请求，而不是作为查询参数。

此外，代码通常会持续几秒钟，因此您需要在发送回后立即使用它。

# jsp - c:forEach 迭代

> ID：15269994
> 
> 赞同：2
> 
> 时间：2013-03-07T11:28:38.307
> 
> 标签：jsp, jstl

以下是我正在尝试的粗略迭代：

```
<c:forEach  items="${row.myList}" var="mainRow" varStatus="table">
        ${ table.first? '<table>':'<tr><td><strong>${mainRow.heading}</strong></td></tr>'}

            <c:forEach items="${mainRow.values}" var="value" >
             <tr>
                <td><input type="checkbox"  value="${value}"/>${value}</td>
              </tr>
            </c:forEach>
             ${ table.last? '</table>':''}
        </c:forEach> 
```

问题是它打印 ${mainRow.heading} 而不是属性值。还有什么其他选项有表。？喜欢第一个，最后一个。有任何文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:17:24.603

```
${ table.first? '<table>':'<tr><td><strong>${mainRow.heading}</strong></td></tr>'} 
```

上面的表达式不是您想要的，因为您在 EL 表达式内的字符串文字中嵌入了 EL 表达式。你想要的是

```
${table.first? '<table>' : '<tr><td><strong>' + mainRow.heading + '</strong></td></tr>'} 
```

或者

```
<c:choose>
    <c:when test="${table.first}">
        <table>
    </c:when>
    <c:otherwise>
        <tr><td><strong>${mainRow.heading}</strong></td></tr>
    </c:otherwise
</c:choose> 
```

IMO 更长，但更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:20:22.963

在您的代码片段中，`'<tr><td><strong>${mainRow.heading}</strong></td></tr>'`就 JSP 而言，它只是一个字符串，因此没有替换。改用这个

```
${ table.first? '&lt;table&gt;':'<tr><td><strong>'.concat(mainRow.heading).concat('</strong></td></tr>') } 
```

（我不得不使用 html 实体来避免不匹配的标签。）

其他 varStatus 选项记录在这里：[http ://docs.oracle.com/cd/E17802_01/products/products/jsp/jstl/1.1/docs/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html](http://docs.oracle.com/cd/E17802_01/products/products/jsp/jstl/1.1/docs/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html)

# hibernate - 对 HIbernate 中分离对象中的动态更新和更新前选择感到困惑

> ID：15269996
> 
> 赞同：0
> 
> 时间：2013-03-07T11:28:42.760
> 
> 标签：hibernate, hibernate-mapping

嗨，我对标题中输入的内容有点困惑，因为我第一次使用这个，好吧，我有经销商映射和经销商数据都是双向的

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.DealerData" table="book_dealerData" >
    <id column="idBook_dealerData" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>
    <property name="name" not-null="true" />
    <property name="registration" not-null="true"/>
    <property name="taxNumber" not-null="true" />
    <property name="timestamp" not-null="true"  />
    <property name="authorUserId" column="idAuthor" not-null="true" update="false"/>
    <many-to-one name="dealer" column="idBook_dealer"
        not-null="true" class="sk.bantip.hotel.server.dao.book.Dealer" update="false"/>
    <property name="channel" not-null="false" update="false">
        <type name="sk.bantip.core.enums.GenericEnumUserType">
            <param name="enumClass">sk.bantip.hotel.server.dao.book.Channel</param>
            <param name="identifierMethod">getValue</param>
            <param name="valueOfMethod">getByCode</param>
        </type>
    </property>
    <property name="street" not-null="false"/>      
    <property name="number" not-null="false" />
    <property name="zip" not-null="false" />
    <property name="city" not-null="false" />
    <property name="country" not-null="false" />
    <property name="telephone" not-null="false" />
    <property name="email" not-null="false" />
</class> 
```

这是经销商映射

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.Dealer" table="book_dealer"  >
    <id column="idBook_dealer" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>
    <many-to-one name="domain" column="idMain_domain"
        not-null="true" class="sk.bantip.hotel.server.dao.main.Domain"  />
    <many-to-one name="activeData" column="idBook_dealerData"
        class="sk.bantip.hotel.server.dao.book.DealerData" cascade="save-update"/>
    <set name="historyData" inverse="true">
        <key column="idBook_dealer" />
        <one-to-many class="sk.bantip.hotel.server.dao.book.DealerData" />
    </set>
    <property name="status" not-null="false" />
</class> 
```

问题是当我尝试更新例如单个 `not-null="false"`值而不是发生堆栈跟踪时，其他`not-null="true"`值不能为空，所以这意味着休眠尝试更新未修改的字段，所以我尝试`dynamic-update="true"`但看起来不起作用仍然尝试重写未修改的值。在某处我读到这不适用于分离对象，仅在会话中，

我不确定我是否通过我的代码使用分离对象或会话，因为我使用了一些我自己不编写的 DAO 方法，因为我对此感到困惑，但也找到`select-before-update=true`但不知道这一点，你能解释一下在这种情况下是否有用?

所以我要求从休眠状态更新此状态下的值（例如“名称”）：

```
Hibernate: 
update
    book_dealerData 
set
    name=?,       
where
    idBook_dealerData=? 
```

但是 SQL 将它们全部修改如下：

```
Hibernate: 
update
    book_dealerData 
set
    name=?,
    registration=?,
    taxNumber=?,
    timestamp=?,
    street=?,
    number=?,
    zip=?,
    city=?,
    country=?,
    telephone=?,
    email=? 
where
    idBook_dealerData=? 
```

如果有人对此有更多了解，请留下一个帖子，我将不胜感激，如果需要，我可以提供更多信息（更新方法等），谢谢到目前为止的欢呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:36:04.473

1.  dynamic-update="true" 应该与 select-before-update=true 一起使用
2.  此外，如果您使用 Session.merge()，根据 Hibernate 文档，版本/时间戳列应用作乐观锁定策略，以便 Session.merge() 正确处理对分离实例的修改
3.  如果一个 Hibernate Session 被关闭（例如你显示一个网页），一个实体的持久实例（在数据库中有一个表示和一个标识符值）将成为一个分离的实例（一个没有附加到一个会话不再 - 但仍然可以在后续请求中修改并重新附加到新会话）。

希望有些帮助。