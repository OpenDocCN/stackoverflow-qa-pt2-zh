# StackOverflow 问答 12517000-12517999

# javascript - iOS 6 Web Audio API 没有声音

> ID：12517000
> 
> 赞同：41
> 
> 时间：2012-09-20T16:34:02.303
> 
> 标签：javascript, html, mobile-safari, ios6, web-audio-api

看到 iOS 6 支持 Web Audio API，我真的很兴奋，因为我们制作 HTML5 游戏。但是，我无法让 iOS 6 使用 Web Audio API 播放任何声音，其中的示例在桌面 Chrome 中运行良好。

这是一个带有触摸控制和通过 Web Audio API 播放音频的 HTML5 游戏（如果存在 - 如果不存在，它将回退到 HTML5 音频）：

[http://www.scirra.com/labs/sbios6b/](http://www.scirra.com/labs/sbios6b/)

*编辑：@Srikumar 提出了一些解决方法。我在下面的版本中应用了它们。它仍然不起作用！*

[http://www.scirra.com/labs/sbios6f/](http://www.scirra.com/labs/sbios6f/)

在桌面 Chrome 上一切正常，但 iOS 6 完全没有声音。我在调试它时遇到了麻烦，因为我只进行 Windows 开发，而 iOS 6 用远程 Web 检查器替换了调试模式，这显然在 Safari for Windows 上不可用。使用一些警报，我确实发现它正确识别了 Web 音频 API，使用它，检测到没有 Vorbis 支持，因此回退到 AAC 音频，解码缓冲区然后播放它，没有抛出任何错误，但我什么也没听到。而且，当然，我尝试将音量调到最大:)

不应该存在编解码器问题，因为 iOS 6 可以正常播放 AAC - 您可以浏览到[游戏播放的 .m4a 文件之一，](http://www.scirra.com/labs/sbios6b/media/epicarpg.m4a)并且直接从 Safari 访问它可以正常播放。

查看 iOS 6 上的 Web 音频 API 示例：http: [//chromium.googlecode.com/svn/trunk/samples/audio/samples.html](http://chromium.googlecode.com/svn/trunk/samples/audio/samples.html) - 其中一些有效，而另一些则无效。例如，[Chrome Audio Visualizer](http://www.htmlfivewow.com/demos/audio-visualizer/index.html)可以工作，但[Javascript Drone](http://matt-diamond.com/drone.html)不能。

iOS 6 上的 Web Audio 和桌面 Chrome 之间肯定存在一些微妙的不兼容。我错过了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-24T16:39:30.950

**编辑（2015 年 11 月）：** iOS 9 不再允许在`touchstart`事件中启动音频，这破坏了以下解决方案。但是它在`touchend`事件中起作用。iOS 6 的原始答案在下面保持不变，但对于 iOS 9 支持，请确保使用`touchend`.

好吧，很抱歉回答我自己的赏金问题，但经过数小时的调试，我终于找到了答案。iOS 6 上的 Safari 有效地从 Web Audio API 静音开始。**直到您尝试在用户输入事件中播放声音**（创建缓冲区源，将其连接到目标，然后调用`noteOn()`） ，它才会取消静音。在此之后，它会取消静音并且音频播放不受限制，并且应该如此。这是 Web Audio API 如何在 iOS 6 上工作的一个未记录的方面（[Apple 的文档在这里](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/PlayingandSynthesizingSounds/PlayingandSynthesizingSounds.html)，希望他们尽快更新它并提及这一点！）

用户可以经常触摸屏幕，参与游戏。但它将保持静音。您*必须*`touchstart`在[edit: for iOS 9+] 之类的用户输入事件中播放`touchend`一次，然后将所有音频取消静音。之后，您可以随时播放音频（不必在用户输入事件中）。

请注意，这与 HTML5 音频的限制不同：通常您只能在用户输入事件中启动音频，并且一次只能播放一种声音；Web Audio API 在第一次play-in-user-input 后​​完全取消静音，这样您就可以随时播放声音，然后您可以进行复音混音、处理炫酷效果等。

这意味着已经在网络上使用 Web Audio API 的许多游戏将永远不会播放音频，因为它们不会碰巧在触摸事件中发出 noteOn。您必须对其进行调整以等待第一个用户输入事件。

有几种方法可以解决这个问题：在用户触摸屏幕之前不要播放标题音乐；初始“触摸以启用音频”屏幕并播放声音，然后在他们触摸时开始游戏；等等。希望这将帮助其他有同样问题的人节省一些时间来尝试调试它！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T03:49:22.447

您可以尝试在 Mac 上使用 Safari 6 上的 Web Inspector 对其进行调试。

1.  在 Mobile Safari 设置/高级中启用“Webkit Inspector”。
2.  使用 USB 电缆将设备连接到运行 Safari 6 的 Mac。
3.  加载您的页面/游戏
4.  转到菜单开发-> [设备名称]-> [pageurl]

它对我来说不是开箱即用的，但是通过几次尝试它可以帮助缩小问题的范围。

显然，音频只能由用户操作触发。我不确定这是不是真的，因为在 iPhone4 上的 iOS6 上运行的某些代码在 iPad（也是 iOS6）上没有播放任何声音。

**更新**：在 iPhone4+iOS6 上的网络音频取得了一些成功。发现在 iOS6 上创建新的音频上下文后，“currentTime”会停留在 0 一段时间。为了让它移动，您首先需要执行一个虚拟 API 调用（喜欢`createGainNode()`并丢弃结果）。只有在 currentTime 开始运行时才会播放声音，但在 currentTime 准确调度声音似乎不起作用。他们需要一点点未来（例如：10ms）。您可以使用以下`createAudioContext`函数等到上下文准备好发出噪音。在 iPhone 上似乎不需要用户操作，但在 iPad 上还没有这样的成功。

```
function createAudioContext(callback, errback) {
    var ac = new webkitAudioContext();
    ac.createGainNode(); // .. and discard it. This gets 
                         // the clock running at some point.

    var count = 0;

    function wait() {
        if (ac.currentTime === 0) {
            // Not ready yet.
            ++count;
            if (count > 600) {
                errback('timeout');
            } else {
                setTimeout(wait, 100);
            }
        } else {
            // Ready. Pass on the valid audio context.
            callback(ac); 
        }
    }

    wait();
} 
```

随后，在弹奏一个音符时，不要调用`.noteOn(ac.currentTime)`，而是调用`.noteOn(ac.currentTime + 0.01)`。

请不要问我*为什么*要这么做。这就是目前的情况——即疯狂。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-29T09:45:42.530

我设法找到了一个简单的解决方案，我敢肯定它一定已经在其他地方记录过了——但有时我们不得不花几个小时自己弄清楚这些事情......

因此，似乎有很多教程（例如[html5rocks](http://www.html5rocks.com/en/tutorials/webaudio/intro/)上的这篇教程）指导您执行以下步骤：

*   创建一个实例，`window.AudioContext`如果不存在（在 iOS 上不存在），则创建`window.webkitAudioContext`.

*   创建一个`XMLHttpRequest`来加载你的声音文件

*   在`load`事件运行`context.decodeAudioData(....)`然后`createBufferSource()`，用解码的数据填充它，最后`source.start(0)`播放声音。

正如其他人指出的那样，您必须`AudioContext`作为用户交互（单击或触摸启动）的结果创建（顺便说一下，您必须在页面的生命周期内存储和使用）。

**但是：** 要让 iOS “解锁”其音频功能，您 *必须*在创建`AudioContext`. 如果您异步加载数据，则没有什么可以播放的。`AudioContext`仅仅创建内部`click`事件是不够的。

这里有两种可靠的 iOS 播放解决方案：

*   1) 在初始化 AudioContext 之前，您必须至少加载一个声音文件，然后在单个用户交互（例如单击）中立即为该声音文件运行上述所有步骤。

*   或 2) 在内存中动态创建声音并播放。

这就是我做第二个选项的方式：

**记住 -对于 iOS ，必须在`click`/事件内：`touch`**

```
 window.AudioContext = window.AudioContext || window.webkitAudioContext;
 var context = new window.AudioContext();

 // you should null check window.AudioContext for old browsers to not blow up

 // create a dummy sound - and play it immediately in same 'thread'
 var oscillator = context.createOscillator();
 oscillator.frequency.value = 400;
 oscillator.connect(context.destination);
 oscillator.start(0);
 oscillator.stop(.5);    // you can set this to zero, but I left it here for testing.

 // audio context is now 'unlocked' and ready to load and play sounds asynchronously
 // YOU MUST STORE 'context' for future usage. DON'T recreate more AudioContexts 
```

我想这是一个常见的错误——三年后我很惊讶，似乎没有人指出或发现这一点：-/

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T08:01:32.087

所以，我想我已经想通了。

这是 Apple 在允许播放声音之前需要用户操作的问题。事实证明，至少对我来说，你根本不应该创建音频上下文，除非用户需要它。在页面加载时创建上下文然后在用户操作上使用 createGainNode 或类似内容是不够的。

在您的情况下，当用户单击“触摸开始”按钮时，我会创建上下文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T16:35:19.383

回答*原始*问题，我可以确认 iPhone 4S/iOS 6 和 MacOSX 上的文件格式存在一些问题。如果一个 MP3 文件对 Safari 来说“不好”，那么解码就会出错，调用 AudioContext.createBuffer(array, bool) 会给你带来错误。

奇怪的是错误：“SYNTAX_ERR，DOM Exception 12”，正如其他人所指出的那样。这让我觉得这是一个错误......

在 Safari 6.0 (7536.25) 上也有相同的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-07T07:34:23.180

我在 iOS 上遇到了**HTML5 Audio**的音频限制，并通过以下方式解决了这个问题：

1) 使用无声音频文件创建一个音频元素，并最初使用触摸事件（例如“开始游戏”按钮）播放它，然后立即暂停它。

2）构建一个声音切换器功能，它切换音频源，然后在短暂超时后播放音频元素。

3）在任何事件上调用声音切换器功能（不需要是触摸事件）。

这是因为音频元素在第一次触摸时未静音，带有静音音频文件，并且保持未静音，因此可以即时切换源。

```
switchSound: (id) ->
        @soundSwitch.pause()
        @soundSwitch.src = @sounds[id]._src

        clearTimeout @switchSoundDelay
        @switchSoundDelay = setTimeout =>
            # @soundSwitch.volume = 1
            @soundSwitch.play()
        ,50 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-17T17:24:17.137

**为 2015 年解决方案更新：** 大家好，如果您在这里使用 ios6+ 解决网络音频问题，我发现这些链接可以帮助您。

- 这是一篇带有代码解决方案的好文章：http: [//matt-harrison.com/perfect-web-audio-on-ios-devices-with-the-web-audio-api/](http://matt-harrison.com/perfect-web-audio-on-ios-devices-with-the-web-audio-api/)

- 这是上述 ^ 解决方案文章编写后对 api 的更新[https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Porting_webkitAudioContext_code_to_standards_based_AudioContext](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Porting_webkitAudioContext_code_to_standards_based_AudioContext)

- 下面是我对第一篇文章的更新解决方案，使用了第二篇文章的更改。我遇到的问题是 iOS 7 Safari 抛出了一个奇怪的 not-enough-args 错误。这修复了它：

```
define(function() {

  try {
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    window.audioContext = new window.AudioContext();
  } catch (e) {
    console.log("No Web Audio API support");
  }
/*
 * WebAudioAPISoundManager Constructor
 */
 var WebAudioAPISoundManager = function (context) {
  this.context = context;
  this.bufferList = {};
  this.playingSounds = {};
};

/*
 * WebAudioAPISoundManager Prototype
 */
 WebAudioAPISoundManager.prototype = {
   addSound: function (url) {
      // Load buffer asynchronously
      var request = new XMLHttpRequest();
      request.open("GET", url, true);
      request.responseType = "arraybuffer";

      var self = this;

      request.onload = function () {
        // Asynchronously decode the audio file data in request.response
        self.context.decodeAudioData(
          request.response,

          function (buffer) {
            if (!buffer) {
              alert('error decoding file data: ' + url);
              return;
            }
            self.bufferList[url] = buffer;
          });
      };

      request.onerror = function () {
        alert('BufferLoader: XHR error');
      };

      request.send();
    },
    stopSoundWithUrl: function(url) {
      if(this.playingSounds.hasOwnProperty(url)){
        for(var i in this.playingSounds[url]){
          if(this.playingSounds[url].hasOwnProperty(i)) {
            this.playingSounds[url][i].stop(0);
          }
        }
      }
    }
  };

/*
 * WebAudioAPISound Constructor
 */
 var WebAudioAPISound = function (url, options) {
  this.settings = {
    loop: false
  };

  for(var i in options){
    if(options.hasOwnProperty(i)) {
      this.settings[i] = options[i];
    }
  }

  this.url = '/src/www/assets/audio/' + url + '.mp3';
  this.volume = 1;
  window.webAudioAPISoundManager = window.webAudioAPISoundManager || new WebAudioAPISoundManager(window.audioContext);
  this.manager = window.webAudioAPISoundManager;
  this.manager.addSound(this.url);
    // this.buffer = this.manager.bufferList[this.url];
  };

/*
 * WebAudioAPISound Prototype
 */
 WebAudioAPISound.prototype = {
  play: function () {
    var buffer = this.manager.bufferList[this.url];
    //Only play if it's loaded yet
    if (typeof buffer !== "undefined") {
      var source = this.makeSource(buffer);
      source.loop = this.settings.loop;
        source.start(0);

        if(!this.manager.playingSounds.hasOwnProperty(this.url)) {
          this.manager.playingSounds[this.url] = [];
        }
        this.manager.playingSounds[this.url].push(source);
      }
    },
    stop: function () {
      this.manager.stopSoundWithUrl(this.url);
    },
    getVolume: function () {
      return this.translateVolume(this.volume, true);
    },
    //Expect to receive in range 0-100
    setVolume: function (volume) {
      this.volume = this.translateVolume(volume);
    },
    translateVolume: function(volume, inverse){
      return inverse ? volume * 100 : volume / 100;
    },
    makeSource: function (buffer) {
      var source = this.manager.context.createBufferSource();
      var gainNode = this.manager.context.createGain();
      source.connect(gainNode);
      gainNode.gain.value = this.volume;
      source.buffer = buffer;
      // source.connect(gainNode);
      gainNode.connect(this.manager.context.destination);
      return source;
    }
  };

  return WebAudioAPISound;
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-24T03:52:28.337

更新：iOS 仍然需要用户输入才能播放声音（[iOS 6 Web Audio API 上没有声音](https://stackoverflow.com/questions/12517000/no-sound-on-ios-6-web-audio-api/12569290#12569290)）

我之前在 iOS 网络上被网络音频卡住了。更糟糕的是，它需要在 android 和其他桌面平台上运行。这篇文章是我阅读的那些帖子之一，但没有立即找到答案。

直到我找到[howler.js](https://howlerjs.com)。

这是跨平台网络音频解决方案的解决方案：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.3/howler.min.js"></script>

<script>

  var sound = new Howl({
    src: ['yay3.mp3']
  });
  sound.play();

</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-29T19:58:48.970

这不是一个实际的答案，只是一个看看事情是否仍然不起作用的方向。iOS6 在*某些*设备上存在音频问题（特别是在特定时期制造的 64gb 4s，尽管我见过其他设备，因此它实际上可能与硬件无关）并且会神秘地停止播放某些声音（对于某些人来说，不是铃声或语音）原因，但许多其他声音），它的音量滑块将消失。我发现调试非常困难，因为它通常（并非总是如此，有时您可以抓住它）仅在未连接电源线时才会发生。

在控制台中查找来自 VirtualAudio_Device 和各种编解码器的 ASSERTION FAILURE 消息。这可能与您的特定问题无关，但话又说回来，声音设备的一个区域中的错误可能与另一个区域有关。至少，如果没有其他帮助，这是一个需要调查的领域。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-15T15:50:31.553

该 API 在 iOS 6.1 上似乎被破坏了，或者至少有一个重大变化，这意味着目前没有网站可以使用它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-21T20:57:19.143

我在使用所有简单的解决方案时遇到了麻烦。特别是当我想多次播放声音时。

所以我正在使用这个 js 库： http: [//pupunzi.open-lab.com/2013/03/13/making-html5-audio-actually-work-on-mobile](http://pupunzi.open-lab.com/2013/03/13/making-html5-audio-actually-work-on-mobile)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-23T01:22:13.360

好的，我喜欢 AshleysBrain 的回答，它帮助我解决了问题。但我找到了一个更通用的解决方案。

在您必须从用户事件启动播放声音之前，现在他们强制您通过用户输入事件来执行此操作，（听起来很奇怪）我所做的只是在播放声音之前读取一个输入字段。

所以

```
 $('#start-lesson').click(function() {
  return startThisLesson();
});
startThisLesson = function() {
     var value;
     value = $('#key-pad-value')[0].value;
     playSoundFile(yourBuffer);
} 
```

playSoundFile 是您用来创建缓冲区源的任何内容。

# javascript - 使用 Javascript 在其他网页上运行脚本

> ID：12517004
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:34:10.173
> 
> 标签：javascript, jquery, html

我正在开发一个 javascript/html 网页，该网页由一个简单的表格和一个按钮组成。

当我单击按钮时，我希望它转到某个网站，例如 www.website.com，检查几个单选按钮并自动全部输入。

我想知道这是否只能通过 javascript/jquery 来完成。如果是，请说明如何。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:36:38.127

您可以像这样轻松地将自己转移到另一个网页：

```
window.location="http://www.somewebsite.com"; 
```

但是一旦你在那里，就不再可能与任何 DOM 元素进行交互。

不幸的是，在 iFrame 中打开另一个网站，然后在 iFrame 中查找和设置要更改的元素将不起作用。通常，浏览器会禁止它，因为它会带来安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:43:06.543

你需要看看`userscripts`解决这个问题。

用户脚本是一种浏览器插件，它比普通网页具有更多功能，但必须为要使用它的每个人安装插件。

在 Firefox 下，该插件称为`GreaseMonkey`. Chrome`userscript`内置了一些功能，或者可以使用`TamperMonkey Beta`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T17:00:44.610

```
<div id="page"></div> 
```

使用 jquery 加载 div

```
$('#page').load('http://www.google.com'); 
```

现在页面的内容将在 div 中可用

使用`find(), children()`

获取必要的标签！

# android - 你能在新版本的android上运行旧应用吗

> ID：12517009
> 
> 赞同：2
> 
> 时间：2012-09-20T16:34:32.463
> 
> 标签：android, versions

好的，所以这与代码帮助并没有太大关系，但我刚刚开始我的最后一年项目，并且将最好为 Android 移动设备进行开发。计划是在 Android 2.1 中创建它，因为我只有一个使用过的 HTC hero，但我的测试人员有多个版本的 android。并且没有多少人拥有新的 HTC One 或新的 Nexus，所以我认为他们都在使用旧版本的操作系统。

所以我需要知道的是，我能否在 2.1 中创建应用程序并在新版本的操作系统上运行（如果重要的话，最好是手机而不是平板电脑）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:39:23.377

是的，你绝对可以！据我所知，这没有问题。

在构建应用程序时，在 Manifest 文件中声明**`MinSDKVersion`**指定运行应用程序所需的最低 Android 操作系统版本。您的应用程序将在高于或恰好指定的最低 SDK 版本的所有设备上运行。

可以运行您的应用程序的最大版本没有限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:50:37.947

是的 将旧的 android 应用程序运行到更高的 android 版本非常容易。您必须指定**`MinSDKVersion`**必须低于您的模拟器或 android 设备，有关更多详细信息，请通过以下链接。[http://grabcodes.blogspot.com](http://grabcodes.blogspot.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:51:16.607

您可能还想设置 targetSdkVersion=7 并确保您的环境中有适当的 2.1 (API 7)。如果您设置了另一个值，表明您将为更现代的版本进行开发，而 7 只是 MIN 值，您可能会感到烦人并且可能会混淆一些对 android api 的调用在 Eclipse 中已被弃用的迹象。也许不是一个大问题，但如果你感到困惑，最终可能会浪费你的时间。

# mongodb - 列表字段的mongodb排序

> ID：12517012
> 
> 赞同：1
> 
> 时间：2012-09-20T16:34:44.457
> 
> 标签：mongodb

我有一个简单的问题。在 MongoDB 中，如果有一个包含列表字段的文档，MongoDB 是否保证列表中值的顺序。

注意：我不关心实际文件的顺序。

即如果我插入

```
{
    something: somevalue,
    alist: [1,2,3,a,s,d,f]
} 
```

alist 的值是否总是：

```
[1,2,3,a,s,d,f] 
```

并不是

```
[2,1,3,a,s,d,f] or
[1,2,3,a,s,f,d] or
...
[1,2,a,3,s,d,f] ..etc 
```

谢谢， 瓦卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:37:37.013

是的，数组顺序将保持一致，因为记录没有更新。

# jquery - CSS 命名空间和覆盖 jquery 选择器

> ID：12517013
> 
> 赞同：1
> 
> 时间：2012-09-20T16:35:03.503
> 
> 标签：jquery, css, jquery-selectors

我希望覆盖基本的 jQuery 选择器，以便`$('.classname')`任何 jQuery 选择器中的所有 CSS 类 ( )，包括`.find(.classname)`、`.parents(.classname)`等，都以“命名空间”为前缀。在上面的例子中，我的 jQuery 代码看起来像`$('.classname')`，，但是会被翻译成`$('.SomeCssNamespace_classname')`.

选择器将匹配的 HTML`$('.classname')`如下所示：
`<div class="SomeCssNamespace_classname" />`

最重要的是，我必须添加智能，可能是以 a 的形式，`regex`这只会对类名执行此操作，而不是 id 或标签选择器。eg`$('#someId')`不会被翻译成`$('#SomeCssNamespace_someId')`.

此外，必须重写`jQuery.addClass()`and方法以添加相同的命名空间。`jQuery.removeClass()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:18:55.310

我的解决方案是编写自己的函数来执行此操作......例如：

```
prefixClassSelector = function(prefix,class_name) {
    return $('.' + prefix + '_' + class_name);
} 
```

然后你可以这样称呼它，它仍然是可链接的

```
prefixClassSelector('someNamespace','myclass').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:30:10.170

尝试这样的事情：

```
// define the namespace
jQuery.myjQueryNamespace = {

  name: 'custom_', // the prefix

  // returns the prefixed selector, classname needs to be prefixed with "."
  addNamespace: function(selector) {

    if (typeof String.prototype.indexOf == "function") {
      return selector.replace(/\./g, '.' + jQuery.myjQueryNamespace.name);
    } else {
      // TODO: write my own indexOf function
      return selector;
    }
  },

  // returns the prefixed selector, classname should *not* to be prefixed with "."
  prefixNamespace: function(selector) {
    return jQuery.myjQueryNamespace.name + 'selector';
  }
}

// keep the original init function
jQuery.fn._init = jQuery.fn.init;

jQuery.fn.init = function(selector, context, rootjQuery) {

  if (typeof selector == 'string'
  && typeof String.prototype.indexOf == "function" // assumes String.prototype.indexOf is defined
  && selector.indexOf('.') != -1) {

    var myNewSelector = jQuery.myjQueryNamespace.addNamespace(selector);
    return jQuery.fn._init.call(this, myNewSelector, context, rootjQuery);
  } else {

    return jQuery.fn._init.call(this, selector, context, rootjQuery)
  }
}

// *got this from the jQuery source code
jQuery.fn.init.prototype = jQuery.fn;

// modify addClass and removeClass
for (var fn_key in jQuery.fn) {

  // if the function has "Class" in it, replace the function
  if (fn_key == 'addClass' || fn_key == 'removeClass') {

    // we'll keep the original function prefixed with underscore
    jQuery.fn['_' + fn_key] = jQuery.fn[fn_key];

    // build the new function which calls the original function passing in the namespaced selector
    var new_function = new Function("selector", "return jQuery.fn['" + '_' + fn_key + "'].call(this, jQuery.myjQueryNamespace.prefixNamespace(selector));");

    // assign it to the original name
    jQuery.fn[fn_key] = new_function;
  }
} 
```

警告：我只通过粘贴到控制台中进行了测试，并且仅在 chrome 中。它可能有意想不到的行为。

最好在加载 jquery 后立即运行它，允许其他插件被命名空间。

代码所做的是将`jQuery.fn.init`函数替换为以类名为前缀的修改版本。该`jQuery.fn.init`函数在您调用时运行`$(selector)`。我们以类似的方式进行`addClass`修改。`removeClass`

# azure-storage - CloudTableQuery 的 Execute() 函数似乎是无限的

> ID：12517018
> 
> 赞同：0
> 
> 时间：2012-09-20T16:35:33.850
> 
> 标签：azure-storage, azure-table-storage

```
Public ReadOnly Property logs() As CloudTableQuery(Of adlog)
Get
Return CreateQuery(Of adlog)("adlog").AsTableServiceQuery()
End Get
End Property 
```

我有以下代码

```
Dim oContext = New kdlib.kdlogs.adlog_context()
Dim q = From adlogs In oContext.logs Where adlogs.PartitionKey = "xxxxxx" 
```

只会带回 1000 行

如果我在`.Execute()`某处阅读时添加：

```
Dim q = From adlogs In oContext.logs.Execute() Where adlogs.PartitionKey = "xxxxxx" 
```

请求永无止境

我真的不明白。

根据下面的成功答案进行编辑

现在在这里工作

```
Dim azt_context As New tableContextGet
Dim azt_query As CloudTableQuery(Of adlog)
azt_query = azt_context.CreateQuery(Of adlog)("adlog").Where(Function(e) (e.PartitionKey = "xxx")).AsTableServiceQuery()
Dim azt_result = azt_query.Execute() 
```

然后 azt_result.ToList

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:40:23.690

第一个查询会将查询参数发送到存储服务器，存储服务器会将过滤结果发送给您。

您的第二个查询试图从表中提取所有数据，然后在内存中对其进行过滤。那是因为`oContext.logs.Execute()`将立即执行查询，没有参数。顺便说一句，它可能会完成，尽管可能需要很长时间。

通常，您希望先设置查询，然后调用 .AsTableServiceQuery()，然后获取结果。我真的不知道 VB.NET，但这应该给你一个大致的想法：

```
Public ReadOnly Property logs() As CloudTableQuery(Of adlog)
Get
Return CreateQuery(Of adlog)("adlog")
End Get
End Property

...

Dim oContext = New kdlib.kdlogs.adlog_context() 
Dim q = From adlogs In oContext.logs Where adlogs.PartitionKey = "xxxxxx"
Dim qQuery = q.AsTableServiceContext() //Do this after setting up parameters
Dim qResult = q.ToList()  //Actually executes the query. 
```

# facebook - 使用动态应用程序 ID 时，Facebook 喜欢按钮不显示

> ID：12517024
> 
> 赞同：0
> 
> 时间：2012-09-20T16:36:16.080
> 
> 标签：facebook, facebook-graph-api, facebook-like

我正在为拥有许多加盟商的特许经营组织建立一个网站。每个加盟商都声称它是路径中表示的站点的自己的一部分 - 例如，主站点 url 是 bigcompany.com，亚特兰大商店 url 将是 bigcompany.com/atlanta。当尝试在页面上放置点赞按钮时，它在给定主要组织的应用程序 ID 时有效，但在给定特许经营应用程序 ID 时不显示任何内容。

我试过在 facebook (https://developers.facebook.com/tools/debug/) 上使用 url 调试器，我收到的错误是

```
Object Invalid Value:   Object at URL 'http://bigcompany.com/atlanta' of `type 'website' is invalid because the given value '12345678901' for property 'fb:admins' could not be parsed as type 'fbid'.` 
```

我不确定这意味着什么，到目前为止还没有找到合适的答案。

为什么点赞按钮不显示？谢谢

# hibernate - 按（链接）列排序，可以为空

> ID：12517029
> 
> 赞同：5
> 
> 时间：2012-09-20T16:36:35.773
> 
> 标签：hibernate, null, sql-order-by, hql

我目前在使用 Hibernate 时遇到问题，我会自动创建一个 HQL 语句，看起来像

```
FROM table ORDER BY a.b ASC NULLS LAST 
```

我的意图是对所有条目进行排序，`a.b`并将所有条目设置在表末尾的位置`a`或`b`位置。`NULL`Hibernate 不会抱怨该语句，而只是忽略所有已经存在`a`的条目`NULL`。我尝试了设置：

```
FROM table ORDER BY NULLIF(a.b, NULL) ASC NULLS LAST 
```

再一次，Hibernate 没有抱怨，而是再次忽略了`a`is 的所有条目`NULL`。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:28:14.593

我猜a是table_two类型的属性，并且该属性是用多对一关系或某事物定义的。相似的。

您订购的列不是表的成员，而是相关的 table_two 的成员。Sql 不能直接做到这一点，而 Hibernate 通过在 table 和 table_two 之间生成连接来做到这一点。Hibernate 生成的这个连接是普通连接，不是外连接，所以 select 不会获取 table_two 中没有相关条目的行。

您可以通过手动定义外连接来解决该问题。像这样的东西应该工作：

```
FROM table t
   LEFT OUTER JOIN t.a u
   ORDER BY u.b ASC NULLS LAST 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:00:16.140

感谢您的回答，我找到了一个更容易实施的不同解决方案。我现在创建一个请求，如下所示：

```
FROM table ORDER BY a ASC NULLS LAST, a.b ASC NULLS LAST 
```

对我来说，只要这些订单没问题，这适用于任何尺寸的链条。这对我来说更容易实现，因为查询是自动生成的。不过，谢谢你的建议。我试过了，你的解决方案也很好，但需要我调整我的整体设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T15:37:44.447

我刚刚遇到了同样的问题，我执行了左外连接......我有一个`Cost`和`Order`域，Order 属性是一个嵌套关系实例；这可能是`NULL`。为了更加清楚，即：

```
class Cost { 
    User  owner 
    Order order 
    etc...
}

Cost.executeQuery('SELECT c FROM Cost AS c LEFT OUTER JOIN c.order AS o WHERE c.owner = ? ORDER BY o.orderNumber ASC, c.id DESC' , cost_qry_params, params) 
```

您可以将您的分页/排序信息放在参数中......希望这可以帮助某人:)

# python - 使用python和mysqldb时如何在不使用字段名的情况下删除mysql行？

> ID：12517031
> 
> 赞同：0
> 
> 时间：2012-09-20T16:36:37.770
> 
> 标签：python, mysql-python

```
# -*- coding: utf-8 -*-

import re
import sys
import MySQLdb
from getpass import getpass

reload(sys)
sys.setdefaultencoding('utf-8')

conn = MySQLdb.connect(host, user, passwd, db, charset = 'utf-8')
cur = conn.cursor()
cur.execute("show tables")
tablenames = [i[0] for i in cur.fetchall()]

cur.execute("SELECT * FROM %s" % tablenames)
rows = cur.fetchall()
for row in rows:
    x = re.compile(r"\bhello\b")
    p = x.search(str(row))
    if p:
    cur.execute("DELETE FROM %s WHERE " % t) # how to delete this row

conn.close() 
```

使用上面的代码，我想用正则表达式搜索表格行，并搜索关键字“hello”。

如果匹配，我想删除在获取所有行的行中循环的行。

当正则表达式找到行时，如何编写删除语句？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T09:07:19.107

您可以在 SQL 中使用 LIKE：

```
DELETE FROM `table` WHERE `content` LIKE "%value%" 
```

执行 sql 后重要的是提交：

```
a = cur.execute(sql)
con.commit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:53:24.547

如果我怀疑您想要删除满足某些条件的行，那么您根本不需要选择。
`DELETE FROM tableName WHERE columnName [=, !=, <, >, LIKE] columnValue`
如果您需要正则表达式匹配，请阅读以下内容： http: [//dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

# php - 贝宝/谷歌结帐集成

> ID：12517036
> 
> 赞同：1
> 
> 时间：2012-09-20T16:37:02.023
> 
> 标签：php, paypal, google-checkout

是否可以将 Google Checkout API 或 Paypal API 与我的市场集成？我正在使用 PHP 生成市场，当时是一场拍卖。我有一个包含所有市场行为的 MySQL 数据库，但是，我想知道。我可以使用 Google Checkout 或 Paypal 来动态生成**Checkout**流程，并将所得款项交给发布操作的用户，然后通知我吗？

我也可以从 MySQL 数据库加载用户详细信息。

*   但是，我查看了“StackExchange”网络；我不知道该把这个问题放在哪里。因此我认为这是最好的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:09:52.857

我不熟悉您的项目术语，例如“生成市场”、“市场行动”

PayPal 有[参考交易](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECReferenceTxns)，您可以在其中再次向同一客户的信用卡收取费用，而无需存储实际信用卡。

Authorize.Net 有[CustomerPaymentProfile](http://www.authorize.net/support/CIM_SOAP_guide.pdf)，他们在其中存储客户的信用卡。然后，您可以提交每个客户的 paymanet 资料，他们会为您从卡中扣款。

我不熟悉没有实际信用卡的 Google 自动结帐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:07:30.650

Google Checkout 顾名思义就是它所说的——它允许商家将他们的结账业务外包给 Google。我认为这不合适，因为在您的情况下，“商人”是“动态的”-它在拍卖中的不同卖家。此外，Google Checkout 不适用于个人对个人的付款 - 它专门供商家（商店）在其网站上销售产品和服务，并由 Google 处理结帐流程。

查看[Paypal 自适应付款](https://www.x.com/developers/paypal/products/adaptive-payments)。

您还可以查看[Amazon FPS](https://payments.amazon.com/sdui/sdui/business?sn=devfps/o)。

# php - 如何将 CORS 支持添加到 Wordpress RSS2 提要？

> ID：12517039
> 
> 赞同：8
> 
> 时间：2012-09-20T16:37:08.920
> 
> 标签：php, wordpress, http-headers, cors, rss2

我正在尝试将 CORS ( [http://enable-cors.org/](http://enable-cors.org/) ) 支持添加到自定义 Wordpress 主题中的 RSS2 提要。我尝试了以下方法，但均无济于事：

1.  按照[https://web.archive.org/web/20140314152828/http://bowdenweb.com:80/wp/2011/05/how-to-enable-cors-in-wordpress.html](https://web.archive.org/web/20140314152828/http://bowdenweb.com:80/wp/2011/05/how-to-enable-cors-in-wordpress.html)上的说明，我尝试了修改主题的 header.php 文件并添加以下代码：

    `header("Access-Control-Allow-Origin: *");`

    这成功地将 CORS 标头添加到 Wordpress 帖子中，但*没有*添加到 RSS2 提要中。

2.  然后，我尝试使用“Plugin API / Action Reference”，即`add_action`函数（[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)）。

    我在 header.php 中添加了以下代码：

    ```
    function add_cors_headers()
    {
        header("Access-Control-Allow-Origin: *");
    }

    add_action('rss2_head','add_cors_headers'); 
    ```

再次，没有成功。现在我陷入了死胡同。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-26T20:20:41.450

您可以使用插件或添加功能来做到这一点。我认为这最终会变得更清洁。

```
add_action( 'pre_get_posts', 'add_header_origin' );

function add_header_origin() {
    if (is_feed()){
        header( 'Access-Control-Allow-Origin: *' );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:18:33.943

将原始 rss 模板“wp-includes/feed-rss2.php”复制到您的主题目录并通过将此代码添加到您的 functions.php 来激活它：

```
remove_all_actions( 'do_feed_rss2' );
add_action( 'do_feed_rss2', 'my_feed_rss2', 10, 1 );

function my_feed_rss2( $for_comments ) {
    $rss_template = get_stylesheet_directory() . '/feed-rss2.php';

    if( file_exists( $rss_template ) )
        load_template( $rss_template );
    else
        do_feed_rss2( $for_comments ); // Call default function
} 
```

然后您可以修改您的 rss 模板并添加 jefffederman 提到的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:00:33.807

转到 wp-includes/feed-rss2.php 及以下

```
header('Content-Type: ' . feed_content_type('rss-http') . '; charset=' . get_option('blog_charset'), true); 
```

添加

```
header("Access-Control-Allow-Origin: *"); 
```

# css - 使用 css 更改输入字段

> ID：12517043
> 
> 赞同：0
> 
> 时间：2012-09-20T16:37:24.907
> 
> 标签：css

我有一个带有输入字段的 JSF 按钮：

![在此处输入图像描述](../Images/b937b113399ec14489f109d5faf06bc0.png)

```
<h:outputLabel for="rowsPerPage" value="Rows per page" />
<h:inputText id="rowsPerPage" value="#{AccountsController.rowsPerPage}" size="3" maxlength="3" style="border: 1px solid #006; height: 24px; border-radius: 3px 3px 3px 3px;" />
<h:commandButton styleClass="bimage" value="Set" action="#{AccountsController.pageFirst}" >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>&nbsp;
<h:message for="rowsPerPage" errorStyle="color: red;" /> 
```

如您所见，输入字段位于“设置”按钮下方。如何使用 css 在一行中制作按钮和输入字段。以及如何使输入字段看起来像按钮？

编辑：这是html代码：

```
<input id="form:rowsPerPage" type="text" name="form:rowsPerPage" value="10" maxlength="3" size="3" style="border: 1px solid #006; height: 24px; border-radius: 3px 3px 3px 3px;" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:50:57.727

尝试添加`margin-top: 1px`到您的按钮。

# ruby-on-rails - Rails - 注册码有效性检查

> ID：12517054
> 
> 赞同：0
> 
> 时间：2012-09-20T16:38:05.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以，我是这方面的新手，并试图通过直接参与来学习。

我在我的 rails 应用程序中有一个有点奇怪的登录，它的工作原理是这样的：

*   管理员生成代码并指定上限
*   用户通过输入此代码和一些保存的详细信息登录

楷模：

```
class Code < ActiveRecord::Base  
  has_many :users, dependent: :destroy
  attr_accessible :code, :maxusers
end

class User < ActiveRecord::Base
  belongs_to :code
  attr_accessible :name, :email, :code_id
end 
```

用户控制器：

```
class UsersController < ApplicationController
  def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to "/welcome"
    end
  end
end 
```

因此，例如代码是 123456，限制为 5

前 5 位用户可以使用他们的姓名、电子邮件和 123456 进行注册

所以问题是：如何在保存之前检查代码是否有效？它必须存在并且已分配的用户少于 5 个。

看起来很简单，但我不知道语法，我在控制器中使用 before_filter 或在模型中保存之前玩，但我被卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:14:46.187

`before_filter`是个坏主意：模型必须关心它们的完整性，而不是控制器。

*您*可以尝试以下方法：

```
# in your respective model

validate :at_least_five_codes

def at_least_five_codes
  errors.add(:base, 'Try another code') unless User.where(code: code).count < 5
end 
```

如果当前代码使用了 5 次，您将无法保存模型。

# css - 单元格填充在 Gmail 中准确，但在 Microsoft Outlook 中不准确

> ID：12517056
> 
> 赞同：0
> 
> 时间：2012-09-20T16:38:11.553
> 
> 标签：css, email, outlook, phpmailer, html-table

我有一封我们公司的电子邮件客户端 Microsoft Outlook 收到的 php 电子邮件。我还在我的 gmail 中获得了一份副本。gmail中的一切看起来都很好：

这个php/html：

```
$remainder = <<<EOD

<tr>
    <td colspan='2' style='font-size:12pt; padding:5px 0px 5px 3px; background-color:#F7F7F7;'>
    Product details
    </td>
</td>

<tr>
    <td style="width:150px;font-size:10pt; padding:10px 8px 0px 3px;" align="left">
        Product type:
    </td>

    <td style='font-size:10pt; padding:10px 0px 0px 0px;'>
        {$product}
    </td>
</tr>

<tr>
    <td style='width:150px;font-size:10pt; padding:10px 8px 0px 3px;' align="left">
        Quantity:
    </td>

    <td style='font-size:10pt; padding:10px 0px 0px 0px;'>
        {$qty}
    </td>
</tr>       

<tr>
    <td style='width:150px;font-size:10pt; padding:10px 8px 0px 3px;' align="left">
        Product size:
    </td>

    <td style='font-size:10pt; padding:10px 0px 0px 0px;'>
        {$productSize}
    </td>
</tr>

<tr>
    <td style='width:150px;font-size:10pt; padding:30px 8px 0px 3px;' align="left">
        Account executive:
    </td>

    <td style='font-size:10pt; padding:30px 0px 0px 0px;'>
        {$accountExec}
    </td>
</tr> 
```

在 gmail 中产生的东西看起来像这样：（减去顶部的部分我没有裁剪）

![gmail截图](../Images/8f04f57e9d746583fa2dde71c3c8d2e0.png)

但是，在 microsoft Outlook 中，我得到了一些看起来像这样的东西（有很多膨胀的填充。

我可以通过查看浏览器中的元素（当我将元素从 msOutlook 转发回 gmail 时）看到正在添加几个不同的元素。为什么会发生这种情况？有没有办法阻止它？

![chrome控制台中html的解释](../Images/3f77179a39ec3143c4bb6ce6cab81730.png)

![ms Outlook 打印输出](../Images/e4b145f8366ee2b0fb139ae48eb95736.png)

我怎样才能做到这一点，所以它看起来都正确？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:24:52.067

我建议将每个表格单元格的内容包装在一个 div 中，并为该 div 而不是 td 提供填充

# c# - 有没有办法调试从 C# DllImport 调用的 c++ dll？

> ID：12517058
> 
> 赞同：25
> 
> 时间：2012-09-20T16:38:12.737
> 
> 标签：c#, c++, pinvoke

我想知道是否有任何方法可以在 VS 2010 中调试从 C# PInvoke 调用的 c++ dll。我试图将项目附加到 c# 应用程序中，但它没有用 - 没有在断点处停止。

我还尝试在 C++ 项目中使用 OutputDebugString 记录任何内容，但没有使用 PInvoke 调用打印任何内容。尽管存在这些问题，但实际功能运行良好。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-20T16:41:24.390

两者都需要打开相同的选项：项目 > 属性 > 调试选项卡 > 勾选“启用非托管代码调试”选项。

您现在可以在本机 DLL 代码中设置断点，一旦 C# 项目加载 DLL，它就会从空心变为实心。由于使用了非托管调试引擎，OutputDebugString() 输出将进入输出窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:41:08.500

如果您在程序运行时运行 C++ 调试器，然后转到 Debug->Attach To Process->Find your process 并附加到它。您应该能够调试它。

确保您已使用调试器符号编译您的 DLL。(.pdb) 文件，并且它们位于您从中运行的目录中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T16:41:13.623

附加时，将“附加到”值更改为“本机”。该进程不应在托管代码调试器下运行 - 而不是“调试”，而是使用“运行”命令启动。

此外，DLL 需要使用调试信息进行编译，以便进行任何合理的调试。确保您没有 P/Invoking Release 版本。

但是，无论调试模式如何，OutputDebugString() 都应该工作。

# objective-c-blocks - 返回块结果的方法

> ID：12517060
> 
> 赞同：0
> 
> 时间：2012-09-20T16:38:22.337
> 
> 标签：objective-c-blocks, ios6

```
- (ACAccount *)accountFacebook{
    if (_accountFacebook) {
        return _accountFacebook;
    }
    if (!_accountStoreFacebook) {
        _accountStoreFacebook = ACAccountStore.new;        
    }
    ACAccountType *accountTypeFacebook = [self.accountStoreFacebook accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSDictionary *options = @{ACFacebookAppIdKey : @"xxxxxxxxx",
    ACFacebookAudienceKey : ACFacebookAudienceEveryone,
    ACFacebookPermissionsKey : @[@"user_about_me", @"publish_actions"]
    };
    __block ACAccount *accountFb;
    [_accountStoreFacebook requestAccessToAccountsWithType:accountTypeFacebook options:options completion:^(BOOL granted, NSError *error) {
        if (granted) {
            NSLog(@"Facebook access granted");
            accountFb = _accountStoreFacebook.accounts.lastObject;
        }else {
            NSLog(@"Facebook access denied");
            accountFb = nil;}
        if (error) {
            NSLog(error.localizedDescription);
        }
    }];
    return accountFb;
} 
```

当我跑

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
if (appDelegate.accountFacebook) {
    NSLog(@"accountFacebook OK");
}else  NSLog(@"accountFacebook Not Exists"); 
```

appDelegate.accountFacebook 总是返回 nil，不等待块完成。应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:00:28.120

这是一个异步调用，因此该块在您的方法结束后完成。你需要重新设计你的应用程序来完成它在完成块中必须做的事情。如果它不是 nil，你打电话`appDelegate.accountFacebook`并期望做某事。为什么不将此方法传递给一个完成块，该块将执行您希望它执行的操作，如下所示：

```
typedef void(^HandlerType)(ACAccount* account);

- (void)performForFacebookAccount: (HandlerType) handler{
    if (_accountFacebook) {
        handler(_accountFacebook);
        return;
    }

    if (!_accountStoreFacebook) {
        _accountStoreFacebook = ACAccountStore.new;
    }

    ACAccountType *accountTypeFacebook = [self.accountStoreFacebook accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSDictionary *options = @{ACFacebookAppIdKey : @"xxxxxxxxx",
    ACFacebookAudienceKey : ACFacebookAudienceEveryone,
    ACFacebookPermissionsKey : @[@"user_about_me", @"publish_actions"]
    };

    [_accountStoreFacebook requestAccessToAccountsWithType:accountTypeFacebook options:options completion:^(BOOL granted, NSError *error) {
        if (granted) {
            NSLog(@"Facebook access granted");
            _accountFacebook = _accountStoreFacebook.accounts.lastObject;

            handler(_accountFacebook);

        }else {
            NSLog(@"Facebook access denied");
            _accountFacebook = nil;}
        if (error) {
            NSLog(error.localizedDescription);
        }
    }];
} 
```

# c# - 通过网络共享同步两个进程

> ID：12517061
> 
> 赞同：0
> 
> 时间：2012-09-20T16:38:29.620
> 
> 标签：c#, synchronization, sync

我正在编写一个 C# 应用程序。我的应用程序从网络共享文件夹中读取。这个应用程序可以在多台计算机上运行，​​但我希望一次只有一个应用程序从这个共享文件夹中读取。

我在想我可以通过创建一个具有预定义名称的独占文件来同步它。这是最好的方法吗？

我怎样才能做到这一点？

感谢您的时间。

# android - 滚动视图内的滚动视图

> ID：12517063
> 
> 赞同：1
> 
> 时间：2012-09-20T16:38:53.223
> 
> 标签：android, android-layout, android-scrollview

**在你** *说“谷歌说不要这样做”之前* **，请阅读我的所有问题！！**

布局：

`ScrollView -> RelativeLayout -> ScrollView -> RelativeLayout`

第*一个*ScrollView 是必要的，因为表单条目会在某些手机上拉起软键盘，从而隐藏其余内容。将 ScrollView 作为最外层的容器允许用户在存在软键盘的情况下进行滚动。

层次结构中较低的*第二个*ScrollView 是仍可滚动的 ListView。

我完全理解为什么不鼓励开发人员在另一个 ScrollView 中有一个 ScrollView。我需要想办法让两者一起工作。当最里面的 ScrollView 得到触摸时，我*尝试禁用最外面的 ScrollView，但这没有帮助。*

有没有办法解决这个问题（当然不是同时）？在再次更改内容页面之前，我什至不介意禁用最外层的 ScrollView。一定有办法。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:52:56.107

第 1 步：删除`ScrollView`.

步骤#2：使第一个成为您via`RelativeLayout`中的标题。`ListView``addHeaderView()`

步骤#3：使第二个成为您via`RelativeLayout`中的页脚。`ListView``addFooterView()`

最终效果是整个东西都是可滚动的，没有嵌套的可滚​​动项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:52:40.197

只有当您将 android:layout_height 设置为第二个 ScrollView 的固定值时，它才会起作用。最好的方法是根据设备设置尺寸，因为最好为每个支持的屏幕尺寸创建布局（dp 上的值，如 150 dp）。您应该创建单独的布局：layout-small、layout-normal、layout-large .... 请参阅此链接以优化固定尺寸：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:00:05.427

答案是以编程***方式拦截***最外层滚动视图的触摸事件。我正在使用我在另一个 SOF 中找到的关于[Disabling a ScrollView Programattically](https://stackoverflow.com/questions/5763304/disable-scrollview-programmatically)的类。

# jquery - 从 html 中删除选定的类

> ID：12517065
> 
> 赞同：0
> 
> 时间：2012-09-20T16:39:09.713
> 
> 标签：jquery, html, removeclass

我想用jQuery加载html代码并从这段代码中删除一些类，我的代码是：

```
<!DOCTYPE html>
<html>
   <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
   </head>
   <body>
      <div id="new-nav"></div>
      <script>
         $("#new-nav").load("/php/grab.php");

      </script>
      <script>
         $('.main_title_news_submain_block').remove();
      </script>
   </body>
</html> 
```

.remove 功能不起作用的问题，我不知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:40:19.650

`document.ready`如果该 html 元素在页面加载之后，则将其包裹在里面。

```
$(function () {
   $('.main_title_news_submain_block').remove();
}); 
```

如果它使用加载，`.load`则将其添加到回调中。

```
$("#new-nav").load("/php/grab.php", function () {
   $('.main_title_news_submain_block').remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:41:19.110

您是否在方法的**回调**中尝试过[`load`](http://api.jquery.com/load/)？

```
 $(function(){
      $("#new-nav").load("/php/grab.php",function(){ 
         $('.main_title_news_submain_block').remove();              
      });
  }); 
```

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。

所以在`remove()`load 函数将内容加载到 DOM 中的指定 div 之后，会执行 line with 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T16:41:20.003

您需要在`.remove()`使用回调函数加载内容后执行。

```
$("#new-nav").load("/php/grab.php", function(){
    /*removes the element with class main_title_news_submain_block*/
    $('.main_title_news_submain_block').remove();
}); 
```

编辑：您还可以将所有内容包装在准备好的文档中，以确保在将具有 id new-nav 的元素加载到 dom 之后发生加载。

```
$(document).ready(function(){
    $("#new-nav").load("/php/grab.php", function(){
        /*removes the element with class main_title_news_submain_block*/
        $('.main_title_news_submain_block').remove(); 
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:50:13.223

我看到您没有在任何地方使用 DOM 就绪功能。确保在那里编写脚本，以免看到异常。

```
<script type="text/javascript">
  $(function() {
      $("#new-nav").load("/php/grab.php" , function() {
           $('.main_title_news_submain_block').remove(); 
       });
   });
</script> 
```

# php - 在 Codeigniter 中向 URL 添加搜索查询

> ID：12517067
> 
> 赞同：0
> 
> 时间：2012-09-20T16:39:18.543
> 
> 标签：php, codeigniter

> **可能重复：**
> [如何在codeigniter中制作动态表单动作地址？](https://stackoverflow.com/questions/12070107/how-to-make-dynamic-form-action-address-in-codeigniter)

我有以下内容，它创建了一个带有用于输入搜索词的输入字段的表单。我需要能够在该字段中输入搜索词，并且单击提交按钮后，它需要转到格式为`site.com/search/search+terms`

基本上，我需要 GET 但格式不同。我怎样才能做到这一点？

```
<?php echo form_open('search', array('id' => 'site-search', 'class' => 'form-search pull-right')); ?>
    <div class="input-append">
        <input type="text" class="input-medium search-query" id="site-search-field" placeholder="Search">
        <button type="submit" class="btn btn-inverse" id="site-search-submit"><i class="icon-chevron-right icon-white"></i></button>
    </div>
<?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:41:34.770

在此处查看我的答案：[如何在 codeigniter 中制作动态表单操作地址？](https://stackoverflow.com/questions/12070107/how-to-make-dynamic-form-action-address-in-codeigniter/12070284#12070284)

您需要的是一个控制器方法，它接受 POST 数据并`redirect()`在其中使用来自 POST 的参数。

# node.js - 何时使用回调？

> ID：12517072
> 
> 赞同：3
> 
> 时间：2012-09-20T16:39:38.537
> 
> 标签：node.js

我不太了解 node.js 中回调的使用。我明白，如果你有类似的东西

```
result = db.execute(query);
doSomething(result); 
```

您应该将 doSomething 设为回调，因为 doSomething 会在结果准备好之前执行。这是有道理的，因为 db 操作可能很昂贵。

现在假设我有类似的东西

```
result = calculate(x,y)
doSomething(result) 
```

哪里计算不昂贵（即没有从数据库或 I/O 读取），我还应该使用回调吗？如何判断我的函数是在下一行执行之前还是之后完成？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T16:50:05.940

简而言之，如果您的函数正在调用异步函数（例如调用 I/O 操作或数据库调用），您的函数需要接受一个回调参数，以便将这些调用的结果提供给函数的调用者。如果您的函数只是进行同步调用，那么您的函数也是同步的，并且您不需要回调参数（如第二个示例的情况）。

# mysql - Rails 如何构建 MySQL 语句？

> ID：12517073
> 
> 赞同：1
> 
> 时间：2012-09-20T16:39:48.407
> 
> 标签：mysql, ruby-on-rails, ruby, heroku

*我有以下代码在间歇性*失败的控制器内的 heroku 上运行。它应该对我有用，这很容易，但我一定错过了一些东西。

`@artist = Artist.find(params[:artist_id])`

参数哈希如下所示：

```
{"utf8"=>"������",
 "authenticity_token"=>"XXXXXXXXXXXXXXX",
 "password"=>"[FILTERED]",
 "commit"=>"Download",
 "action"=>"show",
 "controller"=>"albums",
 "artist_id"=>"62",
 "id"=>"157"} 
```

我得到的错误如下所示：

```
ActiveRecord::StatementInvalid: Mysql::Error: : SELECT `artists`.* FROM `artists` WHERE `artists`.`id` = ? LIMIT 1 
```

注意到声明中的`WHERE`艺术家`.`ID`= ?`部分了吗？它正在尝试查找 QUESTION MARK 的 ID。这意味着 Rails 没有传入`params[:artist_id]`显然在 params 哈希中的。我完全失去了。

我在尝试以类似方式选择记录的不同页面上遇到相同的错误。

我的环境：Heroku 上的 Cedar Stack（*这只*发生在 Heroku 上）、Ruby 1.9.3、Rails 3.2.8、托管在 Amazon S3 上的文件（尽管我怀疑这很重要），使用`mysql`gem（不是`mysql2`，这不起作用完全），ClearDB MySQL 数据库。

这是[完整的跟踪](https://gist.github.com/3756965)。

任何帮助将*不胜*感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:55:16.843

### 试试sql？

如果只是这一条语句，并且导致生产问题，您可以暂时省略查询生成器吗？换句话说，在很短的时间内，只需自己编写 SQL。这会为你争取一点时间。

```
# All on one line:
Artist.find_by_sql
  "SELECT `artists`.* FROM `artists` 
   WHERE `artists`.`id` = #{params[:artist_id].to_i} LIMIT 1" 
```

### ARel/MySQL 解释一下？

Rails 可以帮助解释 MySQL 试图做什么：

```
Artist.find(params[:artist_id]).explain

http://weblog.rubyonrails.org/2011/12/6/what-s-new-in-edge-rails-explain/ 
```

也许您可以发现成功与失败的查询之间的某种差异，例如`explain`使用索引或优化的方式。

### mysql2宝石？

您可以尝试从 mysql gem 更改为 mysql2 gem 吗？切换到 mysql2 gem 时遇到什么故障？

### 挥发性？

也许还有其他东西在动态更改参数哈希，所以您在打印它时会看到它，但是在查询运行时它已经改变了？

收到参数后尝试分配变量：

```
artist_id = params[:artist_id]
... whatever code here...
@artist = Artist.find(artist_id) 
```

### 不是参数哈希？

你写了“意思是 Rails 没有传入 params[:artist_id] 这显然在 params 哈希中。” 我认为这不是问题——我希望您会看到这一点，因为 Rails 使用的是“？” 作为准备好的语句的占位符。

要找出答案，请运行@Mori 建议的命令并进行比较；他们应该是一样的。

```
Article.find(42).to_sql
Article.find(params[:artist_id]).to_sql 
```

### 准备好的陈述？

实际执行查询时，可能是准备好的语句缓存问题。

这是失败的代码 - 并且有一个很大的警告。

```
begin
  stmt.execute(*binds.map { |col, val| type_cast(val, col) })
rescue Mysql::Error => e
  # Older versions of MySQL leave the prepared statement in a bad
  # place when an error occurs. To support older mysql versions, we
  # need to close the statement and delete the statement from the
  # cache.
  stmt.close
  @statements.delete sql
  raise e
end 
```

尝试配置您的数据库以关闭准备好的语句，看看是否会有所不同。

在您的`./config/database.yml`文件中：

```
production:
   adapter: mysql
   prepared_statements: false
   ... 
```

### 准备好的语句的错误？

Rails 忽略此设置可能存在问题。如果您想了解更多信息，请参阅 Jeremey Cole 和 Aaron 的讨论和错误修复：[https ://github.com/rails/rails/pull/7042](https://github.com/rails/rails/pull/7042)

Heroku 可能会忽略该设置。这是一种方法，您可以尝试通过修补prepared_statements 设置来覆盖Heroku：[https ://github.com/rails/rails/issues/5297](https://github.com/rails/rails/issues/5297)

### 删除查询缓存？

尝试删除 ActiveRecord QueryCache 以查看是否有所不同：

```
config.middleware.delete ActiveRecord::QueryCache

http://edgeguides.rubyonrails.org/configuring.html#configuring-middle 
```

### 试试postgres？

如果您可以尝试 Postgres，那也可以解决问题。这对您来说可能不是一个长期的解决方案，但它会将问题隔离到 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:00:11.127

MySQL 语句显然是错误的，但您提到的 Ruby 代码不会产生它。这里出了点问题，要么使用不同的 Ruby 代码（可能来自 before_filter），要么传递不同的参数（如 params[:artist_id] = "?"）。看起来您使用嵌套资源，例如`Artist has_many :albums`. 也许@artist 变量在前面的操作中没有正确初始化，所以 params[:artist_id] 没有正确的值？

# html - DIV 中的 IMG 仅在 chrome 中在底部创建额外空间

> ID：12517076
> 
> 赞同：1
> 
> 时间：2012-09-20T16:40:04.700
> 
> 标签：html, css

我有以下代码

HTML：

```
<div class="dropShadow">
    <img src="images/headerimage" />
</div> 
```

CSS：

```
div.dropShadow {
    background-image: url('dropshadow.png');
    background-position: bottom center;
    background-repeat: no-repeat;
    padding-bottom: 19px; /* the height of the shadow */
} 
```

但是，在 Firefox 上一切正常，而在 Chrome 和 IE 上，图像底部和定位的背景图像顶部之间有一个小的空白区域。我删除了它周围的所有空白，但我不确定要尝试什么规则。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:43:11.383

在您的 IMG 中写入**vertical-align:top**或**display:block 。**像这样写：

```
img{
 vertical-align:top;
} 
```

# entity-framework - 实体框架：以搜索词为条件结合精确和通配符搜索

> ID：12517077
> 
> 赞同：2
> 
> 时间：2012-09-20T16:40:05.093
> 
> 标签：entity-framework, linq-to-entities, match, wildcard

我正在创建一个查询来使用 EF 搜索数据库。TdsDb 是 EF 上下文。

```
string searchValue = "Widget";
TdsDb tdsDb = new TdsDb();
IQueryable<Counterparty> counterparties; 
```

我可以做完全匹配：

```
counterparties = tdsDb.Counterparties.Where(x => x.CounterpartyName == searchValue); 
```

或通配符匹配：

```
counterparties = tdsDb.Counterparties.Where(x => x.CounterpartyName.Contains(searchValue)); 
```

但我希望能够做到这两点，即（伪代码）

```
counterparties = tdsDb.Counterparties.Where(x => 
          if (searchValue.EndsWith("%")) 
                 {
                      if (searchValue.StartsWith("%"))
                          {x.CounterpartyName.Contains(searchValue)}
                      else 
                          {x.CounterpartyName.StartsWith(searchValue)}
                 }   
          else
                 {x => x.CounterpartyName == searchValue}
      ); 
```

现在很明显，我不能像这样在 where 子句中添加 if 语句。但我也无法复制查询：这里显示的查询非常愚蠢。生产查询要长得多，因此只有一个子句不同的同一长查询的多个版本似乎非常不健康且不可维护。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:35:14.057

您应该能够使用三元运算符：

```
bool startsWithWildCard = searchValue.StartsWith("%");
bool endsWithWildCard = searchValue.EndsWith("%");

counterparties = tdsDb.Counterparties.Where(x => 
      endsWithWildCard
          ? (startsWithWildCard
              ?  x.CounterpartyName.Contains(searchValue)
              : (x.CounterpartyName.StartsWith(searchValue)))
          : (x.CounterpartyName == searchValue)); 
```

如果按开头或结尾的 a 查询是否按预期工作，您是否测试过`searchValue`？`%`可能会将其转义为要查询的字符，`%`因为无论如何都会在生成的 SQL 搜索词之前添加/附加通配符。在这种情况下，您需要在将其传递到or之前将其从中切断。`StartsWith``Contains``%``%``searchValue``StartsWith``Contains`

# c# - OpenIdProvider.GetRequest() 返回 null

> ID：12517083
> 
> 赞同：2
> 
> 时间：2012-09-20T16:41:05.990
> 
> 标签：c#, asp.net, .net, openid, dotnetopenauth

作为[这个](https://stackoverflow.com/q/12411275/1324019)问题的延续，我遇到了 dotnetopenauth 的问题。

我导航到我的依赖方代码并创建请求，但是当我的提供者收到请求`OpenIdProvider.GetRequest()`时返回 null。我浏览了代码，据我所知，这是因为我的依赖方没有交付 openid 有效负载（request.form）；但我不知道为什么会这样。

代码：

依赖方：

```
public ActionResult Authenticate(string RuserName = "")
{
UriBuilder returnToBuilder = new UriBuilder(Request.Url);
returnToBuilder.Path = "/OpenId/Authenticate";
returnToBuilder.Query = null;
returnToBuilder.Fragment = null;

Uri returnTo = returnToBuilder.Uri;
returnToBuilder.Path = "/";
Realm realm = returnToBuilder.Uri;

var response = openid.GetResponse();

if (response == null) {
    if (Request.QueryString["ReturnUrl"] != null && User.Identity.IsAuthenticated) {

    } else {

    string strIdentifier = "http://localhost:3314/User/Identity/" + RuserName;
    var request = openid.CreateRequest(
        strIdentifier,
        realm,
        returnTo);

    var fetchRequest = new FetchRequest();
    request.AddExtension(fetchRequest);
    request.RedirectToProvider();
    }
} else {
    switch (response.Status) {
        case AuthenticationStatus.Canceled:
            break;
        case AuthenticationStatus.Failed:
            break;
        case AuthenticationStatus.Authenticated:
            //log the user in
            break;
    }
}

return new EmptyResult(); 
```

}

提供者：

```
public ActionResult Index()
{
    IRequest request = OpenIdProvider.GetRequest();

    if (request != null) {
        if (request.IsResponseReady) {
            return OpenIdProvider.PrepareResponse(request).AsActionResult();
        }

        ProviderEndpoint.PendingRequest = (IHostProcessedRequest)request;
        return this.ProcessAuthRequest();
    } else {
        //user stumbled on openid endpoint - 404 maybe?
        return new EmptyResult();
    }
 }

public ActionResult ProcessAuthRequest()
    {
        if (ProviderEndpoint.PendingRequest == null) {
            //there is no pending request
            return new EmptyResult();
        }

        ActionResult response;
        if (this.AutoRespondIfPossible(out response)) {
            return response;
        }

        if (ProviderEndpoint.PendingRequest.Immediate) {
            return this.SendAssertion();
        }

        return new EmptyResult();
    } 
```

**日志：**

RP：1）[http://pastebin.com/Pnih3ND7](http://pastebin.com/Pnih3ND7) 2）[http://pastebin.com/eBzGun9y](http://pastebin.com/eBzGun9y)

提供者：http: [//pastebin.com/YAUTBzHk](http://pastebin.com/YAUTBzHk)

有趣的是，RP 日志说 localhost 是不受信任的......但是我将它添加到我的 web.config 中的白名单主机中，并且它昨天“工作”......

编辑：好的，这很奇怪。昨天我正在逐步浏览 DNOA 源，试图找出问题所在。我启用了 log4net，它创建了日志文件并将其留空。今天我再次设置了 log4net——它记录得很好，但是我遇到了一个没有意义的错误（见上文）。我也无法进入 DNOA 来源。我删除并重新添加了对 dotnetopenauth.dll 的引用，然后我与白名单主机的“原始错误”消失了，我能够进入源代码，但日志文件又是空白的。而且我仍然有 request.form 没有被填充的问题......

**EDIT2**：我的两个控制器都被命名为“OpenIdController”（在 RP 和 EP 上）。我的 RP 在 localhost:1903 上运行，我的端点在 localhost:3314 上运行。

* * *

**EDIT3**：在我进行更改后，您建议事情开始工作。RP 可以很好地执行发现，但是当它实际发出请求时我遇到了问题。

该行`IRequest i_request = OpenIdProvider.GetRequest();`工作正常，但是当我尝试转换它时：`IAuthenticationRequest iR = (IAuthenticationRequest)i_request;`它给了我以下错误：

```
 System.InvalidCastException was unhandled by user code
 Message=Unable to cast object of type     'DotNetOpenAuth.OpenId.Provider.AutoResponsiveRequest' to type 'DotNetOpenAuth.OpenId.Provider.IAuthenticationRequest'.
 Source=Portal
 StackTrace:
   at Portal.Controllers.OpenIdController.Index() in Controllers\OpendIdController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() 
```

这段代码在我发现相关的两个样本之间有点大杂烩。我想设置一个 SSO 类型环境，所以我使用的大部分代码来自`\DotNetOpenAuth-4.1.0.12182\Samples\OpenIdWebRingSsoProvider\Code\Util.cs`（ProcessAuthenticationChallenge 函数）。但是，由于该函数需要一个`IAuthenticationRequest`但 OpenIdProvider.GetRequest 返回一个，`AutoResponsiveRequest`我想我可以强制转换它以使用`IAuthenticationRequest`该类的属性和方法。显然我错了。

在这一点上，我不太确定如何处理事情。我应该使用 OpenIdProviderMVC 示例中的示例代码吗？关键是登录就像单点登录一样工作，并且从未真正提示用户输入 OpenId。我也只会有一个端点（尽管我会有多个 RP）。

这是最新 RP 日志的链接：http: [//pastebin.com/enpwYqq3](http://pastebin.com/enpwYqq3)

* * *

**EDIT4**：我按照你的建议做了，并取得了一些进展。据我所知，我的 EP 收到响应并对其进行处理，但是当它重定向回领域 url 时，它会出错。

`012-10-10 13:55:01,171 (GMT-4) [25] ERROR DotNetOpenAuth.Messaging - Protocol error: An HTTP request to the realm URL (http://localhost:1903/) resulted in a redirect, which is not allowed during relying party discovery.`

`Realm`与 相对的功能究竟是什么`ReturnTo`？使用示例代码，Realm 最终成为`http://localhost:1903/`并且 ReturnTo 最终成为`http://localhost:1903/OpenId/Authenticate`看起来很好。为什么 EP 需要向领域提出请求？我原以为它应该只是在完成处理后将断言发送到 returnTo 。如果我手动将 Realm 设置为`http://localhost:1903/OpenId/Authenticate`然后`relyingParty.GetResponse()`返回 null。

我确实将我的应用程序设置为在有人访问基本 url ( `http://localhost:1903`) 时重定向 - 我应该在那里运行什么代码来拦截 DNOA EP 请求？

**新日志：**

RP： http: [//pastebin.com/L9K5Yft4](http://pastebin.com/L9K5Yft4)

EP： http: [//pastebin.com/kBPWiUxp](http://pastebin.com/kBPWiUxp)

我还更新了问题开头的代码，以更好地反映我所做的更改。

* * *

**EDIT5**：领域是否必须是应用程序的实际基本 URL？也就是说，( `http://localhost:1903`)? 鉴于现有的架构，很难删除重定向 - 我尝试将领域设置为基本 OpenId 控制器 ( `http://localhost:1903/OpenId`)，并且手动测试确实生成了 XRDS 文档。但是，应用程序似乎冻结了，EP 日志显示以下错误：

`2012-10-10 15:17:46,000 (GMT-4) [24] ERROR DotNetOpenAuth.OpenId - Attribute Exchange extension did not provide any aliases in the if_available or required lists.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:22:02.400

您的 RP 有非常可疑的奇怪代码。虽然 return_to 和 realm 都具有相同的 Uri 权限是正常的（实际上是必需的），但您作为第一个参数传入的用户提供的标识符`OpenIdRelyingParty.CreateRequest`与您的依赖具有相同的主机和端口这一事实派对*很*奇怪。通常，您传入的标识符是*提供者*托管的 URL 。现在，我不知道端口 3314 是您的 RP 还是您的 OP，但无论哪种方式，您的 RP 代码中的这些端口号之一看起来都是错误的。

其次，用户标识符的发现失败并出现空引用异常（根据您的 RP 日志的 v2）。这将阻止登录请求到达您的提供商。您的 Provider*被*调用但 OpenID 请求不存在的事实表明这`http://localhost:3314/OpenId/`实际上是您的 OP Endpoint（读取 OpenID 请求的 OpenID Provider 的操作方法的 URL）。那是不合适的。同样，您应该传递给`OpenIdRelyingParty.CreateRequest`方法的第一个参数的 URL 应该是用户的 OpenID URL——而不是 OP Endpoint。查看 OpenIdProviderMvc 示例的用户控制器，了解如何设置用户 OpenID URL 的示例。然后使用*该*URL 作为第一个参数`CreateRequest`，我认为你会很好。

第三，一旦您的 Provider 收到一个非空请求，您不能总是将其转换为`IAuthenticationRequest`. 并非所有 OpenID 消息都是身份验证消息。有些是底层 OpenID 协议的一部分。如果您查看 OpenIdProviderMvc 示例的 OpenID 控制器，您应该注意到有条件转换来处理不同的消息类型。您的控制器中应该有类似的消息处理。

由于您要使用 SSO 场景，因此控制器的显着差异可能是：

1.  您的控制器从不响应重定向到登录页面，而是“神奇地”确定用户是谁。
2.  您的控制器应根据`IAuthenticationRequest.Realm`您的 SSO Web 环中包含的 RP 白名单检查该属性，并且仅在 Realm 符合条件时提供肯定的断言。这可以减轻攻击，一旦您的服务器设置好，任何人都可以设置一个站点，该站点悄悄地使用您的 OpenID 提供程序来识别随机 Internet 网站的用户（如果他们属于您的组织），这将侵犯他们的隐私。

第四，OP 向您的 RP 的“领域”URL 发送的 HTTP 请求是 OpenID 称为“RP 发现”的过程的一部分。它可以减轻“开放重定向器”攻击。您应该将您的 RP 的基本 URL 调整为*不*重定向，而是在 RP 发现请求进来时返回一个 XRDS 文档。对于普通浏览器情况，您仍然可以重定向。您可以在 OpenIdRelyingPartyMvc 示例的 HomeController 中看到如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:20:11.207

从依赖方日志中可以看到：

```
ERROR DotNetOpenAuth.Messaging - Protocol error: The URL 'http://localhost:3314/OpenId/' is rated unsafe and cannot be requested this way. 
```

您的 Provider 托管在 localhost 上，在生产服务器上它不是安全的 OpenID。所以默认情况下 localhost 是禁用的。您可以通过将 localhost 添加到您的白名单中来允许它进行本地测试，方法是将其添加到您的 web.config 文件（`configSections`顶部带有相应的）：

```
<dotNetOpenAuth>
    <messaging>
        <untrustedWebRequest>
            <whitelistHosts>
                <add name="localhost" />
            </whitelistHosts>
        </untrustedWebRequest>
    </messaging>
</dotNetOpenAuth> 
```

# php - 基于日期变量通过 PHP 检索 MySQL 事件

> ID：12517087
> 
> 赞同：1
> 
> 时间：2012-09-20T16:41:12.443
> 
> 标签：php, mysql, variables, date-range

大家好：我正在尝试在我拥有的 PHP 文件中从 MySQL 获取数据。用户传入一个日期（当前由“$selectedDate”表示），我希望查询提取与该日期匹配的所有事件。

问题是 MySQL 日期是 unix 格式，这意味着它有小时、秒等。传入的日期只是日期，所以不会完全匹配。

所以我要做的是获取我的日期，添加一个负 1 天的变量和另一个正 1 天的变量，然后根据该范围提取事件。

问题是它不起作用，我不知道为什么！经过大约 2 天的故障排除和搜索，我依靠你我的 stackoverflow 朋友！

有任何想法吗？

```
 $selectedDate = '9-20-2012';
  $dateComponents = preg_split('~[+*/-]~', $selectedDate);
  $date1 = mktime(0, 0, 0, ( (int)$dateComponents[0] ), (int)$dateComponents[1]-1, (int)$dateComponents[2]);
  $date2 = mktime(0, 0, 0, ( (int)$dateComponents[0] ), (int)$dateComponents[1]+1, (int)$dateComponents[2]);

  $query = "SELECT id,title,start, DATE_FORMAT(start, '%Y-%m-%d %H:%i' ) AS startDate, end, url, className FROM $tableName WHERE start BETWEEN '$date1' AND '$date2' ORDER BY start";

  $result = mysql_query($query) or die(mysql_error());
  $array = array();

  while($row = mysql_fetch_assoc($result)){
        echo($row);
       $array[] = $row; 

  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:53:11.550

您可以将分钟和秒添加到您的日期，然后再将它们传递给 SQL。

```
 $selectedDate = '9-20-2012';
  $dateComponents = preg_split('~[+*/-]~', $selectedDate);
  $date1 = mktime(0, 0, 0, ( (int)$dateComponents[0] ), (int)$dateComponents[1]-1, (int)$dateComponents[2]);
  $date2 = mktime(0, 0, 0, ( (int)$dateComponents[0] ), (int)$dateComponents[1]+1, (int)$dateComponents[2]);

  $date1 = date('Y-m-d h:i',$date1);
  $date2 = date('Y-m-d h:i',$date2);

  $query = "SELECT id,title,start, DATE_FORMAT(start, '%Y-%m-%d %H:%i' ) AS startDate, end, url, className FROM $tableName WHERE start BETWEEN '$date1' AND '$date2' ORDER BY start"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:51:25.720

您可以尝试以下方式

```
$start = strtotime("-1 day", strtotime('09-12-2012'));
$end = strtotime("+1 day", strtotime('09-12-2012'));

$result = my_sql_query("
          Select * FROM tablename 
          WHERE DATE(FROM_UNIXTIME(date_field)) 
          BETWEEN FROM_UNIXTIME($start) AND FROM_UNIXTIME($end)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:52:29.883

```
SELECT id, title, start, DATE_FORMAT(start, '%Y-%m-%d %H:%i' ) AS startDate, end, url, className 
FROM $tableName 
WHERE FROM_UNIXTIME(start) BETWEEN '2012-09-01' - interval 1 day AND '2012-09-01' + interval 1 day 
ORDER BY start 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:57:40.520

通过执行以下操作，您可能最好不要使用 between：

```
$selectedDate = '9-20-2012';
$dateComponents = preg_split('~[+*/-]~', $selectedDate);
$date = date('Y-m-d', mktime(0, 0, 0, $dateComponents[0], $dateComponents[1], $dateComponents[2]));

$query = "SELECT id, title, start, DATE_FORMAT(start, '%Y-%m-%d %H:%i') AS startDate, end, url, className FROM $tableName WHERE DATE(start) = DATE($date) ORDER BY start"; 
```

这样，您将只比较日期部分并简单地忽略时间，如果您不需要实际获得真正的间隔而只需要提供日期的条目，IMO 这是一个相当不错的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T17:12:12.167

我认为您可以在 mysql 查询之前将您的日期转换为 unixtime。它可以帮助您以任何格式获取日期。

```
$date = '9-20-2012';
$unixtime = strtotime(str_replace ('-', '/', $date). ' 00:00'); 
```

# c# - 修改现有程序以更好地处理异常

> ID：12517096
> 
> 赞同：4
> 
> 时间：2012-09-20T16:41:43.097
> 
> 标签：c#, exception, try-catch

我正在开发一个现有的 C# 程序，该程序在程序和运行该程序的计算机之外查询和更改各种资源。该程序适用于大多数计算机，但偶尔会在随机计算机上随机失败。发生这种情况时，除了用户告诉我们有关屏幕上抛出的异常（他们可能已经清除也可能尚未清除）之外，我们没有其他反馈。即使他们为我们将其留在屏幕上，它也几乎没有为我们提供有用的信息。从那以后，我修改了程序以记录特定事件并将信息收集到一个文本文件中，我可以用它来估计程序停止的位置。这至少是一个开始，但从阅读 stackoverflow 上的许多线程开始。

目前，所有待办事项代码周围只有一个大的 try 块，每个代码块的末尾只有一个 catch 块。

```
private void method_name()
{
    try
    {
       //many lines of to do code calling many other methods
    }
    catch (exception ex)
    {
        MessageBox.Show("An Error has occurred in method_name() :" + ex.Message);
    } 
```

我的第一个想法是在较大的 try 块中嵌套更具体的 try/catch 块，但我一直遇到变量在不同上下文中变得无法访问的问题。例如

```
try
{
   LdapConnection ldapConn = new LdapConnection();
   ldapConn.Connect(details of connection);
   ldapConn.Bind(details of bind statement);
   LdapSearchQueue queue = ldapConn.Search(search criteria and such);
   LdapMessage message;
}
catch (somesortofexception ex)
{
   //do something sensible about it
}

while ((message = queue.getResponse()) != null)
{
   //do things with message
}
ldapConn.Disconnect(); 
```

问题是消息和队列在 try 块之外无法访问。这只是我正在尝试使用的“//many lines of to do code calls many other methods”的一个例子。

所以这是我的问题：

在上面的示例中尝试使 try 块更大以包含 while 循环和 ldap 断开连接，或者只是离开大的 try 循环，列出在此期间发生的事情并在最后创建许多 catch 块会更好吗捕捉特定的异常？根据我在本网站上阅读的内容，我觉得在特定代码周围放置较小的尝试块是可行的方法。

我是否应该像我一直在尝试实现的那样使用较小的 try 块，可以只使用一个 catch 块来捕获该小段代码中引发的任何异常并将其记录到我的日志文件中，或者我应该尝试并捕获具体例外？除了将它们记录到文件中之外，我真的没有什么不同的方法可以处理这些异常。

我需要抛出异常吗？除了用简单的英语消息说出现问题并联系 IT 之外，我真的不希望有任何东西冒泡给用户。目前没有一个 catch 块抛出任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:02:21.337

只要您期望该异常并且可以在本地处理它，那么吞下特定异常的本地 catch 块就可以了。在这种情况下，您可以仅根据异常包含的内容向用户提供信息，或者如果您想在日志记录和/或消息中包含变量定义，则可以将变量定义移动到 try 块上方。

对于您不期望的异常，您应该让它们向上冒泡到调用堆栈的顶部，在那里它们可以由全局处理程序记录，然后再优雅地退出程序。您不希望通过吞下这些异常来潜在地将尸体钉在直立位置。

假设这是一个 WinForms 应用程序，全局处理程序的设置如下所示：

```
public static void Main(string[] args)
{
    // Switch-off the Windows Forms default handler for unhandled exceptions.
    // NB From .NET 4 upwards, this won't work if the process state is corrupted.
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

    // Setup event handler to intercept an unhandled exception on a UI thread.
    // NB The exception will still terminate the application. 
    // But you can show a MessageBox and/or log the exception. 
    Application.ThreadException += 
        new ThreadExceptionEventHandler(App_UiThreadException);

    // Setup event handler to intercept unhandled exception on a non-UI thread.
    AppDomain.CurrentDomain.UnhandledException += new 
        UnhandledExceptionEventHandler(App_NonUiThreadException);

    // Run the application (open main form etc).    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:05:11.110

关于分解异常，我总是将连接代码与查询代码分开。

所以这会变成：

```
LdapConnection ldapConn = new LdapConnection();
try
{
   ldapConn.Connect(details of connection);
   ldapConn.Bind(details of bind statement);
}
catch (somesortofexception ex)
{
   //Log, send error message..
   ldapConn = null;
}

if (ldapConn != null)
{
    try
    {
         //Do what you need with your connection
    }
    catch (Exception ex)
    {
         //Log, Error....
    }
    finally
    {
        //Disconnect your ldap here
    }
} 
```

理想情况下，我也会将所有连接代码和搜索代码放在单独的方法中，这样你就会有更好的堆栈跟踪。

关于错误消息，我也会使用一些通用消息并将异常细节记录到某种文件（[http://logging.apache.org/log4net/](http://logging.apache.org/log4net/)）中，这对于拥有格式良好的日志文件非常好。

# git - 我可以为本地分支定义多个上游分支吗？

> ID：12517097
> 
> 赞同：9
> 
> 时间：2012-09-20T16:41:47.123
> 
> 标签：git, version-control, branch, git-push, git-pull

我希望在 git 中有一个分支，它有 2 个上游分支，这样它就可以从两个分支中拉出并推送到其中一个......

这是场景：

```
MY_BRANCH --> ORIGINAL_BRANCH 
MY_BRANCH --> MY_BRANCH 
```

所以，我的新分支 ，从和（在）`MY_BRANCH`中拉出，并推到（在）。`ORIGINAL_BRANCH``MY_BRANCH``origin``MY_BRANCH``origin`

这在git中可能吗？
我已经添加`ORIGINAL_BRANCH`为上游，所以当我去的时候`git pull`它会从中拉出来。当我这样做时，`git push`它会推送到`MY_BRANCH`，这很好。
但是我如何让它也跟随它`MY_BRANCH`，并从中拉出来呢？
（原因是其他开发人员可能会添加一些东西而不是`ORIGINAL_BRANCH`）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:22:28.570

正如“[如何使用 Git 跟踪一个给定分支的多个远程？](https://stackoverflow.com/questions/4282486/how-to-track-more-than-one-remote-with-a-given-branch-using-git) ”中所述，您不能为给定的本地分支注册多个上游分支。

因此，您需要定义一个将调用`git pull`两次的别名（对于第二次调用，`MY_BRANCH`来自原点）

# c# - 试图获取加密字符串的长度

> ID：12517098
> 
> 赞同：2
> 
> 时间：2012-09-20T16:41:57.843
> 
> 标签：c#, encryption, base64, des

我正在使用以下函数来加密字符串：

```
public string Encrypt(string stringToEncrypt, string SEncryptionKey)
{
try {
    key = System.Text.Encoding.UTF8.GetBytes(Strings.Left(SEncryptionKey, 8));
    DESCryptoServiceProvider des = new DESCryptoServiceProvider();
    byte[] inputByteArray = Encoding.UTF8.GetBytes(stringToEncrypt);
    MemoryStream ms = new MemoryStream();
    CryptoStream cs = new CryptoStream(ms, des.CreateEncryptor(key, IV), CryptoStreamMode.Write);
    cs.Write(inputByteArray, 0, inputByteArray.Length);
    cs.FlushFinalBlock();
    return Convert.ToBase64String(ms.ToArray());
} catch (Exception e) {
    return e.Message;
    }
} 
```

我想知道是否有某种数学算法可以让我提前确定 Base64 加密字符串长度的长度。那么如果我的字符串长度为 15 个字符，那么 Base64 加密字符串的长度是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:55:11.707

15 个字符的字符串至少有 15 个字节。如果你有很多非 ASCII 字符，它可能会变成 20 甚至 30。

加密会将其四舍五入为~~密钥~~块大小的倍数，比如说 64 字节。

然后 Base64 将 8 位字节编码为 6 位令牌，因此您得到 (64 * 8) / 6 个令牌（字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:59:32.583

是的。你可以这样计算。

a) DES 加密使用块。我记得它是8个字节。因此，如果您加密任何内容，它将被四舍五入到块大小。

*   例如，您加密 1 个字节，它将变成 8 个字节。
*   你加密 8 个字节，它会变成 8 个字节
*   您加密 9 个字节，它将变为 16 个字节（适合原始数据的最小块数）

所以，formale **encryptedLength = ceiling (originalLength /8) * 8**

b) Base64 也有一些与块大小非常相似的东西。并且它的块大小是4。每个原来的3个字节将被转换为4个字节块

因此，对于 Base64 **编码长度 = 天花板 (originalLength/3)*4**

所以，最后的公式是

**编码加密长度 = 天花板（天花板（原始长度/8）*8/3）*4**

originalLength 这里是您计划加密的文本中的字节数（！！！不是字符！！！）。

# ruby-on-rails-3 - 通过创建符合 Hodel 3000 的日志在 Heroku 上使用 oink

> ID：12517101
> 
> 赞同：3
> 
> 时间：2012-09-20T16:42:08.680
> 
> 标签：ruby-on-rails-3, memory-leaks, heroku, paper-trail-gem, oink

我有内存泄漏并试图追踪它，因此我试图在 Heroku 服务器上使用 oink。由于 Heroku 不提供日志存档，我通过 Papertrail 插件将它们导出到 Amazon S3。

我已经能够成功地做到这一点，但是，为了使用 oink，我的日志文件必须采用一种称为“Hodel 3000 兼容记录器”的特殊格式。我已经设法在开发中这样做了，但是我不知道如何在生产中创建这样的日志文件（*heroku）。任何帮助，将不胜感激。

提前致谢，

胡安·拉格朗日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-07T17:29:33.333

hodel_3000_compliant_logger gem 应该在这里完成工作[；](https://github.com/topfunky/hodel_3000_compliant_logger)它就是为此目的而设计的。

1.  添加`gem 'hodel_3000_compliant_logger'`到您的`Gemfile`, 然后`bundle install`
2.  添加`config.logger = Hodel3000CompliantLogger.new(config.paths['log'].first)`到您的`application.rb`（如果您想用 Hodel3000 替换默认记录器）。

# google-chrome - 如何获得完全解锁的 Chrome 版本？

> ID：12517102
> 
> 赞同：0
> 
> 时间：2012-09-20T16:42:10.533
> 
> 标签：google-chrome, windows-7

我在公司 PC 上运行，最近获得了完全的管理员访问权限，但是当我安装 Chrome 时，它​​的一些功能仍然被锁定。例如，我无法更改我的启动页面或登录 Google Chrome。它显示一条消息，例如“某些设置可能由您的管理员管理”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:05:28.237

如果您的计算机处于工作状态，则可能有一个单独的管理员帐户具有您没有的某些权限。要找到这一点，请转到开始菜单>单击您的帐户图片>单击管理用户帐户>选择您的帐户并查看权限。

希望这有帮助！-火星

# javascript - 谁能告诉我如何在 Unix 上运行 Node.js？

> ID：12517103
> 
> 赞同：1
> 
> 时间：2012-09-20T16:42:28.290
> 
> 标签：javascript, jquery, node.js, unix

我将版本 v0.8.9 下载到了一个 unix 帐户，但我不知道如何运行和测试它...没有配置文件，我无法在网上找到说明...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:58:19.630

出于某种原因，它们使源构建依赖项和指令难以找到。

请参阅此页面：[https ://github.com/joyent/node/wiki/Installation](https://github.com/joyent/node/wiki/Installation)

先决条件：

*   GNU make 3.81 或更新版本。预装在大多数系统上。有时称为 gmake。

*   蟒蛇 2.6 或 2.7。随 Node 分发的构建工具在 python 上运行。

*   libssl-dev（仅限 Node v0.6.x。）通常可以使用您最喜欢的包管理器安装在 *NIX 系统上。预装在 OS X 上。

*   libexecinfo（仅限 FreeBSD 和 OpenBSD。）V8 需要。pkg_add -r libexecinfo 安装它。

安装：

*   tar -zxf node-v0.6.18.tar.gz *（从 nodejs.org 下载）*
*   cd节点-v0.6.18
*   。/配置
*   制作
*   须藤使安装

然后你应该可以只`node`输入一个 REPL 来做一些基本的测试。否则，请在网上搜索书籍和教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:41:41.587

原来我错误地下载了 linux 二进制文件并将其解压缩。您必须下载源代码 (tar.gz) 文件。二进制文件没有'./configure'来运行它。

# ruby-on-rails - Rails 无法在 openshift 上连接到 redis

> ID：12517107
> 
> 赞同：1
> 
> 时间：2012-09-20T16:42:44.737
> 
> 标签：ruby-on-rails, redis, openshift, sidekiq

[我有从这个例子](https://github.com/razorinc/redis-openshift-example)安装redis的openshift应用程序我有Sidekiq的 这些设置（initializers/sidekiq.rb）：

```
Sidekiq.configure_server do |config|
  config.redis = { path: "#{ENV['OPENSHIFT_GEAR_DIR']}tmp/redis.sock" }
end

Sidekiq.configure_client do |config|
  config.redis = { path: "#{ENV['OPENSHIFT_GEAR_DIR']}tmp/redis.sock" }
end 
```

但是我有这个错误如果我可以使用sidekiq：

```
Redis::CannotConnectError (Error connecting to Redis on localhost:6379 (ECONNREFUSED)): 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:49:05.310

错误消息说 Sidekiq 正在尝试连接到 localhost 上的端口 6379。您使用的 OpenShift 示例在配置文件中将端口设置为 0，以便服务器不会侦听任何 TCP 套接字。

我认为这回答了你的问题：[https ://github.com/mperham/sidekiq/issues/228#issuecomment-7618003](https://github.com/mperham/sidekiq/issues/228#issuecomment-7618003)

# git - 带有多台机器的 git 单一开发人员 - 变基和提交显示两次

> ID：12517108
> 
> 赞同：6
> 
> 时间：2012-09-20T16:42:46.640
> 
> 标签：git, git-rebase

一些背景：

1.  我是在一个站点上工作的单一开发人员。
2.  我正在使用 git 进行版本控制。
3.  我有多台计算机供我工作：办公室、家里和笔记本电脑

目前，我的服务器上有一个中央的裸存储库。每台计算机都从该存储库克隆并将更改推送到该存储库。我目前有分支 Master 和分支 dev。所有工作都在 dev 分支中完成。Master 始终是最新的、稳定的生产代码。可以在任何时候将更改与 dev 中正在进行的更改一起应用于 Master。

我的日常工作流程包括：

```
git checkout dev
//pull in changes from remote
git pull
//make and commit changes as need throughout the day
git add -u
git commit
//these steps only happens when I know master has changed
git checkout master
git pull
git checkout dev
git rebase master //to get changes to master into dev branch
//push changes to central remote at end of day
git push 
```

我相信这对于单个开发人员来说应该是一个相当标准的工作流程。

现在把所有这些都排除在外，就我的问题而言。我最近遇到了一种情况，我不确定如何正确处理以及将来如何防止它。目前，我的 dev 分支是一个长期运行的 dev 分支，它是对网站一部分的主要重写。因此，它已经开发了几个月。虽然我一直在做这项工作，但我也一直在对 Master 进行一些小的更改/错误修复。当我完成对 Master 的一项更改时，我将 dev 重新定位到 Master 以获取更改，然后将它们推送到中央存储库。这一直运作良好。

然而，我在几天前对Master进行了更改——大约一个月以来的第一次这样的更改。当我去 rebase 时，所有的地狱似乎都崩溃了。我在 Master 中不存在的文件上遇到合并冲突，并且我在同一个文件中一遍又一遍地遇到相同的冲突。在花了一天的大部分时间试图解决所有冲突之后，我终于放弃了。

今天早上，我再次尝试，但在开始之前，我检查了项目提交历史，发现有些奇怪。我发现大约 15 个提交被重复了。它显示了从 07/12/2012 到 08/24/2012 的所有提交。然后，我再次列出了相同的提交，都具有不同的 SHA 哈希。我没有注意到它，直到我看到提交的日期都按照您所期望的时间顺序列出，但随后它突然又跳回了过去。

为了解决这个问题，我做了另一个 rebase，但跳过了重复的提交。当我这样做时，一切都按照我的预期进行，完全没有冲突。

所以，我对你们的问题是，这些提交是如何进行两次的，我怎样才能防止这种噩梦在未来再次发生？正如问题的标题所暗示的那样，我认为问题与我使用变基和推送变基分支有关。但我真的只是在那里猜测。我只需要一些帮助来弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:52:48.077

我认为您的模型本质上与拥有三个开发人员相同，因为您拥有三台开发机器。因此，您的开发分支在这个意义上是共享的。我也读过 SO 说变基为共享分支会导致问题，合并比变基共享分支更好。读完之后，我开始只对私有分支使用 rebase，效果很好。我建议创建一个测试存储库并尝试这两种方法来查看它们的比较。

如果我能找到其他 SO 问题，我将在此处添加一个链接。

编辑：

这是[在 Git 中重新定位远程分支](https://stackoverflow.com/questions/6199889/rebasing-remote-branches-in-git)

当然，对此有很多不同的看法。:)

# mysql - 通过消除空值来查找元组的总和

> ID：12517117
> 
> 赞同：0
> 
> 时间：2012-09-20T16:43:26.927
> 
> 标签：mysql, select

说，我有一个名为 x 的表，其列名为 yyy，值为 1,2,3,NULL

为了消除空值，我可以编写一个查询 SELECT yyy FROM x WHERE yyy IS NOT NULL。

现在，我如何找到上述结果的总和。一般来说，要单独为 yyy 找到总和，我可以编写一个查询 SELECT SUM(yyy) FROM x。

要做到以上，我知道我应该写一个子查询，我试过这个但没有用

SELECT SUM(SELECT yyy FROM x WHERE yyy IS NOT NULL) FROM x 但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:45:02.810

```
SELECT SUM(COALESCE(yyy,0)) FROM x 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:49:25.607

写吧：

```
SELECT SUM(yyy) FROM x 
```

引用 mysql 文档：[除非另有说明，否则组函数会忽略 NULL 值。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# c++ - 引号中定义的参数是什么

> ID：12517121
> 
> 赞同：2
> 
> 时间：2012-09-20T16:43:42.330
> 
> 标签：c++, string, cstring

在一些函数调用中，我看到了这样的东西。

```
function(variable1, "someValue"); 
```

我有一些基于此的问题

1) c++ 如何处理第二个参数？

2）如果某个函数需要一个cstring，那么为什么我们在执行以下操作时会出错

```
functionTakingCString(stringVariable.c_str() + "someValue"); 
```

有什么方法可以代替声明一个 const char 变量吗？如果我在哪里错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:45:40.883

它们被称为*字符串字面量*，如果你想接受一个字符串字面量的参数，你通常会传递 a`const std::string&`或 a `const char*`，这取决于你的 API 需要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:49:19.913

> 2）如果某个函数需要一个cstring，那么为什么我们在执行以下操作时会出错

这是因为 '+' 运算符没有为`char *`类型重载。您可以将其连接到运算符已重载`stringVariable`的类型`string`以连接两个字符串，然后将 传递给接受or的函数。`+``c_str()``char *``const char *`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:45:35.977

1.  常量字符*

2.  二元运算符`+`不能应用于`const char*`操作数类型。如果一个是 std::string，那么由于运算符重载，它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:49:50.910

第二个参数是一个 const char*。在某些情况下，如果您有一个接受给定类型的所需类型的特殊[转换构造函数](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr384.htm)，您可能能够从一种类型转换为另一种类型。在某些情况下，编译器可以为您执行此操作。

在此示例中，字符串有一个接受 const char* 的构造函数，因此编译器可以在幕后为您将 const char* 转换为字符串。如果您想停止这种行为，请查看显式关键字。

char* 类型实际上不是一个类，因此它没有适用于字符串的 + 运算符。然而，

```
(stringVariable + "someValue").c_str() 
```

将起作用，因为 stringVariable 是一个字符串，并且它的加号运算符可以将 char* 强制转换为字符串。

# asp.net-mvc-3 - Windows 身份验证在 IIS 7.5 中不起作用

> ID：12517127
> 
> 赞同：28
> 
> 时间：2012-09-20T16:43:59.013
> 
> 标签：asp.net-mvc-3, c#-4.0, iis, iis-7.5

我在获取 Windows 身份验证以在 IIS 7.5 上工作时遇到问题。该应用程序是一个内置在 asp.net MVC 3 中的内部站点。应用程序池正在使用特定的域用户，并且该站点正在使用 Windows 身份验证。每次我尝试启动站点时，IE 都会提示我登录。

如果我取消了足够多的网站，网站就会出现，看起来很乱，但我的名字与我的 Windows 登录相关联显示在顶部。因此，这告诉我该站点正在正确获取我的 Windows 凭据。

我添加了网络本地用户以对服务器上的 inetpub 文件夹具有读取权限，现在它不会提示使用 IE 8 登录。但是在 chrome 上我收到此错误“错误 338 (net::ERR_INVALID_AUTH_CREDENTIALS): 未知错误。 ”。

它位于我们的 Intranet 站点区域。我应该说明这一点，但我忘记了。该站点曾经在我们的旧开发服务器上工作，但是当我使用 IIS 7.5 升级到 Win 2008 R2 时，它停止工作。曾经在 2003 年使用 IIS 6.0。

我想知道是否有人知道我还能尝试什么。在这一点上，我几乎在旋转我的轮子。

我已经尝试了以下链接中的所有解决方案，但都没有解决问题

[http://forums.iis.net/t/1177154.aspx](http://forums.iis.net/t/1177154.aspx)

[http://forums.iis.net/t/1178188.aspx](http://forums.iis.net/t/1178188.aspx)

[使用集成 Windows 身份验证接收登录提示](https://stackoverflow.com/questions/5402381/receiving-login-prompt-using-integrated-windows-authentication)

[http://warnajith.blogspot.com/2011/06/iis-75-401-unauthorized-access-error.html](http://warnajith.blogspot.com/2011/06/iis-75-401-unauthorized-access-error.html)

[http://forums.asp.net/t/1639511.aspx/1](http://forums.asp.net/t/1639511.aspx/1)

[https://superuser.com/questions/128746/iis-asks-for-login-pass-when-accessed-using-hostname-but-not-when-localhost-is](https://superuser.com/questions/128746/iis-asks-for-login-pass-when-accessed-using-hostname-but-not-when-localhost-is)

[http://ask.metafilter.com/183636/Prompted-for-a-username-and-password-when-browsing-to-an-IIS-virtual-directory](http://ask.metafilter.com/183636/Prompted-for-a-username-and-password-when-browsing-to-an-IIS-virtual-directory)

[IIS 7 和 Windows 身份验证](https://stackoverflow.com/questions/6657061/iis-7-and-windows-authentication)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-17T15:29:59.437

相关说明：如果您尝试在 localhost 上复制您的站点，并且启用了 Windows 身份验证但仍然失败，则解决方案是一些注册表黑客以避免环回检查：

使用 regedit，导航到 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0 向 MSV1_0 添加一个新的多字符串值并将其命名为 BackConnectionHostNames 添加您希望使用的主机名。例如，“mysite.com”。重新启动 IIS。

[来源链接](http://falunbyday.blogspot.com/2013/02/windows-authentication-fails-on-local.html)

该值应该是 Windows 主机文件中的网站名称。

此外，为了能够使用 PHP 的 file_get_contents 访问未经身份验证的 /data 文件夹，我必须将其添加到 applicationHost.config 文件中，以防止出现 401 错误。

```
<location path="mysite.com/data">
        <system.webServer>
            <security>
                <authentication>
                     <anonymousAuthentication enabled="true" />
                    <windowsAuthentication enabled="false" />
                </authentication>
            </security>
        </system.webServer>
    </location> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-24T13:01:04.603

我找到了答案。这是一个未在 GUI 中映射的配置设置。我必须进入位于 <%SystemDrive%>/Windows/System32/inetsrv/config 的应用程序主机配置文件并更改以下设置。

默认设置

`<windowsAuthentication enabled="true"> <providers> <add value="Negotiate" /> </providers> </windowsAuthentication>`

改成这个，它起作用了。

`<windowsAuthentication enabled="true" useKernelMode="true" useAppPoolCredentials="true"> <providers> <add value="NTLM" /> </providers> </windowsAuthentication>`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T16:50:51.883

为了让 IE 传递集成凭据，该站点需要位于您的 Intranet 站点区域中。它不能在受信任的站点或任何其他站点中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T05:41:54.723

我遇到了类似的问题，通过将用户组 (MYDOMAIN\Users) 添加到具有读取权限的应用程序的物理文件夹来解决此问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-14T11:38:34.007

我有一个类似的问题，只能通过 Rory 解释的将 NTLM 移动到提供程序中的 kerberos 之上或通过修改 DNS 来解决。仅当网站的主机标头作为 DNS 中的 CNAME（别名）存在时，该问题才会出现在 IIS7 中。在 IIS6 中，集成 Windows 身份验证默认仅使用 NTLM。在 IIS7 中，默认情况下 IWS 在 NTLM 之前使用 kerberos。将 CNAME 记录替换为 A 记录即可解决问题。Kerberos 对 DNS 中的 A 记录没有问题，但它有别名问题。

因此，显然 DNS CNAME 与 Windows 2008 上的 kerberos 不兼容。

克里斯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T05:55:24.787

如果浏览器提示您输入凭据，我认为您的应用程序池凭据无权访问您页面上的某些资源。您是否尝试过创建一个空白的 html 页面并访问该页面？

```
<html>
<body>
hello world!
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-29T19:52:19.157

我有一个类似的问题。

我在默认网站下有一个应用程序，它已经启用了 Windows 身份验证但没有工作。我解决了在默认网站上禁用匿名身份验证以及在默认网站上启用 Windows 身份验证的问题。

# maven - Maven 找不到本地工件

> ID：12517129
> 
> 赞同：128
> 
> 时间：2012-09-20T16:44:17.010
> 
> 标签：maven, dependency-resolution

maven 偶尔会抱怨在本地构建和打包的特定依赖项在构建另一个将其作为依赖项的项目时无法在本地存储库中找到。我们收到如下错误：

> 未能在项目 X 上执行目标：无法解析项目 X 的​​依赖关系：在 [archiva 存储库] 中找不到 Y 已缓存在本地存储库中，直到内部的更新间隔已过或强制更新时才会重新尝试解决 - >

其中 X 是正在构建的项目，而 Y 是据称丢失的工件。如果您查看本地存储库，则工件就在那里。该工件从未安装在我们的档案存储库中，因此问题纯粹基于本地存储库。

我们尝试了 settings.xml 中的各种配置文件，当然还有“mvn -U”。既没有任何好处，也不应该这样做，因为这个工件永远不会比本地存储库更进一步。

似乎唯一有效的两件事是等待很长时间直到 maven 变聪明，或者完全删除本地存储库。推测等待选项与上述更新间隔有关。

我们在 maven 3.0.2 和 3.0.3 中遇到过这个问题。我们使用的是 Archiva 1.0.3（但这也不应该是一个因素）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2014-01-22T12:52:18.650

The local Maven repo tracks where artifacts originally came from using a file named "_maven.repositories" in the artifact directory. After removing it, the build worked. [This answer](https://stackoverflow.com/a/16870552/2652728) fixed the problem for me.

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2017-07-13T05:56:06.953

由于这里的选项对我不起作用，我正在分享我是如何解决它的：

我的项目有一个父项目（有自己的 pom.xml），它有许多子模块，其中一个（A）依赖于另一个子模块（B）。当我在 A 中尝试`mvn package`时，它不起作用，因为 B 无法解决。

`mvn install` **在父目录**中执行完成了这项工作。之后，我可以`mvn package`在 A 内部做，然后它才能找到 B。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-11-16T19:51:28.460

即使在离线模式下，如果依赖项有 _remote.repositories 标记，maven 也会检查远程存储库。如果您需要在离线模式下操作，您可能需要删除这些文件。

下面的简单 shell 命令会删除这些标记文件。如果您只对机器使用离线模式，这样做是安全的。**我不会在需要从网络上下载文件的机器上执行此操作。**

我在与 Web 断开连接的构建服务器上使用了此策略。我们必须将存储库转移到它，删除标记文件，然后在离线模式下运行。

在 Linux / Unix 上，您可以通过以下方式删除远程存储库标记文件：

```
cd ~/.m2
find . -name "_remote.repositories" -type f -delete 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-09-17T21:58:31.783

Maven 记得它什么时候没有找到。关键是“在内部的更新间隔过去或强制更新之前不会重新尝试解析->”

快速的解决方案是删除问题工件的本地“存储库”子目录 - 假设您已经解决了它的问题。:)

`mvn -U`将强制从远程存储库更新 - 再次假设您现在已经使用所述工件填充了远程。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-01-20T02:27:47.770

当这发生在我身上时，是因为我盲目地从模板中复制了我的 settings.xml 并且它仍然有空白`<localRepository/>`元素。这意味着在解析依赖项时没有使用本地存储库（尽管您安装的工件仍然放在默认位置）。当我用它替换它时，`<localRepository>${user.home}\.m2\repository</localRepository>`它开始工作了。

对于 *nix，`<localRepository>${user.home}/.m2/repository</localRepository>`我想应该是 。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-01-17T19:55:41.410

如果您`<repositories/>`在 pom.xml 中定义了显然您的本地存储库将被忽略。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-07-20T01:02:17.550

抓住所有。当此处提到的解决方案不起作用时（在我的情况下发生），只需从“.m2”文件夹/目录中删除所有内容，然后执行`mvn clean install`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-28T12:10:21.807

即使我遇到了这个问题并用两种方法解决了它：

1）在您的IDE中选择项目并清理所有项目，然后通过右键单击项目安装所有maven依赖项->转到maven并更新项目依赖项一次选择所有项目以安装相同的项目。完成后运行特定项目

2）否则，您可以做的是在 pom.xml 中检查您遇到错误的依赖项，并首先**“mvn clean install”**那些**依赖** **项目**以及您面临问题的当前项目的安装 maven 依赖项。通过这种方式，将构建本地项目的依赖项并创建 jars。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-10T07:37:32.933

当我的新项目依赖于 oracle jdbc jar（我已安装在本地存储库中并且适用于其他项目）时，我遇到了类似的问题。我尝试了 -U 选项，删除 .lastupdate 文件或整个目录并再次下载，但它不起作用。最后，我删除了目录并再次在本地安装它，它可以工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-17T22:39:22.577

发生这种情况是因为我有`http`而不是`https`：

```
<repository>
    <id>jcenter</id>
    <name>jcenter-bintray</name>
    <url>https://jcenter.bintray.com</url>
</repository> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-31T02:53:44.620

这是问题的长期解决方案（不是快速修复，但如果没有其他解决方案将起作用）

你会因为我这么说而讨厌我，但这是关于像 eclipse 这样的开源项目的真相。因为开源是模块化的，并且允许您使用许多工具（例如 maven、spring boot、xml 或 groovy 的选项、不同的 eclipse 更新等）以多种方式构建和开发项目。问题是 eclipse 允许您运行项目缺少 maven 构建，因为 IDE 足够智能，可以使用 remote_repository 解决依赖关系，它存储和捕获项目上未正确构建的 jar 文件。

由于此功能，您实际上可能有本地构建问题，但就像 DNS 服务器一样；如果在本地目录中找不到解决方案，Eclipse 将在其远程缓存存储库中寻找解决方案。当您删除 remote_repository 并让 Maven 第二次重建它时，该项目最终可能会产生更多错误并且不会再次构建，或者可能会重建丢失的缓存。但这不太可能。

因此，解决您的解决方案的长答案。

这是一个项目架构问题！

**解决方案：** 您需要做的是查看所有依赖项目的 pom.xml 文件和本地项目中的 maven 依赖项文件夹，并尝试解决 maven 依赖项文件夹中所有缺少的依赖项 jar。如果您有引用的库，我建议将这些 jar 移动到本地项目的 maven 依赖文件夹中。

您必须努力解决每个子项目，然后导航到您的根项目并使用 Maven -> 构建 -> 全新安装（检查“跳过测试”和“解决工作区工件”）修复每个项目，直到每个项目建立了一个干净的成功。

最有可能的是，当您强制更新您的所有项目的整个解决方案时，您将获得 IDE 自动解决的错误列表。自动解决将指的是解决问题的简单参考。但是要部署，您必须手动修复项目，因为 Eclipse、Spring 和 Maven 可以很好地协同工作，但可能有一些他们不同意的事情。因此，您必须在这些情况下扮演外交官并弄清楚。

这就是可悲的事实。

总而言之，我的项目中有一个问题清单。我有这个问题。生成的war文件有空的jar文件夹，除非我强制它，否则构建不是干净的没有错误。WAR 文件生成将在 tomcat 服务器生产上运行 404 错误，并且我的 Angular 应用程序将在执行 API 时抛出 Cors-Error。

我的前端项目中的所有错误都是人为的，因为所有问题的根源都是生成的 WAR 文件。它没有生成依赖项，主项目没有在 tomcat 中执行，并且 tomcat 服务器无法运行 spring 初始化程序以在服务器上部署 cors-policy 以允许我的 Angular 应用程序进行通信。但总而言之，开发环境运行良好，没有任何问题。

这就是我对这个线程的长期解决方案。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-07T02:36:49.843

我在 Maven 中发现的错误之一是我将 settings.xml 文件放在错误的目录中。它必须在您的用户主目录下的 .m2 文件夹中。检查以确保它位于正确的位置（如果您正在使用它，请与 settings-security.xml 一起使用）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-14T08:24:37.223

检查您的工件 Y 是否将包装设置为“jar”。如果你通过错误或复制粘贴将其定义为“战争”，它会显示这种奇怪的“已缓存在本地存储库中，直到内部更新间隔已过或强制更新后才会重新尝试解析”。我期待像“工件 Y 是战争，预期 jar 类型”之类的东西。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-16T04:05:32.017

`DependencyResolutionException`当我通过 shell 脚本安装本地工件时，我在 Ubuntu Linux 中使用过。解决方案是删除本地工件并“手动”重新安装它们 -`mvn install:install-file`通过终端调用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-16T08:05:05.340

在我的情况下，我需要项目 Y 成为通过 Tomcat 部署的 WAR，并且它需要成为 JAR 才能将其作为依赖项添加到项目 X 中。

所以在项目 Y's`pom.xml`中，我添加了这个插件来创建一个 JAR 以及 WAR：

```
 <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>3.2.2</version>
                <configuration>
                    <attachClasses>true</attachClasses>
                    <classesClassifier>classes</classesClassifier>
                </configuration>
            </plugin> 
```

在项目 X 中添加项目 Y 的依赖项时`pom.xml`，我必须添加一个`classifier`：

```
 <dependency>
            <groupId>groupId.of.project.Y</groupId>
            <artifactId>project.Y</artifactId>
            <version>1.0-SNAPSHOT</version>
            <classifier>classes</classifier>
        </dependency> 
```

注意：当您构建项目 Y 时，您将在目标文件夹中看到 2 个包装：`project-Y.war`和`project-Y-classes.jar`，这就是为什么在导入时指定`classes`分类器以导入 JAR 而不是 WAR。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-06-03T11:50:36.477

由于不同的原因，我遇到了同样的错误：我创建了一个包含我们的“良好实践”依赖项的起始 POM，并在本地构建并安装它以对其进行测试。我可以在 repo 中“看到”它，但是使用它的项目出现了上述错误。我所做的是将启动器 POM 设置为 pom，因此没有 JAR。Maven 非常正确，它不在 Nexus 中——但我没想到会这样，所以错误是，嗯，没有帮助。将启动器 POM 更改为正常包装并重新安装解决了该问题。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-04-25T07:11:33.047

就我而言，我必须在根级 gradle 依赖项中添加 mavenLocal()

```
mavenCentral()
mavenLocal() 
```

# java - 如何计算代码路径中的指令数？

> ID：12517133
> 
> 赞同：1
> 
> 时间：2012-09-20T16:44:33.673
> 
> 标签：java

考虑以下代码段。

```
 for (int i = targetIndex; i < totalInTarget; i++) {
            ++step;
            _KVPair kvp = target.get(i);

            if (previousKey == null) {
                ++step;
                currentKey = kvp.getKey();
                  ... 
```

有没有办法让我知道所采取的指令数量：

*   每次迭代
*   每个 if/else 决定

无需手动计算它们`++step`;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:46:51.623

您是否考虑过使用[Javap](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javap.html)将其反汇编为 JVM 指令？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:51:50.477

简短的回答，不。

您可以使用 javap 向您显示字节码，但这不会直接转换为 CPU 指令（如果这就是您的意思）。指令的数量将取决于它是解释的还是 JIT 的、它的优化方式以及可能的其他因素（GC 选项？）。

# spring - BadCredentialsException：Kerberos 验证不成功

> ID：12517134
> 
> 赞同：5
> 
> 时间：2012-09-20T16:44:34.880
> 
> 标签：spring, tomcat, spring-security, kerberos, spnego

我想使用 SPNEGO 进行身份验证。我用：

*   spring-core-3.1.0.RELEASE.jar
*   spring-security-core-3.1.0.RELEASE.jar
*   spring-security-kerberos-core-1.0.0.M2.jar
*   来自 spring core security 3.0.7 的包编解码器（https://jira.springsource.org/browse/SES-98）
*   雄猫

我的配置文件如下所示。当我尝试使用上述库进行身份验证时，出现以下异常。

有人遇到同样的问题并处理了吗？

配置文件（取自 spring security kerberos 示例）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sec="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- This configuration uses SPNEGO by default, but one could also use a form if he directly goes to /login.html -->
    <sec:http entry-point-ref="spnegoEntryPoint" use-expressions="true">
        <sec:intercept-url pattern="/secure/**" access="isAuthenticated()" />
        <sec:custom-filter ref="spnegoAuthenticationProcessingFilter"
            position="BASIC_AUTH_FILTER" />
        <sec:form-login login-page="/login.html" default-target-url="/secure/index.jsp"/>
    </sec:http>

    <bean id="spnegoEntryPoint"
        class="org.springframework.security.extensions.kerberos.web.SpnegoEntryPoint" />

    <bean id="spnegoAuthenticationProcessingFilter"
        class="org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager" />
    </bean>

    <sec:authentication-manager alias="authenticationManager">
        <sec:authentication-provider ref="kerberosServiceAuthenticationProvider" /> <!-- Used with SPNEGO -->
        <sec:authentication-provider user-service-ref="dummyUserDetailsService"/> <!-- Used with form login -->
    </sec:authentication-manager>

    <bean id="kerberosServiceAuthenticationProvider"
        class="org.springframework.security.extensions.kerberos.KerberosServiceAuthenticationProvider">
        <property name="ticketValidator">
            <bean
                class="org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator">
                <property name="servicePrincipal" value="HTTP/xxx.xx.xx.xx@XX-XXX.XXX.XX" />
                <!-- Setting keyTabLocation to a classpath resource will most likely not work in a Java EE application Server -->
                <!-- See the Javadoc for more information on that -->
                <property name="keyTabLocation" value="file:/home/xxxxx/conf/krb5/krb5.keytab" />
                <property name="debug" value="true" />
            </bean>
        </property>
        <property name="userDetailsService" ref="dummyUserDetailsService" />
    </bean>

    <!-- This bean definition enables a very detailed Kerberos logging -->
    <bean
        class="org.springframework.security.extensions.kerberos.GlobalSunJaasKerberosConfig">
        <property name="debug" value="true" />
    </bean>

    <!--
        Just returns the User authenticated by Kerberos and gives him the
        ROLE_USER
    -->

    <bean id="dummyUserDetailsService"
        class="org.springframework.security.extensions.kerberos.sample.DummyUserDetailsService" />

</beans> 
```

我得到的例外：

```
org.springframework.security.authentication.BadCredentialsException: Kerberos validation not succesfull
        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator.validateTicket(SunJaasKerberosTicketValidator.java:69)
        at org.springframework.security.extensions.kerberos.KerberosServiceAuthenticationProvider.authenticate(KerberosServiceAuthenticationProvider.java:86)
        at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
        at org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter.doFilter(SpnegoAuthenticationProcessingFilter.java:131)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:219)
        at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:333)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.security.PrivilegedActionException: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate
type to decrypt AP REP - RC4 with HMAC)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator.validateTicket(SunJaasKerberosTicketValidator.java:67)
        ... 29 more
Caused by: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC)
        at sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:778)
        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)
        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)
        at sun.security.jgss.spnego.SpNegoContext.GSS_acceptSecContext(SpNegoContext.java:871)
        at sun.security.jgss.spnego.SpNegoContext.acceptSecContext(SpNegoContext.java:544)
        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:342)
        at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:285)
        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:146)
        at org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)
        ... 32 more
Caused by: KrbException: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC
        at sun.security.krb5.KrbApReq.authenticate(KrbApReq.java:273)
        at sun.security.krb5.KrbApReq.<init>(KrbApReq.java:144)
        at sun.security.jgss.krb5.InitSecContextToken.<init>(InitSecContextToken.java:108)
        at sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:761)
        ... 40 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:19:55.023

我发现了问题。Spring-security-kerbos 需要 keytab 文件的路径作为“资源字符串”（详细信息：[http](http://static.springsource.org/spring/docs/3.0.x/reference/resources.html) ://static.springsource.org/spring/docs/3.0.x/reference/resources.html ）。当我将路径设置为“file:/home/xxxxx/conf/krb5/krb5.keytab”时，应用程序会运行，但我认为它稍后无法打开文件并且 Kerberos 无法加载任何密钥。不幸的是，来自 Kerberos 的日志不是很清楚。

当我将路径设置为“/home/xxxxx/conf/krb5/krb5.keytab”时，出现以下异常

```
Caused by: java.io.FileNotFoundException: ServletContext resource [/home/xxxxx/conf/krb5/krb5.keytab] cannot be resolved to URL because it does not exist 
```

此问题的解决方案可以是文件 SunJaasKerberosTicketValidator.java 中的修复：

```
private String keyTabLocation;

LoginConfig loginConfig = new LoginConfig(keyTabLocation, servicePrincipal, debug); 
```

代替：

```
private Resource keyTabLocation;

LoginConfig loginConfig = new LoginConfig(keyTabLocation.getURL().toExternalForm(), servicePrincipal, debug); 
```

有了这个修复，一切正常。我们可以以“/home/xxxxx/conf/krb5/krb5.keytab”格式设置文件路径

如果有人知道更多关于它的细节，请写在这里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T06:52:56.717

至少 Java 7 不（或者，我的版本不）能够处理“文件：”前缀：[请参阅此链接](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2221392)。我必须像您一样对 Spring 源代码进行相同的修改。谢谢，这很有帮助。浪费了半个星期尝试不同的配置。

# python - rpy2/Rmagic：无法读取 csv 数据文件

> ID：12517135
> 
> 赞同：0
> 
> 时间：2012-09-20T16:44:44.277
> 
> 标签：python, r, ipython, rpy2

我有一个非常标准的 csv 数据集，我正在尝试使用 rpy2/Rmagic 在 IPython Notebook 中读取它：

```
# R code
%load_ext rmagic
%R my.data <- read.csv("/Users/xxx/Documents/data.csv") 
```

我收到此错误：

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-31-844400cf68c6> in <module>()
     25 ####Chunk 1: Inputting and checking the data
---> 27 get_ipython().magic(u'R my.data <- read.csv("/Users/xxx/Documents/data.csv")')
     28 get_ipython().magic(u'R summary(my.data)')

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/core/interactiveshell.pyc in magic(self, arg_s)
   2162         magic_name, _, magic_arg_s = arg_s.partition(' ')
   2163         magic_name = magic_name.lstrip(prefilter.ESC_MAGIC)
-> 2164         return self.run_line_magic(magic_name, magic_arg_s)
   2165 
   2166     #-------------------------------------------------------------------------

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/core/interactiveshell.pyc in run_line_magic(self, magic_name, line)
   2088                 kwargs['local_ns'] = sys._getframe(stack_depth).f_locals
   2089             with self.builtin_trap:
-> 2090                 result = fn(*args,**kwargs)
   2091             return result
   2092 

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/extensions/rmagic.pyc in R(self, line, cell, local_ns)

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/core/magic.pyc in <lambda>(f, *a, **k)
    189     # but it's overkill for just that one bit of state.
    190     def magic_deco(arg):
--> 191         call = lambda f, *a, **k: f(*a, **k)
    192 
    193         if callable(arg):

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/extensions/rmagic.pyc in R(self, line, cell, local_ns)
    579         if return_output and not args.noreturn:
    580             if result != ri.NULL:
--> 581                 return self.Rconverter(result, dataframe=False)
    582 
    583 __doc__ = __doc__.format(

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/IPython/extensions/rmagic.pyc in Rconverter(Robj, dataframe)
    113             return np.asarray(Robj)
    114         Robj = np.rec.fromarrays(Robj, names = names)
--> 115     return np.asarray(Robj)
    116 
    117 @magics_class

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/numpy/core/numeric.py in asarray(a, dtype, order)
    233 
    234     """
--> 235     return array(a, dtype, copy=False, order=order)
    236 
    237 def asanyarray(a, dtype=None, order=None):

TypeError: __float__ returned non-float (type rpy2.rinterface.NAIntegerType) 
```

我猜这与我的 csv 数据中的 NA 值有关。我实际上并没有在那里输入一个值——只是一个空白条目（例如 1、3、4）。

我尝试用 NA、空格、0 等替换空白条目——我总是遇到同样的错误。我究竟做错了什么？

**编辑：**我尝试使用纯 rpy2 进行操作（不对我的数据集进行任何更改）：

```
import rpy2.robjects as robjects                                                                                                                                                                                                                        
myData = robjects.r['read.csv']("/Users/xxx/Documents/data.csv")
print robjects.r['summary'](myData) 
```

它工作正常！所以这一定是 IPython/Rmagic 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T00:48:59.713

该错误是因为`%R`在 IPython 中试图将整个 csv 文件转换为单个 dtype 浮点数组。整数列中的 NA 值不能转换为浮点数，因此会引发异常。

例如：

```
>>> import rpy2.robjects as ro
>>> import numpy as np
>>> myData = ro.r['read.csv']('data.csv')
>>> np.asarray(myData)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/numpy/core/numeric.py", line 235, in asarray
    return array(a, dtype, copy=False, order=order)
TypeError: __float__ returned non-float (type rpy2.rinterface.NAIntegerType) 
```

一个简单的解决方法是在`--dataframe`. 请注意，我们需要使用/标志，以确保我们不会尝试将返回值转换为数组（这会再次触发错误）。[或者，我们可以在命令末尾添加一个分号。]`-d``%R``--noreturn``-n`

例如：

```
In [1]: %load_ext rmagic

In [2]: %R -n -d myData myData <- read.csv('data.csv')

In [3]: myData
Out[3]: 
array([(1, 1, 1, 25, 0.590334, 0.4991572, 0.2189781, 9),
       (1, 1, 1, 25, 0.5504164, 0.5007439, 0.2136691, 13),
       (1, 1, 1, 25, 0.588486, 0.4879058, 0.2105431, 11),
       (1, 1, 1, 25, 0.5882244, 0.5148501, 0.2105431, -2147483648),
       (1, 2, 1, 25, nan, 0.489045, 0.2025757, 12)], 
      dtype=[('replicate', '<i4'), ('line', '<i4'), ('genotype', '<i4'), ('temp', '<i4'), ('femur', '<f8'), ('tibia', '<f8'), ('tarsus', '<f8'), ('SCT', '<i4')]) 
```

请注意，该`NAInteger`值已转换为`-2147483648`（等于`numpy.iinfo('<i4').min`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:08:39.417

我从回溯中猜测某个列的类型被猜错了（它认为它是 Python 浮点数，而 NA 是整数）。因为它是我无法判断这是否是 ipython 或 rpy2 的问题（你必须单独尝试 rpy2）。如果带有 NA 的列确实具有看起来像整数的数值，请添加 .0 并查看它是否解决了问题。

# java - 如何提高使用 Spring 将 REF CURSOR 检索到 Java 中的性能？

> ID：12517136
> 
> 赞同：2
> 
> 时间：2012-09-20T16:44:54.910
> 
> 标签：java, sql, oracle, spring

我正在执行对作为 DB 包一部分的函数的调用。该软件包部署在两个位置。一个本地和另一个远程（横跨大西洋）。

我正在通过 Spring JDBC 模板检索数据。

有一个函数返回大约 1000 行（不是那么多），在本地获取数据时大约需要 1.5 秒，但在远程获取数据时大约需要 12 秒。

在所有示例代码中，名称都已更改，代码已稍微简化。

请查看当前 Java 代码的示例：

```
SimpleJdbcCall simpleJdbcCall = new SimpleJdbcCall(getDataSource())
                                            .withSchemaName(MY_SCHEMA_NAME)
                                            .withCatalogName("REFCURSOR_PKG")
                                            .withFunctionName("GET_DATA")
                                            .returningResultSet("RESULT_SET", new DataEntryMapper());

        SqlParameterSource params = new MapSqlParameterSource()
                                    .addValue("the_name", name)
                                    .addValue("the_rev", rev);

        Map resultSet = simpleJdbcCall.execute(params);
        ArrayList list = (ArrayList) resultSet.get("RESULT_SET"); 
```

RowMapper 类看起来像这样：

```
class RouteDataEntryMapper implements RowMapper {
        public RouteDataEntry mapRow(ResultSet resultSet, int rowNum) throws SQLException {
            return new DataEntry(resultSet.getString("name"), 
                                    Integer.parseInt(resultSet.getString("rev"));
        }
    } 
```

SQL 包规范片段：

```
TYPE REF_CURSOR IS REF CURSOR; 
```

SQL函数：

```
 FUNCTION GET_ROUTE_DATA(the_name VARCHAR2, the_rev VARCHAR2) RETURN REF_CURSOR AS

  RESULT_SET REF_CURSOR;

  BEGIN
    OPEN RESULT_SET FOR
    select *
    from table_name tn
    where tn.name = the_name
    and tn.rev = the_rev;

    RETURN RESULT_SET;

    CLOSE RESULT_SET;

    EXCEPTION WHEN OTHERS THEN
      RAISE;

  END GET_ROUTE_DATA; 
```

我也尝试过使用常规样板 JDBC（创建连接、准备语句、执行语句、从 RESULT_SET 检索数据等），我发现绝大多数时间都花在循环 RESULT_SET 并将数据从中提取并放入一些pojos。在上面的 Spring 代码的情况下，大部分时间都花在了 execute() 方法中，但这可能是因为它当时使用 RowMapper 创建了对象。

因此，它们之间的共同领域是执行以下操作：

```
rs.getString("name") 
```

我猜这就是问题所在，但我可能是错的。

正如我所说，本地延迟很好，但远程延迟太长了。这是因为它会在每个 rs.get... 上进入数据库吗？有一个更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:47:34.190

> rs.getString("名称")

`ResultSet.get*(String columnName)`可以换成`ResultSet.get*(int columnNaumber)`稍微快一点的，但我怀疑这里的主要问题。

> 这是因为它会在每个 rs.get... 上进入数据库吗？

虽然这真的取决于司机，但我怀疑它不会。对于缓存的结果集，当您滚动游标时它可能会转到服务器，但它仍会在每次往返中获取一堆行。

我还有两个建议是：

*   使用网络嗅探实用程序查看正在传输的数据
*   检查您的驱动程序是否有任何预取选项等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T11:54:56.513

添加这一行： -

```
.withoutProcedureColumnMetaDataAccess 
```

在以下代码行中

```
SimpleJdbcCall simpleJdbcCall = new SimpleJdbcCall(getDataSource())
                                            .withSchemaName(MY_SCHEMA_NAME)
                                            .withCatalogName("REFCURSOR_PKG")
                                            .withFunctionName("GET_DATA")
                                            .withoutProcedureColumnMetaDataAccess  // to avoid fetching meta data info from database 
```

# javascript - 使用 BoilerplateJS 的开发过程

> ID：12517137
> 
> 赞同：3
> 
> 时间：2012-09-20T16:44:58.967
> 
> 标签：javascript, boilerplatejs

[BoilerplateJS](http://boilerplatejs.org)提供的集成和最佳实践给我们留下了深刻的印象，但文档确实缺乏，尤其是对于新的 RequireJS 用户。

我们是一个由 5 人组成的团队，每个人都有不同的技能组合，而 BoilerplateJS 的一个吸引人的地方就是能够隔离 UI 组件。

从示例脚手架中，我们可以清楚地了解如何分别对每个组件进行单元测试。但是，我们不清楚在开发过程中如何做到这一点：

1.  开发者 A 创建组件结构和视图模型（已测试）并将其传递给开发者 B
2.  开发人员 B 为组件开发 CSS 和可能的动画
3.  开发人员 A 和/或 B 将组件集成到网站的其余部分并进一步测试集成

如何实现（2）？即允许设计人员和开发人员在一个隔离的组件上工作——推荐的加载组件的方法是什么，以便它可以开发/调试/测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:37:48.013

**关于 CSS**

一个 UI 组件大致有 3 个部分：结构 (HTML)、表示 (CSS)、行为 (JS)。一种常见的处理方式是开发人员专注于设计人员处理演示的结构和逻辑。

这就是我们开发boilerplatejs的示例应用程序的方式。例如，菜单、主题和本地化组件是由开发人员开发的一个简单的“无序列表”，当他们完成它时，如下所示（只需通过 Chrome 开发人员工具删除主题 css 链接，您将看到相同的内容）：

![在此处输入图像描述](../Images/aaf9f26408b28ae38b8d36ebdee8ac8f.png)

然后设计师采用丑陋的 UI 并创建了一个主题，以专业的方式定位和呈现这些列表（我们开发了 2 个存储在 src/modules/baseModule/theme 中的主题）。开发人员当然很难只交付那么丑陋的东西，但他们需要相信设计师完成工作的能力。我相信您使用的源代码控制工具允许不同的团队成员同时处理同一个组件。

如果你想让主题成为一个突出的特性，我建议最小化组件特定的 CSS 文件。否则，您可能无法创建完全改变组件布局和外观的不同主题。没有组件本地 css 的缺点是组件在没有“演示”的情况下并不是真正自包含的。我仍在努力正确回答这个问题，感谢任何想法/帮助！请参阅下面我的相关问题：

[全局 CSS 主题与组件特定的本地样式表组合](https://stackoverflow.com/questions/12366265/global-css-theming-combination-with-component-specific-local-stylesheets)

无论如何，您可以通过多种方式将 CSS 添加到组件中，看看这个问题，其中讨论了这些不同的方式。

[将外部 CSS 文件添加到 BoilerplateJS 项目](https://stackoverflow.com/questions/12455785/adding-external-css-file-to-a-boilerplatejs-project)

**现在关于嵌入组件...**

如果您希望将组件嵌入到其他网页中，您可以使用样板的 DOMController 。例如，假设您需要将“部门（src/modules/sampleModule1/departments）”组件嵌入到其他网站。除了已经存在的 UrlController（UrlController 响应浏览器 URL 更改）之外，您还必须向模块 (src/modules/sampleModule1/module.js) 添加一个 DomController。

```
 //crate a dom controller that searchs within whole document body
    var domController = new Boiler.DomController($("body"));
    domController.addRoutes({
        //look for elements with id 'department_comp' and embed the department component
        '#department_comp' : new DepartmentComponent(context),
    });
    domController.start(); 
```

现在在您的网页或外部站点上放置一个 div 或一个部分元素，以便 DomController 嵌入部门。

```
<section id="department_comp"></section> 
```

当然，有两点需要注意：

1）你的网页需要有boilerplatejs运行时。这意味着您所有的第三方 JS 库和主题 CSS 文件都应该静态添加到网页中。（我们正在解决这个问题，我们希望通过 v0.2-stable 发布一个引导程序，它可以通过单个脚本声明完成所有这些工作）

[2) 如果您的组件使用来自不同域的 JSON 服务，您将不得不使用JSONp](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)来处理跨域 HTTP 请求。但是，如果您的 REST 服务托管在同一个域上，您就不必担心这一点。

# git - 使用 git 克隆一个使用 SVN 的 CodePlex 项目

> ID：12517138
> 
> 赞同：5
> 
> 时间：2012-09-20T16:45:01.753
> 
> 标签：git, svn, git-svn, codeplex

我有一个托管在 CodePlex 中的项目，我在创建这个项目时选择了 SVN。现在我尝试使用 Git 来克隆这个项目。

我试过：“git svn clone the_url”

但它只是永远挂起。它没有问我用户名或密码或任何东西，只是挂起。

知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:58:49.533

看看这个关于 git svn 和 CodePlex的[答案。](https://stackoverflow.com/questions/1239577/git-and-svn-on-windows)有多种可能性，包括 SSL 证书，并且 CodePlex 只是对 git svn clone 所需的大量 SVN 获取响应缓慢。

# json - 尝试在 pogo 上使用 jsonBuilder

> ID：12517141
> 
> 赞同：0
> 
> 时间：2012-09-20T16:45:20.463
> 
> 标签：json, grails, groovy

我正在使用带有 Groovy 1.7 的 Grails 1.3.4，并且我正在尝试将 pogo 转换为 json。我见过的例子都不太适合我的场景。

```
class NameAndFields {
    String name
    String fields = []
} 
```

我想将 NameAndFields 转换为 json。有人可以给我一个例子吗？我必须使用 JsonBuilder 吗？

# java - 我可以构建一个 Maven 原型或示例项目吗？

> ID：12517142
> 
> 赞同：0
> 
> 时间：2012-09-20T16:45:24.520
> 
> 标签：java, maven, spring-webflow

我可以构建一个 Maven 原型或示例项目吗？...我正在寻找的是我为我公司的其他开发人员设置项目模板给你，我想知道我是否可以以某种方式为一个项目设置一个模板并将它在我的回购中供其他开发人员获取？

这是我应该做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:21:22.170

也许从现有项目创建原型更简单，请参阅文档：

*   [http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html](http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-multi-module-project.html)
*   [http://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html](http://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html)

这将从您的项目中生成一个原型骨架，然后您将能够对其进行改进。

## 高温高压

奥利维尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:50:59.523

为什么你不能？你可以相对简单地设计一个原型（虽然我从来没有做过！）。你可以从这里开始：

[http://maven.apache.org/guides/mini/guide-creating-archetypes.html](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)

# xcode - 不确定如何从 UITableViewCell 中的 UISwitch 更新 Plist 中的 Bool 值

> ID：12517148
> 
> 赞同：1
> 
> 时间：2012-09-20T16:45:38.637
> 
> 标签：xcode, uitableview, boolean, plist, uiswitch

我有一个有四行的表，每行都有一个标题和开关作为附件。我希望在点击相应的开关时更新 plist 布尔值。

列表：

```
<array>
    <dict>
        <key>Bools</key>
        <array>
            <false/>
            <false/>
            <false/>
            <false/>
        </array>
        <key>Strings</key>
        <array>
            <string>String0</string>
            <string>String1</string>
            <string>String2</string>
            <string>String3</string>
        </array>
    </dict>
</array> 
```

以下是数据源方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; {
return [allergens count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; {
return [[[allergens objectAtIndex: section] objectForKey: @"Strings"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section; {
return @"Header";
} 
```

这是我的开关，带有选择器：switchToggled

```
UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
cell.accessoryView = switchView;
[switchView addTarget:self action:@selector(switchToggled:) forControlEvents: UIControlEventTouchUpInside]; 
```

下面是 IBAction 方法。我可以成功地让`switch tapped`出现在日志中，所以我知道一切正常。我只是不确定如何更新正确的布尔值。

```
- (IBAction)switchToggled:(id)sender {
NSLog(@"switch tapped");
} 
```

任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:55:37.910

当我发布此内容时，我对编程非常陌生，我不知道我无法在运行时以编程方式编辑主包中的 plist。我现在明白，要达到我想要的效果，我应该将起始 plist 保存到应用程序文档目录并从中工作。我使用[这篇](http://www.theappcodeblog.com/2011/05/30/property-list-tutorial-using-plist-to-store-user-data/ "这")文章来帮助格式化在文档目录中保存和加载数据的过程。

# java - 使用 kerberos 对服务器进行身份验证

> ID：12517151
> 
> 赞同：0
> 
> 时间：2012-09-20T16:45:56.153
> 
> 标签：java, windows, kerberos

我认为在 Windows 2003 上使用 kerberos 来针对活动目录验证 Java 服务器应用程序可能是一个好主意。这样，我们就不必在文件中输入密码。但这不起作用。

```
[2012-09-20 17:42:19,301] ERROR Cannot authenticate server via JAAS
javax.security.auth.login.LoginException: No LoginModules configured for KerberosLogin
    at javax.security.auth.login.LoginContext.init(LoginContext.java:273)
    at javax.security.auth.login.LoginContext.<init>(LoginContext.java:349) 
```

如果我在 Windows XP 上运行完全相同的代码和配置，则身份验证有效。在这两种情况下，我都使用 Java 7 u07。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:28:45.187

原来我通过 JDK 的 kinit 命令获取的 TGT 已经过期。

# c# - 当我对 DataGrid 进行排序时，如何防止 DataGridRow 可见性发生变化？

> ID：12517154
> 
> 赞同：1
> 
> 时间：2012-09-20T16:46:10.807
> 
> 标签：c#, xaml, sorting, datagrid, wpfdatagrid

我有一个应用程序需要显示一组由一些外部条件过滤的行。由于我不会在这里解释的原因，我真的不想从 DataGrid 绑定到的 DataTable 中删除行。为了过滤列表，我折叠了不想显示的行。这很好用，直到用户对 DataGrid 进行排序。排序完成后，折叠的行突然再次可见。我寻找了一个 Sorted 事件，以便我可以重新折叠我需要的行，但只有一个 Sorting 事件。我尝试在每个 DataGridRow 上使用 IsVisibleChanged，但这似乎没有触发。我该如何解决这个问题？

这是问题的简单演示：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        DataTable table = new DataTable();
        table.Columns.Add("Column 1");

        DataRow row = table.NewRow();
        row[0] = "1";
        table.Rows.Add(row);

        row = table.NewRow();
        row[0] = "2";
        table.Rows.Add(row);

        row = table.NewRow();
        row[0] = "3";
        table.Rows.Add(row);

        _grid.ItemsSource = table.AsDataView();
        _grid.DataContext = table;
        _grid.Loaded += _grid_Loaded;
    }

    void _grid_Loaded(object sender, RoutedEventArgs e)
    {
        var dataGridRow = GetRow(_grid, 1);
        dataGridRow.Visibility = Visibility.Collapsed;

        dataGridRow = GetRow(_grid, 0);
        dataGridRow.Visibility = Visibility.Collapsed;
    }

    public DataGridRow GetRow(DataGrid grid, int index)
    {
        var row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromIndex(index);
        if (row == null)
        {
            // May be virtualized, bring into view and try again.
            grid.UpdateLayout();
            if (grid.Items.Count > index)
            {
                grid.ScrollIntoView(grid.Items[index]);
                row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromIndex(index);
            }
        }
        return row;
    }
} 
```

这是 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid HorizontalAlignment="Left" Margin="54,43,0,0" VerticalAlignment="Top" Height="216" Width="382" Name="_grid"/>

</Grid> 
```

运行程序后，您将看到一个只有数字 3 的 DataGrid。单击​​“列 1”按列排序，注意您现在有数字 1、2 和 3。

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:50:30.977

我认为您应该专注于过滤 DataTable 而不是 DataGridView。您过去尝试过使用 DataView 吗？您可以使用这些来过滤您的 DataTable，并且由于您有一个绑定的 DataGridView，因此 View 将反映在 GridView 中吗？

通过过滤 DataTable，您不会删除任何行，只是暂时改变它的外观。

这是一个可能有帮助的链接：-

[http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)

我希望这有帮助。

# javascript - 单选按钮选择动态更改其他单选按钮值

> ID：12517157
> 
> 赞同：1
> 
> 时间：2012-09-20T16:46:26.313
> 
> 标签：javascript, radio-button

所以我试过寻找，但我没有找到任何东西，所以希望这不是一个重复的问题。我有几组单选按钮，我需要根据用户在第一组单选按钮中的选择动态更改与后一个单选按钮关联的值。

```
<input type="radio" name="length" id="6feet" value=" " >  6'0" 
<input type="radio" name="length" id="6.5feet" value=" " > 6'6"
<input type="radio" name="length" id="7feet" value=" " > 7'0"

<input type="radio" name="weight" ID="weight3" value="5" />  3 
<input type="radio" name="weight" ID="weight4" value="10" /> 4
<input type="radio" name="weight" ID="weight5" value="15" /> 5

<input type="radio" name="pieces" ID="PieceA" value="10">     2
<input type="radio" name="pieces" ID="PieceB" value="20">     3 
```

所以我想弄清楚是否有一种方法可以使用 onClick 或类似的方法来设置它，以便当用户选择三个“长度”单选按钮之一时，它们将为两个权重分配不同的值以及单选按钮。对不起，如果这个问题根本不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:04:25.377

你需要这样的东西[并](http://jsfiddle.net/v659L/)为单选按钮重新分配一个真正的“价值”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:00:42.900

纯 javascript 解决方案看起来与此类似：

```
document.getElementById("6feet").onclick = (function() {
    document.getElementById("weight3").click();     
}); 
```

您将 onclick 事件附加到一个元素（在本例中为 id 为 6feet 的元素），一旦单击它，它就会调用定义的函数。

阅读更多关于[**`.click()`**](https://developer.mozilla.org/en-US/docs/DOM/element.click)

**[例子](http://jsfiddle.net/gT4Zj/2/)**

还有一些使用 jQuery 的更简单的解决方案，但我不确定您是否能够将它合并到您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:02:08.770

我没有完全理解你的问题..这是你需要的吗？

```
$(document).ready(function(){
    $('input[name=length]').click(function () {
        $('input[name=weight]').val(newValue);
        $('input[name=pieces]').val(newValue);        
    });
}); 
```

# z-index - 在 Internet Explorer 中订购

> ID：12517158
> 
> 赞同：14
> 
> 时间：2012-09-20T16:46:26.507
> 
> 标签：z-index

我为移动站点创建了一个菜单，当您单击菜单按钮时，菜单幻灯片打开，这就是页面；

唯一的问题是，在 IE 和 Windows 手机中，菜单不是最顶部的元素，因此会滑到对象后面。

我试图更改 z-index、位置类型、hasLayout 无济于事。

我将不胜感激任何帮助。

Ĵ

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-20T16:54:04.533

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T01:40:01.000

我定期交换两层，将 z-Index 从 0 更改为 1，反之亦然。多年后，它停止在 IE 中工作。我将 z-Index 更改为 1 和 2。它现在可以正常工作了。我认为这个错误与 0 z-Index 有关。

# android - 使 RelativeLayout 不可选

> ID：12517163
> 
> 赞同：1
> 
> 时间：2012-09-20T16:46:44.670
> 
> 标签：android, android-layout, android-relativelayout, android-xml

我开发了一个登录页面，并为加载屏幕创建了一个自定义 xml 布局。加载屏幕布局中的所有内容都包含在`RelativeLayout`. 当用户点击登录按钮时，加载屏幕被放置在当前布局的顶部，表明它正在加载。

# 问题

问题是，当加载屏幕位于登录布局的顶部时，您仍然可以单击其后面按钮上的加载屏幕，从而创建多个我不想要的操作。有没有一种简单的方法可以使整个`RelativeLayout`不可点击？

我已经尝试过诸如：

```
android:clickable="false"
android:focusable="false" 
```

没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:04:24.130

您可以使加载屏幕的背景可点击=“true”并为其分配任何操作，以防止点击通过它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:13:35.950

我遇到过这样的情况，我发现最简单的解决方案是让你的加载对话框占据所有的屏幕空间。对话框的主容器应该是透明的，实际加载对话框位于其中。这是我所做的一个例子。

我的加载对话框布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/stericson.busybox.donate"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#AA000000"
    android:id="@+id/main">

    <RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/roundedborder_black_translucent"
        android:layout_centerInParent="true"
        android:padding="10dip">

        <ProgressBar 
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_centerVertical="true"
            android:id="@+id/progress"
            android:layout_marginRight="10dp"/>

        <stericson.busybox.donate.custom.FontableTextView 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@id/progress"
            android:textColor="#ffffff"
            android:id="@+id/header"/>

        </RelativeLayout>          
    </RelativeLayout> 
```

可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <stroke android:width="2dp" android:color="#909090" /> 
    <solid android:color="#CC000000" /> 
    <padding android:left="7dp" android:top="7dp" 
        android:right="7dp" android:bottom="7dp" /> 
    <corners android:radius="6dp" /> 
</shape> 
```

显示它的代码：

```
 LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View layout = inflater.inflate(R.layout.popupwindow_spinner, null); 
        App.getInstance().setPopupView(layout);

        popupWindow = new PopupWindow(layout, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

        context.findViewById(R.id.main).post(new Runnable() {
   public void run() {
       try
       {
           popupWindow.showAtLocation(context.findViewById(R.id.main), Gravity.CENTER, 0, 250);
       }
       catch (Exception e)
       {
           //do nothing
       }
   }
    });

        TextView textView = (TextView) layout.findViewById(R.id.header);
        textView.setText(context.getString(stringId)); 
```

id main 只是我的主视图的父容器：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/stericson.busybox.donate"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#303030" > 
```

我相信您需要让您的应用程序使用半透明主题才能使用透明背景，就像我在这里所做的那样：

```
<activity android:theme="@android:style/Theme.Translucent"> 
```

由于加载屏幕填满了整个屏幕，因此不允许点击进入其下方的内容。

# python - Tkinter 输入的第一个字母

> ID：12517166
> 
> 赞同：3
> 
> 时间：2012-09-20T16:47:00.573
> 
> 标签：python, input, tkinter

我的程序应该检查输入单词的前三个字母是否与预定义的单词相似。
我已经用 Tkinter 制作了一个 GUI，并且想要获取输入字段的字母。
不知何故，我无法像没有 Tkinter 那样实现它。

这就是我为外壳做的事情：

```
text = raw_input('Enter a word: ')

if (text[0] + text[1] + text[2] == 'sag'):
    print "sagen"
else:
    print "error" 
```

所以，当我输入“sagst”这个词时，它会检查前三个字母并应该输出“sagst”。工作正常。

我了解到例如`inputfield.get()`获取条目“inputfield”的输入。
**但是我怎样才能检查那个“输入字段”的第一个字母呢？**
一个小选择：

```
from Tkinter import*
root = Tk()

def check():
    if (text[0] + text[1] + text[2] == 'sag'):
        print "True"
    else:
        print "False"

inputfield = Entry(root)
inputfield.pack()

but = Button(root,text='Check!', command = check)
but.pack()

text = inputfield.get()

root.mainloop() 
```

不工作...

我希望你能理解我的问题并尽快回答。（对不起我糟糕的英语和糟糕的 Python 技能）;-)
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:56:30.303

按下按钮*后*，您的`check`函数必须检索文本字段：

 *```
def check():
    text = inputfield.get()
    print text.startswith('sag') 
```

我已经稍微改变了你的测试，使用[`.startswith()`](http://docs.python.org/library/stdtypes.html#str.startswith)并直接打印该测试的结果（打印将变成布尔值`True`或`False`匹配的字符串）。

在您的代码中发生的是您定义`inputfield`、检索它的内容（显然是空的），然后才*通过*运行 mainloop 来显示 TKInter GUI 窗口。用户永远没有机会以这种方式输入任何文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:03:31.977

您也可以在不需要按钮的情况下进行检查（现在它会在用户按下“Enter”时进行检查）：

```
from Tkinter import *
root = Tk()
def check(*event):
    text = inputfield.get()
    print text.startswith('sag')

inputfield = Entry(root)
inputfield.bind('<Return>',check)
inputfield.pack()
root.mainloop() 
```

您还可以做其他事情来让您的小部件[在您键入时验证条目](http://effbot.org/zone/tkinter-entry-validate.htm)。（该链接是旧的，但它也指向允许您在不进行子类化的情况下执行此操作的新功能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:18:42.370

Here is a version which uses an Entry widget which validates its contents as the user types (so the user does not have to click a button or even press Return).

```
import Tkinter as tk
class MyApp(object):
    '''
    http://effbot.org/zone/tkinter-entry-validate.htm
    http://effbot.org/tkinterbook/entry.htm
    http://www.tcl.tk/man/tcl8.5/TkCmd/entry.htm#M-validate
    '''
    def __init__(self, master):
        vcmd = (master.register(self.validate),
                '%d', '%i', '%P', '%s', '%S', '%v', '%V', '%W')
        self.entry = tk.Entry(master, validate = 'key',
                              validatecommand = vcmd)
        self.entry.pack()
        self.entry.focus()

    def validate(self, action, index, value_if_allowed,
                   prior_value, text, validation_type, trigger_type, widget_name):
        dtype = {'0':'delete', '1':'insert', '-1':'other'}[action]
        n = min(3, len(value_if_allowed))
        valid = False
        if dtype == 'insert':
            if value_if_allowed[:n] == 'sag'[:n]: valid = True
            else: valid = False
        else: valid = True
        print(valid)
        return True

root = tk.Tk()
app = MyApp(root)
root.mainloop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:55:58.217

您实际上并没有将输入字段中的值放入文本变量中。

我将值从 text 重命名为 input_text 因为它让我感到困惑。我也从 using`text[0] + text[1] + text[2]`改为 using `startswith()`。这将防止您在短字符串上获得 IndexErrors，并且更加pythonic。

```
from Tkinter import*
root = Tk()

def check():
    input_text = inputfield.get()
    if input_text.startswith('sag'):
        print "True"
    else:
        print "False"

inputfield = Entry(root)
inputfield.pack()

input_text = inputfield.get()
print input_text # Note that this never prints a string, because it only prints once when the input is empty.

but = Button(root, text='Check!', command=check)
but.pack()

root.mainloop() 
```

关键的变化是`check`函数需要实际获取`inputfield`.*

# mongodb - 对多个字段进行排序 mongo DB

> ID：12517167
> 
> 赞同：38
> 
> 时间：2012-09-20T16:47:00.427
> 
> 标签：mongodb, nosql

我在 mongo 中有一个查询，因此我想优先考虑第一个字段，然后是第二个字段。

说我必须这样查询

```
db.col.find({category: A}).sort({updated: -1, rating: -1}).limit(10).explain() 
```

所以我创建了以下索引

```
db.col.ensureIndex({category: 1, rating: -1, updated: -1}) 
```

它可以根据需要扫描尽可能多的对象，即`10`.

但现在我需要查询

```
db.col.find({category: { $ne: A}}).sort({updated: -1, rating: -1}).limit(10) 
```

所以我创建了以下索引：

```
 db.col.ensureIndex({rating: -1, updated: -1}) 
```

但这会导致扫描整个文档，当我创建

```
 db.col.ensureIndex({ updated: -1 ,rating: -1}) 
```

它扫描的文档数量更少：

我只想问清楚对多个字段进行排序以及这样做时要保留的顺序是什么。通过阅读 MongoDB 文档，很明显我们需要对其执行排序的字段应该是最后一个字段。这就是我在`$ne`上面的查询中假设的情况。我做错什么了吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-21T11:58:02.080

MongoDB[查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer)通过尝试不同的计划来确定哪种方法最适合给定查询。然后缓存该查询模式的获胜计划以供接下来的约 1,000 个查询使用，或者直到您执行`explain()`.

要了解考虑了哪些查询计划，您应该使用[`explain(1)`](http://www.mongodb.org/display/DOCS/Explain)，例如：

```
db.col.find({category:'A'}).sort({updated: -1}).explain(1) 
```

`allPlans`详细信息将显示比较的所有计划。

如果您运行的查询不是很有选择性（例如，如果许多记录与您的条件匹配`{category: { $ne:'A'}}`），MongoDB 使用 BasicCursor（表扫描）而不是匹配索引来查找结果可能会更快。

*查询*中字段的顺序通常不会对索引选择产生影响（范围查询有一些例外）。*排序*中字段的顺序确实会影响索引选择。如果您的`sort()`条件与索引顺序不匹配，则必须在使用索引后重新排序结果数据（`scanAndOrder:true`如果发生这种情况，您应该在解释输出中看到）。

还值得注意的是，MongoDB[每次查询只会使用一个索引](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Oneindexperquery.)（`$or`s 除外）。

因此，如果您尝试优化查询：

```
db.col.find({category:'A'}).sort({updated: -1, rating: -1}) 
```

您将希望在索引中包含所有三个字段：

```
db.col.ensureIndex({category: 1, updated: -1, rating: -1}) 
```

仅供参考，如果您想强制特定查询使用索引（通常不需要或不推荐），[`hint()`](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)您可以尝试一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:28:39.370

确实如此，但是由于您是在复合索引上排序，因此您在这里有两层排序。

正如您注意到的，当索引的第一个字段与排序的第一个字段匹配时，它起作用并且索引被看到。但是，当以相反的方式工作时，它不会。

因此，根据您自己的观察，需要保留的顺序是从第一个到最后一个字段的查询顺序。mongo 分析器有时可以在字段中移动以匹配索引，但通常它只会尝试匹配第一个字段，如果不能，它将跳过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T09:14:49.890

试试这个代码，它将首先根据名称对数据进行排序，然后将“名称”保留在密钥持有者中，它将对“过滤器”进行排序

```
 var cursor = db.collection('vc').find({   "name" :   { $in: [ /cpu/, /memo/ ]   }     }, { _id: 0, }).sort( { "name":1  ,  "filter": 1 } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T06:47:14.600

```
Sort and Index Use¶

MongoDB can obtain the results of a sort operation from an index which includes the sort fields. MongoDB may use multiple indexes to support a sort operation if the sort uses the same indexes as the query predicate. ... Sort operations that use an index often have better performance than blocking sorts.

db.restaurants.find().sort( { "borough": 1, "_id": 1 } ) 
```

更多信息： [https ://docs.mongodb.com/manual/reference/method/cursor.sort/](https://docs.mongodb.com/manual/reference/method/cursor.sort/)

# php - 查询一个php函数

> ID：12517169
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:47:32.197
> 
> 标签：php

这个功能是什么意思

```
function entre2v2($text,$marqueurDebutLien,$marqueurFinLien)

{

$ar0=explode($marqueurDebutLien, $text);
$ar1=explode($marqueurFinLien, $ar0[1]);
$ar=trim($ar1[0]);
return $ar;
} 
```

上面代码中的 $text 是指文本文件的内容，它是通过以下代码从表单帖子中获取的：

```
$text=file_get_contents($_POST['file']); 
```

任何人都可以描述一下提到的 php 函数吗？我不明白这两个变量是什么意思

```
$marqueurFinLien
$marqueurDebutLien 
```

根据第一个答案，我试过了。但它显示错误。

```
Warning: Missing argument 3 for entre2v2(), called in C:\xampp\htdocs\php\test.php on line 5 and defined in C:\xampp\htdocs\php\test.php on line 13

Notice: Undefined variable: marqueurFinLien in C:\xampp\htdocs\php\test.php on line 18

Notice: Undefined offset: 1 in C:\xampp\htdocs\php\test.php on line 18

Warning: explode() [function.explode]: Empty delimiter in C:\xampp\htdocs\php\test.php on line 18 
```

当我使用以下内容时：

```
<?

$text=file_get_contents('http://localhost/php/w.txt');

$name=entre2v2($text,"DB_USER', ',');");

echo($name);
echo("<br>");

function entre2v2($text,$marqueurDebutLien,$marqueurFinLien)

{

$ar0=explode($marqueurDebutLien, $text);
$ar1=explode($marqueurFinLien, $ar0[1]);
$ar=trim($ar1[0]);
return $ar;
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:17:08.340

In short, it looks like a way to parse a string - very inefficient and fragile, may I say.

```
$ar0 = explode($marqueurDebutLien, $text); 
```

This line will break ('explode') a string stored in $text into array of substrings, using a `$marqueurDebutLien` string as a separator. Then it takes the *second* element of this array (i.e., what follows `$marqueurDebutLien`) and break it once more:

```
$ar1 = explode($marqueurFinLien, $ar0[1]); 
```

... now using `$marqueurFinLien` as a separator.

The first element of this array is, by definition, the first string that lies in the original string (`$text`) between `$marqueurDebutLien` and `$marqueurFinLien` 'marker substrings'. Its trimmed version is what function returns.

Why inefficient, you may ask? There are actually several small things that could be quite easily improved here: limits for `explode`s, so only a small part would be processed, returning result of `trim` right away instead of storing it in some variable...

But in fact, the whole approach is flawed. Look at this:

```
function notSoMysticEntre2v2($text, $openingDelimiter, $closingDelimiter) {
   $mark1 = strpos($text, $openingDelimiter);
   if ($mark1 === FALSE) { 
       return null; 
   }  
   $mark2 = strpos($text, $closingDelimiter, $mark1);
   if ($mark2 === FALSE) {
       return null;
   }
   $data  = substr($text, $mark1 + 1, $mark2 - $mark1 - 1);
   return trim($data);
} 
```

Take note that this function is quite more fool-proof than the first one: it will correctly fail to parse the string (returning `null` as a sign of error) if there's no opening delimiter there OR if it's not followed by closing delimiter.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:55:32.377

该函数似乎从输入返回`$marqueurDebutLien`和`$marqueurFinLien`字符串之间的文本`$text`。

例如

```
$text = "abcdefghijklmnop";
$result = entre2v2($text, 'd', 'lmn'); // will return 'efghijk' 
```

# objective-c - 使用 popViewControllerAnimated 时调用 viewDidLoad

> ID：12517173
> 
> 赞同：2
> 
> 时间：2012-09-20T16:47:45.043
> 
> 标签：objective-c, ios, uinavigationcontroller

我正在使用 a`UINavigationController`在类之间导航。当我在第一个视图上按下按钮将我发送到第二个视图时，一切正常。但是当我不想从第二个视图返回到第一个视图时，该`viewDidLoad`方法不会被调用，我真的需要这样做。

根据[这篇文章](https://stackoverflow.com/questions/3106511/does-viewdidload-get-called-after-a-popviewcontroller-call)，我应该以某种方式将我的观点设置为，`nil`但我不确定在哪里或如何做到这一点。这是我用来返回第一个视图的代码：

```
NewSongController *nsContr = [[NewSongController alloc] initWithNibName:@"mNSController" bundle:nil];
[self.navigationController popViewControllerAnimated:YES];
[nsContr release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:56:07.103

您的代码不正确。

你不需要实例化你的第一个控制器来弹出它。它已经存在。

viewDidLoad 只会在您第一次加载 viewController 时运行（即当您推送到它时）。当您推送到其他控制器时，它们会被放入堆栈（想象一堆卡片）。当您将另一张卡片推入堆栈时，其下方的卡片已经存在。

当你弹出它就像从堆栈中取出一张卡片一样。但是下面的卡已经存在，因此不需要再次加载。它所做的只是运行 viewWillAppear。

您需要做的就是弹回...

```
[self.navigationController popViewControllerAnimated:YES]; 
```

而已。

删除有关 NewSongController 的内容（如果这是您要返回的内容）。

然后在 NewSongController 函数中`- (void)viewWillAppear:animated;`放入你想要运行的代码，当你回到它时。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:51:03.410

您的第一个视图已加载并被推送到导航堆栈上。在不完全理解将视图设置为 nil 将如何影响行为的情况下，不要试图弄乱堆栈上的内容。

无论您在 viewDidLoad 上做什么，在 viewWillAppear 或 viewDidAppear 中执行都会给您想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:51:55.063

viewDidLoad 不会出现，因为它已经存在于导航堆栈中。由于您要返回堆栈，因此您希望在 viewWillAppear 或 viewDidAppear 中拥有要触发的代码，该代码在从一个视图控制器弹出到其下方的视图控制器时执行。

# ios - ParseKit：包含反斜杠的语法的断言失败

> ID：12517177
> 
> 赞同：2
> 
> 时间：2012-09-20T16:47:59.963
> 
> 标签：ios, parsing, parsekit

我正在玩与 ParseKit 捆绑在一起的 DemoApp，但我遇到了一个奇怪的问题。我创建了这个语法：

```
 @start = tag; tag = '{' Word ';' Word '}'; 
```

它会解析如下句子：

```
{foo;bar} 
```

正好。当我将语法稍微更改为：

```
@start = tag; tag = '{' Word '\' Word '}'; 
```

这会导致应用程序崩溃。ParseKit 似乎不喜欢这个`\`令牌。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:52:05.293

[ParseKit](http://parsekit.com)的开发者在这里。

很好的例子！您在 ParseKit 中发现了一个与引号字符串中的转义反斜杠相关的错误。我已经解决了这个问题。请从谷歌代码更新到[主干的 HEAD](http://code.google.com/p/parsekit/)。

但是，这也是您的示例语法中的一个问题。您需要转义引用字符串中的反斜杠。否则它将转义“关闭报价”。所以改成这样：

```
@start = tag; tag = '{' Word '\\' Word '}'; 
```

# makefile - 如何将值附加到makefile中变量的开头？

> ID：12517184
> 
> 赞同：0
> 
> 时间：2012-09-20T16:48:30.403
> 
> 标签：makefile

我有一个名为的文件夹`code/`，其中有几个`.cpp`文件，所有文件都需要编译成它们的`.o`版本并放入`object/`文件夹中。我在定义正确的变量名时遇到了一些问题......

首先，我定义了一些路径：

```
OBJPATH=object#All compiled .o files need to be placed here.
CODEPATH=code#All .cpp and .hpp header files reside here. 
```

然后，我尝试从 CODEPATH 中提取所有文件名：

```
SRC=$(wildcard $(CODEPATH)/*.cpp) 
```

然后，SRC 的值类似于`code/A.cpp code/B.cpp code/C.cpp`。我想去掉`code`前缀，最后用 替换它`$(OBJPATH)`，结果为`object/`. 我最初尝试过这个：

```
TMP=$(SRC:.cpp=.o)
OBJ=$(TMP:$(CODEPATH)=$(OBJPATH)) 
```

但是，事实证明，这不起作用，因为该`$(var:a=b)`功能只会替换变量末尾的字符串，而不是任意点。

如果我能找到摆脱`code/`前缀的方法，我的问题就会消失，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:19:27.493

您可以使用模式匹配替换（但这可能不是 GNU make 所称的）：

```
OBJ=$(TMP:$(CODEPATH)/%=$(OBJPATH)/%) 
```

您还应该能够一步完成，无需中间`TMP`：

```
OBJ=$(SRC:$(CODEPATH)/%.cpp=$(OBJPATH)/%.o) 
```

# ember.js - 在 Ember 中，使用路由器，我如何将应用程序视图加载到现有的 html 元素（如 div）中

> ID：12517191
> 
> 赞同：0
> 
> 时间：2012-09-20T16:49:00.667
> 
> 标签：ember.js, ember-router

> **可能重复：**
> [如何控制 Ember.js 将呈现的应用程序模板附加到何处？](https://stackoverflow.com/questions/12321145/how-do-i-control-where-ember-js-appends-the-rendered-application-template)

我有一个现有的应用程序（不是在 ember 中），我正在逐页转换它。所以在过渡期间，我需要能够将 ember 应用程序加载到现有应用程序上的某个容器中，并使其正常运行，例如接受事件等。

[做了一个小demo](http://jsfiddle.net/xFWgj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:41:44.653

```
App = Em.Application.create({
  rootElement: '#emberPage'
}); 
```

请记住`Ember.EventDispatcher`，只会在该根元素内部侦听，因此请记住，如果在转换期间您试图让 ember 响应页面非 ember 部分的点击。

# javascript - jQuery Mootools 不工作 - 尝试了一些技巧

> ID：12517193
> 
> 赞同：0
> 
> 时间：2012-09-20T16:49:14.553
> 
> 标签：javascript, jquery, mootools

我在让 JQuery 与 Mootools 一起工作时遇到问题，并且我已经尝试了几乎所有解决冲突的方法，所以我认为我只是做错了，并没有意识到这一点。

这是没有列出库的代码：

```
 <script type="text/javascript">
    jQuery.noConflict();
    $(document).ready(function() {
        $('.slideshow').cycle({
            fx: 'fade' // choose your transition type, ex: fade, scrollUp,         shuffle, etc...
        });
    })(jQuery);

    <script type="text/javascript">

    (function($){
    window.addEvent('domready', function() {

      var status = {
        'true': 'HIDE',
        'false': ''
       };

      var myVerticalSlide = new Fx.Slide('vertical_slide').hide();

        $('v_toggle').addEvent('click', function(event){
        event.stop();
        myVerticalSlide.toggle();
        });

      myVerticalSlide.addEvent('complete', function() {
       $('vertical_status').set('text', status[myVerticalSlide.open]);
          });

            });
            })(document.id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:00:54.523

我对 mootools 一无所知，但它们都使用 $ 标识符。我相信您需要将 $ 重新分配给其中一个。

```
<script type="text/javascript" charset="utf-8">
    var $j = jQuery.noConflict();
</script> 
```

所以现在当你想使用 jQuery 时

```
$j('selector').show(); 
```

您使用与之前用于 Mootools 的语法相同的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:02:47.280

使用 jQuery 而不是 $

```
jQuery('.slideShow') 
```

$ 是对 jQuery 的引用，因此它们可以互换

# c# - 在 C# 行中使用子字符串

> ID：12517197
> 
> 赞同：-7
> 
> 时间：2012-09-20T16:49:33.117
> 
> 标签：c#, split, substring

我在使用 substring 方法时遇到问题，收到此错误。

> “索引和长度必须引用字符串中的位置。” “参数名称：长度”

```
string[] nombre = item.Split(new char[]{' '});
this.listBox5.Items.Add(nombre[0].Substring(0,2).ToUpper()+nombre[1].Substring(0,1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:53:09.073

这意味着您传递给的值`Substring`对于调用它们的字符串无效。例如：

```
string s = "hello";

string x = s.Substring(0, 1); // <-- This is fine (returns "h")
string y = s.Substring(1, 3); // <-- Also fine (returns "ell")
string z = s.Substring(5, 3); // <-- Throws an exception because 5 is passed
                              //     the end of 's' (which only has 5 characters) 
```

顺便说一句，我看到了很多：

```
item.Split(new char[]{' '}) 
```

我认为人们对`Split`方法的签名感到困惑。以下内容就足够了：

```
item.Split(' ') 
```

# c - 是否有 C 语言中的命令可以检查用户是否输入了输入而不等待输入

> ID：12517198
> 
> 赞同：0
> 
> 时间：2012-09-20T16:49:45.437
> 
> 标签：c

例如，用户可以输入`l`s 或`ls command`. 该命令可能不会每次都出现。如何检查用户是否输入了命令？的情况下`scanf()`，如果命令存在，程序可以正常工作，但如果命令不存在，那么它将等待输入。我不希望程序等待这个输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:03:33.337

[select](http://linux.die.net/man/2/select)可用于此目的。因此，您可以在进行（阻塞）读取之前查询标准输入（超时或非阻塞），如果有要读取的内容。

> select() 和 pselect() 允许程序监视多个文件描述符，等待一个或多个文件描述符“准备好”用于某种类型的 I/O 操作（例如，可能的输入）。如果可以在没有阻塞的情况下执行相应的 I/O 操作（例如 read(2)），则认为文件描述符已准备就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:03:17.810

所有标准 C 库输入函数都是面向行的，这意味着它们要等到用户输入某些内容，或者至少按下回车键。

如果您想以比这更多的交互方式响应输入，那么您将需要使用标准库之外的东西。您所拥有的确切内容将取决于您正在编码的平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:06:20.620

不要使用`scanf`. 相反，用于`fgets`读取整行。*然后*处理该行，例如标记它 ( `strtok`) 并计算它包含多少个单词：

```
char buf[1024];

fgets(buf, sizeof buf, stdin);    // returns after user presses Enter
                                  // (should check that this is not NULL)
char * p = strtok(buf, " \t\n");
while (p)
{
    // p now points to a token
    p = strtok(NULL, " \t\n");
} 
```

# javascript - 将字符串变量的内容作为javascript中的代码行执行？

> ID：12517199
> 
> 赞同：1
> 
> 时间：2012-09-20T16:49:48.667
> 
> 标签：javascript, jquery, html, css

我有类似的东西

> " **_onmouseover** " : "this.className=this.className.replace('hover', '')";

我正在尝试执行它

> buttonObject.onmouseover = function() { window [ this.someObject._ **_onmouseover ] ()** ; };

而且我不知道这怎么可能。

让我告诉你们我的情景。我正在创建这个插件来在 jquery 对话框中生成四种类型的对话消息。那些是“警告”、“错误”、“注意”和“确认”。因此，假设 dom 中有 4 个跨度应该触发这四个。

```
<span id='DialogueWarning'> Warning </span> 
<span id='DialogueError'> Error </span> 
<span id='DialogueNote'> Note </span> 
<span id='DialogueConfirm'> Confirm </span> 
```

现在让我们点击一​​下来显示对话

```
jQuery('#DialogueWarning').click(function(){

        var dialogue = new Dialogue({
            "type":"Warning",
            "message":"Are you sure you want to close this window without saving your changes?",
            "buttons":
            [
                {   
                    "text":"Close without saving", 
                    "_onmouseover": "this.className+=' hover'",
                    "_onmouseout":"this.className=this.className.replace(' hover', '')",
                    "bClass":"e_customButton"
                },

                {   
                    "text":"Don't Close",
                    "_onmouseover": "this.className+=' hover'",
                    "_onmouseout":"this.className=this.className.replace(' hover', '')",
                    "bClass":"e_customButton"
                }
            ],
            "closeOnBackgroundClick" : true
        });
    }); 
```

请参阅“_onmouseover”和 _onmouseout 的东西，我需要这些。有什么办法可以让我通过另一种方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:56:33.423

如果您需要`eval`. 我敢打赌您的应用程序设计中存在一些问题。
例如，您**可以避免这样的事情：**

```
// ...
var eventHandlers = {
    "_onmouseover" : "this.className=this.className.replace(' hover', '')"
};

// ...

eval(eventHandlers._onmouseover); 
```

就像这样做

```
var eventHandlers = {
    _onmouseover: function(e) {
        this.className=this.className.replace(' hover', '');
    }
};

buttonObject.onmouseover = eventHandlers._onmouseover; 
```

一些要阅读的文章：

[#1](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)
[#2](http://www.javascripttoolbox.com/bestpractices/#eval)
[#3](http://javascript.about.com/library/bleval.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:58:21.693

您可以使用`Function`. [演示](http://jsfiddle.net/CqCYp/2/)

```
buttonObject.onmouseover = Function(window [ this.someObject.__onmouseover ] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:58:58.783

为什么它首先必须是一个字符串？

如果你有类似的东西：

```
var someObject = {
   _onmouseover: function() {
      this.className = this.className.replace(' hover', '');
   }
} 
```

你可以像这样执行它：

```
buttonObject.onmouseover = someObject.__onmouseover; 
```

如果您需要`this`成为按钮对象，您可以执行以下操作：

```
buttonObject.onmouseover = function() {
   someObject.__onmouseover.call( buttonObject );
}; 
```

# algorithm - 找到集合中每个点的最近点

> ID：12517204
> 
> 赞同：4
> 
> 时间：2012-09-20T16:50:06.773
> 
> 标签：algorithm

我有一组 n 形式的点`(X,Y)`，我想找到最接近集合中每个点的点，另一个点也属于同一个集合。

朴素的算法很简单，`O(n^2)`但我想做更好的事情。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T17:15:53.940

[您只需要 O(N) 时间即可使用Delaunay triangulation](http://en.wikipedia.org/wiki/Delaunay_triangulation)获得最接近每个点的点。只需从每个点开始选择一条长度最短的边。

并且可以在 O(N log N) 时间内找到 Delaunay 三角剖分。

# android - onTouchEvent 不起作用

> ID：12517205
> 
> 赞同：5
> 
> 时间：2012-09-20T16:50:10.240
> 
> 标签：android, touch-event

我正在使用`MapView`. 我需要对用户的触摸事件做出反应。我尝试在 `onTouchEvent`使用中处理一些操作`dispatchTouchEvent`。但这`onTouchEvent`不叫！当我添加此代码时`dispatchTouchEvent`：

```
 MarkerOverlay myMarker = new MarkerOverlay(marker,edTxtAlarmClockName.getText().toString());        
      mapView.getOverlays().add(myMarker);
      mapView.invalidate(); 
```

`onTouchEvent`叫做。为什么会这样以及如何描述`overlay`处理程序？

```
public class MainActivity extends MapActivity implements OnTouchListener{

private MapController mapController;
private MapView mapView;
private LocationManager locationManager;
private MyLocationOverlay myLocationOverlay;
private Context context;
public GeoPoint lastClickedPoint;
Dialog dialog;
EditText edTxtAlarmClockName;
ToggleButton tbOnOffAlarmClock;
boolean reClick ;
private int lastTouchX, lastTouchY; 
private boolean hasMoved = false; 
Button btnOk;
Button btnCancelDelete;
Button btnAlarmClockStop;
public int distance=50;
private int indexOfSelectedOverlay;

public void onCreate(Bundle bundle) {
  super.onCreate(bundle);

  setContentView(R.layout.activity_main);   
  context = MainActivity.this;

  // Configure the Map
  mapView = (MapView) findViewById(R.id.mapview);
  mapView.setBuiltInZoomControls(true);
  mapView.setStreetView(true);
  mapView.setSatellite(true);
  mapView.setOnTouchListener(this);

  mapController = mapView.getController();
  mapController.setZoom(15); 

  locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
  locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 10, geoupdate);

  myLocationOverlay = new MyLocationOverlay(this, mapView);
  myLocationOverlay.disableCompass();
  myLocationOverlay.enableMyLocation();
  mapView.getOverlays().add(myLocationOverlay);
  myLocationOverlay.runOnFirstFix(new Runnable() {
  public void run() {
    mapView.getController().animateTo(myLocationOverlay.getMyLocation());
    mapView.setBuiltInZoomControls(true);
  }
});

final Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
dialog  = new Dialog(context);
dialog.setContentView(R.layout.custom1);
dialog.setTitle(R.string.str_new_alarm);
tbOnOffAlarmClock=(ToggleButton)dialog.findViewById(R.id.toggleButton1);
edTxtAlarmClockName = (EditText) dialog.findViewById(R.id.textView1);
edTxtAlarmClockName.setText(R.string.str_name);
btnOk = (Button) dialog.findViewById(R.id.btn_ok);
btnCancelDelete = (Button) dialog.findViewById(R.id.btn_cancel);
btnOk.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
         MarkerOverlay myMarker;
        if (reClick) //click on the overlay
        {//search and rename
             myMarker=(MarkerOverlay)mapView.getOverlays().get(indexOfSelectedOverlay);             
             mapView.getOverlays().remove(indexOfSelectedOverlay);
             myMarker.setName(edTxtAlarmClockName.getText().toString());
             mapView.getOverlays().add(myMarker);  
             mapView.invalidate();
        }
        else
        {//creat overlay
         myMarker = new MarkerOverlay(drawable,edTxtAlarmClockName.getText().toString()); 
         myMarker.setName(edTxtAlarmClockName.getText().toString());
         if (tbOnOffAlarmClock.isChecked()) {
             myMarker.active=true;
         } else {
             myMarker.active=false;
         }
         mapView.getOverlays().add(myMarker);  
         mapView.invalidate();  
        }
        dialog.dismiss();           
    }
});

btnCancelDelete.setOnClickListener(new View.OnClickListener() {     
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
         OverlayItem item; 
         Point itemPoint,currentPoint;
         MarkerOverlay myOverlay;
        if (reClick) //delete marker
        {
            Log.d("debug","delete");
             mapView.getOverlays().remove(indexOfSelectedOverlay);
             mapView.invalidate();

        }
        //else CANCEL
        dialog.dismiss();   
    }
});

}

@Override
protected boolean isRouteDisplayed() {
  return false;
}

@Override
protected void onDestroy() {
    super.onDestroy();
    locationManager.removeUpdates(geoupdate);
}

@Override
protected void onResume() {
   super.onResume();
   myLocationOverlay.enableMyLocation();
   myLocationOverlay.enableCompass();
}

@Override
protected void onPause() {
  super.onPause();
  myLocationOverlay.disableMyLocation();
  myLocationOverlay.disableCompass();
}

public class MarkerOverlay extends ItemizedOverlay<OverlayItem>
{

  private Drawable marker = null; 
  private boolean active=true;
  private GeoPoint pointOfOverlay;
  private String customName;
  public  List<OverlayItem> items=new ArrayList<OverlayItem>();;
  public MarkerOverlay(Drawable marker,String name) 
  {
      super(boundCenterBottom(marker));
      this.marker=marker;                 
      OverlayItem item = new OverlayItem(lastClickedPoint, name,"");
      this.pointOfOverlay=lastClickedPoint;
      this.customName=name;
      items.add(item);
      populate();

  }

  public String getName()
  {
      return customName;
  }

  public void setName(String name)
  {
      customName=name;
  }
  public GeoPoint getPoint()
  {
      return pointOfOverlay;
  }

  @Override
  protected OverlayItem createItem(int i) 
  {
    return(items.get(i));
  }

  @Override
  public void draw(Canvas canvas, MapView mapView, boolean shadow) 
  {
    super.draw(canvas, mapView, shadow);
    boundCenterBottom(marker);   
  }

  @Override
  public int size() 
  {
    return(items.size());
  }
 @Override
    public boolean onTouchEvent(MotionEvent motionEvent, MapView mapView) { 
        boolean consumed = super.onTouchEvent(motionEvent,mapView); 
          int action = motionEvent.getAction();
          int size;
            switch (action) { 
            case MotionEvent.ACTION_DOWN: 
                lastTouchX =(int) motionEvent.getX(); 
                lastTouchY =(int) motionEvent.getY(); 
                hasMoved = false; 
                break; 
            case MotionEvent.ACTION_MOVE: 
                hasMoved = moved(motionEvent); 

                break; 
            case MotionEvent.ACTION_UP:         
                if (!moved(motionEvent)) 
                {
                 size = items.size();
                  if (size > 0)
                  {
                    OverlayItem item = items.get(size - 1);
                    Point p1 = mapView.getProjection().toPixels(item.getPoint(), null);
                      if (hitTest(item, marker, lastTouchX - p1.x, lastTouchY - p1.y))
                     {
                          dialog.setTitle(item.getTitle());
                          btnCancelDelete.setText(R.string.str_delete);
                          dialog.show();
                          reClick=true;
                     }
                     else
                     {
                          edTxtAlarmClockName.setText(R.string.str_name);
                          btnCancelDelete.setText(R.string.str_cancel);
                          dialog.show();                             
                          lastClickedPoint = mapView.getProjection().fromPixels((int) motionEvent.getX(), (int) motionEvent.getY());
                          reClick=false;
                     }
                     populate();
                    return true;
                  }                        
                  else
                  {
                      edTxtAlarmClockName.setText(R.string.str_name);
                      dialog.setTitle(R.string.str_new_alarm);
                      btnCancelDelete.setText(R.string.str_cancel);
                      dialog.show();                             
                      lastClickedPoint = mapView.getProjection().fromPixels((int) motionEvent.getX(), (int) motionEvent.getY());
                      reClick=false;
                  }
                  populate();
                  return true;
                }
            } 

            return false||consumed;
    } 

    private boolean moved(MotionEvent evt) { 
        Log.d("debug", "ontouchevent move");
        return hasMoved || 
            Math.abs(evt.getX() - lastTouchX) > 20.0 || 
            Math.abs(evt.getY() - lastTouchY) > 20.0; 
    } 
}

@Override
public boolean onTouch (View v, MotionEvent event)
{
      int action = event.getAction();

      if (action == MotionEvent.ACTION_UP)
      { 
          lastClickedPoint= mapView.getProjection().fromPixels( (int) event.getX(), (int) event.getY());
          return true;
      }
      return false;  

}
@Override
public boolean dispatchTouchEvent(MotionEvent motionEvent) {
 int action = motionEvent.getAction();
 Drawable marker = getResources().getDrawable(R.drawable.ic_launcher);
 switch(action) {
   case MotionEvent.ACTION_UP:
      MarkerOverlay myMarker = new MarkerOverlay(marker,edTxtAlarmClockName.getText().toString());        
      mapView.getOverlays().add(myMarker);
      mapView.invalidate();
   break;
  }
  return super.dispatchTouchEvent(motionEvent);
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:21:39.087

我认为您应该在将 MapView 作为全局变量的同时将 onTouchEvents 的过程添加到 on touch 中，然后您可以在覆盖的 onTOuch 事件中调用 Mapview 变量。

据我所见，没有启动 onTouchEvents 的连接

# ruby-on-rails-3 - 如何在 Rails 3 中使用章鱼宝石

> ID：12517212
> 
> 赞同：0
> 
> 时间：2012-09-20T16:50:37.197
> 
> 标签：ruby-on-rails-3

我在我的 rails3 应用程序中使用章鱼 gem。我在迁移文件中添加了以下内容，

```
class CreateUsers < ActiveRecord::Migration
  using(:master, :slave1)
  def self.up
    create_table :users do |t|
      t.string :name
      t.integer :age

      t.timestamps
    end
  end

  def self.down
    drop_table :users
  end
end 
```

下面是我的 shards.yml 文件

```
## YAML Template.
---
octopus:
  environments:
    - development
  development:
    slave1:
      host: localhost
      adapter: mysql
      database: Octopus_development 
```

这里slave1数据库将由rails创建还是我们需要创建？谁能解释一下？我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:54:29.783

您需要在运行迁移之前创建 DB slave1。然而，迁移将在 master 和 slave1 上运行。

此外，如果要使用复制，您可能必须将 slave1 设置为 master 的副本。如果它仅用于分片目的，则不需要复制设置。

# java - 如何设置对话框的宽度相对于其标题的宽度？

> ID：12517214
> 
> 赞同：2
> 
> 时间：2012-09-20T16:50:42.907
> 
> 标签：java, swing, width, jframe, jdialog

我有一个 JDialog，里面只有几个组件。我想让对话框尽可能小。目前我正在使用 pack()。这会产生意想不到的效果，即大大减小了对话框的宽度，以至于标题不再完全在视图中。我希望对话框的宽度始终足够大，以使标题始终完全可见。

我正在使用摆动。我意识到标题栏外观/字体是由操作系统决定的。我宁愿坚持摆动，所以目前我计划根据 JLabel 的字体计算标题字符串的宽度。然后我将我的一个组件的最小宽度设置为等于该值。

有没有更好的方法来打包 JDialog 同时保持其标题可见？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:38:15.357

```
 public static void adjustWidthForTitle(JDialog dialog)
{
    // make sure that the dialog is not smaller than its title
    // this is not an ideal method, but I can't figure out a better one
    Font defaultFont = UIManager.getDefaults().getFont("Label.font");
    int titleStringWidth = SwingUtilities.computeStringWidth(new JLabel().getFontMetrics(defaultFont),
            dialog.getTitle());

    // account for titlebar button widths. (estimated)
    titleStringWidth += 110;

    // set minimum width
    Dimension currentPreferred = dialog.getPreferredSize();

    // +10 accounts for the three dots that are appended when the title is too long
    if(currentPreferred.getWidth() + 10 <= titleStringWidth)
    {
        dialog.setPreferredSize(new Dimension(titleStringWidth, (int) currentPreferred.getHeight()));

    }
} 
```

编辑：在阅读链接中的垃圾神帖子后，我调整了我的解决方案以覆盖 getPreferredSize 方法。我认为这种方式比我之前的静态方法要好。使用静态方法，我不得不在 pack() 三明治中调整它。包（），调整（），包（）。这个 wasy 不需要对 pack() 进行特殊考虑。

```
JDialog dialog = new JDialog()
    {
        @Override
        public Dimension getPreferredSize()
        {
            Dimension retVal = super.getPreferredSize();

            String title = this.getTitle();

            if(title != null)
            {
                Font defaultFont = UIManager.getDefaults().getFont("Label.font");
                int titleStringWidth = SwingUtilities.computeStringWidth(new JLabel().getFontMetrics(defaultFont),
                        title);

                // account for titlebar button widths. (estimated)
                titleStringWidth += 110;

                // +10 accounts for the three dots that are appended when
                // the title is too long
                if(retVal.getWidth() + 10 <= titleStringWidth)
                {
                    retVal = new Dimension(titleStringWidth, (int) retVal.getHeight());
                }
            }
            return retVal;
        }

    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:24:49.613

1）`FontMetrics`用于找出标题的宽度

2) 向这个值添加一个代表窗口图标和 X（关闭）按钮的数字（你应该猜到了）。

3) 使用上述值设置对话框的宽度。

您找不到所需的确切宽度尺寸，但这是一种很好的猜测方法。

# java - 使用 Quartz SendMailJob 的示例

> ID：12517219
> 
> 赞同：0
> 
> 时间：2012-09-20T16:50:56.197
> 
> 标签：java, jakarta-mail, quartz-scheduler

我正在使用 Quartz 调度程序中的 SendMailJob 类寻求帮助。我一直找不到任何有用的文档，也无法找出实现它以从 Web 应用程序按需发送批量邮件的“正确”方法（这样该过程不依赖于 servlet 继续存在于电子邮件作业的整个生命周期中）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T13:43:57.977

这个类提供了发送邮件的非常基本的选项。您应该更好地重写您自己的类，该类将与您的应用程序更加集成。似乎与`SendMailJob`生产类一样作为示例存在......

无论如何，如果您想使用它，您必须在 JobData 映射中填充以下参数才能发送邮件。如果您需要更多详细信息，请查看该类的源代码。

```
/**
 * The host name of the smtp server. REQUIRED.
 */
public static final String PROP_SMTP_HOST = "smtp_host";

/**
 * The e-mail address to send the mail to. REQUIRED.
 */
public static final String PROP_RECIPIENT = "recipient";

/**
 * The e-mail address to cc the mail to. Optional.
 */
public static final String PROP_CC_RECIPIENT = "cc_recipient";

/**
 * The e-mail address to claim the mail is from. REQUIRED.
 */
public static final String PROP_SENDER = "sender";

/**
 * The e-mail address the message should say to reply to. Optional.
 */
public static final String PROP_REPLY_TO = "reply_to";

/**
 * The subject to place on the e-mail. REQUIRED.
 */
public static final String PROP_SUBJECT = "subject";

/**
 * The e-mail message body. REQUIRED.
 */
public static final String PROP_MESSAGE = "message";

/**
 * The message content type. For example, "text/html". Optional.
 */
public static final String PROP_CONTENT_TYPE = "content_type"; 
```

# c# - 如何在客户端和服务器端使用 selectedIndexChanged 下拉列表

> ID：12517227
> 
> 赞同：23
> 
> 时间：2012-09-20T16:51:13.300
> 
> 标签：c#, javascript, asp.net, drop-down-menu

如何在客户端和服务器端的 asp.net 下拉列表中使用 selectedIndexChanged？

在客户端我想调用javascript函数！

```
<script type="text/javascript">
function changeCursor() {
    document.body.style.cursor="progress";
}
</script>

<asp:DropDownList ID="DropDownSubject" runat="server" DataTextField="Word" AutoPostBack="True" OnSelectedIndexChanged="SelectedChange">
</asp:DropDownList> 
```

SelectedChange 是客户端函数的名称！

感谢帮助！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-20T16:54:39.953

在下拉列表的 onchange 事件中添加您的客户端函数名称，如下所示：

```
<asp:DropDownList ID="DropDownSubject" runat="server" DataTextField="Word" 
      AutoPostBack="True" OnSelectedIndexChanged="SelectedChange" 
      onchange="changeCursor()">
</asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-20T16:55:15.063

在 HTML (.aspx) 中

```
<asp:DropDownList ID="DropDownSubject" runat="server" DataTextField="Word" AutoPostBack="True" 
         OnSelectedIndexChanged="SelectedChange" onchange="YourChangeFun(this);">
</asp:DropDownList> 
```

在 JavaScript 中

```
<script type="text/javascript">
      function YourChangeFun(ddl)
      {
         alert(ddl.selectedIndex);
      }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:31:29.137

首先更改 autopostback="false" 并给出 onchange="js function()" 并删除选定的索引更改事件。

# java - SWT - 表查看器 - 隐藏列并从列中获取值

> ID：12517230
> 
> 赞同：3
> 
> 时间：2012-09-20T16:51:21.833
> 
> 标签：java, swt, tableviewer

我正在尝试从表中的数据创建一个数组列表。我需要从可见列中获取值，但我还需要从表中不可见的列中获取值。将 SWT 与表查看器一起使用，我不知道如何不显示表中的列。我也不知道如何通过指定列名从表中提取数据。

我一直使用 Swing，所以我一直使用 Table Model Class。在 Swing 中，创建列、隐藏它们并从中获取数据非常简单。

这就是我在之前的 Swing 项目中的做法。

在我的表**模型类**中：

```
public String getColumnName(int column) {
  String s = null;

  switch (column) {
     case ITEMID_COL: {
        s = "ItemId";
        break;
     } 
```

然后`getValueAt()`

```
 public Object getValueAt(int row, int column) {
  Object o = null;

  try {
     switch (column) {
        case ITEMID_COL: {
           o = rds.get(row).rev.getItem().getStringProperty("item_id");
           break;
        } 
```

因此，当我需要任何其他班级的表格中的数据时，我所要做的就是

```
Object item_id = SingletonSelectTable.getInstance().getValueAt(i, SingletonSelectTable.getInstance().ITEMID_COL); 
```

我还可以通过设置`MAX_COLUMNS`.

**问题**：

1.  我需要学习如何使用表格查看器向表格中添加不会显示但仍包含值的列。

2.  我需要学习如何访问表中的值，这样我就可以从列中创建一个可见和不可见数据的数组。

3.  这甚至可以使用表查看器吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T17:38:28.847

好的：

要隐藏 a `TableColumn`，您基本上可以将其宽度设置为`0`并防止调整大小。通过将宽度设置为某个值`>= 0`并启用调整大小来取消隐藏它。

由于您将 a`TableViewer`与 ModelProvider 一起使用，因此当您想要访问内容时隐藏列并不重要。只需从模型中获取对象并从中获取信息。

这是一个可以隐藏/取消隐藏列并仍然打印当前选定人员的示例：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(2, false));

    final TableViewer viewer = new TableViewer(shell, SWT.READ_ONLY);

    // First column is for the name
    TableViewerColumn col = createTableViewerColumn("Name", 100, 0, viewer);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            if(element instanceof Person)
            {
                System.out.println("1");
                return ((Person)element).getName();
            }
            return "";
        }
    });

    // First column is for the location
    TableViewerColumn col2 = createTableViewerColumn("Location", 100, 1, viewer);
    col2.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            if(element instanceof Person)
            {
                System.out.println("2");
                return ((Person)element).getLocation();
            }
            return "";
        }
    });

    final Table table = viewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);
    GridData data = new GridData(SWT.FILL, SWT.FILL, true, true);
    data.horizontalSpan = 2;
    table.setLayoutData(data);

    /* This button will hide/unhide the columns */
    Button button1 = new Button(shell, SWT.PUSH);
    button1.setText("Hide / Unhide");

    button1.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            for(final TableColumn column : table.getColumns())
            {
                if(column.getWidth() == 0)
                {
                    column.setWidth(100);
                    column.setResizable(true);
                }
                else
                {
                    column.setWidth(0);
                    column.setResizable(false);
                }
            }
        }
    });

    /* This button will print the currently selected Person, even if columns are hidden */
    Button button2 = new Button(shell, SWT.PUSH);
    button2.setText("Print");

    button2.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            IStructuredSelection selection = (IStructuredSelection) viewer.getSelection();
            Person person = (Person) selection.getFirstElement();

            System.out.println(person);
        }
    });

    viewer.setContentProvider(ArrayContentProvider.getInstance());

    final Person[] persons = new Person[] { new Person("Baz", "Loc"),
            new Person("BazBaz", "LocLoc"), new Person("BazBazBaz", "LocLocLoc") };

    viewer.setInput(persons);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

private static TableViewerColumn createTableViewerColumn(String title, int bound, final int colNumber, TableViewer viewer) {
    final TableViewerColumn viewerColumn = new TableViewerColumn(viewer, SWT.NONE);
    final TableColumn column = viewerColumn.getColumn();
    column.setText(title);
    column.setWidth(bound);
    column.setResizable(true);
    column.setMoveable(false);

    return viewerColumn;
}

public static class Person {
    private String name;
    private String location;

    public Person(String name, String location) {
        this.name = name;
        this.location = location;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public String toString()
    {
        return name + " " + location;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T15:42:57.497

唯一需要注意的是，将列宽设置为`0`不会阻止调用`getText()`该列的标签提供程序的方法。如果必须避免此调用（例如，它很耗时），则解决方案是`dispose()`树列。（要再次显示列，必须重新创建。）

# google-apps-script - 在对象日历中找不到函数 createEvent（或 createAllDayEvent）。（谷歌电子表格应用程序）

> ID：12517231
> 
> 赞同：1
> 
> 时间：2012-09-20T16:51:24.550
> 
> 标签：google-apps-script

好的，这是我的导致错误的代码。这似乎只是我尝试添加全天事件的行。我认为这是一个日期格式问题，但我在它下面注释掉的那行是为了测试它而创建的，它导致了同样的错误。所以我很难过。需要更改什么来纠正错误，或者错误的实际含义是什么。

```
 function cal1() {
      var sheet = SpreadsheetApp.getActiveSheet();
      var startRow = 2;  // First row of data to process
      var numRows = 300;   // Number of rows to process
      var dataRange = sheet.getRange(startRow, 1, numRows, 26); //What data will be used
      var data = dataRange.getValues();
      var cal = CalendarApp.getCalendarsByName("Production Schedule"); //Gets the correct calendar
    for (i in data) {
      var row = data[i];
      var title = row[4];  // Column with Title
      var desc = row[3];       // Column with Description
      var date = row[8];   //Column with Date
      var loc = row[5];    //Column with Location
      cal.createAllDayEvent(title, date, {description:desc,location:loc});
      //cal.createEvent("Test", new Date("3/10/2010 14:30:00"), new Date("3/10/2010 14:30:00"));  
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:53:59.180

```
 var cal = CalendarApp.getCalendarsByName("Production Schedule"); //Gets the correct calendar 
```

这为您提供了一组具有该名称的日历（因为日历可以共享名称，因此可以有多个）。尝试这个：

```
 var cal = CalendarApp.getCalendarsByName("Production Schedule")[0]; //Gets the correct calendar 
```

这将为您提供第一个（可能只有）具有该名称的日历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:31:58.373

如果您不确定“日期”变量实际上是您可以使用的日期

```
 cal.createAllDayEvent(title, new Date(date), {description:desc,location:loc}); 
```

也就是说，很容易用记录器检查

```
Logger.log(date) 
```

应以形式返回日期值`Tue Sep 18 03:00:00 PDT 2012`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:20:04.917

我有同样的问题`getCalendarsByName`。相反，我使用`getCalendarById`它并很好地解决了。我认为日历名称可能会引起一些混乱和错误。

您可以在日历设置中找到您的日历 ID，例如：`123xyz@group.calendar.google.com`

脚本将如下所示：

```
var cal = CalendarApp.getCalendarById("123xyz@group.calendar.google.com"); 
```

# vim - 乳胶的 Vim 配色方案：引用与数学

> ID：12517236
> 
> 赞同：2
> 
> 时间：2012-09-20T16:51:52.647
> 
> 标签：vim, latex

这是一个非常具体的问题。我发现

```
hi Special guifg=.... 
```

vim 颜色文件中的行控制两种数学模式的颜色，例如

```
$whatever$ 
```

以及引文名称的颜色，例如

```
\cite{whatever} 
```

如果我更改该特殊颜色，则两个代码段中的任何内容都会更改颜色。但是，我见过一些 vim 配色方案，其中这两种颜色是不同的。我希望引用和章节标签的颜色，如 \ref{whatsinhere} 和 \cite{whatsinhere} 与 $whatsinhere$ 不同。有人可以告诉我该怎么做吗？我知道这是可以做到的；下页的colorscheme wuye有这样的功能，但我找不到在哪里！[http://vimcolorschemetest.googlecode.com/svn/html/index-tex.html](http://vimcolorschemetest.googlecode.com/svn/html/index-tex.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:05:04.443

此命令回显光标下单词的语法组：

```
" shows syntaxic group of the word under the cursor
command! SynStack call SynStack()<CR>
function! SynStack()
  if !exists("*synstack")
    return
  endif
  echo map(synstack(line('.'), col('.')), 'synIDattr(v:val, "name")')
endfunc 
```

如果你好奇，这些值是在你的 Latex 语法文件中定义的。在基于 Unix 的机器上，您可以在此处找到此文件：`/usr/share/vim/vim7x/syntax/tex.vim`.

假设语法组是`SomeTexKeyword`，您可以在颜色方案中添加一行：

```
hi SomeTexKeyword ctermbg=... 
```

用你想要的颜色。

# css - 使用 margin:0 auto 时使用浮点数；

> ID：12517238
> 
> 赞同：-3
> 
> 时间：2012-09-20T16:51:55.190
> 
> 标签：css, css-float

我在用着

```
margin:0 auto; 
```

在一个 Div

在那个 Div 里面是另一个 Div

```
float:left;
width:850px; 
```

网页上的 850px 从哪里开始？在中心向外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:00:00.520

内部 div 将放置在外部 div 的左边缘。外部 div 将根据您为其指定的宽度居中。

如果您没有为外部元素指定任何 with ，它将使用默认宽度`auto`，这将使其使用所有可用宽度，并且它根本不会出现居中，因为两侧没有边距。在这种情况下，内部 div 将从主体的左边缘开始（即在主体边距/填充内）。

演示：http: [//jsfiddle.net/Guffa/34ES3/](http://jsfiddle.net/Guffa/34ES3/)

# php - 存储和检索 URL 列表的最佳方法

> ID：12517243
> 
> 赞同：0
> 
> 时间：2012-09-20T16:52:11.617
> 
> 标签：php, mysql

我在一个网站上用 php 和 mysql 组合了一个非常简单的广告服务器。该网站目前有 4 或 5 个包含大量动态内容的静态页面，因此 URL 如下所示： `index.php?pid=1`或`content.php?spec=2`

我想做的是在我的广告表中添加一个字段，以跟踪将要显示广告的页面。

我应该将包含广告的 URL 存储为逗号分隔值的列表吗？

检索此变量后，将值分隔到数组中的最佳方法是什么？

拆分字符串的最佳方法是什么，以便我可以拆分页面名称`$_GET`名称和变量（如使用上面的示例在'index，pid，1'或'content，spec，2'中。）？？

附加信息：例如，医生.php 的结构如下：

*   `doctors.php` 博士专业列表
*   `doctors.php?spec=#`具有特定专业的医生列表
*   `doctors.php?pid=#`一位特定医生的信息

我有几十个专科，几百个医生。我希望能够在特定页面/网址上投放广告，例如`doctors.php?pid=7`

但我也希望能够基于所有具有 ID 为 6 的专业的医生投放广告。这可能是 60 多页，因此单独的表格行没有意义. 如果我需要更改广告上的链接，我不想更改 60 次或搜索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:00:05.120

不要存储为 CSV。

为每个广告/网址组合添加单独的数据库行。

然后检索内容将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:42:54.553

这是我认为会起作用的...

我的广告表将包含三个变量（a、b、c）

如果我在 上放置广告`doctors.php?spec=12`，我将存储以下内容：

*   `a = 'doctors';`
*   `b = 'spec';`
*   `c = '12';`

如果广告要显示在所有专业页面上，我会存储：

*   `a = 'doctors';`
*   `b = 'spec';`
*   `c = NULL;`

如果某物为 NULL，它将简单地指示所有集合。这似乎是一个优雅的解决方案，如果可行，我将发布代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:02:07.253

在简单文件中每行存储一个 URls。比你可以使用 php 函数“file”来读取这个文件作为一个数组。

对于 url 拆分使用[http://php.net/parse_url](http://php.net/parse_url)函数

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-20T17:07:48.717

```
$url = "index.php?pid=1";
$pos = strpos($url, "?");

if ($pos != false) {
  $pieces1 = explode("?", $url);
  $pieces2 = explode("=", $pieces1[1]);
  $array = array($pieces1[0], $pieces2[0], $pieces2[1]);
}else{
  $array = array($url, '', '');
}

print_r($array); 
```

如果您希望此代码适用于 url 中的多个变量，则需要改进此代码，例如：index.php?v=hello&t=world

另外，我没有测试这段代码。我只是写了它没有检查功能等。

# c# - 如何使用 Windows 对话框复制（或删除等）多个文件（或目录）？

> ID：12517254
> 
> 赞同：2
> 
> 时间：2012-09-20T16:52:49.040
> 
> 标签：c#, windows

我的主要问题是：如何在用户能够在中间取消它们的情况下进行文件操作。

我知道我可以使用这样的`Microsoft.VisualBasic.FileIO`命名空间：`FileSystem.DeleteFile(...)`但这只给了我一个文件的选项。我想一起删除许多文件。（复制也是如此……）

注意：即使在复制大文件的过程中，我也需要用户能够在需要时取消操作，而不仅仅是在文件之间。我知道我可以使用非托管代码 (- `CopyFileEx`) 做到这一点，但我正在寻找一种托管方式来做到这一点，无论它是否使用本机 Windows 对话框。

编辑：有人建议我为非托管代码使用“包装器”和“手动”复制和删除（在下面的答案中）。是否有我缺少的内置方式（如 VisualBasic 命名空间的东西 - 但对于多个文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:14:08.650

我知道，就复制方法而言，您可以执行类似的操作，并且使用 Microsoft.VisualBasic 命名空间不会损害您的代码，请查看此链接中的文章

IFileOperation shell 接口，从 Vista 开始可用。[此杂志文章](http://msdn.microsoft.com/en-us/magazine/cc163304.aspx)中提供了此 COM 接口的托管类包装器。

如果还需要在早期版本的 Windows 上运行，请使用现有代码。

![复制带有进度和取消选项的文件](../Images/8758396df965c16b4a8882e38cb8ef2d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:15:43.703

在复制方面，您需要通过以块的形式复制文件来手动执行此操作，并且每次处理块时，您都会检查用户是否设置了取消标志。

```
void CopyStream(Stream in, Stream out) 
{ 
    var buf = new byte[512]; 

    int bytesRead; 
    while((bytesRead = in.Read(buf, 0, buf.Length)) > 0) 
    { 
        out.Write(buf, 0, bytesRead); 
        if(cancelled)
        { 
           // Do you cancel routine
           return; 
        } 
    } 
} 
```

对于删除，最好的办法是一次处理文件删除一个，并执行我上面描述的相同类型的过程。

这样做的好处是无论操作系统如何，它都可以工作。无论文件类型如何，它都可以工作。无论您正在实现什么线程，它都会起作用。

# fork - dup2 阻止 printf，但不阻止 fprintf？

> ID：12517255
> 
> 赞同：0
> 
> 时间：2012-09-20T16:52:55.997
> 
> 标签：fork, pipe, printf, dup2

因此，我为我的操作系统类分配了一项任务，其中我要创建一个与管道连接的进程环，以便在它们之间传递消息。我找到了一些示例代码，我希望根据我的需要调整（或至少理解）这些代码。示例代码（稍作修改）是：

```
/* Program 4.1 */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>

/* Sample C program for generating a unidirectional ring of processes.Invoke this program
 with a command-line arg ument indicating the number of processes on the ring.  Communication
 is done via pipes that connect the standard output of a process to the standard input of
 its successor on the ring.  After the ring is created, each process identifies itself with
 its process ID and the  process ID of its parent.  Each process then exits. */

void main(int argc,  char *argv[ ])
{
int master_pid = getpid();
printf("master pid: %i\n", master_pid);

int   i;             /* number of this process (starting with 1)   */
int   childpid;      /* indicates process should spawn another     */
int   nprocs;        /* total number of processes in ring          */
int   fd[2];         /* file descriptors returned by pipe          */
int   error;         /* return value from dup2 call                */
/* check command line for a valid number of processes to generate */
if ( (argc != 2) || ((nprocs = atoi (argv[1])) <= 0) ) {
    fprintf (stderr, "Usage: %s nprocs\n", argv[0]);
    exit(1);
}
/* connect std input to std output via a pipe */
if (pipe (fd) == -1) {
    perror("Could not create pipe");
    exit(1);
}
printf("%s\n", "test");
//this section is blocking printf()?
if ((dup2(fd[0], STDIN_FILENO) == -1) ||
    (dup2(fd[1], STDOUT_FILENO) == -1)) {
    perror("Could not dup pipes");
    exit(1);
}
printf("%s\n", "test");

if ((close(fd[0]) == -1) || (close(fd[1]) == -1)) {
    perror("Could not close extra descriptors");
    exit(1);
}
/* create the remaining processes with their connecting pipes */
for (i = 1; i < nprocs;  i++) {
    if (pipe (fd) == -1) {
        fprintf(stderr,"Could not create pipe %d: %s\n",
                i, strerror(errno));
        exit(1);
    }
    if ((childpid = fork()) == -1) {
        fprintf(stderr, "Could not create child %d: %s\n",
                i, strerror(errno));
        exit(1);
    }
    if (childpid > 0)        /* for parent process, reassign stdout */
        error = dup2(fd[1], STDOUT_FILENO);
    else
        error = dup2(fd[0], STDIN_FILENO);
    if (error == -1) {
        fprintf(stderr, "Could not dup pipes for iteration %d: %s\n",
                i, strerror(errno));
        exit(1);
    }
    if ((close(fd[0]) == -1) || (close(fd[1]) == -1)) {
        fprintf(stderr, "Could not close extra descriptors %d: %s\n",
                i, strerror(errno));
        exit(1);
    }
    if (childpid)
        break;
}

/* say hello to the world */
fprintf(stderr,"This is process %d with ID %d and parent id %d\n",
        i, (int)getpid(), (int)getppid());
wait(1);
exit (0);
}     /* end of main program here */ 
```

输出：

```
master pid: 30593
test
This is process 1 with ID 30593 and parent id 30286
This is process 2 with ID 30594 and parent id 30593 
```

当我给 2 作为 argv[1]

所以，我想知道，为什么 dup2 部分会阻止 printf() 执行？如果我什至不能打印某些东西，我不确定我是否可以正确传递消息。另外，为什么 fprintf() 已经在那里工作了，但我不会放在那里？

编辑：我会把这个带给我的教授/助教，但他们都在城外，从现在到截止日期之前都无法到达......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:16:46.497

`printf`打印到标准输出，即文件描述符 1（或等效的`STDOUT_FILENO`）。 [`dup2(3)`](http://linux.die.net/man/3/dup2)正在将管道的文件描述符复制到当前标准输出之上，这具有关闭当前标准输出的副作用。`printf`因此，当您在调用该 specific 之后尝试执行此操作时`dup2`，您实际上是在将数据打印到刚刚创建的管道中，而不会进入您的终端输出。

`fprintf(stderr, ...)`仍然有效，因为它打印到 stderr，而不是 stdout，并且 stderr 文件描述符（2 或等效`STDERR_FILENO`的）在程序期间不会更改，因此它继续打印到终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:06:33.370

printf() 不向路径 0 发送数据，它使用`stdout`. 看起来，当您通过复制某些内容来破坏路径 0 时，您正在破坏`stdout`该过程。

从 dup2: 的手册页中`dup2() makes newfd be the copy of oldfd, closing newfd first if necessary`。因此，当您打电话时，`dup2(fd[0], STDIN_FILENO)`您正在休息`stdout`。

您声明 fprintf() 正在工作，但 printf() 没有……您为 fprintf() 使用什么路径？如果您正在使用`stderr`，那么它将继续工作是完全有道理的，因为您没有对该路径做任何事情。

# android - 列表视图和互斥切换按钮

> ID：12517268
> 
> 赞同：1
> 
> 时间：2012-09-20T16:53:48.730
> 
> 标签：android, android-listview, togglebutton

我有一个带有自定义列表项的列表视图。每个列表项都有一个切换按钮。此按钮启用他自己的时间计时器，在同一个列表项中。

只能同时激活一个计时器。当我激活其中一个时，如何禁用其他计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:11:23.020

您还没有发布任何代码，因此有两种方法可以做到这一点：

*   如果您使用[ListView#setChoiceMode( `CHOICE_MODE_SINGLE`)](http://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)以简单的方式执行此操作，那么它应该可以自行处理。
*   如果您创建了一个自定义适配器以在滚动后从[视图回收中保存切换状态。](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)只需保留对适配器中活动行的引用即可。当切换更改时，取消选中之前的活动切换（如果它是可见的）`getView()`并将处理其余的。

如果您需要具体建议，请更具体地说明您所做的事情（显示相关代码）以及为什么它不起作用（如果有错误，请使用 LogCat）。

# knockout.js - 使用可拖动作为源列表将添加到可排序的项目链接在一起？

> ID：12517273
> 
> 赞同：1
> 
> 时间：2012-09-20T16:54:12.327
> 
> 标签：knockout.js, knockout-sortable

原谅一起被黑的样本

[http://jsfiddle.net/marcmeans/SqrBf/1/](http://jsfiddle.net/marcmeans/SqrBf/1/)

如果您将可用学生中的一个项目添加到 Table3 两次，然后尝试将一个从 Table3 移动到 Table2，两者都会消失。

我还注意到，当我为添加到 Table3 的项目生成新的 guid 时，arg.item 似乎是对源列表中项目的引用，而不是克隆。这会在淘汰赛中创建一个链接，如果我更新一个链接，我会全部更新。

我假设我在这里做错了什么，但我很难弄清楚是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:33:43.963

插件中的`draggable`功能`sortable`当前检查您的对象是否具有`clone`功能。如果是，那么它使用调用的结果`clone`作为新项目。如果不是，则它使用该项目本身。

在您的小提琴中，您正在使用映射插件，因此一种选择是传递映射选项，通过添加`clone`方法来自定义创建学生的方式。

这是一个更新的小提琴，它传递映射选项并通过执行克隆对象`ko.mapping.fromJS(ko.mapping.toJS(this))`

[http://jsfiddle.net/rniemeyer/SqrBf/3/](http://jsfiddle.net/rniemeyer/SqrBf/3/)

# sql-server-2008 - 在插入语句中查询？

> ID：12517276
> 
> 赞同：0
> 
> 时间：2012-09-20T16:54:20.767
> 
> 标签：sql-server-2008, vbscript

我有以下用于将文本数据插入 SQL 2008 DB 的 VB 语句。如何在插入时检查 sValueList 是否已存在于 sFieldNameList 列中？

```
sInsertStatement = "INSERT " & sTableName 
                   & "(" & sFieldNameList & ") VALUES(" 
                   & Mid(sValueList , 3) & ")" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:58:30.023

我会这样做：

```
"IF NOT EXISTS (SELECT * FROM " & sTableName * " 
                WHERE " & sFieldNameList & " = " & sValueList & ") 
 BEGIN
    "INSERT " & sTableName 
              & "(" & sFieldNameList & ") VALUES(" 
              & Mid(sValueList , 3) & ")"  
 END 
```

（不过，这需要适应 VBScript 语法！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:07:23.257

您需要执行 UPDATE 或 INSERT 吗？您需要的是一个 UPSERT 命令。基本上你需要一个 WHERE 子句，如：

```
where not exists (select 1 from mytable where col2='myId'). 
```

[在这里](https://stackoverflow.com/questions/2991198/dynamic-upsert-in-postgresql)阅读postgres 是如何做到的。

sql2008 没有相同的功能，但[请查看此博客](http://www.databasejournal.com/features/mssql/article.php/3739131)（页尾），它们在哪里：

```
USE [MyDatabase]
GO
merge into mytable as Target
using mytable2 as Source
on Target.id=Source.id
when matched then 
update set Target.name=Source.name,
Target.Salary = Source.Salary
when not matched then
insert (id,name,salary) values (Source.id,Source.name,Source.Salary); 
```

# tcp - 给定 TCP，当 IO 是非阻塞时，状态设计模式是不是没什么用处？

> ID：12517278
> 
> 赞同：2
> 
> 时间：2012-09-20T16:54:22.940
> 
> 标签：tcp, nonblocking, swingworker, state-pattern

在我的 TCP 应用程序中，只要 IO 处于阻塞状态，State 设计模式似乎就很有用。

我的 SwingWorker 的 doInBackground() 可以通过引用一个对象来循环读取、写入和接受 TCP 连接中的状态。请参阅维基百科讨论页上的示例：[http](http://en.wikipedia.org/wiki/Talk%3AState_pattern) ://en.wikipedia.org/wiki/Talk%3AState_pattern 。

但是，当我将服务器重构为非阻塞 IO 时，它似乎不再有用。Select() 返回一组为 IO 准备的通道，这些通道通过引用一系列 if 语句中的 SelectionKey 状态来处理。

任何人都可以根据经验或理解当 IO 非阻塞时状态设计模式是否仍然有用？

我问是因为我不确定我是否正确掌握了状态设计模式和 TCP 的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:38:18.383

仍然非常有用，每个连接只有状态机。`select(2)`(or `poll(2)`, or `epoll(7)`) 只是为您提供了一种在多个通道上等待并将事件分派到这些状态机的方法。

# django - 在 Django 中正确存储 URL 中传递的值

> ID：12517279
> 
> 赞同：0
> 
> 时间：2012-09-20T16:54:23.940
> 
> 标签：django

我有以下网址：

`http://localhost:8000/store/add/?points=5`

我想从我的 URL 中提取点数。

在我的`views.py`，我有：

`points = request.GET.get('points',0)`

问题是它永远找不到点，所以它使用默认值 0。

任何洞察我做错了什么？

我的`urls.py`

```
from django.conf.urls.defaults import *
from store.models import Part, Category, UniPart, LibraryRequest
from django.views.generic.list_detail import object_list
from voting.views import vote_on_object

urlpatterns=patterns('',
#/store/
url(r'^$','store.views.all_models',name="all_models"),
#/integer/view_part
url(r'^(\d+)/view_part/$','store.views.view_part',name="view_part"),
url(r'^your_models/$','store.views.your_models',name="your_models"),#/your_model
url(r'^user_models/(?P<username>\w+)/$','store.views.user_models',name="user_models"),
url(r'^add/(?P<points>\d+)/','store.views.add_model'), 
```

截取自`views.py`：

```
def add_model(request, points=None):
    print points 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:03:39.093

好吧，您`urls.py`说您应该使用以下 url `/store/add/5`，并且`views.py`您需要查看

```
def add_model(request, points=None):
    print points 
```

如果您想`points`作为`GET`参数更改`urls.py`如下：

```
url(r'^add$','store.views.add_model', name='add_model'), 
```

然后您可以传递`points`as`/store/add?points=5`并将其从 URL 中提取为

`points = request.GET.get('points')`

**更新** 为了避免此类问题，我建议您在（见上文）`name`中为您的路线添加参数并在您的视图（例如）和模板（例如）中使用`urls.py``reverse``reverse('add_model', kwargs={'points': 5}``url``{% url 'add_model' 5 %}`

在这种情况下，应用程序中的所有 url 都将根据`urls.py`文件中的路由自动生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:05:05.987

使用以下代码：

```
points = request.GET.get('points') 
```

如果您传递多个变量，则可以通过两种方式完成：

**方法一：**

在您的**urls.py**中。

```
(r'^store/add1/?integer=(?P<category>\d+)/?string=(?P<keyword>\w+)$', 'view_function_name'), 
```

您可以使用以下方法在视图中获取上述值：

```
def function_name(request):
    int_value = request.GET.get('integer')
    str_value = reuest.GET.get('string') 
```

您还可以使用下面给出的模式：

**方法二：**

在您的**urls.py**中。

```
urlpatterns = patterns('model_name.views', 
      (r'^store/add1/(?P<integer>\d+)/(?P<string>\w+)/', 'function_name')
      ) 
```

在您的**views.py**中：

```
def function_name(request, integer= None, string = None):
    print integer
    print string
    #Do whatever you wish with this value 
```

第二种方法对你来说会更容易。

# python - 从 float32 -> float64 回到 float32，我会失去精度吗？

> ID：12517281
> 
> 赞同：1
> 
> 时间：2012-09-20T16:54:27.530
> 
> 标签：python, numpy, floating-point

从 numpy float32 到 python float (float64) 再到 numpy float32 是否有可能失去任何保真度或精度？

我似乎找不到数据丢失的案例，但我周围的每个人都声称世界将因数据丢失而终结。在我继续之前，我只需要找到一个证明数据丢失的文档/示例。

任何为我指明正确方向的帮助表示赞赏。

这是我看到的一个典型用例：

```
def serialize(val):
    # val is a np.float32
    return val.astype(float)

def deserialize(msg):
    return np.float32(msg)

message = '1.23456789'
outgoing = serialize(message)
incoming = deserialize(message) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:06:33.163

如果`x`是 float32 那么`float32(float64(x)) == x`.

*一个例外是 if `x = nan`then `nan != nan`,though `nan is nan`，因此如果你想捕获所有你可以使用的东西：*

```
float32(float64(x)) == x or x is nan 
```

.

你应该注意：

```
float32(1./3)          # 0.33333334
float64(float32(1./3)) # 0.3333333432674408
float64(0.33333334)    # 0.33333333999999998 
```

# svn - 无法弄清楚 SVN 存储库

> ID：12517283
> 
> 赞同：0
> 
> 时间：2012-09-20T16:54:31.393
> 
> 标签：svn, repository

我是 SVN 和 Maven 的新手。我正在尝试从[websvn](http://websvn.ow2.org/listing.php?repname=frascati&path=/trunk/examples/frascati-in-the-cloud/Google%20App%20Engine/)下载源代码。我已经从桌面和 Eclipse 插件中尝试过 Tortoise 和 SVN，但都没有成功。

这样做

```
mvn http://websvn.ow2.org/listing.php?repname=frascati&path=%2Ftrunk%2Fexamples%2Ffrascati-in-the-cloud%2FGoogle%20App%20Engine%2F 
```

我收到一个前缀 http 错误。下载此代码的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:15:51.070

他们如何提供对 repo 的匿名访问非常令人费解。如果您阅读此 wiki，事情会更清楚：[OW2 Forge: SVN Repository](http://forge.ow2.org/plugins/scmsvn/index.php?group_id=228)

您可以将项目签出为（针对您的情况）

```
svn checkout "svn://svn.forge.objectweb.org/svnroot/frascati/trunk/examples/frascati-in-the-cloud/Google App Engine" 
```

请注意 URL 周围的引号，因为您的 URL 包含空格。

或使用乌龟结账`svn://svn.forge.objectweb.org/svnroot/frascati/trunk/examples/frascati-in-the-cloud/Google App Engine`

* * *

**旁注：**在阅读您的问题时，我一直在抱怨的一件事是您为什么要使用`mvn`Maven 来签出存储库。

这是区别。

`svn`命令是调用 SubVersion。SubVersion 是一个 SCM。它管理修订和并行开发。它与从本地机器签出、签入、更新、删除和添加代码到存储库或从存储库添加代码有关。

`mvn`命令是召唤全能的Maven。Maven 是一个构建管理器。它与您编写的代码的编译、打包、测试和发布有关。它在发布期间与 SVN（或任何其他 SCM）部分重叠。您不使用 Maven 来签出代码。

所以，`mvn`做`svn`押韵——但它们不是一回事。

# report - 业务对象 | 网络报告| 数据汇总所需的帮助

> ID：12517289
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:54:57.027
> 
> 标签：report, sap, business-objects, summary

我需要有关 SAP Business Objects – 用于报告的 Web Intelligence 工具的帮助。

有什么方法可以汇总（一列总和，一列中的总行数等）报告的另一个选项卡中的一个报告选项卡上的数据？有没有人在任何项目中实现过这个？

任何指针或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:50:26.737

您还可以为这项工作使用上下文（输入或输出，根据您的需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:22:00.310

也许不是直接的，因为每个块对于选项卡都是唯一的。您可以将您的块公开为一项服务，并在其他选项卡甚至其他报告中使用它。我假设这是十一。

要发布块右键单击块，您应该能够看到发布块选项。按照向导完成。

# asp.net-mvc - Is ASP.NET MVC Built on top of IHttpAsyncHandler?

> ID：12517290
> 
> 赞同：0
> 
> 时间：2012-09-20T16:55:02.067
> 
> 标签：asp.net-mvc

Is ASP.NET MVC Built on top of [IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)? I'm implementing some web processing code and, for some reason end up building a kinda MVC framework. So, for that reason is the question, is ASP.NET controller choice mechanism built on top of that handler or is something more complex.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:36:44.667

The [Controller](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller%28v=vs.108%29.aspx) class not, the [AsyncController](http://msdn.microsoft.com/en-us/library/system.web.mvc.asynccontroller.aspx) class yes. So if you have some I/O intensive operations you could perform them in an [asynchronous controller](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.98%29.aspx).

# validation - 单击按钮期间的验证

> ID：12517293
> 
> 赞同：0
> 
> 时间：2012-09-20T16:55:25.293
> 
> 标签：validation, mvvm, silverlight-4.0, command

我有按钮：

```
<sdk:Frame Margin="0,37,0,-15"     
                   Source="/View/Login/LogIn.xaml">
            <navigation:Frame.UriMapper>
                <uriMapper:UriMapper>
                    <uriMapper:UriMapping Uri="/Login" MappedUri="/View/Login/LogIn.xaml" />
                    <uriMapper:UriMapping Uri="/Home" MappedUri="/View/Home.xaml" />
                    <uriMapper:UriMapping Uri="/AddPayment" MappedUri="/View/AddPayment.xaml" />
                    <uriMapper:UriMapping Uri="/Reports" MappedUri="/View/Reports.xaml" />
                    <uriMapper:UriMapping Uri="/Admin" MappedUri="/View/Admin.xaml" />
                    <uriMapper:UriMapping Uri="/Init" MappedUri="/View/Init.xaml" />
                </uriMapper:UriMapper>
            </navigation:Frame.UriMapper>
        </sdk:Frame>
 <HyperlinkButton Grid.Row="2" Grid.Column="1" Content="Log in"  NavigateUri="/Home" Command="{Binding LoginCommand, NotifyOnValidationError=True}"/> 
```

和视图模型：

```
 public RelayCommand LoginCommand
        {
            get
            {
                return this.loginCommand = new RelayCommand(param => this.LoginExecute(), param => (bool)this.CanLoginCommand);
            }
        }

        private object CanLoginCommand
        {
            get
            {
                return true;
            }
        }

        private void LoginExecute()
        {
            UserBag users = IsolatedStorageCacheManager<UserBag>.Retrieve(typeof(UserBag));
            if (users != null && users.Users != null && users.Users.Any(u => u.UserName == this.login && u.Password == this.password))
            {

            }
            else
            {
                throw new Exception("Bad password");
            }
        } 
```

我需要当命令返回异常时，它将返回查看并显示，然后导航 uri 不会被调用。有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:02:32.010

您可以使用此静态类管理 ViewModel 中的导航：

```
public static class NavigationService
{
    private static Frame _frame;
    private static Frame Instance
    {
        get
        {
            if (_frame == null)
                throw new Exception("You must set the instance first");

            return _frame;
        }
    }

    public static void Navigate(string url)
    {
        Instance.Navigate(new Uri(url, UriKind.Relative));
    }

    public static void SetInstance(Frame frame)
    {
        _frame = frame;
    }

    public static void GoBack()
    {
        Instance.GoBack();
    }
} 
```

在您的 MainPage.xaml.cs 中：

```
NavigationService.SetInstance(this.ContentFrame); // ContentFrame = your navigation Frame 
```

现在在您的 ViewModel 中：

```
private void LoginExecute()
    {
        UserBag users = IsolatedStorageCacheManager<UserBag>.Retrieve(typeof(UserBag));
        if (users != null && users.Users != null && users.Users.Any(u => u.UserName == this.login && u.Password == this.password))
        {
            NavigationService.Navigate("/Home");
        }
        else
        {
            throw new Exception("Bad password");
        }
    } 
```

**您必须删除**HyperlinkBut​​ton 中的 NavigateUri ;)

# c# - Razor Helpers 中的 HTML 解析

> ID：12517295
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:55:38.410
> 
> 标签：c#, html, parsing, razor

我有以下代码，

```
@helper Category(IGroup group)
{
  if (!group.Exist)
  {
    return;
  }
  var colors = AppContext.Settings.Colors.Charts.Net;
  var css = group.Name.Replace(" ", String.Empty).ToLower();
  var id = css.ToUpper() + "_";

  <tr>
        <td class="summarygridbackground" style="font-weight:bold;">@group.Name</td>
    </tr>
  foreach(var category in group.Categories)
  {
        <tr id="@id@category.Id" class="summarygridbackground">
        <td class="category">
            <div style="float:left">@category.Name</div>
            <div class="hovericon">@FormatAs.Currency(category.TotalValue)</div>
    </td>
      </tr>
  }
    <tr class="summarygridbackground">
      @switch(css)
        {
          case "inv":
            <text>
              <td class ="@css" style="color: @colors.Inv.html">
            </text>
            break;
          case "other":
            <text>
              <td class ="@css" style="color: @colors.Other.html">
            </text>
            break;
          case "lib":
            <text>
              <td class ="@css" style="color: @colors.Lib.html">
            </text>
            break;
          case "net":
            <text>
              <td class ="@css" style="color: @colors.Net.html">
            </text>
            break;
          default:
            <text>
              <td class="@css">
            </text>
            break;
        }

          <div style="float:left; padding-left:12px;"> Total @group.Name</div>
            <div style="float:right; padding-right:10px;">@FormatAs.Currency(group.TotalValue)</div>
        </td>
    </tr>
} 
```

就目前而言，当我加载视图时，代码在帮助程序的最后一行失败，并显示以下消息：

> 解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> “解析器错误消息：遇到没有匹配开始标签的结束标签“tr”。你的开始/结束标签是否正确平衡？
> 
> 源错误：
> 
> 第 65 行：@FormatAs.Currency(group.TotalValue) 第 66 行：第 67 行：第 68 行：}"

当我删除`</tr>`最后一行的最后一个时，它会失败并显示以下消息：

> 解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：“tr”元素未关闭。所有元素必须是自闭合的或具有匹配的结束标记。
> 
> 源错误：
> 
> 第 32 行：第 33 行：} 第 34 行：第 35 行：@switch(css)

我想不通，这就是整个辅助方法，对我来说它看起来很平衡，并且对这个辅助方法的所有调用之前都运行良好，并且没有嵌套在`<tr>`s 中，只有`<div>`s

有人可以帮我吗？

`switch`编辑：我设法通过从该段中删除它来使其工作，而是在开始时使用它`foreach`来设置 a `var color`，并使用它来代替。无论如何，这似乎是一个更好的解决方案，但我仍然想了解*为什么*第一次尝试没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:01:22.437

您的 TD 未正确关闭。`</text>`从 case 语句中删除 并将其移到`</td>`:

```
<tr class="summarygridbackground">
  @switch(css)
    {
      case "inv":
        <text>
          <td class ="@css" style="color: @colors.Inv.html">
        </text>
        break;
      case "other":
        <text>
          <td class ="@css" style="color: @colors.Other.html">
        break;
      case "lib":
        <text>
          <td class ="@css" style="color: @colors.Lib.html">

        break;
      case "net":
        <text>
          <td class ="@css" style="color: @colors.Net.html">

        break;
      default:
        <text>
          <td class="@css">

        break;
    }

      <div style="float:left; padding-left:12px;"> Total @group.Name</div>
        <div style="float:right; padding-right:10px;">@FormatAs.Currency(group.TotalValue)</div>
    </td>
        </text>
</tr> 
```

# jquery - PHP 和 Ajax 发布 onclick 事件

> ID：12517297
> 
> 赞同：0
> 
> 时间：2012-09-20T16:55:44.063
> 
> 标签：jquery, ajax, call

我有一个这样的脚本：

```
<script type="text/javascript">
function DeletePublisher(publisherid) {
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function(r) { if (r)

scriptitem = document.createElement('script');
scriptitem.type = 'text/javascript';
scriptitem.src = 'includes/publishers/delete-publisher.php?publisherid=' + publisherid;
scriptitem.id = 'ajax';
document.body.appendChild(scriptitem);
setTimeout('document.body.removeChild(document.getElementById("ajax"))', 500);  

$.jGrowl('Publisher deleted');
window.location.reload();
});
}
</script> 
```

我在表中列出这样的行：

```
TD ROWS HERE...
<td class="unpaid-th"><strong><?php echo $publisher_unpaid; ?></strong></td>
                <td class="action-th">
                    <ul class="button-table-head">
                        <li><div class="button-head edit-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Edit" data-style-tooltip="tooltip-mini-slick"><span>Edit</span></a></div></li>
                        <li><div class="button-head delete-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Delete" data-style-tooltip="tooltip-mini-slick" onclick="DeletePublisher('<?php echo $publisher_id; ?>')"><span>Delete</span></a></div></li>
                    </ul>
                </td> 
```

现在应该发生的是当我单击删除链接时 - 它应该发布/获取（无论如何 - 因为我在侦听器脚本上使用 $_REQUEST）到 php 脚本，该脚本将获取发布者的 id 并将其从数据库中删除......但是问题似乎是实际上没有发送 ID 来删除脚本，我已经尝试了一切......

它在源代码中显示很好，如 onclick="DeletePublisher('152')" 并提示警报、信息等......但它似乎没有发送 ID ......或者现在甚至可能没有调用 LISTENER 脚本（不要'不知道如何测试它）:(

任何想法这里有什么问题（或者可能是不同的方法？）？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:04:28.620

我会推荐使用像下面这样使用 jQuery 的 AJAX

```
function DeletePublisher(publisherid) {
  jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function(r) { if (r)
    $.ajax({
      type: "POST", //or GET
      url: 'includes/publishers/delete-publisher.php?publisherid=' + publisherid,
      data: '',
      success: function(response){
        $.jGrowl('Publisher deleted');
        window.location.reload();
      }
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:02:38.123

我认为您正在尝试做的是 JSONP 调用。我认为缺少的是响应应该包含在 javascript 调用中。方法的名称应与回调方法的名称相同。

但我认为你不需要继续使用 JSNOP 方法，因为我看到你的脚本在同一个域上。所以试着做一个简单的ajax调用。你可以试试jquery。它将照顾浏览器的兼容性。

# mysql - 如何使用自联接选择最小值和最大值

> ID：12517298
> 
> 赞同：0
> 
> 时间：2012-09-20T16:55:46.500
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个看起来像这样的表：

```
pk client value date
1  001     564  2012/5/1
2  002     245  2012/6/1
3  003     445  2012/6/6
4  001     845  2012/7/1
5  002     567  2012/8/1
6  001     123  2012/9/1 
```

我知道这可以通过每组最大的 n 和自我加入来解决，但我无法弄清楚。

基本上这就是我想要的输出

```
client min(value) max(value) date_for_min(value) date_for_max(value)
001    123        845        2012/9/1            2012/7/1
002    245        567        2012/6/1            2012/8/1
003    445        445        2012/6/6            2012/6/6 
```

棘手的部分是每个客户端只有一行具有最小/最大值，然后是与这些最小值/最大值一起出现的其他列。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:20:08.500

您可以使用以下内容：

```
select distinct t1.client, t1.mnval, mindate.dt, t1.mxval, maxdate.dt
from
(
    select min(value) mnval, max(value) mxVal, client
    from yourtable
    group by client
) t1
inner join yourtable t2
    on t1.client = t2.client
inner join yourtable mindate
    on t1.client = mindate.client
    and t1.mnval = mindate.value
inner join yourtable maxdate
    on t1.client = maxdate.client
    and t1.mxVal = maxdate.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:01:38.897

如果某个最小值或最大值有多行（对于同一客户端），我已经给了您它们出现的最早日期：

```
select t1.client, t1.MinValue, t1.MaxValue, min(t2.date) as date_for_min_value, min(t3.date) as date_for_max_value
from (
    select client, min(value) as MinValue, max(value) as MaxValue
    from MyTable
    group by client
) t1
inner join MyTable t2 on t1.client = t2.client and t1.MinValue = t2.Value
inner join MyTable t3 on t1.client = t3.client and t1.MaxValue = t3.Value
group by t1.client, t1.MinValue, t1.MaxValue 
```

# android - 如何预览自定义的 android 组件布局？

> ID：12517299
> 
> 赞同：2
> 
> 时间：2012-09-20T16:55:54.967
> 
> 标签：android, xml, layout, adt, custom-component

我创建了一个扩展的自定义视图`RelativeLayout`，我想预览它在设计器中的外观。

java是这样的：

```
// The view for a snap in the search/browse fragment.
public class MyView extends RelativeLayout
{
    public MyView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        LayoutInflater inflater = LayoutInflater.from(context);
        inflater.inflate(R.layout.the_layout, this);
    }

    public void setData(String text)
    {
        mText.setText(text);
    }

    // *** Views ***
    private TextView mText;

    @Override
    protected void onFinishInflate()
    {
        super.onFinishInflate();

        mText = (TextView)findViewById(R.id.text);
    }
} 
```

XML是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <!-- (And lots more views) -->
</RelativeLayout> 
```

然而，这有一些问题：

1.  这实际上创建了`RelativeLayout`一个`RelativeLayout`无意义的内部。可以通过将 XML 更改`<RelativeLayout>`为 a来解决，`<merge>`但我根本无法预览布局！
2.  我想`isInEditor()`在 java 中使用该函数（或任何它被调用的函数）来添加一些示例数据以用于预览目的，但我找不到一种方法来告诉 XML 编辑器它应该显示我的类的预览而不是实际的 XML。

我能想到的一个不满意的解决方案是创建一个`preview.xml`只包含其中的空文件`<com.foo.bar.MyView/>`......但这似乎有点愚蠢。有没有更好的办法？（我并不像预览那样关心编辑，因为 - 让我们面对现实吧 - Eclipse/ADT 太慢且不稳定，无法使图形布局编辑可用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:40:42.053

如果我正确理解了您的问题，我会说解决方案只是将 xml 布局中的“RelativeLayout”标签（或任何其他标签）替换为“your.packagename.MyView”，如下所示：

```
<your.packagename.MyView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <!-- (And lots more views) -->

</your.packagename.MyView> 
```

如果您在运行应用程序时遇到有关 MyView 类的任何异常，请添加所有缺少的超级/父构造函数。

我对几乎所有自定义 xml 布局都执行此操作。使用 RelativeLayout、LinearLayout 或任何其他 GUI 类扩展您的类也可以让您很好地控制 GUI 的行为方式（因为您还可以覆盖父方法等）。

# php - PHP服务器会话的概念理解

> ID：12517302
> 
> 赞同：-2
> 
> 时间：2012-09-20T16:56:05.437
> 
> 标签：php, webserver

因此，作为一名工程师，我通常需要对协调一致的理解才能使用某些东西。我觉得我了解会话的基础知识。我想知道那里的细节和细节。

会话的限制是什么？

如何操纵会话？不能对会话或会话明确执行的操作。

PHP 使用哪些数据结构来定义和管理会话？

PHP 会话与任何其他会话有什么显着不同吗？

我知道这些问题很笼统，所以如果有人能简单地提出一个好的资源，我将不胜感激。那里有很多信息，但它要么太基础，要么针对特定主题进行教学。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:00:14.300

这是一个很好的资源： http: [//php.net/manual/en/book.session.php](http://php.net/manual/en/book.session.php)

*   会话的限制是什么？

我真的不明白你的意思。在什么情况下有限制？

*   如何操纵会话？

要操纵值，只需`$_SESSION`直接使用超全局。

*   什么不能明确地对会话或会话执行？

同样，没有上下文，很难理解你的意思。我想重要的一点是会话是短暂的，因此您不能明确存储要无限期保留的数据。

*   PHP 使用哪些数据结构来定义和管理会话？

文件系统。

*   PHP 会话与任何其他会话有什么显着不同吗？

什么是另一个会话？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:07:02.123

会话是服务器**识别您**的一种方式，因此他会向您发送页面的自定义版本，而不是总是为每个人发送相同的页面。

识别你的一种方法是他告诉浏览器在你的计算机中保存一个带有简单文本的小文件，当你再次访问该页面时，服务器会向浏览器询问该文件，如果浏览器发送它，并且它包含预期的内容，服务器现在可以再次知道这是您。那是**饼干**。

维护会话的另一种方法（来自 cookie 的一部分）是服务器在页面所有链接的 url 中为您放置一个特殊的唯一令牌。每当您浏览该站点时，您访问的所有页面都将具有该令牌，服务器会看到它并知道这是它为您制作的令牌，因此他再次知道是您。

因此，无论是使用**cookie**还是**基于 url 的**会话，服务器都必须保存有关打开的会话的信息，例如存储`$_SESSION`您在**PHP**中创建的变量，如果您创建这样的变量，服务器会将其保存到他将稍后由您的 cookie 或令牌内容识别，当您重新访问该页面时，他将读取该文件并加载`$_SESSION`您上次创建的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:58:43.157

[http://php.net](http://php.net)是您问题的最佳来源

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:04:43.600

PHP 会话是一种非常好的方式，可以在您的站点上为不同的用户提供持久信息。

查看您可以使用的[PHP 会话函数。](http://php.net/manual/en/ref.session.php)

您可以[在 php.net 查看有关如何使用会话的示例](http://php.net/manual/en/intro.session.php)。

会话最常与用户帐户相关联。用户可以登录您的网站，您创建一个用户会话来跟踪他们的信息并确保他们被允许登录。

基本假设是会话是**安全**的，因为服务器知道正在进行的会话。通过 HTTPS 使用会话是保持用户登录到您的站点的一种相当安全的方式（没有 HTTPS，您将面临[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)的风险）。

另一个基本功能是拥有关于给定用户的持久数据。因此，假设您想跟踪用户是否提交了表单，您可以这样做：

```
$_SESSION['form_submitted'] = TRUE; 
```

现在，您可以在想知道该特定用户是否已提交表单时检查该全局变量。所以会话（以同样的方式使用 cookie）允许你做一些非常酷的事情，否则这些事情是不可能的。

# android - ImageView - 实现与 ViewPager 兼容的手势（捏缩放、双击）（就像 Android Gallery 一样）

> ID：12517306
> 
> 赞同：0
> 
> 时间：2012-09-20T16:56:23.097
> 
> 标签：android, imageview, android-viewpager, android-image, android-gesture

我正在寻找一种有效的方法来使用 ViewPager 实现 ImageView 的手势选项。我尝试了一些示例，但它们效果不佳（例如，捏缩放实际上没有缩放到我想要的位置）。在我的应用程序中，我需要捏缩放、双击缩放和拖动缩放图像。

什么是让一切顺利进行的最快和最简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:07:52.823

你可以试试这个开源项目：[https ://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

# css - Head 中的打印机样式表

> ID：12517310
> 
> 赞同：0
> 
> 时间：2012-09-20T16:56:34.640
> 
> 标签：css, printing, print-style

我有一个打印样式表设置，但我需要在一页上覆盖样式表的一些属性。我能想到的最简单的方法就是将所需的样式放在页面头部，如下所示：

```
<style type="text/css">
  /* Print Styles */
</style> 
```

但我的问题是我不知道如何只针对打印机。

注意：我*不想*创建另一个样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:06:08.843

```
@media print {
   .someclass {
        color: red; /*makes it red only when printing*/
   }
   /*more printer-only styles*/
} 
```

有关其他媒体类型的参考：[little link](http://www.w3.org/TR/CSS2/media.html)。

# antlr - ANTLR 规则独立工作，但在包含在另一个规则中时失败

> ID：12517315
> 
> 赞同：2
> 
> 时间：2012-09-20T16:56:54.917
> 
> 标签：antlr, antlrworks

我正在尝试为重新解析和重新标记的 kconfig 文件（重新标记以解决一些歧义）编写 ANTLR 语法。语法的简化版本是：

```
grammar FailureExample;

options {
language = Java;
}

@lexer::header {
package parse.failure.example;
}

reload 
:   configStatement*
EOF
;

configStatement
: CONFIG IDENT
configOptions
;

configOptions
:   (type 
| defConfigStatement
| dependsOnStatement
| helpStatement
| rangeStatement
| defaultStatement
| selectStatement
| visibleIfStatement
| prompt
)*
;

type :  FAKE1;
dependsOnStatement: FAKE2;
helpStatement:  FAKE3;
rangeStatement: FAKE4;
defaultStatement:   FAKE5;
selectStatement:FAKE6;
visibleIfStatement:FAKE7;
prompt:FAKE8;   

defConfigStatement
: defConfigType expression
;

defConfigType
: DEF_BOOL
;

//expression parsing
primative
: IDENT
| L_PAREN expression R_PAREN
;

negationExpression
: NOT* primative
;

orExpression
: negationExpression (OR negationExpression)*
;

andExpression
: orExpression (AND orExpression)*
;

unequalExpression
: andExpression (NOT_EQUAL andExpression)?
;

equalExpression
: unequalExpression (EQUAL unequalExpression)?
;

expression
: equalExpression (BECOMES equalExpression)?
;

DEF_BOOL:    'def_bool';
CONFIG : 'config';  
COMMENT     : '#' .* ('\n'|'\r') {$channel = HIDDEN;};
AND         : '&&';
OR      : '||';
NOT         : '!';
L_PAREN     : '(';
R_PAREN     : ')';
BECOMES     : '::=';
EQUAL       :  '=';
NOT_EQUAL   : '!=';

FAKE1 : 'fake1';
FAKE2:   'fake2';
FAKE3:   'fake3';
FAKE4:   'fake4';
FAKE5:   'fake5';
FAKE6:   'fake6';
FAKE7:   'fake7';
FAKE8:   'fake8';

IDENT       : (LETTER | DIGIT | '_')*;
WS  :   ( ' '
    | '\t'
    | '\r'
    | '\n'
    ) {$channel=HIDDEN;}
;

fragment LETTER : ('a'..'z' | 'A'..'Z') ;
fragment DIGIT : '0'..'9'; 
```

有输入：

```
config HAVE_DEBUG_RAM_SETUP
def_bool n 
```

我可以将 antlrworks 设置为仅解析第二行（注释掉第一行），然后我得到正确的 defConfigStatement 令牌，并带有下面的正确表达式。但是，如果我使用 configOptions 规则或 configStatement 规则（第一行未注释），我的 configOptions 会导致一个空集并引发 NoViableAlt 异常。

什么会导致这种行为？我知道 defConfigStatement 规则是准确的并且可以正确解析，但是一旦将它作为潜在选项添加到另一个规则中，它就会失败。我知道我没有冲突的规则，并且我已将 DEF_BOOL 和 DEF_TRISTATE 规则放在我的词法分析器规则列表中，因此它们优先于其他词法分析器规则。

/*自编辑后添加*/ 为了使问题进一步复杂化，如果我在 configOptions 规则中移动 defConfigStatement 选项，它将起作用，但其他规则将失败。

编辑：使用完整的简化语法。

简而言之，为什么该规则自己起作用，但在 configOptions 中却失败了（尤其是因为 configOptions 是 (A | B | C)* 形式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:09:44.600

当我解析输入时：

```
config HAVE_DEBUG_RAM_SETUP
def_bool n 
```

使用从您的语法生成的解析器，我得到以下解析树：

![在此处输入图像描述](../Images/4a92240cf13db26acee736ec842681cd.png)

所以，我认为这里没有问题。我的猜测是您使用的是 ANTLRWorks 的解释器：不要。是马车。始终使用您自己的类来测试您的语法，或使用 ANTLWorks 的调试器（按`CTRL`+`D`启动 is）。调试器就像一个魅力（没有包声明，顺便说一句）。我在上面发布的图像是从调试器导出的。

## 编辑

如果调试器不起作用，请尝试（暂时）删除包声明（请注意，您只是为词法分析器声明包，而不是解析器，但这可能是由于发布了最小语法引起的）。您还可以尝试更改调试器应连接的端口号。可能是端口已在使用中（请参阅：`File` `->` `Preferences` `->` `Debugger`-tab）。

# sencha-touch - 是否可以在列表或 DataView 中的 itemTpl 中添加按钮？

> ID：12517316
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:03.487
> 
> 标签：sencha-touch, extjs

任何人都可以对这个问题有所了解吗

我想在 Sencha Touch 中为 itemTpl 添加一个按钮。{} 中的键将替换为存储中的值。但是，是否也可以在模板中添加按钮？

例如，您在每个项目中列出带有删除按钮的最喜欢的音乐列表。

可能的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:20:21.097

我不确定我们是否可以在 Sencha-2 中向 itemTpl 添加按钮，但我们肯定可以向 itemTpl 添加**图像**，然后我们可以执行各种操作（例如您想要删除的情况）。
这是代码：-

```
 //demo.js

 Ext.define("Stackoverflow.view.demo", {
 extend: "Ext.Container",
 requires:"Ext.dataview.List",
 alias: "widget.demo",

 config: {
 layout: {
    type: 'fit'
 },
 items: [
{
    xtype: "list",
    store: "store",
    itemId:"samplelist",
    loadingText: "Loading Notes...",
    emptyText: "<div class=\"notes-list-empty-text\">No notes found.</div>",
    onItemDisclosure: true,
    itemTpl:"<div class='x-button related-btn' btnType='related' style='border: none; background: url(\"a.png\") no-repeat;'></div>"+
               "<div class=\"list-item-title\">{title}</div>"
    grouped: true
}

],
listeners:
[
        {
        delegate: "#samplelist",
        event: "disclose",
        fn: "onDiscloseTap"
    }
 ]
 },    
  onDiscloseTap: function (list, record, target, index, evt, options) {

   this.fireEvent('ondisclosuretap', this, record);
  }
}); 
```

// 演示控制.js

```
 Ext.define("Stackoverflow.controller.Democontrol", {
          extend: "Ext.app.Controller",
            config: {
            refs: {
                // We're going to lookup our views by xtype.
                Demo: "demo", 
                Demo1: "demo list",
                  },
            control: {
                Demo: { 
                       ondisclosuretap: "Disclosure", 
                 },
                Demo1: { 

                     itemtap:"imagetap" 

                }

            }
        },

         Disclosure: function (list, record,target,index,e,obj) {
           Ext.Msg.alert('','Disclosure Tap');

        },

          imagetap: function (dataview,index,list,record, tar, obj) { 
             tappedItem = tar.getTarget('div.x-button');
            btntype = tappedItem.getAttribute('btnType');
            if(btntype == 'related')
            {
            Ext.Msg.alert('','Image/Icon Tap');
            }
        },

        // Base Class functions.
        launch: function () {
            this.callParent(arguments);

         },
        init: function () {
            this.callParent(arguments);

        }
        }); 
```

//app.css

```
 .related-btn
           {
              width: 100px;
              height: 100px;
              position: absolute;
          bottom: 0.85em;
              right: 2.50em;
            -webkit-box-shadow: none;
           } 
```

希望这会有所帮助。

# iphone - FBConnect 未打开 facebook 登录屏幕

> ID：12517317
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:08.317
> 
> 标签：iphone, fbconnect

我正在使用以下功能打开 FBConnect 登录屏幕，但不幸的是它没有出现在屏幕上，每当我在 Spinner 空白屏幕动画出现后单击登录按钮时。

```
if(appDelegate.session == nil) {

    appDelegate.session = [FBSession sessionForApplication:API_KEY secret:SECRET_KEY delegate:self];

}
if(loginButton == nil) {
     self.loginButton = [[[FBLoginButton alloc] init] autorelease];
     loginButton.frame = CGRectMake(0, 0, 100, 50);
     [self.view addSubview:loginButton];
} 
```

我已经从开发者帐户中给出了正确的 API_KEY 和 SECRET_KEY 值。请看附图。

![在此处输入图像描述](../Images/0989269457d6d48ad24e8e82215dcdb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:30:55.873

Use FBConnect only if it uses Facebook GraphApi, else other api's wont be working.

Why are you using old FB Sdk, use the new iOS SDK 3.0, it very simple to use. Also FB has provided lots of sample app. Get the new sdk [here](http://developers.facebook.com/ios/).

And also new Graph Api's doesn't require secret key.

# c# - 使用 Sql Membership Provider 显示成员信息，包括角色

> ID：12517322
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:21.483
> 
> 标签：c#, asp.net, sqlmembershipprovider

我希望使用根据 SqlMembershipProvider 模式设置的数据库表创建所有用户的汇总表。到目前为止，我有：

```
<asp:GridView ID="UserAccounts" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="UserName" HeaderText="UserName" />
        <asp:BoundField DataField="Email" HeaderText="Email" />
        <asp:TemplateField HeaderText="Role">
            <ItemTemplate>
                <asp:TextBox ID="RoleText" ReadOnly="true" runat="server">
                </asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

对于表格和代码隐藏：

```
UserAccounts.DataSource = Membership.GetAllUsers();
UserAccounts.DataBind(); 
```

生成用户列表。但是，作为熟悉 SQLmembershipprovider 的人，与用户关联的角色位于多个单独的表中。因此，我不确定如何检索该信息并将其显示在每个用户旁边。

我目前正在考虑的解决方案是以某种方式逐行遍历表，然后在该用户名上调用 Roles.GetRolesForUser() 以检索信息，然后将其绑定到表。但是，我不确定如何执行此操作，以及它是否是最有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:24:29.047

您可以使用此方法并使用 DataTable

```
public DataSet CustomGetAllUsers()    {
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        dt = ds.Tables.Add("Users");

        MembershipUserCollection muc;
        muc = Membership.GetAllUsers();

        dt.Columns.Add("UserName", Type.GetType("System.String"));
        dt.Columns.Add("Email", Type.GetType("System.String"));
        dt.Columns.Add("CreationDate", Type.GetType("System.DateTime"));

        /* Here is the list of columns returned of the Membership.GetAllUsers() method
         * UserName, Email, PasswordQuestion, Comment, IsApproved
         * IsLockedOut, LastLockoutDate, CreationDate, LastLoginDate
         * LastActivityDate, LastPasswordChangedDate, IsOnline, ProviderName
         */

        foreach(MembershipUser mu in muc) {
            DataRow dr;
            dr = dt.NewRow();
            dr["UserName"] = mu.UserName;
            dr["Email"] = mu.Email;
            dr["CreationDate"] = mu.CreationDate;
            dt.Rows.Add(dr);
        }
        return ds;
    } 
```

绑定：

```
UserAccounts.DataSource = CustomGetAllUsers().Tables[0] ;
UserAccounts.DataBind(); 
```

你也可以调整你`ItemTemplate`的`Eval.DataBinder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:38:49.553

尝试绑定到

```
 var userRoles = from MembershipUser user in Membership.GetAllUsers()
                    from role in Roles.GetRolesForUser(user.UserName)
                    select new { 
                        UserName = user.UserName, Email = user.Email, Role = role }; 
```

或者

```
 var userRoles = from MembershipUser user in Membership.GetAllUsers()
                    let roles = Roles.GetRolesForUser(user.UserName)
                    select new {
                        UserName = user.UserName, 
                        Email = user.Email,
                        Roles = string.Join(", ",  roles) }; 
```

# c# - 动作控制器 asp.net

> ID：12517324
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:57:22.860
> 
> 标签：c#, asp.net, .net, nhibernate, razor

我做了这种代码艺术，但我遇到了问题

*   查询更新不起作用，我不知道为什么
*   我总是被重定向到年龄索引文件 Edit.cshtml

> ```
>  @model DATA2.User
>      @{ViewBag.Title = "Edit";
>          Layout = "~/Views/Shared/_General.cshtml";
>      }
>      @using (Html.BeginForm("Save", "Administration"))
>      {
>      <table>
>      <tr>
>          <td><label    >                             </label></td>
>                  <td>
>                     <label  title= "Name "  style="font-weight:bold" >             Name                 </label>
>                     </td>
>                     <td><label  title= "Email "  style="font-weight:bold" >             Email                
>  </label></td>
>                      <td><label  title= "Password " style="font-weight:bold"  >             Password                
>  </label></td>
>                      <td><label  title= "Phone"  style="font-weight:bold" >             Phone                
>  </label></td>
>                    </tr>
>                   <tr >
>                           <td><label  style="font-weight:bold"  >            Recent                 </label></td>
>                          <td><label    >             @Model.ContactName                 </label></td>
>                     <td><label    >             @Model.ContactEmail                 </label></td>
>                      <td><label    >             @Model.Password                 </label></td>
>                      <td><label    >             @Model.ContactPhone                 </label></td>
>                         </tr>
>                 <tr>
>                 <td><label   style="font-weight:bold" >            New                 </label></td>  
>                     <td><input id="nom" name= "Pseudo" style="width: 156px"/></td>     
>                     <td><input id="mail" name= "Pseudo" style="width: 156px"/></td>      
>                      <td><input id="mot" name= "Pseudo" style="width: 156px"/></td>  
>                      <td><input id="phone" name= "Pseudo" style="width: 156px"/></td>
>                 </tr>
>                   <tr>
>                   <td><label  id="id"  style="visibility:hidden" >@Model.Identification</label></td>
>                   <td><input type="submit" value="Modify"     style="width: 156px; position:relative" /></td>
>                    </tr>
>       </table>
> 
> } 
> ```

动作保存：

```
public ActionResult Save(string id, string nom, string mail, string phone, string mot)
        {

          if(c.UpdateUser(id, (c.GetPassword().Count + 1).ToString(), mot, "", nom, phone, mail))   return RedirectToAction("Admin", "Administration");
          else return RedirectToAction("Index", "Administration"); 

        } 
```

方法更新用户

```
public bool UpdateUser(string identification, string acc, string mot, string notify, string nom, string phone, string mail)
       {
          if ((!String.IsNullOrEmpty(identification)) && (!String.IsNullOrEmpty(acc)) && (!String.IsNullOrEmpty(nom)) && (!String.IsNullOrEmpty(mail)) && !(String.IsNullOrEmpty(mot)) && Email_Exist(mail) == -1)
               {
                   using (NHibernate.ISession nhSession = User.OpenSession())
                   {
                       nhSession.Transaction.Begin();
                       User u = new User() { Account = acc, Identification = identification, ContactEmail = mail, ContactName = nom, ContactPhone = phone, NotifyEmail = notify, Password = mot };
                       nhSession.Update(u);
                       nhSession.Transaction.Commit();
                       nhSession.Close();
                       return true;
                   }
               }
               return false;} 
```

我总是被重定向到页面索引，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:59:28.690

通常您会首先从 NHibernate 加载对象，然后更改该实例中的属性。您还对 NHibernate 进行了一些无用的调用：

```
using (NHibernate.ISession nhSession = User.OpenSession())
using (var trans = nhSession.BeginTransaction())
{
    User u = nhSession.Get<User>(id);

    // Now update non-identifier fields as you wish.

    // Since the instance is already known by NH, the following
    // is enough (with default NH settings) to persist the changes.
    trans.Commit();
}

return true; 
```

无需在会话上调用 Close()，因为这是由 using 语句处理的。此外，在 User 类上调用 OpenSession() 看起来非常奇怪——它不属于你的数据表示类。

# java - inputMismatchException Java 从纯文本文件中读取双精度

> ID：12517326
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:25.137
> 
> 标签：java

使用

```
 double variable = inputFile.nextDouble(); 
```

给出不匹配错误，我不知道为什么......有人知道发生了什么吗？

输入文件只是一堆像5.0这样的双精度......

好的，这是代码片段

```
String fileName;
Scanner scanner = new Scanner(System.in);
System.out.println("\nEnter file name that contains the matrix and vector: ");
fileName = scanner.nextLine();
Scanner inputFile = new Scanner(fileName);

double a1 = inputFile.nextDouble(); 
```

输入文件是此格式的纯文本文档 .txt

```
5.0 4.0 -3.0
4.0 2.0  5.0
6.0 5.0 -2.0
-13.0 4.0 12.0 
```

我不明白为什么它不会把它们当作双打......

至于它期望文件的格式是什么......我想是二进制的？这不是默认的吗？我没有在代码中指定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:08:03.183

`InputMismatchException`是扫描器尝试将字符串解析为无法解析的格式的结果。例如，调用`Double.parseDouble`诸如“3.3 米”之类的字符串将引发 NumberFormatException。正如*iccthedral 所*添加的，即使是像“3.0”这样重要的字符串（注意空格）也会导致 NFE。

当 NumberFormatException 发生在 中时`Scanner.nextDouble()`，NFE 将被包装并在 InputMismatchException 中重新抛出，这就是这里发生的情况。

为确保您的扫描仪*可以*读取一个替身，请致电并仅在扫描仪有下一个替身*时才*`Scanner#hasNextDouble()`继续获取替身。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:06:09.000

预先添加支票

```
if (inputFile.hasNextDouble()) { 
 double variable = inputFile.nextDouble();
} else if (inputFile.hasNext()) {
 System.out.println("Not double at token " + inputFile.next());
} 
```

为了确定失败的原因和确切位置。

可能是您的分隔符不是`" "`并且您没有手动指定它。要设置分隔符，请调用`useDelimiter(...)`函数之一。

* * **

# eclipse - 如何调试远程 OSGi 包？

> ID：12517327
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:28.570
> 
> 标签：eclipse, osgi, sts-springsourcetoolsuite

我对 OSGi 完全陌生，我正在开发一个 OSGi 包，我想调试我的代码（设置断点、逐步运行、变量查找......）。

我的 virgo 服务器在端口 8001 上监听。

我怎样才能做到这一点 ？

我正在使用 Springsource Tool Suite 3.0，并且我的包在远程 virgo 服务器上运行。

感谢您给我的任何提示。

马可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:44:09.830

看看这个答案，我相信它也会帮助你： [Eclipse中的远程调试](https://stackoverflow.com/questions/4346018/remote-debugging-in-eclipse)

# javascript - Javascript自我编辑？

> ID：12517328
> 
> 赞同：4
> 
> 时间：2012-09-20T16:57:37.420
> 
> 标签：javascript, html

```
<html>
<body>
<form>
    <textarea></textarea>
    <input type=submit value="Save"></input>
</form>
</body>
</html> 
```

有没有办法获取上述本地文件并添加 javascript，以便我可以在文本区域中键入“Hello World”，单击保存并让文件覆盖自身，以便文件更改为：

```
<html>
<body>
<form>
    <textarea>Hello World</textarea>
    <input type=submit value="Save"></input>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:00:38.260

简而言之：没有。纯 javascript 无法访问服务器的文件系统。如果您希望这样做，您将需要查看服务器脚本或编程环境，如 PHP、ASP、ASP.NET 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:09:57.090

据我所知，这是不可能的。您不希望脚本能够访问您的本地文件系统并摆弄您的文件，对吗？我认为你可以用 Java 做到这一点。但这超出了目前的范围。

例如，您可以用 PHP 编写一个非常简单的脚本，但是您必须将它托管在服务器上或在您的计算机上运行服务器。

你到底想达到什么目的？项目是什么？

# python - appengine 上的 Facebook 图形 api 请求 URL 无效

> ID：12517332
> 
> 赞同：0
> 
> 时间：2012-09-20T16:57:49.930
> 
> 标签：python, google-app-engine, facebook-graph-api, urllib

我对 fb graph api 有一个请求，如下所示：

```
https://graph.facebook.com/?access_token=<ACCESSTOKEN>&fields=id,name,email,installed&ids=<A LONG LONG LIST OF IDS> 
```

如果请求中 id 的数量超过 200-ish，则会发生以下情况：

*   在浏览器中：工作
*   在本地测试中 urllib：部署超时
*   appengine 应用程序：“无效的请求 URL（后跟 url）”虽然这个并没有挂起

对于低于 200 左右的 id 数量，它适用于所有这些。当然，我可以将 id 列表拆分并单独获取它们，但我想知道为什么会发生这种情况以及这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:28:15.957

我第一次没有阅读你的问题。我没有向右滚动嵌入代码以意识到您使用的是长 URL。

通常有最大 URL 长度。这将防止您收到较长的 HTTP GET 请求。解决这个问题的方法是将参数嵌入到 POST 请求的数据中。

根据这个问题，看起来 FB 的 Graph API 确实支持它： [在 Facebook Graph API 上使用 POST 请求](https://stackoverflow.com/questions/6058302/using-post-request-on-facebook-graph-api)

# spring - 使用 Spring 定义 SOAP 连接器时，我的 WebApp 中的 Saxon 和 Xalan 出现问题

> ID：12517333
> 
> 赞同：2
> 
> 时间：2012-09-20T16:57:50.507
> 
> 标签：spring, soap, saxon, xalan

我正在尝试将 SOAP Web 服务添加到现有应用程序中，并且由于 Saxon / Xalan 冲突而遇到大量麻烦。当我的 Web 应用程序启动时，我总是收到错误消息：

```
 java.lang.IllegalArgumentException: Unknown type of result: class javax.xml.transform.dom.DOMResult 
```

堆栈跟踪：

```
Caused by: java.lang.IllegalArgumentException: Unknown type of result: class javax.xml.transform.dom.DOMResult
at net.sf.saxon.event.SerializerFactory.getReceiver(SerializerFactory.java:154)
at net.sf.saxon.IdentityTransformer.transform(IdentityTransformer.java:24)
at org.springframework.xml.transform.TransformerHelper.transform(TransformerHelper.java:138)
at org.springframework.xml.transform.TransformerObjectSupport.transform(TransformerObjectSupport.java:96)
at org.springframework.ws.wsdl.wsdl11.provider.InliningXsdSchemaTypesProvider.getSchemaElement(InliningXsdSchemaTypesProvider.java:113)
at org.springframework.ws.wsdl.wsdl11.provider.InliningXsdSchemaTypesProvider.addTypes(InliningXsdSchemaTypesProvider.java:101)
at org.springframework.ws.wsdl.wsdl11.ProviderBasedWsdl4jDefinition.afterPropertiesSet(ProviderBasedWsdl4jDefinition.java:233)
at org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition.afterPropertiesSet(DefaultWsdl11Definition.java:182)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419) 
```

我在一个独立的 Web 应用程序中创建了一个 SOAP Web 服务的原型，它运行良好。检查原型，没有提到撒克逊人，变压器的类型是：

```
com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl 
```

将代码添加到我现有的（大型）Web 应用程序很简单，但是发生转换时，Transform 对象的类型为：

```
 net.sf.saxon.IdentityTransformer 
```

现在，Saxon 被部分应用程序使用，并且（可能）不能仅仅被删除。（我已经走了这条路线，它似乎是一罐蠕虫）。我正在使用 DefaultWsdl11Definition 对象来创建我的 WSDL 模式。我如何声明应用程序这方面的转换应该使用 Xalan 而不是 Saxon？我正在使用 Spring 连接所有内容，我的 SOAP Web 服务的 servlet 类是：

```
<bean id="projectSearch" class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">
  <property name="schema" ref="schema"/>
  <property name="portTypeName" value="ProjectSearch"/>
  <property name="targetNamespace" value="http://FOO.FOO/foo"/>
  <property name="locationUri" value="/soap/reso"/>
  <property name="requestSuffix" value="Request"/>
  <property name="responseSuffix" value="Response"/>                                   
</bean>
<bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema">
  <property name="xsd" value="/WEB-INF/ws-project.xsd"/>
</bean> 
```

有人对如何解决我的 Saxon / Xalan 问题有任何建议吗？

谢谢，

菲尔

# java - 在给定的路径/位置打印文件

> ID：12517335
> 
> 赞同：-4
> 
> 时间：2012-09-20T16:58:02.943
> 
> 标签：java

我想在 Java 中执行以下操作：

1.  我在本地系统上有一个文件路径（“ doc\reports.pdf”）
2.  将其提供给打印机或设置打印机在此位置打印此文件。
3.  向用户弹出打印对话框，让他选择打印属性。
4.  打印文件。

我尝试使用`java.print.awt`包并尝试`jasperprint`这样做，但似乎没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:06:20.123

使用 java.awt.Desktop 打印方法，您可以使用本地桌面打印工具打印 File 对象。

# php - php登录模块不起作用

> ID：12517343
> 
> 赞同：2
> 
> 时间：2012-09-20T16:58:51.913
> 
> 标签：php, mysql, wamp, web-deployment

我知道一点 php-mysql 和 web 编程。对于我的项目工作，我制作了一个登录模块，它包含两个页面，但有一些错误。我将 WAMP 用于项目，每当我提供数据并按登录时，它都不会转到 profile.php 页面并且会话不会启动。按下登录按钮后它显示相同的页面（login.php） 从过去两天我一直在寻找这个错误，但我无法解决它。我的项目还有其他几页。这是我的代码。

**登录.php**

```
 <html>
<head>
<link rel="stylesheet" type="text/css" href="text.css" ></link>
<title>Login</title>
</head>

<body>
<div class="container" >
<div id="header" style="text-align: center;" >
<table width="500" align="center">
    <tr >
    <img src="logo.jpg"/>
    </tr>
</table>
</div>

<div>
<table class="form" align="center"  style="height:200px;padding-left:30px;float-align:center;margin-left=20px;margin-top:40px;margin-bottom:20px;text-align:;padding-left:20px;">
<form action="loginproc.php" method="POST">
<tr>
    <td align="center"colspan="780px" >
    <h3 style="font-family:Calibri; font-size: 22pt;font-weight: bold; color:#3B8C8C;text-align: center;">LOGIN</h3></td>
</tr>
<tr>
    <td>Email ID</td>
    <td><input type="email" name="emailid" maxlength="50" /></td>
</tr>
<tr>
    <td>Password</td>
    <td><input type="password" name="pwd" /></td>
</tr>
<tr>
    <td colspan="3" align="center" style="margin-bottom:20px;">
    <input type="submit" name="submit" class="button" value="Login" style="margin-bottom:20px;margin-top:20px;"/>
    <input type="reset" name="reset" class="button" value="Reset" style="margin-bottom:20px;margin-top:20px;"/>
</tr>   
</form></table></div>
</div>
</body>

</html> 
```

**登录过程.php**

```
 <?php
if(isset($_REQUEST['submit']))
{
$server="localhost";
$user="root";
$password="";
$db="utility";
$con = mysql_connect($server,$user,$password);
if(!$con) 
{
    die("Cannot Connect".mysql_error());
}
else
    {
    if(!mysql_select_db($db,$con))
    {
    header('Location: login.php');
    }
    else
    {
    $email = isset($_POST['emailid'])? $_POST['emailid']:"";
    $email = mysql_real_escape_string($email);

    $password = isset($_POST['pwd'])? $_POST['pwd']:"";
    $password = mysql_real_escape_string($password);

    $access = "SELECT * FROM register WHERE (email = '$email') AND (password = '$password')";
    $access = mysql_query($access);
    $accessrow = mysql_num_rows($access);

    if($accessrow == 1)
    {
        include('session.php');
        $_SESSION['email'] = $email;
        header('Location: profile.php');
    }
    else
    {
        header('Location: home.php');   
    }
    mysql_close($con);
    }
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:06:54.333

在您发布的代码中，您有一个前导空格，这将阻止您的会话启动，因为必须在任何输出之前设置会话 cookie。

```
*SPACE*<?php
if(isset($_REQUEST['submit']))
{ 
```

该空间是您帖子中的错误，还是您在 login.php 文件中真正拥有的空间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:12:14.517

检查数据库连接和这一行`if(!mysql_select_db($db,$con))` ，以便您知道，使用 MySQLi 或 PDO_MySQL 而不是 MySQL，因为它已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:34:21.993

您在此处执行的代码

```
if(!mysql_select_db($db,$con))
{
header('Location: login.php');
} 
```

可能是给定的数据库不存在，这就是`login.php`显示页面的原因。检查您的数据库。

并尝试`HTML`正确安排您的代码。你用`Form`在里面`Table`。

应该是这样的

```
<form>
    <table>
        // your code..
    </table>
</form> 
```

# python - Process 和 Pool 类是否共享相同的工人？

> ID：12517346
> 
> 赞同：2
> 
> 时间：2012-09-20T16:59:00.987
> 
> 标签：python, process, multiprocess

我有一个 python 脚本正在执行一些 map reduce-ish ETL。我不是代码的发起者，而是致力于分析/诊断其运行时以进行一些改进。

在包中，它使用了一个“进程”：

```
worker = Process(target=grab_worker)

worker.start() 
```

从我们的 CDN 中提取新文件的永久 FTP 循环，不能包含 FTP 代码，但不应该与问题相关

在后面的代码中，我们创建了一个`Pool`运行一些异步函数的 worker 实例：

```
workerpool =  multiprocessing.Pool(processes=4)
# ...
resultobjs[k] = workerpool.apply_async(func, args=fargs) 
```

同样，其中的基础代码应该与我认为不包括代码的问题无关。

我的问题是，在 Python 中，一旦我创建了工人`Pool`，那里的工人会与`Process`?

换句话说，如果我首先创建 1 个带有进程执行某事的工作人员，然后在执行时创建具有池类的工作人员，当循环返回并尝试运行向该过程注册的函数时，它会使用先前创建的工作人员吗?

或者，相反，它是否通过允许每个类实例仅引用它产生的工人（`Process`重用其先前创建的一个工人，并`Pool`继续使用其指定的工人与`Process`使用产生的工人`Pool`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:34:00.907

对此`mp.Process`一无所知`mp.Pool`。所以调用`mp.Process`不会以某种方式使用由`mp.Pool`.

# objective-c - 选项卡导航控制器，从第一个视图开始

> ID：12517347
> 
> 赞同：0
> 
> 时间：2012-09-20T16:59:03.313
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller

我的应用程序是基于选项卡的应用程序，在某些选项卡中有导航控制器。

![在此处输入图像描述](../Images/44e72ab36e31ac4da53c80815d93d0bd.png)

如果我在视图中导航，并且当我在第二个视图（在导航中）并更改选项卡时，当我再次单击选项卡时，它会在我完成后从第二个视图开始。

所以，我想要的是在更改选项卡时，

```
popToRootViewControllerAnimated: 
```

影响。所以，我总是从第一个视图开始。

我怎样才能做到这一点？

谢谢！

根据 Bart Whiteley 的回答，我的 MainTab.h，我在我的项目中添加了一些代码：

```
#import <UIKit/UIKit.h>

@interface MainTab : UITabBarController <UITabBarControllerDelegate,UITabBarDelegate>

@end 
```

MainTab.m:

```
- (void)viewDidLoad
  {
   [super viewDidLoad];

   NSLog(@"this class is loaded");
   self.tabBarController.delegate = (id)self;
   [self setDelegate:self];
 }

 -(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
 {
  NSLog(@"changing tab");
   if ([viewController isKindOfClass:[UINavigationController class]]) {
     [(UINavigationController*)viewController popToRootViewControllerAnimated:YES];
   }
 } 
```

解决了！我用代码编辑我的帖子

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:31:16.153

为 UITabBarController 设置一个委托，并实现这个委托方法：

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
   if ([viewController isKindOfClass:[UINavigationController class]]) {
     [(UINavigationController*)viewController popToRootViewControllerAnimated:YES];
   }
} 
```

# winforms - Visual Studio 2010 中不受欢迎的 Windows 窗体调整大小

> ID：12517352
> 
> 赞同：2
> 
> 时间：2012-09-20T16:59:39.623
> 
> 标签：winforms, visual-studio-2010

我一直在 Visual Studio 2010 中使用 C# 创建一个大型 Windows 窗体的项目。让我感到惊讶的是，每当我觉得我需要更改表单的布局并在设计器视图中打开它时，它会调整为一组稍小的尺寸。每次这样做时，我都必须恢复大小并在某些面板偏离位置时重新定位它们。有谁知道为什么这种情况不断发生？我不得不在不工作时保持设计器窗口关闭，因为当我在 Visual Studio 中启动项目时它会调整大小，如果我上次关闭项目时视图保持打开状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:59:57.543

我也在寻找那个答案。这可能与您的问题相似？[visual studio 2005 设计器移动控件并调整窗体大小](https://stackoverflow.com/questions/1158130/visual-studio-2005-designer-moves-controls-and-resizes-form/4404710#4404710)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T09:01:27.333

我的项目中也遇到了这个问题。

表单属性；

*   AutoScaleMode = 字体
*   控制框 = 假
*   FormBorderStyle = FixedSingle
*   最大化框 = 假
*   最小化框 = 假
*   显示图标 = 假
*   ShowInTaskbar = False
*   StartPosition = CenterParent

我将表单大小设置为 485:210。我保存并关闭表格。我重新打开表格，表格大小改为481:206。我不知道为什么会这样。

首先，我四处寻找并找不到解决方案。

*   AutoScaleMode 在我的表单中设置为 Font。
*   Windows 分辨率为 1360 x 768。

我尝试将 AutoScaleMode 属性设置为 None，但表单大小再次更改。我改变了Dpi，但结果是一样的。我尝试对表单中的所有控件使用 Docking，但结果是一样的。我尝试了在stackoverflow中找到的所有答案。

我的其他表格没有任何问题。然后我意识到我的其他表单有 ControlBox。

***然后我将 ControlBox 属性设置为 True***。这次表格的大小没有改变。

# javascript - 性能 - Date.now() 与 Date.getTime()

> ID：12517359
> 
> 赞同：134
> 
> 时间：2012-09-20T17:00:21.133
> 
> 标签：javascript

```
var timeInMs = Date.now(); 
```

每个[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)

对比

```
var timeInMs = new Date(optional).getTime(); 
```

每个[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)。

除了语法和通过第二个版本中的可选设置日期（不是当前）的能力之外，两者之间有什么区别吗？

Date.now() 更快 - 查看[jsperf](http://jsperf.com/gettime-vs-now-0)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-09-20T17:04:32.107

这些东西是一样的（在语义上*编辑*；性能稍微好一点`.now()`）：

```
var t1 = Date.now();
var t2 = new Date().getTime(); 
```

但是，任何已创建`Date`实例的时间值在其构造时（或在其设置的任何时间/日期）都会被冻结。也就是说，如果你这样做：

```
var now = new Date(); 
```

然后稍等片刻，随后的调用`now.getTime()`将告诉您设置变量时的时间。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-09-20T17:05:43.200

它们实际上是等效的，但您应该使用`Date.now()`. 它更清晰，速度大约是原来的两倍。

编辑：来源：http: [//jsperf.com/date-now-vs-new-date](http://jsperf.com/date-now-vs-new-date)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-27T17:46:18.060

当你这样做时，`(new Date()).getTime()`你正在创建一个新的 Date 对象。如果您重复执行此操作，它将比 Date.now() 慢约 2 倍

同样的原则也适用于`Array.prototype.slice.call(arguments, 0)`vs`[].slice.call(arguments, 0)`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T17:03:43.550

对，那是正确的; 在使用当前时间时，它们实际上是等效的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-28T22:02:18.647

有时最好在 Date 对象格式中保留一些时间跟踪变量，而不是仅仅几毫秒，以便在不重新实例化的情况下访问 Date 的方法。在这种情况下， Date.now() 仍然胜过 new Date() 之类的东西，尽管在我的 Chrome 上只有大约 20%，在 IE 上只有一点点。

请参阅我的 JSPERF

```
timeStamp2.setTime(Date.now()); // set to current; 
```

对比

```
timeStamp1 = new Date(); // set to current; 
```

[http://jsperf.com/new-date-vs-settime](http://jsperf.com/new-date-vs-settime)

# oracle - 事务中的 Oracle 函数

> ID：12517360
> 
> 赞同：0
> 
> 时间：2012-09-20T17:00:25.023
> 
> 标签：oracle

我在事务中插入一条记录，然后我通过 Oracle 函数检索相同的记录。oracle 函数不返回任何记录。我的 DBA 告诉我，Oracle 函数不在事务中运行。我该如何解决这个问题？

示例：使用 oracle 提供程序开始事务

执行一些 SQL：

插入所有者（FIRST_NAME，LAST_NAME）值（'JOHN'，'SMITH'）

从函数中获取事务中的记录（71 是示例 ID）： select * from table (GET_OWNER_DETAILS_FNC (71) )

这是Oracle函数：

```
CREATE OR REPLACE FUNCTION "AROH"."GET_OWNER_DETAILS_FNC" (p_owner_information_oid  in aroh_owner_information.owner_information_oid%type ) 
return OWNER_DETAILS_TABLE_TYPE_FNC

IS 
PRAGMA AUTONOMOUS_TRANSACTION; 

v_owner_details_set   OWNER_DETAILS_TABLE_TYPE_FNC := OWNER_DETAILS_TABLE_TYPE_FNC();

CURSOR c_owner_dtls IS
select oi.owner_information_oid, 
oi.first_name, 
oi.last_name, 
oi.company_name, 
oi.license_information, 
oi.company_ind, 
oi.middle_initial, 
oi.title_type_oid, 
oi.suffix, 
oi.status_type_code, 
oi.primary_phone, 
oi.secondary_phone, 
oi.secondary_phone_type_code, 
oi.primary_phone_type_code, 
oi.email_address, 
oi.comments, 
oi.primary_phone_extension, 
oi.secondary_phone_extension, 
poa.owner_address_oid as primaryaddressid, 
poa.address_type_code as primaryaddresscode, 
poa.address1 as primaryaddress1, 
poa.address2 as primaryaddress2, 
poa.city as primarycity, 
poa.state as primarystate, 
poa.postal_code as primaryzip, 
poa.current_ind as primarycurrent, 
soa.owner_address_oid as secondaryaddressid,
soa.address_type_code as secondaryaddresscode, 
soa.address1 as secondaryaddress1, 
soa.address2 as secondaryaddress2, 
soa.city as secondarycity, 
soa.state as secondarystate, 
soa.postal_code as secondaryzip, 
soa.current_ind as secondarycurrent,
(    select
      (    select oa2.owner_information_oid 
            from aroh_owner_aircraft_rlshp oa2 
            where upper(primary_owner) like '%PRIMARY%' 
                            and oa2.aircraft_oid = oa1.aircraft_oid
                            and rownum = 1) as prim_owner_oid
                from aroh_owner_aircraft_rlshp oa1
                where oa1.owner_information_oid = p_owner_information_oid
                   and rownum = 1 
) as primary_owner_oid,
(          select 
              case when (upper(primary_owner) like '%PRIMARY%')
                                                then 'Y'
                                                else 'N' end as isprimary
                from aroh_owner_aircraft_rlshp
                where owner_information_oid = p_owner_information_oid
                and rownum = 1
) as is_primary
from aroh_owner_information oi 
inner join (select * 
                  from aroh_owner_address 
                where upper(current_ind) = 'Y' 
                    and address_type_code = 'OPRIM') poa 
on oi.owner_information_oid = poa.owner_information_oid 
left outer join (select * 
                        from aroh_owner_address 
                        where upper(current_ind) = 'Y' 
                        and address_type_code = 'OSEC') soa 
on oi.owner_information_oid = soa.owner_information_oid 
where   oi.owner_information_oid = p_owner_information_oid; 

begin 

For main_row in c_owner_dtls 
loop 
  v_owner_details_set.EXTEND; 
  v_owner_details_set(v_owner_details_set.LAST) :=  OWNER_DETAILS_TYPE    (main_row.owner_information_oid  , main_row.first_name   , main_row.last_name   , main_row.company_name   
   , main_row.license_information   , main_row.company_ind   , main_row.middle_initial   , main_row.title_type_oid   , main_row.suffix    , main_row.status_type_code   , main_row.primary_phone  
   , main_row.secondary_phone   , main_row.secondary_phone_type_code   , main_row.primary_phone_type_code   , main_row.email_address   , main_row.comments   , main_row.primary_phone_extension   
   , main_row.secondary_phone_extension   , main_row.primaryaddressid   , main_row.primaryaddresscode   , main_row.primaryaddress1   , main_row.primaryaddress2   , main_row.primarycity   
   , main_row.primarystate   , main_row.primaryzip   , main_row.primarycurrent   , main_row.secondaryaddressid    , main_row.secondaryaddresscode   , main_row.secondaryaddress1   
   , main_row.secondaryaddress2   , main_row.secondarycity   , main_row.secondarystate   , main_row.secondaryzip    , main_row.secondarycurrent   , main_row.primary_owner_oid   , main_row.is_primary ); 
end loop; 

return v_owner_details_set;

EXCEPTION
When others 
then dbms_output.put_line ('Oracle error: '||SQLERRM);

end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:25:27.057

The `AUTONOMOUS_TRANSACTION` pragma means that the function operates in the context of a separate transaction. By default (see [http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref1972](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref1972)) this uses the "read committed" isolation level, meaning that, when the transaction queries data, it sees only data that was committed before the query began. Since the data you inserted has not been committed, this means that the function can't see it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:05:44.707

来自 Oracle 文档：

`AUTONOMOUS_TRANSACTION`pragma 改变了子程序在事务中的工作方式。标有此 pragma 的子程序可以执行 SQL 操作并提交或回滚这些操作，而无需提交或回滚主事务中的数据。

你能试着摆脱那个杂注吗？

最后，“我的 DBA 告诉我 Oracle 函数不在事务中运行”是有问题的。我不是专家，但我真诚地怀疑这是否正确。

# php - 为什么 PHP 不接受带有参数 $1 的命令

> ID：12517367
> 
> 赞同：0
> 
> 时间：2012-09-20T17:00:55.723
> 
> 标签：php, arguments

> **可能重复：**
> [使 HTML 文件中的变量在 PHP 文件中工作](https://stackoverflow.com/questions/12500129/making-variable-from-html-file-work-in-php-file)

我有另一个文件（HTML 文件）将参数传递给这个 PHP 文件。它确实如此，我用“echo”检查了它，它抛出了我在 HTML 文件中写的相同参数，到目前为止，非常好。PHP 文件看起来像这样。

```
<?
       $filepath = "/usr/sbin";
       exec("ONE $search -command $filepath ");
       fopen($filepath, "rw");
?> 
```

命令“ONE”是我为在文件中执行一些“greps”而编写的 bash 脚本，它接受一个参数，即“$search”，它实际上被传递给这个 PHP 文件。如果我将“$search”换成实际的“searchword”，它就像一个魅力。为什么它不接受“$search”作为参数？它似乎只是忽略它并返回一个空白页面，但如果我使用“搜索词”它会返回我想要的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:03:09.310

您有语法错误`fopen`（可能是转录错误）。

你的意思是使用`$_REQUEST['search']`而不是仅仅`$search`？通过“将参数传递给此 PHP 文件的 HTML 文件”，我假设您的意思是通过某种链接或异步请求。如果是这种情况，您应该使用`escapeshellarg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:04:29.433

看一下这个：

```
exec("ONE {$search} -command {$filepath} "); 
```

它有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:06:47.313

```
exec("ONE $search -command $filepath "); 
```

尾随空间？

# macos - 如何为 Mac OS 应用程序设置文档图标？

> ID：12517368
> 
> 赞同：4
> 
> 时间：2012-09-20T17:00:55.410
> 
> 标签：macos

嗨 StackOverflow 人，

我已经看过这些注释并且对设置 McOSX 应用程序的主应用程序图标没有任何问题。

我找不到的是在 info.plist 文件中创建和识别与应用程序关联的各种不同类型文档一起使用的图标的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:16:25.573

您正在寻找`CFBundleTypeExtensions`和`CFBundleTypeIconFile`。在通用格式 中
指定。`CFBundleDocumentTypes``info.plist`

*   [Apple - 核心基础密钥](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)

如果是专有数据格式，请指定一个新的`Uniform Type Identifier`.

*   [Apple - 统一类型标识符简介概述](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_declare/understand_utis_declare.html)
*   [Apple - 声明新的统一类型标识符](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_declare/understand_utis_declare.html#//apple_ref/doc/uid/TP40001319-CH204-SW1)

# struts2 - 如何使用 Mockito 模拟 ServletActionContext.getRequest() 我们正在使用 Struts2

> ID：12517374
> 
> 赞同：1
> 
> 时间：2012-09-20T17:01:32.860
> 
> 标签：struts2, mocking, junit4, mockito

我尝试了这样的事情，但仍然抛出 NullPointerException

```
@RunWith(MockitoJUnitRunner.class)
public class MyActionTest extends BaseActionTestCase {
      @Mock private ServletActionContext context;  

@Mock
private serviceclass serviceMock;
@InjectMocks
private MyAction action;

@Test
public void testSave() throws Exception {
      when(serviceMock.getTaskCode()).thenReturn("tc");
    action.save();
    verify(serviceMock).saveObject(any(Task.class));
} 
```

发布堆栈跟踪：

```
java.lang.NullPointerException
    at org.apache.struts2.ServletActionContext.getRequest(ServletActionContext.java:112)
    at com.princess.ilo.webapp.action.BaseAction.getRequest(BaseAction.java:176)
    at com.princess.ilo.webapp.action.BaseAction.getSession(BaseAction.java:198)
    at com.princess.ilo.webapp.action.BaseAction.getUser(BaseAction.java:206)
    at com.princess.ilo.webapp.action.TaskAction.save(TaskAction.java:116)
    at com.princess.ilo.webapp.action.TaskActionTest.testSave(TaskActionTest.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
    at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:17:50.030

嗯，我会说你仍然需要创建动作对象，比如

```
 @InjectMocks private MyAction action = new MyAction(); 
```

有关一些示例，请参见[http://docs.mockito.googlecode.com/hg/org/mockito/InjectMocks.html](http://docs.mockito.googlecode.com/hg/org/mockito/InjectMocks.html)

# javascript - 获取 div 中元素的 id，然后将它们组合成一个整数

> ID：12517375
> 
> 赞同：2
> 
> 时间：2012-09-20T17:01:32.520
> 
> 标签：javascript, jquery, mysql

如果我有一个`<div>`其中包含可变元素的 a ，每个元素都有一个不同的`id`，这是一个数字 - 例如，三个带有`id`s 的图像`1`，`2`以及`3`- 我如何编写一个函数来获取这些`id`s 然后将它们全部导出为一个整数而不是一个字符串？

目前我有一个函数可以获取 id 并导出它们，但是有一个问题。假设我用`id`s放了三个图像`1`，`2`并`3`放入`<div>`. 当它导出`id`s 并进入数据库时​​，我没有得到 123 的条目；我得到 1、2 或 3。我想这是因为函数将其导出为`1,2,3`而不是`123`. 任何人都可以帮忙吗？

我的代码（`#div`父级在哪里，`<div>`并且是我要收集`children`的带有 s 的元素）：`id`

```
$("#submit").click(function () {
    $("#div").children().each(function(n, i) {
        var boxid = this.id;
        // Do something with the ids
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:04:02.007

你真的不应该使用数字作为 id，但如果你是，

```
$("#submit").click(function () {
     var sum = 0;
     $("#div").children().each(function(n, i) {
      var boxid = this.id;
      sum += boxid;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:04:56.757

如果你想得到 123 整数的结果，你可以使用`map`方法然后`join`结果。

```
$("#submit").click(function () {
    var boxid = $("#div").children().map(function() {
          return this.id;
    }).get().join('') 

    boxid = Number(boxid)
}); 
```

[http://jsfiddle.net/rEfXb/](http://jsfiddle.net/rEfXb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:06:32.660

您可以使用以下内容：

```
var idString = $("#div").children().map(function(){
    return this.id;
}).get().join(""); 
```

如果您需要它是一个实际的 int，请使用 parseInt。否则，您可以只使用字符串。

```
var idInt = parseInt(idString,10); 
```

但请注意 numeric`id`在 html 5 之前无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:11:12.863

你可以用`reduce`它:)

假设我们有这个 html：

```
<div id="outer">
  <div id="1"></div>
  <div id="2"></div>
  <div id="3"></div>
  <div id="4"></div>
</div>​ 
```

然后你可以使用这个代码：

```
jQuery('#outer > *').toArray().reduce(function(value, elem) {
  return value + elem.id
}, '')​​​​
// => '1234' 
```

# c++ - 从控制台应用程序启动控制台应用程序

> ID：12517378
> 
> 赞同：0
> 
> 时间：2012-09-20T17:01:47.923
> 
> 标签：c++, createprocess

我正在使用这段代码从 GUI 应用程序启动一个进程。但是，根据此代码的注释，无法从控制台应用程序启动进程。实际上我想这样做，我想要一个控制台应用程序来启动另一个控制台进程，请问您知道该怎么做吗？

```
// This technique must be used for "console-less" parents such as GUI
//  applications or detached applications.
// Using the STARTUPINFO STARTF_USESTDHANDLES flag, requires that
//  the CreateProcess fInheritHandles parameter be set TRUE so that
//  the file handles specified in the STARTUPINFO structure will be
//  inherited by the child.

    // setup the child process's handles for stdin, stdout, & stderr.
STARTUPINFO childProcStartupInfo;
memset( &childProcStartupInfo, 0, sizeof(childProcStartupInfo));
childProcStartupInfo.cb = sizeof(childProcStartupInfo);
childProcStartupInfo.hStdInput = hFromParent;   // stdin
childProcStartupInfo.hStdOutput = hToParent;    //  stdout
childProcStartupInfo.hStdError = hToParentDup;  // stderr
childProcStartupInfo.dwFlags = STARTF_USESTDHANDLES | STARTF_USESHOWWINDOW;
childProcStartupInfo.wShowWindow = SW_HIDE;

    // Now create the child process, inheriting handles
PROCESS_INFORMATION childProcInfo;  /* for CreateProcess call */

bOk = CreateProcess(
    NULL,           // filename
    pCmdLine,   // full command line for child
    NULL,           // process security descriptor */
    NULL,           // thread security descriptor */
    TRUE,           // inherit handles? Also use if STARTF_USESTDHANDLES */
    0,              // creation flags */
    NULL,           // inherited environment address */
    NULL,           // startup dir; NULL = start in current */
    &childProcStartupInfo,          // pointer to startup info (input) */
    &childProcInfo);            // pointer to process info (output) */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:47:48.590

你试过[shellexecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)吗？我认为这行得通..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:17:32.163

你可以试试：ShellExecute()、ShellExecuteEx()、CreateProcess()、system()、_wsystem()。

还有更多，但其中之一必须为您工作！

就个人而言，我会选择 CreateProcess 而不是等待进程退出（在谷歌上找到这个例子： http: [//www.codeproject.com/Tips/333559/CreateProcess-and-wait-for-result](http://www.codeproject.com/Tips/333559/CreateProcess-and-wait-for-result)）。注意 system()/_wsystem() 是最容易使用的，但如果你不小心，它们可能会被利用！！！

希望能帮助到你！:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:26:12.587

试试这个代码：

```
#include <Windows.h>
#include <stdio.h>
#include <string.h>

int main(int argc, char* argv[])
{

    char* app_to_launch=new char[80];
    strcpy(app_to_launch,"app.exe");

    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        app_to_launch,        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );

    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );

    return 0;
} 
```

# sql - 优化简单 SQL SELECT

> ID：12517380
> 
> 赞同：-1
> 
> 时间：2012-09-20T17:02:03.303
> 
> 标签：sql, sql-server, optimization

我有一个简单的选择语句：

```
SELECT id1, id2, id3 FROM Table1 
```

表 1 包含大约 400,000 条记录。

目前，此语句需要 5 秒才能执行。

是否可以对此进行优化（不减少返回的记录数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:03:58.610

添加一个包含所有三个字段的索引，这将导致 SQL 从索引页面读取。这也称为覆盖索引。不过要记住的一件事是，添加索引会减慢写入时间，因为必须在写入期间重建索引。

```
CREATE INDEX IDX_CoveredIndex ON Table1 (id1, id2, id3) 
```

但是，只有 400K 行，我想说这可能不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:04:54.777

不，您的查询会导致简单的表扫描。只要你没有`where`或没有`order`声明，它是你能做的最好的。

问题是，为什么要选择所有没有过滤器的行？如果您在应用程序中进行过滤，那么您做错了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T17:08:27.833

这不是适当的优化，但你应该尝试`(nolock)`在表名之后使用，这样你就不会在这 5 秒内锁定表，让其他人也可以使用它......

仅当您尝试同时从多个位置访问表时，这才是优化，因此您无需等待一个结束使用该表来启动另一个，一次完成所有操作。

```
SELECT id1, id2, id3 FROM Table1 (nolock) 
```

PS：这是SQL Server sintax ...不知道其他SGBD，但很确定有相似之处...但是由于您的问题是关于SQL Server，所以我想没关系！:)

# rally - SDK2：Rally Grids 中的链接和列宽

> ID：12517383
> 
> 赞同：2
> 
> 时间：2012-09-20T17:02:11.247
> 
> 标签：rally

我正在以简单的方式显示 Rally Grid 中缺陷的链接：

```
columnCfgs: ['FormattedID', 'Name', ...] 
```

这会创建一个指向缺陷的链接，就像它应该做的那样。但是列宽太大了。但如果我执行以下操作，我会丢失链接：

```
columnCfgs: [{dataIndex: 'FormattedID', width: 50, text:'ID'}', 'Name', ...] 
```

是否有一个方便的 xtype 我可以用来调整宽度，但仍然有我的缺陷的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:05:13.507

不幸的是，现在没有一个简单的方法可以做到这一点。我们将在 GA SDK 2.0 之前解决这个问题。现在这里有一个解决方法：

```
Ext.define('DefectGridApp', {
    extend: 'Rally.app.App',

    launch: function() {
        Rally.data.ModelFactory.getModel({
            type: 'Defect',
            success: function(model) {

                //Get the default field config
                var field = model.getField('FormattedID');
                var fieldConfig = Rally.ui.grid.FieldColumnFactory.getColumnConfigFromField(field);

                //Override with your values
                fieldConfig.width = 10;

                this.grid = this.add({
                    xtype: 'rallygrid',
                    model: model,
                    columnCfgs: [
                        fieldConfig,  //pass your overridden formatted id field here
                        'Name',
                        'Owner'
                     ]  
                 });
             },
             scope: this
         });
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T18:46:50.327

对于稍微不同的解决方案，请参阅：[this question](https://stackoverflow.com/questions/11345702/i-how-i-add-a-link-to-userstory-for-the-formattedid-column) for how to add the link back to your original try。

# c++ - 针对普通字符的 PC-lint / Flexelint 规则

> ID：12517388
> 
> 赞同：0
> 
> 时间：2012-09-20T17:02:25.790
> 
> 标签：c++, c, static-analysis, pc-lint

Gimpel Software 的 PC-lint 和 Flexelint 有一条规则*"971: Use of 'char' without 'signed' or 'unsigned'"*，禁止使用`char`没有指定签名的普通类型。

[http://www.gimpel.com/html/pub/msg.txt](http://www.gimpel.com/html/pub/msg.txt)

我认为这是误导。如果`char`用作整数类型，那么显式指定签名可能是有意义的，但在用于文本字符时则不然。标准库函数，例如`printf`将指针指向 plain `char`，并使用`signed`or`unsigned char`是类型不匹配。当然可以在类型之间进行转换，但这可能会导致 lint 试图防止的那种错误。

这个针对普通`char`类型的 lint 规则是错误的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:26:54.447

PC Lint 在 900-999（对于 C++ 为 1900-1999）范围内提供的消息称为“选修笔记”，默认情况下是关闭的。如果您有以某种特定方式限制的编码指南，则可以使用它们。然后，您可以激活这些注释中的一个或多个，以帮助您发现潜在的违规行为。我认为没有人在真正的开发工作中激活了所有 9xx 消息。

你是对的`char`：它是一个字节（几乎总是）用于一个真正的字符。但是，a`char`被 C 编译器视为有符号或无符号。对于 C++，`char`与两者`unsigned char`和`signed char`.

在我工作过的许多嵌入式 C 环境中，习惯上都有一个编码规则，说明`char`不允许使用纯文本。那时应该激活此 PC Lint 消息。异常，如与其他库的接口，必须明确允许，然后使用 Lint 注释来抑制单个消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:14:41.143

我会假设他们选择强迫您选择的原因`signed`或者`unsigned`是因为 C 标准没有。C 标准规定`char`、`unsigned char`和`signed char`是三种独特的类型。

例如，gcc 设为默认值`signed`，但可以使用标志进行修改 `-funsigned-char`

所以 IMO 我会说不，它的规则没有错，它只是试图收紧 C 规范。

# visual-studio-2010 - Visual Studio 遇到异常

> ID：12517391
> 
> 赞同：8
> 
> 时间：2012-09-20T17:02:39.410
> 
> 标签：visual-studio-2010, visual-studio

所以，我使用的是 Visual Studio 2010，在过去一周或我收到来自 Visual Studio 的消息：“Visual Studio 遇到异常。这可能是由扩展引起的。”

我的 ActivityLog.xml 将日志显示为问题：

```
<entry>
    <record>321</record>
    <time>2012/09/20 16:52:36.126</time>
    <type>Error</type>
    <source>Editor or Editor Extension</source>
    <description>System.ComponentModel.Composition.CompositionException: The composition produced a single composition error. The root cause is provided below. 
Review the CompositionException.Errors property for more detailed information.&#x000D;&#x000A;&#x000D;&#x000A;1) Object reference not set to an instance of an object.&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: An exception occurred while calling the &apos;OnImportsSatisfied&apos; method on type &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword&apos;.&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: Cannot activate part &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword&apos;.&#x000D;&#x000A;Element: Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword --&gt;  Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: Cannot get export &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword (ContractName=&quot;Microsoft.VisualStudio.Text.Classification.EditorFormatDefinition&quot;)&apos; from part &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword&apos;.&#x000D;&#x000A;Element: Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword (ContractName=&quot;Microsoft.VisualStudio.Text.Classification.EditorFormatDefinition&quot;) --&gt;  Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSKeyword&#x000D;&#x000A;&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CompositionServices.GetExportedValueFromComposedPart(ImportEngine engine, ComposablePart part, ExportDefinition definition)&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.GetExportedValue(ComposablePart part, ExportDefinition export, Boolean isSharedPart)&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.CatalogExport.GetExportedValueCore()&#x000D;&#x000A;   at System.ComponentModel.Composition.Primitives.Export.get_Value()&#x000D;&#x000A;   at System.ComponentModel.Composition.ExportServices.GetExportedValueFromLazy[T](Export export)&#x000D;&#x000A;   at System.ComponentModel.Composition.ExportServices.&lt;&gt;c__DisplayClass4`2.&lt;CreateStronglyTypedExportOfTM&gt;b__1()&#x000D;&#x000A;   at System.Lazy`1.CreateValue()&#x000D;&#x000A;   at System.Lazy`1.LazyInitValue()&#x000D;&#x000A;   at System.Lazy`1.get_Value()&#x000D;&#x000A;   at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InstantiateExtension[TExtension](Object errorSource, Lazy`1 provider)</description>
</entry>

<entry>
    <record>322</record>
    <time>2012/09/20 16:52:36.202</time>
    <type>Error</type>
    <source>Editor or Editor Extension</source>
    <description>System.ComponentModel.Composition.CompositionException: The composition produced a single composition error. The root cause is provided below. Review the CompositionException.Errors property for more detailed information.&#x000D;&#x000A;&#x000D;&#x000A;1) Object reference not set to an instance of an object.&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: An exception occurred while calling the &apos;OnImportsSatisfied&apos; method on type &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment&apos;.&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: Cannot activate part &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment&apos;.&#x000D;&#x000A;Element: Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment --&gt;  Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment&#x000D;&#x000A;&#x000D;&#x000A;Resulting in: Cannot get export &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment (ContractName=&quot;Microsoft.VisualStudio.Text.Classification.EditorFormatDefinition&quot;)&apos; from part &apos;Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment&apos;.&#x000D;&#x000A;Element: Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment (ContractName=&quot;Microsoft.VisualStudio.Text.Classification.EditorFormatDefinition&quot;) --&gt;  Microsoft.VisualStudio.Web.Exports.ExportedClassificationFormatCSSComment&#x000D;&#x000A;&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CompositionServices.GetExportedValueFromComposedPart(ImportEngine engine, ComposablePart part, ExportDefinition definition)&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.GetExportedValue(ComposablePart part, ExportDefinition export, Boolean isSharedPart)&#x000D;&#x000A;   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.CatalogExport.GetExportedValueCore()&#x000D;&#x000A;   at System.ComponentModel.Composition.Primitives.Export.get_Value()&#x000D;&#x000A;   at System.ComponentModel.Composition.ExportServices.GetExportedValueFromLazy[T](Export export)&#x000D;&#x000A;   at System.ComponentModel.Composition.ExportServices.&lt;&gt;c__DisplayClass4`2.&lt;CreateStronglyTypedExportOfTM&gt;b__1()&#x000D;&#x000A;   at System.Lazy`1.CreateValue()&#x000D;&#x000A;   at System.Lazy`1.LazyInitValue()&#x000D;&#x000A;   at System.Lazy`1.get_Value()&#x000D;&#x000A;   at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InstantiateExtension[TExtension](Object errorSource, Lazy`1 provider)</description>
</entry> 
```

似乎没有任何特定的行为导致这种情况，有时会在我第一次启动 VS 时发生，有时会在我离开办公桌一段时间后再回来时发生。此外，从日志来看，它似乎是在加载 Visual Studio CSS 编辑包之后立即发生的。我安装了 MVC4，也许是新 CSS 的问题（我认为是 CSS3？）

无论如何，只是想知道是否有人以前遇到过这种情况并有某种解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:10:19.143

似乎某些 VS 扩展可能导致它崩溃。（您最近是否安装了扩展程序？）

尝试在安全模式下运行 VS 来诊断问题。

运行此命令并检查 VS 是否启动

```
devenv.exe /safemode 
```

更多在这里

[http://blog.meidianto.com/2010/05/16/vs2010-tips-8-got-annoying-visual-studio-2010-error-try-to-run-in-safe-mode/](http://blog.meidianto.com/2010/05/16/vs2010-tips-8-got-annoying-visual-studio-2010-error-try-to-run-in-safe-mode/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-10T06:14:01.597

VS 需要管理员权限来处理插件。所以右键单击VS并单击“以管理员身份运行”。它为我解决了。试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T07:37:42.977

我有同样的错误，我`ActivityLog.xml`显示以下错误：

> System.ComponentModel.Composition.CompositionException：合成产生单个合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。1）未找到与约束匹配的导出：ContractName Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator RequiredTypeIdentity Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator 导致：无法设置导入' Microsoft.Web.Editor.Composition.ComponentLocator(Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator)+SingleImporter.Import (ContractName="Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator" )'在部分'Microsoft.Web.Editor.Composition。ComponentLocator（Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator）+SingleImporter'。元素：Microsoft.Web.Editor.Composition.ComponentLocator(Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator)+SingleImporter.Import (ContractName="Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter. IWebLinterAggregator") --> Microsoft.Web.Editor.Composition.ComponentLocator(Microsoft.VisualStudio.Web.Editor.Package.Lint.WebLinter.IWebLinterAggregator)+SingleImporter 在 System.ComponentModel.Composition.CompositionResult.ThrowOnErrors(AtomicComposition atomicComposition) 在 System System.ComponentModel.Composition.Hosting.CompositionContainer 处的 .ComponentModel.Composition.Hosting.ImportEngine.SatisfyImportsOnce（ComposablePart 部分）。

通过转到工具 -> 扩展和更新 -> 更新 -> Visual Studio 库 -> 安装新版本来解决它`Microsoft ASP.NET and Web Tools`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-07T17:45:35.040

*（以下解决方案对我有用）*

我只是单击了解决方案文件，默认情况下它试图在 Visual Studio 2015 中打开 *.sln 文件，然后我收到错误消息“Visual Studio 遇到异常。这可能是由扩展引起的”。

我安装了两个 Visual Studio 版本 - Visual Studio 2015 和 Visual Studio 2017。我在记事本中打开 *.sln 文件，我可以看到 VisualStudioVersion = 14.0.24720.0，这表明解决方案是在 Visual Studio 2015 中创建的。

然后我右键单击 *.sln 文件并选择 vs 2017 打开它。然后就成功打开了。我最好的猜测是 Visual Studio 2015 扩展之一没有正确加载，这就是我收到该错误消息的原因。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-21T11:26:53.643

试试这个工具->导入和导出设置->重置所有设置。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-11-27T07:31:48.430

为您的 VS 版本下载 Web Essentials。它对我关于 ActivityLog.xml 的问题进行了排序。 [网络必备](http://vswebessentials.com/download)

# objective-c - iOS 6 地址簿不工作？

> ID：12517394
> 
> 赞同：14
> 
> 时间：2012-09-20T17:02:52.153
> 
> 标签：objective-c, ios, ios6, abaddressbook

我以编程方式从通讯簿中检索电子邮件地址的方法似乎不再适用于 iOS 6 设备。它在 iOS 5 中工作，奇怪的是，仍然在 iOS 6 模拟器中工作。是否有一种以编程方式从用户通讯录中检索联系人的新方法？

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

self.contacts = [[NSMutableArray alloc] init];

int contactIndex = 0;
for (int i = 0; i < nPeople; i++) {
    // Get the next address book record.
    ABRecordRef record = CFArrayGetValueAtIndex(allPeople, i);        

    // Get array of email addresses from address book record.
    ABMultiValueRef emailMultiValue = ABRecordCopyValue(record, kABPersonEmailProperty);
    NSArray *emailArray = (__bridge_transfer NSArray *)ABMultiValueCopyArrayOfAllValues(emailMultiValue);

    [self.contacts addObject:emailArray];
} 
```

为了澄清，上面没有崩溃，它只是不返回任何结果。ABAddressBookCopyArrayOfAllPeople 为空。谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-21T15:52:23.720

我创建了一个辅助类 ，`AddressBookHelper`来处理向后兼容性。以下是胆量：

```
-(BOOL)isABAddressBookCreateWithOptionsAvailable {
    return &ABAddressBookCreateWithOptions != NULL;
}

-(void)loadContacts {
    ABAddressBookRef addressBook;
    if ([self isABAddressBookCreateWithOptionsAvailable]) {
        CFErrorRef error = nil;
        addressBook = ABAddressBookCreateWithOptions(NULL,&error);
        ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
            // callback can occur in background, address book must be accessed on thread it was created on
            dispatch_async(dispatch_get_main_queue(), ^{
                if (error) {
                    [self.delegate addressBookHelperError:self];
                } else if (!granted) {
                    [self.delegate addressBookHelperDeniedAcess:self];
                } else {
                    // access granted
                    AddressBookUpdated(addressBook, nil, self);
                    CFRelease(addressBook);
                }
            });
        });
    } else {
        // iOS 4/5
        addressBook = ABAddressBookCreate();
        AddressBookUpdated(addressBook, NULL, self);
        CFRelease(addressBook);
    }
}

void AddressBookUpdated(ABAddressBookRef addressBook, CFDictionaryRef info, void *context) {
    AddressBookHelper *helper = (AddressBookHelper *)context;
    ABAddressBookRevert(addressBook);
    CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);

    // process the contacts to return
    NSArray *contacts = ...    

    [[helper delegate] addressBookHelper:helper finishedLoading:contacts];
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T17:12:21.293

可能与新的隐私控制有关——从 iOS 6 开始，在设备上，未经用户许可，应用无法访问用户的联系人。从文档中：

> 在 iOS 6.0 及更高版本上，如果调用者无权访问通讯簿数据库：
> 
> • 对于链接到iOS 6.0 及更高版本的应用程序，此函数返回NULL。
> 
> • 对于与早期版本的iOS 链接的应用程序，此函数返回一个空的只读数据库。

如果您没有看到权限警报出现（“SomeApp 想要访问您的联系人”），那么直接地址簿 API 可能只是假设他们没有访问权限并默默地失败；您可能必须显示 AddressBookUI 框架中的某些内容才能触发它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-10T11:52:55.747

试试这个：**必须先授予**对地址簿的访问权限，然后才能以编程方式访问它。这就是我最终要做的。

```
 #import <AddressBookUI/AddressBookUI.h>

  // Request authorization to Address Book
  ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

  if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
      // First time access has been granted, add the contact
      [self _addContactToAddressBook];
    });
  }
  else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    // The user has previously given access, add the contact
    [self _addContactToAddressBook];
  }
  else {
    // The user has previously denied access
    // Send an alert telling user to change privacy setting in settings app
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T12:35:13.113

可能与新的隐私控制有关，从 iOS 6 开始，设备上的应用程序无法在未经用户许可的情况下访问用户的联系人。

代码：

```
-(void)addressBookValidation
{

NSUserDefaults *prefs=[NSUserDefaults standardUserDefaults];
ABAddressBookRef addressbook = ABAddressBookCreate();
__block BOOL accessGranted = NO;

if (ABAddressBookRequestAccessWithCompletion != NULL)
{
    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined)
    {
        dispatch_semaphore_t sema = dispatch_semaphore_create(0);
        ABAddressBookRequestAccessWithCompletion(addressbook, ^(bool granted, CFErrorRef error)
                                                 {
                                                     accessGranted = granted;
                                                     dispatch_semaphore_signal(sema);
                                                 });
        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
        dispatch_release(sema);
    }
    else if(ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized)
    {
        accessGranted = YES;
    }
    else if (ABAddressBookGetAuthorizationStatus()==kABAuthorizationStatusDenied)
    {
        accessGranted = NO;
    }
    else if (ABAddressBookGetAuthorizationStatus()==kABAuthorizationStatusRestricted){
        accessGranted = NO;
    }
    else
    {
        accessGranted = YES;
    }

}
else
{
    accessGranted = YES;
}
[prefs setBool:accessGranted forKey:@"addressBook"];

NSLog(@"[prefs boolForKey:@'addressBook']--->%d",[prefs boolForKey:@"addressBook"]);
[prefs synchronize];
CFRelease(addressbook);
} 
```

# extjs - 如何让滚动条出现在 Rally 纸板组件中？

> ID：12517396
> 
> 赞同：7
> 
> 时间：2012-09-20T17:03:14.310
> 
> 标签：extjs, containers, rally

感谢另一个主题的帖子，提出并回答了我自己的问题：

我在自定义 Rally 应用程序中创建了一个纸板。纸板中的项目列表比屏幕显示的要长，但窗口或容器中没有滚动条。我尝试添加`autoScroll:true`到纸板的第一级属性以及纸板的`storeConfig`和`listConfig`。没有任何效果。什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-23T07:38:21.617

这是[安德斯马丁森的答案](https://stackoverflow.com/users/1686698/anders-martinson)

您必须将 autoScroll:true 添加到应用程序定义中：

```
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    autoScroll: true,
    //...
} 
```

一旦你这样做了，你就设置好了。

# node.js - Etherpad Lite 在哪里存储文档/pad？

> ID：12517398
> 
> 赞同：0
> 
> 时间：2012-09-20T17:03:30.810
> 
> 标签：node.js, etherpad

我在 Windows 上运行 Etherpad Lite，显然它在关机期间持续使用焊盘。但是哪里？它是否在 node.exe 进程中运行 sqlite？它使用什么文件来存储它可能使用的任何数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:10:07.763

如果您不指定**postgres**、**sqlite**或**mysql**配置`$APPDIR$/settings.json`

文件中还设置了dirtyDB 文件路径`settings.json`。-- 他们建议只使用dirtyDB 进行测试。

# javascript - 过滤 jQuery 数据表时如何忽略 HTML？

> ID：12517407
> 
> 赞同：9
> 
> 时间：2012-09-20T17:04:07.570
> 
> 标签：javascript, jquery, jquery-datatables

我正在使用[jQuery DataTables 插件](http://www.datatables.net/)，并且其中的过滤功能有一点问题。如果我有一个内容为 的表格单元格`<a href='foo6'>Blah</a>`，并且我过滤了“6”，那么即使“Blah”中没有“6”，该单元格也会显示出来。我想做的是让 DataTables 插件在过滤时忽略 HTML。

我试过搜索 DataTables 网站，发现相互矛盾、无用的线索。一篇文章建议我`sType:'html'`在 aaColumns 的定义中需要一个选项，但我试过了，但没有帮助……另外，后来的一篇文章建议当前版本的 DataTables 自动检测 HTML sType。我还发现了这个代码片段：

```
// Make filtering ignore HTML (see http://datatables.net/plug-ins/filtering)
$.fn.dataTableExt.ofnSearch['html'] = function ( sData ) {
    var n = document.createElement('div');
    n.innerHTML = sData;
    if (n.textContent) {
        return n.textContent.replace(/\n/g," ");
    } else {
        return n.innerText.replace(/\n/g," ");
    }
}; 
```

这应该解决问题......但它没有。

所以，我的问题是：有没有人知道如何让 DataTables 在过滤行时忽略非文本（即 HTML）内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T22:01:32.087

原来我需要`mRender`在我的列标题上使用自定义函数。更重要的是（因为我一开始没有检查“类型”参数就尝试过这个），您需要使用提供给该函数的类型参数以使其仅在过滤时应用。

我的最终结果看起来像这样：

```
aaHeaders: [{
    mRender: function(data, type, full) {
        // If we're filtering, don't look at the HTML; only filter on the text
        return type == 'filter' ? $(data).text() : data
    }
}], //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:11:19.383

你可以试试这个：

```
$.fn.dataTableExt.ofnSearch['html'] = function ( sData ) {
    return $("<div/>").html(sData).text();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T13:34:56.073

只需升级你的datatable.js ..我使用1.9.4并在升级到1.10.9后遇到同样的问题问题解决了..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T12:06:39.550

```
// To override basic search functionality of datatable
            $.fn.dataTable.ext.search.push(
                    function( settings, data, dataIndex ) {
                        var tableId = settings['sTableId'];
                        var searchTerm = settings.oPreviousSearch.sSearch;
                        if ( 'tableId' == tableId){
//I added tableId condition as I have multiple table on same page..
                            if(data[0].indexOf(searchTerm) > -1 ||data[2].indexOf(searchTerm) > -1||data[3].indexOf(searchTerm) > -1||data[4].indexOf(searchTerm) > -1||data[5].indexOf(searchTerm) > -1 || data[6].indexOf(searchTerm) > -1){
                                return true;
                            }else{
                                return false;
                            }
                        }
                        return true;
                    }
            ); 
```

# python - sqlalchemy 对动态惰性关系的条件多个过滤器

> ID：12517414
> 
> 赞同：8
> 
> 时间：2012-09-20T17:04:34.380
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在使用带有以下模型的 sqlalchemy

```
class Page(db.Model):
     id= ..
     posts = db.relationship('Post', lazy='dynamic')

class Post(db.Model):
   id=..
   page_id=..
   author= db.Column(db.String)
   date= db.Column(db.DateTime) 
```

在 Page 类中，我有一种方法可以获取特定日期和作者的页面帖子，看起来像这样

```
def author_posts(author, start_date=None, end_date=None):
    p= self.posts.filter(Post.author == author)

    if start_date:
       p.filter(Post.date >= start_date)

    if end_date:
       p.filter(Post.date <= end_date)

    return p 
```

问题是，即使给函数指定了开始和结束日期，它也会返回按作者过滤的帖子，而不是按日期参数过滤的帖子。

正确的方法是什么？

**编辑：生成的查询**

```
SELECT post.id AS post_id, post.page_id AS post_page_id, post.author AS post_author ... FROM post WHERE post.author = ? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T17:23:44.743

`filter()`返回一个新的查询对象，但您不存储它。`p`每次替换为结果：

```
if start_date:
   p = p.filter(Post.date >= start_date)

if end_date:
   p = p.filter(Post.date <= end_date)

return p 
```

# vb.net - 使用 vb.net 在表单中滚动问题

> ID：12517419
> 
> 赞同：0
> 
> 时间：2012-09-20T17:04:59.280
> 
> 标签：vb.net, events, scroll

我有一个表格，该表格有一个拆分容器。
在其中一个面板中有一个带有图像的图片框。我使用鼠标滚轮增加然后减小图片框的大小（也就是缩放图像）。当图片框变得大于面板可见区域时，它会创建 V 和 H 滚动条，这就是我想要的。

我遇到的问题是滚动条在我的图像缩放的同时滚动，有时面板滚动条会完全从图片框窃取我的鼠标滚轮事件并停止缩放图像。

关于如何在不使用滚动条的情况下获取鼠标滚轮事件并完全使用它们的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:18:19.323

编辑：再想一想，我认为这是一个焦点问题。输入时将焦点设置在 PictureBox 上。

```
Imports System.IO
Imports System.Xml

Public Class Form1

  Private Sub PictureBox1_MouseEnter(sender As Object, e As System.EventArgs) Handles PictureBox1.MouseEnter
    PictureBox1.Focus()
  End Sub

  Private Sub PictureBox1_MouseMove(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseMove
    PictureBox1.Focus()
  End Sub
End Class 
```

# java - 如何在 Hibernate 中将字符串映射到 DB 序列

> ID：12517421
> 
> 赞同：12
> 
> 时间：2012-09-20T17:05:05.957
> 
> 标签：java, oracle, hibernate

标题里差不多说了。我有一个看起来像这样的类：

```
@Entity
@Table(name="FOO")
public class Foo {

  private String theId;

  @Id
  @Column(name = "FOO_ID")
  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "fooIdSeq")
  @SequenceGenerator(name = "fooIdSeq", sequenceName = "SQ_FOO_ID", allocationSize = 10)
  public String getTheId() { return theId; }

  public String setTheId(String theId) { this.theId = theId; }
} 
```

使用 Oracle 11g，`FOO_ID`列是 a `VARCHAR2`，但序列`SQ_FOO_ID`产生 a `NUMBER`。数据库显然对此感到满意，但应用程序需要能够支持可能已在应用程序外部插入此列的非数字 ID。

考虑到上面的代码，我得到一个`org.hibernate.id.IdentifierGenerationException: Unknown integral data type for ids : java.lang.String`. 有没有办法做这个映射？

使用休眠 3.6。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T17:11:37.253

实现一个自定义的 IdentifierGenerator 类；来自[博客文章](http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/)：

```
import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.id.IdentifierGenerator;

public class StringKeyGenerator implements IdentifierGenerator {

    @Override
    public Serializable generate(SessionImplementor session, Object collection) throws HibernateException {
        Connection connection = session.connection();
        PreparedStatement ps = null;
        String result = "";

        try {
            // Oracle-specific code to query a sequence
            ps = connection.prepareStatement("SELECT TABLE_SEQ.nextval AS TABLE_PK FROM dual");
            ResultSet rs = ps.executeQuery();

            if (rs.next()) {
                int pk = rs.getInt("TABLE_PK");

                // Convert to a String
                result = Integer.toString(pk);
            }
        } catch (SQLException e) {
            throw new HibernateException("Unable to generate Primary Key");
        } finally {
            if (ps != null) {
                try {
                    ps.close();
                } catch (SQLException e) {
                    throw new HibernateException("Unable to close prepared statement.");
                }
            }
        }

        return result;
    }
} 
```

像这样注释实体 PK：

```
@Id
@GenericGenerator(name="seq_id", strategy="my.package.StringKeyGenerator")
@GeneratedValue(generator="seq_id")
@Column(name = "TABLE_PK", unique = true, nullable = false, length = 20)
public String getId() {
    return this.id;
} 
```

由于 Eclipse 中的错误，可能会引发错误，即生成器 ( `seq_id`) 未在持久性单元中定义。将其设置为警告，如下所示：

1.  选择**窗口 » 首选项**
2.  展开**Java 持久性 » JPA » 错误/警告**
3.  单击**查询和生成器**
4.  Set **Generator 未在持久性单元中定义**为：`Warning`
5.  单击**确定**以应用更改并关闭对话框

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-21T12:44:07.347

这是另一种方法：

```
import java.io.Serializable;

import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.id.IdentifierGeneratorHelper.BigDecimalHolder;
import org.hibernate.id.IntegralDataTypeHolder;
import org.hibernate.id.SequenceGenerator;

public class StringSequenceGenerator extends SequenceGenerator {
    @Override
    public Serializable generate(SessionImplementor session, Object obj) {
        return super.generate( session, obj ).toString();
    }

    protected IntegralDataTypeHolder buildHolder() {
        return new BigDecimalHolder();
    }
} 
```

必须在 id 属性上指定序列参数，如下例所示：

```
@Id
@GenericGenerator(name = "STRING_SEQUENCE_GENERATOR", strategy = "mypackage.StringSequenceGenerator", parameters = { @Parameter(name = "sequence", value = "MY_SEQUENCE_NAME") })
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "STRING_SEQUENCE_GENERATOR")
@Column(name = "MY_ID")
public String getMyId() {
    return this.myId;
} 
```

# ios - 在新的 iPhone 5 模拟器中，我的 iPhone 应用程序无法使用信箱运行。我如何将它送到信箱？

> ID：12517426
> 
> 赞同：4
> 
> 时间：2012-09-20T17:05:14.720
> 
> 标签：ios, xcode4.5, iphone-5

我刚刚下载了新版本的 Xcode 并运行了我一直在开发的应用程序。出于某种原因，它没有信箱。我想添加信箱效果，直到我为新屏幕准备好应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T19:47:19.657

*[@Hemang](https://stackoverflow.com/users/1603234/hemang)的所有荣耀，这个答案来自他上面的评论，我很乐意删除这个答案以尊重他的。*

我有确切的问题。需要做以下两个：

1.  重置模拟器：从菜单中，iOS 模拟器 > 重置内容和设置...。
2.  清理您的 Xcode 项目 (⇧⌘K)。就个人而言，我喜欢清理整个†派生数据目录（⌥⇧⌘K）。

† 又名[“从轨道上对整个站点进行核攻击……”](http://www.youtube.com/watch?v=aCbfMkh940Q)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T18:52:16.447

我认为切换到信箱的最简单快捷的方法就是：

*   从设备中删除应用程序
*   在 File Inspector 选项卡中取消选中 Default-568h@2x.png Target Dependency
*   清理并重建应用程序

如果您想切换回完整的 4 英寸外形尺寸，则无需再次删除应用程序，只需重新选中 Default-568h@2x.png 的 Target Dependency 框。

只有在切换回信箱时，您才必须从设备中删除应用程序，因为当您只是删除目标而不是应用程序时，Default-568h@2x.png 文件仍保留在设备上。

我正在设备上而不是模拟器上构建，所以在我看来这会容易得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T22:04:29.043

在模拟器中，删除您的开发应用程序。这将删除任何剩菜。现在再次运行，没有新的启动映像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T00:05:57.090

我有同样的问题。我添加了 Default-568h@2x.png 图像以查看我的应用程序的外观。看起来很可怕。所以我删除了该文件，该应用程序不再是信箱。

要修复它，请重置您的模拟器（注意，您将丢失模拟器上的任何其他内容）

![重置模拟器](../Images/f8ee99354b2ce5fd169ac6056be227e7.png)

然后在 XCode 中`Clean`，然后`Build`

![在此处输入图像描述](../Images/837b7e91c36e364aaf411b74f34f57e6.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T22:13:49.827

在您的模拟器上，转到

硬件 --> 设备 --> iPhone（视网膜 4 英寸）

那应该用信箱显示您的应用

# wdk - 错误 LNK2001：未解析的外部符号 _fltused 在 wdk

> ID：12517429
> 
> 赞同：4
> 
> 时间：2012-09-20T17:05:25.130
> 
> 标签：wdk

我正在尝试在将在 Windows 内核中使用的 C 代码中定义双数据类型变量。代码编译但在链接时出错。我尝试在源文件中使用 libcntpr.lib 并在代码中定义 __fltused 变量但无济于事。如果有人可以帮助我如何使用它，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:17:03.413

不知道是否仍然适用于当前的 WDK，但 Walter Oney 在[此处](https://groups.google.com/forum/?fromgroups=#!msg/comp.os.ms-windows.programmer.drivers/qeEAshA7cRc/wRk1WZndqAcJ)不鼓励在驱动程序中使用浮点内容。

> 不幸的是，这个问题比仅仅找到合适的库还要糟糕。C 编译器的浮点支持假定它将在一个应用程序环境中运行，您可以在其中初始化协处理器，安装一些异常处理程序，然后爆炸。它还假定操作系统将按照从那时起发生的所有线程上下文切换的要求来保存和恢复每个线程的协处理器上下文。
> 
> 这些假设在驱动程序中通常不成立。此外，对协处理器异常的运行时库支持无法正常工作，因为缺少一大堆基础设施。
> 
> 您基本上需要做的是以每次要使用协处理器时都初始化协处理器的方式编写代码（不要忘记 KeSaveFloatingPointState 和 KeRestoreFloatingPointState）。进行设置，使协处理器也永远不会产生异常。然后，您可以简单地在某处定义符号 __fltused 以满足链接器的要求。（该符号通常所做的只是拖入运行时支持。您不需要该支持，因为正如我所说，它在内核模式下不起作用。）您无疑需要一些汇编语言代码来执行初始化步骤。
> 
> 如果您有一个系统线程将执行所有浮点数学运算，则可以在线程开始时初始化协处理器一次。从那时起，系统将根据需要保存和恢复您的状态。
> 
> 不要忘记您只能在 IRQL < DISPATCH_LEVEL 处进行浮点运算。
> 
> 除其他外，还有 FINIT。如果您对协处理器编程不熟悉，我的建议是告诉您的管理层这是一个需要大量研究才能解决的专业问题。然后飞往马提尼克岛一周左右（即在飓风季节之后），在适当的环境中进行研究。
> 
> 说真的，如果您不熟悉 FINIT 和其他数学协处理器指令，那么您可能不应该将其合并到驱动程序中。

微软也有一篇有趣的读物：[C++ for Kernel Mode Drivers: Pros and Cons](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487420.aspx)

> 在 x86 系统上，浮点和多媒体单元在内核模式下不可用，除非特别要求。尝试不正确地使用它们可能会或可能不会在提高的 IRQL 处导致浮点错误（这会导致系统崩溃），但它可能会导致随机进程中的静默数据损坏。使用不当也会导致其他进程的数据损坏；此类问题通常难以调试。

# java - 加载后是否可以获得本机库信息

> ID：12517434
> 
> 赞同：2
> 
> 时间：2012-09-20T17:05:42.693
> 
> 标签：java, native, native-code

是否有可能获取有关本机库的信息，一旦从 java 加载例如库（32 位或 64 位）的体系结构。

目的：在运行时向用户显示库版本和库架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:43:48.847

所有本机库（Windows EXE、DLL、OCX、SYS 等）都是 PE 格式。PE 文件的意义在于，磁盘上的数据结构与内存中使用的数据结构相同。

将可执行文件加载到内存中（例如，通过调用 LoadLibrary）主要是将 PE 文件的某些范围映射到地址空间的问题。

描述 PE 格式（以及 COFF 文件）的中心位置是 WINNT.H。在这个头文件中，您会发现处理 PE 文件或内存中的等效结构所需的几乎所有结构定义、枚举和#define。

在偏移量 0x0FE 处有一个称为 CHARACTERESTICS 的 PE 字段，有许多特性，如 IMAGE_FILE_32BIT_MACHINE 、 IMAGE_FILE_EXECUTABLE_IMAGE。IMAGE_FILE_32BIT_MACHINE (0x100) 用于 32 位 DLL/EXE。

您可以使用 Java 的 Reflection API 来解决这个问题。示例可以帮助您-

[http://www.devdaily.com/java/jwarehouse/scala/src/msil/ch/epfl/lamp/compiler/msil/PEType.java.shtml](http://www.devdaily.com/java/jwarehouse/scala/src/msil/ch/epfl/lamp/compiler/msil/PEType.java.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:21:41.553

您可以使用[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

```
System.getProperty("java.version"); 
```

获取 Java 版本。

您可以使用内部系统属性

```
System.getProperty("sun.arch.data.model") 
```

获取数据模型。对于 32 位库，响应将为“32”，对于 64 位库，响应为“64”，对于未知数据模型，响应为“unknown”。

此内部系统属性仅返回 Oracle JVM 的值。

# java - 在 Mac OS 中使用 Runtime.getRuntime().exec() 会导致错误

> ID：12517437
> 
> 赞同：2
> 
> 时间：2012-09-20T17:05:49.527
> 
> 标签：java, macos, runtime

我正在尝试在我的 Java 应用程序中使用此代码在 Mac OS X 中运行另一个 Jar：

```
Runtime runtime = Runtime.getRuntime();
String cmd = "java -Xmx1024m -jar \"/Volumes/NANO PRO/My Program/Main.jar\"";
Process process = runtime.exec( cmd ); 
```

如果 Main.jar 存在于没有空格的路径中，它将正常工作，但由于它存在于有空格的路径中，因此会导致错误：

![在此处输入图像描述](../Images/6d1f6e92c1a0928f589a1f53be433c03.png)

**有没有办法让它在有空格的路径中运行？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T17:08:39.573

使用数组构建命令的不同部分，并将其留给 Java 运行时根据底层环境适当地转换它们。

```
String [] cmd = {"java", 
                 "-Xmx1024m", 
                 "-jar",
                 "/Volumes/NANO PRO/My Program/Main.jar"}; 
```

你也可以看看[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)：

# java - 如何在 Jackson2 中使用多参数构造函数反序列化枚举？

> ID：12517445
> 
> 赞同：4
> 
> 时间：2012-09-20T17:06:26.517
> 
> 标签：java, jackson

给定一个看起来像`{statusCode:401}`我如何使用 Jackson 2 将其反序列化为以下枚举的 JSON。主要问题是在反序列化时我只有状态码而不是描述。

```
public enum RestApiHttpStatus
{
    OK(200, "Ok"),
    INTERNAL_SERVER_ERROR(500, "Internal Server Error"),
    BAD_REQUEST(400, "Bad Request"),
    UNAUTHORIZED(401, "Unauthorized"),
    FORBIDDEN(403, "Forbidden"),
    NOT_FOUND(404, "Not Found");

    private final int statusCode;
    private final String description;

    private RestApiHttpStatus(int statusCode, String description)
    {
        this.statusCode = statusCode;
        this.description = description;
    }

    public int getStatusCode()
    {
        return statusCode;
    }

    public String getDescription()
    {
        return description;
    }
} 
```

如何配置 Jackson2 来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:40:18.390

添加以下带有正确 Jackson 注释的静态工厂方法可以解决问题。

```
@JsonCreator
public static RestApiHttpStatus valueOf(@JsonProperty("statusCode") int statusCode)
{
    if (RestApiHttpStatus.FORBIDDEN.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.FORBIDDEN;
    } else if (RestApiHttpStatus.NOT_FOUND.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.NOT_FOUND;
    } else if (RestApiHttpStatus.INTERNAL_SERVER_ERROR.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.INTERNAL_SERVER_ERROR;
    } else if (RestApiHttpStatus.BAD_REQUEST.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.BAD_REQUEST;
    } else if (RestApiHttpStatus.UNAUTHORIZED.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.UNAUTHORIZED;
    } else if (RestApiHttpStatus.OK.getStatusCode() == statusCode)
    {
        return RestApiHttpStatus.OK;
    } else
    {
        throw new IllegalArgumentException("Invlaid RestApiStatus Code " + statusCode);
    }
} 
```

# javascript - 如何使用媒体查询显示/隐藏元素？

> ID：12517449
> 
> 赞同：0
> 
> 时间：2012-09-20T17:06:36.440
> 
> 标签：javascript, css, media-queries

通过使用媒体查询，当屏幕宽度高于 768 像素时，我想显示以下列表 (2) 的最后一个元素。

这是[jsfiddle 之类](http://jsfiddle.net/fengelz/yyQ5u/)的。
这是基本的css代码（1）。

* * *

(1)

```
@media only screen and (min-width: 480px) {
    .menu li.hide{    
        visibility: none;
    }
}

@media only screen and (min-width: 768px) {
    .menu li.hide{    
        visibility: visible;
    }
} 
```

* * *

(2)

```
<ul class="menu">
    <li>One</li>
    <li class='hide'>Nine</li>
</ul>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:14:54.700

试试这个 -[**演示**](http://jsfiddle.net/yyQ5u/19/)

```
@media only screen and (max-width: 768px) {
    body{
        background:#030;
    }
    .menu li{    
        font:12px Verdana;    
        width:100px;
        padding-left:10px;
    }
    .menu li:last-child{    
        display: none
    }
}

@media only screen and (min-width: 769px) {
    body{
        background: honeydew;
    }
    .menu li{    
        font:22px Verdana;    
        width:200px;
        padding-left:20px;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:17:05.943

您可以在媒体查询中设置最小和最大宽度：

```
 @media screen and (min-width: 480px) and (max-width: 768px) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:24:43.970

我已经更新了你的 jsfiddle：http: [//jsfiddle.net/yyQ5u/28/](http://jsfiddle.net/yyQ5u/28/)

看起来主要问题在于事物的顺序和实际的媒体查询。我把你的非条件 CSS 放在 CSS 窗格的顶部，下面是媒体查询。

然后我调整了似乎相互覆盖的媒体查询：

```
@media only screen and (max-width: 768px) { 
```

和

```
@media only screen and (min-width: 768px) { 
```

# python - 使用文件输出自动创建目录

> ID：12517451
> 
> 赞同：440
> 
> 时间：2012-09-20T17:06:40.820
> 
> 标签：python, file-io

> **可能重复：**
> [python 中的 mkdir -p 功能](https://stackoverflow.com/questions/600268/mkdir-p-functionality-in-python)

说我想制作一个文件：

```
filename = "/foo/bar/baz.txt"

with open(filename, "w") as f:
    f.write("FOOBAR") 
```

这给出了`IOError`, 因为`/foo/bar`不存在。

自动生成这些目录的最 Pythonic 方式是什么？我是否有必要在每一个上显式调用`os.path.exists`and （即 /foo，然后 /foo/bar）？`os.mkdir`

* * *

## 回答 #1

> 赞同：838
> 
> 时间：2012-09-20T17:08:39.800

在 Python 3.2+ 中，您可以[优雅地](https://docs.python.org/3/library/os.html#os.makedirs)执行以下操作：

```
 import os

filename = "/foo/bar/baz.txt"
os.makedirs(os.path.dirname(filename), exist_ok=True)
with open(filename, "w") as f:
    f.write("FOOBAR") 
```

* * *

在较旧的 python 中，有一种不太优雅的方式：

该[`os.makedirs`](http://docs.python.org/library/os.html#os.makedirs)函数执行此操作。尝试以下操作：

```
import os
import errno

filename = "/foo/bar/baz.txt"
if not os.path.exists(os.path.dirname(filename)):
    try:
        os.makedirs(os.path.dirname(filename))
    except OSError as exc: # Guard against race condition
        if exc.errno != errno.EEXIST:
            raise

with open(filename, "w") as f:
    f.write("FOOBAR") 
```

添加块的原因是为了处理在调用和调用`try-except`之间创建目录的情况，以保护我们免受竞争条件的影响。`os.path.exists``os.makedirs`

* * *

# amazon-ec2 - 尝试使用橡胶部署 jRoR 应用程序并获得 NoMethodError: undefined method `authorize_port_range' for nil:NilClass

> ID：12517456
> 
> 赞同：5
> 
> 时间：2012-09-20T17:06:53.893
> 
> 标签：amazon-ec2, jruby, jrubyonrails, fog

这是我第一次使用橡胶或部署到 Amazon EC2。我正在关注这个[Railscast](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)。我用谷歌搜索了一遍，似乎没有其他人遇到这个问题。这是我运行时的控制台日志`cap rubber:create_staging`：

```
user529789@user529789-M15x:~/develops/grouper$ cap rubber:create_staging
    triggering load callbacks
  * executing `rubber:init'
  * executing `rubber:create_staging'
Hostname to use for staging instance [production]: 
Roles to use for staging instance [apache,app,collectd,common,db:primary=true,elasticsearch,examples,graphite_server,graphite_web,graylog_elasticsearch,graylog_mongodb,graylog_server,graylog_web,haproxy,mongodb,monit,passenger,postgresql,postgresql_master,web,web_tools]: 
  * executing `rubber:create'
Excon nonblock is not supported by your OpenSSL::SSL::SSLSocket
Excon nonblock is not supported by your OpenSSL::SSL::SSLSocket
  * Creating new security group: grouper_production_default
  * Creating new rule: {"source_group_name"=>"grouper_production_default", "source_group_account"=>"<account id redacted>"}
[DEPRECATION] authorize_group_and_owner is deprecated, use authorize_port_range with :group option instead
  * Creating new rule: {"protocol"=>"tcp", "from_port"=>"22", "to_port"=>"22", "source_ips"=>["0.0.0.0/0"]}
NoMethodError: undefined method `authorize_port_range' for nil:NilClass
  add_security_group_rule at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/cloud/fog.rb:182
                     send at org/jruby/RubyKernel.java:2088
           method_missing at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/thread_safe_proxy.rb:13
     sync_security_groups at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/security_groups.rb:221
                     each at org/jruby/RubyArray.java:1615
     sync_security_groups at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/security_groups.rb:220
                     each at org/jruby/RubyArray.java:1615
     sync_security_groups at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/security_groups.rb:214
                     each at org/jruby/RubyArray.java:1615
     sync_security_groups at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/security_groups.rb:208
    setup_security_groups at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/security_groups.rb:51
          create_instance at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/instances.rb:255
          create_instance at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/instances.rb:254
         create_instances at /home/user529789/.rvm/gems/jruby-1.6.7.2@grouper/gems/rubber-2.1.0/lib/rubber/recipes/rubber/instances.rb:217
                     call at org/jruby/RubyProc.java:270
                     call at org/jruby/RubyProc.java:224 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T19:43:06.620

我的猜测是它正在寻找一个范围，并且在堆栈跟踪中你给出的范围是从一个端口到同一个端口和 ruby​​，尤其是 jruby 可能会错误地解释端口范围。

您可以尝试在您的 jruby on irb 版本中运行

`(22..22).to_a`看看你得到了什么。在 mri 中你会得到`[22]`，但在 jruby 中可能存在实现错误。

我认为失败时正在执行的代码在这里： [https ://github.com/rubber/rubber/blob/v2.1.0/lib/rubber/cloud/fog.rb#L182](https://github.com/rubber/rubber/blob/v2.1.0/lib/rubber/cloud/fog.rb#L182)

编辑

再看了几分钟后，很明显橡胶将参数传递给了雾宝石，我很确定即使范围可以解决，雾使用它的方式也需要一个范围。您可以尝试从 21 到 23 或 22 到 23 的范围，看看是否可以让您克服错误。另外，请注意，您使用的橡胶版本远远落后于主版本。我没有任何参考来说明是否需要这样做，但是您应该注意这一点。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T01:37:08.247

对我有用的解决方法是转到 Rubber.yml

并将与安全组相关的所有选项从“true”设置为“false” 完全不确定这样做的效果，但似乎可以通过。

# c# - MongoDB BsonDocument 向下转换

> ID：12517465
> 
> 赞同：0
> 
> 时间：2012-09-20T17:07:26.637
> 
> 标签：c#, mongodb, downcast

我在 MongoDB 中有一个集合，我正在尝试使用 C# 驱动程序“FindAndModify”。该集合包含基类及其派生类的类型，如下所示：

```
 [BsonDiscriminator(RootClass = true)]
    public class Father
    {
        public Guid Id { get; private set; }
    }

   public class Son : Father
   {
        public string SomeProperty { get; private set; }
   } 
```

当我尝试将 BsonDocument 转换为我的基类时，在 FindAndModify 之后，结果是“Son”：

```
Father modifiedDocument = result.GetModifiedDocumentAs<Father>(); 
```

我得到以下异常：

> System.IO.FileFormatException：元素“SomeProperty”与父亲类的任何字段或属性都不匹配。

知道为什么吗？- 我不能在这里进行向下投射吗？

谢谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:27:38.037

我能够通过在加载时注册“Son”类型的类映射来解决这个问题。这是我正在使用的代码的参考：

```
 if (!BsonClassMap.IsClassMapRegistered(typeof(T)))
    {
        BsonClassMap.RegisterClassMap<T>
        (cm =>
        {
            cm.AutoMap();
        });
    } 
```

希望这可以帮助某人。

干杯，尼尔。

# asp.net - ASP.net - 根据文本框值添加多行

> ID：12517467
> 
> 赞同：-2
> 
> 时间：2012-09-20T17:07:37.093
> 
> 标签：asp.net, row

我试图找出使用 .将多行添加到现有 SQL 表中的最佳方法`ASP.NET`。我是 VBA 编程的新手，所以有点迷茫，需要一些帮助来解决这个问题。

例如，用户将输入。

2 (LotNo)
5 (itemNo) – 根据该值添加多行。
100 (cartNo)
20120202 (日期)

结果：
2, 1, 100, 20120202
2, 2, 100, 20120202
2, 3, 100, 20120202
2, 4, 100, 20120202
2, 5, 100, 20120202

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:20:57.477

您可以尝试使用此代码 - 基于`Table Value Parameter`

```
Dim sc As New SqlCommand(
  "INSERT INTO MyNewTable (field1, field2,...)"&
    "SELECT field1, field2,... FROM @MyTable;", connection) 
sc.Parameters.AddWithValue("@MyTable", MyTable)  
sc.ExecuteNonQuery() 
```

链接：http://msdn.microsoft.com/en-us/library/bb510489.aspx

# ruby-on-rails - 在 Rails 中记住索引参数的最佳方法是什么？

> ID：12517469
> 
> 赞同：0
> 
> 时间：2012-09-20T17:07:45.170
> 
> 标签：ruby-on-rails, session

通常，索引页面有过滤、页面、排序的选项。在显示新的编辑页面后，您可能希望返回索引页面，并使用与您看到的相同的选项。

为此，我在会话中保存索引的参数。

```
class ApplicationController < ActionController::Base

  helper_method :index_with_params
  after_filter :save_index_params, :only => [:index]

  def save_index_params 
    session[self.class.to_s] = params 
  end

  def index_with_params overrider={}
    object = self.kind_of?(ApplicationController) ? self : controller
    h = session[object.class.to_s] || {"action" => :index}
    h["only_path"] = true
    url_for(h.merge(overrider));
  end

end 
```

我曾经使用 ActiveRecord 进行会话存储。现在我想使用cookie。所以会话应该很轻。

你如何处理这样的情况？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:01:00.753

> 在显示新的编辑页面后，您可能希望返回索引页面，并使用与您看到的相同的选项。

如果您最初在查询字符串中传递过滤选项，即。`example.com/widgets?order_by=price`，然后当您的用户使用浏览器“返回”按钮导航回索引时，将保留过滤选项。

如果您确实希望在用户稍后键入时保留选项`example.com/widgets`，那么您需要将选项保留在*某处*，通常在`session`对象中。cookie 存储最多可容纳 4KB，因此应该没问题，除非您有很多选择。如果您需要更多空间或性能成为问题，请查看其他会话存储，例如 Redis 存储。

# android - 在android XML资源文件中存储字符串并引用它们

> ID：12517471
> 
> 赞同：0
> 
> 时间：2012-09-20T17:07:51.713
> 
> 标签：android, xml

我想知道是否应该使用资源 XML 文件来为我存储所有可能的食谱，而不是使用硬编码的 ArrayList，问题是我不知道如何使用方法从资源文件中调用我有...

这是我想要的精简版：

```
int recipeNumber = b.getInt("RECIPE"); //This is taken from another activity

    final TextView rowTextView = new TextView(this); //Create a textview

    rowTextView.setText(R.string.recipeNumber); //This is what i am struggling with  

    howToLinearLayout.addView(rowTextView); //Add textview to linearlayout 
```

我不知道在引用我的资源文件的部分中放什么。我知道我需要： rowTextView.setText(R. 但我不确定之后会发生什么。

我存储的字符串例如：

```
<string name="1">One part Vodka, One part Coke</string>
<string name="2">One part Vodka, One part Lemonade</string> 
```

这个列表会很长，所以我很感激任何其他关于存储的建议，请记住我对此很陌生。

recipeNumber int 是文本视图中将调用的字符串。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:12:08.580

要在代码中获取字符串资源，请使用 getResources()。

```
rowTextView.setText(getResources().getString(R.string.recipeNumber)); 
```

* * *

要获取未知的资源标识符，但已知的资源名称，可以使用以下方法。

```
int identifier = getResources().getIdentifier("" + recipeNumber, "string", "com.your.package.name");
rowTextView.setText(getResources().getString(identifier)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:23:33.777

我建议将值存储在代码之外，例如以 XML 或 JSON 格式（使用起来更快、更容易）。我会选择 JSON。将列表加载到数组或其他集合中真的很容易，并且可以随心所欲地使用它。

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

然后，您可以维护您的食谱、添加新食谱、维护它等，而无需接触代码。只需替换 XML 或 JSON（或您选择的任何内容）并重新构建您的应用程序。

Strings.xml 用于您的 UI 中的文本片段和您可能想要本地化的代码并避免硬编码字符串。它并不是真正用于存储数据。

# javascript - jQuery。选择所有具有类但没有 style="display:none;" 的元素 属性

> ID：12517476
> 
> 赞同：6
> 
> 时间：2012-09-20T17:08:06.653
> 
> 标签：javascript, jquery

我有以下类，它选择 td.lineitemtotal 单元格内部的内容，并在 getTotal 函数中使用它来获取单元格的总数。但是，我不希望函数使用 tr.line_item_row 中带有 style="display:none;" 的行 属性。

```
$(document).ready(function() {
  var line = $('.item');
  // so the line totals are calculated on page load
  getLineItemTotals(line);

  var line_totals = $('.lineitemtotal');
  getTotal(line_totals); // So the total is calculated on page load.
});

// get invoce grand total
function getTotal(lines) {
  var total = 0;
  $.each(lines, function(){
    total += parseFloat($(this).html());
  });
  $('#total-price').html('$' + total.toFixed(2));
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T17:09:46.897

你想要这个吗 ？

```
$('.lineitemtotal:visible'); 
```

该集合包含具有 class 的未隐藏元素`lineitemtotal`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T17:11:30.297

```
var line_totals = $('.lineitemtotal:not([style*="display:none"])'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:10:29.357

在您的选择器上包括[:visible](http://api.jquery.com/visible-selector/)选择器：

```
$('.lineitemtotal:visible'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T17:13:53.273

如果您确定该属性将始终存在`style="display:none;"`，则可以使用属性选择器。

而不是这个：

```
var line = $('.item'); 
```

试试这个：

```
var line = $('.item[style!="display:none;"]'); 
```

using`[attribute="value"]`查找`attribute`具有 value的元素，在查找不匹配的内容之前`value`添加。`!``=`

# typo3 - TYPO3 - 使用数学标记

> ID：12517478
> 
> 赞同：1
> 
> 时间：2012-09-20T17:08:13.650
> 
> 标签：typo3, typoscript

所以可以说我有这样的事情：

```
20 = CONTENT
20{
    table = tt_content
    select{
        pidInList = 1
        where = colPos = 0
    }

    renderObj = COA
    renderObj{

        wrap = <div class="normal">|</div>

        10 = TEXT
        10{
            field = bodytext
        }
    }
} 
```

我希望每三个对象都将“普通”类更改为“特殊”类。我怎么能在 Typoscript 中进行这样的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:43:19.167

对值使用[optionSplit](http://wiki.typo3.org/TSref/optionSplit) ( [DE](http://wiki.typo3.org/De%3aTSref/optionSplit) ) 执行此任务`wrap`，您需要`abcabc`模式 where `a,b = normal`, `c = special`，所以很可能它会是这样的：

```
wrap = a||b||c |*| a||b||c 
```

从我的头顶写的，所以你需要检查它。

# c - 如何停止守护进程

> ID：12517482
> 
> 赞同：0
> 
> 时间：2012-09-20T17:08:20.173
> 
> 标签：c, linux, ubuntu

我正在将文件作为守护进程执行。我怎样才能停止守护进程？

```
int main(int argc, char **argv)
{
    if ( argc != 5 )
    {
        printf ("Usage: %s <server> <nick> <channel> <logging>\n", argv[0]);
        return 1;
    }       
    char *startPath =  malloc(sizeof(char) *100);

strcpy(startPath,"/home/.../start");    

int child_pnr;

if(daemonisieren() != 0) 
{
    printf("damonization not possible");
    exit(0);
}   

printf("I am a damon \n");

 if((child_pnr = fork())==0)
{       
    execve(startPath,argv); 
}
else if (child_pnr > 0)
{   
    printf("I am parent and have a child \n");
    wait(child_pnr);
 }

printf("gone....\n");

free(startPath);
} 
```

我想我可以像 kill(childnr) 一样杀死它，但是当父进程等待子进程完成执行时，他可能永远不会这样做，我必须有一个知道 childnr 并杀死它的程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:20:40.370

您可以使用许多不同的方法使孩子的进程号可用，所有这些方法都可以有效。一种简单的方法是将其存储到系统上的文件中。如果您查看，`/var/run`您可能会发现许多 XXX.pid 文件已经这样做了。

不过，对于您的用例，也许一个更好的解决方案是在您的父级中启动一个新线程（或让它派生第二个孩子），该线程执行一段时间的睡眠，如果该时间过去，它会杀死主要孩子。如果主子进程自行终止，满足父进程的等待，父进程可以杀死“看门狗”子进程（或线程）。

# r - 连接嵌套在 R 中的列表中的数据框的更好方法

> ID：12517491
> 
> 赞同：0
> 
> 时间：2012-09-20T17:08:46.660
> 
> 标签：r, list, data-manipulation

我有一个包含嵌套列表的列表对象，每个列表都包含一个数据框。下面的代码模拟了我的数据结构：

```
## simulate my data structure -- list of data frames
mylist <- list()
for (i in 1:5) {
 tmp <- list(data = data.frame(x=sample(1:5, replace=T), y=sample(6:10, replace=T)))
 mylist <- c(mylist, tmp)
} 
```

我正在寻找行绑定我的所有数据框以创建一个主数据框。目前我使用一个`for`循环来完成这个动作：

```
## goal: better way to combine row bind data frames
## I like rbind.fill because sometimes my data are not as clean as desired
library(plyr)
df <- data.frame(stringsAsFactors=F)
for (i in 1:length(mylist)) {
 tmp <- mylist[i]$data
 df <- rbind.fill(df, tmp)
} 
```

实际上，我的主列表非常大 - 长度为 3700，而不是 5 - 所以我的`for`循环非常慢。

有没有更快的方法来完成相同的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:50:01.800

```
ldply(mylist, data.frame)

# if you dont need the id column, 

ldply(mylist, data.frame)[,-1]

# If you want a progress bar for the larger operation, add .progress
ldply(mylist, data.frame, .progress = 'text')

# See ?create_progress_bar for more options. 
```

# ms-access - 使用顺序主键插入查询

> ID：12517498
> 
> 赞同：0
> 
> 时间：2012-09-20T17:09:28.610
> 
> 标签：ms-access

我正在使用 MS Access 追加查询将库存交易追加到我的 ERP 数据库 (MYSQL)。
请告知我将如何修改我的查询以自动将下一个顺序事务 ID（主键）插入到 Inventory_transaction 表中，并能够一次附加多条记录。

我现有的查询工作正常，但只有当我只附加一条记录时。
我通常需要同时追加多条记录。每条记录都需要有一个唯一的顺序事务 ID（主键）。将有多个用户同时使用此应用程序，因此我需要最小化重复密钥违规的机会，以防止回滚。我尝试在不使用主键的情况下进行附加，以查看我的数据库是否会自动分配事务 ID，但不幸的是，这个 ERP 字段不是自动编号，我无法修改表结构......

以下是 2 个查询。
这一项目前仅用于为一条记录生成事务 ID。

```
SELECT Max([SYSADM_INVENTORY_TRANS].[TRANSACTION_ID])+1 AS new_inventory_transaction_ID
FROM SYSADM_INVENTORY_TRANS; 
```

第二个查询是包含第一个查询的附加查询，如果有人可以修改查询，我将非常感激，以便用户能够一次附加多个具有唯一事务 ID 的记录。

```
INSERT INTO SYSADM_INVENTORY_TRANS ( TRANSACTION_ID, WORKORDER_TYPE,
  WORKORDER_BASE_ID, WORKORDER_LOT_ID, WORKORDER_SPLIT_ID, WORKORDER_SUB_ID,
  OPERATION_SEQ_NO, REQ_PIECE_NO, PART_ID, TYPE, CLASS, QTY, COSTED_QTY,
  TRANSACTION_DATE, WAREHOUSE_ID, LOCATION_ID, USER_ID, POSTING_CANDIDATE,
  ACT_MATERIAL_COST, ACT_LABOR_COST, ACT_BURDEN_COST, ACT_SERVICE_COST,
  CREATE_DATE, ADD_BURDEN, COUNT_SEQUENCE, DESCRIPTION )
SELECT T.new_inventory_transaction_ID, S.WORKORDER_TYPE, D.WORKORDER_BASE_ID,
  D.WORKORDER_LOT_ID, D.WORKORDER_SPLIT_ID, D.WORKORDER_SUB_ID, D.OPERATION_SEQ_NO,
  D.PIECE_NO, D.auto_issue_part_ID, S.TYPE, S.CLASS, D.[total_auto_issue Qty],
  0 AS Expr6, Date() AS Expr1, D.BACKFLUSH_WHS_ID, D.BACKFLUSH_LOC_ID,
  "SYSADM" AS Expr3, S.POSTING_CANDIDATE, S.ACT_MATERIAL_COST, S.ACT_LABOR_COST,
  S.ACT_BURDEN_COST, S.ACT_SERVICE_COST, Date() AS Expr2, S.ADD_BURDEN,
  S.COUNT_SEQUENCE, "ENTERED WITH ACCESS APP" AS Expr5
FROM tbl_static_autoissue_data AS S,
     tbl_dynamic_autoissue_data AS D,
     qry_transaction_ID_generator AS T; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:52:53.713

这里有一些注释可以帮助您实现目标，但是使用自动编号生活会更轻松、更安全。当您提到 MS Access 时，这是 VBA。

```
Function NextTranNumber(ByRef FirstTran As Long, _
         ByRef LastTran As Long, Optional BlockSize = 1)
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim strSQL As String
Dim lngResult As Long
Dim strCon As String

    lngResult = 0  'assume fail

    strCon = TestCon ''Connection to back-end
    cn.Open strCon

    rs.CursorType = adOpenKeyset
    rs.LockType = adLockPessimistic
    rs.CursorLocation = adUseServer

    ''Where BEInfo is a single line table that holds a transaction seed
    strSQL = "SELECT ASeqNumber FROM BEInfo"

    rs.Open strSQL, cn, , , adCmdText

    'Note this is ADO, so no rs.Edit
    FirstTran = rs!ASeqNumber + 1
    rs!ASeqNumber = rs!ASeqNumber + BlockSize
    rs.Update

    LastTran = rs!ASeqNumber
    rs.Close
    Set rs = Nothing
End Function

Sub TransactionProcessing()
Dim FirstTran As Long
Dim LastTran As Long
Dim db As Database
Dim sSQL As String
Dim Block As Long
Dim rs As DAO.Recordset

    Set db = CurrentDb

    'Existing temporary table
    sSQL = "DELETE FROM FETempTrans"
    db.Execute sSQL, dbFailOnError
    'The records to be added to the main table
    sSQL = "INSERT INTO FETempTrans ( ID, AText ) SELECT 0 AS ID, AText FROM Table1"
    db.Execute sSQL, dbFailOnError

    Block = db.RecordsAffected

    'Reserve a transaction block based on the temp table count
    NextTranNumber FirstTran, LastTran, Block

    Set rs = db.OpenRecordset("FETempTrans")

    Do While Not rs.EOF
        rs.Edit
        rs!ID = FirstTran
        rs.Update
        FirstTran = FirstTran + 1
        rs.MoveNext
    Loop

    If FirstTran - 1 = LastTran Then
        'compare the temp set to the main table
        'if it passes, update the main table
    Else
        'fail
    End If
End Sub 
```

# .net - LINQ First vs Find 性能注意事项

> ID：12517501
> 
> 赞同：2
> 
> 时间：2012-09-20T17:09:46.593
> 
> 标签：.net, performance, linq

我们有一个系统可以执行各种复杂和简单的选择查询。

我们做了一些简单的测试，得到了这些结果：

```
Query 3.9 seconds :
var result = (from temp in context.model
               where temp.ID == 1302
               select temp).First();

Start Transaction time: 17:54:58.7073806
End Transaction time: 17:55:02.6246046

Query 3.7 seconds :
Model modelResult = context.Model.Find(1302);

Start Transaction time: 17:53:51.1995194
End Transaction time: 17:53:54.8737295 
```

我一直在阅读试图找出最好的选择是什么。这个网站上有很多关于这个话题的讨论，但是，我还没有找到我需要的东西。

我知道查询选择是有条件的（基于查询的复杂性等），但如果我们需要一个基于不会再次使用的键的实体（这意味着，在 Find 的情况下，缓存不会）没关系，因为该查询不太可能再次被调用）是使用直接 LINQ 还是继续使用 Find 更好？

缓存 Find 结果的成本，当它不会被使用时，成本是否太高？我们简单测试的结果是否足够准确，可以假设 Find 在单个实体/键的情况下总是更快？

我没有通过关闭跟踪来测试 LINQ，这会比给出的两个示例更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:14:50.683

两者并不完全相同。

`Find`将检查实体是否已在上下文中加载。如果有，它只会返回它而不执行查询。在这种情况下，它可能会更有效率。

但是，如果实体不在上下文中，它会执行查询，`SingleOrDefault`而不是首先执行查询，这将需要从服务器拉回前两个结果。虽然构造查询没有开销，但查询本身可能会（非常轻微）因此而变慢，并且结果会有所不同，因为如果有多个匹配项，您将收到错误。

有关更多详细信息和信息，包括生成的查询，请[在此处查看此 Slauma 的答案](https://stackoverflow.com/a/7823952/65358)。

# ruby-on-rails - “草稿”状态最佳实践的 Ruby on Rails Active Record 验证

> ID：12517503
> 
> 赞同：2
> 
> 时间：2012-09-20T17:09:50.407
> 
> 标签：ruby-on-rails, validation, design-patterns

我正在开发一个表单，我希望用户可以选择返回。最终，所有字段都需要完成，我想在将记录标记为“完成”之前合并适当的模型级别字段验证。我可以想到几种方法来做到这一点：

1.  创建两张表，一张用于“草稿”状态的记录，验证规则更宽松（即字段不一定要完整才能保存记录），另一张表用于存储已提交的记录为“完整”，显然具有更严格的验证规则。

2.  仅创建一个表来存储记录，其中包含一个标记为“isComplete”的字段，并根据此值确定要应用哪些验证规则。

我倾向于选项＃2，因为它涉及的工作部分更少（在选项＃1中，我必须确保当我将记录状态从“草稿”更改为“完成”时，它会从一个表中删除并添加到其他）。问题是我不知道如何在 Rails 中优雅地做到这一点。

最终，我确信这个问题之前已经解决了，我的问题是：在这种情况下，最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:20:13.063

绝对是第二个选项。有一个布尔值的 isComplete 或 Draft 选项。然后在您的模型中，您可以根据 isComplete 字段的状态控制要运行的验证。这可以通过多种方式完成，例如 Rails 具有[条件验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)的概念，它允许您在验证上指定 :if 选项，以便您可以根据完整状态限制运行的内容。您还可以添加 before_save 或 before_update 挂钩来根据记录是否为草稿来运行方法。使用这两个工具，您应该能够以直观的方式将所有内容放在一个表中。

# c++ - 如何在不分割的情况下在一个包中接收 TCP 套接字数据

> ID：12517507
> 
> 赞同：0
> 
> 时间：2012-09-20T17:09:58.697
> 
> 标签：c++, sockets

由于我创建了一个 TCP 套接字，因此在发送少量数据时很好。没有片段。所有数据都放在一个包中。但是当数据变得越来越大时。TCP包已经被分割成碎片了。。真的很烦人。是否有任何选项可以设置在套接字上，并且套接字会自动为我将碎片放入一个包中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:16:49.937

It's a byte stream. All the bytes will arrive correctly and in the right order, but not necessarily when you want them. If you need to send anything more complex than one byte, you need another protocol on top of TCP. That's why there are all those other TCP/IP protocols like HTTP, SMTP etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:11:33.423

不，那里没有。甚至在某些情况下您可能会收到 1 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:32:57.727

TCP 为您提供*可靠的双向字节流*。它负责排序、传输层打包、重传和流控制。数十年的研究致力于优化其性能。很漂亮。您为所有这些便利付出的小代价是您必须*在循环中写入和读取流，*在接收时观察您可以处理的完整[*应用程序协议*](http://en.wikipedia.org/wiki/Application_layer)消息，并在发送时刷新未缓冲的字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T18:21:28.297

欢迎来到套接字编程！

我会在这里插话并说，如果不对为您处理应用程序协议的库添加额外的依赖项，您几乎无法解决您的问题。有一些较低级别的消息打包库（谷歌的协议缓冲区等）可能会有所帮助。

习惯在循环中读取和写入 TCP 数据可能是最有益的。它经过验证并且非常便携..即使您在自己实际编写流编解码器时付出了很小的代价。

试几次。这是一种有用的体验，你可以重复使用，一旦你掌握了它，它真的不会那么困难和烦人（就像其他任何东西一样，真的）。

此外，单元测试相当容易（而不是处理深奥的库和带有不良/稀疏文档选项的不常见协议）..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T17:38:41.317

考虑使用更高级别的消息传递库，如[ZMQ](http://www.zeromq.org/)。它为您处理所有消息打包和拆包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T17:17:34.390

You can optimize sockets reads to return larger chunks, on platforms that support it, by setting low watermark using `setsockopt()` and `SO_RECVLOWAT`. But you will still have to handle the possibility of getting bytes less than the watermark.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-20T17:18:06.080

I think you want `SOCK_SEQPACKET` (or possibly `SOCK_RDM`). See [socket(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html).

# linux - 设置提示和 ls --color 后 linux vi 搞砸了

> ID：12517508
> 
> 赞同：0
> 
> 时间：2012-09-20T17:10:01.990
> 
> 标签：linux, color-scheme, ls

我已经设置了我`ls color`的`less`喜欢

```
alias ls='ls --color'
LS_COLORS='no=00:fi=00:di=00;94:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:'
export LS_COLORS
alias less='less -R'`, and my `prompt` like `
export PS1="\n\[\e[31m\]\u\[\e[33m\]@\[\e[34;1m\]\h \[\e[36m\]\W \[\e[35m\]^\$ \[\e[0m\]" 
```

.

我认为最好在我的显示器上看到它，但是当我做类似的事情时，`ls > OUTPUTFILE`甚至`cat SOMEFILE`我用`vi`它来查看输出文件时，它已经搞砸了

```
^[[00mNC_000954.fna^[[00m
^[[00mNC_000955.fna^[[00m
^[[00mNC_000956.fna^[[00m
^[[00mNC_000957.fna^[[00m
^[[00mNC_000958.fna^[[00m
^[[00mNC_000959.fna^[[00m
^[[00mNC_000961.fna^[[00m 
```

它应该像

```
NC_000117.fna
NC_000853.fna
NC_000854.fna
NC_000868.fna
NC_000907.fna
NC_000908.fna
NC_000909.fna 
```

没有那些特殊符号。

那有什么问题？我不知道哪种颜色设置改变了这一点。顺便说一句，我已将我的设置`vimrc color`为`colorscheme delek`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:31:46.727

我的 2 美分价值：

好吧，颜色设置是通过终端窗口中的转义序列处理的。如果您将标准输出通过管道传输到文件，并且请求了颜色，则应该在其中获取这些转义序列。

似乎 vim 不喜欢您当前配置中的那些转义序列。默认情况下，它使它们可见。

ls：请注意 ls --color=auto 只有当 stdout 是终端时它才会发送到文件。也许你有 --color=always on。确保你有汽车并且逃生消失了。

如果这是您的意图 - 在 vi​​m 中实际获取 ls 颜色，[请查看此链接](https://unix.stackexchange.com/questions/7695/how-to-make-vim-display-colors-as-indicated-by-color-codes)以进行更多讨论。您可以哄 vim 将它们实际视为逃逸并将它们过滤掉 - 或着色。

# attributes - 在 C# 中创建一个没有现有文件的空 FileInfo 对象

> ID：12517510
> 
> 赞同：9
> 
> 时间：2012-09-20T17:10:16.787
> 
> 标签：attributes, c#-3.0, fileinfo

我使用输入字符串添加了一个替代代码路径，而不是从文件中读取。我需要一个空的 FileInfo 对象，因为我有许多访问`Name`,`Length`和`Extension`属性的实例。

理想情况下，我正在寻找类似的东西

```
FileInfo _fileinfo = new FileInfo(File.Empty); 
```

然而，只有一个`FileInfo`构造函数，它似乎需要一个有效的文件。创建一个空初始化的 FileInfo 对象的任何解决方案，它不需要创建一个空的虚拟文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:43:45.743

我刚刚遇到了类似的问题。你觉得从以下几点开始：

```
FileInfo _fileinfo = null; 
```

之后，你可以这样做：

```
_fileinfo = new FileInfo(<string of file with path>); 
```

然后，您将拥有一个可以作为参数传递给您的方法的对象。在尝试获取 .Name 等的值之前，不要忘记检查您的对象是否为空

```
if(null != _fileinfo)
{
  //some code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T14:09:16.950

正如评论中所指出的，FileInfo 将愉快地使用不存在的路径进行构造，但它们必须是有效的路径字符串（您称之为“有效文件”）。（有关什么是有效路径，请参阅[https://docs.microsoft.com/en-us/dotnet/api/system.io.fileinfo?view=net-5.0 。）](https://docs.microsoft.com/en-us/dotnet/api/system.io.fileinfo?view=net-5.0)

解决方案是简单地写

`FileInfo _fileinfo = new FileInfo(@"C:\NonExistant.txt");`

代替

`FileInfo _fileinfo = new FileInfo(File.Empty);`

然后，您可以考虑自己的测试，看看您是否正在处理“空”FileInfo 对象，例如检查驱动器号、扩展名、`File.Exists`测试等。

# api - 从某个页面上的部分获取文本

> ID：12517515
> 
> 赞同：1
> 
> 时间：2012-09-20T17:10:44.113
> 
> 标签：api, mediawiki, mediawiki-api

我知道如何进行 API 调用来获取整个页面的文本，就像[这样](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvlimit=1&rvprop=content&format=xml&titles=Stack%20Overflow)，但是有没有办法（无需解析 wiki 标记）只从某个部分获取文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:52:57.530

如果您查看[module](https://www.mediawiki.org/wiki/API%3aProperties#revisions_.2F_rv)[的文档`revisions`](https://www.mediawiki.org/wiki/API%3aProperties#revisions_.2F_rv)，您会注意到它有一个 prameter `rvsection`，这正是您想要的。因此，例如，要检索前导部分，请使用

[http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=Stack%20Overflow&prop=revisions&rvprop=content&rvsection=0](http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=Stack%20Overflow&prop=revisions&rvprop=content&rvsection=0)

# bash - 如何在保持流分离的同时将 stdout+stderr 重定向到一个文件？

> ID：12517519
> 
> 赞同：18
> 
> 时间：2012-09-20T17:10:58.420
> 
> 标签：bash, shell, unix, zsh, tee

重定向 stdout+stderr 以使两者都写入文件同时仍输出到 stdout 很简单：

```
cmd 2>&1 | tee output_file 
```

但是现在来自 cmd 的 stdout/stderr 都在 stdout 上。我想将 stdout+stderr 写入同一个文件（因此假设 cmd 是单线程的，则保留顺序）但仍然可以单独重定向它们，如下所示：

```
some_magic_tee_variant combined_output cmd > >(command-expecting-stdout) 2> >(command-expecting-stderr) 
```

因此，combined_output 包含保留顺序的两者，但 command-expecting-stdout 仅获取 stdout，而 command-expecting-stderr 仅获取 stderr。基本上，我想记录标准输出+标准错误，同时仍然允许标准输出和标准错误被单独重定向和管道。tee 方法的问题在于它将它们聚集在一起。有没有办法在 bash/zsh 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:30:22.127

From what I unterstand this is what you are looking for. First I made a litte script to write on stdout and stderr. It looks like this:

```
$ cat foo.sh 
#!/bin/bash

echo foo 1>&2
echo bar 
```

Then I ran it like this:

```
$ ./foo.sh 2> >(tee stderr | tee -a combined) 1> >(tee stdout | tee -a combined)
foo
bar 
```

The results in my `bash` look like this:

```
$ cat stderr
foo
$ cat stdout 
bar
$ cat combined 
foo
bar 
```

Note that the -a flag is required so the `tee`s don't overwrite the other `tee`'s content.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T21:37:31.977

Victor Sergienko 的评论对我有用，将 exec 添加到它的前面使整个脚本都可以使用（而不必将其放在单个命令之后）

`exec 2> >(tee -a output_file >&2) 1> >(tee -a output_file)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T10:57:51.873

这是我的做法：

```
exec 3>log ; example_command 2>&1 1>&3 | tee -a log ; exec 3>&- 
```

## 工作示例

```
bash$ exec 3>log ; { echo stdout ; echo stderr >&2 ; } 2>&1 1>&3 | \
      tee -a log ; exec 3>&-
stderr
bash$ cat log
stdout
stderr 
```

这是它的工作原理：

`exec 3>log`设置文件描述符 3 以重定向到名为 log 的文件，直至另行通知。

`example_command`为了使它成为一个工作示例，我使用了`{ echo stdout ; echo stderr >&2 ; }`. 或者您可以使用`ls /tmp doesnotexist`来提供输出。

此时需要跳转到管道`|`，因为 bash 首先执行此操作。管道设置一个管道并将文件描述符 1 重定向到该管道。所以现在，STDOUT 正在进入管道。

现在我们可以回到我们从左到右的解释中的下一个位置：`2>&1`这表示程序中的错误将转到 STDOUT 当前指向的位置，即进入我们刚刚设置的管道。

`1>&3`表示 STDOUT 被重定向到文件描述符 3，我们之前设置它输出到`log`文件。所以命令中的 STDOUT 只是进入日志文件，而不是终端的 STDOUT。

`tee -a log`从管道获取它的输入（你会记住现在是命令中的错误），并将其输出到 STDOUT*并将*其附加到`log`文件中。

`exec 3>&-`关闭文件描述符 3.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T20:52:02.843

```
{ { cmd | tee out >&3; } 2>&1 | tee err >&2; } 3>&1 
```

或者，学究起来：

```
{ { cmd 3>&- | tee out >&3 2> /dev/null; } 2>&1 | tee err >&2 3>&- 2> /dev/null; } 3>&1 
```

请注意，试图保持秩序是徒劳的。这基本上是不可能的。唯一的解决方案是修改“cmd”或使用一些`LD_PRELOAD`或`gdb`破解，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-02T20:10:54.957

秩序确实可以保留。这是一个示例，它按照生成的顺序将标准输出和错误捕获到日志文件中，同时在您喜欢的任何终端屏幕上仅显示标准错误。调整以满足您的需求。

1.打开两个窗口（shell）

2.创建一些测试文件

```
touch /tmp/foo /tmp/foo1 /tmp/foo2 
```

3.在窗口1中：

```
mkfifo /tmp/fifo
</tmp/fifo cat - >/tmp/logfile 
```

4.然后，在window2中：

```
(ls -l /tmp/foo /tmp/nofile /tmp/foo1 /tmp/nofile /tmp/nofile; echo successful test; ls /tmp/nofile1111) 2>&1 1>/tmp/fifo | tee /tmp/fifo 1>/dev/pts/1 
```

/dev/pts/1 可以是您想要的任何终端显示。子shell依次运行一些“ls”和“echo”命令，一些成功（提供stdout）和一些失败（提供stderr），以便生成混合的输出和错误消息流，以便您可以验证正确的顺序日志文件。

# c# - 使用 linq-to-sql 更新记录列表

> ID：12517521
> 
> 赞同：1
> 
> 时间：2012-09-20T17:11:04.347
> 
> 标签：c#, linq-to-sql

我有一个有 2 列的表：FruitID、FruitSize。我想编写一个查询，它接受一个 FruitID 列表和一个 FruitSize 并为所有水果设置新的 FruitSize。

这是我到目前为止所拥有的：

```
public void ChangeFruitSizes(List<long> TheFruitIDs, long NewFruitSize)
{
   using (SomeDC MyDC = new SomeDC())
   {
      var TheFruits = (from f in MyDC.Fruits
                       where TheFruitIDs.Contains(f.FruitID)
                       select f).ToList();

      foreach (Fruits f in TheFruits)
      {
          f.FruitSize = NewFruitSize;
      }

      MyDC.SubmitChanges();

   }
} 
```

它目前没有窃听，但数据库中的字段没有更新。感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:16:05.000

要以更简洁的方式编写此代码，您可以尝试以下列表中的[ForEach()](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)：

```
using (SomeDC MyDC = new SomeDC())
{
    (from f in MyDC.Fruits
               where TheFruitIDs.Contains(f.FruitID)
               select f).ToList().ForEach(F => F.FruitSize = NewFruitSize);

    MyDC.SubmitChanges();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:05:36.373

只看代码一切都是正确的。可能错误在于未显示的内容：模型。我怀疑您没有定义主键。在 ID 字段上定义主键并重新创建模型（从设计器中删除表并将其添加回来）。

# jquery - Nivoslider 干扰导航列表菜单

> ID：12517523
> 
> 赞同：0
> 
> 时间：2012-09-20T17:11:14.563
> 
> 标签：jquery, css, nivo-slider

我在同一页面上使用 nivoslider 和垂直导航菜单。Nivoslider 似乎随机冻结并禁用我的导航菜单。但是页面上的其他链接工作正常。我在 Firefox、Chrome 和 Safari 中遇到了这个问题。奇怪的是，它似乎没有在 IE 中发生。我不知道发生了什么或如何解决它。有任何想法吗？[关联](http://www.goodwin.edu/templateDraft/Admissions/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:28:43.980

好的，这就是正在发生的事情。

当平方效果发生时，一些不可见的图块重叠在垂直导航的顶部。

如果您想亲自查看，只需添加此 css 规则

```
.nivo-box { border:1px solid #ff0000; } 
```

当它与垂直导航重叠时，它不允许在下方单击。

所以你需要做的只是添加一个规则到#slider-wrapper.theme-Admissions

```
#slider-wrapper.theme-Admissions { overflow:hidden; } 
```

干杯!

# c# - 基于 Switch 枚举将对象转换为 WebControl？

> ID：12517525
> 
> 赞同：2
> 
> 时间：2012-09-20T17:11:21.880
> 
> 标签：c#, asp.net

我不确定这在 C# 中是否可行：

我有一个`userControl`我有一个属性`inputType`- 枚举有 3 个可能的选项，textBox、dropDownList 或 checkBox。

然后我想创建一个该类型的新对象并将其添加到 userControl 中的占位符：

我可以做这个：

```
object txt;
    switch (_inputType)
    {
        case code.enums.inputType.textBox:
            txt = new TextBox();
            break;
        case code.enums.inputType.dropDownList:
            txt = new DropDownList();
            break;
        case code.enums.inputType.checkBox:
            txt = new CheckBox();
            break;
    } 
```

但是，我无法访问文本框、下拉列表或复选框的属性，因为 Visual Studio 不知道类型 - 我也无法转换对象 -`(TextBox)txt`因为我不知道它会是哪一个......

有没有办法做到这一点？或者我应该在 ? 中执行所有控制特定操作`switch`？

根据要求，理想情况下，我希望`object txt`该页面的其余部分可用。所以在switch语句之后就可以访问了`txt`。

我肯定想做：

```
plcHolder.Controls.add(txt); 
```

那部分很好 - 它只是在此之前尝试访问控件的特定属性......我认为它无法完成......但最好总是与 SO 专家核实:)

非常感谢，马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:19:46.850

如果您使用 .net 4.0framework，您可以使用`dynamic`变量

```
dynamic txt;
    switch (_inputType)
    {
        case code.enums.inputType.textBox:
            txt = new TextBox();
            break;
        case code.enums.inputType.dropDownList:
            txt = new DropDownList();
            break;
        case code.enums.inputType.checkBox:
            txt = new CheckBox();
            break;
    } 
```

在此之后，您可以获得它的控制类型..或者您可以直接使用

```
string boo = txt.Text; 
```

或者如果你想用作复选框

您可以使用

```
bool checked = txt.Checked; 
```

阅读有关动态变量的信息，请转到[http://msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:15:18.997

您可以修改对象 txt`WebControl txt`以访问公共属性

如果您希望调整特定属性，您可以转换为特定类型。

```
 //You declare as global variable of your class        
    public WebControl control{get;set};

    ....
    //Your code inside method
    switch (_inputType)
    {
        case code.enums.inputType.textBox:
            control= new TextBox();
            //Here you can set global property
            control.Id = ""; //etc.
            break;
        case code.enums.inputType.dropDownList:
            control= new DropDownList();
            break;
        case code.enums.inputType.checkBox:
            control = new CheckBox();
            break;
    }

//For Specific property

var test = (TextBox)control;
//Add specific property. 
```

# ruby - Rails link_to 无法显示确认对话框

> ID：12517527
> 
> 赞同：2
> 
> 时间：2012-09-20T17:11:23.790
> 
> 标签：ruby, ruby-on-rails-3

我试图让 link_to 能够创建带有选项和 html 选项的链接。我需要能够添加，所以我使用了 do 方法。

我的问题是：我如何让它与 :confirmation 一起使用。正如它所写的那样，它将确认附加到 url。我想将它作为 html 选项传入，这样它就会弹出对话框。

任何想法我需要做些什么才能让它表现得像那样？

```
<li>
  <%= link_to :controller => "services", :action => "delete_results", :build => @id, :suite => @cookie_value, :confirm => "Are you sure?" do %>
  <i class="icon-trash"></i>
    Delete Results
  <% end %>
</li> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:06:50.053

url_options 和 html_options 是 link_to 的独立属性。您需要告诉 ruby​​ 它们是列表中的不同参数

`link_to({:controller => "services", :action => "delete_results", :build => @id, :suite => @cookie_value}, {:confirm => "Are you sure?"})`

在 {} 中包装第二个哈希是可选的，但可以简化阅读

# android - Android：onPostExecute 后获取空值

> ID：12517531
> 
> 赞同：0
> 
> 时间：2012-09-20T17:11:39.360
> 
> 标签：android, json, android-asynctask

这个问题是我上一个问题的延续。链接是[https://stackoverflow.com/questions/12499941/android-getting-wrong-info-on-parsing-json-data#comment16829891_12499941](https://stackoverflow.com/questions/12499941/android-getting-wrong-info-on-parsing-json-data#comment16829891_12499941) 我面临的问题是，在异步任务的 doInBackground 中，我能够将数据放入 NearLocation []。然后，我将此数组传递给 onPostExecute()。在那里，我在 NearLocation[] 中打印了数据，它给了我数组中的任何结果。这个数组，我在 SitesOverlay 类中使​​用。另外，我在活动的 onCreate 中使用这个数组来检查它是否包含值。如果没有，它应该给我一个警告信息。当我运行我的应用程序时，它显示 NearLocation[] 为空并提醒我。但是，当时数组中有值，我在 onPostExecute 中检查了相同的值。现在，我不明白，当数组在 onPostExecute() 中具有值时，它是如何变为空的。有，我做错了什么。我尝试并搜索了很多，但无法提出解决方案。我也在下面发布我的更新代码。

**活动课**

```
public class TrackDriverActivity extends MapActivity {

Button btnCurrLoc;
EditText txtPickAddress;
MapView map;

MapController mc;
GeoPoint p;
boolean foundValidLocation = true;
public NearLocation[] nearLocations;
public String driverLatitude;
public String driverLongitude;
private MyLocationOverlay me=null;
private static final String TAG = "TrackDriverActivity";
String tripstatus;
/**
 * Nitish
 * Tue 11 Sep 2012 06:57 PM
 * */
private final String url = "http://towncarapp.com/android/near_driver.php?email="+ UserProfile.email;
JSONObject jsonObject;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.trackdriver);

    Log.v(TAG,"Inside Pick Location Activity");
    new LoadDriverDetailsAsyncTask(TrackDriverActivity.this, url).execute();

    map = (MapView) findViewById(R.id.mapLocation);

    if(nearLocations!=null && nearLocations.length !=0)
    {
        for(int i = 0; i < nearLocations.length; i++)
        {
            NearLocation driverLocation = nearLocations[i];
            driverLatitude = driverLocation.lat;
            driverLatitude = driverLocation.lon;
            Log.d(TAG, "Latitude = " +driverLatitude);
            Log.d(TAG, "Latitude = " +driverLongitude);
        }//for
        Log.d(TAG, "onCreate nearLocation if");
    }//if
    else
    {
        TownCarDialogManager.showOkOnlyDialog(TrackDriverActivity.this, "Message", "No Driver assigned yet.");
        map.getController().setCenter(getPoint(39.83,-98.58));
        map.setBuiltInZoomControls(true);
        Log.d(TAG, "onCreate nearLocation else");
    }//else
    // First Get the current location
    Location currentLocation = getCurrentLocation();

    Log.v(TAG,"Till Current Location");
    if (currentLocation != null) 
    { 
        map.getController().setCenter(getPoint(currentLocation.getLatitude(), currentLocation.getLongitude()));

        Drawable marker=getResources().getDrawable(R.drawable.marker);
        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
        marker.getIntrinsicHeight());

        try {
            map.getOverlays().add(new SitesOverlay(marker, getPoint(currentLocation.getLatitude(), currentLocation.getLongitude())));
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        map.invalidate();
    }//if 
    else 
    {
        Log.v("","No Current Location Found");
    }//else

    Drawable marker=getResources().getDrawable(R.drawable.marker2); //Driver Marker   
    marker.setBounds(0, 0, marker.getIntrinsicWidth(),
    marker.getIntrinsicHeight());

    try {
        map.getOverlays().add(new SitesOverlay(marker, null));
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    map.getController().setZoom(17); 
    map.setBuiltInZoomControls(true);
    map.invalidate();

    /***/

    if (nearLocations == null || nearLocations.length <= 0) 
    {
        //showDialog("Sorry!!!","No driver has been assigned yet.",this);
        TownCarDialogManager.showOkOnlyPostProcessingDialog(TrackDriverActivity.this, "Message", "No Driver assigned yet.", 3);
        map.getController().setCenter(getPoint(39.83,-98.58));
        //map.getController().zoomToSpan(Integer.parseInt(nearLocations[0].lat),Integer.parseInt(nearLocations[0].lon));
        map.setBuiltInZoomControls(true);
    }//if

}//onCreate

@Override
protected boolean isRouteDisplayed() 
{
    // TODO Auto-generated method stub
    return false;
}//isRouteDisplayed

public Location getCurrentLocation()
{
    LocationManager locationManager = (LocationManager) TrackDriverActivity.this.getSystemService(Context.LOCATION_SERVICE);
    Criteria locCriteria = new Criteria();
    locCriteria.setAccuracy(Criteria.ACCURACY_FINE);
    Location lastLocation = locationManager.getLastKnownLocation(locationManager.getBestProvider(locCriteria, true));
    return lastLocation;        
}//getCurrentLocation

public String getCurrentLocationAddess()
{
    Location currentLocation = getCurrentLocation();
    String addressString = null;        

    if(currentLocation!=null)
    {
        Geocoder gc = new Geocoder(TrackDriverActivity.this, Locale.getDefault());
        try 
        {
            List<Address> addresses = gc.getFromLocation(currentLocation.getLatitude(), currentLocation.getLongitude(), 1);
            StringBuilder sb = new StringBuilder();

            if (addresses.size() > 0) 
            {
                Address address = addresses.get(0);

                for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
                    sb.append(address.getAddressLine(i)).append("\n");

                sb.append(address.getCountryName());
            }//if
            addressString = sb.toString();
        }//try 
        catch (IOException e) 
        {
            Log.v("SelectPickupLocation","getCurrentLocationAddress::IOException ");
        }//catch
    }//if
    return addressString;
}//getCurrentLocationAddress

private double getDouble(String dbl){
    Double d;

    try{
        d = Double.valueOf(dbl);
    } catch (Exception e) {
        return 0;
    }

    System.out.println("***"+d);

    return d.doubleValue();
}

private GeoPoint getPoint(double lat, double lon) {
    return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
}   

private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items = new ArrayList<OverlayItem>();

    public SitesOverlay(Drawable marker, GeoPoint center) throws InterruptedException, ExecutionException {
        super(marker);
        boundCenterBottom(marker);

        if (center != null){
            items.add(new OverlayItem(center, "" , ""+getCurrentLocationAddess()));
        } else {
            //nearLocations = getNearLocations(jsonObject);
                if (nearLocations != null && nearLocations.length > 0 ) {
                Log.v("","+"+nearLocations.length);
                for (int i = 0; i < nearLocations.length; i++){
                    NearLocation loc = nearLocations[i];
                    Log.v(TAG,"*"+loc.lat+"*"+loc.lon);
                    items.add(new OverlayItem(getPoint(getDouble(driverLatitude), getDouble(driverLongitude)),"", "Driver Location"));                  
                }
            }
        }

        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return (items.get(i));
    }

    @Override
    protected boolean onTap(int i) {
        Toast.makeText(TrackDriverActivity.this, items.get(i).getSnippet(),
                Toast.LENGTH_SHORT).show();

        return (true);
    }

    @Override
    public int size() {
        return (items.size());
    }
}

private class LoadDriverDetailsAsyncTask extends AsyncTask<String, Void, NearLocation[]>
{
    private ProgressDialog pd;
    Context ctx;
    String url;
    public LoadDriverDetailsAsyncTask(Context ctx, String url)
    {
        this.ctx = ctx;
        this.url = url;
    }//Constructor

    protected void onPreExecute() 
    {
        super.onPreExecute();

        pd=new ProgressDialog(ctx);
        pd.setMessage("Please Wait...");
        pd.setIndeterminate(true);
        pd.setCancelable(false);
        pd.show();
    }//onPreExecute

    protected NearLocation[] doInBackground(String... params) 
    {
        JSONObject jObject = JSONParser.getJSONObjectDataFromURL(url);  
        nearLocations = getNearLocations(jObject);
        return nearLocations;
    }//doInBackground

    protected void onPostExecute(NearLocation[] nearLocations) 
    {
        for(int i = 0; i < nearLocations.length; i++){
            NearLocation loc = nearLocations[i];
            Log.d("LoadDriverAsyncTaskDriverlATITUDE", loc.lat);
            Log.d("LoadDriverAsyncTaskDriverlongitude", loc.lon);
        }
        pd.dismiss();
    }//onPostExecute
}//LoadMapAsyncTask

public NearLocation[] getNearLocations(JSONObject jObject) 
{
    NearLocation[] nearLocation = null;

    try
    {
        if(jObject!=null)
        {
            JSONArray jsonArray = jObject.getJSONArray("statement");

            if (jsonArray != null) 
            {
                nearLocation = new NearLocation[jsonArray.length()];
                Log.v(TAG, "::::::&&&&&&&&&&&&&::::::NearLocations "
                    + nearLocation.length);

                for (int i = 0; i < jsonArray.length(); i++) 
                {
                    JSONObject e = jsonArray.getJSONObject(i);
                    NearLocation loc = new NearLocation(
                            e.getString("latitude"),
                            e.getString("longitude"));
                    nearLocation[i] = loc;
                    Log.v("Driver latitude:", loc.lat);
                    Log.v("Driver longitude:", loc.lon);
                }//for
            }//if
        }//if
        else
        {
            TownCarDialogManager.showOkOnlyDialog(TrackDriverActivity.this, "Sorry", "There is problem in internet connection");
        }//else
    }//try 
    catch (JSONException e) 
    {
        e.printStackTrace();
    }//catch

    return nearLocation;
}//getNearLocations

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:59:15.870

我不确定我是否理解您遇到的问题，但是您的代码存在一些问题，看看它们是否解决了问题。他们设置代码的方式（尤其是`AsyncTask`）可能在某些情况下有效，但在大多数情况下会失败。在`onCreate`方法中，您实例化任务，然后调用`execute()`以启动它。此时`onCreate`方法中的代码将继续运行（任务也会这样做），但由于任务很可能尚未完成获取数据，因此`nearlocations`数组将为`null`. 所以问题是你没有等待让任务完成获取数据，所以你最终使用了 null`nearLocations`变量。避免这种情况的一种方法是使用回调系统。下面是一个例子：

```
// this is an interface that the TrackDriverActivity will implement
interface OnLoadDriverDetails {
     onLoadDriverDetails(NearLocation[] data); 
} 
```

这个回调将`AsyncTask`在它完成加载数据时被调用：

```
private class LoadDriverDetailsAsyncTask extends AsyncTask<String, Void, NearLocation[]> {

    OnLoadDriverDetails mListener;

    public LoadDriverDetailsAsyncTask(Context ctx, String url) {
        this.ctx = ctx;
        this.url = url;
        mListener = (OnLoadDriverDetails) ctx;
    }

    protected NearLocation[] doInBackground(String... params) {
        JSONObject jObject = JSONParser.getJSONObjectDataFromURL(url);          
        return getNearLocations(jObject);
    }

    protected void onPostExecute(NearLocation[] nearLocations) {
         mListener.onLoadDriverDetails(newrLocations);
    }
    // the rest of the task's code 
```

在活动中，您将从`onCreate`需要回调中的有效`nearLocations`数组的代码中移动代码：`onLoadDriverDetails`

```
public class TrackDriverActivity extends MapActivity implements OnLoadDriverDetails {

    // ...
    public void onLoadDriverDetails(NearLocation[] data) {
        nearLocations = data;
        // here do the things you do in the onCreate method like setting those SitesOverlay items on the map
    } 
```

# notepad - 我可以在打开“查找”选项的情况下从 C# 打开 Notepad.exe 吗？

> ID：12517534
> 
> 赞同：4
> 
> 时间：2012-09-20T17:11:44.750
> 
> 标签：notepad, process.start

我创建了一个 Window 窗体 C# 应用程序，它使用以下命令打开 Notepad.exe：

```
System.Diagnostics.Process.Start("notepad.exe", w_file); 
```

但我想用“编辑查找”选项打开记事本，并在“查找”字段中输入一些值。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:32:02.000

看起来你正在尝试自动化某些东西......

这是来自[CodeProject](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)的示例，它将帮助您在 C# 中做您正在寻找的事情

# python - PyCharm 自动完成

> ID：12517535
> 
> 赞同：11
> 
> 时间：2012-09-20T17:11:59.087
> 
> 标签：python, autocomplete, pycharm

我对 Python 和 PyCharm 完全陌生，我无法弄清楚为什么 PyCharm 不能自动完成非常简单的情况，例如：

```
import pickle

pickle.dum[control+space or control+shift+space results nothing here] 
```

我有 PyCharm 2.6.2 和 Python 2.7.1。怎么了？

**添加：**

我在 Mac OS 10.7.3 上

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T18:05:04.093

无法重现。确保为项目配置了有效的 Python 解释器。也试试`File`| `Invalidate Caches`.

![泡菜](../Images/e020c74fb7c9fa9438e655f3f4022a68.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-12T15:53:20.020

我的经验是，如果您打开文件-> 省电模式，所有后台任务都将停止，包括自动完成任务。因此，您可以尝试关闭省电模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T17:34:19.353

您可以尝试使用 virtualenv 并在其上安装所有项目依赖项，然后转到 pycharm 首选项/项目解释器，它将更新您的项目依赖项。

[项目督察](https://i.stack.imgur.com/d9X4L.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-08T03:31:40.280

它也发生在我身上。但是以前的所有答案都不能解决我的问题。

奇怪的是，当我编码时，它会为我抽出自动完成功能。但是一旦我离开自动完成模式，我就无法通过键入`Ctrl`+来重现自动完成`Space`。

所以我已经调查过的工作是

1.  确保配置（例如 virtualenv）在 Pycharm 中是正确的
2.  确保 Pycharm 可以显示自动完成功能
3.  确保我不在`Power Safe Mode`

最后我解决了这个问题，因为我在 Mac 中切换语言的快捷方式也是`Ctrl`+ `Space`，所以它有点覆盖了我在 Pycharm 中的快捷方式。我通过更改更改 Pycharm 中的快捷方式`Pycharm-> Preference-> Keymap-> Main menu-> Code-> Completion ->Basic`

然后问题就解决了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-06T17:42:40.510

我更改了投影仪解释器，现在它工作正常。

# c# - SQL Server 数据导入困境

> ID：12517543
> 
> 赞同：1
> 
> 时间：2012-09-20T17:12:23.503
> 
> 标签：c#, sql, sql-server

我创建了一个应用程序，它将 CSV 文件导入到数据库表中，并且我有多个 CSV 文件需要导入到 SQL Server 数据库中的表中。

我有几种方法，但我不确定哪种方法最实用。该应用程序通过要求用户选择他们想要导入的文件（从他们的本地文件系统）然后他们只需单击一个`[Load Files]`按钮来工作。这些文件有时可能包含 100,000 多行。

对于上述情况，什么会更好？

1.  使用 C# 和开源[GenericParser](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)将 CSV 文件导入数据表，然后使用传统的 BulkCopy 方法将数据表推送到数据库

    **注意**：我担心的是在对超过 100,000 行的文件执行此操作时对用户 PC 造成的压力。这将如何影响处理或会使程序崩溃？

2.  使用需要文件名和路径的批量插入。我对此选项的担忧是我不确定服务器是否能够在没有物理文件位于服务器上的情况下处理批量插入命令？文件路径将与用户本地机器相关。我唯一一次使用批量插入是在我登录到服务器本身时，这对于这个应用程序是不可能的。

3.  有没有办法用 Linq 做到这一点？虽然我对 Linq 不是很熟悉，但如果它可以实现，我愿意尝试它。

任何见解都值得赞赏。我知道我需要做什么只是不确定如何实际完成它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:17:18.540

我的建议是在 .NET中使用[SqlBulkCopy类。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)它将允许您在 BULK INSERT 语句中几乎以同样快的速度导入行，但只需要您使用这些行填充 DataTable，然后将它们发送到 SQL Server。

您可能要考虑的另一个考虑因素是（这是我个人最喜欢的简单文件导入程序）使用 PowerShell 而不是 C#，它具有用于导入 CSV 文件的[内置 cmdlet 。](http://technet.microsoft.com/en-us/library/ee176874.aspx)很酷的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:24:08.477

1) .Net 中的加载器应用程序通常是一个不错的选择。100,000 行确实不是一个繁重的工作量，尤其是对于简单的负载。只有当为了动态查找值而涉及大量多表连接时，这才会真正成为一个大问题。

2）虽然严格来说物理文件位置只是一个性能问题，但我不会这样做。它将引入行政难题。

3）我没有使用Linq的经验，我无法评论。

只是为了额外的想法：如果您在某处运行 IIS，甚至可能在数据库服务器上，您可以创建一个轻量级的单页“webapp”，它只是一个 CGI 脚本，具有与数据库的 ODBC 连接，用户只需提供CSV 作为“web/CGI”上传。无需以这种方式在用户工作站上安装实用程序应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:33:04.047

要解决您的问题，您必须在两个基本视图中查看：

1.  在插入数据库之前，您是否需要对数据进行一些操作（一些汇总、更正等）？如果是，那么这里是将行从文件上传到对象（每一行到一个对象实例）的最佳方式。并且您可以使用 Linq 优雅地移动项目列表。

2.  您只需要按原样将行从文件插入到数据库吗？在这种情况下，使用您问题第 2 点中描述的过程。

我更愿意在任何操作之前将文件上传到服务器。它更安全。

# scala - 基本目录中缺少 build.scala

> ID：12517544
> 
> 赞同：1
> 
> 时间：2012-09-20T17:12:29.453
> 
> 标签：scala, sbt, akka

我正在使用来自 GitHub 的教程尝试 sbt 版本 12。我从 sbt windows 安装程序包安装了 sbt，但是任何时候我运行 sbt，项目都会运行，但是我在基目录中找不到 build.scala 文件，而是在基目录中找到了一个带有 scala 文件的目标文件夹

下面是来自 github 的简单 scala 代码

```
object Hi {
  def main(args: Array[String]) = println("Hi!")
} 
```

代码在 scala 文件中定义。即使代码运行但我找不到 build.scala 文件。关键是我想建立一个akka项目，我相信我必须在build.cala文件中添加一些配置

请有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:32:19.563

SBT 使用所谓的“约定优于配置”的方法。这意味着对于一个简单的项目不需要配置。因此，如果您想配置您的项目，请使用轻量配置（只需`build.sbt`在项目目录中创建一个文件`root`）或完整配置（只需`build.scala`在项目目录中创建一个文件`root/project`）。[请参阅Akka 文档网站上](http://doc.akka.io/docs/akka/2.0.3/intro/getting-started.html)的“将 Akka 与 SBT 一起使用”部分以了解 akka 依赖项，并参阅[此站点](https://github.com/harrah/xsbt/wiki/Getting-Started-Basic-Def)以了解 SBT 配置。[请注意，在SBT 的网站上](http://www.scala-sbt.org/howto.html)也有一个很好的 SBT 指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:37:41.577

build.scala 文件进入您应该在项目根文件夹中创建的 /project 目录。阅读文档的[这一页](https://github.com/harrah/xsbt/wiki/Getting-Started-Full-Def)。

关于 Akka，我将从[入门](http://doc.akka.io/docs/akka/snapshot/intro/getting-started.html)文档中提到的[模板项目](http://typesafe.com/stack/download#template)开始，而不是尝试从头开始构建它。

# mysql - 如何在windows中创建一个mysql数据库

> ID：12517545
> 
> 赞同：0
> 
> 时间：2012-09-20T17:12:39.063
> 
> 标签：mysql, database

目前我正在研究访问数据库（.mdb），但我想转移到 mysql 数据库。目前我正在使用 Windows 7 机器并从[http://www.mysql.com/downloads/installer/](http://www.mysql.com/downloads/installer/)安装 mysql 。我打开了 Mysql 工作台并创建了一个新的 EER MODAL ?? 如此屏幕截图所示![在此处输入图像描述](../Images/f248a01faa138139fdf2c999e6e17314.png)。但是我仍然无法弄清楚哪个是数据库以及如何使用它。这是表格模式的另一个屏幕截图，以及如何在需要时将数据库保存到某个位置。 ![在此处输入图像描述](../Images/474c48564bfd369bc255bd62beef00ad.png) PS：我对mysql完全陌生，我使用访问数据库，但我仍然不知道我是否以正确的方式。如果没有，请建议我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:17:53.637

You have the MySQL server running on your local machine. To access it, you would connect to localhost:3306 (I think you have your port set to 3306 from the screenshot I see).

Your second screenshot is the database you are connected to in SQL workbench and what tables it contains. If you give some information on how you are going to be using the DB, I can give you some more information to point you in the right direction.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:24:45.907

您不必创建新的 ERR 模型。只需建立一个新连接和新服务器实例即可完成。如果可能，请尝试安装 Wamp。

# java - 抽象接口声明

> ID：12517547
> 
> 赞同：0
> 
> 时间：2012-09-20T17:13:04.813
> 
> 标签：java, inheritance, interface

> **可能重复：**
> [Java 抽象接口](https://stackoverflow.com/questions/7202616/java-abstract-interface)

为什么 Java 开发人员使用`public abstract`接口？接口默认是抽象的。

**例如：**

```
public abstract interface test{
    …
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:15:55.923

这不是必需的。根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.1.1.1)：

> 9.1.1.1。抽象接口
> 
> 每个接口都是隐式抽象的。
> 
> 此修饰符已过时，不应在新程序中使用。

# objective-c - Objective-C 中的开放变量

> ID：12517550
> 
> 赞同：0
> 
> 时间：2012-09-20T17:13:24.097
> 
> 标签：objective-c, global-variables

我需要帮助。我需要一个可用于我的应用程序中的每个函数的变量

```
 @interface A()
    @property (assign) CGFloat x;
    @end

    @implementation
    @synthesize x = _x;

    -(void)DidLoad
    { ...
     self.x = 1.0; }

    -function1
    { CGFloat y;
      y = x;
      NSString *string = [NSString stringWithFormat:"%f", y];
      NSLog(@"%@", string);
} 
```

* * *

但是“y”是空变量！你能帮助初学者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:19:58.980

在function1中，您应该使用：

```
y = self.x;

y = _x; //this should work too, but it's not recommended to access the variable that way. 
```

# ios - 添加为子视图后在 GCD 全局队列中创建的 UIView 奇怪行为

> ID：12517551
> 
> 赞同：0
> 
> 时间：2012-09-20T17:13:27.650
> 
> 标签：ios

我正在创建一些 UIViews 并缓存它们，原因对手头的问题并不重要。

在我将视图 X 作为子视图添加到 Y 后，X 的子视图之一不会出现。如果我等待 20-30 秒，它会突然出现。

以下是我创建视图并将它们添加到缓存中的方式。这些视图尚未添加到 ui 中，稍后会发生。

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{

        for(int i = 0; i < 10;i++){
            MyUIView *cTemp = [[MyUIView alloc] initWithFrame:CGRectZero];
            [self addViewToCahce:cTemp forKey:@"key"];  

        }

}); 
```

但是如果我删除`dispatch_async`它，它应该会出现。任何人都知道这里发生了什么或如何防止这种异常行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:16:17.983

切勿在主线程之外修改 UI。Cocoa 和大多数 UI 框架一样，不是多线程的。请尝试以下操作：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{
    // Do whatever processing you want to do here
    dispatch_async(dispatch_get_main_queue(), ^{
        for(int i = 0; i < 10;i++){
            MyUIView *cTemp = [[MyUIView alloc] initWithFrame:CGRectZero];
            [self addViewToCahce:cTemp forKey:@"key"];  

        }
    });    
}); 
```

至于您为什么会遇到您所描述的行为，我只能推测。我不相信构造函数`UIView`是线程安全的。如果您需要在另一个线程中创建视图，我建议尽可能重构代码。

# objective-c - NSMutableAttributedString 在更改字体时崩溃？

> ID：12517553
> 
> 赞同：5
> 
> 时间：2012-09-20T17:13:32.813
> 
> 标签：objective-c, ios, nsattributedstring, nsmutablestring

我确定 mutable 意味着它可以更改，那么为什么会发生这种情况？

```
attrString = [[NSMutableAttributedString alloc] initWithString:@"Tip 1: Aisle Management The most obvious step – although one that still has not been taken by a disconcerting number of organisations – is to configure cabinets in hot and cold aisles. If you haven’t got your racks into cold and hot aisle configurations, we can advise ways in which you can achieve improved airflow performance."];

        [attrString setFont:[UIFont systemFontOfSize:20] range:NSMakeRange(0, 23)];
        [attrString setFont:[UIFont systemFontOfSize:15] range:NSMakeRange(24, 325)];
        [attrString setTextColor:[UIColor blackColor] range:NSMakeRange(0,184)];
        [attrString setTextColor:[UIColor blueColor] range:NSMakeRange(185,325)];
        break; 
```

我的 cattextlayer 和我的 nsmutableattributedsring 都在我的头文件中定义。我在开关中对上面的字符串进行了更改，然后调用此代码来更新字符串显示在的 cattextlayer：

```
//updates catext layer
TextLayer = [CATextLayer layer];

TextLayer.bounds = CGRectMake(0.0f, 0.0f, 245.0f, 290.0f);
TextLayer.string = attrString;
TextLayer.position = CGPointMake(162.0, 250.0f);
TextLayer.wrapped = YES;

[self.view.layer addSublayer:TextLayer]; 
```

它在尝试设置字体时崩溃，但我不知道为什么？

> -[NSConcreteMutableAttributedString setFont:range:]：无法识别的选择器发送到实例 0xd384420 ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSConcreteMutableAttributedString setFont:range:]：无法识别的选择器发送到实例 0xd384420”

为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T17:19:44.187

NSMutableAttributedString 没有 setFont:range: 函数。

取自这里.... [iphone/ipad：究竟如何使用 NSAttributedString？](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)

所以我从文档中做了一些阅读。

功能是...

```
[NSMutableAttirbutedString setAttributes:NSDictionary range:NSRange]; 
```

所以你应该能够做这样的事情......

```
[string setAttributes:@{NSFontAttributeName:[UIFont fontWithName:@"Helvetice-Neue"]} range:NSMakeRange(0, 2)]; 
```

或者

```
[string setAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"Helvetice-Neue"], NSFontAttributeName", nil] range:NSMakeRange(0, 2)]; 
```

如果您仍在使用旧的 ObjC 语法。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T03:36:13.087

首先，你说的attrString是一个属性吗？如果是一个属性，你最好检查一下你是否用copy属性声明了这个属性，你大概是在使用编译器生成的setter吗？如果 YES 编译器生成的 setter 将复制消息发送到对象以进行复制。复制消息制作一个不可变的副本。也就是说，它创建了一个 NSAttributedString，而不是一个 NSMutableAttributedString。

解决此问题的一种方法是编写自己的使用 mutableCopy 的 setter，如果您使用 ARC，则如下所示：

```
- (void)setTextCopy:(NSMutableAttributedString *)text {
   textCopy = [text mutableCopy];
} 
```

如果您使用手动引用计数，或者像这样：

```
- (void)setTextCopy:(NSMutableAttributedString *)text {
    [textCopy release];
    textCopy = [text mutableCopy];
} 
```

另一个解决方法是让 textCopy 成为 NSAttributedString 而不是 NSMutableAttributedString，并让其余代码将其作为不可变对象使用。

参考： 1️⃣[如何复制一个 NSMutableAttributedString](https://stackoverflow.com/questions/11084655/how-to-copy-a-nsmutableattributedstring) 2️⃣ [NSConcreteAttributedString mutableString crash](http://forums.macrumors.com/showthread.php?t=878218)

# android - android 2.3.3 应用程序菜单列表图标

> ID：12517555
> 
> 赞同：0
> 
> 时间：2012-09-20T17:13:44.500
> 
> 标签：android, list, menu

2.3.3 中的应用列表是这样的，代码在哪里？

[http://static5.businessinsider.com/image/4e0cb6e0cadcbbc53f020000-590/the-galaxy-s-ii​​-runs-android-version-233-not-a-huge-fan-of-the-touchwiz-skin-虽然。 jpg](http://static5.businessinsider.com/image/4e0cb6e0cadcbbc53f020000-590/the-galaxy-s-ii-runs-android-version-233-not-a-huge-fan-of-the-touchwiz-skin-though.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:17:51.657

That is the TouchWiz UI, which is a proprietary Samsung interface, and AFAIK it is not open source, so you will not be able to find the source code online.

On the other hand, you could try looking into the open source launchers available, and their themes. A good one to start with would be [ADW](http://code.google.com/p/adw-launcher-android/).

# c# - 为什么递归算法会添加重复文件？

> ID：12517557
> 
> 赞同：2
> 
> 时间：2012-09-20T17:13:50.630
> 
> 标签：c#, multithreading, file, task-parallel-library

一旦我将所有 C 驱动器编入索引以进行快速搜索，使用多个线程来搜索文件会很有帮助！唯一的问题是我找到了重复的文件。如果有人能解释我为什么在以下算法中有重复文件，我将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

class Program
{
    static volatile List<System.IO.FileSystemInfo> files = new List<System.IO.FileSystemInfo> ( );
    static readonly object lockFiles = new object ( );  // every time we read or write to files we use this lock

    static long numberOfThreadsRuning; // used to determine when we are done. if 0 threads runing it means we are done!

    static readonly int max_Number_OF_Threads = 8; 

    static void Main (  )
    {
        numberOfThreadsRuning = 0;

        // add first task this will increase numberOfThreadsRuning
        AddTask ( () => findFiles ( @"C:\Users\Antonio" ) );

        // while number of threads running is greater than 0
        while ( Interlocked.Read ( ref numberOfThreadsRuning ) > 0 )   
            Thread.Sleep ( 100 );            
    }

    // start finding files in a new thread
    static void AddTask (Action task )
    {
        // increment numberOfThreadsRuning with a lock
        Interlocked.Increment ( ref numberOfThreadsRuning );

        Task.Factory.StartNew ( task ).ContinueWith ( x =>
        {
            // once we are done executing the task decrement number of threads runing
            Interlocked.Decrement ( ref numberOfThreadsRuning );
        });
    }

    // recursively start finding files
    static void findFiles ( string path )
    {
        System.IO.FileSystemInfo[ ] subDirAndFiles;

        try {
            subDirAndFiles = new System.IO.DirectoryInfo (path).GetFileSystemInfos ( );
        }
        catch { // sometimes we are not able to access some directories so just ignore the error
            return;
        }

        foreach ( var file in subDirAndFiles )
        {
            lock(lockFiles)
                files.Add ( file );

            if ( file is System.IO.DirectoryInfo ) // if it is a directory
            {
                var numTaskRun = Interlocked.Read (ref  numberOfThreadsRuning );

                if ( numTaskRun < max_Number_OF_Threads )
                    AddTask ( ( ) => findFiles ( file.FullName ) ); // if there are 8 or less threads running create a new task
                else
                    findFiles ( file.FullName ); // otherwise continue finding files in current thread
            }                
        }
    }
} 
```

请尝试比较当我使用 8 个线程 VS 1 通过将静态变量更改`max_Number_OF_Threads`为`1`. 证明我的算法错误的另一种方法是，`(files.Length = different number)`每次我有超过 1 个线程时，它总是会找到不同数量的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T17:25:20.937

这就是问题：

```
foreach ( var file in subDirAndFiles )
{

    ...
    AddTask ( ( ) => findFiles ( file.FullName ) );
} 
```

（除了大量的空格，这让我很难阅读......以及非常规的方法名称。）

您正在捕获 lambda 表达式中的循环变量。这意味着（在 C# 3 和 4 中）将*在 lambda 表达式执行时*计算变量- 这意味着您可以从以后的迭代中获取值。

解决方法是将值复制到循环内的“新”变量中：

```
foreach (var file in subDirAndFiles)
{
    var copy = file;
    AddTask(() => FindFiles(copy.FullName));
} 
```

这在 C# 5 编译器中已更改，因此您不需要“复制”变量 - 相反，就好像`foreach`在每次迭代时声明一个新变量，这是一种更自然的方法。

# php - 此脚本找不到绝对网址

> ID：12517560
> 
> 赞同：0
> 
> 时间：2012-09-20T17:14:11.277
> 
> 标签：php, arrays, url

在下面的代码中，它应该扫描链接并将它们索引到数组 [links] 中。但由于某种原因，他们不会索引。

我开始思考如果我的正则表达式代码是错误的，我该如何改进它。这也是我的 file_get_contents 命令吗？是否正确使用？

```
$links = Array();

$URL = 'http://www.theqlick.com'; // change it for urls to grab  

// grabs the urls from URL 
$file  = file_get_contents($URL);

    $abs_url = preg_match_all("'^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$^'", $file, $link);
    if (!empty($abs_url)) {
        $links[] = $abs_url;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:19:47.103

preg_match_all 返回完整模式匹配的数量（可能为零），如果发生错误，则返回 FALSE (c) php.net

```
preg_match_all("'^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$^'", $file, $matches);

if (!empty($matches)
  $links = $matches; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:22:44.273

你的正则表达式是错误的。`^`您在与尾部匹配相邻的模式末尾有一个头锚`$`。我不认为锚真的不需要。此外，您将匹配项存储在`$link`(no `s`) 中的变量。加上您的模式分隔符似乎是`'`字符。那是故意的吗？幸运的是，它会起作用，但我猜你不是故意的？

尝试这个：

```
$matchCount = preg_match_all("/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/", $file, $matches);
if ($matchCount)
{
    foreach ($matches as $match)
    {
        $links[] = $match[0];
    }
} 
```

阅读[PHP 正则表达式](http://php.net/manual/en/reference.pcre.pattern.syntax.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:16:37.230

在您的 preg_match_all 中，您将保存到 $link 而不是 $links。

# ruby-on-rails - RailsTutorial.org Chapter9 session.delete 问题

> ID：12517561
> 
> 赞同：2
> 
> 时间：2012-09-20T17:14:18.780
> 
> 标签：ruby-on-rails, ruby, session, authentication, railstutorial.org

我正在关注[http://ruby.railstutorial.org上的教程](http://ruby.railstutorial.org)

具体来说，第 9 章（9.2.3） [http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#top](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#top)

当用户在访问受限页面时被提示登录然后在成功登录后被重定向回受限页面时，我已经设法获得了部分。

我正在尝试获取它，以便在重定向到受保护页面后，下一次登录尝试将直接返回主用户个人资料页面，但是，`session.delete(:return_to)`似乎没有工作，并且用户被反复引导回原来的页面保存的受保护页面。这是我的代码：

我的会话控制器：

```
class SessionsController < ApplicationController

  def new

  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
      # Sign the user in and redirect to the user's show page.
    else
      # Create an error message and re-render the signin form.
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  ...

end 
```

我的会话助手：

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end

  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    session.delete(:return_to)
  end

  def store_location
    session[:return_to] = request.url
  end
end 
```

您可以提供的任何帮助都会很棒！似乎`session.delete()`根本行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:36:53.587

当我完成本教程时，我的代码具有该`SessionsController#create`方法的第一行：

```
user = User.find_by_email(params[:email])
if user && user.authenticate(params[:password]) 
```

但是，我可以看到[书中对应的代码](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code-friendly_session_create)已经改为：

```
user = User.find_by_email(params[:session][:email].downcase)
if user && user.authenticate(params[:session][:password]) 
```

我试图在我`sample_app`的 . 所以，对你来说，我想首先测试将`downcase`方法添加到你的`params[:session][:email]`调用中，如果这不起作用，请尝试将这些行替换为`session`上面的 -less 代码，看看它是否有效。

### 更新

查看您的代码后，据我所知，这些是您的问题：

你打电话`session.delete(:return_to)`来是`SessionsController#create`出于某种原因。此行可以删除：

**应用程序/控制器/sessions_controller.rb**

```
def create
  user = User.find_by_email(params[:session][:email].downcase)
  if user && user.authenticate(params[:session][:password])
    # session.delete(:return_to)
    sign_in user
    # ...
  #...
end 
```

方法中的两行代码都`UsersController#signed_in_user`需要放入`unless`块中，而不仅仅是调用`redirect_to`：

**应用程序/控制器/users_controller.rb**

```
def signed_in_user
  unless signed_in?
    store_location
    redirect_to signin_url, notice: "Please sign in." #unless signed_in?
  end
end 
```

如果您进行这些更改并运行您的测试，您仍然可以`Nokogiri::XML::XPath::SyntaxError:`调用

**规范/请求/authentication_pages_spec.rb**

```
it { should have_exact_title('title', text: full_title('')) }` 
```

但我假设这是您计划使用的自定义匹配器。如果不是并且这是一个错误，请将其删除，您的所有测试都会通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T07:36:30.513

以下块解决了它。没有其他东西需要改变。

```
def signed_in_user
  unless signed_in?
    store_location
    redirect_to signin_url, notice: "Please sign in." #unless signed_in?
  end
end 
```

# java - Hibernate 自定义删除策略

> ID：12517567
> 
> 赞同：1
> 
> 时间：2012-09-20T17:14:37.230
> 
> 标签：java, hibernate, openjpa

我有一个项目最近`OpenJPA`从`Hibernate`. 在替换特定于 的配置部分时`OpenJPA`，我遇到了一个无法在其中复制的功能`Hibernate`。

在`OpenJPA`中，我们通过注释实体`@Strategy`并提供`org.apache.openjpa.jdbc.meta.strats.AbstractStrategy`. 在该`customDelete`方法中，我们调用单个共享存储过程并传递表名、实体 ID 和执行操作的用户 ID，此过程将删除实体并创建审计日志条目。

在`Hibernate`中，我可以找到许多可用的钩子，但似乎没有一个提供相同的功能。我看过以下内容：

1.  @SQLDelete("customer delete query") - 此选项仅允许您访问 id，而不是表名或用户 id，因此每个类都是自定义的，但仍然缺少信息

2.  EntityListener 类 - 此选项告诉您删除的实体，但需要挖掘以获取实际涉及的表，并且超出单个数据库操作的范围

是否有任何其他选项更接近 OpenJPA 方法，或者我最好的选择是使用一个`EntityLister`类并自己做繁重的工作来确定表名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:15:46.810

你的持久性类的 DAO 对象怎么样，你可以在其中定义自定义 DB 方法。这是一个使用 HiberObjects 生成的示例 DAO。可以通过删除@generated 注释来根据需要定义生成的方法。

```
package de.cw.minifigfinder.dao;

import javax.persistence.EntityTransaction;

import de.cw.minifigfinder.model.UIValues;

/**
 * @generated
 */
public class UIValuesDAO {

private static final String ID = "MINIFIGFINDER";

/**
 * @generated
 */
public UIValuesDAO() {
}

/**
 * @generated
 */
private javax.persistence.EntityManager getSession() {
    return de.cw.minifigfinder.util.HibernateHelper.getInstance()
            .getEntityManager();
}

public Long create() {
    UIValues object = new UIValues();
    object.setValuesID(ID);
    if (object == null)
        throw new IllegalArgumentException("object");
    javax.persistence.EntityManager em = getSession();
    EntityTransaction tx = null;
    try {
        tx = em.getTransaction();
        tx.begin();
        em.persist(object);
        tx.commit();
    } catch (RuntimeException e) {
        if (tx != null)
            tx.rollback();
        throw e; // or display error message
    } finally {
        em.close();
    }
    return object.getId();
}

/**
 * @generated
 */
public void delete(de.cw.minifigfinder.model.UIValues object) {
    if (object == null)
        throw new IllegalArgumentException("object");
    getSession().remove(object);
} 
```

}

# html - 如何使用 XSLT 将 HTML 链接添加到 XML 文件

> ID：12517575
> 
> 赞同：0
> 
> 时间：2012-09-20T17:15:13.500
> 
> 标签：html, xml, xslt, alfresco, activiti

好的，所以我以前从未使用过 XSLT，我在网上看到了几个例子。但是，我并不确定每个示例在节点位置、模板匹配等方面都在查看什么。

但本质上，我有这个 XML 文件，一个来自 Activiti 工作流的示例流程定义：

```
<?xml version="1.0" encoding="UTF-8" ?>

<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn"
   xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
   xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema"
   expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://alfresco.org">

    <process id="activitiAdhoc" name="Adhoc Activiti Process">

        <startEvent id="start"
            activiti:formKey="wf:submitAdhocTask" />
        <sequenceFlow id='flow1' 
            sourceRef='start'
            targetRef='adhocTask' />

        <userTask id="adhocTask" name="Adhoc Task"
            activiti:formKey="wf:adhocTask">
           <extensionElements>
               <activiti:taskListener event="create" class="org.alfresco.repo.workflow.activiti.tasklistener.ScriptTaskListener">
                  <activiti:field name="script">
                     <activiti:string>
                      if (typeof bpm_workflowDueDate != 'undefined') task.dueDate = bpm_workflowDueDate
                      if (typeof bpm_workflowPriority != 'undefined') task.priority = bpm_workflowPriority;
                     </activiti:string>
                  </activiti:field>
               </activiti:taskListener>
           </extensionElements>
            <humanPerformer>
                <resourceAssignmentExpression>
                    <formalExpression>${bpm_assignee.properties.userName}</formalExpression>
                </resourceAssignmentExpression>
            </humanPerformer>
        </userTask>

        <sequenceFlow id='flow2' 
        sourceRef='adhocTask'
            targetRef='verifyTaskDone' />

        <userTask id="verifyTaskDone" name="Verify Adhoc Task Completed."
            activiti:formKey="wf:completedAdhocTask" >
            <documentation>
                Verify the arbitrary task was completed.
            </documentation>
            <extensionElements>
               <activiti:taskListener event="create" class="org.alfresco.repo.workflow.activiti.tasklistener.ScriptTaskListener">
                  <activiti:field name="script">
                     <activiti:string>
                        if (typeof bpm_workflowDueDate != 'undefined') task.dueDate = bpm_workflowDueDate
                        if (typeof bpm_workflowPriority != 'undefined') task.priority = bpm_workflowPriority;

                        if (wf_notifyMe)
                        {
                           var mail = actions.create("mail");
                           mail.parameters.to = initiator.properties.email;
                           mail.parameters.subject = "Adhoc Task " + bpm_workflowDescription;
                           mail.parameters.from = bpm_assignee.properties.email;
                           mail.parameters.text = "It's done";
                           mail.execute(bpm_package);
                        }
                     </activiti:string>
                  </activiti:field>
               </activiti:taskListener>
           </extensionElements>
            <humanPerformer>
                <resourceAssignmentExpression>
                    <formalExpression>${initiator.exists() ? initiator.properties.userName : 'admin'}</formalExpression>
                </resourceAssignmentExpression>
            </humanPerformer>
        </userTask>

        <sequenceFlow id='flow3' sourceRef='verifyTaskDone'
            targetRef='theEnd' />

        <endEvent id="theEnd" />

   </process>

   <!-- Graphical representaion of diagram -->
   <bpmndi:BPMNDiagram id="BPMNDiagram_activitiAdhoc">
      <bpmndi:BPMNPlane bpmnElement="activitiAdhoc" id="BPMNPlane_activitiAdhoc">
         <bpmndi:BPMNShape bpmnElement="start"
            id="BPMNShape_start">
            <omgdc:Bounds height="35" width="35" x="30" y="200"></omgdc:Bounds>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape bpmnElement="adhocTask"
            id="BPMNShape_adhocTask">
            <omgdc:Bounds height="55" width="105" x="130"
               y="190"></omgdc:Bounds>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape bpmnElement="verifyTaskDone"
            id="BPMNShape_verifyTaskDone">
            <omgdc:Bounds height="55" width="105" x="290"
               y="190"></omgdc:Bounds>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape bpmnElement="theEnd"
            id="BPMNShape_theEnd">
            <omgdc:Bounds height="35" width="35" x="455" y="200"></omgdc:Bounds>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
            <omgdi:waypoint x="65" y="217"></omgdi:waypoint>
            <omgdi:waypoint x="130" y="217"></omgdi:waypoint>
         </bpmndi:BPMNEdge>
         <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
            <omgdi:waypoint x="235" y="217"></omgdi:waypoint>
            <omgdi:waypoint x="290" y="217"></omgdi:waypoint>
         </bpmndi:BPMNEdge>
         <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
            <omgdi:waypoint x="395" y="217"></omgdi:waypoint>
            <omgdi:waypoint x="455" y="217"></omgdi:waypoint>
         </bpmndi:BPMNEdge>
      </bpmndi:BPMNPlane>
   </bpmndi:BPMNDiagram>

</definitions> 
```

我从[这里](https://stackoverflow.com/questions/1007700/xslt-insert-html-content)看到了一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()">
        <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="/html/body/content/h2">
        <xsl:copy>
                <xsl:apply-templates/>
        </xsl:copy>
        <p><a href="...">your new link</a></p>
    </xsl:template>
</xsl:stylesheet> 
```

就我目前的目的而言，我并不关心我将链接放在表单上的哪个位置，我只需要它首先出现。所以我只是想知道我应该从该示例中更改什么以匹配我的 XML 文件中的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:25:42.790

我不确定我是否正确...这里有一些示例如何匹配文档的元素。但是有一些选项会使 XSLT 变得非常复杂 :-D 您必须始终牢记如何遍历节点树。

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:model="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:activiti="http://activiti.org/bpmn">

 <!-- example match of definitions -->
 <xsl:template match="model:definitions">
   <!-- here you can do something -->
   <!-- and if you want traverse the rest of the tree -->
   <xsl:apply-templates select="*|@*"/>
 </xsl:template> 

 <!-- example match of userTask -->
 <xsl:template match="model:userTask">
   <!-- here you can do something -->
   <!-- and if you want traverse the rest of the tree -->
   <xsl:apply-templates select="*|@*"/>
 </xsl:template> 

 <!-- example match of an attribute -->
 <xsl:template match="@activiti:formKey">
   <!-- here you can do something -->
 </xsl:template> 

  <!-- this handles all not explicit mentioned nodes ... -->
  <xsl:template match="*|@*">
    <!-- ... and traverse the xml tree -->
    <xsl:apply-templates select="*|@*"/>
  </xsl:template>
</xsl:stylesheet> 
```

# css - 在 IE/Chrome/Firefox 中打印预览（或打印）时不显示图像

> ID：12517577
> 
> 赞同：8
> 
> 时间：2012-09-20T17:15:26.980
> 
> 标签：css, internet-explorer, firefox, google-chrome, print-preview

我是 Web 开发人员，几乎从不从事设计工作，但遇到了这个我正在努力纠正的错误。

当我打印/显示打印预览页面时，某些图像会正确显示，但其他图像则不会。我可以看到的主要区别是，未出现的图像是跨度标签，图像应用在 css 中，而工作图像使用 img 标签。

以下是 html 的示例：

带有“图标”出生的 Span*不*显示：

```
<li class="media">
    <div class="img">
        <div class="h2 mtm">1889</div>
        <span class="timeline-icon icon-birth"></span>
    </div>
    <div class="bd">
        <h3 class="profile-subtitle mts">Born in ?</h3>
        <p class="deemphasis mbn">
        <a href="/search/results/bmdindexedbirths/bibby/elizabeth%20?yearofbirth=1889">Search     for Birth Record</a>
        </p>
    </div>
</li> 
```

Image.gif*确实*显示：

```
<li class="media">
    <div class="img">
        <div class="h6">
            <strong>Spouse</strong></div>
            <img src="image.gif" alt="" class="person-thumb dropshadow" />
        </div>
    <div class="bd">
        <p class="mbn">Husband</p>
        <h3 class="profile-subtitle">
            <a href="path">Thomas&nbsp;<strong>Name</strong></a>
        </h3>
        <p class="mbn">?&#45;?</p>
    </div>
</li> 
```

在某些浏览器中，它在预览中看起来不错，但不打印，在其他浏览器中，它没有并且仍然不打印。

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T14:38:35.123

两个多月前我遇到了同样的问题。我有一个按钮可以将用户重定向到一个打印机友好的页面，然后我使用 Javascript 触发了打印对话框。

问题是浏览器没有等到 CSS 背景中指定的图像被下载。

我在触发打印对话框之前设置了超时，以便让浏览器有时间下载图像。这种方法不可靠，因为没有人具有恒定的下载速度，并且它会在图像下载给互联网连接非常慢的用户之前打开打印对话框。

最后，我使用 HTML`img`标签在我的页面上嵌入图像，并使用 jQuery 在下载最后一张图像时触发打印对话框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-30T05:43:09.020

您需要在打印之前延迟。chrome 中有一个原生错误。代码如下：-

```
function PrintDiv(data) {
    var mywindow = window.open();
    var is_chrome = Boolean(mywindow.chrome);
    mywindow.document.write(data);

   if (is_chrome) {
     setTimeout(function() { // wait until all resources loaded 
        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10
        mywindow.print(); // change window to winPrint
        mywindow.close(); // change window to winPrint
     }, 250);
   } else {
        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10

        mywindow.print();
        mywindow.close();
   }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T08:22:23.323

只需添加以下样式即可使其工作 img{max-width:100%;height:auto;}

它在导致问题的打印中将图像的宽度设置为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:11:50.203

制作一个打印样式表，将您的跨度设置为 display:block

# algorithm - 从 1,000,000 个总值中找出最大的 10,000 个

> ID：12517579
> 
> 赞同：0
> 
> 时间：2012-09-20T17:15:35.833
> 
> 标签：algorithm, data-structures

我有一个包含 1,000,000 个浮点值的文件。我需要找到 10,000 个最大值。

我在想：

1.  读取文件
2.  将字符串转换为浮点数
3.  将浮点数放入最大堆（最大值为根的堆）
4.  在所有值都在堆中之后，删除根 10,000 次并将这些值添加到列表/数组列表中。

我知道我会有

1.  1,000,000 次插入到堆中
2.  从堆中删除 10,000 次
3.  10,000 个插入返回列表

这会是一个很好的解决方案吗？这是一个家庭作业。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T17:22:49.433

您的解决方案大多是好的。它基本上是一个在获取 K 个元素后停止的堆排序，这将运行时间从[（](http://en.wikipedia.org/wiki/Heapsort)`O(NlogN)`对于完整排序）提高到`O(N + KlogN)`. 这里 N = 1000000 和 K = 10000。

However, you should not do N inserts to the heap initially, as this would take `O(NlogN)` - instead, use a heapify operation which turns an array to a heap in linear time.

If the K numbers don't need to be sorted, you can find the Kth largest number in linear time using a [selection algorithm](http://en.wikipedia.org/wiki/Selection_algorithm), and then output all numbers larger than it. This gives an `O(n)` solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:21:50.710

如何使用 mergesort（在最坏的情况下进行 log n 操作）将 1,000,000 个整数排序到一个数组中，然后直接获取最后一个 10000？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:09:24.963

Sorting is expensive, and your input set is not small. Fortunately, you don't care about order. All you need is to know that you have the top X numbers. So, don't sort.

如果您不是在 1,000,000 中寻找前 10,000 个，而是在 100 个中寻找前 1 个（即单个最大值），您将如何解决这个问题？您只需要跟踪到目前为止所看到的最大值，并将其与下一个数字和下一个数字进行比较，直到找到更大的数字或输入用完为止。您能否将该想法扩展回您正在查看的输入大小？什么是大 O（提示：您只会查看每个输入数字一次）？

最后一点，因为你说这是家庭作业：如果你刚刚在课堂上学习堆，并且你认为你的老师/教授正在寻找堆解决方案，那么是的，你的想法很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T17:20:30.010

将数组中的值全部读入后，能否对它们进行合并排序？这是对值进行排序的快速方法。然后你可以请求 your_array[10000] 并且你会知道它是第 10000 个最大的。合并排序听起来像你想要的。此外，如果您真的需要速度，您可以查看基数排序的值的格式，这将需要一些格式，但听起来这将是解决这个问题的绝对最快的方法。

# algorithm - 提供随机访问的整数序列压缩

> ID：12517580
> 
> 赞同：4
> 
> 时间：2012-09-20T17:15:36.527
> 
> 标签：algorithm, compression

我有一个小范围内的 n 个整数序列，`[0,k)`并且所有整数都具有相同的频率`f`（因此序列的大小为`n=f∗k`）。我现在要做的是在提供*随机访问*的同时压缩这个序列（第 i 个整数是什么）。实现随机访问的时间不一定是 O(1)。我对以更高的随机访问时间为代价实现高压缩更感兴趣。

我没有尝试过霍夫曼编码，因为它根据频率分配代码（我所有的频率都是相同的）。对于这种特殊情况，也许我缺少一些简单的编码。

任何帮助或指示将不胜感激。

提前致谢。

PS：已经在 cs.stackexchange 中询问过，但在这里也询问更好的覆盖范围，抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:31:36.547

如果所有整数都具有相同的频率，那么最佳压缩的公平近似值将是`ceil(log2(k))`每个整数的位数。您可以在恒定时间内访问这些位数组。

如果`k`非常小（如 3），则上述方法可能会浪费大量空间。但是，您可以将固定数量的小整数组合成一个`k`基数，这可以更有效地适合固定数量的位（您也可以方便地将结果放入标准大小的字中）。无论如何，您也可以在恒定时间内访问此编码。

如果您的整数*没有*相同的频率，则最佳压缩可能会从输入的不同部分产生可变的比特率，因此简单的数组访问将不起作用。在这种情况下，良好的随机访问性能需要索引结构：将压缩数据分成大小合适的块，每个块都可以按顺序解压缩，但这一次受块大小的限制。

* * *

如果每个数字的频率*完全相同*，则可以利用这一点节省一些空间——但这可能还不够值得。

`n`范围内随机数的熵`[0,k)`为`n log2(k)`，即`log2(k)`每个数字的位数；*这是在不*利用确切频率的情况下对数字进行编码所需的位数。

每个元素（其中）的`f`副本的可区分排列的熵是：`k``n=f*k`

```
log2( n!/(f!)^k ) = log2(n!) - k * log2(f!) 
```

应用斯特林近似（仅当`n`且`f`很大时才适用），产生：

```
~ n log2(n) - n log2(e) - k ( f log2(f) - f log2(e) )
= n log2(n) - n log2(e) - n log2(f) + n log2(e)
= n ( log2(n) - log2(f) )
= n log2(n/f)
= n log2(k) 
```

这意味着，无论`n`大小`k`，您都不会通过利用输入的确切频率来获得大量空间。

上述斯特林近似的总误差是`O(log2(n) + k log2(f))`，它是`O(log2(n)/n + log2(f)/f)`按数字编码的。这确实意味着，如果您`k`的数据太大而`f`太小（即每个不同的数字只有少量副本），您可以通过巧妙的编码节省一些空间。但是，问题指定`k`实际上很小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:42:39.970

如果您计算出可能的不同组合的数量并取其对数基数 2，您可以找到最佳的压缩方式，我认为在您的情况下它不会那么好。对于频率为 1 的 16 个数字，可能的消息数为 16！Excel 告诉我以 2 为底，以 16 为底！是 44.25，而将它们存储为 4 位代码只需要 64 位。（您想要的每种类型都不止一种[http://mathworld.wolfram.com/MultinomialCoefficient.html](http://mathworld.wolfram.com/MultinomialCoefficient.html)）

我认为您在将随机访问混入其中时会遇到问题，因为您拥有的唯一信息是每种类型的元素都有固定数量的元素 - 在整个序列中。对于整个序列来说，这并不是很多信息，而且它几乎没有单独说明序列的前半部分，因为你很可能在前半部分有更多的数字，而在后半部分则更少。

# javascript - 加速这个（基本）node.js 服务器

> ID：12517593
> 
> 赞同：4
> 
> 时间：2012-09-20T17:16:33.950
> 
> 标签：javascript, python, node.js

我有一个（愚蠢的）node.js 服务器，它的唯一目的是在每个请求传递的数据上调用一个函数并回答该函数的结果。这是我使用的代码：

```
var pageDown = require('./PageDown/Markdown.Sanitizer').getSanitizingConverter(),
 http = require('http');

http.createServer(function (req, res) {
  var data = "";
  res.writeHead(200, {'Content-Type': 'text/plain'});
  req.on('data', function (chunk) {
    data += chunk;
  });
  req.on('end', function() {
    res.end(pageDown.makeHtml(data));
  });
}).listen(1337, '127.0.0.1');
console.log('HServer running at http://127.0.0.1:1337/'); 
```

我使用 python 中的这个服务器和以下代码（atm 我只是在进行基准测试，所以它只是一个压力测试）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import requests

for i in range(1, 100000):
    r = requests.post('http://localhost:1337/', data="lol")
    print i
print "I'm done :')" 
```

我的问题是这种完成工作的方式很慢。我有一个需要用这个 javascript 函数处理的大型数据库，我正在寻找使上述过程更快的方法。所以欢迎提出建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:11:15.193

您没有使用 node.js 的异步设计。事实上，恕我直言，您正在做的是反模式。

如果您必须在 node.js 中进行计算，那么服务器代码是正确的。但是要利用异步架构，您应该将许多 node.js 服务器实例放在负载均衡器后面。您甚至可以在一台机器上运行此实例以利用多个内核。

为了使客户能够从这么多实例中获利，您也应该异步进行 post 调用。要做到这一点，而不是请求使用一些异步 http 客户端，如[http://www.tornadoweb.org/documentation/httpclient.html](http://www.tornadoweb.org/documentation/httpclient.html)

它允许您在 node.js 实例中并行进行计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:31:27.493

如果您所做的只是调用节点进程来清理您的 HTML，那么为什么不在 python 中这样做呢？我假设您指向的降价转换器是这个：[http](http://code.google.com/p/pagedown/source/browse/Markdown.Sanitizer.js) ://code.google.com/p/pagedown/source/browse/Markdown.Sanitizer.js 。如果是这样，为什么不将其转换为 python（或找到类似的 python 代码），并在处理过程中使用它。进行网络调用以简单地运行此过程似乎很疯狂，因为它比仅在 python 中执行所有操作要慢得多。以下是我能够找到的一些 python 降价工具：[http](http://packages.python.org/Markdown/) ://packages.python.org/Markdown/，https : [//github.com/trentm/python-markdown2](https://github.com/trentm/python-markdown2)。

# visual-studio-2010 - OpenGL include statements

> ID：12517598
> 
> 赞同：0
> 
> 时间：2012-09-20T17:16:47.297
> 
> 标签：visual-studio-2010, opengl, glut

I'm attempting to work with openGL in visual studio 2010, and so far my code looks like so

```
#include<gl\GLU.h>
#include<gl\GL.h>

int main(int argc, char**argv){

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(640, 480);
    glutCreateWindow("Simple GLUT application");

    glutMainLoop();

} 
```

Visual studio is not recognizing any of the glut methods and is throwing errors such as "glutInit not recognized"

I know it is some error with how I linked the libraries, but I am new at this, so please be kind. Anyone know how to get this example working properly?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:19:38.287

您需要包含过剩标题。Glut 是“GL 实用工具包”，是建立在 OpenGL 之上的独立库，而不是 OpenGL 本身的一部分。

如果您将它们与您的其他包含在同一目录中，它将读取

```
#include<gl\GLUT.h> 
```

欲了解更多信息：[这里](http://www.gamedev.net/page/resources/_/technical/opengl/basics-of-glut-r1680)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T17:25:33.167

您是否确保将 glut32.dll 复制到 %windir%\system 并将 glut.h 复制到 %VSdir%\VC\include\GL 并将 glut32.lib 复制到 %VSdir%\lib？如果你做对了，那么你将在智能感知中看到 Open GL 方法。

# css - Highlighting HTML text input fields without losing native look and feel in Firefox

> ID：12517600
> 
> 赞同：1
> 
> 时间：2012-09-20T17:16:55.267
> 
> 标签：css, firefox, google-chrome, cross-browser, textinput

In Chrome, I can set the `background-color` of a text input field and all that changes is the background color. In this way I can highlight fields that need to be paid attention to (make the background light red so that the user knows there's a mistake there). In Firefox, and I suspect other browsers, the background color is changed, but the text field also looks more plain. Inset shadows disappear and when focused on the field there's no blue glow around it. It just looks different.

Is there a way to highlight a text field without changing the look and feel of it in Firefox (and other similar browsers)?

***UPDATE***: Example code:

```
<ul>
<li><input type="text" style="background-color: red"/></li>
<li><input type="text"/></li>
</ul> 
```

You can see the difference between the 2 text fields. Hovering and focusing on the normal text field feels native to the OS. But the text field with a red background isn't as good anymore.

[Here's the jsfiddle link](http://jsfiddle.net/uUp3g/).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:02:01.630

不，我不这么认为。Opera 的行为与 Firefox 相同。我想出的最佳解决方案是仅在需要用户注意时才对元素进行样式设置（元素具有焦点或包含无效数据）*。*

这是我作为 Sass 引导程序的一部分使用的：

```
@mixin background($image, $bgcolor) { background: $bgcolor url(#{$imagedir}#{$image}) no-repeat scroll right center }

input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]), textarea, select {
    font: inherit;
    // background-color background-image background-repeat background-attachment background-position

    &:required:valid, &:required:in-range {
        //border: 1px solid #0f0;

        &:focus { outline: 1px solid #0f0; @include background("tick.png", transparent); }
    }

    &:invalid, &:out-of-range {
        @include background("asterisk_orange.png", $required-bg);
        border: 1px solid $required-color;

        &:focus {
            background-image: url("#{$imagedir}exclamation.png"); outline: 1px solid $required-color;
        }
    }
} 
```

这是生成的 CSS 的样子：

```
input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]), textarea, select {
  font: inherit;
}
input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):required:valid:focus, input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):required:in-range:focus, textarea:required:valid:focus, textarea:required:in-range:focus, select:required:valid:focus, select:required:in-range:focus {
  outline: 1px solid #0f0;
  background: transparent url(icons/silk/tick.png) no-repeat scroll right center;
}
input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):invalid, input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):out-of-range, textarea:invalid, textarea:out-of-range, select:invalid, select:out-of-range {
  background: #fef8b4 url(icons/silk/asterisk_orange.png) no-repeat scroll right center;
  border: 1px solid red;
}
input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):invalid:focus, input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):out-of-range:focus, textarea:invalid:focus, textarea:out-of-range:focus, select:invalid:focus, select:out-of-range:focus {
  background-image: url("icons/silk/exclamation.png");
  outline: 1px solid red;
}
input:not([type^="date"]):not([type="file"]):not([type="radio"]):not([type="checkbox"]):focus + .tip, textarea:focus + .tip, select:focus + .tip {
  display: inline;
  position: absolute;
  border: 1px solid red;
  background: #fef8b4;
  margin: 0;
  padding: 2px .5em;
} 
```

值得注意的是，对于 Opera，outline 不会像边框/背景那样导致元素失去其默认样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:36:10.537

我当时遇到了同样的问题，似乎如果你想改变背景颜色，你必须改变Firefox的边框样式，2px纯色和你选择的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:19:53.173

这些人想出了一个解决方案。我建议你看看这个：http: [//formalize.me/](http://formalize.me/)

他们标准化表单外观，使表单元素在所有浏览器和操作系统中保持不变。

你可以做一个光跑下来，像这样控制：http: [//jsfiddle.net/uUp3g/1/](http://jsfiddle.net/uUp3g/1/)

干杯

# c++ - ActiveX bug in ctlinplc.cpp

> ID：12517606
> 
> 赞同：0
> 
> 时间：2012-09-20T17:17:12.697
> 
> 标签：c++, mfc, activex

I am writing an ActiveX Control. Everything worked fine when i test my AX Control with TestConn. But when i put it into a HTML and load the problem happened. When i click on the frame contain my control at the second time, bug occured. It said that "Debug Assertion Failed ..... ctlinplc.cpp line 51).
When i take a look at ctlinplc.cpp the bug line is
`ASSERT(m_menuWidths.width[5] == 0);`
Please , tell me how to overcome this bug. P/S: I am also stucking in create an ActiveX Control that has a menubar to add to my website

# javascript - 简单的javascript函数问题

> ID：12517613
> 
> 赞同：0
> 
> 时间：2012-09-20T17:17:42.493
> 
> 标签：javascript

我正在尝试使用 javascript 将参数传递给 onclick 函数

我以前有

```
 title = createElement('span', {className: 'title', innerHTML: this.Title,
            ID: this.ID, Title: this.Title, onclick: TitleOnClick}); 
```

我正在传递参数`'test'`..

```
 title = createElement('span', {className: 'title', innerHTML: this.Title,
            ID: this.ID, Title: this.Title, onclick: TitleOnClick(test)});

function TitleOnClick(test){
       alert(test);
} 
```

似乎不起作用。我做错了吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:19:48.623

当您以这种方式调用它时，您所做的是将 的值设置为`onclick`等于 的 RETURN 值`TitleOnClick(test)`。相反，您可能想要做的是：

`onclick: TitleOnClick`（注意没有（）的）-然后在该方法中，`test`根据上下文得出 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:21:34.160

您可以将对“TitleOnClick”的调用包装在另一个函数中：

```
title = createElement('span', {className: 'title', innerHTML: this.Title,
        ID: this.ID, Title: this.Title, onclick: function() { TitleOnClick(test); }}); 
```

（假设变量“test”在某处声明，就像你的例子一样。）

# javascript - Javascript performance: Variable vs Large object's attribute

> ID：12517614
> 
> 赞同：1
> 
> 时间：2012-09-20T17:17:49.460
> 
> 标签：javascript, performance, variables, attributes

I am building a number of HTML5 games and I am not sure about one thing in javascript.

When dealing with a large object (with a lot of attributes and methods), is it somehow different, if I store the attribute value in a variable?

Say I have to check for some value in `application.data.setings.foo.bar` multiple times per second. Should I store it in a variable `fooBar`? If I understand it correctly, the variable would be just a reference, so it shouldn't matter.

so: ***Should you store values of large objects' attributes in variables?***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:24:11.263

这张图给你答案。[http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html#access_times_for_object_properties_by_de](http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html#access_times_for_object_properties_by_de)

![在此处输入图像描述](../Images/00f7de100423ef7a898f821723e49b0d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:26:13.737

我相信你要问的是：

如果您有一个名为的变量：

`application.data.settings.foo.bar = { some: 'value' }`

通过使用`application.data.settings.foo.bar`- 或改为说：`var bar = application.data.settings.foo.bar`然后引用`bar`.

我的猜测是，对变量的赋值可能会稍微提高性能 - 仅仅是因为解释器为了访问相关项目而采取的步骤更少。如果您使用`application.data.settings.foo.bar`- 解释器必须利用对`application`对象的引用，然后引用它的`data`属性，然后引用它的`setting`属性，然后引用它的`foo`属性，然后引用它的`bar`属性。这是5个步骤。

如果您将它引用到一个局部变量中进​​行访问 - 您仍然会点击同一个对象，但您会直接在每个引用上点击它。

然而，归根结底，这不太可能是非常显着的性能增强，除非您正在执行大量繁重的快速访问循环或类似的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T17:23:07.517

对于数字，如果将其放在变量中，您可能会看到性能提升

# user-controls - UltraNumericEditor 允许值大于 MaxValue 设置

> ID：12517619
> 
> 赞同：0
> 
> 时间：2012-09-20T17:18:09.507
> 
> 标签：user-controls, infragistics

使用 infragistics UltraNumericEditor，如果我设置`.MaxValue`为 50，控件将允许我输入大于限制的小数（例如，50.99）

如果我将`.MaxValue`属性设置为 50.01，我会看到相同的行为（可以将值设置得更大）

我显然可以在代码中解决这个问题，但重置值，但似乎控件应该自己执行此操作。

在如何正确使用这些属性方面有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:34:44.727

我想您正在使用 UltraNumericEditor，其属性 Style 设置为 Decimal（或 Double）。
在这种情况下，控件允许您插入数字，使输入相对于属性 MaxValue 无效。但是，默认情况下，在值正确之前，您无法退出控件。
如果需要，您可以使用事件**ValidationError**为您提供 ValidationErrorEventArgs 参数。此参数包含 LastValidValue 属性以重置错误值，RetainFocus 让您的用户退出编辑器（或者，如果您愿意，显示错误消息）

```
private void ultraNumericEditor1_ValidationError(object sender, ValidationErrorEventArgs e)
{
    // Reset the content to the last valid value and allow the exit from the editor
    ultraNumericEditor1.Value = e.LastValidValue;
    e.RetainFocus = false;

    // In alternative display a message, but leave the wrong value to be reedited
    // DisplayValidationMessage("The max value allowed is 50.00");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:38:42.037

问题是`IEditorDataFilter`百分比值的结果。

Infragistics 建议并且我已经实施了`IEditorDataFilter`一种将小数百分比 (.5 = 50%) 转换为百分比以供显示的方法。

在对控件进行验证之前应用此过滤器。因此，将 设置`MaxValue`为“50”允许我输入“50.99”但不能输入“51”......根据史蒂夫的回答，通常这会导致验证错误。但是，由于`IEditorDataFilter`应用于此控件，该值会自动转换为 .5099，并且此新值不会违反约束。

我实施的解决方案是检查`Validated`事件中的值，看它是否大于`MaxValue`/100，如果是，则将其设置为相同。

# django - Alternative to django-celery to perform asynchronous task in Django?

> ID：12517620
> 
> 赞同：1
> 
> 时间：2012-09-20T17:18:32.690
> 
> 标签：django, asynchronous

In my admin I have a form allowing to upload a file to fill the DB.

Parsing and filling the DB take a long time, so I'd like to do it asynchronously.

As recommended by several SO users I tried to install `python-celery`, but I can't manage to do it (I'm on Webfaction).

Is there any simple, easy-to-install alternative?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:07:09.877

如果 webfaction 支持 cron 作业，您可以创建自己的伪代理。您可以将长时间运行的任务保存到数据库和“任务”表中，这将允许您立即向用户返回响应。然后可能会有一个 cron 非常频繁地执行并查找未完成的任务并处理它们。

我相信这就是 django mailer 所做的 [https://github.com/jtauber/django-mailer/](https://github.com/jtauber/django-mailer/)

[https://stackoverflow.com/a/1419640/594589](https://stackoverflow.com/a/1419640/594589)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:31:00.870

试试[Gearman](http://gearman.org/index.php)和它的[python 客户端库](http://packages.python.org/gearman/library.html)

设置和运行 gearman 非常容易。尝试几个例子。

# php - quick.cart ，自定义 jquery serach ，当提交搜索时，在页面上填充相同的文本提交表单我将被重定向

> ID：12517626
> 
> 赞同：1
> 
> 时间：2012-09-20T17:18:53.043
> 
> 标签：php, jquery, forms, search

我正在使用来自 opensolution 的 quick.cart 5.1 模板，来自 quick.cart 的搜索表单的基本功能是从网站上搜索产品，我改编了这个 jquery 自定义搜索[http://tutorialzine.com/2010/09 /google-powered-site-search-ajax-jquery/](http://tutorialzine.com/2010/09/google-powered-site-search-ajax-jquery/)以适应 container.tpl 中的 quick.cart 站点，原始搜索脚本是：

```
<!-- IF:START SEARCH-FORM -->
        <form method="post" action="$sLinkSearch" id="searchForm">
          <fieldset>
            <span><label for="$lang[search]">$lang[search]</label><input type="text" size="15" name="sPhrase" id="$lang[search]" value="$sPhrase" class="input" maxlength="100" /></span>
            <em><input type="submit" value="$lang[search] &raquo;" class="submit" /></em>
          </fieldset>
        </form><!-- IF:END SEARCH-FORM --> 
```

我将其更改为：

```
<!-- IF:START SEARCH-FORM -->
        <form method="post" action="$sLinkSearch" id="searchForm2">
          <fieldset>
           <span>  <input id="s" type="text"  / &lt;
            <em><input type="submit" value="$lang[search] &raquo;" class="submit" /></em>
          </fieldset>
        </form><!-- IF:END SEARCH-FORM --> 
```

在将显示搜索结果 ( `$sLinkSearch`) 的页面中，我输入了以下内容：

```
<div id="resultsDiv"> </div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="script.js"></script> 
```

在 script.js 中，我`$('#searchForm').submit();`在末尾添加了重新提交搜索表单，我所需要的只是一种方法，使用我刚刚提交的文本从搜索结果页面填充相同的搜索表单，以便显示所需的结果我尝试更改`<input id="s" type="text" />`为`<input id="s" type="text" value="<?php echo htmlspecialchars($_POST['terms'])?>" />` ，但在搜索表单中会出现此消息：解析错误：语法错误，/home/vhosts/sunpower.eu5.org/core/libraries/tpl-parser.php(120) 中的意外： eval()'d 代码在第 1 行
，它不会正确运行。有没有其他方法可以在不使用 php 的情况下使用最后提交的文本填充下一个搜索表单？顺便说一下，上面提到的搜索表单的网站是[http://www.sunpower.eu5.org](http://www.sunpower.eu5.org)

# post - 为什么我的 jqGrid 不传递额外的表单数据？

> ID：12517629
> 
> 赞同：0
> 
> 时间：2012-09-20T17:19:04.827
> 
> 标签：post, jqgrid, controller, asp.net-mvc-4

我正在使用带有 jqGrid 的 ASP.Net MVC 4，并且当 jqGrid 添加/编辑记录时，我试图将一个附加值从表单传递到 Add 和 Edit 控制器方法中。我的 jqGrid 看起来像这样：

```
$('#jqgRulesSetupVariablesList').jqGrid({
    data: JSON.stringify(("#GroupDDL").valueOf()),
    contentType: 'application/json; charset=utf-8',
    //url from wich data should be requested
    url: '@Url.Action("GetRulesSetupVariables")',
    ondblClickRow: function (rowid) {
    jQuery(this).jqGrid('editGridRow', rowid,
        { url: '@Url.Action("UpdateRulesSetupVariable")', recreateForm: true, closeAfterEdit: true, closeOnEscape: true, reloadAfterSubmit: false });
    },
    //type of data
    datatype: 'json',
    //url access method type
    mtype: 'POST',
    //columns names
    colNames: ['ID', 'Name', 'Description', 'Type'],
    //columns model
    colModel: [
        { name: 'ID', index: 'ID', align: 'left', width: '30px', editable: false, key: true },
        { name: 'Name', index: 'Name', align: 'left', width: '100px', editable: true, edittype: 'text', editoptions: { maxlength: 20 }, editrules: { required: true } },
        { name: 'Description', index: 'Description', align: 'left', width: '260px', editable: true, edittype: 'text', editoptions: { maxlength: 80 }, editrules: { required: true } },
        { name: 'Type', index: 'Type', align: 'left', width: '25px', editable: true, edittype: 'text', editoptions: { maxlength: 1 }, editrules: { required: true } },
    ],
    //pager for grid
    pager: $('#jqgRulesSetupVariablesPaging'),
    //number of rows per page
    rowNum: 10,
    //initial sorting column
    sortname: 'Name',
    //initial sorting direction
    sortorder: 'asc',
    //we want to display total records count
    viewrecords: true,
    //grid height
    height: 230,
    width: 450,
});

$('#jqgRulesSetupVariablesList').jqGrid('navGrid', '#jqgRulesSetupVariablesPaging',
    { add: true, del: false, edit: true, search: false },
    // Edit Options
    { url: '@Url.Action("UpdateRulesSetupVariable")', closeAfterEdit: true, closeOnEscape: true, editData: { GroupName: function () { return "ABC"; } } },
    // Add Options
    { url: '@Url.Action("InsertRulesSetupVariable")', closeAfterAdd: true, closeOnEscape: true, editData: { GroupName: function () { return "ABC"; } } },
    // Delete options
    {}
); 
```

我的控制器是：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult UpdateRulesSetupVariable(RulesSetupVariableViewModel viewModel, string GroupName)
{
    bool updateSuccess = UpdateRulesSetupVariable_Internal(viewModel);

    return Json(updateSuccess);
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult InsertRulesSetupVariable(RulesSetupVariableViewModel viewModel, string GroupName)
{
    bool updateSuccess = UpdateRulesSetupVariable_Internal(viewModel);

    return Json(updateSuccess);
} 
```

和我的模型：

```
public class RulesSetupVariableViewModel
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Type { get; set; }
} 
```

ID、名称、描述和类型都可以通过，但 GroupName 不是。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:35:04.183

我想到了。愚蠢的错误。我正在使用 doubleClick 来编辑该行。我修改了这一行

```
jQuery(this).jqGrid('editGridRow', rowid,
    { url: '@Url.Action("UpdateRulesSetupVariable")', 
      recreateForm: true, 
      closeAfterEdit: true, 
      closeOnEscape: true, 
      reloadAfterSubmit: false });
}, 
```

对此：

```
jQuery(this).jqGrid('editGridRow', rowid,
    { url: '@Url.Action("UpdateRulesSetupVariable")', 
      recreateForm: true, 
      closeAfterEdit: true, 
      closeOnEscape: true, 
      reloadAfterSubmit: false,
      editData: { GroupName: function () { return $("#GroupDDL").val(); } } 
}, 
```

这解决了我的问题。

# plsql - Oracle 11g PL/SQL PACKAGE 中 CONTANT 变量的位置

> ID：12517632
> 
> 赞同：2
> 
> 时间：2012-09-20T17:19:24.280
> 
> 标签：plsql, oracle11g, query-optimization

我有严格的优化问题。当程序/函数被多次调用时，我应该在我的 PACKAGE 中放置 CONSTANT 变量吗？

让我们看看这个：

```
CREATE OR REPLACE PACKAGE WB_TEST IS
  PROCEDURE TEST;
END WB_TEST;

CREATE OR REPLACE PACKAGE BODY WB_TEST IS
  FUNCTION PARSER(IN_PARAM IN VARCHAR2) RETURN VARCHAR2 IS
    LC_MSG   CONSTANT VARCHAR2(80) := 'Hello USERNAME! How are you today?';
    LC_PARAM CONSTANT VARCHAR2(10) := 'USERNAME';
  BEGIN
    RETURN REPLACE(LC_MSG, LC_PARAM, IN_PARAM);
  END PARSER;

  PROCEDURE TEST IS
  BEGIN
    FOR I IN 1 .. 1000 LOOP
      DBMS_OUTPUT.PUT_LINE(PARSER(TO_CHAR(I)));
    END LOOP;
  END TEST;
BEGIN
  DBMS_OUTPUT.ENABLE(1000000);
END WB_TEST;
/ 
```

或者更好地做这样的事情：

```
CREATE OR REPLACE PACKAGE WB_TEST IS
  PROCEDURE TEST;
END WB_TEST;

CREATE OR REPLACE PACKAGE BODY WB_TEST IS
  GC_MSG   CONSTANT VARCHAR2(80) := 'Hello USERNAME! How are you today?';
  GC_PARAM CONSTANT VARCHAR2(10) := 'USERNAME';

  FUNCTION PARSER(IN_PARAM IN VARCHAR2) RETURN VARCHAR2 IS
  BEGIN
    RETURN REPLACE(GC_MSG, GC_PARAM, IN_PARAM);
  END PARSER;

  PROCEDURE TEST IS
  BEGIN
    FOR I IN 1 .. 1000 LOOP
      DBMS_OUTPUT.PUT_LINE(PARSER(TO_CHAR(I)));
    END LOOP;
  END TEST;
BEGIN
  DBMS_OUTPUT.ENABLE(1000000);
END WB_TEST; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:29:21.583

It is extremely unlikely to matter from a performance standpoint. The code the PL/SQL compiler generates should be identical in both cases-- the constants will almost certainly get compiled inline where they are referenced.

The only reason to prefer one over the other would be code clarity and variable scoping. If the constants are really local to the `PARSER` function-- if they aren't likely to be useful to other methods in the package, they ought to be declared as part of the function. If, on the other hand, they are likely to be useful to other methods in the package, they ought to be declared as part of the package body. If they are likely to be useful to methods outside the package, they ought to be declared as part of the package specification.

# php - Cron 作业 / 推特

> ID：12517634
> 
> 赞同：0
> 
> 时间：2012-09-20T17:19:34.000
> 
> 标签：php, mysql, apache, twitter, cron

我在 mmatakedown.net 有一个网络应用程序。它基本上是一个社交游戏，梦幻体育风格，您可以在其中预测战斗结果并得分和获得正确的奖励，以及排行榜等。

现在，我写了一个页面来管理“结果”。我想做的是使用 cron 作业（或更好的选择？）定期检查 twitter（在战斗卡当天）并寻找记录战斗结果的推文。（也许从更受信任的帐户开始）。例如，它可能知道今天有一张卡被锁定，并且截止日期已过，所以是时候开始搜索结果了。例如，如果两名战士被命名为 Brooks 和 Jones，它可能会寻找类似 Jones def 的名称。或布鲁克斯定义。找出谁是胜利者，然后搜索诸如“sub”或“ko”或“dec”之类的内容以找出获胜的方法。

一旦它记录了一定数量的推文以确认结果，它就会用结果更新数据库，然后根据结果、谁选择了什么、更新了哪些分数、达到的任何里程碑等启动了一系列更新和通知.

最好的方法是什么？我目前使用 PHP/mysql/ajax/jquery 编写网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:36:39.513

我不确定*最好*的方法，但这个功能应该独立于您的 Web 应用程序（即 PHP/ajax/jquery 代码库）。

这是一个可以通过 cron 运行的程序，检查数据库是否有需要更新的内容，然后适当地更新数据库。

您可以每小时运行一次 cron 作业或您认为必要的任何作业，以使数据库保持相对最新。或者我想你可以变得更漂亮。

我认为 cron 是完全合适的。

我编写了通过 cron 调用的 Python 程序，进行了一些 Twitter API 调用，并更新了数据库。应用程序完全不同，但 Python 很好地完成了这项任务。除了 MySQL 访问之外，它具有您需要的所有内容（例如 JSON、http）的内置库，但这是一个快速的包安装。

一个复杂的问题是，您可能会开始搜索推文并找到一些表明战斗已经结束的推文，但不足以更改您的数据库。您可能需要一种方法来确保程序的后续调用可以访问此信息。

我一般认为，当您编写这些离线批量更新脚本时，您的数据库中应该有一个表供他们登录。例如，他们什么时候开始，他们检查了多少条推文，他们什么时候退出，他们是否成功退出等等。

# ruby-on-rails-3 - 为什么当 Rails 应用程序被杀死时 PDFKit/wkhtmltopdf 挂起但按预期呈现 PDF？

> ID：12517640
> 
> 赞同：37
> 
> 时间：2012-09-20T17:19:53.843
> 
> 标签：ruby-on-rails-3, pdf, osx-mountain-lion, wkhtmltopdf, pdfkit

## 背景

在阅读之后，在我看来，[Prawn](https://github.com/prawnpdf/prawn)已经出局，[wkhtmltopdf入局了。Rails 的](http://code.google.com/p/wkhtmltopdf/)[PDFKit](https://github.com/pdfkit/PDFKit)和[wicked_pdf](https://github.com/mileszs/wicked_pdf) gem似乎是新的酷炫。所以我找到了[Ryan](http://railscasts.com/)关于[如何使用 PDFKit](http://railscasts.com/episodes/220-pdfkit)的截屏视频。我安装了所有东西，在 CLI 上测试 wkhtmltopdf 没有问题，摆弄 Rails 设置以运行多个进程，以便资产管道工作，一切看起来都很好，除了我仍然卡在进程的最后（实际上是获取 PDF来自服务器的响应）。

## 问题

*当我请求`.pdf`视图的一个版本时（我正在使用 PDFKit 中间件选项），我的浏览器只是坐在那里等待响应，但是一旦我终止 Rails 进程，我希望得到的 PDF 才会在我的浏览器中弹出窗户。是什么赋予了？*

## 我在用什么

*   操作系统：OSX 10.8.1
*   导轨：3.2.8
*   红宝石：1.9.3
*   wkhtmltopdf: 0.11.0_rc1 (虽然当我运行`wkhtmltopdf -V`它说 0.10.0_rc2)
*   数量：4.8.2

## 我做了什么

*   `config.middleware.use "PDFKit::Middleware"`通过加载我的`application.rb`文件来使用 PDFKit 中间件。
*   包含`gem 'pdfkit'`在我的 Gemfile 中并使用 Bundler 安装它
*   在我的初始化程序中设置`.pdf`mime 类型`mime_types.rb``Mime::Type.register_alias "application/pdf", :pdf`
*   添加`config.threadsafe!`到`config/environments/development.rb`多个线程，因此资产管道不会与 PDF 引擎冲突
*   经过测试`wkhtmltopdf http://www.google.com google.pdf`，它按预期生成了 Google 主页的 PDF
*   尝试将 PDFKit 换成 wicked_pdf 并遇到了同样的问题（挂起，但是当 Rails 进程被杀死时，PDF 按预期呈现）

## 它看起来像什么

这是 Rails 呈现的常规 html 页面（我已经模糊了客户端细节）： ![在此处输入图像描述](../Images/ee93627bee7a420ced8af742a74ade20.png)

这是我尝试导航到`localhost:3000/some/path.pdf`. （应用程序在等待响应时挂起）： ![在此处输入图像描述](../Images/993ae8746b863379b28f757e845acd8b.png)

当我最终终止 Rails 进程时`ctrl-c`，PDF 最终显示在浏览器中，正如我所期望的那样（CSS 和 HTML 正确呈现，因此资产似乎加载良好）： ![在此处输入图像描述](../Images/d2b99f772f0839222c1092ec6dcd3aa9.png)

## 到目前为止的结论

将 PDFKit 替换为 wicked_pdf 并获得相同的结果似乎让我认为问题不在于这些库，而与我的开发环境有关。但是 wkhtmltopdf 在命令行下运行良好，所以这让我觉得它和 QT 正在做他们的工作。问题一定出在 Rails 上。也许我没有正确配置某些东西？

## 请求帮助

如何确定问题*到底*是什么以及如何解决？

如果你能帮助我，我会爱你<3

## 更新

我还尝试过使用另一种在没有中间件选项的情况下呈现 PDF（带有）的替代方法，如下所示（这样做我从我的文件`.to_pdf`中注释掉了）：`config.middleware.use "PDFKit::Middleware"``application.rb`

```
respond_to do |format|
    format.html
    format.pdf do
        html = '<html><body>This is a test.</body></html>'
        @pdf = PDFKit.new(html)

        send_data @pdf.to_pdf, 
            :filename => 'whatever.pdf', 
            :type => 'application/pdf', 
            :disposition => 'attachment'
    end
end 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-26T16:09:04.140

问题出在 wkhtmltopdf 本身，特别是 0.9.9 之后的任何版本。wkhtmltopdf 在直接从命令行运行时挂起。

纠正步骤：

```
brew uninstall wkhtmltopdf
cd /usr/local/Library/Formula/
git checkout 6e2d550 /usr/local/Library/Formula/wkhtmltopdf.rb
brew install wkhtmltopdf 
```

然后验证是否安装了正确的版本，`wkhtmltopdf --version`这应该会产生`wkhtmltopdf 0.9.9`

引文：

1.  [https://github.com/mileszs/wicked_pdf/issues/110](https://github.com/mileszs/wicked_pdf/issues/110)
2.  [http://wearepandr.com/blog/article/homebrew-and-installing-old-package-versions#blog_nav](http://wearepandr.com/blog/article/homebrew-and-installing-old-package-versions#blog_nav)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-19T21:33:36.793

试试最后一个版本。在 MacOS 上安装的简单方法：

```
brew install Caskroom/cask/wkhtmltopdf 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T10:03:41.213

[Scarver2](https://stackoverflow.com/a/14043085/778174)的修复对我有用，正如广告中所宣传的那样。但我需要更新版本的`wkhtmltopdf`. 由于自制版本似乎仍然过时（它仍然挂在命令行上），并且由于没有最近可用的预编译二进制文件，我使用 os x 构建脚本自己编译一个：

```
$ git clone git@github.com:wkhtmltopdf/wkhtmltopdf.git
$ cd wkhtmltopdf
$ ./build_osx.sh     # i'm running 10.9.2
$ bin/wkhtmltopdf --version                                                                                  
Name:
  wkhtmltopdf 0.12.1-72a9f2066fe9ffd162dec007a4d9b6a5cd63b670
$ curl www.example.com | bin/wkhtmltopdf - test.pdf  # render pdf of example.com
$ open test.pdf   # to confirm pdf 
```

我正在`pdfkit 0.6.2`使用`Rails 3.2.17`. 我将二进制文件放入`/vendor`并在`pdfkit`初始化程序中用`config.wkhtmltopdf`. 到目前为止，一切都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T06:38:07.187

我遇到了同样的问题。它在我添加时起作用：'config.threadsafe！' 在 application.rb 作为[堆栈](https://stackoverflow.com/questions/7531005/rails-3-and-pdfkit)中的答案。希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T22:59:37.453

我的还挂起并打开了扩展坞中的 wkhtmltopdf 图标。

我实际上发现我的问题是我只运行了 1 个独角兽工作进程。一旦我添加了 1 个以上，它就可以正常工作了。

我正在使用 pdfkit 0.6.2 在 OS X 上运行 wkhtmltopdf 0.9.9

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T23:08:48.500

完全相同的症状，但`WickedPdf`目前正在使用。在这一点上，我相信问题`wkhtmltopdf`也存在。

不幸的是，我在 Stack/Google 中找不到的任何建议都对我有用。相反，我需要结合几个建议，包括这篇文章中的一些建议。

解决方案是：

1.  `brew uninstall wkhtmltopdf`
2.  `wkhtmltopdf`查找并删除in 的任何副本`/usr/bin`
3.  注释`WickedPdf.config`行`config/initializers`
4.  添加`config.threadsafe!`到`development.rb`
5.  删除中间件并允许主控制器的“显示”操作来处理 pdf 请求（可能不是必需的）
6.  添加`wkhtmltopdf-binary`到gemfile
7.  捆
8.  重启服务器
9.  您可能还需要添加（`Mime::Type.register_alias "application/pdf", :pdf`对`config/initializers/mime_types.rb`我来说，这会导致“*警告：已初始化常量 PDF* ”）

我的设置是：带有 Rails 3.2.1、Webrick、Postgres 和 wkhtmltopdf-binary (0.9.9.1) 的 Mac OSX Mountain Lion。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-05-29T12:15:34.520

尝试`config/initializer/pdfkit.rb`按以下方式编辑：

```
PDFKit.configure do |config|

config.wkhtmltopdf = Rails.root.join('bin', 'wkhtmltopdf-i386').to_s

config.default_options = {

  :encoding=>"UTF-8",
  :page_size=>"A4",
  :margin_top=>"0.25in",
  :margin_right=>"0.1in",
  :margin_bottom=>"0.25in",
  :margin_left=>"0.1in",
  :disable_smart_shrinking=> false
}
end 
```

# ruby - 解析国际电话号码的最佳红宝石是什么？

> ID：12517644
> 
> 赞同：2
> 
> 时间：2012-09-20T17:20:06.573
> 
> 标签：ruby, gem, phone-number

我需要一个库来帮助解析国际电话号码。我尝试了其中的几个，例如 phone_number、phone、phony 和 phoney。在玩了整个下午之后，它们都不是完美的，也没有谷歌的 libphonenumber（尽管是 Java）那么好。然而，我不得不为我当前的项目选择一个，所以我选择了 phoney gem，它看起来很活跃并且提供了更多的国际支持。有人知道更好的吗？

下面有一个类似的问题，但它是一年多前的，主要关注美国的电话号码。

[是否有一种宝石可以在 ruby​​ 中规范化和格式化美国电话号码？](https://stackoverflow.com/questions/5912690/is-there-a-gem-that-normalizes-and-format-us-phone-numbers-in-ruby)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:03:38.510

查看[电话](https://github.com/carr/phone)。它似乎很好地解析了美国和国际数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T20:35:19.030

最新和支持的（就目前而言）是[https://github.com/floere/phony](https://github.com/floere/phony)

你也可以看看[https://github.com/carr/phone](https://github.com/carr/phone)和[https://github.com/habermann24/phoney/](https://github.com/habermann24/phoney/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:47:32.353

我写了一个名为 ItuCodes 的 gem，它对国家代码进行基本解析，特别注意北美、俄罗斯和哈萨克斯坦等复杂情况：* [https://github.com/bowsersenior/itu_codes](https://github.com/bowsersenior/itu_codes)

ItuCodes 并不旨在完全解析每个国家/地区代码的区号，但可以在其之上构建这样的工具。

# iphone - iPhone 5 中 Retina 图像的后缀

> ID：12517646
> 
> 赞同：6
> 
> 时间：2012-09-20T17:20:11.387
> 
> 标签：iphone, image, iphone-5

我有一些 iPhone 5 尺寸 640x1136 的图像文件，我之前使用@2x 后缀为 iPhone 4 和 4S 实现了视网膜图像，那么 iPhone 5 中图像的后缀是什么，我们可以使用与@2x 相同的用户或它必须改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:25:12.917

它仍然会使用`@2x`可用的图像。`-568h`您可以为启动图像使用一个后缀，如`Default-568h@2x.png`，但这是目前唯一支持它的地方；请参阅 Leo 的回答，了解如何在其他地方实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:21:36.747

[在这里](https://stackoverflow.com/a/12519211/983912)查看我的答案。一些有用的宏来帮助您处理图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T14:59:18.367

对于 iPhone Retina 4 英寸（*iPhone 5*），它仍然是`@2x`后缀，因为密度与 iPhone Retina（*iPhone 4 和 4S*）相同。屏幕更大，但密度相同。

-568h 后缀仅适用于默认图像，因为它是您真正需要它的唯一位置（只是告诉系统您的应用已针对此新屏幕尺寸进行了优化，并且可以拉伸您的视图）。

命名约定`Default-xxx.png`只是为了在应用程序启动时提供正确的图像，但我认为尝试复制相同的图像以在 imageViews 中加载其他图像是没有意义的。就像`Default-(landscape|portrait).png`iPad 上的一样。你永远不需要这个约定来自己加载图像。

唯一的规则是：

*   `@`用于密度（现在存在 2 密度，正常和 2x）
*   `~`适用于设备（​​目前存在 2 种不同的设备，iphone 和 ipad）

要在 4 英寸 iPhone 上调整 images/imageView，您应该使用**imageView****内容模式**和自动调整大小配置。

# javascript - 在 jquery carouFredSel-5.6.4 中图像滚动两次

> ID：12517648
> 
> 赞同：1
> 
> 时间：2012-09-20T17:20:18.703
> 
> 标签：javascript, jquery

我的网站代码有两个问题。

链接：[http ://coding.designzzz.com/demos/bakery-site/](http://coding.designzzz.com/demos/bakery-site/)

首先用我的滑块右箭头单击它会一次滚动 2 个图像。我只希望它一次滚动 1 张图像。

第二 - 在 Chrome 中，我的滑块无法正常工作。它似乎有一些高度问题，并且不正确可见。

请给我一些建议，可能有助于解决我的问题。

# python - 如何在复制时通过在目标目录中添加前缀 (finger.dat_temp) 来更改 src 目录中的输入文件 (finger.dat) 的名称？

> ID：12517649
> 
> 赞同：-3
> 
> 时间：2012-09-20T17:20:24.243
> 
> 标签：python

如何通过在目标目录中添加前缀（finger.dat_temp）来更改 src 目录中输入文件（finger.dat）的名称）同时将多个文件从一个目录复制到另一个目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:05:06.987

```
for file in list:
    shutil.move(file, os.path.join(dest_dir, file + "_temp")) 
```

# javascript - 仅按年、月和日期比较日期？

> ID：12517660
> 
> 赞同：3
> 
> 时间：2012-09-20T17:21:40.807
> 
> 标签：javascript, jquery

假设我们在 Javascript 中有 2 个 Date 对象；

```
var d1 = new Date('...');
var d2 = new Date('...'); 
```

我们做一个对比：

```
d1 < d2; 
```

这种比较将始终考虑小时、分钟、秒。

我希望它只考虑年份、月份和日期进行比较。

最简单的方法是什么？

也允许使用 jQuery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T17:25:31.813

重置`hours`, `minutes`,`seconds`和`milliseconds`:

```
var d1 = new Date();
d1.setHours(0);
d1.setMinutes(0);
d1.setSeconds(0);
d1.setMilliseconds(0); 
```

或者使用[`setHours`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours)不那么冗长的 ：

```
var d1= new Date();
d1.setHours(0, 0, 0, 0); 
```

最后，比较结果`Date`s 是否相同 use [`getTime()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)：

```
d1.getTime() == d2.getTime() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:52:07.827

作为代数解决方案，您可以运行一些数学运算：

```
function sameDay(d1, d2) {
    return d1 - d1 % 86400000 == d2 - d2 % 86400000
} 
```

该等式实际上分解为：

```
function sameDay(d1, d2) {
    var d1HMS, //hours, minutes, seconds & milliseconds
        d2HMS,
        d1Day,
        d2Day,
        result;
    //d1 and d2 will be implicitly cast to Number objects
    //this is to be explicit
    d1 = +d1;
    d2 = +d2;
    //1000 milliseconds in a second
    //60 seconds in a minute
    //60 minutes in an hour
    //24 hours in a day
    //modulus used to find remainder of hours, minutes, seconds, and milliseconds
    //after being divided into days
    d1HMS = d1 % (1000 * 60 * 60 * 24);
    d2HMS = d2 % (1000 * 60 * 60 * 24);
    //remove the remainder to find the timestamp for midnight of that day
    d1Day = d1 - d1HMS;
    d2Day = d2 - d2HMS;
    //compare the results
    result = d1Day == d2Day;
    return result;
} 
```

这样做的好处是不会丢失原始`Date`对象上的数据，因为`setHours`等会修改引用的对象。

或者，一个安全`sameDay`函数 using`setHours`可以写成：

```
function sameDay(d1, d2) {
    var a,
        b;
    a = new Date(+d1);
    b = new Date(+d2);
    a.setHours(0, 0, 0, 0);
    b.setHours(0, 0, 0, 0);
    return +a == +b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:25:42.330

您可以为每个 Date 手动将 Hours、Minutes 和 Seconds 设置为 0：

```
var d1 = new Date('...');
d1.setHours(0);
d1.setMinutes(0);
d1.setSeconds(0);

var d2 = new Date('...');
d2.setHours(0);
d2.setMinutes(0);
d2.setSeconds(0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:26:26.810

我会将 Date 对象转换为它们的 ISO 日期格式 ( `"2012-09-20"`)，可以按字典顺序将其作为字符串进行比较：

```
function compareDates(d1, d2) {
  var isoDate1 = d1.toISOString().substr(0, 10)
  var isoDate2 = d2.toISOString().substr(0, 10)
  return isoDate1.localeCompare(isoDate2)
}
compareDates(new Date("2010-01-01"), new Date("2010-01-01")) // => 0
compareDates(new Date("2010-01-01"), new Date("2012-01-01")) // => -1
compareDates(new Date("2012-01-01"), new Date("2010-01-01")) // => 1 
```

# c# - 发送两个文本框，而不是动态发送一个

> ID：12517662
> 
> 赞同：4
> 
> 时间：2012-09-20T17:21:47.683
> 
> 标签：c#, asp.net, dynamic, buttonclick

我从上一篇文章中得到了这段代码，关于基于按钮的单击事件动态制作面板。出于某种原因，它给了我两个文本框，我在破译代码时遇到了问题。自从我处理这种 C# 以来已经有一段时间了。这可能是一个简单的修复，但是就像我说的那样，已经有一段时间了。ASP.net 代码只是一个按钮，因此无需粘贴。

C＃：

```
public partial class Testing : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    // Add any controls that have been previously added dynamically
    for (int i = 0; i < TotalNumberAdded; ++i)
    {
        AddControls(i + 1);
    }

    // Attach the event handler to the button
    Button1.Click += new EventHandler(Button1_Click);

}

protected void Button1_Click(object sender, EventArgs e)
{
    // Increase the number added and add the new label and textbox
    TotalNumberAdded++;
    AddControls(TotalNumberAdded);

}
private void AddControls(int controlNumber)
    {
        var newPanel = new Panel();
        var newLabel = new Label();
        var newTextbox = new TextBox();

        // textbox needs a unique id to maintain state information
        newTextbox.ID = "TextBox_" + controlNumber;

        newLabel.Text = "Nature Of Accident";

        // add the label and textbox to the panel, then add the panel to the form
        newPanel.Controls.Add(newLabel);
        newPanel.Controls.Add(newTextbox);
        form1.Controls.Add(newPanel);
    }

    protected int TotalNumberAdded
    {
        get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
        set { ViewState["TotalNumberAdded"] = value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:28:35.577

您的按钮是否已经在 asp 页面中绑定了一个事件？

```
Button1.Click += new EventHandler(Button1_Click); 
```

这似乎会给您带来一些问题，尤其是在重新加载时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:28:48.800

从您的页面加载中删除 Button1.Click 行。

```
 Button1.Click += new EventHandler(Button1_Click); 
```

如果您的 .aspx 按钮已经看起来像这样：

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

那么这意味着当您单击按钮时，您的代码将通过 Page_Load，这意味着它将为 Button1_Click 执行您的事件处理程序，然后它将进一步处理您的实际事件，*再次*成为 Button1_Click ，所以基本上就是这样为什么你会得到 2 个文本框。

# asp.net - 如何在每个插入命令后自动刷新gridview？

> ID：12517664
> 
> 赞同：1
> 
> 时间：2012-09-20T17:21:52.943
> 
> 标签：asp.net

当我单击提交插入数据库的按钮数据时，我正在向数据库插入数据，但是在不刷新页面的情况下，不会在 GridView 中反映任何更改。我也使用了 DataBind()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:33:48.053

添加就足够了

```
YourGridView.DataBind(); 
```

在您的按钮 onclick 事件中......无需在 Page_Load 中也绑定它

你有更新面板吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:29:08.767

Just use the Procedure which populates the GridView and then call that Procedure OnClick Event.

Hope it Helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:29:05.733

您可以使用此代码 - 基于`DataBind`两次

注意：您不仅可以在 Page_Load 中添加此 DataBind，而且还可以在 click 委托中添加此 DataBind

```
//Your Insert in your delegate
....
YourGridView.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:32:35.980

您必须通过您使用的任何方式刷新 gridviews 数据源，例如 sql 查询，然后将数据源设置为此，然后使用 Gridview1.DataBind();

```
public void GetData()
    {
        try
        {
            SqlConnection connection = new SqlConnection();
            connection.ConnectionString = ConfigurationManager.ConnectionStrings["mysql"].ConnectionString;
            String sql = "Your Query";
            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter(sql, connection);
            da.Fill(ds);
            DataTable dt = new DataTable();
            dt = ds.Tables[0];
            GridView1.DataSource = dt;
        }
        catch (SqlException ex)
        {
        }
        catch (Exception e)
        {
        }
    } 
```

然后在绑定 gridview 之前使用 GetData() （可能在页面加载事件中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T12:44:30.017

你也可以在你的 rowCommand 中做：

```
gridView_RowCommand(object sender, GridViewCommandEventArgs e){
    gridView.EditIndex = -1; // to cancel edit mode
} 
```

# emacs - 如何在 emacs 的 c-mode 中启用自动填充？

> ID：12517665
> 
> 赞同：3
> 
> 时间：2012-09-20T17:21:53.873
> 
> 标签：emacs, autofill, cc-mode, c-mode

全部

现在我在 c 模式下用 emacs 编辑 c 源代码。自动填充模式似乎根本不起作用。在这里，我如何启用并尝试使用它。

1.  Mx 自动填充模式（启用自动填充模式）
2.  输入的行长于自动填充大小（目前为 80 个字符）--> 没有断行
3.  尝试通过发出 Mq 自动填充

然而，上述尝试根本没有奏效。谁能指出我做错了什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:42:55.033

当您使用`auto-fill-mode`in`c-mode`时，默认行为是仅在编写文本时换行，如在注释中。您可以通过自定义 的值来覆盖它`c-ignore-auto-fill`。请注意，emacs 会将您的代码包装和缩进为文本，这可能不是您想要的。

更好的解决方案可能是将空间绑定到这样的函数：

```
(defun insert-space-or-newline-and-indent ()
  (interactive)
  (if (>= (current-column) fill-column)
      (newline-and-indent)
    (insert-char ? ))) 
```

# php - 在 PHP 中生成不是 ASCII 方案的所有 Unicode 字符？

> ID：12517669
> 
> 赞同：0
> 
> 时间：2012-09-20T17:22:38.133
> 
> 标签：php, unicode, hex, ascii

这个正则表达式应该匹配所有非 ASCII 字符，0-128 个代码点：

```
 /[^x00-x7F]/i 
```

想象一下，我想（只是出于好奇）用所有 Unicode 字符（0-1114111 个代码点）测试这个正则表达式。

生成这个范围可能很简单`range(0, 1114111)`。然后我应该用函数将每个十进制数转换为十六进制`dechex()`。

之后，如何将十六进制数字转换为实际字符？以及如何排除 ASCII 方案中已有的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:38:32.357

这取决于您将如何进行匹配以及您是否要将 PCRE 正则表达式引擎放入带有修饰符的[UTF-8 模式。](http://php.net/manual/en/regexp.reference.unicode.php)`/u`

如果您*确实*使用了`/u`修饰符，那么首先您*必须*对正则表达式和主题都使用 UTF-8 编码，并且正则表达式引擎会自动将合法的 UTF-8 字节序列解释为一个字符。在此模式下，正则表达式`[^x00-x7F]`将匹配[Latin-1 补充](http://en.wikipedia.org/wiki/C1_Controls_and_Latin-1_Supplement)块之外的所有字符，包括代码点大于 255 的字符。您还需要[手动](https://stackoverflow.com/questions/2934563/how-to-decode-unicode-escape-sequences-like-u00ed-to-proper-utf-8-encoded-cha)生成每个字符（给定其代码点）的 UTF-8 表示。

如果您*不*使用`/u`修饰符，那么正则表达式引擎将是愚蠢的：它将每个*字节*视为一个单独的字符，这意味着您必须在字节而不是字符级别工作。另一方面，您现在可以使用您喜欢的任何编码。但是，您将不得不放弃`[^x00-x7F]`正则表达式（因为它只会匹配字符串中的随机字节）并使用体现您选择的编码规则的正则表达式（[例如 UTF-8](https://stackoverflow.com/a/1401716/50079)）。要生成随机字符的编码形式，您将再次需要使用取决于特定编码的自定义代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:08:44.577

我认为[hex2bin(string)](http://php.net/manual/en/function.hex2bin.php)函数会将十六进制字符串转换为二进制字符串。要排除 ASCII 字符代码点，只需从 x80 十六进制代码点开始（跳过 x00 到 x7F）。

但这听起来确实有点像您正在尝试对正则表达式库进行单元测试，这似乎是不必要的，除非您正在开发正则表达式库，或者您需要非常偏执。

# selenium - Selenium Webdriver：完全读取表格

> ID：12517676
> 
> 赞同：0
> 
> 时间：2012-09-20T17:22:55.667
> 
> 标签：selenium, webdriver

场景：在网页中，几乎没有表格。我想完整阅读其中一张表，但问题是只显示了 10 行，其余的我必须向下滚动。实际上最初只有 10 行可用，当我们滚动时渲染其余的字段。为了解决这个问题，我想我会模拟按键并继续阅读，但问题是即使 xpath 也不一致，所以也不能循环。几个不同单元格的 Xpath 是：

```
html/body/div[2]/form/div[1]/div[2]/div/div[2]/div/div[2]/div/div[2]/div/div[2]/div/span/div[1]/div/div/div/div[2]/div/div[2]/table/tbody/tr[1]/td[1]

html/body/div[2]/form/div[1]/div[2]/div/div[2]/div/div[2]/div/div[2]/div/div[2]/div/span/div[1]/div/div/div/div[2]/div/div[2]/table[2]/tbody/tr[3]/td[1]

html/body/div[1]/form/div[1]/div[2]/div/div[2]/div/div[2]/div/div[2]/div/div[2]/div/span/div[1]/div/div/div/div[2]/div/div[2]/table[1]/tbody/tr[10]/td[1] 
```

我可以通过什么方式获取所有单元格中的数据？

HTML 源代码：

```
 <div id="pt1:ph1" class="x6v">
    <table class="xtb" width="0" cellspacing="0" cellpadding="0" border="0" summary="">
    <div class="xvp">
    <div>
    <div id="pt1:pc1" class="xpb xph" _afrclmwmn="['c1','c2','c3','c4','c5','c6','c7','c8','c9','c10']" _afrac="pt1:pc1:md1" style="height: 282px;">
    <div id="pt1:pc1::_ahTp" style="height:auto">
    <div id="pt1:pc1::_ahCt">
    <div id="pt1:pc1:md1" class="xpj xpb" _leafcolclientids="['pt1:pc1:md1:c1','pt1:pc1:md1:c2','pt1:pc1:md1:c3','pt1:pc1:md1:c4','pt1:pc1:md1:c5','pt1:pc1:md1:c6','pt1:pc1:md1:c7','pt1:pc1:md1:c8','pt1:pc1:md1:c9','pt1:pc1:md1:c10','pt1:pc1:md1:c11','pt1:pc1:md1:c12']" _afrfilterable="true" _afrautohr="10" _afrhcc="0" _afrpcid="pt1:pc1" tabindex="0" style="height: 234px;">
    <div id="pt1:pc1:md1::ch" class="xz5" _afrcolcount="12" style="overflow: hidden; position: relative; width: 753px;">
    <div id="pt1:pc1:md1::db" class="xyy" _afrcolcount="12" style="position: relative; width: 753px; overflow: hidden; height: 170px; z-index: 1;">
    <table class="xyz xzr" cellspacing="0" _startrow="0" _rowcount="44" _selstate="{'0':true}" _totalwidth="1260" style="table-layout:fixed;position:relative;width:1260px;">
    <tbody>
    <tr class="xzn p_AFSelected" _afrrk="0">
    <td class="xzk" nowrap="" style="width:100px;">12</td>
    <td class="xzk" nowrap="" style="width:100px;">A12</td>
    <td class="xzk" nowrap="" style="width:100px;">B12</td>
    <td class="xzk" nowrap="" style="width:100px;">B12</td>
    <td class="xzk" nowrap="" style="width:100px;">C12</td>
    <td class="xzk" nowrap="" style="width:100px;">D12</td>
    <td class="xzk" nowrap="" style="width:100px;"> </td>
    <td class="xzk" nowrap="" style="width:100px;">K12</td>
    <td class="xzk" nowrap="" style="width:100px;"> </td>
    <td class="xzk" nowrap="" style="width:100px;"> </td>
    <td class="xzk" nowrap="" style="width:100px;"> </td>
    <td class="xzk" nowrap="" style="width:100px;">G12</td>
    </tr>
    <tr class="xzn" _afrrk="1">
    <tr class="xzn" _afrrk="2">
    <tr class="xzn" _afrrk="3">
    <tr class="xzn" _afrrk="4">
    <tr class="xzn" _afrrk="5">
    <tr class="xzn" _afrrk="6">
    <tr class="xzn" _afrrk="7">
    <tr class="xzn" _afrrk="8">
    <tr class="xzn" _afrrk="9">
    </tbody>
    </table>
    </div>
    <div id="pt1:pc1:md1::sm" class="xzu" style="position:absolute;display:none"></div>
    <div id="pt1:pc1:md1::ri" class="xz0" style="position:absolute;display:none;overflow:hidden"></div>
    <div id="pt1:pc1:md1::dataW" style="display:none"></div>
    <div id="pt1:pc1:md1::scroller" tabindex="-1" style="position: absolute; overflow: auto; z-index: 0; width: 770px; top: 46px; height: 187px; right: 0px;">
    </div>
    </div>
    <div id="pt1:pc1::_ahBt" style="height:auto">
    <div id="pt1:pc1:_clmCxt" style="display:none">
    <div id="pt1:pc1:_PCPop" style="display:none">
    <div id="pt1:pc1::_dchDlgC" style="display:none">
    </div>
    </div>
    </div>
    </div> 
```

滚动后的 HTML。

```
 <div id="pt1:ph1" class="x6v">
    <table class="xtb" width="0" cellspacing="0" cellpadding="0" border="0" summary="">
    <div class="xvp">
    <div>
    <div id="pt1:pc1" class="xpb xph" _afrclmwmn="['c1','c2','c3','c4','c5','c6','c7','c8','c9','c10']" _afrac="pt1:pc1:md1" style="height: 282px;">
    <div id="pt1:pc1::_ahTp" style="height:auto">
    <div id="pt1:pc1::_ahCt">
    <div id="pt1:pc1:md1" class="xpj xpb" _leafcolclientids="['pt1:pc1:md1:c1','pt1:pc1:md1:c2','pt1:pc1:md1:c3','pt1:pc1:md1:c4','pt1:pc1:md1:c5','pt1:pc1:md1:c6','pt1:pc1:md1:c7','pt1:pc1:md1:c8','pt1:pc1:md1:c9','pt1:pc1:md1:c10','pt1:pc1:md1:c11','pt1:pc1:md1:c12']" _afrfilterable="true" _afrautohr="10" _afrhcc="0" _afrpcid="pt1:pc1" tabindex="0" style="height: 234px;">
    <div id="pt1:pc1:md1::ch" class="xz5" _afrcolcount="12" style="overflow: hidden; position: relative; width: 753px;">
    <div id="pt1:pc1:md1::db" class="xyy" _afrcolcount="12" style="position: relative; width: 753px; overflow: hidden; height: 170px; z-index: 1;">
    <table class="xyz xzr" cellspacing="0" _startrow="10" _rowcount="44" style="table-layout:fixed;position:relative;width:1260px;">
    <tbody>
    <tr class="p_AFFocused p_AFSelected xzn" _afrrk="10">
    <tr class="xzn" _afrrk="11">
    <tr class="xzn" _afrrk="12">
    <tr class="xzn" _afrrk="13">
    <tr class="xzn" _afrrk="14">
    <tr class="xzn" _afrrk="15">
    <tr class="xzn" _afrrk="16">
    <tr class="xzn" _afrrk="17">
    <tr class="xzn" _afrrk="18">
    <tr class="xzn" _afrrk="19">
    </tbody>
    </table>
    <table class="xyz xzr" cellspacing="0" _startrow="20" _rowcount="44" style="table-layout:fixed;position:relative;width:1260px;">
    </div>
    <div id="pt1:pc1:md1::sm" class="xzu" style="position: absolute; display: none; z-index: 5000; visibility: visible; top: 120px; right: 25px;">Fetching Data...</div>
    <div id="pt1:pc1:md1::ri" class="xz0" style="position:absolute;display:none;overflow:hidden"></div>
    <div id="pt1:pc1:md1::dataW" style="display:none"></div>
    <div id="pt1:pc1:md1::scroller" tabindex="-1" style="position: absolute; overflow: auto; z-index: 0; width: 770px; top: 46px; height: 187px; right: 0px;">
    </div>
    </div>
    <div id="pt1:pc1::_ahBt" style="height:auto">
    <div id="pt1:pc1:_clmCxt" style="display:none">
    <div id="pt1:pc1:_PCPop" style="display:none">
    <div id="pt1:pc1::_dchDlgC" style="display:none">
    </div>
    </div>
    </div>
    </div>
    <div id="pt1:ph2" class="x6v">
    </span>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:44:17.750

尝试使用这种方法： 1) 动作生成器，特别是高级用户 API MoveMouseAction 方法 - 将鼠标从其当前位置移动到另一个元素。您可以在[此处](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)获取有关操作生成器的更多信息

2) 也不要忘记使用[fluent 等到](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)web 元素被渲染

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ;

By xpathElem=By.xpath("html/body/div[2]/form/div[1]/div[2]/div/div[2]/div/div[2]/div/div[2]/div/div[2]/div/span/div[1]/div/div/div/div[2]/div/div[2]/table/tbody/tr[1]/td[1]");
//getting data from cells
fluentWait(xpathElem).getText().trim(); 
```

希望这对您有所帮助；-)

# mysql - 如何根据计数定义范围查询？

> ID：12517678
> 
> 赞同：1
> 
> 时间：2012-09-20T17:23:17.803
> 
> 标签：mysql

我表中的元组如下所示：（值、日期、属性）。现在我想查询数据库并获取一个范围，但不是取决于日期，而是取决于计数“...范围内的最后 x 个条目”。以下示例将阐明：我有一个时间栏，其中所有属性为“x”的条目按日期列排序，因此点 s 和 t 的日期小于点 0 中的日期和点 x 中的日期当然，y 比点 0 大。所有点都有属性=“a”。

```
 s        t  0  x        y
------|--------|--|--|--------|------> t 
```

现在我想获取具有以下特征的所有条目：从 s - t 和 x - y 中获取所有条目，其中属性 =“a”并选择 s 和 t，以便我在此范围内获得 60 个条目，选择 t in 5 个条目分别位于 t 和 0 以及 x 和 y 之间的方式。

这是一个示例数据：

```
(xyz, 01.02.2000, a)
(xyz, 02.02.2000, a)
(xyz, 01.02.2000, b)
(xyz, 03.02.2000, a)
(xyz, 01.02.2000, b)
(xyz, 04.02.2000, a)
(xyz, 06.02.2000, a)
(xyz, 01.02.2000, b)
(xyz, 07.02.2000, a)
(xyz, 01.02.2000, b)
(xyz, 10.02.2000, a)
(xyz, 12.02.2000, a) 
```

date = 06.02.2000 和范围 st = 3, t-0=1 的所需输出将是

```
s = (xyz, 01.02.2000, a)
(xyz, 02.02.2000, a)
t = (xyz, 03.02.2000, a)
(xyz, 04.02.2000, a) NOT because between t and 0 should be 1 free
0 = (xyz, 06.02.2000, a) 
```

而在另一个方向上，时间条上的“正确”方向完全一样……

目前我使用两个按日期排序和限制（5、60）的查询，但我想有更好的方法......我只是不知道这种方式;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:15:33.837

我认为唯一实用的方法是在两个 LIMIT'ed 查询之间使用 UNION，一个按升序排序，另一个按降序排序。这也是因为不能保证在两个间隔中的任何一个间隔中都有所需的行数。

# windows - 在 Windows (Cygwin) 上安装 Hive (Hadoop)

> ID：12517679
> 
> 赞同：1
> 
> 时间：2012-09-20T17:23:29.250
> 
> 标签：windows, hadoop, cygwin, hive

我刚刚使用 cygwin 在 Windows 上安装了 hadoop ，效果很好，现在我正在安装[Hive](http://hive.apache.org/)。我将其运行为：

```
bin/hive -hiveconf java.io.tmpdir=/cygdrive/c/cygwin/tmp
OR
bin/hive -hiveconf java.io.tmpdir=/tmp 
```

（两者都给出相同的问题）因为我发现 Windows 命名约定存在一个错误（[https://issues.apache.org/jira/browse/HIVE-2388...](https://issues.apache.org/jira/browse/HIVE-2388?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)）

当我运行上述命令时，Hive 似乎加载正常，但是当我输入“ `show tables;`”时我没有得到任何响应。这对于所有查询都是一样的。`CREATE TABLE`等等，没有回应

它和这个人一样的问题： [http://mail-archives.apache.org/mod_mbox ...](http://mail-archives.apache.org/mod_mbox/hive-user/201209.mbox/%3CF0232037B611204D9A7090EC62CF180B055F0480F1@nda-hclt-evs06.HCLT.CORP.HCL.IN%3E)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:56:59.153

我解决了一个类似的问题并在启动所有 Hadoop 守护程序后成功运行了 HIVE

*   名称节点
*   数据节点
*   工作跟踪器
*   任务跟踪器

使用 运行文件查询`hive -f <filename>`，而不是直接在 HIVE 命令提示符下编写查询。此外，您还可以使用`bin/hive -e 'SHOW TABLES'`

# javascript - 学习 Javascript 的表现力

> ID：12517680
> 
> 赞同：1
> 
> 时间：2012-09-20T17:23:29.453
> 
> 标签：javascript

我有很多以下模板的功能：

```
function (field, filter){
  var q = {};
  q[field] = doSomething(filter);
  return q;
} 
```

我是 Javascript 的新手，但已经知道它是一种非常富有表现力的语言。所以，我的问题是这样一个函数的主体可以写得更简洁吗？

（我不能`q`作为参数传递并消除`var q = {}`，因为这些函数的输出不应合并到单个对象哈希中）。

我完全清楚知道这个问题的答案可能会使我的代码既不快也不清晰。我只是想学习，仅此而已-请不要着火。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:33:48.193

不，你不能再简化它了。

你正在尝试做这样的事情：

```
({})[field] = value; 
```

但是你想返回 (now modified) `{}`。为此，您必须保留对它的引用。这就是你的`var q = {}`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:42:03.847

你总是可以避免在你的代码中重复，使用类似的东西

```
function objectWith(field, value) {
   var q = {}; q[field] = value; return q;
} 
```

这将使您的原始代码变成

```
function f(field, filter) { 
   return objectWith(field, doSomething(filter); 
} 
```

或者更好的是，完全避免使用“f”并使用

```
var o = objectWith(field, doSomething(filter); 
```

每当您最初使用它时，假设字段始终是一个变量。如果是字面的，写起来会更清楚

```
var o = { fieldLiteral: doSomething(filter) }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:48:13.310

只是我的狡猾的花絮，但你正在做的是相当于下面的代码：

```
function f(field, filter){
    var q = {};
    q.__defineGetter__(field, doSomething(filter));
    return q;
} 
```

可能有某种方法可以以这种形式缩短它。

# jquery - 如何使用 jquery 将 JSON 导入 SQLite

> ID：12517681
> 
> 赞同：0
> 
> 时间：2012-09-20T17:23:29.130
> 
> 标签：jquery, json, sqlite

我已经用 HTML5 和 JS (phonegap) 开发了一个应用程序，现在我必须将 JSON 导入本地 SQLite。我有以下代码以便从外部服务器导入

```
 $.ajax({
        url: 'path_to_my_file',
        data: {name: 'Chad'},
        dataType: 'jsonp',
        success: function(data){
                var count = data.posts.length;
                $.each(data.posts, function(i,post){
                    notesdb.transaction(function(t) {
                    t.executeSql('INSERT into bill (barcode, buildingcode, buildingaddress, flatname, flatdescription, entryseason, period, amount, pastpayments, todaypayments, receiptno) VALUES (?,?,?,?,?,?,?,?,?,?,?);',
                        [post.Id, post.Code, post.Address, post.Name, post.Description, post.EntrySeason, post.Period, post.Revenue, post.PastPayments, post.todaypayments, post.receiptno],
                        function(){ 
                            bill = bill + 1;
                            $('#mycontent article').html(bill + '/' + data.posts.length + ' <strong>bill</strong>');

                            if (--count == 0) {
                                $('#mycontent article').html('<strong>bill - <font color=green>OK</font></strong>');
                            }
                        }
                    );
                    });
                });
            }
    }); 
```

例如，如果我必须导入本地 json var，我应该如何转换代码

```
var mybilljson = jQuery.parseJSON( billjson ); 
```

进入同一个 SQLite？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:26:59.930

`success`当从服务器接收到数据时，您的函数会被调用。
传递给的函数`each`会为 中的每个元素调用`posts`。
传递给的函数`transaction`在事务开始时被调用。当命令完成执行时，
传递给被调用的函数。`executeSql`

您没有服务器请求，我假设`mybilljson`其中包含一张账单，因此您必须放弃前两张。结果将是这样的：

```
var mybill = ...;
notesdb.transaction(function(t) {
    t.executeSql('INSERT INTO bill(...) VALUES(...)',
                 [mybill.Id, ...],
                 function() {
                     // whatever
                 });
}); 
```

# java - .wav 文件播放，但 .aiff 文件不播放

> ID：12517685
> 
> 赞同：1
> 
> 时间：2012-09-20T17:24:08.920
> 
> 标签：java, audio, wav, playback, aiff

作为我（仍然未解决的）上一个问题的后续，[GUI 事件没有持续触发](https://stackoverflow.com/questions/12437137/gui-event-not-triggering-consistently)，我发现了另一个怪癖。下面的代码创建并播放一个 .wav 文件：

```
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.Mixer;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.TargetDataLine;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class audioTest extends JFrame {

private static final long serialVersionUID = 1L;
TargetDataLine targetDataLine;
AudioCapture audCap = new AudioCapture();

public static void main(String[] args) {
    new audioTest();
}

public audioTest() {

    layoutTransporButtons();
    getContentPane().setLayout(new FlowLayout());
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(350, 100);
    setVisible(true);
}

public void layoutTransporButtons() {

    final JPanel guiButtonPanel = new JPanel();
    final JButton captureBtn = new JButton("Record");
    final JButton stopBtn = new JButton("Stop");
    final JButton playBtn = new JButton("Playback");
    guiButtonPanel.setLayout(new GridLayout());
    this.add(guiButtonPanel);
    captureBtn.setEnabled(true);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(true);

    JRadioButton[] radioBtnArray;
    AudioFileFormat.Type[] fileTypes;

    // Register anonymous listeners
    captureBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            captureBtn.setEnabled(false);
            stopBtn.setEnabled(true);
            playBtn.setEnabled(false);
            // Capture input data from the microphone
            audCap.captureAudio();
        }
    });
    guiButtonPanel.add(captureBtn);

    stopBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            captureBtn.setEnabled(true);
            stopBtn.setEnabled(false);
            playBtn.setEnabled(true);
            audCap.stopRecordAndPlayback = true;
            audCap.stopRecording();
        }
    });
    guiButtonPanel.add(stopBtn);

    playBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            stopBtn.setEnabled(true);
            audCap.playAudio();
        }
    });
    guiButtonPanel.add(playBtn);
}

class AudioCapture {

    volatile boolean stopRecordAndPlayback = false;
    AudioFormat audioFormat;
    AudioInputStream audioInputStream;
    SourceDataLine sourceDataLine;
    private String wavName;
    private File audioFile;

    /**
     *  capture audio input from microphone and save as .wav file
     */
    public void captureAudio() {

        wavName = JOptionPane.showInputDialog(null,
                "enter name of file to be recorded:");
        try {
            Mixer.Info[] mixerInfo = AudioSystem.getMixerInfo();
            // Select an available mixer
            Mixer mixer = AudioSystem.getMixer(mixerInfo[1]);
            // Get everything set up for capture
            audioFormat = getAudioFormat();
            DataLine.Info dataLineInfo = new DataLine.Info(
                    TargetDataLine.class, audioFormat);
            // Get a TargetDataLine on the selected mixer.
            targetDataLine = (TargetDataLine) mixer.getLine(dataLineInfo);
            // Prepare the line for use.
            targetDataLine.open(audioFormat);
            targetDataLine.start();
            // Create a thread to capture the microphone
            Thread captureThread = new CaptureThread();
            captureThread.start();
        } catch (Exception e) {
            System.out.println(e);
            System.exit(0);
        }
    }

    /**
     *  This method plays back the audio data that has
     *  been chosen by the user
     */
    public void playAudio() {
        // add file chooser
        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(audioFile);
        int returnVal = chooser.showOpenDialog(chooser);
        // retrieve chosen file
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            // create the file
            audioFile = chooser.getSelectedFile();
        }
        // play chosen file
        try {
            audioInputStream = AudioSystem.getAudioInputStream(audioFile);
            audioFormat = audioInputStream.getFormat();
            DataLine.Info dataLineInfo = new DataLine.Info(
                    SourceDataLine.class, audioFormat);
            sourceDataLine = (SourceDataLine) AudioSystem
                    .getLine(dataLineInfo);
            // Create a thread to play back the data
            new PlayThread().start();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }
    }

    /**
     *  This method creates and returns an AudioFormat object
     */
    private AudioFormat getAudioFormat() {
        float sampleRate = 44100.0F;
        // 8000,11025,16000,22050,44100
        int sampleSizeInBits = 16;
        // 8,16
        int channels = 1;
        // 1,2
        boolean signed = true;
        // true,false
        boolean bigEndian = false;
        // true,false
        return new AudioFormat(sampleRate, sampleSizeInBits, channels,
                signed, bigEndian);
    }

    /**
     *  Inner class to capture data from microphone
     */
    class CaptureThread extends Thread {
        // An arbitrary-size temporary holding buffer
        byte tempBuffer[] = new byte[10000];

        public void run() {
            // reset stopCapture to false
            stopRecordAndPlayback = false;
            // record as wave
            AudioFileFormat.Type fileType = AudioFileFormat.Type.WAVE;
            // take user input file name and append file type
            audioFile = new File(wavName + ".wav");

            try {
                targetDataLine.open(audioFormat);
                targetDataLine.start();
                while (!stopRecordAndPlayback) {
                    AudioSystem.write(new AudioInputStream(targetDataLine),
                            fileType, audioFile);
                }
                targetDataLine.stop();
                targetDataLine.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    /**
     * method to stop capture
     */
    public void stopRecording() {
        // targetDataLine.stop();
        // targetDataLine.close();
        // System.out.println("stopped");
    }

    /**
     *  Inner class to play back the data
     */
    class PlayThread extends Thread {
        byte tempBuffer[] = new byte[10000];

        public void run() {
            // reset stop button
            stopRecordAndPlayback = false;

            try {
                sourceDataLine.open(audioFormat);
                sourceDataLine.start();
                int cnt;
                while ((cnt = audioInputStream.read(tempBuffer, 0,
                        tempBuffer.length)) != -1
                        && stopRecordAndPlayback == false) {
                    if (cnt > 0) {
                        sourceDataLine.write(tempBuffer, 0, cnt);
                    }
                }
                sourceDataLine.drain();
                sourceDataLine.close();
            } catch (Exception e) {
                e.printStackTrace();
                System.exit(0);
            }
        }
    }
 }
} 
```

我尝试将捕获部分更改为记录 .aiff 文件，该文件有效，但现在播放无声。我可以找到文件并通过其他方式播放，它工作正常，但在这个程序中不行。

我为记录 .aiff 更改的行是：

```
// record as aiff
AudioFileFormat.Type fileType = AudioFileFormat.Type.AIFF;
// take user input file name and append file type
audioFile = new File(wavName + ".AIFF"); 
```

任何人都知道为什么通过此代码播放 .wav 文件但 .aiff 文件不播放？

-EDIT- 我也尝试使用 .aif 作为后缀，但这也不起作用。我突然想到这可能与存储为 AIFF-C 音频的文件有关，但我找不到任何进一步的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:39:59.697

[AIFF-C 是一种压缩音频格式](http://en.wikipedia.org/wiki/Audio_Interchange_File_Format#AIFF-C_common_compression_types)，因此您不应将其“按原样”发送到音频设备。您需要先将其解压缩为 PCM。

# android - 在 Android SQLite 搜索中搜索多个列

> ID：12517695
> 
> 赞同：2
> 
> 时间：2012-09-20T17:24:54.090
> 
> 标签：android, sqlite

我有一个汽车 sqlite 数据库，其中一个表有 3 列：年份、品牌和型号。通过下面的查询，我可以搜索单个短语，例如“ford”，它将显示所有福特结果，或者“1964”，我将获得那一年的所有汽车。但是“1964 福特”返回“未找到结果” - 或 null。如何修改查询，以便我可以从所有 3 列中输入搜索词，例如“1964 福特野马”？是的，我知道没有 1964 年的福特野马，它是 1964 年半。但是在我的数据库中有一排是 1964 年的福特野马，所以我们以“1966 年福特野马”为例。

```
 public Cursor searchDB(String query) {  
    return db.query(true, DB_TABLE, new String[] { KEY_ROWID, KEY_YEAR, KEY_MAKE, 
    KEY_MODEL }, KEY_YEAR + " LIKE" + "'%" + query + "%' OR " + KEY_MAKE +  
    " LIKE" + "'%" + query + "%' OR " + KEY_MODEL + " LIKE" + "'%" + query + "%'",  
    null, null, null, null, null);  
} 
```

我尝试使用 AND 代替 + ，但崩溃了。我使用的是安卓 2.2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:35:40.550

它不起作用的原因是您的`column LIKE %query%`陈述。也就是说，该值必须完全包含您的查询，并且两端包含任意数量的字符。所以`"1964" LIKE "%1964 mustang%"`会失败，但`"1964 mustang" LIKE "%1964%"`会给你正确的结果。

如果您按空格拆分查询字符串并针对每个拆分字符串查询每一列，这可能会为您提供您正在寻找的结果。

更新：用于拆分字符串并形成查询的片段。

```
public Cursor searchDB(String query) {
    /* Example: query = "1964 ford mustang" */

    String[] parts = query.split(" "); /* Should split to {"1964", "ford", "mustang"} */

    String queryString = "";
    for(int i = 0; i < parts.length; i++) {
        queryString += KEY_YEAR + " LIKE '%" + parts[i] + "%' OR ";
        queryString += KEY_MAKE + " LIKE '%" + parts[i] + "%' OR ";
        queryString += KEY_MODEL + " LIKE '%" + parts[i] + "%'";
        if(i != (parts.length - 1)) {
            queryString += " OR ";
        }
    }

    return db.query(true, DB_TABLE, 
        new String[] { KEY_ROWID, KEY_YEAR, KEY_MAKE, KEY_MODEL }, 
        queryString, null, null, null, null, null);
} 
```

# windows-phone-7 - 保存在隔离存储中的数据

> ID：12517697
> 
> 赞同：0
> 
> 时间：2012-09-20T17:25:09.477
> 
> 标签：windows-phone-7

我有一个问题，我想很容易，但我找不到答案..

如果在应用程序的第一个版本中，我在独立存储中保存了一个字符串 (IsolatedStorageSettings.ApplicationSettings.Add("mdpIso", "seti"))，那么当我将此应用程序更新到新版本时，我是否可以访问此数据感谢 IsolatedStorageSettings.ApplicationSettings["mdpIso"] ？

感谢你所做的一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:09:20.687

是的，IsolatedStorageSettings.ApplicationSettings 将在您的应用更新到新版本后持续存在。

# python - python (SimPy) 生成遵循 erlang 分布的随机数

> ID：12517699
> 
> 赞同：2
> 
> 时间：2012-09-20T17:25:17.930
> 
> 标签：python, random, distribution, simpy

我正在使用 Python（主要是 SimPy 包，但它与我认为的问题无关），对一些系统进行建模并运行模拟。为此，我需要生成遵循分布的随机数。到目前为止，通过导入随机数（例如从随机导入 *）并使用 expovariate 或 normalvariate 方法，我已经完成了一些分布，如指数和正态分布。但是，我找不到任何随机产生遵循 Erlang 分布的数字的方法。所以：

1.  有没有我忽略的方法？
2.  我必须导入其他库吗？
3.  我可以做一些解决方法吗？（认为​​我可以使用指数分布来产生随机的“Erlang”数字，但我不确定如何。一段代码可能对我有帮助。

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:35:33.767

Erlang 分布是 gamma 分布的一个特例，它以 numpy.random.gamma ([参考](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.gamma.html#numpy.random.gamma)) 的形式存在。只需为 k ("shape") 参数使用一个整数值。另请参阅有关 scipy.stats.gamma 的 PDF、CDF 等函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T17:43:47.160

正如前面的答案所述，erlang 分布是伽马分布的一个特例。但是，据我所知，您不需要该`numpy`软件包。可以在 python 中使用`random.gammavariate(alpha, beta)`.

用法：

```
import random
print random.gammavariate(3,1) 
```

# android - android Position AlertDialog 在 4.1 和 2.3 上不起作用

> ID：12517704
> 
> 赞同：0
> 
> 时间：2012-09-20T17:25:31.147
> 
> 标签：android, position, android-alertdialog

我有一个 AlertDialog，其 Y 已设置并设置为显示在中心。它在 2.3 模拟器和设备上完美显示，但在 4.1（模拟器和 4.0 设备）上显示比预期的更多。这是代码：

```
 AlertDialog adg = scrnDlg.create();
    WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
    lp.copyFrom(adg.getWindow().getAttributes());
    lp.width = WindowManager.LayoutParams.MATCH_PARENT;
    //lp.height = WindowManager.LayoutParams.MATCH_PARENT;
    lp.y = 05;
    lp.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;
    adg.getWindow().setAttributes(lp);
                adg.show();
    /*  working with 2.3 but nt proper position with 4.0
        WindowManager.LayoutParams lp = adg.getWindow().getAttributes();
        lp.y = 05;
        lp.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;
        adg.getWindow().setAttributes(lp);
        */ 
```

obth 版本模拟器的屏幕截图： ![在此处输入图像描述](../Images/f9b9f47614d4e1239491bee3c560fee6.png)

谁能帮我解决这个问题？这个高度也非常适合 Ld、Md。但对于 Hd 和 xD，这个高度似乎很小，底部留有更多空间。如何根据屏幕高度设置高度。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:48:11.723

我终于通过测试 Android OS 版本来设置 Gravity 得到上述结果。这就是我的做法并按预期获得结果：

```
alertDlg.show(); 
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp.copyFrom(alertDlg.getWindow().getAttributes());
lp.width = WindowManager.LayoutParams.MATCH_PARENT;
lp.y = 02;
if (MyActivity.Build_Version < Build.VERSION_CODES.ICE_CREAM_SANDWICH)
lp.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL; 
else if (MyActivity.Build_Version >= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
lp.gravity = Gravity.CENTER_HORIZONTAL;

alertDlg.getWindow().setAttributes(lp); 
```

4.1 及 4.1 以下版本的 Android 对 LayoutParams 的重力有不同的处理，因此上述设置并完美运行。

希望这个分享对某人有所帮助。

# app-store-connect - iTunes Connect 中的 IOS 6 路由应用程序覆盖文件

> ID：12517712
> 
> 赞同：1
> 
> 时间：2012-09-20T17:26:05.577
> 
> 标签：app-store-connect, ios6, geojson

当我在 iTunes Connect 中提交我的应用程序路由文件时，我收到了以下错误消息：

```
JSON file you uploaded was invalid. Errors : Each set of coordinates provided must be valid : [Ljava.lang.Object;@1f02c024 
```

**这是 geoJson 文件的内容：**

```
{"type":"MultiPolygon","coordinates": 
[[45.56497960813695, -74.22161340332036],[45.823011917542566, -73.46767663574224],[45.47356846799377, -73.30562829589849],[45.34051720106048, -73.51299523925786],[45.56497960813695, -74.22161340332036]]} 
```

我看不出这个坐标的问题在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:42:08.147

多面坐标是数组数组的数组：[[[x, y], ...]。另外，看起来你的坐标被交换了。它需要像[KML一样](https://developers.google.com/kml/documentation/kmlreference#point)[向东、向北](http://geojson.org/geojson-spec.html#positions)（或经度、纬度） 。

# php - 了解 Opencart 的加载器工作流程

> ID：12517713
> 
> 赞同：0
> 
> 时间：2012-09-20T17:26:11.677
> 
> 标签：php, classloader, opencart

我试图了解 OpenCart 的代码是如何工作的。以下代码`index.php`在 OpenCart 的 mysite.com/admin/ 文件夹中的（附加文件）中定义。您能否解释一下以下代码的实际作用？我想知道它实际上是如何工作的。

我也附上`loader.php`了`registry.php`它们各自的文件夹。

```
// Registry
$registry = new Registry();

// Loader
$loader = new Loader($registry);
$registry->set('load', $loader); 
```

[链接到 mysite.com 管理](http://dl.dropbox.com/u/27899629/mysite.com.zip)文件夹 zip

虽然以下问题与我的问题不相似，但仍然触及相似点： [Opencart meta title include store name](https://stackoverflow.com/questions/10086942/opencart-meta-title-include-store-name)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:32:36.897

```
// Registry
$registry = new Registry(); // Loads registry class from /system/engine/registry.php

// Loader
$loader = new Loader($registry); // Loads Loader class from /system/engine/loader.php
$registry->set('load', $loader); // Assigns the class to the registry allowing global use in other classes that use the registry object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:45:40.303

Opencart 的编码逻辑是 MVC+L (Language) 模型。

不是最新版本，但您可以在此处了解有关工作流程的大部分详细信息； [http://www.packtpub.com/article/opencart-layout-structure](http://www.packtpub.com/article/opencart-layout-structure)

# data-binding - 如何创建具有动态列数的表

> ID：12517718
> 
> 赞同：3
> 
> 时间：2012-09-20T17:26:24.613
> 
> 标签：data-binding, tableview, javafx-2

Thare 是 javaFX 文档页面上的[教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)。这个例子描述了如何制作 tableView，如果你有一些 java 类，它可以告诉你你将拥有哪些列。（在这个例子中是一个 Person 类）。

但是如果我没有任何特定的类，并且列数可能会不时变化怎么办？就我而言，我有这样的数据结构：

```
class TableData{ 
    List<Row> rows; //A list with all my rows i need to have in my table
}

class Row{
    List<Column> columns; //Cells\Columns for every row. 
}

class Column{
    Attribute attr; //Each column - is somethig like a wrapper for the real data i need to show in a cell;
}

class Attribute{ //My precues data
    String name;
    SupportingInfo info;
}

class SupportingInfo{//Some supporting fields...
    String name;
    String value;
    //...etc....
} 
```

[所以，我的情况与这个](http://blog.ngopal.com.np/2011/10/19/dyanmic-tableview-data-from-database/)非常相似。唯一不同的是，上述案例中的数据并未与其在 javaFX 表中的表示绑定（因此，即使有人会制作额外的控件来在 tableView 中编辑此数据，具有该数据的实际对象也永远不会知道它。 )，因为它（数据）像一些字符串一样进入表格，而不是像一些对象；

所以，我需要什么 - 将数据推送到表中（例如：**table.setItems(tableData)**），设置一些集合工厂，让用户能够编辑数据，并将编辑后的数据放在我的 tableData 对象中；

以下是我为此目的尝试制作的一些代码：

```
//prepare my table
private void createTableHeader(TableView table, List<Attribute> ias) {
    int i = 0;
    for (final Attribute ia : ias) {
        final int j = i;
        i++;
        TableColumn tc = new TableColumn(ia.getName());
        tc.setSortable(true);
        tc.setCellValueFactory(new Callback<CellDataFeatures<List<Attribute>, String>, ObservableValue<String>>() {
            @Override
            public ObservableValue<String> call(CellDataFeatures<List<Attribute>, String> arg0) {
                if(arg0.getValue().get(j).getSupportingInfo() == null){
                    arg0.getValue().get(j).setSupportingInfo(new SupportingInfo());
                }
                return new SimpleObjectProperty(arg0.getValue().get(j),"value");
            }
        });
        table.getColumns().add(tc);
    }
}

//loading some data to my tableView
private void createTableBody(TableView curTable, List<Row> rows) {  
    ObservableList<List<Attribute>> data = FXCollections.observableArrayList();
    for (Row row : rows) {
        data.add(row.getColumns());
    }
    curTable.setItems(data);
}   

//this one is to define some extra controls for editing data in a table by users
private void makeCellFactory(TableColumn curTableCol, final Attribute templateIa, final Document doc) {
    curTableCol.setCellFactory(new Callback<TableColumn, TableCell>() {
        public TableCell call(TableColumn p) {
            final EditingCell cell = new EditingCell(templateIa, doc);
            return cell;
        }
    });
} 
```

但是，结果，我的表​​格中只有空行，能够单击某些单元格并接收表格编辑控件。但是按表中没有默认值；我在我的代码中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T08:12:45.137

好的，我找到了解决方案： ts.setCellFactory 应该如下所示：

```
tc.setCellValueFactory(new Callback<CellDataFeatures<List<Attribute>, SupportingInfo>, ObservableValue<Attribute>>() {
 @Override
 public ObservableValue<Attribute> call(CellDataFeatures<List<Attribute>, SupportingInfo> arg0) {
  return new SimpleObjectProperty(arg0.getValue().get(j),"value",arg0.getValue().get(j));
 }
}); 
```

此外，需要此代码来捕获新值并将传入数据放入表中：

```
tc.setOnEditCommit(new EventHandler<CellEditEvent<List<Attribute>, Attribute>>() {
    @Override
    public void handle(CellEditEvent<List<Attribute>, Attribute> t) { t.getTableView().getItems().get(t.getTablePosition().getRow()).get(j).setSupportingInfo(t.getNewValue().getSupportingInfo());
    }
}); 
```

# iphone - Iphone GPS 无法提供准确的经纬度

> ID：12517721
> 
> 赞同：5
> 
> 时间：2012-09-20T17:26:29.827
> 
> 标签：iphone, ios, cllocationmanager

你好朋友我看过很多关于gps准确性问题的帖子，但它一直没有工作

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

    NSString  *latstr = [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
    NSString  *longstring=[NSStringstringWithFormat:@"%f",newLocation.coordinate.longitude];

     if (abs(howRecent)>5.0)
     {
         [self.locationManager startUpdatingLocation];
         return;
      }
    if(abs(newLocation.horizontalAccuracy)<0.0f)
    {
        [self.locationManager startUpdatingLocation];
        return;
    }
    if(newLocation.horizontalAccuracy>65.0f)
    {
        [self.locationManager startUpdatingLocation];
        return;
    }
    self.latstring = [latstr copy];
    self.longstr = [longstring copy];

    if((updateLocationFirst||loadFirstView))
    {    
        [[NSUserDefaults standardUserDefaults]setObject:latstring forKey:@"Latitude"];
        [[NSUserDefaults standardUserDefaults]setObject:longstr forKey:@"Longitude"];
        [self displayParticularDaySpecial];
        loadFirstView=FALSE;
        updateLocationFirst=FALSE;
        [self.locationManager stopUpdatingLocation];
    }
} 
```

这里的问题是，如果我正在降低精度值，它需要花费大量时间来加载，并且当您到达目的地时，这个值有问题，那么我将针对某些地址向谷歌 api 发送纬度和经度。 0.6 英里的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:46:31.673

您应该参考[位置感知编程指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)，该指南提供了用于确定您的位置的优秀编程示例。

正如您将在该文档的演示中看到的那样，当您[启动标准位置管理器](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW7)时，您通常会告诉它您需要什么精度。一旦您启动位置管理器，您就不必再次启动它（就像您在代码示例中所做的那样）。该`didUpdateLocations`方法将被一次又一次地调用，准确性越来越高，这一切都是独立的。您无需再次启动位置管理器……它会一直运行，直到您将其关闭。根据定义，如果您在 中`didUpdateLocations`，则表示它已经启动。

我还注意到您使用的是旧的[`didUpdateToLocation`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateToLocation%3afromLocation%3a). 如果你正在为 iOS 6 编程，你真的很想使用[`didUpdateLocations`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)，这是该[`CLLocationManagerDelegate`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)方法的当前版本。

最后，您提到获取您的位置需要很长时间。这是很有可能的。事实上，在某些区域，你永远不会离得很近（或任何位置）。你的应用程序应该假设准确的位置需要一段时间，如果你从来没有得到一个真正准确的位置，你应该优雅地处理，这是很有可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:46:08.773

您是否在 CLLocationManager 中设置了 desiredLocationAccuracy？默认情况下，范围有点宽。

获得一个非常准确的值需要一些时间。

# mysql - 以当前年份为前缀的自动递增主 ID

> ID：12517722
> 
> 赞同：0
> 
> 时间：2012-09-20T17:26:30.600
> 
> 标签：mysql, auto-increment

我应该怎么做才能在 MySQL 中使用当前年份的前缀加上一些数字（附加）来创建自动递增的主 ID，例如 2012000001、2012000002 ... .

谢谢。

任何帮助将不胜感激。

朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:30:04.357

While I recommend against this approach, at least for a PK, if you want to do it you must use an [`INSERT TRIGGER`](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:28:46.247

简单的回答，这是不可能的。

mysql刚刚找到表中最大的id，加一。**因此，如果您使用自动递增的**值，您描述的操作是不可能的，您必须在插入时手动更新 id，这不是真正推荐的技术。

# .net - 倒计时不起作用（使用秒表类 + 调度器定时器）

> ID：12517724
> 
> 赞同：2
> 
> 时间：2012-09-20T17:26:41.903
> 
> 标签：.net, vb.net, stopwatch, countdowntimer, dispatchertimer

我正在启动小时、分钟和秒

然后将其转换为总毫秒数。

然后我正在做的是从 Elapsed MilliSeconds 中减去 Total MilliSeconds

IE`elms = cms - e.Milliseconds`

（评估的毫秒 = 计算的毫秒。- Stopwatch.elapsedMilliseconds）

然后将评估的毫秒转换回 HH:MM:SS:MS 格式。

但由于一些逻辑错误，它无法正常工作，这就是为什么我需要一些帮助。请帮帮我这是我的代码：

```
 Dim dd As Integer = 0
        Dim mm As Integer = 0
        Dim hh As Integer = 0
        Dim ss As Integer = 0
        Dim ms As Integer = 0
        Dim cms As Long = 0
        Dim elms As Long = 0

    Dim stopwatch As System.Diagnostics.Stopwatch = New System.Diagnostics.Stopwatch
    Dim dt As DispatcherTimer = New DispatcherTimer

    Private Sub StartButton_Click(sender As Object, e As RoutedEventArgs) Handles StartButton.Click

                hh = Hours.Text * 60 * 60 * 1000
                mm = Minutes.Text * 60 * 1000
                ss = Seconds.Text * 1000
                cms = hh + mm + ss
                hh = mm = ss = 0
                Start()
    End Sub

    Private Sub Start()

                dt.Interval = New TimeSpan(0, 0, 0, 0, 10)
                AddHandler dt.Tick, AddressOf ontimertick
                stopwatch.Start()
                dt.Start()

            End If
    End Sub

    Private Sub ontimertick()

            Dim e As New TimeSpan
            e = stopwatch.Elapsed

                elms = cms - e.Milliseconds
                ss = ((elms Mod (1000 * 60 * 60)) Mod (1000 * 60)) \ 1000
                mm = (elms Mod (1000 * 60 * 60)) \ (1000 * 60)
                hh = elms \ (1000 * 60 * 60)
                elms = elms Mod 1000

                MicroSeconds.Text = elms.ToString("00")
                Seconds.Text = ss.ToString("00")
                Minutes.Text = mm.ToString("00")
                Hours.Text = hh.ToString("00")
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:42:49.380

错误在这里：

```
ss = ((elms Mod (1000 * 60 * 60)) Mod (1000 * 60)) \ 1000
mm = (elms Mod (1000 * 60 * 60)) \ (1000 * 60)
hh = elms \ (1000 * 60 * 60)
elms = elms Mod 1000 
```

肯定是：

```
ss = ((elms Mod (1000 * 60 * 60)) Mod (1000 * 60)) \ 1000
 elms=elms-(ss*1000)
mm = (elms Mod (1000 * 60 * 60)) \ (1000 * 60)
 elms=elms-(mm*1000)
hh = elms \ (1000 * 60 * 60)
 elms=elms-(hh*1000)
elms = elms Mod 1000 
```

好的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:47:22.267

你把事情复杂化了。您需要做的就是将总时间存储为一个`TimeSpan`对象。然后，您可以从中减去`StopWatch.Elapsed`时间，因为它也是一个`TimeSpan`. 然后，`TimeSpan`计算结果的对象将包含剩余时间。例如：

```
' Get the total desired time for count down
Dim total As New TimeSpan(Integer.Parse(Hours.Text), Integer.Parse(Minutes.Text), Integer.Parse(Seconds.Text))

' Later, get the time left and display on screen
Dim timeLeft As TimeSpan = total - stopwatch.Elapsed
Hours.Text = timeLeft.TotalHours
Minutes.Text = timeLeft.TotalMinutes
Seconds.Text = timeLeft.TotalSeconds 
```

显然，只是这样调用`Integer.Parse`是不安全的，因为文本框可能包含非数字值。您将需要添加代码来处理它。例如，如果您只想在输入无效时默认为零，您可以执行以下操作：

```
Dim totalHours As Integer
Dim totalMinutes As Integer
Dim TotalSeconds As Integer
Integer.TryParse(Hours.Text, totalHours)
Integer.TryParse(Minutes.Text, totalMinutes)
Integer.TryParse(Seconds.Text, totalSeconds)
Dim total As New TimeSpan(totalHours, totalMinutes, totalSeconds) 
```

或者，如果您想显示验证错误消息，您可以执行以下操作：

```
Dim total As TimeSpan
Try
    total = New TimeSpan(Integer.Parse(Hours.Text), Integer.Parse(Minutes.Text), Integer.Parse(Seconds.Text))
Catch ex As FormatException
    MessageBox.Show("Entries must be numeric.")
End Try 
```

# javascript - 如果输入字段的值匹配，则显示 div

> ID：12517727
> 
> 赞同：0
> 
> 时间：2012-09-20T17:26:54.910
> 
> 标签：javascript, input, hidden

如果表单中选择的值与 div 的值匹配，则隐藏的 div 将出现

用于检测输入字段值的脚本

```
<script> $(document).ready(function() {
    $("input[name$='sel']").ready(function() {
        var test = $(this).val();

        $("div.desc").hide();
        $("#sel" + test).show();
    }); });

</script> 
```

字段的值和应该在输入字段的值正确时显示的 div

```
<table><tr><td> <strong><font  size="3" >Payment Method</font></strong>

<p> <?php echo $_POST["sel"]; ?> <input type="radio" name="sel" value="<?php echo $_POST["sel"]; ?>" /> </p>  <!====================================================================================> </td><td> <img src="img/sep.png" />  </td><td> <!====================================================================================> <div id="selCreditCard" class="desc"> <table><tr><td>

<p> <label for="card"><strong>Card Number : </font></strong></label><?php echo $_POST["card"]; ?>
        <input name="card"   type="hidden"  id="card" value="<?php echo $_POST["card"]; ?>"  style="width:85px;" 

class="validate[custom[card]] text-input" /> </p> <br>

<label for="ccv" ><strong>CVV2 Code : </strong></label><?php echo $_POST["ccv"]; ?>
        <input type="hidden"  name="ccv" id="ccv" style="width:30px;margin-bottom:2px;margin-left:12px;" value="<?

php echo $_POST["ccv"]; ?>" />

<br>

<label><strong>Expiration Date</strong>

<p> <label for="mon"><strong>Month : </strong></label><?php echo $_POST["mon"]; ?>
        <input type="hidden"   name="mon" id="mon" style="width:15px;" value="<?php echo $_POST["mon"]; ?>" />

      <label for="yir" ><strong>Year : </strong></label><?php echo $_POST["yir"]; ?>
        <input type="hidden"  name="yir" id="yir" style="width:15px;" value="<?php echo $_POST["yir"]; ?>" />
        </p>

</div> <!====================================================================================> <div id="selPaypal" class="desc" style="display: none;margin-left:20px;margin-top:1px;margin-bottom:1px;"> Please make sure that you have paid the amount on the Paypal payment page.<br> If not click here to proceed <img src="img/ppal.png" height="36" style="margin-bottom:-13px;" onclick="window.open

('paypal/paypal.html','Paypal','width=450,height=300,left=160,top=170');" style="cursor:pointer;"/>  </div> <!====================================================================================> <div id="selWireTransfer" class="desc" style="display: none;margin-left:20px;margin-top:0px;margin-bottom:-5px;"> <font size="0.5"> <strong>Processing Time</strong><br> A bank wire is not an instant transfer. "Two to three business days" are<br> required to process the transfer and 

allow the recipient to see the wired funds.</font> </div> <!====================================================================================> </td></tr></table> 
```

即使在字段中输入了正确的值，我也无法在下一页上显示 div 哪种方法会非常有效，或者您认为该代码是否适用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:35:22.267

您应该在输入时使用点击事件。

```
<script> 
     $(document).ready(function() {
        var test = $("input[name='sel']").val();
         $("div.desc").hide();
         $("#sel" + test).show();
  });

</script> 
```

# jakarta-ee - why log4j.zip is not in the build path after i use mvn eclipse:eclipse?

> ID：12517729
> 
> 赞同：0
> 
> 时间：2012-09-20T17:27:03.637
> 
> 标签：jakarta-ee, maven, jar, zip, maven-3

i have the following lines in pom.xml

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
    <type>zip</type>
</dependency>
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
    <classifier>sources</classifier>
</dependency> 
```

then i run

```
mvn dependency:resolve
mvn eclipse:eclipse 
```

but **i cannot find log4j.zip in .classpath, why?**

only that source.jar is in .classpath ...

```
<classpathentry kind="var" path="M2_REPO/log4j/log4j/1.2.16/log4j-1.2.16-sources.jar"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:07:35.957

由于它是一个 zip 文件，因此它被视为资源文件而不是编译时依赖项。应该在运行时和测试类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:16:56.117

你为什么不删除类型，让 maven 优雅地处理这个？

（仅供参考，在我的项目中，log4j 是 slf4j 的传递 dep，带有打包包）

# opengl-es - crash iOS6 and cocos2d Background Thread + MKMapView

> ID：12517731
> 
> 赞同：1
> 
> 时间：2012-09-20T17:27:11.920
> 
> 标签：opengl-es, cocos2d-iphone, mkmapview, ios6, ios6-maps

I've been working on a game using the MapKit Framework and Cocos2D v2.0 library: I display a transparent OpenGL View (EAGLView) managed by Cocos2d above a MKMapView. It's a large project, more than a man-year so far for the iOS client alone.

To have a smooth and synchronized Cocos2d layer with the map pan and zoom, I enable the background thread switch in ccConfig.h (CC_DIRECTOR_IOS_USE_BACKGROUND_THREAD). Before the last iOS 6 update everything was fine. But in iOS 6, the app crashes in swapBuffers method of CCGLView causing a Bad Access here:

[context_ presentRenderbuffer:GL_RENDERBUFFER]

I'm wondering if it's related to multi threading and OpenGL. It only happens with the background switch on and the MKMapView.

I already tried with the map and without the background thread enable for cocos, I tried also cocos in background thread without the map, and no crashes.

Thanks,

# sql - 在同一列中按一刻钟排序

> ID：12517732
> 
> 赞同：0
> 
> 时间：2012-09-20T17:27:13.190
> 
> 标签：sql, sql-server

我有这样的结果（按年、日、小时排序）：

```
Year    DayOfYear   Hour
2012    266         13:00
2012    266         13:15
2012    266         13:30
2012    266         15:15
2012    266         15:30
2012    266         16:00 
```

我需要按*四分之一小时*然后按*小时*检索行顺序，如下所示：

```
Year    DayOfYear   Hour
2012    266         13:00
2012    266         16:00
2012    266         13:15
2012    266         15:15
2012    266         13:30
2012    266         15:30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:29:45.967

基本上您可以按分钟订购，因为这将是 0、15、30 或 45。

```
ORDER BY Year, DayOfYear, DATEPART(MINUTE, Hour), Hour; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:31:39.143

您可以`DATEPART(mi, CONVERT(DATETIME, hour))`在 SELECT 列表中使用并对此进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:39:19.350

您可以使用以下方法转换为 15 分钟间隔：

```
datediff(minute, 0, Hour) / 15 % 4 
```

或在查询中：

```
select  *
,       datediff(minute, 0, Hour) / 15 % 4 as Quarter
from    YourTable
order by
        datediff(minute, 0, Hour) / 15 % 4 
```

这打印：

```
Year        DayOfYear   Hour             Quarter
----------- ----------- ---------------- -----------
2012        266         13:00:00         0
2012        266         16:00:00         0
2012        266         13:15:00         1
2012        266         15:15:00         1
2012        266         15:30:00         2
2012        266         13:30:00         2

(6 row(s) affected) 
```

# objective-c - Properties in iOS not being set

> ID：12517733
> 
> 赞同：0
> 
> 时间：2012-09-20T17:27:23.973
> 
> 标签：objective-c, ios, ivar

I have the following code. self.settingsObject is always nil? What is the issue?

```
.h file
@interface RoomConfigurationViewController : ATBaseViewController {

}
  @property (nonatomic, strong) AttendanceSettings *settingsObject;
@end

.m file
@synthesize settingsObject = _settingsObject;

NSData *settingsData = [[NSUserDefaults standardUserDefaults]     objectForKey:kUserDefaultsSettingsObject];
self.settingsObject = [NSKeyedUnarchiver unarchiveObjectWithData:settingsData]; 
```

# javascript - HTML 表单 onclick 事件不调用 javascript 函数

> ID：12517735
> 
> 赞同：3
> 
> 时间：2012-09-20T17:27:31.210
> 
> 标签：javascript, html, forms, onclick

我想创建一个动态表单，当我将代码直接放在 onclick 事件上时，通过按下按钮（或图像）将输入添加到表单中

```
alert("Hello"); 
```

它可以工作...但是，当我尝试调用 javascript 函数时它不会...即使我调用简单函数 hello(); （以及 add() ）

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script type="text/javascript">
function add() {
    var container = document.createElement("div"); 
    container.innerHTML = "<input type='text' name='email'><br/>";
    document.getElementById('emails').appendChild(container);
}
function hello() {
    alert("Hello"); 
}
​&lt;/script>
</head>
<body>
<form id="myform" name="myform" action="valid.php" method="POST">
    <div id="emails">
        <input type='text' name='email' value=''/><br />
    </div>
    <img width="50px" src="myimage.jpg" onclick='add();'/>
    <input type="submit" value="Submit"/>
</form>
</body>
</html> 
```

任何人都设法发现为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:32:46.543

看起来它之前有某种特殊字符：

```
 </script>. 
```

我只是复制并粘贴[在这里](http://codepen.io/anon/pen/eitjh)。查看第 13 行的第一个字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:40:46.850

我在这里将它复制到一个不错的小jsfiddle [http://jsfiddle.net/dr9hG/](http://jsfiddle.net/dr9hG/)

我还将名称从 just 更改为`"email"`，`"email[]"`以便您可以在提交的页面上通过数组访问所有这些。

# postgresql - 如何修复这个 PostgreSQL 9.1 存储过程？

> ID：12517738
> 
> 赞同：3
> 
> 时间：2012-09-20T17:27:54.300
> 
> 标签：postgresql, stored-procedures, postgresql-9.1

我们的软件有问题，为了纠正这个问题，我必须编写一个存储过程，该过程将作为升级安装升级过程的一部分运行。此存储过程需要查找特定表中与特定条件匹配的每一行并更新该行。由于内部原因，必须通过我们专门为插入和更新数据编写的存储过程来完成更新。

这是我为解决此问题而编写的存储过程：

```
CREATE OR REPLACE FUNCTION FixDataProblem() RETURNS VOID AS $$
DECLARE
    FixCursor   NO SCROLL CURSOR FOR
        SELECT * FROM MyTable WHERE ProblemColumn IN ( '?', 'PR' );
    RowToUpdate         MyTable%ROWTYPE;
BEGIN
    -- Open the cursor
    OPEN FixCursor;

    -- Start a loop
    LOOP
        -- Fetch the next row from thr cursor
        FETCH FixCursor INTO RowToUpdate;

        -- Did we get anything back?
        IF RowToUpdate IS NULL THEN
            -- We didn't. Exit the loop
            EXIT;
        END IF;

        -- Call the UpsertMyTable stored procedure to set the ProblemColumn column to NULL
        SELECT CarSystem.UpsertMyTable( RowToUpdate.RowId,
                               RowToUpdate.ForeignId,
                               RowToUpdate.CountryId,
                               NULL,
                               RowToUpdate.Plate,
                               RowToUpdate.HashedData,
                               RowToUpdate.PlateClassId,
                               RowToUpdate.AlarmClassId,
                               RowToUpdate.BeginDate,
                               RowToUpdate.EndDate,
                               RowToUpdate.ListPriorityId,
                               RowToUpdate.VehicleTypeId,
                               RowToUpdate.MakeId,
                               RowToUpdate.ModelId,
                               RowToUpdate.Year,
                               RowToUpdate.ColorId,
                               RowToUpdate.Notes,
                               RowToUpdate.OfficerNotes,
                               NULL,
                               UUID_GENERATE_V4() );
    END LOOP;

    -- Close the cursor
    CLOSE ListDetailsCursor;
END;
$$ LANGUAGE plpgsql; 
```

这个存储过程很好，但是当我运行它时，我得到：

```
ERROR:  query has no destination for result data
HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
CONTEXT:  PL/pgSQL function "fixdataproblem" line 22 at SQL statement

********** Error **********

ERROR: query has no destination for result data
SQL state: 42601
Hint: If you want to discard the results of a SELECT, use PERFORM instead.
Context: PL/pgSQL function "fixdataproblem" line 22 at SQL statement 
```

我该如何解决这个问题？我相信我正确地调用了存储过程。我真的不知道这个存储过程有什么问题。

谢谢

托尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:33:43.030

它在那里说：

```
ERROR:  query has no destination for result data
HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
CONTEXT:  PL/pgSQL function "fixdataproblem" line 22 at SQL statement 
```

在第 22 行：

```
 -- Call the UpsertMyTable stored procedure to set the ProblemColumn column to NULL
    SELECT CarSystem.UpsertMyTable( RowToUpdate.RowId,
    ... 
```

将其从 更改`SELECT`为`PERFORM`。看看[`PERFORM`](http://www.postgresql.org/docs/9.2/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)为什么。

# c# - How does one lookup the error number in Windows EventLogEntry Message

> ID：12517740
> 
> 赞同：0
> 
> 时间：2012-09-20T17:28:02.420
> 
> 标签：c#, .net, windows, winapi

I am trying to read through the Windows Event log "Error" entry messages in in c#.

```
 foreach (EventLogEntry log in eventLog.Entries)
  {
    if (log.EntryType.ToString() == "Error") 
    {
        Console.WriteLine( log.Message);
    }
  } 
```

The output is "The XYZ service failed to start due to the following error: \r\n%%2"

while the entry I am looking for is

"The XYZ service failed to start due to the following error:\r\nThe system cannot find the file specified."

How does one translate from the id to the appropriate error message ?

Many thanks, KG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:43:11.183

事件日志消息是模板，例如：

`The %1 service failed to start due to the following error: \r\n%2`

一个事件日志条目包含一个消息号和替换字符串以替代 %1、%2 等。

.Net`EventLogEntry.Message`属性会为您进行替换，因此您永远不会看到 %1、%2 等。

看起来替换失败了，可能是因为没有足够的替换字符串（检查`EventLogEntry.ReplacementStrings`属性）或格式字符串格式错误（它似乎有一个杂散的 '%'）。尽管如果日志条目来自服务控制管理器，这些解释似乎都不合理。

# qt - QNetworkReply does not retrieve Content Disposition Header

> ID：12517741
> 
> 赞同：1
> 
> 时间：2012-09-20T17:28:08.320
> 
> 标签：qt, header, network-programming, http-headers

```
if(reply->rawHeaderList().contains("Content-Disposition"))
     check=reply->rawHeader("Content-Disposition");
else
     check="no result"; 
```

The result is “no result” Is this a bug, or is there any work around!

# android - SharedPreferences 登录错误

> ID：12517742
> 
> 赞同：0
> 
> 时间：2012-09-20T17:28:10.630
> 
> 标签：android, onclick, sharedpreferences, compareto

我正在尝试使用 SharedPreferences 保存登录凭据的代码。我能够或相信凭据已成功保存，但是在尝试通过将编辑中的凭据与保存的凭据进行比较来登录时。我不断收到“密码错误”错误。不知道我在忽略什么。登录代码如下。

登录：

```
 public class AccessApp extends Activity implements OnClickListener {
private SharedPreferences sp;
String user,pass;
Button lBttn,cBttn;
EditText uname,pword;
Intent i;

int flag=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{ 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lBttn=(Button)findViewById(R.id.login_button);
    cBttn=(Button)findViewById(R.id.cancel_button);
    uname=(EditText)findViewById(R.id.username);
    pword=(EditText)findViewById(R.id.password);

    lBttn.setOnClickListener(this);
    cBttn.setOnClickListener(this);
}
public void onClick(View arg0) {

    sp=this.getSharedPreferences("Register", MODE_WORLD_READABLE);
    user=sp.getString("USERNAME", "");
    pass=sp.getString("PASSWORD","");

    if(lBttn==arg0){
            if((uname.getText().toString().compareTo(user)==0)&& 
               (pword.getText().toString().compareTo(pass)==0))

            {
          Toast.makeText(this, "You are Logged In", 20000).show();

               Intent intent;
               intent=new Intent(this,details.class);
               startActivity(intent);
              flag=1;
            }

        else
           {
            Toast.makeText(this, "Wrong Username or Password",20000).show();
            flag=0;   
           }       
        } 
```

登记：

```
 public class SharedPrefLoginActivity extends Activity implements OnClickListener {

private SharedPreferences sp;

Intent i;
Button regBttn,rtnBttn;
EditText rName,rPwd;
String user,pass,cpass,chk;
String stat="a";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    rName=(EditText)findViewById(R.id.reg_uname);
    rPwd=(EditText)findViewById(R.id.reg_pswd);
    regBttn=(Button)findViewById(R.id.reg_button);
    rtnBttn=(Button)findViewById(R.id.rtn_button); 

    regBttn.setOnClickListener(this);
    rtnBttn.setOnClickListener(this);
    sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE);
    chk=sp.getString("USERNAME", "");
    if(chk.length()!=0){
        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE); 

        i=new Intent(this,AccessApp.class);
        startActivity(i);      
    }

}

public void onClick(View arg0) {
    user=rName.getText().toString();
    pass=rPwd.getText().toString();
    if(arg0==regBttn){

        if((user.length()!=0))
        {
            if((pass.length()!=0))
            {

        sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE);
        Editor myEditor=sp.edit();
        myEditor.putString("USERNAME", user);
        myEditor.putString("PASSWORD", pass);
        myEditor.commit();
        Toast.makeText(this, "Registration is successfull",10000).show();
        i=new Intent(this,AccessApp.class);
        startActivity(i);
        }
        else
         {
          Toast.makeText(this, "Please Enter password", 10000).show();  
         }
         }
        else{
            Toast.makeText(this,"Please Enter Username",10000).show();
         }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:31:04.267

您不能使用 == 运算符比较 Button 对象。相反，请尝试使用：

```
if(arg0.getId()==R.id.login_button){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:02:16.017

导致问题的问题如下

登录：

```
 sp=this.getSharedPreferences("Register", MODE_WORLD_READABLE); /* change "Register" to "AccessApp" */ 
```

登记：

```
 sp=getSharedPreferences("AccessApp",MODE_WORLD_WRITEABLE); 
```

# perl - 使所需的脚本使用来自另一个所需脚本的变量

> ID：12517745
> 
> 赞同：2
> 
> 时间：2012-09-20T17:28:24.270
> 
> 标签：perl, scope, require

我有两个模块：test1 和 test2，我需要依次运行它们的子程序。他们需要修改相同的变量 $var 并且外部脚本需要打印最终结果。不幸的是，这不起作用，并且似乎与此[SO Question](https://stackoverflow.com/questions/7542120/perl-how-to-make-variables-from-requiring-script-available-in-required-script)非常相似。

```
#test1.pm
use strict;
package test1;
my $var;
sub step1 {
  $var = "Hello";
}
1;

#test2.pm
use strict;
package test2;
my $var;
sub step1 {
    $var = $var." World!\n";
}
1;

#execTests.pl
use strict;
require test1;
require test2;
&test1::step1;
&test2::step1;
print $test2::var; 
```

如何使 $var 包含在两个必需包的相同范围内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:59:43.930

AFAIK不可能有两个变量总是共享相同的值。以下是一些可以帮助您的想法：

### 包变量：

```
{
   package test1;
   our $var;
   sub step1 {$var = "Hello"}
}
{
  package test2;
  our $var;
  sub step1 {$var .= " World!\n"}
}

test1::step1();
$test2::var = $test1::var;
test2::step1();

print $test2::var; 
```

评语：丑

### 参考：

```
{
  package test1;
  our $varref;
  sub init {
    my ($ref) = @_;
    $varref = $ref;
  }
  sub step1 {$$varref = "Hello"}
}
{
  package test2;
  our $varref;
  sub init {
    my ($ref) = @_;
    $varref = $ref;
  }
  sub step1 {$$varref .= " World!\n"}
}

my $var = "";
test1::init(\$var);
test2::init(\$var);

test1::step1();
test2::step1();

print $var; 
```

评论：更好，但需要更多代码。

### 一个额外的共享模块：

```
{
  package test::shared;
  our $var;
}
{
  package test1;
  sub step1 {$test::shared::var = "Hello"}
}
{
  package test2;
  sub step1 {$test::shared::var .= " World!\n"}
}

test1::step1();
test2::step2();
print $test::shared::var; 
```

评论：有一些优点。

### 显式状态

```
{
  package test1;
  sub step1 {
    my $state = @_;
    $state->{var} = "Hello";
    return $state;  # superfluous, but helps understanding
  }
}
{
  package test2;
  sub step1 {
    my $state = @_;
    $state->{var} .= " World!\n";
    return $state;  # superfluous, but helps understanding
  }
}

my $state = {};

$state = test1::step1($state);  # equiv: test1::step1($state), because of references
$state = test2::step1($state);

print $state->{var}; 
```

评论：这几乎是面向对象的编程。我更喜欢这种模式，因为它明确说明了何时给出共享。在多线程和重入方面，显式状态可以轻松扩展您的应用程序。

成本：明确性。冗长的语法。

好处：可重入，通过明确性清晰思路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:33:07.557

有了明显的免责声明，即这是***BAD BAD BAD DESIGN***，您可以简单地使用 glob：

```
==> exec.pl <==
#!/usr/bin/perl
use strict;
use warnings;
# You can omit this line, but there will be a warning about $My::Var being used only once
$My::Var = undef;
require 's1.pl';
require 's2.pl';
print $My::Var . "\n";

==> s1.pl <==
$My::Var = "Hello";

==> s2.pl <==
$My::Var .= "World"; 
```

Glob 基本上是包存储中的条目。包变量和子程序存在于包存储中；存储条目称为 glob。

[http://perldoc.perl.org/perlguts.html#Stashes-and-Globs](http://perldoc.perl.org/perlguts.html#Stashes-and-Globs)

stash 和 glob 的相对简单性以及操作它们的容易性是我认为 Perl 非常酷的原因之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:07:20.720

主要问题是声明的变量`my`不是包变量，不能通过使用包名完全限定它来访问。但是，即使您通过 using 声明包变量`our`，您仍然可以使用`test1.pm`并`execTests,pl`引用`$test1::var`while`test2.pm`正在使用`$test2::var`

我建议您改用主程序本地的变量，并将其传递给两个步骤进行修改

像这样的东西（测试和工作）

**测试1.pm**

```
use strict;
use warnings;

package test1;

use parent 'Exporter';
our @EXPORT = qw/step1/;

sub step1 {
  $_[0] = "Hello";
}

1; 
```

**测试2.pm**

```
use strict;
use warnings;

package test2;

use parent 'Exporter';
our @EXPORT = qw/step2/;

sub step2 {
    $_[0] .= " World!\n";
}

1; 
```

**执行测试.pl**

```
use strict;
use warnings;

use test1;
use test2;

my $var;

step1($var);
step2($var);

print $var; 
```

**输出**

```
Hello World! 
```

# html - HTML image centered in a division for mobile perspectives

> ID：12517746
> 
> 赞同：0
> 
> 时间：2012-09-20T17:28:29.823
> 
> 标签：html, css

since 6 hours I'm trying to produce the following output on my different mobile devices: ![enter image description here](../Images/75b5039aa487160268b96a85b0f6bca5.png)

As you can guess there are two different pictures: The background of a joystick and the joystick itself that should be draggable.

Whatever I try: It looks different on other devices or if I turn my device or something.. What I wish to achieve: The picture like you see it should have a width of 70%. That seems to work.. but I can't place my stick exactly into the middle.

I was trying with images, divisons with backgrounds, percentage-values, absolute and relative positions but now its time for me to ask some guys that could know how to do it.

I have tested to much code to post here but please give me any advices.

# jquery - 为什么我的 $.ajax() 数据没有传递给我的 .cfc

> ID：12517748
> 
> 赞同：1
> 
> 时间：2012-09-20T17:28:36.587
> 
> 标签：jquery, ajax, coldfusion, cfc

我正在根据从下拉列表中选择的值更新变量，但它不起作用。

在这个站点上，我有另一个运行良好的 CFC，但是这个完全拒绝发布数据。

**jQuery**

```
$('.accessLevel').change(function() {
    var theValue = $('.accessLevel').val();
    $.ajax({
        type: "post",
        url: "setLevel.cfc",
        data: {
            method: "theLevel",
            alevel: theValue
        },
        dataType: "json",
        success: function(){
            alert('YES');
        },
        error: function(){
            alert('NO');
        }
    });    
 }) 
```

**HTML**

```
<select name="accessLevel" class="accessLevel">
   <option value="">Select an Access Level</option>
   <option value="1">Level One</option>
   <option value="2">Level Two</option>
   <option value="3">Level Three</option>
</select> 
```

**氟氯化碳**

```
<cfcomponent>
  <cffunction name="theLevel" access="remote" returntype="any">
    <cfargument name="alevel" type="any" required="yes">
    <cfset SESSION.accessLevel = argument.alevel>
    <cfreturn />
  </cffunction>
</cfcomponent> 
```

该变量`theValue`正在被填充，它只是不会传递给 CFC，我不知道为什么！我得到的错误是这个..

```
Element ALEVEL is undefined in ARGUMENT. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:41:48.547

关于该错误，范围名称是`arguments`（带有 s），而不是`argument`. 尝试改变它，看看你是否通过了那个错误。

```
 <cfset SESSION.accessLevel = arguments.alevel> 
```

# php - is_dir 不适用于 for 循环

> ID：12517754
> 
> 赞同：0
> 
> 时间：2012-09-20T17:28:50.460
> 
> 标签：php, mysql

我想遍历文件夹中的图像和缩略图并将它们插入数据库。我想使用 is_dir 过滤掉目录。

我有：

```
$images = scandir('./images/all_comics/');
$thumbs = scandir('./images/thumbnails/');

for($x=0; $x<count($images); $x++) 
   {
    if(!is_dir($images[$x]))
       {
        //This shows all images WITHOUT directories
        echo $images[$x]; 

        //This is STILL adding images AND directories to database
        mysql_query("INSERT INTO images (imgpath, thumbpath) VALUES ('$images[$x]', '$thumbs[$x]')");
       }
   } 
```

我在 !is_dir, **echo $images[$x]**之后直接签入，它会根据需要回显所有没有目录的图像。

但是当我检查数据库中的插入时，我看到目录已添加为记录。为什么是这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:30:47.463

(Deleting old answer, as the issue was a typo)

`scandir` returns a list of files in a given directory. When you use `is_dir`, it's looking in the current directory for those files. I think what you need to do is:

```
if(!is_dir("./images/all_comics/" . $images[$x])) {
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:31:36.747

Your `echo` is executed inside `if`, but query does not:

```
for($x=0; $x<count($images); $x++) 
{
       if(!is_dir($images[$x]))
       {
        echo $images[$x]; //This shows all images WITHOUT directories
        mysql_query("INSERT INTO images (imgpath, thumbpath) VALUES ('$images[$x]', '$thumbs[$x]')");
       }
} 
```

Also, get rid of `mysql_*` for [PDO](http://php.net/manual/en/book.pdo.php), and consider [`glob`](http://php.net/manual/en/function.glob.php) as a way to browse for files excluding directories.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:50:09.920

您也可以使用 glob

```
$files = glob('./images/all_comics/*');
    foreach ($files as $file) {
        if (!is_dir($file)) {
            //Do Insert
        }
    } 
```

# html - CSS for pop-up picture and hovering

> ID：12517758
> 
> 赞同：4
> 
> 时间：2012-09-20T17:29:14.967
> 
> 标签：html, css, hover, thumbnails, blogger

I currently have CSS code with HTML written such that when you hover over one of the thumbnail images a larger picture pops up above the thumb-nailed images. I currently have two problems:

1.) How can I have the white space above the thumbnails default to the first thumbnail's picture

2.) How can I get the pictures to "stay up" after they have been hovered on such that they will only go away unless another thumbnail is hovered on. Even if the mouse enters white space the last hovered image should still be displayed.

My website can be found here with the image displayer at the top [www.ignitionspeed.com](http://www.ignitionspeed.com) Also a good example of what I am looking for if it is unclear can be found here [autoblog.com](http://www.autoblog.com)

Here is the CSS I am using for this

```
<style type="text/css">

.thumbnail{
z-index: 0;
}

.thumbnail:hover{
background-color: transparent;
z-index: 50;
}

.thumbnail span{ /*CSS for enlarged image*/
position: absolute;
display: block; 
left: -1000px;
visibility: hidden;
color: red;
text-decoration: none;
}

.thumbnail span img{ /*CSS for enlarged image*/
border-width: 0;
padding: 2px;
}

.thumbnail:hover span{ /*CSS for enlarged image on hover*/
visibility: visible;
top: 10px;
left: 13px; /*position where enlarged image should offset horizontally */
overflow:hidden;
}

</style> 
```

And here is the HTML

```
<a class="thumbnail" href="http://www.ignitionspeed.com/2012/09/lexus-lf-cc-concept.html"><img src="http://i.tinyuploads.com/25rBVR.jpg" width="117px" height="72px" border="0" /><span><img  src="http://i.tinyuploads.com/25rBVR.jpg" /><br /></span></a>

<a class="thumbnail" href="http://www.ignitionspeed.com/2012/09/2009-bmw-m3-review-test-drive.html" ><img src="http://i.tinyuploads.com/IGoDa8.jpg" width="117px" height="72px" border="0" /><span><img src="http://i.tinyuploads.com/IGoDa8.jpg" /><br /></span></a>

<a class="thumbnail" href="http://www.ignitionspeed.com/2012/09/2013-audi-s6-giant-leap-in-performance.html"><img src="http://i.tinyuploads.com/aSwPv9.jpg" width="117px" height="72px" border="0" /><span><img src="http://i.tinyuploads.com/aSwPv9.jpg" /><br /></span></a>

<a class="thumbnail" href="http://www.ignitionspeed.com/2012/09/2012-lexus-lfa.html"><img src="http://i.tinyuploads.com/Gu1Pey.jpg" width="117px" height="72px" border="0" /><span><img src="http://i.tinyuploads.com/Gu1Pey.jpg" /><br /></span></a>

<a class="thumbnail" href="http://www.ignitionspeed.com/2012/08/acura-nsx-future-is-already-here.html"><img src="http://i.tinyuploads.com/VJo9IP.jpg" width="117px" height="72px" border="0" /><span><img src="http://i.tinyuploads.com/VJo9IP.jpg" /><br /></span></a>

<a class="thumbnail" href="http://www.ignitionspeed.com/2012/09/2012-jaguar-xkr-s.html"><img src="http://i.tinyuploads.com/REiZ6c.jpg" width="117px" height="72px" border="0" /><span><img src="http://i.tinyuploads.com/REiZ6c.jpg" /><br /></span></a> 
```

Thanks so much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:57:17.500

试试这个[纯 CSS](http://cssdemos.tupence.co.uk/image-popup.htm)，如果你想使用 jQuery 使用[这个](http://css-tricks.com/a-really-nice-way-to-handle-popup-information/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:18:52.793

如果您熟悉 Javascript 和 jQuery，我不会。但是你必须使用Javascript来达到你想要的效果。

实现它的最简单方法是在使用 jQuery 将鼠标悬停在元素上时在元素上添加一个类。

```
$('.thumbnail').mouseover(function() {
    //Removing any active hover class
    $('.thumbnail').removeClass('hover');
    //Add class for the thumbnail that was just hovered
    $(this).addClass('hover');
}); 
```

然后，在您的 CSS 中，只需修改两个选择器：

```
.thumbnail:hover, .thumbnail.hover {}
.thumbnail:hover span, .thumbnail.hover span {} 
```

# jpa - How to store persistence.xml with other configuration files

> ID：12517759
> 
> 赞同：1
> 
> 时间：2012-09-20T17:29:14.577
> 
> 标签：jpa, eclipselink, persistence.xml, persistence-unit

I'm using `EclipseLink` as my `JPA` implementation. Our project has a directory where we keep all of our config files, and I would like to store my persistence.xml file in the config directory, but cannot find any way to tell `createEntityManagerFactory` to look there to find the persistence-unit.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:42:23.943

它不会直接回答您的问题，但是如果您想这样做以将应用程序的配置外部化，我认为最好的方法是将所有可配置属性（例如连接设置等）提取到单独的属性文件中并将它们`createEntityManagerFactory()`作为 a传递给`Map`（另请注意，您可以通过`persistence.xml`这种方式覆盖属性）。

然后您`persistence.xml`将只包含不可配置的设置（例如持久类列表等），即在不重建整个应用程序的情况下更改这些属性是没有意义的，您可以将其保留在默认位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T18:02:39.123

您可以通过使用 spring-orm LocalContainerEntityManagerFactory 来实现这一点（如果您不想使用，则不需要使用所有 spring 上下文内容）。

```
LocalContainerEntityManagerFactory lcemf = new LocalContainerEntityManagerFactory ();
lcemf.setPersistenceUnitName("some_pu");
lcemf.setpersistenceXmlLocation("file:/data/config.xml");
EntityManagerFactory emf = lcemf.createNativeEntityManagerFactory(); 
```

您也可以一劳永逸地忽略 xml，并使用 LocalContainerEntityManagerFactory 在代码中配置所有内容（请参阅 setPackagesToScan）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:35:26.150

`persistence.xml`必须始终存在于`META-INF`类路径的目录中。有关不同类型的 java 应用程序的 META-INF 应该在哪里出现的更多信息，请参见[此处](http://docs.oracle.com/cd/E19575-01/819-3669/bnbrj/index.html)。

> 持久性单元由 persistence.xml 配置文件定义。META-INF 目录包含persistence.xml 的JAR 文件或目录称为持久单元的根。持久化单元的范围由持久化单元的根决定。
> 
> 每个持久性单元必须用一个对持久性单元的范围唯一的名称来标识。
> 
> 持久单元可以打包为 WAR 或 EJB JAR 文件的一部分，也可以打包为 JAR 文件，然后可以将其包含在 WAR 或 EAR 文件中。
> 
> 如果将持久单元打包为 EJB JAR 文件中的一组类，persistence.xml 应该放在 EJB JAR 的 META-INF 目录中。
> 
> 如果将持久性单元打包为 WAR 文件中的一组类，persistence.xml 应该位于 WAR 文件的 WEB-INF/classes/META-INF 目录中。

# ios - AVAssetWriter finishWriting fails on iOS 6 Simulator

> ID：12517760
> 
> 赞同：15
> 
> 时间：2012-09-20T17:29:16.710
> 
> 标签：ios, avfoundation, avassetwriter

It seems that finishWriting is broken on iOS 6 simulator - it hangs forever. It's now deprecated and replaced by the new finishWritingWithCompletionHandler: - which also never calls the handler.

On real devices running iOS 6, this works just fine as it always did. Also in previous iOS simulators it works just fine. Seems like a bug in iOS 6 simulator.

Anyone else experiencing this or can prove me wrong?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T20:45:27.590

我也遇到了这个问题，然后意识到我没有调用 endSessionAtSourceTime: 在启动一个之后。这解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:08:58.337

好的，在模拟器上找到了解决方法。

看起来 stop 使视频处理线程死锁，因此解决方法是在主线程中调用 stop ：

```
//      in iOS6 Simulator this blocks the video processing thread call back in UI thread.
//       BOOL stop = [assetWriter finishWriting];
[self performSelectorOnMainThread:@selector(stopInOtherThread) withObject:nil]; 

-(void)stopInOtherThread{
    //Stop doesn't block in MainThread
    BOOL stop = [assetWriter finishWriting];
    NSLog(@" assetWriter finishWriting :%d",stop);
} 
```

此解决方法似乎不适用于 finishWritingWithCompletionHandler

我会尝试看看是否可以在 Apple 上提出错误。

# c - assigning value to member of struct via pointer

> ID：12517761
> 
> 赞同：1
> 
> 时间：2012-09-20T17:29:19.617
> 
> 标签：c, pointers, structure

I',m probably doing some incredibly stupid mistake, but i cannot find it, it is simple that:

```
int main()
{

typedef struct drzemka typ;
struct drzemka {     
int strukcje;
};
typ *d;
d->strukcje = 1;
} 
```

and it is not working

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:31:39.897

Right now your pointer is not set to a valid piece of memory. You need to allocated this memory for the `struct`:

```
#include <stdlib.h>
/* ... */
typ *d = malloc(sizeof(typ)); 
```

As with any memory you allocate, remember to free it after you're done:

```
free(d); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T17:32:17.323

你需要分配`d`一些有效的东西。你必须给它一些记忆。现在它是一个`typ`没有指向任何东西的类型的指针。然后你试图尊重什么。

将堆中的一些内存分配给您的指针并按原样使用它：

```
typ *d = malloc(sizeof(typ)); 
d->strukcje = 1;
free(d); 
```

或者在堆栈上放置一个静态副本：

```
typ d;
d.strukcje = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:34:57.663

正确的代码是：

```
struct drzemka {     
int strukcje;
};
typedef struct drzemka typ;

int main()
{
   typ d;
   d.strukcje = 1;
} 
```

或者

```
int main()
{
 typ* d = (typ *) malloc(sizeof(typ));
 d->strukcje = 1;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:36:51.610

尝试这个：

```
typedef struct drzemka {     
    int strukcje;
}typ;

int main() {
    typ d;
    typ * p = &d;
    p->strukcje = 1;
    printf("The value of strukcje is %d",p->strukcje);
} 
```

# java - Java BinarySearch

> ID：12517764
> 
> 赞同：5
> 
> 时间：2012-09-20T17:29:38.947
> 
> 标签：java

Can I get some help please? I have tried many methods to get this to work i got the array sorted and to print but after that my binary search function doesnt want to run and give me right results. It always gives me -1\. Any help?

```
public class BinarySearch {
public static final int NOT_FOUND = -1;
public static int binarySearch(double[] a, double key) {
    int low = 0;
    int high = a.length -1;
    int mid;
    while (low<=high) {
        mid = (low+high) /2;
        if (mid > key) 
            high = mid -1;
        else if (mid < key) 
            low = mid +1;
        else 
            return mid;
    }
    return NOT_FOUND;
}
public static void main(String[] args) {
    double key = 10.5, index;
    double a[] ={10,5,4,10.5,30.5};
    int i;
    int l = a.length;
    int j;
    System.out.println("The array currently looks like");
    for (i=0; i<a.length; i++)
        System.out.println(a[i]);
    System.out.println("The array after sorting looks like");
    for (j=1; j < l; j++) {
        for (i=0; i < l-j; i++) {
            if (a[i] > a[i+1]) {
                double temp = a[i];
                a[i] = a[i+1];
                a[i+1] = temp;
            }
        }
    }
    for (i=0;i < l;i++) {
        System.out.println(a[i]);
    }
    System.out.println("Found " + key + " at " + binarySearch(double a[], key));
}   
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T17:44:35.003

您实际上并没有与数组值进行比较。在

```
while (low <= high) {
      mid = (low + high) / 2;
      if (mid > key) {
          high = mid - 1;
      } else if (mid < key) {
          low = mid + 1;
      } else {
          return mid;
      }
} 
```

而是使用此部分

```
 while (low <= high) {
        mid = (low + high) / 2;
        if (a[mid] > key) {
            high = mid - 1;
        } else if (a[mid] < key) {
            low = mid + 1;
        } else {
            return mid;
        }
    } 
```

您找到索引是正确的，但您所做的是您只是将索引号与您的键进行比较，这显然是不正确的。当您编写时，`a[mid]`您实际上会将您的密钥与 index 处的数字进行比较`mid`。

最后一行代码也给出了编译错误，应该是

```
System.out.println("Found " + key + " at " + binarySearch(a, key)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:44:30.330

```
public static double binarySearch(double[] a, double key) {

    if (a.length == 0) {
      return -1;
    }
    int low = 0;
    int high = a.length-1;

    while(low <= high) {
      int middle = (low+high) /2; 
      if (b> a[middle]){
        low = middle +1;
      } else if (b< a[middle]){
        high = middle -1;
      } else { // The element has been found
        return a[middle]; 
      }
    }
    return -1;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:38:11.123

这里

```
 if (mid > key) 
        high = mid -1;
    else if (mid < key) 
        low = mid +1;
    else 
        return mid; 
```

您正在将索引与数组中的值（键）进行比较。您应该将其与`a[mid]`

和，

```
System.out.println("Found " + key + " at " + binarySearch(double a[], key)); 
```

应该

```
System.out.println("Found " + key + " at " + binarySearch(a, key)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-10T00:55:19.827

```
int binarySearch(int list[], int lowIndex, int highIndex, int find)
    {
        if (highIndex>=lowIndex)
        {
            int mid = lowIndex + (highIndex - lowIndex)/2;

            // If the element is present at the
            // middle itself
            if (list[mid] == find)
                return mid;

            // If element is smaller than mid, then
            // it can only be present in left subarray
            if (list[mid] > find)
                return binarySearch(list, lowIndex, mid-1, find);

            // Else the element can only be present
            // in right subarray
            return binarySearch(list, mid+1, highIndex, find);
        }

        // We reach here when element is not present
        //  in array
        return -1;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T04:46:06.593

这是一个没有堆的解决方案。同样的事情可以在数组中完成。如果我们需要找到“k”个最大的数字，我们需要一个大小为“k”的数组，其中填充了来自主数据源的前 k 个项目。现在，继续读取一个项目，如果它有位置，则将其放入结果数组中。

```
public static void largestkNumbers() {
    int k = 4;    // find 4 largest numbers
    int[] arr = {4,90,7,10,-5,34,98,1,2};
    int[] result = new int[k];

    //initial formation of elems
    for (int i = 0; i < k; ++i) {
      result[i] = arr[i];
    }
    Arrays.sort(result);

    for ( int i = k; i < arr.length; ++i ) {
      int index = binarySearch(result, arr[i]);
      if (index > 0) {
        // insert arr[i] at result[index] and remove result[0]
        insertInBetweenArray(result, index, arr[i]);
      }
    }
  }

  public static void insertInBetweenArray(int[] arr, int index, int num) {
    // insert num at arr[index] and remove arr[0]
    for ( int i = 0 ; i < index; ++i ) {
      arr[i] = arr[i+1];
    }
    arr[index-1] = num;
  }

  public static int binarySearch(int[] arr, int num) {

    int lo = 0;
    int hi = arr.length - 1;
    int mid = -1;

    while( lo <= hi ) {
      mid = (lo+hi)/2;
      if ( arr[mid] > num ) {
        hi = mid-1;
      } else if ( arr[mid] < num ) {
        lo = mid+1;
      } else {
        return mid;
      }
    }
    return mid;
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T21:00:21.173

我不知何故发现迭代版本不太容易阅读，递归使它变得又好又容易:-)

```
public class BinarySearch {

    private static int binarySearchMain(int key, int[] arr, int start, int end) {
        int middle = (end-start+1)/2 + start; //get index of the middle element of a particular array portion

        if (arr[middle] == key) {
            return middle;
        }

        if (key < arr[middle] && middle > 0) {
            return binarySearchMain(key, arr, start, middle-1); //recurse lower half
        }

        if (key > arr[middle] && middle < arr.length-1) {
            return binarySearchMain(key, arr, middle+1, end); //recurse higher half
        }

        return Integer.MAX_VALUE; 
    }

    public static int binarySearch(int key, int[] arr) { //entry point here
        return binarySearchMain(key, arr, 0, arr.length-1);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-26T18:34:54.620

```
int BinSearch(int[] array, int size, int value)
{
    if(size == 0) return -1;
    if(array[size-1] == value) return size-1;
    if(array[0] == value) return 0;
    if(size % 2 == 0) {
        if(array[size-1] == value) return size-1;
        BinSearch(array,size-1,value);
    }
    else
    {
        if(array[size/2] == value) return (size/2);
        else if(array[size/2] > value) return BinSearch(array, (size/2)+1, value);
    else if(array[size/2] < value) return (size/2)+BinSearch(array+size/2, size/2, value);
    }
} 
```

或者

[数组中的二分查找](https://stackoverflow.com/questions/249392/binary-search-in-array)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-24T17:44:37.443

```
/**
HOPE YOU LIKE IT
A.K.A Binary Search
Take number array of 10 elements, input a number a check whether the number 
is present:
**/
package array;
import java.io.InputStreamReader;
import java.io.BufferedReader;
import java.io.IOException;
class BinaryS
{
    public static void main(String args[]) throws IOException
    {       
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));      
    System.out.print("Enter a number: ");
    int n=Integer.parseInt(br.readLine());
    int a[]={10,20,30,40,50,60,70,80,90,100};
    int upper=a.length-1,lower=0,mid;
    boolean found=false;
    int pos=0;
    while(lower<=upper)
    {
        mid=(upper+lower)/2;
        if(n<a[mid])upper=mid-1;
        else if(n>a[mid])lower=mid+1;
        else
        {
            found=true;
            pos=mid;
            break;
        }
    }
    if(found)System.out.println(n+" found at index "+pos);
    else System.out.println(n+" not found in array");
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-05T22:59:10.383

```
 /**
     * Find whether 67 is a prime no
     * Domain consists 25 of prime numbers
     * Binary Search
     */

    int primes[] = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97};

    int min = 0,
            mid,
            max = primes.length,
            key = 67,
            count= 0;

    boolean isFound = false;

    while (!isFound) {
        if (count < 6) {
          mid = (min + max) / 2;
            if (primes[mid] == key) {
                isFound = true;
                System.out.println("Found prime at: " + mid);
            } else if (primes[mid] < key) {
                min = mid + 1; 
                isFound = false;
            } else if (primes[mid] > key) { 
                max = mid - 1; 
                isFound = false;
            }
            count++;

        } else {
            System.out.println("No such number");
            isFound = true;
        }

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-02T08:09:45.933

好吧，我知道我会在很久以后发布这个答案。**但在我看来，首先检查边界条件**
总是更好。 这将使您的**算法更有效**。

 ****```
 public static int binarySearch(int[] array, int element){
    if(array == null || array.length == 0){  // validate array
        return -1;
    }else if(element<array[0] || element > array[array.length-1]){ // validate value our of range that to be search 
        return -1;
    }else if(element == array[0]){  // if element present at very first element of array
        return 0;
    }else if(element == array[array.length-1]){ // if element present at very last element of array
        return array.length-1;
    }

    int start = 0;
    int end = array.length-1;

    while (start<=end){
        int midIndex = start + ((end-start)/2);   // calculate midIndex
        if(element < array[midIndex]){  // focus on left side of midIndex
            end = midIndex-1;
        }else if(element > array[midIndex]){// focus on right side of midIndex
            start = midIndex+1;
        }else {
            return midIndex;   // You are in luck :)
        }
    }
    return -1; // better luck next time :(
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-25T15:23:50.960

```
static int binarySearchAlgorithm() {
        // Array should be in sorted order. Mandatory requirement
        int[] a = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        int lowIndex = 0;
        int valueToFind = 8;
        int highIndex = a.length - 1;

        while (lowIndex <= highIndex) {
            //Finding the midIndex;
            int midIndex = (highIndex + lowIndex) / 2;
            // Checking if midIndex value of array contains the value to be find.
            if (a[midIndex] == valueToFind) {
                return midIndex;
            } 
            // Checking the mid Index value is less than the value to be find.
            else if (a[midIndex] < valueToFind) {
                // If Yes, changing the lowIndex value to midIndex value + 1;
                lowIndex = midIndex + 1;
            } else if (a[midIndex] > valueToFind) {
                // If Yes, changing the highIndex value to midIndex value - 1;
                highIndex = midIndex - 1;
            } else {
                return -1;
            }
        }
        return -1;
    } 
```****

# java - Scan and connect to Wifi networks using Java

> ID：12517765
> 
> 赞同：10
> 
> 时间：2012-09-20T17:29:42.520
> 
> 标签：java, network-programming, wifi, network-scan

Need to write a client, which can scan the available WIFI networks and connects to best known using Java. This might be desktop client which does this job. Any pointers would be helpful and appreciate your response.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:36:55.073

您将不得不依赖 JNI 库，因为您无法直接在 Java 中访问无线设备。

用于 Windows 的[jWlanScan 。](http://sourceforge.net/projects/jwlanscan/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T00:01:54.130

我建议你对你的操作系统采取行动。并针对每个支持的操作系统尝试分析连接无线设备所需的命令行结果。这非常简单，您不必使用 JNI 库。

例如对于 windows，您可以看到[这里介绍的](http://www.lovemytool.com/blog/2010/05/wifi-diagnostics-from-windows-7-or-vista-command-prompt-by-tony-fortunato.html)，[这里](http://www.hanselman.com/blog/HowToConnectToAWirelessWIFINetworkFromTheCommandLineInWindows7.aspx)和[这里](http://www.nextofwindows.com/how-to-manage-a-wireless-wifi-network-from-the-command-line-in-windows-7/)，对于 linux，它仍然更容易。

# c# - Illegal characters in path. C# LoadControl

> ID：12517767
> 
> 赞同：0
> 
> 时间：2012-09-20T17:29:46.137
> 
> 标签：c#, sitecore, sitecore6

I am new to C# and working on a project with sitecore

i just added a aspx page with the

**.aspx file**:

```
 <sc:sublayout runat="server" renderingid="{7ACDFB04-E9C9-4AC4-BDC6-6F3FF0862199}" path="/layouts/FSB/Header.ascx" id="HeaderFixed"></sc:sublayout>
    <sc:placeholder runat="server" key="layout" id="templatePage"></sc:placeholder>
    <sc:sublayout runat="server" renderingid="{621A56F6-9948-4661-9F33-3AFEF1DE698D}" path="/layouts/FSB/Footer.ascx" id="FooterFixed"></sc:sublayout> 
```

.cs file

```
 Control templateControl = LoadControl("templateLandingPages/free_template.ascx");
 Control placeHolderControl = Page.FindControl("templatePage"); 
```

**Error in browser shows for line no 16:**

```
 Illegal characters in path.

    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

    Exception Details: System.ArgumentException: Illegal characters in path.

Source Error: 

Line 14:    protected void Page_Load(object sender, EventArgs e)
Line 15:    {
Line 16:     Control templateControl = LoadControl("templateLandingPages\free_template.ascx");
Line 17:     Control placeHolderControl = Page.FindControl("templatePage"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T17:37:19.847

简单的问题，你如何使用你的`\`. `\\`您需要在斜线 ( )上加倍。第一个充当第二个的转义字符。

```
Control templateControl = LoadControl("templateLandingPages\\free_template.ascx"); 
```

如评论所述，您还可以使用：

```
Control templateControl = LoadControl(@"templateLandingPages\free_template.ascx"); 
```

查看[这篇](http://www.kowitz.net/archive/2007/03/06/the-c-string-literal)关于字符串文字的文章以及为什么要使用一种表示法而不是另一种表示法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:42:00.447

放在`@`路径字符串的开头，例如`@"templateLandingPages\free_template.ascx"`

**代码：**

```
Control templateControl = LoadControl(@"templateLandingPages/free_template.ascx"); 
```

前缀“@”允许使用关键字作为标识符，这在与其他编程语言交互时很有用。字符 @ 实际上不是标识符的一部分，因此标识符在其他语言中可能被视为普通标识符，没有前缀。带有@ 前缀的标识符称为逐字标识符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:43:35.740

C# 支持两种形式的字符串文字：常规字符串文字和逐字字符串文字。

[http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

您需要使用转义符或使用逐字字符串。

```
var escaped = "templateLandingPages\\free_template.ascx";
var verbatim = @"templateLandingPages\free_template.ascx"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:38:57.960

在 C# 中使用路径时，您需要使用`\\`而不是`\`. 它转义了反斜杠，因此它只是一个文字`\`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-31T04:27:32.833

我可以解决“路径中的非法字符”问题的一种方法是在“ Initialize() ”函数调用中注释所有成员变量实例化，然后一一取消注释以找出问题所在。希望这可以帮助

# ios - 检查是否存在“MyMethodName()”类型的 C 样式函数？

> ID：12517768
> 
> 赞同：7
> 
> 时间：2012-09-20T17:29:46.747
> 
> 标签：ios, c

这个问题是针对 iOS 版本兼容性的。

我知道如何检查函数是否存在，如果它是使用 respondsToSelector 的典型 Objective-C 风格方法。即对于诸如以下的方法：

```
- (void) someMethod:(NSInteger)someParameter; 
```

您可以使用：

```
if ([self respondsToSelector:@selector(someMethod:someParameter)]) {
    //do something
} 
```

但是 C 风格的函数呢？如何检查是否存在如下所示的函数：

```
void CStyleFunctionName(FoundationTypeRef parameter); 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T18:13:31.560

Xcode（至少从 4.3 开始）支持弱链接，您可以执行以下操作来查看是否可以调用 C 函数：

```
// UIGraphicsBeginImageContextWithOptions() was introduced in iOS 4 in order to support the Retina displays.
if (UIGraphicsBeginImageContextWithOptions != NULL) {
    UIGraphicsBeginImageContextWithOptions(...);
}
else {
    UIGraphicsBeginImageContext();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T17:33:01.377

动态加载：

```
#include <dlfcn.h>

void *fptr = dlsym(NULL, "CStyleFunctionName");
if (fptr != NULL) {
    // existent
} else {
    // nonexistent
} 
```

另请注意，在 C 中，没有方法，只有函数。

# java - android service with repeating thread in background with partial wake lock

> ID：12517769
> 
> 赞同：4
> 
> 时间：2012-09-20T17:29:52.957
> 
> 标签：java, android, multithreading, service, wakelock

I have a thread running in a service of an app that reads out data from a page that has been logged into with a webview before. That thread is working fine.

Now i would like to repeat this thread periodically, say once minute, even while the phone is asleep/screen off. I know i would probably have to go about it with wake_lock but i have no clue how.

I have 3 problems here. I tried to repeat the thread with while(true)sleep(60000).... but that stops the thread after the screen of the phone goes off. Is there a better way?

Then i would also like to compare the string count to zero. Meaning if string count is greater than zero do xxx.

Any help is very appreciated!

```
Thread downloadThread = new Thread() {                     
          public void run() {                                    
                Document doc;      
                doc = null;

            try {                 
                final String url = "https://xxx.xxx.xx";

                // -- Android Cookie part here --
                CookieSyncManager.getInstance().sync();
                CookieManager cm = CookieManager.getInstance();

                String cookie = cm.getCookie(url);           

                // Jsoup uses cookies as "name/value pairs"
                doc = Jsoup.connect("https://xxx.xxx.xx").cookie(url, cookie).get();

                Elements elements = doc.select("span.tabCount");
                String count = elements.first().text();

                Log.d(TAG, "wart"+(count));
                Log.d(TAG, "wartcookiedate:"+(cookie));

            } catch (IOException e) {                          
                e.printStackTrace();                           
            }                                                  
        }                                                      
    };                                                         
    downloadThread.start(); 
```

Here is my second try with the code below. When the user is already logged in it workds perfectly. My problem now is that on start of the app the string "count" will be returned null since the user is not logged in yet. Therefore an exception will be thrown which stops the entire scheduled Task Executor. Is there a way to just restart it if "count" is null?

```
scheduleTaskExecutor= Executors.newScheduledThreadPool(5);

    // This schedule a task to run every 10 seconds:

    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
      public void run() {

          Document doc;      
            doc = null;

            try {                 
                final String url = "https://xxx.xxx.xx";

                // -- Android Cookie part here --
                CookieSyncManager.getInstance().sync();
                CookieManager cm = CookieManager.getInstance();

                String cookie = cm.getCookie(url); // returns cookie for url

                // Jsoup uses cookies as "name/value pairs"
                doc = Jsoup.connect("https://xxx.xxx.xx").cookie(url, cookie).get();

                Elements elements = doc.select("span.tabCount");
                String count = elements.first().text();

                Log.d(TAG, "wart"+(count));
                Log.d(TAG, "wartcookiedate:"+(cookie));

            } catch (IOException e) {                          
                e.printStackTrace();                           
            }                                     

      }
    }, 0, 10, TimeUnit.SECONDS); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:32:06.917

不要使用带有`while`+的显式线程`sleep`来模拟计时器。这是丑陋和不必要的。还有更优雅的方法可以每隔 x 个时间单位自动安排任务，例如[ScheduledThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)。

# android - Monitoring data usage android devices

> ID：12517775
> 
> 赞同：0
> 
> 时间：2012-09-20T17:30:35.927
> 
> 标签：android

I'd like to write an app which would give the **total amount of data downloaded** over a **period of time**.

Should I have a *service running* in the *background* which keeps track of the data usage or just an *app calling the appropriate api's* when opened would do?

Which all api's could I use for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:32:44.980

我认为你应该使用[`NetworkStats`](http://developer.android.com/reference/android/net/TrafficStats.html)自 API 8 以来可用的。

# machine-learning - Candidate Elimination, a special use case

> ID：12517777
> 
> 赞同：0
> 
> 时间：2012-09-20T17:30:47.120
> 
> 标签：machine-learning

So I'm understanding and learning the candidate elimination process, to find the hypothesis space. I am a little confused with running the CEl on the following example:

We have a cage in which two birds can live in the same cage. Each bird is described with

*   sex (Male, Female)
*   Color (Red, Green, Blue)
*   Origin ( US, Brazil, Russia, Australia, China)

After some iterations I have the **S** Specific hypothesis and **G** General Hypothesis as follows:

**S** << Male, Red, ?>, < Female, Blue, China>>

**G** << ?,?,?,?>, < ?,?,?,?>>

Now if the training example is: **Negative i.e. can't live together** << Female, Red, US>, < Female, Blue, Australia>>

What will be the new **G** General hypothesis?

Let me write what I believe could be the answers:

**New G**

**Either:** << Male, ?, ?>, < ?, ?, ?>> && << ?, ?, ?>, < ?, ?, China>>

**Or:** << Male, ?, ?>, < ?, ?, ?>> && << ?, ?, ?>, < ?, ?, China>> && << ?, ?, ?>, < ?, ?, Russia>> && << ?, ?, ?>, < ?, ?, Brazil>> && << ?, ?, ?>, < ?, ?, US>>

I think 2nd one is correct, because its a general hypothesis and it should be general to include the rest of three countries.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:12:13.697

第二个是不正确的，因为根据候选消除算法，对于**G的每个最小特化，** **S**中必须有一个更具体的假设。**但是您添加了三个专业化，其中S**中的单个假设并不更具体（**S**要求第二只鸟来自中国，而您添加到**G**的最后三个专业化需要其他特定国家）。

第一个版本似乎是正确的。

请注意，这里有一个假设，即假设中两只鸟的顺序很重要。

# parsing - Combined unparser/parser generator

> ID：12517782
> 
> 赞同：17
> 
> 时间：2012-09-20T17:31:19.657
> 
> 标签：parsing, grammar

Is there a parser generator that also implements the inverse direction, i.e. unparsing domain objects (a.k.a. pretty-printing) from the same grammar specification? As far as I know, ANTLR does not support this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-29T12:29:30.880

看看[Invertible syntax descriptions: Unifying parsing and pretty printing](http://www.informatik.uni-marburg.de/~rendel/unparse/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-10T22:30:58.823

我已经用 Java 和 Kotlin 实现了一组可逆解析器组合器。解析器几乎是用 LL-1 风格编写的，它提供了解析和打印方法，而后者提供了漂亮的打印机。

你可以在这里找到项目：[https](https://github.com/searles/parsing) ://github.com/searles/parsing 这是一个教程：[https](https://github.com/searles/parsing/blob/master/tutorial.md) ://github.com/searles/parsing/blob/master/tutorial.md 这是一个解析器/漂亮的打印机对于数学表达式：[https ://github.com/searles/parsing/blob/master/src/main/java/at/searles/demo/DemoInvert.kt](https://github.com/searles/parsing/blob/master/src/main/java/at/searles/demo/DemoInvert.kt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-29T15:48:26.867

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)正是这样做的（并为分析/转换代码提供了许多额外的支持）。它通过用附加属性装饰语言语法来做到这一点，产生所谓的属性语法。我们使用特殊的 DSL 来编写这些规则，以方便编写。

了解 DMS 直接基于语法生成树会有所帮助。

每个 DMS 语法规则都与所谓的[“漂亮打印”规则](http://www.semdesigns.com/Products/DMS/DMSPrettyPrinters.html?site=StackOverflow)配对。每个漂亮打印规则都描述了如何“漂亮打印”由其相应语法规则识别的句法元素和子元素。漂亮打印过程本质上是水平或垂直制造或组合矩形文本框（带有可选的缩进），叶子生成包含叶子文字值（关键字、运算符、标识符、常量等）的单位高度框。

例如，可以编写以下 DMS 语法规则和匹配的漂亮打印规则：

```
statement = 'for' '(' assignment ';' assignment ';' conditional_expression ')'
            '{' sequence_of_statements '}' ;
<<PrettyPrinter>>: 
    { V(H('for','(',assignment[1],';','assignment[2],';',conditional_expression,')'),
        H('{', I(sequence_of_statements)),
        '}'); 
```

这将解析以下内容：

```
 for ( i=x*2;
       i--;  i>-2*x ) {  a[x]+=3; 
      b[x]=a[x]-1; } 
```

（对语句和表达式使用额外的语法规则）和漂亮打印它（对那些额外的语法规则使用额外的漂亮打印规则）如下：

```
 for (i=x*2;i--;i>-2*x)
    {   a[x]+=3;
        b[x]=a[x]-1;
    } 
```

DMS 还捕获评论，将它们附加到 AST 节点，并在输出时重新生成它们。该实现有点奇特，因为大多数解析器不处理注释，但使用起来很容易，甚至是“免费的”；评论将自动插入到它们原始位置的漂亮打印结果中。

DMS 还可以在“保真”模式下打印。在这种形式中，它试图保留标记的形状（例如，数字基数、标识符字符大写、使用了哪个关键字拼写）和已解析标记的列偏移量（到行中）。这将导致重新生成原始文本（或非常接近以至于您认为它没有不同的内容）。

[我的 SO answer on Compiling an AST back to source code](https://stackoverflow.com/questions/5832412/compiling-an-ast-back-to-source-code/5834775#5834775)提供了有关漂亮打印机必须做什么的更多详细信息。DMS 清晰地解决了所有这些主题。

此功能已被 DMS 用于大约 40 多种真实语言，包括完整的 IBM COBOL、PL/SQL、Java 1.8、C# 5.0、C（许多方言）和 C++14。

通过编写一组足够有趣的漂亮打印机规则，您可以构建[像 JavaDoc 这样的东西，扩展为包含超链接源代码](http://www.semdesigns.com/Products/Formatters/JavaBrowser.html?site=StackOverflow)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-03T18:34:44.120

有几个解析器生成器包含一个解解析器的实现。其中之一是用于上下文无关语法的[Nearley解析器生成器。](https://github.com/Hardmath123/nearley/)

也可以使用[明确的子句语法](https://en.wikipedia.org/wiki/Definite_clause_grammar)来实现源代码的[双向转换](https://en.wikipedia.org/wiki/Bidirectional_transformation)。在 SWI-Prolog 中，谓词可以将输入文本转换为解析树，反之亦然。[`phrase/2`](http://www.swi-prolog.org/pldoc/doc_for?object=phrase/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:58:12.850

一般情况下是不可能的。

是什么让印刷品漂亮？打印件很漂亮，如果空格、制表符或换行符位于这些位置，这会使打印件看起来很漂亮。

但是大多数语法忽略空格，因为在大多数语言中空格并不重要。有像 Python 这样的例外，但总的来说，使用空格作为语法是否是一个好主意的问题仍然存在争议。因此大多数语法不使用空格作为语法。

如果抽象语法树不包含空格，因为解析器已经把它们扔掉了，没有生成器可以使用它们来漂亮地打印 AST。

# ios - play multi-instrument MIDI file

> ID：12517786
> 
> 赞同：1
> 
> 时间：2012-09-20T17:31:37.117
> 
> 标签：ios, core-audio, coremidi

I have been working with the `MusicPlayer` and `MusicSequence` classes to play MIDI files. However, I am wondering how to specify instruments for different channels. What is the `MusicPlayer`'s default response to program change events? Can I tell the `MusicPlayer` to use certain samplers for certain channels? Or is the only way to set my own function as a MIDI Endpoint, and then handle the playing of notes myself using `MusicDeviceMIDIEvent()` to specify the sampler?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:01:26.763

您可以为 MusicSequence 中的不同轨道指定不同的乐器。（[MusicTrack API](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicTrack_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40009332)）我不认为 MusicPlayer 对频道本身做任何事情。您可以指定在加载 MIDI 文件时将通道转换为轨道。

> 音乐序列加载标志
> 
> 用于配置 MusicSequenceFileLoad 和 MusicSequenceFileLoadData 函数行为的标志。
> 
> 枚举 { kMusicSequenceLoadSMF_ChannelsToTracks = (1 << 0) }; typedef UInt32 MusicSequenceLoadFlags;
> 
> 常数
> 
> kMusicSequenceLoadSMF_ChannelsToTracks
> 
> ```
> If this flag is set the resultant Sequence will contain a tempo track, 1 track for each MIDI Channel that is found in the SMF, 1 track 
> ```
> 
> 对于 SysEx 或 MetaEvents - 这将是 LoadSMFWithFlags 调用之后序列中的最后一个轨道。
> 
> ```
> Available in OS X v10.3 and later.
> 
> Declared in MusicPlayer.h. 
> ```

# javascript - jQuery AJAX 函数在 IE 中无法正常运行？

> ID：12517794
> 
> 赞同：0
> 
> 时间：2012-09-20T17:32:18.647
> 
> 标签：javascript, jquery, ajax, post

```
function createLead(values) {
    var url = "/api/v1/createlead/?apikey=XXXX-XXXX-XXXX-XXXX";
    //debugger;
    $.ajax({
        type : "POST",
        contentType : "application/x-www-form-urlencoded; charset=UTF-8",
        url : url,
        data : values,
        success: function (result) {
            result = $.parseJSON(result);
            if (result.redirect) {

                $(window).trigger('googleEvent' , 'regFailure');
                window.location.href = values.returnUrl;
                return;
            }
            else if (result.status === "OK" ) {

                if (result.data.isPixelToBeFired){
                    $(window).trigger('googleEvent' , 'pixelFire'); 
                }
                else {
                    $(window).trigger('googleEvent', 'noPixelFire');
                }

                olp_sLeadId = result.data.leadId;
                olp_sPathId = result.data.pathId;
                $(window).trigger('googleEvent', 'regSuccess');
                window.location = "path.html?curPathId=" + olp_sPathId
                        + "&curLeadId=" + olp_sLeadId; // Enter the path
            } 

            else {
                // console.log('FAIL' , result , values);
                $(window).trigger('googleEvent' , 'regFailue');
                window.location.href = values.returnUrl;
                return;
            }
        },
        statusCode: {
            404: function() {
                $(window).trigger('googleEvent' , 'createLead404');
                window.location.href = values.returnUrl;
                //console.log('Something is seriously wrong');
                return false;
            }
        },
        failure: function (result) {
            $(window).trigger('googleEvent' , 'createLeadFailure');
            window.location.href = values.returnUrl;
            //console.log('Something is seriously wrong');
            return false;
        }
    });
} 
```

我已经在这里摸不着头脑了，所有版本的 IE 似乎都有这个调用的问题。这里有一些重要的信息：

1.  values 是一个数据对象，我可以验证它是否有数据。

2.  所有窗口 .trigger 函数都用于 Google 分析跟踪，它们用于代码的其他几个部分，不会出现问题。

3.  在 IE 中，该函数的间距似乎很奇怪，所有其他函数都正确排列，但是这个似乎奇怪地对齐，让我想知道是不是解析不正确？

4.  success 函数似乎没有运行，failure 和 statusCode 函数被完全忽略。这让我想知道这是否不是 jQuery 方法的问题，但它们在代码的其他地方起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:35:18.063

估计缓存有问题。IE自动缓存了ajax请求。要克服这个问题`cache: false`，请在 $.ajax 代码中设置选项。

**例子 ：**

```
$.ajax({
    type : "POST",
    contentType : "application/x-www-form-urlencoded; charset=UTF-8",
    url : url,
    data : values,
    cache : false,
    // existing stuff
}); 
```

希望这会有所帮助！

# jquery - Rails：JQuery 在控制台中执行，而不是在 js 文件中

> ID：12517803
> 
> 赞同：0
> 
> 时间：2012-09-20T17:32:59.397
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我正在开发一个用户可以发布的应用程序。我想这样做，以便当帖子的 id 在 url 中散列时，帖子会闪烁。为此，这是我的代码：

```
function getHash() {
  var hash = window.location.hash;
  return hash; 
}

if (getHash()) { 
    $(getHash()).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300);
} 
```

现在，我知道如果我放一个`alert('in the if statement');`，这段代码是 b/c 运行的，只要 url 中有一个哈希值，它就可以工作。我也知道这部分有效：

```
 $(getHash()).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300); 
```

因为如果我在控制台中运行它，帖子就会闪烁。出了什么问题不允许这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:07:15.193

试试你的代码

```
function getHash() {
  var hash = window.location.hash;
  return hash; 
}

$(document).ready(function(){
  if (getHash()) { 
    $(getHash()).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300);
  }
}) 
```

我认为因为脚本执行时您的元素不存在。当准备好整个文档并且所有元素都在适当的位置时，文档就绪工作。由于一切似乎都很好，我认为这会奏效

谢谢

# javascript - 调用 javascript 对象的问题

> ID：12517809
> 
> 赞同：1
> 
> 时间：2012-09-20T17:33:26.383
> 
> 标签：javascript, oop, variables, object

我对 javascript 对象还很陌生，我可以对调用变量进行一些澄清。我正在尝试在 bar 函数中调用测试变量。这可能吗？如果是这样，我将如何正确地做到这一点？

```
var foo = {

    bar: function()
    {
        var test = 'Hello World';
    },

    speak: function()
    {
        // Log the Variable from above ^^
        console.log(foo.bar.test);
    }

}; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:34:51.720

不; 局部变量在其声明函数之外是不可见的。

相反，您需要向对象添加一个属性：

```
foo.test = ...; 
```

你也可以设置`foo.bar.test`；这将为函数对象添加一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:51:23.513

当您在函数内部声明一个局部变量时，您将其添加到`VariableEnvironment`函数中（这与外部函数本质上没有区别`LexicalEnvironment`，但 ECMA 将它们区分开来）。该函数具有对`LexicalEnvironment`声明它的作用域的引用（在我们的例子中，是*全局对象*或*window*）。当您尝试*从函数内部*引用变量时，引擎首先在函数的本机中搜索它`VariableEnvironment`，然后，如果未找到，则在外部`LexicalEnvironment`. 在您的情况下，您尝试*从函数外部*引用一个变量，因此引擎一开始就在全局对象的范围内搜索它。

因此，要完成您的任务，您应该在外部 scrope 中声明变量，然后在函数内部分配它，或者您应该向对象添加一个新属性，然后引用它：

```
var foo = {
    test: 'Hello world',
    speak: function()
    {
        console.log(this.test);
    }

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:40:20.780

为了以这种方式访问​​变量 test，您需要将其定义为对象的属性，如下所示：

```
var foo = {
    test: 'Hello World, before calling bar()',
    bar: function()
    {
        this.test = 'Hello World';
    },
    speak: function()
    {
        // Log the Variable from above ^^
        console.log(this.test);
    }
};
console.log(foo.test); 
```

我还使用关键字 this 更改了访问对象 foo 的函数。它通常会起作用，但有时在 javascript 中跟踪您的范围可能会很棘手，所以请尽量注意这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:38:52.330

您可以通过在调用 bar 方法时返回它来访问测试。

```
var foo = {

    bar: function()
    {
        var test = 'Hello World';
       return test;
    },

    speak: function()
    {
        // Log the Variable from above ^^
        console.log(foo.bar());
    }

}; 
```

# list - EventReceiver 未在 SharePoint 列表上触发

> ID：12517812
> 
> 赞同：1
> 
> 时间：2012-09-20T17:33:37.337
> 
> 标签：list, sharepoint, event-handling, event-receiver

我正在尝试为博客站点（用于帖子列表）创建一个 EventReceiver，但在使其正常工作时遇到了一些麻烦。我想将 Created By 列更改为 Anonymous。基本上，我在控制台应用程序中完成了整个工作，但是，它只会在执行控制台应用程序时更改 Created By 列名。

每当将新项目添加到列表中时，我都需要它来更改创建者。我的代码在下面....如何修改它以在 EventReceiver 项目中使用？？？因为我已经告诉 EventReceiver 项目我希望 EventReceiver 附加到的 URL，所以我不确定我可以从这段代码中删除什么，现在它什么都不做，没有错误，也没有更改 Created By 列时我调试。

```
 using (SPSite site = new SPSite("http://test-sharepoint/subsite/")) 
   { 
       using (SPWeb web = site.OpenWeb()) 
       { 
           SPList list = web.Lists["Posts"]; 
           SPListItemCollection listItemCollection = list.Items; 

           foreach (SPListItem listItem in listItemCollection) 
           { 
               SPFieldUserValue userName = new SPFieldUserValue(web, 22, "Anonymous");
                listItem["Author"] = userName; 
               listItem["Editor"] = userName; 

               listItem.Update(); 
           } 
           web.Update(); 
       } 
    } 
```

编辑：代码在 ItemAdded 方法中

编辑＃2：这是尝试相同的代码，除了没有循环并使用properties.ListItem，这是我在Event Recevier项目中的尝试，但没有运气。它只是不会更改 Created By 字段或任何与此相关的字段（我也尝试了 Title）

```
 SPSite site = new SPSite("http://test-sharepoint/subsite/");
       SPWeb web = site.OpenWeb();
       SPFieldUserValue userName = new SPFieldUserValue(web, 22, "Anonymous");

       properties.ListItem["Author"] = userName;
       properties.ListItem["Editor"] = userName;
       properties.ListItem.Update(); 
```

*根据我的理解，SPFieldUserValue 将获取用户或 SharePoint 用户组（权限），因此在我的代码中，22 获取我想要的 SharePoint 用户组，“匿名”是该组中的用户......

* * *

编辑#3：更多进展，此代码适用于列表，但不适用于帖子或评论列表，因为它不会更改“创建者”字段。难道是因为所有项目的批准/拒绝？？？无论是批准还是等待它仍然不会显示匿名，但就像我提到的那样，它在不同的列表中工作正常。

```
 public override void ItemAdded(SPItemEventProperties properties)
   {
       base.ItemAdded(properties);

       SPSite site = new SPSite("http://test-sharepoint/hr/blog/"); //SPContext.Current.Site;
       SPWeb web = site.OpenWeb();
       SPFieldUserValue userName = new SPFieldUserValue(web,22,"Anonymous");

       SPListItem currentItem = properties.ListItem;
       //currentItem["Title"] = userName;  //DateTime.Now.ToString();
       currentItem["Author"] = userName;
       currentItem["Editor"] = userName;
       currentItem.SystemUpdate();
   } 
```

* * *

**编辑＃4：好吧，我发现了我的问题，在创建项目时，我选择了自定义列表作为要附加的列表，但我需要选择帖子或评论，现在上面的代码可以工作了！！！

但是现在我有另一个问题，博客上的所有帖子都首先提交以供批准......因此，事件接收器似乎不适用于管理员以外的用户。它适用于管理员帐户，我可以直接发布帖子或评论，但对于具有贡献权限的用户，其帖子已提交以供批准仍会在“管理帖子”页面上显示他们的姓名......我该怎么办？有任何想法吗？**

有效的代码：

```
 public override void ItemAdded(SPItemEventProperties properties)
   {
       base.ItemAdded(properties);

       SPSite site = new SPSite("http://test-sharepoint/hr/blog/"); //SPContext.Current.Site;
       SPWeb web = site.OpenWeb();
       SPFieldUserValue userName = new SPFieldUserValue(web, 23, "Anonymous");

       SPListItem currentItem = properties.ListItem;
       currentItem["Author"] = userName;
       currentItem["Editor"] = userName;
       currentItem.SystemUpdate();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:01:06.197

针对编辑 #4，在使用 SharePoint 时，如果代码在由管理员帐户执行时有效，但在由“普通”帐户执行时无效，则可能是权限问题。

请参阅问题[SharePoint/WSS：修改“创建者”字段的](https://stackoverflow.com/q/1014215/1414000)[答案？](https://stackoverflow.com/a/1051359/1414000)有关修改 Author 字段的 SPItemEventReceiver 的示例。

注意：许多 SharePoint 开发人员建议不要`RunWithElevatedPrivileges`使用模拟，而是建议使用模拟。请参阅我对[在哪种情况下使用带有超级用户令牌的 SPSecurity.RunWithElevatedPrivileges](https://sharepoint.stackexchange.com/q/36301)的问题的[回答？](https://sharepoint.stackexchange.com/a/62193)更多细节。

# c# - 对于下拉菜单，模态弹出确定按钮无法按预期工作

> ID：12517816
> 
> 赞同：0
> 
> 时间：2012-09-20T17:33:46.637
> 
> 标签：c#, javascript, asp.net, jquery-ui, asp.net-ajax

代码背后：

```
 private void Page_Load(object sender, System.EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            ddlLanguage.SelectedValue = Thread.CurrentThread.CurrentCulture.Name;
        }

    }

    protected void ddlLanguage_SelectedIndexChanged(object sender, EventArgs e)
    {

        if (ddlLanguage.SelectedValue == "es-ES")
        {
            mdlPopup.Show();
        }
        //Sets the cookie that is to be used by Global.asax
        HttpCookie cookie = new HttpCookie("CultureInfo");
        cookie.Value = ddlLanguage.SelectedValue;
        Response.Cookies.Add(cookie);

        //Set the culture and reload the page for immediate effect. 
        //Future effects are handled by Global.asax
        Thread.CurrentThread.CurrentCulture = new CultureInfo(ddlLanguage.SelectedValue);
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(ddlLanguage.SelectedValue);
        //Server.Transfer(Request.Path);
    }

    protected void OKButton_Click(object sender, EventArgs e)
    {
        Server.Transfer(Request.Path);
    } 
```

ASPX 页面：

```
 <asp:DropDownList ID="ddlLanguage" class="langpnl" runat="server" AutoPostBack="True"
      OnSelectedIndexChanged="ddlLanguage_SelectedIndexChanged">
   <asp:ListItem Value="en-US">Eng</asp:ListItem>
   <asp:ListItem Value="es-ES">Esp</asp:ListItem>
 </asp:DropDownList>
<ajaxToolkit:ModalPopupExtender ID="mdlPopup" runat="server" TargetControlID="testhidden"
   PopupControlID="pnlPopup" OkControlID="OKButton" />
<asp:Panel ID="pnlPopup" runat="server" Width="500px" Style="display: none">
   All content may not be in Spanish.
<asp:Button ID="OKButton" runat="server" Text="OK" OnClick="OKButton_Click" />
</asp:Panel>
<asp:HiddenField ID="testhidden" runat="server" /> 
```

我正在尝试根据下拉框中的选择设置语言。但是，如果用户选择西班牙语，我想显示一个带有 msg 的弹出模式，一旦按下按钮 OK，我想回发整个页面。目前我能够显示弹出窗口，但页面从未刷新，因此语言仍然没有改变。在后面的代码中，如果我从 OK 按钮中删除 server.transfer 并将其放在 SelectIndexChange 中，则页面回发正在工作，但没有弹出消息。我认为页面在弹出窗口执行后得到回发，因此它永远不会显示。 ..请需要一些帮助，自从过去 3 天以来，我一直在头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:41:46.900

在该面板中定义另一个按钮......并在他的 onclick 事件中做任何你想做的事情。所以你会有一个回发。

OKButton 单击事件... OKButton_Click 不会触发，只要您在 modalpopup 中分配他...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:05:05.807

```
 if (ddlLanguage.SelectedValue == "es-ES")
        {
            mdlPopup.Show();
        }
  else
        {
            Server.Transfer(Request.Path); 
        } 
```

并从 Modalpopup 中删除了 OK 按钮..终于看到了我的期望..

# javascript - 如何在 JavaScript 中监听 Ctrl-P 按键？

> ID：12517819
> 
> 赞同：29
> 
> 时间：2012-09-20T17:33:56.947
> 
> 标签：javascript, jquery, browser, cross-browser

我想禁用某些网页的打印。如何将跨浏览器热键（Cntrl + P）连接到按下热键时将触发的javascript？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-20T17:53:45.557

您可以通过捕获事件来覆盖。

```
jQuery(document).bind("keyup keydown", function(e){
    if(e.ctrlKey && e.keyCode == 80){
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T18:05:52.587

[Mousetrap](http://www.github.com/ccampbell/mousetrap)也是一个很棒的图书馆

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:46:01.643

试试[键盘快捷键库](http://www.openjs.com/scripts/events/keyboard_shortcuts/)。

让我们看看源代码并了解它是如何工作的，而不是仅仅复制粘贴它。

你可以[在这里查看源代码](http://www.openjs.com/scripts/events/keyboard_shortcuts/shortcut.js)

# gmail - 通过电子邮件创建 Google 任务

> ID：12517823
> 
> 赞同：1
> 
> 时间：2012-09-20T17:34:15.910
> 
> 标签：gmail, google-apps-script, task

我正在寻找使用过滤器从我的 Google 帐户中的电子邮件创建任务的方法。我已经阅读了本教程，它就像一个魅力：[http ://www.pipetree.com/qmacro/blog/2011/10/automated-email-to-task-mechanism-with-google-apps-script/](http://www.pipetree.com/qmacro/blog/2011/10/automated-email-to-task-mechanism-with-google-apps-script/)

唯一不好的是脚本创建了一个带有消息主题的任务，这对我来说并不是真正的描述性，因为它们是自动消息，而且它们都有相同的主题。我希望任务标题是电子邮件正文的特定行，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:40:42.710

是的，基本上你会得到消息体并从中提取你需要的东西。我不确定您的电子邮件的结构，但是您需要其中的一些内容来告诉您任务标题的开始和结束，一旦您告诉我它是什么，我就可以将其合并到代码中。现在，这就是您将正文设置为标题的方式。

```
var message     = thread.getMessages()[0]; // get first message
var messagebody = message.getBody(); 
var body_array  = messagebody.split('Sender:'); 
var taskTitle   = ''; 

if( body_array.length < 2 ) 
    taskTitle = 'No title specified in email after Sender:'; 
else 
{
    var text    = body_array[1]; 
    taskTitle   = text.split('<br />')[0].trim();  

} 
```

# powershell - 我可以动态创建psake任务吗？

> ID：12517824
> 
> 赞同：2
> 
> 时间：2012-09-20T17:34:20.160
> 
> 标签：powershell, psake

是否可以根据配置动态创建 psake 任务（就像 rake 一样）？例如，给定一个环境哈希表：

```
environments {
 $dev = 'server1',
 $uat= 'server2'
} 
```

我想要任务 deploy.db.dev、deploy.db.uat、deploy.app.dev、deploy.app.uat 等，其中为任务模板提供了适当的服务器名称？

谢谢

# c++ - C::B Projet，非必要文件 SVN

> ID：12517827
> 
> 赞同：0
> 
> 时间：2012-09-20T17:34:34.200
> 
> 标签：c++, svn, codeblocks

我目前正在与一些合作伙伴一起开发软件。我们正在使用 Codeblocks 来管理项目，并且可能会使用 SVN 作为版本控制工具。

但是，由于我已经使用 SVN 处理带有乳胶的报告，我知道有些文件是完全没有必要的。

因此，我的问题有点宽泛。您认为我们应该如何继续使用 SVN 存储库？

我们应该将 C::B 项目目录直接放在 SVN 存储库中吗？（我假设我们在项目选项方面会遇到一些问题，因为每个人的库都不在同一个地方）我们是否应该只将源文件放在目录中并将源文件“链接”到 SVN 存储库之外的代码块项目? 此解决方案可能允许其他 IDE 与相同的源文件一起使用，对吗？

此致，

Al_th

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:38:26.617

我认为你不应该坚持使用一个 IDE。更好的解决方案是创建通用构建系统，如 Makefile 或 Cmake。使用 MakeFile，您可以轻松地将项目导入所有体面的 IDE。（其中更多甚至支持从远程存储库下载项目）

使用通用构建系统，您可以将其与自己喜欢的 IDE 甚至编译器一起使用。

我还会考虑将 C::B 更改为 kdevelop，它完全支持 SVN/GIT/Cmake/Make。还有对 c++11x 的支持。

它与程序员的关系不是比 c++ stackoverflow 更相关吗？

# c# - WPF 功能区菜单选项卡永久可见

> ID：12517835
> 
> 赞同：1
> 
> 时间：2012-09-20T17:35:04.723
> 
> 标签：c#, .net, wpf, ribbon

我正在使用功能区菜单在 WPF 中编写应用程序，应用程序的部分要求是我需要一个命令选项卡，但此选项卡应始终可见，并且取决于活动文档，我将启用/禁用适当的命令。

我的问题是，有谁知道拆分功能区菜单的方法，以便命令选项卡始终在菜单右侧可见？

我敢肯定有一个简单的答案，我只是还没有找到它。

感谢和问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:35:46.000

它不在功能区的功能范围内。为什么不构建一个有 2 列的网格，并在左侧窗格中使用功能区，在右侧使用自定义控件？然后，您可以设置自定义控件的样式以匹配功能区。

您可以从 CodePlex 获取功能区的源代码，以便获得确切的样式。

这可能不是您想听到的，但我认为这将是理想的。

# iphone - 开发 iPhone 和 iPad 通用应用程序时如何组织变量和方法定义

> ID：12517836
> 
> 赞同：1
> 
> 时间：2012-09-20T17:35:05.667
> 
> 标签：iphone, ios, ipad, preprocessor, ios-universal-app

我正在寻找一个预处理器或类似的东西，它将帮助我根据设备类型 iPhone 或 iPad 定义变量或方法。我在这里发现了一些相关的东西：[Preprocessor-IF doesn't work](https://stackoverflow.com/questions/7027168/preprocessor-if-doesnt-work) - 建议在哪里使用

```
#ifdef UI_USER_INTERFACE_IDIOM
    #define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#else
    #define IS_IPAD false
#endif

#define WIDTH (IS_IPAD ? 768 : 320)
#define HEIGHT (IS_IPAD ? 1024 : 480) 
```

但假设我在接口中定义了要根据设备单独使用的变量

```
Class1 *object1; //specific for iPhone
Class2 *object2; //specific for iPad 
```

或者根据设备使用的方法，我如何区分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:42:53.610

您可以在任何类中使用尽可能多的对象，主要是在何时分配这些类，您将编写代码，调用方法，具体取决于设备。

所以这没有任何意义，你可以在类中拥有两个对象，并在头文件中声明。并在`dealloc`调用`release`这些对象之前进行检查。

# php - 修改htaccess文件，使IP以特定模式开头的用户只能注册，但每个人都可以查看该站点

> ID：12517843
> 
> 赞同：0
> 
> 时间：2012-09-20T17:35:27.960
> 
> 标签：php, mysql, .htaccess

我制作了一个用户可以注册的 php mysql 网站。我想修改 htaccess 文件（或任何 php 代码来执行此操作），以便只有以 ip xyzv（其中 v 变化）开头的连接可以注册到该站点，但每个人都可以查看该站点的公共数据。由于我在共享的大学网络中，大多数用户将通过无线连接访问该网站。[这是注册地址][1]

```
http://localhost/register.php 
```

现在它不在服务器上，所以你可以参考这个网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:47:05.573

在PHP中，可以使用`$_SERVER['REMOTE_ADDR']`获取当前用户的IP地址。只需将此值与您的“批准”地址进行比较。例如，如果您想检查用户的 IP 是否以 开头`10.10`，您可以这样做：

```
$allowed = (strpos($_SERVER['REMOTE_ADDR'], "10.10") == 0); 
```

但是，我强烈反对使用基于 IP 的访问控制，除非您确定“有效”IP 地址*不会*改变。由于多个用户可能具有相同的 IP 地址（由于[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)）并且 IP 地址通常可以重新分配，因此该解决方案对于任何现实世界的系统*都不是很安全。*（电子邮件令牌、批准的注册请求或注册码会好得多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:56:02.723

If you want to use htaccess, you add this to the htaccess file in your document root, preferably above any other rewrite rules you may have in there:

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^x\.y\.z\.
RewriteRule ^register\.php - [L,F] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:47:17.823

我建议您`$_SERVER['REMOTE_ADDR']`改为检查 PHP 的值。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:47:33.727

指定您的注册页面（作为目录或位置），您可以将其锁定：

```
order deny,allow
allow from x.y.z. 
```

# sql - 系统管理员无法从 .net 应用程序中查看表

> ID：12517847
> 
> 赞同：1
> 
> 时间：2012-09-20T17:35:35.993
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个已被授予 sysadmin 的登录名，并且可以在 sql management studio 中的查询中选择/插入/更新/删除。

我有一个使用相同登录名的第三方 .net 应用程序并收到以下错误：

> 无效的对象名称“表名”。

我可以将查询更改为`select 'blah'`，它将成功返回结果。

有谁知道为什么我不能从我的第三方应用程序运行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:56:33.537

在花了几个小时之后，我发现这是由于嵌套事务。我在 .net 应用程序和 sql 文件中启动了一个事务。

# jquery - 发布 IEnumerable 在由 jQuery 构造的 MVC 3 控制器中

> ID：12517853
> 
> 赞同：0
> 
> 时间：2012-09-20T17:35:49.210
> 
> 标签：jquery, arrays, asp.net-mvc-3, object, http-post

我有一个带有 viewModel 的控制器，其中包含一个 IEnumerable，并且我有一个由 jQuery 控件构造的表单。

当我回发到控件时，我想收集收集到 IEnumerable 中的所有隐藏字段行。

这是一个示例视图模型：

```
public class MyViewModel
{
    public IEnumerable<SelectListItem> GeneratedItems { get; set; }
} 
```

在 jQuery 中，我在带有隐藏字段的表中创建行，如下所示：

```
<input class="hiddenValue" name="' + controlName + '_guid" type="hidden" value="' + guid + '"></input> 
```

然后在控制器的 POST 方法中，我收到发布的模型。

这是我的问题......如果我接受 IEnumerabe，那么所有的 guid 都会被正确收集。但我还没有设法让它返回一个 IEnumberable。

我尝试添加两个隐藏字段并尝试这样的事情：

```
<input class="hiddenValue" name="' + controlName + '.Text" type="hidden" value="' + text + '"></input>

<input class="hiddenValue" name="' + controlName + '.Value" type="hidden" value="' + guid + '"></input> 
```

但这会返回一个空数组。

有人可以帮我安排隐藏字段，以便它给我一个我想要的对象的列表吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:56:16.290

Look at **Darin Dimitrov** example it shows how it must be done in MVC. ([example](https://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0)) Main idea is that all inputs will contain index and then model binder fill your `IEnumerable` automatically.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:48:41.567

为此，您的后期控制器应该是这样的：

```
[HttpPost]
public ActionResult YourAction(YourViewModel obj, FormCollection FC)
{
    List<SelectListItem> Items = new List<SelectListItem>();

    foreach(var key in FC.AllKeys.Where(K => K.EndsWith(".Text"))
    {
        SelectListItem SI = new SelectListItem { Text = key , Value = FC[key] };
        Items.Add(SI);
    }

    obj.GeneratedItems = Items.AsEnumerable();

    return View(obj);

} 
```

希望这会有所帮助！

# jquery - 在 jQuery 中使用 live 的问题 - Uncaught RangeError: Maximum call stack size exceeded

> ID：12517854
> 
> 赞同：0
> 
> 时间：2012-09-20T17:35:50.780
> 
> 标签：jquery

我有一个`div`动态填充的`paragraph tags`（它们最初不存在）。我希望每个新动态添加`<p>`的内容在被点击时执行某些操作——即附加一个点击事件。

我知道如何做到这一点的唯一方法是使用`live`and `delegate`。

```
$('div.fromSelected p').live('click', function () {
    $("&ltp>" + $(this).text().substr(3) + '&lt/p>').appendTo('.fromOptionList');
    //$(this).parent().remove();
    $("#auto_box").getNiceScroll().resize();
    $(this).remove();
    $("#auto_box2").getNiceScroll().resize();
}); 
```

但是，`click`在对动态添加的段落调用事件一段时间后，我收到以下错误：

**未捕获的 RangeError：超出最大调用堆栈大小**

什么可以规避这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:39:27.033

尝试`.on`改用：

```
$("div.fromSelected").on('click', 'p', function () {... 
```

# javascript - 音乐连续播放着名字

> ID：12517857
> 
> 赞同：9
> 
> 时间：2012-09-20T17:36:12.550
> 
> 标签：javascript, jquery, html, html5-audio, audio-player

实际上，我能够使用框架在整个页面中连续播放音乐而无需重新加载（我知道连续播放音乐不是一个好主意，但客户确实要求这样做，所以我别无选择）。这是我用于播放音乐的框架：

```
<body>
    <div id="player">
    <audio id="audio" controls="controls" autoplay="autoplay" loop="loop" style="width:150px;">
      <source src="martnalia05namoracomigo.ogg" type="audio/ogg" />
      <source src="martnalia05namoracomigo.mp3" type="audio/mp3" />
      <embed src="martnalia05namoracomigo.mp3" hidden="true" loop="TRUE" autostart="TRUE"></embed>
    </audio>
    </div>
</body> 
```

我插入这首音乐只是为了测试，我想知道是否可以制作一个播放列表，是否可以通过其中的链接和跳过音乐的按钮通知当前正在播放的音乐，因为例子：

```
[player]
| button previous  | button to play/pause | button next
| name of the music (link to the page of the Album) | 
[end of player] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:16:57.413

您可能想要制作一个小型媒体播放器，如果是这样的话，有很多现成的脚本可以帮助您实现这一目标。（谷歌是你的朋友）。

如果您决定自己做这件事，这是我的想法，它们可能会帮助您朝着正确的方向前进。

```
var data = [{audiourl: "filename1.mp3", artisturl:"http://example.com",name:"Song name"},
            {audiourl: "filename1.mp3", artisturl:"http://example.com",name:"Song name"}]; 
```

某种数据结构来存储曲目的详细信息。

```
var audio = document.getElementById("audio");
audio.addEventListener('ended', playNext); 
```

最后是某种处理曲目切换的功能

```
var currentTrack = 0;
function playNext(options){
    currentTrack++;
    if (currentTrack > data.length){
        currentTrack = 0;
    }
    var audiosrc = document.getElementById('embed_element_id') // or some other selector method
    audiosrc.src = data[currentTrack].audiourl;
    audiosrc.play();
} 
```

我不完全确定 HTML5 音频规范，但我会假设它沿着这些思路。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:50:44.760

You're probably going to have to use a media player plugin. Try LeanBack Player:

[http://leanbackplayer.com/](http://leanbackplayer.com/) + [http://leanbackplayer.com/player_extensions.html](http://leanbackplayer.com/player_extensions.html) (XSPF Audio Playlist extension)

It's HTML5/CSS/JS with a Flash fallback option so you should be able to style it to suit your needs easily enough.

# javascript - JavaScript 倒计时

> ID：12517858
> 
> 赞同：0
> 
> 时间：2012-09-20T17:36:24.777
> 
> 标签：javascript, jquery, date, time, countdown

我正在使用[这个插件](http://keith-wood.name/countdown.html)进行倒计时。在他的例子中，他正在倒计时澳大利亚日

```
$(function () {
  var countdownDate = new Date();
  countdownDate = new Date(countdownDate.getFullYear() + 1, 1 - 1, 26);
  $('#countdown').countdown({until: countdownDate});
  $('#year').text(countdownDate.getFullYear());
}); 
```

我需要它倒计时到 2012 年 11 月 6 日星期二美国东部标准时间晚上 8 点，但我不确定如何自定义它。Date() 函数让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:41:07.697

上面显示的`Date`构造函数格式为`new Date(Year, Month, Day)`. 但是，请记住，`Month`参数是 0 索引的。这意味着一月是`0`，不是`1`。因此，要倒计时到 2012 年 11 月 6 日，您需要这样构建日期：

```
countdownDate = new Date(2012, 10, 6); 
```

你也可以考虑这样做：

```
countdownDate = new Date(2012, 11-1, 6); 
```

这与示例显示的类似。但这只是不必要地减慢速度，以便更清楚地了解您所指的月份。

此外，如果您构造一个`Date`不带参数的对象，它会为您提供当前日期。所以`new Date()`给你一个相当于“现在”的日期对象。在示例中，他们使用 (有效地) 来获取当前年份`(new Date()).getFullYear()`。然后他们将其加一并将其传递给一个新的`Date`构造函数，以获得“下一个”澳大利亚日之前的时间。

需要注意的是，澳大利亚国庆日的例子实际上有一个错误。如果现在是一月，那么这一年将不必要地增加，倒计时将显示直到下一年的澳大利亚日的时间。所以在这个例子中，倒计时永远不会低于 26 天。哎呀。:-)

**更新：**

要么你的问题得到了更新，要么我第一次错过了这个。看起来您想在美国东部标准时间晚上 8 点结束。使用数字日期构造函数实际上非常棘手。由于 JavaScript 在客户端运行并默认使用“本地时间”，因此您需要明确注意时区。您可以使用`setUTC`setter 的版本（例如`setUTCHours()`）来做到这一点，但这有点烦人并且需要几行代码。所以你最好的选择是使用 Date 的基于字符串的构造函数：

```
new Date("November 6, 2012 20:00:00 GMT -5:00") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:42:45.343

```
countdownDate = new Date(2012, 10, 6, 20, 0, 0, 0); 
```

或者

```
countdownDate = new Date("11/6/2012 8:00 PM") 
```

请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:45:23.937

您要使用的 Date() 构造函数调用将是以下之一：

```
new Date(dateString)
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

大豆，你可以

```
new Date("November 6, 2012 20:00:00 GMT -5:00") 
```

这样就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:49:49.717

这些行确定倒计时的日期：

```
var countdownDate = new Date();
countdownDate = new Date(countdownDate.getFullYear() + 1, 1 - 1, 26); 
```

这里的第一行创建了一个新的 JavaScript 日期对象。创建日期时，它默认为现在。

下一行使用以下结构将日期设置为特定时间点：

```
new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

我会一步一步来： 1\. **Year**它得到当前年份`countdownDate.getFullYear()`，加一个以使其成为明年 2\. 1 - 1 = 0，所以这是选择第一个月（一月） 3\. 26 是特定月份的第 26 天

要解决此问题，您可以使用字符串表示法将这两行替换为一行：

```
var countdownDate = new Date("November 6, 2012 20:00:00 EST"); 
```

# arrays - mongoDB数组分页

> ID：12517863
> 
> 赞同：0
> 
> 时间：2012-09-20T17:37:03.043
> 
> 标签：arrays, mongodb, pagination

我有一个评论集合，其中包含评论文本及其元数据。我喜欢评论文本数组中的分页。分页应该允许我获得“前 5 个”或“下一个 5”。在 mongoDB 中以良好的性能做到这一点的最佳方法是什么。

```
 { "_id" : ObjectId( "502c706ac2e6777781a593f6" ),
      "commentType":"loc",
      "commentList" : [ 
{ "commentText" : "HelloComment",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "2222222",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "3333333",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "44444444",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "5555555",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "6666666",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
    { "commentText" : "777777",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
    { "commentText" : "888888",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
    { "commentText" : "6666666",
  "commentTS" : Date( 1345165636344 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fd182d92b2a87f780c6bbe8" ) } }, 
{ "commentText" : "999999",
  "commentTS" : Date( 1345165668809 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fdeb271de26fd298262bb84" ) } }, 
{ "commentText" : "HelloComment",
  "commentTS" : Date( 1345749858601 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fdeb271de26fd298262bb84" ) } }, 
{ "commentText" : "NewTestforcomments",
  "commentTS" : Date( 1345750020526 ),
  "commentLoc" : { "commentlat" : 0,
    "commentlong" : 0 },
  "userInfo" : { "$ref" : "userProfile",
    "$id" : ObjectId( "4fdeb271de26fd298262bb84" ) } } ],
   } } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:51:21.570

你可以这样做`$slice`：

[http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)

这里还有一个[slice 的 JS 测试示例](https://github.com/mongodb/mongo/blob/master/jstests/core/slice1.js)。

所以, `findOne`, 结合`$slice`, 可能是要走的路。

如果没有有关您使用的语言的更多信息，我认为这是我能做到的最深入的。

# c++ - C++：结合私有全局变量和模板

> ID：12517866
> 
> 赞同：1
> 
> 时间：2012-09-20T17:37:30.080
> 
> 标签：c++, templates, global-variables

假设翻译单元中有一个全局变量。它是常量，但不是编译时常量（它使用具有非`constexpr`构造函数的对象进行初始化）。声明它是`static`因为它应该是翻译单元私有的。显然，该全局是在`.cpp`文件中定义的。但是，现在我已经在需要全局变量的文件中添加了一个方法模板。由于它是其他翻译单元将使用的方法，因此必须将其放入标题中。但是，一旦它在标头中，它就不能再访问全局变量。解决此问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:46:39.597

有，但有点棘手的方法来实现你的目标：

1.  该变量是私有的，仅对某些元素可用。
2.  您的函数模板可以访问它。

在标题中定义的类中使用私有静态变量，并使您的函数/类模板成为此类的朋友。

**你的文件.h**

```
class PrivateYourFileEntities {
private:
   static const int SomeVariable;
   // ... other variables and functions
   template <class T>
   friend class A;
   template <class T>
   friend void func();
   // the rest of friends follows
};

template <class T>
void A<T>::func() {
     int a = PrivateYourFileEntities::SomeVariable;
}

template <class T>
void func() {
     int a = PrivateYourFileEntities::SomeVariable;
} 
```

**你的文件.cpp**

```
const int PrivateYourFileEntities::SomeVariable = 7; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T17:45:22.287

将方法声明放入 .h 文件，将方法体放入 .cpp 文件，如：

.h 文件：

```
#include <iostream>

void myfunc1();
void myfunc2(); 
```

.cpp 文件：

```
#include "myheader.h"

static int myglobalvar=90;

    void myfunc1()
    {
      cout << myglobalvar << endl;
    }

    void myfunc2()
    {
      cout << "Oh yeah" << endl;
    } 
```

# jquery - 单个页面上的多个 Yii EJuiAutoCompleteFkField 小部件：如何为每个小部件分配唯一的 DOM id？

> ID：12517868
> 
> 赞同：1
> 
> 时间：2012-09-20T17:37:36.620
> 
> 标签：jquery, autocomplete, yii

我正在尝试在单个视图中使用多个 EJuiAutoCompleteFkField 小部件（实际上是视图中的一些 ajax 加载的 div）。任何人都知道给 juiautocomplete 小部件一个独特的 DOM ID 以便它们都可以单独运行的方法吗？

目前只有第一个有效，因为它不是唯一的。

我希望下面的'htmloptions'之类的东西来设置id，就像你在其他Yii小部件中找到的那样

```
<?php 
 $this->widget('EJuiAutoCompleteFkField', array(
  'model'=>$smpNull, 
  'attribute'=>'cancer_id', //the FK field (from CJuiInputWidget)
  'sourceUrl'=>Yii::app()->createUrl('/samples/cancerAutoComplete'), 
  'showFKField'=>false,
  'FKFieldSize'=>10, 
  'relName'=>'cancer', // the relation name defined above
  'displayAttr'=>'CancerName',  // attribute or pseudo-attribute to display
  'autoCompleteLength'=>50,
  'options'=>array(
    'minLength'=>3,
   ),
  'htmlOptions'=>array(
   'id'=>'Events_cancer_id',
  ),
 ));
?> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:09:06.157

以下是我修改扩展以启用每页多个字段的方法：

新的 EJuiAutoCompleteFkField.php

```
<?php
/* 
 * EJuiAutoCompleteFkField class file
 *
 * @author Jeremy Dunn <jeremy.j.dunn@gmail.com>
 * @link http://www.yiiframework.com/
 * @version 1.5
 */

Yii::import('zii.widgets.jui.CJuiAutoComplete');
class EJuiAutoCompleteFkField extends CJuiAutoComplete {

    /**
     * @var boolean whether to show the FK field.
     */
    public $showFKField = false;

    /**
     * @var integer length of the FK field if visible
     */
    public $FKFieldSize = 10;
    /**
     * @var string the relation name to the FK table
     */
    public $relName;
    /**
     * @var string the relation name to the FK table
     */
    public $idSuffix;
    /**
     * @var string extension to append to id fields for uniqneness
     */
    public $displayAttr;

    /**
     * @var integer width of the AutoComplete field
     */
    public $autoCompleteLength = 50;

    /**
     * @var string the ID of the FK field
     */
    private $_fieldID;

    /**
     * @var string the ID of the hidden field to save the display value
     */
    private $_saveID;

    /**
     * @var string the ID of the AutoComplete field
     */
    private $_lookupID;

    /**
     * @var string the ID for the hidden field
     */
    private $_hiddenID;

    /**
     * @var string the initial display value
     */
    private $_display;
    /**
     * @var string name of the lookup field
     */
    private $_name;

    public function init() {
        parent::init(); // ensure necessary assets are loaded

        // JJD 8/3/11 make EJuiAutoCompleteFkField work for child rows where attribute like [$i]FieldName
        // get the ID which will be created for the actual field when it is rendered.
        // don't let resolveNameID() change $this->attribute which is needed to generate the actual field
        $attr = $this->attribute;
        $tempHtmlOpts = array();
        CHtml::resolveNameID($this->model, $attr, $tempHtmlOpts);
        $id = $tempHtmlOpts['id'].'_'.$this->idSuffix;
        $this->_fieldID = $id;
        $this->_saveID = $id . '_save';
        $this->_lookupID = $id .'_lookup';
        $this->_hiddenID = $id .'_hidden';
        $this->_name = $tempHtmlOpts['id'].'_lookup';

        $related = $this->model->{$this->relName}; // get the related record
        $value = CHtml::resolveValue($this->model, $this->attribute);
        $this->_display=(!empty($value) ? $related->{$this->displayAttr} : '');

        if (!isset($this->options['minLength']))
            $this->options['minLength'] = 2;

        if (!isset($this->options['maxHeight']))
            $this->options['maxHeight']='100';

        $this->htmlOptions['size'] = $this->autoCompleteLength;
        // fix problem with Chrome 10 validating maxLength for the auto-complete field
        $this->htmlOptions['maxlength'] = $this->autoCompleteLength;

        // setup javascript to do the work
        $this->options['create']="js:function(event, ui){\$(this).val('".addslashes($this->_display)."');}";  // show initial display value
        // after user picks from list, save the ID in model/attr field, and Value in _save field for redisplay
        $this->options['select']="js:function(event, ui){\$('#".$this->_fieldID."').val(ui.item.id);\$('#".$this->_saveID."').val(ui.item.value);}";
        // when the autoComplete field loses focus, refresh the field with current value of _save
        // this is either the previous value if user didn't pick anything; or the new value if they did
        // $this->htmlOptions['onblur']="$(this).val($('#".$this->_saveID."').val());";
    }

    public function run() {
        // first render the FK field.  This is the actual data field, populated by autocomplete.select()
        if ($this->showFKField) {
            echo CHtml::activeTextField($this->model, $this->attribute, array('size'=>$this->FKFieldSize, 'readonly'=>'readonly'));
        } else {
            echo CHtml::activeHiddenField($this->model,$this->attribute, array('id'=>$this->_hiddenID));
        }

        // second, the hidden field used to refresh the display value
        echo CHtml::hiddenField($this->_saveID,$this->_display, array('id'=>$this->_saveID)); 

        // third, the autoComplete field itself
        $this->htmlOptions['id'] = $this->_lookupID;
        $this->htmlOptions['name'] = $this->_name;       
        parent::run();

        // fouth, an image button to empty all three fields
        /*
        $label=Yii::t('DR','Remove '). ucfirst($this->relName); // TODO: how to translate relname?
        $deleteImageURL = '/images/text_field_remove.png'; 
        echo CHtml::image($deleteImageURL, $label,
            array('title'=>$label,
                'name' => 'remove'.$this->_fieldID,
                'style'=>'margin-left:6px;',
                // JJD 4/27/12 #1350 trigger onchange event for display field, in case there's an event attached (e.g. unsaved-changes-warning)
                'onclick'=>"$('#".$this->_fieldID."').val('').trigger('change');$('#".$this->_saveID."').val('');$('#".$this->_lookupID."').val('');",
            )
        );
         * 
         */
    }
}
?> 
```

以及视图中的用法：

```
<?php 
$this->widget('EJuiAutoCompleteFkField', array(
'model'=>$smpCancerDefault, 
'attribute'=>'cancer_id', //the FK field (from CJuiInputWidget)
'sourceUrl'=>Yii::app()->createUrl('/samples/cancerAutoComplete'), 
'showFKField'=>false,
'FKFieldSize'=>10, 
'relName'=>'cancer', // the relation name defined above
'displayAttr'=>'CancerName',  // attribute or pseudo-attribute to display
'autoCompleteLength'=>50,
'idSuffix'=>"myUniqueSuffix", // added this var to allow for unique field ids
'options'=>array(
'minLength'=>3,
 ),
));
?> 
```

# jquery - 部分更新的 icefaces javascript 未得到评估

> ID：12517871
> 
> 赞同：1
> 
> 时间：2012-09-20T17:38:03.960
> 
> 标签：jquery, icefaces, icefaces-3

我使用`ace:tabset`它为所选的`ace:tabPane`. 它使用 ajax 获取所选窗格的内容。

然而，部分 ajax 更新中显示的组件包含`<script type="text/javascript" ...`标签，这些标签不会被任何浏览器评估。

这种方式我不能使用例如`ace:dialog`来自我的部分更新的例子，因为它有它自己的 js 函数来显示在标签中定义的自己，这实际上没有得到评估，实际上插入了这个部分更新的所有其他 dom 元素在 dom 树中。

我一定不是唯一一个遇到这个问题的人。我使用 Icefaces 和 icefaces-ace 3.0.1

谢谢

# asp.net - asp.net 下拉列表太大，视图状态可能已满，回发

> ID：12517874
> 
> 赞同：0
> 
> 时间：2012-09-20T17:38:15.923
> 
> 标签：asp.net, drop-down-menu, viewstate

我有一个包含多个下拉列表的页面。他们每个人都装满了很多库存。我需要在回发时选择他们每个人的值。

我的问题是，在回帖结束时刷新（显示）页面需要很长时间。我看到视图状态充满了很多东西。

我尝试为我的下拉列表禁用视图状态，但这会抹掉我在回发时的价值。

我已经有一个用于视图状态的压缩器。

你能帮助我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:58:09.163

您可以使用页面缓存 - 基于`OutputCache property of page`

链接示例：http: [//msdn.microsoft.com/en-us/library/hdxfb6cy%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/hdxfb6cy%28v=vs.100%29.aspx)

链接配置：http: [//msdn.microsoft.com/en-us/library/ms178606%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178606%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:02:19.560

页面缓存或禁用视图状态并将所选值添加到会话并在页面加载时再次获取该值。

# php - 在 PHP 中将控制字符转换为图形

> ID：12517875
> 
> 赞同：0
> 
> 时间：2012-09-20T17:38:17.040
> 
> 标签：php, unicode, binary, control-characters

我需要一个将控制字符转换为图形的 PHP 代码（如 U+0000 到 ␀ (U+2400)）。Unicode 0000-001F 应替换为 unicode 2400-241F。我正在编写一个显示文件内容的 PHP 代码。

# python - Python 方法的双下划线 *argument*

> ID：12517877
> 
> 赞同：13
> 
> 时间：2012-09-20T17:38:18.893
> 
> 标签：python

我知道双下划线对 Python 类属性/方法意味着什么，但它对方法参数意味着什么？

看起来你不能以双下划线开头的参数传递给方法。这很令人困惑，因为您可以为正常功能做到这一点。

考虑这个脚本：

```
def egg(__a=None):
    return __a

print "egg(1) =",
print egg(1)
print

class Spam(object):

    def egg(self, __a=None):
        return __a

print "Spam().egg(__a=1) =",
print Spam().egg(__a=1) 
```

运行此脚本会产生：

```
egg(1) = 1

Spam().egg(__a=1) =
Traceback (most recent call last):
  File "/....py", line 15, in <module>
    print Spam().egg(__a=1)
TypeError: egg() got an unexpected keyword argument '__a' 
```

我用 Python 2.7.2 检查了这个。

* * *

其他一些例子

这有效：

```
def egg(self, __a):
    return __a

class Spam(object):

    egg = egg

Spam().egg(__a=1) 
```

这不会：

```
class Spam(object):

    def _egg(self, __a=None):
        return __a

    def egg(self, a):
        return self._egg(__a=a)

Spam().egg(1) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T17:43:59.490

名称修改适用于所有带有前导双下划线的标识符，[无论它们出现在哪里](http://docs.python.org/reference/expressions.html#atom-identifiers)（该部分中倒数第二句）：

> 此转换与使用标识符的语法上下文无关。

这更易于实现和定义，并且更一致。这可能看起来很愚蠢，但整个名字的破坏交易是一个丑陋的小黑客恕我直言；并且无论如何，除了属性/方法之外，您不应该使用这样的名称。

`Spam().egg(_Spam__a=1)`, 以及`Spam().egg(1)`, 确实有效。但是即使你可以让它工作，前导下划线（任意数量）在参数名称中也没有位置。或者在任何局部变量（例外`_`：）中。

**编辑：**您似乎发现了一个从未考虑过的极端案例。这里的文档不精确，或者实现有缺陷。看来关键字参数名称没有被破坏。查看字节码（Python 3.2）：

```
>>> dis.dis(Spam.egg)
  3           0 LOAD_FAST                0 (self)
              3 LOAD_ATTR                0 (_egg)
              6 LOAD_CONST               1 ('__a') # keyword argument not mangled
              9 LOAD_FAST                1 (a)
             12 CALL_FUNCTION          256
             15 RETURN_VALUE
>>> dis.dis(Spam._egg)
  2           0 LOAD_FAST                1 (_Spam__a) # parameter mangled
              3 RETURN_VALUE 
```

这可能源于这样一个事实，即关键字参数相当于传递一个 dict（在这种情况下`{'__a': 1}`），其键也不会被破坏。但老实说，我只是在一个已经很丑的特殊情况下称它为一个丑陋的角落案例，然后继续前进。这并不重要，因为无论如何您都不应该使用这样的标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T17:44:23.510

它被转换为`_Spam__a`：

```
In [20]: class Spam(object):
   ....:     
   ....:         def egg(self, __a=None):
   ....:             return __a
   ....: 

In [21]: Spam.egg.__func__.__code__.co_varnames
Out[21]: ('self', '_Spam__a') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:51:56.187

类上下文中的双下划线或[名称修饰](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_Python)是私有标识符。在您的示例中尝试 dir(Spam.egg) ，您将看到参数 __a 是 now `_Spam__egg`。

您现在可以使用：

```
Spam().egg(_Spam__a=1) 
```

# php - 如何在php中创建带有爆炸文本的数组

> ID：12517893
> 
> 赞同：0
> 
> 时间：2012-09-20T17:39:12.077
> 
> 标签：php, arrays, explode

毕竟我很抱歉我的英语。

我正在用**PHP**编写脚本，但遇到了一个小问题。

这个想法是为每行文本创建一个数组，并将第四个值替换为表示状态的字符串。

我有一行文字，例如 **2022,33422,0,1,0,22**

单行可以创建数组，但多行会产生意想不到的结果。

例子：

**2022,33422,0,1,0,22**

**2024,3232,01,1,04,298762**

```
 $myArray = explode(',', $uploadServer);
        $status = array(0  => "Unprocessed",
                 1  => "Processing",
                 2  => "Download aborted because the file became too big.",
                 3  => "Download aborted because the file downloaded too long.",
                 4  => "Download finished. Uploading to RapidShare.",
                 5  => "Upload to RapidShare finished. Job finished.",
                 7  => "Upload failed 3 times for unknown reasons. Job aborted.",
                 8  => "Upload failed because the file is black listed.",
                 9  => "Download failed for unknown reasons.",
                 11 => "Enqueued for later processing because this account already downloads 5 files at the same time.");

        foreach ($myArray as $valor) {
              if(array_key_exists($valor[3],$status)) {

                    return $passer[] = $status[$valor[3]];

              } else {

                    return FALSE;

              }
        } 
```

**$myArray**的结果是

```
Array
(
    [0] => 2022
    [1] => 33422
    [2] => 0
    [3] => 1
    [4] => 0
    [5] => 22
) 
```

但我需要这个最终数组

```
Array
(
[0]=>array(
          [0] => 2022
          [1] => 33422
          [2] => 0
          [3] => Processing
          [4] => 0
          [5] => 22
          )

[1]=>array(
           [0] => 2022
           [1] => 33422
           [2] => 0
           [3] => Processing
           [4] => 0
           [5] => 22
          )
) 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:47:25.883

如果我对您的理解正确，那么您正在考虑解决方案。

```
 foreach ($myArray as $valor) { 
          if(isset($status[$valor[3]])) {  # this checks if there is a status with that index/key
                 return $passer[] = $status[$valor[3]]; 
           } else { 
                 return FALSE; 
           } 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:53:52.267

**更新**：所以你有一个带有换行符的字符串。此换行符是一个不可见字符 (\n)。首先在每个换行符处拆分您的字符串。然后循环遍历这个数组。拆分每个逗号上的字符串并使用索引 3 更改值：

```
$myArray = explode("\n", $uploadServer);

$status = array(0  => "Unprocessed",
             1  => "Processing",
             2  => "Download aborted because the file became too big.",
             3  => "Download aborted because the file downloaded too long.",
             4  => "Download finished. Uploading to RapidShare.",
             5  => "Upload to RapidShare finished. Job finished.",
             7  => "Upload failed 3 times for unknown reasons. Job aborted.",
             8  => "Upload failed because the file is black listed.",
             9  => "Download failed for unknown reasons.",
             11 => "Enqueued for later processing because this account already downloads 5 files at the same time.");

$passer = array(); //create array to fill
foreach( $myArray as $valor ) { //loop through lines
   if( !empty($valor) ) { // check for empty line
     $tmp = explode(',', $valor);  //make array of strings
     if(array_key_exists($tmp[3],$status)) {  //check value [3]
       $tmp[3] = $status[$tmp[3]];
     }     
     $passer[] = $tmp;   //append array to parent array
  } 
} 
```

# php - 是什么导致从 phpfilenavigatior 下载损坏？

> ID：12517896
> 
> 赞同：0
> 
> 时间：2012-09-20T17:39:24.900
> 
> 标签：php

我有一个客户端成功使用[http://pfn.sourceforge.net/](http://pfn.sourceforge.net/)好几年了，现在他们已经搬到了一个新的服务器上。唯一真正改变的是 php 从 5.2 -> 5.3。现在他们可以很好地上传文件，但是当他们下载文件时，它们无法打开，并且通常会出现某种 Windows 错误。[损坏的文件]

如果我将服务器上的文件移动到其他位置并尝试直接下载它，那很好。当有人试图从 php 应用程序下载时，它就会被破坏。

不知道从哪里开始看这个。

# iphone - 在 iOS 中将数据附加到 FTP 服务器上的文件

> ID：12517898
> 
> 赞同：1
> 
> 时间：2012-09-20T17:39:32.787
> 
> 标签：iphone, objective-c, ios, ftp, cfstream

在从 Apple 的 SimpleFTPSample 项目中学习了基础知识之后，我尝试在我的 FTP 服务器上的 .txt 文件的末尾**附加**一个字符串。我成功地使用自定义字符串覆盖了现有文件，但我怀疑定义文件是否将被覆盖或附加的**kCFStreamPropertyAppendToFile属性在 iOS 中不可用。**

在 iOS 中推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:55:04.493

最终我最终使用 HTTP 下载了文件的内容（它比 FTP 快得多）。接下来，将字符串附加到文件的内容中，然后使用 FTP 将文件上传到服务器。这可能不是最好的解决方案，但它确实解决了问题。

# javascript - 即使实现了updateRecord函数，Ember Data Adapter throws 也没有方法'updateRecord'？

> ID：12517899
> 
> 赞同：2
> 
> 时间：2012-09-20T17:39:35.847
> 
> 标签：javascript, ember.js

我正在为 Ember 数据滚动我自己的适配器。长话短说，当我调用 App.store.updateRecord(App.Model, id ) 时，我收到此错误：

`Uncaught TypeError: Object <DS.Store:ember195> has no method 'updateRecord'`

即使实现了 updateRecord 功能。

下面的示例代码（为了清楚起见，我将所有函数都记录到控制台而不是做他们应该做的事情）

```
// declare application namespace
App = Ember.Application.create();

// instantiate store
App.store = DS.Store.create({
    revision: 2,
    adapter: DS.LocalStorageAdapter.create(),
});

// implement adapter
DS.LocalStorageAdapter = DS.Adapter.extend({

  createRecord: function(store, type, model) {
    console.log('createRecord: ', type, model);

  },

  updateRecord: function(store, type, model) {
    console.log('updateRecord: ', type, model);

  },

  find: function(store, type, id) {
    console.log('find: ', type, id);

  },

  localStorage: {
    set: function( ModelTyp, value ){},

    get: function( ModelType ){},
  }

});

// create model
App.StyleData = DS.Model.extend({

    css_name: DS.attr('string', {key: 'css_name'}),
    storageID: DS.attr('number', {defaultValue: 0, key: 'storageID'}),

});

// ==========================================================================
// Test Application
// ==========================================================================

App.store.createRecord(App.StyleData, { css_name: 'name' });
App.store.commit()   
//console: createRecord:  App.StyleData, model

App.store.find(App.StyleData, 0)   
//console: find: App.StyleData, 0

App.store.updateRecord(App.StyleData, { css_name: 'new name' });  
//console: Uncaught TypeError: Object <DS.Store:ember195> has no method 'updateRecord' 
```

因为我无法弄清楚引擎盖下发生了什么，所以我几乎无所适从。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:25:56.063

我曾一度处于相同的位置，因为商店的方法（`createRecord`、`deleteRecord`、`find`等）和适配器的方法之间的概念差异在可用文档中似乎并没有真正明确。

至于`updateRecord`，店里没有。要更新，您只需`.set`在`Model`and run中的值`App.store.commit()`。这将调用适配器的`updateRecord`.

# asp.net - vb.net 调试器跳过调试行

> ID：12517900
> 
> 赞同：0
> 
> 时间：2012-09-20T17:39:37.037
> 
> 标签：asp.net, vb.net, visual-studio-2010

今天早些时候，我[在 vb.net 中询问了这个问题 debugger skips line](https://stackoverflow.com/questions/12511814/debugger-in-vb-net-skips-line)，但我刚刚发现了一些关于我正在从事的项目的奇怪的事情（或者这对于 vb.net 来说是正常的）。我正在编辑 vb 文件，添加一些方法。

调试原始文件工作正常，我可以进入代码并逐行检查每一行，没有任何问题。现在，当我添加一些方法时，调试器的工作方式非常奇怪，请查看以下两个屏幕截图：

1.  网站未启动->所有断点：[http ://gyazo.com/1077b7efbdb2b37174d5960cdff0bda5.png?1348160907](http://gyazo.com/1077b7efbdb2b37174d5960cdff0bda5.png?1348160907)

2.  网站已启动 -> 缺少第 2 行的断点： http://gyazo.com/3051303d6eb27af9ea13bd6e72b81a83.png? [1348161507](http://gyazo.com/3051303d6eb27af9ea13bd6e72b81a83.png?1348161507)

此外，当我将方法添加到文件中时，现在调试不会逐行进行，而是例如在第一行执行步骤，然后当我单击 f10 时，它会在下面再走 20 行，它不会去到代码的下一行。我是第一次编辑 vb.net 代码，我一直在专门使用 c#，我不知道在编辑文件后是否需要修改某些内容，以便调试器正常工作。

原始代码：

```
Public Class Login
    Inherits System.Web.UI.Page

    Private m_objFranchiseInfo As New clsFranchiseInfo

    Private Sub Login_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        Dim sEmail As String = Request.QueryString("email")
        Dim sPswd As String = Request.QueryString("password")

        If (Not String.IsNullOrWhiteSpace(sEmail) And Not String.IsNullOrWhiteSpace(sPswd)) Then

            If (sEmail.ToLower = "admin@mysite.com") Then
                FormsAuthentication.SetAuthCookie(sEmail, False)
                Session("UserName") = sEmail
                Session("Password") = sPswd
            Else

                Dim objService As New clsPropertyware
                With objService

                    .UserName = sEmail
                    .Password = sPswd
                    .Initialize()

                    If .TestConnection = True Then
                        FormsAuthentication.SetAuthCookie(sEmail, False)
                        Session("UserName") = sEmail.ToLower
                        Session("Password") = sPswd
                        Session("OrgID") = .GetOrgID

                    Else
                        FormsAuthentication.SetAuthCookie("", True)
                        Session("UserName") = String.Empty
                        Session("Password") = String.Empty
                        Session("OrgID") = String.Empty
                    End If

                End With

            End If
        Else
            FormsAuthentication.SignOut()
            Session("UserName") = String.Empty
            Session("Password") = String.Empty
            Session("OrgID") = String.Empty
        End If
    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim sEmail As String = Request.QueryString("email")
        Dim sPswd As String = Request.QueryString("password")

        If (Not String.IsNullOrWhiteSpace(sEmail) And Not String.IsNullOrWhiteSpace(sPswd)) Then

            If (sEmail.ToLower = "admin@mysite.com") Then
                FormsAuthentication.SetAuthCookie(sEmail, False)
                Session("UserName") = sEmail
                Session("Password") = sPswd
            Else

                Dim objService As New clsPropertyware
                With objService

                    .UserName = sEmail
                    .Password = sPswd
                    .Initialize()

                    If .TestConnection = True Then
                        FormsAuthentication.SetAuthCookie(sEmail, False)
                        Session("UserName") = sEmail.ToLower
                        Session("Password") = sPswd
                        Session("OrgID") = .GetOrgID
                        Response.Redirect("~/default.aspx")
                    Else
                        FormsAuthentication.SetAuthCookie("", True)
                        Session("UserName") = String.Empty
                        Session("Password") = String.Empty
                        Session("OrgID") = String.Empty
                    End If

                End With

            End If
        Else
            FormsAuthentication.SignOut()
            Session("UserName") = String.Empty
            Session("Password") = String.Empty
            Session("OrgID") = String.Empty
        End If
    End Sub

    Private Sub LoginUser_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles LoginUser.Authenticate

        Dim szUserName As String = CType(LoginUser.FindControl("UserName"), TextBox).Text().Trim()
        Dim szPassword As String = CType(LoginUser.FindControl("Password"), TextBox).Text().Trim()

        If (szUserName.ToLower = "admin@mysite.com") Then
            e.Authenticated = True
            Session("UserName") = szUserName
            Session("Password") = szPassword
        Else

            Dim objService As New clsPropertyware
            With objService

                .UserName = szUserName
                .Password = szPassword
                .Initialize()

                If .TestConnection = True Then
                    e.Authenticated = True
                    Session("UserName") = szUserName.ToLower
                    Session("Password") = szPassword
                    Session("OrgID") = .GetOrgID
                Else
                    e.Authenticated = False
                    Session("UserName") = String.Empty
                    Session("Password") = String.Empty
                    Session("OrgID") = String.Empty
                End If

            End With
        End If

    End Sub

    Private Sub LoginUser_LoggedIn(ByVal sender As Object, ByVal e As System.EventArgs) Handles LoginUser.LoggedIn

        If (Session("UserName") = "admin@mysite.com") Then
            Response.Redirect("~/UploadValues.aspx")
        Else

            m_objFranchiseInfo.Clear()
            If (m_objFranchiseInfo.Load(Session("UserName")) = True) Then
                Session("FranchiseAgent") = m_objFranchiseInfo.szAgent
                Session("FranchiseAgent2") = m_objFranchiseInfo.szAgent2
                Session("FranchiseAddress") = m_objFranchiseInfo.szAddress
                Session("FranchiseCity") = m_objFranchiseInfo.szCity
                Session("FranchiseState") = m_objFranchiseInfo.szState
                Session("FranchiseZip") = m_objFranchiseInfo.szZip
                Session("FranchisePhone") = m_objFranchiseInfo.szPhone
                Session("FranchiseFax") = m_objFranchiseInfo.szFax
                Session("FranchiseEmail") = m_objFranchiseInfo.szEmail
            Else
                Response.Redirect("~\FranchiseInfo.aspx")
            End If
        End If

    End Sub
End Class 
```

修改后的代码：

```
Imports System.Security.Cryptography

Public Class Login
    Inherits System.Web.UI.Page

    Private m_objFranchiseInfo As New clsFranchiseInfo

    Private Sub Login_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        Dim sEmail As String = Request.QueryString("email")
        Dim sPswd As String = Request.QueryString("password")

        If (Not String.IsNullOrWhiteSpace(sEmail) And Not String.IsNullOrWhiteSpace(sPswd)) Then

            If (sEmail.ToLower = "admin@mysite.com") Then
                FormsAuthentication.SetAuthCookie(sEmail, False)
                Session("UserName") = sEmail
                Session("Password") = sPswd
            Else

                Dim objService As New clsPropertyware
                With objService

                    .UserName = sEmail
                    .Password = sPswd
                    .Initialize()

                    If .TestConnection = True Then
                        FormsAuthentication.SetAuthCookie(sEmail, False)
                        Session("UserName") = sEmail.ToLower
                        Session("Password") = sPswd
                        Session("OrgID") = .GetOrgID

                    Else
                        FormsAuthentication.SetAuthCookie("", True)
                        Session("UserName") = String.Empty
                        Session("Password") = String.Empty
                        Session("OrgID") = String.Empty
                    End If

                End With

            End If
        Else
            FormsAuthentication.SignOut()
            Session("UserName") = String.Empty
            Session("Password") = String.Empty
            Session("OrgID") = String.Empty
        End If
    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim encryptedEmail As String = "myemail@yahoo.com"
        Dim decryptEmail As String = DecryptData("myemail@yahoo.com")
        Dim encrpytedPassword As String = "password"

        Dim sEmail As String = Request.QueryString("email")
        Dim sPswd As String = Request.QueryString("password")

        If (Not String.IsNullOrWhiteSpace(sEmail) And Not String.IsNullOrWhiteSpace(sPswd)) Then

            If (sEmail.ToLower = "admin@mysite.com") Then
                FormsAuthentication.SetAuthCookie(sEmail, False)
                Session("UserName") = sEmail
                Session("Password") = sPswd
            Else

                Dim objService As New clsPropertyware
                With objService

                    .UserName = sEmail
                    .Password = sPswd
                    .Initialize()

                    If .TestConnection = True Then
                        FormsAuthentication.SetAuthCookie(sEmail, False)
                        Session("UserName") = sEmail.ToLower
                        Session("Password") = sPswd
                        Session("OrgID") = .GetOrgID
                        Response.Redirect("~/default.aspx")
                    Else
                        FormsAuthentication.SetAuthCookie("", True)
                        Session("UserName") = String.Empty
                        Session("Password") = String.Empty
                        Session("OrgID") = String.Empty
                    End If

                End With

            End If
        Else
            FormsAuthentication.SignOut()
            Session("UserName") = String.Empty
            Session("Password") = String.Empty
            Session("OrgID") = String.Empty
        End If
    End Sub

    Private Sub LoginUser_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles LoginUser.Authenticate

        Dim szUserName As String = CType(LoginUser.FindControl("UserName"), TextBox).Text().Trim()
        Dim szPassword As String = CType(LoginUser.FindControl("Password"), TextBox).Text().Trim()

        If (szUserName.ToLower = "admin@mysite.com") Then
            e.Authenticated = True
            Session("UserName") = szUserName
            Session("Password") = szPassword
        Else

            Dim objService As New clsPropertyware
            With objService

                .UserName = szUserName
                .Password = szPassword
                .Initialize()

                If .TestConnection = True Then
                    e.Authenticated = True
                    Session("UserName") = szUserName.ToLower
                    Session("Password") = szPassword
                    Session("OrgID") = .GetOrgID
                Else
                    e.Authenticated = False
                    Session("UserName") = String.Empty
                    Session("Password") = String.Empty
                    Session("OrgID") = String.Empty
                End If

            End With
        End If

    End Sub

    Private Sub LoginUser_LoggedIn(ByVal sender As Object, ByVal e As System.EventArgs) Handles LoginUser.LoggedIn

        If (Session("UserName") = "admin@mysite.com") Then
            Response.Redirect("~/UploadValues.aspx")
        Else

            m_objFranchiseInfo.Clear()
            If (m_objFranchiseInfo.Load(Session("UserName")) = True) Then
                Session("FranchiseAgent") = m_objFranchiseInfo.szAgent
                Session("FranchiseAgent2") = m_objFranchiseInfo.szAgent2
                Session("FranchiseAddress") = m_objFranchiseInfo.szAddress
                Session("FranchiseCity") = m_objFranchiseInfo.szCity
                Session("FranchiseState") = m_objFranchiseInfo.szState
                Session("FranchiseZip") = m_objFranchiseInfo.szZip
                Session("FranchisePhone") = m_objFranchiseInfo.szPhone
                Session("FranchiseFax") = m_objFranchiseInfo.szFax
                Session("FranchiseEmail") = m_objFranchiseInfo.szEmail
            Else
                Response.Redirect("~\FranchiseInfo.aspx")
            End If
        End If

    End Sub

    Public Function DecryptData(
   ByVal encryptedtext As String) As String

        ' Convert the encrypted text string to a byte array. 
        Dim encryptedBytes() As Byte = Convert.FromBase64String(encryptedtext)

        ' Create the stream. 
        Dim ms As New System.IO.MemoryStream
        ' Create the decoder to write to the stream. 
        Dim decStream As New CryptoStream(ms,
            TripleDES.CreateDecryptor(),
            System.Security.Cryptography.CryptoStreamMode.Write)

        ' Use the crypto stream to write the byte array to the stream.
        decStream.Write(encryptedBytes, 0, encryptedBytes.Length)
        decStream.FlushFinalBlock()

        ' Convert the plaintext stream to a string. 
        Return System.Text.Encoding.Unicode.GetString(ms.ToArray)
    End Function

    Private Function TruncateHash(
    ByVal key As String,
    ByVal length As Integer) As Byte()

        Dim sha1 As New SHA1CryptoServiceProvider

        ' Hash the key. 
        Dim keyBytes() As Byte =
            System.Text.Encoding.Unicode.GetBytes(key)
        Dim hash() As Byte = sha1.ComputeHash(keyBytes)

        ' Truncate or pad the hash. 
        ReDim Preserve hash(length - 1)
        Return hash
    End Function

    Sub New(ByVal key As String)
        ' Initialize the crypto provider.
        TripleDes.Key = TruncateHash(key, TripleDes.KeySize \ 8)
        TripleDes.IV = TruncateHash("", TripleDes.BlockSize \ 8)
    End Sub

    Public Function EncryptData(
    ByVal plaintext As String) As String

        ' Convert the plaintext string to a byte array. 
        Dim plaintextBytes() As Byte =
            System.Text.Encoding.Unicode.GetBytes(plaintext)

        ' Create the stream. 
        Dim ms As New System.IO.MemoryStream
        ' Create the encoder to write to the stream. 
        Dim encStream As New CryptoStream(ms,
            TripleDes.CreateEncryptor(),
            System.Security.Cryptography.CryptoStreamMode.Write)

        ' Use the crypto stream to write the byte array to the stream.
        encStream.Write(plaintextBytes, 0, plaintextBytes.Length)
        encStream.FlushFinalBlock()

        ' Convert the encrypted stream to a printable string. 
        Return Convert.ToBase64String(ms.ToArray)
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:22:41.687

如果您使用 ASP.net 开发服务器进行托管，我已经看到当该进程仍在执行代码时会发生这种情况，即使 Visual Studio 已停止。当您开始一个新的调试会话时，它会尝试跟踪两个会话。我认为当您点击停止按钮而不是关闭浏览器窗口并且存在长时间运行或异步进程时，可能会发生这种情况。

尝试右键单击任务栏中的 ASP.net 开发服务器图标并选择停止，然后开始调试。

# java - 什么是java pojo类、java bean、普通类？

> ID：12517905
> 
> 赞同：112
> 
> 时间：2012-09-20T17:39:55.527
> 
> 标签：java, class, javabeans, pojo

> **可能重复：**
> [DTO、VO、POJO、JavaBeans 之间的区别？](https://stackoverflow.com/questions/1612334/difference-between-dto-vo-pojo-javabeans)

嗨，请不要说我的问题是重复的 :-) 我看到了所有问题，但不明白确切的区别。

有人可以用简单的语言解释什么是`POJO`,吗？`Bean``Normal Class`

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-09-20T18:05:25.347

1.  `Normal Class`：一个Java类

2.  `Java Beans`：

    *   所有属性都是私有的（使用 getter/setter）
    *   公共无参数构造函数
    *   实现可序列化。
3.  `Pojo`: Plain Old Java Object 是一种 Java 对象，除了 Java 语言规范强制的限制之外，不受任何限制。即，POJO 不应该必须

    *   扩展预先指定的类
    *   实现预先指定的接口
    *   包含预先指定的注释

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-20T17:46:06.967

POJO 代表 Plain Old Java Object，用于描述与“普通类”相同的事物，而 JavaBean 遵循一组规则。最常见的 Bean 使用 getter 和 setter 来保护它们的成员变量，这些变量通常设置为私有并且有一个无参数的公共构造函数。Wikipedia 对 JavaBeans 有很好的概述：[http ://en.wikipedia.org/wiki/JavaBeans](http://en.wikipedia.org/wiki/JavaBeans)

POJO通常用来描述一个类，它不需要是任何东西的子类，或者实现特定的接口，或者遵循特定的模式。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T17:44:04.280

POJO = 普通的旧 Java 对象。它具有相应属性的属性、getter 和 setter。它也可以覆盖`Object.toString()`和`Object.equals()`。

Java Beans：参见[Wiki 链接](http://en.wikipedia.org/wiki/JavaBeans)。

普通类：任何 java 类。

# c# - 使用 .Net 如何反序列化以下 xml？

> ID：12517909
> 
> 赞同：0
> 
> 时间：2012-09-20T17:40:19.580
> 
> 标签：c#, .net, xml-serialization

我有以下要反序列化为类规则的 xml（见下文）。我还没有找到 xml 属性的神奇组合，它允许我将来自参数节点的 xml 内容作为文本存储在我的 xml 输入中。我需要一个具有属性`Name = "Rule1"`和属性的 Rule 类型的对象`Parameters = "<User>Tommy</User><Database>local</Database>"`

提前致谢。

```
<Rule>
  <Name>Rule1</Name>
  <Parameters>
    <User>Tommy</User>
    <Database>local</Database>
  </Parameters>
</Rule>

class Rule
{
  [XmlElement("Name")]
  public string Name { get; set; }
  [XmlElement("Parameters")]
  [XmlText(typeof(string))]
  public string Parameters { get; set; }
} 
```

编辑：我认为我不够清楚。我需要将名为 Parameters 的整个节点序列化为字符串而不是自定义类。例如，如果处理的 xml 文档包含此

```
 <Parameters>
    <X>xxxx</X>
    <Y>yyyy</Y>
  </Parameters> 
```

我需要将其反序列化为字符串“<X>xxxx<Y>yyyy”如果不同的 xml 文档包含此

```
 <Parameters>
    <A>aaaa</A>
    <B>bbbb</B>
  </Parameters> 
```

我需要将其反序列化为字符串“<A>aaaa<B>bbbb”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:36:44.063

够简单吗？

```
XElement xDoc = XElement.Parse(xml); //or XElement.Load(...)
Rule rule = new Rule()
{
    Name = (string)xDoc.Element("Name"),
    Parameters = String.Join("",xDoc.Element("Parameters").Elements())
}; 
```

--

```
class Rule
{
    public string Name { get; set; }
    public string Parameters { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:38:34.900

**请考虑使用建议的 OOP 方式`luksan`。**

否则，我会组成两个占位符类来`XmlSerializer`支持，然后将对象转换为字符串，可能就像

```
class Rule
{     
  public string Name { get; set; }    
  public string Parameters { get; set; }
}

class XmlRule
{
  [XmlElement("Name")]
  public string Name { get; set; }
  [XmlElement("Parameters")]
  public Parameters Parameters { get; set; }
}

class XmlParameters
{
   [XmlElement("User")]
   public string User { get; set; }
   [XmlElement("Database")]
   public string Database { get; set; }
}

public Rule CreateRule(string xml)
{
    XmlRule xmlRule = Deserialize(xml); // deserialize as you would do usually

    Rule result = new Rule
    {
        Name = xmlRule.Name,
        Parameters = CreateParametersXml(xmlRule.Parameters)
    };

    return result;
}

private string CreateParametersXml(XmlParameters parameters)
{
    return string.Format("<User>{0}</User><Database>{1}</Database>",
                         parameters.User,
                         parameters.Database);
} 
```

也许不是最好的解决方案，因为这些`"<User>{0}</User><Database>{1}</Database>"`东西是硬编码的，那不是很好。但由于我认为拥有非 OOP 模型的整个想法会造成麻烦，这对我来说似乎是最简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:46:52.523

试试这个方法：

```
public static string DeserializeToString(object obj)
        {
            var serializer = new XmlSerializer(obj.GetType());
            var ns = new XmlSerializerNamespaces();
            ns.Add("", "");
            var ms = new MemoryStream();
            var settings = new XmlWriterSettings { OmitXmlDeclaration = true, Encoding = new UnicodeEncoding(false, false) };
            var writer = XmlWriter.Create(ms, settings);
            serializer.Serialize(writer, obj, ns);

            return Encoding.Unicode.GetString(ms.ToArray());

        } 
```

它将接受一个对象并将其转换为字符串，省略名称空间和 XML 声明。

像这样使用：

```
var rule = new Rule();
rule.Name = "name";
rule.Parameters = new Parameters();
rule.Parameters.User = "username";
rule.Parameters.Database = "database";

var stringResults = DeserializeToString(rule); 
```

# c# - 管理带有移动项目的列表的（几乎）最佳方式

> ID：12517910
> 
> 赞同：9
> 
> 时间：2012-09-20T17:40:27.327
> 
> 标签：c#, performance, list

情况如下：
我列出了哪些存储字符串实际上是数字并且可以变得非常大（数亿个项目）。
我将数字存储为字符串，因为可以选择显示一些附加信息，即文本。

因为这需要大量内存来存储，所以我决定最多只存储 500 万个项目。（这只需要大约 250-300mb）。

该列表由计算的输出填充。如果找到一个数字，它将被添加到列表中，这个数字总是大于现有项目。

当列表达到 5 百万时，我想删除第一个项目并将新项目添加到列表中。

像：

```
 // Why is this so freaking slow???
    if (_result.Count == 5000000)
        _result.RemoveAt(0);
    _result.Add(result); 
```

正如您在评论中看到的那样，这非常、非常、非常慢。它只是将我的性能降低了 15 倍。以前需要 2 分钟，现在大约需要 30 分钟。

我尝试了一些类似 linq 的方法，`.Skip(1).ToList`但这会重新创建列表，因此速度会更慢。

该列表必须保持正确的顺序，因此不能选择按索引覆盖（除非您可以解释一个很好的解决方法）。

我的问题：
**有什么体面的方法可以做到这一点吗？**

我真的需要这里的性能，因为它可能需要检查大约 10000000000 个数字。这可能需要一天的时间，但一个月有点太多了:(。

需要更多信息，请随时询问，我很乐意提供。

**解决方案：**
这执行 O(1)

```
 // Set the _result
    Queue<object> _result = new Queue<object>(5000000);

    /// Inside the method
    // If the count has reach it's max, dequeue the first item
    if (_result.Count == 5000000)
        _result.Dequeue();
    _result.Enqueue(result); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:46:32.790

你有没有重新订购物品？如果你不这样做，循环队列会很好用。

System.Collections.Generic.Queue 是一个，我只是仔细检查了一遍。

为了扩展队列的好处，这是`RemoveAt`实现（大致）：

```
for (int i = 1; i < count; i++)
    items[i-1] = items[i];
count--; 
```

因为`list[0]`始终是第一项，所以您必须移动所有内容才能删除第一项。

相反，队列单独跟踪第一项。这将上面的代码更改为：

```
head++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:44:55.080

我会建议你更好地实现一个循环队列。然后将每个 int 推到队列的末尾，当空间不足（由固定大小确定）时，每个操作都需要弹出第一个并推到底部。`O(1)`.

与数组相比，优势在于您不会在需要之前预先分配空间。但是，最后，考虑将整数存储为整数。无论您将执行什么操作，您都应该始终将数字存储为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:45:01.803

为什么不预先分配数组，并且有两个整数，表示数组的开始和结束。显然，它们开始时都等于 0。一旦你用完了空间，你就开始环绕。

一个示例伪助手类：

```
class CircularArray
{
  const int maxSize = 5000000;
  private int[] arr = new int[maxSize];
  private int start = 0;
  private int end = 0;

  public void Add(int value)
  {
    int newEnd = (end + 1) % maxSize;
    if (newEnd == start)
      start = (start + 1) % maxSize;
    end = newEnd;
    arr[end] = value;
  }

  public int Get(int index)
  {
    int newIndex = (start + index) % maxSize;
    return arr[newIndex];
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:48:18.133

当您删除 ArrayList 中的第一项时，所有其他项都会下移。循环队列将允许您保持原始顺序并消除在删除列表头部时发生的耗时移位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T18:20:37.417

可能对你有[`LinkedList<T> Class`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)帮助吗？在两端删除和添加是O（1）操作，但迭代将是O（n），或者如果您需要O（1）访问您可以使用`Dictionary`或[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx) 另一个自定义实现是`QueueDictionary`，我在需要时使用它O (1) 在结束或开始（队列/出队）以及访问值时添加和删除操作。QueueDictionary 在这里：[我将如何实现一个 QueueDictionary，它是 C# 中队列和字典的组合？](https://stackoverflow.com/q/3965516/1460957)

# php - 使用 PHP 实现 SSO 以实现多个域的自动用户登录

> ID：12517911
> 
> 赞同：1
> 
> 时间：2012-09-20T17:40:27.643
> 
> 标签：php, single-sign-on

我需要为三个网站实现一个单唱系统，我一直在研究它并用谷歌搜索，经过一些研究，我有点卡住和困惑:)我发现了很多信息，但没有一个能让事情完全对我来说很清楚，所以我决定请各位专家看看你是否能指出我正确的方向。

我一直在阅读有关 OpenSSO、OpenAM、CAS 和其他解决方案的信息，但至少到目前为止并没有像我预期的那样帮助我。

场景如下：

我有三个使用 PHP 和 MySQL 开发的网站，这三个网站共享相同的数据库和相同的用户，但每个网站都在自己的域中，因此用户如果想访问这三个网站，则必须登录三个关系。

我想要实现的是让用户能够登录其中一个站点，并且在他们访问该站点时能够自动登录另外两个站点。

从技术上讲，我希望对我已经生产/工作的代码产生较小的影响。

我可以使用的最佳解决方案是什么？

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:48:36.563

如果第一次访问**站点 A**的用户将通过您在**站点 A**中为他们创建的链接访问**站点 B**或**C** ，这可能会更容易，也就是说，如果他们单击其中一个站点中的链接转到另一个站点，那么您可以只使用**基于 url 的会话**，而在**PHP**中使用**数据库后端**进行会话。

# git - TortoiseGit：如何配置远程 url（本地目录文件夹）

> ID：12517912
> 
> 赞同：2
> 
> 时间：2012-09-20T17:40:31.450
> 
> 标签：git, tortoisegit

基本上用户测试我的应用程序`/test`，而我等待他们的批准我构建更多的应用程序`/test2`。我一直在手动复制所有文件`/test2`以`test`使用超越比较。一定有更好的方法。这就是为什么我想要么从一个仓库推到另一个仓库，要么从`/test2`一个仓库拉到`test`一个仓库。`/test2``test1`

我似乎无法获得正确的远程 URL 格式。

对于远程 URL，我尝试过 : `\\test`, `\\test\.git`, `file:///x://test/`, `file:///x://test/.git`,`x:/test`

目前在 Windows Xp 上运行 TortiseGit，也在 Windows 7 上尝试过。

![在此处输入图像描述](../Images/dbf76c98f22dd3db1da702d6c241bdad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:36:27.817

删除最后的斜线，它应该可以正常工作！

# jquery - jquery中止ajax - 什么时候？

> ID：12517918
> 
> 赞同：1
> 
> 时间：2012-09-20T17:40:59.663
> 
> 标签：jquery, ajax, asynchronous

我正在做一个画廊，它具有在照片之间导航的功能，下一张和上一张。

下一个和上一个切换大量异步 ajax 调用，以便可以在照片之间快速导航。

现在这是我的问题，假设我在照片#1，然后我执行：下一个，上一个，下一个，上一个。

由于 ajax 调用是异步的，因此为照片 2 检索的信息与照片 1 的信息混合结束，依此类推。

所以我需要在下一个和上一个中止现有的 ajax 调用，然后进行 ajax 调用。

我尝试了以下方法：

```
var xhr=false;

function(){

if(xhr){   
xhr.abort();
}

xhr=$.ajax({

});

} 
```

这不会这样做，似乎一些请求在我的代码中的下一个和上一个之间快速进入时不会中止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:43:35.757

ajax() 函数返回一个 promise，因此您可以使用 done() 来触发下一个 ajax 调用。如果之前的 ajax 调用失败，done() 将不会被调用。

参考：[http ://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

# ruby-on-rails - haml 类/id 语法问题

> ID：12517919
> 
> 赞同：1
> 
> 时间：2012-09-20T17:41:00.910
> 
> 标签：ruby-on-rails, haml, erb

我希望计算元素的类和 id，所以我构建了一个辅助方法 cell_class(row,col)，以便 cell_class(2,3) 产生

```
class='cell .center_right', id='cell_23' 
```

我似乎无法弄清楚我怎么能用haml写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:04:58.637

如果我必须这样做，我可能会让助手负责生成元素，例如：

```
# in app/helpers/some_helper.rb
module SomeHelper
  def some_tag(object, &block)
    haml_tag('td', class: 'cell center_right', id: 'cell_23') {
      yield
    }
  end
end

# in app/views/some/view.html.haml
- some_tag(object) do
  ...content inside tag... 
```

或者，您可以让一个助手返回类，另一个返回 ID，例如：

```
%td{ class: cell_class_helper(object), id: cell_id_helper(object) }
  content 
```

更好的是——也是我要尝试的第一件事——你可以重新构建你的 CSS 以利用 HAML 的[对象引用](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#object_reference_)功能，让你编写：

```
%td[object]
  content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:52:13.073

一种可能性是重写您的方法以返回哈希而不是字符串，然后您可以在 Haml 源中元素的属性哈希中使用该方法：

```
def cell_class
  #compute the values as needed
  {:class => 'cell center_right', :id => 'cell_23'}
end 
```

然后在Haml：

```
%div{cell_class} 
```

产生：

```
<div class='cell center_right' id='cell_23'></div> 
```

请注意，这里的 Haml 语法与 Ruby 语法有所不同——`{cell_class}`它不是有效的 Ruby 哈希，但您可以在 Haml 中使用它。

您从方法返回的哈希内容将合并到您在 Haml 中指定的任何其他属性中：

```
.another_class{cell_class} 
```

产生：

```
<div class='another_class cell center_right' id='cell_23'></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:22:42.967

好吧，一旦我的语法正确，结果就很容易了：

```
%div {class: #{cell_class(row, col)}", id: #{cell_id(row, col)}") 
```

行=2，单元格=5，我得到：

```
<div class='center_center' id='cell_25'>

</div> 
```

正是我想要的。

给我的教训是避免混淆 sass 表示法（“.cell .center_center”）和 haml 快捷方式（“.cell”），并依赖 haml 提供的漂亮的 ruby​​ 哈希表示法。

# asp.net-mvc - 如何在 ASP.NET MVC 中检测和阻止非浏览器 API 请求

> ID：12517921
> 
> 赞同：4
> 
> 时间：2012-09-20T17:41:06.427
> 
> 标签：asp.net-mvc, json, api

我如何能够识别 JSON 请求是来自浏览器还是服务器？我正在开发一个需要阻止所有非浏览器 API 请求的 AJAX 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:58:13.127

我认为没有身份验证/授权机制而只使用 HTTP 规范是不可能真正阻止请求的。但是，您可以使用 HTTP 标头的 User-Agent 字段

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

并使用该字段值跟踪/过滤所有请求。我将通过编写自定义 ActionFilter 并将其应用于 Controller 来实现它。

您是否要出于安全目的阻止请求？

# c++ - 函数重载的工作原理

> ID：12517922
> 
> 赞同：4
> 
> 时间：2012-09-20T17:41:07.977
> 
> 标签：c++

```
int add(int a,int b)
{
     cout<<"1"<<endl;
     return a+b;
 }
 int add(int a,char c)
 {
       cout<<"2"<<endl;
      return a+c;
 }
int main()
{
          cout<<add(10,20)<<endl;    //1
          cout<<add(10,'a')<<endl;   //2 
          cout<<add('a','b')<<endl;  //3 
 } 
```

在上面的代码中，第一个函数调用函数 add(int,int)，第二个函数调用函数 add(int,char)。第三个函数调用应该导致错误，但它调用函数 add(int,char)。任何人都可以解释为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:42:53.443

有隐式转换 char 到 int。更多在这里：

[http://www.petebecker.com/js/js200004.html](http://www.petebecker.com/js/js200004.html)

隐式转换是：

[http://en.cppreference.com/w/cpp/language/implicit_cast](http://en.cppreference.com/w/cpp/language/implicit_cast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:48:42.510

如果一个函数的所有参数的转换至少与另一个函数的参数一样，并且某些参数转换得更好，则采用该函数。

如果不是所有参数的转换至少和另一个函数的参数一样好，并且后一个函数的所有参数的转换至少和前一个函数的参数一样，那么在普通函数的正常情况下就会产生歧义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T17:45:37.887

最接近的匹配是具有 int 和 char 的匹配。由于 char 可以隐式转换为 int 它仍然有效。

```
int a = 'a'; // Returns the ascii value for 'a'. 
```

# javascript - 隐藏的 Youtube 视频 ID

> ID：12517923
> 
> 赞同：-2
> 
> 时间：2012-09-20T17:41:10.187
> 
> 标签：javascript, youtube, jwplayer

我需要隐藏 Youtube 视频的视频 ID。我需要在我的网站上“私有化”我的视频（需要登录）。我知道避免有人获得真实的 URL 是不可能的，但我需要让它变得更好。

目前我将我的视频设置为“未列出”。但是，当我在 JWPlayer 上设置此视频时，它会显示 Youtube 徽标（这不是问题），但点击时会显示视频 URL（这是问题！）。

那么，我怎样才能很难在我的页面上发现视频 ID/URL？

再见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:48:04.433

这是不可能的，实际上违反了 Youtube 的 TOS。对不起！

请参阅[http://www.youtube.com/t/terms](http://www.youtube.com/t/terms)（第 5G 部分）

*“如果您在您的网站上使用 YouTube 播放器，则不得修改、构建或阻止 YouTube 播放器的任何部分或功能，包括但不限于返回网站的链接”*

# emacs - 无法在 Emacs 中使用 define-key 定义键绑定

> ID：12517924
> 
> 赞同：0
> 
> 时间：2012-09-20T17:41:24.180
> 
> 标签：emacs, keyboard-shortcuts

我正在尝试`M-x ansi-term`在 Emacs **24.1**中为我的窗口绑定一些键。我尝试将以下内容添加到我的`.emacs`文件中：

```
(define-key term-raw-map (kbd "M-J") 'windomove-left) 
```

但是 Emacs 抱怨：

```
Debugger entered--Lisp error: (void-variable term-raw-map)
  (define-key term-raw-map (kbd "M-J") (quote windmove-left)) 
```

**更新**：使用 dkim 提供的构造，我也可以切换到**term-char-mode**。现在一切正常：

```
(add-hook 'term-load-hook
  (lambda () 
    (define-key term-raw-map (kbd "M-J") 'windmove-left)  ; Move to the left window
    (define-key term-raw-map (kbd "M-L") 'windmove-right) ; " " right "
    (define-key term-raw-map (kbd "M-I") 'windmove-up)    ; " " above "
    (define-key term-raw-map (kbd "M-K") 'windmove-down)    ; " " above "
    `term-char-mode
    )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:09:09.580

```
(add-hook 'term-load-hook
  (lambda () (define-key term-raw-map (kbd "M-J") 'windmove-left))) 
```

从`term-load-hook`变量的文档中，

> **`term-load-hook`**
> 
> 这个钩子在加载术语时运行。这是放置键绑定的好地方。

# android - 如何将文件从 SD 卡附加到 GMail 电子邮件

> ID：12517925
> 
> 赞同：0
> 
> 时间：2012-09-20T17:41:26.327
> 
> 标签：android

我正在尝试在 Android 中使用 GmailSender 附加 SD 文件。

我有这个：[通过 GMailSender 发送带有附件的电子邮件？](https://stackoverflow.com/questions/6005983/sending-email-with-attachment-through-gmailsender)

我检查了文件是否存在，但邮件无法正确发送。没有附加文件的相同方法运行正常。

可能是什么问题？

谢谢。

```
File imageFile = new File("/sdcard/prueba.jpg");
if (imageFile.exists()){
    Toast.makeText(getApplicationContext(),"Existe",Toast.LENGTH_LONG).show();
}else{
Toast.makeText(getApplicationContext(),"NO Existe", Toast.LENGTH_LONG).show();
}
gmail.sendMail("Datos", c.getMailBody(),Constants.getAddress(), udb.getMail(), imageFile); 
```

我的 GmailSender 类：

```
 public class GMailSender extends javax.mail.Authenticator{

    private final static String defaultUserName = "particle";
    private final static String defaultPassword = "particle123";

    private String mailhost = "smtp.gmail.com";   
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new JSSEProvider());   
    }  

    public GMailSender() {   
        new GMailSender(defaultUserName, defaultPassword);
    }

    public GMailSender(String user, String password) {   
        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);   
    }   

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);   
        }catch(Exception e){

        }
    }  

    public synchronized void sendMail(String subject, String body, String sender, String recipients, File attachment) throws Exception { 
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);
        if(attachment!=null){
            MimeBodyPart mbp1 = new MimeBodyPart();
            mbp1.setText(body);
            MimeBodyPart mbp2 = new MimeBodyPart();
            FileDataSource fds = new FileDataSource(attachment);
            mbp2.setDataHandler(new DataHandler(fds));
            mbp2.setFileName(fds.getName());
            Multipart mp = new MimeMultipart();
            mp.addBodyPart(mbp1);
            mp.addBodyPart(mbp2);
            message.setContent(mp);
        }
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);
    }

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

我的例外是：

```
javax.mail.MessagingException: IOException while sending message; 
```

嵌套异常是：javax.activation.UnsupportedDataTypeException：MIME 类型 multipart/mixed 没有对象 DCH；边界=“----=_Part_1_1079440400.1348225974758”在 com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1177) 在 javax.mail.Transport.send0(Transport.java:195) 在 javax.mail .Transport.send(Transport.java:124) 在 teru.SimDetect.TFC.GMailSender.sendMail(GMailSender.java:105) 在 teru.SimDetect.TFC.SimDetectActivity.onCreate(SimDetectActivity.java:56) 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1072) 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893) 在 android.app.ActivityThread.access$1500( ActivityThread.java:135) 在 android.app。ActivityThread$H.handleMessage(ActivityThread.java:1054) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:150) 在 android.app.ActivityThread.main (ActivityThread.java:4385) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller .run(ZygoteInit.java:849) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) at dalvik.system.NativeStart.main(Native Method) 原因：javax.activation.UnsupportedDataTypeException：否MIME 类型多部分/混合的对象 DCH；边界=“----=_Part_1_1079440400.1348225974758”在 javax.activation.ObjectDataContentHandler.writeTo(DataHandler.java:905) 在 javax.activation.DataHandler.writeTo(DataHandler.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:06:21.570

也许这可以帮助你：

```
String image = "prueba.jpg";
File file = new File(Environment.getExternalStorageDirectory(), image);
GMailSender sender = new GMailSender("user@gmail.com", "password");
sender.sendMail (head , body ,"user@gmail.com", "sendto@mail.com", file); 
```

GmailSender 修改：

```
public synchronized void sendMail(String subject, String body, String sender, String recipients, File attachment) throws Exception { 
    MimeMessage message = new MimeMessage(session);   
    DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
    message.setSender(new InternetAddress(sender));   
    message.setSubject(subject);   
    message.setDataHandler(handler);
    if(attachment!=null){
        MimeBodyPart mbp1 = new MimeBodyPart();
        mbp1.setText(body);
        MimeBodyPart mbp2 = new MimeBodyPart();
        FileDataSource fds = new FileDataSource(attachment);
        mbp2.setDataHandler(new DataHandler(fds));
        mbp2.setFileName(fds.getName());
        Multipart mp = new MimeMultipart();
        mp.addBodyPart(mbp1);
        mp.addBodyPart(mbp2);
        message.setContent(mp);
    }
    if (recipients.indexOf(',') > 0)   
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
    Transport.send(message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:17:33.890

代码很好，问题是 GMailSender 库，它已经过时了。

谢谢。

# hibernate - 休眠映射列表索引

> ID：12517926
> 
> 赞同：1
> 
> 时间：2012-09-20T17:41:31.310
> 
> 标签：hibernate

我在休眠中使用列表进行一对多双向映射..

以下是我的列表代码：

```
<list name="fEvents" table="FTP_SCAN_EVENTS" cascade="save-update" access="field">
  <key column="LOCATION_ID"  />
  <list-index column="idx" />
  <one-to-many class="FtpScanEvents" />
</list> 
```

表中`column idx`的没有生成..我必须将它作为我班级的财产吗？有关生成此 ID 的任何建议...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:09:10.310

尝试更改索引而不是列表索引。您不需要索引的属性。Hibernate 根据列表中的位置计算它。您还可以定义基数以从另一个基数而不是 0 开始位置

另外检查这个 -[双向列表](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# jsp - 使用变量作为键访问 EL 中的映射值

> ID：12517928
> 
> 赞同：17
> 
> 时间：2012-09-20T17:41:32.803
> 
> 标签：jsp, el

我`Map`在 EL 中有一个 as `${map}`，我试图使用一个键来获取它的值，该键本身也是一个`${key}`带有 value的 EL 变量`"1000"`。

使用`${map["1000"]}`有效，但`${map["$key"]}`无效。我做错了什么，如何`Map`使用变量作为键来获取值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T20:31:13.630

`$`不是变量名的开始，它表示表达式的开始。您应该使用`${map[key]}`来访问`key`map中的属性`map`。

您可以在带有`GET`参数的页面上尝试它，例如使用以下查询字符串`?whatEver=something`

```
<c:set var="myParam" value="whatEver"/>
whatEver: <c:out value="${param[myParam]}"/> 
```

这将输出：

```
whatEver: something 
```

请参阅：[https](https://stackoverflow.com/tags/el/info) ://stackoverflow.com/tags/el/info并滚动到“大括号表示法”部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-24T07:04:03.477

我以前遇到过这个问题。这通常发生在键不是字符串时。修复方法是在使用键从映射中获取值之前将键转换为字符串

像这样的东西：

`<c:set var="keyString">${someKeyThatIsNotString}</c:set>`

`<c:out value="${map[keyString]}"/>`

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T15:22:05.507

您可以将键值放在`Java`侧面的地图中，并使用以下页面访问相同的`JSTL`内容`JSP`：

**Java 1.7 之前的版本：**

```
Map<String, String> map = new HashMap<String, String>();
map.put("key","value"); 
```

**Java 1.7 及更高版本：**

```
Map<String, String> map = new HashMap<>();
map.put("key","value"); 
```

**JSP 片段：**

```
<c:out value="${map['key']}"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T10:35:32.327

我的五分钱。现在我正在使用 EL 3.0 (jakarta impl)，我可以使用三种方式访问​​地图值：

```
 1\. ${map.someKey}
 2\. ${map['someKey']}
 3\. ${map[someVar]} //if someVar == 'someKey' 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-09-20T18:03:42.063

我认为您应该访问您的地图，例如：

```
${map.key} 
```

并查看一些关于 jstl 的教程，例如[1](http://www.ibm.com/developerworks/java/library/j-jstl0211/index.html)和[2](http://www.ibm.com/developerworks/java/library/j-jstl0318/)（有点过时，但仍然可以使用）

# asp.net-mvc - 添加相关实体

> ID：12517938
> 
> 赞同：0
> 
> 时间：2012-09-20T17:42:29.103
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, asp.net-4.0

我有这两张桌子，

```
Student
(Id, Name, DOB)
School
(Id, name)

Table 3
(student.Id, School.Id, expiryDate) 
```

我需要添加，新学生，新学校并为表 3 创建新记录）

有没有办法通过实体框架来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:08:15.173

您所描述的称为多对多关系。谷歌搜索“多对多实体框架”将带回您需要的结果。这里只是一个例子。

[http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First](http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:14:33.377

假设您在 Entity Framework 中有一个从数据库生成的模型。如果是这样，它应该显示三个类，`Student`和`School`联结表“表 3”，可能`StudentSchool`，可能带有导航属性`StudentSchool.School`和`StudentSchool.Student`

顺便说一句，如果您的“表 3”只有两个键值而不是 expiryDate，则 EF 将仅使用它们之间的纯多对多关联（`School.Students`和`Student.Schools`）映射学校和学生。

您可以只创建三个对象 、`School`和`Student`，`StudentSchool`设置后者的导航属性，保存，EF 将找出正确的插入顺序并设置外键。

（另一个假设：您的表将标识列作为主键）。

# c# - 如何在没有插入磁盘介质的情况下以编程方式区分 cd 驱动器和 dvd 驱动器？

> ID：12517950
> 
> 赞同：3
> 
> 时间：2012-09-20T17:43:09.010
> 
> 标签：c#

**我想了解如何在没有**插入磁盘介质的情况下区分 cd 驱动器和 dvd 驱动器。

因为存在插入的磁盘媒体的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:51:00.770

我知道这样做的唯一方法是在机器上获取 WMI Win32_CDROMDrive 实例，然后在 Name 或 DeviceId 属性中检查 DVD。

您甚至可能不得不从实例中获取 DeviceID，然后检查注册表中的 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum[DeviceIdHere]\Device 参数，然后检查是否存在名为“DefaultDvdRegion”的值。这对于 CDROM 驱动器不存在，但对于 DVD 驱动器存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T12:38:51.067

如果你想使用 Windows 提供的[IMAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366450%28v=vs.85%29.aspx)，那么你也可以使用类似的代码：

```
// Depending on how you import the COM interface, the names of types and methods
// may differ slightly from the following example. You can either add a reference
// to the COM library in Visual Studio, or roll your own if you choose.

MsftDiscRecorder2 recorder = new MsftDiscRecorder2();
recorder.InitializeDiscRecorder(uniqueId);  // From MsftDiscMaster2
foreach (FeaturePageType feature in recorder.SupportedFeaturePages)
{
    if (feature == FeaturePageType.DvdRead)
    {
        return true;
    }
}
return false; 
```

# css - Twitter Bootstrap 2.1 附加插件无法正常工作

> ID：12517951
> 
> 赞同：2
> 
> 时间：2012-09-20T17:43:13.040
> 
> 标签：css, jquery-plugins, twitter-bootstrap

作为标题...我使用带有词缀的 Bootstrap 2.1 作为侧边栏。但是当我向下滚动时，另一列突然向我的侧边栏下方移动，如下所示：

滚动之前：![在此处输入图像描述](../Images/bd71d1a45546efbed9250998ec190a2f.png)

滚动后：![在此处输入图像描述](../Images/05116ee34eb57638e7311a1c00ec3ba4.png)

这是我的代码：

```
 <section class="container">
      <article>
        <div class="row">
          <aside class="sidebar span3" data-offset-top="150" data-spy="affix">
            <ul class="nav nav-list">
              <li><a href="#toc_0">標題1<i class="icon-chevron-right pull-right"></i></a></li>
              <li><a href="#toc_1">標題2<i class="icon-chevron-right pull-right"></i></a></li>
              <li><a href="#toc_2">標題3<i class="icon-chevron-right pull-right"></i></a></li>
              <li><a href="#toc_3">標題4<i class="icon-chevron-right pull-right"></i></a></li>
              <li><a href="#toc_4">標題5<i class="icon-chevron-right pull-right"></i></a></li>
            </ul>
          </aside>
          <div class="span9"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:34:43.797

当元素被“固定”时，元素的 CSS 变为`position: fixed`，这就是为什么你会遇到浮动问题。在 Bootstrap 文档页面上，Affix 插件始终附加到`<ul>`元素，而不是`.sidebar`.

尝试

```
<aside class="sidebar span3">
  <ul class="nav nav-list" data-spy="affix" data-offset-top="150">
    ...
  </ul>
</aside> 
```

## [JSFiddle](http://fiddle.jshell.net/mmfansler/t4Wex/)

# version-control - Mercurial：获取与部分修订号匹配的修订列表

> ID：12517952
> 
> 赞同：1
> 
> 时间：2012-09-20T17:43:21.680
> 
> 标签：version-control, mercurial, revision, changeset

我正在尝试创建一个自动完成文本字段来选择 Mercurial 修订版（完整节点 ID）。我可以`hg log --template '{node}\n'`用来获取所有修订版，但该命令需要 1 秒才能完成。

当用户开始`1d34`在文本字段中输入（例如）时，我想做类似`hg log --rev 1d34 --template '{node}\n'`的事情，以便结果列表是所有以 1d34 开头的修订。`ambiguous identifier!`不幸的是，如果多个版本与标识符匹配，Mercurial 会给出错误 ( )。

过滤列表需要很长时间，因为`hg log`命令必须先完成，所以我正在寻找一个更快的解决方案。我可以缓存列表，但是存储库经常更改，所以我一直回到慢`hg log`命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:03:13.143

在@shambulator 之后，您可以只更新您的缓存，而不是每次都从头开始重新生成它。Mercurial 的 revlog 格式非常适合这种顺序操作，尤其是那些从提示或初始提交索引的操作。

如果你不重写历史，你可以这样做

```
hg log --template '{node}\n' --rev lastcached:tip 
```

（您可能会使用书签或标签来跟踪上次缓存的修订，但这将具有将数据添加到对 vanilla Mercurial 或其他 GUI 的用户可见的存储库的缺点。）

如果您正在重写历史记录，那么您可以在之后进行完全刷新，或者您可以跟踪最后未更改的修订。然后您删除缓存中该版本之后的所有修订并执行

```
hg log --template '{node}\n' --rev lastunchanged:tip 
```

（当然还有更新`lastcached`以反映新的历史。）

# .htaccess - htaccess：更改地址栏以删除禁止参数

> ID：12517953
> 
> 赞同：1
> 
> 时间：2012-09-20T17:43:27.680
> 
> 标签：.htaccess, url-rewriting, wildcard-subdomain

我尝试使用 htaccess 创建子域。到目前为止工作正常。我在另一个脚本中使用子域作为 Get-Parameter。

但是，如果有人只使用此参数，则 subdomain-parameter 将被覆盖。

user1.domain.com/?site=user2 将显示 user2.domain.com。（实习生是 www.domain.com/index.php?site=user2）

因此，我尝试将站点从？site=user2 重定向到 user2.domain，但每次我使用 [R] 修饰符时，都会更改 url，以便您可以看到我的本地文件夹。
RewriteBase /path/to/basefolder 在那里也没有帮助。

你们中有人知道如何更改地址栏，使其实际上不是 /?site=user1 或 /index.php?site=user1，而是 user1.domain.com 吗？
或者我做错了什么？^^

这是我当前的代码：

```
RewriteEngine on
Options +FollowSymlinks

RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^\?]+)\?(.*?)&?site=([^&\ ]+)([^\ ]*)
RewriteRule ^ http://%4.domain.com/%2?%3%5 [L,R]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_URI} !index\.php [NC]
RewriteCond %{REQUEST_URI} !\.css$ [NC]
RewriteCond %{REQUEST_URI} !\.png$ [NC] 
RewriteRule \.php index.php

RewriteCond %{HTTP_HOST} ^(.*).domain.com$
RewriteCond %{REQUEST_URI} !^/.*/
RewriteRule (.*) index.php?site=%1 [NC,QSA,L]

<Files .htaccess>
order allow,deny
deny from all
</Files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:36:55.153

尝试将其添加到您当前的规则之上（就在下面`Options +FollowSymlinks`）：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^\?]*)\?(.*?)&?site=([^&\ ]+)([^\ ]*)
RewriteRule ^ http://%4.domain.com/%2?%3%5 [L,R] 
```

因此，当有人在 URL 地址栏中键入类似的内容`http://domain.com/some/path/to/file.php?foo=bar&site=user2&other=param`时，他们将被重定向到（并且地址栏更改为）：`http://user2.domain.com/some/path/to/file.php?foo=bar&other=param`

# algorithm - 查找给定值的最大值和最小值的简单算法

> ID：12517954
> 
> 赞同：0
> 
> 时间：2012-09-20T17:43:28.367
> 
> 标签：algorithm

不需要代码，只需要简单的数学理论。

像：

*   打印“输入你的年龄”
*   阅读（年龄）
*   如果年龄>20
*   结果="成人"
*   打印“你是”
*   打印（结果）

我将参加 C 语言课程，但在此之前我想学习一些基础知识。我需要一个程序/算法，它使用**multiple-if 或 nested-if**找到三个数字的最大值和最小值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:02:15.977

有一个简单的方法：

```
int min(int a, int b, int c){
    if (a <= b && a <= c){
        return a;
    }
    if (b <= a && b <= c){
        return b;
    }
    if (c <= a && c <= b){
        return c;
    }
} 
```

有最少比较次数的方法：

```
int min(int a, int b, int c){
    if (a < b){
        if (a < c){
            return a;
        }
        else{
            return c;
        }
    }
    else{
        if (b < c){
            return b
        }
        else{
            return c;
        }
    }
} 
```

由于[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#C)，代码行数最少：

```
int min(int a, int b, int c){
    return (a<b)?((a<c)?a:c):((b<c)?b:c);
} 
```

评论中提到了twalberg的方式：

```
int min(int a, int b){
    if (a <= b){return a;}
    else{return b;}
}

int min(int a, int b, int c){
    return min(min(a,b), c);
} 
```

max 也可以通过所有这些方式定义，替换`<`为`>`. 您还可以根据以下方式定义它`min`：

```
int max(int a, int b, int c){
    return -min(-a, -b, -c);
} 
```

如果您还不想学习如何声明函数，您可以将其中的一些直接放到您的主函数中。比如第二种方法：

```
//todo: translate this pseudocode into C
print "enter three numbers"
read(a)
read(b)
read(c)
if (a < b){
    if (a < c){
        min = a;
    }
    else{
        min = c;
    }
}
else{
    if (b < c){
        min = b
    }
    else{
        min = c;
    }
}
print "the minimum value is " + min 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:38:20.807

鉴于问题要求，有两个含义将确定问题的最佳解决方案：

1.  您必须检查每个数字才能获得解决方案
2.  最好的解决方案意味着只检查每个数字一次

它会是这样的：

```
1: Maximum = 0
2: Minimum = 0
3: read(number)
4: if number > Maximum then Maximum = number
5: if number < Minimum then Minimum = number
6: Repeat from 3 as many times as needed
7: Print Maximum and Minimum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T02:06:05.123

注意：这不是 C；它是 Javascript。然而，对于这样一个普遍的问题，教训是相同的——事实上，由于语法上的相似性，许多相同的代码可以用于等效的 C 性能测试。

在[这个 JSPerf](http://jsperf.com/minmax-linear-recursive-native)中，我有四种获取数字数组的最小值/最大值的方法。第一个是直接的方式：

1.  将最小值和最大值设置为 arr[0]
2.  从 1 开始循环，使用索引 i
    1.  检查 arr[i] < min; 如果是这样，将 min 设置为 arr[i]
    2.  检查 arr[i] > max; 如果是这样，将 max 设置为 arr[i]
3.  在循环结束时，返回一个包含 [ min, max ] 的数组

第二种使用分而治之的方法。这通常是对 O(n^2) 问题的改进（例如，一种排序，其中每个值都必须使用简单的实现与每个其他值进行比较），但是对于像这样的 O(n) 问题，不会获得任何东西，并增加堆栈开销。

4.  如果数组长度为 1 个元素，则返回 [ arr[0], arr[0] ]
5.  如果数组是 2 个元素长
    1.  如果 arr[0] > arr[1]，则返回 [ arr[1], arr[0] ]
    2.  否则，返回 arr
6.  将数组大致拆分为左半部分和右半部分，每半部分调用 minmax
7.  返回 [ min(left[0], right[0]), max(left[1], right[1] ]

还有另一个版本的递归，它使用索引来避免创建新数组来执行拆分（Array#slice() 从旧数组中的数据创建一个新数组；这种类型的分配会使事情陷入困境）。

然后是使用 JS 的数学库作为参考点的本机解决方案。

我已经在所有主流浏览器中运行它，因此 JS 引擎实现的任何差异都可以看到。

这里有几个教训：

1.  有时最简单的解决方案是最好的
2.  当您处理大量不会更改的数据时，请尽可能指出它；不要产生新的对象来完成一些数学可以处理的工作。
3.  仅仅因为某事很聪明并不意味着它是正确的（作为一个菜鸟，你真的需要把它放在心上）
4.  请注意，本机实现几乎与指向递归版本一样慢，而在 Chrome 的情况下，速度更慢。我不确定为什么会这样，但我希望它是从数组到本机参数列表的隐式强制转换，*两次*（通过 Function#apply()）。我们这样做的性能损失是一个意想不到的结果，并且是您在使用库时需要注意的事情。当您在库代码中遇到性能痛点时，可能只是库代码试图做的事情超出了您的预期；将您的数据转换为库的首选格式可能效果不佳。无论问题是什么，有时在没有所有附加功能的情况下将等效功能组合在一起是正确的答案。
5.  平台很重要。一个系统上的快速可能不在另一个系统上。您不必测试那里的所有内容，但您应该了解您的用户使用什么，并针对其中的每一个进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T22:40:15.303

然后是嵌套宏方法（正如 twalberg 在评论中提到的那样），即让编译器从简单的构造中找出它。现代编译器擅长于此。

```
#define MIN(a,b) (a) < (b) ? (a) : (b) 
```

括号对于获得正确的操作优先级和顺序很重要。

要获得至少三个数字：

```
min3 = MIN(MIN(a,b), c); 
```

四个数字：

```
min4 = MIN(MIN(a,b), MIN(c,d)); 
```

等等。这具有进一步的优势，即您不需要整数或实数的不同形式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-11T07:15:31.803

有很多方法可以做到这一点

> 1.  将元素放入 Array 并找到 max/min。
> 2.  声明一个最大/最小变量，一一检查元素并根据条件更新ver。

**对于示例 1，我正在编写代码，从 C++ 中的数组中查找 Max**

```
#include<iostream>
#include <bits/stdc++.h>
using namespace std;

int main(){
    int arr[]{2,1,4,12,6,3,20};
    int sum = INT16_MIN;
    for(int x : arr){
        if(x>sum){
            sum =x;
        }
    }
    cout << sum;
    return 0;
} 
```

**对于示例 2，我正在编写一个函数，从 C++ 中的 4 个元素中找到 Max**

```
int max_of_four(int a,int b,int c,int d){
    int max = INT16_MIN; //Min Int(16) possible in Code
    if(a>max){
        max=a;
    }if(b>max){
        max=b;
    }if(c>max){
        max = c;
    }if(d>max){
        max =d;
    }
    return max;
} 
```

您可以用 N 组数字替换“四”，但这不是一种有效的方法。使用第一种方法找到最大/最小值

> 为了找到最小值，将变量设为“INT16_MAX”并将条件从“>”更改为“<”。

# mysql - 创建程序不起作用

> ID：12517959
> 
> 赞同：0
> 
> 时间：2012-09-20T17:43:41.263
> 
> 标签：mysql

我在创建一个在 MySQL 中使用 VIEW 的过程时遇到问题，我到处查看，它看起来不错，但它不起作用

这是我的视图，运行良好：

```
CREATE OR REPLACE VIEW V_Ficha AS SELECT R.Id_rota, R.Tempo, R.Nome, F.Data, F.Tab_pesquisador_Id_pesquisador as Pes, 
F.Tab_municipio_Id_municipio as Mun, F.Tab_instrumento_Id_instrumento as Ins FROM Tab_ficha F LEFT JOIN Tab_rota AS R ON F.Tab_rota_Id_rota = R.Id_rota; 
```

这是我的程序：

```
CREATE OR REPLACE PROCEDURE P_Ficha(IN id INT) 
BEGIN 
  IF id > 1 THEN 
    SELECT * FROM V_Ficha WHERE Id_rota = id;
  ELSE 
   SELECT 'Id must be greater than 0' AS Msg;
  END IF;
END; 
```

我放了分隔符，但它仍然无法正常工作

```
DELIMITER //
CREATE OR REPLACE PROCEDURE P_Ficha(IN id INT) 
BEGIN
    IF (id > 1) THEN 
        SELECT * FROM V_Ficha WHERE Id_rota = id;
    ELSE 
        SELECT 'Id must be greater than 0' AS Msg;
    END IF;
END 
//
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:51:40.667

确保您已更改分隔符。否则只要你有一个“;” 在你的存储过程中，MySql 会认为你的存储过程已经完成。

在创建存储过程之前和之后更改分隔符。

在前面添加这一行：

```
delimiter // 
```

在存储过程的末尾添加“//”，然后在后面添加这一行：

```
delimiter ; 
```

# sql - 简单但嵌套的 SELECT 查询

> ID：12517961
> 
> 赞同：0
> 
> 时间：2012-09-20T17:43:44.410
> 
> 标签：sql, select, join, union

我有四张桌子`a,b,c,d`。在表中`a`我有一对`id, name`. 在表中`b`我有一对`idx, idy`. 来自`b.idy`表`a.id`。在表中，`c, d`我有一对`id, value`与 table 相关`b.idx`。

我必须执行这样的查询：

```
SELECT c.value, d.value 
FROM a,b,c,d
WHERE a.name = "test" AND b.idy = a.id AND (c.id = b.idx AND d.id = b.idx) 
```

问题是有时表中缺少记录，`c, d`因此将返回零记录，但如果在或`AND`中可用，我需要有结果。我也不能使用，因为它也为两个表返回其他行。`c``d``OR`

我想会有一个使用`UNION`甚至只是嵌套`SELECT`s 的解决方案。我更喜欢不使用`JOIN`或使用单独的查询。

提前致谢！

**更新：**

避免使用的原因`JOIN`是性能。我现在正在处理的结构比这个复杂得多，所以我确信`JOIN`在即将到来的将来我会遇到严重的性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:47:40.367

我想你想使用一个`LEFT JOIN`：

```
SELECT c.value, d.value 
FROM a
LEFT JOIN b
    ON a.id = b.idy
LEFT JOIN c
    ON b.idx = c.id
LEFT JOIN d
    ON b.idx = d.id
WHERE a.name = "test" 
```

使用逗号连接语法`INNER JOIN`要求记录在所有表中都可用。

如果您在复习`JOIN`语法方面需要帮助，有一个有用的指南：

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:46:14.537

```
select c.value, d.value
from a
inner join b on b.idy = a.id
left outer join c on c.id = b.idx
left outer join d on d.id = b.idx
where a.name = "test" 
    and coalesce(c.id, d.id) is not null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:53:59.770

```
SELECT c.value, d.value 
FROM a,b,c,d
WHERE a.name = "test" AND b.idy = a.id AND (c.id = b.idx AND d.id = b.idx)
UNION
SELECT c.value, NULL
FROM a,b,c
WHERE a.name = "test" AND b.idy = a.id AND c.id = b.idx AND NOT EXISTS( SELECT NULL FROM d where d.id = b.idx )
UNION
SELECT NULL, d.value
FROM a,b,d
WHERE a.name = "test" AND b.idy = a.id AND d.id = b.idx AND NOT EXISTS( SELECT NULL FROM c where c.id = b.idx ) 
```

# wcf - WCF 响应太长 - 如何在 Silverlight 中处理？

> ID：12517964
> 
> 赞同：0
> 
> 时间：2012-09-20T17:43:52.440
> 
> 标签：wcf, silverlight

我的 Silverlight 4 客户端使用 .NET 3.5 WCF 服务。

该服务具有**[SilverlightFaultBehavior]**属性，并且来自服务的异常详细信息很好地传输到 Silverlight。

但是，当响应大小超过限制时，客户端仍然会收到旧的**NotFound**异常。有没有解决的办法？（我不想增加最大消息大小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:56:04.277

你试过提琴手吗？ [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:03:27.567

我现在有这个消息。我使用 .Net 库作为域模型（WCF 引用它）和 Silverlight 库，将类添加为来自 .net 库的链接。Silverlight 项目指的是 silverlight 库。问题是：

我忘记了将 .Net 类库中的类添加到 Silverlight 类库。当我修复它、构建和更新服务参考时，它运行良好。这也可能是你的问题。对不起我的英语。我希望这会有所帮助。

# c# - 具有不同程序集引用的 Assembly.CreateInstance

> ID：12517965
> 
> 赞同：0
> 
> 时间：2012-09-20T17:43:57.520
> 
> 标签：c#, .net, reflection, appdomain

我创建了一个支持重新加载插件并且不使用多个 AppDomain 的插件架构。我只是简单地创建一个新程序集，当 dll 更改时，使用该`Assembly.Load(Byte[])`方法创建插件实例，然后通过`myAssembly.CreateInstance(type.FullName)`. 这一切都很好。现在我想支持插件可以引用程序集，并且可以动态更改这些引用。我已经实现`Appdomain.AssemblyResolve`了事件，它当然可以加载插件的引用一次，但不会在引用的 dll 更改时重新加载它们。

有什么方法可以从程序集创建一个实例并告诉它哪些其他程序集用作参考？

小提示：我知道应用程序域但不能使用它们，因为我不想序列化我在内存中的数据（许多 GB）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:13:56.050

.NET 将根据限定的程序集名称查找您的引用，并且仅当 .NET 无法自动解析它正在查找的程序集时（通过将限定名称和加载上下文与加载的程序集匹配，或从探测路径加载），AssemblyResolve 才会触发）。

所以如果你已经解析了一个特定的引用类型，或者它是自动解析的，你将没有机会从其他地方加载它。此外，由于无法卸载在给定 AppDomain 的特定上下文中加载的程序集（由完整的程序集名称标识），因此您将无法在同一 AppDomain 中卸载/重新加载那些引用的程序集。

# c# - 如何将密码框用作文本框？

> ID：12517969
> 
> 赞同：0
> 
> 时间：2012-09-20T17:44:19.850
> 
> 标签：c#, .net, wpf, textbox, passwordbox

我有一个，**我**`PasswordBox`需要将此控件用作. 我需要显示普通文本而不是典型的黑点**`TextBox`**

 **![在此处输入图像描述](../Images/d0747bfe3ae0dcdd45957a07dac3fd2b.png)

有没有属性可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T18:15:49.483

这是你的答案：

1.  使用文本框
2.  当你想要文本屏蔽设置 TextBox.UseSystemPasswordChar = true;
3.  当您想查看文本时设置 TextBox.UseSystemPasswordChar = false;
4.  利润

例子：

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    if (checkBox1.Checked == true)
    {
        TextBox.UseSystemPasswordChar = true;
    }
    else 
    {
        TextBox.UseSystemPasswordChar = false;
    }
} 
```

黑点当你想要它们时，文字当你不想要时。您可以使用您想要的任何触发器/逻辑来打开和关闭，但这样您只使用一个控件并获得您指定所需的所有功能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T18:06:20.840

您最好的解决方案是有一个密码框，其下方有一个复选框，上面写着“显示字符”，然后在密码框上创建一个触发器，在其上覆盖一个文本框，以便根据需要输入和检索文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:07:44.870

叠加 a`TextBox`和 a `PasswordBox`，一次只保留一个`Visible`。当您想切换时，将活动的值复制到另一个，并切换它们的可见性。简单的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T17:57:30.447

我认为每个人都同意这个非常基本的解决方案：`TextBox`如果要显示用户正在输入的内容，请使用 a。**

# android - 我可以在表格布局或网格视图中动态设置行跨度吗？

> ID：12517971
> 
> 赞同：1
> 
> 时间：2012-09-20T17:44:23.937
> 
> 标签：android

我有一个 TableLayout，我想动态添加 tablerows；但我需要设置不同的行跨度。

我不知道该怎么做，也找不到解决方案。有什么办法可以做到这一点吗？谢谢您的回答。

# emacs - 如何使用 ediff 杀死环保存一个区域的缓冲区？

> ID：12517972
> 
> 赞同：2
> 
> 时间：2012-09-20T17:44:29.053
> 
> 标签：emacs, emacs-ediff

我在 emacs 中做一个 ediff，我想将该区域复制到其中一个缓冲区中，以便将其粘贴到第三个缓冲区中。显然我可以手动执行此操作，但我希望能够通过几次击键来完成此操作，类似于如何使用`a`并且`b`可用于将一个缓冲区的版本替换为另一个。

有没有办法做到这一点？

如果没有，我应该如何实施它？我之前没有做过很多emacs编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:44:59.517

查找`ediff-util.el`（它可能`ediff-util.el.gz`在您的系统上）。读取函数`ediff-copy-diff`。你想模仿这种行为。然后，您可以像这样将新功能添加到 ediff-mode 键盘映射中 `(define-key ediff-mode-map "a" 'ediff-copy-A-to-C)`。

您的函数可能应该被标记`(interactive)`并询问缓冲区名称。有关详细信息，请参阅[Emacs 交互式代码](http://www.gnu.org/software/emacs/manual/html_node/elisp/Interactive-Codes.html)。

# asp.net - 以编程方式为 Crystal Reports 设置数据库连接的正确方法

> ID：12517974
> 
> 赞同：0
> 
> 时间：2012-09-20T17:44:41.107
> 
> 标签：asp.net, vb.net, crystal-reports, connection-string, crystal-reports-xi

我是水晶报表的新手。我必须在运行时通过代码设置报表的数据源。我有一个工作代码，但它是非常不可预测的，并且一直存在很多问题。我只是想知道我是否做错了什么，或者是否有更好的方法来做到这一点。

有时我觉得报告甚至没有使用连接字符串，而是使用在独立 Crystal 应用程序的报告编译时指定的连接。这是真的？

```
 Dim connectionInfo As New ConnectionInfo

        connectionInfo.ServerName = "UID=abc;PWD=abc;Driver= {SQL Server};Server=" & Page.Request.QueryString("server") & ";Database=" & Page.Request.QueryString("database")

 Using report As New ReportDocument
            report.Load(Server.MapPath("/report/Crystal/test.rpt"))
            report.FileName = Server.MapPath("/report/Crystal/test.rpt")

            SetDBLogonForReport(connectionInfo, report)
...
 End Using

   Private Sub SetDBLogonForReport(ByVal connectionInfo As ConnectionInfo, ByVal reportDocument As ReportDocument)

        Dim tables As Tables
        tables = reportDocument.Database.Tables

        For Each table As CrystalDecisions.CrystalReports.Engine.Table In tables

            Dim tableLogonInfo As New TableLogOnInfo

            tableLogonInfo = table.LogOnInfo
            tableLogonInfo.ConnectionInfo = connectionInfo
            table.ApplyLogOnInfo(tableLogonInfo)

        Next

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:34:49.457

不久前有人问过这个问题，但我想我会在这里发布回复，以防其他人正在寻找答案。我刚刚使用了上面的代码，它工作得很好......除了一些例外。

我变了：

```
connectionInfo.ServerName = [Entire ConnectionString?] 
```

到：

```
connection.DatabaseName = [DatabaseName]
connection.UserID = [UserID]
connection.ServerName = [ServerName]
connection.Password = [Password] 
```

此外，不需要`tableLogonInfo`将循环中的变量初始化为。`New TableLogOnInfo`

我敢肯定，正如上面评论中提到的那样，那里有很多例子。我只是想我会在这里添加一个答案，因为这是我在寻找解决方案时得到的第一个结果。

# java - Java 常量示例（创建一个只有常量的 java 文件）

> ID：12517978
> 
> 赞同：43
> 
> 时间：2012-09-20T17:45:10.897
> 
> 标签：java, constants

声明只有常量的 java 文件的最佳做法是什么？

```
public interface DeclareConstants
{
    String constant = "Test";
} 
```

或者

```
public abstract class DeclareConstants
{
    public static final String constant = "Test";
} 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-20T17:47:05.560

没有一个。在必要时使用将`final class for Constants`它们声明为和静态导入所有常量。`public static final`

```
public final class Constants {

    private Constants() {
            // restrict instantiation
    }

    public static final double PI = 3.14159;
    public static final double PLANCK_CONSTANT = 6.62606896e-34;
} 
```

用法 ：

```
import static Constants.PLANCK_CONSTANT;
import static Constants.PI;//import static Constants.*;

public class Calculations {

        public double getReducedPlanckConstant() {
                return PLANCK_CONSTANT / (2 * PI);
        }
} 
```

见维基链接：[http ://en.wikipedia.org/wiki/Constant_interface](http://en.wikipedia.org/wiki/Constant_interface)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T17:52:26.173

**-**创建`Class`一个`public static final` **字段**。

**-**然后您可以使用`Class_Name.Field_Name`.

**-**您可以将 声明`class`为`final`，以便`class` **不能扩展（继承）和修改....**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:18:15.800

两者都有效，但我通常选择接口。如果没有实现，则不需要类（抽象与否）。

作为建议，请尝试明智地选择常量的位置，它们是您的外部合同的一部分。不要将每个常量都放在一个文件中。

例如，如果一组常量仅在一个类或一个方法中使用，则将它们放在该类、扩展类或实现的接口中。如果您不小心，最终可能会导致严重的依赖混乱。

有时枚举是常量（Java 5）的一个很好的替代品，看看： [http ://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-25T06:50:02.833

这个问题很老了。但我想提一下另一种方法。使用枚举来声明常量值。根据 Nandkumar Tekale 的回答，枚举可以按如下方式使用：

**枚举：**

```
public enum Planck {
    REDUCED();
    public static final double PLANCK_CONSTANT = 6.62606896e-34;
    public static final double PI = 3.14159;
    public final double REDUCED_PLANCK_CONSTANT;

    Planck() {
        this.REDUCED_PLANCK_CONSTANT = PLANCK_CONSTANT / (2 * PI);
    }

    public double getValue() {
        return REDUCED_PLANCK_CONSTANT;
    }
} 
```

**客户端类：**

```
public class PlanckClient {

    public static void main(String[] args) {
        System.out.println(getReducedPlanckConstant());
        // or using Enum itself as below:
        System.out.println(Planck.REDUCED.getValue());
    }

    public static double getReducedPlanckConstant() {
        return Planck.PLANCK_CONSTANT / (2 * Planck.PI);
    }

} 
```

**参考：** Joshua Bloch 在他的 Effective Java book 中建议使用枚举来声明常量字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-22T23:00:10.330

您还可以使用 Properties 类

这是名为的常量文件

```
# this will hold all of the constants
frameWidth = 1600
frameHeight = 900 
```

这是使用常量的代码

```
public class SimpleGuiAnimation {

    int frameWidth;
    int frameHeight;

    public SimpleGuiAnimation() {
        Properties properties = new Properties();

        try {
            File file = new File("src/main/resources/dataDirectory/gui_constants.properties");
            FileInputStream fileInputStream = new FileInputStream(file);
            properties.load(fileInputStream);
        }
        catch (FileNotFoundException fileNotFoundException) {
            System.out.println("Could not find the properties file" + fileNotFoundException);
        }
        catch (Exception exception) {
            System.out.println("Could not load properties file" + exception.toString());
        }

        this.frameWidth = Integer.parseInt(properties.getProperty("frameWidth"));
        this.frameHeight = Integer.parseInt(properties.getProperty("frameHeight"));
    } 
```

# c++ - C ++中字符串文字的数据类型是什么？

> ID：12517983
> 
> 赞同：26
> 
> 时间：2012-09-20T17:45:36.903
> 
> 标签：c++, string, literals

我对字符串文字的数据类型感到困惑。是一个`const char *`还是一个`const char`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-20T17:47:29.680

它是一个`const char[N]`（*与 相同的东西*）`char const[N]`，其中`N`是字符串的长度加上一个用于终止的`NUL`（或者如果您将“字符串的长度”定义为已经包含 ，则只是字符串的长度`NUL`）。

这就是为什么您可以`sizeof("hello") - 1`获取字符串中的字符数（包括任何嵌入`NUL`的 s）；如果它是一个指针，它将不起作用，因为它始终是系统上指针的大小（减一）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-30T08:11:16.423

`"Hello world"`是`const char[12]`（十一个字符加上`'\0'`终止符）。

`L"Hello world"`是`const wchar_t[12]`。

从 C++14 开始，`"Hello world"s`就是`std::string`.

还要注意 C++11 添加的`u8""`,`u""`和`U""`string 文字符号，它们分别指定 UTF-8、UTF-16 和 UTF-32 编码。非限定字符串文字（即`""`和`L""`）的编码是（并且一直是）实现定义的。

# c# - 根据子集合汇总属性

> ID：12517984
> 
> 赞同：4
> 
> 时间：2012-09-20T17:45:42.453
> 
> 标签：c#, asp.net, linq, linq-to-entities, rdlc

我觉得自己像一个踢屁股比赛的单腿人......我需要向我的 LINQ 数据集添加一个属性，该属性提供基于子集合属性的摘要，然后展平我的数据。（我正在创建一个 .rdlc 数据集。）我终于想出了如何展平我的数据，但我无法弄清楚如何根据哪一组审阅者提供他们的评估来得出一个值。

我有一些评估，我需要根据审稿人所属的审稿人组总结一个结果：

1.  如果审查组中的任何评估是“大问题”，则返回“大问题”。

2.  如果所有评估都说“没问题”，则返回“没问题”。

3.  如果没有评估是“大问题”并且至少有一个是空白的，则返回 null。

    下面是我创建的一个示例集，希望能证明我在说什么：

    ```
    public List<SummaryReport> CreateReport()
    {
         return Get()
             .SelectMany(rev => rev.Assessments, (rev, ass) => new { rev, ass })
             .Select(x => new SummaryReport
             {
                 ReviewID = x.rev.ReviewID,
                 ReviewerID = x.ass.Reviewer.ReviewerID,
                 Assessment = x.ass.Assessment,
                 ReviewGroupID = x.ass.Reviewer.ReviewGroup.ReviewGroupID,
                 GroupAssessment = "Need to derive this value!!??!?"
              })
             .ToList();
     }

    public List<Review> Get()
    {
        ReviewGroup GrpOne = new ReviewGroup(){ ReviewGroupID=1};
        ReviewGroup GrpTwo = new ReviewGroup(){ ReviewGroupID=2};
        ReviewGroup GrpThree = new ReviewGroup(){ ReviewGroupID=3};

        ReviewerInfo userOne = new ReviewerInfo() { ReviewerID=1, ReviewGroup = GrpOne};
        ReviewerInfo userTwo = new ReviewerInfo() { ReviewerID=2, ReviewGroup = GrpTwo};
        ReviewerInfo userThree = new ReviewerInfo() { ReviewerID=3, ReviewGroup = GrpTwo};
        ReviewerInfo userFour = new ReviewerInfo() { ReviewerID=4, ReviewGroup = GrpThree};

        Assessment asOne = new Assessment() { AssessmentID=1, Reviewer=userOne, Assessment="Big Problem"};
        Assessment asTwo = new Assessment() { AssessmentID=2, Reviewer=userTwo, Assessment="No Problem"};
        Assessment asThree = new Assessment() { AssessmentID=3, Reviewer=userThree, Assessment="No Problem"};
        Assessment asFour = new Assessment() { AssessmentID=4, Reviewer=userFour, Assessment=""};

        Assessment asFive = new Assessment() { AssessmentID=5, Reviewer=userOne, Assessment="No Problem"};
        Assessment asSix = new Assessment() { AssessmentID=6, Reviewer=userTwo, Assessment="No Problem"};
        Assessment asSeven = new Assessment() { AssessmentID=7, Reviewer=userThree, Assessment="No Problem"};
        Assessment asEight = new Assessment() { AssessmentID=8, Reviewer=userFour, Assessment="No Problem"};

        Assessment asNine = new Assessment() { AssessmentID=9, Reviewer=userOne, Assessment="No Problem"};
        Assessment asTen = new Assessment() { AssessmentID=10, Reviewer=userTwo, Assessment=""};
        Assessment asEleven = new Assessment() { AssessmentID=11, Reviewer=userThree, Assessment="No Problem"};
        Assessment asTwelve = new Assessment() { AssessmentID=12, Reviewer=userFour, Assessment="No Problem"};

        List<Assessment> firstList = new List<Assessment>() { asOne, asTwo, asThree, asFour };
        List<Assessment> secondList = new List<Assessment>() {asFive, asSix, asSeven, asEight};
        List<Assessment> thirdList = new List<Assessment>() { asNine, asTen, asEleven, asTwelve };

        Review revOne = new Review() { ReviewID=1, Assessments=firstList };
        Review revTwo = new Review() { ReviewID=2, Assessments = secondList };
        Review revThree = new Review() { ReviewID = 3, Assessments = thirdList };

        List<Review> reviews = new List<Review>() { revOne, revTwo, revThree };

        return reviews;
    }

    public class SummaryReport
    {
        public int ReviewID { get; set; }
        public int ReviewerID { get; set; }
        public string Assessment { get; set; }
        public int ReviewGroupID { get; set; }
        public string GroupAssessment { get; set; }
     }

    public class Review
    {
         public int ReviewID { get; set; }
         public virtual List<Assessment> Assessments { get; set; }
         public Review() { }
    }

    public class Assessment
    {
         public int AssessmentID { get; set; }
         public ReviewerInfo Reviewer { get; set; }
         public string Assessment { get; set; }
    }

    public class ReviewerInfo
    {
         public int ReviewerID { get; set; }
         public ReviewGroup ReviewGroup { get; set; }
    }

    public class ReviewGroup
    {
         public int ReviewGroupID { get; set; }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:16:46.877

尝试，

```
 public static List<SummaryReport> CreateReport()
    {
        return Get()
            .SelectMany(rev => rev.Assessments, (rev, ass) => new { rev, ass })
            .Select(x => new SummaryReport
            {
                ReviewID = x.rev.ReviewID,
                ReviewerID = x.ass.Reviewer.ReviewerID,
                Assessment = x.ass.AssessmentStr,
                ReviewGroupID = x.ass.Reviewer.ReviewGroup.ReviewGroupID,
                GroupAssessment = x.rev.Assessments.Any(a => a.AssessmentStr == "Big Problem") ? "Big Problem" : 
                x.rev.Assessments.All(a => a.AssessmentStr == "No Problem")? "No Problem" : null
            })
            .ToList();
    } 
```

**将评估属性的名称更改为 AssessmentStr，因为 C# 不允许属性名称与类名称相同。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:08:30.300

您可以定义一个方法，并在投影期间调用它。

*注意：将 Assessment.Assessment 属性更改为 Assessment.AssessmentDescription，因此属性名称与封闭类型不同*

```
public List<SummaryReport> CreateReport()
{
 return Get()
     .SelectMany(rev => rev.Assessments, (rev, ass) => new { rev, ass })
     .Select(x => new SummaryReport
     {
         ReviewID = x.rev.ReviewID,
         ReviewerID = x.ass.Reviewer.ReviewerID,
         Assessment = x.ass.Assessment,
         ReviewGroupID = x.ass.Reviewer.ReviewGroup.ReviewGroupID,
         GroupAssessment = DeriveGroupAssessment(x.rev.Assessments)
      })
     .ToList();
 }

private static string DeriveGroupAssessment(IEnumerable<Assessment> assessments)
{
  string assessment = null;

  if (assessments.Any(a => a.AssessmentDescription == "Big Problem"))
  {
    assessment = "Big Problem";
  }
  else if (assessments.All(a => a.AssessmentDescription == "No Problem"))
  {
    assessment = "No Problem";
  }

  // If you want the value to be null if neither of the above conditions are met, this logic is not needed
  ////if (!assessments.Any(a => a.AssessmentDescription == "Big Problem")
  ////    && assessments.Any(a => a.AssessmentDescription == string.Empty))
  ////{
  ////  assessment = null;
  ////}

  return assessment;
} 
```

# python - 如何将 ref 指向包含 Sphinx 项目中另一个文档的文档？

> ID：12517985
> 
> 赞同：2
> 
> 时间：2012-09-20T17:45:49.493
> 
> 标签：python, python-sphinx, restructuredtext

我有一个重组文本文件的目录。

Index.rst 有一个 :ref: 指向 table.rst 中的一个部分。

table.rst 使用 .. include:: 指令包含在 Footnotes.rst 中。

在 Sphinx 将文件呈现为 html 后，Index.html 中的链接指向 table.html，而不是 Footnotes.html。如何获得指向 Footnotes.html 的链接，其中包含 table.html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:16:55.593

尝试使用

```
:doc:`Footnotes.rst` 
```

# r - 是否可以通过扫描从控制台读取而不回显字符？

> ID：12517986
> 
> 赞同：6
> 
> 时间：2012-09-20T17:45:51.520
> 
> 标签：r, passwords

这是一个示例函数：

```
 passwordEntry <- function() {
            cat("Enter your password: ")
            pwd <- scan(n=1, what=character(), quiet=TRUE)
            invisible(pwd)
    } 
```

并测试功能：

```
 >   passwordEntry()
    Enter your password: 
    1: test
    > 
```

有没有办法抑制用户输入的内容？或者用其他字符替换它？我编写了一个 tcl/tk 函数来提示用户输入密码，但它在我们的 Linux 服务器上不起作用。

这是下面保罗链接的一个例子。这在 Linux 或 Windows 上都不起作用（后者可能是因为我没有合适的 C 编译器，所以会研究一下）。

`getkey3.c`

```
 #include <stdio.h>
    #include <termios.h>
    #include <unistd.h>
    void mygetch ( int *ch ) 
    {
            struct termios oldt, newt;
            tcgetattr ( STDIN_FILENO, &oldt );
            newt = oldt;
            newt.c_lflag &= ~( ICANON | ECHO );
            tcsetattr ( STDIN_FILENO, TCSANOW, &newt );
            *ch = getchar();
            tcsetattr ( STDIN_FILENO, TCSANOW, &oldt );
            return;
    } 
```

还有我的`test.r`脚本：

```
 system('R CMD SHLIB getkey3.c')
    dyn.load("getkey3.so")
    .C("mygetch",as.integer(0))
    dyn.unload("getkey3.so") 
```

我明白了：

```
 > .C("mygetch",as.integer(0))
    [[1]]
    [1] -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:44:44.957

这篇文章介绍了如何阅读单个击键：

[检测单个击键](https://stackoverflow.com/questions/6662646/detecting-single-keystrokes)

接受的答案使用一小段 C 代码来返回单独的击键。然后，您可以捕获密码的击键，并且不会向用户或`*`.

# excel - Excel VBA - 复制和粘贴

> ID：12517987
> 
> 赞同：0
> 
> 时间：2012-09-20T17:45:53.797
> 
> 标签：excel, vba

我正在尝试获得一个 VBA 编码，它将搜索格式化为日期的单元格，对于所有日期格式，再次搜索其上方的特定文本并将其复制到日期单元格所在的行。

为了说明，下面是我试图解决的数据示例。对于 C 列中格式化为日期的任何单元格，我希望代码找到客户编号（单元格 C2）和客户名称（D2）并复制到适用行的 A 列和 B 列。问题出现是因为我的数据中的许多客户都拥有不止一张优惠券，因此我无法将其硬编码为简单地位于具有日期的单元格上方的两行。我希望我说得通！

```
Customer account Name
1001010 Internal : Sales Admin (9900) 
Date         Voucher
12/7/2011    CINV00000980
1/26/2012    CINV00001011
2/9/2012     CINV00001050
3/6/2012     CINV00002003
3/13/2012    CINV00002067 
```

我现在正在尝试使用嵌套的 Do 循环（见下文），显然它不起作用。代码正在运行，但没有发生复制/粘贴。

```
Sub ARAging() 
   Dim row As Integer
    row = 2
    finalrow = ActiveSheet.UsedRange.Rows.Count
Do

    If Range(Cells(row, 3), Cells(row, 3)).NumberFormat = "dd/mm/yyyy" Then
        Do
        If Range(Cells(row, 3), Cells(row, 3)).Value = "Customer account" Then
        Range(Cells(row - 1, 3), Cells(row - 1, 4)).Select
            With Selection.Copy
            End With
        End If
        row = row - 1
        Loop Until Range(Cells(row, 3), Cells(row, 3)).Value = "Customer account"

        Range(Cells(row, 1), Cells(row, 2)).Select
            With Selection.Paste
            End With
    End If

row = row + 1

Loop Until row = finalrow
End Sub 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:25:45.177

我认为这段代码可以满足您的要求。我希望我已经包含了足够的注释来解释我的代码。如有必要，请回来提出问题。

```
' Option Explicit means every variable must be explicitly declared.  Without
' it a misspelt variable name becomes an implicit declaration.  This can be
' a very difficult error to find.
Option Explicit

Sub ARAging()

  ' On a 32-bit system, the native size is what Excel calls Long.  So integer
  ' variables are slower than long variables.

  ' My style is to start a variable name with its type and then add classifiers
  ' to identify its purpose.  This means that when I return to this macro in
  ' six or twelve months, I know what the variables are.  If you do not like my
  ' style, develop your own or develop one with colleagues.  Consistent names
  ' are a godsend during maintenence.
  Dim acctNumCust As String
  Dim rowCrnt As Long
  Dim rowFinal As Long

  With Worksheets("Sheet1")
    ' I avoid ActiveSheet unless I want the user to be able to run the macro
    ' against a worksheet of their choice.

    acctNumCust = ""
    rowFinal = .UsedRange.Rows.Count
    For rowCrnt = 2 To rowFinal

        ' In .Cells(R,C), C can be a number or a column code.
        ' If I am accessing a single cell, I do not need to make it into
        ' a range since .Cells(R,C) is a range.

      If .Cells(rowCrnt, "C").Value = "Customer account" Then

        ' Since I know column C is "Customer account", I do not need to
        ' save it.  Save the value of column 4 in a variable not the
        ' scratchpad.
        acctNumCust = .Cells(rowCrnt, "D").Value

        ' I do not like testing for the formatting.  What if the user changes
        ' it to dd-mmm-yy?

      ElseIf IsDate(.Cells(rowCrnt, "C").Value) Then
        .Cells(rowCrnt, "A").Value = "Customer account"
        .Cells(rowCrnt, "B").Value = acctNumCust

      Else

        Call MsgBox("Cell C" & rowCrnt & " is neither """ & _
                                    "Customer account"" nor a date", vbOKOnly)

      End If

    Next rowCrnt

  End With  ' Worksheets("Sheet1")

End Sub 
```

# java - 将新数据附加到 ArrayList 的简单方法

> ID：12517995
> 
> 赞同：0
> 
> 时间：2012-09-20T17:46:12.203
> 
> 标签：java, android, eclipse, android-asynctask, append

我正在制作一个显示来自`Tumblr`帐户的图像的应用程序。它加载前 20 个项目，然后在底部有一个“加载更多”按钮。单击“加载更多”按钮时，我使用 an`AsyncTask`来处理它。我已经按照我的想法设置了所有内容，但是我没有将接下来的 20 张图像附加到列表中。我已经看到其他一些项目使用自定义`listAdapter`类，但我一直在寻找一种更简单的方法来做到这一点。

这是我的代码：

```
public class Example extends Activity {

Context context = null;
ListView listView = null;
TextView footer;
int offset = 0;
ProgressDialog pDialog;

private String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset=0";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Tumblr> tumblrs;
    try {
        tumblrs = getTumblrs();
        listView = (ListView) findViewById(R.id.list);
        View v = getLayoutInflater().inflate(R.layout.footer_layout, null);
        footer = (TextView) v.findViewById(R.id.tvFoot);
        listView.addFooterView(v);
        listView.setAdapter(new UserItemAdapter(this, R.layout.listitem,
                tumblrs));

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    footer.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            new loadMoreListView().execute();
        }
    });

}

public class UserItemAdapter extends ArrayAdapter<Tumblr> {
    private ArrayList<Tumblr> tumblrs;

    public UserItemAdapter(Context context, int imageViewResourceId,
            ArrayList<Tumblr> tumblrs) {
        super(context, imageViewResourceId, tumblrs);
        this.tumblrs = tumblrs;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);

        }

        Tumblr tumblr = tumblrs.get(position);
        if (tumblr != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tumblr.image_url));
            }
        }
        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException,
        IOException, JSONException {
    searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset=0";

    ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONObject jsonObject = new JSONObject(responseBody);

    JSONArray posts = jsonObject.getJSONObject("response").getJSONArray(
            "posts");
    for (int i = 0; i < posts.length(); i++) {
        JSONArray photos = posts.getJSONObject(i).getJSONArray("photos");
        for (int j = 0; j < photos.length(); j++) {
            JSONObject photo = photos.getJSONObject(j);
            String url = photo.getJSONArray("alt_sizes").getJSONObject(0)
                    .getString("url");

            Tumblr tumblr = new Tumblr(url);
            tumblrs.add(tumblr);
        }
    }
    return tumblrs;
}

public class Tumblr {

    public String image_url;

    public Tumblr(String url) {

        this.image_url = url;
    }
}

private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        pDialog = new ProgressDialog(Example.this);
        pDialog.setMessage("Please wait..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub
        runOnUiThread(new Runnable() {
            public void run() {
                // increment current page
                offset += 20;

                // Next page request

                searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset="
                        + offset;

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(searchUrl);

                ResponseHandler<String> responseHandler = new BasicResponseHandler();

                String responseBody = null;
                try {
                    responseBody = client.execute(get, responseHandler);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                JSONObject jsonObject;
                try {
                    jsonObject = new JSONObject(responseBody);

                    JSONArray posts = jsonObject.getJSONObject("response")
                            .getJSONArray("posts");
                    for (int i = 0; i < posts.length(); i++) {
                        JSONArray photos = posts.getJSONObject(i)
                                .getJSONArray("photos");
                        for (int j = 0; j < photos.length(); j++) {
                            JSONObject photo = photos.getJSONObject(j);
                            String url = photo.getJSONArray("alt_sizes")
                                    .getJSONObject(0).getString("url");

                            Tumblr tumblr = new Tumblr(url);
                            tumblrs.add(tumblr);

                        }
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                // get listview current position - used to maintain scroll
                // position
                int currentPosition = listView.getFirstVisiblePosition();

                // Appending new data to tumblrs ArrayList

                // Setting new scroll position
                listView.setSelectionFromTop(currentPosition + 1, 0);

            }
        });

        return null;
    }

    protected void onPostExecute(Void unused) {
        pDialog.dismiss();
    }

}

 } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:50:04.290

*   制作`ArrayList`为`static`.
*   将值添加到`ArrayList`命名中`tumblrs`，然后`notifyDataSetChanged()`在`Adapter`（此处为它的 UserItemAdapter）上执行

/////////////编辑部分///////////////////////

**我的这个项目很大，所以只发布从你的角度来看很重要的 2 个类....**

**适配器类：**

```
public class ProductAdapter extends ArrayAdapter<ProductListPojo> {

    Activity a;
    Context context;
    int layoutResourceId;    
    ArrayList<ProductListPojo> plp = null;
    ImageLoader iLoader;
    public YoutubeImageLoader imageLoader;
    public ProductAdapter(Context context, int resource, ArrayList<ProductListPojo> listy) {
        super(context, resource, listy);

        this.layoutResourceId = resource;
        this.context = context;
        this.plp = listy;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        iLoader = new ImageLoader(context);
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
            imageLoader =   new YoutubeImageLoader(context);
            holder = new WeatherHolder();

            holder.imgIcon = (ImageView)row.findViewById(R.id.imageView_PrefImage);
            holder.imgIsPreffered = (ImageView)row.findViewById(R.id.imageView_isPreffered);

            holder.txtTitle = (TextView)row.findViewById(R.id.textView_HeadingPref);
            holder.txtprovider = (TextView)row.findViewById(R.id.textView_Provider);
            holder.counterParty = (TextView)row.findViewById(R.id.textView_counterparty);
            holder.closingDate = (TextView)row.findViewById(R.id.textView_ClosingDate);
            holder.term = (TextView)row.findViewById(R.id.textView_Term);
            holder.indexLink = (TextView)row.findViewById(R.id.textView_IndexLink);
            holder.investmentType = (TextView)row.findViewById(R.id.textView_InvestmentType);
            holder.productType = (TextView)row.findViewById(R.id.textView_ProductType);
            holder.li          = (LinearLayout)row.findViewById(R.id.linearLayout_IsPreferred);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        ProductListPojo product = plp.get(position);

        try{

            holder.imgIcon.setTag(product.getpId());
            imageLoader.DisplayImage("http://www.xxxxxxxx.com/Resources/Covers/FullSize/"+product.getpId()+"."+"jpg", a, holder.imgIcon);   

        }catch(Exception ex){

         holder.imgIcon.setImageResource(R.drawable.milkywhite);
        }

        holder.imgIsPreffered.setBackgroundResource(R.drawable.correct);
        if (product.isPref()){

            //holder.imgIsPreffered.setVisibility(View.VISIBLE);

            holder.li.setVisibility(View.VISIBLE);

        }else{
            //holder.imgIsPreffered.setVisibility(View.INVISIBLE);

            holder.li.setVisibility(View.INVISIBLE);
        }

       holder.txtTitle.setText(product.getOverview());
       holder.txtprovider.setText(product.getProvider());
       holder.counterParty.setText(product.getCounterparty());
       holder.closingDate.setText(dateKoKaro(product.getClosingDate().toString()));
       holder.term.setText(product.getTerm());
       holder.indexLink.setText(product.getIndexLink());
       holder.investmentType.setText(product.getInvestmentType());
       holder.productType.setText(product.getProductType());

        return row;
    }

    public String dateKoKaro(String datu){

        /*Pattern pat = Pattern.compile("\\d.?.?.?.?-.?.?.?.?.?");
        Matcher mat = pat.matcher(datu);
        String dx = new String();

        while(mat.find()){

            dx = mat.group();
        }

        System.out.println(dx);*/
        String l = new SimpleDateFormat("yyyy-MM-dd").format(new Date(Long.parseLong(datu)));
        System.out.println("THE TIME: "+l);
        String[] dxxx = l.split("-");

        Calendar c = Calendar.getInstance();
        System.out.println("Y: "+Integer.parseInt(dxxx[0])+" - "+"M: "+Integer.parseInt(dxxx[1])+" - "+"D: "+Integer.parseInt(dxxx[2]));
        if(Integer.parseInt(dxxx[1])==0){
        c.set(Integer.parseInt(dxxx[0]), Integer.parseInt(dxxx[1]), Integer.parseInt(dxxx[2]));
        }
        else{

            c.set(Integer.parseInt(dxxx[0]), Integer.parseInt(dxxx[1])-1, Integer.parseInt(dxxx[2]));

        }
        Date d = c.getTime();

        DateFormat df = DateFormat.getDateInstance(DateFormat.LONG);

        String InDate = df.format(d);

        return InDate;
    }

    static class WeatherHolder
    {
        ImageView imgIcon;
        ImageView imgIsPreffered;

        TextView txtTitle;
        TextView txtprovider;
        TextView counterParty;
        TextView closingDate;
        TextView term;
        TextView indexLink;
        TextView investmentType;
        TextView productType;
        LinearLayout li;
    }

    private Drawable LoadImageFromWebOperations(String url) {

        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            System.out.println("Exc=" + e);
            return null;
        }

    }
} 
```

**将适配器设置为 ListView 的活动：**

```
public class ProductActivity extends Activity{

    public APIHandlingClass api = APIHandlingClass.getInstance();
    public static ArrayList<ProductListPojo> apList = new ArrayList<ProductListPojo>();
    public ListView lv;

    int count = 0;
    ProductListPojo pPojo;
    ProductAdapter adpt;
    View mheader;
    View mfooter;
    boolean isInternet = false;
    Intent i;
    Button mbuttFilter;
    Button mback;
    /*Button mbuttonLiterature;
    Button mbuttonQuestion;*/
    Handler h;
    ProgressDialog pd;

    DataBaseHelper dkarkeB = new DataBaseHelper(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.productlist);

                /*mbuttonLiterature = (Button)findViewById(R.id.buttonLiterature);
                mbuttonQuestion = (Button)findViewById(R.id.buttonQuestion);*/

                mheader = View.inflate(ProductActivity.this, R.layout.headerproductlist, null);
                mfooter = View.inflate(ProductActivity.this, R.layout.giraffeimg, null);
                lv = (ListView)findViewById(R.id.listView_ProductList);
                adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);

                lv.addHeaderView(mheader,null,false);
                lv.addFooterView(mheader,null,false);
                lv.addFooterView(mfooter,null,false);
                mback = (Button)findViewById(R.id.button_Filter);
                h = new Handler();

                pd = new ProgressDialog(getParent());
                pd.setTitle("Loading...");

                apList.clear();

                if(InternetAvailable()){ 

                    System.out.println("Net hai");

                   pd.show();

                   DownloadWebPageTask task = new DownloadWebPageTask();
                   task.execute();

                }else{

                    System.out.println("Net nahi hai");

                    DownloadWebPageNewTask t = new DownloadWebPageNewTask();
                    t.execute();
                    //adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);

                    //fillList();
                    /*adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);
                    lv.setAdapter(adpt);
                    adpt.notifyDataSetChanged();*/
                     AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(getParent());
                     myAlertDialog.setTitle("--- Network Erro ---");
                     myAlertDialog.setMessage("We were unable to connect to the Internet to download product information. Please ensure you have an active data connection and restart the app.");
                     myAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                      public void onClick(DialogInterface arg0, int arg1) {

                        arg0.dismiss();

                      }});
                        System.out.println("No Internet Connectivity");

                        myAlertDialog.show();           

                }

                mbuttFilter = (Button)findViewById(R.id.button_Filter);
                /*mbuttFilter.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        i = new Intent(ProductActivity.this, ResetActivity.class);
                        startActivity(i);

                    }
                });*/

                mback.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        i = new Intent(ProductActivity.this, ResetActivity.class);
                        startActivity(i);

                    }
                });

                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {

                        i = new Intent(ProductActivity.this,ProductDetails.class);
                        //i.putExtra("keyAapo", arg2 );

                        i.putExtra("keyAapo", (int)lv.getItemIdAtPosition(arg2) );

                        startActivity(i);

                    }

                });

                /*mbuttonLiterature.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        i = new Intent(ProductActivity.this, GetLiteratureActivity.class);
                        startActivity(i);

                    }
                });

                mbuttonQuestion.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        i = new Intent(ProductActivity.this, AnyQuestionActivity.class);
                        startActivity(i);

                    }
                });
                */

    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
          String response = "";
          parseJson();
          fillList();

          return response;
        }

        @Override
        protected void onPostExecute(String result) {

        h.postDelayed(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                pd.dismiss();   
            }
        }, 3000);   

          adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);

            /*lv.addHeaderView(mheader,null,false);
            lv.addFooterView(mheader,null,false);
            lv.addFooterView(mfooter,null,false);*/
          lv.setAdapter(adpt);
          adpt.notifyDataSetChanged();
        }
      }

    /////--------------------------------------------------------------------------------------------------

    private class DownloadWebPageNewTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
          String response = "";

          fillList();

          return response;
        }

        @Override
        protected void onPostExecute(String result) {

        h.postDelayed(new Runnable() {

            @Override
            public void run() {

                pd.dismiss();   
            }
        }, 3000);   

        adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);
        lv.setAdapter(adpt);
        adpt.notifyDataSetChanged();
        }
      }

    /////--------------------------------------------------------------------------------------------------

    public void parseJson(){

        JSONArray jarr;
        dkarkeB.openDataBase();
        dkarkeB.deleteAll();
        dkarkeB.close();

        try {

            jarr = api.go();

            for(int i=0 ; i<jarr.length() ; i++){

                JSONObject jobj = jarr.getJSONObject(i);
                String mainText = new String();
                String provText = new String();
                String couText = new String();
                String fDatu = new String();
                String termText = new String();
                String indexText = new String();
                String insvText = new String();
                String prodText = new String();
                String isPref = new String();
                String jDesc = new String();
                String jCb1 = new String();
                String jCb2 = new String();
                String jCb3 = new String();
                String jCb4 = new String();
                String jspRating = new String();
                String jFRating = new String();
                String jMRating = new String();
                String jFs = new String();
                String jColl = new String();
                String jSIndex = new String();
                String jEIndex = new String();
                String jCashISA = new String();
                String jEquityISA = new String();
                String jDirect = new String();
                String jTransfer = new String();
                String jSipp = new String();
                String jCapitalAtRiskProDetails = new String();
                String jCapitalAtRiskProPercentage = new String();
                String jProValue = new String();
                String jInitialsCharges = new String();
                String jEarlyISATransfer = new String();
                String pid= new String();
                String jOpinionExplanation = new String();
                String jName = new String();
                String jTaxTreat = new String();
                String jDownSide = new String();
                String jProtectionDetails = new String();
                String jEarlySurrender = new String();
                String jOtherCharges = new String();

                try{
                 mainText = jobj.getString("Overview");
                System.out.println(mainText);
                }catch(Exception ex){

                }

                try{

                JSONObject jProv = jobj.getJSONObject("Provider");
                provText = jProv.getString("Name");
                System.out.println(provText);
                }catch(Exception ex){

                }

                try{
                JSONObject jCou = jobj.getJSONObject("Counterparty");
                couText = jCou.getString("Value");
                System.out.println(couText);
                }catch(Exception ex){

                }

                try{
                String cloText = jobj.getString("ClosingDate");
                fDatu = giveMeDate(cloText);
                System.out.println(fDatu);
                }catch(Exception ex){

                }

                try{
                termText = jobj.getString("Term");
                System.out.println(termText);
                }catch(Exception ex){

                }

                try{
                indexText = jobj.getString("IndexLink");
                System.out.println(indexText);
                }catch(Exception ex){

                }

                try{
                JSONObject jInsv = jobj.getJSONObject("InvestmentType");
                insvText = jInsv.getString("Value");
                System.out.println(insvText);
                }catch(Exception ex){

                }

                try{
                JSONObject jProd = jobj.getJSONObject("ProductType");
                prodText = jProd.getString("Value");
                System.out.println(prodText);
                }catch(Exception ex){

                }

                try{
                isPref = BooleanToString(jobj.getBoolean("IsPreferred"));
                System.out.println(isPref);
                }catch(Exception ex){

                }

                try{
                jDesc = jobj.getString("Description");
                System.out.println(jDesc);
                }catch(Exception ex){

                }

                try{
                jCb1 = jobj.getString("CashBackTier1");
                System.out.println(jCb1);
                }catch(Exception ex){

                }

                try{
                jCb2 = jobj.getString("CashBackTier2");
                System.out.println(jCb2);
                }catch(Exception ex){

                }

                try{
                jCb3 = jobj.getString("CashBackTier3");
                System.out.println(jCb3);
                }catch(Exception ex){

                }

                try{
                jCb4 = jobj.getString("CashBackTier4");
                System.out.println(jCb4);
                }catch(Exception ex){

                }               

                try{
                JSONObject jSP = jobj.getJSONObject("SPRating");
                jspRating = jSP.getString("Rating");
                System.out.println(jspRating);
                }catch(Exception ex){

                }

                try{
                JSONObject jFr = jobj.getJSONObject("FitchRating");
                jFRating = jFr.getString("Rating");
                System.out.println("I am the Fitch:"+jFRating);
                }catch(Exception ex){

                }

                try{
                JSONObject jMdy = jobj.getJSONObject("MoodyRating");
                jMRating = jMdy.getString("Rating");
                System.out.println(jMRating);
                }catch(Exception ex){

                }

                try{
                jFs = BooleanToString(jobj.getBoolean("IsFSCSProtected"));
                System.out.println(jFs);
                }catch(Exception ex){

                }

                try{
                jColl = BooleanToString(jobj.getBoolean("IsCollateralised"));
                System.out.println(jColl);
                }catch(Exception ex){

                }

                try{
                jSIndex = jobj.getString("StartingIndices");
                System.out.println(jSIndex);
                }catch(Exception ex){

                }

                try{
                jEIndex = jobj.getString("FinalIndices");
                System.out.println(jEIndex);
                }catch(Exception ex){

                }

                try{
                jCashISA = jobj.getString("MinimumCashISA");
                System.out.println(jCashISA);
                }catch(Exception ex){

                }

                try{
                jEquityISA = jobj.getString("MinimumEquityISA");
                System.out.println(jEquityISA);
                }catch(Exception ex){

                }

                try{
                jDirect = jobj.getString("MinimumDirect");
                System.out.println(jDirect);
                }catch(Exception ex){

                }

                try{
                jTransfer = jobj.getString("MinimumTransfer");
                System.out.println(jTransfer);
                }catch(Exception ex){

                }

                try{
                jSipp = jobj.getString("MinimumSIPP");
                System.out.println(jSipp);
                }catch(Exception ex){

                }

                try{
                jCapitalAtRiskProDetails = jobj.getString("ProtectionDetails");
                System.out.println(jCapitalAtRiskProDetails);
                }catch(Exception ex){

                }

                try{
                jCapitalAtRiskProPercentage = jobj.getString("ProtectionPercentage");
                System.out.println(jCapitalAtRiskProPercentage);
                }catch(Exception ex){

                }

                try{
                JSONObject jVal = jobj.getJSONObject("ProtectionType");
                jProValue = jVal.getString("Value");
                System.out.println(jProValue);
                }catch(Exception ex){

                }

                try{
                jInitialsCharges = jobj.getString("InitialCharge");
                System.out.println(jInitialsCharges);
                }catch(Exception ex){

                }

                try{
                jEarlyISATransfer = jobj.getString("EarlyISATransferCharge");
                System.out.println(jEarlyISATransfer);
                }catch(Exception ex){

                }

                try{

                jOpinionExplanation = jobj.getString("OpinionExplanation");
                System.out.println("xxxxXXXX"+jOpinionExplanation);
                }catch(Exception ex){

                }

                try{
                pid = jobj.getString("ID");
                }catch(Exception ex){

                }

                try{
                     jName = jobj.getString("Name");
                    System.out.println(jName);
                    }catch(Exception ex){

                    }

                try{
                    jTaxTreat = jobj.getString("TaxTreatment");
                    System.out.println(jTaxTreat);
                    }catch(Exception ex){

                    }

                try{
                     jDownSide = jobj.getString("Downside");
                    System.out.println(jDownSide);
                    }catch(Exception ex){

                    }

                try{

                    jProtectionDetails = jobj.getString("ProtectionDetails");
                    System.out.println(jProtectionDetails);
                }catch(Exception ex){

                }

                try{
                    jEarlySurrender = jobj.getString("SurrenderCharge");
                    System.out.println(jEarlySurrender);

                }catch(Exception ex){

                }

                try{
                    jOtherCharges = jobj.getString("OtherCharge");
                    System.out.println(jOtherCharges);

                }catch(Exception ex){

                }

                dkarkeB.openDataBase();

                dkarkeB.insertTitle( mainText,  jDesc,
                        jCb1,  jCb2,  jCb3,
                        jCb4,  jspRating,  jFRating,
                        jMRating, jFs ,  jColl,
                        jSIndex,  jEIndex,  jCashISA,
                        jEquityISA,  jDirect,  jTransfer,
                        jSipp,jCapitalAtRiskProDetails,
                         jCapitalAtRiskProPercentage,  jProValue,
                         jInitialsCharges,  jEarlyISATransfer,
                         provText,  couText,  fDatu,
                         termText,  indexText,  insvText,
                         prodText,  isPref,  pid, jOpinionExplanation,jName, jTaxTreat, jDownSide, jProtectionDetails, jEarlySurrender, jOtherCharges);

                dkarkeB.close();
                }

            System.out.println("SIZE DOES MATTER IN LIST: "+jarr.length());
        } catch (IOException e) {

            e.printStackTrace();
        } catch (JSONException e) {

            e.printStackTrace();
        }

    }

    public void fillList(){

        dkarkeB.openDataBase();
        apList = dkarkeB.getMyProductList();
        dkarkeB.close();

        }

    public String BooleanToString(boolean isKaro){

        String holdIt = new String();

        if(isKaro){

            holdIt = "true";
        }
        else{

            holdIt = "false";
        }

        return holdIt;

    }
    public String giveMeDate(String str){

        String s = str;

        Pattern pat = Pattern.compile("\\d.?.?.?.?-.?.?.?.?.?");
        Matcher mat = pat.matcher(s);
        String datu = new String();

        while(mat.find()){

            datu = mat.group();

        }

        String dtx = new String();
        ////-----------------------------------------

        try {

              //String str_date="2012-09-12";
              DateFormat formatter ; 
              Date date ; 
              formatter = new SimpleDateFormat("yyyy-MM-dd");
              date = (Date)formatter.parse(datu); 
              long longDate=date.getTime();
              System.out.println("Today is " +longDate );
              System.out.println("New "+new SimpleDateFormat("yyyy-MM-dd").format(new Date(longDate)));
              dtx = longDate+"";
              }
              catch (ParseException e){
              System.out.println("Exception :"+e); 
              }

       ////------------------------------------------
        /*String[] dxxx = datu.split("-");

        Calendar c = Calendar.getInstance();
        c.set(Integer.parseInt(dxxx[0]), Integer.parseInt(dxxx[1]), Integer.parseInt(dxxx[2]));
        Date d = c.getTime();

        DateFormat df = DateFormat.getDateInstance(DateFormat.LONG);

        String InDate = df.format(d);*/

        return dtx;

    }

    //////----------------------------------------------------Internet-------------------------------------------

    public boolean InternetAvailable() {

        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                // while(isStopMe){
                System.out.println("This is inside ................. :");
                try {
                    if (!checkConnection()) {
                        System.out.println("No Internet Connectivity");
                        ProductActivity.this.isInternet = false;
                        System.out.println("First");
                    } else {
                        if (inetAddr()) {
                            System.out.println("Net Connectivity is Present");
                            ProductActivity.this.isInternet = true;
                            System.out.println("Second");
                        } else {
                            if (mobileConnect()) {
                                System.out.println("THIRD");
                                if (inetAddr()) {
                                    System.out
                                            .println("Net Connectivity is Present");
                                    ProductActivity.this.isInternet = true;
                                    System.out.println("FOURTH");
                                } else {
                                    System.out
                                            .println("No Internet Connectivity");
                                    ProductActivity.this.isInternet = false;
                                    System.out.println("FIFTH");
                                }
                            } else {
                                System.out.println("No Internet Connectivity");
                                ProductActivity.this.isInternet = false;
                                System.out.println("SIX");
                            }
                        }
                    }
                } catch (Exception ex) {
                    System.out.println("Leak ko catch");
                }

            }
        });
        t.start();
        try {
            t.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return ProductActivity.this.isInternet;
    }

    public boolean checkConnection() {
        boolean connected = false;
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        if (cm != null) {
            NetworkInfo[] netInfo = cm.getAllNetworkInfo();
            for (NetworkInfo ni : netInfo) {
                if ((ni.getTypeName().equalsIgnoreCase("WIFI") || ni
                        .getTypeName().equalsIgnoreCase("MOBILE"))
                        & ni.isConnected() & ni.isAvailable()) {
                    connected = true;
                }
            }
        }
        return connected;
    }

    public boolean inetAddr() {
        boolean x1 = false;

        try {
            Socket s = new Socket();
            s.connect(new InetSocketAddress("ntp-nist.ldsbc.edu",37),3000);
            InputStream is = s.getInputStream();

            Scanner scan = new Scanner(is);

            while(scan.hasNextLine()){

                System.out.println(scan.nextLine());
                x1 = true;
            }
        } catch (IOException e) {

            x1 = false;

        }
        return x1;
    }
    public boolean mobileConnect() {
        boolean conn = false;
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNet = cm
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if (activeNet != null) {
            conn = true;
        } else {
            conn = false;
        }
        return conn;
    }

    /////-----------------------------------------------------Internet-------------------------------------------

    @Override
    protected void onResume() {

        super.onResume();
        //adpt.notifyDataSetChanged();
        System.out.println("The List is: "+apList+"::"+apList.size());
        if(count>0){
        adpt = new ProductAdapter(ProductActivity.this, R.layout.productitem , apList);
        lv.setAdapter(adpt);

        }
        count++;
        System.out.println("The List is: "+apList+"::"+apList.size());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:10:13.880

好吧，您的 doInBsckground() 方法中有这段代码

```
 ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>(); 
```

删除这个。只需执行 tumblers.add(object)。这足以填充同一个列表，而不是创建一个具有相同名称的新列表，这就是你所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:59:28.237

```
public class Example extends Activity { 

 Context context = null; 
   ListView listView = null; 
 TextView footer; 
 int offset = 0; 
 ProgressDialog pDialog; 
 ArrayList<Tumblr> tumblrs;
private String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?   api_key=API_KEY&offset=0"; 

@Override 
public void onCreate(Bundle savedInstanceState) { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.main);  
try { 
    tumblrs = getTumblrs(); 
    listView = (ListView) findViewById(R.id.list); 
    View v = getLayoutInflater().inflate(R.layout.footer_layout, null); 
    footer = (TextView) v.findViewById(R.id.tvFoot); 
    listView.addFooterView(v); 
    listView.setAdapter(new UserItemAdapter(this, R.layout.listitem)); 

} catch (ClientProtocolException e) { 
    e.printStackTrace(); 
} catch (IOException e) { 
    e.printStackTrace(); 
} catch (JSONException e) { 
    e.printStackTrace(); 
} 

footer.setOnClickListener(new View.OnClickListener() { 

    @Override 
    public void onClick(View v) { 
        new loadMoreListView().execute(); 
    } 
}); 

public class UserItemAdapter extends ArrayAdapter<Tumblr> { 

public UserItemAdapter(Context context, int imageViewResourceId) { 
    super(context, imageViewResourceId, tumblrs); 
} 

@Override 
public View getView(int position, View convertView, ViewGroup parent) { 
    View v = convertView; 
    if (v == null) { 

        LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        v = vi.inflate(R.layout.listitem, null); 

    } 

    Tumblr tumblr = tumblrs.get(position); 
    if (tumblr != null) { 

        ImageView image = (ImageView) v.findViewById(R.id.avatar); 

        if (image != null) { 
            image.setImageBitmap(getBitmap(tumblr.image_url)); 
        } 
    } 
    return v; 
} 
} 

public Bitmap getBitmap(String bitmapUrl) { 
try { 
    URL url = new URL(bitmapUrl); 
    return BitmapFactory.decodeStream(url.openConnection() 
            .getInputStream()); 
} catch (Exception ex) { 
    return null; 
} 
} 

 public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException, 
    IOException, JSONException { 
searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset=0"; 

ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>(); 

HttpClient client = new DefaultHttpClient(); 
HttpGet get = new HttpGet(searchUrl); 

ResponseHandler<String> responseHandler = new BasicResponseHandler(); 

String responseBody = null; 
try { 
    responseBody = client.execute(get, responseHandler); 
} catch (Exception ex) { 
    ex.printStackTrace(); 
} 

JSONObject jsonObject = new JSONObject(responseBody); 

JSONArray posts = jsonObject.getJSONObject("response").getJSONArray( 
        "posts"); 
for (int i = 0; i < posts.length(); i++) { 
    JSONArray photos = posts.getJSONObject(i).getJSONArray("photos"); 
    for (int j = 0; j < photos.length(); j++) { 
        JSONObject photo = photos.getJSONObject(j); 
        String url = photo.getJSONArray("alt_sizes").getJSONObject(0) 
                .getString("url"); 

        Tumblr tumblr = new Tumblr(url); 
        tumblrs.add(tumblr); 
    } 
} 
return tumblrs; 
 } 
 }

public class Tumblr { 

public String image_url; 

public Tumblr(String url) { 

    this.image_url = url; 
} 
 } 

 private class loadMoreListView extends AsyncTask<Void, Void, Void> { 

@Override 
protected void onPreExecute() { 
    // Showing progress dialog before sending http request 
    pDialog = new ProgressDialog(Example.this); 
    pDialog.setMessage("Please wait.."); 
    pDialog.setIndeterminate(true); 
    pDialog.setCancelable(false); 
    pDialog.show(); 
} 

@Override 
protected Void doInBackground(Void... unused) { 
    // TODO Auto-generated method stub 
    runOnUiThread(new Runnable() { 
        public void run() { 
            // increment current page 
            offset += 20; 

            // Next page request 

            searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?     api_key=API_KEY&limit=2&offset=" 
                    + offset; 

            HttpClient client = new DefaultHttpClient(); 
            HttpGet get = new HttpGet(searchUrl); 

            ResponseHandler<String> responseHandler = new BasicResponseHandler(); 

            String responseBody = null; 
            try { 
                responseBody = client.execute(get, responseHandler); 
            } catch (Exception ex) { 
                ex.printStackTrace(); 
            } 

            JSONObject jsonObject; 
            try { 
                jsonObject = new JSONObject(responseBody); 

                JSONArray posts = jsonObject.getJSONObject("response") 
                        .getJSONArray("posts"); 
                for (int i = 0; i < posts.length(); i++) { 
                    JSONArray photos = posts.getJSONObject(i) 
                            .getJSONArray("photos"); 
                    for (int j = 0; j < photos.length(); j++) { 
                        JSONObject photo = photos.getJSONObject(j); 
                        String url = photo.getJSONArray("alt_sizes") 
                                .getJSONObject(0).getString("url"); 

                        Tumblr tumblr = new Tumblr(url); 
                        tumblrs.add(tumblr); 

                    } 
                } 

            } catch (JSONException e) { 
                // TODO Auto-generated catch block 
                e.printStackTrace(); 
            } 

            // get listview current position - used to maintain scroll 
            // position 
            int currentPosition = listView.getFirstVisiblePosition(); 

            // Appending new data to tumblrs ArrayList 

            // Setting new scroll position 
            listView.setSelectionFromTop(currentPosition + 1, 0); 

        } 
    }); 

    return null; 
} 

protected void onPostExecute(Void unused) { 
    pDialog.dismiss(); 
} 

} 
```

}

这就是我的建议。我已经将`tumblrs`列表的第一个声明从 oncreate 移到了活动类本身。我已经将该`asyctask`类作为该活动的子类，这样您就不必将`tumblrs`其作为参数传递给`new UserItemAdapter()`. 我已经为你删除了那个论点。并且关于`this.tumblrs=tumnlrs`你不再需要那个了。如果您在其他地方使用，请引用在 Activity 类本身中声明的`tumblrs`相同对象。`tumblrs`您甚至`tumblrs`可以像上面的答案中提到的那样保持静态。事实上，将其设为静态是最好的方法。

# python - 串行协议问题将代码从 C 移植到 Python

> ID：12517997
> 
> 赞同：0
> 
> 时间：2012-09-20T17:46:18.793
> 
> 标签：python, serial-port, protocols, pyserial

我是 C 和复杂的串行通信的初学者。我将尽力提供有关此问题的所有信息；让我知道我是否应该提供任何额外的帮助。

我正在将串行设备（微操作器）的通信协议从 C 移植到 Python，以便在我的实验室正在开发的 Python 应用程序中使用。该公司为我们提供了用于与设备交互的小型命令行实用程序的源代码。使用这个逻辑，我们的 Python 模块能够生成正确/相同的数据块，包括 CRC。但是，当 Python 代码发送一个数据块（与 C 代码生成的数据块相同）时，它不会收到设备的响应。使用串行端口监控程序（Free Serial Port Monitor），我注意到 Python 和设备之间的通信在某些情况下与公司提供的实用程序不同。

这是提供的实用程序的日志屏幕截图，它可以正常工作。它显示了一个数据块的发送及其响应，以及第二个数据块的发送和响应的开始。

![来自实用程序的日志示例](../Images/3f3473628438a5b5d94c0e0b4bbb51bc.png)

这是我们的 Python 代码发生的情况的屏幕截图；如您所见，它发送数据块而没有响应。

![来自python的日志示例](../Images/d5f74316cf4b05c23d8b9b64cd0ed7e9.png)

至于其他可能有用的信息，我使用的是标准 Python 串行库。数据块的结构是 14 个 ASCII 字符，以 STX 开头，以 ETX 结尾。前 8 个数据字符对应于函数、地址、值等，而后 4 个字符是 CRC。

正如我所说，我在这方面有点菜鸟，我真的不知道从哪里开始。任何可能帮助我解决这个问题的建议或帮助或资源将不胜感激，如果我应该提供任何更具体的信息，请告诉我！

[http://reentry.mit.edu/extserialport.c](http://reentry.mit.edu/extserialport.c)

[http://reentry.mit.edu/extserialport.h](http://reentry.mit.edu/extserialport.h)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T19:24:25.357

我发现 pyserial 提供的 win32serial.py 直接（绑定？）到 Windows API 串行设置，在我逐行复制 C 代码中的设置（包括流控制和 RTS）之后，这似乎有效。非常感谢@Serge 的时间和帮助！