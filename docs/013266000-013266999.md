# StackOverflow 问答 13266000-13266999

# opencv - 我的负样本的质量会影响我的 haar 训练器的输出吗？开放式CV

> ID：13266007
> 
> 赞同：2
> 
> 时间：2012-11-07T08:44:12.550
> 
> 标签：opencv, cascade, sample, object-detection

所以首先，我试图从一张乐谱上检测音乐符号。假设，在这种情况下，我们在这张表[http://www.anzacday.org.au/中寻找 gclef](http://www.anzacday.org.au/miscellaneous/lastpost.gif) [http://upload.wikimedia.org/wikipedia/commons/f/ff/GClef.svg](http://upload.wikimedia.org/wikipedia/commons/f/ff/GClef.svg)[杂项/lastpost.gif](http://www.anzacday.org.au/miscellaneous/lastpost.gif)。

对于正样本，我使用了一个谱号图像并将其旋转到我需要的角度，以涵盖所有可能的形状，即从一本书到另一本书的变化。2000 个样本，在 haartrainer 中使用 1500 个。

对于负样本，我下载了 3019 张随机图像并正在使用它们，当然检查它们都没有 gclef 符号。负面图像是云、办公室、房屋、建筑物、树木、笔记本电脑。实际上我在stackoverflow上找到了一个链接，请不要让我去寻找它......使用3018个负样本。

负样本重要吗？即，如果我的负样本是云和房屋，我会得到比没有谱号的乐谱更清晰的结果吗？即负样本会影响物体检测吗？我已经创建了两个具有 10-14 个阶段的级联文件，我得到了非常不同的结果。但是通过裁剪乐谱来创建 3000 个负样本是一件很痛苦的事情……

我的对象检测器不打算在野外工作，而只能在扫描的乐谱上工作，所以它唯一会遇到的就是音乐符号......如果 Haartraining 不是办法，请指出！完成n00b，只是想办法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:05:21.773

如果您不期待房屋、树木和汽车，为什么要将它们用于负样本？更好地使用实际出现在要分析的图像中的图像补丁。例如，低音谱号更接近于 ag 谱号，而不是树形补丁。实际上，您图像上的几乎每个符号都更接近于谱号而不是真实世界的图像，因为您的真实世界不是位图样式。

您是否在一次训练中使用了不同的谱号旋转方式？不要这样做！Haar 训练不是旋转不变的。如果您希望您的工作表被旋转，您应该更好地旋转图像并为每个旋转的图像运行检测。

或者...您可以通过检测线条（例如使用霍夫线）来检测纸张的方向，仅将其旋转一次以获得直立图像，然后运行检测。

您可以从几个样本开始进行测试（假设 10 个阳性，100 个阴性）。训练不会花那么长时间。g谱号应该很容易训练，因为它很有特点。如果您发现它朝着正确的方向发展，您可以添加样本以改进检测器的质量。

祝你好运！:)

btw.：你是小号手吗？;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:53:03.950

是的，否定确实很重要，您应该在可能的最佳条件下训练您的分类器，即在预测期间使用您将给出的图像，即乐谱的图像。因此，将没有 g-clef 的乐谱中提取的图像作为负样本。您仍然可以将其他类型的图像添加到负片集中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T11:51:20.137

这是一组负面图像： [http ://tutorial-haartraining.googlecode.com/svn/trunk/data/negatives/](http://tutorial-haartraining.googlecode.com/svn/trunk/data/negatives/)

# javascript - 何时使用 node-mysql 关闭 MySQL 连接？

> ID：13266013
> 
> 赞同：32
> 
> 时间：2012-11-07T08:44:33.283
> 
> 标签：javascript, mysql, node.js

目前使用：[https ://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

我有以下代码：

```
var connection = mysql.createConnection({
    host     : 'localhost',
    user     : 'me',
    password : 'secret',
    database : 'Database1'
});
app.put('/api/upload', function(req, res, next)
{
    connection.connect();
    doMultipleQueries(function(err)
    {
        connection.end();
    });          
}; 
```

put 请求工作得很好，但是第二次调用它，我收到以下错误

```
events.js:68
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Cannot enqueue Handshake after invoking quit.
    at Protocol._validateEnqueue (/Users/anon/Desktop/project Web/node_modules/mysql/lib/protocol/Protocol.js:110:16) 
```

我应该保持连接打开直到服务器死机吗？

更新：当我`mysql.createConnection`像这样移动到 put 请求函数时：

```
var connection = null; 
app.put('/api/upload', function(req, res, next)
{
    connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'me',
        password : 'secret',
        database : 'Database1'
    });
    connection.connect();
    doMultipleQueries(function(err)
    {
        connection.end();
    });          
}; 
```

它工作正常。这是否意味着`connection.end()`关闭`mysql.createConnection`创建的内容并且无法重新连接？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-07T09:02:31.320

[connection.end()](https://github.com/felixge/node-mysql/blob/master/Readme.md#terminating-connections)无论致命错误，它都能正常工作。`COM_QUIT`如果在发送数据包之前发生致命错误，`err`将向回调提供一个参数，但无论如何都会终止连接。

还要检查[destroy() 方法](https://github.com/felixge/node-mysql/blob/master/Readme.md#terminating-connections)。这将导致底层套接字立即终止。

您可以添加错误处理程序。

[https://github.com/felixge/node-mysql/blob/master/Readme.md#error-handling](https://github.com/felixge/node-mysql/blob/master/Readme.md#error-handling)

```
// I am Chuck Norris:
connection.on('error', function() {}); 
```

* * *

一旦终止，现有的连接对象就不能按设计重新连接。

在这里检查。它显示断开连接后重新连接。

[https://github.com/felixge/node-mysql/blob/master/Readme.md#server-disconnects](https://github.com/felixge/node-mysql/blob/master/Readme.md#server-disconnects)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-26T00:30:27.390

我相信正确的方法是在启动时为您的应用程序建立连接，并`end()`在您的应用程序关闭时获得连接。

# iphone - IOS：以编程方式创建 UI 或使用界面生成器

> ID：13266020
> 
> 赞同：0
> 
> 时间：2012-11-07T08:45:07.900
> 
> 标签：iphone, ios, interface-builder

我们正在 iOS 中构建一个更大的移动应用程序。我们需要分离组件。团队中有两种声音：

1.  使用界面生成器，就可以了。
2.  以编程方式，如果有任何错误，我们可以做得很好。

有没有人参与并有经验可以分享一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:11:50.253

起初我们有一个大小接近 20MB 的应用程序。最初它是以编程方式设计的（甚至不是单个 xib 文件）。最近我们用 xib 重新设计了我们的应用程序。它将我们的应用程序大小增加到 25 MB。为资源中的 xib 文件添加了额外的 5MB。

我们的应用程序是通用应用程序（iPhone 和 iPad）。所以我们需要为 iPhone 和 iPad 提供单独的 xib。

所以根据你的要求来选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:55:12.593

我认为两者都有优点和缺点

通过界面生成器

优势

*) 与以编程方式相比，您可以非常快速地准备视图

坏处

*) 您不能访问已创建视图的内存管理。

通过以编程方式

优势

*) 您可以自行管理创建视图的内存。

坏处

*) 与界面构建器相比，准备视图需要很多时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:55:27.017

如果我是你，我会选择使用 Interface Builder，它易于使用，而且它确实是一个很棒的工具。此外，即使您使用 IB，您也可以在代码中与 UI 进行交互（使用 IBOutlet 将您的 UI 组件连接到 IB ;)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:18:47.660

在我看来，我更喜欢以编程方式，因为它可以让您在返工或添加组件方面获得更多控制。

# php - 在 apache 中设置文档根目录

> ID：13266023
> 
> 赞同：0
> 
> 时间：2012-11-07T08:45:13.487
> 
> 标签：php, apache

我在“E”驱动器中安装了 php(wamp)。实际上，我的项目在“F:”驱动器中。

如何在 apache httpd.conf 文件中设置文档根目录以访问 F: 驱动器中的项目。

例如，如果我输入“http://127.0.0.1/projectname”，它应该指向“F”驱动器项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:56:23.887

如果您需要更改文档根目录，则在*httpd.conf中找到***<Directory**并在那里进行更改。它现在很可能是**<Directory "c:/wamp/www/">**或类似的。更改并保存后，您可以重新启动 WAMP。

 ***另一方面，如果您只想让那个项目“http://localhost/thisproject”指向其他地方，您可以使用别名。

1.  单击时钟旁边的 WAMP 图标。
2.  转到*Apache* >*别名目录*并单击**添加别名**
3.  按照提示进行操作。
4.  重启 WAMP***

# java - Android动态壁纸服务-获取屏幕旋转

> ID：13266027
> 
> 赞同：2
> 
> 时间：2012-11-07T08:45:30.893
> 
> 标签：java, android, live-wallpaper

我尝试为 android 制作动态壁纸，但我无法获得屏幕旋转，因为 lwp - 这是一项服务，而不是活动。我需要整数值（0/90/180/270），而不是方向（横向/纵向），就像我这样称呼：

```
((Activity) context).getResources().getConfiguration().orientation; 
```

有可能的？我尝试了很多方法，阅读了很多文章，但我做不到，也找不到有用的信息。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:59:01.647

所以，我找到了解决方案:)

```
public int getRotation() {
    int orientation = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getOrientation();

    switch (orientation) {
        case Surface.ROTATION_90:  return 90;
        case Surface.ROTATION_180: return 180;
        case Surface.ROTATION_270: return 270;
        default: return 0;
    }
} 
```

但在我的情况下，它有点问题，还不知道为什么：如果您将设备置于 0 度位置（纵向）并旋转到 180 度，则不会检测到任何东西，或者从 90 到 270，反之亦然。但是，如果您将设备从 0 旋转到 90 或 270，或者从 90 旋转到 180 和 0 等等 - 一切都很好（不同的方向）。

# php - MERGE INTO 在 PHP 中不起作用？

> ID：13266028
> 
> 赞同：0
> 
> 时间：2012-11-07T08:45:32.533
> 
> 标签：php, oracle, oracle11g

我的`MERGE INTO`语句使用 SQL Developer 在 SQL 中工作：

```
MERGE INTO EMAIL_LIST d USING (SELECT 'stackoverflowuser95@gmail.com' EMAIL FROM DUAL) s ON (d.EMAIL = s.EMAIL) WHEN NOT MATCHED THEN INSERT (EMAIL) VALUES (s.EMAIL); 
```

但是在 PHP 中尝试时不起作用：

```
$update_or_insert_list = oci_parse($conn,
                                   "MERGE INTO EMAIL_LIST d USING (SELECT :email EMAIL FROM DUAL) s ON (d.EMAIL = s.EMAIL) WHEN NOT MATCHED THEN INSERT (EMAIL) VALUES (s.EMAIL);"
); // Also tried with ':email' and/or with ; inside the SQL statement

oci_bind_by_name($update_or_insert_list, ':email', $email);

oci_execute($update_or_insert_list); 
```

这是表格：

```
CREATE TABLE EMAIL_LIST ( 
    EMAIL VARCHAR2 (100)  NOT NULL
);
ALTER TABLE EMAIL_LIST
    ADD CONSTRAINT PK_EMAIL_LIST PRIMARY KEY ( EMAIL ) ;

-- And yes, this is a test-case! 
```

### 如何让 MERGE INTO 在 PHP 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:12:45.950

这不是`MERGE`错误，请删除查询中的结尾`;`。

最后的分号不是 SQL 的一部分。它用于各种客户端界面（SQL*Plus、SQL Developer...）以指示 SQL 语句的结束。在 PHP 中，每个请求都是一条 SQL 语句，因此分号不是必需的。

# pdf - (DOORS/DXL) 导出为 pdf 或使用给定模板打印

> ID：13266029
> 
> 赞同：5
> 
> 时间：2012-11-07T08:45:33.827
> 
> 标签：pdf, pdf-generation, report, ibm-doors

我们有兴趣从正式模块导出/打印一个视图。由于我们希望它可以是一个官方文档，我们希望添加我们的公司模板，该模板有自己的首页，它自己的页眉和页脚页面，具有给定的文本字体、大小和颜色，以及插入的图像（公司符号、客户的）。

据我所知，DOORS 让我们打印添加页眉和页脚但没有图像。另一方面，可以添加模板导出到 Word，但我不能直接将其导出为 pdf 格式或打印机。

对我们来说重要的是，可以在没有 Word 或任何其他编辑器管理的情况下直接由门制作公司文档，以便 DOORS 文档可以直接发布给客户而无需外部更改。

是否可以通过 DXL 脚本实现？或者还有其他选择吗？

我想许多用户必须使用他们公司的公司图像打印（或制作 pdf 文件），我认为这非常有用。

预先感谢您的帮助。

此致，

杰米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T13:18:34.197

> 是否可以通过 DXL 脚本实现？

恕我直言。我已经编写了一个 DXL 脚本来将 DOORS 模块导出到可以编译成 PDF 的 LaTeX 文件。您将在此答案的末尾找到它。随意调整它以适应您的需求。在运行它之前，您需要下载“ [Smart Folder Browser](http://www.smartdxl.com/content/?p=618) ”的源代码，并将其存储在我的脚本之外，作为“smartFolderBrowser.inc”。Die extension inc 表示这是一个包含文件，而不是一个独立的 DXl 程序。

当然，每个想要使用这种方法的用户都需要一个已安装的 TeX 发行版，比如[MiKTeX](http://www.google.de/url?sa=t&rct=j&q=miktex&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://miktex.org/&ei=-K6bUJnTKofwsgbRlIDQCg&usg=AFQjCNHgQLBEuvR17QqYsxZtVJPBrk0-IA)。DXL 脚本可以在导出后使用 DXL 内置功能启动 PDF 构建`void system(string command)`。

使用您的自定义 DXL LaTeX 导出脚本，您必须完全控制生成的 PDF 的布局。但请注意 TeX 应用的布局规则。配置（强制）TeX 以呈现文档是一项非常具有挑战性的任务，因为它是使用 M$ Word 创建的。

```
// DOORS LaTeX Export
/**
Copyright (c) 2012-2013 Kai K.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
pragma encoding, "UTF-8"

#include "smartFolderBrowser.inc"

DBE dbeOutputFolder = null;
DBE dbeOptions = null;
bool withTitles = true
Buffer tempBuf = create;

void escapeSpecialLaTeXCharacters(Buffer& str)
{
   Buffer temp = create;

   int i = 0;
   for(i = 0; i < length(str); ++i) 
   {
      char c = str[i]; 
      if( '\\' == c ) 
      {
         temp += "\\textbackslash{}";
      }
      else if( '{' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '}' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '_' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '^' == c )
      {
         temp += "\\textasciicircum{}";
      }
      else if( '#' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '&' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '$' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '%' == c )
      {
         temp += "\\"
         temp += c
      }
      else if( '~' == c )
      {
         temp += "\\textasciitilde{}";
      }
      else
      {
         temp += c;
      }
   }

   str = tempStringOf(temp);
   delete temp;
}

string makeLabel(Buffer& str)
{
   setempty(tempBuf);

   int i = 0;
   for(i = 0; i < length(str); ++i) 
   {
      char c = str[i]; 
      if( ' ' != c && '-' != c && '\n' != c && '\\' != c && '_' != c && '#' != c) 
      {
         tempBuf += c;
      }
   }
   return stringOf(tempBuf);
}

string makeCaption(Buffer& str)
{
   setempty(tempBuf);

   int i = 0;
   for(i = 0; i < length(str); ++i) 
   {
      char c = str[i]; 
      if( '\n' != c && '\\' != c) 
      {
         tempBuf += c;
      }
   }
   escapeSpecialLaTeXCharacters(tempBuf);
   return stringOf(tempBuf);
}

void rtf2latex(Buffer& buf)
{
   Buffer txt = create;
   Buffer temp = create;
   RichTextParagraph rp = null;
   bool envopened = false;
   for rp in tempStringOf(buf) do {
      if(rp.indentLevel > 0)
      {
         real hspace = realOf(rp.indentLevel)/20.0;
         temp += "{\\hangindent" hspace "pt\\hangafter0"
      }
      if(rp.isBullet)
      {
         temp += "\\textbullet ";
      }      
      RichText rt = null      
      for rt in rp do {
         txt = rt.text;         
            escapeSpecialLaTeXCharacters(txt);

         if (rt.italic)
         {
            temp += "\\textit{";
            temp += txt;
            temp += "}";
         }
         else if (rt.bold)
         {
            temp += "\\textbf{";
            temp += txt;
            temp += "}";
         }
         else if (rt.strikethru)
         {
            temp += "\\sout{";
            temp += txt;
            temp += "}";
         }
         else if (rt.subscript)
         {
            temp += "\\textsubscript{";
            temp += txt;
            temp += "}";
         }
         else if (rt.superscript)
         {
            temp += "\\textsuperscript{";
            temp += txt;
            temp += "}";
         }
         else if (rt.underline)
         {
            temp += "\\underline{";
            temp += txt;
            temp += "}";
         }         
         else
         {
            temp += txt;
         }
         if (rt.newline && !rt.last)
         {
            temp += "\\par\n";
         }
         else if(rt.last)
         {
            temp += "\n";
         }
      }
      if(rp.indentLevel > 0)
      {
         temp += "}"
      }
   }
   buf = tempStringOf(temp);
   delete temp;
   delete txt;  
}

void getObjectText(Object obj, Buffer& buf)
{  
   if(!null(obj))
   {
      buf = richTextFragment(richText(obj."Object Text"));
      rtf2latex(buf);
   }
   else
   {
      buf = "null";
      print("ERROR: obj null!: "dxlHere() "\n");
   }   
}

int nextCell(Stream& oss, int curCol, int numCols )
{
   if( curCol == numCols )
   {
      oss << "\\\\\n\\hline\n"
   }
   else
   {
      oss << "\t&\t"
   }

   return( curCol % numCols + 1 )
}

void writePreamble(Stream& oss)
{
   oss << "\\documentclass[a4paper]{book}\n";
   oss << "%---- packages ----\n";
   oss << "\\usepackage{ulem}\n";
   oss << "\\usepackage{color}\n";
   oss << "\\usepackage{graphicx}\n";
   oss << "\\usepackage{supertabular}\n";
   oss << "\\usepackage{hyperref}\n";
   oss << "\\usepackage{makeidx}\n";
   oss << "\\usepackage{xltxtra}\n";
   oss << "\\makeindex\n";
   oss << "%\n---- settings ----\n";
   oss << "\\setcounter{secnumdepth}{6}\n";
   oss << "\\setlength{\\parindent}{0}\n";
   oss << "\\setlength{\\parskip}{2x}\n";
   oss << "%\n---- customizations ----\n";
   oss << "\\makeatletter\n";
   oss << "\\def\\maxwidth{%\n";
   oss << "\\ifdim\\Gin@nat@width>\\linewidth\n";
   oss << "\\linewidth\n";
   oss << "\\else\n";
   oss << "\\Gin@nat@width\n";
   oss << "\\fi\n";
   oss << "}\n";
   oss << "\\makeatother\n";
   oss << "\n%---- document ----\n";
   oss << "\\begin{document}\n";
   oss << "\\tableofcontents\n";
   oss << "\\listoffigures\n";
   oss << "\\listoftables\n";
}

void writeTableHeader(Stream& oss, Object tableobj, int& numCols )
{
   //print("Enter: writeTableHeader\n");
   numCols = 0
   int numRows = 0;
   int tableWidth = 0;

   Object cellobj = null;
   Object rowobj = null;
   // first count the columns and rows
   for rowobj in table( tableobj ) do {
      if( !isDeleted( rowobj ) )
      {
         if(numCols == 0)
         {
            for cellobj in rowobj do {
               if( !isDeleted( cellobj ))
               {
                  tableWidth += getCellWidth(cellobj);
                  numCols++;              
               }
            }
         }
         numRows++;
      }
   }

   // extract the header row
   int colCount = numCols;
   int col = 0;   
   Object headrow[colCount];
   for rowobj in table( tableobj ) do {
      if( !isDeleted( rowobj ) )
      {
         if(col == 0)
         {
            for cellobj in rowobj do {
               if( !isDeleted( cellobj ))
               {
                  headrow[col] = cellobj;
                  col++;
               }
            }
         }
         else
         {            
            break;
         }
      }
   }

   // export the table head
   oss << "\\begin{centering}\n";

   Buffer buf = create;
   oss << "\\tablefirsthead{";   
   for(col=0; col<colCount; ++col) {
      getObjectText(headrow[col], buf);
      oss << tempStringOf(buf);
      if(col+1<colCount)
         oss << "&";
   }
   oss << "\\\\}\n";

   oss << "\\tablehead{";
   for(col=0; col<colCount; ++col) {   
      getObjectText(headrow[col], buf);
      oss << tempStringOf(buf);
      if(col+1<colCount)
         oss << "&";         
   }
   oss << "\\\\}\n";
   oss << "\\tabletail{\\hline}\n";   

   oss << "\\begin{supertabular}{|";
   for(col=0; col<colCount; ++col) {
      cellobj = headrow[col];
      int w = getCellWidth(cellobj);
      real rw = w;
      real tw = tableWidth;
      w = intOf(rw/tw*100.0);
      rw = realOf(w)/100.0;
      oss << "p{" rw "\\textwidth}|";
   }  
   oss << "}\n\\hline\n"

   delete buf;

   //print("Leave: writeTableHeader\n");
}

void writeTableFooter(Stream& oss, Buffer& objtext)
{
   oss << "\\\\\n\\hline\n"
   oss << "\\end{supertabular}\n\\label{tab:";
   oss << makeLabel( objtext );
   oss << "}\n\\bottomcaption{"
   oss << makeCaption( objtext );
   oss << "}\n\\end{centering}\n"
}

void writeobjheading(Stream& oss, Buffer &objNum, Buffer &text, int level )
{
   if(1 == level)
   {
      oss << "\\chapter{";
   }
   else if(2 == level)
   {
      oss << "\\section{";        
   }
   else if(3 == level)
   {
      oss << "\\subsection{";        
   }
   else if(4 == level)
   {
      oss << "\\subsubsection{";        
   }
   else if(5 == level)
   {
      oss << "\\paragraph{";        
   }
   else
   {
      oss << "\\subparagraph{";        
   }

   oss << tempStringOf(text);
   oss << "}\n\\label{sec:";
   oss << makeLabel(text);
   oss << makeLabel(objNum);
   oss << "}\n";
}

void writeFigureHeadAndExport(Stream& oss, Object img, string outputDir)
{
   Module mod = module(img);   
   string n = mod."Prefix"img."Absolute Number"".png";
   string s = exportPicture(img, outputDir "\\" n, formatPNG);   
   oss << "\\begin{figure}[ht]\n";
   oss << "\\centering\n";
   oss << "\\includegraphics[width=\\textwidth]{"n"}\n";
}

void writeFigureFooter(Stream& oss, Buffer& objtext)
{
   oss << "\\label{fig:";
   oss << makeLabel( objtext );
   oss << "}\n\\caption{"
   oss << makeCaption( objtext );
   oss << "}\n\\end{figure}\n";
}

void writeRequirement(Stream& oss, Module& doorsModule, Object obj, Buffer& puid, Buffer& objtext)
{
   oss << "\\textbf{";
   oss << tempStringOf( puid );
   oss << "}\\\\\n" //"PUID style"
   oss << "\\label{req:";
   oss << makeLabel(puid)
   oss << "}\n";
   oss << "\\index{";
   oss << tempStringOf( puid );
   oss << "}\n";
   oss << "\\color{blue}\n"
   oss << tempStringOf( objtext )
   oss << "\n"//"requirement style"

   oss << "\\begin{tabbing}\n"
   Column col = null;
   Buffer var_name = create;
   int c=0;   
   for col in doorsModule do {      
      var_name = title( col )
      escapeSpecialLaTeXCharacters(var_name);

      if( ! main( col ) && search( regexp "(P|p)(U|u)(I|i)(D|d)", var_name, 0 ) == false )
      {         
         oss << "\\textbf{";
         oss << var_name;
         if(c == 0)
            oss <<  "}: \\hspace{2.0cm} \\= "
         else
            oss <<  "}: \\> "

         var_name = text( col, obj );
         escapeSpecialLaTeXCharacters(var_name);
         oss << var_name;
         oss << "\\\\\n";// "attribute valueBuf" )
         c++;
      }               
   }
   oss << "\\end{tabbing}\n"
   oss << "\\color{black}\n"
   delete var_name;
}

void timeString( int timeInSeconds, Buffer &t )
{
   t = ""

   int hours, minutes, seconds

   hours    =   timeInSeconds / 3600
   minutes  = ( timeInSeconds - hours * 3600 ) / 60
   seconds  = ( timeInSeconds - hours * 3600 - minutes * 60 )

   if( hours < 10 ) t = "0"
   t += ( hours "")
   t += ":"
   if( minutes < 10 ) t += "0"
   t += ( minutes "")
   t += ":"
   if( seconds < 10 ) t += "0"
   t += ( seconds "")
}

void doExport(DB db)
{
   int startTime = intOf( today )

   int progressLimit = 0;
   Object obj = null;
   for obj in current Module do {
      progressLimit++;
   }

   progressStart(db, "Exporting Module as LaTeX", "Object 0/"progressLimit"", progressLimit);
   string outputDir = get(dbeOutputFolder);
   string outputFileName = name(current Module);
   string outputFileExt = ".tex";
   string outputFilePath = outputDir "\\" outputFileName outputFileExt;

   Stream mainFile = write(outputFilePath);
   Stream oss = mainFile;

   writePreamble(oss);

   int progress = 1;
   int curCol = 1;
   int numCols = 0;
   bool lastObjWasFigure = false;
   bool lastObjWasTable = false;

   Buffer objheading = create;
   Buffer objtext = create;
   Buffer objNum = create;
   Buffer puid = create;

   int lev = 0
   int puidLevel = 0
   Regexp excel = regexp "objclass Excel.Sheet"
   Module doorsModule = current Module;
   int subfileCount = 1;
   for obj in current Module do {
      if(progressCancelled())
      {
         if( confirm(db, "Do you really want to abort the export?") )
         {
            break;
         }
      }

      progressMessage("Object "progress"/"progressLimit"");

      getObjectText(obj, objtext)

      // ------------------- Handle Tables ------------------------------------
      if( cell( obj ))
      {
         if( !lastObjWasTable )
         {
            writeTableHeader(oss, obj, numCols);            
            curCol           = 1;
            lastObjWasTable  = true;
         }
         else
         {
            curCol = nextCell(oss, curCol, numCols );
         }
         oss << tempStringOf( objtext ); // "Standard"
         progressStep(progress);
         progress++;
         continue
      }

      // ------------------- After Table write Table Title -----------------
      if( lastObjWasTable )
      {
         writeTableFooter(oss, objtext);
      }
      // ------------------- After Figure write Figure Title ---------------
      if( lastObjWasFigure )
      {
         writeFigureFooter(oss, objtext)
      }

      objNum  = number( obj )
      objheading = obj."Object Heading"
      escapeSpecialLaTeXCharacters(objheading)

      // ------------------- Handle End of Requirement ------------------------
      lev = level( obj )
      if( lev <= puidLevel )
      {
         //oss << "End Requirement\n\n"
         puidLevel = 0
      }

      if( withTitles && ( lastObjWasTable || lastObjWasFigure ))
      {
         lastObjWasTable  = false
         lastObjWasFigure = false
         continue
      }

      // ------------------- Handle objheading with hierarchy --------------------
      if( length( objheading ) > 0 )
      {
         writeobjheading(oss, objNum, objheading, lev )
      }

      if( length( objtext ) > 0 )
      {
         // remember, if Title has to be written after this object
         if( containsOle( obj."Object Text"))
         {
            if( excel objtext ) {
               lastObjWasTable = true
            }
            else
            {
               lastObjWasFigure = true;
               writeFigureHeadAndExport(oss, obj, outputDir);
            }
         }
         // ------------------- Handle Requirements objects Text -----------
         puid = obj."IE PUID"
         escapeSpecialLaTeXCharacters(puid)
         if( length( puid ) > 0 )
         {
            puidLevel = lev
            writeRequirement(oss, doorsModule, obj, puid, objtext);
         }
         // ------------------- No PUID means normal text Object -----------
         else
         {
            oss << tempStringOf( objtext );
            oss << "\n";// "Standard"
         }
      }

      progressStep(progress);
      progress++;      
   }

   oss << "\\printindex\n"
   oss << "\\end{document}\n";

   close(oss);
   progressStop();

   // ---------------------- show the result ----------------------------------
   int endTime = intOf( today ) - startTime

   Buffer totalTime = create;
   timeString( endTime, totalTime );

   infoBox( "Export successfully finished after " totalTime "\nThe result is located in\n" outputFilePath);

   delete objheading;
   delete objtext;
   delete objNum;
   delete puid;
   delete tempBuf;
}

DB db = create("LaTeX Export");
dbeOutputFolder = smartFolderBrowser(db, "Output Folder:", false);

ok(db, doExport);
show(db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:32:13.190

您使用的是哪个版本的 DOORS？

在 DOORS 9.3+ 中，IBM 将 RPE 的功能合并到 DOORS 中，这允许您有更多的导出选项，包括导出为 PDF。但是，直到 DOORS 9.4.0.1（当前版本），您才可以在 IBM Rational Publishing Engine (RPE) 中构建自己的模板并直接在 DOORS 中使用该模板。

因此，答案是您需要一份 IBM 的 RPE Full 许可证，以便您可以创建您正在寻找的模板，然后在您的公司中使用 DOORS 的任何人都可以使用该模板导出 DOORS 文档，而无需额外的许可证。您还需要在 DOORS 9.4.0.1 上。

我还看到一些公司使用页眉和页脚导出到 Word，然后使用 Adob​​e Acrobat 在其封面页中添加徽标等。然而，这意味着只有拥有 Acrobat 完整许可证的人才能正确生成文档。

RPE 绝对是您最好的选择。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-02T15:59:39.217

“是否有可能通过 DXL 脚本制作？或者还有其他选择可以制作吗？”

只要我已阅读您关于将[DXL 数据打印到 PDF](http://www.cubexsoft.com/dxl-to-pst/)过程的查询，我们就会介绍第三方工具，该工具可帮助您将保存的 .DXL 多米诺文件移动或打印为 PDF 格式，而不会影响其中的任何现有数据。

DXL 文件到 PDF 的转换程序是帮助用户在没有任何错误的情况下将 DXL 转换为 PDF 格式的最佳解决方案。只需单击一下即可选择转换 DXL 文件或文件夹的软件。

# c++ - std::use_facet::out() 中可能存在缓冲区溢出错误

> ID：13266031
> 
> 赞同：2
> 
> 时间：2012-11-07T08:45:45.123
> 
> 标签：c++, visual-studio-2012, locale, buffer-overflow, codecvt

我想我在 VC++10 std::locale 对象中发现了一个缓冲区溢出错误。对于我是否做错了什么，我将不胜感激。

下面的代码被简化以演示问题。我正在尝试将 wchar_t (UTF-16) 字符转换为 (Windows) ANSI 代码页 51949（又名 EUC-KR）。选择代码页是因为它使用双字节 (DBCS) 编码。

我故意为双字节结果提供单个字符缓冲区，期望它以“部分”或“错误”状态失败。

相反，它返回状态“ok”，写入缓冲区末尾并在尝试退出时导致损坏堆栈异常。

```
#include <iostream>
#include <locale>
#include <cwchar>

typedef std::codecvt<wchar_t, char, mbstate_t> cvt_t;

void PrintResult(cvt_t::result r)
{
    switch (r)
    {
        case cvt_t::ok: 
            std::cout << "ok\n";
            break;
        case cvt_t::partial: 
            std::cout << "partial\n";
            break;
        case cvt_t::error: 
            std::cout << "error\n";
            break;
        case cvt_t::noconv: 
            std::cout << "noconv\n";
            break;
    }
}
int main()
{
    const wchar_t src = L'안';
    char          dst = 0;
    std::locale   loc("Korean_Korea.51949");
    mbstate_t     state = { 0 };

    const cvt_t &facet = std::use_facet<cvt_t>(loc);
    cvt_t::result res;

    const wchar_t *pSrc;
    char *pDst;

    res = facet.out(state, &src, &src+1, pSrc, &dst, &dst+1, pDst);
    PrintResult(res);

    return 0;
} 
```

使用调试器进入 facet.out()，我发现自己（下降了几个级别）在以下函数中：

```
virtual result __CLR_OR_THIS_CALL do_out(_Statype& _State,
    const _Elem *_First1, const _Elem *_Last1, const _Elem *& _Mid1,
        _Byte *_First2, _Byte *_Last2, _Byte *& _Mid2) const
    {   // convert [_First1, _Last1) to bytes [_First2, _Last)
    _DEBUG_RANGE(_First1, _Last1);
    _DEBUG_RANGE(_First2, _Last2);
    _Mid1 = _First1, _Mid2 = _First2;
    result _Ans = _Mid1 == _Last1 ? ok : partial;
    int _Bytes;

    while (_Mid1 != _Last1 && _Mid2 != _Last2)
        if ((int)MB_CUR_MAX <= _Last2 - _Mid2)
            if ((_Bytes = _Wcrtomb(_Mid2, *_Mid1,
                &_State, &_Cvt)) < 0)
                return (error); // locale-specific wcrtomb failed
            else
                ++_Mid1, _Mid2 += _Bytes, _Ans = ok;
        else
            {   // destination too small, convert into buffer
            _Byte _Buf[MB_LEN_MAX];
            _Statype _Stsave = _State;

            if ((_Bytes = _Wcrtomb(_Buf, *_Mid1,
                &_State, &_Cvt)) < 0)
                return (error); // locale-specific wcrtomb failed
            else if (_Last2 - _Mid2 < _Bytes)
                {   // converted too many, roll back and return previous
                _State = _Stsave;
                return (_Ans);
                }
            else
                {   // copy converted bytes from buffer
                _CSTD memcpy(_Mid2, _Buf, _Bytes);
                ++_Mid1, _Mid2 += _Bytes, _Ans = ok;
                }
            }
    return (_Ans);
    } 
```

问题似乎是这样的：

在线上`if ((int)MB_CUR_MAX <= _Last2 - _Mid2)`，MB_CURR_MAX（#defined 到函数 ___mb_cur_max_func()，返回“1”，而不是 DBCS 字符预期的“2”。

```
_CRTIMP int __cdecl ___mb_cur_max_func(void)
{
    /*
     * Note that we don't need _LocaleUpdate in this function.
     * The main reason being, that this is a leaf function in
     * locale usage terms.
     */
    _ptiddata ptd = _getptd();
    pthreadlocinfo ptloci = ptd->ptlocinfo;

    __UPDATE_LOCALE(ptd, ptloci);

    return ptloci->mb_cur_max;
} 
```

此函数似乎正在访问全局语言环境，而不是在初始化方面时提供的语言环境。

如果我将全局语言环境设置如下：

```
std::locale::global(loc); 
```

一切正常（并以“部分”状态失败）。

因此，在我看来，这个特定的实现`out()`错误地使用全局语言环境来确定 MB_CUR_MAX，而不是在对象构造时提供的语言环境——从而导致缓冲区溢出错误。

有人能指出我在这方面的错误吗？

## ------------------------------
2013 年 5 月 20 日更新
---------------- --------------

我已将此作为错误 787227 报告给 MS。

请参阅[http://connect.microsoft.com/VisualStudio/feedback/details/787227/buffer-overflow-bug-in-std-use-facet-out](http://connect.microsoft.com/VisualStudio/feedback/details/787227/buffer-overflow-bug-in-std-use-facet-out)

## ------------------------------
2015 年 7 月 27 日更新
---------------- --------------

我收到一封来自 Microsoft 的电子邮件，说此错误已在 Visual Studio 2015 的新 RTM 中修复。（耶）

# symfony - 创建 Symfony2 表单以使用预选的旧值进行编辑

> ID：13266032
> 
> 赞同：0
> 
> 时间：2012-11-07T08:45:47.037
> 
> 标签：symfony, symfony-forms

我刚开始使用 Symfony2，我目前正在创建一个表单来编辑用户数据。

我能够用这个创建一个选择下拉列表：

```
$builder->add('department', 'entity', array( 
        'em' => 'default', 
        'class' => 'My\SuperBundle\Entity\Department', 
        'multiple' => false, 
        'required' => true, 
        'query_builder' => function($repo) { 
            return $repo->createQueryBuilder('r')->orderBy('r.name', 'ASC'); 
        }, 
    )); 
```

如果我创建一个新用户，这很好，但如果我想编辑现有用户，则应该预先选择旧值（它不是）。同样对于新用户来说，顶部应该有一个非值（或空）的选择，因此用户被迫选择一些东西。

通过[http://symfony.com/doc/current/book/forms.html#embedded-forms](http://symfony.com/doc/current/book/forms.html#embedded-forms)中描述的方式，我得到了该用户当前部门的名称，但没有可选的下拉列表。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:01:29.030

我找到了[http://kurtfunai.com/2012/01/building-forms-in-symfony2.html](http://kurtfunai.com/2012/01/building-forms-in-symfony2.html)现在它按我想要的方式工作！

# java - Java套接字：通过套接字向客户端推送请求

> ID：13266034
> 
> 赞同：0
> 
> 时间：2012-11-07T08:45:51.363
> 
> 标签：java, sockets, networking, tcp, client-server

我目前正在制作一个客户端-服务器应用程序，该应用程序主要用于对服务器进行过程调用并等待数据包响应。

但是，我想让服务器将消息“推送”给客户端（在自发的时间），但是如果消息在客户端侦听另一个数据包响应时到达，这似乎是一个问题。

有没有办法通过同一个套接字实例将一个套接字拆分为 2 个唯一的通道流？或者创建一个只监听传入连接并将它们分派到队列的客户端线程会更好吗？

使用 2 路客户端-服务器连接时有哪些常见模式和实践？（流自发出现的地方）

提醒一下，我正在使用 Java Socket、ObjectInputStream 和 ObjectOutputstream。我没有使用 Java RMI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:00:15.937

因此，您在学习网络时会遇到的一件事就是失去同步。例如，当您“硬编码”一组客户端-服务器交互时，就会发生这种情况；

```
server sends 2 byte status code
client receives 2 byte status code
client responds with 4 byte operation code 
```

如果由于某种原因有一个错误导致此交互的任何部分不能完全按照需要发生，那么程序的*其余部分*将失败，因为所有网络交互现在都不同步。客户端可能会读取它认为代表字符串的一组字节，而实际上服务器正在发送一个 int，等等。最糟糕的是，您可能会发现您的主网络线程死锁，因为客户端和服务器都在同时等待输入。

对于一个较大的项目，其中肯定存在错误，如果您以这种风格编写代码，这*将*发生很多。出于这个原因，我们有一个叫做**中间件**的东西。

一个非常常见且灵活的中间件范例是[**TLV 消息协议**](http://en.wikipedia.org/wiki/Type-length-value)。您将实现一些简单的类（在半 java 伪代码中）；

```
TLVMessage
    int type;
    byte[] value; 
```

```
TLVPusher implements Runnable
    OutputStream out;
    Queue<TLVMessage> messages;
    run() {
        while(true) {
            //poll and write front of queue to out (INCLUDING value.length!)
        }
    } 
```

```
TLVReader implements Runnable
    InputStream in;
    Queue<TLVMessage> messages;
    run() {
        while(true) {
            //read message from in and add to queue
        }
    } 
```

现在您有两个线程在客户端运行，两个线程在服务器上运行。每一端都有自己的`Pusher`和`Reader`。需要注意的重要一点是，因为您将**长度**字段写入输出流，所以读取器*始终*知道它需要读取多少字节。所以即使一条消息被错误地序列化了，它的长度仍然是正确的，并且下一条消息总是会从第一个字节到最后一个字节被正确读取。这样你的程序就永远不会不同步。

您只需将`TLVMessage`对象添加到`pusher.queue`，它们就会到达`reader.queue`套接字另一端的 。`reader.messages.size()`然后，您可以按其`type`字段处理消息（在另一个，第三个线程中）。

您无需担心事情发生的顺序，您有一个强大的机制可以在客户端和服务器之间在两个方向上传递消息。您已经抽象出繁琐的网络内容，并且可以继续编码。

当然，有一些[库](http://docs.oracle.com/javaee/1.3/jms/tutorial/)可以为您完成所有这些工作，但在我看来，了解其中的*方式*和*原因*总是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:56:10.797

您必须直接对套接字进行编码吗？[听起来像是在OSI 堆栈](http://en.wikipedia.org/wiki/OSI_model)中走得更高并使用例如的好人选。[JMS](http://en.wikipedia.org/wiki/Java_Message_Service)实现您的目标。

希望有帮助。

干杯，

# c++ - 在 WindowsXP 上使用 RInside 对 `imp_ZTVN4Rcpp14not_compatibleE` 进行多重定义

> ID：13266038
> 
> 赞同：-2
> 
> 时间：2012-11-07T08:46:11.903
> 
> 标签：c++, windows, r, rcpp, rinside

我正在谈论的软件包含 5 个文件，并在以下位置编译“非常好`openSUSE 11.3`” `gcc-4.5.1`：

相同的软件显示以下错误`Windows XP`。`Mingw (gcc-4.6.3)`

**更新**

问题被发现了。

问题出在R的功能上`parseEval`。有两个类似的功能：`parseEval`和`parseEvalQ`。前者返回一个值，而另一个返回 void。

我`parseEval`在 C++ 和 Qt 项目中使用过，它在 Linux 上运行良好，并在 Windows 上抛出上述错误。

**这是可重现的示例：**

演示.cpp

```
#include <iostream>
#include <RInside.h>
#include <Rcpp.h>

RInside R (0, NULL);
RInside & qtToR (R);

int main ()
{
    int numberOne = 1;
    int numberTwo = 2;

    qtToR ["numberOne"] = numberOne;
    qtToR ["numberTwo"] = numberTwo;

    R.parseEvalQ ("sum = numberOne + numberTwo;");

    int returnValue = R.parseEval ("sum");
    std :: cout << "\n" << returnValue << "\n";
} 
```

对应的.pro文件：

```
TEMPLATE    = app
TARGET      =
DEPENDPATH  += .

SOURCES     += demo.cpp

INCLUDEPATH += .
INCLUDEPATH += c:/R-2.15.1/include
INCLUDEPATH += c:/R-2.15.1/library/Rcpp/include
INCLUDEPATH += c:/R-2.15.1/library/RInside/include

LIBS        += -Lc:/R-2.15.1/bin/i386 -lR
LIBS        += -Lc:/R-2.15.1/library/Rcpp/libs/i386 -lRcpp
LIBS        += -Lc:/R-2.15.1/library/RInside/libs/i386 -lRInside

# You'll keep pulling your hair if you miss this statement when you are on windows.
CONFIG      += console 
```

![在此处输入图像描述](../Images/30c200667448d2de6571a6a582101f3b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:59:29.283

Linux 和 Windows 中的链接语义不同，特别是对于动态库。

我建议阅读[Levine 的*链接器和加载器*](http://www.iecc.com/linker/)书。

另请参阅[此问题](https://stackoverflow.com/q/2284610/841108)，并查找[Gcc 函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)和.`dllexport``dllimport`

使用 Qt，您可能需要使用[Q_DECL_EXPORT](http://qt-project.org/doc/qt-4.8/qtglobal.html#Q_DECL_EXPORT)等....（此 Qt 宏在 Linux 和 Windows 上都可以使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:09:51.970

我说：

> > 这解决了。该问题与 .pro 文件无关，与`parseEval`函数的语法有关。我在 Linux 上的 RInside 比我在 Windows 上的 RInside 更老。我的Linux系统和Windows系统上安装的Rcpp版本也不同。
> 
> 这种语法`parseEval`- `int returnValue = R.parseEval ("sum");` 在具有较旧 RInside 的 Linux 上运行良好，但在具有较新 RInside 的 Windows 上失败。
> 
> 因此，我将上面的代码修改如下，并使用上面的 .pro 文件成功编译。
> 
> `SEXP ans;` `int returnValue = R.parseEval ("sum", ans);`

这确实编译成功，但令我恐惧的是，这种喜悦只是暴风雨前的平静！
*同样的错误现在转移到了运行时！*

因此，此错误的永久解决方案是编辑 .pro 文件并在RInside之后**链接****Rcpp**：

 **`LIBS += -Lc:/R-2.15.1/library/RInside/libs/i386 -lRInside`
`LIBS += -Lc:/R-2.15.1/library/Rcpp/libs/i386 -lRcpp`**

# jquery - jQuery 焦点函数返回 false

> ID：13266040
> 
> 赞同：0
> 
> 时间：2012-11-07T08:46:19.003
> 
> 标签：jquery, focus

我需要一些关于 jQuery 焦点功能的帮助。我有一个输入字段，当按下 Enter 并且输入字段具有焦点时，我想做一些事情。

HTML：

```
<form class="myform">
<ul>
<input class="inputfield" type="text">
</ul>
</form> 
```

和 jQuery：

```
$(document).keyup(function(event) {
    if (event.keyCode == 13 && $(':input').is(':focus')) {
        //do stuff here
    }
}); 
```

.is(':focus') 总是返回 false。

有谁知道这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:51:49.627

为什么不直接将 keyup 事件分配给输入字段？

```
$('.inputfield').keyup(function(event) {
    if (event.keyCode == 13) {
        // Enter key pressed ... do stuff here
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:52:29.610

您最好将处理程序绑定到文本框本身

```
$('.inputfield').on('keydown', function (event) {
    if (event.keyCode == 13) {
        //do stuff here
    }
}); 
```

如果你有 jQuery ui，你可以使用

```
$.ui.keycode.ENTER 
```

如果你愿意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:54:23.313

`.is(':focus')`应该适用于 jquery 1.6+。

或者您可以尝试将“旧”javascript activeElement 属性包装在 jquery 对象中并将其嵌入到 onlaod js 回调函数中：

```
window.onload = function(){
    $(document).keyup(function(event) {
       if (event.keyCode == 13 && $(document.activeElement).is('.inputfield')) {
           //do stuff here
       }
    });
}; 
```

# ios - 是否可以在 .xib 文件中使用对颜色的引用而不是颜色？

> ID：13266044
> 
> 赞同：0
> 
> 时间：2012-11-07T08:46:39.487
> 
> 标签：ios, macos, interface-builder, xib

在开发 iPhone 应用程序时，我需要为各种客户端创建该应用程序的“副本”，其中包括更改应用程序文本的所有颜色、背景...

我想知道是否可以将颜色存储在以下位置：

*   文本-​​> #fffffff
*   辅助文本-> #808080
*   背景->#707070
*   ...

然后在 xib 文件中使用这些引用而不是实际的颜色值。我想这样做是为了避免复制 xib 文件并使它们无法维护。这个想法类似于 android 的资源，例如，您可以在其中使用“@color/text”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:01:31.343

您想为三个具有不同外观和感觉的客户提供单个应用程序。但在功能上它们是相同的。正确的？

然后，您可以为三个客户端 **mainView_first.xib、mainView_second.xib、mainView_third.xib**拥有 3 个 xib 文件。将它们的插座连接到单个 .h 文件 (mainView.h)。您可以在这些 xib 文件中进行自己的自定义。您可以像这样加载文件

```
mainView *main=[[mainView alloc]initWithnibName:@"nameofthexibfile"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:03:16.193

您可以以编程方式实现这一点 -

一个。创建一个 color.plist 文件，其中存储您要使用的所有颜色名称和值。

湾。`UIColor`然后创建一个颜色工具类，它具有在对象中转换这些值的方法。

C。在整个应用程序中使用这些方法来设置背景颜色、标签颜色等。

# algorithm - 打印二进制矩阵中的所有路径

> ID：13266045
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:46:42.983
> 
> 标签：algorithm

大小为 N 的二进制矩阵中的“路径”是从 (0,0) 开始到 (N,N) 结束的有序单元格集合，因此路径中每个单元格的条目都是 1。

例如-> 矩阵：

```
1100
1100
0010
0001 
```

有两条路径：
`(0,0)->(0,1)->(1,1)->(2,2)->(3,3)`和
`(0,0)->(1,0)->(1,1)->(2,2)->(3,3)`

打印所有可能路径的最佳方法是什么？目前，我只能想到蛮力解决方案，我一直跟随最低的'1'并将它们一个一个地设为零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:58:29.970

将您的问题建模为[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29) `G=(V,E)`，其中：
`V = { all nodes marked as 1 }`和
`E = { (u,v) | u,v are in V and u,v are "neighbors" in the matrix }`

查找所有路径的最简单方法是使用[DFS](http://en.wikipedia.org/wiki/Depth-first_search)而不维护`visited`集合 - 并迭代地执行此操作，直到用尽所有可能的路径。

请注意，如果图形有循环（并且您实际上想要所有简单路径，因为在带有循环的图形中可能有无限数量的路径）-那么您将需要为`visited`每个路径维护一个“特殊”集-该集将保留当前探索路径中的所有节点，一旦您从 DFS 中的递归调用“返回”，就会从中删除一个顶点。

* * *

请注意，路径的数量是指数的——并且您希望将它们全部*打印*出来——因此运行时间不能低于这个问题的指数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:45:38.270

你的问题不是很清楚。我假设可能的方向是正确的一步（例如： (1,1) -> (1,2) ），向下一步（例如：(1,1,) -> (2, 1)) 或向右和向下一步（例如：(1,1) -> (2,2)）。否则，正如 amit 所讨论的那样，可能有无数条路径。

在您的问题中，应该有三种可能的路径。正如nav_jan提到的，(0,0)->(1,1)->(2,2)->(3,3)也是一种可能的路径。

我设计了一个递归的方法，很容易理解。从 (0,0) 点开始，尝试向三个方向移动。如果当前点为 1，则继续移动，否则返回。一旦到达 (n-1,n-1) 点，就会找到一条有效路径。

代码是用 Java 编写的。

```
public static List<String> getMatrixPaths(int[][] matrix){
    List<String> pathList = new ArrayList<String>();
    if(matrix != null && matrix.length > 0){
        getMatrixPaths(matrix, 0,0, "", pathList);
    }
    return pathList;
}
public static void getMatrixPaths(int[][] matrix, int i, int j, String path, List<String> pathList){
    int n = matrix.length - 1;
    if(i > n || j > n){
        return;
    }else if( matrix[i][j] == 1){//only 1 is valid
        path += String.format(" (%d,%d)", i , j);
        if( i ==n && j == n){ // reach (n,n) point
            pathList.add(path);
        }else {
            getMatrixPaths(matrix, i +1, j , path, pathList);
            getMatrixPaths(matrix, i , j +1, path, pathList);
            getMatrixPaths(matrix, i + 1 , j +1, path, pathList);
        }
    }
} 
```

使用有问题的矩阵进行测试，我的结果是 [ (0,0) (1,0) (1,1) (2,2) (3,3), (0,0) (0,1) (1 ,1) (2,2) (3,3), (0,0) (1,1) (2,2) (3,3)] 。

你可以参考这个问题：[Algorithm for find all paths in a NxN grid](https://stackoverflow.com/questions/9105699/algorithm-for-finding-all-paths-in-a-nxn-grid/13249139)。我认为它们非常相似。

# visual-studio - 解决方案资源管理器在 vs 2010 中的 csharp 中未正确显示 xna 游戏内容

> ID：13266047
> 
> 赞同：1
> 
> 时间：2012-11-07T08:46:45.013
> 
> 标签：visual-studio, xna, solution-explorer

我正在开发一款 vs 2010 csharp xna 的游戏。突然我的游戏内容文件夹（bagchalGameContent）出现感叹号，里面的图片文件无法浏览。我附上了相同的图像。

请建议我适当的解决方案。![快照](../Images/ebe4b42c41ce934bf4a6a7641f07f3db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:37:25.403

我创建了另一个项目并复制了代码，导入了所有图像文件。现在效果很好。

# java - 如何将文件中的多行读入字符串以放入 jTextArea？

> ID：13266051
> 
> 赞同：0
> 
> 时间：2012-11-07T08:46:57.097
> 
> 标签：java, swing

我尝试了许多不同的东西，这是迄今为止唯一可以从文件中读取一行的东西......

```
try{

        FileInputStream fstream = new FileInputStream("./Saves/Body.sav");
        BufferedReader br = new BufferedReader(new InputStreamReader(infstream);
        String strLine;    
        while ((strLine = br.readLine()) != null)   {      
        System.out.println(strLine);
        w1.Body = strLine;
        }  
        in.close();
          }catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
        } 
```

我正在尝试创建一个加载函数，以便我可以将文件中的文本加载到字符串到 jTextArea 上...没有任何类型的 openfiledialog

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:48:26.943

我个人会使用[Guava](http://guava-libraries.googlecode.com)：

```
File file = new File("Saves", "Body.sav");
String text = Files.toString(file, Charsets.UTF_8); 
```

当然，这是假设它是一个 UTF-8 文件。相应调整。

您当前的代码有许多问题：

*   `DataInputStream`它无缘无故地创造了一个
*   您*可能*不会从使用中获得太多收益`BufferedReader`
*   您没有指定字符编码，因此您隐式地获得了平台默认值，这几乎不是一个好主意。
*   由于某种原因，您正在关闭`in`位于输入链中间的...我希望关闭`br`或`fstream`
*   `in`只有在没有异常的情况下才会关闭（`finally`如果您使用的是 Java 7，请使用块或 try-with-resources 语句）
*   您似乎有一个名为 的字段`Body`，违反了 Java 命名约定
*   你正在捕捉`Exception`而不是`IOException`- 更喜欢捕捉特定的异常
*   您通过有效地忽略它来“处理”异常，这几乎是*不合适*的。（读取文件的代码很少是决定如何处理异常的正确代码。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T09:20:26.567

> 我如何阅读...放入jTextArea？

我建议忽略该声明的整个中间部分。

```
File file = new File("./Saves/Body.sav");
FileReader fileReader = new FileReader(file);
textArea.read(fileReader, file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:49:52.580

您可以使用 a `StringBuilder`（或同步版本`StringBuffer`）并继续附加`strLine`它。以这种方式声明它：

```
StringBuilder s = new StringBuilder(); 
```

并在`while`循环中：

```
s.append(strLine + "\n"); 
```

# r - 读取制表符分隔文件R中的问题

> ID：13266056
> 
> 赞同：2
> 
> 时间：2012-11-07T08:47:14.010
> 
> 标签：r

我正在尝试读取如下所示的制表符分隔文件： ![在此处输入图像描述](../Images/8c331e3ee2f4c2ed6fa0ad5f1b2f6e2c.png)

我正在使用 read.table 来提出这个建议，但我无法读取该文件。

```
table<- read.table("/Users/Desktop/R-test/HumanHT-12_V4_0_R2_15002873_B.txt",
                   header =FALSE, sep = "\t", 
                   comment.char="#", check.names=FALSE) 
```

当我运行代码时，出现此错误：

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  line 1 did not have 2 elements 
```

我在看表时做错了什么？我对 R 不太熟悉，所以任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T10:39:59.063

我对这种类型的文件非常熟悉：它是用于微阵列分析的 GEO 平台数据。正如上面 baptiste 建议的那样，最好的方法是跳过前几行`skip=9`。您可以替换`read.table(...,sep="\t")`为`read.delim(...)`. 然后，您将获得具有合适列名的表格 - 请注意，列名应位于第一行。

然后，如果您真的对前 9 行感兴趣，您可以通过`readLines(...)`命令读取它们并将数据粘贴到您的表中，如下所示：

```
foo = read.delim(...)
bar = readLines(...)
baz = list(foo, bar) 
```

# java - Java 日期比较失败

> ID：13266061
> 
> 赞同：1
> 
> 时间：2012-11-07T08:47:36.067
> 
> 标签：java, date, compareto

即使日期相等或不相等 CompareTo 也会失败。它只打印 1。

CompareTo 在比较时不返回 0。！！

这个愚蠢的代码挤在我的头上。嘿，朋友，我在哪里犯规了？

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class date {

public static void main (String args[]) throws ParseException
{

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    Date expiry = sdf.parse("2012-11-09");

    System.out.println(sdf.format(expiry));

    Calendar cal1 = Calendar.getInstance();
    Calendar cal2 = Calendar.getInstance();
    cal1.setTime(expiry);
    cal1.add(Calendar.DATE, -2);
    System.out.println(sdf.format(cal1.getTime()));
    System.out.println(sdf.format(cal2.getTime()));
    int j = cal1.compareTo(cal2);

    System.out.println("The result is :" + j);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:51:37.663

`compareTo`说实话。您刚刚从输出中隐藏了小时、分钟、秒和毫秒。

`expiry`日期设置为一天（当天的`00:00:00.0000`第一毫秒），同时`cal2`仍带有实际时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:56:54.073

CompareTo 比较两个 Calendar 对象表示的时间值（从 Epoch 开始的毫秒偏移量）。如果您使用格式化打印 cal1 和 cal2，您将看到时间差。

```
System.out.println(cal1.getTime());
System.out.println(cal2.getTime()); 
```

这将向您显示两个日历实例的确切时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:53:00.200

`compareTo`是功能给你解决方案...你可以看看这里。

[http://www.java-examples.com/compare-two-java-date-objects-using-compareto-method-example](http://www.java-examples.com/compare-two-java-date-objects-using-compareto-method-example)

# ios - 'NSInvalidArgumentException'

> ID：13266066
> 
> 赞同：1
> 
> 时间：2012-11-07T08:47:47.330
> 
> 标签：ios, annotations, compiler-errors, pushviewcontroller

我在地图中有一些 annotationView，我想用 touchUpInside 打开一个新的 ViewController 但我收到了这个错误：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-
 [MapViewController loadDetailListViewController:]: unrecognized selector sent 
 to instance 0xa042380' 
```

这是 MapViewController.m 中的代码：

```
 -(void)loadDetailListViewController{

      if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

    DetailListViewController *detailList =[[DetailListViewController 
    alloc]initWithNibName:@"DetailListViewController~iPhone" bundle:nil];
    detailList.title = self.chinaTable.title;
    detailList.chinaTable = self.chinaTable;

    [self.navigationController pushViewController:detailList animated:YES];

}else {

    DetailListViewController *detailList =[[DetailListViewController 
    alloc]initWithNibName:@"DetailListViewController~iPad" bundle:nil];
    detailList.title = self.chinaTable.title;
    detailList.chinaTable = self.chinaTable;

    [self.navigationController pushViewController:detailList animated:YES];
}

}

 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
    <MKAnnotation>)annotation {

       //......

     UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
       [rightButton addTarget:self action:@selector(loadDetailListViewController:) 
      forControlEvents:UIControlEventTouchUpInside]; //the error is here
      //....
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:52:35.223

改变

```
@selector(loadDetailListViewController:) 
```

到

```
@selector(loadDetailListViewController) 
```

原因：`@selector(abc)`给出`abc`没有任何参数的方法的选择器。`@selector(abc:)`给出`abc`带有一个参数的方法的选择器. 相应`@selector(abc::)`地给出了`abc`带有两个参数对象的方法的选择器。

Objective-C 是多态的。这意味着相同的方法可能存在多次。这意味着它们具有相同的名称并且被多次实现以根据参数的数量提供方法的变体（或者如果在选择器语句中也给出了参数的名称，则根据参数的名称）。

严格来说`abc`，`abc:`and`abc::`可能完全不同并且彼此独立。但那将是非常糟糕的风格。很常见的是，这些方法或多或少是相同的，它们的功能只是在细节上有所不同，由传递给它的不同值驱动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:52:54.797

在选择器中使用`loadDetailListViewController`not `loadDetailListViewController:`。

# windows-8 - 更改固定在 Metro 桌面上的快捷方式磁贴的磁贴图像

> ID：13266067
> 
> 赞同：0
> 
> 时间：2012-11-07T08:47:46.987
> 
> 标签：windows-8

我们创建了一个 tile 快捷方式，类似于将 IE 快捷方式固定在屏幕上。我们已经通过代码做到了这一点。我们希望图像应该出现在此图块上。我们如何将图像添加到这样的快捷方式拼贴中。我们首先在 Windows 7 桌面模式下运行 exe，然后使用 shell 脚本使 pin 到屏幕事件单击。该磁贴类似于固定在桌面上的任何 Internet 地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:12:26.403

请参阅[此示例应用程序](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)...

实现此目标所需的基本代码如下...

```
Uri logo = new Uri("ms-appx:///Assets/squareTile-sdk.png"); 
Uri smallLogo = new Uri("ms-appx:///Assets/smallTile-sdk.png"); 
string tileActivationArguments = MainPage.logoSecondaryTileId + " WasPinnedAt=" + DateTime.Now.ToLocalTime().ToString(); 
SecondaryTile secondaryTile = new SecondaryTile(MainPage.logoSecondaryTileId, 
   "Title text shown on the tile", 
   "Name of the tile the user sees when searching for the tile", 
   tileActivationArguments, 
   TileOptions.ShowNameOnLogo, 
   logo); 
secondaryTile.ForegroundText = ForegroundText.Dark; 
secondaryTile.SmallLogo = smallLogo; 
bool isPinned = await await secondaryTile.RequestCreateAsync(); 
```

# php - 使用选择更新列

> ID：13266068
> 
> 赞同：0
> 
> 时间：2012-11-07T08:47:47.690
> 
> 标签：php, mysql, sql

你好我想设置一个表列我尝试使用更新查询但我有语法错误

```
 $cmts="UPDATE stat_alert INNER  JOIN cell_cmt  ON stat_alert.cell = cell_cmt.cell SET stat_alert.`cmts` = cell_cmt.`Cmts`";
$cmt= mysql_query($cmts)OR DIE("Erreur sur la requete"); 
```

我有 erreur sur la requete 谁能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:49:41.273

试试这个代码：你有语法错误，因为在集合之前已经消失了。设置必须在内连接之后

```
UPDATE stat_alert a 
INNER  JOIN cell_cmt b ON a.cell = b.cell
SET a.`cmts` = b.`Cmts` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:49:25.190

您`UPDATE with JOIN`在 MSSQL 中使用的版本，在`MYSQL`，它应该是这样的，（*不应该指定****FROM***关键字）

 *```
UPDATE stat_alert a 
       INNER  JOIN cell_cmt b
          ON a.cell = b.cell
SET a.`cmts` = b.`Cmts` 
```

*   [**资源**](http://blog.ookamikun.com/2008/03/mysql-update-with-join.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:48:45.237

这是`UPDATE`with的正确语法`JOIN`：

```
UPDATE stat_alert
INNER  JOIN cell_cmt ON stat_alert.cell = cell_cmt.cell
SET 
  stat_alert.`cmts` = cell_cmt.`Cmts` 
```

mysql [**`UPDATE`**](http://dev.mysql.com/doc/refman/5.0/en/update.html)规定表引用直接`stat_alert INNER JOIN cell_cmt ON stat_alert.cell = cell_cmt.cell`在`UPDATE`子句之后。这就是你所缺少的。*

# java - 获取从 JNI 方法返回的直接缓冲区对象的数据到 Java？

> ID：13266069
> 
> 赞同：2
> 
> 时间：2012-11-07T08:47:49.343
> 
> 标签：java, c, java-native-interface

我是 JNI 的新手，正在努力实现一项要求。我已经使用`NewDirectByteBuffer()`API 在 JNI 中分配了直接缓冲区，并且想要访问 Java 端的缓冲区。

我所做的是分配了一个本机内存并将一些数据存储在该缓冲区中。然后我使用`NewDirectByteBuffer()`API 将该内存空间包装在一个直接缓冲区对象中。

然后为了从 JAVA 读取该内存中的数据，我将该直接缓冲区对象（`BufferObject`）返回到 java 端并使用`BufferObject.get()`方法读取。

但无法设法获取我存储在直接缓冲区中的数据。请让我以这种方式正确读取使用创建的直接缓冲区对象的数据`NewDirectByteBuffer()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:51:33.757

我一直在做的事情（这并不意味着它是最好的方法）是

*   在 Java 中创建直接的 ByteBuffer。
*   将其传递给 JNI 方法进行填充（更新数据并正确设置位置和限制）
*   使用`ByteBuffer.order(ByteOrder.nativeOrder())`，因此数据将以本机字节顺序读取/写入。
*   尽可能多地重用 ByteBuffer，因为它的创建和释放成本相对较高。

即我尽可能少地使用本机代码。;)

> 但无法设法获取我存储在直接缓冲区中的数据。

不幸的是，这可能意味着任何事情。

尽可能多地使用 Java 的部分原因是它简化了调试。

# python - python：如何通过 ssh 远程运行脚本

> ID：13266072
> 
> 赞同：2
> 
> 时间：2012-11-07T08:48:00.560
> 
> 标签：python, ssh

> **可能重复：**
> [远程执行任意 python 代码 - 可以吗？](https://stackoverflow.com/questions/536370/execute-arbitrary-python-code-remotely-can-it-be-done)

我写了一个内存使用检查功能，它在一台服务器上运行良好（比如 10.100.110.10）。
但我需要从 10.100.110.10 在 10.100.110.11 上远程运行相同的脚本。我可以从 10.100.110.10 SSH 到 10.100.110.11。有没有办法使用 python 内置模块来实现它？

我不能使用任何新模块，比如 Paramico 和 Unix 命令

```
ssh -n user@10.100.110.11 "df -m" 
```

工作正常。如果不可能，我如何使用内置的 Python 模块 ssh 到 10.100.110.11？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:51:11.960

如果您不访问另一端的 Python 解释器，则无法远程运行 Python 代码。您可以将代码发送到 Python 的解释器标准输入，但您仍然必须发送代码。

另一种解决方案是使您的代码远程兼容，并通过 SSH 替换所有系统调用（例如使用 Paramiko）。

# web-services - 无法使用基于任务的操作的 WP8 SDK 导入服务参考

> ID：13266079
> 
> 赞同：2
> 
> 时间：2012-11-07T08:48:37.880
> 
> 标签：web-services, asynchronous, visual-studio-2012, task-parallel-library, windows-phone-8

到目前为止，使用“生成基于任务的操作”在 VS2012 中导入服务引用似乎不起作用。它是灰色的。

对 WPF 的新项目的测试工作正常 - 我可以选择基于任务的操作或异步操作。

有没有一种简单的方法可以将异步调用包装在任务中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T10:21:12.717

> 有没有一种简单的方法可以将异步调用包装在任务中？

示例`WebClient.DownloadStringCompleted`

```
public static class WebClientAsyncExtensions
{
    public static Task<string> DownloadStringTask(this WebClient client, Uri address)
    {
        var tcs = new TaskCompletionSource<string>();

        DownloadStringCompletedEventHandler handler = null;
        handler = (sender, e) =>
            {
                client.DownloadStringCompleted -= handler;

                if (e.Error != null)
                {
                    tcs.SetException(e.Error);
                }
                else
                {
                    tcs.SetResult(e.Result);
                }
            };

        client.DownloadStringCompleted += handler;
        client.DownloadStringAsync(address);

        return tcs.Task;
    }
} 
```

用法：

```
async void DownloadExample()
{
    WebClient client = new WebClient();
    await client.DownloadStringTask(new Uri("http://http://stackoverflow.com/questions/13266079/"));
} 
```

# iis - 导出 IIS 配置

> ID：13266085
> 
> 赞同：1
> 
> 时间：2012-11-07T08:49:11.477
> 
> 标签：iis, configuration, export, iis-7.5, shared

我想通过共享配置在 IIS 7.5 上导出我的 IIS 配置。我收到一条错误消息：配置文件导出失败。我在 Eventlog、IIS 或其他任何地方都没有条目。

我希望有人可以帮助我

霍斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:56:55.597

这对我有用：

*   停止 IIS 服务器
*   删除 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 下的所有文件
*   取消选中共享配置。

完成此步骤后，我可以导出配置并再次设置共享配置。

霍斯特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T21:25:03.130

以管理员身份打开 CMD 并运行：

*   IISRESET -停止
*   然后将 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 中的所有文件移动到除 c2319c42033a5ca7f44e731bfd3fa2b5_5630a856-d018-483a-866a-3b9512d1e19e 之外的另一个文件夹
*   然后运行：IISRESET -START

它应该可以正常工作

# javascript - JavaScript 中良好的单例模式

> ID：13266086
> 
> 赞同：4
> 
> 时间：2012-11-07T08:49:12.823
> 
> 标签：javascript, design-patterns, singleton

我在 JavaScript 中使用以下单例模式：

```
 var exampleClass =(function(){ 
                        //private
                        var a ="test"; 
                        function PrivateMethod()
                        {
                            return a;
                        }
                        //public
                        return{  
                            Test: function() { 
                                   alert(PrivateMethod()); 
                                  } 
                        }
                      })(); 
```

当我阅读 StackOverflow 时，我看到了很多其他的 Singleton 实现，我开始怀疑我是否不能让我的更好。我希望有人能告诉我这样做是对还是错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:02:52.590

这取决于您想要实现的目标，因为不同的实现将有不同的好处和限制。

最简单的实现只是一个对象字面量：

```
var singleton = {
    property: "foo",
    method: function() {
        alert('bar');
    }
} 
```

您在问题中提到的实现通过将方法封装在闭包中并返回应该公开的内容来允许公共和私有方法。

这是一个替代方案，它同样允许公共和私有方法并且更具可扩展性：

```
function MySingletonClass() {

  if ( arguments.callee._singletonInstance )
    return arguments.callee._singletonInstance;
  arguments.callee._singletonInstance = this;

  this.Foo = function() {
    // ...
  }
}

var a = new MySingletonClass()
var b = MySingletonClass()
Print( a === b ); // prints: true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:03:24.550

这是我的。

区别在于：

*   在顶部声明的所有函数
*   默认情况下所有函数都是私有的
*   所有功能都可以访问其他功能
*   公共功能映射在底部

改进如下：

*   如果要将函数从私有移动到公共或反之亦然，则不必移动代码，只需更改代码底部的映射
*   所有函数都可以访问私有和公共函数（因为默认情况下所有函数都是私有的）

    ```
    var exampleClass =(function(){ 

                    //private
                    var a ="test"; 

                    //declare here all functions 
                    //(both for pass jslint validation and is good to have a list
                    //of all available functions, in case of classes with a lot of code

                    var PrivateMethod,
                    Test1,
                    Test2;

                    PrivateMethod = function()
                    {
                        return a;
                    };

                    Test1 = function()
                    {
                        return PrivateMethod();
                    };

                    Test2 = function()
                    {
                        return Test1();
                    };

                    //public
                    //Expose function you want to have pubblic
                    return{  
                        Test1: Test1,
                        Test2: Test2 
                    }
                  })(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:59:06.173

我正在使用这种模式：

```
var SingletonConstructor;
(function() {
    var instance;
    SingletonConstructor = function() {

        if (typeof instance !== 'undefined')
           return instance;

        var a = "a";

        function PrivateMethod() {
            return a;
        }

        return instance = this;
    };
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:06:25.527

这就是 Google Closure 的做法：

[http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js#427](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js#427)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T09:09:26.543

我喜欢以下模式：

```
function MyClass(){
    if(MyClass.instance){
        return MyClass.instance;
    }
    MyClass.instance = this;

    //constructor code goes here
}

var a = new MyClass();
var b = new MyClass();

console.log(a == b); //true 
```

# java - blackberry - 在 NegativeMarginVerticalFieldManager 中将字段置于最前面

> ID：13266088
> 
> 赞同：0
> 
> 时间：2012-11-07T08:49:21.523
> 
> 标签：java, user-interface, blackberry

我遇到了一个问题，就是在绘制时将一个字段放在前面，以前有没有人反驳过这样的问题？

简单来说，问题是我使用`NegativeMarginVerticalFieldManager`的是[高级 UI](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI)示例，我用它在每个面板按钮下显示突出显示的文本，文本应该在面板下的内容前面，但现在它在后面。

![在此处输入图像描述](../Images/3c5d362a8c78fd902aa9bd5ac501ce3c.png)

那么，有人知道如何让它出现在前面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:51:14.070

上色顺序不同。你能覆盖你的领域中的油漆并检查油漆的顺序吗？

不幸的是，z-order 与如何将字段添加到管理器的顺序相关联，我不知道如何更改它。

你可以做什么 - 覆盖经理中的油漆并按你需要的顺序为孩子调用油漆：

```
public class MyManager extends NegativeMarginVerticalFieldManager {
    protected void paint(Graphics g) {
        for (int i = 1; i < getFieldCount(); i++) {
            paintChild(getField(i), g);
        }

        if (getFieldCount() > 0)
           paintChild(getField(0), g);
    }
} 
```

这是 hack - 我在画第一个字段之后。

# xml - 为什么 Go 的 encoding/xml.Decoder.Token() 没有产生应有的 xml.Attr 令牌？

> ID：13266090
> 
> 赞同：0
> 
> 时间：2012-11-07T08:49:31.780
> 
> 标签：xml, xml-parsing, xsd, go, xml-attribute

使用 encoding/xml.Decoder 我试图手动解析从[http://www.khronos.org/files/collada_schema_1_4加载的 XML 文件](http://www.khronos.org/files/collada_schema_1_4)

出于测试目的，我只是对文档进行迭代，打印出遇到的任何令牌类型：

```
func Test (r io.Reader) {
    var t xml.Token
    var pa *xml.Attr
    var a xml.Attr
    var co xml.Comment
    var cd xml.CharData
    var se xml.StartElement
    var pi xml.ProcInst
    var ee xml.EndElement
    var is bool
    var xd = xml.NewDecoder(r)
    for i := 0; i < 24; i++ {
        if t, err = xd.Token(); (err == nil) && (t != nil) {
            if a, is = t.(xml.Attr); is { print("ATTR\t"); println(a.Name.Local) }
            if pa, is = t.(*xml.Attr); is { print("*ATTR\t"); println(pa) }
            if co, is = t.(xml.Comment); is { print("COMNT\t"); println(co) }
            if cd, is = t.(xml.CharData); is { print("CDATA\t"); println(cd) }
            if pi, is = t.(xml.ProcInst); is { print("PROCI\t"); println(pi.Target) }
            if se, is = t.(xml.StartElement); is { print("START\t"); println(se.Name.Local) }
            if ee, is = t.(xml.EndElement); is { print("END\t\t"); println(ee.Name.Local) }
        }
    }
} 
```

现在这里是输出：

```
PROCI   xml
CDATA   [1/64]0xf84004e050
START   schema
CDATA   [2/129]0xf84004d090
COMNT   [29/129]0xf84004d090
CDATA   [2/129]0xf84004d090
START   annotation
CDATA   [3/129]0xf84004d090
START   documentation
CDATA   [641/1039]0xf840061000
END     documentation
CDATA   [2/1039]0xf840061000
END     annotation
CDATA   [2/1039]0xf840061000
COMNT   [37/1039]0xf840061000
CDATA   [2/1039]0xf840061000
START   import
END     import
CDATA   [2/1039]0xf840061000
COMNT   [14/1039]0xf840061000
CDATA   [2/1039]0xf840061000
START   element
CDATA   [3/1039]0xf840061000
START   annotation 
```

请注意，即使到最后（第 24 行）根**xs:schema**元素以及**xs:import**和**xs:element**元素中都传递了许多属性，但没有输出 ATTR 或 *ATTR 行。

这是在 Windows 7 64 位下的 Go 1.0.3 64 位。我做错了什么还是应该提交 Go 包错误报告？

[*旁注：当将普通的**xml.Unmarshal**转换为正确准备的结构时，已知命名和映射的属性被 xml 包捕获并映射就好了。但我还需要在根元素中收集“未知”属性（为这个用例收集命名空间信息，用例是[http://github.com/metaleap/go-xsd](http://github.com/metaleap/go-xsd)），因此我尝试使用**解码器.Token()**。*]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:51:25.037

是的，这种行为是意料之中的。属性被解析，但不作为 xml.Token 返回。属性根本不是令牌。见： http: [//golang.org/pkg/encoding/xml/#Token](http://golang.org/pkg/encoding/xml/#Token)

可以通过 Token StartElement 中的 Attr 字段访问这些属性。请参阅： http: [//golang.org/pkg/encoding/xml/#StartElement](http://golang.org/pkg/encoding/xml/#StartElement)

（（一些一般提示：

a) 不要使用 print 或 println。

b) a, ok := t.(SomeType) 成语被称为“comma OK”，因为布尔值通常被命名为“ok”，而不是“is”。请遵守这些约定。

c）惯用语会像

```
switch t := t.(type) {
  case xml.StartElement: ...
  case xml.EndElement: ...
} 
```

而不是您的“if a, is = t.(xml.Attr) ...”列表

d）所有这些“var se xml.StartElement”都是噪音（混乱）。采用

```
if se, ok := t.(xml.StartElement); ok { ... } 
```

这将使您的代码更具可读性。))

# set - Infragistics：WebCurrencyEditor 允许插入负值

> ID：13266097
> 
> 赞同：0
> 
> 时间：2012-11-07T08:49:54.160
> 
> 标签：set, currency, infragistics

在 Infragistics:WebCurrencyEditor 控制器中，不能插入负值。我试过了

System.Globalization.CultureInfo ci = System.Globalization.CultureInfo.CreateSpecificCulture("en-US");
ci.NumberFormat.CurrencyNegativePattern = 1; // "-$n";
NumBox1.Culture = ci;

但这对我不起作用。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:39:58.267

使用 NumBox1.MinValue=-999999999; 我已经解决了这个问题。

# matlab - 将 MATLAB 中的 stringptrptr 参数传递给 C-DLL 函数 foo(char**) - 清除指针使 matlab 崩溃

> ID：13266098
> 
> 赞同：0
> 
> 时间：2012-11-07T08:49:54.117
> 
> 标签：matlab, pointers, crash, char, shared-libraries

我遵循这里给出的解决方案： [Passing pointer argument in MATLAB to a C-DLL function foo(char**)](https://stackoverflow.com/questions/7445054/passing-pointer-argument-in-matlab-to-a-c-dll-function-foochar)

我添加了一个通过 tcp 套接字接收的字符串，这是简化的示例

c-dll：

```
void test(char **u1, char **y1)
{
   std::string recvString("Test Output"); //this string change
   *y1 = (char*) mxRealloc(*y1, recvString.size()+1); //get memory
   *y1 = strdup(recvString.c_str()); //copy
} 
```

MATLAB：

```
loadlibrary('rriMonitor.dll', 'rriMonitor.h');

vpu = libpointer('stringPtrPtr',{'test input'});
vpv = libpointer('stringPtrPtr',{''});

calllib('rriMonitor','test',vpu,vpv);
vpv.value{1}    %gives correct string 'Test Output'

%clear vpv; % CRASH also

unloadlibrary 'rriMonitor'

clear vpu; % everything fine
clear vpv; % CRASH 
```

到目前为止，这是有效的。我的问题是决赛：

```
clear vpv  (alias pstr in the example) 
```

崩溃 matlab（（R2011a）64 位）

如何清除 lib.pointer ？

（我尝试更改 java vm，但行为相同）

```
MATLAB Version  : 7.12.0.635 (R2011a)
Operating System: Microsoft Windows 7
Processor ID    : x86 Family 6 Model 14 Stepping 5, GenuineIntel
Virtual Machine : Java 1.7.0_09-b05 with Oracle Corporation Java HotSpot(TM) 64-Bit    Server VM mixed mode
Window System   : Version 6.1 (Build 7601: Service Pack 1)

Fault Count: 1

Abnormal termination:

Segmentation violation

Register State (from fault):

RAX = 00000000015ccf68  RBX = 000000000e6faab0

RCX = 0000000001e90000  RDX = 0000000000000000

RSP = 00000000015ccef0  RBP = 0000000000000000
RSI = 0000000001e90000  RDI = 000000000e6faac0

R8 = 000000000e6faac0   R9 = 00000000040fa250
R10 = 0000000029c25fa0  R11 = 00000000015cd090
R12 = 000000000422e750  R13 = 0000000000000000
R14 = 0000000000000001  R15 = 000000006156fd40

RIP = 000000007709324e  EFL = 00010246

CS = 0033   FS = 0053   GS = 002b

Stack Trace (from fault):
[  0] 0x000000007709324e                      C:/Windows/SYSTEM32/ntdll.dll+00340558 ( RtlFreeHeap+000078 )
[  1] 0x000000007698300a                   C:/Windows/system32/kernel32.dll+00143370 ( HeapFree+000010 )
[  2] 0x000000006b89cabc C:/Windows/WinSxS/amd64_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_08e61857a83bc251/MSVCR90.dll+00314044 ( free+000028 )
[  3] 0x000007fef131f9d9 C:/Program Files/MATLAB/R2011a/bin/win64/libmwcli.dll+00063961 ( RefDataType::AssignPointer+002153 )
[  4] 0x000007fef131cb2d C:/Program Files/MATLAB/R2011a/bin/win64/libmwcli.dll+00052013 ( callstdfcn+005693 )
[  5] 0x000007fef131c7a4 C:/Program Files/MATLAB/R2011a/bin/win64/libmwcli.dll+00051108 ( callstdfcn+004788 )
[  6] 0x000000005f0a0d83   C:/Program Files/MATLAB/R2011a/bin/win64/udd.dll+00200067 ( UDInterface::destroyInternals+000067 )
[  7] 0x000000005f0a0f06   C:/Program Files/MATLAB/R2011a/bin/win64/udd.dll+00200454 ( UDInterface::destroyUnconditional+000230 )
[  8] 0x000000005f0a1034   C:/Program Files/MATLAB/R2011a/bin/win64/udd.dll+00200756 ( UDInterface::copyE+000052 )
[  9] 0x000000005e1f0750 C:/Program Files/MATLAB/R2011a/bin/win64/udd_mi.dll+00264016 ( judiSetDynamicPropertyValue+008368 )
[ 10] 0x0000000075a28723 C:/Program Files/MATLAB/R2011a/bin/win64/libmx.dll+00034595 ( mxSetObjectCreateDestroyFn+000275 )
[ 11] 0x0000000075a288aa C:/Program Files/MATLAB/R2011a/bin/win64/libmx.dll+00034986 ( mxSetObjectCreateDestroyFn+000666 )
[ 12] 0x0000000075a7e8e5 C:/Program Files/MATLAB/R2011a/bin/win64/libmx.dll+00387301 ( mxClearArrayContents+000021 )
[ 13] 0x0000000051672928 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00731432 ( inDestroyWS+465608 )
[ 14] 0x0000000051666932 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00682290 ( inDestroyWS+416466 )
[ 15] 0x00000000516754ee C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00742638 ( inDestroyWS+476814 )
[ 16] 0x0000000051675930 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00743728 ( inDestroyWS+477904 )
[ 17] 0x00000000615201a9 C:/Program Files/MATLAB/R2011a/bin/win64/m_dispatcher.dll+00065961 ( mdLogging::log_function_entry+000201 )
[ 18] 0x0000000061520156 C:/Program Files/MATLAB/R2011a/bin/win64/m_dispatcher.dll+00065878 ( mdLogging::log_function_entry+000118 )
[ 19] 0x000000006151fb98 C:/Program Files/MATLAB/R2011a/bin/win64/m_dispatcher.dll+00064408 ( Mfunction_handle::dispatch+000456 )
[ 20] 0x000000005164182b C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00530475 ( inDestroyWS+264651 )
[ 21] 0x000000005163e082 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00516226 ( inDestroyWS+250402 )
[ 22] 0x0000000051654c73 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00609395 ( inDestroyWS+343571 )
[ 23] 0x0000000051654dc0 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00609728 ( inDestroyWS+343904 )
[ 24] 0x000000005164624b C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00549451 ( inDestroyWS+283627 )
[ 25] 0x00000000516442ac C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00541356 ( inDestroyWS+275532 )
[ 26] 0x0000000051651009 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00593929 ( inDestroyWS+328105 )
[ 27] 0x000000006151f859 C:/Program Files/MATLAB/R2011a/bin/win64/m_dispatcher.dll+00063577 ( Mfh_file::dispatch_fh+000473 )
[ 28] 0x000000006151fccf C:/Program Files/MATLAB/R2011a/bin/win64/m_dispatcher.dll+00064719 ( Mfunction_handle::dispatch+000767 )
[ 29] 0x00000000516c6de8 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01076712 ( inSetPredictor+001000 )
[ 30] 0x00000000516d3415 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01127445 ( inInitInterestRegistry+004309 )
[ 31] 0x00000000516d5175 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01134965 ( inIsCodeBlockComplete+007445 )
[ 32] 0x00000000516d5148 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01134920 ( inIsCodeBlockComplete+007400 )
[ 33] 0x00000000516d510e C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01134862 ( inIsCodeBlockComplete+007342 )
[ 34] 0x0000000051698113 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+00885011 ( inGetSeqVarPtrsFromCurrentWS+007315 )
[ 35] 0x00000000516c98e0 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01087712 ( inEvalCmdWithLocalReturn+000304 )
[ 36] 0x00000000516c983c C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01087548 ( inEvalCmdWithLocalReturn+000140 )
[ 37] 0x00000000516c97f1 C:/Program Files/MATLAB/R2011a/bin/win64/m_interpreter.dll+01087473 ( inEvalCmdWithLocalReturn+000065 )
[ 38] 0x0000000079fb833a C:/Program Files/MATLAB/R2011a/bin/win64/libmwbridge.dll+00033594 ( mnDebugPrompt+000106 )
[ 39] 0x0000000079fbd0d2 C:/Program Files/MATLAB/R2011a/bin/win64/libmwbridge.dll+00053458 ( mnParser+000418 )
[ 40] 0x00000000749ab604   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00243204 ( mcrInstance::mnParser_on_interpreter_thread+000036 )
[ 41] 0x000000007498ed24   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00126244 ( DepfunRules::postWarning+045636 )
[ 42] 0x000000007498edb1   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00126385 ( DepfunRules::postWarning+045777 )
[ 43] 0x0000000001b79676   C:/Program Files/MATLAB/R2011a/bin/win64/uiw.dll+00366198 ( UIW_IsUserMessage+000086 )
[ 44] 0x0000000001b79d44   C:/Program Files/MATLAB/R2011a/bin/win64/uiw.dll+00367940 ( ws_ProcessPendingEventsWaitForWindows+000356 )
[ 45] 0x0000000076f687fe                     C:/Windows/system32/USER32.dll+00165886 ( GetMenuBarInfo+000638 )
[ 46] 0x0000000076f4f5fb                     C:/Windows/system32/USER32.dll+00062971 ( SystemParametersInfoW+000235 )
[ 47] 0x0000000076f54895                     C:/Windows/system32/USER32.dll+00084117 ( IsProcessDPIAware+000465 )
[ 48] 0x0000000077091225                      C:/Windows/SYSTEM32/ntdll.dll+00332325 ( KiUserCallbackDispatcher+000031 )
[ 49] 0x0000000076f59e6a                     C:/Windows/system32/USER32.dll+00106090 ( SfmDxSetSwapChainStats+000026 )
[ 50] 0x0000000076f5615e                     C:/Windows/system32/USER32.dll+00090462 ( GetMessageA+000078 )
[ 51] 0x0000000001b53f07   C:/Program Files/MATLAB/R2011a/bin/win64/uiw.dll+00212743 ( UIW_SetCurrentDialog+000855 )
[ 52] 0x0000000001b7b117   C:/Program Files/MATLAB/R2011a/bin/win64/uiw.dll+00373015 ( ws_FreeSystemFont+000519 )
[ 53] 0x000000005e36b7b3 C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00178099 ( sysq::ws_ppeHook::~ws_ppeHook+009539 )
[ 54] 0x000000005e36cf3c C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00184124 ( svWS_CommitDatabaseUpdates+002796 )
[ 55] 0x000000005e36d97a C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00186746 ( svWS_CommitDatabaseUpdates+005418 )
[ 56] 0x000000005e36dbbd C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00187325 ( svWS_CommitDatabaseUpdates+005997 )
[ 57] 0x000000005e36ddb8 C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00187832 ( svWS_CommitDatabaseUpdates+006504 )
[ 58] 0x000000005e36df10 C:/Program Files/MATLAB/R2011a/bin/win64/libuij.dll+00188176 ( svWS_CommitDatabaseUpdates+006848 )
[ 59] 0x000000007498e28f   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00123535 ( DepfunRules::postWarning+042927 )
[ 60] 0x000000007498f051   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00127057 ( DepfunRules::postWarning+046449 )
[ 61] 0x000000007498f37e   C:/Program Files/MATLAB/R2011a/bin/win64/mcr.dll+00127870 ( DepfunRules::postWarning+047262 )
[ 62] 0x000000013f527304 C:/Program Files/MATLAB/R2011a/bin/win64/MATLAB.exe+00029444 ( ???+000000 )
[ 63] 0x000000013f5273d9 C:/Program Files/MATLAB/R2011a/bin/win64/MATLAB.exe+00029657 ( ???+000000 )
[ 64] 0x000000013f5278cb C:/Program Files/MATLAB/R2011a/bin/win64/MATLAB.exe+00030923 ( ???+000000 )
[ 65] 0x000000007697652d                   C:/Windows/system32/kernel32.dll+00091437 ( BaseThreadInitThunk+000013 )
[ 66] 0x000000007706c521                      C:/Windows/SYSTEM32/ntdll.dll+00181537 ( RtlUserThreadStart+000033 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:10:53.673

解决了

动态分配的内存必须首先在 c 中释放！

更改 c-dll 函数

```
void test(char **u1, char **y1)
{
   std::string recvString("Test Output");
   *y1 = strdup(recvString.c_str()); //allocate and copy 
} 
```

添加c-dll函数

```
void clear(char** y1)
{
   free(*y1)
   *y1 = NULL;
} 
```

添加matlab

```
loadlibrary('rriMonitor.dll', 'rriMonitor.h');

vpu = libpointer('stringPtrPtr',{'test input'});
vpv = libpointer('stringPtrPtr',{''});

calllib('rriMonitor','test',vpu,vpv);
vpv.value{1}    %gives correct string 'Test Output'

calllib('rriMonitor','clear',vpv);
vpv.value       %null pointer {[]}
clear all       %works

unloadlibrary 'rriMonitor' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:18:43.690

[`strdup()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)使用 . 创建一个新缓冲区`malloc()`。

因此，您分配了两倍所需的内存并返回使用错误分配器分配的内存：

```
void test(char **u1, char **y1)
{
   std::string recvString("Test Output");

   // Allocates a MATLAB-compatible memory buffer for the new string.
   *y1 = (char*) mxRealloc(*y1, recvString.size()+1);

   // Creates another memory buffer for the new string using a memory
   // allocator that's incompatible with MATLAB's automatic memory manager.
   //
   // Additionally, the pointer to the 1st memory buffer is lost and
   // there is a memory leak.
   *y1 = strdup(recvString.c_str());
} 
```

* * *

当 MATLAB 尝试释放您返回的内存时会发生崩溃。由于内存缓冲区与其内存管理器不兼容，因此违反了某些假设并导致崩溃。

* * *

你可能打算写：

```
void test(char **u1, char **y1)
{
   std::string recvString("Test Output");

   // Allocate memory buffer using MATLAB-compatible memory.
   *y1 = (char*) mxRealloc(*y1, recvString.size()+1);

   // Copy the string contents into the MATLAB-compatible memory buffer.
   strcpy(*y1, recvString.c_str());
} 
```

# javascript - window.location.replace with Phonegap

> ID：13266099
> 
> 赞同：2
> 
> 时间：2012-11-07T08:49:55.013
> 
> 标签：javascript, cordova, globalization

我尝试设置一个 JS 函数来自动加载不同语言的索引页面，这与我的阅读器的设置设备有关。

我试试这个......但不工作：

```
<script src="cordova-2.2.0.js"></script>
<script type="text/javascript" charset="utf-8">

            function checkLanguage() {
                if (navigator.globalization.getPreferredLanguage()='en_EN')

                {
                window.location.replace("index_en.html");
            }

            else if (navigator.globalization.getPreferredLanguage()='fr_FR')
            {
                window.location.replace("index_fr.html");
            }
            else
            {
                window.location.replace("index_other.html");
            }

        }
</script> 
```

可以使用这种方法，还是我必须考虑其他选项来处理我的多语言应用程序？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:27:16.183

你需要使用getPreferredLanguage的回调：

```
var handleDeviceReady = function (event)
{
    navigator.globalization.getPreferredLanguage(
        function (language)
            {
                console.log("language: " + language.value + '\n');
                redirectToLocaleSpecificLogin(language.value);
            },
        function ()
            {
                console.log("Error getting language\n");
                redirectToLocaleSpecificLogin("en");
            }
    );
};

document.addEventListener("deviceready", handleDeviceReady, false); 
```

然后在您的回调（在这种情况下为redirectToLocaleSpecificLogin）内部，您可以进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:55:24.333

大多数浏览器使用**语言**属性，IE使用**userLanguage**

`var lang = window.navigator.userLanguage || window.navigator.language;`

这应该适用于 IE、SAFARI、CHROME 和 FF

**编辑：**

[用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/q/1043339/1618713)此链接对此主题有更详细的讨论

# c# - 将包含不同数量参数的 JSON 数据反序列化为 C#（使用 Json.NET）

> ID：13266100
> 
> 赞同：1
> 
> 时间：2012-11-07T08:49:59.437
> 
> 标签：c#, json, rest, json.net

我正在尝试反序列化以下 JSON 响应：

```
[{"pollid":"1", "question":"This is a test", "start":"2011-06-28", "end":"2012-03-21", "category":"Roads", "0":"Yes", "1":"No"} … ] 
```

然而，一个问题出现了，“类别”后面的参数数量可以从 0 到 10 不等。这意味着以下所有可能的 JSON 响应：

```
[{"pollid":"1", "question":"This is a test", "start":"2011-06-28", "end":"2012-03-21", "category":"Roads"} … ]
[{"pollid":"1", "question":"This is a test", "start":"2011-06-28", "end":"2012-03-21", "category":"Roads", "0":"Yes", "1":"No"} … ]
[{"pollid":"1", "question":"This is a test", "start":"2011-06-28", "end":"2012-03-21", "category":"Roads", "0":"Bad", "1":"OK", "2":"Good", "3":"Very good"} … ] 
```

我正在反序列化对以下形式的对象的响应：

```
class Poll
    {
        public int pollid { get; set; }
        public string question { get; set; }
        public DateTime start { get; set; }
        public DateTime end { get; set; }
        public string category { get; set; }

        [JsonProperty("0")]
        public string polloption0 { get; set; }
        [JsonProperty("1")]
        public string polloption1 { get; set; }
        [JsonProperty("2")]
        public string polloption2 { get; set; }
        [JsonProperty("3")]
        public string polloption3 { get; set; }
        [JsonProperty("4")]
        public string polloption4 { get; set; }
        [JsonProperty("5")]
        public string polloption5 { get; set; }
        [JsonProperty("6")]
        public string polloption6 { get; set; }
        [JsonProperty("7")]
        public string polloption7 { get; set; }
        [JsonProperty("8")]
        public string polloption8 { get; set; }
        [JsonProperty("9")]
        public string polloption9 { get; set; }
    } 
```

我的问题是：是否有更好的方法来处理不同数量参数的存储？拥有 10 个可能使用或不使用的类属性（取决于响应）似乎是这样的“黑客”。

任何帮助将不胜感激！

非常感谢，特德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:54:48.373

您可以在 Array 中保存可变数量的属性

有类似的东西

```
List<string> (); 
```

你把所有 polloption1, polloption2 ...

或者您可以将 json 反序列化为动态类型

```
dynamic d = JObject.Parse(json); 
```

并访问您知道存在的属性

```
d.pollid, d.start, d.category ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:55:38.900

> 是否有更好的方法来处理不同数量参数的存储？

您可以反序列化为[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)或`dynamic`例如

```
var serializer = new JavaScriptSerializer();   
var result = serializer.Deserialize<dynamic>(json);
foreach (var item in result)
{
    Console.WriteLine(item["question"]);
} 
```

# log4j - Log4j 在 jboss 7 上写入标准输出

> ID：13266104
> 
> 赞同：1
> 
> 时间：2012-11-07T08:50:08.477
> 
> 标签：log4j, jboss7.x

在我的 Web 应用程序中，我使用自己的 log4j.xml 文件重新初始化 log4j。

我已经使用以下 jboss-deployment-structure.xml 排除了我的 log4j.jar

```
<jboss-deployment-structure>
<deployment>
    <!-- Exclusions allow you to prevent the server from automatically adding some dependencies -->
    <exclusions>
        <module name="org.apache.log4j" />
    </exclusions>
</deployment> 
```

重新初始化后，log4j 将所有内容记录在标准输出中

在 jboss 5 中，我使用了这个 JVM 参数

```
-Dorg.jboss.logging.Log4jService.catchSystemOut=false 
```

对于 jboss 7，这是行不通的。如何将 log4j 配置为不登录到标准输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:38:16.633

如果您没有使用特殊的附加程序，您可能最好使用应用程序服务器附带的日志记录配置。它的优点是允许您从其管理界面（Web 控制台、CLI 等）进行运行时更改。

您仍然可以在应用程序中使用 log4j 作为日志外观，但您只需管理来自应用程序服务器的记录器和处理程序（附加程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T15:21:48.947

我不得不排除以下两个模块：

```
 <exclusions>
   <module name="org.apache.log4j" />
   <module name="org.jboss.log4j.logmanager" />
 </exclusions> 
```

# android - 如何提高我的列表视图的滚动速度

> ID：13266108
> 
> 赞同：2
> 
> 时间：2012-11-07T08:50:51.147
> 
> 标签：android, android-listview

> **编辑：**好的，我接受了答案中给出的建议，差异**很大！**我已经用新的替换了帖子中的 SeriesAdapter。一方面，知道在 sql 查询中进行计算（以了解剧集总数和观看剧集的总数）。一旦它被加载，我还将位图存储在哈希图中，这样它就不必加载两次，我正在寻找其他解决方案，因为我害怕 OutOfMemoryException。

我是 android 新手，我想显示一个列表视图，其中包含我存储在外部存储中的图像。

图片是之前下载的，现在就像我说的那样存储在外部存储中，这里是图片的示例[http://thetvdb.com/banners/graphical/80348-g32.jpg](http://thetvdb.com/banners/graphical/80348-g32.jpg)我将图片压缩到 80% 时保存它们以节省一些空间。

我已经尝试了几种方法来使列表视图滚动流畅，但我显然在我的头上。我已经为列表项和适配器提供了布局，以防我在这里做一些奇怪的事情。

我将不胜感激任何可以改善我的列表视图的提示和技巧。

系列适​​配器：

```
public static class SeriesAdapter extends ArrayAdapter<Series> {

    static class viewHolder
    {
        ImageView image;
        TextView information;
        String seriesId;
        String season;
        ProgressBar progress;
        TextView txtSmallView;
    }

    private final Context context;
    private final ArrayList<Series> series;
    private DateHelper dateHelper;
    private final DatabaseHandler db;
    Object mActionMode;
    int resource;

    public SeriesAdapter(Context context, int resource, ListView lv, ArrayList<ExtendedSeries> objects)
    {
        super(context, resource, objects);
        this.context = context;
        this.series = objects;
        this.resource = resource;
        db = new DatabaseHandler(context);
        dateHelper = new DateHelper();  

        cache = new HashMap<String, Bitmap>();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {

        viewHolder holder;
        ExtendedSeries s = series.get(position);

        if(convertView == null)
        {
            convertView = View.inflate(context, resource, null);
            holder = new viewHolder();

            holder.image = (ImageView)convertView.findViewById(R.id.imgSeriesImage);
            holder.information = (TextView)convertView.findViewById(R.id.txtUpcomingEpisode);
            holder.progress = (ProgressBar)convertView.findViewById(R.id.pgrWatched);                       

            convertView.setTag(holder);
        }
        else
        {
            holder = (viewHolder)convertView.getTag();
        }

        if(s != null)
        {
            holder.seriesId = s.getImage();

            convertView.setTag(R.string.homeactivity_tag_id,s.getID());
            convertView.setTag(R.string.homeactivity_tag_seriesid,s.getSeriesId());

            holder.progress.setMax(s.getTotalEpisodes());
            holder.progress.setProgress(s.getWatchedEpisodes());
            holder.image.setImageBitmap(getBitmapFromCache(s.getImage()));
            holder.information.setText(s.getNextEpisodeInformation().equals("") ? context.getText(R.string.message_show_ended) : s.getNextEpisodeInformation());        

        }

        return convertView;

    } 
```

列表项布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imgSeriesImage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:focusable="false"
    android:scaleType="centerCrop"
    android:src="@drawable/noimage" />

<RelativeLayout
    android:id="@+id/relProgressView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:orientation="vertical" >

    <ProgressBar
        android:id="@+id/pgrWatched"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="21dp"
        android:max="100"
        android:progress="50"
        android:progressDrawable="@drawable/progressbar" />

    <TextView
        android:id="@+id/txtUpcomingEpisode"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:focusable="false"
        android:padding="3dp"
        android:scrollHorizontally="true"
        android:scrollbars="none"
        android:shadowColor="@android:color/black"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="1"
        android:textAllCaps="true"
        android:textColor="#ffffffff"
        android:textSize="11sp"
        android:textStyle="normal|bold"
        android:typeface="normal" />
</RelativeLayout> 
```

活动布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<ListView
        android:id="@+id/lstMySeries"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:longClickable="true"
        android:divider="#000000"
         /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:01:46.217

该`getView`方法需要尽可能轻，因为当它显示在屏幕上时，它会为行中的每个项目调用。

您已经实现了`viewHolder`很好的模式，但您还需要预处理“观看的剧集”逻辑，这样您就不会在显示代码中循环和计数。您还需要在此方法调用之外执行 db.GetAiredEpisodes 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:05:35.130

我不知道您的代码为什么在`getView()`方法中进行 IO 操作。这是一项昂贵的操作，你不能让它成为数据库中的一个字段吗？？？你不能计算其他地方吗？？？也许在数据加载器中，即您加载系列的地方。

# c# - 根据 RadioButton 选择的 TextBox 过滤

> ID：13266120
> 
> 赞同：0
> 
> 时间：2012-11-07T08:51:21.600
> 
> 标签：c#, javascript, asp.net

我有一个`RadioButtonList`和一个`TextBox`。根据 RadioButtonList 选择，我想过滤文本框。

```
 <asp:RadioButtonList ID="RadioButtonList1"  runat="server"  AutoPostBack="True" OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged">
      <asp:ListItem Text="NUMBER" Value="1" Selected="True"></asp:ListItem>
      <asp:ListItem Text="TEXT" Value="2"></asp:ListItem>
</asp:RadioButtonList>

 <asp:TextBox ID="txtID" runat="server"> 
```

当我单击带有 value 的 listitem 时`1`，用户可以在文本框中输入数字。值`2`，数字 + 文本。我也想设置长度。有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:08:14.097

编写一个 Javascript 函数，该函数将从`RadioButtonList1`控件中获取选定的值并与 value`1`或进行比较`2`。如果是`1`，则应仅允许用户输入数字。这可以从文本框的客户端按键事件中强制执行，该事件将检查比较结果，以允许按下的键实际呈现在文本框中。

请参阅[this](https://stackoverflow.com/questions/9359127/how-to-find-selected-item-from-radiobutton-list-using-javascript)以查看如何`RadioButtonList`使用控件从控件中获取选定值`Javascript`

# dart - 如何在 Dart 中运行 `dir`？

> ID：13266123
> 
> 赞同：0
> 
> 时间：2012-11-07T08:51:36.353
> 
> 标签：dart

如何`dir`从 Dart VM 运行命令？当我尝试将它与`Process`类一起使用时，我得到“未处理的异常”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:51:36.353

感谢 Søren Gjesse 的回答，他最初[将其发布到 Dart 邮件列表](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/x7CRDeo1-os)。

您不能只`dir`在 Windows 上运行，因为它不是独立的可执行文件，而是内置于`cmd.exe`. 以下代码将运行`dir`并打印结果：

```
import 'dart:io';

void main() {
    Process.run('cmd', ['/c', 'dir']).then((ProcessResult results) {
      print(results.stdout);
    });
} 
```

有关进程的更多信息，另请参阅[Dart IO 库](http://api.dartlang.org/docs/bleeding_edge/dart_io.html)。

# ios - 如何在两个开发人员的团队中使用分发证书

> ID：13266125
> 
> 赞同：1
> 
> 时间：2012-11-07T08:51:36.407
> 
> 标签：ios, build, certificate, provisioning

我为客户创建了一个应用程序，并使用分发证书在我的笔记本电脑上构建它。

现在团队中有一位新成员。我认为我们必须共享相同的分发证书才能创建应用程序的构建是否正确？或者我们每个人都可以拥有自己的分销证书吗？

如果我们必须共享同一个，我是否只是从我的 XCode Organizer 中“导出”团队配置？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:03:42.653

是的。使用密码导出它，您可以将生成的文件提供给您的同事。

# sql-server-2008 - 如何从今天的日期中选择最后一周的数据

> ID：13266130
> 
> 赞同：38
> 
> 时间：2012-11-07T08:51:48.633
> 
> 标签：sql-server-2008, dateadd

当我在表中有数百万或行时，如何以最快的方式从当前日期选择周数据（更准确地说，是最近 7 天的数据）。我在 sql 表中有一个 created_date 的时间戳。

我试过这个

```
SELECT Created_Date
FROM Table_Name
WHERE Created_Date >= DATEADD(day,-7, GETDATE()) 
```

我有两个问题：

1.  这个查询是否正确？
2.  这是从具有数百万行的表中获取最近 7 天数据的最快方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-07T08:56:17.613

是的，语法是准确的，应该没问题。

这是我为您的特定案例创建的[SQL Fiddle 演示](http://sqlfiddle.com/#!3/91029/3)

```
create table sample2
(
    id int primary key,
    created_date date,
    data varchar(10)
  )

insert into sample2 values (1,'2012-01-01','testing'); 
```

这里是如何选择数据

```
SELECT Created_Date
FROM sample2
WHERE Created_Date >= DATEADD(day,-11117, GETDATE()) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-03T02:50:20.540

选择过去 7 天的记录

```
SELECT * FROM [TableName]
WHERE Created_Date >= DATEADD(day, -7, GETDATE()) 
```

选择本周的记录

```
SET DATEFIRST 1 -- Define beginning of week as Monday
SELECT * FROM [TableName]
WHERE CreatedDate >= DATEADD(day, 1 - DATEPART(WEEKDAY, GETDATE()), CONVERT(DATE, GETDATE())) 
  AND CreatedDate <  DATEADD(day, 8 - DATEPART(WEEKDAY, GETDATE()), CONVERT(DATE, GETDATE())) 
```

如果您想选择上周而不是过去 7 天的记录

```
SET DATEFIRST 1 -- Define beginning of week as Monday
SELECT * FROM [TableName] 
WHERE CreatedDate >= DATEADD(day, -(DATEPART(WEEKDAY, GETDATE()) + 6), CONVERT(DATE, GETDATE())) 
  AND CreatedDate <  DATEADD(day, 1 - DATEPART(WEEKDAY, GETDATE()), CONVERT(DATE, GETDATE())) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T09:19:53.560

1.  查询是正确的

2A。就过去 7 天而言，行数比整个表少得多，索引可以提供帮助

2B。如果您只对 Created_Date 感兴趣，您可以尝试使用一些分组依据和计数，它应该有助于结果集大小

# nginx - 如何添加我自己的 nginx 事件处理程序？

> ID：13266136
> 
> 赞同：2
> 
> 时间：2012-11-07T08:52:11.157
> 
> 标签：nginx, epoll

我正在编写一个模块来提供一种处理 arp 日期的方法。

我想使用nginx的基本结构和事件模块，所以我写了一个类似**http{}的模块**

我的问题是，我不知道如何将我的读取事件添加到 nginx 的事件循环中，我尝试在我的 ngx_module_t 的**init_process函数中调用****ngx_add_event**，但我得到一个 NULL ptr ...

 **我应该怎么办？**

# c - C 程序读取文件并仅打印数字

> ID：13266138
> 
> 赞同：4
> 
> 时间：2012-11-07T08:52:14.667
> 
> 标签：c

我有一个包含字符串和数字的文件。例如。我的文件 Store-1.txt 包含“coffee 2mug -4”。我需要 ac 程序通过读取文件并将数字仅保存到数组中来仅存储数字（即 2 和 -4）。

我不知道该怎么做。请有任何建议。

代码是

```
#include <stdio.h>

int main(void)
 {
 char c,ch;
 int flag=0;
  FILE *fptr=fopen("Store-1.txt","r");
  if(fptr)
 {
 while((c=fgetc(fptr))!=EOF)
 {
 if(c=='-' || c== '+')
     {
      ch=c;
      flag=1;
     }
 if(c>='0' && c<='9')
  {
    if(flag == 1)
     { 
       printf("%c",ch); flag =0;
      }
   printf("%c",c);
  }
   }
   }
  else
printf("Error : file not found");

  system("pause");
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:54:07.633

使用它读取文件`fgetc()`，`printf()`如果

`c>='0' && c<='9'`

这是完整的工作代码：

```
#include <stdio.h>
int main()
{
char c,ch;
int flag=0;
FILE *fp=fopen("file.txt","r");
if(fp)
{
    while((c=fgetc(fp))!=EOF)
    {
     if(c=='-' || c== '+')
         {
          ch=c;
          flag=1;
          continue;
         }
     if(c>='0' && c<='9')
      {
        if(flag == 1)
         {
           printf("%c",ch); flag =0;
          }
       printf("%c",c);
      }
     else
        flag=0;
    }
}
else
    printf("Error : file not found");

fclose(fp);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:43:43.183

```
#include <ctype.h>
#include <stdio.h>

int main(void)
{
   int ch, n, sign;

   sign = 1;
   ch = getchar();
   while (ch != EOF) {
      if (ch == '-') {
         sign = -1;
         ch = getchar();
      } else if (isdigit(ch)) {
         n = 0;
         do {
            n = n * 10 + ch - '0';
            ch = getchar();
         } while (isdigit(ch));
         n *= sign;
         /*store n*/
      } else {
         sign = 1;
         ch = getchar();
      }
   }
   return 0;
} 
```

# java - 注释中的 iText unicode

> ID：13266139
> 
> 赞同：0
> 
> 时间：2012-11-07T08:52:16.960
> 
> 标签：java, unicode, annotations, itext

我在java中使用Itext。

请给我一个例子来添加一个文本注释，其中包含内容中的 unicode 字符串到 pdf。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:44:11.440

这是一个向现有 PDF 添加文本注释的简单示例；文本注释的标题和内容都包含阿拉伯字符。

```
import java.io.*;

import junit.framework.TestCase;

import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.*;

public class TestAnnotations extends TestCase
{
    // a phonetic approximation
    final static String LAWRENCE_OF_ARABIA = "\u0644\u0648\u0631\u0627\u0646\u0633\u0627\u0644\u0639\u0631\u0628";

    public void testUnicodeAnnotation() throws Exception
    {
        final PdfReader origPdfReader = new PdfReader("test.pdf");
        final OutputStream outputStream = new FileOutputStream("test-annot.pdf");
        final PdfStamper pdfStamper = new PdfStamper(origPdfReader, outputStream, '\0', true);

        Rectangle rect = new Rectangle(100, 100);
        PdfAnnotation annotation = PdfAnnotation.createText(pdfStamper.getWriter(), rect, LAWRENCE_OF_ARABIA, LAWRENCE_OF_ARABIA, true, "Help");
        pdfStamper.addAnnotation(annotation, 1);
        pdfStamper.close();
        outputStream.close();
    }
} 
```

![样本结果](../Images/b5dda2798742f823a1d05832d039fd57.png)

# php - 使用 fgetcsv 将 Excel csv 导出为 php 文件

> ID：13266146
> 
> 赞同：4
> 
> 时间：2012-11-07T08:52:47.247
> 
> 标签：php, excel, csv

我正在使用 excel 2010 Professional plus 创建一个 excel 文件。稍后我尝试将其导出为 UTF-8 .csv 文件。我通过将其保存为 CSV 来做到这一点（符号分隔.....*对不起，我不知道那里的确切措辞，但我没有英文版，我担心它的翻译方式与 1:1 不同*）。在那里我单击工具-> weboptions 并选择 unicode (UTF-8) 作为编码。.csv 示例如下：

```
ID;englishName;germanName
1;Austria;Österreich 
```

到目前为止一切顺利，但如果我现在用我的 php 代码打开文件：

```
 header('Content-Type: text/html; charset=UTF-8');
 iconv_set_encoding("internal_encoding", "UTF-8");
 iconv_set_encoding("output_encoding", "UTF-8");
 setlocale(LC_ALL, 'de_DE.utf8');
 $fp=fopen($filePathName,'r');
 while (($dataRow= fgetcsv($fp,0,";",'"') )!==FALSE)
 {
     print_r($dataRow);
 } 
```

*   我得到： sterreich 作为屏幕上的结果（因为那是“错误”，我剪切了结果的所有其他部分）。
*   如果我用 notepad++ 打开文件并查看编码，我会看到“ANSI”而不是 UTF-8。
*   如果我将 notepad++ 中的编码更改为 UTF8.... ö,ä,... 将被特殊字符替换，我必须手动更正。

如果我走另一条路线并使用notepad ++创建一个新的UTF-8文件并输入与excel文件中相同的数据，当我使用php文件打开它时，我会在屏幕上显示“Österreich”。

现在我的问题是，为什么它不能与 excel 一起使用，所以我在这里做错了什么？还是我忽略了什么？

**编辑：** *由于该程序最终将安装在客户提供的 Windows 服务器上，因此需要一种解决方案，无需安装其他工具（php 库，... 可以，但必须安装 vm-ware 或cygwin，...不是）。此外，服务器上不会本地安装 excel（或 office），因为客户将能够通过文件上传对话框上传 .csv 文件（对话框本身不是问题的一部分，因为我知道如何处理这些问题以及我在创建 excel 文件并将其转换为 .csv 在本地安装了 excel 的测试机器上时偶然发现的问题）。*

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T18:40:32.867

[**来自 PHP 文档**](http://www.php.net/function.fgetcsv#refsect1-function.fgetcsv-note)

> 此功能考虑了区域设置。如果 LANG 是例如 en_US.UTF-8，**则此函数会错误地读取单字节编码的**文件。

**你可以试试**

```
header('Content-Type: text/html; charset=UTF-8');
$fp = fopen("log.txt", "r");
echo "<pre>";
while ( ($dataRow = fgetcsv($fp, 1000, ";")) !== FALSE ) {
    $dataRow = array_map("utf8_encode", $dataRow);
    print_r($dataRow);
} 
```

**输出**

```
Array
(
    [0] => ID
    [1] => englishName
    [2] => germanName
)
Array
(
    [0] => 1
    [1] => Austria
    [2] => Österreich
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:36:34.527

我不知道为什么 Excel 会生成 ANSI 文件而不是 UTF-8（如您在 Notepad++ 中所见），但如果是这种情况，您可以使用 iconv 转换文件：

iconv --from-code=ISO-8859-1 --to-code=UTF-8 my_csv_file.csv > my_csv_file_utf8.csv

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T14:53:22.087

对于捷克共和国的人民：

```
function convert( $str ) {
    return iconv( "CP1250", "UTF-8", $str );
}
...
while (($data = fgetcsv($this->fhandle, 1000, ";")) !== FALSE) {
$data = array_map( "convert", $data );
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T11:44:33.543

根据您的说法，我怀疑 excel 编写了一个[没有 BOM](http://en.wikipedia.org/wiki/Utf8#Byte_order_mark)的 UTF-8 文件，这使得猜测编码是 utf-8 有点棘手。`Format->Encode in UTF-8 (without BOM)`如果在按 to （而不是`Format->Convert to UTF-8 (without BOM)`）时字符在 Notepad++ 中正确显示，您可以确认此诊断。

你确定每个用户都会使用 UTF-8 吗？在我看来，您需要一些能够巧妙地猜测您的真实输入编码是什么的东西。通过“智能”，我的意思是这种猜测可以识别无 BOM 的 UTF-8。

为了切入正题，我会做这样的事情：

```
$f = fopen('file.csv', 'r');

while( ($row = fgets($f)) != null )
    if( mb_detect_encoding($row, 'UTF-8', true) !== false )
        var_dump(str_getcsv( $row, ';' ));
    else
        var_dump(str_getcsv( utf8_encode($row), ';' ));

fclose($f); 
```

之所以有效，是因为您阅读字符来猜测编码，而不是懒惰地信任前 3 个字符：因此，没有 BOM 的 UTF-8 仍将被识别为 UTF-8。当然，如果您的 csv 文件不是太大，您可以对整个文件内容进行编码检测：类似于`mb_detect_encoding(file_get_contents(...), ...)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T12:12:15.030

问题一定是你的文件编码，它看起来不是 utf-8。

当我尝试您的示例并仔细检查确实是 utf-8 的文件时，它对我有用，我得到：

> 数组（ [0] => 1 [1] => 奥地利 [2] => Österreich）

使用 LibreOffice (OpenOffice)，它对这类事情更可靠。

# android - Android : onSearchRequested() 捕获文本

> ID：13266147
> 
> 赞同：0
> 
> 时间：2012-11-07T08:52:50.120
> 
> 标签：android, search, android-edittext

我正在开发一个用于搜索功能的示例。我使用了 onSearchRequested() 并在调用它时得到一个编辑框，我可以在其中输入搜索参数。我想做的是，我想捕获在编辑框中输入的文本，因为我想将它发送到另一个活动。

通常对于我们定义的editText，我们可以使用它的'id'来访问它。但是，由于在 onSearchRequested() 的情况下，editText 是自动创建的，所以我如何访问和捕获其中键入的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:16:03.413

查看有关[创建搜索界面](http://developer.android.com/guide/topics/search/search-dialog.html)的文档。部分文档是关于如何设置 SearchableActivity 的示例，该活动由用户输入的查询调用，并且应该执行搜索并显示结果。我想这正是你想要的。

# visual-c++ - ASSERT(::IsWindow(m_hWnd)) 在 Afxwin2.inl 中失败

> ID：13266154
> 
> 赞同：0
> 
> 时间：2012-11-07T08:53:21.123
> 
> 标签：visual-c++, memory-leaks, mfc, application-verifier

我正在我的项目中创建一个视图，它是 CView 的子类。

```
class CBaseGLView : public CView 
```

在 oncreate 函数中，我正在检查它是否为空，如下所示：

```
int CBaseGLView::OnCreate(LPCREATESTRUCT lpCreateStruct) 
{
    if (CView::OnCreate(lpCreateStruct) == -1)
            return -1;

    m_hWnd = GetSafeHwnd();
    if( ::IsWindow(m_hWnd)== NULL)
    {
            return 1;
    }
    m_pCDC= new CClientDC(this);
    m_hDC = m_pCDC->GetSafeHdc();

    if (SetWindowPixelFormat()==FALSE)
            return 0;
    return 0;
} 
```

当我使用 ApplicationVerifier 进行调试时，我在 afxwin2.inl 的下面几行中得到了一个调试断言：

```
_AFXWIN_INLINE LRESULT CWnd::_AFX_FUNCNAME(SendMessage)(UINT message, WPARAM wParam, LPARAM lParam) const

{ ASSERT(::IsWindow(m_hWnd)); return ::SendMessage(m_hWnd, message, wParam, lParam); } 
```

并且也`m_hwnd`显示为`unused 0`的内存地址`0x00170fd6`。下面给出的是应用程序验证器的输出。

```
VERIFIER STOP 00000013: pid 0xDF4: First chance access violation for current stack trace. 

339F9020 : Invalid address causing the exception.
0109D75E : Code address executing the invalid access.
0018E034 : Exception record.
0018E084 : Context record. 
```

以下是调试版本的调用堆栈。太长了，见谅。

```
ntdll.dll!7729000c()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
vrfcore.dll!VfCoreRedirectedStopMessage(unsigned long Code=19, char * Message=0x73341b5c, unsigned long Param1=444756000, char * Description1=0x73341b94, unsigned long Param2=17422174, char * Description2=0x73341bb4, unsigned long Param3=1630260, char * Description3=0x73341bd4, unsigned long Param4=1630340, char * Description4=0x73341c00)  Line 103 + 0x19 bytes C++
vfbasics.dll!VerifierStopMessage(unsigned long Code=19, char * Message=0x73341b5c, unsigned long Param1=444756000, char * Description1=0x73341b94, unsigned long Param2=17422174, char * Description2=0x73341bb4, unsigned long Param3=1630260, char * Description3=0x73341bd4, unsigned long Param4=1630340, char * Description4=0x73341c00)  Line 1214    C
vfbasics.dll!AVrfpCheckFirstChanceException(_EXCEPTION_POINTERS * ExceptionPointers=0x0018df7c)  Line 1108 + 0x2b bytes C
vfbasics.dll!AVrfpVectoredExceptionHandler(_EXCEPTION_POINTERS * ExceptionPointers=0x0018df7c)  Line 323    C
ntdll.dll!772f62de()    
ntdll.dll!772db652()    
ntdll.dll!772db314()    
ntdll.dll!77290133()    
user32.dll!753a617a()   

Axial.exe!CWnd::SendMessageA(unsigned int message=2125, unsigned int wParam=0, long lParam=0)  Line 42 + 0x44 bytes C++
Axial.exe!SECWorkbookClientWnd::OnMDISetMenu(unsigned int wParam=261688291, long lParam=21302363)  Line 390 C++
Axial.exe!CWnd::OnWndMsg(unsigned int message=560, unsigned int wParam=261688291, long lParam=21302363, long * pResult=0x0018e980)  Line 2018 + 0x11 bytes  C++
Axial.exe!CWnd::WindowProc(unsigned int message=560, unsigned int wParam=261688291, long lParam=21302363)  Line 1755 + 0x20 bytes   C++
Axial.exe!AfxCallWndProc(CWnd * pWnd=0x1a54bf98, HWND__ * hWnd=0x00120ff0, unsigned int nMsg=560, unsigned int wParam=261688291, long lParam=21302363)  Line 240 + 0x1c bytes   C++
Axial.exe!AfxWndProc(HWND__ * hWnd=0x00120ff0, unsigned int nMsg=560, unsigned int wParam=261688291, long lParam=21302363)  Line 403    C++
user32.dll!753962fa()   
user32.dll!75397316()   
user32.dll!75396ce9()   
user32.dll!75396de8()   
user32.dll!75396e44()   
ntdll.dll!7729010a()    
user32.dll!753972b9()   
user32.dll!753a2161()   
user32.dll!753a0f91()   
user32.dll!753a9deb()   
user32.dll!753a9dfd()   
user32.dll!753a8124()   
Axial.exe!CMDIChildWnd::DefWindowProcA(unsigned int nMsg=34, unsigned int wParam=0, long lParam=0)  Line 429    C++
Axial.exe!CWnd::WindowProc(unsigned int message=34, unsigned int wParam=0, long lParam=0)  Line 1756 + 0x1c bytes   C++
Axial.exe!AfxCallWndProc(CWnd * pWnd=0x1a826f08, HWND__ * hWnd=0x00210bbe, unsigned int nMsg=34, unsigned int wParam=0, long lParam=0)  Line 240 + 0x1c bytes   C++
Axial.exe!AfxWndProc(HWND__ * hWnd=0x00210bbe, unsigned int nMsg=34, unsigned int wParam=0, long lParam=0)  Line 403    C++
user32.dll!753962fa()   
user32.dll!75396d3a()   
user32.dll!75396ce9()   
user32.dll!75396de8()   
user32.dll!75396e44()   
ntdll.dll!7729010a()    
user32.dll!75398e63()   
user32.dll!753a7b51()   
Axial.exe!CFrameWnd::BringToTop(int nCmdShow=1)  Line 2362  C++
Axial.exe!CFrameWnd::ActivateFrame(int nCmdShow=1)  Line 2341   C++
Axial.exe!CMDIChildWnd::ActivateFrame(int nCmdShow=-1)  Line 762    C++
Axial.exe!CFrameWnd::InitialUpdateFrame(CDocument * pDoc=0x1a6a2de8, int bMakeVisible=1)  Line 814  C++
Axial.exe!CDocTemplate::InitialUpdateFrame(CFrameWnd * pFrame=0x1a826f08, CDocument * pDoc=0x1a6a2de8, int bMakeVisible=1)  Line 330    C++
Axial.exe!CMultiDocTemplate::OpenDocumentFile(const char * lpszPathName=0x0018f6fc, int bMakeVisible=1)  Line 166   C++
Axial.exe!CDocManager::OpenDocumentFile(const char * lpszFileName=0x19418fa0)  Line 986 C++
Axial.exe!CWinApp::OpenDocumentFile(const char * lpszFileName=0x19418fa0)  Line 84  C++
Axial.exe!CAxialApp::OpenDocumentFile(const char * lpszFileName=0x19418fa0)  Line 983 + 0xc bytes   C++
Axial.exe!CWinApp::OnOpenRecentFile(unsigned int nID=57616)  Line 132 + 0x2a bytes  C++
Axial.exe!_AfxDispatchCmdMsg(CCmdTarget * pTarget=0x018e6e88, unsigned int nID=57616, int nCode=0, void (void)* pfn=0x009f8140, void * pExtra=0x00000000, unsigned int nSig=60, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 101 + 0xa bytes C++
Axial.exe!CCmdTarget::OnCmdMsg(unsigned int nID=57616, int nCode=0, void * pExtra=0x00000000, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 381 + 0x27 bytes  C++
Axial.exe!CAxialApp::OnCmdMsg(unsigned int id=57616, int code=0, void * extra=0x00000000, AFX_CMDHANDLERINFO * handler=0x00000000)  Line 1135 + 0x40 bytes  C++
Axial.exe!CFrameWnd::OnCmdMsg(unsigned int nID=57616, int nCode=0, void * pExtra=0x00000000, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 951 + 0x23 bytes   C++
Axial.exe!SECMDIFrameWnd::OnCmdMsg(unsigned int nID=57616, int nCode=0, void * pExtra=0x00000000, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 2270  C++
Axial.exe!CWnd::OnCommand(unsigned int wParam=57616, long lParam=0)  Line 2364  C++
Axial.exe!CFrameWnd::OnCommand(unsigned int wParam=57616, long lParam=0)  Line 366  C++
Axial.exe!SECMDIFrameWnd::OnCommand(unsigned int wParam=57616, long lParam=0)  Line 2214 + 0x10 bytes   C++
Axial.exe!CWnd::OnWndMsg(unsigned int message=273, unsigned int wParam=57616, long lParam=0, long * pResult=0x0018fc68)  Line 1769 + 0x1e bytes C++
Axial.exe!CWnd::WindowProc(unsigned int message=273, unsigned int wParam=57616, long lParam=0)  Line 1755 + 0x20 bytes  C++
Axial.exe!SECMDIFrameWnd::WindowProc(unsigned int message=273, unsigned int wParam=57616, long lParam=0)  Line 2685 + 0x14 bytes    C++
Axial.exe!AfxCallWndProc(CWnd * pWnd=0x1a4acf78, HWND__ * hWnd=0x0005102a, unsigned int nMsg=273, unsigned int wParam=57616, long lParam=0)  Line 240 + 0x1c bytes  C++
Axial.exe!AfxWndProc(HWND__ * hWnd=0x0005102a, unsigned int nMsg=273, unsigned int wParam=57616, long lParam=0)  Line 403   C++
user32.dll!753962fa()   
user32.dll!75396d3a()   
user32.dll!75396ce9()   
user32.dll!753977c4()   
user32.dll!75397bca()   
Axial.exe!AfxInternalPumpMessage()  Line 183    C++
Axial.exe!CWinThread::PumpMessage()  Line 900   C++
Axial.exe!CWinThread::Run()  Line 629 + 0xd bytes   C++
Axial.exe!CWinApp::Run()  Line 896  C++
Axial.exe!AfxWinMain(HINSTANCE__ * hInstance=0x00400000, HINSTANCE__ * hPrevInstance=0x00000000, char * lpCmdLine=0x07e78ffd, int nCmdShow=1)  Line 47 + 0xd bytes  C++
Axial.exe!WinMain(HINSTANCE__ * hInstance=0x00400000, HINSTANCE__ * hPrevInstance=0x00000000, char * lpCmdLine=0x07e78ffd, int nCmdShow=1)  Line 34 C++
Axial.exe!__tmainCRTStartup()  Line 263 + 0x2c bytes    C
Axial.exe!WinMainCRTStartup()  Line 182 C
kernel32.dll!768033aa()     
ntdll.dll!772b9ef2()    
ntdll.dll!772b9ec5() 
```

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:01:36.647

看起来问题是`SECWorkbookClientWnd::OnMDISetMenu`。您可能正在调用一个函数，该函数试图向尚未创建/附加的 CWnd 发送消息。

# web-services - Grails RESTFUL Web 服务 API

> ID：13266157
> 
> 赞同：2
> 
> 时间：2012-11-07T08:53:37.843
> 
> 标签：web-services, api, rest, grails

我目前正在开发一个 web 应用程序，它应该对现有的 web 服务 api 进行安静的服务调用。

我拥有的是基本 URL 和 API 名称。

关于如何开始工作的任何帮助？我想我需要对我拥有的基本 url 使用 httpbuilder，然后是 /api 名称。但是，如果它工作，我如何在 grails 上测试它？

当我将基本 url 粘贴到浏览器上时，它确实返回了一些 xml 信息，所以我需要在 grails 上执行此操作。

当我通过浏览器粘贴 url 时的 XML 响应

```
<ns1:createNewUserResponse>
<userId>21</userId>
</ns1:createNewUserResponse> 
```

所以我需要能够通过我的网络应用程序（grails）获得这个响应，而不是把它粘贴到浏览器上。

编辑*这是一个很好的例子，我觉得很有用

```
@Grab(group='org.codehaus.groovy.modules.http-builder', module='http-builder', version='0.5.0-RC2' )
import groovyx.net.http.*
import static groovyx.net.http.ContentType.*
import static groovyx.net.http.Method.*

def http = new HTTPBuilder( 'http://ajax.googleapis.com' )

// perform a GET request, expecting JSON response data
http.request( GET, JSON ) {
  uri.path = '/ajax/services/search/web'
  uri.query = [ v:'1.0', q: 'Calvin and Hobbes' ]

  headers.'User-Agent' = 'Mozilla/5.0 Ubuntu/8.10 Firefox/3.0.4'

  // response handler for a success response code:
  response.success = { resp, json ->
    println resp.statusLine

    // parse the JSON response object:
    json.responseData.results.each {
      println "  ${it.titleNoFormatting} : ${it.visibleUrl}"
    }
  }

  // handler for any failure status code:
  response.failure = { resp ->
    println "Unexpected error: ${resp.statusLine.statusCode} : ${resp.statusLine.reasonPhrase}"
  }
} 
```

但我不理解查询部分，如何根据需要更改它？我拥有的 URL 包含用户名和密码的凭据，响应应返回一个 securityToken，我需要将其从结果中取出。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:55:06.327

您可以从[groovy-wslite](https://github.com/jwagenleitner/groovy-wslite)开始，它提供 SOAP 和 REST webservice 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:32:43.720

要调用 resfull 服务，请查看 Groovy HttpBuidler - [http://groovy.codehaus.org/HTTP+Builder](http://groovy.codehaus.org/HTTP+Builder)

# javascript - jQuery单击事件错误：“TypeError：无法在未定义的情况下调用方法'toString'

> ID：13266158
> 
> 赞同：0
> 
> 时间：2012-11-07T08:53:45.153
> 
> 标签：javascript, jquery

我的 jQuery 脚本出现错误：

```
$("input.buttonConfirmOrder").click(function (e) {
    e.preventDefault();
    //do some stuff with the order
    return false;
}); 
```

错误在警报框中弹出：

> TypeError：无法在未定义上调用方法“toString”

我`toString`在任何时候都没有使用，一旦我点击链接就会弹出错误，也就是在点击函数的第一行之前：

```
e.preventDefault(); 
```

调用事件的按钮如下所示：

```
<input type="submit" name="ctl00$mainContent$ButtonConfirmOrder" value="Pay" id="ctl00_mainContent_ButtonConfirmOrder" class="buttonConfirmOrder confirmButton"> 
```

我已经尝试了以下所有方法：

*   `$("input.buttonConfirmOrder").on("click", function(e) { /...`
*   `$ = jQuery;`
*   `jQuery.noConflict();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:55:45.620

您的选择器与按钮上的 CSS 类不匹配。它应该是：

```
$("input.buttonConfirmOrderDIBS").click(function (e) {
    e.preventDefault();
    //do some stuff with the order
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:00:22.577

我做了一个小提琴来检查它并且它有效：

[http://jsfiddle.net/picklespy/rZ4ZT/2/](http://jsfiddle.net/picklespy/rZ4ZT/2/)

HTML

```
<input type="submit" name="ctl00$mainContent$ButtonConfirmOrder" value="Pay"
        id="ctl00_mainContent_ButtonConfirmOrder"
         class="buttonConfirmOrder confirmButton"> 
```

Javascript：

```
$("input.buttonConfirmOrder").click(function (e) {
    e.preventDefault();
    alert($(this).val())
    //do some stuff with the order
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:01:53.593

如果您的唯一目的是阻止默认提交操作。`onsubmit=return false;`然后在提交按钮的容器表单中添加一个属性。没必要做`e.preventDefault()`

# python - 如何通过 Python 脚本在 Microsoft Exchange Server Powershell 中运行命令？

> ID：13266159
> 
> 赞同：0
> 
> 时间：2012-11-07T08:53:51.493
> 
> 标签：python, powershell, exchange-server

我想检查 Microsoft Exchange Server 中的邮箱数量。此命令在标准 cmd.exe 中运行良好：

```
"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe" -command ". 'C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1'; Connect-ExchangeServer -auto ; Get-Mailbox | Measure-Object" 
```

输出是

```
...
Count    : 3
Average  :
Sum      :
Maximum  :
Minimum  :
Property : 
```

然后我将使用“-ExecutionPolicy RemoteSigned”在 Python 中对其进行编码：

```
cmd = "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe
 -ExecutionPolicy RemoteSigned
 -command \". 'C:\\Program Files\\Microsoft\\Exchange Server\\V14\\bin\\RemoteExchange.ps1'; Connect-ExchangeServer -auto; Get-Mailbox | Measure-Object\""
os.system(cmd) 
```

加载 RemoteExchange.ps1 文件有很多错误。

```
Get-ItemProperty : Cannot find path 'HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup' because it does not exist.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:46 char:34
+ $global:exbin = (get-itemproperty <<<<  HKLM:\SOFTWARE\Microsoft\ExchangeServer\v14\Setup).MsiInstallPath + "bin\"
    + CategoryInfo          : ObjectNotFound: (HKLM:\SOFTWARE\...erver\v14\Setup:String) [Get-ItemProperty], ItemNotFo
   undException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand

...

The Exchange types file wasn't loaded because not all of the required files could be found.
Update-TypeData : Cannot find path 'C:\Users\administrator.SCCM01\bin\Exchange.partial.Types.ps1xml' because it does no
t exist.
At C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1:104 char:16
+ Update-TypeData <<<<  -PrependPath $partialTypeFile
    + CategoryInfo          : InvalidOperation: (bin\Exchange.partial.Types.ps1xml:String) [Update-TypeData], ItemNotF
   oundException
    + FullyQualifiedErrorId : TypesPrependPathException,Microsoft.PowerShell.Commands.UpdateTypeDataCommand 
```

尽管出现了 Exchange 命令行管理程序的欢迎屏幕，但它无法加载 RemoteExchange.ps1，并且“Get-Mailbox”命令根本不起作用。

我想我一定错过了一些重要的事情。我怎么解决这个问题？请帮忙。

**编辑**：为什么要添加`-ExecutionPolicy RemoteSigned`Python 脚本？如果我不这样做，将导致不同的错误：

```
File C:\Program Files\Microsoft\Exchange Server\V14\bin\RemoteExchange.ps1 cannot be loaded because the execution of scripts is disabled on this system. Please see "get-help about_signing" for more details. 
```

参考这个[线程](https://stackoverflow.com/questions/6901856/invoking-a-powershell-script-from-python)，`RemoteSigned`比`Unrestricted`。它们都可以在 cmd.exe 中工作，但不能在 Python 脚本中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:43:45.300

我在略有不同的情况下遇到了完全相同的问题，但错误消息是相同的。我试图通过[Puppet 和 Powershell 脚本](http://docs.puppetlabs.com/windows/running.html#file-system-redirection-in-64-bit-windows-versions)配置 MS Exchange 。您正遭受静默运行的[文件系统重定向器 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)的副作用。显然，32 位程序无法访问 64 位注册表项，并且文件系统重定向器会在您不知情的情况下更改您的内容。

我发现这对于我的情况来说是一个[优雅的解决方案](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)：

> 32 位应用程序可以通过将 %windir%\Sysnative 替换为 %windir%\System32 来访问本机系统目录。WOW64 将 Sysnative 识别为用于指示文件系统不应重定向访问的特殊别名。这种机制灵活且易于使用，因此，建议使用绕过文件系统重定向的机制。请注意，64 位应用程序不能使用 Sysnative 别名，因为它是虚拟目录而不是真实目录。

# php - 如何使用 DOMDocument 用字符串替换节点

> ID：13266164
> 
> 赞同：4
> 
> 时间：2012-11-07T08:54:09.537
> 
> 标签：php, replace, domdocument

> **可能重复：**
> [PHP - 如何用另一个短语替换一个短语？](https://stackoverflow.com/questions/3388836/php-how-to-replace-a-phrase-with-another)

我需要转换这段html

```
<html>
   <body>
      Lorum ipsum <a href="http://google.com">click here</a> dolores lorem.
      Lorum ipsum <a href="http://stackoverflow.com">click here too</a> dolores lorem.
   </body>
</html> 
```

到：

```
<html>
    <body>
       Lorum ipsum @@1@@ dolores lorem.
       Lorum ipsum @@2@@ dolores lorem.
    </body>
</html> 
```

如何使用 Domdocument 实现这一点（我对 een regex 解决方案不感兴趣）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T09:32:53.863

到目前为止，您还没有显示任何代码，因此不清楚您运行的是哪个问题。我只能假设这是因为如果您迭代更改它的链接列表，迭代将变得无效。所以只有第一个元素被替换。

在这里使用`for`循环可以帮助每次迭代只获取第一个元素。它还允许为您在替换中需要的数字初始化和增加计数变量。

更换本身可以很容易地完成[`replaceChild`](http://php.net/domnode.replacechild)。循环示例：

```
for($c = 1; $a = $doc->getElementsByTagName('a')->item(0); $c++) {
    $a->parentNode->replaceChild(
        $doc->createTextNode(sprintf("@@%d@@", $c)),
        $a
    );
} 
```

如果不存在这样的元素（不再存在），则调用`$doc->getElementsByTagName('a')->item(0)`将返回。`NULL`这就是循环的退出条件。

完整示例：

```
$html = '<html><body>
  Lorum ipsum <a href="http://google.com">click here</a> dolores lorem.
  Lorum ipsum <a href="http://stackoverflow.com">click here too</a> dolores lorem.
</body></html>';

$doc = new DOMDocument();
$doc->loadHtml($html);

for($c = 1; $a = $doc->getElementsByTagName('a')->item(0); $c++) {
    $a->parentNode->replaceChild(
        $doc->createTextNode(sprintf("@@%d@@", $c)),
        $a
    );
}

echo $doc->saveHTML(); 
```

输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
  Lorum ipsum @@1@@ dolores lorem.
  Lorum ipsum @@2@@ dolores lorem.
</body></html> 
```

我希望这是有帮助的。

# awk - 从许多文件中计算第二列相同行的平均值

> ID：13266168
> 
> 赞同：-2
> 
> 时间：2012-11-07T08:54:31.517
> 
> 标签：awk

我需要帮助来使用 awk 对多个文件进行一些操作。我总共有 500 个文件，每个文件包含 800 行数据，有两列（第一列和第二列）。

我希望添加每个文件（来自所有 500 个文件）的第一行第二列，并计算平均值并存储在一个新的输出文件中（比如说 average.out）。

然后它继续到所有文件（所有 500 个文件）的第二行第二列并计算平均值并存储在 average.out 中。它一直持续到“average.out”文件包含 800 行。

在继续对我的数据进行其他计算之前，我非常需要解决这个计算。希望我能有所了解。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:05:42.820

这将显示所有行号及其平均值。

```
awk '{a[FNR]=a[FNR]+$2;b[FNR]++;}END{for(i in a){print i,a[i]/b[i]}}' *your_file* 
```

例如：

line_number its_average。

测试如下：

```
> cat temp
1 10 
2 28
3 20
4 79
> cat temp2
1 12 
2 30
3 22
4 81
> awk '{a[FNR]=a[FNR]+$2;b[FNR]++;}END{for(i in a){print i,a[i]/b[i]}}' temp temp2
2 29
3 21
4 80
1 11 
```

# shell - 使用 bash 脚本从服务器获取 java_home 值

> ID：13266169
> 
> 赞同：0
> 
> 时间：2012-11-07T08:54:31.683
> 
> 标签：shell, ssh, environment-variables, echo, java-home

我很困惑。我想在服务器中找到 JAVA_HOME 值并在 bash 脚本中键入此代码。

```
ssh username@server "echo ${JAVA_HOME}" 
```

并尝试

```
ssh username@server "echo $JAVA_HOME" 
```

或者

```
 ssh username@server 'echo $JAVA_HOME' 
```

他们都没有工作；

我用“PATH”替换“JAVA_HOME”，它可以工作；我用 ssh 连接到服务器并尝试“echo $JAVA_HOME”，它的工作。我认为问题是“_”，我不知道如何解决它。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T06:42:30.487

你的方法不可行。

$JAVA_HOME 将被解释为 localhost 而不是远程服务器中的变量值。

另外，通过ssh执行不是登录shell，不会得到/etc/profile中定义的环境变量

# objective-c - UICollectionView：如何定义一个支持水平和垂直滚动的UICollectionViewLayout？

> ID：13266170
> 
> 赞同：19
> 
> 时间：2012-11-07T08:54:31.840
> 
> 标签：objective-c, ios6, uicollectionview, uicollectionviewdelegate

目前我正在尝试创建一个`UICollectionView`, 应该显示一个简单`excel-like-spreadsheet`的 ,`rows`和`columns`。`UICollectionViews`我相信这应该是一件容易的事。我真的很想在 中进行实施`UICollectionView`，而不是在任何地方`grid framework`。

但目前我有点悬。我发现，不幸的是我不能使用 a ，`UICollectionViewDelegateFlowLayout`因为这只支持**一个**或一个方向。但我需要两个方向。`scrolling` **`horizontally``vertically``scrolling`**

 **因此**我必须使用 a`UICollectionViewLayout`**，但为此我没有找到好的例子，如何使用它。你们有没有人举个例子，如何子类化一个`UICollectionViewLayout`来支持`rows`和`columns`？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:36:23.843

`UICollectionViewFlowLayout`绝对不能 - “网格布局仅沿一个轴滚动，水平或垂直。”

它是 的子类`UICollectionViewLayout`。似乎您可以创建自己的子类`UICollectionViewLayout`并在两个方向上滚动。

你所说的页面是什么意思，你想做分页`scrollview`吗？我想知道在 a 中使用 UICollectionViewFlowLayout`UICollectionView`进行垂直滚动，在 a`UIScrollView`中进行水平滚动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T13:25:53.837

我在这里添加了一个使用自定义布局来实现简单的水平和垂直滚动网格的示例[https://github.com/neildavis/MyCollectionView](https://github.com/neildavis/MyCollectionView)

我的示例使用 PSTCollectionView，因为我需要 iOS 5 支持，但它的 API 与内置的 UICollectionView 兼容。（实际上它使用提供的兼容性类（PSUICollectionView 等）来确保它在 iOS 6 上使用 UICollectionView 并在 iOS 5 上回退到使用 PSTCollectionView 等。）只需删除这些上的“PS”前缀即可恢复为仅 iOS 6 的 UIKit 实现.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-02T15:21:29.113

我需要类似的东西。我创建了一个自定义 CollectionViewLayout。

[https://github.com/akashraje/BidirectionalCollectionViewLayout](https://github.com/akashraje/BidirectionalCollectionViewLayout)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-08T21:14:49.883

**不需要剖析 3 个示例项目的答案**

在您的 UICollectionViewLayout 子类中：

1.  实现`-(CGSize)[collectionViewContentSize]`并返回一个在高度和宽度上大于`UICollectionView`' 尺寸的尺寸。（可通过：`self.collectionView.frame.size`）
2.  `UICollectionViewCell`在内容大小而不是框架大小内计算您的 s 的布局。

注意：确保在 UICollectionView 中启用滚动。（默认开启。）**

# javascript - 从 chrome 扩展访问 iframe

> ID：13266192
> 
> 赞同：16
> 
> 时间：2012-11-07T08:55:35.773
> 
> 标签：javascript, iframe, google-chrome-extension

我正在开发一个 chrome 扩展并遇到了一个大问题。

我正在使用内容脚本在网站上注入我的 javascript 代码。该网站有一个 iframe。我可以更改 iframe 的源代码，但似乎无法访问 iframe 的 contentWindow 属性。我需要它在当前的 carret 位置插入文本。

所以基本上这段代码在页面的上下文中完美地工作：

```
$("#iframe1").contentWindow.document.execCommand("InsertHTML", false, 'test text'); 
```

但是当我尝试在我的 chrome 扩展的上下文中运行它时，我得到了这个错误：

```
TypeError: Cannot read property 'document' of undefined 
```

奇怪的是我可以访问iframe的html。因此，这段代码可以在 chrome 扩展中完美运行：

```
$("#iframe1").contents().find('div').html('test') 
```

我尝试将 "all_frames": true 放在清单文件中，但没有运气:(

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-07T14:24:46.467

为了理解您的代码为什么不起作用，我附上[了我之前回答的片段](https://stackoverflow.com/questions/11812786/window-open-returns-undefined-in-chrome-extension/11815581#11815581)：

> 内容脚本无权访问页面的全局`window`对象。对于内容脚本，以下适用：
> 
> *   该**`window`**变量不引用页面的全局对象。相反，它指的是一个新的上下文，一个页面上的“层”。页面的 DOM 是完全可访问的。^([#执行环境](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment))
> 
> 给定一个包含以下内容的文档   `<iframe id="frameName" src="http://domain/"></iframe>`：
> 
> *   对框架内容的访问受到页面[同源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)的限制；您的扩展程序的权限不会放松政策。
> *   `frames[0]`和`frames['frameName']`,（通常指帧的包含全局`window`对象）是**`undefined`**.
> *   `var iframe = document.getElementById('frameName');`
>     *   **`iframe.contentDocument`**返回**`document`**包含框架的对象，因为内容脚本可以访问页面的 DOM。此属性**`null`**适用于同源策略。
>     *   **`iframe.contentDocument.defaultView`**（指`window`与文档关联的对象）**未定义**。
>     *   **`iframe.contentWindow`** 是**未定义**的。

### 同源帧的解决方案

在您的情况下，以下任一方法都可以：

```
// jQuery:
$("#iframe1").contents()[0].execCommand( ... );

// VanillaJS
document.getElementById("iframe1").contentDocument.execCommand( ... );

// "Unlock" contentWindow property by injecting code in context of page
var s = document.createElement('script');
s.textContent = 'document.getElementById("iframe1").contentWindow.document.execCommand( ... );';
document.head.appendChild(s); 
```

## 通用解决方案

通用解决方案`"all_frames": true`在清单文件中使用，并使用如下内容：

```
if (window != top) {
    parent.postMessage({fromExtension:true}, '*');
    addEventListener('message', function(event) {
        if (event.data && event.data.inserHTML) {
            document.execCommand('insertHTML', false, event.data.insertHTML);
        }
    });
} else {
    var test_html = 'test string';
    // Explanation of injection at https://stackoverflow.com/a/9517879/938089 :
    // Run code in the context of the page, so that the `contentWindow`
    //  property becomes accessible
    var script = document.createElement('script');
    script.textContent = '(' + function(s_html) {
        addEventListener('message', function(event) {
            if (event.data.fromExtension === true) {
                var iframe = document.getElementById('iframe1');
                if (iframe && (iframe.contentWindow === event.source)) {
                    // Window recognised, post message back
                    iframe.contentWindow.postMessage({insertHTML: s_html}, '*');
                }
            }
        });
    } + ')(' + JSON.stringify(test_html) + ');';
    (document.head||document.documentElement).appendChild(script);
    script.parentNode.removeChild(script);
} 
```

此演示仅用于教育目的，**请勿在实际扩展中使用此演示**。为什么？因为它[`postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)用来传递消息。这些事件也可以由客户端生成，从而导致安全漏洞（XSS：任意 HTML 注入）。

替代方案`postMessage`是 Chrome 的消息 API。有关演示，请参阅[此答案](https://stackoverflow.com/questions/11325415/access-iframe-content-from-a-chromes-extension-content-script/11326942#11326942)。但是，您将无法比较这些`window`对象。你*能做*的就是依靠`window.name`财产。该`window.name`属性会自动设置为 iframe`name`属性的值（仅在加载 iframe 时设置一次）。

# facebook-android-sdk - Facebook SDK for Android 请求错误

> ID：13266198
> 
> 赞同：2
> 
> 时间：2012-11-07T08:55:44.510
> 
> 标签：facebook-android-sdk

我使用适用于 Android 3.0 的 Facebook SDK 我想获取用户的照片并在我的应用程序中显示。参考文档，登录成功。我试着拿到这张专辑。

我尝试了两种方法**fql**和**graph api**。

```
 graph_or_fql = "fql";
    if (graph_or_fql.equals("fql")) {
        String query = "SELECT aid, cover_pid, name, size, visible, object_id FROM album WHERE owner = "
                + userId;
        Bundle params = new Bundle();
        params.putString("method", "fql.query");
        params.putString("query", query);

        mAsyncRunner.request(null, params,
                new PhotosRequestListener());
    } else {
//      Bundle params = new Bundle();
//      params.putString("fields", "name, aid, size");
//      mAsyncRunner.request("me/photos", params,
//              new PhotosRequestListener());
        mAsyncRunner.request("me/album",
                new PhotosRequestListener());
    }

    /*
     * callback after friends are fetched via me/friends or fql query.
     */
    public class PhotosRequestListener extends BaseRequestListener {

        @Override
        public void onComplete(final String response, final Object state) {
            dialog.dismiss();
            Log.d("tag", "response: " + response);
            try {
                if (graph_or_fql.equals("fql")) {
                    jsonArray = new JSONObject(response).getJSONArray("data");
                    // jsonArray = new JSONArray(response);
                    // JSONObject jsonObj = new JSONObject(response);
                    // jsonArray = new JSONArray(jsonObj.getString("data"));
                } else {
                    jsonArray = new JSONObject(response).getJSONArray("data");
                }
            } catch (JSONException e) {
                showToast("JSONError: " + e.getMessage());
                e.printStackTrace();
                return;
            }
            gridView.setOnItemClickListener(MainActivity.this);
            gridView.setAdapter(new GridViewAdapter(MainActivity.this));
        }

        public void onFacebookError(FacebookError error) {
            dialog.dismiss();
            Toast.makeText(getApplicationContext(),
                    "Facebook Error: " + error.getMessage(), Toast.LENGTH_SHORT)
                    .show();
        }
    } 
```

但全是错误。

> fql 错误消息：“error_msg”：“会话密钥无效或不再有效”

```
11-07 16:41:10.956: D/tag(468): response: {"error_code":102,"error_msg":"Session key invalid or no longer valid","request_args":[{"key":"query","value":"SELECT aid, cover_pid, name, size, visible, object_id FROM album WHERE owner = 100001791736733"},{"key":"method","value":"fql.query"},{"key":"format","value":"json"}]}
11-07 16:41:10.956: W/System.err(468): org.json.JSONException: No value for data
11-07 16:41:10.966: W/System.err(468):  at org.json.JSONObject.get(JSONObject.java:354)
11-07 16:41:11.015: W/System.err(468):  at org.json.JSONObject.getJSONArray(JSONObject.java:544)
11-07 16:41:11.015: W/System.err(468):  at com.example.facebookphoto.MainActivity$PhotosRequestListener.onComplete(MainActivity.java:144)
11-07 16:41:11.015: W/System.err(468):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:273) 
```

> graph api 错误消息：“error”:{“message”:“必须使用活动访问令牌来查询当前用户的信息。”“type”:“OAuthException”“code”:2500}

```
11-07 16:45:43.106: D/tag(538): response: {"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}}
11-07 16:45:43.106: W/System.err(538): org.json.JSONException: No value for data
11-07 16:45:43.156: W/System.err(538):  at org.json.JSONObject.get(JSONObject.java:354)
11-07 16:45:43.156: W/System.err(538):  at org.json.JSONObject.getJSONArray(JSONObject.java:544)
11-07 16:45:43.176: W/System.err(538):  at com.example.facebookphoto.MainActivity$PhotosRequestListener.onComplete(MainActivity.java:149)
11-07 16:45:43.176: W/System.err(538):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:273) 
```

我不明白，因为什么原因。帮帮我，谢谢。

# java - 如何处理 classCastException

> ID：13266202
> 
> 赞同：0
> 
> 时间：2012-11-07T08:56:00.640
> 
> 标签：java, exception

我们不能将字符串对象转换为字节对象吗？

```
public bitmap a(String s){
   byte[] b=(byte[])getValue(s);
   ...
} 
```

`getValue`返回一个字符串对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:57:44.963

使用`String.getBytes()`及其重载版本将 a 转换`String`为`byte[]`.

有一些重载版本允许您指定 UTF-8 之类的字符集，例如：

```
getBytes(String charsetName); 
```

# java - 在 Eclipse RCP 中使用 jfreechart 创建的条形图上不显示文本字段

> ID：13266209
> 
> 赞同：3
> 
> 时间：2012-11-07T08:56:28.510
> 
> 标签：java, eclipse, plugins, jfreechart, rcp

当我在 Eclipse RCP 插件中的视图上使用 Jfreechart 显示条形图时，条形图标题、域轴名称、范围轴名称在条形图上不可见。

在视图上显示条形图的代码

```
 final CategoryDataset dataset = createDataset();
            final JFreeChart chart = createChart(dataset);

            final ChartComposite frame = new    ChartComposite(barchartComposite,SWT.NONE,chart,true);
            frame.setLayoutData(new GridData(GridData.FILL_BOTH));
            frame.pack();
            frame.setVisible(true);
            frame.setChart(chart);
            frame.forceRedraw();
            barchartComposite.getLayout();

 private CategoryDataset createDataset() {

    // row keys...
    final String series1 = "First";

    // column keys...
    final String category1 = "error";
    final String category2 = "info";
    final String category3 = "warning";
    final String category4 = "critical";

    // create the dataset...
    final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    dataset.addValue(10, series1, category1);
    dataset.addValue(5, series1, category2);
    dataset.addValue(6, series1, category3);
    dataset.addValue(9, series1, category4);

    return dataset;

}

  private JFreeChart createChart(final CategoryDataset dataset) {

    // create the chart...
    final JFreeChart chart = ChartFactory.createBarChart(
        "Priority BarChart",         // chart title
        "priority",               // domain axis label
        "Value",                  // range axis label
        dataset,                  // data
        PlotOrientation.VERTICAL, // orientation
        true,                     // include legend
        true,                     // tooltips?
        false                     // URLs?
    );

    // NOW DO SOME OPTIONAL CUSTOMISATION OF THE CHART...

    // set the background color for the chart...
    chart.setBackgroundPaint(Color.white);

    // get a reference to the plot for further customisation...
    final CategoryPlot plot = chart.getCategoryPlot();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);

    // set the range axis to display integers only...
    final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
    rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

    // disable bar outlines...
    final BarRenderer renderer = (BarRenderer) plot.getRenderer();
    renderer.setDrawBarOutline(false);

    // set up gradient paints for series...
    final GradientPaint gp0 = new GradientPaint(
        0.0f, 0.0f, Color.blue, 
        0.0f, 0.0f, Color.lightGray
    );

    renderer.setSeriesPaint(0, gp0);

    final CategoryAxis domainAxis = plot.getDomainAxis();
    domainAxis.setCategoryLabelPositions(
        CategoryLabelPositions.createUpRotationLabelPositions(Math.PI / 6.0)
    );
    // OPTIONAL CUSTOMISATION COMPLETED.

    return chart;

} 
```

上面的代码在 Eclipse RCP 插件中的视图上创建了一个条形图。createdataset() 方法为图表生成数据 createChart() 方法生成图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:29:15.743

我用 重现了错误`jfreechart-1.0.14`。这似乎是`ChartComposite`1.0.14 版本中的一个错误。

**解决方案**：

您可以使用[jfreechart-1.0.13](http://sourceforge.net/projects/jfreechart/files/1.%20JFreeChart/1.0.13/)的库。我已经使用您问题中的代码对其进行了测试，并且可以正常工作。

[jfreechart bug tracker](http://sourceforge.net/tracker/?func=detail&aid=3482106&group_id=15494&atid=115494)中也有一个条目。

引用：

> 补丁 3506228 中对此进行了修复。该修复将包含在即将发布的 1.0.15 版本中。

# visual-studio-2010 - 无法发布到 Azure 网站

> ID：13266210
> 
> 赞同：0
> 
> 时间：2012-11-07T08:56:33.817
> 
> 标签：visual-studio-2010, publish, azure-web-app-service

几周前，我成功地将几个项目发布到 Azure 网站。然后我使用云服务，它也工作得很好。但是昨天，当我试图将一个新的 Silverlight 项目发布到一个新的 Azure 网站时，我无法让它工作。

我从 Azure 仪表板下载了发布配置文件，然后将此配置文件导入到我的 VS 项目中。

之后，如果我选择“Web Deploy”作为发布方法，所有字段（服务 URL、用户名等）都会填写，但是当我点击“验证连接”时，会收到以下错误消息：

> 项目中不存在目标“MSDeployTestCONnection”

如果我选择“FTP”作为发布方法，我必须填写这些字段，然后验证连接。但是如果我尝试发布，我会收到以下错误：

> 项目中不存在目标“GatherAllFilesToPublish”。

而且我只是不记得自从上次这个工作以来我可以在我的电脑上做的任何改变......

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:24:40.697

你有 Visual Studio (Express) 的免费版本吗？

尝试删除以下 Web 发布文件： [http ://social.msdn.microsoft.com/Forums/da-DK/windowsazuredevelopment/thread/116d3562-99fb-45b0-acf9-b35bc393682e](http://social.msdn.microsoft.com/Forums/da-DK/windowsazuredevelopment/thread/116d3562-99fb-45b0-acf9-b35bc393682e)

# ajax - 在 CakePHP 2.2.1 中使用 jshelper 上传文件

> ID：13266211
> 
> 赞同：2
> 
> 时间：2012-11-07T08:56:38.690
> 
> 标签：ajax, cakephp, file-upload

我正在尝试使用 jshelper 上传文件。

在我看来：

```
<?php echo $this->Form->create('Form', array(
    'inputDefaults' => array(
    'format' => array('before', 'error', 'label', 'between', 'input', 'after'),),
    'enctype' => 'multipart/form-data'
)); 
echo $this->Form->input('Form.file', array('type' => 'file', 'id'=>'file'));
$this->Js->get('#file')->event(
    'update',
    $this->Js->request(
        array('controller' => 'ControllerForm','action' => 'actionForm'),
        array(
        'async' => true, 
        'method' => 'post', 
        'dataExpression'=>true,
        'data'=> $this->Js->serializeForm(array(
            'isForm' => false,
            'inline' => true,
            ))
        )
));
echo $this->Js->writeBuffer();
echo $this->Form->end(); 
?> 
```

在我的控制器中：

```
public function actionForm(){
    debugger::dump($this->data);
} 
```

但`debugger::dump`输出空数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T14:21:18.810

据我所知，您无法使用 ajax 发送文件（在 Chrome 中包括 xhrRequestObject2）。首先在服务器端检查发布数据即时调试（$_FILES），但正如我所写的那样是空的。使用旧好的 iframe 将数据发送到服务器。

# c++ - 为什么要自动 v {create()}; 不编译？

> ID：13266221
> 
> 赞同：1
> 
> 时间：2012-11-07T08:57:24.080
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move

我正在对移动语义进行一些测试，我尝试了这个：

```
class A{
public:
    A(){printf("A CTOR\n");}
    A(A&) {printf("A CTOR by copy\n");}
    A(A&&){printf("A CTOR by universal reverence\n");}
};

A&& create(){
    A v;
    return std::move(v);
}

auto x{ create() };//this does not compile

float d[]{1.2,1.3,5,6};//this does compile 
```

我收到以下错误：

```
error C3086: cannot find 'std::initializer_list': you need to #include <initializer_list> 
```

我不明白，因为初始化列表功能已通过 CTP2012 nov. 添加到 VC11 中。这是因为我们必须等待 stdlib 的更新吗？

我认为代码是正确的，因为我从 Scott meyers 的幻灯片中复制了它：[Move Semantics, Rvalue References, Perfect Forwarding](http://www.aristeia.com/TalkNotes/ACCU2011_MoveSemantics.pdf)。

**感谢您的帮助。** 供您参考，出现虚假副本**是因为我没有在我的 CTOR 中逐个添加“const”。** 最好的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T09:37:02.350

大括号`auto`总是以[`std::initializer_list<T>`](http://en.cppreference.com/w/cpp/utility/initializer_list)类型结束。所以基本上这里发生的事情你尝试在`std::initializer_list<A>`这里创建一个`x`而不是`A`你在这里的意图。但是，您的代码应该可以正常编译，这可能是 VS 最新 CTP 编译器中的一个错误。

要成为`x`你`A`有两个选择：

1.  不要`auto`在这里使用：

    ```
    A x{ create() }; 
    ```

2.  不要在这里使用统一初始化：

    ```
    auto x(create()); 
    ```

除此之外，我在您的代码中看到了另外两个问题。首先正确复制构造函数的签名应该如下所示：

```
A(const A &) {printf("A CTOR by copy\n");} 
```

此外，不鼓励从函数返回 RValue 引用。相反，您应该像这样按值返回：

```
A create(){
  A v;
  return v;   // std::move not needed here because C++11 compiler will put it for you here
} 
```

要不就：

```
A create(){
  return A();
} 
```

**编辑：**

哦，政治正确`A(A&&)` **并不是**“普遍参考的 CTOR”。它是“A CTOR by move”或“A CTOR by rvalue reference”，具体取决于您要操作的抽象级别。通用引用总是关于模板和特定类型的类型推导。

另请阅读我在另一条评论中附加的 Scott Meyers 的一篇文章[http://scottmeyers.blogspot.com/2012/10/copying-constructors-in-c11.html](http://scottmeyers.blogspot.com/2012/10/copying-constructors-in-c11.html)您在笔记中提到的同一位 C++ 大师准确地解释了你面临的问题。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:34:25.733

线

```
auto x{ create() };//this does not compile 
```

创建一个`initializer_list`而不是 的实例`A`，例如参见[std::initializer_list](http://www.cplusplus.com/reference/std/initializer_list/initializer_list/)。

如果你写

```
A x{ create() }; 
```

代码编译并且类型`x`将是`A`.

* * *

我不会返回`A&&`，`create()`请参阅[移动语义和编译器优化](http://thbecker.net/articles/rvalue_references/section_06.html)。我也没有在 Scott 的幻灯片中看到这一点。

* * *

以下代码仅打印`A CTOR`，请参见[此处](http://ideone.com/sqeOhA)。**这是你能得到的最好的**：必须创建对象。除此之外，没有不必要的复制构造函数或赋值运算符调用。

```
#include <cstdio>
#include <utility>
using namespace std;

class A{
public:
    A(){         printf("A CTOR\n");}
    A(const A&) {printf("A CTOR by copy\n");}
    A(A&&){      printf("A CTOR by universal reverence\n");}
    A& operator=(const A& ) = delete;
};

A create(){
    return A();
}

int main() {
    A x{ create() };
    return 0;
} 
```

* * *

std::move 不是摆脱不必要副本的唯一方法。编译器可以为你做，例如看[什么是复制省略和返回值优化？](https://stackoverflow.com/q/12953127/341970)或[复制省略](http://en.wikipedia.org/wiki/Copy_elision)。

# architecture - 主程序与子模块之间的通信

> ID：13266222
> 
> 赞同：0
> 
> 时间：2012-11-07T08:57:26.690
> 
> 标签：architecture, mef

我打算使用 MEF 框架以便可扩展。我的程序 3 个子模块/dll 如下所示

Messenger 模块 - 通过网络发送/接收消息，包括一个线程。一个外壳扩展模块。一个数据库模块。

主模块决定如何以及何时将任务委派给子模块。现在我正计划使用事件和回调从子模块与主模块通信。

我需要知道在主模块和子模块之间进行通信的最佳、资源有效的方式是什么。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:04:38.470

您可以使用 Microsoft Prism 库中的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)服务。我不能保证它是最节省资源的方法，但该服务是专门为帮助您在模块化应用程序中进行通信而创建的。[这是一个很好的例子](http://www.codeproject.com/Articles/355473/Prism-EventAggregator-Sample)，你可以看看。

# c++ - 给指针赋值会抛出异常

> ID：13266225
> 
> 赞同：0
> 
> 时间：2012-11-07T08:57:41.810
> 
> 标签：c++, c

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我是 C/C++ 的新手，我正在尝试学习它，我创建了以下函数，但是当我尝试将大写值分配给 *string 时，它会引发异常：CPP1.exe 中 0x00411820 处的未处理异常: 0xC0000005: 访问冲突写入位置 0x00417754。

```
void ToUpper(char* string)
{
    while(*string != '\0')
    {
        if(*string >= 97 && *string <= 122)
        {
            int symbol = *string;
            *string = symbol - 32;
        }
        string++;
    }
} 
```

用法：

```
char* x = "text"; 
ToUpper(x); 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:02:10.667

改变

```
char* x = "text"; 
```

到

```
char x[] = "text"; 
```

完毕

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:00:19.243

切勿*尝试*更改 const 字符串。始终使用字符数组进行此类操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:07:19.990

“文本”的内存将在`.readonly`部分中分配。

```
char* x = "text"; 
```

试图更改只读部分是未定义的行为。

用于`gcc -S filename.c`查看汇编代码。这使您对“文本”的下落有更多了解。

像其他人建议的那样，我建议`char x[] = "text"`改用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T09:08:29.007

```
main()
{
    char *a = "text";
    char *x = malloc(strlen(a)+1); 
    strcpy(x,a);
    ToUpper(x);
    // ToUpper(a); // Fails
    printf("%s %s\n",a,x);
} 
```

输出：`text TEXT`

ToUpper(a) 失败，因为字符串在受保护的内存区域中被替换（很可能在代码中间，因为至少 64 位 x86 处理器具有 [rip] -相对寻址模式，这使得放置代码行之间的数据...

也`char x[]="text";`有效，因为现在 x 的完整数组已放入堆栈中。如果`char *x = "text";`只有指针放在堆栈上，但内容指向受限（只读）内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T09:22:17.593

尝试通过指针修改字符串文字是错误的：

```
void f()
{
   char * p = "Naee";
   p[2] = 'm'; // error: assignment to const; result is undefined
} 
```

使字符串文字保持不变可以显着优化存储分配和访问。如果您想要一个可以修改的字符串，您必须将字符复制到一个数组中：

```
void f()
{
   char p [] = "Eero"; 
   p [0] = 'Z'; // ok
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T09:05:01.230

您可以这样使用，无需创建`symbol`变量

```
*string=*string-32; 
```

但传递`array`给调用环境中的函数而不是传递`string literal`

所以

```
char * str[] ="hello";
ToUpper(str); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-07T09:01:09.233

您必须在赋值语句中键入强制转换值。

*string = *(char *)symbol - 32;

# spring - 类似 HQL 的运算符，用于不区分大小写的搜索

> ID：13266229
> 
> 赞同：27
> 
> 时间：2012-11-07T08:57:49.657
> 
> 标签：spring, hibernate, spring-mvc, sql-like

我正在使用 Jquery 实现自动完成功能，当我输入名称时，它会从数据库中获取记录，存储在数据库中的记录是大写和小写字母的混合。我已经编写了一个 HQL 查询，它以区分大小写的方式获取我的记录，但我需要不考虑大小写来记录。这是查询，

```
List<OrganizationTB> resultList = null;
Query query = session.createQuery("from DataOrganization dataOrg where dataOrg.poolName   
like '%"+ poolName +"%'");
resultList =  query.list(); 
```

例如：如果我有池名称、HRMS 数据集、Hrms 数据、Hr 数据等...如果我输入 HR 或 hr，我需要获取所有 3 条记录，但我无法做到。

请帮忙...

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-07T09:09:05.177

将您的查询更改为

```
"from DataOrganization dataOrg where lower(dataOrg.poolName)   
like lower('%"+ poolName +"%')" 
```

有关更多信息，请查看 14.3[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-17T13:44:15.993

一个好的解决方案是：

```
List<OrganizationTB> resultList = null;
Query query = session.createQuery("from DataOrganization dataOrg where lower(dataOrg.poolName) like lower(:poolName)");
query.setParameter("poolName", '%'+poolName+'%', StringType.INSTANCE);
resultList =  query.list(); 
```

所以你保护你的代码免受 SQL 注入

# asp.net - Windows ASP.NET 重定向

> ID：13266236
> 
> 赞同：1
> 
> 时间：2012-11-07T08:58:19.460
> 
> 标签：asp.net, redirect

我们有一些网站都通过一个 CMS 进行控制，即使它们有自己的域名。它们都托管在一个帐户下。

我想通过 web.config 在其中一个域上将默认页面设置为 index.html

例如，对于 abc.com，我希望它默认为 abc.com/index.html，但其他域保持原样。

虽然我可以将默认值设置为 index.html，但它似乎破坏了其他站点，因为它们每次都重定向回此站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:02:57.893

尝试使用[location](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)元素包装重定向规则并在`path`属性中指定您的域。

**更新**
我认为它应该是这样的：

```
<configuration>
...
<location path="http://abc.com">
  <system.webServer>
    <defaultDocument>
      <files>
        <clear />
        <add value="index.htm" />
      </files>
    </defaultDocument>
  </system.webServer>
</location>
...
</configuration> 
```

# joomla - 如何制作joomla配置xml

> ID：13266238
> 
> 赞同：0
> 
> 时间：2012-11-07T08:58:21.153
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla-component

我在网上搜索并没有找到任何解释清楚的东西。

我想为我的组件和模块创建配置，但不知道从哪里开始或如何开始，如果任何人知道好的教程会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:19:35.127

这是 Joomla 2.5 所需要的。某些字段是可选的，例如 SQL 和安装/卸载字段。

```
<?xml version="1.0" encoding="utf-8"?> 
    <extension type="component" version="2.5.0" methos="update">
        <name>Hello World</name>
        <creationDate>2007-01-17</creationDate>
        <author>John Doe</author>
        <authorEmail>example@example.org</authorEmail>
        <authorUrl>http://www.example.org</authorUrl>
        <copyright>Copyright Info</copyright>
        <license>License Info with link</license>
        <version>1.0.1</version>
        <downloadUrl>http://www.example.org/downloads/myjoomlaextensions/</downloadUrl>

        <installfile>install.helloworld.php</installfile>

        <uninstallfile>uninstall.helloworld.php</uninstallfile>

        <install>
            <sql>
                <file driver="mysql" charset="utf8">install.mysql.utf8.sql</file>
                <file driver="mysql">install.mysql.nonutf8.sql</file>
            </sql>
        </install>

        <uninstall>
            <sql>
                <file driver="mysql" charset="utf8">uninstall.mysql.utf8.sql</file>
                <file driver="mysql">uninstall.mysql.nonutf8.sql</file>
            </sql>
        </uninstall>

        <files>
            <filename>index.html</filename>
            <filename>helloworld.php</filename>
            <folder>views</folder>
    </files>

    <languages>
            <language tag="en-GB">en-GB.com_test.ini</language>
            <language tag="en-GB">en-GB.com_test.sys.ini</language>
    </languages>

    <administration>

            <menu img="components/com_helloworld/images/helloworld_icon.png">Hello World</menu>
            <submenu>
                    <menu link="option=com_helloworld&amp;controller=config">Configuration</menu>
                    <menu img="icon" task="hello" controller="z" view="a" layout="b" sub="c">Hello Again!</menu>
                    <menu view="test" layout="foo">Testing Foo Layout</menu>
            </submenu>

            <files folder="admin">
                    <filename>index.html</filename>
                    <filename>admin.helloworld.php</filename>
            </files>

            <languages folder="admin">
                    <language tag="en-GB">en-GB.com_helloworld.ini</language>
                    <language tag="en-GB">en-GB.com_helloworld.sys.ini</language>
            </languages>

    </administration>    
</extension> 
```

# java - 读取 RIFF 文件时出现 NegativeArraySizeException

> ID：13266240
> 
> 赞同：0
> 
> 时间：2012-11-07T08:58:27.930
> 
> 标签：java, io, riff

我目前正在从事[Java 多媒体 IO 项目](https://github.com/hachisoftware/Java-Multimedia-IO-Project/ "Java 多媒体 IO 项目")并正在测试 RIFFInputStream，但在测试时我遇到了 NegativeArraySizeException；以下是调试控制台的输出；

```
RIFF Stream type: AVI 
Chunks contained in this stream: 

LIST::hdrl
    avih
    LIST
    LIST
LIST::INFO
    ISFT
Exception in thread "main" java.lang.NegativeArraySizeException
    at javax.io.RIFFList.<init>(RIFFList.java:25)
    at javax.io.RIFFInputStream.next(RIFFInputStream.java:58)
    at javax.io.RIFFInputStream.next(RIFFInputStream.java:56)
    at Test.main(Test.java:25) 
```

当我第一次收到这个异常时，我下载了一个 RIFF 查看器，查看器列出了以下块；

```
RIFF:AVI 
    LIST:hdrl
        avih
        LIST:strl
        LIST:strl
        JUNK
    LIST:INFO
        ISFT
    JUNK
    LIST:movi
    idx1 
```

所以发生的事情看起来是 RIFFList 构造函数代码在构建`movi`列表时遇到了麻烦。我想知道的是为什么它从流中接收到负数？

谢谢，利亚姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:48:56.723

我发现了问题并已解决。

我在重新阅读 RIFF 标准后发现的问题是，当块数据不均匀时，将添加一个填充字节，但该字节不会显示在块大小上，所以我在 RIFFList 初始化代码中所做的只是我如果它正在读取的块不均匀，则告诉它在位置编号上加一。

# cordova - PhoneGap [A ndroid] : 使用 .Mbtiles 制作自定义离线地图

> ID：13266245
> 
> 赞同：1
> 
> 时间：2012-11-07T08:58:45.820
> 
> 标签：cordova, offline, android-sqlite, leaflet

我正在为 android 应用程序开发 phonegap：该应用程序包括使用 .mbtiles 离线地图。我使用 Leaflet 来操作地图。我在从 Map.mbtiles 中提取图块时发现了一个问题。

如果有人可以帮助我，我会很高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:47:31.517

[http://giscollective.org/tutorials/web-mapping/leaflet-1/](http://giscollective.org/tutorials/web-mapping/leaflet-1/)

应该对设置传单地图很有用，然后提取您的mbtiles并阅读

[https://groups.google.com/forum/?fromgroups=#!topic/leaflet-js/oX31C6KcXVw](https://groups.google.com/forum/?fromgroups=#!topic/leaflet-js/oX31C6KcXVw)

了解如何引用离线 png 文件。我建议你提取你制作的瓷砖（例如从 TileMill），而不是出于版权原因从网上下载的瓷砖。

希望有帮助吗？

# jquery - 无法根据复选框选中属性在按钮中添加/删除禁用属性

> ID：13266246
> 
> 赞同：7
> 
> 时间：2012-11-07T08:58:52.183
> 
> 标签：jquery, jquery-mobile

查询：

```
<script type="text/javascript">

function  enableDisableButton() {

    var isChecked = ($('input[name=ignore-checkbox]').is(':checked'));

    if (isChecked == true) {
        $("button[name=set-up-account]").removeAttr("disabled");
    }
    else {
        $("button[name=set-up-account]").attr("disabled", "disabled");
    }

}

$('#mobilePage').live('pageinit', function (event) {    //document ready for jquery mobile

    enableDisableButton();

    $('#ignore-checkbox').bind("change", function () {
        enableDisableButton();
    });

});
  </script> 
```

html:

```
 @using (Html.BeginForm("Account", "SetUpAccount", FormMethod.Post, new { @id = "account-set-up", @data_ajax = "false" }))
 {       

     <div class="ui-grid-a field">
        <div class="ui-block-a" style="width:140px;">
         <label for="ignore-checkbox">Ignore</label>
         <input type="checkbox" name="ignore-checkbox" id="ignore-checkbox"/>
        </div>
     </div>

     <div style="width:100%;float:left;">
         <button type="submit" name="set-up-account" id="set-up-account"  data-inline="true"  data-mini="true">Set Up Account</button>
     </div>
  } 
```

我想`Set Up Account`根据复选框选中的属性启用/禁用按钮。如果选中复选框，则启用按钮，否则禁用。在页面加载时，我正在禁用按钮

我面临的问题是，

在页面加载时，它禁用了按钮，但它没有根据复选框的更改事件添加/删除禁用的属性，我签入了 firebug，它根据选中和未选中的值正确进入循环。

注意：我使用的是 Jquery mobile 1.2 和 jquery 1.7。同样，在此处发布之前，我在 google 中进行了搜索，根据复选框选中的值启用和禁用按钮下有许多帖子。但没有一个能解决我的问题。

有什么问题？请帮我

谢谢...

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-11-14T00:45:49.447

我不确定这是否有助于解决您的主要问题，但根据[http://api.jquery.com/prop/](http://api.jquery.com/prop/)您应该使用 .prop() 函数而不是 .attr 添加和删除禁用的属性() 和 .removeAttr() 函数。

要添加属性：

```
.prop("disabled", true); 
```

要删除该属性：

```
.prop("disabled", false); 
```

我在寻找上述信息时偶然发现了这个问题，所以我想我会分享。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T10:46:52.107

由于 Jquery Mobile，它没有启用按钮。在 JQM 中，我们需要刷新表单元素，同时对其进行操作

解决方案是

```
 function  enableDisableButton() {

    var isChecked = ($('input[name=ignore-checkbox]').is(':checked'));

    if (isChecked) {
        $("button[name='set-up-account']").removeAttr("disabled").button('refresh');
    }
    else {
        $("button[name='set-up-account']").attr("disabled", "disabled").button('refresh');
   }
}

$('#mobilePage').live('pageinit', function (event) {

    enableDisableButton();

    $('#ignore-checkbox').bind("change", function () {
        enableDisableButton();
    });
}); 
```

问题已通过添加解决

```
.button('refresh'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-25T13:45:57.573

像这个

```
 $('#setagb').change(function(){
        if ($(this).is(':checked'))
        {
            $("#submit").removeAttr("disabled");
        }
        else
        {
            $("#submit").attr( "disabled", "disabled" );
        }               
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:31:30.887

试试这个

```
$("input[name=ignore-checkbox]").click(function() {
  $("button[name=set-up-account]").attr("disabled", this.checked);
}); 
```

[演示](http://jsfiddle.net/26n4M/3/)

# c++ - 通过构造函数初始化 std::array 私有成员

> ID：13266249
> 
> 赞同：0
> 
> 时间：2012-11-07T08:59:00.610
> 
> 标签：c++, class, constructor

例如，我有以下代码：

```
#include <iostream>
#include <array>

class Base {
public:
  Base() : mA(std::array<int,2>()) {}
  Base(std::array<int,2> arr) : mA(arr) {}
  Base(/* what to write here ??? */);
private:
  std::array<int,2> mA;
};

int main() 
{
    std::array<int,2> a = {423, 12}; // Works fine
    Base b(a); // Works fine
    Base c({10, 20}); // This is what I need. 

    return 0;
} 
```

我应该如何定义构造函数以允许初始化，如上面“main”中的第 3 行所示？一般来说，我需要一个可配置的（在编译/运行时长度）结构，它允许使用数字列表进行初始化，例如 {1, 2, 3} 或 (1, 2, 3) 或类似的东西，而不需要元素-逐元素复制。为简单起见，我选择了 std::array，但恐怕它可能不适用于这种初始化。你会推荐什么容器？

谢谢， 科斯蒂亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:12:14.123

您可以添加一个构造函数，该构造函数接受一个[`std::initializer_list<int>`](http://en.cppreference.com/w/cpp/utility/initializer_list)并将内容复制到数组中：

```
#include <initializer_list>
#include <algorithm>

....

Base(std::initializer_list<int> a) {
   // check size first
   std::copy(a.begin(), a.end(), mA.begin()); }
} 
```

注意：**如果**你想保存许多在运行时定义的元素，那么你应该使用一个`std::vector<int>`this 有一个构造函数 from ，`initializer_list<int>`这样代码就更简单了：

```
class Foo {
public:
  Foo() {}
  Foo(const std::vector<int>& arr) : mA(arr) {}
  Foo(std::initializer_list<int> a) : mA(a) {}
private:
  std::vector<int> mA;
}; 
```

您可以像这样初始化它：

```
Foo f1({1,2,3,4,5}); 
```

或者

```
Foo f2{1,2,3,4,5}; 
```

# jquery - 带有 livequery 的 JQuery getScript - 异步执行抛出我的结果

> ID：13266254
> 
> 赞同：0
> 
> 时间：2012-11-07T08:59:23.793
> 
> 标签：jquery, asynchronous, livequery, getscript

我们有一个“实用程序” js 函数，它包含在我们网站的几个 js 文件中，因此为了减少代码重复，我们将其移至实用程序文件并修改所有 js 文件以在使用`getScript`. 这在大多数情况下都有效，但是对于使用 livequery 的一段代码，我遇到了错误。

我在需要使用新功能的任何地方成功使用的代码：

```
$.getScript("js/utilities.js", function(){
   ... use parseQueryString function ....
}); 
```

**之前的代码：**

```
$('.preview')
    .livequery(function(){
            $(this).attr('rel','myPage.cfm?' + parseQueryString($(this).attr('rel')));
        }); 
```

基本上，每当场景中出现具有“预览”类的元素时，我们都希望解析 rel 属性并将其替换为新解析的字符串。

**之后的代码：**

```
$('.preview')
    .livequery(function(){
            var preview = $(this);
            // load utilities.js so that we can access the parseQueryString function
            $.getScript("js/utilities.js", function(){
                preview.attr('rel','myPage.cfm?' + parseQueryString(preview.attr('rel')));
            });
        }) 
```

问题是，这似乎是`$('.preview').livequery`在执行调用回调之前继续循环的下一次迭代`getScript`。因此，`preview`在我们用适当的值替换它的 rel 属性之前，变量会被重置。我怎样才能让它正确执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:22:30.583

我认为你在标题中提到了这个问题:) '异步' 正是原因 - 加载实用程序是打开的，因为将发出请求并且执行将同时继续..如果有更多匹配项，则输入另一个 livequery 回调。坦率地说，我认为将脚本加载放在将被循环多次的函数中是一个非常糟糕的主意——这有点毫无意义。我认为没有理由不像普通脚本一样包含它：

```
<script src="js/utilities.js" type="text/javascript"></script> 
```

我认为这是最简单、最合理的解决方案。但是，如果由于某种原因您真的不能使用它，请确保通过上下文为回调提供变量的本地副本（请参阅[$.ajax 上下文选项](https://stackoverflow.com/questions/5097191/ajax-context-option/5097214#5097214)，因为 getScript 是一个 $.ajax 快捷方式，它也应该有它）或尝试同步ajax ...最后一个是一个选项，但在这种情况下请不要真的尝试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:29:19.873

我刚刚想出的一种解决方法似乎正在起作用......将 getScript 调用放在 livequery 循环周围：

```
 // load utilities.js so that we can access the parseQueryString function
$.getScript("js/utilities.js", function(){
    $('.preview')
        .livequery(function(){
            $(this).attr('rel','myPage.cfm?' + parseQueryString($(this).attr('rel')));
        })
}); 
```

# cloud-foundry - Cloud Foundry Uaa 错误

> ID：13266256
> 
> 赞同：1
> 
> 时间：2012-11-07T08:59:29.313
> 
> 标签：cloud-foundry, vmc

我已经为我的 vcap 配置了 uaa，我也成功地注册了一个新用户，

**azureuser@vcap:~/cloudfoundry/vcap/dev_setup/bin$ sudo vmc login**

**尝试登录 [http://paas.azure4j.u​​s]**

**电子邮件：test@meruvian.org**

**密码：*** ***

**成功登录 [http://paas.azure4j.u​​s]**

但是当我尝试“sudo vmc info”时

输出是：

**VMware 的云应用平台**

**如需支持，请访问[http://support.cloudfoundry.com](http://support.cloudfoundry.com)**

**目标： [http](http://paas.azure4j.us) ://paas.azure4j.u​​s (v0.999)**

**客户端：v0.3.23**

这是否意味着我无法登录？

Uaa有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:16:34.940

我想我暂时解决了这个问题

所以我在 cloud_controller.yml 上禁用了 uaa 配置

然后我可以用我的用户名和密码再次登录

> 无人机：
> 
> 启用：真-->***假***
> 
> 网址：[http ://chankillo.openpaas.or.id:8061/](http://chankillo.openpaas.or.id:8061/)
> 
> resource_id：cloud_controller
> 
> token_secret：uaa_jwt_secret
> 
> client_secret: cloudcontrollersecret
> 
> token_creation_email_filter: [""

但我仍然不知道这对我的 vcap 系统或安全性有什么影响，

但感谢您的所有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:54:12.420

您能否将应用程序部署到您的 VCAP 实例？如果使用 --trace 标志调用 vmc info，输出是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:24:17.127

所以首先：在引入UAA之前，Cloud Controller（简称CC）自己做身份验证，将用户存储在psql db中。

后来他们发现**CC 应该专注于应用程序/服务管理**并将**身份验证**/授权/用户管理委托给一个新组件，他们将其命名为：用户帐户和身份验证 (UAA) 服务器

UAA 主要是一个 oauth2 提供者，这意味着给**客户**代币。但是 oauth 术语中的客户端是代表用户（oauth 术语中的资源所有者）的 vmc/CC 之类的应用程序

```
echo 'select client_id, scope from oauth_client_details;' | sudo psql -U root uaa

    client_id     |                               scope                                
------------------+--------------------------------------------------------------------
 admin            | uaa.none
 vmc              | cloud_controller.read,cloud_controller.write,openid,password.write
 cloud_controller | uaa.none 
```

UAA 还能够进行身份管理，即能够存储用户及其密码。他们正在实施 SCIM 标准（跨域身份管理系统）。默认情况下，它使用 postgres 来存储用户：

```
echo 'select * from users;' | sudo psql -U root uaa 
```

实际上，现在在我的 vcap 上，所有用户都将由 cloud_controller 的 postgres 数据库存储，无论 cloud_controller.yml 设置如何。但请注意，CC - UAA 连接正在经历重大改造，正如您在过去几天的 git 提交中看到的那样：

*   升级 CC 以使用最新的 uaa gem：[https ://github.com/cloudfoundry/cloud_controller/commit/b057a97198a1493ae8f49c6684438198ee8ddd9d](https://github.com/cloudfoundry/cloud_controller/commit/b057a97198a1493ae8f49c6684438198ee8ddd9d)
*   修复了在 UAA 中创建用户的方法调用： [https ://github.com/cloudfoundry/cloud_controller/commit/c67e52608da4f0795bdce6710a5cc87ac4d5cad1](https://github.com/cloudfoundry/cloud_controller/commit/c67e52608da4f0795bdce6710a5cc87ac4d5cad1)

在过去的几天里，我多次从 git 中提取最新代码，有时新用户会进入 CC 的数据库，有时他们会进入 UAA 的数据库。它有时还取决于 vmc 版本...

根据您的描述，我猜您的用户在 CC 的数据库中。您可以自行检查。您可以将 cloud_controllers postgres db 中的用户列出为：

```
echo 'select * from users;' | sudo -u postgres psql cloud_controller 
```

注意**活动**列。如果启用了 UAA，则两个 DB 都存储用户，但其在 UAAdb 中的 active=true 和 CCdb 中的 active=false

所以你最安全的赌注是你禁用 CC 的 UAA 委托，如图所示，在**cloudfoundry/.deployments/devbox/config/cloud_controller.yml的第 77 行附近。**

```
uaa:
  enabled: false 
```

更改任何配置文件后，您必须重新启动受影响的组件，在这种情况下 CC：

```
~/cloudfoundry/vcap/dev_setup/bin/vcap_dev restart cloud_controller 
```

# c# - 使用程序参数的 C# 切换库

> ID：13266258
> 
> 赞同：1
> 
> 时间：2012-11-07T08:59:46.787
> 
> 标签：c#, parameters, switch-statement, class-library, using-statement

我有一个包含两个类库的项目。我需要使用应用程序参数以编程方式在它们之间切换，例如

```
if(arg == "a")
    using LibraryA;
if(arg == "b")
    using LibraryB;

namespace Project
{
    public class MyClass
    {
    // my code here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:09:55.600

If you want to build loose-couple application, i suggest you read more about Dependancy Injection pattern. This is a nice [article](http://channel9.msdn.com/Blogs/mtaulty/Prism--Silverlight-Part-1-Taking-Sketched-Code-Towards-Unity), desscribed how to build such design. (First 4 lessons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:07:59.980

这是一个相当复杂的要求，您必须将多种模式和实践结合起来才能通过它。随着我的进展，我将尝试链接到相关的原则。

要解决的第一个问题是对齐两个类库，以便它们具有公共接口。这是必要的，以使它们如您所描述的那样可互换。通常这就像创建两个对象都实现的接口一样简单 - 但您提到您只能控制其中一个库。在这种情况下，您需要利用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)来强制您无法控制的库来实现您的通用接口。

`Library1.dll`假设我们目前在and中有这两个类`Library2.dll`（Library1.dll 是我们可以控制的）...

```
// in Library1.dll
public class Foo
{
    public int DoSomething() { ... }
}

// In Library2.dll
public class Foo
{
    public int DoSomething() { ... }
} 
```

首先我们需要定义我们的通用接口。这应该驻留在核心/共享库中......

```
// In Shared.dll
public interface IFoo
{
    int DoSomething();
} 
```

现在因为我们可以控制库一，我们可以很容易地让它以通常的方式实现公共接口......

```
// In Library1.dll
public class Foo : IFoo
{
    public int DoSomething() { ... }
} 
```

然而，因为我们无法控制`Library2.dll`我们需要创建一个适配器类。此类的目的只是实现通用接口，所有行为都委托给真实的`Library2.Foo`. 实际上，这允许我们使`Library2.Foo`对象实现我们的通用接口。

```
// In Shared.dll
public class Foo2Adapter : IFoo()
{
    private Library2.Foo _realFoo;

    public Foo2Adapter()
    {
        _realFoo= new Library2.Foo();
    }

    public int DoSomething()
    {
        _realFoo.DoSomething();
    }
} 
```

现在我们需要修改所有客户端代码以使用通用接口而不是直接使用对象。在你之前可能有过这样的事情......

```
if(arg == "a")
    using LibraryA;
if(arg == "b")
    using LibraryB;

namespace Project
{
    public class MyClass
    {
        public void Bar()
        {
            var foo = new Foo();

            foo.DoSomething();
        }
    }
} 
```

现在你的代码应该只使用接口......

```
namespace Project
{
    public class MyClass
    {
        public void Bar(IFoo foo)
        {
            foo.DoSomething();
        }
    }
} 
```

现在我们有一个新问题，我们如何知道`IFoo`使用哪个版本？是`Library1.Foo`，还是`Shared.Foo2Wrapper`？

你可以使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)来解决这个问题。控制容器反转会为您提供对象，您可以将其配置为根据特定条件提供不同类型的对象。这是一个伪代码示例，使用类似于[StructureMap](http://docs.structuremap.net/)（我个人最喜欢的 IoC 容器）使用的语法...

```
var container = new IocContainer();

if (arg == "a")
    container.For<IFoo>().Use<Library1.Foo>();

else if (arg == "b")
    container.For<IFoo>().Use<Shared.Foo2Adapter>();

var foo = container.GetInstance<IFoo>(); 
```

现在，当我们调用`GetInstance<IFoo>()`IoC 容器时，将根据命令行的配置方式返回 a`Library1.Foo`或 a 。`Shared.Foo2Wrapper`我们现在需要遍历我们之前拥有的客户端代码中的所有位置，`new Foo()`并将其替换为`container.GetInstance<IFoo>()`.

我希望这能让你感动:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T20:48:39.657

这是一个示例，说明如何实现您所追求的目标。

```
using System;
namespace StackOverflowDemo.Applications.TestFrameworkDemo.Data
{

    public interface IDataSource
    {
        string GetTitle(int id);
    }

    public class Database: IDataSource
    {
        public string GetTitle(int id)
        {
            string result;
            //logic to connect to a database and retrieve a value would go here
            switch (id)
            {
                case 1: result = "DB First Title"; break;
                case 2: result = "DB Second Title"; break;
                default: throw new KeyNotFoundException(string.Format("ID '{0}' not found",id));
            }
            return result;
        }

    }
}

using System;
using StackOverflowDemo.Applications.TestFrameworkDemo.Data;
namespace StackOverflowDemo.Applications.TestFrameworkDemo.DataTest
{

    public class DatabaseMock : IDataSource
    {
        public string GetTitle(int id)
        {
            string result;
            switch (id)
            {
                case 1: result = "DBMock First Title"; break;
                case 2: result = "DBMock Second Title"; break;
                default: throw new KeyNotFoundException(string.Format("ID '{0}' not found", id));
            }
            return result;
        }

    }
}

using System;
using StackOverflowDemo.Applications.TestFrameworkDemo.Data;
namespace StackOverflowDemo.Applications.TestFrameworkDemo.Logic
{
    public class SomeBusinessObject
    {
        private IDataSource myData;
        public SomeBusinessObject(IDataSource myData)
        {
            this.myData = myData;
        }
        public void OutputTitle(int id)
        {
            Console.WriteLine(myData.GetTitle(id));
        }
    }
}

using System;
using StackOverflowDemo.Applications.TestFrameworkDemo.Data;
//using StackOverflowDemo.Applications.TestFrameworkDemo.DataTest; //we don't need the using statement if we use the whole path below, which I think relates to your question
using StackOverflowDemo.Applications.TestFrameworkDemo.Logic;
namespace StackOverflowDemo.Applications.TestFrameworkDemo
{
    class Program
    {
        public static void Main(string[] args)
        {
            IDataSource myData;
#if(DEBUG)
            myData = new StackOverflowDemo.Applications.TestFrameworkDemo.DataTest.DatabaseMock();
#else
            myData = new Database();
#endif
            SomeBusinessObject sbo = new SomeBusinessObject(myData);
            sbo.OutputTitle(1);
            Console.WriteLine("Done");
            Console.ReadKey();
        }
    }
} 
```

此处提供有关模拟的更多信息：http: [//msdn.microsoft.com/en-us/library/ff650441.aspx](http://msdn.microsoft.com/en-us/library/ff650441.aspx)

Channel9 也有很多东西：[http ://channel9.msdn.com/search?term=test+driven+development](http://channel9.msdn.com/search?term=test+driven+development)

或者，您可能对此感兴趣：http: [//msdn.microsoft.com/en-us/library/hh549175](http://msdn.microsoft.com/en-us/library/hh549175(v=vs.110).aspx) (v=vs.110).aspx 。它允许您劫持现有对象的方法并用虚拟方法替换它们。我还没有玩过这个，但它看起来很有希望。

# ios - 升级 iOS 版 Phonegap（从 1.4.1 到最新版本）

> ID：13266259
> 
> 赞同：0
> 
> 时间：2012-11-07T08:59:51.497
> 
> 标签：ios, cordova, phonegap-plugins

我想知道是否有人有升级phonegap的经验。想得到一些帮助。

我有一个使用 phonegap 1.4.1 的基于 iOS Phonegap 的项目。我需要将其更新到最新版本。目前最新版本为2.2.0

phone gap 文档中描述的步骤仅告诉我们如何从一个版本升级到另一个版本，但对我将 phone gap 从非常旧的版本升级到最新版本没有帮助。

[http://docs.phonegap.com/en/2.2.0/guide_upgrading_ios_index.md.html#Upgrading%20Cordova%20iOS](http://docs.phonegap.com/en/2.2.0/guide_upgrading_ios_index.md.html#Upgrading%20Cordova%20iOS)

我可以看到从 1.4.1 到最新版本的三个重大变化**。**

1.  从 1.4.1 到 1.5.0，**PhoneGap.framework**已重命名为**Cordova.framework**

2.  从 1.9.0 到 2.0.0，**Cordova.framework**已被删除，而是使用**CordovaLib 作为子项目。**

3.  从 2.0.0 到 2.1.0，自动引用计数**(ARC)**被引入**CordovaLib**

我不确定升级旧 phonegap 的最佳方法是什么，鉴于没有可遵循的文档/教程，我没有信心直接从 1.4.1 跳到 2.2.0。

我正在考虑先将phonegap从1.4.1升级到1.9，然后再将1.9.0升级到2.0.0再升级到2.2.0。但这似乎是一项艰巨的工作。

请给我一些建议，或者有人遇到过这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T21:05:49.783

我的建议是：

1.  创建一个全新的项目。
2.  将您的 www 资产复制到新的 www
3.  请参阅 index.html 中的新 cordova .js 文件
4.  重新添加您的插件（确保插件支持新的 Cordova 版本）
5.  更新您的 Cordova.plist 设置以反映您想要的内容，请参阅[http://docs.cordova.io上的项目设置](http://docs.cordova.io)
6.  更新您的白名单，请参阅[http://docs.cordova.io上的白名单指南](http://docs.cordova.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:55:09.370

这实际上取决于您的应用程序与 phonegap 的“本机”呼叫挂钩的程度，..

如果它主要是你自己的代码，我会开始一个新项目并将`html`文件夹复制过来，找到并将提及替换`phonegap.js`为`cordova.js`. 很有可能，该应用程序可以工作，如果不能，它应该是一个小修复。

或者查看[https://build.phonegap.com/](https://build.phonegap.com/) - phonegap 的云基础构建器。

# java - 从文件的相对路径获取Java中的文件大小

> ID：13266260
> 
> 赞同：0
> 
> 时间：2012-11-07T09:00:00.347
> 
> 标签：java, liferay, filesize

如果我有文件的相对路径，如何在 Java 中获取文件大小，例如：

```
String s = "/documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc" 
```

我尝试了两个不同的字符串：

```
 String[] separatedPath = s.split("/");
  List<String> wordList = Arrays.asList(separatedPath);  
  String ret = "/" + wordList.get(1) + "/" + wordList.get(2) + "/" + wordList.get(3)+ "/" + wordList.get(4);    
  s = ret; 
```

在这种情况下 s="/documents/19/21704/file2.pdf";

在第二种情况下 s="/documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc"

我试过：

```
File file1 = new File(s);
long filesize = file1.length(); 
```

与：

```
String filePath = new File(s).toURI().getPath();
File file2 = new File(filePath);
long filesize2 = file1.length(); 
```

还有（如果问题在于没有提供完整路径）：

```
String absolutePath = FileUtil.getAbsolutePath(file1);
File file3 = new File(absolutePath);
long filesize3 = file3.length();
byte[] bytes1=FileUtil.getBytes(file1);
byte[] bytes2=FileUtil.getBytes(file2);
byte[] bytes3=FileUtil.getBytes(file3); 
```

我总是在调试，所有情况下的文件大小都是 0。

也许值得注意的是，file1 和 file2 和 file3 的三个属性始终是：

```
 filePath: which is always null; 
 path: "/documents/19/21704/liferay-portlet-development.pdf"
 prefixLength: 1 
```

因为我也在使用 Liferay，所以我也尝试了他们的实用程序。

```
 long compId = article.getCompanyId();
  long contentLength = DLStoreUtil.getFileSize(compId, CompanyConstants.SYSTEM, s); 
```

我还应该注意到，在我的 .xhtml 视图中，我可以通过以下方式访问该文件：

```
<a target="_blank" 
href="/documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc">
     file2.pdf 
</a> 
```

Pdf 在新窗口中打开。所以它存储在我的服务器上。

我在这里做错了什么？我无法从 bean 获取文件大小？

任何答案将不胜感激。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:06:39.543

在 Java 中，您可以使用 File.length() 方法获取文件大小（以字节为单位）。

```
File file =new File("c:\\java_xml_logo.jpg");

if(file.exists()){

double bytes = file.length();
}
System.out.println("bytes : " + bytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:07:52.233

The problem is that your "relative" path is expressed as an absolute path (begining with "/", which is read as FS root).

A relative file path should look like:

*   `documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc`
*   `./documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc`

Or, you could get your application root folder File and compose the absolute path:

```
File rootFolder =new File("path to your app root folder");

File myfile=new File(rootFolder, "/documents/19/21704/file2.pdf/0929c695-d023-49d7-a8ff-65ccea46bebc"); 
```

# tooltwist - 通过 XPC UI 将数据插入数据库表时出错

> ID：13266272
> 
> 赞同：0
> 
> 时间：2012-11-07T09:00:46.667
> 
> 标签：tooltwist

2012-10-31 11:41:09,895 DEBUG UpdatePluggin - 插入 get_people (person_name) 值 (?) 2012-10-31 11:41:09,913 DEBUG UpdatePluggin - Parameter0(OTHER)=Adam com.dinaa.xpc.XpcException:在 com.dinaa.sql.UpdatePluggin 的 tooltwist.misc.AuditTransactionTracking.getTransactionObject(AuditTransactionTracking.java:87) 的 tooltwist.misc.AuditTransactionTracking.(AuditTransactionTracking.java:55) 中找不到配置文件“conf/skipEntitiesForAudit.conf”。 runMethod(UpdatePluggin.java:1014) 在 com.dinaa.xpc.backend.XpcInternal.opEntity(XpcInternal.java:176) 在 com.dinaa.xpc.backend.XpcInternal.opEntityList(XpcInternal.java:288) 在 com.dinaa .xpc.backend.XpcInternal.op(XpcInternal.java:82) 在 com.dinaa.xpc.Xpc.op(Xpc.java:660) 在 tooltwist.workbench.XpcTestServlet.doPost(XpcTestServlet.java:103) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain .java:304) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240) 在 org.apache.catalina 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)。 core.StandardContextValve.invoke(StandardContextValve.java:164) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395) at org.apache.coyote.http11 .Http11Processor.process(Http11Processor.java:250) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java :166) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker .run(Unknown Source) at java.lang.Thread.run(Unknown Source)apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process( Http11Protocol.java:188) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process( Http11Protocol.java:188) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166) 上的 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run( JioEndpoint.java:302) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166) 上的 Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run( JioEndpoint.java:302) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source)运行（未知来源）运行（未知来源）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:15:40.193

要停止显示此错误，请进入 ToolTwist Workbench，在项目***ttWbd***中创建一个名为**config/skipEntitiesForAudit.conf**的文件，然后插入以下行：

 *> <配置/>

或者，您可以从命令行创建 .../devel/ttWbd/conf/skipEntitiesForAudit.conf。*

# c# - 如何在 asp.net C# 4.0 中调用异步方法？

> ID：13266277
> 
> 赞同：6
> 
> 时间：2012-11-07T09:01:04.640
> 
> 标签：c#, asp.net, c#-4.0, asynchronous

我知道 .net 4.5 有 await, async 关键字，可以轻松调用异步方法。我目前正在研究如何在 C# 4.0 中进行异步调用。我想要的一个例子是在数据网格被数据绑定的地方进行异步调用。

如果您能给我一些链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T09:05:03.663

看看使用任务，这在 .Net 4 中可用，应该对您有所帮助。一个简单的示例可能如下所示：

```
public void MainFlow()
{
   Task taskWork = Task.Factory.StartNew(new Action(DoWork));
   //Do other work
   //Then wait for thread finish
   taskWork.Wait();
}

private void DoWork()
{
   //Do work
} 
```

更多，看[这里](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:07:46.317

使用 Task.ContinueWith 在任务完成后基本上执行您的操作。

一些可能有用的例子：

[http://msdn.microsoft.com/en-us/library/dd784422.aspx](http://msdn.microsoft.com/en-us/library/dd784422.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:55:16.570

我们制作了一些用于执行异步操作的工具类。

这些方法的真正作用是：异步执行操作，然后将完成的执行相应地发布到同步上下文。

我们将其作为 TPL 的包装器，以便在我们调用长时间运行的操作时在 WPF 中轻松使用它。这个类也有类似的动作可以取消，而不仅仅是放弃。

```
public static class AsyncExecutor
    {
        public static CancellationTokenSource ExecuteBlockingOperation(Action action, Action completition, Action<AggregateException> onException)
        {
            if (action == null)
                throw new ArgumentNullException("action");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task(action, TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
                                  {
                                      if (!token.IsCancellationRequested)
                                          completition();
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;

        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn>(Action<TIn> action, TIn parameter, Action<TIn> completition, Action<AggregateException, TIn> onException)
        {
            if (action == null)
                throw new ArgumentNullException("action");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task(() => action(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
                                  {
                                      if (!token.IsCancellationRequested)
                                          completition(parameter);
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;

        }

        public static CancellationTokenSource ExecuteBlockingOperation<TOut>(Func<TOut> func, Action<TOut> completition, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(func, TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
                                  {
                                      if (!token.IsCancellationRequested)
                                          completition(asyncPart.Result);
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;

        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TOut, TIn> completition, Action<AggregateException, TIn> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(asyncPart.Result, parameter);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TOut> completition, Action<AggregateException, TIn> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(asyncPart.Result);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TIn> completition, Action<AggregateException, TIn> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(parameter);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action completition, Action<AggregateException, TIn> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition();
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TIn> completition, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(parameter);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TOut, TIn> completition, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(asyncPart.Result, parameter);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TOut> completition, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition(asyncPart.Result);
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static CancellationTokenSource ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action completition, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var cts = new CancellationTokenSource();
            var token = cts.Token;

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
            {
                if (!token.IsCancellationRequested)
                    completition();
            },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();

            return cts;
        }

        public static void ExecuteBlockingOperation(Action action, Action completition, Func<bool> shouldComplete, Action<AggregateException> onException)
        {
            if (action == null)
                throw new ArgumentNullException("action");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task(action, TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
                                  {
                                      if (shouldComplete == null || shouldComplete())
                                          completition();
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();
        }

        public static void ExecuteBlockingOperation<TIn>(Action<TIn> action, TIn parameter, Action<TIn> completition, Predicate<TIn> shouldComplete, Action<AggregateException, TIn> onException)
        {
            if (action == null)
                throw new ArgumentNullException("action");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task(() => action(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPart =>
                                  {
                                      if (shouldComplete == null || shouldComplete(parameter))
                                          completition(parameter);
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();
        }

        public static void ExecuteBlockingOperation<TOut>(Func<TOut> func, Action<TOut> completition, Predicate<TOut> shoudComplete, Action<AggregateException> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(func, TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler);
            task.ContinueWith(asyncPartTask =>
                                  {
                                      if (shoudComplete == null || shoudComplete(asyncPartTask.Result))
                                          completition(asyncPartTask.Result);
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();
        }

        public static void ExecuteBlockingOperation<TIn, TOut>(Func<TIn, TOut> func, TIn parameter, Action<TOut, TIn> completition, Func<TOut, TIn, bool> shouldComplete, Action<AggregateException, TIn> onException)
        {
            if (func == null)
                throw new ArgumentNullException("func");

            if (completition == null)
                throw new ArgumentNullException("completition");

            var scheduler = TaskScheduler.FromCurrentSynchronizationContext();

            var task = new Task<TOut>(() => func(parameter), TaskCreationOptions.LongRunning);
            task.ContinueWith(asyncPartTask => onException(asyncPartTask.Exception, parameter), CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, scheduler); // on Exception
            task.ContinueWith(asyncPart =>
                                  {
                                      if (shouldComplete == null || shouldComplete(asyncPart.Result, parameter))
                                          completition(asyncPart.Result, parameter);
                                  },
                              CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, scheduler);
            task.Start();
        }            
    } 
```

# oracle - 在 OAF 中动态创建单选按钮组

> ID：13266279
> 
> 赞同：2
> 
> 时间：2012-11-07T09:01:07.533
> 
> 标签：oracle, frameworks

我的用例是：

创建一个包含是/否问题的问卷调查页面。问题将是来自数据库的 fnd 消息，并且可以有多个问题集。我应该能够为每个带有是/否问题的问题显示单选按钮。我需要以编程方式创建的行和单选按钮组。

我正在使用带有 JDev 10.1.3.3.0 的 Oracle 应用程序框架 (OAF)

# ios - HTTP Post - 超时 - 在超时间隔内启动多个请求

> ID：13266284
> 
> 赞同：9
> 
> 时间：2012-11-07T09:01:17.790
> 
> 标签：ios, http, post

我正在使用 HTTP Post 方法并启动同步请求。[NSURLConnection 发送同步请求：..]

对于 HTTP POST 请求，默认超时发生在 75 秒，如许多线程中所述。

但是在 75 秒的超时时间段内，针对使用所有相同参数提出的相同请求，为我们启动了多个 Web 服务请求。

请让我们知道是什么原因导致这个多个请求被启动？这是由于一般的 HTTP POST 还是由于同步请求？

@iOS 示例代码

```
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];
[request addValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField: @"Content-Length"];

 [[NSURLCache sharedURLCache] setDiskCapacity:0];
 [[NSURLCache sharedURLCache] setMemoryCapacity:0];

 NSURLResponse *response;
 response = nil;

 urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];              
 if(urlData)
 {
        NSString *responseString = [[NSString alloc] initWithData:urlData encoding:NSASCIIStringEncoding];
        [self parseStringInformation:responseString infoDict:informationDictionary];
        //NSLog(@"%@",responseString);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:06:23.713

如果没有服务器的请求-响应日志，则有多种可能性。

**程序员错误**：您是否已经经历过所有“gotchya”类型的情况？

*   您是否在“urlData = [NSURLConnection sendSynchronousRequest: ...”行之前放置了一条日志消息，以确保您的代码只调用一次？

*   您是否从主 GUI 线程中调用此函数，如果不支持/不推荐，这意味着它可能会导致像您所描述的那样的副作用。[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

*   您确定您的请求设置为 POST 并且具有正确的标题，例如“Content-type: multipart/form-data, boundary=X”

**Web 服务器响应**：如果没有 Web 服务器日志（或您发布到的服务的代码），很难说...

*   也许您的服务器正在向客户端发送周期性重定向。如果您没有实现“connection:willSendRequest”，那么可以针对 ?X? 进行重定向。一个请求的次数。[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/urlloadingsystem/Articles/RequestChanges.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/urlloadingsystem/Articles/RequestChanges.html)

**API 错误**：您发现了一些导致不必要的副作用的极端情况。也许苹果有错误跟踪器或开发者支持论坛？

*   如果是这种情况，您将不得不解决该错误，直到它被修复。我建议实现异步调用链。“异步加载数据” [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

# uiscrollview - 将子视图添加到超级视图后，UIScrollView 无法滚动

> ID：13266285
> 
> 赞同：1
> 
> 时间：2012-11-07T09:01:21.830
> 
> 标签：uiscrollview, ios6, storyboard

我的 viewController 已经有主滚动视图，用于在 Storyboard 中将内容显示为子视图。之后，我尝试为也可以正常工作的显示图像库（UIScrollView）添加新的子视图。然后当我关闭图片库视图时，主 scrollView 内容大小减小到适合 viewController 边界。我怎样才能避免这种情况？先感谢您。

# jquery - 计算元素是否包含某些文本并在页面上打印结果

> ID：13266292
> 
> 赞同：1
> 
> 时间：2012-11-07T09:01:37.427
> 
> 标签：jquery, html

我在这里做一些奇怪的事情，如果可以，请提供帮助。我有一个带有如下报告的网页：

```
</p></li><li>ARTICLE 1 (NAME 1)<br /><p>    
<div class="list">
Nothing found. 
</div>
</p></li><li>ARTICLE 2 (NAME 2)<br /><p>    

<div class="list">
<h4 class="sub-heading">Items:</h4>  
<li class="item">
...
</li>
<li class="item">
...
</li>

</div> 
```

这在整个页面中重复。文章 X 始终是唯一的，而名称 X 可能在多个文章附近相同。p 元素由我插入并且可以更改（而 css 不能）。div 是我无法触及的插件的输出。该插件搜索一些数据库并返回“未找到”或列出找到的项目。在同一页面上应该有一个表格，其中列出了所有可能的名称 X，并且默认情况下每个名称都有 0。我想要实现的是对名称 X 进行计数，并且仅当文章中 p 之后的元素中存在“未找到”时才增加名称附近的计数器。即，在上面的例子中，表格应该是

```
 Name 1     1

 Name 2     0 
```

相同的名称 X 可能会出现在页面的下一个 ARTICLE X 之后，并且在下一个元素中带有或不带有“nothing found”。只有在“没有找到”存在时才增加计数器的规则应该适用。我的第一个想法是隐藏所有元素，只留下 ARTICLE X 的列表，其中“没有找到”存在于下面的元素中。我这样做了，然后使用以下代码进行计数：

```
 var n = $("li:contains('Name 1')").length;
  $("span").text("There are " + n) 
```

这在很多层面上都是错误的。首先，它读取仍然包含所有元素的源代码，因为即使它们被隐藏它们仍然存在。它显然还替换了页面上确实存在的所有跨度元素中的文本（我从 .text 描述中获取了跨度），并且我真的不知道如何插入输出，因为我无法控制页面布局。任何想法都受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:33:29.533

您可以通过首先选择包含 的元素来获得计数`NAME 1`，然后检查它们是否具有包含的子元素`Nothing found`，例如。

```
$('li:contains("NAME 1")').children('.list:contains("Nothing found")').length; 
```

要在 DOM 中创建和注入元素，请查看[此处的文档](http://api.jquery.com/jQuery/#creating-new-elements)

你也可以看看[这个 fiddle](http://jsfiddle.net/u2a5b/8)，这是我认为你正在努力实现的一个非常基本的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:14:24.877

如果我理解你，试试这个片段：

```
var counter = 0;

$('li').each(function(){
     if($(this).html().indexOf('Name 1')> -1)
         if($(this).next('div.list').html() === "Nothing found.")
             {++counter}
}); 
```

# php - 如何在php中使用通过header()传递的变量

> ID：13266294
> 
> 赞同：6
> 
> 时间：2012-11-07T09:01:42.150
> 
> 标签：php, header

我`header()`用来将 var`user`从一个页面传递到另一个页面：

```
header( "Location: temp.php? user = $user" ); 
```

该变量正在传递并显示在另一个页面的 url 上。

但我不知道如何`user`在该页面中使用这些 var。请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T09:22:01.587

page1.php

```
<?php
    $user = "batman";
    header("Location:temp.php?user=".$user);
    exit();
?> 
```

temp.php?user=batman（你刚刚被重定向到这里）

```
<?php
    if($_GET){
        echo $_GET['user']; // print_r($_GET); //remember to add semicolon      
    }else{
      echo "Url has no user";
    }
?> 
```

或者您可以使用 $_SESSION - 但这很容易使事情复杂化

page1.php

```
<?php
    session_start();
    $_SESSION['user'] = "batman";
    header("Location:temp.php);
    exit();
?> 
```

临时文件

```
<?php
    session_start();
    echo $_SESSION['user'];
    unset($_SESSION['user']); // remove it now we have used it
?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T09:03:15.157

如果“其他页面”在 PHP 中，您只需要：

```
$user=$_GET['user']; 
```

编辑：如果您不确定是否会收到“用户”并希望避免错误消息，您应该这样做：

```
if(isset($_GET['user'])){
    $user=$_GET['user'];
}else{
    //user was not passed, so print a error or just exit(0);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T09:05:30.463

如果您使用它来传递价值

```
header( "Location:temp.php? user = $user" ); 
```

然后在 temp.php 你必须使用

```
$var=$_GET['user']; 
```

获取值，现在 $var 包含您传递的值。

# java - 制作安装程序需要哪些文件而不是 .jar

> ID：13266297
> 
> 赞同：1
> 
> 时间：2012-11-07T09:01:47.883
> 
> 标签：java, jar, installation

我已经为我的项目（媒体播放器）构建了一个 .jar 文件，它也使用命令行成功运行`java -jar mediaplayer.jar`。

但是现在我需要制作一个安装程序，所以制作安装程序需要什么所有文件，我是否还需要将 lib 文件与安装程序捆绑在一起。

当我使用 Java Web Start 启动我的 .jar 文件时，它显示“无法启动应用程序”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:06:04.940

你肯定需要`mediaplayer.jar`在你的类路径中捆绑你的库和库。您还需要生成一个至少可以执行`java -jar mediaplayer.jar`.

通常本机启动器还会检查目标机器上是否安装了 Java，如果没有，则帮助用户安装它。

# sql - 使用另一个表作为信息查询更新表？

> ID：13266299
> 
> 赞同：2
> 
> 时间：2012-11-07T09:01:52.383
> 
> 标签：sql

我有两张桌子，`Staff`并且`Wages`

`Staff`包含

```
 id,   name,     jobID,   wage
  1   Name1       2        
  2   Name2       4      
  3   Name3       1      
  4   Name4       2 
```

`Wages`包含

```
 JobID, Wage
   1    1500
   2    800
   3    1600
   4    2000 
```

（我刚刚获得前 4 名的实际列中还有很多列）

我错过了`Staff`表内的工资，而员工表中我需要的工资是表中的费率`Wages`..

所以我需要一个查询，使`Staff`表格看起来像：

```
 id,   name,     jobID,   wage
  1   Name1       2        800
  2   Name2       4        2000
  3   Name3       1        1500
  4   Name4       2        800 
```

我尝试的一个示例查询是：

```
UPDATE `Staff` 
SET wage = (SELECT wage FROM `Wages`) 
WHERE jobID = (Select jobId FROM `Wages`) 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T09:04:05.547

在`MySQL`,

```
UPDATE Staff a
        INNER JOIN Wages b
            ON a.jobID  = b.JobID
SET a.wage = b.wage 
```

在`MSSQL`,

```
UPDATE a
SET a.wage = b.wage
FROM Staff a
        INNER JOIN Wages b
            ON a.jobID  = b.JobID 
```

*   [**来源**](http://blog.ookamikun.com/2008/03/mysql-update-with-join.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T09:08:25.343

我只是将表保持原样（没有 中的`wage`列`Staff`），处于规范化状态，并在我需要全套（非规范化）数据时运行此查询：

```
SELECT s.id, s.name, s.jobID, w.wage
FROM Staff s
LEFT OUTER JOIN Wages w ON s.jobID = w.jobID 
```

# c++ - 是否可以使用模板来识别两种不同的类型？

> ID：13266302
> 
> 赞同：0
> 
> 时间：2012-11-07T09:02:05.970
> 
> 标签：c++, templates, boost

我有以下代码。我必须为(bool, int, string, const char*)`operator()`中可用的所有类型定义 。`MyVariant`但是，由于`StartsWith`仅适用于字符串类型，因此所有其他仿函数都应返回 false。

```
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

typedef variant<bool, int, string, const char*> MyVariant;

class StartsWith
    : public boost::static_visitor<bool>
{
public:
    string mPrefix;
    bool operator()(string &other) const
    {
        return other.compare(0, mPrefix.length(), mPrefix);
    }
    bool operator()(int &other) const
    {
        return false;
    }
    bool operator()(bool &other) const
    {
        return false;
    }
    bool operator()(const char* other) const
    {
        return false;
    }
    StartsWith(string const& prefix):mPrefix(prefix){}
};

int main(int argc, char **argv) 
{
    MyVariant s1 = "hello world!";
    if(apply_visitor(StartsWith("hel"), s1))
    {
        cout << "starts with" << endl;
    }
    return 0;
} 
```

上面的代码工作正常。但是为了使其更简洁，我认为可以使用模板来为字符串提供一个函子，而为其他类型提供一个函子。我尝试了以下方法，但结果是第二个仿函数总是被调用的。

```
template<typename T>
class StartsWith
    : public boost::static_visitor<bool>
{
public:
    T mPrefix;
    bool operator()(T &other) const
    {
        return other.compare(0, mPrefix.length(), mPrefix);
    }
    template<typename U>
    bool operator()(U &other)const
    {
        return false;
    }
    StartsWith(T const& prefix):mPrefix(prefix){}
}; 
```

以下代码也不起作用：

```
class StartsWith
    : public boost::static_visitor<bool>
{
public:
    string mPrefix;
    bool operator()(string &other) const
    {
        return other.compare(0, mPrefix.length(), mPrefix);
    }
    template<typename U>
    bool operator()(U &other)const
    {
        return false;
    }
    StartsWith(string const& prefix):mPrefix(prefix){}
}; 
```

无论如何我可以避免字符串以外的类型的多个“返回错误”语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:07:03.487

```
bool operator()(std::string const& other ) const {...}
template< class T >
typename boost::disable_if<boost::is_same<T, std::string>, bool >::type
operator()( T const& ) const {return false;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:43:12.777

这个对我有用：

```
class StartsWith
    : public boost::static_visitor<bool>
{
public:
    string mPrefix;
    bool operator()(const string &other) const
    {
        return other.compare(0, mPrefix.length(), mPrefix);
    }
    template<typename U>
    bool operator()(U other)const
    {
        return false;
    }
    StartsWith(string const& prefix):mPrefix(prefix){}
}; 
```

题外话：[std::string::compare()](http://www.cplusplus.com/reference/string/string/compare/)返回`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:38:14.357

问题是我`const char*`在我的变体中使用。更改以下行：

```
MyVariant s1 = "hello world!"; 
```

到

```
MyVariant s1 = string("hello world!"); 
```

解决了问题并使模板版本正常工作。

# iphone - 滚动视图在按钮单击时向上和向下滚动

> ID：13266304
> 
> 赞同：3
> 
> 时间：2012-11-07T09:02:11.167
> 
> 标签：iphone, ios, xcode, ios6, uiscrollview

> **可能重复：**
> [以编程方式滚动 UIScrollView](https://stackoverflow.com/questions/2234875/programmatically-scroll-a-uiscrollview)

目前，我正在开发一个应用程序，其中`UIScrollView`一些按钮以编程方式插入`scroll view.Scrolling`这些添加的按钮对我来说很好。但我想再添加两个按钮并在一个按钮上单击`scroll view scrolling`底部并最后显示底部

按钮，当我单击第二个按钮时，它会滚动到顶部并显示最顶部的按钮。我已经尝试了很多但无法成功。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T10:10:27.030

```
scrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0, 20, 320, 400)];
scrollView.backgroundColor=[UIColor lightGrayColor];
scrollView.contentSize=CGSizeMake(320, 500);
scrollView.showsVerticalScrollIndicator=YES;
[self.view addSubview:scrollView]; 
```

如果 Scroll Size 已知，那么我们可以设置按钮单击事件

```
-(void)buttonCkicked:(UIButton*)sender
{
    if (sender.tag==1001) {
        [scrollView setContentOffset:CGPointMake(0, 100) animated:YES];
    }
    if (sender.tag==1002) {
        [scrollView setContentOffset:CGPointMake(0, 0) animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T09:08:24.087

这可以解决你的 pbm

```
-(IBAction) clickfirstbutton 
{
   [scrollview setContentOffset:CGPointMake(0, (intvalue to the positon of two buttons)) animated:TRUE];
}

-(IBAction) clicksecondbutton
{
   [scrollview setContentOffset:CGPointMake(0, 0) animated:TRUE];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T09:19:48.193

```
-(IBAction)btn1_Clicked:(id)sender{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    yourScrollView.frame=CGRectMake(0, -scrollView.contentSize.height + 360, 320, scrollView.contentSize.height);/// set y (starting point) with your scrollview height
    [UIView commitAnimations];
}

-(IBAction)btn2_Clicked:(id)sender{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    yourScrollView.frame=CGRectMake(0,0 , 320, scrollView.contentSize.height);
    [UIView commitAnimations];
} 
```

# c# - 将数据转换为存储在 object[] 中的变量类型

> ID：13266305
> 
> 赞同：1
> 
> 时间：2012-11-07T09:02:15.823
> 
> 标签：c#, casting

我正在尝试模拟 fortran 从 C# 中的文本文件中读取数据的方式。在fortran中你有类似的东西

```
 READ(60,2005,ERR=9880,END=8000) A,B,C,D
  2005  FORMAT(I8,A20,2F10.3) 
```

A、B、C、D 会根据格式语句自动设置为正确的类型。

我已经尝试过以下方式：

```
 private static void Example(string[] Data, ref object[] Variables)
    {
        for (int i = 0; i < Data.Length; i++)
            Variables[i] = (typeof(Variables[i]))Data;
    } 
```

但甚至无法获得可以编译的代码。

目前我通过传递对象数组中的所有数据来分配变量，就像这样

```
 private static object[] Example(string[] Data)
    {
        object[] output = new object[Data.Length - 1];

        for (int i = 0; i < Data.Length; i++)
        {
            int dummyInt;
            if (int.TryParse(Data[i], out dummyInt))
                output[i] = dummyInt;
            /// Try to parse other possible data types
        }

        return output;
    }

    private static void UseExample()
    {
        object[] values = Example(new string[] { "     356", "Some text           ", "   956.365", "564050.201" });
        int A = (int)values[0];
        string B = (string)values[1];
        double C = (double)values[2];
        double D = (double)values[3];
    } 
```

这被简化了，但本质上是我正在做的事情：确定数据的类型，转换为该类型并将所有字段作为对象传递出去，然后在我分配给保存数据的变量时再次转换。这需要知道会出现哪些变量，如果有很多数据字段，还需要大量额外的编码。

我正在寻找一种方法，可以传入所有应该设置的变量并将它们设置为正确的值，但为此我需要能够将数据转换为适当变量的类型。

这可以做到吗？如果可能，怎么做？

# actionscript-3 - MC内的hitTest

> ID：13266311
> 
> 赞同：0
> 
> 时间：2012-11-07T09:02:28.257
> 
> 标签：actionscript-3

嘿，我正在尝试制作一个打破砖块的游戏，我真的刚刚开始，我现在遇到了一个问题，我有两个 MC，球和砖块都在砖块里面的舞台上，我有代码：

```
addEventListener(Event.ENTER_FRAME,checkHit);

function checkHit (e:Event):void{
if(this.hitTestObject(Ball)){
    trace("HIT!");
} 
```

}

实例名称是正确的，我尝试将 Ball 更改为 stage.Ball，但我发现错误“符号 '1120：访问未定义的属性 Ball。在 hitTestObject 的行上。

为什么？我可以解决这个问题吗？tnx 提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:25:27.887

什么是球？这是 DisplayObject 的继承吗？

球应该是实例值，你是自定义对象。

```
var ball:Ball = new Ball();
addChild(ball);

addEventListener(Event.ENTER_FRAME, checkHit);
function checkHit(e:Event):void
{
    if(this.hitTestObject(ball))
    {
        trace("hit!");
    }
} 
```

显示一个此站点：[如何创建 Brick Breaker 游戏？](http://www.flashgametuts.com/tutorials/as3/how-to-create-a-brick-breaker-game-in-as3-part-1/)

这个网站对你有好处。

# joomla1.5 - 功能多语言 joomla 1.5

> ID：13266320
> 
> 赞同：0
> 
> 时间：2012-11-07T09:03:12.717
> 
> 标签：joomla1.5, joomla-extensions, multilingual

我想知道是否有任何扩展符合我对 joomla 多语言的以下要求：

*   根据位置自动检测语言 (GeoIP)
*   自动翻译内容，无需输入两个或更多翻译内容
*   可以有前缀 url，如 domain.com/en/ 或 domain.com/es/ 等。

请让我知道是否有任何适合上述功能的扩展。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:17:57.757

JoomFish 会自动检测您所在位置的语言，Joomfish 会根据您的需要制作前缀（domain.com/en 或 domain.com/fr），但我相信没有任何扩展可以自动翻译您的内容......

# c# - 访问数据库

> ID：13266324
> 
> 赞同：0
> 
> 时间：2012-11-07T09:03:16.017
> 
> 标签：c#, .net, sql

这是我的问题；我在 godaddy 服务器上有一个托管和发布的数据库。我也发布了我的网站。但是，当我尝试使用 Visual Studio 的工具之一（例如图表、数据视图或任何希望我指定数据源的工具）时，我得到了

```
"error 40: could not open a connection to sql server". 
```

在大多数情况下，我通过编写代码而不是在“.cs”部分使用这些工具来解决这个问题，但现在我需要更新我的数据库模型，我真的不想编写那么多代码。我选择的连接字符串完美运行，它可以从已发布网站的数据库中更新和收集值。但是，当我右键单击模型部分并选择“从数据库更新模型”时，更新向导无法使用相同的连接字符串访问数据库。就像我说的，这个问题出现在每个希望我选择数据源的工具上。

这是关于视觉工作室或其他什么的许可问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:09:41.280

默认情况下，Go Daddy 不允许从您的共享主机帐户以外的任何地方访问您的数据库。如果您在创建数据库时选择该选项，我们允许您从其他位置直接访问数据库。如果您在创建数据库时没有选择此选项，您将永远无法从主机帐户以外的位置连接到它。如果您在创建数据库时未选择此选项并且需要添加该选项，则您必须使用已选择的选项创建一个新数据库。

# android - 在android中处理视频

> ID：13266328
> 
> 赞同：2
> 
> 时间：2012-11-07T09:03:39.640
> 
> 标签：android, video, rgb, video-processing

我试图找出在android上逐帧处理视频（来自文件或相机）的正确方法。我需要获取每一帧并将其转换为 RGB，对其进行处理（每种颜色分别）并将其发送到屏幕。有人做过吗？怎么做（最好没有任何本机代码处理）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:38:48.137

看看[这篇](https://stackoverflow.com/questions/8620560/video-processing-in-android/15099170#15099170)我建议使用[OpenCV for Android](http://opencv.org/platforms/android.html)的帖子。使用 OpenCV，您可以获取 RGB 格式的视频帧并实时单独处理每个组件。

# xml - 使用 XSL 检查 XML 中的元素

> ID：13266331
> 
> 赞同：0
> 
> 时间：2012-11-07T09:03:50.117
> 
> 标签：xml, xslt

因此，我想使用 XSL 在通过 Web 服务发送日期之前对其进行格式化，但我还想检查 DOB 字段是否为空白，它是否保持空白，如果其中有日期，它将继续格式化日期。

现在我已经让 XSL 格式化日期 - 但是我似乎无法让条件正常工作，如果它为空则让它为空

通过 XSL 之前的 XML：

```
<BriefDetails>
    <ObjectID>
        <flt:ObjectType>C1</flt:ObjectType>
    </ObjectID>
</BriefDetails>
<Name>
    <Title>Dr</Title>
    <Forename>Paul</Forename>
    <Surname>Smith</Surname>
    <flt:Preferred>true</flt:Preferred>
</Name>
<ContactEmails>
    <EmailAddress>mail@mail.com</EmailAddress>
    <flt:Preferred>true</flt:Preferred>
</ContactEmails>
<DateOfBirth />
<ContactPostals>
    <AddressNumber>34</AddressNumber>
    <AddressLine>Hopeless Road</AddressLine>
    <AddressLine>Maghera</AddressLine>
    <Postcode>BT74 2TY</Postcode>
    <flt:Preferred>true</flt:Preferred>
</ContactPostals>
<ContactPhones>
    <Number>5545454</Number>
    <flt:Preferred>false</flt:Preferred>
</ContactPhones>
<ContactPhones>
    <Number>5454545</Number>
    <flt:Preferred>false</flt:Preferred>
</ContactPhones> 
```

XSL 之后的 XML：

```
<BriefDetails>
    <ObjectID>
        <flt:ObjectType>C1</flt:ObjectType>
    </ObjectID>
</BriefDetails>
<Name>
    <Title>Dr</Title>
    <Forename>Paul</Forename>
    <Surname>Smith</Surname>
    <flt:Preferred>true</flt:Preferred>
</Name>
<ContactEmails>
    <EmailAddress>mail@mail.com</EmailAddress>
    <flt:Preferred>true</flt:Preferred>
</ContactEmails>
***<DateOfBirth>--</DateOfBirth>***
<ContactPostals>
    <AddressNumber>34</AddressNumber>
    <AddressLine>Hopeless Road</AddressLine>
    <AddressLine>Maghera</AddressLine>
    <Postcode>BT74 2TY</Postcode>
    <flt:Preferred>true</flt:Preferred>
</ContactPostals>
<ContactPhones>
    <Number>5545454</Number>
    <flt:Preferred>false</flt:Preferred>
</ContactPhones>
<ContactPhones>
    <Number>5454545</Number>
    <flt:Preferred>false</flt:Preferred>
</ContactPhones> 
```

在上面你会看到 DOB 为——

正在使用的 XSL：

```
<xsl:template match="DateOfBirth">
    <xsl:element name="DateOfBirth">
        <xsl:call-template name="formatDate">
            <xsl:with-param name="dateParam" select="." />
        </xsl:call-template>
    </xsl:element>
</xsl:template>

<xsl:template name="formatDate">
    <xsl:param name="dateParam" />
    <!-- input format mm/dd/yyyy or m/d/yyyy -->
    <!-- output format yyyy-mm-dd -->

    <!-- parse out the day, month and year -->
    <xsl:variable name="day">
        <xsl:value-of select="substring-before($dateParam,'/')" />
    </xsl:variable>
    <xsl:variable name="month">
        <xsl:value-of select="substring-before(substring-after($dateParam,'/'),'/')" />
    </xsl:variable>
    <xsl:variable name="year">
        <xsl:value-of select="substring-after(substring-after($dateParam,'/'),'/')" />
    </xsl:variable>

    <!-- now print them out. Pad with 0 where necessary. -->
    <xsl:value-of select="$year" />
    <xsl:value-of select="'-'" />
    <xsl:if test="string-length($month) = 1">
        <xsl:value-of select="'0'" />
    </xsl:if>
    <xsl:value-of select="$month" />
    <xsl:value-of select="'-'" />
    <xsl:if test="string-length($day) = 1">
        <xsl:value-of select="'0'" />
    </xsl:if>
    <xsl:value-of select="$day" />
</xsl:template> 
```

我尝试添加一个条件：

```
<xsl:template match="DateOfBirth">
    <xsl:for-each select="DateOfBirth">
        <xsl:if test="string-length(DateOfBirth) != 0">
            <xsl:call-template name="formatDate">
                <xsl:with-param name="dateParam" select="DateOfBirth" />
            </xsl:call-template>
        </xsl:if>
    </xsl:for-each>
</xsl:template>

<xsl:template name="formatDate">
    <xsl:param name="dateParam" />
    <!-- input format mm/dd/yyyy or m/d/yyyy -->
    <!-- output format yyyy-mm-dd -->

    <!-- parse out the day, month and year -->
    <xsl:variable name="day">
        <xsl:value-of select="substring-before($dateParam,'/')" />
    </xsl:variable>
    <xsl:variable name="month">
        <xsl:value-of select="substring-before(substring-after($dateParam,'/'),'/')" />
    </xsl:variable>
    <xsl:variable name="year">
        <xsl:value-of select="substring-after(substring-after($dateParam,'/'),'/')" />
    </xsl:variable>

    <!-- now print them out. Pad with 0 where necessary. -->
    <xsl:value-of select="$year" />
    <xsl:value-of select="'-'" />
    <xsl:if test="string-length($month) = 1">
        <xsl:value-of select="'0'" />
    </xsl:if>
    <xsl:value-of select="$month" />
    <xsl:value-of select="'-'" />
    <xsl:if test="string-length($day) = 1">
        <xsl:value-of select="'0'" />
    </xsl:if>
    <xsl:value-of select="$day" />
</xsl:template> 
```

但这现在去掉了 XML 中的 DOB

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:14:24.223

问题在于您的 IF 条件

```
<xsl:if test="string-length(DateOfBirth) != 0"> 
```

此时您已经定位在**DateOfBirth**元素上，因此这实际上是在当前元素中查找名为**DateOfBirth**的子元素，而不是当前元素本身的值。

```
<xsl:if test="string-length(.) != 0"> 
```

实际上，您似乎也添加了一个不必要的**xsl:for-each**。您的模板应该看起来像这样

```
<xsl:template match="DateOfBirth">
    <DateOfBirth>
        <xsl:if test="string-length(.) != 0">
            <xsl:call-template name="formatDate">
                <xsl:with-param name="dateParam" select="." />
            </xsl:call-template>
        </xsl:if>
    </DateOfBirth>
</xsl:template> 
```

作为旁注，不需要使用**xsl:element**作为静态元素名称，只需直接写出元素即可。

事实上，还有另一种不需要**xsl:if**的方法。您可以让模板中的条件匹配

```
<xsl:template match="DateOfBirth[string-length(.) != 0]">
    <DateOfBirth>
        <xsl:call-template name="formatDate">
             <xsl:with-param name="dateParam" select="." />
        </xsl:call-template>
    </DateOfBirth>
</xsl:template>

<xsl:template match="DateOfBirth">
    <DateOfBirth />
</xsl:template> 
```

XSLT will also match the more specific template first, so the second template will only be matched when **DateOfBirth** is empty. Further more, if you were using the identity transform in your XSLT, you wouldn't actually need the second template at all.

# sql - SQL查询中的子字符串方法

> ID：13266334
> 
> 赞同：3
> 
> 时间：2012-11-07T09:04:01.183
> 
> 标签：sql, sql-server-2005

这是我用来减少字符长度的查询。

这些是一些示例 char("有关可以是的有效 SQL Server 2005 数据类型的更多信息......是一个整数，它指定子字符串的开始位置。开始可以是 bigint 类型。")

如果我给子字符串以将长度固定为 15 。字符的其余部分应该像这样显示（...）

我的 sql 查询是这样的.....

```
select substring('For more information about the valid SQL Server 2005 data types that can be ... Is an integer that specifies where the substring starts. start can be of type bigint.',0,15) from Admin 
```

例如：它应该像这样显示

```
For more information about the valid SQL Server 2005 data. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:10:42.657

```
select substring('For more information about the valid SQL Server 2005 data types that can be ... Is an integer that specifies where the substring starts. start can be of type bigint.',0,58)+'.........' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:07:54.813

你是不是这个意思：

```
select Left('For more information about the valid SQL Server 2005 data', 15)+'...' 
```

指定要显示的字符数作为系统定义函数 LEFT 的第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:11:05.337

你可以使用这样的东西：

```
 select substring('For more information about the valid SQL Server 2005 data types that can be ... Is an integer that specifies where the substring starts. start can be of type bigint.',0,15)+replicate('.', 25) 
from Admin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:12:09.843

如果您希望输出是这样的

```
First_15_letters_ ... _Last_15_letters 
```

那么这是一种方法

```
select 
substring('For more information about the valid SQL Server 2005 data types that can be ... Is an integer that specifies where the substring starts. start can be of type bigint.',0,15) 

+ '...' + 

right('For more information about the valid SQL Server 2005 data types that can be ... Is an integer that specifies where the substring starts. start can be of type bigint.',15)

from Admin; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T09:13:35.330

```
Please, not down from here :
=======================================================
  select substring('For more information about the valid SQL Server 2005 data types that
    can    be ... Is an integer that specifies where the substring starts. start can 
    be of type bigint.',0,15) 
--Not need "from Admin"
===============================================================
select substring(colname,0,15) from Admin
--"from Admin" Need when columnname is required 
```

# javascript - HTML 网站设计，链接在页面上打开较小的窗口

> ID：13266336
> 
> 赞同：0
> 
> 时间：2012-11-07T09:04:08.340
> 
> 标签：javascript, html, window

所以我试着搜索我要找的东西，但我真的找不到我要找的东西，如果有可能的话。

我正在寻找一种使人们在我的网站上单击的链接几乎显示为广告的方法，而不是浏览器中的单独窗口或选项卡，而是当前选项卡本身上的它自己的小窗口。我做了一个图像作为我的意思的一个例子。我不知道它是否有任何好处，但值得一试，我希望它也能够与 Coolmenu 一起使用。如果人们想在新窗口或新标签中打开它们，他们只需右键单击，如下所示：

![截屏](../Images/df4812d7526765177f697d23e33922e9.png)

更新：10:32 7.11 我意识到这两个链接，以及当我在我自己的所有日期表单上搜索一些时，比如 2006-2009，而他们都使用

```
<div id="overlay">
<div>
<p>Content you want the user to see goes here.</p>
</div>
</div> 
```

我想我可以只写 () （如果我错了，请纠正我）以及段落的东西，但是我应该怎么做呢？我应该直接删除它还是更换它？

更新 10:50 7.11 我今天没有更多时间来处理它，但是下次我有时间时，我是否应该在我的页面上发布所有其他 javascript 和 css（只有coolmenu）给你一些想知道我到底想完成什么？再次感谢大家的大力帮助。

12.11 08:05 更新：我无法让它与 Coolmenu 一起工作。如果需要，我可以为coolmenu和window的东西提供我的css和javascript代码，我应该上传一个.txt还是把它放在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:12:10.523

### 模态窗口

我猜你想制作**Modal Windows**。您可以在此处使用本教程轻松做到这一点：[简单的 jQuery 模态窗口教程](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)。

### 截屏：

![简单模式窗口](../Images/5bf802ad03457b5b67a51febf6fac747.png)

### 演示在这里：[演示](http://www.queness.com/resources/html/modal/jquery-modal-window.html)

* * *

### jQuery 对话框

或者你甚至可以使用[**jQuery Dialogs**](http://jqueryui.com/dialog/)，它使用相同的原理，但易于实现。

![jQuery 对话框](../Images/78636ed64c4ecce8c13fc57401573c72.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:07:27.557

Although you don't want to open a new window, this is the quickest way you will get it to work how you want and involves the least amount of javascript.

Code:

```
<a href="#" onclick="window.open ('http://google.com', 'mywindow','location=1,status=1,scrollbars=1, width=100,height=100');">Hi</a> 
```

Parameter 1 is the URL, parameter 2 is the name of the window.

In the 3rd parameter you can pass the following options:

*   **status**: The status bar at the bottom of the window.
*   **toolbar**: The standard browser toolbar, with buttons such as Back and Forward.
*   **location**: The Location entry field where you enter the URL.
*   **menubar**: The menu bar of the window
*   **directories**: The standard browser directory buttons, such as What’s New and What’s Cool
*   **resizable**: Allow/Disallow the user to resize the window.
*   **scrollbars**: Enable the scrollbars if the document is bigger than the window
*   **height**: Specifies the height of the window in pixels. (example: height=’350′)
*   **width**: Specifies the width of the window in pixels.

[For more info click here](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

# spring - 如何将本地 xsd 用于 EhCache 和 Spring

> ID：13266339
> 
> 赞同：10
> 
> 时间：2012-11-07T09:04:23.737
> 
> 标签：spring, ehcache

我们面临一个关于 EhCache 和 Spring 的问题，当我们将 ehcache.xml 中的 XSD 文件指向 [http://ehcache.org/ehcache.xsd](http://ehcache.org/ehcache.xsd)时，一切正常，我们的应用程序可以正确启动。但是我们的服务器无法访问外部网站，所以我们将 XSD 位置更改为本地，如下所示，但应用程序无法启动并出现以下异常（已将 ehcache.xsd 复制到 classes 文件夹，与 ehcache.xml 相同）。我用谷歌搜索了很多解决方案，但仍然无法修复。我需要你的帮助。非常感谢。

春天：3.1.0 EhCache：2.4.2 服务器：Tomcat 6.0 Java：1.6

配置：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="ehcache.xsd"
    updateCheck="false" monitoring="autodetect" dynamicConfig="true"> 
```

例外：

```
2012-11-07 16:54:42,003 WARN [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - <Ignored XML validation warning>
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'ehcache.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(ErrorHandlerWrapper.java:96)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:380)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2440)
    ... more
2012-11-07 16:54:42,007 ERROR [org.springframework.web.context.ContextLoader] - <Context initialization failed>
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 3 in XML document from ServletContext resource [/WEB-INF/classes/META-INF/ehcache.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'ehcache'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    ... more
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'ehcache'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)

    ...  more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-07T09:22:13.920

下载[ehcache.xsd](http://ehcache.org/ehcache.xsd)，将其放在您的配置 xml 文件所在的同一文件夹中。像下面这样修改 xml 头，注意**类路径**前缀：

```
<ehcache
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="classpath:ehcache.xsd"> 
```

这将在开发和生产环境中工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-26T06:18:37.383

通常我设置`xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"`，但这不能在离线环境中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T01:35:13.580

我的解决方法是将此 xsd 文件添加到绝对路径，例如：c:/ehcache.xsd 并指向 ehcache.xml 中的此位置。希望这对面临同样问题的人有所帮助。

仍然期待找到其他解决方案。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T16:36:23.960

就我而言，只需从 http://ehcache.org/ehcache.xsd 下载文件即可[解决](http://ehcache.org/ehcache.xsd)`src/main/resources`问题

```
cd src/main/resources
wget http://ehcache.org/ehcache.xsd 
```

# android - 如何在 jaxrs webservice 上从客户端检索图像

> ID：13266341
> 
> 赞同：1
> 
> 时间：2012-11-07T09:04:37.237
> 
> 标签：android, web-services, cordova, jax-rs

我正在使用 phonegap 构建应用程序。我正在使用 cordova 1.9.0.js 。在应用程序中，我需要将图像发送到服务器。我在这里为客户端使用可用的代码：

[http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)

该代码显示客户端 logcat 中发送的正确字节数，表明文件传输成功。

我将如何在服务器端接收图像。我在服务器端使用基于 jaxrs 的 restfulwebservice。

请就该主题提供帮助，因为我找不到任何东西。谢谢

# python - 客户端服务器上的 Python 游戏

> ID：13266342
> 
> 赞同：0
> 
> 时间：2012-11-07T09:04:41.927
> 
> 标签：python, client

下面是我必须创建的一个简单游戏的 Python 代码，现在我很难分离代码以使用套接字在客户端和服务器上玩游戏。任何帮助，将不胜感激

```
import random
rannum = random.randrange(0,10,1)
print rannum
counter = 0
a=0

while(a==0):
    guess = int(raw_input("What is your guess?: "))
    counter = counter + 1

    diff = abs(guess - rannum)
    if(diff >5):
        print "Way Off!"
    elif(diff >2):
        print "Close!"
    elif (diff>1):
        print "Closer!"
    elif(diff >0):
        print "Even Closer!"

    elif (diff==0):
        print "Correct"
        name = str(raw_input("What is your name?: "))
        print name + " Your score is: "
        print counter
        f = open('high_scores.txt', 'a')
        score = str(counter)
        f.write(name + " " + score + "\n")
        f.close()
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:20:02.217

代码中的客户端接口只是`raw_input`函数和`print`语句。实际上，您需要做的就是将它们转换为`recv`并`send`在套接字上调用，然后您就拥有了一个服务器。或者，更简单地说，将套接字包装进去`makefile`，然后只写和读行：

```
import random
import socket
rannum = random.randrange(0,10,1)
print rannum
counter = 0
a=0

sock = socket.socket()
sock.bind(('127.0.0.1', 12345))
sock.listen(5)
clientsock, addr = sock.accept()
client = clientsock.makefile('r+')

while(a==0):
client.write('What is your guess?: ')
guess = int(client.readline())
counter = counter + 1

diff = abs(guess - rannum)
if(diff >5):
    client.write("Way Off!\n")

… 
```

您甚至可以在不编写客户端的情况下进行测试，只需使用`nc localhost 12345`. （如果您在 Windows 上，则没有`nc`内置的；谷歌“netcat Windows”并为自己获取一份副本。）然后只需查看文档`socket.connect`，您应该能够编写客户端。

现在，您可能想要稍微重新组织一下您的界面。也许客户端应该提供提示并格式化结果（例如，您可以在同一台服务器上拥有不同的英语和西班牙语客户端——或者更好的是，一个好的 GUI 客户端）。为此，您需要为客户端和服务器设计某种协议以用于通信。（事实上​​，即使是上面的简单示例也有一个隐含的协议：每个提示、响应等都由换行符分隔。我通过使用`makefile`和“欺骗”`readline`来自动处理它。但是弄清楚如何分隔消息——换行符、长度——前缀等——只是第一步。）

您可能还需要考虑是否真的要设计一个位于 TCP 之上的“原始”协议，或者使用为您处理低级内容的东西（Web 服务、基于套接字的 JSON-RPC 等） .) 所以你只需要自己编写特定于应用程序的东西。

最后，这是一个非常非常糟糕的服务器。它只接受一个客户端，并且同步进行所有操作，所以如果客户端搞砸了，服务器就无法恢复。真正的服务器需要所谓的“反应器”或“前导器”（您可以使用 构建自己的`select.select`，或使用`asyncore`或第三方之类的东西`twisted`），或者需要为每个`accept`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:19:11.143

这个问题不是很清楚，但是您应该首先尝试定义客户端中的内容和服务器上的内容。在你的情况下，它应该是这样的：

*   客户端上的用户交互（提示和获取值）
*   随机值生成、用户输入验证和服务器上的高分管理

然后你必须考虑客户端和服务器如何通信：你如何开始一个新游戏，管道需要做什么（一个方向的猜测值，另一个方向的猜测质量）......

# ios - Monotouch 中的 UILabel 外观

> ID：13266344
> 
> 赞同：2
> 
> 时间：2012-11-07T09:04:55.037
> 
> 标签：ios, xamarin.ios, uilabel, uiappearance

为什么外观设置不适用于我在 monotouch 6 中的控件？我正在设置属性

```
UILabel.Appearance.Font = UIFont.FromName("Fontname", 16);
UILabel.Appearance.BackgroundColor = UIColor.Clear; 
```

但是当我创建标签时

```
UILabel mLabel = new UILabel(new RectangleF(0, 0, width, height)); 
```

它看起来像默认标签。白色背景和深色文本。如果我直接设置属性它工作正常

```
mLabel.Font = UIFont.FromName("Fontname", 16);
mLabel.BackgroundColor = UIColor.Clear; 
```

给我一个正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:25:28.373

这个问题似乎[不是 MonoTouch 特有的](https://stackoverflow.com/a/11817191/458193)。[从另一个线程](https://stackoverflow.com/a/11839198/458193)
引用约书亚，

> 好的，事实证明您无法使用代理设置任何`UILabel`属性的样式。`UIAppearance`
> 
> 虽然`UILabel`该类符合`UIAppearanceContainer`协议，但对 UILabel.h 的检查表明它的所有属性都没有标记`UI_APPEARANCE_SELECTOR`，这是使用的先决条件`UIAppearance`。

这很烦人。

# sql - 无法将 SQL 查询转换为 Linq

> ID：13266346
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:04:56.487
> 
> 标签：sql, linq, linq-to-sql

请帮助我尝试转换此联接查询。我正在尝试将以下 SQL 查询转换为 LINQ 查询，但无法使其正常工作。谁能帮我解决这个问题？

```
SELECT T1.BoCode, case when T2.qty is null then 0 else T2.qty end 
FROM  
    (SELECT bocode from TABLE1) as T1
left join
    (SELECT cBoCode, sum(qty) as qty    FROM TABLE2 where ncampnurn in 
        (select nurn FROM TABLE3 INNER JOIN TABLE4 ON TABLE3.CampaignCode = 
         TABLE4.CampaignCode  
         where TABLE3.Month = 'Sep12' and TABLE4.ReportGroup = 'testgroup' )
    GROUP BY cBoCode) as T2 
ON T1.BoCode = T2.cBoCode
order by T1.BoCode 
```

我只能做中间部分，然后卡在是否需要使用`Contains`或`Any`.

```
from t3 in table3
join t4 in table4 on t3.CampaignCode equals t4.CampaignCode
where t3.Month == "Sep12" && t4.ReportGroup == "testgroup"
select t3.Nurn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:11:57.690

参考这个

[SQL 到 LINQ 工具](https://stackoverflow.com/questions/296972/sql-to-linq-tool)

或者自己做

[http://www.linqpad.net/](http://www.linqpad.net/)

# php - php,symfony 2 过滤器区分大小写

> ID：13266349
> 
> 赞同：0
> 
> 时间：2012-11-07T09:05:08.967
> 
> 标签：php, symfony

我想忽略过滤器中的大小写，我的代码：

```
if (strtolower(isset($filterObject['name'])) && null !== strtolower(($filterObject['name']))) {
    $queryFilter->addStringFilter("name", ($filterObject['name']));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:16:46.620

如果你想通过小写对象来忽略 addStringFilter 的大小写敏感性，你只需要使用 strtolower($filterObject['name'])。strtolower 将给定的字符串小写。

在那张纸条上，您在 isset 函数结果上使用 strtolower，它不会在那里做任何事情（因为 isset 不返回任何字符串）。

因此，您应该将源代码更改为：

```
if (isset($filterObject['name']) && null !==  strtolower(($filterObject['name']))) 
{
    $queryFilter->addStringFilter("name", strtolower(($filterObject['name'])));
} 
```

顺便说一句，您没有检查的一种情况是 $filterObject['name'] 是否为空（不确定是否可能，因为我不知道您的剩余代码。如果可以，您想添加另一个并进入 if ：

```
&& $filterObject['name'] 
```

这将确保它填充的不仅仅是一个空字符串。因此 if 部分将更改为：

```
 if (isset($filterObject['name']) && $filterObject['name'] && null !==  strtolower(($filterObject['name']))) 
```

# python - Scapy PcapReader 和数据包时间

> ID：13266350
> 
> 赞同：7
> 
> 时间：2012-11-07T09:05:18.590
> 
> 标签：python, capture, pcap, packet-capture, scapy

我正在使用 Scapy 使用脚本读取 PCAP 文件，例如以下（简化）：

```
#! /usr/bin/env python
from scapy.all import *
# ...
myreader = PcapReader(myinputfile)
for p in myreader:
    pkt = p.payload
    print pkt.time 
```

在这种情况下，数据包时间与 PCAP 捕获时间无关，而是从我启动脚本的那一刻开始。我想从`0.0`或相对于 PCAP 捕获开始。

我该如何解决它（可能没有“手动”检索第一个数据包时间并反复使用数学来解决问题）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T10:58:57.223

我看到`pkt.time`在这种情况下使用是错误的。
我应该打印`p.time`。

# matlab - Matlab Bar Graph - 根据符号和大小填充不同颜色的条形图

> ID：13266352
> 
> 赞同：7
> 
> 时间：2012-11-07T09:05:22.297
> 
> 标签：matlab, graph

我正在尝试用不同颜色的条形图中的各个条形来着色，例如蓝色表示正数，红色表示负数。我在互联网上找不到任何有效的东西。我在下面的代码中发现每个条都根据第一个条的值着色，而不是每个条的单独颜色：

```
c1=zeros(32,3);
c2=zeros(32,3);
for i=1:3
    c1(:,i) = linspace(r(i),w(i),32);
    c2(:,i) = linspace(w(i),b(i),32);
end
c= [c1(1:end-1,:);c2];
subplot(2,2,2)

bar(Numbers(end-7:end,1)), shading interp
caxis([-8 8]), colormap(c), colorbar 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:08:08.600

您可以将 bar 对象的属性更改为`-1/0/1`with [sign](http://www.mathworks.nl/help/matlab/ref/sign.html)，然后使用二进制红/蓝颜色图：

```
y=rand(10,1)*3-1.5; % some data

hb=bar(y);
set(get(hb,'children'),'cdata', sign(y) );
colormap([1 0 0; 0 0 1]); % red & blue in rgb 
```

![具有二进制颜色的条形图](../Images/2eceb261b2d59c45dcf03618b9c54c12.png)

[你可以在这里](http://www.mathworks.nl/support/solutions/en/data/1-1T6UHS/)找到更多信息。

编辑：要使其阴影化，您必须将其与[caxis](http://www.mathworks.nl/help/matlab/ref/caxis.html)`cdata`结合适当地设置：

```
y=rand(10,1)*3-1.5; % some data
hb=bar(y);

% the colormap
Mc = 16;
Nc = Mc*2+1; % number of colors, uneven so there is a neutral middle
rgb = [1 0 0;0 0 1];
cmap = [linspace(rgb(1,1),rgb(2,1),Nc)' linspace(rgb(1,2),rgb(2,2),Nc)' linspace(rgb(1,3),rgb(2,3),Nc)' ];
colormap(cmap);

% cdata
c = y;
set(get(hb,'children'),'cdata', c);
cmax = max(abs(c));
caxis([-cmax cmax]); 
```

![带阴影颜色的条形图](../Images/bcec73b837bd4fb540e4199447af7e19.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:17:24.247

```
figure
hold on
bar(1, 1, 'red')
bar(2, -1, 'blue') 
```

# c - 嵌入式系统中的 AT 命令

> ID：13266359
> 
> 赞同：1
> 
> 时间：2012-11-07T09:05:48.623
> 
> 标签：c, parallel-processing, embedded, at-command

我正在使用嵌入式 C 并尝试为 GPRS 终端制作应用程序。我的主要问题是使用 AT 命令。我使用串行线发送 AT 命令，但如果它是一些面向网络的命令，它的响应可能需要时间，因此我有很多等待，而处理器不做任何事情。想法是让这个等待以相同的方式并行完成，就像在不同的线程中一样。有谁知道如何做到这一点，因为我的系统不支持线程？我想使用一些计时器，因为我们有每 5 毫秒调用一次的中断，但我不知道我必须等待多少秒才能等待响应，如果我比较中断中的字符串以检查是否收到所有消息它可以效率很低，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:08:02.583

您可以使用中断，将串行接口配置为在数据可用时中断，或者使用 RTOS 之类的东西，例如[FreeRTOS](http://www.freertos.org/)来运行两个线程，一个用于主代码，另一个用于阻塞和等待串行数据。

更新：根据您的评论，您说您不知道数据的大小，这很好，在中断处理程序中检查终止数据的字节，这是一个*简单而通用*的示例，您应该检查您的示例单片机：

```
void on_serial_char()
{     
  //disable interrupts
  disable_interrupts();

  //read byte
  byte = serial.read();

  //check if it's the terminating byte
  if (byte == END) {
      //set the flag here
      MESSAGE_COMPLETE = 1;
  }

  //add byte to buffer
  buf[length++] = byte;

  //enable interrupts
  enable_interrupts();      
} 
```

并在主循环中检查该标志：

```
...
if (MESSAGE_COMPLETE) {
    //process data
    ...

    //you may want to clear the flag here
    MESSAGE_COMPLETE = 0;

    //send next command
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:23:58.747

您可以简单地在每个 mainLoopCycle 中调用一个 packetHandler。
此处理程序检查串行端口是否有新字符可用。

packetHandler 将逐位构建响应消息，如果消息是完整的（找到 CR LF），则它调用 messageReceive 函数，否则它只是返回到 mainLoop。

```
int main()
{
  init();
  for (;;)
  {
     packetHandler();
  }
}

char msgBuffer[80];
int pos=0;
void packetHandler()
{
  char ch;
  while ( isCharAvailable() )
  {
    ch=getChar();
    msgBuffer[pos++] = ch;
    if ( ch == '\n' ) 
    {
       messageReceived(msgBuffer);
       pos=0;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:40:35.757

听起来你很接近硬件驱动程序。如果是这样，最好的方法是使用 DMA，如果 MCU 支持，则使用 DMA 硬件的标志来确定何时开始解析接收到的数据。

第二个最佳选择是使用 rx 中断，将每个接收到的字节存储在一个简单的 FIFO 中，例如循环缓冲区，然后在收到它们后设置一些标志。可能需要一个用于传入数据的缓冲区和一个用于接收最新的有效数据的缓冲区。

# android - 带有助手的构造函数的麻烦

> ID：13266362
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:05:56.173
> 
> 标签：android, constructor, handler, android-context, sqliteopenhelper

VPAdapter.java

```
public class VPAdapter extends PagerAdapter 
{     
     public static String[] titles;
     public final Context context;
     public int[] scrollPosition;
     JSONArray categories = null; 
     JSONArray newstype = null; 
     JSONObject json;
     DatabaseHandler db = new DatabaseHandler(context)//error:The blank final field context may not have been initialized
...
} 
```

数据库处理程序.java

```
public class DatabaseHandler extends SQLiteOpenHelper {
public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
} 
```

我`VPAdapter.java`想在`DatabaseHandler`任何地方访问，但是构造函数有问题。我应该写它们的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:15:02.990

您不能传递未初始化的变量。在函数的第二行，您声明了上下文变量，但没有为其分配任何值。

最后一行应该写在`VPAdapter`. 构造函数应该得到一个上下文变量。当您调用构造函数时，您可能希望使用应用程序上下文，但您可能还会发送一个活动（活动从上下文继承），但这通常不推荐（但这实际上取决于您的代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:22:57.480

因为您的 Context 为空，所以首先初始化您的上下文，然后您可以将该上下文传递给您的数据库处理程序构造函数。

```
Context context = getApplicationContext(); 
```

或者试试下面的代码

例如，使用您的活动上下文初始化您的上下文。

创建您的 APAdapter 类的构造函数并从您的活动中调用该构造函数。与为数据库处理程序创建的方式相同。

```
public APAdapter(Context context) {
this.context = context;
} 
```

而不是将该上下文传递给您的数据库处理程序。

# jekyll - 如何更改 Jekyll 中的默认订单页面？

> ID：13266369
> 
> 赞同：63
> 
> 时间：2012-11-07T09:06:15.420
> 
> 标签：jekyll, github-pages

[我的博客](http://blog.EverCoding.net)是用 Github 上的 Jekyll 构建的。在导航栏中，默认顺序是页面、消息、关于、档案。我想将列表更改为页面、档案、关于、消息。我该怎么办？

我认为它与下面的代码有关

```
{% assign pages_list = site.pages %} 
```

我认为`site.pages`是我应该改变的，但我不知道如何改变。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2015-11-29T14:37:09.320

您可以像这样创建菜单项的自定义顺序：

1.  在您的页面前面添加订单字段（您可以根据需要命名）

    ```
    ---
    layout: default
    published: true
    title: Page title
    order: 1
    --- 
    ```

2.  获取页面时，应用“排序”过滤器

    ```
    {% assign sorted_pages = site.pages | sort:"order" %}
    {% for node in sorted_pages %}
      <li><a href="{{node.url}}">{{node.title}}</a></li>
    {% endfor %} 
    ```

根据您添加到每个页面的“订单”字段值，您最终会得到一个有序 (ASC) 页面列表。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-05-18T14:49:17.813

更新：一些订购功能似乎已添加到 Jekyll：[https ://github.com/plusjade/jekyll-bootstrap/commit/4eebb4462c24de612612d6f4794b1aaaa08dfad4](https://github.com/plusjade/jekyll-bootstrap/commit/4eebb4462c24de612612d6f4794b1aaaa08dfad4)

更新：查看下面安迪杰克逊的评论——“名称”可能需要更改为“路径”。

这似乎对我有用：

```
{% assign sorted_pages = site.pages | sort:"name" %}
{% for node in sorted_pages %}
  <li><a href="{{node.url}}">{{node.title}}</a></li>
{% endfor %} 
```

`name`是文件名。我将页面重命名为`00-index.md`，`01-about.md`等等。排序工作，但页面是使用这些前缀生成的，特别是对于 00-index.html，这看起来很难看。

为了解决这个问题，我覆盖了永久链接：

```
---
layout: default
title: News
permalink: "index.html"
--- 
```

遗憾的是，这不适用于自定义属性，因为它们不能作为 Page 类的方法访问：

```
{% assign sorted_pages = site.pages | sort:"weight" %} #bummer 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-08T20:25:13.773

导航栏菜单的顺序由中的 HTML 模板决定`_layout`（可能从`_includes`.

听起来您的导航栏是使用液体代码从 site.pages 中提供的页面列表以编程方式生成的

```
{% assign pages_list = site.pages %} 
```

如果您只有少量页面，您可能更愿意手动写出列表。 `site.pages`是 Jekyll 的所有页面的字母列表。没有什么能阻止你只对它进行硬编码：

```
 <div class="navbar" id="page-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">EverCoding.net</a>
          <ul class="nav">
            <li><a href="/pages.html">Pages</a></li>        
        <li><a href="/archive.html">Archive</a></li>
        <li><a href="/about.html">About</a></li>
        <li><a href="/messages.html">Messages</a></li> 
```

而我现在猜想你已经以编程方式生成了该列表，也许是按照 Jekyll-bootstrap 使用流动代码的方式生成的：

```
<div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="{{ HOME_PATH }}">{{ site.title }}</a>
          <ul class="nav">
            {% assign pages_list = site.pages %}
            {% assign group = 'navigation' %}
            {% include JB/pages_list %}
          </ul>
        </div>
      </div>
    </div> 
```

如果您真的想每次都确定菜单，则第二个示例中的液体代码很方便，但是如果您有一个静态顺序的静态菜单，您可能最好像我的第一个示例中那样手动编码，而不是修改液体代码进行排序。

如果你可以链接到 Jekyll 的源代码，而不是发布的博客，我们可以更具体。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-08-19T09:06:22.980

我正在使用 Jekyll v2.5.3，您还可以对实际的降价文件进行编号（以这种方式排序），并且由于您使用的是 Front Matter 块，您仍然可以根据需要保留标题和永久链接。

解析器将以这种方式对您的页面链接进行排序。
IE：

```
01_about.md
02_photos.md
03_projects.md
99_contact.md 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-24T15:25:57.680

我在 _data 目录中创建了 pages.yml 文件，看起来类似：

```
- url: pages/test.html
  title: Pages
  group: navigation
- url: pages/front.html
  title: Front
  group: navigation 
```

我更改了 default.html（从 site.pages 到 site.data.pages）：

```
<ul class="nav">
  {% assign pages_list = site.data.pages %}
  {% assign group = 'navigation' %}
  {% include JB/pages_list %}
</ul> 
```

现在我可以将这个 yml 文件用于菜单。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-02-23T16:22:21.773

您可以查看文档：http: [//jekyll.tips/jekyll-casts/navigation/](http://jekyll.tips/jekyll-casts/navigation/)

**navigation_weight**有很好的例子和解释。

```
---
layout: page
title: About
permalink: /about/
navigation_weight: 10
--- 
```

对于最小值：

```
<div>
     {% assign navigation_pages = site.pages | sort: 'navigation_weight' %}
        {% for p in navigation_pages %}
          {% if p.navigation_weight %}
            {% if p.title %}
            <a class="page-link" href="{{ p.url | relative_url }}">{{ p.title | escape }}</a>
            {% endif %}
          {% endif %}
        {% endfor %}
      </div> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-18T22:16:03.660

你走在正确的道路上。您可以按名为“order”的自定义变量进行排序。

在 header.html 插入和额外的行：

```
{% assign pages_list = (site.pages | sort: 'order') %} 
```

然后在 for 语句中将 site.pages 替换为 pages_list ：

```
{% for my_page in pages_list %}
   {% if my_page.title %}
      <a class="page-link" href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a>
   {% endif %}
{% endfor %} 
```

然后在每个页面的 YAML front matter 中添加“order”，并设置一个合适的值：

```
---
layout: page
title: About
permalink: /about/
order: 0
--- 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-28T02:28:53.460

# 对于最小主题

放：

```
header_pages:
 - pages.md
 - archive.md
 - about.md
 - messages.md 
```

in`_config.yml`覆盖默认顺序。就这样。

最小自述文件：

> ### 自定义导航链接
> 
> 这允许您设置要在导航区域中显示的页面并配置链接的顺序。
> 
> 例如，要仅链接到`about`和`portfolio`页面，请向您添加以下内容`_config.yml`：
> 
> ```
>  - about.md
>   - portfolio.md 
> ```

[`header.html`](https://github.com/jekyll/minima/blob/b5df2ee9eb90c7bca24cd2f7cecf2cb0ea92dace/_includes/header.html)您可以从 minima _includes中查看它在文件中的工作方式。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-12T17:50:15.747

[Jekyll Bootstrap 3](https://github.com/dbtek/jekyll-bootstrap-3)模板要求您包含在`group navigation`Jekyll 标头中。基于@Wojtek 的回答，您可以修改[JB3 的 pages_list](https://github.com/dbtek/jekyll-bootstrap-3/blob/master/_includes/JB/pages_list)以使用此`group`字段进行过滤和排序。

在调用 pages_list 之前，按组排序：

`{% assign sorted_pages = site.pages | sort:"group" %}`

然后，只需更改 pages_list 中的一行：

`{% if group == null or group == node.group %}`-> `{% if group == null or node.group contains group %}`

现在您可以将组指定为`navigation-00`, `navigation-01`，而无需重命名文件或设置任何永久链接，并且您可以免费进行排序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-03T08:37:02.647

前段时间我做了一个[简单的插件](https://gist.github.com/yalp/5643384)`page_order`来根据你可以定义的数组对页面进行排序`_config.yml`：

```
pages_order: ['index', 'summary', 'overview', 'part1', 'part2', 'conclusion', 'notes'] 
```

它在模板中公开`page.prev`和`page.next`允许导航：

```
{% if page.prev %}
 <a id="previous-page" href="{{page.prev}}.html">Previous</a>
{% endif %}

{% if page.next %}
 <a id="next-page" href="{{page.next}}.html">Next</a>
{% endif %} 
```

注意：不适用于 Github 页面。

# php - 我想在 PHP 中使用 Perl 正则表达式

> ID：13266372
> 
> 赞同：5
> 
> 时间：2012-11-07T09:06:25.247
> 
> 标签：php, perl

我想在 PHP 中使用 perl reqexp。

例如，

珀尔：

```
$url =~ qr{https?://([^\/\?&:#]+\.)?example.com}; 
```

PHP：

```
preg_match("/https?:\/\/([^\/\?&:#]+\.)?example\.com/", $url); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T09:09:51.873

You answered your own question? `preg_match` is able to process virtually all of Perl regex syntax. (The "p" is for "Perl".)

Learn more about PHP `preg_match` in its [documentation](http://php.net/manual/en/function.preg-match.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:11:55.983

您使用了正确的功能`preg_match`。现在关于比赛的捕获，您需要传递另一个参数：

```
preg_match("/https?:\/\/([^\/\?&:#]+\.)?example\.com/", $url, $match); 
```

比赛将在`$match[1]`.

# facebook - 如何将我的应用添加到 Facebook 上的收藏夹？

> ID：13266374
> 
> 赞同：3
> 
> 时间：2012-11-07T09:06:29.130
> 
> 标签：facebook, tabs

我创建了一个应用程序，我想在我的 facebook 表上分享它。如何将此应用程序添加到收藏夹，如下图所示：

![在此处输入图像描述](../Images/b100d825c69c7f62c9a7589bf2ce9308.png)

我可以添加事件、笔记、电影和组。它也是选择“搜索更多应用程序”，但如果我选择此选项，它将被重定向到应用程序中心，并且我没有将应用程序添加到我的表的选项。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:57:45.613

如果您编辑应用设置以包含`Page Tab`，它将允许您在页面上使用该应用，但可能需要进行一些更改。例如，粉丝专页应用程序的大小固定为 810 像素宽或 520 像素宽。

应用程序设置页面也可以让您为标签上传自定义图像，例如屏幕截图，但这仅适用于粉丝页面，而不适用于用户个人资料。

# ruby-on-rails - 如何对从数据库返回的记录进行编号？

> ID：13266384
> 
> 赞同：0
> 
> 时间：2012-11-07T09:07:11.440
> 
> 标签：ruby-on-rails, ruby

如果我有从数据库中按日期排序的记录，我想根据记录的排序方式添加一个对应的数字。例如，如果一条记录是按给定日期排序的，我想向它添加一个递增的数字：

```
1). Me
2). You
3). Us 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:12:10.123

用索引遍历它们。例如使用[http://apidock.com/ruby/Enumerable/each_with_index](http://apidock.com/ruby/Enumerable/each_with_index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:12:59.830

使用数组中定义的索引方法

# database - Definition of Reference table

> ID：13266390
> 
> 赞同：4
> 
> 时间：2012-11-07T09:07:34.217
> 
> 标签：database

I have difficult to understand the definition of "Reference table" from the page [http://en.wikipedia.org/wiki/Reference_table](http://en.wikipedia.org/wiki/Reference_table)

Note the third paragraph:

> In the context of database design a reference table is a table into which an enumerated set of possible values of a certain field data type is divested.

Somebody provide me with a better definition or explanation?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T09:10:37.020

I have heard of these more commonly as "lookup tables", which are tables that are only used for looking up information and tend to be static (in that they do not change much or at all during the lifetime of the database).

Examples in many applications are country tables (which list country names and possibly the ISO 2 and 3 letter codes) and currency name tables.

These are tables that are used for looking up data for display purposes and normally have not other purpose (usually just an ID column and a column for the data).

# windows - 500 - Internal Server Error ASP.NET (IIS 7.5)

> ID：13266391
> 
> 赞同：2
> 
> 时间：2012-11-07T09:07:34.857
> 
> 标签：windows, azure, iis-7.5, dotnetnuke

I am now in the process of transferring my servers to windows azure. I created a virtual machine (`2008 R2`) and installed `IIS 7.5`. I then transferred one of the site (`DNN`) and configured it to with it's own `apppool` (4.0) and granted permission for this app pool to read and write.

I have two domains: one internal, which I defined in the HOST file, and one public (mydomain.com). The internal domain works fine however with the external domain I'm getting:

> 500 - Internal server error. There is a problem with the resource you are looking for, and it cannot be displayed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:12:16.177

也许，您还没有在门户上为服务器设置端点以允许 HTTP 流量？换句话说，您是否在 Azure 门户上为此 VM 开放了端口 80？

在此处查看如何操作 - [https://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/](https://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)

# java - How to monitor database connection in java?

> ID：13266393
> 
> 赞同：0
> 
> 时间：2012-11-07T09:07:49.073
> 
> 标签：java, mysql, sql, jakarta-ee

i have created web application using java. In that i am using tomcat server and SQL server. I need to implement watch dog service for monitoring database connection and server connection. I mean if database is not connecting or tomcat server is down then i need to write a code for send a alerting mail to my mail id.

pls someone help me...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:16:57.300

您可以创建一个单独的线程来监控数据库连接。在启动服务器时调用该线程。如果数据库连接失败意味着发送来自该威胁的邮件。

例子 ：

```
 boolean isDBConnected,isServerConnected;
        while(true){                
            isDBConnected=checkDBConnection();
            isServerConnected=checkServerStatus();
            if(isDBConnected && isServerConnected){
                Thread.sleep(100);
            }else{
                sendMail();
                break;
            }
        } 
```

# c# - 检查字符串是否为空的最佳方法是什么？

> ID：13266397
> 
> 赞同：8
> 
> 时间：2012-11-07T09:08:05.043
> 
> 标签：c#, visual-studio-2010, .net-4.0

要检查字符串是否为空，我使用

```
var test = string.Empty; 
if (test.Length == 0) Console.WriteLine("String is empty!");
if (!(test.Any())) Console.WriteLine("String is empty!");
if (test.Count() == 0) Console.WriteLine("String is empty!");
if (String.IsNullOrWhiteSpace(test)) Console.WriteLine("String is empty!"); 
```

1.  上述所有语句产生相同的输出。我应该使用什么最佳方法？

    ```
    var s = Convert.ToString(test);    
    s = test.ToString(CultureInfo.InvariantCulture); 
    ```

2.  同样，这两个语句都做同样的事情。最好的使用方法是什么？

我尝试了调试以及如何对 C# 语句的性能进行基准测试？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T09:19:46.057

首先，这 4 个语句在所有输入上都没有给出相同的输出。尝试 null ，前 3 个将引发异常。并尝试 whithspaces 最后一个会给你一个失败的结果。所以你真的必须考虑你想要什么。最好的方法通常是：

```
string.IsNullOrEmpty
string.IsNullOrWhiteSpace 
```

只有当您这样做几百万次时，您才应该了解如何进一步优化您的代码。

这里有一些测试结果，但这在任何 .net 版本上都可能不同：

1亿次迭代的测试结果：

```
Equality operator ==:   796 ms 
string.Equals:          811 ms 
string.IsNullOrEmpty:   312 ms 
Length:                 140 ms  [fastest]
Instance Equals:       1077 ms 
```

[来源](http://www.dotnetperls.com/empty-string)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T09:18:57.353

我会选择`String.IsNullOrWhiteSpace`或`String.IsNullOrEmpty`。

`Length`,如果是]可能`Count`会失败`Any``test``null``object null reference`

## 更新

除非您确定您的字符串不会为空，否则您必须在测试长度或计数或调用变量上的任何方法之前检查字符串是否为空。

在这些情况下，`.Length`不一样`String.IsNullOrWhiteSpace`

```
string test = "    ";
test.Length == 0;  //false
String.IsNullOrWhiteSpace(test); //true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:12:08.740

据我所知：

`.Any()`: 旨在检查数组中是否存在任何对象。由于 string 是一个 char 数组，所以这很有效。并且是 Linq 的一部分

`.Length`: 旨在为您提供 char 数组的长度。

所以，是的，相同的行为，但意图略有不同。

顺便说一句，你真的应该用它`String.IsNullOrWhitespace`来检查字符串是否为空。至少这是我的偏好，所以如果你有一串很多空白字符，你不必先修剪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T09:32:33.867

对于一个变量，结果是：

1.  `String.IsNullOrEmpty(test)`< `String.IsNullOrWhiteSpace(test)`<< `test.Length==0`<<< `!(test.Any())`≡<code>test.Count() == 0
2.  `test.ToString(CultureInfo.InvariantCulture)`< `Convert.ToString(test)`（10次的顺序）

我使用以下代码片段来测试上述内容。

```
static void Main(string[] args)
    {
        var test = string.Empty;
        System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();
        sw.Start();
        if (test.Length == 0)
        {
            sw.Stop();
            Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        }
        sw.Restart();
        if (!(test.Any()))
        {
            sw.Stop();
            Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        }
        sw.Restart();
        if (String.IsNullOrWhiteSpace(test))
        {
            sw.Stop();
            Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        }
        sw.Restart();
        if (String.IsNullOrEmpty(test))
        {
            sw.Stop();
            Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        }
        sw.Restart();
        if (test.Count() == 0)
        {
            sw.Stop();
            Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        }
        sw.Restart();
        var s = Convert.ToString(test);
        sw.Stop();
        Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        sw.Restart();
        s = test.ToString(CultureInfo.InvariantCulture);
        sw.Stop();
        Console.WriteLine("String is empty!  " + sw.ElapsedTicks);
        Console.ReadKey();
    } 
```

`String.IsNullOrEmpty(test)`正如上面评论中有人指出的那样，事实上是最好的...... :)

# java - 套接字连接超时：规范在哪里？

> ID：13266403
> 
> 赞同：5
> 
> 时间：2012-11-07T09:08:35.010
> 
> 标签：java, sockets, networking, tcp

我的工作环境是我的局域网。

下面的代码示例是用 Java 语言编写的，但我的问题是关于 TCP，而不是编程。

我经历了以下连接超时：

*   ```
     2 ms when connection established 
    ```

*   1 005 毫秒，当主机处于活动状态但未侦听指定的套接字端口时
*   主机关闭时 21 000 毫秒

这个值来自对我的网络的观察，但我认为它存在一个 RFC。

以下是有关超时的一些信息：

*   [RFC 1122](https://www.rfc-editor.org/rfc/rfc1122)
*   [RFC 793](https://www.rfc-editor.org/rfc/rfc793)
*   [Nagle's_algorithm](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)和 TCP_NO_DELAY

你能给我更多的指点吗？

```
@Override
public void run() {
   for( int port = _portFirst; port < _portLast; ++port ) {
      String  host    = "192.168.1." + _address;
      boolean success = false;
      long    before  = System.currentTimeMillis();
      try {
         Socket        socket   = new Socket();
         SocketAddress endpoint = new InetSocketAddress( host, port );
         socket.connect( endpoint, 0 );
         success = true;
         socket.close();
      }// try
      catch( ConnectException c ){/**/}
      catch( Throwable t ){
         t.printStackTrace();
      }
      long duration = System.currentTimeMillis() - before;
      System.err.println( host + ":" + port + " = " + duration );
      _listener.hostPinged( host, port, success, duration );
   }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T09:29:49.880

没有关于连接超时的 RFC。任何 RFC 或其他文档都不可能提前知道任何网络中的普遍情况。

通常，您可以期望成功连接非常快；`ECONNREFUSED`( )差不多`ConnectException: connection refused`一样快；连接超时 ( `ConnectException: connect timeout`) 取决于原因、两端的平台以及介入网络的性质。在 Windows 中，我相信连接超时包括三个连接尝试的总时间，超时时间分别为 6 秒、12 秒和 24 秒，总共 42 秒；在各种 Unix 中，我相信总数更像是 70 秒，这可能是由于 3 次尝试超时 10 秒、20 秒和 40 秒造成的。如您所见，这取决于平台。还有一个问题是，在 Windows 服务器上填充积压队列会导致向传入的 SYN 发出 RST，而在 Unix/Linux 服务器上，这将导致对传入的 SYN 完全没有响应。

您还应该注意，在 Java 中，与多年的 Javadoc 不同：

1.  零连接超时并不意味着无限超时，它意味着平台默认超时，如上图所示不超过约 70 秒；

2.  您不能指定增加平台默认值的连接超时；您只能使用它来降低平台默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:22:49.583

正如您所发现的，您可以在`connect(...)`方法调用中指定超时，如下所示：

```
connect( SocketAddress endpoint , int timeout ) 
```

请记住[“......超时为零被解释为无限超时。”](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#connect%28java.net.SocketAddress,%20int%29) （其中“无限”通常真正意味着“使用操作系统默认值”）。

至于默认值，它们取决于操作系统，但通常还是相当一致的。如果您使用的是 linux 机器，请查看`/proc/sys/net/ipv4/tcp_keepalive*`（但除非您知道自己在做什么，否则不要更改它们 :-)

干杯，

# c# - Entity framework: automatic deletion of parent entity

> ID：13266404
> 
> 赞同：0
> 
> 时间：2012-11-07T09:08:34.967
> 
> 标签：c#, entity-framework

Consider the following model classes:

```
 public class Thing
{
    public int Id { get; set; }
    [Required]
    public Text Subject { get; set; }
    [Required]
    public Text Body { get; set; }
}

public class Text
{
    public int Id { get; set; }
    public string Value { get; set; }
} 
```

The model is simple - each Thing must reference to two Text entities. Each Text entry at any point in time should be referenced only by a single entity of any other type (Thing is not the only one).

Is it possible to configure EF5 to automatically delete all referenced Texts when Thing gets deleted (via `context.Set<Thing>().Remove`), or should it be done with a database trigger?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:15:07.497

您只需要`CASCADE DELETE`在数据库级别进行配置，而不必在实体框架级别做任何特别的事情。

# objective-c - 在没有弱属性的 IOS 4.0 中使用 ARC 真的是一个不错的选择吗

> ID：13266406
> 
> 赞同：2
> 
> 时间：2012-11-07T09:08:54.513
> 
> 标签：objective-c, cocoa-touch, automatic-ref-counting, unsafe-unretained

我正在做一个基于 ARC 的项目。我的项目针对 IOS 4.3。由于版本 < IOS 5.0 没有弱指针，我必须使用`unsafe_unretained`可能会导致悬空指针。

现在我在想，将 ARC 与 unsafe_unretained 一起使用真的是很好的选择吗？或者我应该切换回手动内存管理，因为我的项目是针对 IOS 4.3 的。？

如果在我的情况下使用 ARC 是一个不错的选择，我应该在哪里将 unsafe_unretained 属性设置为 nil？我见过人们在 viewDidUnload 中这样做，但在正常情况下永远不会调用 viewDidUnload。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:16:36.670

> 我必须使用 unsafe_unretained 这可能会导致悬空指针。

是的，但是在 ARC 之前，您还使用了未保留的指针来进行弱引用，因此无论如何它并不比您现在正在做的更糟。

`weak`如果您使用 PLWeakCompatibility 库，我还将补充一点，您可以在针对 iOS 4.3 时使用： [https ://github.com/plausiblelabs/PLWeakCompatibility](https://github.com/plausiblelabs/PLWeakCompatibility)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:21:00.820

> 使用 ARC [不支持弱] 真的是一个不错的选择吗？

是的。ARC 通常被认为是代码简洁、可读性和减少内存相关错误数量的一大优势。我个人的看法是，这是 ARC 的主要优点。

对弱的支持很好，也是 ARC 的另一个优点（在 iOS 5 上）。但有时`__weak`可以隐藏会立即弹出的错误`__unsafe_unretained`。

在我的代码中，每当我使用`weak`属性或变量时，我都必须考虑后果。另一方面，ARC 内存管理的其余部分要求我少思考（这很好）。

# c# - HTML的条件写入

> ID：13266409
> 
> 赞同：0
> 
> 时间：2012-11-07T09:09:01.613
> 
> 标签：c#, asp.net, html

我目前正在尝试创建一个语句，如果它返回 false 则标签将显示在页面上并显示错误消息。我试过使用`Response.Write`没有结果。

```
if (bannedDomainText.Text.Contains("."))
    File.AppendAllText(MapPath(FILE_PATH), "\r\n" + bannedDomainText.Text);
else
    Response.Write("<label>This isn't working!</label>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:14:27.350

**html**

```
<asp:Label ID="ErrorMessage" Visible="false"></asp:Label> 
```

代码

```
if (bannedDomainText.Text.Contains("."))
    File.AppendAllText(MapPath(FILE_PATH), "\r\n" + bannedDomainText.Text);
else
{
    Message.Text =  "This is working";
    Message.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:10:33.340

定义服务器端[**标签**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.aspx)并将消息分配给其文本属性。`You can hide this label or set its text to empty string when you do not want to show the message`.

**在 HTML 中**

```
<asp:Label id="lblMessage" runat="server" /> 
```

**在代码后面**

```
if (bannedDomainText.Text.Contains("."))
    File.AppendAllText(MapPath(FILE_PATH), "\r\n" + bannedDomainText.Text);
else
    lblMessage.Text =  "This is working"; 
```

# java - 在 Spring Security 3.0 中添加自定义过滤器

> ID：13266413
> 
> 赞同：2
> 
> 时间：2012-11-07T09:09:29.037
> 
> 标签：java, spring, spring-security, servlet-filters

我正在尝试添加另一个名为 captcha 验证过滤器的过滤器以及 spring security 的身份验证过滤器。我收到这个错误。我错过了什么？bean初始化失败；嵌套异常是 org.springframework.beans.ConversionNotSupportedException：无法将类型“java.util.LinkedHashMap”的属性值转换为属性“filterChainMap”所需的类型“java.util.Map”；嵌套异常是 java.lang.IllegalStateException：无法将类型 [com.asu.edu.base.vo.CaptchaFilterVO] 的值转换为属性“filterChainMap[/**][3]”所需的类型 [javax.servlet.Filter] : 没有找到匹配的编辑器或转换策略

我的 .java 文件

```
public class CaptchaFilterVO {
    @Autowired
    private ReCaptcha reCaptcha = null;

    public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,
            FilterChain chain) throws IOException, ServletException {       
        String recaptcha_response = req.getParameter("recaptcha_response_field");
        String recaptcha_challenge = req.getParameter("recaptcha_challenge_field");
        String remoteAddress = req.getRemoteAddr();
        ReCaptchaResponse reCaptchaResponse = this.reCaptcha.checkAnswer(
                remoteAddress, recaptcha_challenge, recaptcha_response);
        if (!reCaptchaResponse.isValid()) {

            System.out.println("Captcha worong. Please try again.");        

        } 
        else 
        {
            System.out.println("Captcha correct. No need to try again.");
        }
        chain.doFilter(req, res);
    }
} 
```

springsecurity.xml

```
 <http auto-config="true">
        <!-- intercept-url pattern="/welcome*" access="ROLE_DEPARTMENT_MGR,ROLE_REGULAR_EMP,ROLE_GUEST_USR,ROLE_CORPORATE_MGR" />
        <intercept-url pattern="/admin*" access="ROLE_ADMIN" /-->
        <intercept-url pattern="/login" filters="none" />
        <intercept-url pattern="/resources*" filters="none" />
        <intercept-url pattern="/register" filters="none" />
        <intercept-url pattern="/logout" filters="none" />
        <intercept-url pattern="/loginfailed" filters="none" />
        <intercept-url pattern="/admin*" access="ROLE_ADMIN" />
        <intercept-url pattern="/Dashboard*" access="ROLE_DEPARTMENT_MGR,ROLE_REGULAR_EMP,ROLE_CORPORATE_MGR" />
        <intercept-url pattern="/*" access="IS_AUTHENTICATED_FULLY"/>
        <form-login login-page="/login" default-target-url="/"
            authentication-failure-url="/loginfailed"   />
        <logout logout-success-url="/logout" />
        <custom-filter ref="captchaVerifierFilter" after="FORM_LOGIN_FILTER"/>

</http>     
 <beans:bean id="captchaVerifierFilter" class="com.asu.edu.base.vo.CaptchaFilterVO"/>
 <beans:bean id="springSecurityFilterChain" class="org.springframework.web.filter.DelegatingFilterProxy"/>
<beans:bean id="myfilterChainProxy" class="org.springframework.security.web.FilterChainProxy">
    <filter-chain-map path-type="ant">     
         <filter-chain pattern="/*" filters="springSecurityFilterChain,captchaVerifierFilter"/>
    </filter-chain-map>
 </beans:bean> 
```

编辑：公共类 CaptchaFilterVO 扩展 OncePerRequestFilter 实现 javax.servlet.Filter 现在我扩展了 OncePerRequestFilter 类，但现在我面临崩溃。请提供任何帮助。org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [org.springframework.http.HttpRequest]：指定类是接口 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894) org .springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org .springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:16:43.030

您的`CaptchaFilterVO`过滤器应该实现`javax.servlet.Filter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:28:25.130

您的方法名称 ( `doFilterInternal`) 表明您想要扩展`org.springframework.web.filter.OncePerRequestFilter`。

添加：

```
extends OncePerRequestFilter 
```

在你的班级名称之后。

`OncePerRequestFilter`实现`javax.servlet.Filter`。

和...

```
Filter base class that guarantees to be just executed once per request,
on any servlet container. It provides a doFilterInternal
method with HttpServletRequest and HttpServletResponse arguments. 
```

# objective-c - 闹钟设置

> ID：13266415
> 
> 赞同：1
> 
> 时间：2012-11-07T09:09:31.670
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我正在使用**本地通知**构建警报应用程序。我想在我的应用程序中添加设置。所以为此我创建了整个视图，现在我很困惑如何存储多个警报的数据？我应该使用**NSUserDefaults**还是**sqlite**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:17:37.580

你有所有的选择：

a) 使用 NSUserDefaults 通过做一些简单的 Key 修改，比如像 SettingAttr = Value 这样的键，例如 "MyAlarm0Start" = 10:23:12, "MyAlarm1Start" = ... 例如数字 "MyAlarmCount" = 2 或使用

b) CoreDate 或 SqlLite 的完整数据模型。

我认为这在很大程度上取决于您要存储多少数据。

关于 iTunes 库我不明白你想知道什么。

编辑：从您的媒体库中挑选内容是通过“媒体播放器框架”处理的，请参阅 A [pple Doc IPod Library Access](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingTheiPodLibrary/UsingTheiPodLibrary.html)。

# ios - “无法下载应用程序。 暂时无法安装”

> ID：13266418
> 
> 赞同：9
> 
> 时间：2012-11-07T09:09:51.343
> 
> 标签：ios, xcode, deployment, titanium, in-house-distribution

我现在快死了。我已经尝试了大约 2-3 周来解决这个问题，但仍然没有结果。希望有人能够帮助我：

我正在用 Titanium Studio 编写 iOS 应用程序。直到带有 Xcode 4.2 的 Mac OS X 10.6.8 一切正常。我完全能够在 Xcode 中构建应用程序并在我们的企业内部部署它们。现在我已经升级到带有 Xcode 4.5 的 OS X 10.8.2 并且我们开始了......应用程序仍然可以在 iOS 模拟器上构建和运行，但如果我现在尝试在某些设备上获取应用程序，我会得到一个消息**“无法下载应用程序。-Appname- 此时无法安装”**。这可以通过 OTA 分发和通过带有 USB 电缆的 iTunes 进行。

我几乎搜索了整个互联网，但我发现的所有内容都不起作用。但是，如果我真的尝试通过 Xcode 部署应用程序，它仍然可以工作。

它与那些配置文件和证书有关吗？我已经尝试撤销它们等等，但没有任何帮助。我还安装了全新的 OS X，这样我就有了一个干净的钥匙串。结果相同。

真的很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T15:24:08.283

最后我找到了一个解决方案，当我尝试手动签署应用程序时，控制台抛出了一条错误消息，帮助我再次修复它。

当我升级到 Mountain Lion 并且必须将 xCode 更新到 4.5.2 时，问题就开始了

也许它可以帮助那些在互联网搜索几天后仍然找不到解决方案的人

1.  解压ipa `unzip Application.ipa`

2.  删除 _CodeSignature `rm -r "Payload/Application.app/_CodeSignature" "Payload/Application.app/CodeResources" 2> /dev/null | true`

3.  如果没有正确的配置文件，请替换它 `cp "ProvisioningProfile.mobileprovision" "Payload/Application.app/embedded.mobileprovision"`

4.  当我尝试手动退出应用程序时，我遇到的问题是这个错误： `"object file format unrecognized, invalid, or unsuitable"`

    修理它 ：

    `export CODESIGN_ALLOCATE="/Applications/Xcode.app/Contents/Developer/usr/bin/codesign_allocate"`

5.  退出应用程序 `/usr/bin/codesign -f -s "iPhone Distribution: Company Name" --resource-rules "Payload/Application.app/ResourceRules.plist" "Payload/Application.app"`

6.  压缩它 `zip -qr "Application.resigned.ipa" Payload`

谢谢

1.  [这个](https://stackoverflow.com/questions/6896029/re-sign-ipa-iphone)关于如何手动签署应用程序的问题，
2.  让我出错的控制台
3.  [这篇文章](http://mobiledevelopertips.com/mac-osx/code-signing-error-object-file-format-unrecognized-invalid-or-unsuitable.html)帮助我修复了错误
4.  苹果让我们的生活变得太艰难

* * *

更新似乎代码设计的位置已经改变。新的路径将是

```
export CODESIGN_ALLOCATE="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate" 
```

[*取自[这个答案](https://stackoverflow.com/a/18768869/1487756)*]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T01:50:10.717

我有同样的“无法下载应用程序。'Appname'目前无法安装”消息，并花费数周时间检查和更新证书、重建、重新进行 OTA 分发等。事实证明，我只是没有将 .mobileprovision 文件添加到项目中。以防万一这对任何人都有帮助……</p>

# ios - adding CocoaLibSpotify

> ID：13266420
> 
> 赞同：3
> 
> 时间：2012-11-07T09:09:58.627
> 
> 标签：ios, cocoalibspotify-2.0

I'm having trouble adding `CocoaLibSpotify` to my IOS XCode project...

1.  Dowloaded cocoalibspotify-master
2.  Ran CocoaLibSpotify iOS Library successfully (sample projects also run successfully)... trying to generate the libCocoaLibSpotify.a file?
3.  Added CocoaLibSpotify iOS Library-Prefix, CocoaLibSpotify iOS Library, and SPLoginResources
4.  Also followed instructions to add frameworks from here: [https://github.com/spotify/cocoalibspotify](https://github.com/spotify/cocoalibspotify)

Right now my build simply fails, I've tried a few other things (importing more of the files etc) and still it fails. All of the header files in are in red, so they obviously aren't being included somehow.

Can someone give step by step instructions on this process?

# c# - SQL Server 减去一定的百分比

> ID：13266422
> 
> 赞同：0
> 
> 时间：2012-11-07T09:10:26.597
> 
> 标签：c#, .net, sql-server, subtraction

我试图将我的价格的一定百分比减去一个 AS 列。

```
SELECT TOP 2 *, price - (price * (discount/100)) AS discountedPrice 
FROM products 
WHERE discount != 0 
```

但这似乎行不通。我做错了什么？

我想要这样，假设价格是 500，折扣是 20。然后它必须减去这 20 作为 500 的百分比。

所以 500 - 20%，只是 SQL Server 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:12:16.143

你正在划分整数：20/100 是 0，而不是 0.2

尝试除以 100.0

```
SELECT TOP 2 
*, 
price - (price * (discount/100.0)) AS discountedPrice 
FROM products 
WHERE discount != 0 
```

如果您希望折扣价是一个整数...

```
SELECT TOP 2 *, 
CONVERT(int, price - (price * (discount/100.0))) AS discountedPrice 
FROM products
WHERE discount != 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:13:36.697

**参考**：[链接](http://bugs.mysql.com/bug.php?id=9440)

```
SELECT TOP 2 *, price - (price * (discount/100.0)) AS discountedPrice FROM 
products WHERE discount != 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:14:46.863

我假设折扣是一个整数，那么你应该在前面加上一个`1.0`将它转换为浮点数。

```
price - (price * (1.0 discount/100)) 
```

# c# - Windows 8 应用程序和对文件系统的访问

> ID：13266423
> 
> 赞同：3
> 
> 时间：2012-11-07T09:10:26.380
> 
> 标签：c#, windows-8, file-access

我在我的项目的开始，我想知道我应该使用哪种技术。在我的小研究中，我发现 WinRT API 有点令人愉快，我非常喜欢 UI 中的平铺网格概念。

唯一的问题是我的应用程序会生成大量数据——重要数据——我必须将它们存储在本地机器的某个位置。“某处”是指使用与操作系统不同的分区。

那么，为什么不试试这个简单的代码呢。

```
await Windows.Storage.PathIO.WriteTextAsync(@"d:\tests\test.txt", "Hello World"); 
```

因为`E_ACCESSDENIED`，这就是为什么。Windows 8 打了我一巴掌，大喊“拒绝访问”。

有什么方法可以让我以我喜欢的方式存储我的数据，或者`Win8`是太`h4x0r`证明了？

不，“制作桌面应用程序”不是正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:20:53.607

您需要了解的有关[Windows 应用商店应用程序中的文件访问和权限的](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T11:59:12.680

**首先，在存储配置数据时，您有两个选择：**

```
Windows.Storage.ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings; 
```

它将使用漫游配置文件空间，因此它将存储在云或域配置文件中

```
Windows.Storage.ApplicationDataContainer settings = Windows.Storage.ApplicationData.Current.LocalSettings; 
```

这将使用本地配置文件空间

当然，它们最终都将存储在您的用户 %appdata% 下，但是如果我正确理解所有内容，漫游的实际上将被同步:)

**因此，对于您希望存储在另一个分区上的应用程序数据：**

首先，您需要使用 FolderPicker 选择位置

```
var folderPicker = new Windows.Storage.Pickers.FolderPicker();
//Add some other yada yada to make the picker work as needed
StorageFolder folder = await folderPicker.PickSingleFolderAsync(); 
```

然后您需要将所选文件夹放入访问列表中以记住允许使用此文件夹

```
StorageApplicationPermissions.FutureAccessList.AddOrReplace("PickedFolderToken", folder); 
```

这样，应用程序/系统将跟踪它是否允许在将来使用此文件夹。所选文件夹可能位于您有权访问的文件系统中的任何位置。

最后，如果您不想在下次启动应用程序时取回所选文件夹，您只需执行相反的操作：

```
StorageFolder folder = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync("TargetFolderToken",AccessCacheOptions.FastLocationsOnly); 
```

值 FastLocationsOnly 意味着它只会返回本地驱动器。“TargetFolderToken”与您在 FutureAccessList 中存储文件夹时使用的标识符相同。

# xcode - xcode shortcuts - add text/ limit text till page guide

> ID：13266432
> 
> 赞同：1
> 
> 时间：2012-11-07T09:11:03.113
> 
> 标签：xcode, editor, shortcut

I want to insert a piece of text using a keyboard shortcut or single click instead of copying ans pasting the whole time. Can I do that in Xcode?

also, I have a page guide at x=80 in my xcode editor. Can I limit all my statements till that vertical line? i.e., if I am writing a new line, it should automatically inset a new line character when that page guide is reached. Also, any old code that I wrote I might want to wrap that up within x=80.

# imagemagick - im4java overlay image overlay

> ID：13266435
> 
> 赞同：2
> 
> 时间：2012-11-07T09:11:19.907
> 
> 标签：imagemagick, imagemagick-convert, im4java

I have two images of different sizes. If I want to overlay the smaller one on the bigger one with the given position, how should I use the CompositeCmd to do this?

thanks hammer

# mysql - 为什么我会在 $result 中得到结果

> ID：13266438
> 
> 赞同：1
> 
> 时间：2012-11-07T09:11:39.983
> 
> 标签：mysql

> **可能重复：**
> [当我将 print_r() 应用于 PHP 中的数组时，为什么会得到“Resource id #4”？](https://stackoverflow.com/questions/1777801/why-do-i-get-resource-id-4-when-i-apply-print-r-to-an-array-in-php)
> [我如何从 PHP 中的 MySql 响应中“回显”“Resource id #6”？](https://stackoverflow.com/questions/4290108/how-do-i-echo-a-resource-id-6-from-a-mysql-response-in-php)

为什么我在 $result 中得到“资源 id #6”？想要 1 或 0 :P

```
$sql = "SELECT * FROM members WHERE rchat=1 LIMIT 1";
$result = mysql_query($sql);

if (!$result) {
unlink($fn);
//$fn = $_SESSION['sess_user'].'.txt';
$fn = 'hittaingen.txt';
mysql_query("UPDATE members SET rchat=1 room='" . $_SESSION['sess_user'] . "' WHERE     user='" . $_SESSION['sess_user'] . "'");
}

else {
  //$fn = $result['room'].'.txt';
  $fn = 'hitta.txt';
  mysql_query("UPDATE members SET rchat=2 room='" . $result['room'] . "' WHERE user='" . $_SESSION['sess_user'] . "'");
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:15:43.663

`mysql_query()`只返回结果对象的引用，而不是结果本身。所以为了让你得到 0 或 1，你必须首先使用例如解析结果，[`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php)

```
$row = mysql_fetch_array( $result ); 
```

此外，您绝对应该查看[PDO](http://php.net/pdo)和[mysqli](http://php.net/mysqli)，因为这些`mysql_X()`函数被标记为已弃用，并且通常被认为对 SQL 注入不安全！

# macos - 如何对 NSMetadataQuery 的结果进行分组

> ID：13266439
> 
> 赞同：1
> 
> 时间：2012-11-07T09:11:42.707
> 
> 标签：macos, cocoa, spotlight, nsmetadataquery

我正在对本地数据执行查询（NSMetadataQuery），因为聚光灯执行并根据文件的修改日期对结果进行排序，到目前为止一切正常。但是我无法理解我们如何对结果进行分组，例如我想要一组中的应用程序，其他组中的文档和图像组中的图像（类似于聚光灯的作用），任何人都可以建议如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:42:57.100

将 kMDItemKind 用于您的排序（或子排序）描述符应该可以工作。

# php - jQuery动态类添加

> ID：13266441
> 
> 赞同：0
> 
> 时间：2012-11-07T09:11:46.233
> 
> 标签：php, javascript, jquery, html, css

在我的网站中有一个用于旋转图像的 jQuery 函数，我想在其中添加一个我自己的类以进行一些自定义，实际代码是

```
c.append("<ul class="+b.paginationClass+"></ul>") 
```

我想在其中添加/附加一个类“**测试**”，如下所示

```
c.append("<ul class="+b.paginationClass+" test"+"></ul>") 
```

我放了一个空格，因为在 paginationClass 类之后想要一个空格，但我得到的结果是

```
<ul class="pagination" test="" > 
```

我希望`<ul class="pagination test" >`这样请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:14:01.047

```
c.append("<ul class='"+b.paginationClass+" test'></ul>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:17:23.980

动态的？！

```
c.find('ul.'+b.paginationClass).addClass('test'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:18:36.840

使用 jQuery 以正确的方式创建元素。jQuery 会尽量规范化你的字符串，但是 append 不是 html()。

```
c.append($('<ul></ul>', { 'class': b.paginationClass + ' test' })); 
```

或者：

```
c.html(c.html() + '<ul class="' + b.paginationClass + ' test"></ul>'); 
```

# android - 如何传递 x 和 y 轴值以在 android 中创建条形图？

> ID：13266445
> 
> 赞同：0
> 
> 时间：2012-11-07T09:11:54.920
> 
> 标签：android, bar-chart

如何将 x 轴和 y 轴值传递给条形图以在 android 中创建条形图。这里我首选 AchartEngine 方法在 android 中创建条形图。

但问题是，我得到了这些值，即。来自 Web 服务的 x 和 y 轴值。我已成功使用这些值，但无法将这些值传递给条形图。这该怎么做？请提出建议。

提前致谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:20:16.390

而不是使用`int[] series` 使用

```
 static ArrayList<Integer> series = new ArrayList<Integer>(); 
```

并使用从 Web 服务获取的值更新此系列。

就像你收集网络服务价值一样`int[] webseries`

```
for (int i =0; i< webseries.Lenght; i++)
{ 
 series.add(webseries[i]); //series.add(newvlue);
} 
```

然后每次你添加数据时重新绘制它会在数据可用时动态更新

# mysql - MySQL数据导入自增问题

> ID：13266448
> 
> 赞同：0
> 
> 时间：2012-11-07T09:11:57.243
> 
> 标签：mysql, import, duplicates, auto-increment

我正在尝试将数据导入具有如下字段的表中：

`result_id`

此字段设置为`AUTO_INCREMENT`,`PRIMARY`和`UNIQUE`。

我正在导入的数据在`result_id`字段中的信息与表中的当前数据相同（在某些地方）。SQL 不会让我导入，因为有重复项（这很公平）。

有没有办法让 SQL 附加我正在导入的数据而不使用重复数据`result_id`，基本上是继续 SQL 字段中的数字。我问的原因是我正在导入大约 25,000 条记录，我不想手动删除或更改`result_id`正在导入的数据中的信息。

谢谢，

H。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T10:24:21.750

您如何将数据导入 MySQL？

如果您使用 SQL 查询/脚本，那么应该有类似`INSERT INTO...`. 在一些文本编辑器中打开文件并全部替换`INSERT`为[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html). 这将**忽略**插入具有重复主键的行。或者，如果您想用与导入脚本中相同的主键替换旧数据，则只需使用[`REPLACE`](http://dev.mysql.com/doc/refman/5.5/en/replace.html)查询代替`INSERT`查询。

希望能帮助到你...

**[编辑]**

由于您有主键，因此自动递增。在要导入数据的表中，添加一个虚拟列“dummy”并允许它为 NULL。现在，在您的导入脚本中将有类似 INSERT INTO () values () 的语句。现在在列名列表中将“result_id”替换为“dummy”并执行脚本。执行脚本后，只需从表中删除“虚拟”列。虽然它有点脏和耗时，但会做你的工作。

# javascript - input[type=text] 显示的值与 obj.value 不同

> ID：13266449
> 
> 赞同：0
> 
> 时间：2012-11-07T09:12:00.583
> 
> 标签：javascript, dom

我希望输入类型 = 文本作为输入类型 = 日期。

规格如下：

*   显示的日期应根据当前语言环境（语言属性）
*   获取值应在 ISO 8601 (YYYY-MM-DD) 中
*   设置 DOM 值应在 ISO 8601 中
*   POST 值应为 ISO 8601

假设我有这个字段，使用 nl-NL 语言环境：

```
<input lang="nl-NL" value="2012-11-07"> 
```

我希望该字段显示 7-11-2012。这不是关于格式本身，而是关于 getter 和 setter。您可以覆盖 getter 和 setter：

```
Object.defineProperty(inputObject, "value", {
    get : function(){ 
    },
    set : function(newValue){ 
    }
}); 
```

-

```
<input id="date" lang="nl-NL" value="2012-11-07"> 
```

应*显示*为**7-11-2012**

```
document.getElementById('date').value 
```

应该返回**2012-11-07**

```
document.getElementById('date').value = '2012-11-07' 
```

应再次*显示*为 **7-11-2012**

# windows - 页面堆消耗大量内存

> ID：13266465
> 
> 赞同：0
> 
> 时间：2012-11-07T09:12:40.907
> 
> 标签：windows, debugging, windbg, pageheap

在过去的四年中，我使用 pageheap 来调试堆损坏。一般来说，我没有任何问题。但现在我面临着奇怪的行为。在 win7-sp1-x86 主机中使用具有以下标志的全局标志为我的进程启用页面堆后：-启用堆尾检查-启用无堆检查-启用页面堆

我注意到内存不足异常导致崩溃。!address -summary 命令表示 PageHeap 消耗了大约 90% 的虚拟内存。

这对我来说真的很奇怪，因为据我所知，pageheap 不应该导致如此大的内存开销。

请有人解释这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:32:49.760

当运行启用全页堆的应用程序时，为每个“malloc”分配 2 个页面 (4kb)。当内存被释放时，这些页面（或者可能只是第一个）仍然是“保留的”：它们不占用任何物理或页面文件内存，但是虚拟地址范围不可用，并且在以下情况下引发访问冲突试图访问此内存。这允许捕获 read-after-free 类型的错误。因此，即使您为每个 malloc 正确调用 free，应用程序的虚拟地址空间也会不断增加。

# version-control - 如何在 mks 完整性的动态历史视图中自动聚焦工作副本？

> ID：13266466
> 
> 赞同：1
> 
> 时间：2012-11-07T09:12:40.893
> 
> 标签：version-control

在工作中，我使用 MKS Integrity 进行版本控制（和 PLM）。我想知道是否有可能在成员/项目历史视图中自动关注一些合理的东西，比如工作副本或成员修订（我已将其设置为“动态”）。目前，当我选择新成员时，它总是在或多或少随机的位置打开。然后我必须四处滚动才能找到我的工作副本——这真的很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:55:08.710

无法让 MKS在某个位置打开*图形历史视图。*但是，我刚刚发现有一个*列表*历史视图，这对我来说感觉更方便。您可以更改`Intial View`下`File -> Edit Preferences -> Configuration Management -> Views -> Member History View`（和`... Project History View`分别）。在列表视图中，事情被清楚地排序并且可以更快地找到特定的修订（工作/成员修订在行首用符号标记）。 **注意：**更改历史视图的设置时，必须关闭所有历史视图，否则不会应用更改

# c# - 将标头添加到简单 Web 服务请求

> ID：13266468
> 
> 赞同：3
> 
> 时间：2012-11-07T09:12:46.807
> 
> 标签：c#, web-services, header, .net-4.5, service-reference

我有一个控制台应用程序，只需单击写入并使用“添加服务引用”即可添加 Web 引用，然后我的 .Config 文件更改为：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="FServiceSoapBinding" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://ServiceAdd/FService" binding="basicHttpBinding"
                bindingConfiguration="FServiceSoapBinding" contract="MyReference.MService_"
                name="FServicePort" />
        </client>
    </system.serviceModel>
</configuration> 
```

所以，一切都很好，似乎我可以成功使用该服务，但服务文档说我需要在请求的标题上设置用户名和密码，这是文档的示例：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:web="http://namespace.com/">
  <soapenv:Header>
    <Account>
      <username>user</username>
      <password>password</password>
    </Account>
  </soapenv:Header>
  <soapenv:Body>
    <web:oneofservicemethods>
      <items>
        <item>...</item>
      </items>
    </web:oneofservicemethods>
  </soapenv:Body>
</soapenv:Envelope> 
```

那么如何将用户名和密码添加到标题中？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T08:15:18.240

对于添加静态标头，只需在 .config 文件中添加端点部分，因此将端点更改为：

```
<client>
    <endpoint address="http://ServiceAdd/FService" binding="basicHttpBinding"
     bindingConfiguration="FServiceSoapBinding" contract="MyReference.MService_"
     name="FServicePort" >
        <headers>
            <Account>
                <username>user</username>
                <password>password</password>
            </Account>
        </headers>
    </endpoint>
</client> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:11:50.567

如果我理解正确，您想在请求的标题上设置用户名和密码。您可以通过使用`WCF Extensibility – Message Inspectors`with来实现`IClientMessageInspector.BeforeSendRequest`。

创建一个实现`IClientMessageInspector`. 在 BeforeSendRequest 方法中，将您的自定义标头添加到传出消息中。

请看[这个](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)，[这个](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx)和[这个](https://stackoverflow.com/questions/964433/how-to-add-a-custom-header-to-every-wcf-calls)

# maven - 如何使用命令行从 Maven 构建中排除某些模块

> ID：13266470
> 
> 赞同：65
> 
> 时间：2012-11-07T09:12:52.610
> 
> 标签：maven, maven-module

有没有办法从大型反应堆构建中排除某些模块，类似于 -pl ？

以下是一些持久的方法：

[如何从 Maven 反应器构建中排除模块？](https://stackoverflow.com/questions/5539348/how-to-exclude-a-module-from-a-maven-reactor-build)

我想从 shell 来做，或者至少不修改 pom，我不允许改变它。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2014-04-01T10:48:22.370

Maven 3.2.1 已经添加了这个特性，你可以使用来指定你想要的确切项目（或者排除你不想要的项目）`-pl`或者`--projects`这里是如何排除两个：

```
-pl "!<modulename>,!<modulename2>" 
```

排除某些模块。这可以是您想要包含/排除的值的逗号分隔列表。

**更新** Windows用户以下

```
> mvn clean [package|install] --projects \!groupId:artifactId 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-12-16T13:20:19.147

对已接受答案的另一条评论，在 bash 中运行命令时不要忘记转义感叹号：

```
> mvn clean install -pl \!module,\!module/submodule,\!groupId:artifactId 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-14T10:06:58.567

正如 Yogesh_D 所写，可以使用 maven 3.2.1+ 的 -pl 参数来完成

这是一个例子：

```
> mvn clean install -amd -pl !module,!module/submodule 
```

您需要手动列出每个子模块（和子子模块等），它不会递归地排除它们。使用斜线分隔包。它是文件夹路径，而不是组或工件 ID。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-08T08:02:47.493

我不相信这在命令行中是可能的。在 maven3 中有一个针对这件事的开放功能请求（[https://issues.apache.org/jira/browse/MNG-5230](https://issues.apache.org/jira/browse/MNG-5230)）。

看起来此时您唯一的选择是修改 pom 并创建一个新的构建配置文件，其中仅包含您要构建的模块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-15T19:23:30.360

`!`您可以使用减号代替感叹号`-`。

```
mvn clean -pl -module1 
```

您还可以排除多个模块。

```
mvn clean -pl -module1,-module2 
```

或者

```
mvn clean -pl -module1 -pl -module2 
```

经测试：

*   阿帕奇 Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T20:33:14+02:00)
*   Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)

排除的模块必须在当前项目的reactor中，所以我们不能排除不存在的模块。

```
mvn clean -pl -no-existing-module 
```

目前将失败 - [https://issues.apache.org/jira/browse/MNG-7033](https://issues.apache.org/jira/browse/MNG-7033)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-20T14:03:14.693

2019 年是

```
mvn install -pl !:module1 
```

（Windows 10 命令行）

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-10-03T07:50:52.120

逗号分隔的模块名称用双引号括起来。例如：：

```
mvn install -pl "!Module1, !Module2" 
```

# android - 展开 ExpandableListView 是如何发生的？

> ID：13266471
> 
> 赞同：0
> 
> 时间：2012-11-07T09:12:55.787
> 
> 标签：android, expandablelistview

我继承了一些带有自定义适配器的可扩展列表视图的代码。我试图找出扩展事件的注册位置，以便可以使用另一个组件触发它。我在可扩展列表视图中看不到该组的任何侦听器。从我在日志中使用打印语句可以看出，当我点击分组时，getGroupView() 会被调用。但是，我看不到该方法在哪里被调用或它是如何被调用的。

这是自定义适配器类..

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

        private String[][] teams;
        private String[] league;
        private final Context context;
        private ImageView imageViewUser;

        public MyExpandableListAdapter(String[] groups, String[][] children, Context context) {
            this.context = context;
            this.teams = children;
            this.league = groups;
        }

        public Object getChild(int groupPosition, int childPosition) {
            return teams[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

         public int getChildrenCount(int groupPosition) {
         return teams[groupPosition].length;
         }

         public TextView getGenericView() {
             AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
             ViewGroup.LayoutParams.FILL_PARENT, 64);

             TextView textView = new TextView(context);
             textView.setLayoutParams(lp);
             textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);

             textView.setPadding(56, 0, 0, 0);
             return textView;
         }
         public boolean areAllItemsEnabled() {
                return false;
            }
         public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view, ViewGroup parent) {
             if (view == null) {
                    LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
                    view = inf.inflate(R.layout.child_row, null);
                }
             view.setFocusable(false);
             view.setClickable(false);
             TextView textView = (TextView) view.findViewById(R.id.grp_child);
             textView.setFocusable(false);
             textView.setClickable(false);
             textView.setText(getChild(groupPosition, childPosition).toString());
             //final ImageView imageView;
             //imageView = (ImageView) view.findViewById(R.id.imageViewChild);
            // imageView.setImageResource(android.R.drawable.ic_menu_gallery);
             //imageView.setTag(new ChildPosition(groupPosition,childPosition));
             //imageView.setOnClickListener(new OnClickListener(){

                    /*public void onClick(View arg0) {
                        // TODO Auto-generated method stub
                        ChildPosition realPosition = (ChildPosition) imageView.getTag();
                        Log.d("Shimmer","Click" + "position: " + realPosition.mGroupPosition + " " + realPosition.mChildPosition);
                    }

                 });*/
             return view;
         }

         public Object getGroup(int groupPosition) {
             System.out.println("Group Clicked!S");

         return league[groupPosition];
         }

         public int getGroupCount() {
         return league.length;
         }

         public long getGroupId(int groupPosition) {
         return groupPosition;
         }

         public View getGroupView(int groupPosition, boolean isExpanded,View view, ViewGroup parent) {
             //TextView textView = getGenericView();

             System.out.println("I AM HERE!!!!");

             if (view == null) {
                    LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
                    view = inf.inflate(R.layout.group_row, null);
                }
             TextView textView = (TextView) view.findViewById(R.id.row_name);
             textView.setText(getGroup(groupPosition).toString());
             final ImageView imageView;
             imageView = (ImageView) view.findViewById(R.id.imageView1);
             imageView.setImageResource(R.drawable.expand);
             imageView.setFocusable(false);
             imageView.setClickable(true);
             imageView.setTag(groupPosition);

             imageViewUser = (ImageView) view.findViewById(R.id.usericon);
             imageViewUser.setImageResource(R.drawable.user_one);

        /*   if (view == null) {
                    LayoutInflater inf = (LayoutInflater) this.getSystemService(this.LAYOUT_INFLATER_SERVICE);
                    view = inf.inflate(R.layout.expandlist_group_item, null);
                }*/

return view;
         }

public boolean isChildSelectable(int groupPosition, int childPosition) {
         return true;
         }
         public boolean hasStableIds() {
         return true;
         }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:22:02.083

您是否尝试模拟对组的单击，如下所示：

```
groupView.performClick(); 
```

?

编辑：

```
public View getGroupView(int groupPosition, boolean isExpanded,View view, ViewGroup parent) {
    System.out.println("I AM HERE!!!!");

    ...

    if (groupPosition == thePositionIWantToAutomaticallyExpend) {
        view.post(new Runnable() {
             @Override
             public void run() {
                view.performClick(); // This will simulate a user clicking on the view
             }
        });
    }
} 
```

# html - 在移动 Safari 上自动播放音频

> ID：13266474
> 
> 赞同：22
> 
> 时间：2012-11-07T09:13:08.100
> 
> 标签：html, audio, mobile-safari, autoplay

在我被烧死之前，我知道这目前不起作用，因为 Apple 担心自动下载音频文件。

但是，我的问题是：有没有人找到一个巧妙的解决方法？我只想在游戏启动时播放启动声音，目前必须等待用户单击某处才能播放音频。你们中的一个聪明的家伙现在一定已经完成了这个工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T09:24:24.833

没有机会让自动播放在移动浏览器中工作。Android 和 iOS 不允许这样做，我个人认为这是一个可行的限制！想象一下，您将在开始时打开播放和丑陋的声音的每一秒网站！

但是你可以做一些小技巧，这样用户就不会注意到他当前为你的应用程序启动了音频：

1.  您将需要用户交互来启动您的音频。因此，您的应用程序或游戏可能有一个开始屏幕或欢迎按钮，需要单击才能进入主菜单或开始游戏。绑定到用户事件（接受的事件是：“click”、“touchend”、“doubleclick”和“keydown”）并为您的`<audio>`.

2.  绑定到`<audio>`. 当您的源准备好播放时触发此事件。在这里，您现在可以调用 play()、pause() 或等待其他交互。因此音频已准备就绪，但现在您可以完全控制何时开始或停止声音。

3.  I also advise you to use audio sprites on mobile clients. iOS (and Android?) internally implemented audio support through a Singleton. That means that you cannot, like in desktop browser, have 10 audio elements and play differents sound at once. You can only play one file! So changing the source for different sounds takes to much time. With an audio sprite you can start your sprites when the user first interact with your website or game. Pause your sprite and when you need to play sound you have to set the currentTime to the beginning of the sprite and pause the sprite when currentTime of your file reaches the end of your sprite. There is an timeupdate Event where your can check the currentTime of your sprite.

If you are more interested I can prepare my javascript audio sprites player for you!!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T22:04:47.513

到目前为止，我看到的唯一解决方案是创建一个 shell 应用程序并将 Web 应用程序放在 UIWebView 中。

[http://flowz.com/2011/03/apple-disabled-audiovideo-playback-in-html5/](http://flowz.com/2011/03/apple-disabled-audiovideo-playback-in-html5/)

```
UIWebView.allowsInlineMediaPlayback = YES;
UIWebView.mediaPlaybackRequiresUserAction = NO; 
```

我也很想知道如何在一个普通的网络应用程序中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T02:06:44.010

I believe I just solved this for my own app.

The steps,

Controller loads up,

Then.... in viewDidLoad

have your web view load the HTML : loadHTMLString:htmlFile baseURL:[self getBasePath]];

THEN... set mediaPlaybackRequiresUserAction = NO on the webview.

If you set it too soon, I think the load for the html resets it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-01T07:54:56.917

I have a bot chat app that has voice messages and I needed them to be autoplayed whenever needed ... so here is what worked for me in my angular app :

just attach a click eventlistener to document and call `player.load()`, after that whenever you set `player.src = x;` it will autoplay.

`<audio id="voicePlayer" controls autoplay playsinline #voicePlayer></audio>`

```
@ViewChild('voicePlayer', { read: ViewContainerRef }) voicePlayerRef: ViewContainerRef;

...

  ngAfterContentInit(): void {
    this.voicePlayer = this.voicePlayerRef.element.nativeElement;
    document.addEventListener('click', this._onDocumentClick.bind(this));
  }

  _onDocumentClick() {
    this.voicePlayer.load();
    document.removeEventListener('click', this._onDocumentClick);
  }

...

this.voicePlayer.src = 'x'; 
```

# c# - 缺少 Windows Live Tile 的更大/更小选项

> ID：13266475
> 
> 赞同：0
> 
> 时间：2012-11-07T09:13:08.427
> 
> 标签：c#, windows-8, microsoft-metro

我指的是[应用程序磁贴和徽章示例](http://code.msdn.microsoft.com/windowsapps/app-tiles-and-badges-sample-5fc49148)

通过运行示例并右键单击图标，我意识到我可以有更大/更小的选项。

![在此处输入图像描述](../Images/d726fbed91d0a9fa891450a6acb55e61.png)

但是，对于我自己的项目，我找不到这样的选项。

![应用磁贴和徽章示例](../Images/948ce82bc47a73a74bb3ec65ada40b11.png)

我浏览了项目示例中的所有设置，但无法找出差异。我想让我的项目有更大/更小的选项。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:33:40.913

您需要在应用清单中定义一个宽徽标图像（310 x 150 像素）：

![应用清单页面](../Images/d6d8ed3ba93e40c5633f5d234529eead.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T19:12:46.960

我认为您指的是动态瓷砖。如果您使用动态磁贴，您可以一次添加多个定义。一个必须大，一个必须小才能支持两者。

这是每个的xml，添加两个只需在绑定下添加另一个节点：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)

两者的例子：

```
 string image = String.Format("<tile>" +
                                        "<visual>" +

                                            "<binding template=\"TileWidePeekImageCollection06\">" +

                                                "<image id=\"1\" src=\"ms-appx:///Assets/mainApp_large_icon.png\" alt=\"alt text\"/>" +
                                                "<image id=\"2\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<image id=\"3\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<image id=\"4\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<image id=\"5\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<image id=\"6\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<text id=\"1\">mytext</text>" +

                                            "</binding>" +

                                            "<binding template=\"TileSquarePeekImageAndText04\">" +
                                                "<image id=\"1\" src=\"ms-appx:///Assets/Logo.png\" alt=\"alt text\"/>" +
                                                "<text id=\"1\">testtext</text>" +
                                            "</binding>" +

                                        "</visual>" +
                                      "</tile>"); 
```

# python - 运行没有图形的莎乐美脚本

> ID：13266480
> 
> 赞同：6
> 
> 时间：2012-11-07T09:13:28.270
> 
> 标签：python, dump

我从 Salome（转储）导出了一个脚本，我想在 python 中运行它（我正在做一些几何操作，我不需要任何图形）。所以我删除了所有的图形命令，但是当我尝试启动我的 python 文件时，python 找不到 salome 库。

我试图在 PYTHONPATH 和 LD_LIBRARY_PATH 中导出 salome 路径（'install_path'/appli_V6_5_0p1/bin/salome/），但它仍然不起作用。

我也想知道是否可以只使用geompy库而不使用salome，如果可以的话，我怎样才能只安装geompy库？（我需要在只有 8gb 内存的无人机上启动一些 geompy 脚本，所以我安装的东西越少越好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-03T11:30:43.757

我对你有类似的愿望，但经过大量搜索，我最终得出结论，我们都想做的事情并不完全可能。

为了在没有 GUI 的情况下在命令行上运行 salome 脚本，请使用

`salome -t python script.py` 或者干脆 `salome -t script.py`

为了运行一个 salome 脚本，您必须使用 salome 可执行文件调用它。如果没有已编译的程序，您似乎无法使用 salome 库（通过将它们导入到 python 脚本中，然后使用 调用`python script.py`）。salome 使用的可执行文件包含平台完成其工作所需的大部分内容。

这让我很沮丧，但我找到了解决方法；举个简单的例子，如果你有一个 salome 脚本，你可以从另一个 python 程序中调用 salome 可执行文件 `os.system("salome -t python script.py")`

但是现在你有一个问题；salome 不会自动终止会话，因此如果您多次运行上述命令，您的系统将被多个正在运行的 salome 进程实例堵塞。这些可以通过运行在你的 salome 安装文件夹中找到的 killSalome.py 手动杀死。但要小心！这将杀死您计算机上运行的*所有*salome 实例！如果您同时运行多个模型生成脚本或者您还打开了 salome GUI，这将是一个问题。

显然，更好的方法是让您的脚本在使用后杀死每个特定的 salome 实例。以下是一种方法（可执行文件等的确切路径需要根据您的安装进行更改）：

```
# Make a subprocess call to the salome executable and store the used port in a text file:
subprocess.call('/salomedirectory/bin/runAppli -t python script.py --ns-port-log=/absolute/path/salomePort.txt', shell=True)

# Read in the port number from the text file:
port_file = open('/absolute/path/salomePort.txt','r')
killPort = int(port_file.readline())
port_file.close()

# Kill the session with the specified port:
subprocess.call('/salomedirectory/bin/salome/killSalomeWithPort.py %s' % killPort,shell=True) 
```

编辑：对 python os 命令的错字更正。

EDIT2：我最近发现，当端口日志文件（此处为“salomePort.txt”但可以任意命名）仅给出其相对路径时，会遇到此方法的问题。似乎必须为其提供完整的绝对路径才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-04T20:18:08.663

根据[莎乐美常见问题解答](http://www.salome-platform.org/user-section/faq/faq#_faq_004_07/%22Salome%20FAQ%22)：

> 要在没有 GUI 的情况下启动 SALOME，请使用“<code>runSalome –t”命令：只启动必要的服务器（没有 GUI）。然后要启动交互式 Python 控制台（例如，为了能够加载 TUI 脚本），您需要使用`--pinter`选项

要仅使用选定的模块启动 Salome：

> 要启动一组选定的 SALOME 模块，请使用命令“runSalome --modules=XXX,YYY”，其中 XXX 和 YYY 是模块的名称。您可以使用 -h 命令显示 runSalome 脚本的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T18:05:02.623

如果您在 windows 平台上使用 salome，请使用以下

```
salome_folder\WORK>run_salome.bat -t script_file.py 
```

# jsp - 如何使用 PHPStorm 在 JSP 文件中格式化 HTML？

> ID：13266482
> 
> 赞同：1
> 
> 时间：2012-11-07T09:13:34.247
> 
> 标签：jsp, code-formatting, phpstorm

我正在使用**PHPStorm 4.0.3**，并且正在开发一个包含 JSP 文件的项目。改变ide不是一种选择。在代码格式化方面，我希望 PHPStorm**将 JSP 文件视为 HTML 。**

要格式化 HTML 代码，我选择整个内容并单击**菜单项 "Code" --> "Reformat Code"**。这适用于 html 文件，但不适用于 JSP。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:00:01.267

要将 JSP 文件视为 HTML，您可以更改`File`|中的映射。`Settings`| **文件类型**，添加`*.jsp`到`HTML Files`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T05:32:04.327

如果你去 PHPStorm Preferences 中的插件选项页面，有一个名为 Java Server Pages Integration 的插件，它增加了对 JSP 的一些支持。

它在 Settings/Preferences 对话框的 Code Style 节点下添加了一个 JSP 页面。

* * *

我最近开始研究一个使用 JSP 模板的项目，发现当我需要复制和粘贴代码时，PHPStorm 会破坏格式并将所有内容粘贴到每行代码中，每行代码位于左侧 1 个选项卡。

我发现在复制/粘贴时保持现有格式的最佳解决方案是使用该`Paste Simple`选项。使用此选项会导致粘贴的代码使用与复制代码时相同的格式。

![在此处输入图像描述](../Images/cbed947ac5fcf2f7d0190bce3278728e.png)

> [PHPStorm 8.0.2 剪切、复制和粘贴](https://www.jetbrains.com/phpstorm/help/cutting-copying-and-pasting.html)
> 该`Paste Simple`命令有助于将任何剪贴板条目粘贴为纯文本，无需任何分析。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-17T02:33:53.030

你可以在`file types`这里找到：

![在此处输入图像描述](../Images/541c6a04482f9a9e6eb15a35997d1ed4.png)

# asp.net - ASP.NET HTTPHandler 友好的 URL 在 IIS 7 上不能在 POSTBACK 上工作（但在开发机器上工作）

> ID：13266485
> 
> 赞同：1
> 
> 时间：2012-11-07T09:13:43.600
> 
> 标签：asp.net, vb.net, iis-7, httphandler, friendly-url

在 ASP.NET/vb.net 项目中，我使用`httphandlers`以下内容在页面中创建友好 URL `web.config`：

```
<add name="xSearch" verb="*" path="/x*" type="FriendlyURLs.xSearch"/> 
```

该服务器使用以下方式转移用户：

```
HttpContext.Current.Server.Transfer("/xHandlers/search.aspx?friendlyURL=" & id) 
```

一切都在本地机器（Visual Studio 2010，ASP.NET）上运行良好。

但是，在服务器本身上，使用 IIS 7，友好的 URL 可以工作，但回发却不行。

即如果有控件（按钮等），而不是运行他们的子，他们重定向到 `/xHandlers/search.aspx?friendlyURL=xxxxxxxx`

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:01:55.263

好吧，因为我没有收到任何回复...

在这种情况下，我所做的是使用客户端 js 解决它。

# websphere - wsadmin 从本地机器上传文件到远程

> ID：13266486
> 
> 赞同：1
> 
> 时间：2012-11-07T09:13:46.627
> 
> 标签：websphere, wsadmin

我正在尝试自动化部署过程，并且我想使用 wsadmin (jython) 将一些文件上传到 WAS。我的问题是是否可以将文件从我的独立 wsadmin 上传到远程 WAS 服务器。如果是这样，是否可以在应用程序之外的某个地方上传文件（fe./opt/IBM/WebSphere/AppServer/temp）？我不想将它上传到特定的配置文件，而是上传到服务器根目录。

当我部署应用程序时，它会将war/ear 文件复制到WAS，那么是否有一些机制可以上传单独的文件？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:47:18.120

AntAgent 允许您上传任何文件，前提是文件的内容可以适合内存：

[https://www.ibm.com/support/knowledgecenter/en/SSAW57_8.5.5/com.ibm.websphere.javadoc.doc/web/mbeanDocs/AntAgent.html](https://www.ibm.com/support/knowledgecenter/en/SSAW57_8.5.5/com.ibm.websphere.javadoc.doc/web/mbeanDocs/AntAgent.html)

在 wsadmin 中，您需要使用对象`invoke_jmx`的方法`AdminControl`。

```
from java.lang import String
import jarray

fileContent = 'hello!'
antAgent = AdminControl.makeObjectName(AdminControl.queryNames('WebSphere:*,type=AntAgent,process=dmgr'))

str = String(fileContent)
bytes = str.getBytes()

AdminControl.invoke_jmx(antAgent, 'putScript', [String('hello.txt'),bytes], jarray.array(['java.lang.String', '[B'], String)) 
```

之后，您将在 WAS 配置文件的临时目录中找到“hello.txt”文件。您也可以使用相对路径。

# php - PHP-@ in while(@$rows = mysql_fetch_array($result))

> ID：13266487
> 
> 赞同：-2
> 
> 时间：2012-11-07T09:13:52.327
> 
> 标签：php, mysql

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我有一些 php 代码，例如

```
$query="SELECT RollNo,Name FROM student" ;
$result = $mysql->execute_sql_query($query);
while(@$rows = mysql_fetch_array($result))
{
        $studentArray[] = array("rollNo" => $rows['RollNo'], "name" => $rows['Name']);      
 } 
```

我的疑问是为什么在行中使用@

而(@$rows = mysql_fetch_array($result))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:16:02.550

它抑制错误消息 - 请参阅PHP 手册中的[错误控制运算符。](http://us3.php.net/manual/en/language.operators.errorcontrol.php)

# filter - Devexpress Gridview 过滤器控件

> ID：13266492
> 
> 赞同：4
> 
> 时间：2012-11-07T09:14:04.940
> 
> 标签：filter, devexpress, controls, aspxgridview

我有一个由 SQL 查询填充的 ASPxGridView 组件，我想在我的 ASPX Gridview 上应用过滤器，所以我写道：

```
<dx:ASPxGridView runat="server" ID="gvExecReq" Visible="false" AutoGenerateColumns="true"
        OnPageIndexChanged="gvExecReq_PageIndexChanged" OnBeforeColumnSortingGrouping="gvExecReq_BeforeColumnSortingGrouping">
        **<Settings ShowFilterRow="True" />
        <Settings ShowFilterBar="Visible" ShowHeaderFilterButton="True" />**
    </dx:ASPxGridView> 
```

过滤器很完善，但它不起作用 我还需要添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:04:56.613

请使用以下设置以使过滤器正常运行：

```
 <Settings ShowHeaderFilterButton="true"
     EnableFilterControlPopupMenuScrolling="True"
     ShowFilterBar="Visible" ShowFilterRow="True" ShowFilterRowMenu="True" /> 
```

同样在网格的列中，您可以控制过滤条件，即包含、相等、不包含等。

```
 <dx:GridViewDataColumn  Settings-AutoFilterCondition="Contains" Settings-FilterMode="DisplayText"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:22:55.920

如果在数据库中的字段类型是`string`你可以写部分文本进行搜索，但类型是`int`或`decimal`等等，你应该写所有文本，即使它可以找到行

# python - 返回超过最小长度的单词数并用单词+空格替换那些不是的

> ID：13266493
> 
> 赞同：1
> 
> 时间：2012-11-07T09:14:10.917
> 
> 标签：python, list, testing, replace, counter

对于长度小于 min_length 的任何名称，将列表中的该项替换为包含原始名称的新字符串，并在右侧添加空格以实现最小长度
示例： min_length = 5 // / 'dog' 更改后 = 'dog'
并且还返回列表中最初超过 min_length 的名称数量

```
def pad_names(list_of_names, min_length):  
    '''(list of str, int) -> int  
    Return the number of names that are longer than the minimum length.  
    >>> pad_names(list_of_names, 5)  
        2  
    '''  
    new_list = []  
    counter = 0  
    for word in list_of_names:      
        if len(word) > min_length:  
            counter = counter + 1  

    for word in list_of_names:  
        if len(word) < min_length:  
            new_list.append(word.ljust(min_length))  
        else:  
            new_list.append(word)  
     return(counter) 
```

我目前在此功能上遇到 5 个错误：

所有错误都是#incorrect返回值

test_02: pad_names_one_name_much_padding_changes_list
原因：对于需要填充的 1 个名称的情况，列表未正确更改

test_04: pad_names_one_name_needs_one_pad_changes_list
原因：一个名字需要一个pad更改列表

test_10: pad_names_all_padded_by_3_changes_list
原因：全部由 3 个更改列表填充

test_12：pad_names_all_padded_different_amounts_changes_list
原因：所有填充的不同数量的变化列表

test_20: pad_names_one_empty_name_list_changed
原因：一个空的名字列表改变了

此功能不需要高效，只需要通过这些测试而不会产生更多问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:24:49.410

本着你写这篇文章的精神，我猜你想修改名字列表，以便检查结果（以及返回计数）......

```
def test(names, minlen):
    counter = 0
    for idx, name in enumerate(names):
        newname = name.ljust(minlen)
        if newname != name:
            names[idx] = newname 
        else:
            counter += 1
    return counter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:21:40.380

你是这个意思？

```
def pad_names(list_of_names, min_length):  
    counter = 0
    for i, val in enumerate(list_of_names):      
        if len(val) >= min_length:  
            counter += 1  
        elif len(val) < min_length:  
            list_of_names[i] = val.ljust(min_length)
    return counter 
```

或者：

```
def pad_names(words, min_length):  
    i, counter = 0, 0
    for val in words:
        if len(val) >= min_length:  
            counter += 1  
        elif len(val) < min_length:  
            words[i] = val.ljust(min_length)
        i += 1
    return counter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:26:16.257

不确定我是否完全理解你的问题，但这是一种相当 Pythonic 的方式来做我认为你想要的事情：

```
data = ['cat', 'snake', 'zebra']

# pad all strings with spaces to 5 chars minimum
#  uses string.ljust for padding and a list comprehension
padded_data = [d.ljust( 5, ' ' ) for d in data]

# get the count of original elements whose length was 5 or great
ct = sum( len(d) >= 5 for d in data ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:28:04.923

[string.ljust()](http://docs.python.org/2/library/string.html#string.ljust)是一种将字符串填充到最小长度的快速简单的方法。

这是我编写函数的方式：

```
def pad_names(list_of_names, min_length):
   # count strings that meets the min_length requirement
   count = sum(1 for s in list_of_names if len(s) > min_length) 
   # replace list with updated content, using ljust() to pad strings
   list_of_names[:] = [s.ljust(min_length) for s in list_of_names]

   return count  # return num of strings that exceeds min_length 
```

虽然简洁，但对于大型数据集，这可能不是最有效的方法，因为我们实际上是在创建一个新列表并将其复制到新列表上。

如果性能是一个问题，我会循环并只更新相关条目。

```
def pad_names(list_of_names, min_length):
   count = 0
   for i, s in enumerate(list_of_names):
      if len(s) > min_length:   # should it be >= ??
          count += 1  # increment counter
      else:
         list_of_names[i] = s.ljust(min_length)  # update original list
   return count 
```

# c# - 轻松将整个类实例写入 XML 文件并读回

> ID：13266496
> 
> 赞同：14
> 
> 时间：2012-11-07T09:14:25.193
> 
> 标签：c#, xml, file

我有一个名为 的主类`theGarage`，其中包含我们的客户、供应商和工作类的实例。

我想将程序数据保存到 XML 文件中，我使用了下面的代码（只是一个片段，我有其他类的匹配代码）。我想知道是否有更简单的方法可以做到这一点，例如将整个 theGarage 类写入 XML 文件并读取它，而不必像下面那样编写所有这些代码。

```
 public void saveToFile()
    {
        using (XmlWriter writer = XmlWriter.Create("theGarage.xml"))
        {
            writer.WriteStartDocument();

            ///
            writer.WriteStartElement("theGarage");
            writer.WriteStartElement("Customers");

            foreach (Customer Customer in Program.theGarage.Customers)
            {
                writer.WriteStartElement("Customer");
                writer.WriteElementString("FirstName", Customer.FirstName);
                writer.WriteElementString("LastName", Customer.LastName);
                writer.WriteElementString("Address1", Customer.Address1);
                writer.WriteElementString("Address2", Customer.Address2);
                writer.WriteElementString("Town", Customer.Town);
                writer.WriteElementString("County", Customer.County);
                writer.WriteElementString("PostCode", Customer.Postcode);
                writer.WriteElementString("TelephoneHome", Customer.TelephoneHome);
                writer.WriteElementString("TelephoneMob", Customer.TelephoneMob);

                //begin vehicle list
                writer.WriteStartElement("Vehicles");

                foreach (Vehicle Vehicle in Customer.Cars)
                {
                    writer.WriteStartElement("Vehicle");
                    writer.WriteElementString("Make", Vehicle.Make);
                    writer.WriteElementString("Model", Vehicle.Model);
                    writer.WriteElementString("Colour", Vehicle.Colour);
                    writer.WriteElementString("EngineSize", Vehicle.EngineSize);
                    writer.WriteElementString("Registration", Vehicle.Registration);
                    writer.WriteElementString("Year", Vehicle.YearOfFirstReg);
                    writer.WriteEndElement();
                }
                writer.WriteEndElement();
                writer.WriteEndElement();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-07T09:16:58.710

序列化对象有更简单的方法，请`XmlSerializer`改用。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)的文档。

将您的车库序列化为文件的代码片段可能如下所示：

```
var garage = new theGarage();

// TODO init your garage..

XmlSerializer xs = new XmlSerializer(typeof(theGarage));
TextWriter tw = new StreamWriter(@"c:\temp\garage.xml");
xs.Serialize(tw, garage); 
```

以及从文件加载车库的代码：

```
using(var sr = new StreamReader(@"c:\temp\garage.xml"))
{
   garage = (theGarage)xs.Deserialize(sr);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T09:21:05.413

有几个漂亮的扩展方法怎么样，然后你可以很容易地读/写这个到/从文件。

```
public static class Extensions
{
    public static string ToXml(this object obj)
    {
        XmlSerializer s = new XmlSerializer(obj.GetType());
        using (StringWriter writer = new StringWriter())
        {
            s.Serialize(writer, obj);
            return writer.ToString();
        }
    }

    public static T FromXml<T>(this string data)
    {
        XmlSerializer s = new XmlSerializer(typeof(T));
        using (StringReader reader = new StringReader(data))
        {
            object obj = s.Deserialize(reader);
            return (T)obj;
        }
    }
} 
```

例子

```
 var xmlData = myObject.ToXml();

 var anotherObject = xmlData.FromXml<ObjectType>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-15T00:03:54.613

我刚刚写[了一篇关于将对象数据保存为 Binary、XML 或 Json 的博文](http://blog.danskingdom.com/saving-and-loading-a-c-objects-data-to-an-xml-json-or-binary-file/)。这是将类实例写入/读取 XML 的函数。有关更多详细信息，请参阅我的博客文章。

需要将 System.Xml 程序集包含在您的项目中。

```
/// <summary>
/// Writes the given object instance to an XML file.
/// <para>Only Public properties and variables will be written to the file. These can be any type though, even other classes.</para>
/// <para>If there are public properties/variables that you do not want written to the file, decorate them with the [XmlIgnore] attribute.</para>
/// <para>Object type must have a parameterless constructor.</para>
/// </summary>
/// <typeparam name="T">The type of object being written to the file.</typeparam>
/// <param name="filePath">The file path to write the object instance to.</param>
/// <param name="objectToWrite">The object instance to write to the file.</param>
/// <param name="append">If false the file will be overwritten if it already exists. If true the contents will be appended to the file.</param>
public static void WriteToXmlFile<T>(string filePath, T objectToWrite, bool append = false) where T : new()
{
    TextWriter writer = null;
    try
    {
        var serializer = new XmlSerializer(typeof(T));
        writer = new StreamWriter(filePath, append);
        serializer.Serialize(writer, objectToWrite);
    }
    finally
    {
        if (writer != null)
            writer.Close();
    }
}

/// <summary>
/// Reads an object instance from an XML file.
/// <para>Object type must have a parameterless constructor.</para>
/// </summary>
/// <typeparam name="T">The type of object to read from the file.</typeparam>
/// <param name="filePath">The file path to read the object instance from.</param>
/// <returns>Returns a new instance of the object read from the XML file.</returns>
public static T ReadFromXmlFile<T>(string filePath) where T : new()
{
    TextReader reader = null;
    try
    {
        var serializer = new XmlSerializer(typeof(T));
        reader = new StreamReader(filePath);
        return (T)serializer.Deserialize(reader);
    }
    finally
    {
        if (reader != null)
            reader.Close();
    }
} 
```

## 例子

```
// Write the list of salesman objects to file.
WriteToXmlFile<Customer>("C:\TheGarage.txt", customer);

// Read the list of salesman objects from the file back into a variable.
Customer customer = ReadFromXmlFile<Customer>("C:\TheGarage.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:22:41.720

对于我的项目，我使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)。我与[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)相比，它可以处理对同一对象的多个引用，这样数据不会在 xml 中重复并恢复为已保存。

# actionscript-3 - AS3 Flash Pong 游戏：AI 桨不按预期移动

> ID：13266498
> 
> 赞同：0
> 
> 时间：2012-11-07T09:14:26.783
> 
> 标签：actionscript-3, flash, pong

所以我有以下代码表达“AI”运动。pdl_R 是 AI 桨，AIH 是 AI 高度，AIHS 是 AI 高度速度。我希望代码通过 AIH 向 AIHS 方向移动桨。

```
pdl_R.y=AIH;
AIH+=(3*AIHS);  
if(pdl_R.y==stage.stageHeight || pdl_R.y==stage.stageHeight-pdl_R.height)
{
    AIHS*=-1;
} 
```

但是当 pdl_R（AI 桨）到达屏幕底部（向下是默认方向）时，它会停留在那里并上下闪烁 3 个像素（而不是预期的方向切换）。

我的初始 AIH 是 200，我的初始 AIHS 是 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:09:05.673

在下面的 if 语句中：

```
if(pdl_R.y==stage.stageHeight || pdl_R.y==stage.stageHeight-pdl_R.height)
{
    AIHS*=-1;
} 
```

使用桨高度 (30) 和舞台高度 (600) 的一些示例数字，您会问：

```
if(paddle.y == 600 || paddle.y == 570)
{
  ReversePaddleDirection
} 
```

这可以解释桨卡在底部，因为它会永远在 570 和 600 之间弹跳，一旦到达其中之一就会反转。

如果不是这种情况，我们可以使用更多信息（即实际舞台高度和桨高度）来进一步调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:49:46.530

当您的 AIH 达到 stage.stageHeight 时，会发生以下情况：

1.  Y 被分配 stage.stageHeight (==AIH)
2.  AIH 增加 3*AIHS（==3，假设 AIHS==1，虽然 AIHS 的实际值无关紧要，只有它的符号才重要）。因此，您的桨实际上比您想要的多移动 3 个像素。
3.  你检查条件，它是真的，所以 AIHS=-1*AIHS。AIHS 现在是 -3。
4.  好的，下一帧，Y 被分配了 AIH (==stage.stageHeight+3)，AIH 增加了 AIHS，现在又等于 stage.stageHeight。检查条件为假，AIHS 没有变化。桨现在向上移动。
5.  下一帧，Y 被分配了等于 stage.stageHeight 的 AIH，但桨现在向上移动！因此，当您再次检查您的状况时，AIHS 恢复为 +3。而且，AIH 已经是 stage.stageHeight-3，所以再往前 2 帧循环会重复。

一个解决方法是在您更改 AIHS 后放置 AIH 的增量。这实际上是最常见的错误原因，您首先应用未更改的值，然后更改它，而不是先更改，然后应用。

# objective-c - UIStautsbar SetHidden 在 ios 5 中不起作用？

> ID：13266506
> 
> 赞同：0
> 
> 时间：2012-11-07T09:15:10.537
> 
> 标签：objective-c, ios, uikit

我在 .plist 文件中设置变量状态栏最初隐藏是是，但是当我立即调用照片库时，状态栏出现了，即使没有更改状态栏的值。

这就是为什么我想知道它为什么会发生....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:29:15.817

`UIStatusBarHidden`Info.plist 中行的“值类型”是否设置为`Boolean`？如果是这样，您应该会在 . 右侧的 Value 列中看到一个复选框`UIStatusBarHidden`。

要设置它，请右键单击`UIStatusBarHidden`（在 Xcode 中查看 Info.plist 时）并选择 Value Type/Boolean。

如果您正在手动编辑 plist 文件，则该字段应该是 ，而不是 TRUE。

听起来你做的一切都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:33:41.037

您使用的是 Xcode 4.5.2
我注意到项目设置的“摘要”选项卡中有一个“在应用程序启动期间隐藏”复选框。
我想你应该使用这个复选框。

# dns - 前缀/后缀环境域名

> ID：13266507
> 
> 赞同：0
> 
> 时间：2012-11-07T09:15:15.997
> 
> 标签：dns, multiple-domains

## 概述

我目前正在为 CodeIgniter 框架实现一个多环境插件作为学习经验；但是，我遇到了一个可以通过多种方式解决的问题。我不确定采取哪种方法[最好]，因此提出了这个问题。关于这个主题，我快速搜索了 Stack Overflow 和 Web，但几乎没有找到明确的结果。

## 问题

在开发网站时，您通常有一个模仿类似结构的设置：**Local** - **Testing** - **Live**。在拥有这种结构时，您几乎肯定会拥有一个能够在不同环境中查看网站的域结构，无论是前缀结构还是后缀结构。

## 问题

为上述每种环境定义 URL 的最佳做法是什么方法，是**前缀**方法：

*   local.site.com
*   test.site.com
*   网站

或**后缀**方法：

*   网站本地
*   站点测试
*   网站

即使这个问题的结果是我应该为前缀和后缀提供支持，但知道使用哪种最佳实践仍然是有益的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:51:31.493

我认为这是一个品味问题，我对此的看法 - .local 是不存在的 TLD，将 .local 用于本地资源是一种常见的做法。如果您的开发/测试站点不需要全局访问，使用它似乎没问题，但如果您想向外部人员展示此站点，他将无法访问它。与 .local 不同，.test 是一个不存在的 TLD，到目前为止没有人使用它，但有一天它可能会被分配，并且您的 .test 站点会与其他站点发生冲突，我永远不会使用它。

虽然 site.com 是您的域，但您可以自由定义其中的任何子域，并决定要在全球可访问的 DNS 服务器等上发布哪些子域。

就个人而言，我更喜欢前缀。

# wcf - 带有 RIA WCF 项目的 Silverlight 无法添加常规 WCF 服务引用

> ID：13266508
> 
> 赞同：3
> 
> 时间：2012-11-07T09:15:17.957
> 
> 标签：wcf, silverlight, visual-studio-2012, ria

我不知道这是否是一个错误/功能，但我需要找到一种方法让它工作。

要重新创建，请使用 VS2012，打开一个启用 RIA 服务的新 SL5 项目。创建另一个项目，添加一个简单的 WCF 服务（或启用 SL 的 WCF）并添加一个接受或返回一个简单对象的方法（我有一个带有一个字符串属性的对象）。尝试将此作为服务引用添加到您的 SL 项目。除其他外，您将在警告中收到此错误：

> 自定义工具警告：未找到与 Silverlight 5 兼容的端点。除非通过构造函数提供端点信息，否则生成的客户端类将不可用。

并且实际上没有生成任何生成的代码。

我发现如果我从服务方法中删除对象并改用简单的字符串/int/bool，则添加引用就好了。此外，如果我将相同的服务添加到没有 RIA 的常规 SL 应用程序中，一切都会像您期望的那样工作。一旦我在该服务正在运行的应用程序上启用 RIA，并更新服务引用，生成的代码就会再次消失。

我记得这曾经有效，因为我的项目同时使用了 RIA 和外部 WCF 服务。这是一个新的 VS2012 东西吗？有没有办法解决这个问题？

谢谢，

埃亚尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T21:05:27.393

我可以重复这个问题，而且它似乎只有在 Silverlight 客户端在其引用的程序集中有 2 个 System.ServiceModel.DomainServices.Client 和 System.ServiceModel.DomainServices.Client.Web 程序集时才会发生。并且仅当它以 SL 5 为目标时。

如果您的情况允许，我建议您尝试两种解决方法：

1) 将 Silverlight 应用程序更改为面向 Silverlight 4，而不是 5，或者 2) 右键单击​​服务参考并要求配置它。单击复选框以“在指定的引用程序集中重用类型”并选择*除*上述 2 之外的所有程序集。

这似乎是与 SL 5 或 VS2012 相关的错误。如果我找到更满意的答案，我会重新发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:21:36.973

问题是因为 silverlight 5 和 vs 2012 有一些错误。【重启vs2012即可自行解决】

如果您查看您的 ServiceRefrences.ClientConfig 会发现它是空的。您需要在此处手动输入您的服务参考。我附上了我的配置页面的示例，您需要相应地更改名称

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService2" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="../Service2.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService2" contract="ServiceReference1.IService2"
            name="BasicHttpBinding_IService2" />
    </client>
</system.serviceModel> 
```

# android - 我如何将结果文本视图位置从左上角更改为任何其他位置？

> ID：13266509
> 
> 赞同：2
> 
> 时间：2012-11-07T09:15:24.390
> 
> 标签：android

告诉我如何在这段代码中更改文本视图位置？在此应用程序应用程序中，在应用程序的左上角位置显示结果 textview 我如何更改为按钮中心或右侧的位置我尝试在 xml 中布局位置，但始终显示在按钮存在和按钮重叠的同一位置的左上角结果条形码值resultText 视图值那么我如何更改 textview 位置？？？？？？

```
 package com.zijunlin.Zxing.Demo;

   import java.io.IOException;
     import java.util.Vector;

    import com.google.zxing.BarcodeFormat;
   import com.google.zxing.Result;

  import com.zijunlin.Zxing.Demo.camera.CameraManager;
  import com.zijunlin.Zxing.Demo.decoding.CaptureActivityHandler;
  import com.zijunlin.Zxing.Demo.decoding.InactivityTimer;
  import com.zijunlin.Zxing.Demo.view.ViewfinderView;

  import android.R.string;
 import android.app.Activity;
  import android.content.res.AssetFileDescriptor;
 import android.graphics.Bitmap;
  import android.media.AudioManager;
 import android.media.MediaPlayer;
 import android.media.MediaPlayer.OnCompletionListener;
  import android.os.Bundle;
 import android.os.Handler;
  import android.os.Vibrator;
 import android.view.SurfaceHolder;
 import android.view.SurfaceHolder.Callback;
 import android.view.SurfaceView;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.TextView;
  import android.widget.Toast;

   public class CaptureActivity extends Activity implements Callback {

private CaptureActivityHandler handler;
private ViewfinderView viewfinderView;
private boolean hasSurface;
private Vector<BarcodeFormat> decodeFormats;
private String characterSet;
    public static TextView txtResult;
private InactivityTimer inactivityTimer;
private MediaPlayer mediaPlayer;
private boolean playBeep;
private static final float BEEP_VOLUME = 0.10f;
private boolean vibrate;
private static String barCode;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //³õÊ¼»¯ CameraManager
    CameraManager.init(getApplication());

    viewfinderView = (ViewfinderView) findViewById(R.id.viewfinder_view);
    txtResult = (TextView) findViewById(R.id.txtResult);

    Button mybutton = (Button) findViewById(R.id.button1);
    mybutton.setOnClickListener(new OnClickListener() {

        public void onClick(View v)

        {
            Toast.makeText(CaptureActivity.this,""+barCode, 
    Toast.LENGTH_LONG).show();
        }

    });
    hasSurface = false;
    inactivityTimer = new InactivityTimer(this);

}

@Override
protected void onResume() {
    super.onResume();
    SurfaceView surfaceView = (SurfaceView) findViewById(R.id.preview_view);
    SurfaceHolder surfaceHolder = surfaceView.getHolder();
    if (hasSurface) {
        initCamera(surfaceHolder);
    } else {
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }
    decodeFormats = null;
    characterSet = null;

    playBeep = true;
    AudioManager audioService = (AudioManager) getSystemService(AUDIO_SERVICE);
    if (audioService.getRingerMode() != AudioManager.RINGER_MODE_NORMAL) {
        playBeep = false;
    }
    initBeepSound();
    vibrate = true;
}

@Override
protected void onPause() {
    super.onPause();
    if (handler != null) {
        handler.quitSynchronously();
        handler = null;
    }
    CameraManager.get().closeDriver();
}

@Override
protected void onDestroy() {
    inactivityTimer.shutdown();
    super.onDestroy();
}

private void initCamera(SurfaceHolder surfaceHolder) {
    try {
        CameraManager.get().openDriver(surfaceHolder);
    } catch (IOException ioe) {
        return;
    } catch (RuntimeException e) {
        return;
    }
    if (handler == null) {
        handler = new CaptureActivityHandler(this, decodeFormats,
                characterSet);
    }
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    if (!hasSurface) {
        hasSurface = true;
        initCamera(holder);
    }

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    hasSurface = false;

}

public ViewfinderView getViewfinderView() {
    return viewfinderView;
}

public Handler getHandler() {
    return handler;
}

public void drawViewfinder() {
    viewfinderView.drawViewfinder();

}

public void handleDecode(Result obj, Bitmap barcode) {
    inactivityTimer.onActivity();
    viewfinderView.drawResultBitmap(barcode);
     playBeepSoundAndVibrate();
    txtResult.setText(obj.getBarcodeFormat().toString() + ":"
            + obj.getText());

    barCode=obj.getText().toString();

    //TextView t = (TextView)findViewById(R.id.txtResult2);
    //t.setText("SEcond code here"+barCode);    
}

private void initBeepSound() {
    if (playBeep && mediaPlayer == null) {
        // The volume on STREAM_SYSTEM is not adjustable, and users 
    found      it
        // too loud,
        // so we now play on the music stream.
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setOnCompletionListener(beepListener);

        AssetFileDescriptor file = getResources().openRawResourceFd(
                R.raw.beep);
        try {
            mediaPlayer.setDataSource(file.getFileDescriptor(),
                    file.getStartOffset(), file.getLength());
            file.close();
            mediaPlayer.setVolume(BEEP_VOLUME, BEEP_VOLUME);
            mediaPlayer.prepare();
        } catch (IOException e) {
            mediaPlayer = null;
        }
    }
}

private static final long VIBRATE_DURATION = 200L;

private void playBeepSoundAndVibrate() {
    if (playBeep && mediaPlayer != null) {
        mediaPlayer.start();
    }
    if (vibrate) {
        Vibrator vibrator = (Vibrator) getSystemService(VIBRATOR_SERVICE);
        vibrator.vibrate(VIBRATE_DURATION);
    }
}

/**
 * When the beep has finished playing, rewind to queue up another one.
 */
private final OnCompletionListener beepListener = new OnCompletionListener() {
    public void onCompletion(MediaPlayer mediaPlayer) {
        mediaPlayer.seekTo(0);
    }
};

  }

   <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">

   <SurfaceView android:id="@+id/preview_view"
           android:layout_width="fill_parent"
           android:layout_gravity="center"
           android:layout_height="fill_parent"
           android:layout_centerInParent="true"/>

   <com.zijunlin.Zxing.Demo.view.ViewfinderView
  android:id="@+id/viewfinder_view"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"

  android:background="@color/transparent"/>

   <TextView android:id="@+id/txtResult"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  
        android:layout_marginLeft="30dip"  
        android:text="hello"      
        android:textSize="14sp"/>

  <Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:layout_marginRight="30dip"

    android:text="Button" />

     </FrameLayout>

  package com.zijunlin.Zxing.Demo.view;

   import com.google.zxing.ResultPoint;
   import com.zijunlin.Zxing.Demo.R;
   import com.zijunlin.Zxing.Demo.camera.CameraManager;

   import android.content.Context;
   import android.content.res.Resources;
 import android.graphics.Bitmap;
  import android.graphics.Canvas;
 import android.graphics.Paint;
  import android.graphics.Rect;
 import android.util.AttributeSet;
 import android.view.View;

 import java.util.Collection;
  import java.util.HashSet;

 /**
  * This view is overlaid on top of the camera preview. It adds the viewfinder   
  rectangle and partial
  * transparency outside it, as well as the laser scanner animation and result points.
  *
 * @author dswitkin@google.com (Daniel Switkin)
 */
    public final class ViewfinderView extends View {

     private static final int[] SCANNER_ALPHA = {0, 64, 128, 192, 255, 192, 128, 64};
   private static final long ANIMATION_DELAY = 100L;
   private static final int OPAQUE = 0xFF;

  private final Paint paint;
  private Bitmap resultBitmap;
   private final int maskColor;
  private final int resultColor;
  private final int frameColor;
  private final int laserColor;
  private final int resultPointColor;
  private int scannerAlpha;
   private Collection<ResultPoint> possibleResultPoints;
   private Collection<ResultPoint> lastPossibleResultPoints;

  // This constructor is used when the class is built from an XML resource.
  public ViewfinderView(Context context, AttributeSet attrs) {
  super(context, attrs);

// Initialize these once for performance rather than calling them every time in    
 onDraw().
 paint = new Paint();
 Resources resources = getResources();
 maskColor = resources.getColor(R.color.viewfinder_mask);
 resultColor = resources.getColor(R.color.result_view);
 frameColor = resources.getColor(R.color.viewfinder_frame);
 laserColor = resources.getColor(R.color.viewfinder_laser);
 resultPointColor = resources.getColor(R.color.possible_result_points);
 scannerAlpha = 0;
 possibleResultPoints = new HashSet<ResultPoint>(5);
 }

 @Override
  public void onDraw(Canvas canvas) {
 Rect frame = CameraManager.get().getFramingRect();
 if (frame == null) {
  return;
 }
 int width = canvas.getWidth();
 int height = canvas.getHeight();

 // Draw the exterior (i.e. outside the framing rect) darkened
 paint.setColor(resultBitmap != null ? resultColor : maskColor);
 canvas.drawRect(0, 0, width, frame.top, paint);
 canvas.drawRect(0, frame.top, frame.left, frame.bottom + 1, paint);
canvas.drawRect(frame.right + 1, frame.top, width, frame.bottom + 1, paint);
canvas.drawRect(0, frame.bottom + 1, width, height, paint);

 if (resultBitmap != null) {
  // Draw the opaque result bitmap over the scanning rectangle
  paint.setAlpha(OPAQUE);
  canvas.drawBitmap(resultBitmap, frame.left, frame.top, paint);
 } else {

  // Draw a two pixel solid black border inside the framing rect
  paint.setColor(frameColor);
  canvas.drawRect(frame.left, frame.top, frame.right + 1, frame.top + 2, paint);
  canvas.drawRect(frame.left, frame.top + 2, frame.left + 2, frame.bottom - 1, paint);
  canvas.drawRect(frame.right - 1, frame.top, frame.right + 1, frame.bottom - 1, 
  paint);
  canvas.drawRect(frame.left, frame.bottom - 1, frame.right + 1, frame.bottom + 1, 
   paint);

  // Draw a red "laser scanner" line through the middle to show decoding is active
  paint.setColor(laserColor);
  paint.setAlpha(SCANNER_ALPHA[scannerAlpha]);
  scannerAlpha = (scannerAlpha + 1) % SCANNER_ALPHA.length;
  int middle = frame.height() / 2 + frame.top;
  canvas.drawRect(frame.left + 2, middle - 1, frame.right - 1, middle + 2, paint);

  Collection<ResultPoint> currentPossible = possibleResultPoints;
  Collection<ResultPoint> currentLast = lastPossibleResultPoints;
  if (currentPossible.isEmpty()) {
    lastPossibleResultPoints = null;
  } else {
    possibleResultPoints = new HashSet<ResultPoint>(5);
    lastPossibleResultPoints = currentPossible;
    paint.setAlpha(OPAQUE);
    paint.setColor(resultPointColor);
    for (ResultPoint point : currentPossible) {
      canvas.drawCircle(frame.left + point.getX(), frame.top + point.getY(), 6.0f, 
    paint);
    }
  }
  if (currentLast != null) {
    paint.setAlpha(OPAQUE / 2);
    paint.setColor(resultPointColor);
    for (ResultPoint point : currentLast) {
      canvas.drawCircle(frame.left + point.getX(), frame.top + point.getY(), 3.0f, 
  paint);
    }
  }

  // Request another update at the animation interval, but only repaint the laser line,
  // not the entire viewfinder mask.
  postInvalidateDelayed(ANIMATION_DELAY, frame.left, frame.top, frame.right,  
 frame.bottom);
 }
 }

  public void drawViewfinder() {
 resultBitmap = null;
 invalidate();
  }

 /**
  * Draw a bitmap with the result points highlighted instead of the live scanning 
  display.
*
 * @param barcode An image of the decoded barcode.
*/
 public void drawResultBitmap(Bitmap barcode) {
 resultBitmap = barcode;
 invalidate();
 }

  public void addPossibleResultPoint(ResultPoint point) {
   possibleResultPoints.add(point);
  }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:32:40.390

在 XML 中使用属性 android:gravity，如下所示：

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:gravity="right"
        android:text="TextView" /> 
```

或者，如果您想以编程方式进行更改，请使用以下命令：

myTextView.setGravity(Gravity.RIGHT);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:33:37.617

如果您的 textView 在布局参数中有 fill_parent @Deepanker Chaudhary 的解决方案是正确的。但是您的 textView 在 layoutparams 中具有类似 wrap_content 的大小，您应该使用边距。

# wordpress - 如何使用 tumblr API 或 Tumblr Rss 提要获取所有帖子

> ID：13266515
> 
> 赞同：4
> 
> 时间：2012-11-07T09:15:58.557
> 
> 标签：wordpress, rss, feed, tumblr, fetch

我需要从 tumblr 博客中获取所有帖子。例如，wordpress 有一种方法，例如：`blogRssUrl/paged={1}`，我们可以从 wordpress 博客中逐页获取所有 rss 提要。

tumblr 有这样的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:28:42.347

您可以将此代码放在您的 html 或 php.ini 中。

```
<script type="text/javascript" src="http://YourTumblrName.tumblr.com/js"></script> 
```

它将您的 tumblr 的内容提取到一个页面中，但它不是很灵活。我仍在尝试获取日期和标签。而且画质不如Tumblr...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-19T21:45:53.433

使用 XML 或 JSON 和[Tumblr API V1](http://www.tumblr.com/docs/en/api/v1)

XML:`http://yourtumblr.tumblr.com/api/read/`

JSON：`http://yourtumblr.tumblr.com/api/read/json`

否则，可能有一个 WP 插件可以为您处理整个过程： [Example WP plugin](http://wordpress.org/plugins/tumblr-widget-for-wordpress/)

# ios - 如何在 iOS 应用程序中通过 iTunes 附属链接跟踪用户转化率

> ID：13266519
> 
> 赞同：4
> 
> 时间：2012-11-07T09:16:04.583
> 
> 标签：ios, app-store, affiliate

鉴于以下情况：

*   单击会员链接以将用户路由到 iTunes App Store
    *   如果在设备本身或 Mac/PC 上单击链接，则无关紧要。
    *   （而链接是来自 LinkShare 的链接）
*   然后将应用程序安装在 iOS 设备上。
*   一旦用户开始某个操作（例如购买应用内购买），该操作将与会员 ID 的原始 ID 一起记录，从而使用户安装应用程序。

目标是能够根据会员跟踪“转化用户”（也称为转化率）。示例：“Affiliate XY 带来的 60% 的用户从非付费用户转变为付费用户”。

实现上述目标的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T21:46:16.477

几乎每个广告系列分析服务都应该允许您很好地进行设置。我上周为一个项目设置的一个我肯定知道的是

[AppsFlyer：移动应用安装和转化跟踪](http://www.appsflyer.com)

在 iosdevweekly 的第 101 期中，有一个 Tapstream 促销活动，所以我看了一下，他们看起来也能很好地完成这项工作：

[Tapstream：应用营销，统一。](https://tapstream.com)

如果这些看起来都不完美，那么您也可以查看[其他一些竞争对手。](http://build.developereconomics.com/sector/app-promotion-campaign-analytics/)

# java - 使用 Facebook Android SDK 发布文字和图片

> ID：13266520
> 
> 赞同：0
> 
> 时间：2012-11-07T09:16:09.670
> 
> 标签：java, android, facebook

我正在尝试使用 Facebook Android SDK（不使用对话框）将图片和文本发布到某些用户的新闻提要，但由于某种原因，它仅将图片和文本发布到用户自己的时间线而不是全球新闻提要他的朋友可以看到。如果我删除图片参数，则文本将显示在新闻提要中。我错过了什么吗？

这是我的代码：

```
//Prepare picture data
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
b.compress(Bitmap.CompressFormat.JPEG, 100, baos);              
data = baos.toByteArray();

//Post data
Bundle params = new Bundle();
params.putString(Facebook.TOKEN, LoginActivity.mFacebook.getAccessToken());
params.putByteArray("picture", data);
params.putString("message", txt.getText().toString());
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(LoginActivity.mFacebook);     
mAsyncRunner.request("me/feed ", params, "POST", new FacebookUploadListener(), null);
mAsyncRunner.request(response, new FacebookUploadListener()); 
```

如果没有 Facebook SDK 的对话框，我可以实现吗？

# python - 如何用参数填充正则表达式字符串

> ID：13266524
> 
> 赞同：8
> 
> 时间：2012-11-07T09:16:23.710
> 
> 标签：python, regex, django, string

我想用字符串填充正则表达式变量。

```
import re

hReg = re.compile("/robert/(?P<action>([a-zA-Z0-9]*))/$")
hMatch = hReg.match("/robert/delete/")
args = hMatch.groupdict() 
```

args 变量现在是一个带有 {"action":"delete"} 的字典。

我怎样才能扭转这个过程？使用 args dict 和 regex 模式，我如何获得字符串 "/robert/delete/" ？

有可能有这样的功能吗？

```
def reverse(pattern, dictArgs): 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:44:31.793

这个功能应该做到

```
def reverse(regex, dict):
    replacer_regex = re.compile('''
        \(\?P\<         # Match the opening
            (.+?)       # Match the group name into group 1
        \>\(.*?\)\)     # Match the rest
        '''
        , re.VERBOSE)

    return replacer_regex.sub(lambda m : dict[m.group(1)], regex) 
```

您基本上匹配 (\?P...) 块并将其替换为字典中的值。

编辑：正则表达式是我的例子中的正则表达式字符串。你可以从模式中得到它

```
regex_compiled.pattern 
```

EDIT2：添加了详细的正则表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:35:05.130

实际上，我认为这对于一些狭窄的情况是可行的，但“在一般情况下”是相当复杂的事情。

您需要编写某种有限状态机，解析您的正则表达式字符串，并拆分不同的部分，然后对这些部分采取适当的措施。

对于常规符号 - 只需将符号“按原样”放入结果字符串中。对于命名组 - 将 dictArgs 中的值代替它们 对于可选块 - 将其中的一些值

等等。

一个 requllar 表达式通常可以匹配大的（甚至无限的）字符串集，所以这个“反向”函数不会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T18:33:24.333

在@Dimitri 的回答的基础上，可以进行更多的消毒。

```
retype = type(re.compile('hello, world'))
def reverse(ptn, dict):
    if isinstance(ptn, retype):
        ptn = ptn.pattern
    ptn = ptn.replace(r'\.','.')
    replacer_regex = re.compile(r'''
        \(\?P         # Match the opening
        \<(.+?)\>
        (.*?)
        \)     # Match the rest
        '''
        , re.VERBOSE)
#     return replacer_regex.findall(ptn)
    res = replacer_regex.sub( lambda m : dict[m.group(1)], ptn)
    return res 
```

# actionscript-3 - flash player/AIR 中内置了哪些字体？

> ID：13266525
> 
> 赞同：0
> 
> 时间：2012-11-07T09:16:27.653
> 
> 标签：actionscript-3, flash

我正在将我的 AIR 应用程序移植到 iPad。我在我的应用程序的文本字段中使用嵌入字体。但是当用户开始编辑文本时（双击`textfield.type`is set后`TextFieldType.INPUT`），文本变得很大......嵌入字体是`DejaVuSans`. 当我这样做时`textfield.embedFonts=false`，巨大的字体问题消失了。我什至不想问为什么字体会变大（看起来它是针对我的应用程序的）。这个问题要简单一些。当我设置`textfield.embedFonts`为`false` `Times`使用字体时。但我需要 `DejaVuSans`。问题是：如何在 flash player 中调用（以便我可以这样做`textFormat.font=NAME`）以及在哪里列出了所有可用的字体？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:00:24.233

Flash Player 或 AIR 中没有内置字体。除了自己嵌入字体外，您还可以使用安装在用户计算机上的字体（有些字体在几乎所有操作系统上都可用，例如 Verdana 和 Times）。

`enumerateFonts`您可以通过以下方法获取用户机器上所有字体的列表`Font`：

（复制自[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts%28%29)）

```
var allFonts:Array = Font.enumerateFonts(true); 
```

从手册：

> enumerateDeviceFonts:Boolean (default = false) — 指示是否要将列表限制为仅当前可用的嵌入字体。如果设置为 true，则返回所有字体的列表，包括设备字体和嵌入字体。如果将其设置为 false，则仅返回嵌入字体的列表。

# cuda - 我应该如何解释这个 CUDA 错误？

> ID：13266528
> 
> 赞同：3
> 
> 时间：2012-11-07T09:16:36.713
> 
> 标签：cuda, pycuda

我正在用 pyCUDA 自学 CUDA。在本练习中，我想将一个简单的 1024 个浮点数组发送到 GPU 并将其存储在共享内存中。正如我在下面的论点中指定的那样，我只在一个具有 1024 个线程的块上运行这个内核。

```
import pycuda.driver as cuda
from pycuda.compiler import SourceModule
import pycuda.autoinit
import numpy as np
import matplotlib.pyplot as plt

arrayOfFloats = np.float64(np.random.sample(1024))
mod = SourceModule("""
  __global__ void myVeryFirstKernel(float* arrayOfFloats) {
    extern __shared__ float sharedData[];

    // Copy data to shared memory.
    sharedData[threadIdx.x] = arrayOfFloats[threadIdx.x];
  }
""")
func = mod.get_function('myVeryFirstKernel')
func(cuda.InOut(arrayOfFloats), block=(1024, 1, 1), grid=(1, 1))
print str(arrayOfFloats) 
```

奇怪的是，我收到了这个错误。

```
[dfaux@harbinger CUDA_tutorials]$ python sharedMemoryExercise.py 
Traceback (most recent call last):
  File "sharedMemoryExercise.py", line 17, in <module>
    func(cuda.InOut(arrayOfFloats), block=(1024, 1, 1), grid=(1, 1))
  File "/software/linux/x86_64/epd-7.3-1-pycuda/lib/python2.7/site-packages/pycuda-2012.1-py2.7-linux-x86_64.egg/pycuda/driver.py", line 377, in function_call
    Context.synchronize()
pycuda._driver.LaunchError: cuCtxSynchronize failed: launch failed
PyCUDA WARNING: a clean-up operation failed (dead context maybe?)
cuMemFree failed: launch failed
PyCUDA WARNING: a clean-up operation failed (dead context maybe?)
cuModuleUnload failed: launch failed 
```

我试图通过更改发送到 GPU 的元素类型来调试此错误（例如，我使用 float32 而不是 float64）。我也尝试改变我的块和网格大小无济于事。

有什么问题？什么是死上下文？任何建议或想法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:49:37.150

我在您的代码中看到的一个问题是您使用`extern __shared__ ..`这意味着您需要在启动内核时提交共享内存的大小。

在 pycuda 中，这是通过以下方式完成的：
`func(cuda.InOut(arrayOfFloats), block=(1024, 1, 1), grid=(1, 1),shared=smem_size)`
其中 smem_size 是共享内存的大小（以字节为单位）。

在你的情况下 smem_size = 1024*sizeof(float)。

# ruby - 如何拯救 Aws::AwsError: NoSuchKey

> ID：13266533
> 
> 赞同：3
> 
> 时间：2012-11-07T09:16:51.183
> 
> 标签：ruby, error-handling, amazon-s3

我一直在为此苦苦挣扎很久-

```
def aws_file_exists? filename
 begin
   @s3_interface.get('bucket', filename)
   return true
 catch Aws::AwsError, Aws::AwsError2, NoSuchKey, RuntimeError, AmazonError, AWSError
   return false
 end
end 
```

只是，它*没有捕获 !(* @^%@&$*%#*错误*，报告为：

```
Aws::AwsError: NoSuchKey: The specified key does not exist. 
```

我做错了什么/我需要捕捉的错误类型是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:23:05.620

这有帮助吗？

```
begin
  # blah blah
rescue Aws::AwsError => ex
  return false
end 
```

更重要的是，它应该是`begin ... rescue ... end`。您可能会将其与`try ... catch`.

# sql - 从 URL 中提取主机名

> ID：13266534
> 
> 赞同：9
> 
> 时间：2012-11-07T09:16:56.103
> 
> 标签：sql, sql-server

我必须在 sql 中将网站名称修剪为“.com”或“co.in”

示例：假设我的站点地址为“http://stackoverflow.com/questions/ask?title=trim”。我需要得到“stackoverflow.com”的结果。

在某些情况下它可能像“www.google.co.in”然后我需要它是“google.co.in”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T09:24:02.023

请使用以下 SQL 代码提取域名：

```
DECLARE @WebUrl VARCHAR(35);
SET @WebUrl = 'http://stackoverflow.com/questions/ask?title=trim'

SELECT @WebUrl AS 'WebsiteURL',
       LEFT(SUBSTRING(@WebUrl, 
       (CASE WHEN CHARINDEX('//',@WebUrl)=0 
            THEN 5 
            ELSE  CHARINDEX('//',@WebUrl) + 2
            END), 35),
       (CASE 
       WHEN CHARINDEX('/', SUBSTRING(@WebUrl, CHARINDEX('//', @WebUrl) + 2, 35))=0 
       THEN LEN(@WebUrl) 
       else CHARINDEX('/', SUBSTRING(@WebUrl, CHARINDEX('//', @WebUrl) + 2, 35))- 1
       END)
       ) AS 'Domain'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-14T07:54:33.627

我发现这里可能会有很多变化，尤其是在针对推荐人表运行时。出于这个原因，我创建了一个[SQL 脚本，它从一个 Web 地址获取主机名，该地址](https://www.stevefenton.co.uk/2015/09/select-the-host-name-from-a-string-in-sql/)也涵盖了我发现的所有边缘情况。

```
DECLARE @WebAddress varchar(300) = 'https://www.stevefenton.co.uk/2015/09/select-the-host-name-from-a-string-in-sql/'
SELECT 
    /* Get just the host name from a URL */
    SUBSTRING(@WebAddress,
        /* Starting Position (After any '//') */
        (CASE WHEN CHARINDEX('//', @WebAddress)= 0 THEN 1 ELSE CHARINDEX('//', @WebAddress) + 2 END),
        /* Length (ending on first '/' or on a '?') */
        CASE
            WHEN CHARINDEX('/', @WebAddress, CHARINDEX('//', @WebAddress) + 2) > 0 THEN CHARINDEX('/', @WebAddress, CHARINDEX('//', @WebAddress) + 2) - (CASE WHEN CHARINDEX('//', @WebAddress)= 0 THEN 1 ELSE CHARINDEX('//', @WebAddress) + 2 END)
            WHEN CHARINDEX('?', @WebAddress, CHARINDEX('//', @WebAddress) + 2) > 0 THEN CHARINDEX('?', @WebAddress, CHARINDEX('//', @WebAddress) + 2) - (CASE WHEN CHARINDEX('//', @WebAddress)= 0 THEN 1 ELSE CHARINDEX('//', @WebAddress) + 2 END)
            ELSE LEN(@WebAddress)
        END
    ) AS 'HostName' 
```

这将处理...

*   起始地址`www.`（即无方案）
*   一个地址开始`//`
*   以 a 结尾的主机名`/`
*   以查询字符串结尾的主机名

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-26T14:46:24.833

这对我有用：

```
SELECT
    `url` ,
    LEFT(
        RIGHT(
            `url` ,
            length(`url`) -(position('//' IN `url`) + 1)
        ) ,
        position(
            '/' IN RIGHT(
                `url` ,
                length(`url`) -(position('//' IN `url`) + 1)
            )
        ) - 1
    ) AS domain
FROM
    `test`; 
```

[从 URL 中提取域名](https://eikhart.com/blog/mysql-extract-domain-name)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T09:25:32.260

使用 SQLCLR 函数并利用[`System.Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)该类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-18T16:32:33.357

我知道这是一个旧线程，但我最近试图这样做，这里的答案以太没有涵盖`http/s`以新 gTLD 开头的字符串。所以这就是我想出的使用 CTE 表达式来尽量保持它的可读性和可理解性。

希望它会帮助任何人在未来偶然发现这个线程！

```
DECLARE @Var NVARCHAR(1000)
SET @Var='http://stackoverflow.com/questions/ask?title=trim';

WITH cteWithoutWWW (Domain)
as
(
    SELECT
      case when PATINDEX('%www.%', @Var) > 0 then
            SUBSTRING(@Var, PATINDEX('%www.%', @Var) + 4, LEN(@Var) - PATINDEX('%www.%', @Var))
      else
            @Var
      end
),
cteWithoutHTTP (Domain)
as
(
      select
      case when PATINDEX('http://%', Domain) > 0 then
            SUBSTRING(Domain, PATINDEX('http://%', Domain) + 7, LEN(Domain) - PATINDEX('http://%', Domain))
      else
            Domain
      end
      from cteWithoutWWW
),
cteWithoutSlash (Domain)
as
(
      select
      case when CHARINDEX('/', Domain) > 0 then
            SUBSTRING(Domain, 0, CHARINDEX('/', Domain))
      else
            Domain
      end
      from cteWithoutHTTP
)
select Domain from cteWithoutSlash 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T10:06:00.717

这个怎么样：

```
DECLARE @Var NVARCHAR(1000)
SET @Var='http://stackoverflow.com/questions/ask?title=trim'

SET @Var=REPLACE(@Var,'http://','')
IF(LEFT(@Var,4)='www.')
    SET @Var=RIGHT(@Var, len(@Var)-4)

IF(PATINDEX('%.com%', @Var)<>0)
    SELECT SUBSTRING(@Var,0, PATINDEX('%.com%', @Var)+4)
ELSE IF (PATINDEX('%.co.%', @Var)<>0)
    SELECT SUBSTRING(@Var,0, PATINDEX('%.co.%', @Var)+6) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-17T09:45:43.287

我构建了这个函数来做到这一点

```
ALTER FUNCTION fnHostName
(
    @URL varchar(4000)
)
RETURNS varchar(4000)
AS
BEGIN

declare @Dot int
declare @Slash int

set @Dot = CHARINDEX('.', @URL)
set @Slash = CHARINDEX('/', @URL)

WHILE @Slash > 0 AND @Slash < @Dot
BEGIN
    SET @URL = SUBSTRING(@URL,@Slash+1, LEN(@URL))
    set @Dot = CHARINDEX('.', @URL)
    set @Slash = CHARINDEX('/', @URL)
END

IF @Slash > 0 
BEGIN
    SET @URL = LEFT(@URL, @Slash-1)
END

RETURN @URL

END

GO 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-07T09:37:54.183

这是代码，使用子字符串。它适用于 .com 和 .co.in

```
DECLARE @string VARCHAR(50),  @ind int = 0
SET @string = 'http://stackoverflow.co.in/questions/ask?title=trim'

SET @ind=  charindex('.com', @string)  

IF @ind = 0
BEGIN
    SET @ind=  charindex('.co.in', @string)  
    Print SUBSTRING ( @string ,0 , @ind+6 )
END
ELSE
BEGIN
    Print SUBSTRING ( @string ,0 , @ind +4)
END 
```

# javascript - xAxis 标签拒绝与列对齐

> ID：13266538
> 
> 赞同：0
> 
> 时间：2012-11-07T09:17:04.833
> 
> 标签：javascript, highcharts

![在此处输入图像描述](../Images/a0f17d321982d118a15fc0667506edd3.png) 这是配置代码：[http](http://pastebin.com/3W3r9sHQ) : //pastebin.com/3W3r9sHQ 为格式化道歉，但它是生成而不是写入

我希望标签与列对齐，并能够添加我自己的标签，我认为这可以通过类别来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T09:47:49.213

您正在将每个点绘制到不同的系列！它应该是一个具有多个点的单个系列，以使事情正确。您还需要定义一个 xAxis，它以正确的顺序包含所有 x 值。

```
"xAxis": {
        "categories": [
            'Core i7-3770 4-Core 3.4GHz',
            'Core 2 Duo E4600 2.4GHz',
            'Pentium Dual Core E2200 2.2GHz'
            ]
 } 
```

将所有值设置为`data`具有 y 值和颜色的数组

```
 "series": [{
        "type": "column",
        "name": "Popular CPU",
        "data": [
            {
            "color": "#AA4643",    
            "y": 100},
        {
            "color": "#4572A7",
            "y": 13.24},
        {
            "color": "#AA4643",
            "y": 12.03}
        ]
    }] 
```

[基本演示@jsFiddle](http://jsfiddle.net/jugal/4bt4G/)
[演示@jsFiddle](http://jsfiddle.net/jugal/wahmn/)

# android - 如何更改日期选择器对话框上显示的日期？

> ID：13266541
> 
> 赞同：1
> 
> 时间：2012-11-07T09:17:11.520
> 
> 标签：android, datepickerdialog

我的应用程序中有以下小部件。如果它说设置日期，可以用星期几、月份、月份和年份来替换它。例如 2012 年 11 月 7 日星期三？

我在 htc 上运行 Android 4，而我知道如果我在 Android 2.3.3 上运行相同的代码，日期会以我想要的方式显示。

![在此处输入图像描述](../Images/6ad23c8bc4bcdf18cfa5ddb03c4fcd0c.png)

.[更新1]

```
@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date

            return new DatePickerDialog(this,2 ,datePickerListener, year, month, day);
        }
        return null;
    } 
```

.[更新2]

```
@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date

            final DateFormat df = DateFormat.getDateInstance(0);
              final Calendar mCal = Calendar.getInstance();
               // Create a date picker dialog
               DatePickerDialog datePickerDialog = new DatePickerDialog(this,2,datePickerListener, year, month, day){
                   @Override
                   public void onDateChanged(DatePicker view, int year,int month, int day){
                       mCal.set(Calendar.YEAR, year);
                        mCal.set(Calendar.MONTH, month);
                        mCal.set(Calendar.DAY_OF_MONTH, day);
                       setTitle(df.format(mCal.getTime()));
                   }
               };
            return datePickerDialog;
            //return new DatePickerDialog(this,2 ,datePickerListener, year, month, day);
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:12:23.907

如果您只想使用当前日期对其进行初始化以提醒今天是什么（或者至少不需要在用户与选择器交互时更改它），您可以通过创建一个临时变量并调用该[`setTitle(CharSequence)`](https://developer.android.com/reference/android/app/AlertDialog.html#setTitle%28java.lang.CharSequence%29)方法来完成在它上面（因为`DatePickerDialog`延伸`AlertDialog`）

例如：

```
case DATE_DIALOG_ID:
      // set date picker as current date
      DatePickerDialog dpd = new DatePickerDialog(this, 2, datePickerListener,
                                                  year, month, day);
      dpd.setTitle("Today is: " + year + "-" + (month + 1) + "-" + day);
      return dpd; 
```

好吧，我对格式有点懒，很明显，但我希望你明白基本的想法。

如果您希望标题在他们更改选择器上的日期时更新，这会涉及更多，但我无法想象这就是您想要的（除非重点是在上下文中查看星期几他们正在改变它？）。如果是，请告诉我，我会详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:42:27.863

是的。我用下面的代码做到了。你必须根据你的要求进行更改。

```
dPicker.init((previouslyEnteredDate.getYear() + 1900),
                        previouslyEnteredDate.getMonth(),
                        previouslyEnteredDate.getDate(), null); 
```

# charts - JavaFX 2.x：如何编辑在 XY LineChart 上绘制的线条？

> ID：13266542
> 
> 赞同：5
> 
> 时间：2012-11-07T09:17:11.850
> 
> 标签：charts, line, javafx-2

此代码通过鼠标左键单击并移动在图表上绘制线条

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Line;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.stage.Stage;

public class Lines extends Application {

Path path;

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage stage) {

    final CategoryAxis xAxis = new CategoryAxis();
    final NumberAxis yAxis = new NumberAxis(1, 21, 0.1);
    yAxis.setTickUnit(1);
    yAxis.setPrefWidth(35);
    yAxis.setMinorTickCount(10);
    yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {
        @Override
        public String toString(Number object) {
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
        }
    });
    final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);

    lineChart.setCreateSymbols(false);
    lineChart.setAlternativeRowFillVisible(false);
    lineChart.setLegendVisible(false);

    XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 4));
    series1.getData().add(new XYChart.Data("Mar", 2.5));
    series1.getData().add(new XYChart.Data("Apr", 5));
    series1.getData().add(new XYChart.Data("May", 6));
    series1.getData().add(new XYChart.Data("Jun", 8));
    series1.getData().add(new XYChart.Data("Jul", 12));
    series1.getData().add(new XYChart.Data("Aug", 8));
    series1.getData().add(new XYChart.Data("Sep", 11));
    series1.getData().add(new XYChart.Data("Oct", 13));
    series1.getData().add(new XYChart.Data("Nov", 10));
    series1.getData().add(new XYChart.Data("Dec", 20));

    BorderPane bp = new BorderPane();
    bp.setCenter(lineChart);
    Scene scene = new Scene(bp, 800, 600);
    lineChart.setAnimated(false);
    lineChart.getData().addAll(series1);

    Lines.MouseHandler mh = new Lines.MouseHandler( bp );
    bp.setOnMouseClicked( mh );
    bp.setOnMouseMoved( mh );

    stage.setScene(scene);

    path = new Path();
    path.setStrokeWidth(1);
    path.setStroke(Color.BLACK);

    scene.setOnMouseDragged(mh);
    scene.setOnMousePressed(mh);
    bp.getChildren().add(path);
    stage.setScene(scene);
    stage.show();
}

class MouseHandler implements EventHandler< MouseEvent > {
private boolean gotFirst    = false;
private Line    line;
private Pane    pane;
private double  x1, y1, x2, y2;

public MouseHandler( Pane pane ) {
    this.pane = pane;
}    
@Override
public void handle( MouseEvent event ) {
    if( event.getEventType() == MouseEvent.MOUSE_CLICKED ) {
        if( !gotFirst ) {
            x1 = x2 = event.getX();
            y1 = y2 = event.getY();
            line = new Line( x1, y1, x2, y2 );

            pane.getChildren().add( line );

            gotFirst = true;
        } 
        else {
            line = null;
            gotFirst = false;
        }
    } 
        else {
            if( line != null ) {
                x2 = event.getX();
                y2 = event.getY();
                // update line
                line.setEndX( x2 );
                line.setEndY( y2 );
        }
      }
    }
  }
} 
```

我的问题是：绘制后如何编辑这些线条？

例如，一旦绘制了一条或多条线，我想选择其中一条，然后通过鼠标右键单击并使用弹出菜单，将其删除，修改长度，（使其更短或更长）或改变线斜率。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T00:38:05.400

以下修改将添加使用鼠标左键拖动时移动线条的功能。此外，当用鼠标右键单击时，该行将被删除。

这是行处理程序回调类。

```
class LineHandler implements EventHandler< MouseEvent > {
    double  x, y;
    Pane pane;

    public LineHandler(Pane pane){
        this.pane = pane;
    }
    @Override
    public void handle( MouseEvent e ) {
        Line l = (Line) e.getSource();

        // remove line on right click
        if( e.getEventType() == MouseEvent.MOUSE_PRESSED
                && e.isSecondaryButtonDown() ) {
            pane.getChildren().remove( l );
        } else if( e.getEventType() == MouseEvent.MOUSE_DRAGGED
                && e.isPrimaryButtonDown() ) {
            double tx = e.getX();
            double ty = e.getY();
            double dx = tx - x;
            double dy = ty - y;
            l.setStartX( l.getStartX() + dx );
            l.setStartY( l.getStartY() + dy );
            l.setEndX( l.getEndX() + dx );
            l.setEndY( l.getEndY() + dy );
            x = tx;
            y = ty;
        } else if( e.getEventType() == MouseEvent.MOUSE_ENTERED ) {
            // just to show that the line is selected
            x = e.getX();
            y = e.getY();
            l.setStroke( Color.RED );
        } else if( e.getEventType() == MouseEvent.MOUSE_EXITED ) {
            l.setStroke( Color.BLACK );
        }
        // should not pass event to the parent
        e.consume();
    }

} 
```

在鼠标处理程序类中创建行处理程序：

```
 private LineHandler lineHandler;

    public MouseHandler( Pane pane ) {
        this.pane = pane;
        lineHandler = new LineHandler(pane);
    } 
```

将处理程序添加到 !gotFirst 的 else 子句中的每一行

```
 } else {
                line.setOnMouseEntered( lineHandler );
                line.setOnMouseExited( lineHandler );
                line.setOnMouseDragged( lineHandler );
                line.setOnMousePressed( lineHandler );
                // to consume the event
                line.setOnMouseClicked( lineHandler );
                line.setOnMouseReleased( lineHandler );
                line = null;
                gotFirst = false;
            } 
```

您可以将行删除功能添加到弹出事件。

# mysql - 将多行数据放入mysql中的列

> ID：13266545
> 
> 赞同：1
> 
> 时间：2012-11-07T09:17:16.670
> 
> 标签：mysql, select

```
SELECT 
  Day, 
  month, 
  year,
  GROUP_CONCAT(total), 
  GROUP_CONCAT(SP_ID)
FROM
(
    SELECT 
      DATE_FORMAT(l.act_date, '%d') AS DAY, 
      DATE_FORMAT(l.act_date, '%M') AS MONTH,
      EXTRACT(YEAR FROM l.act_date) AS YEAR, 
      COUNT(*) as total,l.sp_id 
    FROM lead_activity2 as l
    right outer join salesperson as s on l.sp_id=s.sp_id
    WHERE l.act_name='scb' 
      AND ((l.act_date>='2012-09-07 13:03:27' ) 
      AND (l.act_date<= '2012-11-07 13:03:27')) 
    GROUP BY MONTH, YEAR, DAY, l.sp_id 
    ORDER BY YEAR DESC, MONTH DESC, DAY DESC, l.sp_id DESC
) t GROUP BY day, month, year 
```

[http://sqlfiddle.com/#!2/1514d/3](http://sqlfiddle.com/#!2/1514d/3) - 您可以查看方案和查询，

我想得到的是

```
18 | october | 2012 | 0,0,1,1 | 6,5,4,3 
```

spid 6 和 spid 5 在 10 月 18 日没有数据，但仍应显示尝试进行右连接和右外连接似乎都不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:20:27.133

[**`GROUP_CONCAT`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)像这样使用：

```
SELECT 
  Day, 
  month, 
  year,
  GROUP_CONCAT(total), 
  GROUP_CONCAT(SP_ID)
FROM
(
    SELECT 
      DATE_FORMAT(l.act_date, '%d') AS DAY, 
      DATE_FORMAT(l.act_date, '%M') AS MONTH,
      EXTRACT(YEAR FROM l.act_date) AS YEAR, 
      COUNT(*) as total,l.sp_id 
    FROM lead_activity2 as l 
    WHERE l.act_name='scb' 
      AND ((l.act_date>='2012-09-07 13:03:27' ) 
      AND (l.act_date<= '2012-11-07 13:03:27')) 
    GROUP BY MONTH, YEAR, DAY, l.sp_id 
    ORDER BY YEAR DESC, MONTH DESC, DAY DESC, l.sp_id DESC
) t GROUP BY day, month, year 
```

## [更新的 SQL Fiddle](http://sqlfiddle.com/#!2/5aff7/3)

**更新：**是的，您可以这样做，但用于`LEFT JOIN`包含不匹配`sp_id`的 . 这些不匹配的 id 将有一个使用值来`NULL`用`IFNULL`零显示它，如下所示：

```
SELECT 
  Day, 
  month, 
  year,
  GROUP_CONCAT(total) Total, 
  GROUP_CONCAT(SP_ID) 'List of sp_ids'
FROM
(
  SELECT
    DATE_FORMAT(l.act_date, '%d') AS DAY, 
    DATE_FORMAT(l.act_date, '%M') AS MONTH, 
    EXTRACT(YEAR FROM l.act_date) AS YEAR, 
    COUNT(*) as total,
    IFNULL(s.sp_id , 0) sp_id
  FROM lead_activity2 as l 
  LEFT JOIN salesperson s ON l.sp_id = s.sp_id
  WHERE l.act_name='scb' 
    AND ((l.act_date>='2012-09-07 13:03:27' )
    AND (l.act_date<= '2012-11-07 13:03:27')) 
  GROUP BY MONTH, YEAR,DAY,s.sp_id 
) t
ORDER BY YEAR DESC, 
         MONTH DESC, 
         DAY DESC, 
         sp_id DESC 
```

## [更新 SQL Fiddle 演示](http://sqlfiddle.com/#!2/0438d/8)

# storyboard - xcode 4.3.2如何以编程方式使用模态segue更改视图

> ID：13266547
> 
> 赞同：1
> 
> 时间：2012-11-07T09:17:16.207
> 
> 标签：storyboard, modal-dialog, nstimer, segue

嘿伙计们，在这种情况下我需要帮助，我需要在 4 秒后使用模态 segue 转移到另一个视图.. 但是当我运行它时，它显示的只是一个空白视图.. 我做错了什么.. 我真的还是一个有xcode的新手任何想法/建议真的很有帮助..谢谢这是我的代码..

```
-(void)onTimer
{
    mainInt += 1;
    if(mainInt == 4)
    {
        Game2ViewController *gameStart = [[Game2ViewController alloc] initWithNibName: @"Game2ViewController" bundle: nil];
        [self presentModalViewController: gameStart animated: YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:01:00.013

```
-(void)onTimer 
{ 
mainInt += 1; 
if(mainInt == 4) 
{ 
[self performSegueWithIdentifier:@"NextView" sender:self]; 
} 
} 
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{ 
if ([segue.identifier isEqualToString:@"NextView"]) 
{ Game2ViewController *gameStart = [[Game2ViewController alloc] init]; } } 
```

# jquery - Grails + jQuery：formRemote onSuccess

> ID：13266557
> 
> 赞同：1
> 
> 时间：2012-11-07T09:17:56.823
> 
> 标签：jquery, forms, grails

我正在努力使用该`<g:formRemote/> onSuccess`方法以及如何`JavaScript`正确调用我的自定义函数。

我有以下`formRemote`元素：

```
<g:formRemote name="userSearchRemoteForm"
                      url="[controller: 'userSearch', action: 'ajaxFindUser']"
                      onLoading="jQuery('#userSearchSubContainerHeadLoaderImage').show()"
                      onSuccess="createUserTable(data)"
                      onComplete="jQuery('#userSearchSubContainerHeadLoaderImage').hide()">
....</g:formRemote> 
```

在调试模式下，我看到该`Controller`函数`ajaxFindUser`被调用并返回一个像这样的有效 JSON 对象（来自`console`with `prettyPrint == true`）：

```
{"success": {
"376440": {
  "phone": "",
  "email": "janeDoe@test.com",
  "lastname": "Doe",
  "firstname": "Jane"
},
"4146": {
  "phone": "555-123456789",
  "email": "johnDoe@test.com",
  "lastname": "Doe",
  "firstname": "John"
}
}} 
```

我的`JavaScript`功能`createUserTable`如下所示：

```
function createGuestTable(data) {
console.log(data);
} 
```

我在 WebDev Tool 中看到的只是以下响应：

```
POST http://localhost:8080/GrailsTest001/userSearch/ajaxFindUser 404 (Not Found) 
```

我的函数永远不会被调用。我也尝试这样`JavaScript function`调用`onSuccess`：

```
onSuccess="createUserTable()" 
```

但我仍然得到相同的结果......

我在这里做错了什么？

* * *

**编辑：**清除事情 - 这是我的`Controller`功能：

```
def ajaxFindUser(UserSearchCommand userSearchCommand) {
    println("... in ajaxFindUser()")
    def result = [:]

    if (userSearchCommand.hasErrors()) {
        result['fail'] = "Error in search values!"
    } else {
        println("... creating values for search...")
        def user = (User) session.getValue(theUser)
        def inputMap = createInputMap(userSearchCommand)

        def foundUsers = userSearchService.findUser(user.connectionID, user.language, inputMap)

        if (foundUsers == null) {
            println("... search returned NULL!")
            result = [:]
            result['fail'] = userSearchService.getError()
        } else {
            println("... search returned VALUES!!")
            result['success'] = foundUsers
        }
    }

    def jResult = result as JSON

    println(".... returning JSON: ${jResult.toString(true)}")
    return jResult
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:45:36.507

天啊！我正面临着这个问题，但根本没有意识到这将是一个问题......

我刚刚将`ajaxFindUser`函数的最后一行从

```
return jResult 
```

到

```
render jResult 
```

使用以下`onSuccess`参数

```
onSuccess="createUserTable(data)" 
```

一切正常！

对不起……

# iphone - 界面生成器中主 UIView 的 X 和 Y 坐标不是 0,0

> ID：13266560
> 
> 赞同：0
> 
> 时间：2012-11-07T09:18:07.980
> 
> 标签：iphone, ios, xcode, interface-builder

> **可能重复：**
> [故事板奇怪的控制器视图框架起源](https://stackoverflow.com/questions/13191941/storyboard-weird-controller-view-frame-origins)

在下面的屏幕截图中，主视图的 X 和 Y 坐标应该是 0,0（因为它只是默认情况下坚持屏幕边界的主视图）为什么它们显示为 160, 294 ？

![在此处输入图像描述](../Images/4c4b081f1ca96633209315f50e859d6d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:27:04.957

看这个截图你可以从这个截图中得到答案![看xcode的截图](../Images/6d00d4c8c6600b0320c6ebc76d10436c.png)

# android - 地图标记作为带有黑色边框的企业徽标

> ID：13266566
> 
> 赞同：0
> 
> 时间：2012-11-07T09:18:39.240
> 
> 标签：android, android-mapview, border

我正在创建 MapView 应用程序，我必须在其中显示其 URL 来自服务器的带有黑色边框的业务徽标。我已经在 MapView 上显示了企业徽标，但是我可以如何以及在何处围绕企业徽标绘制边框。我看过画圆的代码：

```
 @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setStrokeWidth(2.0f);
    double latitude = 37.819586;
    double longitude = -122.478532;
    Projection projection = mapView.getProjection();
    GeoPoint leftGeo = new GeoPoint((int) (latitude * 1e6),
            (int) (longitude * 1e6));
    Point left = new Point();
    projection.toPixels(leftGeo, left);

    paint.setColor(Color.parseColor("#00CCFF"));
    paint.setStyle(Style.FILL);
    canvas.drawCircle(left.x, left.y, 9, paint);
    paint.setColor(Color.parseColor("#003399"));
    paint.setStyle(Style.STROKE);
    canvas.drawCircle(left.x, left.y, 19, paint);
    canvas.drawRect(left.x,left.y,left.x, left.y, paint);

    super.draw(canvas, mapView, false);
} 
```

它只是画圈。我想在方形图像周围绘制边框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:39:20.690

您正在为绘制矩形传递相同的值，即（左、上、右、下）它应该是

```
drawRect (float left, float top, float right, float bottom, Paint paint) 
```

参考[API 文档](http://developer.android.com/reference/android/graphics/Canvas.html#drawRect%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)

你正在传递 canvas.drawRect(left.x,left.y, **left.x, left.y** , paint); 右下角

# c# - Automapper - 返回正确的值但不映射

> ID：13266570
> 
> 赞同：0
> 
> 时间：2012-11-07T09:18:51.847
> 
> 标签：c#, asp.net-mvc, entity-framework, automapper

在我的 MVC web 应用程序中，我得到了以下自动映射器代码：

**配置：**

```
 public static void Configure()
        {
            Mapper.CreateMap<string, List<Ruimte>>().ConvertUsing<StringCombinatieRuimtesConverter>();
        } 
```

**自定义转换器：**

```
public class StringCombinatieRuimtesConverter : ITypeConverter<string, List<Ruimte>>
    {
        #region Implementation of ITypeConverter<in string,out List<Ruimte>>

        public List<Ruimte> Convert(ResolutionContext context)
        {
            if (context.SourceValue == null)
            {
                return new List<Ruimte>();
            }

            return context.SourceValue.ToString().Split(',').Select(r => new Ruimte { Id = int.Parse(r) }).ToList();
        }

        #endregion
    } 
```

**我用以下代码调用它：**

```
 var ruimteList = new List<Ruimte>();

            // Update the CombinatieVan
            Mapper.Map(command.CombinatieRuimteVan, ruimteList); 
```

如果我调试 command.CombinatieRuimteVan 是：2,3,4,6。这可以。现在，如果我调试转换器，它会返回 4 个“Ruimte”类的对象，其 ID 为前面所述的数字。但是在 Mapper.Map 方法完成后，“ruimteList”仍然是一个空列表。

有谁知道这里出了什么问题？自动映射器在我的应用程序的另一个位置上运行良好，在该位置我自动映射包含“CombinatieRuimteVan”集的整个实体。但是当我单独将字符串转换为列表时，它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:40:36.270

在您的转换器中，您已将创建的对象实例添加到目标 List<>。List<> 应该可以通过 context.DestinationValue 访问。如果您不考虑 context.DestinationValue，则您的映射对象仅作为 Map() 方法的结果返回。您的转换器应该看起来像这样：

```
public class StringCombinatieRuimtesConverter : ITypeConverter<string, List<Ruimte>>
{
    #region Implementation of ITypeConverter<in string,out List<Ruimte>>

    public List<Ruimte> Convert(ResolutionContext context)
    {
        if (context.SourceValue == null)
        {
            return new List<Ruimte>();
        }

        var list = context.SourceValue.ToString().Split(',').Select(r => new Ruimte { Id = int.Parse(r) }).ToList();
        List<Ruimte> destinationList = context.DestinationValue as List<Ruimte>;
        if (destinationList != null)
        {
            destinationList.AddRange(list);
        }
        return list;
    }

    #endregion
} 
```

# operating-system - 如果我们在硬件设备上安装设备驱动程序而不是在操作系统中安装它们以与硬件接口呢？

> ID：13266572
> 
> 赞同：1
> 
> 时间：2012-11-07T09:18:57.180
> 
> 标签：operating-system, drivers, hardware-interface

好的，我要再问一次。在较早的问题中，我无法准确发布我打算获取的信息。

硬件设备的设备驱动程序安装在操作系统中，这些驱动程序驻留在系统内核中。操作系统通过设备驱动程序与硬件设备进行通信。如果设备驱动程序直接安装在硬件设备上而不是安装在操作系统中会怎样。这样做会有什么后果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:09:20.990

如果我明白你的意思；我的猜测是您错过了有关驱动程序的关键点。

**这是相当简化的，不能从字面上理解；用它来帮助自己了解驱动程序的作用 驱动程序**

到底是什么？
它们是一段代码，可让内核以方便的方式读取、写入并通常与特定设备进行交互。

你可以把它扔掉；每次都使用 IRQ 检查和内存地址（以及更多附加功能，如修剪帧、缓冲、检查数据完整性、使用非常依赖硬件的例程在 NIC 或其他设备中执行任务等）来执行此操作，但是这个这是没有意义的，因为每次您想使用设备时都必须编写成百上千行代码，而且一旦在不同的机器上运行，您的代码就会崩溃。

所以我们要做的是为给定的设备编写这样的代码并加载（主要通过内核模块，在 Linux 中）它，以便内核可以使用它。

这段代码有什么作用？
它只是为给定的设备类型提供到内核的标准接口；它提供了内核（和用户空间程序）在想要与给定设备类型交互时可以调用的函数列表（现在实现/整个驱动程序可能会在不同型号/供应商的相同设备之间发生变化，但对你来说界面将保持不变）

为什么你总是需要司机？
因为再次，设备驱动程序是一种以方便的方式处理特定硬件的方法。假设您在硬件中获得了驱动程序，那么您将需要一段代码来处理内核中的设备，然后才能有效地与硬件中的其余（驱动程序）进行通信。

我给你举个例子，我处理过的所有 NIC 都在物理级别提供帧，但不在 DataLink 级别，所以 NIC 会为你的以太网帧添加前导码和 FCS，但你仍然必须编写MAC，为上层设置正确的缓冲，在您自己的驱动程序代码中检查您自己的健全性，并为数据包进行分配以向上移动（除其他外）。

因此，如果您的供应商在硬件本身中提供了某些功能，它仍然无法提供完整的驱动程序，因为您至少需要实现接口，以便内核可以有效地使用该设备。

# iphone - 如何停止 NSRunLoop

> ID：13266575
> 
> 赞同：1
> 
> 时间：2012-11-07T09:19:10.153
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nsrunloop

我有一个每 5 分钟调用一次的后台方法。

该方法用于`NSURLConnection`将数据发送到 Web 服务。
在那种方法中，我有这个代码：

```
...
conn =  [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:NO];
    NSPort* port = [NSPort port];
    NSRunLoop* rl = [NSRunLoop currentRunLoop];
    [rl addPort:port forMode:NSDefaultRunLoopMode];
    [conn scheduleInRunLoop:rl forMode:NSDefaultRunLoopMode];
    [conn start];
    [rl run];
... 
```

因为我在后台调用 WS，所以我使用此代码，因为没有此委托方法（didReceiveData、didFail ... 等）永远不会被调用。

我从[http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)

得到 这个技巧**问题**是当 5 分钟过去了，这个方法第一次被调用它不等待下一个 5 分钟再次调用，但几乎每秒调用一次网络服务。
我认为我应该以某种方式使这个 NSRunLoop 无效，但不知道如何以及在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:29:51.963

如果您想知道为什么在您的连接处于后台时没有调用委托方法：如果您将连接放在后台队列中，队列完成后它会被推开，因此您不会得到您的委托回调。连接必须在主队列中，以便它保持在运行循环中以发生回调。或者，在您的情况下，创建它自己的运行循环。

如果您不想处理运行循环，您只需将连接放在主队列中：

```
dispatch_async(dispatch_get_main_queue(), ^(void){
    conn =  [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:NO];
    [conn start];
} 
```

然后你应该得到你的委托回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T13:47:14.537

作为参考和原始问题如何使 a 无效`[[NSRunLoop currentRunLoop] run]`：你不能。

[请参阅文档](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/index.html#//apple_ref/occ/instm/NSRunLoop/run)如何实现可以终止的运行循环：

```
BOOL shouldKeepRunning = YES;        // global
NSRunLoop *theRL = [NSRunLoop currentRunLoop];
while (shouldKeepRunning && [theRL runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]); 
```

# vba - 识别 Excel 中的唯一行

> ID：13266576
> 
> 赞同：2
> 
> 时间：2012-11-07T09:19:19.900
> 
> 标签：vba, excel, reporting

我有一个包含超过 20,000 行和 20/30 列的 Excel 电子表格。

识别唯一行的最简单方法是什么 - 即迭代行并生成数据表中唯一行数总和的过程？

我希望这在工作表中是独立的 - 即宏，但如果上述方法因任何原因被认为不合适，我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:23:49.500

连接所有行的所有字段并计算出现次数，只需使用工作表函数。否则，通过 vba 脚本执行此操作，从当前行的下一行到最后一行创建一个循环以查找重复项，并在找到重复项时退出它。

当你再次陷入困境时发布你的脚本。

# jpa - JPA：持久化重复使用的集合项目@ManyToMany

> ID：13266577
> 
> 赞同：1
> 
> 时间：2012-11-07T09:19:26.447
> 
> 标签：jpa, eclipselink

存在持续单向 @ManyToMany 关系的问题。我将 EclipseLink 2.3 与 Spring 数据和 MySQL 一起使用。

实体伪代码：

```
@Entity
public class Subscriber {
@Id @GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@ManyToMany(cascade = {CascadeType.MERGE, CascadeType.PERSIST})
private List<SubscribersList> subscribersLists;

//...shortened...
}

@Entity
public class SubscribersList {
@Id @GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
private String title;

//...shortened...
} 
```

接下来在某些服务中，我创建新列表和两个订阅者...

```
list = new SubscribersList("DEFAULT");
s1 = new Subscriber();
s1.getSubscribersList().add(list); //empty list is created in the constructor
repository.save(s1); //works ok
s2 = new Subscriber();
s2.getSubscribersList().add(list);
repository.save(s2); //fails with Duplicate entry '2' for key 'PRIMARY' 
```

保存第一个订阅者后，列表成为托管实体，但尽管如此保存第二个订阅者 JPA 尝试再次创建列表：

```
Call: INSERT INTO SUBSCRIBERSLIST (ID, DESCRIPTION, TITLE) VALUES (?, ?, ?)
bind => [2, null, DEFAULT] 
```

有趣的是，我与内存 hsqldb 的集成测试有效。显然我错过了一些东西，但无法发现问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:39:46.303

保存（）做什么？

问题很可能是您的对象已被分离，因此永远不要分配它们的 id，因此没有任何东西将它们与托管对象相关联。

您需要保留而不是合并它们（并确保使用未分离的托管对象）。或返回 id，或在保存后执行查找，以确保您使用的是有效对象。

# c# - N分钟后如何从通用列表中删除项目？

> ID：13266579
> 
> 赞同：3
> 
> 时间：2012-11-07T09:19:26.923
> 
> 标签：c#, list, generics

我有一个如下列表：

```
private List<DateTime> _result = new List<DateTime(); 
```

我给它增加了价值，比如

```
_result.Add(DateTime.Now); 
```

要求是每个添加的项目都应在 5 分钟期限内从列表中删除。

我在想我可以创建一个计时器，它每例如 1 分钟检查一次我的列表并找到旧项目并删除它们，但我希望有一个更简单的方法？

如何实施？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:25:40.903

这是我对此的看法：

```
public class DateWrapper
{
    private ConcurrentBag<DateWrapper> list;
    private DateTime time;

    public DateTime Time
    {
        get { return time; }
    }

    private Timer timer;

    public DateWrapper(ConcurrentBag<DateWrapper> _list, DateTime _time)
    {
        list = _list;
        time = _time;

        list.Add(this);

        timer = new Timer();
        timer.Interval = 300000; // 5 Minutes
        timer.Tick += new EventHandler(Tick);
        timer.Start();
    }

    private void Tick(object sender, EventArgs e)
    {
        list.Remove(this);
    }
} 
```

以上适用于小项目列表。列表太大，你会得到太多的计时器......并且性能会受到影响。

因此，如果您必须处理很多项目，这是一种通用的方法：

```
public class ExpirableList<T> : IList<T>
{
    private volatile List<Tuple<DateTime, T>> collection = new List<Tuple<DateTime,T>>();

    private Timer timer;

    public int Interval
    {
        get { return timer.Interval; }
        set { timer.Interval = value; }
    }

    private TimeSpan expiration;

    public TimeSpan Expiration
    {
        get { return expiration; }
        set { expiration = value; }
    }

    /// <summary>
    /// Define a list that automaticly remove expired objects.
    /// </summary>
    /// <param name="_interval"></param>
    /// The interval at which the list test for old objects.
    /// <param name="_expiration"></param>
    /// The TimeSpan an object stay valid inside the list.
    public ExpirableList(int _interval, TimeSpan _expiration)
    {
        timer = new Timer();
        timer.Interval = _interval;
        timer.Tick += new EventHandler(Tick);
        timer.Start();

        expiration = _expiration;
    }

    private void Tick(object sender, EventArgs e)
    {
        for (int i = collection.Count - 1; i >= 0; i--)
        {
            if ((DateTime.Now - collection[i].Item1) >= expiration)
            {
                collection.RemoveAt(i);
            }
        }
    }

    #region IList Implementation
    public T this[int index]
    {
        get { return collection[index].Item2; }
        set { collection[index] = new Tuple<DateTime, T>(DateTime.Now, value); }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return collection.Select(x => x.Item2).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return collection.Select(x => x.Item2).GetEnumerator();
    }

    public void Add(T item)
    {
        collection.Add(new Tuple<DateTime, T>(DateTime.Now, item));
    }

    public int Count
    {
        get { return collection.Count; }
    }

    public bool IsSynchronized
    {
        get { return false; }
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public void CopyTo(T[] array, int index)
    {
        for (int i = 0; i < collection.Count; i++)
            array[i + index] = collection[i].Item2;
    }

    public bool Remove(T item)
    {
        bool contained = Contains(item);
        for (int i = collection.Count - 1; i >= 0; i--)
        {
            if ((object)collection[i].Item2 == (object)item)
                collection.RemoveAt(i);
        }
        return contained;
    }

    public void RemoveAt(int i)
    {
        collection.RemoveAt(i);
    }

    public bool Contains(T item)
    {
        for (int i = 0; i < collection.Count; i++)
        {
            if ((object)collection[i].Item2 == (object)item)
                return true;
        }

        return false;
    }

    public void Insert(int index, T item)
    {
        collection.Insert(index, new Tuple<DateTime, T>(DateTime.Now, item));
    }

    public int IndexOf(T item)
    {
        for (int i = 0; i < collection.Count; i++)
        {
            if ((object)collection[i].Item2 == (object)item)
                return i;
        }

        return -1;
    }

    public void Clear()
    {
        collection.Clear();
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:23:59.350

您可以使用后台线程，它将遍历列表并删除不需要的元素。

```
public void RemoveDates()
        {
            var checkDatesTask= new Task(
                () =>
                    {
                        while (!_cancelationTokenSource.IsCancellationRequested)
                        {
                            //TODO: check and delete elements here

                            _cancelationTokenSource.Token.WaitHandle.WaitOne(
                                TimeSpan.FromSeconds(
                                   5));
                        }
                    },
                _cancelationTokenSource.Token,
                TaskCreationOptions.LongRunning);
            checkDatesTask.Start();
        } 
```

ps 我建议您阅读有关异步的更多信息。操作。

# c# - 复杂的 Linq c# 查询

> ID：13266580
> 
> 赞同：3
> 
> 时间：2012-11-07T09:19:29.350
> 
> 标签：c#, linq

我在 LinqPad 中试过这个

我有以下数据和 linq 查询，它应该只返回 1 条记录和 2 张图像，但返回 2 条记录和 4 张图像。

我知道我有问题，但不知道是什么。我正在寻找用户详细信息 + 汽车详细信息 + 用户图片：0b3c2ba5-1538-4557-a6c0-7de701fd83e7

这与出价有关，因为当我删除他为用户 (0b3c2ba5-1538-4557-a6c0-7de701fd83e7 ) 的出价之一时，我得到 1 条记录和 2 张图像

**表格
------**

## 表出价

```
id      cardid  bidamount   dateplaced          usedid  

43  83  625 2012-11-05 16:12:51.600 a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc  
44  86  575 2012-11-05 16:15:02.257 a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc  
45  83  650 2012-11-05 16:15:07.283 a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc  
46  86  600 2012-11-05 17:45:04.140 a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc  
47  86  625 2012-11-05 17:45:08.867 a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc  
49  83  750 2012-11-07 13:40:37.590 0b3c2ba5-1538-4557-a6c0-7de701fd83e7  
52  83  850 2012-11-08 13:40:37.590 0b3c2ba5-1538-4557-a6c0-7de701fd83e7 
```

## 表用户详细信息

```
userid                                  city    state  
0b3c2ba5-1538-4557-a6c0-7de701fd83e7    Sydney  NSW 
```

## 桌车

```
id  name     descr   listingOption priceStarting priceReserve  
83  Valiant  Old Car     2              1000         1500  
86  Volvo    Safe Car    3              3000         4500 
```

## 表拍卖图像

```
id         image                                              belongs_to  
71  images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/alpaca.JPG  83  
72  images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/a_bag.jpg   83  
75  images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/alpaca.JPG  86  
76  images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/a_bag.jpg   86 
```

**询问 - - -**

```
 var query = (from c in cars
                         from ud in users_details
                         from bd in bids
                         orderby c.listingOption descending
                         where a.userID == ud.userid
                        && c.id == bd.carID
                        && c.enabled == true
                        && bd.userID == new Guid("0b3c2ba5-1538-4557-a6c0-7de701fd83e7")
                         let images = from ai in auction_images
                                      where ai.belongs_to == c.id
                                      select ai

                         let bid = (from b in bids
                                    orderby b.id descending
                                    where b.carID == c.id
                                    select b.bidamount).FirstOrDefault()
                         select
                         new
                         {
                             images,
                             bidamount = (bid != null ? bid : 0),
                             ud.city,
                             ud.state,
                             c.name,
                             c.descr,
                             c.id,
                             c.listingOption,
                             c.priceStarting,
                             c.priceReserve,
                             bd.userID
                         }
                         );

query.Distinct().Dump(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:49:37.447

> 我正在寻找用户详细信息 + 汽车详细信息 + 用户图片：0b3c2ba5-1538-4557-a6c0-7de701fd83e7

根据您在该行中所说的话，您可以通过将查询分成 3 个单独的查询并使用不同的汽车 ID 函数来实现您的目标。

行动过程如下：

1.  从当前用户的出价表中查找所有不同的汽车 ID
2.  查找与步骤 1 中的数据对应的所有图像（和用户/汽车详细信息）

代码将是这样的：

var carIDs = bids.Where(x=>x.usedid == new Guid("0b3c2ba5-1538-4557-a6c0-7de701fd83e7")).Select(x=>x.cardid).Distinct();

然后您可以选择用户详细信息和图像（在两个单独的查询中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:24:49.793

这是非常大的家庭作业。干得好，

使用这个查询，

```
 var query = from bd in lstbids
                    group bd by new { carid = bd.carid, userid = bd.userid } into gbd
                    join ud in lstuserdetails on gbd.First().userid equals ud.userid
                    join c in lstcars on gbd.First().carid equals c.id
                    where c.enabled && ud.userid == new Guid("0b3c2ba5-1538-4557-a6c0-7de701fd83e7")
                    select new
                    {
                        images = lstaction_images.Where(ai => ai.belongs_to == c.id),
                        bidamount = lstbids.Where(b => b.carid == c.id).OrderByDescending(b => b.id).Select(b => b.bidamount).DefaultIfEmpty(0).FirstOrDefault(),
                        ud.city,
                        ud.state,
                        c.name,
                        c.descr,
                        c.id,
                        c.listingOption,
                        c.priceStarting,
                        c.priceReserve,
                        gbd.FirstOrDefault().userid
                    }; 
```

**注意**：这个查询可以用更好的方式编写。

这是示例表（我将您的表视为我的列表）：

**表/类**

```
public class userdetails
{ 
    public Guid userid { get; set; }
    public string city { get; set; }
    public string state { get; set; }
}

public class bids
{
    public int id { get; set; }
    public int carid { get; set; }
    public int bidamount { get; set; }
    public DateTime dateplaced { get; set; }
    public Guid userid { get; set; }
}

public class  cars
{
    public int id { get; set; }
    public string name { get; set; }
    public string descr { get; set; }
    public int listingOption { get; set; }
    public int priceStarting { get; set; }
    public int priceReserve { get; set; }
    public bool enabled { get; set; }
}

public class action_images
{
    public int id { get; set; }
    public string image { get; set; }
    public int belongs_to { get; set; }
} 
```

**数据/记录**

```
 List<bids> lstbids = new List<bids>
        { 
            new bids {id= 43, carid=83, bidamount=625, dateplaced=Convert.ToDateTime("2012-11-05 16:12:51.600"), userid=new Guid("a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc") }, 
            new bids {id= 44, carid=86, bidamount=575, dateplaced=Convert.ToDateTime("2012-11-05 16:15:02.257"), userid=new Guid("a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc")  },
            new bids {id= 45, carid=83, bidamount=650, dateplaced=Convert.ToDateTime("2012-11-05 16:15:07.283"), userid=new Guid("a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc")  },
            new bids {id= 46, carid=86, bidamount=600, dateplaced=Convert.ToDateTime("2012-11-05 17:45:04.140"), userid=new Guid("a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc")  },
            new bids {id= 47, carid=86, bidamount=625, dateplaced=Convert.ToDateTime("2012-11-05 17:45:08.867"), userid=new Guid("a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc")  },
            new bids {id= 49, carid=83, bidamount=750, dateplaced=Convert.ToDateTime("2012-11-07 13:40:37.590"), userid=new Guid("0b3c2ba5-1538-4557-a6c0-7de701fd83e7")  },
            new bids {id= 52, carid=83, bidamount=850, dateplaced=Convert.ToDateTime("2012-11-08 13:40:37.590"), userid=new Guid("0b3c2ba5-1538-4557-a6c0-7de701fd83e7") },
        };

        List<userdetails> lstuserdetails = new List<userdetails>
        {
            new userdetails { userid = new Guid ("0b3c2ba5-1538-4557-a6c0-7de701fd83e7"), city = "Sydney", state = "NSW"},
        };

        List<cars> lstcars = new List<cars>
        {
            new cars {id = 83, name = "Valiant", descr = "Old Car", listingOption = 2, priceStarting = 1000, priceReserve = 1500, enabled = true },
            new cars {id = 86, name = "Volvo", descr = "Safe Car", listingOption = 3, priceStarting = 3000, priceReserve = 4500, enabled = true },
        };

        List<action_images> lstaction_images = new List<action_images>
        {
            new action_images { id = 71 , image = "images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/alpaca.JPG", belongs_to =83 },
            new action_images { id = 72 , image = "images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/a_bag.jpg", belongs_to =83 },
            new action_images { id = 75 , image = "images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/alpaca.JPG", belongs_to =86 },
            new action_images { id = 76 , image = "images/a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc/a_bag.jpg", belongs_to =86 },
        }; 
```

# java - 以 .undefined 为后缀的 JSESSIONID

> ID：13266592
> 
> 赞同：7
> 
> 时间：2012-11-07T09:19:48.623
> 
> 标签：java, session, jakarta-ee, spring-mvc, jboss7.x

我有一个在 Jboss AS 7.1 中运行的 Spring Web MVC 应用程序。当我检查应用程序的会话 id 时（通过使用 Firefox 中的 Firebug 查看会话 cookie），它`.undefined`以它为后缀。例如，

```
Ur1bLe3UDdWJ9xm0ZDbMfZvJ.undefined 
```

我制定了一个示例 servlet 会话程序并检查了会话 ID，它是相同的。我想知道为什么我们有`.undefined`会话 id 的一部分？我认为这不会对应用程序产生任何影响，但想知道为什么会这样创建会话 ID。如果有人知道这件事，请澄清。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-24T23:58:43.870

如果我在 JBOSS 7.1 中没有记错的话，那`.undefined`是因为文件中`instance-id`没有配置`standalone.xml`。

对文件的以下添加`standalone.xml`将用配置的文本替换 .undefined：

```
<subsystem xmlns="urn:jboss:domain:web:1.1"
           默认虚拟服务器=“默认主机”
           本机=“假”
           instance-id="hostA" >
```

这里也有这个讨论：[community.jboss.org](https://community.jboss.org/thread/201760?tstart=0)

# php - 获取具有类 foo 的页面中的第一张图片

> ID：13266594
> 
> 赞同：-4
> 
> 时间：2012-11-07T09:19:58.240
> 
> 标签：php

我正在尝试通过 php 从页面中获取具有特定类的第一张图片

```
<?php
$document = new DOMDocument();
@$document->loadHTML(file_get_contents('http://www.cbsnews.com/8301-501465_162-57471379-501465/first-picture-on-the-internet-turns-20/'));
$lst = $document->getElementsByTagName('img');

for ($i=0; $i<$lst->length; $i++) {
    $image = $lst->item($i);
    echo $image->attributes->getNamedItem('src')->value, '<br />';
}
?> 
```

此代码从页面获取所有图像，我现在正在尝试从此页面获取具有“cnet-image”类的[图像](http://www.cbsnews.com/8301-501465_162-57471379-501465/first-picture-on-the-internet-turns-20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:41:15.033

您应该能够使用 Simple HTML Dom 做您需要做的事情，试一试，我已经将它用于几个类似的事情，包括图像爬虫。[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

看起来您应该能够根据需要使用以下内容。

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

$ret = $html->find('img[class=foo]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:47:03.173

我假设您想检索 HTML 文档中具有特定类属性名称的第一张图像。如果是这种情况，那么这可能会有所帮助。

```
var l = document.images;
var myclass = "myclass";//This is the class you want
var firstImageWithMyClass = null;

for(var i = 0; i<l; i++)
  if(document.images[i].className==myclass){
     firstImageWithMyClass = document.images[i];
     break;
   }

 //Then you can see if an image with that class was found, 
 //then do what you want to do withit here;
 if(firstImageWithMyClass!=null){
    var imageSource = firstImageWithMyClass.src;
    //etc, etc
 } 
```

jQuery 使这更容易。如果您想知道如何使用 jQuery 做同样的事情，请告诉我，我可以与您分享。

# javascript - set with/height of embed iframe like youtube

> ID：13266598
> 
> 赞同：0
> 
> 时间：2012-11-07T09:20:06.087
> 
> 标签：javascript

When you embed a movie from youtube, you have the opportunity to change the width and height of the iframe element. When you type in your desired values, you see that the html code inside the texarea is changed so the user can just copy paste.

How do you make this happen?

This is what I tried:

```
<input type="text" id="width">

<textarea id="code">
    <iframe src="..." width="224" height="144" frameborder="0" id="embed-widget"></iframe>
</textarea>

<script>
$(function() {
    $('#width').keyup(function(){
        var new_width = $(this).val();
        $('#embed-widget').attr('width',new_width);
    });
}); 
```

This don't work inside the textarea, but the exact same code work on the iframe element itself on the page (when I put the id on to it)

Also, is there a easy way to make the whole text marked when the user clicks the text area?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:39:24.490

the iframe element inside the text area is not reachable, it is not real, try logging $("#embed-widget") and you will get an empty array.... what you need to do is after changing the width of the iframe element, get html and set the textarea text to that html

```
$("#myiframe").width(new_width);
$("mytexteare").val($("#myiframe").parent().html());// make sure a parent div contains the iframe only 
```

the other way is to just find the "width" and replace it, like using substring and indexOf of string, or you can have the iframe text as a value of a hidden input, with a {0} in place of width attribute, so u can grab anytime, and perform a replace, then paste in textarea

# php - 如何使用 API 在 magento 中创建可配置的关联产品？

> ID：13266600
> 
> 赞同：1
> 
> 时间：2012-11-07T09:20:06.780
> 
> 标签：php, api, magento, xml-rpc, magento-1.7

我正在`Magento`使用 API 创建 2 个可配置产品和 10 个简单产品。我已经为简单的产品分配了尺寸和颜色值，并且工作正常。现在如何为可配置产品分配特定属性？就像我想将简单的产品分配给可配置的产品一样。有谁知道我们如何将简单的产品添加到可配置产品中？我已经尝试过这个：

[http://www.magentocommerce.com/api/soap/catalog/catalogProductLink/catalog_product_link.assign.html](http://www.magentocommerce.com/api/soap/catalog/catalogProductLink/catalog_product_link.assign.html)

但是将简单的产品分配给具有属性的可配置产品是行不通的。我知道哪些表包含可配置属性。

```
catalog_product_super_attribute
catalog_product_super_attribute_label 
```

我可以修改现有的 API，但我不知道哪个表包含可配置和简单的产品映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:27:51.700

```
Tables used by All Products
-------------------------------------------------
catalog_product_entity                                                                change type_id to “simple”, “configurable” or “grouped”
catalog_product_entity_datetime
catalog_product_entity_decimal
catalog_product_entity_int
catalog_product_entity_text
catalog_product_entity_varchar
catalog_product_entity_media_gallery
catalog_product_entity_media_gallery_value
catalog_product_website

Tables used by Simple Products
--------------------------------
cataloginventory_stock_item
cataloginventory_stock_status

Tables used by Configurable Products
---------------------------------
catalog_product_super_attribute
catalog_product_super_attribute_label
catalog_product_relation
catalog_product_super_link
catalog_product_link

Tables used by Grouped Products
------------------------------------
catalog_product_link_attribute_decimal
catalog_product_link_attribute_int
catalog_product_link
catalog_product_relation 
```

# aem - 取消保护/获取 CQ 中节点的所有权

> ID：13266602
> 
> 赞同：1
> 
> 时间：2012-11-07T09:20:14.503
> 
> 标签：aem, day-cq

我有一个要在 CQ 中导入的大内容包，并且一些节点归用户所有。每次我尝试以管理员身份导入包时，都会收到节点受保护的错误消息。所以我必须冒充这个用户并删除所有权以继续导入过程。是否有一种简单的方法可以作为整个树的管理员用户获得所有权/删除保护？

问候帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:13:29.443

当您通过 Package Manager [1] 界面安装包时，您应该能够告诉 CQ 如何处理访问控制。我认为如果您将**AC 处理**选项设置为 Ignore，则不会应用程序包附带的权限。

[1] [http://dev.day.com/docs/en/crx/current/how_to/package_manager.html#Using%20the%20Package%20Manager](http://dev.day.com/docs/en/crx/current/how_to/package_manager.html#Using%20the%20Package%20Manager)

希望这可以帮助！

# ruby-on-rails - Rails：如何为开发中的资产主机设置端口号

> ID：13266603
> 
> 赞同：0
> 
> 时间：2012-11-07T09:20:13.520
> 
> 标签：ruby-on-rails, asset-pipeline

Rails 允许我将多个资产主机设置为应用程序配置。问题是，我一直在写完整的主机作为论据。也就是说，在开发中，我一直在向它附加“：3000”。一直运行良好，直到有一天我不得不并行运行 2 个项目，其中一个添加到不同的端口（比如 3001）。正如我已经读过的，Rails 应用程序不可能知道 Web 服务器正在侦听哪个端口。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:57:15.723

如果我理解您的问题，您可以手动使用[asset_path](http://guides.rubyonrails.org/asset_pipeline.html)助手而不是完整路径，并将不同的asset_hosts 放入`production.rb`and中`development.rb`。

对于端口问题，在控制器方法内部，您可以从请求中获取它，但是，在外部，我不知道如何做到这一点……您可以尝试`PORT`环境变量。

希望能帮助到你。

# jquery - jQuery悬停效果不起作用

> ID：13266610
> 
> 赞同：0
> 
> 时间：2012-11-07T09:20:35.850
> 
> 标签：jquery, jquery-selectors, jquery-on

我有动态生成的 div 标签，看起来像这样：

```
<div class="widget widget_1">
    <div class="widget_header widget_header_1"></div>
    <div class="widget_sub_header widget_sub_header_1"></div>
    <div class="widget_content widget_content_1"></div>
    <div class="widget_footer widget_footer_1"></div>
<div>

<div class="widget widget_1">
    <div class="widget_header widget_header_1"></div>
    <div class="widget_sub_header widget_sub_header_1"></div>
    <div class="widget_content widget_content_1"></div>
    <div class="widget_footer widget_footer_1"></div>
<div>

<div class="widget widget_6">
    <div class="widget_header widget_header_6"></div>
    <div class="widget_sub_header widget_sub_header_6"></div>
    <div class="widget_content widget_content_6"></div>
    <div class="widget_footer widget_footer_6"></div>
<div> 
```

这些 div 选项卡将根据用户选择生成，所以我不知道它们会同时在屏幕上显示多少，我只知道它们可以在屏幕上显示许多相同的小部件和/或不同的小部件屏幕一下子。

当悬停在任何这些小部件上时，我试图获得悬停效果。我尝试了以下操作，但是将鼠标悬停在`.widget`.

```
$(".widget_content").on({
    mouseenter: function () {
        alert("enter");
    },
    mouseleave: function () {
        alert("leave");
    }
}); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:22:26.710

如果元素是动态添加的，请使用[委托事件方法](http://api.jquery.com/on/)：

```
$("body").on({
    mouseenter: function() {
        alert("enter");
    },
    mouseleave: function() {
        alert("leave");
    }
}, ".widget_content"); 
```

在这里，`body`您可以使用`.widget_content`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:24:20.463

**工作演示** [http://jsfiddle.net/Ex3M6/](http://jsfiddle.net/Ex3M6/)

试穿`$(document).ready(function() {`

休息希望它适合你的事业`:)`

**代码**

```
$(document).ready(function() {
    $(".widget_content").on({
        mouseenter: function() {
            alert("enter");
        },
        mouseleave: function() {
            alert("leave");
        }
    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:24:49.577

用这个：

```
$(".widget_content").hover(
function () {
alert("enter");
},
function () {
alert("leave");
}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:33:37.910

将文本添加到您的 div 标签，否则在您的鼠标悬停的顶部，并且您的容器`div`标签也应该正确地具有关闭标签（即`</div>`）。

```
<div class="widget widget_1">
    <div class="widget_header widget_header_1">dfsdfsdf</div>
    <div class="widget_sub_header widget_sub_header_1">sdfsdf</div>
    <div class="widget_content widget_content_1">sdfsdf</div>
    <div class="widget_footer widget_footer_1">sdfsdfsdf</div>
</div>

<div class="widget widget_1">
    <div class="widget_header widget_header_1">sdfsdf</div>
    <div class="widget_sub_header widget_sub_header_1">ggggg</div>
    <div class="widget_content widget_content_1">aaaaa</div>
    <div class="widget_footer widget_footer_1">ssss</div>
</div>

<div class="widget widget_6">
    <div class="widget_header widget_header_6">sssss</div>
    <div class="widget_sub_header widget_sub_header_6">fgggg</div>
    <div class="widget_content widget_content_6">fdff</div>
    <div class="widget_footer widget_footer_6">dfgdfgdfg</div>
</div> 
```

您的 jquery 代码在此更改后工作，

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">

    $(document).ready(function() {
        $("div[class^='widget_content']").on({
        mouseenter: function () {
            alert("enter");
        },
        mouseleave: function () {
            alert("leave");
        }
        });

});                

</script> 
```

# php - 使用 PHP 通过 IP 地址获取国家、格林威治标准时间、城市

> ID：13266612
> 
> 赞同：1
> 
> 时间：2012-11-07T09:20:37.937
> 
> 标签：php, javascript

我试图通过将Country **、** City**和**GMT**设置**`js`为 cookie 来获取它，然后我将其获取并`PHP`保存到`Database`. 但是我使用的方法有时不起作用，那么，有没有办法单独使用 PHP 来获取它们？还是有另一种使用JS的方法？

我使用**maxmind**`js`提供的这个

 **```
<script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script> 
```

但我经常无法保存数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:23:39.203

[PHP GeoIP 扩展](http://php.net/manual/en/book.geoip.php)可以帮助你**

# sql - 带有order by和limit的父子sql查询

> ID：13266614
> 
> 赞同：0
> 
> 时间：2012-11-07T09:20:40.230
> 
> 标签：sql, sql-order-by, limit, parent-child

我有两张像这样的表格 DOCUMENT 和 ATTRIBUTES

*   `DOCUMENT(id)`,
*   `ATTRIBUTE(name, value, doc_fk)`.

我需要运行一个类似“抽象查询”的查询

```
select top 100 documents
where $state='COMPLETED'
order by $creationDate 
```

where`$state`和`$creationDate`是两个属性。

请注意，限制是针对文档，而不是属性，并且排序和过滤器针对两个不同的属性。最终查询应返回所有文档属性，而不仅仅是过滤/排序的属性。

我能够用一个非常复杂的查询来写这个，我正在寻找更好的选择。如果有用，我可以发布我的解决方案，但我不想指出你可能是错误的方向。

获得一些额外的文档是可以的，比如 1000 个而不是 100 个，并在内存中进行过滤/排序。限制不精确可能没问题，比如 74 而不是所需的限制 100，但离它不太远。

额外的“软”要求：

*   该查询应该适用于多个数据库（oracle、mysql 和 sqlserver），因此除非在所有平台上都可用，否则应避免使用奇怪的分析函数
*   应该与 JPA 一起使用（eclipselink 2.4.0 实现）

预期的输出是这样的

```
DOC_ID   ATTRIBUTE_NAME          VALUE
  123       state              COMPLETED
  123       creationDate       21/11/2012
  123       userid             someone
  456       state              COMPLETED
  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:24:22.307

啊，EAV设计的缺陷。

尝试这个。

```
select 
   top 100
   document.* 

from document   
    inner join attribute astate on document.id = astate.doc_fk
          and astate.name='state'
          and astate.value = 'completed'
    inner join attribute acreation on document.id = acreation.doc_fk
            and acreation.name='creationdate'
order by cast(acreation.value as date) 
```

但是，如果您坚持使用这种 EAV 结构，它只会变得更加复杂。

(PS. MySQL 不使用 TOP，而是使用 LIMIT)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:34:55.270

```
SELECT doc_id, attr_name, attr_val, creationDate FROM 

   (
       SELECT * FROM (
          SELECT 
             doc.id as 'doc_id', attr.name as 'attr_name', null as 'attr_val', attr.value as 'creationDate'  
          FROM 
             ATTRIBUTE attr 
          LEFT JOIN 
             DOCUMENT doc ON attr.doc_fk = doc.id 
          WHERE 
             attr.name='creationDate' 
          ORDER BY creationDate desc;

       ) AS dt1

     UNION ALL

      SELECT * FROM( 
          SELECT 
             doc.id as 'doc_id', attr.name as 'attr_name', attr.value as 'attr_val', null as 'creationDate'  
          FROM 
             ATTRIBUTE attr 
          LEFT JOIN 
             DOCUMENT doc ON attr.doc_fk = doc.id;
      ) as dt2

   ) as dt0 GROUP BY doc_id ORDER by creationDate desc LIMIT 100; 
```

派生表 1 (dt1) 为您提供所有日期属性 - 以便按文档的创建日期对结果进行排序。派生表 2 为您提供所有属性.. 全部由“联合所有”组合在一起，使您能够按文档分组，然后按创建日期排序。希望这是正确的方向。

# javascript - 原始值与参考值

> ID：13266616
> 
> 赞同：44
> 
> 时间：2012-11-07T09:20:42.343
> 
> 标签：javascript

我读了一本名为“Web 开发人员的专业 Javascript”的书，它说：“变量由参考值或原始值分配。参考值是存储在内存中的对象”。然后它没有说明原始值是如何存储的。所以我猜它没有存储在内存中。基于此，当我有这样的脚本时：

```
var foo = 123; 
```

Javascript 如何记住`foo`变量以供以后使用？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-11-07T11:22:02.567

好的，想象你的变量是一张纸 - 一张便签。

**注 1**：*变量*是*便笺*。

现在，便笺非常小。你只能在上面写一点点信息。如果你想写更多的信息，你需要更多的便签，但这不是问题。想象一下，您有无穷无尽的便签。

**注意 2：**您有*无穷无尽*的便签，其中存储*少量*信息。

太好了，你可以在便签上写什么？我可以写：

1.  是或否（**布尔值**）。
2.  我的年龄（一个**数字**）。
3.  我的名字（一个**字符串**）。
4.  什么都没有（**未定义**）。
5.  涂鸦或其他对我毫无意义的东西（**null**）。

所以我们可以在便利贴上写简单的东西（让我们居高临下，称它们为*原始*的东西）。

**注意3：**您可以在便签上写*原始的东西。*

所以假设我写`30`在便条上，提醒自己为今晚在我家举办的小聚会买 30 片奶酪（我的朋友很少）。

当我去把便条贴在冰箱上时，我看到我妻子在冰箱上贴了另一张便条，上面还写着`30`（提醒我她的生日是本月 30 日）。

**问：**两张便签是否传达相同的信息？

**A：**是的，他们都说`30`。我们不知道是 30 片奶酪还是每月的第 30 天，坦率地说，我们不在乎。对于一个不知道更好的人来说，一切都是一样的。

```
var slicesOfCheese = 30;
var wifesBirthdate = 30;

alert(slicesOfCheese === wifesBirthdate); // true 
```

**注释 4：**两个写有相同内容的便签传达相同的信息，即使它们是两个不同的便签。

今晚我真的很兴奋——和老朋友一起出去玩，玩得很开心。然后我的一些朋友打电话给我，说他们不能参加聚会。

所以我去冰箱擦掉`30`我的便签（不是我妻子的便签——那会让她很生气），然后把它变成一个`20`.

**注意 5：**您可以擦除便签上的内容并写下其他内容。

**问：**这一切都很好，但是如果我的妻子想在我出去买奶酪的时候写一份杂货清单让我去拿怎么办。她需要为每件物品写一张便签吗？

**A：**不，她会拿一张长长的纸清单，然后在纸上写下杂货清单。然后她会写一个便条告诉我在哪里可以找到杂货清单。

那么这里发生了什么？

1.  杂货清单显然不是*简单*的（erm...*原始*）数据。
2.  我妻子把它写在一张更长的纸上。
3.  她在便签上写了在哪里可以找到它。

> 亲爱的，杂货清单在你的键盘下面。

回顾一下：

1.  实际对象（杂货清单）在我的键盘下。
2.  便利贴告诉我在哪里可以找到它（对象的地址）。

**注 6：**引用值是对对象的引用（可以找到它们的地址）。

**问：**我们怎么知道两张便签说的是同一件事？假设我的妻子制作了另一个购物清单，以防我放错了第一个，并为它写了另一个便利贴。两个列表都说同样的事情，但便利贴说同样的事情吗？

**答：**不。第一张便笺告诉我们在哪里可以找到第一个列表。第二个告诉我们在哪里可以找到第二个列表。两个列表是否说同样的话并不重要。它们是两个不同的列表。

```
var groceryList1 = ["1 dozen apples", "2 loaves of bread", "3 bottles of milk"];
var groceryList2 = ["1 dozen apples", "2 loaves of bread", "3 bottles of milk"];

alert(groceryList1 === groceryList2); // false 
```

**注释 7：**只有当它们引用相同的对象时，两个便签才能传达相同的信息。

这意味着如果我的妻子做了两张便签提醒我购物清单在哪里，那么这两个便签包含相同的信息。所以这：

> 亲爱的，杂货清单在你的键盘下面。

包含与以下相同的信息：

> 不要忘记杂货清单在您的键盘下方。

在编程方面：

```
var groceryList1 = ["1 dozen apples", "2 loaves of bread", "3 bottles of milk"];
var groceryList2 = groceryList1;

alert(groceryList1 === groceryList2); // true 
```

以上就是您需要了解的关于JavaScript 中的*原语*和*引用的全部内容。*无需进入*堆*和动态内存分配之类的事情。如果您使用 C/C++ 编程，这一点很重要。

**编辑 1：**哦，重要的是，当您传递变量时，您实际上是通过 value 传递**原始***值*，通过**reference传递***参考*值。

 ******这只是一种复杂的说法，即您正在将写在一个便签上的所有内容复制到另一个上（无论您是复制原始*值还是*引用*都无关紧要）。

复制引用时，被引用的对象不会移动（例如，我妻子的购物清单将始终保留在我的键盘下，但我可以将复制的便签带到任何我想要的地方 - 原来的便签仍会在冰箱上）。

**编辑 2：**针对@LacViet 发表的评论：

对于初学者来说，我们谈论的是 JavaScript，而 JavaScript 没有*堆栈*或*堆*。它是一种动态语言，JavaScript 中的所有变量都是动态的。为了解释差异，我将其与 C 进行比较。

考虑以下 C 程序：

```
#include <stdio.h>

int main() {
    int a = 10;
    int b = 20;
    int c = a + b;
    printf("%d", c);
    return 0;
} 
```

当我们编译这个程序时，我们得到一个可执行文件。可执行文件分为多个段（或节）。这些段包括堆栈段、代码段、数据段、额外段等。

1.  当调用函数或中断处理程序时，堆栈段用于存储程序的状态。例如，当函数`f`调用函数时，函数`g`的状态`f`（当时寄存器中的所有值）都保存在堆栈中。当`g`控制权返回时，`f`这些值将被恢复。
2.  代码段包含要由处理器执行的实际代码。它包含一堆处理器必须执行的指令`add eax, ebx`（操作码在哪里`add`，`eax`&`ebx`是参数）。该指令将寄存器的内容相加，`eax`并将`ebx`结果存储在寄存器中`eax`。
3.  数据段用于为变量保留空间。例如，在上面的程序中，我们需要为整数和`a`保留空间。此外，我们还需要为字符串常量预留空间。因此，保留的变量在内存中具有固定地址（在链接和加载之后）。`b``c``"%d"`
4.  除了所有这些之外，操作系统还为您提供了一点额外的空间。这称为堆。您需要的任何额外内存都是从该空间分配的。以这种方式分配的内存称为动态内存。

让我们看一个具有动态内存的程序：

```
#include <stdio.h>
#include <malloc.h>

int main() {
    int * a = malloc(3 * sizeof(int));

    a[0] = 3;
    a[1] = 5;
    a[2] = 7;

    printf("a: %d\nb: %d\nc: %d\n", a[0], a[1], a[2]);

    return 0;
} 
```

因为我们想要动态分配内存，所以我们需要使用指针。这是因为我们想使用同一个变量来指向一个任意的内存位置（不一定每次都是同一个内存位置）。

所以我们创建了一个`int`指针 ( `int *`)，称为`a`. 的空间`a`是从数据段分配的（即它不是动态的）。然后我们调用`malloc`从堆中为 3 个整数分配连续空间。第一个的内存地址`int`被返回并存储在指针中`a`。

**问：**我们学到了什么？

**答：**为所有变量分配固定数量的空间。每个变量都有一个固定地址。我们还可以从堆中分配额外的内存，并将这些额外内存的地址存储在一个指针中。这称为动态内存方案。

从概念上讲，这类似于我解释的关于变量是便签的内容。所有变量（包括指针都是便签）。然而，指针是特殊的，因为它们引用一个内存位置（这就像在 JavaScript 中引用一个对象）。

然而，这就是相似之处的结束。以下是不同之处：

1.  在 C 中，一切都是**按值传递的**（包括指针中的地址）。要**传递引用**，您需要通过指针使用间接。JavaScript 仅按值传递原语。传递引用由引擎透明地处理，就像传递任何其他变量一样。
2.  在 C 中，您可以创建指向原始数据类型的指针，例如`int`. 在 JavaScript 中，您不能创建对原始值的引用，例如`number`. 所有原语总是按值存储。
3.  在 C 中，您可以对指针执行各种操作。这称为指针算术。JavaScript 没有指针。它只有参考。因此，您不能执行任何指针算术。

除了这三个之外，C 和 JavaScript 之间最大的区别在于 JavaScript 中的所有变量实际上都是指针。因为 JavaScript 是一种动态语言，所以可以使用相同的变量在不同的时间点存储 a`number`和 a 。`string`

JavaScript 是一种解释型语言，解释器通常是用 C++ 编写的。因此，JavaScript 中的所有变量都映射到宿主语言中的对象（甚至是原语）。

当我们在 JavaScript 中声明一个变量时，解释器会为它创建一个新的泛型变量。然后，当我们为它分配一个值（无论是原始值还是引用）时，解释器只需为其分配一个新对象。在内部，它知道哪些对象是原始对象，哪些是实际对象。

从概念上讲，它就像做这样的事情：

```
JSGenericObject ten = new JSNumber(10); // var ten = 10; 
```

**问：**这是什么意思？

**A:**这意味着 JavaScript 中的所有值（基元和对象）都是从堆中分配的。甚至变量本身也是从堆中分配的。说原语是从堆栈中分配的，而只有对象是从堆中分配的，这是错误的。这是 C 和 JavaScript 最大的区别。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-11-07T09:30:02.143

A`variable`可以保存以下两种值类型之一：`primitive values`或`reference values`。

*   `Primitive values`是存储在**堆栈**上的数据。
*   `Primitive value`直接存储在变量访问的位置。
*   `Reference values`是存储在**堆中的****对象**。
***   `Reference value`存储在变量 location 中的是指向内存中存储对象的位置的指针。*   原始类型包括`Undefined`、`Null`、`Boolean`、`Number`或`String`。**

 ****基础：**

对象是属性的聚合。一个属性可以引用一个`object`或一个`primitive`。`Primitives are values`，它们没有属性。

***更新：***

JavaScript 有 6 种原始数据类型：**String**、**Number**、**Boolean**、**Null**、**Undefined**、**Symbol**（ES6 中新增）。除 null 和 undefined 外，所有原始值都具有环绕原始值的对象等价物，例如，**字符串**对象环绕字符串原始值。所有原语都是不可变的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T09:40:38.427

在 javascript`Primitive values`中，是**存储**在`stack`.

`Primitive value`直接存储在变量访问的位置。

`Reference values`是**存储**在`heap`. _

存储在变量 location 中的参考值是指向内存中存储对象的位置的指针。

JavaScript 支持五种原始数据类型：`number, string, Boolean, undefined, and null`.

这些类型被称为原始类型，因为它们是可以构建更复杂类型的基本构建块。

在这五种中，只有`number, string, and Boolean`实际存储数据意义上的真实数据类型。

`Undefined and null`是在特殊情况下出现的类型。内存中的`primitive type`大小是固定的。例如，一个数字占用 8 个字节的内存，一个布尔值可以只用一位来表示。

并且引用类型可以是任意长度——它们没有固定的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-19T04:48:40.897

原始类型在内存中具有固定大小。例如，一个数字占用 8 个字节的内存，一个布尔值可以只用一位来表示。数字类型是最大的原始类型。如果每个 JavaScript 变量保留 8 个字节的内存，则该变量可以直接保存任何原始值。

这是一种过度简化，并不打算作为对实际 JavaScript 实现的描述。

然而，引用类型是另一回事。例如，对象可以是任意长度——它们没有固定的大小。数组也是如此：数组可以有任意数量的元素。同样，一个函数可以包含任意数量的 JavaScript 代码。由于这些类型没有固定大小，因此它们的值不能直接存储在与每个变量相关的八字节内存中。相反，该变量存储对该值的引用。通常，此引用是某种形式的指针或内存地址。它不是数据值本身，而是告诉变量在哪里寻找值。

原始类型和引用类型之间的区别很重要，因为它们的行为不同。考虑以下使用数字（原始类型）的代码：

```
var a = 3.14;  // Declare and initialize a variable
var b = a;     // Copy the variable's value to a new variable
a = 4;         // Modify the value of the original variable
alert(b)       // Displays 3.14; the copy has not changed 
```

这段代码没有什么奇怪的。现在考虑如果我们稍微更改代码以使其使用数组（引用类型）而不是数字会发生什么：

```
var a = [1,2,3];  // Initialize a variable to refer to an array
var b = a;        // Copy that reference into a new variable
a[0] = 99;        // Modify the array using the original reference
alert(b);         // Display the changed array [99,2,3] using the new reference 
```

如果这个结果对您来说并不奇怪，那么您已经非常熟悉原始类型和引用类型之间的区别了。如果它看起来确实令人惊讶，请仔细查看第二行。请注意，在此语句中分配的是对数组值的引用，而不是数组本身。在第二行代码之后，我们仍然只有一个数组对象；我们只是碰巧有两个引用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-13T19:00:47.877

正如在接受的答案和投票最高的答案中已经提到的，原始值是存储在堆栈中的数据，参考值是存储在堆中的对象。

但这实际上意味着什么？它们在您的代码中的表现有何不同？

原始值按值访问。因此，当您将具有原始值的变量 (var a) 分配给另一个变量 (var b) 时，变量 (a) 的值将被复制到新变量 (b) 中。而当你改变新变量（b）的值时，原变量的值保持不变。

当您将具有引用值的变量 (var x) 分配给另一个变量 (var y) 时，存储在变量 (x) 中的值也会被复制到新变量 (y) 中。不同之处在于存储在两个变量中的值现在是存储在堆中的实际对象的引用。这意味着 x 和 y 都指向同一个对象。所以当你改变新变量（y）的值时，原来有价值的（x）的值也会改变（因为堆中的实际对象改变了）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-24T16:18:39.463

原始值是在语言实现的最低级别表示的数据，在 JavaScript 中是以下类型之一：数字、字符串、布尔值、未定义和空值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-19T17:13:40.357

## 原始与参考：

变量是 javascript 引擎保留用于保存数据的内存段 (RAM)。在这些变量中可以存储 2 种值：

*   **实际数据：**例如字符串或数字。这意味着实际内存（即内存中的字节）保存数据本身。
*   **对对象的引用：**例如 Array 对象或 Function 对象。这意味着该变量只**保存对内存中该对象所在的另一个位置的引用**。

## 原始值和参考值的区别：

当一个原始值被分配给一个变量时，数据（位的值）刚刚被复制。例如：

**原始值：**

```
let num1 = 10;

// What happens here is that the bits which are stored in the memory container 
// (i.e. variable num1) are literally copied into memory container num2
let num2 = num1;
```

**参考值：**

```
let objRef1 = {prop1: 1}

// we are storing the reference of the object which is stored in objRef1
// into objRef2\. Now they are pointing to the same object
let objRef2 = objRef1;

// We are manipulating the object prop1 property via the refernce which
// is stored in the variable objRef2
objRef2.prop1 = 2;

// The object which objRef1 was pointing to was mutated in the previous action
console.log(objRef1);
```*******

# javascript - options 为 null 或不是对象

> ID：13266621
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:21:04.323
> 
> 标签：javascript, html

我正在尝试根据另一个下拉列表中的值自动选择下拉列表。第二个下拉列表将具有比第一个更多的值。如果我选择第一个下拉菜单，则应自动选择第二个。我尝试了以下代码并收到错误：`Options is null or not an object.`???

```
<script type="text/javascript">
function showState(me){
var values = ''; //populate selected options
for (var i=0; i<me.options.length; i++)
    if (me.options[i].selected)
         values += me.options[i].value + ',';
    values = values.substring(0, values.length-1);
    var selected=[values];
    var del = document.getElementById('data').value;
    for(var i=0; i<del.options.length; i++);
    {
  if(values[i] == del.options[i])
  {
      del.options[i].selected;
      }
    }
  }
</script>

<select multiple="multiple" onchange="showState(this);">
    <option value="1">Test1</option>
    <option value="3">Test3</option>
    <option value="4">Test4</option>
</select> 

 <select name="data" id="data" multiple="multiple">
    <option value="1">Test1</option>
    <option value="2">Test2</option>
    <option value="3">Test3</option>
    <option value="4">Test4</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:42:49.573

我认为您应该在代码中进行一些更正，如下所示：

```
<script type="text/javascript">
function showState(me){
var values = ''; //populate selected options
for (var i=0; i<me.length; i++)
    if (me.options[i].selected)
        values += me.options[i].value + ',';
values = values.substring(0, values.length-1);
var selected=[values];
var del = document.getElementById('data');
for(var i=0; i<del.length; i++)
  {
    for(var j=0;j<values.length;j++)
     {  
         if(values[j] == del.options[i].value)
           {
              del.options[i].selected = true;
           }
      }  
  }
}
</script> 
```

有关 javascript 中 Select 和 Option 对象的更多详细信息，您可以参考此[链接](http://www.javascriptkit.com/jsref/select.shtml)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:24:30.197

我想你的问题就在这里`var del = document.getElementById('data').value;`。如果要访问选择选项，则应使用`var del = document.getElementById('data');`，而不使用`.value`. 这样变量`del`应该有`.options`数组。

# c# - 单击时如何检索控件的容器

> ID：13266624
> 
> 赞同：2
> 
> 时间：2012-11-07T09:21:04.620
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个`TreeView`包含许多`TreeViewItems`. 每个都`TreeViewItem`包含一个水平方向`StackPanel`，而水平方向又包含一个图像和一个标签。

当用户单击 TreeViewItem 时，我想获得一个参考`TreeViewItem`。取而代之的是，源作为标签或图像返回，具体取决于`TreeViewItem`用户单击的部分。

我不能使用 selectedItemChanged 事件，因为这严格来说是每次单击 TreeViewItem 时都必须发生的操作。

这是我的 XAML：

```
<TreeView DockPanel.Dock="Left" 
          Name="tvSchema" 
          AllowDrop="True"
          TreeViewItem.PreviewMouseLeftButtonDown="tvSchema_PreviewMouseLeftButtonDown">
</TreeView> 
```

这是当用户单击一个时尝试检索所选 TreeViewItem 的代码：

```
private void tvSchema_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
     object x = e.OriginalSource; //Returns TextBlock
     object y = e.Source; //Returns Label
     object z = sender; //Returns TreeView
} 
```

可以做些什么来获得实际的 TreeViewItem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:56:17.797

尝试这样的事情：

```
<TreeView>
  <TreeView.Resources>
    <Style TargetType="{x:Type TreeViewItem}">
      <EventSetter
        Event="TreeViewItem.PreviewMouseLeftButtonDown"
        Handler="MyHandler"/>
    </Style>
  </TreeView.Resrouces>
  ...
</TreeView> 
```

在`MyHandler`，`sender`将是`TreeViewItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:31:35.410

这是助手类，希望对您有所帮助：

```
public static class ElementTreeHelper
    {
        public static T FindParent<T>(this DependencyObject child) where T : DependencyObject
        {
            if (child == null)
                throw new ArgumentNullException("child");

            if (child is T)
                return child as T;

            var current = child;
            while (current != null)
            {
                if (current is Visual || current is Visual3D)
                    current = VisualTreeHelper.GetParent(current);
                else
                {
                    var previous = current;
                    current = LogicalTreeHelper.GetParent(previous) ?? previous.GetTemplatedParent();
                }

                if (current is T)
                    return current as T;
            }

            return null;
        }

        public static DependencyObject FindParent(this DependencyObject child, Type type)
        {
            if (child == null)
                throw new ArgumentNullException("child");

            if (type == null)
                throw new ArgumentNullException("type");

            if ((child.GetType().IsInstanceOfType(type)))
                return child;

            var current = child;
            while (current != null)
            {
                if (current is Visual || current is Visual3D)
                    current = VisualTreeHelper.GetParent(current);
                else
                {
                    var previous = current;
                    current = LogicalTreeHelper.GetParent(previous) ?? previous.GetTemplatedParent();
                }

                if (current != null 
                    && (current.GetType().IsInstanceOfType(type)))
                    return current;
            }

            return null;
        }

        public static DependencyObject GetTemplatedParent(this DependencyObject element)
        {
            DependencyObject parent = null;
            if (element is FrameworkElement)
                parent = (element as FrameworkElement).TemplatedParent;

            if (element is FrameworkContentElement)
                parent = (element as FrameworkContentElement).TemplatedParent;

            return parent;
        }

        public static Form FindForm(this DependencyObject element)
        {
            if (element == null)
                return null;

            var source = PresentationSource.FromDependencyObject(element) as HwndSource;
            if (source == null)
                return null;

            var host = Control.FromChildHandle(source.Handle) as ElementHost;
            if (host == null)
                return null;

            var form = host.TopLevelControl as Form;

            return form;
        }

        public static IEnumerable<DependencyObject> GetVisualChildren(this DependencyObject parent)
        {
            if (parent == null)
                throw new ArgumentNullException("parent");

            var count = VisualTreeHelper.GetChildrenCount(parent);
            if (count == 0)
            {
                DependencyObject child;
                if (parent.TryGetPropertyValue("Child", out child) && child != null)
                    yield return child;
                else
                {
                    IEnumerable children;
                    if (parent.TryGetPropertyValue("Children",out children) && children != null)
                    {
                        var dos = children.OfType<DependencyObject>();
                        foreach (var ch in dos)
                            yield return ch;
                    }
                }
            }

            for (var i = 0; i < count; i++)
                yield return VisualTreeHelper.GetChild(parent, i);
        }

        public static IEnumerable<DependencyObject> GetVisualChildrenSortedByTabIndex(this DependencyObject parent)
        {
            if (parent == null)
                throw new ArgumentNullException("parent");

            return parent.GetVisualChildren().OrderBy(KeyboardNavigation.GetTabIndex);
        }
    } 
```

# css - gwt在css中使用静态变量

> ID：13266626
> 
> 赞同：1
> 
> 时间：2012-11-07T09:21:10.093
> 
> 标签：css, gwt, variables, static, constants

CSS：

```
@eval ctHeaderC1 com.CssServlet.ctHeaderColor1;
@eval ctHeaderC2 com.CssServlet.ctHeaderColor2;

.cellTableHeader {
    background: ctHeaderC1;
    background: -moz-linear-gradient(top, ctHeaderC1 0%, ctHeaderC2 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, ctHeaderC1 ), color-stop(100%, ctHeaderC2 ));
    background: -webkit-linear-gradient(top, ctHeaderC1 0%, ctHeaderC2 100%);
    background: -o-linear-gradient(top, ctHeaderC1 0%, ctHeaderC2 100%);
    background: -ms-linear-gradient(top, ctHeaderC1 0%, ctHeaderC2 100%);
    background: linear-gradient(to bottom, ctHeaderC1 0%, ctHeaderC2 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='ctHeaderC1', endColorstr='ctHeaderC2',GradientType=0 );          
} 
```

我不会替换所有变量

但只有“背景：ctHeaderC1；” 被取代

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:37:38.283

这已在 GWT 2.5 中修复：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=5771](http://code.google.com/p/google-web-toolkit/issues/detail?id=5771)

升级！;-)

# ajax - 带有 MooTools 的菜单

> ID：13266628
> 
> 赞同：0
> 
> 时间：2012-11-07T09:21:28.313
> 
> 标签：ajax, joomla, mootools, joomla2.5

我正在使用 joomla 2.5，我想用*ajax*和*mootools*`<div>`修改标签

 **在我的`index.php`文件中，我有这个：

```
<div id="content" class="column grid_16">
    <div id="content" class="column grid_4">
        <jdoc:include type="modules" name="menuHardware" style="none"/>
        <jdoc:include type="modules" name="menuArq" style="none"/>
    </div>

    <div id="content" class="column grid_9">
        <jdoc:include type="modules" name="mod_arq" style="none"/>
    </div>
    <jdoc:include type="component" />

    <jdoc:include type="modules" name="mod_fabricante" style="none"/>
    <jdoc:include type="modules" name="mod_noticias" style="none"/>
</div> 
```

这是我的代码`<jdoc:include type="modules" name="menuArq" style="none"/>`：

```
<div id="content" class="column grid_4">
    <ul class="menu">
        <li class="item-129"><a href="index.php/descripcion">Descripción</a></li>
        <li class="item-130"><a href="index.php/descripcion">Descripción</a></li>
        <li class="item-131"><a href="index.php/descripcion">Descripción</a></li>
        <li class="item-132"><a href="index.php/descripcion">Descripción</a></li>
        <li class="item-133"><a href="index.php/descripcion">Descripción</a></li>
    </ul>
</div> 
```

我的模块`<jdoc:include type="modules" name="mod_arq" style="none"/>`有这个：

```
<div id="myDivTobeChanged">some text for change</div> 
```

所以最后我的页面是：

```
<div id="content" class="column grid_16">
    <div id="content" class="column grid_4">
    <ul class="menu">
        <li class="item-129">
            <a href="/index.php/descripcion">Descripción</a>
        </li>
        <li class="item-130">
            <li class="item-131">
                <li class="item-132">
                    <li class="item-133">
    </ul>
</div>
<div id="content" class="column grid_9">
    <div id="myDivTobeChanged">some text for change</div>
</div> 
```

当我点击这里`<li class="item-129"><a href="/index.php/descripcion">Descripción</a></li>`我想改变这个

```
<div id="myDivTobeChanged">some text for change</div> 
```

这是我调用 ajax 的脚本：

```
$$('.item-129').addEvent('click', function(event){
    event.stop();
    var req= new Request({
        method: 'get',
        url: '<?php echo JURI::root()?>index.php',
        data: {'do': '1'},
        onComplete: function(responseText){
            $('myDivTobeChanged').set('html', responseText);
        }
    }).send();
}); 
```

但这不起作用仅更改到描述页面而不是在`<div>`标签内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:38:58.043

我看到您代码中的 div 具有类“grid_4”，但您尝试修改的那个具有“列 grid_9”。如果您想更改特定 div 的内容，最好通过 id 引用它，否则您将不得不通过 获取具有特定类的元素数组`$$('.grid-9')`。

另一个问题是您将纯 JavaScript 与 MooTools 混合在一起，这通常是个坏主意。如果 MooTools 库提供了一个函数来解决您的问题，那么最好使用它而不是标准的 JavaScript。例如要更改元素的 HTML 内容，请使用`set('html', someHTML)`而不是`innerHTM`L 方法。

所以，试着给你的 div 改个 id 并改变你的行

```
document.getElementsByClassName('column grid_9').innerHTML= responseText; 
```

像这样：

```
document.id('#myDivTobeChanged').set('html', responseText); 
```

这是一个用于说明目的的完整解决方案。您可以参考：

```
//javascript
<script type="text/javascript">
window.addEvent('domready', function(){
        $$('.item-129').addEvent('click', function(event){
             event.stop();
              var req = new Request({
              method: 'get',
              url: 'http://someurl.com/test.php',
              data: { 'do' : '1' },

              onComplete: function(responseText) { 
              $('myDivTobeChanged').set('html', responseText);
              }
            }).send();
        });

    });
</script>

//sample html
<div id="content" class="column grid_4">
<ul class="menu">
<li class="item-129"><a href="index.php/descripcion">Descripción</a></li>
<li class="item-130"><a href="index.php/descripcion">Descripción</a></li>
<li class="item-131"><a href="index.php/descripcion">Descripción</a></li>
<li class="item-132"><a href="index.php/descripcion">Descripción</a></li>
<li class="item-133"><a href="index.php/descripcion">Descripción</a></li>
</ul>
</div>

<div id="myDivTobeChanged">som text for change</div> 
```

只需更改请求发送到的地址并自定义要更改的目标 HTML div 的 id**

# asp.net - ASP.net 将 html 编码的代码插入页面

> ID：13266629
> 
> 赞同：2
> 
> 时间：2012-11-07T09:21:32.993
> 
> 标签：asp.net, vb.net, html-encode

我有一个`dim`包含`html encoded`代码的代码，它存储在数据库中。

**如何将代码插入 asp.net 页面？**
我想在 ( `VB.net / C#`) 后面的代码中执行该操作。

我应该使用什么控制/方法。请注意，我希望**浏览器呈现代码**- 而不仅仅是显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:26:57.020

[`Literal`](http://msdn.microsoft.com/en-us/library/sz4949ks.aspx)假设使用 Web 表单，您可以在网页上使用控件并将其[`Mode`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode%28d=lightweight%29.aspx)属性设置为`PassThrough`.

`PassThrough`意义

> 控件的内容不会被修改。

与默认相反`Transform`

> 控件的内容被转换为 HTML 编码的字符串。

示例aspx：

```
<asp:Literal ID="Literal1" Mode="PassThrough" runat="server"></asp:Literal> 
```

代码隐藏：

```
Me.Literal1.Text = "<p>I'm a paragraph.</p>" 
```

# android - 在三星 Galaxy 3 上使用 Soap 下载 PDF

> ID：13266634
> 
> 赞同：1
> 
> 时间：2012-11-07T09:21:48.603
> 
> 标签：android, soap, samsung-mobile

所以我创建了一个程序，允许用户在手机上购买巴士票，并在交易完成后立即下载 pdf 文件。这是通过检查 url 是否已更改并包含关键字来完成的：TicsnetReceipt.aspx 让我知道交易已完成。这很好用，因为我还保存了其他信息，例如来自 url 的姓名/电子邮件以供将来使用。

然后我使用肥皂下载文件：

```
public String getPDFxml(String ReferenceID){
    String NAMESPACE = "http://tempuri.org/";
    String METHOD_NAME = "GetPDFxml";
    String SOAP_ACTION = "http://tempuri.org/GetPDFxml";
    String URL = "http://77.40.188.73:28082/SasMobileWS/SasMobile.asmx?op=GetPDFxml";

    try {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("Reference");
        pi.setValue(ReferenceID);
        request.addProperty(pi);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
        String strRes = result.toString();
        String temp[];
        temp = strRes.split("TravelDate");
        String Date[] = temp[1].split(">|<|/");
        String theDate = Date[1];
        return(theDate);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    }
    return null;
}

public void getPDFbytes(String TransactionID, String Date){
    String NAMESPACE = "http://tempuri.org/";
    String METHOD_NAME = "GetPDFbytes";
    String SOAP_ACTION = "http://tempuri.org/GetPDFbytes";
    String URL = "http://77.40.188.73:28082/SasMobileWS/SasMobile.asmx?op=GetPDFbytes";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo pi = new PropertyInfo();
    pi.setName("Reference");
    pi.setValue(TransactionID);
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);

    try {
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
    } catch (Exception e) {
        e.printStackTrace();
    }

    SoapObject resultsRequestSOAP = null;
    try{
        resultsRequestSOAP = (SoapObject) envelope.getResponse();
    }catch (Exception e) {
        try{    
        resultsRequestSOAP = (SoapObject) envelope.bodyIn; 
        }catch(Exception f){
            f.printStackTrace();
        }
    } 
    byte[] result = null;
    try {
        result = Base64.decode(resultsRequestSOAP.getProperty("GetPDFbytesResult").toString());
    } catch(Exception e){
        e.printStackTrace();
    }
    try {
        Date = Date.replace(".", "");
        FileOutputStream fos = openFileOutput(Date + "_" + TransactionID + ".pdf", Context.MODE_WORLD_READABLE);

        fos.write(result);
        fos.close();

    } catch(FileNotFoundException ex){
        ex.printStackTrace();
    } catch(IOException ioe){
        ioe.printStackTrace();
    }
} 
```

这一切在我尝试过的其他模型上都可以正常工作，但在 S3 上，它不会下载文件，并在用户尝试在查看器中打开文件时告诉用户该文件不存在。

我 99% 确定肥皂有问题，我只是想不通。但是，如果这看起来不错，那么我不知道发生了什么：p

提前致谢 ：）

在做了更多测试后，我知道问题来自：

```
 androidHttpTransport.call(SOAP_ACTION, envelope); 
```

这似乎根本不会读取数据，这很奇怪，因为它应该与上述方法中的输入相同。两种方法都接受一个字符串 Reference（实际上是一个数字），第一个方法 GetPDFxml 返回一个字符串，GetPDFbytes 返回 base64Binary。

就在程序崩溃之前，我从信封获取值，它说：

```
envelope    
SoapSerializationEnvelope  (id=830066090736)    
addAdornments   true    
avoidExceptionForUnknownProperty    false   
bodyIn  SoapFault  (id=830066150416)    
bodyOut SoapObject  (id=830066090472)   
classToQName    Hashtable  (id=830066090944)    
dotNet  true    
enc "http://schemas.xmlsoap.org/soap/encoding/" (id=830065748280)   
encodingStyle   null    
env "http://schemas.xmlsoap.org/soap/envelope/" (id=830065748552)   
headerIn    null    
headerOut   null    
idMap   Hashtable  (id=830066090864)    
implicitTypes   false   
multiRef    Vector  (id=830066102400)   
properties  Hashtable  (id=830066090824)    
qNameToClass    Hashtable  (id=830066090904)    
version 110 
xsd "http://www.w3.org/2001/XMLSchema" (id=830065748824)    
xsi "http://www.w3.org/2001/XMLSchema-instance" (id=830065749064) 
```

然后既不是信封.getResponse(); 或 resultsRequestSOAP = (SoapObject) 信封.bodyIn；返回一个有效值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:43:15.980

由于我没有足够的代表，这应该是一个评论：

如果您的肥皂调用弹出异常，请尝试添加以下内容：

```
catch(Exception e){
Log.e(TAG, "Exception during getting pdf " + e.getMessage());} 
```

所以你实际上可以看到可能发生的事情。

[现在，如果您确定这是 Soap 失败，您可能需要检查 SoapUI（ SoapUI 主页](http://www.soapui.org/)）中的 soapservice ，它也有一个 Eclipse 插件：[Eclipse plugin](http://www.soapui.org/IDE-Plugins/eclipse-plugin.html)

您应该尝试在设备上的网络浏览器中访问您的服务。如果它给出一个空白页，它要么是设备问题，要么是 IIS 问题。

附带说明；我个人对我的`SoapSerializationEnvelope(SoapEnvelope.VER11)`号码有问题。

* * *

您可以为调试添加的内容是：

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;
    Log.d("SoapBody",envelope.bodyOut.toString()); //This

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    httpTransport.debug = true; //And this! 
```

# richfaces - rich:contextmenu 重新渲染后显示 oncontextmenu

> ID：13266641
> 
> 赞同：0
> 
> 时间：2012-11-07T09:22:27.120
> 
> 标签：richfaces, seam2

我正在使用 Richfaces 3.3.3

是否有可能重新渲染上下文菜单并在重新渲染后显示它？

目前我使用 a4j:support 和事件 onmouseover 来根据附加到指向组件的一些值重新渲染上下文菜单。

当用户然后使用鼠标右键单击时，我使用rich:componentControl 显示上下文菜单。

我想做这样的事情。

```
<a4j:support event="oncontextmenu" reRender="contextMenu" oncomplete="#{rich:component('contextmenu')}.show()">
    <a4j:actionparam ...../>
</a4j:support> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:08:39.250

这是一个你可以用来做到这一点的技巧。但是重新渲染整个`rich:contextMenu`组件不会很有用，因为当您重新渲染时，它会消失。但是，您可以在菜单中的`reRender`每个**项目**。它不会隐藏 contextMenu。这就是你可以做到的。
请注意，id 为“ **my_div** ”的 div 是您应该在其中右键单击的组件。

> `<h:form id="frm" style="border:solid red; height:500px;width:500px;">`
>     `<s:div id="my_div" style="border:solid; height:200px;width:200px;">`
>         `Right click inside of me.`
>     `</s:div>`
> 
>     `<rich:contextMenu target="my_div" submitMode="client" showEvent="click"`
>                   `id="contextMenu" >`
>         `<rich:menuItem value="Item 1" id="it1"/>`
>         `<rich:menuItem value="Item 2" id="it2"/>`
>     `</rich:contextMenu>`
> 
>     `<a4j:jsFunction ajaxSingle="true" name="showContextMenu" id="jsFunc"`
>             `reRender="it1,it2" />`
> `</h:form>`

`<script>`在标签中添加标签`<head>`并放置这个 JS。

> `<script>`
>     `function validateComponent() {`
>         `showContextMenu();`
>     `}`
>     `window.onload = function() {`
>         `#{rich:element('my_div')}.oncontextmenu = validateComponent;`
>     `}`
> `</script>`

# ruby-on-rails - Rails nested_form_for 在使用 file_field 时不起作用

> ID：13266657
> 
> 赞同：2
> 
> 时间：2012-11-07T09:23:14.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip, nested-forms

使用`nested_form_for`并输入`file_field`时，`fields_for`我从回形针收到以下错误：

**回形针::AdapterRegistry::NoHandlerError in ProjectsController#create**

`No handler found for "scan.pdf"`

这是正确的，因为参数不显示`#<ActionDispatch::Http::UploadedFile>`对象，而只显示文件名。

在使用`nested_form_for`它之前，它在我取消注释时有效，`file_field`并且在我构建第一个对象时它也有效，`fields_for`但这不应该是必要的..

我的设置如下：

*   红宝石 1.9.3
*   导轨 (3.2.8)
*   回形针 (3.3.0)
*   嵌套形式（0.3.0）

编码：

```
# @project.schemes.build
= nested_form_for @project do |f|
  = f.fields_for :schemes do |ff|
    = ff.text_field :name
    = ff.file_field :scan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:15:07.537

生成的表单不是多部分的，您有 2 个选项来解决此问题：

*   手动指定多部分

    ```
    = nested_form_for @project, :html => { :multipart => true } do |f| 
    ```

*   尝试使用 master 分支中的 nested_form gem 已解决此问题但尚未发布

    ```
    gem 'nested_form', :github => 'ryanb/nested_form' 
    ```

# wpf - 如何在灵活的网格中布置带箭头的线？

> ID：13266660
> 
> 赞同：0
> 
> 时间：2012-11-07T09:23:42.430
> 
> 标签：wpf, layout, line

我的 WPF 窗口包含一个 Grid，它延伸到整个窗口宽度并沿途布局一些控件。在这些控件中，应该在一端显示一些带有箭头的线条，以可视化某种流程。这些线跨越多个网格列或行，并且每边都有一些边距，以使它们远离其他控件。多条线具有它们必须接触的某些连接点。现在，我只需要水平线和垂直线。

我尝试过使用 Line 控件，但这似乎需要两端的 X 和 Y 坐标，以像素为单位。这并不容易，因为随着用户更改窗口大小，线条可能会拉伸。

接下来是路径控件，但我不知道如何在那里添加箭头。路径数据是“M0,0 L1,0”，Stretch="Fill"，所以如果我在路径上画一个箭头，它也会拉伸，这是我不应该做的。

有什么替代方法可以拉伸一条线而不是它上面的箭头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:21:44.080

滚动你自己的控制

```
public sealed class Arrow : FrameworkElement
{
    protected override void OnRender(DrawingContext drawingContext)
    {
       var width = ActualWidth;
       var height = ActualHeight;
       drawingContext.Draw...; // Draw you arrow line here
       drawingContext.Draw...; // Draw you arrow head here 
    }
} 
```

当然，您可以向其添加各种依赖属性，以控制箭头的绘制方式。

# visual-c++ - 视觉 C++ : C2143

> ID：13266665
> 
> 赞同：0
> 
> 时间：2012-11-07T09:24:03.113
> 
> 标签：visual-c++, visual-studio-2012, windows-7-x64, office-addins

为什么下面的片段

```
#include <atlcom.h>
...
class FormRegionWrapper;
...
// Errorsource :
typedef IDispEventSimpleImpl
        <2, FormRegionWrapper, &__uuidof(FormRegionEvents)> 
        FormRegionEventSink; 
```

会给我以下错误：

```
// Error ouput:     
error C2143: syntax error : missing ';' before '<'
error C4430: missing type specifier - int assumed. 
             Note: C++ does not support default-int 
```

？！？

（片段取自此处：[为 Outlook 2010 构建 C++](http://msdn.microsoft.com/en-us/library/office/ee941475%28v=office.14%29.aspx)插件）。我的环境：MS Visual Studio 2012 Professional 和 Windows 7-64。

PS 1：关于 IDispEventSimpleImpl 的帮助说明如下：

```
// Help IDispEventSimpleImpl Class  : This class provides implementations of 
// the IDispatch methods, without getting type information from a type library.
//    template <
//      UINT nID,
//      class T,
//      const IID* pdiid
//    >
//    class ATL_NO_VTABLE IDispEventSimpleImpl :
//      public _IDispEventLocator<nID, pdiid>
//
// Requirements
// -------------------
// Header: atlcom.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:38:24.707

您是否包含`atlcom.h`以便`IDispEventSimpleImpl`定义模板？模板声明中使用的其他类的声明（我假设是你写的）是否可用？而且我认为前向定义`FormRegionWrapper`还不够，您可以尝试包含该类的声明，以便该模板可以看到吗？

**更新**

不确定这是否会有很大帮助，但我用`FormRegionWrapper.h`下面的colde替换了源代码（来自MSDN页面的示例`IDispEventSimpleImpl`：

```
#pragma once

#include "stdafx.h"
#include <vector>
#include <algorithm>

_ATL_FUNC_INFO Event1Info1 = { CC_CDECL, VT_EMPTY, 1, { VT_I4 } };

class CEventHandler;

typedef IDispEventSimpleImpl <1234, CEventHandler, &__uuidof(IDispatch)> 
DummySink;

class CEventHandler : public DummySink

{
public:
    BEGIN_SINK_MAP(CEventHandler)
        SINK_ENTRY_INFO(1234, __uuidof(IDispatch), 1, OnEvent1, &Event1Info1)
    END_SINK_MAP()
    void __stdcall  OnEvent1(LONG l)
    {
        //ATLASSERT(l == 445533);
        if (l != 445533)
            OutputDebugString(L"l is not 445533\n");
    }
    HRESULT Advise1234(IUnknown * punk) {
        return IDispEventSimpleImpl<1234, CEventHandler, &__uuidof(IDispatch)>::DispEventAdvise(punk);
    }
}; 
```

如果这有效，您可以放心地假设模板被正确包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T11:21:42.603

在 FormRegionWrapper.h 中的 #include 指令之后添加这一行：

使用命名空间 ATL；

# yii - 使按钮在 CJuiDialog 中不可见

> ID：13266666
> 
> 赞同：2
> 
> 时间：2012-11-07T09:24:13.903
> 
> 标签：yii

我在 yii 中的 CJuiDialog 有问题。我想将“删除”按钮设置为“不可见”，但这不起作用，按钮仍然显示。这是我的代码：

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
'id' => 'dlg_EventCal',
'options' => array(
    'title' => Yii::t('CalModule.fullCal', 'Event detail'),
    'modal' => true,
    'autoOpen' => false,
    'hide' => 'slide',
    'show' => 'slide',
    'width'=> 400,
    'buttons' => array(
        array(
            'text' => Yii::t('CalModule.fullCal', 'OK'),
            'click' => "js:function() { eventDialogOK(); }"
        ),
        array(
            'text' => Yii::t('CalModule.fullCal', 'Cancel'),
            'click' => 'js:function() { $(this).dialog("close"); }',

        ),  
         array( 
    'text' => Yii::t('CalModule.fullCal', 'Delete'),
    'click' => 'js:function() { eventDialogDelete(); }',
   'visible'=>Yii::app()->user->checkAccess('deleteAllEvents'),

            ),

)))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:04:26.867

`CJuiDialog`只将数据传递给`jQuery.dialog`插件

看看这个函数（来自[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js#L322](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js#L322)）：

```
_createButtons: function( buttons ) {
    var that = this,
        hasButtons = false;

    // if we already have a button pane, remove it
    this.uiDialogButtonPane.remove();
    this.uiButtonSet.empty();

    if ( typeof buttons === "object" && buttons !== null ) {
        $.each( buttons, function() {
            return !(hasButtons = true);
        });
    }
    if ( hasButtons ) {
        $.each( buttons, function( name, props ) {
            var button, click;
            props = $.isFunction( props ) ?
                { click: props, text: name } :
                props;
            // Default to a non-submitting button
            props = $.extend( { type: "button" }, props );
            // Change the context for the click callback to be the main element
            click = props.click;
            props.click = function() {
                click.apply( that.element[0], arguments );
            };
            button = $( "<button></button>", props )
                .appendTo( that.uiButtonSet );
            if ( $.fn.button ) {
                button.button();
            }
        });
        this.uiDialog.addClass( "ui-dialog-buttons" );
        this.uiDialogButtonPane.appendTo( this.uiDialog );
    } else {
        this.uiDialog.removeClass( "ui-dialog-buttons" );
    }
} 
```

您的所有属性都将传递给`props`对象，然后将用作`button` 元素的属性：

`button = $( "<button></button>", props )`

所以你需要这样的代码：

```
array( 
    'text' => Yii::t('CalModule.fullCal', 'Delete'),
    'click' => 'js:function() { eventDialogDelete(); }',
    'style' => Yii::app()->user->checkAccess('deleteAllEvents') ? '' : 'display: none;',
) 
```

但在这种情况下，您需要额外检查服务器端的权限！

# android - 如何使用 onUpgrade 方法在 Android 中修改 SQLite 表中的类型？

> ID：13266667
> 
> 赞同：7
> 
> 时间：2012-11-07T09:24:12.617
> 
> 标签：android, sql, database, sqlite, upgrade

按照这个很好的例子[http://code.google.com/p/openintents/source/browse/trunk/notepad/NotePad/src/org/openintents/notepad/NotePadProvider.java?r=3878](http://code.google.com/p/openintents/source/browse/trunk/notepad/NotePad/src/org/openintents/notepad/NotePadProvider.java?r=3878)

我实现了我的 sqlite 数据库升级系统。但是在上面的链接中，唯一的示例显示了如何在表中添加新列。onUpgrade 方法中的一段代码是

```
 try {
      db.execSQL("ALTER TABLE " +   NOTES_TABLE_NAME + " ADD COLUMN "
                                                                    + Notes.TAGS + " TEXT;");
      db.execSQL("ALTER TABLE " + NOTES_TABLE_NAME + " ADD COLUMN "
                                                                    + Notes.ENCRYPTED + " INTEGER;");
      db.execSQL("ALTER TABLE " + NOTES_TABLE_NAME + " ADD COLUMN "
                                                                    + Notes.THEME + " TEXT;");
      } catch (SQLException e) {
      Log.e(TAG, "Error executing SQL: ", e);
      // If the error is "duplicate column name" then everything is fine,
      // as this happens after upgrading 2->3, then downgrading 3->2, 
      // and then upgrading again 2->3.
      }
      //  *** other upgrade from version x->y
      // *** 
```

在 onCreate 中，是这样的：

```
 public void onCreate(SQLiteDatabase db) {
      db.execSQL("CREATE TABLE " + NOTES_TABLE_NAME + " ("
           // Version 2:
           + Notes._ID + " INTEGER PRIMARY KEY,"
           + Notes.TITLE + " TEXT,"
           + Notes.NOTE + " TEXT,"
           + Notes.CREATED_DATE + " INTEGER,"
           + Notes.MODIFIED_DATE + " INTEGER,"
           // Version 3:
           + Notes.TAGS + " TEXT,"
           + Notes.ENCRYPTED + " INTEGER,"
           + Notes.THEME + " TEXT,"
           // Version 4:
           + Notes.SELECTION_START + " INTEGER,"
           + Notes.SELECTION_END + " INTEGER,"
           + Notes.SCROLL_POSITION + " REAL"
           + ");");
          } 
```

现在我想要一个没有添加列的新数据库版本，但我只想更改表中某些字段的类型。我怎样才能做到这一点？

这里说[http://sqlite.org/lang_altertable.html](http://sqlite.org/lang_altertable.html)是不可能改变字段类型的。我该如何规避这个问题？

我以这种方式在数据库中插入数据：

```
 ContentValues v = new ContentValues();
   v.put("field1", myString); // fileld1 in db is defined as integer

   dbManager.updateTable("mytable", v, whereClause); 
```

在这种情况下如何进行 CAST？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T13:23:45.450

SQLite 确实不允许更改现有的表列。

但是，[SQLite 使用动态类型](http://www.sqlite.org/datatype3.html)，因此您在表定义中设置的列类型并不重要（由于[类型关联](http://www.sqlite.org/datatype3.html#affinity)而导致的转换除外）。

在一般情况下，对表（新列除外）的任何更改都需要您创建一个新表：

```
CREATE TABLE TempTable (...);
INSERT INTO TempTable SELECT col1, col2, ... FROM MyTable;
DROP TABLE MyTable;
ALTER TABLE TempTable RENAME TO MyTable; 
```

如果要更改已存储在表中的值的类型，则必须使用`CAST`：

```
...
INSERT INTO TempTable SELECT CAST(col1 AS TEXT), ... From MyTable;
... 
```

对于新值，只需将具有正确类型的值放入`ContentValues`对象中。

# c++ - 如何理解 C++ 入门 3rd 中的句子

> ID：13266672
> 
> 赞同：1
> 
> 时间：2012-11-07T09:24:35.553
> 
> 标签：c++, abstract-class, information-hiding, inline-functions

`<C++ primer (3rd)>`以下是Stanley B. Lippman Josée Lajoie的第 7.6 章的摘录。

> 指定为 inline 的函数在调用它的程序中的每个点都“行内”展开。例如，
> 
> int minVal2 = min( i, j );
> 
> 在编译期间扩展为
> 
> int minVal2 = i < j ? 我：j；
> 
> 因此消除了使 min() 成为函数的运行时开销。min() 通过在函数声明或定义中函数的返回类型之前指定 inline 关键字来声明内联：
> 
> 内联 int min( int v1, int v2 ) { /* ... */ }
> 
> 但是请注意，内联规范只是对编译器的建议。编译器可能会选择忽略此建议，因为声明为 inline 的函数不是在调用点进行扩展的良好候选者。递归函数，例如 rgcd()，不能在调用点完全展开（尽管它的第一次调用可以）。一个 1,200 行的功能也很可能不会在调用点进行扩展。通常，内联机制旨在优化小型、直线、经常调用的函数。**在抽象数据类型的设计中支持信息隐藏是最重要的，** 例如 2.3 节介绍的 IntArray 类及其 size() 内联成员函数。

有人可以解释标记为粗体的句子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:45:28.013

*   “在抽象数据类型设计中，对信息隐藏的支持起到了重要作用”

**数据类型：**您可能对这个术语很熟悉。它可以是整数、字符串等，也可以是更复杂的类型，如 B-Tree、复数等。

**抽象数据类型：**这些是代表一些现实生活对象的数据类型。

例如

```
struct SCustomer
{
   string name;
   string address;
   int    id;
   enum CreditRanking { Good, Poor, Bankrupt };
   CreditRating rating;
}; 
```

*CreditRating*是一种抽象数据类型，*SCustomer*也是如此。

**信息隐藏：**通过将信息封装在抽象数据类型中，设计人员可以考虑对客户/与客户执行的操作，而 SCustomer 的实际实现不会混淆他们的思维过程。

信息并没有真正隐藏，如果他们愿意，他们可以查看数据类型的定义，但在许多情况下，只关注高级（抽象）而不考虑小细节会更容易。

你可以这样想：

*   考虑底层细节并构建一组对象。
*   忽略底层细节并将对象组合成更大的对象或应用程序。

上面的内容有点过于简单了，但我希望它能给你带来味道。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:56:22.297

我这里没有第三版的全文，但从你发布的上下文来看，他在说什么很清楚。

想象一种“向量”类。

```
class Vector {
private: 
  int * data; // pointer to data 
```

有几种方法可以提供对向量大小的访问：

选择 1：公共成员变量：

```
public:
  int datasize; 
```

选择 2：带有公共访问器的私有变量

```
private:
  int datasize; 

public:
  int getSize(); // body can be hidden in CPP, but would be { return datasize;}; 
```

选择 3：同 2，但使用内联访问器

```
private:
  int datasize; 

public:
  inline int getSize() { return datasize; }; 
```

现在，#1 的数据隐藏很差，但性能很好。#2 有很好的数据隐藏，但性能很差。#3 具有良好的数据隐藏能力，并且可能具有出色的性能。（记住 inline 只是一个提示）

在我看来，#3 的数据隐藏略逊于#2，因为功能代码显示在标题中 - 即使您无法访问该成员。所以，我会重写他的陈述...

> 内联函数在数据隐藏与性能要求之间提供了很好的折衷。

我不同意它是“最重要的”，因为它只是对编译器的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:09:00.680

关于“内联函数”的出现较晚。

调用内联函数与将代码“对齐”一样快。由于速度和大小的开销，一些程序员可能会犹豫将他们的逻辑封装在函数中，但是使用内联函数可以将任何开销最小化到（通常）微不足道的数量。

想想这段代码：

```
int customer_code = get_code(customer_name);
int product_code  = get_id(product_name);
bool credit_ok    = check_credit(customer_code);
int order_number  = create_order(customer_code, credit_ok, 
                                 product_code, quantity);
print_order(order_number, customer_code, customer_name, 
            product_code, product_name, quantity); 
```

信息隐藏版本可能如下所示。

```
order ord = cust.make_order(product, quantity);
order.print(); 
```

这构成了更大程序的一部分，您可以使高级代码更容易理解。仍然有人需要设计客户、订单、产品等对象，但他们只需要一次专注于一件事，然后这些对象就可以在整个程序中使用。

# objective-c - UIscrollview 滚动影响其他滚动视图

> ID：13266674
> 
> 赞同：2
> 
> 时间：2012-11-07T09:24:42.513
> 
> 标签：objective-c, ios

我是 iOS 的初学者，我当然在努力`UIScrollview`。在我的应用程序中，我有一个多个`UIscrollviews`，每个都位于一个之下，在这里，当我滚动任何一个时，`scrollview`每个`scrollview`都必须在同一个**方向上****滚动**。我在一个类中以编程方式添加，然后将它们作为一个添加到其中。**`UIScrollviews``UIView``SUBVIEWS`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:51:17.780

```
in Scroll view delegate method check the condition 

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
if(scrollView != self.yourCurrentScrollView)
{
    return;
}
else{
 // do something    
}
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
   if(scrollView != self.yourCurrentScrollView)
{
    return;
}
else{
// do something
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:56:35.673

为您的滚动视图设置委托并实现`scrollViewDidScroll`: 以更新其他滚动视图的内容偏移量。**

# mp4 - Red5：使用 mp4 播放列表播放后续视频

> ID：13266675
> 
> 赞同：1
> 
> 时间：2012-11-07T09:24:43.437
> 
> 标签：mp4, red5, playlist

嗨，我刚刚为 red5 创建了一个 mp4 播放列表应用程序，但我不知道如何在第一个剪辑结束后自动播放第二个和/或后续视频。

# gwt - DateBox 日历落后于垂直面板弹出窗口

> ID：13266676
> 
> 赞同：0
> 
> 时间：2012-11-07T09:24:43.827
> 
> 标签：gwt, gwt-2.5

我有一个搜索图标，当我点击它时，将打开一个搜索弹出窗口（实际上是一个垂直面板）。在这个日期文本框那里。当我单击数据文本框时。它来了，但它在垂直面板弹出窗口的后面。

我的问题是，当点击日期框时，日历应该排在前面。我必须为此做些什么。

谁能帮帮我吗。

在此先感谢，Saritha。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:41:22.983

您需要将日历的 CSS z-index 属性设置为比弹出窗口的 z-index 更高的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T05:06:44.697

我遇到了同样的问题，使用 z-index 对我不起作用。我改为从样式表中删除所有 z-index 值，到目前为止它工作。

希望它对你有用。

G。

# c# - 是否可以返回 IQueryable 到 IQueryable 方法？

> ID：13266681
> 
> 赞同：0
> 
> 时间：2012-11-07T09:24:49.447
> 
> 标签：c#, asp.net, linq, linq-to-sql

在下面的 QueryableEntities 方法中， `IEnumerable<Competition>.AsQueryable()`将返回`IQueryable<Competition>`由于期待而无法返回的`IQueryable<T>`

我只能写一种方法来返回`IQueryable<Competition>`和`IQueryable<Submission>`

如果有人知道怎么做，请告诉我，谢谢

```
public partial class WinBoutsDataContext<T> : System.Data.Linq.DataContext where T : class
{
    public IQueryable<T> QueryableEntities
    {
        get
        {
            if (typeof(T).Equals(typeof(Model.Competition)))
            {
                return this.ConvertToCompetitionList(
                      this.GetTable<Storage.Competition>()).AsQueryable();
            }
             else if(typeof(T).Equals(typeof(Model.Submission)))
            {
                return this.ConvertToSubmissionList(
                       this.GetTable<Storage.CompetitionEntry>()).AsQueryable();
            }
        }
    }

    public DataAccess.Model.Competition ConvertToCompetition(DataAccess.Storage.Competition comp)
    {

        DataAccess.Model.Competition modelComp = new DataAccess.Model.Competition 
        { 
            CompetitionID = comp.CompetitionID, 
            Active = comp.Active, 
            CompetitionStatusID = 
            comp.CompetitionStatusID, 
            Duration = comp.Duration, 
            EndDate = comp.EndDate, 
            Entrants = comp.Entrants, 
            Featured = comp.Featured, 
            Image = comp.Image, 
            IsOvertime = comp.IsOvertime, 
            MaxEntrants = comp.MaxEntrants, 
            Notes = comp.Notes, 
            OvertimeDuration = comp.OvertimeDuration, 
            OvertimeEnd = comp.OvertimeEnd, 
            OvertimeStart = comp.OvertimeStart, 
            ParentCompetitionID = comp.ParentCompetitionID, 
            Prize = comp.Prize, StartDate = comp.StartDate, 
            SuggestedBy = comp.SuggestedBy, 
            Summary = comp.Summary, 
            Title = comp.Title 
        };

        return modelComp;
    }

    public IEnumerable<DataAccess.Model.Competition> ConvertToCompetitionList(IEnumerable<DataAccess.Storage.Competition> compList)
    {
        List<DataAccess.Model.Competition> compModelList = new List<DataAccess.Model.Competition>();

        foreach (DataAccess.Storage.Competition comp in compList)
        {
            compModelList.Add(ConvertToCompetition(comp));
        }

        return compModelList;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:09:22.083

同意阿德里安对设计原则的评论，但如果你想这样做

```
public IQueryable<T> QueryableEntities
{
    get
    {
        if (typeof(T).Equals(typeof(Model.Competition)))
        {
            return this.ConvertToCompetitionList(
                  this.GetTable<Storage.Competition>()).AsQueryable() as IQueryable<T>;
        }
         else if(typeof(T).Equals(typeof(Model.Submission)))
        {
            return this.ConvertToSubmissionList(
                   this.GetTable<Storage.CompetitionEntry>()).AsQueryable() as IQueryable<T>;
        }
    }
} 
```

将编译并运行良好。这里`x as IQueryable<T>`给出`x`了`IQueryable<T>`是否可以转换，`null`如果不能转换。

注意：这意味着当你构造你的泛型类时，如果它有类型`Model.Competition`，它将返回`IQueryable<Model.Competition>`，如果它有类型`Model.Submission`，它将返回`IQueryable<Model.Submission>`，并且将返回`null`任何其他类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:31:43.547

通常最好不要一概而论。许多开发人员似乎花了很多时间试图让一个属性/方法/类做很多事情，但这违背了许多面向对象的原则。就我个人而言，我只会使用 2 个属性，可能称为`Competitions`另一个`Submissions`. 这将比 . 透露更多意图`QueryableEntities`。

# java - 如何在android中发送http请求？

> ID：13266685
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:25:16.367
> 
> 标签：java, android

我希望将以下请求格式发送到其余网络服务我该怎么做？

```
<?xml version="1.0" encoding="UTF-8"?>
<demo>
<headers>
  <messagetype>1</messagetype>
  <messagetoken>123647356734156</messagetoken>
</headers>
<authentication>
  <name>xxx</name>
  <servicename>yyy</servicename>
  <username>10121</username>
  <password>welcome1234</password>
</authentication>
</demo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:28:45.703

最简单的方法是创建一个带有 XML 请求值的字符串。例如，您可以将此 XML 字符串请求值传递给以下函数以从服务器获取响应。

仅供参考，您可以通过在 HTTPPost 对象内设置实体值来传递请求，与以下示例相同。您也可以通过这种方式传递 JSON 请求值。

例如：

```
public HttpResponse postData(String strXML) {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("web service URL");

    try {
        StringEntity strEntity = new StringEntity(strXML,HTTP.UTF_8);
        strEntity.setContentType("text/xml");  
        httppost.setHeader("Content-Type","application/soap+xml;charset=UTF-8");
        httppost.setEntity(strEntity);  // here you can set request value.

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        return response;
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:28:36.840

尝试 reslet [http://www.restlet.org/](http://www.restlet.org/)他们也有安卓版本..

# c# - 在c#中将漂亮的pdf转换为模糊的pdf

> ID：13266687
> 
> 赞同：0
> 
> 时间：2012-11-07T09:25:20.157
> 
> 标签：c#, pdf-generation, blur

我有一个 pdf 文件，我想修改或创建一个类似的 pdf，但模糊、模糊或难看。可以在 c# 中执行此操作吗？我不知道如何做到这一点，所以任何迹象都会受到欢迎:)。

谢谢。

# php - 如何在后面的代码中使用 post 方法发送？

> ID：13266689
> 
> 赞同：-2
> 
> 时间：2012-11-07T09:25:20.657
> 
> 标签：php

我有一个参数 A 和它的 25000 个字符长。如何使用`GET`php中的方法发送参数A？

```
 $kq=0;
 $msg1= strtr(base64_encode($msg), '+/=', '-_,');              
 $Title1=strtr(base64_encode($Title), '+/=', '-_,'); 
header("Location:".JRoute::_('./index.php/i0702?'.'kq='.$kq."&Title=".$Title1."&Msg=".$msg1)); 
```

注意：strlen($msg1)> 25000 个字符。现在，如何使用 post 方法发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:03:50.903

http请求的最大大小依赖于客户端和服务器来处理它......它会根据您使用的客户端/服务器组合而变化。

[这](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)解释了为什么 25K HTTP GET 请求在现实世界中不可行，除非您可以同时选择您正在操作的客户端和服务器（绝对不是 Internet 站点，可能是 Intranet 应用程序）。

建议切换到 HTTP POST 请求（HTML 表单可以处理）。如果这对您来说不可能，您应该考虑重构您的应用程序数据流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:43:13.890

您可以从方法发送的最大字符数`GET`为 3000。使用 POST 方法。

```
<form method="POST" action="your/url/to/open.php">

    <input type="text" value="<?php echo $a; ?>" />
    <input type="submit" />

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:23:05.187

由于您在同一页面内进行重定向，因此将大型数据服务器端保存在会话或数据库中，并且只放置一个小 id，以便您再次将这些数据检索到 URL 中。

# java - 访问休眠线程资源

> ID：13266690
> 
> 赞同：0
> 
> 时间：2012-11-07T09:25:23.527
> 
> 标签：java

start_thread 中的线程在 start_activity 线程（主线程）在信号量上休眠时访问 packetList 是否安全。如果没有，那么我如何在它们之间共享资源，请注意访问权限只会被读取，而 packetList 不会被更改。

```
 class A{
                Vector<packet> packetList;
                A()
                {
                    //packetList initialized here
                }

                void start_thread()
                {
                //start a thread here
                }
                void start_activity()
                {
                    while(true)
                    {
                        //possibly sleep on semephore
                        //do work
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:29:41.043

您可以访问 Vector，前提是您不对其进行迭代。如果你迭代它，你需要`synchronized`在那个对象上持有一个锁。

如果您想对工作“数据包”进行排队，我建议您考虑使用 BlockingQueue 来等待添加新任务，或者使用 ExecutorService 将 Queue 与 ThreadPool 相结合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:30:35.970

如果我理解正确，您的问题是“我正在使用信号量来同步线程访问共享数据结构”的改写 - 在这种情况下，答案是“肯定是”，前提是您对 Vector 的访问与所述完全一致， IE：

```
while(true)
    {
        //acquire lock
        //do work
        //release lock
    } 
```

并且你在主线程上有一个匹配的结构（即你在做任何工作之前获取锁）——这将确保线程对 Vector 的访问是正确同步的

# visual-studio-2012 - 在 Visual Studio Express 2012 for Window8 Desktop 中添加扩展

> ID：13266694
> 
> 赞同：8
> 
> 时间：2012-11-07T09:25:38.427
> 
> 标签：visual-studio-2012, resharper, vsix, .net-reflector

我意识到 VS2012 Express Edition 现在支持 NuGet 包。知道在 VS Express Editions 2012 中添加 Resharper 或 Reflector 等生产力工具的限制现在是否已更改？我从[Restrictions on installation extensions or add-ins in Visual Studio 2010 Express 中](https://stackoverflow.com/questions/7940249/restrictions-on-installing-extensions-or-add-ins-in-visual-studio-2010-express)获得了一些参考。但是，我正在寻找 VS 2012 的行为是否发生了变化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T08:14:43.640

这种限制可能几乎永远存在。这样做的理由是，Express 附加和插件很可能是人们需要的一切，消除了购买“付费”版本 VS 的动机。IIRC，TestDriven.NET 的作者在使他的插件与 VS Express 兼容后，他的 MVP 身份被撤销。

# xaml - 优化 XAML 的工具？

> ID：13266697
> 
> 赞同：0
> 
> 时间：2012-11-07T09:25:45.783
> 
> 标签：xaml, windows-store-apps

我正在制作一个 Windows 应用商店应用程序。不幸的是，它在较弱的 ARM 设备上存在一些性能问题。在阅读[了这篇](http://msdn.microsoft.com/en-us/library/windows/apps/hh994641.aspx)关于如何优化 XAML 加载的文章后，我很感兴趣是否有任何工具可以让我查看资源引用的树和/或帮助我优化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:32:52.937

对于可视化树，您可以在 VS中使用[Document Outline 。](http://msdn.microsoft.com/en-us/library/ff602283%28v=vs.95%29.aspx)其他一些方便的 XAML 工具，例如[WPF Snoop](http://snoopwpf.codeplex.com/)或[Silverlight Spy](http://firstfloorsoftware.com/silverlightspy/download-silverlight-spy)，但最重要的是，在使用 xaml 和模板时，'ol Expression Blend 是一个好朋友。希望这可以帮助。

# java - 如何正确签署 twitter 请求？总是得到 401 错误 Unauthorize

> ID：13266698
> 
> 赞同：1
> 
> 时间：2012-11-07T09:25:50.283
> 
> 标签：java, groovy, twitter-oauth

我试图让 request_token 在应用程序中使用 twitter 登录，但我总是收到 401 错误。我已经在 dev.twitter 中创建了我的应用程序，并且我有消费者密钥、秘密和回调。

这是我的方法：

```
def readSomething(String url){
    StringBuffer buffer = new StringBuffer();
    try {
    /** 
     * get the time - note: value below zero 
     * the millisecond value is used for oauth_nonce later on
     */
        int millis = (int) System.currentTimeMillis() * -1;
        int time = (int) millis / 1000;

        /**
         * Listing of all parameters necessary to retrieve a token
         * (sorted lexicographically as demanded)
         */
         def data = [

            "oauth_nonce": String.valueOf(millis),
            "oauth_signature":"",
            "oauth_signature_method":"HMAC-SHA1",
            "oauth_timestamp": String.valueOf(time),
            "oauth_version":"1.0"
         ]

        /**
         * Generation of the signature base string
         */
        String signature_base_string = 
            "POST&"+URLEncoder.encode(url, "UTF-8")+"&";
        data.each{
            // ignore the empty oauth_signature field
            if(it.key != "oauth_signature") {
            signature_base_string +=
                URLEncoder.encode(it.key, "UTF-8") + "%3D" +
                URLEncoder.encode(it.value, "UTF-8") + "%26";
            }
        }
        // cut the last appended %26 
        signature_base_string = signature_base_string.substring(0,
            signature_base_string.length()-3);

        /**
         * Sign the request
         */
        def signingKey=URLEncoder.encode(CONSUMER_SECRET, "UTF-8")+"&"
        Mac m = Mac.getInstance("HmacSHA1");
        m.init(new SecretKeySpec(signingKey.getBytes(), "HmacSHA1"));
        m.update(signature_base_string.getBytes());
        byte[] res = m.doFinal();
        String sig = String.valueOf(res.encodeBase64());

        data["oauth_signature"] = sig;

       /**
        * Create the header for the request
        */
       String header = "OAuth ";
      data.each {
            header += it.key+"=\""+it.value+"\", ";
       }
       // cut off last appended comma
       header = header.substring(0, header.length()-2);

       System.out.println("Signature Base String: "+signature_base_string);
       System.out.println("Authorization Header: "+header);
       System.out.println("Signature: "+sig);

       String charset = "UTF-8";
       URLConnection connection = new URL(url).openConnection();
       connection.setDoInput(true);
       connection.setDoOutput(true);
       connection.setRequestProperty("Accept-Charset", charset);
       connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + charset);
       connection.setRequestProperty("Authorization", header);
       OutputStream output = connection.getOutputStream();
       output.write(header.getBytes(charset));

       BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
       println"reader "+reader
       String read;
       while((read = reader.readLine()) != null) {
           buffer.append(read);
       }
    }
    catch(Exception e) { 
        e.printStackTrace();
    }
    println"buffer "+buffer
    println"buffer "+buffer.getClass()
    println"buffer "+buffer.toString()

   return buffer.toString() 
```

}

它有什么问题吗？

我相信我没有正确签名并且 oauth_signature 是错误的。有没有办法检查这个签名是否正常？

我尝试这样做（http://stackoverflow.com/questions/2964392/implement-oauth-in-java）但仍然无法正常工作，还有其他想法会发生什么吗？

提前致谢

# db2 - 意外的令牌“CREATE TRIGGER

> ID：13266700
> 
> 赞同：1
> 
> 时间：2012-11-07T09:26:00.327
> 
> 标签：db2

```
CREATE TRIGGER TRG_EFMREFNO 
   BEFORE 
   INSERT ON FEEDBACK_CASE_TB 
   FOR EACH ROW 
   BEGIN 
   SELECT SEQ_EFMREFNO.NEXTVAL INTO:NEW.EFMREFNO FROM DUAL;
   END; 
```

请帮助我，它给出了错误

> 在“BEGIN-OF-STATEMENT”之后发现了一个意外的令牌“CREATE TRIGGER TRG_EFMREFNO
> BEFOR”。预期的标记可能包括：" `<revoke>`".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.12.79
> 
> 在“END”之后发现了意外的标记“END-OF-STATEMENT”。预期的标记可能包括：“JOIN `<joined_table>`”.. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.12.79

请给出该错误的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:17:15.173

你有两件事在这里发生 -

1) 当“;” 字符是 SQL 语句的一部分，必须使用不同的字符来终止语句。我通常使用“@”。要告诉“db2”命令您选择了不同的字符，请使用

```
db2 -td@ 
```

或者如果你想从文件中读取

```
db2 -td@ -f <somefile> 
```

2）在触发器中更新新行的正确方法是为新行设置别名，并使用 set 子句：

```
CREATE TRIGGER TRG_EFMREFNO 
   BEFORE 
   INSERT ON FEEDBACK_CASE_TB 
   REFERENCING NEW AS N
   FOR EACH ROW 
   BEGIN 
       SET N.EFMREFNO = SEQ_EFMREFNO.NEXTVAL;
   END
@ 
```

可能还有其他方法可以在 create table 语句中使用带有 default 子句的序列来完成同样的事情：

# c++ - c++ string :: npos 是在调用字符串类吗？

> ID：13266701
> 
> 赞同：1
> 
> 时间：2012-11-07T09:26:02.900
> 
> 标签：c++, string

我是 C++ 的新手，从 Java 迁移过来并想知道这一点：

```
 pos = result.find(remove[i]);  
        if (pos == string::npos) 
```

它是在调用字符串“超类”吗？如果它调用类本身来访问常量“npos”，我很困惑，如果我在函数中声明了几个字符串变量，它怎么知道它是类的哪个实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:26:55.660

`npos`不绑定到实例，而是绑定到类本身。是`static`会员。Java中也有`static`成员。

### 21.4 类模板basic_string [basic.string]

[...]

```
namespace std {
template<class charT, class traits = char_traits<charT>,
class Allocator = allocator<charT> >
class basic_string {
  public:
    //...
    static const size_type npos = -1;
    //...
}; 
```

`std::string`是 的一个**专业**。`basic_string`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:31:18.547

`npos`是字符串的静态成员。
C++ 中的静态成员为每个程序创建一次，并由同一类的所有实例共享。而且无需实例化类也可以访问。

# icons - 如何在图标视图中找到查找器覆盖图标的完整路径？

> ID：13266703
> 
> 赞同：1
> 
> 时间：2012-11-07T09:26:07.883
> 
> 标签：icons, overlay, finder, simbl

我正在使用 simbl 插件在 finder 中添加覆盖图标，如下所示：[finder overlay icon](https://github.com/lesnie/Finder-Icon-Overlay)

问题是：我在覆盖函数中找不到正确的方法来获取文件的完整路径：IKImageBrowserCell 中的 FO_drawImage，我只得到一个标题。

```
 - (void)FO_drawImage:(id)fp8
    {
        NSString *title = [self previewItemTitle];
        if ([[title lowercaseString] hasPrefix:@"a"])

    {
        NSImage *icon = [fp8 _nsImage];

        NSRect frame = [self imageFrame];
        NSLog(@"drawing width %.0f for name '%@' icon %@",frame.size.width,title,icon);
        [icon lockFocus];
        CGContextRef myContext = [[NSGraphicsContext currentContext] graphicsPort];
        CGContextSetRGBFillColor (myContext, 1, 0, 0, 1);
        CGContextFillEllipseInRect(myContext, CGRectMake (0, 0, 10, 10 ));
        [icon unlockFocus];
        [self FO_drawImage:[[[IKImageWrapper alloc] initWithNSImage:icon] autorelease]];

    } else {
        [self FO_drawImage:fp8];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:23:15.233

```
NSURL *item_url = [self previewItemURL]; 
```

应该在 MacOSX 10.7 上覆盖它

# c# - 查看有关存储的 wifi 配置文件和密钥的信息

> ID：13266704
> 
> 赞同：1
> 
> 时间：2012-11-07T09:26:11.557
> 
> 标签：c#, windows-7, wifi

如何获取存储的 wifi 配置文件及其密钥的列表？

# php - Magento cron作业动态表达

> ID：13266706
> 
> 赞同：1
> 
> 时间：2012-11-07T09:26:12.133
> 
> 标签：php, magento, cron

我正在尝试在我的自定义模块中动态设置 cron 作业。但这不会将 job_code 保存到 cron_schedule 表中。

```
 <config>
    <crontab>
    <jobs>
    <bookingreservation_summary>    
         <!--<schedule><cron_expr>*/5 * * * *</cron_expr></schedule>-->     
        <run><model>bookingreservation/observer::sendBookingSummaryEmail</model></run>
    </bookingreservation_summary>
    </jobs>
   </crontab>
 </config> 
```

并且 cron_expr 被注释了，因为我是从配置中生成它的。这将表达式和模型保存在 config_data 表中，例如，

```
 path: crontab/jobs/process_bookingreservation_summary/schedule/cron_expr  
 value: 0 17 * * *

 path : crontab/jobs/process_bookingreservation_summary/run/model
 value : bookingreservation/observer::sendBookingSummaryEmail 
```

此类执行并保存到 config_data

```
 class ABC_Bookingreservation_Model_Config_Backend_Cron extends Mage_Core_Model_Config_Data
    {
const CRON_STRING_PATH  = 'crontab/jobs/process_bookingreservation_summary/schedule/cron_expr';
const CRON_MODEL_PATH   = 'crontab/jobs/process_bookingreservation_summary/run/model';

/**
 * Cron settings after save
 *
 * @return Mage_Adminhtml_Model_System_Config_Backend_Log_Cron
 */
protected function _afterSave()
{
    $enabled    = $this->getData('groups/booking_summary/fields/enabled/value');
    $time       = $this->getData('groups/booking_summary/fields/time/value');
    $frequncy   = $this->getData('groups/booking_summary/fields/frequency/value');

    $frequencyDaily     = Mage_Adminhtml_Model_System_Config_Source_Cron_Frequency::CRON_DAILY;
    $frequencyWeekly    = Mage_Adminhtml_Model_System_Config_Source_Cron_Frequency::CRON_WEEKLY;
    $frequencyMonthly   = Mage_Adminhtml_Model_System_Config_Source_Cron_Frequency::CRON_MONTHLY;

    if ($enabled)
{
        $cronDayOfWeek = date('N');
        $cronExprArray = array(
            intval($time[1]),                                   # Minute
            intval($time[0]),                                   # Hour
            ($frequncy == $frequencyMonthly) ? '1' : '*',       # Day of the Month
            '*',                                                # Month of the Year
            ($frequncy == $frequencyWeekly) ? '1' : '*',        # Day of the Week
        );
        $cronExprString = join(' ', $cronExprArray);
    }
    else{

        $cronExprString = '';
    }

    try
    {
        Mage::getModel('core/config_data')
            ->load(self::CRON_STRING_PATH, 'path')
            ->setValue($cronExprString)
            ->setPath(self::CRON_STRING_PATH)
            ->save();

        Mage::getModel('core/config_data')
            ->load(self::CRON_MODEL_PATH, 'path')
            ->setValue((string) Mage::getConfig()->getNode(self::CRON_MODEL_PATH))
            ->setPath(self::CRON_MODEL_PATH)
            ->save();
    }
    catch (Exception $e)
    {
        Mage::throwException(Mage::helper('adminhtml')->__('Unable to save the cron expression.'));
    }
} 
```

}

任何人都可以帮助我的代码在哪里出现问题，因为每当我通过浏览器 cron_scedule 表更新运行 cron.php 时，但不要从这项工作中保存 job_code。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:16:47.540

1.  您不需要保存 run_model （您已经将其声明为 xml ）
2.  试试这个： `path: crontab/jobs/bookingreservation_summary/schedule/cron_expr` 而不是： `path: crontab/jobs/process_bookingreservation_summary/schedule/cron_expr`

如果你不解决看看它是如何工作的站点地图模块的 cron 设置（它和你想要实现的一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T11:41:02.477

取消注释代码中的以下行并查看它是否有效。

```
 <!--<schedule><cron_expr>*/5 * * * *</cron_expr></schedule>--> 
```

我认为这可能有效....如果有效，请告诉我。

# java - SOAP XML 错误中的命名空间前缀重复

> ID：13266709
> 
> 赞同：3
> 
> 时间：2012-11-07T09:26:17.063
> 
> 标签：java, xml, xml-parsing, xsd

我们将以下 SOAP XML 发送到服务器

```
<?xml version="1.0" ?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">   
<SOAP-ENV:Header/>    
<SOAP-ENV:Body>        
<ns2:search xmlns:ns2="http://search.tbx.codegen.it">            
    <arg0/>            
    <arg1/>            
    <arg2 xmlns:ns4="http://criteria.search.tbx.codegen.it" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ns4:AccomSearchCriteria">                
       <adult>1</adult>
         ...
    </arg2>            
    <arg3>50</arg3>        
</ns2:search>    
</SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

但是服务器为此遇到以下错误

```
SEVERE: Couldn't create SOAP message due to exception: XML reader error: com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix 'SOAP-ENV'.
 at [row,col {unknown-source}]: [1,132]
com.sun.xml.ws.protocol.soap.MessageCreationException: Couldn't create SOAP message due to exception: XML reader error: com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix 'SOAP-ENV'.
 at [row,col {unknown-source}]: [1,132]
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:359)
        at com.sun.xml.ws.transport.http.HttpAdapter.decodePacket(HttpAdapter.java:318) 
```

我们发送的 XML 消息有什么问题吗（重复的命名空间前缀“SOAP-ENV”）？

谢谢大家

# java - 关于 OpenDDR 中的 displayWidth 和 displayHeight

> ID：13266710
> 
> 赞同：0
> 
> 时间：2012-11-07T09:26:25.660
> 
> 标签：java

有人知道属性`displayWidth`和`displayHeight`（在[OpenDDR](http://www.openddr.org/)中）是像素还是毫米？我试图找到id，但我没有成功。

我找到了： `displayWidth`并且`displayHeight`（在 OpenDDR 中）以像素为单位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:38:45.377

我找到了：displayWidth 和 displayHeight（在 Open DDR 中）以像素为单位。

# java - 自动加载Java中特定超类的子类的工厂类？

> ID：13266713
> 
> 赞同：2
> 
> 时间：2012-11-07T09:26:45.607
> 
> 标签：java, inheritance, reflection, static-libraries, factory

在我描述我的问题之前，让我说我怀疑我可能只是缺少要搜索的正确术语，这就是为什么我在 stackoverflor 上的搜索没有取得成果的原因。因此，答案的链接也将不胜感激。

我试图创建一个有工厂的库，我们称之为“MyFactory”。MyFactory 有一个方法可以返回抽象类“MySuper”的对象，但也有一个方法可以将可用的子类公开给“MySuper”。该库打算进行大量扩展，因此会经常添加“MySuper”的子类，然后重新编译库，并将其转储到使用它的应用程序的库文件夹中。

我想要的是能够将“MySuper”的子类添加到库中，并让“MyFactory”意识到它，最好不需要做任何事情，只需创建一个新的“MySuper”子类。

到目前为止，我使用反射使“MyFactory”创建“MySuper”类型的新实例，方法是将类名赋予方法，如下所示：

```
public MySuper getSuperObject(String name) {
    return (MySuper) Class.forName("my.package." + name).newInstance(); } 
```

但是我怎样才能让工厂将所有“MySuper”类公开为一个字符串列表，以便使用该库的应用程序知道他们可以调用什么？我可以迭代包的内容吗？

我对解决方案持开放态度，最重要的部分是将来添加新的“MySuper”子类应该非常轻松。

谢谢 ：-）

更新：

我只想指出，我找到了一个很好的 Java 库，它以一种简单的方式处理反射，并允许您搜索特定类的子类型。所以我的问题可以用那个库来解决（我已经测试过了）。这是一个链接：[http ://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:36:39.660

您正在寻找一个`Generic Factory Pattern`. 就像是..

```
public static <T extends MySuper> T createDocument(Class<T> subClazz) throws InstantiationException, IllegalAccessException {
        return subClazz.newInstance();
    }; 
```

你可以google`Generic Factory Pattern`一下，你会发现很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:14:03.973

默认类加载器在搜索类之前对它一无所知。然后它会根据类路径在几个地方查找。如果您依赖于类加载器，您将无法将该类添加到列表中，直到它已经被按名称请求。

最自动化的解决方案可能是为扩展 MySuper 的新类指定一个位置，例如一个目录。要构建类列表，请在该目录中查找类文件，并使用您最喜欢的字节码库检查它们是否有扩展 MySuper 的类。

另一种选择是拥有一个列出扩展类名称的配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:33:33.553

我建议创建一个包含 MySuper 可能子类的枚举。每当您添加一个子类时，在枚举中添加一个相同的条目，然后您可以将其作为 getMySuperObject() 方法的输入。

如果您认为我在此解决方案中留下了一些东西，请发表评论

# java - 复制 java 密钥库

> ID：13266719
> 
> 赞同：2
> 
> 时间：2012-11-07T09:27:15.313
> 
> 标签：java, ssl, keystore

我的本地开发机器上有一个有效的密钥库，其中包含用于通过 HTTPS 访问 Web 服务的证书。

我通过以下方式在我的项目中访问此密钥库：

```
System.setProperty("javax.net.ssl.truststore", "C:\\<workspaceprojectPath>\\SIPkeystore\\truststore.jks"); // sollte wohl auch ohne Keystore klappen
System.setProperty("javax.net.ssl.keyStore", "C:\\<workspaceprojectPath>\\SIPkeystore\\SIPkeystore.jks");  
System.setProperty("javax.net.ssl.keyStorePassword", "SECRET"); 
```

现在我想从另一个项目访问该证书。在那里，我提供了另一个（本地）项目目录中密钥库的相同（完整）路径。

显然，jvm 仍然可以找到路径并且正在设置属性，但是在访问 Web 服务时，我收到了相同的错误消息，就好像我根本没有添加密钥库一样。

尝试运行应用程序时，我得到一个

```
sun.security.validator.ValidatorException: PKIX path building failed:   
     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid 
     certification path to requested target 
```

是否有可能复制现有的密钥库？当我们将应用程序部署到我们的服务器时，这也很重要。该应用程序将作为独立 jar 运行。（没有网络服务器）

**编辑：** 好的，复制密钥库似乎不是问题，因为我可以在使用原始密钥库文件的本地副本时运行原始应用程序。好像是配置问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T10:44:50.303

> 是否有可能复制现有的密钥库？

是的。从文件系统的角度来看，它只是一个文件。

我想问题是以下之一：

*   相关属性未在其他项目中正确设置。
*   另一个 JVM 找不到密钥库文件（例如，由于 chrooting 或其他原因）
*   另一个 JVM 没有访问/读取密钥库文件所需的权限。
*   读取访问被（例如）SELinux 阻止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:18:42.510

首先，如果 Web 服务不需要客户端证书（即您介绍自己），则不需要密钥库——您只需要信任库。

可能是其他项目无法访问信任库，所以为了练习，尝试在`C:\<workspaceprojectPath>\SIPkeystore\truststore.jks`那里打开并读取前几个字节。如果成功，则意味着另一个项目将其他一些信任库设置为默认值，因此在这种情况下尝试：

```
System.out.println(System.getProperty("javax.net.ssl.trustStore")); 
```

另外，请记住 Java 区分大小写，并且您指定`javax.net.ssl.truststore`了 property 而不是`javax.net.ssl.trustStore`. 尝试解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:02:58.930

valicert class 3 CA 证书不在您的默认信任库中（可能是您的 JRE lib/security 目录中的 cacerts 文件，但请参阅[JSSE 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#X509TrustManager)以获取完整的故事）。

我认为您应该创建自己的信任库文件（可以是 cacerts 文件的副本）并将 valicert root ca 添加到此文件中。然后使用 javax.net.ssl.trustStore 系统属性指向此文件。

# android - 用于 Android 开发的 Google Nexus 4？

> ID：13266720
> 
> 赞同：-4
> 
> 时间：2012-11-07T09:27:22.073
> 
> 标签：android

我想买一部手机进行安卓开发和测试。我知道 Galaxy Nexus 在开发者中享有盛誉，那么新的 Nexus 4 呢？

在 Nexus 4 中，我的最低操作系统版本为 4.1.2 或 4.2。如果我想测试以前的版本，我需要另一部手机吗？

如果我将 nexus 4 升级到下一个操作系统版本（例如 android 5.0），我将能够将其降级到 4.1。在 Nexus 系列上刷 ROM 有多复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:33:49.340

但是您可以获得的最新手机。这样长寿比较好。您可以在内置模拟器上测试其他手机。

以下是一些可以帮助您的链接：

[https://developer.android.com/tools/testing/testing_android.html](https://developer.android.com/tools/testing/testing_android.html)

[https://developer.android.com/tools/testing/index.html](https://developer.android.com/tools/testing/index.html)

[http://www.vogella.com/articles/AndroidTesting/article.html](http://www.vogella.com/articles/AndroidTesting/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:38:30.023

总体而言，使用最新版本的 Android 进行开发是可行的方法。（例如：蜂窝前版本将图像/位图的光栅数据存储在本机内存中，因此内存分析器工具，当您搜索内存泄漏时，不会显示泄漏位图的实际大小，只有几百字节。）

另一方面，供应商正在定制他们的手机，他们有不同的驱动程序，例如摄像头。因此，仅在一部手机上进行测试，在某些情况下可能还不够……我建议您使用较旧的手机（可用内存不足，预蜂窝操作系统）和较新的手机...

您应该集成 ACRA 或其他崩溃报告工具，使您能够在野外跟踪您的产品。Bugsense 或类似的解决方案为您提供了一个不错的 Web 界面，您可以在其中看到用户代码中发生的不同异常......

如果您无法使用实际的手机，来自 bitbar.com 的 TestDroid 可以提供解决方案，因为他们有大量不同的 android 手机 (>100)，您可以在其中执行您的测试用例...

至于降级，我不知道是否支持...

# delphi - 如何在 Delphi 中重新绘制 Tpopmenu？

> ID：13266721
> 
> 赞同：0
> 
> 时间：2012-11-07T09:27:23.620
> 
> 标签：delphi, popupmenu

**当弹出菜单已经**弹出时，我需要`TMenuItem`在 Delphi 7中更改 a 的文本。

 **我的弹出菜单有

```
OwnerDraw := true; 
```

我想使用：

```
popupmenu.repaint(); 
```

或者

```
popupmenu.refresh(); 
```

但它们不存在。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:58:50.480

您可以调用`MenuChanged`菜单项以强制对其进行更新。这是一个受保护的成员，您需要通过众所周知的受保护成员黑客来访问该成员。

```
type
  THackedMenuItem = class(TMenuItem);
....
THackedMenuItem(MyMenuItem).MenuChanged(True);//forces redraw of owner drawn item 
```**

# c++ - c++ 前向/双向/随机迭代器是否总是输出迭代器？

> ID：13266723
> 
> 赞同：3
> 
> 时间：2012-11-07T09:27:29.860
> 
> 标签：c++, stl, iterator

我在 STL 上看到许多文本（例如[http://www.cplusplus.com/reference/std/iterator/](http://www.cplusplus.com/reference/std/iterator/)）暗示前向迭代器（以及扩展的双向和随机迭代器）必须同时满足输入和输出迭代器的要求。这对我来说似乎很奇怪，因为`const`迭代器显然是迭代器，但显然*不是*输出迭代器。

这种理解的真相是什么？是我不懂输出迭代器的概念，还是输出迭代器不属于迭代器的扩展需求顺序？（这个想法有更好的/官方名称吗？我的意思是随机迭代器也是双向迭代器，它们也是转发器......）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T09:32:45.390

C++03 说 (24.1/4):

> 除了其类别之外，前向、双向或随机访问迭代器也可以是可变的或恒定的，具体取决于表达式 *i 的结果是作为引用还是作为对常量的引用。常量迭代器不满足输出迭代器的要求，并且表达式 *i（对于常量迭代器 i）的结果不能用于需要左值的表达式中。

cplusplus.com 选择不提。标准中的措辞令人困惑，因为它声明“前向迭代器满足输入和输出迭代器的所有要求”，并且与下一段中的一些前向迭代器不满足输出迭代器的要求相矛盾。

C++11 稍微简化了一点（24.2.1/3-4）：

> 前向迭代器满足输入迭代器的所有要求，并且可以在指定输入迭代器时使用；双向迭代器也满足前向迭代器的所有要求，并且可以在指定前向迭代器时使用；随机访问迭代器也满足双向迭代器的所有要求，并且可以在指定双向迭代器时使用。
> 
> 进一步满足输出迭代器要求的迭代器称为可变迭代器。不可变迭代器被称为常量迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:35:58.727

是和不是。还有另一个适用于迭代器的限定条件：它们是否允许改变序列。此限定与前向、双向等正交。形式上，非变异前向迭代器也必须是非变异输出迭代器。当然，非变异输出迭代器实际上并没有多大意义，一旦你从输出迭代器中删除了变异运算符，就剩下不多了，但是以这种方式指定和描述迭代器更容易，将变异/非变异视为正交特征。

# python - Python 奇数操作？

> ID：13266732
> 
> 赞同：1
> 
> 时间：2012-11-07T09:28:17.517
> 
> 标签：python, math, python-3.x, operation

有人可以解释一下为什么下面的代码表现得像这样吗？（它是 Windows7 x64 命令行中的 Python）

```
>>>2.22 + 0.22
2.44000000000000004
>>>(222+22)/100
2.44 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:31:20.177

浮点运算在精度上是有限的，而在 python 中，这些限制是有据可查的。你可以[在这里阅读](http://docs.python.org/2/tutorial/floatingpoint.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T09:30:35.683

所有的浮点数学都是这样的，并且基于 IEEE 标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T09:30:59.093

众所周知，浮点运算会导致错误。

[http://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)

如果您想要精确计算，请使用[该`decimal`模块。](http://docs.python.org/2/library/decimal.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T09:32:06.873

这是由于数据格式。

```
2.22 + 0.22 != 2.44  // both are float
// when you use them to calculate, they are giving consistently "wrong" results
// because the datatype in itself gets incorrect when moving into deep comma space
(222+22) / 100 // becomes this in calculation
222+22 = 244 --> 244/100 = 2.44 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T10:29:17.307

您添加的数字是*浮点*格式。这意味着它有小数位。数学的第二行数字都是整数，所以它们是*整数*形式。众所周知，浮点形式在执行数学方程式时会引发错误。

# android - 在运行时绘制 HSV 圆

> ID：13266735
> 
> 赞同：9
> 
> 时间：2012-11-07T09:28:30.803
> 
> 标签：android, android-layout

我想在我的应用程序中有一个颜色选择器，看起来像这样

![像这样的东西](../Images/d7022dddaea5dbe9aa7ce14880dce3d1.png)

我试过逐像素填充位图，尝试使用画布和`drawArc()`方法。两种方式都不利于性能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:15:33.257

它可能不是它应该的样子（与颜色、饱和度等有关），但[这里有一些东西](http://i1272.photobucket.com/albums/y391/mjeanson/hsv_circle.png)开始看起来像你想要的......

```
import android.graphics.*;
import android.graphics.drawable.Drawable;

public class HSV_Circle extends Drawable {
    Paint p = new Paint();

    @Override
    public void draw(Canvas canvas) {
        int width = canvas.getWidth();
        int height = canvas.getHeight();
        int min = Math.min(width,height);

        RadialGradient radial_gradient = new RadialGradient(width/2, height/2, min/2, 0xFFFFFFFF,
            0x00FFFFFF, android.graphics.Shader.TileMode.CLAMP);

        int colors[] = new int[13];
        float hsv[] = new float[3];
        hsv[1]=1;
        hsv[2]=1;
        for (int i=0; i<12; i++) {
            hsv[0] = (360 / 12) * i;
            colors[i] = Color.HSVToColor(hsv);
        }
        colors[12] = colors[0];

        SweepGradient sweep_gradient = new SweepGradient(width/2, height/2, colors, null);

        ComposeShader shader = new ComposeShader(sweep_gradient, radial_gradient, PorterDuff.Mode.SRC_OVER);

        p.setDither(true);
        p.setShader(shader);

        canvas.drawCircle(width/2, height/2, min/2, p);
    }

    @Override
    public void setAlpha(int i) {
    }

    @Override
    public void setColorFilter(ColorFilter colorFilter) {
    }

    @Override
    public int getOpacity() {
        return PixelFormat.OPAQUE;
    }
} 
```

# android - 在android中添加水印图像

> ID：13266736
> 
> 赞同：6
> 
> 时间：2012-11-07T09:28:35.610
> 
> 标签：android, android-layout

我有像这样在图像中添加水印的代码

```
public static Bitmap mark(Bitmap src, String watermark, Point location, Color color, int alpha, int size, boolean underline) {
            int w = src.getWidth();
            int h = src.getHeight();
            Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());

            Canvas canvas = new Canvas(result);
            canvas.drawBitmap(src, 0, 0, null);

            Paint paint = new Paint();
            paint.setColor(color.RED);
            paint.setAlpha(alpha);
            paint.setTextSize(size);
            paint.setAntiAlias(true);
            paint.setUnderlineText(underline);
            canvas.drawText(watermark, location.x, location.y, paint);

            return result;
        } 
```

我用这段代码调用那个函数

```
mark(bitmap, "watermark", b, null, c, 100, false);
            imgshoot.setImageBitmap(bitmap); 
```

但什么也没发生，你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T03:33:15.563

它解决了，我只是为该代码更改了一点，并感谢您的建议 Doomsknight :)

```
 public static Bitmap mark(Bitmap src, String watermark) {
    int w = src.getWidth();
    int h = src.getHeight();
    Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());
    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(src, 0, 0, null);
    Paint paint = new Paint();
    paint.setColor(Color.RED);
    paint.setTextSize(18);
    paint.setAntiAlias(true);
    paint.setUnderlineText(true);
    canvas.drawText(watermark, 20, 25, paint);

    return result;
} 
```

我用这个函数调用

```
bitmap = mark(bitmap, "Hallo");
imgshoot.setImageBitmap(bitmap); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:44:31.080

您没有将返回的位图分配`result`给任何东西。用新的位图替换旧位图。

```
 bitmap = mark(bitmap, "watermark", b, null, c, 100, false);
 imgshoot.setImageBitmap(bitmap); 
```

编辑：

根据评论，您仍然遇到问题：尝试对一些参数进行硬编码以进行测试。看看它是否与您的参数有关。

```
 Paint paint = new Paint();
        paint.setColor(color.RED);
        //paint.setAlpha(alpha);
        paint.setTextSize(20); //size
        //paint.setAntiAlias(true);
        paint.setUnderlineText(underline);
        canvas.drawText(watermark, 10, 10, paint); //location.x, location.y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T17:27:26.800

```
private Bitmap addWaterMark(Bitmap src) 
{
    int w = src.getWidth();
    int h = src.getHeight();
    Bitmap result = Bitmap.createBitmap(w,h,src.getConfig());
    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(src,0,0, null);
    Bitmap waterMark = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.ic_laucher);
    canvas.drawBitmap(waterMark,0,0,null);

    return result;
} 
```

# api - 从新创建的 BigQuery 项目中查询任何示例数据集

> ID：13266742
> 
> 赞同：0
> 
> 时间：2012-11-07T09:28:51.027
> 
> 标签：api, google-app-engine, google-bigquery

有没有办法像这里一样查询样本数据集

[https://developers.google.com/bigquery/docs/sample-tables](https://developers.google.com/bigquery/docs/sample-tables)

使用我在 GAE 中的应用程序从一个新创建的项目中获取。或者我是否需要将示例数据集链接到 Big Query 中新创建的项目。如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:08:23.387

您可以从任何 Google Developer 项目（已激活 BigQuery API）访问 BigQuery 的 publicdata:samples 表。

在构建访问 BigQuery API 的 App Engine 应用程序时，有多种授权选择，您可以在此处阅读：

Web 服务器身份验证流程： [https ://developers.google.com/bigquery/docs/authorization#web-server-applications](https://developers.google.com/bigquery/docs/authorization#web-server-applications)

App Engine 服务帐户身份验证流程： [https ://developers.google.com/bigquery/docs/authorization#service-accounts-appengine](https://developers.google.com/bigquery/docs/authorization#service-accounts-appengine)

这里还有另一个很棒的示例（Python）： [https ://code.google.com/p/google-bigquery-tools/source/browse/samples/python/appengine-bq-join/](https://code.google.com/p/google-bigquery-tools/source/browse/samples/python/appengine-bq-join/)

# maven - Jenkins：在项目发布时运行作业（通过执行 Maven 发布）

> ID：13266743
> 
> 赞同：0
> 
> 时间：2012-11-07T09:28:50.797
> 
> 标签：maven, jenkins, jobs, maven-release-plugin

我已经定义了一份工作，我使用 Jenkins。我很新。是否可以将作业设置为每次发布项目时运行？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:20:36.217

因为我有 svn 标签，所以我决定使用 svn 标签（所有发布的版本都存储在其中），所以我可以为发布的版本运行我的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:25:05.823

有几种方法可以进行发布与非发布（每日提交）构建。

1.  查看[发布插件的功能](https://wiki.jenkins-ci.org/display/JENKINS/Release+Plugin)
2.  使用两个不同的工作。一种用于“正常”构建，一种用于发布构建。

对于我们在这里运行的项目，我们实际上使用了#2 和[Promoted Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)。正常构建可以提升到不同的状态（*例如*集成、验证）。在促销期间，代码的构建版本被标记以指示促销。当需要进行发布构建时，只有那些已经提升（和标记）的源版本可以构建到发布中。

# java - ShallowEtagHeaderFilter 在 WAS8 应用服务器下不起作用

> ID：13266744
> 
> 赞同：5
> 
> 时间：2012-11-07T09:28:55.033
> 
> 标签：java, spring, spring-mvc, websphere, websphere-8

`org.springframework.web.filter.ShallowEtagHeaderFilter`无法在 WAS8 应用程序服务器下设置响应标头，说明“***警告：无法设置标头。响应已提交***”。但是，在 Tomcat 服务器下测试时，这可以正常工作。`ShallowEtagHeaderFilter`确实包装了原始响应以延迟响应主体的写入，但是在过滤器链执行后响应仍然是提交的。这是一个可能的 websphere 错误吗？欢迎任何解决此问题的建议/解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T10:31:52.107

我通过覆盖`ServletResponse.flushBuffer`方法解决了这个问题。在 WAS8 下`flushBuffer`过早地被调用。`HttpServletResponseWrapper`使用无操作`flushBuffer`方法传递 a就可以`ShallowEtagHeaderFilter`了。

```
public class HttpCacheFilter extends ShallowEtagHeaderFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {

        HttpCacheResponseWrapper responseWrapper = new HttpCacheResponseWrapper(response);
        super.doFilterInternal(request, responseWrapper, filterChain);
    }

    private static class HttpCacheResponseWrapper extends HttpServletResponseWrapper {

        public HttpCacheResponseWrapper(HttpServletResponse response) {
            super(response);
        }

        @Override
        public void flushBuffer() throws IOException {
            // NOOP
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T18:01:44.223

我认为可以通过添加此自定义属性来解决上述问题

com.ibm.ws.webcontainer.invokeFlushAfterService = false

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T08:12:09.073

我正在使用`extremecomponents`jar 文件

```
chain.doFilter(request, new ExportResponseWrapper((HttpServletResponse) response)) 
```

在 WAS8 中面临“无法设置标头。响应已提交”。

经过

```
 @Override
    public void flushBuffer() throws IOException {

    } 
```

在 ExportResponseWrapper 类中，救了我的命。

非常感谢 ... ：）

# javascript - 滚动/跳转到没有 jQuery 的 id

> ID：13266746
> 
> 赞同：83
> 
> 时间：2012-11-07T09:28:57.690
> 
> 标签：javascript, html, scroll

我已经搜索了很多主题以寻找可用的解决方案。
但没有发现什么。大多数脚本对于我的目的来说太混乱了。
寻求仅基于 Javascript 的解决方案。**在我的项目中，无法使用 jQuery。**
我需要跳转或滚动到 id。

```
<head>
<script type="text/javascript">
//here has to go function
</script>
</head> 
```

我的电话是：

```
<a onclick="function_call+targetname"><img src="image1" alt="name1"></a>
<a onclick="function_call+targetname"><img src="image2" alt="name2"></a>
<a onclick="function_call+targetname"><img src="image3" alt="name3"></a> 
```

所以我必须在导航中使用 onclick 事件。

现在 onclick 我想跳转或滚动到页面中的 div id：

```
<div id="target1">some content</div>
<div id="target2">some content</div>
<div id="target3">some content</div> 
```

这很重要：不幸的是，html 锚点不起作用。否则一切都会很容易。

我简单地使用了bevore：

```
onclick="window.location.hash='target';" 
```

但我在 eBay 有限制。他们不允许这个简单的代码。

我也不能调用外部 javascript（仅在头部区域使用 JS）。此外，不能使用：“cookie.”、“cookie”、“替换（”、IFRAME、META 或包含）和基本 href。

用一点 JS 就可以不难跳到一个特定的点。我不需要特殊效果。

有没有人有一个苗条而有用的解决方案？

> 我自己找到了解决方案，感谢 Oxi。我按照你的方式。
> 
> 对于所有对我的解决方案感兴趣的人：

```
<head> <script type="text/javascript"> function scroll(element){   
var ele = document.getElementById(element);   
window.scrollTo(ele.offsetLeft,ele.offsetTop); } </script> </head> 
```

> 导航呼叫：

```
<a onclick='scroll("target1");'><img src="image1" alt="name1"></a> 
```

> 现在你可以跳转到一个名为 ID 的 div

```
<div id="target1">CONTENT</div> 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2014-05-02T07:05:08.370

也许你应该试试scrollIntoView。

```
document.getElementById('id').scrollIntoView(); 
```

这将滚动到您的元素。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2018-02-21T08:18:55.777

如果你想要平滑滚动添加`behavior`配置。

```
document.getElementById('id').scrollIntoView({
  behavior: 'smooth'
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-11-16T10:11:04.410

添加功能：

```
function scrollToForm() {
  document.querySelector('#form').scrollIntoView({behavior: 'smooth'});
} 
```

触发函数：

```
<a href="javascript: scrollToForm();">Jump to form</a> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T09:37:30.673

下面的代码可能会帮助你

```
var objControl=document.getElementById("divid");
objControl.scrollTop = objControl.offsetTop; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-07T09:35:35.413

在锚标记上使用 href 而不是 onclick

```
<a href="#target1">asdf<a> 
```

和 div：

```
<div id="target1">some content</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-10T21:35:52.950

Oxi 的回答是错误的。¹

你想要的是：

```
var container = document.body,
element = document.getElementById('ElementID');
container.scrollTop = element.offsetTop; 
```

工作示例：

```
(function (){
  var i = 20, l = 20, html = '';
  while (i--){
    html += '<div id="DIV' +(l-i)+ '">DIV ' +(l-i)+ '</div>';
    html += '<a onclick="document.body.scrollTop=document.getElementById(\'DIV' +i+ '\').offsetTop">';
    html += '[ Scroll to #DIV' +i+ ' ]</a>';
    html += '<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />';
  }
  document.write( html );
})(); 
```

¹我没有足够的声誉来评论他的回答

# vb.net - 为什么不是所有这些变量都得到同样的处理？

> ID：13266748
> 
> 赞同：9
> 
> 时间：2012-11-07T09:29:05.997
> 
> 标签：vb.net, closures

我正在检查 VB.NET 中变量声明的位置是否无关紧要，除了范围，（对于[这个问题](https://stackoverflow.com/q/13259999/256431)），我想我最好检查一下当它们被“提升”到闭包中时会发生什么。我没有阅读规范，但我无法解释这些结果：

```
Dim outer As Integer
For i = 1 To 2
 Dim inner As Integer
 Try
  Dim inner2 As Integer
  Do
   Dim inner3 As Integer
   Call Sub()
    Dim inner4 As Integer
    Console.WriteLine(outer & ", " & inner & ", " & inner2 & ", " & inner3 & ", " & inner4)
    outer = i
    inner = i
    inner2 = i
    inner3 = i
    inner4 = i
   End Sub()
  Loop Until True
 Finally
 End Try
Next 
```

上述输出：

```
0, 0, 0, 0, 0
1, 1, 0, 1, 0 
```

`inner4`每次都重置是有道理的，其他所有或没有`innerX`，但为什么只有`inner2`？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:05:51.907

（这更像是一个注释，但需要太多代码才能将其保留为一个。）

反射器确实显示*了*正在发生的事情：

```
<STAThread> _
Public Shared Sub Main()
Dim e$__ As New _Closure$__1
Try 
    Dim e$__2 As New _Closure$__2
    Dim e$__3 As New _Closure$__3
    e$__3.$VB$Local_i = 1
    Do
        Dim e$__4 As _Closure$__4
        e$__4 = New _Closure$__4(e$__4)
        Try 
            Dim e$__5 As New _Closure$__5
            Do
                Dim e$__6 As _Closure$__6
                e$__6 = New _Closure$__6(e$__6)
                e$__6.$VB$NonLocal_$VB$Closure_ClosureVariable_8_5 = e$__5
                e$__6.$VB$NonLocal_$VB$Closure_ClosureVariable_6_4 = e$__4
                e$__6.$VB$NonLocal_$VB$Closure_ClosureVariable_6_6 = e$__3
                e$__6.$VB$NonLocal_$VB$Closure_ClosureVariable_4_4 = e$__2
                e$__6.$VB$NonLocal_$VB$Closure_ClosureVariable_2_B = e$__
                Dim e_ As VB$AnonymousDelegate_0 = New VB$AnonymousDelegate_0(AddressOf e$__6._Lambda$__1)
                e_.Invoke
            Loop While (0 <> 0)
        End Try
        e$__3.$VB$Local_i += 1
    Loop While (e$__3.$VB$Local_i <= 2)
End Try
End Sub 
```

[（这是基于我的代码，其中包含`Try`. `For`）]

您可以在这里看到`For`循环（被视为`Do`带有之前集合的循环`$VB$Local_i`）和内部`Do`生成闭包，它们确实传入了闭包的前一个实例，但`Try`没有得到这种处理。

还是不知道*为什么*？对我来说似乎是一个错误。如果我在一天左右没有得到合理的“借口”（:-)），我会把它放在 Connect 上。（有人可以确认 .NET 4.5 VB11 的性能相同吗？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:49:40.497

来自 MSDN（重点是我的）：

> [...]编译器基本上做了什么，当它进入一个包含提升变量的新范围时，编译器将检查是否已经存在闭包实例；如果是这样，编译器将创建一个新的闭包实例并从前一个闭包中重置变量的值。
> 
> 请注意，编译器仅执行上述检查***是否在生成闭包的函数中检测到循环或 GoTo***。

[关联](http://msdn.microsoft.com/en-us/library/bb981314%28VS.80%29.aspx)

# python - 如何知道在 python 中捕获哪种异常类型？

> ID：13266752
> 
> 赞同：5
> 
> 时间：2012-11-07T09:29:15.790
> 
> 标签：python, exception, types

一般异常捕获器记录以下异常：

```
> Traceback (most recent call last):   File "4sq.py", line 37, in
> <module>
>     checkin = client.checkins()   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 416, in __call__
>     return self.GET('{CHECKIN_ID}'.format(CHECKIN_ID=CHECKIN_ID), params, multi=multi)   File
> "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 217, in GET
>     return self.requester.GET(self._expanded_path(path), *args, **kwargs)   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 163, in GET
>     return self._request(url)   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 200, in _request
>     return _request_with_retry(url, data)['response']   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 696, in _request_with_retry
>     return _process_request_with_httplib2(url, data)   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 719, in _process_request_with_httplib2
>     return _check_response(data)   File "/usr/local/lib/python2.7/dist-packages/foursquare-20120716-py2.7.egg/foursquare/__init__.py",
> line 742, in _check_response
>     raise exc(meta.get('errorDetail')) RateLimitExceeded: Quota exceeded 
```

我想知道具体的异常名称，以便我可以为其添加专用的捕获。怎样才能找到它？

捕获的异常是否有“类型”函数，或者是否应该在抛出库的源代码中找到它 - 可[在此处获得](https://github.com/mLewisLogic/foursquare/blob/master/foursquare/__init__.py.)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:32:37.997

这最初是一条评论，但由于它得到了很多支持，并且 OP 声称这是他们正在寻找的东西，所以我将其重新发布为答案：

看起来这是一个 RateLimitExceeded 异常。不过，如果你真的想确定，你可以这样做：

```
try:
    # code
except Exception as e:
    print e.__class__ 
```

这将打印出引发的异常类，这将为您提供明确的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:40:20.820

粘贴中引发的异常是`foursquare.RateLimitExceeded`（如最后一行所述）。`foursquare.FoursquareException`如果您想处理模块中的所有错误，您应该能够正常捕获它，或者捕获它的基类。

引发异常的代码只是从字典中查找要引发的异常类。这不应该对您如何捕获这些错误有任何影响。

# iphone - 如何使uisegment控件标签水平

> ID：13266754
> 
> 赞同：1
> 
> 时间：2012-11-07T09:29:23.350
> 
> 标签：iphone, ios, uisegmentedcontrol

在我的应用程序中，我试图制作一个垂直的`UISegmentControl`. 它在垂直模式下工作正常，但标签也是垂直的。如何使`UISegmentControl`标签水平？

![在此处输入图像描述](../Images/1e06f266c0752de8d5e84735b59a4c89.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:43:50.160

尝试浏览段子视图以查找标签并在标签上进行旋转：

```
for(UIView *v in segmentedView.subviews)
{
  if([v isKindOfClass:[UILabel class]])
  {
    double angle = 45.0;
    v.transform = CGAffineTransformMakeRotation(M_PI * angle / 180.0); // rotate to 45 degree
  }
} 
```

# c# - 绝对到相对路径

> ID：13266756
> 
> 赞同：19
> 
> 时间：2012-11-07T09:29:31.003
> 
> 标签：c#, path

我从 OpenFileDialog 获取一个文件，该文件返回一个字符串，其中包含所选文件的绝对路径。现在我希望该路径作为给定路径的相对路径（在本例中为我的应用程序的路径）。

所以假设我得到了文件的路径： `c:\myDock\programming\myProject\Properties\AssemblyInfo.cs`

我的应用程序位于

`c:\myDock\programming\otherProject\bin\Debug\program.exe`

然后我想要结果：

`..\..\..\myProject\Properties\AssemblyInfo.cs`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-07T09:30:33.593

该类`Uri`有一个[`MakeRelativeUri`](http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri.aspx)可以提供帮助的方法。

```
public static string MakeRelative(string filePath, string referencePath)
{
    var fileUri = new Uri(filePath);
    var referenceUri = new Uri(referencePath);
    return Uri.UnescapeDataString(referenceUri.MakeRelativeUri(fileUri).ToString()).Replace('/', Path.DirectorySeparatorChar);
}

var result = MakeRelative(@"C:\dirName\dirName2\file.txt", @"C:\dirName\"); 
```

# linux - linux nasm 程序集 dwtoa

> ID：13266757
> 
> 赞同：0
> 
> 时间：2012-11-07T09:29:31.473
> 
> 标签：linux, function, assembly, x86, nasm

我被困在一个练习问题上，我需要读取一个整数，将其加 1 并打印出结果。在这个问题上：[linux nasm 程序集打印从零到 100 的所有数字](https://stackoverflow.com/questions/13097906/linux-nasm-assembly-print-all-numbers-from-zero-to-100)，用户 Gunner 提到了 dwtoa。我假设这是一个可调用的函数。那么这个 dwtoa 函数是什么？如果它实际上是一个可调用函数，我在哪里可以得到它（我的意思是如何在我的代码中实现它？）？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:36:43.913

嗯，你得写……或者借一个别人已经写好的。后者更容易（C库有这样的函数，而且很容易从asm调用），但前者更“有趣”。（如果你喜欢那种东西——嘿，有些人会做填字游戏）

`div`指令非常慢。有一种更好的方法是基于乘以倒数和“反向乘法”。这很复杂。我们等着`div`。:)

`div ebx`

如果我们安排了我们的号码，比如 1234、in`eax`和10in `ebx`，我们现在将有 123in`eax`和 4in `edx`（`ebx`保持不变）。实际上，我们希望`edx`在`div`...

`xor edx, edx`

`div ebx`

如您所知，我们可以通过添加字符“0”（或十进制的 48 或 30h）将数字 4 转换为字符“4”。现在我们有了可以打印的东西！但我们还没有完全准备好打印它——我们正在倒退数字。有几种方法可以解决这个问题。我认为最简单的方法是将它们`push`放在堆栈上`pop`他们以正确的顺序关闭。另一种方法是继续将它们向后放入缓冲区并在最后执行“字符串反转”。另一种方法是从缓冲区的“末尾”开始并朝着前面工作（在每个字符之后减少您在缓冲区中的索引，而不是增加它）。这可能意味着当您用完数字时，您还没有完全处于缓冲区的开头。我们可以利用它来发挥我们的优势 - 如果您要在列中打印它们，右对齐的数字看起来不错。如果您认为这看起来不错（我不这样做），您也可以填充前导零（字符“0”，而不是数字 0）。

无论如何，我们已经安全地藏匿了“4”。一次又一次地循环`div`（先做`edx`零！）。现在我们有 12 英寸`eax`和 3 英寸`edx`。对 3 做一些事情，然后再返回`div`。1 英寸`eax`和 2 英寸`edx`。同样，and`eax`为零（`edx`为 1）——此时我们完成了！`div`如果我们与 9 比较，我们可以跳过最后一个`eax`- 如果它更小，我们可以从而`al`不是`dl`. 每次都以相同的方式做更简单...

 `````
; mov eax, the number
; mov edi, the buffer (at least resb 10, please)
; call dwtoa
; mov edx, eax ; count
; mov ecx, buffer
; print it

dwtoa:
    xor ecx, ecx ; for a counter
    mov ebx, 10
pushloop:
    xor edx, edx ; or mov edx, 0
    div ebx
    add edx, '0'
    push edx
    inc ecx ; count it
    test eax, eax ; or cmp eax, 0
    jnz pushloop
    mov eax, ecx ; we'll return the count in eax
poploop:
    pop edx
    mov [edi], dl
    inc edi
    loop poploop
    ret 
````  `那是我的想法（不是剪切和粘贴的），并且可能有错误。它非常草率 - 丢弃 C 想要保留的寄存器 - 不会像 C 想要的那样返回以零结尾的字符串......但我们没有使用 C，所以我们不在乎！:)

随意改进它以适应您的口味，或尝试不同的方法。

除非您有一个，否则您将需要一个“atoi”（或“atodw”以使用相同的命名约定），将用户输入的文本转换为数字。同样的想法，但我们从字符中减去“0”，将“到目前为止的结果”乘以 10，然后添加新数字……直到完成。

 `````
;-------------------
; atoi - converts string to (unsigned!) integer
; expects: buffer in edx
; returns: number in eax
atoi:
    xor eax, eax        ; clear "result"
.top:
    movzx ecx, byte [edx]
    inc edx

    cmp ecx, byte 0
    jz .done
    cmp ecx, byte 10
    jz .done

    cmp ecx, byte '0'
    jb .invalid
    cmp ecx, byte '9'
    ja .invalid

    ; we have a valid character - multiply
    ; result-so-far by 10, subtract '0'
    ; from the character to convert it to
    ; a number, and add it to result.

    lea eax, [eax + eax * 4]
    lea eax, [eax * 2 + ecx - '0']

    jmp short .top
.invalid:
    stc
.done:
    ret
;-------------- 
```` 

`那个是剪切和粘贴的，所以“应该”工作。它也可以改进。使用“有趣”的方式乘以十并添加转换为数字的新字符。此时，您的程序的“工作”包括： `add eax, 1` 无论如何，应该给您一些可以使用的东西。玩得开心！:)````

# asp.net-mvc-3 - 我们如何在 mvc3 中使用 itextsharp？

> ID：13266760
> 
> 赞同：0
> 
> 时间：2012-11-07T09:29:43.157
> 
> 标签：asp.net-mvc-3

大家好，我是 MVC3 的初学者，所以我正在尝试将 pdf 报告与 itextsharp 一起使用，但我对如何使用它感到困惑。你能建议我如何在 MVC3 教程或示例中使用 itext sharp 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:12:43.343

我一般会查看 iTextSharp 示例，倾向于在内存中创建一个并将其保存到`Stream`文件中而不是文件中。然后查看使用 MVC 操作方法返回一个文件流操作结果，使用类似下面的代码片段在您的操作方法末尾：

```
return File(pdfStream, "application/pdf", "PdfFileName.pdf"); 
```

您的 iTextSharp PDF 文档生成的流在哪里`pdfStream`，并且`PdfFileName.pdf`是您希望 PDF 打开/保存为的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:12:18.913

实际上，没有太多特定于 MVC 的内容。您必须执行您将请求生成 pdf 并返回文件的操作，并将所有 itextsharp 魔术放在此操作中：

```
public ActionResult Download()
{
   //MAGIC HERE
   return File(file, "application/pdf", "file.pdf");
} 
```

# c# - 如何在使用 SqlBulkCopy 将其导入数据库时 跳过 excel 中的额外行？

> ID：13266766
> 
> 赞同：0
> 
> 时间：2012-11-07T09:29:51.317
> 
> 标签：c#, asp.net, sql

我正在将 ExcelSheet 导入 SQL Server 数据库，我遇到的问题是 ExcelSheet 大约有 25 列，而数据库表有 15 行。我需要跳过 excel 中多余的不需要的行，例如：

```
using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
{                  
   bulkCopy.ColumnMappings.Add("PP NO", "passportnumber");
   bulkCopy.ColumnMappings.Add("COVER NO", "covernumber");
   bulkCopy.ColumnMappings.Add("NAME", "paxname");
   .....
} 
```

我得到的错误是 `The given ColumnMapping does not match up with any column in the source or destination.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:11:04.890

ColumnMappings 区分大小写。Source Column name和Destination Column name拼写不一样，你也必须检查并在Tables中写入相同的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:08:48.303

请试试这个，让我知道状态

```
OdbcConnection connection;
SqlBulkCopy bulkCopy;
string ConnectionString = @"server=hostname\sqlexpress;database=pubs;uid=sa;pwd=1234;";
string connstr = @"Driver={Microsoft Excel Driver (*.xls)};DriverId=790;Dbq=c:\contact.xls";
using (connection = new OdbcConnection(connstr))
{

OdbcCommand command = new OdbcCommand("Select * FROM [Sheet1$]", connection);

//you can change [Sheet1$] with your sheet name
connection.Open();

// Create DbDataReader to Data Worksheet

using (OdbcDataReader dr = command.ExecuteReader())

{

// Bulk Copy to SQL Server

using (bulkCopy = new SqlBulkCopy(ConnectionString))
{

 // I have given column name "id" in the excel and "empId" sql table, 

 bulkCopy.ColumnMappings.Add("id","empId");
 bulkCopy.ColumnMappings.Add("name","name");

    OR
// You can give index directly
 bulkCopy.ColumnMappings.Add(0,0);
 bulkCopy.ColumnMappings.Add(1,1);

bulkCopy.DestinationTableName = "Names";
//"Names" is the sql table where you want to copy all data
bulkCopy.WriteToServer(dr);
}
dr.Close();
}
}

bulkCopy.Close(); 
```

# sql-server-2008 - 通过触发器 sql server 插入后的 ALter 视图

> ID：13266767
> 
> 赞同：1
> 
> 时间：2012-11-07T09:29:55.183
> 
> 标签：sql-server-2008

我在 sql server 中创建了一个视图。每次将一行添加到我的表时，我都想更改视图。我为它创建触发器：

```
CREATE TRIGGER Trigger1
ON dbo.Table1
AFTER INSERT
AS 
BEGIN
ALTER VIEW VIEW1 as
SELECT *
From Table1
END 
```

但我得到错误：'ALTER VIEW' 必须是批处理中的唯一语句。

我应该怎么做才能纠正它的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:35:28.867

**为什么**每次插入一行时都想改变视图？这根本没有**任何意义**！

该视图不**包含**（或存储）它显示的行 - 它只是一个**存储的查询**......

当您从中选择时，它将始终转到基表并再次获取数据。真的**没有必要**不断地改变视图！

它会在插入后显示该行*而不*被更改......

# jquery - jQuery Toggle，当新菜单打开时，关闭

> ID：13266768
> 
> 赞同：0
> 
> 时间：2012-11-07T09:29:55.473
> 
> 标签：jquery, menu, toggle

我有多个隐藏可见性的菜单（表单），我用图标上的点击事件打开它们。一切都很好，除了当我打开另一个菜单时前一个菜单仍然打开时，它们都保持可见。所以，我希望在打开新菜单时隐藏前菜单。

HTML

```
<span id='settingsIcon' class='settingsIcon'>S
    <div class='settingForms'>
        <div class='formMoveButton'>
            <span class='settingsMakePublicIcon'>w</span>
            <form action='' method='post' class='moveForm'>
                <input class='settingsMakePublicButton' type='submit' value='Make public        ' name='$this->move'/>
            </form>
        </div>
    </div>
</span> 
```

jQuery

```
$(".settingsIcon").click(function(event) {
    event.stopPropagation();

    if($(document).find(".settingForms").is(':visible') < 1) {
        HandleSettingsWindow($($(this).children()[0]));
    } else {
    }
});

HandleSettingsWindow = function (el) {
    $(document).click(function () { // Close the menu when clicked outside it
        el.hide();
        document.oncontextmenu = function () { return true; };
    });
    el.toggle();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:37:55.677

问题出在这条线上

```
if($(document).find(".settingForms").is(':visible') < 1) 
```

不需要< 1，你可以使用

```
if($(document).find(".settingForms").is(':visible')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:35:15.047

请试试这个：http: [//jsfiddle.net/RttT5/](http://jsfiddle.net/RttT5/)

**笔记** `if($(document).find(".settingForms").is(':visible'))`

希望休息能满足您的需求`:)`

**代码**

```
$(".settingsIcon").click(function(event) {
    event.stopPropagation();

    if($(document).find(".settingForms").is(':visible')) {
        HandleSettingsWindow($($(this).children()[0]));
    } else {

    }
});

HandleSettingsWindow = function (el) {
    $(document).click(function () { // Close the menu when clicked outside it
        el.hide();
        document.oncontextmenu = function () { return true; };
    });
    el.toggle();
}​ 
```

# flex4 - 使用数组集合填充 Flex 中的树

> ID：13266771
> 
> 赞同：0
> 
> 时间：2012-11-07T09:30:07.477
> 
> 标签：flex4, flash-builder, arraycollection

我创建了一个数组集合，它有两个图层对象，如下所示，但我只得到一个图层结果。我只是在树上看到“国家”结果。我将 labelField 设置为 'Name'
。那么我的错误可能是什么？

> 国家 ---- 土耳其
> -
> ---- 英国
> -
> ---- 美国

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:19:33.797

通过使用 GroupCollection2 修复了该问题。您可以使用以下链接[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/GroupingCollection2.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/GroupingCollection2.html)

# sql - 如何在 Microsoft SQL Server 2008 中为给定用户选择最新事件？

> ID：13266772
> 
> 赞同：1
> 
> 时间：2012-11-07T09:30:09.520
> 
> 标签：sql, sql-server, sql-server-2008

我在 Microsoft SQL Server 2008 中有一个数据库

我有一个`[eventlog].[dbo].[USER_OPERATION]`有列的表`[userID], [event_description], [event_date], [event_type], [eventID]`

`eventID`对于每个可能发生的给定事件来说都是独一无二的。

给定`UserID`的事件当然不是唯一的（每个用户可能有很多与他相关联的事件），而是与单个用户相关联

我想要的是创建一个查询，它会给我一个列表，其中只有每个用户的*最新*事件（也就是说，every `UserID`）及其相关信息（给定特定事件`event_type`的`eventID`和）。`event_description`

为了显示：

表演时

```
SELECT * 
FROM [eventlog].[dbo].[USER_OPERATION] 
ORDER BY userID ASC 
```

我得到了一些类似的东西

```
|====================================================================================|
|  eventID  |  userID  |        event_description        |  event_date  | event_type |
|           |          |                                 |              |            |
|   123     |    2     |  USER 2 broke something         |  03.11.11    |   CRASH    |
|   391     |    2     |  USER 2 filed a complaint       |  30.04.10    |  COMPLAINT |
|   392     |    2     |  USER 2 has bought beer         |  31.10.09    |  PURCHASE  |
|   32      |    3     |  USER 3 broke something         |  22.10.11    |   CRASH    |
|   568     |    4     |  USER 4 has requested support   |  05.12.11    |  SUPP_REQ  |
|   691     |    4     |  USER 4 has bought beer         |  01.12.10    |  PURCHASE  |
|   81      |    4     |  USER 4 updated personal data   |  17.07.11    |  PDAT_UPD  |
|   141     |    5     |  USER 5 has bought beer         |  16.08.11    |  PURCHASE  |
|   142     |    5     |  USER 5 broke something         |  16.08.11    |   CRASH    |
|   269     |    6     |  USER 6 updated personal data   |  27.01.12    |  PDAT_UPD  |
|   845     |    7     |  USER 7 updated personal data   |  27.01.12    |  PDAT_UPD  |
|           |          |                                 |              |            |
|====================================================================================| 
```

如您所见，一些用户有多个事件，它们关联的日期不同。

我想要的是一个查询，它将向我显示用户列表以及用户最近发生事件的日期是什么（输出本质上是一个列出每个用户一次的表，并显示与每个用户，以及相关的 event_description、event_date 和 event_type 信息）。

我们将这样的查询结果称为“最近事件表”。

**请注意用户 5 (UserID 5) 的“异常情况”，他在同一天弄坏了东西并买了啤酒。**

**在这种情况下，我不在乎两个同一天的事件中的哪一个会进入“最近的事件表”**，它可以随机选择或其他（尽管我仍然需要相关的 event_description 和 event_type 信息）。

**理想情况下**，结果将如下所示（对于与上述相同的用户集）：

```
|====================================================================================|
|  eventID  |  userID  |        event_description        |  event_date  | event_type |
|           |          |                                 |              |            |
|   123     |    2     |  USER 2 broke something         |  03.11.11    |   CRASH    |
|   32      |    3     |  USER 3 broke something         |  22.10.11    |   CRASH    |
|   568     |    4     |  USER 4 has requested support   |  05.12.11    |  SUPP_REQ  |
|   141     |    5     |  USER 5 has bought beer         |  16.08.11    |  PURCHASE  |
|   269     |    6     |  USER 6 updated personal data   |  27.01.12    |  PDAT_UPD  |
|   845     |    7     |  USER 7 updated personal data   |  27.01.12    |  PDAT_UPD  |
|           |          |                                 |              |            |
|====================================================================================| 
```

如果没有办法为用户 5 这样的“日期欺骗”“*随机或按照某些规则选择两者中的任何一个*”，那么对于这种特殊情况，在“最近事件表”中有两个条目是可以接受的，因为它们非常罕见，我可以手动处理它们。

在这种（有点不太幸运）的情况下，“最近的事件表”看起来像

```
|====================================================================================|
|  eventID  |  userID  |        event_description        |  event_date  | event_type |
|           |          |                                 |              |            |
|   123     |    2     |  USER 2 broke something         |  03.11.11    |   CRASH    |
|   32      |    3     |  USER 3 broke something         |  22.10.11    |   CRASH    |
|   568     |    4     |  USER 4 has requested support   |  05.12.11    |  SUPP_REQ  |
|   141     |    5     |  USER 5 has bought beer         |  16.08.11    |  PURCHASE  |
|   142     |    5     |  USER 5 broke something         |  16.08.11    |   CRASH    |
|   269     |    6     |  USER 6 updated personal data   |  27.01.12    |  PDAT_UPD  |
|   845     |    7     |  USER 7 updated personal data   |  27.01.12    |  PDAT_UPD  |
|           |          |                                 |              |            |
|====================================================================================| 
```

这也是可以接受的（但稍后需要进行一些额外的修剪）。

所以，总结一下我的问题，是否有可能构建这样一个 Microsoft SQL 查询，它会按照上面描述的方式给我一个最近的事件表？

非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:39:04.827

您可以将 CTE（*公用表表达式*）与`ROW_NUMBER()`函数结合使用：

```
;WITH CTE AS 
(
    SELECT  
       *,
       RowNum = ROW_NUMBER() OVER (PARTITION BY UserID 
                                   ORDER BY event_date DESC, event_id DESC)
    FROM [eventlog].[dbo].[USER_OPERATION] 
)
SELECT *
FROM CTE
WHERE RowNum = 1 
```

这会将您的数据“分区”成组 - 每个一组 -`UserID`然后按 and 对该组数据中的事件进行排序`event_date DESC`）`event_id DESC`并对它们进行编号 - 最近的条目（对于每个用户）获得`RowNum = 1`- 所以只需从 CTE 和你完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:04:23.180

```
DECLARE @USER_OPERATION table 
(
eventID int,
userID int,
event_description nvarchar(250),
event_date date,
event_type nvarchar(250)
)
Insert into @USER_OPERATION values  (123,2,'USER 2 broke something','11/03/11','CRASH')
Insert into @USER_OPERATION values  (391,2,'USER 2 filled a complaint','04/30/10','COMPLAINT')
Insert into @USER_OPERATION values  (392,2,'USER 2 bought beer','10/31/09','PURCHASE')
Insert into @USER_OPERATION values  (32,3,'USER 3 broke something','10/22/11','CRASH')
Insert into @USER_OPERATION values  (568,4,'USER 4 has requested support','12/05/11','SUPP_REQ')
Insert into @USER_OPERATION values  (691,4,'USER 4 has bought beer','12/01/10','PURCHASE ')
Insert into @USER_OPERATION values  (81,4,'USER 4 updated personal data','07/17/11','PDAT_UPD ')
Insert into @USER_OPERATION values  (141,5,' USER 5 has bought beer','08/16/11','PURCHASE')
Insert into @USER_OPERATION values  (142,5,' USER 5 broke something','08/16/11','CRASH')
Insert into @USER_OPERATION values  (269,6,'USER 6 updated personal data','01/27/12','PDAT_UPD')
Insert into @USER_OPERATION values  (845,7,'USER 7 updated personal data ','01/27/12','PDAT_UPD')

SELECT * FROM @USER_OPERATION AS userOp INNER JOIN
(SELECT DISTINCT userID, (SELECT Top 1 eventID FROM @USER_OPERATION a WHERE a.userID  =B.userID ORDER BY event_date DESC)as eventID
from @USER_OPERATION AS B) as tbl 
ON userOp.userID =tbl.userID and userOp.eventID =tbl.eventID 
```

# html - 居中定位图像

> ID：13266773
> 
> 赞同：0
> 
> 时间：2012-11-07T09:30:11.753
> 
> 标签：html, css, center

我希望图像的位置居中。我使用了`center`标签和文本对齐，但它不起作用。请帮忙

**CSS：**

```
#indtrans
{
    position :fixed;
    display:block;
    background-color : none;
    top: 2px; 
    text-align:center;
    padding-left:130px;
} 
```

**html:**

```
 <center><div  id="indtrans"><img src="indeximg.png"></img></div></center> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:35:00.850

如果你给 div 一个设定的宽度，那么你应该能够设置一个边距：0 auto; 这将使它居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:41:22.150

尝试这个：

```
#indtrans
 {
   display: block;
   left: 50%;
   position: fixed;
   top: 2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:36:30.163

添加`width:100%`

像这样改变css

```
 #indtrans{
    position :fixed;
    display:block; width:100%;
    background-color : none;
    top: 2px; 
    text-align:center;
    padding-left:130px;
}​ 
```

**[演示](http://jsfiddle.net/RbbAx/6/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T09:48:30.650

因为您将`#indtrans`DIV 定位为固定位置，所以您需要更加具体地对齐。简单地使用`margin: 0 auto;`是行不通的。

而是试试这个。剩余边距需要减去元素总宽度的 50%。

```
#indtrans
{
    position :fixed;
    display:block;
    background-color : none;
    top: 2px; 
    left: 50%;
    margin-left: (-50% of total width);
    text-align:center;
    padding-left:130px;
} 
```

# android - 如何使用 R.Drawable 获取图像列表

> ID：13266774
> 
> 赞同：1
> 
> 时间：2012-11-07T09:30:12.657
> 
> 标签：android, image, url, drawable

为了创建一个瓷砖管理系统，我的 res/drawable 目录中有一组图像。如何动态加载该资源？

喜欢 ：`F_16.0_0_112.jpg. ("F_"+zoom"+"._"+XCoord+"_"+YCoord".jpg")`

是否有类似 getDrawable(String) 的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:32:30.497

您可以通过以下方式使用其名称获取可绘制对象：

```
int id = getResources().getIdentifier("name_of_resource", "id", getPackageName()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:38:00.157

您可以使用反射来获得它（不要忘记导入 java.lang.reflect.Field）

```
/**
 * For example calling <code>getDrawableId("ic_launcher")</code> will return the same value as <code>R.drawable.ic_launcher;</code> 
 * 
 * @param name the name of the field
 * @return the drawable id
 */
public int getDrawableId(String name) {
    Class<?> c = R.drawable.class;
    Field f = null;
    int id = 0;

    try {
        f = R.drawable.class.getField(name);
        id = f.getInt(null);
    } catch (NoSuchFieldException e) {
        Log.i("Reflection", "Missing drawable " + name);
    } catch (IllegalAccessException e) {
        Log.i("Reflection", "Illegal access to field " + name);
    }

    return id;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:32:37.433

不，为此使用 android **assets**文件夹。

请[在此处](http://knowledgefolders.com/akc/display?url=displaynoteimpurl&ownerUserId=satya&reportId=2883)查看更多详细信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T09:32:49.203

不幸的是，您不能按名称加载资源。id 是生成的 R 类中的变量。在java中，你不能建立动态变量名。

# php - 控制 addthis 共享的内容

> ID：13266779
> 
> 赞同：0
> 
> 时间：2012-11-07T09:30:37.603
> 
> 标签：php, javascript, jquery, wordpress, plugins

我正在开发一个 wordpress 模板。

我有这个共享者的标记：

```
 <div class="addthis_toolbox addthis_default_style addthis_32x32_style"">
            <a class="addthis_button_facebook" style="cursor:pointer"></a>
            <a class="addthis_button_twitter" style="cursor:pointer"></a>
        </div> 
```

问题是，当我点击在 facebook 上分享时，它会显示：

![在此处输入图像描述](../Images/96b2890a44a1550f6a923361aab739ab.png)

如您所见，标题、网址和图片都可以，但它也以一种奇怪的方式显示内容......是否可以删除它或修改以干净的方式共享它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:32:34.740

### 元标签

当您尝试共享 URL 并将其放入`What's on your mind...`文本框中时，情况也是如此。您需要更改`<meta />`HTML 输出中的标签。

因此，要进行更改，只需添加以下标签：

```
<meta name="description" content="Whatever you want in the share body." />
<meta name="keywords" content="HTML,CSS,XML,JavaScript" />
<meta name="author" content="Your Name" /> 
```

# android - 在 Android 上使用访问令牌创建 Facebook 会话对象

> ID：13266781
> 
> 赞同：2
> 
> 时间：2012-11-07T09:30:40.393
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试以下操作：

1.  在一台 android 手机上，我正在使用 Facebook 授权我的应用程序，并将访问令牌存储在共享首选项中。
2.  将此访问令牌发送到第二个 android 设备（某些不同的应用程序具有相同的 Facebook 应用程序密钥。
3.  现在我无法在第二台设备上使用此访问令牌创建会话。第二个设备没有 UI，因此我不能使用 web/FB 本地应用程序在那里进行授权。

问题：我的问题是如何使用这个传递的访问令牌创建一个 facebook 会话来访问 API。如果有人可以指出一个例子，那将会更有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:04:58.527

从 facebook sdk for Android 3.0 final 开始，api 已经改变，@rightparen 建议的答案不起作用。在新的 API 中，关键是使用**`Session.openActiveSessionWithAccessToken()`**静态方法。此方法专为从 fb sdk 2.x 迁移到 3.x 而设计。

以下代码适用于我。

```
@SuppressWarnings("deprecation")
public static void migrateFbTokenToSession() {
    Facebook facebook = Utils.getFacebookObject();
    AccessToken accessToken = AccessToken.createFromExistingAccessToken(facebook.getAccessToken(), new Date(facebook.getAccessExpires()),
            new Date(facebook.getLastAccessUpdate()), AccessTokenSource.FACEBOOK_APPLICATION_NATIVE, Arrays.asList(Constants.FB_APP_PERMISSIONS));
    Session.openActiveSessionWithAccessToken(ICheezApplication.getContext(), accessToken , new Session.StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            sLogger.debug("fbshare Migration to newer icheez state has been successful");
            if(session != null && session.isOpened()) {
                Session.setActiveSession(session);
            }
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:57:22.500

此函数可以通过使用您传入的参数覆盖默认的 sdk 缓存令牌状态来迁移您现有的令牌状态：

```
private final void migrateToken(String accessToken, long expiresMilliseconds,
                                List<String> permissions, boolean isSSO,
                                long lastRefreshMilliseconds) {
    Bundle bundle = new Bundle();
    TokenCache.putToken(bundle, accessToken);
    TokenCache.putExpirationMilliseconds(bundle, expiresMilliseconds);
    TokenCache.putPermissions(bundle, permissions);
    TokenCache.putLastRefreshMilliseconds(bundle, lastRefreshMilliseconds);
    TokenCache.putIsSSO(bundle, isSSO);

    SharedPreferencesTokenCache cache = new SharedPreferencesTokenCache(this);
    cache.save(bundle);
} 
```

如果您没有保存权限，您应该只传递您在获得令牌时请求的权限列表，或者如果您没有要求或不知道，则应传递一个空的 ArrayList。

isSSO 参数指定您是使用 Facebook 登录/SSO 与 facebook 应用程序 (true) 还是登录 WebView (false) 获取令牌。通过 Facebook 登录获得的令牌可以扩展，此布尔值控制 SDK 是否应自动尝试扩展令牌。

此函数覆盖由 Session 构造函数读取的状态。所以如果你调用这个函数，你需要在之后构造一个 Session 才能使用它。逻辑可能如下所示：

```
 Session session = Session.openActiveSession(this);
    if ((session == null) && hasOldTokenState()) {
        migrateToken(...);
        session = Session.openActiveSession(this);
    }
    // if session is still null, user will have to log in... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:10:38.263

不知道如何获取该访问令牌并授权用户，但如果会话无效，我将使用以下代码重新创建会话。

```
private SessionListener mSessionListener = new SessionListener();

Utility.mFacebook = new Facebook(APP_ID);
Utility.mAsyncRunner = new AsyncFacebookRunner(Utility.mFacebook);
SessionStore.restore(Utility.mFacebook, getApplicationContext());

SessionEvents.addAuthListener(mSessionListener);
SessionEvents.addLogoutListener(mSessionListener); 
```

我的 SessionEvent 类是：

公共类会话事件{

```
private static LinkedList<AuthListener> mAuthListeners = new LinkedList<AuthListener>();
private static LinkedList<LogoutListener> mLogoutListeners = new LinkedList<LogoutListener>();

/**
 * Associate the given listener with this Facebook object. The listener's
 * callback interface will be invoked when authentication events occur.
 * 
 * @param listener
 *            The callback object for notifying the application when auth
 *            events happen.
 */
public static void addAuthListener(AuthListener listener) {
    mAuthListeners.add(listener);
}

/**
 * Remove the given listener from the list of those that will be notified
 * when authentication events occur.
 * 
 * @param listener
 *            The callback object for notifying the application when auth
 *            events happen.
 */
public static void removeAuthListener(AuthListener listener) {
    mAuthListeners.remove(listener);
}

/**
 * Associate the given listener with this Facebook object. The listener's
 * callback interface will be invoked when logout occurs.
 * 
 * @param listener
 *            The callback object for notifying the application when log out
 *            starts and finishes.
 */
public static void addLogoutListener(LogoutListener listener) {
    mLogoutListeners.add(listener);
}

/**
 * Remove the given listener from the list of those that will be notified
 * when logout occurs.
 * 
 * @param listener
 *            The callback object for notifying the application when log out
 *            starts and finishes.
 */
public static void removeLogoutListener(LogoutListener listener) {
    mLogoutListeners.remove(listener);
}

public static void onLoginSuccess() {
    for (AuthListener listener : mAuthListeners) {
        listener.onAuthSucceed();
    }
}

public static void onLoginError(String error) {
    for (AuthListener listener : mAuthListeners) {
        listener.onAuthFail(error);
    }
}

public static void onLogoutBegin() {
    for (LogoutListener l : mLogoutListeners) {
        l.onLogoutBegin();
    }
}

public static void onLogoutFinish() {
    for (LogoutListener l : mLogoutListeners) {
        l.onLogoutFinish();
    }
}

/**
 * Callback interface for authorization events.
 */
public static interface AuthListener {

    /**
     * Called when a auth flow completes successfully and a valid OAuth
     * Token was received. Executed by the thread that initiated the
     * authentication. API requests can now be made.
     */
    public void onAuthSucceed();

    /**
     * Called when a login completes unsuccessfully with an error.
     * 
     * Executed by the thread that initiated the authentication.
     */
    public void onAuthFail(String error);
}

/**
 * Callback interface for logout events.
 */
public static interface LogoutListener {
    /**
     * Called when logout begins, before session is invalidated. Last chance
     * to make an API call. Executed by the thread that initiated the
     * logout.
     */
    public void onLogoutBegin();

    /**
     * Called when the session information has been cleared. UI should be
     * updated to reflect logged-out state.
     * 
     * Executed by the thread that initiated the logout.
     */
    public void onLogoutFinish();
} 
```

}

也许它会帮助你。

# entity-framework-5 - EF Code First 迁移奇怪的行为

> ID：13266782
> 
> 赞同：0
> 
> 时间：2012-11-07T09:30:55.113
> 
> 标签：entity-framework-5, entity-framework-migrations

我有这种情况。我以这种方式在项目上实现了 Code First 迁移

1.  我将 AutomaticMigrationsEnabled 设置为 true 并创建了我的数据库。

2.  2 位开发人员得到了我的代码，这对他们来说一切正常。

3.  我后来修改了我的模型并将 AutomaticMigrationsEnabled 设置为 false 并使用 Add-Migration、Update-Database 来应用此更改。

4.  这些相同的开发人员对代码进行了更新，并且对他们来说一切正常。

5.  第三个开发人员（第一次）获得了最新的代码，并且为他正确创建了数据库（在步骤 3 中进行了更改）并且一切正常……直到……检查一下……他添加了属性OutputCache 到控制器中的操作方法。他从未改变过模型。他从来没有做过任何其他事情，他只是添加了那个属性。当他这样做时，他得到了这个错误。

> '无法更新数据库以匹配当前模型，因为有待处理的更改并且自动迁移被禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。

他没有对数据库进行任何更改。他没有改变模型。他只是添加了这个属性。现在，当他删除此属性时，它仍然给出相同的错误。

我们已经尝试了一切。

a) 删除数据库

b) 将 AutomaticMigrationsEnabled 设置为 true

c) 运行更新数据库

d) 运行 Add-Migration、Update-Database

没有任何工作。无论有没有他的 OutputCache 更改，他仍然有这个错误（我认为这与它无关）。

我使用 AutomaticMigrationsEnabled 或我遵循的步骤有什么问题吗？AutomaticMigrationsEnabled 是否应该在应用程序的生命周期内不改变？

沮丧和困惑。

萨钦

# java - 字符串等于无法正常工作

> ID：13266783
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:30:55.223
> 
> 标签：java, equals, equality, java-6

这是我的调试代码：

```
log.error(u.getName() + " - " + u.getName().length() + " - host_node" + " - " + u.equals("host_node")); 
```

我的日志：

```
11:27:16 [main] ERROR com.google - host_node - 9 - host_node - false 
```

为什么它不相等，我什至正在检查长度，看看是否首先包含空格。但事实并非如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T09:33:03.613

我会使用以下，因为我怀疑`u`不是`String`.

```
u.getName().equals("host_node") 
```

或者更好的是，您可以使用以下内容来获取`false`名称是否为`null`.

```
"host_node".equals(u.getName()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:33:28.247

您应该将 u.getName() 与文本进行比较，因此：

```
u.getName().equals("host_node") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:34:33.837

这

```
 u.equals("host_node") 
```

将字符串与对象进行比较`u`，而不是其名称！即它在打电话`u.equals()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:35:30.200

我猜

```
u.equals() 
```

不是你想比较的。也许你想要你的名字？

`u.getName().equals()`那时会是更好的选择。

无论如何，您的帖子缺少一些关于您和其他上下文的信息来正确回答这个问题。

# sql - 如何在 LEFT JOIN 查询中使用 where 子句？

> ID：13266786
> 
> 赞同：0
> 
> 时间：2012-11-07T09:30:58.520
> 
> 标签：sql, left-join, where-clause

如何正确编写我的 sql 查询？我想在查询中使用 WHERE 子句，但我不知道如何正确。这是我的错误查询：

```
**SELECT pil.[Buy-from Vendor No_],  pil.No_, pil.Amount, pil.Quantity 
FROM dbo.[„blk“ 2011$Purch_ Inv_ Line]AS pil
WHERE pil.Type=5
LEFT JOIN dbo.[„blk“ 2011$Purch_ Inv_ Header] AS pih
ON pil.[Document No_]=pih.No_
ORDER BY pil.amount** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:32:32.680

将`WHERE`子句移到`ORDER BY`.

以下是定义`SELECT`语句外观的文档：http: [//msdn.microsoft.com/en-us/library/ms189499.aspx](http://msdn.microsoft.com/en-us/library/ms189499.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:37:47.287

这是您处理左连接的方式

```
SELECT 
    pil.[Buy-from Vendor No_] 
  ,  pil.No_, pil.Amount
  , pil.Quantity 
FROM dbo.[UAB „Arvi cukrus“ 2011$Purch_ Inv_ Line] pil
LEFT JOIN dbo.[„blk“ 2011$Purch_ Inv_ Header] Pih ON pil.[Document No_]=pih.No_
WHERE pil.Type=5
ORDER BY pil.amount 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:28:02.973

`Where`出现在`From`子句之后。正确的查询是

```
 SELECT pil.[Buy-from Vendor No_],  pil.No_, pil.Amount, pil.Quantity 
    FROM dbo.[„blk“ 2011$Purch_ Inv_ Line]AS pil
    LEFT JOIN dbo.[„blk“ 2011$Purch_ Inv_ Header] AS pih
    ON pil.[Document No_]=pih.No_
    WHERE pil.Type=5
    ORDER BY pil.amount; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T09:32:15.357

在所有连接之后放置 where：

```
SELECT pil.[Buy-from Vendor No_],  pil.No_, pil.Amount, pil.Quantity 
FROM dbo.[„blk“ 2011$Purch_ Inv_ Line]AS pil
LEFT JOIN dbo.[„blk“ 2011$Purch_ Inv_ Header] AS pih
ON pil.[Document No_]=pih.No_
WHERE pil.Type=5
ORDER BY pil.amoun 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T09:32:16.527

放在`WHERE`前面`ORDER BY`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T09:32:38.477

在子句和其他表引用`WHERE`之后移动子句，如下所示：`FROM`

```
SELECT 
  pil.[Buy-from Vendor No_], 
  pil.No_, 
  pil.Amount, 
  pil.Quantity 
FROM ...
...
WHERE pil.Type=5
ORDER BY pil.amount 
```

# javascript - 我无法弄清楚这种形式的“行动”是什么意思

> ID：13266788
> 
> 赞同：5
> 
> 时间：2012-11-07T09:31:04.947
> 
> 标签：javascript, html, forms

有人可以解释使用此代码的方法或表单如何工作吗？

```
<form method='post' enctype='multipart/form-data' target='gform_ajax_frame_1' id='gform_1' 
 action='/contact-us/#gf_1'>
</form> 
```

我正在尝试了解有关表单的更多信息，现在我正在尝试像我的一个朋友那样构建一个多部分表单。

我习惯于形式说`action="contact.php"`，但这个说`action="/contact_us/#gf_1"`。这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:39:59.640

在表格中

**动作指**

提交表单时将表单数据发送到哪里

**和方法是指**

method 属性指定如何发送 form-data（form-data 发送到 action 属性中指定的页面）。

表单数据可以作为 URL 变量（使用 method="get"）或作为 HTTP post 事务（使用 method="post"）发送。

GET注意事项：

> 将表单数据以名称/值对的形式附加到 URL 中 URL 的长度是有限的（大约 3000 个字符） 切勿使用 GET 发送敏感数据！（将在 URL 中可见）对于用户想要为结果添加书签的表单提交很有用 GET 更适合非安全数据，例如 Google 中的查询字符串

POST注意事项：

> 在 HTTP 请求的正文中附加表单数据（数据未显示在 URL 中） 没有大小限制 不能为带有 POST 的表单提交添加书签

[http://www.w3schools.com/tags/att_form_action.asp](http://www.w3schools.com/tags/att_form_action.asp)

[http://www.w3schools.com/tags/att_form_method.asp](http://www.w3schools.com/tags/att_form_method.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:33:19.790

它是一个 URI（尽管其中包含一个片段标识符，这对于表单操作来说是不常见的）。

有时，URI 可以让您推断服务器将使用哪些技术来为其生成响应。这不是这些 URI 之一。

它可能使用 PHP。可能不会。当然有很多可以使用的技术（[Perl](http://www.perl.org/)、[Python](http://python.org/)、[JavaScript](http://nodejs.org/)、[Ruby](http://www.ruby-lang.org/)、[Java](http://www.oracle.com/technetwork/java/)、[.NET](http://www.asp.net/)等）。无法从该 HTML 中判断正在使用*哪个。*

所涉及的技术应该只对有权更改它们的人有意义，并且这些人可以查看服务器以了解如何处理 URI。

由于它们*都可以*处理服务器上联系表单所需的所有内容，因此了解该特定示例使用的内容不会为构建您自己的示例提供任何见解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T09:57:29.120

`<form action="">`就像`<a href="">`- 它指定提交表单时浏览器将请求的 URL。

两者的 URL`action`可以`href`是相对的或绝对的。`contact.php`是相对于当前页面的，因此当提交具有该操作的表单时，浏览器将获取当前页面的 URL，删除 last `/`、 append之后的所有内容，并将`contact.php`表单提交到该 URL。例如

*   `http://stackoverflow.com/questions/13266788/contact.php`

相反，`/contact-us/#gf_1`以 a 开头`/`，因此它与当前*域*相关。在这种情况下，浏览器将获取当前页面的域，附加`/contactus/#gf_1`到该域，并在那里提交表单。例如

*   `http://stackoverflow.com/contact-us/#gf_1`

在 URL 中，散列 ( `#`) 字符以[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)开头。这指的是页面上的锚点，在 HTML 中由命名的锚标记（例如`<a name="gf_1"></a>`）或任何标记上的 id 属性（例如 ）指示`<p id="gf_1"></p>`。

按照惯例，当浏览器访问带有片段标识符的 URL 时，它会在页面加载时将该片段标识符引用的锚点滚动到视图中。

片段标识符*不会*发送到服务器，因此它本身不会对表单提交产生任何影响。但是，页面上运行的 JavaScript 可以查看片段标识符，并可以根据它向服务器发送 AJAX 请求。

# ruby-on-rails - 使用带有 twitter-bootstrap less 的 rails_apps_composer 时出错

> ID：13266789
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:09.763
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在尝试使用 rails_apps_composer 创建一个新应用程序。几周前进展顺利的事情不再奏效了。

我正在使用配置变量：

```
:frontend: bootstrap
:bootstrap: less 
```

现在作曲家打破了几条错误消息

```
.rvm/gems/ruby-1.9.3-p194@testapp/gems/railties-3.2.8/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `less' for #<Rails::Application::Configuration:0x007fbb714356c8> (NoMethodError)
from .rvm/gems/ruby-1.9.3-p194@testapp/gems/twitter-bootstrap-rails-2.1.6/lib/twitter/bootstrap/rails/engine.rb:15:in `block in <class:Engine>' 
```

当我使用*sass*时，它可以工作。但是，我必须使用*less*。

宝石是最新的：

```
twitter-bootstrap-rails (2.1.6)
less (2.2.2) 
```

我还尝试将*不太*明确的添加为具有相同结果的附加 gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:09:37.647

原来它是一个缺失的宝石：less-rails。

不知何故，它必须在最后一次提交中从作曲家中删除。

解决方案：

*   添加“less-rails”作为额外的 gem 使它再次工作。

要做的事：把它（回来？）到 rails_apps_composer。

# html - Flash 和 html5 中的 MOUSE_MOVE 事件抛出频率

> ID：13266790
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:15.490
> 
> 标签：html, actionscript-3, flash

当我将鼠标移过`Sprite`并根据收到的坐标绘制曲线时。我注意到`MOUSE_MOVE`事件不是那么频繁地抛出。这是一个问题：`MOUSE_MOVE`抛出的精确频率是多少。还有关于 html5 的同一个问题：`MOUSE_MOVE`在那里抛出的频率是多少。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:48:08.273

在合理的`MOUSE_MOVE`时间间隔内触发，但比`RENDER`由此产生图像滞后更快。您可以通过在捕获事件时更新场景来解决此问题：

```
private function mouseMoveHandler(event:MouseEvent):void
{
    // Triggers a RENDER event
    event.updateAfterEvent();

    // Do whatever you want
    // ...
} 
```

# ruby-on-rails - 将数据从 csv 导入 postgresql 时无法设置布尔值

> ID：13266799
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:39.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, csv, import

我已经建立了一个导入数据的任务，如下所示：

```
CSV.foreach(file, :headers => true) do |row|  
  question = Question.new ({  
  content:   row[0],
  mark:      row[1],
  topic_id:  row[2],
  question_type_id: row[3],
  answers_attributes: [
    { content: row[5], correct: row[6] },
    { content: row[7], correct: row[8] }
  ]
})
question.user_id = row[4]
question.save! 
```

这是我的 CSV 文件：

```
content, mark, topic_id, question_type_id, user_id, content, correct, content, correct
_____ are people involved in or affected by project activities, 5, 16, 1, 3, True, 't', False, 'f' 
```

但是当我运行导入任务时，`correct attribute`数据库中的总是 FALSE，我尝试过使用不同的 PostgreSQL[布尔数据类型但没有工作。](http://www.postgresql.org/docs/9.2/static/datatype-boolean.html)我错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:23:02.207

我发现了问题。它在 csv 文件中：

```
content, mark, topic_id, question_type_id, user_id, content, correct, content, correct
_____ are people involved in or affected by project activities, 5, 16, 1, 3, True, 1, False, 0 
```

这里的问题是布尔列值之前的空格。在上面的 csv 文件中，中间的空格`True, 1`是个问题。csv文件导入数据库时​​，包含了前面的空格`1`，所以导入的值是`" 1"`，不是`"1"`，所以postgresql无法识别带空格的值。我删除了它之前的空间，它现在可以工作了，这是我正确的 csv 文件（我删除了所有空格）：

```
content,mark,topic_id,question_type_id,user_id,content,correct,content,correct
_____ are people involved in or affected by project activities,5,16,1,3,True,1,False,0 
```

如果有人像我一样遇到 CSV 文件中的空格问题，也许这对 SO 有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:53:24.727

尝试用真/假替换真/假

```
1.9.3-p194 :006 > True
NameError: uninitialized constant True
from (irb):6
from /Users/SAdvincula/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>'
1.9.3-p194 :007 > true
=> true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:00:45.140

更改您的 csv 文件

```
content, mark, topic_id, question_type_id, user_id, content, correct, content, correct
_____ are people involved in or affected by project activities, 5, 16, 1, 3, True, '1', False, '0' 
```

# powershell - 使用远程 PSSession 执行 Get-WSManCredSSP 命令时错误访问被拒绝

> ID：13266801
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:42.463
> 
> 标签：powershell, remoting, credentials, unauthorizedaccessexcepti

我有 Windows XP x86 和 Powershell 2.0。

我打开 Powershell 控制台，然后执行 Enter-PSSession 命令以连接 Windows 2008 Server。

我想远程执行 Get-WSManCredSSP 命令，但我收到错误访问被拒绝。

```
PS C:\Documents and Settings\myuser> Enter-PSSession -Computername servermoss -Credential servermoss\installeruser

[servermoss]: PS C:\Users\installeruser\Documents> Get-WSManCredSSP -Verbose
Get-WSManCredSSP : Access is denied.
    + CategoryInfo          : PermissionDenied: (:) [Get-WSManCredSSP], UnauthorizedAccessException
    + FullyQualifiedErrorId : UnauthorizedAccess,Microsoft.WSMan.Management.GetWSManCredSSPCommand

Access is denied.
    + CategoryInfo          :
    + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.GetWSManCredSSPCommand 
```

解决方案：WinRM 2.0 PowerShell 不支持 CredSSP

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:15:19.273

实际上，您需要`Enter-PSSession -Authentication CredSSP`，但在此之前`Enable-WSManCredSSP -Role Client -DelegateComputer servermoss`在您的本地计算机上是必需的，但这在 XP 中不起作用。XP 中似乎**不**支持 WsMan CredSSP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-18T20:31:26.093

如果有人在不使用 CredSSP 的情况下对 DoubleHop 的简单解决方案仍然存在问题，请发布此解决方案。尚未在 Windows XP 上尝试过，但可能会工作。

试试这个： [https ://www.powershellgallery.com/packages/Invoke-PSSession](https://www.powershellgallery.com/packages/Invoke-PSSession)

它调用 PSSession，然后使用您提供的凭据注册 PSSessionConfiguration。基本上为该 DoubleHop 提供凭据

然后将 Invoke-Command 与该新 PSSession 一起使用。它应该具有执行您需要的操作所需的权限。

# javascript - 使用 FLOT 图表更改悬停时的条形颜色

> ID：13266803
> 
> 赞同：3
> 
> 时间：2012-11-07T09:31:44.477
> 
> 标签：javascript, flot

是否可以使用 Flot 水平条形图更改悬停时条形的颜色

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-23T17:26:54.040

这通过设置“highlightColor”字段对我有用：

```
$.plot("#placeholder", [data], {
    series: {
        bars: {
            show: true,
            align: 'center',
            barWidth: .6,
            horizontal: true
        },
        highlightColor: 'rgb(190,232,216)'
    },
    grid: {
        hoverable: true
    }
}); 
```

有关工作示例，请参[见此小提琴。](http://jsfiddle.net/ringstaff/LVSG3/26/)

# c++ - 带有 CUDA 的 opencv for-loop - 并行处理

> ID：13266804
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:45.003
> 
> 标签：c++, opencv, cuda, parallel-processing, nvidia

我遇到了一个问题，就是让这个迭代器循环在 CUDA 上工作。有人可以帮忙吗？

```
std::vector<cv::DMatch>  matches;
std::vector<cv::KeyPoint> key_pts1, key_pts2;
std::vector<cv::Point2f> points1, points2;
for (std::vector<cv::DMatch>::const_iterator itr = matches.begin(); itr!= matches.end(); ++it) 
        {                   
            float x = key_pts1[itr->queryIdx].pt.x;
            float y = key_pts1[itr->queryIdx].pt.y;
            points1.push_back(cv::Point2f(x,y));                
            x = key_pts2[itr->trainIdx].pt.x;
            y = key_pts2[itr->trainIdx].pt.y;
            points2.push_back(cv::Point2f(x,y));            
        } 
```

上述转换为 CUDA - 并行处理，我认为这对我来说似乎很困难。

```
void dmatchLoopHomography(float *itr, float *match_being, float *match_end, float      *keypoint_1, float *keypoint_2, float *pts1, float *pts2)
{
float x, y;
// allocate memory in GPU memory
unsigned char *mtch_begin, *mtch_end, *keypt_1, *keypt_2, points1, *points2; 
cudaHostGetDevicePointer(&mtch_begin, match_being, 0);
cudaHostGetDevicePointer(&mtch_end, match_end, 0);
cudaHostGetDevicePointer(&keypt_1, keypoint_1, 0);
cudaHostGetDevicePointer(&keypt_2, keypoint_2, 0);
cudaHostGetDevicePointer(&points1, pts1, 0);
cudaHostGetDevicePointer(&points2, pts2, 0);

//dim3 blocks(16, 16); 
dim3 threads(itr, itr); 
//kernal
dmatchLoopHomography_ker<<<itr,itr>>>(mtch_begin, mtch_end, keypt_1, keypt_2, points1\. points2)
cudaThreadSynchronize();    
} 
```

和

```
 __global__ void dmatchLoopHomography_ker(float *itr, float *match_being, float *match_end, float *keypoint_1, float *keypoint_2, float *pts1, float *pts2)
{
 //how do I go about it ??
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:03:52.727

首先，我注意到您的程序包括将 a 移动`vector<KeyPoint>`到`vector<Point2f>`结构中。OpenCV 有一个非常好的单行代码可以为你做到这一点：

```
using namespace cv;
KeyPoint::convert(key_pts1, points1); //vector<KeyPoint> to vector<Point2f> 
```

* * *

现在，让我们谈谈 GPU 的东西。事实证明，`cudaHostGetDevicePointer()`它不分配内存。你会想要`cudaMalloc()`分配内存。例如：

```
//compile with nvcc, not gcc
float* device_matches;
int match_length = matches.end() - matches.begin();
cudaMalloc(&device_matches, match_length*sizeof(float));
//do the same as above for key_pts1, key_pts2, points1, and points2 
```

现在，`device_matches`只是一个普通的 C 数组，而不是 STL 向量。所以，你没有迭代器。相反，您必须只使用普通的数组索引。如果您真的想在 GPU 上使用迭代器，请查看[Thrust 库](http://code.google.com/p/thrust/)。Thrust 确实很方便，但缺点是 Thrust 只提供了一组特定的预烘焙函数。

* * *

更大的问题是您是否想在 GPU 上执行程序的这个特定部分。我建议将 GPU 用于真正计算密集型的东西（例如，实际的特征匹配），但在数据格式之间移动数据（如您的示例代码）比特征匹配便宜许多数量级。

此外，请记住，您在 GPU 上的数据结构通常与在 CPU 上的结构不同。这种重组不一定在计算上很昂贵，但你会想留出一些时间在白板上解决它，扯掉你的头发等等。最后，如果你对 GPU 的东西很认真，那么它可能值得工作通过一些简单的 GPU 编程示例（我很喜欢[Dobbs 博士的大众超级计算教程](http://www.drdobbs.com/parallel/cuda-supercomputing-for-the-masses-part/207200659)），参加 GPU/并行课程，或者与一些 GPU 黑客朋友交谈。

# javascript - 尝试跨域连接到 JSON 文件时出现“访问被拒绝”

> ID：13266805
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:45.930
> 
> 标签：javascript, json, cross-domain, dynamics-crm, xdr

尝试访问不在我域中的服务器上的 JSON 数据时出现访问错误。我尝试通过激活跨域功能，`jQuery.support.cors = true;`但仍然遇到同样的问题。

然后我找到[了这个示例页面](http://www.xul.fr/ajax/xdomainrequest.php)和 [这篇文章](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDQQFjAB&url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F5087549%2Faccess-denied-to-jquery-script-on-ie&ei=viWaUK6WM8Xm4QSIiICwDw&usg=AFQjCNHD57q4XRwAACuDX3DBXrqlLzB0sg&sig2=HWDopXXtw-N4dEmbYzojIA)，充满希望，我试着去`XDomainRequest`代替`XmlHttpRequest`. 不过，我得到了同样的错误。

当我在浏览器窗口中输入地址时，我会得到数据并可以在我的屏幕上看到它。我可以改变/寻找什么来使它工作？（我已经尝试了我能想到的每一个例子，现在我画的是空白。）

我正在执行下面的代码。

```
var xdr = new XDomainRequest();
xdr.onload = function () { alert(xdr.responseText); }
xdr.open("GET", "http://blopp.json");
xdr.send(); 
```

我将无法要求我的用户激活任何东西。此外，我可能希望他们中的许多人在具有高限制的域上（我希望 90%+ 将在 IE 上，至少是第 8 版）。

编辑：

标题如下。

**请求标头：**

状态代码：200 OK
Request Headersview 已解析
GET /AppositelabRestService/api/EnvelopeTemplate/12345 HTTP/1.1
主机：apppositech.hosterspace.com
连接：keep-alive
缓存控制：max-age=0
用户代理：Mozilla/5.0（Windows NT 6.2; WOW64) AppleWebKit/537.4 (KHTML, like Gecko)
Chrome/22.0.1229.94 Safari/537.4
Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept-Encoding : gzip,deflate,sdch
接受语言: sv,en-US;q=0.8,en;q=0.6
接受字符集: ISO-8859-1,utf-8;q=0.7,*;q=0.3

**响应头** HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/xml; charset=utf-8
过期：-1
服务器：Microsoft-IIS/7.5
X-AspNet-Version：4.0.30319
X-Powered-By：ASP.NET
日期：2012 年 11 月 7 日星期三 09:53:19 GMT
内容长度: 394

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:00:43.763

服务器必须通过发送 CORS（跨域资源共享）标头来明确允许它，例如：

```
Access-Control-Allow-Origin: * 
```

否则同源政策适用，你不能这样做。

顺便说一句，flash 使用 crossdomain.xml，所以如果有服务器托管这样的文件，您可以通过 flash 发出请求。

不幸的是[http://apppositech.hosterspace.com/crossdomain.xml](http://appositech.hosterspace.com/crossdomain.xml)是 404。

# session - 如何计算 Java EE 应用程序中的活动会话数？

> ID：13266809
> 
> 赞同：0
> 
> 时间：2012-11-07T09:31:56.927
> 
> 标签：session, jakarta-ee, listener, jaas

我在 JBoss 中使用 JAAS 进行身份验证。我正在使用 DatabaseServerLoginModule 来执行身份验证。

现在我想跟踪应用程序中的活动会话数。我尝试编写一个 HttpSessionListener 但由于某种原因它在成功登录时没有被调用。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:55:08.330

关注此线程[https://community.jboss.org/message/415269](https://community.jboss.org/message/415269)。似乎您必须明确管理会话。我不确定 JAAS 是如何工作的。更重要的是 JAAS 和 HTTP 会话生命周期如何在这里协同工作：[JAAS 和 HTTP 会话生命周期](http://www.oracle.com/technetwork/articles/entarch/session-lifecycle-096133.html)

# comma - 检查NSString是否包含逗号（，）？

> ID：13266811
> 
> 赞同：4
> 
> 时间：2012-11-07T09:32:01.670
> 
> 标签：comma

我用逗号分隔字符串。
首先我想检查是否包含逗号的字符串。在我的应用程序字符串如下所示：

```
NSString *str=@"1,2,3"; 
```

如何检查它是否包含逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T09:34:52.257

我通过使用以下代码解决了我的问题：

```
NSString *str=@"1,2,3";
NSArray *result=[str componentsSeparatedByString:@","];
if([result count]!=0)
{
    NSLog(@"String contains comma");
} 
```

# xamarin.android - 在 monodroid 中处理并重新启动 OpenGLView

> ID：13266812
> 
> 赞同：1
> 
> 时间：2012-11-07T09:32:04.600
> 
> 标签：xamarin.android, xamarin

我正在尝试在同一个 Activity 中处理和重新启动 OpenGLView 或 AndroidGameView，但在同一个 Activity 中处理后似乎游戏无法再次启动。这是我使用 monodroid 游戏示例项目的测试：

```
GLView1 view;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Create our OpenGL view, and display it
        //view = new GLView1(this);
        //SetContentView(view);

        Timer timer = new Timer(OnTimerDone, this, 3000, 3000);
    }

    void OnTimerDone(object state)
    {
        System.Diagnostics.Debug.WriteLine("timer");
        ((Activity)state).RunOnUiThread(() =>
            {
                if (view != null)
                {
                    //view.Stop();
                    view.Dispose();
                    view = null;
                    SetContentView(null);
                    GC.Collect();
                }
                else
                {
                    view = new GLView1((Activity)state);
                    //view.Resume();
                    SetContentView(view);
                }
            });
    }

    //protected override void OnPause()
    //{
    //    base.OnPause();
    //    view.Pause();
    //}

    //protected override void OnResume()
    //{
    //    base.OnResume();
    //    view.Resume();
    //} 
```

在此先感谢您的帮助。

更新我的新代码以避免重用 SetContentView：

```
GLView1 view;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Create our OpenGL view, and display it
        //view = new GLView1(this);
        //SetContentView(view);
        SetContentView(Resource.Layout.Main);
        Timer timer = new Timer(OnTimerDone, this, 3000, 3000);
    }

    void OnTimerDone(object state)
    {
        ((Activity)state).RunOnUiThread(() =>
            {
                LinearLayout linearLayoutMain = ((Activity)state).FindViewById<LinearLayout>(Resource.Id.linearLayoutMain);
                if (view != null)
                {
                    System.Diagnostics.Debug.WriteLine("timer delete");
                    linearLayoutMain.RemoveView(view);
                    try
                    {
                        view.Stop();
                        view.Dispose();
                        view = null;
                        //SetContentView(null);
                        GC.Collect();
                    }
                    catch (Exception ex)
                    {
                        //Android.Util.Log.Debug("ex:", ex.ToString());
                        System.Diagnostics.Debug.WriteLine("ex:" + ex);
                    }
                }
                else
                {
                    view = new GLView1((Activity)state);
                    view.Run();
                    //view.Resume();
                    //SetContentView(view);
                    linearLayoutMain.AddView(view);
                    System.Diagnostics.Debug.WriteLine("timer create");

                }
            });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:39:41.480

我玩了一下你的代码，发现它`Timer` *仍在*运行，但里面的块`RunOnUiThread()`没有被调用。我删除了该`view.Stop()`方法，`view.Dispose()`它开始正常工作。

这是我的完整代码（使用 5000 毫秒的时间间隔）

```
 GLView1 view;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.Main);
        Timer timer = new Timer(OnTimerDone, this, 5000, 5000);
    }

    void OnTimerDone(object state)
    {
        RunOnUiThread(() =>
        {
            try
            {
                LinearLayout linearLayoutMain = ((Activity)state).FindViewById<LinearLayout>(Resource.Id.linearLayoutMain);

                if (view != null)
                {
                    linearLayoutMain.RemoveView(view);
                    view = null;
                }
                else
                {
                    view = new GLView1(this);
                    view.Run();
                    linearLayoutMain.AddView(view);
                }
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.ToString());
            }
        });
    } 
```

旧视图似乎仍然被垃圾收集（见下面的日志）。我不认为额外的电话是必要的。我连续运行了大约 15 分钟的应用程序，没有任何问题。

```
11-16 00:30:05.828 D/dalvikvm( 2144): GC_EXPLICIT freed 119K, 6% free 8813K/9351K, paused 3ms+5ms, total 56ms
11-16 00:30:08.047 D/dalvikvm( 2144): GC_CONCURRENT freed 992K, 12% free 8270K/9351K, paused 4ms+36ms, total 162ms
11-16 00:30:10.667 D/dalvikvm( 2144): GC_CONCURRENT freed 202K, 10% free 8467K/9351K, paused 5ms+63ms, total 116ms 
```

# javascript - Jquery 日期选择器显示在顶部

> ID：13266818
> 
> 赞同：1
> 
> 时间：2012-11-07T09:32:29.317
> 
> 标签：javascript, css, jquery-ui

我希望 jquery 日期选择器出现在上方，即部分在 iframe 内部和外部，如下图所示。顺便说一句，iframe 只是页面的一小部分。

![日历部分出现在 iframe 之外](../Images/7ac6159f982cd15f26a80999a7c2a8ca.png)

但我得到的是这个。

![出现在 iframe 中的日历](../Images/0bf3791e2d5037e0c9c970908e9f3710.png) 任何人都可以帮我解决问题并获得类似于第一张图片的结果吗？我使用的日期选择器是 jquery UI 日期选择器中的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:40:40.183

看起来您可能在容器上设置了相对位置。这可能会导致您绝对定位的日期选择器隐藏在容器中。请尝试删除任何位置规则，或使用位置静态。

# symfony - 在 Doctrine2 中使用一个 flush() 在 INSERT 之前执行 UPDATE

> ID：13266824
> 
> 赞同：2
> 
> 时间：2012-11-07T09:32:36.593
> 
> 标签：symfony, doctrine-orm

我`uniqueConstraints`在`value`现场有测试实体。

我想添加一些新的 Test 实体并使用以下内容更新一些现有的 Test 实体`flush()`：

```
 $new = new Test;
 $new->setValue('existing value');

 $old = $em->getRepository('TestBundle:Test')->findOneByValue('existing value'); 
 $old->setValue('new value);

 $em->flush(); 
```

`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'existing value'`

发生这种情况是因为在插入新实体之前未更新旧实体。

是否可以使用 ONE flush() 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:53:29.000

我不这么认为。Flush 正在执行 UnitOfWork::commit 方法，该方法首先执行插入，然后更新：

```
try {
        if ($this->entityInsertions) {
            foreach ($commitOrder as $class) {
                $this->executeInserts($class);
            }
        }

        if ($this->entityUpdates) {
            foreach ($commitOrder as $class) {
                $this->executeUpdates($class);
            }
        }

        // Extra updates that were requested by persisters.
        if ($this->extraUpdates) {
            $this->executeExtraUpdates();
        }

        // Collection deletions (deletions of complete collections)
        foreach ($this->collectionDeletions as $collectionToDelete) {
            $this->getCollectionPersister($collectionToDelete->getMapping())->delete($collectionToDelete);
        }
        // Collection updates (deleteRows, updateRows, insertRows)
        foreach ($this->collectionUpdates as $collectionToUpdate) {
            $this->getCollectionPersister($collectionToUpdate->getMapping())->update($collectionToUpdate);
        }

        // Entity deletions come last and need to be in reverse commit order
        if ($this->entityDeletions) {
            for ($count = count($commitOrder), $i = $count - 1; $i >= 0; --$i) {
                $this->executeDeletions($commitOrder[$i]);
            }
        }

        $conn->commit();
    } catch (Exception $e) {
        $this->em->close();
        $conn->rollback();

        throw $e;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-24T13:44:28.750

你不应该添加 $em->persist($new); 在 $new->setValue('现有值');?

# css - css less 向选择器添加变量

> ID：13266828
> 
> 赞同：2
> 
> 时间：2012-11-07T09:32:38.840
> 
> 标签：css, less

我是一个 LESS 新手，只是试图最初使用它来删除我的样式表中的一些重复项。我正在尝试使用以下代码在 less 1.2.21 中将变量添加到（相对）复杂的选择器中：

```
@current_house_id: 97;
ul#house-family-menu li#menu-item-@current_house_id {
    background: #8cb4e8 url(images/family-current.png) no-repeat 97% 50%;
} 
```

为免生疑问，原始的 css 应该是：

```
ul#house-family-menu li#menu-item-97 {
    background: #8cb4e8 url(images/family-current.png) no-repeat 97% 50%;
} 
```

当我用 lessc 编译它时，我得到了错误：

> 语法错误：在第 268 行：预期 [ ( . # * - :: : @media @font-face , { ; 得到 @ after: ul#house-family-menu li#menu-item- 之一

我已经尝试过这里和其他地方建议的各种转义机制，但似乎没有任何效果，也许这在 less 中不受支持？如果不是，我想我可以在 ul#house-family-menu li#menu-item 上做一个不太等效的案例，并一次应用一个项目？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:00:25.977

以下：

```
@b: 3;

(~'.tester@{b}') {
    font-size: 20px;
} 
```

输出：

```
.tester3 {
    font-size: 20px;
} 
```

您的解决方案：

```
@current_house_id: 97;
(~'ul#house-family-menu li#menu-item-@{current_house_id}') {    } 
```

输出：

```
ul#house-family-menu li#menu-item-97 {    } 
```

* * *

**编辑：**

1.4.0-beta 看起来改变了这一点（[http://lesscss.org/](http://lesscss.org/)）：

```
(~".myclass_@{index}") { ... 
```

不推荐使用选择器插值，而是这样做

```
.myclass_@{index} { .... 
```

* * *

**此外：**

如果选择器是伪元素，则无法按预期进行选择器插值（至少 v1.5.0）。未解决的问题：[https ://github.com/less/less.js/issues/1294](https://github.com/less/less.js/issues/1294)

解决方法：

```
.myMixin(@whichPseudo) {
  @pseudo-selector: ~":@{whichPseudo}";
    &@{pseudo-selector} {
       background: red;
    }
}

#someEl1 {
    .myMixin(before);
}

#someEl2 {
   .myMixin(after);
} 
```

# jquery-plugins - jQuery文件直接上传到S3

> ID：13266833
> 
> 赞同：2
> 
> 时间：2012-11-07T09:32:50.697
> 
> 标签：jquery-plugins, file-upload, amazon-s3

我正在使用 jQuery File Upload 插件将文件上传到 S3，出于某种原因，S3 总是认为我正在发送多个文件，而我不是。

```
$('#fileupload').fileupload({
    dataType: 'json',
    limitConcurrentUploads: 1,
    singleFileUploads: true,
    replaceFileInput: false,
    limitMultiFileUploads: 1,
    sequentialUploads: true,
    add: function(e, uploadData) {

        var file = {};
        file.id = 'randomstring';
        file.name = uploadData.files[0].name;
        $.ajax({
            type: 'post',
            url: /sign_files_path/,
            dataType: 'json',
            data: {'upload_filename': file.name, 'file_uploader_id': file.id },
            success: function(result, text) {
                if (result && result.amazon_request && result.post_url) {

                    uploadData.formData = result.amazon_request;
                    uploadData.url = result.post_url;
                    console.log(uploadData.files.length) // This always shows 1
                    console.log(uploadData)
                    uploadData.submit();
                }
            },
            error: function(xhr, status) {
            }
        });
    },
    progress: function(e, data) {
        // console.log(data)
    }
}); 
```

我从 S3 获得了有关将文件发送到何处以及何时调用提交的具体详细信息，但它不起作用。我已经设置了所有可以想象的配置选项并重新阅读了 5 次文档，但是每次我尝试上传时，我都会收到来自 S3 的 400 响应。

有人知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:52:15.560

终于想通了。因为它正在使用`Flash uploader`，我只需要比较两个`POST`请求，解决方案是双重的：

1.  我需要将文件输入字段的名称更改为“文件”
2.  添加另外 2 个在 S3 策略中定义的 POST 变量。

# styles - 传递布尔参数的编码风格

> ID：13266839
> 
> 赞同：2
> 
> 时间：2012-11-07T09:33:08.333
> 
> 标签：styles, boolean, clarity

我刚刚和同事讨论了一个方法，用法看起来有点像这样：

**String myString = getString(fields[10], true);**

现在这是我的问题，*true*是做什么的？

显而易见的答案是查看方法定义，看看它对那个布尔值做了什么，但为什么我需要这样做呢？是否有更好的编码风格可以在方法调用中解释布尔值的目的？

我最初想改变方法以接受特定的字符串，但这太松了。

我能想到的最好的主意是创建一个本地布尔值，如下所示：

**布尔 thisShouldBeUpperCased = true;**

**String myString = getString(fields[10], thisShouldBeUpperCased);**

有没有人遇到过这种情况，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:57:29.493

通常在类似 C 的语言中，您可能会使用 const 或枚举来提高可读性，例如

```
const bool kConvertToUpperCase = true;
const bool kDoNotConvertToUpperCase = false; 
```

或者

```
enum {
    kDoNotConvertToUpperCase,
    kConvertToUpperCase
}; 
```

上述方法还允许可扩展性，例如，如果设计最初为特定参数需要两个可能的选项，然后可以将其实现为布尔值，但后来这变成了三个（或更多）选项，需要一个 int 或一个 enum -然后，您不需要在任何地方将表单显式`true`/`false`文字切换到它们的等效值。

例如

```
const int kConvertToLowerCase = 2;
const int kConvertToUpperCase = 1;
const int kDoNotConvertToUpperCase = 0; 
```

或者

```
enum {
    kDoNotConvertToUpperCase,
    kConvertToUpperCase,
    kConvertToLowerCase
}; 
```

# javascript - Javascript：获取下一次出现的 div 元素

> ID：13266840
> 
> 赞同：1
> 
> 时间：2012-11-07T09:33:12.380
> 
> 标签：javascript, html, css

我可以创建一个通用函数，该函数只会影响 div 的下一次出现，其中 class="hiddenDiv" 相对于单击的链接？

像这样：

```
<p><a href="#" class="showDivLink">click to show/hide div</a></p>
    <div class="hiddenDiv">
        <p>Text within hidden div.</p>
    </div> 
```

我希望能够编写这个，以便我可以在我希望能够显示/隐藏的任何带有 class="hiddenDiv" 的 div 之前插入一个带有 class="showDivLink" 的链接。链接应该只影响 div 相对于链接的第一次出现。

我希望这是可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:42:30.117

我建议使用[getElementById](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)方法。添加 id 属性`div`并处理`onClick`事件。

```
<script type="javascript">
    function onAClicked() {
        var div = document.getElementById("hiddenDivId");
        //do whatever you want to div.
    }
</script>
....
<p><a href="#" class="showDivLink" onClick="onAClicked">click to show/hide div</a></p>
<div class="hiddenDiv" id="hiddenDivId">
    <p>Text within hidden div.</p>
</div> 
```

**UPD：**如果可以有大量与 div 的链接，我建议使用`this`var。您应该执行以下操作

```
<script type="javascript">
    function onAClicked(id) {
        var div = document.getElementById("hiddenDivId" + id);
        //do whatever you want to div.
    }
</script>
....
<p><a href="#" class="showDivLink" id="1" onClick="onAClicked(this.id)">click to show/hide div</a></p>
<div class="hiddenDiv" id="hiddenDivId1">
    <p>Text within hidden div.</p>
</div> 
<p><a href="#" class="showDivLink" id="N" onClick="onAClicked(this.id)">click to show/hide div</a></p>
....
<div class="hiddenDiv" id="hiddenDivIdN">
    <p>Text within hidden div.</p>
</div> 
```

UPD2：甚至更多，您可以使用`window.event`

```
<script type="javascript">
    function onAClicked() {
        var e = window.event,
            obj = e.target || e.srcElement,
            id = e.id,
            div = document.getElementById("hiddenDivId" + id);
        //do whatever you want to div.
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T19:34:57.707

此代码还发布在[http://scottizu.wordpress.com/2013/09/24/using-javascript-to-show-and-hide-div-elements/](http://scottizu.wordpress.com/2013/09/24/using-javascript-to-show-and-hide-div-elements/)上。

```
<html>
<head>
<script>
    function myShow(node) {
    node.innerHTML = node.innerHTML + "_SIB1_" + node.nextSibling.nodeName; // Text
    node.innerHTML = node.innerHTML + "_SIB2_" + node.nextSibling.nextSibling.nodeName; // Div
    node.innerHTML = node.innerHTML + "_SIB2_ID_" + node.nextSibling.nextSibling.id; // myDiv
    node.innerHTML = node.innerHTML + "_SIB2_VISIBILITY_" + node.nextSibling.nextSibling.style.visibility;
    node.nextSibling.nextSibling.style.visibility = 'visible';
}

function myHide(node) {
    node.innerHTML = node.innerHTML + '_P_' + node.parentNode.nodeName; // Div      node.innerHTML = node.innerHTML + '_P_ID_' + node.parentNode.id; // myDiv
    node.innerHTML = node.innerHTML + "_P_VISIBILITY_" + node.parentNode.style.visibility;
    node.parentNode.style.visibility = 'hidden';
}
</script>
</head>
<body>
<a title='myShowLink' onclick='myShow(this)'>Click to Show Div</a>
<div id='myDiv'>
    <a title='myHideLink' onclick='myHide(this)'>Click to Hide Div</a> 
    More Info
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:43:33.507

您可以使用`$('.hiddenDiv').before(<your html code>)`. 尝试使用这个。

# c# - C# LINQ to XML：具有两个相同属性的元素数量？

> ID：13266841
> 
> 赞同：0
> 
> 时间：2012-11-07T09:33:14.940
> 
> 标签：c#, xml, linq

我有这样的事情：

```
<Books>
    <Book>
        <Number>
        <Title>
        <Author>
        <NumberOfCopies>
    </Book>
</Books> 
```

该`NumberOfCopies`元素表示图书馆拥有同一本书的相同副本的数量。（相同的书籍=相同的作者，相同的标题）。每本书的`Number`元素都不同，用于将它们存储在图书馆中。

当我添加一本新书时，我想知道图书馆有多少册。（int number）如何做到这一点？

```
XDocument doc = XDocument.Load("books.xml");
var q = from x in doc.Descendants("Books")
        where x.Element("Author").Value == newBook.Author
              && x.Element("Title").Value == newBook.Title
        select x;

int number = (int)q; 
```

这行不通。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:36:57.617

我*怀疑*你想要：

```
var book = doc.Descendants("Book") // Note Book, not Books
              .Where(x => x.Element("Author").Value == newBook.Author &&
                          x.Element("Title").Value == newBook.Title)
              .FirstOrDefault();

if (book != null)
{
    int copies = (int) book.Element("NumberOfCopies");
} 
```

当然，这假设您对于给定的书只有一个元素。

# ios - Self.NavigationController = 表格视图中的空值？

> ID：13266844
> 
> 赞同：1
> 
> 时间：2012-11-07T09:33:19.640
> 
> 标签：ios, uitableview, uinavigationcontroller

在我的应用程序中，我动态创建所有内容并`TabBar`使用第一个选项卡（`TableView`）创建我想在按下单元格时导航并将此代码写入`didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

      TripDetailView * TripDetailViewObjec = [[TripDetailView alloc]initWithNibName:@"TripDetailView" bundle:[NSBundle mainBundle]];

    [self.navigationController pushViewController:TripDetailViewObjec animated:YES];

} 
```

有`self.navigationController=null` 什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:59:12.277

导航不会发生，因为第一个选项卡中没有`navigationController`。要进行导航，您需要在 TableViewController 上嵌入导航控制器。尝试以下方法将其嵌入到`navigationController`第一个选项卡的 TableView

在 appDelegate.m

```
 - (void)applicationDidFinishLaunching:(UIApplication *)application { 

    UINavigationController * firstNavigationController = [[UINavigationController alloc]initWithRootViewController:yourTableViewController];

    // temporarily just used one tab

//tabBarController should be already connected through NIB

    [tabBarController setViewControllers:[NSArray arrayWithObjects:firstNavigationController,nil]];

    self.window.rootViewController = tabBarController;
    } 
```

# java - 是否可以检索功能列表

> ID：13266847
> 
> 赞同：0
> 
> 时间：2012-11-07T09:33:26.067
> 
> 标签：java, google-app-engine

是否可以检索可以检查的所有功能的列表。

目前[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/capabilities/Capability.html](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/capabilities/Capability.html)仅包含静态功能但没有 getList() 或其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:48:27.417

不，目前这是不可能的。您需要分别检查它们中的每一个。

# java - 如何避免 Android 中的资源覆盖？

> ID：13266852
> 
> 赞同：0
> 
> 时间：2012-11-07T09:33:34.817
> 
> 标签：java, android, eclipse, android-library

我正在开发 Android 项目，以避免重复使用库项目的文件，但我观察到“库项目”遵循最重要的概念，首先它将检查主项目中的资源文件，如果它不存在，那么它将查看到图书馆项目。

例如。我的显示启动画面代码在库项目中，因此我必须将启动画面图像包含到库项目以及主项目中。我需要添加资源两次。

无论如何我无法发布库项目，但我仍然需要在库项目中添加斜线屏幕、图标等资源，否则会出现编译时错误。

我的所有代码都在 Library 项目中，所以我需要为其提供所有巨大的资源，并且新的 Main 项目也包含这些不同的巨大资源文件。它不必要地增加我的应用程序大小。

有什么办法可以避免覆盖资源文件？

我可以在项目之间只共享公共资源吗？而不是所有资源文件。

我如何才能在项目之间只共享资源？

# ruby - 摆脱数组中的共性

> ID：13266857
> 
> 赞同：1
> 
> 时间：2012-11-07T09:33:37.217
> 
> 标签：ruby

我有这些数组：

```
x = ['a','b','c','d']
y = ['b','c','e'] 
```

我想摆脱 中的共性`x`并`y`忽略`y`.

理想情况下，当我对这两个数组做某事时，我会得到`['a','d']`.

在 Ruby 中有什么可以做到这一点的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T09:37:03.800

```
x = [:a, :b, :c, :d]
y = [:b, :c, :e]
x - y                  # [:a, :d] 
```

方法“`-`数组差异”返回一个新数组，它是原始数组的副本，删除也出现在第二个数组中的所有项目。

# asp.net - 在 VS 2012 中使用 Web Deploy 指定不同的 appSettings

> ID：13266861
> 
> 赞同：5
> 
> 时间：2012-11-07T09:33:41.820
> 
> 标签：asp.net, visual-studio-2012, webdeploy

我最近开始在服务器和 Visual Studio 2012 上使用带有 IIS 7 的 Web Deploy。我有问题的项目是一个 ASP.Net MVC 3 Web 应用程序。

我已经正确设置了所有内容并且发布工作正常，并且我获得了所需的连接字符串转换，因此目标服务器可以访问正确的数据库。

但是，`appSettings`服务器上的一些值需要与本地计算机上用于开发的值不同。

假设对于这个示例，我有一个开发 web.config，其中包含以下内容：

```
<appSettings>
    <add key="CommonName" value="AlwaysTheSame" />
    <add key="VariableName" value="LocalValue" />
<appSettings> 
```

当它发布时，我希望它在服务器上如下所示：

```
<appSettings>
    <add key="CommonName" value="AlwaysTheSame" />
    <add key="VariableName" value="ServerValue" />
<appSettings> 
```

我想我需要更改文件夹中的`.pubxml`文件中的某些内容，`Properties > PublishProfiles`因为这似乎是连接字符串的更改方式。但是，我没有找到有关如何修改此文件以满足我的需要的任何有用信息。我需要做哪些改变？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T12:10:14.223

您可以使用配置转换，它允许您为不同的环境拥有多个版本的配置文件：

![在此处输入图像描述](../Images/a45f0fa5325e314cce11f67aaa134e54.png)

然后在发布时，您选择您的环境，这将使用特定于环境的配置覆盖 web.config。

为了在不同的部署类型中保持一个值一致，您可以将其存储在 main`web.config`中，并将其他值存储在`web.live.config`etc中。

有关配置转换的更多信息，请阅读 Vishal R. Joshi 的这篇精彩博文：

[http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx](http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-13T08:23:49.993

如果您事先知道要在服务器上使用的值，则可以使用 Web.config 转换。
但是，如果您需要在服务器上的部署过程中将这些值作为参数输入，那么您可以使用[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff398068(v=vs.110).aspx)中所述的 Web 部署参数。

# java - How to parse a date and time with an ambiguous timezone in Java?

> ID：13266867
> 
> 赞同：4
> 
> 时间：2012-11-07T09:33:52.500
> 
> 标签：java, parsing, date, time, timezone

I am using a web service and for the city Florianopolis in Brazil I get the following date:

Tue, 06 Nov 2012 5:30 pm LST

Now the timezone "LST" creates a problem to the SimpleDateFormat parser:

```
// Date to parse
String dateString = "Tue, 06 Nov 2012 5:30 pm LST";

// This parser works with other timezones
SimpleDateFormat LONG_DATE = new SimpleDateFormat("EEE, d MMM yyyy h:mm a zzz");

// Here it throws a ParseException
Date date = LONG_DATE.parse(dateString); 
```

I know that the timezones can be difficult to parse. What do you propose?

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:40:40.233

Try this

```
DateFormat gmtFormat = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z");

TimeZone gmtTime = TimeZone.getTimeZone("GMT-02:00");
gmtFormat.setTimeZone(gmtTime);

System.out.println("Brazil :: " + gmtFormat.format(new Date())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:20:43.787

My current workaround is:

```
// Date to parse
String dateString = "Tue, 06 Nov 2012 5:30 pm LST";

// This parser works with some timezones but fails with ambiguous ones...
DateFormat dateFormat = new SimpleDateFormat("EEE, d MMM yyyy h:mm a zzz");

Date date = null;  
try {
    // Try to parse normally
    date = dateFormat.parse(dateString);
} catch (ParseException e) {
    // Failed, try to parse with a GMT timezone as a workaround.
    // Replace the last 3 characters with "GMT"
    dateString = dateString.replaceFirst("...$", "GMT");
    // Parse again
    date = dateFormat.parse(dateString);
} 
```

# visual-studio-2010 - ffMPEG“未找到inttypes.h”错误

> ID：13266868
> 
> 赞同：20
> 
> 时间：2012-11-07T09:33:58.723
> 
> 标签：visual-studio-2010, visual-c++, ffmpeg

在 Windows 中使用 Visual Studio 2010 中的 ffMPEG 构建时，我遇到了 inttypes.h not found 错误。
由于通过互联网搜索导致我找到错误的解决方案，我想我会在这里提出正确的解决方案，以便人们可以轻松找到它。很快就会回答我自己的问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-07T09:39:59.917

解决方案是下载[此文件](http://code.google.com/p/msinttypes/downloads/list)并将该`inttypes.h`文件放在 Visual Studio 可以找到它的地方，或者放在 ffMPEG 所在的文件夹中`common.h`。如果选择后者，则必须将`#include<inttypes.h>`行更改为`#include "inttypes.h"`.
从[这里](http://libav-users.943685.n4.nabble.com/Libav-user-fatal-error-C1083-Cannot-open-include-file-inttypes-h-No-such-file-or-directory-td4655906.html)得到了这个解决方案。

另一个对我不起作用的解决方案是`#include<inttypes.h>`用

```
typedef signed char  int8_t;
typedef signed short int16_t;
typedef signed int   int32_t;
typedef unsigned char  uint8_t;
typedef unsigned short uint16_t;
typedef unsigned int   uint32_t;
typedef signed long long   int64_t;
typedef unsigned long long uint64_t; 
```

该解决方案是从[这里](http://ffmpeg.org/pipermail/ffmpeg-devel/2007-January/027804.html)获得的。

希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T13:37:19.223

```
#ifndef HAS_INT_TYPES

#ifdef HAS_C99
  #include <stdint.h>
#endif

#endif 
```

# performance - PostgreSQL（开发机器）的最佳配置选项

> ID：13266869
> 
> 赞同：3
> 
> 时间：2012-11-07T09:34:05.360
> 
> 标签：performance, postgresql

我的问题很简单：我在我的开发机器（Linux amd64，四核，8GB 内存）上使用 PostgreSQL 9.1（稍后将使用 9.2）。我已经关闭了 fsync 以提高速度（因为我不在乎我的计算机是否崩溃，我可以随时重建模式和数据），但我对调整其他出厂默认设置有点困惑。我希望它尽可能快。

发行版：Linux Mint Debian 版（最新更新包）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:01:38.410

检查维基：[http ://wiki.postgresql.org/wiki/Simple_Configuration_Recommendation](http://wiki.postgresql.org/wiki/Simple_Configuration_Recommendation)

速度很大程度上取决于您的使用模式，而不仅仅是数据库配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:53:37.870

我之前就这个主题写了一个可能派上用场的答案：[Optimize PostgreSQL for fast testing](https://stackoverflow.com/questions/9407442/optimise-postgresql-for-fast-testing/9407940#9407940)。

一些调整非常依赖于工作负载，因此没有任何一刀切的选择。有关一些建议，请参阅 [http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T11:06:53.073

您需要配置 postgresql.conf 文件。并重启数据库。详细配置设置见此链接：http: [//tekadempiere.blogspot.ae/2014/09/tuning-postgresql-for-better-performance.html](http://tekadempiere.blogspot.ae/2014/09/tuning-postgresql-for-better-performance.html)

# java - Jenkins 和 Sonar，可以使用 Ant 只分析提交的代码吗？

> ID：13266870
> 
> 赞同：0
> 
> 时间：2012-11-07T09:34:07.047
> 
> 标签：java, ant, jenkins, sonarqube

我正在使用 Java+Ant+Jenkins+Sonar。Sonar 每晚都会分析我们的代码。是否可以让 Sonar 在 Jenkins 中只分析新提交的代码，而不是整个项目？同样，我们使用的是 Ant 而不是 Maven。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:47:04.320

这个答案已经有了回应。请参阅[Sonar 中的可能仅查看对新代码进行的分析？](https://stackoverflow.com/questions/13256968/possible-in-sonar-to-only-view-analysis-done-on-new-code)

该解决方案基于声纳的截止插件。

# perl - 如何在哈希值中保留已删除重复项的计数器？

> ID：13266871
> 
> 赞同：-2
> 
> 时间：2012-11-07T09:34:13.597
> 
> 标签：perl, hash, duplicates

```
chdir("c:/perl/normalized");
$docid=0;
use List::MoreUtils qw( uniq );
my %hash = ();
@files = <*>;
foreach $file (@files) 
  {
    $docid++;
    open (input, $file);    
    while (<input>) 
      {
    open (output,'>>c:/perl/postinglist/total');
    chomp;
    (@words) = split(" ");  
    foreach $word (@words)
    {
    push @{ $hash{$word} }, $docid;

    }
      }
   }
foreach $key (sort keys %hash) 
{
    $size = scalar (@{$hash{$key}});    
    print output "Term: $key,   Frequency:$size,    Document(s):", join(" ", uniq @{ $hash{$key} }), "\n";
}

close (input);
close (output); 
```

之前的`join(" ", uniq @{ $hash{$key} })`输出如下：

```
Term:of Frequency:35  Document(s): 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 4 4 4 4 5 6 6 7 7 7 7 7 7 7 7 7 
```

文件显示频率分布在哪里

```
Term:of Frequency:35  Document(s):1 2 3 4 5 6 7 
```

直到这里都很好......我想为删除重复项保留一个计数器，这样我的新输出将是

```
Term:of Frequency:35  Document(s) of: 1(10) 2(7) 3(2) 4(4) 5(1) 6(2) 7(9) 
```

那是值（计数器）

我能够通过对源代码进行一些更改来解决我自己的问题

```
chdir("c:/perl/normalized");
$docid=0;
my %hash = ();
@files = <*>;
foreach $file (@files) 
  {$counter=0;
    $docid++;
    open (input, $file);    
    while (<input>) 
      {
    open (output,'>>c:/perl/tokens/total');
    chomp;
    (@words) = split(" ");  
    foreach $word (@words)
    { 

     push @{ $hash{$word}{$docid}},$counter;
    @{$hash{$word}{$docid}}[$counter]++;

    }
      }
   }

foreach my $line (sort keys %hash) {
        print output "Term:$line \n";
        foreach my $elem (sort keys %{$hash{$line}}) {
            print output"  Doc:$elem " . "freq:".@{$hash{$line}->{$elem}} . "\n";
        }
    }

close (input);
close (output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:42:36.187

最好的选择可能是使用散列而不是数组，并将计数作为散列的值。改变

```
push @{ $hash{$word} }, $docid; 
```

至

```
++$hash{$word}{$docid}; 
```

用于`keys`获取文档 ID。您将丢失订单，但可以使用数字排序轻松恢复。

# datetime - 将 DateTime SSRS 参数筛选器传递给 SharePoint GetListItems CAML 查询问题

> ID：13266872
> 
> 赞同：1
> 
> 时间：2012-11-07T09:34:23.140
> 
> 标签：datetime, sharepoint-2010, ssrs-2008, parameter-passing, caml

我在将报告参数传递给连接到 SharePoint 列表的报告后面的 CAML 查询时遇到了一些问题。我有一个参数 Date（日期时间类型）。

我`=Parameters!Date.Value`在查询中使用，但默认情况下`<CalendarDate>`将当前日期作为默认日期，并返回当前日期的结果，即今天的日期。但是，如果我使用像报告这样的实际硬编码日期，`2012-11-03T00:42:34Z` 则效果很好。

所以我不确定我错过了什么，我的查询如下

```
<Query>
<SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems</SoapAction>
<Method Namespace="http://schemas.microsoft.com/sharepoint/soap/" Name="GetListItems">
<Parameters>
<Parameter Name="listName">
<DefaultValue>Bookings</DefaultValue>
</Parameter>

<Parameter Name="query" Type="xml">
<DefaultValue>
<Query>
<Where>
<DateRangesOverlap>
<FieldRef Name="EventDate"/>
<FieldRef Name="EndDate"/>
<FieldRef Name="RecurrenceID"/>
<Value Type="DateTime">
<Today/>
</Value>
</DateRangesOverlap>
</Where>
</Query>
</DefaultValue>
</Parameter>

<Parameter Name="queryOptions" Type="xml">
<DefaultValue>
<QueryOptions>
<ExpandRecurrence>TRUE</ExpandRecurrence>
<CalendarDate>=Parameters!Date.Value</CalendarDate>
</QueryOptions>
</DefaultValue>
</Parameter>

<Parameter Name="ViewFields" Type="xml">
<DefaultValue>
<ViewFields>
    <FieldRef Name="Title" />
    <FieldRef Name="EventDate" />
    <FieldRef Name="EndDate" />
    <FieldRef Name="Room" />
    <FieldRef Name="Hosted_x0020_By" />
    <FieldRef Name="External_x0020_Attendees" />
    <FieldRef Name="Catering_x0020_Requirements" />
    <FieldRef Name="Fixed_x0020_Facilities" />
    <FieldRef Name="Other_x0020_Facilities" />
    <FieldRef Name="Company" />
    <FieldRef Name="Layout" />
</ViewFields>
</DefaultValue>
</Parameter>

</Parameters>
</Method>
<ElementPath IgnoreNamespaces="True">*</ElementPath>
</Query> 
```

我尝试了不同的格式选项

=CDate(Parameters!Date.Value).ToString("yyyy-MM-ddTHH:mm:ssZ")

但它仍然无法正常工作，它只是返回当前日期的结果，即使我没有在 .

如果我放比它返回当天。我认为参数值根本没有在查询中传递。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:46:50.833

[这](https://stackoverflow.com/a/13320581/243680)是针对同一问题的另一篇文章，这是解决此问题的方法。

# deployment - wsadmin + jython 删除文件夹

> ID：13266875
> 
> 赞同：1
> 
> 时间：2012-11-07T09:34:29.670
> 
> 标签：deployment, websphere, jython, wsadmin

我想使用独立的 wsadmin 执行部署后脚本。它应该删除配置文件（/profile/temp /profile/myCacheFolder）上的所有缓存。我的问题是，是否可以使用 wsadmin 执行此操作？如果有怎么办？我可以以某种方式使用 AdminConfig.deleteDocument 或类似的东西吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:50:27.940

使用`AntAgent`MBean，您可以上传 ant 脚本，然后在远程节点上调用它：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.javadoc.doc/web/mbeanDocs/AntAgent.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.javadoc.doc/web/mbeanDocs/AntAgent.html)

```
from java.lang import String
import jarray

fileContent = '<project name="cleanup" default="cleanup"><target name="cleanup"><delete dir="${user.install.root}/temp" /><delete dir="${user.install.root}/wstemp" /></target></project>'
antAgent = AdminControl.makeObjectName(AdminControl.queryNames('WebSphere:*,type=AntAgent,process=dmgr'))

str = String(fileContent)
bytes = str.getBytes()

AdminControl.invoke_jmx(antAgent, 'putScript', [String('cleanup.xml'),bytes], jarray.array(['java.lang.String', '[B'], String))

AdminControl.invoke_jmx(antAgent, 'invokeAnt', [jarray.array([], String), String('cleanup.xml'), String('cleanup')], jarray.array(['[Ljava.lang.String;', 'java.lang.String', 'java.lang.String'], String)) 
```

`fileContent`变量是您的 Ant 脚本，您可能需要对其进行更多调整，尤其是在 Windows 上以处理被阻止的文件/目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T03:22:59.383

wsadmin.sh 可以使用 Jython 启动，Jython 是带有 Java 的 Python。

所以你可以使用 Python 默认类： `import os os.rmdir('/a/b/c')`

此外，如果您在 Unix 上： `import os os.sys('rm -r /a/b/c') or os.system('rm -r /a/b/c')`

上述命令将删除 /a/b 中的目录 'c'。使用 os.remove('filename') 删除文件。

# java - Java - 日期保存为前一天

> ID：13266876
> 
> 赞同：22
> 
> 时间：2012-11-07T09:34:31.817
> 
> 标签：java, postgresql, gwt, date, glassfish

在数据库中保存日期时，我遇到了一种非常奇怪的行为。在我的（Linux centOS 6.2）服务器上，我使用 glassfish 应用程序服务器（3.1.1 - build 12）和 Java（1.7.0_09），该应用程序是用 Java + GWT 开发的，它使用 PostgreSQL 服务器（9.2.1）。在应用程序内部，有几个日期字段保存在数据库中。日期字段使用 datepicker (http://code.google.com/p/gwt-datepicker, r30)。

db 关系的日期属性是日期类型（不是时间戳）。一些日期前一天保存在数据库中。该问题仅发生在间隔之间的日期，例如 31.03.1968 和 27.10.1968 之间，这让我想到了某种夏令时问题。但由于它不会发生在 1969 年，例如，我不能很好地隔离问题。我试图找到问题发生的其他日期间隔。**例如，如果我在应用程序中选择 19.05.1968，则在保存到数据库后，日期将保存为 18.05.1968。**

奇怪的是，我在另一台服务器上有同一个应用程序的另一个实例，并且在相同的日期它们被正确保存。这让我认为问题可能取决于：

*   玻璃鱼配置；
*   java（java.util.Date 实现？）；
*   我缺少某种服务器配置

我试图将我的服务器的所有可能配置设置为欧洲/罗马（我的时区），但没有。任何想法？我该如何解决或调查这个问题？

**更新：** 1968 年是闰年。这个问题也发生在 1972 年，又是闰年。总结：**“日期保存前一天”问题发生在夏令时日期间隔的闰年。**

创建日期对象的代码部分是：

```
Date d = dateField.getSelectedDate();
if (d != null) {
    txtVal = DateTimeFormat.getFormat("dd/MM/yyyy").format(d);
} 
```

其中 dateField 声明为：

```
transient private DatePicker dateField; 
```

包是`org.zenika.widget.client.datePicker.DatePicker`（前面提到的gwt-datepicker-r30），DateTimeFormat指的是`com.google.gwt.i18n.shared.DateTimeFormat`

**接受答案后更新：**

我使用了这个解决方法：创建日期时，我使用以下代码：

```
final long hours12 = 12L * 60L * 60L * 1000L;
Date d = new Date(d1.getTime() + hours12); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T09:40:35.970

只需将日期时间设置为 12:00（而不是默认的 0:00）就可以了。问题是 GWT 时区库不包括 1990 年之前的所有闰年，因此您将在服务器上得到错误的时间（因为该值是以时间戳的形式发送的，并且间隔一小时）。

顺便说一句：GWT 有一个内置的日期选择器，在[http://gwt.google.com/samples/Showcase/Showcase.html#!CwDatePicker查看它的演示](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDatePicker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:25:00.560

您使用的是 java.util.date 还是 java.sql。日期（后者是正确的）？我对 SQL Server 也有类似的问题，即使它是正常的，是的，与夏季有关。

基本上，您将 Java 日期存储为特定日期的午夜。如果是夏令时，日期会移到前一天的 23:00，然后时间会被截断！如果您发送带有“随机”时间戳的日期，您将在夏季 24 次中遇到此问题。

我不记得确切的解决方案（它不会直接帮助您，因为它指的是不同的 DBMS），但是 dB 中有一个设置说“在您收到日期时存储它”。您可以通过将 dbcolumn 更改为 timestamp 并查看时间的存储方式来测试是否是这种情况。

我做了一些研究 - 似乎 gwt-datepicker 有很多问题！[http://code.google.com/p/google-apps-script-issues/issues/detail?id=2022](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2022) http://code.google.com/p/google-apps-script-issues/issues/detail ?id=2001

如果他们的计算在闰年有错误，我不会感到惊讶。此外，完全有可能只是您正在做的事情与您认为自己正在做的事情之间不匹配 - 使用 Dates 是一件非常困难的事情

要检查，请尝试：

```
final java.util.Date ud = dateField.getSelectedDate();;
final java.sql.Date sd = new java.sql.Date(ud.getTime());
System.out.println(ud);// this is what you pick from the DatePicker
System.out.println(sd);// this is what will be stored on the database 
```

看看他们在闰年的夏天是否匹配。如果是 GWT 错误，[http://code.google.com/p/google-apps-script-issues/](http://code.google.com/p/google-apps-script-issues/)是报告它的正确位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T16:37:54.537

出生日期实时面对这个问题。

我进行了以下修复，因此不是在上午 12 点保存日期，而是在上午 6 点保存日期，即服务器工作时间之前。即使扣除一个小时，也不影响dob。

```
Calendar now = Calendar.getInstance();
now.setTime(YOUR_DATE);
now.set(Calendar.HOUR_OF_DAY, 6);
YOUR_DATE = now.getTime(); 
```

迈克斯的回答很好。但是，如果我们使用 12 pm 保存，如果用户在 12 pm 之前的营业时间内输入日期，则日期比较可能会出错。

# asp.net - 进行有条件提交

> ID：13266878
> 
> 赞同：0
> 
> 时间：2012-11-07T09:34:38.387
> 
> 标签：asp.net

我有一个基本的 asp.net 提交按钮，如下所示：

`<asp:Button ID="test" runat="server" onclick="test_Click" />`

我有一个要在提交之前运行的 javascript 方法，但我无法将其设置为这样做。有谁知道怎么做？javascript 方法在 true = submit 的最后返回 true/false。

谢谢回复，不过你说的我已经试过了，还是不行。这是我的标记：

`<asp:Button OnClientClick="return checkInput();" ID="test" runat="server" onclick="test_Click" />`

javascript 方法运行，但即使它返回 true 页面也不会回发。

编辑：没关系，javascript方法有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:39:22.103

您需要添加`OnClientClick`到您的标签。像这样：

```
<asp:Button ID="test" runat="server" onclick="test_Click" OnClientClick="**javascript call here**"/> 
```

asp.net 控件中的 OnClientClick 与常规 HTML 标记上的 onclick 属性相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:36:39.307

您需要为此定义 OnClientClick 属性。

```
<asp:Button ID="test" runat="server" onclick="test_Click"
onclientclick="if(confirm('Are you sure?')) return true;" /> 
```

用你想做的任何事情替换javascript，但上面的例子`test_Click`只会在用户在确认对话框中点击YES后触发你的背后代码子/函数[]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:39:04.353

如果应该允许 javascript 方法取消回发并因此返回，那么如果方法返回`true/false`，您应该从 中返回它`onclientclick`以中止事件`false`：

```
<asp:Button ID="test" runat="server" 
    OnClientClick="return test_Click();"
    OnClick="Server_Click"
/> 
```

# tooltwist - 我们如何在XPC组件runMethod中检索传递的属性值

> ID：13266882
> 
> 赞同：1
> 
> 时间：2012-11-07T09:34:50.337
> 
> 标签：tooltwist

在 XPC 中，当我们尝试与外部数据源交互时，我们基本上创建 XPC 组件，如下所示 xpc.start("training.getPeopleList", "select"); xpc.attrib("id", "10365"); 我们如何在 XPC 组件 runMethod 中检索传递的属性值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:20:02.493

使用以下内容：

```
// Get the attrib using the following
XData input = new XData(elem);
String id = input.getText("//id"); 
```

[您将在以下提到的场景中如何执行复杂的 SQL 查询中](https://stackoverflow.com/questions/13247554/how-to-execute-complex-sql-queries-for-below-mentioned-scenarios)找到类似的答案

# php - classmap option not working while using php's SoapClient

> ID：13266890
> 
> 赞同：5
> 
> 时间：2012-11-07T09:35:07.807
> 
> 标签：php, zend-framework, soap, wsdl, soap-client

Currently I am working on an internal soap service to control some internal processes. Which is normally not all that hard to do. I am however trying to use the soapClient classmap functionality to map objects instead of working with the stdClasses which are normally returned for non complextypes.

Considering the fact that wsdl's and sources take up alot of space code-wise, i will link to relevant documents instead of spamming them in this question.

First of all I am using Zend_Soap_Server and Zend_Soap_Server_Autodiscover for my Soap service and wsdl generation.

Soap server code: [https://www.dropbox.com/s/eji7l50g42m2ixl/SoapServer.txt](https://www.dropbox.com/s/eji7l50g42m2ixl/SoapServer.txt)

WSDL result for ?wsdl request: [https://www.dropbox.com/s/vyxbjz7wogd8suy/wsdl.txt](https://www.dropbox.com/s/vyxbjz7wogd8suy/wsdl.txt)

The soap service publishes a serviceclass. This class contains a method to obtain data from our soap service. This method is called getPackages.

getPackages method form the soap service: [https://www.dropbox.com/s/p5ddxpraju7ru6x/method_from_serviceclass.txt](https://www.dropbox.com/s/p5ddxpraju7ru6x/method_from_serviceclass.txt)

The getPackages method returns a DataObject which in turn returns contains references to other data objects. These objects exist on both server as client and are exactly the same on both ends.

The main data object: [https://www.dropbox.com/s/qt51pw3rpq7c2ba/dataobject.txt](https://www.dropbox.com/s/qt51pw3rpq7c2ba/dataobject.txt)

When connecting to this service and calling the getPackages method, I get the response as expected: a stdClass containing a vps and a shared property.

Unfortionatly when adding the classmap, the result remains exactly the same.. a stdClass containing vps and a shared property. The expected result would be a Soho_Soap_DataObject_Packages object containing the vps and shared properties.

This is the used SoapClient code: [https://www.dropbox.com/s/ulnni84p8dawv97/SoapClient.txt](https://www.dropbox.com/s/ulnni84p8dawv97/SoapClient.txt)

When i call the getPackages method through Soap i get the following:

```
$SoapClient = \Soho_Soap_Client::getInstance();
$packages = $SoapClient->getPackages();
print_r($packages); 
```

Output:

```
stdClass Object
(
[shared] => Array
    (
        [0] => stdClass Object
            (
                [id] => 
                [title] => 
                [pricePerPeriod] => 
                [price] => 
                [minRegistrationMonths] => 
                [properties] => 
                [options] => Array
                    (
                    )
            )
    )
[vps] => 
```

)

However, if I look at the response types I get the following:

```
print_r( $SoapClient->__getTypes() ); 
```

Output:

```
 Array
    (
    [0] => Soho_Soap_DataObject_Package_Shared ArrayOfSoho_Soap_DataObject_Package_Shared[]
    [1] => struct stdClass {

    }
    [2] => Soho_Soap_DataObject_Package_Shared_Option ArrayOfSoho_Soap_DataObject_Package_Shared_Option[]
    [3] => struct Soho_Soap_DataObject_Package_Shared_Option {
        string title;
        string value;
    }
    [4] => struct Soho_Soap_DataObject_Package_Shared {
        int id;
        string title;
        int pricePerPeriod;
        int price;
        int minRegistrationMonths;
        stdClass properties;
        ArrayOfSoho_Soap_DataObject_Package_Shared_Option options;
    }
    [5] => Soho_Soap_DataObject_Package_Vps ArrayOfSoho_Soap_DataObject_Package_Vps[]
    [6] => Soho_Soap_DataObject_Package_Vps_Option ArrayOfSoho_Soap_DataObject_Package_Vps_Option[]
    [7] => struct Soho_Soap_DataObject_Package_Vps_Option {
        string title;
        string value;
    }
    [8] => struct Soho_Soap_DataObject_Package_Vps {
        int id;
        string title;
        int pricePerPeriod;
        int price;
        int minRegistrationMonths;
        stdClass properties;
        ArrayOfSoho_Soap_DataObject_Package_Vps_Option options;
    }
    [9] => struct Soho_Soap_DataObject_Packages {
        ArrayOfSoho_Soap_DataObject_Package_Shared shared;
        ArrayOfSoho_Soap_DataObject_Package_Vps vps;
    }
    ) 
```

Google isn't helping me much since the classmapping documentiation isn't all too great to start with, so I hope the stack community can shine a light on my problem.

2 days of staring at the same problem makes me desperate.

A short while ago I used SoapClient in the same way to communicate with a vmware vsphere API which worked perfectly, so I do think the problem has something to do with the WDSL, but currently I am lost.

I thank everyone that takes the time to look at my problem in advance for their time. I will ofcourse provide additional information when requested.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T08:57:40.340

One thing jumps out when looking at the code, and that is that the `zend_soap_server` instance should use it's own WSDL, like this:

```
$SoapServer = new Zend_Soap_Server($urltowsdl, array('classmap' => $classmap)); 
```

# asp.net - 触发器在 Quartz.net 网站中不触发

> ID：13266893
> 
> 赞同：0
> 
> 时间：2012-11-07T09:35:23.953
> 
> 标签：asp.net, vb.net, quartz.net

> **可能重复：**
> [Quartz.Net 调度程序在本地工作，但不在远程主机上](https://stackoverflow.com/questions/2763072/quartz-net-scheduler-works-locally-but-not-on-remote-host)

当我使用此代码时：

工作代码：

```
Public Class ImportJob
Implements IJob
Public Sub Execute(context As IJobExecutionContext) Implements IJob.Execute
    '''some code
End Sub
End Class 
```

触发代码：

```
Public Class ScheduleManager
Public Shared Property Scheduler As IScheduler
  Public Sub RunTrigger()
    Dim startTime As DateTimeOffset
        startTime = DateBuilder.DateOf(20, 0, 0)

    Dim scheduler = GetScheduler
    Dim job As IJobDetail = JobBuilder.Create(Of ImportJob)().WithIdentity("jobname").Build()
    Dim trigger As ITrigger
        trigger = TriggerBuilder.Create().ForJob(job).WithIdentity("som Name").WithDescription("some Desc").StartAt(startTime).WithSimpleSchedule(Function(x) x.WithIntervalInHours(24).RepeatForever).Build()

    scheduler.ScheduleJob(job, trigger)
    scheduler.Start()
End Sub
Public ReadOnly Property GetScheduler As IScheduler
    Get
        If Scheduler Is Nothing Then
            Scheduler = New StdSchedulerFactory().GetScheduler()
        End If
        Return Scheduler
    End Get
End Property

End Class 
```

在全球范围内：

```
 Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs on application startup
    Dim schde As New ScheduleManager
    schde.RunTrigger()
End Sub 
```

我使用此触发器和作业进行调度，当我使用该代码时，触发器必须在 20:00 触发，但触发器不触发？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:52:57.263

我相信这是[Quartz.Net 调度程序在本地工作但不在远程主机上](https://stackoverflow.com/questions/2763072/quartz-net-scheduler-works-locally-but-not-on-remote-host)的副本。因此，请使用对您的调度程序工厂的全局引用，并注意应用程序池回收。

# matlab - 如何将函数的返回值存储到列矩阵（八度）

> ID：13266897
> 
> 赞同：0
> 
> 时间：2012-11-07T09:35:30.527
> 
> 标签：matlab, octave

在 for 循环中调用函数时，如果 n 是循环迭代的次数，我需要将所有返回值存储到列矩阵 nx1 中：

```
for (i = 1:n)
        function(arg);
end 
```

存储这些值后，我还需要获得前五个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:55:10.523

假设您的论点`res`取决于 index `i`，即`result(i) = yourfunction(arg(i))`，您可以使用更紧凑的表达式：

```
 result = arrayfun(@yourfunction,arg); 
```

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:39:24.443

您可以使用以下代码：

```
res = zeros(n,1);
for (i = 1:n)
        res(i)=function(arg);
end 
```

需要在循环之前分配以确保您有列矩阵而不是行。

**编辑**：

回答最后一个问题：存储这些值后，我还需要获取前五个值。

您可以使用排序功能来接收最佳值：

```
res=sort(res);
result=res(1:5) 
```

# android - 带有 Theme.Sherlock.Light 的 AlertDialog 上深色背景上的深色文本

> ID：13266901
> 
> 赞同：18
> 
> 时间：2012-11-07T09:35:42.183
> 
> 标签：android, android-alertdialog, android-theme, android-dialogfragment

我正在`Theme.Sherlock.Light`为我的应用程序使用主题，并且正在创建一个`DialogFragment`带有底层`AlertDialog`. 它在 Android 3.x 和 4.x 上运行良好，但在 Android 2.x 上，我在深色背景上看到深色文本，难以阅读。我做错了什么，我是否需要通过创建自定义样式来强制使用浅色背景？提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T11:42:56.953

我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/zCiPdYGgFQA)找到了解决方案：

```
builder.setInverseBackgroundForced(true) 
```

另外，正如我[在这里](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/lGuxn7YjTY0)看到的，Jake Warton 建议以相同的方式修复它，但由于 AlertDialogs 的实施，他不知道任何更好的解决方案。

# javascript - 避免浏览器插件弄乱代码？

> ID：13266903
> 
> 赞同：1
> 
> 时间：2012-11-07T09:35:44.397
> 
> 标签：javascript, jquery, ajax, web-services, browser-extension

由于我一直在使用 javascript 和 ajax 服务，我注意到有一些浏览器插件倾向于混淆为服务和脚本存储的代码和值的内容。例如，OpenScape 和 Skype 之类的插件可以在找到任何电话号码时进行一些处理。当涉及到脚本和服务时，这可能会有点混乱。

例如，如果您在页面上有一个服务脚本并且您在页面上有一个电话号码，则可以注意到这一点，例如 OpenScape 会进入代码并修改电话号码以及现在可以点击它时应该发生的事情. 这也可能会弄乱服务变量，因为如果您调用这些值，则这些值将不再存在并且为“空”。不好。

**问题：** 有没有办法避免像这样的浏览器插件影响，以确保插件不会干扰网页内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:38:00.667

不，你不能。就如此容易。

# c# - NAudio WaveOut 设备 ID

> ID：13266904
> 
> 赞同：3
> 
> 时间：2012-11-07T09:35:44.443
> 
> 标签：c#, .net, naudio

我需要选择 waveout 设备来播放声音。但我不能那样做。

```
void Initialize()
{
_WaveOut = new WaveOut();
var reader = new WaveFileReader(FileName);
_WaveOut.Init(new WaveChannel32(reader));
} 
```

此函数启动，然后表单启动。在我的表单上之后，我选择带有组合框的 waveout 设备。组合框填充了以下代码：

```
for (int i = 0; i < WaveOut.DeviceCount; i++)
{
     WaveOutCapabilities WOC = WaveOut.GetCapabilities(i);
     comboBox2.Items.Add(WOC.ProductName);

} 
```

在此之后，我选择我的设备。

```
int WaveOutDeviceId = comboBox2.SelectedIndex; 
```

并启动播放功能：

```
void Play()
{
_WaveOut.DeviceNumber = WaveOutDeviceId;
_WaveOut.Play();
} 
```

但我的声音总是在默认设备上播放（数字 = 0）。如果我为麦克风执行此操作，则此代码可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:27:19.203

一旦你打电话`Init`，改变就太晚了`DeviceId`。我建议创建一个新实例来说明`WaveOut`何时要更改设备。

# html - 如何验证 wp seo yoast 面包屑？

> ID：13266905
> 
> 赞同：2
> 
> 时间：2012-11-07T09:35:45.700
> 
> 标签：html, validation, breadcrumbs

我想验证我的网站。我有：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我有这个问题：

[http://validator.w3.org/check?uri=http%3A%2F%2Fturismo-in.it%2Fnotizie-abruzzo%2Fla-rassegna-donne-in-jazz-valorizza-la-cultura-della-musica% 2F&charset=%28detect+自动%29&doctype=内联&group=0&user-agent=W3C_Validator%2F1.3](http://validator.w3.org/check?uri=http%3A%2F%2Fturismo-in.it%2Fnotizie-abruzzo%2Fla-rassegna-donne-in-jazz-valorizza-la-cultura-della-musica%2F&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3)

使用 Yoast 的 Wordpress seo 我有 3 个面包屑错误。我该如何验证它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-11T09:51:17.170

Joost de Valk[花费了很多精力](https://yoast.com/w3c-validation-seo/)来证明关于其插件的验证错误可以“搁置一旁”，当然使用常识。

不过我理解你的担心。您可以**在您的 functions.php**文件中输入此代码来解决问题：

```
add_filter ('wpseo_breadcrumb_output','mc_microdata_breadcrumb');
function mc_microdata_breadcrumb ($link_output)
{
    $link_output = preg_replace(array('#<span xmlns:v="http://rdf.data-vocabulary.org/\#">#','#<span typeof="v:Breadcrumb"><a href="(.*?)" .*?'.'>(.*?)</a></span>#','#<span typeof="v:Breadcrumb">(.*?)</span>#','# property=".*?"#','#</span>$#'), array('','<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="$1" itemprop="url"><span itemprop="title">$2</span></a></span>','<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><span itemprop="title">$1</span></span>','',''), $link_output);
    return $link_output;
} 
```

# java - 无法在 Hibernate 中删除孤儿

> ID：13266907
> 
> 赞同：3
> 
> 时间：2012-11-07T09:35:57.400
> 
> 标签：java, hibernate, cascade, orphaned-objects

我发现了很多这些问题，但由于某种原因，它们对我不起作用。所以，我显然做错了什么。

**表单对象：**

```
@Entity
@Table(name = "WEBFORMS_WEBFORM")
public class Form {

    @Id
    @GeneratedValue
    @Column(name = "FORM_ID")
    Long id;

    @Column(name = "NAME")
    String name;

    @OrderBy("priority")
    @OneToMany(mappedBy = "form", cascade={javax.persistence.CascadeType.ALL}, orphanRemoval = true)
    Set<FormField> formFields;

    @OrderBy("creationDate DESC")
    @OneToMany(mappedBy = "form", cascade={javax.persistence.CascadeType.ALL}, orphanRemoval = true)
    Set<FormResult> formResults;

    @Column(name = "ALLOW_GUESTS")
    Boolean allowGuest;

    @Column(name = "SEND_MAIL")
    Boolean sendMail; 
```

**表单域对象：**

```
@Entity
@Table(name = "WEBFORMS_FORM_FIELD")
public class FormField {

    @Id
    @GeneratedValue
    @Column(name = "FORM_FIELD_ID")
    Long id;

    @Column(name = "TYPE")
    String type;

    @Column(name = "CONTENT")
    String content;

    @Column(name = "PRIORITY")
    Long priority;

    @ManyToOne()
    @JoinColumn(name = "FORM_ID")
    public Form form; 
```

**我正在使用休眠注释：**

```
<dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>hibernate-annotations</artifactId>
   <version>3.5.6-Final</version>
</dependency> 
```

如果我在表单中创建一个表单字段对象，那么没有问题。两个对象都已创建。当我删除表单对象时，表单字段对象保留在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:59:36.807

[Hibernate Orphan 移除示例](http://java.dzone.com/articles/hibernate-example-part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:17:33.903

*在实体FormField*上建立多对一关系。结果是字段上的外键约束。它不允许删除实体。约束具有必须在休眠中声明的属性级联。

```
@ManyToOne (cascade = {javax.persistence.CascadeType.ALL}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:13:26.313

我的错。

我试图按 ID 删除表单对象。这没有用。

```
public void deleteForm(Form form) {

        Session session = HibernateUtil.getSession();
        session.delete(form);
        HibernateUtil.shutDown(session);
    } 
```

删除我在查询后收到的对象就可以了。

# solr - 将自由文本发布到 SOLR

> ID：13266908
> 
> 赞同：2
> 
> 时间：2012-11-07T09:35:57.797
> 
> 标签：solr

我正在探索`SOLR Cloud`作为索引大量基于随机日志的文本并搜索相同文本的潜在解决方案之一。我有一个关于将日志文件数据发布到`SOLR`.

任何日志语句中的前几个字段都是重要字段（`timestamp`、`severity`等），它们用空格键分隔。我们如何知道`SOLR`这些字段在哪里结束以及自由文本从哪里开始（它本身有很多空格字符）？

例如：“ *Timestamp ModuleName Severity messageId*大量自由文本，将由空格分隔。”

如果我能够向 中添加自由文本`SOLR`，我该如何搜索？我认为`SOLR`不允许我搜索自由文本，因为它不是其索引的一部分。如果是这样，那么我怎样才能让我的自由文本的某些部分也被索引？所以，可能有一些自由文本之外的字段也很有趣，我可能也想搜索它们。

说，像这样的声明：

“ *Timestamp ModuleName Severity messageId* - 大量自由文本将用空格分隔，但包含*externalResponseValue*也可搜索，但并非所有日志行都有它，而且它的位置也不固定在它出现的行内。”

谢谢！

苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:28:49.837

您可以检查[DIH](http://wiki.apache.org/solr/DataImportHandler) :-

使用[LineEntityProcessor 逐行](http://wiki.apache.org/solr/DataImportHandler#LineEntityProcessor)处理日志文件
使用[RegexTransformer](http://wiki.apache.org/solr/DataImportHandler#RegexTransformer)将行拆分为片段并相应地用这些填充字段。
这将包括各个字段中的所有数据。如果您索引将使其可搜索的文本字段。

# c# - 如何暂停 Threading.timer 以完成功能

> ID：13266916
> 
> 赞同：11
> 
> 时间：2012-11-07T09:36:36.853
> 
> 标签：c#, .net, wpf

> **可能重复：**
> [同步计时器以防止重叠](https://stackoverflow.com/questions/684200/synchronizing-a-timer-to-prevent-overlap)

我班上有一个`Threading.Timer`。

```
 System.Threading.Timer timer;
 TimerCallback cb = new TimerCallback(ProcessTimerEvent);
 timer = new Timer(cb, reset, 1000, Convert.ToInt64(this.Interval.TotalSeconds)); 
```

并为它定义了一个回调。

```
private void ProcessTimerEvent(object obj)
{
  if(value)
    MyFunction();
} 
```

运行它时，在完成之前重新运行回调`myfunction`。

如何暂停`Threading.Timer`完成`myfunction`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T09:56:48.323

不必停止计时器，您可以让计时器继续触发回调方法，但将不可重入代码包装在 Monitor.TryEnter/Exit 中。在这种情况下无需停止/重新启动计时器；重叠调用不会立即获取锁并返回。

```
object lockObject = new object();

private void ProcessTimerEvent(object state) 
 {
   if (Monitor.TryEnter(lockObject))
   {
     try
     {
       // Work here
     }
     finally
     {
       Monitor.Exit(lockObject);
     }
   }
 } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-07T09:53:04.150

`System.Threading.Timer`您可以通过更改间隔来禁用 a 。你可以通过调用来做到这一点：

```
timer.Change(Timeout.Infinite, Timeout.Infinite); 
```

`myfunction`如果您希望计时器继续再次触发，则必须在完成呼叫后将时间间隔改回来。

# powershell - 从 foreach 循环中导出数据 (Get-QADUser)

> ID：13266920
> 
> 赞同：0
> 
> 时间：2012-11-07T09:36:38.347
> 
> 标签：powershell, foreach, quest

我想将以下代码段的输出作为文本文件。我该如何做到这一点？

```
$users = Import-Csv Y:\Temp\list2.csv

foreach ($user in $users) {
    Get-QADUser -lastname $user.lastname -firstname $user.firstname | select firstname,lastname,mobile,primarysmtpaddress,logonname 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:45:44.717

```
Import-Csv Y:\Temp\list2.csv | foreach {
    Get-QADUser -lastname $_.lastname -firstname $_.firstname | select firstname,lastname,mobile,primarysmtpaddress,logonname 
} | Export-Csv c:\list3.csv 
```

# python - django，正常的帖子表单不会将文件数据发送到服务器，

> ID：13266921
> 
> 赞同：1
> 
> 时间：2012-11-07T09:36:39.037
> 
> 标签：python, django, file-upload, submit

我想知道为什么会这样：

我在 POST 中发送带有表单的文件数据，但它一直说：

```
Key 'file' not found in <QueryDict:
{
 u'datum': [u'aaa'],
 u'csrfmiddlewaretoken': [u'USAbRrgU92yj7KFpZHuxf9bWufgnwC4N'], 
 u'anzeige': [u' aaaa'], 
 u'titel': [u' aaa']
} 
```

这是我的html：

```
<form id="myform" action="/anzeige_save/" method="post" enctype="multipart/form-data">    
{% csrf_token %} 
<textarea style="width: 450px" id="titel"  name="titel"> </textarea>
<textarea name="anzeige" id="anzeige" 
    style="height: 180px; width: 450px"> </textarea>  
<input type="text" id="datum" name="datum" >
<input type="file" id="file" name="file" size="40" maxlength="100000">
<input type="button" value="speichern" 
    onclick="javascript:submitform()" />
</form>

<script>
  function submitform(){
  document.forms["myform"].submit();
  }
</script> 
```

我的部分观点是：

```
anzeige=Anzeige(titel=request.POST['titel'], 
                anzeige=end_anzeige, 
                date=datetime.datetime.now(), 
                datum=request.POST['datum'],
                file=request.FILES['file'])
anzeige.save() 
```

我实际上提交正确，表单也应该像其他查询一样在 QueryDict 中提交文件。有人可以帮我弄清楚我在这里缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:10:52.577

1.  **使用[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)**而不是表单，除非您有充分的理由不这样做。

2.  **如果表单未通过验证，您的 HTML 将显示一个空白表单**，不提及错误或之前输入的值，请参阅[自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)以正确使用。

3.  **request.POST['file'] 不存在是正常的**，它在request.FILES['file'] 中，但是必须保存才能在模型中使用。如果您使用 ModelForm，它是自动的。否则，请参阅[使用模型处理上传的文件](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs#handling-uploaded-files-with-a-model)。

# c# - 客户端身份验证方案“匿名”的 HTTP 请求未经授权？

> ID：13266932
> 
> 赞同：1
> 
> 时间：2012-11-07T09:37:06.290
> 
> 标签：c#, asp.net, wcf, restful-authentication, basichttpbinding

在尝试从我的 Web 客户端应用程序调用 RESTful 服务（我已使用此示例中的 UserNameAuthenticator 进行 RESTful 服务[添加基本 HTTP 身份验证到 WCF REST 服务](https://stackoverflow.com/questions/4715752/adding-basic-http-auth-to-a-wcf-rest-service)）时，我收到一个错误，例如

```
The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was 'Basic Realm'. 
```

客户端 CS 代码

```
BasicHttpBinding binding = new BasicHttpBinding();
binding.SendTimeout = TimeSpan.FromSeconds(25);
binding.Security.Transport.ClientCredentialType =
HttpClientCredentialType.Basic;
EndpointAddress address = new  EndpointAddress("http://localhost:12229/RestServiceImpl.svc");
ChannelFactory<RestService.IRestServiceImpl> factory =
new ChannelFactory<RestService.IRestServiceImpl>(binding, address);
RestService.IRestServiceImpl channel = factory.CreateChannel();
channel.GetStudent(); 
```

客户端 Web.config

```
<system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl">
        <endpoint address="http://localhost:12229/RestServiceImpl.svc"
          binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ExternalSystemsService_v1Interface"
          contract="RestService.IRestServiceImpl"
          name="ExternalSystemsService_v1Port" />
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ExternalSystemsService_v1Interface"
                         closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
                         sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false"
                         hostNameComparisonMode="StrongWildcard" maxBufferSize="65536"
                         maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                         messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                         useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel> 
```

和 RESTful 服务 Web.config

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="webHttpTransportSecurity">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
          </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="RestService.RestServiceImpl">
        <endpoint name="ExternalSystemsService_v1Port" address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ExternalSystemsService_v1Interface" contract="RestService.IRestServiceImpl"></endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="SecureRESTSvcTestBehavior">
<serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="RESTfulSecuritySH.CustomUserNameValidator, RESTfulSecuritySH" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:37:27.163

让我印象深刻的一件事是，在您的客户端 CS 代码中，您以编程方式设置**传输的**客户端凭据类型：

```
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic; 
```

但是在客户端和服务器配置文件中，您都设置了**消息**客户端凭据类型。请注意传输元素的 clientCredentialType 属性是如何设置为“None”的，而消息元素的 clientCredentialType 是如何设置为“UserName”的：

```
<transport clientCredentialType="None" proxyCredentialType="None" realm="" />
<message clientCredentialType="UserName" algorithmSuite="Default" /> 
```

我总是尝试在关闭安全性的情况下让它在开发中工作，然后慢慢将其重新打开。

这也是一个新的开发项目吗？我很好奇您为什么要使用 WCF over ASP.NET Web API 来提供 RESTful 服务。

# jquery - 在多个 div 中拖放

> ID：13266936
> 
> 赞同：1
> 
> 时间：2012-11-07T09:37:27.477
> 
> 标签：jquery, drag-and-drop

我对 JqueryUI 拖放有疑问。我在左侧有一个列表，我可以在其中拖动一个对象。我想将 Objekt 拖到容器中或外部。如果它掉在里面，它应该变成一个普通的对象。如果它掉到外面，它应该变成一个容器。一切正常，但当我将对象拖到外面时就不行了。它不会成为容器。

继承人网站： [http ://dannyforce.bplaced.de/Intera/droppable/](http://dannyforce.bplaced.de/Intera/droppable/)

容器w 用divid="objekte" 包裹。具有 divclass="container" 的容器内的 Objekts。

当我将 objekt 放在容器中时，这有效：

```
$(".container").droppable({
                drop: function( evt, ui ){
                    ui.draggable.find( 'div' )
                        .addClass("objekts")//.unwrap();
                }
             }); 
```

所以我想，这适用于对象：

```
$("#objekte").droppable({
                drop: function( evt, ui ){
                    ui.draggable.find( 'div' )
                        .addClass("container").unwrap()
                }
             }); 
```

但事实并非如此。当我将它放在“objekte”-div 中时它什么也不做

制造，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:51:39.487

使用 html5 拖放功能：

[http://www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

# javascript - 使用 Rickshaw JS 库在 X 轴上显示自定义标签

> ID：13266941
> 
> 赞同：7
> 
> 时间：2012-11-07T09:37:55.023
> 
> 标签：javascript, charts, rickshaw

我有一个数据集，`{x: someValue, y: count}`其中是 ( )`someValue`形式的一周中的某一天，其中是*"Sunday"*。在 Ricskshaw 图表上，我想分别在 X 轴上显示（ *Mon*、*Tue ..etc）。*我怎么做？`1..7``1`

 ***目前我已经完成了：

```
var ticksTreatment = 'glow';
var xAxisQPerDay = new Rickshaw.Graph.Axis.Time( {
          graph: graphQPerDay,
          ticksTreatment: ticksTreatment
      } );
xAxisQPerDay.render(); 
```

但这当然给了我默认值 1s、2s、3s 等...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T18:11:05.627

像这样的东西应该工作：

```
var xAxisQPerDay = new Rickshaw.Graph.Axis.X({
    graph: graphQPerDay,
    tickFormat: function(x) {
        switch (x) {
            case 1: return 'Mon';
            case 2: return 'Tue';
            case 3: return 'Wed';
            case 4: return 'Thu';
            case 5: return 'Fri';
            case 6: return 'Sat';
            case 7: return 'Sun';
        }
    }
});

xAxisQPerDay.render(); 
```

* * *

如果您在侧面构建了地图以缓存字段数据，则可以使用更动态的方法。

```
var days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
var xAxisQPerDay = new Rickshaw.Graph.Axis.X({
    graph: graphQPerDay,
    tickFormat: function(x) {
        return days[x];
    }
});

xAxisQPerDay.render(); 
```

*或者*

```
var days = { 0: 'Mon', 1: 'Tue', 2: 'Wed', 3: 'Thu', 4: 'Fri', 5: 'Sat', 6: 'Sun' };
var xAxisQPerDay = new Rickshaw.Graph.Axis.X({
    graph: graphQPerDay,
    tickFormat: function(x) {
        return days[x];
    }
});

xAxisQPerDay.render(); 
```***

# android - 应用程序自动崩溃

> ID：13266943
> 
> 赞同：0
> 
> 时间：2012-11-07T09:37:58.297
> 
> 标签：android, android-layout, android-emulator, android-widget

我正在使用图像和框架布局（按钮和线性布局）实现列表视图，但是当我多次滚动列表时，应用程序会自动崩溃......以下是我的代码.. Main.java

```
 public class Main extends ListActivity {
/** Called when the activity is first created. */
ImageView img, img1;
private AdapterClass adapter;
private String reviewImageLink;

private static final String TAG = "PRANJAL";
private boolean isImage = false;

String fileName[] = new String[10];
private String imgurl;

ArrayList<HashMap<String, String>> searchResult;
private EditText edtSearch;
private Button btnNext;
private ListView list;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listplaceholder);
    edtSearch = (EditText) findViewById(R.id.edtSearch);
    btnNext = (Button) findViewById(R.id.btnNext);
    list = (ListView) findViewById(android.R.id.list);
    // list = (LinearLayout) findViewById(R.id.list);
    final ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    /*
     * JSONObject json = JSONfunctions
     * .getJSONfromURL("http://23.21.228.8/PlutoApp_Beta/consumer_dash/" +
     * "checkIn_confirmation_related_record.php?lat=18.535787&lng=73.891889"
     * );
     */
    JSONObject json = JSONfunctions
            .getJSONfromURL("http://23.21.228.8/PlutoApp_Beta/consumer_dash/checkIn_confirmation_name.php?lat=40.739974&lng=-73.994293&name=shop");

    try {

        JSONArray earthquakes = json.getJSONArray("Display");
        for (int i = 0; i < earthquakes.length(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();

            JSONObject e = earthquakes.getJSONObject(i);

            map.put("Name", e.getString("name"));
            map.put("Vicinity", e.getString("vicinity"));

            map.put("logo", e.getString("logo"));

            imgurl = e.getString("logo");

            String filename = "a" + i;
            imgurl = e.getString("logo");

            mylist.add(map);
            adapter = new AdapterClass(Main.this,
                    R.layout.my_custom_layout, mylist);
        }
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    searchResult = new ArrayList<HashMap<String, String>>(mylist);

    // adapter = new AdapterClass(Main.this, R.layout.my_custom_layout,
    // mylist);

    list.setTextFilterEnabled(true);

    setListAdapter(adapter);

    edtSearch.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // TODO Auto-generated method stub
            if (event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
                edtSearch.clearFocus();
                edtSearch.requestFocus(edtSearch.FOCUS_DOWN);

                String searchText = edtSearch.getText().toString();
                final ArrayList<HashMap<String, String>> mySearchlist = new ArrayList<HashMap<String, String>>();

                JSONObject json = JSONfunctions
                        .getJSONfromURL("http://23.21.228.8/PlutoApp_Beta/consumer_dash/checkIn_confirmation_name.php?lat=40.739974&lng=-73.994293&name="
                                + searchText);
                try {

                    JSONArray Search = json.getJSONArray("Display");
                    for (int i = 0; i < Search.length(); i++) {
                        HashMap<String, String> mapSearch = new HashMap<String, String>();

                        JSONObject e = Search.getJSONObject(i);
                        String filename = "b" + i;
                        mapSearch.put("Name", e.getString("name"));
                        mapSearch.put("Vicinity", e.getString("vicinity"));

                        mapSearch.put("logo", e.getString("logo"));

                        imgurl = e.getString("logo");

                        imgurl = e.getString("logo");

                        mySearchlist.add(mapSearch);
                    }
                } catch (JSONException e) {
                    Log.e("log_tag", "Error parsing data " + e.toString());
                }

                AdapterClass adapter = new AdapterClass(Main.this,
                        R.layout.my_custom_layout, mySearchlist);
                setListAdapter(adapter);

                list.setTextFilterEnabled(true); // list.setAdapter(adapter);

            }

            return false;
        }
    });

    btnNext.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            searchResult = new ArrayList<HashMap<String, String>>(mylist);

            // adapter = new AdapterClass(Main.this, R.layout.main, mylist);
            adapter = new AdapterClass(Main.this,
                    R.layout.my_custom_layout, mylist);

            list.setTextFilterEnabled(true);

            setListAdapter(adapter);
        }
    });

}

} 
```

适配器类.java

```
public class AdapterClass extends BaseAdapter {

int images[];
Context context;
String string[];
private LayoutInflater inflater;
private int resourceId;
private ArrayList<HashMap<String, String>> myList;
private View view;
private Animation anim_left_right;
private Animation anim_right_left;
private FrameLayout frame;
private LinearLayout ll;
private int width;
private int height;
private String tag;
private boolean flag;

private boolean firstRun = true;
public int closedPosition;
private boolean flagset = true;
private boolean firstRunTouch;
private boolean flag3 = false;
public boolean ff = true;
private View ll1;
private View ll2;
private boolean flag4 = false;
private int j = 1;
private boolean flag5 = false;
private boolean flag6 = false;
private boolean flag2;
private boolean flag0;
private boolean flag7= true;
private boolean flag8 = true;
private Animation MyAnimation;
public ImageLoader imageLoader;

public AdapterClass(Context context, int resourceId,
        ArrayList<HashMap<String, String>> myList) {

    this.context = context;
    this.resourceId = resourceId;
    this.myList = myList;

    inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader = new ImageLoader(context.getApplicationContext());
}

@Override
public int getCount() {

    return myList.size();
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    System.out.println("Getview Method is called");

    HashMap<String, String> map = getItem(position);

    /*if(flag==true){
        Toast.makeText(context, "Inside Flag= true"+position, 1000).show();
        ll2.startAnimation(anim_right_left);
        ll2.setLayoutParams(new LayoutParams(130, height));
        flag=false;
    }*/

    //if (convertView == null) {

        convertView = inflater.inflate(R.layout.my_custom_layout, parent,
                false);

//  }

    ImageView imageView = (ImageView) convertView
            .findViewById(R.id.imageView1);

    System.out.println("hi");

    ll = (LinearLayout) convertView.findViewById(R.id.ll1);
    width = ll.getLayoutParams().width;
    height = ll.getLayoutParams().height;

    frame = (FrameLayout) convertView.findViewById(R.id.frame);

    ll.setOnClickListener(new MyClickListener());

    ll.setOnTouchListener(new MyTouchListener());

    TextView from_user = (TextView) convertView
            .findViewById(R.id.from_user);

    TextView from_user_id = (TextView) convertView
            .findViewById(R.id.from_user_id);

    Button landed = (Button) convertView.findViewById(R.id.button1);
    System.out.println("Tag in side getView :" + ll.getTag());

    imageView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            Toast.makeText(context, "Inside Method startAnimation", 1000).show();
            anim_left_right = AnimationUtils.loadAnimation(context,
                    R.anim.anim_left_to_right1);
            anim_right_left = AnimationUtils.loadAnimation(context,
                    R.anim.anim_left_to_right2);

            ll.startAnimation(anim_right_left);
            ll.setLayoutParams(new LayoutParams(130, height));
            /*AnimationUtils AnimAnimationUtils = null;
            // TODO Auto-generated method stub
            MyAnimation=AnimAnimationUtils.loadAnimation(ll.getContext(),R.anim.anim_left_to_right1);
            //startAnimation(ll);
            ll.startAnimation(MyAnimation);*/
            return true;
        }

    });

    landed.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Toast.makeText(context,
                    "Button Clicked at position  " + position,
                    Toast.LENGTH_SHORT).show();

        }
    });

    from_user.setText(map.get("Name"));
    from_user_id.setText(map.get("Vicinity"));
    imageLoader.DisplayImage(map.get("logo"), imageView);

    System.out.println("pos" + position + " closedPositon : "
            + closedPosition + " tag : " + ll.getTag());

    String imageUrl = map.get("logo");

    System.out.println("ClosedPosition in getView Method : "
            + closedPosition);
    //if(flag==true){
    //  convertView=null;
    //}
    return convertView;
}

protected void startAnimation(LinearLayout ll3) {
    // TODO Auto-generated method stub
    Toast.makeText(context, "Inside Method startAnimation", 1000).show();
    anim_left_right = AnimationUtils.loadAnimation(context,
            R.anim.anim_left_to_right1);
    anim_right_left = AnimationUtils.loadAnimation(context,
            R.anim.anim_left_to_right2);

    ll3.startAnimation(anim_right_left);
    ll3.setLayoutParams(new LayoutParams(130, height));

}

@Override
public HashMap<String, String> getItem(int arg0) {
    // TODO Auto-generated method stub
    return myList.get(arg0);
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

class MyTouchListener implements OnTouchListener {
    float xstart, xend;

    @Override
    public boolean onTouch(final View v, MotionEvent event) {
        anim_left_right = AnimationUtils.loadAnimation(context,
                R.anim.anim_left_to_right1);
        anim_right_left = AnimationUtils.loadAnimation(context,
                R.anim.anim_left_to_right2);
        System.out.println("OnTouch Called..");
        flag = true;
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            xstart = event.getX();
            firstRun = false;
            flag6 = true;
            break;
        case MotionEvent.ACTION_UP:
            xend = event.getX();
            if (xend < xstart) {
                flag6 = true;
            }

            if (xstart < xend) {
                System.out.println("inside xstart<xend...");
                flag6 = false;
                flag8=true;
                System.out.println("flag6 : false");
                // if (flag5 == true) {
                // if(flag2==true){
                if (flag4 == true && flag5 == true) { // first time left to

                    flag0 = false;// right is

                    break;
                }
                if(flag7==false){
                    flag8 = false;
                    flag7=true;
                }
                else{
                    flag8=true;
                    //flag6 = true;

                }
                if (flag4 == true && flag0 == true && flag8==true) { // first time left to
                    System.out.println("IF after break is executed.."); // right
                                                                        // is
                    // disabled....
                    System.out.println("first time left to right");
                    System.out.println(" xend :" + xend + ", xstart :"
                            + xstart);
                    v.setBackgroundResource(R.drawable.a);
                    v.setLayoutParams(new LayoutParams(width, height));
                    v.startAnimation(anim_left_right);
                    // ll1 = null;
                    flag4 = false;
                    // flag6=false;
                    ff = true;
                }
                // }
                // }

                //ff = true;
            }

            break;

        }
        return false;
    }
}

class MyClickListener implements OnClickListener {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Animation anim_left_right = AnimationUtils.loadAnimation(context,
                R.anim.anim_left_to_right1);
        Animation anim_right_left = AnimationUtils.loadAnimation(context,
                R.anim.anim_left_to_right2);
        System.out.println("OnClick Called..");
        // if (flag4 == true || j==1) {
        if (flag6 == true) {
            System.out.println("InSide OnClick..");
            if (ff) {
                System.out.println("InSide OnClick..");
                // closedPosition = (Integer) v.getTag();
                System.out
                        .println("MyTouchListener is Called before getview..");
                System.out.println("closdeposiotion : " + closedPosition);

                v.startAnimation(anim_right_left);
                v.setLayoutParams(new LayoutParams(130, height));
                v.setBackgroundColor(Color.BLACK);
                ll1 = v;
                ll2 = v;
                System.out.println("Tag of ll1 in if statement : "
                        + ll1.getTag() + "Tag of ll1 in if statement : "
                        + v.getTag());
                ff = false;
                flag4 = true;
                flag6 = false;
                flag5 = false;
                flag0 = true;
                flag = true;
            } else {
                flag4 = true;
                flag5 = true;
                System.out.println("InSide OnClick..");

                v.startAnimation(anim_right_left);
                v.setLayoutParams(new LayoutParams(130, height));
                v.setBackgroundColor(Color.BLACK);
                System.out.println("Tag of ll1 in else statement : "
                        + v.getTag());
                //ll1 = v;
                // flag4 = true;
                flag6 = false;
                // flag5 = true;
                if (ll1 != null) {

                    ll1.setBackgroundResource(R.drawable.a);
                    ll1.setLayoutParams(new LayoutParams(width, height));
                    ll1.startAnimation(anim_left_right);
                    System.out.println("Tag of ll1 in else statement : "
                            + ll1.getTag());
                    // ll1 = null;
                    // ff = true;
                    flag5 = false;
                    // flag4 = false;
                    flag7 = false;
                    flag6 = false;
                    flag=true;
                }
                ll1 = v;
                ll2 = v;
            }
        }
    }

    // }

}

} 
```

Listpalceholder.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/edtSearch"
        android:layout_width="230dp"
        android:layout_height="wrap_content"
        android:hint="Search"
        android:singleLine="true" />

    <Button
        android:id="@+id/btnNext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Clear" />
</LinearLayout>

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Sorry..No Match Found.." 
    android:textSize="20dp"/>

</LinearLayout> 
```

My_Custom_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:padding="2dp" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:src="@drawable/icon" />

<FrameLayout
    android:id="@+id/frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Landed"
        />

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/a"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/from_user"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/from_user_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>
</FrameLayout>

</LinearLayout> 
```

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:45:45.473

问题，很可能是 OutOfMemoryError，这个问题在 SO 上已经回答了很多次了，请搜索内存不足问题，或者图像内存不足问题，或者虚拟机预算超出，你会得到一套很好的指导方针。请参阅此问题，以了解有关此问题的更多信息。

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

此外，取消阻塞 if 块，以重用 convertView，它将正确重用已绘制的视图。

```
if (convertView == null) {

        convertView = inflater.inflate(R.layout.my_custom_layout, parent,
                false);

} 
```

# c# - 在 C# 项目设置中定义我自己的环境变量

> ID：13266953
> 
> 赞同：2
> 
> 时间：2012-11-07T09:38:43.490
> 
> 标签：c#, settings, project

我想定义自己在项目设置中使用的环境变量，例如 $(TARGETPATH) 和一些预定义的变量。

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:18:36.913

你可以试试

```
Environment.SetEnvironmentVariable("MY_VARIABLE", "value", EnvironmentVariableTarget.Machine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:47:48.977

考虑使用这个 Visual Studio 插件：[http](http://workspacewhiz.com/SolutionBuildEnvironmentReadme.html) : //workspacewhiz.com/SolutionBuildEnvironmentReadme.html 该插件是为 Visual Studio 2008/2005/2003/2002 制作的，但也可能适用于 2010/2012（未经测试）。使用该插件，您可以为每个解决方案设置自定义变量。

对于所有现有变量的完整列表：http: [//msdn.microsoft.com/en-us/library/c02as0cs.aspx](http://msdn.microsoft.com/en-us/library/c02as0cs.aspx)

# asp.net - 登录到经过身份验证的用户

> ID：13266959
> 
> 赞同：-1
> 
> 时间：2012-11-07T09:39:10.973
> 
> 标签：asp.net, sql-server

我有一个用于用户名和密码的 2 个文本框和一个按钮。我想允许经过身份验证的用户登录并重定向到另一个页面并显示欢迎身份验证的用户名。或者显示消息无效的用户名。如何使用会话执行此操作并连接到数据库。如何使用数据库进行配置。请帮我。

```
My code is 
```

```
 <div id="loginbox">
            <div align="center" style="width: 100%;">

            </div>--%>
            <br />

                        <label for="username">Username:</label> <input type="text"   
id="username" /></li>
   <label for="password">Password:</label> <input type="password" id="password" />

<input type="button" runat="server" value="Login">

</form>

My .cs code

protected void btnLogin_onclick(object sender, EventArgs e)
{
    string connect = "Data Source=ST0022;Initial Catalog=QuickMove_Globe;Persist   
Security Info=True;User ID=sa;Password=good";
    string query = "Select Count(*) From Common.Users Where UserID = ? And Password =   
?";
    int result = 0;
    SqlConnection con= new SqlConnection(connect);
        SqlCommand cmd = new SqlCommand(query, con);

            cmd.Parameters.AddWithValue("UserID",username.Value);
            cmd.Parameters.AddWithValue("Password", password.Value);
            con.Open();
            Session["User"] = username.Value;
            result = (int)cmd.ExecuteScalar();

    if (result > 0)
    {
        Response.Redirect("TestPortalPage.aspx");
    }
    else
    {
        lbluser.Text = "Invalid credentials";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T09:12:13.253

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Security.Cryptography;
using System.Web.Security;
public partial class Account_Login : System.Web.UI.Page
{
SqlConnection conn  = new SqlConnection  ("Data Source=.\\SQLEXPRESS; AttachDbFilename=E:\\Raugh\\asp\\Login\\App_Data\\Database.mdf;Integrated Security=True;User Instance=True");
protected void Page_Load(object sender, EventArgs e)
{

}
protected void LoginButton_Click(object sender, EventArgs e) //click event of login button
{
    conn.Open();
    SqlCommand cmd = new SqlCommand("SELECT u_id, u_pass from [user] where u_id = '"+UserName.Text+"' and u_pass='"+Password.Text+"'");
    cmd.Connection = conn;
    SqlDataAdapter da = new SqlDataAdapter(cmd.CommandText, conn);
    SqlDataReader dr = cmd.ExecuteReader();
    if (dr.Read() == true)
    {
        Session.Timeout = 1;
        Response.Redirect("~/Default.aspx");
        //Response.Write("<script Language='JavaScript'> alert('Logged In')</script>");
        conn.Close();
    }
    else
    {

        Response.Write("<script Language='JavaScript'> alert('Log In Failed')</script>");
        conn.Close();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:30:39.177

检查这篇文章

[http://csharpdotnetfreak.blogspot.com/2012/06/login-page-form-example-in-aspnet.html](http://csharpdotnetfreak.blogspot.com/2012/06/login-page-form-example-in-aspnet.html)

通过会话传递用户名很简单

`Session["User"] = username;`

在重定向页面中，在您放置的任何控件中使用它，例如，如果它是一个标签

```
if(Session["User"]!=null)
{
label1.Text=Session["User"].ToString();
}
//    else
//  {
//    label1.Text="Invalid Username;
//    } 
```

else 在您的情况下不需要条件，因为您将在凭据匹配时重定向。

你的代码应该是

`string strCon = "Data Source=ST0022;Initial Catalog=QuickMove_Globe;Persist
Security Info=True;User ID=sa;Password=good"; string strSelect = "SELECT COUNT(*) FROM youtablename WHERE yourcolumnname = @Username AND yourcolumnname = @Password";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:44:18.843

[此页面](http://www.daniweb.com/web-development/aspnet/threads/19303/updated-simple-asp.net-login-page)可能会帮助您走上正轨。

# java - 如何在android的用户界面中显示计时器

> ID：13266971
> 
> 赞同：2
> 
> 时间：2012-11-07T09:39:31.643
> 
> 标签：java, android, layout

我正在实现一个应用程序，在该应用程序中我需要在布局中显示一个计时器。一旦计时器倒计时到 0 秒，应用程序就会继续，然后它应该自动进入另一个定义了路径的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:44:57.950

你可以这样做并在 onFinish 中加载另一个应用程序

```
private class MyCount extends CountDownTimer{

    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onTick(final long millisUntilFinished) {
        long min = 0, sec = 0, totalSec = 0;
        totalSec = (millisUntilFinished/1000);
        min = totalSec/60;
        sec = totalSec%60;
        final long m = min;
        final long s = sec;
        runOnUiThread(new Runnable() {

            public void run() {
                System.out(" "+ m +"m and "+s+"s remaining.");
                                    // or Display the way you want
            }
        });

    }
    @Override
    public void onFinish() {
        //load the task you want to do
    }
} 
```

可以这样称呼

```
MyCount counterr = new MyCount(sec *1000 , 1000);// sec = number of seconds
counterr.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:45:45.583

我会用`CountDownTimer`这个任务。使用 onFinish 方法调用其他活动。

```
new CountDownTimer(timetocomplete, ticks) {
       @Override
       public void onTick(long millisUntilFinished) {

       }

       @Override
       public void onFinish() {

           // Intent to start a new activity

       }
    }.start(); 
```

# responsive-design - 是否可以对乱序元素进行响应式设计？

> ID：13266972
> 
> 赞同：0
> 
> 时间：2012-11-07T09:39:37.080
> 
> 标签：responsive-design, grid-layout

当屏幕分辨率大于 1000 像素时，我将 A、B 和 C 分别设置为 280、350 和 210 像素）

当它缩小时，我希望它是 B 最大宽度，然后是 A 和 C 聚集在一个 div 中并缩小。我不确定我可以用直接的 CSS 来做到这一点，因为元素是乱序的——还是我错了？谢谢！

![](../Images/858cb2d27bf2e5bfdf3d72884d4f55a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:49:58.573

你可以用 CSS3 做这样的事情。但这依赖于 rowA 在页面宽度小于 1000 像素时处于绝对位置。还有其他解决方法可以使用 js 动态更改它的 margin-top，以便无论内容高度发生变化，col A 都会保持它的位置。

```
 .body{ margin:0;padding:0;
}
#rowA {
    width:25%;
    float:left;
    //margin:10px;
    min-height:340px;
    margin:0;padding:0;
    background-color: blue;
}
#rowB {
    width:50%;
    float:left;
    //margin:10px;
    min-height:340px;
    margin:0;padding:0;
    background-color: red;
}
#rowC {
    //border:1px solid #000;
    width:25%;
    float:left;
    //margin:10px;
    min-height:340px;
    margin:0;padding:0;
    background-color: blue;
}
#colA, #colB, #colC {

    min-height:330px;
    margin:5px;padding:0;
    background-color: green;
    text-align:center;
}

@media (max-width: 1000px) {
    #rowB {
        width:100%;
        clear:left;
    }
    #rowA {
        width:50%;
        position:absolute;
        margin-top:340px;
    }
    #rowC {
        width:50%;
        clear:left;
        float:right;
    }

} 
```

在正文标签中。

```
 <div class="grid">
<span id="rowA"><div id="colA">col A</div></span><span id="rowB"><div id="colB">col B</div></span><span id="rowC"><div id="colC">col C</div></span> 
```

# regex - 解释 foo 和 \(foo\) 之间的区别

> ID：13266973
> 
> 赞同：1
> 
> 时间：2012-11-07T09:39:37.197
> 
> 标签：regex, grep

```
grep "http:\/\/.*\.jpg" index.html -o 
```

**给我以http://**开头并以**.jpg**结尾的文本

 **也是如此：`grep "http:\/\/.*\.\(jpg\)" index.html -o`

有什么不同？是否有任何情况可能会失败？

我使用这个正则表达式来匹配 jpg、png 或 gif：

```
http:\/\/.*\.\(jpg\|png\|gif\) 
```

与我阅读的反向引用或正则表达式分组有关。看不懂这部分`\(\)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:59:03.280

分组在正则表达式中有两个用途。

一种用途是在使用替代方法时分隔正则表达式的一部分。在您的第三个正则表达式中就是这种情况，它允许您说扩展名可以是 jpg、png 或 gif 中的任何一个。

另一个用途是反向引用。这允许您在 regexp 中稍后引用与 regexp 的较早部分匹配的文本。例如，以下正则表达式匹配任何连续出现两次的字母：

```
\([a-z]\)\1 
```

反向引用 \1 表示“匹配与正则表达式中的第一组匹配的任何内容”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:43:30.957

`(`并且`)`是*元字符*。即他们不匹配自己，但对`grep`.

从[这里](http://www.gnu.org/software/findutils/manual/html_node/find_html/grep-regular-expression-syntax.html)：

> 使用反斜杠后跟括号“（”，“）”进行分组。

所以在上面的`\(`and中`\)`定义了一组由`|`字符分隔的匹配可能性。即您的文件扩展名。**

# extjs - 调用 Ext.menu.Menu 的 showAt 方法时出错

> ID：13266975
> 
> 赞同：0
> 
> 时间：2012-11-07T09:39:49.403
> 
> 标签：extjs, extjs4.1

您好我正在尝试在右键单击数据视图项时显示上下文菜单。我处理**了 itemcontextmenu**事件，在该事件中我实例化了 Ext.menu.Menu 并调用了它的**showAt**方法，但它给了我错误，因为**TypeError: me.el.translatePoints is not a function** in **Component.js**

我观察到**el**是*undefined*，应该给它分配什么值才能使**translatePoints**函数起作用？或者可以有其他解决方法？

请在下面找到我的代码：

```
 {
        xtype: 'dataview',
        store: 'SearchedGraphics',
        tpl: [
            '<tpl for=".">',
                '<div class="thumb-wrap" id="{name:stripTags}">',
                '<div class="thumb"><table><tr><td><img class="img" src="{url}" title="{name:htmlEncode}"></td></tr></table></div>',
                '<span class="x-editable">{shortName:htmlEncode}</span>',
                '</div>',
            '</tpl>',
            '<div class="x-clear"></div>'
        ],
        multiSelect: true,
        height: 310,
        trackOver: true,
        overItemCls: 'x-item-over',
        itemSelector: 'div.thumb-wrap',
        emptyText: ORT.Utility.GridEmptyText,

        prepareData: function(data) {
            Ext.apply(data, {
                shortName: Ext.util.Format.ellipsis(data.name, 15),
                sizeString: Ext.util.Format.fileSize(data.size),
                dateString: Ext.util.Format.date(data.lastmod, "m/d/Y g:i a")
            });
            return data;
        },
        listeners: {
            selectionchange: function(dv, nodes ){
                if(false) {
                    var l = nodes.length,
                    s = l !== 1 ? 's' : '';
                    this.up('panel').setTitle('Simple DataView (' + l + ' item' + s + ' selected)');
                }
            },
            itemcontextmenu: function(dataview, record, item, index, event, eOpts){

                var menu = Ext.create('Ext.menu.Menu', {
                    width: 100,
                    el:'p',
                    margin: '0 0 10 0',
                    floating: false,  
                    items: [{
                        text: 'regular item 1'
                    },{
                        text: 'regular item 2'
                    },{
                        text: 'regular item 3'
                    }]
                }).showAt(event.getXY());

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:55:56.157

1）不确定为什么将浮动设置为假。这是一个菜单，所以它应该是浮动的。

2）您根本不应该设置 el 配置。

# c++ - 如何创建动态列表

> ID：13266993
> 
> 赞同：-2
> 
> 时间：2012-11-07T09:40:50.353
> 
> 标签：c++, visual-c++

新手...我想创建一个动态增长的列表，其中包含点变量、几个 int 变量以及 Argb 的任何颜色变量。

我在 Visual Studio C++ 2010 中做

在程序中处理这些数据的最佳方法是什么？它需要存储用户在屏幕上创建的对象的位置、大小和颜色，以便在刷新表单时将它们绘制回表单。目前我有一个非常好的程序，可以绘制不同颜色的正方形、圆形和线条，我可以移动那个对象，但这只是因为我仍然持有当前的对象/形状数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:59:45.997

创建一个结构或类来保存一个形状的信息，然后使用[std::vector](http://www.cplusplus.com/reference/stl/vector/)来保存它们的列表。

```
std::vector<Shape> myShapes; 
```

如果您的所有形状都可以用基本相同的数据集来描述，并且某些数据的大小存在一些差异，例如“点变量”的数量随着形状的变化而变化，那么在形状内有一个 std::vector类来保存它们的可变数据，例如：

```
struct coordinate2D
{
    int x;
    int y;
};

class Shape
{
    coordinate2D position; //the location on the shape
    std::vector<coordinate2D> points; // the coordinates of the vertices that make up this shape.
};

//elsewhere
std::vector<Shape> myShapes; 
```

# c# - 特定范围内的随机颜色生成

> ID：13266995
> 
> 赞同：2
> 
> 时间：2012-11-07T09:40:56.853
> 
> 标签：c#, windows-8, winrt-xaml

我需要为我的`gridview`. 我的要求是我必须在例如一种蓝色和另一种蓝色之间生成这些颜色。即所有颜色都必须在该范围内。我有一个开始颜色和一个结束颜色，我有一个随机对象来生成字节。如何确保生成的颜色保持在给定范围内？我需要把这个写进去`C#`。`Windows 8`它向我展示的唯一颜色生成选项`Windows.UI.Color`是`FromArgb`方法。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T09:50:25.147

```
Random random = new Random();
byte randomNumber = (byte) random.Next(20, 256);
Color blueish = Color.FromRgb(20, 20, randomNumber); 
```

应该给你一个介于 20 到 255 之间的蓝色和固定的红色和绿色值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:53:54.007

好的，鉴于您的有限示例，

```
static Color RandomBlue(byte minBlue, byte maxBlue, byte red, byte green)
{
    var blue = Random.Next(minBlue, maxBlue);
    return Color.FromArgb(red, green, blue);
} 
```

`Color`将在一个范围内产生一个或随机的蓝色。

# html - 表格内的 HTML 表格悬停在 tr 上无法正常工作

> ID：13266996
> 
> 赞同：0
> 
> 时间：2012-11-07T09:41:00.140
> 
> 标签：html, css, html-table

我在子表的 tr 内有表我不想应用悬停和斑马条纹，下面是我的代码不起作用，子表显示悬停和斑马条纹：

```
<table class='zebrastrip'>
   <tr>
    <td>1</td>
    <td>2</td>
   </tr>
   <tr>
     <td>3</td>
     <td>4</td>
   </tr>
   <tr>
      <table class='atable'>
        <tr>
          <td>5</td>
          <td>6</td>
        </tr>
        <tr>
          <td>7</td>
          <td>8</td>
        </tr>
      </table>
  </tr>
</table>

   .atable tr:nth-child(2n-1){
        background-color:#FFFFFF;
    }
   .atable tr:hover{
     background-color:#FFFFFF;
   }
    .zebrastrip tr:nth-child(2n-1){
        background-color:#f9f9f9;
    }
    .zebrastrip tr:hover{
        background-color:#fce4cc;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:00:50.647

固定代码的小提琴：http: [//jsfiddle.net/r3eAn/](http://jsfiddle.net/r3eAn/)

固定的 HTML：

```
<table class='zebrastrip'>
   <tr>
    <td>1</td>
    <td>2</td>
   </tr>
   <tr>
     <td>3</td>
     <td>4</td>
   </tr>
   <tr>
      <td colspan="2">
          <table class='atable'>
            <tr>
              <td>5</td>
              <td>6</td>
            </tr>
            <tr>
              <td>7</td>
              <td>8</td>
            </tr>
          </table>
      </td>
  </tr>
</table> 
```

修复了 CSS 以始终具有内表背景#fff：

内部表格样式的优先级更高

定义内表的背景

```
.zebrastrip tr:nth-child(2n-1){
    background-color:#f9f9f9;
}
.zebrastrip tr:hover{
    background-color:#fce4cc;
}
.zebrastrip .atable{
    background: #FFFFFF;
}
.zebrastrip .atable tr:nth-child(2n-1){
    background-color:#FFFFFF;
}
.zebrastrip .atable tr:hover{
    background-color:#FFFFFF;
} 
```

# php - 使用 cURL 登录站点并从中获取数据（图像）

> ID：13266997
> 
> 赞同：2
> 
> 时间：2012-11-07T09:41:00.473
> 
> 标签：php, curl, login, remote-server

我正在尝试从远程站点获取图表图像。
但是该图像似乎是在调用时从站点动态创建的。
未登录时它不会返回任何内容。

这是图片网址

```
<img src="http://fuelbuyer.dtn.com/energy/view/energy/chart.do?width=150&height=120&chartType=0&ts=1352196066175&rackId=446&productId=179&points=8&showExtraLine=True"> 
```

我以某种方式设法使用此代码登录并尝试显示图像。
但它不起作用。

```
$ch = curl_init();
$url = 'http://fuelbuyer.dtn.com/energy/common/signin.do?';
$login = 'username=$USER&password=$pass&autoLogin=true&partnerId=0&partnerName=';
curl_setopt($ch, CURLOPT_URL, $url.$login);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

直接调用图像 URL（仅在登录时在浏览器地址栏上），将给出一些代码，例如

" ‰PNG IHDR–xŸ-–GPIDATxÚílÇÇ IHKB-ËuÄØª!Eš°Š !ÈB IÀµ©...œ€ $@S‡8¶ ªÀ"D²œÐbR Æ`~WjAx;~Äø...ç·ï±;³ýÎk×ûºÙÝ³™»Þ_ +´Ü÷v÷·3óÿf¾™òqnAa@„ùÂM›6åÔ5}£¡kè¨šŽiè¸¶¾USž†Nh(_M'5tJC Á™°‚ðN?ÿ¼3>¾=5µîòåêÕô©V¢:‰ê%º+ QƒD5õ©Y"›D-Õ*Q›Dí}ê¨S¢.‰º%²Käè"³Û¹"ß¸ÑUPà'^"^—õéôéÓ!rBP¸¡Ÿÿ¼®¨¨F"ïò""´ÂOŠÐ4? G}=ŽŠ"×ÎgdPòc!† #—[WB}"

但是当被称为

```
<img src="http://fuelbuyer.dtn.com/energy/view/energy/chart.do?width=150&height=120&chartType=0&ts=1352196066175&rackId=446&productId=179&points=8&showExtraLine=True"> 
```

将给出正确的图像。

我真的不知道下一步该怎么做。

*如何使用 cURL 登录网站并执行此行。
`<img src="http://fuelbuyer.dtn.com/energy/view/energy/chart.do?width=150&height=120&chartType=0&ts=1352196066175&rackId=446&productId=179&points=8&showExtraLine=True">`
成功登录后，该站点将被重定向到主页。
因此，我也必须防止重定向。
会话将在几秒钟后终止。*

提前谢谢你，
尤金PJ

> 我让它工作了。请参阅此评论。
> [无法从我的学校网站获取我的日程安排数据。使用 cURL 登录将不起作用](https://stackoverflow.com/questions/8632366/unable-to-fetch-my-schedule-data-from-my-schools-site-login-with-curl-wont-work/8632527#8632527)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:42:32.083

您需要让浏览器知道这是一张图片，尝试将其添加到您的 PHP 代码中：

```
header("Content-Type: image/png");
$ch = curl_init();
$url = 'http://img842.imageshack.us/img842/7650/pngtransparencydemonstr.png';
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
echo $output; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:54:21.620

您使用 cURL 收到的图像是正确的（请参阅，您得到一个 PNG 标头）。

如果你想在你的页面上显示它 - 让我们在这里忽略许可问题 - 你需要将你的抓取代码放在*它自己的页面中*，例如`myimage.php`。

然后在你的 HTML 代码中

```
<img src="myimage.php" /> 
```

在 中`myimage.php`，一旦你有了`$output`，你就输出它：

```
<?php
$ch  = curl_init();
$url = 'http://fuelbuyer.dtn.com/energy/common/signin.do?';
$login = 'username='.$USER.'&password=$pass&autoLogin=true&partnerId=0&partnerName=';
curl_setopt($ch, CURLOPT_URL, $url.$login);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$output = curl_exec($ch);
// $info = curl_getinfo($ch);
curl_close($ch); 

// Let's suppose that $content (what we want to send) is exactly equal to $output
$content = $output;
// If, instead, we have in the output something like <img src="crypto-unique.png" />"
// we will need to parse $output (using XML maybe, or, just this once, a regex)
// and get its URL, then retrieve the image using cURL again, and *this* will be our
// final $content.

// Just output
Header("Content-Type: image/png");
Header("Content-Length: " . strlen($content));
die($content);

// Or if we wanted to manipulate it, e.g. send it as JPEG at 75% quality
$gd = imageCreateFromString($content);
Header('Content-Type: image/jpeg');
ImageJPEG($gd, '', 75);
die();

?> 
```

有关更复杂的登录方案的肮脏细节，请参阅[如何从需要 cookie 登录的网站中抓取 PHP 中的网站内容？](https://stackoverflow.com/questions/13210140/how-can-i-scrape-website-content-in-php-from-a-website-that-requires-a-cookie-lo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:49:45.747

您是否尝试过图像标题？

```
header("Content-Type: image/png");
header("Content-Disposition: attachment; filename=image.png" ); 
```

# ruby-on-rails-3 - 通过 link_to rails 3 传递参数

> ID：13266999
> 
> 赞同：0
> 
> 时间：2012-11-07T09:41:07.583
> 
> 标签：ruby-on-rails-3

我只是想对以下代码进行一些澄清，其中一部分。为了提供一些背景信息，我有一个应用程序，您可以在其中上传食谱，搜索食谱并将它们保存为收藏夹，这段代码位于控制器“食谱”中”，动作是“我的食谱”

```
<%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create', :recipe_id => recipe.id}, {:method => :post } %> 
```

我的理解是，这会创建一个 link_to （如果你愿意的话是锚标记），它通过收藏夹控制器中的 create 方法发出一个发布请求。这部分我认为我理解（​​欢迎更正），我不确定的部分是

```
:recipe_id => recipe.id} 
```

例如，我知道这是在传递 recipe_id，但我想知道我们为什么要这样做？以及`:`第一个 recipe_id 之前的相关性。可能对某些人来说似乎很明显，但在你学习之前你不知道。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:05:49.787

这段代码是部分的吗？是`recipe`被传递吗？你应该这样重写：

```
link_to "Add to favorites",  new_favourite_path(recipe), method: :post 
```

在您`rake routes`的控制台中执行并找出创建收藏夹的路径是什么，然后用`new_favourite`上面的替换“”。请注意，路线可能会用更明确的东西来标识，例如`new_favourite_recipe`.

要回答您的问题，您必须通过`recipe`，`recipe.id`否则控制器将不知道将哪个食谱添加到收藏夹中。您不需要指定用户，因为应该使用类似`current_user`.