# StackOverflow 问答 16130000-16130999

# asp.net-mvc - 在实时服务器上使用 oauth 登录 Facebook 失败

> ID：16130000
> 
> 赞同：5
> 
> 时间：2013-04-21T10:02:44.950
> 
> 标签：asp.net-mvc, facebook, oauth

我正在使用 OAuthWebSecurity 登录 facebook，它正在本地主机上运行。但是，然后部署到实时服务器，我收到以下错误消息：

远程服务器返回错误：(400) 错误请求。

*   我在 facebook 上检查了域详细信息是否正确。
*   沙盒模式被禁用。
*   我已禁用 Windows 防火墙 - 仍然出现相同的错误。
*   无论是在 live 还是 localhost 环境中，来自 facebook 的响应都具有相同的格式。
*   实时服务器的日期和时间是正确的。

我已经在本地进行了测试，还将主机文件更改为实时域 - 仍然可以在本地工作。

这是堆栈跟踪：

```
[WebException: The remote server returned an error: (400) Bad Request.]
System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request) +3291120
System.Net.WebClient.DownloadString(Uri address) +207
DotNetOpenAuth.AspNet.Clients.FacebookClient.QueryAccessToken(Uri returnUrl, String authorizationCode) +293
DotNetOpenAuth.AspNet.Clients.OAuth2Client.VerifyAuthentication(HttpContextBase context, Uri returnPageUrl) +167
DotNetOpenAuth.AspNet.OpenAuthSecurityManager.VerifyAuthentication(String returnUrl) +502
Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.VerifyAuthenticationCore(HttpContextBase context, String returnUrl) +231 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-09T01:44:13.867

这是一个旧的，但是我使用 dotnetopenoath 从 Facebook 登录中遇到了 400 错误，因为它已集成到 MVC 4 中，并且进行了一场疯狂的追逐，认为它无法正常工作，因为它不再受支持，而我需要做的只是被捕获并记录异常，该异常指出我的特定案例的问题（应用程序秘密证明设置）：

```
catch (WebException exception)
{
    using (WebResponse response = exception.Response)
    {
        HttpWebResponse httpResponse = (HttpWebResponse) response;
        m_log.Debug("Error code: " + httpResponse.StatusCode);
        using (Stream data = response.GetResponseStream())
        {
            if (data != null)
            {
                using (var reader = new StreamReader(data))
                {
                    string text = reader.ReadToEnd();
                    m_log.Debug(text);
                }
             }
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T19:19:50.890

存在与此相关的缺陷： [https ://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/203](https://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/203)

但该库显然不再被维护： [https ://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/317#issuecomment-29580565](https://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/317#issuecomment-29580565)

...尽管它仍然在许多 Microsoft 文档中被引用。调查与另一个缺陷相关的问题。

另请参阅：[远程服务器返回错误：(400) 错误请求 Microsoft.AspNet.Membership.OpenAuth](https://stackoverflow.com/questions/19433383/the-remote-server-returned-an-error-400-bad-request-microsoft-aspnet-membersh)

# c# - 使用触控笔时 PictureBox.Image 为空

> ID：16130002
> 
> 赞同：1
> 
> 时间：2013-04-21T10:02:52.970
> 
> 标签：c#, winforms

我正在尝试将 PictureBox 的内容保存到数据库中。这本身效果很好，但是一旦绘制了签名图片框，它就不会设置 PictureBox.Image 属性，这意味着我无法继续该过程。

```
 Pen myPen;
    bool bMouseDown = false;
    Point prevPoint;
    Graphics gCust;
    Graphics gTech;

private void NewJob_Load(object sender, EventArgs e)
    {
        myPen = new System.Drawing.Pen(System.Drawing.Color.Black);
        gCust = pbCustomerSig.CreateGraphics();
        gCust.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        myPen.DashStyle = System.Drawing.Drawing2D.DashStyle.Solid;
        myPen.SetLineCap(LineCap.Round, LineCap.Round, DashCap.Round);
        myPen.Color = Color.Blue;
        myPen.Width = 2f;
}
public static byte[] ImageToBinary(Image image)
    {
        Byte[] buffer = (Byte[])new ImageConverter().ConvertTo(image, typeof(Byte[]));
        return buffer;
    }
private void pbCustomerSig_MouseDown(object sender, MouseEventArgs e)
    {
        prevPoint = e.Location;
        bMouseDown = true;
    }

    private void pbCustomerSig_MouseMove(object sender, MouseEventArgs e)
    {
        if (bMouseDown)
        {
            Point thisPoint = e.Location;
            if (prevPoint.X == 0 && prevPoint.Y == 0)
            {
                prevPoint = thisPoint;
                return;
            }
            gCust.DrawLine(myPen, thisPoint.X, thisPoint.Y, prevPoint.X, prevPoint.Y);
            prevPoint = thisPoint;
        }
    }

    private void pbCustomerSig_MouseUp(object sender, MouseEventArgs e)
    {
        bMouseDown = false;
    } 
```

错误在这里 -

```
h.CustomerSignature = ImageToBinary(pbCustomerSig.Image); 
```

任何想法为什么 PictureBox.Image 属性为空？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:13:33.487

您没有为 分配值`pbCustomerSig.Image`。为空是正常的。而不是这样做尝试绘制位图。 [这是在现有位图上绘制的示例，](https://stackoverflow.com/questions/6311545/c-sharp-write-text-on-bitmap)但您可以以相同的方式在空位图上绘制并同时将其显示在图片框上。

# excel - 如何计算观察次数（在 Excel 中）？

> ID：16130007
> 
> 赞同：1
> 
> 时间：2013-04-21T10:03:36.550
> 
> 标签：excel

我在 Excel 文件中有两个工作表：

公司

```
 A       B      C     D     E
1 COMPANY SECTOR VAR_1 VAR_2 VAR_3
2 Sony    Tech         2.40  no
3 Ikea    Home   7     1.44  yes
4 ING     Bank   5        0  yes
5 BofA    Bank   0           no
6 Google  Tech            0  yes
7 Staples Home         5.24  no
8 Trump   Ego    5     9.99  yes
9 ABN     Bank         2.64  no 
```

`VAR`此表包含数千家公司的数百个。有很多缺失值（空单元格是缺失值，`0`实际上是观察值）。我需要知道我对每个`VAR`. 我需要 (1) 观察次数的总计数和 (2) 银行业公司的观察次数。在下表中，(1) 在列中`B`，(2) 在列中`C`：

变量

```
 A       B     C
1 VARIABLE TOTAL BANK
2 VAR_1    4     2  
3 VAR_2    7     2
4
5          Some random comment...
6
7 VAR_3    8     3 
```

让我们`VAR_1`举个例子。查看工作表，`companies`该变量有 4 个观测值（`7`、`5`和）。只看银行（有 2 个观察值（ING 和BofA）。`0``5``SECTOR == 'Bank')``5``0`

在工作`variables`表中，不同变量之间可能有注释（尽管从未在列中`A`；此列包含变量名称或为空）。此外，变量的*顺序*可能不一样。所以`companies`可以说

```
 ... GH     GI     GJ
1     VAR_40 VAR_41 VAR_42 
```

在`variables`里面说

```
 A
...
60  VAR_40
61  VAR_42
62  VAR_41 
```

我的问题是：什么公式可以计算`variables`列中的观察数`B`和`C`？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:35:41.093

你不需要公式。您可以使用枢轴

看这个截图

![在此处输入图像描述](https://i.stack.imgur.com/iddHq.png)

**跟进**

使用公式

![在此处输入图像描述](https://i.stack.imgur.com/jdlCJ.png)

对于`Var2`, `Var3`，相应地调整公式中的列。

例如`B14`for `Var2`will become`=COUNTA(D2:D9)`和`C14`will become`=COUNTIFS($B$2:$B$9,$C$12,D2:D9,"<>")`

**跟进（来自评论/聊天）**

由于您的表格不是连续的，因此我建议您使用 VBA (UDF) 方法，以便您可以实际复制公式；）

将这两个代码粘贴到模块中

```
 Function getVarCount(rngVar As Range, strSector As String, rngRw As Range) As Variant
        getVarCount = "Incomplete Data in Formula"

        If rngVar Is Nothing Or _
           rngRw Is Nothing Or _
           Len(Trim(strSector)) = 0 Then Exit Function

        Dim aCell As Range, SectorRange As Range
        Dim colSector As Long, colVar As Long

        Set aCell = rngRw.Find(What:=rngVar.Value, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            colVar = aCell.Column
        Else
            getVarCount = "VAR Heading Not Found"
            Exit Function
        End If

        Set aCell = rngRw.Find(What:="Sector", LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            colSector = aCell.Column
        Else
            getVarCount = "SECTOR Heading Not Found"
            Exit Function
        End If

        Set SectorRange = ThisWorkbook.Sheets(rngRw.Parent.Name).Columns(colSector)

        Set aCell = SectorRange.Find(What:=strSector, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If aCell Is Nothing Then
            getVarCount = strSector & " Not Found"
            Exit Function
        End If

        getVarCount = Application.WorksheetFunction.CountA(ThisWorkbook.Sheets(rngRw.Parent.Name).Columns(colVar)) - 1
    End Function

Function getVarSectorCount(rngVar As Range, strSector As String, rngRw As Range) As Variant
        getVarSectorCount = "Incomplete Data in Formula"

        If rngVar Is Nothing Or _
           rngRw Is Nothing Or _
           Len(Trim(strSector)) = 0 Then Exit Function

        Dim aCell As Range, SectorRange As Range
        Dim colSector As Long, colVar As Long

        Set aCell = rngRw.Find(What:=rngVar.Value, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            colVar = aCell.Column
        Else
            getVarSectorCount = "VAR Heading Not Found"
            Exit Function
        End If

        Set aCell = rngRw.Find(What:="Sector", LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            colSector = aCell.Column
        Else
            getVarSectorCount = "SECTOR Heading Not Found"
            Exit Function
        End If

        Set SectorRange = ThisWorkbook.Sheets(rngRw.Parent.Name).Columns(colSector)

        Set aCell = SectorRange.Find(What:=strSector, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If aCell Is Nothing Then
            getVarSectorCount = strSector & " Not Found"
            Exit Function
        End If

        '=COUNTIFS($B$2:$B$9,$C$12,D2:D9,"<>")
        getVarSectorCount = Application.WorksheetFunction.CountIfs(ThisWorkbook.Sheets(rngRw.Parent.Name).Columns(colSector), _
                                                                   strSector, _
                                                                   ThisWorkbook.Sheets(rngRw.Parent.Name).Columns(colVar), _
                                                                   "<>")
End Function 
```

正如我们在聊天中讨论的那样，您可以从 Excel 单元格中调用它

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/NIZhu.png)

# jquery - Bootstrap 折叠/手风琴在 Firefox 上不保持打开状态

> ID：16130017
> 
> 赞同：1
> 
> 时间：2013-04-21T10:04:34.437
> 
> 标签：jquery, twitter-bootstrap

我无法让 Bootstrap 手风琴折叠在 Firefox 上正常工作。如果我单击手风琴标题，它会显示一秒钟的内容，但不会保持打开状态。我也尝试过使用“toggle”：“hidden”，但这也不起作用。非常感谢任何反馈或帮助，谢谢！

这是我的代码：

```
<!DOCTYPE html> 

<head>
<script src="/js/bootstrap-collapse.js"></script>  
   <script>  
        $(document).ready(function () {
        $(".collapse").collapse({"toggle" : "show"});
        });
   </script> 
</head>

<div class="accordion" id="accordion2">
  <div class="accordion-group">
     <div class="accordion-heading">
       <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"  href="#collapseOne">Example</a>
     </div>
  <div id="collapseOne" class="accordion-body collapse in">
     <div class="accordion-inner"> Example text for the accordion...</div>
   </div>
  </div> 
</div><!--end of accordion-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:50:49.327

我也删除了

```
<script src="/js/bootstrap-collapse.js"></script> 
```

来自

```
<head> 
```

现在它可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:18:06.840

由于您已经使用过`"toggle" : "show"`，因此您需要删除`in`手风琴类：

```
<div id="collapseOne" class="accordion-body collapse"> 
```

**[小提琴](http://jsfiddle.net/MgcDU/3434/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:20:23.047

当您添加 data-toggle 和 data-parent 属性时，引导程序会自动初始化手风琴。我认为您只需要删除 javascript 初始化 - $(".collapse").collapse({"toggle" : "show"});

# backbone.js - 视图未在 Backbone.js 中呈现

> ID：16130018
> 
> 赞同：0
> 
> 时间：2013-04-21T10:04:45.750
> 
> 标签：backbone.js, rendering, backbone-views

我正在尝试在我的页面上呈现一个搜索框。我试图把它放在一个单独的视图中。没有此 boxview 的页面工作正常，但一旦我初始化我的 BoxView，我就会得到与下划线相关的错误。

```
Uncaught TypeError: Object [object Object] has no method 'replace' underscore-min.js:29 
```

这是我的看法

```
/* Views */

var BoxView = Backbone.View.extend({
    el: '.head',
    initialize: function() {
        this.render();
    },
    render : function(){
        var that = this;
        var template = _.template($('#search-box').html());
        that.$el.html(template);
    }
});

  var boxview = new BoxView(); 
```

模板

```
<script type="text/template" id="search-box">
<form class="navbar-search pull-right" id="search">
<input class="search-query" name="searchText" type="text" id="searchText" placeholder="Search books"/>
<button type="submit" class="btn">Submit</button>
</form>
</script> 
```

编辑：删除了拼写错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:38:13.517

在我看来，这只是一个错字：

```
var template = _.template($('#search-box')).html(); 
```

应该：

```
var template = _.template($('#search-box').html()); 
```

**编辑：**
我通常认为这是在写问题时犯的那种错字，但你的错误表明问题来自下划线调用（你只有一个），并且它试图`replace`在一个对象上使用。`_.template`肯定会使用`replace`并且你给它一个对象（`$('#search-box')`）。所以这是有道理的。

# c# - ASP.Net MVC 4 Web API 控制器不适用于 Unity.WebApi

> ID：16130020
> 
> 赞同：10
> 
> 时间：2013-04-21T10:04:57.347
> 
> 标签：c#, asp.net, json, api, unity-container

我的 ASP.Net MVC 4 Web API 控制器不适用于 Unity.WebApi。在同一个项目中，简单的控制器可以正常使用 Unity.Mvc3。但是当我运行从 ApiController 派生的 Web API 控制器时，我收到一条消息：

> {"$id":"1","Message":"发生错误。","ExceptionMessage":"类型 'ElectricTests.Controllers.Api.DocumentsController' 没有默认构造函数","ExceptionType":" System.ArgumentException","StackTrace":" at System.Linq.Expressions.Expression.New(Type type)\r\n at System.Web.Http.Internal.TypeActivator.Create[TBase](Type instanceType)\r\ n 在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.GetInstanceOrActivator（HttpRequestMessage 请求，类型控制器类型，Func`1& 激活器）\r\n 在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create（HttpRequestMessage 请求，HttpControllerDescriptor 控制器描述符，类型控制器类型)"}

我的 API 控制器：

```
public class DocumentsController : ApiController
{
    private readonly IDocumentsRepository _repository;

    public DocumentsController(IDocumentsRepository repository) {
        _repository = repository;
    }

    public IEnumerable<FormattedDocument> GetFormattedDocuments()
    {
        return _repository.GetAllFormattedDocuments();
    }
    ... 
```

引导程序.cs：

```
public static class Bootstrapper {
    public static void Initialise() {
        IUnityContainer container = BuildUnityContainer();
        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    }

    private static IUnityContainer BuildUnityContainer() {
        var container = new UnityContainer();

        // register all your components with the container here
        // it is NOT necessary to register your controllers
        // e.g. container.RegisterType<ITestService, TestService>();            

        container.RegisterType<IDocumentsRepository, DocumentsRepository>();
        container.RegisterType<IQuestionsRepository, QuestionsRepository>();
        container.RegisterType<ITestRepository, TestsRepository>();

        return container;
    }
} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-06T12:55:03.013

Controller 和 ApiController 的处理方式不同，因为它们具有完全不同的基类：

我将 Unity.MVC4 库用于控制器 DI ( [http://www.nuget.org/packages/Unity.MVC4/](http://www.nuget.org/packages/Unity.MVC4/) )

```
Install-Package Unity.MVC4 
```

和用于 DI 的 Unity.WebAPI ( [http://www.nuget.org/packages/Unity.WebAPI/](http://www.nuget.org/packages/Unity.WebAPI/) )

```
Install-Package Unity.WebAPI 
```

您的引导程序应该是两者的组合：

```
DependencyResolver.SetResolver(new Unity.Mvc4.UnityDependencyResolver(container));
GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container); 
```

注意我还必须添加一些注册才能使帮助页面正常工作

```
container.RegisterInstance(typeof (HttpConfiguration), GlobalConfiguration.Configuration); 
```

作为 Unity.MVC4 的所有者，我正在考虑在我们的库中实现 WebApi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T15:45:19.517

当您为 ASP.NET Web API 安装 Unity 时，它会执行所有操作，除了将以下行添加到您的 Global.asax

```
Bootstrapper.Initialise(); 
```

所以你需要将它添加到你的 Application_Start 方法中：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    Bootstrapper.Initialise();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

# php - SQL DATE 和 TIME 到 DATETIME

> ID：16130021
> 
> 赞同：0
> 
> 时间：2013-04-21T10:05:23.130
> 
> 标签：php, mysql, sql, date, time

我的表中有日期和时间列。我想选择日期和时间大于当前时间加一小时的所有对象：

我尝试了以下方法：

```
SELECT * FROM mytable WHERE date >= CURDATE() AND time >= TIME(NOW()+INTERVAL 1 hour) 
```

然而这在逻辑上是不正确的。如果日期是明天并且时间小于当前的 HH:MM，它将不会选择该记录。如何使用我的日期和时间与当前日期时间进行比较？我正在使用 php 5.2 和 mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:09:31.477

首先，我建议使用 DATETIME 列来使此过滤更有效。但是，如果您无法更改，则此方法有效：

```
SELECT * FROM mytable
WHERE (date = CURDATE() AND time >= TIME(NOW() + INTERVAL 1 hour))
OR date > CURDATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:09:43.240

您可以将您的条件分为两个条件...

*   当日期等于今天并且比当前时间早一个多小时时：

    `date == CURDATE() AND time >= TIME(NOW()+INTERVAL 1 hour)`

*   当日期大于今天时：

    `date > CURDATE()`

`OR`...并使用和括号将它们链接在一起：

```
SELECT * FROM mytable WHERE (date == CURDATE() AND time >= TIME(NOW()+INTERVAL 1 hour)) OR date > CURDATE() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T10:16:36.653

首先检查日期是否是今天，如果时间大于当前时间。第二个条件是检查日期是否大于当前日期。因为如果日期大于当前日期，那么它的时间就会自动提前。

```
SELECT * FROM mytable
WHERE (date = CURDATE() AND time >= TIME(NOW() + INTERVAL 1 hour))
OR date > CURDATE() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T10:13:22.223

```
SELECT * FROM mytable WHERE date >= CURDATE() AND time >= TIME(HOUR(NOW()) + 1); 
```

或者也许只是

```
SELECT * FROM mytable WHERE date >= CURDATE() AND time >= HOUR(NOW()) + 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T12:50:44.103

你可以这样做。

```
SELECT 
* 
FROM
mytable 
WHERE 
CONCAT( date, " ", time ) > (NOW() + INTERVAL 1 HOUR ); 
```

我个人建议您摆脱日期和时间的单独字段并创建一个合并的“日期时间”字段。我还建议在该字段中添加一个 INDEX。

这将使您的查询更好更快。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T11:59:15.880

正如@Pekka 所指出的，到目前为止发布的所有答案都会在晚上 11 点到午夜之间给出错误的答案。我不使用 MySQL，但我可以查找资料。更好的方法似乎是 timestamp() 函数。

[该参考文献](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_timestamp)指出：

```
With two arguments, it adds the time expression expr2 to the date 
or datetime expression expr1 and returns the result as a datetime value. 
```

为什么不使用带两个参数的 timestamp()？

# yii - 特定字段的自动生成代码 (yii)

> ID：16130024
> 
> 赞同：0
> 
> 时间：2013-04-21T10:05:40.230
> 
> 标签：yii

我正在使用 gii 自动生成 crud 功能。但我不希望它适用于所有领域。我希望它适用于特定领域：

例如 user_id(auto increment) firstName lastName email validate

现在我想在 user_id 和验证字段中使用表单输入值。我不想在表单中查看这些字段。因为这些要么是自动生成的，要么是可操作的字段。普通用户无需了解。所以，就像如何使用 gii 一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:08:26.130

修改gii生成的表单，省略的字段不会出现在crud表单中。

# r - R中有吸引力的3D绘图

> ID：16130025
> 
> 赞同：6
> 
> 时间：2013-04-21T10:05:43.440
> 
> 标签：r, graphics, 3d, plot, gridlines

我正在写一个提案，需要一个像这样的 3D 图：

![在此处输入图像描述](https://i.stack.imgur.com/P70Yg.png)

但最好更有吸引力。我需要每个点的大小来反映物种的丰度以及通过连接点创建的体积轮廓。

样本数据：

```
input<-data.frame(
label=c("sp1","sp2","sp3","sp4"),
trait_x=c(6,6,6,1),
trait_y=c(7,7,7,1),
trait_z=c(8,8,8,1),
point_size=c(6,7,8,1)
)
input
  label trait_x trait_y trait_z point_size
1   sp1       6       7       8        6
2   sp2       6       7       8        7
3   sp3       6       7       8        8
4   sp4       1       1       1        1 
```

关于如何使这样的图表更具吸引力的任何建议（可能包括网格线？但是我不希望轴上有任何数字）

我玩过`scatterplot3d`，但它并没有绘制出我所有的观点，而且我个人发现立方体看起来很奇怪......就像它不太准确......

```
library(scatterplot3d)
x<-input$trait_x
y<-input$trait_y
z<-input$trait_z
scatterplot3d(x,y,z,xlim=c(0,10),ylim=c(0,10),zlim=c(0,10)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/PJeRM.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T13:04:04.653

这应该让您开始使用 package `rgl`。注意：在重新阅读时，我发现我使用的 xyz 坐标与您使用的有点不同，但概念是相同的。

```
input<-data.frame( # I adjusted the values for better appearance in demo
label=c("sp1","sp2","sp3","sp4"),
trait_x=c(6,7,11,1),
trait_y=c(10,7,9,1),
trait_z=c(4,7,6,1),
point_size=c(6,7,8,1)
)
names(input) <- c("name", "x", "y", "z", "radius")
input$radius <- input$radius*0.2

require("rgl")

spheres3d(input[,2:4], radius = input[,5], col = c("red", "green", "blue", "orange"), alpha = 0.5)
axes3d(box = TRUE)
title3d(xlab = "x_trait", ylab = "y_trait", zlab = "z_trait")
text3d(input[1,2:4], texts = "species X")
# next line is clunky but you can do it more elegantly
segs <- rbind(input[1:2,2:4], input[2:3,2:4], input[3:4,2:4], input[c(4,1),2:4])
segments3d(segs) 
```

现在您可以交互式地旋转图表，然后使用它`rgl.snapshot`来获取硬拷贝（使用 spheres3d 中的抗锯齿参数将改进图表）。

![在此处输入图像描述](https://i.stack.imgur.com/10RQX.png)

# python - 如何在字典中创建字典

> ID：16130028
> 
> 赞同：1
> 
> 时间：2013-04-21T10:06:04.007
> 
> 标签：python, excel, fwrite

我有以下代码：

```
datedict = defaultdict(set)
with open('d:/info.csv', 'r') as csvfile:
    filereader = csv.reader(csvfile, 'excel')

    #passing the header
    read_header = False
    start_date=date(year=2009,month=1,day=1)
    #print((seen_date - start_date).days)
    tdic = {}
    for row in filereader: 
        if not read_header:
            read_header = True
            continue

# reading the rest rows
        name,id,firstseen = row[0],row[1],row[3]
        try:
            seen_date = datetime.datetime.strptime(firstseen, '%d/%m/%Y').date()               
            deltadays = (seen_date-start_date).days
            deltaweeks = deltadays/7 + 1
            key = name +'-'+id
            currentvalue = tdic.get(key, [])
            currentvalue.append(deltaweeks)
            tdic[key] = currentvalue

        except ValueError:
            print('Date value error')
            pass

tdic = dict((name, max(weeks) - min(weeks) + 1) for name, weeks in tdic.iteritems())

pprint.pprint(tdic) 
```

我得到以下结果：

```
{'Mali-2': 20,
 'Gooki-3': 6,
 'Piata-4': 6,     
 'Goerge-5': 4,
 'Samoo-6': 1,
 'Marria-7': 2} 
```

现在我想将三个项目、名称、id 和周作为单独的列写入 excel 文件中并打印出来。任何人都知道这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:17:43.067

```
>>> with open('out.csv', 'w') as f:
        w = csv.writer(f)
        for k, v in tdic.iteritems():
            name, id_ = k.split('-')
            weeks = v
            w.writerow([name, id_, weeks])

>>> with open('out.csv') as f:
        print f.read()

Piata,4,6    
Mali,2,20    
Goerge,5,4    
Gooki,3,6    
Samoo,6,1    
Marria,7,2 
```

但是，我不喜欢您这样做的方式，以下是对您的代码的一些建议：

```
key = name +'-'+id 
```

不要使用字符串操作来创建密钥，而是使用`tuple`：

```
key = (name, id) 
```

更改此行：

```
tdic = dict((name, max(weeks) - min(weeks) + 1) for name, weeks in tdic.iteritems()) 
```

只是说

```
tdic = dict((key, max(weeks) - min(weeks) + 1) for key, weeks in tdic.iteritems()) 
```

因为现在它是`(name, id_)`我们应该反映的关键（这是一件小事但很重要）

那么上面的代码就是

```
>>> with open('out.csv', 'w') as f:
        w = csv.writer(f)
        for (name, id_), weeks in tdic.iteritems():
            w.writerow([name, id_, weeks]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:11:02.797

您可以像这样定义dict的dict：

```
a_dict = {key: { anotherKey: value}} 
```

或者如果字典已经存在：

```
a_dict[key] = {anotherkey: value}
print a_dict[key][anotherkey] 
```

# ruby-on-rails - 导轨 | 当我将对象传递给部分时的性能

> ID：16130036
> 
> 赞同：1
> 
> 时间：2013-04-21T10:07:04.730
> 
> 标签：ruby-on-rails, performance, web, partial-views, activeresource

我知道这可能不是什么大问题，但我有一个让我感兴趣的问题：在 rails（以及一般的 Web 应用程序）中，假设我有一个包含以下属性的对象：`TinyMember(name: string, id: integer)`.

1.  我使用给定的 id 从 web 服务获取另一个更大的对象：`@member = MyService::Member.find(id)`。

2.  在我看来，我必须将成员对象传递给 2 个不同的部分：

    `= render partial: "p1", member: @member`

    `= render partial: "p2", member: @member`

我知道 TinyMember 对象对于第二个部分（p2）有足够的信息，我的问题是，如果我只将较轻的 TinyMember“发送”到这个部分，我是否会以某种方式提高性能，如下所示：

`= render partial: "p2", member: @tiny_member`

# php - 没有控制器名称的 Laravel 访问方法

> ID：16130037
> 
> 赞同：0
> 
> 时间：2013-04-21T10:07:11.260
> 
> 标签：php, laravel

我是一名 CI 用户，现在转向 Laravel。关于路由，如何仅通过方法名称使方法可访问，例如：

```
/controller/mymethod 
```

变得可访问

```
/mymethod 
```

简而言之，我正在寻找与 CI 相当的 Laravel

```
$route['(method1|method2)'] = 'controller/$1'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:18:22.577

您需要注册一条`GET`路线。

```
Route::get('method', 'controller@method'); 
```

您可以使用反向引用创建更复杂的路由来匹配多个方法。

```
Route::get('(method1|method2|method3)', 'controller@(:1)'); 
```

在**Laravel 4 中**，您采用了不同的方法。相反，您将向路由器注册控制器本身，并列出其响应的 URI 为`/`.

```
Route::controller('/', 'HomeController'); 
```

然后，这`HomeController`将包含以您希望它们响应的 HTTP 动词为前缀的方法。

```
class HomeController extends Controller {

    public function getIndex()
    {
        return 'Home Page';
    }

    public function getAbout()
    {
        return 'About Page';
    }

} 
```

该`getIndex`方法将响应根请求，例如`localhost/your-project/public`. 所有其他请求将类似于`localhost/your-project/public/about`，等等。

# java - 使用迭代器打印偶数

> ID：16130038
> 
> 赞同：-3
> 
> 时间：2013-04-21T10:07:23.877
> 
> 标签：java, iterator

如何使用迭代器从数组中打印偶数（这是教授发给我的练习，他指的是使用迭代器`hasNext()`，`getNext()`）

我不知道如何在代码中使用它们

```
public void printEven(){
    for(int i=0; i<nrs.length;i++){
        if(nrs[i]%2==0){
            System.out.println(nrs[i]);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:11:30.607

开始阅读[这篇](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)文章。然后请阅读一些[教程](http://www.java-samples.com/showtutorial.php?tutorialid=235)并了解有关[Iterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)的知识。然后试试你的指挥。您的问题的示例实现如下：

```
//Considering 0 as even number. 

public void printEven(int[] array){
    List<Integer> list = Arrays.asList(array);
    Iterator<Integer> itr = list.iterator();
    while(itr.hasNext()) {
       int number = itr.next();
       if(number%2==0) {
          System.out.println(number);
       }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:26:26.463

根据维基百科 [ [1](http://en.wikipedia.org/wiki/0_%28number%29#In_mathematics) ]，0 是偶数。所以：

> 0 是紧接在 1 之前的整数。零是偶数，因为它可以被 2 整除。

```
public void printEvenNumbers(int[] numbers) {
   List<Integer> numsList = Arrays.asList(numbers)
   for (Iterator<Integer> it = numsList.iterator(); it.hasNext(); ) { 
       int num = it.next();
       if (num % 2 == 0) {
           System.out.println(num);
       }
   }
} 
```

# scala - 要么，选项和理解

> ID：16130039
> 
> 赞同：7
> 
> 时间：2013-04-21T10:07:34.183
> 
> 标签：scala, monads, either

我正在编写一个用于理解的代码，并且想知道一些事情：

```
def updateUserStats(user: User): Either[Error,User] = for {
  stampleCount <- stampleRepository.getStampleCount(user).right
  userUpdated <- Right(copyUserWithStats(user,stampleCount)).right // ?????????
  userSaved <- userService.update(userUpdated).right
} yield userSaved

def copyUserWithStats(user: User, stamples: Long): User = {
  val newStats = user.userStats.copy(stamples = stamples)
  user.copy(userStats = newStats)
} 
```

似乎使用不返回 Either 的 copyUserWithStats 不能直接在 for 理解中使用，因为它没有 map/flatMap 方法。

所以我想知道，在这种情况下，使用它是合适的解决方案`Right(copyUserWithStats(user,stampleCount)).right`

它似乎至少可以工作......

顺便说一句，我也尝试了 Option 但它没有用，有人可以解释为什么吗？

```
def updateUserStats(user: User): Either[Error,User] = for {
  stampleCount <- stampleRepository.getStampleCount(user).right
  userUpdated <- Some(copyUserWithStats(user,stampleCount))
  userSaved <- userService.update(userUpdated).right
} yield userSaved 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T10:25:05.280

为了便于理解，所有单子都必须属于同一类型。这意味着您不能混合`RightProjection`and `Option`，因为输出必须是`Either`. 这是因为 for-comprehension 被转换为嵌套的 flatMap/map 构造。您的示例如下所示：

```
def updateUserStats(user: User): Either[Error,User] =
  stampleRepository.getStampleCount(user).right.flatMap { stampleCount =>
    Some(copyUserWithStats(user,stampleCount)).flatMap { userUpdated =>
      userService.update(userUpdated).right.map { userSaved =>
        userSaved
      }
    }
  } 
```

如果我们现在查看 的签名`RightProjection.flatMap`，即 def `flatMap[AA >: A, Y](f: (B) ⇒ Either[AA, Y]): Either[AA, Y]`，我们会看到，结果必须是`Either`，但`flatMap`of`Option`有签名`flatMap[B](f: (A) ⇒ Option[B]): Option[B]`。它返回 an`Option`并且没有理智的方法可以将 an 转换`Option`为 an `Either`。

**编辑**：以下示例不起作用`Either`，请参阅 huynhjl 的链接以获取更多信息

但是，除了从 monad 中提取值之外，您还可以创建变量，因此您的示例可以重写为：

```
def updateUserStats(user: User): Either[Error,User] = for {
  stampleCount <- stampleRepository.getStampleCount(user).right
  userUpdated = copyUserWithStats(user,stampleCount)
  userSaved <- userService.update(userUpdated).right
} yield userSaved 
```

这为我们节省了不必要的分配，也使代码更具可读性。

# javascript - 在 jQuery 中访问 javascript 本机“this”

> ID：16130040
> 
> 赞同：0
> 
> 时间：2013-04-21T10:07:35.160
> 
> 标签：javascript, jquery, oop, scope

如何访问函数`this.today`内部`Moved`？它将通过调用，`jQuery`因此`this`关键字将被 jQuery 覆盖为 jQuery 对象或 DOM 元素。

这是与我所拥有的类似的东西：

```
(function(Map) {
    Map.Timeline = {
        today: null,

        Init: function () {
            jQuery("#timeline").mousemove(Map.Timeline.Moved); // or this.Moved
        },

        Moved: function (event) {
            console.log(this);                  // jQuery Object or DOM element
            console.log(this.today);            // fails
            console.log(Map.Timeline.today);    // works fine
        },

        // more code here ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T10:11:46.637

使用[jQuery.proxy()](http://api.jquery.com/jQuery.proxy/)在回调调用中使用自定义上下文

```
jQuery('#timeline').mousemove(jQuery.proxy(Map.Timeline.Moved, this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:11:42.563

您可以在它被覆盖之前存储它：

```
(function(Map) {
var myvar = $(this);
Map.Timeline = {
    today: null,

    Init: function () {
        jQuery("#timeline").mousemove(Map.Timeline.Moved); // or this.Moved
    },

    Moved: function (event) {
        console.log(myvar);                  // jQuery Object or DOM element
        console.log(myvar.today);            // fails
        console.log(Map.Timeline.today);    // works fine
    },

    // more code here ... 
```

# c# - 编写自定义测试框架

> ID：16130048
> 
> 赞同：2
> 
> 时间：2013-04-21T10:08:35.707
> 
> 标签：c#, unit-testing, testing

我正在开发一种自己`unittest`的外部框架，`hardware`包括测试用例运行器。硬件一词的意思是，测试不测试主机上的软件——它们测试外部硬件上的实现，在`microcontrollers`.

在单元测试中`C#`，总是声明`attributes`而不是实现一个 testcase `interface`。

我的设计问题是我应该更喜欢哪种解决方案来进行新设计？

编辑：自定义核心代码的原因是测试用例运行器具有以下行为：

```
foreach(var tc in testcases)
    foreach(var temp in temperatures)
        SetTemperature(temp);
        foreach(var position in positions)
            GotoPosition(position);
            DoTestcase(tc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:17:09.633

旧的 junit 测试（当然是在 Java 中）基于命名约定，而不是开始使用 annotatinos（属性等价）——这要好得多，因为您不需要使用命名约定来构建测试框架，这就是元数据是为了。

所以，我认为你的情况很相似，为什么一个测试用例需要实现一个接口？无论如何-您将如何区分测试用例中的测试方法和内部私有方法？只需使用属性即可。

# mysql - mysql，事件发生后如何获取最近三个时间段的相关数据

> ID：16130049
> 
> 赞同：-1
> 
> 时间：2013-04-21T10:08:55.440
> 
> 标签：mysql, join, filter, lag

当数据值大于 x 时，我选择如下过滤表，将此称为事件。现在我想获取事件发生前唯一 (id1, id2) 对在我的数据库中的最后 3 次数据。

```
 example table 1 (after filtering for data>x)
 id1     id2   time data 
  76    1234   t101   d1
  46    9573   t102   d2 
  24    3632   t103   d3
  88    4792   t104   d4
  17    7799   t105   d5
  74    2274   t106   d6

    example output table
    id1     id2 time data 
    76    1234   t101   d1*
    76    1234   t76    d2
    76    1234   t44    d3
    76    1234   t32    d4
    46    9573   t102   d5 *
    46    9573   t99    d6 
    46    9573   t98    d7  
    46    9573   t91    d8 
```

到目前为止，我已经考虑 id1*id2 生成一个新的唯一 id：id1_id2 加入。要获得类似于“示例输出表”的内容，但包含 id1_id2 的所有数据，而不仅仅是事件之前的三个数据条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:00:54.497

这可能是您想要的，具体取决于说明：

```
SELECT numbered.*
FROM SELECT filtered.*,
            IF (id12 = @prev,
                @n := @n + 1,
                @n := 1 AND @prev := id12) as position
     FROM
          (SELECT     mytable.*, concat_ws('_', id1, id2) as id12
          FROM       (SELECT id1, id2, time FROM mytable WHERE data > x) AS mytablex
          INNER JOIN mytable
          ON         mytable.id1 = mytablex.id1 AND mytable.id2 = mytablex.id2
          ORDER BY   id1, id2, time DESC)
          AS         filtered
     JOIN (SELECT @n := 0, @prev := '') AS setup)
     AS   numbered
WHERE numbered.position < 4 
```

# c# - 检测脚本中未声明的变量

> ID：16130051
> 
> 赞同：2
> 
> 时间：2013-04-21T10:09:11.243
> 
> 标签：c#, parsing, variables

我正在使用自定义脚本来自动化流程。（实际学习）。这是脚本。

```
var a = 5;
var b = 55;

return a+b; 
```

我只是将源代码转换为 C# 并使用 CSharpCodeProvider 类进行编译。我目前正在将其转换为令牌，这是我的令牌枚举

```
public enum Tokens
{
    RETURN,
    NEWLINE,
    WHITESPACE,
    VAR,
    WORD,
    SYMBOL,
    INTEGER
} 
```

我成功获得了这些令牌

```
VAR, WHITESPACE, WORD, WHITESPACE, INTEGER, SYMBOL
NEWLINE,
VAR, WHITESPACE, WORD, WHITESPACE, INTEGER, SYMBOL
NEWLINE
NEWLINE
RETURN, WHITESPACE, WORD, SYMBOL, WORD, SYMBOL 
```

我目前正在尝试查找未声明的变量并自己声明它们。我尝试将每个添加`WORD`到变量列表并将其添加到脚本中，但它得到了重复的声明。

我希望它也验证

```
a = 5;
var b = 55;

return a+b; 
```

即只为没有 var 关键字的事物添加声明。

我怎么解决这个问题？

谢谢。

***编辑：***

这是我解析源代码的方式。

```
List<Token> tokensList;
List<string> variables;

for (int i=0; i<tokensList.Count; i++)
{
    Token token = tokensList[i];

    switch (token.TokenType)
    {
        case WORD:
            variables.Add(token.Value);
            break;
    }
    result.Append(token.Value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:31:59.850

您可以将“结果”声明为字典（=哈希），而不是列表，

在这种情况下，它不能有重复。

或者，替换：

```
 result.Append(token.Value); 
```

和：

```
if (!result.Contains(token.Value)) 
        result.Append(token.Value); 
```

# iphone - 使所有 UIImageViews 指向静态 UIImageView

> ID：16130061
> 
> 赞同：1
> 
> 时间：2013-04-21T10:09:47.230
> 
> 标签：iphone, ios, uitableview, animation, scroll

我不知道我的想法是否正确，但我的问题是我在 UITableView 中有自定义单元格（看起来像汽车），每个单元格包含 2 个 UIImageViews（轮子图像），我需要旋转轮子图像当 UITableView 向下或向上滚动时，我可以将所有车轮图像指向一个图像，然后在 UITableView 滚动时立即旋转该图像吗？

这是我的代码

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    CGPoint currentOffset = scrollView.contentOffset;
    if (currentOffset.y > self.lastContentOffset.y)
    {
        self.wheelImage.transform = CGAffineTransformRotate(self.wheelImage.transform,- M_PI / 4);
    }
    else
    {
        self.wheelImage.transform = CGAffineTransformRotate(self.wheelImage.transform, M_PI / 4);
    }
    self.lastContentOffset = currentOffset;
} 
```

对不起我的英语不好，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:02:24.260

这是我到目前为止找到的最佳答案，它工作得很好，但我需要使它更现实（应用物理公式）：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    int fragment = 20;
    for(UITableViewCell *cell  in [self.showsTable visibleCells]){

        if ([cell isKindOfClass:[ShowCell class]]){

            CGPoint currentOffset = scrollView.contentOffset;

            if (currentOffset.y > self.lastContentOffset.y){

                [[(ShowCell*)cell wheel1Image] setTransform:CGAffineTransformRotate([(ShowCell*)cell wheel1Image].transform, M_PI / fragment)];
                [[(ShowCell*)cell wheel2Image] setTransform:CGAffineTransformRotate([(ShowCell*)cell wheel2Image].transform, M_PI / fragment)];
            }
            else{

                [[(ShowCell*)cell wheel1Image] setTransform:CGAffineTransformRotate([(ShowCell*)cell wheel1Image].transform,- M_PI / fragment)];
                [[(ShowCell*)cell wheel2Image] setTransform:CGAffineTransformRotate([(ShowCell*)cell wheel2Image].transform,- M_PI / fragment)];
            }
            self.lastContentOffset = currentOffset;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:37:16.903

我相信你不能这样做。你需要的是调用`reloadData`你的`UITableView`from`scrollViewDidScroll`方法。调用`reloadData`将调用`cellForRawAtIndexMethod`，并且在该方法中，您应该根据当前偏移量更新每个单元格的轮子变换。

# javascript - 在表中查找 TD 的位置

> ID：16130062
> 
> 赞同：4
> 
> 时间：2013-04-21T10:10:02.450
> 
> 标签：javascript, html, dom

所以假设我有一张桌子，我想在其中操作一个特定`<td>`的：

HTML：

```
<table>
    <tr><td>1</td> <td>2</td></tr>
    <tr><td>3</td> <td>4</td></tr>
    <tr><td id="hi">5</td> <td>6</td></tr>
</table> 
```

Javascript：

```
document.getElementsByTagName("table")[0].rows[2].cells[0]; 
```

这将帮助我到达表格中的特定单元格。

我的问题是这样的：

假设我`<td>`在表格中有一个特定的内容：

```
var td = document.getElementById("hi") 
```

我想知道它在表格中的位置，所以我可以使用`table.rows[x].cells[y]` 如何检查这个位置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T10:18:08.893

我建议，因为您暗示您知道要找到哪个特定单元格，尽管目前未经测试：

```
var td = document.getElementById("hi"),
    col = td.cellIndex,
    row = td.parentNode.rowIndex; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T10:21:18.177

元素的`cellIndex`属性`td`给出了行中单元格的索引。
元素的`rowIndex`属性`tr`给出了表中行的索引。

所以，

```
var td = document.getElementById("hi");
var x = td.cellIndex;
var y = td.parentNode.rowIndex; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T10:16:08.143

你将需要这样的东西：

```
function getRowCellPosition(table, cell) {
    for (var i = 0; i < table.rows.length; i++) {
        for (var j = 0; j < table.rows[i].cells.length; j++) {
            if (table.rows[i].cells[j] === cell) {
                return {
                    row: i,
                    cell: j
                };
            }
        }
    }
    return null;
} 
```

或更简单：

```
function getRowCellPosition(cell) {
    return {
        row: cell.parentNode.rowIndex,
        cell: cell.cellIndex
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T10:14:16.173

只需创建一个遍历每一行和每一列的 for 循环，并将该索引中的 TD 与您想要的进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T10:18:46.437

尝试这个：

对于行：

```
Array.slice(el.parentNode.parentNode.children).indexOf(el.parentNode) 
```

对于 col：

```
Array.slice(el.parentNode.children).indexOf(el) 
```

切片魔法是因为`el.parentNode.children`不是数组。

编辑：我不知道`td.cellIndex`and `tr.rowIndex`。绝对使用它们。

# c# - 正则表达式中的'$'在c#中是否找到断线

> ID：16130065
> 
> 赞同：1
> 
> 时间：2013-04-21T10:10:31.730
> 
> 标签：c#, regex, end-of-line

当我执行这段代码时，我得到了一些有趣的结果。

```
 string readText = File.ReadAllText("d:\\temp.txt");
  Console.WriteLine(readText);

  Console.WriteLine("From File: "+Regex.Matches(readText,"$").Count);//-->2

  Console.WriteLine("Add \\n to the File: "+Regex.Matches(readText + "\n", "$").Count);//--->2
  Console.WriteLine("Add multiple \\n to the file: "+Regex.Matches(readText + "\n\n\n", "$").Count);//--->2

  Console.WriteLine("on Text \"sample\": "+Regex.Matches("sample", "$").Count);//--->1
  Console.WriteLine("on Text \"sample\\n\\n\\n\": "+Regex.Matches("sample" + "\n\n\n", "$").Count);//--->2 
```

输出：

```
First line

third

Line 6
Line 7

From File: 2
Add \n to the File: 2
Add multiple \n to the file: 2
on Text "sample": 1
on Text "sample\n\n\n": 2 
```

为什么它给我这样的结果。任何一个前飞机都可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:23:41.620

`$`[在两个可能的位置](http://www.regular-expressions.info/anchors.html)匹配：（[滚动到“以换行符结尾的字符串”部分）]

1.  在输入字符串的末尾*和*
2.  如果字符串以换行符结尾，则在字符串中最后一个换行符之前的位置。

因此，如果您的字符串以一个或多个换行符结尾，您将获得两个匹配项`$`。在其他情况下，你会得到一个。

如果您只想匹配字符串的*末尾*`\z`，请改用。

Python中的一个实验：

```
>>> [match.start() for match in re.finditer("$", "hello")]
[5]
>>> [match.start() for match in re.finditer("$", "hello\n")]
[5, 6]
>>> [match.start() for match in re.finditer("$", "hello\n\n")]
[6, 7]
>>> [match.start() for match in re.finditer("$", "hello\n\n\n")]
[7, 8] 
```

# c# - 如何找出正则表达式解析的字符串部分是否包含另一个字符串？

> ID：16130066
> 
> 赞同：1
> 
> 时间：2013-04-21T10:10:43.733
> 
> 标签：c#, .net, regex, linq

假设我们有一个字符串列表`L`，一个给定的字符串`S`。我们有一个正则表达式，就像`(\w+)\-(\w+)` 我们想要获取与正则表达式匹配的所有`L`元素一样。怎么做这样的事情？`S``$1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:42:35.843

你可以这样做：

```
// sample data
string[] L = new string[] { "bar foo", "foo bar-zoo", "bar-", "zoo bar-foo" };
string S = "bar";

Regex regex = new Regex(@"(\w+)\-(\w+)");
string[] res = L.Where(l => { 
      Match m = regex.Match(l);
      if (m.Success) return m.Groups[1].Value == S;
      else return false;
    }).ToArray(); 
```

并得到

```
foo bar-zoo
zoo bar-foo 
```

一种可能对您也有效的更简单方法是包含`S`在正则表达式中：

```
Regex regex = new Regex(S + @"\-(\w+)");
string[] res = L.Where(l => regex.Match(l).Success).ToArray(); 
```

# javascript - 试图在 Highcharts 样条曲线中添加第二行

> ID：16130067
> 
> 赞同：0
> 
> 时间：2013-04-21T10:10:48.453
> 
> 标签：javascript, highcharts

我在向 highchart 样条中添加新行时遇到问题。我想要一条不同颜色的第二行，这可能吗？

[http://jsfiddle.net/gc9n/uBxmz/1](http://jsfiddle.net/gc9n/uBxmz/1)

```
 load: function ()
  {    
    var series1 = this.series[0];
    var series2 = this.series[1];
    setInterval(function () {   
    var x = (new Date()).getTime(), // current time    
        y = Math.random() ; 
        c = Math.random();
    series1.addPoint([x, y], true, true);   
    series2.addPoint([x, c], true, true);   
    chart.redraw()
    }, 700); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:45:24.583

请在部分代码下方更改您

```
 series: [{   
   name: ' Speed',       
   data: (function () {       
   var data = [],time = (new Date()).getTime(), i;        

   for (i = -19; i <= 0; i++) {    
   data.push({x: time + i * 1000,y:44});       
   }    
   return data;  
   })() },
   {
   name:'Second Series',
   data: // Add your data here
   }

  ] 
```

# c# - C# 从外部类设置 CheckBox 值

> ID：16130074
> 
> 赞同：0
> 
> 时间：2013-04-21T10:11:25.450
> 
> 标签：c#, checkbox

我有外部课程来处理我的表格。我有一些错误最终无法处理。

我的第一个变种

```
mainForm.CheckBox1.Checked = true; 
```

它不起作用，出现错误
跨线程操作无效：控件'CheckBox1'从创建它的线程以外的线程访问

所以我在 [stackoverflow问题1](https://stackoverflow.com/questions/3789773/setting-the-value-of-a-checkbox-programmatically-in-c-sharp-wpf)之后尝试过， 但是当我写

```
mainForm.CheckBox1.IsCheked = true 
```

编译器给出一个错误，
错误是“System.Windows.Forms.Control”不包含“IsChecked”的定义，并且没有接受“System.Windows.Forms.Control”类型的第一个参数的扩展方法“IsChecked”可能是找到（您是否缺少 using 指令或程序集引用？）

[我在srackoverflow 问题 2](https://stackoverflow.com/questions/5548308/how-to-get-the-ischecked-property-of-a-winform-control)中看到并找到了答案

但我不能铸造我的对象，因为当我写

```
(CheckBox)mainForm.CheckBox1.IsCheked = true 
```

它给出了 CheckBox 的错误 Can't find name of or namespace (你是否缺少 using 指令或程序集引用？)。我有`using System.Windows.Forms;`在上课的开始。

我是 C# 的初学者，所以你能给我一些建议我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:57:09.000

如果我理解正确，您有几个选择...静态函数没有与之关联的实例，因此他们将不了解您的复选框是什么，如果您希望保留静态函数，则需要通过在您的静态函数的复选框中，虽然这不是很实用..

```
public static void SetCheck(Checkbox c, bool value)
{
    c.Checked = value;
} 
```

这不切实际的原因是，如果您知道复选框，那么您可能无论如何都可以设置复选框，您可以在主表单上提供 Checked 属性以仅允许更改复选框的选中值。

```
public bool IsMyCheckboxChecked
{
    get{ return checkBox1.Checked;}
    set{ checkBox1.Checked = value;}
} 
```

如果这是您尝试设置的父表单，那么您可以随时通过

`((MainForm)this.ParentForm).IsMyCheckboxChecked = true`

**编辑**为方法

```
public void SetCheckbox(int num, bool state)
{
    checkboxList[num].Checked = state;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:55:45.813

使用 CheckBox 参数为您的第二个类创建一个构造函数。

```
 private readonly CheckBox _externalCheckBox = null;
    public SecForm(CheckBox externalCheckBox)
    {
        _externalCheckBox = externalCheckBox;
        InitializeComponent();
    } 
```

所以在 mainForm 中创建一个 SecForm 的实例并为其传递 checkBox 并在 secForm 中 chenge Checked 属性。

```
 private void ChangeCheck(bool value)
    {
        _externalCheckBox.Checked = value;
    } 
```

# vb.net - 打开和重新打开 exe 文件

> ID：16130084
> 
> 赞同：1
> 
> 时间：2013-04-21T10:12:46.537
> 
> 标签：vb.net, exe

我正在尝试以这种方式重新打开一个 exe 文件（我以前打开过）：如果它已打开，则不要重新打开它，而只需将该文件放入 foucs 中。如果没有打开，那就打开它。（现在 - exe 文件不断重新打开。）

任何人都知道如何做到这一点？（适用于 powerpoint 文件、word 文件、excel 文件、电影文件、pdf 文件）

这是我的代码：

```
 Dim file3dopen As New ProcessStartInfo()
    With file3dopen
        .FileName = Add3DFolder & cmbx3D.Text
        .UseShellExecute = True
        'Minimizes this form and unhides other form
        Minimize()
        FormMain.Show()
        FormMain.TopMost = True
    End With
    Process.Start(file3dopen) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:46:10.940

如果您拥有要启动的应用程序的代码，那么最好的办法是更改该应用程序启动代码以不允许同一应用程序的两个实例。这可以通过这种方式使用 Mutex 对象来完成

```
<DllImport("user32.dll")> _
Private Shared Function SetForegroundWindow(ByVal hWnd As IntPtr) As <MarshalAs(UnmanagedType.Bool)> Boolean
End Function

<STAThread()> _
Shared Sub Main()
    Dim createdNew As Boolean = true;
    Using mutes = new Mutex(true, "MyApplicationName", createdNew)
        if createdNew Then
            Application.EnableVisualStyles()
            Application.SetCompatibleTextRenderingDefault(false)
            Application.Run(new MainForm())
        else
            Dim current = Process.GetCurrentProcess();
            for each process in Process.GetProcessesByName(current.ProcessName)
                if process.Id <> current.Id Then
                    SetForegroundWindow(process.MainWindowHandle)
                    Exit For
                End If
            Next
        End If
    End Using 
```

在此之后，您的其他应用程序无需任何检查即可启动第一个应用程序，因为在被调用的应用程序中，上面的代码发现了自身的另一个副本并将控件切换到找到的副本。永远不会有同一应用程序的两个副本同时运行。

相反，如果您不拥有要启动的应用程序，那么您只能在代码上添加测试以查看应用程序进程名称是否存在于当前正在运行的进程列表中例如：

```
Private Sub TestIfRunningIE
    if IsApplicationRunning("IEXPLORE") Then
        Console.WriteLine("Internet Explorer is running")
    Else
        Console.WriteLine("Internet Explorer is NOT running")
    End If
End Sub

Public Function IsApplicationRunning(ByVal appName As String) As Boolean
   For Each aProcess in Process.GetProcesses()   
        If aProcess.ProcessName.StartsWith(appName, StringComparisong.CurrentCultureIgnoreCase) Then
            Return true  
        End If
   Next
   Return False
End Function 
```

当然，这要求您知道进程名称，但您可以使用无数可用的免费进程实用程序之一轻松找到该名称。

**编辑** 要将发现的进程带到前台，我们需要 WinAPI 的一些帮助。首先，更改 IsApplicationRunning 以返回找到的进程

```
Public Function IsApplicationRunning(ByVal appName As String) As Process
   For Each aProcess in Process.GetProcesses()   
        If aProcess.ProcessName.StartsWith(appName, StringComparisong.CurrentCultureIgnoreCase) Then
            Return aProcess  
        End If
   Next
   Return Nothing
End Function 
```

然后构建一个类，其中包含两个 WinAPI 的声明`user32.dll`

```
Public Class Win32Helper
    <System.Runtime.InteropServices.DllImport("user32.dll", _
    EntryPoint:="SetForegroundWindow", _
    CallingConvention:=Runtime.InteropServices.CallingConvention.StdCall, _
    CharSet:=Runtime.InteropServices.CharSet.Unicode, SetLastError:=True)> _
    Public Shared Function _
    SetForegroundWindow(ByVal handle As IntPtr) As Boolean
    End Function

    <System.Runtime.InteropServices.DllImport("user32.dll", _
    EntryPoint:="ShowWindow", _
    CallingConvention:=Runtime.InteropServices.CallingConvention.StdCall, _
    CharSet:=Runtime.InteropServices.CharSet.Unicode, SetLastError:=True)> _
    Public Shared Function ShowWindow(ByVal handle As IntPtr, ByVal nCmd As Int32) As Boolean
    End Function
End Class 
```

现在在你的主要代码中写这个

```
Dim proc = IsApplicationRunning("your_process_name")
if proc isnot Nothing then 
    Dim handle As IntPtr = proc.MainWindowHandle
    Dim Win32Help As New Win32Helper
    If Not IntPtr.Zero.Equals(handle) Then
        Win32Helper.ShowWindow(handle, 1)
        Win32Helper.SetForegroundWindow(handle)
    End If
else
    Console.WriteLine("Process not found")
End if 
```

作为参考，我在[这里找到了实现 Win32Helper 类的代码](http://bytes.com/topic/visual-basic-net/answers/363105-bring-front-process-other-application)

# c# - 服务器控制事件未正确触发

> ID：16130087
> 
> 赞同：1
> 
> 时间：2013-04-21T10:13:10.320
> 
> 标签：c#, asp.net, events, postback, servercontrols

首先，我发现了几个类似的问题。其中之一是*[here](https://stackoverflow.com/questions/12832688/asp-net-page-with-multiple-custom-controls-implementing-ipostbackeventhandler)*，没有正确答案。

我正在编写自定义服务器控件，它具有*Text*属性和*Click*事件。一切都很好（*点击*事件正在触发并且*发件人*对象具有正确的值），**但前提是我只在页面上的一个地方使用它**。

此示例工作正常（如果*SimpleControl1.Text*具有值*"First control"*，作为响应，我收到正确的值）：

```
protected void SimpleControl1_Click(object sender, EventArgs e)
    {
        SimpleControl sc = sender as SimpleControl;
        if(sc != null)
        {
            Response.Write(sc.Text);
        }
    } 
```

但是，如果我在同一页面上添加第二个控件（*SimpleControl2*带有文本*"Second Control"*），我的第一个控件的*Click*事件将不再起作用：

```
 protected void SimpleControl2_Click(object sender, EventArgs e)
    {
        SimpleControl sc = sender as SimpleControl;
        if (sc != null)
        {
            Response.Write(sc.Text);
        }
    } 
```

因此，如果我单击第一个控件，我将收到*“第二个控件”*文本。

我想我错过了一些东西，但我不确定是什么。

如何解决这个问题？

这是我的简单 Web 控件：

```
public class SimpleControl : WebControl, IPostBackEventHandler
{
    public string Text { get; set; }

    protected override void OnInit(EventArgs e)
    {
        Page.RegisterRequiresRaiseEvent(this);
        Page.RegisterRequiresControlState(this);
        base.OnInit(e);
    }

    private static readonly object EventClick = new object();

    protected virtual void OnClick(EventArgs e)
    {
        EventHandler eventHandler = (EventHandler)Events[SimpleControl.EventClick];
        if (eventHandler != null) { eventHandler(this, e); }
    }

    public event EventHandler Click
    {
        add { Events.AddHandler(EventClick, value); }
        remove { Events.RemoveHandler(EventClick, value); }
    }

    protected override object SaveControlState()
    {
        object state = base.SaveControlState();
        return new object[] { state, Text };
    }

    protected override void LoadControlState(object state)
    {
        object[] states = state as object[];
        if (states != null)
        {
            base.LoadControlState(states[0]);
            Text = (string)states[1];
        }
    }

    protected override void RenderContents(System.Web.UI.HtmlTextWriter writer)
    {
        writer.AddAttribute(HtmlTextWriterAttribute.Id, this.ClientID);
        writer.AddAttribute(HtmlTextWriterAttribute.Name, this.UniqueID);
        writer.AddAttribute(HtmlTextWriterAttribute.Onclick, Page.ClientScript.GetPostBackEventReference(this, "Click"));

        writer.RenderBeginTag("div");
        writer.Write(Text);
        writer.RenderEndTag(); 

        base.RenderContents(writer);
    }

    public void RaisePostBackEvent(string eventArgument)
    {
        this.OnClick(EventArgs.Empty);
    }
} 
```

**编辑**

标记

```
<cc1:SimpleControl ID="SimpleControl1" runat="server" 
Text="First control" OnClick="SimpleControl1_Click"  />
<cc1:SimpleControl ID="SimpleControl2" runat="server" 
Text="Second Control" OnClick="SimpleControl2_Click" /> 
```

ps 我还删除了*控制状态*支持，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:12:38.607

你如何绑定你的事件？你也可以显示标记吗？我会假设当你绑定事件时发生了一些奇怪的事情，并且你以某种方式将第二个事件绑定到第一个控件，或者类似的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:28:29.273

删除此行`OnInit`：

```
Page.RegisterRequiresRaiseEvent(this); 
```

此方法的 msdn 指出：

> 每个页面请求只能注册一个服务器控件。

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerrequiresraiseevent.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerrequiresraiseevent.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:24:13.697

我猜@Crwydryn 猜测该功能是否是您所追求的（或有点相似）。您可以为两个或多个控件绑定到 SimpleControl_Click。发布您的标记将很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:47:02.197

问题是**对象状态 = base.SaveControlState()**状态可能为空。根据 MSDN

> 返回服务器控件的当前状态。如果没有与控件关联的状态，则此方法返回 null。

```
public override object SaveControlState()
{
    object obj = base.SaveControlState();
    // Your problem is here
    // return new object[] { obj, Text };
    if (!string.IsNullOrEmpty(Text))
    {
       if (obj != null)
       {
           return new object[] { obj, Text };
       }
       else
       {
           return Text;
       }
    }
    else
    {
        return obj;
    }
}
public override void LoadControlState(object state)
{
    if (state != null)
    {
        object obj = state as object[];
        if (obj != null)
        {
            base.LoadControlState(obj[0]);
            Text = (string)obj[1];
        }
        else
        {
            if (state is string)
            {
                 Text = (string)state;
            }
            else
            {
                 base.LoadControlState(state);
            }
        }
    }
} 
```

# ruby-on-rails - 如何在 ruby on rails 中获得 5 篇最受欢迎的文章

> ID：16130092
> 
> 赞同：2
> 
> 时间：2013-04-21T10:14:43.177
> 
> 标签：ruby-on-rails

我需要获得用户浏览次数最多的 5 篇文章。为此，我实现了“印象”功能，并且文章和印象模型之间存在多态关系。使用它，我无法获得每篇文章从用户那里获得的视图。但现在我需要从 db 中获取 5 篇浏览次数最多的文章。我知道这是个愚蠢的问题，但我试过但找不到答案。

schema.rb （我没有粘贴完整的文件，但只是相关的）

```
ActiveRecord::Schema.define(:version => 20130419101017) do

  create_table "articles", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end

  create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.string   "article_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "impressions", :force => true do |t|
    t.string   "impressionable_type"
    t.integer  "impressionable_id"
    t.integer  "user_id"
    t.string   "ip_address"
    t.datetime "created_at",          :null => false
    t.datetime "updated_at",          :null => false
  end 
```

文章控制器.rb

```
class ArticlesController < ApplicationController
  before_filter :is_user_admin, only: [:new, :create, :edit, :destroy]
  before_filter :log_impression, :only=> [:show]

    def is_user_admin
      redirect_to(action: :index) unless current_user.try(:is_admin?) 
      return false 
    end

   def log_impression
     @article = Article.find(params[:id])
     # this assumes you have a current_user method in your authentication system
      @article.impressions.create(ip_address: request.remote_ip,user_id:current_user.id)
   end

      def index
          @articles = Article.all(:order => "created_at DESC")
      @article_titles = Article.first(10)
      @article_popular = Article. 
      @tags = Tag.all
      end

    def show
       @article = Article.find(params[:id])
       @related_articles = Article.joins(:taggings).
       where('articles.id != ?', @article.id)
       .where(taggings: { tag_id: @article.tag_ids }) 
    end

      def new
      @article = Article.new
      end

    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id
      if @article.save
        flash[:success] = "article created!"
        redirect_to article_path(@article)
      else
        render 'new' 
      end 
    end

    def destroy
      @article = Article.find(params[:id])
      @article.destroy
      redirect_to action:  'index'  
    end

    def edit
      @article = Article.find(params[:id])
    end

    def update
      @article = Article.find(params[:id])
      if @article.update_attributes(params[:article])
       flash.notice = "Article '#{@article.title}' Updated!"
       redirect_to article_path(@article)
      else 
        render 'edit'
      end
    end
end 
```

文章.rb

```
class Article < ActiveRecord::Base
   attr_accessible :title, :body
   attr_accessible :tag_list
   has_many :comments
   belongs_to :user
   has_many :taggings
   has_many :tags, through: :taggings
   has_many :impressions, :as=>:impressionable
   validates :title, :body, :tag_list,  :presence => true

  def impression_count
    impressions.size
  end

  def unique_impression_count
    impressions.group(:ip_address).size #UNTESTED: might not be correct syntax
  end

   def tag_list
     self.tags.collect do |tag|
      tag.name
     end.join(", ")
   end

   def tag_list=(tags_string)
     tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq
     new_or_found_tags = tag_names.collect { |name| Tag.find_or_create_by_name(name) }
     self.tags = new_or_found_tags
   end
end 
```

印象.rb

```
class Impression < ActiveRecord::Base
  attr_accessible :impressionable_id, :impressionable_type, :ip_address, :user_id
  belongs_to :impressionable, :polymorphic=>true 
end 
```

文章/show.html.erb

```
Viewed: <%=@article.impression_count %> times 
```

这就是我计算用户观看次数的方式。现在我想获得用户浏览次数最多的 5 篇文章。任何帮助将不胜感激。有关更多信息，我已使用（[rails 中页面视图的简单命中计数器](https://stackoverflow.com/questions/4815713/simple-hit-counter-for-page-views-in-rails)）来获取用户视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:31:54.410

我认为最好的方法是避免映射 ruby​​ 对象，是使用[计数器缓存](http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference)：

```
# add the impression count column to your tables
t.integer :articles, :impressions_count
t.integer :comments, :impressions_count 
```

在您的模型中：

```
class Article < AR
  has_many :impressions, as: :impressionable
  has_many :comments
end

class Comment < AR
  belongs_to :article
  has_many :impressions, as: :impressionable
end

class Impression < AR
  # the counter cache here is the important option
  belongs_to :impressionable, polymorphic: true, counter_cache: :impressions_count
end 
```

使用此设置，每次创建印象`impressions_count`时，相应模型中的列都会更新。因此，您可以简单地对展示次数进行排序以获得前 5 名：

```
Article.order('articles.impressions_count DESC').limit(5) 
```

分别

```
Comment.order('comments.impressions_count DESC').limit(5) 
```

当然你也可以这样做`@article.impressions_count`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:30:27.143

您是否尝试过：

```
impressions = Impression.select("impressionable_id, count(*) as qty").where("impressionable_type = ?", 'Article').group('impressionable_type, impresionable_id').order('qty desc').limit(5)
Article.joins(:impressions).where(impressions: {impresionable_id: impressions.map(&:impressionable_id)}) 
```

# javascript - 如何在必应地图信息框中创建一个按钮？

> ID：16130093
> 
> 赞同：0
> 
> 时间：2013-04-21T10:15:01.767
> 
> 标签：javascript, bing, bing-maps

正在开发基于 bing 地图的应用程序。我想在计划关联点击事件的弹出图钉信息框中显示按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:37:59.457

查看信息框的[HtmlContent](http://www.bingmapsportal.com/isdk/ajaxv7#Infobox20)属性。您可以通过此属性为信息框的内容提供自定义 HTML。至于如何关联点击事件，这将取决于您要做什么。查看 jquery 的 .live() 或其较新的等价物（我认为是 .on()），看看是否能满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T13:19:41.220

简单的方法是使用 bing 提供的功能。信息框中包含一些文本和两个按钮的示例。

```
 var infoboxOptions = {
     title:'Infobox Title',
     actions: [
          {label: 'This is a button', eventHandler: btn1Handler}, 
          {label: '<div  style = "color:green"', eventHandler: btn2Handler},]  
 }; 
```

“标题”只是信息框中的文本标题。

“动作”包含两个属性：

1.  label - 您可以在其中放置按钮的文本或一些 html 和 css。
2.  eventHandler - 回调处理按钮点击的函数。

通过它的位置和我们刚刚创建的“infoboxOptions”创建信息框本身。

```
 var defaultInfobox = new Microsoft.Maps.Infobox(Location, infoboxOptions ); 
```

将信息框添加到地图。

```
 map.entities.push(defaultInfobox); 
```

我们创建了两个单击句柄函数，正如我们在“actions”属性中提供的那样。

```
function btn1Handler() 
{ 
   //Do your stuff.
}

function btn2Handler() 
{ 
   //Do your stuff.
} 
```

# node.js - 删除变成选项？

> ID：16130095
> 
> 赞同：3
> 
> 时间：2013-04-21T10:15:06.840
> 
> 标签：node.js, rest, express, routes

此脚本（在浏览器中执行）：

```
$(function(){
    $.ajax("http://localhost:3000/rest/room/7", {
        type: "DELETE",
        success: function(data, statusText, jqXHR){
            $("p").text("complete, " + statusText + ", " + data.status + "    data=" + JSON.stringify(data) + "    jqXHR=" + JSON.stringify(jqXHR));
        },
        complete: function(data, statusText, jqXHR){
            $("p").text("complete, " + statusText + ", " + data.status + "    data=" + JSON.stringify(data) + "    jqXHR=" + JSON.stringify(jqXHR));
        }
    });
}); 
```

而这条 Express 路线定义：

```
app.delete('/rest/room/:id', function(req, res){
    res.json(JSON.stringify(findings[0]));
}); 
```

只是在浏览器中得到这个：

```
complete, error, 404 data={"readyState":4,"status":404,"statusText":"error"} jqXHR=undefined 
```

和这个控制台输出（使用 PhpStorm IDE）：

```
OPTIONS /rest/room/7 200 1ms - 4.51kb 
```

为什么“DELETE”请求会变成“OPTIONS”请求？我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T16:31:38.173

这是因为您正在尝试执行跨域`DELETE`请求。在较旧的浏览器中不支持此功能，但较新的浏览器支持[CORS](http://enable-cors.org/index.html)，只要目标服务器和浏览器都支持它，就可以轻松实现跨域请求。

在 CORS 中，服务器发送它的数据以及特殊的标头，让浏览器知道什么是允许的，什么是不允许的。在, 和requests 的情况下`GET`，它简单地期望标头与请求数据以及请求资源的页面的主机名值一起发送。`HEAD``POST``Access-Control-Allow-Origin`

在`DELETE`请求的情况下，它将首先发送一个`OPTIONS`请求以确认是否`DELETE`允许通过 CORS。在这种情况下，您需要返回第二个标头，`Access-Control-Allow-Methods`其值为`DELETE`（以及您想要支持的任何其他不在我上面列表中的方法）。

所以在你的情况下，你应该有这样的东西：

```
app.options('/rest/room/:id', function(req, res){
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'DELETE');
  res.end();
}); 
```

根据用例，您可能不需要`'*'`，而是应该列出允许访问您的 API 的实际域。

另一种选择是完全避免跨域请求。目前您正在端口 3000 上访问 Node，但 HTML 是通过（我假设是 Apache？）在端口 80 上加载的，这意味着它们是通过完全独立的服务器加载的。您可以考虑通过中介代理您的流量，以便两个请求都发送到同一台服务器。

# c# - Win32_DiskDrive 和 eSATA

> ID：16130096
> 
> 赞同：3
> 
> 时间：2013-04-21T10:15:22.637
> 
> 标签：c#, windows, visual-studio, wmi, drive

我正在尝试使用 WMI 检测可移动驱动器，目前我正在过滤`InterfaceType`以仅包含具有 USB 接口的驱动器。我想知道是否有一种方法可以检测 eSATA 驱动器，或者换句话说，该类为 eSATA 驱动器提供的接口类型是什么`Win32_DiskDrive`。

目前我手头没有 eSATA 驱动器，因此我不确定接口类型应该是什么，因为[根据 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)`InterfaceType` ，eSATA 或 SATA 未列为成员的有效值。

目前列出的值为：

```
SCSI
HDC
IDE
USB
1394 
```

所以我想知道是否有人可以在这里帮助我？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-07T08:26:08.200

很可能它会在“USB”下，或者可以使用下面的代码来找到它：

```
Dim Mq As New Management.ObjectQuery("WQL", "Select Caption,DeviceID,InterfaceType from Win32_DiskDrive ") ' you can include where InterfaceType='USB'
Dim scop As New ManagementScope("root\cimv2")
Dim MobSrchr As New ManagementObjectSearcher(scop, Mq)
Dim Disks As New List(Of String)

For Each mob As ManagementObject In MobSrchr.Get
    Dim DrivInfo As String = Nothing
    DrivInfo = "Caption : " + mob.Properties("Caption").Value + Environment.NewLine
    DrivInfo += "Device ID : " + mob.Properties("DeviceID").Value + Environment.NewLine
    DrivInfo += "InterfaceType : " + mob.Properties("InterfaceType").Value + Environment.NewLine
    Disks.Add(DrivInfo)
Next 
```

# java - 创建一个简单的AES加密和解密

> ID：16130098
> 
> 赞同：0
> 
> 时间：2013-04-21T10:15:39.263
> 
> 标签：java, android, security, aes

我正在尝试创建一个简单的加密和解密类。两种方法都给出相同的字符串。我有点困惑。请需要帮助。

这是我的代码片段：

```
public class UltimateEncryptor {

  private static final String CIPHER_ALGORITHM = "AES/CBC/PKCS5Padding";
  private static final String RANDOM_GENERATOR_ALGORITHM = "AES";

  // Encrypts string and encodes in Base64
  public String encrypt( String password, String data ) throws Exception 
  {
    byte[] secretKey = password.getBytes();
    byte[] clear = data.getBytes();

    SecretKeySpec secretKeySpec = new SecretKeySpec( secretKey, CIPHER_ALGORITHM );
    Cipher cipher = Cipher.getInstance( CIPHER_ALGORITHM );
    cipher.init( Cipher.ENCRYPT_MODE, secretKeySpec );

    byte[] encrypted = cipher.doFinal( clear );
    String encryptedString = Base64.encodeToString( encrypted, Base64.DEFAULT );

    return encryptedString;
  }

  // Decrypts string encoded in Base64
  public String decrypt( String password, String encryptedData ) throws Exception 
  {
    byte[] secretKey = password.getBytes();
    SecretKeySpec secretKeySpec = new SecretKeySpec( secretKey, CIPHER_ALGORITHM );
    Cipher cipher = Cipher.getInstance( CIPHER_ALGORITHM );
    cipher.init( Cipher.DECRYPT_MODE, secretKeySpec );

    byte[] encrypted = Base64.decode( encryptedData, Base64.DEFAULT );
    byte[] decrypted = cipher.doFinal( encrypted );

    return new String( decrypted );
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:52:45.117

您的代码有几个错误，但离工作不远了。以下是问题：

1.  你应该传递`RANDOM_GENERATOR_ALGORITHM`给你的`SecretKeySpec`构造函数，而不是`CIPHER_ALGORITHM`.

2.  您需要为加密和解密指定 IV。如果不指定 IV，解密将不起作用，因为加密将使用随机 IV，并且您的解密方法将不知道该值是什么。

    ```
    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, 
        new IvParameterSpec(/* 16 byte value */));

    cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, 
        new IvParameterSpec(/* same 16 byte value */)); 
    ```

    请注意，您必须将 IV 与密文一起存储，以便用于解密。一种常见的方法是在密文值前面加上 IV（注意：IV 不是敏感值）。每次加密时都应该使用随机 IV 值。

其他一些评论：

1.  您的方法应该是`static`因为它们不使用任何实例字段。

2.  您不应该使用密码的原始字节作为密钥。相反，您应该使用[类似 PBKDF2](https://gist.github.com/volker48/2853610)的密码从密码中派生密钥。

如果您想查看一些正确执行此操作的代码，请参阅[JNCryptor](http://code.google.com/p/jncryptor/)。这是一个与 Android 兼容的 Java 库，可以进行基于密码的加密和解密。特别是，查看源代码以查看：

*   [从密码派生密钥的示例](http://code.google.com/p/jncryptor/source/browse/trunk/jncryptor/src/main/java/org/cryptonode/jncryptor/AES256v2Cryptor.java#100)

*   [使用已知 IV 加密的示例](http://code.google.com/p/jncryptor/source/browse/trunk/jncryptor/src/main/java/org/cryptonode/jncryptor/AES256v2Cryptor.java#195)

# java - Java RGBA 缓冲图像到 GIF 缓冲图像

> ID：16130100
> 
> 赞同：2
> 
> 时间：2013-04-21T10:15:54.627
> 
> 标签：java, gif, bufferedimage, rbga

需要将 Java RGB 缓冲图像转换为 GIF 缓冲图像但颜色图大于 256 色的函数。

有人知道是否存在这样的库或自写函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:18:42.990

> ..使用大于 256 色的颜色图。

没办法。GIF***最多***支持256 种颜色。请改用 PNG。

所以回答你的具体问题..

> 有人知道是否存在这样的库或自写函数吗？

不，它不存在。

# c++ - Matlab 和 C++ 之间的 TCP/IP 通信

> ID：16130104
> 
> 赞同：2
> 
> 时间：2013-04-21T10:16:13.737
> 
> 标签：c++, matlab, tcp-ip

我在 Matlab 和 C++ 之间的 TCP/IP 通信中遇到问题。我使用 C++ 创建了一个服务器`MWinsock`，它可以从客户端发送和接收数据。在 Matlab 中（作为客户端），我创建 TCP/IP 对象，连接到服务器，并用于`fprintf`向服务器发送文本[例如，我向服务器发送文本“A005”，`fprintf(t, 'A005')`]。但是，在以 C++ 运行的服务器上，有时只会收到空文本“”或仅“05”或“A0”，有时是“A005”。所以，有没有大神能帮忙解决一下这个问题，非常感谢！

* * *

感谢您的回答，代码实际上很简单

*在 Matlab 中，使用 TCP/IP 对象：

```
t = tcpip('IPaddress', 1200); %IPaddress get from server after running 'winServer.exe' file.
fopen(t);  
fprintf(t, 'A005') 
```

*在服务器上，我使用的是 LiyangYu 开发的服务器文件（你可以从[这里](http://www.codeproject.com/Articles/7108/A-light-weighted-client-server-socket-class-in-C)下载 .exe 文件）。

如上所述，我尝试并遇到了问题，你能给出任何解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:24:21.817

[您是否真的阅读了您链接到](http://www.codeproject.com/Articles/7108/A-light-weighted-client-server-socket-class-in-C)的项目的代码和描述？您不能只选择一些随机代码并期望它起作用！

这是一个基本 TCP 聊天服务器的示例（如果你问我，编程很糟糕）。它适用于根据特定约定格式化的消息：

*   消息长度（6 个字符右对齐，用空格填充）：`sprintf('%6d',len)`
*   后跟实际的消息字符串

话虽如此，下面是一个简单的 MATLAB 客户端，用于与 C++ 聊天服务器进行交互：

```
%# helper functions to send/receive messages according to the protocol
send = @(t,msg) fwrite(t, [sprintf('%6d',length(msg)) msg], 'uint8');
recv = @(t) char(fread(t, str2double(char(fread(t,6,'uint8')')), 'uint8')');

%# connect to server
t = tcpip('127.0.0.1',1200);
fopen(t);

%# send a message
send(t,'hello there')

%# receive response and display it
m = recv(t);
fprintf('[SERVER]: %s\n', m);

%# send BYE message to disconnect from chat
send(t,'bye')

%# close socket and clear it
fclose(t);
delete(t); clear t 
```

当然，服务器`winserver.exe`必须首先在单独的控制台中运行（不要忘记在其中输入消息以响应客户端）

# ios - 按照这个目标 C 教程制作按钮时，我哪里出错了？

> ID：16130105
> 
> 赞同：0
> 
> 时间：2013-04-21T10:16:17.027
> 
> 标签：ios, xcode

我一直在关注此页面上的教程：[http](http://www.raywenderlich.com/33330/core-graphics-tutorial-glossy-buttons) ://www.raywenderlich.com/33330/core-graphics-tutorial-glossy-buttons并按照入门标题下的说明完成了所有操作。问题是，当我尝试运行该应用程序时，它给了我很多错误，说明方法未定义。这是我的源代码的链接：[https](https://dl.dropboxusercontent.com/u/4231099/CoolButton.zip) : //dl.dropboxusercontent.com/u/4231099/CoolButton.zip 有人介意看看我的源代码并告诉我这是我做错了什么还是教程? 我在这封信中遵循的教程很少真正有效，这很愚蠢。不过感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:29:12.727

我下载了你的演示项目。语法错误太多了，`IBOutlet`coolButton 没有设置。未连接滑块的事件处理程序。`strong`将所有权分配给浮点值。

如果你有一个亮度属性，你可以通过`[object setBrightness:1.0f]`或设置它`object.brightness = 1.0f`。如果它们是从同一对象本身设置的，请使用`self`而不是对象。

我已经编辑了它们并附上了一份工作副本。[编辑演示项目](https://dl.dropboxusercontent.com/u/35012982/Demo%20Projects/CoolButton_Edited.zip)。还需要完成一些工作，自己尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:31:05.987

酷按钮.h：

您不能定义 CGFloat 的属性，并说它很强大。strong 仅适用于 Obj-C 对象。

将其更改为

```
@property (nonatomic, assign)CGFloat hue; 
```

视图控制器.h

在这一行：

```
@property (nonatomic, strong)UIOutlet CoolButton;*coolButton; 
```

你有 ';' 在类型和名称之间。去掉它：

@property (nonatomic, strong)UIOutlet CoolButton *coolButton;

视图控制器.m

您在方法中定义了一个方法！

```
- (void)viewDidLoad
{
    [super viewDidLoad];
-(IBAction)hueValueChanged: (id)sender
{ 
```

您需要清理代码并重新构建它。语法错误太多...

# unity-container - Microsoft Unity 基类拦截

> ID：16130106
> 
> 赞同：0
> 
> 时间：2013-04-21T10:16:17.910
> 
> 标签：unity-container, unity-interception

我有一个应用程序，它有一个基类和派生类，每个实现类都有自己的接口。我想使用 Unity 的拦截对基类的派生类型进行异常处理。

我是拦截新手，所以我不知道所有的怪癖。据我所知，我必须在每个实现解析中注册拦截。关键是我所有的实现都有一个基类，所以我认为我可以跳过冗余并仅在基类上设置拦截，这将在每个实现类上触发。

这是我的设置：

```
public class NotificationViewModel
{
   // some properties
}

public class CompanyViewModel : NotificationViewmodel
{
   // some properties
}

public class BaseService
{
}

public interface ICompanyService
{
   public NotificationViewModel Test();
}

public class CompanyService : BaseService, ICompanyService
{
   public CompanyViewModel Test()
   {
      // call exception
   }
}

public class TestUnityContainer : UnityContainer
{
   public IUnityContainer RegisterComponents()
   {
      this
         .AddNewExtension<Interception>()
         .RegisterType<ICompanyService, CompanyService>(
            new Interceptor<InterfaceInterceptor>(),
            new InterceptionBehavior<TestInterceptionBehavior>());

      return this;
    }
}

public class TestInterceptionBehavior : IInterceptionBehavior
{
   public IEnumerable<Type> GetRequiredInterfaces()
   {
      return new[] { typeof( INotifyPropertyChanged ) };
   }

   public IMethodReturn Invoke( IMethodInvocation input, GetNextInterceptionBehaviorDelegate getNext )
   {
      IMethodReturn result = getNext()( input, getNext );

      if( result.Exception != null && result.Exception is TestException )
      {             
         object obj = Activator.CreateInstance( ( ( System.Reflection.MethodInfo )input.MethodBase ).ReturnType );
         NotificationViewModel not = ( NotificationViewModel )obj;
         // do something with view model
         result.ReturnValue = obj;
         result.Exception = null;
      }

      return result;
   }

   public bool WillExecute
   {
      get { return true; }
   }
} 
```

这工作正常，但我想有这样的东西`TestUnityContainer`

```
public class TestUnityContainer : UnityContainer
{
   public IUnityContainer RegisterComponents()
   {
      this
         .AddNewExtension<Interception>()
         .RegisterType<BaseService>(
            new Interceptor<InterfaceInterceptor>(),
            new InterceptionBehavior<TestInterceptionBehavior>() );
         .RegisterType<ICompanyService, CompanyService>();

      return this;
    }
} 
```

我将有更多从基础服务继承的服务类，我认为这会为我节省很多时间，因为它们都有相同的拦截行为。

这在 Unity 中是否可行？如何实现？如果需要对模型进行一些小的修正，我愿意接受，只要它们是次要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:25:13.900

我建议您查看 Unity 中的策略注入，而不是手动对类型应用行为。有了政策，您必须：-

1.  创建一个实现 ICallHandler 的类（基本上是简化的 IInterceptionBehavior）——这将是您的异常处理程序行为。
2.  创建一个具有“匹配规则”的策略 - 在您的情况下，一个将您的 CallHandler 用于实现 BaseService 或类似的任何注册类型的策略。
3.  您仍然需要将所有服务注册到 Unity 中，但现在传入 Interceptor 和 InterceptionBehavior。如果你有很多服务，我建议你看看我的[Unity Automapper 之](http://www.youtube.com/watch?v=Bkc9kEq4CD0)类的东西，它可以简化注册和处理拦截行为。

# node.js - 工头在 Node.js 中启动时出错

> ID：16130107
> 
> 赞同：1
> 
> 时间：2013-04-21T10:16:31.650
> 
> 标签：node.js, mongodb, heroku, express, foreman

如果我尝试启动工头，则会收到以下消息。我不确定我应该做些什么来解决。我猜它与快递相关的错误，但仍然非常感谢解决此错误的任何帮助！

```
2013-04-21T10:39:54.622588+00:00 heroku[api]: Deploy fc0f862 by suchak.maulik179@gmail.com
2013-04-21T10:39:54.695655+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-21T10:39:54.972645+00:00 heroku[slugc]: Slug compilation finished
2013-04-21T10:39:55.470897+00:00 heroku[web.1]: Starting process with command `node server/server.js`
2013-04-21T10:39:56.617617+00:00 app[web.1]: 
2013-04-21T10:39:56.618147+00:00 app[web.1]:     server = module.exports = express();
2013-04-21T10:39:56.617811+00:00 app[web.1]: /app/server/server.js:7
2013-04-21T10:39:56.618147+00:00 app[web.1]:                               ^
2013-04-21T10:39:56.621350+00:00 app[web.1]: TypeError: object is not a function
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at process.startup.processNextTick.process._tickCallback (node.js:244:9)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Module.runMain (module.js:492:10)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-04-21T10:39:56.621350+00:00 app[web.1]:     at Object.<anonymous> (/app/server/server.js:7:31)
2013-04-21T10:39:57.852895+00:00 heroku[web.1]: Process exited with status 1
2013-04-21T10:39:57.867532+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-21T10:40:37.078893+00:00 heroku[api]: Scale to web=1 by suchak.maulik179@gmail.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:38:13.750

当您的代码需要 Express 版本 3.x 但您的 Express 模块是版本 2.x 时，您会收到该错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:30:16.790

我认为您的项目取决于[express](https://npmjs.org/package/express)。

确保您已在该行之前`express`安装并加载`express`模块`express()`。

```
var express = require('express'),
    server = module.exports = express(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:58:00.120

您能否检查一下是否在代码的 package.json 文件中添加了 express 依赖项？

```
"dependencies": {
    "express": "3.1.x"
}, 
```

Heroku 使用此文件将依赖包安装到服务器中。3.x 指的是 express 的版本。如果它已经存在，那么请检查您是否为您的项目添加了正确的版本。

# c# - 请在 Windows 窗体计算器中提供帮助

> ID：16130110
> 
> 赞同：-4
> 
> 时间：2013-04-21T10:16:47.887
> 
> 标签：c#

我是初学者，我用 C#（Windows 窗体）制作了计算器，只出现一个问题，所以请帮助我。

问题是当我划分 0 / 0 = 然后我的代码在这一行崩溃

```
m_res /= decimal.Parse(m_store[i + 1].ToString());

else if (m_store[i].ToString() == "/")
{
    //Textbox.Text = "";
    m_res /= decimal.Parse(m_store[i + 1].ToString());
    TextBox2.Text = m_res.ToString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:21:08.360

你可能想要的是

```
decimal div;
decimal.TryParse(m_store[i + 1].ToString(), out div);
if(div != null && div != 0)
   m_res /= div; 
```

它的基本数学定义了任何东西都不能被0除

**编辑**：未对此进行测试，但我认为它会起作用并且效率更高

```
decimal div;
if(decimal.TryParse(m_store[i + 1].ToString(), out div) && div != 0)
   m_res /= div; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:28:06.943

问题是你永远不能除以零。

尝试类似：

```
decimal d = decimal.Parse(m_store[i + 1].ToString());
if (d.Equals(0))
    MessageBox("Cannot divide by zero");
else
    mres /= d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:22:12.600

小费：

> 为避免除以零异常，您显然必须根据零值检查分母。

和：

> 这种数字检查将比在运行时抛出异常快得多。

# php - 查看上次访问目录 php 的日期

> ID：16130116
> 
> 赞同：4
> 
> 时间：2013-04-21T10:17:09.567
> 
> 标签：php

我想知道是否可以使用 PHP 来查看上次访问文件夹的时间。我正在考虑在 php 中使用“touch()”，但这更多的是用于文件，不是吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T10:21:01.363

据我所知，此信息仅存储有关文件的信息（根据其他人的说法，这是错误的，它适用于目录 - 请参阅 Dinesh 的回答）。但是，您可以遍历目录中的每个文件并发现目录中最近访问的文件（不完全是您想要的，但可能尽可能接近）。使用`DirectoryIterator`：

```
<?php
$iterator = new DirectoryIterator(dirname(__FILE__));
$accessed = 0;
foreach ($iterator as $fileinfo) {
    if ($fileinfo->isFile()) {
        if ($fileinfo->getATime() > $accessed) {
            $accessed = $fileinfo->getAtime();
        }
    }
}
print($accessed);
?> 
```

[http://php.net/manual/en/directoryiterator.getatime.php](http://php.net/manual/en/directoryiterator.getatime.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T10:25:09.133

您可以使用[`fileatime()`](http://php.net/fileatime)，它适用于文件和目录：

```
fileatime('dir'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T10:21:54.040

你可以使用[统计](http://php.net/manual/en/function.stat.php)功能

```
$stat = stat('path to directory');
echo 'Accesstime: ' . $stat['atime']; // will show access unix time stamp. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T10:24:29.050

我会打开文件夹并循环浏览文件（您可以使用`glob()`它）并使用`filemtime()`.

[http://php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)

[http://www.php.net/manual/en/function.glob.php](http://www.php.net/manual/en/function.glob.php)

如果您仍然需要帮助，我可以发布一个小示例

# c++ - Ostringstream 不同的结果

> ID：16130126
> 
> 赞同：0
> 
> 时间：2013-04-21T10:18:12.757
> 
> 标签：c++

我的代码有一些问题，因为它输出了两个不同的结果。

编码：

```
void output(int x){

for( int i = 0; i <=x; i++){

std::ostringstream ss;

std::string result;

ss << std::setw(5) << std::left <<  "Hi" << ' ' << "There " << i << "\n";

std::vector<char> s(result.c_str(), result.c_str() + result.size() + 1u);

result +=ss.str();

std::cout << result;

}

} 
```

**输出：**

你好 0

你好 1

你好 2

你好 3

可以这样称呼它：**output(3);** ，但是当我试图在一个类中定义它们并使用它时

在函数内部，事情开始变得非常奇怪。我现在使用的代码是：

```
class myclass{

public:

std::ostringstream ss;

std::string result;

}v;

 void output(int x){

for( int i = 0; i <=x; i++){

v.ss << std::setw(5) << std::left <<  "Hi" << ' ' << "There " << i << "\n";

std::vector<char> s(v.result.c_str(), v.result.c_str() + v.result.size() + 1u);

v.result +=v.ss.str();

std::cout << v.result;

}

} 
```

**它输出：**

你好 0

你好 0

你好 0

你好 1

你好 0

你好 0

你好 1

你好 0

你好 1

你好 2

你好 0

你好 0

你好 1

你好 0

你好 1

你好 2

你好 0

你好 1

你好 2

你好 3

那是错误的，我怎样才能在一个类中定义它们并获得与第一个示例相同的输出？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:21:20.253

在第一个示例中，您的字符串流是循环本地的。这意味着它在每次迭代时都会被破坏并再次创建。

但是在第二个示例中，这不会发生，因为流属于类对象 v。并且它的生命周期与生命周期一样长`v`。这意味着它将在每次迭代中继续存储所有内容。

要获得相同的结果，请执行此操作

```
v.result +=v.ss.str();
std::cout << v.result;
v.ss.str("");       // This will clear the string stream of v.
v.result = "";      // This will clear the string of v. 
```

但是，我不确定您要达到的目标是什么，因为这样做似乎毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T10:23:03.180

在函数内部，您每次都会得到一个新的空字符串和字符串流。当存储在类中时，它们被重用并累积输出。

没有什么能阻止您在成员函数中使用局部变量并获得与自由函数中相同的功能。

# redis - Redis 和 Faye 中的分层 Pub/Sub 和推送通知

> ID：16130128
> 
> 赞同：3
> 
> 时间：2013-04-21T10:18:24.367
> 
> 标签：redis, publish-subscribe, faye

我一直在使用 Redis 和 Faye 来构建我正在构建的系统。我仍然不确定它们是否是我特定应用的最佳选择。

**我的目标**

每个用户都可以向频道/主题发布消息，并从他订阅的主题接收消息。主题必须具有层次结构（即主题“B”是主题“A”的子主题，因此主题之间存在“A->B”关系）。如果用户订阅了一个子主题，他只会接收来自该主题的消息（他在“A->B”中订阅了“B”，并且只在“B”中接收消息）。如果用户订阅了主主题，他会收到来自子主题的所有消息（他订阅了“A”并接收“B”和“A”的其他子主题的消息）。

用户应该使用推送通知（Android/Apple）在他们的手机上接收通知。

**我试图做的**

我试图通过将消息发布到层次结构的所有通道来模拟层次结构。假设我们有这样的层次结构：“A->B->C”“A->B->D”，所以 B 有两个子主题。

发布到 C 意味着，对于发布者来说，将消息发送到通道“A”、“B”和“C”。发布到 D 对发布者来说意味着向通道“A”、“B”和“D”发送消息。

**问题**

使用 Redis 支持的 Faye 或仅使用 Redis 有没有更好的方法来做到这一点？如果这是最好的方法，它如何随着发布者/订阅者和主题数量的增加而扩展？如何通过移动推送API实现流更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T11:37:05.123

您应该考虑 redis 中的 PSUBSCRIBE 命令。

使用 PSUBSCRIBE 客户端订阅模式而不是单个键。

您可以轻松地在键命名中对层次结构进行编码（假设您有主题：A：B：C），当客户端订阅主题：A：*时，它将接收发布在主题：A：B和主题：A：B上的消息：C

# c# - 当我只返回 IEnumerable 时，IEnumerable 可能有多个枚举？

> ID：16130132
> 
> 赞同：0
> 
> 时间：2013-04-21T10:18:55.700
> 
> 标签：c#, resharper

ReSharper 在此代码上说“IEnumerable 的可能多重枚举”：

```
public static IEnumerable<T> Each<T>(this IEnumerable<T> @this, Action<T> action)
{
    foreach (var i in @this)
        action(i);

    return @this;
} 
```

但我只是返回`@this`，我没有对它做任何其他事情......它是否警告我一旦函数返回，可能会进行额外的枚举，或者我在这里遗漏了一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:00:48.860

> 但我只是返回@this，我不做任何其他事情......

是的，但调用者可能还会枚举它......

无论如何，像您在答案中所做的那样使用迭代器块会更好，因为：

*   它避免了多次枚举
*   它保持延迟执行（即在您开始枚举 的结果之前不会枚举源序列`Each`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:33:33.830

这避免了警告，我认为它更有效：

```
public static IEnumerable<T> Each<T>(this IEnumerable<T> @this, Action<T> action)
{
    foreach (var i in @this)
    {
        action(i);
        yield return i;
    }
} 
```

有人可以验证它确实更有效（不枚举两次？）？

# jquery - 选择选择器在特定元素类中找到的元素

> ID：16130135
> 
> 赞同：0
> 
> 时间：2013-04-21T10:19:33.950
> 
> 标签：jquery

我有以下 div 标签结构，每个 div 标签都有多个类，例如：-

```
<div>

     <div class="jsh-a_train_hotel_amsterdam info js-multiple"></div>

     <div class="jsh-info info js-multiple"></div>

     <div class="jsh-myinfo info js-single"></div>

</div> 
```

现在我想找到类名以“jsh-”开头的div标签，并且以“jsh-”开头的类应该有一个子字符串“info”。

所以结果应该如下： -

```
<div class="jsh-info info js-multiple"></div>
<div class="jsh-myinfo info js-single"></div> 
```

（原因：因为上面2个div标签有jsh-info和jsh-myinfo这两个类，满足元素类名应该有“jsh-”并且“jsh-”类名值中的子串应该有字符串“info “ 在里面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:36:31.377

尝试这个

```
var elems = $('div[class^="jsh"]').filter(function(){
    return $(this).attr('class').match(/jsh[^ ]info/)
}); 
```

或者更好地使用以下属性值 `jsh-info`中的任何位置`class`

```
var elems = $('div[class*="jsh"]').filter(function(){
    return $(this).attr('class').match(/\s*jsh[^ ]info/)
}); 
```

## 更新

您不需要对里面的元素应用任何 jquery 函数，也不需要`filter()`将 DOM 元素转换为 jQuery 对象。所以你可以使用

```
return this.className.match(/\s*jsh[^ ]*info/) 
```

代替

```
return $(this).attr('class').match(/\s*jsh[^ ]info/) 
```

## 更新 2

如果您不想硬编码`info`并想用变量替换它，您可以执行以下操作

```
var theVar = 'info';
$('div[class*="jsh"]').filter(function () {
    return this.className.match(new RegExp('jsh[^ ]*' + theVar, 'gi'))
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:25:14.600

尝试类似`$('div[class^="jsh-"]').filter('div[class*="info"]')` 第一个选择器是`start with`第二个是`contains`。

# asp.net-mvc - 将文件上传到 Amazon S3 引发异常

> ID：16130136
> 
> 赞同：0
> 
> 时间：2013-04-21T10:19:38.997
> 
> 标签：asp.net-mvc, amazon-web-services, amazon-s3, stream

我正在使用 Amazon .net sdk 将文件作为流上传到 S3，我得到“**在写入所有字节之前无法关闭流**”。上传异常。我的代码：

```
public void Upload(Stream fileStream, string path)
    {
            TransferUtility transferUtility = new TransferUtility(Client);
            transferUtility.S3Client.PutBucket(new PutBucketRequest() { UseClientRegion = true }.WithBucketName("bucket"));
            TransferUtilityUploadRequest request = new TransferUtilityUploadRequest()
            .WithBucketName("bucket")
            .WithKey("key")
            .WithTimeout(100 * 60 * 60 * 1000)
            .WithPartSize(10 * 1024 * 1024)
            .WithAutoCloseStream(true)
            .WithCannedACL(S3CannedACL.PublicReadWrite)
            .WithInputStream(fileStream) as TransferUtilityUploadRequest;

            transferUtility.Upload(request);
    } 
```

注意：我尝试使用只有 BucketName 和 Key 的基本配置，并添加了超时、partsize ..etc 但没有任何改变。

# sql-server - 选择包含包含的每一行

> ID：16130144
> 
> 赞同：0
> 
> 时间：2013-04-21T10:20:53.967
> 
> 标签：sql-server, tsql, freetext

我有一个基于某些过滤器返回表的函数。其中一个过滤器是可以为 null 的标题 过滤表时可以进行以下查询：

```
DECLARE @DocumentTitle VARCHAR(150)
SET @DocumentTitle = NULL
SELECT * 
FROM [table]
    WHERE   
    FREETEXT([Title], @DocumentTitle) 
```

这意味着用户不想过滤标题。所以我应该设置`@DocumentTitle`一个返回所有内容的值。

那价值是什么？

（我已经尝试过使用 ' *'、'""'、'"* "'、' '、''）。

或者

我怎样才能使这项工作？

```
(@DocumentTitle IS NOT NULL AND FREETEXT([Title], @DocumentTitle)) 
```

因为@DocumentTitle 为空，但它更接近自由文本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:12:34.403

您可以扩展 where 条件，执行以下操作以使其工作：

```
DECLARE @DocumentTitle VARCHAR(150)
SET @DocumentTitle = NULL
SELECT * 
FROM [table]
WHERE 
    FREETEXT([Title], @DocumentTitle)
        OR
    @DocumentTitle IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:55:03.757

解决方案：

```
declare    @Search nvarchar(1000) = NULL --'test'
set    @Search = ISNULL(@Search , '""')

--if @Search is null returns everything
select    *
from    TestTabel
where    contains(Column, @Search ) OR @Search = '""' 
```

# python - 如何从用 django 的 NamedTemporaryFile 编写的 urllib2.read() 获取标头？

> ID：16130154
> 
> 赞同：1
> 
> 时间：2013-04-21T10:21:29.743
> 
> 标签：python, django, urllib2

我试图使用 django 的 NamedTemporaryFile 来存储来自 urllib 的实例。这里有一些代码。

```
import urllib2
import types

from django.core.files.temp import NamedTemporaryFile    
img_temp = NamedTemporaryFile()
img_temp = urllib2.urlopen('http://www.python.org/images/python-logo.gif').read()
img_temp.write(img_temp) 
```

如何从 img_temp 获取标题？img_temp 变量是一个字符串。这两个代码有什么区别？为什么他们返回不同的类型？

```
a = urllib2.urlopen('http://www.python.org/images/python-logo.gif')
a.read()
b = urllib2.urlopen('http://www.python.org/images/python-logo.gif').read()

print 'a %s'% type(a)
print 'b %s'% type(b) 
```

结果：

```
a <type 'instance'>
b <type 'str'> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:28:22.237

要获取标题信息，您可以使用`.info`

```
a = urllib2.urlopen('http://www.python.org/images/python-logo.gif')
print a.info() 
```

如[文档](http://docs.python.org/2/library/urllib2.html)中所述：

> info() — 以 mimetools.Message 实例的形式返回页面的元信息，例如标题（请参阅 HTTP 标题快速参考）

`urllib2.urlopen`返回文件之类的对象，这就是为什么`type(a)`，`instance`但是当您这样做`a = a.read()`时，实际上是在获取 url 的内容，并且您正在覆盖同一个变量，这就是为什么 now `type(a)`is `str`。

# javascript - Phonegap 2.5.0 地理定位不适用于 android 4.0.4

> ID：16130155
> 
> 赞同：5
> 
> 时间：2013-04-21T10:21:35.097
> 
> 标签：javascript, android, html, cordova, geolocation

我正在使用我的 android 4.0.4 设备尝试地理定位 phonegap（2.5 版）API，但我什么也没得到。我正在使用 phonegap 文档中的代码。根据他们的说法，“如果 GPS 和 wifi 被禁用，它应该使用***蜂窝塔三角测量***来定位你”，但这段代码对我没有任何帮助。当我连接到 wifi 时，它给了我完美的位置，但是当没有互联网时，它就无法工作。我成功使用了所有其他 phonegap API，但只有地理定位 API 给我带来了问题。请帮我解决这个问题。

还有一个疑问，如果它看起来很有趣，请原谅我......我在我的手机中使用wifi连接并且从未连接到其他服务（2G，3G等），使用wifi查找位置是否意味着只有wifi互联网或者它也包括2g和 3g 连接？

提前致谢

```
 <!DOCTYPE html>
       <html>
      <head>
    <title>Device Properties Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                            'Longitude: '          + position.coords.longitude             + '<br />' +
                            'Altitude: '           + position.coords.altitude              + '<br />' +
                            'Accuracy: '           + position.coords.accuracy              + '<br />' +
                            'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                            'Heading: '            + position.coords.heading               + '<br />' +
                            'Speed: '              + position.coords.speed                 + '<br />' +
                            'Timestamp: '          +                                   position.timestamp          + '<br />';
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');
    }

    </script>
  </head>
  <body>
    <p id="geolocation">Finding geolocation...</p>
  </body>
</html> 
```

知道一件事..它不适用于 2g 和 3g.. 仅适用于 WIFI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:35:10.803

我遇到了同样的问题，起初我认为这可能与PhoneGap或Android有关（可能是兼容性问题或其他问题）。但后来，我发现我在PhoneGap 资产（HTML、CSS、JS）`config.xml`的根文件夹（以及 ）中丢失了一个文件。`index.html`

然后我创建了一个`config.xml`文件并放置了所有必要的权限、功能等，问题就解决了。

您可能想看看 config.xml 文件： [http ://bit.ly/gap-config](http://bit.ly/gap-config)

第 25 行有 Geolocation API 的权限。

如果您缺少此`config.xml`文件，我建议您从上面的 URL 中浏览该文件，并填写/删除应用程序正常工作所需的信息。

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T21:45:06.957

我知道这是一个旧帖子..但你可以尝试替换..

```
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script> 
```

和

```
<script type="text/javascript" charset="utf-8" src="cordova.js"></script> 
```

为我工作=D

# java - 使用重定向输入启动一个类

> ID：16130162
> 
> 赞同：1
> 
> 时间：2013-04-21T10:22:27.840
> 
> 标签：java, multithreading, redirect, process, stdout

我需要在不触及原始应用程序的情况下重新格式化 Java 应用程序的命令行日志记录。我有所有的代码，所以我已经导入到我的项目中。我想做的是找出一种方法来创建一个新的 Process() 或 Thread() 并将 STDOUT 和 STDIN 从该线程重定向到 BufferedReader 和 BufferedWriter。

我想制作一个将启动新进程（MyApp.Main（args））的包装器。我只是不知道该怎么做，因为它在罐子里。ProcessBuilder 想要启动一个文件。有什么方法可以将 System.In 和 System.Out 从线程中隔离出来？

我认为找出一种启动线程并从中获取 System.Out/System.In 的方法是最干净的。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:52:20.777

我为此投入了 10 个小时的坚实时间……这就是我想出的……管道流是我需要的

```
 int BUFFER = 4096;
    PipedOutputStream toAppPipedOutputStream;
    PipedInputStream toAppPipedInputStream;

    static BufferedReader fromAppBufferedReaderfinal;
    BufferedOutputStream fromAppOutputStream;
    PipedOutputStream fromAppPipedOutputStream;
    PipedInputStream fromAppPipedInputStream;

    /* constructor sets up logging and parameters */

           try { 
                fromAppPipedInputStream = new PipedInputStream(BUFFER);
                fromAppOutputStream=new BufferedOutputStream(new PipedOutputStream(fromAppPipedInputStream));
                fromAppBufferedReaderfinal=new BufferedReader(new InputStreamReader(fromAppPipedInputStream));
                CASUAL.Log.out = new PrintStream(fromAppOutputStream);

                toAppPipedInputStream = new PipedInputStream(BUFFER);
                toAppPipedOutputStream=new PipedOutputStream(toAppPipedInputStream);
                CASUAL.CASUALInteraction.in= new BufferedReader(new InputStreamReader(toAppPipedInputStream)); 
```

在我的日志和输出类中，默认情况下，我正在写入指向 System.in 的缓冲读取器/写入器。我可以劫持它，因为它是一个公共静态，这是可能的。现在我可以读取和写入我的应用程序，就好像它在我自己的应用程序内的命令行上运行一样

# oracle - 如何在包内声明公共和私有项目？

> ID：16130165
> 
> 赞同：1
> 
> 时间：2013-04-21T10:22:51.477
> 
> 标签：oracle, plsql, package

谁能解释一下`public items inside the package`和之间的区别`private items inside package`？

这是什么类型的减速：

```
create or replace package BOOK_MANAGEMENT
as
 function OVERDUE_CHARGES(aName IN VARCHAR2) return NUMBER;
 procedure NEW_BOOK (aTitle IN VARCHAR2,
   aPublisher IN VARCHAR2, aCategoryName IN VARCHAR2);
end BOOK_MANAGEMENT; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T10:40:36.437

**包中的公共和私人项目**

Public 是一个关键字，表示可以在包外访问该特定项目。

私有意味着该项目将仅在包内部使用。

例子

```
create or replace package BOOK_MANAGEMENT
as
 function OVERDUE_CHARGES(aName IN VARCHAR2) return NUMBER;
 procedure NEW_BOOK (aTitle IN VARCHAR2,
  aPublisher IN VARCHAR2, aCategoryName IN VARCHAR2);
 end BOOK_MANAGEMENT; 
```

现在这里的程序和功能是公开的，可供外界访问。

但是现在以身体为例

```
CREATE PACKAGE BODY BOOK_MANAGEMENT AS
   number_of_books INT;  /*<-- visible only in this package*/
/*Rest of body blah blah blah*/
END BOOK_MANAGEMENT; 
```

请注意，上面的书籍数量是私人的，不会向用户显示。但是（假设是）有必要实现这些方法

同样，您也可以拥有私有功能

**如何公开 number_of_books**

```
 create or replace package BOOK_MANAGEMENT
as
   number_of_books INT;/*Now its public*/
 function OVERDUE_CHARGES(aName IN VARCHAR2) return NUMBER;
 procedure NEW_BOOK (aTitle IN VARCHAR2,
  aPublisher IN VARCHAR2, aCategoryName IN VARCHAR2);
 end BOOK_MANAGEMENT; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-23T17:06:07.350

注意 - 包中的内联函数不能是“私有的”，因为它们的定义必须在包头中才能确定它们的“纯度”。您不能在包正文中发出 PRAGMA RESTRICT REFERENCES。我认为这是一个错误（使用 Oracle 11.2.0.4）。

# java - Maven 从 Netbeans 运行子模块

> ID：16130178
> 
> 赞同：0
> 
> 时间：2013-04-21T10:24:48.227
> 
> 标签：java, maven, netbeans, exec-maven-plugin

我想用 Maven 构建一个应用程序。目前我有以下设置：

*   两个项目；项目 A 和项目 B。
*   项目 B 依赖于 A（在 pom 中有依赖标签）。
*   主类在项目 B 中。

我已将所有内容都包含在 Netbeans 中。现在，当我在项目 A 中更改某些内容时，我只想点击运行按钮，它应该编译所需的所有内容并启动 proectB 中的主要方法。

我尝试使用父项目并将其用作 Netbeans 中的主项目：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.masr</groupId>
    <artifactId>parent</artifactId>
    <packaging>pom</packaging>
    <version>0.1-SNAPSHOT</version>

    <modules>
        <module>ProjectA</module>
        <module>ProjectB</module>
    </modules>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>com.projectB.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

Reactor 插件现在检查项目中的更改并在需要时编译它们。但是 exec-maven-plugin 在这里不起作用，必须放在项目 B 中。但是当我这样做时，我需要再次运行项目 B。

如果我将项目 B 设置为主项目并点击运行按钮，Netbeans 不会意识到它需要重新编译项目 A，如果有更改。

我怎样才能使这项工作？

# google-app-engine - GAE Python - GAEUtilities - 缓存错误

> ID：16130180
> 
> 赞同：0
> 
> 时间：2013-04-21T10:25:04.660
> 
> 标签：google-app-engine, cookies

我正在 Google App Engine 上运行一个应用程序，并使用 GAE Utilities ( [http://gaeutilities.appspot.com/](http://gaeutilities.appspot.com/) ) 设置一个 cookie，该 cookie 保存用户访问的唯一 ID。尽管在我测试它时它似乎工作正常，但我的 GAE 日志几乎在每次页面访问时都会出现错误。我得到的错误如下：

```
2013-04-21 12:00:28.568 /go/social/ag1zfnNwYXJrb21wYXNzch4LEgZDb3Vwb24iEmFmZmlsaW5ldDU3MjkyODgxMAw?src=TWT 200 658ms 1kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_6) AppleWebKit/534.24 (KHTML, like Gecko) Contact: feedback@getprismatic.com
184.73.14.223 - - [21/Apr/2013:03:00:28 -0700] "GET /go/social/ag1zfnNwYXJrb21wYXNzch4LEgZDb3Vwb24iEmFmZmlsaW5ldDU3MjkyODgxMAw?src=TWT HTTP/1.1" 200 1573 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_6) AppleWebKit/534.24 (KHTML, like Gecko) Contact: feedback@getprismatic.com" "www.gutscheinalm.at" ms=659 cpu_ms=129 cpm_usd=0.000176 app_engine_release=1.7.7 instance=00c61b117c8b8fef32a0647ddfb82622596338
E 2013-04-21 12:00:28.566
Expires: Tue, 03 Jul 2001 06:00:00 GMTLast-Modified: Sun, 21 Apr 13 10:00:27 UTCCache-Control: no-store, no-cache, must-revalidate, max-age=0Cache-Control: post-check=0, pre-check=0Pragma: no-cache
E 2013-04-21 12:00:28.566
Set-Cookie: gaeutilities_session=ag1zfnNwYXJrb21wYXNzciMLEhtfQXBwRW5naW5lVXRpbGl0aWVzX1Nlc3Npb24Yp8kcDA_0b46176b54a9aa056a2af1b140ce9af1; expires=Sun, 21-Apr-2013 12:00:28 GMT; Path=/ 
E 2013-04-21 12:00:28.566
Set-Cookie: gaeutilities_session_data=; expires=Sun, 21-Apr-2013 12:00:28 GMT
E 2013-04-21 12:00:28.566
Expires: Tue, 03 Jul 2001 06:00:00 GMTLast-Modified: Sun, 21 Apr 13 10:00:28 UTCCache-Control: no-store, no-cache, must-revalidate, max-age=0Cache-Control: post-check=0, pre-check=0Pragma: no-cache 
```

任何人都可以就导致此错误的原因以及可能的解决方法给我一些指示吗？非常感谢！

**更新 1**

我确定了调用它的代码，它位于 Sessions.py 第 523 行。目的是确保页面没有缓存在浏览器中。我注意到另一部分代码也使用“打印”命令，也将输入注册为错误。这是正常行为吗？

```
def no_cache_headers(self):
    """
    Generates headers to avoid any page caching in the browser.
    Useful for highly dynamic sites.

    Returns a unicode string of headers.
    """
    return u"".join([u"Expires: Tue, 03 Jul 2001 06:00:00 GMT",
        strftime("Last-Modified: %a, %d %b %y %H:%M:%S %Z").decode("utf-8"),
        u"Cache-Control: no-store, no-cache, must-revalidate, max-age=0",
        u"Cache-Control: post-check=0, pre-check=0",
        u"Pragma: no-cache",
    ])

# make sure the page is not cached in the browser
print self.no_cache_headers() 
```

# ruby-on-rails - 如何使用另一个类的方法？

> ID：16130185
> 
> 赞同：0
> 
> 时间：2013-04-21T10:25:22.633
> 
> 标签：ruby-on-rails, ruby

```
class Customers < ActiveRecord::Base
  def check_user_name
    ...
    mailto = Emailer.new
    mailto.contact(email, subject='ask', question)
  end
end

class Emailer < ActionMailer::Base
  def contact(email, subject, question, sent_at = Time.now)
  ...
  end
end 
```

**控制器**：

```
class CustomersController < ApplicationController  
  def ask    
  end

  def check_user    
    cust = Customers.new
    @answer = cust.check_user_name(params[:name], params[:email], params[:question])    
  end

end 
```

有这个错误：

> 客户控制器中的 NoMethodError#check_user

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:36:31.273

您正在方法中传递参数，并且您在模型中定义的方法没有参数接受。您应该执行以下操作：

```
class Customers < ActiveRecord::Base
  def check_user_name(name,email,question)
    mailto = Emailer.new
    mailto.contact(email, subject='ask', question)
  end
end

class Emailer < ActionMailer::Base
  def contact(email, subject, question, sent_at = Time.now)
  end
end 
```

希望上面能给你一些想法并帮助你。

# iphone - How can I protect data using iOS on-disk encryption when the user passcode lock has not been enabled?

> ID：16130186
> 
> 赞同：7
> 
> 时间：2013-04-21T10:25:41.320
> 
> 标签：iphone, ios, security, encryption

## Question

How can I ensure data is encrypted when using NSData.writeToFile:options:error: with the **NSDataWritingFileProtectionComplete**?

## Background research: Enabling data encyption

According to Apple documentation:

> Data protection is available on most iOS devices and is subject to the following requirements:
> 
> *   The file system on the user’s device must support data protection. This is true for newer devices, but for some earlier devices, the user might have to reformat the device’s disk and restore any content from a backup.
>     
>     
> *   **The user must have an active passcode lock set for the device.**

[https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW11](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW11)

The requirements state that user **must** activate passcode lock for the device, this is reinforced by the following end user documentation:

Enable data protection by configuring a passcode for your device:

1.  Tap Settings > General > Passcode.
2.  Follow the prompts to create a passcode.
3.  After the passcode is set, scroll down to the bottom of the screen and verify that the text "Data protection is enabled" is visible.

![Passcode lock screen](https://i.stack.imgur.com/DSsEP.png)

[http://support.apple.com/kb/HT4175](http://support.apple.com/kb/HT4175)

### Similar SO Questions:

[How can I find out if the iPhone user currently has a passcode set and encryption enabled?](https://stackoverflow.com/questions/3806455/how-can-i-find-out-if-the-iphone-user-currently-has-a-passcode-set-and-encryptio) seems like the answer to this question is no longer valid.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T17:38:28.690

> The requirements state that user must activate passcode lock for the device, this is reinforced by the following end user documentation.

If user doesn't have any passcode enabled the encryption would be useless. The unwanted user can use the app directly then anyway.

* * *

A solution for your problem would be to manually implement encryption for app data and use a app specific password which you ask the user on every app launch.

*I've seen that system at an online banking software for iOS, but I wouldn't recommend that system since it is very annoying for the user.*

# javascript - 在同一页面中添加 3 次 jquery 图像旋转器（每次使用不同的图像）

> ID：16130188
> 
> 赞同：0
> 
> 时间：2013-04-21T10:25:51.060
> 
> 标签：javascript, jquery

我需要在我的页面上插入 3 个 jquery 图像旋转器（infinite-rotator.js）。每个将显示不同的图像，但所有画廊将具有相同的功能。

我已经完成了 3 个 div，每个 div 都有一个 ID。三个画廊工作，但不是同时工作。当第一个画廊图像结束时，会出现第二个画廊图像。当这些图像结束时，第三个画廊开始了。我需要 3 个画廊同时启动并相互独立运行。

我是初学者，所以如果有人可以帮助我，我会很感激。

HTML 代码：

```
<div id="rotating-item-wrapper">
  <img src="images/inicio_mini01_01.jpg" alt="photo of building across from our office" class="rotating-item" width="308" height="303" />
  <img src="images/inicio_mini01_02.jpg" alt="building entrance with neon backlit walls" class="rotating-item" width="308" height="303" />
</div>
<div id="rotating-item-wrapper2">
  <img src="images/inicio_mini02_01.jpg" alt="photo of building across from our office" class="rotating-item" width="308" height="303" />
  <img src="images/inicio_mini02_02.jpg" alt="building entrance with neon backlit walls" class="rotating-item" width="308" height="303" />
</div>
<div id="rotating-item-wrapper3">
  <img src="images/inicio_mini03_01.jpg" alt="photo of building across from our office" class="rotating-item" width="308" height="303" />
  <img src="images/inicio_mini03_02.jpg" alt="building entrance with neon backlit walls" class="rotating-item" width="308" height="303" />
</div>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js?ver=3.0.1'></script>
<script type='text/javascript' src='scripts/infinite-rotator.js'></script> 
```

在 JAVASCRIPT 中：

```
$(window).load(function () { //start after HTML, images have loaded

  var InfiniteRotator = {
    init: function () {
      //initial fade-in time (in milliseconds)
      var initialFadeIn = 1000;
      //interval between items (in milliseconds)
      var itemInterval = 5000;
      //cross-fade time (in milliseconds)
      var fadeTime = 2500;
      //count number of items
      var numberOfItems = $('.rotating-item').length;
      //set current item
      var currentItem = 0;
      //show first item
      $('.rotating-item').eq(currentItem).fadeIn(initialFadeIn);

      //loop through the items      
      var infiniteLoop = setInterval(function () {
        $('.rotating-item').eq(currentItem).fadeOut(fadeTime);

        if (currentItem == numberOfItems - 1) {
          currentItem = 0;
        } else {
          currentItem++;
        }
        $('.rotating-item').eq(currentItem).fadeIn(fadeTime);

      }, itemInterval);
    }
  };
  InfiniteRotator.init();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:36:45.380

将您的 JS 更改为此标记：

```
$(window).load(function () { //start after HTML, images have loaded

    var InfiniteRotator = {
        init: function ($elem) {
            //initial fade-in time (in milliseconds)
            var initialFadeIn = 1000;
            //interval between items (in milliseconds)
            var itemInterval = 5000;
            //cross-fade time (in milliseconds)
            var fadeTime = 2500;
            //count number of items
            var numberOfItems = $elem.find('.rotating-item').length;
            //set current item
            var currentItem = 0;
            //show first item
            $elem.find('.rotating-item').eq(currentItem).fadeIn(initialFadeIn);

            //loop through the items      
            var infiniteLoop = setInterval(function () {
                $elem.find('.rotating-item').eq(currentItem).fadeOut(fadeTime);

                if (currentItem == numberOfItems - 1) {
                    currentItem = 0;
                } else {
                    currentItem++;
                }
                $elem.find('.rotating-item').eq(currentItem).fadeIn(fadeTime);

            }, itemInterval);
        }
    };

    $('.rotating-item-wrapper').each(function(idx, elem){
        InfiniteRotator.init( $(elem) );
    });

}); 
```

我不是只调用`init`一次，而是使用 jQuery 函数为**类** `rotating-item-wrapper`的每次出现运行该函数。
另一个重要的技巧是将相应的元素作为属性传递给`init`函数。

```
 $('.rotating-item-wrapper').each(function(idx, elem){
        InfiniteRotator.init( $(elem) );
    }); 
```

如您所见，我还更改了函数体并替换了每个出现的：`$('.rotating-item')`以`$elem.find('.rotating-item')`区分旋转器。

此外，最好使用一个类，而不是包装器上的不同 ID（在我的示例中，我使用了 : `rotating-item-wrapper`，您也需要更改它，以使示例正常工作！）。

# c# - 如何在执行 CQL 查询时检查捕获的异常中“为什么”的值？

> ID：16130190
> 
> 赞同：1
> 
> 时间：2013-04-21T10:26:09.910
> 
> 标签：c#, exception, cassandra, cql

我已经开始使用 cassandraemon（带有 C# 的 Apache Cassandra NoSQL），我只是想知道是否有任何方法可以读取从执行 CQL 查询中捕获的异常中的“为什么”值？

当我执行以下操作时：

```
try
{
    CqlResult createResult = context.ExecuteCqlQuery(createTableCql);
}
catch (Exception exc)
{
    if (exc.Why.Contains("already existing"))
    { // Why = org.apache.cassandra.exceptions.AlreadyExistsException: Cannot add already existing column family "nameOfColumn" to keyspace "nameOfKeyspace"
    }
} 
```

我无法以任何方式访问为什么在 exc 中。

我想要做的是检查表是否已经存在。我知道我可以像这里一样检查它（[如何检查 Cassandra 表是否存在](https://stackoverflow.com/questions/16016946/how-to-check-if-a-cassandra-table-exists)），但仅限于 CQL3。此链接中描述的方式也无济于事，因为我得到了为什么值“未配置的 columnfamily schema_columnfamilies”的其他异常。

我想知道如何阅读“为什么”的一般内容，因为将来我可能在其他情况下需要它。它不只是返回某种我可以检查的 CqlResult 值，它只是抛出一个异常。

如何在执行 CQL 查询时检查捕获的异常中“为什么”的值？

问候！

PS为了避免隐藏的交叉发布：[https ://cassandraemon.codeplex.com/discussions/441028](https://cassandraemon.codeplex.com/discussions/441028)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:47:59.820

该错误告诉您您要查找的表（又名列族）不存在，但该`schema_columnfamilies`表应该始终存在，因此问题很可能是您没有指定表所在的模式（又名键空间）。

此语句假定您已指定您正在使用`system`键空间：

```
SELECT columnfamily_name 
FROM schema_columnfamilies WHERE keyspace_name='keyspaceName'; 
```

我认为您没有指定您应该使用系统密钥空间，因此请尝试将此作为您的 CQL 语句来验证表是否存在。

```
SELECT columnfamily_name
FROM system.schema_columnfamilies WHERE keyspace_name='keyspaceName'; 
```

# macos - OS X 上的 Clang 地址清理程序

> ID：16130191
> 
> 赞同：27
> 
> 时间：2013-04-21T10:26:13.683
> 
> 标签：macos, clang, sanitizer, address-sanitizer

我想在 OSX Mountain Lion 上使用 clang address sanitizer，因为 Valgrind 在这个平台上的内存检查有问题。但是当我`-fsanitize=address`在编译期间（就像我在这个页面上看到的那样： http: [//clang.llvm.org/docs/AddressSanitizer.html](http://clang.llvm.org/docs/AddressSanitizer.html)），我得到了这个错误：`clang: error: argument unused during compilation: '-fsanitize=address'`

所以，我的问题是如何在 OS X 上使用 Clang Address Sanitizer？如果我不能使用它，我可以使用什么工具？

我已经用 Xcode 下载了 clang，它是最新的。（也许这个版本没有解决它构建的消毒剂）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-17T20:57:27.897

Address Sanitizer 已作为 Xcode 7 中的新功能添加。

在您的方案中使用`Runtime Sanitization`>标志来启用该选项。`Enable Address Sanitizer`

然后 git 将显示此更改到您的`.xcscheme`文件：

```
enableAddressSanitizer = "YES" 
```

来自[Xcode 7 中的新功能](https://developer.apple.com/library/prerelease/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_7_0.html)文档：

> 地址消毒剂。Xcode 7 可以使用旨在使用地址清理程序捕获和调试内存损坏的工具来构建您的应用程序。
> 
> Objective-C 和 C 代码容易受到内存损坏问题的影响，例如堆栈和堆缓冲区溢出以及释放后使用问题。当这些内存违规发生时，您的应用程序可能会意外崩溃或显示奇怪的行为。内存损坏问题很难追踪，因为崩溃和奇怪的行为通常很难重现，而且原因可能与问题的根源相去甚远。

![启用地址清理程序](https://i.stack.imgur.com/KwKlQ.png)

> 您在构建方案中启用地址清理程序。启用后，应用程序中会内置添加的检测以立即捕获内存违规，使您能够在问题发生的地方检查问题。还提供了其他诊断信息，例如错误地址与堆上有效对象之间的关系以及分配/释放信息，可帮助您快速定位和修复问题。
> 
> 地址清理程序很有效——速度足够快，可以定期使用，也可以与交互式应用程序一起使用。它在 OS X、模拟器和 iOS 设备上受支持。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-26T10:55:44.413

Xcode 中的 AddressSanitizer 支持尚未完全成熟。请考虑使用主干 Clang（有关构建说明，请参阅[http://code.google.com/p/address-sanitizer/wiki/HowToBuild ）](http://code.google.com/p/address-sanitizer/wiki/HowToBuild)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T11:10:38.500

根据来源（特别是如果您从[Apple 的开源站点获取](http://www.opensource.apple.com)[clang-425.0.24](http://www.opensource.apple.com/source/clang/clang-425.0.24/)捆绑包，测试文件：`src/tools/clang/test/Driver/darwin-asan-nofortify.c`

```
// rdar://11496765, rdar://12417750
// -faddress-sanitizer is not currently supported.
// XFAIL: * 
```

而且，当然，使用时会出错`-faddress-sanitizer`，因此看起来在 OS X 下，您需要从更新的源代码中自己构建 clang 以获得地址清理程序。

**命令行选项**

尝试使用`-faddress-sanitizer`而不是`-fsanitize=address`. 苹果的版本似乎是基于旧版本的 CLANG，如果你运行`clang --help`，这个版本的 sanitizers 都是这种形式。

# php - 自定义帖子类型的 Wordpress 自定义字段

> ID：16130195
> 
> 赞同：0
> 
> 时间：2013-04-21T10:27:00.233
> 
> 标签：php, wordpress, custom-post-type

过去有几个人出现过这个问题，但他们的问题的解决方案对我不起作用，我已经尝试了很多！

在 Wordpress 中，我创建了 3 种自定义帖子类型。1 用于“视频”、“新闻”和“音乐”，每个都发布到自己的页面。我想添加自定义字段，例如，我可以为音乐帖子添加“艺术家”、“发行年份”、“精选”和“关于专辑”。

我已经安装了高级自定义字段，我可以向其中的每一个添加自定义字段，因此当用户单击“添加新”时，这些字段是可见的。但我遇到的问题是，当我访问页面时，这些字段的输出没有显示在网站上。

我从 single.php 文件中创建了 news.php、music.php 和 videos.php，其中包含以下内容：

```
 <?php
/**
 * Template Name: music Page
 *
 * Selectable from a dropdown menu on the edit page screen.
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">
<?php query_posts( 'post_type=music'); ?>
<?php the_meta(); ?> 
            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content',  get_post_format() ); ?>
                <?php comments_template( '', true ); ?>
            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

在functions.php中我有以下内容：

```
/*---------music Custom Post Types---------------------------------*/

function my_custom_post_music() {
    $labels = array(
        'name'               => _x( 'music', 'post type general name' ),
        'singular_name'      => _x( 'music', 'post type singular name' ),
        'add_new'            => _x( 'Add New', 'book' ),
        'add_new_item'       => __( 'Add New music' ),
        'edit_item'          => __( 'Edit music' ),
        'new_item'           => __( 'New music' ),
        'all_items'          => __( 'All music' ),
        'view_item'          => __( 'View music' ),
        'search_items'       => __( 'Search music' ),
        'not_found'          => __( 'No music found' ),
        'not_found_in_trash' => __( 'No music found in the Trash' ), 
        'parent_item_colon'  => '',
        'menu_name'          => 'Music'
    );
    $args = array(
        'labels'        => $labels,
        'description'   => 'Holds our music and music specific data',
        'public'        => true,
        'menu_position' => 15,
        'supports'      => array( 'title', 'editor', 'thumbnail', 'excerpt', 'comments' ),
        'has_archive'   => true,

    );
    register_post_type( 'music', $args );   
}
add_action( 'init', 'my_custom_post_music' );

function my_taxonomies_music() {
    $labels = array(
        'name'              => _x( 'music Categories', 'taxonomy general name' ),
        'singular_name'     => _x( 'music Category', 'taxonomy singular name' ),
        'search_items'      => __( 'Search music Categories' ),
        'all_items'         => __( 'All music Categories' ),
        'parent_item'       => __( 'Parent music Category' ),
        'parent_item_colon' => __( 'Parent music Category:' ),
        'edit_item'         => __( 'Edit music Category' ), 
        'update_item'       => __( 'Update music Category' ),
        'add_new_item'      => __( 'Add New music Category' ),
        'new_item_name'     => __( 'New music Category' ),
        'menu_name'         => __( 'music Categories' ),
    );
    $args = array(
        'labels' => $labels,
        'hierarchical' => true,
    );
    register_taxonomy( 'music_category', 'music', $args );
}
add_action( 'init', 'my_taxonomies_music', 0 );

/*---------news Custom Post Types---------------------------------*/

function my_custom_post_news() {
    $labels = array(
        'name'               => _x( 'news', 'post type general name' ),
        'singular_name'      => _x( 'news', 'post type singular name' ),
        'add_new'            => _x( 'Add New', 'book' ),
        'add_new_item'       => __( 'Add New news' ),
        'edit_item'          => __( 'Edit news' ),
        'new_item'           => __( 'New news' ),
        'all_items'          => __( 'All news' ),
        'view_item'          => __( 'View news' ),
        'search_items'       => __( 'Search news' ),
        'not_found'          => __( 'No news found' ),
        'not_found_in_trash' => __( 'No news found in the Trash' ), 
        'parent_item_colon'  => '',
        'menu_name'          => 'News'
    );
    $args = array(
        'labels'        => $labels,
        'description'   => 'Holds our news and news specific data',
        'public'        => true,
        'menu_position' => 10,
        'supports'      => array( 'title', 'editor', 'thumbnail', 'excerpt', 'comments' ),
        'has_archive'   => true,
    );
    register_post_type( 'news', $args );    
}
add_action( 'init', 'my_custom_post_news' ); 
```

有谁知道我缺少什么来完成这项工作或我需要做什么。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:06:29.383

要在循环中显示自定义字段的值，您可以使用以下代码片段：

```
<?php query_posts( 'post_type=music'); ?>
  <?php while ( have_posts() ) : the_post(); ?>
   <?php get_template_part( 'content',  get_post_format() ); ?>

   <?php $what_name_you_want=get_post_meta($post->ID,'Your Custom Field Name',true); ?>

    <?php echo $what_name_you_want; ?>// This call the value of custom field

                <?php comments_template( '', true ); ?>
            <?php endwhile; // end of the loop. ?> 
```

告诉我它是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T17:34:21.593

从 ACF 输出自定义字段数据。

```
the_field('the-field-name'); 
```

get_field('the-field-name') 用于条件 ex if (get_field('my-field'): 等。您还可以使用打印内容

```
echo get_field('the-field-name'); 
```

我会说您对 Vimeo 短代码和自定义字段的问题可能与为通过自定义字段运行而构建的插件有关。可能是它只通过 the_contents() 检查短代码。

# javascript - 如何确定元素是否可以有 html 子级？

> ID：16130197
> 
> 赞同：14
> 
> 时间：2013-04-21T10:27:19.750
> 
> 标签：javascript

只有 Internet Explorer 似乎具有元素属性：（`canHaveHtml`MSDN [，](http://msdn.microsoft.com/en-us/library/ie/ms533547%28v=vs.85%29.aspx) Dottoro [）](http://help.dottoro.com/ljwqncls.php)。除了使用带有标记名列表的正则表达式之外，我似乎在其他浏览器中找不到任何东西来模拟它。有没有办法在 Chrome、Firefox 等中确定这一点？

例如，有没有办法检查`innerHTML`财产，这是否 100% 等效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T11:11:10.537

我相信没有关于此的规范：

[http://www.w3.org/TR/domcore/#concept-node-append](http://www.w3.org/TR/domcore/#concept-node-append)

例如，在 Firefox、Chrome 和 Safari 中，您实际上*可以*向元素添加节点`<input>`，例如：

```
var input = document.createElement("input");
var div = document.createElement("div");

div.textContent = 'hello';

console.log(input.outerHTML, input.childNodes.length);

input.appendChild(div);

console.log(input.outerHTML, input.childNodes.length); 
```

他们只是没有被渲染。但在这两种情况下，它们都被视为节点的子`input`节点。在 Firefox 的情况下，`outerHTML`没有改变，只有`childNodes`长度报告 1，在 Chrome 和 Safari 的情况下，`outerHTML`从 更改`<input>`为`<input></input>`。在 Firefox 中，与 Safari 和 Chrome 相反，`innerHTML`它实际上返回子 HTML，即使它没有被渲染并且没有在`outerHTML`.

**更新**：正如@Bergi 在@MårtenWikström 回答中指出的那样，我之前所做的方法在可以包含内容的元素上效果不佳，例如`textarea`，甚至`title`，但不是HTML 内容。因此，更好的`canHaveHTML`可能是这样的：

```
// Improving the `canHaveHTML` using `canHaveChildren`,
// using the approach shown by Mårten Wikström
function canHaveChildren(node) {
  // Uses the native implementation, if any.
  // I can't test on IE, so maybe it could be worthy to never use
  // the native implementation to have a consistent and controlled
  // behaviors across browsers. In case, just remove those two lines
  if (node && node.canHaveChildren)
    return node.canHaveChildren();

  // Returns false if it's not an element type node; or if it has a end tag.
  // Use the `ownerDocument` of the `node` given in order to create
  // the node in the same document NS / type, rather than the current one,
  // useful if we works across different windows / documents.
  return node.nodeType === 1 && node.ownerDocument
      .createElement(node.tagName).outerHTML.indexOf("></") > 0;
}

function canHaveHTML(node) {
  // See comment in `canHaveChildren` about native impl.
  if (node && node.canHaveHTML)
    return node.canHaveHTML();

  // We don't bother to create a new node in memory if it
  // can't have children at all
  if (!canHaveChildren(node))
    return false;

  // Can have children, then we'll check if it can have
  // HTML children.
  node = node.ownerDocument.createElement(node.tagName);

  node.innerHTML = "<b></b>";

  // if `node` can have HTML children, then the `nodeType`
  // of the node just inserted with `innerHTML` has to be `1`
  // (otherwise will be likely `3`, a textnode).
  return node.firstChild.nodeType === 1;  
} 
```

在 Firefox、Chrome 和 Safari 中测试；这应该涵盖所有节点和所有场景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T11:20:42.140

您可以使用以下函数来确定命名元素是否有子元素。

然而，正如 ZER0 所指出的，这可能更像是 IE 的[canHaveChildren](http://msdn.microsoft.com/en-us/library/ie/ms533546%28v=vs.85%29.aspx)而不是[canHaveHtml](http://msdn.microsoft.com/en-us/library/ie/ms533547%28v=vs.85%29.aspx)的替代品，因为对于任何“假定”不为空的标签名称，它都会返回 true。

```
function canHaveHtml(tag) { 
    return document.createElement(tag).outerHTML.indexOf("></") > 0; 
} 
```

它使用了一个新创建的元素，它不能（或不应该）有内容，`outerHtml`没有结束标记。

例如：

```
document.createElement("input").outerHTML === "<input>" 
```

和

```
document.createElement("div").outerHTML === "<div></div>" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T11:28:07.450

> 除了使用带有标记名列表的正则表达式之外，我似乎在其他浏览器中找不到任何东西来模拟它。

它可能看起来并不优雅或不聪明，但创建白名单（或黑名单）是最简单、最快和最可靠的方法。您不需要正则表达式；您可以创建使用简单的结构，例如关联数组。

```
// blacklist approach

var noChildren = {
    input: true,
    meta: true,
    br: true,
    link: true,
    img: true

    // other properties here
};

function canHaveChildren(tagName) {
    tagName = tagName.toLowerCase();
    alert(noChildren[tagName] === undefined);
}

canHaveChildren("BR");
canHaveChildren("div"); 
```

演示： http: [//jsfiddle.net/FTbWa/](http://jsfiddle.net/FTbWa/)
可复用功能：[Github Gist](https://gist.github.com/Daniel-Hug/7349e15d04384c841a421b4f071f9603)

这种范式并非没有先例。它用于许多脚本库和 HTML 解析器/清理器中。例如，查看 jQuery 的源代码，您会注意到许多特定于元素的测试以及元素名称和属性名称的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T10:46:38.060

这里我假设如果元素没有 innerHTML 属性，它应该有一个 value 或一个 src 或一个 type 属性。想不出别的办法。您可以添加特定的 TagName 检查来处理以下代码无法处理的特定情况。

```
function CheckInnerHTMLSupport(oElement)
{
    var oDiv = document.createElement(oElement.tagName);
    if('canHaveHTML' in oDiv)
    {
        return oDiv.canHaveHTML;
    }
    var bSupportsInnerHTML = oDiv.type === undefined && oDiv.value === undefined && oDiv.src === undefined;
    return bSupportsInnerHTML;
} 
```

# python - 在 Python 中的变量中存储字符串中的选定部分

> ID：16130198
> 
> 赞同：0
> 
> 时间：2013-04-21T10:27:31.170
> 
> 标签：python, python-2.7, python-3.x

我有一个变量字段，其中存储了一个字符串，如下所示：

```
Field= "In Field 'fieldname':(Value1) has changed from (1) to (2)" 
```

从存储在变量字段中的这个字符串中，我想在两个不同的变量中捕获值 (1) 和 (2)，例如：

```
OldValue=1
NewValue=2 
```

有人可以在这里帮助我吗？我正在用 Python 处理这个变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:29:30.737

这会找到括号括起来的数字：

```
>>> import re
>>> Field= "In Field 'fieldname':(Value1) has changed from (1) to (2)"
>>> OldValue, NewValue = map(int, re.findall(r'\((\d+)\)', Field))
>>> OldValue
1
>>> NewValue
2 
```

您可能不仅有两个值，在这种情况下

```
vals = list(map(int, re.findall(r'\((\d+)\)', Field))) 
```

会成功的

# grails - Grails 将值添加到参数内部

> ID：16130204
> 
> 赞同：0
> 
> 时间：2013-04-21T10:28:21.947
> 
> 标签：grails, grails-2.0

你好，这是我想要做的。当用户按下链接时，它会向列表添加值或在参数中设置。例如，在第一次点击时它添加 myId=1 然后它变成 /?myId=1 然后在第二次点击其他链接时它添加 myId=25 然后它应该变成 /?myId=1&myId=25

我试过这个：

```
<g:link action="test" params="${params+['myId':'1']}"> first</g:link>
<g:link action="test" params="${params+['myId':'25']}"> second</g:link> 
```

但它只是在 /?myId=1 或 /?myId=25 之间切换，永远不会变成 /?myId=1&myId=25。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:45:58.420

那是因为您正在尝试将密钥添加`myId`到`params`. 由于它已经拥有密钥，因此值已更新。

你可以用类似的东西来分隔你的值`,`，剩下一个键。

```
<g:link action="test" params="${params.myId ? [myId: params.myId+',1'] : [myId:1]}"> first</g:link>
<g:link action="test" params="${params.myId ? [myId: params.myId+',15'] : [myId:15]}"> second</g:link> 
```

在您的控制器中，您可以将 myId 转换为列表`tokenize()`

```
println params.myId.tokenize(',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:38:16.843

已找到其他可能的解决方案。缺点是列表或集合必须有一个可以忽略的虚拟值。例如 0。

```
<g:link action="test" params="${['ids': (params.ids as Set) + 'ab' ]}"> + ab</g:link> <br>
<g:link action="test" params="${['ids' :  (params.ids as Set) + 'cd' ]}"> + cd</g:link> <br> 
```

在控制器中：

```
if(!params.ids || params.ids?.size()==1) params.ids= [0] 
```

`as Set`使用是因为不需要重复值。
我在（列表或集合）中使用虚拟值的原因是，当第一个值有两个或多个字符时，它会变成分隔的分隔。例如，如果第一次按下“+ ab”链接，它将变为 [a,b] 而不是 [ab]。然后，如果再次按下它，它就会变成 [a,b,ab]，这不是我们想要的结果。但是当它已经存在`0`时，它变成[0，ab]。稍后在控制器`0`中可以忽略。

* * *

如果需要删除一个值，可以使用：

```
<g:link action="test" params="${['ids' :  params.ids - ['ab']]}"> - ab</g:link> <br>
<g:link action="test" params="${['ids' :  params.ids - ['cd']]}"> - cd</g:link> <br> 
```

```
回答我自己的问题，以防万一像我这样的菜鸟遇到同样的问题
```

# android - 如何重叠位于另一个下方的两个视图？

> ID：16130211
> 
> 赞同：1
> 
> 时间：2013-04-21T10:29:34.777
> 
> 标签：android

我有两个`View`s 位于另一个下方，我需要稍微重叠它们的边缘，因此底部的边缘略低于顶部的边缘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:02:29.010

使用`marginTop` 并设置为 -dp

```
 <ImageView
            android:id="@+id/1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

            <ImageView
            android:id="@+id/2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/1"
            android:layout_marginTop="-2dp"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:52:47.983

使用负数`layout_margin`。

# android - 智能手机在 API 16 之前不振动

> ID：16130212
> 
> 赞同：0
> 
> 时间：2013-04-21T10:29:39.417
> 
> 标签：android, vibration

我有一个小问题。

按下按钮时，我的应用程序必须振动，在我的三星 S3（API 17）中一切正常，但在我的 S2（API 15）上，这不起作用。

编码：

```
 <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.VIBRATE"/> 
```

主要的

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    Vibrator x = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    x.cancel();
    backgroundVibrate = 0;
    //final ToggleButton toggle = (ToggleButton)findViewById(R.id.toggleButton1);
    setContentView(R.layout.activity_fullscreen);

    Button fast1 = (Button) findViewById(R.id.fast1);
    fast1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            long[] pattern = { 0, 100, 300 };
            vibrate(pattern, false);
        }
    });
   public void vibrate(long[] pattern, boolean stop)
{
    // Get instance of Vibrator from current Context
    Vibrator x = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    if (stop == false)
    {
        x.vibrate(pattern, 0);
        currentVibrate = true;
        System.out.println("vibrate ON");
    }
    if (stop == true)
    {
        x.cancel();
        currentVibrate = false;
    }

} 
```

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:49:28.813

那些振动持续时间真的很短。作为测试，我建议您在每个末尾加上一个零，以查看振动是否真的有效，以消除代码正常运行的问题。

然后，我想你只需要设置一个所有硬件都可以接受的持续时间（因为不同的硬件会有不同的敏感度，需要一个更好的词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:53:08.580

完成这项工作的简单方法是使用[触觉反馈](http://developer.android.com/reference/android/view/View.html#attr_android%3ahapticFeedbackEnabled)

```
Button fast1 = (Button) findViewById(R.id.fast1);
fast1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        v.performHapticFeedback(HapticFeedbackConstants.VIRTUAL_KEY);
    }
}); 
```

这样做的好处是您不需要在 AndroidManifest 中设置权限。请注意，您需要将触觉反馈启用为全局。[从http://developer.android.com/reference/android/view/HapticFeedbackConstants.html](http://developer.android.com/reference/android/view/HapticFeedbackConstants.html)检查它。

您可以简单地使用以下代码为您的应用程序启用触觉反馈。

```
Settings.System.putInt(getContentResolver(), Settings.System.HAPTIC_FEEDBACK_ENABLED, 1); 
```

不要忘记在 AndroidManifest.xml 中添加以下权限

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:47:06.430

我最初的解决方案一切都很好。

问题来自三星 S2 设置....

谢谢你的帮助

# php - 从具有两个表连接的选择中对 Laravel 中的数据进行排序

> ID：16130215
> 
> 赞同：0
> 
> 时间：2013-04-21T10:30:19.410
> 
> 标签：php, sql, join, laravel

我有一个这样的数据库设置：

```
events
- id
- schedule_type (0 = single, 1 = recurring)
- title

schedule (for single events)
- id
- event_id
- date

schedule_recurring (for recurring events)
- id
- event_id
- date
```

我的查询如下所示：

```
DB::table('events')
    ->left_join('schedule', 'events.id', '=', 'schedule.event_id')
    ->left_join('schedule_recurring', 'events.id', '=', 'schedule_recurring.event_id')
    ->order_by('schedule.date', 'asc')
    ->order_by('schedule_recurring.date', 'asc')
    ->get();
```

这不显示计划字段的日期字段，仅用于 schedule_recurring。在来自数据库的数据中，日期字段设置为 NULL。我不知道我的查询哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:33:33.517

你可以创建一个视图作为和的联合`schedule`吗`schedule_recurring`？一旦你这样做了，你只需要加入视图，大大简化了事情。

# ubuntu - Amazon EC2 中层 Ubuntu 实例上的 Cron 作业

> ID：16130218
> 
> 赞同：0
> 
> 时间：2013-04-21T10:30:31.520
> 
> 标签：ubuntu, amazon-ec2, cron

我对管理服务器比较陌生。我有一个中等级别的 Ubuntu EC2 实例。我有一个从数据库中读取的 php 脚本（条目数量不多，大约 500 个），并且对于数据库中的每条记录，都将一个文件从 EC2 服务器传输到 S3。当我从命令行运行 php 脚本时，它的工作方式与我预期的一样。当我尝试运行与 cron 作业相同的脚本时，它似乎在大约 100 个条目后突然结束。

对于解决此问题的任何帮助，我将不胜感激。

非常感谢。维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:21:40.573

我相信您的 cron-job 的设置会将`STDERR`（参见下面的示例）重定向到文件？如果是，那么这应该是解决问题的起点。

> 例子：
> 
> 5 * * * * /path/to/php /path/to/script.php > /path/to/logfile.txt 2>&1 /path/to/logfile.txt 应该包含输出和错误（如果有）在执行该脚本时。

# ruby-on-rails - rails-money gem：货币格式为 2 美分，但存储 4 美分

> ID：16130225
> 
> 赞同：3
> 
> 时间：2013-04-21T10:32:03.163
> 
> 标签：ruby-on-rails, currency

我正在使用 RubyMoney / money-rails gem，我对它非常满意。

现在我需要在货币列中增加更多的精度，所以我定义了一个新货币

```
:subunit             => "Subcent",
:subunit_to_unit     => 10000, 
```

有没有办法使用格式助手 humanized_money_with_symbol 但在逗号后仅显示 2 位数字？

示例：10,0044 €（货币小数：100044 货币：EUR）应显示为 10,00 €

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-28T23:40:27.990

一个肮脏的小技巧是注销所有货币并`subunit_to_unit`像这样用新货币重新注册它们

```
currencies = Money::Currency.table.dup

currencies.each do |code, currency|
  Money::Currency.unregister(currency)
end

currencies.each do |code, currency|
  Money::Currency.register(currency.merge({subunit_to_unit: 1000}))
end 
```

如果您使用的是 Rails，请尝试在初始化程序中声明上述代码。

# python - Python 2.6 中的互斥锁？确保只有一个 .exe 实例运行

> ID：16130229
> 
> 赞同：0
> 
> 时间：2013-04-21T10:32:25.117
> 
> 标签：python, python-2.6

我有一个在 windows (py2exe) 中使用的 python 2.6 程序，我需要确保它只会有一个运行检查 python2.6 的文档，它说 Mutex 不见了？我应该怎么做才能确保它只运行程序的一个实例？非常感谢！

# c# - 查找方法的执行时间

> ID：16130232
> 
> 赞同：10
> 
> 时间：2013-04-21T10:32:29.350
> 
> 标签：c#, .net

我正在为我的大学制作一个图像隐写术项目。我已经完成了这个项目，并保留了几种不同的算法来隐藏图像中的数据。

我想问的是，在 C# 中有什么方法可以找到程序中两点之间的执行/运行时间。例如

```
//Some Code
//Code to start recording the time.
hideDataUsingAlgorithm();
//Code to stop recording and get the time of execution of the above function. 
```

我想这样做是为了展示简单（耗时较少）和更高效但耗时的算法（使用相同的数据和相同的图像）之间的区别。我有大约 10 种不同的彩色和灰度图像算法。

没有多线程，所以不会有问题。只有一个主线程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T10:36:11.573

这是 Stopwatch 的一个有用的扩展方法：

```
public static class StopwatchExt
{
    public static string GetTimeString(this Stopwatch stopwatch, int numberofDigits = 1)
    {
        double time = stopwatch.ElapsedTicks / (double)Stopwatch.Frequency;
        if (time > 1)
            return Math.Round(time, numberofDigits) + " s";
        if (time > 1e-3)
            return Math.Round(1e3 * time, numberofDigits) + " ms";
        if (time > 1e-6)
            return Math.Round(1e6 * time, numberofDigits) + " µs";
        if (time > 1e-9)
            return Math.Round(1e9 * time, numberofDigits) + " ns";
        return stopwatch.ElapsedTicks + " ticks";
    }
} 
```

像这样使用它：

```
Stopwatch stopwatch = Stopwatch.StartNew();
//Call your method here
stopwatch.Stop();
Console.WriteLine(stopwatch.GetTimeString()); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-21T10:34:28.970

[System.Environment.TickCount](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)和[System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类是两个适用于更精细的分辨率和直接使用的类。

也可以看看：

1.  [DateTime.Now 是衡量函数性能的最佳方法吗？](https://stackoverflow.com/questions/28637/is-datetimenow-the-best-way-to-measure-a-functions-performance)
2.  [.NET 中的高分辨率计时器](https://stackoverflow.com/questions/163022/high-resolution-timer-in-net)
3.  [Environment.TickCount 与 DateTime.Now](https://stackoverflow.com/questions/243351/environmenttickcount-vs-datetimenow)
4.  [在 Windows 中对程序进行基准测试的最佳方法是什么？](https://stackoverflow.com/questions/145103/whats-the-best-way-to-benchmark-programs-in-windows)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T10:34:48.697

您可以使用[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类：

```
var timer = System.Diagnostics.StopWatch.StartNew();
hideDataUsingAlgorithm();
timer.Stop();
var elapsed = timer.ElapsedMilliseconds; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T14:10:08.807

您可以向您的测试方法声明一个委托，并使用以下扩展方法之一来执行它 N 次。根据传递的格式字符串，您将打印到控制台：

*   首次通话时间
*   经过时间
*   通话频率

这些都是有用的值。扩展方法使用秒表来获得最高精度。

```
Action acc = hideDataUsingAlgorithm;
acc.Profile(100*1000, "Method did run {runs} times in {time}s, Frequency: {frequency}"); 
```

要检查您可以使用的启动效果

```
acc.ProfileFirst(100*1000, "First call {0}s", "Method did run {runs} times in {time}s, Frequency: {frequency}"); 
```

这样，如果所讨论的方法不是会扭曲时间的空方法，您可以轻松地检查您的方法，因为委托调用将与您的方法调用相当。最初的想法被记录在[这里](http://geekswithblogs.net/akraus1/archive/2008/12/16/127989.aspx)。

对于更深入的调用时间分析，分析器也非常有用。您也应该尝试使用这些来诊断更棘手的问题。

```
using System;
using System.Globalization;
using System.Diagnostics;

namespace PerformanceTester
{
   /// <summary>
   /// Helper class to print out performance related data like number of runs, elapsed time and frequency
   /// </summary>
   public static class Extension
   {
       static NumberFormatInfo myNumberFormat;

       static NumberFormatInfo NumberFormat
       {
           get
           {
               if (myNumberFormat == null)
               {
                   var local = new CultureInfo("en-us", false).NumberFormat;
                   local.NumberGroupSeparator = " "; // set space as thousand separator
                   myNumberFormat = local; // make a thread safe assignment with a fully initialized variable
               }
               return myNumberFormat;
           }
       }

       /// <summary>
       /// Execute the given function and print the elapsed time to the console.
       /// </summary>
       /// <param name="func">Function that returns the number of iterations.</param>
       /// <param name="format">Format string which can contain {runs} or {0},{time} or {1} and {frequency} or {2}.</param>
       public static void Profile(this Func<int> func, string format)
       {

           Stopwatch watch = Stopwatch.StartNew();
           int runs = func();  // Execute function and get number of iterations back
           watch.Stop();

           string replacedFormat = format.Replace("{runs}", "{3}")
                                         .Replace("{time}", "{4}")
                                         .Replace("{frequency}", "{5}");

           // get elapsed time back
           float sec = watch.ElapsedMilliseconds / 1000.0f;
           float frequency = runs / sec; // calculate frequency of the operation in question

           try
           {
               Console.WriteLine(replacedFormat,
                                   runs,  // {0} is the number of runs
                                   sec,   // {1} is the elapsed time as float
                                   frequency, // {2} is the call frequency as float
                                   runs.ToString("N0", NumberFormat),  // Expanded token {runs} is formatted with thousand separators
                                   sec.ToString("F2", NumberFormat),   // expanded token {time} is formatted as float in seconds with two digits precision
                                   frequency.ToString("N0", NumberFormat)); // expanded token {frequency} is formatted as float with thousands separators
           }
           catch (FormatException ex)
           {
               throw new FormatException(
                   String.Format("The input string format string did contain not an expected token like "+
                                 "{{runs}}/{{0}}, {{time}}/{{1}} or {{frequency}}/{{2}} or the format string " +
                                 "itself was invalid: \"{0}\"", format), ex);
           }
       }

       /// <summary>
       /// Execute the given function n-times and print the timing values (number of runs, elapsed time, call frequency)
       /// to the console window.
       /// </summary>
       /// <param name="func">Function to call in a for loop.</param>
       /// <param name="runs">Number of iterations.</param>
       /// <param name="format">Format string which can contain {runs} or {0},{time} or {1} and {frequency} or {2}.</param>
       public static void Profile(this Action func, int runs, string format)
       {
           Func<int> f = () =>
           {
               for (int i = 0; i < runs; i++)
               {
                   func();
               }
               return runs;
           };
           f.Profile(format);
       }

       /// <summary>
       /// Call a function in a for loop n-times. The first function call will be measured independently to measure
       /// first call effects.
       /// </summary>
       /// <param name="func">Function to call in a loop.</param>
       /// <param name="runs">Number of iterations.</param>
       /// <param name="formatFirst">Format string for first function call performance.</param>
       /// <param name="formatOther">Format string for subsequent function call performance.</param>
       /// <remarks>
       /// The format string can contain {runs} or {0},{time} or {1} and {frequency} or {2}.
       /// </remarks>
       public static void ProfileWithFirst(this Action func, int runs, string formatFirst, string formatOther)
       {
           func.Profile(1, formatFirst);
           func.Profile(runs - 1, formatOther);
       }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T09:07:27.183

您还可以使用[BenchmarkDotNet](https://www.nuget.org/packages/BenchmarkDotNet/)

然后你做：

1) 创建一个控制台项目，并引用您要测试的代码。

```
using BenchmarkDotNet.Running;
using BenchmarkDotNet.Attributes;
class Program
{
    static void Main()
    {
        var summary = BenchmarkRunner.Run<YourBenchmarks>();
    }
}

public class YourBenchmarks
{
    [Benchmark]
    public object HideDataUsingAlgorithm()
    {
        return Namespace.hideDataUsingAlgorithm(); // call the code you want to benchmark here
    }
} 
```

2) 在版本中构建并在没有调试器的情况下运行。

3) 打开 bin/release/YourBenchmarks-report-stackoverflow.md 中的报告

默认情况下，报告包含 Median 和 StdDev。BenchmarkDotNet 负责预热并多次启动该过程以提供准确的统计数据。

样本报告：

```
 Method |      Median |    StdDev |
----------------------- |------------ |---------- |
 HideDataUsingAlgorithm | 252.4869 ns | 8.0261 ns | 
```

有关配置，请阅读[文档](https://github.com/PerfDotNet/BenchmarkDotNet/blob/master/README.md)。

# uml - 序列图中的 UML 偏序

> ID：16130234
> 
> 赞同：2
> 
> 时间：2013-04-21T10:32:51.907
> 
> 标签：uml, sequence-diagram

关于序列图和部分排序，我阅读了以下句子，但我不明白它的确切含义：

> “交互只是部分有序的”

这句话是什么意思？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:38:32.790

这意味着在序列图中，并非所有操作都是按交互顺序正确完成的！部分有序集合的一个熟悉的现实生活示例是按家谱后代排序的人的集合。有些人有祖先-后代的关系，而另一些人则没有这种关系。

# c# - 分布式系统sqlite错误

> ID：16130238
> 
> 赞同：3
> 
> 时间：2013-04-21T10:33:31.077
> 
> 标签：c#, sqlite

我最近完成了一个项目，该项目涉及多个相互通信的不同解决方案。当我在自己的网络和计算机上测试该项目时，它工作正常。但是，当我在工作网络上使用该项目时，解决方案之间无法正常通信。

我的服务器显示以下消息。

```
Could not load file or assembly 'System.Data.SQLite, Version=1.0.84.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139' 
or one of its dependencies.An attempt was made to load a program with an incorrect format. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:44:29.287

然后您`SQLite .NET Connector`还必须在另一台计算机上安装该应用程序，当您`.Net SQLite Connector`在开发计算机上安装该应用程序时，该应用程序可以工作，因此请确保安装它并将`System.Data.SQLite`CopyLocal 属性设置为 true

```
<bin>\App.exe (optional, managed-only application executable assembly)
<bin>\App.dll (optional, managed-only application library assembly)
<bin>\System.Data.SQLite.dll (required, managed-only core assembly)
<bin>\System.Data.SQLite.Linq.dll (optional, managed-only LINQ assembly)
<bin>\x86\SQLite.Interop.dll (required, x86 native interop assembly)
<bin>\x64\SQLite.Interop.dll (required, x64 native interop assembly) 
```

[读这个 ！](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

> 祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T04:19:34.130

这通常意味着您作为 32 位 (x86) 进程运行并尝试加载 x64 SQLite 互操作程序集。或相反亦然。

如果您的应用程序是使用 AnyCPU 作为构建选项构建的，则可能是依赖项迫使它在 x64 机器上作为 32 位进程运行，或者您实际上是在 32 位操作系统上运行并且您的代码试图加载错误的互操作。

解决此问题的最简单方法是创建 x86 和 x64 构建并相应地部署。还有其他方法可以动态加载正确的互操作程序集和一些可以帮助您的搜索引擎结果。

# database - Yii::app()->db 没有给出任何响应

> ID：16130239
> 
> 赞同：0
> 
> 时间：2013-04-21T10:33:41.633
> 
> 标签：database, yii

我在 yii 中使用 sqlite。在我正在使用的**index.php页面中**

```
Yii::app()->db 
```

检查数据库是否已连接。但是无论我在 main.php 文件中的“connectionString”中输入什么数据库名称 -

例如：

```
'db'=>array(
    'connectionString' => 'sqlite:c:\\xampp\\htdocs\\qdr\\protected\\data\\abcd.db',
    'tablePrefix' => 'tbl_',
),
'db'=>array(
    'connectionString' => 'sqlite:c:\\xampp\\htdocs\\qdr\\protected\\data\\jklm.db',
    'tablePrefix' => 'tbl_',
), 
```

尽管我正在更改并使用随机名称，但它没有显示任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:36:08.330

这不是一个大问题。实际上这是因为无论你在 'connectionString' 中输入什么名称，yii 都会自动创建一个具有该名称的数据库。所以 Yii::app()->db 不会给出任何错误。谢谢

# php - 任务优化算法

> ID：16130242
> 
> 赞同：0
> 
> 时间：2013-04-21T10:34:19.047
> 
> 标签：php, optimization, task

我有一个资源优化任务如何组织几个用户在动态任务上的工作。

这是实体结构：有几个项目
`Projects{id,name}`

每天都有几个任务包：
`Package{id,name, project_id,arrival_date, deadline_date}`
`Task{id,package_id,content, estimated_time}`

用户对每个项目都有不同的技能水平和批准：
`User{id, name}`
`User2Projects{id, user_id, project_id, speed, priority}`
`UsersDayPlan{id, user_id, date, from_time, to_time}`

目标是构建一个应用程序/算法来优化在所有用户之间分配的任务，以便每个包都在截止日期之前完成（或尽可能接近）。

**编辑：**
我在这里看到了几个约束规则：
1.任务应该交给获得项目批准并具有最高技能水平的人。
2\. IF包快到截止日期了，应该分配更多的用户，忽略规则1。

所以我正在寻找方向和工具。

在我看来，它是一个“经典”数学问题，应该有一些算法来处理这类任务。

任何库或工具将不胜感激。

结果应用程序可能是使用 PHP 的基于 Web 的，因此首选相关技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:43:54.317

这实际上是一个非常常见的问题，是[0/1 背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的变体。实际上，最佳的解决方案是只做部分任务，但是当你没有那个选项时，你可以采用一些贪婪的策略。产生良好结果的一种方法是从最短的任务开始，直到最长的任务。像这样看：

```
Task1 duration = 10
Task2 duration = 20
Task3 duration = 30 
```

我们从 开始`Task1`，意思`Task1`是在 10 分钟内完成，所有其他任务都加了 10 个。

```
Current Total time: Task1(10) + (10 + Task2) + (10 + Task2 + Task3) 
```

如您所见，当您完成一项任务时，所有其他任务必须等待所需的时间，或者：

```
TaskN = TaskN-1 + TaskN. 
```

从那时起，您希望重复最低值。因此，您从最小的开始，以确保所有其他任务的等待时间最短。

# javascript - 自动调整 radSplitter 上的内容大小

> ID：16130244
> 
> 赞同：0
> 
> 时间：2013-04-21T10:34:31.573
> 
> 标签：javascript, html, ajax, visual-studio-2010, telerik

```
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

 <telerik:RadSplitter ID="RadSplitter1" runat="server" Width="800" Height="500">
      <telerik:RadPane ID="navigationPane" runat="server">
           Left Pane
      </telerik:RadPane>
      <telerik:RadSplitBar ID="RadSplitbar1" runat="server" CollapseMode="Forward">
      </telerik:RadSplitBar>
      <telerik:RadPane ID="contentPane" runat="server" PersistScrollPosition="False">
           Right Pane
               <div id="Map">
</div>
      </telerik:RadPane>
 </telerik:RadSplitter>
</form> 
```

嗨，我的 Web 应用程序有上面的代码，所以基本上我需要帮助，我在 demo.telerik 上找不到教程，所以我需要你的帮助。与本网站相比，滑块有点太厚了。 [http://demos.telerik.com/aspnet-ajax/splitter/examples/splitterorientation/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/splitter/examples/splitterorientation/defaultcs.aspx)

第二个问题是，如果我将滑块向左拖动，右侧面板上的内容没有放大，并且与右侧面板上的内容保持不变。某种谎言没有自动调整大小以适合右侧面板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:38:38.297

我不明白，Splitbar 太粗了？您可以通过将 SplitBarSize 属性添加到 telerik:RadSplitter 元素来控制 RadSplitBar 的宽度。 [http://www.telerik.com/community/forums/aspnet-ajax/splitter/radsplitbar-width-issue.aspx](http://www.telerik.com/community/forums/aspnet-ajax/splitter/radsplitbar-width-issue.aspx)

RadPanes 中的内容应在您为 RadSplitter 分配的总空间内自动调整大小。如果您希望它填充屏幕并根据窗口大小进行调整，请考虑以下演示： [http ://demos.telerik.com/aspnet-ajax/splitter/examples/resizewithwindow/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/splitter/examples/resizewithwindow/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:25:50.017

看看这里：[http](http://www.telerik.com/help/aspnet-ajax/window-troubleshooting-distorted-appearance.html) ://www.telerik.com/help/aspnet-ajax/window-troubleshooting-distorted-appearance.html 。我认为您遇到了同样的问题-您页面中的某些 CSS 覆盖了默认设置，因此某些元素变得比 Telerik 需要的更大。

在调整大小时 - 以百分比设置 div 的大小并确保里面的内容也是百分比，例如：

```
<div id="Map" style="width: 100%; height: 100%;"> 
```

# c - <<= 代表什么（在 C 中）？

> ID：16130245
> 
> 赞同：-2
> 
> 时间：2013-04-21T10:34:41.953
> 
> 标签：c, syntax

正如标题所说，我对`<<=`代表的内容有点困惑。我知道`<<`是一个轮班操作员，但这是我第一次看到`=`它。任何澄清？

示例代码：

```
#include <stdio.h> 
main() { 
  unsigned int i, s; 
  for( s = i = 0; i <= 7; i++){ 
    switch (i%3) { 
      case 0: i++; 
      case 1: i <<= (7 & (i + 1)) | ((i + 2) & 6); s += i; break; 
      case 2: i += (i ^ i) | 1 ; continue; 
    } 
    s++; 
  } 
  printf("%d\n", s); 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T10:38:04.040

AFAIK`>>=`是“相同”的操作。你可以打电话

```
i = i << 4; 
```

或者

```
i <<= 4; 
```

它具有相同的效果。

就像`i = i + 5;`和`i += 5;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:05:10.993

此运算符称为**按位左移赋值**运算符。

C 和 C 家族中的语言（C++、Java、Objective C、C# 和其他语言）具有称为**复合赋值**运算符的东西。它们具有以下一般形式：

```
a OP= b; 
```

`OP`许多允许的运算符之一在哪里

*   `+`加法`+=`
*   `-`减法`-=`
*   `*`乘法给予`*=`
*   `/`除法给予`/=`
*   `|`按位或给予`|=`
*   `&`按位和给予`&=`

仅举几例。

**复合赋值运算符是做什么的？**

它们是简写。代替

```
a = a OP b; 
```

利用

```
a OP= b; 
```

还有**第二个好处**。`a`只评估一次。

^(这是一个先进的概念。有关更多详细信息，请参阅此[StackOverflow answer](https://stackoverflow.com/a/12133751/220060) for [Left side evaluate only once](https://stackoverflow.com/q/12133739/220060)。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:40:52.190

<<= 将第一个操作数的值左移第二个操作数的值指定的位数；将结果存储在第一个操作数指定的对象中。

# c# - 像素数据到图像

> ID：16130248
> 
> 赞同：8
> 
> 时间：2013-04-21T10:35:01.440
> 
> 标签：c#

我有这种格式的列表像素

```
ArrayList list = new ArrayList();
list.add(Red);
list.add(Blue);
list.add(Green); 
```

我有很多这样的价值观。我想将数组列表转换为图像。尝试了很多，但没有找到任何合适的材料。

**编辑：**这可能会有所帮助：

```
List<byte> pic = new List<byte>(); 
for (int j = 0; j < headdata.Count; j++)
{ 
    if(headdata.ElementAt(j).getHead() == i) 
    { 
        pic.Add((byte)headdata.ElementAt(j).getRed());
        pic.Add((byte)headdata.ElementAt(j).getGreen());
        pic.Add((byte)headdata.ElementAt(j).getBlue()); 
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T12:25:43.647

**更新**

我想我会改进这个答案以供将来参考。

将像素存储为无符号 32 位整数数组（C#）会更方便（并且性能更高`uint`）。这允许一次性设置每个像素的 4 个通道（alpha、红色、绿色和蓝色）。如果您对使用 alpha 通道（用于透明度）不感兴趣，请参阅下面代码片段中有关像素格式的注释。

您现在表示颜色的方式是 32 位数字，例如`0xff0000`，您可能会认为它类似于 CSS 十六进制颜色值。

```
// Image dimensions.
var width = 640;
var height = 480;

// Array to contain pixel data, with each element representing one pixel.
var pixelBuffer = new uint[width * height];

// When creating the bitmap, the operating system needs to be told the memory
// address of the pixel data array created above. This memory address can be
// found using a pinned GC handle, which also tells the GC (garbage collector)
// that it cannot move the array in memory after this point (as that would
// change the memory address).
//
// Note that the handle prevents the GC from freeing the object automatically,
// so remember to call the handle's `Free` method once finished (see below). 
var pixelBufferHandle = GCHandle.Alloc(pixelBuffer, GCHandleType.Pinned);

// Create the bitmap using a constructor that takes a pointer to the array of
// pixel data:
//
// The `width` and `height` parameters are the image dimensions in pixels.
// These should match the values used above.
//
// The `stride` parameter specifies the number of _bytes_ required for each row
// of image data. Calculate this by multiplying the image's width by the number
// of bytes per pixel (here that's `sizeof(uint)`).
//
// The `format` parameter specifies how the colour data of each pixel is stored
// in the pixel data array:
//    - For 32-bit RGB colour, use `Format32bppPArgb`. This signifies that the
//      alpha channel is present (i.e. each pixel is 4 bytes) but should be
//      ignored. Each pixel will be 100% opaque, and the alpha can be zero.
//    - For 32-bit ARGB colour, use `Format32bppArgb`. Each pixel will be drawn
//      opaque, semi-transparent, or fully transparent based on the alpha.
//
// The `scan0` parameter takes a pointer to the pixel data - use the GC handle
// created above to acquire the address of the array object.
var bitmap = new Bitmap(
    width:  width,
    height: height,
    stride: width * sizeof(uint),
    format: PixelFormat.Format32bppPArgb,
    scan0:  pixelBufferHandle.AddrOfPinnedObject()
);

// At this point, the pixel data array can be freely manipulated independently
// of the bitmap. Each time the bitmap is draw, it will reflect the current
// content of the pixel data array.

// Once finished...

// Free the GC handle, allowing the GC to free the object automatically.
gchPixels.Free(); 
```

您可以创建用于在特定坐标读取和写入像素的函数：

```
uint GetPixel(int x, int y) => pixels[x + y * width];
void SetPixel(int x, int y, uint argb) => pixels[x + y * width] = argb; 
```

正如[starbeamrainbowlabs](https://stackoverflow.com/users/1460422/starbeamrainbowlabs)指出的那样：

`GCHandle`、`Bitmap`和`PixelFormat`分别位于`System.Runtime.InteropServices`、`System.Drawing`和`System.Drawing.Imaging`中。

**下面的原始答案...**

有一种很好的方法可以做到这一点，但它要求您使用数组或字节而不是列表。

考虑一下：

```
// Define the width and the height of the image
int width = 100;
int height = 100;

/// Create an array of bytes consisting of the area's worth of pixels
/// with 3 bytes of data each.
byte[] pixels = new byte[width * height * 3];

/* ... Code for making the image etc. here ... */

// Create the bitmap.
// GCHandle requires System.Runtime.InteropServices
/// PixelFormat requires System.Drawing.Imaging.
Bitmap bmp = new Bitmap(width, height, width * 3, PixelFormat.Format24bppRgb,
                        GCHandle.Alloc(pixels, GCHandleType.Pinned).AddrOfPinnedObject()); 
```

如果要将其更改为 ARGB，只需将“3”的所有实例更改为“4”，然后使用 PixelFormat.Format32bppArgb。

正如我所说，这要求您使用数组而不是列表，但只要您知道图像的宽度和高度，这应该不会太难。在数组中设置单个像素的一个好方法是（也许为此制定一个方法）：

```
pixels[x + y * width]     = R;
pixels[x + y * width + 1] = G;
pixels[x + y * width + 2] = B; 
```

如果您正在做的任何事情都需要这种方法，那么这种方法通常也很快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T10:58:58.213

首先，正如我在评论中所说，最好使用*List*而不是*ArrayList*以避免装箱/拆箱。

然后，您需要*bpp*（每像素位数）和*宽度*和*高度*来创建图像。

如果您拥有所有这些值，那么您可以获得起始像素索引：

```
int i = ((y * Width) + x) * (depth / 8); 
```

例如：

```
 List<byte> bytes = new List<byte>(); // this list should be filled with values
    int width = 100;
    int height = 100;
    int bpp = 24;

    Bitmap bmp = new Bitmap(width, height);

    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {   
            int i = ((y * width) + x) * (bpp / 8);
            if(bpp == 24) // in this case you have 3 color values (red, green, blue)
            {
                 // first byte will be red, because you are writing it as first value
                 byte r = bytes[i]; 
                 byte g = bytes[i + 1]; 
                 byte b = bytes[i + 2]; 
                 Color color = Color.FromArgb(r, g, b);
                 bmp.SetPixel(x, y, color); 
            }

        }
    } 
```

您可以使用其他库更快地创建位图和写入值。（*SetPixel()*非常慢。[见](http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp)）

# knockout.js - 如何将计算属性添加到集合中？

> ID：16130256
> 
> 赞同：0
> 
> 时间：2013-04-21T10:35:59.600
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用 Knockout 并将可观察的集合绑定到标记。

如果我可以为集合中的每个项目添加一个计算函数，那就太好了，但我不确定如何在 Knockout 中正确执行此操作。

例如，给定这个模型：

```
var model = {
    'persons' : [
        { firstName: "John", lastName: "Smith" },
        { firstName: "Sgt.", lastName: "Shiney-Sides" },
        { firstName: "Rusty", lastName: "Schacklefurt" }
    ]
};

ko.applyBindings(model); 
```

我想添加一个`fullName`连接名字和姓氏的计算函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:37:05.353

[您可以使用Knockout Mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)来实现这一点。

代码看起来像这样：

```
var model = {
    'persons' : [
        { firstName: "John", lastName: "Smith" },
        { firstName: "Sgt.", lastName: "Shiney-Sides" },
        { firstName: "Rusty", lastName: "Schacklefurt" }
    ]
};

// specifies the create callback for the 'persons' property
var mappingOptions = {
    'persons': {
        // overriding the default creation / initialization code
        create: function (options) {
            var Person = function () {
                this.fullName = ko.computed(function () {
                    return this.firstName() + ' ' + this.lastName();
                }, this);

                // let the ko mapping plugin continue to map out this object, so the rest of it will be observable
                ko.mapping.fromJS(options.data, {}, this);
            };
            return new Person();
        }
    }
};

model = ko.mapping.fromJS(model, mappingOptions);

ko.applyBindings(model); 
```

[此解决方案](http://www.underwatergorilladome.com/how-to-use-knockouts-computed-observables-with-the-mapping-plugin/)归功于Allen [Rice](http://www.underwatergorilladome.com/author/allen-rice/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:11:50.797

@jonathanconway 的答案是正确的，但有点落后，而且它对大集合的内存使用量很大，将类的声明从 create 方法中移出。

然后只需从 create 函数中调用构造函数，例如

```
create: function (options) {
   return new Person(options);
} 
```

为了节省更多内存，您可以将计算结果移至原型声明。

# ios - 当 UITableView 完全重新加载时

> ID：16130257
> 
> 赞同：0
> 
> 时间：2013-04-21T10:35:59.787
> 
> 标签：ios, objective-c, uitableview

我有一个控件可以部分或完全更改 tableView 的内容。更改发生后，我设置了一个标志`tableViewContentHasChanged`：

```
BOOL tableViewContentHasChanged = YES;
[self.tableView reloadData];
tableViewContentHasChanged = NO; 
```

我的问题出现在`tableView:viewForHeaderInSection:`；它在重新加载表视图*后*调用，因此我的标志在该方法中无效。

简而言之：当表*完全*重新加载时观察的正确方法是什么，所以我可以将标志设置为`NO`？而且，我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:21:16.473

我认为处理这个问题的最好方法是在其他人提到的数据模型中，但如果你真的需要这样做，你可以执行以下操作：

根据[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadData)，当您调用时，只会重新加载可见的部分/单元格`reloadData`

所以你需要知道最后一个可见的标题是什么时候渲染的，所以你设置：

```
 tableViewContentHasChanged = YES;
  [self.tableView reloadData]; 
```

然后在 cellForRowAtIndexPath: 中获取最后显示的索引并将其存储在成员变量中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
  //Your cell creating code here
  UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"TryCell"];

  //Set last displayed index here
  lastLoadedSectionIndex = indexPath.section;
  NSLog(@"Loaded cell at %@",indexPath);
  return cell;
} 
```

这样，当`viewForHeaderInSection:`被调用时，您将知道哪个是该重新加载事件中的最后一个标头：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
  //Create or customize your view
  UIView *headerView = [UIView new];

  //Toggle tableViewContentHasChanged when it's the last index
  if (tableViewContentHasChanged && section == lastLoadedSectionIndex) {
    tableViewContentHasChanged = NO;
    NSLog(@"Reload Ended");

  }
  return headerView;
} 
```

请注意，此方法仅在最后一个可见部分至少有 1 行时才有效。

希望这可以帮助。

# xml - Sencha Touch 读取远程 XML 数据

> ID：16130262
> 
> 赞同：0
> 
> 时间：2013-04-21T10:36:27.377
> 
> 标签：xml, ajax, list, sencha-touch

我最近才开始使用 Sencha Touch 2.1。我在读取 XML 数据时遇到问题。读取本地 xml 文件时，它在 PC、手机和平板电脑上运行良好；当读取远程 xml 时，它在 PC 上运行良好，但我在手机和平​​板电脑上有一个空白列表。我是什么失踪？

模型

```
 Ext.define('Cus.model.Biz', {
extend: 'Ext.data.Model',
config: {
    fields: [
        {name: 'name', type: 'auto'},
        {name: 'tel', type: 'auto'},
        {name: 'address', type: 'auto'}
    ]
} 
```

});

店铺

```
Ext.define("Cus.store.BizList", {
extend: 'Ext.data.Store',
requires: ['Cus.model.Biz', 'Ext.data.reader.Xml'],
config: {
    model: 'Cus.model.Biz',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url:'http://ip:port/XXX/list.xml',
        reader: {
            type: 'xml',
            root: 'Result',
            record: 'Biz'
        }
    }
} 
```

});

看法

```
Ext.define('Cus.view.phone.Main', {
extend: 'Ext.Container',
requires:[
    'Ext.dataview.List',
    'Ext.data.Store',
    'Cus.store.BizList'
],

config: {
    layout: 'vbox',
    items: [
        {
            xtype: 'toolbar',
            docked: 'top',
            title: 'My List',
        },
        {
            xtype: 'list',
            store: 'BizList',
            loadingText: 'loading',
            itemTpl: '{name} {tel} {address}',
            flex: 1
        }
    ]
} 
```

});

远程xml文件是

```
<Result>
<Bizs>
    <Biz>
        <name>name1</name>
        <tel>tel1</tel>
        <address>add1</address>
    </Biz>
    <Biz>
        <name>name2</name>
        <tel>tel2</tel>
        <address>add2</address>
    </Biz>
    <Biz>
        <name>name3</name>
        <tel>tel3</tel>
        <address>add3</address>
    </Biz>
</Bizs> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:28:50.647

我有一个类似的问题。

有必要定义请求的权利。在 xcode 设置或 manifest.xml 中（适用于 android）

# r - R控制台返回'inputinputinput'，我该如何关闭它？

> ID：16130267
> 
> 赞同：1
> 
> 时间：2013-04-21T10:36:59.260
> 
> 标签：r, input, console, preferences

每次我在 R 控制台中输入任何内容时，我都会收到一条“收据”行（即 inputinputinput；请参见随附的屏幕截图）。我不知道如何退还这个，发现它很烦人。我正在使用 R 2.15.2 GUI 1.53 Leopard 构建 32 位。任何想法如何关闭如果关闭？

![在此处输入图像描述](https://i.stack.imgur.com/JPiDR.png)

![在此处输入图像描述](https://i.stack.imgur.com/XvS2p.png)

![在此处输入图像描述](https://i.stack.imgur.com/7pewV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:49:09.083

我很确定，如果您查看 r-sig-mag 邮件列表档案，您会发现这是 R.app GUI 的一个版本中的一个错误。获取最新版本——如果你继续升级到 R3.0，这可能是最简单的——这个问题就会消失。2.15.3 的最新 R.app 版本可以正常工作，但我忘记在哪里获取它。

# python - PyFile_AsFile 的 Python 3 替代品

> ID：16130268
> 
> 赞同：9
> 
> 时间：2013-04-21T10:37:02.477
> 
> 标签：python, python-3.x, ctypes, ffi

以下代码适用于 Python 2：

```
from ctypes import *

## Setup python file -> c 'FILE *' conversion :
class FILE(Structure):
    pass
FILE_P = POINTER(FILE)
PyFile_AsFile = pythonapi.PyFile_AsFile # problem here
PyFile_AsFile.argtypes = [py_object]
PyFile_AsFile.restype = FILE_P
fp = open(filename,'wb')
gd.gdImagePng(img, PyFile_AsFile(fp)) 
```

但是在 Python 3 中，pythonapi 中没有 PyFile_AsFile。

该代码是[testPixelOps.py](http://www.langarson.com.au/code/testPixelOps/testPixelOps.py)中的一个例外。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T14:39:07.587

> 我只需要一种将文件对象转换为 ctypes FILE* 的方法，以便可以将其传递给 GD。

你运气不好。这在 Python 2.x 中是可能的，但在 Python 3.x 中是不可能的。该[文档](http://docs.python.org/3.3/c-api/file.html)解释了为什么不：

> 这些 API 是用于内置文件对象的 Python 2 C API 的最小模拟，它过去依赖于 C 标准库的缓冲 I/O (FILE*) 支持。在 Python 3 中，文件和流使用新的 io 模块，它在操作系统的低级无缓冲 I/O 上定义了几个层。

如果你想要一个`FILE*`，你将不得不自己制作一个，直接使用 C 标准库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T12:51:12.480

我没有找到问题的真正答案，但我发现如果您不需要将 Python 文件对象转换为 a `FILE*`（即，您不需要“共享”打开的文件），您可以只是`ctypes`用来打电话并得到类似的`fopen`东西。`libc``FILE*`

# ios - iOS UITableView 在 setTableHeaderView 之后以编程方式覆盖自动布局约束

> ID：16130271
> 
> 赞同：0
> 
> 时间：2013-04-21T10:37:16.453
> 
> 标签：ios, uitableview, constraints, autolayout

好的，所以这是我的困境自动取款机。

我有一个带有 UITableView (tableView) 和 UIView (viewForTableHeader) 的故事板，其中包含几个其他对象，如 UIImag、标签等。

以编程方式，我通过执行以下操作将 UIView 设置为 UITableView 的标题：

```
 [self.tableView setTableHeaderView:self.viewForTableHeader]; 
```

这在不使用自动布局时非常有效。

但是使用自动布局，应用程序崩溃并给我留下：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 -layoutSubviews 后仍需要自动布局。UITableView 的 -layoutSubviews 实现需要调用 super.'

所以在 viewDidLoad 我试图将约束设置`viewForTableHeader`为：

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:self.viewForTableHeader attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:self.tableView attribute:NSLayoutAttributeTop multiplier:0 constant:0];
[self.view addConstraint:constraint];
constraint = [NSLayoutConstraint constraintWithItem:self.viewForTableHeader attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:self.tableView attribute:NSLayoutAttributeLeft multiplier:0 constant:0];
[self.view addConstraint:constraint]; 
```

我也试过：

```
- (void)layoutSublayersOfLayer:(CALayer *)layer {
    [super layoutSublayersOfLayer:self.tableView.layer]; 
```

并做了同样的事情试图在这里设置约束

```
} 
```

`viewForTableHeader`把它放在一个 nib 文件中会更好吗？我确实对此有点不满意，所以任何帮助或指示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:16:44.050

由于您在 IB 中同时拥有（tableView 和 headerView），您可以将 viewForTableHeader**拖到**（上方）tableView 并将其设置为表头。

这将使 headerView 出现在**视图层次结构**中的 tableView**下方**。

 **如果您这样做，您将能够稍后在运行时将此视图删除/添加到表中，而不会出现自动布局错误或额外的约束。

```
 [self.viewForTableHeader removeFromSuperview]; 
```

然后

```
 [self.tableView setTableHeaderView:self.viewForTableHeader]; 
```**

# javascript - jQuery datepicker 不再可选择

> ID：16130278
> 
> 赞同：0
> 
> 时间：2013-04-21T10:38:09.663
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我有一个曾经运行良好的 jQuery 日期选择器。但是，从昨天开始，我一定改变了一些东西。当我将鼠标悬停在日历上时，什么也没有发生。当我单击日历时，没有任何效果。但是，我可以通过代码更改日历的行为。如您所见，我能够删除第一个日历中的上一个和下一个按钮。有什么我忘了检查吗？为什么我不能再选择日历的任何日期？任何提示表示赞赏。顺便说一句，我检查了 JSFiddle 上的代码，它在那里工作:(

这是我的**JavaScript**：

```
$(function() {
    var startDate;
    var endDate;

var selectCurrentWeek = function() {

    window.setTimeout(function () {
          $('#datepicker').find('.ui-datepicker-current-day tr').addClass('ui-state-hover');
          $('#datepicker').find('.ui-datepicker-next').remove();
          $('#datepicker').find('.ui-datepicker-prev').remove();
    }, 1);
}

$('#datepicker').datepicker( {
    showOtherMonths: true,
    selectOtherMonths: false,
    onSelect: function(dateText, inst) {
        var date = $(this).datepicker('getDate');
        startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
        endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
        $('#calendar').weekCalendar('gotoWeek', date);
        selectCurrentWeek();
    },
    beforeShowDay: function(date) {
        var cssClass = '';
        if(date >= startDate && date <= endDate)
            cssClass = 'ui-datepicker-current-day';
        return [true, cssClass];
    },
    onChangeMonthYear: function(year, month, inst) {
        selectCurrentWeek();
    }
});

$('#datepicker' ).datepicker( "option", $.datepicker.regional[ 'de' ] );
$('#datepicker').find('.ui-datepicker-next').remove();
$('#datepicker').find('.ui-datepicker-prev').remove();
$('#datepicker .ui-datepicker-calendar tr').live('mousemove', function() { $(this).find('td a').addClass('ui-state-hover'); });
$('#datepicker .ui-datepicker-calendar tr').live('mouseleave', function() { $(this).find('td a').removeClass('ui-state-hover'); });

    // handling datepicker classes
    var startDate;
    var endDate;

    var selectCurrentWeek_next = function() {

        window.setTimeout(function () {
        }, 1);
    }

    $('#datepicker_next_month').datepicker( {
        showOtherMonths: true,
        selectOtherMonths: true,
        onSelect: function(dateText, inst) {
            var date = $(this).datepicker('getDate');
            $('#calendar').weekCalendar('gotoWeek', date);
            selectCurrentWeek_next();
        },
        beforeShowDay: function(date) {
            var cssClass = '';
            return [true, cssClass];
        },
        onChangeMonthYear: function(year, month, inst) {
            selectCurrentWeek_next();
        }
    });

    $('#datepicker_next_month' ).datepicker( "option", $.datepicker.regional[ 'de' ] );
    $('#datepicker_next_month' ).datepicker().datepicker('setDate','+1m');
    $('#datepicker_next_month .ui-datepicker-calendar tr').live('mousemove', function() { $(this).find('td a').addClass('ui-state-hover'); });
    $('#datepicker_next_month .ui-datepicker-calendar tr').live('mouseleave', function() { $(this).find('td a').removeClass('ui-state-hover'); });
}); 
```

这是相关的**HTML**部分：

```
<div id="datepicker"></div>
<div id="datepicker_next_month"></div> 
```

这些是我导入的脚本：

```
 <script type='text/javascript' src='libs/jquery-1.4.4.min.js'></script>
  <script type='text/javascript' src='libs/jquery-ui-1.8.11.custom.min.js'></script>
  <script type='text/javascript' src='libs/jquery-ui-i18n.js'></script> 
```

这是日历的图像：

![在此处输入图像描述](https://i.stack.imgur.com/VWxlM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:17:44.067

我终于找到了问题所在。我使用了 Google Chroms Element 检查器，发现另一个 div 覆盖了 datepicker div。解决该问题后，一切都恢复正常:)

# java - 我在 Java 中得到 NullPointerException

> ID：16130288
> 
> 赞同：0
> 
> 时间：2013-04-21T10:39:20.003
> 
> 标签：java, nullpointerexception

你好我在这个程序中得到 NullPointerException 你能帮我吗？Author 类具有私有属性和 getter setter 方法。Fileoperations 类读取文件并使用 stringtokenizer 逐行分割。我在“ athr[0].setId(tempId);”行收到错误。当我从文件中读取 tempId 等于 100 时。我认为问题出在 Autor 类，但我无法解决。

## 作者

```
public class Author {

    private int id;
    private String name;
    private String univ;
    private String depart;
    private String email;
    private String article[] = new String[5];
    private int artCtr=0;

    public int getArtCtr() {
        return artCtr;
    }

    public void setArtCtr(int artCtr) {
        this.artCtr = artCtr;
    }

    FileOperations flp =new FileOperations();

    public String getArticle(int nmb) {
        return article[nmb];
    }

    public void setArticle(String article,int nmb) {
        this.article[nmb] = article;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getUniv() {
        return univ;
    }

    public void setUniv(String univ) {
        this.univ = univ;
    }

    public String getDepart() {
        return depart;
    }

    public void setDepart(String depart) {
        this.depart = depart;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

## 文件操作

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.StringTokenizer;

public class FileOperations {

    Author athr[] = new Author[500];
    int athCtr = 0;
    int flag = 0;
    String temp;
    int tempId;

    public void strAthr(String path) throws IOException {
        String metin = "Suheyb";
        System.out.println(path);
        FileReader fl = new FileReader(path);

        try (BufferedReader read = new BufferedReader(fl)) {

            while (metin != null) {
                metin = read.readLine();
                if (metin != null) {
                    StringTokenizer str = new StringTokenizer(metin, "/t ");

                    if (str.hasMoreTokens()) {
                        temp = str.nextToken();
                        tempId = Integer.parseInt(str.nextToken());
                        System.out.println(tempId + " " + athCtr);

                        if (athCtr != 0) {
                            for (int i = 0; i < athCtr; i++) {
                                if (athr[i].getId() == tempId) {
                                    flag = 1;
                                    if (str.hasMoreTokens()) {
                                        athr[i].setName(str.nextToken());
                                        if (str.hasMoreTokens()) {
                                            athr[i].setDepart(str.nextToken());
                                            if (str.hasMoreTokens()) {
                                                athr[i].setEmail(str
                                                        .nextToken());
                                                if (str.hasMoreTokens()) {
                                                    athr[i].setArticle(
                                                            str.nextToken(), 0);
                                                    athr[i].setArtCtr(1);
                                                    if (str.hasMoreTokens()) {
                                                        athr[i].setArticle(
                                                                str.nextToken(),
                                                                1);
                                                        athr[i].setArtCtr(2);
                                                        if (str.hasMoreTokens()) {
                                                            athr[i].setArticle(
                                                                    str.nextToken(),
                                                                    2);
                                                            athr[i].setArtCtr(3);
                                                            if (str.hasMoreTokens()) {
                                                                athr[i].setArticle(
                                                                        str.nextToken(),
                                                                        3);
                                                                athr[i].setArtCtr(4);
                                                                if (str.hasMoreTokens()) {
                                                                    athr[i].setArticle(
                                                                            str.nextToken(),
                                                                            4);
                                                                    athr[i].setArtCtr(5);
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }

                            if (flag != 0) {
                                flag = 0;
                                athr[athCtr].setId(tempId);
                                if (str.hasMoreTokens()) {
                                    athr[athCtr].setName(str.nextToken());
                                    if (str.hasMoreTokens()) {
                                        athr[athCtr].setDepart(str.nextToken());
                                        if (str.hasMoreTokens()) {
                                            athr[athCtr].setEmail(str
                                                    .nextToken());
                                            if (str.hasMoreTokens()) {
                                                athr[athCtr].setArticle(
                                                        str.nextToken(), 0);
                                                athr[athCtr].setArtCtr(1);
                                                if (str.hasMoreTokens()) {
                                                    athr[athCtr].setArticle(
                                                            str.nextToken(), 1);
                                                    athr[athCtr].setArtCtr(2);
                                                    if (str.hasMoreTokens()) {
                                                        athr[athCtr]
                                                                .setArticle(
                                                                        str.nextToken(),
                                                                        2);
                                                        athr[athCtr]
                                                                .setArtCtr(3);
                                                        if (str.hasMoreTokens()) {
                                                            athr[athCtr]
                                                                    .setArticle(
                                                                            str.nextToken(),
                                                                            3);
                                                            athr[athCtr]
                                                                    .setArtCtr(4);
                                                            if (str.hasMoreTokens()) {
                                                                athr[athCtr]
                                                                        .setArticle(
                                                                                str.nextToken(),
                                                                                4);
                                                                athr[athCtr]
                                                                        .setArtCtr(5);
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                athCtr++;

                            }

                        }

                        else {
                            System.out.println(tempId);
                            athr[0].setId(tempId);
                            System.out.println(athr[0].getId());
                            if (str.hasMoreTokens()) {

                                athr[athCtr].setName(str.nextToken());
                                if (str.hasMoreTokens()) {
                                    athr[athCtr].setDepart(str.nextToken());
                                    if (str.hasMoreTokens()) {
                                        athr[athCtr].setEmail(str.nextToken());
                                        if (str.hasMoreTokens()) {
                                            athr[athCtr].setArticle(
                                                    str.nextToken(), 0);
                                            athr[athCtr].setArtCtr(1);
                                            if (str.hasMoreTokens()) {
                                                athr[athCtr].setArticle(
                                                        str.nextToken(), 1);
                                                athr[athCtr].setArtCtr(2);
                                                if (str.hasMoreTokens()) {
                                                    athr[athCtr].setArticle(
                                                            str.nextToken(), 2);
                                                    athr[athCtr].setArtCtr(3);
                                                    if (str.hasMoreTokens()) {
                                                        athr[athCtr]
                                                                .setArticle(
                                                                        str.nextToken(),
                                                                        3);
                                                        athr[athCtr]
                                                                .setArtCtr(4);
                                                        if (str.hasMoreTokens()) {
                                                            athr[athCtr]
                                                                    .setArticle(
                                                                            str.nextToken(),
                                                                4);
                                                athr[athCtr]
                                                        .setArtCtr(5);
                                            }
                                        }
                                    }
                                }

enter code here

        }
                                    }
                                }
                            }
                            athCtr++;
                        }
                    }
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:50:46.647

您只有定义数组`Authors`。但是您还没有初始化元素。（如我所见：P）
`Author athr[] = new Author[500];`对于引用类型数组来说是不够的。在该行之后使用它；

```
 for(int z=0;z<athr.length;z++){
     athr[z]=new Author();
   } 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-16T12:39:22.053

您的数组没有任何元素！你刚刚声明了它，但你没有初始化它！作者 athr[] =新作者 [500]; 现在该数组没有任何数据，所有元素都为空！现在，当您尝试使用元素时，您会得到 NullPointException！现在先采取

```
 Author a= new Author(); 
    a.setName("bro");
    a.setId(123);
    arthr[0]=a; // you have an element in the first Index!
               // now, you want to initialize all
    for(int i=0; i< arthr.length; i++){
      arthr[i] =new Author();
      arthr[i].setName("bro");//you can set and get names, id's etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:57:25.273

您已经声明了一个类型为 的数组`Author[]`。这不是你想的那样。您实际上告诉 JVM 的是“为 500 个作者对象保留此空间”，但您没有指定这些对象。所以之后：

```
Author athr[] = new Author[500]; 
```

您有一个如下所示的数组：

```
{null, null, null.... null} // From 0 to 500. 
```

`new`然后，您需要使用关键字为这些引用类型提供要引用的内容来填充此数组。

```
athr[32] = new Author(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T13:21:42.897

我同意这个答案，而不是在使用它之前我们需要初始使用数组元素。

```
for(int z=0;z<athr.length;z++){
     athr[z]=new Author();
   } 
```

但看起来您正在处理 TSV 文件并将数据存储在 Author 对象中。

以较少复杂性实现这一目标的最简单方法是

[apache常见的csv示例](http://www.baeldung.com/apache-commons-csv)

这真的会简化你的程序。值得一看。

## ## book.csv ##

作者，标题

丹·西蒙斯，Hyperion

道格拉斯·亚当斯，银河系漫游指南

* * *

## 读取csv的代码

```
List<Author> authList = ArrayList<>();
Author author = null;
Reader in = new FileReader("book.csv");
    Iterable<CSVRecord> records = CSVFormat.DEFAULT.parse(in);
    for (CSVRecord record : records) {
        author = new Author();
        author.setAuthor(record.get(0));
        author.setTitle(record.get(1));
        authList.add(author);
    } 
```

# php - 如何防止 SQL 注入更改 URL 参数（DELETE 语句）PHP

> ID：16130289
> 
> 赞同：0
> 
> 时间：2013-04-21T10:39:20.653
> 
> 标签：php, mysql, sql-injection, url-parameters

我有一个如下代码，用于通过 URL 参数进行 DELETE 条目

```
<td><a href="deletecar.php?car_id=<?php echo $row_cars['car_id']; ?>" onclick=" if ( !confirm('Are you sure to DELETE?') ) return false; ">Delete</a></td> 
```

这是 URL 参数输出

```
http://localhost/html/deletecar.php?car_id=17 
```

但是，如果我将 car_id=17 更改为 car_id=23（在其他用户的汽车列表中），它将被删除

我怎样才能防止这种情况

deletecar.php 如下所示

```
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

if ((isset($_GET['car_id'])) && ($_GET['car_id'] != "") && (isset($_SESSION['MM_Username']))) {
  $deleteSQL = sprintf("DELETE FROM cars WHERE car_id=%s",
                       GetSQLValueString($_GET['car_id'], "int"));

  mysql_select_db($database_conn, $conn);
  $Result1 = mysql_query($deleteSQL, $conn) or die(mysql_error());

  $deleteGoTo = "myaccount.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $deleteGoTo .= (strpos($deleteGoTo, '?')) ? "&" : "?";
    $deleteGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $deleteGoTo));
}
?> 
```

这是我在数据库中的表

```
INSERT INTO `car` (`car_id`, `c_id`, `c_brand`, `c_model`, `c_model_nd`, `c_model_year`, `c_color`, `c_capacity`, `c_owner`, `c_statu`, `c_show`) VALUES
(16, '34DA1593', 'Volkswagen', 'Volt', '313 CDI', 2006, 'Beyaz', '', 18, 'yakamozturizm', 'Boş', 0),
(17, '34BC5897', 'Mercedes', 'Sprinter', '313CDI', 2006, 'Gri', '', 14, 'PcRestorer', 'Boş', 0),
(18, '34DBC145', 'Volkswagen', 'Volt', '213 CDI', 2013, 'Beyaz', '', 16, 'PcRestorer', 'Boş', 0); 
```

编辑....

我已经改变了我的代码

```
$colname_delete = "-1";
if (isset($_GET['car_id'])) {
  $colname_delete = $_GET['car_id'];
}
$owner_delete = "-1";
if (isset($_SESSION['MM_Username'])) {
  $owner_delete = $_SESSION['MM_Username'];
}

if ((isset($_GET['car_id'])) && ($_GET['car_id'] != "")) {
  $deleteSQL = sprintf("DELETE FROM minibusler  WHERE car_id = %s AND c_owner =%s", 

GetSQLValueString($colname_delete, "int"),
GetSQLValueString($owner_delete, "text"));

  mysql_select_db($database_conn, $conn);
  $Result1 = mysql_query($deleteSQL, $conn) or die(mysql_error());

  $deleteGoTo = "myaccount.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $deleteGoTo .= (strpos($deleteGoTo, '?')) ? "&" : "?";
    $deleteGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $deleteGoTo));
} 
```

它看起来有效，您认为这样做是安全的吗

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:41:24.637

无论如何，在删除之前，`car`您都应该检查它是否属于当前用户。如果没有显示合适的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:47:36.703

让它不那么臃肿

```
if (empty($_SESSION['MM_Username'])) {
  exit; // take appropriate action here
}
if (empty($_GET['car_id'])) {
  exit; // take appropriate action here
}

mysql_select_db($database_conn, $conn);
$sql = sprintf("DELETE FROM minibusler  WHERE car_id = %s AND c_owner =%s", 
                GetSQLValueString($_GET['car_id'], "int"),
                GetSQLValueString($_SESSION['MM_Username'], "text"));
mysql_query($sql, $conn) or trigger_error(mysql_error());

header("Location: myaccount.php");
exit; 
```

# recursion - F# 惰性递归

> ID：16130291
> 
> 赞同：0
> 
> 时间：2013-04-21T10:39:32.827
> 
> 标签：recursion, f#, lazy-evaluation, tail-recursion

我在惰性计算中的递归有一些问题。我需要通过 Newton Raphson 方法计算平方根。我不知道如何应用惰性评估。这是我的代码：

```
let next x z = ((x + z / x) / 2.);
let rec iterate f x = 
    List.Cons(x, (iterate f (f x)));

let rec within eps list =
    let a = float (List.head list);
    let b = float (List.head (List.tail list));
    let rest = (List.tail (List.tail (list)));
    if (abs(a - b) <= eps * abs(b))
        then b
        else within eps (List.tail (list));
let lazySqrt a0 eps z = 
    within eps (iterate (next z) a0);

let result2 = lazySqrt 10\. Eps fvalue;
printfn "lazy approach";
printfn "result: %f" result2; 
```

当然，堆栈溢出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:12:24.510

您正在使用具有热切评估的 F# 列表。在您的示例中，您需要延迟评估和分解列表，因此[F# PowerPack 的 LazyList](https://github.com/fsharp/powerpack/blob/master/src/FSharp.PowerPack/LazyList.fsi)适合使用：

```
let next z x = (x + z / x) / 2.

let rec iterate f x = 
    LazyList.consDelayed x (fun () -> iterate f (f x))

let rec within eps list =
    match list with
    | LazyList.Cons(a, LazyList.Cons(b, rest)) when abs(a - b) <= eps * abs(b) -> b
    | LazyList.Cons(a, res) -> within eps res
    | LazyList.Nil -> failwith "Unexpected pattern"

let lazySqrt a0 eps z = 
    within eps (iterate (next z) a0)

let result2 = lazySqrt 10\. Eps fvalue
printfn "lazy approach"
printfn "result: %f" result2 
```

`head`请注意，我使用了比and更惯用的模式匹配`tail`。

如果您不介意稍微不同的方法，[Seq.unfold](http://msdn.microsoft.com/en-us/library/ee340363.aspx)在这里很自然：

```
let next z x = (x + z / x) / 2.

let lazySqrt a0 eps z =
    a0
    |> Seq.unfold (fun a -> 
            let b = next z a
            if abs(a - b) <= eps * abs(b) then None else Some(a, b))
    |> Seq.fold (fun _ x -> x) a0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:10:27.600

如果您需要**惰性**计算，那么您必须使用适当的工具。`List`不是懒惰的，它被计算到最后。您的`iterate`函数永远不会结束，因此整个代码堆栈都会在此函数中溢出。

你可以`Seq`在这里使用。
**注意**：`Seq.skip`几乎不可避免地会导致**O(N^2)**复杂度。

```
let next N x = ((x + N / x) / 2.);
let rec iterate f x = seq {
    yield x
    yield! iterate f (f x)
}

let rec within eps list =
    let a = Seq.head list
    let b = list |> Seq.skip 1 |> Seq.head
    if (abs(a - b) <= eps * abs(b))
        then b
        else list |> Seq.skip 1 |> within eps
let lazySqrt a0 eps z = 
    within eps (iterate (next z) a0);

let result2 = lazySqrt 10\. 0.0001 42.;
printfn "lazy approach";
printfn "result: %f" result2;
// 6.4807406986501 
```

* * *

另一种方法是使用`LazyList`F [# PowerPack](https://github.com/fsharp/powerpack/tree/master/src/FSharp.PowerPack)。该代码可在[本文中](http://fpish.net/topic/Some/4/59403)找到。为了完整性，将其复制到我的答案中：

```
open Microsoft.FSharp.Collections.LazyList 

let next N (x:float) = (x + N/x) / 2.0

let rec repeat f a = 
    LazyList.consDelayed a (fun() -> repeat f (f a))

let rec within (eps : float)  = function
    | LazyList.Cons(a, LazyList.Cons(b, rest)) when (abs (a - b)) <= eps -> b
    | x -> within eps (LazyList.tail x)

let newton_square a0 eps N = within eps (repeat (next N) a0)

printfn "%A" (newton_square 16.0 0.001 16.0) 
```

一些小注释：

*   你的`next`功能是错误的；
*   的含义`eps`是*相对准确性*，而在大多数学术书籍中我都看到了*绝对准确性*。两者之间的区别在于它是否是针对 测量的`b`，这里：`<= eps * abs(b)`。来自 FPish 的代码视为`eps`绝对*准确度*。

# java - java.lang.OutOfMemoryError：PermGen 空间：java 反射

> ID：16130292
> 
> 赞同：7
> 
> 时间：2013-04-21T10:39:37.127
> 
> 标签：java, reflection

我在这样的代码中使用 java 反射：

```
Method method = LogFactory.class.getDeclaredMethod("getContextClassLoader");
method.setAccessible(true);
ClassLoader classLoader = (ClassLoader)method.invoke(null);
LogFactory.release(classLoader); 
```

我用`jprofiler`可以看到很多这样的类`sun.reflect.GeneratedMethodAccessor11`

每次通话都会增加这些课程

```
sun.reflect.BootstrapConstructorAccessorImpl
sun.reflect.NativeConstructorAccessorImpl
sun.reflect.DelegatingConstructorAccessorImpl
sun.reflect.DelegatingClassLoader 
```

我想这就是为什么 PermGen 空间增加的原因，如何清理这些类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T12:02:29.430

有一篇非常好的文章讨论了[反射委托类加载器中潜在的本机内存使用](http://www-01.ibm.com/support/docview.wss?uid=swg21566549)。

> 当使用 Java 反射时，JVM 有两种方法可以访问被反射的类的信息。它可以使用 JNI 访问器或 Java 字节码访问器。如果它使用 Java 字节码访问器，那么它需要有自己的 Java 类和类加载器（sun/reflect/GeneratedMethodAccessor 类和 sun/reflect/DelegatingClassLoader）。这些类和类加载器使用本机内存。访问器字节码也可以进行 JIT 编译，这将进一步增加本机​​内存的使用。如果频繁使用 Java 反射，这可能会增加大量的本机内存使用量。JVM 将首先使用 JNI 访问器，然后在对同一类进行一定次数的访问后，将更改为使用 Java 字节码访问器。这称为通货膨胀，当 JVM 从 JNI 访问器更改为字节码访问器时。幸运的是，我们可以使用 Java 属性来控制它。sun.reflect.inflationThreshold 属性告诉 JVM 使用 JNI 访问器的次数。如果设置为 0，则始终使用 JNI 访问器。由于字节码访问器比 JNI 访问器使用更多的本机内存，如果我们看到大量 Java 反射，我们将希望使用 JNI 访问器。为此，我们只需要将通货膨胀阈值属性设置为零。

如果您使用的是 Oracle JVM，那么您只需要设置：

```
-Dsun.reflect.inflationThreshold=2147483647 
```

如果您使用的是 IBM JVM，那么您需要设置：

```
-Dsun.reflect.inflationThreshold=0 
```

请注意，两个 JVM 的解释方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T14:20:04.863

如果您使用的是 Oracle JVM，那么您只需要设置：

```
sun.reflect.inflationThreshold=2147483647 
```

如果您使用的是 IBM JVM，那么您需要设置：

```
-Dsun.reflect.inflationThreshold=0 
```

请注意，两个 JVM 的解释方式不同。

更多细节参考：

[通货膨胀系统属性](https://blogs.oracle.com/buck/entry/inflation_system_properties)

[本机内存使用](http://www-01.ibm.com/support/docview.wss?uid=swg21566549)

# php - 将变量名传递给 PHP 中的未设置函数

> ID：16130293
> 
> 赞同：1
> 
> 时间：2013-04-21T10:39:40.093
> 
> 标签：php, unset

我有这段代码：

```
<?php

$a = "dog";
$b = "cat";
$c = "pig";

$params = array($a, $b, $c);

some_function($params);

unset($a, $b, $c);

//echo "<br>".$a."<br>".$b."<br>".$c;

?> 
```

这里有什么优雅的方式，如何只将变量名（不是评估的变量）传递给未设置的函数？就像是：

```
unset($params); //but this doesn't work 
```

代替

```
unset($a, $b, $c); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:13:20.033

唯一的方法是定义变量名而不是变量值，并在 $GLOBALS 中取消设置：

```
<?php

$a = "dog";
$b = "cat";
$c = "pig";
$myvar = 'another var';

$params = array('a', 'b', 'c', 'myvar');

myunset($params);

function myunset($params){
 foreach($params as $v){
  unset($GLOBALS[$v]);
 }
}

var_dump($myvar); //NULL
?> 
```

# android - ScrollView 自动滚动

> ID：16130294
> 
> 赞同：-2
> 
> 时间：2013-04-21T10:40:02.373
> 
> 标签：android, scrollview

首先让我原谅这个问题，我知道很多人在这里问过这个问题，但是我太笨了，没有找到适合我的正确答案。我里面有一个 ScrollView 和许多 TextViews 和 ImageViews。我想像电影演职员表一样在屏幕上滚动所有这些东西。我找到了这个方法。它工作，但只有几秒钟，然后停止。：

```
 public void scrollRight(final ScrollView h){
    new CountDownTimer(2000, 1) { 

        public void onTick(long millisUntilFinished) { 
            h.scrollTo(0,(int) (2000-millisUntilFinished)/25);

        } 

        public void onFinish() { 

        } 
     }.start(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:48:31.370

您可以使用滚动条创建平滑的滚动动画。这里有一个例子： [Android: Scroller Animation?](https://stackoverflow.com/questions/5495855/android-scroller-animation)

基本上，您需要做的就是从 0 开始滚动到列表的末尾，并使用滚动值调用列表的 scrollTo 。

另一种选择是创建一个每次调用 scrollBy 的计时器。

编辑：另外，您创建 CountDownTimer 的方式使其运行 2000 毫秒，并每 1 毫秒调用一次 onTick。如果您希望它运行更长时间，只需增加总时间即可。我还建议使用更大的间隔 - 1 毫秒对于显示目的来说太频繁了。尝试这个：

```
new CountDownTimer(10000, 25) { 
     public void onTick(long millisUntilFinished) { 
     h.scrollBy(1,0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T22:33:41.470

您还可以使用 ObjectAnimator 来实现：

`ObjectAnimator.ofInt(view, "scrollY", 0, view.getBottom).setDuration(1000).start;`

# android - 如何在安卓应用程序中登录一次？

> ID：16130297
> 
> 赞同：0
> 
> 时间：2013-04-21T10:40:20.530
> 
> 标签：android, signing

我正在android中制作一个应用程序，它在菜单中有多个选项，并且在每个选项中都需要登录信息，所以我想让用户只签名一次，而不是每次他选择一个选项时就像 facebook 应用程序一样，即使应用程序在后台运行它也不会注销，我也只需登录一次。. sry 4 很长的解释，但我什至不知道搜索这个问题的关键字..

你们能帮帮我吗？感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T10:42:59.027

一旦用户第一次输入登录凭据，然后使用`SharedPreferences`并将值设置`isLogged`为`1`。

下次当用户打开应用程序时，如果该变量值为“1”，则检查该变量，然后打开主页活动。

```
SharedPreferences sharedPref = getSharedPreferences("data",MODE_PRIVATE);
int number = sharedPref.getInt("isLogged", 0);
if(number == 0) {
    //Open the login activity and set this so that next it value is 1 then this conditin will be false.
    SharedPreferences.Editor prefEditor = sharedPref.edit();
    prefEditor.putInt("isLogged",1);
    prefEditor.commit();
} else {
       //Open this Home activity
} 
```

# javascript - 如何清除禁用文本字段上的文本

> ID：16130302
> 
> 赞同：0
> 
> 时间：2013-04-21T10:41:07.800
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我使用 extjs4 创建了一个表单，其中有一些文本字段。我想知道当文本字段被禁用时是否可以使文本字段内的文本更“黑色”或清晰？如果可能的话，我该怎么做？我搜索了api，但似乎找不到答案。当它被禁用时，我几乎无法阅读其中的文字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:49:10.470

禁用字段会`x-item-disabled`添加类（您可以通过传递来更改它[`disabledCls`](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.AbstractComponent-cfg-disabledCls)）。
您可以在主题 (_core.scss) 或 css 中更改它。

例如：http: [//jsfiddle.net/8mjvg/1/](http://jsfiddle.net/8mjvg/1/)

```
.x-item-disabled {
    .-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    .filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);
    opacity: 0.8;
}  

.x-item-disabled .x-form-field {
    color: red;
} 
```

或者，您可以使用[`disable`](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.AbstractComponent-event-disable)&[`enable`](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.AbstractComponent-event-enable)事件来更改字段样式。

# apache - 如何使用 Apache httpd (v2.2) 将 http 代理到 https

> ID：16130303
> 
> 赞同：19
> 
> 时间：2013-04-21T10:41:09.670
> 
> 标签：apache, google-maps

我正在尝试在[Apache httpd](http://httpd.apache.org/)中设置一个[简单的 proxypass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)来代理某些请求。这是我尝试过的，但它似乎不喜欢从 http 到 https 的更改？

```
ProxyPass /maps https://maps.googleapis.com/maps 
```

也许我错过了一个额外的步骤？

我已经阅读了一些关于设置证书的内容，但是对于这样一个简单的任务，这似乎是冗长的？

我目前得到的结果是 500 错误。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-22T11:50:31.973

好的，在阅读了许多涉及设置证书和虚拟主机等的解决方案之后。我终于找到了一个不需要任何这些的基本配置。

这是我用来访问代理自动完成谷歌通过本地主机在包括 ssl 支持（[Windows 版本 2.2](http://archive.apache.org/dist/httpd/binaries/win32/)）的 Apache 安装上放置请求的内容。

编辑 apache 文件 httpd.conf

打开所需的模块...

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule ssl_module modules/mod_ssl.so 
```

转到文件底部并为 mod_proxy 添加以下配置...

```
<IfModule mod_proxy.c>

ProxyRequests Off

<Proxy *>
Order deny,allow
Allow from all
</Proxy>

SSLProxyEngine on
ProxyPass /maps https://maps.googleapis.com/maps
ProxyPassReverse /maps https://maps.googleapis.com/maps

</IfModule> 
```

就是这样，其余的都是我安装 Apache 时的所有默认配置设置。

有关 apache 代理的更多配置细节可以在[Apache mod_proxy 文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)中找到。

[2.2 版的](http://httpd.apache.org/docs/2.2/)通用 Apache文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:30:29.117

您需要先重定向到 https，然后从该虚拟主机执行 proxypass。另请参阅：[将 http 重定向到 https apache](https://stackoverflow.com/questions/10335329/redirect-http-to-https-by-configuring-conf-file-of-apache)

# vim - 在 VIM 中将 F1 绑定到 ESC

> ID：16130304
> 
> 赞同：3
> 
> 时间：2013-04-21T10:41:13.067
> 
> 标签：vim, linux-mint

晚上，

我有一台联想 T400 笔记本电脑，而 F1 处于一个愚蠢的地方，并且继续按它而不是按 Esc 来使用 VIM 更改模式。

我做了一些谷歌搜索，并尝试添加

```
map <F1> <Esc>
imap <F1> <Esc> 
```

到我的 ~/.vimrc 文件，但无济于事......

如果我不能用 vimrc 做到这一点，有没有办法在 linux/system 级别更改它？

使用 Linux Mint 14 伴侣

--

答：终端应用程序定义了键盘快捷键。在 Edit -> Keyboard Shortcuts 下，您可以禁用帮助。然后上面的 map/imap 就可以正常工作了。

您还可以在主系统键盘首选项中编辑键盘设置。打开它并转到 Layouts -> Options 并使用 Caps Lock 键行为。您可以禁用它，甚至将其绑定到 ESC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:09:08.567

可能是您的键盘没有生成 Vim 转换为的键码`<F1>`。在 Vim 中，进入插入模式，然后输入`Ctrl`- `v`。然后按`F1`。您刚刚插入的字符串是需要放在命令左侧的字符串`map`。它可能是`<x-F1>`或类似的东西。您可以这样做以将密钥名称直接插入`.vimrc`文件中。

`.vimrc`请记住在编辑文件后重新启动 Vim 。

不管你是否得到这个工作，你可能想交换你的`Esc`和`Caps Lock`键，这在 Vim 用户中是很流行的事情。你不能在 Vim 中做到这一点，你需要编辑你的 X 配置来实现它。[Vim 技巧 wiki 告诉你如何](http://vim.wikia.com/wiki/Map_caps_lock_to_escape_in_XWindows).

# file-io - 从文件中检索和操作数据

> ID：16130306
> 
> 赞同：1
> 
> 时间：2013-04-21T10:41:15.870
> 
> 标签：file-io, vector

下面的代码应该检索与玩家信息相关的数据，对其进行排序，然后重写现在组织的文件。将举一个文件的例子。

原始布局：

```
 3
  2  2

                John  33 M     5
                Anna  20 F     2
                Rody  23 M     1 
```

代码之后的样子：

```
 3
  2  2

                Rody  23 M     1
                Anna  20 F     2
                John  33 M     5 
```

我做了以下代码：

```
vector<string> playerScoresFromFile(const string filename) //Gets each one of those lines with the name, ..., and score of the person
{
int dim = filename[7] - '0'; // char to integer
vector<string> vec;
string line;

ifstream fin (filename.c_str());

for (int i = 0; i < dim + 1; i++)
{
    getline(fin, line);
}

while(! fin.eof())
{   
    getline(fin, line);
    vec.push_back(line);
}

return vec;
}

vector< vector<int> > readBoardFromFile(const string filename) //gets the board from the file (first 3 numbers)
{
int dim = filename[7] - '0'; // char to integer
string line;
vector< vector<int> >vec(dim, vector<int>(dim));

ifstream fin (filename.c_str());

int i = 0;
int j, k;
while(i < dim)
{
    getline(fin, line);
    int sizeOfLine = line.length();

    if (line[0] == '\0')
    {
        break;
    }
    else
    {
        for (j = 0, k = 0; j < (sizeOfLine / 3); j++, k += 3)
        {
            string elementOfVectorStr = (line.substr(k,3));
            int elementOfVectorInt = stringToInt(elementOfVectorStr);
            if (abs(elementOfVectorInt) > 100) // when the element is a " ", the corresponding integer is always
            {                                  // a very large number, positive or negative
                elementOfVectorInt = 0;
            }
            vec[i][j] = elementOfVectorInt;
        }
    }
    i++;
}

return vec;
}

vector<string> sortPlayersByTime (vector<string> &vec) // Creates a substring of the string extracted by "playerScoresFromFile" and analyses the times (Which are the last numbers to the right)
{
vector<int> timesInt(vec.size());

for (size_t i = 0; i < vec.size(); i++)
{
    string str = vec[i];
    timesInt[i] = stringToInt(str.substr(26));
}

for (size_t i = 0; i < vec.size() - 1; i++)
{
    if(timesInt[i] > timesInt[i+1])
    {
        swap(vec[i], vec[i+1]);
    }
}

return vec;
}

bool isOrdered (const vector<string> vec)  //Checks if the vector is ordered
{
vector<int> timesInt(vec.size());

for (size_t i = 0; i < vec.size(); i++)
{
    string str = vec[i];
    timesInt[i] = stringToInt(str.substr(26));
}

for (size_t i = 0; i < vec.size() - 1; i++)
{
    if(timesInt[i] > timesInt[i+1])
    {
        return false;
    }
}

return true;
}

void writeBoardToFile(vector< vector<int> >&vec, string filename) //Rewrites the board to the file (Those first 3 numbers of the file)
{
ofstream fout(filename.c_str());

for (size_t i = 0; i < vec.size(); i++)
{
    for (size_t j = 0; j < vec.size(); j++)
    {
        if(vec[i][j] != 0)
        {
            fout << setw(3) << vec[i][j];
        }
        else
        {
            fout << setw(3) << " ";
        }
    }

    fout << endl;
}
fout << endl;
}

void vec_to_file(vector<string> vec, string filename) //Rewrites the vector to the file
{

ofstream fout(filename, ios::app);

for (int i = 0; i < vec.size(); i++)
{
    fout << vec[i] <<endl;
}
}

void displayFile (string filename) //Displays the final board to check if it worked
{
vector<string> vec;
string line;

ifstream myfile (filename);

while ( ! myfile.eof() )
{
    getline (myfile, line);
    vec.push_back(line);
}

for (size_t i = 0; i < vec.size(); i++)
{
    cout << vec[i] <<endl;
}

}

int main()
{
    vector< vector<int> > vec = readBoardFromFile("puzzle_2x2_001.txt");

vector<string> vecxz = playerScoresFromFile("puzzle_2x2_001.txt");

writeBoardToFile(vec, "puzzle_2x2_001.txt"); //Writes the board to the file

while (! isOrdered(vecxz))  //This loop should run while they haven't been sorted out, but the program crashes here and I have no idea why.
{
    sortPlayersByTime(vecxz);
}

//vec_to_file(vecxy, "puzzle_2x2_001.txt"); //Should write the vector to the file upon sorting them out successfully.

cin.get();

} 
```

我的问题是程序每次进入 while(!isOrdered(vecxz)) 循环时都会崩溃，但我不知道为什么。谁能帮我一把？我会很感激:)

# cakephp - CakePHP：重定向不起作用

> ID：16130309
> 
> 赞同：2
> 
> 时间：2013-04-21T10:42:07.953
> 
> 标签：cakephp

我的控制器中有以下代码：

```
class ContactsController extends AppController {
    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');

    public function index() {
        $this->set('contacts', $this->Contact->find('all'));
    }

    public function view($id) {
        if (!$id) {
            throw new NotFoundException(__('Invalid contact'));
        }

        $contact = $this->Contact->findById($id);
        if (!$contact) {
            throw new NotFoundException(__('Invalid contact'));
        }
        $this->set('contact', $contact);
    }

    public function add() {                 
        if ($this->request->is('post')) {
            $this->Contact->create();
            if ($this->Contact->save($this->request->data)) {
                $this->Session->setFlash('Your contact has been saved.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add your contact.');
            }
        }
    }
} 
```

在 add() 方法中，`$this->redirect(array('action' => 'index'));`我希望这条线在我的视图中重定向回我的索引页面。但我得到的只是一张空白的白页。

任何帮助表示赞赏。

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-21T11:03:04.967

您的代码看起来有效；我在您提供的代码中没有看到错误。

有几个可能的原因；

*   您的代码中的其他地方有错误，但是 cake php 不输出错误消息，因为调试被禁用。通过在内部将调试设置为 1 或 2 来启用调试`app/Config/core.php`-`Configure::write('debug', 2);`
*   在发送重定向标头*之前*，您的应用程序正在向浏览器输出某些内容。`<?php`这可能是由任何or之前或之后的（不可见的）空白引起的`?>`。这将导致“标头已发送”警告，并且浏览器不会重定向。StackOverflow 上有很多关于这种情况的问题，例如：[How to fix "Headers already sent" error in PHP](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

笔记; `return`在 CakePHP 中，在任何重定向语句之前放置一个良好的做法；这将允许对您的应用程序进行更好的单元测试，即：

```
return $this->redirect(array('action' => 'index')); 
```

## 更新; 查找原因的附加“指针”

跟踪这类问题可能比较麻烦，我再补充一些指点

*   如果您正在使用`Auth`or`Security`组件，则其中之一可能会导致“问题”（例如，授权失败或发布的数据被标记为“无效”，这将由“blackHole（）”回调处理。禁用两者您的 AppController 检查问题是否仍然存在
*   如果问题仍然存在，*则*可能正在发送标头（如前所述），但没有出现警告/错误。要查找这些标头*是否*发送以及发送*位置*，请将此代码添加到您的“添加”操作中；

调试代码：

```
if (headers_sent($file, $line)) {
    exit("headers were already sent in file: {$file}, line number: {$line}");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-17T05:03:29.950

经过大量研究，我终于找到了解决方案。

请用

`ob_start();`在`AppController.php`

```
ob_start();
class AppController extends Controller {
     function beforeFilter() {
         parent::beforeFilter();
     }
} 
```

# java - 如何在java中下载页面并将其保存为UTF-8？

> ID：16130310
> 
> 赞同：0
> 
> 时间：2013-04-21T10:42:18.620
> 
> 标签：java, utf-8, httpurlconnection

**此函数以 UTF8 向服务器发送请求并以 UTF8 接收：**

```
public String downloadPage(String _url, String _reqm, String _params) {
        try {
            if (_reqm == null || (_reqm == "POST" && _params == null))
                throw new IOException();

            URL _myURL = null;

            if (_reqm == "GET") {
                _myURL = new URL(_params == null ? _url : _url + "?" + _params); //URLEncoder.encode(_params, "UTF-8")
            } else if (_reqm == "POST") {
                _myURL = new URL(_url);
            }

            HttpURLConnection pageConnection = (HttpURLConnection) _myURL.openConnection();
            pageConnection.setUseCaches(false);
            pageConnection.setDoOutput(true);
            pageConnection.setDoInput(true);
            pageConnection.setInstanceFollowRedirects(false);
            pageConnection.setRequestMethod(_reqm);

            pageConnection.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/xml");
            pageConnection.setRequestProperty("Accept-Charset", "UTF-8");
            pageConnection.setRequestProperty("charset", "UTF-8");
            pageConnection.setRequestProperty("Connection", "keep-alive");
            pageConnection.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31");

            if (_reqm == "POST") {
                pageConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

                OutputStreamWriter writer = new OutputStreamWriter(pageConnection.getOutputStream());
                writer.write(_params); //URLEncoder.encode(_params, "UTF-8")
                writer.flush();
                writer.close();
            }

            BufferedReader reader = new BufferedReader(new InputStreamReader(pageConnection.getInputStream()));
            String inputLine;
            StringBuilder text = new StringBuilder();

            while ((inputLine = reader.readLine()) != null) {
                text.append(inputLine + "\n");
            }

            reader.close();
            return text.toString();
        } catch (IOException e) {
            e.printStackTrace();
            return "ERROR";
        }
    } 
```

**此函数将 UTF8 字符串保存到 UTF8 格式的文件中：**

```
public void writeFile(String _content, String _fileName) {
        try {
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(new File(_fileName)), "UTF-8"));
            out.write(_content);
            out.flush();
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

我使用这两个，像这样：

```
String downloadedPage = myTelecom.downloadPage("http://www.sbrf.ru/moscow/ru/", "GET", null);
myIO.writeFile(downloadedPage, "original.html"); 
```

尽管有多种编码指示，但我无法使其工作。无论请求方法或域或“Accept-Charset”或“charset”，它都不起作用。

没有俄语，没有匈牙利字符看起来像他们应该的样子，我不知道我在哪里犯了错误。

可能是什么问题呢？

# unit-testing - 从 ajax 上传文件的 WebAPI 的单元测试

> ID：16130311
> 
> 赞同：1
> 
> 时间：2013-04-21T10:42:19.490
> 
> 标签：unit-testing, file-upload, asp.net-web-api

我需要将 csv 文件的内容导入到我的数据库中。我使用[本教程](http://www.codeguru.com/csharp/.net/uploading-files-asynchronously-using-asp.net-web-api.htm) 使用 ajax 上传文件，将其保存在本地服务器上，读取它，将项目插入数据库并从服务器中删除文件。

现在我想用单元测试来测试它。如何测试“发布”功能？如何为它“上传”一个 csv 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:05:52.087

这听起来更像是集成测试而不是单元测试。单元测试不会在系统之间（例如上传文件时）仅测试同一系统上不同逻辑的小片段。

查看[wikipedia 上的集成测试以](http://en.wikipedia.org/wiki/Integration_testing)获取更多详细信息。

此外，我强烈建议在实现任何逻辑之前先*编写测试。*

# java - 如何返回一维数组？

> ID：16130312
> 
> 赞同：2
> 
> 时间：2013-04-21T10:42:22.367
> 
> 标签：java, arrays

我正在一个课堂实验室工作，并且让 bwcomw 坚持我们必须编写的一种方法：

> `Member[] getMembersByYear(int firstYear, int last year)`– 查找并返回在两个指定年份之间加入的所有成员，包括在内。此方法返回 Java 一维数组中的成员。数组中不能有空槽。

我对如何解决这个问题有点困惑，我会很感激任何建议。这是我到目前为止所写的：

```
public class Club
{
// Define any necessary fields here ...
private ArrayList <Member> members;

/**
 * Constructor for objects of class Club
 */
public Club()
{
    // Initialise any fields here ...
    members = new ArrayList <Member>();
}

/**
 * Add a new member to the club's list of members.
 * @param member The member object to be added.
 */
public void join(Member member)
{
    members.add(member);
}

/**
 * @return The number of members (Member objects) in
 *         the club.
 */
public int numberOfMembers()
{
    if(members.size() > 0){
        return members.size(); 
    }
    else{
    return 0;
}
}

public void showMembers(){
    for(Member display: members){
        System.out.println(display.toString());

    }
}

public void showMembersByYear(int year){
    for(Member byYear: members){
         if(byYear.getYear() > 0){
             showMembers();
            }

    }
}

public Member[] getMembersByYear(int firstYear, int lastYear)
{
    Member checker = new Member();                                        //does not work, no constructor member() exists
    while((firstYear <= checker.getYear()) && (lastYear >= checker.getYear())){

    }

}

public void removeMembersByYear(int year){
    Iterator it = members.iterator();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:49:07.217

好的。很高兴看到你成功了！首先，在您的方法中，您可以创建一个`ArrayList`. 然后是循环遍历`members`数组的情况，当一年介于给定范围之间时，您应该将其添加到新的`ArrayList`. 然后，只需返回`ArrayList.toArray`方法。就像是：

```
 public Member[] getMembersInYear(int firstYear, int secondYear)
 {
     ArrayList<Member> membersInRange = new ArrayList<Member>();
     for(every member in members) {
         if(is in year) {
             membersInRange.add(currentMember);
         }
     }
     return membersInRange.toArray();
 } 
```

这将返回一个没有空值的数组，其中仅包含年份介于`firstYear`和之间的成员`secondYear`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:52:58.640

尝试这个

```
public Member[] getMembersByYear(int firstYear, int lastYear) {
    Iterator membersIterator = members.iterator(); 
    ArrayList<Member> returnValues = new ArrayList<Member>();
    while (membersIterator.hasNext()) {
        Member current = (Member)membersIterator.next();
        if ((current.getYear()>=firstYear) && (current.getYear()<=lastYear)) {
            returnValues.add(current);
        }
    }
    Member[] toReturn = new Member[returnValues.size()];
    returnValues.toArray(toReturn);
    return toReturn;
} 
```

希望这可以帮助

# python - 将变量放入变量中的麻烦

> ID：16130314
> 
> 赞同：0
> 
> 时间：2013-04-21T10:42:26.993
> 
> 标签：python, django, for-loop

我有很多图标，名称为 icon1、icon2、icon3 等等......它们来自服务器

如何制作forloop并`NUMBER`自动在循环中设置该图标？

我试过这个：

```
{% for i in "1234" %}
  {{icon}}{{forloop.counter}}
{% endfor %} 
```

但这并没有给我想要的东西。为什么我不能这样做：

```
{{ icon{{forloop.counter}} }}, 
```

但这给了我错误，说它无法解析表达式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:49:34.427

我猜你正在寻找你的`icon`变量和循环计数器的串联。

```
{% for i in "1234" %}
 {% with c=forloop.counter|stringformat:"s" %}
  {{icon|add:c}}
 {% endwith %}
{% endfor %} 
```

# c++ - 共享库中全局变量初始化的分段错误

> ID：16130315
> 
> 赞同：1
> 
> 时间：2013-04-21T10:42:42.170
> 
> 标签：c++, segmentation-fault, global-variables, shared-libraries

我有一个包含全局变量的共享库

```
    诠释***车；

```

这个变量在函数初始化

```
    __attribute__((constructor)) void init(void) {
        carg = generator->get_carg();
    }

```

在哪里

```
    int*** get_carg();

```

只返回预初始化的 carg 数组。

如果此库正在加载，则存在分段错误

> 程序收到信号 SIGSEGV，分段错误。/path/to/project/main.cpp:814 处的 init () 中的 0x00007fffebe05fea

在这个框架中

```
    (gdb) 打印卡
    $1 = (int ***) 0x0
    (gdb) 调用生成器->get_carg()
    $2 = (int ***) 0xf12410

```

为什么这个分配（一个指针被分配给另一个指针）是分段错误的原因？我怎样才能初始化这个变量？

UPD：我仍然不知道答案，但是当**carg**变量被重命名时，没有错误。我以为这个名字还有一个变量，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:49:22.790

可能生成器变量尚未初始化并且未指向有效对象。

然后调用 get_cargs() 会导致分段错误。

# file-io - 从具有特定扩展名的文件中读取数据

> ID：16130320
> 
> 赞同：1
> 
> 时间：2013-04-21T10:43:08.023
> 
> 标签：file-io, vbscript

我正在使用 VB 脚本从文本文件中读取数据。它工作正常。

我的挑战是文件名每天都在更改，并附有日期。该文件是一个文本文件，以 .TXT 扩展名结尾。因此，每次我必须将文件重命名为我在脚本中使用的固定名称时。

有没有办法从当前文件夹中读取文件，扩展名为 .TXT，无论文件名如何。在下面的代码中，我正在读取 SNMP.TXT 文件，但文件名可能是某一天的 SNMP_20130415_xxxx.TXT 和第二天的 SNMP_10130416_xxxx.TXT，依此类推。

```
Const ForReading = 1
Const ForWriting = 2
Const ForAppending = 8

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objInpoutFile = objFSO.OpenTextFile("D:\scripts\vb\FileHandleScript\SNMP.TXT",1)
Set objOutputFile = objFSO.OpenTextFile("D:\scripts\vb\FileHandleScript\snmp.csv",2,True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:09:53.550

循环遍历文件夹中的文件，使用正则表达式查找要处理的文件，处理完文件后退出循环：

```
Dim reFiNa : Set reFiNa = New RegExp
reFiNa.IgnoreCase = True
reFiNa.Pattern = "^snmp_.+\.txt$" ' starting with snmp_, ending with .txt
For Each oFile in objFSO.GetFolder("D:\scripts\vb\FileHandleScript").Files
    If reFiNa.Test(oFile.Name) Then
       ... process file ...
       Exit For
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:24:51.140

没有正则表达式的替代方案：

```
For Each f in objFSO.GetFolder("D:\scripts\vb\FileHandleScript").Files
  name = LCase(f.Name)
  If Left(name, 5) = "snmp_" And objFSO.GetExtensionName(name) = "txt" Then
    'do stuff
  End If
Next 
```

# ios - 用 2 个数组填充部分 tableview

> ID：16130323
> 
> 赞同：0
> 
> 时间：2013-04-21T10:43:18.627
> 
> 标签：ios, objective-c, uitableview

我想创建可以在截面表视图中显示位置信息的应用程序（如下所示）。

```
[section 1]
[row 1 - location information];
[row 2 - location information];

[section 2]
[row 1 - location information];
[row 2 - location information];
[row 3 - location information];
 ... 
```

我的想法是创建 2 个数组。一个是节标题的键数组。另一个数组用于表格视图行。在我的应用程序中，键数组有 3 个对象。另一个数组有 18 个对象。即有 3 个节标题，并在每个节中显示 6 个对象/表视图行。如何正确地将这些信息填充到剖面表视图中。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:49:15.937

最好的解决方案是创建一个包含两个对象（即数组）的字典。键可以是部分的名称。

现在，有了一个对象（字典），您就拥有了所需的所有信息。

在 numberOfSections 中只返回 [NSDictionary allKeys].count。在 cellForRow 中，根据 indexPath 从右边的数组中抓取对象。在numberOfRows中，只需根据indexPath从字典中抓取正确的数组，返回对象的个数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:50:08.910

```
//setting number of sections
- (int)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    return [keyArray count];
}

//setting the title for the section
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *sectionName;
    sectionName = [keyArray objectAtIndex:section];
    return sectionName;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString * MyIdentifier = @"MyIdentifier";
    UITableViewCell * cell = [self.tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
    }
    cell.textLabel.text = [otherArray objectAtIndex:indexPath.row];
    return cell;
} 
```

希望这可以帮助您开始...

我的建议是使用字典。键是节的标题，值是行的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:00:42.440

最好有一个数组。你可以像这样格式化你的数组

```
[
    {
        "Title": "Title of section 1",
        "Rows": [
            {
                "Title": "Value 1",
                "SubTitle": "Value 2"
            },
            {
                "Title": "Value 1",
                "SubTitle": "Value 2"
            },
            {
                "Title": "Value 1",
                "SubTitle": "Value 2"
            }
        ]
    }
] 
```

一个包含部分字典的主数组。部分将有自己的数据加上行的字典数组。

如果这个结构存储在一个数组中。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   [self.array count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSDictionary *section = self.array[section];
    NSArray *rows = section[@"Rows"];
    retrun [rows count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDictionary *section = self.array[section];
    return section[@"Title"];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Initialization of cell

    NSDictionary *section = self.array[indexPath.section];
    NSArray *rows = section[@"Rows"];

    NSDictionary *row = rows[indexPath.row];

    NSString *title = row[@"Title"];
    NSString *sutTitle = row[@"SubTitle"];

    //Assign them

    return cell;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T16:43:44.743

如果有人仍在寻找这个答案，我用 Swift 得到了答案

```
func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {

    let cell = tableView.dequeueReusableCellWithIdentifier("item", forIndexPath: indexPath)

    var item: Item!

    if indexPath.section == 0{
        item = array1[indexPath.row]
    }
    if indexPath.section == 1{
        item = array2[indexPath.row]
    }

    cell.textLabel?.text = item.name
    return cell
}

func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int{
    if section == 0 {
        return array1.count
    }
    return array2.count
} 
```

# android - 如何在android中显示videoview的时间

> ID：16130324
> 
> 赞同：2
> 
> 时间：2013-04-21T10:43:29.970
> 
> 标签：android, media, android-videoview

我有一个用于播放视频的 VideoView 和一个 MediaControler

我想在 textview 中显示视频的时间并在每次视频时更改它

我使用此代码播放视频：

```
private void play(String uri) {
    _player.setVisibility(View.VISIBLE);
    _player.setVideoURI(Uri.parse(uri));
    MediaController mc = new MediaController(this);
    _player.setMediaController(mc);
    _player.start();

    Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();

    _player.setLayoutParams(new FrameLayout.LayoutParams(width, width));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:26:48.490

此方法用于将毫秒转换为时间，_player.getDuration() 用于准备。

```
 public String milliSecondsToTimer(long milliseconds) {
    String finalTimerString = "";
    String secondsString = "";

    // Convert total duration into time
    int hours = (int) (milliseconds / (1000 * 60 * 60));
    int minutes = (int) (milliseconds % (1000 * 60 * 60)) / (1000 * 60);
    int seconds = (int) ((milliseconds % (1000 * 60 * 60)) % (1000 * 60) / 1000);
    // Add hours if there
    if (hours > 0) {
        finalTimerString = hours + ":";
    }

    // Prepending 0 to seconds if it is one digit
    if (seconds < 10) {
        secondsString = "0" + seconds;
    } else {
        secondsString = "" + seconds;
    }

    finalTimerString = finalTimerString + minutes + ":" + secondsString;

    // return timer string
    return finalTimerString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:59:23.747

您必须在 layout xml 文件中添加一个 seekbar ，而不是实现 seekbar ，以获得视频播放使用的实时进度

```
 MediaPlayer.getCurrentPosition() 
```

您必须编写一个可运行的方法来使用此方法每秒更新搜索栏：

```
 myseekbar.setProgress(myMediaPlayer.getCurrentPosition()) 
```

您必须从 getCurrentPosition 检索时间。

接受我的回答？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T01:24:32.267

这是使用 "TimeUnit" 的另一种转换方法：

```
static String getTimeString(Long millis) {
   return String.format("%02d:%02d:%02d",
        TimeUnit.MILLISECONDS.toHours(millis),
        TimeUnit.MILLISECONDS.toMinutes(millis) -
        TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),
        TimeUnit.MILLISECONDS.toSeconds(millis) -
        TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:52:27.650

你可以使用

```
 MediaPlayer.getDuration() 
```

检索视频的总时间。您最好设置一个搜索栏来检索视频的进度并将其写入 textview 或更好地在计时器上。或者您可以在视频开始时简单地启动计时器。

# web-services - 语义网络服务中 owl-s 与 wsdl-s 的区别？

> ID：16130325
> 
> 赞同：1
> 
> 时间：2013-04-21T10:43:45.457
> 
> 标签：web-services, semantic-web

我实际上是在处理语义 Web 服务，更具体地说是 WS 组合。

为了在 Web 服务中添加语义，我找到了两条路径（使用 owl-s 或 wsdl-s），那么每个解决方案的限制是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T12:38:45.150

在我看来，OWL-S 和 WSDL-S 都同样过时了。这两种方法都是在重量级服务描述被认为是构建 Web 服务架构的最佳方式时构思的。现在，除了一些内部企业开发团队可能例外，Web 服务 API 通常基于相当简单的基于 HTTP 的方法，使用 JSON（通常）或 XML（不太常见）作为有效负载。他们经常声称使用 REST 作为定义服务的基础，尽管在许多情况下，这个术语是否被正确使用还很不清楚。总的来说，这些服务是通过开发人员阅读 API 文档和编写代码来调用的，而不是一些涉及服务描述语言处理的繁琐半自动化过程。

我不知道有任何广泛使用的技术可以用来描述我上面描述的现代 Web 服务的元数据。有诸如[json-service](http://code.google.com/p/json-service/wiki/Specification)之类的方法，但我不知道它们的使用范围有多广。

我认为事实是，将丰富的服务描述作为一流的对象从未被证明像人们预期或希望的那样有用。[尤其是，我们从未从服务编排](http://en.wikipedia.org/wiki/Service_choreography)或[基于代理的 Web 服务](https://www.google.co.uk/search?q=agent%20based%20web%20services)中设想的更简单的组件服务实现复杂服务的灵活、动态组合。我认为描述服务在调用时会做什么被证明是一个比早期研究调查预期的要困难得多的问题也是正确的，而过早的标准化尝试实际上使问题变得更糟而不是更好。

如果您对 Web 服务组合感兴趣，我强烈建议您阅读一些广泛的研究文献，以了解为解决开发人员真正想要解决的问题而尝试和失败的努力的规模。然后问问自己*，您要解决的用户*问题是什么。不要只是发明一些技术，然后试图找出它可能有用的地方——这种方法已经尝试过了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T14:28:42.323

SWS还有很长的路要走。WSDL 2.0：RDF 映射 W3C 规范定义了 WSDL 2.0 - OWL 映射。主要问题不是如何在本体中描述服务，而是如何处理类型系统。Linked Data 基于与 XML Schema 消息描述完全不同的 DL 模型 (OWL2)。OWL 1/2 部分采用 XML 数据类型，但不能只使用 OWL2/XML 序列化。可以直接使用 OWL/RDF 消息（传递具有对应数据的个人），但是在 WSDL 中没有定义这种模式的标准方法。XML Schema 在这里是另一个刹车 - 它不支持多重继承，因此 OWL / XML 之间的映射并不那么容易（公平地说，在 XML 中根本没有继承的概念）。

恕我直言，解决方案是创建一种新的 XML Schema 语言，保留类型系统，但将结构规范更改为“友好的链接数据”。然后，基于“XML Schema 2.0”规范提供新的 OWL 序列化格式，其中所有数据类型和个体将直接表示，因此可以在结构上用 XML 表示。显然可能会有很多问题——如何在 XML Schema QNames 中表示 OWL IRI？

亲切的问候，

D.

# facebook - 谷歌分析自定义字段

> ID：16130326
> 
> 赞同：2
> 
> 时间：2013-04-21T10:43:54.217
> 
> 标签：facebook, google-analytics

我正在尝试在 google 分析脚本上添加自定义字段以跟踪 facebook 广告/帖子。我读到我必须在分析脚本上添加一些自定义字段：

```
_gaq.push(['setCampSourceKey', 'utm_source']);
_gaq.push(['_setCampMediumKey', 'utm_medium']);
....etc. 
```

问题是我看到谷歌改变了分析跟踪代码格式，如下所示：

```
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXXXXXX-1', 'XXXXX.com');
ga('send', 'pageview'); 
```

任何想法我应该如何添加这个自定义字段？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:08:36.450

GA Universal 的语法是...

```
ga('set', 'campaignName', '<name>');
ga('set', 'campaignSource', '<name>'); 
```

查看[此参考页面](https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#trafficsources)以了解所有字段。

# jquery - jQuery 2.0 放弃了对 IE6/7/8 的支持，那么 1.x 分支会维持多久呢？

> ID：16130331
> 
> 赞同：4
> 
> 时间：2013-04-21T10:44:32.557
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, internet-explorer-6, jquery-2.0

jQuery 2.0 刚刚发布，完全放弃了对 Internet Explorer 6、7 和 8 [[更多...](http://blog.jquery.com/2013/04/18/jquery-2-0-released/) ] 的支持。目前 [2013 年 4 月] 1.9.x 分支仍在维护中，可能会得到一些改进和错误修复 [1.10 即将到来！]，但肯定不会太久。jQuery 宣布可以在同一页面上使用 2.0 和 1.9，但迟早会放弃这个分支。

凭借 6-7% 的全球市场份额 [[更多...](http://www.w3schools.com/browsers/browsers_explorer.asp) ]，在某些国家甚至 50%（中国等 [[更多...](http://www.ie6countdown.com/) ]），IE8/7/6 组仍然是网络上的一件大事，并且许多大型老派公司仍在内部使用它们，没有更新的计划。现实情况是：即使在 2015 年，IE6/7/8 用户也将在经济上达到可观的数量[根据燃尽计算]。而经常听到的“让我们放弃那些用户”的说法并不好，在专业的公司环境中，没有销售人员会同意这一点，即使用户的百分比是0.5％！遗憾的是，IE8/7 在 2013 年、2014 年和 2015 年对许多前端开发人员来说仍然很重要，因为主要与来自亚洲等地的客户一起工作的人可能会更长（！）。

**所以我的问题是：是否有官方声明显示 jQuery 1.x 分支的长期服务路线图？**

*注意：我询问了官方的 jQuery 团队，但还没有得到答案。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:57:57.810

似乎还没有官方声明显示长期服务路线图，但已经承诺不会很快放弃。根据他们的[官方声明](http://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/)：

**“只要那些旧版本的 IE 仍然是一个因素**，jQuery 团队将继续同时支持 jQuery 1.x 和 2.x 线......我们完全期望大多数 Internet 网站可能会继续使用 jQuery 1 .x 很长一段时间，只要旧版本的 IE 仍然包含很大比例的网络冲浪者。所以 jQuery 团队也将继续支持 jQuery 1.x 和 2.x 线”

# asp.net - 离开使用 iframe 引用的页面

> ID：16130333
> 
> 赞同：1
> 
> 时间：2013-04-21T10:45:17.717
> 
> 标签：asp.net, html, iframe

我目前拥有的是一个页面，我将其用作我的 html 页面的站点管理员。我这样做的方式是使用这行代码引用母版页：

```
<iframe scrolling="no" style="width:100%;" frameBorder="0" src="WebForm1.aspx"></iframe> 
```

现在工作正常，我可以创建一个新页面并引用它，然后该页面中的内容将出现在任何引用它的页面上。

但是我有一个问题，我想要的是，如果您单击引用此站点主站的页面标题中的导航按钮；它导航离开，但只有 iframe 将保存网页，主要内容仍然相同。

例如：

在我使用 Iframe 引用的母版页中，我有一些代码，当您单击按钮时，它会导航离开，好的。但是，如果我进入引用母版的页面并单击按钮，则新网页只会在页面顶部的 iframe 部分中打开。

抱歉这个复杂的问题，如果有人理解它，那么任何建议都会有所帮助！

引用母版的页面：

[http://codepad.org/IyrDxAf9](http://codepad.org/IyrDxAf9)

母版页本身：

[http://codepad.org/XMu67H1M](http://codepad.org/XMu67H1M)

PS ...我在asp.net中使用html对此进行编码

所有这一切的目的是为 html 创建一个母版页，但我没有太多运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:57:39.690

您可以在 webform1.aspx 页面中设置以下内容：

```
<base target="_parent" /> 
```

这会将该页面上的所有链接定位到“父”窗口。您也可以使用单个链接执行此操作。

看到您在这里使用 .aspx 页面，您是否有理由不使用内置的母版页功能？

# html - 此 div 的 margin-top 在 Firefox 中不起作用

> ID：16130337
> 
> 赞同：0
> 
> 时间：2013-04-21T10:45:54.087
> 
> 标签：html, css

我已将布局划分为 div，在 div="content" 区域内，我有一个表格和一个需要定位的过滤器选项。我试图在过滤器选项区域和导航栏之间插入一些边距。这在 Chrome 中看起来不错，但在 Mozilla Firefox 中，过滤器选项显示得比它们应该的要低。

这是我的代码以及它目前的样子：

[http://jsfiddle.net/elmiri/5mXJ7/](http://jsfiddle.net/elmiri/5mXJ7/)如果您在 Chrome 中打开此链接，过滤器选项看起来不错，但在 Mozilla 中看起来非常糟糕。这是我的所有代码：

```
<div id="header">
<h1>LOGO</h1>
</div>

<div id="navigation">
<ul>
    <li><a href="">Home</a></li> 
    <li><a href="">Test</a>
    <li><a href="">Test</a>
    <li><a href="">Test</a> 
    <li><a href="">Activity Feed</a> 
    <li><a href="">Stats</a> 
    <li><a href="">Contact Us</a> 
    <li><a href="http://localhost/playtime/itms/Users/users.php">Users</a> 
    <li><a href="">My account</a> 
    </ul>

</div>
</body>
</html>
<div id="personalised">
<p>Hello, </p>
</div>
<div id="content">
<form id="form1" method="get" action="">
<div id= "filter">
  <label for="column">Select client type:</label>
  <select name="column" id="column">
    <option selected>Key</option>
    <option >Norm</option>
    <option >Onb</option>
  </select>
  <input type="submit" name="change" id="change" value="Filter">
  <input type="submit" name="Remove" id="Remove" value="Show all">
  </div>
<table>
  <tr>
    <th scope="col">Client name</th>
    <th scope="col">Client type</th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
  </tr>
    <tr>
    <td>Client2</td>
    <td>KEY</td>
    <td><a href="#" onclick="newWindow('update_clients.php?client_id=3', 800, 800)">EDIT</a></td>
    <td><a href="delete_clients.php?client_id=3">DELETE</a></td>
  </tr>
    <tr>
    <td>Client3</td>
    <td>KEY</td>
    <td><a href="#" onclick="newWindow('update_clients.php?client_id=5', 800, 800)">EDIT</a></td>
    <td><a href="delete_clients.php?client_id=5">DELETE</a></td>
  </tr>
    <tr>
    <td>client4</td>
    <td>NORM</td>
    <td><a href="#" onclick="newWindow('update_clients.php?client_id=7', 800, 800)">EDIT</a></td>
    <td><a href="delete_clients.php?client_id=7">DELETE</a></td>
  </tr>
    <tr>
    <td>client4</td>
    <td>ONB</td>
    <td><a href="#" onclick="newWindow('update_clients.php?client_id=8', 800, 800)">EDIT</a></td>
    <td><a href="delete_clients.php?client_id=8">DELETE</a></td>
  </tr>
    <tr>
    <td>client100</td>
    <td>Key</td>
    <td><a href="#" onclick="newWindow('update_clients.php?client_id=13', 800, 800)">EDIT</a></td>
    <td><a href="delete_clients.php?client_id=13">DELETE</a></td>
  </tr>
  </table>
</div> 
```

这是定位过滤器选项的代码部分：

```
<div id= "filter">
  <label for="column">Select client type:</label>
  <select name="column" id="column">
    <option <?php if ($col == 'Key') echo 'selected'; ?>>Key</option>
    <option <?php if ($col == 'Norm') echo 'selected'; ?>>Norm</option>
    <option <?php if ($col == 'Onb') echo 'selected'; ?>>Onb</option>
  </select>
  <input type="submit" name="change" id="change" value="Filter">
  <input type="submit" name="Remove" id="Remove" value="Show all">
  </div> 
```

CSS代码：

```
#filter {
float:right;
margin-top: 2%;
} 
```

这个过滤器 div 在 Content div 内，所以我不确定这是否会导致问题。我尝试将 margin-top 设置为 20 px，但它仍然无法在 Firefox 中运行。如果有人帮助我在导航栏和过滤器选项之间设置一个间隙，以便它在 Chrome 和 Mozilla 中看起来都很好，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:56:55.383

这是因为`margin-top`if 设置为百分比，它与元素的父宽度成正比，而不是像通常期望的那样与高度成正比。[MDN 上的保证金](https://developer.mozilla.org/en-US/docs/CSS/margin)。

# linux - 为什么（C-）堆栈最大为 2mb？

> ID：16130342
> 
> 赞同：0
> 
> 时间：2013-04-21T10:46:44.153
> 
> 标签：linux, memory, stack-overflow, allocation

这个问题是关于堆栈溢出的，所以问这里比这里更好。

如果我们考虑如何在 unix 中为程序 (a.out) 使用内存，它是这样的：

```
| etext | stack, 2mb | heap ->>> 
```

几年来我一直想知道为什么堆栈有 2MB 的限制。考虑到我们有 64 位的内存地址，那么为什么不这样分配：

```
| MIN_ADDR                                                              MAX_ADDR|
| heap ->>>>                                                 <<<- stack | etext | 
```

MAX_ADDR 将在 2^64 附近，而 MIN_ADDR 在 2^0 附近，因此程序可以使用许多字节，但内核不一定会考虑（通过实际为它们分配页面）。堆和堆栈可能永远不会相互到达，因此不需要 2MB 的限制（而是有 ~1.8446744e+19 字节的限制）。如果我们害怕它们会互相影响，那么将限制设置为 2^63 或一些奇怪而巨大的数字。

此外，堆从低到高增长，因此我们的内核仍然可以调整内存块的大小（例如使用 malloc 分配），而不必移动内容。

此外，在某种程度上，堆栈帧的大小始终是静态的。所以我们永远不需要在那里调整大小，如果我们这样做，那无论如何都会很尴尬，因为我们还需要更改*return*使用的整个指针结构并由*call*创建。

我将此作为另一个stackoverflow问题的答案阅读：

“我的直觉是这样的。栈不像堆那么容易管理，栈需要存储在连续的内存位置。这意味着你不能根据需要随机分配栈，但你至少需要保留虚拟用于该目的的地址。保留的虚拟地址空间的大小越大，您可以创建的线程就越少。

来源：[为什么Linux（x86）的页面大小是4 KB，这是如何计算的](https://stackoverflow.com/questions/11543748/why-is-the-page-size-of-linux-x86-4-kb-how-is-that-calcualted)

但是我们有大量的内存地址！所以这没有任何意义。那么为什么是 2MB 呢？

我问的原因是，就悬空指针和内存泄漏而言，在堆栈上分配内存是非常安全的：

例如我更喜欢

```
int foo[5]; 
```

代替

```
int *foo = malloc(5*sizeof(int)); 
```

因为它会自行释放。此外，堆栈上的分配比 malloc 执行的分配更快。但是，如果我在堆栈上分配一个图像（即 jpeg 或 png），我就处于堆栈溢出的危险区域。

关于这件事的另一点，为什么不也允许这样做：

```
int *huge_list_of_data = malloc(1000*sizeof(char), 10 000 000 000*sizeof(char)) 
```

我们分配了一个列表对象，它最初的大小为 1KB，但我们要求内核分配它，以便放置它的页面不用于其他任何东西，并且我们希望在它后面有 10GB 的页面，必要时可以（部分）交换。

这样我们就不需要 10GB 的内存，我们只需要 10GB 的内存*地址*。

那么为什么不：

```
void *malloc( unsigned long, unsigned long ); 
```

?

本质上：为什么不使用 UNIX 的分页系统来解决我们的内存分配问题？

感谢您的阅读。

# angularjs - 有没有一种方法可以让我从 $resource 中返回一个 Promise 而无需使用 $q？

> ID：16130345
> 
> 赞同：3
> 
> 时间：2013-04-21T10:46:57.493
> 
> 标签：angularjs

我编写了以下服务：

```
angular.module('App')
    .factory('TestService', ['$http', '$q', '$resource', function (
                          $http, $q, $resource) {

        var TestResource = $resource('/api/Tests', {}, {
            saveData: { method: 'PUT' },
            deleteData: { method: "DELETE", params: { TestId: 0 } }
        });

        var factory = {

            query: function (selectedSubject) {
                var deferred = $q.defer();
                TestResource.query({ subjectId: selectedSubject },
                   function (resp) {
                       deferred.resolve(resp);
                   }
                );
                return deferred.promise;

                //return Test.query({ subjectId: selectedSubject });
            }

        }
        return factory;
}]); 
```

在我的控制器中，我这样称呼它：

```
TestService.query($scope.selectedSubject)
                        .then(function (result) {
                            $scope.gridData = result;
                        }, function (result) {
                            alert("Error: No data returned");
                        }); 
```

有没有一种方法可以通过在我的服务中没有 $q 来减少几行代码。有没有办法可以从 $resource 中返回一个承诺？我已经尝试了注释掉的代码，但这给了我一个错误，说没有“.then”方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:15:18.573

$resource 在当前稳定版本的 Angular (1.0.8) 中无法返回承诺，但它看起来会在 1.2 版本中出现。[它是在 v1.1.3 中添加的](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#features-1)（v 1.1 是不稳定的分支）：

> **$resource** : 通过 $then 和 $resolved ( [dba6bc73](https://github.com/angular/angular.js/commit/dba6bc73e802fdae685a9f351d3e23c7efa8568a) )公开基于 Promise 的 API

# c# - 绑定组合框，获取返回值并将其保存到用 C# Wpf 编码的数据库中

> ID：16130346
> 
> 赞同：1
> 
> 时间：2013-04-21T10:47:13.260
> 
> 标签：c#, wpf, combobox

我在这个问题上苦苦挣扎了一周，我到处搜索，但自己找不到答案。我从这里的线索完成了一半，但无法完成。
我想做什么：我想将一两个字段绑定到我的组合框（一或两列组合）。这些组合字段的每个字段都有一个 ID，它是我的数据库中我的配置文件表中的一个 FK。DB是一个实体框架Model first[.edmx]（自动生成代码）。我已经像这样连接到我的数据库：

**数据访问：**

```
 #region Fields

    MedManAgeDbEntities objDataContext;
    readonly List<Patient_Profile> _patientsList;
    readonly List<Renal_Function> _renalFunctionsList;

    #endregion // Fields
    /// <summary>
    /// Creates a new repository of patients.
    /// </summary>
    public PatientProfile()
    {
        objDataContext = new MedManAgeDbEntities();
        _patientsList = objDataContext.Patient_Profiles.ToList();
        _renalFunctionsList = objDataContext.Renal_Functions.ToList();
    }

    #endregion // Creation

    #region Public Interfaces

    public ObservableCollection<Renal_Function> GetRenalFunction()
    {
        ObservableCollection<Renal_Function> temp = new ObservableCollection<Renal_Function>(objDataContext.Renal_Functions.ToList<Renal_Function>());
        return temp;
    } 
```

**视图模型：**

```
 #region Fields

    RelayCommand _saveCommand;
    readonly PatientProfile _patientsList = new PatientProfile();
    readonly Patient_Profile tempPatient;
    public ObservableCollection<Renal_Function> _renalFunction;

    #endregion //Fields

    #region Constructor

    public patientCharacteristicViewModel()
    {
        tempPatient = new Patient_Profile();
        _renalFunction = _patientsList.GetRenalFunction();
    }

    #endregion //Constructor

    #region Getters and setters

    public ObservableCollection<Renal_Function> RenalFunction
    {
        get
        {
            if (_renalFunction == null)
                _renalFunction = _patientsList.GetRenalFunction();
            return _renalFunction;
        }
        set
        {
            _renalFunction = value;
            OnPropertyChanged("RenalFunction");
        }
    }

    #endregion //Getters and setters 
```

**浏览：**

```
 <ComboBox HorizontalAlignment="Left" Height="26" Margin="14,0,-69,0" Width="234" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding RenalFunction/Level}"/> 
```

每个 Renul 函数都有属性：ID、Level、Definition，其中 ID 为 int，其余为字符串。当我在组合框中单击其中一个级别时，我想返回该级别的 ID 并将其放入 Patient.Renul_Function_ID。我怎么做？
之后，如果我想将我的级别和信息绑定到两列组合中。我必须做什么？

# c# - 当数据库结果非常好时，我如何处理 WCF 服务？

> ID：16130350
> 
> 赞同：0
> 
> 时间：2013-04-21T10:48:07.310
> 
> 标签：c#, wcf, state

我使用下面的代码：

```
private class WcfProxy<TService> :
            ClientBase<TService> where TService : class, IContract
        {
            public TService WcfChannel
            {
                get
                {
                    return Channel;
                }
            }
        }

    protected TResult ExecuteCommand<TResult>(Func<TContract, TResult> command)
        where TResult : IDtoResponseEnvelop
    {
        var proxy = new WcfProxy<TContract>();

        try
        {
            var result = command.Invoke(proxy.WcfChannel);
            proxy.Close();
            return result;
        }
        catch (CommunicationException ex)
        {
            proxy.Abort();
            throw new BusinessException(BusinessExceptionEnum.Operational, Properties.Resources.Exception.WcfAdapterBase_CommunicationException_TransportInEnamDataIsInvalid, ex);
        }
        catch (TimeoutException ex)
        {
            proxy.Abort();
            throw new BusinessException(BusinessExceptionEnum.Operational, Properties.Resources.Exception.WcfAdapterBase_TimeoutException, ex);
        }
        catch (Exception)
        {
            proxy.Abort();
            throw;
        }
    } 
```

当查询返回大量结果时，我遇到此消息：

通信对象无法用于通信，因为它处于故障状态

是否存在我成功观察数据库查询结果的方式或技巧，或者我划分结果或获取部分结果的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:07:14.210

可能您需要增加 maxReceivedMessageSize 或绑定的其他参数之一。

您还可以启用 wcf 跟踪并使用 svcTraceViewer.exe 查看它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:51:02.007

你得到这个错误：

> 通信对象无法用于通信，因为它处于故障状态。

因为你抛出一个错误并且它没有被处理并被抛出到*iis 池中*。

检查此链接：[http](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/fc60cd6d-1df9-47ff-90a8-dd8d5de1f080/) : //social.msdn.microsoft.com/Forums/en-US/wcf/thread/fc60cd6d-1df9-47ff-90a8-dd8d5de1f080/ 这也不是由大量数据引起的：[WCF无法用于通信，因为它处于故障状态](https://stackoverflow.com/questions/9409329/wcf-cannot-be-used-for-communication-because-it-is-in-the-faulted-state)

# backbone.js - 如何使用 requirejs 加载特定于环境的配置？

> ID：16130351
> 
> 赞同：2
> 
> 时间：2013-04-21T10:48:21.463
> 
> 标签：backbone.js, requirejs

我正在制作一个单页应用程序并使用带有 requirejs 的主干。现在我想根据环境变量包含不同的配置。我不知道我该怎么做，什么是最佳实践。

我有三个不同的配置文件：

`config.js`: 这保持通用配置。

`config.dev.js`：这保留了开发环境特定的配置

`config.production.js`：这保持生产特定的配置

我正在从特定于环境的模型扩展配置模型（在 config.js 中），并且我需要来自其他模块的配置模型。这工作正常，但同时下载开发和生产配置文件。我只想加载 config.dev.js 或 config.production.js 而不是两者。

```
// config.js
define([
  'backbone',
  'modules/config/config.dev',
  'modules/config/config.production'
], function(Backbone, DevConfig, ProdConfig) {

    // Select environment model
    EnvConfig = (ENV == 'dev') ? DevConfig : ProdConfig;

    var ConfigModel = EnvConfig.extend({
        // Extending attributes.
        defaults: _.extend({
           foo : 'bar'
        }, EnvConfig.prototype.defaults)

    });

    return new ConfigModel();

}); 
```

在其他模块中，我使用 Config 如下样式：

```
define([
    'backbone',
    'modules/config/config'
], function(Backbone, Config) {

    var ProfileModel = Backbone.Model.extend({
        urlRoot: Config.get('apiRoot') + '/profiles'

        ...
    });

    return ProfileModel;
}); 
```

如何加载开发或生产特定配置文件之一，而不是两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:58:10.830

我不确定`ENV`变量来自哪里，但假设它只是一个全局变量，你可以这样做：

**索引.html**

```
<script type="text/javascript">
    // adding it here so the example works on its own
    window.ENV = 'production'; // or 'dev'
    // this will be added to RequireJS configuration
    var require = {
      paths: {
        // 'env-config' will be an alias for actual file name
        'env-config': 'config.' + window.ENV
      }
    };
</script>
<script data-main="scripts/main" src="scripts/requirejs.js"></script> 
```

**config.dev.js：**

```
define({
    'env': 'development!'
}); 
```

**config.production.js：**

```
define({
    'env': 'production!'
}); 
```

**主.js：**

```
require(['config', 'env-config'], function(conf, envConfig) {
   console.log('The environment is: ', envConfig.env);
}); 
```

# python - Python - 使用标题进行文件操作

> ID：16130359
> 
> 赞同：-2
> 
> 时间：2013-04-21T10:49:22.850
> 
> 标签：python, file, document, file-manipulation

我如何让 python 运行一个 .txt 文档，找到一个特定的标题，然后将每一行的信息放入一个列表中进行打印？然后一旦完成，寻找另一个标题并对那里的信息做同样的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:35:55.733

文件`test.txt`

```
a
b
c
heading1
d
e
f
heading2
g
h
heading3 
```

* * *

```
>>> from itertools import takewhile, imap
>>> with open('test.txt') as f:
        for heading in ('heading1', 'heading2', 'heading3'):
            items = list(takewhile(heading.__ne__, imap(str.rstrip, f)))
            print items

['a', 'b', 'c']
['d', 'e', 'f']
['g', 'h'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:11:27.407

如果您有一个 csv 文件，如下所示：

```
h1,h2,h3
a,b,c
d,e,f
g,h,i 
```

然后按照您的要求执行以下操作（如果我理解正确的话）

```
def getColumn(title,file):
    result = []
    with open(file) as f:
        headers = f.readline().split(',')
        index = headers.index(title)
        for l in f.readlines():
            result.append(l.rstrip().split(',')[index])
    return result 
```

例如：

```
print(getColumn("h1",'cf.csv') )
>>> ['a', 'd', 'g'] 
```

# php - 使用flock（）的PHP计数器问题

> ID：16130363
> 
> 赞同：1
> 
> 时间：2013-04-21T10:49:53.303
> 
> 标签：php, counter, flock

我的计数器有问题。我需要计算两个变量，用 | 分隔，但有时计数器不会增加变量的值。

numeri.txt（计数器）：

`5240|593389`

这是 PHP 脚本：

```
$filename="numeri.txt";
$fp=fopen($filename,"r");
if(!flock($fp,LOCK_SH))
{
    while(true)
    {
        usleep(100000);
        if(flock($fp,LOCK_SH))
        {
            break;
        }
    }
}
$contents=fread($fp,filesize($filename));
flock($fp,LOCK_UN);
fclose($fp);
$fp=fopen($filename,'a');
if(!flock($fp,LOCK_EX))
{
    while(true)
    {
        usleep(100000);
        if(flock($fp,LOCK_EX))
        {
            break;
        }
    }
}
ftruncate($fp,0);
$contents=explode("|",$contents);
$clicks=$contents[0];
$impressions=$contents[1]+1;
fwrite($fp,$clicks."|".$impressions);
flock($fp,LOCK_UN);
fclose($fp); 
```

我将计数器设置为正确的值，但 3-4 天后计数器没有计算出大约 50 次展示（“|”之后的数字）

如何修复代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:08:24.877

两个问题：

1）还有机会做一次读，另一个进程写文件，然后这个进程写文件。需要毫秒计时，但这是可能的。

2）您实际上并没有验证“开放”的作品 - 它可能会失败。

解决方法是首先检查打开失败并重试，其次做一个锁-独占。转述代码：

```
while (!$fh = fopen($file, 'c+')) {   // Read write, do not truncate, place pointer at start.
    usleep(100000);
}
while (!flock(LOCK_EX)) {
    usleep(100000);
}
$content = fread();
// Process content...
ftruncate();
fseek(0);  // Or frewind();
fwrite();
fclose();  // Also releases the lock. 
```

# adsense - 为什么 Adsense 广告不会在每个页面中多次出现？

> ID：16130366
> 
> 赞同：1
> 
> 时间：2013-04-21T10:50:17.853
> 
> 标签：adsense

我有一个新闻网站。Adsense 广告不会在每个页面中多次出现。我已经完成了 Adsense 疑难解答建议。似乎一切都很好......

网址是：[http ://akhbaralalam.com](http://akhbaralalam.com)

似乎在 google adsense 抓取页面以获取下一个请求后，广告没有出现。但我无法找出我的页面有什么问题......

也许有用：当我在 URL 末尾添加一个随机参数（如“/？123”）时，广告正在展示。

akhbaralalam.com -> 广告不显示

akhbaralalam.com/?123 -> 广告出现

有什么建议吗？

你能调查一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:29:08.923

顺便我意识到问题是什么...

我犯了一个有趣的错误：在超过 3 个广告单元的页面上，可能会导致所有广告消失。

我还在网站的页脚添加了隐私政策。在 google adsense guids 中，他们说有必要制定隐私政策，包括某些特定主题，如 cookie ......

# python - 用 pytest 执行几次测试

> ID：16130367
> 
> 赞同：3
> 
> 时间：2013-04-21T10:50:23.643
> 
> 标签：python, pytest

有没有办法用 py.test 运行 x 次测试？

我正在寻找的是多次重复测试，因为测试有随机装置。

像 py.test -n100

我一直在玩 pytest-xdist 但如果我理解得很好，它只会在 cpus 之间分配测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T15:10:02.137

实际上，您可以尝试像这样使用 pytest-xdist 运行：

```
py.test --dist=each --tx=3*popen 
```

这将在三个不同的子进程中运行相同的测试 3 次。

# microdata - 主页上显示的微数据丰富片段？

> ID：16130370
> 
> 赞同：0
> 
> 时间：2013-04-21T10:50:49.687
> 
> 标签：microdata, rich-snippets

我在里面添加了 schema.org 丰富的片段代码`<head>`，文本显示在我的主页上，我做错了什么？

DTD

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0 Transitional//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"> 
```

...

片段代码

```
<div itemscope itemtype="http://schema.org/EntertainmentBusiness">
       <span itemprop="name">MySite.com</span>
       <div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
            <span itemprop="ratingValue">4.5</span> stars -
            based on <span itemprop="reviewCount">233</span> Reviews
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:43:56.973

`div`不允许进入`head`。

Parser 认为是`body`从遇到开始的`div`，所以显示了这个内容。

[`head`有关元素](http://www.w3.org/TR/html5/document-metadata.html#the-head-element)的允许内容，请参阅“内容模型” 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:09:10.233

用于 XHTML 和 MicroData 的正确 DTD 是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional with HTML5 microdata//EN" "xhtml1-transitional-with-html5-microdata.dtd"> 
```

从 schema.org 找到了一个使用[“元”](http://schema.org/docs/gs.html#advanced_missing)标签的代码示例——尽管根据我读过的文章，从 SEO 的角度来看不建议这样做：

```
<div itemscope itemtype="http://schema.org/Offer">
  <span itemprop="name">Blend-O-Matic</span>
  <span itemprop="price">$19.95</span>
  <div itemprop="reviews" itemscope itemtype="http://schema.org/AggregateRating">
    <img src="four-stars.jpg" />
    <meta itemprop="ratingValue" content="4" />
    <meta itemprop="bestRating" content="5" />
    Based on <span itemprop="ratingCount">25</span> user ratings
  </div>
</div> 
```

# mysql - SQL 帮助 - 根据不同的列值将列插入到表中

> ID：16130377
> 
> 赞同：0
> 
> 时间：2013-04-21T10:51:33.493
> 
> 标签：mysql, database, sql-insert

嗨，我正在尝试执行以下操作，但我有点想不通：

我有一组这样的数据：

```
Column1(int)      Column2(int)       Column3(Varchar)

0                 1234               ABC-0
1                 1234               ABC-1
2                 1234               ABC-2
3                 1234               ABC-3
4                 1234               ABC-4

0                 6789               DEF-0
1                 6789               DEF-1
2                 6789               DEF-2
3                 6789               DEF-3
4                 6789               DEF-4 
```

我想更新表格，以便为不同的 column2 值插入额外的行，其中第一列的值设置为 999，column3 的值如下所示：

```
Column1(int)      Column2(int)       Column3(Varchar)
0                 1234               ABC-0
1                 1234               ABC-1
2                 1234               ABC-2
3                 1234               ABC-3
4                 1234               ABC-4
999               1234               ABC  ********New row******

0                 6789               DEF-0
1                 6789               DEF-1
2                 6789               DEF-2
3                 6789               DEF-3
4                 6789               DEF-4
999               6789               DEF  ********New row****** 
```

我对 SQL 很陌生，任何帮助将不胜感激，

只是为了澄清这将在将新数据集放入数据库后由脚本自动运行

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:10:01.977

整体结构将类似于：

```
INSERT INTO your_table (Column1, Column2, Column3)
SELECT DISTINCT 999, Column2, substr(Column3, 1, 3)
FROM your_table 
```

但是请注意，这只是一个指导。您的`substr`函数调用可能会有所不同，具体取决于数据的确切结构和您使用的数据库引擎。例如，在 SQL Server 上，它可能与 MySQL 上的不同。

# android - 媒体播放器混响不起作用

> ID：16130380
> 
> 赞同：2
> 
> 时间：2013-04-21T10:51:56.073
> 
> 标签：android, android-mediaplayer

我正在尝试通过在输出混音（音频会话“0”）上创建混响来将混响效果应用于媒体播放器，我使用此代码

```
 public void reverb1(View v){
    PresetReverb mReverb = new PresetReverb(0,0);//<<<<<<<<<<<<<
    mReverb.setPreset(PresetReverb.PRESET_LARGEROOM);
    mReverb.setEnabled(true);
    mp1.attachAuxEffect(mReverb.getId());
    mp1.setAuxEffectSendLevel(1.0f);

} 
```

但是，当我开始播放歌曲并应用效果时，没有任何反应，歌曲继续播放并且不应用混响效果。我还在清单中添加了这个前提`<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>` 仍然相同的结果，我做错了什么吗？我也试过`PresetReverb mReverb = new PresetReverb(0, mp1.getAudioSessionId());`但结果还是一样。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:00:20.050

```
PresetReverb mReverb = new PresetReverb(0, mp1.getAudioSessionId()); 
```

这个构造函数有两个参数，第一个是优先级，另一个是音频会话 ID。如果你想混响而不是保持你的优先级 1 并使用全局 audiosessionId。

```
PresetReverb mReverb = new PresetReverb(1, 0);
mReverb.setPreset(PresetReverb.PRESET_LARGEROOM);
mReverb.setEnabled(true);
mp1.attachAuxEffect(mReverb.getId());
mp1.setAuxEffectSendLevel(1.0f); 
```

还有一点需要注意的是，某些设备不支持这种混响效果……因为它们的均衡器频段有限。我没有完美的资源来确认我对某些设备的状态，但是我在某些设备上进行了相同的测试，它对某些设备运行良好，对某些设备运行不正常

# c++ - 在 DirectX 11 中切换全屏需要什么？

> ID：16130381
> 
> 赞同：2
> 
> 时间：2013-04-21T10:52:07.940
> 
> 标签：c++, toggle, fullscreen, directx-11

我刚开始学习 DX，所以虽然我确实了解 OpenGL（在一定程度上），但我对此几乎一无所知。我按照教程（[http://www.rastertek.com/tutdx11.html](http://www.rastertek.com/tutdx11.html)），我有一个工作窗口呈现白色背景（清晰）。

现在 - 我如何从窗口模式切换到全屏模式，反之亦然？我知道有很多教程，有些甚至提供了这样做的代码，但由于我是一个新手，这并没有真正的帮助。为什么？因为每个代码示例都是不同的，并且试图在所有代码示例中找到一个模式对我来说显然太难了。

所以我不要求代码 - 相反，我希望您告诉我**需要释放/重新创建/更改哪些内容**才能正确切换（以及所有这些内容）。我知道我需要更改显示设置，我知道我必须更改交换链的某些内容并释放/重新创建一些缓冲区 - 但不确定到底是哪个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:12:36.897

您可以在交换链上使用 SetFullScreenState：

```
swapChain->SetFullScreenState(true, NULL); 
```

[MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb174579%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T12:26:26.333

您要做的主要事情是释放对`IDXGISwapChain`, call的所有引用`ResizeBuffers`，然后重新创建所有内容。

由于 Win32 在窗口初始化时抛出该`WM_SIZE`消息，因此完全有可能：

*   清除上一个特定于窗口大小的上下文
*   如果交换链已经存在，则调整它的大小，否则创建一个
*   获取此窗口的后台缓冲区，这将是最终的 3D 渲染目标。
*   在渲染目标上创建一个视图界面以在绑定时使用。
*   分配一个 2-D 表面作为深度/模板缓冲区，并在此表面上创建一个 DepthStencil 视图以在绑定时使用。
*   创建完整窗口大小的视口描述符。
*   使用描述符设置当前视口。

在`static`函数内部（除非`WinMain`有要调用的对象），并在`WM_SIZE`触发消息时调用该函数。

你可以在这里查看 DirectXTK 是如何做到的： [https ://directxtk.codeplex.com/](https://directxtk.codeplex.com/)

# c++ - 使用 c++ 中的 boost 进程库输出

> ID：16130387
> 
> 赞同：3
> 
> 时间：2013-04-21T10:53:01.283
> 
> 标签：c++, boost, process

[我使用 boost 过程并在主教程页面](http://www.highscore.de/boost/process/process/tutorials.html)中使用默认代码。

我已经运行了这段代码，它没有打印任何输出！

```
#include <boost/process.hpp> 
#include <string> 
#include <vector> 
#include <iostream> 

namespace bp = ::boost::process; 

int main() 
{ 
    std::string exec = "bjam"; 

    std::vector<std::string> args; 
    args.push_back("--version"); 

    bp::context ctx; 
    ctx.stdout_behavior = bp::capture_stream(); 

    bp::child c = launch(exec, args, ctx);

    bp::pistream &is = c.get_stdout(); 
    std::string line; 
    while (std::getline(is, line)) 
    std::cout << line << std::endl; 
} 
```

谁能帮我解决这个问题？

[这段代码在这里](http://www.highscore.de/boost/process/process/tutorials.html#process.tutorials.read_from_child)退出。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:46:02.690

您可能没有检查进程是否成功启动。我可以简单地使用`/bin/ls`成功：

```
// 
// Boost.Process 
// ~~~~~~~~~~~~~ 
// 
// Copyright (c) 2006, 2007 Julio M. Merino Vidal 
// Copyright (c) 2008 Boris Schaeling 
// 
// Distributed under the Boost Software License, Version 1.0\. (See accompanying 
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt) 
// 

#include <boost/process.hpp> 
#include <string> 
#include <vector> 
#include <iostream> 

namespace bp = ::boost::process; 

bp::child start_child() 
{ 
    std::string exec = "/bin/ls"; 

    std::vector<std::string> args; 
    args.push_back("-ltrah"); 

    bp::context ctx; 
    ctx.stdout_behavior = bp::capture_stream(); 

    return bp::launch(exec, args, ctx); 
} 

int main() 
{ 
    bp::child c = start_child(); 

    bp::pistream &is = c.get_stdout(); 
    std::string line; 
    while (std::getline(is, line)) 
        std::cout << line << std::endl; 
} 
```

请注意，使用`"ls"`失败 - 没有错误消息。

# css - Safari 中的 Flexbox：增长和缩小

> ID：16130399
> 
> 赞同：5
> 
> 时间：2013-04-21T10:55:21.113
> 
> 标签：css, safari, flexbox

我正在尝试制作一种跨浏览器的 flexbox 布局，以显示彼此并排放置的卡片。当所有卡片都有足够的空间时，它们应该左对齐或右对齐（由“左”和“右”类确定），但在没有空间时缩小。缩小时，将鼠标悬停在卡片上会使其缩小得更少，从而可以查看更多内容。

说了这么多，如果您愿意，[可以在这里进行现场演示。](http://jsfiddle.net/GdKvG/)

CSS：

```
img{
   width:90px;
    position: absolute;
}

.cards{
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-direction: row;
    -webkit-justify-content: flex-start;
    -ms-flex-direction: row;
    -ms-justify-content: flex-start;
    flex-direction: row;
    justify-content: flex-start;
}
.cards.right{
    float: right;
    -webkit-flex-direction: row-reverse;
    -webkit-justify-content: flex-end;
    -ms-flex-direction: row-reverse;
    -ms-justify-content: flex-end;
    flex-direction: row-reverse;
    justify-content: flex-end;
}

.cards div{
    position:relative;
    -webkit-flex: 0 2 90px;
    -ms-flex: 0 2 90px;
    flex: 0 2 90px;
    -webkit-box-flex: 0 2 90px;
    transition: flex-shrink .3s;
    transition: flex-shrink .3s, -webkit-flex .3s;
    -webkit-transition: -webkit-flex .3s;
}
.cards.left div:last-child, .cards.right div:first-child{
    -webkit-flex: 0 0 90px;
    -ms-flex: 0 0 90px;
    flex: 0 0 90px;
    -webkit-box-flex: 0 0 90px;
}
.cards.left div:not(:last-child):hover, .cards.right div:hover+div{
    -webkit-flex: 0 1 90px;
    -ms-flex: 0 1 90px;
    flex: 0 1 90px;
    -webkit-box-flex: 0 1 90px;
} 
```

到目前为止，我已经在 IE、FF、Chorme 和 Opera 的最新版本中成功创建了所需的布局。
但是，我遇到了 Safari 的问题。它们的布局取决于能够为增长和收缩指定不同的灵活性，但据我所知，Safari 不支持这一点。

任何有关在 Safari 中增长和缩小 flexbox 的帮助都将不胜感激。我不想回退到我旧的基于表格的布局，因为它往往会在 IE 和 FF 中中断。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T12:53:00.017

由于我唯一可以访问的 Safari 是 Windows 版本 5，因此我无法确认它在任何更新的版本中是如何工作的。

对于缺乏对 flex-shrink 和 flex-grow 作为独立值的支持，您无能为力。我的建议是不要为此使用 flex-shrink 而是使用填充。在这个特定的实例中，您会得到几乎相同的效果，并且它在 Safari 5 中有效：

[http://codepen.io/cimmanon/pen/oHzgr](http://codepen.io/cimmanon/pen/oHzgr)

```
img {
  width: 90px;
  position: absolute;
}

.cards {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: start;
  -moz-box-pack: start;
  -webkit-flex-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
}

.cards.right {
  float: right;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-box-direction: reverse;
  -moz-box-direction: reverse;
  -webkit-flex-direction: row-reverse;
  -ms-flex-direction: row-reverse;
  flex-direction: row-reverse;
  -webkit-box-pack: end;
  -moz-box-pack: end;
  -webkit-flex-pack: end;
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}

.cards div {
  position: relative;
  max-width: 90px;
  -webkit-box-flex: 2;
  -moz-box-flex: 2;
  -webkit-flex: 0 2 90px;
  -ms-flex: 0 2 90px;
  flex: 0 2 90px;
  -webkit-transition: -webkit-flex .3s;
  transition: flex-shrink .3s;
  transition: flex-shrink .3s, -webkit-flex .3s;
}

.cards.left div:last-child, .cards.right div:first-child {
  -webkit-box-flex: 0;
  -moz-box-flex: 0;
  -webkit-flex: 0 0 90px;
  -ms-flex: 0 0 90px;
  flex: 0 0 90px;
}

.cards.left div:not(:last-child):hover, .cards.right div:hover + div {
  padding-right: 5%;
} 
```

当然，您需要将过渡更改为填充，但除此之外它看起来很有效。

# javascript - 当我将方法名称包含在''中的函数内时有什么区别？

> ID：16130403
> 
> 赞同：1
> 
> 时间：2013-04-21T10:56:19.107
> 
> 标签：javascript

我有以下代码：

```
 var factory = {
        query: function (selectedSubject) {
           ..
        }
 } 
```

在 Javascript 中，这与以下内容相同：

```
 var factory = {
        'query': function (selectedSubject) {
           ..
        }
 } 
```

我已经看到两者都使用过，我不确定是否有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:22:15.227

[该标准](http://es5.github.io/#x11.1.5)要求属性名称为以下之一：

```
PropertyName :
   IdentifierName
   StringLiteral
   NumericLiteral 
```

也就是说，所有这些都是有效的：

```
 obj = {
       "query": ....
       'query': ....
        query:  ....
        12e45:  ....
   } 
```

请注意，与流行的观点相反，该标准不*要求*名称是有效的标识符，只要求“标识符名称”。这实际上意味着您可以使用 JS 保留字作为属性名称：

```
x = {
    if: 100,
    function: 200,
}
console.log(x.if + x.function) // 300 
```

并不是说它在日常编程中非常有用，只是一个值得了解的有趣事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T10:57:49.737

您可以同时使用两者，但如果有空格，则不能使用第一个选项。这就是为什么有第二种选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T11:00:29.703

有效的 JSON 要求 "" 包围匿名对象的属性名称，但如果属性名称不是保留字或不包含某些特殊字符，则可以省略它们。通常使用“”更安全。

# python - 正则表达式字符串和转义引号

> ID：16130404
> 
> 赞同：6
> 
> 时间：2013-04-21T10:56:19.327
> 
> 标签：python, regex

如何获得以下两个文本中引号之间的内容？

```
text_1 = r""" "Some text on \"two\" lines with a backslash escaped\\" \
     + "Another text on \"three\" lines" """

text_2 = r""" "Some text on \"two\" lines with a backslash escaped\\" + "Another text on \"three\" lines" """ 
```

对我来说，问题是引号如果被转义应该被忽略，但是反斜杠有可能被转义。

我想获得以下组。

```
[
    r'Some text on \"two\" lines with a backslash escaped\\',
    r'Another text on \"three\" lines'
] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-21T11:43:24.143

```
"(?:\\.|[^"\\])*" 
```

匹配带引号的字符串，包括其中出现的任何转义字符。

**解释：**

```
"       # Match a quote.
(?:     # Either match...
 \\.    # an escaped character
|       # or
 [^"\\] # any character except quote or backslash.
)*      # Repeat any number of times.
"       # Match another quote. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:06:52.920

匹配除双引号外的所有内容：

```
import re
text = "Some text on \"two\" lines" + "Another text on \"three\" lines"
print re.findall(r'"([^"]*)"', text) 
```

**输出**

```
['two', 'three'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T11:03:16.697

```
>>> import re
>>> text = "Some text on\n\"two\"lines" + "Another texton\n\"three\"\nlines"
>>> re.findall(r'"(.*)"', text)
["two", "three"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T11:01:05.580

```
>>> import re
>>> text_1 = r""" "Some text on \"two\" lines with a backslash escaped\\" \
     + "Another text on \"three\" lines" """
>>> text_2 = r""" "Some text on \"two\" lines with a backslash escaped\\" + "Another text on \"three\" lines" """
>>> re.findall(r'\\"([^"]+)\\"', text_2)
['two', 'three']
>>> re.findall(r'\\"([^"]+)\\"', text_1)
['two', 'three'] 
```

也许你想要这个：

```
re.findall(r'\\"((?:(?<!\\)[^"])+)\\"', text) 
```

# c - Fortran中的IPC？

> ID：16130405
> 
> 赞同：1
> 
> 时间：2013-04-21T10:56:41.193
> 
> 标签：c, fortran, ipc

我正在尝试在 Fortran 和 C 程序之间进行 IPC。到目前为止，我在 Linux 中使用 C 找到了很好的 IPC 文档，但在 Fortran 中找不到任何帮助。

这可以在 Fortrans 和 Fortran 和 C 程序之间进行 IPC 吗？

谢谢乙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-05T19:53:37.717

您可以从 Fortran 2003 开始​​。

在进程间通信方面，您使用管道等对象。管道基本上是一个读、写（或两者兼有）对象，通常情况是程序创建特殊命名的管道，然后每个进程将获得适当的句柄，然后向它发送和接收数据，就好像它就像一个网络连接。

EXECUTE_COMMAND_LINE 同步或异步运行 shell 命令。

您可以尝试在此页面上找到的代码： [http ://www.jcameron.com/vms/fortran.htm](http://www.jcameron.com/vms/fortran.htm)

这些程序是：

MAILBOX_A.FOR MAILBOX_B.FOR

# ruby-on-rails-3 - 为标签 gem 模型添加 after_save 回调以更新轮胎索引

> ID：16130406
> 
> 赞同：0
> 
> 时间：2013-04-21T10:56:54.173
> 
> 标签：ruby-on-rails-3, activerecord, tags, factory-bot, tire

`rocket_tag`我有一个使用gem有标签的发布模型

```
class Posting < ActiveRecord::Base
  attr_taggable :tags

  def tag_list
    self.tags.join(",")
  end

  def tag_list=(new_tags)
    attribute_will_change!(:tag_list)
    # split into array (comma and any spaces), ignore empties
    self.tags = new_tags.split(/,[\s]*/).reject(&:empty?)
  end 
```

它在我的开发环境中似乎工作正常，但是当我`FactoryGirl`用来生成测试帖子时，它似乎没有将标签添加到搜索索引中，所以我假设这些标签在发布后被保存，所以当搜索索引更新时它没有看到任何已保存的标签，因此无法使用`tire`.

我假设这意味着我需要向模型添加一个`after_save`回调来`rocket_tag` `Tag`调用`touch()`发布模型，但我不确定如何从 gem 扩展模型以向它添加这个额外的回调和方法.....除非有什么从上面可能有错。

```
FactoryGirl.define do
  factory :posting do
    sequence(:name)  { |m| "Posting #{m} name" }
    tag_list         "tag,another,third"
    user
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:17:44.847

不知道为什么它不起作用，但最后我用来`FactoryGirl.create`创建帖子，访问了帖子的编辑页面，使用水豚`fill_in`添加标签，`click_button "Submit"`然后我刷新了搜索索引。

即，我以与普通网页用户相同的方式添加标签，而不是尝试使用 FactoryGirl 来设置它们。

# c# - richedTextBox 中的自定义打印文本文件

> ID：16130409
> 
> 赞同：1
> 
> 时间：2013-04-21T10:57:04.237
> 
> 标签：c#, richtextbox

向所有人致敬。我有一个名为 mytext.txt 的文本文件，其中的文本格式如下：

```
<name1>Myname
age
address
postal code
<name2>Myname
age
address
postal code
....(more of the same) 
```

我遇到的问题是我必须以如下格式在richTextBox 中打印此文本：

```
<name1>Myname
    -age
    -address
    -postal code
<name2>Myname
    -age
    -address
    -postal code
....(more of the same) 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:03:32.710

我不会给你确切的代码，但我可以给你一个工作算法的伪代码表示：

```
 function printTextFile()
 {
     for(every line in the text file) 
         // So start the loop through each line.
         if(current line does not start with "<")
         {
             prefix:= "    -".
             // So we're not at a title part.
         }

         print(prefix + current line).
         // Print out the line with the indent.
         prefix:= "".
         // reset the prefix.
     end for loop.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:10:03.440

```
var writer = new StringBuilder();

foreach (var line in File.ReadAllLines("mytext.txt"))
{
   writer.AppendLine(!line.StartsWith("<") ? string.Format("  -{0}", line) : line);
}

richTextBox1.Text = writer.ToString(); 
```

# java - 具有可比性的 TreeSet 按递归依赖排序

> ID：16130420
> 
> 赞同：1
> 
> 时间：2013-04-21T10:58:12.803
> 
> 标签：java, comparable

我有一组具有名称（a）和依赖项（b）的对象。我想以解决所有先前依赖项的方式对对象进行排序。所以我有这个代码：

```
import java.util.HashSet;
import java.util.Set;
import java.util.TreeSet;

public class Foo {
    static class TestOrder implements Comparable<TestOrder> {
        private final String a;
        private final Set<String> b;

        public TestOrder(String a, Set<String> b) {
            this.a = a;
            this.b = b;
          }

        public int compareTo(TestOrder o) {
            if (o.b.contains(a)) 
              return -1;
            else
              return 1;
        }

        @Override
        public int hashCode() {
            return a.hashCode();
        }

        @Override
        public boolean equals(Object obj) {
            return a.equals(obj);
        }

        public String toString() {
            return a + " - " + b.toString();
        }
    }

    public static void main(String[] args) {
        Set<TestOrder> tos = new TreeSet<>();
        tos.add(new Foo.TestOrder("a", new HashSet<String>() {{
            add("b");
            add("c");
        }}));

        tos.add(new Foo.TestOrder("e", new HashSet<String>() {{
            add("a");
        }}));

        tos.add(new Foo.TestOrder("b", new HashSet<String>() {{
            add("d");
            add("c");
        }}));

        tos.add(new Foo.TestOrder("c", new HashSet<String>() {{ }}));
        tos.add(new Foo.TestOrder("d", new HashSet<String>() {{ }}));

        for (TestOrder to : tos) {
            System.out.println(to.toString());
        }
    }
} 
```

这导致：

```
c - []
b - [d, c]
a - [b, c]
e - [a]
d - [] 
```

但是 - 由于 b 取决于 d - 预期结果将是：

```
c - []
d - []
b - [d, c]
a - [b, c]
e - [a] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:20:09.100

您遗漏了几件事（以更难修复的顺序，从更容易的顺序开始）：

1.  您的比较器永远不会返回零，即使将相同的对象传递给它，
2.  当两个对象都不依赖另一个对象时，就没有确定的决胜局，
3.  在树集中插入对象时，并非所有项都可用；但是，插入一个新项目可能会改变其他项目的相对顺序。
4.  排序仅考虑直接依赖关系。

您可以通过在返回之前检查`this`on的依赖关系并使用for tie-break来相对轻松地修复前两个。`o``1``a.compareTo(o.a)`

```
public int compareTo(TestOrder o) {
    if (o.b.contains(a)) 
      return -1;
    else if (b.contains(o.a))
      return 1;
    else
      return a.compareTo(o.a);
} 
```

第三个可以通过切换到一个数组来修复，并且只有在所有插入完成后才对其进行排序。

然而，最后一个非常糟糕：为了修复它，每个项目都需要了解集合的其余部分。我没有看到解决这个问题的好方法，所以我建议使用传统的[*拓扑排序算法*](http://en.wikipedia.org/wiki/Topological_sorting)来排序你的依赖项，而不是试图在 Java 集合框架中硬塞这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:07:30.780

如果有人感兴趣，这就是它的工作原理 - 最后（感谢 dasblinkenlight）：

```
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashSet;
import java.util.Set;
import java.util.TreeSet;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Krusty
 */
public class Foo {
    static class TestOrder implements Comparable<TestOrder> {
        private final String a;
        private final Set<String> b;

        public TestOrder(String a, Set<String> b) {
            this.a = a;
            this.b = b;
          }

        public int compareTo(TestOrder o) {
            if (o.b.contains(a)) {
                return -1;
            } else {
                if (o.b.isEmpty() && b.isEmpty()) {
                    return a.compareTo(o.a);
                } else
                if (o.b.isEmpty() || b.isEmpty()) {
                    return b.isEmpty() ? -1 : 1;
                } else {
                    return 1;
                }
            }
        }

        @Override
        public int hashCode() {
            return a.hashCode();
        }

        @Override
        public boolean equals(Object obj) {
            return a.equals(obj);
        }

        public String toString() {
            return a + " - " + b.toString();
        }
    }

    public static void main(String[] args) {
        Set<TestOrder> tos = new TreeSet<>();
        tos.add(new Foo.TestOrder("a", new HashSet<String>() {{
            add("b");
            add("c");
        }}));

        tos.add(new Foo.TestOrder("e", new HashSet<String>() {{
            add("a");
        }}));

        // Cycle
        /*
        tos.add(new Foo.TestOrder("a", new HashSet<String>() {{
            add("e");
        }}));
        */
        tos.add(new Foo.TestOrder("b", new HashSet<String>() {{
            add("d");
            add("c");
        }}));

        tos.add(new Foo.TestOrder("c", new HashSet<String>() {{ }}));
        tos.add(new Foo.TestOrder("d", new HashSet<String>() {{ }}));

        /*
        for (TestOrder to : tos) {
            System.out.println(to.toString());
        }*/

        for (TestOrder to : sort(tos)) {
            System.out.println(to.toString());
        }
    }

    public static Set<TestOrder> sort(Set<TestOrder> tos) {
        Set<TestOrder> sorted = new LinkedHashSet<>();
        Set<String> cache = new LinkedHashSet<>();
        Set<TestOrder> cycles = new LinkedHashSet<>();
        Set<String> cycache = new LinkedHashSet<>();

        Iterator<TestOrder> it;
        while ((it = tos.iterator()).hasNext()) {
            TestOrder to = it.next();
            if (to.b.isEmpty())  {
                sorted.add(to);
                cache.add(to.a);
                it.remove();
            } else if (cache.containsAll(to.b)) {
                sorted.add(to);
                cache.add(to.a);
                it.remove();
            } else if (cycache.containsAll(to.b)) {
                cycles.add(to);
                cycache.add(to.a);
                it.remove();
            } else {
                cycles.add(to);
                cycache.add(to.a);
                it.remove();
            }
        }

        System.err.println("cycles");
        for (TestOrder to : cycles) {
            System.err.println(to.toString());
        }

        return sorted;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:54:40.427

您的比较方法在空集和不包含字符串“a”的集之间没有区别。这种比较方法

```
 public int compareTo(TestOrder o) {
        if (o.b.contains(a)) {
            return -1;
        } else {
            if (o.b.isEmpty() && b.isEmpty()) {
                return a.compareTo(o.a);
            } else
            if (o.b.isEmpty() || b.isEmpty()) {
                return b.isEmpty() ? -1 : 1;
            } else {
                return 1;
            }
        }
    } 
```

会给出结果

```
c - []
d - []
b - [d, c]
a - [b, c]
e - [a] 
```

# ajax - 带有ajax的谷歌地图

> ID：16130421
> 
> 赞同：0
> 
> 时间：2013-04-21T10:58:28.443
> 
> 标签：ajax, google-maps

我的网站上有一个带有一些自定义标记的动态谷歌地图。我需要做的是，当我单击特定标记时，我希望在地图下方加载一个 div，其中包含有关使用 Ajax 的标记（商店）的信息。

谢谢你的帮助，

乔安妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:13:00.517

您可以将事件处理程序绑定到您的标记并执行 ajax 请求以从服务器端脚本获取标记信息，例如使用 jquery post。然后在服务器端，您可以根据一些标记数据（如其位置）获得必要的信息。

```
google.maps.event.addListener (marker, 'click', function(event) {
    var position  = marker.getPosition();
    $.post("getmarkerdata.php",{
        latitute: position.lat(),
        longitude: position.lng()  
    }),
    function(data){
        $(yourdiv).html(data);
    }
}); 
```

# ruby - 在ruby中删除数组中的相似元素

> ID：16130428
> 
> 赞同：0
> 
> 时间：2013-04-21T10:59:41.927
> 
> 标签：ruby, arrays, swap

我有以下数组

```
a3 = [["a", "b"], ["a","c"], ["b","c"], ["b", "a"], ["c","b"]] 
```

我想得到以下输出`[["a","b"], ["a","c"], ["b","c"]]`并删除`["b","a"] and ["c","b"]`

我有以下代码

```
a3.each do |ary3|
x = ary3[0]
y = ary3[1]
x = ary3[1]
y = ary3[0]
if a3.include?([x,y])
   a3 - [y,x]
   end
end
print a3 
```

我尝试使用交换，但没有运气！

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T12:52:35.760

如果两个数组包含相同的元素并且这些元素的顺序相同，则认为它们相等：

```
["a", "b"] == ["b", "a"]
#=> false

["a", "b"] == ["a", "b"]
#=> true 
```

所以你需要先对内部数组进行排序，然后你可以使用`Array#uniq`来确保外部数组中的每个元素只会出现一次：

```
arr = [["a", "b"], ["a", "c"], ["b", "c"], ["b", "a"], ["c", "b"]]
arr.map(&:sort).uniq
#=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

但是，这将`arr`保持不变：

```
arr
#=> [["a", "b"], ["a", "c"], ["b", "c"], ["b", "a"], ["c", "b"]] 
```

您将需要使用 mutator 方法（带有 a `!`）来编辑数组：

```
arr = [["a", "b"], ["a", "c"], ["b", "c"], ["b", "a"], ["c", "b"]]
arr.map!(&:sort).uniq!
arr
#=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

## 编辑

作为@sawa 评论的后续行动，他担心更改内部数组的顺序可能是不可取的，我对`Array#uniq`. 考虑以下数组：

```
arr = [["b", "a"], ["a", "c"], ["b", "c"], ["b", "a"], ["c", "b"]] 
```

我发现`Array#uniq`实际上需要一个块来指定应该如何比较元素：

```
arr.uniq!{|x| x.sort }
arr
#=> [["b", "a"], ["a", "c"], ["b", "c"]] 
```

很酷的是，这也适用于`Symbol#to_proc`（`&:`符号），实际上看起来比我原来的答案更优雅：

```
arr.uniq!(&:sort)
arr
#=> [["b", "a"], ["a", "c"], ["b", "c"]] 
```

`Array#sort!`如果您希望之后对内部数组进行排序，您仍然可以使用：

```
arr.uniq!(&:sort!)
arr
#=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

不过，我对此的最后观察是，顺序可能并不重要，否则两个具有不同顺序的数组将不被视为相等。这让我（再次）思考，我向自己提出了一个问题：为什么不使用 a `Set`？它会像这样工作：

```
require 'set'

sets = [Set["a", "b"], Set["a", "c"], Set["b", "c"], Set["b", "a"], Set["c", "b"]]
sets.uniq!
sets
#=> [#<Set: {"a", "b"}>, #<Set: {"a", "c"}>, #<Set: {"b", "c"}>] 
```

请记住， Set 不允许您多次添加相同的元素，而数组则可以：

```
[%w[a b b b c], %w[a b b b c], %w[a b c]].uniq(&:sort)
#=> [["a", "b", "b", "b", "c"], ["a", "b", "c"]]

[Set.new(%w[a b b b c]), Set.new(%w[a b b b c]), Set.new(%w[a b c])].uniq
#=> [#<Set: {"a", "b", "c"}>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:12:29.537

检查这个：[`#delete_if`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-delete_if)如下：

```
a3 = [["a", "b"], ["a","c"], ["b","c"], ["b", "a"], ["c","b"]]
p a3.delete_if{|x| [["b", "a"], ["c","b"]].include? x}
#=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

***根据您的评论和描述帖子：***

```
a3 = [["a", "b"], ["a","c"], ["b","c"], ["b", "a"], ["c","b"],["b", "a"]]
p a3.each {|x| a3.delete(x.reverse) if a3.include? x.reverse}
#=> [["a", "b"], ["a", "c"], ["b", "c"]] 
```

***基准：***

```
require 'benchmark'
N = 10000

Benchmark.bm(20) do | x |
  a3 = [["a", "b"], ["a","c"], ["b","c"], ["b", "a"], ["c","b"],["b", "a"]]
  x.report('Mine') do
    N.times { a3.each {|x| a3.delete(x.reverse) if a3.include? x.reverse} }
  end
  a3 = [["a", "b"], ["a","c"], ["b","c"], ["b", "a"], ["c","b"],["b", "a"]]
  x.report('padde') do
    N.times { a3.uniq!(&:sort!) }
  end

end 
```

***输出：***

```
 user     system      total        real

Mine                   0.172000   0.000000   0.172000 (  0.361021)
padde                  0.203000   0.000000   0.203000 (  0.460026) 
```

# php - 如何在 CGridView 中获取控制器名称？

> ID：16130429
> 
> 赞同：0
> 
> 时间：2013-04-21T10:59:44.667
> 
> 标签：php, gridview, yii

在视图中控制器名称可以通过**$this->id**来实现，但在 CGridView 中 $this->id 评估结果是另一个名称（可能是 gridview 小部件名称）。**(1)**如何在 cgridview 中获取控制器名称？

> 我还尝试在调用 CGridview 之前定义一个变量 ($thisCtl = $this->id)。虽然 $thisCtl 有控制器名称，但在 CGridview 评估过程中没有定义它。**(2)**有没有什么方法可以给CGridView传参数？

```
<?php 
$thisCtl = $this->id;
$data = $model->search(); 
$this->widget('bootstrap.widgets.TbExtendedGridView', array(
    'id'=>'insurance-grid',
    'dataProvider'=>$model->search(),
    //'filter'=>$model,
    'columns'=>array(
        'id',
        'registeration_date',
        'modification_date',
        array(
            'htmlOptions' => array('nowrap'=>'nowrap'), 
            'class'=>'bootstrap.widgets.TbButtonColumn', 
            'viewButtonUrl'=>'Yii::app()->createUrl("$thisCtl/view", array("id"=>$data["id"]))', 
            'updateButtonUrl'=>'Yii::app()->createUrl("$this->id/update", array("id"=>$data["id"]))', 
        ),
    ),
)); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:14:27.490

问题是 CGridView 中的 $this 指的是它的小部件。所以我们应该使用一个全局函数来获取当前的控制器名称：

> Yii::app()->getController()->getId();

代码应如下所示：

```
<?php 
$thisCtl = $this->id;
$data = $model->search(); 
$this->widget('bootstrap.widgets.TbExtendedGridView', array(
    'id'=>'insurance-grid',
    'dataProvider'=>$model->search(),
    //'filter'=>$model,
    'columns'=>array(
        'id',
        'registeration_date',
        'modification_date',
        array(
            'htmlOptions' => array('nowrap'=>'nowrap'), 
            'class'=>'bootstrap.widgets.TbButtonColumn', 
            'viewButtonUrl'=>'Yii::app()->createUrl("'.Yii::app()->getController()->getId().'/view", array("id"=>$data["id"]))', 
            'updateButtonUrl'=>'Yii::app()->createUrl("'.Yii::app()->getController()->getId().'/update", array("id"=>$data["id"]))', 
        ),
    ),
)); 
```

?>

感谢这篇文章[在 Yii 中获取当前控制器 ID](https://stackoverflow.com/questions/9582237/getting-current-controller-id-in-yii)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:13:21.777

由于您似乎希望在列值中使用控制器值，您可以执行以下操作来获取控制器名称：

```
$this->grid->controller->id 
```

当您在[TbButtonColumn](https://github.com/clevertech/YiiBooster/blob/master/widgets/TbButtonColumn.php)中时，您可以访问[网格](http://www.yiiframework.com/doc/api/1.1/CGridColumn#grid-detail)属性（因为 TbButtonColumn 从[CButtonColumn扩展，而](http://www.yiiframework.com/doc/api/1.1/CButtonColumn)[CButtonColumn](http://www.yiiframework.com/doc/api/1.1/CGridColumn)又从 CGridColumn扩展）以访问[TbExtendsGridView](https://github.com/clevertech/YiiBooster/blob/master/widgets/TbExtendedGridView.php)（最终从[CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)扩展），您又可以在其中访问网格的[控制器](http://www.yiiframework.com/doc/api/1.1/CWidget#controller-detail)属性（其中由小部件父级定义），最后是控制器的get [id](http://www.yiiframework.com/doc/api/1.1/CController#id-detail)。

然后，假设您的所有其他代码都是正确的，您可以像这样指定您的 gridview：

```
<?php 
$data = $model->search(); 
$this->widget('bootstrap.widgets.TbExtendedGridView', array(
    'id'=>'insurance-grid',
    'dataProvider'=>$model->search(),
    //'filter'=>$model,
    'columns'=>array(
        'id',
        'registeration_date',
        'modification_date',
        array(
            'htmlOptions' => array('nowrap'=>'nowrap'), 
            'class'=>'bootstrap.widgets.TbButtonColumn', 
            'viewButtonUrl'=>'Yii::app()->createUrl($this->grid->controller->id."/view", array("id"=>$data["id"]))', 
            'updateButtonUrl'=>'Yii::app()->createUrl($this->grid->controller->id."/update", array("id"=>$data["id"]))', 
        ),
    ),
)); 
```

我自己没有使用任何`Tb`扩展，只要它们没有改变它们扩展的对象的内置行为，以上应该可以按需要工作。

# php - TCPDF 图像调整大小

> ID：16130432
> 
> 赞同：0
> 
> 时间：2013-04-21T11:00:25.703
> 
> 标签：php, pdf, image-resizing, tcpdf

我想用最新的 TCPDF 制作 pdf。
我有一个 LC6 横向文档 (152mm × 109mm)。我将图像放到页面上，并像这样设置图像参数：

```
$pdf->Image($image, 0, 0, 152, 0, 'PNG', '', '', true, 300); 
```

pdf 文件为空。但是，当我将 152 更改为 151 时，图像出现在 pdf 文件中，但比文档小。
为什么图像有足够空间时会消失？
我的图片是 1795×1287px 但没关系，因为我想调整它的大小。

**更新：**
并非每张图片都会出现此问题，其他图片在 pdf 中正确显示。这两个图像具有相同的 dpi 和相同的分辨率。透明度可能是问题的根源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:20:16.487

问题解决了。
缓存文件夹必须是可写的。不幸的是，我在文档中没有找到这些信息，我在源代码中找到了它，在一些图像解析器方法的注释中。

# javascript - 检测 Chrome for iOS 地址栏何时显示

> ID：16130435
> 
> 赞同：9
> 
> 时间：2013-04-21T11:00:33.670
> 
> 标签：javascript, ios, css, google-chrome, web-applications

我已`apple-mobile-web-app-capable`在我的网络应用程序的 head 部分中将其设置为 true。很好，Chrome 会尽可能隐藏地址栏，以便为网络应用程序提供更多空间。

问题是我的应用程序的导航在那段时间位于顶部并位于地址栏后面。我想知道是否有一种方法可以检测地址栏何时显示并将导航放置在地址栏下方。

如果我删除`apple-mobile-web-app-capable`元标记，地址栏会显示，但导航仍然在它后面。出于某种原因，Chrome 将窗口大小设置为屏幕大小，但将地址栏拉到其顶部。

有人知道对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:23:29.833

实际上有一个解决方法；你只需要强制你的应用向下滚动 1px（足以隐藏 Chrome 地址栏）：

```
setTimeout(function() {
  // Already scrolled?
  if(window.pageYOffset !== 0) return;

  window.scrollTo(0, window.pageYOffset + 1);
}, 1); 
```

# java - Openshift 上 Tomcat 7.0.39 上的 Websocket

> ID：16130438
> 
> 赞同：1
> 
> 时间：2013-04-21T11:01:03.870
> 
> 标签：java, websocket, tomcat7, openshift

我刚刚在我的 openshift 帐户 (tomcat-ngoanhtuanthesis.rhcloud.com/) 上成功安装了 Apache Tomcat 7.0.39。我知道tomcat 7.0.39 已经支持Websocket。在我的本地计算机上，我可以正确运行我的 Web 套接字应用程序，但我无法在 openshift 服务器中运行它。但是，我的 Web 服务应用程序可以很好地运行。我在互联网上搜索了整整一周，但找不到任何解决方案。谁能帮我？先感谢您！

注意：这是我的网络服务：

tomcat-ngoanhtuanthesis.rhcloud.com/TrueTrafficServerAlpha2/

以下是 Tomcat 7.0.39 中集成的一些 websocket 示例。这些示例即使非常简单也无法运行。

[http://tomcat-ngoanhtuanthesis.rhcloud.com/examples/websocket/](http://tomcat-ngoanhtuanthesis.rhcloud.com/examples/websocket/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:29:50.943

你读过这个吗？[https://www.openshift.com/blogs/paas-websockets](https://www.openshift.com/blogs/paas-websockets)

WebSockects 目前正在 openshift 上进行，并且可以在其他端口上使用。

> **如何访问预览 WebSockets 支持？**
> 
> 您将需要连接到特定端口，因为主路由层仍然基于 Apache，并且不支持 WebSockets。
> 
> 因此，对于普通的 WebSockets ws://，您将使用端口 8000 和安全连接 wss:// 端口 8443。这是一个示例：
> 
> > [http://app-lovingwebsockets.rhcloud.com/](http://app-lovingwebsockets.rhcloud.com/) <= 你当前的 HTTP URL
> > 
> > [http://app-lovingwebsockets.rhcloud.com:8000/](http://app-lovingwebsockets.rhcloud.com:8000/) <= WebSockets 启用 HTTP URL
> > 
> > [https://app-lovingwebsockets.rhcloud.com/](https://app-lovingwebsockets.rhcloud.com/) <= 你当前的 HTTPS URL
> > 
> > [https://app-lovingwebsockets.rhcloud.com:8443/](https://app-lovingwebsockets.rhcloud.com:8443/) <= WebSockets 启用 HTTPs URL

因此，只需在此处打开您的示例，它们就会正常工作（希望如此）：

```
https://tomcat-ngoanhtuanthesis.rhcloud.com:8443/examples/websocket/ 
```

# zend-framework - 使用服务管理器 Zend Framework 2

> ID：16130440
> 
> 赞同：0
> 
> 时间：2013-04-21T11:01:36.517
> 
> 标签：zend-framework, zend-framework2, servicemanager

如果我在模块类别中有一个服务管理器，例如，我可以从模块应用程序中的类别中读取吗？

我已经在Application的Module.php中这样做了，'list-category'位于模块类别的module.config.php文件中：

```
public function onDispatch(MvcEvent $e)
{
    // get service manager from the application object
    $sm = $e->getApplication()->getServiceManager();
    // get categories service
    $categories = $sm->get('list-category');
    // get view model
    $vm = $e->getViewModel();
    // store category list in a variable
    $vm->setVariable('categories', $categories);
} 
```

我已经在应用程序的模块类别中阅读了服务管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:09:24.623

是的，您可以使用在 module 中添加到服务管理器中的服务`A`module `B`。服务只是在不同的模块中*添加*到服务管理器中，但可以跨模块使用，因为配置文件由模块管理器合并在一起，然后交给服务管理器。这就是为什么为服务名称命名以避免跨模块的命名冲突是一个好主意。只需像往常一样获取它，它应该可以工作。

关于您提供的代码，那么问题是什么？它不工作吗？你有任何错误吗？的内容是`$categories`什么？您是否将您的功能附加到事件管理器？如果没有，那么[本文](http://lab.empirio.no/how-to-attach-mvc-events-in-zf2.html)将向您展示如何做到这一点。另外，请仔细考虑是否要对`Category`模块内的每个页面请求执行此类操作。我不知道你的推理，但是在每次页面加载时都做这样的事情，你应该有充分的理由这样做。

# android - 使用 XML 元素以编程方式创建布局

> ID：16130441
> 
> 赞同：0
> 
> 时间：2013-04-21T11:01:46.937
> 
> 标签：android, xml, view

我以编程方式编写了我的布局之一。当我试图用 XML 实现它时，我无法让它工作。它与 NullPointerException 一起崩溃，我真的不知道为什么。

这是我的 XML 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".DisplayMessageActivity" >

<ImageView
    android:id="@+id/canal_1"
    android:contentDescription="@string/desc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:onClick="canal1_Click"
    android:src="@drawable/pestanya_seleccionada" />

</RelativeLayout> 
```

我正在尝试的是：

```
ImageView canal1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* layout prinicpal */
    RelativeLayout relativeLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
    canal1 = (ImageView) findViewById(R.id.canal_1);
    relativeLayout.addView(canal1);
    setContentView(relativeLayout, rlp);
} 
```

它崩溃在`relativeLayout.addView(canal1);`

我不知道为什么这会失败。在我看来，一切都应该运行良好。

感谢您的阅读，希望您能帮助我；）

亲切的问候，劳尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:09:53.860

您尚未将 xml 布局的内容设置到屏幕上，并且您正在查找 ImageView 的 id。这导致了 NPE。

```
 canal1 = (ImageView) findViewById(R.id.canal_1); 
```

上述语句将导致 nullpointerexception，因为您尚未设置布局并且您正在尝试查找 xml 文件中定义的 id 形式。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activty_main);
RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout);
//add other ui elements to the root layout ie  RelativeLayout
}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/relativeLayout"// relative layout id
android:orientation="vertical"
tools:context=".DisplayMessageActivity" >
<ImageView
android:id="@+id/canal_1"
android:contentDescription="@string/desc"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:onClick="canal1_Click"
android:src="@drawable/pestanya_seleccionada" />
</RelativeLayout> 
```

# jquery - 在PHP页面中使用Uframe（或其他东西）加载外部网站并在DOM元素上触发点击事件？

> ID：16130448
> 
> 赞同：1
> 
> 时间：2013-04-21T11:02:56.667
> 
> 标签：jquery, triggers, cross-domain, uframe

首先，我知道这个问题听起来可能相当复杂，但我希望没有那么复杂。

我的目标如下：

我有一个页面**mypage.php**，我有一个**按钮**（其 ID 是**button**，它只是一个使用 css 样式绘制的 div）。当我单击此按钮时，我想：

1）加载**外部网站的内容**

2) 网站**完全**加载后：

*   a)用一些内容**填充**此页面中的文本字段（例如，假设此页面有一个id为**my_field的****输入字段**，我希望此文本字段包含文本**mytext******）****
*****   b)在按钮（使用 css 样式绘制的 div ）上**触发**“click”（或“mousedown”）**事件。**假设这个按钮的 id 是：**external_button***   c）*最后*：**重新加载**外部网站“作为**独立**”。**我的意思是：当我点击指向该网站 url 的链接时，**我希望 mypage.php “消失”并“移动”到另一个网站。****

 ****请注意，最后一点对我来说是**可选的**的：唯一重要的是用户将能够使用加载的网站，因为他们将其地址写入浏览器的 url 地址栏

**mypage.PHP**的结构：

```
<html>
   <body>
      <div class="mybutton" id="mybutton"> </div> <br/>
      <div id="content"></div>
  </body>
</html> 
```

**外部网站**结构：

```
 <html>
    <head> <!-- SOMETHING..including styles,javascript,title,metatags etc. --> </head>
      <body>
          <input type="text" id="my_field" value="" /><br/>
          <div class="external_button" id="external_button"> </div>
      </body>
 </html> 
```

我在网上搜索并找到了这个可能的解决方案（但我不知道如何“组合”或使用它们）：1）使用**uframe**加载外部网站。*首先，我不明白我是否可以使用**PHP**或只是 ASPX。然后我不明白它是如何工作的。*

a+b) 填写文本字段并触发事件：使用**jquery**。我尝试使用 Chrome 开发工具（直接在浏览器中加载网站），但显然它不起作用。

```
$("#external_button").trigger("mousedown") 
```

c）我想这可以使用**header** php 函数（或使用**javascript:reload**）来完成

任何建议都非常感谢。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:07:30.790****

# meteor - Meteor 模板中的反应行为

> ID：16130456
> 
> 赞同：2
> 
> 时间：2013-04-21T11:04:00.803
> 
> 标签：meteor, handlebars.js

有人可以澄清 Meteor (Handlebars) 模板如何与反应源交互吗？[文档](http://docs.meteor.com/)中已经有很多内容，但更系统的解释会有所帮助。

`Session`例如，当变量更改时，以下内容似乎不会触发模板重新绘制

```
Template.foo.rendered = function () {
    var selectedItem = Session.get('item_selected');
    ... do stuff ...
} 
```

我不明白为什么该`Template.rendered`事件不对响应式源更改做出反应。我还想了解其他事件/方法是否表现出这种特殊行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:00:14.143

`item_selected`当您设置值时，模板将重新呈现

```
Session.set("item_selected","value"); 
```

这个`Session`哈希，除了名称之外，还有一个类似于[Deps.depends](http://docs.meteor.com/#dependency_depend)的反应性依赖。当您更改此 Session 哈希时，当前的反应式上下文将失效，并且所有内容都将重新绘制/重新渲染（通过 Session.set 调用）。

然后，该`.rendered`方法将在您可以使用此新值的地方运行，就像您使用`var selectedItem`

有关它是如何工作的非常详细的视频广播，您可以查看 EventedMind 上的视频，其中演示了如何`Session`构建以及如何使另一个变量反应。

1.  [http://www.eventedmind.com/posts/meteor-the-reactive-session-object](http://www.eventedmind.com/posts/meteor-the-reactive-session-object)
2.  [http://www.eventedmind.com/posts/meteor-introducing-deps](http://www.eventedmind.com/posts/meteor-introducing-deps)

# jquery - Jquery解析Json“Access-Control-Allow-Origin不允许Origin null”

> ID：16130468
> 
> 赞同：1
> 
> 时间：2013-04-21T11:06:39.527
> 
> 标签：jquery, json, getjson

我哪里错了

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>title</title>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script>
$.get("http://api.angel.co/1/tags/1654/startups?callback=aaa",
   function(data) {
     $('body').append( "Name: " + data );
   }, "json");

</script>

    </head>

<body>

</body>
</html> 
```

XMLHttpRequest 无法加载[http://api.angel.co/1/tags/1654/startups?callback=aaa](http://api.angel.co/1/tags/1654/startups?callback=aaa)。Access-Control-Allow-Origin 不允许 Origin null。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T11:24:41.917

尝试使用 jquery `ajax`：

```
$.ajax({
    url:"http://api.angel.co/1/tags/1654/startups?callback=aaa",
    type:'GET',
    dataType:'JSONP',
    success: function(data){
        $('body').append( "Name: " + data );
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T11:13:23.600

*Access-Control-Allow-Origin 不允许 Origin null*

除非您使用 JSONP，否则您无法使用 XMLHttpRequest 访问另一个域（*与您所在的域不同）*

阅读有关[Same_origin_policy 的更多信息](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T11:19:46.337

您必须托管在某个服务器上才能运行 AJAX，否则它总是会说

```
Origin null is not allowed ... 
```

尝试 WAMP/LAMP 或使用 Apache tomcat 在 localhost 上运行您的 HTML 代码。它将使您的域 localhost 而不是 null 并修复它。

PS：跨域问题可能仍然存在，具体取决于您所访问的服务器是否允许您从中获取/发布数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T11:31:57.077

以下应该有效：

```
$.getJSON("http://api.angel.co/1/tags/1654/startups?callback=?", function(data) {
    $(body).append(data);
}); 
```

jQuery 将取代 ? 具有调用内联函数的生成函数名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-08T14:49:00.407

在您的 ajax 调用中包含属性“dataType”和值为“JSONP”。请参考以下示例代码：

```
$.ajax({
    url: "http://api.angel.co/1/tags/1654/startups?callback=aaa",
    dataType:'JSONP',
    success: function(data) {
        $('body').append( "Name: " + data.name);
    }
}); 
```

# ruby - JSON 不会显示

> ID：16130474
> 
> 赞同：0
> 
> 时间：2013-04-21T11:07:17.263
> 
> 标签：ruby, json, html, web, sinatra

我有一个 Sinatra 应用程序，它应该从 JSON 文件中获取图像 URL 并将它们放入 HTML`<img>`标记中。

当我将它打印到命令行时，我可以很好地解析 JSON，但是当我使用 ERB 放置数据时，它不会显示。

我把它放在`<ul>`标签中，只得到 JSON 文件中每个图像的要点。

这是我的代码：

应用程序.rb：

```
get "/" do

    file = open("./images.json")
    json = file.read

    @parsed = JSON.parse(json)

    erb :roar

    #@parsed.each do |roar|
    #  p roar["url"]
    #end

end 
```

咆哮.erb：

```
<ul>
 <% @parsed.each do |shop| %>
 <li> <%shop["url"] %> </li>

 <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:37:10.240

你不只是在这里错过了一个“=”：

```
<li> <%= shop["url"] %> </li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:24:06.823

只是对代码的一些评论：

不要使用：

```
file = open("./images.json")
json = file.read

@parsed = JSON.parse(json) 
```

相反，使用：

```
json = File.open("./images.json") do |fi|
  fi.read
end

@parsed = JSON.parse(json) 
```

或者：

```
json = File.open("./images.json") { |fi| fi.read }
@parsed = JSON.parse(json) 
```

或者：

```
json = File.read("./images.json")
@parsed = JSON.parse(json) 
```

或者：

```
@parsed = JSON.parse(File.read("./images.json")) 
```

原因是：

*   `file = open("./images.json")`打开文件但从不关闭它。这不是好的形式，也不是惯用的 Ruby。前两个替换会自动关闭打开的文件。
*   使用`File.read`返回文件的内容，就像打开它并在一个单独的步骤中读取一样，只有一个步骤。该文件也会在之后自动关闭。

# php - 标记显示不正确

> ID：16130475
> 
> 赞同：0
> 
> 时间：2013-04-21T11:07:26.560
> 
> 标签：php, url, google-static-maps

我正在使用谷歌静态地图，我想在地图上显示标记，网址是在服务器端生成的，**几乎**可以工作，但目前有一些奇怪的问题。大约 50% 的标记显示不正确。

```
http://maps.google.com/maps/api/staticmap?size=640x480&zoom=7center=Estonia&maptype=roadmap&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%207%257C000%257Cfff|Harju+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%202%257C000%257Cfff|Hiiu+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%206%257C000%257Cfff|Ida-Viru+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%2012%257C000%257Cfff|J%C3%B5geva+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%205%257C000%257Cfff|J%C3%A4rva+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%204%257C000%257Cfff|L%C3%A4%C3%A4ne+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%208%257C000%257Cfff|L%C3%A4%C3%A4ne-Viru+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%203%257C000%257Cfff|P%C3%B5lva+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%204%257C000%257Cfff|P%C3%A4rnu+maakond&markers=icon:http%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%202%257C000%257Cfff|Rapla+maakond&sensor=true 
```

[链接到地图](http://maps.google.com/maps/api/staticmap?size=640x480&zoom=7center=Estonia&maptype=roadmap&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%207%257C000%257Cfff|Harju+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%202%257C000%257Cfff|Hiiu+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%206%257C000%257Cfff|Ida-Viru+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%2012%257C000%257Cfff|J%C3%B5geva+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%205%257C000%257Cfff|J%C3%A4rva+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%204%257C000%257Cfff|L%C3%A4%C3%A4ne+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%208%257C000%257Cfff|L%C3%A4%C3%A4ne-Viru+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%203%257C000%257Cfff|P%C3%B5lva+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%204%257C000%257Cfff|P%C3%A4rnu+maakond&markers=icon%3ahttp%3A%2F%2Fchart.apis.google.com%2Fchart%3Fchst%3Dd_bubble_icon_text_small%26chld%3Dhome%257Cbb%257C%202%257C000%257Cfff|Rapla+maakond&sensor=true)

# hibernate - 如何在jpa中检索记录和字段值

> ID：16130476
> 
> 赞同：4
> 
> 时间：2013-04-21T11:07:40.057
> 
> 标签：hibernate, jpa

考虑以下实体：

```
@Entity
public class User {
    private int id;
    private String name;
    private String family;
    //getters and setters
} 
```

和 sql：

```
select * 
from (select row_.*, first_Value(rownum) over (order by rownum desc) countـ
      from (select * from user) row_) 
```

您可能会猜到 sql 的结果集由四列组成：

```
id, name, family, countـ 
```

我通过以下方式检索用户表记录作为用户列表：

```
String myQuery = "select * from (select row_.*, first_Value(rownum) over (order by rownum desc) count_
      from (select * from user) row_)"
Query query = entityManager.createNativeQuery(myQuery, User.class);
List<User> users = query.getResultList(); 
```

现在的问题是，我如何仅通过调用 getResultList() 或任何其他休眠等效项来检索用户列表并计算值？

我使用 Oracle 11g 和 Jpa (Hibernate implementation 3.6)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:48:14.507

我认为“计数”是一个保留字。我会像这样重新组织您的查询：

```
String myQuery = "SELECT "
        + "id, "
        + "name, "
        + "family, "
        + "cnt "
        + "FROM ("
            + "SELECT "
            + "user.*, "
            + "first_Value(rownum) over (order by rownum desc) AS cnt "
            + "FROM "
            + "user "
        + ")";
    Query query = entityManager.createNativeQuery(myQuery);
    List<Object[]> resultList = query.getResultList(); 
```

当然，您也可以使用 * 代替“id、name、family、cnt”。

# php - 无法解决 PHP 错误信息

> ID：16130478
> 
> 赞同：0
> 
> 时间：2013-04-21T11:07:48.870
> 
> 标签：php

谁能帮我解决以下错误。我正在为我的网站制作注册和登录功能。我将它连接到我的本地数据库，并在那里创建了一个用户。当我测试我可以登录并且用户名和密码被识别时，它按预期工作。但我得到这个错误

```
Warning: mysql_result(): Unable to jump to row 0 on MySQL result index 17 in C:\xampp\htdocs\LoginAndRegistration\core\functions\users.php on line 34 
```

这就是我在第 34 行的内容

```
return (mysql_result(mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'"), 0) == 1) ? true : false; 
```

这是以下功能的一部分

```
function login($username, $password) {
    $user_id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    return (mysql_result(mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'"), 0) == 1) ? true : false;
} 
```

我已经盯着它看了很长时间，但似乎无法找出问题所在。谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:40:39.807

那行代码看起来像您要检查用户名和密码是否存在。您需要将代码更改为：

```
return (mysql_result(mysql_query("SELECT COUNT(id) FROM users WHERE username = '$username' AND password = '$password'"), 0) == 1) ? true : false; 
```

还将 (id) 更改为您的列的 id 名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:12:06.190

此错误表示查询失败。始终检查查询是否成功：

```
$q = mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'");
if ($q) {
    if ($rows = mysql_num_rows($q)) {
        // Continue operation, or set a flag
    } else {
        // No matching rows, throw an Exception or set a flag
    }
} else {
    // Something is wrong
    die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:18:55.320

尝试这个

```
 function login($username, $password) {
$user_id = user_id_from_username($username);

$username = sanitize($username);
$password = md5($password);
$query = mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'") ;
if (mysql_num_rows($query) > 0 ) {

    $data = true ;
}else {

    $data = false ;
}
return $data ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T11:13:33.347

您的错误可能来自查询根本没有返回任何结果，因为没有匹配的用户名和密码。

我真的不会把那么多功能塞进彼此。它看起来过于复杂，它没有留下任何空间来添加错误处理（例如处理应该在您的情况下发生的情况），并且它弄乱了 PHP 的错误报告，因为发生的任何错误都将在同一代码行上。

将内容分散到多行中。它使任何阅读您的代码的人都更清楚，增强了调试活动，并且由于行长较短，通常是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T11:13:52.497

您收到警告（不是错误），因为**mysql_query**有时不会返回任何行，因此在没有行时尝试使用**mysql_result**获取第一行会引发警告。

你可以试试：

```
function login($username, $password) {
    $user_id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    $query = mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'");
    if (mysql_num_rows($query) > 0)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T11:14:10.083

撇开折旧参数，使用 mysql_num_rows 而不是 mysql_result。

```
function login($username, $password) {
    $user_id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    return (mysql_num_rows(mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'")) == 1) ? true : false;
} 
```

# c# - XAML 为转换器类添加命名空间

> ID：16130479
> 
> 赞同：4
> 
> 时间：2013-04-21T11:08:01.703
> 
> 标签：c#, class, xaml, namespaces

我一直收到“yyy 中不存在名称 xxx”。我不明白为什么，我想我尝试了所有可能的组合。

我所有的cs文件，包括主窗口都在“Web_Media_Seeker_WPF”命名空间中

**转换器.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Data;

namespace Web_Media_Seeker_WPF.WPFConverters
{
    public class BoolToValueConverter<T> : IValueConverter
    {
        public T FalseValue { get; set; }
        public T TrueValue { get; set; }

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null)
                return FalseValue;
            else
                return (bool)value ? TrueValue : FalseValue;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value != null ? value.Equals(TrueValue) : false;
        }
    }

    public class BoolToObjectConverter : BoolToValueConverter<Object> { }
    public class BoolToStringConverter : BoolToValueConverter<String> { }
    public class BoolToBrushConverter : BoolToValueConverter<System.Windows.Media.Brush> { }
    public class BoolToVisibilityConverter : BoolToValueConverter<System.Windows.Visibility> { }
    public class BoolToColorConverter : BoolToValueConverter<System.Windows.Media.Color> { }
    public class BoolToImageSourceConverter : BoolToValueConverter<System.Windows.Media.ImageSource> { }
    public class BootToBoolConverter : BoolToValueConverter<bool> { }

        public class AddValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            object result = value;
            int Value;

            if (value != null && targetType == typeof(Int32) &&
                int.TryParse((string)parameter,
                System.Globalization.NumberStyles.Integer, culture, out Value))
            {
                result = (int)value + (int)Value;
            }

            return result;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

**主窗口.xaml**

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namesapce:Web_Media_Seeker_WPF.WPFConverters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        x:Class="Web_Media_Seeker_WPF.MainWindow"
        Title="Web Media Seeker"
        Height="563"
        Width="836">
  <Window.Resources>
    <local:BoolToImageSourceConverter x:Key="BoolToWorkImageSource"
                                      TrueValue="Images/work.png"
                                      FalseValue="Images/idle.png" />
    <local:BootToBoolConverter x:Key="InvertBool"
                               TrueValue="False"
                               FalseValue="True" />
    <local:BoolToStringConverter x:Key="WorkTooltip"
                                 TrueValue="Working..."
                                 FalseValue="Idle" />
  </Window.Resources>
and stuff... 
```

我有错误：

> 名称空间“clr-namesapce:Web_Media_Seeker_WPF.WPFValuesConverters”中不存在名称“BoolToImageSourceConverter”。
> 
> 命名空间“clr-namesapce:Web_Media_Seeker_WPF.WPFValuesConverters”中不存在名称“BoolToStringConverter”。
> 
> 名称空间“clr-namesapce:Web_Media_Seeker_WPF.WPFValuesConverters”中不存在名称“BootToBoolConverter”。
> 
> XML 命名空间“clr-namesapce:Web_Media_Seeker_WPF.WPFValuesConverters”中不存在标记“BoolToImageSourceConverter”。
> 
> 找不到类型“本地：BoolToImageSourceConverter”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。
> 
> 找不到类型“本地：BoolToStringConverter”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。
> 
> 找不到类型“本地：BootToBoolConverter”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T11:11:21.503

您的命名空间声明中有一个错误：

```
xmlns:local="clr-namesapce:Web_Media_Seeker_WPF.WPFConverters" 
```

应该

```
xmlns:local="clr-namespace:Web_Media_Seeker_WPF.WPFConverters" 
```

你把`namesapce`而不是`namespace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T17:53:49.943

我没有错字就遇到了这个问题。问题不直接与 XAML 相关，或者至少不完全是。最初的开发者将 Window 标记命名为与代码隐藏类名称相同的名称，现在这似乎被禁止了。这是 XAML 的唯一问题。其他一切都与 WPF 和 Windows.System.Data 库中的重叠有关，导致 IValueConverter（在 System.Windows.Data 命名空间中）无法识别。我首先在对象浏览器中搜索了所有具有 IValueConverter 接口的库。其中，两个在我的项目中，一个是事后才想到的，因为我认为我需要它来替换我删除的 WPF 工具包 3.5 的元素。我删除了我认为可以不用的那个，这消除了问题。这是一种“模棱两可的参考”

# html - 如何使对象在滚动时跟随屏幕？

> ID：16130480
> 
> 赞同：0
> 
> 时间：2013-04-21T11:08:02.110
> 
> 标签：html, css

好的，这是一个非常含糊的标题，但从本质上讲，这就是我想要做的：让一个对象开始`x, y`并且在文档滚动到该对象位于屏幕顶部之前不要移动. 然后，我希望它的行为与具有`position:fixed;`属性集的对象完全一样。换句话说，当你提出一个新问题时，我希望它的行为类似于 StackOverflow 侧边栏：直到侧边栏到达屏幕顶部，它才会保持原样。之后，它会跟随你。

# jquery - Handlebars.js 日历和网址

> ID：16130481
> 
> 赞同：1
> 
> 时间：2013-04-21T11:08:06.823
> 
> 标签：jquery, handlebars.js

对于 30 天的“弹出”事件，我使用把手和 jquery 从 json 文件中加载每天的“数据”（媒体、文本......）。到目前为止按预期工作：

```
 //template

<script id="calendarT" type="x-handlebars-template">

<ol id="calendar"class="cf">{{#each list}}<li class="day" >{{this}}</li>{{/each}}</ol>      
<div id="progress"><div id="bar"> </div></div>  
</script>

//data + compile

var allDays  = {"list":["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]};   
var calT = Handlebars.compile($("#calendarT").html());
$("#calendarView").html(calT(allDays)); 

    //using moment.js we highlight today etc... and update bar's width

var isnow = moment().date();
$("#calendar li:eq("+isnow+")").addClass("on");    
$("#calendar li:gt("+isnow+")").addClass("future");   
$("#calendar li:lt("+isnow+")").addClass("past");        
if (isnow<7) {
 $('#bar').css('width', "15%");}
else if (isnow>=7&isnow<=14) {
$('#bar').css('width', "20%");} 
else  (isnow>=14&isnow<=24) {
$('#bar').css('width', "60%");}
//you get the idea, this should be improved, something like $('#bar').css('width', isnow+"%") ??? 
}); 

        //load day on click
$ui.on('click', '.past', function(event) { var today = $(this).text();  
$.getJSON('days/'+today+'.json', function(data) {                     
var eachdayT = Handlebars.compile($("#eachdayT").html());
$("#dayView").html(eachdayT(data)).toggle();          
 }); 
```

我接下来想做的是添加某种“url 路由”（或者称为“状态”？），这样如果用户在浏览器上键入 .com/popupevent/#22 我可以显示/加载当天的内容。它也将帮助我猜喜欢/转发按钮......

到目前为止似乎可以在 firefox/safari 上使用，有没有更好的方法呢？是否有可能摆脱哈希 .com/popupevent/22 ？

```
 if ( window.location.hash==="") {
    // do nothing
    }else{              
    var hash = window.location.hash;
    alert("haz hash and is "+hash+"") ; 
// load day
    } 
```

格拉西亚斯。

![截屏](https://i.stack.imgur.com/mPOBb.png) ![caniuse.com](https://i.stack.imgur.com/usIqh.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:27:11.790

您可以使用 HTML5 [History API](https://developer.mozilla.org/en-US/docs/DOM/window.history)，还有一个很好的插件可以支持旧浏览器并修复不一致的问题。[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

如果您正在开发单个 Web 应用程序，我建议您使用具有 Routing API 并支持 History API 的 [Backbone插件。](https://github.com/documentcloud/backbone)

# java - 为什么使用 TextView 更新 int 值并显示它给我一个崩溃？

> ID：16130492
> 
> 赞同：0
> 
> 时间：2013-04-21T11:10:12.603
> 
> 标签：java, android, android-layout, dynamic, textview

我正在尝试为 android 开发文本冒险。已经找到了一种无需创建新活动即可更改“页面”的微妙方法。

现在我试图在我的每个布局中包含永久 int 值，这些值会在更改时立即更新。

即黄金/健康值。根据玩家在游戏中的选择，它将： - 将布局更改为相应的页面 - 更改金币 +10 的 int 值，健康 -1

我在 mainactivity 类中开发了这段代码：

```
package com.example.textadventure;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

    private int int1 = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void changelayout1(View view){
        setContentView(R.layout.activity_main2);
        int1 += 1;
    }
    public void changelayout2(View view){
        setContentView(R.layout.activity_main);
        int1 += 1;
    }
    public void changelayout3(View view){
        setContentView(R.layout.activity_main3);
        int1 += 1;
    }

    public void onResume() {
        super.onResume();
        TextView textView = (TextView) this.findViewById(R.id.mytextview1);
        textView.setText(String.valueOf(int1));
    }

} 
```

**结果如下：**

我的日志猫

```
04-19 16:09:57.446: E/Trace(3204): error opening trace file: No such file or directory (2)
04-19 16:09:59.016: D/AndroidRuntime(3204): Shutting down VM
04-19 16:09:59.016: W/dalvikvm(3204): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 16:09:59.036: E/AndroidRuntime(3204): FATAL EXCEPTION: main
04-19 16:09:59.036: E/AndroidRuntime(3204): java.lang.RuntimeException: Unable to resume activity {com.example.textadventure/com.example.textadventure.MainActivity}: java.lang.NullPointerException
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.os.Looper.loop(Looper.java:137)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:09:59.036: E/AndroidRuntime(3204): Caused by: java.lang.NullPointerException
04-19 16:09:59.036: E/AndroidRuntime(3204):     at com.example.textadventure.MainActivity.onResume(MainActivity.java:28)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.Activity.performResume(Activity.java:5182)
04-19 16:09:59.036: E/AndroidRuntime(3204):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-19 16:09:59.036: E/AndroidRuntime(3204):     ... 12 more
04-19 16:10:02.386: I/Process(3204): Sending signal. PID: 3204 SIG: 9
04-19 16:15:42.576: D/AndroidRuntime(3292): Shutting down VM
04-19 16:15:42.586: W/dalvikvm(3292): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 16:15:42.596: E/AndroidRuntime(3292): FATAL EXCEPTION: main
04-19 16:15:42.596: E/AndroidRuntime(3292): java.lang.RuntimeException: Unable to resume activity {com.example.textadventure/com.example.textadventure.MainActivity}: java.lang.NullPointerException
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.os.Looper.loop(Looper.java:137)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:15:42.596: E/AndroidRuntime(3292): Caused by: java.lang.NullPointerException
04-19 16:15:42.596: E/AndroidRuntime(3292):     at com.example.textadventure.MainActivity.onResume(MainActivity.java:31)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.Activity.performResume(Activity.java:5182)
04-19 16:15:42.596: E/AndroidRuntime(3292):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-19 16:15:42.596: E/AndroidRuntime(3292):     ... 12 more
04-19 16:18:00.358: E/Trace(3350): error opening trace file: No such file or directory (2)
04-19 16:18:01.796: D/AndroidRuntime(3350): Shutting down VM
04-19 16:18:01.810: W/dalvikvm(3350): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 16:18:01.866: E/AndroidRuntime(3350): FATAL EXCEPTION: main
04-19 16:18:01.866: E/AndroidRuntime(3350): java.lang.RuntimeException: Unable to resume activity {com.example.textadventure/com.example.textadventure.MainActivity}: java.lang.NullPointerException
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.os.Looper.loop(Looper.java:137)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:18:01.866: E/AndroidRuntime(3350): Caused by: java.lang.NullPointerException
04-19 16:18:01.866: E/AndroidRuntime(3350):     at com.example.textadventure.MainActivity.onResume(MainActivity.java:31)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.Activity.performResume(Activity.java:5182)
04-19 16:18:01.866: E/AndroidRuntime(3350):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-19 16:18:01.866: E/AndroidRuntime(3350):     ... 12 more
04-19 16:22:06.477: E/Trace(3412): error opening trace file: No such file or directory (2)
04-19 16:22:08.086: D/AndroidRuntime(3412): Shutting down VM
04-19 16:22:08.116: W/dalvikvm(3412): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 16:22:08.207: E/AndroidRuntime(3412): FATAL EXCEPTION: main
04-19 16:22:08.207: E/AndroidRuntime(3412): java.lang.RuntimeException: Unable to resume activity {com.example.textadventure/com.example.textadventure.MainActivity}: java.lang.NullPointerException
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.os.Looper.loop(Looper.java:137)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:22:08.207: E/AndroidRuntime(3412): Caused by: java.lang.NullPointerException
04-19 16:22:08.207: E/AndroidRuntime(3412):     at com.example.textadventure.MainActivity.onResume(MainActivity.java:35)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.Activity.performResume(Activity.java:5182)
04-19 16:22:08.207: E/AndroidRuntime(3412):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-19 16:22:08.207: E/AndroidRuntime(3412):     ... 12 more
04-19 16:22:10.786: I/Process(3412): Sending signal. PID: 3412 SIG: 9
04-19 16:25:22.020: D/AndroidRuntime(3477): Shutting down VM
04-19 16:25:22.020: W/dalvikvm(3477): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 16:25:22.026: E/AndroidRuntime(3477): FATAL EXCEPTION: main
04-19 16:25:22.026: E/AndroidRuntime(3477): java.lang.RuntimeException: Unable to resume activity {com.example.textadventure/com.example.textadventure.MainActivity}: java.lang.NullPointerException
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.os.Looper.loop(Looper.java:137)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at dalvik.system.NativeStart.main(Native Method)
04-19 16:25:22.026: E/AndroidRuntime(3477): Caused by: java.lang.NullPointerException
04-19 16:25:22.026: E/AndroidRuntime(3477):     at com.example.textadventure.MainActivity.onResume(MainActivity.java:36)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.Activity.performResume(Activity.java:5182)
04-19 16:25:22.026: E/AndroidRuntime(3477):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-19 16:25:22.026: E/AndroidRuntime(3477):     ... 12 more 
```

正如我所说，我想要这样的东西：

[http://postimg.org/image/dy7g2ts6v/](http://postimg.org/image/dy7g2ts6v/)

我已经知道如何制作按钮来切换布局，但我无法在不崩溃的情况下显示整数。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:14:06.380

似乎并非所有布局都有 view `mytextview1`。确保每个布局 XML 中都存在这样的视图。

考虑使用两个片段，一个显示永久信息，一个根据需要在布局之间切换。

碎片指南：

[http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:04:42.080

像这样做：

```
private Integer int1 = 1; 
```

及以下

```
TextView textView = (TextView) findViewById(R.id.mytextview1);
textView.setText(int1.toString()); 
```

请注意，您不需要 this.findViewById ，只需直接使用 findViewById 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:28:24.797

```
TextView tv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv= (TextView) findViewById(R.id.tv);
    //textview with id should be defined in activity_main.xml 
    //set text to textview.
} 
```

确保在 activity_main 中有一个文本视图。由于您已使用 activity_main 设置布局，因此您需要确保在 activity_main 中有 textview

[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

**您必须实现 onCreate() 方法来执行基本的应用程序启动逻辑，该逻辑在活动的整个生命周期中只发生一次**。您可以在 oncreate 中初始化 textiew。

假设活动暂停并恢复 onReusme() 被调用，那么每次你都会找到 textview 的 id。所以在oncreate中初始化textiew。

最好开始一个新的活动或使用片段，而不是在同一个屏幕上设置不同的布局。

活动主

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".DisplayMessageActivity" >

<TextView
android:id="@+id/tv"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

# c++ - std::map 和 std::vector 线程安全吗？

> ID：16130494
> 
> 赞同：6
> 
> 时间：2013-04-21T11:10:33.487
> 
> 标签：c++, multithreading, std, stdvector, stdmap

我正在开发一个多线程应用程序，每个线程将从一组映射和向量中读取（不会修改结构）。谁能告诉我，因为线程只从这些结构中读取，是否有必要在正在读取这些结构的代码块周围实现一个可共享的互斥锁？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T11:12:50.497

在只读映射/向量的情况下，无需使用互斥锁。[向量](https://stackoverflow.com/questions/7455982/is-stl-vector-concurrent-read-thread-safe)和[地图](https://stackoverflow.com/questions/1846186/thread-safety-of-stdmap-for-read-only-operations)都已经回答了这个问题
虽然 C++03 没有提到线程，但 C++11 有条款涵盖了你的问题。

## 23.2.2 容器数据竞赛 [container.requirements.dataraces]

> 1 为避免数据竞争 (17.6.5.9)，实现应将以下函数视为 const：begin、end、rbegin、rend、front、back、data、find、lower_bound、upper_bound、equal_range、at 和，但在关联或无序关联容器，运算符 []。
> 2 尽管有 (17.6.5.9)，当同时`vector<bool>`修改相同序列中不同元素中包含的对象的内容时，需要实现以避免数据竞争。
> 3 [注：对于一个`vector<int>`大小大于 1 的 x，x[1] = 5 和 *x.begin() = 10 可以在没有数据竞争的情况下同时执行，但 x[0] = 5 和 *x.begin() = 10 可以同时执行可能会导致数据竞争。作为一般规则的一个例外，对于向量 < bool > y，y[0] = true 可能与 y[1] = true 竞争。——尾注]

因此，在 C++11 中，它不仅允许读取对象，还允许同时修改其不同对象（但不允许容器！），但 vector < bool > 除外

# string - 循环字符串字符？

> ID：16130501
> 
> 赞同：2
> 
> 时间：2013-04-21T11:11:45.380
> 
> 标签：string, abap

如何读取字符串中的每个字符？例如，我想读取字符串“a7m4d0”中的每个字符。之后我想验证每个字符是字符还是数字。任何提示或想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T16:08:05.503

```
DATA: smth TYPE string VALUE `qwert1yua22sd123bnm,`,
      index TYPE i,
      length TYPE i,
      char  TYPE c,
      num   TYPE i.

length = STRLEN( smth ).

WHILE index < length.
  char = smth+index(1).
  TRY .
      num = char.
      WRITE: / num,'was a number'.
    CATCH cx_sy_conversion_no_number.
      WRITE: / char,'was no number'.
  ENDTRY.
  ADD 1 TO index.
ENDWHILE. 
```

你的问题解决了:P

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-13T15:01:33.043

在最近的 740 ABAP 服务器上有点复杂。:)

```
DATA: lv_text  TYPE string  VALUE `a7m4d0`.

DO strlen( lv_text ) TIMES.
  DATA(lv_single) = substring( val = lv_text off = sy-index - 1 len = 1 ) && ` is ` &&
                    COND string( WHEN substring( val = lv_text off = sy-index - 1 len = 1 ) CO '0123456789' THEN 'Numeric'
                                 ELSE                                                                             'Character' ).
  WRITE : / lv_single.
ENDDO. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T15:47:17.050

以下是访问字符串中单个字符的方法：

这个例子将把字符“t”提取到变量“lv_char1”中。

```
DATA: lv_string TYPE char10,
      lv_char   TYPE char1.

lv_string = "Something";

lv_char1 = lv_string+4(1). 
```

将“+4”附加到字符串名称指定从字符串开头的偏移量（在本例中为 4），“(1)”指定要拾取的字符数。

有关更多信息，请参阅此处的文档：

[http://help.sap.com/saphelp_nw04/Helpdata/EN/fc/eb341a358411d1829f0000e829fbfe/content.htm](http://help.sap.com/saphelp_nw04/Helpdata/EN/fc/eb341a358411d1829f0000e829fbfe/content.htm)

如果您想依次查看每个字符，您可以使用“strlen()”获取字段的长度并为每个字符执行循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-16T17:04:49.177

另一种方法

```
PERFORM analyze_string USING `qwert1yua22sd123bnm,`.

FORM analyze_string USING VALUE(p_string) TYPE string.

  WHILE p_string IS NOT INITIAL.
    IF p_string(1) CA '0123456798'.
      WRITE: /  p_string(1) , 'was a number'.
    ELSE.
      WRITE: /  p_string(1) , 'was no number'.
    ENDIF.
    p_string = p_string+1.
  ENDWHILE.

ENDFORM. 
```

不需要`DATA`语句、字符串函数或显式索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T18:53:49.637

我知道帖子很旧，但这可能很有用，这就是用途:)

```
 DATA lv_counter TYPE i.

  DO STRLEN( lv_word ) TIMES.

    IF lv_word+lv_counter(1) CA '0123456789'
      "It's a number 
    ENDIF.

    lv_counter = lv_counter + 1.

  ENDDO. 
```

# spring - java.lang.NoClassDefFoundError: Lcom/ardia/service/ComposantService；带弹簧

> ID：16130504
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:12:01.277
> 
> 标签：spring, hibernate, jsf-2

我有一个使用 JSF 2.0、Spring 3.0 和 Hibernate 4 的 Web 应用程序。经过两天的设置，我终于在我的数据表中得到了一个列表，但我也遇到了一个问题。我可以这么说，因为我在控制台中看到有关服务类使用的错误：

我的服务等级：

```
package com.ardia.service; 
@Service("compService")
@Transactional
public class ComposantImp implements ComposantService {

    @Autowired
    SessionFactory sessionFactory;

    @Override
    public void inserComposant(Composant comp) {
        // TODO Auto-generated method stub

        sessionFactory.getCurrentSession().saveOrUpdate(comp);
    }

    @Override
    public Composant getComposantById(int compId) {
        // TODO Auto-generated method stub
        return (Composant) sessionFactory.
                  getCurrentSession().
                  get(Composant.class, compId);
    }

    @Override
    public Composant getComposant(String compname) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<Composant> getComposants() {
        // TODO Auto-generated method stub
        Criteria criteria = sessionFactory.
                  getCurrentSession().
                  createCriteria(Composant.class);
                return criteria.list();
    }

} 
```

我的豆类：

```
package com.ardia.beans;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;
import com.ardia.model.Composant;
import com.ardia.service.ComposantService;

@ManagedBean(name="userMB")
@SessionScoped
public class Composantbeam {

    @ManagedProperty(value="#{compService}")
    ComposantService service;

    private List<Composant> list;

    @PostConstruct
    public void init() {
        list=service.getComposants();
    }

    public List<Composant> getList() {
        return list;
    }

    public void setList(List<Composant> list) {
        this.list = list;
    }

    public ComposantService getService() {
        return service;
    }

    public void setService(ComposantService service) {
        this.service = service;
    }

} 
```

我的面孔-config.xml：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>
</faces-config> 
```

我的 web.xml：

```
<web-app id="WebApp_ID" version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>PFE</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/application.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <servlet>
    <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>/Test.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

弹簧配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

       <context:component-scan base-package="ardia.beans" />
       <context:component-scan base-package="com.ardia.service" />
       <!-- Data Source Declaration -->
       <bean id="DataSource" class="org.apache.commons.dbcp.BasicDataSource" >
           <property name="driverClassName" value="org.postgresql.Driver" />
           <property name="url" value="jdbc:postgresql:PFE" />
           <property name="username" value="postgres" />
           <property name="password" value="root" />
       </bean>
       <!-- Session Factory Declaration -->
       <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
           <property name="dataSource" ref="DataSource" />
           <property name="packagesToScan" value="com.ardia.model" />
           <property name="hibernateProperties">
               <props>
                   <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                   <prop key="hibernate.show_sql">true</prop>
               </props>
           </property>
       </bean>
      <tx:annotation-driven transaction-manager="transactionManager"/>
     <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager" >
         <property name="sessionFactory" ref="SessionFactory"/>
     </bean>
 </beans> 
```

我的 JSF 页面中的数据表工作并返回值列表。

但最终我得到以下错误：

```
avr. 21, 2013 12:41:43 PM org.apache.catalina.core.StandardContext listenerStart
Grave: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) com.sun.faces.config.ConfigureListener
java.lang.NoClassDefFoundError: Lcom/ardia/service/ComposantService;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredFields(Unknown Source)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.collectAnnotatedFields(ManagedBeanConfigHandler.java:242)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.getBeanInfo(ManagedBeanConfigHandler.java:151)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.process(ManagedBeanConfigHandler.java:137)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.push(ManagedBeanConfigHandler.java:123)
    at com.sun.faces.application.annotation.AnnotationManager.applyConfigAnntations(AnnotationManager.java:196)
    at com.sun.faces.config.processor.AbstractConfigProcessor.processAnnotations(AbstractConfigProcessor.java:328)
    at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:244)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:120)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ConverterConfigProcessor.process(ConverterConfigProcessor.java:126)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ComponentConfigProcessor.process(ComponentConfigProcessor.java:117)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:337)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:223)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:335)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.ardia.service.ComposantService
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    ... 34 more

avr. 21, 2013 12:41:43 PM org.apache.catalina.core.StandardContext startInternal
Grave: Error listenerStart
avr. 21, 2013 12:41:43 PM org.apache.catalina.core.StandardContext startInternal
Grave: Erreur de démarrage du contexte [/testefzefsdfsdfdfg] suite aux erreurs précédentes
avr. 21, 2013 12:41:43 PM org.apache.coyote.AbstractProtocol start
Infos: Starting ProtocolHandler ["http-bio-8585"]
avr. 21, 2013 12:41:43 PM org.apache.coyote.AbstractProtocol start
Infos: Starting ProtocolHandler ["ajp-bio-8010"]
avr. 21, 2013 12:41:43 PM org.apache.catalina.startup.Catalina start
Infos: Server startup in 15288 ms 
```

我没有一个名为`Lcom.ardia.service`但我有一个类`com.ardia.service`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T11:56:32.047

我从我的服务类中删除了注释。

通过 Spring 配置手动创建服务解决了我的问题。这是配置的相关部分：

```
<bean id="compService" class="com.ardia.service.ComposantImp">
    <property name="sessionFactory" ref="SessionFactory" />
</bean> 
```

事实证明，JSF 和 Hibernate 不支持注释......

# php - session_register 可以存储超过 1 个值吗？

> ID：16130506
> 
> 赞同：-4
> 
> 时间：2013-04-21T11:12:16.747
> 
> 标签：php

session_register 可以存储超过 1 个值吗？因为在我的查看产品页面中，我可能需要将 session_register 中的值输入到数据库中。

```
if(!isset($_SESSION['login_school']))
{
    header("location: ../enter-icas/");
} 
```

这是登录页面。

```
$_SESSION['login_school'] = $myschoolcode;
header("location: ../view-products/"); 
```

这是用户登录后的产品页面。

目前上面的代码是存储学校代码，我怎样才能让会话也存储我的学校名称？

```
$myschoolcode = ($_POST['schoolcode']);
$mypassword = ($_POST['password']);

$sql = "SELECT school_id FROM schools_info WHERE SchoolCode = '$myschoolcode' and Password 
= '$mypassword'";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);
$active = $row['active'];
$count = mysql_num_rows($result);

// If result matched $myschoolcode and $mypassword, table row must be 1 row
if($count == 1) {
session_register("myschoolcode");
$_SESSION['login_school'] = $myschoolcode;

header("location: ../view-products/");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:25:31.293

您可以将值分别存储在两个会话变量中，

```
$_SESSION['login_school_name'] = $login_school_value;
$_SESSION['login_school_code'] = $myschoolcode; 
```

如果你想在两个会话变量中使用相同的 login_school，你可以选择数组，

```
 $_SESSION['login_school'] = array();
  $_SESSION['login_school']['name'] = $login_school_value;
  $_SESSION['login_school']['code'] = $myschoolcode; 
```

# iphone - 自定义的无图像 UIButton 标题消失

> ID：16130515
> 
> 赞同：1
> 
> 时间：2013-04-21T11:13:03.017
> 
> 标签：iphone, ios, objective-c, xcode, uibutton

我在 XIB 中创建了一个没有图像的自定义 UIButton。单击按钮时，标题消失。

这些答案对我没有帮助，因为我没有任何可以与文本重叠的图像

*   [按下按钮后标题消失](https://stackoverflow.com/questions/10236092/after-push-a-button-its-title-disappears)
*   [iOS - 界面生成器：设置图像时 UIButton 标题消失](https://stackoverflow.com/questions/13918196/ios-interface-builder-uibutton-title-disappears-when-setting-image)
*   [具有自定义背景的 UIButton 失去标题](https://stackoverflow.com/questions/10597271/uibutton-with-custom-background-loses-title)

这也没有帮助，因为我没有任何背景颜色

*   [UIButton 标题消失](https://stackoverflow.com/questions/9312876/uibutton-title-disappears)

这个也没有帮助

*   [每次按下按钮都会更改标题](https://stackoverflow.com/questions/9975842/button-changes-title-every-time-pressed)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:31:14.190

UIButton 及其子类有 4 种状态，可以通过 IB 中的代码或阶段配置进行更改

1.  `normal`
2.  `highlighted`
3.  `selected`
4.  `disabled`

检查 UIKit 框架中的 UIButton.h ，您将了解如何使用它们：

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state; 
- (void)setTitleColor:(UIColor *)color forState:(UIControlState)state;
- (void)setImage:(UIImage *)image forState:(UIControlState)state;  
- (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state; 
```

如果为正常状态设置标题、图像或背景图像，则默认其他状态之一与正常状态相同。

默认状态为正常，可设置其他状态：

```
[button setHighlighted:YES];
[button setSelected:YES];
[button setEnable:NO];//disable state 
```

单击时按钮从正常变为突出显示，因此如果要保持正常标题，请检查：

> - 不要将 setImage 或配置图像用于正常和高亮状态（仅使用 backgroundImage）
> 
> - 不要 setTitle:@"" forState:UIControlStateHighlighted 或在 IB 中配置为空。- 不要在IB中设置TitleColor或选择与UIButton backgroundColor相同的titleColor。

您可以为 1 个按钮使用 4 个不同的标题和背景图像进行测试，并知道它如何显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T21:47:29.397

I have had this happen as well. What I believe the issue is, is since the button is default a white rounded button with the default "highlight" state of a button, and inverts the text color as the button is pressed, it does the same with a custom button. Now, since the text is a blue, and the background is white for a rounded button, it is quite the same in a custom button. The custom button's text will be whatever you want(set) it to be. The background is usually a transparent color as well, and since when the custom button is highlighted, it causes the text color to be inverted, just as a regular button does. This causes the textcolor to become transparent, and the background of the custom button just doesn't change because there is nothing to change to, hence the fact that the button is custom, (meaning you must set the highlight states and other attributes of the button). I have had this happen before, and I never really realized this before, but I hope this helps you out!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T11:05:56.603

```
// for setting text in normal state

[_myButton setTitle:@"myText" forState:UIControlStateNormal];

// show another text on touch

[_myButton setTitle:@"myText" forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T16:16:33.573

In an XIB, you can set the title for each of the different states by changing the `State Config` and then setting the title for the corresponding state. In the following example, I have set the `Default` state title to `Title` and the `Highlighted` state title to a single space, which makes it appear as blank in the app. Note however, that the preview only shows the `Default` settings, and does not update for the different configurations (see images below).

**Default State Title**
![Default Title](https://i.stack.imgur.com/l3kjK.png)

**Highlighted State Title**
![Highlighted Title](https://i.stack.imgur.com/2wHQr.png)

# jquery - 切换表行，但每个表行都受一个 id 影响

> ID：16130518
> 
> 赞同：0
> 
> 时间：2013-04-21T11:13:26.783
> 
> 标签：jquery

我现在正在切换表格行，但是只有第一个条目是可点击的，当点击它时，我所有表格中的每一行都被隐藏了..

我需要一些帮助来弄清楚如何制作它，以便在单击每个表格的文本时只影响表格行。不是循环中的每个表。

这就是我的代码的样子

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/Catalogue">
     <html>
     <header>
        <script type ="text/javascript" src="jquery.js" ></script>
        <script>
            $(function() {
            $('#toggle').click(function() {
            $('td:nth-last-child(-n + 1):nth-child(3n + 1)').toggle();                
       });
    });
    </script>

    </header>
     <body>
        <xsl:for-each select="Talents">
        <xsl:if test="Talent != ''">
            <table border="0" width="550">
                <tr>
                    <td bgcolor="#A0A0A0" width="80%">

                    <b id="toggle"><xsl:value-of select="Talent"/></b></td>

                    <td bgcolor="#A0A0A0" width="20%" align="center"><xsl:value-of select="Cost"/>
                    <xsl:text>  -  </xsl:text>
                    <xsl:value-of select="Type"/></td>
                 </tr>

                <xsl:if test="Prerequisite != ''">
                <tr>
                    <td colspan="2" bgcolor="#C0C0C0"><xsl:value-of select="Prerequisite"/></td>
                    </tr>
                </xsl:if>   

                <xsl:if test="Action != ''">
                <tr id="rowToClick" style="display:none">
                    <td colspan="2" bgcolor="#E0E0E0"><xsl:value-of select="Action"/></td>
                    </tr>
                </xsl:if>

                <xsl:if test="Description != ''">
                <tr>
                    <td colspan="2" bgcolor="#EBEBEB"><xsl:value-of select="Description"/></td>
                    </tr>
                </xsl:if>

            </table>
        </xsl:if>
     </xsl:for-each>
     </body>
     </html>
    </xsl:template>
    </xsl:stylesheet> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:17:23.150

使用以下功能：

```
$(function() {
        $('table tr b').click(function() {
            $(this).parent().parent().toggle();                
   });
}); 
```

注意：这将为行内的每个 b-tag 添加一个处理程序。单击该标签后，父行将被切换。

但是，我不明白您为什么希望它切换。由于第一次隐藏，您无法再次切换它（它已隐藏，因此无法再点击）

**EDIT** OP 希望表的第一行切换其余行：

```
$(function() {
            $('table tr').not(":first-child").hide();  // hides the other rows on page load
            $('table tr:first-child').click(function() {
                $(this).siblings().toggle();                
       });
    }); 
```

反映在这个小提琴中：http: [//jsfiddle.net/Kennethtruyers/g52xk/6/](http://jsfiddle.net/Kennethtruyers/g52xk/6/)

# sql-server-2008 - SQL Server 全文搜索与回退的完全匹配

> ID：16130526
> 
> 赞同：12
> 
> 时间：2013-04-21T11:13:53.087
> 
> 标签：sql-server-2008, full-text-search, contains, exact-match

首先，似乎没有办法使用全文搜索获得完全匹配。在使用全文搜索方法时，这似乎是一个被高度讨论的问题，并且有许多不同的解决方案可以达到预期的结果，但大多数似乎效率很低。由于我的数据库量很大，我被迫使用全文搜索，因此我最近不得不实施其中一种解决方案以获得更准确的结果。

由于它的工作原理，我无法使用全文搜索的排名结果。例如，如果您搜索一部名为的电影`Toy Story`，并且还有一部名为的电影`The Story Behind Toy Story`，它会出现而不是完全匹配，因为它`Story`两次找到了单词 and `Toy`。

每次用户访问记录时，我都会跟踪我自己的排名，我称之为“人气”，这个数字会上升。我使用这个数据点来衡量我的结果，以帮助确定用户可能在寻找什么。

我也有有时需要回退到 LIKE 搜索而不返回完全匹配的问题。即搜索`Goonies`应该返回`The Goonies`（最流行的结果）

因此，这是我当前用于实现此目的的存储过程的示例：

```
DECLARE @Title varchar(255)
SET @Title = '"Toy Story"'
--need to remove quotes from parameter for LIKE search
DECLARE @Title2 varchar(255)
SET @Title2 = REPLACE(@title, '"', '')

--get top 100 results using full-text search and sort them by popularity
SELECT TOP(100) id, title, popularity As Weight into #TempTable FROM movies WHERE CONTAINS(title, @Title) ORDER BY [Weight] DESC

--check if exact match can be found
IF EXISTS(select * from #TempTable where Title = @title2)
--return exact match
SELECT TOP(1) * from #TempTable where Title = @title2
ELSE
--no exact match found, try using like with wildcards
SELECT TOP(1) * from #TempTable where Title like '%' + @title2 + '%'
DROP TABLE #TEMPTABLE 
```

这个存储过程每分钟执行大约 5,000 次，而且很疯狂，它并没有让我的服务器瘫痪。但我真的很想知道是否有更有效的方法来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-17T19:12:28.210

您应该使用全文搜索`CONTAINSTABLE`来查找前 100 个（可能是 200 个）候选结果，然后使用您自己的标准对找到的结果进行排序。

听起来你想`ORDER BY`

1.  短语 ( `=`)的完全匹配
2.  完全匹配的短语 ( `LIKE`)
3.  `Popularity`列的更高值
4.  `Rank`从_`CONTAINSTABLE`

但是你可以玩弄你喜欢的确切顺序。

在 SQL 中看起来像：

```
DECLARE @title varchar(255)
SET @title = '"Toy Story"'
--need to remove quotes from parameter for LIKE search
DECLARE @title2 varchar(255)
SET @title2 = REPLACE(@title, '"', '')

SELECT
    m.ID,
    m.title,
    m.Popularity,
    k.Rank
FROM Movies m
INNER JOIN CONTAINSTABLE(Movies, title, @title, 100) as [k]
    ON m.ID = k.[Key]
ORDER BY 
  CASE WHEN m.title = @title2 THEN 0 ELSE 1 END,
  CASE WHEN m.title LIKE @title2 THEN 0 ELSE 1 END,
  m.popularity desc,
  k.rank 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!6/b962a/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T01:21:27.703

这将为您提供包含确切短语“玩具总动员”的电影，按其受欢迎程度排序。

```
SELECT
    m.[ID],
    m.[Popularity],
    k.[Rank]
FROM [dbo].[Movies] m
INNER JOIN CONTAINSTABLE([dbo].[Movies], [Title], N'"Toy Story"') as [k]
    ON m.[ID] = k.[Key]
ORDER BY m.[Popularity] 
```

请注意，如果您搜索“The Goonies”，上述内容也会为您提供“The Goonies Return”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T07:47:23.693

如果感觉你并不真正喜欢全文搜索的模糊部分，但你确实喜欢性能部分。

也许这是一条路径：如果您坚持在加权匹配之前获得精确匹配，您可以尝试对值进行哈希处理。例如“玩具总动员”-> 转换为小写字母-> 玩具总动员-> 散列成 4de2gs5sa（使用您喜欢的任何散列）并对散列执行搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T18:46:55.250

在 Oracle 中，我将 UTL_MATCH 用于类似目的。( [http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_match.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_match.htm) )

例如，即使使用 Jaro Winkler 算法比较表 1 和表 2 中的标题列可能需要一段时间，但如果将这两个表部分连接起来，则可以提高性能。在某些情况下，我使用 Jaro Winkler 将表 1 上的人名与表 2 进行了比较，但结果有限，不仅超出了某个 Jaro Winkler 阈值，而且还限于首字母相同的 2 个表之间的名称。例如，我会使用 Jaro Winkler 将 Albert 与 Aden、Alfonzo 和 Alberto 进行比较，而不是 Albert 和 Frank（限制需要使用该算法的情况的数量）。

Jaro Winkler 实际上也可能适用于电影标题。尽管您使用的是 SQL 服务器（不能使用 utl_match 包），但看起来有一个名为“SimMetrics”的免费库，其中包含 Jaro Winkler 算法以及其他字符串比较指标。您可以在此处找到详细信息和说明：http: [//anastasiosyal.com/POST/2009/01/11/18.ASPX?#simmetrics](http://anastasiosyal.com/POST/2009/01/11/18.ASPX?#simmetrics)

# webgl - 如何在 WebGl 中使用立方体纹理

> ID：16130534
> 
> 赞同：1
> 
> 时间：2013-04-21T11:14:53.723
> 
> 标签：webgl

最近，我一直在从单个环境纹理中解压缩 6 张图像以渲染反射通道。

[源图片](https://dl.dropboxusercontent.com/u/58528830/skybox_texture.jpg)

事实证明，在 webGl 中很难在这种工作中使用 texImage2D，因为 texImage2D 不提供 xoffset，也不提供 yoffset。授予 copyTexImage2D 和 texSubImage2D 确实提供了偏移参数，但是，通过使用这两个函数从未为我运行

最后，我通过将图像渲染到画布然后将画布传递给 texImage2D 找到了解决方案。 [渲染结果](https://dl.dropboxusercontent.com/u/58528830/Screen%20Shot%202013-04-21%20at%20%E4%B8%8B%E5%8D%886.34.12.png)

但是我在屏幕上出现了恼人的纹理接缝。这是怎么发生的，我该如何解决？多谢你们。

```
 var texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

        var myCanvas = document.createElement("canvas");
        myCanvas.width = 512; 
        myCanvas.height = 512;
        var myCanvasContext = myCanvas.getContext("2d"); // Get canvas 2d context

        myCanvasContext.drawImage(_this._data.image, 1024, 512, 512,512,0,0,512,512);         
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas);

        myCanvasContext.drawImage(_this._data.image, 0, 512, 512,512,0,0,512,512); 
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas);

        myCanvasContext.drawImage(_this._data.image, 512, 1024, 512,512,0,0,512,512); 
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas);

        myCanvasContext.drawImage(_this._data.image, 512,0, 512,512, 0,0,512,512); 
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas);

        myCanvasContext.drawImage(_this._data.image, 512, 512,512,512,0,0,512,512); 
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas);

        myCanvasContext.drawImage(_this._data.image, 1536, 512,512,512,0,0,512,512); 
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);
        gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, myCanvas); 
```

_this._data.image 是环境图像；每个纹理块为 512X512。

# graphics - 查看不符合预期的截锥角

> ID：16130537
> 
> 赞同：1
> 
> 时间：2013-04-21T11:15:39.190
> 
> 标签：graphics, geometry, vertex-shader

我正在尝试编写一种方法来计算我正在处理的相机类的视锥角。我*知道*MVP 矩阵是正确的，因为它被推到了我的顶点着色器中，而且屏幕上的一切确实都是正确的，不仅如此，我还从这个矩阵计算了世界空间平截头体平面，它们是正确的。此外，这些方法在几个不同的相机配置中进行了单元测试，并给出了预期的结果。

我试图通过将 NDC 角转换为 MVP 矩阵的倒数来计算截锥角。

```
//  Fill with the corners in clip space.
QVector< Vector3f > corners( 8 );
corners[0] <<  1.0f,  1.0f,  1.0f;
corners[1] << -1.0f,  1.0f,  1.0f;
corners[2] <<  1.0f, -1.0f,  1.0f;
corners[3] << -1.0f, -1.0f,  1.0f;
corners[4] <<  1.0f,  1.0f, -1.0f;
corners[5] << -1.0f,  1.0f, -1.0f;
corners[6] <<  1.0f, -1.0f, -1.0f;
corners[7] << -1.0f, -1.0f, -1.0f;

//  Then transform back into worldspace.
for ( Vector3f& c : corners ) {
    c = mult( mvp.inverse(), c );
} 
```

看起来很受人尊敬，但如果我输入我的 MVP（列专业）：

```
-1.68199   0.0       1.68199   0.0
-0.720796  3.00332  -0.720796  0.0
-0.671735 -0.322433 -0.671735  35.8534
-0.669589 -0.321403 -0.669589  37.3363 
```

这是一个摄像机，近剪辑为 0.8，远剪辑为 500.0，FOV 为 35.0°，视口大小为 800x600，定位在 [25.0, 12.0, 25.0] 处，看着原点（`y`上轴）。我得到这些角落：

```
-0.988515,  0.00116634, -0.393982
-0.393982,  0.00116634, -0.988515
-0.845201, -0.595974,   -0.250669
-0.250669, -0.595974,   -0.845201

30.2115, 14.9772, 30.8061
30.8061, 14.9772, 30.2115
30.3548, 14.38,   30.9494
30.9494, 14.38,   30.3548 
```

不要盯着数字看太久（你会发疯的），只需注意彼此之间没有数百个单位的角，这是你对 500.0 的远平面所期望的。我对这个程序有什么不明白的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:59:59.220

没有看你的数字那么重，我只是做出一个疯狂的猜测：

我希望您不要忘记在将转换后的角扩展到 4D 齐次坐标（通过添加 a `1`）并将它们乘以逆 MVP 之后，将它们除以它们的第 4 个分量。

这是必要的，因为 MVP 矩阵（实际上是投影部分）及其逆矩阵不是仿射变换，因此`w`除了`1`应用于同质向量时会导致 - 值。当您（或实际上是您的着色器）在转换向量时应用通常的前向 MVP 乘法时，这也是一样的，只是固定功能图形硬件会`w`为您进行除法（所谓的透视除法，因为这实际上是导致更远的对象的原因在屏幕上变小）。

# iis - 无法连接到命名的共享 LocalDB 实例

> ID：16130540
> 
> 赞同：2
> 
> 时间：2013-04-21T11:15:45.713
> 
> 标签：iis, localdb

我花了几个小时没有成功。任何帮助：

我创建 LocalDB 实例

```
sqllocaldb create test 
```

我启动那个实例

```
sqllocaldb start test 
```

我与拥有原始实例的同一用户帐户共享该实例

```
sqllocaldb share "domain\user" test testShared 
```

两个实例都处于“运行”状态。

我启动 MS SQL 管理工作室并尝试连接到实例。结果：

我可以使用命名管道连接到这两个实例 - 好的。

我能够连接到 (localdb)\test - 好的。

我无法连接到 (localdb)\.\testShared - 不行。

错误信息：

`A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) (Microsoft SQL Server, Error: 2)`

有任何想法吗？我在 4 台不同的计算机上尝试过。它在其中两个上正常工作。3台计算机连接到域（因此它可能与域环境无关）。

在 SQL 配置管理器中 - 启用所有协议。

我需要实现的 - 根据[此](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance-ownership.aspx#SharedLocalDB)与 IIS APPPOOL\ASP.NET v4.0 帐户共享 LocalDB 实例。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T20:18:33.167

根据您所描述的确切步骤，您需要做的就是重新启动您的实例。共享后需要它，以便它使用共享过程分配给它的众所周知的名称侦听公共管道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-07T06:34:17.517

> 您需要启用 setProfileEnvironment。这需要编辑 applicationHost.config 文件，该文件通常位于 C:\Windows\System32\inetsrv\config。按照 KB 2547655 中的说明，我们应该为应用程序池 ASP.NET v4.0 启用这两个标志，如下所示：

[http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)

```
 <applicationPools>
<add name="DefaultAppPool">
        <processModel identityType="ApplicationPoolIdentity" loadUserProfile="true" setProfileEnvironment="true" />
 </add>
        <add name="ASP.NET v4.0" autoStart="true" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated">
        <processModel identityType="ApplicationPoolIdentity" loadUserProfile="true" setProfileEnvironment="true" />
        </add> 
```

# android - Android SSL 无对等证书

> ID：16130542
> 
> 赞同：3
> 
> 时间：2013-04-21T11:16:49.183
> 
> 标签：android, ssl, certificate

我有一个例外：没有对等证书

当我问谷歌时，我得到了解决方案，我信任所有证书。但是这个问题的答案是，它是不安全的。

所以我打电话给班级：

```
HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;
           HttpClient client = new DefaultHttpClient();

           SchemeRegistry registry = new SchemeRegistry();
           SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
           socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
           registry.register(new Scheme("https", socketFactory, 443));
           SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
           DefaultHttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());

           HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);
           Log.v("URL:", Url[0]);
           HttpPost post = new HttpPost(Url[0]);  
           post.addHeader("Username", Url[1]);
           post.addHeader("Passwort", Url[2]);
           HttpResponse getResponse = httpClient.execute(post); //Wirft Exception
           HttpEntity responseEntity = getResponse.getEntity();
           UserID = Integer.parseInt(responseEntity.getContent().toString()); 
```

这是我的课：

```
class MyHttpClient extends DefaultHttpClient {

final Context context;

public MyHttpClient(Context context) {
    this.context = context;
}

@Override
protected ClientConnectionManager createClientConnectionManager() {
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    // Register for port 443 our SSLSocketFactory with our keystore
    // to the ConnectionManager
    registry.register(new Scheme("https", (SocketFactory) newSslSocketFactory(), 443));
    return new SingleClientConnManager(getParams(), registry);
}

private SSLSocketFactory newSslSocketFactory() {
    try {
        // Get an instance of the Bouncy Castle KeyStore format
        KeyStore trusted = KeyStore.getInstance("BKS");
        // Get the raw resource, which contains the keystore with
        // your trusted certificates (root and any intermediate certs)
        InputStream in = context.getResources().openRawResource(R.raw.mykey);
        try {
            // Initialize the keystore with the provided trusted certificates
            // Also provide the password of the keystore
            trusted.load(in, "PASSWORT".toCharArray());
        } finally {
            in.close();
        }
        // Pass the keystore to the SSLSocketFactory. The factory is responsible
        // for the verification of the server certificate.
        SSLSocketFactory sf = new SSLSocketFactory(trusted);
        // Hostname verification from certificate
        // [url=http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e506]Chapter2.Connection management[/url]
        sf.setHostnameVerifier(SSLSocketFactory.STRICT_HOSTNAME_VERIFIER);
        return sf;
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T12:33:15.537

我发现 SSLPeerUnverifiedException 的另一个可能原因：没有对等证书

如果您的模拟器运行的日期早于创建证书的日期，您可能会遇到此异常。

我的证书是在 7 月 10 日验证的，但模拟器的当前日期是 5 月 7 日。

我不知道为什么我的模拟器将日期设置为 5 月 7 日，因为它应该从网络获取时间，但这是另一个问题。

只是想我应该分享一下，以防它帮助其他人避免浪费几天的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T20:39:29.740

盲目地信任所有证书听起来是一个非常糟糕的主意。你真的应该试着找出这个问题的原因。我在运行 2.3.3 的较旧 Android 设备上遇到了同样的错误（较新的 Android 版本运行没有任何问题，iOS 设备也是如此）：

```
javax.net.ssl.SSLPeerUnverifiedException: No peer certificate 
```

在阅读了关于 SO 的几个不同的相关问题后，我得出的结论是，这可能有两个（也许更多？）原因：

*   中间证书安装不当（使用[https://www.digicert.com/help/index.htm](https://www.digicert.com/help/index.htm)验证证书）
*   证书链的顺序不正确

就我而言，这是不正确的证书顺序。作为一个例子，我发布了来自[这个问题的证书订单以及来自用户](https://stackoverflow.com/questions/4115101/apache-httpclient-on-android-producing-certpathvalidatorexception-issuername)[bdc](https://stackoverflow.com/users/409964/bdc)的有见地的回答。您可以通过从终端执行以下操作来获取证书排序：

```
openssl s_client -connect eu.battle.net:443 
```

（显然用您自己的服务器替换 eu.battle.net）。以 eu.battle.net 为例，当时的顺序是：

```
Certificate chain
 0 s:/C=US/ST=California/L=Irvine/O=Blizzard Entertainment, Inc./CN=*.battle.net
   i:/C=US/O=Thawte, Inc./CN=Thawte SSL CA
 1 s:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) 2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA
   i:/C=ZA/ST=Western Cape/L=Cape Town/O=Thawte Consulting cc/OU=Certification Services Division/CN=Thawte Premium Server CA/emailAddress=premium-server@thawte.com
 2 s:/C=US/O=Thawte, Inc./CN=Thawte SSL CA
   i:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) 2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA 
```

虽然它应该是：

```
Certificate chain
 0 s:/C=US/ST=California/L=Irvine/O=Blizzard Entertainment, Inc./CN=*.battle.net
   i:/C=US/O=Thawte, Inc./CN=Thawte SSL CA
 1 s:/C=US/O=Thawte, Inc./CN=Thawte SSL CA
   i:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) 2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA
 2 s:/C=US/O=thawte, Inc./OU=Certification Services Division/OU=(c) 2006 thawte, Inc. - For authorized use only/CN=thawte Primary Root CA
   i:/C=ZA/ST=Western Cape/L=Cape Town/O=Thawte Consulting cc/OU=Certification Services Division/CN=Thawte Premium Server CA/emailAddress=premium-server@thawte.com 
```

规则是链中证书“n”的颁发者应该匹配证书“n+1”的主题。

一旦我发现问题，更改服务器上的证书顺序是微不足道的，事情立即开始在 Android 2.3.3 设备上运行。我想旧的 Android 版本对证书顺序有点讨厌是件好事，但这也是一场噩梦，因为较新的 Android 版本会自动重新排序证书。地狱，即使是旧的 iPhone 3GS 也无法正常使用证书。

# javascript - Web应用程序的UI系统？

> ID：16130547
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:17:41.370
> 
> 标签：javascript, html

我正在为我正在开发的新 Web 应用程序寻找一个可靠的 UI 系统。我所说的 UI 系统是指按钮、滑块、警报框……整体上的组件。

我已经检查了引导程序，但我不确定它是否是我正在寻找的（我不需要网格系统）。

我不确定我正在寻找的是否只是“剥皮”，因为它需要具有功能；但是“剥皮”作为补充可能会很好（例如 Bootstrap 的 FlatUI [http://designmodo.github.io/Flat-UI/](http://designmodo.github.io/Flat-UI/)）

我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:21:58.833

有几种选择：

*   [jQuery 用户界面](http://jqueryui.com/)
*   [小唯](http://yuilibrary.com/)
*   [忍者](http://ninjaui.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:20:24.827

使用[剑道用户界面](http://www.kendoui.com/)

用于现代 Web 和移动应用程序开发的综合 HTML5/JavaScript 框架

Kendo UI 是专业开发人员构建 HTML5 网站和移动应用程序所需的一切。今天，普通 HTML/jQuery 开发人员的生产力受到组装不同 JavaScript 库和插件的 Frankenstein 框架的阻碍。

Kendo UI 拥有一切：丰富的基于 jQuery 的小部件、简单且一致的编程界面、坚如磐石的数据源、验证、国际化、MVVM 框架、主题、模板等等。

WEB DEMOS 在[这里](http://demos.kendoui.com/web/overview/index.html)

Stackoverflow 问题是关于 Kendo UI[的](https://stackoverflow.com/questions/tagged/kendo-ui)

# python - 如何推迟龙卷风中python任务的执行？

> ID：16130549
> 
> 赞同：-2
> 
> 时间：2013-04-21T11:17:55.820
> 
> 标签：python, mongodb, tornado

我有一个在 tornado 上运行的互联网站点，具有视频功能（转换、剪切、合并）。

视频特征很长，所以我想把它移到另一个 python 进程中，并保持龙卷风进程尽可能轻。

我将 mongo db 用于 commun db 功能，同步使用，因为 db 将保持轻便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:11:27.857

使用 Celery 推迟任务

视频.py：

```
@task
def convert(video):
  ... 
```

龙卷风服务器.py

```
import video
...
def get(self):
    paramvideo=...
    convert.delay(paramvideo)
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:23:40.760

使用 mongo 推迟任务

视频.py：

```
def convert():
    ...
db = Connection().my_db
cursor = db.tasks.find(tailable=True)
while cursor.alive:
    try:
        next = cursor.next()
        if next.t=='convert':
           convert(next.d)
    except StopIteration:
        time.sleep(1) 
```

龙卷风服务器.py

```
...
def get(self):
    ...
    paramvideo=...
    conn.tasks.insert({t:'convert',d:paramvideo}) 
```

# android - 找不到符号@android:style/Theme.Holo.Light.NoActionBar

> ID：16130550
> 
> 赞同：3
> 
> 时间：2013-04-21T11:18:23.623
> 
> 标签：android, intellij-idea

我已经定义了一个主题`values/themes.xml`：

```
<resources>
    <style name="MyTheme" parent="@android:style/Theme.Holo.Light.NoActionBar">
    </style>
</resources> 
```

在我的`AndroidManifest.xml`我有：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

代码已编译，我看到了正确的结果，但 IDE 告诉我它无法解析 symbol `@android:style/Theme.Holo.Light.NoActionBar`。请告知原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:56:55.077

我有同样的问题，尝试将android编译库更改为3.2 Android版本。它会让你使用这个主题，并且应该与以前的版本兼容。请谨慎使用您使用的 API。尽管如此，您仍可以将 minSdkVersion 设置为 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:22:10.417

你`minSdkVersion`的 Holo 主题太低了。Holo 主题仅适用于 SDK 11 (Honeycomb) 及更高版本。您可能想查看[ActionBarSherlock](http://actionbarsherlock.com)。由于看起来您没有使用操作栏，因此您还可以将单独`themes.xml`的文件放在`values`and中`values-v11`。

# c# - 将文件名存储在字符串数组中

> ID：16130552
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:18:34.363
> 
> 标签：c#, file, nullreferenceexception

我编写了以下代码将文件名存储在字符串数组中：

```
string[] fileStore;
private void button1_Click(object sender, EventArgs e)
{
    DirectoryInfo dir1 = new DirectoryInfo(@"D:\data\");
    FileInfo[] files = dir1.GetFiles("*.txt", SearchOption.AllDirectories);

    foreach (FileInfo f in files)
    {
        int a = 0;
        string ss;
        ss = f.Name;

        try
        {
            fileStore[a] = ss.ToString();
            a++;
        }
        catch (Exception ex)
        {
           MessageBox.Show(ex.Message);
        }
    }
} 
```

但是这段代码给出了以下异常：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:21:16.280

`filestore`一片空白。你可以用 初始化它`filestore = new string[files.Length]`。

就我个人而言，我会将您的整个`foreach`循环替换为`filestore = files.Select(f => f.Name).ToArray()`.

你`try...catch`的也是胡说八道。`try`除非您的程序有错误，否则零件中不应出现异常。如果你想要一个`try...catch`它应该围绕文件枚举，它应该只捕获一些与 IO 相关的异常，而不是`System.Exception`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:25:09.167

声明数组时`string[]`，您必须在分配数据之前知道确切的大小：

```
fileStore = filestore = new string[files.Length]; 
```

但也许你可以替换`string[]`为[`System.Collections.Generic.List<string>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)不需要你提前知道数组大小的：

```
List<string> fileStore = null;

// In function:
if( fileStore == null){
    fileStore = new List<string>();
} else {
    fileStore.Clear(); // Optionally remove elements collected so far
}

foreach (FileInfo f in files) {
     fileStore.add( f.Name.ToString());
}

// And you always can export list to array:
string filesStoreArray[] = fileStore.ToArray(); 
```

# java - Java 连接到 MySQL 的站点数据库

> ID：16130559
> 
> 赞同：0
> 
> 时间：2013-04-21T11:19:43.910
> 
> 标签：java, mysql, database, connection

我有一个带有 MySql 数据库的站点，我想通过 Java 程序检索信息。问题是我不确定该怎么做。我尝试了一些方法，但没有一个有效。长话短说，我需要以下帮助：

*   查找服务器的IP
*   通过IP连接数据库
*   使用详细信息创建新连接

我尝试了以下方法： DriverManager.getConnection("jdbc:mysql://DOMAIN:3306/DB_NAME", "USER", "PASSWORD"); 但不起作用。

在此先感谢，如果问题很愚蠢，我深表歉意，但我没有使用 DB 的 Java 经验，而且我不明白如何在这两个实体之间建立联系。

编辑

类如下

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
public class test {

/**
 * @param args
 */
public static void main(String[] args) {

        try {

            Class.forName("com.mysql.jdbc.Driver");
            Connection connection = DriverManager.getConnection("jdbc:mysql://IP:3306/DB","USER", "PASS");
            Statement statement = connection.createStatement();
            ResultSet resultSet = statement             .executeQuery("SELECT * FROM `categorii`");
            System.out.println( resultSet.getNString(3));
            } 
        catch (Exception M)
            {
            System.out.println(M.getMessage());
            }
} 
```

}

抛出一个异常，上面写着：'通信链路故障最后一个成功发送到服务器的数据包是 0 毫秒前。驱动程序没有收到来自服务器的任何数据包。

所以它无法连接到服务器，但我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:22:14.577

我一直有使用这个的问题：

```
 DriverManager.getConnection("jdbc:mysql://DOMAIN:3306/DB_NAME", "USER", "PASSWORD"); 
```

试试这个

```
 DriverManager.getConnection("jdbc:mysql://DOMAIN:3306/DB_NAME?user=USER&password=PASSWORD"); 
```

# android - MainActivity.java 中的 alertDialog.setButton 淹没了一行

> ID：16130563
> 
> 赞同：0
> 
> 时间：2013-04-21T11:19:50.573
> 
> 标签：android

我正在做警报对话框演示。它工作正常，但我在 MainActivity.java 文件中的“setButton”上找到了一行。听到是我的代码：

```
@SuppressWarnings("deprecation")
public void onClick(View arg0) {
            // Creating alert Dialog with one Button

            AlertDialog alertDialog = new AlertDialog.Builder(
                    MainActivity.this).create();

            // Setting Dialog Title
            alertDialog.setTitle("Alert Dialog");

            // Setting Dialog Message
            alertDialog.setMessage("Welcome to AndroidHive.info");

            // Setting Icon to Dialog

            // I got line hear........ over setButtob .........
            alertDialog.setButton("OK",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            // Write your code here to execute after dialog
                            // closed
                            Toast.makeText(getApplicationContext(),
                                    "You clicked on OK", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    });

            // Showing Alert Message
            alertDialog.show();![enter image description here][1]

        }
    });` 
```

你可以看到[这里](http://i.stack.imgur.com/ykdak.png)的图片，更明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:51:20.230

您的意思是您收到警告说该方法已弃用？

那是因为 setButton 不再使用，它​​已被弃用，相反你应该做这样的事情：

```
alertDialog.setPositiveButton("OK",new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int id) {
    // blablabla
}
}); 
```

另请注意，您也可以获得类似字符串“OK”的东西：android.R.string.ok，这是推荐的方式；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:50:03.153

我浏览了[网址](http://i.stack.imgur.com/ykdak.png)图片，这使您的问题很清楚。这是因为该方法（setButton）已折旧。您正在使用

```
@SuppressWarnings("deprecation") 
```

在顶部。这可以防止发出警告消息并且您无法阅读警告消息（可能是：此方法已被贬值）。如果您删除顶线，那么它会告诉您为什么它在 setButton 上显示交叉线。见[这里](http://developer.android.com/reference/android/app/AlertDialog.html#setButton%28java.lang.CharSequence,%20android.os.Message%29)。它说这种方法在 API 级别 3 中已被贬低。

要了解如何正确使用它，您可以浏览使用[Alert Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)的官方文档页面。您还可以在[此处](http://www.java-samples.com/showtutorial.php?tutorialid=1513)查看教程。

# java - 结合不同arff文件的属性

> ID：16130569
> 
> 赞同：0
> 
> 时间：2013-04-21T11:20:45.927
> 
> 标签：java, merge, weka, arff

我正在与 Weka 合作一个项目，我有两个不同的**arff**文件，如下所示：

**文件 1**：

```
@attribute class {yes, no}    
@attribute a numeric    
@data    
{0 yes, 1 2}    
{0 yes} 
```

**文件2**：

```
@attribute class {yes, no}    
@attribute b numeric    
@attribute a numeric    
@data    
{0 yes, 1 2}    
{0 no, 1 1, 2 1} 
```

有没有办法通过组合这两个 arff 文件来创建一个新文件，如下所示？

***文件3：***

```
@attriute class{yes, no}    
@attribute a numeric    
@attribute b numeric    
@data
{0 yes, 1 2} ("copied" from file 1)    
{0 yes} ("copied" from file 1)    
{0 yes, **2** 2} ("copied" from file 2)    
{0 no, **2** 1, **1** 1} ("copied" from file 2) 
```

合并并且不起作用，因为我在每个文件上都有不同的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:26:05.597

此类提供用于组合不同数据集[的](http://bioweka.sourceforge.net/docs/api/bioweka/filters/universal/MergeSets.html)API。唯一的要求是 .arff 文件必须具有不同的关系名称。

# c - 创建一个以 null 结尾的字符串数组，其中大多数字符串数组是静态的

> ID：16130570
> 
> 赞同：3
> 
> 时间：2013-04-21T11:20:51.560
> 
> 标签：c, multidimensional-array, null-terminated

我正在尝试创建一个以 null 结尾的字符串数组。数组中的所有内容在编译时都是已知的，除了在运行时放入其中的一个元素。

这就是我希望数组的外观： `[ ["command1", "arg", "arg", 0], ["command2", 0], argv, ["command3", "arg", 0] ]`

所以这里的 command1、command2 和它们的 args 在编译时是已知的，只有 argv 在运行时被放入其中。

问题是我无法完成这项工作。目前我这样做是为了创建一个带有 NUM_COMMANDS（数字）命令的数组：

```
char *commands[ NUM_COMMANDS ][] = {
    {"command1", "arg", 0}, 
    {0}, /*This is where I want to place argv*/
    {"command2", "arg", 0}
    }; 
```

但它不允许我插入 argv。

我怎样才能把它变成我想要的那种数组？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:44:43.137

在阅读了 roliu 发布的问题的链接后，我设法自己解决了这个问题。

```
char **commands[ NUM_COMMANDS ];
char *command1[] = {"command1", 0};
char *command2[] = {"command2", "arg", 0};

argv[0] = "grep";

commands[0] = (char **) command1;
commands[1] = (char **) argv;
commands[2] = (char **) command2; 
```

感谢您对原始问题的评论！

# c - 我可以使用递归来处理 GPIO 吗？

> ID：16130571
> 
> 赞同：1
> 
> 时间：2013-04-21T11:20:58.373
> 
> 标签：c, embedded, stm32, gpio

我是使用基于 ARM Cortex M3 的 STM32f100RB 的新手。我试图使用递归来处理 GPIO 输入，但它不起作用。谁能告诉我为什么？代码如下。当GPIOa Pin 0为1时，它应该设置GPIOc Pin 9。但是它不起作用..

我不确定我是否可以发布这样的问题。如果不合适，请告诉我。谢谢。

```
 void detect_input(void);

    void main()
    {
        init_ports();
        detect_input();
        while(1)
        {
            GPIO_WriteBit(GPIOC, GPIO_Pin_9, Bit_SET);//turn on the green led
        }
    }

    void detect_input()
    {
        if(!GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0))
        {
        detect_input();
        }
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T11:28:31.403

使用您的代码，您可能会得到一个**stackoverflow**。

如我所见，在您的代码中，如果没有输入，那么您将调用该函数`detect_input()`，并且没有其他停止条件。因此，根据使用的频率和堆栈大小，您将使用所有允许的堆栈内存。

因此，这通常不是一个好主意。

对于这种简单的情况，您应该使用简单的 while 循环：

```
void detect_input() {
    while(!GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0));
} 
```

在这种情况下，您将在收到输入的那一刻退出循环。

# php - PHP 脚本忽略 max_execution_time 并在第 600 秒处停止

> ID：16130575
> 
> 赞同：2
> 
> 时间：2013-04-21T11:21:15.377
> 
> 标签：php, shared-hosting, time-limiting

脚本在共享主机上运行并遵循根 php.ini 文件。它使用 PHP 5.4，所以没有 safe_mode，也没有使用 .htaccess 文件。我问支持他们是否有任何限制，她说超时是他们这边的两个小时。在 localhost 上，它不会停止，但会忽略我的限制。

此示例在 601-606 秒（~10 分钟）而不是 1000 秒后停止：

```
// For immidiately printing in browser
header('Content-Type:text/html; charset=UTF-8');

$limit = 1000;

set_time_limit($limit);
ini_set('max_execution_time', $limit);
ini_set('max_input_time', $limit);
ini_set('memory_limit', $limit . 'M');
ini_set('max_input_time', $limit);
ini_set('post_max_size', $limit);
ini_set('file_uploads', $limit);
ini_set('upload_max_filesize', $limit);

$start = microtime(1);

// Every second prints elapsed seconds
for ($i=0; $i<1000; $i++){
    echo str_pad(round(microtime(1)-$start), 4096);
    flush();
    sleep(1);
} 
```

1.  最重要的问题是它为什么停止？我不需要 2 小时，但 20-30 分钟会很好。
2.  为什么它忽略了我的限制？我可以将 $limit 更改为 '1' 但它不会改变任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:10:10.867

首先关于**超时**：

> [set_time_limit()](http://php.net/manual/en/function.set-time-limit.php)和[max_execution_time](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)不计算 sleep()、system()、file_get_contents() 和 DB 调用。这就是为什么我认为脚本忽略了我的限制。

我再次与支持人员交谈，结果发现停止脚本的不是 Apache 超时，而是监视脚本并在 10 分钟后为共享 IP 客户停止它的“某些东西”。我向他询问了完整的限制清单：

```
类型 | 专用 | 共享
------------+-----------+------------
阿帕奇/网络 | 12 小时 | 10分钟
SSH/外壳 | 2 小时 | 1小时
计划工作 | 1 小时 | 30分钟
守护进程 | 无限 | 10分钟

```

这就是为什么它从 cron 运行良好的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T11:24:33.467

此类超时通常发生在有 CGI 超时值时，这不是源自 php.ini 的问题。

尝试这个：

```
set_time_limit(0);  // run foorreeveeerr
for ($i=0; $i<1000; $i++){
    echo str_pad(round(microtime(1)-$start), 4096);
    flush();
    sleep(1);
    set_time_limit(0); // if PHP_CLI SAPI and having error messages
} 
```

请注意，这不是推荐的方式，如果没有控制可能会导致脚本运行时间过长...但是要诊断问题的根源，这可能会派上用场。

将时间限制设置为 0，表示没有时间限制。

如果您的脚本在 IIS 服务器上运行，请查看影响脚本超时的 CGI 超时设置，有关设置请查看[此处](http://www.iisadmin.co.uk/?p=7)

如果在 Apache 上，请在 httpd.conf 中检查 Apache 的超时值。

尽管支持说天空是极限，但事情可能会发生；）。

**Web 服务器可能会通过 HTTP 超时强制您退出**。寻求支持。因为我猜你是从浏览器监控的。

您可以使用（最好这样做）ini_get() 函数来验证以下值：

```
 ini_get('safe_mode'); 
```

和

```
 ini_get('max_execution_time'); 
```

等。特别是后者在设置之前和之后

```
 ini_set('max_execution_time'); 
```

至少验证设置似乎是成功的。

# vba - 将特定函数传输到 VBA 代码

> ID：16130579
> 
> 赞同：0
> 
> 时间：2013-04-21T11:21:26.673
> 
> 标签：vba, text, if-statement, cells

我需要帮助将函数转换为 VBA 代码，有人可以帮助我吗？

这是功能：

```
=IF(H4&I4&J4="TEXT"&"TEXT"&"TEXT";"TEXT";
IF(J4&I4="TEXT"&"TEXT";H4;
IF(H4&J4="TEXT"&"TEXT";I4;
IF(H4&I4="TEXT"&"TEXT";J4;
IF(J4="TEXT";(H4+I4)/2;IF(I4="TEXT";(H4+J4)/2;
IF(H4="TEXT";(I4+J4)/2;(H4+I4+J4)/3)))))) 
```

我试图在 VBA 中写这样的东西，但是没有用。. . . . . . .

```
If Cells(H4) and Cells (I4) and Cells (J4) = "TEXT". Then 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:30:55.230

我无法理解公式。你想做什么？

关于比较您拥有的单元格文本，请像这样使用 VBA 代码

```
Range("H4").Value = "TEXT" 
```

所以`If Cells(H4) and Cells (I4) and Cells (J4) = "TEXT" Then`变成

```
If Range("H4").Value = "TEXT" And _
Range("I4").Value = "TEXT" And _
Range("J4").Value = "TEXT" Then
    '~~> Do Something
End If 
```

上面的代码也可以写成

```
Dim strString As String

strString = Range("H4").Value & Range("I4").Value & Range("J4").Value

If strString = "TEXTTEXTTEXT" Then
    '~~> Do Something
End If 
```

# macos - 有没有办法将 Intellij IDEA 连接到 Mac OS X 上的 Sublime Text？

> ID：16130586
> 
> 赞同：21
> 
> 时间：2013-04-21T11:22:21.687
> 
> 标签：macos, intellij-idea, sublimetext2

我想从 Intellij IDEA（在 Mac OS X 上）找到一种在 Sublime Text 2 中打开文件的方法，以便在编写“普通文本”还不够的情况下使用其高级文本编辑功能！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-21T11:22:21.687

以下是您可以做到的，而不会因编写插件而“弄脏”您的手；即使这样，它也会打开保留光标位置的文件，并将文件夹添加到侧边栏。

1.  [配置](http://www.sublimetext.com/docs/2/osx_command_line.html)Sublime Text 命令行工具`subl`（如果你还没有）
2.  在 Intellij IDEA 中，点击**`Intellij IDEA`**-> **`Preferences...`**[或按*CMD+,* ]
3.  查找**`External Tools`**（下**`IDE Settings`**）
4.  单击加号 (+) 图标 [或按*CTRL+N* ]
5.  填写如下字段：

![](https://i.stack.imgur.com/eezZ7.png)

请记住，在**`Program`**现场你需要把你安装的地方`subl`！

**Sublime Text 3 的更新**：

假设 Sublime Text 在 中`/Applications`，您可以将其用于该**`Program`**字段：`/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl`

# sql-server - 在 wpf UI 中显示耗时的 SQL Server 存储过程（或查询）的进度

> ID：16130594
> 
> 赞同：0
> 
> 时间：2013-04-21T11:23:39.270
> 
> 标签：sql-server, wpf, sql-server-2008, sql-server-2005, mvvm

我正在使用 WPF 开发一个 Windows 应用程序，这个应用程序使用 MVVM。在这个应用程序中，我需要处理耗时的 SQL Server 查询或存储过程。现在我想在 UI 中显示运行查询/存储过程的进度。我使用 SQL Server 作为数据库。

我怎样才能做到这一点？请帮忙。

问候， 阿尼尔班

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:36:22.000

这与技术无关，首先你必须弄清楚你将如何获得查询的阶段。您可以拥有一个 Id 作为一些 uniqueGUID 的表，您将返回到调用代码。现在，在您的 SP 中，您可以传递 GUID，并且在完成每个步骤后，您可以使用 GUID 更新数据库表中的计数器。现在您只需要一个独立线程每 1-2 秒 ping 一次表，并使用您在启动进程时获得的 GUID 获取到目前为止达到的状态。

# objective-c - 从具有多个实例的 NSArray 中过滤一个变量

> ID：16130595
> 
> 赞同：0
> 
> 时间：2013-04-21T11:23:41.500
> 
> 标签：objective-c, arrays, nspredicate

我在 Objective-C 的开始，我对我的问题一无所知

我有一个类，我想从一个`NSArray`包含不同类实例的类中过滤一个实例`Employee`变量，`name`

*员工.h*

```
#import <Foundation/Foundation.h>

@interface Employee : NSObject
@property NSString *name ;
@property int age;
@end 
```

*员工.m*

```
#import "Employee.h"

@implementation Employee
@synthesize name ;
@synthesize age;
@end 
```

*主文件*

```
#import <Foundation/Foundation.h>
#import "Employee.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Employee *firstEmployee = [[Employee alloc] init];
        [firstEmployee setAge:35];
        [firstEmployee setName:[NSString stringWithFormat:@"George "]];

        Employee *secondEmployee = [[Employee alloc] init];
        [secondEmployee setAge:35];
        [secondEmployee setName:[NSString stringWithFormat:@"Ivan "]];

        Employee *thirdEmployee = [[Employee alloc] init];
        [thirdEmployee setAge:35];
        [thirddEmployee setName:[NSString stringWithFormat:@"Ivan "]];

        NSMutableArray *yesArray =                                                         
        [NSMutableArray arrayWithObjects:firstEmployee, secondEmployee, thirdEmployee, nil];
        int i;
        int count;
        count = [yesArray count];

        for (i = 0; i < count; i++){
            NSLog(@"Name of %i is %@", i, [[yesArray objectAtIndex:i] name]);
            NSLog(@"Age of  %i is %i", i, [[yesArray objectAtIndex:i] age]);
            NSPredicate *bPredicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] 'j'"];
            // I don't know how to access just name
            NSArray *beginWithB = [[yesArray name]  filteredArrayUsingPredicate:bPredicate]; 
         }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:47:47.410

要获取按名称过滤的员工列表，请使用

```
NSPredicate *bPredicate1 = [NSPredicate predicateWithFormat:@"name BEGINSWITH[c] %@", @"I"];
NSArray *beginWith1 = [yesArray filteredArrayUsingPredicate:bPredicate1]; 
```

要获取仅包含员工姓名的数组，请使用

```
NSArray *namesOnly = [yesArray valueForKey:@"name"]; 
```

这个数组可以使用过滤

```
NSPredicate *bPredicate2 = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[c] %@", @"I"];
NSArray *beginWith2 = [namesOnly filteredArrayUsingPredicate:bPredicate2]; 
```

# java - 使用 for 循环将新对象添加到 arraylist 将始终添加最后一个对象

> ID：16130596
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:24:02.960
> 
> 标签：java, list, loops

这只是我的代码的基本表示：

所以我的循环将生成一堆哈希图，每个哈希图的键为“x”，值等于 i。每次通过后，地图将被添加到列表中。

```
List<HashMap> list = new ArrayList<HashMap>();
for (int i = 1; i <= counter; i++) {
    HashMap map = new HashMap();
    map.put("x", i);

    list.add(new HashMap(map));
} 
```

所以如果我打印出我的清单，如果`counter = 5`：（我期待 1 2 3 4 5）

```
1
5
5
5
5 
```

我怀疑这是某种引用错误？如果是这样，那么为什么第一个值是 1 而不是 5？

编辑：打印代码没有问题。在将每个地图添加到列表之前，我将其打印到控制台，所有地图看起来都很好。

然后当我打印列表时......它们都显示相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:15:43.503

```
ArrayList <HashMap<String, Integer>> list = new ArrayList<HashMap<String,Integer>>();
    int counter =5;
    for (int i = 1; i<=counter;i++){

         HashMap<String, Integer> map = new HashMap<String, Integer>();
         map.put("x", i);
         list.add(map);
    }

    System.out.println(list); 
```

直接从控制台

![在此处输入图像描述](https://i.stack.imgur.com/6GECn.png)

# css-selectors - Jsoup - :lt() 选择不起作用

> ID：16130597
> 
> 赞同：0
> 
> 时间：2013-04-21T11:24:03.730
> 
> 标签：css-selectors, jsoup

在我的 html 代码中，有 120 个这样的 li，因此我想限制而不是获取所有结果，所以我写

```
doc.select(".productContainer:lt(50) .productName") 
```

另外我也检查了这个问题。我试过了，但它不起作用。这是[链接](https://stackoverflow.com/q/12317514/621951)

HTML是：

```
<li>
<div class="productContainer">
    <div class="productPic">
        <a>
            <img src="..." alt="..." ></a>
    </div>
    <div class="productName">
        <a href=".." title="...">
            abc
        </a>
    </div>

    <div class="productPrice">
        <span id="...">...</span>
    </div>
</div>
</li>

 <li>
<div class="productContainer">
    <div class="productPic">
        <a>
            <img src="..." alt="..." ></a>
    </div>
    <div class="productName">
        <a href=".." title="...">
            abc
        </a>
    </div>

    <div class="productPrice">
        <span id="...">...</span>
    </div>
</div>
 </li> 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:59:42.730

您的选择查询错误，请查看我的解决方案 - 从列表中读取产品名称的查询：

```
doc.select("li:lt(50) > div.productContainer > div.productName").text(); 
```

这对我有用！

# r - 无法使用 ggplot 绘制多个日期/值

> ID：16130600
> 
> 赞同：1
> 
> 时间：2013-04-21T11:24:11.850
> 
> 标签：r, ggplot2

使用 ggplot 我试图绘制两行值。所以 var0 的值为 49,5,20 为 "Monday" , "Tuesday" , "Wednesday" 并且 var1 的值为 49,1,20 为 "Monday" , "Tuesday" , "Wednesday"

这是代码：

```
test_data <- data.frame(
var0 = c(49, 5, 20),
var1 = c(49, 1, 10),
days = c("Monday" , "Tuesday" , "Wednesday"))

ggplot(test_data, days)
geom_line(y = var0, colour = "var0")
geom_line(y = var1, colour = "var1") 
```

以下是错误：

```
> ggplot(test_data, days)
Error in inherits(mapping, "uneval") : object 'days' not found
> geom_line(y = var0, colour = "var0")
Error in do.call("layer", list(mapping = mapping, data = data, stat = stat,  : 
  object 'var0' not found
> geom_line(y = var1, colour = "var1")
Error in do.call("layer", list(mapping = mapping, data = data, stat = stat,  : 
  object 'var1' not found 
```

我是否正确设置了数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:35:42.657

您的代码中有几个错误 - x 和 y 值应该放在`aes()`调用中，然后在和调用`+`之间缺少符号。`ggplot()``geom_line()`

如果您需要绘制两组 y 值，我建议，首先，融化您的数据，然后绘制融化的数据框。使用融化的数据，您只需要一次`geom_line()`调用，您可以根据`variable`图例中显示的设置每条线的颜色。

```
library(reshape2)
test_data2<-melt(test_data,id.vars="days")
test_data2
       days variable value
1    Monday     var0    49
2   Tuesday     var0     5
3 Wednesday     var0    20
4    Monday     var1    49
5   Tuesday     var1     1
6 Wednesday     var1    10
ggplot(test_data2,aes(days,value,color=variable,group=variable))+geom_line() 
```

![在此处输入图像描述](https://i.stack.imgur.com/6yCkC.png)

# c# - DataGrigView 转换为 DataTable

> ID：16130605
> 
> 赞同：0
> 
> 时间：2013-04-21T11:24:56.753
> 
> 标签：c#, datagridview, datatable

我正在尝试将 DataGridView 转换为 DataTable，但我发现的所有解决方案都没有工作。任何的想法？还是需要我使用 foreach 等？

```
 DataTable d = detailsDataGridView.DataSource as DataTable;// return null table

        DataTable dt = new DataTable();
        dt = (DataTable)detailsDataGridView.DataSource;//doesn't work

        BindingSource bs = new BindingSource();
        bs.DataSource = detailsDataGridView.DataSource;
        DataTable d = (DataTable)(bs.DataSource);//doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:32:25.893

**已编辑**

试试这个方法，这就是你需要的：

```
DataTable data = GetDataTableFromDGV(dgvMyMembers);

    private DataTable GetDataTableFromDGV(DataGridView dgv)
    {
        var dt = ((DataTable)dgv.DataSource).Copy();
        foreach (DataGridViewColumn column in dgv.Columns)
        {
            if (!column.Visible)
            {
                dt.Columns.Remove(column.Name);
            }
        }
        return dt;
    } 
```

**或者**

这是一个简单的 2 列 DataGridView 的快速示例解决方案

```
DataTable dt = new DataTable();
 dt.Column.Add("column1", typeof(string));
 dt.Column.Add("column2", typeof(string));

foreach(DataGridViewRow dgvR in myDataGridView)
{
  dt.Rows.Add(dgvR.Cells[0].Value, dgvR.Cells[1].Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-19T16:42:02.827

一条线上的快速解决方案。希望这会有所帮助

```
DataTable dt = (DataTable)dgvR.DataSource; 
```

# java - Java中的默认构造函数

> ID：16130615
> 
> 赞同：-4
> 
> 时间：2013-04-21T11:26:14.990
> 
> 标签：java, constructor, default

我的主类中有一个默认构造函数，在运行时似乎没有被调用。这是一个例子：

```
public class Cat {
    private static int myval;

    Cat() throws IOException {
        this.myval = 7;
        System.out.println("Called constructor");
    }

    public static void main() {
        // Main program
    }
} 
```

在运行时，我看不到窗口中输出的“调用构造函数”行。我敢肯定这是显而易见的！

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:38:46.253

首先，你没有`main`方法。

你的是`public static void main()`

尝试运行它，编译器会告诉你没有`main`.

![在此处输入图像描述](https://i.stack.imgur.com/uBXz9.png)

其次，您没有实例化 Cat。试试这个修改后的类，你会正确看到输出：

```
public class Cat {
    private static int myval;

    Cat() throws IOException {
        this.myval = 7;
        System.out.println("Called constructor");
    }

    public static void main(String args[]) throws IOException {
        Cat c = new Cat();
    }
} 
```

结果：

```
Called constructor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:29:42.347

构造函数仍然需要被调用`main`。默认构造函数只是指尚未定义构造函数的类。您已经定义了一个构造函数，所以这只是一个无参数的构造函数。

查看[Wikipedia](http://en.wikipedia.org/wiki/Default_constructor)文章，特别是 Java 和 C#。

此外，您创建的方法需要被捕获，因为它会引发异常。你的代码应该是这样的：

```
public class Cat {
    private static int myval;

    Cat() throws IOException {
        this.myval = 7;
        System.out.println("Called constructor");
    }

    public static void main() {
        try {
            Cat cat = new Cat()
        } catch (IOException e) {
            // do stuff with e
        }
    }
} 
```

默认构造函数如下所示：

```
public class Cat { 
    private static int myval;

    public String meow() {
        return "Meow!";
    }
}

public class MainClass {
    public static void main(String[] argsv) {
        Cat cat = new Cat();
        System.out.println(cat.meow());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:28:20.230

好吧，您从来没有真正创建过您的类的实例吗？您必须在 main 方法中创建 Cat 类的实例。

```
public static void main(){
// Main program
new cat();// this will invoke your constructor call
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T11:29:48.890

Java 术语中的 Default 构造函数由 JVM 在不存在其他构造函数时生成。通过编写构造函数，它不再是默认构造函数！

此外，如前所述，您需要使用`new`关键字来调用`Cat()`构造函数。

# wordpress - Wordpress 管理员：在自定义按钮上打开弹出窗口

> ID：16130616
> 
> 赞同：1
> 
> 时间：2013-04-21T11:26:18.440
> 
> 标签：wordpress

我在 wordpress 帖子页面中使用自定义元框。此框包含一个自定义复制按钮。现在，我想在单击“复制”按钮时打开一个弹出窗口。我还需要在此弹出窗口中显示父窗口的内容。我附上了 metabox 的截图！[在此处输入图像描述][1]供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:16:27.640

使用 onclick 来做到这一点。

例如你可以试试这个

```
onClick="window.open('http://youradresspage/');" 
```

Your_pop_up_page 必须在您的主题文件夹中，当然您可以调用此页面中的所有内容，例如父页面中的内容。

# jquery - 使用 jQuery serialize() 和 AJAX 发送部分表单

> ID：16130619
> 
> 赞同：26
> 
> 时间：2013-04-21T11:26:33.587
> 
> 标签：jquery, ajax, serialization

我正在尝试使用 jQuery 的序列化通过 AJAX 发送一个表单的一部分。该表单有 16 个文本字段。我有 4 个按钮。`button0`发送文本字段 0、1、2、3，并发送文本字段 4、5、6、7 等。我该`button1`怎么做？

HTML

```
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Serialize</title>  
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>   
 </head>
 <body>
    <form id='miForm' class='miForm' name='miForm' action='env.php' method='POST'>

    </form>
 </body>
</html> 
```

jQuery：

```
 $(document).ready(function(){
        for(i=0;i<16;i++){
            $('form').append('Campo de texto '+i+'<input type="text" id="txt'+i+'" value="Campo '+i+'" readonly="yes"/><br>');
        }
        for(i=0;i<4;i++){
            $('form').append('<input type="button" id="butEnv'+i+'" value="Enviar'+i+'"/><br>');
        }
        $('form').append('<input type="button" id="butGen" value="Enviar Global"/><br>');

    }); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-21T11:48:27.810

如果您真的只想保留一种形式，请尝试像我在[这个小提琴](http://jsfiddle.net/yCpzx/6/)中所做的那样。

为您的表单创建子部件。

```
<form>
    <div id="first">
        <input name="tbox1" type="text">
        <input name="tbox2" type="text">
        <input name="tbox3" type="text">    
        <input id="button1" type="button" value="button1">  
    </div>
    <div id="second">
        <input name="tbox4" type="text">
        <input name="tbox5" type="text">
        <input name="tbox6" type="text">    
        <input id="button2" type="button" value="button2">  
    </div>
</form> 
```

然后只需选择零件的所有元素：

```
$(document).ready(function() {
    $('#button1').on('click', function() {
        alert($('#first input').serialize());
    });

      $('#button2').on('click', function() {
        alert($('#second input').serialize());
    });
}); 
```

当然，如果您还有选择框，则必须将它们添加到选择器中。例如：

```
$('#second input, #second select').serialize() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:45:15.607

尝试[DEMO 和 CODE](http://jsfiddle.net/m89tu/3/)

例如，根据您的需要进行修改：

```
<form name="test">
    <input type="textinput" name="first" value="test1" class="form2" /> <br/>
    <select name="second" class="form1">
        <option value="1">opt 1</option>
        <option selected="selected" value="2">opt 2</option>
    </select>
    <input type="textinput" name="third" value="test1" class="form2" /> <br/>
</form>

<script>
(function() {
    // get second form elements
    var options = $('form[name=test]').find('input, textarea, select').filter('.form2').serialize(); 

    alert(options);

}())
</script> 
```

这将获得所有具有 form2 类的输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-02T19:17:09.730

一种更语义化和更精细的方法是使用自定义属性来选择不同的表单部分。更容易将表单元素重新分配给不同的按钮，而不会弄乱容器。

```
$('button[name="button1"]').click(function() {
  data = $('[scope="part1"]').serialize();
  console.log(data);
});
$('button[name="button2"]').click(function() {
  data = $('[scope="part2"]').serialize();
  console.log(data);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form>
  <input type="text" name="text1" scope="part1" />
  <input type="text" name="text2" scope="part1" />
  <input type="text" name="text3" scope="part1" />
  <input type="text" name="text4" scope="part1" />
  <button type="button" name="button1">Button 1</button>
  <input type="text" name="text5" scope="part2" />
  <input type="text" name="text6" scope="part2" />
  <input type="text" name="text7" scope="part2" />
  <input type="text" name="text8" scope="part2" />
  <button type="button" name="button2">Button 2</button>
</form>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-02T08:00:16.807

```
var formData    =    $(form).find('#selectedOptions : input') . serialize();
         $.post(url, formData)  .done(function (data) 
         {  
             alert('hi');
        });

where #selectedOptions is id of the element. 
```

# android - TextToSpeech OnUtteranceCompletedListener 不起作用

> ID：16130620
> 
> 赞同：2
> 
> 时间：2013-04-21T11:26:36.837
> 
> 标签：android

我正在使用 OnUtteranceCompletedListener 来检测 TTS 何时结束讲话，但是永远不会调用 OnUttereanceCompleted。监听器是在 onInit 中创建的，在 HashMap 之前，所以我不知道出了什么问题。任何想法？

```
 public class TTSActivity extends Activity implements TextToSpeech.OnInitListener, OnUtteranceCompletedListener
{
    private TextToSpeech tts;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tts_layout);

        tts = new TextToSpeech(this, this);
    }

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    @Override
    public void onInit(int status) 
    {
        if (status == TextToSpeech.SUCCESS) 
        {
            tts.setOnUtteranceCompletedListener(this);
            int result = tts.setLanguage(Locale.US);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                speakOut();
            }
        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    private void speakOut() 
    {
        HashMap<String, String> myHashAlarm = new HashMap<String, String>();
        myHashAlarm.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_ALARM));
        myHashAlarm.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "FINISHED PLAYING");
    tts.speak("Some text.", TextToSpeech.QUEUE_FLUSH, myHashAlarm);   
  }

    @Override
    public void onUtteranceCompleted(String utteranceId) 
    {
        if(utteranceId=="FINISHED PLAYING")
        {
            Log.i("TTS", "Called");   //never called
        }   
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:21:04.993

得到它的工作。问题在于字符串的比较。该行：

```
if(utteranceId=="FINISHED PLAYING") 
```

必须改为：

```
if(utteranceId.equals("FINISHED PLAYING")) 
```

# java - 如何在 JAVA 的每个维度中创建具有不同类型数据的二维数组/数组列表？

> ID：16130622
> 
> 赞同：0
> 
> 时间：2013-04-21T11:27:42.093
> 
> 标签：java, android

我有一个原生的 Android 新闻应用程序，每篇文章下都有新闻文章和评论。

当我打开任何特定文章的内部视图（活动）时，同一篇文章可能会有不同的报道，例如来自 CNN、BBC、FOX 等的报道。

每个报道实际上都被视为具有唯一字符串 ID/哈希的不同文章。

我的背景是 Perl/PHP 我想知道如何在 java 中创建这样的东西：

```
$array["Article1_Coverage_X"] = array($Comment1,$Comment2,$Comment3);
$array["Article1_Coverage_Y"] = array($Comment1,$Comment2,$Comment3,$Comment4);
// $Comment1 , $Comment2 ....etc are comment objects 
```

. . 即数组的第一维是字符串（键），第二维是其他类型

我尝试了以下方法，但这不是我想要的：

```
 ArrayList<ArrayList<Comment>>  // Where Comment is a Java object with ID,Title.....etc 
```

因为两个维度的键都是索引整数

如果有更好的方法，我将不胜感激。我想将与每篇新闻文章相关的评论列表存储在一个临时变量中，这样一旦用户退出活动，它就会（回收/扔到垃圾中），这就是我不想存储在 SQLite 数据库中的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:31:36.270

您需要的是 ArrayLists 的 HashMap。HashMap 创建键值对。将您的密钥设为字符串，以便您可以使用它而不是整数进行提取。

```
HashMap < String,ArrayList < Comment >> hmap = new HashMap < String,ArrayList < Comment >> (); 
```

输入数据，

```
hmap.put("BBC", commentlist1); 
```

提取，

```
ArrayList<Comment> list = hmap.get("CNN"); 
```

要迭代元素，有几种方法。 [如何有效地迭代地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

此外，如果您希望维护特定订单，您可能需要使用`LinkedHashMap`

# sql - Oracle SQL 字符串日期转换

> ID：16130624
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:27:43.553
> 
> 标签：sql, oracle, date, format

我需要使用 Oracle SQL 格式化/转换一个虚拟日期，但我收到以下错误消息：

> ORA-01858: 在需要数字的地方发现了一个非数字字符

SQL 命令：

```
SELECT TO_DATE('January 3, 2011', 'DD-MM-YY') FROM dual; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:53:18.660

你的问题不清楚。如果您实际上有一个要转换为字符串的日期，则可以使用该`to_char`函数

```
SELECT to_char( date '2011-01-03', 'DD-MM-YY' )
  FROM dual 
```

但是，在您发布的代码中，您似乎有一个表示日期的字符串，并且您希望将其转换为以不同格式表示同一日期的不同字符串。如果是这种情况，您需要将字符串转换为日期，然后将日期转换回字符串

```
SELECT to_char( to_date( 'January 3, 2011', 'Month DD, YYYY' ),
                'DD-MM-YY' )
  FROM dual 
```

# javascript - 对模板中的数字求和

> ID：16130632
> 
> 赞同：1
> 
> 时间：2013-04-21T11:28:50.747
> 
> 标签：javascript, meteor

我有一个模板：

```
<template name="week_list">
    {{#each days}}
        {{day_of_month this}} <br /> 

        {{#each action_log_on_day this}}
            {{Name}} : {{Score}} <br />
        {{/each}}
    {{/each}}
</template> 
```

有没有办法总结模板中的所有“分数”，或者我需要为它创建一个单独的 js 函数（带有自己的 mongo 查询）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:02:22.150

您需要为此创建一个单独的函数，因为流星中模板的唯一目的是显示内容，您根本无法在模板中实现任何逻辑。您的函数可能与此类似：

```
var sum = 0; 
Documents.find({...}).forEach(function (doc) { sum += doc.Score; }); 
return sum; 
```

# matlab - 如何获得具有双索引的输出变量以与 parfor 一起使用？

> ID：16130633
> 
> 赞同：1
> 
> 时间：2013-04-21T11:28:54.130
> 
> 标签：matlab, parallel-processing

我在学习中使用 Matlab 有一段时间了，想了解更多关于并行计算的知识。Parfor 似乎是一种非常有用的技术。我无法让它与以下代码一起使用：

```
resultsOfRW = ones(100,N);

parfor i= 1:100

   RWs{i} = A; %I want to modify A in every iteration

   j = 1;
   S = 2; %just something larger than 1

   while j <= N && S > 1
        RWs{i} = DoSomethingRandomly(RWs{i}); % Make some (stochastic) change to RWs{i}
        S = GetSomeResultFrom(RWs{i});

        resultOfRW(i,j) = S; %This is invalid

        j = j+1;
   end
end 
```

现在，我知道它与索引 j 有关，这对切片变量无效。但我不明白为什么，因为并行运行它是完全有效的。

除了为什么，我怎么能实现它来并行运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:29:10.680

# java - equals() 可以判断一个对象发送然后接收回来是否实际上是相同的？

> ID：16130635
> 
> 赞同：1
> 
> 时间：2013-04-21T11:28:58.077
> 
> 标签：java, serialization, client-server

[我使用这里](http://www.site.uottawa.ca/school/research/lloseng/supportMaterial/ocsf/ocsf.html)解释的 OCSF 框架，假设我使用 sendToServer(Object msg) 发送 originalMssg，它使用 java 的对象流和客户端上的套接字，然后在服务器端我运行 sendToClient(Object msg)，其中 mssg 对象是和我从那个客户那里收到的一样。

现在，考虑以下回调，一旦从客户端代码上的服务器接收到 mssg，就会调用该回调：

```
@Override
protected void handleMessageFromServer(Object msg) {
  System.out.println(msg.equals(originalMssg));

} 
```

1.  在上述情况下，它总是会打印出来吗？
2.  如果不是，在什么情况下不会？是否有可能让它总是返回真实？
3.  如果在所有情况下它都返回 false，你如何标记你的 mssg 对象，以便在它从服务器返回时识别它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:10:34.333

（这纯粹是基于阅读 OSCF 网站和 javadocs ... YMMV）

该网站称 OSCF 发送和接收可序列化的普通 Java 对象 (POJO)。由此我推断该`msg`对象可以是*任何*可序列化类的实例。

> 在上述情况下，它总是会打印 true 吗？

这是不可能的。这取决于实际类的实现方式`equals`。

> 如果不是，在什么情况下不会？

不能说（见上文）。

> 是否有可能让它总是返回真实？

Ermm ...您需要更改`equals`您正在发送/接收的类的方法的实现。

> 如果在所有情况下它都返回 false ...

不可能说这个前提条件是否成立（见上文）。

* * *

底线。这`msg`是您自己实现或选择的某个类的实例。您可以使用适合您要求的行为来实现/选择它`equals`......包括（显然）与从客户端到服务器往返并再次返回的对象实例进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:17:29.690

的主要`OSCF`属性是发送字符串或字符串数​​组.....所以首先检查您的对象是否为`serializable`.

然后是您制作的每个课程`equals`所需的方法。`@Override`

1）没有。

2）几乎任何时候它都是假的，你可以尝试向一个对象发送一个字符串，你应该得到真。

3）请参阅我对我的回答的介绍。

# c++ - 如何制作一个在声明时预先编辑其值的变量？

> ID：16130636
> 
> 赞同：-4
> 
> 时间：2013-04-21T11:29:05.923
> 
> 标签：c++, variables

我想制作一个规范化的坐标系，我想知道是否有一种方法可以制作一个在声明时执行此操作的变量：

```
Normals.BottomLeftX *= ClientArea.right;
Normals.BottomRightX *= ClientArea.right;
Normals.TopLeftX *= ClientArea.right;
Normals.TopRightX *= ClientArea.right;

Normals.BottomLeftY *= ClientArea.bottom;
Normals.BottomRightY *= ClientArea.bottom;
Normals.TopLeftY *= ClientArea.bottom;
Normals.TopRightY *= ClientArea.bottom; 
```

ps 我计划制作每个的 X 和 Y 版本。值是任意的。如果该值是 x 它将乘以正确的值，因为 y 乘以底部值。为了更好地理解它需要做什么，我将使用它在 gui 游戏引擎中创建部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:58:42.640

您总是可以只为它编写一个构造函数`Normals.foo`，`ClientArea.bar`然后将其自身的值设置为自身 times `ClientArea.bar`。

但是，Normals 的每个成员都必须是您创建的一种类或结构。我认为最好只做类似你在那里的事情，除非你的程序中的 ClientArea 经常更改。

# iphone - 裁剪图像让图片向左旋转

> ID：16130639
> 
> 赞同：1
> 
> 时间：2013-04-21T11:29:19.407
> 
> 标签：iphone, ios, objective-c, xcode, crop

我正在开发一个裁剪图像的应用程序。我正在使用以下代码来调用裁剪方法：

```
UIImage* croppedImage = [self imageCrop:imageView toRect:CGRectMake(10.0, 50.0, 320, 100)]; 
```

这是该方法的代码：

```
{
    //create a context to do our clipping in
    CGRect newRect = CGRectApplyAffineTransform(rect, imageViewToCrop.transform);
    UIImage *imageToCrop = imageViewToCrop.image;
    UIGraphicsBeginImageContext(newRect.size);
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    //create a rect with the size we want to crop the image to
    //the X and Y here are zero so we start at the beginning of our
    //newly created context
    CGRect clippedRect = CGRectMake(0, 0, rect.size.width, rect.size.height);
    CGContextClipToRect( currentContext, clippedRect);

    //draw the image to our clipped context using our offset rect
    CGContextDrawImage(currentContext, newRect, imageToCrop.CGImage);

    //pull the image from our cropped context
    UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();

    //pop the context to get back to the default
    UIGraphicsEndImageContext();

    return cropped;
} 
```

问题是当我将此图像设置为 UIImageView 时，我发现返回的图像向左旋转。我不能让它旋转起来。任何人都可以知道这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:30:36.837

Uiimage 有一个**imageOrientation**属性，在某些情况下指示系统应该显示图像位的方式。尝试记录该值并查看。如果它像我怀疑的那样，那么您可能需要调整您的裁剪算法，首先创建一个 CGImage，然后使用 UIImage 方法从中制作一个具有方向参数的 UIImage。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:42:16.490

正如大卫所写，问题很可能是您没有保留**imageOrientation**属性。您的代码的问题还在于您不保留**比例**属性。尝试像这样创建裁剪的图像：

```
CGImageRef croppedRef = CGBitmapContextCreateImage(currentContext);
UIImage* cropped = [UIImage imageWithCGImage:croppedRef scale:imageToCrop.scale orientation:imageToCrop.imageOrientation];
CGImageRelease(croppedRef); 
```

# php - 重定向 + CodeIgniter + SEO？

> ID：16130646
> 
> 赞同：0
> 
> 时间：2013-04-21T11:30:10.680
> 
> 标签：php, html, wordpress, codeigniter, seo

**好的，这是我的情况：**

*   我正在重写我的一个旧的基于 WordPress 的网站（有很多内容），作为一个 Bootstrap、CodeIgniter 支持的网站。
*   由于该网站已有将近 4-5 年的历史，并且已经在搜索结果中占有一席之地，因此我主要关心的一个问题是保持现有 URL 不变。

**问题 ：**

*   虽然我想保留旧的 URL，但它们仍然有点奇怪（所有 WP 的废话），比如 :`mysite.com/category/some-category/some-subcategory`等
*   我正在考虑更改一般 url 结构，并将旧 url 转发到新 url。

**我该怎么做？**哪一种是最适合 SEO 的方式？会有什么缺点吗？

请务必说明一下，因为我只是太困惑了，绝对不想破坏一个已经表现良好的网站......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:40:46.650

您可以使用 $slug 变量。使用 $slug 存储 URL 可能会有所帮助。我以前从未尝试过 SEO，但可能会奏效。

[http://ellislab.com/codeigniter/user-guide/tutorial/news_section.html](http://ellislab.com/codeigniter/user-guide/tutorial/news_section.html)

看起来你可以存储

```
xxx.com/category/some-category/some-subcategory/content_title 
```

至

```
xxx.com/$slug/content_title 
```

您可能需要使用以前的 URL 编辑 $slug。试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:52:57.377

我的建议，使用友好的 URL 更改 URL 结构，在这里你可以找到一个很好的备忘单，其中包含一个好的 URL 的解剖结构：[http ://www.seomoz.org/blog/seo-cheat-sheet-anatomy-of-a -url](http://www.seomoz.org/blog/seo-cheat-sheet-anatomy-of-a-url)

除了前面的一点，您需要维护旧的 URL 结构，执行 301 重定向（这非常重要，不要使用 302）到新结构。您可以在 .htaccess 文件中执行此操作。更多信息：[http ://www.seomoz.org/learn-seo/redirection](http://www.seomoz.org/learn-seo/redirection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T22:55:45.837

据我所知，只有 post_name 在 WP po​​st 的 uri 中很重要： `wp-site.com/category/post_name`等于`wp-site.com/category2/post_name`.

因此，当您将 wp-posts 表迁移到新的 CI 帖子表时，请保留`post_name`字段以识别请求的内容。

我向您提交了一个简单的解决方案来保留旧 URL：

例如：您的旧 URI 就像`/category1/cateogry2/post_name/`

配置/路由.php

```
//old post URIs (WP)
//$3 = post_name
$route['([a-z0-9\-_]+)/([a-z0-9\-_]+)/([a-z0-9\-_]+)/'] = 'posts/single/$3'; 

//new post URIs
//e.g: /post_name.html
$route['([a-z0-9\-_]+)\.html'] = 'posts/single/$1'; 
```

控制器/posts.php

```
//posts method
public function single($post_name) {
    //check post_name in DB
    //...

    //check URI (optionnal)
    //there are not one segment in the uri so this is an old URI
    if( $this->uri->total_segments() > 1 ) {
        redirect($post_name.'.html', 301);
    }

    //...
} 
```

通过此解决方案，当您访问时`http://site.com/category1/cateogry2/post_name/`，将调用 posts/single 方法并将您重定向到新的 URL（`http://site.com/post_name.html`如果需要）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T15:10:12.813

小心 SEOMoz 作弊对我不起作用。我的网站通常位于谷歌搜索的第二页。在关注 SEOmoz 之后，它把我的网站放到了第 5 页以下。我认识一位 SEO 大师，当我展示我的网站时，他笑着告诉我“不要相信互联网上所说的一切，他们说废话只是为了吸引观众”。他建议我保持网址尽可能短，并在网址中有一个特定的关键字，有类别，子类别，......将制作一个冗长的网址，谷歌将其视为关键字填充。我将我的网址更改为短而甜美的，并在 3 周内我的网站出现在第一页。

是的，301 重定向最好是上面提到的 m4t1t0。根据谷歌的说法，如果您将网站域名或网址更改为页面，您应该使用 301，通过它您可以保留以前的反向链接和页面排名。

将此添加到您的 .htaccess 文件中

```
Redirect 301 /category/some-category/some-subcategory http://mysite.com/specific-keyword-for-the-product 
```

# jquery - jQuery倒计时不对齐格式

> ID：16130647
> 
> 赞同：1
> 
> 时间：2013-04-21T11:30:20.180
> 
> 标签：jquery, html, countdown

我试图在我的 aspx 页面上实现一个倒数计时器，但我得到了这个视图：![aspx 页面中的倒数计时器视图](https://i.stack.imgur.com/2eA2T.png) 当我将它放在一个空页面（html 或 aspx）中时，它运行正常。但是当我将它放在 .net 中的表单结构下时，它会崩溃，如捕获中所示。

这是我的倒计时块：

```
<div id="countdown_dashboard">
    <div class="dash weeks_dash" style="display: none">
        <span class="dash_title">week</span>
        <div class="digit">0</div>
        <div class="digit">0</div>
    </div>

    <div class="dash days_dash" style="display: none">
        <span class="dash_title">day</span>
        <div class="digit">0</div>
        <div class="digit">0</div>
    </div>

    <div class="dash hours_dash">
        <span class="dash_title">hour</span>
        <div class="digit">0</div>
        <div class="digit">0</div>
    </div>

    <div class="dash minutes_dash">
        <span class="dash_title">minute</span>
        <div class="digit">0</div>
        <div class="digit">0</div>
    </div>

    <div class="dash seconds_dash">
        <span class="dash_title">second</span>
        <div class="digit">0</div>
        <div class="digit">0</div>
    </div>

</div>
<!-- Countdown dashboard end -->

<script type="text/javascript">
    jQuery(document).ready(function () {
        $('#countdown_dashboard').countDown({
            targetDate: {
                'day': 10,
                'month': 6,
                'year': 2013,
                'hour': 11,
                'min': 0,
                'sec': 0
            }
        });

        $('#email_field').focus(email_focus).blur(email_blur);
        $('#subscribe_form').bind('submit', function () { return false; });
    });
</script> 
```

head 标签中的导入文件有：

```
<%--<script src="jQuery-countdown/js/jquery-1.4.1.js"></script>--%>
    <script src="jQuery-countdown/js/jquery.lwtCountdown-1.0.js"></script>
    <script src="jQuery-countdown/js/misc.js"></script>
    <link rel="Stylesheet" href="jQuery-countdown/style/main.css"/> 
```

注意：我注释掉了第一个，因为它严重影响了表单标签内容。

我怎样才能避免这个错误？

# java - Icefaces 1.8 外观问题

> ID：16130651
> 
> 赞同：1
> 
> 时间：2013-04-21T11:30:47.073
> 
> 标签：java, jsf, user-interface, icefaces, icefaces-1.8

我无法弄清楚如何为`header`icefaces 数据表组件获得良好的外观和感觉。我已经使用了，`ice:commandSortHeader`但图像（即箭头）根本没有显示。此外，标题不像`shiny`组件展示那样具有外观和感觉。

我正在尝试使用`rime.css`，因此添加了这一行：

```
<link href="css/rime.css" rel="stylesheet" type="text/css"/> 
```

我用于`ice:graphicImage`分页器和图像以及外观和感觉都很好。对于 Sortable 标题，我在我的工作区中添加了箭头图像，但无法理解将其添加到何处以使其显示。也不知道如何`shiny`为标题带来外观。

请帮助我解决标题外观问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:47:21.380

代替

```
<link href="css/rime.css" rel="stylesheet" type="text/css"/> 
```

和

```
<ice:outputStyle href="./xmlhttp/css/rime/rime.css" rel="stylesheet" type="text/css" /> 
```

# java - 使用泛型类型参数类

> ID：16130658
> 
> 赞同：0
> 
> 时间：2013-04-21T11:31:10.813
> 
> 标签：java, android

我的代码中有以下类

```
public class GenericService<E> extends  SpringAndroidSpiceRequest<E> {
    public GenericService(Class<E> clazz) {
        super(clazz);

    }
    @Override
    public E loadDataFromNetwork() throws Exception {
        return null;
    }
} 
```

现在，此类的构造函数采用类类型的参数。我想去掉这个参数，直接说 super(E.class) 之类的话？但这给了我一个错误。因此，如果我 GenericService loginService=new GenericService 构造函数应该使用参数 Login.class 调用 super。这就像这样工作，但不是说 E.class 的通用方式。我怎样才能做到这一点 ？

# 编辑

我想将以下类合并为一个类

公共类 LoginService 扩展 SpringAndroidSpiceRequest {

```
private Login.Request loginRequest;
private final String loginRequestURL = "/login";

public LoginService() {
    super(Login.Response.class);
}

public final Login.Response loadDataFromNetwork() throws Exception {

    Uri.Builder uriBuilder = Uri.parse(
            ProfileInfo.getActiveProfile().getbaseURL() + loginRequestURL)
            .buildUpon();
    String url = uriBuilder.build().toString();

    return getRestTemplate().postForObject(url, loginRequest,
            Login.Response.class);
}

@Override
public final String createCacheKey() {
    return loginRequest.getUsername() + "" + loginRequest.getPassword();
} 
```

}

和

```
public class ForgetPasswordService extends
            SpringAndroidSpiceRequest<ForgetPassword.Response> {

        private final String forgotPasswordURL = "/forgotpassword";

        public ForgetPasswordService() {
            super(ForgetPassword.Response.class);
        }

        public final ForgetPassword.Response loadDataFromNetwork() throws Exception {

            Uri.Builder uriBuilder = Uri
                    .parse(ProfileInfo.getActiveProfile().getbaseURL()
                            + forgotPasswordURL).buildUpon();
            String url = uriBuilder.build().toString();
            return getRestTemplate().postForObject(url, forgotPasswordRequest,
                    ForgetPassword.Response.class);
        }

        public final String createCacheKey() {
            return forgotPasswordRequest.getPhoneOrEmailAddress();
        }

    } 
```

两个类是相同的。唯一的区别是它们给出的响应类型。现在我有大约 23 个这样的课程。如果不需要，添加所有这些类真的很糟糕。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T11:34:31.550

你不能因为类型擦除。您用作类型参数的哪个类的详细信息都没有使其进入运行时类。这是 Java 泛型的限制

请参阅[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:39:24.033

> 有依赖注入:(

要么找到一种方法来传递类对象，例如

```
<constructor-arg type="java.lang.Class" value="com.mycompany.Foo"/> 
```

（我不确定这在春天是否正确）

或创建一个子类：

```
public class FooService extends GenericService<Foo>{
    public FooService() {
        super(Foo.class);
    }
} 
```

# ruby - 有没有办法使用一个元素，尽管它不再出现在屏幕上？

> ID：16130662
> 
> 赞同：4
> 
> 时间：2013-04-21T11:32:18.623
> 
> 标签：ruby, watir, watir-webdriver

在我找到一个元素之后，让我们说一个`span`. 有没有办法保存它的属性，或者类似的东西，所以`span`即使它不再存在于屏幕上，也不能“点击”？

我需要的是一种在执行一些`span`从屏幕上删除的操作后访问其指向的页面的方法。

*我知道 watir-webdriver 用于 GUI 测试，因此应该只允许人类可以执行的操作。但我希望还有办法。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:56:37.070

我需要查看您网页的来源，但通常您可以这样做：

```
1.9.3p392 :001 > require "watir-webdriver"
 => true 
1.9.3p392 :002 > b = Watir::Browser.start "stackoverflow.com"
 => #<Watir::Browser:0x7f93652a09b4f1a2 url="http://stackoverflow.com/" title="Stack Overflow"> 
```

### 定义一个新变量

```
1.9.3p392 :004 > a = b.span(:id, "hlinks-custom").a(:text, "about").href
 => "http://stackoverflow.com/about" 
```

### 点击另一个链接

```
 1.9.3p392 :005 > b.a(:text, 'faq').click
     => [] 
    1.9.3p392 :006 > b.title
     => "Frequently Asked Questions - Stack Overflow" 
```

### 最后将您的浏览器重定向到预设变量“a”

```
1.9.3p392 :007 > b.goto a
 => "http://stackoverflow.com/about" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T21:37:01.700

是的，有一种方法，只需在元素存在时保存它，然后再使用它。这是一个示例，其中 watir 开车到 google.com，当您看到“mark...”打印时，您可能会关闭浏览器并会看到变量“element”仍然保存其中的值...

```
 require 'watir';

  ie = Watir::Browser.new();
  ie.goto("google.com");
  puts("mark...");
  element = ie.span(:id, "gbqfsa").html();
  sleep(5);
  #close the browser while you sleep...
  puts(element); 
```

它打印元素的 html 值，因此它仍然保留引用

# php - Codeigniter - 上传图片，生成缩略图，将两个目录保存在数据库中

> ID：16130667
> 
> 赞同：0
> 
> 时间：2013-04-21T11:33:03.407
> 
> 标签：php, codeigniter

这是我的模型：

我收到以下错误

```
 Fatal error: Call to undefined method CI_Image_lib::data() in C:\xampp\htdocs\adcc\application\models\media_model.php on line 58 
```

**我的问题：**为什么我不能使用 data() 从保存的缩略图中获取 ['full_path'] （就像我为上传所做的那样）？

有一个更好的方法吗？谢谢！

```
public function set_media() {

        $config1 = array(
            'allowed_types' => 'jpg|jpeg|gif|png',
            'upload_path' => $this->gallery_path . '/images',
            'max_size' => 2048
        );

        $this->load->library('upload');
        $this->upload->initialize($config1);
        $this->upload->do_upload();

        $image_data = $this->upload->data();

        $config2 = array(
            'source_image' => $image_data['full_path'],
            'new_image' => $this->gallery_path . '/thumbs',
            'maintain_ratio' => true,
            'width' => 150,
            'height' => 100
        );

        $this->load->library('image_lib', $config2);
        $this->image_lib->resize();
        $image_data2 = $this->image_lib->data();

        $this->load->helper('url');

        $id = url_title($this->input->post('title'), 'dash', TRUE);

        $data = array(
            'id' => $id,
            'name' => $this->input->post('name'),
            'link' => $this->input->post('link'),
            'year' => $this->input->post('year'),
            'actors' => $this->input->post('actors'),
            'image' => $image_data['full_path'],
            'thumb' => $image_data2['full_path']
        );

        return $this->mongo_db->insert('media', $data);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:44:28.633

您无法从图像库上的 data() 获取 ['full_path'] ，因为`$this->image_lib`它不是上传库的实例，并且根本没有该方法（如错误消息所述）。

现在使用您的配置，image_lib 将以与原始图像相同的文件名创建新的调整大小的图像，并将其保存在您在 confing 中指定的目录下`new_image`。生成的完整路径将保存到`$full_dst_path`image_lib 的属性中，并且`$dest_folder`文件`$dest_image`夹和文件名也只有和。

因此，要使用这些，只需删除以下行：

```
$image_data2 = $this->image_lib->data(); // delete this line 
```

保存时只需写：

```
$data = array(
// ...
'thumb' => $this->image_lib->full_dst_path,
// ...
), 
```

处理 Upload 或 Image_lib 库可能返回的错误也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T13:43:05.893

在调整大小之前 ，您还需要初始化**image_lib配置数组的部分，这对我**[有用 https://stackoverflow.com/a/21187402/2897770](https://stackoverflow.com/a/21187402/2897770)

只需在加载**image_lib** $this->image_lib->initialize($config2);后添加它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-25T10:41:36.810

对于文件名：

```
$source_image_name = $this->image_lib->source_image;
                    $extension = strrchr($source_image_name , '.');
                    $name = substr($source_image_name , 0, -strlen($extension));                $thumbnail['thumbnail_image_name']$name.$image['thumb_marker'].$extension; 
```

# google-chrome - 如何以编程方式查找 Chrome 处理的内容类型？

> ID：16130668
> 
> 赞同：5
> 
> 时间：2013-04-21T11:33:23.763
> 
> 标签：google-chrome, google-chrome-extension, content-type

在 Google Chrome 扩展中，我希望能够以编程方式获取`Content-Type`它可以处理的所有 HTTP 的列表。例如，它处理的一些是`text/plain`,`text/html`和`application/pdf`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T19:56:57.253

查看 chrome 中的 MIME 类型映射

```
static const MimeInfo primary_mappings[] = {
  { "text/html", "html,htm" },
  { "text/css", "css" },
  { "text/xml", "xml" },
  { "image/gif", "gif" },
  { "image/jpeg", "jpeg,jpg" },
  { "image/webp", "webp" },
  { "image/png", "png" },
  { "video/mp4", "mp4,m4v" },
  { "audio/x-m4a", "m4a" },
  { "audio/mp3", "mp3" },
  { "video/ogg", "ogv,ogm" },
  { "audio/ogg", "ogg,oga,opus" },
  { "video/webm", "webm" },
  { "audio/webm", "webm" },
  { "audio/wav", "wav" },
  { "application/xhtml+xml", "xhtml,xht" },
  { "application/x-chrome-extension", "crx" },
  { "multipart/related", "mhtml,mht" }
};

static const MimeInfo secondary_mappings[] = {
  { "application/octet-stream", "exe,com,bin" },
  { "application/gzip", "gz" },
  { "application/pdf", "pdf" },
  { "application/postscript", "ps,eps,ai" },
  { "application/javascript", "js" },
  { "application/font-woff", "woff" },
  { "image/bmp", "bmp" },
  { "image/x-icon", "ico" },
  { "image/vnd.microsoft.icon", "ico" },
  { "image/jpeg", "jfif,pjpeg,pjp" },
  { "image/tiff", "tiff,tif" },
  { "image/x-xbitmap", "xbm" },
  { "image/svg+xml", "svg,svgz" },
  { "message/rfc822", "eml" },
  { "text/plain", "txt,text" },
  { "text/html", "shtml,ehtml" },
  { "application/rss+xml", "rss" },
  { "application/rdf+xml", "rdf" },
  { "text/xml", "xsl,xbl" },
  { "application/vnd.mozilla.xul+xml", "xul" },
  { "application/x-shockwave-flash", "swf,swl" },
  { "application/pkcs7-mime", "p7m,p7c,p7z" },
  { "application/pkcs7-signature", "p7s" }
}; 
```

如需进一步查找，您可以查看参考

[https://code.google.com/p/chromium/codesearch#chromium/src/net/base/mime_util.cc](https://code.google.com/p/chromium/codesearch#chromium/src/net/base/mime_util.cc)

* * *

### 编辑1：

是的，在 chrome 扩展 API 中无法直接访问此数据

但是您可以在 javascript 中构建 MIME 嗅探器类并为其提供支持的 Mime 类型，然后当用户要下载文件时，您可以针对支持的类型测试内容。

这是源代码中的单元测试。

[https://code.google.com/p/chromium/codesearch#chromium/src/net/base/mime_sniffer_unittest.cc](https://code.google.com/p/chromium/codesearch#chromium/src/net/base/mime_sniffer_unittest.cc)

* * *

通常所有浏览器都支持标准的 MIME 类型

[http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)

[http://reference.sitepoint.com/html/mime-types-full](http://reference.sitepoint.com/html/mime-types-full)

[http://www.freeformatter.com/mime-types-list.html](http://www.freeformatter.com/mime-types-list.html)

# installation - inno setup 编译的 exe 未在 Windows 8 64 位上安装应用程序，不支持的 16 位应用程序

> ID：16130669
> 
> 赞同：1
> 
> 时间：2013-04-21T11:33:25.117
> 
> 标签：installation, 64-bit, inno-setup, 16-bit, incompatibility

我使用 innoIDE v1.0.0.0078 创建了一个安装文件并将其发送给我们的客户，但他无法安装我们的 64 位应用程序。它不会加载设置，我收到消息：'不支持的 16 位应用程序。由于与 64 位版本的 Windows 不兼容，程序或功能“\??\C:\Setup.exe”无法启动或运行。请联系软件供应商，询问是否有 64 位 Windows 兼容版本可用。如何使安装程序在 64 位 Windows 上运行？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:34:14.500

Inno Setup 不是 16 位应用程序。因此，发生了以下两件事之一：

1.  下载已损坏，Windows 无法将其识别为有效应用程序。在这种情况下，让您的客户再次下载它（并检查您上传的版本，也许问题当时发生了）。

2.  您正在尝试从 Inno 脚本中运行 16 位子安装。重写您的设置以避免这样做。

# visual-c++ - 这四个版本中需要哪个 Microsoft Visual C++ 2008 运行时

> ID：16130673
> 
> 赞同：6
> 
> 时间：2013-04-21T11:34:04.323
> 
> 标签：visual-c++

我需要安装 Microsoft Visual C++ 2008 运行时 (x86)，但是当我搜索谷歌并调查此事时，我知道微软提供了 4 个不同版本的 Microsoft Visual C++ 2008 运行时

1.  Microsoft Visual C++ 2008 Redistributable Package (x86) 发布日期：11/29/2007

2.  Microsoft Visual C++ 2008 SP1 Redistributable Package (x86) 发布日期：9/16/2008

3.  Microsoft Visual C++ 2008 Service Pack 1 Redistributable Package ATL 安全更新发布日期：9/29/2010

4.  Microsoft Visual C++ 2008 Service Pack 1 Redistributable Package MFC 安全更新发布日期：6/7/2011

现在我应该下载哪个二进制文件，如果我下载第四个二进制文件，我应该能够运行使用第一个运行时构建的应用程序（上面提到：- 1\. Microsoft Visual C++ 2008 Redistributable Package (x86) -- 发布日期：11/ 29/2007)。

或者我应该按顺序一个一个地安装它们，你能指导我吗？

仅供参考：1.我在发布之前已经搜索了stackoverflow，但没有找到答案。2.我在google上搜索过这个词：- VC++ 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:03:54.967

直观的选择是正确的，安装最新版本。这些安装程序还部署发布者策略文件，该文件将要求任何旧版本的程序重定向到新版本。这是他们可以获得关键错误修复或激活安全更新的基本机制。

或者说得更直白一点，发布者政策是针对 DLL Hell 对策的对策。它们运行良好，我从未听说有人抱怨这些 DLL 的版本控制问题。更典型的 DLL Hell 问题是用旧版本覆盖 DLL，而这些并行 DLL 不会发生这种情况。当您的程序要求新版本时部署旧版本（查看 .manifest 文件）是失败的鲸鱼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:41:12.473

我会按时间顺序推荐所有这些。一些编写不佳的安装程序（是的.. InstallShield）使用二进制自定义操作，并且这些安装程序可能在清单中具有硬编码的依赖关系。它是轻量级的并且彼此不冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T12:39:10.167

> 1\. Microsoft Visual C++ 2008 Redistributable Package (x86) 发布日期：11/29/2007

这是使用 Visual Studio 2008 编译的 32 位 (x86) 应用程序所需要的。

> 2\. Microsoft Visual C++ 2008 SP1 Redistributable Package (x86) 发布日期：9/16/2008

与上述相同，只是它包括来自 Service Pack 1 (SP1) 的更新。如果您使用带有 Service Pack 1 的 Visual Studio 2008 编译了应用程序，请使用这个而不是上面的那个。

Visual Studio 的版本和服务包级别可以从 IDE 内部的 Help -> About 中检查。

> 3\. Microsoft Visual C++ 2008 Service Pack 1 Redistributable Package ATL 安全更新发布日期：9/29/2010
> 
> 4\. Microsoft Visual C++ 2008 Service Pack 1 Redistributable Package MFC 安全更新发布日期：6/7/2011

从名称上我无法判断这两个是否只是对上述可再发行软件包的可选更新，或者它们是否包括完整的可再发行软件包*加上*可选更新。

无论哪种方式，只有当您的应用程序是用 ATL 或 MFC 编写时才需要它们。

* * *

如果这太令人困惑，请注意，在分发应用程序时，您甚至不需要使用任何这些可再分发的安装程序。您只需将所需的运行时 DLL 与可执行文件放在同一文件夹中，它就会运行良好。

作为 Visual Studio 安装的一部分，所需库的正确版本将复制到您的计算机。您将在以下目录中找到它们：

```
<Program Files folder>\Microsoft Visual Studio 9.0\VC\redist\x86 
```

# python - re.sub() 后字符集错误

> ID：16130675
> 
> 赞同：4
> 
> 时间：2013-04-21T11:34:12.540
> 
> 标签：python, regex, python-2.7

我有这个代码

```
import chardet, re    

content = "Бланк свидетельства о допуске."
print content
print chardet.detect(content)
content = re.sub(u"(?i)[^-0-9a-zа-яё«»\&\;\/\<\>\.,\s\(\)\*:!\?]", "", content)
print content
print chardet.detect(content) 
```

并输出

```
Бланк свидетельства о допуске.
{'confidence': 0.99, 'encoding': 'utf-8'}
� �  .
{'confidence': 0.5, 'encoding': 'windows-1252'} 
```

我究竟做错了什么？之后如何获得 uft-8 字符串`re.sub()`？(Python 2.7, `# coding: utf-8`, UTF-8 文件, IDE Pycharm)。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T11:47:37.493

这就是（我认为）您想要实现的目标（为了清楚起见，我简化了正则表达式）：

```
#coding=utf8
import re    
content = u"Бланк XYZ свидетельства о ???допуске."
content = re.sub(u"(?iu)[^а-яё]", ".", content)
print content.encode('utf8') # Бланк.....свидетельства.о....допуске. 
```

注意要点：

*   主题是 unicode
*   表达式是 unicode
*   该表达式使用 unicode 标志`(?u)`来进行大小写折叠。

此外，对于严肃的 unicode 工作，我推荐使用[regex](https://pypi.python.org/pypi/regex/)模块，它提供了出色且几乎完整的 unicode 支持。考虑：

```
# drop everything except Cyrillic and spaces 
import regex
content = regex.sub(u'[^\p{Cyrillic}\p{Zs}]', '', content) 
```

虽然它[记录](http://docs.python.org/2/library/re.html)了`re.UNICODE`只有改变`\w`和朋友，但在我的测试中它也影响案例折叠（`re.IGNORECASE`）：

```
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> src = u'Σσ Φφ Γγ'
>>> src
u'\u03a3\u03c3 \u03a6\u03c6 \u0393\u03b3'
>>> re.sub(ur'(?i)[α-ώ]', '-', src)
u'\u03a3- \u03a6- \u0393-'
>>> re.sub(ur'(?iu)[α-ώ]', '-', src)
u'-- -- --' 
```

所以这要么是一个未记录的功能，要么是一个文档问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:37:56.237

您的输入是 UTF-8：

```
>>> content
'\xd0\x91\xd0\xbb\xd0\xb0\xd0\xbd\xd0\xba \xd1\x81\xd0\xb2\xd0\xb8\xd0\xb4\xd0\xb5\xd1\x82\xd0\xb5\xd0\xbb\xd1\x8c\xd1\x81\xd1\x82\xd0\xb2\xd0\xb0 \xd0\xbe \xd0\xb4\xd0\xbe\xd0\xbf\xd1\x83\xd1\x81\xd0\xba\xd0\xb5.' 
```

但是您使用的是*unicode*正则表达式。该表达式直接与 UTF-8 输入的原始字节匹配。

在所有这些字节中，只有空格、句号和`\xbb`字节（作为`»`字符）不会被删除。其余的单个字节被删除，因为它们不属于您的否定字符类`[^...]`。

正确使用 Unicode（首先解码`content`为 un​​icode）有效：

```
>>> re.sub(u"(?i)[^-0-9a-zа-яё«»\&\;\/\<\>\.,\s\(\)\*:!\?]", "", content.decode('utf8'))
u'\u043b\u0430\u043d\u043a \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u043e \u0434\u043e\u043f\u0443\u0441\u043a\u0435.'
>>> print re.sub(u"(?i)[^-0-9a-zа-яё«»\&\;\/\<\>\.,\s\(\)\*:!\?]", "", content.decode('utf8'))
ланк свидетельства о допуске. 
```

另一种方法是对正则表达式使用原始字节字符串，并匹配*字节组合*。确定哪些 UTF-8 字节和范围是有效的非常*非常***棘手**。您需要*完全*了解[UTF-8 如何将字符编码为多个字节](http://en.wikipedia.org/wiki/UTF-8)，然后将您的否定字符类转换为一组允许通过相同字节组合的*肯定匹配。*这**不**适合胆小的人。

# c# - ASP.net GridView - 使用数据源 - C#

> ID：16130677
> 
> 赞同：3
> 
> 时间：2013-04-21T11:34:17.067
> 
> 标签：c#, asp.net, datasource

我在链接到数据源（业务逻辑中的类）的 ASP 网站中使用 showGrid。dataSource 有两种方法——检索和更新。

当我更新 showGrid 上的项目时，它会自动将更新行的参数发送到该方法，然后我使用该方法更新数据库。

如何向表示逻辑返回一条消息，说明它已成功更新？一切都是自动完成的，我什至不使用 GridView1_RowUpdating 处理程序，也找不到 showGrid 和 dataSource 之间的通信方式。

这就是我将方法添加为 showGrid 的数据源的方式 ![这就是我向 showGrid 添加数据源的方式](https://i.stack.imgur.com/mo0EF.png)

这就是 get 被调用的函数

```
 public bool UpdateSpecificSubject(string sj_name, string sJ_descr, Int32 sj_max_enrollment_no, bool sj_avail, string sj_prerequisite_no, string sj_id)
    {
        try
        {

            SubjectsDSTableAdapters.subjectsTableAdapter subjectsAdapter1 = new SubjectsDSTableAdapters.subjectsTableAdapter();
            subjectsAdapter1.UpdateOneSubject(sj_name, sJ_descr, sj_max_enrollment_no, sj_avail, sj_id);
            subjectsAdapter1.UpdatePrerequisite(sj_prerequisite_no, sj_id);
            return true;

        }

        catch (Exception)
        {
            Console.Write("Error in connecting to Subjects table");
            return false;

        }

    } 
```

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:09:42.747

我有同样的问题。看起来您需要使用事件 onUpdated 和 Oninserted 来引用您在代码中使用的 ObjectDataSource。然后 ObjectDataSourceStatusEventArgs 将返回值作为 e.ReturnValue。

```
<asp:ObjectDataSource OnUpdated="ObjectDataSourceStatusEventHandler" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:53:00.947

要了解 grdiview 和数据源的工作原理，您需要阅读本文

因为你正在绑定类所以现在你只需要关注 objectdatasource

[这是 MSDN 文章....](http://msdn.microsoft.com/en-us/library/aa479341.aspx)

要从您的类中的函数获取返回值.. 请实现以下事件更新和插入 ObjectDataSource。和 ObjectDataSourceStatusEventArgs 事件参数将返回值作为 e.ReturnValue。

```
 <asp:ObjectDataSource OnUpdated="ObjectDataSourceStatusEventHandler" /> 
```

# drupal-7 - 如何确保预加载器不会显示在每个页面上？预加载JS

> ID：16130681
> 
> 赞同：0
> 
> 时间：2013-04-21T11:34:32.320
> 
> 标签：drupal-7, preloader, easeljs

我正在使用 preloadJS 预加载我的网站，但是当转到其他页面时，我想获得预加载器的棒（因为整个网站已经加载），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:11:48.790

您可以`localStorage`在第一次预加载后使用 cookie 并设置一个标志，每当再次进入页面时，您都必须检查是否设置了标志并隐藏预加载过程。要设置标志，`localStorage`您也可以使用 jQuery cookie 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

* * *

不过，我的**问题**是：为什么要为具有页面更改功能的页面预加载所有内容？在我看来，这有点违背目的。- 你到底在预加载什么？

# database - Laravel：Schema builder 和 Eloquent 有什么区别吗？

> ID：16130684
> 
> 赞同：2
> 
> 时间：2013-04-21T11:34:58.037
> 
> 标签：database, schema, laravel, builder, eloquent

我是 Laravel 的新手。因此，如果我可以使用 Schema builder 生成表，然后使用类似的查询来查询数据`DB::table('user')->find(1)`，那么 Eloquent 适合整个场景的哪个位置？它的用途是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T11:44:39.640

Eloquent 是Laravel 附带的 ORM（[对象关系映射）的名称。](http://en.wikipedia.org/wiki/Object-relational_mapping)Eloquent 允许您与表进行交互，就好像它们是对象一样，但是 Eloquent 不知道您表中的实际列。

让我们考虑简单的`User`模型。我们希望这个模型能够查询我们`users`表上的记录。

```
class User extends Eloquent {

    protected $table = 'users';

} 
```

有一个*非常*简单的模型。现在，而不是像这样查询。

```
$user = DB::table('user')->find(1); 
```

可以这样查询。

```
$user = User::find(1); 
```

Eloquent 本身使用自己的查询构建器，但确实回退到标准查询构建器。这意味着它可以使用查询生成器上的所有方法，等等。

这里的好处是：

1.  您不必在每次调用时都指定您的表名。
2.  代码读起来好多了，它是语法糖。
3.  您可以在表之间创建复杂的关系并使用预加载。
4.  您可以使用批量分配保护和 setter/getter 等功能。
5.  您还可以获得使用查询构建器的所有好处，因此您可以轻松地在 DBMS 之间切换。

我只提到了 Eloquent。它还有很多。我建议你看看以下资源。

*   [雄辩的文档](http://laravel.com/docs/database/eloquent)
*   [Dayle Rees 的快乐代码](http://codehappy.daylerees.com/eloquent-orm)
*   [Laravel.io：流利和雄辩](http://laravel.io/topic/17/what-are-fluent-and-eloquent)

# oracle - Oracle 游标的返回类型

> ID：16130685
> 
> 赞同：4
> 
> 时间：2013-04-21T11:35:06.453
> 
> 标签：oracle, plsql

我想声明以下游标：

```
CURSOR some_cursor RETURN oks_trips.trip_id % TYPE IS
    SELECT trip_id FROM oks_trips; 
```

但我得到一个错误：

```
Error(5,36): PLS-00320: the declaration of the type of this expression is incomplete or malformed 
```

oks_trips.trip_id 类型是`NUMBER(3, 0)`，所以我只尝试了 NUMBER 而不是，`oks_tripd.trip_id % TYPE`但我仍然得到错误。

我不能省略该`RETURN`语句，因为我在包中声明游标，而 oracle 要求它在那里。

所以问题是*为什么*我不能在游标的子句中使用`NUMBER`或？`some_field % TYPE``RETURN`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T19:43:12.523

[从概念指南](http://docs.oracle.com/cd/E15586_01/server.1111/e25789/srvrside.htm#sthref1038)：

> 您可以在过程、函数或包中显式声明游标，以促进 Oracle 数据库数据的面向记录的处理。PL/SQL 引擎也可以隐式声明游标。

重要的短语是“面向记录”。显式游标声明的[语法](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/explicit_cursor.htm)也清楚地表明返回类型必须是 a `rowtype`，它定义为：

> 游标返回的行的数据类型。

您要求它返回单列的数据类型，而不是行/记录的数据类型。如果您不想使用现有的，`%ROWTYPE`那么 Oracle 提供了声明记录类型的机制，正如另一个答案已经显示的那样。

您似乎在抱怨文档没有说您不能使用标量值作为返回值。它也没有说你不能返回一个包、一个视图或一个角色。它不需要详尽地列出您*不能*做的所有事情，因为它清楚地告诉您确切*可以*做什么，即返回一个表示行的类型。

在您的情况下，行类型只需要包含一列，但是仍然没有理由您应该能够（或期望 Oracle）让您在这种非常有限的情况下走捷径。提供单一一致的机制似乎并非不合理 - 声明 . 对您来说并不是什么困难`record`，而他们为此构建、测试和维护单独的路径将是相当大的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:24:13.413

```
CREATE OR REPLACE PACKAGE mypackage AS
   TYPE rec IS RECORD (trip_id oks_trips.trip_id % TYPE);
   CURSOR some_cursor RETURN rec;
END;
/

CREATE OR REPLACE PACKAGE BODY mypackage AS
   CURSOR some_cursor RETURN rec IS
   SELECT trip_id FROM oks_trips;
END;
/ 
```

# c++ - c++ 中的等效 open(file, O_NONBLOCK)

> ID：16130686
> 
> 赞同：1
> 
> 时间：2013-04-21T11:35:27.637
> 
> 标签：c++, c, file-io

我想以 NONBLOCk 模式读取文件，但目前我使用 C 函数打开/读取/写入/关闭。所以，我问是否有可能在 C++ 中做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T08:41:11.730

嗨，C++ 语言和标准库没有非阻塞 io 的概念，因此不等同于打开非阻塞，您只需按原样使用 libc api 的函数。您可以做的是将该 api 包装在资源管理器 C++ 类 (RAII) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:03:00.237

就在这里。

您可以包含文件`<fstream>`或`<istream>`使用`fstream`对象或`istream`对象来打开和读取文件。

例如：`fstream A("HI",ios::in)`

或者：`istream A("HI")`

因为默认是`ios::in`对象`istream`。

# java - 为什么在我最大化窗口后显示 JButton 和 JTextField？

> ID：16130689
> 
> 赞同：1
> 
> 时间：2013-04-21T11:35:43.170
> 
> 标签：java, swing, user-interface, layout-manager, null-layout-manager

我尝试用 Netbeans 制作计算器。但是直到我最大化窗口，计算器的组件才会显示。为什么？

这是源代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class Kalkulator extends JFrame implements ActionListener {

    JTextField tampilan;
    JLabel label;
    JButton tom1, tom2, tom3, tom4, tom5, tom6, tom7, tom8, tom9, tom0,
            tompl, tomkr, tombg, tomkl, tomsd, tomac;
    double hasil, bil1, bil2;
    String tanda;

    public Kalkulator() {
//DESAIN
//FRAME
        super("Kalkulator");
        this.setSize(350, 350);//mengatur size frame
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//membuat program berhenti ketika close diklik
        this.setVisible(true);//membuat GUI jadi tampak
        this.getContentPane().setLayout(null);//tidak menggunakan layout apapun, sehingga ukuran konten harus diatur secara manual

//signature
        label = new JLabel();
        label.setText("Created By NovusZ");//setText untuk mengatur teks dari pada label
        label.setBounds(20, 250, 150, 100);//setBounds untuk mengatur posisi dan besar dari objek yang dimaksud
        this.getContentPane().add(label);//menambahkan objek yang dimaksud kedalam frame
//LAYAR
//tampilan
        tampilan = new JTextField();
        tampilan.setBounds(10, 20, 300, 40);
        tampilan.setBackground(Color.WHITE);
        tampilan.setForeground(Color.BLUE);
        this.getContentPane().add(tampilan);

//TOMBOL
//Tombol1
        tom1 = new JButton("1");
        tom1.setBounds(10, 70, 45, 30);
        this.getContentPane().add(tom1);
//Tombol2
        tom2 = new JButton("2");
        tom2.setBounds(10 + 60, 70, 45, 30);
        this.getContentPane().add(tom2);
//Tombol3
        tom3 = new JButton("3");
        tom3.setBounds(10 + 120, 70, 45, 30);
        this.getContentPane().add(tom3);
//Tombol4
        tom4 = new JButton("4");
        tom4.setBounds(10, 70 + 40, 45, 30);
        this.getContentPane().add(tom4);
//Tombol5
        tom5 = new JButton("5");
        tom5.setBounds(10 + 60, 70 + 40, 45, 30);
        this.getContentPane().add(tom5);
//Tombol6
        tom6 = new JButton("6");
        tom6.setBounds(10 + 120, 70 + 40, 45, 30);
        this.getContentPane().add(tom6);
//Tombol7
        tom7 = new JButton("7");
        tom7.setBounds(10, 70 + 80, 45, 30);
        this.getContentPane().add(tom7);
//Tombol8
        tom8 = new JButton("8");
        tom8.setBounds(10 + 60, 70 + 80, 45, 30);
        this.getContentPane().add(tom8);
//Tombol9
        tom9 = new JButton("9");
        tom9.setBounds(10 + 120, 70 + 80, 45, 30);
        this.getContentPane().add(tom9);
//Tombol0
        tom0 = new JButton("0");
        tom0.setBounds(10, 70 + 120, 165, 30);
        this.getContentPane().add(tom0);
//TombolPLUS
        tompl = new JButton("plus");
        tompl.setBounds(10 + 200, 70, 100, 30);
        this.getContentPane().add(tompl);
//Tombolkurang
        tomkr = new JButton("Kurang");
        tomkr.setBounds(10 + 200, 70 + 40, 100, 30);
        this.getContentPane().add(tomkr);
//Tombolbagi
        tombg = new JButton("BAGI");
        tombg.setBounds(10 + 200, 70 + 80, 100, 30);
        this.getContentPane().add(tombg);
//TombolSAMADENGAN
        tomkl = new JButton("kali");
        tomkl.setBounds(10 + 200, 70 + 120, 100, 30);
        this.getContentPane().add(tomkl);
//TombolSAMADENGAN
        tomsd = new JButton("(HASIL)");
        tomsd.setBounds(10 + 200, 70 + 160, 100, 30);
        this.getContentPane().add(tomsd);
//Tombolreset
        tomac = new JButton("Reset");
        tomac.setBounds(10, 70 + 160, 165, 30);
        this.getContentPane().add(tomac);

        tom1.addActionListener(this);
        tom2.addActionListener(this);
        tom3.addActionListener(this);
        tom4.addActionListener(this);
        tom5.addActionListener(this);
        tom6.addActionListener(this);
        tom7.addActionListener(this);
        tom8.addActionListener(this);
        tom9.addActionListener(this);
        tom0.addActionListener(this);
        tompl.addActionListener(this);
        tomkr.addActionListener(this);
        tomkl.addActionListener(this);
        tomsd.addActionListener(this);
        tombg.addActionListener(this);
        tomac.addActionListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        //event
        //input
        if (e.getSource() == tom1) {
            tampil("1");
        } else if (e.getSource() == tom2) {
            tampil("2");
        } else if (e.getSource() == tom3) {
            tampil("3");
        } else if (e.getSource() == tom4) {
            tampil("4");
        } else if (e.getSource() == tom5) {
            tampil("5");
        } else if (e.getSource() == tom6) {
            tampil("6");
        } else if (e.getSource() == tom7) {
            tampil("7");
        } else if (e.getSource() == tom8) {
            tampil("8");
        } else if (e.getSource() == tom9) {
            tampil("9");
        } else if (e.getSource() == tom0) {
            tampil("0");
        } //tombol reset
        else if (e.getSource() == tomac) {
            hasil = 0;
            bil1 = 0;
            bil2 = 0;
            tanda = "";
            tampilan.setText("");
            tampil("");
        } //tombol +
        else if (e.getSource() == tompl) {
            tanda = "+";//membuat tanda sebagai detektor untuk mengetahui operasi apa yang dipergunakan
            bil1 = Double.parseDouble(tampilan.getText());//mengisi nilai bil1 dari nilai yang ada di tampilan
            tampilan.setText("");
            tampilan.setBackground(Color.YELLOW);
            tampilan.setForeground(Color.BLUE);
//tombol -
        } else if (e.getSource() == tomkr) {
            tanda = "-";
            bil1 = Double.parseDouble(tampilan.getText());
            tampilan.setText("");
            tampilan.setBackground(Color.YELLOW);
            tampilan.setForeground(Color.BLUE);
        } //tombol X
        else if (e.getSource() == tomkl) {
            tanda = "x";
            bil1 = Double.parseDouble(tampilan.getText());
            tampilan.setText("");
        } //tombol bagi
        else if (e.getSource() == tombg) {
            tanda = "/";
            bil1 = Double.parseDouble(tampilan.getText());
            tampilan.setText("");
            tampilan.setBackground(Color.YELLOW);
            tampilan.setForeground(Color.BLUE);
        } else if (e.getSource() == tomsd) {
            bil2 = Double.parseDouble(tampilan.getText());//mengisi nilai bil2 dengan nilai yang ada pada tampilan setelah tombol tanda operasi ditekan
            tampilan.setBackground(Color.WHITE);
            tampilan.setForeground(Color.BLUE);

            //operasi perhitungan
            //operasi penjumlahan
            if (tanda.equals("+")) {
                hasil = bil1 + bil2;
                tampilan.setText("" + hasil);
                tampilan.setForeground(Color.YELLOW);
                tampilan.setBackground(Color.BLUE);
            }//operasi pengurangan
            else if (tanda.equals("-")) {
                hasil = bil1 - bil2;
                tampilan.setText("" + hasil);
                tampilan.setForeground(Color.YELLOW);
                tampilan.setBackground(Color.BLUE);
            }//operasi perkalian
            else if (tanda.equals("x")) {
                hasil = bil1 * bil2;
                tampilan.setText("" + hasil);
                tampilan.setForeground(Color.YELLOW);
                tampilan.setBackground(Color.BLUE);
            }//operasi pembagian
            else if (tanda.equals("/")) {
                hasil = bil1 / bil2;
                tampilan.setText("" + hasil);
                tampilan.setForeground(Color.YELLOW);
                tampilan.setBackground(Color.BLUE);
            }
       }
    }

    public static void main(String[] args) {
        Kalkulator x = new Kalkulator();
    }

    public void tampil(String teks) {//membuat method utk menampilkan apa yang telah ditekan pada tombol
        tampilan.setText(tampilan.getText() + teks);//set tulisan pada label tampilan. yang diisikan adalah teks yang sudah ditetapkan pada masing-masing tombol dan teks sebelumnya yang sudah ditekan
    }
} 
```

作为参考，这就是 GUI 的外观。

![计算器](https://i.stack.imgur.com/Kwe8L.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:33:05.863

正如对现已删除的答案的评论中所述，组件未显示的原因是因为在添加它们之前将 GUI 设置为可见，并且没有后续调用会导致框架正确布局，它们会没出现。

这是所需 GUI 的粗略复制品。阅读评论中的提示。根据需要调整`int p`更多或更少的空间。

![在此处输入图像描述](https://i.stack.imgur.com/TrSRQ.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class Kalkulator {

    public Component getGUI() {
        // layout padding
        int p = 10;
        // the GUI as seen by the user (without frame)
        JPanel gui = new JPanel(new BorderLayout(p,p));
        gui.setBorder(new EmptyBorder(8, 8, 8, 8));

        JTextField tf = new JTextField(10);
        tf.setFont(tf.getFont().deriveFont(22f));
        gui.add(tf, BorderLayout.PAGE_START);

        JLabel l = new JLabel("Crafted with Luv - by monsters");
        gui.add(l, BorderLayout.PAGE_END);

        JPanel lhs = new JPanel(new BorderLayout(p,p));
        gui.add(lhs, BorderLayout.CENTER);

        JPanel numpad = new JPanel(new GridLayout(3,3,p,p));
        lhs.add(numpad, BorderLayout.CENTER);
        for (int ii=1; ii<10; ii++) {
            numpad.add(new JButton("" + ii));
        }
        JPanel extraButtons = new JPanel(new GridLayout(0,1,p,p));
        lhs.add(extraButtons, BorderLayout.PAGE_END);
        extraButtons.add(new JButton("0"));
        extraButtons.add(new JButton("Reset"));

        JPanel rhs = new JPanel(new GridLayout(0,1,p,p));
        rhs.add(new JButton("plus"));
        rhs.add(new JButton("Kurang"));
        rhs.add(new JButton("BAGI"));
        rhs.add(new JButton("kali"));
        rhs.add(new JButton("(HASIL)"));
        gui.add(rhs, BorderLayout.LINE_END);

        return gui;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                Kalkulator k = new Kalkulator();   

                JFrame f = new JFrame("Kalkulator");
                f.add(k.getGUI());
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# html - 该标签是不是默认不显示的常规标签

> ID：16130690
> 
> 赞同：8
> 
> 时间：2013-04-21T11:35:55.123
> 
> 标签：html

在 Chrome 中查看网页时，我注意到该`<head>`标签已`{display: none;}`分配了 CSS。

这让我想到，`<head>`标签只是浏览器决定不显示的常规标签吗

即使这没有明显的用处，我是否可以使用`<cheese>`标签代替`<head>`标签并使用 css`"cheese {display: none;}"`来实现与标签相同的功能`<head>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T11:40:22.523

## `<head>`和`display:none`

是的，该`<head>`标签是一个常规标签，就像任何其他应用了默认用户代理样式表的标签一样`display:none;`。我很酷的技巧，你可以证明这是展示你的风格：

[jsFiddle](http://jsfiddle.net/Tznvp/)

```
head,
style {
    display:block;
} 
```

为了获得额外的乐趣，您可以添加`contenteditable`到您的 head 标签中，以便您可以从页面内编辑页面的样式。

[jsFiddle](http://jsfiddle.net/Tznvp/1/)

## `<cheese>`

至于创建一些随机标签，如`<cheese>`，这不会按预期工作（很可能不会），因为浏览器并不期待它。当您在 HTML 中做不在规范中的事情时，它可能不会以标准方式处理。

例如，当您尝试在旧版本的 IE 中使用新的 HTML5 语义标签（、、、`<section>`... `<nav>`）时，它们无法识别它们并导致页面乱码。引入 Modernizr 应用了一些 polyfill 来解决这个问题并模拟常规的`<div>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:39:49.837

就纯显示而言 - 是的`{display:none;}`将隐藏您的元素。

然而，HTML`<head>`在 HTML 中作为 head 元素的容器具有独特的含义，`<cheese>`但并不共享这一点。

浏览器知道它不会被显示，并且搜索引擎爬虫*了解*`<head>`标签的特殊含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:41:53.063

浏览器呈现包含在标签对中的文档*正文。*`<body></body>`这是呈现和显示的文档部分。

HTML 定义了自己的一组标签和属性，这些标签和属性构成了该语言。文档类型声明 (DTD) 定义了所附文档使用的标记和属性集。因此，当您的 DTD 用于 HTML5 时，您可以使用 HTML5 特定的标签和属性（或者更确切地说，您*应该*和浏览器也应该这样做）。

因此，如果您想将自己的标签添加到组合中，例如`<cheese>`可以将其放在文档中的任何位置，如果它在`<body></body>`标签对中，则浏览器更有可能按字面意思呈现标签（因为它不是 HTML 的一部分，它不知道该怎么办）。

如果将它添加到`<body></body>`标签之前，那么您的文档将不会*形成良好*的格式（即，它不遵循 HTML 文档类型的规则），但它不会影响浏览器呈现的内容。

# iphone - 如何在 Objective-C iOS 中利用 iPhone 5 上的 ARMv7s？

> ID：16130696
> 
> 赞同：1
> 
> 时间：2013-04-21T11:36:35.567
> 
> 标签：iphone, ios, objective-c, ios6

我想知道如何真正利用 iPhone 5 的 ARMv7s 架构？

Objective-C 中是否有特定指令仅适用于该架构，或者是否有标志强制它使用 armv7s 并运行得更快？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:47:09.760

[如App Distribution Guide](https://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/AppDistributionGuide/ConfiguringYourApp/ConfiguringYourApp.html)中所述，将项目的构建架构设置为“armv7”和“armv7s”（这应该是新项目的默认设置）。编译器将负责选择最佳指令以利用`armv7s`配置文件。

# sql-server-2008 - 使用 SQL Server 2008 备份我的架构和数据库对象

> ID：16130697
> 
> 赞同：0
> 
> 时间：2013-04-21T11:36:37.480
> 
> 标签：sql-server-2008, tsql, schema, backup

我有一个数据库，它有一个名为lamb 的模式，它有许多数据库对象。我只想备份与lamb 模式关联的对象和数据，而不是其余的。

这可能吗 ？？？如果有怎么办？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:48:56.100

除非您更改他们的文件组并为他们创建文件组，否则这是不可能的，请阅读此[备份概述 (SQL Server)](http://technet.microsoft.com/en-us/library/ms175477.aspx)了解更多详细信息。

# php - php pdo 只从 mysql 获取一个值；等于变量的值

> ID：16130698
> 
> 赞同：9
> 
> 时间：2013-04-21T11:36:50.777
> 
> 标签：php, mysql, pdo

我已经定义了变量 $row_id1（例如 $row_id1 = 1;）

在 mysql 中是名为 Number 的列。

想要选择列 Number 并且如果列中存在 $row_id，想要获取（获取、定义）该值。实际上想检查列 Number 中是否存在 $row_id 值。

代码有什么问题？

```
$stmt = $db->prepare("SELECT Number FROM 2_1_journal WHERE Number = :Number1");
$stmt->bindParam(':Number1', $row_id1); //value from $_POST
$stmt->execute();
$Number1 = $stmt->fetchAll(PDO::FETCH_ASSOC); // seems here something is wrong

echo $Number1 .' $Number1<br>'; 
```

在输出中我得到 Array $Number1

好像简单（愚蠢）的问题，但搜索了几个小时却没有解决方案

++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++

**更新代码**

此部分与问题无关（仅供参考）

```
require($_SERVER['DOCUMENT_ROOT'] . "/_additionally_protected/session.class.php"); 
$session = new session();
// Set to true if using https
$session->start_session('_a', false);

session_regenerate_id();

//require($_SERVER['DOCUMENT_ROOT'].'/_additionally_protected/request_blocker.php');  //slow page load

require($_SERVER['DOCUMENT_ROOT'].'/_measure_time_start.php');

require($_SERVER['DOCUMENT_ROOT'].'/_additionally_protected/db_config.php');
header('Content-type: text/html; charset=utf8');

require($_SERVER['DOCUMENT_ROOT'] . "/only_private/blackhole.php");

ini_set('session.bug_compat_warn', 0);
ini_set('session.bug_compat_42', 0); 
```

这与问题有关（这里我从输入中获取值）

```
if(get_magic_quotes_gpc())
$row_id1 = htmlspecialchars(stripslashes($_POST['row_id1']));
else
$row_id1 = htmlspecialchars($_POST['row_id1']);
echo $row_id1 .' row_id1 from $_POST<br>'; 
```

连接到 mysql

```
try {
$db = new PDO("mysql:host={$dbhost};dbname={$dbname};charset=utf8", $dbuser, $dbpass//, array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
, array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
//echo "Connected to database"; // check for connection
}
catch(PDOException $ex) {
//echo "An Error occured!"; //user friendly message
//print "Error!: " . $ex->getMessage() . "<br/>";
//some_logging_function($ex->getMessage());
exit;
} 
```

在这里，我从 mysql 获取最后一行编号。稍后我将数字+1 传递给 html 隐藏的 iput 字段。我的意思是在页面加载时我得到最后一个数字。如果用户单击按钮不执行代码。

```
//fetch last Number to pass to row_id and entry_id
if( !$_POST['register'] ) {
echo '!$_POST[register] <br>';
//+++++++++++++ now multiple PDO

// Select table with query
$stmt = $db->query("
SELECT Number FROM 2_1_journal ORDER BY Number DESC LIMIT 1
");
// Set fetching mode
$stmt->setFetchMode(PDO::FETCH_ASSOC);
// Assign $row as your key to access Table fields
foreach ($stmt as $row) :
echo $row['Number'] .' $row[Number] On page load (reload) get number of last row in   mysql; to pass to Entry ID and rowid<br>';
$_SESSION['last_number_from_mysql'] = $row['Number'];
endforeach;
}//if( !$_POST['register'] ) { 
```

**会议（上）**

**这是对我造成问题的部分** // 从数据库中获取数字以与行 ID（隐藏）进行比较。旨在决定是否需要记录新行或是否更新现有行。代码在 $_POST 上执行。所以必须定义 $row_id （上面定义）

```
if( $_POST['register'] ) { 
```

如果用户只点击按钮然后执行代码

```
echo $row_id1 .' row_id1 before select Number where Number is $row_id1<br>'; 
```

这是要检查的。我看到 row_id1 号码；这意味着该号码已收到。就在下面想用它

```
$stmt = $db->prepare("SELECT Number FROM 2_1_journal WHERE Number = :Number1"); 
$stmt->bindParam(':Number1', $row_id1);
$stmt->execute();
echo $Number1 = $stmt->fetchColumn() .' $Number1<br>'; 
```

仅当两次单击按钮时才会回显

这是html输入

```
<input type="tex" name="row_id1" id="row_id1" value="
<?php
//if( ($_POST['register']) === 'Save draft' ) {
//echo $_POST['row_id1'];
//}
//else {
echo ($_SESSION['last_number_from_mysql'] + 1);
//}
?>
"> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T11:53:14.040

您必须根据您想要的结果使用 fetch 功能。

1.  如果您需要单个标量值，则不需要列名：

    ```
     $Number1 = $stmt->fetchColumn(); 
    ```

2.  如果要返回的结果很多，但每行只有一列，则不需要再次输入列名：

    ```
     $numbers = $sth->fetchAll(PDO::FETCH_COLUMN); 
    ```

    它将返回一个数字数组。

3.  如果您需要具有多个值的单行，请使用`fetch()`

4.  如果您需要行数组，请使用`fetchAll()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T11:40:51.717

第一次改变

```
$Number1 = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

至

```
$Number1 = $stmt->fetch(PDO::FETCH_ASSOC); 
```

因为我相信你只检索 1 行..

你会得到你的号码

```
echo $Number1['Number'] 
```

丁斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T11:39:27.773

尝试

```
echo $Number1['Number'] .'<br>'; 
```

# django - Django安全过滤器删除

> ID：16130701
> 
> 赞同：0
> 
> 时间：2013-04-21T11:37:21.227
> 
> 标签：django, django-template-filters

这是我从 wiki 标记制作表格的代码：

```
def htmlize(str=''):
    # print 'in htmlize',str.encode('koi8-r')
    links = re.findall(r'https?://\S*',str)
    # links += re.findall(r'https://\S*',str)       
    html = ''
    inBold = False
    inItalic = False
    # для таблицы
    inTable = False
    inRow = False
    inCell = False
    tegs = {True:'</', False:'<'}
    count = 0
    while count < len(str):
        #print count,'||',str[count],'||',inTable,'||',inRow,'||',inCell,'||'
        if str[count] == '\n' and not inTable:
            html += '<br />'
        elif str[count] == '*' and count+1<len(str) and str[count+1] != '*':
            html = html + tegs[inBold] + 'b>'
            inBold = not inBold
        elif str[count] == '*' and count+1<len(str) and str[count+1] == '*':
            html = html + tegs[inItalic] + 'i>'
            count +=1
            inItalic = not inItalic
        elif str[count] == '*' and inBold:
            html = html + '</b>'
        elif str[count] == '\\' and count+1==len(str):
            html += '\\'
        elif str[count] == '\\':
            html += str[count+1]
            count += 1
        elif str[count] == '<':
            html += '&lt'
            # count +=1
        elif str[count] == '>':
            html += '&gt'
            count +=1
        elif str[count] == '&':
            html += '&amp'
            # count +=1
        # обработка создания таблиц
        elif count+3<len(str) and str[count]=='|' and str[count+1]=='|':
            # обрабатываем создание начала таблицы
            if (str[count-1]=='\n' or count-1<0) and not inTable:
                html += '<table border="1"><tr><td>'
                inTable = True
                inRow = True
                inCell = True
            elif inTable and not inRow:
                html += '<tr><td>'
                inRow = True
                inCell = True
            elif inCell:
                if str[count+2]!='\n':
                    html+='</td><td>'
                    inCell = True
                if str[count+2] == '\n':
                    html+='</td></tr>'
                    inCell = False
                    inRow=False
                    count+1
                    if str[count+3]!='|':
                        html+='</table>'
                        inTable=False
            count+=1
        elif (count+2>=len(str) and inTable) or (count+3<len(str) and str[count+2]=='\n' and inTable and str[count+3]!='|'):
            if inCell:
                html += '</td>'
                inCell = False
            if inRow:
                html += '</tr>'
                inRow = False
            html+='</table>'
            inTable = False
            count+=1

        else:
            html += str[count]
        count +=1
    for link in links:
        html = html.replace(link.replace('&','&amp'),'<a href='+link+'>'+link+'</a>')
    return html 
```

当我在 python 2.7.3 上运行这段代码时，我得到了：

```
>>> b="""||a||b||
... ||c||d||
... text
... ||a||b||
... ||d||c||"""
>>> print(htmlize(b))
<table border="1"><tr><td>a</td><td>b</td></tr>
<tr><td>c</td><td>d</td></tr></table><br />text<br /><table border="1"><tr><td>a</td><td>b</td></tr>
<tr><td>d</td><td>c</td></tr></table> 
```

但在 Django 1.4 下，我只有：

```
<table border="1"><tr><td>a</td><td>b</td><td> </td><td>c</td><td>d</td><td> text </td><td>a</td><td>b</td><td> </td><td>d</td><td>c</td></tr></table> 
```

没有一些和标签。可能是什么问题？有了安全，我也丢失了那些标签，所以我不能制作一个多行的表格。

UPD：这是我在 view.py 中调用 htmlize 的方式：

```
for note in notes:
    note.note = htmlize(note.note) 
```

UPD2：真的很奇怪！Textile 可以工作，但是使用我的功能，我得到了相同的结果，但是在 django 中它不起作用：

```
ishayahu@test_pg_master:/home/ishayahu/tasks % ./manage.py shell

Python 2.7.3 (default, Jan 22 2013, 12:19:56) 
[GCC 4.2.1 20070831 patched [FreeBSD]] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> import textile
>>> from todoes.ize import htmlize
>>> a="""||a||b||
... ||c||d||
... text
... ||a||b||
... ||c||d||"""
>>> htmlize(a)
'<table border="1"><tr><td>a</td><td>b</td>\t</tr>\n<tr><td>c</td><td>d</td>
\t</tr></table><br />text<br /><table border="1"><tr><td>a</td><td>b</td>\t
</tr>\n<tr><td>c</td><td>d</td>\t</tr></table>'
>>> textile.textile(a)
'\t<table>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td>a</td>\n\t\t\t<td></td>\n
\t\t\t<td>b</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td></td>\n
\t\t\t<td>c</td>\n\t\t\t<td></td>\n\t\t\t<td>d</td>\n\t\t\t<td></td>\n\t\t</tr>
\n\t\t<tr>\n\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td></td>\n\t\t\t<td>a</td>\n\t\t\t<td>
</td>\n\t\t\t<td>b</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td></td>\n
\t\t\t<td>c</td>\n\t\t\t<td></td>\n\t\t\t<td>d</td>\n\t\t\t<td></td>\n\t\t</tr>
\n\t</table>'
>>> 
```

* * *

### 解决了

这很简单：在我的 htmlize 例程中，我不仅应该看 '\n'，还应该看 '\r'）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:16:18.840

不要重新发明轮子。有大量为您编写和测试的[wiki 到 html转换。](http://www.mediawiki.org/wiki/Alternative_parsers)

例如，尝试[纺织](https://github.com/sebix/python-textile)：

```
import textile

print textile.textile("""||a||b||
||c||d||

text

||a||b||
||d||c||""") 
```

我知道这不是问题的确切答案，它只是一种解决方法。

# jquery - struts2+uploadify http错误302

> ID：16130708
> 
> 赞同：0
> 
> 时间：2013-04-21T11:38:12.760
> 
> 标签：jquery, struts2, uploadify, swfobject, swfupload

我正在尝试将uploadify与struts2一起使用，当我选择一个文件时，它显示，http错误302。请有人指出我的问题。我认为它根本没有到达服务器，因为一开始就没有打印语句的输出。

**jsp**

```
<!DOCTYPE html>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html lang="en">
    <head>
        <% 
            String sessionid = request.getSession().getId().toString();
            String path= request.getContextPath();
         %>
        <sj:head jqueryui="true" compressed="false"/>
        <title>Uploadify test</title>
        <script src="uploadify/jquery.uploadify.min.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="uploadify/uploadify.css">
        <script type="text/javascript" id="015e9c19-de54-402c-8ce4-93a29d054dbc"><!--/*--><![CDATA[/*><!--*/
        $(document).ready(function(){
            var id='<%=sessionid%>';
            var path='<%=path%>';
            alert(id);
                $('#file_upload1').uploadify({
                        uploader:'uploads?jsessionid='+id, 
                        scriptAccess:'always', 
                        auto:true, 
                        multi:true, 
                        swf:'uploadify/uploadify.swf', 
                        cancelImg:'uploadify/uploadify-cancel.png',
                        onError : function(event, queueID, fileObj, errorObj) { alert(errorObj.type + ' ' + errorObj.info ); }
                });
        });
        /*-->]]>*/
    </script>

    </head>
    <body>
       <input name="file_upload" type="file" id="file_upload1"/>
       <a href="javascript:$('#file_upload1').uploadifyUpload();">Upload Files</a>
    </body>
</html> 
```

**行动**

```
@Namespace("/")
public class UploadifyAction extends ActionSupport{

    private List<File> fileUpload = new ArrayList<File>();
    private List<String> fileUploadContentType = new ArrayList<String>();
    private List<String> fileUploadFileName = new ArrayList<String>();

    public List<File> getFileUpload() {
        return fileUpload;
    }

    public void setFileUpload(List<File> fileUpload) {
        this.fileUpload = fileUpload;
    }

    public List<String> getFileUploadContentType() {
        return fileUploadContentType;
    }

    public void setFileUploadContentType(List<String> fileUploadContentType) {
        this.fileUploadContentType = fileUploadContentType;
    }

    public List<String> getFileUploadFileName() {
        return fileUploadFileName;
    }

    public void setFileUploadFileName(List<String> fileUploadFileName) {
        this.fileUploadFileName = fileUploadFileName;
    }
 @Action(value="uploads")
    public void upload() throws Exception{
            System.out.println("in");
        for (File file: fileUpload) {
            System.out.println("File :" + file);
        }

        for (String fileName: fileUploadFileName) {
            System.out.println("Filename : " + fileName);
        }

        for (String fileContentType: fileUploadContentType) {
            System.out.println("File type : " + fileContentType);
        }

    }

  @Action(value="fileUpload", results = { @Result(name="none",location="/uploadify.jsp")
    })
    public String display() {
        return NONE;
    }
} 
```

我尝试更改其给出 404 的 url，但使用当前 url 即上传器我收到 http 302 错误

谢谢并恭祝安康。

# iphone - 创建自定义 UITabBarController ，其中 Label 应该在 Image 前面而不是底部

> ID：16130711
> 
> 赞同：0
> 
> 时间：2013-04-21T11:39:09.567
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar, uitabbaritem

我需要创建自定义`UITabBarController`，布局应该首先看起来像图像，然后是该图像的标题而不是图像的底部。

请建议我如何做到这一点或任何可以指导我的链接

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:16:49.127

试试这个[样本](https://github.com/alikaragoz/AKTabBarController)

使用它，您可以调整标题药水或任何您想要自定义的内容`tabbar`。希望这会有所帮助。

# android - 将我的文本视图重定向到其他布局

> ID：16130712
> 
> 赞同：0
> 
> 时间：2013-04-21T11:39:13.530
> 
> 标签：android, android-layout, android-intent, onclick, xml-layout

如何让我的“sodrzina”显示在其他 xml 布局上。你可以看到我用 setContentView(R.layout.sodrzina); 尝试了几次。.. 使用这些方法，我在点击时打开其他布局，但没有内容。如何在那里显示我的内容？

```
 View.OnClickListener 
        getOnClickDoSomething(final Button button)  {
    return new View.OnClickListener() {         
    public void onClick (View v){
        //TextView View = (TextView) findViewById(R.id.viewSodrzina);
        setContentView(R.layout.sodrzina);
         TextView View = (TextView) findViewById(R.id.viewSodrzina);
         String sodrzina="";
    }

    }
        String sodrzina="";

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.cook-recipes.hostoi.com/jsonscript/sodrzina.php?sodrzina="+(button.getText()).toString().replace(" ","%20"));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream webs = entity.getContent();

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(webs,"iso-8859-1"),8);
            //myListView.setText(reader.readLine());

            int askiChar=0;
            while((askiChar =reader.read())!=-1)
            {
            sodrzina+= ((char)askiChar);
            }
            webs.close();
            reader.close();

        }catch(Exception e){
            Log.e("log_tag","Error converting reslt"+e.toString());
        }

        //TextView prikaziSodrzina = (TextView)findViewById(R.id.viewSodrzina);
        //Toast.makeText(Desert.this,sodrzina, Toast.LENGTH_LONG).show();
        //prikaziSodrzina.append(sodrzina);

    //  View.append(sodrzina);

    }
    catch (Exception e)
    {
        Log.e("ERROR","ERROR IN CODE: "+e.toString());
        e.printStackTrace();
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:57:55.077

尝试[通过 include 重用布局](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。这将允许您使用相同的布局代码。无论如何，布局将被创建两次。将其视为对象继承。另一种方法是使用[addView](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)和[removeView](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)。在这种情况下，您将使用相同的对象，并且在内存使用方面更有效，但创建起来更复杂。

# ios - IOS HttpPost 带参数

> ID：16130715
> 
> 赞同：1
> 
> 时间：2013-04-21T11:39:27.950
> 
> 标签：ios, cookies, http-post, httpclient

我想发送带有参数的http post，然后从响应中检索cookie。

在android中，我使用以下内容：

```
HttpPost request = new HttpPost("http://stackoverflow.com/");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1); 
nameValuePairs.add(new BasicNameValuePair("parameter", parameter));  
request.setEntity(new UrlEncodedFormEntity(nameValuePairs));  

HttpResponse response = client.execute(request);

List<Cookie> cookies = client.getCookieStore().getCookies(); 
```

我尝试在 IOS 中使用以下内容，但它对我不起作用：

```
NSURL *authUrl = [[NSURL alloc] initWithString:@"http://stackoverflow.com/"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:authUrl];
[request setHTTPMethod:@"POST"];
NSString * parameters = [NSString stringWithFormat:@"login=%@&password=%@",login,password];
NSData *requestData = [NSData dataWithBytes:[parameters UTF8String] length:[parameters length]];
[request setHTTPBody:requestData];
[request setTimeoutInterval:15.0];
NSURLConnection * connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start]; 
```

在委托方法中，我接收数据。但是数据看起来像是在没有参数的情况下发送了帖子。我猜它发送链接但不发送参数。我还尝试设置标题，但对我没有帮助。

```
[request addValue:VALUE forHTTPHeaderField:@"login"]; 
```

并且使用`sendSynchronousRequest`也没有帮助。

```
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:48:30.650

源工作正常，但我将请求发送到错误的网站。

# mysql - MYSQL - 处理引号的存储过程和准备好的语句

> ID：16130717
> 
> 赞同：0
> 
> 时间：2013-04-21T11:39:40.143
> 
> 标签：mysql, stored-procedures, prepared-statement

从 PHP 我使用准备好的语句（通过绑定参数）并将数据发送到以下存储过程

```
CREATE PROCEDURE test_my_add_comment(in var_details text, in var_table_name varchar(50))
BEGIN    
    SET @s = CONCAT('INSERT INTO ',var_table_name,'(details) VALUES("',var_details,'")');
    PREPARE stmt FROM @s;
    EXECUTE stmt;
   COMMIT;
END; 
```

**我的桌子**

```
CREATE TABLE `test_table` (
  `details` text NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如果文本不包含任何引号，则插入记录，但如果文本包含引号，则会引发任何错误。

有人可以建议我解决这个问题吗？

我的假设是准备好的语句应该处理这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T13:09:29.440

好的，我在 MariaDB 10 上对此进行了测试，它可以工作：

```
DROP PROCEDURE IF EXISTS `test_my_add_comment`;
CREATE PROCEDURE `test_my_add_comment`(IN `var_details` TEXT, IN `var_table_name` VARCHAR(64))
    MODIFIES SQL DATA
BEGIN    
    SET @`add_comment` = CONCAT('INSERT INTO ', `var_table_name`, ' (`details`) VALUES (', QUOTE(`var_details`), ');');
    PREPARE `stmt_add_comment` FROM @`add_comment`;
    EXECUTE `stmt_add_comment`;
    DEALLOCATE PREPARE `stmt_add_comment`;
    SET @`add_comment` = NULL;
END;

CALL `test_my_add_comment`('This is a test','test_table'); 
```

我添加了很多，`backticks`因为如果您使用保留字，它们可以帮助您获得更好的错误消息。我为准备好的语句使用了正确的语法，并释放了@add_comment。此外，最好为准备好的语句使用特定的名称，因为如果您在更多地方使用相同的名称，您可能会遇到问题。我将第二个参数设置为 VARCHAR(64)，因为它是真正的表名 maxlength。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:53:08.943

错误在程序中。以下是如何转义引号。我在这里使用单引号。我还引用了表/列名。

```
SET @s = CONCAT('INSERT INTO `',var_table_name,'` (`details`) VALUES(\'', QUOTE(var_details), '\')'); 
```

# sql-server-2008 - EF 对 sql 表的 CRUD 操作包含文件流列

> ID：16130718
> 
> 赞同：0
> 
> 时间：2013-04-21T11:39:47.180
> 
> 标签：sql-server-2008, entity-framework, filestream

我有一张这样的桌子：

```
CREATE TABLE [dbo].[Files](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [FileId] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
    [Name] [nvarchar](500) NOT NULL,
    [FileContent] [varbinary](max) FILESTREAM  NOT NULL,
    [Extinction] [nchar](5) NOT NULL,
 CONSTRAINT [PK__Files] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] FILESTREAM_ON [FileStream],
 CONSTRAINT [UQ___Files__3214EC063158B01B] UNIQUE NONCLUSTERED 
(
    [FileId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] FILESTREAM_ON [FileStream] 
```

并将其映射到我的模型中（由 EF 5 生成）。现在我可以使用 EF 从该表中插入或删除吗？谁能告诉我我该怎么做？

# jquery - jqgrid中的垂直滚动条和分页

> ID：16130728
> 
> 赞同：0
> 
> 时间：2013-04-21T11:40:51.920
> 
> 标签：jquery, jqgrid

[我像这样](http://www.ok-soft-gmbh.com/jqGrid/Admin3.htm)使用 jqGrid v4.4.5 myjqgrid

请帮助解决以下问题：

myjqgrid 在基本父级（div）上的高度为 100%

如果出现垂直滚动条时行数超过 myjqgrid 高度，我想要不同的分辨率。

```
<div style="width:100%;overflow:scroll">
    <table id="List1"><tr><td></td></tr></table>
    <div id="Pager1"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:59:23.953

[如果您在jqGrid 上使用自动高度](https://stackoverflow.com/questions/5895801/jqgrid-with-automatic-height-but-has-a-max-height-scrollbars)查看 Oleg 的答案；[但有一个最大高度和滚动条](https://stackoverflow.com/questions/5895801/jqgrid-with-automatic-height-but-has-a-max-height-scrollbars)，应该让你走上正确的道路。

从答案：

```
$("#list1").parents('div.ui-jqgrid-bdiv').css("max-height","300px"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:31:52.330

您不应将高度设置为 100%，而应将其设置为整数，例如 300，您可能还需要将 rowNum 设置为稍大的整数。

```
jQuery("#grid1).jqGrid({
...
rowNum: 40,
height:"300",
...
}); 
```

如果不需要分页，可以将滚动设置为 true，将高度设置为整数而不是 100%。

```
jQuery("#grid1).jqGrid({
...
scroll:true,
height:"400",
...
}); 
```

# rest - 哪个测试工具可以做 REST 和 GUI？

> ID：16130730
> 
> 赞同：0
> 
> 时间：2013-04-21T11:41:10.060
> 
> 标签：rest, user-interface, automated-tests

我们很快将测试一个提供 REST 接口的应用程序，所以我的第一个想法是使用soapUI Pro，因为我已经将它广泛用于基于 SOAP 的应用程序。但是我需要一个可以自动测试的工具

*   休息**和**
*   图形用户界面 (Windows)

我无法详细说明，但被测应用程序的工作原理基本上是这样的：

1.  客户端向应用程序发送多个 REST 调用。
2.  在某些 REST 调用中，应用程序将显示一个也需要自动化的 GUI。
3.  客户端继续 REST 调用。

目前我使用soapUI Pro 进行REST 和TestComplete 进行GUI 测试，但我需要一个结合两者的工具。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T18:25:20.087

Visual Studio（适用于测试人员或 Ultimate）具有可能会影响您的 REST 服务的 Web 测试（用 C# 编码和非编码），以及适用于 GUI 应用程序的 UI 测试，可以满足要求。

网络测试： http: [//msdn.microsoft.com/en-us/library/ms182538 (v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182538(v=VS.80).aspx)

编码的 UI 测试：http: [//msdn.microsoft.com/en-us/library/dd286726.aspx](http://msdn.microsoft.com/en-us/library/dd286726.aspx)

# java - 单独的前端应用程序 - 构建和部署策略

> ID：16130733
> 
> 赞同：5
> 
> 时间：2013-04-21T11:41:47.460
> 
> 标签：java, javascript, frontend, gruntjs

有一种观点认为，在构建富浏览器应用程序（JS-heavy）时，它应该被视为单独的应用程序，而不是“后端”应用程序的一部分。我想知道在这种设置中如何实现构建和部署？

假设我有 java WAR 文件，它公开了基于 JSON 的 API（无论是 JAX-RS 还是其他） - 没有视图。然后我有我的前端应用程序的静态内容：js 脚本、html 视图、css 样式、图像等。我可以使用专用的构建工具，例如 GruntJS 用于该项目来缩小/预处理等。

但现在我有点卡住了。这种构建应该是什么结果？仅使用 Grunt 创建的静态文件来分离 WAR？部署情况如何？我应该将这些 WAR 混合到一个成熟的应用程序中还是部署两个单独的例如`example.com`服务静态和那些静态用于`api.example.com`获取数据。

另一个问题是关于发展的。因此，我希望将我的 js 和 css 连接并缩小，但这对开发来说并不是那么好（调试很困难等）。在开发模式下拥有单独的源文件并仅在产品构建时连接有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:05:05.607

我从来没有像以前那样涉足过 Java WebDev，所以我无法为您提供具体的帮助。但是这种抽象背后的想法通常是公开一个公共的后端 API，从而能够与任何类型的客户端连接到后端，该客户端以驻留在任何主机上的任何语言编写。如果您碰巧开发了 API 和客户端，您的问题应该是是否有可能需要单独部署客户端和 API。如果有，请单独构建它们。如果没有，不要。就个人而言，我更喜欢您的 api.example.com 和 example.com 方案。

关于您的第二个主题：我曾经构建了一个 ANT 脚本来做到这一点。将您的 JS“类”放在单独的“命名空间”文件中，让脚本连接并缩小它们。您必须以正确的顺序将文件输入到构建脚本中，这在小型项目中很容易管理。如果现在有自动化工具的话，我想知道。

# highcharts - Highstock：如何结合延迟加载和动态数据？

> ID：16130735
> 
> 赞同：10
> 
> 时间：2013-04-21T11:42:22.317
> 
> 标签：highcharts, highstock

我正在尝试将[延迟加载](http://www.highcharts.com/stock/demo/lazy-loading)与Highstock 中的[动态更新数据结合起来。](http://www.highcharts.com/stock/demo/dynamic-update)这个想法是拥有一个大的历史实时图表（包含数百万个数据点），同时实时更新（如果用户滚动到右边缘）。

为了防止在延迟加载数据时循环加载，我需要设置：

```
navigator : {
  adaptToUpdatedData: false
} 
```

但是，使用此设置，向图表添加新数据点不再更新导航器，这使我根本无法看到这些新数据点（因为我无法滚动过去最右侧的条目）。我也尝试将这些新数据点添加到导航器系列中，但导航器仍然没有更新。我还尝试以编程方式更改导航器系列的 xAxis 中的最大值，但无济于事。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-15T19:36:14.033

我花了几个星期来解决这个问题，这很棘手。[延迟加载是一件非常简单的事情（请参阅http://www.highcharts.com/stock/demo/lazy-loading](http://www.highcharts.com/stock/demo/lazy-loading)上的“170 万点异步加载”演示）或添加新数据点，但两者需要一点技巧。

首先，我将详细说明我最终得到的解决方案。不要将 adaptToUpdatedData 设置为 false，只需将其省略即可。您将要做的所有工作都需要更改生成数据的后端代码。从本质上讲，返回到 Highstock 的数据将始终是您拥有的*全部*数据范围，但是对于当前正在查看的窗口，您将拥有高分辨率的数据点，但之前范围内的数据点的分辨率较低在这个窗口之后。像往常一样将新数据点添加到数据的末尾（请参阅[http://www.highcharts.com/stock/demo/dynamic-update](http://www.highcharts.com/stock/demo/dynamic-update)上的“动态更新数据”演示）

这确保了当添加新数据点时，导航器也将被更新。但是，它也使您不必加载全部数据点（因为之前和之后的范围仅包含低分辨率的数据点）。在将数据返回到 highstocks 图表之前，您需要编写将数据正确平均为更少数据点的代码。

在 setExtremes 处理函数（当用户滚动导航器时调用该函数）中，我有代码发出 AJAX 请求以将新数据添加到 Highstocks 图表。我还有使用 setInterval() 每 10 秒获取新数据点的代码。您需要一个变量来跟踪 setInterval() 更新何时发生，因为如果它向图表添加新数据点，这也将最终调用 setExtremes 处理程序函数，然后再发出另一个 AJAX 请求。您的 setExtremes 处理程序中的 AJAX 请求仅应在 setInterval() 更新未发生时运行。（很容易出现一些导致 AJAX 数据请求无限循环的错误。）

您还需要 AJAX 数据请求中的变量，以便后端代码知道请求是来自 setInterval() 还是来自您的 setExtremes 处理程序（当用户滚动导航器时），以便它知道它是否应该只返回请求时间范围内的数据（对于 setInterval() 请求）或对整个数据范围进行低/高分辨率平均（对于 setExtremes 处理程序请求）。

我不认为这些变量完全消除了竞争条件的可能性。

您描述的问题是正确的：您不能将 adaptToUpdatedData 设置为 false 并添加新数据点，因为导航器不会更新。这可以防止您将导航器滚动到新点。但是如果你不设置它，当你请求新的（和更小的）数据范围时，导航器会更新以适应这个范围。导航器和主图表将显示相同范围的数据，使导航器无用。

不幸的是，塞巴斯蒂安的回答不起作用。更新 series[0] 不会影响导航器，因为将 adaptToUpdatedData 设置为 false 会禁用导航器重绘自身。

这种低/高分辨率方法是一种 hack，但这是我发现的唯一可行的方法（在经历了六种左右不起作用的其他方法之后）。如果 Highstocks 团队可以添加这个就太好了功能到他们的图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T19:01:13.353

我也遇到了这个问题，在尝试了很多解决方案之后，我找到了一个真正适合我的解决方案。

我使用了一个包含最大值的全局变量，`xAxis`当我更新图表时，我验证新`xAxis`值是否大于`maxX`变量。

如果它是真的，那么我`maxX`用新的点更新 ，然后我使用 ，然后`chart.xAxis.setExtremes (chart.xAxis.min, maxX);`我重新绘制图表。

有了这两件事，图表将模拟动态数据的延迟加载，但另一个问题出现了：范围选择器和导航器没有更新。解决方案是：

```
chart.rangeSelector.buttons[0].setState(2);
chart.rangeSelector.clickButton(0,0,true); 
```

这两行代码再次启用范围选择器，一切正常。

# javascript - HTML5 setCustomValidation 在 Else 上失败

> ID：16130737
> 
> 赞同：0
> 
> 时间：2013-04-21T11:42:36.480
> 
> 标签：javascript, html, validation

我有这个代码：

```
function checkPassword(pass1, pass2) {
var p1 = document.getElementById(pass1)
var p2 = document.getElementById(pass2)
if (p1.value != p2.value) {
    p2.setCustomValidity('verifiez que vous avez ecrit le meme mot de passe');
} else {
    p2.setCustomValidity('')
}}

function Banned(password) {
pas = document.getElementById(password)
ban_list = ["111111", "11111111", ...]
for (var i = 0; i < ban_list.length; i++) {
    if (pas.value == ban_list[i]) {
    pas.setCustomValidity("Mot de Passe Facile, Veuillez le changer")
   } else
    {
      pas.setCustomValidity("")}
}} 
```

html:(偶数是`OnBlur`)

```
<label for="pass1">Votre mot de passe</label>
<input class="keyboardInput" id="pass1" name="pass1" type="password" required onkeypress="checkCapsLock(event);" placeholder="" pattern=".{6,}" title="" onblur="checkPassword('pass1','pass2'); Banned('pass1')">
<label for="pass2">Confirmez le</label>
<input class="keyboardInput" id="pass2" name="pass2" type='password' required onkeypress="checkCapsLock(event);" placeholder="" onblur="checkPassword('pass1','pass2'); Banned('pass1')" title=""> 
```

Vous avez activé la touche majiscule

第一个代码有效，如果我设置了两个不同的密码，它会提醒我，如果我修改它，警报就会消失。但是在第二个（禁止）中，它不起作用（不会警告用户），如果我删除 Else 部分，它会起作用，但如果它会检测到列表中的单词，它甚至永远不会消失如果用户使用不属于列表的字符串修改值。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:07:56.367

当满足条件时，您不会退出该功能，即密码在禁止列表中。你想要的是更像这样的东西：

```
for (var i = 0; i < ban_list.length; i++) {
  if (pas.value == ban_list[i]) {
    pas.setCustomValidity("Mot de Passe Facile, Veuillez le changer");
    return;
  }
}
pas.setCustomValidity(""); 
```

这样，如果密码在禁止列表中，您将始终收到警报，如果不是，则警报将消失。注意`pas.setCustomValidity("");`- 它在循环之外的位置。

# java - 在 SOAP UI 中自动运行请求：如何将值从 Java selenium 代码传递到 autoit 代码

> ID：16130738
> 
> 赞同：0
> 
> 时间：2013-04-21T11:42:43.417
> 
> 标签：java, selenium-webdriver, autoit

我正在研究 Selenium 自动化，并正在使用 AutoIT 来自动化非基于 Web 的操作。我需要自动运行来自 SOAP UI 的请求。我有一个自动化场景，我想将我的 selenium 代码中的一个值传递给 AutoIT 脚本。例如，我有一个变量“x”。我必须启动 SOAP UI、创建一个项目并在 wsdl URL 中传递变量“x”的值并运行请求。有没有办法做到这一点？我假设启动 SOAP UI、创建项目和运行请求可以由 AutoIT 完成，但是当我需要在我的 AutoIT 中传递变量“x”时，我陷入了困境。有没有办法做到这一点？或者有没有其他方法可以在 SOAP UI 中自动运行请求。我正在使用 Selenium webdriver、Java 和 TestNG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:52:18.417

您可以通过多种方式在应用程序/进程之间共享变量

*   使用 windows 消息查找 _WinAPI_PostMessage 函数，该函数将消息发送到特定窗口或广播消息到所有窗口，以便所有正在运行的应用程序在 autoit 中获取消息（也可以传递 2 个变量）您可以设置一个运行的函数（停止主程序）当您的 autoit 应用收到此类消息和变量时

*   您可以设置 UDP 或 TCP 通道，以便您正在运行的应用程序可以通信（UDP 应该可以正常工作）一个应用程序是服务器另一个是客户端

*   文件通信设置，将要发送的变量或信息写入文件，其他应用程序读取文件（结合第一种方法可能会很好：应用程序'A'将数据写入文件'data.msg'然后向应用程序“B”发送消息，在收到消息后读取“data.msg”）您可以建立复杂的协议以及确认消息等，以防您的应用程序需要它。

_WinAPI_RegisterWindowMessage _WinAPI_PostMessage GUIRegisterMsg

是相关功能，您可以在 autoit 帮助中查找它们

如果您认为其中任何一个是可行的，但您需要进一步的帮助，我可以编写一个简单的代码，在实践中证明这一点

# c# - HTTPRequest 底层连接已关闭

> ID：16130742
> 
> 赞同：0
> 
> 时间：2013-04-21T11:43:01.850
> 
> 标签：c#, .net, httprequest

我从 C# .Net Applcation 访问身份验证 php 页面时遇到问题。

它似乎在我的电脑和我的一些用户上运行良好；但如果我的用户收到错误，我的联合开发人员和大约 1/3。

错误说“底层连接已关闭”**这是从法语翻译的，所以它可能不准确！**

我的代码如下：

```
 internal string Post(string url, string data)
    {
        string vystup = null;
        try
        {
            //Our postvars
            byte[] buffer = Encoding.ASCII.GetBytes(data);
            //Initialisation, we use localhost, change if appliable
            HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create(url);
            WebReq.KeepAlive = true;
            WebReq.Expect = "";
            //Our method is post, otherwise the buffer (postvars) would be useless
            WebReq.Method = "POST";
            //We use form contentType, for the postvars.
            WebReq.ContentType = "application/x-www-form-urlencoded";
            //The length of the buffer (postvars) is used as contentlength.
            WebReq.ContentLength = buffer.Length;
            //We open a stream for writing the postvars
            Stream PostData = WebReq.GetRequestStream();
            //Now we write, and afterwards, we close. Closing is always important!
            PostData.Write(buffer, 0, buffer.Length);
            PostData.Close();
            //Get the response handle, we have no true response yet!
            HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();
            //Let's show some information about the response
            Console.WriteLine(WebResp.StatusCode);
            Console.WriteLine(WebResp.Server);

            //Now, we read the response (the string), and output it.
            Stream Answer = WebResp.GetResponseStream();
            StreamReader _Answer = new StreamReader(Answer);
            vystup = _Answer.ReadToEnd();

            //Congratulations, you just requested your first POST page, you
            //can now start logging into most login forms, with your application
            //Or other examples.

        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.Message, "Auth Error");
        }
        return vystup.Trim() + "\n";

    } 
```

该页面不输出任何 html 标签，如果有帮助，只输出纯文本。

有没有人有任何想法？如果需要，我可以提供更多信息！

谢谢

# java - 最佳锦标赛池大小

> ID：16130743
> 
> 赞同：0
> 
> 时间：2013-04-21T11:43:03.570
> 
> 标签：java, algorithm

我被困在一个java项目上。我需要将玩家总数分成最佳组。我有 2 个常量可以帮助我做到这一点（`MAX_POOL_SIZE`和`MIN_POOL_SIZE`）。

例如，如果玩家总数为 20，则最佳组大小将是 4x5 而不是 3x6+2（带有`MAX_POOL_SIZE=6`）。如果我有 9 名球员，最佳人数应该是 3x3 相同`MAX_POOL_SIZE`。

这里最大的困难（无论如何对我来说）是当玩家总数是质数时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:29:43.343

您实际上并没有告诉我们是什么使特定分组比另一个分组更好，因此您的问题无法真正按要求回答。但是，根据您给出的几个示例，我*猜*您想要以下内容：

*   每个组的大小必须在给定的最小和最大大小之间。

*   受限于上述限制，组的总数必须最小化。

*   如果有多种有效的方法可以将玩家分成相同数量的组，那么最小组和最大组之间大小差异最小的组（或者可能是组大小的最小方差，或类似的东西）是最好的。

鉴于这些假设，这是一个应该有效的简单算法：

1.  设*n*为玩家总数。

2.  让*m**除以*最大组大小，向上取整。我们将把玩家分成*m*组。

3.  让*s* = *n* / *m*，向下舍入。令*k* = *n* - *s* × *m*（或者，等价地，让*k* = *n* mod *m*）。

4.  将玩家分成*k*组*s* +1个玩家和*n* - *k*组*s*个玩家。

请注意，我在这里没有明确考虑最小组大小，但我*认为*这个规则永远不会违反它（假设有*可能*不违反它），因为它实际上旨在最大化最小组的大小团体。

# html - 如何使浮动超出其父宽度

> ID：16130749
> 
> 赞同：0
> 
> 时间：2013-04-21T11:44:16.677
> 
> 标签：html, css

我不知道现在该怎么办。

我正在创建滑块图片。但这个问题是我想让我的`<img>`标签向左浮动以制作幻灯片图片

* * *

`#broadcast`是代表阶段。

`#overflow`是表示溢出图片的掩码。

`#inner`代表图片容器。

`article`表示包含每个图像。

* * *

我将通过`margin-left`在`#inner`. 现在我只将文章标签设置为`float`左侧，但它并没有像我预期的那样进行。先生，我应该怎么做才能使它在其父宽度上对齐？

```
<div id="broadcast">
    <div id="overflow">
        <div id="inner">

            <article>
                <img src="001.png">
            </article>
            <article>
                <img src="002.ong">
            </article>
            <article>
                <img src="003.png">
            </article>

        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:53:11.803

在这里你有一个小提琴如何让它们彼此对齐并在它们溢出溢出 div 时仍然隐藏它们，现在你只需要使用 javascript 对其进行动画处理，或者对我来说一些复杂的 css ;)

[http://jsfiddle.net/8eaQj/](http://jsfiddle.net/8eaQj/)

**CSS：**

```
article{
    float:left;
}
#inner{
    height:150px;
    overflow:hidden;
    width:1050px;
}
#overflow{
    width:350px;
    overflow:hidden;
} 
```

**html:**

```
<div id="broadcast">
    <div id="overflow">
        <div id="inner">

            <article>
                <img src="http://placehold.it/350x150&text=1">
            </article>
            <article>
                <img src="http://placehold.it/350x150&text=2">
            </article>
            <article>
                <img src="http://placehold.it/350x150&text=3">
            </article>

        </div>
    </div>
</div> 
```

# perl - Infoblox perl api 错误 1002 - 创建 DNS 区域时参数丢失或不正确

> ID：16130752
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:44:41.010
> 
> 标签：perl

我正在设置一个 perl 脚本来与一些运行 NIOS 5.1 的 infoblox 设备进行通信，但我被困在代码的下面部分。这部分用于创建反向区域记录。

任何指针我可能做错了什么？

```
#!/usr/bin/perl
require Infoblox;
use Getopt::Std;
use Term::GetKey;
use JSON;
use Data::Dumper;
use VCIM qw ( load_config getline unpack_netmask pack_netmask validate_netmask validate_vlan        get_first_ip get_last_ip get_next_ip dprint
write_config i18n hash_merge dqtobin bintodq binmax binmin ip_is_used );

my $DEBUG=1;
my $overwrite=0;

my $match;

my %options;
getopts('yp:', \%options);

if (defined $options{'y'}) {
$overwrite = 1;
}

# read settings from settings.conf
my %config;
%config = %{load_config()};

# acquire infoblox handle
dprint("\nConnecting to $infobloxip as $infobloxuser" . ($infobloxpass eq 'default' ? " using     default password 'default'":"")."\n");
my $ibh = Infoblox::Session->new(
master => $infobloxip,
password => $infobloxpass,
username => $infobloxuser
);
my @searchres = $ibh->search(
"object" => "Infoblox::Grid::Member",
"name" => ".*"
);
unless (@searchres) {
if ( defined $config{'credentials'}{'infobloxPass'} ) {
dprint("Connection failed. (Status Code " . $ibh->status_code() . ": " . $ibh->status_detail() . ").\n");
dprint("Trying again. Will use config password instead.\n");
$infobloxpass = $config{'credentials'}{'infobloxPass'};
$ibh = Infoblox::Session->new(
  master => $infobloxip,
  password => $infobloxpass,
  username => $infobloxuser);
@searchres = $ibh->search(
  "object" => "Infoblox::Grid::Member",
  "name" => ".*"
);
unless (@searchres) {
  die ($ibh->status_code() . ':' . $ibh->status_detail());
}
} else {
die ($ibh->status_code() . ':' . $ibh->status_detail());
}
}

sub create_zones {
my $oct0 = shift;
my $oct1 = shift;
my $oct2 = shift;
my $netbits = shift;
$netbits = ($netbits>24?24:$netbits);
#one network for /8, /16, /24, or  2^x where x is each bit less than the classful boundary
$networks = ($netbits%8==0?1:(2**(8-($netbits%8))));
my $snb = ($netbits<24 && $netbits>16 ? \$oct2 : ($netbits > 8 ? \$oct1 : \$oct0));
for (my $i=0;$i<$networks;$i++) {
if ($i>0) {
${$snb}++;
}
dprint("Creating Reverse zone $oct2.$oct1.$oct0.in-addr.arpa... ");
my $newzone = Infoblox::DNS::Zone->new(
name  => $oct2.".".$oct1.".".$oct0."."."0"."/".($netbits%8==0?$netbits:$netbits + (8 - ($netbits%8))),
enable_rfc2317_exclusion => "true",
disable => "false",
primary => $dns_member
);
unless (my $response = $ibh->add($newzone)) {
  unless ($ibh->status_code() == 1005) {
    die ($ibh->status_code() . ":" . $ibh->status_detail());
  } 
```

完整的错误代码是`1002:One or more arguments in request are missing or incorrect at infobloxSetup.pl line 601, <RUC> line 657.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T09:53:36.417

原来它与 perl 无关，问题是我使用的 API 版本不支持 enable_rfc2317_exclusion => "true"

# c# - C# - 如何在列表中添加所有 system.drwaing.color 项目？

> ID：16130756
> 
> 赞同：5
> 
> 时间：2013-04-21T11:44:59.193
> 
> 标签：c#, list, random, colors

我正在尝试用 system.drwaing.color 项目填充我的列表以选择随机颜色并将其设置为 backColor。

这是我的代码：

```
 List<Color> myList = new List<Color>();
    //rc.Add(Color.Chartreuse);
    //rc.Add(Color.DeepSkyBlue);
    //rc.Add(Color.MediumPurple);
    foreach (Color clr in System.Drawing.Color)
    {
      //error  
    }
    Random random = new Random();
    Color color = myList[random.Next(myList.Count - 1)];
    this.BackColor = color; 
```

错误：“System.Drawing.Color”是“类型”，在给定的上下文中无效

谁能帮我一把？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T12:16:09.607

```
public static List<Color> ColorStructToList()
{
    return typeof(Color).GetProperties(BindingFlags.Static | BindingFlags.DeclaredOnly | BindingFlags.Public)
                        .Select(c => (Color)c.GetValue(null, null))
                        .ToList();
} 
```

`List<Color> colorList = ColorStructToList();`

* * *

```
private void randomBackgroundColorButton_Click(object sender, EventArgs e)
{
    List<Color> myList = ColorStructToList();
    Random random = new Random();
    Color color = myList[random.Next(myList.Count - 1)];
    this.BackColor = color;
}

public static List<Color> ColorStructToList()
{
    return typeof(Color).GetProperties(BindingFlags.Static | BindingFlags.DeclaredOnly | BindingFlags.Public)
                        .Select(c => (Color)c.GetValue(null, null))
                        .ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:50:07.637

从[这个问题](https://stackoverflow.com/questions/279190/how-can-i-get-a-collection-of-all-the-colors-in-system-drawing-color)：

```
string[] colors = Enum.GetNames(typeof(System.Drawing.KnownColor)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-28T00:11:58.963

这是您的代码：

```
private List<Color> GetAllColors()
{
    List<Color> allColors = new List<Color>();

    foreach (PropertyInfo property in typeof(Color).GetProperties())
    {
        if (property.PropertyType == typeof(Color))
        {
            allColors.Add((Color)property.GetValue(null));
        }
    }

    return allColors;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-24T06:53:59.237

我的场景如下，我希望有人觉得它有用：

我在 wpf 窗口中有一个 ComboBox 控件，我想显示 Brushes 类中的所有颜色。

**主窗口.xaml**

在窗口声明中，我添加了以下参考：

```
 xmlns:converters="clr-namespace:MyProjectName.Converters" 
```

在 Window.Resources 部分中，我使用“ColorConverter”名称注册了转换器：

```
 <converters:StringToColorConverter x:Key="ColorConverter"/> 
```

在我的 xaml 代码的某个地方，我实现了以下组合框：

```
<ComboBox Grid.Column="1" Grid.Row="3" ItemsSource="{Binding VBColors}"
 Margin="5,5,0,5" HorizontalContentAlignment="Stretch">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <Rectangle Height="20" Fill="{Binding Path=., Converter={StaticResource ColorConverter}}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

**主窗口.cs**

```
 private List<string> _vbColors =  typeof(Brushes).GetProperties().Select(x => x.Name).ToList();
 public List<string> VBColors
 { get { return _vbColors; } } 
```

**StringToColorsConverter.cs**

```
 [ValueConversion(typeof(bool), typeof(SolidColorBrush))]
    public sealed class StringToColorConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            var stringValue = (string)value;
            SolidColorBrush solidColor = (SolidColorBrush)new BrushConverter().ConvertFromString(stringValue);
            return solidColor;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

**一些技巧....**

在 ComboBox.ItemTemplate 绑定中，您将找到与“Binding Path=”的绑定。=>由于颜色列表不是对象列表而是字符串列表，Binding Path=。是将控件绑定到字符串名称的方法

另外...设置 te ComboBox Horizo​​ntalContentAlignment="Stretch" 用于将 Rectangle 拉伸到 ComboBox 宽度...尝试查看差异。

继续编码，JJ

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-07T08:07:13.633

根据 Artxzta 在 VB.net 中的回答：

```
Imports System.Reflection

Dim allColors As New List(Of String)

For Each [property] As PropertyInfo In GetType(Colors).GetProperties()
        allColors.Add([property].Name)
Next 
```

# javascript - 如何从 http://cmsaspnet.com/forum.aspx 页面创建一个像按钮一样的白绿色按钮？

> ID：16130761
> 
> 赞同：0
> 
> 时间：2013-04-21T11:45:37.773
> 
> 标签：javascript, jquery, asp.net, css, hyperlink

你能指出我正确的方向来创建闪烁的白色和绿色链接（看起来像按钮），这些链接在悬停时会放大，就像从这里[http://cmsaspnet.com/forum.aspx#Focused](http://cmsaspnet.com/forum.aspx#Focused)一样？

![描述](https://i.stack.imgur.com/wPsxY.jpg) **我对网络编程很陌生，所以请宽容。**

我使用 Microsoft Web Developer 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:37:23.793

*   **旋转的“按钮”：** [使用 CSS 3 用于 webkit 浏览器的 7 个 javascript 效果替代方案的演示](http://webdeveloperjuice.com/demos/css/css3effects.html)
    *（如果您愿意自己调整它，旋转块应该可以帮助您）*

*   **闪烁按钮：** [使用 jquery 使您的注册按钮闪烁](http://www.imkazu.com/making-your-signup-button-flash-with-jquery/) （您应该将间隔设置为 99999+）

如果你只是玩弄它，一切都会好起来的。
假装你在科学课上。

# iphone - UINavigation Bar 处于磨损位置

> ID：16130762
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:45:47.487
> 
> 标签：iphone, ios, xcode, uinavigationbar

我使用以下代码在视图中添加了一个导航栏：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:@"Load Colors"];
    [navBar pushNavigationItem:navItem animated:NO];
    UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit"
                                                                   style:UIBarButtonItemStyleBordered
                                                                  target:self
                                                                  action:@selector(toggleEdit:)];
    navItem.rightBarButtonItem = editButton;
    [self.view addSubview:navBar];

    CGRect tableFrame = self.tableView.frame;
    tableFrame.origin.y = tableFrame.origin.y +45;
    self.tableView.frame = tableFrame;
} 
```

正如您在下图中看到的那样，它出现在我的 tableView 上。我该如何解决？

![在此处输入图像描述](https://i.stack.imgur.com/Nwj1e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:54:39.257

您可以将您的 tableview origin.y 设置为 45，以便导航栏不会出现在 tableview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:26:27.193

在 xib 文件中，您可以为导航栏提供空间。下图描述了它。![在此处输入图像描述](https://i.stack.imgur.com/t0EuG.png)然后你可以添加你的tableview。

UINavigationBar 对于正常显示的尺寸为 320x44，对于视网膜显示 iPhone 的尺寸为 640x88。

并在 viewWillAppear 中使用此代码

```
 //for custom navigationbar
    UINavigationBar *navBarName = [[self navigationController] navigationBar];
    UIImage *backgroundImg = [UIImage imageNamed:@"NavBar.png"];// ur navigationbar image of above dimension
    [navBarName setBackgroundImage:backgroundImg forBarMetrics:UIBarMetricsDefault];

    //for right edit button
    UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(toggleEdit:)];          
  self.navigationItem.rightBarButtonItem = editButton; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:09:13.480

```
CGRect navframe = [[self.navigationController navigationBar] frame]; 
```

使用 'navframe.size.height' 计算导航栏的高度，并将 TableView 的原点 'y' 设置为此高度值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:19:37.843

我不知道它是否适合您的情况，但是将 NavigationBar 添加到 ViewController 的最佳方法是将 ViewController 包含到 NavigationViewController 中。在这种情况下，您也无需担心设备旋转时的正确转换。

我尝试手动实现一次（因为我只需要一个视图上的导航栏，所以我认为使用 NavigationController 会有点过分）。但最后我删除了所有代码并改用 NavigationController。

# javascript - onblur，只在 jquery 和 javascript 中工作一次

> ID：16130765
> 
> 赞同：1
> 
> 时间：2013-04-21T11:46:27.073
> 
> 标签：javascript, jquery, asp.net, regex, asp.net-mvc-4

我尝试在 MVC4 上制作的 Web 应用程序中验证某些表单字段，某些字段必须使用正则表达式进行验证

我的活动代码是这样的：

```
$('#Comprobante_FormaPago')[0].onblur = validaFormaPago; 
```

这是我的功能：

```
function validar(re, campo) {
var textBox = campo[0].value;
var temp = textBox.match(re);
if (temp === null) {
    campo[0].className = "errorValiacion";
    return false;
} else {
    campo[0].className = "requerido";
    return true;
}
}

function validaFormaPago() {
    var campo_FormaPago= $('#Comprobante_FormaPago');
    var re = "[^\s]+[a-zA-Z ]*[^\s]+";
    validar(re, campo_FormaPago)

} 
```

这只能工作一次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:52:38.330

尝试使用`onChange`每次更改值时调用的方法。而`onBlur`仅在您远离物体时才会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:00:34.297

就正则表达式本身而言，在将字符串参数传递给`match`您时需要转义反斜杠：

```
var re = "[^\\s]+[a-zA-Z ]*[^\\s]+"; 
```

或者只使用正则表达式文字：

```
var re = /\S+[a-z ]*\S+/i; 
```

`\S`表示非空格字符，因此它等价于`[^\s]`.

# c++ - 无法将 QBrush 设置为 QPainter

> ID：16130767
> 
> 赞同：2
> 
> 时间：2013-04-21T11:47:06.647
> 
> 标签：c++, qt, user-interface, paint

```
void Widget::paintEvent(QPaintEvent *) {
    QPainter painter(this);

    QBrush br;
    br.setColor(Qt::blue);
    painter.setBrush(br);

//    painter.setBrush(QBrush(Qt::blue));

    painter.drawRect(10, 10, 50, 50);
} 
```

此代码不起作用，未绘制蓝色矩形。但是注释行工作正常。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:50:10.107

除了设置画笔的颜色外，您还需要为画笔设置样式：

```
br.setStyle(Qt:SolidPattern); 
```

如果您检查默认构造函数，以及您在第二个示例中使用的构造函数签名，您将看到需要上述调用：

```
QBrush ( const QColor & color, Qt::BrushStyle style = Qt::SolidPattern ) 
```

> `QBrush::QBrush ()`
> 
> 构造一个样式为 Qt::NoBrush 的默认黑色画笔（即这个画笔不会填充形状）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:50:45.867

来自[http://doc.qt.io/qt-4.8/qbrush.html](http://doc.qt.io/qt-4.8/qbrush.html)

```
QBrush::QBrush ( Qt::BrushStyle style ) 
```

构造具有给定样式的黑色画笔。

```
QBrush::QBrush () 
```

构造一个样式为 Qt::NoBrush 的默认黑色画笔（即这个画笔不会填充形状）。

所以

```
QBrush br = QBrush(); 
```

应该努力实例化对象。

# php - TypeError: $(...).jqzoom 不是 firebug 中的函数

> ID：16130769
> 
> 赞同：1
> 
> 时间：2013-04-21T11:47:27.297
> 
> 标签：php, jquery, smarty

我尝试使用 jqzoom javascript，但不起作用。在 firebug 中出现此错误 TypeError: $(...).jqzoom is not a function。我下载并加载了 javascripts。代码是：

```
<script src="{base_url()}assets/js/jquery-1.9.0.min.js" type="text/javascript"></script>
<script src="{base_url()}assets/js/jquery.jqzoom-core.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="{base_url()}assets/css/jquery.jqzoom.css" >

<script>
    $(document).ready(function(){                      
        $('.xxx').jqzoom();  
    });
</script> 

{foreach $items as $item}
<div class="item_details">
  <a class="xxx" href="{base_url()}assets/image/{$item->code}/{$item->name}"><img  id="img_details" src="{base_url()}assets/image/{$item->code}/{$item->name}"></a>
</div>
{/foreach} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:59:06.707

```
download and load 
<script src=".../jquery-1.6.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-06T09:34:41.830

使用`zoom()`代替`jqzoom()`

# android - 如何从 Android 中的 Google Navigation 中检索当前路线信息

> ID：16130774
> 
> 赞同：0
> 
> 时间：2013-04-21T11:47:45.313
> 
> 标签：android

有没有办法从 android google 导航中获取当前的路线信息？

例如，人们可能会选择替代路线，避免过路费等。我的要求是复制用户自定义的当前路线，并尝试在尽可能接近的另一台 Android 设备上复制该路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:23:26.840

Google Navigation 没有记录和支持的 API。因此，人们希望你想要的东西是不可能的，因为它代表了隐私和安全缺陷。

# c++ - 使用 CV_TM_CCORR_NORMED 进行 openCV 模板匹配

> ID：16130778
> 
> 赞同：2
> 
> 时间：2013-04-21T11:48:34.693
> 
> 标签：c++, opencv, template-matching

我有这个代码

```
cvMatchTemplate(image2, templat2, result, CV_TM_CCORR_NORMED); 
```

如果匹配，我如何让程序执行以下行：

```
double min_val, max_val;
CvPoint min_loc, max_loc;
cvMinMaxLoc(result, &min_val, &max_val, &min_loc, &max_loc);

cvRectangle(image3, max_loc, cvPoint(max_loc.x+templat->width, 
max_loc.y+templat->height), cvScalar(0,1,1), 1); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:14:47.377

您需要同时执行 cvMatchTemplate 和 cvMinMaxLoc ：

```
cvMatchTemplate(image2, templat2, result, CV_TM_CCORR_NORMED);

double min_val, max_val;
CvPoint min_loc, max_loc;
cvMinMaxLoc(result, &min_val, &max_val, &min_loc, &max_loc); 
```

然后您可以通过检查 max_val 来确定是否匹配。

如果 max_val 为 1，则您在搜索图片中的位置 max_loc 处具有逐像素精确匹配。max_val 越低，最佳匹配中的错误越多。

尝试一些测试用例以确定您的阈值应该是多少。

请注意，如果您使用 CV_TM_SQDIFF_NORMED 而不是 CV_TM_CCORR_NORMED，完美匹配对应的值为零而不是一，因此您必须检查 min_val 而不是 max_val

# django - 如何将主页的 Pinax 模板视图替换为普通视图？

> ID：16130779
> 
> 赞同：0
> 
> 时间：2013-04-21T11:48:42.990
> 
> 标签：django, pinax

我刚刚在 Django 1.4.5 上安装了 Pinax，在 urls 中主页是一个 TemplateView。我想在主页中添加一些逻辑，所以我评论了那个 url 并创建了一个新的链接到一个名为 home 的视图。目前我在该视图中什么都不做，我只想重现与 TemplateView 中相同的行为，即加载模板。模板加载，但我丢失了 Pinax 变量，如 SITE_NAME（我确实设置了站点名称，并且在使用 TemplateView 直接加载模板时它确实出现了）。

这是原始网址：

```
url(r"^$", TemplateView.as_view(template_name="homepage.html"), name="home"), 
```

这就是我使用的：

```
url(r"^$", home, name="home"), 
```

home 是从一个新创建的应用程序加载的（使用 manage.py startapp，该文件夹与 manage.py 处于同一级别，而不是在项目文件夹内）

与家庭相关的视图是：

```
def home(request):
    context = {}
    return render_to_response('homepage.html', context) 
```

如果我添加一些上下文，例如 'SITE_NAME': 'my site'，则变量会正确填充。但我想让它们像以前一样自动填充。

更糟糕的是，当我尝试登录时，尽管用户已正确登录，但主页仍然显示“已注销”版本（当前登录用户的帐户设置正确显示）。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:03:46.297

您在返回响应时重置了上下文 - 因为您没有传入`RequestContext`.

解决此问题的最快方法是使用[`render`快捷方式](http://django.me/render)，它会自动传递正确的上下文：

```
from django.shortcuts import render

def home(request):
    return render(request, 'homepage.html', {}) 
```

# microdata - 图片未显示在微数据代码上

> ID：16130780
> 
> 赞同：0
> 
> 时间：2013-04-21T11:48:52.303
> 
> 标签：microdata, schema.org, rich-snippets

我试图让这个丰富的 snipnet 运行，到目前为止没有错误，但没有显示图像：

```
<div itemscope itemtype="http://schema.org/Product" style="display: none;">
    <span itemprop="name">Canon EOS 5D (prove)</span>
    <span itemprop="description"><p>Canon's press material for the <strong>EOS 5D</strong> states that it 'defines (a) new D-SLR category', while we're not typically too concerned with marketing talk this particular statement is clearly pretty accurate. The EOS 5D is unlike any previous digital SLR in that it combines a full-frame (35 mm sized) high resolution sensor (12.8 megapixels) with a relatively compact body (slightly larger than the <strong>EOS 20D</strong>, although in your hand it feels noticeably 'chunkier').</p>
</span>

    <img itemprop="image" src="http://wonna.it/image/cache/data/demo/canon_eos_5d_2-74x74.jpg"/>

   <div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
        <span itemprop="ratingValue">3</span>
        <span itemprop="reviewCount">3 recensioni</span>,
    </div>

</div> 
```

这就是我检查没有图像的方式：[http ://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwonna.it%2Fcamera-eos-canon&html=](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwonna.it%2Fcamera-eos-canon&html=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:25:06.120

我认为你把事情搞混了。

微数据旨在描述您的网站，因此软件可以解释您的页面并更好地了解您向世界发布的内容。

**此标准不是针对您在 Google 上的外观而设计的！**

Google 还使用此标准（以及更多技术）来决定*他们*希望如何在结果中表示您的*网站*。因为您开始用图像描述产品*不会强迫他们*在结果中显示它。

# python - 为什么我在 Python 中收到错误“连接被拒绝”？（插座）

> ID：16130786
> 
> 赞同：66
> 
> 时间：2013-04-21T11:49:46.643
> 
> 标签：python, sockets

我是 Sockets 的新手，请原谅我完全不了解。

我有一个服务器脚本（server.py）：

```
#!/usr/bin/python

import socket #import the socket module

s = socket.socket() #Create a socket object
host = socket.gethostname() #Get the local machine name
port = 12397 # Reserve a port for your service
s.bind((host,port)) #Bind to the port

s.listen(5) #Wait for the client connection
while True:
    c,addr = s.accept() #Establish a connection with the client
    print "Got connection from", addr
    c.send("Thank you for connecting!")
    c.close() 
```

和客户端脚本（client.py）：

```
#!/usr/bin/python 

import socket #import socket module

s = socket.socket() #create a socket object
host = '192.168.1.94' #Host i.p
port = 12397 #Reserve a port for your service

s.connect((host,port))
print s.recv(1024)
s.close 
```

我转到我的桌面终端并通过键入以下内容启动脚本：

```
python server.py 
```

之后，我去我的笔记本电脑终端并启动客户端脚本：

```
python client.py 
```

但我收到以下错误：

> 文件“client.py”，第 9 行，在
> 
> s.connect（（主机，端口））
> 
> 文件“/usr/lib/python2.7/socket.py”，第 224 行，在 meth
> 
> 返回 getattr(self._sock,name)(*args)
> 
> socket.error: [Errno 111] 连接被拒绝

我尝试使用不同的端口号无济于事。但是，我能够在客户端脚本中使用相同的 ip 和 gethostname() 方法获取主机名，并且可以 ping 桌面（服务器）。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-21T11:53:36.257

代替

```
host = socket.gethostname() #Get the local machine name
port = 12397 # Reserve a port for your service
s.bind((host,port)) #Bind to the port 
```

你应该试试

```
port = 12397 # Reserve a port for your service
s.bind(('', port)) #Bind to the port 
```

这样监听套接字就不会受到太多限制。否则，侦听仅发生在一个接口上，而该接口又与本地网络无关。

一个例子可能是它只收听`127.0.0.1`，这使得从不同的主机连接是不可能的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-21T11:57:04.277

此错误意味着无论出于何种原因，客户端都无法连接到运行服务器脚本的计算机上的端口。这可能是由少数原因引起的，例如缺少到目的地的路由，但是由于您可以 ping 服务器，因此不应该是这种情况。另一个原因可能是您在客户端和服务器之间的某处有防火墙 - 它可能在服务器本身或客户端上。鉴于您的网络地址，我假设服务器和客户端都在同一个 LAN 上，因此不应该涉及任何可能阻止流量的路由器/防火墙。在这种情况下，我会尝试以下方法：

*   检查你是否真的有那个端口在服务器上监听（这应该告诉你你的代码是否做了你认为应该做的事情）：根据你的操作系统，但在 linux 上你可以做类似的事情`netstat -ntulp`
*   如果您接受与服务器的连接，请从服务器检查：再次基于您的操作系统，但`telnet LISTENING_IP LISTENING_PORT`应该完成这项工作
*   检查您是否可以从客户端访问服务器的端口，但不能使用代码：只需从客户端使用 telnet（或适用于您的操作系统的命令）

然后让我们知道调查结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-06T09:14:26.263

假设 s = socket.socket() 可以通过以下方法绑定服务器： 方法一：

```
host = socket.gethostname()
s.bind((host, port)) 
```

方法二：

```
host = socket.gethostbyname("localhost")  #Note the extra letters "by"
s.bind((host, port)) 
```

方法三：

```
host = socket.gethostbyname("192.168.1.48")
s.bind((host, port)) 
```

如果您没有在客户端使用完全相同的方法，您将收到错误消息：`socket.error errno 111 connection refused.`

因此，您必须在客户端使用与在服务器上完全相同的方法来获取主机。例如，在客户端的情况下，您将相应地使用以下方法：

方法一：

```
host = socket.gethostname() 
s.connect((host, port)) 
```

方法二：

```
host = socket.gethostbyname("localhost") # Get local machine name
s.connect((host, port)) 
```

方法三：

```
host = socket.gethostbyname("192.168.1.48") # Get local machine name
s.connect((host, port)) 
```

希望能解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-19T12:25:57.447

注意更改端口号。有时，您只需要更改端口号。当我对语法和功能进行更改时，我体验到了这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-19T08:21:44.633

```
host = socket.gethostname()  # Get the local machine name
port = 12397                 # Reserve a port for your service
s.bind((host,port))          # Bind to the port 
```

我认为这个错误可能与 DNS 解析有关。这句话`host = socket.gethostname()`获取主机名，但如果操作系统不能将主机名解析为本地地址，就会报错。Linux 操作系统可以修改该`/etc/hosts`文件，在其中添加一行。它看起来像下面（'主机名'是哪个`socket.gethostname()`）。

```
127.0.0.1   hostname 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-11T12:42:35.660

在你的 server.py 文件中 make ：`host ='192.168.1.94'`而不是`host = socket.gethostname()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-16T06:33:56.590

我能够 ping 我的连接，但仍然收到“连接被拒绝”错误。原来我在ping自己！这就是问题所在。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-08T01:19:15.557

我在我的代码中遇到了同样的问题，经过几天的搜索，我终于找到了解决方案，问题是函数 socket.gethostbyname(socket.gethostname) 在 linux 中不起作用，所以你必须使用 socket。 gethostbyname('手动输入主机名') 不是 socket.gethostbyname('localhost')，使用 socket.gethostbyname('host') 与 ifconfig 一起查看。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-01-07T18:05:34.020

在终端尝试这个命令：

```
sudo ufw enable
ufw allow 12397 
```

# c++ - '结构标准::对 ' 没有名为 'serialize' 的成员

> ID：16130787
> 
> 赞同：8
> 
> 时间：2013-04-21T11:49:53.317
> 
> 标签：c++, serialization, boost

我正在尝试将序列化集成到我的代码中。但是，我得到一个“没有命名成员”错误。我正在阅读的书说 std::pair 不需要包含头文件并且不存在。如何修复此错误？我的代码如下所示：

```
#include <iostream>
//ofstream/ifstream
#include <fstream>

#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>
//stringstream
#include <sstream>
//
#include <boost/serialization/complex.hpp>  
#include <boost/serialization/bitset.hpp>   
//#include <boost/serialization/

//BOOST_BINARY
#include <boost/utility/binary.hpp>

using namespace std;

int main()
{
    complex<double> c(1,0); 
    bitset<3> b(BOOST_BINARY(101)); 
    pair<int,int> p(1,2);   
    string s;
    std::stringstream ss(s);
    boost::archive::text_oarchive oa(ss);
    oa<<c<<b<<p;    
    {
        complex<double> c;
        bitset<3> b;
        pair<int,int> p;
        boost::archive::text_iarchive ia(ss);
        ia>>c>>b>>p;    
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T18:58:33.973

添加`#include <boost/serialization/utility.hpp>`以启用`std::pair`序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:32:59.837

为什么要`std::pair`提供一个`serialize`功能？标准从来没有这么说。说它不需要头文件也是不正确的：它确实需要 <utility>。但是，它可能已经包含在您使用的另一个头文件中。

您可以提供自己的`serialize`功能。Boost 已经提供了示例。在您的情况下，您需要在`main`.

```
namespace boost {
namespace serialization {

template <class Archive, typename T1, typename T2>
void serialize(Archive& ar, std::pair<T1, T2>& pr, const unsigned int version)
{
    ar & pr.first;
    ar & pr.second;
}

} // namespace serialization
} // namespace boost 
```

`string s`顺便说一句，我认为在您的代码中不需要使用。您可以删除该行并使用：

```
std::stringstream ss; 
```

# vb.net - 将大文件存储到 SQLite 时出现内存不足错误

> ID：16130788
> 
> 赞同：1
> 
> 时间：2013-04-21T11:49:58.873
> 
> 标签：vb.net, sqlite, memory

我正在开发一个将任何文件转换为二进制文件然后将其存储在 sqlite 数据库中的程序。我在 VB.Net 中这样做。

一切正常，除非我使用大约 200MB 的文件大小。我得到：

```
malloc() out of memory 
```

有没有办法处理这个问题或阻止 sqlite 使用内存以便它直接从硬盘工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:57:32.933

目前 sqlite 仅支持长度为 231-1 或 2147483647 的字符串或 BLOB。

所以我觉得你需要在可行的情况下在你的解决方案中实施压缩或限制文件大小

# c# - 如何处理 GridView 上的行双击，以及如何获取选定的行

> ID：16130789
> 
> 赞同：3
> 
> 时间：2013-04-21T11:49:59.853
> 
> 标签：c#, asp.net-mvc, gridview

我正在开发一个 MVC 应用程序。我的要求如下。

1.  添加/编辑/删除功能（使用编辑器模板完成）。完毕
2.  双击行时显示只读信息。- 需要解决方案。
3.  删除按钮单击中的选定行

描述：用户应该能够通过双击该行来查看该行的详细信息。双击该行应以只读模式显示详细信息。

然后另一个问题是我如何能够选择一行并通过单击按钮将其删除。

请让我知道如何实现此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:03:28.310

通常类似的东西是用 javascript/jQuery 实现的。

当页面首次加载但从视图中隐藏时，您将关闭只读数据。然后进行设置，这样当你双击一行时，通过修改 CSS 显示值来显示额外的信息。

在另一个窗口或您想要的任何其他窗口中显示此信息同样容易。

有关更多信息，请查看[jQuery](http://jquery.com/)网站

# java - 等待过渡结束

> ID：16130795
> 
> 赞同：-1
> 
> 时间：2013-04-21T11:50:29.507
> 
> 标签：java, multithreading, javafx-2, javafx, synchronized

如何等待 JavaFx 转换结束？

*   我有一个交互式排序算法。
*   每个数字都由一个矩形表示。
*   当两个数字交换时，矩形必须交换。

问题是动画持续时间为 1 秒，此时整个数组已经排序。我已经做了一个交换矩形的同步方法。但是当它制作“transition.play();”时

我认为转换正在另一个线程中运行，因此它必须等待转换结束才能结束该方法。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:16:11.973

这取决于您如何对数组进行排序。如果可以一步一步排序，那么执行一步排序，然后启动单个动画。由于您知道持续时间为 1 秒，因此只需睡眠 1 秒，然后再执行此类步骤。继续直到整个数组被排序。

如果 JavaFx 允许您在动画完成时接收回调，则侦听回调以了解何时可以开始下一步。

# java - Android 获取 ImageButton 的背景资源

> ID：16130797
> 
> 赞同：3
> 
> 时间：2013-04-21T11:50:51.143
> 
> 标签：java, android, image, background, imagebutton

我需要获取一些 ImageButton 的背景资源，以便稍后重新使用它，以设置我使用 setBackgroundResource 的背景。我没有找到任何方法来获取背景资源。

```
private void AddImage(int img){
    ImageButton imgact1 = (ImageButton)findViewById(R.id.imgact1);
    ImageButton imgact2 = (ImageButton)findViewById(R.id.imgact2);
    ImageButton imgact3 = (ImageButton)findViewById(R.id.imgact3);
    imgact3.setBackgroundResource(img);
} 
```

谢谢你的帮助 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:03:50.570

至于任何`View`，你应该使用`getBackground()`，它返回一个`Drawable`。

# ios6 - 四舍五入并不总是按预期工作

> ID：16130805
> 
> 赞同：1
> 
> 时间：2013-04-21T11:52:44.600
> 
> 标签：ios6, rounding-error, rounding

我想向我的用户收取他们使用服务的每小时或分数的 1 个信用额度。为了计算成本，我使用以下代码，但在某些情况下，例如当开始日期和结束日期正好相差一天时，我得到的成本是 25 个学分而不是 24 个：

```
NSNumberFormatter *format = [[NSNumberFormatter alloc]init];
[format setNumberStyle:NSNumberFormatterDecimalStyle];
[format setRoundingMode:NSNumberFormatterRoundUp];
[format setMaximumFractionDigits:0];
[format setMinimumFractionDigits:0];
NSTimeInterval ti = [endDate timeIntervalSinceDate:startDate];
float costValue = ti/3600;
self.cost = [format stringFromNumber:[NSNumber numberWithFloat:costValue]]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:02:44.957

`NSTimeInterval`具有亚毫秒精度。如果日期相隔一天零一毫秒，您将收取第 25 个信用额度。

更改代码以进行整数除法应该可以解决问题：

```
// You do not need sub-second resolution here, because you divide by 
// the number of seconds in the hour anyway
NSInteger ti = [endDate timeIntervalSinceDate:startDate];
NSInteger costValue = (ti+3599)/3600;
// At this point, the cost is ready. You do not need a special formatter for it. 
```

# django - ModelForm 不呈现 TinyMCE（ReferenceError: tinyMCE 未定义）

> ID：16130810
> 
> 赞同：7
> 
> 时间：2013-04-21T11:53:11.847
> 
> 标签：django, tinymce, django-tinymce

我让 django-tinymce 为管理页面工作。现在在管理页面之外，当使用模型表单时，我期望 TinyMCE 编辑器被加载并显示给用户，但这并没有发生。我所看到的只是一个纯文本区域。但它适用于管理页面。

```
from tinymce.models import HTMLField
class Punch(models.Model):
    discussion      = HTMLField()

class PunchForm(forms.ModelForm):    
    class Meta:
        model = Punch 
```

我可以通过 firebug 看到 TinyMCE 片段已添加到 HTML：

![在此处输入图像描述](https://i.stack.imgur.com/vpXsp.png)

但是我在控制台中收到一条错误消息：

```
ReferenceError: tinyMCE is not defined 
```

这没有任何意义，为什么管理页面找到 TinyMCE 没有问题？此外，我什至将它自己添加到了 base.html 中：

```
<script type="text/javascript" src="{{ STATIC_URL }}tiny_mce/tiny_mce.js"></script> 
```

服务器也可以加载它：

```
[21/Apr/2013 13:42:40] "GET /static/tiny_mce/tiny_mce.js HTTP/1.1" 304 0 
```

那么请问可能是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T12:19:52.270

哦，天哪，真是个愚蠢的错误。

所以我可以确认我必须`base.html`像在我的问题中那样定义 js。

```
<script type="text/javascript" src="{{ STATIC_URL }}tiny_mce/tiny_mce.js"></script> 
```

但是，这必须在标题中而不是正文中。标头首先被初始化，因此不会再有`ReferenceError: tinyMCE is not defined`

希望它可以帮助别人。

# mvvm - 为什么索引器在 WP8 绑定中不起作用？

> ID：16130812
> 
> 赞同：1
> 
> 时间：2013-04-21T11:53:11.963
> 
> 标签：mvvm, binding, windows-phone-8

我正在尝试将视图中的元素绑定到视图模型中的矩阵。在绑定中，我想使用索引器，这样我就可以检索我想要的元素。以下语法不起作用：

```
Fill="{Binding OwnBoard[0\,0], Converter={StaticResource BoardToBackConv}}" 
```

如果我删除索引器，绑定就完成了，我在转换器中获得了 OwnBoard 属性的值，但是一旦我添加了索引器，它就不再起作用并且永远不会调用转换器。

你知道为什么这在 Windows Phone 8 中不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:00:41.127

不幸的是，Silverlight 似乎不支持二维索引器（Windows Phone .net 应用程序基于 Silverlight）： http: [//msdn.microsoft.com/en-us/library/cc645024 (v=vs.95 ).aspx/html#indexdata](http://msdn.microsoft.com/en-us/library/cc645024(v=vs.95).aspx/html#indexdata)

> 仅支持一维数组索引。

作为一种解决方法，我建议使用转换器，但由于您已经在使用一个转换器，因此您必须找到一种方法来链接两个转换器。

# jquery - 如何使用 jQuery UI Datepicker 和 Rails 更改日期格式？

> ID：16130815
> 
> 赞同：0
> 
> 时间：2013-04-21T11:53:25.317
> 
> 标签：jquery, ruby-on-rails, jquery-ui, formatting, jquery-ui-datepicker

我无法相信日期选择器有多复杂。我查看了有关 Stackoverflow 的各种问题，但无法使格式正常工作。我使用 Railscasts #213 Calendars（修订版）来设置 jQuery Datepicker。

在南非，我们使用 dd/mm/yyyy 格式，而不是大家所说的 mm/dd/yyyy 格式。

第一个问题是当我选择它在表单上显示为 mm/dd/yyyy 的日期时。我无法更改 - 尝试更改 Coffee Script，但这无济于事：

```
 jQuery ->
   $('#post_date').datepicker()
   dateFormat: "dd/mm/yy"
   minDate: "1w" 
```

发布后它显示为 mm/dd/yyyy，但现在我希望日期以文字形式显示，并且以下代码 2013 年 4 月 1 日显示为 2013 年 1 月 4 日。

```
 <%= @post.date.strftime("%b %d %Y") %> 
```

我尝试安装 I18n 并在 en.yml 上设置默认值，但这没有效果：

```
 date:
         formats:
          default: "%d/%m/%y" 
```

请有人可以直接回答如何做到这一点？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:59:40.490

我无法帮助您使用 jQuery 日期选择器，因为我从未使用过它。也许这篇文章就是你需要的：[jQuery UI DatePicker - Change Date Format](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format)

基本上，这应该可以解决您的问题：

```
$('#post_date').datepicker(dateFormat: 'dd-mm-yy'); 
```

至于在打印日期时格式化日期，而不是使用 strftime 这样做，您可以通过在应用程序的 config/initializers 文件夹中创建 date_formats.rb 并添加以下行来快速设置日期的通用默认格式：

```
Date::DATE_FORMATS[:default] = "%d-%m-%Y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:10:37.147

Coffee 脚本应该是（见括号）：

```
 $('#post_date').datepicker (dateFormat: 'dd-mm-yy') 
```

我不知道 Railscasts #213 日历（修订版）是如何工作的，因为 Ryan 根本不使用方括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:21:32.877

我意识到这已经晚了，但[在此处输入链接描述](http://api.jqueryui.com/datepicker/)有助于以您正在寻找的形式格式化数据。

我不得不求助于直接连接 jquery 插件，因为 rails 钩子对我不起作用（日历从未弹出）

# asp.net-mvc-3 - MVC FluentNhibernate 在哪里创建 ISessionFactory

> ID：16130817
> 
> 赞同：2
> 
> 时间：2013-04-21T11:53:30.483
> 
> 标签：asp.net-mvc-3, fluent-nhibernate

我刚刚开始使用 ASP.NET MVC 3 学习 FluentNhibernate，所以如果这个问题听起来很愚蠢或者我不够清楚，请原谅我。

我的解决方案由 2 个项目组成：Web 界面和业务层。下面是初始化 NHibernate 会话工厂的代码块：

```
public static ISessionFactory SessionFactory { get; private set; }

public static ISessionFactory SessionFactory
{
    get
    {
        if (_sessionFactory == null) InitializeSessionFactory();
        return _sessionFactory;
    }
}

public static void InitializeSessionFactory()
{
    SessionFactory = Fluently.Configure()
    .Database(MsSqlConfiguration.MsSql2008
    .ConnectionString(m => m.FromConnectionStringWithKey("connString")).ShowSql())
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<MySampleObjectMap>())
    .ExposeConfiguration(c => c.SetProperty("current_session_context_class", "web"))
    .BuildSessionFactory();
}

public static ISession OpenSession()
{
    return SessionFactory.OpenSession();
} 
```

所以，我的问题是我必须在哪里实例化和初始化 NHibernate 会话工厂？

1.  在业务层上，以便持久层将是独立的，或者，

2.  在 MVC Web 项目的 Global.asax.cs 中做些什么？

    每个我不知道的好处是什么？

# php - file_get_contents 处理错误的好方法

> ID：16130818
> 
> 赞同：14
> 
> 时间：2013-04-21T11:53:35.973
> 
> 标签：php, html

我正在尝试错误处理 file_get_contents 方法，因此即使用户输入了错误的网站，它也会回显错误消息而不是不专业的

> 警告：file_get_contents(sidiowdiowjdiso)：打开流失败：第 6 行的 C:\xampp\htdocs\test.php 中没有这样的文件或目录

我想如果我尝试并抓住它，它将能够抓住错误，但这不起作用。

```
try  
{  
$json = file_get_contents("sidiowdiowjdiso", true); //getting the file content
}  
catch (Exception $e)  
{  
 throw new Exception( 'Something really gone wrong', 0, $e);  
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T12:04:22.337

尝试使用[curl_error](http://www.php.net/manual/en/function.curl-error.php)而不是 file_get_contents 的 cURL：

```
<?php
// Create a curl handle to a non-existing location
$ch = curl_init('http://404.php.net/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$json = '';
if( ($json = curl_exec($ch) ) === false)
{
    echo 'Curl error: ' . curl_error($ch);
}
else
{
    echo 'Operation completed without any errors';
}

// Close handle
curl_close($ch);
?> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-21T12:00:48.080

`file_get_contents`不要错误抛出异常，而是返回false，因此您可以检查返回值是否为false：

```
$json = file_get_contents("sidiowdiowjdiso", true);
if ($json === false) {
    //There is an error opening the file
} 
```

这样你仍然会收到警告，如果你想删除它，你需要`@`在`file_get_contents`. （这被认为是一种不好的做法）

```
$json = @file_get_contents("sidiowdiowjdiso", true); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-21T12:07:05.570

You could do any of the following:

Set a global error handler (that will handle WARNINGs as well), for all of your unhandled exceptions: [http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

Or by checking the return value of the file_get_contents function (with the === operator, as it will return boolean false on failure), and then manage the error message accordingly, and disable the error reporting on the function by prepending a "@" like so:

```
$json = @file_get_contents("file", true);
if($json === false) {
// error handling
} else {
// do something with $json
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:18:12.930

作为您的问题的解决方案，请尝试执行以下代码片段

```
 try  
{  
  $json = @file_get_contents("sidiowdiowjdiso", true); //getting the file content
  if($json==false)
  {
     throw new Exception( 'Something really gone wrong');  
  }
}  
catch (Exception $e)  
{  
  echo $e->getMessage();  
} 
```

# biopython - 取来的氨基酸变色

> ID：16130820
> 
> 赞同：0
> 
> 时间：2013-04-21T11:54:20.087
> 
> 标签：biopython, pymol

我想编写一个 PyMOL 脚本来改变 XYZ 位置的氨基酸颜色（或者以某种方式在 XYZ 位置放置一些带有标签的标记）。

有人知道怎么做这个吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:57:12.580

你知道PyMOL 中的[伪原子](http://www.pymolwiki.org/index.php/Pseudoatom)和[标签吗？](http://pymolwiki.org/index.php/Label)

```
# to create a banner at certain position
pseudoatom mypsatm, pos=[10.0,10.0,10.0]  
show spheres, mypsatm
color red, mypsatm                     # now you see me
hide everything, mypsatm
label mypsatm, 'How about this'        # only show banner  

# to select residues close to that position
select mysel, byres mypsatm around 4   # 4 Angstroms around mypsatm 
```

# mysql - 测试与 MySQL 服务器的连接

> ID：16130824
> 
> 赞同：1
> 
> 时间：2013-04-21T11:54:53.143
> 
> 标签：mysql, mysql-python

测试与 MySQL 服务器的连接的最佳/正确方法是什么。例如，您可以 ping 它吗？我正在使用 MySQLdb 和 python。

我希望我的程序按以下方式构建

```
....connect to MySQL server 
database = MySQLdb.connect(host="127.0.0.1 etc...

While true:
    **... Check to see if connection is still alive if not reconnect** 

    ... send data to MySQL...
    time.sleep(30) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:36:27.430

这是我用过的。

```
import MySQLdb

try:
    import MySQLdb.converters
except ImportError:
    _connarg('conv')

def connect(host='ronak.local', user='my_dev_1', passwd='my_dev_1', db='my_dev1', port=3306):

    try:
        orig_conv = MySQLdb.converters.conversions
        conv_iter = iter(orig_conv)
        convert = dict(zip(conv_iter, [str,] * len(orig_conv.keys())))
        print "Connecting host=%s user=%s db=%s port=%d" % (host, user, db, port)
        conn = MySQLdb.connect(host, user, passwd, db, port, conv=convert)
    except MySQLdb.Error, e:
        print "Error connecting %d: %s" % (e.args[0], e.args[1])
    return conn

def parse_data_and_description(cursor, data, rs_id):

    res = []
    cols = [d[0] for d in cursor.description]

    for i in data:
        res.append(OrderedDict(zip(cols, i)))
    return res
    rs_id=0;

def get_multiple_result_sets():
    conn = connect()
    cursor = conn.cursor( )
    final_list = []
    try:
        conn.autocommit(True)
        cursor.execute ("CALL %s%s" % (sp, args))
        while True:
            rs_id+=1

            data = cursor.fetchall( )
            listout = parse_data_and_description(cursor, data, rs_id)
            print listout
            if cursor.nextset( )==None:
                # This means no more recordsets available
                break
            print "\n"
            # Consolidate all the cursors in a single list
            final_list.append(listout)
        print final_list
    except MySQLdb.Error, e:
        # Lets rollback the transaction in case of an exception
        conn.rollback()
        print "Transaction aborted: %d: %s" % (e.args[0], e.args[1])
        cursor.close( )
        conn.close()
    else:
        # Commit the transaction in case of no failures/exceptions
        conn.commit()
        print "Transaction succeeded"
        cursor.close( )
        conn.close() 
```

# c# - 在 WindowsPhone 中从 Web 下载一些图像时出现 AG_E_NETWORK_ERROR

> ID：16130826
> 
> 赞同：3
> 
> 时间：2013-04-21T11:55:08.280
> 
> 标签：c#, silverlight, windows-phone-7, html-agility-pack

我正在使用 HtmlAgilityPack。我正在从一个网站下载文章和图片。80% 的图片下载没有问题。但是一些图像抛出错误。我可以在 image_failed 事件中看到错误名称。我正在下载这样的图像：

```
 Image = new BitmapImage(new Uri(img.Attributes["src"].Value)); 
```

我搜索了谷歌，发现这确实是 WTF 问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:26:30.873

推荐人标题很有可能把你搞砸了。您需要自己发出调用（而不是依赖 BitmapImage 来下载文件）。

有一个方便的片段/实用程序可以“扩展”xaml 并使其更容易执行。

[http://blogs.msdn.com/b/swick/archive/2011/08/04/wp7-mango-image-download-with-custom-referer-header.aspx](http://blogs.msdn.com/b/swick/archive/2011/08/04/wp7-mango-image-download-with-custom-referer-header.aspx)

**编辑：解释**

许多网站阻止对不是来自其网站的图像的请求。这样，如果您有[http://mysite.com](http://mysite.com)并且链接到[http://cnn.com](http://cnn.com)中的图像，他们可以阻止直接链接的图像并重定向它们或其他东西。

现在，它起作用的原因是浏览器控制从标记（或任何其他机制，如 AJAX）发出的所有调用，并添加 REFERRER HTTP 标头，说明请求来自哪里（[http://mysite.com](http://mysite.com)） - 然后 cnn.com 代码可以阻止它。

在 .NET 桌面中，Referrer 标头不会自动添加到请求中 - 这意味着调用将被某些检查空引用者的站点阻止，而不是其他不检查的站点。

切换到基于 Silverlight 的 WP7/8。在 Silverlight 中，引用者是托管 Silverlight 控件的站点。因此，如果您在[http://mysite.com](http://mysite.com)上运行了一个 SL 控件并且它发出 [任何] http 请求，那么推荐人标头将自动为您设置为[http://mysite.com](http://mysite.com). 没有办法控制那个 afaik（出于安全原因）。然而，Windows Phone 虽然基于 SL，但不需要受相同的安全约束。但是，当他们将代码“移植”到 Windows Phone 时，他们将一些值放入 referrer 中 - 该值实际上是手机内的包位置（您可以使用 fiddler 看到这一点）。它实际上是一些路径（/apps/storage/[guid]）或类似的东西 - 我不记得确切的值。为了解决这个问题，您可以在发出请求的 HTTP 标头上将引荐来源网址设置为站点。

希望这说明清楚。

# javascript - 如何为 FabricJS 对象设置背景图像

> ID：16130827
> 
> 赞同：1
> 
> 时间：2013-04-21T11:55:37.693
> 
> 标签：javascript, canvas, fabricjs

我想创建一个圆形对象并将填充设置为非重复图像。

我已经尝试过使用模式，但是当我设置`repeat`为时`no-repeat`，模式会在中间偏移，而不是在左上角。（这将让您看到整个图像。）

1.  有没有办法将整个图像设置为对象的背景？
2.  如果没有，有没有办法抵消不重复的背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:20:25.913

您可以通过用圆圈剪裁图像来做到这一点。看看[这个演示](http://fabricjs.com/clipping)。

模式偏移是路线图上的内容。我只是继续[执行它们](https://github.com/kangax/fabric.js/commit/22de40dc54774d586ba7694446700f74feb27dad)。

看看[这个演示](http://fabricjs.com/dynamic-patterns)。只需将模式的 offsetX/offsetY 属性调整为您需要的任何属性，或者将它们保留在 0/0 处，这将是对象的左/上角。

# android - 取决于行值的每行具有不同布局的 Android Listview

> ID：16130828
> 
> 赞同：0
> 
> 时间：2013-04-21T11:55:42.300
> 
> 标签：android, listview, baseadapter, custom-adapter

我正在尝试确定使单个`Listview`包含不同行样式的最佳方法。

`getViewTypeCount()`我搜索了很多，发现了一些使用and的技巧`getItemViewType(int position)`，让列表视图布局根据位置而变化，这不是我想要的。

我要做的是根据行本身的 textview 值更改列表视图布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:06:40.380

I don't understand why you cant achieve this with the methods listed above, if you know how many views you have, then create an .xml for each one of them and then in the `getView()` inflate the corresponding layout depending on the value of your `textview`. You then return this row and it should then work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:06:50.233

well, this is exactly what you need to do.

override the `getViewTypeCout` to return the amount of types you have.
override the `getItemViewType` and determine the type according to the position (or item to show)

after you do that, just use this in your `getView` like this:

```
public View getView(int position, View convertView, ViewGroup parent) {
    if(getItemViewType(position) == FIRST_VIEW_TYPE) {
        // inflate first view
    } else {
        // inflate seconde view
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:07:54.873

> I searched alot and found some tricks using getViewTypeCount() and getItemViewType(int position), to let the listview layout changes depending on position and that was not what I'm looking for.

Yes, it is.

> What I'm trying to do is to change the listview layout depeding on a textview value on the row itself.

No, you are not. You are trying to "change the listview layout depeding [sic] on" some text that you plan on putting into "a textview value on the row itself". As mr_archano points out, this `TextView` is not magically getting a value -- it is getting a value based on something *you* put there by one means or another.

Hence:

*   Override `getViewTypeCount()` to return the number of distinct possible row types

*   Override `getItemViewType()` to return a value from 0 to `getViewTypeCount()-1` based upon *the text* that you plan on pouring into the `TextView`

*   Ensure that your `getView()` or `bindView()` implementation is aware of the different view types and handles them accordingly

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:11:15.433

ListView Row 中的 TextView 的内容必须来自您定义的一些数据（我假设可能是 ArrayList 或类似的数据），所以您需要做的是检查您之前要根据该数据绘制什么样的视图绘制 ROW，这是在 getView() 方法上完成的。

当 ListView 想要呈现给定元素时调用 getView()，您认为它与位置无关，但确实如此。您在绘制之前知道 TextView 的内容，因此解析该值并在 getView 中动态使用您想要的布局类型；）。

如果仍不清楚，请阅读此内容：[Android 自定义列表视图行](https://stackoverflow.com/questions/10346348/android-custom-listview-row)

# android - Facebook URL 方案不起作用 fb://publish

> ID：16130830
> 
> 赞同：8
> 
> 时间：2013-04-21T11:56:21.263
> 
> 标签：android, iphone, ios, facebook, url-scheme

我刚刚意识到 Facebook URI 方案发布功能不再起作用。它会打开 Facebook 应用程序，但仅此而已。有没有办法通过 URI 方案发布内容？
你可以在下面找到我的代码。

```
NSString *post = [NSString stringWithFormat:@"fb://publish/profile/me?text=foo"];        
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:post]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:11:45.890

我认为这是使用 URL 完成的方法：

[关联](https://developers.facebook.com/docs/reference/api/publishing/)

您需要来自 facebook 的访问令牌。之后，您可以按照此链接的说明和要求进行操作。

[关联](https://developers.facebook.com/docs/reference/api/post/)

并且有一个用于 HTTP 请求的 Graph API explorer。

[关联](https://developers.facebook.com/tools/explorer/?method=GET&path=19292868552_10150189643478553)

我希望这对你有帮助。就我而言，我使用易于使用且用户友好的 iOS 社交框架。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T17:47:27.293

前段时间有一个 SDK 更新改变了 URL 方案的工作方式。如果您最近更新了旧的 SDK，您可能需要确保正确设置它。

此处的 Facebook 开发人员门户中描述了执行此操作的新方法：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

具体来说，深入到第 5 步并查看该部分中的最后一个屏幕截图。

您可以清楚地看到 URL 方案现在必须包含您的 Facebook 应用程序 ID。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-02T09:48:37.507

```
NSString *post = [NSString stringWithFormat:@"fb://profile/me?text=foo"];        
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:post]]; 
```

# jquery - jQuery parent next 似乎不起作用

> ID：16130832
> 
> 赞同：1
> 
> 时间：2013-04-21T11:56:42.690
> 
> 标签：jquery

我正在努力解决一个我无法处理的问题，我有一个包含数据库记录的表，它是通过 while 循环创建的，所以它们看起来都一样。问题是一个简单的 .delete 单击然后 .warning 淡入函数将出现所有具有相同类的 div，但我需要一个只出现一个 div 的代码。希望你明白。

HTML 代码：

```
<td>
  <img class='delete' title='Delete Row' alt=\"Delete\" src='css/images/delete.png'/>
  <div class='warning'>Are you sure you want to delete this record ?<br/>
    <a id='yes' href=\"delete_client.php?column1=".$row['client_id']."\">Yes</a>
    <a id='no'>No</a>
  </div>
</td>
<br/>
<td>
  <img class='delete' title='Delete Row' alt=\"Delete\" src='css/images/delete.png'/>
  <div class='warning'>Are you sure you want to delete this record ?<br/>
    <a id='yes' href=\"delete_client.php?column1=".$row['client_id']."\">Yes</a>
    <a id='no'>No</a>
  </div>
</td>
<br/>
<td>
  <img class='delete' title='Delete Row' alt=\"Delete\" src='css/images/delete.png'/>
  <div class='warning'>Are you sure you want to delete this record ?<br/>
    <a id='yes' href=\"delete_client.php?column1=".$row['client_id']."\">Yes</a>
    <a id='no'>No</a>
  </div>
</td> 
```

我尝试了这个 jQuery 代码，但它似乎不起作用，因为什么都没有出现。

```
$('.delete').click(function() {
    $(this).parent().next('.warning').fadeIn('slow');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:58:11.837

你只需要这样做 -

```
$('.delete').click(function() {
    $(this).next('.warning').fadeIn('slow');
}); 
```

# visual-c++ - scons Visual Studio Express 2012 构建不起作用

> ID：16130835
> 
> 赞同：0
> 
> 时间：2013-04-21T11:56:55.807
> 
> 标签：visual-c++, express, scons

我只看文档- [scons 简单示例](http://www.scons.org/doc/production/HTML/scons-user/c258.html#AEN263)，它对我不起作用。

第一个文件：`main.cpp`

```
#include <iostream>

int main()
{
    std::cout << "Hello World" << std::endl;
    return 0;
} 
```

第二个文件：SCons`SConstruct`

```
Program('main.cpp') 
```

结果：

```
 scons: Reading SConscript files ... 
 scons: done reading SConscript
 files. scons: Building targets ...
 cl /Fomain.obj /c main.cpp /TP /nologo
 "cl" is not an internal or external command, operable program or batch file.
 scons: *** [main.obj] Error 1 scons:
 building terminated because of errors. 
```

我在带有 Visual Studio Express 2012、scons 2.3 的 Window 7 上试过这个有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:29:35.807

如果我自己创建环境，一切正常。

```
env = Environment(ENV = {'PATH' : os.environ['PATH'], \
            'INCLUDE' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Include\um\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\shared\\', \
            'LIB' : 'c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\lib\\;c:\\Program Files (x86)\\Windows Kits\\8.0\\Lib\\win8\\um\\x86\\'}) 
```

此外，如果从 cmd.exe 构建，则在调用 scons 之前调用“C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\vcvars32”，如果使用 Visual Studio NMAKE 中的 scons 构建，请为您执行此操作。

# asp.net-mvc - MVC DropDownListFor 获取 2 个名字

> ID：16130836
> 
> 赞同：3
> 
> 时间：2013-04-21T11:56:57.573
> 
> 标签：asp.net-mvc, variables, html.dropdownlistfor

嗨，我正在为学校作业开发银行系统。您能否在下拉列表中传递 2 个名称，例如：

这是模型

```
public TransferModel(int bankId, int userid)
{
    myAccount = new Service1Client().getAccountByID(bankId);
    AccountList = new SelectList(new Service1Client().RetrieveAllAccountsByAccountId(userid), "Id", "Name");
} 
```

我正在将 Id、Name 设置为选择列表

看法：

```
<div class="editor-field">
    Withdraw From: <%: Html.DropDownListFor(model =>  model.myAccount.Id, Model.AccountList)%>
</div> 
```

选择列表将仅显示帐户名称。是他们有机会在下拉列表中显示名称和余额。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:54:47.607

像下面这样的东西将是一种非常整洁的处理方式：

```
public class AccountModel
{
    public string Id { get; set; }
    public string Name { get; set; }
    public Decimal Balance { get; set; }

    public string AccountSummary
    {
       get
       {
           return String.Format("{0} ({1:C})", Name, Balance);
       }
    }
}

public class TransferModel
{
    public IList<AccountModel> Accounts { get; set; }
    public string SelectedAccountId { get; set; }
    /* Whatever other properties your view needs */
} 
```

键入您的视图`TransferModel`并执行以下操作：

```
<%: Html.DropDownListFor(model =>  model.SelectedAccountId,
    new SelectList { Model.Accounts, "Id", "AccountSummary" )%> 
```

# javascript - javascript getElementsByClassName 值错误

> ID：16130846
> 
> 赞同：1
> 
> 时间：2013-04-21T11:58:03.233
> 
> 标签：javascript, class, get

我在 javascript popUp 中有一个小函数，我想知道 getElementByClassName 函数是否返回一个包含该类的所有元素的数组，而不是为什么当我提醒它说对象 Html 输入元素时，尽管我的表单编号字段中有什么（空白空间或一些数字）。那么我如何从该数组中获取值。

```
 var arr = document.getElementsByClassName('num');

function popUp(){
    for(var i = 0;i < arr.length;i++){
        alert(arr[i]);
    }
} 
```

这是HTML：

```
<form id = "matrix">

<input type = "number" class = "num" />
<input type = "number" class = "num" />

<input type = "number" class = "num" />
<input type = "number" class = "num" />

<input type = "button" value = "count" id = "count" onclick = "popUp()"/>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:00:14.887

使用 .value

像

```
alert(arr[i].value); 
```

如果你需要兼容 IE8-，你不应该使用

```
type = "number" 
```

它是 HTML5，IE8 不支持。
请改用 type="text"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:03:01.620

`document.getElementsByClassName()`返回一个 DOM 元素的集合，以便`arr[i]`获取 DOM 元素，而不是元素中的内容。如果您想要来自该 DOM 元素的属性，例如`value`标签的`input`，那么您必须引用您想要的属性，例如`.value`：

```
var arr = document.getElementsByClassName('num');

function popUp(){
    for(var i = 0;i < arr.length;i++){
        alert(arr[i].value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:05:22.637

getElementsByClassName 将返回所有匹配的 html 元素的列表。通过调用 alert(arr[i])，您是在告诉客户端显示元素，而不是其值，这就是为什么警报消息告诉您它是一个 html 输入。要显示元素的值，请使用以下命令

```
alert(arr[i].value); 
```

# jquery - 一起使用Repeater和jQuery

> ID：16130849
> 
> 赞同：1
> 
> 时间：2013-04-21T11:58:22.820
> 
> 标签：jquery, asp.net, repeater, clientid

我检查了很多关于我的问题的博客答案，我也从这个网站找到了一些解决方案，我尝试了所有这些。但我不知道这是为什么？这些解决方案不能解决我的问题，我总是会出错。最后，我找到了一个我认为是正确的解决方案，因为在许多地方这个解决方案是被接受的。但这不能再次解决我的问题。

```
$("#<%=plusBttn.ClientID%>") 
```

尝试此解决方案时出现此错误：plusBttn 在当前上下文中不存在。

我对按钮和文本框的客户端模式使用可预测模式。简单地说，我想通过控制我的按钮来更改显示在文本框（QuantityTxtbx）中的数量（minusBttn 用于减少 quantityTxtbx 值的值，而 plusBttn 类似地用于增加值）

实际上我的问题在于通过在 jscript 中使用 ClientID 来查找我的控件。

上面显示的代码都在Repeater,ItemTemplate中：

我在 asp.net 页面中的 jscript 代码：

```
$(document).ready(function () {

   $("#<%=plusBttn.ClientID%>").click(function () {
      var value = parseInt($("input[id$='QuantityTxtbx']").val());
      value = value + 1;
      $("input[id$='QuantityTxtbx']").val(value);
      });

     $("input[id$='#minusBttn_']").click(function () {
                var value = parseInt($("input[id$='QuantityTxtbx']").val());
                                    if (value > 1)
                                        value = value - 1;
                                    $("input[id$='QuantityTxtbx']").val(value);
                                });
                            }); 
```

还有我的控制；

```
 <asp:Button ID="minusBttn" runat="server" Text="-"  ClientIDMode="Predictable"/> 
    <asp:TextBox ID="QuantityTxtbx" runat="server" Text='<%#Eval("Quantity") %>' Enabled="False" EnableTheming="False" EnableViewState="False" Height="16px" Width="16px" Wrap="False"ClientIDMode="Predictable">1</asp:TextBox>
    <asp:Button ID="plusBttn" runat="server" Text="+" ClientIDMode="Predictable" /> 
```

好的抱歉误会，这是我的浏览器端代码：

```
<script type="text/jscript">

                        $(document).ready(function () {
                            var plusBttn = $("input[id$='minusBttn']");
                            $("input[id$='#minusBttn_']").click(function () {
                                var value = parseInt($("input[id$='QuantityTxtbx']").val());
                                value = value + 1;
                                $("input[id$='QuantityTxtbx']").val(value);

                            });
                            $("input[id$='#minusBttn_']").click(function () {
                                var value = parseInt($("input[id$='QuantityTxtbx']").val());
                                if (value > 1)
                                    value = value - 1;
                                $("input[id$='QuantityTxtbx']").val(value);
                            });
                        });

                    </script>

                    <input type="submit" name="ctl00$ContentPlaceHolder1$Repeater1$ctl01$minusBttn" value="-" id="ctl00_ContentPlaceHolder1_Repeater1_ctl01_minusBttn_0" /> 

                    <input name="ctl00$ContentPlaceHolder1$Repeater1$ctl01$QuantityTxtbx" type="text" value="2" id="ctl00_ContentPlaceHolder1_Repeater1_ctl01_QuantityTxtbx_0" disabled="disabled" style="height:16px;width:16px;" />
                    <input type="submit" name="ctl00$ContentPlaceHolder1$Repeater1$ctl01$plusBttn" value="+" id="ctl00_ContentPlaceHolder1_Repeater1_ctl01_plusBttn_0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T10:15:32.237

尝试使用以下代码：

```
$("#<%#Container.FindControl("plusBttn").ClientID%>") 
```

我们已经知道基于内容的母版页 chagnes ID，`ContentPlaceHolder`并且使用转发器它会为您的任何数据库连接迭代新的 ID。jquery`.FindControl`适用于您的数据绑定 plusBttn ClientID。

然后将您的 jquery 脚本更新为：

```
$(document).ready(function () {
var plusBttn = $("#<%#Container.FindControl("plusBttn").ClientID%>");
 $("#<%#Container.FindControl("minusBttn").ClientID%>").click(function () {
     $("#<%#Container.FindControl("QuantityTxtbx").ClientID%>").val();
  });
 $("#<%#Container.FindControl("minusBttn").ClientID%>").click(function () {
     $("#<%#Container.FindControl("QuantityTxtbx").ClientID%>").val();
  });
}); 
```

# javascript - 打开标签，等待它完成加载然后关闭它

> ID：16130850
> 
> 赞同：3
> 
> 时间：2013-04-21T11:58:24.867
> 
> 标签：javascript, google-chrome, google-chrome-extension, chromium

我今天写了我的第一个 chrome 扩展，我希望它在后台打开一个标签（固定），在标签中的页面完成加载后，我希望标签关闭。

到目前为止，我有：

```
chrome.tabs.create({url: target, selected: false, pinned: true}); 
```

上面的代码所做的是在后台打开选项卡，然后将其固定。

完成加载后如何关闭选项卡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:46:27.563

您可以绑定 a[`chrome.tabs.onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)或[`chrome.webNavigation.onCompleted`](https://developer.chrome.com/extensions/webNavigation.html#event-onCompleted)事件以检测页面已完​​成加载，或插入内容脚本以关闭选项卡。

## 使用`webNavigation.onCompleted`事件

```
var tabsToClose = {};
chrome.webNavigation.onCompleted.addListener(function(details) {
    if (details.frameId !== 0) return; // Only process top-frame requests
    var tabId = details.tabId;
    if (tabsToClose[tabId]) {
        delete tabsToClose[tabId];
        chrome.tabs.remove(tabId);
    }
});

chrome.tabs.create({url: target, selected: false, pinned: true}, function(tab) {
    tabsToClose[tab.id] = 1;
}); 
```

注意：我假设导航总是会成功。您还应该绑定一个[`webNavigation.onErrorOccurred`](https://developer.chrome.com/extensions/webNavigation.html#event-onErrorOccurred)事件以在失败时关闭选项卡。

## 使用内容脚本

通过使用`runAt: 'document_idle'`（默认），`window.close();`将在页面完成加载后插入。

```
chrome.tabs.create({url: target, selected: false, pinned: true}, function(tab) {
    chrome.tabs.executeScript(tab.id, {
        code: 'window.close();',
        runAt: 'document_idle'
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-04T16:08:18.230

```
chrome.tabs.create({url: target, selected: false, pinned: true}, myTab => {
    function listener(tabId, changeInfo, tab) {
        // make sure the status is 'complete' and it's the right tab
        if (tabId === myTab.id && changeInfo.status == 'complete') {
            chrome.tabs.remove(myTab.id);
            chrome.tabs.onUpdated.removeListener(listener);
        }
    };
    chrome.tabs.onUpdated.addListener(listener);
}); 
```

# mysql - 使用枚举的条件分组

> ID：16130851
> 
> 赞同：1
> 
> 时间：2013-04-21T11:58:33.463
> 
> 标签：mysql, sql

我对`DATABASE DESIGN.`Given 遇到了一些麻烦，如下表：

```
group_id | right_id | mode
----------------------------
   1     |    1     | edit
----------------------------
   1     |    2     | edit
----------------------------
   3     |    1     | read
----------------------------
   3     |    3     | read
----------------------------
   1     |    3     | edit
----------------------------
   4     |    3     | denied
---------------------------- 
```

现在我需要例如第 1 组和第 3 组的所有权限。为了防止出现双重结果，我想按 right_id 对结果进行分组问题是模式列。正如您可能建议的那样，该模式决定您是否可以阅读或编辑某些内容（或没有“拒绝”）

我希望在最终结果中使用最高权限，第 1 组和第 3 组权限的结果应如下所示：

```
 right_id | mode
----------------------------
   1     | edit
----------------------------
   2     | edit
----------------------------
   3     | edit
---------------------------- 
```

必须覆盖第 3 组的读取模式。

我完全不知道如何解决这个问题。我可以在 php 中进行此操作，但如果可能的话，我希望在一个查询中进行此操作。

如果没有条件组，选择哪种模式似乎完全随机。

除了 mode 是一个枚举值

```
'denied', 'read', 'edit' 
```

附言

我已经阅读了上面几乎所有建议的链接，但它们都没有帮助:(

到目前为止感谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:05:38.700

尝试：

```
select right_id,
       case max(mode+0)
            when 1 then 'denied' 
            when 2 then 'read'
            when 3 then 'edit'
        end highest_privilege
from mytable
where group_id in (1,3)
group by right_id 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/628fc/6)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:18:58.617

你可以使用 MIN/MAX 函数来得到你想要的，因为枚举值有索引： [http ://dev.mysql.com/doc/refman/5.0/en/enum.html](http://dev.mysql.com/doc/refman/5.0/en/enum.html)

但是您不能直接使用它们，因为 MIN/MAX 似乎可以将枚举作为文本值工作： [http ://bugs.mysql.com/bug.php?id=45300](http://bugs.mysql.com/bug.php?id=45300)

正如您在上述文章的评论之一中看到的那样，您可以使用 f.ex: MAX(mode+0) 并获取枚举值的索引作为回报。

```
SELECT right_id, MAX(mode+0) AS mode FROM table WHERE group_id IN (1, 3) GROUP BY right_id 
```

在你的情况下应该给你：

```
right_id | mode
----------------
1     | 3
----------------
2     | 3
----------------
3     | 3
---------------- 
```

# ios - iOS + Storyboard：在导航中重用 ViewController

> ID：16130856
> 
> 赞同：0
> 
> 时间：2013-04-21T11:59:07.793
> 
> 标签：ios, segue, navigationcontroller

在我当前的应用程序中，我想`UICollectionView`多次使用某些，但选择行为不同。将以下情节提要布局视为“是”（并且正在工作）：

```
标签栏控制器（2 项）：
-> 导航控制器 1 -> 集合视图控制器 -> 一些表视图控制器
-> 导航控制器 2 ->（基本）视图控制器

```

有`Basic View Controller`两个与. _ 我想要的是从 过渡到，但是从集合中选择一个项目应该弹出视图并返回到.`UIButtons``Push``Collection View Controller``Basic View Controller``Collection View Controller``Basic View Controller`

我已经在其中设置了一个自定义属性，该属性在`Collection View Controller`相应的`prepareForSegue`消息中设置`Basic View Controller`（或者根本不设置，如果用户选择 a `Tab Bar Item`），因此检测哪个控制器或哪个 UI 组件触发了推送没有问题（有 3 种方式：选择标签栏项目或点击基本视图上的按钮之一）。

问题是弹出`Collection View`.

到目前为止我的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if (self.mode == nil) {
        // 没做什么
    } else if ( [self.mode isEqualToString:@"foobar"] ) {
        // 我试过的一种方法
        [自我dismissViewControllerAnimated：是完成：无]；
    } else if ( [self.mode isEqualToString:@"blah"] ) {
        // 其他方法
        BasicViewController *targetVC = self.navigationController.viewControllers[ 0 ];
        [self.navigationController popToViewController:targetVC 动画:YES];
    }
}

```

不幸的是，我的应用程序崩溃了`dismiss`。`popToViewController`. 甚至可以以不同的导航方式使用相同的视图控制器吗？

我希望有足够的信息来帮助我解决这个问题。您可能知道，项目在增长，我不知道是否还有更多代码需要考虑 :)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:22:21.767

该`prepareForSegue:`方法不是放置该代码的正确位置。它在 segue 执行之前被调用，这通常意味着已经有某种过渡即将发生。

我假设你已经将你的集合视图单元与一个 segue 连接起来，现在正试图根据 viewcontroller 在 collectionVC 之前修改那个 segue 的行为。

在这种情况下，有一些可能的解决方案：

*   不要对特定的过渡使用 segues 并手动执行任何 vc-transitions
*   编写自己的`UIStoryboardSegue`子类来处理不同的转换。请参阅[UIStoryboardSegue 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardSegue_Class/Reference/Reference.html)。然后你可以在`prepareForSegue:`方法中设置你的自定义 segue 的一些属性，告诉 segue 它应该执行哪个转换。
*   使用展开的segues。请参阅[什么是 Unwind segues 以及如何使用它们？](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:38:48.663

在“集合视图控制器”中选定行的操作因“集合视图控制器”出现的位置而异。在一种情况下，返回“基本视图控制器”，在另一种情况下，转到“某些表视图控制器”

通过定义`tableView:didSelectRowAtIndexPath:`类似的东西来实现这一点：

```
- (void)        tableView: (UITableView *) tableView 
  didSelectRowAtIndexPath: (NSIndexPath *) indexPath
{
   if (self.parentIsBasicViewController)  // set in the incoming segue, probably.
      [self.presentingviewController dismissViewControllerAnimacted: YES completion: nil]
   else
      [self performSegueWithIdentifier: @"some Table View Controller" sender: self];
} 
```

# java - 如何使用 JPA 从 Servlet 将 BLOB 存储在数据库中

> ID：16130857
> 
> 赞同：0
> 
> 时间：2013-04-21T11:59:08.683
> 
> 标签：java, database, servlets, jpa, java-ee-6

我正在尝试使用 JSP/Servlet/EJB（用于 JPA）编写简单的 webapp，用于将文件（最大 50 mb）上传到数据库。

在我的实体类（用户）中，我有以下代码：

```
@Lob
private byte[]             file; 
```

以下是我在 Servlet 中检索文件的方法（实际上它将文件保存在我的计算机上，我想更改它）：

```
for (Part part : request.getParts()) {
        InputStream is = request.getPart(part.getName()).getInputStream();
        int i = is.available();
        byte[] b = new byte[i];
        is.read(b);
        String fileName = getFileName(part);
        FileOutputStream os = new FileOutputStream("C:/files/" + fileName);
        os.write(b);
        is.close();
} 
```

我不知道如何将字节数组（使用 for 循环）写入我的用户实体。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:20:38.593

您的输入流处理不正确 - 该`available`方法不会返回整个流的长度，它只会为您提供在流被阻塞之前可以读取的（估计的）数量。强调估计。您需要循环读取整个流，直到读取调用导致 -1，或者使用[Apache Commons IO](http://commons.apache.org/proper/commons-io/)[`IOUtils`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html)之类的实用程序。

```
final byte[] data = IOUtils.toByteArray(inputStream); 
```

获得数据后，只需将其设置为您的实体：

```
entity.setFile(data); 
```

然后保存它。

# google-chrome - 如何确定一个不正确的 HTTP 响应的真实内容类型？

> ID：16130858
> 
> 赞同：1
> 
> 时间：2013-04-21T11:59:09.107
> 
> 标签：google-chrome, google-chrome-extension, content-type

我正在尝试编写一个更正“不正确”内容类型的扩展。一个示例情况是，用户可能单击指向 HTTP`Content-Type`设置为的 PDF 文件的链接`application/octet-stream`。在这种情况下，我希望能够检测到真正的内容类型是`application/pdf`.

一种简单但不太可靠的方法是定义我自己的从文件扩展名到内容类型的映射。但是，如果我可以重新使用现有的工作来做到这一点，那就太好了。

我注意到 Chrome 能够确定如何显示通过`ftp`和`file`协议获得的文件，我认为这些文件不提供内容类型信息。Chrome 是如何做到这一点的？它是否检查文件内容？它是否检查文件扩展名？最重要的是，我可以通过编程方式为我的扩展程序连接到这个内容类型检测功能吗？

# javascript - 在地图中显示多个标记

> ID：16130859
> 
> 赞同：2
> 
> 时间：2013-04-21T11:59:11.443
> 
> 标签：javascript, google-maps, google-maps-api-3

所以我在一个地理定位项目（**asp.net MVC4**）中工作，我的数据库中有很多位置，我想在我的地图中显示它，我的问题是脚本只显示第一个位置，这是我的脚本：

```
var checkpoints = [];
function setMarkers(map, locations) {

for (var i = 0; i < locations.length; i++)
{
    var place = locations;
    for (var i = 0; i < place.length; i++)
    {
        var points = new google.maps.LatLng(place[i][1], place[i][2]); 
        checkpoints.push(points);
    }

    var check = checkpoints[0];
    var index = 0;
    for (var j = 0; j < checkpoints.length; j++)
    {
            check = checkpoints[j];
            index = j;
            var myLatLng = new google.maps.LatLng(place[index][1], place[index][2]);    

            var marker = new google.maps.Marker
                (
                    {
                        position: myLatLng,
                        map: map,
                        title: place[index][0],
                        zIndex: place[index][3]
                    }
                );
    }
}
return marker;
} 
```

所以如果有人有任何解决方案或想法，我将不胜感激。

谢谢大家@david @Beetroot-Beetroot @razzak 我的脚本现在工作正常，这是我的新脚本：

```
var checkpoints = [];
function setMarkers(map, locations) {

for (var i in locations) {
    var points = new google.maps.LatLng(locations[i][1], locations[i][2]);
    checkpoints.push(points);
    var marker = new google.maps.Marker({
        map: map,
        position: points,
        title: locations[i][0],
        zindex: locations[i][4]
    });
}
} 
```

**更新：** 我的脚本工作正常，但我的活动中有一个小问题，当我在标记上单击时，它应该显示他的标题，但它只显示最后一个标记的标题：

```
var checkpoints = [];
function setMarkers(map, locations) {

for (var i in locations) {
    var points = new google.maps.LatLng(locations[i][1], locations[i][2]);
    checkpoints.push(points);
    var marker = new google.maps.Marker({
        map: map,
        position: points,
        title: locations[i][0],
        zindex: locations[i][4],
    });
    //this is my event
    google.maps.event.addListener(marker, 'dblclick', function () {
        alert("I am marker " + marker.title);
    });
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:05:57.473

我已经简化了你的代码

```
function setMarkers(locations) {
    for(var i in locations) {
    var points = new google.maps.LatLng(locations[i][1].lat,locations[i][2].lng);
    checkpoints.push(points);
    var marker = new google.maps.Marker({
     map:map,
     position: points,
     icon: 'myicon.png',//
     title: locations[i][0],
     zindex: locations[i][4]
    }); 

   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:55:24.110

Mohammadov，你让它变得比它需要的更复杂。

尝试这个 ：

```
function setMarkers(map, locations) {
    for(var i=0; i<locations.length; i++) {
        var loc = locations[i];
        loc[4] = new google.maps.Marker({
            position: new google.maps.LatLng(loc[1], loc[2]),
            map: map,
            title: loc[0],
            zIndex: loc[3]
        });
    }
} 
```

然后地图应该显示标记，并且`locations`数组的每个成员都应该增加对其标记的引用，作为元素 [4]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:57:15.443

主循环内的两个循环引起了问题，它们是不必要的，可以避免。循环结束时的 return marker 也只会返回最后一个，你也可以删除它：

```
var checkpoints = [];

function setMarkers(map, locations) {    
for (var i=0; i<locations.length; i++)
{
    var place    = locations[i],
        myLatLng = new google.maps.LatLng(place[1], place[2]),   
        marker = new google.maps.Marker
                (
                    {
                        position: myLatLng,
                        map: map,
                        title: place[0],
                        zIndex: place[3]
                    }
                );
    checkpoints.push({"point": myLatLng, "marker": marker}); 
}
} 
```

检查点现在应该有一个数组`LatLng`和`marker`每个地方。

[jsfiddle](http://jsfiddle.net/arcm111/mMZyH/)

# java - guice、MapBinder 和参数化接口

> ID：16130864
> 
> 赞同：0
> 
> 时间：2013-04-21T12:00:02.220
> 
> 标签：java, guice

我正在使用 guice 和 MapBinder。我有以下服务接口：

```
public interface IService<K, V> 
```

和两个实现：

```
public class AService implements IService<String, String>
public class BService implements BService<String, String> 
```

我想像这样使用 MapBinder：

```
MapBinder<String, IService<String, String>> mapBinder =
            MapBinder.newMapBinder(binder(), String.class, WHAT_TO_DO_HERE); 
```

因为我做不到

```
IService<String, String>.class 
```

在 WHAT_TO_DO_HERE 部分，我的第一个想法是为 IService 创建一个标记接口，然后继续。我的问题是：

1.  为了在guice中做到这一点，最佳实践是什么？

2.  标记界面的想法在这里有问题吗？如果是这样，为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:11:44.440

您可以尝试`TypeLiteral` [（Javadoc）](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html)：

```
WHAT_TO_DO_HERE = new TypeLiteral<IService<String, String>>(){}; 
```

和 Javadoc[`MapBinder`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/multibindings/MapBinder.html)说，有一个适当的`newMapBinder`方法，虽然你必须将`String`类也包装到一个`TypeLiteral`.

# javascript - 如何使用 onclick 事件在同一窗口和选项卡中打开链接？

> ID：16130871
> 
> 赞同：10
> 
> 时间：2013-04-21T12:01:15.817
> 
> 标签：javascript, jquery, ajax, jsp, onclick

我有一个包含多个 div 的页面。我想从我的数据库中获取一些信息以显示在其中一些 div 中，并且我还希望在单击指向主 div 的链接时显示它。

我还需要在同一窗口中刷新或重新打开页面（而不是在新页面或选项卡中）。最后，我需要页面位于主 div 中。

我尝试了下面的代码，但没有成功：

```
<a href="#home" onclick="window.open('index.jsp#home')" >home</a>

<a href="#home" onclick="location.reload()">home</a>

<a href="#home" onclick="location.href='index.jsp'">home</a> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T20:09:50.937

我用了这个，它奏效了

```
<a href="#" class="home_btn" onclick="location.reload();location.href='index.jsp'">منوی اصلی</a> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-13T07:32:47.300

改变你的 ：

```
onclick="window.open('index.jsp#home')" >home</a> 
```

至

```
onclick="parent.location='index.jsp#home'">home</a> 
```

无需重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:17:31.260

像这样？

```
<input id="but1" type="button" value="click"></div>

function loadIndex() {
    window.location.href = "http://jsfiddle.net/Xotic750/u5nmt/";
}

document.getElementById("but1").addEventListener("click", loadIndex, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/u5nmt/)

记住 jsfiddle 在框架中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:31:27.813

使用哈希值更改`location.href`为当前 URL 的问题是页面不会重新加载而是跳转到给定的 ID。

如果您真的想跳转到主 div，那么您可以跳转`location.href='index.jsp'`并编辑您的索引文件以设置`location.href = '#home'`加载。

如果您希望能够将信息传递到新加载的页面（以提供特定的 id），您可以使用查询字符串来代替，例如跳转页面使用`location.href = 'index.jsp?loaddiv=foo`

然后一旦页面加载读取查询字符串并使用该值跳转到请求的 div，例如 `location.search = '#foo'`

有关从查询字符串中提取值的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

# javascript - 具有 .data 和 html5 数据属性的 jQuery 自定义函数

> ID：16130874
> 
> 赞同：0
> 
> 时间：2013-04-21T12:01:21.537
> 
> 标签：javascript, jquery, html, onclick, append

单击按钮时，我正在尝试将新的“应用程序”附加到我的“应用程序列表”。

**JS**

```
$(".appCreate" ).click(newApp);

function newApp() {
    var facebookTemp = $("#facebook-template").html();

    var appName = $(this).data("appName");
    var appSize = $(this).data("appSize");
    var appTemp = $(this).data("appTemp");

    $("<div class=\"app" + appName + appSize + "\"></div>").html(appTemp).appendTo(".AppList");
}; 
```

**HTML**

```
<body>

    <section id="AppBox">
        <div class="AppList">

<!-- == Facebook == -->
            <div id="facebook-template">
                <div class="App facebook Size170x290">
                    <h1>Hello Test</h1>
                </div>
            </div>
        </div>
    </section>

<!-- == Settings == -->
    <section id="dialog-settings" class="dialog" title="Settings">
        <button data-appName="facebook" data-appSize="Size170x290" data-appTemp="facebookTemp" class="appCreate">
        Facebook</button>
    </section>
</body> 
```

**CSS**

```
#facebook-template {
    display: none;
}
.facebook {
    background:linear-gradient(to bottom, #133783 0px, #102E6D 100%) repeat scroll 0 0 #133783;
}
.facebook { top:120px; left:0; }
#AppBox {
    position:fixed;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:0;
}
.AppList {
    position:absolute;
    height:100%;
    width:100%;
    margin:0;
    padding:0;
}
.App {
    position:absolute;
    display:block;
    margin:5px;
    padding:0;
    box-shadow:0 0 5px 1px black;
    color:#FFFFFF;
    cursor:move;
}
.Size170x290 {height:170px;width:290px;} 
```

基本上事情没有出现，我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T12:08:03.333

You lost the context of your click handler.

This was an obvious first mistake:

```
$(".appCreate" ).click(newApp); 
```

Second mistake is data names. Change to:

```
var appName = $(this).data("appname"); 
```

Notice the case. Convert all names to lower case.

I also added handlebars.js because of the conversation in the comments.

New working code:

```
$(".appCreate" ).click(newApp);

function newApp() {
    var facebookTemp = $("#facebook-template").html();

    var appName = $(this).data("appname");
    var appSize = $(this).data("appsize");
    var appTemp = $(this).data("apptemp");

    var template = Handlebars.compile(facebookTemp);
    var html = template({
        app : appName,
        facebook : appTemp,
        size : appSize
    });

    $(".AppList").append(html);
}; 
```

Live [DEMO && CODE](http://jsfiddle.net/epyyP/1/).

# android - 从 android 上的 ksoap2 得到错误响应

> ID：16130878
> 
> 赞同：1
> 
> 时间：2013-04-21T12:01:59.020
> 
> 标签：android, web-services, android-ksoap2

我在 android 上使用 ksoap2 库连接到 Web 服务。我运行以下代码：

```
SoapObject request = new SoapObject(NAMESPACE, method);
request.addProperty("UserName", username);
request.addProperty("TransactionID", id);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
nvelope.setOutputSoapObject(request);
HttpTransportSE ht = new HttpTransportSE(URL);
ht.call(NAMESPACE + method, envelope); 
```

如上所示，有两个参数。这是这部分的 wsdl 文件：

```
<s:element minOccurs="1" maxOccurs="1" name="TransactionID" type="s:int" />
<s:element minOccurs="0" maxOccurs="1" name="UserName" type="s:string" /> 
```

问题是我从 SoapUI 使用相同的参数调用它时得到不同的响应。下面是 SoapUI 请求的样子：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:req="http://whatever.com/Webservice/Request.asmx">
<soapenv:Header/>
<soapenv:Body>
  <req:GetProduct>
     <req:TransactionID>id</req:TransactionID>
     <!--Optional:-->
     <req:UserName>username</req:UserName>
  </req:GetProduct> 
```

参数名称有一个额外的 :req 前缀，可能会导致我的问题。当我将 req: 添加到我的 java 参数名称时，会发生异常：

```
java.io.IOException: Server returned HTTP response code: 400 for URL: http://whatever.com/WebService/Request.asmx?wsdl/
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1345)
at java.security.AccessController.doPrivileged(Native Method)
at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1339)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:993)
at org.ksoap2.transport.ServiceConnectionSE.openInputStream(ServiceConnectionSE.java:113)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:184)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
at SoapCommand.invokeMethod(SoapCommand.java:42)
at SoapCommand.main(SoapCommand.java:16)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://whatever.com/WebService/Request.asmx?wsdl/
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1290)
at sun.net.www.protocol.http.HttpURLConnection.getHeaderFields(HttpURLConnection.java:2129)
at org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:84)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:167)
... 3 more
Exception in thread "main" java.lang.NullPointerException
at SoapCommand.main(SoapCommand.java:17) 
```

这让我疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:23:02.710

您的代码没有任何问题。`req`前缀符合 SOAP/XML 标准。问题在于 Web 服务的部署方式和`ksoap`工作方式。

`?wsdl`如果您附加到 Web 服务端点，则所有 Web 服务都应使用 WSDL 进行响应。`ksoap`期望这一点并请求 WSDL。在这种情况下，Web 服务不会发回 WSDL，从而引发 400 错误。

您应该询问 Web 服务提供者为什么在您发送`http://whatever.com/WebService/Request.asmx?wsdl`.

如果这不起作用，请考虑在服务器上创建一个 SOAP 客户端，连接到 Web 服务，然后使用 Android 的 REST Web 服务调用您的服务器。这样，您可以使用更少的带宽并在设备上进行更少的处理。

# opengl - 将 8 位 alpha-only 纹理传递给 GLSL

> ID：16130880
> 
> 赞同：1
> 
> 时间：2013-04-21T12:02:11.413
> 
> 标签：opengl, glsl, textures, alpha

如何将 8 位 alpha-only 纹理传递给 GLSL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T22:17:26.810

你没有说你正在使用什么 OpenGL 版本。但实际上，由于您使用的是 GLSL，因此您不必*关心*每像素 8 位数据是否在*alpha*分量中。你关心的是你的纹理数据只有一个通道，它是每像素 8 位，并且它可以被一个已知的组件访问。

GL 3.x+ 提供`GL_R8` [图像格式](http://www.opengl.org/wiki/Image_Format)。在此之前，您可以只使用`GL_INTENSITY8`（从核心 OpenGL 3.1 中删除）。不同之处在于`GL_R8`只将单个通道放入红色分量中，因此 GB 将为 0，A 将为 1。强度格式将单个通道广播到所有四个分量中，因此 RGBA 将是相同的值。

您的着色器不需要更改。只需获取采样值的红色分量。

# c++ - 不能在复合语句中分配字符串

> ID：16130885
> 
> 赞同：-1
> 
> 时间：2013-04-21T12:02:50.480
> 
> 标签：c++, string

我真的不明白为什么会这样。

我有一些这样声明的函数：

```
std::string unmaskString(std::string &oValue); 
```

在代码中我这样做：

```
v = unmaskString(line.substr(eq+1)); 
```

我得到一个编译错误说：

```
error: invalid initialization of non-const reference of type 'std::string&' from a temporary of type 'std::basic_string<char, std::char_traits<char>, std::allocator<char> >' 
```

当我把它放在两个单独的语句中时，它会起作用：

```
v = line.substr(eq+1);
v = unmaskString(v); 
```

第一行返回一个字符串对象，甚至没有引用，所以我不太明白这个错误。

将功能更改为

```
 std::string unmaskString(std::string oValue); 
```

也给出了那个错误。

更新：

将 maskString 更改为 unmaskString，因为这是一个错误，但问题仍然存在，因为 masString 具有相同的签名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T12:05:36.780

的结果：

```
line.substr(eq+1) 
```

是类型的**临时**对象`std::string`。临时对象是*右*值，左值引用不能绑定到右值。

注意，如果你的`maskString()`函数不需要修改它的参数（为什么它会返回一个`std::string`else？），它没有理由接受它的参数作为对 non- 的引用`const`。

可能的解决方案是（按优先顺序）：

*   让其**按 value**`maskString()`输入，这样如果输入参数是左值则将被*复制*，如果它是右值则*移动：*

     ****```
    std::string maskString(std::string oValue);
    //                     ^^^^^^^^^^^
    {
        // Whatever is going on...
        return oValue; // This will be MOVED into the object that stores
                       // the value returned by this function
    } 
    ```**** 
*****   让我们`maskString()`通过左值引用获取其输入`const`（这种方式`value`from的初始化`oValue`将始终导致一个副本，即使参数是临时的），然后将其复制到一个临时变量中，该变量最终将被返回并从中移出。这会起作用，因为对的左值引用`const` *可以*绑定到右值（因此也可以绑定到临时值）：

    ```
    std::string maskString(std::string const& oValue);
    //                                 ^^^^^
    {
        std::string value = oValue;

        // Whatever is going on...
        return value; // This will be MOVED into the object that stores
                      // the value returned by this function
    } 
    ```

    *   做你所做的：将返回的对象存储`substr`在一个命名对象中，然后将该对象传递给`unmaskString()`.****

# android - Protobuf 2.5.0 错误？

> ID：16130886
> 
> 赞同：4
> 
> 时间：2013-04-21T12:02:51.040
> 
> 标签：android, google-app-engine, protocol-buffers

我已经从 google protobuf v. 2.4.1 迁移到 v. 2.5.0（没有其他变化）。

我使用 2.4.1 进行了完美的客户端-服务器 [android<>gae dev server] 通信。
现在有了 2.5.0，它就坏了。

在没有对 .proto 文件进行任何修改的情况下，我使用新的 2.5.0 jar 设置了我的客户端和服务器，并且使用新的 protoc 可执行文件，我从同一个 proto 文件为客户端和服务器生成了一个新的源文件。

现在，当我尝试解析消息时，我在服务器上收到此错误：

```
VerifyError: class ... overrides final method getUnknownFields.()Lcom/google/protobuf/UnknownFieldSet; 
```

全栈：

```
java.lang.VerifyError: class com.mta.pb.ACM$MyRequest overrides final method getUnknownFields.()Lcom/google/protobuf/UnknownFieldSet;
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
**at com.mta.server.p.AndroidServletP.doPost(AndroidServletP.java:91)** <- my code
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.googlecode.objectify.cache.AsyncCacheFilter.doFilter(AsyncCacheFilter.java:57)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    ...etc 
```

我已经尝试过的事情：

1）阅读更改日志，我试图从以下位置更改解析代码：

```
 request = MyRequest.parseFrom(requstBlob); 
```

至

```
 request = MyRequest.PARSER.parseFrom(requstBlob); 
```

（这与您在堆栈跟踪中看到的第 91 行相同）。
它没有改变任何事情。同样的错误。

2）我尝试手动解析消息：
我打印出到达服务器的base64字符串，将其转换为二进制

```
base64 -d in64 > out64.bin 
```

比

```
protoc --decode=MyRequest my.proto < out64.bin > tmp.txt 
```

它完美地解析它。所以问题只出在新protobuf的解析部分。

3) 我尝试将 ReqType 从 MyRequest 中取出，但没有效果。

供参考：相关的protobuf定义

```
/**
 * Master request object
 */
message MyRequest {
    optional RequestContext context = 1;
    optional MyReport myReport = 2;
    optional CategoryRequest catRequest = 3;
    optional GetMessage getMessage = 4;
    optional SearchRequest searchRequest = 5;
    enum ReqType {
        UNDEFINED = 1;
        REGISTER = 104;
        UPDATE = 123;
        GET_PAYLOAD = 100;
        SEARCH = 200;
        REPEAT_GCM = 623;
        REPEAT_PREPARE = 842;
    }
    optional ReqType reqType = 10;
    optional bool repeat = 11;
} 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T12:21:35.753

我猜你没有升级/重新编译一些东西。在罐子里的 protobuf 2.4.1 版本中。

在**GeneratedMessage**类中，**getUnknownFields**是 2.4.1 中的最终方法，但在 2.5.0 中它变为：

```
 //@Override (Java 1.6 override semantics, but we must support 1.5)
  public UnknownFieldSet getUnknownFields() {
    throw new UnsupportedOperationException(
        "This is supposed to be overridden by subclasses.");
  } 
```

并在生成的类中被覆盖。您可能需要重新编译所有使用生成的协议缓冲区类的类。

鉴于消息

```
java.lang.VerifyError: class com.mta.pb.ACM$MyRequest overrides final method getUnknownFields.()Lcom/google/protobuf/UnknownFieldSet; 
```

这告诉您正在运行使用 Protocol-Buffers 2.5.0 和**protocol-fuffers-2.4.1（或更早版本）jar****生成**的代码。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-10T18:49:38.720

A similar thing happened to me when I was compiling an application after upgrading to 2.5\. Eventually I realized that the old 2.4 jar was still in the same folder as the new 2.5 jar, and that the build system xml file was still referring to the old one. It was just a matter of being a little more careful - nothing mysterious was going on.**

# c++ - C++禁止指针到指针转换

> ID：16130900
> 
> 赞同：3
> 
> 时间：2013-04-21T12:04:37.450
> 
> 标签：c++, pointers, type-conversion

在 C++ 中，`Type **`禁止`Type const **`转换。此外，不允许从`derived **`to转换。`Base **`

为什么这些转换 wtong ？还有其他不能发生指针转换的例子吗？

有没有办法解决：如何将指向非 const 类型对象指针的指针转换为指向 const 类型对象`Type`指针的指针`Type`，因为`Type **`-->`Type const **`没有做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T12:04:37.450

`Type *`允许`const Type*`：

```
Type t;
Type *p = &t;
const Type*q = p; 
```

`*p`可以通过修改，`p`但不能通过`q`。

如果`Type **`允许`const Type**`转换，我们可能有

```
const Type t_const;

Type* p;
Type** ptrtop = &p;

const Type** constp = ptrtop ; // this is not allowed
*constp = t_const; // then p points to t_const, right ?

p->mutate(); // with mutate a mutator, 
// that can be called on pointer to non-const p 
```

最后一行可能会改变`const t_const`！

对于`derived **`to`Base **`转换，当`Derived1`和`Derived2`类型派生自相同时会出现问题`Base`。然后，

```
Derived1 d1;
Derived1* ptrtod1 = &d1;
Derived1** ptrtoptrtod1 = &ptrtod1 ;

Derived2 d2;
Derived2* ptrtod2 = &d2;

Base** ptrtoptrtobase = ptrtoptrtod1 ;
*ptrtoptrtobase  = ptrtod2 ; 
```

并且 a`Derived1 *`指向 a `Derived2`。

`Type **`制作指向 const 指针的指针的正确方法是将其设为`Type const* const*`.

# android - Angular Js 和 Trigger.io - 无法点击适用于 iOS 的 Android 链接

> ID：16130902
> 
> 赞同：7
> 
> 时间：2013-04-21T12:04:37.540
> 
> 标签：android, angularjs, trigger.io

我正在使用 AngularJS 和 Trigger.io 来开发适用于 iOS 和 Android 的移动应用程序。

当我尝试打开如下所示的链接时：

```
<a ng-href="#/offers/{{featured_offer.Id}}"></a> 
```

它在 iOS 上运行良好，但在 Android 上，我在触发控制台中收到此消息，并且链接未导航到：

```
[WARNING] Attempted to open a URL which could not be handled: unsafe:content://io.trigger.forge722b6464a0e211e2ba9d12313d00dc45/src/index.html#/offers/8 
```

我怎样才能让它在 Android 中像在 iOS 中一样工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T14:57:09.980

看起来 Angular 添加了 unsafe: 到它无法识别的 url 方案中，我认为您想要包含以下内容：

```
app.config(function($compileProvider){
  $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|content):/);
}); 
```

这将 content: 添加到接受的 url 方案中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T03:28:31.407

我遇到了同样的问题，特别是尝试显示带有由 forge.file.getImage 返回的文件的 src 的 img。Angular 将 unsafe: 添加到本地 img URL 的 content: 前缀中，正如 connorhd 所说，您需要将 content: 添加到 url 白名单。

请注意，compileProvider 的 API 已随着 Angular 的最新版本而改变，因此我在此发表评论，以防其他人发现此解决方法的更新版本有用。

```
app.config(['$compileProvider', 
function($compileProvider) {
    $compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|content|blob):|data:image|/);
    // note: you'll also have to do imgSrcSanitizationWhitelist if you want to use general links as well as ng-src on images.
}]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T10:36:23.530

我也有这个问题，只是在你的 config.xml 中添加消毒剂

```
var app = angular.module( 'myApp', [] )
.config( [
    '$compileProvider',
    function( $compileProvider )
    {   
        $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/);
        // Angular before v1.2 uses $compileProvider.urlSanitizationWhitelist(...)
    }
]); 
```

# python - Python 2.7 中的 Open() 和 codecs.open() 表现出奇特的不同

> ID：16130904
> 
> 赞同：7
> 
> 时间：2013-04-21T12:04:43.777
> 
> 标签：python, python-2.7, file-io, codec, python-unicode

我有一个文本文件，其中包含第一行 unicode 字符和 ASCII 中的所有其他行。我尝试将第一行作为一个变量读取，将所有其他行作为另一个变量读取。但是，当我使用以下代码时：

```
# -*- coding: utf-8 -*-
import codecs
import os
filename = '1.txt'
f = codecs.open(filename, 'r3', encoding='utf-8')
print f
names_f = f.readline().split(' ')
data_f = f.readlines()
print len(names_f)
print len(data_f)
f.close()
print 'And now for something completely differerent:'
g = open(filename, 'r')
names_g = g.readline().split(' ')
print g
data_g = g.readlines()
print len(names_g)
print len(data_g)
g.close() 
```

我得到以下输出：

```
<open file '1.txt', mode 'rb' at 0x01235230>
28

7

And now for something completely differerent:

<open file '1.txt', mode 'r' at 0x017875A0>

28

77 
```

如果我不使用 readlines()，则会读取整个文件，而不仅仅是 codecs.open() 和 open() 的前 7 行。

为什么会发生这样的事情？为什么 codecs.open() 以二进制模式读取文件，尽管添加了 'r' 参数？

更新：这是原始文件：[http ://www1.datafilehost.com/d/0792d687](http://www1.datafilehost.com/d/0792d687)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T19:24:36.773

因为你使用了`.readline()` *first*，所以`codecs.open()`文件已经填充了一个 linebuffer；随后的调用*仅*`.readlines()`返回缓冲的行。

 *如果`.readlines()` *再次*调用，则返回其余行：

```
>>> f = codecs.open(filename, 'r3', encoding='utf-8')
>>> line = f.readline()
>>> len(f.readlines())
7
>>> len(f.readlines())
71 
```

解决方法是不要混合`.readline()`和`.readlines()`：

```
f = codecs.open(filename, 'r3', encoding='utf-8')
data_f = f.readlines()
names_f = data_f.pop(0).split(' ')  # take the first line. 
```

这种行为确实是一个错误；Python 开发人员知道这一点，请参阅[issue 8260](http://bugs.python.org/issue8260)。

另一种选择是使用[`io.open()`](http://docs.python.org/2/library/io.html#io.open)而不是`codecs.open()`; 该`io`库是 Python 3 用来实现内置`open()`函数的库，并且比`codecs`模块更加健壮和通用。*

# sql-server - 多个表的上次更新触发器

> ID：16130906
> 
> 赞同：0
> 
> 时间：2013-04-21T12:04:47.620
> 
> 标签：sql-server, triggers

我们有一个包含两个字段的表 tbl_siteinfo：siteid (pk) 和 lastupdated。

我们还有其他几个表，例如 tbl_users、tbl_customers、tbl_prices、tbl_hours，它们包含不同类型的数据，但它们都以 siteid 作为主键。

我们想创建触发器，它将导致 tbl_siteinfo 中的 lastupdated 字段（对于正确的 siteid 行）在任何其他表上的任何插入/更新/删除操作时自动更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:29:13.007

您可以访问通过 DELETED 和 INSERTED 表更新的记录中的数据。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms191300.aspx)。

所以用户表的触发器可能如下所示：

```
CREATE TRIGGER tr_users_siteinfo ON tbl_users
    FOR UPDATE
AS
BEGIN
    UPDATE tbl_siteinfo SET lastupdated = GETDATE()
    FROM inserted JOIN tbl_siteinfo ON inserted.siteid = tbl_siteinfo.siteid
END
GO 
```

或者你可以做一个 WHERE siteid IN（从插入的站点 ID 中选择）而不是加入。

[SQLFiddle](http://sqlfiddle.com/#!3/165c0/1)

# c# - StatusCode：404，ReasonPhrase：'未找到'，版本：1.1，

> ID：16130908
> 
> 赞同：4
> 
> 时间：2013-04-21T12:05:22.497
> 
> 标签：c#, asp.net-web-api

我使用 Web api 自主机：

```
public class TestController : ApiController
{
    [HttpPost]
    public void Testp([FromBody]string title)
    {
        Console.WriteLine("Post");
    }
} 
```

这是简单的控制器，这是我的客户：

```
client.BaseAddress = new Uri("http://localhost:1010");
      const string englishTitle = "TesteDelete";
      var post = client.PostAsync("Test/Testp", new
      {
                    title = englishTitle
                }, new JsonMediaTypeFormatter());
                var result = post.Result;
                if (result.IsSuccessStatusCode)
                {

                }
                else
                {
                    string content = result.Content.ReadAsStringAsync().Result;

                } 
```

为什么我的结果是：

```
{StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.StreamContent, Headers:
{
  Date: Sun, 21 Apr 2013 12:00:03 GMT
  Server: Microsoft-HTTPAPI/2.0
  Content-Length: 165
  Content-Type: application/json; charset=utf-8
}} 
```

我认为我的模型绑定器有一些错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T12:11:00.670

我想您正在使用 Visual Studio Web 服务器进行调试（按时钟）。这个端口可以随时更改，所以我猜它不再是 URL 中指定的“1010”：

`"http://localhost:1010"`

也许您应该[查看此处](https://stackoverflow.com/questions/593709/how-to-get-the-url-of-the-current-page-in-c-sharp)以自动获取当前 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:04:09.403

1.  如果您使用的是默认路由，它是 RESTful（通过 HTTP 动词，而不是 RPC，按方法名称），因此您不应该发布到`http://localhost:1010/Test/Testp`但`http://localhost:1010/Test`

2.  您的操作签名需要一个字符串，但您正在发布一个匿名对象。您的 POST 应该如下所示（注意我们只发送字符串）：

    `var post = client.PostAsync("Test", englishTitle, new JsonMediaTypeFormatter());`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-10T05:27:06.010

```
var url = URL;
            var data = new FormUrlEncodedContent(new[] {
                    new KeyValuePair<string, string>("client_id", FRAppConfigKeys.GetValue("ClientId")),
                    new KeyValuePair<string, string> ("client_secret", FRAppConfigKeys.GetValue("ClientSecret")),
                    new KeyValuePair<string, string>("grant_type", FRAppConfigKeys.GetValue("GrantType") ),
                    new KeyValuePair<string, string>("username", FRAppConfigKeys.GetValue("UserName")),
                    new KeyValuePair<string, string> ("password", FRAppConfigKeys.GetValue("Password"))
                }
            );
            HttpResponseMessage response = client.PostAsync(url, data).Result;
            var result = response.Content.ReadAsStringAsync().Result;
            Dictionary<string, string> tokenDictionary =
               JsonConvert.DeserializeObject<Dictionary<string, string>>(result);
            string token = tokenDictionary["access_token"]; 
```

我面临同样的问题。但现在解决了。您可以使用此代码。它真的会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-25T22:49:43.913

我发现我的问题是，如果我没有以“/”结束基本 URI，并尝试将其预先添加到 client.PostAsync(.. 它不会工作。但如果我附加到基本 uri，它会喜欢所以，

```
using (HttpClient client = new HttpClient(handler) { BaseAddress = new  Uri("https://test.test.com/somepath/") })
 var response = client.PostAsync("Broadcast/Order", content).Result; 
```

工作，同时：

```
 using (HttpClient client = new HttpClient(handler) { BaseAddress = new Uri("https://test.test.com/somepath") })
 var response = client.PostAsync("/Broadcast/Order", content).Result; 
```

才不是。不知道为什么，但很高兴我很快就弄清楚了！

# encryption - 查找私钥 x 大整数

> ID：16130912
> 
> 赞同：0
> 
> 时间：2013-04-21T12:05:44.200
> 
> 标签：encryption, key, int, private

那么如果你有 p ,g, y, q ，是否有可能找到这个方程 y=g^x mod p 的私钥 x 当然是大整数？如果有办法查出来，可以用什么方法？..........注意：这些是大整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:51:43.723

这称为离散对数问题。您似乎对这个问题的素数场特例感兴趣。

对于足够大的正确选择的字段，`p`这是不可行的。我希望这对于 512 位来说相当便宜（100 美元左右），`p`而在 1024 位时非常昂贵。超越这一点，即使对于州一级的对手来说，它也很快变得不可行。

对于某些领域，它要便宜得多。例如，在二进制字段（不是您的示例中的素数字段）中解决 DL 产生了很多最近的论文。例如[GF(2^809) 中的离散对数与 FFS](http://eprint.iacr.org/2013/197)和[关于函数场筛和更高分裂概率的影响：F_2^1971 中离散对数的应用](http://eprint.iacr.org/2013/074)。

# wcf - 肥皂响应的最佳传输模式是哪个？

> ID：16130913
> 
> 赞同：0
> 
> 时间：2013-04-21T12:05:45.570
> 
> 标签：wcf, web-services

我已将服务引用添加到我的 web.config 文件，但我不确定绑定标记内的 transferMode 属性。

在 basicHttpBinding 中，soap/xml 响应的最佳传输模式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:43:20.817

基本上有四种[传输方式](http://msdn.microsoft.com/en-us/library/system.servicemodel.transfermode.aspx)。如果您将它们缩小到两个，缓冲和流式传输，则标准如下：

如果您要传输大文件，主要是二进制文件，请尝试使用**流式传输**。此方法将数据流式传输到客户端，而不是发送大量数据。它可以帮助您的应用程序在内存消耗方面更加高效。此传输模式不提供 WCF 的某些高级功能。

默认情况下选择**缓冲**。这适用于相对较小或中等大小的普通消息。整个请求或响应将缓存在内存中，然后刷新到客户端或服务器。

还有另一种方法需要一个自定义通道，以多个块发送消息。 [块频道](http://msdn.microsoft.com/en-us/library/aa717050.aspx)

# powershell - Using PowerShell to create and add class libraries to a solution

> ID：16130919
> 
> 赞同：2
> 
> 时间：2013-04-21T12:06:20.713
> 
> 标签：powershell

I'm trying to automate some of the tasks I perform on each web project. What I want is a PoSH script that I can run on a new solution that will:

*   load the solution contained in the scripts current directory.
*   create new projects for the loaded solution and add them to the solution.
*   create some classes and add them to each of the projects.

So far I have a simple script (shown below) that finds and opens the local solution file.

```
$scriptpath = $MyInvocation.MyCommand.Path
$dir = Split-Path $scriptpath
Set-Location $dir

$solution = Get-ChildItem | Where-Object{($_.Extension -eq ".sln")}

if ($solution.Count -eq 0)
{
    "Please place this script in the folder containing you solution file."
    break;
}

$dteObj = New-Object -ComObject "VisualStudio.DTE"
$dteObj.Solution.Open($solution.FullName) 
```

How can I now create new projects and add them to the solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T13:15:05.613

查看Jim Christopher 的[http://studioshell.codeplex.com/](http://studioshell.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T12:46:10.487

要创建项目，请调用 GetProjectTemplate，然后将返回的模板路径传递给 AddFromTemplate。

在包管理器控制台中试试这个。

```
 #Create a Console Project
    $csTemplatePath = $dte.Solution.GetProjectTemplate("ConsoleApplication.zip", "CSharp")
    $csPrjPath = "C:\\Projects\\SolutionName\\ConsoleApplication1"
    $dte.Solution.AddFromTemplate($csTemplatePath, $csPrjPath, "ConsoleApplication1", 'false')

    #Create a C# class
    $itemPath  = $dte.Solution.GetProjectItemTemplate("Class.zip", "CSharp")
    $prj = Get-Project
    $prjItem = $prj.ProjectItems.AddFromTemplate($itemPath, "Project.cs") 
```

# python - 如何在 Python-3.x 中解码文件？

> ID：16130924
> 
> 赞同：1
> 
> 时间：2013-04-21T12:06:49.677
> 
> 标签：python, xml, python-3.x, decoding

对于我的项目，我需要解析 xml 文件。为此，我使用 lxml。我需要解析的文件有一个 cp1251 编码，但是，当然，为了使用 lxml 解析它，我需要将它解码为 utf-8，我不知道该怎么做。我试图对此进行搜索，但所有解决方案都适用于 Python 2.7 或不起作用。如果尝试写类似的东西

```
inp = open("business.xml", "r", encoding='cp1251').decode('utf-8') 
```

或者

```
inp.decode('utf-8') 
```

它得到

```
builtins.AttributeError: '_io.TextIOWrapper' object has no attribute 'decode' 
```

我有 Python 3.2。任何帮助都很好，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:08:04.300

`open()`*为您*解码文件。您已经收到 Unicode 数据。

因为`lxml`您需要以*二进制*模式打开文件，并让 XML 解析器处理编码。不要自己这样做。

```
with open("business.xml", "rb") as inp:
    tree = etree.parse(inp) 
```

XML 文件包含一个标头以指示它们使用的编码，并且解析器会对此进行调整。如果缺少标头，解析器可以安全地假定 UTF-8。

# ios - Filter NSMutableDictionary data in UITableView

> ID：16130926
> 
> 赞同：0
> 
> 时间：2013-04-21T12:06:53.523
> 
> 标签：ios, uitableview, filter, uisearchbar, nsmutabledictionary

I need to filter data in `UITableview` by text entered in `UISearchbar`. I followed [this example](http://code-ninja.org/blog/2012/01/08/ios-quick-tip-filtering-a-uitableview-with-a-search-bar/) but there data in `NSMutableArray` and I can't alter it under my requirements. My data is `NSMutableDictionary`. I'm stuck on this for long time.

My data:

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"data.plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

NSMutableDictionary *resultDic = [[NSMutableDictionary alloc] init];
NSMutableArray *resultArray = [[NSMutableArray alloc] init];
NSDictionary *myDict = [NSDictionary dictionaryWithContentsOfFile:path];

sectionKeys = [NSMutableArray new];
sectionsTitle = [NSMutableArray new];

NSArray *tableArray = [myDict objectForKey:@"Black"];
[resultArray addObject:@"Black"];
[resultDic setValue:tableArray forKey:@"Black"];
[sectionsTitle addObject:[NSString stringWithFormat:@"%@", [tableData valueForKey:@"Black"]]];
[sectionCord addObject:[NSString stringWithFormat:@"%@", [tableData valueForKey:@"Coordinates"]]];
[sectionKeys addObject:@"Section1"];

self.tableData = resultDic;
self.sectionsTitle = resultArray;

[myTable reloadData]; 
```

My table:

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return sectionKeys.count;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [sectionKeys objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    int rowCount;
    if(self.isFiltered)
        rowCount = [[filteredTableData objectForKey:[sectionsTitle objectAtIndex:section]] count];

    else
        rowCount = [[tableData objectForKey:[sectionsTitle objectAtIndex:section]] count];

    return rowCount;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    if(isFiltered){
         NSDictionary *dict = [[filteredTableData objectForKey:[sectionsTitle objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

        cell.textLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"Name"]];
        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"Address"]];
    }
    else{
         NSDictionary *dict = [[tableData objectForKey:[sectionsTitle objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

        cell.textLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"Name"]];
        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"Address"]];
    }

    return cell;
} 
```

My search:

```
#pragma mark - SearchBar Delegate -
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)text{

    if(text.length == 0)
    {
        isFiltered = FALSE;
        NSLog(@"false");
    }
    else
    {
        isFiltered = true;
        NSLog(@"true");
        filteredTableData = [[NSMutableDictionary alloc] init];

        for (MyAnnotation* ann in tableData)
        {
            NSRange nameRange = [ann.title rangeOfString:text options:NSCaseInsensitiveSearch];
            NSRange descriptionRange = [ann.description rangeOfString:text options:NSCaseInsensitiveSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:ann];
                //error
            }
        }
    }

    [myTable reloadData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:13:58.283

首先，您需要为控制器/数据源创建一个状态/标志，以便它知道您处于搜索/过滤模式的天气。

然后，如果您处于搜索模式，请将数据源方法指向过滤数组。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    int numberOfSections = 0;
    if (_searchMode)
        {
              numberOfSections = self.filteredDataDict.allKeys.count;
        }
        else
        {
              numberOfSections = self.tableData.allKeys.count;
        }
    return numberOfSections;

} 
```

希望它被理解。

# highslide - 将 highslide 图像直接加载到内容 div 中

> ID：16130935
> 
> 赞同：0
> 
> 时间：2013-04-21T12:08:07.673
> 
> 标签：highslide

有谁知道是否可以让 highslide.js 将图像直接加载到页面上可见的现有内容 div 中，而不是在呈现页面顶部加载内容的默认模式框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:37:02.023

Highslide JS 中没有这样的功能。

最接近的是“页内画廊”，如本页示例：[http ://www.roadrash.no/?page_id=11](http://www.roadrash.no/?page_id=11)

# ios - 使用 AVPlayer 进行 Airplay 时如何显示“此视频正在播放...”？

> ID：16130936
> 
> 赞同：2
> 
> 时间：2013-04-21T12:08:21.867
> 
> 标签：ios, avplayer

有谁知道如何在 Airplaying 时显示“此视频正在播放...”屏幕`AVPlayer`？来自 VEVO iPhone 应用程序的示例：

![VEVO 应用程序将视频播放到 Apple TV](https://i.stack.imgur.com/a4JXk.png)

默认情况下，`AVPlayer`只显示黑屏。我是否必须自己实现这样的屏幕，或者是否有可用的默认组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T23:08:53.080

可能这有点晚了，但我想出了或者至少是一个解决方法。我添加了一个 UILabel，并通过执行以下操作来获取所选设备的名称：

```
CFDictionaryRef description;
UInt32 dataSize = sizeof(description);
if (AudioSessionGetProperty(kAudioSessionProperty_AudioRouteDescription, &dataSize, &description) == kAudioSessionNoError)  {
    CFArrayRef outputs = CFDictionaryGetValue(description, kAudioSession_AudioRouteKey_Outputs);
    if (outputs) {
        if(CFArrayGetCount(outputs) > 0) {
            CFDictionaryRef currentOutput = CFArrayGetValueAtIndex(outputs, 0);
            NSLog(@"%@", currentOutput);
            CFStringRef outputType = CFDictionaryGetValue(currentOutput, kAudioSession_AudioRouteKey_Type);
            if (CFStringCompare(outputType, kAudioSessionOutputRoute_AirPlay, 0) == kCFCompareEqualTo) {
                NSDictionary *desc = (__bridge NSDictionary *)(currentOutput);
                NSLog(@"%@", [desc objectForKey:@"RouteDetailedDescription_Name"]);
            }
        }
    }
} 
```

应该有更好的方法，但这是一个很好的方法。此外，不推荐使用 AudioSessionGetProperty，这可以使用 AVAudioSession 来完成。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T12:00:00.867

使用 MPMoviePlayerController 时默认显示该图像。由于 AVPlayer 没有 UI，因此如果不使用 MPMoviePlayerController，则该图像也不可用。

另外，我认为图像不能作为 MPMoviePlayerController 之外的组件使用。

# matlab - matchFeatures 有阈值？

> ID：16130941
> 
> 赞同：2
> 
> 时间：2013-04-21T12:09:02.420
> 
> 标签：matlab, computer-vision, matlab-cvst

```
results = matchFeatures(matrix , matrix2); 
```

这对于匹配确切的特征非常有效，但是通过使用在不同场合拍摄的图像中的特征会导致微小的差异。

我如何对这个如此小的差异实施容忍度仍然算作匹配。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T04:23:41.223

查看 matchFeatures 的[文档](http://www.mathworks.com/help/vision/ref/matchfeatures.html)。有很多选项可以调整。默认匹配的'Method'是'NearestNeigborRatio'，所以主旋钮有'MaxRatio'参数。增加它的价值会给你更多的比赛。

此外，很大程度上取决于您使用的兴趣点检测器和特征描述符。

# android - 如何在 Android 的 LinearLayout 中设置几个按钮的高度？

> ID：16130944
> 
> 赞同：0
> 
> 时间：2013-04-21T12:09:17.620
> 
> 标签：android

我想让面板上的一些按钮很薄但没有成功。我基本上已经尝试了所有方法，如果我在属性 android:layout_height 中手动输入按钮的高度，则按钮看起来不正确。我尝试的所有其他方法，按钮仍然像以前一样大。

我怎样才能最容易地做到这一点？

```
 <LinearLayout 
         android:orientation="horizontal"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         > 
        <Button 
            android:id="@+id/b1"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_weight="1" 

            android:minHeight="0dp"
            android:minWidth="0dp"
            android:textSize="3sp"
            android:text="B1"
            android:onClick="onClick"
            />
        <Button 
            android:id="@+id/b2"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_weight="1" 

            android:minHeight="0dp"
            android:minWidth="0dp"
            android:textSize="3sp"
            android:text="B2"
            android:onClick="onClick"
         />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:27:08.717

在线性布局中使用权重

```
 <LinearLayout 
     android:orientation="horizontal"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content  weight_sum=10"
     > 
    <Button 
        android:id="@+id/b1"
        android:layout_width="0dp" 
        android:layout_height="wrap_content"
        android:layout_weight="6" 
        android:textSize="3sp"
        android:text="B1"
        android:onClick="onClick"
        />
    <Button 
        android:id="@+id/b2"
        android:layout_width="0dp" 
        android:layout_height="wrap_content"
        android:layout_weight="4" 
        android:textSize="3sp"
        android:text="B2"
        android:onClick="onClick"
     />

</LinearLayout> 
```

# android - 需要帮助找出我的简单应用程序崩溃的原因

> ID：16130945
> 
> 赞同：0
> 
> 时间：2013-04-21T12:09:18.280
> 
> 标签：android

在过去的几天里，我刚刚开始尝试学习 Java。我一直在教程等之间跳跃，以尝试学习一些基础知识。

目前它在启动屏幕上启动 5 秒，然后转到另一个操作（这是正确的术语吗？），这是主页（称为起始点）。然而，它在这 2 页之间跳转时崩溃。所以基本上，我的问题是为什么要这样做，我该如何解决？

我首先创建了主页，它本身就可以正常工作。只是在尝试在这两页之间跳转时。

**清单 - 修改：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.jonysapp.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.jonysapp.test.StartingPoint"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.jonysapp.test.StartingPoint" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

**飞溅.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/mirley"
>

</LinearLayout> 
```

**Splash.Java：**我感觉这里某处的代码有问题。也许与 Try Catch Final 一起？

```
package com.jonysapp.test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle MirleysVariable) {
    // TODO Auto-generated method stub
    super.onCreate(MirleysVariable);
    setContentView(R.layout.splash);
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(5000);

            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openStartingPoint = new Intent(Splash.this, StartingPoint.class);
                Splash.this.startActivity(openStartingPoint);
            }
        }
    };
    timer.start();

}

} 
```

**起点.Java**

```
package com.jonysapp.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class StartingPoint extends Activity {

int counter;
Button add, sub;
TextView display;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_starting_point);
    counter = 0;
    add = (Button) findViewById(R.id.bAdd);
    sub = (Button) findViewById(R.id.bSub);
    display = (TextView) findViewById(R.id.tvDisplay);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("Your total is " + counter);

        }
    });
    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;
            display.setText("Your total is " + counter);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.starting_point, menu);
    return true;
}

} 
```

**日志猫：**

```
04-21 12:48:08.004: D/dalvikvm(31290): GC_FOR_ALLOC freed 66K, 3% free 8887K/9091K, paused 16ms

04-21 12:48:08.014: I/dalvikvm-heap(31290): Grow heap (frag case) to 10.280MB for 1639696-byte allocation

04-21 12:48:08.044: D/dalvikvm(31290): GC_CONCURRENT freed 1K, 3% free 10487K/10759K, paused 2ms+2ms

04-21 12:48:08.084: D/TextLayoutCache(31290): Using debug level: 0 - Debug Enabled: 0

04-21 12:48:08.134: D/libEGL(31290): loaded /system/lib/egl/libGLES_android.so

04-21 12:48:08.134: D/libEGL(31290): loaded /system/lib/egl/libEGL_adreno200.so

04-21 12:48:08.144: D/libEGL(31290): loaded /system/lib/egl/libGLESv1_CM_adreno200.so

04-21 12:48:08.144: D/libEGL(31290): loaded /system/lib/egl/libGLESv2_adreno200.so

04-21 12:48:08.174: D/OpenGLRenderer(31290): Enabling debug mode 0

04-21 12:48:13.094: W/dalvikvm(31290): threadid=11: thread exiting with uncaught exception (group=0x2b542210)

04-21 12:48:13.094: E/AndroidRuntime(31290): FATAL EXCEPTION: Thread-2196

04-21 12:48:13.094: E/AndroidRuntime(31290): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.jonysapp.test/com.jonysapp.test.StartingPoint}; have you declared this activity in your AndroidManifest.xml?

04-21 12:48:13.094: E/AndroidRuntime(31290): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)

04-21 12:48:13.094: E/AndroidRuntime(31290): at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)

04-21 12:48:13.094: E/AndroidRuntime(31290): at android.app.Activity.startActivityForResult(Activity.java:3190)

04-21 12:48:13.094: E/AndroidRuntime(31290): at android.app.Activity.startActivity(Activity.java:3297)

04-21 12:48:13.094: E/AndroidRuntime(31290): at com.jonysapp.test.Splash$1.run(Splash.java:23)

04-21 12:48:13.364: D/OpenGLRenderer(31290): Flushing caches (mode 0)

04-21 12:48:13.404: D/OpenGLRenderer(31290): Flushing caches (mode 1) 
```

很可能我为这个问题发布了太多代码，所以如果我用太多内容轰炸了这个页面，我深表歉意。虽然如果我错过了任何重要的帮助，请告诉我！

作为旁注，如果您有任何提示可以阻止我到目前为止在编码方面养成任何不良习惯，那将不胜感激（但不是必需的）

再次感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:12:48.790

这是你的问题：

> 04-21 12:48:13.094: E/AndroidRuntime(31290): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.jonysapp.test/ **com.jonysapp.test.StartingPoint** }; 您是否在**AndroidManifest.xml**中声明了此活动？

您必须在清单中声明活动，即

```
<activity
    android:name="com.example.project.StartingPoint"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

**ps**：`intent-filter`为应用启动器活动添加。

希望这会有所帮助......干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:16:03.807

看到这个消息：

> 04-21 12:48:13.094: E/AndroidRuntime(31290): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.jonysapp.test/com.jonysapp.test.StartingPoint}; 您是否在 AndroidManifest.xml 中声明了此活动

这意味着您有一些未在清单文件中声明的活动。您在这里使用了所有大写字母：

```
com.jonysapp.test.STARTINGPOINT 
```

尝试制作它：

```
com.jonysapp.test.StartingPoint. 
```

我猜类名区分大小写。@Trinimon 是对的。

# shell - 将 S3cmd 命令作为用户数据传递给 Ec2

> ID：16130952
> 
> 赞同：1
> 
> 时间：2013-04-21T12:10:15.887
> 
> 标签：shell, amazon-web-services, amazon-s3, amazon-ec2, user-data

我有一个 AWS EC2 实例。我正在从这个 EC2 实例创建从属 EC2 实例。

在创建从属实例时，我将用户数据传递给新的从属实例。在该用户数据中，我编写了用于在 EC2 实例中创建新目录并从 S3 存储桶下载文件的代码。

但问题是，脚本在 EC2 实例上创建新目录，但无法从 S3 存储桶下载文件。

用户数据脚本：-

```
#! /bin/bash
cd /home 
mkdir pravin 
s3cmd get s3://bucket/usr.sh >> download.log 
```

如上所示，在此代码中`mkdir pravin`创建目录但`s3cmd get s3://bucket/usr.sh`无法下载文件，并且`download.log`文件也被创建但它仍然是空的。

我该如何解决这个问题，？（用于此的 AMI 预配置了 s3cmd）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:50:25.540

您是否碰巧在运行 Ubuntu？然后 Shlomo Swidler 的问题[Python s3cmd 仅从登录 shell 运行，而不是在启动序列期间可能完全适用](https://forums.aws.amazon.com/message.jspa?messageID=159307)：

> s3cmd Python 脚本（这个：[http](http://s3tools.org/s3cmd) ://s3tools.org/s3cmd ）似乎只在通过交互式登录会话运行时才有效，但在引导过程中通过脚本运行时无效。

[Mitch Garnaat 建议人们应该始终注意在](https://forums.aws.amazon.com/message.jspa?messageID=159284#159284)[用户数据脚本](https://help.ubuntu.com/community/CloudInit)中执行代码所造成的环境差异：

> 这可能与您登录时的环境中的某些差异有关，而不是脚本作为启动序列的一部分运行时的一些差异。我在 cron 作业中遇到了类似的问题。

事实证明这确实是问题所在，[Shlomo Swidler](https://forums.aws.amazon.com/message.jspa?messageID=159307#159307)在此线程中总结了“根本原因”和解决方案：

> Mitch，您的评论帮助我了解了启动顺序的不同之处：操作用户是 root。当我登录时，我是“ubuntu”用户。
> 
> s3cmd 会在当前用户的 ~/.s3cfg 中查找 - 它在 /root/.s3cfg 中不存在，仅在 /home/ubuntu/.s3cfg 中存在。
> 
> 幸运的是 s3cmd 允许您使用 --config /home/ubuntu/.s3cfg 指定配置文件的位置。

# php - jQuery AJAX 帖子不适用于所有计算机

> ID：16130953
> 
> 赞同：2
> 
> 时间：2013-04-21T12:10:20.687
> 
> 标签：php, jquery, ajax

我有一个使用 jQuery/Ajax/PHP 发送数据的简单表单。PHP 代码在将输入发送到数据库之前验证输入，如果输入无效，则将错误消息返回到响应 div。

它在我的计算机和我自己的服务器上运行良好。但是当我将它上传到客户端的服务器时，它并没有按预期工作。当我从客户端的服务器访问页面时，我注意到以下内容：

*   仅当所有输入字段都有值时，验证结果才会发送到响应 div。如果任何字段为空，则不会发生任何事情，也不会返回验证消息。

*   这似乎不是机器问题，因为我使用同一台计算机访问 3 个副本，一个在我的本地主机上，一个在我的服务器上，一个在客户端服务器上。

这是代码；jQuery：

```
$(document).ready(function() {
    $('#signup').click(function() {
        var queryString = 'ajax=true';

        var txtName = encodeURIComponent($('#txtName').val());  
        if(txtName.length > 0){
            txtName = txtName.replace(/\%/g, '-');
        }

        var txtEmail = escape($('#txtEmail').val());

        var txtPhone = encodeURIComponent($('#txtPhone').val());
        if(txtPhone.length > 0){
            txtPhone = txtPhone.replace(/\%/g, '-');
        }

        var txtPhoneCode = encodeURIComponent($('#txtPhoneCode').val());        
        if(txtPhoneCode.length > 0){
            txtPhoneCode = txtPhoneCode.replace(/\%/g, '-');
        }

        queryString = queryString + '&txtEmail=' + txtEmail;
        queryString = queryString + '&txtName=' + txtName;
        queryString = queryString + '&txtPhone=' + txtPhone;
        queryString = queryString + '&txtPhoneCode=' + txtPhoneCode;

        $.ajax({
            type: "GET",
            url: 'send.php',
            data: queryString ,
            success: function(msg) {
                $('#response').html(msg);
            }
        });

        return false;
    });
}); 
```

PHP页面：

```
<?php
if(isset($_GET['ajax']) && ($_GET['ajax'] == 'true')){
    $name = trim($_GET['txtName']); // coming from input text
    $email = trim($_GET['txtEmail']); // coming from input text
    $phone = trim($_GET['txtPhone']); // coming from input text
    $phonecode = trim($_GET['txtPhoneCode']); // coming from a select
    if(strlen($name) == 0){
        echo 'Please enter your name';
    }
    elseif(strlen($email) == 0){
        echo 'Please enter your email';
    }
    elseif(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*$/i", $email)){
        echo 'Please enter a valid email';
    }
    elseif(strlen($phonecode) == 0){
        echo 'Please select phone code';
    }
    elseif(strlen($phone) == 0){
        echo 'Please enter your phone';
    }
    elseif(!preg_match("/^[0-9]*$/i", $phone)){
        echo 'Please enter a valid phone';
    }
    else{
        require('config.php');
        // send to mysql db
        $email = stripslashes($email);
        $name = urldecode(str_replace('-', '%', $name));
        $phone = urldecode(str_replace('-', '%', $phone));
        $phonecode = urldecode(str_replace('-', '%', $phonecode));
        $dt = gmdate("Y-m-d H:i:s");
        $sql = "insert into subscribers(datecreated, name, email, phone, phonecode) values('$dt', '$name', '$email', '$phone', '$phonecode')";
        $result = mysql_query($sql) or die('Error: Failed to save subscription!');
        // redirect
        echo '<script>setTimeout(function(){ window.location = "thankyou.html#ty"; }, 0);</script>';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:36:04.943

由于您正在设置，因此您没有将数据发布到服务器`type: "GET"`。

这意味着发送的是 HTTP GET 请求，而不是 HTTP POST。GET 请求通常由客户端缓存，因此您可能会遇到根本没有发送请求（当使用某些字段值组合时），因为该请求的响应已经在客户端的缓存中。

您应该更改您的代码（javascript 和 php）以改用 HTTP POST。原因有两个：

1.  POST 响应不会被缓存，因此每次提交时都会发送一个新请求。
2.  GET 不应用于可能有副作用的请求。

# controller - 如何根据用户配置文件在自定义控制器中呈现 VisualForce 页面 inputCheckBox？

> ID：16130957
> 
> 赞同：0
> 
> 时间：2013-04-21T12:10:42.740
> 
> 标签：controller, salesforce, visualforce, renderer, object-type

我有一个带有自定义控制器的 VisualForce 页面，我希望用户只有在他们的个人资料中有可访问选项时才能看到像 inputCheckBox 这样的组件。我已经读到，当使用自定义控制器时，VF 正在系统上下文中运行。如果用户具有访问权限，我尝试使用 ObjectType 呈现复选框，并且即使配置文件被阻止到此特定字段，它也确实呈现。我的代码中 Billable 是我要隐藏的字段：

```
apex:inputCheckBox style="width:15px;" rendered="{!$ObjectType.MyObject__c.accessible} value="{!SelectedMO.Billable}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:06:31.907

你真的需要一个自定义组件（一切都是从头开始构建的）吗？如果您将使用标准（设置）控制器和自定义扩展，则应该自动为您完成整个可见性事情，并且代码越少越好......

或者，您可以查询与 Profile/PermissionSet 相关的表。我说查询是因为控制器中的描述调用可能会返回与`accessible`您使用过的相同的内容。这是图表： http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_erd_profile_permissions.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_erd_profile_permissions.htm)

这应该是一个好的开始：

```
SELECT Field, PermissionsEdit,PermissionsRead
FROM FieldPermissions
WHERE Parent.Profile.Name = 'System Administrator'
    AND SobjectType = 'Account'
LIMIT 10 
```

# knockout.js - 使用 Knockout.js 的动态表

> ID：16130959
> 
> 赞同：3
> 
> 时间：2013-04-21T12:11:00.067
> 
> 标签：knockout.js

我正在创建一个动态表，说具有 A、B、C 列并用数据填充它，我还有 1 个列表框，其中我有 A、B、C 作为复选框，因此基于选定的复选框我正在显示列，例如我选择B，C 从列表框中，然后我可以只为 B，C 而不是 A 创建表，为此场景创建 jquery 模板并使用 Knockout.js 进行数据绑定是我正在寻找的，但我怀疑是否可以在此使用模板因为我的桌子太动态了..所以我的问题是在这种情况下是否可以使用淘汰赛。如果不是，那么我使用纯 jquery 的方法将是正确的选择。

如果我遵循 jquery 方法，我将 View 和 ViewModel 分开的想法将是一个问题，因为在这种情况下，View Model 将具有与 jquery 相关的视图操作

任何关于此的样本都将非常有用。

谢谢和问候， Sajesh Nambiar

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T01:07:45.017

您可以使用挖空轻松隐藏/显示表格列。一种简单但有效的方法是使用`visible`列上的绑定来控制其可见性。

这是一个演示这个想法的小提琴：http: [//jsfiddle.net/Ex9J9/42/](http://jsfiddle.net/Ex9J9/42/)

*编辑 - 更新小提琴以修复 404 错误与 Knockout 资源*

**看法：**

```
<h4>Select Columns:</h4>
<ul data-bind="foreach: gridOptions.columns">
    <li>
        <label>
            <input type="checkbox" data-bind="checked: isVisible" /> <span data-bind="text: header"></span>
        </label>
    </li>
</ul>
<hr>
<table>
    <thead>
        <tr data-bind="foreach: gridOptions.columns">
            <th data-bind="visible:isVisible, text: header"></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: people">
        <tr data-bind="foreach: $parent.gridOptions.columns">
            <td data-bind="text: $parent[dataMember], visible:isVisible"></td>
        </tr>
    </tbody>
</table> 
```

**查看模型：**

```
var vm = {
    gridOptions: {
        columns: [{
            header: 'First Name',
            dataMember: 'firstName',
            isVisible: ko.observable(true)
        }, {
            header: 'Last Name',
            dataMember: 'lastName',
            isVisible: ko.observable(true)
        }]
    },

    people: [{
        firstName: 'Bert',
        lastName: 'Bertington'
    }, {
        firstName: 'Charles',
        lastName: 'Charlesforth'
    }, {
        firstName: 'Denise',
        lastName: 'Dentiste'
    }]
};

ko.applyBindings(vm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:47:18.123

如果选项像 3 左右那么小，您可以创建三个模板，然后在页面中执行以下操作：

```
<!-- ko 'if': AIsSelectedAndNotBOrC == true -->
//display the tmeplate
<!-- /ko --> 
```

// 为您的其他变体执行此操作...

这会起作用，但如果你有很多变化，那么它可能太麻烦了。

# ssl - 难以让 kannel 使用 ssl

> ID：16130966
> 
> 赞同：1
> 
> 时间：2013-04-21T12:11:39.200
> 
> 标签：ssl, sms-gateway, kannel

我在让**ssl**与**kannel**一起工作时遇到问题。我一遍又一遍地阅读用户指南，但无法弄清楚。

该问题涉及保存在受 ssl 保护的远程域上的“get”脚本。我已经复制了证书并将它们放在本地 kannel 服务器上。此外，根据用户指南，我在 kannel.conf 文件中添加了以下代码：

```
group = core
...
ssl-server-cert-file = "filename"
ssl-server-key-file = "filename"

group = smsbox
...
sendsms-port-ssl = true 
```

如果有人有任何想法或提示，请分享。谢谢。

# java - Android Eclipse 传入与传出短信：电话号码格式？

> ID：16130968
> 
> 赞同：1
> 
> 时间：2013-04-21T12:11:51.183
> 
> 标签：java, android

我正在开发一个在 Android 设备上捕获输入/输出 SMS 的应用程序。

现在，由于我已经处于测试版中，我注意到在我的 SQL 服务器上，传入的 SMS 地址被格式化为国际号码，例如 +32477889977。

但是，传出 SMS 的格式类似于 0477 88 99 77，即用户将其存储在手机上的方式。

我的外发短信代码是

```
int addressColumn = cursor.getColumnIndex("address");
String number = cursor.getString(addressColumn); 
```

但是在传入的监视器中，代码是

```
String from = msg[i].getOriginatingAddress(); 
```

现在的问题是，我怎样才能让传入的短信与传出的格式相同，所以是国际号码，而不是手机中存储的号码？

电话号码是国际的，这对我的应用程序至关重要，因为我的目标是全球应用程序。所以本地格式化不是一种选择。我真的需要阅读网络发送的号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:30:02.730

您应该使用 E164 数字格式。E164 是电话号码格式的标准，它考虑了您正在处理的语言环境。

谷歌有他们的 E164 库：[https ://code.google.com/p/libphonenumber/](https://code.google.com/p/libphonenumber)

使用库在 E164 中格式化数字的示例如下所示：

```
 PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
    PhoneNumber phoneNumber;
    try {
        phoneNumber = phoneUtil.parse(phone, locale.getCountry());
    } catch (NumberParseException e) {
        throw new InvalidNumberException(convertErrorType(e.getErrorType()), e.getMessage(), e);
    }
    String formatedMsisdn = phoneUtil.format(phoneNumber, PhoneNumberFormat.E164); 
```

当您收到 SMS 时，该号码已经是 e164 格式的，因此在使用 lib 时您将获得相同的号码，但是当您发送 SMS 时，您应该首先使用上面的代码对其进行格式化，以获得 E164 格式。
您使用的语言环境通常是设备设置的语言环境，您可以通过调用来获取它：

```
Locale.getDefault() 
```

然后将语言环境传递给 E164 库。

# angularjs - select2 小部件无法以编程方式更新所选值

> ID：16130975
> 
> 赞同：0
> 
> 时间：2013-04-21T12:13:05.040
> 
> 标签：angularjs, jquery-select2

使用角度、select2 小部件。我在 HTML 中声明它是这样的：

```
<div>
    <select id = "dropdown"
       ...
       <option value = "1" id="1">1</option>
       <option value = "2" id="2" >2</option>
       <option value = "3" id="3"" >3</option>
    /select>
</div 
```

并希望以编程方式更改所选项目（从另一个函数调用）。

调用代码时：

```
 $("#dropdown").select2().select2('val', "3") 
```

我可以看到下拉列表中的值发生了变化，但是当实际访问下拉列表的模型属性（以获取所选项目）时，它没有设置为我尝试设置的值。

检查下拉列表的 onChange 事件时，我可以看到 e.val 未定义。

以下一个小提琴为例（单击链接后，我不认为在警报框中会出现“未定义”）：http: [//jsfiddle.net/kcArV/1/](http://jsfiddle.net/kcArV/1/)

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:23:56.650

它应该是

```
$('#attribute').select2().on('change', function(e) {
    alert($(this).val());    
}); 
```

`e`是事件对象，不是select控件，方法上下文`this`指向select元素，所以可以调用[.val()](http://api.jquery.com/val/)获取选中值

演示：[小提琴](http://jsfiddle.net/arunpjohny/H9H5Z/1/)

# adb - 通过“am start”启动 tvout

> ID：16130978
> 
> 赞同：0
> 
> 时间：2013-04-21T12:13:28.673
> 
> 标签：adb

我有一个小部件可以切换到 tvout 我想通过“am start”命令手动启动该小部件。这是 manifest.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="8" android:versionName="2.2.1"   package="com.archos.tvoutwidget"
xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />
<uses-feature android:name="android.hardware.tvout" />
<application android:label="@string/app_name" android:icon="@drawable/app_icon">
    <activity android:label="@string/app_name" android:name=".TvOutWidget" android:screenOrientation="landscape" android:configChanges="orientation" />
    <receiver android:label="@string/app_name" android:icon="@drawable/app_icon" android:name="TvOutWidgetProvider">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="archos.intent.action.ARCHOS_UPDATE_TVOUT_WIDGET" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/tvout_widget_info" />
    </receiver>
 </application>
 </manifest> 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:13:14.913

是的，这是可能的。只需使用：

```
am start -n com.archos.tvoutwidget/.TvOutWidget 
```

您可以使用以下方式启动任何应用程序：

```
am start -n package_name/activity_name 
```

# php - 在表中使用多个外键

> ID：16130982
> 
> 赞同：1
> 
> 时间：2013-04-21T12:14:04.553
> 
> 标签：php, mysql, sql

我有这些桌子

**客户**

```
id(PK), name, logo 
```

**学校**

```
id(PK), name, logo, client_id (FK) 
```

**班级**

```
id(PK), name, school_id (FK) 
```

**主题**

```
id(PK), name, class_id (FK) 
```

方法 1。

我有主题 ID，我需要获取主题的 class_id、school_id 和 client_id。我可以使用 JOIN 编写查询以从 Client、School、Class 表中获取 id

方法二

我有这样的桌子设计

**客户**

```
id(PK), name, logo 
```

**学校**

```
id(PK), name, logo, client_id (FK) 
```

**班级**

```
id(PK), name, school_id (FK), client_id (FK) 
```

**主题**

```
id(PK), name, class_id (FK), class_id (FK), school_id (FK), client_id (FK) 
```

在这种情况下，我可以通过一个简单的查询来获取所有详细信息，例如

```
SELECT * FROM Subject WHERE id = '2' 
```

哪一种是更好和推荐的方法？我喜欢第二种方法，但不确定是否推荐。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:32:52.023

在性能方面，第二种方法在 SELECT 上更好。这完全取决于您需要多少ID。在编程结构中也是如此。我是否需要指向父级结构的指针？这取决于我们将要进行的操作类型。权衡是空间和同步化，在大多数情况下这不是问题，因为主键是唯一标识符。

我会混合它。我不会像您那样放置所有外键。Class 表是否需要 client_id？在你的情况下，我会在主题中使用外键，但如果性能不是问题，我会使用连接。

还要注意表 Subject 中的 school_id 和 client_id 是外键。

# javascript - 从一个 javascript 文件中分别调用 2 个不同的函数

> ID：16130985
> 
> 赞同：0
> 
> 时间：2013-04-21T12:14:31.430
> 
> 标签：javascript, html

我有一个这样的脚本：

*例子.js*：

```
function ex1(){document.write('example1');}
function ex2(){document.write('example2');}

ex1();
ex2(); 
```

我想在我的 html 页面的不同位置使用*example.js中的***ex1()**和**ex2() ，并对它们进行不同的样式设置。**

 *那么如何在我的 html 中分别调用这些**ex1()**和**ex2 。**可能吗？如果可能，怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:16:29.570

如果您有从 html 引用的文件，则可以毫无问题地调用这些函数。

但是，“样式化”它们是什么意思？功能之间有什么区别？

**EDIT** OP 希望在每个函数中输出不同的样式：

```
function ex1(){document.write('<p class="classone">example1</p>');}<br>
function ex2(){document.write('<p class="classtwo">example1</p>'');} 
```

之后，像这样修改你的 CSS：

```
.classone{
   // styles for the first
}

.classtwo{
   // styles for the second
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:06:54.763

作为一种快速解释，`document.write`用括号“”内的任何内容替换页面内容`()`：

```
eg. document.write("hello world"); // Replaces everything with "hello world" 
```

这是因为这`document`部分代码引用了页面正文中的所有内容（基本上是您看到的所有内容）。

要将文本仅放在页面的特定部分，您必须首先引用要放置文本的项目/元素。您可以通过多种方式执行此操作，例如按元素引用（如@metal_fan 的示例中）、按类、元素类型等。您还可以使用专门引用元素的框架，例如 jQuery。

**@metal_fan 解决方案的 jQuery 版本：**

```
eg. jQuery("#myId").html("hello world"); // Replaces content of #myId element with "hello world" 
```

正如*@Kenneth*暗示的那样（尽管有点严厉），要很好地使用它，您可能需要增加对 javascript 和 HTML 的理解。我可以建议注册**[codingacademy.com](http://www.codecademy.com/)教程**吗？它们非常全面，您可以获得积分，而且是免费的。

祝你好运！*

# java - 仅当 Validation 为 True 时才启用 Jbutton

> ID：16130990
> 
> 赞同：0
> 
> 时间：2013-04-21T12:15:12.083
> 
> 标签：java, swing, validation, jbutton

验证 Swing 应用程序的输入字段（例如文本字段、组合框等）并让用户仅在一切正常时才按下保存按钮的最佳方法是什么。假设 Search 功能也在同一个界面中。所以搜索记录也会填满输入字段。但在这种情况下，保存按钮应保持禁用状态。

```
initComponents();
        btnSave.setEnabled(false);

        txt1.getDocument().addDocumentListener(new DocumentListener() {
              @Override
              public void changedUpdate(DocumentEvent e) {

              }

              @Override
              public void removeUpdate(DocumentEvent e) {
                    validate(txt1.getText(),e);
              }

              @Override
              public void insertUpdate(DocumentEvent e) {
                    validate(txt1.getText(),e);
              }

              public void validate(String enteredText,DocumentEvent e) {
                    String currText = "";
                    try {
                          Document doc = (Document) e.getDocument();
                          currText = doc.getText(0, doc.getLength());
                    } catch (BadLocationException e1) {
                    }

                    if(enteredText.equals(currText)){
                      //if validated successfully
                           btnSave.setEnabled(false);
                    }else{
                    btnSave.setEnabled(true);
                    }
              }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:31:23.840

你试过这样吗？

```
 final JTextField textField = new JTextField();
    final JButton submitBtn = new JButton();
    submitBtn.setEnabled(true);

    textField.getDocument().addDocumentListener(new DocumentListener() {
        public void changedUpdate(DocumentEvent e) {
            validate(e);
        }
        public void removeUpdate(DocumentEvent e) {
            validate(e);
        }
        public void insertUpdate(DocumentEvent e) {
            validate(e);
        }

        public void validate(String enteredText) {
            String currText = "";
            try {
                Document doc = (Document)e.getDocument();
                currText = doc.getText(0, doc.getLength());
            } catch (BadLocationException e1) {
                e1.printStackTrace();
            }
            //validation of currText here

            //if validated successfully
            submitBtn.setEnabled(true);
            //else
            submitBtn.setEnabled(false);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:16:25.300

在两个地方使用来调节按钮的`enabled`属性：`Save``setEnabled()`

*   在您的执行`shouldYieldFocus()`中`InputVerifier`附加到每个相关组件。[这里](https://stackoverflow.com/a/14170275/230513)引用了教程和一些示例。

*   在组件的普通侦听器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:19:39.987

创建一个方法来检查所有输入是否已完成或/和所有验证是否都通过并最终返回一个布尔值。

```
public boolean validate(...){
   //some stuff
   if(validated){
     return true;
   }else{
     return false;
   }
} 
```

那么你可以像使用它一样使用它。

```
button.setEnabled(validate(...)); 
```

# iphone - 访问 GTLPlusActivity 属性

> ID：16130991
> 
> 赞同：1
> 
> 时间：2013-04-21T12:15:14.773
> 
> 标签：iphone, ios, xcode, google-plus

我已将 Google Plus iOS SDK v1.2.1 集成到我的 iOS 应用程序中。身份验证后，我试图获取用户的活动提要。我的代码如下：

```
 GTLServicePlus* plusService = [[GTLServicePlus alloc] init];
    [plusService setAuthorizer:[GPPSignIn sharedInstance].authentication];
    plusService.retryEnabled = YES;

    GTLQueryPlus *query = [GTLQueryPlus queryForActivitiesListWithUserId:@"me" collection:kGTLPlusCollectionPublic];

    [plusService executeQuery:query
            completionHandler:^(GTLServiceTicket *ticket,
                                GTLPlusActivityFeed *data,
                                NSError *error) {

                for (GTLPlusActivity *activity in data.items) {

                    // ITERATE THROUGH THE ACTIVITIES

                    NSString *publishedDate = activity.published; <---- ERROR

                    // "PROPERTY 'published' CANNOT BE FOUND 
                    // IN FORWARD CLASS OBJECT "GTLPLusActivity""
                    // WHY ARE THE VARIABLES SUCH AS published, placeName, 
                    // title, actor etc NOT ACCESSIBLE
                }

            }]; 
```

我能够成功检索用户的帖子。GTLPlusActivity 类有许多属性，如图所示：

![在此处输入图像描述](https://i.stack.imgur.com/sbwzA.png)

每当我尝试使用“。”访问属性时。运算符，例如 for 循环中的“activity.actor”，它给出了错误`"Property 'actor' cannot be found in forward class object 'GTLPlusActivity'"`。为什么我无法访问属性？我需要在 UITableView 中显示它们。

**编辑：**代码快照。错误以红色清晰显示。

![在此处输入图像描述](https://i.stack.imgur.com/oXaNt.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T00:44:53.323

首先，检查错误情况并确保错误代码为零。我已经尝试了您的代码，并且它在我的最终工作正常，所以很可能您得到的响应存在问题。通常 activity.actor 会返回一个 GTLPlusActivityActor。

尝试类似：

`if (error) { NSLog(@"Status: Error: %@", error); } else <Do stuff>`

编辑：此外，我们的 iOS 快速入门是了解我们如何处理代码的某些部分的绝佳资源。ListMoments 位与处理活动非常相似。 [https://developers.google.com/+/quickstart/ios](https://developers.google.com/+/quickstart/ios)

编辑2：另外，请确保您拥有所有正确的进口。尝试

```
#import "GTLPlusActivity.h" 
```

或者

```
#import "GTLPlus.h" 
```

# javascript - 如何防止表格单元格在添加文本时调整大小

> ID：16130993
> 
> 赞同：2
> 
> 时间：2013-04-21T12:15:25.950
> 
> 标签：javascript, css, html-table

我有下表（实际上更大，但只是为了简单起见）：

```
<div>
   <table id="gametable">
        <tr><td>1</td> <td>2</td></tr>
        <tr><td>3</td> <td>4</td></tr>
        <tr><td>5</td> <td>6</td></tr>
    </table>
</div> 
```

和 CSS：

```
 #gameTable {
        table-layout:fixed;
        position:absolute;
        height:640px;
        width:640px;
        margin-left:31%;
        margin-top:8%;
        }

        div {
        white-space: nowrap;
        overflow: hidden;
        }

        td {
        cursor: pointer;
        background-color: rgb(150,150,150);
        box-shadow: 3px 3px 1px #888888;
        text-align:center;
        font-weight:bold;   
        padding:0px;
        } 
```

在我的 Javascript 中，我将一个数字/字符串添加到特定表格单元格的 innerHTML。

```
 table.rows[x].cells[y].innerHTML = mines; 
```

当我这样做时，它会导致所有单元格调整大小，而我添加文本的单元格是最大的。桌子大小保持不变。我希望每个单元格的大小保持完全相同，即使在向其中添加文本时也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:17:49.497

您可以为 td 设置固定宽度：

```
td {
 width: 100px;
 cursor: pointer;
 background-color: rgb(150,150,150);
 box-shadow: 3px 3px 1px #888888;
 text-align:center;
 font-weight:bold;   
 padding:0px;
    } 
```