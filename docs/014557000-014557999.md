# StackOverflow 问答 14557000-14557999

# lisp - 方案宏是否与变量和函数在同一个命名空间中？

> ID：14557006
> 
> 赞同：2
> 
> 时间：2013-01-28T07:00:36.107
> 
> 标签：lisp, scheme

我知道，与 Common lisp 不同，Scheme 有一个用于变量和函数的通用命名空间。但是宏也落在那里吗？

它可以被时间分开，它们存在于其中。但是在编译时，当宏都是扩展时，肯定有一些函数，如list或cons，因此运行时和编译时都存在。

那么我可以例如写以下内容：

```
(define (add a b) (+ a b))

(let-syntax ((add (lambda (x)
                    (syntax-case x ()
                      ((_ a ...) (syntax + a ...))))))
   (display (add 1 2 3))
   (display (reduce-left add 0 '(1 2 3)))) 
```

得到 6 6？或者反之，先定义宏，再定义函数？并且在这样的表达中：（add 1 2）会发生什么？是函数调用还是宏扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:16:30.273

是的，变量和宏在同一个命名空间中。（我没有提到过程，因为它们只是可以存储在变量中的值，比如数字或字符串。）

在你的 ' `let-syntax`' 体内，' `add`' 总是指宏。在您的示例中的其他任何地方，“添加”都是指该过程。

请注意，您的代码中有两个错误：

1.  ' `syntax`' 表达式不正确；它应该是`(syntax (+ a ...))`。
2.  在您对“reduce-left”的调用中，将宏“add”作为参数传递给过程是错误的。

我应该提到一个复杂的情况：如果您首先将' `add`'定义为顶级过程，然后根据'add'定义一些其他过程，然后再将'add'重新定义为顶级宏，结果定义不明确并且会因一种实现而异。类似地，如果“添加”以顶级宏开始，后来被重新定义为过程。

# jquery - jQuery：追加到表中的外部 tr

> ID：14557009
> 
> 赞同：0
> 
> 时间：2013-01-28T07:01:01.550
> 
> 标签：jquery, html

请帮助我，我正在尝试将元素附加到 div 类 addjob 的 tr 之外，但我不知道该怎么做。顺便说一句，这个函数是如何工作的。每当我尝试单击添加作业标题时，它必须将其附加到tr>td>div.addjob

这是我的jQuery：

```
 $(function() { 
$('body').on('click','.rmv',function(){
    $(this).parents('tr').hide('slow', function(){  $(this).parents('tr').remove(); });
});

$('body').on('click','.addjob',function(){
        var $clone = $('table.tbll tr.cloneme:first').clone();
         console.log($clone);
         $clone.append("<td><div class='rmv' >Remove</div></td>");
         ($(this)).append($clone);  
});

 }); 
```

这是我的 HTML：

```
<table cellspacing="10" class="tbll" >
<tr>
<td>Choose Sub Heading</td><td><select name="subheading_id" style="min-width:145Px">
            <option value="1" Sub heading Me</option>
            <option value="2" Sub heading Me 2</option>     
    </select></td><td>&nbsp;</td>
</tr>
<tr class="cloneme">
<td>Choose Job Title</td><td><select name="jobtitles_id" style="min-width:145Px"><?php
            <option value="a" >A</option>   
            <option value="b" >B</option>   
            <option value="c" >C</option>       
                    <option value="none" >None</option> 
    </select></td>
</tr>
<tr>
<td><div class="addjob" >Add another Job Title</div></td>
</tr>
</table> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:06:12.470

您正在尝试将克隆附加`<tr>`到`<div class=addjob>`.. 尝试将其附加到 parent() ..

尝试这个

```
 $('body').on('click','.addjob',function(){
    var $clone = $('table.tbll tr.cloneme:first').clone();
     console.log($clone);
     $clone.append("<td><div class='rmv' >Remove</div></td>");
     $('div.addjob').parents().eq(2).append($clone);   //here
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/tnGt6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:08:12.500

```
$('.addjob').parent('tr').after($clone); 
```

我想这会做到的

完整代码

```
$('body').on('click','.rmv',function(){
    $(this).parents('tr').hide('slow', function(){  $(this).parents('tr').remove(); });
});

$('body').on('click','.addjob',function(){
        var $clone = $('table.tbll tr.cloneme:first').clone();
         console.log($clone);
         $clone.append("<td><div class='rmv' >Remove</div></td>");
        $('div.addjob').parent('tr').after($clone);
}); 
```

# build - Jenkins 分布式构建

> ID：14557011
> 
> 赞同：0
> 
> 时间：2013-01-28T07:01:11.363
> 
> 标签：build, jenkins

我需要有关使用 Jenkins 进行分布式构建的信息。我需要的分发不是正常的 Jenkins 分布式构建（主/从配置），它的作用类似于负载均衡器，因此作业将在可用节点上执行。

对于 cpp 项目，有 distcc、netcc 等工具可以在网络上的多台机器上分发构建，以便编译速度快。我们可以使用任何类似的工具或方法来减少构建时间吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:10:07.403

Jenkins 不是编译器——它只是软件构建活动的协调器。

没有什么可以阻止您在 Jenkins 启动的构建脚本中使用[distcc](http://code.google.com/p/distcc/)或类似的东西，并且编译器节点不需要知道 Jenkins 启动它的事实。

如果您有一个分布式编译器并且可以从命令提示符中使用它，那么也可以从 Jenkins 作业中调用它。

# x86 - 如何在 256 位 AVX(YMM) 寄存器中交换中间两个 64 位

> ID：14557019
> 
> 赞同：6
> 
> 时间：2013-01-28T07:01:32.297
> 
> 标签：x86, simd, avx

有什么方法可以交换 256 位 AVX(YMM) 寄存器中的中间两个 64 位吗？

我知道我们可以利用 VPERM2F128 交换低 128 位和高 128 位，而 vshufps 似乎只能在高 128 位和低 128 位内工作。

所以我想知道是否有任何有效的说明来处理这种典型情况？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:18:12.803

谢谢你们！我发现 AVX2 vpermq 可以很好地解决这个问题。

# python - 在 .vimrc 文件中执行不同版本的 python

> ID：14557020
> 
> 赞同：1
> 
> 时间：2013-01-28T07:01:34.310
> 
> 标签：python, vim

我试图让 powerline.vim 工作，问题是在设置时它试图运行错误版本的 python。这条线导致了问题。

```
python from powerline.ext.vim import source_plugin; source_plugin() 
```

我怎样才能改变它以便它执行`/usr/local/bin/python`呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T07:34:09.227

你不能。因为您**没有**使用*/anything*`/bin/python`。vim 二进制文件直接链接到 python 解释器库。

该库称为`/usr/lib/libpythonX.Y.so.Z`. 例如`/usr/lib/libpython2.7.so.1`。它是一个共享库，因此您可以使用它的更新版本（例如更改库路径），但只有一个具有相同编号（X、Y 和 Z）。所以你可以使用 python 2.7.3 而不是 python 2.7.0，但是要使用 python 2.7.3 而不是 python 2.6.2，你必须重新编译 vim。

但我怀疑你只是想以错误的方式做事。您应该简单地尝试将 powerline 安装到 vim 使用的 python 版本中。

# c# - c# 中的 Win32（非 .net）、.Net、App Mixed（.Net 和 Win32）64 位如何检查 MSI 类型？

> ID：14557021
> 
> 赞同：0
> 
> 时间：2013-01-28T07:01:38.177
> 
> 标签：c#, wix, windows-installer

我想检查 MSI 的类型是 Win32（非 .Net）、.Net、App Mixed（.Net 和 Win32）还是 64 位。我找到了如何检测 dll 的类型而不是 Windows 安装程序包的类型。我正在使用 WiX 和 C#。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:01:53.253

MSI 类型存储在[模板](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372070%28v=vs.85%29.aspx)属性的[摘要信息流](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367533%28v=vs.85%29.aspx)中。

# javascript - 如何在 javascript IE 中按文本查找选项值

> ID：14557022
> 
> 赞同：1
> 
> 时间：2013-01-28T07:01:38.383
> 
> 标签：javascript, internet-explorer

我正在尝试通过 javascript 中的部门名称查找部门 ID。

数据包含在带有选项的表单选择中。部门名称在文本中，id 是值。

这是我在 Chrome 中完美运行但在 IE 中无法运行的内容。

```
var deptValue;
function getDepartmentValue (departmentText) {
    var deptOptions = document.getElementById("Departments");
    for (var i = 0; i < deptOptions.length; i++) {
        if (deptOptions[i].text == departmentText ) {
            deptValue = deptOptions[i].value; //set a global variable called deptValue
            return;
        }
    }
} 
```

我相信问题出在我的 if 语句中

```
if (deptOptions[i].text == departmentText ) 
```

任何建议将不胜感激！

问候，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:08:33.313

假设`Departments`是元素，这一行`id`：`select`

```
var deptOptions = document.getElementById("Departments"); 
```

应该

```
var deptOptions = document.getElementById("Departments").options;
// ------------------------------------------------------^ 
```

[实例](http://jsbin.com/abekap/1)| [来源](http://jsbin.com/abekap/1/edit)（我将全局变量（!!!）更改为返回值）

# mysql - 如何找出哪个操作触发了 MySQL 中的触发器

> ID：14557026
> 
> 赞同：0
> 
> 时间：2013-01-28T07:02:14.110
> 
> 标签：mysql, triggers

MySQL 中是否有特殊变量`TG_OP` `TG_TABLE_NAME`（如在 postgresql 中），如果没有，那么是否有可能知道触发了哪个操作（INSERT、UPDATE 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:02:10.007

Mysql 为不同的操作定义了不同的触发器。例如，BEFORE INSERT 会有一个触发器，因此您会知道插入操作触发了触发器，或者可能有 AFTER UPDATE 的触发器，因此您知道更新导致触发器被触发。

阅读下面的教程，详细了解 mysql 触发器。

[http://www.mysqltutorial.org/mysql-trigger-implementation.aspx](http://www.mysqltutorial.org/mysql-trigger-implementation.aspx)

[http://blog.cnizz.com/2010/11/12/mysql-trigger-how-to-example-tutorial-and-syntax/](http://blog.cnizz.com/2010/11/12/mysql-trigger-how-to-example-tutorial-and-syntax/)

# c# - 在 Windows 中为苹果推送通知创建 p12 证书

> ID：14557028
> 
> 赞同：2
> 
> 时间：2013-01-28T07:02:52.333
> 
> 标签：c#, .net, ssl-certificate, apple-push-notifications

我正在用 c# 为 iPhone 做推送通知（服务器端）。我有“developer_Push_SSL_certi.cer”文件。

1.  如何从 .cer 文件创建 .p12 证书？或者我必须在我的电脑上安装上面的 .cer 文件？
2.  在服务器端（c#）发送推送通知需要什么文件。

请指导我，Windows中APN（服务器端）所需的认证过程是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-05T23:22:01.417

您不需要 mac 来转换证书，只需使用 OpenSSL ( [http://www.openssl.org](http://www.openssl.org) )

这是命令

```
$ openssl x509 -in cert.cer -inform DER -outform PEM -out cert.pem
$ openssl pkcs12 -in key.p12 -out key.pem -nodes
$ openssl pkcs12 -export -inkey key.pem -in cert.pem -out certName.p12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:25:27.227

首先将这个新证书 (developer_Push_SSL_certi.cer) 安装到您的 Mac。

然后打开 KeyChain Access 并从左侧菜单导航到 Keys。查找您的开发证书。

展开您的证书，您将看到 Private 和 Public 行，然后右键单击“Private”之一，使用密码导出此证书。

这足以从 Windows 发送通知。

# ruby-on-rails - 如何设置 rspec 视图规范，以便对其所有规范只调用一次渲染？

> ID：14557031
> 
> 赞同：3
> 
> 时间：2013-01-28T07:03:08.113
> 
> 标签：ruby-on-rails, view, rspec

我有以下视图规范：

```
describe "carts/show" do
  before(:each) do
    book = build_stubbed(:product, title: "book")
    car = build_stubbed(:product, title: "car")
    line_item1 = build_stubbed(:line_item, product: book, quantity: 3)
    line_item2 = build_stubbed(:line_item, product: car, quantity: 1)
    @cart = assign(:cart, build_stubbed(:cart, line_items: [line_item1, line_item2]))
    render
  end

  it "displays a single car" do
    assert_select "li", text: "1 time: car"
  end
  it "displays 3 books" do
    assert_select "li", text: "3 times: book"
  end
  it "has exactly 2 items" do
    assert_select "li", 2
  end

end 
```

此规范按预期工作。但是，因为设置在一个`before(:each)`块中，所以设置和`render`方法在每个块中调用一次。这很慢。理想情况下，它们应该只为整个`describe`块调用一次。

我想`before(:each)`改成`before(:all)`可以解决这个问题，但我得到了错误（show.html.erb_spec.rb 中的第 16 行是`render`调用）：

```
NoMethodError: undefined method `example_group' for nil:NilClass
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-rails-2.12.0/lib/rspec/rails/example/view_example_group.rb:106:in `_default_file_to_render'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-rails-2.12.0/lib/rspec/rails/example/view_example_group.rb:112:in `_default_render_options'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-rails-2.12.0/lib/rspec/rails/example/view_example_group.rb:45:in `render'
show.html.erb_spec.rb:16:in `block (2 levels) in <top (required)>'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/hooks.rb:23:in `instance_eval'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/hooks.rb:23:in `run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/hooks.rb:106:in `run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/hooks.rb:424:in `run_hook'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/example_group.rb:319:in `run_before_all_hooks'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/example_group.rb:368:in `run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/command_line.rb:28:in `map'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/command_line.rb:28:in `block in run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/reporter.rb:34:in `report'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/command_line.rb:25:in `run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/runner.rb:80:in `run'
~/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.12.1/lib/rspec/core/runner.rb:17:in `block in autorun' 
```

我不知道我还能在这里做什么。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:39:03.470

RSpec-Rails 的渲染肯定假设它发生在每个测试中，这会让这有点尴尬，我们需要从它的外观上玩弄内部状态。

通过查看 rspec-rails，它看起来像是将其`render`调用委托给[`ActionView::TestCase::Behavior#render`](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/test_case.rb#L113). `@rendered`似乎是重要的状态（并且可能`@view`），但我不知道这是否会引入更多的陷阱。

这是我完全未经测试的方法：

```
describe "carts/show" do

  # Memoize the view across test runs for speed; this is some dangerous
  # spelunking in internal state, though!
  rendered_view    = nil
  rendered_content = nil

  before(:each) do
    if rendered_view && rendered_content
      @view     = rendered_view
      @rendered = rendered_content
    else
      book = build_stubbed(:product, title: "book")
      car = build_stubbed(:product, title: "car")
      line_item1 = build_stubbed(:line_item, product: book, quantity: 3)
      line_item2 = build_stubbed(:line_item, product: car, quantity: 1)
      @cart = assign(:cart, build_stubbed(:cart, line_items: [line_item1, line_item2]))

      render

      rendered_view    = @view
      rendered_content = @rendered
    end
  end

  it "displays a single car" do
    assert_select "li", text: "1 time: car"
  end
  it "displays 3 books" do
    assert_select "li", text: "3 times: book"
  end
  it "has exactly 2 items" do
    assert_select "li", 2
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T23:41:37.833

这并不理想，但您可以使用[`shared_subject`](https://gist.github.com/dnagir/c47aba850d5a3adf931d)

要使用它，您基本上：

1.  将 'subject' 替换为 'shared_subject' 以在整个上下文中共享第一个结果。
2.  （可选）用 'shared_setup' 替换 'before(:each)' 块
3.  完毕。主题将在一个单一的上下文中共享（嵌套将再次重新设置）。

所以你的例子看起来像：

```
describe "carts/show" do
  shared_subject do
    book = build_stubbed(:product, title: "book")
    car = build_stubbed(:product, title: "car")
    line_item1 = build_stubbed(:line_item, product: book, quantity: 3)
    line_item2 = build_stubbed(:line_item, product: car, quantity: 1)
    @cart = assign(:cart, build_stubbed(:cart, line_items: [line_item1, line_item2]))
    render
  end

  it "displays a single car" do
    assert_select "li", text: "1 time: car"
  end
  it "displays 3 books" do
    assert_select "li", text: "3 times: book"
  end
  it "has exactly 2 items" do
    assert_select "li", 2
  end

end 
```

# asp.net - 在 linq 中使用 MySql

> ID：14557033
> 
> 赞同：1
> 
> 时间：2013-01-28T07:03:26.943
> 
> 标签：asp.net, sql-server, linq

我有 2 个问题需要帮助。

1）我开发了一个应用程序，在其中我将文件（doc、xls 等）存储在数据库中。我使用 LINQ 来执行插入、更新和删除。我使用过 MS SQL。现在，要求是使用MySql。我可以在 MySql 中使用 LINQ。我搜索了一下，发现 LINQ 只支持 MS SQL 和访问。如果决定使用MySql，我不想回到传统的3tier架构。NHibernate 可以与 MySql 一起使用吗？

2）刀片服务器在需要管理500gb+数据（文档）的数据时如何执行。RAM约为12GB。请提出建议，如果存在如此大量的数据，最好不要将数据（文档）存储在数据库中，而是将其存储在服务器上的驱动器中。因为我已经看到如果数据存储在数据库中（二进制格式）大小确实增加了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:24:20.317

好的，我们开始

1) 无法通过 Linq To Sql 与 MySQL 数据库进行通信，就像您提到的那样，它仅适用于 MSSQL 和 Access。更喜欢使用 EntityFramework 与可变数据库进行通信。使用 Linq To Sql 几乎是一样的。您可以使用 MSSQL 数据库轻松开发应用程序，并在部署后切换到 MySQL 数据库，只需更改 ConnectionString 并安装 MySQL-EntityFramework-Connector。这些链接可能对您有帮助：

*   [Codeproject.com - 面向绝对初学者的实体框架简介](http://www.codeproject.com/Articles/363040/An-Introduction-to-Entity-Framework-for-Absolute-B)
*   [Stackoverflow.com - 将 MySQL 与实体框架一起使用](https://stackoverflow.com/questions/76488/using-mysql-with-entity-framework)

2）我建议您将数据存储在物理驱动器上并设置对数据库中存储文件的引用。这是因为在请求您的一个文档时传输的大量数据会减慢数据库的速度，而其他查询通常只需要几毫秒才能执行。

# image - 如何将图片另存为从 windows phone 7 到服务器的文件路径

> ID：14557036
> 
> 赞同：0
> 
> 时间：2013-01-28T07:03:50.990
> 
> 标签：image, windows-phone-7, save-as

我有一个从图像库中选择图像的应用程序，并且我有一个图像路径，例如 PhotoResult e e.OriginalFileName 我得到了完整的路径，所以我可以如何使用 Windows Phone 直接将此图像保存到服务器。

我有所有的流和路径，所以我如何将这个图像作为图像保存到我的服务器中，就像文件夹系统一样，并且在我有 Imagename.jpg 的文件夹中，所以即使我没有`Server.Map()`Windows也可以保存电话。是否有任何实用程序或任何代码可以上传图片？

就像我如何将此图像映射到服务器一样 Server.Map('`');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:21:23.207

您可以将图像发送到服务器并在 c# 中使用 Directory.CreateDirectory。

帮助链接：- [https://stackoverflow.com/questions/2779628/how-to-create-new-file-with-path]](https://stackoverflow.com/questions/2779628/how-to-create-new-file-with-path)在将为您创建路径的服务器中。

然后，您必须将文件保存到该路径。Dererk 提供的链接将允许您将图像存储到 WP7 中的独立存储。

# java - 怎样才能得到一棵只有一次树遍历的树？

> ID：14557037
> 
> 赞同：0
> 
> 时间：2013-01-28T07:03:59.867
> 
> 标签：java, data-structures, tree, binary-tree, tree-traversal

考虑我想以序列化方式传输二叉树，我只有一个字符串来传递该树，我只能使用一次遍历的帮助，有什么办法可以做到吗？- （在 Ebay 上被问到）..

换句话说，可以只使用一个树遍历字符串来生成二叉树吗？面试官还给了我一个提示，说我可以在没有叶子的地方使用 null ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:34:42.777

[http://www.seas.gwu.edu/~csci133/fall05/trees-fig4.jpg](http://www.seas.gwu.edu/~csci133/fall05/trees-fig4.jpg)

请考虑上图中的树，如果我们只想使用 1 次遍历传递一个字符串，我们可以在该特定位置没有子节点时放置特殊符号。

现在如果我们通过 1 2 4 7 $ $ $ 5 $ $ 3 $ 6 8 $ $ 9 $ $

```
 1
                                     /      \
                                   2        3
                                  /  \     / \
                                 4    5   $   6
                                / \  / \     / \
                               7   $ $  $    8   9
                              / \           /\  /\
                             $  $          $ $ $ $ 
```

这里 $ 意味着孩子是空的，所以移动到订单的下一个位置。

如果我错了，请纠正我，以上是不可能的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:21:38.760

[编辑] 鉴于这似乎是一些给定的任务，而不是真正的现实问题，答案没有意义。第二次尝试：

看到您可以使用空值，您确实可以使用带有空值的预购。

`a b null null c null null`将是一棵看起来像的树`(a (b) (c))`，而`(a (b (c)) )`将被编码为`a b c null null null null`（请注意，我给每个叶子两个空子节点，也许没有它也可以工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:10:28.897

如果您想用字符串、字节 [] 或流表示任何对象，您可以查看 JSON 序列化或 XML 序列化。

# c# - C#：Tamir.SharpSsh 无法在 unix 中更改目录

> ID：14557038
> 
> 赞同：0
> 
> 时间：2013-01-28T07:04:02.000
> 
> 标签：c#, unix, ssh, cd, sharpssh

我目前正在用 C# 制作一个类似文件对话框的表单，用于浏览 unix 服务器上的目录。我在让“cd ..”命令工作时遇到了一些麻烦。

这是我的代码示例

```
 var sshExec = new SshExec("192.x.x.x", "user", "pass");
    sshExec.Connect();
    var err = string.Empty;
    var out = string.Empty;
    sshExec.RunCommand("pwd", ref out, ref err);
    Console.Writeline(out);
    sshExec.RunCommand("cd ..");
    sshExec.RunCommand("pwd", ref out, ref err);
    Console.Writeline(out); 
```

我尝试过其他格式，例如`cd ..`or $"cd .." 但我似乎仍然在同一个目录中。我想每次我使用 RunCommand() sshExec 都会创建一个新事务，因此我会留在同一个目录中。

任何人都知道我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-28T15:11:57.657

```
sshExec.RunCommand("pwd", ref out, ref err);
sshExec.RunCommand("cd ..");
sshExec.RunCommand("pwd", ref out, ref err); 
```

每次调用`RunCommand()`都会创建一个单独的通道，该通道独立于其他通道运行。在常见情况下（与 unix 服务器建立 ssh 连接），每个通道将调用一个单独的 shell 实例。在一个通道中运行这样的命令`cd`不会影响在不同通道中启动的后续命令。

为了做你想做的事，你必须安排在同一个`RunCommand`调用中运行命令序列。假设远程服务器是一个调用 shell 的 unix 服务器`bash`，你可以使用 shell 语法，例如：

```
sshExec.RunCommand("pwd && cd .. && pwd", ref out, ref err); 
```

# string - 删除文本文件中的非 utf8 行

> ID：14557039
> 
> 赞同：1
> 
> 时间：2013-01-28T07:04:15.247
> 
> 标签：string, utf-8, notepad++, keyword

如何仅删除文本文件中的非 utf8 关键字/行。

例如。

```
你好
相手１２３abc
this is only abc 
```

我只想删除包含所有英文单词的行，而不是包含 utf8 单词的行。所以在这种情况下，只会删除“这只是 abc”。是否可以在记事本++中完成，或者我需要为它编写脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:08:54.357

这可以通过以下步骤实现；

*   打开 Notepad++ 选择 Find 菜单并选择最后一个选项卡“Mark”，输入正则表达式`^(([a-zA-Z])+\s?)+`，选择 Bookmark Line，然后单击“Mark All”按钮。

    ![将仅英文文件标记为已添加书签](../Images/8f4d827da43e55353f35b4106eee9fcc.png)

*   从下拉菜单中选择；搜索 --> 书签 --> 删除书签行

    ![完成文件](../Images/7cfe3d3ea5c1f1d768dd37514c94c6ff.png)

我还建议确保 Notepad++ 是最新的。我用 6.3 版对此进行了测试。标记线是最近添加的。

# visual-studio - 如何对 Visual Studio 2012 CSS Outline 类名进行排序？

> ID：14557041
> 
> 赞同：2
> 
> 时间：2013-01-28T07:04:19.193
> 
> 标签：visual-studio, visual-studio-2012

有没有办法按字母顺序对 Visual Studio 的 CSS 大纲窗口中的类名进行排序？

![在此处输入图像描述](../Images/ef1102f3dc10a79398ceb82bafab4fdd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-19T10:31:35.647

在 Visual Studio Code 1.27.2 中，将鼠标悬停在大纲面板上，单击三个点，您就有了排序选项

[![在此处输入图像描述](../Images/d2d2d59682cae42b02d6c7b9adef4fa8.png)](https://i.stack.imgur.com/gYxAA.png)

# php - 如果存在多个值相同的php magento，则在foreach中重命名属性值

> ID：14557045
> 
> 赞同：0
> 
> 时间：2013-01-28T07:04:33.843
> 
> 标签：php, magento, foreach, data-migration

嗨，我有一个从**magento****获取**所有产品数据的脚本，出现了一个**问题**，即**有些**产品的**名称****相同**但************不同****，**我想**附加**具有**相同**值的产品名称，而**其他**具有**唯一**值的产品名称**不应该**附加...**********

 ****```
<?php
@ob_start();
@session_start();
ini_set('display_errors', 1);
include '../../../../app/Mage.php';
umask(0);
Mage::app('default');

function empty_pk($data){
if($data!=''){return $data;}
else {return "&nbsp;";}
}
$collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('status', 1);
//arsort($collection);  

//echo'<pre>';
 //print_r($collection);die();
echo 'count===='.count($collection).'<br/>';
$i=0;
foreach ($collection as $product_all) { 
//echo $product_all->getId().'<br/>';
    if($i==10) break;  
 $id = $product_all->getId();        
 $neew = Mage::getModel('catalog/product')->load($id);         
//echo'<pre>';

$product_id = $neew->getId();
$created_at = ' 2013-01-26 00:53:46';
$description = $neew->getdescription();
$short_description = $neew->getshort_description();
$sku = $neew->getsku();
$size_fit = $neew->getsize_fit();
$style_ideas = $neew->getstyle_ideas();
$name = $neew->getname(); 
```

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:17:24.817

您可以使用临时数组来保存名称的计数，然后按它进行过滤：

```
function empty_pk($data){
if($data!=''){return $data;}
else {return "&nbsp;";}
}
$collection = Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('status', 1);
//arsort($collection);  

$names = array();
foreach ($collection as $product_all) {
  $name = $product_all->getName();
  if (array_key_exists($name)) {
      $names[$name]++;
  } else {
      $names[$name] = 1;
  }
}
//echo'<pre>';
 //print_r($collection);die();
echo 'count===='.count($collection).'<br/>';
$i=0;
foreach ($collection as $product_all) { 
//echo $product_all->getId().'<br/>';
    if($i==10) break;  
 $id = $product_all->getId();        
 $neew = Mage::getModel('catalog/product')->load($id);         
//echo'<pre>';

// Exit if unique.
if ($names[ $neew->getName() ] == 1) {
    break;
}

$product_id = $neew->getId();
$created_at = ' 2013-01-26 00:53:46'; 
```****

# asp.net-mvc - 在 ASP.net MVC3(Razor) 中将 rdlc 转换为图像

> ID：14557047
> 
> 赞同：2
> 
> 时间：2013-01-28T07:04:46.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, image, razor, rdlc

在我的`asp.net mvc3(Razor)`应用程序中，我`rdlc`用于报告。出于打印目的，我只是`need to convert the rdlc into image`. 我刚刚尝试了以下代码

```
 public ActionResult FilePrint()
    {
        LocalReport localReport = new LocalReport();

        localReport.ReportPath = @"Reports/OP/Rdlc/ClinicInvoiceReceipt.rdlc";

        iClinicInvoiceReceipt = new RmtOPInvoice.ClinicInvoiceReceipt();
        DataTable dt = iClinicInvoiceReceipt.SelectReceiptDtlForPrint(2);

        ReportDataSource reportDataSource = new ReportDataSource();
        reportDataSource.Value = dt;
        reportDataSource.Name = "DataSet1";
        localReport.DataSources.Add(reportDataSource);

        string reportType = "Image";
        string mimeType;
        string encoding;
        string fileNameExtension;
        Warning[] warnings;

        string[] streams;

        byte[] renderedBytes;
        //Render the report

        renderedBytes = localReport.Render(
            reportType,
            null,
            out mimeType,
            out encoding,
            out fileNameExtension,
            out streams,
            out warnings);

        return File(renderedBytes, "Image");
  } 
```

并且在视野中

```
 <img src="@Url.Action("FilePrint","ClinicInvoiceReceipt")" /> 
```

但它不起作用。我怎样才能做到这一点？如果有人知道请分享..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:42:55.877

您缺少 DeviceInfo 设置。创建一个DeviceInfo设置如下

```
 string deviceInfo =
        "<DeviceInfo>" +
        "  <OutputFormat>JPEG</OutputFormat>" +
        "  <PageWidth>8.5in</PageWidth>" +
        "  <PageHeight>11in</PageHeight>" +
        "  <MarginTop>0.4in</MarginTop>" +
        "  <MarginLeft>0.6in</MarginLeft>" +
        "  <MarginRight>0.6in</MarginRight>" +
        "  <MarginBottom>0.4in</MarginBottom>" +
        "</DeviceInfo>"; 
```

和改变

```
renderedBytes = localReport.Render(
        reportType,
        null,
        out mimeType,
        out encoding,
        out fileNameExtension,
        out streams,
        out warnings);

return File(renderedBytes, "Image"); 
```

到

```
renderedBytes = localReport.Render(
        reportType,
        deviceInfo ,
        out mimeType,
        out encoding,
        out fileNameExtension,
        out streams,
        out warnings);

return File(renderedBytes, "image/jpeg"); 
```

查看其他图像类型的[图像设备信息设置](http://msdn.microsoft.com/en-us/library/ms155373%28v=sql.100%29.aspx)。

# html - dojo1.8和表单动作：请求根目录外的帖子

> ID：14557048
> 
> 赞同：0
> 
> 时间：2013-01-28T07:04:49.520
> 
> 标签：html, dojo

嗨，我正在使用 Dojo 请求。

我从访问根目录中的 php 文件没有问题

```
request.post('process.php', ....}); 
```

但是如果 process.php 文件位于根目录之外的脚本文件夹中怎么办，

```
request.post ('../scripts/'process.php',....}); It did not work. 
```

并在html中形成标签

```
<form action='process.php' method='post'> it worked 
```

但它没有工作

```
<form action='../scripts/process.php' method='post'> 
```

那么什么是正确的呢？

请提前告知谢谢。克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:33:01.080

通常禁止访问网站根目录之外的文件夹。这有非常好的和合理的安全原因。因此，您的网址指向的目录下的任何内容都是越界的。

所以，`http://www.mydomain.com/../scripts/process.php`是肯定的。您希望在浏览器中发布/与之交互的所有代码都必须位于您的域可访问的区域中。您可能需要移动有问题的代码，使其位于域根目录的子目录中。

您还可以尝试使用符号链接或更改 .htaccess（如果使用 Apache）或更改服务器配置来进行一些巧妙的操作。但是，最佳做法是将代码移动到另一个目录。

# objective-c - UIPanGestureRecognizer 意外崩溃

> ID：14557049
> 
> 赞同：0
> 
> 时间：2013-01-28T07:04:50.907
> 
> 标签：objective-c, uipangesturerecognizer

我不确定发生了什么，希望我能提供足够的相关代码来找到答案。我在 appDelegate.m 中设置了手势识别器：

```
CCScene *scene = [HomeLayer scene];
HomeLayer *layer = (HomeLayer *) [scene.children objectAtIndex:0];

UIPanGestureRecognizer *gestureRecognizer = [[[UIPanGestureRecognizer alloc] initWithTarget:layer action:@selector(handlePanFrom:)] autorelease];
[director_.view addGestureRecognizer:gestureRecognizer];
m._gestureRecognizer = gestureRecognizer; 
```

我插入了一些调试消息，试图确定应用程序崩溃的时间点：

```
- (void)handlePanFrom:(UIPanGestureRecognizer *)recognizer {
    NSLog(@"Handle Pan From"); 
```

以及 ccTouchBegan/Moved/Ended 的一些打印输出。

每次应用程序崩溃时，事情都在“移动”，（end 永远不会被调用），并且 handlePanFrom 也永远不会被调用。

背景信息：我的应用程序具有用于在场景之间切换的按钮，例如：

```
- (void) doSomethingThree: (CCMenuItem  *) menuItem
{
    NSLog(@"The third menu was called");
    [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[HomeLayer scene] ]];
} 
```

如果我启动我的应用程序并直接进入 HomeLayer 场景并尝试拖动，应用程序会立即崩溃 100% 的时间（ccMoved 在崩溃前被调用 1-2 次）。单击不会导致应用程序崩溃，只会导致调用 handlePanFrom 的任何内容。

奇怪的是，如果我在任何其他场景上拖动，应用程序不会崩溃，并且成功调用了 handlePanFrom。然后，当我回到 HomeLayer 场景并拖动时，它不会崩溃一段时间，这似乎与我在不同场景上拖动的时间直接相关。

有没有人见过这些症状？我不确定我提供的信息是否相关或正确，我仍在尝试了解有关 iphone dev 的方法。我也会为任何调试技巧感到高兴（那些看起来像十六进制线的程序集对我来说并不是特别有启发性......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:48:30.883

我在 NSZombies 的帮助下找出了问题，发现程序在尝试引用已释放的方法 handlePanFrom 时崩溃了。

问题的最终根源是 HomeLayer 被实例化了两次，第一次在 appDelegate.m 中，第二次在我执行 replaceScene 时。

这导致第一层最终丢失其所有引用并被解除分配，而gestureRecognizer 仍在尝试引用[layer handlePanFrom]，从而导致崩溃。

通过将gestureRecognizer从appDelegate.m移动到HomeLayer.m解决了这个问题，对于需要跨多个层的手势的任何人，这里有一段代码将删除对视图的所有现有引用，然后添加一个以层中的方法为目标的新方法：

```
+(CCScene *) scene
{
    HomeLayer *layer = [HomeLayer node];

    [scene addChild: layer];

    for (UIGestureRecognizer *gr in [[CCDirector sharedDirector].view gestureRecognizers]) {
        // note that sharedDirector is a singleton and therefore is the same CCDirector
        // as the one used in appDelegate.m
        [[CCDirector sharedDirector].view removeGestureRecognizer:gr];
    }

    UIPanGestureRecognizer *gestureRecognizer = [[[UIPanGestureRecognizer alloc] initWithTarget:layer action:@selector(handlePanFrom:)] autorelease];

    [[CCDirector sharedDirector].view addGestureRecognizer:gestureRecognizer];

    return scene;
} 
```

希望这可以帮助将来尝试在视图中处理多个场景/图层的人=）

# wpf - 在模态模式下显示来自其他进程的 WPF 窗口

> ID：14557050
> 
> 赞同：4
> 
> 时间：2013-01-28T07:04:56.143
> 
> 标签：wpf

我有两个 WPF 应用程序和一个进程管理器，它们将数据从第一个 WPF 应用程序传递到第二个 WPF 应用程序，反之亦然。在一个用例中，我必须以模态模式在第二个应用程序的窗口（主窗口）上显示第一个应用程序的窗口（主窗口）。因此，第二个 WPF 应用程序的窗口将被禁用，并在第一个 WPF 应用程序的窗口顶部显示。所需的行为与在单个 WPF 应用程序中以模式模式显示窗口相同。知道如何从另一个 WPF 应用程序访问一个 WPF 应用程序的窗口吗？

在 Winform 应用程序的情况下，我们通过将 Window Handle(intPtr) 传递给另一个应用程序并在模式模式下显示窗口时使用如下句柄来完成它：

```
System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window) 
```

在 WPF 应用程序的情况下，如何实现类似的事情？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-27T02:54:16.847

=========================== 开始更新 ===================== =================

### 代码：

```
using System.Windows; // Window, WindowStartupLocation
using System.Windows.Interop; // WindowInteropHelper
using System.Runtime.InteropServices; // DllImport
...

// Instantiate the owned WPF window
CenteredWindow cw = new CenteredWindow();
// Get the handle to the non-WPF owner window
IntPtr hWnd = ...

CenteredWindow cw = new CenteredWindow();

EnableWindow(hWnd, false); // disable parent window
try
{
    // Set the owned WPF window’s owner with the non-WPF owner window
    WindowInteropHelper helper = new WindowInteropHelper(cw);
    helper.Owner = hWnd;
    cw.ShowDialog();
}
finally
{
    EnableWindow(hWnd, true); // enable parent window
}

...
[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
private static extern bool EnableWindow(IntPtr hwnd, bool enable); 
```

[在@kamal-nayan 评论中的MS Connect Link](https://connect.microsoft.com/VisualStudio/feedback/details/725866/when-i-host-a-wpf-control-from-one-process-to-another-process-i-cant-show-modal-dialog)的帮助下，我修改了上面的代码，它对我来说效果很好。

关键是**禁用**父窗口，当你的模态对话框关闭时，**启用**父窗口。

============================ 结束更新===================== =================

```
using System.Windows; // Window, WindowStartupLocation
using System.Windows.Interop; // WindowInteropHelper
...
// Instantiate the owned WPF window
CenteredWindow cw = new CenteredWindow();

// Get the handle to the non-WPF owner window
IntPtr ownerWindowHandle = ...; // Get hWnd for non-WPF window

// Set the owned WPF window’s owner with the non-WPF owner window
WindowInteropHelper helper = new WindowInteropHelper(cw);
helper.Owner = ownerWindowHandle;
cw.ShowDialog(); 
```

这是我找到的唯一解决方案。这不是真正的模态，即您仍然可以激活父窗口，但好在子窗口仍然在父窗口之上。

[http://blogs.msdn.com/b/wpfsdk/archive/2007/04/03/centering-wpf-windows-with-wpf-and-non-wpf-owner-windows.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/04/03/centering-wpf-windows-with-wpf-and-non-wpf-owner-windows.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T11:07:58.013

```
_parameters = new HwndSourceParameters("myWindow");

_parameters.WindowStyle = WindowStyles.WS_SYSMENU | WindowStyles.WS_VISIBLE | WindowStyles.WS_CAPTION | WindowStyles.WS_CHILD | WindowStyles.WS_POPUP;
_parameters.SetPosition(50, 50);

_parameters.ParentWindow = ParentWindowHandle;           
_hwndSource = new HwndSource(_parameters);

_hwndSource.SizeToContent = SizeToContent.WidthAndHeight;
_hwndSource.RootVisual = modalWindowContent; 
```

这就是我能够将一个进程的窗口作为模态显示到另一个进程的窗口的方式。

# haskell - 如何否定一个函数？

> ID：14557053
> 
> 赞同：22
> 
> 时间：2013-01-28T07:05:12.623
> 
> 标签：haskell

这可能是一个非常愚蠢的问题，但是..

我写了两个快速函数来检查三个数字是降序还是升序。

IE 2 3 5 升序为真，降序为假。

1 5 3 对两者都是错误的

我需要创建第三个函数，只调用前两个函数即可。我正在使用 GHCi。第三个函数查看数字是否与上面的第二个示例不一样

所以它会像

```
let newfunction = (not)Ascending && (not)Descending 
```

我该怎么做呢？/= 对我不起作用

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-28T07:31:34.630

实际上有一个`not`布尔函数，但与往常一样，您必须正确选择类型。假设您现有的功能具有以下类型：

```
ascending :: (Ord a) => [a] -> Bool
ascending (x1:x2:xs) = x1 <= x2 && ascending (x2:xs)
ascending _ = True

descending :: (Ord a) => [a] -> Bool
descending (x1:x2:xs) = x1 >= x2 && descending (x2:xs)
descending _ = True 
```

要求两者意味着列表必须相等，因为这是它们在我上面定义的意义上既升序又降序的唯一方法：

```
both xs = ascending xs && descending xs 
```

要反转布尔值，有以下`not`功能：

```
not :: Bool -> Bool 
```

然后用这个函数表示两者都不是：

```
neither xs = not (ascending xs || descending xs) 
```

当然，这与以下内容相同：

```
neither xs = not (ascending xs) && not (descending xs) 
```

您可以将 applicative style 与 reader functor 一起使用，以使其看起来更令人愉悦：

```
import Control.Applicative

both    = liftA2 (&&) ascending descending
neither = not . liftA2 (||) ascending descending 
```

或者：

```
neither = liftA2 (&&) (not . ascending) (not . descending) 
```

**更多**：这产生了谓词的概念：

```
type Predicate a = a -> Bool 
```

谓词是一个布尔函数。上面定义的两个函数是`ascending`谓词。`descending`除了反转布尔值，您可以反转谓词：

```
notP :: Predicate a -> Predicate a
notP = (not .) 
```

我们可以将它们放在谓词上，而不是布尔值上的合取和析取，这样可以更好地编写复合谓词：

```
(^&^) :: Predicate a -> Predicate a -> Predicate a
(^&^) = liftA2 (&&)

(^|^) :: Predicate a -> Predicate a -> Predicate a
(^|^) = liftA2 (||) 
```

这让我们写得非常`both`好`neither`：

```
both = ascending ^&^ descending

neither = notP ascending ^&^ notP descending 
```

以下定律适用于谓词，

```
notP a ^&^ notP b = notP (a ^|^ b) 
```

所以我们可以`neither`更好地重写：

```
neither = notP (ascending ^|^ descending) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:33:21.107

ertes 的答案可以通过引入布尔代数的类型类来进一步推广：

```
import Control.Applicative (liftA2)

-- | A class for Boolean algebras.
class Boolean a where
    top, bot :: a
    notP :: a -> a
    (^&^), (^|^) :: a -> a -> a

    -- Default implementations for all methods
    top = notP bot
    bot = notP top
    a ^&^ b = notP (notP a ^|^ notP b)
    a ^|^ b = notP (notP a ^&^ notP b)

instance Boolean Bool where
    top   = True
    bot   = False
    notP  = not
    (^&^) = (&&)
    (^|^) = (||)

instance Boolean r => Boolean (a -> r) where
    top = const top
    bot = const bot
    notP = (notP .)
    (^&^) = liftA2 (^&^)
    (^|^) = liftA2 (^|^)

{- 
-- We can actually generalize this to any Applicative, but this requires
-- special compiler options: 
instance (Applicative f, Boolean a) => Boolean (f a) where
    top = pure top
    bot = pure bot
    notP = fmap notP
    (^&^) = liftA2 (^&^)
    (^|^) = liftA2 (^|^)
-} 
```

这与标准`Monoid`类类似`Boolean`——a 实际上是两个由德摩根定律相关的幺半群（`top`with`^&^`和`bot`with ）（ and`^|^`的默认定义）。但是现在操作符不仅在单参数谓词上工作，而且在任意数量上工作；例如，现在我们有.`^&^``^|^``(<=) == ((<) ^|^ (==))`

此外，还有其他有用的“基础”实例`Boolean`；例如，机器字类型可以按位操作被制成`Boolean`实例。

# php - 如何解决它。文本区域中的文本编辑器然后它会使页面加载缓慢？

> ID：14557055
> 
> 赞同：0
> 
> 时间：2013-01-28T07:05:19.783
> 
> 标签：php, javascript, ckeditor, wysiwyg, text-editor

我使用ckeditor插件。

我为数据创建了一个页面。每个页面都有一个 textarea 字段，每页有 11 个字段。并且 textarea 需要修复使用 ckeditor 插件的页面。

我该如何解决这些问题。或者有没有其他的介绍方式。

PS。这是问题。我有所有 7 页和 textarea 字段，每页有 11 个字段。总共 77 次加载 ckeditor。解决问题，我使用ajax辅助加载。对于每个页面，加载 ckeditor 仅 11 次，但速度很慢。我本来想问。有可能的解决方案。或者我会推荐它的另一种方式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:13:57.723

只需将 ckeditor 放在一个页面中，并将其包含在任何页面中。

```
include('editor.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:27:30.670

拥有 77 个输入框（textarea 或 ckeditbox）会使您网站的用户感到困惑。

将相关集分组并将它们放在选项卡中不是更好吗？[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

不知道什么是慢的，是不是脚本的加载，因为我在文档中找不到关于在每个 ckedit 框上加载脚本的任何内容：[http ://docs.ckeditor.com/#!/guide/dev_framed](http://docs.ckeditor.com/#!/guide/dev_framed)

如果加载速度很慢，因为所有 77 个框都通过 ajax 调用获取其内容，那么请考虑使用选项卡或将它们分成几个页面。

# module - usemin revved 文件名和 requirejs 依赖项

> ID：14557056
> 
> 赞同：6
> 
> 时间：2013-01-28T07:05:24.497
> 
> 标签：module, dependencies, requirejs, assets, gruntjs

我遇到了 requirejs 和 usemin 的以下问题：

我想设置一个多页应用程序，在其中动态加载仅包含特定于页面功能的模块（例如 about -> about.js、home -> home.js）。我可以继续将所有内容打包到一个文件中，但这只会导致更大的文件大小和每个站点都不需要的功能开销！（例如，为什么我需要在没有轮播的页面上加载轮播插件！）

我查看了示例[https://github.com/requirejs/example-multipage-shim](https://github.com/requirejs/example-multipage-shim)

这实际上是处理它的好方法，直到我将 usemin 带入游戏。修改文件名后，每个脚本标签的 src 路径都会更新，但是依赖关系呢？

```
<script src="scripts/vendor/1cdhj2.require.js"></script>
<script type="text/javascript">
   require(['scripts/common'], function (common) {
      require(['app'], function(App) {
          App.initialize();
      });
   });
</script> 
```

在这种情况下，require.js 被 revved 文件 1cdhj2.require.js 替换。伟大的！

但是所需的模块“common”和“app”不再起作用，因为 common 变成了 4jsh3b.common.js 而 app 变成了 23jda3.app.js！

我能做些什么呢？谢谢你的帮助！（也使用 Yeoman，顺便说一句）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-14T20:43:14.447

这是一个棘手的问题，我确信其他人以更优雅的方式解决了问题，但以下内容对我有用。

一旦它更强大一点，我可能会将它作为 grunt 插件发布。

*取自我的 Gruntfile：*

```
"regex-replace": {
  rjsmodules: { // we'll build on this configuration later, inside the 'userevd-rjsmodules' task
    src: ['build/**/*.js'],
    actions: []
  }
},

grunt.registerTask('userevd-rjsmodules', 'Make sure RequireJS modules are loaded by their revved module name', function() {
// scheduled search n replace actions
var actions = grunt.config("regex-replace").rjsmodules.actions;

// action object
var o = {
  search: '',
  replace: '', //<%= grunt.filerev.summary["build/js/app/detailsController.js"] %>
  flags: 'g'
};

// read the requirejs config and look for optimized modules
var modules = grunt.config("requirejs.compile.options.modules");
var baseDir = grunt.config("requirejs.compile.options.dir");

var i, mod;
for (i in modules) {
  mod = modules[i].name;
  revvedMod = grunt.filerev.summary[baseDir + "/" + mod + ".js"];
  revvedMod = revvedMod.replace('.js', '').replace(baseDir+'/','');

  o.name = mod;
  o.search = "'"+mod+"'";
  // use the moduleid, and the grunt.filerev.summary object to find the revved file on disk
  o.replace = "'"+revvedMod+"'";
  // update the require(["xxx/yyy"]) declarations by scheduling a search/replace action
  actions.push(o);
}

grunt.config.set('regex-replace.rjsmodules.actions', actions);
grunt.log.writeln('%j', grunt.config("regex-replace.rjsmodules"));

grunt.task.run("regex-replace:rjsmodules");
}), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T07:48:13.410

您还可以使用 requirejs 的 map 配置来指定原始模块和 revved 模块之间的映射。Filerev 输出一个摘要对象，其中包含所有已版本控制的模块及其原始名称的映射。使用 grunt 文件写入功能以 AMD 方式写入文件，内容为摘要对象：

```
// Default task(s).
grunt.registerTask('default', ['uglify', 'filerev', 'writeSummary']);

grunt.registerTask('writeSummary', 'Writes the summary output of filerev task to a file', function() {
    grunt.file.write('filerevSummary.js', 'define([], function(){ return ' + JSON.stringify(grunt.filerev.summary) + '; })');
}) 
```

并在您的要求配置中使用此文件，以便使用新的 revved 模块而不是旧模块：

```
require(['../filerevSummary'], function(fileRev) {

var filerevMap = {};
for (var key in fileRev) {
    var moduleID = key.split('/').pop().replace('.js', '');
    var revvedModule = '../' + fileRev[key].replace('.js', '');

    filerevMap[moduleID] = revvedModule;
}

require.config({
    map: {
        '*': filerevMap
    }
}); 
```

我在上面创建的 filerevMap 对象特定于我的文件夹结构。您可以根据自己的情况对其进行调整。它只是遍历 filerev 摘要并确保根据您的模块名称和值根据您的文件夹结构修改键。

# c# - 如何从控制台运行 Windows 窗体？

> ID：14557058
> 
> 赞同：0
> 
> 时间：2013-01-28T07:05:25.620
> 
> 标签：c#, winforms

我是 Windows 表单应用程序的新手。我创建了一个 Windows 窗体。我的解决方案的入口点如下

```
 static void Main(string[] args)
    {

        Boolean bConsole = false;
        for (int nArg = 0; nArg < args.Length; nArg++)
        {
            if (args[nArg].Equals("-Console", StringComparison.OrdinalIgnoreCase))
            {
                bConsole = true;
            }
        }

        if (bConsole)
        {
            Form_Main form = new Form_Main();
            form.Form_Main_Console();
        }
        else
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form_Main());
        }
    } 
```

该应用程序适用于 Windows 窗体。如何从控制台运行它？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:15:01.280

将您的应用程序编译为二进制文件（比如说 MyApp.exe）。

现在在 cmd.exe 中浏览到同一目录（cd /path/to/exe）并键入“MyApp.exe cmd1 cmd2”。

cmd1 和 cmd2 在 Main 函数的“string[] args”参数中显示为字符串。随心所欲地处理它们。

例如：

```
cd %ProgramFiles%/Path/To/App

MyApp -Console whatever 
```

# javascript - 找出放置在svg路径中的文本元素

> ID：14557066
> 
> 赞同：0
> 
> 时间：2013-01-28T07:06:04.123
> 
> 标签：javascript, svg

我的应用程序中有某种交互式地图。我为每个 svg 路径附加了 mouseover 和 mouseout 处理程序。现在我需要在每个 svg 路径上放置文本以标识该部分。

所有效果都可以正常工作，但是当用户将放置在路径上的文本悬停时，鼠标悬停处理程序不会触发。

为了解决这个问题，我需要找出 svg 路径的覆盖文本，所以我可以附加与路径本身相同的处理程序。

这是我对这个问题的解决方案，也欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:42:55.480

如果我理解正确，您不希望文本干扰 mouseover 和 mouseout 处理程序。尝试添加`style="pointer-events:none;"`到文本对象。像这样：

```
<text style="pointer-events:none;">Some Text</text> 
```

# cuda - gpu上的大矩阵乘法

> ID：14557067
> 
> 赞同：8
> 
> 时间：2013-01-28T07:06:05.830
> 
> 标签：cuda, gpu, gpgpu, matrix-multiplication

我需要在 GPU 上使用 CUDA 为大型矩阵实现矩阵乘法。仅每个矩阵的大小就大于 GPU 内存。所以我认为我需要一种算法来有效地做到这一点。我在互联网上四处寻找，但找不到任何东西。谁能给我这种算法的名称或链接。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T08:32:01.357

实际上并没有正式的算法。一般来说，这些类型的线性代数运算，其中整个问题没有同时存储在内存中，被称为“核外”运算。

要解决它，您不需要特别复杂的算法，只需要 CUBLAS 库和铅笔和纸。例如，您可以像这样分解矩阵乘积：

![在此处输入图像描述](../Images/c67136e027594061c0bbc489a457e347.png)

它为您提供了四个独立的子矩阵乘法运算。这些可以通过使用非常简单的主机代码对 CUBLAS gemm 的四个调用来计算。您可以将想法扩展到匹配问题规模和 GPU 容量所需的尽可能多的子矩阵。同样的原理也可以用于在多个 GPU 上实现矩阵乘法问题（参见[这个问题](https://stackoverflow.com/q/11501537/681865)的例子）。

[或者，您可以在哈佛开发的 SciGPU-GEMM](http://code.google.com/p/scigpugemm/)代码库和[HPL-CUDA](https://github.com/avidday/hpl-cuda) linpack 实现中找到这个精确想法的工作实现（免责声明：我隶属于后一个代码库）。

# android - 在 Parse 中，我可以强制获取相关的 ParseObjects 吗？

> ID：14557072
> 
> 赞同：5
> 
> 时间：2013-01-28T07:06:24.613
> 
> 标签：android, caching, fetch, parse-platform

在[Parse android 文档](https://www.parse.com/docs/android_guide#objects-pointers)中，它说默认情况下`ParsePbject`不获取相关的 s，这意味着有一个设置可以获取它们。后来它说如果不调用 fetchIfNeeded 就无法获取它们。它是哪一个？我绝对需要获取相关信息`ParseObject`，并且更愿意这样做而不必提出多个请求。那可能吗？

`By default, when fetching an object, related ParseObjects are not fetched. These objects' values cannot be retrieved until they have been fetched like so:`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T09:27:09.197

在用于获取原始对象的 ParseQuery 中，您可以使用 include(key) 方法告诉它也获取相关对象。这适用于指针和指针数组。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-28T07:19:37.893

不，他们不能。我也面临着类似的问题。所以如果你有两张表，一张表有第二张表的引用键，那么我们就没有这样的查询可以找到相关数据。

这是可悲的。我想知道为什么他们不提供这么有用的东西。

# asp.net-mvc - 在mvc中拖放文件

> ID：14557077
> 
> 赞同：4
> 
> 时间：2013-01-28T07:07:10.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html, file, drag-and-drop

我想使用拖放上传文件。我编写了如下代码，但每次尝试上传文件时，都会显示上传失败。谁能告诉我我错在哪里？我想从外部源中拖动项目并将其上传到我的文件夹中，但我无法做到。

对于控制器：-

```
public ActionResult File()
{
   return View();
}

/// <summary>
/// The max file size in bytes
/// </summary>
protected int maxRequestLength
{
   get
   {
      HttpRuntimeSection section =
         ConfigurationManager.GetSection("system.web/httpRuntime") as HttpRuntimeSection;

      if (section != null)
         return section.MaxRequestLength * 1024; // Default Value
      else
         return 4096 * 1024; // Default Value
   }
}

/// <summary>
/// Checks if a file is sent to the server
/// and saves it to the Uploads folder.
/// </summary>
[HttpPost]
private void handleFileUpload()
{
   if (!string.IsNullOrEmpty(Request.Headers["X-File-Name"]))
   {
      string path = Server.MapPath(string.Format("~/Uploads/{0}", Request.Headers["X-File-Name"]));
      Stream inputStream = Request.InputStream;

      FileStream fileStream = new FileStream(path, FileMode.OpenOrCreate);

      inputStream.CopyTo(fileStream);
      fileStream.Close();
   }
} 
```

为了查看它是：-

```
<!DOCTYPE html>

<html>
<head runat="server">
    <title>Drag n' Drop File Upload</title>
    <link href="/Style.css" rel="Stylesheet" />
    <style>
body
{
    font: 12px Arial;
}

#dropZone
{
    border-radius: 5px;
    border: 2px solid #ccc;
    background-color: #eee;
    width: 250px;
    padding: 50px 0;
    text-align: center;
    font-size: 18px;
    color: #555;
    margin: 50px auto;
}

#dropZone.hover
{
    border-color: #aaa;
    background-color: #ddd;
}

#dropZone.error
{
    border-color: #f00;
    background-color: #faa;
} 
    </style>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.min.js"></script>

    <script type="text/javascript">
        var dropZone;

        // Initializes the dropZone
        $(document).ready(function () {
            dropZone = $('#dropZone');
            dropZone.removeClass('error');

            // Check if window.FileReader exists to make 
            // sure the browser supports file uploads
            if (typeof(window.FileReader) == 'undefined') {
                dropZone.text('Browser Not Supported!');
                dropZone.addClass('error');
                return;
            }

            // Add a nice drag effect
            dropZone[0].ondragover = function () {
                dropZone.addClass('hover');
                return false;
            };

            // Remove the drag effect when stopping our drag
            dropZone[0].ondragend = function () {
                dropZone.removeClass('hover');
                return false;
            };

            // The drop event handles the file sending
            dropZone[0].ondrop = function(event) {
                // Stop the browser from opening the file in the window
                event.preventDefault();
                dropZone.removeClass('hover');

                // Get the file and the file reader
                var file = event.dataTransfer.files[0];

               @* if(file.size > @maxRequestLength {
                            dropZone.text('File Too Large!');
                        dropZone.addClass('error');
                        return false;*@
            //    // Validate file size
            //    if(file.size > <%=maxRequestLength%>) {
            //        dropZone.text('File Too Large!');
            //    dropZone.addClass('error');
            //    return false;
            //}

            // Send the file
            var xhr = new XMLHttpRequest();
        //    xhr.upload.addEventListener('progress', uploadProgress, false);
            xhr.onreadystatechange = stateChange;
            xhr.open('POST', 'Home/handleFileUpload', true);
            xhr.setRequestHeader('X-FILE-NAME', file.name);
            xhr.send(file);
        };
        });

        // Show the upload progress
        function uploadProgress(event) {
            var percent = parseInt(event.loaded / event.total * 100);
            $('#dropZone').text('Uploading: ' + percent + '%');
        }

        // Show upload complete or upload failed depending on result
        function stateChange(event) {
            if (event.target.readyState == 4) {
                if (event.target.status == 200) {
                    $('#dropZone').text('Upload Complete!');
                }
                else {
                    dropZone.text('Upload Failed!');
                    dropZone.addClass('error');
                }
            }
        }
        //window.onload = fun;
        //function fun() {
        //    $.post("Home/handleFileUpload", {}, function (response) {
        //        alert("hi");
        //    })

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="dropZone">
        Drop File Here to Upload.
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:18:51.467

你的`HandleFileUpload`行动是**私人**的！在 ASP.NET MVC 控制器操作需要是公共的。另外，我建议您将`IDisposable`资源包装在`using`语句中以避免泄漏句柄：

```
[HttpPost]
public ActionResult HandleFileUpload()
{
    if (!string.IsNullOrEmpty(Request.Headers["X-File-Name"]))
    {
        string path = Server.MapPath(string.Format("~/Uploads/{0}", Request.Headers["X-File-Name"]));
        using (var fileStream = new FileStream(path, FileMode.OpenOrCreate))
        {
            Request.InputStream.CopyTo(fileStream);
        }
        return Json(new { success = true });
    }

    return Json(new { success = false });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T14:02:11.760

首先，我尝试了 Darin Dimitrov 建议的解决方案，但它没有用，但后来我调试它，意识到它有服务器错误 500，然后我检查代码意识到我没有上传文件夹......所以导致问题。

所以只需创建文件夹就可以了

# ios - 如何使用 iOS 应用程序的 UIWebview 持续监控响应标头

> ID：14557078
> 
> 赞同：1
> 
> 时间：2013-01-28T07:07:10.493
> 
> 标签：ios, http-headers, rubymotion

我的 iOS 应用程序中有一个 UIWebview 需要监视它所访问的每个页面的响应标头，我试图在

```
webViewDidFinishLoad 
```

和

```
shouldStartLoadWithRequest 
```

但还没有走远，进一步的研究使我

```
didReceiveResponse 
```

对于 NSURLConnection，但我的理解是，这只能得到第一个响应，而不能得到第二个，或者进一步的响应。

如果有帮助，我正在使用 Rubymotion 来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:47:10.383

这是不可能的，我害怕。您可以使用 JavaScript 获取当前 Web URL：

[https://stackoverflow.com/a/2494051/204044](https://stackoverflow.com/a/2494051/204044)

（或者其他任何 JS 可以访问的东西）......但你无法获得标题。这是一个安全的事情。

如果您可以控制 Web 服务器，则可以在 javascript 对象中传递所需的信息，如下所示：

```
// In your webserver's code, assuming it's PHP:
<script type="text/javascript">
  window.customDataString = "<?= $custom_data ?>";
</script>

// In Objective-C
NSString *customDataString = [webView stringByEvaluatingJavaScriptFromString:@"window.customDataString"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:10:04.653

我使用 AFNetworking 做了类似的事情。

我使用[webView:shouldStartLoadWithRequest:navigationType:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)来捕获用户点击的所有链接。我在 shouldStartLoadWithRequest 返回 NO，因此 UIWebview 将保持空闲状态。然后，我得到 NSURLRequest 并得到我需要的一切，包括 AFNetworking 的 HTML 源代码。

[最后，我通过loadHTMLString:baseURL:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/loadHTMLString%3abaseURL%3a)将 HTML 字符串放回 UIWebView 。

用户只是像往常一样浏览网页。他们不知道我绕过 UIWebview 而只是使用 UIWebview 来显示 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T08:27:13.350

在委托中，注册您的自定义 NSURLProtocol 子类，然后您可以通过以下方式监控响应：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

# c# - 无法将数组元素更新到 asp.net 中的数据库中

> ID：14557084
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:07:38.150
> 
> 标签：c#, database

我正在通过数组更新数据库中的值，但它仅将数组中的最后一个值更新到所有行。我究竟做错了什么？

在 .cs 文件中

```
BL_HotelDetails hd1 = new BL_HotelDetails();
string[] strResult = strObj.Split(',');
hd1.updateintoRoomNames(hid, strResult); 
```

在业务逻辑层

```
public void updateintoRoomNames(int hid, string[] strResult)
{
    DA_HotelDetails hd2 = new DA_HotelDetails();
    hd2.updateintoRommNamesDA(hid,strResult);
} 
```

在数据访问层

```
public void updateintoRommNamesDA(int hid, string[] strResult)
{
    foreach (string s in strResult) 
    {
        Connection concls = new Connection();
        SqlCommand cmd = new SqlCommand();
        string instr = "update tblRoomNames set roomnames='" + s + "' where hid=" + hid + "";

        concls.opencon();
        cmd.CommandText = instr;
        concls.executenonquery(cmd);
        concls.closecon();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:45:34.950

您的代码似乎没问题。这里是如何工作的

说 strResult 有三个值 'Value1','Value2',Value3' 和 hid=5

第一次迭代后，房间名称将是“Value1”，其中 hid =5

在第二次迭代之后 roomnames ='Value2' where hid =5 在第三次迭代之后 roomnames='Value3' where hid =5

结果你会看到 roomnames='Value3'

**如果要更改 strResult 数组中每个值的房间名称，则应使用另一个包含 hid 的整数数组，该数组将对应于 strResult**

**更新**

我建议，创建一个整数数组来存储隐藏值，就像您创建了一个字符串 strResult 数组一样。

```
 int[] intNameIDs = = new int[] { 3, 4, 5 };
    int hid=22;

    public void updateintoRoomNames(int hid,int[] intNameIDs, string[] strResult)
    {
        DA_HotelDetails hd2 = new DA_HotelDetails();
        hd2.updateintoRommNamesDA(hid,intNameIDs, strResult);
    }

    public void updateintoRommNamesDA(int hid,int[] intNameIDs, string[] strResult)
    {
        int nameidIndex = 0;//index for intHids array. 
        foreach (string s in strResult)
        {
            Connection concls = new Connection();
            SqlCommand cmd = new SqlCommand();
            string instr = "update tblRoomNames set roomnames='" + s + "' where nameid=" + intNameIDs[nameidIndex] + " and Hid=" + hid;

            concls.opencon();
            cmd.CommandText = instr;
            concls.executenonquery(cmd);
            concls.closecon();

            nameidIndex++;//move to next.
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:33:18.390

根据我们的讨论。你可以像这样更新。

```
 public void updateintoRommNamesDA(List<Entity_HotelDetails> updatedList)
    {

        foreach (Entity_HotelDetails s in updatedList)
        {
            Connection concls = new Connection();
            SqlCommand cmd = new SqlCommand();
            string instr = "update tblRoomNames set roomnames='" + s.ROOMNAMES + "' where nameid=" + s.NAMEID + " and Hid=" + s.HID;

            concls.opencon();
            cmd.CommandText = instr;
            concls.executenonquery(cmd);
            concls.closecon();

        }
    } 
```

# objective-c - 如何停止 ViewController

> ID：14557085
> 
> 赞同：0
> 
> 时间：2013-01-28T07:07:46.997
> 
> 标签：objective-c, ios5, uiviewcontroller

我有一个可以通过 URI 方案从 Web 启动的应用程序，我已经在我的应用程序中注册了该应用程序。根据 URI，我打开不同的视图控制器（通过在 AppDelegate 中设置 rootViewController）。每个视图控制器在初始化时从服务器异步获取一些初始化数据。

我的问题是：如果我的服务器响应缓慢并且我退出应用程序并再次进入应用程序（导致新的视图控制器打开），那么第一个视图控制器仍然存在于后台并接收服务器对请求的响应它发送了。这可能会导致第一个视图控制器显示警报，即使该视图控制器不再是焦点。

我*可以*通过在 viewDidDisappear: 方法中设置一个标志来解决这个问题。但是这种处理会弄乱代码，如果我能以某种方式从 AppDelegate 中停止视图控制器会更好。或者至少确保它只在前台显示警报视图。有没有办法做这些事情之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:30:41.100

我在另一个[SO question中找到了可能的解决方案](https://stackoverflow.com/questions/2777438/how-to-tell-if-uiviewcontrollers-view-is-visible#2777460)

```
 if (viewController.isViewLoaded && viewController.view.window) {
    // present alert view
 } 
```

这避免了标志，但它仍然需要分散在显示警报视图的位置。

# c++ - 如何将 DWORD 颜色变量提取到其参数中？（十进制类型）

> ID：14557087
> 
> 赞同：1
> 
> 时间：2013-01-28T07:07:49.910
> 
> 标签：c++, colors, hex, dword

我有这个例子：

```
unsigned int dwColor = 0xAABBCCFF; //Light blue color 
```

*   其参数从左到右依次为：**“alpha, red, green, blue”**；每个参数需要两个十六进制值。

*   每个参数的最大值为**255**；最低：**0**

而且，如何**提取**然后将 DWORD 颜色的所有参数转换为小数？

我喜欢值范围**"0.00 -> 1.00"**。例如 ：

```
float alpha = convert_to_decimal(0xAA); //It gives 0.666f
float red = convert_to_decimal(0xBB); //It gives 0.733f
float green = convert_to_decimal(0xCC); //It gives 0.800f
float blue = convert_to_decimal(0xFF); //It gives 1.000f 
```

编辑：我刚刚看到**union**，但回答者说它是 UB（未定义行为）。有谁知道更好的解决方案？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:12:28.800

我通常使用`union`：

```
union color
{
    unsigned int value;
    unsigned char component[4];
};

color c;
c.value = 0xAABBCCFF;
unsigned char r = c.component[0];
unsigned char g = c.component[1];
unsigned char b = c.component[2];
unsigned char a = c.component[3]; 
```

如果您需要将其视为浮点值：

```
float fr = c.component[0] / 255.0f;
float fg = c.component[1] / 255.0f;
float fb = c.component[2] / 255.0f;
float fa = c.component[3] / 255.0f; 
```

编辑：

正如下面的评论中提到的，这种使用`union`是未定义的行为（UB），请参阅[Luchian Grigore](https://stackoverflow.com/users/673730/luchian-grigore)的[这个问题](https://stackoverflow.com/questions/11373203/accessing-inactive-union-member-undefined)。

* * *

编辑2：

因此，另一种将 a`DWORD` 分解为组件避免的`union`方法是使用一些按位魔法：

```
#define GET_COMPONENT(color, index) (((0xFF << (index * 8)) & color) >> (index * 8)) 
```

但我不建议使用宏解决方案，我认为最好使用一个函数：

```
unsigned int get_component(unsigned int color, unsigned int index)
{
    const unsigned int shift = index * 8;
    const unsigned int mask = 0xFF << shift;
    return (color & mask) >> shift;
} 
```

这个怎么运作？假设我们调用`get_component(0xAABBCCFF, 0)`：

```
shift = 0 * 8
shift = 0

mask = 0xFF << 0
mask = 0x000000FF

0x000000FF &
0xAABBCCFF
----------
0x000000FF

0x000000FF >> 0 = 0xFF 
```

假设我们调用`get_component(0xAABBCCFF, 2)`：

```
shift = 2 * 8
shift = 16

mask = 0xFF << 16
mask = 0x00FF0000

0x00FF0000 &
0xAABBCCFF
----------
0x00BB0000

0x00BB0000 >> 16 = 0xBB 
```

*警告！并非所有颜色格式都与该模式匹配！*

但是恕我直言，更简洁的解决方案是将函数与枚举结合起来，因为我们正在使用有限的索引值包：

```
enum color_component
{
    A,B,G,R
};

unsigned int get_component(unsigned int color, color_component component)
{
    switch (component)
    {
        case R:
        case G:
        case B:
        case A:
        {
            const unsigned int shift = component * 8;
            const unsigned int mask = 0xFF << shift;
            return (color & mask) >> shift;            
        }

        default:
            throw std::invalid_argument("invalid color component");
    }

    return 0;
} 
```

最后一种方法确保仅在输入参数有效时才执行按位运算，这将是一个使用示例：

```
std::cout
    << "R: " << get_component(the_color, R) / 255.0f << '\n'
    << "G: " << get_component(the_color, G) / 255.0f << '\n'
    << "B: " << get_component(the_color, B) / 255.0f << '\n'
    << "A: " << get_component(the_color, A) / 255.0f << '\n'; 
```

这是一个[现场演示](http://ideone.com/xvu7np)。

# asp.net-mvc - 如何将mvc表数据导出到excel？

> ID：14557091
> 
> 赞同：1
> 
> 时间：2013-01-28T07:08:03.153
> 
> 标签：asp.net-mvc, c#-4.0, razor, export-to-excel

我的视图包含一些文本框和下拉列表、提交按钮和部分页面。当我点击提交按钮时，部分页面将加载表格格式的数据。

现在我想要一个功能，当我点击导出按钮时，部分页面中的数据（数据包含在表中）应该导出到 excel 文档。

我试图通过在部分页面中添加导出提交按钮来做到这一点，如下所示......

```
<input type="submit" value="Export" id="btnExport" /> 
```

在控制器中：

```
public ActionResult ExportToExcel()
{
Response.AddHeader("Content-Type", "application/vnd.ms-excel");
return View();
} 
```

但它正在导出所有页面详细信息。即，Excel 显示所有文本框、下拉列表、提交按钮和表格。

我只想要表格数据。我如何只获取表格数据。请有人帮我解决这个问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:11:12.090

您可以将表格放在部分中，然后在导出到 Excel 时仅呈现部分：

```
public ActionResult ExportToExcel()
{
    Response.AddHeader("Content-Type", "application/vnd.ms-excel");
    return PartialView("_Table");
} 
```

# c# - 我需要帮助理解与实体框架上下文的第一种方法相关的 C# 语法

> ID：14557094
> 
> 赞同：1
> 
> 时间：2013-01-28T07:08:08.153
> 
> 标签：c#, entity-framework

我是 Entity Framework 的新手，虽然我已经掌握了基础知识，但我遇到了一个我不理解的特定语法。该代码有效，但对我来说它有点像“黑匣子”，我因不理解它而感到有点受阻。

我在我的类中声明了一个局部私有变量，如下所示：

```
private clientexperienceEntities ceContext; 
```

在我的代码中，我将它实例化为：

```
ceContext = new clientexperienceEntities(); 
```

下一行是我遇到困难的部分：

```
var client = ceContext.clients.First(a => a.ID == _ID); 
```

特别是First方法的参数，究竟是什么`a => a.ID == _ID`意思？我知道它告诉上下文根据值中包含的主键值找到第一个匹配的记录`_ID`。但我不明白“a”来自哪里，或者我想使用的任何其他名称，“b”或“cat”。

这个语法是 Linq 的一部分吗？我什至不确定要搜索什么才能理解它。

正如我所说，该语句有效，并且我可以操作返回的实体，但我只是不完全理解该参数构造。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:11:37.207

您应该了解有关[lambda 表达式的更多信息](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

Lambda 表达式是 C# 3.0 语言引入的内联委托。这是一种表示匿名方法的简洁方式。

要创建 lambda 表达式，请在 lambda 运算符 => 的左侧指定输入参数（如果有），并将表达式或语句块放在另一侧。在这种情况下：**a => a.ID == _ID**指定名为 a 的 ClientExperience 参数类型，如果 a.ID 等于 _ID，则返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:16:44.757

我发现如果我为自己讲述这个表达方式会很有帮助。如果我要写或读那行，听起来像这样：

var client 是 ceContext 中的第一个客户端，它是等式的结果（a WHERE a.ID EQUALS _ID）；

是的，您可以为 Lambda 变量使用任何名称。这就像写一个数学表达式。您可以求解 x、a、y、xxx、cat 或其他任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T07:15:24.820

> a => a.ID == _ID 到底是什么意思？

它是一个 labmda 表达式并充当过滤器。

这是相同的 - 对于没有阅读文档的人来说更清楚：

clients.Where(x => x.ID == _ID).First ();

该表达式将对象 X（即查询中的每个对象）上的字段 ID (x.ID) 与 _ID 的值（必须是局部变量，命名会表明）进行比较。

它是一个过滤器。获取我的第一项，其中字段 ID 是变量 ID 的值。

这里需要阅读 Lambda 表达式 - 如果不理解它们，您将不会走得太远。

# assembly - movia、movi、ldw、addi、stw、ldw、ret 语句如何工作？

> ID：14557096
> 
> 赞同：1
> 
> 时间：2013-01-28T07:08:21.350
> 
> 标签：assembly, hardware, nios

我认为在具体示例中很容易解释，我理解 beq 的工作方式类似于 if r9==r10 该语句调用显示在同一行的标签，但我不完全理解其他人。

开始：.word 0 .word INSTR1：.word 1 .word 77 .word INSTR2 INSTR2：.word 2 .word 15 .word FIN：.word 3

```
acc:
    .word 0

.text

.global main

main:   movia r8, START
    movia r9, acc

myloop: movi r10, 1
    ldw r11, 0x0(r8)
    beq r11, r0, clear
    beq r11, r10, add
    addi r10, r10, 1
    beq r11, r10, sub
    addi r10, r10, 1
    beq r11, r10, exit
    br fail

clear:  stw r0, 0x0(r9)
    ldw r8, 0x4(r8)
    br myloop

add:    ldw r12, 0x0(r9)
    ldw r13, 0x4(r9)
    addi r12, r12, r13
    stw r12, 0x0(r9)
    ldw r8, 0x8(r8)
    br myloop

sub:    ldw r12, 0x0(r9)
    ldw r13, 0x4(r9)
    sub r12, r12, r13
    stw r12, 0x0(r9)
    ldw r8, 0x8(r8)
    br myloop

exit:   ret

fail:   movia r12, 0xFFFFFFFF
    stw r12, 0x0(r9)
    ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:33:40.953

Movia 是一个伪语句，它将 32 位立即地址加载到寄存器中。由于 NIOS 中的指令宽度固定为 32 位，因此它使用两条指令发生：

```
"load_high_16_bits_and_clear_the_lower_part, register, #imm16_hi"
"or_register_with_16_bit_immediate_at_the_lower_part, register, #imm16_lo" 
```

因为 NIOS 提供了 orhi 指令，所以同样可以这样执行：

```
"load_lower_bits_and_clear_the_rest register, #imm16"
"orhi register, #imm16_hi_bits" 
```

movi == 立即移动。同样，该指令只能接受#imm16。

ldw = 加载“字” == 32 位。通过将立即数添加到寄存器来计算地址。在这种情况下，指令集只允许 14 位的*位移*。

stw = 存储“字”== 32 位。

addi = 立即添加：寄存器 = 寄存器 + #imm_16

指令集参考在立即数之前使用希腊符号“sigma”作为执行“符号扩展”的函数的符号，这意味着将立即数中的最高有效位复制到整个 32 位寄存器（或临时值）中，也允许立即签署。（注意 sig_ned 与 sig_ma）。

**编辑**

NIOS 中的调用机制也需要注意：它使用“滑动窗口寄存器机制”，这意味着处理器有例如 64 或 256 个寄存器，其中只有 32 个寄存器同时可见。低 16 个寄存器 IIRC 是“全局的”，每次调用或返回时，16 个高位寄存器移位 4 或 8 个寄存器。

这意味着寄存器组会自动“分配”一些临时变量，这些临时变量会在窗口移动时成为下一个函数调用的输入参数。同样，IIRC，调用在调用时将返回地址复制到一个特定的寄存器（例如 r31），在被调用函数中被视为 r23（反之亦然）。'ret' 意味着跳转到 'r23' 并将寄存器窗口移回。同样，*可以*将*几个*寄存器返回给调用者。

# android - Android 人脸识别并从数据库中获取相似的人脸

> ID：14557099
> 
> 赞同：13
> 
> 时间：2013-01-28T07:08:28.520
> 
> 标签：android, image, opencv, face-recognition, google-image-search

在我的应用程序中，我将实现像 Google 图片搜索这样的图片搜索。唯一的区别是这里我只搜索人脸。这是怎么回事..

*   用户使用相机拍摄一个人的照片。
*   我的应用程序应识别该人的面部并从图像中获取有关面部的详细信息（例如：颜色）。
*   使用这些详细信息应用程序将在图像数据库中搜索相似的面孔。
*   最后它将向用户显示结果。

因此，我想使用 Android 人脸识别类识别人脸并选择识别区域并将该人脸的详细信息保存到数组或数据库中。

我对上述情况有几个问题。

*   我需要从该图像中进行哪些正确的图像搜索？
*   我可以只使用颜色吗？
*   您对从识别的面部获取像素细节有任何想法吗？我知道如何在位图图像上做到这一点。但我不确定该方法是否仍然适用于人脸识别类。

任何人都可以向我解释这些事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T07:14:03.523

使用[OpenCV 的识别](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html)API。

[我在另一个问题](https://stackoverflow.com/questions/14554067/setting-up-android-with-opencv/14557005#14557005)中写了一些关于如何设置它的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-12T09:02:29.687

我也推荐你使用 OpenCV 函数，它们针对人脸检测和识别进行了很好的优化。

为了识别，您不需要进行颜色处理。由于您在 Android 上开发应用程序，因此您可以使用[OpenCV4Android](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html)

这里有一些有用的链接，让您有一个好主意开始：

[Android上的人脸识别](https://stackoverflow.com/questions/11699744/face-recognition-on-android)

在这里你可以找到一个有用的人脸检测和识别教程

[http://www.shervinemami.info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)

I also recommend you to apply the detection api that already implemented in android stuff:

[http://pi-virtualworld.blogspot.com.br/2013/04/android-opencv-face-detection.html](http://pi-virtualworld.blogspot.com.br/2013/04/android-opencv-face-detection.html)

In order to prepare a clean and a proper face database, which in turn enhance the goodness of recognition results, don' forget to align faces [http://bytefish.de/blog/aligning_face_images/](http://bytefish.de/blog/aligning_face_images/)

Try and test already benchmark face database, to evaluate your implementation:

[http://vis-www.cs.umass.edu/lfw/#deepfunnel-anchor](http://vis-www.cs.umass.edu/lfw/#deepfunnel-anchor)

[http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html](http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html)

# python - pybrain activate() 输出表示

> ID：14557103
> 
> 赞同：4
> 
> 时间：2013-01-28T07:08:33.967
> 
> 标签：python, pybrain

我使用 pybrain 构建了这个示例：

```
from pybrain.tools.shortcuts import buildNetwork
from pybrain.datasets import SupervisedDataSet
from pybrain.supervised.trainers import BackpropTrainer

net = buildNetwork(3, 3, 1)

dataSet = SupervisedDataSet(3, 1)
dataSet.addSample((0, 0, 0), (0))
dataSet.addSample((1, 1, 1), (0))
dataSet.addSample((1, 0, 0), (1))
dataSet.addSample((0, 1, 0), (1))
dataSet.addSample((0, 0, 1), (1))

trainer = BackpropTrainer(net, dataSet)

trainer.trainUntilConvergence()

result = net.activate([0, 0, 0])
print result 
```

输出为：[0.10563189]

我不明白activate() 的输出是什么。网络经过训练，我使用其中一个训练样本对其输出进行测试，因此我期望值与训练样本中的值完全相同。输入 [0, 0, 0] 应该得到输出 0。我在这里缺少什么？如何获得有效结果？

更令人困惑的是，每次我运行这段代码时，都会得到不同的结果。我显然做错了什么。它是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T11:00:45.320

训练一个网络直到收敛并不意味着训练集被完美地记住了。原因有很多：隐藏层的大小、激活函数、学习率等。所有这些参数都需要调整。

# symfony - 如何覆盖 FosUser 注册表单布局的布局。

> ID：14557104
> 
> 赞同：0
> 
> 时间：2013-01-28T07:08:39.257
> 
> 标签：symfony, fosuserbundle

如何覆盖注册表单的布局

目前表格是

```
 -username 
  -email  
  -password  
  -verification 
```

我想要覆盖这个表单的布局，比如说，每行两个问题

```
 -username      -email
 additional text   
 -password      -verification 
```

我了解如何编写视图（树枝） register.html.twig 调用 register_content.html.twig 使用；

```
{{ form_widget(form) }} 
```

我如何覆盖 `{{ form_widget(form) }}`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:20:05.103

您必须覆盖 FosUserBundle 注册表单模板。

您可以通过以下方式完成覆盖：

*   在 app/resources 目录中定义一个同名的模板。一起“同名”你必须重现捆绑的相同结构。因此，如果您的模板位于，即 FosUserBundle/views/mainTemplate.html.twig 中，您必须通过在 app/resources/FosUserBundle/views 中创建一个新模板并将其命名为 mainTemplate.html.twig 来覆盖它

*   您必须从头开始创建一个新包并覆盖 getParent() 方法，该方法必须返回一个包含要覆盖的包名称的字符串（ FosUserBundle ）。现在，如果您在原始模板的相同位置创建一个新模板，您已经覆盖了它。不建议使用此方法，因为您还必须覆盖控制器。

# git - Git 在结帐时更改我的文件权限

> ID：14557106
> 
> 赞同：46
> 
> 时间：2013-01-28T07:08:45.277
> 
> 标签：git

我们的工作流程是在本地机器上开发，将更改提交到中央存储库，然后检查我们需要的该存储库的分支。

问题在于，Git 会更改它所签出的文件的所有权甚至文件权限，具体取决于进行签出的用户。这样做的直接结果是我们的 CSS 文件在结帐后变得不可读，因为 Git 将文件所有权更改为执行 Git 拉入 webroot 的人。

例子：

*   之前`git pull`：`style.css`拥有者`user_a:group_a`
*   之后`git pull`：`style.css`拥有者`user_b:user_b`

我想将所有权保留为`user_a:group_a`. 我不想每次我的团队中的一个人对文件进行更改并将所有权更改回原始配置时都必须登录。

其他人如何处理这个问题？您如何处理多个用户使用的存储库。我们的系统上有 suphp，无法将其关闭。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-28T07:12:20.470

Git 不会更改文件权限或所有权。只是它（大部分）也不存储它，它不存在于您的存储库中，因此它们会更改为您的用户拥有的任何内容。就像任何文件创建一样。

Git 支持两种权限集：可执行位开启和可执行位关闭。没有其他的。所有权信息根本不存储。

请参阅[此线程](https://stackoverflow.com/questions/11230171/git-is-changing-my-files-permissions-when-i-push-to-server)-“如果您需要特定权限，则需要手动执行。”

有一些解决方案建议：您可以使用单独的工具为您执行此操作，使用用户帐户和 umask 的适当组合以默认正确设置它们或自己编写一个 git hook 来执行此操作。必须在结帐的用户身上安装一个挂钩。

就像@ikke 在评论中所说，Git 并不是真正的部署工具，不应该这样使用。它是源代码的版本控制系统。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-15T12:45:13.767

对我来说，最好的解决方案是创建一个修复权限的 shell 脚本。例如：

```
.git/hooks/post-checkout:

#!/bin/sh
chmod +x  tools/* 
```

顺便说一句，结帐并不是 git 弄乱权限的唯一情况，当你拉取时也是如此。我用`.git/hooks/post-merge`钩子处理。

理想情况下，您可以创建一个 shell 脚本来修复您的存储库中某处的权限（例如`tools/fixpermissions.sh`），并在两个钩子中调用它。不要忘记手动更改该文件的权限；）

```
#!/bin/sh
chmod a+x tools/fixpermissions.sh
tools/fixpermissions.sh 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T07:53:15.927

最简单的解决方案是将 git 作为`user_a`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T19:00:42.503

我经常跑一个

```
git checkout -f file.xml 
```

...在具有世界写入权限的版本化**file.xml**上，因为我不断修改它并希望将其恢复到正常状态。

但这会重置权限。稍长的版本：

```
git show HEAD:./file.xml > ./file.xml 
```

只是重置内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-14T20:38:37.027

或者，您可以为相关文件夹设置默认权限，如下所示：[https ://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in -a-目录](https://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in-a-directory)

# chef-infra - 如何在 deploy_revision 提供程序中设置超时？

> ID：14557118
> 
> 赞同：5
> 
> 时间：2013-01-28T07:09:41.703
> 
> 标签：chef-infra

我发现厨师在 git clone 命令中生成 Chef::Exceptions::CommandTimeout 异常的情况。有时 git clone 的时间可能超过 10 分钟。如何在厨师食谱中设置此类情况的超时值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-15T19:01:46.570

git 提供程序的超时现在似乎已修复。

查看代码：[https ://github.com/opscode/chef/blob/master/lib/chef/provider/git.rb#L292](https://github.com/opscode/chef/blob/master/lib/chef/provider/git.rb#L292)

因此，对于 git 资源，您只需添加`timeout`属性，即：

```
git /var/www do
  repository <githubrepo>
  action :sync
  user www-data
  group www-data
  timeout 1200
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:58:22.397

没有简单的方法来改变超时，我的意思是通过一些属性。您将不得不覆盖[git provider](https://github.com/opscode/chef/blob/master/lib/chef/provider/git.rb)中的 run_options 方法。查看[当猴子修补方法时，您可以从新实现中调用被覆盖的方法吗？](https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i)为不同的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T04:11:49.430

同样的问题。感谢您的提示。能够像这样编写猴子补丁：

[https://gist.github.com/mikesmullin/5660466](https://gist.github.com/mikesmullin/5660466)

# math - 如何检查三角形 - 圆形和三角形矩形之间的碰撞？（包括轮换）

> ID：14557120
> 
> 赞同：0
> 
> 时间：2013-01-28T07:10:00.283
> 
> 标签：math, 2d, collision, shapes, intersect

我需要检查某些形状是否在 2D 世界中发生碰撞。

为了检查圆形和矩形之间的碰撞，我发现了这个： [Collision Detection with Rotated Rectangles](https://stackoverflow.com/questions/5650032/collision-detection-with-rotated-rectangles)

但是现在我需要在这段代码中添加另一个形状（三角形），三角形也可以旋转。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T02:16:39.757

这个 JSTS 示例（在 javascript 中）显示了如何使两个多边形相交。

[https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html](https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html)

为了修改示例以将其中一个变成圆形，请使用以下代码段：

```
// this returns a JSTS polygon circle approximation with provided center and radius
function pointJSTS(center,radius){
  var point = new jsts.geom.Point(center);
  return point.buffer(radius);
}
// ....
// insert this into the example above at line 17
b = pointJSTS({x:10,y:20}, 40); 
```

对示例进行进一步修改以将第一个多边形变成三角形是微不足道的。

# mysql - 优化在mysql中使用条件运算符和排序子句的查询

> ID：14557123
> 
> 赞同：0
> 
> 时间：2013-01-28T07:10:38.473
> 
> 标签：mysql

我想做优化这个查询。我已经给出了使用表格的统计数据。

products 和 products_categories 表有大约 5 laks 记录。但对于下面提到的类别，它有 1600 条记录。我为这 1600 条记录创建了插槽。每个产品可以有最少 1 个插槽和最多 10 个插槽。但老虎机表有大约 3 万条记录。槽表也可以有已经过期的槽。我想获得即将到期的产品，而其余产品则排在该产品之后。

我为 end_time 列创建了索引。但是我使用了条件运算符，所以在这个查询中没有使用索引。我想优化这个查询。请告诉我最好的方法。

```
EXPLAIN 
    SELECT products.*, IF(slot.end_time > NOW(), 1, 2) as order_by_end_time 
    FROM products 
        INNER JOIN products_categories ON products_categories.productid = products.productid 
        LEFT JOIN (select product_id, end_time from slot where end_time>now() order by end_time) as slot ON slot.product_id = products.productid
    WHERE products_categories.categoryid='4410' 
        AND products.saleid = 2 
    GROUP BY products.productid 
    ORDER BY order_by_end_time ASC ,  slot.end_time ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:45:12.473

id select_type table type possible_keys key key_len ref rows Extra 1 PRIMARY xcart_products_categories ref PRIMARY,cpm,productid,orderby,pm cpm 4 const 1523 使用索引；使用临时的；使用文件排序 1 PRIMARY xcart_products eq_ref PRIMARY,saleid PRIMARY 4 wwwbvira_xcart.xcart_products_categories.productid 1 使用 where 1 PRIMARY ALL NULL NULL NULL NULL 395802
2 DERIVED bvira_megahour_time_slot ALL i_end_time NULL NULL NULL 398907 使用文件排序

# objective-c - 在标签中显示用户当前位置和注释之间的距离

> ID：14557127
> 
> 赞同：0
> 
> 时间：2013-01-28T07:11:01.020
> 
> 标签：objective-c, android-mapview, tableview, cllocation

我想在自定义表格单元格的标签中显示用户当前位置与另一个注释（显示在我的 MapView 上）之间的距离。

每个单元格显示咖啡馆的名称（nameLabel），在下面，我希望它显示它们与每个咖啡馆的距离（distanceLabel）。

我的**MapViewController.m**使用此代码来计算用户当前位置与最近的咖啡馆之间的距离：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    for (MapViewAnnotation *annotation in self.mapView.annotations) {
        CLLocationCoordinate2D coord = [annotation coordinate];
        CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
        annotation.distance = [newLocation distanceFromLocation:userLocation];
        CLLocationDistance calculatedDistance = [userLocation distanceFromLocation:userLocation];
        annotation.distance = calculatedDistance;
    } 
```

我已经设置了我的自定义单元格，我只想知道我应该在我的 TableView 代码 (TableViewController.m) 中添加什么，以便在我的文本标签（称为**distanceLabel**）中显示计算距离。

**例如，我如何完成这条线？**

```
cell.distanceLabel.text = 
```

**更新**

刚刚尝试添加对我的 TableViewController.h 的引用，但 xcode 不断向我抛出错误“将 'CLLocationDistance' 重新定义为不同类型的符号”。

```
@class CLLocationDistance; 

@property (nonatomic, strong) CLLocationDistance *calculatedDistance; 
```

**更新**

**.h 文件**

![在此处输入图像描述](../Images/59a237fa232f6c7860b8d9e4c0a310d0.png)

****更新**

**.m 文件****

![在此处输入图像描述](../Images/a4fe0c521369b589dbd9ea2f3f264685.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:25:32.740

对 fx 中的 CLLocationDistance 计算距离进行前向引用。你的 .h 。CLLocationDistance 是作为双精度类型的类型定义，是一种原始数据类型，因此不要在前向引用中使用指针（CLLocationDistance calulatedDistance; 或@property CLLocationDistance calulatedDistance;）。然后执行以下操作：

```
 cell.distanceLabel.text = [NSString stringWithFormat:@"%f", calculatedDistance]; 
```

所以事实上你不必创建另一个/新的双精度并将其分配给计算距离。很抱歉有任何混淆..:)

# android - 平铺仅适用于某些可用的缩放级别

> ID：14557137
> 
> 赞同：1
> 
> 时间：2013-01-28T07:11:31.640
> 
> 标签：android, osmdroid

我遇到的问题是我的地图图块仅显示缩放级别 14 到 17 我正在使用离线 Mapnik 地图。切片位于正确的文件夹 (/osmdroid/Mapnik.zip) 中，格式正确 (.png)。

我从缩放 16 开始。放大到 17 时没有问题，但是当缩放到 18 时，只有 17 的图块被缩放。如果我缩小一段时间，则未显示缩放级别 1-14 的图块。只有一个灰色的盒子。

这些缩放级别的 png 在 .zip 存档中：/ 所以我不知道该怎么做。有人有想法吗？

我的代码是这样的：

```
public class Main extends Activity {

public static final GeoPoint INITIAL_POSITION = new GeoPoint(48.965558, 9.27893);
MapView mapView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = (MapView) findViewById(R.id.map);
    mapView.setBuiltInZoomControls(true);
    mapView.getController().setZoom(16);
    mapView.getController().setCenter(INITIAL_POSITION);
    mapView.setTileSource(TileSourceFactory.MAPNIK);
    mapView.setUseDataConnection(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:37:23.930

Osmdroid 不支持超过您实际下载的缩放级别。你所看到的正是与此相对应的。

如果您想以其他缩放级别查看地图，您只需下载它们（准备离线版本）或打开数据连接的使用`setUseDataConnection(true);`（有数据连接。

您也可以修改`TilesOverlay`osmdroid 的类，但这*并不*容易并且需要时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:16:07.237

好的，通过拆分为 4 个 zip 文件解决了问题：D

问题是一个 zip 存档中的 150000 个文件太大而无法处理......

有关详细信息，请参阅[太多文件](https://stackoverflow.com/questions/10870436/osmdroid-offline-zip-size-limitation)。

# driver - 问题是过滤卷安装时的微型过滤器

> ID：14557138
> 
> 赞同：2
> 
> 时间：2013-01-28T07:11:32.250
> 
> 标签：driver, minifilter

[操作系统：VirtualBox 上的 WinXP，HostOS：win7]

我们正在开发一个微型过滤器驱动程序，并且我们正在尝试根据某些条件阻止安装 USB 设备。

微型过滤器监视`IRP_MJ_VOLUME_MOUNT`并且每当插入 USB 驱动器时`pre-callback`，它会询问用户空间是否允许使用 FltSendMessage 挂载驱动器。在用户区， after`FltGetMessage`和 before `FltReplyMessage`，检查某些条件并将相应的值回复给驱动程序。

这一切都很好，但我们遇到了两个问题，或者说不便。

1.  条件检查大约需要 4-5 秒 [通过网络发送和接收数据]。在此期间，Windows 资源管理器只是挂起。并且无论什么动作，例如导航，一旦`FltReplyMessage`被调用就会被执行。如果我单击开始菜单等任何位置，`FltReplyMessage`则在调用之前不会发生任何事情。其他应用程序如 VLC 功能正常[即磁盘可以访问]。

2.  当U盘不允许挂载卷时，继续尝试挂载卷几次！
    我们使用的解决方法是维护最近插入设备的列表，如果 GUID 存在于列表中，则拒绝它们。我在某处读到可以使用删除挂载点`DeleteVolumeMountPoint`，如果我们将来需要允许该设备，那么我们需要删除一个注册密钥，其中包含设备的唯一 ID，可以将其发送`MOUNTDEV_UNIQUE_ID`到设备。我们试图实现这一点，但未能正确获取唯一 ID。[我们无法为`MOUNTDEV_UNIQUE_ID`结构分配足够的内存。试过`new`，`malloc(enough size)`但后来`sizeof(varUniqueID)`只返回了 4，然后打电话`DeviceIoControl`这导致“更多数据可用”错误。我们在用户区做。这应该在内核中完成吗？]

哇！很长的帖子！
我们非常感谢我们能得到的任何帮助！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-28T12:23:25.347

1.  就您的第一个问题而言，除非有一种方法可以根据卷唯一 ID 缓存驱动程序中所需的数据，否则您无能为力。这样每次挂载只会有一个**Flt调用。**我不确定您的要求，但如果做出决定所需的数据是通过网络传输的，那么您将以一种或另一种方式遭受这种延迟。驱动程序能够缓存自己的数据而无需在第一次安装同一设备后调用用户模式，这一点至关重要。
2.  对于第二点，您肯定可以在用户模式或内核模式下执行此操作。你能提供一个代码片段来检查任何错误吗？

干杯，
加布里埃尔

# iphone - 如何在iphone应用程序中单击按钮时停止循环方法

> ID：14557140
> 
> 赞同：0
> 
> 时间：2013-01-28T07:11:37.103
> 
> 标签：iphone, objective-c, ipad

我正在制作一个调查应用程序，我在开始按钮上将数据上传到服务器，我希望当单击停止按钮时，它应该停止数据上传，这是在以下方法中。

下面是上传按钮开始按钮。

```
-(IBAction)startSyncButtonAction{
   CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];
   for (int i=0; i<[appDelegate.coffeeArray count]; i++) {

    Coffee *coffeeObj = [appDelegate.coffeeArray objectAtIndex:i];

    int mycount=[appDelegate.coffeeArray count];
    NSLog(@"My Array count is %d",mycount);

        NSString*device_Id=coffeeObj.device_Id;
        NSString*R1=coffeeObj.R1;
        NSString*R2=coffeeObj.R2;
        NSString*R3=coffeeObj.R3;
        NSString*comment=coffeeObj.comment;
            NSString*update_date_time=coffeeObj.update_date_time;

    [appDelegate removeCoffee:coffeeObj];

    int mycount1=[appDelegate.coffeeArray count];

    NSLog(@"My Array After delete is %d",mycount1);

    NSLog(@"device_Id%@",device_Id);
    NSLog(@"R1%@",R1);
    NSLog(@"R2%@",R2);
    NSLog(@"R3%@",R3);
    NSLog(@"comment%@",comment);
    NSLog(@"update_date_time%@",update_date_time);

            NSString *post =[[NSString alloc] initWithFormat:@"device_Id=%@&R1=%@&R2=%@&R3=%@&comment=%@&update_date_time=%@",device_Id,R1,R2,R3,comment,update_date_time];

    NSLog(post);
    NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/pfizersurvey/SyncSurveySTD.php"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);

     }

         }

         -(IBAction)stopButtonAction{

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:44:44.290

评论指出了问题所在。您需要执行以下操作：

*   避免在主线程上做任何繁重的工作——它会锁定应用程序。
*   完成繁重的工作后 - 请务必在主线程上更新 UI。否则同步会很慢。

要解决，请考虑以下其中一项：

***1\. 使用 Grand Central Dispatch：***

大中央调度使编写线程应用程序变得容易，而无需直接处理线程。请执行下列操作：

```
dispatch_queue_t taskQ = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(taskQ, ^
{
    NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/pfizersurvey/SyncSurveySTD.php"];
   NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

//Now update back on the main thread
dispatch_async(dispatch_get_main_queue(), ^
{
    //Now update the view with your data, to show the outcome of the POST
});
    });

dispatch_release(taskQ); 
```

***2.使用网络库，它会为你做这件事。***

*   AFNetworking 很受欢迎
*   我喜欢 LRResty，它只是 NSURLConnection 的一个薄层——基本上完成了我上面写的内容，以及一些其他的事情。

***3.使用[NSURLConnection +sendAsynchronousRequest:queue:completionHandler:]；***

***4\. 使用操作队列。***

***5\. 使用线程。***

# java - Java中的布尔值赋值

> ID：14557142
> 
> 赞同：2
> 
> 时间：2013-01-28T07:11:42.560
> 
> 标签：java, boolean

为总的菜鸟问题道歉，但任何人都可以解释`match`在 for-each 循环以下列方法完成后的值发生了什么？

尝试编译会产生警告：`variable match might not have been initialised`.

```
public void listMatching(String searchString) {
boolean match;

for(String filename : files) {
    if(filename.contains(searchString)) {
        System.out.println(filename);
        match = true;
    }
    else {
        match = false;
    }
}

if(match == false) {
    System.out.println("No matches found for " + searchString);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:12:47.720

首先你需要定义`boolean match = false;`

此外，一旦找到匹配项，您需要从循环中中断，`match`否则状态将被覆盖。

```
 if(filename.contains(searchString)) {
        System.out.println(filename);
        match = true;
        break;
    } // this wil help whether a match is found or not 
```

如果您有兴趣查找匹配数 int counter = 0; if(filename.contains(searchString)) { System.out.println(filename); 匹配=真；计数器++；} // 这将有助于找到匹配的数量

最后`System.out.println("number of matches for"+searchString+" : "+counter);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:19:07.143

这是一个修复程序，可以满足您的要求：

```
public void listMatching(String searchString) {
    boolean match = false; // initialize local variable
    for(String filename : files) {
        if(filename.contains(searchString)) {
            System.out.println(filename);
            match = true;
        }
    }
    if(!match) { // same as 'match == false', just without comparison
        System.out.println("No matches found for " + searchString);
    }
} 
```

必须初始化局部变量。只有字段获得其类型的默认值。

如果您在块中`match`重新分配，它将在循环之后，即使每个包含除了最后一个。`false``else``false``filename``searchString`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:15:05.767

1.  当你找到你的匹配项时，你需要打破循环。

2.  你需要初始化你找到的变量，你也不能运行你的循环，然后你的 if 条件会查看一个未初始化的变量，这就是你的编译器想要告诉你的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T07:18:55.243

将变量初始化为 false 以避免程序中出现警告。

此外，`match`它是单个变量，根据各种文件的内容（搜索相同的字符串），您将 true 或 false 分配给同一个变量。

的最终布尔值`match`只是在文件列表的最后一个文件中搜索字符串的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T07:22:29.293

它可能文件数组是空的，所以你应该为匹配变量设置默认值；

```
boolean match=false;

for(String filename : files) {
    if(filename.contains(searchString)) {
        System.out.println(filename);
        match = true;
        break;
    }
} 
```

如果您需要检查所有文件是否都有此搜索字符串，您可以使用此代码：

```
boolean match=files.lenght!=0;

for(String filename : files) {
    if(!filename.contains(searchString)) {
        System.out.println(filename);
        match = false;
        break;
    }
} 
```

# virtualhost - windows8中的虚拟主机创建

> ID：14557143
> 
> 赞同：0
> 
> 时间：2013-01-28T07:11:46.460
> 
> 标签：virtualhost

我正在尝试保存主机文件`c://windows/system32/drivers/etc`，它总是询问我必须保存文件的类型，如果我选择主机它说访问被拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:29:52.240

您必须以管理员权限运行“记事本”，并在此窗口中打开主机文件。然后你应该可以保存它。

# vim - Vim 在尝试修复 Alt 键时插入奇怪的字符

> ID：14557144
> 
> 赞同：0
> 
> 时间：2013-01-28T07:11:49.877
> 
> 标签：vim, terminal

[我在本主题](https://stackoverflow.com/questions/6778961/alt-key-shortcuts-not-working-on-gnome-terminal-with-vim.)`Alt`中找到了在 gnome-terminal 上映射键的解决方法。编辑文件后，我的 Vim 现在将-识别为（这是一个非英文字符），我该如何修复它？`vimrc``Alt``j``ê`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:46:54.883

如参考主题中所述，对于 Vim，`Alt`+*字符*组合由设置了第 8 位的 ASCII 字符表示，这与某些特殊字符（例如`ê`）相同。只要你不需要输入那些字符（例如因为你用法语写:-)，你可以忽略这种好奇；只需使用其中一个`<A-j>`或文字`ê`符号编写您的映射（但`:set encoding=...`在您的 .vimrc 中的 any 之后，因为这会影响它们的解释方式）。

# css - 我在 css 中排列文本框时遇到问题

> ID：14557146
> 
> 赞同：0
> 
> 时间：2013-01-28T07:12:02.950
> 
> 标签：css, layout

我无法在我当前的代码中排列 css/html 中的一些文本框：

```
<html>
<head>
    <title>CTF Scoreboard</title>
    <link href="css.css" type="text/css" rel="stylesheet"/>
</head>
<body>
    <div class="header">
        <img class="headerimg" src="img/header.png" />
        <form action="search.php" method="get" class="search">
            <input type="text" placeholder="Search players" required          class="box" name="user" />
            <input name="submit" type="image" src="img/blank.png" class="submit" />
        </form>
    </div>
</body> 
```

```
body{
margin: 0px;
}
.header{
width: 100%;
height: 100px;
margin: 0px;
background-image:url('img/headerbg.png');
background-repeat: repeat-x;
margin-left: 0px;
margin-top: 0px;
padding: 0px;
border: 0px;
}

.headerimg{
height: 90px;
margin-left: 0px;
margin-top: 0px;
}

.header .search{
padding:0px;
background-image: url('img/searchbox.png');
background-repeat: no-repeat;
width: 310px;
height: 40px;
position:absolute;
top:27px;
right:27px;
margin-bottom: 0px;
}

.header .search .box{
border: 0px;
padding: 0px;
background-color:transparent;
margin-left: 5px;
width: 260px;
height: 37px;
}

.header .search .submit{
border: 0px;
background-color:transparent;
margin-left: 3px;
margin-top: 3px;

width: 36px;
height: 36px;
} 
```

它目前的样子：`http://84.80.135.87/scoreboard%20th%20ctf/`

我真的不明白为什么这不起作用，它只是忽略了利润。我已经在 Firefox 和 Chrome 中对此进行了测试，但两者都适用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:21:47.217

您的问题是图像输入字段的垂直对齐。它与行中的其他内联元素（在本例中为您的文本输入字段）对齐，就像图像一样 - 图像的底部与文本的基线对齐。要解决此问题，请按如下方式更改您的 CSS：

```
.header .search .submit{
border: 0px;
background-color:transparent;
margin-left: 3px;
margin-top: 3px;
vertical-align: top; /* Modify the vertical alignment. */    
width: 36px;
height: 36px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:24:34.587

用这个

```
.header .search .box 
{
    background-color: transparent;
    border: 0 none;
    height: 37px;
    margin-left: 5px;
    margin-top: -1px;
    padding: 0;
    width: 260px;
    display:block;
} 
```

# python - 使用颜色图在 mplot 3D 中表示 4D 数据

> ID：14557149
> 
> 赞同：3
> 
> 时间：2013-01-28T07:12:16.213
> 
> 标签：python, 3d, matplotlib, mplot3d

有没有办法改变颜色图在 mplot3d 曲面图中绑定的值？
例如，我试图表示一个物体的表面温度：

```
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

z = np.array([0,1,2,3,4,5,6,7,8,9,10])
radius = np.array([0,1,1.5,1,0,2,4,5,4,2,1])
temp = np.array([150,200,210,220,225,220,195,185,160,150,140])

angle = np.linspace(0,2*np.pi,20)
Z,ANG = np.meshgrid(z,angle)
# transform them to cartesian system
X,Y = radius*np.cos(ANG),radius*np.sin(ANG)

ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap='jet')
plt.show() 
```

这会生成对象的 3d 表示，但默认情况下，颜色图与 z 轴值相关联。颜色图可以绑定到“温度”值吗？

（在本例中，“temp”映射到 Z 的方式与“radius”值的映射方式相同）

我知道像 MayaVI 这样的工具，但如果可能的话，我希望在 matplotlib 中找到一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T19:26:14.283

尝试在对**plot_surface**的调用中使用**facecolors**：

```
import matplotlib.pyplot as plt
import numpy as np

from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

z = np.array([0,1,2,3,4,5,6,7,8,9,10])
radius = np.array([0,1,1.5,1,0,2,4,5,4,2,1])
temp = np.array([150,200,210,220,225,220,195,185,160,150,140])

angle = np.linspace(0,2*np.pi,20)
Z,ANG = np.meshgrid(z,angle)
T,ANG = np.meshgrid(temp,angle)
# transform them to cartesian system
X,Y = radius*np.cos(ANG),radius*np.sin(ANG)

ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=cm.jet(T/float(T.max())))
plt.show() 
```

![在此处输入图像描述](../Images/af984bed5007345be8e651bd15b897fe.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T13:46:17.467

如果您也在寻找颜色条，请执行以下操作

```
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1, projection='3d')
p_surf=ax.plot_surface(x,y,z,rstride=1,cstride=1,linewidth=0,antialiased=True,facecolors=cm.jet(np.sqrt(x*x + y*y + z*z)))
m = cm.ScalarMappable(cmap=cm.jet)
m.set_array(x*x + y*y + z*z)
plt.colorbar(m)
plt.show() 
```

# github - 第一次使用 Git 并使用 Ubuntu。我正在努力实现我的既定目标，需要一些帮助

> ID：14557150
> 
> 赞同：2
> 
> 时间：2013-01-28T07:12:15.353
> 
> 标签：github

到目前为止，我的屏幕上有以下信息......

```
nicholas@ubuntu:~$ git add /home/nicholas/Documents
nicholas@ubuntu:~$ git status 
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .ICEauthority
#   .Xauthority
#   .audacity-data/
#   .bash_history
#   .bash_logout
#   .bashrc
#   .cache/
#   .compiz/
#   .config/
#   .dbus/
#   .dmrc
#   .dropbox/
#   .gconf/
#   .gitconfig
#   .goutputstream-ADHZQW
#   .goutputstream-GWSJRW
#   .gstreamer-0.10/
#   .gtk-bookmarks
#   .kde/
#   .local/
#   .mission-control/
#   .mozilla/
#   .pki/
#   .profile
#   .pulse-cookie
#   .pulse/
#   .signon/
#   .thunderbird/
#   .xsession-errors
#   .xsession-errors.old
#   Desktop/
#   Downloads/
#   Dropbox/
#   Pictures/
#   Ubuntu One/
#   examples.desktop
#   git status 
```

没有添加到提交，但存在未跟踪的文件（使用“git add”来跟踪）我想推送到 github 的文件数量。根据我的理解，从跳转开始，我什么也没添加，我的状态似乎表明我什么也没做，即使我正在关注两个参考资料......其中一个参考资料是...... [http://git-scm.com/ book/en/Getting-Started-Installing-Git](http://git-scm.com/book/en/Getting-Started-Installing-Git) ...而其他此类参考是... [http://www.codeschool.com/courses/try-git](http://www.codeschool.com/courses/try-git)...我在大约 15 分钟内完成了代码学校的 git 教程，没有任何问题，并且很好地遵循了，但在现实世界中，事情进展并不顺利...有人可以在 Git 上指导我一点并帮助我添加我的网站和从 libre office 到我的 github 存储库的写作纲要，这样我就可以开始我作为 git hub afficianado 的旅程......任何和所有的帮助将不胜感激......我期待收到你的来信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:25:30.837

在这里，您似乎在主目录中完成了“git init”。

“如果您开始在 Git 中跟踪现有项目，则需要转到项目目录”

```
cd /path/to/directory/with/existing/source/code
$ git init
$ git add .
$ git status 
```

你可能这个链接有用。 [http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository#Initializing-a-Repository-in-an-Existing-Directory](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository#Initializing-a-Repository-in-an-Existing-Directory)

# php - 在按钮单击时动态添加组合框

> ID：14557153
> 
> 赞同：0
> 
> 时间：2013-01-28T07:12:43.087
> 
> 标签：php, javascript, mysql

嗨，我正在尝试在按钮单击上生成表格行，但我的问题是组合框，它从 mysql 数据库加载数据，任何人都可以帮助我如何在 mysql 中使用 javascript 这是我的 javascript 代码

```
<script language="javascript" type="text/javascript">
                        var i=1;
                        function addalRow()
                        {
                            var tbl = document.getElementById('alimtable');
                            var lastRow = tbl.rows.length;
                            var iteration = lastRow - 1;
                            var row = tbl.insertRow(lastRow);

                            var firstCell = row.insertCell(0);
                            var el = document.createElement('input');
                            el.type = 'text';
                            el.name = 'alimname_' + i;
                            el.id = 'alimname_' + i;
                            el.size = 40;
                            el.maxlength = 40;
                            firstCell.appendChild(el);

                            var secondCell = row.insertCell(1);
                            var el2 = document.createElement('input');
                            el2.type = 'text';
                            el2.name = 'alimmob_' + i;
                            el2.id = 'alimmob_' + i;
                            el2.size = 13;
                            el2.maxlength = 13;
                            secondCell.appendChild(el2);

                            var thirdCell = row.insertCell(2);
                            var e13 = document.getElementsByName('qabil')[0]; 
                            e13.setAttribute('name',e13.getAttribute('name')+'_'+                 
                                   i);//change the select's name 
                            thirdCell.appendChild(e13);

                            // alert(i);
                            i++;
                            makhtab.r.value=i;
                            //  alert(i);
                        }
                    </script> 
```

这是我的表格代码

```
<table border="1px" id="alimtable" size="100px" cellspacing="0" cellpadding="2">
<tr>
<td><strong>Muallim Name</strong></td>
<td><strong>Mobile</strong> </td>
<td><strong>Qabiliyat</strong> </td>
</tr>
<tr>
<td><input name="alimame_0" type="text" id="zimname_0" size="40" maxlength="20" /></td>
<td><input name="alimmob_0" type="text" id="zimmob_0" size="13" maxlength="20" /></td>
<td><select id="qabil" name="qabil" class="element text large" style="font-size:14px;"/>
<option value=""></option>
<?php
$result = mysql_query("SELECT code, `name` from qabiliyat ") or die(mysql_error());
 while ($qab = mysql_fetch_array($result)) {
echo "<option value='$qab[code]'>$qab[name]</option>";
 }
?>
</select></td>
</tr>
</table>
<input type="button" value="Add" onclick="addalRow();" /><input name="h" type="hidden"  id="r" value="1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:41:10.390

```
$("#addBox").click(function () {
var newDD = $("<select/>");
$(newDD).append("<option>Option 1</option>");
$(newDD).append("<option>Option 2</option>");
$("#myBox").append(newDD);
});

<div id="myBox"></div>
<input type="button" id="addBox" value="Add" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:46:31.233

请在onclick中调用ajax函数............

我在这里添加了一些示例....

```
<script type='text/javascript'>

    //AJAX function
    function startAjax() {
      $.ajax({
        type: "POST",
        url: "test.php",
        data: "name=name&location=location",
        success: function(msg){
          alert( "Data Saved: " + msg );
        }
      });
    }

    //Call AJAX:
    $(document).ready(startAjax);

<button onclick="startAjax();">Test</button> 
```

[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/399114/call-ajax-onclick](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/399114/call-ajax-onclick)

# ios - 将图像的 url 从一个数组传递到另一个数组

> ID：14557161
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:13:19.343
> 
> 标签：ios, objective-c, nsarray, photo-gallery

我正在使用 KTPhotoBrowser，我有一个数组，其中包含来自 NSDictionary 的 url 列表，我想将这些数组列出到 KTPhotoBrowser 的数组中，该数组的数组为：

```
images_ = [[NSArray alloc] initWithObjects:
           [NSArray arrayWithObjects:@"http://farm3.static.flickr.com/2735/4430131154_95212b8e88_o.jpg", @"http://farm3.static.flickr.com/2735/4430131154_17d8a02b8c_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm5.static.flickr.com/4001/4439826859_19ba9a6cfa_o.jpg", @"http://farm5.static.flickr.com/4001/4439826859_4215c01a16_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm4.static.flickr.com/3427/3192205971_0f494a3da2_o.jpg", @"http://farm4.static.flickr.com/3427/3192205971_b7b18558db_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm2.static.flickr.com/1316/4722532733_6b73d00787_z.jpg", @"http://farm2.static.flickr.com/1316/4722532733_6b73d00787_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm2.static.flickr.com/1200/591574815_8a4a732d00_o.jpg", @"http://farm2.static.flickr.com/1200/591574815_29db79a63a_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm4.static.flickr.com/3610/3439180743_21b8799d82_o.jpg", @"http://farm4.static.flickr.com/3610/3439180743_b7b07df9d4_s.jpg", nil],
           [NSArray arrayWithObjects:@"http://farm3.static.flickr.com/2721/4441122896_eec9285a67.jpg", @"http://farm3.static.flickr.com/2721/4441122896_eec9285a67_s.jpg", nil],
           nil]; 
```

并且我的数组值在我的应用程序的每个事件中不断变化我的数组图像存储在一个名为“照片”的数组中，在控制台中我得到的 url 列表为：

```
url = "http://myimage1_url.jpg",
"http://myimage2_url.jpg",
"http://myimage3_url.jpg" 
```

现在我如何将我的 url 传递给 KTPhotoBrowser 的图像数组，以便我可以获得“images_”数组中的图像，

我应该使用for循环吗

```
for(int i=0; i<photos.count ;i++)
{

get images in the 'images_' array to display the images
what code should i write here ??

} 
```

还是我必须使用其他技术...

我正在使用这个链接：[https](https://github.com/kirbyt/KTPhotoBrowser) ://github.com/kirbyt/KTP ​​hotoBrowser plaese 帮助大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:12:00.440

乍一看，您似乎必须通过创建您自己的数据源类来实现[KTPhotoBrowserDataSource](https://github.com/kirbyt/KTPhotoBrowser/blob/master/src/KTPhotoBrowser/KTPhotoBrowserDataSource.h)协议，该类将类似于[示例数据源](https://github.com/kirbyt/KTPhotoBrowser/blob/master/src/Sample/Classes/FlickrSample/FlickrDataSource.m)并将您的图像存储在该类的实例中。

**编辑：**您可以像这样制作自定义初始化方法

```
- (id)initWithURLs: (NSArray*) imageURLs
{
   _images = [NSArray arrayWithArray: imageURLs];
} 
```

并在运行时更改数据源

```
[self setDataSource: [FooDataSource initWithURLs: _imageArray1]]; 
```

.... 一段时间后

```
[self setDataSource: [FooDataSource initWithURLs: _imageArray2]]; 
```

**编辑2：**

FooDataSource.h

```
@property *NSArray photos; 
```

FooDataSource.m

```
@synthesize photos; 
```

以及所有要`photos`替换为的引用`fooDataSource.photos`

# c# - 如何在不使用 c# 重建的情况下更改 dll 的程序集版本？

> ID：14557165
> 
> 赞同：4
> 
> 时间：2013-01-28T07:13:34.480
> 
> 标签：c#, .net, c#-4.0

任何人都可以帮助我更改程序集（.dll）的版本而不重建它。

我想重新标记程序集版本而不构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:30:02.060

我认为你有两个选择；

1.  不要在您引用它的项目中签署程序集并将特定版本设置为 false。

2.  为程序集创建[发布者策略](http://msdn.microsoft.com/en-us/library/dz32563a%28v=VS.90%29.aspx)并将[bindingRedirect](http://msdn.microsoft.com/en-us/library/eftw1fys%28v=vs.90%29.aspx)元素添加到您的配置中。

# php - 如何使用 PHP MySql 建立与数据库的连接

> ID：14557166
> 
> 赞同：0
> 
> 时间：2013-01-28T07:13:35.167
> 
> 标签：php, html, mysql

以下代码在php中创建数据库是否正确？

```
<?php

    $con=mysql_connect('localhost','admin','admin');
    if(!$con)
    {
        die("could not connect:' .mysql_error());
    }

    $sql = "CREATE DATABASE db1";
    mysql_select_db("db1", $con);
    $sql = "CREATE TABLE year
    (
        ayear varchar(10),
        fyear varchar(10)

    )";
    if(isset($_POST['id'])) 
    { 
        $ayear = $_POST['ayear'];
        $fyear = $_POST['fyear'];
        if($ayear != "" && $fyear != "") 
        {
            $query = "INSERT INTO year VALUES ('$ayear', '$fyear')"; 
            $result = mysql_query($query) or die(mysql_error());
        }
        else 
            echo "one of the field is empty";
     } 
    if (!mysql_query($sql,$con))
    {
         die('Error: ' . mysql_error()); 
    }
    mysql_close($con); 

?> 
```

执行代码后，如果我在 MySql 中检查已创建的数据库，则未创建数据库。代码有什么问题？我该如何即兴创作？我不能在里面使用创建数据库命令吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:19:13.087

您刚刚编写了创建数据库的查询没有执行它。用您的代码替换下面的代码

```
$sql = "CREATE DATABASE db1";
mysql_query($sql, $con);
mysql_select_db("db1", $con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:22:51.203

试试这个 -

```
$sql = "CREATE DATABASE db1";
if (mysql_query($sql, $con)) {
    echo "Database db1 created successfully\n";
} else {
    echo 'Error creating database: ' . mysql_error();
}
mysql_select_db("db1", $con); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:19:33.327

只是为了多样性，因为我们经常在这里说最好开始使用 PDO 而不是 mysql_* 这你可以如何使用 PDO

```
<?php
//Connect to mysql, omit db name since we want to check if db exist
$db = new PDO('mysql:host=localhost;charset=UTF-8', 'user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

//Create db if it doesn't exist
$sql = "CREATE DATABASE IF NOT EXISTS db1";
$db->exec($sql);
//Select db since we didn't provide that information in DSN
$sql = "USE db1";
$db->exec($sql);
//Create table if doesn't exist
$sql = "CREATE TABLE IF NOT EXISTS `year`
        (ayear varchar(10), fyear varchar(10))";
$db->exec($sql);

//Don't forget to include all your necessary checks somewhere here
if(isset($_POST['id']) && 
   isset($_POST['ayear']) && $_POST['ayear'] && 
   isset($_POST['fyear']) && $_POST['fyear']) { 

    //Don't forget to include the code to check and sanitize user's input
    $ayear = $_POST['ayear'];
    $fyear = $_POST['fyear'];

    //Insert data using prepared statement
    $query = $db->prepare("INSERT INTO `year` VALUES (:ayear, :fyear)"); 
    $query->execute(array(':ayear' => $ayear, ':fyear' => $fyear));

    //Select data from the table
    $sql = "SELECT * FROM `year`";
    foreach ($db->query($sql) as $row) {
        echo "ayear: " . $row['ayear'] . "  fyear: " . $row['fyear'] . "<br>";
    }
} else {
    echo "One of the field is empty.";
}
//Close the connection to the db
$db = null;
?> 
```

*免责声明：*为简洁起见，跳过了错误处理、检查、输入卫生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T07:56:55.193

进行了更改：

```
$sql = "CREATE DATABASE db1";
$result = mysql_query($sql);

mysql_select_db("db1", $con); 
```

它应该是工作。它将使用 db1 名称创建数据库，并在其中创建表 year。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-30T17:26:20.017

您还应该执行查询：

```
$sql = "CREATE DATABASE db1";
mysql_query($sql); 
```

然后，您的数据库将被成功创建。

# solr - solr CSV 更新映射参数

> ID：14557167
> 
> 赞同：0
> 
> 时间：2013-01-28T07:13:36.427
> 
> 标签：solr

感谢之前的回复。我有以下文件。我正在使用 /update/csv 处理程序将其索引到 solr！我的问题是我必须先转换这个文件，然后才能将第一个字段作为日期索引为所需的格式......或者我可以使用 map 参数来实现相同的..

```
 2011-12-16 21:16:36,510 Total: 2139 Free: 1569
    2011-12-16 21:17:07,593 Total: 2139 Free: 1572
    2011-12-16 21:17:38,819 Total: 2139 Free: 1572
    2011-12-16 21:18:09,789 Total: 2138 Free: 1567
    2011-12-16 21:18:40,667 Total: 2139 Free: 1580 
```

因此，我尝试使用 map 参数..

字段名=logged_dt,val_s

f.logged_dt.map=* *:*T*Z

基本上我希望每一行都转换成这个

```
 2011-12-16T21:16:36Z,510 Total: 2139 Free: 1569 
```

所以它符合指定的日期格式..！我错过了什么吗？我可以使用 map 参数来做到这一点还是需要转换我的输入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:10:03.683

所有更新处理程序都对格式和日期非常严格，通常受影响最大。

因此，您不能直接在 CSV 中执行此操作。而且**map**不支持正则表达式 - 只是直接值。

但是，您可以使用[更新请求处理器，它可以使用](http://wiki.apache.org/solr/UpdateRequestProcessor)**solrconfig.xml**中的 update.chain 参数添加到任何请求处理器。您最好的选择是使用[RegexReplaceProcessorFactory](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/update/processor/RegexReplaceProcessorFactory.html)（需要 Solr 4）。它采用[标准的 Java 正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，包括组替换。

# java - 在 VB.NET UI 和 Java 应用程序之间进行通信

> ID：14557175
> 
> 赞同：0
> 
> 时间：2013-01-28T07:14:31.227
> 
> 标签：java, vb.net, soap, tcp

我有一个带有 UI 的 VB.Net 应用程序，它必须启动 Java Application 并接收/读取 java 应用程序产生的消息。

在这两个进程之间建立通信/链接的最佳方法是什么？我看到有人推荐 SOAP 或 TCP 套接字。

有人可以建议告诉我应该如何进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:28:23.650

这实际上取决于您需要什么以及如何实施所有内容。

您可能可以使用[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)机制来获得您所追求的。另一种选择可能是让您的进程将指令相互写入文件。

在不了解应用程序的实现和范围的情况下，TCP 通常更好（在我看来），因为它更容易适应。这意味着有一天，您的进程需要在不同的机器上运行，TCP 将提供（据我所知）从一个阶段（两个进程在同一台机器上运行）过渡到下一个阶段的最简单方法。

如果您需要发送一些复杂的数据，那么使用一些基于 TCP 的框架，也许[SOAP](http://en.wikipedia.org/wiki/Simple_Object_Access_Protocol)或[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)会让您的生活更轻松。

# tidesdk - 为什么新窗口反应迟钝

> ID：14557181
> 
> 赞同：0
> 
> 时间：2013-01-28T07:15:04.273
> 
> 标签：tidesdk

首先，我们使用TIDESDK新建一个网址窗口时，输入表单输入总是有延迟反应，但是当我们用chrome浏览器打开一个新网址时，却没有延迟反应，为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:34:26.363

这可能是由于 TideSDK 中有 2 年历史的 webkit。

# c - Visual Studio 2012 C 访问代码错误

> ID：14557183
> 
> 赞同：0
> 
> 时间：2013-01-28T07:15:08.407
> 
> 标签：c, visual-studio-2012, compiler-errors, scanf

我正在使用 C 编写一个小型家庭作业程序，我遇到了一个非常不寻常的问题。我使用 Visual Studio 2012 在 C 中对此进行了编码。程序编译时没有错误，并且它还在 cmd 中运行，直到某个阶段它崩溃并出现异常。请忽略程序的逻辑，我剪掉了一些部分以专注于错误本身。我真的很感激这方面的一些帮助。谢谢你！

这是程序：

```
#include <stdio.h>
#include <math.h>

int main( void )
{
    int menuinput;
    int austinHour, austinMinute;
    int irishHour, irishMinute;
        printf("Insert a Number from 1-11 to select menu option: ");
        scanf_s("%d",&menuinput);
        switch(menuinput)
        {
            case 1:
            { 
                irishHour=0;
                irishMinute=0;
                austinHour=0;
                austinMinute =0; 
                printf("Enter Austin time: ");
                scanf_s("%d %d",austinHour,austinMinute);
                irishHour = (austinHour + 61);
                printf("%d %d",irishHour, austinMinute);
            }
                } 
```

当我尝试运行程序时，错误如下：

```
First-chance exception at 0x62ACD745 (msvcr110d.dll) in Lab2.exe: 0xC0000005: Access violation writing location 0x00000000.

If there is a handler for this exception, the program may be safely continued. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:16:44.290

你有一个错字，你没有传递参数的地址`scanf`：

```
 printf("Enter Austin time: ");
 scanf_s("%d %d",&austinHour,&austinMinute);
                 ^^          ^^ 
```

我说这是一个错字，因为您在第一次使用 scanf 时就这样做了：

```
scanf_s("%d",&menuinput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:00:15.720

除了 Alok Save 的回答，我想知道您是否在使用 scanf 时遇到了神秘的行为错误。我准备了一些要考虑的问题。如果您需要手册，可以在[此 scanf 手册](http://pubs.opengroup.org/onlinepubs/000095399/functions/fscanf.html)中找到答案。

1.  `int x = scanf("%d %d", &foo, &bar);`如果我输入“123 hello”，x 会是什么？
2.  你会用哪个词来描述 bar 的价值？
3.  您希望 getchar() 返回哪个字符？
4.  `do { x = scanf("%d", &bar); printf("x: %d\n", x); } while (x == 0);`考虑到上次转换失败后仍保留在流中的“hello”，您对这段代码有何期望？
5.  `int y = scanf("%d", &foo);`如果 scanf 在将任何内容放入 foo 之前遇到 EOF，您会期望 y 为正吗？在 Windows 中按 CTRL+Z 或在 Linux 中按 CTRL+D 可以将 EOF 发送到标准输入。
6.  `int z = scanf("%d %d", &foo, &bar);`假设 scanf 成功地为两个变量 foo 和 bar 赋值，你期望 z 是什么？

# java - Java - ( Apache POI ) 在循环中设置单元格公式

> ID：14557185
> 
> 赞同：2
> 
> 时间：2013-01-28T07:15:19.263
> 
> 标签：java, apache-poi, spreadsheet

![设想](../Images/ec49b6cc3ec09429295a7e539ae6d336.png)

您好 Java 开发人员，

这是一个直截了当的问题。我如何能够在 Apache POI 的循环中设置 Cell 的公式？

这是支持我的问题的信息：

**图1**：单元格C1有公式`SUM(C6:C7)`，可以通过简单的硬编码公式来完成`myCell.setCellFormula("SUM(C6:C7)")`。
另一方面：

**图 2**：这是我想要的输出。例如，我想在 Cells 上设置一个公式`C1, D1, and E1`。这怎么能在一个循环中完成？

为什么我要在循环中使用它？
- 硬编码会很烦人。3 个单元格只是示例。目前我有数百个细胞在等待他们的公式。
- 未指定行数，它将基于程序创建的行数。

我做了什么？
- 谷歌搜索。
- 搜索类似的问题。
- Apache POI 的列由整数表示（一行内的单元格数）。

该公式需要 Alpha C2（C 列，第 2 行）。我试图遍历电子表格并意识到如果我继续，公式将导致`SUM(26:27)`（其中：2 = 列 C，和第 6 行（基数 1：rowCount + 1），我想成为`SUM(C6:C7)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:02:03.927

我终于解决了这个问题。
`CellReference.convertNumToColString(myColumnNumber)`将返回列名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:38:33.347

到目前为止，您尝试了什么（代码）？

尝试这样的事情（但是当你通过 Z 列时，你必须多加考虑：

```
 int col=2;
  int row=6;
  char ccol = (char) (('A'+col)&0xff);
  String formula=String.format("SUM(%c%d:%c%d)", ccol, row, ccol, row+1); 
```

# c# - OAuthWebSecurity 创建帐户 - 它是如何工作的？

> ID：14557186
> 
> 赞同：3
> 
> 时间：2013-01-28T07:15:23.993
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, dotnetopenauth

我对以下行感到困惑和担心，因为 OAuthWebSecurity 的 API 似乎有自己的身份验证存储。

```
 // If the current user is logged in add the new account
        OAuthWebSecurity.CreateOrUpdateAccount(result.Provider, result.ProviderUserId, User.Identity.Name); 
```

如果我没看错的话，这似乎表明 API 在本地保存了关系。

请告诉我情况并非如此，并解释它到底是做什么的？我需要我的 Web 应用程序尽可能无状态，我不能让 API 像这样存储本地值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:33:47.960

它使用`SimpleMembershipProvider`ASP.NET MVC 4 中的默认提供程序来创建或更新公共提供程序用户 ID 和本地用户之间的关联。基本上它会在`webpages_OAuthMembership`表中添加一条记录。

这是被调用的相应代码`WebSecurity.CreateOrUpdateOAuthAccount`：

```
public override void CreateOrUpdateOAuthAccount(string provider, string providerUserId, string userName)
{
    this.VerifyInitialized();
    if (userName.IsEmpty())
    {
        throw new MembershipCreateUserException(MembershipCreateStatus.ProviderError);
    }
    int userId = this.GetUserId(userName);
    if (userId == -1)
    {
        throw new MembershipCreateUserException(MembershipCreateStatus.InvalidUserName);
    }
    int userIdFromOAuth = this.GetUserIdFromOAuth(provider, providerUserId);
    using (IDatabase database = this.ConnectToDatabase())
    {
        if (userIdFromOAuth == -1)
        {
            if (database.Execute("INSERT INTO [" + OAuthMembershipTableName + "] (Provider, ProviderUserId, UserId) VALUES (@0, @1, @2)", new object[] { provider, providerUserId, userId }) != 1)
            {
                throw new MembershipCreateUserException(MembershipCreateStatus.ProviderError);
            }
        }
        else if (database.Execute("UPDATE [" + OAuthMembershipTableName + "] SET UserId = @2 WHERE UPPER(Provider)=@0 AND UPPER(ProviderUserId)=@1", new object[] { provider, providerUserId, userId }) != 1)
        {
            throw new MembershipCreateUserException(MembershipCreateStatus.ProviderError);
        }
    }
} 
```

# android - Android查看背景：如何为PNG透明度指定背景颜色？

> ID：14557197
> 
> 赞同：2
> 
> 时间：2013-01-28T07:16:06.080
> 
> 标签：android, android-layout, background, android-linearlayout, transparent

我希望我的 Android View 的背景是白色背景上的徽标。

我可以将视图的背景设为白色：

```
android:background="@color/colorWhite" 
```

我可以将视图的背景设为 PNG：

```
android:background="@drawable/logo" 
```

但不能同时（`Attribute "android:background" was already specified`）。
如果我只写`@drawable/logo`，那么徽标将绘制在黑色背景上。怎么做？最好不添加视图层。

* * *

**解决方案：**我使用了 Avinazz 的第一个建议，代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@color/white"/>
    <item>
        <bitmap android:src="@drawable/logo"
        android:gravity="center" />
    </item>
</layer-list> 
```

`strings.xml`含`<color name="white">#FFFFFF</color>`. _

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:26:34.133

几种可能：

1）在android中使用[Layer drawables](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)或[覆盖两个图像来设置一个imageview](https://stackoverflow.com/questions/2739971/overlay-two-images-in-android-to-set-an-imageview)

2) 调整您的 xml 以使容器背景具有白色背景，以及具有所需图像的子级透明。

3) 编辑图像以具有白色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:27:47.453

在您的活动标签内的清单文件中定义您自己的主题或使用内置的 Light 主题，然后在布局 xml 中使用您的背景。`android:background="@drawable/logo`

# python-3.x - 如何从python中的文件中读取路由表

> ID：14557198
> 
> 赞同：0
> 
> 时间：2013-01-28T07:16:06.610
> 
> 标签：python-3.x, python-2.7

我想从python中的文本文件中读取IP地址128.11.56.0,255.255.255.0,117,9,45,16并将它们存储在变量中。即子网、掩码和下一跳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:18:03.793

如果您的文件具有以下格式：

（第 1 行）：子网、掩码、nextop
（第 2 行）：子网、掩码、nextop
...
（第 n 行）：子网、掩码、nextop

```
f = open(path_to_file)
lines = f.readlines()
data = []
for line in lines:
    o = {"subnet" : line.split(',')[0], "mask" : line.split(',')[1], "nexthop" : line.split(',')[2]}
    data.append(o) 
```

# actionscript-3 - 如何在 Flex DataGrid 中添加下拉列表

> ID：14557206
> 
> 赞同：0
> 
> 时间：2013-01-28T07:16:42.703
> 
> 标签：actionscript-3, apache-flex, drop-down-menu, datagrid, flex4.5

我正在尝试在 DataGrid 表中添加一个 DropDownList。用户从下拉列表中选择其中一项后，我选择的项目没有反映或没有被选中。我知道我可以使用 ComboBoxGridItemEditor 来实现我要求的结果。但是组合框是可编辑的，我不希望用户进行编辑，而只是从列表中的一个选项中进行选择。这就是我尝试在 dataGrid 中添加 dropDownList 的原因。

请告诉我下拉列表中的选定项目如何识别和更新 dataGrid 中单元格的值并将值保存回数据提供者？

问题：所以当我尝试选择蓝色时，单元格不会更新，而是保持红色。

谢谢雷哈。

```
 <fx:Script>
    <![CDATA[                
        import mx.collections.ArrayCollection;      
        [Bindable]
        private var myDP:ArrayCollection = new ArrayCollection([
            {label1:"Order #2314", quant:3, color:'red'},
            {label1:"Order #2315", quant:3, color:'red'}     
        ]); 

    ]]>
</fx:Script>

<s:DataGrid id="myDG" x="85" y="57" width="393" height="151" dataProvider="{myDP}"
            editable="true" variableRowHeight="true">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="label1" headerText="Order #" editable="false"/>                
            <s:GridColumn dataField="quant" headerText="Qty" editable="true"/>

            <s:GridColumn dataField="color" headerText="Color" editable="true">                     
                <s:itemEditor>
                    <fx:Component>                              
                        <s:GridItemEditor>                          
                            <s:DropDownList id="myDropList" requireSelection="true">
                                <s:dataProvider>
                                    <s:ArrayCollection>
                                        <fx:String>red</fx:String>
                                        <fx:String>blue</fx:String>
                                        <fx:String>green</fx:String>
                                    </s:ArrayCollection>                                        
                                </s:dataProvider>
                            </s:DropDownList>                               
                        </s:GridItemEditor>                         
                    </fx:Component>
                </s:itemEditor>                 
            </s:GridColumn> 

        </s:ArrayList> 
    </s:columns >
</s:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:14:23.703

基本上，您需要通过`data getter/setter method`自定义 itemrenderer 将更改的 selectedItem 更新/保存为 arraycollection。

查看`data[column.dataField] = value;`这一行 saveback to arraycollection。

```
<s:GridColumn dataField="color" headerText="Color" editable="true">                     
    <s:itemEditor>
        <fx:Component>                              
            <s:GridItemEditor>              
            <fx:Script>
                <![CDATA[

                    import mx.core.FlexGlobals;
                    import mx.events.FlexEvent;

                    import spark.events.IndexChangeEvent;

                    override public function set value(newValue:Object):void {

                        cb.selectedItem = newValue;
                    }

                    override public function get value():Object {
                        return cb.selectedItem.toString();
                    }

                    override public function setFocus():void {
                        cb.setFocus();
                    }

                    override public function save():Boolean
                    {
                        data[column.dataField] = value;                                     
                        return true;
                    }
                ]]>
            </fx:Script>
            <s:DropDownList id="cb" requireSelection="true">
                <s:dataProvider>
                    <s:ArrayCollection>
                        <fx:String>red</fx:String>
                        <fx:String>blue</fx:String>
                        <fx:String>green</fx:String>
                    </s:ArrayCollection>                                        
                </s:dataProvider>
            </s:DropDownList>                               
        </s:GridItemEditor>                         
    </fx:Component>
</s:itemEditor> 
```

# java - 复选框选中/取消选中（快速帮助）

> ID：14557210
> 
> 赞同：0
> 
> 时间：2013-01-28T07:16:47.737
> 
> 标签：java, javascript, jquery

我想要一个使用 jquery 或 javascript 的选中/取消选中所有按钮。我曾尝试使用网络中可用的示例，但对我没有任何帮助。

```
<li>
    <span class="checkbox unchecked">
          <label for="check1"></label>
          <input type="checkbox" id="select" name="select">
    </span>
</li> 
```

这就是我将所有复选框放入包含一些信息的循环中的方式。我已经从另一个 jsp 页面调用了它，并将它放在另一个表单中。我尝试了可能的示例，但无法使用这些代码。

请帮忙。

我试过这个jQuery：

```
<script language="javascript">
$(function(){
    $("#select").click(function () {
        $('#check1').attr('checked', this.checked);
    });
    // if all checkbox are selected, check the select checkbox
    // and viceversa
    $("#check1").click(function(){
        if($("#check1").length == $("#check1:checked").length) {
            $("#select").attr("checked", "checked");
        } else {
            $("#select").removeAttr("checked");
        }

    });
});
</script> 
```

我不允许更改此复选框的设计和 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:13:11.860

我认为你需要这个，使用 id 请使用 class 请将脚本放在页面的头部

```
<script>
    $(document).ready(function(){
        $(".check").click(function(){
             if($(".checkall:checked").length<=0) {
                 $(".checkall").prop('checked', true);
             } else {
                 $(".checkall").removeAttr("checked");
             }

          });
         });

</script> 
```

和 html 部分将是

```
<ul>
    <li>
        <span class="checkbox unchecked">
              <label for="check1"></label>
               <input type="checkbox" id="select" name="selectall" class="checkall">
        </span>
    </li>
    <li>
        <span class="checkbox unchecked">
              <label for="check1"></label>
               <input type="checkbox" id="select" name="selectall" class="checkall">
        </span>
    </li>
    <li>
        <span class="checkbox unchecked">
              <label for="check1"></label>
               <input type="checkbox" id="select" name="selectall" class="checkall">
        </span>
    </li>
</ul>
<input type="button" name="test" value="test" class='check'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:20:00.703

```
<a rel="env" href="#select_all">Select All</a>
<a rel="env" href="#select_none">Select None</a>    

<ul id="env">
    <input type="checkbox"> data
    <input type="checkbox"> data
</ul>

<script>
    $("A[href='#select_all']").click( function() {
        $("#" + $(this).attr('rel') + " INPUT[type='checkbox']").attr('checked', true);
        return false;
    });

    $("A[href='#select_none']").click( function() {
        $("#" + $(this).attr('rel') + " INPUT[type='checkbox']").attr('checked', false);
        return false;
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:26:38.637

您的代码中存在的一些缺陷

1）选择器是错误`$("#selectall").click(function () {`的，这选择了id为selectall的输入，但在你的情况下，没有id为selectall的元素

这应该做..

```
 $("#select").click(function () { //this select the input with id select..which is selectall in your case.. 
```

2）`$('#check1').attr('checked', this.checked);`这会找到ID为check1的复选框...**我猜你的情况是多个**..所以因为多个元素不能有相同的ID..将其更改为类并调用

```
 $('.check1').attr('checked', this.checked); 
```

**最终输出..无需更改您的代码**

```
 $(function(){
     $("#select").click(function () {
          $('.check1').attr('checked', this.checked);
     });

     // if all checkbox are selected, check the selectall checkbox
     // and viceversa
     $(".check1").click(function(){
         if($(".check1").length == $(".check1:checked").length) {
             $("#select").attr("checked", "checked");
         } else {
             $("#select").removeAttr("checked");
         }

      });
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T07:28:26.440

您不能为页面上的多个元素提供相同的 id。尝试将它们更改`id`为`class`：

我在这里做了一个小提琴：`[http://jsfiddle.net/zqPXc/](http://jsfiddle.net/zqPXc/)`

# 使用的html：

```
<ul>
<li> <span class="checkbox unchecked">
      <label for="selectall">selectall</label>
    <input type="checkbox"  name="select"/>
</span>

</li>
<li> <span class="checkbox unchecked">
      <label for="check1"></label>
    <input type="checkbox" class="check1" name="b"/>
</span>

</li>
<li> <span class="checkbox unchecked">
      <label for="check1"></label>
    <input type="checkbox" class="check1" name="b"/>
</span>

</li>
</ul> 
```

# 使用的 jQuery：

```
$(document).on('click', '[name="select"]', function () {
  $('.check1').prop('checked', ($('[name="select"]:checked').length) ? true : false);
});

$(document).on('click', ".check1", function () {
   $('[name="select"]').prop("checked", ($('.check1:checked').length == $('.check1').length) ? true : false);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T07:28:45.110

我写了一篇关于使用 jQuery here [blog link](http://weblogs.asp.net/dennisthemenace/archive/2009/02/21/using-jquery-to-select-deselect-gridview-checkboxes.aspx)切换复选框的博客文章。

这些方面的内容可能适用于您的情况。我还注意到您已经命名了`#checked1`您可能想要更改为一个类而不是多个复选框的复选框。

```
$(document).ready(function() {
    /** Toggle child checkboxes based on the #selectall's checked state. */
    $("#selectall").click(function() {
        this.checked = !(this.checked == true);
        var ischecked = !(this.checked == true);

        /** Set the checkboxes. */
        $("#grdWhatever input:checkbox").attr("checked", function() {
            this.checked = ischecked;
        });
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T07:28:51.450

前提是您有一个主复选框`#select`来控制页面上所有其他复选框的状态：

```
$('#select').on('click', function(){
    if(this.checked) $('input:checkbox').not($(this)).attr('checked', true);
    else $('input:checkbox').not($(this)).attr('checked', false);
}); 
```

# meteor - Meteor 用户配置文件始终未定义

> ID：14557212
> 
> 赞同：2
> 
> 时间：2013-01-28T07:16:55.367
> 
> 标签：meteor

我看不到我的用户的任何个人资料信息，知道为什么吗？

服务器 ：

```
Meteor.publish("userData", function () {
    return Meteor.users.find({_id: this.userId},
        {fields: {'profile': 1}});
});
Meteor.publish("allUsers", function () {
    //TODO: For testing only, remove this
    return Meteor.users.find({}, {fields: {'profile': 1}});
}); 
```

客户 ：

```
Meteor.autosubscribe(function () {
    Meteor.subscribe('allUsers',null , function() { console.log(Meteor.users.find().fetch()) });
    Meteor.subscribe('userData', null, function() { console.log(Meteor.user())});
});

....

Accounts.createUser({email:email,password:password, profile: {name: name}},function(error){
    ...
}); 
```

我的控制台输出一个对象，第一个对象只有 _id 和电子邮件，第二个对象未定义。配置文件信息（在我的情况下为名称）似乎有效，因为在我的 server.js 中，我有一个可以正常工作的名称验证：

```
Accounts.onCreateUser(function(options, user) {
    if(options.profile.name.length<2)
        throw new Meteor.Error(403, "Please provide a name.");
    return user;
}); 
```

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:42:46.580

使用多个订阅时，只有第[一个订阅很重要](http://docs.meteor.com/#meteor_subscribe)。第二个订阅，如果包含相同的集合被忽略，因为它与第一个冲突。

不过，您可以这样做：

服务器：

```
var debugmode = false; //set to true to enable debug/testing mode
Meteor.publish("userData", function () {
    if(debugmode) {
        return Meteor.users.find({}, fields: {'profile': 1}});
    }
    else
    {
        return Meteor.users.find({_id: this.userId},{fields: {'profile': 1}});
    }
}); 
```

客户：

```
Meteor.autosubscribe(function () {
    Meteor.subscribe('userData', null, function() { console.log(Meteor.user()); console.log(Meteor.users.find({}).fetch());});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:44:27.733

发现问题：

在 onCreateUser 函数中，我需要将选项中的配置文件信息添加到用户对象，所以我的函数应该如下所示：

```
Accounts.onCreateUser(function(options, user) {
    if(options.profile.name.length<2)
        throw new Meteor.Error(403, "Please provide a name.");
    if (options.profile)
    user.profile = options.profile;
    return user;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-06T12:33:52.263

这是我正在使用的解决方法，放置在 ~/server/createAccount.js 我遇到的问题是我会在配置文件未定义的情况下出现错误。这似乎通过在创建帐户时创建配置文件来解决问题。

希望这是有用的。在 github 问题评论中找到它，在下面的评论中：

```
// BUGFIX via https://github.com/meteor/meteor/issues/1369 @thedavidmeister
// Adds profile on account creation to prevent errors from profile undefined on the profile page
Accounts.onCreateUser(function(options, user) {
  user.profile = options.profile ? options.profile : {};
  return user;
}); 
```

# spring - cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素'context：property-placeholder'的声明

> ID：14557219
> 
> 赞同：20
> 
> 时间：2013-01-28T07:17:22.747
> 
> 标签：spring

谁能帮我解决以下错误，因为我是春天的新手？

```
cvc-complex-type.2.4.c: The matching wildcard is strict, but no         
declaration can be found for element 'context:property-placeholder'. 
```

我在 applicationContext.xml 中有以下配置：

```
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans       
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"
xmlns:context="http://www.springframework.org/schema/context">

<bean id="dataSource"class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="${jdbc.driverClassName}"/>
<property name="url" value="${jdbc.url}"/>
<property name="username" value="${jdbc.username}"/>
<property name="password" value="${jdbc.password}"/>
</bean>
<context:property-placeholder location="src/jdbc.properties"/> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-28T07:26:17.553

Spring 提供了一堆额外的命名空间，它们提供了做事的快捷方式——比如 tx (transactions)、util (utils)、mvc (spring MVC declarations)：

要使用其中之一，您必须在 XML 文件中设置模式映射。如果这样做了，您将获得基本的代码完成（您的 IDE 可能会提供更多）。.

***在您的声明上下文中没有设置/映射。***

将您的声明更改为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd">

</beans> 
```

如果您愿意，您还可以为内部组件设置自己的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-14T06:50:59.063

如果您使用 Spring >= 3.1，请使用 PropertySourcesPlaceholderConfigurer 而不是旧的。

解决方法：更换

```
<context:property-placeholder location="classpath:sport.properties"/> 
```

经过

`

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
<value>classpath:sport.properties</value>
</property>
</bean> 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-12T22:52:02.333

如果使用 Spring Framework 5.2 或更高版本，您可以使用替代方法从属性文件加载变量：

```
 <bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
        <property name="location">
            <value>classpath:sport.properties</value>
        </property>
    </bean> 
```

因此，您的完整 XML 文件将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
        <property name="location">
            <value>classpath:jdbc.properties</value>
        </property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>
</beans> 
```

它将提供与`context:property-placeholder`

# list - OrientDB - 如何更新记录中的列表条目

> ID：14557220
> 
> 赞同：3
> 
> 时间：2013-01-28T07:17:23.870
> 
> 标签：list, insert-update, orientdb

节点类包含列表类型的属性“OutLinks”。如何更新我正在使用 rest api 的特定节点实例的列表条目。REST URI 为[http://xxxx:2480/command/xxx/sql](http://x.x.x.x.:2480/command/xxx/sql) 帖子正文包含更新节点集 OutLinks = List(#12:1,#12:0) where @rid=#11:0 使用此命令，现有条目被替换。有没有办法插入/追加/删除列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:58:26.763

使用[SQL UPDATE](https://github.com/nuvolabase/orientdb/wiki/SQL-Update)命令，例如：

```
update #11:0 add OutLinks = #12:0
update #11:0 remove OutLinks = #12:0 
```

# php - php脚本扫描父目录，而不是需要php时所在的目录

> ID：14557223
> 
> 赞同：0
> 
> 时间：2013-01-28T07:17:39.283
> 
> 标签：php, arrays, apache, file, require

好的，所以我有一个充满照片的目录。

在那个目录中我有这个脚本：

```
<?php

// These files will be ignored
$excludedFiles = array (
  ''
);

// These file extensions will be ignored
$excludedExtensions = array (
'html',
'htm',
'php',
'css'
);

// Make sure we ignore . and ..
$excludedFiles = array_merge($excludedFiles,array('.','..')); 

// Convert to lower case so we are not case-sensitive
for ($i = 0; isset($excludedFiles[$i]); $i++) $excludedFiles[$i] =  strtolower(ltrim($excludedFiles[$i]));
for ($i = 0; isset($excludedExtensions[$i]); $i++) $excludedExtensions[$i] = strtolower($excludedExtensions[$i]);

// Loop through directory
$count = 0;
if ($handle = opendir('.')) {
while (false !== ($file = readdir($handle))) {
  $extn = explode('.',$file);
  $extn = array_pop($extn);
  // Only echo links for files that don't match our rules
  if (!in_array(strtolower($file),$excludedFiles) && !in_array(strtolower($extn),$excludedExtensions)) {
    $count++;
    print("<a href='#' rel='" . $file . "' class='image'><img src='" . $file . "' class='thumb' border='0'/></a>");
    }
  }
  ;
  closedir($handle);
 }

?> 
```

它为画廊脚本创建一个锚点列表，因此它们的图像不必一个一个地添加，因此它是从该文件和照片的父目录中的脚本调用的，而不是制作一个文件数组在 /gallery 文件夹中，它列出了 favicon（站点根目录中的唯一图像）

有什么想法我可以告诉它在画廊目录中而不是在其被调用的文档所在的站点根目录中创建一个列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:22:21.810

替换`if ($handle = opendir('.')) {`为`if ($handle = opendir('./gallery/')) {`

# c++ - 将字符串标记为字符串向量

> ID：14557224
> 
> 赞同：2
> 
> 时间：2013-01-28T07:17:47.683
> 
> 标签：c++, string, vector, tokenize

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我不能使用 boost（因为我已经看到了许多标记化问题的解决方案）。首先，我将输入的命令放入字符串中。命令示例：

添加（姓名，电话号码）

```
int main()
{
    string line;
    cin >> line;
    cout << "Reservations>>";
    if(line[0] == 'a'){
    }
} 
```

我需要确保一切在语法上都是正确的（他们使用了括号和逗号），我将首先将字符串分解为字符串本身，并将其放在向量中。所以我的第一个问题是：我怎样才能打破由空格分隔的每个部分，以便我可以将它推入向量中？然后我打算将'（'与vector [1]的第一个字符（[0]）的字符串进行比较，并将'，'与vector [1]的[line.length（）]字符串进行比较 - 如何我会去引用位于向量中的字符串中的某些字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:22:14.283

您可以尝试使用[strtok()](http://www.cplusplus.com/reference/cstring/strtok/)。您不能直接在 C++ std::string 上使用 strtok。它需要一个可变的以零结尾的 C 样式字符串，并且没有标准方法可以访问该`std::string`形式的 a 的内容。

有关此的更多信息，请通过[此](https://stackoverflow.com/questions/11628346/c-usage-of-strtok-on-string)

# c# - DataGridViewCheckBoxColumn CellMouseClick

> ID：14557226
> 
> 赞同：0
> 
> 时间：2013-01-28T07:17:51.813
> 
> 标签：c#, winforms, datagridview

我正在使用`DataGridView`包含一`CheckBox`列的 a。当我尝试检索该列的值时，它总是错误的。请让我知道原因。

这是我的代码：

```
private void dataGridViewCrossRef_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
     {
       bool isChecked1 = false;
       isChecked1 = (Boolean)dataGridViewCrossRef[25, e.RowIndex].FormattedValue;
       if (isChecked1)
       {
          //Some code
       }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:31:31.793

由于绑定到 Chekbox 的数据是整数，所以我将代码更改为如下所示并且它有效。

谢谢

私有 void dataGridViewCrossRef_CellContentClick(object sender, DataGridViewCellEventArgs e) { if (e.ColumnIndex == 25) { int CellValue = 0; CellValue = Convert.ToInt16(dataGridViewCrossRef[e.ColumnIndex, e.RowIndex].EditedFormattedValue); 如果（细胞值 == 1）{

```
 }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:31:44.220

试试`CellContentClick Event`

```
 private void dataGridViewCrossRef_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 25)
        {
            bool IsBool = false;
            if (bool.TryParse(dataGridViewCrossRef[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString(), out IsBool))
            {
               //Some code
            }
        }
    } 
```

**编辑**

试试这个，`CellClick Event`你需要声明你`dataTable`的`public`

```
 private void dataGridViewCrossRef_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 25)
        {
            //Find primaykey or something unique from your dataTable   
            DataRow[] Rows = dataTable.Select("Id = '" + dataGridViewCrossRef[0, e.RowIndex].EditedFormattedValue.ToString() + "'");

            Rows[0]["NameOfColumnHasCheckBox"] = !bool.Parse(Rows[0]["NameOfColumnHasCheckBox"].ToString());
        }
    } 
```

# javascript - 将数字转换为单词

> ID：14557231
> 
> 赞同：4
> 
> 时间：2013-01-28T07:18:18.080
> 
> 标签：javascript

我必须将数字值转换为 Javascript 中的单词。例如：如果有 print`110`那么结果应该是`One Hundred ten`.

javascript中是否有任何内置功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T06:01:54.397

尝试这个

```
<html>
<head>
<title>Number Converter</title>
<script type="text/javascript">
var a = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
var b = ['Hundred', 'Thousand', 'Lakh', 'Crore'];
var c_0 = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Ninteen'];
var d   = ['Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

function convertNumToWord(number){
  var c, rm;
  c = 1;
  string = '';
  number == 0 && (string = 'Zero');
  while (number != 0) {
    switch (c) {
      case 1:
        rm = number % 100;
        pass(rm);
        number > 100 && number % 100 != 0 && display('And ');
        number = ~~(number / 100);
        break;
      case 2:
        rm = number % 10;
        if (rm != 0) {
          display(' ');
          display(b[0]);
          display(' ');
          pass(rm);
        }

        number = ~~(number / 10);
        break;
      case 3:
        rm = number % 100;
        if (rm != 0) {
          display(' ');
          display(b[1]);
          display(' ');
          pass(rm);
        }

        number = ~~(number / 100);
        break;
      case 4:
        rm = number % 100;
        if (rm != 0) {
          display(' ');
          display(b[2]);
          display(' ');
          pass(rm);
        }

        number = ~~(number / 100);
        break;
      case 5:
        rm = number % 100;
        if (rm != 0) {
          display(' ');
          display(b[3]);
          display(' ');
          pass(rm);
        }

        number = ~~(number / 100);
    }
    ++c;
  }
  return string;
}

function display(s){
  var t;
  t = string;
  string = s;
  string += t;
}

function pass(number){
  var q, rm;
  number < 10 && display(a[number]);
  number > 9 && number < 20 && display(c_0[number - 10]);
  if (number > 19) {
    rm = number % 10;
    if (rm == 0) {
      q = ~~(number / 10);
      display(d[q - 2]);
    }
     else {
      q = ~~(number / 10);
      display(a[rm]);
      display(' ');
      display(d[q - 2]);
    }
  }
}
</script>
</head>
<body>
<input type="text" id="number"><input type="submit" value="Convert" id="convert">
<div id="converted"></div>
</body>
<script>
document.getElementById("convert").onclick=function() {
  if(document.getElementById("number").value.length > 9) {
    document.getElementById("converted").innerHTML="Cannot convert more than nine digits";
    return;
  }
  convertedVal = convertNumToWord(parseInt(document.getElementById("number").value));
  document.getElementById("converted").innerHTML=convertedVal;
}
</script>
</html> 
```

# android - android中的垃圾收集器

> ID：14557240
> 
> 赞同：0
> 
> 时间：2013-01-28T07:18:55.817
> 
> 标签：android, performance, garbage-collection

android中实现了哪些类型的垃圾收集器？如何评估这些 GC 的性能？在评估中使用（或应该使用）哪些应用程序？

此外，供应商如何决定他们的设备使用哪种 GC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:26:20.123

为了回答您的一个问题，[Dalvik VM](http://en.wikipedia.org/wiki/Dalvik_%28software%29)确实使用了跟踪垃圾收集器，使用[标记和扫描](http://www.brpreiss.com/books/opus5/html/page424.html)方法。

根据[Dalvik 虚拟机架构](http://davidehringer.com/software/android/The_Dalvik_Virtual_Machine.pdf)：

> Dalvik 垃圾收集器中的当前策略是保留标记位，或指示特定对象“可访问”的位，因此不应被垃圾收集，与其他堆内存分开。

也可以看看：

*   [垃圾收集器的源码](https://android.googlesource.com/platform/dalvik/+/master/vm/alloc/MarkSweep.cpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:32:50.950

有关 Android 上的 DVM 和垃圾收集的更多信息（[来源](https://groups.google.com/forum/#!msg/android-ndk/wn0G4DSkNF0/SAUN3SKGp04J)）：

> [每个] 应用程序都有自己的进程，运行自己的虚拟机。因此，如果应用程序正在执行导致它需要执行 GC 的操作，这不会阻塞您自己的进程的 VM。（即使您自己的进程进行了 GC，您也可以轻松地在该进程中运行未附加到 VM 的本机线程，因此不会被 VM 所做的任何事情阻塞。）进程之间的这些类型的交互受到管理几乎完全由内核的调度程序完成，Android 做了很多事情（例如使用后台与前台 cgroup）来让调度程序避免让后台应用程序完成的工作影响前台应用程序的运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:32:37.600

您可以查看[链接](http://dubroy.com/memory_management_for_android_apps.pdf)，它提供了对 android 中的垃圾收集管理的详细了解。

我希望它会帮助你。

谢谢。

# javascript - 在两点之间绘制假想路径并沿该路径打印图像？

> ID：14557242
> 
> 赞同：1
> 
> 时间：2013-01-28T07:19:09.063
> 
> 标签：javascript, jquery, drawing, line, coordinates

Javascript（或jQuery）有没有办法在坐标之间画线（不一定显示那些线），然后沿着这些“路径”重复图像或字母？我在这里说的是直线，没有贝塞尔曲线或任何东西。我认为这似乎没什么大不了的，会试一试，但我想听听其他人对此的看法……比如（虚构代码）：

```
path = point1[x,y], point2[x,y], point3[x,y];
every20pixels-->renderimage('path/to/image') or letter('letter') 
```

我疯了吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:59:34.600

## tl;博士

这是一个 jsFiddle，它可以做我认为你想要的：[点击](http://jsfiddle.net/rDxp3/3/).

## 解释

实际上这很容易，因为您可以通过知道它的 x 坐标和该线所经过的两个点来计算一条线上的任何点：

```
// A line, defined by two coordinates
var s = {x: 0.0, y: 0.0}; // Start
var e = {x: 300.0, y: 100.0}; // End

var distance = (e.x - s.x)
var slope = (e.y - s.y) / distance 
```

一旦你有了斜率，你可以通过简单地将它的 x 坐标与斜率相乘来计算线上的任何“y”：

```
var step = 32; // Calculate y-coordinate every 32 units
for(var x=0; x<distance; x+=step) {
    var y = x * slope;
    console.log(s.x + x, s.y + y);
    // The next snippet goes here ↓
} 
```

有了它，剩下的就是复制图像（或其他 DOM 对象）并将其定位在这些坐标处：

```
image.clone().appendTo(stage).css({
    left: (s.x + x-imageWidth/2) + "px",
    top: (s.y + y-imageHeight/2) + "px"
}) 
```

该`-imageWidth/2`部分用于将图像置于线上的中心。否则，图像的左上角将被定位在那里。此外，此方法依赖于您指定相对于其父容器偏移量的坐标这一事实，该偏移量必须具有该`position: relative`属性。`position: absolute`正如@Eru 的评论所建议的那样，您使用此技术定位的每个元素都必须有一个。

# wamp - WAMP 在安装时显示错误“MSVCR100.dll”丢失

> ID：14557245
> 
> 赞同：188
> 
> 时间：2013-01-28T07:19:15.320
> 
> 标签：wamp, wampserver, msvcr100.dll

当我尝试安装**WAMP**时，弹出以下警报， ![MSVCR100.dll 丢失](../Images/6bde8e565badaff58b05f3401d438829.png)

我点击**OK**，它继续安装 WAMP。当我开始时，WAMP 标志总是“黄色”。它没有变成“绿色”，这意味着有问题。文件到底是什么`MSVCR100.dll`？如何获取并修复此错误？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-01-28T07:28:55.283

该`MSVCR100.dll`文件是可`Microsoft Visual C++`再发行文件的一部分。您可以安装它们，看看这是否能解决您的问题。安装上述内容后，检查您的 wamp 安装是否正确设置。搜索“我的 wamp 图标保持橙色”的帖子。

**2019 年更新**

> Wampserver 3 需要 Visual C++ Redistributable for Visual Studio 2012 Update 4 您可以在以下位置下载它： [https](https://www.microsoft.com/en-us/download/details.aspx?id=30679) ://www.microsoft.com/en-us/download/details.aspx?id=30679 在 那里您可以选择 x86 或 x64 版本取决于您的系统

[WampServer 论坛上的这篇文章](http://forum.wampserver.com/read.php?2,123608)显示了您需要为每个版本的 WampServer 在系统上安装的所有 Microsoft Visual C++ 运行时库。去引用：

> 对于 Windows 32：确保您已安装 Visual C++ 2010 SP1 Redistributable Package x86：VC10 SP1 vcredist_x86.exe
> 
> [http://www.microsoft.com/download/en/details.aspx?id=8328](http://www.microsoft.com/download/en/details.aspx?id=8328)
> 
> 对于 Windows 64：确保您已安装 Visual C++ 2010 SP1 Redistributable Package x64：VC10 SP1 vcredist_x64.exe
> 
> [http://www.microsoft.com/download/en/details.aspx?id=13523](http://www.microsoft.com/download/en/details.aspx?id=13523)
> 
> 没有这个组件 Apache 将无法运行
> 
> 事实上，如果您运行的是 64 位 Windows，最好安装所有 32 位库以及 64 位库。毕竟 64 位窗口运行 64 位和 32 位代码。您可能会发现您将在某个时候安装的某些应用程序/实用程序至少需要一个 32 位运行时。

**更新**

如果你运行的是 WAMPServer 2.5，你还需要 VC11 redist。适用于 Visual Studio 2012 的 Visual C++ 可再发行组件

29.08.2014 与 WAMP 2.5 我同意需要 VC11，安装以前的发行版不是一个坏主意。其他应用程序将需要它。我不确定您是否需要 32 位版本

[http://www.microsoft.com/en-us/download/confirmation.aspx?id=30679](http://www.microsoft.com/en-us/download/confirmation.aspx?id=30679)

**2016 年 8 月 3 日**更新****

 **正如 Fred -ii- 告知我的那样（顺便说一句，非常感谢），wamp 论坛中帖子的链接不再有效。由于我找不到原始链接，您可以尝试[http://forum.wampserver.com/read.php?2,138295](http://forum.wampserver.com/read.php?2,138295)。它有很多信息，可以帮助你。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-05-24T13:12:02.750

对我来说，以上答案都不起作用，所以我添加了对我有用的东西。我首先安装了接受的答案中提到的文件，当它不起作用时，我从[这个](http://www.microsoft.com/en-us/download/details.aspx?id=30679)链接下载了文件并开始工作。

所以我认为还需要 2012 分发（我使用的是 window7 home basic 64 FYI）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-02T19:48:05.753

我通过安装这个解决了这个问题：http: [//www.microsoft.com/en-sg/download/details.aspx?id=30679](http://www.microsoft.com/en-sg/download/details.aspx?id=30679)

确保删除 wampserver 并重新安装

注意：我使用的是 Windows 7 32 位

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-17T18:34:55.623

大多数时候，您必须同时安装**x86**和 x64 ！

**此处的链接：** [x86](http://www.microsoft.com/download/en/details.aspx?id=8328)和[x64](http://www.microsoft.com/download/en/details.aspx?id=13523)

它们是 *Visual C++ 2010 SP1 可再发行包*

（安装 MySQL Workbench 时发生在我身上）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-11T12:12:42.023

我已经尝试了上述所有答案，但仍然出现同样的错误。后来我在 WAMP 论坛中发现了这个，最后我的 WAMP 工作了！！！

如果您在 64 位 Windows 上使用 WampServer 2.5 您将需要此运行时的 32 位和 64 位版本。

微软 Visual C++ 2012 [(www.microsoft.com)](http://www.microsoft.com/en-gb/download/details.aspx?id=30679)

按下载按钮并在以下屏幕上选择 VSU_4\vcredist_x86.exe 按下载按钮并在以下屏幕上选择 VSU_4\vcredist_x64.exe

来源： http: [//forum.wampserver.com/read.php?2,123608](http://forum.wampserver.com/read.php?2,123608)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-05-29T20:38:43.510

今天我在安装了 VS2017 的 Windows 10 机器上安装了 Wamp server 3.0.6 (x64)。我安装了许多 Visual C++ Redistributable Packages，但没有安装 2012 版。然后我安装了它，现在我可以运行 Wamp 服务器了。[您可以在此处](https://www.howisolve.com/msvcr110-dll-is-missing/)找到下载链接。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-30T23:30:32.820

刚跑到这个问题上。[问题与此答案](https://stackoverflow.com/a/23845445/3472757)中的操作系统（Win7 HB x64）相同。我使用了 gaurav 的建议并成功启动了 WAMP。

我想补充一点，**您在使用 2012 版本时不需要**Visual C++ 2010 版本（至少在这种情况下）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-07-28T16:27:11.190

我有同样的问题，但上面的答案都没有奏效。这就是我的工作：

1.  从dll-files.com下载`msvcr110.dll`、`msvcr120.dll`和`msvcp120.dll``vcruntime140.dll`
2.  将它们复制到 System32
3.  卸载 wamp
4.  重新安装 wamp

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-09T17:50:45.927

编辑：由于我再次遇到同样的问题，我注意到我以前的解决方案不起作用；以及此处发布的任何其他解决方案。我正在使用 Windows 7 专业版（64 位）。

这一次，我将“MSVCR100.dll”文件（以 ZIP 格式下载，然后解压到桌面，然后复制）放入 C:\Windows 文件夹[http://www.dll-files.com/dllindex/dll-文件.shtml?msvcr110](http://www.dll-files.com/dllindex/dll-files.shtml?msvcr110)

然后安装 WAMP 服务器，64 位。 [http://sourceforge.net/projects/wampserver/](http://sourceforge.net/projects/wampserver/)

然后，我已经下载并安装了：http: [//www.microsoft.com/en-us/download/confirmation.aspx?id=30679](http://www.microsoft.com/en-us/download/confirmation.aspx?id=30679)

文件名：vcredist_x64.exe

**我只使用命令提示符中的 PHP 对其进行了测试**，因为我在服务器上而不是本地主机上执行其他所有操作。

虽然它适用于我需要使用它

跑步：

> php 给出 Failed loading php_xdebug-2.2.5-5.5-vc11.dll
> 
> php -v -工作！

请让我知道这是否对您有用，或者我需要做些什么来改进修复。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-09-08T16:09:04.237

我已经安装了新的 WAMP 2.5，我有**Windows 8 x64**位。我已经尝试了上述所有解决方案，但它对我不起作用，并且 WAMP 图标保持为**Orange**。对我有用的是：

1.  卸载当前的 WAMP x64 位
2.  安装这个 [http://www.microsoft.com/en-us/download/details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679)
3.  下载并安装适用于 x32 位的 WAMP 服务器。
4.  选择 Firfox 作为浏览器。

我希望我能帮助寻找这个答案的人

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-05-01T02:50:38.757

如果您什么都不懂，请从[http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328)下载 vcredist_x86.exe 。它会解决你的问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-28T07:34:42.580

该工具将检查丢失的软件包，并为您提供软件包的下载链接。.
**如果您使用的是 Windows 64 位，则需要同时安装 x86 和 x64 软件包**
链接以下载该工具：

[下载](http://wampserver.aviatechno.net/files/tools/check_vcredist.exe)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-08-07T16:18:45.863

重新/安装 .NET 框架对我不起作用。一些不太专业的软件，如调优实用程序，会操纵或持续使用 .NET 框架文件。像那个 .dll 。我是在尝试在重新安装之前卸载 .NET 更新时了解到的。

*   在重新安装之前不要忘记从控制面板卸载 wamp。
*   卸载 Windows 的 .NET 更新。（控制面板->卸载一个
*   程序->查看更新）卸载阻止
*   卸载 .NET。成功卸载 .NET
*   框架更新。检查 Windows 更新。安装检查后显示的更新（.NET 框架更新。在 win7x64 下为我更新 3）
*   安装 wamp（对我来说完美无缺）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-01-05T06:22:06.060

步骤 1\. 卸载 WAMP

步骤 2\. 安装最新的[Microsoft Visual C++ 2015 Redistributable Update 3](https://www.microsoft.com/en-us/download/confirmation.aspx?id=53840)

步骤 3.**重启系统**

步骤 4\. 重新安装 WAMP

确保 Skype 未登录。*如果您是新手，您不想知道详细信息 :)*

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-09-18T04:32:57.643

对我来说，即使在安装 VC++ 重新分发后问题也没有解决。我不得不从[https://www.dll-files.com/msvcr110.dll.html](https://www.dll-files.com/msvcr110.dll.html)手动下载 MSVCR110.dll 文件并将其放在 c:/ > windows > system32 中，它工作正常。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-04-09T01:16:04.360

下载了 ezaoutis 说的所有库后，我的**windows 10**上的错误消息仍然存在，阅读**wampserver3.1.3**安装要求，有一个名为**check_vcredist.exe**的验证工具，我运行它并显示所有缺少的库并下载链接，所以我终于可以成功安装它。

[![下图标记了检查工具](../Images/9a3da5fe9fa7cbd3a9f472bd93a5ce8f.png)](https://i.stack.imgur.com/PHn3y.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-04-09T16:16:27.660

要解决此问题，您必须安装所有 Microsoft 重新分发包 2010、2012（x86 和 x64），而不是从控制面板卸载 wampserver 并重新安装 wamp 服务器的新副本，此错误将得到修复

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-01T17:06:07.393

安装只是`vcredist_x64.exe`为`Visual C++ Redistributable for Visual Studio 2012`我解决了这个问题。

[https://www.microsoft.com/en-us/download/details.aspx?id=30679](https://www.microsoft.com/en-us/download/details.aspx?id=30679)

我正在使用 Windows 7 Home Basic 64 位并安装了 WampServer 2.5

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-01-25T13:58:54.360

当我的操作系统是法语时，我遇到了这个问题，我正在用英语安装 Wampserver。

我很确定安装了 Microsoft Redistributable 软件包，因为我已经在使用 Visual Studio。我认为这个问题可能是因为不同语言的路径名称发生了变化。但是，当我用法语安装 wampserver 时，一切正常。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-04T19:11:13.217

有时您必须安装所有版本或其中的一堆。

任何没有发现以上答案有用的人，看看[这里](https://stackoverflow.com/a/51417613/4799599)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-10-02T16:19:50.227

在 Windows 10 上安装 Wamperserver 3 时，它现在会在安装过程中发出一个很好的大警告，告诉您除非您安装许多这些软件包，否则它将无法工作。

在我按照说明操作然后重新启动计算机并重新安装后，它对我有用。

> --- Wampserver 的安装 --- 在进行 Wampserver 的安装之前，您必须确保您的系统上安装了某些元素，否则 Wampserver 将绝对无法运行，另外，安装会出错，您需要删除Wampserver 在安装缺少的元素之前。确保您在可再发行包 VC9、VC10、VC11、VC13、VC14 和 VC15 中处于“最新状态”，请参阅下面的 --- Visual C++ 包。
> 
> --- 不要在现有版本上安装 Wampserver，请遵循以下建议： - 安装新版本的 Wampserver： http: [//forum.wampserver.com/read.php](http://forum.wampserver.com/read.php?2,123606) ?2,123606 如果您在现有版本上安装 Wampserver，它不仅不起作用，而且您可能会丢失现有数据库。
> 
> --- 将 Wampserver 安装在磁盘根目录的文件夹中，例如 C:\wamp 或 D:\wamp。采用不包含空格或变音符号的安装路径；因此，不要安装在 c:\Program Files\ 或 C:\Program Files (x86\ 我们必须在安装、禁用或关闭某些应用程序之前： - 关闭 Skype 或强制不使用端口 80 项目编号 04 Wampserver 故障排除提示: [http://forum.wampserver.com/read.php?2,134915](http://forum.wampserver.com/read.php?2,134915) - 禁用 IIS Wampserver 的第 08 项故障排除提示：http: [//forum.wampserver.com/read.php? 2,134915](http://forum.wampserver.com/read.php?2,134915)如果这些先决条件不具备，请按取消按钮取消安装，然后应用先决条件并重新开始安装。该程序需要管理员权限才能正常运行。它将使用“以管理员身份运行”选项启动。如果您不希望某个程序具有此选项，请取消安装。
> 
> --- Visual C++ 包 --- Wampserver 2.4、2.5 和 3.0 需要 MSVC 运行时库 VC9、VC10、VC11，即使您仅使用 VC11 的 Apache 和 PHP 版本也是如此。PHP 7 和 Apache 2.4.17 或更高版本需要运行时 VC13、VC14
> 
> -- VC9 包 (Visual C++ 2008 SP1) [http://www.microsoft.com/en-us/download/details.aspx?id=5582](http://www.microsoft.com/en-us/download/details.aspx?id=5582) [http://www.microsoft.com/en-us/download/details .aspx?id=2092](http://www.microsoft.com/en-us/download/details.aspx?id=2092)
> 
> -- VC10 包 (Visual C++ 2010 SP1) [http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328) [http://www.microsoft.com/en-us/download/details .aspx?id=13523](http://www.microsoft.com/en-us/download/details.aspx?id=13523)
> 
> -- VC11 Packages (Visual C++ 2012 Update 4) 要下载的两个文件 VSU4\vcredist_x86.exe 和 VSU4\vcredist_x64.exe 在同一页面上：http: [//www.microsoft.com/en-us/download/ details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679) -- VC13 Packages Update 5(Visual C++ 2013) 要下载的两个文件 VSU4\vcredist_x86.exe 和 VSU4\vcredist_x64.exe 在同一页面上：https: [//support.microsoft.com /zh-cn/help/4032938/](https://support.microsoft.com/en-us/help/4032938/)
> 
> -- VC14 包 (Visual C++ 2015 Update 3) 被 VC15 取代 - VC15 可再发行组件 (Visual C++ 2017) [https://aka.ms/vs/15/release/VC_redist.x86.exe](https://aka.ms/vs/15/release/VC_redist.x86.exe) [https://aka.ms/vs /15/release/VC_redist.x64.exe](https://aka.ms/vs/15/release/VC_redist.x64.exe) VC2017 (VC15) 向后兼容 VC2015 (VC14)。这意味着，可以在 VC15 二进制文件中使用 VC14 模块。由于这种兼容性，可再发行组件的版本号是 14.1x.xx，并且在您安装可再发行组件 VC2017 后，VC2015 被删除，但您仍然可以使用 VC14。
> 
> 如果您有 64 位 Windows，则必须同时安装每个 VisualC++ 包的 32 位和 64 位版本，即使您不使用 Wampserver 64 位 要验证是否已安装所有 VC++ 包并使用最新版本，您可以使用该工具： [http](http://wampserver.aviatechno.net/files/tools/check_vcredist.exe) ://wampserver.aviatechno.net/files/tools/check_vcredist.exe ，您将在[http://wampserver.aviatechno.net/](http://wampserver.aviatechno.net/)部分 Visual C++ Redistribuable Packages 中找到所有包 您必须安装每个包“以管理员身份”，因此右键单击该 exe 文件，然后以管理员身份运行。不要使用以前加载的工具。重新下载以确保您使用的是正确的版本。
> 
> 警告：有时 Microsoft 可能会通过断开下载链接而不重定向到新的链接来更新 VC++ 包。如果这种情况发生在您身上，请记住下面的第 20 项将被更新，并且页面[http://wampserver.aviatechno.net/](http://wampserver.aviatechno.net/)部分 Visual C++ Redistribuable Packages 是最新的。这是 Wampserver 的故障排除提示的第 20 项：http: [//forum.wampserver.com/read.php? 2,134915](http://forum.wampserver.com/read.php?2,134915)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-21T11:02:29.353

Visual C++ 2013 Update 5 Redistributable Package 为我解决了问题。下载链接：

[https://support.microsoft.com/en-us/help/3179560/update-for-visual-c-2013-and-visual-c-redistributable-package](https://support.microsoft.com/en-us/help/3179560/update-for-visual-c-2013-and-visual-c-redistributable-package)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-10-14T21:12:20.063

很轻松。我只需要按此顺序安装这两个版本：

[适用于 Visual Studio 2013 的 Visual C++ 可再发行包](https://www.microsoft.com/en-ie/download/details.aspx?id=40784)

[适用于 Visual Studio 2015 的 Visual C++ 可再发行组件](https://www.microsoft.com/en-us/download/details.aspx?id=48145)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-07-11T03:04:50.560

1.  卸载 WAMP

2.  下载适用于 Visual Studio 2012 Update 4 的 Microsoft Visual C++ Redistributable Packages 和适用于 Visual Studio 2015、2017 和 2019 的 Microsoft Visual C++ Redistributable

    [适用于 Visual Studio 2012 更新 4 的 Microsoft Visual C++ 可再发行包](https://www.microsoft.com/en-us/download/details.aspx?id=30679)

    [适用于 Visual Studio 2015、2017 和 2019 x86 的 Microsoft Visual C++ Redistributable](https://aka.ms/vs/16/release/vc_redist.x86.exe)

    [适用于 Visual Studio 2015、2017 和 2019 x64 的 Microsoft Visual C++ Redistributable](https://aka.ms/vs/16/release/vc_redist.x64.exe)

*   *注意：- 如果您使用 64 位操作系统，请下载 x86 和 x64 版本*

3.  为 Visual Studio 2012 Update 4 和 Visual C++ Redistributable for Visual Studio 2015、2017 和 2019 安装 x86 和 x64 版本的 Visual C++ Redistributable Package

[![在此处输入图像描述](../Images/94aa1426a92f96818cdf75a37639139c.png)](https://i.stack.imgur.com/YRhJZ.jpg)

4.  再次安装 WAMP。就是这样。所有的问题都会解决。**

# android - Facebook 登录不适用于 Facebook 应用程序

> ID：14557247
> 
> 赞同：1
> 
> 时间：2013-01-28T07:19:18.083
> 
> 标签：android, facebook-login

我正在`Login with the Facebook`为我的 android 应用程序编码。我正在按照这个[步骤](http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)。

我有登录后没有显示**注销**按钮的问题，它仍然显示我的**登录**按钮。当我将 facebook 应用程序安装到模拟器中时会出现此问题，但没有安装 facebookapp 它正在工作。

![登录按钮](../Images/918f633249f991375df562706cc674c7.png)

**安装 Facebook 应用程序后：**

![在此处输入图像描述](../Images/c33053602a1525c3ec07b057b3dc8ef4.png)

1.  按登录按钮（来自我的应用程序）
2.  如果未登录，则重定向到 facebook 应用程序
3.  登录到 facebook 应用程序后返回我的应用程序并且不显示注销按钮，而是显示登录按钮而不是注销

**无需安装 Facebook 应用程序：** [这按我的意愿工作]

![在此处输入图像描述](../Images/9c38be719984e19cb0af1d5203f9691e.png)

1.  按登录按钮（来自我的应用程序）
2.  重定向到 facebook 页面（我不知道这个页面）
3.  登录成功后回到我的应用程序，并显示注销按钮。

![在此处输入图像描述](../Images/deab3989028802c73ee922fc4354ed5d.png)

现在简而言之，我希望第一个 Senario 的第二个 senario 相同。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:43:22.513

您可能想在 facebook.authorize 时使用 FORCE_DIALOG_AUTH

```
facebook.authorize(HomeTab.this, new String[] {"publish_stream"}, Facebook.FORCE_DIALOG_AUTH,new Facebook.DialogListener() { 
```

如您所见，第三个参数使用 FORCE_DIALOG_AUTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T08:05:17.913

旧但是，在 LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton); 添加

```
authButton.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

# android - android - CursorAdapter 中两个视图布局的 bindView 和 newView

> ID：14557251
> 
> 赞同：3
> 
> 时间：2013-01-28T07:19:27.037
> 
> 标签：android, android-cursoradapter, android-adapter

所以这里的故事：

我想在我的适配器中使用两种布局。所以基本上，我需要在 newView() 中有一个 if 来确定要返回哪个视图，并在 bindView() 中有一个 if 来知道在视图中做什么。这是正确的方法吗？

我在想这样的事情：

```
@Override
public View newView(Context context, Cursor c,
        ViewGroup parent) {     
    if (HEADER == getItemViewType(c.getPosition())){
        return (View) layoutInflater.inflate(R.layout.my_header, null);
    } else {
        return (View) layoutInflater.inflate(R.layout.my_row, null);
    }
} 
```

然后在bindView上：

```
@Override
public void bindView(final View view, final Context context,
        Cursor c) {     
    if (TYPE_HEADER == getItemViewType(c.getPosition())){
        // init and set values here e.g. view.findViewById().setText()
    } else {
        // init and set values here e.g. view.findViewById().setText()
    }
} 
```

我在正确的轨道上吗？因为根据我的日志，newView 中的 c.getPosition() 在 bindView 中的 c.getPosition() 上给出了不同的结果。我实际上只是在考虑重写 getView() 但他们说好的做法是在 CursorAdapter 中重写 newView 和 bindView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T21:06:08.867

除了我对糟糕的数据库设计的评论（关于这个问题）......

我会制作一个包含`header`和布局的`content`布局，然后`header`将两个布局的类型标记为`visiblity="gone"`. 对于需要子视图的行`bindView`和行，使其和内容 subview 。当然，当您想要内容布局时交换它们。`newView``header``View.VISIBLE``View.GONE`

根据我的评论，您可能想要[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html). 我没有关于它的统计或测量，但我怀疑性能会更好。这也意味着您不会依赖将“标题”与您的数据放在同一个表中的 hacky 解决方案。

# django - 上传的图像在 Firefox、iPhone Safari、谷歌浏览器中无法正确显示，但在 Internet Explorer 中有效

> ID：14557260
> 
> 赞同：0
> 
> 时间：2013-01-28T07:20:17.007
> 
> 标签：django, google-app-engine, jinja2, blobstore

我正在按照[这个谷歌教程](https://developers.google.com/appengine/docs/python/blobstore/overview)上传和显示图像。我的测试站点是[http://dnk-test1.appspot.com/testfile](http://dnk-test1.appspot.com/testfile) 一切正常，除了当我点击图片名称时，Firefox、iphone safari、google chrome 浏览器只会写出奇怪的字符，比如

```
����JFIF��XExifMM*�i&�� ����C     ��C��� "�� ���}!1AQa"q2���#B��R��$3br� %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������� ���w!1AQaq"2�B���� #3R�br� $4�%� 
```

当我单击查看 -> 字符编码并选择任何编码时，图像显示正确。

但是，在 IE 上，图像可以正确显示。

我正在使用 Firefox 18.0.1 IE 10

更新 1：在 localhost 上，所有类型的浏览器都可以正确显示图像。

更新 2：添加了 Blob 查看器的屏幕截图 ![在此处输入图像描述](../Images/51c62be81ad01b1223ec869d3af0013a.png)

更新 3：添加代码

视图.py

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        # アップロードされたファイルの情報を取得
        files = self.get_uploads('file')
        blob_info = files[0]

        # redirect メソッドが上手く動かないので、ステータスコードとヘッダを使って
        # ブラウザにリダイレクトを指示
        headers = dict(Location=utils.url_for('myapp/serve', blob_key=blob_info.key()))
        return werkzeug.Response(None, headers=headers, status=302)

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, blob_key):
        blob_key = str(urllib.unquote(blob_key))
        blob_info = blobstore.BlobInfo.get(blob_key)
        return self.send_blob(blob_info)

def testfile(request):
    # アップロード用の URL を作成
    # アップロードに成功したら core/upload エンドポイントへ移動させる
    upload_url = blobstore.create_upload_url(utils.url_for('myapp/upload'))

    # Blobstore に保存されているファイルをすべて取得
    files = blobstore.BlobInfo.all()

    # テンプレートを使って表示
    data = dict(
            upload_url=upload_url,
            files=files)
    return utils.render_to_response('myapp/testfile.html', data) 
```

网址.py

```
Rule('/testfile', endpoint='testtile', view='myapp.views.testfile'),
    Rule('/upload', endpoint='upload', view=('myapp.views.UploadHandler', (), {})),
    Rule('/serve/<blob_key>', endpoint='serve', view=('myapp.views.ServeHandler', (), {})), 
```

测试文件.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Top Page - core</title>
    </head>
    <body>
        <form action="{{ upload_url }}" method="POST" enctype="multipart/form-data">
            Upload File:<input type="file" name="file"><br>
            <input type="submit" name="submit" value="Submit">
        </form>

        <h2>Uploaded Files</h2>
        <ul>
            {% for file in files %}
            <li><a href="{{ url_for('myapp/serve', blob_key=file.key()     ) }}">{{ file.filename }}</a></li>
            {% endfor %}
        </ul>
    </body>
</html> 
```

更新 4：我找到[了这个页面](http://tnakamura.hatenablog.com/entry/20101209/kay_blobstore)，图片上传并且缩略图显示正确，正常图像显示不正确。不同之处在于，当显示缩略图时，`mimetype='image/jpg'`使用的是。因此，我想我需要将此代码添加到某个地方，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:56:00.640

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, blob_key):
        blob_key = str(urllib.unquote(blob_key))
        blob_info = blobstore.BlobInfo.get(blob_key)
        return self.send_blob(blob_info) 
```

应该改为

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, blob_key):
        blob_key = str(urllib.unquote(blob_key))
        blob_info = blobstore.BlobInfo.get(blob_key)
        return self.send_blob(blob_info,'image/jpg') 
```

# java - 在 ArrayList 中搜索员工编号

> ID：14557261
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:20:27.983
> 
> 标签：java, search, arraylist

> **可能重复：**
> [在 java ArrayList 中搜索](https://stackoverflow.com/questions/985229/search-in-java-arraylist)

如果我有一个`ArrayList`员工对象并且每个对象都包含一个 string:`employeeName`和 long: `employeeNumber`。

如何根据员工编号在列表中搜索员工并返回员工对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:29:17.157

沿着这些思路。但最好将对象放在 id 为`HashMap<Long,Employee>`long 的位置，而 Employee 是属于该 id 的员工。

```
public Employee getEmployeeById(long empId){
    for(Employee e : employeeList) {
        if(e.getId() == empId){
            return e;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:25:49.080

我建议使用`Map<int,string>`where int 为您提供员工编号和字符串作为他们的姓名，这样迭代这种类型的集合将变得简单高效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:36:25.227

```
public class emp {
    int id ;
    String name;
    public emp(int i, String name) 
    {
        super();
        this.id = i;
        this.name = name;
    }
}

///////////

public class Test {
            public static void main(String[] args) 
            {
                int givenEmpId = 3;
                ArrayList<emp> empList = new ArrayList<emp>();
                empList.add(new emp(1,"hussain1"));
                empList.add(new emp(2,"hussain2"));
                empList.add(new emp(3,"hussain3"));
                  for ( emp currEmp : empList)  
                        {  
                            if(currEmp.id==givenEmpId)
                            {
                                System.out.println("emp name is===>>"+currEmp.name);
                            }
                        }
            }
} 
```

# rdf - 芝麻 rdfstore 命名图

> ID：14557263
> 
> 赞同：3
> 
> 时间：2013-01-28T07:20:35.363
> 
> 标签：rdf, sesame, rdfstore, named-graphs

*   我正在使用 sesame HTTP api 及其内存 rdf 存储。
*   我在上下文/命名图中加载数据/三元组
*   我使用命名图/上下文进行查询

我有两个问题：

*   在同一个存储库中，一个图节点可以在不同的命名图之间共享吗？

    *   我的用例是我从graph1中过滤数据并将其放入graph2中。那么节点是否共享 b/w graph1 和 graph2？
*   在 GET 操作期间查找命名图是 O(1) 操作吗？或者使用命名图有性能优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:33:31.207

1.  是的，一个图节点可以在不同的命名图之间共享——事实上，在 Sesame 中，任何具有相同 URI 的 RDF 资源都被自动假定为相同，因此在命名图之间自动共享。
2.  这取决于使用的存储类型和索引。在内存存储中，搜索给定特定元素（主语、谓词、宾语或命名图/上下文） `O(1)`的所有语句是可以直接访问的所需语句列表。在本机存储（Sesame 的持久磁盘存储）中，复杂性取决于可用的索引，但平均而言它是`O(log n)`.

# php - 如何将父 iframe 推荐发送到 php

> ID：14557264
> 
> 赞同：0
> 
> 时间：2013-01-28T07:20:36.070
> 
> 标签：php, sql, iframe, referrals

我在我的网站上插入一个按钮并`$refer = $_SERVER['HTTP_REFERER'];`用于获取推荐，但始终显示嵌入 iframe 的 URL，有什么方法可以将原始推荐发送到 iframe？因为我想知道用户是否来自 facebook、twitter 等，但总是向我发送我自己的 URL，我尝试这样的事情：

```
 <script>
    var myval = ""+escape(parent.document.referer);

    $.ajax({
      type: 'POST',
      url: 'downs.php',
      data: {'variable': myval},
    });
    </script> 
```

我知道是错的，但我不知道如何将父推荐发送到我的 php

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T07:50:08.270

```
you can try this js code this will help you to get parent url

var pathname = window.parent.location.href 
```

# php - 如何在发送 AJAX 请求之前清除浏览器缓存

> ID：14557275
> 
> 赞同：0
> 
> 时间：2013-01-28T07:21:41.810
> 
> 标签：php, html, jquery, caching

我已经挣扎了一段时间了。我正在向 PHP 脚本发送 AJAX 请求，该脚本修改服务器上的文件名（特别是图像）并生成文件列表作为 HTML 响应。一切正常，文件按原样重命名，但在浏览器中看不到任何更改，因为已重命名为 2.jpg 的文件 1.jpg 和现在为 1.jpg 的 2.jpg 已经缓存，并且即使它已在服务器上重命名，仍会显示原始图像。

所以我的问题是如何在发送请求之前清除缓存，我尝试手动并通过 $.ajaxSetup 以及各种 php 标头附加时间戳。

我怀疑这些技术不起作用，因为所做的更改仅针对文件名，而不针对 PHP 脚本生成的 HTML 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:46:17.377

你试过这样吗？

```
$.ajax({
       url: url,
       data: inputs + '&ran=' + Math.rand(),
    )}; 
```

或者

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

我希望这能帮到您。

# php - :conditional RegEx 输入一个值

> ID：14557286
> 
> 赞同：0
> 
> 时间：2013-01-28T07:22:06.503
> 
> 标签：php, regex, preg-replace

我不确定它的标题，但是有一个这样的正则表达式：

```
preg_replace('#static\/(.*)(\/|\.[a-zA-Z0-9]{2,4})#', 'path=$1$2'); 
```

它应该匹配`static/path/to/image.jpg`和`static/path/to/dir/`。现在我想如果匹配第二个模式（一个目录）所以用前导斜杠替换它，但如果匹配到一个文件名（第一个模式）替换它没有前导斜杠。

例子：

```
`static/path/to/image.jpg` should be 'path=path/to/image.jpg'
`static/path/to/image.jpg/` should be 'path=path/to/image.jpg'
`static/path/to/dir/` should be 'path=path/to/dir/' 
```

简而言之，`$2`如果等于`/`最后请求的文件，我想被忽略。以为添加`?:`可以解决问题，但我错了。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:12:26.977

假设路径位于 URL 的末尾：

`preg_replace('#static((?:/[^./]*(?=/))*)(/(?:\w+\.\w+)?)/?$#', 'path=$1$2');`

或没有前瞻（更快）：

`preg_replace('#static(/(?:[^./]*/)*)(\w+\.\w+)?/?$#', 'path=$1$2');`

**编辑：**修改了正则表达式，并添加了 OP 的说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:03:00.263

本质上，您只是替换`static/`为`path=`（如果跟随路径名），对吗？

然后这样做：

```
$result = preg_replace(
    '%static/      # Match static/
    (?=            # only if the following text could be matched here:
     \S+           # one or more non-whitespace characters,
     (?:           # followed by
      /            # a slash
     |             # or
      \.\w{2,4}    # a filename extension
     )             # End of alternation.
     (?!\S)        # Make sure that there is no non-space character here
    )              # End of lookahead.%x', 
    'path=', $subject); 
```

# android - Android如何将内容恢复回/data/data

> ID：14557288
> 
> 赞同：0
> 
> 时间：2013-01-28T07:22:15.333
> 
> 标签：android, database, command, command-prompt, database-restore

我正在为有根手机开发一个应用程序，它将备份和恢复所有应用程序及其数据。在我打开该应用程序时将任何应用程序的数据恢复到 /data/data/{packageName} 后，它会崩溃并出现异常android.database.sqlite.SQLiteReadOnlyDatabaseException:由于我已将该应用程序的数据库文件复制到 /data/中，因此**尝试写入只读数据库**数据/{packageName} 目录。

我用来恢复数据的代码：

```
String packageName = app.getPackageName();
File destinationFile = new File("/data/data/"+packageName);
File sourceFile = new File(Environment.getExternalStorageDirectory()+File.separator+"MyBackup"+File.separator+packageName);

String command = "cp -r "+sourceFile.getAbsolutePath()+File.separator+"* " + destinationFile.getAbsolutePath()+File.separator;
try {
    Runtime.getRuntime().exec(new String[]{"su", command});
} catch (IOException e) {
     e.printStackTrace();
} 
```

谁能告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:24:41.270

我认为您还`chown`必须`chmod`在`/data/`.

# iphone - 核心图形 - 使用中点和角度的线

> ID：14557290
> 
> 赞同：2
> 
> 时间：2013-01-28T07:22:28.233
> 
> 标签：iphone, core-graphics

我希望可以使用中心点和角度画一条线。我需要画线才能沿着圆圈移动。但我无法让它工作。我不知道怎么能做到这一点！我尝试使用以下代码将线条旋转指定角度，但它不起作用。因为我还很新，所以我不明白我在哪里犯错了！！[如果我使用下面的代码，这就是它的样子](http://i.stack.imgur.com/vmAoD.png)

```
- (void)drawThumbAtPoint:(CGPoint)sliderButtonCenterPoint inContext:(CGContextRef)context {

//Vertical line
CGPoint newPoint = [self convertPoint:sliderButtonCenterPoint toView:self];
CGFloat angleInRadians = (CGFloat)M_PI/180.0f * currentAngle;
CGFloat distance = 15;
CGPoint point = CGPointMake(newPoint.x + distance * sinf(angleInRadians), newPoint.y + distance * cosf(angleInRadians));

UIGraphicsPushContext(context);
CGContextBeginPath(context);
UIBezierPath *path = [UIBezierPath bezierPath];
path.lineWidth = 10.f;
[path moveToPoint:sliderButtonCenterPoint];
[path addLineToPoint:point];
[[UIColor redColor] set];
[path stroke];
//  CGAffineTransform rot = CGAffineTransformMakeRotation(angleInRadians);
//  [path applyTransform:rot];
UIGraphicsPopContext();
} 
```

和，

```
CGPoint thumbCenterPoint = CGContextGetPathCurrentPoint(context);
[self drawThumbAtPoint:thumbCenterPoint inContext:context]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:21:18.927

`alpha`与x 轴成角度的单位向量是

```
(cos(alpha), sin(alpha)) 
```

现在你要画一条与圆线相切的线，所以它垂直于从圆心到圆线上的点的线。

要获得垂直向量，请将 90º = π/2 添加到角度：

```
(cos(alpha + π/2), sin(alpha + π/2)) = (-sin(alpha), cos(alpha)) 
```

使用基本的三角恒等式。

这（希望）解释了为什么必须将线的端点计算为

```
CGPointMake(newPoint.x - distance * sinf(angleInRadians), newPoint.y + distance * cosf(angleInRadians)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-28T14:46:05.093

**这是Swift 4.1**中的类似解决方案：

```
 // adding progress line view:
    // progress: 360 circle degree <=> 100% progress 
    let currentAngle: CGFloat = (progress * 360 / 100) - 90
    let angleInRadians: CGFloat = currentAngle * CGFloat.pi / 180

    let radius: CGFloat = outerCircle.frame.width / 2 - 1.0
    let lineXPosition = outerCircle.center.x + radius * cos(angleInRadians)
    let lineYPosition = outerCircle.center.y + radius * sin(angleInRadians)

    let progressLineView = UIView(frame: .init(x: lineXPosition, y: lineYPosition, width: 1, height: 1))
    progressLineView.backgroundColor = .clear
    progressLineView.transform = CGAffineTransform(rotationAngle: (progress * 360 / 100) * CGFloat.pi / 180)
    progressLineView.layer.cornerRadius = 1.0

    let progressLineSubView = UIView(frame: .zero)
    progressLineSubView.translatesAutoresizingMaskIntoConstraints = false
    progressLineSubView.backgroundColor = .blue
    progressLineSubView.layer.allowsEdgeAntialiasing = true
    progressLineSubView.layer.cornerRadius = 1.0
    progressLineView.addSubview(progressLineSubView)
    NSLayoutConstraint.activate([
        progressLineSubView.centerXAnchor.constraint(equalTo: progressLineView.centerXAnchor),
        progressLineSubView.centerYAnchor.constraint(equalTo: progressLineView.centerYAnchor),
        progressLineSubView.widthAnchor.constraint(equalToConstant: 2.0),
        progressLineSubView.heightAnchor.constraint(equalToConstant: 8.0)
        ])
    addSubview(progressLineView) 
```

# php - 使用 dev>null & 运行 exec() 命令不起作用，但 dev>null 可以

> ID：14557297
> 
> 赞同：3
> 
> 时间：2013-01-28T07:22:59.560
> 
> 标签：php, exec

我有这个运行良好的 exec 命令，但没有释放浏览器（即存在 php 超时问题，但实际命令继续运行）：

```
exec("/usr/local/php53/bin/php csv.php $file $user > /dev/null"); 
```

当我运行时，`ps auxw`我看到这两个正在运行的进程：

```
sh -c /usr/local/php53/bin/php csv.php /tmp/php9Pwu9e 294  >
/usr/local/php53/bin/php csv.php /tmp/php9Pwu9e 294 
```

但是，当我运行下面的代码时，浏览器立即空闲，但命令不会继续运行：

```
exec("/usr/local/php53/bin/php csv.php $file $user > /dev/null &"); 
```

当我运行时， `ps auxw`我看到一个正在运行的进程在 16 秒后终止（并且似乎很快耗尽了内存并使用了大量的 CPU%）：

```
/usr/local/php53/bin/php csv.php /tmp/php9Pwu9e 294 
```

然后这个过程在没有实际做任何事情的情况下就结束了。不确定＆符号在做什么会导致这种情况。

另外，为什么`sh -c`最后没有＆符号时会出现？我觉得这可能预示着什么，但不知道是什么。

**编辑：**

因为这不断作为答案出现，所以我也尝试过：

```
exec("/usr/local/php53/bin/php csv.php $file $user > /dev/null 2>&1 &"); 
```

这证明了与上述相同的问题。下面的代码会运行，但不会释放浏览器。

```
exec("usr/local/php53/bin/php csv.php $file $user > /dev/null 2>&1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:45:26.457

试试这个

exec("nohup php csv.php $file $user > /dev/null &");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:57:30.833

尝试将输出和错误都重定向到`/dev/null`（或您选择的另一个输出文件，前提是它为运行 Web 服务器的用户设置了写入权限），以及使用 & 号使其成为后台进程，如上所述[PHP 手册用户](http://php.net/manual/en/function.exec.php#101506)说明：

```
<?php

exec("php /var/www/foo.php > /dev/null 2>&1 &"); 
```

刚刚试了一下，它按预期工作：调用脚本立即完成，后台进程一直运行，只要它需要完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:00:35.023

这个问题比我想象的要简单得多。问题是`$file`（这是存储在`/tmp`目录中的上传文件）未找到。我不知道为什么，但我想这与在后台进程可以到达之前被销毁的文件有关。

解决方案是`move_uploaded_file()`将文件保存到永久位置，并使用该文件运行脚本。那行得通。

# mysql - mysql 查询在某些天不能按名称分组

> ID：14557300
> 
> 赞同：0
> 
> 时间：2013-01-28T07:23:13.820
> 
> 标签：mysql

我有一个 mysql 查询，我想按名称分组几天。现在，它只是按名称分组了一天，我不知道问题出在哪里，请您帮忙。

```
SELECT attendance.username,
       attendance.date,
       attendance.time_in,
       attendance.time_out,
       attendance_count.count_time,
       attendance_count.appendix
FROM attendance
LEFT JOIN attendance_count
    ON (attendance.date=attendance_count.date)
        AND (attendance.username = attendance_count.username)
WHERE (STR_TO_DATE(attendance.date, '%m/%d/%Y')
    BETWEEN STR_TO_DATE('01/21/2013', '%m/%d/%Y')
        AND STR_TO_DATE('02/20/2013', '%m/%d/%Y'))
GROUP BY attendance.username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:02:54.020

“几天”是无法理解的。请提供有关它的更多信息。

```
SELECT attendance.username,
       attendance.date,
       attendance.time_in,
       attendance.time_out,
       attendance_count.count_time,
       attendance_count.appendix
FROM attendance
LEFT JOIN attendance_count
    ON (attendance.date=attendance_count.date)
    AND (attendance.username = attendance_count.username)
WHERE (STR_TO_DATE(attendance.date, '%m/%d/%Y')
    BETWEEN STR_TO_DATE('01/21/2013', '%m/%d/%Y')
    AND STR_TO_DATE('02/20/2013', '%m/%d/%Y'))
GROUP BY attendance.username , DAY(attendance.date) 
```

# c# - 从计时器更改 WebBrowser 的标签内容

> ID：14557312
> 
> 赞同：0
> 
> 时间：2013-01-28T07:24:08.577
> 
> 标签：c#, delegates, webbrowser-control

我正在使用**webBrowser 控件**来显示网页。在创建 webBrowser 时，我可以更改预定义标签的值。我的问题是，`timer_tick`我想更改相同的标签值。这是我的代码

```
if (currentlyRunningObject.Equals(webBrowser1))
{
     Application.DoEvents();
     HtmlElement test = webBrowser1.Document.All["test"];
     test.InnerHtml = "mmmmmmmm";
} 
```

在`timer_tick`我做了同样的事情，但是**VS**在完成最后一行执行后停止了调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:06:52.040

计时器的滴答声在线程池线程中触发。您必须使用 webBrowser1[调用](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke%28v=vs.100%29.aspx)任何代码以将其编组到 UI 线程或使用[SynchronizationClass](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext%28v=vs.100%29.aspx)来执行相同的操作。

```
Action a = () => 
{
     HtmlElement test = webBrowser1.Document.All["test"];
     test.InnerHtml = "mmmmmmmm";
};
webBrowser1.Invoke(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:20:33.573

在这里找到解决方案是计时器滴答中的代码

```
webBrowser1.Invoke(new ThreadStart(delegate
                    {
                        Application.DoEvents();
                        HtmlElement token2 = webBrowser1.Document.All["token2"];
                        //MessageBox.Show(token2.InnerHtml);
                        token2.InnerHtml = currentToken;
                    })); 
```

# c++ - 是否可以在没有 RTTI 的情况下使用 Boost Program Options？

> ID：14557313
> 
> 赞同：3
> 
> 时间：2013-01-28T07:24:10.720
> 
> 标签：c++, rtti, boost-program-options, boost-any

我想在我的项目中禁用 RTTI。但是，该项目使用 Boost Program Options，它本身依赖于不支持 -fno-rtti 的 Boost Any。

我想知道是否有任何解决方案可以在没有 RTTI 的情况下使用 Boost Program？通过定义宏还是不使用某些功能？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:14:37.880

答案是不”。Boost.PO 是基于 Boost.Any 的，目前用户无法避免这种依赖。Boost.Any 给出了 Boost.PO 的主要存储结构，因此如果没有 Any 就无法编译 PO 的一些有用部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:15:07.103

答案是“也许”。一些 boost 库将在禁用异常的情况下工作 - 有些则不会。RTTI 也一样。

我建议您查看您感兴趣的特定 boost 库的文档。

例如，Boost.Array 将在禁用异常的情况下工作，但 Boost.Format 不会。

如果您收到无法将 typeid 与 -fno-rtti 一起使用的消息，那可能是在编译需要 RTTI 的 Boost 的某些部分时。发生错误的位置会告诉您（通常）是哪个库。

您可以尝试 BOOST_NO_RTTI 和 BOOST_NO_TYPEID ...

[http://www.boost.org/doc/libs/1_46_1/libs/exception/doc/configuration_macros.html](http://www.boost.org/doc/libs/1_46_1/libs/exception/doc/configuration_macros.html)

# joomla - 如何在 joomla 模板中禁用缓存？

> ID：14557314
> 
> 赞同：1
> 
> 时间：2013-01-28T07:24:11.350
> 
> 标签：joomla

我已将全局配置中的缓存禁用为 System = OFF。全局配置到服务器到 Gzip 页面压缩到 NO。系统缓存的插件管理器 = 禁用。我可以在查看源页面中看到来自缓存文件夹的模板文件，当我去维护以清除缓存（管理面板）并手动清除它并再次加载页面时，它再次清楚地显示模板和widgetkit文件缓存窗口。

有人可以告诉我哪里出错了吗？我正在使用 Yoo Steam 主题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:27:11.743

检查主题设置，可能有他们使用的缓存插件。也禁用所有连接，缩小，gzipping。

转到`Extensions -> Templates manager`并检查模板上的这些设置。

# iphone - iPhone中JSON解析器的问题？

> ID：14557316
> 
> 赞同：0
> 
> 时间：2013-01-28T07:24:12.367
> 
> 标签：iphone, ios, json, parsing, sbjson

JSON 响应像 - {"response":{"Success":"Y","items":[{"userid":"255"}]}}

我试图这样解析：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSString *jsonStr = [[NSString alloc] initWithData:mutaebleData encoding:NSUTF8StringEncoding];
    NSLog(@"JSonSTr : %@", jsonStr);

    SBJSON *json = [[SBJSON alloc]init];

    NSDictionary *dic = (NSDictionary *) [json objectWithString:jsonStr];
    NSDictionary *dic1 = (NSDictionary *) [dic objectForKey:@"response"];
    NSDictionary *dic2 = (NSDictionary *) [dic1 objectForKey:@"Success"];
    NSDictionary *dic3 = (NSDictionary *) [dic1 objectForKey:@"items"];

    NSDictionary *dic4 = (NSDictionary *) [dic3 objectForKey:@"userid"]; // App crash in this line
} 
```

如何获取用户标识值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:27:15.573

这就是问题：

```
 NSDictionary *dic4 = (NSDictionary *) [dic3 objectForKey:@"userid"]; 
```

你应该使用：

```
NSDictionary *dic4 = (NSDictionary *) [[dic3 objectAtIndex:0] objectForKey:@"userid"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:30:40.110

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

NSString *jsonStr = [[NSString alloc] initWithData:mutaebleData encoding:NSUTF8StringEncoding];
NSLog(@"JSonSTr : %@", jsonStr);

SBJSON *json = [[SBJSON alloc]init];

NSDictionary *dic = (NSDictionary *) [json objectWithString:jsonStr];
NSDictionary *dic1 = (NSDictionary *) [dic objectForKey:@"response"];
NSDictionary *dic2 = (NSDictionary *) [dic1 objectForKey:@"Success"];
NSArray *arr3 = (NSArray *) [dic1 objectForKey:@"items"];

NSString *str = [[arr objectAtIndex:0]objectForKey:@"userid"];
NSlog(@"userid ==%@",str);
// NSDictionary *dic4 = (NSDictionary *) [dic3 objectForKey:@"userid"]; // App crash in this line
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:48:22.920

您可以添加 SBJSON 框架文件。并通过解析

```
NSDictionary *responseDict = [response JSONValue];
just parse it as normal dictionary.

NSString *userIDValue=[NSString stringWithFormat:@"%@",[[[[responseDict valueForKey:@"response"]valueForKey:@"items"]objectAtIndex:0]valueForKey:@"userid"]]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T08:00:45.017

```
NSDictionary *dic = (NSDictionary *) [json objectWithString:jsonStr];
 NSDictionary *dic1 = (NSDictionary *) [dic objectForKey:@"response"];
 NSDictionary *dic2 = (NSDictionary *) [dic1 objectForKey:@"Success"];
 NSDictionary *dic3 = (NSDictionary *) [dic1 objectForKey:@"items"];

 for(NSDictionary *str in dic3)
 {
    NSLog(@"str:%@",[str valueForKey:@"userid"]);
 } 
```

# python - 哪个更好在python中测试有效的url

> ID：14557320
> 
> 赞同：1
> 
> 时间：2013-01-28T07:24:26.720
> 
> 标签：python, http-status-code-404, urllib2, httplib

我想检查一个特定的 url 是否存在。

我遇到了两种方法。

网址 = “ [http://www.google.com](http://www.google.com) ”

1.

```
import urllib2
response = urllib2.urlopen(url)
response.code  # check what is the response code 
```

2.

```
import httplib 
conn = httplib.HTTPConnection(url) 
conn.request('HEAD', '/') 
response = conn.getresponse() 
if response.status == 200: # check the status code
    # do something 
```

虽然两者都将解决我的目的，但哪一个是实现此目的的更好方法。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:48:16.943

您可以尝试这些方法，重点是，如果在获取 url 时出现问题，您通常还想处理遇到的错误。

```
In [4]: import urllib2

In [5]: def test(url):
   ...:     try:
   ...:         response = urllib2.urlopen(url)
   ...:     except urllib2.HTTPError as e:
   ...:         return e.code,None
   ...:     return response.code,response

In [6]: test('http://www.google.com')
Out[6]: 
(200,
 <addinfourl at 154469068 whose fp = <socket._fileobject object at 0x92caa2c>>)

In [7]: test('http://www.google.com/foobar')
Out[7]: (404, None) 
```

实际上，您还需要处理`urllib2.URLError`：

```
In [10]: def test(url):
    ...:     try:
    ...:         response = urllib2.urlopen(url)
    ...:     except urllib2.HTTPError as err:
    ...:         return err.code, None
    ...:     except urllib2.URLError as err:
    ...:         return err.reason, None
    ...:     return response.code,response

In [11]: test('http://www.google.foo')
Out[11]: (socket.gaierror(-2, 'Name or service not known'), None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:49:03.277

如果你正确地提出了你的问题，那么这两种方法都不是完美的。

最大的问题是您说“url”，但您只检查方案“http”。但是 URL 可以有不同的方案：

> [ftp://ftp.funet.fi/pub/standards/RFC/rfc959.txt](ftp://ftp.funet.fi/pub/standards/RFC/rfc959.txt)
> 
> 文件：///home/somesh/.bashrc
> 
> [http://www.google.com](http://www.google.com)

“httplib”对这些检查没有用，因为它只能处理“http”方案。另一方面，“urllib2”可以处理我提到的所有方案，但这`response.code`不是你必须检查的。相反，您应该捕获在资源不可用时将引发的异常：`HTTPError`或`URLError`在这些情况下。

# javascript - jQuery 事件按键：回车键

> ID：14557321
> 
> 赞同：2
> 
> 时间：2013-01-28T07:24:33.350
> 
> 标签：javascript, jquery, html

我有一个有值的组合框，我想让用户在`Enter`按下键时选择值。

1.  用户可以通过`Arrow`键导航
2.  选择用户输入`Enter`密钥时的值。

我做了这个：

```
$('#cmb_CIMtrek_DailyshipCo_CustomerName select').bind('keypress', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
     if(code == 13) { //Enter keycode
       //Do something
         alert("Enter key Pressed");
     }
}); 
```

但是当我按键时没有发出警报`Enter`。

可能是什么问题以及如何解决？

最好的祝福。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T07:43:02.577

```
 <select>
    <option value="1">1</option>
    <option value="2">2</option>
 </select>     

 <script> 
 $('select').live('keypress',function(e){
     var p = e.which;
     if(p==13){
         alert('enter was pressed');
     }
 });
 </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:31:40.183

试试这个

```
$('#cmb_CIMtrek_DailyshipCo_CustomerName select').keypress(function(event){

        var keycode = (event.keyCode ? event.keyCode : event.which);
        if(keycode == '13'){
            alert('You pressed a "enter" key in textbox');  
        }
        event.stopPropagation();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:01:35.873

如果您想在用户按下回车时发布表单，您还可以使用默认具有此行为的提交按钮。

如果您不想发布表单但确实有一个提交按钮，这可能会捕获关键事件并且不会传播。因此请删除任何提交按钮。

要将事件限制为对象，请使用：

```
if (e.target == document.getElementById('element-id')) 
```

或jQuery

```
if (this == $('#element-id').get(0)) 
```

您的代码将如下所示：

```
$(document).bind('keypress', function(e) 
    {
    // Use 'this' or 'e.target' (whithout quotes)
    if (this == $('#cmb_CIMtrek_DailyshipCo_CustomerName select').get(0))
        {
        var code = (e.keyCode ? e.keyCode : e.which);
        if(code == 13)
            { //Enter keycode
            //Do something
            alert("Enter key Pressed");
            }
        }
    // Stop the event from triggering anything else
    e.stopPropagation();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-13T12:45:15.063

例如：

```
<!html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<div class="form-group">
    <label for="exampleFormControlSelect1">Bodega</label>
    <select class="form-control" id="exampleFormControlSelect1">
      <option value="despacho">Despacho</option>
      <option value="ventas">Ventas</option>
    </select>
</div>

 <script>
     $('#exampleFormControlSelect1').on('keypress',function(e){
         var p = e.which;
         if(p==13){
             alert('enter was pressed');
         }
     });
 </script>
```

# android - 如何在 Android 中将 PDF 文件转换为文本文件？

> ID：14557325
> 
> 赞同：0
> 
> 时间：2013-01-28T07:24:43.507
> 
> 标签：android

在我的应用程序中，我想将 pdf 文件转换为文本文件，任何人都可以提供帮助。
从 sdcard 读取 pdf 文件并将其转换为文本文件并存储在 sd 卡上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:35:34.537

库和 sdk 集

这可能会帮助你

[http://www.qoppa.com/android/pdfsdk/](http://www.qoppa.com/android/pdfsdk/)

[http://code.google.com/p/droidreader/](http://code.google.com/p/droidreader/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:32:45.807

**从 sd 卡读取 pdf 文件：**

```
Please check your device is any pdf reader application available, I think isn't any.. 
```

只需使用此代码，

```
 private void viewPdf(Uri file) {
            Intent intent;
            intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(file, "application/pdf");
            try {
                startActivity(intent);
            } catch (ActivityNotFoundException e) {
                // No application to view, ask to download one
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("No Application Found");
                builder.setMessage("Download one from Android Market?");
                builder.setPositiveButton("Yes, Please",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                Intent marketIntent = new Intent(Intent.ACTION_VIEW);
                                marketIntent
                                        .setData(Uri
                                                .parse("market://details?id=com.adobe.reader"));
                                startActivity(marketIntent);
                            }
                        });
                builder.setNegativeButton("No, Thanks", null);
                builder.create().show();
            }
        }

If any pdf reader application not available then this code is download pdf reader from android market, But be sure your device has pre-installed **android-market** application. So I think try this on android device, rather then emulator. 
```

**将pdf文件转换为文本文件**

可以将pdf转换为文本文件。如果您的 pdf 文件作为图像，您想使用 OCR 工具。

还有一套解析库和pdf的sdk。您可以查看此 [https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android)。

**将文件存储在 sdcard 上**

```
 btnWriteSDFile.setOnClickListener(new OnClickListener() 
    {
    public void onClick(View v)
    {       

        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter =new OutputStreamWriter(fOut);
            myOutWriter.append(txtData.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(v.getContext(),"Done writing SD 'mysdfile.txt'", Toast.LENGTH_SHORT).show();
            txtData.setText("");
        } 
        catch (Exception e) 
        {
            Toast.makeText(v.getContext(), e.getMessage(),Toast.LENGTH_SHORT).show();
        }
    }

    }); 

btnReadSDFile.setOnClickListener(new OnClickListener()
        {

        public void onClick(View v) 
        {

        try {

            File myFile = new File("/sdcard/mysdfile.txt");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));
            String aDataRow = "";
            String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) 
            {
                aBuffer += aDataRow ;
            }
            txtData.setText(aBuffer);
            myReader.close();
            Toast.makeText(v.getContext(),"Done reading SD 'mysdfile.txt'",Toast.LENGTH_SHORT).show();
        } 
        catch (Exception e)
        {
            Toast.makeText(v.getContext(), e.getMessage(),Toast.LENGTH_SHORT).show();
        }
        }
        }); 
```

除了这个，还要在 Android.Manifest 中写下这个权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# sql - SQL Server Select Case 语句在两列中有两个不同的值

> ID：14557326
> 
> 赞同：0
> 
> 时间：2013-01-28T07:25:00.327
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试做一个***Join***。

来自具有产品信息的 ***Items 表****，如ItemID、UpcCode、Facing、ItemNameArabic、ShelfCapacity，*除*SERVICETYPE之外的所有内容*

加入具有*UpcCode*和*ServiceType的表***Schedule 。**

 **正如您在图片中看到的，几乎相同的数据有两行，除了一个声明*ServiceType*（**VMF**或**SRR**）

我想要的是行数应该减少。如果你参考图片。 *NESCAFE GOLD 50G*重复两次。一次用于 VMF 和 SRR。我只希望它通过使用下面的任何一种方法出现一次

要么就像 2 列 [布尔列]

a) VMF 列 [如果值为 VMF，则为“是”或否则为“否”]

b) SRR 列 [如果值为 SRR，则为“是”或否则为“否”]

**或者**

一列[**服务类型**]

它在哪里检查它是否有 SRR，只有 SRR 出现，否则 Vmf 出现

在上述任何期望的结果中都会减少我的行数

谢谢你

![在此处输入图像描述](../Images/b2e195fc57435f4ea0bf13a3c829c838.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:04:54.350

```
SELECT  case when vmf is null then 0 else 1 end as vmf, 
case when srr is null then 0 else 1 end as srr, 
UpcCode,date, StoreID
FROM
(SELECT itemid,items.UpcCode, ServiceType, date, ROW_NUMBER() OVER (ORDER BY servicetype) AS ROWNUMBER, s.ID as StoreID
           FROM Items join Schedule on Items.upccode= schedule.upccode
) r
PIVOT
(
max (r.rownumber)
FOR r.servicetype IN( [vmf],[srr])
) AS pvt 
```

我要感谢[@nestor](https://stackoverflow.com/users/122732/nestor)对[链接的精彩回答](https://stackoverflow.com/questions/1768586/sql-convert-rows-to-columns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:15:05.907

通过仅处理**ServiceType列，您将不会为每个****ItemName**获得 1 行。

 **查看您的附件：您在其他列中有不同的数据，例如**Facing**和**ShelfCapacity**。

如果您想为每个项目名称获得 1 行，您有两种选择：

1.  从查询中删除不同的列。
2.  **列表项将所有**不同的数据透视到列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:41:13.297

我想你可以尝试使用 Case 语句更改 Select 语句中的 ServiceType

```
 SELECT  ItemId,....., ServiceType =
          CASE ServiceTypes
             WHEN 'VMF' THEN 'True'
             WHEN 'SRR' THEN 'False'
             ELSE ''
          END, InLimit, IpConcantenated
        from ....
        where ... 
```

如果你想重复该列，你可以反刍两次

```
 SELECT  ItemId,.....,
          ServiceTypeVMF =
          CASE ServiceType
             WHEN 'VMF' THEN 'True'
             WHEN 'SRR' THEN 'False'
             ELSE ''
          END, 
          ServiceTypeSRR =
          CASE ServiceType
             WHEN 'VMF' THEN 'False'
             WHEN 'SRR' THEN 'True'
             ELSE ''
          END, 
          InLimit,
          IpConcantenated
        from ....
        where ... 
```

好吧，前面的case语句会获取你的多行，但我认为如果你想将行转换为列，假设你提到的只有2行'VMF'和'SNR'，这应该是你的sql语句

```
with cte as
(select ItemID, Upccode, ..............,
  row_number() over(partition by ItemID, Upccode order by ServiceType) As rn
  ,ServiceType
  ,MinLimit
  ,IsContracted     
from Items)
select ItemID, UpcCode, 
  max(case when rn = 1 then ServiceType end) as ServiceType1,
  max(case when rn = 2 then ServiceType end) as ServiceType2,
  ,MinLimit
  ,IsContracted     
from cte
group by ItemId, UpcCode,.........,MinLimit,IsContracted; 
```****

# android - 从安卓相机中提取EXIF数据

> ID：14557330
> 
> 赞同：1
> 
> 时间：2013-01-28T07:25:24.637
> 
> 标签：android, image-processing, android-camera, exif

我正在编写一个用于检测植物叶斑病的安卓应用程序。所以我必须给受影响的叶子拍照。所以在拍照时，我必须在适当的距离和适当的亮度和对比度内拍照。

因此，在拍照时，我必须在相机预览屏幕上显示亮度级别和方向。那么是否可以在相机预览中显示此类信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:42:10.610

看看[Android 的 Camera App 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/camera/ui/IndicatorControlContainer.java#IndicatorControlContainer)。它具有预览屏幕上的所有控件。

捕获该图像*后*， EXIF 很有用。我怀疑它有亮度/对比度信息。

```
 ExifInterface exif = new ExifInterface("<file>");
        exif.getAttribute(ExifInterface.TAG_WHITE_BALANCE); 
```

# android - 如何在Android中停止处理程序

> ID：14557333
> 
> 赞同：15
> 
> 时间：2013-01-28T07:25:35.197
> 
> 标签：android, handler, runnable

在我的应用程序中，我使用 Gridview 创建了一个日历，在该 Gridview 中，我在 Imageview 的帮助下显示日期和一些事件的可用性，为此我创建了一个处理程序。

现在我想停止处理程序。

**MainActivity.java**

```
// inside oncreate

Handler handler = new Handler();
refreshCalendar();

// outside oncreate

public void refreshCalendar() { 
    calAdapter.refreshDays();
    calAdapter.notifyDataSetChanged();
    handler.post(calendarUpdater);
    calTitle.setText(android.text.format.DateFormat.format("MMMM yyyy", cal));
}
public Runnable calendarUpdater = new Runnable() {

    @Override
    public void run() {
        items.clear();
        allData = new ArrayList<HashMap<String,String>>();
        allData.clear();
        allData = db.showAllEvents();

        String currentDate = (String)android.text.format.DateFormat.format("MM/yyyy", cal);
        for(int i=0; i<allData.size(); i++)
        {
            String date[] = allData.get(i).get("date").split("/");
            String md[] = currentDate.split("/");
            if(date[1].equals(md[0]) && date[2].equals(md[1]))
            {
                items.add(date[0]);
                System.out.println("dates: "+date[0]);
            }
        }
        calAdapter.setItems(items);
        calAdapter.notifyDataSetChanged();
    }
}; 
```

请告诉我应该如何以及在何处禁用此线程。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T07:29:57.917

您可以使用它来停止该可运行

```
handler.removeCallbacks(calendarUpdater); 
```

**removeCallbacks(Runnable r)**：删除`Runnable r`消息队列中所有待处理的帖子。

**编辑**

你可以像这样组织你的代码

在你`onCreate()`的`MainActivity.java`

```
Handler handler = new Handler();
refreshCalendar()

//outside  oncreate 

public void refreshCalendar() { 
    calAdapter.refreshDays();
    calAdapter.notifyDataSetChanged();
    startRepeatingTask();
    calTitle.setText(android.text.format.DateFormat.format("MMMM yyyy", cal));
}

public Runnable calendarUpdater = new Runnable() {

    @Override
    public void run() {
        items.clear();
        allData = new ArrayList<HashMap<String,String>>();
        allData.clear();
        allData = db.showAllEvents();

        String currentDate = (String)android.text.format.DateFormat.format("MM/yyyy", cal);
        for(int i=0; i<allData.size(); i++)
        {
            String date[] = allData.get(i).get("date").split("/");
            String md[] = currentDate.split("/");
            if(date[1].equals(md[0]) && date[2].equals(md[1]))
            {
                items.add(date[0]);
                System.out.println("dates: "+date[0]);
            }
        }
        calAdapter.setItems(items);
        calAdapter.notifyDataSetChanged();
        handler.postDelayed(calendarUpdater,5000); // 5 seconds
    }
};

void startRepeatingTask()
{
    calendarUpdater.run(); 
}

void stopRepeatingTask()
{
    handler.removeCallbacks(calendarUpdater);
} 
```

现在您只需致电`startRepeatingTask()`发布消息并停止使用`stopRepeatingTask()`

继承自以下链接

[重复一个有时间延迟的任务？](https://stackoverflow.com/questions/6242268/repeat-a-task-with-a-time-delay)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T07:30:14.987

试试下面的线，

> handler.removeMessages(0);

`what`使用消息队列中的代码删除任何待处理的消息帖子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-28T07:29:27.157

处理程序没有任何东西可以*停止*或*启动*。它只是将消息和 Runnables 发布到线程队列的网关。在您的情况下，您发布了一个 Runnable，它将在 Handler 的线程上运行。你必须停止那个 Runnable。因此，请检查该`for`循环以打破它。

您也可以使用[`removeCallbacks(Runnable r)`](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)on`Handler`取消已发布`Runnable`的。但这不会删除那些`Runnable`已经在运行的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-23T15:06:38.937

你应该试试这个`onStop()`：

```
handler.removeCallbacksAndMessages(calendarUpdater); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-22T11:41:41.097

使处理程序成为一个字段。然后在您的活动中，覆盖 onStop 方法并停止处理程序回调消息，如下所示：

```
@Override
    protected void onStop() {
        super.onStop();
        handler.removeCallbacks(calendarUpdater);
    } 
```

# sql-server - 更改 sql server 2008 r2 中的列排序规则，土耳其语字母

> ID：14557335
> 
> 赞同：0
> 
> 时间：2013-01-28T07:25:42.190
> 
> 标签：sql-server, sql-server-2008-r2, collation

我们将更改现有数据库和列的排序规则。我们使用两个不同的排序规则Turkish_CI_AS、SQL_Latin1_General_CP1254_CS_AS，我们将使用SQL_Latin1_General_CP1_CI_AS。

我想知道新排序规则是否支持土耳其语特殊字母？那么，像ç、ı、ğ或ü这样的字母会变成不同的字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:00:06.007

排序规则与字符编码不同。更改排序规则只会更改字符排序的比较规则，**而不是**它们在数据库中的表示方式。[但是，根据Collat​​ion and Code Page Architecture](http://msdn.microsoft.com/en-us/library/ms186356%28v=sql.105%29.aspx)中的表格，客户端驱动程序将数据的排序规则用作将**非 unicode**字符映射到特定代码页的提示。

因此**，如果**您的列是 VARCHAR 或 CHAR 类型，那么数据*将*（显然）改变，因为以前在[CP 1254](http://en.wikipedia.org/wiki/Windows-1254)中的字符将被解释为[CP 850](http://en.wikipedia.org/wiki/Code_page_850)中的字符。如此`ç (\231)`将成为`þ (\231)`等等。严格来说，您*可以*将客户端中的数据重新解释为您想要的任何代码页，但实际上这是不可行的，并且需要大量低级（即驱动程序）知识。

但是**，如果**您的列是 NVARCHAR 或 NCHAR 则编码不会改变，因为字符将被[UCS-2LE](http://en.wikipedia.org/wiki/UTF-16)编码和操作（[`ç \u00e7`](http://www.unicode.org/charts/PDF/U0080.pdf)将保持不变`ç \u00e7`）。唯一会改变的是比较和排序规则（这会影响[著名的土耳其排序规则 dotted 和 dotless I/i 比较规则](http://www.i18nguy.com/unicode/turkish-i18n.html)）。

# c++ - 为什么Excel VBA中调用的exe不输出文件？

> ID：14557345
> 
> 赞同：1
> 
> 时间：2013-01-28T07:26:24.160
> 
> 标签：c++, vba, file-io, excel

所以我有一个启用宏的 Excel/VBA 工作簿，其中有一个按钮，它写入一个 .txt 文件，然后在同一目录中调用一个 .exe。.exe 是用 C++ 编写的，***应该***输出另一个文件。

我遇到的问题是，由于某种原因，当 Excel 工作簿调用 C++ .exe 时，可执行文件可以很好地处理来自 .txt 的信息，但输出文件从未出现过。但是，如果我有工作簿，只需制作 .txt 文件，然后我自己执行 C++ 程序，那么程序就会正确输出文件。

似乎从 Excel/VBA 工作簿调用 .exe 导致 .exe 不输出文件。

这是 Excel/VBA 代码

```
Open (ActiveWorkbook.Path & "\excel.txt") For Output As #1
Print #1, MyString
Close #1
ActiveWorkbook.FollowHyperlink (ActiveWorkbook.Path & "\MyProgram.exe"), 
NewWindow:=True 
```

并且 C++ 被拆分为多个文件，但可能导致问题的关键部分如下

```
ofstream OutputFile;
int Sequence[12];
...
...
OutputFile.open("Output.solution");
for (int i=1;i<12;i++)
    OutputFile << Int_to_String(Sequence[i]) << " ";
OutputFile.close(); 
```

那么，当从 Excel VBA 调用时，如何让 C++ 可执行文件输出“Output.solution”文件？只是要清楚 - 如果我单独运行 C++ 程序，它**会**输出文件。

编辑：当单独执行 .exe 时，正确的信息被放入同一目录中的“Output.solution”文件中，但是当从 Excel/VBA 调用时，.exe 反而将一个**空**的“Output.solution”放入 My文档文件夹。

从 Excel/VBA 调用时，如何使该文件重新出现在原始目录中？以及如何确保它实际上会像在外部 excel 中调用时那样用信息填充文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:29:10.337

您*确定*您当前的目录是您认为的那样吗？

可能是它位于您的工作簿路径之外的某个位置，在这种情况下，输出文件将在那里而不是您期望的位置创建。

检查这一点的最简单方法是在没有路径的情况下执行 C++ 程序：

```
ActiveWorkbook.FollowHyperlink ("MyProgram.exe"), NewWindow:=True 
```

看看它是否抱怨找不到可执行文件。

另一种方法是使用已知位置（临时）作为输出文件：

```
OutputFile.open("c:\\knowndir\\Output.solution"); 
```

并检查它是否已创建。如果是，那么您的可执行文件没有任何问题，您只是位于与您的想法不同的目录中。

此外，在整个磁盘中搜索该`Output.solution`文件。如果您位于创建文件的其他目录*中*。

如果事实证明这是问题所在，最简单的解决方案可能是在运行可执行文件之前更改目录。VBA 有一个用于此目的的[`chdir`命令。](http://www.techonthenet.com/excel/formulas/chdir.php)之后您可能需要根据需要将其更改回来，您可以使用`curdir`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:29:23.863

您最好的选择是使用像 SysInternal 的 Process Monitor 这样的工具来查看文件写入是否正在发生，如果没有，为什么不发生。

我的猜测是，您可能会遇到在与您期望它运行的目录不同的目录中运行的可执行文件。尝试输出到一个绝对位置（或先调用 SetCurrentDirectory），看看这是否有帮助。

# c# - 无法将 UTF-8 格式的文本从 XML 文件加载到文本框（C#）

> ID：14557346
> 
> 赞同：0
> 
> 时间：2013-01-28T07:26:25.747
> 
> 标签：c#, xml, unicode, encoding, utf-8

我有一个编码为 UTF-8 的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

有一个节点嵌入了 Unicode - 以保留法语（和其他）字符。

```
<author>Fr\u00e9d\u00e9ric</author> 
```

我想将此格式化文本加载到文本框中并按预期显示文本，即 Frédéric

我正在使用以下内容加载文件，其他一切都按预期工作，只是没有转换。

```
System.Xml.XmlReader Reader;

Reader = System.Xml.XmlReader.Create(new StreamReader(Filename, Encoding.GetEncoding("UTF-8")));

XMLFile = XDocument.Load(Reader); 
```

我用来实际提取节点信息的行是：

```
var classes = XMLFile.Root.Elements("class").Select(x => x); 
```

这很棒，让我可以完全根据需要提取信息。

只是这个法语 (UTF-8) 文本的格式没有按我的预期工作。我做了一些研究，并抓住了另外两个功能来帮助：

```
private string Decode(string Encoded)
{
    System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
    Byte[] Message = UTF8.GetBytes(Encoded);

    return UTF8.GetString(Message);
}

private string Encode(string Original)
{
    System.Text.ASCIIEncoding ASCII = new System.Text.ASCIIEncoding();
    Byte[] Message = ASCII.GetBytes(Original);

    return ASCII.GetString(Message);
} 
```

这些似乎都没有任何区别。我在文本框中得到的只是`Fr\\u00e9d\\u00e9ric`.

我错过了什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:52:04.957

`\u00e9`是 C# 语法，`&#233;`而是在 XML 文件中使用。

但是，当您为 XML 文件指定 UTF-8 时，如果您的编辑器将文件正确编码为 UTF-8，则无需使用任何类型的转义，但您可以简单地键入您想要的字符。例如 Visual Studio：文件/高级保存选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T10:33:58.530

好的，这就是我最终要做的：

```
 string Filename = "";
        string Author = "";
        XDocument XMLFile;
        System.Xml.XmlReader Reader;

        Reader = System.Xml.XmlReader.Create(new StreamReader(Filename, Encoding.GetEncoding("UTF-8")));
        XMLFile = XDocument.Load(Reader);

        if (XMLFile.Root.Element("author") != null)
            Author = Decode(XMLFile.Root.Element("author").Value); 
```

而魔法发生的地方......

```
 private string Decode(string UnicodeString)
    {
        Regex DECODING_REGEX = new Regex(@"\\u(?<Value>[a-fA-F0-9]{4})", RegexOptions.Compiled);
        string PLACEHOLDER = @"#!#";

        return DECODING_REGEX.Replace(UnicodeString.Replace(@"\\", PLACEHOLDER),
        m =>
        {
            return ((char)int.Parse(m.Groups["Value"].Value, NumberStyles.HexNumber)).ToString();
        })
        .Replace(PLACEHOLDER, @"\\");

    } 
```

# automation - 以依赖关系图的形式查看 Autosys 作业状态

> ID：14557348
> 
> 赞同：2
> 
> 时间：2013-01-28T07:26:33.943
> 
> 标签：automation, ca, autosys, workload

是否有任何工具可以将 Autosys（又名：CA Workload Automation）组件显示为显示作业/框之间依赖关系的图表？我听说过依赖关系图，但它似乎没有显示作业的执行状态。是否有任何其他工具、CA 或第三方？

谢谢安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:09:11.570

你看过 AutoSys 的 iXp GUI 吗？我已经使用了它，它非常好，因为它在列表中显示了依赖关系以及执行状态，它还包含一个概览图。

# python - Wrapper Classes：为 C 项目创建 python 包装器

> ID：14557355
> 
> 赞同：3
> 
> 时间：2013-01-28T07:26:57.737
> 
> 标签：python, c, wrapper

我是 python 编程的新手，但是用 C 编程。我正在开发一个名为 EtherDogs 的项目，它是一个网络数据包分析器。如何为项目编写 python 包装器？

如果我必须为它做一个 C++ 包装器，这并不难，但我如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T07:39:25.367

您应该尝试像[SWIG](http://www.swig.org/)这样的包装器生成器。手工编写胶水代码是重复和无聊的。为什么不让计算机为您完成简单的部分？

SWIG 将接收您的源文件和（最小）接口规范。它将生成 Python 代理类和 C/C++ 代码。您将 C/C++ 代码编译成 Python 扩展库，然后像使用纯 Python 库一样使用它。在后台，代理类 SWIG 生成将 Python 类型转换为/从对原始 C 函数的调用的句柄。

作为额外的好处，包装器生成器（包括 SWIG）通常可以为许多不同的高级语言创建绑定，而您只需很少或不需要额外的努力。

# django - django 中原始更新查询的问题

> ID：14557356
> 
> 赞同：0
> 
> 时间：2013-01-28T07:27:00.167
> 
> 标签：django, django-views, sql-update

我在我的项目中使用原始更新查询，我必须用一些动态的值更新一个列，该值来自一个函数，它存储在一个变量中。但是当我运行以下更新查询时，我收到一个错误：

```
UPDATE shop_cartitem SET total_price =update_amt WHERE cart_id = %s", [cart_abj.id] 
```

我的错误**1054，“'字段列表'中的未知列 'update_amt'”）**

但是我使用静态值运行，`UPDATE shop_cartitem SET total_price =100 WHERE cart_id = %s", [cart_abj.id]` 然后它可以正确执行。

所以请告诉我，我可以使用动态变量运行此更新查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:32:51.257

它应该是

```
"UPDATE shop_cartitem SET total_price = %s WHERE cart_id = %s" % (update_amt, cart_abj.id) 
```

# macos - Cocoa：识别正在拖动的内容 onMouseDrag

> ID：14557359
> 
> 赞同：0
> 
> 时间：2013-01-28T07:27:07.237
> 
> 标签：macos, cocoa, nswindow, accessibility-api

有没有办法确定在 onMouseDrag 事件期间拖动了什么？具体来说，我想知道是否正在拖动窗口。

我尝试了以下方法： Accessibility API：存储活动窗口的初始位置，在拖动和比较值期间再次查询窗口位置。这种方法的问题是 Accessibility API 不会更新窗口的位置，直到鼠标停止移动（仍然按下主鼠标按钮）。当鼠标在短暂停止后再次开始拖动时，它会提供更新的位置。

将 NSWindowDelegate 附加到活动窗口：我对此很陌生，所以我不知道找到焦点/活动窗口的 NSWindow 的方法。

提前致谢！

更新：我使用 Accessibility API 获取活动窗口并附加 AXObserverRef 以获取 kAXMovedNotification。我使用 CFRunLoopAddSource 将此观察者添加到运行循环中。结果是通知的回调排队并仅在我停止拖动窗口时触发多次调用。有没有办法让回调立即触发而不像这样排队，这样我就可以在拖动窗口时运行一些代码，而不是在拖动停止时运行一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:20:07.183

窗口的状态在您移动时不会更新，但您可以知道它何时开始被拖动以及何时停止被拖动。

如果您为您的窗口设置了一个符合 NSWindowDelegate 协议的委托，您将能够在使用 windowWillMove: 拖动窗口时收到通知，并在您使用 windowDidMove: 停止拖动或释放鼠标按钮时收到通知。

如果你想知道哪个窗口被拖动，这两种方法都会收到一个名为 notification 的 NSNotification 对象，你可以使用 [notification object] 或 notification.object 检索窗口。

# postgresql - 合并 POstgreSQL 9.1 hstore 列中的现有列

> ID：14557363
> 
> 赞同：1
> 
> 时间：2013-01-28T07:27:16.067
> 
> 标签：postgresql, hstore

我有一个 PostgreSQL 9.1 数据库表（我们称之为 MyTable），如下所示：

```
 gid | name | address | phone | colA | colB | colC | colD
------------------------------------------------------------
     |      |         |       |      |       |      | 
```

我在这个数据库 hstore 中启用了：

```
 CREATE EXTENSION hstore; 
```

现在，我想创建一个 hstore 列 (colH)，其中存储列 colA colB colC colD，键为它们的名称和值，它们的值。

```
ALTER TABLE MyTable ADD COLUMN colH hstore; 
```

现在，我如何在 hstore 列中插入值？我认为 INSERT 会有所帮助，但我不知道该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:32:34.407

插入用于创建新*行*，而不是更改现有行的列。

`update`添加 hstore 列后需要使用：

```
update mytable
   set colh = hstore('cola', cola)||hstore('colb', colb)||hstore('colc', colc)||hstore('cold', cold); 
```

或 - 稍微紧凑：

```
update mytable
    set colh = hstore(array['cola','colb','colc','cold'], array[cola,colb,colc,cold]); 
```

这假设 cola、colb、colc 和 cold 是 type`text`或 varchar。如果不是，您需要正确地投射它们。

之后，您可以删除不再需要的列。

# html - 有没有办法根据当前位置上升一定数量的目录？

> ID：14557367
> 
> 赞同：0
> 
> 时间：2013-01-28T07:27:31.387
> 
> 标签：html, css, jekyll

我正在尝试在我的网站上实现 Jekyll，我很难为我的图像设置路径，因为我不知道如何分配不同的路径，因为每个帖子的永久链接比主页深一个文件夹。我怎样才能使我的图像同时显示在主页和它们的各个页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:02:33.470

为您的图像使用绝对路径：

```
<img src="/image_folder/image.jpg" /> 
```

这样，HTML 文件在层次结构中的位置无关紧要，因为图像始终相对于根文件夹是永久的。

# php - str_replace , / 不工作

> ID：14557371
> 
> 赞同：-4
> 
> 时间：2013-01-28T07:27:47.970
> 
> 标签：php, string, str-replace

我需要`\`在一个字符串中找到。

**例子**

```
$replacevalue = "%20";
$area = "test\abc.htm";
$valuetoreplace = "\";
$area = str_replace($valuetoreplace,$replacevalue, $area ); 
```

但是，如果我做同样的事情，页面似乎进入了一个循环或类似的`/` 东西，没有问题，请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:31:10.853

你需要加倍你`\`的 s 因为它是字符串的转义字符......所以：

```
% php
<?php
$area = str_replace("\\","",'test\abc.htm');
echo $area."\n";
?> 
```

产量...`testabc.htm`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:33:39.647

尝试这个：

```
$replacevalue           =   "%20";
$area               =   "test\abc.htm";

$valuetoreplace     =   "\\";
$area               =   str_replace($valuetoreplace,$replacevalue, $area ); 
```

[或者这篇文章](https://stackoverflow.com/questions/2482637/replacing-backslash-with-another-symbol-in-php)中有另一个解决方案

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T07:31:39.773

valuetoreplace 应该是“\\”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T07:30:36.340

好吧，“\”这个字符是一个转义字符，所以编译器将它称为转义而不是“\”，只需添加另一个，这样它就会自行转义“\”，你的代码就可以工作了

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T07:30:48.887

换行：

```
$valuetoreplace     =   "\"; 
```

至

```
$valuetoreplace     =   "\\"; 
```

阅读有关[转义](http://php.net/manual/en/language.types.string.php)字符的更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T07:53:36.160

'\' 是一个特殊字符添加一个双精度`\\`来转义它

# regex - 将 http 重定向到 https（仅前端而非管理面板）

> ID：14557373
> 
> 赞同：0
> 
> 时间：2013-01-28T07:28:03.980
> 
> 标签：regex, .htaccess, ssl, opencart

我为 opencart 安装了 SSL，但 https 只显示在 ac 登录、结帐页面等（我知道它是默认行为），我想在所有前端页面上显示它（我知道它可能会减慢网站速度，但这不是必需的，但我的客户想要它在所有页面上）。所以我在根目录的 .htaccess 文件中尝试了这段代码

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这确实有效，但它强制 mysite/admin 也使用 https 并且出于奇怪的原因，如果使用此代码，我将无法登录到我的管理员。

我正在寻找的是要么有一些正则表达式将停止对以 mysite/admin 开头的页面强制使用 https，或者如果像 jay gillford 这样的 opencart 专家通过在 config.php 中添加一些行来解决它，则更好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:03:49.117

最简单的方法是编辑你的`config.php`文件和`admin/config.php`文件。在这些中，将`HTTP_SERVER`域字符串从更改`http://`为`https://`。这应该在全局范围内使用 HTTPS。`HTTPS_SERVER`如果您还没有这样做，也请更改。你应该对`HTTP_IMAGE`and做同样的`HTTPS_IMAGE`事情

# c++ - 如何将支持的类型添加到现有的传统 std::list 操作函数（即模板？）

> ID：14557375
> 
> 赞同：0
> 
> 时间：2013-01-28T07:28:15.630
> 
> 标签：c++, templates, stdlist

我有一个关于将支持的类型添加到现有的传统 std::list 操作函数的具体问题。我试图用模板做到这一点但没有成功，所以我很感激任何关于如何更好地使用模板或完全使用不同机制的建议。请在下面查看我的场景，如果对此有任何想法，请告诉我。提前感谢您的帮助！

我目前有两个 A 类型的 std::lists，并为它们提供了插入/删除/getter/etc 函数。下面显示了一个简化的代码片段。

```
typedef std::list<A*> TListA;
TListA ListA1;
TListA ListA2;

void InsertIntoListA(A* pA)
{
    TListA& ListA = IsBoo()? ListA1 : ListA2;
    ListA.push_back(pA);
} 
```

现在，事实证明我需要添加类型 B，并且我考虑使用模板来添加这种新类型（如下所示），但事实证明这样做有两个问题。

```
template <typename T>
void InsertIntoListT(T* pT)
{
    std::list<T*>& List;

    if (IsA())
        List = IsBoo()? ListA1 : ListA2;
    else
        List = IsBoo()? ListB1 : ListB2;      

    List.push_back(pT);   
} 
```

问题 1：我不能拥有“std::list& List”，因为它是引用的，因此需要将其分配给实际列表。所以我最终会得到这样的东西，这并不理想。

```
template <typename T>
void InsertIntoListT(T* pT)
{    
    if (IsA()) {
        TListA& ListA = IsBoo()? ListA1 : ListA2;
        ListA.push_back(pT);   
    } else {
        TListB& ListB = IsBoo()? ListB1 : ListB2;      
        ListB.push_back(pT);   
    }     
} 
```

问题 2：我收到 A 到 B 或 B 到 A 的类型转换错误。我认为这是因为给定模板 T，编译器将枚举“ListA.push_back”和“ListB.push_back”的所有四种可能性这导致将A插入列表A，将B插入列表A，将A插入列表B，将B插入列表B，其中只有两个是有效的。所以我最终得到了这样的东西，我认为这违背了使用模板的目的。

```
template <typename T>
void InsertIntoListT(T* pT)
{    
    if (IsA()) {
        TListA& ListA = IsBoo()? ListA1 : ListA2;
        ListA.push_back(reinterpret_cast<A*>(pT));
    } else {
        TListB& ListB = IsBoo()? ListB1 : ListB2;      
        ListB.push_back(reinterpret_cast<B*>(pT));
    }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:45:06.820

显然，不能在函数模板内部做列表类型切换，因为每个模板实例化只知道这两种类型中的一种。所以你必须在功能之外进行切换。这是一种可能性：

```
TListA& getList(bool isBoo, A* /*dummy*/)
{
  return isBoo ? ListA1 : ListA2;
}

TListB& getList(bool isBoo, B* /*dummy*/)
{
  return isBoo ? ListB1 : ListB2;
}

template <typename T>
void InsertIntoListT(T* pT)
{    
  auto& theList = getList(IsBoo(), (T*)NULL);
  theList.push_back(pT);
} 
```

dummy 仅用于类型 siwtching - 可以通过函数模板和专业化来完成，但这很难看。根据 List 变量的真实性质，`getList`可以通过其他方式编写功能。也许更通用，也许不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:39:30.173

不要将所有功能混合在一个功能中。这是非常糟糕的做法。使用类似的东西

```
void InsertIntoListImpl(A* p)
{
   (IsBoo() ? ListA1 : ListA2).push_back(p);
}

void InsertIntoListImpl(B* p)
{
   (IsBoo() ? ListB1 : ListB2).push_back(p);
}

template<typename T>
void InsertIntoList(T* p)
{
   InsertIntoListImpl(p);
} 
```

或某些特征，或其他东西。但无论如何，一个函数中的条件并不多。

为什么不将实际列表传递给插入功能？会好起来的。

# javascript - node.js 应用程序发送广播消息 socket.io

> ID：14557384
> 
> 赞同：0
> 
> 时间：2013-01-28T07:28:57.753
> 
> 标签：javascript, node.js, websocket, socket.io

我是 node.js 和 socket.io 的新手，但我想编写一个小应用程序来向连接的客户端广播一些值。我首先不知道两件事如何在我的其他功能中触发 socket.broadcast.emit 或其他广播功能？在我的应用程序中，我有一个每秒计算一个值的函数，我想将此值发送给所有客户端。我的第二个问题是我如何在客户端中获取此消息并在我的其他 javascript 函数中使用它？我在 [从服务器而不是从特定客户端广播 node.js + socket.io 之前看到了这个？](https://stackoverflow.com/questions/8588895/node-js-socket-io-broadcast-from-server-rather-than-from-a-specific-client)但没有做我想做的事提前谢谢这里是我的代码：

```
var cronJob = require('cron').CronJob;
var snmp = require('snmp-native');
//var oid = [1, 3, 6, 1, 2, 1, 1, 1, 0];
//var oid1 = [1,3,6,1,2,1,11,1];
//var oid2 = [1,3,6,1,4,1,2636,3,9,1,53,0,18];
//var oid3 = [1,3,6,1,2,1,2,2,1,11,18];
var intraffic = [1,3,6,1,2,1,2,2,1,10,18]; //inbound traffic
var outtraffic = [1,3,6,1,2,1,2,2,1,16,18]; //outbound traffic
var inpps = [1,3,6,1,4,1,2636,3,3,1,1,3,518]; //interface inbound pps
var outpps = [1,3,6,1,4,1,2636,3,3,1,1,6,518]; //interface out pps

var session = new snmp.Session({ host: '10.0.0.73', port: 161, community: 'Pluto@com' });
new cronJob('* * * * * *', function(){
    session.get({ oid:intraffic }, function (error, varbind) {
        var vb;
        if (error) {
            console.log('Fail :(');
        } else {
            vb=varbind[0];
            console.log(vb.oid + ' = ' + vb.value + ' (' + vb.type + ')');
        }

    });
}, null, true, "America/Los_Angeles"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:36:50.663

因为第一个问题很简单，

在您的模块中，使用 socket.io 服务器实例创建一个名为 io 的变量，并在最后导出它。如果所有函数都在同一个模块上，您只需要一个全局变量（仅对该模块是全局的）

-- mymodule.js --

```
var io = require('socket.io').listen(80); // Create socket.io server as usual
...
module.exports.io = io; // Add this at the end of mymodule.js

// Broadcast in the same module where the server is defined
io.sockets.emit('this', { will: 'be received by everyone' }); 
```

-- 其他模块.js --

```
var wsserver = require( 'mymodule.js' ); // Require your module as usual and assign it to a variable
...
// Usage of socket server to broadcast a message in another module
wsserver.io.sockets.emit('this', { will: 'be received by everyone' }); 
```

# javascript - window.opener 在 IE8-9 中不起作用

> ID：14557392
> 
> 赞同：0
> 
> 时间：2013-01-28T07:29:49.110
> 
> 标签：javascript, window.opener, showmodaldialog

我按照这篇文章[将值从子窗口传递到父窗口](http://hspinfo.wordpress.com/2008/01/17/javascript-send-pass-value-of-child-window-to-parent-window/)。

它在 Firefox 和 chrome 中运行完美，但在 IE8 和 IE9 中出现错误。

要打开我正在使用的子页面：

```
window.showModalDialog('child.html','','width=550,height=170,left=150,top=200,toolbar=1,status=1,scrollbars=yes'); 
```

它给了我以下错误：

![脚本错误](../Images/3d8b30270d5dafafcc3c939e3fe595a3.png)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:33:40.577

您可以尝试使用此代码

```
window.showModalDialog(child.html,'','unadorned:yes;resizable:1;
dialogHeight:170px;dialogwidth:550px;scroll:yes;status=yes'); 
```

# eclipse - 如何在 Maven 2 中指定“Tomcat 6 服务器运行时”库？

> ID：14557398
> 
> 赞同：3
> 
> 时间：2013-01-28T07:30:21.337
> 
> 标签：eclipse, maven-2, tomcat6

我正在使用 Eclipse 3.7、Tomcat 6 和 Maven 2 开发一个项目。该项目依赖于 jsp-api.jar 和 serlet-api.jar。但是这两个 jar 必须从部署到 Tomcat 6 中排除，因为它们与 Tomcat 6 的 jar 冲突。所以我在开发阶段需要它们，在部署阶段不需要它们。我想以一种自动的方式实现这个要求。我有两种解决方案，但都不能满足我的要求：

1.  在 pom 中添加依赖项并在部署期间通过添加排除这两个 jar

    ```
     <plugin>
       <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <packagingExcludes>WEB-INF/lib/servlet-api-2.4.jar,WEB-INF/lib/jsp-api-2.1.jar</packagingExcludes>
        </configuration>
     </plugin> 
    ```

    maven-war-plugin 防止在`mvn package`目标期间将指定文件打包到战争文件中。但是当我在Eclipse中使用tomcat进行开发时，每次重新发布项目时，我都必须手动从tomcat工作空间中删除这两个jar。

2.  从 pom 依赖项中删除它们，在 Eclipse 中添加一个 tomcat 6 服务器运行时库。在这种情况下，开发是可以的，但是由于 pom 文件中缺少两个依赖项，所以无法使用 maven 打包。

如何在 Maven 中添加“Tomcat 6 服务器运行时库”，这样这 2 个 jar 就不会复制到项目的 lib 目录中，编译器仍然可以找到依赖项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:31:24.120

只需将“提供”的范围添加到依赖项。

例子：

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>javax.servlet-api</artifactId>
  <version>2.4</version>
  <scope>provided</scope>
</dependency> 
```

# streaming - 失去连接后无法重新连接到 RTMP 流

> ID：14557399
> 
> 赞同：2
> 
> 时间：2013-01-28T07:30:26.733
> 
> 标签：streaming, rtmp, flowplayer

我正在使用 Flowplayer 进行 VOD 应用程序的 RTMP 流式传输。我需要用户能够在互联网连接暂时失败后重新连接时从同一点恢复播放。Flowplayer 有可能吗？我已经成功实现了 Flowplayer RTMP 流。

我注意到课堂上有一个`canDispatchStreamNotFound()`方法`NetStreamControllingStreamProvider`。

无论如何，这种方法是否可以用于检测连接不再可用并在连接到来时恢复播放。我试过但无法成功实施。

经过一些研究，我注意到这个[**问题**](http://code.google.com/p/flowplayer-plugins/issues/detail?id=23)之前已经报告过了。

# iphone - 如何在滚动视图中显示图像列表，其中图像是从 iPhone 中的 URL XML 文件检索的

> ID：14557405
> 
> 赞同：1
> 
> 时间：2013-01-28T07:31:06.817
> 
> 标签：iphone, ios, ios6

我可以从 Web 服务器的 XML 文件中检索图像并将图像列为滚动视图。现在我想单击一个图像，该图像应将我带到另一个窗口，该窗口应再次将一些图像显示为集合视图。谁能建议我如何做到这一点。

我列出了我的 TableView 控制器和我需要的现有参考图像。

```
MyTableViewController.m

- (void)viewDidLoad{
     [super viewDidLoad];
     xmlParser = [[egsXMLParser alloc] loadXMLByURL:@"http://retrieveurlxml.com/sample.xml"];
     [self.tableView reloadData];
   }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *CellIdentifier = @"myimages";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        } UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
        UIImageView *tweetImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,cell.frame.size.width , cell.frame.size.height)];
        tweetImageView.image = currentTweet;
        [cell setBackgroundView:tweetImageView];
        return cell;
    } 
```

我当前的滚动视图如下所示，

![图像滚动的当前表格视图](../Images/15e0594b5adaa43c19a1e5d1504be9f3.png)

我需要的是如下所示，

任何人都可以建议我如何实现这样的目标。 ![期望的输出](../Images/093772db575befe25ab2cde51f683805.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:27:20.147

只需使用我通过电子邮件发送给您的 API。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourURL;
[img_EventImage loadImageFromURL:url];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

# javascript - Javascript 数组迭代 - 内存问题

> ID：14557411
> 
> 赞同：0
> 
> 时间：2013-01-28T07:31:32.997
> 
> 标签：javascript, performance, memory-leaks

我是 JS 函数和对象的新手，我正在尝试迭代一个数组……这是我的示例代码，我试图用输入值获取硬币的倍数

```
var flag=0;var chipval=0;var num=0;
var main = function(coins){
        var coinsarr = [1,5,10,25,50,100,500,501];var length=coinsarr.length
        var remval = coins;
        var coinskey = "";
        while(flag==0){
            for(i=0;i<length;i++){
                if(coinsarr[i]>remval){
                    chipval = coinsarr[i-1];
                    num = parseInt(remval/chipval);
                    if(remval%chipval==0){
                        flag = 1;
                        break;
                    }else{
                        remval=remval%chipval;
                        $flag = 0;
                        break;
                    }
                }
            }
            coinskey = coinskey+","+chipval+":"+num;
        }
        coinskey = coinskey.replace(/(^,)|(,$)/g, "")
        alert(coinskey);
    } 
```

当我运行 main(120) 时，这将返回 100:2,10:2（这与 2 的 100 个硬币和 2 的 10 个硬币无关）

当我运行 main(720) 时，我遇到了内存泄漏……上面写着“此页面上的脚本使用了太多内存”；谁能告诉我，问题出在哪里，否则这是正确的方法吗？

感谢您的时间和耐心...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:35:50.943

如果您传递给函数的值大于数组中的最大值，则您有一个无限循环，因为`flag`永远不会改变。

具体来说，此`if`语句中的条件：

```
if(coinsarr[i]>remval){ 
```

`720`...对于（或超过 的任何其他数字）永远不会成立`501`。

另外，`$flag = 0`不应该`flag = 0`吗？就目前而言，您创建了一个`$flag`永远不会被使用的全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:53:52.997

获得一定数量的硬币来构成一个值的一个稍微干净的选择是构建一个包含这些值的对象。像这样的东西可以解决问题：

```
function coins(value){
    var coinsarr = [1,5,10,25,50,100,500,501];
    var out = {};
    while(value > 0){
        var i = 0;
        while(coinsarr[i+1] <= value){
            i++; // Find the coin to add.
        }
        var coin = coinsarr[i];
        value -= coin;
        if(!out[coin]){
            out[coin] = 0;
        }
        out[coin]++;
    }
    return out;
}

coins(499);
// {        Returns:
//     1: 4
//     10: 2
//     25: 1
//     50: 1
//     100: 4
// }
coins(21359);
// {        Returns:
//     1: 2
//     5: 1
//     10: 1
//     100: 3
//     501: 42
// } 
```

这样做的好处是您可以比解析字符串更容易地检索值：

```
var coinsObj = coins(499);
for(var key in coinsObj){
    console.log(coinsObj[key] + ' times coin "' + key + '"' );
}
// 4 times coin "1"
// 2 times coin "10"
// 1 times coin "25"
// 1 times coin "50"
// 4 times coin "100" 
```

或者只是构建一个这样的字符串：

```
var coinsObj = coins(499);
var outString = ''
for(var key in coinsObj){
    outString += ',' + key + ':' + coinsObj[key];
}
outString = outString.substr(1); // Remove the leading comma. 
```

# viewdidload - prepareForSegue 中的自定义对象与 viewDidLoad 不同

> ID：14557419
> 
> 赞同：0
> 
> 时间：2013-01-28T07:32:31.730
> 
> 标签：viewdidload

这是我想要实现的目标：我以编程方式添加一组自定义对象。这些随时可用的每一个都应该执行现有的转场。在`performForSegue`中，我设置了destinationViewController 的一些属性。

这是设置：我有一个自定义对象 CustomButton，它有一个属性 CustomProperty。在我的主视图中，我有一个`NSMutableArray`填充了这些对象的实例。点击识别器连接到自定义按钮。在单击自定义按钮时，主视图和另一个视图之间也有一个 segue。我还有一个 prepareForSegue ，我在其中进行一些处理。

主 viewDidLoad 看起来像：

```
- (void)viewDidLoad
{  
    buttons = [[NSMutableArray alloc] init];
    CustomButton *customButton1 = [[CustomButton alloc] init];                

    // Attach touch recognizers
    UITapGestureRecognizer *singleFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(customButtonPressed:)];
    [customButton1 addGestureRecognizer:singleFingerTap];
    [self.view addSubview:customButton1];

    // Add it to the buttons array
    [self.buttons addObject:customButton1];

    [super viewDidLoad];

    NSLog(@"---------viewDidLoad-----------");
    NSLog(@"count = %u", buttons.count);
    for (id tempButton in buttons)
    {
        NSLog(@"Custom Property = %@", ((CustomButton *)tempButton).customProperty);
    }
} 
```

prepareForSegue 看起来像

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    NSLog(@"---------prepareForSegue-----------");
    NSLog(@"count = %u", buttons.count);
    for (id tempButton in buttons)
    {
        NSLog(@"Content = %@", ((CustomButton *)tempButton).customProperty);
    }
} 
```

当我运行此应用程序并调用 viewDidLoad 时，计数和 customProperty 会按预期打印。按下按钮 prepareForSegue 被调用并且计数为 1（如预期的那样）但 customProperty 为空。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:06:56.407

在您`viewDidLoad`的工作中，您正在使用 class 的对象`CustomButton`。但是在`prepareForSegue`您将对象转换为`BookButton`. 我认为，这不是故意的，原因`customProperty`是零，因为它是 a) 未设置和 b) 中没有这样的属性`BookButton`。

# android - 在设备 emulator-5554 上启动活动 com.example.newproj.MainActivity

> ID：14557428
> 
> 赞同：2
> 
> 时间：2013-01-28T07:32:56.823
> 
> 标签：android

当我在 android 模拟器上运行应用程序时，我在收到这条消息后卡住了：

```
(Starting activity com.example.newproj.MainActivity on device emulator-5554) 
```

我已经尝试了一切，但没有任何效果。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:35:30.030

1.  学会等待。更高版本的模拟器需要很长时间才能启动。

2.  如果没有，请转到首选项，然后通过单击当前模拟器检查模拟器配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T08:06:18.923

右键单击项目。

1.  运行方式-> 运行配置。
2.  **从Android Application**下的左侧菜单中选择适当的 App 名称。
3.  在 Android 选项卡下选择**Launch Action : Launch Default Activity** (或) Manually **Launch Action -> Launch : -> 选择**要启动的任何 Activity。
4.  单击应用并在模拟器中运行应用程序。

# c# - 外部 DLL 和数据库驱动程序

> ID：14557430
> 
> 赞同：1
> 
> 时间：2013-01-28T07:33:00.500
> 
> 标签：c#, .net, visual-studio-2010

我想创建一个引用 - 比如说 - crud.dll 的 Windows 窗体。然后我希望 crud.dll 作为外部 dll。这个想法是，crud.dll（连接到数据库）将有许多版本（例如，Sybase 版本、SQLite 版本、不同版本的不同数据库详细信息）。就我而言， crud.dll 是`using Sybase.Data.AseClient;` 当我构建时，我收到错误，因为 Sybase.AdoNet2.AseClient.dll 也依赖于另一个 dll。如何以正确的方式做事？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:37:44.960

您需要从应用程序逻辑中抽象出数据库访问代码。您可以将[存储库模式](http://www.remondo.net/repository-pattern-example-csharp/)与[依赖注入](https://stackoverflow.com/questions/3058/what-is-inversion-of-control)结合使用，以将您的数据库操作与应用程序逻辑隔离开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:43:53.933

您需要为*每个*DLL 编译单独的 Windows 窗体应用程序，因为该应用程序将静态链接引用的 DLL。显然不是一个理想的方法。另一种方法是使用动态加载（[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)、[GetProcAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)），但这很容易出错，并且很难找到*正确*的crud.dll 导致[DLL-Hell](http://en.wikipedia.org/wiki/DLL_Hell)。

一个更好的选择是静态类型化应用程序中所有支持的提供者（例如，典型的存储库模式实现将属于这一类），这消除了所有这些问题，但支持的提供者集将在应用程序编译时硬连线。

现代替代方案是通过 COM 公开 crud.dll 提供的服务，并让应用程序配置所需的 COM 类（由提供者实现之一提供支持）。

最终加载一个提供者 * 动态 * 并且没有在构建时静态固定支持的提供者列表是**困难**的。我会认真重新审视这些要求，并考虑是否在编译时修复一组众所周知的受支持的提供程序，并使用许多可用的静态链接方法之一（例如存储库模式）。

# python - 如何为鼠标按住并拖动拳击获得正确的值

> ID：14557431
> 
> 赞同：0
> 
> 时间：2013-01-28T07:33:08.290
> 
> 标签：python, selection, pygame

我正在尝试在程序中实现绘图框，例如当您按住鼠标按钮时，当您移动鼠标时会出现一个矩形。试图用一个 pygame rect 对象来做这件事，这是我迄今为止想出的：

```
def mouseDown(self, button, pos):
    if button == 1:
        self.pressing = True
        self.start = pos

def mouseUp(self, button, pos):
    if button == 1:
        self.pressing = False

def mouseMotion(self, buttons, pos):
    if self.pressing == True:
        width = abs(self.start[0] - pos[0])
        height = abs(self.start[1] - pos[1])
        self.box = pygame.Rect(self.start, width, height)
        pygame.draw.rect(self.screen, (0,0,0), self.box, 1) 
```

所以 pos 是点击的坐标，(0,0) 是左上角。我尝试使用 abs 通过比较鼠标移动的距离来获取大小，但 abs 只返回正值，因此它不起作用。

我们如何改变它以使框选择成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:25:22.930

尝试类似：

```
def mouseMotion(self, buttons, pos):
    if self.pressing == True:
        diffx = self.start[0] - pos[0]
        diffy = self.start[1] - pos[1]
        width = abs(self.start[0] - pos[0])
        height = abs(self.start[1] - pos[1])
        if diffx >= 0:
            if diffy >= 0:
                self.box = pygame.Rect(self.start, width, height)
            else:
                self.box = pygame.Rect(self.start[0],pos[1], width, height)
        else:
            if diffy >= 0:
                self.box = pygame.Rect(pos[0],self.start[1], width, height)
            else:
                self.box = pygame.Rect(pos, width, height)
        pygame.draw.rect(self.screen, (0,0,0), self.box, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:05:06.310

使用 Calums 非常有用的答案作为垫脚石，我想出了这个解决方案：

```
def mouseMotion(self, buttons, pos, rel):

    if self.pressing == True:
        diffx = self.start[0] - pos[0]
        diffy = self.start[1] - pos[1]            
        width = abs(self.start[0] - pos[0])
        height = abs(self.start[1] - pos[1])
        if diffx > 0 and diffy > 0:
            width = (width - (width * 2))
            height = (height - (height * 2))
        elif diffx > 0 and diffy <= 0:
            width = (width - (width * 2))
        elif diffx <= 0 and diffy > 0:
            height = (height - (height * 2))
        elif diffx < 0 and diffy < 0:
            pass

        dimensions = (width, height)
        self.box = pygame.Rect(self.start, dimensions)

        pygame.draw.rect(self.screen, (0,0,0), self.box, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:29:17.467

在您的情况下，我会做的是使用 pygame 鼠标功能。您可以使用的模块是`pygame.mouse.get_rel`，当您第一次单击“绘图区域”并再次抬起鼠标按钮时，该代码的第二次调用将为您提供两点之间的距离，并使用一些 pygame.mouse。 get_pos 你可以找到矩形的起点和终点，然后用 pygame.get_pos 简单地绘制它们。我希望您理解这一点，我会看看我是否可以提供代码示例。

# wordpress - 多站点中的 add_option

> ID：14557433
> 
> 赞同：0
> 
> 时间：2013-01-28T07:33:11.270
> 
> 标签：wordpress

我想添加选项，在多站点`enable_image`的`wp_options`表中调用。即每个单独的博客ID。我想获取复选框的值并将其保存在 wp_options 表中。

```
<td><fieldset><legend class="screen-reader-text"><span><?php _e('Allow Contributor To   Upload') ?></span></legend>
<label for="enable_app1">

<input name="enable_app1" type="checkbox" id="enable_app1" value="1" <?php checked('1',  get_option('enable_image')); ?> />

<?php _e('Yes Allow Contributor To Upload.') ?></label><br />
</fieldset></td>
</tr> 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:11:38.453

我将建议一种不同的方法来解决这个问题，我认为这是你真正想要的。首先，使用[update_site_option](http://codex.wordpress.org/Function_Reference/update_site_option)在网络范围内保存您的价值。

```
update_site_option( 'enable_app1', $_POST['enable_app1'] ); 
```

然后，每当您需要使用此值时，您都可以像这样检索它：

```
if( get_option( 'enable_app1' ) ) {
    $enable_app1 = get_option( 'enable_app1' );
}
else {
    $enable_app1 = get_site_option( 'enable_app1' );
} 
```

这就是说，如果专门为此博客设置了一个值，请使用它。否则，请使用已设置网络范围的选项。这允许管理员在本地覆盖选项，同时节省他在每个博客上明确设置值的工作。

如果您不需要能够在本地覆盖事物，则可以`update_site_option`单独使用。与在每个博客上设置值相比，它更可取，并且具有相同的效果。但是，如果你想这样做，你也可以这样做，首先检查是否设置了网络范围选项，然后使用操作挂钩更新本地值以匹配它。

# java - request.getSession(false) 在调用 session.invalidate() 后不返回 null

> ID：14557435
> 
> 赞同：9
> 
> 时间：2013-01-28T07:33:40.070
> 
> 标签：java, jakarta-ee, servlets, session-state

不应该使会话无效导致`request.getSession(false)`返回 null 吗？在我的注销 servlet 中，我调用

```
session.invalidate(); 
```

在我的登录状态过滤器中我调用

```
request.getSession(false); 
```

对 getSession(false) 的调用永远不会返回 null，但与返回的会话对象关联的所有属性都是 null。我目前通过搜索空属性来检测用户是否已注销，但这似乎不正确。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T12:35:53.540

> *我目前通过搜索空属性来检测用户是否已注销*

这也是正常的做法。要检查用户是否登录，您当然**不**应该检查 servletcontainer 是否已创建会话。这根本不代表登录用户。

登录时，只需将用户模型对象放在会话范围内，无需检查容器是否为您创建了会话。换句话说，只需使用`getSession()`不带布尔参数的容器，以便容器在必要时自动创建，此时无论如何您都**需要会话：**

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String username = request.getParameter("username");
    String password = request.getParameter("password");
    User user = userService.find(username, password);

    if (user != null) {
        request.getSession().setAttribute("user", user);
        response.sendRedirect(request.getContextPath() + "/home");
    } else {
        request.setAttribute("message", "Unknown login. Please retry.");
        request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
    }
} 
```

在访问过滤时，只需检查代表登录用户的会话属性是否存在，您仅`getSession(false)`在此处使用以避免不必要的会话创建，否则例如搜索机器人会触发完全不必要的会话创建：

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    HttpSession session = request.getSession(false);
    User user = (session != null) ? (User) session.getAttribute("user") : null;
    String loginURL = request.getContextPath() + "/login"; 

    if (user == null && !request.getRequestURI().equals(loginURL)) {       
        response.sendRedirect(loginURL);
    } else {
        chain.doFilter(request, response);
    }
} 
```

在注销时，请确保在无效后发送重定向，因为当前会话在转发的响应中仍然可用。

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.getSession().invalidate();
    response.sendRedirect(request.getContextPath() + "/login");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T07:52:21.997

对于您旅行的每个 servlet 或 jsp，您应该调用

```
request.getSession(false); 
```

除了您创建会话的第一页之外

```
request.getSession(true); 
```

如果你不打电话

```
request.getSession(false); 
```

那么会话不会进行到该页面，所以在你打电话之前

```
session.invalidate(); 
```

确保您通过调用继续会话到该页面

```
request.getSession(false); 
```

# c++ - 无法调用远程进程中注入的dll中的函数

> ID：14557437
> 
> 赞同：0
> 
> 时间：2013-01-28T07:33:43.027
> 
> 标签：c++, dll-injection, remote-process

我试图在注入远程进程的dll中调用函数，我试图调用dll函数的exe代码如下：

```
#include "stdafx.h"
#include <windows.h>
#include <psapi.h>
#include <string>

using std::string;

void GetDebugPrivs()
{
    HANDLE hToken;
    LUID sedebugnameValue;
    TOKEN_PRIVILEGES tp;

    if (OpenProcessToken(GetCurrentProcess(), 
      TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken))
    {
       if ( !LookupPrivilegeValue( NULL, SE_DEBUG_NAME, &sedebugnameValue ) )
       {
        CloseHandle( hToken );
       }

        tp.PrivilegeCount = 1;
        tp.Privileges[0].Luid = sedebugnameValue;
        tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

        if ( !AdjustTokenPrivileges( hToken, 
         FALSE, &tp, sizeof(tp), NULL, NULL ) )
        {
           CloseHandle( hToken );
        }
        CloseHandle( hToken );
    }
}

HMODULE WINAPI GetRemoteModuleHandle(HANDLE hProcess, LPCSTR lpModuleName)
{
HMODULE* ModuleArray = NULL;
DWORD ModuleArraySize = 100;
DWORD NumModules = 0;
CHAR lpModuleNameCopy[MAX_PATH] = {0};
CHAR ModuleNameBuffer[MAX_PATH] = {0};

/* Make sure we didn't get a NULL pointer for the module name */
if(lpModuleName == NULL)
    goto GRMH_FAIL_JMP;

/* Convert lpModuleName to all lowercase so the comparison isn't case sensitive */
for (size_t i = 0; lpModuleName[i] != '\0'; ++i)
{
    if (lpModuleName[i] >= 'A' && lpModuleName[i] <= 'Z')
        lpModuleNameCopy[i] = lpModuleName[i] + 0x20; // 0x20 is the difference between uppercase and lowercase
    else
        lpModuleNameCopy[i] = lpModuleName[i];

    lpModuleNameCopy[i+1] = '\0';
}

/* Allocate memory to hold the module handles */
ModuleArray = new HMODULE[ModuleArraySize];

/* Check if the allocation failed */
if(ModuleArray == NULL)
    goto GRMH_FAIL_JMP;

/* Get handles to all the modules in the target process */
if(!::EnumProcessModulesEx(hProcess, ModuleArray,
    ModuleArraySize * sizeof(HMODULE), &NumModules, LIST_MODULES_ALL))
    goto GRMH_FAIL_JMP;

/* We want the number of modules not the number of bytes */
NumModules /= sizeof(HMODULE);

/* Did we allocate enough memory for all the module handles? */
if(NumModules > ModuleArraySize)
{
    delete[] ModuleArray; // Deallocate so we can try again
    ModuleArray = NULL; // Set it to NULL se we can be sure if the next try fails
    ModuleArray = new HMODULE[NumModules]; // Allocate the right amount of memory

    /* Check if the allocation failed */
    if(ModuleArray == NULL)
        goto GRMH_FAIL_JMP;

    ModuleArraySize = NumModules; // Update the size of the array

    /* Get handles to all the modules in the target process */
    if( !::EnumProcessModulesEx(hProcess, ModuleArray,
        ModuleArraySize * sizeof(HMODULE), &NumModules, LIST_MODULES_ALL) )
        goto GRMH_FAIL_JMP;

    /* We want the number of modules not the number of bytes */
    NumModules /= sizeof(HMODULE);
}

/* Iterate through all the modules and see if the names match the one we are looking for */
for(DWORD i = 0; i <= NumModules; ++i)
{
    /* Get the module's name */
    ::GetModuleBaseNameA(hProcess, ModuleArray[i],
        ModuleNameBuffer, sizeof(ModuleNameBuffer));

    /* Convert ModuleNameBuffer to all lowercase so the comparison isn't case sensitive */
    for (size_t j = 0; ModuleNameBuffer[j] != '\0'; ++j)
    {
        if (ModuleNameBuffer[j] >= 'A' && ModuleNameBuffer[j] <= 'Z')
            ModuleNameBuffer[j] += 0x20; // 0x20 is the difference between uppercase and lowercase
    }

    /* Does the name match? */
    if(strstr(ModuleNameBuffer, lpModuleNameCopy) != NULL)
    {
        /* Make a temporary variable to hold return value*/
        HMODULE TempReturn = ModuleArray[i];

        /* Give back that memory */
        delete[] ModuleArray;

        /* Success */
        return TempReturn;
    }

    /* Wrong module let's try the next... */
}

   GRMH_FAIL_JMP:

/* If we got to the point where we allocated memory we need to give it back */
if(ModuleArray != NULL)
    delete[] ModuleArray;

/* Failure... */
return NULL;
}

FARPROC WINAPI GetRemoteProcAddress (HANDLE hProcess, HMODULE hModule, LPCSTR lpProcName, UINT Ordinal, BOOL UseOrdinal)
{
BOOL Is64Bit = FALSE;
MODULEINFO RemoteModuleInfo = {0};
UINT_PTR RemoteModuleBaseVA = 0;
IMAGE_DOS_HEADER DosHeader = {0};
DWORD Signature = 0;
IMAGE_FILE_HEADER FileHeader = {0};
IMAGE_OPTIONAL_HEADER64 OptHeader64 = {0};
IMAGE_OPTIONAL_HEADER32 OptHeader32 = {0};
IMAGE_DATA_DIRECTORY ExportDirectory = {0};
IMAGE_EXPORT_DIRECTORY ExportTable = {0};
UINT_PTR ExportFunctionTableVA = 0;
UINT_PTR ExportNameTableVA = 0;
UINT_PTR ExportOrdinalTableVA = 0;
DWORD* ExportFunctionTable = NULL;
DWORD* ExportNameTable = NULL;
WORD* ExportOrdinalTable = NULL;

/* Temporary variables not used until much later but easier
/* to define here than in all the the places they are used */
CHAR TempChar;
BOOL Done = FALSE;

/* Check to make sure we didn't get a NULL pointer for the name unless we are searching by ordinal */
if(lpProcName == NULL && !UseOrdinal)
    goto GRPA_FAIL_JMP;

/* Get the base address of the remote module along with some other info we don't need */
if(!::GetModuleInformation(hProcess, hModule,&RemoteModuleInfo, sizeof(RemoteModuleInfo)))
    goto GRPA_FAIL_JMP;
RemoteModuleBaseVA  = (UINT_PTR)RemoteModuleInfo.lpBaseOfDll;

/* Read the DOS header and check it's magic number */
if(!::ReadProcessMemory(hProcess, (LPCVOID)RemoteModuleBaseVA, &DosHeader,
    sizeof(DosHeader), NULL) || DosHeader.e_magic != IMAGE_DOS_SIGNATURE)
    goto GRPA_FAIL_JMP;

/* Read and check the NT signature */
if(!::ReadProcessMemory(hProcess, (LPCVOID)(RemoteModuleBaseVA + DosHeader.e_lfanew),
    &Signature, sizeof(Signature), NULL) || Signature != IMAGE_NT_SIGNATURE)
    goto GRPA_FAIL_JMP;

/* Read the main header */
if(!::ReadProcessMemory(hProcess,
    (LPCVOID)(RemoteModuleBaseVA + DosHeader.e_lfanew + sizeof(Signature)),
    &FileHeader, sizeof(FileHeader), NULL))
    goto GRPA_FAIL_JMP;

/* Which type of optional header is the right size? */
if(FileHeader.SizeOfOptionalHeader == sizeof(OptHeader64))
    Is64Bit = TRUE;
else if(FileHeader.SizeOfOptionalHeader == sizeof(OptHeader32))
    Is64Bit = FALSE;
else
    goto GRPA_FAIL_JMP;

if(Is64Bit)
{
    /* Read the optional header and check it's magic number */
    if(!::ReadProcessMemory(hProcess,
        (LPCVOID)(RemoteModuleBaseVA + DosHeader.e_lfanew + sizeof(Signature) + sizeof(FileHeader)),
        &OptHeader64, FileHeader.SizeOfOptionalHeader, NULL)
        || OptHeader64.Magic != IMAGE_NT_OPTIONAL_HDR64_MAGIC)
        goto GRPA_FAIL_JMP;
}
else
{
    /* Read the optional header and check it's magic number */
    if(!::ReadProcessMemory(hProcess,
        (LPCVOID)(RemoteModuleBaseVA + DosHeader.e_lfanew + sizeof(Signature) + sizeof(FileHeader)),
        &OptHeader32, FileHeader.SizeOfOptionalHeader, NULL)
        || OptHeader32.Magic != IMAGE_NT_OPTIONAL_HDR32_MAGIC)
        goto GRPA_FAIL_JMP;
}

/* Make sure the remote module has an export directory and if it does save it's relative address and size */
if(Is64Bit && OptHeader64.NumberOfRvaAndSizes >= IMAGE_DIRECTORY_ENTRY_EXPORT + 1)
{
    ExportDirectory.VirtualAddress = (OptHeader64.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT]).VirtualAddress;
    ExportDirectory.Size = (OptHeader64.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT]).Size;
}
else if(OptHeader32.NumberOfRvaAndSizes >= IMAGE_DIRECTORY_ENTRY_EXPORT + 1)
{
    ExportDirectory.VirtualAddress = (OptHeader32.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT]).VirtualAddress;
    ExportDirectory.Size = (OptHeader32.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT]).Size;
}
else
    goto GRPA_FAIL_JMP;

/* Read the main export table */
if(!::ReadProcessMemory(hProcess, (LPCVOID)(RemoteModuleBaseVA + ExportDirectory.VirtualAddress),
    &ExportTable, sizeof(ExportTable), NULL))
    goto GRPA_FAIL_JMP;

/* Save the absolute address of the tables so we don't need to keep adding the base address */
ExportFunctionTableVA = RemoteModuleBaseVA + ExportTable.AddressOfFunctions;
ExportNameTableVA = RemoteModuleBaseVA + ExportTable.AddressOfNames;
ExportOrdinalTableVA = RemoteModuleBaseVA + ExportTable.AddressOfNameOrdinals;

/* Allocate memory for our copy of the tables */
ExportFunctionTable = new DWORD[ExportTable.NumberOfFunctions];
ExportNameTable     = new DWORD[ExportTable.NumberOfNames];
ExportOrdinalTable  = new WORD[ExportTable.NumberOfNames];

/* Check if the allocation failed */
if(ExportFunctionTable == NULL || ExportNameTable == NULL || ExportOrdinalTable == NULL)
    goto GRPA_FAIL_JMP;

/* Get a copy of the function table */
if(!::ReadProcessMemory(hProcess, (LPCVOID)ExportFunctionTableVA,
    ExportFunctionTable, ExportTable.NumberOfFunctions * sizeof(DWORD), NULL))
    goto GRPA_FAIL_JMP;

/* Get a copy of the name table */
if(!::ReadProcessMemory(hProcess, (LPCVOID)ExportNameTableVA,
    ExportNameTable, ExportTable.NumberOfNames * sizeof(DWORD), NULL))
    goto GRPA_FAIL_JMP;

/* Get a copy of the ordinal table */
if(!::ReadProcessMemory(hProcess, (LPCVOID)ExportOrdinalTableVA,
    ExportOrdinalTable, ExportTable.NumberOfNames * sizeof(WORD), NULL))
    goto GRPA_FAIL_JMP;

/* If we are searching for an ordinal we do that now */
if(UseOrdinal)
{
    /* NOTE:
    /* Microsoft's PE/COFF specification does NOT say we need to subtract the ordinal base
    /* from our ordinal but it seems to always give the wrong function if we don't */

    /* Make sure the ordinal is valid */
    if(Ordinal < ExportTable.Base || (Ordinal - ExportTable.Base) >= ExportTable.NumberOfFunctions)
        goto GRPA_FAIL_JMP;

    UINT FunctionTableIndex = Ordinal - ExportTable.Base;

    /* Check if the function is forwarded and if so get the real address*/
    if(ExportFunctionTable[FunctionTableIndex] >= ExportDirectory.VirtualAddress &&
        ExportFunctionTable[FunctionTableIndex] <= ExportDirectory.VirtualAddress + ExportDirectory.Size)
    {
        Done = FALSE;
        string TempForwardString;
        TempForwardString.clear(); // Empty the string so we can fill it with a new name

        /* Get the forwarder string one character at a time because we don't know how long it is */
        for(UINT_PTR i = 0; !Done; ++i)
        {
            /* Get next character */
            if(!::ReadProcessMemory(hProcess,
                (LPCVOID)(RemoteModuleBaseVA + ExportFunctionTable[FunctionTableIndex] + i),
                &TempChar, sizeof(TempChar), NULL))
                goto GRPA_FAIL_JMP;

            TempForwardString.push_back(TempChar); // Add it to the string

            /* If it's NUL we are done */
            if(TempChar == (CHAR)'\0')
                Done = TRUE;
        }

        /* Find the dot that seperates the module name and the function name/ordinal */
        size_t Dot = TempForwardString.find('.');
        if(Dot == string::npos)
            goto GRPA_FAIL_JMP;

        /* Temporary variables that hold parts of the forwarder string */
        string RealModuleName, RealFunctionId;
        RealModuleName = TempForwardString.substr(0, Dot - 1);
        RealFunctionId = TempForwardString.substr(Dot + 1, string::npos);

        HMODULE RealModule = GetRemoteModuleHandle(hProcess, RealModuleName.c_str());
        FARPROC TempReturn;// Make a temporary variable to hold return value 

        /* Figure out if the function was exported by name or by ordinal */
        if(RealFunctionId.at(0) == '#') // Exported by ordinal
        {
            UINT RealOrdinal = 0;
            RealFunctionId.erase(0, 1); // Remove '#' from string

            /* My version of atoi() because I was too lazy to use the real one... */
            for(size_t i = 0; i < RealFunctionId.size(); ++i)
            {
                if(RealFunctionId[i] >= '0' && RealFunctionId[i] <= '9')
                {
                    RealOrdinal *= 10;
                    RealOrdinal += RealFunctionId[i] - '0';
                }
                else
                    break;
            }

            /* Recursively call this function to get return value */
            TempReturn = GetRemoteProcAddress(hProcess, RealModule, NULL, RealOrdinal, TRUE);
        }
        else // Exported by name
        {
            /* Recursively call this function to get return value */
            TempReturn = GetRemoteProcAddress(hProcess, RealModule, RealFunctionId.c_str(), 0, FALSE);
        }

        /* Give back that memory */
        delete[] ExportFunctionTable;
        delete[] ExportNameTable;
        delete[] ExportOrdinalTable;

        /* Success!!! */
        return TempReturn;
    }
    else // Not Forwarded
    {

        /* Make a temporary variable to hold return value*/
        FARPROC TempReturn = (FARPROC)(RemoteModuleBaseVA + ExportFunctionTable[FunctionTableIndex]);

        /* Give back that memory */
        delete[] ExportFunctionTable;
        delete[] ExportNameTable;
        delete[] ExportOrdinalTable;

        /* Success!!! */
        return TempReturn;
    }
}

/* Iterate through all the names and see if they match the one we are looking for */
for(DWORD i = 0; i<ExportTable.NumberOfNames;i++)   {
    string TempFunctionName;

    Done = FALSE;// Reset for next name
    TempFunctionName.clear(); // Empty the string so we can fill it with a new name

    /* Get the function name one character at a time because we don't know how long it is */
    for(UINT_PTR j = 0; !Done; ++j)
    {
        /* Get next character */
        if(!::ReadProcessMemory(hProcess, (LPCVOID)(RemoteModuleBaseVA + ExportNameTable[i] + j),
            &TempChar, sizeof(TempChar), NULL))
            goto GRPA_FAIL_JMP;

        TempFunctionName.push_back(TempChar); // Add it to the string

        /* If it's NUL we are done */
        if(TempChar == (CHAR)'\0')
            Done = TRUE;
    }

    /* Does the name match? */
    if(TempFunctionName.find(lpProcName) != string::npos)
    {
        /* NOTE:
        /* Microsoft's PE/COFF specification says we need to subtract the ordinal base
        /*from the value in the ordinal table but that seems to always give the wrong function */

        /* Check if the function is forwarded and if so get the real address*/
        if(ExportFunctionTable[ExportOrdinalTable[i]] >= ExportDirectory.VirtualAddress &&
            ExportFunctionTable[ExportOrdinalTable[i]] <= ExportDirectory.VirtualAddress + ExportDirectory.Size)
        {
            Done = FALSE;
            string TempForwardString;
            TempForwardString.clear(); // Empty the string so we can fill it with a new name

            /* Get the forwarder string one character at a time because we don't know how long it is */
            for(UINT_PTR j = 0; !Done; ++j)
            {
                /* Get next character */
                if(!::ReadProcessMemory(hProcess,
                    (LPCVOID)(RemoteModuleBaseVA + ExportFunctionTable[i] + j),
                    &TempChar, sizeof(TempChar), NULL))
                    goto GRPA_FAIL_JMP;

                TempForwardString.push_back(TempChar); // Add it to the string

                /* If it's NUL we are done */
                if(TempChar == (CHAR)'\0')
                    Done = TRUE;
            }

            /* Find the dot that seperates the module name and the function name/ordinal */
            size_t Dot = TempForwardString.find('.');
            if(Dot == string::npos)
                goto GRPA_FAIL_JMP;

            /* Temporary variables that hold parts of the forwarder string */
            string RealModuleName, RealFunctionId;
            RealModuleName = TempForwardString.substr(0, Dot);
            RealFunctionId = TempForwardString.substr(Dot + 1, string::npos);

            HMODULE RealModule = GetRemoteModuleHandle(hProcess, RealModuleName.c_str());
            FARPROC TempReturn;// Make a temporary variable to hold return value 

            /* Figure out if the function was exported by name or by ordinal */
            if(RealFunctionId.at(0) == '#') // Exported by ordinal
            {
                UINT RealOrdinal = 0;
                RealFunctionId.erase(0, 1); // Remove '#' from string

                /* My version of atoi() because I was to lazy to use the real one... */
                for(size_t i = 0; i < RealFunctionId.size(); ++i)
                {
                    if(RealFunctionId[i] >= '0' && RealFunctionId[i] <= '9')
                    {
                        RealOrdinal *= 10;
                        RealOrdinal += RealFunctionId[i] - '0';
                    }
                    else
                        break;
                }

                /* Recursively call this function to get return value */
                TempReturn = GetRemoteProcAddress(hProcess, RealModule, NULL, RealOrdinal, TRUE);
            }
            else // Exported by name
            {
                /* Recursively call this function to get return value */
                TempReturn = GetRemoteProcAddress(hProcess, RealModule, RealFunctionId.c_str(), 0, FALSE);
            }

            /* Give back that memory */
            delete[] ExportFunctionTable;
            delete[] ExportNameTable;
            delete[] ExportOrdinalTable;

            /* Success!!! */
            return TempReturn;
        }
        else // Not Forwarded
        {

            /* Make a temporary variable to hold return value*/
            FARPROC TempReturn;

            /* NOTE:
            /* Microsoft's PE/COFF specification says we need to subtract the ordinal base
            /*from the value in the ordinal table but that seems to always give the wrong function */
            //TempReturn = (FARPROC)(RemoteModuleBaseVA + ExportFunctionTable[ExportOrdinalTable[i] - ExportTable.Base]);

            /* So we do it this way instead */
            TempReturn = (FARPROC)(RemoteModuleBaseVA + ExportFunctionTable[ExportOrdinalTable[i]]);

            /* Give back that memory */
            delete[] ExportFunctionTable;
            delete[] ExportNameTable;
            delete[] ExportOrdinalTable;

            /* Success!!! */
            return TempReturn;
        }
    }

    /* Wrong function let's try the next... */
}

 GRPA_FAIL_JMP:

/* If we got to the point where we allocated memory we need to give it back */
if(ExportFunctionTable != NULL)
    delete[] ExportFunctionTable;
if(ExportNameTable != NULL)
    delete[] ExportNameTable;
if(ExportOrdinalTable != NULL)
    delete[] ExportOrdinalTable;

/* Falure... */
return NULL;
}

typedef void (*MYPROC)();
int _tmain(int argc, _TCHAR* argv[])
{
//HINSTANCE hinstLib; 
MYPROC ProcAdd;
//hinstLib = LoadLibraryA("PawIrm_Client.dll");

GetDebugPrivs();
HANDLE hproc = OpenProcess(PROCESS_ALL_ACCESS, FALSE, 2552);

HMODULE hwnd = GetRemoteModuleHandle(hproc, "PawIrm_Client.dll");

ProcAdd = (MYPROC)GetRemoteProcAddress(hproc, hwnd, "mypid", 0, FALSE);

if (NULL != ProcAdd) 
{
    (ProcAdd)(); // Here I am getting Unhandled exception at 0x623fb776 in PawIRM_Exe.exe: 0xC0000005: Access violation.
}

CloseHandle(hproc);
return 0; 
```

}

在上面的 exe 中，我试图调用 dll 中存在的“mypid”函数，该函数被注入到远程进程中，但是在调用该函数时，我遇到了未处理的异常，请指导我的代码有什么问题。

下面的代码是我的 DLL：

```
#include "stdafx.h"
include  <stdlib.h>
#include "PawIrm_Client.h"

PAWIRM_CLIENT_API void mypid ()//exported function
{
DWORD PID = GetCurrentProcessId();
char arr[10] = {0};
itoa(PID, arr, 10);
MessageBoxA(NULL, arr, "PID", MB_OK);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:39:45.683

ProcAdd 的值不是您可以在当前进程中调用的函数。它是别人进程中的一个指针。在您的流程中，它只是您正在调用的一个数字，并且由于它没有在您的流程中映射，因此您的流程会爆炸。

# android - 在 android Activity 中放置 onclick 侦听器的正确位置在哪里？

> ID：14557440
> 
> 赞同：4
> 
> 时间：2013-01-28T07:33:49.913
> 
> 标签：android, onclick, position, oncreate

在 android 活动中放置 onclick 侦听器的最佳位置在哪里？我见过两种不同的方式。一种方法是将它们放在 onCreate 方法中，另一种方法是将它们放在 onCreate 方法的下方和外部。

我刚刚启动了一个新的 android 应用程序，对哪里是最好的地方感到困惑。

两种方式如下所示。

伪代码示例一；

oncreate 方法中的 onclick 方法

```
 MainActivity extends Activity{

 onCreate(){

 onClick listeners 

  } // end of onCreate method

 }  // end of MainActivity class 
```

伪代码示例二；

将 onclick 放在 oncreate 方法的下方和外部

```
 MainActivity extends Activity{

 onCreate(){

 } // end of onCreate method

 onClick listeners

 }  // end of MainActivity class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:46:45.257

两种方式都是正确的。你如何组织代码实际上是为了可读性。如果你有太多的监听`onCreate()`器，之后就很难阅读代码。但是，如果您只有一个并且它是一个衬垫，则最好将其放入`onCreate()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:48:18.800

你甚至可以`onClicklistener`使用 xml 文件。

IE

在你的 xml 中使用这个标签：

`android:onClick="startActivityB"`

然后在java文件中

```
public void startActivityB(View v) {
        Intent intent = new Intent(ActivityA.this, ActivityB.class);
        startActivity(intent);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:40:26.570

如何编写活动代码由您决定。如果您愿意，您可以编写 onclick 的所有代码`onCreate()`，但是如果您有更多的按钮或视图要处理，并且您将为每个按钮或视图编写单独的 onClick，那么您`onCreate()`将看起来很笨拙。

在这种情况下，您可以为所有按钮创建通用`onClickListener`并单独编写逻辑，这使您的代码看起来很漂亮，否则您也可以使用`onCreate()`。

这对我来说是最好的方法：

> ```
>  btn1.setOnClickListener(m_onClickListener);
> /**
>  * Common click listener
>  */
> OnClickListener m_onClickListener=new OnClickListener()
> {
>     @Override
>     public void onClick(View p_v)
>     {
>         switch(p_v.getId())
>         {
>             case R.id.btn1:
>                 break;
>                     }
>             }
>       }; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:52:20.133

您可以同时使用这两种方式。我认为这项工作具有相同的势头

如果使用第二种方法，代码可读性会好

注意：还有另一种方法 `onClick`在 your_layout.xml 中给出。但是现在片段开始发挥它的作用，因此它没有被广泛使用（[REFER](https://stackoverflow.com/a/4153842/1450401)）。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-28T07:38:25.583

你应该总是更喜欢第二个。如果你把它放在创建中，它也可以工作。但是您不希望每次加载活动时都执行此操作。

这是一个例子

```
package com.damon86.toastExample;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;

public class ToastExample extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    // The text and button used on the display.
    EditText toastText = null;
    Button showToast = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Create a new Layout.
        LinearLayout rootLayout = new LinearLayout(getApplicationContext());

        // Create textfield
        toastText = new EditText(getApplicationContext());
        toastText.setText("Hello Toast!");

        // Create button and set OnClickListener
        showToast = new Button(getApplicationContext());
        showToast.setText("Show Toast");
        showToast.setOnClickListener(this);

        // Add components to the Layout.
        rootLayout.addView(toastText);
        rootLayout.addView(showToast);

        // Add the layout as the content view for the application.
        setContentView(rootLayout);
    }

    /**
     * Implemented method - onClick.
     * Show the user a piece of toast.
     */
    @Override
    public void onClick(View v) {

        // Create a piece of toast.
        Toast pieceToast = Toast.makeText(getApplicationContext(), toastText.getText(), Toast.LENGTH_SHORT);

        // Show the toast.
        pieceToast.show();
    }
} 
```

# ruby-on-rails - 允许用户和非登录访客在 Rails 中发帖

> ID：14557448
> 
> 赞同：0
> 
> 时间：2013-01-28T07:34:39.143
> 
> 标签：ruby-on-rails

我想允许用户和非登录访问者创建帖子，但在编码时遇到问题在 ruby​​ on rails 教程中，我发现： `@post =current_user.posts.build(params[:post])` 但 curren_user 将为零。另一种方法是 `@post.user = current_user` 这似乎没问题，但这条线太难看了吗？我是否需要创建一个来宾用户才能将这些帖子放入其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:41:19.300

```
@post =current_user.posts.build(params[:post], :user_id => current_user.id) 
```

像这样使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:07:31.530

你可以这样做，假设你正在使用设计：

application_controller.rb

```
class ApplicationController < ActionController::Base
  before_filter :set_current_user

  def set_current_user
    #create a new use if there is no logged in user
    #or you could probably load a default user
    current_user = User.new unless user_signed_in?  
  end 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:17:20.117

你可以通过多种方式做到这一点。关键是要有一个可以与帖子相关联的用户。为此，您可以从`guest:boolean`在数据库中有列的用户模型开始，并为未经身份验证的用户使用该模型。然后，您将设置`session[:user_id]`为新创建用户的 id，并将 guest 设置为 true，并让`current_user()`应用程序控制器中的方法为您提供一个`User`基于`session[:user_id]`. 普通用户的工作方式相同，但将 guest 列设置为 false 的原因。

如果您对客人有更复杂的需求，您可以考虑使用单表继承 (STI) 并拥有一个`User`基础模型，您可以将其子类化为`Guest`和`Member`. User 模型将保存共享逻辑，子类将保存其专用逻辑，但它们都将共享数据库中的一个表。

RailsCasts.com 上的 Ryan Bates 对此有两个截屏视频。去看看：[393 - 访客用户记录](http://railscasts.com/episodes/393-guest-user-record)（免费）和[394 - STI 和多态关联](http://railscasts.com/episodes/394-sti-and-polymorphic-associations)（专业版）。他们详细地详细介绍了如何做到这一点，并讨论了每种方法的优缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:23:26.563

您可以使用 Devise 和 CanCan 的组合在项目中使用用户角色系统。

假设您有两个角色：**guest 和 general_user。**

然后在用户模型中定义-

```
class User < ActiveRecord::Base

  // Devise stuff comes here..

  //this is roles definition
  ROLES = %w[general_user guest]

  def role?(role)
    roles.include? role.to_s
  end
end 
```

**角色.rb**

```
class Role < ActiveRecord::Base
  has_many :posts
  has_many :users, :through => :posts
end 
```

**post.rb**

```
class Post< ActiveRecord::Base
  belongs_to :user
end 
```

**能力.rb（这是为CanCan）**

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new #guest user

    if user.role? :general_user
      can :create, :all
      can :manage, :all
      can :read, :all
    end

   if user.role?(:guest)
    can :create, Post
    can :update, Post do |post|
      post.try(:user) == user
    end

   end   
  end 
```

**帖子/index.html.erb**

```
<% if can? :create, Post%>
  <p><%= link_to "New Post", new_post_path %></p>
<% end %> 
```

然后对于客人用户 -

```
user.posts.build(params[:post], :user_id => 0) 
```

where`user`使用 cancan`ability`类初始化，`user_id`值可以是您为任何客人分配的任何固定值。在这个例子中，我假设`:user_id => 0`它是一个访客条目。

对于已登录的用户 -

```
current_user.posts.build(params[:post], :user_id => current_user.id) 
```

登录用户`current_user`在哪里。`devise`

更多检查：[康康](http://railscasts.com/episodes/192-authorization-with-cancan)。

# ubuntu - 在 ubuntu 12.04 上安装 mahout - E：无法找到软件包 mahout

> ID：14557450
> 
> 赞同：4
> 
> 时间：2013-01-28T07:34:43.327
> 
> 标签：ubuntu, hadoop, mahout, hadoop-plugins

如何在 ubuntu 12.04 上安装 mahout？

```
sudo apt-get install mahout
Reading package lists... Done
Building dependency tree        
Reading state information... Done
E: Unable to locate package mahout

https://ccp.cloudera.com/display/CDHDOC/Mahout+Installation
To install Mahout on an Ubuntu or other Debian system:
$ sudo apt-get install mahout 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:47:24.710

Cloudera的[Mahout 安装手册](https://ccp.cloudera.com/display/CDHDOC/Mahout+Installation)包含以下部分：

> **Mahout 先决条件**
> 
> 重要 如果您还没有这样做，请先安装 Cloudera 的 yum、zypper/YaST 或 apt 存储库，然后再使用以下说明安装 Mahout。有关说明，请参阅 CDH3 安装。

在[CDH3 安装](https://ccp.cloudera.com/display/CDHDOC/CDH3+Installation)期间， Cloudera 的软件包存储库`http://archive.cloudera.com/debian <RELEASE>-cdh3 contrib`正在您的系统中配置，因此按照手册操作后，您将能够使用`apt-get`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:37:33.743

它从未以这种方式分发过。从 Apache 下载或使用 Maven。

*编辑：... Apache*从未以这种方式分发过。如果这就是您要查找的内容，请从 Apache 下载 tarball。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T07:38:09.023

`apt-cache search mahout`显示该软件包未在官方 Ubuntu 存储库中提供。

您必须直接从[Apache](http://www.apache.org/dyn/closer.cgi/mahout/)获取它。

# x-cart - X-cart 购物页面显示为空白

> ID：14557455
> 
> 赞同：0
> 
> 时间：2013-01-28T07:35:20.427
> 
> 标签：x-cart

对于网站[http://www.truly-organic-clothing.com](http://www.truly-organic-clothing.com)，商店标签：[http://www.truly-organic-clothing.com/shop](http://www.truly-organic-clothing.com/shop)显示为空白。

请提供可能的解决方案来修复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T21:09:04.667

尝试清除模板缓存 (var/templates_c)。

还要检查 var/log 文件夹中的错误日志。

# backbone.js - 如何使用删除方法？

> ID：14557459
> 
> 赞同：0
> 
> 时间：2013-01-28T07:35:42.293
> 
> 标签：backbone.js, backbone-views

在我的主干功能中，如何在添加新元素之前删除元素？，我的功能一切正常。问题是当我单击“更新”时，它正在更新元素，并且仍然可以使用旧版本。如何删除旧元素，并从更新调用中追加新元素..？

**清除现有视图元素并附加新集合的正确方法是什么？**

我的功能：

```
$(document).ready(function(){

    var school = {};

    school.model = Backbone.Model.extend({
        defaults:{
            name:'no name',
            age:'no age'
        }
    });

    school.collect = Backbone.Collection.extend({
        model:school.model,
        url:'js/school.json'
    });

    school.view = Backbone.View.extend({
        tagName:'div',
        className:'member',
        template:$('#newTemp').html(),
        render:function(){
            var temp = _.template(this.template);
            this.$el.html(temp(this.model.toJSON()));
            return this;
        }
    });

    school.views = Backbone.View.extend({
        el:$('#content'),
        events:{
            'click #newData' : 'newArrival',    
        },
        initialize:function(){
            _.bindAll(this);
            this.collection = new school.collect;
            this.collection.bind('reset', this.render);
            this.collection.fetch();
        },
        newArrival:function(){
            school.views.remove(); // i tried this, throw the error 
            this.initialize();
        },
            render:function(){
                var that = this;
                _.each(this.collection.models, function(item){
                    that.renderItem(item);    
                })
            },
            renderItem:function(item){
                //how can i remove the older elements and append new alone?
                var newItem = new school.view({model:item});
                this.$el.append(newItem.render().el); // keep adding but previous element still not removed, 
            }
        });

        var newSchool = new school.views;

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:50:53.167

您需要参考旧视图才能删除它们。然后，您将能够在子视图上调用 remove。我强烈建议您使用主干删除方法，而不是仅使用 jquery 从 DOM 中删除元素。使用 Backbones remove 也会解除对象与事件的绑定。要从服务器更新，只需调用 collection.fetch() 以获取新数据。这是我的解决方案（底部的 jsfiddle）：

```
var school = {};

school.model = Backbone.Model.extend({
    defaults:{
        name:'no name',
        age:'no age'
    }
});

school.collect = Backbone.Collection.extend({
    model:school.model,
    url:'js/school.json'
});

school.view = Backbone.View.extend({
    tagName:'div',
    className:'member',
    template:$('#newTemp').html(),
    render:function(){
        var temp = _.template(this.template);
        this.$el.html(temp(this.model.toJSON()));
        return this;
    }
});

school.views = Backbone.View.extend({
    el:$('#content'),
    events:{
        'click #newData' : 'newArrival',    
    },
    initialize:function(){
        _.bindAll(this);
        this.collection = new school.collect;
        this.collection.bind('reset', this.render);
        this.collection.fetch();

        this.childViews = [];
    },
    newArrival:function(){
        this.collection.fetch();
    },
    render:function(){
        var that = this;

        // Remove old items
        _.each(this.childViews, function(old){
            old.remove();    
        });

        // Empty array of children
        this.childViews = [];

        var that = this;
        _.each(this.collection.models, function(item){
            that.renderItem(item);    
        });
    },
    renderItem:function(item){
        //how can i remove the older elements and append new alone?
        var newItem = new school.view({model:item});
        this.$el.append(newItem.render().el); // keep adding but previous element still not removed, 

        // Store a reference to your child item.
        this.childViews.push(newItem);
    }
});

var newSchool = new school.views; 
```

我创建了一个工作：[JSFiddle](http://jsfiddle.net/EuCRZ/1/)。注意：在 JSFiddle 集合中，我重写 fetch() 以提供假数据（您应该删除该部分）。

# javascript - RequireJs 没有正确加载依赖项

> ID：14557461
> 
> 赞同：1
> 
> 时间：2013-01-28T07:35:47.207
> 
> 标签：javascript, twitter-bootstrap, require

在我的基于 Web 的应用程序中，我使用 RequireJs 来异步加载脚本，但有时（并非总是）我会出错，因为 RequireJs 似乎没有正确加载依赖项。

样本：

```
require(['jquery-1.7.2.min', 'bootstrap/js/bootstrap.min'], function (){
    //Used for initialize bootstrap tooltip
    $('a[rel]').tooltip();  
}); 
```

然后我得到：

> 未捕获的类型错误：对象 [对象对象] 没有方法“工具提示”

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:26:32.837

创建 AMD 模块时，您应该接受模块输出（即，用于 jQuery 的 $）作为自定义模块定义中的参数：

```
require(['jquery-1.7.2.min', 'bootstrap/js/bootstrap.min'], function ($) {
    //Used for initialize bootstrap tooltip
    $('a[rel]').tooltip();  
}); 
```

*注意添加 $ 作为函数参数*

此外，如果您在加载多个版本或 jQuery 副本的页面上（并且未标记，因为`noconflict`您也可能遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:39:11.977

`tooltip`位于`jqueryUI`库下，您需要添加依赖项添加`jqueryUI`的 API 。`RequireJs`

参考[http://api.jqueryui.com/tooltip/](http://api.jqueryui.com/tooltip/)

# css - 固定背景通过各种分辨率

> ID：14557463
> 
> 赞同：0
> 
> 时间：2013-01-28T07:35:51.463
> 
> 标签：css

对于我的个人网站，我想使用一个非常具体的背景图片。这张背景图片代表了我的签名线，我想知道在所有主要分辨率中无缝地进行这项工作的最佳方法是什么。

我已经添加了这个背景图像，但在当前状态下，一旦我调整到较小的宽度，右侧就会被切断。有什么办法可以保存这个吗？

一些示范：

```
i49.tinypic.com/16l0kma.jpg
i45.tinypic.com/35naf6v.jpg
i46.tinypic.com/2b1tus.jpg 
```

我准备了我的背景图片的快速截图：http: [//i48.tinypic.com/2uz8aw7.jpg](http://i48.tinypic.com/2uz8aw7.jpg)

非常感谢你，尼基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:51:10.250

您可以使用`background-size:cover`. 像这样写：

```
body{
    background: url(http://i48.tinypic.com/2uz8aw7.jpg) 20px 0 no-repeat;
    background-size:cover;
} 
```

检查这个[http://jsfiddle.net/dXQNJ/](http://jsfiddle.net/dXQNJ/)

# php - 使用 IPMapper 查找给定 IP 地址的纬度和经度

> ID：14557466
> 
> 赞同：-3
> 
> 时间：2013-01-28T07:36:11.120
> 
> 标签：php, javascript, google-maps

当我尝试使用 IPMapper 获取给定 IP 地址的纬度和经度时，我收到以下错误“RefrenceError: IPMApper not defined”。为了您的清楚，我指定了代码。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IP Address geocoding on Google Maps</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="ipmapper.js"></script>
$(function(){
    try{
        IPMapper.initializeMap("map");
        IPMapper.addIPMarker("111.111.111.111");
        }
    catch(e){
        alert(e);
    }
});
</head>
<body>
    <input id="ip" name="ip" type="text" />
    <button onclick="IPMapper.addIPMarker($('#ip').val());">Geocode</button>
    <div id="map" style="height: 500px;border: red 4px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:15:32.727

您的解决方案/项目中有文件“ipmapper.js”吗？src 引用是否与您服务器上的位置匹配？

尝试将 IPMapperjs 引用放在项目中使用绝对路径而不是相对路径

（文件将在网站的根目录中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:42:24.683

你必须包括这三个js

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="ipmapper.js"></script> 
```

请参考这个[链接](http://lab.abhinayrathore.com/ipmapper/)

# django - 在 django 中更改管理员静态 url

> ID：14557469
> 
> 赞同：2
> 
> 时间：2013-01-28T07:36:20.903
> 
> 标签：django, django-admin

我有一个 Django 应用程序。最近我已将我的静态文件转移到 Rackspace Cloud Files 并从中提供服务。为此，我更改了`static`settings.py 中的 url，如下所示

```
STATIC_URL = 'https://somekey.ssl.cf2.rackcdn.com/static/' 
```

它是工作文件。

问题是现在管理静态文件也从上面的（机架空间）url 提供。如何更改为较早的 ie `/static/admin/`？

基本上，我希望从我的站点的 cdn 和管理文件提供应用程序静态文件。

我的环境：

```
Python 2.7.3
Django 1.4.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:09:36.567

由于个人应用程序和 django 管理前端中静态文件的位置都使用 STATIC_URL 变量的值，我猜想不可能从两个不同的来源提供静态内容。

我可以建议您将管理前端的静态文件上传到您的 Rackspace 实例吗？假设您的 Django 安装位于 PATH，您所要做的就是将内容上传`PATH/lib/python2.6/site-packages/django/contrib/admin/static`到 `https://somekey.ssl.cf2.rackcdn.com/static/`.

另一种解决方案是不更改 STATIC_URL 的值：例如，将其设置为“/static”，然后配置您的 Apache 服务器以将请求重定向到您的 Rackspace 实例：

```
Redirect /static https://somekey.ssl.cf2.rackcdn.com/static/
Redirect /admin/static https://somekey.ssl.cf2.rackcdn.com/admin/static/ 
```

# c# - 用户注销时如何将会话数据存储到数据库中

> ID：14557472
> 
> 赞同：-2
> 
> 时间：2013-01-28T07:36:28.913
> 
> 标签：c#, asp.net, session

我有 1`DropdownList`和 2 `Textbox`..`page1.aspx`我输入我的搜索条件并单击填充结果的 go。

现在我去..`page2.aspx`这里我有两个`Textbox`..我做的事情和我做的一样`page1.aspx`。

现在当我回到`page1.aspx`我输入的搜索条件不存在时，它已经回到了它的默认值。我想要的是当我回到旧页面时保留搜索条件。

当用户（不是匿名用户）注销和登录时，它也应该保留。

我尝试过使用`sessions`，但没有成功。

想用`session+database`，但不知道怎么用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-26T17:14:09.560

我认为在这些情况下，您可以将设置保存在`cookies`：

当用户选择`dropdownlist`保存它的项目时

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
    {
        HttpCookie hc = new HttpCookie("NameOfCookie");
        hc.Expires = DateTime.Now.AddSeconds(60);//this cookie will be remove after 60 seconds.
        hc.Value = ddl.SelectedValue;// save here for later using
        Response.Cookies.Add(hc);//sending to user
    } 
```

如果`page loading`从 cookie 中获取值：

```
if (Request.Cookies.Get("NameOfCookie") != null)
{
      string value= Request.Cookies.Get("NameOfCookie").Value;
      ddl.Items.FindByValue(value).Selected = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:40:33.150

您必须将搜索条件存储在数据库中特定于用户的新表中。您可以在用户点击“搜索”按钮时在表格中添加/修改搜索条件。如果在表中没有找到登录用户的记录，则在您的页面上加载默认值。您可以将搜索条件保存在 xml 或任何合适的字符串中。

# android - 获取按钮的id并在android中执行操作

> ID：14557473
> 
> 赞同：0
> 
> 时间：2013-01-28T07:36:31.840
> 
> 标签：android, android-layout, button

在我的 android 应用程序中有一组按钮。我给它们 id 为 b1、b2、b3 ... 并使用随机函数生成一个数字，并使用该数字更改按钮图像。前任。如果随机数是 6，那么我想更改 id 为 b6 的按钮的图像。如何使用整数 6 和 b 创建 id b6 并对该按钮执行操作。

```
 String id;
    Random rand=new Random();
int num=rand.nextInt(9)+1;
id="b"+num; 
```

但在 android 中，按钮的 id 不是字符串格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:43:41.123

您可以简单地声明一个包含所有按钮 ID 的数组，如下所示：

```
int[] buttonIds = new int[] {R.b1, R.b2, ...}; 
```

并使用它来访问随机按钮的 ID：

```
num = rand.nextInt(buttonIds.length);
int buttonId = buttonIds[num];
findViewById(buttonId).doSomething(); 
```

但是，如果按钮的数量变大或不固定，就会很乏味。但是对于看起来又快又简单的小数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:41:09.110

Resources 类有这个方法：

```
public int getIdentifier (String name, String defType, String defPackage) 
```

看看它。

# iphone - 在 iPhone Cocos2d 中获取特定屏幕的触摸

> ID：14557475
> 
> 赞同：0
> 
> 时间：2013-01-28T07:36:55.990
> 
> 标签：iphone, ios, objective-c, xcode, cocos2d-iphone

我正在尝试检测屏幕特定部分上的触摸开始和触摸结束。我有一个作为 Sprite 的蜘蛛，我通过 touchbegan 和 touchend 改变它的面方向。我只想从我的蜘蛛前面接触。

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    //[self ccTouchesMoved:touches withEvent:event];
    UITouch *touch = [touches anyObject];
    startTouchPoint = [touch locationInView: [touch view]];

    //location = [[CCDirector sharedDirector] convertToGL: location];
    CCLOG(@"Location of Touch %@",NSStringFromCGPoint(startTouchPoint));
}
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [touches anyObject];
    CGPoint endlocation = [touch locationInView: [touch view]];
    if(startTouchPoint.x != endlocation.x && startTouchPoint.y != endlocation.y) {
        CGPoint touchPoint = [touch locationInView: [touch view]];
        touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

        [self calcAngleAndRotateObjectStartingAtPoint:sprite_Spider.position endingAtPoint:touchPoint];
    }
} 
```

![在此处输入图像描述](../Images/165e49a1d0fef3a49edef35d50c1ce44.png)

这是我的蜘蛛，我只想在那些红线之间接触。我怎样才能实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:00:59.343

每次在蜘蛛面前做一个假设的矩形，用这个方法检测触摸

```
CGRectContainsPoint(<rect>,<point>) 
```

如果触摸在矩形内，请执行任何操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:54:37.673

在你的情况下，我会选择 UITapGestureRecognizer 并实现委托方法

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 
```

在所有其他地方，您应该在 NO 和 YES 之间的任何地方返回 false。

您还可以检测点击手势的不同阶段

# php - Opencart $this->加载神秘

> ID：14557476
> 
> 赞同：1
> 
> 时间：2013-01-28T07:37:00.000
> 
> 标签：php, opencart

我目前正在`Opencart`逐行处理代码，从`index.php`. 我了解其中的大部分内容，但我想了解我所看到的所有内容。但到目前为止，我无法弄清楚：请继续阅读。

我意识到这`$this->`指的是当前对象，并且 $this->load 通常指的是当前对象中称为“加载”的方法。

如果我看到`$this->config->load`，那么我很好，因为 Config 类声明了一个“加载”方法。

但我在类中看到但`$this->load->model('catalog/category');`在`ControllerProductProduct`该类中找不到“加载”方法，我在父 Controller 类中也找不到它。

我也知道“加载”不是标准的 PHP 函数，所以我不明白`$this->load`实际指的是哪个对象方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:06:18.180

OpenCart 使用魔术方法`__get`并`__set`使用对象注册表动态地执行此操作。你可以找到这个的编码`/system/engine/controller.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:55:21.747

也许这会为您解决问题，请查看 catalog/index.php 第 33 行（OPencart 1.5.4.1）

```
// Loader
$loader = new Loader($registry);
$registry->set('load', $loader); 
```

# html - 谷歌地图 api 不会显示完整的地图

> ID：14557477
> 
> 赞同：0
> 
> 时间：2013-01-28T07:37:00.833
> 
> 标签：html, google-maps, google-maps-api-3

我正在尝试通过他们的 API v3 将谷歌地图加载到隐藏的容器中。容器的宽度和高度在 css 中明确设置。

但是地图不会显示为全宽/高度： ![谷歌地图 api 不会加载全宽](../Images/cd5b854bfb7d1dd8bd42656aedc7d054.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:54:13.037

这是一个常见问题解答。称呼

```
google.maps.event.trigger(map, 'resize'); 
```

在显示地图之前。

# jquery - jQuery fancyform 仅适用于第一个元素

> ID：14557486
> 
> 赞同：0
> 
> 时间：2013-01-28T07:37:52.503
> 
> 标签：jquery, forms, loops, styles, fancyform

使用这个脚本来设置表单样式：http: [//lutrasoft.nl/jQuery/fancyform/](http://lutrasoft.nl/jQuery/fancyform/)

我的网站在 smarty 中动态生成表单，而 jQuery 只在第一个选择元素上工作，那么我怎样才能让它在两者上都工作呢？

```
<script type="text/Javascript">
{literal}
$("#select").transformSelect();
{/literal}
</script> 
```

这是我尝试过的，但仍然只适用于第一个元素

```
<script type="text/Javascript">
{literal}
$("#select").each(function() {
var $this = $(this);
$this.transformSelect();
});
{/literal}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:43:35.957

像这样使用。它将影响所有选择框，而不需要 ID 或 Class

```
<script type="text/Javascript">
   {literal}
   $(":select").each(function() {
     var $this = $(this);
     $this.transformSelect();
   });
   {/literal}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:43:12.203

`$("#select").each(function() {`看起来您有多个具有相同 ID 的选择.. **（ID 应该始终是唯一的）**

把它改成类..然后\试试这个

```
 $(".select").each(function() { 
```

# php - 如何获得以下值

> ID：14557490
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:38:00.490
> 
> 标签：php, mongodb, doctrine-odm

我正在使用带有 ODM 工具的 mongodb 进行项目。所以在这里我尝试使用查找查询。这是我的代码

```
$dm    = $this->getServiceLocator()->get('doctrine.documentmanager.odm_default');
$user = $dm->getRepository('Application\Document\User')->findOneBy(array('username' => 'admin')); 
```

所以现在 $user 变量包含一些与查找查询相关的值。所以当我使用`var_dump($user)`它时显示以下结果

> object(Application\Document\User)#253 (4) { ["id":"Application\Document\User":private]=> string(24) "5103d0aca00b2a3205000001" ["username":"Application\Document\User" :private]=> string(5) "admin" ["email":"Application\Document\User":private]=> string(15) "admin@xmail.com" ["password":"Application\Document\用户":private]=> 字符串(3) "abc" }

所以请告诉我如何`username`从对象中获取价值`$user`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:36:22.970

您的实体中应该有一个受保护的`username`成员。`User`一旦你有了它，你应该为那个成员添加你的 getter 和 setter 并使用它们来获取给定的值。

```
$user->getUsername(); 
```

您还可以选择运行`app/console doctrine:generate:entities`以让 Doctrine 为您的所有实体生成 getter 和 setter 函数。

# android - 我无法从 https 链接播放视频

> ID：14557500
> 
> 赞同：0
> 
> 时间：2013-01-28T07:39:01.793
> 
> 标签：android, android-mediaplayer

我在我的 Android 应用程序中使用媒体播放器。来自 http 链接的视频在所有版本的 android 中播放，但 https 链接仅在 Android 4.1.2 中播放，但在较低版本中不播放。显示以下错误..

```
java.io.IOException: Prepare failed.: status=0x1 Error(1,-18). 
```

我正在使用以下代码

```
 MediaPlayerplayer = new MediaPlayer();
    player.setOnPreparedListener(this);
player.setOnCompletionListener(this);
player.setOnBufferingUpdateListener(this);
player.setOnSeekCompleteListener(this);
player.setScreenOnWhilePlaying(true);
player.setDisplay(holder);

    try {
String videoUrl = getIntent().getExtras().get("url").toString();
    File mediaFile = new File(fileName);
if (mediaFile.exists()) {
    FileInputStream fi = new FileInputStream(mediaFile);
    player.setDataSource(fi.getFD());                   
    }
else{
    player.setDataSource(videoUrl);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:58:58.193

试试这个

```
 try {
        setContentView(R.layout.videodisplay);
        String link="Yourvideo link";
        VideoView videoView = (VideoView) findViewById(R.id.VideoView);
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(videoView);
        Uri video = Uri.parse(link);
        videoView.setMediaController(mediaController);
        videoView.setVideoURI(video);
        videoView.start();
    } catch (Exception e) {
        // TODO: handle exception
        Toast.makeText(this, "Error connecting", Toast.LENGTH_SHORT).show();
    } 
```

并在 android manifest.xml 中授予 Internet 权限，如果您想使用 mediaplayer 播放，请单击[此处](https://stackoverflow.com/questions/11410834/android-sdk-media-player-load-video-stream-from-http-url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:58:55.093

Android 3.1 以上版本仅支持 HTTPS 媒体文件。见[官方链接](http://developer.android.com/guide/appendix/media-formats.html#core)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-09T14:24:29.127

**经过长时间的努力，我找到了解决方案，这就是我与你分享的原因，因为找到答案需要太多时间**

> 覆盖您的 videoview 类和下面的代码。

```
 @Override
public void setVideoURI(Uri uri) {
    super.setVideoURI(uri);
    try {
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);
        MySSLSocketFactory sf = new MySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(MySSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
        sf.fixHttpsURLConnection();
        HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;
        HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# python - Python 正则表达式：由重复的标点符号分割

> ID：14557502
> 
> 赞同：2
> 
> 时间：2013-01-28T07:39:07.433
> 
> 标签：python, regex

```
How????are!!!you 
```

我想将字符串拆分为`['How','are','you']`.

我尝试了以下正则表达式：

```
\?*|\!* 
```

这是行不通的。但是，以下正则表达式有效：

```
\?+|\!+ 
```

有人向我解释这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:48:59.040

```
>>> re.split(r'[?!]*', 'How????are!!!you')
['How', 'are', 'you'] 
```

至于为什么`\?*|\!*`不起作用，看看`re.findall`发现了什么：

```
>>> re.findall(r'\?*|\!*', 'How????are!!!you')
['', '', '', '????', '', '', '', '', '', '', '', '', '', ''] 
```

如果可能，交替总是采用第一个分支。`re.split`尝试仅按非空匹配拆分，因此您最终拆分为`?`但不拆分`!`（因为`\?*`将匹配任何空字符串，`\!*`永远不会以非重叠方式匹配）。

# android - 如何从 android 的警报对话框中添加字符串？

> ID：14557510
> 
> 赞同：2
> 
> 时间：2013-01-28T07:39:32.620
> 
> 标签：android, android-view, android-spinner, android-alertdialog

我正在使用安卓系统。现在我遇到了问题。我创建了一个程序，它将通过警报对话框从用户那里获取字符串。并将其添加到微调器中。但它在 logcat 中显示了一些异常。请任何人帮我解决这个问题。这是我的代码

```
**MainActivity.java**

package com.example.picker;

import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.text.Editable;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;

public class MainActivity extends Activity {
   Button add_button;

   Editable value;
   String inserted_value;
   AlertDialog.Builder alert;
   Spinner spinner;

   /** Items entered by the user is stored in this ArrayList variable */
   ArrayList<String> list = new ArrayList<String>();

   /** Declaring an ArrayAdapter to set items to ListView */
   ArrayAdapter<String> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        add_button = (Button)findViewById(R.id.addbutton);
        alert = new AlertDialog.Builder(this);
        final EditText input = new EditText(this);

         /** Getting a reference to Spinner object of the resource activity_main */
        spinner = (Spinner) findViewById(R.id.spin1);

        add_button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                alert.setTitle("Picker");
                alert.setMessage("Enter a string...");

                // Set an EditText view to get user input 

                alert.setView(input);

                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
if(inserted_value !=null){

                       Log.d("GOT_TEXT",inserted_value);
                       list.add(input.getText().toString());
                     }
                    else{
                        Log.d("GOT_TEXT","inserted_value is null"); 
                     }

                    /** Setting the adapter to the ListView */
                    spinner.setAdapter(adapter);

                    /** Adding radio buttons for the spinner items */
                    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

                  }
                });

                alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.
                      dialog.dismiss();
                  }
                });

                alert.show();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**日志猫**

```
 01-28 13:45:56.138: E/AndroidRuntime(701): FATAL EXCEPTION: main
01-28 13:45:56.138: E/AndroidRuntime(701): java.lang.NullPointerException
01-28 13:45:56.138: E/AndroidRuntime(701):  at com.example.picker.MainActivity$1$1.onClick(MainActivity.java:76)
01-28 13:45:56.138: E/AndroidRuntime(701):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
01-28 13:45:56.138: E/AndroidRuntime(701):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 13:45:56.138: E/AndroidRuntime(701):  at android.os.Looper.loop(Looper.java:123)
01-28 13:45:56.138: E/AndroidRuntime(701):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-28 13:45:56.138: E/AndroidRuntime(701):  at java.lang.reflect.Method.invokeNative(Native Method)
01-28 13:45:56.138: E/AndroidRuntime(701):  at java.lang.reflect.Method.invoke(Method.java:521)
01-28 13:45:56.138: E/AndroidRuntime(701):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-28 13:45:56.138: E/AndroidRuntime(701):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-28 13:45:56.138: E/AndroidRuntime(701):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:45:36.003

尝试：

```
if(inserted_value !=null){

   Log.d("GOT_TEXT",inserted_value); 
 }
else{
    Log.d("GOT_TEXT","inserted_value is null"); 
 } 
```

因为`inserted_value`当您尝试记录它时为 NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:49:15.740

试试这个，

```
if(input.getText().length() != 0)
{
list.add(input.getText().toString());
}else{
} 
```

# regex - 需要两个正则表达式

> ID：14557511
> 
> 赞同：-5
> 
> 时间：2013-01-28T07:39:41.153
> 
> 标签：regex

我是关于正则表达式（RegEx）的真正新手

我正在寻找一个 RegEx1 只匹配不包含空格的字符串。RegEx2 仅匹配包含空格的字符串。

例子：

RegEx1 必须匹配`"abcxyz"`但 NOT `"abc xyz"`。
RegEx2 必须匹配`"abc xyz"`但 NOT `"abcxyz"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:10:47.657

您想了解[字符类](http://www.regular-expressions.info/charclass.html)：

`[abc]`匹配 a `a`、 a`b`或 a的字符`c`。

`[^abc]`匹配任何既不是`a`a 、 a`b`也不是 a的字符`c`。

加上[量词](http://www.regular-expressions.info/repeat.html)和字符串的开始和结束[锚点](http://www.regular-expressions.info/anchors.html)，你就准备好了。

`^[^X]*$`匹配任何长度但不包含`X`.

`^.*X.*$`匹配任何至少包含一个`X`.

`^[^X]*X[^X]*$`匹配任何长度的字符串，该字符串正好包含一个`X`。

# java - 在我将应用程序留在后台 2-3 分钟后，我的 android 应用程序实例（应用程序类）被销毁

> ID：14557519
> 
> 赞同：1
> 
> 时间：2013-01-28T07:40:26.493
> 
> 标签：java, android

我使用`Application`类来存储我的android应用程序全局参数。但是当我去其他应用程序并将我的应用程序保持在后台大约几分钟时，我的应用程序无法再次运行。因为我从`Application`类中获取参数，但现在它变成了空的。

我的问题是为什么会这样以及如何解决这个问题？我还看到一个线程如下：

[在我的 Android 应用程序中一段时间​​不活动后返回会导致破坏集合值](https://stackoverflow.com/questions/9091292/returning-after-a-period-of-inactivity-in-my-android-application-causes-destroy)

答案是使用`onSaveInstanceState()`. 但是我怎样才能在其中保存我所有的应用程序参数呢？谢谢

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:43:16.270

为什么不使用共享偏好来保存数据？如果您的应用程序在后台并且需要资源，则操作系统会杀死您的应用程序......

# search - 在记事本++中用正则表达式（扩展搜索模式）替换多个值

> ID：14557522
> 
> 赞同：0
> 
> 时间：2013-01-28T07:40:47.580
> 
> 标签：search, notepad++, mode

我正在寻找一些工具来帮助我用多个值替换标签，但我很快意识到我使用的记事本++可以帮助我，尤其是他们称之为“正则表达式”的东西

好吧，我试图搜索和学习，但似乎我没有时间，所以我需要你帮助我

我需要用多个值替换许多标签

```
<a href="wordpress_38546.html">Home</a>
<a href="reviews/">Reviews</a>
<a href="news/">News</a>
<a href="features/">Featured</a></li>
<a href="blog/">Blog</a>
<a href="contacts/">Contacts</a> 
```

让它

```
<a href="#">Home</a>
<a href="#">Reviews</a>
<a href="#">News</a>
<a href="#">Featured</a></li>
<a href="#">Blog</a>
<a href="#">Contacts</a> 
```

**问题是**我有多个`<a>`标签，其中`href="" values`许多`<a>`标签也有多个标签`class=`，`id=`我想保留它

**解决方案：** 查找内容：`(<a href="+.*)( )` 替换为：`<a href="#"`

**解决方案解释** 第一个括号`()`允许我们访问它里面的括号内的任何内容我做了它搜索并且`<a href="`我想继续选择我想要删除的内容，所以我继续选择我之后的所有内容选择网址，我想停止选择，所以我把第二个括号放在这样的地方，使它在选择分隔元素的空间后停止选择`<a href="``url``+.*``href="``space``( )`

在大多数情况下，`<a href="url">`标签具有`class`或`id`两者兼有，属于该元素的最后一个引号`href`与“类”元素或后面写的任何其他元素之间有空格

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:09:59.093

*   找什么：`href=\".+\"`

*   用。。。来代替：`href="#"`

这适用于您提供的示例。如果真实文本更复杂，它可能不起作用。

# javascript - iframe 图片默认缩小问题

> ID：14557525
> 
> 赞同：2
> 
> 时间：2013-01-28T07:40:50.720
> 
> 标签：javascript, html, iframe

我正在通过 iframe 加载图像，并删除了缩放和自动滚动的默认样式。现在，当图像尺寸为 1024*768 时（从 windows 的示例图片中提取图像时），我在 IE 和 Chrome 中显示图像时遇到问题，并且它适用于较小尺寸的图片 200*100。问题是只显示了部分图像。我猜这是chrome和ie的缩放问题。请帮助我解决这个问题。

我为 IFrame 所做的代码是

```
<div class="dataGroup inline-inputs" >  
<label for="_erCurrentLogo">Current Logo:</label>
<iframe id="imgLogo"  frameborder="0" width="100%" height="100%" scrolling="no"></iframe>
<a id="deleteEmployerLogo" href="javascript:void(0)" onClick="deleteLogo();return false">delete</a> 
</div> 
```

![在 Chrome 和 IE 中出现的图片问题](../Images/629e1164fd6cb131a80748b288ee4da4.png) ![在 Chrome 和 IE 中出现的图片问题](../Images/04d0703677357eee9a3398ce98d00998.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:37:50.640

这是我对您的问题的建议；

我猜你已经为 iframe 设置了`width`和`height`。（以下是我使用的示例代码）

```
#imgLogo  
{   
    width:200px;  
    height:100px;  
} 
```

在您引用的页面 中使用相同的`height`和图像。`width``iframe`

```
img  
{   
    width:200px;  
    height:100px;  
} 
```

您唯一需要做的就是使高度`image`和`iframe` **宽度**相同。

![样本](../Images/0f4d5799819d365650cbd2ca3e816b7b.png)

# oauth - 使用 chrome 扩展从 gmail 帐户发送电子邮件（Oauth/SMTP）

> ID：14557527
> 
> 赞同：3
> 
> 时间：2013-01-28T07:41:03.417
> 
> 标签：oauth, google-chrome-extension, smtp, gmail, google-api

我为 gmail 创建了一个 chrome 扩展，当用户撰写新邮件时，它将一些数据加载为画廊。选择数据后，数据被加载到正文和主题中。

但是当我想从他/她的帐户发送邮件时，我需要个性化内容然后发送。

到目前为止，我已经使用 jason,js/jquery 来完成上述所有工作。

现在我期待在个性化后发送部分。

感谢您的光临...！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T11:37:38.793

Google 不希望人们弄乱 GMail 代码，因此它没有公开记录和混淆。这主要是一个安全问题，旨在防止外部代码（如扩展程序）在未经用户同意的情况下使用 GMail。

如果你想出现在 GMail UI 上，你应该使用[GMail API](https://developers.google.com/google-apps/gmail/)做一个小工具。

[在 Chrome 扩展中，使用Google Apps Scripts GMail Services API](https://developers.google.com/apps-script/service_gmail?hl=es-ES)会更容易、更安全。您可以从那里发送消息 - 但没有 UI 交互。您可以启动 GAS Web 服务并通过 Ajax 从您的扩展程序调用它。使用[内容服务](https://developers.google.com/apps-script/service_content?hl=es-ES)是最简单的方法。

您应该提供一种方式让用户接受（仅一次）代表他们运行该服务，以便该服务可以访问他们的私人 GMail 数据。只需导航到内容服务的网址，Google 就会提示它们。

# jquery - 如何单击 .hover() 之后显示的 div 链接

> ID：14557533
> 
> 赞同：0
> 
> 时间：2013-01-28T07:41:29.423
> 
> 标签：jquery

将鼠标悬停在链接上后，我正在显示一个 div。我想单击新 div 中的链接之一，单击任何链接 div 后应隐藏。

[您可以在http://jsfiddle.net/xrcwrn/MEdRy/](http://jsfiddle.net/xrcwrn/MEdRy/) html中查看代码：

```
<div id="response">
            <a href="#">Response Request</a>
        </div>
    <div class="new_r_div hidden">
     <ul>
        <li><a href="#">Confirm</a></li>
        <li><a href="#">Delete</a></li>
    </ul>
 </div> 
```

查询：

```
 $("#response").hover(function(){
$('.new_r_div').removeClass('hidden');
},function(){
   $('.new_r_div').addClass('hidden');
}); 
```

CSS：

```
 .new_r_div{
     position:absolute;
    width:100px;
    height:40px;
    background:#ccc;
    overflow: hidden;
    border: solid 2px #ccc;
    background: #99CCFF;

}
.hidden{
  visibility: hidden;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:44:23.107

尝试将隐藏的 div 放入 #response div

演示：http: [//jsfiddle.net/MEdRy/4/](http://jsfiddle.net/MEdRy/4/)

HTML：

```
<div id="response">
    <a href="#">Response Request</a>

    <div class="new_r_div hidden">
         <ul>
            <li><a href="#">Confirm</a></li>
            <li><a href="#">Delete</a></li>
        </ul>
     </div>
</div> 
```

JS：

```
$("#response").hover(function(){
    $('.new_r_div').removeClass('hidden');
},function(){
    $('.new_r_div').addClass('hidden');
});

$("#response li a").click(function(){
     $('.new_r_div').addClass('hidden');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:49:44.710

这是一个更新的 jsFiddle，应该可以工作，在单击隐藏 div 内的链接时关闭：http: [//jsfiddle.net/xrcwrn/MEdRy/](http://jsfiddle.net/xrcwrn/MEdRy/)

我已将它们分开，因此您可以为这两种情况添加更多 (AJAX) 操作。

```
$("#confirm").click(function() {
  $('.new_r_div').addClass('hidden');
});

$("#delete").click(function() {
  $('.new_r_div').addClass('hidden');
}); 
```

并把隐藏`div`在`#response`div里面，就像namkha87说的那样。

# python - 访问另一个类中定义的变量

> ID：14557534
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:41:34.977
> 
> 标签：python, class, python-2.6

我有四个带有以下代码的python脚本：

## 主文件

```
from new import Name1
from new2 import Name2

class Details:

    def __init__(self, id=0, vuse=True):
        assert(id > 0)
        self.id = id
        self.vuse = vuse

    def Main(self):
        try:
            self.dir = "/value/"
            ti = Name1(id = self.id, dir = self.dir)
            name = ti.getDay()
            print name
        except Exception, e:
            print "Failed with %s" % e

if __name__ == "__main__":
    at = Details(id = '1', vuse=True)
    at.Main() 
```

## 新的.py

```
class Name1:

    def __init__(self,id,dir=''):
        self.id = id
        self.dir = dir

    def getDay(self):
        try:
            if id == 1:
                self.day = "monday"
                print "Name %s" % self.day
                return self.day
            else:
                self.day = "Another"
                print "Day %s" % self.day
                return self.day
        except Exception, e:
            print "ERROR : %s" % e 
```

## 新的2.py

```
from find import Find
from main import Details

class Name2:

    def getitems(self):
            self.id = "// This value i want from main.py or new.py script"
        at = Find(id = self.id )
        val = at.value()
        print val

if __name__ == "__main__":
    a = Name2()
    a.getitems() 
```

## 查找.py

```
class Find:

    def __init__(self, id):
        self.id = id

    def value(self):
        if self.id == 1:
            print "Right value"
            ##// Do some operation with id//

        else:
            print "invalid" 
```

我的问题是我如何访问`id value`new2.py 中的... new.py 也一样，我需要 id 来创建一个类的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:50:41.167

你的问题，就目前而言，没有意义。

您在问如何从or中获取`id`值。但其中任何*一个*都没有价值。每个实例和每个实例中都有一个单独的成员。其中可能有 3000 个，也可能有 0 个。`main.py``new.py`*`id``id``main.Details``new.Name1`*

 *您需要知道要从哪个`Details`或`Name1`实例中获取`id`。一旦你知道了，这很容易：

```
my_details.id 
```

这实际上是类的全部意义——一个类定义了可以独立实例化多次的数据和操作的集合。如果这不是你想要的，你不应该使用一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:07:06.240

目前尚不清楚您的程序应该如何工作，但您可以在创建时在 Name2 的实例中初始化 id ：

```
def Main(self):
    self.dir = "/value/"
    ti = Name1(self.id, self.dir)
    ti_2 = Name2(self.id)

class Name2:
    def __init__(self, id):
        self.id = id 
```

或将其作为参数传递给 getitems：

```
def Main(self):
    self.dir = "/value/"
    ti = Name1(self.id, self.dir)
    ti_2 = Name2()
    ti_2.getitems(self.id)

class Name2:
    def getitems(self, id):
        self.id = id 
```*

# iphone - #ifdef 条件没有按我想要的方式工作

> ID：14557537
> 
> 赞同：1
> 
> 时间：2013-01-28T07:41:56.163
> 
> 标签：iphone, ios, objective-c, ipad, ios-universal-app

我正在以编程方式创建 UniversalApp。在我的应用程序中，我有 2 个常量类，并且基于设备我想导入我的常量类。但它总是打开“Constants_iPad”类。即使条件是真或假。

```
#ifndef iPad
    #define iPad    (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#endif
#ifndef iPhone
    #define iPhone  (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad)
#endif

#ifdef iPad  ------> always excute this condition either True of False.
    #import "Constants_iPad.h" // if device is iPad
#else
    #import "Constants_iPhone.h" // if device is iPhone
#endif 
```

当我使用 consol 打印时

```
 #ifdef iPad
     NSLog(@"iPad = %d",iPad);
 #endif 
```

如果条件错误，则打印“0”，如果条件为真，则打印 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:45:45.897

您的逻辑在这里有几个问题，但最大的问题是您无法确定用户是在 iPad 还是 iPhone 上运行程序，直到程序实际在设备上运行（在编译**很久**之后）！

虽然这实际上并不能帮助您完成您想要做的事情，但它始终导入您的 Constants_iPad.h 的原因是因为在顶部，您定义了名为 iPad 的宏，然后在下面说“如果定义了 iPad，然后导入这个文件”。好吧，它总是被定义的。你刚刚在第二行做了。

要完成您要执行的操作，您需要包含这两个文件（确保您的定义是唯一的）。

然后，在您的实现文件中，您使用以下内容：

```
if (iPad) {
    // Use the iPad definitions to do what you want
} else {
    // Use the iPhone definitions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:46:28.583

你试过 #ifdef TARGET_IPHONE 或 #ifdef TARGET_IPAD 而不是 #ifndef iPhone 吗？我不确定#ifndef iPhone 宏？但除此之外，我认为在预编译期间确定导入类的目标是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:00:10.043

**编辑**：您必须使用`#if`而不是`#ifdef`. 如前所述，[这](https://stackoverflow.com/questions/3427888/target-iphone-simulator-macro-not-working)是一个常见的错误。

```
#if TARGET_OS_IPAD
    #import "Constants_iPad.h" // if device is iPad
#else
    #import "Constants_iPhone.h" // if device is iPhone
#endif 
```

和其他宏[在这里](http://cduu.wordpress.com/2010/10/20/differentiate-between-iphone-and-simulator/)。

# android - 处理文件：多次读写

> ID：14557539
> 
> 赞同：1
> 
> 时间：2013-01-28T07:42:18.690
> 
> 标签：android, file

我是 Android 开发的新手，我不知道这与文件有关。

那是关于音频信息的。

因此，如果我创建新文件并写入其中，则在它之后我会从该文件中读取。和新的迭代：我不创建新文件（因为我已经有了这个文件），并写入这个文件。现在我要从文件中读取（第二次写入后）我可以从文件中获取吗？

我需要获得第二份书面信息，我可以通过这种方式获得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:11:36.727

是的，您再次阅读了该文件，假设您使用文本文件来保存数据。前任。

这就是我保存它的方式

```
 File temf=new File(getCacheDir()+"/data/mytext.txt");
    Writer out=null;
    if(temf.exists()){
        temf.delete();
    }
    try {
        out = new BufferedWriter(new FileWriter(temf));
        out.write("sample text") + "\r\n");
        }
        out.flush();
        out.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这就是我检索它的方式

```
 FileInputStream fs;
    try {
        File temf=new File(getCacheDir()+"/data/mytext.txt");
        if (temf.exists()) {
            fs = new FileInputStream(temf);
            DataInputStream dis = new DataInputStream(fs);
            BufferedReader br = new BufferedReader(new InputStreamReader(
                    dis));
            String str=br.readLine();
            while(str!=null)
            {
            if(str=="text you want to compare"){
              break;
             }else{
              str=br.readLine();
             }
            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# php - 使用 jQuery 从 PHP 文件重新加载背景图像

> ID：14557541
> 
> 赞同：0
> 
> 时间：2013-01-28T07:42:28.523
> 
> 标签：php, jquery

我有一个`<body style="<?php include("gallery.php"); ?>"`其中gallery.php 包含一个随机图像数组，在每次重新加载时回显URL。

我想要一个按钮来刷新身体的背景图像。

我目前能够重新加载图像，因为新的 URL 被回显。

例如：

```
$(".refresh").click(function() {
    $("body").css("background-image", "url(<?php include("gallery.php"); ?>)");
}); 
```

但是在脚本中包含画廊文件后，它始终是相同的 url。

**编辑** 我的 PHP 如下：

```
$bg = array(
    array( "url" => "url_1" ),
    array( "url" => "url_2" ),
    ...
);

for ($i=0;$i<1;$i++) {
    $id = array_rand($bg);
    echo "{$bg[$id]['url']}";
    unset($ad[$id]);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:52:26.253

它将以另一种方式`gallery.php`输出图像（不仅仅是 url），因此您可以`gallery.php`像这样访问：

```
$(".refresh").click(function() { 
    $("body").css("background-image", 'url("http://www.mysite.com/gallery.php?'+Math.random()+'")'); 
}); 
```

使用`Math.random()`will 传递一个随机数以避免缓存。

所以在`gallery.php`你有类似的东西：

```
$bg = array(
    array( "url" => "url_1" ),
    array( "url" => "url_2" ),
    ...
);

shuffle($bg); // Random order

echo file_get_contents($bg[0]['url']);
//instead of echo $url; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:52:34.253

```
$(".refresh").click(function() { 
    $.get('gallery.php', function(data) {
        $("body").css("background-image", "url('"+data+"')"); 
    }
}); 
```

PHP 是服务器端脚本语言，Javascript 是客户端脚本语言。我们不能像你以前那样使用它们。但是您可以从客户端向服务器发送请求以方便使用 URL 的正文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:15:00.840

IMO Ajax 太过分了，通过 php 脚本传输所有图像会产生不必要的内存开销。对于非常大的图像，它甚至可能在您的网络服务器上产生内存问题。如前所述，最好的方法是将所有图像放在一个 javascript 数组中。您可以将`gallery.php`一组 URL 输出到图像。

```
[ 'http://url1/', 'http://url2', ... ] // etc 
```

然后你可以像这样在你的文件中调用它：

```
<script type="javascript">
  var backgroundImages = <?php include("gallery.php"); ?>;
  function refresh() {
    $("body").css("background-image", "url(" + backgroundImages[Math.round(Math.random() * backgroundImages.length)] + ")"); 
  }
  $(function() { refresh(); });
  $(".refresh").click(refresh);
</script> 
```

# node.js - Node.js 上奇怪的内存使用情况

> ID：14557544
> 
> 赞同：0
> 
> 时间：2013-01-28T07:42:40.113
> 
> 标签：node.js, memory

这个简单的代码将 100 万个字符串（100 个字符长度）存储在一个数组中。

```
function makestring(len) {
    var s = '';
    while (len--) s = s+'1';
    return s;
}

var s = '';
var arr = [];
for (var i=0; i<1000000; i++) {
    s = makestring(100);
    arr.push(s);
    if (i%1000 == 0) console.log(i+' - '+s);
} 
```

当我运行它时，我得到这个错误：

```
(...)
408000 - 1111111111111111111 (...)
409000 - 1111111111111111111 (...)
FATAL ERROR: JS Allocation failed - process out of memory 
```

奇怪的是 100 万 * 100 只是 100 兆字节。

但是，如果我将`s = makestring(100);`循环移到外部...

```
var s = makestring(100);
var arr = [];
for (var i=0; i<1000000; i++) {
    arr.push(s);
    if (i%1000 == 0) {
        console.log(i+' - '+s);
    }
} 
```

这执行没有错误！

为什么？如何在节点中存储 100 万个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:45:40.210

在将字符串生成移出循环的那一刻，您基本上只需创建一个字符串并将其推入数组中一百万次。

然而，在数组内部，只使用了指向原始字符串的指针，这比将字符串保存一百万次要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:46:41.957

您的第一个示例构建`1000000`字符串。

在您的第二个示例中，您使用相同的字符串对象并将其添加到您的数组`1000000`时间中。（它不是复制字符串；数组的每个条目都指向同一个对象）

V8 做了很多事情来优化字符串的使用。例如，字符串连接（在大多数情况下）比您想象的要便宜。与其构建一个全新的字符串，它通常会选择在幕后以链表方式连接它们。

# string - 如何检查 CComBSTR 是否以某个前缀开头？

> ID：14557545
> 
> 赞同：3
> 
> 时间：2013-01-28T07:42:45.497
> 
> 标签：string, visual-c++, atl, bstr

我遇到了一段代码，我需要简单地对给定的 CComBSTR 对象（类似于`Y.StartsWith("X")`）进行前缀检查。C++ 对我来说有点陌生，我最关心的是效率。我不需要以任何方式修改 CComBSTR。我想要的只是返回一个布尔值是否以 X 前缀开头。

查看[CComBSTR 成员](http://msdn.microsoft.com/en-US/library/d6x8shh5%28v=vs.80%29.aspx)下 API 中列出的运算符，它允许进行非常基本的比较，例如 ==、>、< 等。我对如何尝试解决这个问题有两个想法（如下所列）。但是，我对解决此问题的最有效/最简单的方法没有深入的了解。如果我完全不在基地，请告诉我。

1.  使用[BSRTToArray](http://msdn.microsoft.com/en-US/library/9tcy6xsz%28v=vs.80%29.aspx)创建一个数组，然后在其中迭代前 n 个索引以检查它是否具有某个前缀。
2.  从 CComBSTR 获取 BSTR 并在 BSTR 上进行一些比较（还没有弄清楚如何做到这一点）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T07:49:17.443

[`wcsncmp`](http://msdn.microsoft.com/en-us/library/eywx8zcx%28v=vs.71%29.aspx)将为您比较有限数量的起始字符：

```
BOOL StartsWith(BSTR sValue, const WCHAR* pszSubValue)
{
    if(!sValue)
        return FALSE;
    return wcsncmp(sValue, pszSubValue, wcslen(pszSubValue)) == 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T23:00:07.197

```
 BOOL StartsWith(BSTR sValue, BSTR prefix)
         {
         if (!prefix)
            return TRUE;
         auto prefixlen = wcslen(prefix);
         if (prefixlen == 0)
            return TRUE;
         if (!sValue)
            return FALSE;
         return wcsncmp(sValue, prefix, prefixlen) == 0;
         }

   BOOL EndsWith(BSTR sValue, BSTR suffix)
         {
         if (!suffix)
            return TRUE; // always true if suffix is blank or null
         auto suffixlen = wcslen(suffix);
         if (suffixlen == 0)
            return TRUE; // always true if suffix is blank or null
         if (!sValue)
            return FALSE;
         auto valuelen = wcslen(sValue);
         if (suffixlen > valuelen)
            return FALSE;
         auto skip = valuelen - suffixlen;
         return wcsncmp(sValue + skip, suffix, wcslen(suffix)) == 0;
         } 
```

我在这里包含了一个后缀版本，并包含了 Roman R 答案的变体，它允许使用空白前缀字符串。

**注意：** *这些都没有经过很好的测试*

# ganglia - 有神经节的api吗？

> ID：14557546
> 
> 赞同：7
> 
> 时间：2013-01-28T07:42:49.567
> 
> 标签：ganglia

您好我想询问是否有一个 API 可用于从单个 ganglia 服务器检索所有客户端的 Ganglia 统计信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T15:23:57.933

Ganglia gmetad 组件默认侦听端口 8651 和 8652，并使用 XML 度量数据进行回复。XML 数据类型定义可以在 GitHub 上[查看](https://github.com/ganglia/monitor-core/blob/master/gmond/dtd.h)。

需要将 Gmetad 配置为允许将 XML 回复发送到特定主机或所有主机。默认情况下只允许本地主机。这可以在 /etc/ganglia/gmetad.conf 中更改。

连接到端口 8651 将为您提供所有指标的默认 XML 报告作为响应。

端口 8652 是允许自定义查询的交互式端口。Gmetad 将识别发送到此端口的原始文本查询，即不是 HTTP 请求。

以下是一些查询的示例：

*   `/?filter=summary`（返回整个网格的摘要，即所有集群）
*   `/clusterName`（返回名为“clusterName”的集群的原始数据）
*   `/clusterName/hostName`（返回集群“clusterName”中主机“hostName”的原始数据）
*   `/clusterName?filter=summary`（仅返回集群“clusterName”的摘要）

该`?filter=summary`参数将输出更改为包含所有主机上每个指标值的总和。还为每个指标提供了主机数量，以便可以计算平均值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T17:13:52.790

是的，有一个用于 Ganglia 的 API：[https ://github.com/guardian/ganglia-api](https://github.com/guardian/ganglia-api)

您应该查看 2012 Velocity Europe 的演示文稿 - 这真是一个很棒的演讲：[http ://www.guardian.co.uk/info/developer-blog/2012/oct/04/winning-the-metrics-battle](http://www.guardian.co.uk/info/developer-blog/2012/oct/04/winning-the-metrics-battle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T04:56:15.757

您还可以使用“pip install gangliarest”从 pypi 安装一个 API，并设置一个由 Redis 缓存和索引器支持的可配置 API 以提高性能。

[https://pypi.python.org/pypi/gangliarest](https://pypi.python.org/pypi/gangliarest)

# jira - 将从 JIRA 导出的 XML 导入到其他开源 bugtracker

> ID：14557551
> 
> 赞同：4
> 
> 时间：2013-01-28T07:43:24.287
> 
> 标签：jira, bug-tracking

我想每天导入`XML`从`JIRA`任何开源错误跟踪器导出的内容。我已经用谷歌搜索了它，但我找不到任何指向正确方向的东西。

如果您知道任何可以导入从 JIRA 导出的错误的开源错误跟踪器，您能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:50:38.297

似乎有一个脚本可以将 JIRA 导入[Trac](http://trac.edgewall.org/)：[http ://trac-hacks.org/wiki/JiraToTracIntegration](http://trac-hacks.org/wiki/JiraToTracIntegration)

关于从 JIRA 到[Bugzilla](http://www.bugzilla.org/)的博客文章：[http ://www.bdunagan.com/2011/11/07/migrating-jira-to-bugzilla/](http://www.bdunagan.com/2011/11/07/migrating-jira-to-bugzilla/)

# c# - Linq To Sql 使用 clickonce 更新 mdf 文件

> ID：14557553
> 
> 赞同：1
> 
> 时间：2013-01-28T07:43:33.543
> 
> 标签：c#, .net, sql, linq-to-sql, clickonce

我有一个使用 Linq2sql 并有一个数据库（mdf 文件）的应用程序。我使用 clickonce 来发布应用程序。我需要更改数据库结构，我怎样才能做到这一点并使用 clickonce 更新 mdf 文件而不丢失文件中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:24:52.283

如果您将 mdf 放在数据目录中，那么您可以在第一次运行新安装的版本时访问该 previous-version-mdf-file，因为旧数据文件可以在 PRE 目录中访问。因此，此时您可以将数据从旧 mdf 复制到新 mdf。

为了让您全面了解，新安装完成时是否会更新数据文件。复制任何旧数据由您决定。

解释第一次运行 clickonce 安装的链接： [如何检测第一次运行 ClickOnce 部署的应用程序？](https://stackoverflow.com/questions/5811780/how-do-i-detect-the-first-time-a-clickonce-deployed-application-has-been-run)

链接提到 PRE 数据目录以访问以前版本的文件。 [clickonce - 写入/读取数据目录是否需要管理员权限？](https://stackoverflow.com/questions/2369025/clickonce-does-writing-reading-to-the-data-directory-required-admin-rights)

# java - 使用泛型在 Java 中创建链接列表

> ID：14557554
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:43:35.150
> 
> 标签：java, generics, linked-list, nodes

我浏览了该网站，找不到任何至少与我正在做的事情相媲美的东西（请不要链接我一直在寻找一个小时的任何 stackoverflow 回复或问题），所以我决定问这个问题。我正在尝试创建一个使用泛型的链接列表（不使用任何类型的库），这是所有相关代码。

```
public class LList<T> 
{
MyNode<T> head = null;
MyNode<T> tail = null;
MyNode<T> temp = null;
int count = 0;;
Scanner scan = new Scanner(System.in);

//puts a new value at the edn of the list
public void add(T i)
{
    if(head == null)
    {
        head = new MyNode<T>();
        head.data = i;
        head.next = tail;
        tail = head;
    }
    else
    {
        tail.next = new MyNode<T>();
        tail = tail.next;
        tail.data = i;
    }
    count ++;
}

//inserts a new value at a given index
public void insert(int index, T item)
{
    if(index == size())
    {
        add(item);
    }
    else if(index == 0)
    {
        MyNode<T> temp = new MyNode<T>();
        temp.data = item;
        temp.next = head;
        head.previous = temp;
        head = temp;
        count++;
    }
    temp = head;
    for(int i = 0; i < index-1; i++)
    {
        temp = temp.next;
        MyNode<T> myNode = new MyNode<T>();
        myNode.data = item;
        myNode.next = temp.next;
        temp.next = myNode;
        count++;
    }
}

//returns the number of values in the list
public int size()
{
    return count;
}

//returns the value at a given index
public T get(int index)
{
    if(head == null || index > count -1)
    {
        return null;
    }
    if(index < 0 || index >= count)
    {
        System.out.println("This does not exist");
    }
    MyNode<T> p = head;
    int size = 0;
    while(size < index && p.next != null)
    {
        p = p.next;
        size++;
    }
    if(count != index)
    {
        return null;
    }
    else
    {
        return p.data;
    }
}

//removes the returns the first value in the list
public T remove()
{
    head = head.next;
    head.previous = null;
    count--;
    return (T) head;
}

//removes and returns the value at a given index
public T removeAt(T elem)
{
    temp = head;
    MyNode<T> two = null;
    if(head.data.equals(elem))
    {
        head = head.next;
        head.previous = null;
        count--;
        return elem;
    }
    else if(tail.data.equals(elem))
    {
        tail = tail.previous;
        tail.next = null;
        count--;
        return elem;
    }
    while(temp != null && !temp.data.equals(elem))
    {
        two = temp;
        temp = temp.next;
    }
    if(temp == null)
    {
        return null;
    }
    two.next = temp.next;
    T spare = temp.data;
    temp = null;
    count--;
    return spare;
}

//removes and returns the last value in the list
public T removeLast()
{
    temp = tail;
    tail = tail.previous;
    temp = null;
    count--;
    return (T) tail;
}

//creates a string representation of all the values in the list
public String toString()
{
    String result = null;
    for(int i = 0; i < count; i++)
    {
        result =  i + " : " + get(i).toString(); 
    }
    return result;
}

//removes all the values in the list
public void clear()
{
    for(int i = count -1; i >= 0; i++)
    {
        removeAt(i);
    }
}

//searches for a value in the list and returns the first index of that
//value when found
public int search(T find)
{
    if(head == null)
    {
        return -10;
    }
    MyNode<T> p = head;

    do
    {
        if(find.compareTo(p.data) == 0)
        {
            return 0;
        }
        else
        {
            return -1;
        }
        p = p.next;
    }while(p != null);
}

public void itemChosen(int choice, LLMenu[] menu)
{
    LLMenu m = menu[choice-1];
    switch(m)
    {
    case ADD:
        System.out.println("What value would you like to add?");
        T addThis = scan.nextInt();
        add(addThis);
        break;
    case INSERT:
        System.out.println("What index would you like to replace?");
        T replace = scan.nextInt();
        System.out.println("What number would you like to insert?");
        int val = scan.nextInt();
        insert(val, replace);
        break;
    case SIZE:
        size();
        break;
    case GET:
        System.out.println("What index would you like to look at?");
        int thisOne = scan.nextInt();
        get(thisOne);
        break;
    case REMOVE:
        remove();
        break;
    case REMOVEAT:
        System.out.println("What index would you like to remove?");
        T thisHere = scan.nextInt();
        removeAt(thisHere);
        break;
    case REMOVELAST:
        removeLast();
        break;
    case TOSTRING:
        toString();
        break;
    case CLEAR:
        clear();
        break;
    case SEARCH:
        System.out.println("What value would you like to search for?");
        T searchForMe = scan.nextInt();
        search(searchForMe);
        break;
    }
    }
 } 
```

和我的节点：

```
public class MyNode<T>
{
T data;
MyNode<T> next;
MyNode<T> previous;
} 
```

我真正遇到问题的地方是 LList 中的 switch 语句，我正在扫描应该设置为泛型的项目，显然没有使用扫描器读取泛型的方法。所以问题1，我如何读入并将它们设置为泛型，以及问题2，在我在LList 中的clear 方法中，如何在期望泛型时使用removeAt 时发送变量i？请保持所有答案的相关性，并感谢您的宝贵时间！

*编辑* 我的搜索方法中的另一个问题 do-while 有一个 if 语句说 if(find.compareTo(p.data) == 0) 我如何更改它以使其工作？我真的不知道该放什么，所以我只是把我的想法写下来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:59:59.357

#1。您可以自己实现通用控制台输入法 - 这是一个示例：[改进我的 Java 通用控制台输入法？](https://stackoverflow.com/questions/3280369/improvement-s-to-my-java-generic-console-input-method/3280426#3280426)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:03:07.000

我相信您的`itemChosen`代码应该在`main`方法中。

您显然需要声明 T 类型。

```
public void main(String[] args)
{
LList<Integer> myLList = new LList<>(); 

} 
```

现在添加您想要的大小写切换代码。

# java - 刷新数据后删除文件夹

> ID：14557557
> 
> 赞同：0
> 
> 时间：2013-01-28T07:43:41.717
> 
> 标签：java, android, directory

目前，我有 20 期杂志，第 20 期已下载并保存到我的内存中。

当我从数据库中删除第 20 期（包括其封面页和 url 链接）时，首页只会显示 19 期，并且正确地，第 20 期的数据应该被删除，但它没有。

当我阅读第 19 期时，出现了第 20 期的数据。如何确保从数据库中删除问题 20 时，当用户单击刷新按钮时，下载的数据也应从我的应用程序中删除？

这就是我刷新封面图片的方式：

```
 /** REFRESH BUTTON CLICKED **/
 ImageButton refresh = (ImageButton) findViewById(R.id.btn_refresh);
 refresh.setVisibility(Button.VISIBLE);
 refresh.setOnClickListener(new View.OnClickListener() {

     public void onClick(View v) {

         deleteCovers();
         urlList.clear();
         thumbnailList.clear();
         previewList.clear();
         File strPath = new File(Environment.getExternalStorageDirectory() + folderName+"Covers");
         if(!strPath.exists())
         {
         new downloadCoverImage().execute();
         }

     }}); 
```

这是我下载杂志封面的方式：

```
 /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class downloadCoverImage extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
         @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(Store.this);
            progressDialog.setMessage("Loading.." + "\n" + "加载中..");
            progressDialog.setIndeterminate(false);
            progressDialog.setCancelable(false);
            progressDialog.show();
        } 

        /**
         * getting all magazines from url
         * */
        protected String doInBackground(String... args) {
            URL myFileUrl = null;

        // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_magazine, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    mag = json.getJSONArray(TAG_MAGAZINE);

                    for (int i = 0; i < mag.length(); i++) {
                        JSONObject c = mag.getJSONObject(i);

                        // Storing each json item in variable
                        String magLink = c.getString(TAG_MAGAZINE_URL);
                        String magThumb = c.getString(TAG_MAGAZINE_THUMBNAIL);

                        urlList.add(magLink);
                        thumbnailList.add(magThumb);

                        //System.out.println(thumbnailList);
                    }                   
                } 
                else {

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            for (int i = 0; i < thumbnailList.size(); i ++)
            {
            thumbnail = thumbnailList.get(i).toString();
            Log.d("thumbnail", thumbnail);
            Log.d("i value",String.valueOf(i));

            try {
                myFileUrl = new URL(thumbnail);    // RETRIEVE IMAGE URL
                }
             catch (MalformedURLException e) {
                e.printStackTrace();
            }
            try {
                HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream in = conn.getInputStream();
                Log.i("im connected", "Download");
                bmImg = BitmapFactory.decodeStream(in);

                File filename;
                try {
                     // GET EXTERNAL STORAGE, SAVE FILE THERE
                    File storagePath = new File(Environment.getExternalStorageDirectory(),folderName+"/Covers");
                    storagePath.mkdirs();

                    filename = new File(storagePath + "/cover"+i+".jpg");
                    FileOutputStream out = new FileOutputStream(filename);
                    bmImg.compress(Bitmap.CompressFormat.JPEG, 90, out);

                    out.flush();
                    out.close();
                    MediaStore.Images.Media.insertImage(getContentResolver(),filename.getAbsolutePath(), filename.getName(),
                            filename.getName());          

                 // displayImage();
                } catch (Exception e) {
                    e.printStackTrace();
                }   
            } catch (IOException e) {
                e.printStackTrace();
            }   

            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {    

            progressDialog.dismiss();
            displayImage();

    } 
```

这就是我显示图像的方式：

```
 public void displayImage()
    {
         mStringList= new ArrayList<String>();
         File strPath = new File(Environment.getExternalStorageDirectory() + folderName+"/Covers");
         int lists = strPath.listFiles().length; 
         Log.d("number of items in /Futsing/Covers ",String.valueOf(lists));

         File yourDir = new File(strPath, "");
         for (File f : yourDir.listFiles()) {
             if (f.isFile())
             {
                 String name = f.getName();
                 String v = strPath + "/" + name;
                 mStringList.add(v);
             }
         }

         mImageIds = new String[mStringList.size()];
         mImageIds = mStringList.toArray(mImageIds);

         for(int i = 0; i < mImageIds.length ; i++){
             //Log.d("string is",(mImageIds[i]));
         }

        coverFlow = (CoverFlow) findViewById(R.id.coverFlow1);
        coverFlow.setAdapter(new ImageAdapter(this));
        coverImageAdapter =  new ImageAdapter(this);

        coverFlow.setOnItemClickListener(new OnItemClickListener()
            {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {

                    if(process==false)
                       {

                        adapter.clear();
                        File sdCard1 = Environment.getExternalStorageDirectory();
                        File dir1 = new File (sdCard1.getAbsolutePath() + folderName+"/issue"+issueNumber+"/"); 

                                /** IF FILE EXISTS **/
                                if(dir1.exists())
                                {
                                    Intent intent = new Intent();
                                    intent.setClass(Store.this, Reader.class);
                                    intent.putExtra("issue", issueNumber);
                                    startActivityForResult(intent, GET_INTENT_CODE); 

                                }
                                else
                                {
                                    new LoadPreview().execute();
                                }
                          }else{
                                // nothing to do here it means the process is running
                          }
                    }
            }

        );

         coverFlow.setOnItemSelectedListener(new OnItemSelectedListener() 
         {

             public void onItemSelected(AdapterView<?> parent, View view, final int position, long i) 
             {  
                pos=position;
                issueNumber = (mImageIds.length-1 - position)+1;
                adapter.clear();
                buttonsCheck();

                // TODO Auto-generated method stub

             }

             public void onNothingSelected(AdapterView<?> arg0) {
                 // TODO Auto-generated method stub

             }
         });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:00:50.277

```
 File t=new File("/data/data/com.example.appname/temp/");//delete from internal memory
            File t1=new File("/mnt/sdcard/foldername/");//delete from external memory
    DeleteWholeDirectory.deleteWholeDirectory(t);
    DeleteWholeDirectory.deleteWholeDirectory(t);
public static void deleteWholeDirectory(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory())
        for (File child : fileOrDirectory.listFiles()) {
            child.delete();
            deleteWholeDirectory(child);
        }

    fileOrDirectory.delete();
} 
```

上述删除文件夹的代码

# php - 访问 smarty 变量： smarty 3.1.12

> ID：14557561
> 
> 赞同：0
> 
> 时间：2013-01-28T07:44:08.490
> 
> 标签：php, variables, smarty, smarty3

我正在使用 smarty 3.1.12 进行模板化，但是在我的 php 文件中，我正在尝试访问我的 smarty 变量。我所有的研究都只返回了以前版本的 smarty 的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T22:52:37.993

在 php 文件中：

```
$smarty->assign('myVars',$myVars); 
```

在 tpl 文件中：

```
{$myVars} 
```

或者：

```
{foreach $myVars as $k=>$var}
{$var}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:52:40.510

使用下面的代码

```
$myVars = $this->get_template_vars(); 
$this->assign('myVars',$myVars); 
{foreach from=$myVars key=k item=i} 
{$k}: {$i}
{/foreach} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T02:47:08.367

```
$myVar = $SMARTY->getTemplateVars('myVar'); 
```

将此方法用于您的 smarty 版本 3.1.12

# android - 用 android 发布密钥替换 android 调试密钥

> ID：14557562
> 
> 赞同：0
> 
> 时间：2013-01-28T07:44:12.727
> 
> 标签：android, key, release, signing

嗨，我是 android 的新手。我有一个用调试密钥签名的 android apk。现在我的密钥已经过期，所以我更新了我的密钥并且我有释放密钥。问题是我无法使用新的发布密钥更新现有的应用程序。如果我尝试用新的发布密钥替换现有的应用程序（使用调试器密钥签名），我收到错误“未安装应用程序”。此问题的解决方案或解决方法是什么？我尝试卸载旧的并安装新的。它工作正常，但我希望更换新应用程序。请帮忙。提前感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T07:46:58.877

您无法重新安装使用不同密钥签名的应用程序。如您所说，您必须先卸载旧的并使用新密钥签名再次安装。

来自安卓[文档](http://developer.android.com/tools/publishing/app-signing.html#strategies)：

> 应用程序升级 - 当您发布应用程序更新时，如果您希望用户无缝升级到新版本，您将希望继续使用相同的证书或证书集对更新进行签名。当系统安装应用程序更新时，它会将新版本中的证书与现有版本中的证书进行比较。如果证书完全匹配，包括证书数据和顺序，则系统允许更新。如果您在不使用匹配证书的情况下签署新版本，您还需要为应用程序分配一个不同的包名称——在这种情况下，用户将新版本安装为一个全新的应用程序。

# java - 小程序不在浏览器中运行

> ID：14557563
> 
> 赞同：0
> 
> 时间：2013-01-28T07:44:17.577
> 
> 标签：java, applet

我对 Java 很陌生，刚刚完成了 Java 基础粗略。已经在网络上的不同论坛上找到了很多答案和帮助。我设计了一个带有 sql db 访问权限的 Applet。在 NetBeans IDE 7.2.1 上运行它，它可以 100% 运行，但是一旦我使用`.html`带有 view 命令的文件运行它`NetBeans`，我就会收到以下错误。

```
äccess denied "java.lang.RuntimePermission" "accessClassInpackage.sun.jdbc.odbc" 
```

我已经在 jre 目录中的 java 策略文件中添加了以下几行。

```
permission java.lang.RuntimePermission "accessClassInPackage.sun.jdbc.odbc", "read";
permission java.lang.RuntimePermission "accessClassInPackage.sun.jdbc.odbc", "write";
permission java.util.PropertyPermission "file.encoding", "read";
permission java.util.PropertyPermission "file.encoding", "write"; 
```

我做错了什么，或者在浏览器中运行小程序需要什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T07:55:10.010

我不认为小程序可以从沙箱打开 JDBC 连接。您可能必须像这样签署您的小程序

[http://www.qoppa.com/faq/signapplet.htm](http://www.qoppa.com/faq/signapplet.htm)

# c# - 如何将css应用于表格行

> ID：14557566
> 
> 赞同：1
> 
> 时间：2013-01-28T07:44:34.380
> 
> 标签：c#, jquery, asp.net, html

我需要将背景颜色应用于我的 html 表的交替行。

我当前的代码：

```
.licList
    {
        width: 100%;
        border: 1px solid #f7f7f7;
        text-align: center;
        border-collapse: collapse;
    }

    .licList th
    {
        font-weight: bold;
        background-color: #dbdbdb;
        border-bottom: 1px solid #f1f1f1;
        padding: 4px 5px;
    }

    .licList td
    {
        padding: 4px 5px;
    }

    .odd
    {
        background-color: #ffffff;
    }
    .odd td
    {
        border-bottom: 1px solid #cef;
    } 
```

和 jquery 是

```
 $(document).ready(function () {
        $("licList:tr:odd").addClass("odd");
    }); 
```

我确定上面的 jquery 不正确我在单页中有多个表，所以我不能申请

```
$(document).ready(function(){
    $("tr:odd").addClass("odd");
}); 
```

所以我的问题是如何解决这个问题？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:46:09.417

> jquery 不正确我在单页中有多个表，所以我无法申请

将 a 分配`id/class`给您的表并访问该表下的行。假设你的表有 id tbl

**[现场演示](http://jsfiddle.net/RDgUc/)**

```
<table id="tbl">
   <tr>
        <td>1</td>
        <td>1</td>
   </tr> 
   <tr>
        <td>1</td>
        <td>1</td>
   </tr> 
</table>

$(document).ready(function(){
    $("#tbl tr:odd").addClass("odd");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:47:19.007

请记住，jQuery 选择器就像 CSS 选择器一样，因此`licList:tr:odd`不是有效的选择器。你可以只用 CSS 来做到这一点：

```
.licList:nth-child(odd) { ... } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T07:47:30.303

偶数行和奇数行都有一个 Jquery 选择器。您可以将其与表 ID 一起使用，

```
$(document).ready(function(){
    $("#table1 tr:odd").addClass("odd");
    $("#table1 tr:even").addClass("even");
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T07:48:16.440

CSS3 允许这样做，不要使用 javascript，因为你可以轻松做到

```
tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#fff; } 
```

[**演示**](http://www.fore6.com/samples/alternate_row_color/css3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T07:57:53.193

如果你使用`jQuery.each()`，那么它将是两个集合，`table`你可以从那里过滤而不是一个巨大的集合`tr`

```
$('table').each(function(){
    $(this).find('tr').filter(':odd').addClass("odd"); //first rows always the same
}); 
```

[小提琴](http://jsfiddle.net/gillyspy/rymvh/)

# c# - 如何在单个 XML 文件中由多个用户同时更新不同的 XML 元素？

> ID：14557569
> 
> 赞同：1
> 
> 时间：2013-01-28T07:44:52.607
> 
> 标签：c#, xml

我有一个 XML 文件：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<NewDataSet>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema"                                     <xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
 <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="UsersPreferenceSettingsDT">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="USERPROFILEID" type="xs:int" minOccurs="0" />
            <xs:element name="SCREENAMEID" type="xs:int" minOccurs="0" />
            <xs:element name="FREEZEDCOLUMNID" type="xs:string" minOccurs="0" />
            <xs:element name="ORDEROFCOLUMNS" type="xs:string" minOccurs="0" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:element>
</xs:schema>
<UsersPreferenceSettingsDT>
  <USERPROFILEID>219</USERPROFILEID>
  <SCREENAMEID>1</SCREENAMEID>
  <FREEZEDCOLUMNID>2|3|4|5</FREEZEDCOLUMNID>
  <ORDEROFCOLUMNS>1</ORDEROFCOLUMNS>
</UsersPreferenceSettingsDT>
<UsersPreferenceSettingsDT>
  <USERPROFILEID>123</USERPROFILEID>
  <SCREENAMEID></SCREENAMEID>
  <FREEZEDCOLUMNID>s|s|s</FREEZEDCOLUMNID>
  <ORDEROFCOLUMNS></ORDEROFCOLUMNS>
</UsersPreferenceSettingsDT>
</NewDataSet> 
```

因为我必须更新 XML 元素（即 USERPROFILEID = 219，USERPROFILEID 是唯一的）。同时另一个用户也更新了相同的 XML 文件但不同的 XML 元素（即 USERPROFILEID=123）。XML 如何反映两个用户的 XML 更新（如 SQL 或 ORACLE DB 更新）。我使用以下代码进行更新。

```
userPreferenceSettingsDS.WriteXml(userPreferenceSettingsXMLFilePath, XmlWriteMode.WriteSchema); 
```

但它仅反映最后一个用户配置文件更新值，而多个用户同时更新 XML。有人指导我摆脱这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:49:34.807

好吧，既然我们谈论的是 xml 文件而不是数据库，您将无法获得“最新”版本的数据，除非您总是从文件而不是从内存中加载，但即便如此，您也会面临并发问题。

这里最好的选择是切换到数据库，或者可能实现像 Singleton Repository 这样的服务所有用户的东西，这样您将始终在 xml 中返回数据的最新值。

它会解决您的另一个问题，当您写入文件时，您将写入数据的“合并”版本，其中包含来自多个用户的更改。

* * *

XML 作为数据库的资源：

[http://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/346a2816-faae-461d-aaa8-235d9c0dd55c](http://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/346a2816-faae-461d-aaa8-235d9c0dd55c)

[C#.net 中的 XML 数据库](https://stackoverflow.com/questions/2635175/xml-database-in-c-net)

[http://bytes.com/topic/c-sharp/answers/460625-c-pure-xml-database](http://bytes.com/topic/c-sharp/answers/460625-c-pure-xml-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:26:56.733

在我看来，您应该使用 XML 数据库。您越早采取行动，您从中获得的好处就越多，而且您在创建自己的不足的本土解决方案上花费的钱就越少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:57:42.730

或为每个用户使用一个配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:04:47.550

您需要确保一次只能进行一次保存操作。

为此，您需要提供一个静态（共享）类来读取和写入文件。对此花哨的新流行语是 Singleton 实例，但它只是以下内容：

```
public static class MyXMLAccessor
{
    public static void saveTheData()
    {
        //this method would write the data to the XML file and save it.
    }

    public static string ReadTheData()
    {
        //to read the data from the file
    }
} 
```

这样，您可以保证在开始下一个操作之前保存一个操作的结果。

更复杂的解决方案是将 xml 读入应用程序范围的数据集，以便它可以像数据库一样工作。然后，您将使用 DataSet.ToXML() 方法定期将数据集的内容写回文件。

# mysql - MySQL如何同时处理具有唯一值的多个插入？

> ID：14557571
> 
> 赞同：3
> 
> 时间：2013-01-28T07:45:14.980
> 
> 标签：mysql, multithreading

假设我有一个允许用户创建帐户的网站。我有用户 A 和用户 B 试图注册我的网站。用户 A 和用户 B 都选择了相同的用户名，并且数据库表中的用户名字段是唯一的。两者都在相同的确切时间点击注册并且网络条件相同让我们假设查询如何同时到达数据库。MySQL 是如何处理这个问题的？怎么了？

如果我的问题太大而无法在这里回答，请向我推荐一些包含信息的来源，以便我可以研究它。

# javascript - 单击按钮后，切换到不同的页面并显示隐藏的内容

> ID：14557577
> 
> 赞同：0
> 
> 时间：2013-01-28T07:45:38.480
> 
> 标签：javascript, jquery, html

我的主页上有一些“了解更多”链接，所有这些链接都对应于“更多信息”页面上的不同内容部分。这些不同的内容部分都使用 display: none 隐藏。

我想知道是否有一种方法可以使当我单击特定的“了解更多”链接时，用户将被发送到“更多信息”页面，以及与他们单击的“了解更多”链接相对应的内容部分将显示。

我想不出一种方法来实现这一点，但我希望它是可能的，也许使用 JavaScript。

编辑：我目前拥有的代码没什么特别的。`<a>`主页上的四个链接，然后是更多信息页面上的四个 div，最初都使用`display: none`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:49:20.380

解决方案最终相当简单，我做了这个问题的最佳答案中描述的内容：[Getting URL hash location, and using it in jQuery](https://stackoverflow.com/questions/1822598/getting-url-hash-location-and-using-it-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:59:19.793

实现此目的的一种方法是使用要显示的部分的 id 向该链接添加一个哈希，如下所示`<a href="/moreinfo#section-id">Learn More</a>`：然后只需在 /moreinfo 页面上检查它`window.location.hash`并显示 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:07:27.627

你必须这样做：`try to use named anchors`.

# 第一的：

```
<a href="your-page-url-here#section-3">Learn More</a> 
```

当使用单击此链接时，用户将导航到具有不同部分的特定页面。

# 第二：

在此页面上，假设您要显示第三部分：

```
 .....
 <a name='section-3'></a>
 <h1>Your section-3</h1> 
```

在您的情况下`divs are hidden`，请为此使用 js 或 jQuery：

因为您将在位置 url 中获得哈希，然后使用 `.substr()' and`.indexOf()` javascript 方法。

尝试`put this script`在那些页面上`where you are having your hidden divs`

```
$(function(){
   var url = window.location.href;
   var obj = url.substr(url.indexOf('#'));
   $(obj).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T07:50:37.833

```
 <a href="javascript:showContent('id_here');">Learn more</a>

 <script>
    function showContent(id) {
        $("#"+id).show();
    }
 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T07:54:08.657

我认为这是可能的。您可以将信息放在一个 div 上，然后单击“了解更多”，显示该 div。这样，你甚至不需要超链接，只需点击事件，就像楼上的代码一样。当然，这个div之前是隐藏的。

# asp.net - 如何在 Asp.Net 中验证十进制数？

> ID：14557581
> 
> 赞同：0
> 
> 时间：2013-01-28T07:45:43.097
> 
> 标签：asp.net, regex, validation

我需要在 asp.net 中验证一个十进制数。我想使用RegularExpressionValidator。如果您有其他想法，请建议我。该数字必须与 numeric(4,1) 匹配，因此可接受的值为：

> 1个；12; 123; 123,1; （不好：1234；12,34；1,234）

我尝试使用这个表达式：

```
^\d{1,3}(\,\d{0,1})$ 
```

但是这个不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:51:49.203

如果你有逗号，那么后面的数字不是可选的，所以你需要让整个组可选，而不仅仅是数字。

```
^\d{1,3}(,\d)?$ 
```

[在 Regexr 上](http://regexr.com?33iav)查看

`?`简称`{0,1}`

# php - 填写名册时间表的最佳方式

> ID：14557583
> 
> 赞同：0
> 
> 时间：2013-01-28T07:45:48.143
> 
> 标签：php, mysql, laravel, eloquent, blade

各位程序员，

我在 PHP 中使用以下框架构建了一个名册应用程序：Laravel。我有以下问题：

我的应用程序有：用户、任务日期和任务日期时间。每个用户都可以获得分配给他们的 TaskdateTime。TaskdateTime 是 Taskdate 的子代。我想填充一个时间表，每个用户都可以看到他们所有的时间。时间表如下所示：

![在此处输入图像描述](../Images/fc7ea4fb7a316ea311934ec6dded043f.png)

我在我的应用程序中所做的是：获取所有用户，获取所有任务日期，并根据任务日期，获取正确任务日期的任务日期时间。我通过以下方式执行此操作：

```
$taskdates = Taskdate::with('users')->where_date($date)->get();
$employees = Usergroup::with(array('users', 'users.workdates'))->where('usergroup_title', '=', 'Employees')->first(); 
```

你可以看到我获取用户组，关系为：用户，用户->工作日期关系。如上所述，工作日期返回 TaskdateTime 对象的位置。

现在在我看来，我这样做是为了用数据填充它。这似乎有很多额外的麻烦，我认为它可以让我更轻松，但我无法绕过它。无论如何，这是代码：

```
<table id="plan" class="table table-bordered">

    <thead>
        <th></th>
        @foreach($taskdates as $taskdate)
            <th id="{{ $taskdate->id }}">{{ $taskdate->subject }}</th>
        @endforeach
    </thead>
    <tbody>
        @foreach($employees as $employee)
            <tr id="{{ $employee->id }}">
                <td>{{ $employee->name }}</td>

                 @foreach($taskdates as $taskdate)

                    <?php
                    $result = array_filter($employee->workdates, function($user) use ($taskdate){
                         return $user->id === $taskdate->id;
                    });
                    ?>

                    @if( empty($result) )
                        <td></td>
                    @else
                        <td id="{{$result[key($result)]->pivot->id }}" style="{{ ($result[key($result)]->pivot->taskdate_isread) ? '' : 'font-weight:bold;'}}">
                            {{date('H:i', strtotime($result[key($result)]->pivot->taskdate_time))}}
                        </td>
                    @endif

                 @endforeach  

            </tr>
        @endforeach
    </tbody>
</table> 
```

所以我正在过滤每个用户的整个工作日期关系，如果它持有 Taskdate id。如果它是空的，那么不要回显任何东西。

HTML/PHP 的语法在 BLADE 中，所以它可能看起来不正确的 PHP 解析，但它是。

**编辑 ：**

问题 ：

我的代码感觉臃肿。我不认为这是实现结果的最有效方法。你对此有何看法？我喜欢尽可能高效。

# javascript - 使用 Symfony2 和 Twig 的实时时钟 Javascript

> ID：14557588
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:46:20.127
> 
> 标签：javascript, symfony, twig, live, clock

我一直在尝试使用 javascript 进行实时观看以显示在树枝模板中，问题是，当时间改变时它不会自动更新，我不知道这是我的错误还是我没有使用javascript正确，这可能是一个非常愚蠢的错误，或者我正在做一个菜鸟的事情，所以我提前道歉。

```
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Sistema de Soporte a Usuarios TiCad{% endblock %}</title>
        {% block stylesheets %}
    <link rel="stylesheet" href="{{ asset ('css/style.css')}}">
        {% endblock %}

        <link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  
        <script src="{{asset ('js/jquery.min.js') }}"></script>
    <script src="{{asset ('js/script.js')}}"></script>   
        <script src="{{asset ('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js')}}"></script>  
    </head>
    <body>
 {% if app.session.hasFlash('notice') %} 
    <div id="flashmessage" class="flash-notice"> 
       {{ app.session.flash('notice') }} 
   </div> 
{% endif %}
 {% if app.session.hasFlash('info') %} 
    <div id="flashmessage" class="flash-notice"> 
       {{ app.session.flash('info') }} 
   </div> 
{% endif %} 
            <div id="top-bar">
                {% block bar %}
                    <div class="page-full-width cf">
            <ul id="nav" class="fl">
                <li class="v-sep"><a class="round button dark menu-user image-left">Ha iniciado sesion como <strong>{{app.user.username}}</strong></a>
                    <ul>
                        <li><a href="{{ path ('MonseUserBundle_User_show', { 'id': app.user.id })}}">Mi Perfil</a></li>
                        <li><a href="{{ path('logout')}}">Salir</a></li>
                    </ul> 
                </li>
                                <li><a class="round button dark clock image-left">
                                     <script type="text/javascript">
var d=new Date();
var dia=new Array(7);
dia[0]="Domingo";
dia[1]="Lunes";
dia[2]="Martes";
dia[3]="Miercoles";
dia[4]="Jueves";
dia[5]="Viernes";
dia[6]="Sabado";
var mm=new Date();
var m2 = mm.getMonth() + 1;
var mesok = (m2 < 10) ? '0' + m2 : m2;
var mesok=new Array(12);
mesok[0]="Enero";
mesok[1]="Febrero";
mesok[2]="Marzo";
mesok[3]="Abril";
mesok[4]="Mayo";
mesok[5]="Junio";
mesok[6]="Julio";
mesok[7]="Agosto";
mesok[8]="Septiembre";
mesok[9]="Octubre";
mesok[10]="Noviembre";
mesok[11]="Diciembre";
var Hours;
var Mins;
var Time;
Hours = d.getHours();
if (Hours >= 12) {
Time = " P.M.";
}
else {
Time = " A.M.";
}
if (Hours > 12) {
Hours -= 12;
}
if (Hours == 0) {
Hours = 12;
}
Mins = d.getMinutes();
if (Mins < 10) {
Mins = "0" + Mins;
}
document.write("" + dia[d.getDay()]+ ", " + d.getDate() + " de " + mesok[mm.getMonth()] +" de "+ d.getFullYear()+ " - "+ Hours + ":" + Mins +" "+Time);
</script>
                                    </a>
                               </li>
            </ul> <!-- end nav -->
                       <li><a href="logout" class="round button dark menu-logoff image-left fr">Salir</a></li>

        </div> <!-- end full-width -->  
                {% endblock bar %}
        </div> <!-- end top-bar -->

        {% block body %}
        {% endblock %}

        {% block javascripts %}
        {% endblock %}
        {% block footer %}
            <div id="footer">
        <p>&copy; Copyright 2013 <a href="http://www.twitter.com/monsefoster">Monse Foster</a>. Todos los derechos reservados.</p>

    </div> <!-- end footer -->
        {% endblock %}
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:58:12.667

该脚本不起作用，因为时间只转储一次，而应该每秒转储一次。为此，请使用 javascript 函数[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

```
var delay = 1000; // 1000 microseconds equal to 1 second

// setInterval executes passed function every second
setInterval(function() {
    // do time calculation and displaying
}, delay); 
```

# android - AsyncTask HttpParams

> ID：14557593
> 
> 赞同：0
> 
> 时间：2013-01-28T07:46:36.807
> 
> 标签：android, http

任何人都可以帮助我解决以下问题。

1) onPostExecute - Toast.make 在后台发送 HttpRequest。0nCraeteBunle - 执行（）；startNewActivity 显示错误。AsycTask# 运行时异常。在后台评论 Http 请求时，没有显示错误。

在这里，我怎么知道http请求和回复完成了，这样我就可以开始我的新活动了。

2）如何获取HttpParams。从 TIBCO BE 发送（作为具有属性的事件）

3) 如果我在 onPostExecute 中接收 JSONObject、JAVAObject、Integer 而不是 String 怎么办？无法覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:58:22.617

尝试这个，

```
 protected class GetTask extends AsyncTask<Void, Void, Integer> {

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this,
                "Loading", "Please wait");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub

        //call ur HttpRequest
                   httpRequest();
        return 0;
    }

    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);

        if (mProgressDialog.isShowing()) {
            mProgressDialog.dismiss();
        }

        mHandler.sendEmptyMessage(0);
    }
}

Handler mHandler = new Handler() {

    public void handleMessage(Message Msg) {

        if (Flag) {
            //Add ur stuff
        }else{
                } 
```

然后在你的方法中设置`Flag`值

```
 public void httpRequest() {
    // TODO Auto-generated method stub
            String URL ="ADD UR URL";
    try {

        JSONObject ResponseObject = mAPIService.CallAPI(
                YourActivity.this, URL);
        String status = ResponseObject.getString("status");

            Flag = true;

    } catch (Exception err) {
        Flag = false;

    }
} 
```

# jquery - 如何创建具有多级的 Jquery UI Accordion 并在活动页面上保持打开状态

> ID：14557596
> 
> 赞同：2
> 
> 时间：2013-01-28T07:46:48.830
> 
> 标签：jquery, user-interface, accordion, jquery-ui-accordion

我需要有关如何`jquery ui accordion`使用多级创建并在活动页面上保持打开状态的帮助。我`jquery ui accordion`只成功地使用了一个级别。但是当我添加下一个级别时，单击时子窗口总是关闭

最后一个问题是单击列表后如何在重新加载页面上保持手风琴打开？我试过“主动”但没有运气:(

这是我的 html 代码：

```
<ul class="accordion">
<h3>Hardware</h3>
<li>
    <ul class="accordion2">
        <li>
            <h3>Monitor</h3>
            <ul>
                <li>Monitor Tube</li>
                <li>Monitor LCD</li>
            </ul>
        </li>
        <li>PC</li>
        <li>Keyboard</li>
        <li>Mouse</li>
    </ul>
</li>
<h3>Software</h3>
<li>
    <ul class="accordion2">
        <li>Unix</li>
        <li>Linux</li>
        <li>Windows</li>
    </ul>
</li> 
```

这是我的 jquery 函数代码：

```
 $(function() {
    $(".accordion").accordion({
        header: "h3",
        autoHeight: false,
        navigation: true,
    });
});
$(function() {
    $(".accordion2").accordion({
        header: "h3",           
        autoHeight: false,
        navigation: true,
    });
}); 
```

这是我的[小提琴](http://jsfiddle.net/daftar/CYfzZ/)。

# python - joblib.load 文件加载错误

> ID：14557597
> 
> 赞同：4
> 
> 时间：2013-01-28T07:46:52.340
> 
> 标签：python, numpy, pickle, scikit-learn

我正在使用 Random Forest Regressor python 的 scikit-learn 模块来预测一些值。我使用 joblib.dump 来保存模型。共有 24 个 joblib.dump 文件，每个文件大小为 45 MB（所有文件的总和 = 931mb）。我的问题是：

我想在一个程序中加载所有这 24 个文件来预测 24 个值 - 但我做不到。它给出了一个 MemoryError。如何在一个程序中加载所有 24 个 joblib 文件而不会出现任何错误？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T10:49:49.250

选项很少，具体取决于您内存不足的确切位置。

*   由于您要预测 24 个不同的值，因此基于相同的输入数据，您可以按顺序进行预测。因此，您一次只在内存中保留一个 RFR。

例如：

```
predictions = []
for regressor_file in all_regressors:
    regressor = joblib.load(regressor_file)
    predictions.append(regressor.predict(X)) 
```

*   （可能不适用于您的情况，但这个问题很常见）。加载大量输入数据时，您可能会耗尽内存。要解决此问题 - 您可以拆分输入数据并在子批次上运行预测。当我们从本地运行预测转移到 EC2 时，这对我们很有帮助。尝试在较小的输入数据集上运行您的代码，以测试这是否有帮助。

*   您可能希望优化 RFR 的参数。您可能会发现使用较浅的树或较少数量的树（或两者）可以获得相同的预测能力。构建一个不必要的大的随机森林非常容易。当然，这是特定于问题的。我必须减少树的数量并使树更小，以使模型在生产中有效运行。就我而言，AUC 在优化之前/之后是相同的。教程中有时会省略模型调整的最后一步。

# maven - maven clean install 丢失的资源文件夹

> ID：14557602
> 
> 赞同：1
> 
> 时间：2013-01-28T07:47:14.200
> 
> 标签：maven, build, resources, installation

*当我创建源文件夹src/main/resource*并将文件放入该文件夹时，我试图使用 maven 来构建我的项目。

但是当我执行“mvn clean install eclipse:clean eclipse:eclipse”时，src/main/resource 文件夹消失了，它出现在*src*文件夹中

这个新结构对我来说的问题是我必须再次手动创建一个*src/main/resource*文件夹，以确保在我运行它时资源文件夹中的那些文件可以部署到类路径中。我想知道是否有办法让 maven 自动为我做这件事？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:50:55.697

您可以在 pom.xml 中指定资源目录。以下是示例：

```
<build>
    <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <finalName>${artifactId}-${version}</finalName>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    <scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>src/test/resources</directory>
      </testResource>
    </testResources>
  </build> 
```

参考：[http ://maven.apache.org/guides/introduction/introduction-to-the-pom.html](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

# playframework-2.0 - PlayFramework 2 和 lib 在 repo 中使用 SBT 构建

> ID：14557608
> 
> 赞同：2
> 
> 时间：2013-01-28T07:47:36.733
> 
> 标签：playframework-2.0, sbt

我正在尝试将使用 play framework 2 编写的应用程序分成小部分。所以我用 sbt(1) 作为构建系统编写了小库，并使用**publish-local**命令将其发布到本地存储库中。这个 repo 位于 /home/user/.ivy2 目录中。

现在我正在尝试将 /home/user/.ivy2 存储库中的这个库作为依赖项添加到我的 play(2) 项目中。我尝试了几个解析器：

```
1) resolvers += "Local Ivy Repository" at "file:///home/user/.ivy2/local"

2) resolvers += Resolver.file("Local repo", file("/home/user/.ivy2/local")) 
```

但两者都无法通过存储库找到。问题可能出在哪里？

笔记：

sbt(1) - 是 0.12.1

play(2) - 是 0.11.3 这可能是个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:12:06.437

我不知道为什么在播放文档中会跳过它，但是要添加常春藤存储库，您应该使用

```
resolvers += Resolver.file("Local repo", file("/home/user/.ivy2/local"))(Resolver.ivyStylePatterns) 
```

代替

```
resolvers += Resolver.file("Local repo", file("/home/user/.ivy2/local")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T11:12:25.900

为了让它在 sbt 13.1 子项目中与 play 2.2.2 一起工作，我必须使用“in ThisBuild”来让它工作！

```
resolvers in ThisBuild+= Resolver.file("Local repo", file(System.getProperty("user.home") + "/.ivy2/local"))(Resolver.ivyStylePatterns) 
```

# c++ - 如何在 directshow 中选择音频输入设备并捕获音频

> ID：14557609
> 
> 赞同：1
> 
> 时间：2013-01-28T07:48:01.117
> 
> 标签：c++, windows-ce, directshow

我正在使用 DirectShow 在 windows Embedded ce 6.0 中开发程序。我用 C/C++ 编写程序。

该程序需要处理**多个音频输入设备**。

我能够在 directshow 中获得可用的音频输入设备，但不知道如何指定输入设备并从中捕获音频。

有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:36:12.027

**// 首先，使用以下代码创建音频过滤器**

```
IBaseFilter * pDevice = NULL;  
CoCreateInstance(CLSID_AudioCapture, NULL, CLSCTX_INPROC,IID_IBaseFilter,   (void**)&pDevice); 
```

**// 然后，枚举 PIN 以从过滤器中获取输入音频名称**

```
IEnumPins * pinEnum = NULL;  
IPin * pin = NULL;  
ULONG fetchCount = 0;  
PIN_INFO pinInfo;  
pDevice->EnumPins(&pinEnum);

while (SUCCEEDED(pinEnum->Next(1, &pin, &fetchCount)) && fetchCount)   
{  
    pin->QueryPinInfo(&pinInfo);  
    if (pinInfo.dir == PINDIR_INPUT)  
    {  
        // get name from pinInfo.achName  
    }  
} 
```

# c - 对函数 C 的未定义引用

> ID：14557616
> 
> 赞同：0
> 
> 时间：2013-01-28T07:48:36.510
> 
> 标签：c, unix, header-files

[我从这里](http://usp.cs.utsa.edu/usp/programs.html)下载了一个库。我在程序中添加了头文件，但是当我尝试访问此头文件的功能时，出现错误：

`undefined reference to the function for u_open() and u_accept()`. 我试图编译`.c`这个头文件的文件，但我得到这个错误：

`undefined reference to main`.

我尝试了我所知道的一切来解决这个问题，但无法解决。这是程序。

```
#include "uici.h"
int main()
{
char client[50];
char buf[1024];

u_port_t portnumber;
portnumber=48625;

int fd = u_open(portnumber);

int communFd = u_accept(fd,client,50);

perror("Opened");

fprintf(stderr,"\nComun fd is %d\n\n\n",communFd);

read(communFd,buf,1024);

write(STDOUT_FILENO,buf,1024);

fprintf(stderr,"\n\nReading complete\n");
return 0;
} 
```

我能做些什么来解决这个问题？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:02:39.930

您的头文件`uici.h`声明了您在`main()`(`u_open()`和`u_accept()`) 中调用的函数，但没有声明它们的实现，它们位于源文件中。当链接器尝试创建整个程序时，它会抱怨找不到实现。

解决方案是在创建实际程序二进制文件时将所有文件链接在一起。使用 g++ 前端时，您可以通过在命令行上同时指定所有源文件来做到这一点。例如：

```
g++ -o main main.c uici.c 
```

将创建名为“main”的主程序，假设您需要的实现位于`uici.c`.

**编辑**：如果您要链接到预建库`uici`，则需要向前端指定链接所需的库，例如：

```
g++ -o main main.c -luici 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:51:02.057

使用 gcc 时需要链接库，例如：

`gcc nameofprgram.c -l<library>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:53:51.693

使用 gcc 编译时使用这些标志中的任何一个

```
-I <searchpath to include files>
-L <searchpath to the lib file>
-l<thelibname> 
```

前任：

```
 gcc -o myprogram -lfoo -L/home/me/foo/lib myprogram.c 
```

这会将 myprogram 与文件夹 /home/me/foo/lib 中的静态库 libfoo.a 链接起来

# android - 如何在android中截取视频的屏幕截图

> ID：14557623
> 
> 赞同：4
> 
> 时间：2013-01-28T07:49:21.933
> 
> 标签：android, video, screen, paint, capture

我有一个视频正在播放，在某些时候，我需要暂停视频，进行捕捉，然后在绘画活动中使用该图像来修改它。问题是，如果我尝试保存视频，图片将是黑色的（尝试使用`setDrawingCacheEnabled(true);`）........ 是否可以截取视频的屏幕截图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T08:01:08.447

你有没有尝试过 `ThumbnailUtils.createVideoThumbnail(String, int)?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:06:02.540

试试这个链接..

希望它可以帮助你

[屏幕截图](https://stackoverflow.com/questions/3733988/screen-capture-in-android)

```
Bitmap saveBitmap = Bitmap.createBitmap(imageFrame.getWidth(), 
 imageFrame.getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(saveBitmap);
imageFrame.draw(c); 
```

有关更多信息，请尝试此[链接](https://stackoverflow.com/questions/11505093/how-to-capture-screenshot-of-surfaceview-with-background)

&[这个链接](https://stackoverflow.com/questions/10275225/surfaceview-returns-black-screen-in-droidreader)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T08:03:10.477

我认为你应该在 android 中使用 screencaputre 应用程序，这对你来说是完全可用的......而不是你可以将你的 android 与 PC 连接而不是启动视频并暂停它的最佳方式，而不是在键盘按下打印屏幕和绘图软件中按 ctrl+V（粘贴）并保存为 jpeg 格式，而不是获得屏幕截图/图像...

# jquery - 如何在没有一个字段的情况下提交表单（没有 ajax）

> ID：14557626
> 
> 赞同：0
> 
> 时间：2013-01-28T07:49:34.367
> 
> 标签：jquery

我有一个表格。我想提交表单并发送所有数据而无需在此表单中输入一个 id：someField。我怎样才能做到这一点。我的jQuery代码现在是：

```
 $("#mForm").submit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:57:17.557

不提交表单中的禁用字段。

因此，请尝试禁用您不想发布的输入字段。

尝试这样的事情：

```
$('#INPUT_FIELD_ID_HERE').attr("disabled", true); 
$("#mForm").submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:52:53.913

提交前删除该字段。

```
$('#someField').remove();
$("#mForm").submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:55:54.083

您可以使用[remove()](http://api.jquery.com/remove/)删除 id 为 id: someField 的字段。

> 从 DOM 中删除匹配的元素集。

试试这个

```
$('#someField').remove();
$("#mForm").submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:02:17.297

如果您使用 PHP 作为服务器端语言，那么您可以将该字段设置为“禁用”，因此不会发布其值[禁用输入](http://www.w3schools.com/tags/att_input_disabled.asp)

```
 <input type="text" name="lname" disabled="disabled"/> 
```

# wpf - 如何处理 WPF DataGrid 上的单元格双击事件，相当于 windows DataGrid 的事件？

> ID：14557633
> 
> 赞同：12
> 
> 时间：2013-01-28T07:50:31.667
> 
> 标签：wpf, events, datagrid, cell

如您所知，在 Windows C# 的 gridview 中，如果我们想要处理单元格上的单击/双击事件，那么会有诸如 CellClick、CellDoubleClick 等事件。

所以，我想做与带有 WPF DataGrid 的 windows gridview 一样的操作。到目前为止我已经搜索过，但答案既不适用也不有用。他们中的一些人说使用 MouseDoubleClick 事件，但是在这种情况下，我们必须检查每一行以及该行中的项目，因此检查每个单元格的数据非常耗时，而且时间在这里是最重要的。

我的 DataGrid 绑定到 DataTable 并且 AutoGeneratedColumn 为 False。如果您的答案基于 AutoGeneratedColumn=True ，那么这是不可能的。甚至，我正在根据数据更改数据网格单元格的样式，因此无法更改 AutoGeneratedColumn 属性。

单元格单击/双击事件应该与 windows 网格的事件一样快。如果有可能，那么告诉我怎么做，如果没有，那么有什么替代方法呢？

请帮我.....

非常感谢....

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-11-10T17:11:14.920

我知道这对聚会来说可能有点晚了，但这可能对以后的其他人有用。

在您的 MyView.xaml 中：

```
<DataGrid x:Name="MyDataGrid" ...>
    <DataGrid.Resources>
        <Style TargetType="{x:Type DataGridCell}">
            <EventSetter Event="MouseDoubleClick" Handler="DataGridCell_MouseDoubleClick"/>
        </Style>
    </DataGrid.Resources>

    <!-- TODO: The rest of your DataGrid -->
</DataGrid> 
```

在您的 MyView.xaml.cs 中：

```
private void DataGridCell_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    var dataGridCellTarget = (DataGridCell)sender;
    // TODO: Your logic here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T08:32:00.510

另一种方法是定义 a`DataGridTemplateColumn`而不是使用预定义的列`DataGridCheckBoxColumn`，`DataGridComboBoxColumn`然后将事件处理程序添加到数据模板中定义的 UI 元素。

下面我为Cell定义了一个`MouseDown`事件处理程序。`TextBlock`

```
<DataGrid AutoGenerateColumns="False">
    <DataGrid.Columns>

        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock MouseDown="TextBlock_MouseDown"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

在代码隐藏文件中：

```
private void TextBlock_MouseDown(object sender, MouseButtonEventArgs e)
{
    TextBlock block = sender as TextBlock;
    if (block != null)
    {
        // Some Logic
        // block.Text
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T08:06:15.900

我知道编码 WPF 有时是一个 PITA。无论如何，您必须在此处处理该`MouseDoubleClick`事件。然后搜索源对象层次结构以找到 a`DataGridRow`并对其执行任何操作。

更新：示例代码

XAML

```
<dg:DataGrid MouseDoubleClick="OnDoubleClick" /> 
```

背后的代码

```
private void OnDoubleClick(object sender, MouseButtonEventArgs e)
{
    DependencyObject source = (DependencyObject) e.OriginalSource;
    var row = GetDataGridRowObject(source);
    if (row == null)
    {
         return;
    }
    else
    {
        // Do whatever with it
    }
    e.Handled = true;
}

private DataGridRow GetDataGridRowObject(DependencyObject source)                               
{
    // Write your own code to recursively traverse up via the source
    // until you find a DataGridRow object. Otherwise return null.
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T21:32:46.090

我用过这样的东西：

```
<DataGrid.InputBindings>
    <MouseBinding Gesture="LeftDoubleClick" Command="{Binding ShowOverlay}" CommandParameter="{Binding Parameter}" />
</DataGrid.InputBindings> 
```

并在我的视图模型中处理我的命令。

# javascript - 最小化最大化 div ？适用于所有 div 的 javascript 或 jquery

> ID：14557635
> 
> 赞同：1
> 
> 时间：2013-01-28T07:50:41.793
> 
> 标签：javascript, jquery, toggle, minimize, maximize

我想为我的 div 提供最小化和最大化功能。因为我在我的 jsp 页面中编写了以下代码

```
<div id="widnow" style="width: auto;">
    <div id="title_bar">
      <button type="button" class="max" id="button">
    <img id="max" src="<%=request.getContextPath()%>/img/Minimize.png" />
</button>
    </div>
      <div id="box" style="height:auto; width: auto;">
       <span id="info3" style="display: none;"></span>

    <div id="chart3" style="width:80%; height:300px;"></div>

    </div>

 </div> 
```

以下是我的CSS

```
#widnow{
    width:400px;
    border: 1px solid #DCDCDC;

}

#button{
    width: 25px;
    height: 24px;
    float:right;
    cursor:pointer;
    position:relative;
    margin: 0px 0px 0px 0px;

}
#title_bar{
    background-image: url("<%=request.getContextPath()%>/img/Header Background.png");
    height: 25px;
    width: auto;
  border-bottom: 1px solid #DCDCDC;

} 
```

以下是我的 js

```
$("#button").click(function(){

    var isclass = $(this).attr('class');
    if (isclass == "max") 

    {
        $("#max").attr("src","<%=request.getContextPath()%>/img/Minimize.png");
        $(this).removeClass('max');
    }
    else{
        $(this).addClass('max');
        $("#max").attr("src","<%=request.getContextPath()%>/img/Maximize.png");
    }
    $("#box").slideToggle();

}); 
```

它工作得很好当有一个 div 我想给这个工具..但是用一个单一的 java 脚本函数或 j-query 我怎么能做到这一点？我在单页中有很多 div 并且都应该有单独的最大化和最小化facility.so 谁能告诉我如何更改适用于所有 div 的 java 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:00:06.597

稍微重构你的代码：

```
function activateMaxMin(elemButton,elemMax,elemBox)
{

  var isclass = elemButton.attr('class');
    if (isclass == "max") 

    {
        elemMax.attr("src","<%=request.getContextPath()%>/img/Minimize.png");
        elemButton.removeClass('max');
    }
    else{
        elemButton.addClass('max');
        elemMax.attr("src","<%=request.getContextPath()%>/img/Maximize.png");
    }
    elemBox.slideToggle();

}

$("#button").click(function(){
activateMaxMin($(this),$("#max"),$("#box"));

}); 
```

如果有另一个这样的按钮，请使用：

```
$("#button1").click(function(){
activateMaxMin($(this),$("#max1"),$("#box1"));

}); 
```

当然，它可以以更有效的方式完成，但这需要完全重写你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:58:12.793

只需更改`id notation "#"`为类选择`"."`器`#max``.max`

什么浏览器只适用于第一次出现`id`并**尝试将img更改`id`为`class`**

好吧，在你的情况下，我已经创建了一个小提琴看看，如果这对你有帮助：

`[http://jsfiddle.net/32e2V/](http://jsfiddle.net/32e2V/)`

```
$(".button").click(function () {
  $(this).closest('div').siblings(".box").slideToggle();
  if ($(this).text() == "max") {
    $(this).text('min');
  } else {
    $(this).text('max');
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:30:05.240

```
<div id="widnow" class='window' style="width: auto;">
    <div id="title_bar" class='title_bar'>
      <button type="button" class="maxMinButton" id="button">
    <img id="max" src="<%=request.getContextPath()%>/img/Minimize.png"  class='max'/>
</button>
    </div>
      <div id="box" style="height:auto; width: auto;" class='box'>
       <span id="info3" style="display: none;"></span>

    <div id="chart3" style="width:80%; height:300px;"></div>

    </div>

 </div> 
```

//javascript函数

函数 activateMaxMin(elemButton,elemMax,elemBox) {

var isclass = elemButton.attr('class'); if (isclass == "max")

```
{
    elemMax.attr("src","<%=request.getContextPath()%>/img/Minimize.png");
    elemButton.removeClass('max');
}
else{
    elemButton.addClass('max');
    elemMax.attr("src","<%=request.getContextPath()%>/img/Maximize.png");
}
elemBox.slideToggle(); 
```

}

```
$(document).ready(function(){
$(".maxMinButton").click(function(){

var elemButton=$(this);
var maxMinWidnow=button.closes('.window');
var elemMax=$(".max:firs",maxMinWidnow);
var elemBox=$(".box:first",maxMinWidnow);

activateMaxMin(elemButton,elemMax,elemBox)
});
}); 
```

这是在不对您的代码进行大量修改的情况下获得的最好结果。注意 html 中每个 div 中添加的类，这是必要的。修改时要小心。

# php - SQL：如何根据标志在所有区域下方显示事件（在没有多对多连接的情况下）

> ID：14557641
> 
> 赞同：2
> 
> 时间：2013-01-28T07:51:12.043
> 
> 标签：php, mysql, sql

我正在显示一个页面，列出不同城市的事件：

> **洛杉矶**
> 肥皂节 2 月 13 日
> 曲奇大赛 5 月 8 日
> 
> **纽约**
> 星际迷航大会 5 月 5 日
> 
> **迈阿密**
> 泳装大赛

事件只能链接到单个城市（region_id 在事件表上）或标记为“所有城市”（“show_in_all_cities”标记）。在没有多对多连接表（即 event_city）的情况下，有没有办法让标有“show_in_all_cities”的事件出现在每个城市下方？

我当前的查询如下（不考虑“所有城市”标志）：

```
SELECT
  event.*,
  region.name
FROM event
  INNER JOIN region
    ON region.region_id = event.region_id
WHERE event.`date` >= CURDATE()
ORDER BY region.sort_order, event.date ASC 
```

然后我使用 PHP 循环输出并显示城市标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:03:17.540

将标志添加到 order by 子句：

```
SELECT event.*, region.name
FROM event       
INNER JOIN region 
ON region.region_id = event.region_id 
WHERE event.`date` >= CURDATE()         
ORDER BY event.show_in_all_cities, region.sort_order, event.date ASC 
```

（假设所有城市事件的标志设置为更高的值，否则：

```
ORDER BY event.show_in_all_cities DESC, region.sort_order, event.date ASC 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:43:36.377

只需将`or (event.SHOW_IN_ALL_CITIES=1 )`（例如，如果它是 0/1 int 标志）添加到您的 JOIN 条件。在这种情况下，对于带有此标志的每个事件，所有区域都将添加到输出集中。

```
SELECT
  event.*,
  region.name
FROM event
  INNER JOIN region
    ON (region.region_id = event.region_id) or (event.SHOW_IN_ALL_CITIES=1 )
WHERE event.`date` >= CURDATE()
ORDER BY region.sort_order, event.date ASC 
```

# asp.net - 使用 dotnetopenauth 获取 Google Oauth2 令牌

> ID：14557646
> 
> 赞同：1
> 
> 时间：2013-01-28T07:51:50.000
> 
> 标签：asp.net, oauth-2.0, dotnetopenauth

我在使用 DotNetOpenAuth 4.2.0.13024 为 google 检索 OAuth2 令牌时遇到问题。

我已经到了可以成功向谷歌端点[https://accounts.google.com/o/oauth2/auth发出授权请求的地步](https://accounts.google.com/o/oauth2/auth)

当用户单击“确定”时，谷歌会按照预期使用适当的“代码”查询字符串调用我的回调 URL。

但是，我无法将此代码交换为令牌，因为我的调用一直失败，“协议异常未处理”执行和“400 错误请求”作为内部异常。这是我用来交换令牌的代码

```
private static AuthorizationServerDescription authServerDescription = new AuthorizationServerDescription
{
    TokenEndpoint = new Uri("https://accounts.google.com/o/oauth2/token"),
    AuthorizationEndpoint = new Uri("https://accounts.google.com/o/oauth2/auth")
};

static GoogleContacts()
{
    Client = new WebServerClient(authServerDescription, "{my_cliend_id}", "{me_secret_key}");
}

var authorization = Client.ProcessUserAuthorization(); // <- Exception is thrown here
if (authorization != null)
{
   Authorization = authorization;
   Response.Redirect(Request.Path); // get rid of the /?code= parameter
} 
```

PS：似乎 DotNerOpenAuth 的新版本已经发布，但是我无法获得它，因为 zip 下载仍然指向旧版本，并且 Nuget 一直在我身上失败:(

# android - 是否可以将一个 facebook 应用程序链接到两个 android 应用程序？

> ID：14557647
> 
> 赞同：6
> 
> 时间：2013-01-28T07:51:50.593
> 
> 标签：android, facebook, deep-linking

我的问题的情况是：

1.  我有两个用于同一应用程序的 android 应用程序，一个是免费版，另一个是完整版。

2.  我为这个 android 应用程序创建了一个 facebook 应用程序。

3.  现在，我想使用 facebook 应用程序提供的深度链接功能，它在我的免费版应用程序中运行良好。（深度链接意味着，当用户在 facebook 上单击我的应用程序图标时，他们将被自动重定向到我的 android 应用程序或市场。）

4.  然而，当我想将此功能添加到我的完整版应用程序时，我发现 facebook 应用程序似乎只是为与 android 应用程序的深度链接提供了一个配额。因为我可以在应用仪表板配置页面中填写一个唯一的包名称。

* * *

因此，我的问题是：

如果我希望我的应用程序有两个版本（免费和完整），并且还可以与我的 facebook 应用程序链接。

我应该在我唯一的一个应用程序中**实现应用内计费服务，而****不是制作两个版本的应用程序**吗？

非常感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:22:08.630

我认为首选的方法是拥有一个带有应用内购买选项的版本。[这里](https://softwareengineering.stackexchange.com/questions/145005/how-to-keep-free-paid-version-of-the-app-separate-in-subversion)有一些关于分离功能的方法以及如何维护项目的很好的讨论。

# mvvm - MVVM 同步列表

> ID：14557648
> 
> 赞同：0
> 
> 时间：2013-01-28T07:51:52.760
> 
> 标签：mvvm, collections

我认为[这个答案](https://stackoverflow.com/a/2177659/896265)是我的问题的解决方案，但我很难理解如何将它应用于我的问题。和其他帖子一样，我有两个想要保持同步的集合。我的模型对象有字符串集合：

```
public class Person {
    public int PersonId {get; set; }
    public string PersonName { get; set; }
    public List<string> PersonNicknames { get; set; }
} 
```

我将这个模型对象包装在它自己的 ViewModel ( `PersonViewModel`) 中。为了允许编辑昵称，我还将它们包装在自己的`NicknameViewModel`. PersonViewModel 然后公开一个`ObservableCollection<NicknameViewModel> NicknameViewModelCollection` 在构造时填充的内容：

```
 foreach (string stringItem in _person.PersonNicknames)
        {
            var nicknameViewModel = new NicknameViewModel(stringItem);
            this.NicknameViewModelCollection.Add(nicknameViewModel);
        } 
```

当一个字符串被添加、删除或更改时`PersonViewModel.NicknameViewModelCollection`，更改不会反映在 Model 集合中（即`Person.Nicknames`）。每当用户修改、编辑或删除字符串项时，我都需要更新模型集合。我不明白链接的答案是如何工作的或如何将其应用于这个问题。一个例子会很棒......我在这里不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:08:18.900

这是我正在寻找的标准解决方案。它对您的场景有一些开销，因为它适用于 ViewModel 类型，该类型具有其*context*等字段。无论如何，解决方案应该变得显而易见。如果模型集合本身是可观察的，则集合通常会同步**OneWayToSource**和**TwoWay 。**这对你有帮助吗？如果没有，请问...

```
/// <summary>
/// Observable collection of ViewModels that pushes changes to a related collection of models
/// </summary>
/// <typeparam name="TViewModel">Type of ViewModels in collection</typeparam>
/// <typeparam name="TModel">Type of models in underlying collection</typeparam>

public class VmCollection<TViewModel, TModel> : ObservableCollection<TViewModel>
    where TViewModel : class, IViewModel, new()
    where TModel : class

{
    private readonly object _context;
    private readonly ICollection<TModel> _models;
    private bool _synchDisabled;

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="models">List of models to synch with</param>
    /// <param name="context"></param>
    /// <param name="autoFetch">
    /// Determines whether the collection of ViewModels should be
    /// fetched from the model collection on construction
    /// </param>
    public VmCollection(ICollection<TModel> models, object context = null, bool autoFetch = true)
    {
        _models = models;
        _context = context;

        // Register change handling for synchronization
        // from ViewModels to Models
        CollectionChanged += ViewModelCollectionChanged;

        // If model collection is observable register change
        // handling for synchronization from Models to ViewModels
        if (models is ObservableCollection<TModel>)
        {
            var observableModels = models as ObservableCollection<TModel>;
            observableModels.CollectionChanged += ModelCollectionChanged;
        }

        // Fecth ViewModels
        if (autoFetch) FetchFromModels();
    }

    /// <summary>
    /// CollectionChanged event of the ViewModelCollection
    /// </summary>
    public override sealed event NotifyCollectionChangedEventHandler CollectionChanged
    {
        add { base.CollectionChanged += value; }
        remove { base.CollectionChanged -= value; }
    }

    /// <summary>
    /// Load VM collection from model collection
    /// </summary>
    public void FetchFromModels()
    {
        // Deactivate change pushing
        _synchDisabled = true;

        // Clear collection
        Clear();

        // Create and add new VM for each model
        foreach (TModel model in _models)
            AddForModel(model);

        // Reactivate change pushing
        _synchDisabled = false;
    }

    private void ViewModelCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        // Return if synchronization is internally disabled
        if (_synchDisabled) return;

        // Disable synchronization
        _synchDisabled = true;

        // Synchronize collection of Models
        if (e.NewItems != null)
            foreach (var v in e.NewItems.OfType<IViewModel<TModel>>())
                v.AddModelTo(_models);
        if (e.OldItems != null)
            foreach (var v in e.OldItems.OfType<IViewModel<TModel>>())
                v.RemoveModelFrom(_models);

        //Enable synchronization
        _synchDisabled = false;
    }

    private void ModelCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (_synchDisabled) return;

        // Synchronize collection of ViewModels
        if (e.NewItems != null)
            foreach (TModel m in e.NewItems.OfType<TModel>()) this.AddIfNotNull(CreateViewModel(m));
        if (e.OldItems != null) foreach (TModel m in e.OldItems) this.RemoveIfContains(GetViewModelOfModel(m));
    }

    private TViewModel CreateViewModel(TModel model)
    {
        return ViewModelCache.Get<TViewModel>.ForExistingModel(model, _context);
    }

    private TViewModel GetViewModelOfModel(TModel model)
    {
        return Items.OfType<IViewModel<TModel>>().FirstOrDefault(v => v.IsViewModelOf(model)) as TViewModel;
    }

    /// <summary>
    /// Adds a new ViewModel for the specified Model instance
    /// </summary>
    /// <param name="model">Model to create ViewModel for</param>
    public void AddForModel(TModel model)
    {
        Add(CreateViewModel(model));
    }

    /// <summary>
    /// Adds a new ViewModel with a new model instance of the specified type,
    /// which is the ModelType or derived from the Model type
    /// </summary>
    /// <typeparam name="TSpecificModel">Type of Model to add ViewModel for</typeparam>
    public void AddNew<TSpecificModel>() where TSpecificModel : TModel, new()
    {
        var m = new TSpecificModel();
        Add(CreateViewModel(m));
    }
} 
```

# javascript - 对象之间的指针行为

> ID：14557654
> 
> 赞同：2
> 
> 时间：2013-01-28T07:52:14.130
> 
> 标签：javascript, backbone.js

我想很好地理解我越来越多地观察到的东西。

在某些情况下，来自同一模型的不同实例以相同的方式更改其属性（如果我有 2 个 UserModel A 和 B，如果我更改 A，B 将以相同的方式受到影响）。

我观察了一些实际案例：

当我将模型的实例发送到视图构造函数时，它们是链接的，如果我在视图中更改模型，外部的也会受到同样的影响。我想有时我们只是向视图发送一个指针而不是实例的副本。

用一些代码更具体；

```
A = new UserModel();
B = new UserModel();

var Data = A.get('info'); //where info = {some: "thing"};
Data.some = 'other';
B.set('info', Data); //A.get('info') == B.get('info') 
```

因为我得到了对象`info`，而不仅仅是单独的属性（我测试了它并且以这种方式在值之间没有影响）。

所以我的问题是，我们是否总是在 javascript 中使用带有对象的指针？它特定于骨干吗？我想了解这种行为背后的原因。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:56:13.727

对象和数组在 javascript 中作为引用传递或分配，而不是副本。如果你想要一个对象或数组的副本，你必须明确地制作一个副本。

分配或传递时复制更简单的类型，例如数字、布尔值。

字符串有点特殊。它们作为引用传递，但由于字符串是不可变的（无法更改），因此您不能真正将字符串引用用于任何内容，因为任何修改字符串的尝试都会创建一个新字符串。

几个例子：

```
// arrays assigned by reference
var a = [1,2,3];
var b = a;
a[0] = 0;
alert(b[0]);  // alerts 0 because b and a are the same array

// objects assigned by reference
var c = {greeting: "hello"};
var d = c;
c.greeting = "bye";
alert(d.greeting);   // alerts "bye" because c and d are the same object

// numbers assigned as copies
var e = 3.414;
var f = e;
e = 999;
alert(f);    // alerts 3.414 because f is its own copy of the original number

// make a copy of an array
var g = [1,2,3];
var h = g.slice(0);    // h is now a copy
h[0] = 9;
alert(g);              // shows [1,2,3]
alert(h);              // shows [9,2,3] 
```

将参数传递给函数或从函数返回值也是如此。除非创建显式副本，否则数组和对象通过引用传递或返回。

* * *

可以使用该`.slice()`方法制作数组的浅拷贝。

```
var arr1 = [1,2,3];
var arr2 = arr1.slice(0);   // make independent copy of first array 
```

可以通过将每个属性从原始对象复制到新对象来制作对象的浅拷贝。

深拷贝涉及测试被复制的每个项目的类型，如果它是对象或数组，则在对象上递归，因此嵌套的对象和数组也被复制。

# c# - 添加对 wp8 sdk 的引用

> ID：14557655
> 
> 赞同：0
> 
> 时间：2013-01-28T07:52:14.317
> 
> 标签：c#, sdk, windows-phone-8

问这个问题我觉得很愚蠢，但是如何在 WP8 SDK 中添加对项目的引用？我需要添加`System.Drawing`. 你能用简单的术语解释一下吗，因为我不太了解这些东西......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:03:13.613

**System.Drawing**命名空间在 Windows Phone 8 中不可用。此命名空间中的大多数常见类型位于**System.Windows.Media**命名空间中，例如：

```
System.Windows.Media.Color c;
System.Windows.Shapes.Rectangle r;
System.Windows.Media.SolidColorBrush b;
System.Windows.Media.Imaging.BitmapImage bi; 
```

# c++ - 链接器错误 C++“未定义的引用”

> ID：14557657
> 
> 赞同：46
> 
> 时间：2013-01-28T07:52:16.500
> 
> 标签：c++, reference, undefined

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

试图通过编译我的程序`g++ -o prog1 main.cpp -std=c++0x`

我得到错误：

```
/tmp/cc1pZ8OM.o: In function `main':
main.cpp:(.text+0x148): undefined reference to `Hash::insert(int, char)'
collect2: error: ld returned 1 exit status 
```

**主文件**

```
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <functional>
#include "Hash.h"

using namespace std;

int main(int argc, char *argv[]) {
//preset prime number 
int prime = 101;
hash<char> h1;
int key;
Hash HashTable;

// check for Request & string parameters
if(argc != 3) {
    cout << "Run program with 2 parameters. [Lower Case]" << endl;
    cout << "[1] insert, find, or delete" << endl;
    cout << "[2] string" << endl;
}

if(strcmp(argv[1], "insert") == 0) {
    //Get Hash for argv[2] aka value
    key = h1(*argv[2]);

    //check 1
    cout << "Hash: " << key << endl;

    key = key % prime;

    //check 2
    cout << "Mod 101 Hash: " << key << endl;

    HashTable.insert(key, *argv[2]); //PROBLEM here

}

return 0;
} 
```

**哈希.h 文件：**

```
#include <iostream>
#include <cstring>
#include "LinkedList.h"
using namespace std;

class Hash {
//100 slot array for hash function
LinkedList *hashFN[100];

public:
void insert(int key, char value);
//void deleteItem(int key);
//char* find(int key);

}; 
```

有任何想法吗？使用它来构建具有设定大小的哈希表。

编辑：**Hash.cpp**文件

```
#include <iostream>
#include <cstring>
#include "Hash.h"

using namespace std;

void Hash::insert(int key, char value){
*hashFN[key]->addFront(value);
cout << "Success!" << endl;

} 
```

现在尝试通过终端编译：

> g++ -c 哈希.cpp -o 哈希.o
> 
> g++ -o prog1 main.cpp Hash.o -std=c++0x

它以某种方式进入无限循环。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-28T07:56:42.390

您的头文件`Hash.h`声明了“`class hash`应该是什么样子”，但没有声明它的实现，它（可能）在我们将调用的其他一些源文件中`Hash.cpp`。通过在主文件中包含头文件，编译器会被告知`class Hash`编译文件时的描述，而不是`class Hash`实际工作方式。当链接器尝试创建整个程序时，它会抱怨`toHash::insert(int, char)`找不到实现 ( )。

解决方案是在创建实际程序二进制文件时将所有文件链接在一起。使用 g++ 前端时，您可以通过在命令行上同时指定所有源文件来完成此操作。例如：

```
g++ -o main Hash.cpp main.cpp 
```

将创建名为“main”的主程序。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-28T07:53:22.790

这个错误告诉你一切：

> 未定义的对 Hash::insert(int, char) 的引用

您没有链接到`Hash.h`. 难道你没有一个`Hash.cpp`也编译和链接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:04:45.797

您的错误表明您没有使用`insert`函数的定义编译文件。更新您的命令以包含包含该函数定义的文件，它应该可以工作。

# xml - .XSLT 文件中用于查看 XML(WSDL) 文件的 IP 权限？

> ID：14557659
> 
> 赞同：0
> 
> 时间：2013-01-28T07:52:18.623
> 
> 标签：xml, xslt, xsd, wsdl, mule

我有一个 XML(WSDL) 文件，我想使用 .XSLT 文件对其进行管理。我想在我的 .XSLT 文件中设置 IP 权限，以查看 WSDL 的某些部分，而某些受限 IP 可以看到我的 WSDL 的某些部分。我有这个 WSDL：

```
 <wsdl:types>
        ...
      </wsdl:types>

      <wsdl:message>
        ...
      </wsdl:message>

      <wsdl:portType name="countrySoap">
         <wsdl:operation name="GetCountryByCountryCode">
             <wsdl:documentation>Get country name by country code</wsdl:documentation>
             <wsdl:input message="tns:GetCountryByCountryCodeSoapIn" />
             <wsdl:output message="tns:GetCountryByCountryCodeSoapOut" />
         </wsdl:operation>
        <wsdl:operation name="GetISD">
            <wsdl:documentation>Get International Dialing Code </wsdl:documentation>
            <wsdl:input message="tns:GetISDSoapIn" />
            <wsdl:output message="tns:GetISDSoapOut" />
        </wsdl:operation>
        ...
      </wsdl:portType>

  .... 
```

这是我的 .xslt 文件：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
        <xsl:output method="xml" indent="yes"/>

        <xsl:template match="@* | node()">
            <xsl:copy>
                <xsl:apply-templates select="@* | node()"/>
            </xsl:copy>
        </xsl:template>

  <xsl:template match="wsdl:operation[@name = 'GetISD']" />
</xsl:stylesheet> 
```

现在我想设置 IP 权限，例如： 10.10.10.1 看不到我的 WSDL 的这一部分：

```
 <wsdl:operation name="GetISD">
    <wsdl:documentation>Get International Dialing Code </wsdl:documentation>
    <wsdl:input message="tns:GetISDSoapIn" />
    <wsdl:output message="tns:GetISDSoapOut" />
</wsdl:operation> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:20:08.757

您可以`Authorization`在操作级别使用来实现这一目标吗？在实现 Web 服务操作时，定义`roles`具有有效权限的用户可以访问某些操作。通过仅限制他们的视图，您仍然必须处理未经授权的服务访问

# xaml - 比较两个样式文件是否存在共同的 x:key

> ID：14557666
> 
> 赞同：1
> 
> 时间：2013-01-28T07:52:27.313
> 
> 标签：xaml, text-comparison

我的问题不是直接程序化的，

我正在做一个有 5 个资源字典的项目。我不确定这些 rd 中是否使用了相同的键。

即 rd1.xaml 也包含 x:key="backgroundcolor" 和 rd2.xaml。

在 Expression Blend 中没有出现有趣的错误。

无论如何，有没有找到文件之间的公共密钥？

```
 <Application.Resources>
            <ResourceDictionary>
                <SolidColorBrush Color="#d0157820" x:Key="muddyBrush"/>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="rd1.xaml" />
                    <ResourceDictionary Source="rd2.xaml" />
                    <ResourceDictionary Source="rd3.xaml" />
                    <ResourceDictionary Source="rd4.xaml" />
                    <ResourceDictionary Source="rd5.xaml" />
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
           </Application.Resources> 
```

# mongodb - Mongodb如何获取两列的总和并将其保存到另一列

> ID：14557674
> 
> 赞同：2
> 
> 时间：2013-01-28T07:52:48.377
> 
> 标签：mongodb

嗨，我的 mongodb 集合看起来像这样

```
{ "created" : ISODate("2013-01-01T00:00:00Z"), "total_page_impression_count" : 500, "total_page_story_count" : 7 }
{ "created" : ISODate("2013-01-02T00:00:00Z"), "total_page_impression_count" : 511, "total_page_story_count" : 7 }
{ "created" : ISODate("2013-01-03T00:00:00Z"), "total_page_impression_count" : 513, "total_page_story_count" : 7 } 
```

我想将 (total_page_impression_count + total_page_story_count) 的值保留在同一张表的另一列中。任何人都知道这样做的方法。根据我所知道的发现，它不可能像 SQL 那样。如果有人可以提供帮助，我会很高兴。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:55:28.577

您可以手动迭代所有文档并编写聚合字段。使用您的语言驱动程序或 javascript shell。是的，mongodb 中没有任何`update users set full_name = first_name + last_name`类型的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:16:55.617

我认为应用程序逻辑是一种应用程序逻辑。并且保存聚合结果以执行新级别的非规范化以处理有问题的性能增益首先取决于开发人员的选择。那么，10gen 是否需要实现这样的功能呢？

* * *

谷歌翻译

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T08:01:31.333

mongodb 不是 RDB。mongodb 没有“加入”功能。

```
db.yourtable.insert({ "created" : ISODate("2013-01-01T00:00:00Z"), "total_page_impression_count" : 500, "total_page_story_count" : 7 }) 
```

您需要插入 2 次。

```
db.yourtable.insert({ "created" : ISODate("2013-01-01T00:00:00Z"), "total_page_impression_count" : 500, "total_page_story_count" : 7 });
db.othertable.insert({"total_page_story_count":507}); 
```

# php - 梨邮件功能密件抄送不会发送

> ID：14557677
> 
> 赞同：5
> 
> 时间：2013-01-28T07:52:58.140
> 
> 标签：php, email, pear, bcc

我从网站上复制了 PEAR 邮件的代码，并输入了我的数据。有用。它发送邮件，但是，我想使用 bcc 发送给很多人并保持他们的地址匿名，它会发送给 $to 收件人，而不是 $bcc。

编码：

```
<?php
$message = "yay email!";
require_once("Mail.php");
$from = 'myaddress@mysite.com ';
$to = "anadress@gmail.com";
$bcc = "thepeopleimemailing@yaddayadda.com";
$subject = " test";
$body = $message;
$host = "smtp.mysite.com";
$username = "myusername";
$password = "mypassword";
$headers = array ('From' => $from,
    'To' => $to,
    'Cc' => $cc,
    'Bcc' => $bcc,
    'Subject' => $subject
);
$recipients = $to;

$smtp = Mail::factory('smtp',
    array ('host' => $host,
        'auth' => true,
        'username' => $username,
        'password' => $password,
        'port' => '25'
    )
);
$mail = $smtp->send($recipients, $headers, $body);
if (PEAR::isError($mail)) {
    echo($mail->getMessage());
}
else {
    echo("Message successfully sent!");
}
?> 
```

Ps 我在花药论坛上读到我不应该将标题放在数组中？我无法理解标题的概念。他们做什么，我应该如何组织他们？我只想要一个收件人、发件人、主题和密件抄送。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-08T10:01:07.047

要详细说明 Chaky31 的发送答案，请`Bcc`使用以下内容，请注意，我们未在标头中指定任何密件抄送信息：

```
//All other variables should be self explanatory!

//The main recipient
$to = "test@test.com";

//Bcc recipients
$bcc = "bcc@test.com";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);
$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

//We append the bcc addresses as comma seperated values to the send method
$mail = $smtp->send($to . "," . $bcc, $headers, $body); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T06:48:32.850

对于那些正在寻找在 PEAR php 邮件中添加 cc 和 bcc 的解决方案的人。这是简单的解决方案和简短的解释为什么。

回答： 必须将所有想要接收邮件的人添加到该`$recipients`字段中。如果他们不在这个领域，他们将不会收到邮件。所有你想要可见的东西，都添加到标题中。因此，由于密件抄送是密件抄送，请勿将其添加到标题中。

为什么？：收件人字段指示邮件的去向，标题指示显示的内容。如果您不将 cc 添加到标题中，那么您也可以使它们变盲。任你挑逗。有任何问题，请查看上面添加的链接 ripa！很好的解释！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:03:47.530

采用`$headers['Cc'] = 'cc@example.com, bb@example.com, dd@ex.com';`

梨邮件请参见下面的链接

[使用 PHP PEAR MAIL 发送多个 CC 和 BCC](https://stackoverflow.com/questions/6311429/sending-multiple-ccs-and-bccs-with-php-pear-mail)

或者可以得到帮助

[http://phpmailer.worxware.com/index.php?pg=exampledb](http://phpmailer.worxware.com/index.php?pg=exampledb) - 它不是梨邮件。但它工作得很好。我用过这个，它很容易集成。

# c# - Winform WebBrowser 传递 Cookie 然后处理链接？

> ID：14557681
> 
> 赞同：0
> 
> 时间：2013-01-28T07:53:11.510
> 
> 标签：c#, winforms, browser

我前段时间问过这个[问题](https://stackoverflow.com/questions/14556654/passing-cookie-with-httpwebrequest-in-winforms)，但似乎没有答案，所以我尝试使用替代解决方案，但我现在卡住了，请参阅以下代码：

```
 WebBrowser objWebBrowser = new WebBrowser();
        objWebBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(objWebBrowser_DocumentCompleted);
        objWebBrowser.Navigate("http://www.website.com/login.php?user=xxx&pass=xxx");
        objWebBrowser.Navigate("http://www.website.com/page.php?link=url"); 
```

这是事件代码：

```
 WebBrowser objWebBrowser = (WebBrowser)sender;
        String data = new StreamReader(objWebBrowser.DocumentStream).ReadToEnd(); 
```

由于在加载文档之前我无法使用 WebBrowser.Document.Cookies，因此我必须首先导航登录页面，该页面将自动存储 cookie，但之后我想调用另一个导航以获得结果。现在使用上面的代码它不起作用，因为它总是需要第二个代码，而且我无法将它放入事件中，因为我想要的是这样的：

*   使用登录页面导航并仅存储一次 cookie。
*   每次我想得到一些结果时传递一个不同的 url。

任何人都可以给出解决方案吗？

编辑：

也许我提供的代码示例具有误导性，我想要的是：

```
foreach(url in urls)
{
  Webborwser1.Navigate(url);
  //Then wait for the above to complete and get the result from the event, then continue
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:24:51.787

如果您未获得授权，我认为您想模拟对 Navigate 的阻塞调用。可能有很多方法可以完成此操作以及其他方法来获得您想要的东西，但这里有一些我快速编写的代码可能会帮助您入门。

如果您对我在这里尝试做的事情有任何疑问，请告诉我。我承认这感觉就像“黑客”，这让我觉得有一个更聪明的解决方案，但无论如何......

```
bool authorized = false;
bool navigated;
WebBrowser objWebBrowser = new WebBrowser();
void GetResults(string url)
{
    if(!authorized)
    {
        NavigateAndBlockWithSpinLock("http://www.website.com/login.php?user=xxx&pass=xxx");
        authorized = true;
    }
    objWebBrowser.Navigate(url);
}

void NavigateAndBlockWithSpinLock(string url)
{
    navigated = false;

    objWebBrowser.DocumentCompleted += NavigateDone;

    objWebBrowser.Navigate(url);

    int count = 0;
    while(!navigated && count++ < 10)
        Thread.Sleep(1000);

    objWebBrowser.DocumentCompleted -= NavigateDone;

    if(!navigated)
        throw new Exception("fail");
}

void NavigateDone(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    navigated = true;
}

void objWebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if(authorized)
    {
        WebBrowser objWebBrowser = (WebBrowser)sender;
        String data = new StreamReader(objWebBrowser.DocumentStream).ReadToEnd();
    }
} 
```

# gps - 将 GPS 坐标（纬度和经度）转换为十进制

> ID：14557684
> 
> 赞同：2
> 
> 时间：2013-01-28T07:53:16.197
> 
> 标签：gps, latitude-longitude

我从 GPS 设备获取纬度和经度。它们看起来像 21081686N,079030977E

如果我手动将它们转换为 21°08'16.86"N、79°03'09.77"E 并在谷歌地图上查看，位置几乎是正确的。

如何在java中转换这些值并准确地将它们转换为十进制？有没有 JAVA 库？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:22:19.780

你不应该需要一个库，而只是将字符串分解成它们的组成部分。也许这会有所帮助。请注意，我**不是**Java 程序员，所以这种语法**很**可能是错误的。（也许将您的问题重新标记为 Java）

十进制我认为你的意思是十进制度而不是 ddd.mmss

```
// Object for Lat/Lon pair
public class LatLonDecimal
{
    public float lat = 0.0;
    public float lon = 0.0;
}

// Convert string e.g. "21081686N,079030977E" to Lat/Lon pair
public LatLonDecimal MyClass::convert(String latlon)
{
    String[] parts = latlon.split(",");

    LatLonDecimal position = new LatLonDecimal();
    position.lat = convertPart(parts[0]);
    position.lon = convertPart(parts[1]);
    return position;
}

// Convert substring e.g. "21081686N" to decimal angle
private float MyClass::convertPart(String angle)
{
    while (angle.length() < 10)
        angle = StringBuffer(angle).insert(0, "0").toString();

    int deg = Integer.parseInt( angle.substring(0,2) );
    int min = Integer.parseInt( angle.substring(3,4) );
    int sec = Integer.parseInt( angle.substring(5,6) );
    int sub = Integer.parseInt( angle.substring(7,8) );
    String hem = angle.substring(9);

    float value = deg + min / 60.0f + sec / 3600.0f + sub / 360000.0f;
    float sign = (hem == "S") ? -1.0 : 1.0; // negative southern hemisphere latitudes
    return sign * value;
} 
```

# jquery - 为什么 MVC3 不绑定这个（JSON）

> ID：14557686
> 
> 赞同：1
> 
> 时间：2013-01-28T07:53:26.550
> 
> 标签：jquery, vb.net, json, asp.net-mvc-3

我对 MVC 和模型绑定真的很陌生，所以我想我犯了一些琐碎的错误，我尝试绑定一些数据；

看法;

```
 $.ajax({
            url: '@Url.Action("Moo")',
            type: "post",
            dataType: "string",
            contentType: "application/json",
            data: JSON.stringify({"test": "bar", "test2": "bar2"}),
            success: function (data) {}       
    }); 
```

模型;

```
Public Class MyTestData

     Public Property test() As String
     Public Property test2() As String

End Class 
```

控制器;

```
Function Moo(test As MyTestData) As ActionResult

    Return View()
End Function 
```

当我运行调试器时，我从控制器中的测试中收到“无”，如果我尝试只使用一个字符串，则代码有效（视图中的数据更改为 {(test:bar)} 并且控制器数据类型从 MytestData 更改为细绳）。

任何输入都适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:57:59.610

重命名您的操作参数。它被称为并与您内部`test`的属性相冲突：`test`

```
Function Moo(model As MyTestData) As ActionResult
    Return View()
End Function 
```

我猜你有太多的测试 :-)`FooBar`似乎是一个更好的名字 :-)

开个玩笑，您的`dataType`参数也有问题。没有这样的价值`string`。使用 ASP.NET MVC，您通常不需要提供它，因为框架正确设置了 HTTP Content-Type 响应标头，而 jQuery 将使用它来自动解析结果。所以只需摆脱它，或者确保您已将其指定为正确的值以匹配您的实际返回类型。由于您的操作返回一个视图，因此您可以将其设置`dataType: 'html'`为一致。

# list - 如何在图形的邻接列表中存储数据，例如人名？

> ID：14557687
> 
> 赞同：0
> 
> 时间：2013-01-28T07:53:32.197
> 
> 标签：list, graph

我知道我们创建了一个链表数组，通过数组的索引表示每个顶点。但是我们如何存储与每个顶点相关的实际数据呢？例如，如果我有一个包含顶点的有向图：1\. John 2\. Mary 3\. Sunny，边为 (John,Mary) 和 (Mary,Sunny)，我们可以使用 ( 1,2) 和 (2,3) 作为边。但是我们在哪里存储与 1,2 和 3 相关的名称呢？

**我做了什么？**

我创建了一个类“vertexnode”，它存储了一个名称和一个指向“edgenode”类对象的指针。然后我创建了一个包含“vertexnode”类对象的数组。'edgenode' 类包含 1）此数组的索引，其中索引表示边的第二个端点，以及 2）指向 'edgenode' 的下一个对象的指针。然后我在图中添加了顶点（名称）和边（名称对）。程序运行正常。

我想知道这是否是一种有效的方法，或者最好将名称单独存储在一个数组中，或者还有其他方法？基本上，我想知道传统上是如何完成的？

**PS：**请避免在您的答案中使用 STL 或 Boost 或类似的东西。我是图表新手，我想知道事情在基本层面是如何工作的，而不是一些已经为我们准备好的功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:05:11.787

我认为这种情况下你有太多的课程，不知道这是否是最好的方法，但我会选择一个课程：

```
Vertex
{
   string name;
   List<Vertex> adjacent;
} 
```

这样你就可以知道哪个顶点链接到哪个顶点，并且你只有一个类来存储所有内容。

但我会说最好的方法是满足您需求的方法，这取决于您要对图表做什么

# java - 对象比较的通用合约：equals() 和 hashCode()

> ID：14557695
> 
> 赞同：2
> 
> 时间：2013-01-28T07:54:07.423
> 
> 标签：java

equals 方法的一般合同中有一点，它说如果你定义了`equals()`方法，那么你也应该定义`hashCode()`方法。如果`o1.equals(o2)`那么这是必须的`o1.hashCode() == o2.hashCode()`。

所以我的问题是，如果我违反了这份合同怎么办？`o1.equals(o2)`但是哪里会带来失败的情况`o1.hashCode != o2.hashCode()`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:57:53.967

它将导致基于哈希的数据结构中出现意外行为，例如：`HashMap`，[阅读 HashTable 的工作原理](http://javapapers.com/core-java/java-hashtable/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T08:03:23.093

HashMap/HashTable/HashSet/etc 将根据其将您的对象放入多个存储桶之一`hashCode`，然后检查该存储桶中是否有任何其他对象`equal`。

因为这些类假定 equals/hashCode 契约，它们不会检查其他存储桶中的对象是否相等。毕竟，另一个桶中的任何对象都必须具有不同的 hashCode，因此（根据合同）不能等于问题中的对象。如果两个对象`equal`具有不同的哈希码，它们可能最终位于不同的桶中，在这种情况下，HashMap/Table/Set/etc 将没有机会比较它们。

因此，您最终可能会得到一个包含两个相等对象的 Set —— 这是不应该做的；或包含同一个键​​的两个值的 Map（因为桶是键）；或您无法查找键的 Map （因为查找同时检查哈希码和相等性）；或任何数量的类似错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T07:58:15.130

如果您违反合同，您的对象将无法与基于散列的容器（以及任何其他使用`hashCode()`并依赖其合同的容器）一起使用。

基本直觉如下：看两个对象是否相同，容器可以同时调用`hashCode()`两者，比较结果。如果哈希码不同，则通过假设两个对象不相等来允许容器短路。

举一个具体的例子， if `o1.equals(o2)`but `o1.hashCode() != o2.hashCode()`，您可能能够将两个对象都插入到 a`HashMap`中（这意味着存储*唯一的*对象）。

# hadoop - Apache Hive 安装错误

> ID：14557706
> 
> 赞同：-2
> 
> 时间：2013-01-28T07:54:52.157
> 
> 标签：hadoop, hive

是否知道 org.apache.hadoop.hive.ql.session.sessionstate 中的 .jar 文件？将 Apache Hive 安装到 Hadoop 时出现错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:21:12.417

快速`jar -tvf`显示`org.apache.hadoop.hive.ql.session.SessionState`在`hive-exec-*.jar`.

# c++ - Boost Wave 不能做什么？

> ID：14557710
> 
> 赞同：1
> 
> 时间：2013-01-28T07:55:19.637
> 
> 标签：c++, c, boost, c-preprocessor

Boost Wave 提供了一个可重用的 C 预处理器。从文档中很容易获得它所做的事情的（广泛的）列表，它支持的标准，它包含的功能等。

它*不做*什么？它是否支持 GCC 和 Microsoft C++ 的所有非标准扩展？还是用于嵌入式系统的各种供应商编译器？它对内联汇编的各种语法或古怪遗留系统中已弃用的代码有何影响？有没有人尝试过，例如完整的 Linux 内核源代码或 Windows 标头集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:48:37.220

好的，我自己编译并运行了几个实验。到目前为止，它似乎不支持这个 GCC 扩展：

[http://gcc.gnu.org/onlinedocs/cpp/Directives-Within-Macro-Arguments.html#Directives-Within-Macro-Arguments](http://gcc.gnu.org/onlinedocs/cpp/Directives-Within-Macro-Arguments.html#Directives-Within-Macro-Arguments)

以及包含以下构造的 Microsoft 头文件 C:\Program Files (x86)\Microsoft Visual Studio 11.0\vc\include\xkeycheck.h 上的 barfs：

```
#if defined(auto)   /* check C keywords */  \
|| defined(break) \
... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T12:53:07.043

确定它是否支持您最喜欢的扩展的最简单方法就是，您知道，**尝试一下**。在这里提问并等待足够多的评论/答案积累以得出结论*可能*更快。或者查看文档，如果它根本不谈论 GCC/MSC 扩展，它可能只是不知道它们。

# android - 如何创建像原始 android 菜单一样的水平列表？

> ID：14557712
> 
> 赞同：1
> 
> 时间：2013-01-28T07:55:27.627
> 
> 标签：android

我有一些信息列表，我想在屏幕上显示每个项目。屏幕下方或上方应该有点，显示我的顺序。你可以想象原始的android菜单

![在此处输入图像描述](../Images/18504b38914ac0d596d98bdda444fbd4.png)

我怎样才能创建这样的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:04:10.567

尝试`ViewPager`使用`PageTitleStrip`. 或者在顶部添加您自己的自定义视图并显示`ViewPager`打开的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:10:38.257

您可以使用此自定义类来实现您的要求：

**Horizo​​ntalPagerWithPageControl**

> ```
>  /**
>     * A view group that allows users to switch between multiple screens (layouts)
>      * in the same way as the Android home screen (Launcher application).     
>      * You can add and remove views using the normal methods
>     * {@link ViewGroup#addView(View)}, {@link ViewGroup#removeView(View)} etc. You
>     * may want to listen for updates by calling      
>     * {@link HorizontalPagerWithPageControl#setOnScreenSwitchListener(OnScreenSwitchListener)}
>     * in order to perform operations once a new screen has been selected.
>     * 
>     * Modifications from original version (ysamlan): Animate argument in
>     * setCurrentScreen and duration in snapToScreen; onInterceptTouchEvent handling
>     * to support nesting a vertical Scrollview inside the RealViewSwitcher;
>     * allowing snapping to a view even during an ongoing scroll; snap to next/prev
>     * view on 25% scroll change; density-independent swipe sensitivity;
>     * width-independent pager animation durations on scrolling to properly handle
>       * large screens without excessively long animations.
>     * 
>     * Modifications from the version of ysamlan: Added page control to the bottom
>     * of this view.
>     * 
>     * Other modifications: (aveyD) Handle orientation changes properly and fully
>     * snap to the right position.
>     * 
>     * @author Marc Reichelt, <a
>     *         href="http://www.marcreichelt.de/">http://www.marcreichelt.de/</a>
>     * @version 0.1.0
>     */
>    public final class HorizontalPagerWithPageControl extends ViewGroup {
> /*
>  * How long to animate between screens when programmatically setting with
>  * setCurrentScreen using the animate parameter
>  */
> private static final int ANIMATION_SCREEN_SET_DURATION_MILLIS = 500;
> // What fraction (1/x) of the screen the user must swipe to indicate a page
> // change
> private static final int FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE = 4;
> private static final int INVALID_SCREEN = -1;
> /*
>  * Velocity of a swipe (in density-independent pixels per second) to force a
>  * swipe to the next/previous screen. Adjusted into
>  * mDensityAdjustedSnapVelocity on init.
>  */
> private static final int SNAP_VELOCITY_DIP_PER_SECOND = 600;
> // Argument to getVelocity for units to give pixels per second (1 = pixels
> // per millisecond).
> private static final int VELOCITY_UNIT_PIXELS_PER_SECOND = 1000;
> private static final int TOUCH_STATE_REST = 0;
> private static final int TOUCH_STATE_HORIZONTAL_SCROLLING = 1;
> private static final int TOUCH_STATE_VERTICAL_SCROLLING = -1;
> private int m_currentScreen;
> private int m_densityAdjustedSnapVelocity;
> private boolean m_firstLayout = true;
> private float m_lastMotionX;
> private float m_lastMotionY;
> private OnScreenSwitchListener m_onScreenSwitchListener;
> private int m_maximumVelocity;
> private int m_nextScreen = INVALID_SCREEN;
> private Scroller m_scroller;
> private int m_touchSlop;
> private int m_touchState = TOUCH_STATE_REST;
> private VelocityTracker m_velocityTracker;
> private int m_lastSeenLayoutWidth = -1;
> // Active and inactive draw
> private Drawable m_activeDrawable;
> private Drawable m_inactiveDrawable;
> // The size for the drawables
> private float m_indicatorSize;
> // The screen scale to get px to dip
> private static float SCALE;
> /**
>  * Simple constructor to use when creating a view from code.
>  * 
>  * @param p_context
>  *            The Context the view is running in, through which it can
>  *            access the current theme, resources, etc.
>  */
> public HorizontalPagerWithPageControl(final Context p_context) {
>     super(p_context);
>     init();
> }
> /**
>  * Constructor that is called when inflating a view from XML. This is called
>  * when a view is being constructed from an XML file, supplying attributes
>  * that were specified in the XML file. This version uses a default style of
>  * 0, so the only attribute values applied are those in the Context's Theme
>  * and the given AttributeSet.
>  * 
>  * <p>
>  * The method onFinishInflate() will be called after all children have been
>  * added.
>  * 
>  * @param p_context
>  *            The Context the view is running in, through which it can
>  *            access the current theme, resources, etc.
>  * @param p_attrs
>  *            The attributes of the XML tag that is inflating the view.
>  * @see #View(Context, AttributeSet, int)
>  */
> public HorizontalPagerWithPageControl(final Context p_context,
>         final AttributeSet p_attrs) {
>     super(p_context, p_attrs);
>     init();
> }
> /**
>  * Sets up the scroller and touch/fling sensitivity parameters for the
>  * pager.
>  */
> private void init() {
>     m_scroller = new Scroller(getContext());
>     // get the screen density
>     SCALE = getResources().getDisplayMetrics().density;
>     // set the indicator size resolution independent
>     m_indicatorSize = (7 * SCALE);
>     // Calculate the density-dependent snap velocity in pixels
>     DisplayMetrics m_displayMetrics = new DisplayMetrics();
>     ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE))
>             .getDefaultDisplay().getMetrics(m_displayMetrics);
>     m_densityAdjustedSnapVelocity = (int) (m_displayMetrics.density * SNAP_VELOCITY_DIP_PER_SECOND);
>     final ViewConfiguration m_configuration = ViewConfiguration
>             .get(getContext());
>     m_touchSlop = m_configuration.getScaledTouchSlop();
>     m_maximumVelocity = m_configuration.getScaledMaximumFlingVelocity();
>     // draw the shapes
>     makeShapes();
> }
> @Override
> protected void onMeasure(final int p_widthMeasureSpec,
>         final int p_heightMeasureSpec) {
>     super.onMeasure(p_widthMeasureSpec, p_heightMeasureSpec);
>     final int m_width = MeasureSpec.getSize(p_widthMeasureSpec);
>     final int m_widthMode = MeasureSpec.getMode(p_widthMeasureSpec);
>     if (m_widthMode != MeasureSpec.EXACTLY) {
>         throw new IllegalStateException(
>                 "ViewSwitcher can only be used in EXACTLY mode.");
>     }
>     final int m_heightMode = MeasureSpec.getMode(p_heightMeasureSpec);
>     if (m_heightMode != MeasureSpec.EXACTLY) {
>         throw new IllegalStateException(
>                 "ViewSwitcher can only be used in EXACTLY mode.");
>     }
>     // The children are given the same width and height as the workspace
>     final int m_count = getChildCount();
>     for (int m_i = 0; m_i < m_count; m_i++) {
>         getChildAt(m_i).measure(p_widthMeasureSpec, p_heightMeasureSpec);
>     }
>     if (m_firstLayout) {
>         scrollTo(m_currentScreen * m_width, 0);
>         m_firstLayout = false;
>     }
>     else if (m_width != m_lastSeenLayoutWidth) { // Width has changed
>         /*
>          * Recalculate the width and scroll to the right position to be sure
>          * we're in the right place in the event that we had a rotation that
>          * didn't result in an activity restart (code by aveyD). Without
>          * this you can end up between two pages after a rotation.
>          */
>         Display m_display = ((WindowManager) getContext().getSystemService(
>                 Context.WINDOW_SERVICE)).getDefaultDisplay();
>         int m_displayWidth = m_display.getWidth();
>         m_nextScreen = Math.max(0,
>                 Math.min(getCurrentScreen(), getChildCount() - 1));
>         final int m_newX = m_nextScreen * m_displayWidth;
>         final int m_delta = m_newX - getScrollX();
>         m_scroller.startScroll(getScrollX(), 0, m_delta, 0, 0);
>     }
>     m_lastSeenLayoutWidth = m_width;
> }
> @Override
> protected void onLayout(final boolean p_changed, final int p_l,
>         final int p_t, final int p_r, final int p_b) {
>     int m_childLeft = 0;
>     final int m_count = getChildCount();
>     for (int m_i = 0; m_i < m_count; m_i++) {
>         final View m_child = getChildAt(m_i);
>         if (m_child.getVisibility() != View.GONE) {
>             final int m_childWidth = m_child.getMeasuredWidth();
>             m_child.layout(m_childLeft, 0, m_childLeft + m_childWidth,
>                     m_child.getMeasuredHeight());
>             m_childLeft += m_childWidth;
>         }
>     }
> }
> @Override
> public boolean onInterceptTouchEvent(final MotionEvent p_ev) {
>     /*
>      * By Yoni Samlan: Modified onInterceptTouchEvent based on standard
>      * ScrollView's onIntercept. The logic is designed to support a nested
>      * vertically scrolling view inside this one; once a scroll registers
>      * for X-wise scrolling, handle it in this view and don't let the
>      * children, but once a scroll registers for y-wise scrolling, let the
>      * children handle it exclusively.
>      */
>     final int m_action = p_ev.getAction();
>     boolean m_intercept = false;
>     switch (m_action) {
>     case MotionEvent.ACTION_MOVE:
>         /*
>          * If we're in a horizontal scroll event, take it (intercept further
>          * events). But if we're mid-vertical-scroll, don't even try; let
>          * the children deal with it. If we haven't found a scroll event
>          * yet, check for one.
>          */
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             /*
>              * We've already started a horizontal scroll; set intercept to
>              * true so we can take the remainder of all touch events in
>              * onTouchEvent.
>              */
>             m_intercept = true;
>         } else if (m_touchState == TOUCH_STATE_VERTICAL_SCROLLING) {
>             // Let children handle the events for the duration of the scroll
>             // event.
>             m_intercept = false;
>         } else { // We haven't picked up a scroll event yet; check for one.
>             /*
>              * If we detected a horizontal scroll event, start stealing
>              * touch events (mark as scrolling). Otherwise, see if we had a
>              * vertical scroll event -- if so, let the children handle it
>              * and don't look to intercept again until the motion is done.
>              */
>             final float m_x = p_ev.getX();
>             final int m_xDiff = (int) Math.abs(m_x - m_lastMotionX);
>             boolean m_xMoved = m_xDiff > m_touchSlop;
>             if (m_xMoved) {
>                 // Scroll if the user moved far enough along the X axis
>                 m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>                 m_lastMotionX = m_x;
>             }
>             final float m_y = p_ev.getY();
>             final int m_yDiff = (int) Math.abs(m_y - m_lastMotionY);
>             boolean m_yMoved = m_yDiff > m_touchSlop;
>             if (m_yMoved) {
>                 m_touchState = TOUCH_STATE_VERTICAL_SCROLLING;
>             }
>         }
>         break;
>     case MotionEvent.ACTION_CANCEL:
>     case MotionEvent.ACTION_UP:
>         // Release the drag.
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     case MotionEvent.ACTION_DOWN:
>         /*
>          * No motion yet, but register the coordinates so we can check for
>          * intercept at the next MOVE event.
>          */
>         m_lastMotionY = p_ev.getY();
>         m_lastMotionX = p_ev.getX();
>         break;
>     default:
>         break;
>     }
>     return m_intercept;
> }
> @Override
> public boolean onTouchEvent(final MotionEvent p_ev) {
>     if (m_velocityTracker == null) {
>         m_velocityTracker = VelocityTracker.obtain();
>     }
>     m_velocityTracker.addMovement(p_ev);
>     final int m_action = p_ev.getAction();
>     final float m_x = p_ev.getX();
>     switch (m_action) {
>     case MotionEvent.ACTION_DOWN:
>         /*
>          * If being flinged and user touches, stop the fling. isFinished
>          * will be false if being flinged.
>          */
>         if (!m_scroller.isFinished()) {
>             m_scroller.abortAnimation();
>         }
>         // Remember where the motion event started
>         m_lastMotionX = m_x;
>         if (m_scroller.isFinished()) {
>             m_touchState = TOUCH_STATE_REST;
>         } else {
>             m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>         }
>         break;
>     case MotionEvent.ACTION_MOVE:
>         final int m_xDiff = (int) Math.abs(m_x - m_lastMotionX);
>         boolean m_xMoved = m_xDiff > m_touchSlop;
>         if (m_xMoved) {
>             // Scroll if the user moved far enough along the X axis
>             m_touchState = TOUCH_STATE_HORIZONTAL_SCROLLING;
>         }
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             // Scroll to follow the motion event
>             final int m_deltaX = (int) (m_lastMotionX - m_x);
>             m_lastMotionX = m_x;
>             final int m_scrollX = getScrollX();
>             if (m_deltaX < 0) {
>                 if (m_scrollX > 0) {
>                     scrollBy(Math.max(-m_scrollX, m_deltaX), 0);
>                 }
>             } else if (m_deltaX > 0) {
>                 final int m_availableToScroll = getChildAt(
>                         getChildCount() - 1).getRight()
>                         - m_scrollX - getWidth();
>                 if (m_availableToScroll > 0) {
>                     scrollBy(Math.min(m_availableToScroll, m_deltaX), 0);
>                 }
>             }
>         }
>         break;
>     case MotionEvent.ACTION_UP:
>         if (m_touchState == TOUCH_STATE_HORIZONTAL_SCROLLING) {
>             final VelocityTracker m_velocityTrack = m_velocityTracker;
>             m_velocityTrack.computeCurrentVelocity(
>                     VELOCITY_UNIT_PIXELS_PER_SECOND, m_maximumVelocity);
>             int m_velocityX = (int) m_velocityTrack.getXVelocity();
>             if (m_velocityX > m_densityAdjustedSnapVelocity
>                     && m_currentScreen > 0) {
>                 // Fling hard enough to move left
>                 snapToScreen(m_currentScreen - 1);
>             } else if (m_velocityX < -m_densityAdjustedSnapVelocity
>                     && m_currentScreen < getChildCount() - 1) {
>                 // Fling hard enough to move right
>                 snapToScreen(m_currentScreen + 1);
>             } else {
>                 snapToDestination();
>             }
>             if (m_velocityTracker != null) {
>                 m_velocityTracker.recycle();
>                 m_velocityTracker = null;
>             }
>         }
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     case MotionEvent.ACTION_CANCEL:
>         m_touchState = TOUCH_STATE_REST;
>         break;
>     default:
>         break;
>     }
>     return true;
> }
> @Override
> public void computeScroll() {
>     if (m_scroller.computeScrollOffset()) {
>         scrollTo(m_scroller.getCurrX(), m_scroller.getCurrY());
>         postInvalidate();
>     } else if (m_nextScreen != INVALID_SCREEN) {
>         m_currentScreen = Math.max(0,
>                 Math.min(m_nextScreen, getChildCount() - 1));
>         // Notify observer about screen change
>         if (m_onScreenSwitchListener != null) {
>             m_onScreenSwitchListener.onScreenSwitched(m_currentScreen);
>         }
>         m_nextScreen = INVALID_SCREEN;
>     }
> }
> /**
>  * Returns the index of the currently displayed screen.
>  * 
>  * @return The index of the currently displayed screen.
>  */
> public int getCurrentScreen() {
>     return m_currentScreen;
> }
> /**
>  * Sets the current screen.
>  * 
>  * @param p_currentScreen
>  *            The new screen.
>  * @param p_animate
>  *            True to smoothly scroll to the screen, false to snap instantly
>  */
> public void setCurrentScreen(final int p_currentScreen,
>         final boolean p_animate) {
>     m_currentScreen = Math.max(0,
>             Math.min(p_currentScreen, getChildCount() - 1));
>     if (p_animate) {
>         snapToScreen(p_currentScreen, ANIMATION_SCREEN_SET_DURATION_MILLIS);
>     } else {
>         scrollTo(m_currentScreen * getWidth(), 0);
>     }
>     invalidate();
> }
> /**
>  * Sets the {@link OnScreenSwitchListener}.
>  * 
>  * @param onScreenSwitchListener
>  *            The listener for switch events.
>  */
> public void setOnScreenSwitchListener(
>         final OnScreenSwitchListener onScreenSwitchListener) {
>     m_onScreenSwitchListener = onScreenSwitchListener;
> }
> /**
>  * Snaps to the screen we think the user wants (the current screen for very
>  * small movements; the next/prev screen for bigger movements).
>  */
> private void snapToDestination() {
>     final int m_screenWidth = getWidth();
>     int m_scrollX = getScrollX();
>     int m_whichScreen = m_currentScreen;
>     int m_deltaX = m_scrollX - (m_screenWidth * m_currentScreen);
>     // Check if they want to go to the prev. screen
>     if ((m_deltaX < 0)
>             && m_currentScreen != 0
>             && ((m_screenWidth / FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE) < -m_deltaX)) {
>         m_whichScreen--;
>         // Check if they want to go to the next screen
>     } else if ((m_deltaX > 0)
>             && (m_currentScreen + 1 != getChildCount())
>             && ((m_screenWidth / FRACTION_OF_SCREEN_WIDTH_FOR_SWIPE) < m_deltaX)) {
>         m_whichScreen++;
>     }
>     snapToScreen(m_whichScreen);
> }
> /**
>  * Snap to a specific screen, animating automatically for a duration
>  * proportional to the distance left to scroll.
>  * 
>  * @param p_whichScreen
>  *            Screen to snap to
>  */
> private void snapToScreen(final int p_whichScreen) {
>     snapToScreen(p_whichScreen, -1);
> }
> /**
>  * Snaps to a specific screen, animating for a specific amount of time to
>  * get there.
>  * 
>  * @param p_whichScreen
>  *            Screen to snap to
>  * @param p_duration
>  *            -1 to automatically time it based on scroll distance; a
>  *            positive number to make the scroll take an exact duration.
>  */
> private void snapToScreen(final int p_whichScreen, final int p_duration) {
>     /*
>      * Modified by Yoni Samlan: Allow new snapping even during an ongoing
>      * scroll animation. This is intended to make HorizontalPager work as
>      * expected when used in conjunction with a RadioGroup used as "tabbed"
>      * controls. Also, make the animation take a percentage of our normal
>      * animation time, depending how far they've already scrolled.
>      */
>     m_nextScreen = Math
>             .max(0, Math.min(p_whichScreen, getChildCount() - 1));
>     final int m_newX = m_nextScreen * getWidth();
>     final int m_delta = m_newX - getScrollX();
>     if (p_duration < 0) {
>         // E.g. if they've scrolled 80% of the way, only animation for 20%
>         // of the duration
>         m_scroller
>                 .startScroll(
>                         getScrollX(),
>                         0,
>                         m_delta,
>                         0,
>                         (int) (Math.abs(m_delta) / (float) getWidth() * ANIMATION_SCREEN_SET_DURATION_MILLIS));
>     } else {
>         m_scroller.startScroll(getScrollX(), 0, m_delta, 0, p_duration);
>     }
>     // sets the drawables when the user swipes
>     setActiveInactiveDrawables(p_whichScreen);
>     // redraw screen
>     invalidate();
> }
> /**
>  * Allways called when the user swipes to another view. Gets the current
>  * view an sets the active drawable / shape to the curretn view. (in the
>  * page control)
>  */
> public void setActiveInactiveDrawables(int p_whichScreen) {
>     // Getting the Linear Layout where the page control drawables are inside
>     LinearLayout m_linLayout = (LinearLayout) ((ViewGroup) this.getParent())
>             .getChildAt(((LinearLayout) this.getParent()).getChildCount() - 1);
>     // get every imageview and set the one of the current screen to active
>     for (int m_i = 0; m_i < this.getChildCount(); m_i++) {
>         ImageView m_imgView = (ImageView) m_linLayout.getChildAt(m_i);
>         if (m_i == p_whichScreen) {
>             m_imgView.setBackgroundDrawable(m_activeDrawable);
>         } else {
>             m_imgView.setBackgroundDrawable(m_inactiveDrawable);
>         }
>     }
> }
> /**
>  * Listener for the event that the HorizontalPager switches to a new view.
>  */
> public static interface OnScreenSwitchListener {
>     /**
>      * Notifies listeners about the new screen. Runs after the animation
>      * completed.
>      * 
>      * @param screen
>      *            The new screen index.
>      */
>     void onScreenSwitched(int screen);
> }
> /**
>  * Builds the active and inactive shapes / drawables for the page control
>  */
> private void makeShapes() {
>     m_activeDrawable = new ShapeDrawable();
>     m_inactiveDrawable = new ShapeDrawable();
>     m_activeDrawable.setBounds(0, 0, (int) m_indicatorSize,
>             (int) m_indicatorSize);
>     m_inactiveDrawable.setBounds(0, 0, (int) m_indicatorSize,
>             (int) m_indicatorSize);
>     int m_i[] = new int[2];
>     m_i[0] = android.R.attr.textColorSecondary;
>     m_i[1] = android.R.attr.textColorSecondaryInverse;
>     TypedArray a = getContext().getTheme().obtainStyledAttributes(m_i);
>     Shape m_s1 = new OvalShape();
>     m_s1.resize(m_indicatorSize, m_indicatorSize);
>     Shape m_s2 = new OvalShape();
>     m_s2.resize(m_indicatorSize, m_indicatorSize);
>     ((ShapeDrawable) m_activeDrawable).getPaint().setColor(
>             a.getColor(0, Color.DKGRAY));
>     ((ShapeDrawable) m_inactiveDrawable).getPaint().setColor(
>             a.getColor(1, Color.LTGRAY));
>     ((ShapeDrawable) m_activeDrawable).setShape(m_s1);
>     ((ShapeDrawable) m_inactiveDrawable).setShape(m_s2);
> }
> /**
>  * Called by the Activity when all Views are added to the horizontal pager
>  * to
>  */
> public void addPagerControl() {
>     ViewGroup m_view = (ViewGroup) this.getParent();
>     m_view.addView(initPageControl());
> }
> private LinearLayout initPageControl() {
>     LinearLayout m_linearLayout = new LinearLayout(getContext());
>     LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
>             LinearLayout.LayoutParams.FILL_PARENT,
>             LinearLayout.LayoutParams.FILL_PARENT, 2f);
>     m_linearLayout.setLayoutParams(params);
>     m_linearLayout.setOrientation(LinearLayout.HORIZONTAL);
>     m_linearLayout.setGravity(Gravity.CENTER_HORIZONTAL
>             | Gravity.CENTER_VERTICAL);
>     m_linearLayout.setBackgroundColor(Color.BLACK);
>     return setPageCount(this.getChildCount(), m_linearLayout);
> }
> /**
>  * Initializes the page control layout at be bottom of the news view. Draws
>  * all page control shapes an set the active shape to the first view
>  * 
>  * @param p_pageCount
>  *            the cout of the pages the user can swipe to
>  * @param p_linearLayout2
>  *            the page control linearlayout
>  * @return the given layout filled with the page control shapes
>  */
> private LinearLayout setPageCount(int p_pageCount,
>         LinearLayout p_linearLayout2) {
>     for (int m_i = 0; m_i < p_pageCount; m_i++) {
>         final ImageView m_imageView = new ImageView(getContext());
>         LinearLayout.LayoutParams m_params = new LinearLayout.LayoutParams(
>                 (int) m_indicatorSize, (int) m_indicatorSize);
>         m_params.setMargins((int) m_indicatorSize / 2,
>                 (int) m_indicatorSize, (int) m_indicatorSize / 2,
>                 (int) m_indicatorSize);
>         m_imageView.setLayoutParams(m_params);
>         m_imageView.setBackgroundDrawable(m_inactiveDrawable);
>         if (m_i == 0) {
>             m_imageView.setBackgroundDrawable(m_activeDrawable);
>         }
>         p_linearLayout2.addView(m_imageView);
>     }
>     return p_linearLayout2;
> }
>    } 
> ```

使用这个上面的类如下：

> ```
>  private HorizontalPagerWithPageControl m_pager;
> @Override
> public void onCreate(final Bundle p_savedInstanceState) {
>     super.onCreate(p_savedInstanceState);
>     setContentView(R.layout.horizontal_pager_with_page_control);
>     m_pager = (HorizontalPagerWithPageControl) findViewById(R.id.hphorizontal_pager);
>     /*
>      * You can add more views to the horizontal pager here with
>      * mPager.addChild() or in xml. When every view is in the horizontal
>      * pager just call addPagerControl() on the horzizontal pager.
>      */
>     m_pager.addPagerControl();
> } 
> ```

布局文件：

> ```
>  <com.wli.horizontalpager.withpagecontrol.HorizontalPagerWithPageControl
>     android:id="@+id/hphorizontal_pager"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:layout_weight="0.1"
>     android:background="#00000000">
>         <TextView
>             android:layout_width="fill_parent"
>             android:layout_height="fill_parent"
>             android:text="@string/lipsum"
>             android:textSize="24sp"
>             android:textColor="#000"
>             android:textStyle="bold"
>             android:background="#f00" />
>     <ScrollView
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent">
>         <TextView
>             android:layout_width="fill_parent"
>             android:layout_height="fill_parent"
>             android:text="@string/lipsum"
>             android:textSize="24sp"
>             android:textColor="#000"
>             android:textStyle="bold"
>             android:background="#0f0" />
>     </ScrollView>
>        </com.wli.horizontalpager.withpagecontrol.HorizontalPagerWithPageControl> 
> ```

我希望它会帮助你。

谢谢。

# wpf - WPF 滑块 - 对齐到 0.5

> ID：14557714
> 
> 赞同：2
> 
> 时间：2013-01-28T07:55:31.233
> 
> 标签：wpf, binding, slider

我需要以下帮助：我希望我的滑块捕捉到 0.5，但我不能使用 TickFrequency 属性，因为由于非线性比例，我正在使用 Ticks DoubleCollection。实际上，我正在使用刻度来绘制带有数字的自定义刻度条，如下所示：

```
public class NumberedTickBar : TickBar
{
    protected override void OnRender(DrawingContext dc)
    {
        string text;
        FormattedText formattedText;
        int i;
        double step;
        double minStep = this.ActualHeight / (this.Maximum - this.Minimum);
        double currentPosition = 0;
        // Draw each tick text
        for (i = 0; i < this.Ticks.Count; i++)
        {
            if (i == 0) step = i;
            else step = this.Ticks[i] - this.Ticks[i - 1];

            currentPosition += step * minStep;
            text = "-" + this.Ticks[i].ToString();

            formattedText = new FormattedText(text, CultureInfo.GetCultureInfo("en-us"), FlowDirection.LeftToRight, new Typeface("Tahoma"), 10, Brushes.DimGray);
            dc.DrawText(formattedText, new Point(22, base.ActualHeight - currentPosition));
        }
    }
} 
```

我的滑块定义如下：

```
<Slider Name="SomeSlider" Orientation="Vertical" Style="{DynamicResource MySliderStyle}" 
    Focusable="False" Value="{Binding Path=SomeProp, Mode=OneWay}"
    Maximum="35" TickPlacement="TopLeft" Minimum="8" AutoToolTipPlacement="TopLeft"               AutoToolTipPrecision="1" 
    MinHeight="80" Ticks="8,15,20,25,30,35" 
    ValueChanged="SomeSlider_ValueChanged"/> 
```

正如你可以豪宅，滑块值绑定到一个依赖属性，当我试图做一些事情时：

```
private void SLAlowCooling_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)

    {
        (sender as Slider).Value = Math.Round(e.NewValue * 2, 0) / 2;
    } 
```

滑块在被操纵时效果很好，但是当我更改 SomeProp 时，绑定不起作用。没有事件处理绑定可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:17:05.383

我在[这里找到了一个解决方案](http://gallery.expression.microsoft.com/SnappingSlider/)（稍微修改了一下）：

```
<Slider Name="SomeSlider" Orientation="Vertical" 
        AutoToolTipPlacement="TopLeft" AutoToolTipPrecision="1" 
        Value="{Binding SomeProp}" 
        TickPlacement="TopLeft" Ticks="8,15,20,25,30,35" 
        Minimum="8" Maximum="35" SmallChange="0.5">
    <i:Interaction.Behaviors>
        <wpfGridView:SnappingSlider/>
    </i:Interaction.Behaviors>
</Slider> 
```

```
public class SnappingSlider : Behavior<Slider>
{
    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.ValueChanged += AssociatedObjectValueChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.ValueChanged -= AssociatedObjectValueChanged;
    }

    private void AssociatedObjectValueChanged(object sender, System.Windows.RoutedPropertyChangedEventArgs<double> e)
    {
        double steps = Math.Round((e.NewValue - AssociatedObject.Minimum) / AssociatedObject.SmallChange);
        if(steps<0)
            return;
        double newValue = AssociatedObject.Minimum + steps*AssociatedObject.SmallChange;
        if(newValue>AssociatedObject.Maximum)
            return;
        AssociatedObject.Value = newValue;
    }
} 
```

*   您需要引用 System.Windows.Interactivity 才能使行为生效。 `xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"`

*   这使滑块捕捉到 SmallChange 偏移量的倍数

    由于某种原因，它在设计时显示错误，`The name "SnappingSlider" does not exist in the namespace "clr-namespace:WpfGridView".`不知道为什么。

# sql - 使用相同的 SUM 和 Group BY 更新两列

> ID：14557716
> 
> 赞同：1
> 
> 时间：2013-01-28T07:55:32.727
> 
> 标签：sql, sql-server-2008

我想用这个查询中的值进行更新，但它说的是错误……我正试图将它最小化。

```
update p
set a10=t.sumgc
from temp as p inner join 
(SELECT     SUM(gcsanad) as sumgc,good_gr
fROM         dbo.fgoodgroup 
WHERE     (flag = 2)
group by good_gr ) as t
on t.good_gr=p.a3
,
a11=t.sumgc
from temp as p inner join 
(SELECT     SUM(gcsanad) as sumgc,good_gr
fROM         dbo.fgoodgroup 
WHERE     (flag = 4) 
group by good_gr ) as t
on t.good_gr=p.a3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:57:39.503

试试这样

```
update p
set a10=t.sumgc
,
a11=t.sumgc1

from temp as p inner join 
(SELECT 
  (case when  flag = 2 then   SUM(gcsanad)  end) as sumgc,
  (case when  flag = 4 then   SUM(gcsanad)  end) as sumgc1
fROM         dbo.fgoodgroup 
group by good_gr ) as t
on t.good_gr=p.a3 
```

# vb.net - 我可以在谷歌云上部署 .net windows 应用程序吗？

> ID：14557719
> 
> 赞同：0
> 
> 时间：2013-01-28T07:55:40.850
> 
> 标签：vb.net, cloud

我想在谷歌云上部署 .net windows 应用程序，对一些 http 页面执行 http 请求并插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:10:35.300

目前这是不可能的，因为 google 不支持 Google App Engine 上的 .Net 运行时。但是，当前存在请求 C# 支持的问题。 [http://code.google.com/p/googleappengine/issues/detail?id=8](http://code.google.com/p/googleappengine/issues/detail?id=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T23:28:56.407

是的，截至 2018 年 7 月，有多种方法可以将 .NET 应用程序部署到 Google Cloud。

.NET*核心*应用程序可以部署到[App Engine Flex](https://cloud.google.com/appengine/docs/flexible/dotnet/)和[Kubernetes Engine](https://cloud.google.com/kubernetes-engine/)。

.NET*框架*应用程序可以部署到[Compute Engine](https://cloud.google.com/compute/)。

[适用于 Visual Studio 的 Google Cloud Tools 可](https://marketplace.visualstudio.com/items?itemName=GoogleCloudTools.GoogleCloudPlatformExtensionforVisualStudio)轻松将 .NET 应用部署到 Google Cloud。

# paypal - 贝宝沙箱 IPN 通知 url 没有响应

> ID：14557720
> 
> 赞同：0
> 
> 时间：2013-01-28T07:55:45.113
> 
> 标签：paypal, paypal-sandbox, paypal-subscriptions

我正在我的网站上实施 Paypal 标准付款。当用户发出订阅和更新数据库以跟踪销售和用户付款时，我有一个资源来接收通知。我确实不小心更改了我网站上的通知资源，这意味着它停止工作。一旦用户成功结帐并且通知 url 停止工作，paypal 是否有任何设置通过电子邮件提醒我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:50:28.387

如果 IPN 网址无响应，您实际上会收到来自 PayPal 的通知。电子邮件如下所示：

```
 Hello xxxxx,

 Please check your server that handles PayPal Instant Payment Notifications (IPN).
 IPNs sent to the following URL(s) are failing:

    http://domain.com/ipnhandler.php

 If you do not recognize this URL, you may be using a service provider that is
 using IPN on your behalf. Please contact your service provider with the above
 information. If this problem continues, IPNs may be disabled for your account.

 Thank you for your prompt attention to this issue.

 Thanks,

 PayPal 
```

在我们的例子中，处理方案知道 IPN 是未完成的（我们每天早上也有一个对账步骤），所以我们可以看看是否必须 - 但我不明白你为什么会发生“事故”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:13:49.687

据我所知，如果您更改了通知 URL，则无法更改存储在任何先前创建的事务中的 URL（当然，那些没有 URL 而创建的事务默认为您的个人资料中指定的 IPN URL设置）。

最好的办法是让前一个听众保持活动状态，并在必要时转发它。根据对以下问题的回答，建立从旧 URL 到保留 POSTed IPN 数据的新 URL 的 301 重定向可能是一种可能的解决方案：[.htaccess - Is it possible to redirect post data?](https://stackoverflow.com/questions/358263/htaccess-is-it-possible-to-redirect-post-data)

# c# - 一个简单的 C# DLL - 我无法从 Excel 创建对象

> ID：14557732
> 
> 赞同：0
> 
> 时间：2013-01-28T07:57:10.163
> 
> 标签：c#, excel, dll

我使用脚本从以下主题创建 c# dll：[A Simple C# DLL - How do I call it from Excel, Access, VBA, VB6?](https://stackoverflow.com/questions/1170794/a-simple-c-sharp-dll-how-do-i-call-it-from-excel-access-vba-vb6/14549790#14549790)

当我打电话时，`Excel 2010`我得到错误：

```
Run-time error '429' ActiveX component can't create object 
```

当我从`.NET`或调用时，我测试 DLL 并工作`DAX2009`，但它不能从`Excel`. 任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:01:28.640

确保您的 Excel 的语言环境设置为 en-us（基本上语言设置为英语）。我有类似的东西，这对我来说是修复......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:58:47.270

所以，我找到了解决方案。这是我的错。我注册 32 位 regasm.exe 并使用 Office 64 位。当我使用 64 位 regasm.exe 注册 DLL 并在 64 位 Office 中使用时，DLL 工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T19:50:05.140

都是关于 32 或 64 位的

选择正确的目标cpu解决了这个问题

[看到这个链接](https://github.com/icsharpcode/SharpDevelop/issues/724)

# java - 文件夹的 Java 相对路径，不适用于文件

> ID：14557735
> 
> 赞同：1
> 
> 时间：2013-01-28T07:57:30.263
> 
> 标签：java, macos, file, relative-path, absolute-path

我正在使用 Mac，我是新手。这是我的问题：

我需要在 Java 中包含一个文件夹作为 File 对象。当我尝试这个时：

```
File firefoxProfileFolder = new File("/Users/prime/work/dmall/selenium/src/test/resources/firefoxprofile"); 
```

它工作正常。此代码位于文件中：`/Users/prime/work/dmall/selenium/src/test/java/com/dmall/utils/WebUtil.java`

但是当我尝试这个时：

```
File firefoxProfileFolder = new File("../../../../resources/firefoxprofile"); 
```

我无法加载文件夹。因此，从该文件到该文件夹​​的相对路径似乎不起作用。所以我该怎么做？我做错了什么？

我需要使用相对路径，因为此代码将从服务器运行，我不知道绝对路径是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:02:56.623

您很可能在相对路径中犯了错误。它应该工作。

为了检查这一点，您可以使用创建新的测试目录`new File('testDir').mkdirs()`并查看 - Java 将在哪里创建此目录。它会在预期的地方还是其他地方？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T08:22:54.713

您可以使用 firefoxProfileFolder.getCanonicalPath() 并检查它是否与 String s = new File("/Users/prime/work/dmall/selenium/src/test/resources/firefoxprofile").getCanonicalPath(); 的路径相同
如果它不是相同的路径，那么您的相对路径是错误的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T08:04:12.520

考虑到启动器脚本的当前目录，您实际上需要使用目录路径。即你的根目录就是这个脚本的目录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T08:10:14.200

您可以在运行时获取目录：

```
URL url = ClassLoader.getSystemResource("relative to/classpath/resources/firefoxprofile");
File file = new File(url.getFile()); // the directory
.... 
```

# perl - perl 对象方法引用使用字符串

> ID：14557738
> 
> 赞同：0
> 
> 时间：2013-01-28T07:57:48.877
> 
> 标签：perl

perl 对象“ **plan** ”有子程序“ **plan_exec_time** ”；

```
my $p = Plan->new; 
```

我可以这样称呼它：`$p->plan_exec_time`

但`$p->"plan_exec_time"`不工作。

现在我想通过变量访问子程序参考：

```
my $t = "plan_exec_";

$p->"${t}time" 
```

这也行不通

如何访问对象的子程序但不通过创建临时变量？

因为这有效：

```
my $x = "${t}time";
$p->$x; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:00:40.857

```
my $t = "plan_exec";
$p->can($t."_time")->($p) 
```

该`can`方法将引用返回给该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:06:41.487

我不明白你为什么要避免使用临时变量 - 任何其他解决方案都将是丑陋和 hacky。但是你可以一次性引用和取消引用一个字符串，就像这样

```
my $p = Plan->new;
my $t = "plan_exec_";
$p->${\"${t}time"}; 
```

# hbase - 表在 HBase 中既不启用也不禁用

> ID：14557742
> 
> 赞同：10
> 
> 时间：2013-01-28T07:58:03.473
> 
> 标签：hbase

我面临一个奇怪的问题。我正在通过 API 访问我的 HBase 表。在执行过程中，我的表“x”得到了 RegionNotServing。但我的 HRegionServers 工作正常。

当我尝试从 HBase Shell 中列出表时，我找不到我的表“x”。当我尝试禁用我的表“x”时，它抛出了一个 TableNotEnabledException，当我尝试启用我的表“x”时，它抛出了一个 TableNotDisabledException。

附件是我得到的例外：

```
hbase(main):002:0> disable 'x'

ERROR: org.apache.hadoop.hbase.TableNotEnabledException: org.apache.hadoop.hbase.TableNotEnabledException: x
        at org.apache.hadoop.hbase.master.handler.DisableTableHandler.<init>(DisableTableHandler.java:75)
        at org.apache.hadoop.hbase.master.HMaster.disableTable(HMaster.java:1154)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1336)

Here is some help for this command:
Start disable of named table: e.g. "hbase> disable 't1'"

hbase(main):003:0> enable 'x'

ERROR: org.apache.hadoop.hbase.TableNotDisabledException: org.apache.hadoop.hbase.TableNotDisabledException: x
        at org.apache.hadoop.hbase.master.handler.EnableTableHandler.<init>(EnableTableHandler.java:74)
        at org.apache.hadoop.hbase.master.HMaster.enableTable(HMaster.java:1142)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1336)

Here is some help for this command:
Start enable of named table: e.g. "hbase> enable 't1'"

hbase(main):004:0> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T08:12:45.870

我以前也有类似的问题。问题是因为 Zookeeper 拿着桌子。所以我按照以下步骤手动删除了表格

1.  `hbase zkcli`使用命令进入 hbase zookeper 客户端模式
2.  使用命令删除表`delete /hbase/table/x`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-11T10:56:21.260

以下步骤对我有用：

1.  进入hbase shell
2.  `get 'hbase:meta', '<AFFECTED_TABLE_NAME>', 'table:state'`
3.  注意上面的“价值”。该值应为`\x08\x00`(Enabled) 或`\x08\x01`(Disabled)
4.  `put 'hbase:meta','<AFFECTED_TABLE_NAME>','table:state',"\b\0"`使表启用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-22T02:37:35.033

我在生产中遇到过类似的问题。问题是特定的 Hbase Table Meta 损坏。所以我使用下面的方法从 zookeeper 中手动删除了表

1\. 使用 hbase zkcli 命令进入 hbase zookeper 客户端模式

2\. 使用命令 delete /hbase/table/x

删除表 3\. 使用命令 delete /hbase/table 删除表-锁/x

执行上述命令后，重新启动 Hbase 但问题仍然出现，因此我使用以下命令从 Hbase 系统表中删除了 Hbase 表的区域

1\. 使用 hbase shell 命令进入 hbase

2\. 使用以下命令删除卡在过渡状态的表区域

deleteall ' hbase:meta','XXX,Table_region.'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T15:16:29.420

我刚遇到这个问题，结果发现区域服务器已启动，但由于某种原因无法访问。我没有尝试调试它，而是重新启动了区域服务器并修复了所有问题。

事件顺序：

1.  发生了一些事情使区域服务器进入报告状态但无法访问的错误状态
2.  试图在该区域服务器处于错误状态时禁用表（当时我不知道）。收到 RPC 超时错误
3.  试图删除表，得到错误“表未启用或禁用”。HBase UI 报告该表的“未知”压缩状态
4.  注意到一个失败的批量加载作业，它说它无法到达特定的区域服务器
5.  重新启动区域服务器
6.  HBase UI 现在将表报告为“无”以进行压缩，启用/禁用/删除在 shell 中工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T04:47:53.200

这一系列的行为对我有帮助：

*   `$HBASE_HOME/bin/hbase shell`- 打开 hbase 外壳
*   `hbase(main):003:0> list`-输入*列表*命令以确保表存在
*   `hbase(main):004:0> enable "table name"`- 启用表格

就这样！现在可以从*phoenix*中删除该表。

# ios - 使用 lineHeightMultiple 控制行间行距时，如何在 UITableViewCell 中垂直对齐我的 UILabel？

> ID：14557747
> 
> 赞同：3
> 
> 时间：2013-01-28T07:58:18.530
> 
> 标签：ios, uitableview, uilabel, vertical-alignment, nsattributedstring

我在 UITableViewCell 中有一个多行 UILabel。我想控制线条之间的间距，将线条压缩得更近一些。我已经读过，控制“领先”的唯一方法是使用属性字符串。所以我通过使标签属性而不是纯文本来做到这一点，然后我将 lineHeightMultiple 设置为 0.7 以压缩行：

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.lineHeightMultiple = 0.7;
paragraphStyle.lineBreakMode = NSLineBreakByWordWrapping;
paragraphStyle.alignment = NSTextAlignmentLeft;

NSDictionary *attrs = [NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"HelveticaNeue-Bold" size:15.0], NSFontAttributeName, paragraphStyle, NSParagraphStyleAttributeName, nil];

NSMutableAttributedString *attributedText = [[NSMutableAttributedString alloc] initWithString:@"Here is some long text that will wrap to two lines." attributes:attrs];

[cell.textLabel setAttributedText:attributedText]; 
```

问题是，现在整个标签不在 UITableViewCell 中垂直居中。

我怎样才能解决这个问题？在下面的附件中，你可以明白我的意思。“压缩”的多行 UILabel 在每一行中都比应有的更高，并且不再与右侧的箭头指示器垂直对齐。

![例子](../Images/e5fc07dad5cab1aa02380314f64aeaf6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:57:38.700

行高倍数改变了所有行的行高，包括第一行，所以它在你的标签中都有一点高。你真正想要的是调整行距，所以第二行的起始基线比默认的要近一点。

尝试更换：

```
paragraphStyle.lineHeightMultiple = 0.7; 
```

和：

```
paragraphStyle.lineSpacing = -5.0; 
```

调整行距值以适应口味。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T19:31:58.153

两者都`UITextDrawing`这样`Core Text`做。我认为这很奇怪..而不是使用任意值`lineSpacing`- 我说计算这个`Core Text`并计算出像这样的实际偏移量

```
+ (CGFloat)offsetForAttributedString:(NSAttributedString *)attributedString drawRect:(CGRect)rect
{
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:rect];
    CFRange fullRange = CFRangeMake(0, [attributedString length]);
    CTFramesetterRef framesetterRef = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attributedString);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetterRef, fullRange, path.CGPath, NULL);
    CFArrayRef lineArrayRef = CTFrameGetLines(frameRef);
    CFIndex lineCount = CFArrayGetCount(lineArrayRef);
    CGPoint lineOrigins[lineCount];
    CTFrameGetLineOrigins(frameRef, CFRangeMake(0, lineCount), lineOrigins);

    CGFloat offsetDueToLineHeight = 0.0;

    if(lineCount > 0)
    {
        CTLineRef firstLine = CFArrayGetValueAtIndex(lineArrayRef, 0);
        CGFloat ascent, descent, leading;
        CTLineGetTypographicBounds(firstLine, &ascent, &descent, &leading);
        offsetDueToLineHeight = rect.size.height - lineOrigins[0].y - ascent;
    }

    CFRelease(frameRef);
    CFRelease(framesetterRef);

    return offsetDueToLineHeight;
} 
```

此值适用于`UITextDrawing`和`Core Text`。

# sql - 如何从Oracle中的选定行中获取行号

> ID：14557751
> 
> 赞同：16
> 
> 时间：2013-01-28T07:58:37.813
> 
> 标签：sql, oracle, rownum

我从数据库中选择几行，例如：

```
select * from student where name is like %ram% 
```

结果：

```
ID   Name     email          Branch
7    rama    rama@gmail.com    B1
5    ramb    ramb@gmail.com    B2
3    ramc    ramc@gmail.com    B3
8    ramd    ramd@gmail.com    B4
11   rame    rame@gmail.com    B5
12   ramf    ramf@gmail.com    B6
14   ramg    ramg@gmail.com    B7 
```

我需要获取分支为 B5 的行号。期望值为“5”

有人可以建议如何在查询中实现这个吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-28T08:03:42.673

表没有固有的顺序。因此，行号本身是一个无意义的指标。

但是，您可以使用[ROWNUM](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm#SQLRF00255)伪列或解析函数来获取*结果集*的行号，后者更强大。[`ROW_NUMBER()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm#SQLRF06100)

由于没有对表进行排序，因此两者都需要显式的 ORDER BY 子句才能工作。

```
select rownum, a.*
  from ( select *
           from student
          where name like '%ram%'
          order by branch
                ) a 
```

或使用分析查询

```
select row_number() over ( order by branch ) as rnum, a.*
  from student
 where name like '%ram%' 
```

您的语法`where name is like ...`不正确，不需要 IS，所以我将其删除。

这里的 ORDER BY 依赖于二进制排序，因此如果分支以 B 以外的任何内容开头，则结果可能会有所不同，例如`b`大于`B`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T08:02:54.717

你可以做

```
select rownum, l.* from student  l where name like %ram% 
```

这会在获取行时分配行号（因此当然不能保证排序）。

如果您想先订购，请执行以下操作：

```
select rownum, l.*
  from (select * from student l where name like %ram% order by...) l; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T10:03:38.173

我认为使用

```
select rownum st.Branch 
  from student st 
 where st.name like '%ram%' 
```

是一种简单的方法；您应该在 LIKE 语句中添加单引号。如果使用`row_number()`，则应添加`over (order by 'sort column' 'asc/desc')`，例如：

```
select st.branch, row_number() over (order by 'sort column' 'asc/desc')  
  from student st 
 where st.name like '%ram%' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-06T15:06:33.893

下面的查询有助于在 oracle 中获取行号，

```
SELECT ROWNUM AS SNO,ID,NAME,EMAIL,BRANCH FROM student WHERE NAME LIKE '%ram%'; 
```

# ruby - 找不到两个连续的“end”之间的冲突，导致错误

> ID：14557752
> 
> 赞同：-3
> 
> 时间：2013-01-28T07:58:40.683
> 
> 标签：ruby

在下面的代码中，我放置了一个救援子句。但我无法追查为什么`end`他们之间会发生冲突。你能帮我找出原因吗？为什么会这样？

***代码：***

```
n=1
until n > 4 do
  begin
    1/0
    (1..4).each do |l|
      if 'B' == 'B'
        if 1 != 0
          p 'dog'  
        end
      end
      if 'A' == 'A'
        if 1 != 0
          p 'cat'
        end
      end
    end     
    If true == true
      p 'hi'
    end
  rescue
    p 'exception' 
  end
  n=n+1  
end 
```

***错误：***

```
E:/WIPData/Ruby/Scripts/test.rb:64: syntax error, unexpected keyword_rescue, exp
ecting keyword_end
E:/WIPData/Ruby/Scripts/test.rb:71: syntax error, unexpected keyword_end, expect
ing $end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:01:22.533

```
If true == true 
```

Pascal 大小写`If`不是有效的 ruby​​ 关键字。因此，它`end`改为匹配另一个开始关键字。

# php - PHP - Memcache 在一个 plesk 帐户中工作，其他工作..？

> ID：14557758
> 
> 赞同：0
> 
> 时间：2013-01-28T07:59:18.567
> 
> 标签：php, memcached

我有一个奇怪的问题，在用户的一个 plesk 帐户中它工作得非常好，但是在同一台服务器上不同的 plesk 帐户相同的代码（以下测试代码）不起作用它只是空白，我完全不知道问题是什么。 ..因为它在其他帐户中有效，有什么想法吗？

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("Could not connect");

$version = $memcache->getVersion();
echo "Server's version: ".$version."<br/>\n";

$tmp_object = new stdClass;
$tmp_object->str_attr = 'test';
$tmp_object->int_attr = 123;

$memcache->set('key', $tmp_object, false, 10) or die ("Failed to save data at the server");
echo "Store data in the cache (data will expire in 10 seconds)<br/>\n";

$get_result = $memcache->get('key');
echo "Data from the cache:<br/>\n";

var_dump($get_result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:56:57.717

我找到了原因，

我在该帐户中将 PHP 作为 FASTCGI 运行，而在另一个帐户中将 PHP 作为 APACHE 模块运行。

# javascript - 如何使用 Javascript 确定页面加载时间？

> ID：14557762
> 
> 赞同：0
> 
> 时间：2013-01-28T07:59:30.810
> 
> 标签：javascript, network-programming

生产环境可以使用更复杂的解决方案。但是对于开发人员我这样做了：

```
localStorage["markTime"] = new Date().getTime();
window.location.href = window.location.href + "dev"

// browser goes off and gets new page but we have a local time where this started

<script> <!-- first line after the head tag (forgetting meta data, etc) -->
    alert(new Date().getTime() - localStorage["markTime"] + "ms");
</script> 
```

这是否给出了下载页面所需时间的准确数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:02:27.247

对此的传统解决方案是将第一部分放在开头`head`，第二部分放在结尾`body`。它给出了一些准确的结果，但我想这是你能得到的最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:06:46.713

没有机会在同一页面内使用 javascript 获得非常准确的结果，但我认为这是最接近它的：

```
var loadTime, loadEnd, loadStart = new Date().getTime();
window.onload = function() {
    loadEnd = new Date().getTime();
    loadTime = loadEnd - loadStart;
    console.log(loadTime + " ms.");
} 
```

您应该将此代码放在头中，在所有其他内容之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:03:12.527

[http://www.webpagetest.org/](http://www.webpagetest.org/)是测量加载时间的绝佳资源

如果您正在寻找 javascript 解决方案，您可以使用以下脚本对时间进行排序：

```
<script type="text/javascript">
(function ()
{
    var startTime = new Date().getTime();
    window.setTimeout(function()
    {
        var endTime = new Date().getTime();
        alert("Page took " + (endTime - startTime) + "ms to load");
    }, 0);
})();
</script> 
```

# ios - Objective-C中的对象是如何在内存中布局的

> ID：14557763
> 
> 赞同：-1
> 
> 时间：2013-01-28T07:59:32.430
> 
> 标签：ios, objective-c, xcode, memory-management

在阅读有关继承和类别的信息时，我发现内存概念与我在 C++ 中学到的略有不同。

任何人都可以对目标c中对象如何在内存中布局的基本问题有所了解。

当我在 Xcode 中使用任何对象时，在后台工作的消息机制是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:03:02.827

您可以在系统上的 objc.h 头文件中看到 ObjC 对象的布局：

```
/// Represents an instance of a class.
struct objc_object {
    Class isa;         /**< Pointer to the class definition of which this 
                        *   object is an instance. */
}; 
```

您可以在此处找到一篇文章，展示 objc_msgSend 的工作原理（通过构建它的更原始版本）：

[http://www.mikeash.com/pyblog/friday-qa-2012-11-16-lets-build-objc_msgsend.html](http://www.mikeash.com/pyblog/friday-qa-2012-11-16-lets-build-objc_msgsend.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:08:04.550

请看看这个希望它对你有帮助。

[http://www.mikeash.com/pyblog/friday-qa-2010-12-17-custom-object-allocators-in-objective-c.html](http://www.mikeash.com/pyblog/friday-qa-2010-12-17-custom-object-allocators-in-objective-c.html)

# php - 标签列表数据库

> ID：14557770
> 
> 赞同：1
> 
> 时间：2013-01-28T08:00:02.433
> 
> 标签：php, database, upload, tags

我试图设置一个表单，允许用户将图像上传到服务器上的文件夹并将标签上传到数据库，以便可以搜索图像标签并且任何选定的图像都会显示与其连接的标签列表. 我试图在stackoverflow上做一个标签系统，只用图像而不是文本。这是我到目前为止所拥有的：

```
<form action="insert.php" method="post">
<p>
<label for="file">Filename:</label>
<input type="file" name="imageName" id="imageName">
<br />
<label for="tags">Tags</label>
<textarea name="tags" id="tags" cols="45" rows="5"></textarea>
<input type="hidden" name="member" id="member" />
<br />
<input type="submit">
</p>
</form> 
```

这就是表格，这是 php

```
<?php
$con = mysql_connect("localhost");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("images", $con);

$sql="INSERT INTO images (imageName, tags, member)
VALUES
('$_POST[imageName]','$_POST[tags]','$_POST[member]')";

if (!mysql_query($sql,$con))
 {
 die('Error: ' . mysql_error());
 }
echo "1 record added";

mysql_close($con);

     $allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 200000000000000000000000)
&& in_array($extension, $allowedExts))
 {
  if ($_FILES["file"]["error"] > 0)
   {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
   else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
     else
     {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
     }
    }
else
   {
   echo "Invalid file";
  }

  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:12:34.583

你可以通过不同的方式做到这一点：

使用简单的 HTML 下拉列表（带有选项允许多选）

```
<select multiple="multiple" name="Select1" style="width: 129px">
<!-- start loop here-->
<option value="tag1">tag1</option>
<!-- end loop here-->
</select> 
```

在这里，您需要从数据库中加载所有标签。

或使用[jQuery UI 自动完成](http://jqueryui.com/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:13:30.020

在您的 HTML 中：

`<input type="hidden" name="member" id="member" />`，您没有放置`value`属性，该属性将包含上传图像/标签的成员的名称。

所以改成：

`<input type="hidden" name="member" id="member" value="YOUR_MEMBER_NAME_HERE" />`

此外，在 PHP 中，`$_POST[imageName]`不会包含上传图像的名称。在 PHP - 中有一个单独的超全局数组`$_FILES`。

因此，图像名称将在`$_FILES['imageName']['name']`.

此外，您只是将图像名称放入数据库中，而不是将图像存储在任何地方。

这是存储图像的代码。

```
$folder = 'NAME_OF_THE_FOLDER_WHERE_YOU_WANT_TO_SAVE_IMAGES';
if( is_uploaded_file( $_FILES['imageName']['tmp_name'] ) ) {
    move_uploaded_file( $_FILES['imageName']['tmp_name'], "$folder/" . $_FILES['imageName']['name'] );
} 
```

至于在上传图像时向用户显示已经可用的标签，您可以通过检查用户输入的标签是否已经存在于数据库中来验证是否存在，如果是，则显示它们......并避免重复插入它们在数据库中。

这是一个开始，你可以改进它。

希望能帮助到你。

# javascript - 在 Galaxy Nexus 上触发了两次点击事件

> ID：14557775
> 
> 赞同：3
> 
> 时间：2013-01-28T08:00:17.093
> 
> 标签：javascript, webview, dom-events, iscroll

我有一个带有 webview 的项目，使用 iscroll、zepto 等库。
点击事件总是在 Galaxy Nexus 上触发两次。它在其他设备上运行良好。我希望你能提供一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T19:44:35.070

这可能有助于为您指明正确的方向：[https ://groups.google.com/forum/#!topic/iscroll/XL2Ny9gpKc0](https://groups.google.com/forum/#!topic/iscroll/XL2Ny9gpKc0)

# css - IE9中的SVG背景图片

> ID：14557784
> 
> 赞同：2
> 
> 时间：2013-01-28T08:01:04.940
> 
> 标签：css, svg, internet-explorer-9

我在 Internet Explorer 9 中将 svg 图像作为背景有一个奇怪的问题。

我测试了以下css规则：

```
background-image: url(./grad.svg);  /* local file */
background-image: url(http://127.0.0.1:7101/path/to/images/grad.png);
background-image: url(http://127.0.0.1:7101/path/to/images/grad.svg); 
```

虽然前两条规则很好用，但最后一条失败了。使用 F12 开发人员工具，它显示`(Pending...)`svg 图像。直接使用它们的 url 访问图像，它们在 IE9 中正确显示。

我检查了 Opera 中的所有三个规则，它们都有效。

那么最后一条规则有什么问题呢？

//编辑

另外我测试了以下规则：

```
background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPgo8bGluZWFyR3JhZGllbnQgaWQ9Imc1MjQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIwIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0UzQTgyMCIgb2Zmc2V0PSIxIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZzUyNCkiIC8+Cjwvc3ZnPg==); 
```

在 IE9 和 Opera 中运行良好

//编辑 2

我也尝试了以下方法：

```
background-image: url(http://upload.wikimedia.org/wikipedia/commons/a/af/Android-System-Architecture.svg); 
```

有效！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:20:22.030

确保您的本地网络服务器为 svg 文件发送正确的媒体类型，`image/svg+xml`.

# ios - 如何在 drawRect 方法中更改颜色文本

> ID：14557787
> 
> 赞同：-2
> 
> 时间：2013-01-28T08:01:13.427
> 
> 标签：ios, drawrect

`drawRect:`单击方法中的颜色按钮时，我想更改方法中文本的​​颜色`switchColor`。

这是我的代码：

```
- (void)drawRect:(CGRect)rect withColor:(UIColor*) color 
```

{ CGContextRef 上下文 = UIGraphicsGetCurrentContext();

```
CGColorRef red = color.CGColor;
NSLog (@"color is %@",red);
//CGColorRef color = (__bridge CGColorRef)([UIColor colorWithRed:0.0 green:3.0 blue:2.0 alpha:1.0]);

CGContextFillRect(context, CGRectMake(130,200,120,120));
CGContextSetFillColorWithColor(context,red);
CGContextFillEllipseInRect(context, CGRectMake(130, 200, 120, 120)); 
```

}

错误CGContextFillRects：无效的上下文0x0 ...请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:03:09.627

利用

**CGContextSetFillColorWithColor(context, textColor);**

# javascript - 在 js 文件包含中传递参数

> ID：14557791
> 
> 赞同：1
> 
> 时间：2013-01-28T08:01:28.283
> 
> 标签：javascript, parameters, include

我正在尝试包含这样的 .js 文件：

```
<script src="javascriptfile.js"></script> 
```

但是，我真正想要的是将一些参数传递给我的 .js 文件，如下所示：

```
<script src="javascriptfile.js?id=3482"></script> 
```

`id=`我应该如何从文件中读取该部分`.js`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:06:00.077

这只能通过访问 HTML DOM 中的“自己的”元素并解析 src 属性来实现。

这是一篇很好的文章，有详细的解释和代码示例： http: [//feather.elektrum.org/book/src.html](http://feather.elektrum.org/book/src.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-13T19:44:52.820

这是一种新的方法来做到这一点。

您可以使用 JSON.parse()。

这里有一个例子：

html 中的代码：

```
<script id="scriptID" src="demo.js">
        {
            "param1":"Hello World!", 
            "param2":"paramLorem"
        }
</script> 
```

demo.js 中的代码：

```
jQuery(document).ready(function(){
   var myAttributes = JSON.parse(jQuery('#scriptID').html());
   alert(myAttributes['param1']);
}); 
```

您将收到“Hello World！”的警报。

希望它可以帮助某人！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T08:05:18.467

从它加载的 javascript 中找到您自己的脚本标签并不容易。可以搜索文档中的所有脚本标签并找到其中包含您的文件名的标签并解析出查询字符串，但是在脚本加载之前设置一个变量要容易得多，如下所示：

```
<script>var javascriptfile_id = 3482;</script>
<script src="javascriptfile.js"></script> 
```

然后，只需检查`javascriptfile_id`脚本中的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T08:09:10.087

您可以使用 jQuery 解析参数，但我发现这有点令人费解。这是一个例子：[http ://wowmotty.blogspot.com/2010/04/get-parameters-from-your-script-tag.html](http://wowmotty.blogspot.com/2010/04/get-parameters-from-your-script-tag.html)

更好的方法是在 JS 文件中创建一个初始化方法，并在页面加载时使用您的参数调用该初始化方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T08:05:53.960

如果变量不是用于服务器的，则不能通过查询字符串将变量传递给加载的脚本，以便服务器端脚本可以在 JavaScript 发送到客户端之前对其进行预处理。

如果要将变量传递给外部脚本中的代码，则必须创建`id`一个全局 JavaScript 变量。或者您必须在外部脚本文件中调用一个函数，将该值作为参数传递给该函数。

# java - GWT 计时器在独立类中抛出异常

> ID：14557794
> 
> 赞同：0
> 
> 时间：2013-01-28T08:01:29.320
> 
> 标签：java, gwt, timertask, gwtquery

我正在使用 GWTQuery 来检测`paste`文本框上的事件，然后设置一个小计时器，之后它应该获取粘贴在其中的值。像这样的东西：

```
 $("#paste").live("paste",new Function() {
            public boolean f(Event e) {
                Timer t = new Timer() {
                    public void run() {
                        String text = paste.getText();
                        String oldtext = box.getText();
                        String oldsel = box.getSelectedText();
                        int oldpos = box.getCursorPos();
                        if (text.matches("^\\d+$")) {
                            box.setText(oldtext.substring(0,oldpos)+text+oldtext.substring(oldpos+oldsel.length(),oldtext.length()));
                            oldpos += text.length();
                        }
                        box.setReadOnly(false);
                        box.setFocus(true);
                        box.setCursorPos(oldpos);
                        paste.setText("");
                    }
                };
                t.schedule(5);

                return true;
            }
        }); 
```

当我将它包含在主文件中时（`onModuleLoad`声明的地方，即显示在浏览器中的文件），它按预期工作。但是，我已经对代码进行了划分，将文本框放在它们自己的包中，并调用`initWidget`将它们导入到主文件中。当我将此代码放在该类中时，我收到类似 的错误消息`Uncaught exception escaped`，它指向类似 `com.google.gwt.sample.myproject.client.Location$3$1.run`. 谁能告诉我这里出了什么问题，我该如何纠正？

# iso8583 - 如何创建 ISO 8583 子消息

> ID：14557797
> 
> 赞同：1
> 
> 时间：2013-01-28T08:01:40.073
> 
> 标签：iso8583, openiso8583.net

我正在尝试为我的 ISO 8583 消息创建子消息，我正在使用 John Coxley 的 OpenISO8583.NET 库。

我生成的 ISO 子消息如下所示： 00000000100000000000000000000000000000000000000000000000000000000172013012895943184

我的规范说的是，对于我的子消息，我需要一个 8 字节的位图，所以我的看起来像这样： 0000000010000000000000000000000000000000000000000000000000000000

然后是位置 9 上的可变长度字段（最多 17 个字符和 3 位长度指示符），所以我的值如下所示：

0172013012895943184：

（017 是长度指示符，其余的是传递的值）

但是，根据我尝试发送此消息的应用程序，如果有人可以识别我的子消息中的缺陷，我的消息是不正确的，我将不胜感激，谢谢。

我已经尝试计算出这个值 2 周了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T05:19:57.883

我不确定 ISO 中的子消息，但您的数据**长度为 16**，而不是 17 ......

# security - 没有数据库实现的 Grails Security

> ID：14557800
> 
> 赞同：4
> 
> 时间：2013-01-28T08:01:56.410
> 
> 标签：security, api, grails, spring-security, shiro

我正在使用 Grails 2.2.0 开发一个 Web 应用程序，它通过调用另一个后端服务器的已实现 API 执行所有操作。这意味着，*所有*的事情，甚至是身份验证和所有相关的事情，都是通过 API 和相应的后端服务器完成的。

现在我想使用 SpringSecurity 或 Apache Shiro 插件进行身份验证和角色管理等，但我遇到的所有这些都是使用与数据库相关的`domain`类，这不是我打算做的......有没有可能在没有数据库连接的情况下使用这些插件中的任何一个，而无需高度自定义它们？或者是否有另一个我不知道的插件可以带来我需要的“无忧”功能？

我希望问题本身足够清楚，否则请不要犹豫，向我询问进一步/更好地解释我的问题:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:55:05.643

Spring Security Core 插件默认使用域类和数据库，但使用自定义实现很容易自定义用户和角色数据的来源`UserDetailsService`。文档中有一个[完整的章节](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)。

我还讨论了自定义插件，并包含了一个自定义身份验证提供程序的示例。[这里](http://burtbeckwith.com/blog/?p=1090)有一个示例应用程序和谈话视频的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:23:12.353

Apache Shiro 插件不会强制您使用域类或数据库。您可以拥有一个[Shiro 领域](http://shiro.apache.org/realm.html)（将其放在 grails-app/realms 中），它将身份验证和授权委托给后端服务器。这应该是这样的：

```
class BackendServerRealm {
   def authenticate(authToken) {
       // call backend authentication with credentials from authToken
       def user = backednService.authenticate(authToken.username, authToken.password)
       ...
       new SimpleAccount(user.username, user.password, "BackendServerRealm")
   }
} 
```

Shiro 只是为您提供执行身份验证和授权的基础设施，但您可以很容易地插入自己的实现

# asp.net-mvc - 从 UI 中指定必填字段并仅从数据库中获取这些字段

> ID：14557801
> 
> 赞同：1
> 
> 时间：2013-01-28T08:02:13.177
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first

我首先使用 MVC 4、EF 5 代码，我的服务层仅与域类 (POCO) 交互，而我的 UI 层与 ViewModel 类 (POCO) 交互。

我的问题：

我如何从 UI 中指定必填字段并仅从服务层的数据库中获取这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:23:09.007

动态构建`Select`表达式并不容易，因为在编译时不知道捕获结果的类型（命名或匿名）。我在 StackOverflow 上看到了一些努力，但如果我没记错的话，它们是徒劳的（我现在找不到它们）。

您可以做的是使用[Entity Sql](http://msdn.microsoft.com/en-us/library/bb387145.aspx)来构建查询字符串。

```
var queryString = string.Format("SELECT {0} FROM MyTable"
                               , string.Join(",",fieldsFromUi); // WHERE...?
var q = new ObjectQuery<DbDataRecord>(queryString , context); 
```

哪里`context`是一个`ObjectContext`实例。[`DbDataRecord`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatarecord%28v=vs.100%29.aspx)是一个类似字典的结构，您可以从中选择要显示的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:00:15.007

[这](http://www.codeguru.com/csharp/.net/net_asp/mvc/top-10-asp.net-mvc-best-practices.htm)是 MVC 的最佳实践。更好的是使用视图模型您可以使用视图模型和要求列表。例如，这是视图模型，您应该将此模型传递给查看

```
public class LoginPageVM
{
    [Required(ErrorMessage = "Are you really trying to login without entering username?")]
    [DisplayName("Username/e-mail")]
    public string UserName { get; set; }
    [Required(ErrorMessage = "Please enter password:)")]
    [DisplayName("Password")]
    public string Password { get; set; }
    [DisplayName("Stay logged in when browser is closed")]
    public bool RememberMe { get; set; }
} 
```

在视野中

```
@model CamelTrap.Models.ViewModels.LoginPageVM

@using (Html.BeginForm()) {
    @Html.EditorFor(m => m);
    <input type="submit" value="Save" class="submit" />
} 
```

并在控制器中

```
[HttpGet]
public ActionResult LoginPage()
{
    return View();
}

[HttpPost]
public ActionResult LoginPage(LoginPageVM model)
{
    ...code to login user to application...
    return View(model);
} 
```

![在此处输入图像描述](../Images/936a30fadac79b7e31c88c48961eeeaf.png)

# mysql - 如何从大型 mysql 转储中获取特定数据库？

> ID：14557804
> 
> 赞同：2
> 
> 时间：2013-01-28T08:02:29.163
> 
> 标签：mysql, sql, database, phpmyadmin

我有一个`localhost.sql`大小为 750 MB 的备份.....这个转储中有更多的数据库。只需从该 sql 文件中获取一个数据库。有可能这样做吗？我们有工具吗？我已经搜索了很多方法。但无法从中获取我的数据库。

然后我试过这个`split -l 100000 localhost.sql`来分割sql。这会拆分更多的 txt 文件。通过使用这些文本文件，我怎样才能得到我的数据库？或建议从 sql 转储中获取我的特定数据库的最佳方法

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:24:06.190

您可以使用此命令从完整转储中提取一个数据库

```
mysql -u root -p –-one-database targetdb < fulldump.sql 
```

# .net - 错误请求，零长度响应：WCF 日志在哪里，在哪里调查？

> ID：14557805
> 
> 赞同：1
> 
> 时间：2013-01-28T08:02:30.633
> 
> 标签：.net, wcf, self-hosting

我有一个由 AJAX JavaScript 调用的 WCF 自托管服务。在某些情况下，响应是 Bad Request，响应长度为 0。

到目前为止我所做的：

*   用提琴手检查 req/resp：请求似乎没问题，响应是 http 400 'Bad Request' 长度为 0，所以没有信息，没有堆栈跟踪等。
*   尝试在我的服务实现中设置断点：服务方法甚至没有调用
*   尝试在 VS 菜单 Debug/Exceptions 中设置所有异常：未触发异常。

*   现在怎么追？

*   有没有什么自托管服务正在写的日志？
*   还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:26:10.167

您可以启用 WCF 跟踪以跟踪该错误。只需将以下代码段添加到您的应用程序配置文件中：

```
<configuration>

  <system.diagnostics>

    <sources>

      <source name="System.ServiceModel"
              switchValue="Verbose, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\Traces.svclog" />
        </listeners>
      </source>

    </sources>

  </system.diagnostics>

</configuration> 
```

这将创建一个日志文件，其中包含每个请求的附加信息。您可以使用提供漂亮 GUI的[Service Trace Viewer Tool](http://msdn.microsoft.com/en-US/library/ms732023%28v=VS.90%29.aspx)打开日志文件。

# jquery - 设置为 jquery-1.4.1 的 ScriptReference 路径与基于 jquery-1.8.2 的 fancybox 冲突

> ID：14557807
> 
> 赞同：1
> 
> 时间：2013-01-28T08:02:36.297
> 
> 标签：jquery, asp.net, scriptmanager

我正在开发一个 ASP.NET Web 应用程序，它有一个使用母版页的页面。母版页`<asp:ContentPlaceHolder ID="HeadContent">`在调用精美框的顶部有块。花式框调用 jquery-1.8.2.min.js 和 jquery.fancybox.js?v=2.1.3。现在使用母版页的页面 (listing.aspx) 在 HeadContent ContentPlaceHolder 中有以下代码块：

```
<asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
  <Scripts>
    <asp:ScriptReference Path="~/Scripts/jquery-1.4.1.min.js" />
  </Scripts>
</asp:ScriptManagerProxy> 
```

这用于listing.aspx 的连续滚动功能。

在使用母版页的其他页面上，fancybox 工作正常，但是在查看listing.aspx 时，它不再识别fancybox 的功能。我尝试过寻找答案，也尝试过引用 jquery-1.8.2.min.js。这没用。当我尝试将母版页内的 HeaderContent ContentPlaceHolder 移动到对 fancybox 的调用下方时，连续滚动将不起作用。我好难过。真的需要你的帮助。谢谢。

# python - 使用 Excel 和 Python 的考勤跟踪器

> ID：14557814
> 
> 赞同：0
> 
> 时间：2013-01-28T08:02:56.810
> 
> 标签：python, excel, xlrd, xlwt, xlutils

我是空军支队的副联队指挥官，我在大学就读过这里。我的工作职责之一就是出勤。联队内有四个中队。每个中队每周都有出勤率，我必须将记录的出勤率转移到用 Excel 工作表编写的出勤率跟踪器中。可以想象，这是一项非常乏味的工作。由于我懂一些编程（我是 Comp sci 专业的大四学生），所以我决定写一个 python 脚本来自动转移考勤。我正在使用 xlrd/xlwt/xlutils 但我遇到了一些问题。基本上我要做的是使用学员的姓名和他们从一张工作表中获取的出勤状态创建键值对，并将值导出到出勤跟踪器。也许我要解决这个问题，但效果并不好。到目前为止，我唯一能做的就是将考勤从一个文件导入程序中的键值对。当我尝试导出这些值时，问题就来了。我发布了一个问题[这里](https://stackoverflow.com/questions/14544447/importerror-cannot-import-name-open-workbook)已解决，这里有一个[与](https://stackoverflow.com/questions/14554770/writing-to-existing-workbook)我的小项目有关的未答复。以下是我到目前为止的代码：

```
from xlrd import open_workbook

wb = open_workbook('week1/AFROTC SP13 Eagles Sqaudron Weekly Attendance.xls')

LLab = {}
PT = {}

for s in wb.sheets():
    if s.name == "LLab":
        for row in range(s.nrows):
            values = []
            for col in range(s.ncols):
                values.append(s.cell(row,col).value)
            if values[1] == "0" or values[1] == "1":
                LLab[values[0]]=int(values[1])

    elif s.name == "PT":
        for row in range(s.nrows):
            values = []
            for col in range(s.ncols):
                if s.cell(row,col).value != "PT #1" and s.cell(row,col).value != "PT #2":
                    values.append(s.cell(row,col).value)
            if len(values) == 3:
                PT[values[0]]=[int(values[1]), int(values[2])]

print "LLab"
for key in LLab:
    print key,
    print LLab[key]

print
print

print "PT"
for key in PT:
    print key,
    print PT[key][0],
    print PT[key][1] 
```

目前只从一个文件中导入考勤（有四个，每个中队一个）。

# gnuplot - 在同一个 3D 图上从散点和 png 绘制 3D 表面

> ID：14557828
> 
> 赞同：2
> 
> 时间：2013-01-28T08:03:34.697
> 
> 标签：gnuplot

我需要在同一张图上绘制基于散点数据和 2D 图像 (.png) 的 3D 表面，定位在图上的确定位置以比较两者的数据。到目前为止，我设法分别完成了这两项工作（绘制图像和制作表面）。

但是，当我尝试将两者放在同一个脚本上时，我收到一条错误消息（“未实现颜色列的网格化”），这是由于创建与图像冲突的表面 (dgrid3d) 的命令而发生的。我想知道如何避免这个错误。

提前致谢

*编辑

散点为 xyz 格式：

```
-100.000000 -25.000000 -4.122210

-100.000000 -20.000000 -4.933388

-100.000000 -15.000000 -7.902138

-100.000000 -10.000000 -7.902138 
```

并且图像是普通的png。

我正在使用的脚本是：

```
set hidden3d
set samples 100
set isosamples 100
unset surface
set pm3d
set dgrid3d

 splot '444_0.dat' u 1:2:3 \
 splot 'test.png' \
 binary filetype=png flipy rotate=-90d center = (4,-25,5.7) perp=(0,1,0) with rgbimage 
```

由于我之前指出的错误，这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:30:48.250

错误消息表明问题出在`dgrid3d`. 您可能能够解决的一种方法是将曲面绘制到表格中：

```
set terminal push #Save current terminal settings
set terminal unknown #dummy terminal
set table "surface.dat"
set dgrid3d
splot 'surface_points.dat' using ...
unset dgrid3d
unset table
set term pop #reset current terminal settings
set output "MyPlot.extension"

#commands to plot image and `surface.dat` together. 
```

# jquery - 为什么这个 javascript 代码没有禁用按钮？

> ID：14557834
> 
> 赞同：0
> 
> 时间：2013-01-28T08:04:06.373
> 
> 标签：jquery, button, input, javascript

我们如何禁用 javascript/jquery 中的按钮？

我试过：

```
$('#imgupload').disabled=true; 
```

和

```
$('#imgupload').attr('disabled','disabled'); 
```

但两者都不起作用。在上面之后我放了`console.log`一行行，所以我知道周围的代码很好。

唯一禁用我的按钮的是，如果我硬编码它被禁用是这样的：

```
<input type='submit' id='imgupload' value='Upload' disabled=disabled /> 
```

但我需要在某些事件上动态启用和禁用它，所以我不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:05:02.573

在此处获取 DOM 元素：

```
$('#imgupload')[0].disabled = true;
              --^-- // DOM element 
```

或使用`prop`：

```
$('#imgupload').prop('disabled', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:05:32.097

您应该使用 prop() ：

```
$('#imgupload').prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:06:07.013

prop() 应该做

```
$('#imgupload').prop('disabled', true); 
```

# c# - BlToolkit Oracle Guid 在 asp .net mvc 项目中插入

> ID：14557843
> 
> 赞同：0
> 
> 时间：2013-01-28T08:04:51.260
> 
> 标签：c#, asp.net-mvc, oracle11g, guid, bltoolkit

我尝试使用 BlToolkit 将实体插入到 oracle 数据库中。与 System.Data.OracleClient 的连接。ms sql server 一切正常。但是，当我迁移到 oracle 时，insert for guid 给了我错误。选择完美地工作。有什么建议吗？

***模型：***

```
[TableName("TEST")]
public class Test
{
    [MapField("TEST_ID")]
    [PrimaryKey]
    public Guid TestId { get; set; }
    [DisplayName("Kodu")]
    [MapField("TEST_KODU")]
    public string TestKodu { get; set; }
    [DisplayName("Test Kısa Adı")]
    [MapField("TEST_KISA_ADI")]
    public string TestKisaAd { get; set; }
    [DisplayName("Test Adı")]
    [MapField("TEST_ADI")]
    public string TestAdi { get; set; }
    public Test()
    {
    }
    public Test(Guid _id, string _kod, string _adi, string _kisaAdi)
    {
        TestId = _id;
        TestKodu = _kod;
        TestKisaAd = _kisaAdi;
        TestAdi = _adi;
    }
} 
```

***数据库管理器：***

```
public class DbProvider : DbManager
    {
        public DbProvider() : base("ElabConnectionString")
        {

        }    
    } 
```

***在行动：***

```
var db = new DbProvider();
db.Insert(test); 
```

***给定错误：***

```
Hata: BLToolkit.Data.DataException: Failed to convert parameter value from a Guid to a Byte[]. ---> System.InvalidCastException: Failed to convert parameter value from a Guid to a Byte[]. ---> System.InvalidCastException: Object must implement IConvertible.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at System.Data.OracleClient.OracleParameter.CoerceValue(Object value, MetaType destinationType)
   --- End of inner exception stack trace ---
   at System.Data.OracleClient.OracleParameter.CoerceValue(Object value, MetaType destinationType)
   at System.Data.OracleClient.OracleParameter.SetCoercedValueInternal(Object value, MetaType metaType)
   at System.Data.OracleClient.OracleParameterBinding.PrepareForBind(OracleConnection connection, Int32& offset)
   at System.Data.OracleClient.OracleCommand.Execute(OciStatementHandle statementHandle, CommandBehavior behavior, Boolean needRowid, OciRowidDescriptor& rowidDescriptor, ArrayList& resultParameterOrdinals)
   at System.Data.OracleClient.OracleCommand.ExecuteNonQueryInternal(Boolean needRowid, OciRowidDescriptor& rowidDescriptor)
   at System.Data.OracleClient.OracleCommand.ExecuteNonQuery()
   at BLToolkit.Data.DbManager.ExecuteOperation[T](OperationType operationType, Func`1 operation)
   --- End of inner exception stack trace ---
   at BLToolkit.Data.DbManager.OnOperationException(OperationType op, DataException ex)
   at BLToolkit.Data.DbManager.HandleOperationException(OperationType op, Exception ex)
   at BLToolkit.Data.DbManager.ExecuteOperation[T](OperationType operationType, Func`1 operation)
   at BLToolkit.Data.DbManager.ExecuteNonQueryInternal()
   at BLToolkit.Data.DbManager.ExecuteNonQuery()
   at BLToolkit.Data.DbManager.BLToolkit.Data.Linq.IDataContext.ExecuteNonQuery(Object query)
   at BLToolkit.Data.Linq.Query`1.NonQueryQuery(IDataContextInfo dataContextInfo, Expression expr, Object[] parameters)
   at BLToolkit.Data.Linq.Query`1.<SetNonQueryQuery>b__e(QueryContext ctx, IDataContextInfo db, Expression expr, Object[] ps)
   at BLToolkit.Data.Linq.Query`1.Insert(IDataContextInfo dataContextInfo, T obj)
   at BLToolkit.Data.Linq.Extensions.Insert[T](IDataContext dataContext, T obj) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:27:47.793

Oracle 中没有 Guid (UniqueIdentifier) 数据类型，您必须改为提供字节数组。在 Oracle 中，将 Guid 定义为 RAW(16)，然后在 C# 程序中，使用 Guid.ToByteArray() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:47:54.337

BLToolkit 支持 Oracle 的 GUID 作为 RAW(16)：

[https://github.com/igor-tkachev/bltoolkit/blob/b9dae9888047db5df4f5cbc6a705aabfc629712c/Data/Create%20Scripts/Oracle.sql#L504](https://github.com/igor-tkachev/bltoolkit/blob/b9dae9888047db5df4f5cbc6a705aabfc629712c/Data/Create%20Scripts/Oracle.sql#L504)

以及如何使用它：

[https://github.com/igor-tkachev/bltoolkit/blob/5107745c15f6f04271f0a2140ab96c62054834fa/UnitTests/Linq/Types.cs#L126](https://github.com/igor-tkachev/bltoolkit/blob/5107745c15f6f04271f0a2140ab96c62054834fa/UnitTests/Linq/Types.cs#L126)

# c# - 在 c# 中访问 x509certificate2 时不存在密钥集

> ID：14557848
> 
> 赞同：1
> 
> 时间：2013-01-28T08:05:04.123
> 
> 标签：c#, cryptography

当我通过其 pfx 安装 x509Certificate2 对象后第一次尝试使用它时，它可以对数据进行签名，但是从第二次开始它就不能并显示错误，即密钥集不存在在线...

```
RSACryptoServiceProvider csp = (RSACryptoServiceProvider)cert.PrivateKey; 
```

在调试中还显示

```
A first chance exception of type 
'System.Security.Cryptography.CryptographicException' occurred in mscorlib.dll 
```

无法弄清楚这里的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:58:43.927

我有解决方案...

首次运行成功后，私钥无法访问，因此产生了问题。

解决方案是添加一行代码：

```
csp.PersistKeyInCsp = true; 
```

它确保密钥是可访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T02:31:25.377

如果尝试访问私钥的 Windows 用户没有这样做的权限，您可能会收到此错误。要修复打开的 MMC 并添加证书管理单元，请找到证书，右键单击所有任务 -> 管理私钥并授予该特定用户读取私钥的权限。

# jquery - YouTube 视频无法在 android 、 IOS 移动设备中正确显示

> ID：14557849
> 
> 赞同：0
> 
> 时间：2013-01-28T08:05:06.310
> 
> 标签：jquery, html

我已使用以下代码将您的视频嵌入到移动设备中，Iframe 标签未加载视频。

```
 <!DOCTYPE html>
  <html>
  <head><title></title>
  </head>
  <body>
    <iframe width="853" height="480" src="http://www.youtube.com/v/RaQV6iQwC7Y?version=3&amp;autohide=1&amp;autoplay=0" frameborder="0" allowfullscreen="">
    </iframe>
  </body>
  </html> 
```

请建议我如何显示适用于 IOS、android、平板电脑和桌面浏览器的 youtube 视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:35:07.783

这是在页面上嵌入 Youtube 视频的 Youtube 指南：[https ://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

我通常使用 YT API 来嵌入视频，但要在 iOS 设备上处理视频，我使用 iFrame 嵌入代码，如下所示：

```
<iframe width="width here" height="height here" border="0" src=' + ('https:' == document.location.protocol ? 'https' : 'http') + '://www.youtube.com/embed/' + VIDEOID here + '&autoplay=1&showinfo=0" frameborder="0" allowfullscreen></iframe> 
```

# java - Java 串行通信 PortInUseException

> ID：14557851
> 
> 赞同：0
> 
> 时间：2013-01-28T08:05:14.873
> 
> 标签：java, sms, gsm, modem, serial-communication

我有一个基于 SMS 的 Java 应用程序，它使用`CommV3`驱动程序与 GSM 调制解调器进行串行通信。我有两个单独的代码，一个用于发送消息，一个用于接收消息。每个代码在单独执行时都能完美运行。

现在，当我想整合这两个代码时，我得到一个`PortInUseException`，这可能很明显。但是，我不确定从哪里开始。

我可以获得可以开始解决问题的指针/链接/教程吗？我不知道我应该从哪里开始。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:19:45.697

确保您的代码使用**一个**SerialPort 而不是两个。那么读取或写入这个端口就没有问题了。

```
SerialPort serialPort;
InputStream inStream;
OutputStream outStream;

serialPort = (SerialPort) portId.open(...);
serialPort.setFlowControlMode(...);
serialPort.setSerialPortParams(...);

inStream = serialPort.getInputStream ();
outStream = serialPort.getOutputStream (); 
```

PS：[SMSLib](http://smslib.org)是一个优秀的 Java 库（也移植到 .NET Framework），它允许您通过兼容的 GSM 调制解调器或 GSM 电话发送/接收 SMS 消息。SMSLib 还支持一些批量 SMS 运营商。它是免费的并且非常稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:16:47.497

可能您可以将侦听器代码（绑定到端口）与 2 个代码分开。并根据发送/接收专用于适当的代码段。

# android - overridePendingTransition 导致错误：java.lang.IllegalStateException: The specified child has a parent

> ID：14557854
> 
> 赞同：1
> 
> 时间：2013-01-28T08:05:22.260
> 
> 标签：android

我有一个应用程序，当用户点击一个按钮时，它会通过动画将他带到一个新活动。使用动画（转入/转出）再次创建被按下的前一个活动。快速执行此操作会导致错误。

代码：

```
 startActivity(intent);
            overridePendingTransition(R.anim.slide_in,R.anim.slide_out);
    finish(); 
```

错误 ：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
at android.view.ViewGroup.addView(ViewGroup.java:3210)
at android.widget.ViewAnimator.addView(ViewAnimator.java:184)
at android.view.ViewGroup.addView(ViewGroup.java:3155)
at android.view.ViewGroup.addView(ViewGroup.java:3131)
at com.myapps.tryanim.w.onAnimationEnd(Unknown Source)
at android.view.animation.AnimationSet.getTransformation(AnimationSet.java:400)
at android.view.animation.Animation.getTransformation(Animation.java:940)
at android.view.View.drawAnimation(View.java:13200)
at android.view.View.draw(View.java:13339)
at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
at android.view.View.draw(View.java:13710)
at android.view.View.getDisplayList(View.java:12645)
at android.view.View.getDisplayList(View.java:12689)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
at android.view.View.getDisplayList(View.java:12583)
at android.view.View.getDisplayList(View.java:12689)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
at android.view.View.getDisplayList(View.java:12583)
at android.view.View.getDisplayList(View.java:12689)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
at android.view.View.getDisplayList(View.java:12583)
at android.view.View.getDisplayList(View.java:12689)
at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)
at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
at android.view.Choreographer.doCallbacks(Choreographer.java:562)
at android.view.Choreographer.doFrame(Choreographer.java:532)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

这里可能有什么问题。

slide_in xml 动画

```
<translate
    android:fromXDelta="100%"
    android:toXDelta="0%"
    android:duration="800" /> 
```

幻灯片输出 xml

```
<translate
    android:fromXDelta="0%"
    android:toXDelta="-100%"
    android:duration="800" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:21:38.523

我自己找到了答案，因为问题不在于动画，而在于我添加的 UI 小部件。所以我所做的是首先删除所有 UI 小部件，然后调用动画，因此当新活动启动时，它首先删除所有 UI 小部件（如果有的话）然后再次添加。

# python - 查找开始时间和结束时间之间的值

> ID：14557855
> 
> 赞同：0
> 
> 时间：2013-01-28T08:05:30.110
> 
> 标签：python

我有一个变量 start_time 和 end_time 以及另一个名为 confirm_time 的值。我需要做一个确认时间在 start_time 和 end_time 之间的匹配。我将如何发现。时间格式如下：

```
starting_time = "Jan 25 10:00:00"
ending_time   = "Jan 26 20:06:59" 
```

Confirmed_time 也是相同的格式。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T08:14:37.953

您可以使用[datetime.strptime](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)将日期和时间解析为[datetime](http://docs.python.org/2/library/datetime.html#available-types)对象并进行比较。请注意，重要的是每个时间的格式保持相同

```
>>> starting_time = "Jan 25 10:00:00"
>>> ending_time   = "Jan 26 20:06:59"
>>> confirmed_time = "Jan 25 11:11:11"
>>> starting_time_dt = datetime.strptime(starting_time,"%b %d %H:%M:%S")
>>> ending_time_dt   = datetime.strptime(ending_time,"%b %d %H:%M:%S")
>>> confirmed_time_dt   = datetime.strptime(confirmed_time,"%b %d %H:%M:%S")
>>> if starting_time_dt <= confirmed_time_dt <= ending_time_dt:
    print "Within ...."

Within ....
>>> confirmed_time = "Jan 24 11:11:11"
>>> confirmed_time_dt   = datetime.strptime(confirmed_time,"%b %d %H:%M:%S")
>>> if starting_time_dt <= confirmed_time_dt <= ending_time_dt:
    print "Within ...."

>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:07:20.197

使用 dateutil 解析值并将它们转换为日期时间。然后检查您的确认时间是否在所需的时间间隔内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:15:16.557

datetime 模块会有所帮助

```
In [41]: starting_time = "Jan 25 10:00:00"

In [42]: datetime.datetime.strptime(starting_time, "%b %d %H:%M:%S")
Out[42]: datetime.datetime(1900, 1, 25, 10, 0)

In [43]: s = datetime.datetime.strptime(starting_time, "%b %d %H:%M:%S")

In [44]: ending_time   = "Jan 26 20:06:59"

In [45]: e = datetime.datetime.strptime(ending_time, "%b %d %H:%M:%S")

In [46]: e
Out[46]: datetime.datetime(1900, 1, 26, 20, 6, 59)

In [47]: confirm_time   = "Jan 26 12:00:00"

In [48]: c = datetime.datetime.strptime(confirm_time, "%b %d %H:%M:%S")

In [49]: if s < c < e:
   ....:     print True
   ....:
True 
```

检查这些可以在将字符串转换为日期时间对象时使用的[格式](http://search.cpan.org/~drolsky/DateTime-Format-Strptime-1.52/lib/DateTime/Format/Strptime.pm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:18:12.640

我建议您安装并使用[dateutlil 模块](http://labix.org/python-dateutil)，因为它使解析日期更加容易。

```
from dateutil import parser

s_time = "Jan 25 10:00:00"
e_time = "Jan 26 20:06:59"
f_time = "Jan 25 12:10:00"

def example(conf, start, end):
    p = parser.parse
    return p(start) < p(conf) < p(end)

print example(f_time, s_time, e_time)
#output: True 
```

`parser.parse`可以处理大多数甚至晦涩的格式：

```
In[21]: parser.parse("Sat Jan 26 00:31:17 UTC 2013")
Out[21]: datetime.datetime(2013, 1, 26, 0, 31, 17, tzinfo=tzutc()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T08:19:43.783

```
def isDateBetween(starting_time, ending_time, confirmed_time):
        pattern = '%b %d %H:%M:%S'

        startDate = datetime.datetime.strptime(starting_time, pattern)
        endDate = datetime.datetime.strptime(ending_time, pattern)
        confirmedDate = datetime.datetime.strptime(confirmed_time, pattern)

        return startDate <= confirmedDate <= endDate

print isDateBetween("Jan 25 10:00:00", "Jan 26 20:06:59", "Jan 27 12:20:00") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T08:21:21.543

这有效：

```
import datetime as dt

starting_time = "Jan 25 10:00:00"
ending_time   = "Jan 26 20:06:59"
confirmed_time = "Jan 26 08:10:01"
fmt="%b %d %H:%M:%S"

print (dt.datetime.strptime(starting_time,fmt) < 
       dt.datetime.strptime(confirmed_time,fmt) < 
       dt.datetime.strptime(ending_time,fmt)) 
```

请注意，如果没有指定年份，则`datetime`默认为 1900。然而，缺少年份有点模糊。如果：

```
starting_time = "Dec 26 10:00:00"
ending_time   = "Jan 26 20:06:59"     # the following year or the same year? 
confirmed_time = "Jan 02 08:10:01" 
```

*编辑*

您可以通过更改strptime 使用的[输入格式](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)来处理年份（如您的评论） ：

```
import datetime as dt

starting_time = "Dec 25 10:00:00 UTC 2012"
ending_time   = "Jan 26 20:06:59 UTC 2013"
confirmed_time = "Jan 02 08:10:01 UTC 2013"
fmt="%b %d %H:%M:%S UTC %Y"

print (dt.datetime.strptime(starting_time,fmt) < 
       dt.datetime.strptime(confirmed_time,fmt) < 
       dt.datetime.strptime(ending_time,fmt)) 
```

# android - HttpsURLConnection 致命异常

> ID：14557856
> 
> 赞同：1
> 
> 时间：2013-01-28T08:05:30.723
> 
> 标签：android, httpsurlconnection

我是android编程的新手。我按照 api 示例[https://developer.android.com/reference/java/net/HttpURLConnection.html](https://developer.android.com/reference/java/net/HttpURLConnection.html)来打开连接。

这是我的功能：

```
 public void mylogin()
{       
    URL url = null;
    try {
        url = new URL("https://myurl");
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    HttpsURLConnection urlConnection = null;
    try {
        urlConnection = (HttpsURLConnection)
        url.openConnection();
        Toast.makeText(this, "success", Toast.LENGTH_SHORT).show();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(this, "io err", Toast.LENGTH_SHORT).show();
    }
    try {
        urlConnection.connect();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(this,"io err2", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }

} 
```

但是当我启动我的应用程序时，它会崩溃并给我一个错误列表：

```
 FATAL EXCEPTION: main
     java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.example.connexion/com.example.connexion.MainActivity}:   android.os.NetworkOnMainThreadException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.os.NetworkOnMainThreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
at java.net.InetAddress.getAllByName(InetAddress.java:214)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:165)
at com.example.connexion.MainActivity.mylogin(MainActivity.java:84)
at com.example.connexion.MainActivity.onCreate(MainActivity.java:62)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
... 11 more 
```

我搜索了论坛，但找不到解决方案。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:08:19.693

您的问题是您正在主线程上执行网络操作：`NetworkOnMainThreadException`

您应该单独执行任何网络事务`Thread`，例如`AsyncTask`.

# scheme - 如何在方案中定义编译时可用函数？

> ID：14557859
> 
> 赞同：1
> 
> 时间：2013-01-28T08:05:37.950
> 
> 标签：scheme

方案编译器如何确定在宏扩展期间哪些函数可用？

我的意思是这样的低级机制，比如语法案例，你不仅可以生成模式替换，还可以调用一些函数，至少在 fender 部分

### 编辑：

我的意思是，我需要在宏扩展过程中使用普通函数。例如：

```
(define (twice a)
  (declare 'compile-time)
  (* 2 a))
(let-syntax ((mac (lambda (x)
                    (syntax-case x ()
                      ((_ n) (syntax (display (unsyntax (twice n)))))))))
   (mac 4)) 
```

其中 n 已知是一个数字，并且 (两次 n) 的评估发生在扩展过程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:32:41.167

每个 Scheme 编译器都会确定宏扩展引用的函数。在您的情况下，“let-syntax”的编译将导致编译器确定“两次”是免费的（在“let-syntax”中的语法超出范围）。应用宏时，对“两次”函数的自由引用将被解决。

不同的 Scheme 编译器可能在不同的时间执行自由值解析。您可以通过将“两次”定义为：

```
(define twice
  (begin (display 'bound')
         (lambda (x) (* 2 x)))) 
```

[在您的情况下，使用 let-syntax 很难注意到。我建议先定义语法，然后再使用 '(mac 4')。这样，一些编译器（guile）将在编译定义语法时打印“绑定”；当 '(mac 4)' 展开时，其他 (ikarus) 将打印 'bound'。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:15:32.130

这取决于您使用的宏系统。其中一些系统允许您在扩展期间调用常规方案函数。例如，[显式重命名宏](http://wiki.call-cc.org/explicit-renaming-macros)允许您这样做：

```
(define-syntax swap!
  (er-macro-transformer
    (lambda (form rename compare?)
      ...
      `(let ((tmp ,x))
         (set! ,x ,y)
         (set! ,y tmp))))) 
```

也就是说，您可用的宏系统将取决于您使用的方案。

# javascript - 运行 jQuery 函数 onclick

> ID：14557862
> 
> 赞同：11
> 
> 时间：2013-01-28T08:05:45.977
> 
> 标签：javascript, html, onclick, jquery

所以我实现了一些 jQuery，它基本上通过一个由`<a>`标签激活的滑块来切换内容。现在考虑它，我宁愿让持有链接的 DIV 成为它自己的链接。

我正在使用的 jQuery 在我的脑海中看起来像这样：

```
<script type="text/javascript">
function slideonlyone(thechosenone) {
 $('.systems_detail').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).slideDown(200);
      }
      else {
           $(this).slideUp(600);
      }
 });
}
</script> 
```

我将其用作索引类型框，因此当您单击`<a>`曾经是图像的标签时会出现多种产品*它会在其下方呈现一些内容，描述产品详细信息：

```
<div class="system_box">
  <h2>BEE Scorecard database</h2>
  <p>________________</p>
  <a href="javascript:slideonlyone('sms_box');"></a>
</div> 
```

产品详细信息包含在此 div 中。

```
<div class="systems_detail" id="sms_box">
</div> 
```

因此，当您单击以前的图像* 时，它将运行 slideonlyone('div_id_name') 函数。然后上面的函数首先关闭所有其他具有类名“系统详细信息”的 div，然后打开/滑动具有传递给 slideonlyone 函数的 id 的 div。这样您就可以切换产品详细信息，而不是同时显示它们。

请注意，我只保留`<a>`标签以向您展示其中的内容，我将摆脱它。

注意：我有一个想法，只是将整个 div 包装在一个`<a>`标签中，但这是一种好的做法吗？

所以现在我想知道的是，既然你需要 JavaScript 来在 div 标签上运行 onclick 你如何编写它以便它仍然运行我的 slideonlyone 函数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T09:14:38.333

在您的示例中使用[突兀的 JavaScript](https://stackoverflow.com/questions/8392374/difference-between-obtrusive-and-unobtrusive-javascript)（即内联代码），您可以将 click 事件处理程序附加到具有如下属性的`div`元素：`onclick`

```
 <div id="some-id" class="some-class" onclick="slideonlyone('sms_box');">
     ...
 </div> 
```

**然而**，**[最佳实践是不显眼的 JavaScript](https://stackoverflow.com/questions/8392374/difference-between-obtrusive-and-unobtrusive-javascript)**`on()` ，您可以通过使用 jQuery 的方法或其简写方式轻松实现`click()`。例如：

```
 $(document).ready( function() {
     $('.some-class').on('click', slideonlyone('sms_box'));
     // OR //
     $('.some-class').click(slideonlyone('sms_box'));
 }); 
```

在您的处理程序函数中（例如`slideonlyone()`在这种情况下），您可以使用对象引用*触发*事件的元素（例如`div`在这种情况下）`$(this)`。例如，如果您需要它的 ID，您可以使用`$(this).attr('id')`.

* * *

**编辑**

在阅读了您对下面@fmsf 的评论后，我发现您还需要动态引用要切换的目标元素。正如@fmsf 建议的那样，您可以将此信息添加到`div`具有如下数据属性的数据中：

```
<div id="some-id" class="some-class" data-target="sms_box">
    ...
</div> 
```

要访问元素的数据属性，您可以使用`attr()`@fmsf 示例中的方法，但最佳做法是使用 jQuery 的`data()`方法，如下所示：

```
 function slideonlyone() {
     var trigger_id = $(this).attr('id'); // This would be 'some-id' in our example
     var target_id  = $(this).data('target'); // This would be 'sms_box'
     ...
 } 
```

请注意如何`data-target`使用`data('target')`, 不带`data-`前缀进行访问。使用 data-attributes 您可以将各种信息附加到元素，jQuery 会自动将它们添加到元素的[数据对象](http://api.jquery.com/data/)中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T08:19:12.677

为什么需要将它附加到 HTML？只需将功能与悬停绑定

```
$("div.system_box").hover(function(){ mousin }, 
                          function() { mouseout }); 
```

如果您坚持在 html 中包含 JS 引用，这通常是一个坏主意，您可以使用：

```
onmouseover="yourJavaScriptCode()" 
```

# 主题编辑后：

```
<div class="system_box" data-target="sms_box"> 
```

...

```
$("div.system_box").click(function(){ slideonlyone($(this).attr("data-target")); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:32:46.077

您可以绑定`mouseenter`and`mouseleave`事件，jQuery 将模拟那些它们不是原生的。

```
$("div.system_box").on('mouseenter', function(){
    //enter
})
.on('mouseleave', function(){
    //leave
}); 
```

[小提琴](http://jsfiddle.net/gillyspy/bTRRJ/)

*注意：不要使用悬停，因为它已被弃用*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:35:08.410

您可以在这里改进几件事。首先，没有理由使用`<a>`（锚）标签，因为您没有链接。

每个元素都可以绑定到单击和悬停事件... div、span、标签、输入等。

不过，我无法真正确定您要做什么。您将目标与您自己的实现混合在一起，从我目前所见，您并不确定如何去做。您能否更好地说明您要完成的工作？

== 编辑 ==

要求仍然很模糊。我已经实现了我想象中你所说的一个非常快速的版本......或者一些接近的东西来说明你如何能够做到这一点。让我知道我是否在正确的轨道上。

[http://jsfiddle.net/THEtheChad/j9Ump/](http://jsfiddle.net/THEtheChad/j9Ump/)

# script# - Script# 0.8 更改生成的代码

> ID：14557863
> 
> 赞同：1
> 
> 时间：2013-01-28T08:05:46.483
> 
> 标签：script#

我已经从 Github 构建了最新的 script# 源代码，并开始在项目中使用它。看起来代码的生成方式已经改变。

如何使编译器回到生成代码的旧方式？（0.7.x 方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:22:33.567

没有标志可以返回旧输出。新的输出将用于创建脚本模块的 AMD 模式引入到 script# 生成的输出中，并利用它来简化事情并使生成的脚本与公认的模式更加一致。

首先是使用模块范围来更好地生成私有类型，因此它们更易于最小化。具体来说，使用“$”作为分隔符的整个标识符被最小化，而不是因为“。”而被保留为不可最小化......最终我也会将它用于私人成员。

如果您之前使用程序集 ScriptNamespace 属性来最小化通常较长的 c# 命名空间，则公共类型以相同的方式在模块外部公开。

如果您没有使用 ScriptNamespace，而是之前公开了诸如 SomeNamespace.SomeSubnamespace.SomeType 之类的类型，那么公共表面区域也会发生变化 - 现在将相同的类型公开为 SomeModule.MyType（就像您将使用 ScriptNamespace = SomeModule）。每个 c# 程序集都映射到一个模块。

同样，这是为了更好地最小化，并与大多数其他脚本框架采用的模式保持同步。希望能为这种变化提供一些背景。

您是否需要旧输出的某个特定方面，而不是本质上需要保持不变？如果您需要与以前完全相同的输出，那么 0.7.x 将是要使用的版本。

# android - 多个移动平台的独立时间

> ID：14557870
> 
> 赞同：0
> 
> 时间：2013-01-28T08:06:05.717
> 
> 标签：android, ios, objective-c

我需要创建应该始终与 Android、iOS 等同步的时钟。

时钟应该是：独立的。（用户或其他人无法更改时间）已同步。（Android、iOS 等上的时间应该相同。）离线工作。（不应该需要互联网连接）

我会很感激任何建议。

现在我在看gps时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:19:08.437

GPS 时间非常精确，但并不总是像互联网一样可用。

您应该使用电话时钟并通过以秒或毫秒为单位计算增量通过互联网与服务器同步。

早上 7:00 可上网 `{ServerDelta}`= `{ServerTime}`-`{PhoneTime}`

上午 8:00 GPS 可用

`{GPSDelta}`= `{GPSTime}`-`{PhoneTime}`

在上午 11:00，您可以计算`{GPSDelta}`，`{ServerDelta}`如果您有`{PhoneTime}`和 deltas 但您将不知道服务器是否更改时钟或电话更改时钟通过与时间服务器同步。您的电话每天都会校正时间，并且每天可能会减少/增加 5 秒。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T08:13:17.250

GPS 信号只能在户外使用。

而是尝试使用 NTP 或 SNTP 协议。

（顺便说一下，Android 的内部时钟是使用[NITZ](http://en.wikipedia.org/wiki/NITZ)和[NTP/SNTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)同步的）您可以搜索 Android 源代码以获取参考实现。

# html - HTML 在 TYPO3 扩展前端可见

> ID：14557875
> 
> 赞同：0
> 
> 时间：2013-01-28T08:06:50.750
> 
> 标签：html, forms, typo3, markers

我在 TYPO3 中创建了一个扩展。我想要一个 HTML 表单在我的前端。我`textarea`在我的 HTML 模板中创建了一个字段，如下所示：

```
<textarea rows="10" cols="50" id=""></textarea> 
```

但问题是它`<textarea rows="10" cols="50" id=""></textarea>`直接在我的前端页面上显示了相同的代码。

我该如何解决这个问题？其余所有 Html 部分都正确显示。

我的代码如下： -

```
 $markerArray['###OPTION_USERS###'].='<form action="'.$this->username().'" id="messageform" name="messageform" method="post">';
     $markerArray['###OPTION_USERS###'].='<textarea rows="10" cols="50" id=""></textarea><select id="selectedusers" name="selectedusers[]" size="" multiple="multiple">';

             while ($row = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res)){
                    $markerArray['###OPTION_USERS###'].='<option value="'.$row['username'].'">'.$row['username'].'</option>';
             }
     $markerArray['###OPTION_USERS###'].='</select><input type="submit" name="sendmessage" value="send message"></form>'; 
```

# javascript - 如何从 Jquery 选择中返回 HtmlCollection

> ID：14557876
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:06:51.187
> 
> 标签：javascript, jquery

我有一个这样的 jquery 选择：

```
elements= $($('#mytab').find('form').attr('elements')).not('button');

// access elements by name
 elements['id']=1; 
```

这显然不起作用:(

我需要 jquery 将集合作为 HtmlCollection 返回，例如

```
$('#mytab').find('form').attr('elements') 
```

我的问题是，是否有任何可用的函数，例如 toArray() 等将集合返回为 HtmlCollection，而不是 jquery 数组/对象集合？我的主要目标是按名称而不是索引访问表单元素，例如

```
elements['id'], elements['name'] 
```

[Html 表单元素 元素](https://developer.mozilla.org/en-US/docs/DOM/form.elements) 周围有很多混淆。元素是html`form`对象的属性，它是所有元素的集合`form`

[这是一个 JSfiddle 。](http://jsfiddle.net/AfMst/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:24:21.023

`elements`是属性而不是属性，您应该改用`prop`方法：

```
var elements = $('#mytab').find('form').prop('elements'); 
```

或者：

```
var elements = $('#mytab').find('form')[0].elements; 
```

好吧，如果你想过滤输入元素，你可以使用`get`方法，不需要使用`elements`属性：

```
var elements = $('#mytab form input').get(); 
```

[http://api.jquery.com/get/](http://api.jquery.com/get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:13:11.383

是的，有：

```
$.makeArray($('div')); 
```

`div`这将返回页面上所有元素的数组。显然，您可以使用任何您想要的选择器。

要按名称获取元素数组，只需使用本机 JS：

```
document.getElementsByName('myFormElementName'); 
```

# silverlight - Windows Phone：触摸广告控件时不会触发 OnManipulationStarted

> ID：14557877
> 
> 赞同：0
> 
> 时间：2013-01-28T08:06:54.387
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone-8

当我尝试在我的页面 XAML 中添加诺基亚 Ad Exchange 广告控件时，`OnManipulationStarted`当我触摸它时，被覆盖的事件处理程序不会触发。如果我触摸其他任何东西，它就会被触发，但如果我专门触摸它，那么它不会进入方法代码。

这是与控件相关的问题还是我应该添加其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:28:35.570

它可能由控件处理，因此不会冒泡。您可以使用替代 control.AddHandler 方法而不是 += 来添加事件处理程序。它需要一个布尔值，指定是否要调用事件处理程序，即使它是由子元素处理的。

# hook - 重定向到liferay登录页面

> ID：14557879
> 
> 赞同：2
> 
> 时间：2013-01-28T08:07:10.890
> 
> 标签：hook, liferay, liferay-6

我正在创建一个钩子以在登录时检查用户，并且根据某些参数，它将被重定向到一个或另一个自定义页面。

我正在这样做：

### Portal.properties

```
#Gestion evento login
login.events.post=com.liferay.portal.events.AccionLogin
auth.forward.by.last.path=true 
```

### 动作类

```
public class AccionLogin extends Action {

    @Override
    public void run(HttpServletRequest request, HttpServletResponse response) throws ActionException {
        try {
            doRun(request, response);
        } catch (Exception e) {
            throw new ActionException(e);
        }
    }
    protected void doRun(HttpServletRequest request, HttpServletResponse response) throws Exception {

        HttpSession sesion = request.getSession();

        User usuarioLogin = PortalUtil.getUser(request);

        // Recupero la lista de roles
        ArrayList<Role> roles = UtilRoles.getIntExtRol();

        // Compruebo si el usuario pertenece al grupo
        if (UtilLdap.esGrupo(request, usuarioLogin.getScreenName())) {
            Constantes._log.info("El usuario es Interno en el Ldap vector. Gestiono su rol");
            UtilRoles.setRoleIfNotHave(usuarioLogin, roles, Constantes.INTERNOS);
            sesion.setAttribute(WebKeys.LAST_PATH, UtilUrls.generaLasthPath(request, Constantes.INTERNOS));
        } else {
            Constantes._log.info("El usuario es externo en el Ldap vector. Gestiono su rol");
            UtilRoles.setRoleIfNotHave(usuarioLogin, roles, Constantes.EXTERNOS);
            sesion.setAttribute(WebKeys.LAST_PATH, UtilUrls.generaLasthPath(request, Constantes.EXTERNOS));
        }
    }
} 
```

这种方法：

```
sesion.setAttribute(WebKeys.LAST_PATH, UtilUrls.generaLasthPath(request, Constantes.EXTERNOS)); 
```

这样做：

```
return new LastPath(StringPool.BLANK,Constantes.GROUPINTRANET+Constantes.SEPARADOR+Constantes.INICIOINTERNOS,
             new HashMap<String, String[]>()); 
```

Generates`group/intranet/pageforexterns`和相同的，`interns`但是当我登录时出现 cookie 错误和重定向错误。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:41:42.860

而不是创建 LastPath 的新实例，您只需通过 LastPath lastPath=(LastPath)session.getAttribute(WebKeys.LAST_PATH); 获取 LastPath 对象 并使用 lastPath.setPath(PATH) 来避免任何错误。

# java - IPv6 在请求参数中编码

> ID：14557880
> 
> 赞同：1
> 
> 时间：2013-01-28T08:07:14.893
> 
> 标签：java, rest, jersey, decode, ipv6

我的 REST 资源（使用 Jersey）使用 QueryParam 接收 IPv6 地址。

当资源中接收到地址值时，它的一些字符被编码了，不知道用的是什么算法。

例如，地址： [fe80::bce8:a33e:2c56:d48a%13]
如下所示：
在调试中它看起来像 [fe80::bce8:a33e:2c56:d48a\u00]
但是当它打印出来时： [ fe80::bce8:a33e:2c56:d48a]

我知道 '\u00' 被翻译成空白，但为什么会这样呢？我该如何克服呢？有没有办法解码它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:42:48.053

根据[RFC2396](http://www.ietf.org/rfc/rfc2396.txt)：

```
 Because the percent "%" character always has the reserved purpose of
  being the escape indicator, it must be escaped as "%25" in order to
  be used as data within a URI. 
```

Jersey 无法理解这是否是保留字符。因此，在您的情况下，我相信您应该转义查询参数中的保留字符，然后它应该按预期工作：

```
[fe80::bce8:a33e:2c56:d48a%2513] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:12:40.173

IPv6 地址由八个 4 位十六进制字符和七个 : 分隔符组成

因此您需要将十六进制字符独立地转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:03:18.380

原因之一似乎是您使用链接本地地址（以 fe80: 开头的地址）。因为每个链接都有这些地址，所以地址需要包含您所指的链接*的规范。*那就是您看到的 %13 部分。如果字符串被解析为 URL 编码字符串，则 %13 将成为 DC3 控制代码（十六进制数 0x13）。

我不知道 QueryParam，但这似乎是一个错误。IP 地址不是 URL 编码的，所以它不应该尝试解码它们......

# sql - SQL to Oracle Linked Server Openquery 检索单行

> ID：14557881
> 
> 赞同：5
> 
> 时间：2013-01-28T08:07:20.157
> 
> 标签：sql, sql-server, oracle, linked-server

我正在使用`OpenQuery`从 Oracle 表中获取行集到我的 SQL Server 中。然后我发现有一些东西被称为`OPENROWSET`获取所有行

但它对我没有用。

```
SELECT a.*
FROM OPENROWSET('MSDASQL',
   'DRIVER={SQL Server};SERVER=INDIANBANK;UID=ags;PWD=mypass',
   'Select * From ATM_PROGNOSIS.IR_ATMMON_AGS') AS a 
```

错误 ：-

```
OLE DB provider "MSDASQL" for linked server "(null)" returned message "[Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionOpen (Connect()).".
OLE DB provider "MSDASQL" for linked server "(null)" returned message "[Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied.".
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider "MSDASQL" for linked server "(null)". 
```

我的 DSN 名称：印度银行

我已使用**Microsoft OLE DB Provider for ODBC Driver**创建链接服务器以连接到 oracle **（ORACLE DB 位于远程服务器上）**

我的 DSN 显示测试连接成功。与我的链接服务器相同。

当我执行以下查询时`Select * From openquery(IndianBank,'Select * From ATM_PROGNOSIS.IR_ATMMON_AGS')` **它只检索一行**

我的链接服务器代码：-

```
EXEC master.dbo.sp_addlinkedserver @server = N'INDIANBANK', @srvproduct=N'IndianBankOracle', @provider=N'MSDASQL', @datasrc=N'INDIANBANK'
EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'INDIANBANK',@useself=N'False',@locallogin=NULL,@rmtuser=N'ags',@rmtpassword='########'

GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'collation compatible', @optvalue=N'true'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'data access', @optvalue=N'true'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'dist', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'pub', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'rpc', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'rpc out', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'sub', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'connect timeout', @optvalue=N'0'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'collation name', @optvalue=null
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'lazy schema validation', @optvalue=N'false'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'query timeout', @optvalue=N'0'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'use remote collation', @optvalue=N'true'
GO

EXEC master.dbo.sp_serveroption @server=N'INDIANBANK', @optname=N'remote proc transaction promotion', @optvalue=N'true'
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:05:29.873

如果你使用这样的字符串 "'MSDASQL','DRIVER={SQL Server};SERVER=INDIANBANK;UID=ags;PWD=mypass', 'Select * From ATM_PROGNOSIS.IR_ATMMON_AGS'" 你得到了无 DSN 连接所以测试DSN 没用。

我建议您使用此驱动程序
[Oracle Data Provider for .NET](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)
对 Oracle 更友好。

这是 描述调优
[的 ODP.NET 示例。](http://docs.oracle.com/cd/E11882_01/win.112/e21641/toc.htm)

这是 [ODP.NET 的完整文档](http://docs.oracle.com/cd/E11882_01/win.112/e23174/toc.htm)

希望这可以帮助 ：）

请参阅下面的评论。

PS 对于 Microsoft 驱动程序，此处显示的参数 [Microsoft OLE DB Provider for ODBC](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675326%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T08:57:20.613

我对同样问题的解决方案是

**在 Oracle ODBC 驱动程序设置中将 Numeric Settings 参数设置为 US numeric。**

引用 ODBC 帮助，有问题的东西加下划线） 数字设置 - 允许您选择在接收和返回绑定为字符串的数字数据时，将使用哪些数字设置来确定小数和组分隔符。此选项允许您选择 Oracle NLS 设置（默认设置）、Microsoft 默认区域设置（提供一种方式来反映 Oracle OLE DB 驱动程序的行为以提高互操作性）**或美国数字设置（使用 MS Access 或非美国环境中的 DAO（数据库访问对象）。**

# objective-c - 无法将应用程序部署到 iPad-Linker 命令等设备中失败，退出代码为 1

> ID：14557893
> 
> 赞同：0
> 
> 时间：2013-01-28T08:08:20.793
> 
> 标签：objective-c, xcode4.3, sup

我是本机应用程序的初学者。我正在使用 Objective C 作为前端、SUP 作为中间件和 SAP 作为后端开发应用程序。我有一个有效的配置证书和一个有效的包标识符。我尝试将我的一个简单应用程序部署到设备中（iPAD）与后端没有任何连接，只有从一个屏幕到另一个屏幕的一些基本导航。它已成功部署。

但我的问题是，当我部署连接到中间件并使用 SUP 库的应用程序时，它显示构建失败“链接器命令失败，退出代码 1”。我认为这是因为使用了 SUP 库。**我的应用程序在模拟器上成功运行**。现在我能做些什么来解决这个问题？请帮我解决这个问题。**我的 Xcode 版本是 4.3，模拟器是 5.1，设备版本是 5.1.1(iPad2)。**

下面给出了错误日志的一部分：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_SUPDataType", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineer.o
      objc-class-ref in FieldServiceCustomer_Installations.o
      objc-class-ref in FieldServiceCustomer_InstalledBases.o
      objc-class-ref in FieldServiceCustomers.o
      objc-class-ref in FieldServiceImages.o
      objc-class-ref in FieldServiceInstalledBase_Address.o
      objc-class-ref in FieldServiceInstalledBase_Components.o
      ...
  "_OBJC_CLASS_$_SUPDatabaseMetaDataRBS", referenced from:
      _OBJC_CLASS_$_FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
  "_OBJC_CLASS_$_SUPAbstractStructure", referenced from:
      _OBJC_CLASS_$_FieldServiceChangeLogKey in FieldServiceChangeLogKey.o
      _OBJC_CLASS_$_FieldServiceKeyGeneratorPK in FieldServiceKeyGeneratorPK.o
      _OBJC_CLASS_$_FieldServiceKeyPackageName in FieldServiceKeyPackageName.o
      _OBJC_CLASS_$_FieldServiceLocalKeyGeneratorPK in FieldServiceLocalKeyGeneratorPK.o
  "_OBJC_CLASS_$_SUPKeyGenerator", referenced from:
      objc-class-ref in FieldServiceKeyGenerator.o
      _OBJC_CLASS_$_FieldServiceKeyGenerator in FieldServiceKeyGenerator.o
  "_OBJC_CLASS_$_SUPDefaultCallbackHandler", referenced from:
      _OBJC_CLASS_$_CallbackHandler in CallbackHandler.o
  "_OBJC_METACLASS_$_SUPClassMetaDataRBS", referenced from:
      _OBJC_METACLASS_$_FieldServiceChangeLogKeyMetaData in FieldServiceChangeLogKeyMetaData.o
      _OBJC_METACLASS_$_FieldServiceKeyGeneratorPKMetaData in FieldServiceKeyGeneratorPKMetaData.o
      _OBJC_METACLASS_$_FieldServiceKeyPackageNameMetaData in FieldServiceKeyPackageNameMetaData.o
      _OBJC_METACLASS_$_FieldServiceLocalKeyGeneratorPKMetaData in FieldServiceLocalKeyGeneratorPKMetaData.o
      _OBJC_METACLASS_$_FieldServicePersonalizationParametersMetaData in FieldServicePersonalizationParametersMetaData.o
      _OBJC_METACLASS_$_FieldServiceSISSubscriptionKeyMetaData in FieldServiceSISSubscriptionKeyMetaData.o
  "_OBJC_METACLASS_$_SUPKeyGenerator", referenced from:
      _OBJC_METACLASS_$_FieldServiceKeyGenerator in FieldServiceKeyGenerator.o
  "_OBJC_CLASS_$_SUPClassDelegate", referenced from:
      objc-class-ref in FieldServiceChangeLogKey.o
      objc-class-ref in FieldServiceKeyGeneratorPK.o
      objc-class-ref in FieldServiceKeyPackageName.o
      objc-class-ref in FieldServiceLocalKeyGeneratorPK.o
      objc-class-ref in FieldServicePersonalizationParameters.o
      objc-class-ref in FieldServiceSISSubscriptionKey.o
  "_OBJC_METACLASS_$_SUPAbstractLogger", referenced from:
      _OBJC_METACLASS_$_FieldServiceLoggerImpl in FieldServiceLoggerImpl.o
  "_OBJC_CLASS_$_SUPSISSubscriptionKey", referenced from:
      _OBJC_CLASS_$_FieldServiceSISSubscriptionKey in FieldServiceSISSubscriptionKey.o
  "_OBJC_METACLASS_$_SUPAbstractDBRBS", referenced from:
      _OBJC_METACLASS_$_FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPDatabaseManagerFactory", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPLocalEntityDelegate", referenced from:
      objc-class-ref in FieldServiceLocalKeyGenerator.o
      objc-class-ref in FieldServiceOfflineAuthentication.o
      objc-class-ref in FieldServiceOperationReplay.o
  "_OBJC_METACLASS_$_SUPAbstractPersonalizationParameters", referenced from:
      _OBJC_METACLASS_$_FieldServicePersonalizationParameters in FieldServicePersonalizationParameters.o
  "_OBJC_IVAR_$_SUPAbstractDBRBS._messageListenerMap", referenced from:
      -[FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB defineMessageListenerForEntity:withClass:] in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_METACLASS_$_SUPAbstractLocalEntity", referenced from:
      _OBJC_METACLASS_$_FieldServiceOfflineAuthentication in FieldServiceOfflineAuthentication.o
  "_OBJC_CLASS_$_SUPLoginCredentials", referenced from:
      objc-class-ref in ConnectionController.o
  "_OBJC_CLASS_$_MAChartView", referenced from:
      objc-class-ref in AnalysisViewController.o
      objc-class-ref in DataGridViewController.o
  "_OBJC_CLASS_$_SUPParameterMetaData", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceChangeLogImplMetaData.o
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      objc-class-ref in FieldServiceImage_CaptureMetaData.o
      ...
  "_OBJC_CLASS_$_SUPStringUtil", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_METACLASS_$_SUPDatabaseMetaDataRBS", referenced from:
      _OBJC_METACLASS_$_FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
  "_OBJC_CLASS_$_MAViewController", referenced from:
      _OBJC_CLASS_$_AnalysisViewController in AnalysisViewController.o
      _OBJC_CLASS_$_DataGridViewController in DataGridViewController.o
  "_OBJC_METACLASS_$_SUPEntityMetaDataRBS", referenced from:
      _OBJC_METACLASS_$_FieldServiceAssign_ServiceEngineerMetaData in FieldServiceAssign_ServiceEngineerMetaData.o
      _OBJC_METACLASS_$_FieldServiceChangeLogImplMetaData in FieldServiceChangeLogImplMetaData.o
      _OBJC_METACLASS_$_FieldServiceCustomer_InstallationsMetaData in FieldServiceCustomer_InstallationsMetaData.o
      _OBJC_METACLASS_$_FieldServiceCustomer_InstalledBasesMetaData in FieldServiceCustomer_InstalledBasesMetaData.o
      _OBJC_METACLASS_$_FieldServiceCustomersMetaData in FieldServiceCustomersMetaData.o
      _OBJC_METACLASS_$_FieldServiceImage_CaptureMetaData in FieldServiceImage_CaptureMetaData.o
      _OBJC_METACLASS_$_FieldServiceImage_RetrieveMetaData in FieldServiceImage_RetrieveMetaData.o
      ...
  "_OBJC_CLASS_$_SUPLocalKeyGenerator", referenced from:
      objc-class-ref in FieldServiceLocalKeyGenerator.o
      _OBJC_CLASS_$_FieldServiceLocalKeyGenerator in FieldServiceLocalKeyGenerator.o
  "_OBJC_CLASS_$_SUPStringList", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineer.o
      objc-class-ref in FieldServiceCustomer_Installations.o
      objc-class-ref in FieldServiceCustomer_InstalledBases.o
      objc-class-ref in FieldServiceCustomers.o
      objc-class-ref in FieldServiceImage_Capture.o
      objc-class-ref in FieldServiceImage_Retrieve.o
      objc-class-ref in FieldServiceImages.o
      ...
  "_OBJC_IVAR_$_SUPAbstractDBRBS._concreteSubclass", referenced from:
      -[FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB initWithName:] in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_METACLASS_$_SUPAbstractEntityRBS", referenced from:
      _OBJC_METACLASS_$_FieldServiceAssign_ServiceEngineer in FieldServiceAssign_ServiceEngineer.o
      _OBJC_METACLASS_$_FieldServiceChangeLogImpl in FieldServiceChangeLogImpl.o
      _OBJC_METACLASS_$_FieldServiceCustomer_Installations in FieldServiceCustomer_Installations.o
      _OBJC_METACLASS_$_FieldServiceCustomer_InstalledBases in FieldServiceCustomer_InstalledBases.o
      _OBJC_METACLASS_$_FieldServiceCustomers in FieldServiceCustomers.o
      _OBJC_METACLASS_$_FieldServiceImage_Capture in FieldServiceImage_Capture.o
      _OBJC_METACLASS_$_FieldServiceImage_Retrieve in FieldServiceImage_Retrieve.o
      ...
  "_OBJC_METACLASS_$_SUPSISSubscription", referenced from:
      _OBJC_METACLASS_$_FieldServiceSISSubscription in FieldServiceSISSubscription.o
  "_OBJC_CLASS_$_SUPClassMap", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
  "_OBJC_CLASS_$_MBOLogger", referenced from:
      objc-class-ref in CallbackHandler.o
  "_OBJC_CLASS_$_SUPAttributeMap", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceChangeLogImplMetaData.o
      objc-class-ref in FieldServiceChangeLogKeyMetaData.o
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      ...
  "_OBJC_CLASS_$_SUPBase64Encoding", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPOperationMetaData", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceChangeLogImplMetaData.o
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      objc-class-ref in FieldServiceImage_CaptureMetaData.o
      ...
  "_OBJC_IVAR_$_SUPAbstractDBRBS._queueConnection", referenced from:
      -[FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB queueConnection] in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPObjectList", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineer.o
      objc-class-ref in FieldServiceChangeLogImpl.o
      objc-class-ref in FieldServiceCustomer_Installations.o
      objc-class-ref in FieldServiceCustomer_InstalledBases.o
      objc-class-ref in FieldServiceCustomers.o
      objc-class-ref in FieldServiceImage_Capture.o
      objc-class-ref in FieldServiceImage_Retrieve.o
      ...
  "_OBJC_CLASS_$_SUPApplication", referenced from:
      objc-class-ref in ConnectionController.o
  "_OBJC_CLASS_$_SUPAttributeMetaDataRBS", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceChangeLogImplMetaData.o
      objc-class-ref in FieldServiceChangeLogKeyMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      objc-class-ref in FieldServiceImage_CaptureMetaData.o
      ...
  "_OBJC_CLASS_$_SUPOperationMap", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceChangeLogImplMetaData.o
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      objc-class-ref in FieldServiceImage_CaptureMetaData.o
      ...
  "_OBJC_CLASS_$_SUPAbstractROEntity", referenced from:
      _OBJC_CLASS_$_FieldServiceOperationReplay in FieldServiceOperationReplay.o
  "_OBJC_CLASS_$_SUPAbstractPersonalizationParameters", referenced from:
      _OBJC_CLASS_$_FieldServicePersonalizationParameters in FieldServicePersonalizationParameters.o
  "_OBJC_METACLASS_$_SUPAbstractStructure", referenced from:
      _OBJC_METACLASS_$_FieldServiceChangeLogKey in FieldServiceChangeLogKey.o
      _OBJC_METACLASS_$_FieldServiceKeyGeneratorPK in FieldServiceKeyGeneratorPK.o
      _OBJC_METACLASS_$_FieldServiceKeyPackageName in FieldServiceKeyPackageName.o
      _OBJC_METACLASS_$_FieldServiceLocalKeyGeneratorPK in FieldServiceLocalKeyGeneratorPK.o
  "_OBJC_CLASS_$_SUPIndexMetaData", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineerMetaData.o
      objc-class-ref in FieldServiceCustomer_InstallationsMetaData.o
      objc-class-ref in FieldServiceCustomer_InstalledBasesMetaData.o
      objc-class-ref in FieldServiceCustomersMetaData.o
      objc-class-ref in FieldServiceImagesMetaData.o
      objc-class-ref in FieldServiceInstalledBase_AddressMetaData.o
      objc-class-ref in FieldServiceInstalledBase_ComponentsMetaData.o
      ...
  "_OBJC_CLASS_$_SUPEntityMessageListener", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_METACLASS_$_SUPSISSubscriptionKey", referenced from:
      _OBJC_METACLASS_$_FieldServiceSISSubscriptionKey in FieldServiceSISSubscriptionKey.o
  "_OBJC_METACLASS_$_MAViewController", referenced from:
      _OBJC_METACLASS_$_AnalysisViewController in AnalysisViewController.o
      _OBJC_METACLASS_$_DataGridViewController in DataGridViewController.o
  "_OBJC_CLASS_$_SUPAbstractLogger", referenced from:
      _OBJC_CLASS_$_FieldServiceLoggerImpl in FieldServiceLoggerImpl.o
  "_SUPDatabaseManager_UltraLite", referenced from:
      -[FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB initWithName:] in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPEntityMetaDataRBS", referenced from:
      _OBJC_CLASS_$_FieldServiceAssign_ServiceEngineerMetaData in FieldServiceAssign_ServiceEngineerMetaData.o
      _OBJC_CLASS_$_FieldServiceChangeLogImplMetaData in FieldServiceChangeLogImplMetaData.o
      _OBJC_CLASS_$_FieldServiceCustomer_InstallationsMetaData in FieldServiceCustomer_InstallationsMetaData.o
      _OBJC_CLASS_$_FieldServiceCustomer_InstalledBasesMetaData in FieldServiceCustomer_InstalledBasesMetaData.o
      _OBJC_CLASS_$_FieldServiceCustomersMetaData in FieldServiceCustomersMetaData.o
      _OBJC_CLASS_$_FieldServiceImage_CaptureMetaData in FieldServiceImage_CaptureMetaData.o
      _OBJC_CLASS_$_FieldServiceImage_RetrieveMetaData in FieldServiceImage_RetrieveMetaData.o
      ...
  "_OBJC_CLASS_$_SUPPersistenceException", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPAbstractDBRBS", referenced from:
      _OBJC_CLASS_$_FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_IVAR_$_SUPAbstractPersonalizationParameters.clientPersonalizationTableName", referenced from:
      -[FieldServicePersonalizationParameters init] in FieldServicePersonalizationParameters.o
  "_OBJC_CLASS_$_SUPJsonObject", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPAbstractEntityRBS", referenced from:
      _OBJC_CLASS_$_FieldServiceAssign_ServiceEngineer in FieldServiceAssign_ServiceEngineer.o
      _OBJC_CLASS_$_FieldServiceChangeLogImpl in FieldServiceChangeLogImpl.o
      _OBJC_CLASS_$_FieldServiceCustomer_Installations in FieldServiceCustomer_Installations.o
      _OBJC_CLASS_$_FieldServiceCustomer_InstalledBases in FieldServiceCustomer_InstalledBases.o
      _OBJC_CLASS_$_FieldServiceCustomers in FieldServiceCustomers.o
      _OBJC_CLASS_$_FieldServiceImage_Capture in FieldServiceImage_Capture.o
      _OBJC_CLASS_$_FieldServiceImage_Retrieve in FieldServiceImage_Retrieve.o
      ...
  "_OBJC_CLASS_$_SUPSISSubscription", referenced from:
      _OBJC_CLASS_$_FieldServiceSISSubscription in FieldServiceSISSubscription.o
  "_OBJC_CLASS_$_SUPClassMetaDataRBS", referenced from:
      _OBJC_CLASS_$_FieldServiceChangeLogKeyMetaData in FieldServiceChangeLogKeyMetaData.o
      _OBJC_CLASS_$_FieldServiceKeyGeneratorPKMetaData in FieldServiceKeyGeneratorPKMetaData.o
      _OBJC_CLASS_$_FieldServiceKeyPackageNameMetaData in FieldServiceKeyPackageNameMetaData.o
      _OBJC_CLASS_$_FieldServiceLocalKeyGeneratorPKMetaData in FieldServiceLocalKeyGeneratorPKMetaData.o
      _OBJC_CLASS_$_FieldServicePersonalizationParametersMetaData in FieldServicePersonalizationParametersMetaData.o
      _OBJC_CLASS_$_FieldServiceSISSubscriptionKeyMetaData in FieldServiceSISSubscriptionKeyMetaData.o
  "_OBJC_METACLASS_$_SUPAbstractROEntity", referenced from:
      _OBJC_METACLASS_$_FieldServiceOperationReplay in FieldServiceOperationReplay.o
  "_OBJC_METACLASS_$_SUPDefaultCallbackHandler", referenced from:
      _OBJC_METACLASS_$_CallbackHandler in CallbackHandler.o
  "_OBJC_CLASS_$_SUPEntityDelegate", referenced from:
      objc-class-ref in FieldServiceAssign_ServiceEngineer.o
      objc-class-ref in FieldServiceChangeLogImpl.o
      objc-class-ref in FieldServiceCustomer_Installations.o
      objc-class-ref in FieldServiceCustomer_InstalledBases.o
      objc-class-ref in FieldServiceCustomers.o
      objc-class-ref in FieldServiceImage_Capture.o
      objc-class-ref in FieldServiceImage_Retrieve.o
      ...
  "_OBJC_CLASS_$_SUPQueueConnectionImpl", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_CLASS_$_SUPAbstractLocalEntity", referenced from:
      _OBJC_CLASS_$_FieldServiceOfflineAuthentication in FieldServiceOfflineAuthentication.o
  "_OBJC_CLASS_$_MAKitTheme_WelterWeight", referenced from:
      objc-class-ref in AnalysisViewController.o
      objc-class-ref in DataGridViewController.o
  "_OBJC_CLASS_$_SUPQuery", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
  "_OBJC_METACLASS_$_SUPLocalKeyGenerator", referenced from:
      _OBJC_METACLASS_$_FieldServiceLocalKeyGenerator in FieldServiceLocalKeyGenerator.o
  "_OBJC_CLASS_$_SUPEntityMap", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DBMetaData.o
  "_OBJC_CLASS_$_SUPDatabaseDelegate", referenced from:
      objc-class-ref in FieldServiceCom_igate_Reshma_fieldservice_ALL_v6DB.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:33:34.527

您可能没有正确链接项目中的 SUP 库。

**项目 -> 目标 -> 构建阶段 -> 将二进制文件与库链接**

```
libAfariaSLL.a
libclientrt.a
libDatavault.a
libMO.a
libsupcore.a
libSUPObj.a
libsupUltralite.a 
```

（这些是 SUP 2.1.3 的库，不同的版本可能意味着不同的库）。

还要检查这些库是否在您的搜索路径中（我的 .xcworkspace 的根目录中有这些库）

**项目 -> 目标 -> 构建设置 -> 搜索路径 -> 库搜索路径**

```
"$(SRCROOT)/../libraries/RBS/Libraries/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:20:11.973

问题为我解决了。我所做的是使用 Debug-iPhoneOS 中的 .a 文件创建了一个新项目，并正确进行了代码签名。还根据临时证书详细信息更改了捆绑标识符名称。它对我有用。

# c# - 最小生成树快速图

> ID：14557896
> 
> 赞同：3
> 
> 时间：2013-01-28T08:08:47.447
> 
> 标签：c#, minimum-spanning-tree, quickgraph

我想使用快速图找到下图的最小生成树。我浏览了提供的手册，但我真的不明白该怎么做。这是我的代码：

```
 static void Main(string[] args)
        {

        var g = new UndirectedGraph<int, TaggedUndirectedEdge<int,int>>();

        var e1 = new TaggedUndirectedEdge<int, int>(1, 2, 57);
        var e2 = new TaggedUndirectedEdge<int, int>(1, 4, 65);
        var e3 = new TaggedUndirectedEdge<int, int>(2, 3, 500);
        var e4 = new TaggedUndirectedEdge<int, int>(2, 4, 1);
        var e5 = new TaggedUndirectedEdge<int, int>(3, 4, 78);
        var e6 = new TaggedUndirectedEdge<int, int>(3, 5, 200);

        g.AddVerticesAndEdge(e1);
        g.AddVerticesAndEdge(e2);
        g.AddVerticesAndEdge(e3);
        g.AddVerticesAndEdge(e4);
        g.AddVerticesAndEdge(e5);
        g.AddVerticesAndEdge(e6);

        foreach (var v in g.Edges)
            Console.WriteLine(v);
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:48:03.957

@daryal 打败了我——我的版本是：

```
var mst = g.MinimumSpanningTreePrim(e => e.Tag).ToList(); 
```

![在此处输入图像描述](../Images/df3f28a494c143844b4212bf925a2ea5.png)

*“使用源卢克”* - 我查看了 MinimumSpanningTreeTest.cs，测试 Prim12273

[（您也可以在Lambda's / Delegates](https://stackoverflow.com/questions/2652264/linq-vs-lambda-vs-anonymous-methods-vs-delegates)上查看这个问题，以更好地理解基本函数指针）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:24:09.877

假设`Tag`(last) 参数`TaggedUndirectedEdge`暗示边缘的 edgeWeight，以下可能有效。

```
Func<TEdge, double> edgeWeights = (q) => {
g.Edges.SingleOrDefault(m => q == m).Tag;
}

IEnumerable<TEdge> mst = g.MinimumSpanningTreePrim(g, edgeWeights); 
```

# windows - 我如何在批处理/powershell 中只执行一次语句？

> ID：14557898
> 
> 赞同：0
> 
> 时间：2013-01-28T08:09:00.640
> 
> 标签：windows, powershell, batch-file

我想知道如何在 Windows 批处理文件或 PowerShell 脚本中执行一组语句或命令，以便只执行*一次*。即使我多次运行脚本，那组特定的代码或程序也应该只运行一次。

如果可能，请给出批处理文件和 PowerShell 的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:19:00.477

在这两种情况下，您都需要进行以下更改：(a) 在运行批处理文件或 PowerShell 脚本之后持续存在，并且 (b) 在下次启动时可见。这些变化是什么取决于你想离开系统的混乱程度。

一种选择是环境变量。您可以使用批处理文件`setx`或从 PowerShell 使用`[Environment]::SetEnvironmentVariable`. 您还应该将它们正常设置为在当前会话中使用它们，以确保也不能再次从该会话中调用它。

```
if defined AlreadyRun (
  echo This script ran already
  goto :eof
)
...
setx AlreadyRun 1
set AlreadyRun 1 
```

或者

```
if (Test-Path Env:\AlreadyRun) {
  Write-Host This script ran already
  exit
}
...
[Environment]::SetEnvironmentVariable('AlreadyRun', '1', [EnvironmentVariableTarget]::User)
'1' > Env:\AlreadyRun 
```

但是，这种方法有其缺点。例如，它不会阻止您在脚本第一次运行时都存在的不同进程中运行相同的脚本两次。这是因为环境变量是在进程启动时填充的，因此即使是系统范围的更改也只适用于*新*进程，而不适用于那些已经运行的进程。

另一种选择是您检查是否存在的文件。即使在上述环境变量失败的情况下，这也有利于工作。另一方面，文件可能比环境变量更容易被意外删除。

但是，由于我相信您的批处理文件或 PowerShell 脚本应该*做*一些事情，即有副作用，您可能应该完全使用它作为中止的标准。也就是说，如果副作用以某种方式可见。例如，如果您正在更改某些系统设置或创建一堆输出文件等，您可以检查是否已经进行了更改或文件是否已经存在。

一个可能非常安全的选择是在第一次运行结束时删除或重命名批处理文件/PowerShell 脚本。或者至少将扩展名更改为不容易执行的内容。

# css - 无法在给定样式中设置背景颜色

> ID：14557902
> 
> 赞同：0
> 
> 时间：2013-01-28T08:09:32.093
> 
> 标签：css

我试图在鼠标悬停时更改背景颜色。

我有这个 CSS 代码

```
table.subform{width: 550px}
table.subform tr td{padding: 3px}
table.subform tr td:first-child{text-align: right}
table.subform2{width: 100%}
table.subform2 tr td{padding: 5px;}
table.subform2 tr td:first-child{text-align: right;background-color: #E3E3E3;font-weight: bold;width: 50%;border-bottom: 1px solid #c6c6c6;padding-right: 10px}
table.subform2 tr td:last-child{text-align: left;background-color: #f1f1f1;vertical-align: top}
table.subform2 tr:hover{color: #082;background-color: #FFF} 
```

正如您在最后一行**table.subform2 tr:hover**中看到的那样，当有人鼠标悬停 TR 时，必须更改完整 TR 的背景颜色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:18:04.763

背景没有改变，因为你已经`background-color`在`table.subform2 tr td:first-child`和中定义了`...:last-child`。当您不定义背景颜色或`... tr`仅定义背景颜色时，背景颜色会发生变化。

请参阅[JSFiddle](http://jsfiddle.net/56RyP/1/)，中间列。

将最后一行更改为

```
table.subform2 tr:hover td{color: #082;background-color: #FFF} 
```

这将选择`td`元素并相应地更改背景颜色。

修改后[的 JSFiddle](http://jsfiddle.net/ZrYUJ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:21:05.273

您`background-color`对它的**TD**进行了定义，这就是它不可见的原因。像这样写：

```
table.subform2 tr:hover td{color: #082;background-color: #FFF} 
```

检查这个[http://jsfiddle.net/ZrYUJ/2/](http://jsfiddle.net/ZrYUJ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:19:04.240

编写您的 HTML，因为如果其中有问题，可能是`tr:hover`无法正常工作的原因。并确保浏览器不旧，因为`tr:hover`并非所有地方都支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:20:55.030

你应该写

```
table.subform2 tr:hover td{color: #082;background-color: #FFF} 
```

反而。因为您已经设置了子 td 的背景颜色。

此外 tr:hover 在某些较旧的浏览器中也不起作用。您可以使用 javascript 来解决此问题。

[http://jsfiddle.net/DK5x4/](http://jsfiddle.net/DK5x4/)

# node.js - Nginx 将身份验证传递给 Node js Express 应用程序

> ID：14557904
> 
> 赞同：0
> 
> 时间：2013-01-28T08:09:47.657
> 
> 标签：node.js, nginx, express

我运行一个由 socket.io 大量驱动的 Express js 页面，但我计划设置一个 Nginx 实例（代理节点 js 应用程序）来开发网站的其余部分。

如果用户在 Nginx 中通过身份验证，我如何将凭据传递给 express js 应用程序？我可以共享 cookie 或会话吗？还要考虑在 Redis 中存储数据。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:50:45.900

如果您使用 cookie 来记住身份验证，它们将通过 Nginx 与请求的其余部分一起自动传递给 Node，并带有`proxy_pass`指令。

如果您在谈论基本身份验证（严格来说，用户不是“通过 Nginx 身份验证”但 Nginx 不会在没有正确凭据的情况下为请求提供服务，您可以在使用`proxy_set_header`指令将请求传递给 Node 时设置自定义标头，以告诉 Node 谁是认证。

# c - 非阻塞 FIFO：检测是否存在读卡器？

> ID：14557910
> 
> 赞同：5
> 
> 时间：2013-01-28T08:10:21.270
> 
> 标签：c, nonblocking, fifo

我创建了一个 FIFO，我可以通过这种方式进行非阻塞写入：

```
// others, searching for a non-blocking FIFO-writer may copy this ;-)
mkfifo("/tmp/myfifo", S_IRWXU);
int fifo_fd = open("/tmp/myfifo", O_RDWR);
fcntl(fifo_fd, F_SETFL, fcntl(fifo_fd, F_GETFL) | O_NONBLOCK);

// and then in a loop:
LOGI("Writing into fifo.");
if (write(fifo_fd, data, count) < 0) {
    LOGE("Failed to write into fifo: %s", strerror(errno));
} 
```

非阻塞写入完美。

另一方面，我打开 FIFO 进行读取并执行相同的 fcntl() 以使 read() 非阻塞。

我现在想在写入端进行几次（cpu 密集型）计算，但前提是连接了一个阅读器。

因此，我需要在写入端找到一种方法，以检测 FIFO 是否已打开以供在其他地方读取。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:09:27.120

> 我现在想在写入端进行几次（cpu 密集型）计算，但前提是连接了一个阅读器。

为此，您可以简单地创建一个套接字，当消费者连接到它时，做一些工作并回写。
但我认为更好的解决方案是在消费者连接（或打开 FIFO）之前为消费者准备好计算结果。但是如果工作没有被消耗，你不希望生产者工作。因此，定义 N，您愿意保留以供消费的工作结果的数量，并让生产者（或多个生产者）工作并将结果保存在大小为 N 的队列中，直到它满为止。
您可以使用线程来实现这一点，一个线程监听连接，从队列中弹出并写入消费者，一个或多个生产者线程工作并推送到队列。
或者您可以使用[POSIX 消息队列](http://linux.die.net/man/7/mq_overview)以避免线程头痛。创建一个大小为 N 的队列，独立的生产者（用不同语言编写的多个进程）可以推送到队列直到其满，多个独立的消费者从中弹出。

# javascript - 在使用 javascript 的过程中发出警报对话

> ID：14557911
> 
> 赞同：1
> 
> 时间：2013-01-28T08:10:31.627
> 
> 标签：javascript, dialog, progress-bar

使用**ASP .Net MVC 4.0**、**vs10**、**MSSQL 2008**

我有一个存储过程，它在我的一个页面中执行。执行通常需要 30 到 50 秒。我想显示一个警报对话框，在此过程中将加载 gif 图像。我正在使用 sqlcommand 执行存储过程。该过程在单击“处理”按钮时开始。完成该过程后，页面返回另一个视图。

我对javascript知之甚少，所以请告诉我一个简单的方法。

**编辑：**

是否可以在按钮单击上显示图像并执行其他代码隐藏过程？

**喜欢：**

```
<script type="text/javascript">
    function showImage() {
        document.getElementById('Processing').style.visibility = visible;
    }
</script>

<div id="progessbar">
     <img alt="Processing" src="../../Images/Processing2.gif" id="Processing" style="visibility:hidden"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:27:13.007

`MVC`由于请求需要很长时间，因此很难以传统方式完成您尝试执行的操作。使用异步处理您的请求的 AJAX 可以更好地实现这一点。我还建议使用 jQueryUI 对话框或任何模式来显示进度指示器，甚至是任何自定义 JS。

我个人喜欢[jQuery BlockUI](http://jquery.malsup.com/block/)来为我创建模态，但这只是一种偏好。

```
/** Using a wrapper to show/hide the progress indicator.
    Swap the blockUI with any library or custom JavaScript for displaying the progress indicator.
 */
var showProgress = function() {
    $.blockUI({ message: '<img src="progressImage.gif" />' });
};

var hideProgress = function() {
    $.unblockUI();
;}

/** Trigger to submit the form */
$('#submit').click(function() {
    /** Show an indicator before making an AJAX request*/
    showProgress();
    $.ajax({
        url: '/someEndpoint',
        data: $.toJSON({/* some JSON param */}),
        type: 'POST', 
        dataType: 'json',
        timeout: 50000 /** Override timeout in ms accordingly */

    }).done(function(data){
        /** Remove the indicator once the request has succeeded and process returned data if any. */
        hideProgress();
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:44:28.020

用于`ajax`您的过程。它将为“显示 gif”和完成您想要的代码进行并行处理。您可以通过`JQuery-AJAX`这种方式使用页面方法：[1]：[http ://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

成功回调包含一个带有返回数据的参数。

或者你可以简单地试试这个

```
var actionURL = "(Your disired action e.g /index.jsp)"
$.ajax({
cache:false,
url: actionURL,
beforeSend: function( xhr ) {
    xhr.overrideMimeType( 'text/plain; charset=UTF-8' );
    $("#progessbar").show();
    //Here you can write any code to execute before the action like gif loading etc
},
success: function( data ) {
    alert("Success Conditions");
    //"data" is what u gets from your target. You can see by alert(data); here
    //Here you can write any code which you want to execute on finding the required action successfully
},
complete: function(){
    alert("Complete Conditions");
    $("#progessbar").hide();
    //Here you can write any code which you want to execute on completion of the required action you given in actionURL
},
error: function(){  
    alert("Error Conditions");
}
}); 
```

注意：警报仅用于解释，您也可以编写自己的代码对于此代码，您必须包含`jquery`插件。可以从他们的官方网站[l]下载：http: [//jquery.com/](http://jquery.com/)

# android - 横幅广告未占据全宽

> ID：14557913
> 
> 赞同：0
> 
> 时间：2013-01-28T08:10:43.093
> 
> 标签：android, admob, banner, banner-ads

我可以使用重力类将横幅居中，但我无法拉伸横幅以占据整个宽度。

我也尝试了 smart_banner 应该根据密度填充，但没有成功。

需要帮忙

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.ultimaterellayout);
 // Create the adView

    AdView adView = new AdView(MainActivity.this, AdSize.BANNER, "aaa324dsfdfsd");

    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
    layout.setGravity(Gravity.CENTER_HORIZONTAL);
    layout.addView(adView, layoutParams);
    layout.invalidate();

  // layout.addView(adView);
   adView.loadAd(adRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:48:15.107

尝试将RelativeLayout的宽度设置为fill_parent。

> ```
> RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); 
> ```

# java - 将光标移动到特定单元格并以编程方式按 CTRL+E

> ID：14557916
> 
> 赞同：1
> 
> 时间：2013-01-28T08:11:00.410
> 
> 标签：java, excel, jexcelapi

我正在使用 Java Excel API 以编程方式将数据输入到 Excel 工作表并检索数据。我需要将光标移动到特定单元格，即在该列中选择一个单元格，然后按, 以使用功能`Ctrl+E`填充该列。`Excel Flash Fill`我想知道我该怎么做

# java - 线程中断状态被清除 - 可能的 Java 错误

> ID：14557919
> 
> 赞同：8
> 
> 时间：2013-01-28T08:11:17.127
> 
> 标签：java, multithreading, concurrency, interrupt

这是参考[Path#register](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#register%28java.nio.file.WatchService,%20java.nio.file.WatchEvent.Kind...%29)方法。如果一个线程正在运行一个包含该方法的块并且另一个线程预先中断它。然后发现该方法清除了中断状态。

文档中没有提到它清除线程的中断状态。

复制

```
import java.io.*;
import java.nio.file.*;

import static java.nio.file.LinkOption.*;
import static java.nio.file.StandardWatchEventKinds.*;

import java.nio.file.attribute.*;

public class WatchDir {

    private final WatchService watcher;

    private void register(Path dir) throws IOException {
        // interrupt itself
        Thread.currentThread().interrupt();
        boolean before = Thread.currentThread().isInterrupted();
        WatchKey key = dir.register(watcher, ENTRY_CREATE, ENTRY_DELETE, ENTRY_MODIFY);
        boolean after = Thread.currentThread().isInterrupted();

        if (before) {
            if (!after) {
                System.out.println("--------------------BUG-------------------");
                System.out.format("Interrupt Status: true before making call to Path#register for folder folder: %s\n", dir);
                System.out.format("Interrupt Status: false after making call to Path#register for folder folder: %s\n", dir);
                System.out.println("The interrupt status was cleared by `register` (Unexpected Behavior).");
                System.exit(0);
            } else {
                System.out.println("Not a bug on your machine. The interrupt was not cleared after call to Path#register. Works as expected");
                System.out.println("Works well on your machine. Didn't work for me on Windows and Ubuntu with Java 7");
            }
        }
    }

    /**
     * Creates a WatchService and registers the given directory
     */
    WatchDir(Path dir) throws IOException {
        this.watcher = FileSystems.getDefault().newWatchService();
        register(dir);
    }

    public static void main(String[] args) throws Exception {
        // register directory and process its events
        Path dir = Paths.get(".");
        new WatchDir(dir);
    }
} 
```

上面你可以观察到调用`register`函数后中断状态被清除。样本输出：

```
--------------------BUG-------------------
Interrupt Status: true before making call to Path#register for folder folder: .
Interrupt Status: false after making call to Path#register for folder folder: .
The interrupt status was cleared by `register` (Unexpected Behavior). 
```

出现此问题是因为发现即使在请求关闭后服务仍处于活动状态。有任何想法吗？

编辑：事实证明它只发生在 Windows 和 Linux 中。Mac 的行为符合预期。我的操作系统：Win 7 64 位。JDK 1.7.0_11。还可以在以下位置找到：Ubuntu 14.04 Java 1.7.0_45-b18

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T08:19:37.163

问题可能在于`catch`块：

```
} catch (InterruptedException ex) {
  Logger.getLogger(WatchDir.class.getName()).log(Level.SEVERE, null, ex);
} 
```

尝试添加

```
// Restore the interrupted status
Thread.currentThread().interrupt(); 
```

在`catch`块中。

有关此主题的更多信息，请参阅[“Java 理论与实践：处理 InterruptedException”一文](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T09:47:02.023

一个人的`interrupted`旗帜`Thread`不是一个单独依靠的好领域。您应该同时监视`interrupted`标志并注意中断。

请参阅[The Law of the Sabotaged Doorbell](http://www.javaspecialists.eu/archive/Issue146.html)进行精彩讨论。

一个特别相关的引述来自[这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)（我的重点）：

> **中断**... 如果该线程在调用 Object 类的 wait()、wait(long) 或 wait(long, int) 方法或 join()、join(long)、join( long, int)、sleep(long) 或 sleep(long, int) 方法，则**其中断状态将被清除**并收到 InterruptedException。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-03T07:44:46.233

这很简单......一旦你在同一个线程中引用了中断状态。它会被清除。

如果中断状态是从另一个线程引用的，它不会被清除

# php - 比较两个数组并找出相同元素的数量

> ID：14557920
> 
> 赞同：1
> 
> 时间：2013-01-28T08:11:27.390
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [使用 PHP 在多个数组中查找公共值](https://stackoverflow.com/questions/5299608/find-common-values-in-multiple-arrays-with-php)

我有两个具有相同索引的数组，例如

```
$a=Array
(
    [2013-01-15] => Array
        (
            [0] =>1001 
            [1] => 1002
            [2] => 1003
            [3] => 1004
            [4] => 1005
            [5] => 1006
            [6] => 1007
)
and 
$b=Array
(
    [2013-01-15] => Array
        (
            [0] =>1001 
            [1] => 
            [2] => 1003
            [3] => 
            [4] => 
            [5] => 1007
            [6] => 
) 
```

现在我想比较这些数据并找出有多少相同的元素。在这种情况下，共有三个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:14:42.950

使用 array_intersect

```
$result = array_intersect($a['2013-01-15'], $b['2013-01-15']); 
```

[手册](http://www.php.net/manual/en/function.array-intersect.php)中的示例：

```
$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$result = array_intersect($array1, $array2);
print_r($result);  

Array
(
    [a] => green
    [0] => red
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:13:05.293

你知道PHP[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)函数吗？这可能是您正在寻找的...

> `array array_intersect ( array $array1 , array $array2 [, array $ ... ] )`
> 
> array_intersect() retourne un tableau contenant toutes les valeurs de array1 qui sont présentes dans tous les autres arguments array2, ..., 等等。 Notez que les clés sont préservées。

不过，您将需要一个平面阵列。您可以查看有关如何执行此操作的问题：[如何展平多维数组？](https://stackoverflow.com/questions/1319903/how-to-flatten-a-multidimensional-array)

在您的情况下，只要您的数组始终由数组值组成，并且您需要计算其中的重复项：

```
$a = array( '2012-04' => array( 10, 50, 60, 80 ) );
$b = array( '2012-04' => array( 10, 40, 80 ) );

$count = 0;
foreach ( $a as $key => $array1 ) {
  if ( array_key_exists( $key, $b ) ) {
    $array2 = $b[ $key ];
    $count += count( array_intersect( $array1, $array2 ) );
  }
} 
```

# performance - TimeLimitingCollector Lucene，如何有效使用？

> ID：14557922
> 
> 赞同：1
> 
> 时间：2013-01-28T08:11:32.750
> 
> 标签：performance, lucene

我有一个大约 500M 文档的 Lucene (4.1) 索引。我尝试在其上构建搜索界面，但遇到了一些性能问题。

最初，我使用`MatchAllDocumentsQuery`. 此搜索需要很长时间（大约 10 秒）。我认为这是因为我使用的收集器，它试图找到总点击数`TotalHitCountCollector`。

我希望能够对查询进行时间限制，所以我找到了`TimeLimitingCollector`. 不幸的是，API 文档有点阴暗。它使用了一个没有太多记录的计数器。

有没有人有使用`TimeLimitingCollector`Lucene 4.x 的经验？如果是这样，是否有方法可以估计点击总数？

我阅读了：[https](https://builds.apache.org/job/Lucene-Artifacts-4.x/javadoc/core/org/apache/lucene/search/TimeLimitingCollector.html) ://builds.apache.org/job/Lucene-Artifacts-4.x/javadoc/core/org/apache/lucene/search/TimeLimitingCollector.html和示例，但设置不清楚以及如何将其`Counter`与`numTicks`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:15:36.433

计数器可以是线程安全的，也可以不是线程安全的 - 只需使用静态`Counter.newCounter(boolean threadSafe)`方法来实例化一个适合您的方法。

然后，假设我们允许 10 个刻度并在单独的线程中更新刻度。代码应如下所示：

```
Counter clock = Counter.newCounter(true);
TimeLimitingCollector collector = new TimeLimitingCollector(c, clock, 10);
collector.setBaseline(0);  
new Thread() {
   public void run() {
      clock.addAndGet(1);  // will kill the indexSearcher.search(...) after 10 ticks (10 seconds)
      Thread.sleep(1000);  // try-catch is necessary here, yes
   }
}.start();
indexSearcher.search(query, collector); 
```

但是，我发现上面的内容有点麻烦。Guava 的[TimeLimiter.callWithTimeout(...)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/TimeLimiter.html)看起来更干净，即使它不是 Lucene 原生的。

# ios - 如何限制 UITextField 中的特殊字符（点和下划线除外）？

> ID：14557925
> 
> 赞同：38
> 
> 时间：2013-01-28T08:11:39.237
> 
> 标签：ios, objective-c, uitextfield

如何限制`UITextField`除点和下划线中的特殊字符？

我已经尝试了下面的代码片段，但没有运气：

```
#define ACCEPTABLE_CHARECTERS @" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_."

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
         NSCharacterSet *acceptedInput = [NSCharacterSet characterSetWithCharactersInString:ACCEPTABLE_CHARECTERS];
        if (![[string componentsSeparatedByCharactersInSet:acceptedInput] count] > 1){
            NSLog(@"not allowed");
            return NO;
        }
        else{
            return YES;
        }
} 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-28T09:13:21.157

试试下面给出的代码块，它对我来说很好。

**斯威夫特 3.0**

```
let ACCEPTABLE_CHARACTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_"

func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    let cs = NSCharacterSet(charactersIn: ACCEPTABLE_CHARACTERS).inverted
    let filtered = string.components(separatedBy: cs).joined(separator: "")

    return (string == filtered)
} 
```

**目标 C**

```
#define ACCEPTABLE_CHARACTERS @" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_."

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string  {
      NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:ACCEPTABLE_CHARACTERS] invertedSet];

      NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];

      return [string isEqualToString:filtered];
} 
```

希望它也对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T08:27:30.043

试试这个

```
NSCharacterSet  *set= [NSCharacterSet symbolCharacterSet];
if ([string rangeOfCharacterFromSet:[set invertedSet]].location == NSNotFound) {
    // valid
} else {
    // invalid
} 
```

你可以制作自己的套装

```
NSCharacterSet  *set= [NSCharacterSet characterSetWithCharactersInString:@"<all your symbols you want to ignore>"]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-08T07:10:55.093

**斯威夫特 4**

```
let RISTRICTED_CHARACTERS = "'*=+[]\\|;:'\",<>/?%" 
```

UITextField 委托方法：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn _: NSRange, replacementString string: String) -> Bool {
    let set = CharacterSet(charactersIn: RISTRICTED_CHARACTERS)
    let inverted = set.inverted
    let filtered = string.components(separatedBy: inverted).joined(separator: "")
    return filtered != string
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-16T10:07:32.777

`NSString *Regex = @"[A-Za-z0-9^]*";`

`NSPredicate *TestResult = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", Regex];`

`[TestResult evaluateWithObject:@"YourTestString"];`

最后返回布尔值 true/false

> 在方法

```
+ (BOOL) validateSpecialCharactor: (NSString *) text {
NSString *Regex = @"[A-Za-z0-9^]*";
NSPredicate *TestResult = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", Regex];
return [TestResult evaluateWithObject:text];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-28T21:58:34.493

Swift 2.2 基于[Mrunal 的回答](https://stackoverflow.com/a/14558740/2868955)：

```
let notAllowedCharacters = " ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_.";
func textField(
    textField: UITextField,
    shouldChangeCharactersInRange range: NSRange,
    replacementString string: String)
    -> Bool
{
    let set = NSCharacterSet(charactersInString: notAllowedCharacters);
    let inverted = set.invertedSet;

    let filtered = string
        .componentsSeparatedByCharactersInSet(inverted)
        .joinWithSeparator("");
    return filtered == string;

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-21T06:48:34.513

* * *

> ***斯威夫特 3.1 解决方案***

* * *

```
let ACCEPTABLE_CHARACTERS = " ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_."
    func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        let cs = CharacterSet(charactersIn: ACCEPTABLE_CHARACTERS).inverted
        let filtered: String = (string.components(separatedBy: cs) as NSArray).componentsJoined(by: "")
        return (string == filtered)
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-28T08:19:47.200

这可能会帮助你尝试这个..请让我知道

```
-(BOOL)isHaveSpecialChar:(NSString*)str{
NSString *customStr = @"~`!@#$%^&*()+=-/;:\"\'{}[]<>^?, ";
NSCharacterSet *alphaSet = [NSCharacterSet characterSetWithCharactersInString:customStr];
BOOL isHaveSpecialChar = [[str stringByTrimmingCharactersInSet:alphaSet] isEqualToString:@""];
return !isHaveSpecialChar;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-02T12:50:09.373

```
func  textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    let set = NSCharacterSet(charactersIn: "0123456789")
    let inverted = set.inverted;

    let filtered = string.components(separatedBy: inverted).joined(separator: "")
    return filtered == string; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-04T12:20:13.337

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    let cs = NSCharacterSet.decimalDigits.inverted
    let filtered = string.components(separatedBy: cs).joined(separator: "")
    return (string == filtered)
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-01-28T09:10:56.453

试试这个：

```
NSString *str = @"___asdf.SHiv._.l.asg.  g.g._ASdgASG_.......asfgads.g.   .._____fdgdsfghsdfgh";

    str= [str stringByReplacingOccurrencesOfString:@"." withString:@""];
    str=[str stringByReplacingOccurrencesOfString:@"_" withString:@""];
    str=[str stringByReplacingOccurrencesOfString:@" " withString:@""];
    str=[str stringByTrimmingCharactersInSet:[NSCharacterSet alphanumericCharacterSet]];

    if ([str isEqualToString:@""]) {
        NSLog(@"valid");
    }
    else {
        NSLog(@"invalid");
    } 
```

# ruby-on-rails-3 - 如何有效地查询 rails 3 应用程序？

> ID：14557931
> 
> 赞同：0
> 
> 时间：2013-01-28T08:12:20.187
> 
> 标签：ruby-on-rails-3, activerecord

我有一个搜索表单，可以查询数据库中的一个表，但有很多参数（语言、级别、创建者等）。如果填写了相关字段，则下面的代码有效，但我想将其更改为：

a) 添加更多参数（有几个）；b) 允许字段为空

这是控制器中的代码：

```
@materials = Material.find(:all, :conditions => {:targ_lang => params["targ_lang"],
                                                 :inst_lang => params["inst_lang"],
                                                 :level => params["level"]}) 
```

对此我感到完全陌生，但很多文档都建议我应该使用“where”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:01:56.693

从 Rails 3 开始，您可以使用以下`where()`功能：

```
@materials = Material.where(targ_lang: params["targ_lang"], inst_lang: params["inst_lang"], level: params["level"]) 
```

另外，你可以看看[范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)

这些允许您设置您想要在模型中执行的操作并在控制器中调用它，例如：

```
class Material < ActiveRecord::Base
  scope :active, where(active_state: true)
end 
```

然后在控制器中执行以下操作：

```
@active_materials = Material.active 
```

如果您要加入多个模型并希望让您的控制器不那么混乱，这可能会很有用。

总而言之，就像@RVG 所说，[seachlogic](http://railscasts.com/episodes/176-searchlogic)非常有用，还有其他的，比如[Sphinx](http://pat.github.com/ts/en/)和[Elastic Search](https://github.com/wireframe/elastic_searchable/)。您应该快速查看这些并使用您觉得最舒服的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:09:31.770

如果您在应用程序中使用搜索功能，我建议您使用`SearchLogic`gem

它易于使用且有效..

[搜索逻辑](https://github.com/binarylogic/searchlogic)

[用于搜索逻辑的 RailsCast](http://railscasts.com/episodes/176-searchlogic)

# jquery - jQuery嵌套li，获取ID

> ID：14557932
> 
> 赞同：0
> 
> 时间：2013-01-28T08:12:20.830
> 
> 标签：jquery, html-lists

我在嵌套 li 和获取单击的元素的 ID 时遇到问题。

假设这是我的代码：

```
<ul>
    <li id="folderLink_1">Link 1</li>
    <li id="folderLink_2">Link 2
        <ul>
            <li id="folderLink_3">Link 2.1</li>
            <li id="folderLink_4">Link 2.2</li>
        </ul>
    </li>
<ul> 
```

我也有这个 jQuery：

```
$('[id^=folderLink_]').live('click',function(){
    alert($(this).attr('id'));
}); 
```

当我单击链接 1 时，我只会得到一个提醒我的 ID，folderLink_1。但是，当我点击链接 2.1 时，我不仅得到了 folderLink_3，而且还一个接一个地得到了 folderLink_2。

**我环顾四周，并尝试使用 event.stopPropagation()，但是这也阻止了后续操作的发生，这是需要的。**

这个想法是，文件夹充当图像库文件夹结构。当您单击一个文件夹时，它会将该文件夹的 ID 保存到一个 JS 变量中。当单击其中包含图像的文件夹时，ajax 使用查询字符串中的 ID 检索 URL。

我尝试将 LI 中的文本围绕一个跨度包装，但是我在文本周围有图像，需要以相同的方式操作（如果单击保存 ID）。

我附上了图片以获得更好的帮助。

![第一步：点击红色部分任意位置的菜单项](../Images/8d76b7ad59caf17fa0da6b30a40d5074.png) ![第二步：点击链接时，保存该文件夹的ID，并向右滑动另一个菜单](../Images/3657cf295380aa169817686aadb5ff1c.png) ![第三步：新菜单滑到旧菜单所在的位置，文件夹名称出现在顶部的碳纤维部分](../Images/1c29a79f0fb5765f164ac246e0e425e3.png)

图一（左上角）：点击红色部分任意位置的菜单项

图二（右上）：当链接被点击时，该文件夹的ID被保存，另一个菜单向右滑动

图三（左下）：新菜单滑到旧菜单所在的位置，文件夹名称出现在顶部的碳纤维部分

当新的链接（图三）被点击时，它不仅会在提供的图片之外的区域加载内容，还会记录被点击的LI的ID。

如果有人有任何建议让这个只保存点击的 li 的 ID，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:13:13.707

你有一个错字：

```
alert($(this).attr('id');
------------------------^ Missing end braces. 
```

将其替换为：

```
alert($(this).attr('id')); 
```

* * *

离开这个，您的查询与事件的冒泡有关。当你`li`在另一个内部`li`有相同类型的事件时，就会出现这个问题。

您需要使用这种方式：

```
$(document).on('click', '[id^=folderLink_]', function(e){
    alert($(e.target).attr("id"));
}); 
```

* * *

从您的[jsFiddle](http://jsfiddle.net/UGTJs/)中，添加以下内容：

```
$(document).on('click', '[id^=folderLink_]', function(e){
    alert($(e.target).attr('id'));
    return false;
}); 
```

请参阅更新的[小提琴](http://jsfiddle.net/UGTJs/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:14:59.313

您应该使用已弃用的 ，`on()`并将为您提供实际单击的元素的 ID：`live()``e.target.id`

```
$(document).on('click', '[id^=folderLink_]', function(e){
    if (this===e.target) alert(e.target.id);
}); 
```

[**小提琴**](http://jsfiddle.net/UGTJs/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:17:30.673

这样做就足够了

```
$('[id^=folderLink_]').click(function(e){
    alert($(this).attr('id'));
    e.stopPropagation()
}); 
```

[http://jsfiddle.net/KTWnb/](http://jsfiddle.net/KTWnb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:26:47.200

试试这个：

```
$('[id^=folderLink_]').on('click',function(e){
    e.stopPropagation();
    alert($(this).attr('id'));
}); 
```

`e.stopPropagation()`将防止它在 DOM 树中冒泡。

在这里小提琴：http: [//jsfiddle.net/JYcZS/](http://jsfiddle.net/JYcZS/)

# ruby-on-rails - Rake db：填充错误：未定义的方法 file_changed

> ID：14557938
> 
> 赞同：1
> 
> 时间：2013-01-28T08:12:49.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, carrierwave, rake-task

这是我的 rake 任务文件：

```
namespace  :db do
    desc "fill database with sample data"
    task :populate => :environment do

     puts "populating with sample data"

     make_users

     make_companies

     make_products

     make_images

     make_commits

    end
    end

    def make_users

        100.times do |user|

           User.create!(first_name: Faker::Name.first_name,
                        last_name: Faker::Name.last_name,
                        email: Faker::Internet.email,
                            question_response: "ques"+(user).to_s,
                            device_id: 100,
                            company_name:"somecompany"+(user).to_s)
        end
    end

    def make_companies

         100.times do |company|

               name = Faker::Name.first_name
               rep_name = "example"+(company).to_s
               rep_designation = "example_desig"+(company).to_s
               company_large_logo = "example_lg"+(company).to_s
               company_small_logo ="example_sg"+(company).to_s
               company_social_contacts = "example_csc"+(company).to_s
               company_writeup = "example_wr"+(company).to_s
               website = "exampleCompany"+(company).to_s
               rep_image = "example_image"+(company).to_s
               active = 1
               average = 10

               Company.create!(name: name,
                               rep_name: rep_name,
                               rep_designation: rep_designation,
                               company_social_contacts: company_social_contacts,
                               company_large_logo: company_large_logo,
                               company_small_logo: company_small_logo,
                               company_writeup: company_writeup,
                               website:website,
                               rep_image: rep_image,
                               active:active,
                               average: average)
          end
    end

    def make_products

        companies=Company.all

        100.times do |product|  

            name = Faker::Name.name
                image_url = "some_image_url"+(product+1).to_s
            description = "some_description"+(product+1).to_s
            website = "some_website"+(product+1).to_s
            active = 0
            unlocked_time = "time"+(product+1).to_s
            company_id = companies.sample.id
            #aggregate = product+10

            companies.sample.products.create!(name: name,
                                              image_url: image_url,
                                              description: description,
                                                  website: website,
                                                  active: active,
                                                  unlocked_time: unlocked_time,
                                                  company_id: company_id,
                                                  aggregate: 0)  
        end
    end

    def make_commits
        users = User.all
        products = Product.all

        100.times do |commit|

                user_selected=users.sample
                product_selected=products.sample

                user_selected.commits.create!(product_id: product_selected.id,
                                                                  user_id: user_selected.id,
                                                                  estimate: commit*2,
                                                                  commit: commit+1)
        end
    end

    def make_images

        products = Product.all

        100.times do |image|
                products.sample.images.create!(product_id: products.sample.id,
                                                                           file: "sample_image#{image+1}")
        end
    end 
```

当我运行 rake`db:populate`时，我收到了这个堆栈跟踪错误。我怎样才能解决这个问题？

堆栈跟踪：

```
 populating with sample data
    rake aborted!
    undefined method `file_changed?' for #<Product:0x0000010493e6f8>
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-3.2.11/lib/active_model/attribute_methods.rb:407:in `method_missing'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/attribute_methods.rb:149:in `method_missing'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/carrierwave-0.8.0/lib/carrierwave/mount.rb:249:in `store_previous_model_for_file'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:407:in `_run__4010438894236454661__update__1959316297081505070__callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_update_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:272:in `update'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/persistence.rb:348:in `create_or_update'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `block in create_or_update'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:436:in `_run__4010438894236454661__save__1959316297081505070__callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `create_or_update'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/persistence.rb:84:in `save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/validations.rb:50:in `save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:259:in `block in save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:258:in `save'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/persistence.rb:217:in `block in update_attributes'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/persistence.rb:215:in `update_attributes'
    /Users/test/Launch/launch/app/models/product.rb:61:in `aggregate_more'
    /Users/test/Launch/launch/app/models/commit.rb:30:in `aggregate_commit'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:427:in `_run__2272083058160445442__save__1959316297081505070__callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:264:in `create_or_update'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/persistence.rb:104:in `save!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/validations.rb:56:in `save!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/attribute_methods/dirty.rb:33:in `save!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:264:in `block in save!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:264:in `save!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/has_many_association.rb:14:in `insert_record'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:436:in `block (2 levels) in create_record'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:344:in `add_to_target'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:434:in `block in create_record'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:149:in `block in transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:148:in `transaction'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:433:in `create_record'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_association.rb:123:in `create!'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/associations/collection_proxy.rb:46:in `create!'
    /Users/test/Launch/launch/lib/tasks/sample_data.rake:107:in `block in make_commits'
    /Users/test/Launch/launch/lib/tasks/sample_data.rake:102:in `times'
    /Users/test/Launch/launch/lib/tasks/sample_data.rake:102:in `make_commits'
    /Users/test/Launch/launch/lib/tasks/sample_data.rake:16:in `block (2 levels)
    /Users/test/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
    /Users/test/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in main
    Tasks: TOP => db:populate
    (See full trace by running task with --trace) 
```

我也在使用载波 gem 来上传图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:33:44.920

经过一些调试，我设法通过了这个错误。您需要进行迁移以添加一个字段，该字段由`mount_uploader`. 例如：

```
class Product
  mount_uploader :my_image
end 
```

需要迁移：

add_column :products, :my_image, :string

公平地说，这是在[carrierwave](https://github.com/jnicklas/carrierwave)的自述文件中。希望能帮助到你 ：）

# iphone - 如何以编程方式获取 iPhone 静音设置？

> ID：14557940
> 
> 赞同：1
> 
> 时间：2013-01-28T08:12:58.273
> 
> 标签：iphone, objective-c, ios5, ios6, iphone-5

我的应用想知道 iPhone 当前的静音设置。有没有办法做到这一点？我在谷歌看到了一些解决方案，但它们不适用于我的 iPhone5。任何示例代码或开源解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:29:53.257

据我所知，您无法在应用程序中访问卷 API。这些是私有 api。如果您以任何方式访问这些 API，那么它也倾向于拒绝您的 Apple 申请。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T08:33:04.753

这是您使用公共 api 更改音量的方式：

```
[[MPMusicPlayerController applicationMusicPlayer] setVolume:currentVolume]; 
```

但是要静音它，我认为确实没有公共 API。

# fonts - 通过删除字形缩小 .OTF 字体

> ID：14557944
> 
> 赞同：33
> 
> 时间：2013-01-28T08:13:12.390
> 
> 标签：fonts, font-face, glyph

我不敢相信这个问题没有专门针对 OpenType 字体提出，但有人知道从这些字体中删除字形的方法吗？

我有一个非常大的文件大小（几乎 10MB）的 .OTF，我需要使它更小。原因有两个。

1）我正在尝试为网络嵌入做准备，所以文件越小，客户端就越容易。

2) Font Squirrel（用于轻松准备字体文件）有 2MB 的上传限制 - 我知道有替代方案，但到目前为止还没有成功。为了节省浪费人们的时间，我尝试过的失败的是[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)和[http://www.font2web.com/](http://www.font2web.com/)。CodeAndMore.com 似乎可以工作，但它吐出的字体与我给它的字体完全不同。

请注意，我不是字体专家，所以请轻松回答。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-12-07T11:50:50.087

我用[fontforge 库](https://fontforge.github.io/)编写了一个 Python2 脚本，它执行以下操作：

*   接受源字体
*   接受包含要使用的所有字符的文件。它可以是翻译文件、字符串资产文件、HTML 文件等。
*   输出包含文件中未显示的字符的字体已删除

这是代码：

```
#!/usr/bin/python2
import sys
import fontforge

if len(sys.argv) == 4:
    font = fontforge.open(sys.argv[1])

    with open(sys.argv[2], "r") as f:
        for i in f.read().decode("UTF-8"):
            font.selection[ord(i)] = True

    font.selection.invert()

    for i in font.selection.byGlyphs:
        font.removeGlyph(i)

    font.generate(sys.argv[3])
else:
    print "WARNING: Check the license of the source font\nbefore distributing the output font generated by this script.\nI'm not responsible for any legal issue caused by\ninappropriate use of this script!\n"
    print "Usage: {} [source font] [file with glyphs NOT to be removed] [output]".format(sys.argv[0])
    print "Example: {} /path/to/ukai.ttc chineseTranslation.txt ukaiStripped.ttf".format(sys.argv[0]) 
```

请注意，在某些字体上使用此脚本可能是不合法的。确保签出源字体的许可证。对于因使用此脚本生成的任何字体而引起的任何法律问题，我概不负责。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-05-11T09:58:28.237

FontTools 有一个名为 pyftsubset 的程序可以做到这一点

[https://github.com/behdad/fonttools](https://github.com/behdad/fonttools)

用法是这样的：

```
pyftsubset MyFont.otf --output-file=MyFontStripped.otf --unicodes-file=file-of-codes.txt 
```

其中 file-of-codes.txt 包含以下代码列表：

```
U+09c78
U+09ce5
U+09ce7
U+09ce9
U+09ceb
U+09cec
U+09cf0
U+09cf3
U+09cf4
U+09cf6
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T18:56:37.397

以下最新评论：您可以一次在左侧菜单（语言）中使用 shift 和 command 键一次选择多组。请注意，图像保留了基本拉丁语 (AZ az)。选择集合后，单击字形窗口并全选 (cmd-A)。如果像这种情况有很多，这将需要一些时间。然后 cmd-Delete 删除所有内容。您只需要使用“类别”重复操作即可。然后导出 .otf

![类别选择](../Images/310b051e123437e66413fae58f488434.png) ![语言选择](../Images/2c7a2920af983000ff905e1d90c59785.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T16:38:05.017

10 MB 的 Opentype 字体非常罕见，因为它非常重，所以我认为它是内部特定字体而不是商业字体。要删除字形，您可以在[FontForge](http://fontforge.org)（免费）或任何其他商业字体编辑器中编辑字体，然后重新生成 .otf（也是 .ttf）

要构建 webfonts（我猜你需要 .ttf、.svg、.eot 和 .woff），你可以在本地使用几个免费工具：[sfnt2woff](http://people.mozilla.com/~jkew/woff/woff-code-latest.zip)、[ttf2eot](http://code.google.com/p/ttf2eot/)、[Batik SVG](http://xmlgraphics.apache.org/batik/tools/font-converter.html)和[ttfautohint](http://www.freetype.org/ttfautohint/) ，你可以改进字体在进行转换之前的屏幕。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-27T06:13:57.827

今天遇到这个问题，因为我试图在 CTRL+A 之后保存字体并设置宽度（不要那样做，顺便说一句）。因为我已经在 FontForge 中打开了字体，所以我采用了更直接的 Python 脚本方法。

这假设您打开了预期的字体并使其处于活动状态。它还假设您只想保留前 128 个字符（ASCII 范围）。它选择所有内容，然后使用“less”标志取消选择 0-127 的范围。查看[FontForge Python 脚本指南](https://fontforge.github.io/python.html#selection)，了解更多关于操作选择的不同方式的信息。

文件 > 执行脚本

```
font = fontforge.activeFont()
font.selection.all()
font.selection.select(("ranges","less"),0,127)
font.clear() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-17T08:54:28.933

正如其他人所指出的，您可以使用[fonttools](https://fonttools.readthedocs.io/en/latest/index.html)从字体中删除不需要的字形。

安装很简单`pip`：

```
pip install fonttools 
```

然后，您可以使用`pyftsubset`函数将字体限制为字符子集。例如，如果您只想保留[基本的拉丁](https://en.wikipedia.org/wiki/List_of_Unicode_characters#Basic_Latin)字符（标点符号、数字、字母）：

```
pyftsubset myFont.otf --output-file=mySmallerFont.otf --unicodes=U+0020-007E 
```

也可以同时转换字体：

```
pyftsubset myFont.otf --output-file=mySmallerFont.woff --flavor=woff --unicodes=U+0020-007E 
```

*请注意，如果您需要转换为 woff2，则必须先安装[brotli](https://github.com/google/brotli)，使用`pip install brotli`.*

完整的文档可[在此处](https://fonttools.readthedocs.io/en/latest/subset/index.html)获得。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-04T13:50:45.873

`fonttools`现已被 Google 采用：[https](https://github.com/googlei18n/fonttools) ://github.com/googlei18n/fonttools 。我一直在使用它来减少[Google 的 Noto 字体](https://www.google.com/get/noto/)中用于嵌入式系统的字形数量。工作一种享受！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-21T11:00:06.570

[@remeus 的回答](https://stackoverflow.com/a/66238628/9935654)启发了我，但我不想直接使用[pyftsubset.exe](https://github.com/fonttools/fonttools/blob/ee2aa26/setup.py#L466) ^([fontTools.subset](https://github.com/fonttools/fonttools/blob/1df4f1e/Lib/fontTools/subset/__init__.py#L2986-L3116))；我想使用该脚本，因为我可以轻松地向其中添加一些内容。

## 代码

```
import fontTools.subset
from pathlib import Path
import os

SOURCE_FILE = Path('YOUR.ttf') # ttf, otf, ...
OUT_FORMAT = 'woff' # otf, woff, woff2, ...
TEXT_FILE = Path('YOUR.txt')

def main():
    output_file = Path('temp') / Path(SOURCE_FILE.stem + '.' + OUT_FORMAT)
    output_file.parent.mkdir(parents=True, exist_ok=True)
    args = [SOURCE_FILE,
            f"--output-file={output_file}",
            # f"--text=中英文 abcdefg",
            f"--text-file={TEXT_FILE}",  # 中英文 abcdefg
            # "--unicodes=U+0020-007E",
            f"--flavor={OUT_FORMAT}",
            #  https://github.com/fonttools/fonttools/blob/1df4f1e/Lib/fontTools/subset/__init__.py#L332-L337
            "--verbose=true", # https://github.com/fonttools/fonttools/blob/1df4f1e/Lib/fontTools/subset/__init__.py#L3015
            # "--xml=true",
            "--timing=true",
            ]
    fontTools.subset.main([str(_) for _ in args])
    os.startfile(output_file.parent)

if __name__ == "__main__":
    main() 
```

### 解释

以下是指定所需子集的三种方法

1.  `--text`: 直接写

2.  `--text-file`: 将文本写入文件中（重复也没关系，代码会自动为你删除）（*我推荐这种方式。*）

    例子：

    我的.txt (utf-8)

    ```
    0123456
    abcdefg
    ABCDEFG
    中英文 
    ```

3.  `--unicodes`: 使用 unicode 范围

> 如果您需要转换为 woff2，则必须先使用 pip install brotlicffi 安装[brotli](https://github.com/python-hyper/brotlicffi)。
> 
> 理由：
> 
> *   [haveBrotli](https://github.com/fonttools/fonttools/blob/5fc65d7/Lib/fontTools/ttLib/woff2.py#L21-L29)（它会先尝试导入`brotlicffi`，所以我`pip install brotlicffi`建议不要使用 brotli）
> *   [ImportError("没有名为 brotli 的模块")](https://github.com/fonttools/fonttools/blob/5fc65d7/Lib/fontTools/ttLib/woff2.py#L37-L41)

## 其他问题

下面是间接问题。不想看的可以直接跳过这一段。

这是我的经验，我想在浏览器上使用字体，但出现如下错误

> OTS解析错误：网页字体大小超过30MB

我的字体大小

*   大小：40MB
*   格式：ttf

因此，如果我将格式更改为 Woff 或 Woff2 可能会解决问题。

不过，您可以再次使用 fontTools

> [TTFont(Path()).save(Path())](https://gist.github.com/CarsonSlovoka/c91df3517a4023e3cb5c6c093e27663e#file-fontconverter-py-L8)

当您的文件很大时，它会花费太多时间。

## 包裹

[![字体工具](../Images/912387cf4f888f79ad030339df881565.png)](https://github.com/fonttools/fonttools#what-is-this)

# infragistics - 在infragistics xamdatagrid中，如何在右键单击时选择一行

> ID：14557948
> 
> 赞同：0
> 
> 时间：2013-01-28T08:13:24.727
> 
> 标签：infragistics, xamdatagrid

在 XAML 中，我有这段代码

```
<igDP:FieldLayout.FieldSettings>
    <igDP:FieldSettings AllowRecordFiltering="True" CellClickAction="SelectRecord" AllowEdit="False"/>
</igDP:FieldLayout.FieldSettings> 
```

在这里，CellClickAction 用于左键单击。右键单击是否有一些相应的操作以选择记录。我希望在左键和右键单击时都选择记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T16:51:02.057

为 DataRecordPresenter（DataRecord 的可视元素）创建一个 Style，其中包含一个类似于 MouseRightButtonDown 事件的 EvenSetter，如下所示：

```
<Style TargetType="{x:Type igDP:DataRecordPresenter}">
    <EventSetter Event="MouseRightButtonDown" Handler="DataRecordPresenter_MouseRightButtonDown" />
</Style> 
```

并在其事件处理程序中使用此代码片段：

```
void DataRecordPresenter_MouseRightButtonDown(object sender, MouseButtonEventArgs e)
{
    // Clear previous selcted rows        
    (sender as DataRecordPresenter).Record.IsSelected = true;
} 
```

这里有一个问题：如果您继续右键单击不同行中的行/单元格，它会选择多行。因此，清除任何先前的选择然后它将起作用。

# android - Android SQLiteDatabase 对象 - 在一个实例上使用多个游标

> ID：14557958
> 
> 赞同：0
> 
> 时间：2013-01-28T08:14:24.887
> 
> 标签：android, database, google-play, sqlite

我有一些严重的问题！我的应用程序在 Google Play 中，今天我访问了开发者控制台@Google Play，我看到了两个错误日志——它们都是一样的。

这是堆栈跟踪：

```
 java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/data/pl.snowvision/databases/snow_pilot
    at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:55)
    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1156)
    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
    at pl.snowvision.helpers.Entity.getEntities(Entity.java:139)
    at pl.snowvision.fragments.stations.StationsList.showListByName(StationsList.java:163)
    at pl.snowvision.fragments.stations.StationsList.onCreateView(StationsList.java:140)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4898)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
    at dalvik.system.NativeStart.main(Native Method) 
```

下面我包括在 StationsList.java:163 中调用的方法，这会导致问题：

```
 public static ArrayList<Entity> getEntities(String entityId, String catId, String parentId, Context context, String... orderKeys) {
            ArrayList<Entity> entities = new ArrayList<Entity>();
            DbHelper database = DbHelper.getInstance(context);
            SQLiteDatabase db = database.getReadableDatabase();

            String whereClause = "";
            if(entityId != null)
                whereClause = EntityTable.KEY_ID + " = " + "\"" + entityId + "\"";
            if(catId != null) {
                if(entityId != null)
                    whereClause += " AND ";
                whereClause += EntityTable.KEY_CATEGORYID + " = " + "\"" + catId + "\"";
            }
            if(parentId != null) {
                    if(catId != null || (catId == null && entityId != null))
                        whereClause += " AND ";                 
                whereClause += EntityTable.KEY_PARENTID + " = " + "\"" + parentId + "\"";   
            }
            Cursor eCursor = db.query(EntityTable.TABLE_NAME, null, whereClause, null, null, null, null);
            if(eCursor != null && eCursor.getCount() > 0) {
                while(eCursor.moveToNext()) {
                    String id = eCursor.getString(eCursor.getColumnIndex(EntityTable.KEY_ID));
                    String categoryId = eCursor.getString(eCursor.getColumnIndex(EntityTable.KEY_CATEGORYID));
                    String pId = eCursor.getString(eCursor.getColumnIndex(EntityTable.KEY_PARENTID));
                    Entity tmpEntity;
                    if(orderKeys != null && orderKeys.length > 0)
                        tmpEntity = new Entity(id, categoryId, pId, new String[]{orderKeys[0]});
                    else
                        tmpEntity = new Entity(id, categoryId, pId);
                    Cursor iCursor = db.query(ItemsTable.TABLE_NAME, null, ItemsTable.KEY_PARENTID + "=\"" + id + "\"", null, null, null, null);
                    if(iCursor != null) {
                        while(iCursor.moveToNext()) {
                            String key = iCursor.getString(iCursor.getColumnIndex(ItemsTable.KEY_KEY));
                            String value = iCursor.getString(iCursor.getColumnIndex(ItemsTable.KEY_VALUE));
                            tmpEntity.addPair(key, value);
                        }
                    }
                    iCursor.close();
                    entities.add(tmpEntity);
                }
            }
            eCursor.close();
            return entities;
        } 
```

你有什么想法可能导致这个问题以及如何解决它？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:25:29.883

实际上，通过使用`SQLiteDatabase db = database.getReadableDatabase();`你正在打开一个数据库实例。最后你没有关闭这个实例。因此下次它会给你上面的错误。

要解决此问题，请在退出函数之前关闭数据库。

在您的代码中将以下语句放在前面`return entities;`

```
db.close(); 
```

如果您在其他地方关闭数据库，那么您必须再次打开它才能进一步使用。

# jquery - 当鼠标悬停时，我如何获得一个图像，它会显示一个包含表格的工具提示？

> ID：14557960
> 
> 赞同：0
> 
> 时间：2013-01-28T08:14:35.143
> 
> 标签：jquery, css, tooltip, mouseover

我一直在尝试这样做 1 天零 6 小时（字面意思），我正在拔头发。我已经用谷歌方式尝试了很多，我已经用完了搜索和单词组合，甚至回到了我之前访问过的链接，只是为了检查我是否错过了任何东西。

我需要的是：当有人将鼠标移到图像上时，它会显示一个工具提示。这是我想通的容易的部分。困难的部分是在该工具提示中放置一个表格，以便组织我希望显示的内容。我需要的精确复制品在[http://occultdarkr.enjin.com/](http://occultdarkr.enjin.com/) 我还需要它来跟随鼠标并具有网站中的不透明度。

在工具提示中添加表格时，我尝试了很多方法，但它从不显示表格。它要么关闭工具提示，因此不显示任何内容，要么显示表格的实际代码。真正的痛苦。我尝试使用我在网上找到的 javascript 和 jquery 东西，但没有什么能满足我的需要。

请任何有用的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:36:59.477

有两种方法可以做到这一点，其中一种是您可以使用 jquery 函数实现工具提示，如下所示，

```
$("p").mouseup(function(){
    $(this).append('<span id='sth'><table><tr><td>foo</td><td>bar</td></tr></table></span>');
}).mousedown(function(){
    $("#sth").remove();
}); 
```

下一个，你可以使用一些 jQuery 工具提示插件，比如，

1.  [http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)
2.  [http://craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/)
3.  [http://craigsworks.com/projects/simpletip/](http://craigsworks.com/projects/simpletip/)
4.  [http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html](http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html)
5.  [http://codylindley.com/Javascript/264/jtip-a-jquery-tool-tip](http://codylindley.com/Javascript/264/jtip-a-jquery-tool-tip)
6.  [http://flowplayer.org/tools/tooltip.html](http://flowplayer.org/tools/tooltip.html)
7.  [http://jqueryfordesigners.com/coda-popup-bubbles/](http://jqueryfordesigners.com/coda-popup-bubbles/)
8.  [http://cssglobe.com/post/1695/easyest-tooltip-and-image-preview-using-jquery](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:31:36.763

我会首先尝试将您的表格放在隐藏的 div 中，或者在您想要显示它时使用您的表格数据动态创建 div（绝对位置......），然后在 onmousemove 事件中添加一个函数来更改您的 div位置（使其成为鼠标位置）并且应该这样做

如果您需要更精确的信息，请随时询问我会在需要时编辑我的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:28:37.510

下面是示例代码，您可以根据需要进行修改。

HTML

```
<img class="HelpIcon" src="help.png"  title="<table border='1'><tr><td>1</td><td>First Item</td></tr><tr><td>2</td><td>Second Item</td></tr><tr><td>3</td><td>Third Item</td></tr></table>"  /> 
```

jQuery

```
$(document).ready(function () {
    var txt = "";
    $('.HelpIcon').mouseenter(function () {
        txt = $(this).attr('title');

        $(this).attr('title', '');
        var offset = $(this).offset();
        var $tooltip = $('<div></div>')
        .attr('id', 'HelpDiv')
        .css('margin-left', offset.left)
        .html(txt);

        $(this).after($tooltip);

    });

    $('.HelpIcon').mousemove(function (e) {
        $("#HelpDiv").css('left',e.pageX);
        $("#HelpDiv").css('top',e.pageY); 
    });

    $('.HelpIcon').mouseleave(function () {

        $('#HelpDiv').remove();
        $(this).attr('title', txt);

    });

}); 
```

# php - Yii ajaxform 验证只验证表单的一部分

> ID：14557961
> 
> 赞同：0
> 
> 时间：2013-01-28T08:14:36.360
> 
> 标签：php, ajax, forms, yii

我有一个 Yii 表格，它收集三个模型的数据。我在更改和提交时使用 ajaxvalidation：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'offer-form',
    'enableAjaxValidation'=>true,
    'enableClientValidation'=>true,
    'clientOptions' => array(
        'validateOnChange'=>true,
        'validateOnSubmit'=>true,
    )   
)); ?> 
```

现在的问题是只有前三个输入得到验证，这些输入的代码：

1：

```
<div class="input-bg wide-input">

                    <?php 
                    //fill this field after selecting newspaper
                    echo $form->hiddenField($newspaper, 'id'); ?>
                    <?php echo $form->textField($newspaper, 'name', array('maxlength' => 45, 'placeholder'=>'Krantnaam')); ?>
                    <?php echo $form->error($newspaper, 'name', array('class'=>'error')); ?>
                </div>
                <a class="button gray-button">Aanbieden</a> 
```

2和3：

```
<div class="input-bg linked-input">
                    <?php echo $form->textField($address, 'postalcode', array('maxlength' => 45, 'placeholder'=>'Postcode')) ?>
                    <?php echo $form->error($address, 'postalcode'); ?>
                </div>

                <div class="input-bg linked-input">
                    <?php echo $form->textField($address, 'street_number', array('maxlength' => 45, 'placeholder'=>'Huisnummer')); ?>
                    <?php echo $form->error($address, 'street_number'); ?>
                </div> 
```

这三个输入服务于两个模型，它们是`$newspaper and $address`。现在的情况是，这三个输入已完全验证（在更改和提交时），而其他七个输入未验证，例如未验证的输入之一：

```
 <div class="input-bg linked-input">
            <?php echo $form->textField($offer, 'firstname', array('maxlength' => 45, 'placeholder'=>'Voornaam')); ?>
            <?php echo $form->error($offer, 'firstname'); ?>
        </div> 
```

最后，我将发布我的控制器代码：

```
$this->performAjaxValidation($offer, 'offer-form');
$this->performAjaxValidation($address, 'offer-form');
$this->performAjaxValidation($newspaper, 'offer-form');

if(Yii::app()->getRequest()->getIsAjaxRequest()) {
    echo CActiveForm::validate( array($address));  
    echo CActiveForm::validate( array($offer));
    echo CActiveForm::validate( array($newspaper)); 
    print_r($_POST);
    die();
    //Yii::app()->end(); 
} 
```

如果我提交或更改表单，我会返回 JSON，其中包含未经验证的字段的错误，但它们不会收到错误状态。

我希望有人可以看到错误或其他任何东西。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:10:10.917

一旦发现错误就返回的原因是在验证模型后`performAjaxValidation`调用。`Yii::app()->end()`为了验证几个模型，请使用以下方法

```
protected function performTabularAjaxValidation($models, $form = null) {
    if (Yii::app()->getRequest()->getIsAjaxRequest() && (($form === null) || ($_POST['ajax'] == $form))) {
        echo CActiveForm::validateTabular($models);
        Yii::app()->end();
    }
} 
```

并在您的控制器方法中

```
$this->performTabularAjaxValidation(array($address,$offer,$newspaper),'offer-form'); 
```

# streaming - VLC 中 MJPEG 源的马赛克

> ID：14557963
> 
> 赞同：0
> 
> 时间：2013-01-28T08:14:40.870
> 
> 标签：streaming, vlc, mjpeg

我正在尝试从多个 mjpeg 源设置马赛克流并将其作为另一个 mjpeg 输出。Web 界面中的矩阵向​​导已损坏或不清楚，VLC 网站上的 Mosaic 教程似乎无法帮助完成它。到目前为止，我所拥有的是：

```
new channel1 broadcast enabled                                                       
setup channel1 input "http://192.168.1.100:8080/video"
setup channel1 output #duplicate{dst=mosaic-bridge{id=1,height=144,width=180},select=video,dst=bridge-out{id=1},select=audio}                                                         

new channel2 broadcast enabled
setup channel2 input "http://192.168.1.100:8080/video"
setup channel2 output #duplicate{dst=mosaic-bridge{id=2,height=144,width=180},select=video,dst=bridge-out{id=2},select=audio}                                                         

new channel3 broadcast enabled
setup channel3 input "http://192.168.1.100:8080/video"
setup channel3 output #duplicate{dst=mosaic-bridge{id=3,height=144,width=180},select=video,dst=bridge-out{id=3},select=audio}                                                         

new background broadcast enabled
setup background option image-duration=-1
setup background input flower.png
setup background output #transcode{sfilter=mosaic,vcodec=MJPEG,vb=10000,scale=1}:bridge-in{delay=400,id-offset=100}:standard{access=http,mux=MPJPEG,dst=127.0.0.1:333/mosaic}

control background play
control channel1 play
control channel2 play
control channel3 play 
```

这看起来接近它应该是但不起作用的。有任何想法吗？

非常感谢，伊戈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T07:46:17.653

首先需要指定背景图片的完整路径；然后将行： `setup background input flower.png` 更改为例如： `setup background input /home/yourName/flower.png`

那么您必须知道`--udp-caching`现在不支持该选项；然后省略它。另外我建议您删除`mosaic-keep-picture`选项。我家这个帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:58:29.177

当您的意思是它不起作用时，您的意思是您看不到输出文件中镶嵌的视频吗？就个人而言，当我使用 rtsp 流时它可以工作，但当我使用 http 时无法让它工作。您可以尝试从本地文件（在磁盘上）创建马赛克，以帮助排除任何网络问题。此外，如果您的系统功能不足，您将获得一个没有马赛克视频的视频文件。只尝试一个流来检查这是否是问题所在。最后，如果您的背景图像、视频流和马赛克输出视频分辨率合适，它将有所帮助。

希望这可以帮助。

# c# - 如何在 WPF 中更改滑块的选择颜色

> ID：14557965
> 
> 赞同：5
> 
> 时间：2013-01-28T08:14:46.587
> 
> 标签：c#, wpf, slider, controls, customization

我有一个`slider`. 有没有办法将选择区域的蓝色更改为另一种颜色（例如黑色）

![在此处输入图像描述](../Images/3745540f7ab43af93957225053763132.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-03T14:30:37.683

覆盖系统颜色不适用于自定义模板。

将“IsSelectionRangeEnabled”设置为 true，将“SelectionStart”设置为您的起始值，将“SelectionEnd”设置为您的结束值。如果您希望它是自动的，您可以将“SelectionEnd”绑定到“Value”......

```
<Style x:Key="SliderStyle" TargetType="{x:Type Slider}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Slider}">
                <Grid VerticalAlignment="Center">
                    <Border x:Name="borderBackground" Margin="6,0" Height="4" Background="Gray" />
                    <Canvas Margin="0,-4,0,0" VerticalAlignment="Center">
                        <Border x:Name="PART_SelectionRange" HorizontalAlignment="Left" Height="4" Background="{TemplateBinding Foreground}" />
                    </Canvas>
                    <Track x:Name="PART_Track">
                        <Track.Thumb>
                            <Thumb Width="10" Height="20" />
                        </Track.Thumb>
                    </Track>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="IsSelectionRangeEnabled" Value="True" />
    <Setter Property="SelectionStart" Value="{Binding Minimum, RelativeSource={RelativeSource Self}}" />
    <Setter Property="SelectionEnd" Value="{Binding Value, RelativeSource={RelativeSource Self}}" />
    <Setter Property="Foreground" Value="Red" />
</Style> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T08:27:24.137

您可以覆盖默认值`SystemColors`以更改选择区域的颜色。

```
 <Slider  Margin="0,10,0,0" Width="287" Value="6" IsSelectionRangeEnabled="True"  SelectionEnd="6" >
        <Slider.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Black" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlDarkDarkBrushKey}" Color="Silver" />
        </Slider.Resources>
    </Slider> 
```

结果：

![在此处输入图像描述](../Images/a7fb37f2296e9810885e13074bf270c0.png)

# extjs4.1 - 我需要有关 Ext.draw.engine.ImageExporter 的示例

> ID：14557975
> 
> 赞同：0
> 
> 时间：2013-01-28T08:15:16.287
> 
> 标签：extjs4.1

我想使用 SVG 类型导出 Ext Chart。但我不明白。你能给我一个关于 Ext.draw.engine.ImageExporter (Ext 4.1) 的例子吗

谢谢你帮助阮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:21:32.573

一个使用的工作示例`ImageExporter`：

[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/charts/Area.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/charts/Area.html)

# linux - 在 Linux 上的 perl 中分叉一个新进程

> ID：14557978
> 
> 赞同：0
> 
> 时间：2013-01-28T08:15:58.483
> 
> 标签：linux, perl, fork

我想从 cgi 调用中分叉一个后台进程。这样 httpd 调用立即返回，其余的东西继续运行

在我们迁移到新机器之前，这一直有效

```
............
## Close the http connection so that the remote client returns
close STDOUT;
close STDERR;
POSIX::setsid();
fork() && exit;
do_job();
......... 
```

现在在新机器上，相同的代码永远不会执行 do_job() Perl，httpd 版本相同（有一个小的内核升级）

现在我将代码更改为

```
..........
open(STDOUT,">/dev/null");
open(STDERR,">/dev/null");
POSIX::setsid();
fork() && exit;
do_job();
......... 
```

这有效，但我不知道为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:57:06.730

我不太确定为什么第一个代码会起作用。但是你应该总是把 setid 放在 fork() 之后。请让我知道在你这样做之后它是否不起作用。

每个进程组都在一个唯一的会话中。（当进程创建时，它成为其父会话的成员。）按照惯例，会话的会话 ID 等于会话的第一个成员的进程 ID，称为会话领导者。进程使用系统调用getsid() 查找其会话的ID。

一个新的会话由

```
pid = setsid(); 
```

仅当当前进程不是进程组负责人时才允许这样做。

让我解释一下为什么。假设您是进程组组长或会话组长，您必须了解进程组和会话 id 是从创建它们的进程的进程 id 初始化的（然后领导它们，即会话组长 pid == sid 和进程组长 pid == pgid)。此外，进程组不能在会话之间移动。

这意味着如果您是进程组组长，并且允许创建新会话，则 sid 和 pgid 将设置为您的 pid，从而使旧进程组中的其他进程处于奇怪的状态：他们的进程组组长突然与他们自己可能在不同的会话中。这是不允许的，因此内核返回了 EPERM。

现在如果你 fork() 一旦你既不是会话也不是进程组负责人，因此将你的 sid 和 pgid 设置为你的 pid 是安全的，因为在这样的组中没有其他进程。

以下链接可能会有所帮助：

[会话和进程组](http://www.win.tue.nl/~aeb/linux/lk/lk-10.html)

[Linux 内核：进程](http://www.informit.com/articles/article.aspx?p=397655&seqNum=6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:29:28.287

我建议您使用处理此类工作的外部队列。您可以使用一些 CPAN 模块来获得此功能，如[Queue::DBI](http://search.cpan.org/perldoc?Queue%3a%3aDBI)或其他模块，如[Gearman](http://gearman.org/)

# c# - winforms - 在一个主表单中加载不同的表单

> ID：14557979
> 
> 赞同：-2
> 
> 时间：2013-01-28T08:16:15.783
> 
> 标签：c#, winforms, visual-studio

所以我有一个桌面应用程序，它适用于用户可能需要的许多不同形式。我有一个导航到不同表单的主表单，但现在每个新表单都加载到一个新窗口中。实现仅显示主窗体的功能的最佳方法是什么，该主窗体实际上只是`toolStrip`带有多个菜单并使用其他空间加载其他窗体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:39:59.910

听起来你想要一个 MDI 实现。

你必须设置 mainform.IsMdiContainer = true 和 childForm.MdiParent = mainform

# java - 如何将 JSP 加载到来自 Struts 2 动作的另一个 JSP

> ID：14557984
> 
> 赞同：1
> 
> 时间：2013-01-28T08:16:59.663
> 
> 标签：java, jquery, jsp, struts2, struts2-jquery

我需要加载一个 JSP。控制来自一个动作到一个 JSP。使用 jQuery post 调用该操作。JSP 页面未显示，但 action 的 execute 方法确实被执行。

谁能告诉我为什么？

```
function ftpFetch() {
        $('#connectForm').submit(function() {
        $.post('<s:url action="ftpFetchAction" />', {
            userName : $('#name').val(),
            domainName : $('#domain').val(),
            password : $('#password').val(),
        }, function(data) {
        $("#connectdiv").hide();
        $("#result").html(data);
        }, "html");
    });
} 
```

在`struts.xml`：

```
<action name="ftpFetchAction" class="com.olive.rm.controlPanel.ftp.FtpProgram" >
   <result name="success">/FtpFetch.jsp</result>
   <result name="error">/invaliddir.jsp</result>
</action> 
```

动作被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:12:33.897

看看这个函数它会起作用，我已经纠正了语法错误，它看起来像

```
function ftpFetch() {
  $('#connectForm').submit(function() {
    $.post('<s:url action="ftpFetchAction" />', {
      userName : $('#name').val(),
      domainName : $('#domain').val(),
      password : $('#password').val()
    }, function(data) {
      $("#connectdiv").hide();
      $("#result").html(data);
    });
  });
} 
```

确保在文档处于就绪状态时调用它，以便成功绑定。`decorator`如果请求没有属性并且关闭了现金控制标头，它也很有用。JSP 应该包含呈现给成功回调的片段。

# c# - WEB API 将文件传递给方法

> ID：14557985
> 
> 赞同：2
> 
> 时间：2013-01-28T08:17:05.700
> 
> 标签：c#, amazon-s3, asp.net-web-api

我正在使用名为 Plupload 的第三方上传器，我希望将选定的图像传递给 WebAPI 方法，但我似乎无法弄清楚如何。

在前端我发布一个文件对象

```
uploader.bind('FileUploaded', function (up, file) {

        data = { name: file.name, id: file.id, size: file.size, key: path };

        $.ajax({
            url: sf.getServiceRoot('mysite') + "upload/getS3Client",
            type: "POST",
            data: data,
            beforeSend: sf.setModuleHeaders
        }).done(function (response, status) {
            alert(response);
        }).fail(function (xhr, result, status) {
            alert("error: " + result);
        });
    }); 
```

在后端我收到文件对象，但我不知道如何处理它......

我尝试使用一个 MVC 代码片段，但显然 Web API 不支持 Request.Files[0] 所以我迷路了。这是片段

```
 HttpPostedFileBase file = Request.Files[0];
if (file.ContentLength > 0) // accept the file
{
                string accessKey = "XXXXXXXXXXX";
                string secretKey = "122334XXXXXXXXXX";
                AmazonS3 client;

   using (client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey))
     {
          PutObjectRequest request = new PutObjectRequest();
          request.WithBucketName("mealtik")
         .WithCannedACL(S3CannedACL.PublicRead)
         .WithKey("meals/test.jpg").InputStream = file.InputStream;
        S3Response response = client.PutObject(request);
     }
} 
```

我的方法看起来像这样..它现在在不断变化。

```
public HttpResponseMessage getS3Client(file submitted)
    {
        HttpRequestMessage request = this.Request;

            string accessKey = "xxxx";
            string secretKey = "xxxx";
            AmazonS3 client;
        using (client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey ))
        {
           MemoryStream ms = new MemoryStream();
           PutObjectRequest request = new PutObjectRequest();
           request.WithBucketName("Dev");
           .WithKey("drop/" + submitted.name).InputStream = file.InputStream;
           S3Response response = client.PutObject(request);
        }

        return Request.CreateResponse(HttpStatusCode.OK, "Success");
    } 
```

把它们加起来。我将文件对象传递给我的方法并尝试将其推送到 amazon s3，所述 MVC 方法似乎可以正常工作，但同样不适用于 Web API。

我该怎么做？

# wolfram-mathematica - 从 Maple 转换为 Mathematica

> ID：14557987
> 
> 赞同：0
> 
> 时间：2013-01-28T07:08:28.247
> 
> 标签：wolfram-mathematica, maple, number-theory

抱歉，如果这个问题不适合该网站...我一直在尝试将一些 Maple 代码翻译成 Mathematica。我根本不了解 Maple，但我知道一些 Mathematica。我真的不知道我在做什么，所以我想知道是否有人可以帮助我一点：

```
b:= proc(n, s) local sn, m;
  if n<1 then 1
else sn:= [s[], n]; m:= nops(sn);
     `if` (m*(m-1)/2 = nops (({seq (seq (sn[i]-sn[j], 
          j=i+1..m), i=1..m-1)})), b(n-1, sn), 0) +b(n-1, s)
  fi
end:

a:= proc(n) a(n):= b(n-1, [n]) +`if` (n=0, -1, a(n-1)) end:

seq(a(n), n=1..30); 
```

我想我什么都懂，除了

```
sn:= [s[], n]; 
```

但我不确定。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:33:52.687

索引调用返回如果是列表或集合`s[]`的条目序列。`s``s`

对于`s`list 类型（特别是），调用的`s[]`行为类似于 call `op(s)`。（请注意，这种行为相似性适用于列表、集合和序列。但并非所有类型都适用。）

```
L:=[2,4,7]:

L[];

                        2, 4, 7
op(L);

                        2, 4, 7

[L[], 5];

                      [2, 4, 7, 5] 
```

所以`[s[], n]`需要列表`s`并创建一个新列表。分配给 的新列表`sn`包含 list 的条目，`s`后跟`n`。

# java - 自动装箱性能

> ID：14557989
> 
> 赞同：5
> 
> 时间：2013-01-28T08:17:29.030
> 
> 标签：java, performance, garbage-collection, autoboxing

为什么组`j=k*l`和`m=n*o`有不同的表现，而前3组有相同的？

```
int a = 42;
int b = 42;
int c = 42;

Integer d = 42;
int e = 42;
int f = 42;

int g = 42;
Integer h = 42;
int i = 42;

int j = 42;
int k = 42;
Integer l = 42;

Integer m = 42;
Integer n = 42;
Integer o = 42;

for(int z = 0; z < 1000000000; z++){
    // c = a*b; // 630 ms
    // f = d*e; // 630 ms
    // i = g*h; // 630 ms
    // l = j*k; // 6000 ms
    // o = m*n; // 6400 ms
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T08:27:27.167

你有一个没有做任何有用的循环。因此，JIT 可能需要一些时间来检测这一点并消除循环。在前四个示例中，代码取时钟周期的一小部分的平均值。这是一个强有力的暗示，表明循环已被优化掉，您实际上正在测量检测和替换循环需要多长时间，

在后面的示例中，循环没有被优化掉，因为 JIT 没有消除循环中的某些内容。我怀疑这是对象分配，`Integer`但`-verbosegc`显示没有创建对象。

在我的机器上，循环大约需要 1.9 ns 或大约 6 个时钟周期，这非常快，所以我不确定还剩下什么需要这么多时间..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T08:21:00.447

在一个循环中创建一个新对象总是有代价的。在最后两个示例中，您在循环中创建了新的 Integer 对象，这具有很高的性能成本。基元存储在堆栈中，对象存储在堆中。将某些东西放入堆栈比放入堆中便宜。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T08:32:36.370

基本上这就是 JVM 内部发生的事情，这会导致性能问题。

```
c = a*b; // 630  ms -> No boxing and unboxing
f = d*e; // 630  ms -> Unboxing d
i = g*h; // 630  ms -> Unboxing h
l = j*k; // 6000 ms -> Creates a new Integer object L, and assign J * K to L
o = m*n; // 6400 ms -> Creates a new Integer object 0, unbox m and n for calculation and assign m * n to o 
```

***换句话说***

l = j*k；// 6000 ms 相当于下面的代码

```
temp = j*k;
Integer l = new Integer(temp); 
```

o = m*n; // 6400 ms 相当于下面的代码

```
temp = j.intValue() * k.intValue();
Integer l = new Integer(temp); 
```

您的最后两个语句将围绕`1000000000`（循环计数）不必要`Integer`的对象创建。这显然是一个性能障碍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T08:24:43.617

1.  整数自动框有一个小[缓存](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28int%29)
2.  创建一个对象会花费大量时间

检查这个：java.lang.Integer.IntegerCache

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T08:22:38.743

可能是因为`l = j * k`需要将 int 装箱为 Integer，`c = a * b`而不需要。VM 还可以优化循环，理解执行一次迭代将导致与执行 10 亿次相同的结果。当心简单的微基准。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T08:23:05.693

```
m = n*o  ==> Integer = Integer * Integer 
```

尽管：

```
l = j*k ==> Integer = int * int // Integer is an object so autoboxing costs some performance here. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T08:27:07.833

创建对象有开销（或者，从其他评论看来，可能是在创建对象时，循环无法优化，因为它内部没有做任何事情）。

`int = int * int`

不涉及对象。

`int = Integer * int`或者`int = int * Integer`

Integer 的 int 成员与 int 相乘，不需要创建任何对象。

`Integer = int * int`

需要从结果中创建一个 Integer 对象（慢）。

`Integer = Integer * Integer`

两个 Integer 的 int 成员相乘，但随后需要从结果中创建一个 Integer 对象（慢）。

# proxy - 通过公司防火墙代理

> ID：14557992
> 
> 赞同：0
> 
> 时间：2013-01-28T08:17:37.390
> 
> 标签：proxy, firewall, mod-proxy, tunnel, corporate

我试图让一些协议通过我公司的防火墙工作。到目前为止，通过在本地主机上设置一个 http 代理并在我拥有的远程服务器上设置一个代理，我已经成功地屏蔽了 http 或 https 数据。通信是通过 $_POSTed 完成的，并接收到包含标头和加密的序列化请求数组的修改过的 .bmp 文件。这很好用，但有一些缺点让我觉得我可能采取了错误的方法。首先，我不使用 apache 的 mod-proxy。相反，我只是创建了一个本地子域（proxy.localhost）并在浏览器的代理设置中使用它。子域的 index.php 完成所有工作。这会产生一些问题。我不能同时使用 http 和 https，否则服务器会抱怨使用“启用 https 的端口上的 http”或“incoresc ssl 响应长度”。

第二个问题是其他协议。我可以使用一些 ftp、sftp、远程桌面、ssh、nust 命名另一个...我需要它

我可以想到 2 个解决方案：首先是如果我在 CLI 中运行一个 php 脚本，以便它侦听预定义的端口并以不同的方式处理请求，或者某种 ssh 隧道。问题是由于我的无知，我在 freeSSHd 和 putty 方面没有取得任何成功。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:30:56.757

我使用了免费版本的 bitvise SSH 客户端和服务器，它似乎工作得很好。

# c# - 在 Visual Studio 2010 64 位中构建时的 C# 应用程序无法正常工作

> ID：14557993
> 
> 赞同：5
> 
> 时间：2013-01-28T08:17:46.303
> 
> 标签：c#, visual-studio-2010, build

我正在开发一个关于设备模拟器的项目。如果有人使用它并选择要模拟的设备，则另一个应用程序（Net Viewer）必须能够检测到正在模拟的设备以及使用它的机器的 IP 地址。

这是我的问题。我使用的是 64 位操作系统，而我的另一个队友使用的是 32 位操作系统。当我尝试在我的 PC 上构建项目并运行它时，Net Viewer 无法检测到我的 IP 地址。但是当我的队友构建项目并在他的 PC 上运行它时，它运行良好。然后，我们尝试在我的 PC 上运行他构建的项目，它运行良好。

是什么导致了这个问题？我们都在构建配置上使用 anyCPU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:10:12.513

事实证明，警报处理程序给我们带来了痛苦。我的队友解决了这个问题。我会尽快发布导致问题的代码片段。

感谢所有分享他们想法的人。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T14:00:16.537

也许将其强制为 x86 而不是任何 cpu。这样，您的应用程序将在 32 位上运行良好，并将在您的 64 位操作系统上运行在 WOW64 中。

您还可以使用 corflags.exe 强制应用程序以 32 位模式运行：http: [//msdn.microsoft.com/en-us/library/ms164699%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms164699%28v=VS.80%29.aspx)

如果这没有帮助，您需要提供更多详细信息。

# magento - Magento 和 Paypal 中的“PayPal 网关已拒绝请求”

> ID：14557994
> 
> 赞同：0
> 
> 时间：2013-01-28T08:17:46.937
> 
> 标签：magento, paypal

> PayPal 网关已拒绝请求。交易 ID 无效（#10004：交易因参数无效而被拒绝。有关详细信息，请参阅其他错误消息）。

这个错误突然出现了。它过去工作得很好。尝试在 Magento 后端为订单开票时发生此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:58:45.753

这可能是由于货币错误。

请检查： [https ://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_errorcodes](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_errorcodes)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T11:52:49.790

今天早上 PayPal 出现问题。现在应该一切都恢复正常了（我们的商店是）[https://www.x.com/content/resolved-major-impact-express-checkout-paypal-apis-virtual-terminal-and-website-payments-pro](https://www.x.com/content/resolved-major-impact-express-checkout-paypal-apis-virtual-terminal-and-website-payments-pro)

# php - 无法设置时区

> ID：14557997
> 
> 赞同：0
> 
> 时间：2013-01-28T08:17:51.713
> 
> 标签：php, timezone

我无法为我的 DateTime 对象设置时区。
这是我的代码：

```
$dt = DateTime::createFromFormat('U',time(),new DateTimeZone('Asia/Kolkata'));
print_r($dt->getTimeZone()); 
```

这是输出：

```
DateTimeZone Object
(
) 
```

我还尝试将这些行放在顶部（一次一个） - 没有任何成功：

```
date_default_timezone_set('Asia/Calcutta');
ini_set('date.timezone', 'Asia/Calcutta');
date_default_timezone_set('Asia/Kolkata');
ini_set('date.timezone', 'Asia/Kolkata'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T08:26:34.300

这是因为您在参数中指定了 UNIX 时间戳。看看[php 手册](http://bd1.php.net/manual/en/datetime.createfromformat.php)是怎么说的。

> **当 time 参数包含 UNIX 时间戳（例如 946684800）或指定时区（例如 2010-01-28T15:00:00+02:00）**时，将忽略 timezone 参数和当前时区。****

 **您尝试做的事情可以通过以下方式轻松完成，

```
$dt = new DateTime("now", new DateTimeZone('Asia/Kolkata')); 
```

如果您有一个包含 UNIX 时间戳的变量，请首先使用它创建一个 DateTime 对象。然后设置新的时区。

```
$dt = new DateTime("@$timestamp");
$dt->setTimezone( new DateTimeZone('Asia/Kolkata')); 
```

[http://codepad.viper-7.com/topBCR](http://codepad.viper-7.com/topBCR)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:34:59.173

试试这个

```
<?php

$dateTimeZoneAsia = new DateTimeZone("Asia/Kolkata");
$dateTimeAsia = new DateTime("now", $dateTimeZoneAsia);
$timeOffset = $dateTimeZoneAsia->getOffset($dateTimeAsia);
var_dump($timeOffset);
?> 
```**