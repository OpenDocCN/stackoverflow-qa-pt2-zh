# StackOverflow 问答 13987000-13987999

# android - 监听特殊端口 Data Sms Android 不稳定

> ID：13987001
> 
> 赞同：0
> 
> 时间：2012-12-21T08:56:50.143
> 
> 标签：android, broadcastreceiver

我有一个从电信接收数据短信的应用程序。在我的代码中，我在 Activity 中注册了动态 Broadcastreceiver。它工作正常，但有时我丢失了一些短信，我不知道为什么。这是我的代码

```
 IntentFilter mFilter = new IntentFilter(
        "android.intent.action.DATA_SMS_RECEIVED");
 mFilter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY);
 mFilter.addDataAuthority("localhost", "my port");
 mFilter.addDataScheme("sms");
 if (smsReceiver == null)
     smsReceiver = new SmsReceiverBroadcast(); 
 context.registerReceiver(smsReceiver, intentFilter); 
```

在将广播注册到活动后，我等待 60 秒

```
long time = 0;
int delay = 200;
while (!Variable.getMessage && !finish
        && !Util.isTimeout(time, Timer)) {
    Util.sleep(delay);
    time += delay;
} 
```

还有我的广播接收器：

```
 Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String str = "";
    if (bundle != null && bundle.containsKey("pdus")) {

    Object[] pdus = (Object[]) bundle.get("pdus");
    if (pdus != null) {
        String pduString = toHexString((byte[]) pdus[0]);

        LogParams.pdu = (byte[]) pdus[0];
        msgs = new SmsMessage[pdus.length];
        for (int i = 0; i < msgs.length; i++) {
        msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

        if (msgs[i].getMessageBody() != null) {
            str += msgs[i].getMessageBody().toString();
            Variable.isReadPdu = true;          

        } else {
            PduParser pduparser = new PduParser();
            Pdu pdu = pduparser.parsePdu(pduString);
            str += pdu.getDecodedText();
            Variable.isReadPdu = true;             

        } 
```

我的代码有什么问题？

# javascript - 是否可以使用 location.href="" 打开一个新窗口？

> ID：13987005
> 
> 赞同：-1
> 
> 时间：2012-12-21T08:57:23.523
> 
> 标签：javascript

> **可能重复：**
> [打开和关闭 javascript 窗口](https://stackoverflow.com/questions/11540085/open-and-close-javascript-window)

是否可以使用打开一个新窗口`location.href=""`？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:02:48.823

不可以，设置窗口位置只能用于在同一窗口中加载新页面。

要打开一个新窗口，您可以使用`open`带有目标的方法`_blank`：

```
window.open('http://www.guffa.com', '_blank'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:02:55.580

要打开新的浏览器窗口，请使用 window.open() 方法。例如，以下代码在新窗口中打开此页面。

```
myRef = window.open(''+self.location,'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); 
```

[http://www.javascripter.net/faq/openinga.htm](http://www.javascripter.net/faq/openinga.htm)

# javascript - 旋转间隔

> ID：13987008
> 
> 赞同：1
> 
> 时间：2012-12-21T08:57:47.587
> 
> 标签：javascript, jquery, rotation, transform

> **可能重复：**
> [悬停时的连续 CSS 旋转动画，悬停时动画回到 0 度](https://stackoverflow.com/questions/7988962/continuous-css-rotation-animation-on-hover-animated-back-to-0deg-on-hover-out)

我想要一个不断旋转的正方形。我有这个代码：

```
var gearBig = $('.gear-big');

gearBig.css({
    'transform': 'rotate(42deg)',
    '-moz-transform': 'rotate(42deg)',
    '-o-transform': 'rotate(42deg)',
    '-webkit-transform': 'rotate(42deg)'
}); 
```

如何在此代码中放置一个间隔？那个gearBig一直在旋转？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:59:02.457

你可以使用像[JQuery Rotate这样的插件](http://code.google.com/p/jqueryrotate/wiki/Examples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:02:27.800

```
var deg = 0;

setInterval(rotate_my_big_ass_gear, 100);

function rotate_my_big_ass_gear() {
    $('.gear-big').css({
        'transform': 'rotate(' + (deg++) + 'deg)',
        '-moz-transform': 'rotate(' + (deg++) + 'deg)',
        '-o-transform': 'rotate(' + (deg++) + 'deg)',
        '-webkit-transform': 'rotate(' + (deg++) + 'deg)' //adds 4 on each iteration
    });
}​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/dQEJV/)

# css - 指南针样式（红宝石）编码错误

> ID：13987010
> 
> 赞同：0
> 
> 时间：2012-12-21T08:57:54.503
> 
> 标签：css, ruby, sass, compass-sass

我刚刚更新了 Ruby，现在尝试启动指南针时出现以下错误：

```
Encoding::CompatibilityError on line ["28"] of /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/to_css.rb: incompatible character encodings: ASCII-8BIT and UTF-8 
```

那里有什么问题？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:42:26.487

好的，我可以修复它添加

```
encoding = "utf-8" 
```

到“config.rb”文件

# jquery - 同时从左右滑动元素？

> ID：13987011
> 
> 赞同：1
> 
> 时间：2012-12-21T08:57:53.957
> 
> 标签：jquery

我试图让两个元素 .show 只需单击一下即可滑入。我希望第一个元素（img）从左侧滑入，另一个元素（div）在单击按钮（div）时从右侧滑入。然后，当单击另一个按钮时，我希望前两个元素消失，接下来的两个元素（对应于单击的按钮）滑入。

有谁知道我怎么能做到这一点？我对 JQuery 很陌生。这就是我为html所拥有的。

```
<div id="button1">Button1</div>
<div id="button2">Button2</div>
<div id="button3">Button3</div>

<div id="container">
<img id="slideleft1" src="img.png">
<div id="slideright1">I need this div to slide in from the right.</div>
</div>

    <div id="container">
<img id="slideleft2" src="img.png">
<div id="slideright2">I need this div to slide in from the right.</div>
</div>

    <div id="container">
<img id="slideleft3" src="img.png">
<div id="slideright3">I need this div to slide in from the right.</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:20:27.110

```
var $container = $( '#container' );
var $left = $( '#slideleft', $container ); // handle to the image
var $right = $( '#slideright', $container ); // handle to the div

// apply some styles to the container (could also be done with pure css)
$container.css( {
    'position'      : 'relative', // to use absolute positions inside
    'left'          : '0px',
    'top'           : '0px'
} );

// positionate the image outside from the container and hide it
$left.css( {
    'postion'       : 'absolute',
    'left'          : (-$left.width()) + 'px',
    'opacity'       : '0'
} );

// positionate the div outside from the container and hide it
$right.css( {
    'postion'       : 'absolute',
    'right'          : (-$right.width()) + 'px',
    'opacity'       : '0'
} );

// will be executed when the event "slideIn" is triggered to your container element
$( '#container' ).on( 'slideIn', function() {

    var $container = $( this );
    var $left = $( '#slideleft', $container ); // handle to the image
    var $right = $( '#slideright', $container ); // handle to the div

    // slide and fade in the left image
    $left.animate( {
        'left'      : '0px',
        'opacity'   : '1'
    } );

    // slide and fade in the right div
    $right.animate( {
        'right'      : '0px',
        'opacity'   : '1'
    } );

} ); 
```

要触发事件，您可以在 html 中编写类似的内容

```
<a onclick="$('#container').trigger('slideIn');">click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:26:07.477

如果我是对的，这应该可以解决您的问题：

```
$('#slideleft').animate({
    marginLeft: '50px'
  }, 1000, function() {
    // Animation complete.
});
$('#slideright').animate({
    marginRight: '200px'
  }, 1000, function() {
    // Animation complete.
}); 
```

[**​在此处**](http://jsfiddle.net/arvind07/be3qc/)查看演示。

这不是确切的解决方案，您可以根据需要对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:26:47.980

除了 bukfixart 答案之外，您可能还希望涵盖有人快速单击应该触发动画的任何内容的情况。

CSS：

```
#container{position:relative; background:silver; height:400px;}
#slideleft{ background:red; width:100px; height:100px; position:absolute;}
#sliderig 
```

ht { 背景：蓝色 ; 宽度：100 像素；高度：100px；位置：绝对；右：0}​</p>

JS：

```
var shown = true;
$('body').click(function() {
    if(!$("#slideleft").is(':animated')) {
        if (shown) {        
          $('#slideleft').animate({
              left:"-100px"
          }, 500, function() {
              shown = !shown;
          });
          $('#slideright').animate({
              right:"-100px"
          }, 500, function() {
          });
        } else {
          $('#slideleft').animate({
              left:"0px"
          }, 500, function() {
              shown = !shown;
          });
          $('#slideright').animate({
              right:"0px"
          }, 500, function() {
          });
        }
    }
}); 
```

​</p>

在这里，有一个小提琴：http: [//jsfiddle.net/Rm4zy/](http://jsfiddle.net/Rm4zy/)

# windows - 在没有 MASM 的情况下使用 MinGW64 构建 Boost

> ID：13987018
> 
> 赞同：3
> 
> 时间：2012-12-21T08:58:24.373
> 
> 标签：windows, boost, mingw, masm

我尝试使用 MinGW64 编译器为本地 64 位构建 Boost 库，但遇到了一些失败。任何指针表示赞赏。谢谢。

我得到了 64 位编译的 bjam.exe (b2.exe)（带有警告），我用它来构建 Boost。构建 Boost.Context 时出现以下错误。（我为可重复构建批量编写了命令）。我错过了什么？

*   命令：b2.exe install --prefix=%~dp0\bld\Boost.Build
*   错误：“ml64”未被识别为内部或外部命令、可运行程序或批处理文件。

我阅读了文档，它说：

Boost.Context 必须针对特定的编译器和 CPU 架构构建。Boost.Context 包含汇编代码，因此，支持的 POSIX 系统需要 GNU AS，Windows 系统需要 MASM。

那么，是否可以告诉 bjam 使用我的 MinGW 安装中包含的 as.exe？（因为我有多个 MinGW，所以位置不是标准的 C:\MinGW\bin）

**项目-config.jam**

```
import option ;
using gcc ; 
option.set keep-going : false ; 
```

**平台**

*   视窗 7 x64
*   Boost 1.52.0（来自 sourceforge）
*   MinGW 4.7.2 (rubenvb x64)
*   没有安装 MSVC（我的机器上没有安装/找到 ml64.exe）
*   **安装 WDK 时出现编辑**问题

**构建 BJam 时**的警告，我认为可以忽略

```
function.c: In function 'check_alignment':
function.c:222:5: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast] 
```

**整批**

```
SET OPATH=%PATH%
SET BOOST_VER=boost_1_52_0
SET "PATH_ZIP=C:\Program Files\7-zip"
SET "PATH_MINGW=C:\MinGW\rubenvb-4.7.2-64"
SET "PATH_SRC=%~dp0\%BOOST_VER%"
SET "PATH_BJAM=%PATH_SRC%\tools\build\v2\engine"

TITLE Extracting Packages ...
IF NOT EXIST "%PATH_SRC%.7z" GOTO :err_nozip
RD /S /Q "%PATH_SRC%"
"%PATH_ZIP%"\7z x "%PATH_SRC%.7z"

TITLE Building BJam ...
PUSHD "%PATH_BJAM%"
SET "PATH=%PATH_MINGW%\bin"
SET "BOOST_JAM_TOOLSET_ROOT=%PATH_MINGW%\"
CALL build.bat mingw --show-locate-target
SET PATH=%OPATH%
COPY "bin.ntx86_64\b2.exe" "%PATH_SRC%\" > nul
COPY "bin.ntx86_64\bjam.exe" "%PATH_SRC%\" > nul
POPD

TITLE Installing Boost Build...
PUSHD "%PATH_SRC%"
ECHO import option ; > project-config.jam
ECHO. >> project-config.jam
ECHO using gcc ; >> project-config.jam
ECHO. >> project-config.jam
ECHO option.set keep-going : false ; >> project-config.jam
ECHO. >> project-config.jam
b2.exe install --prefix=%~dp0\bld\Boost.Build
POPD

SET PATH=%OPATH% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T16:12:51.960

This is a known issue for building Boost >~1.51 with MinGW. At the moment, building Boost with MinGW is broken because Boost has a dependency on MASM (in your case ml64) when building Boost::Context for Windows, even with MinGW.

As a bodge you can get MASM from the Microsoft Website: [http://www.microsoft.com/en-gb/download/details.aspx?id=12654](http://www.microsoft.com/en-gb/download/details.aspx?id=12654) for a 32-bit version, or else the Windows Driver Kit for the 64-bit version: [http://msdn.microsoft.com/en-us/windows/hardware/hh852365.aspx](http://msdn.microsoft.com/en-us/windows/hardware/hh852365.aspx)

You can use the patch provided on the Boost bug tracker here: [https://svn.boost.org/trac/boost/ticket/7262](https://svn.boost.org/trac/boost/ticket/7262) though to make Boost::Context compile with just MinGW, thus re-enabling cross-compilation of Boost. You can also read the responses by Boost's Olli on the subject and his response to the subject. Don't expect anything to be fixed in Boost for a while at least!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T20:39:34.547

为了谷歌的利益，在这里发布这个答案，因为我整天都在努力解决这个问题，终于找到了解决方案。

如果使用 MASM 6 构建，Boost 上下文将无法在 MinGW 下链接，因为它会生成 EXPORT 符号。

这表明`undefined reference to `make_fcontext'`即使库已正确链接。

结果库上的 Objdump 给出了`make_i386_ms_pe_masm.o: File format not recognized`.

**解决方案是确保您使用的是 MASM 8。**

您可以在[http://www.microsoft.com/en-us/download/confirmation.aspx?id=12654](http://www.microsoft.com/en-us/download/confirmation.aspx?id=12654)下载它- 安装程序会抱怨需要安装 VC，但您可以通过提取内容绕过它使用 WinRAR 等工具的安装程序；提取 setup.exe 并再次提取以获得 .cab，第三次提取并将生成的二进制文件重命名为 ml.exe。

然后用`bjam --toolset=gcc --with-context -a stage`.

希望有人在谷歌上搜索我整天搜索的相同术语会发现这很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:38:47.080

根据[Boost 的要求](http://www.boost.org/doc/libs/1_53_0/libs/context/doc/html/context/requirements.html)，可以在微软的 Windows Driver Kit (WDK) 中找到 MASM64。

[我从Microsoft 下载中心](http://www.microsoft.com/en-us/download/details.aspx?id=11800)下载了 WDK 7 ，安装后，我`ml64.exe`在`bin\x86\amd64`. 这样，我就能够成功编译 Boost 1.53.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T04:16:24.883

（如果这仍然相关）当您的构建文件夹中遗留有 msvc 工件时，就会发生这种情况。我假设您的 project-config.jam 最初是

```
import option ;
using msvc ; 
```

并且您已经为 msvc 构建然后更改为“使用 gcc”在这种情况下，您需要先发出以下命令

```
bjam --clean 
```

这应该从 msvc build 中清除工件，然后您可以发出并且事情应该没问题

```
bjam toolset=gcc variant=..... and so on and on 
```

顺便说一句，我看到你写的是 Windows 7 x64。您的 bjam 命令需要具有 adress-model=64 否则将生成 32 位二进制文​​件...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-25T07:59:05.860

可能有点晚了，但我设法在 Windows 7 上使用 MinGW 和 WDK 7 编译了 boost-modular（Git 存储库，因此应该类似于 2014 年 7 月的 1.55）。

我使用的步骤是

1.  使用 mingw-get-setup（简单方法）安装 MinGW 和 Msys（bash 等），将 bin/ 添加到路径
2.  安装 Windows 驱动程序工具包（对于 W7，我使用了 WDK 7）—— GRMWDK_EN_7600_1.ISO
    下载 ISO 映像并使用 WinRAR 提取文件对我有用
    ，安装程序建议不要安装 DSF，所以跳过那个
3.  将 ML64.exe 和 ML.exe 的目录添加到路径（都需要 AFAIK）
    C:\Windows\WinDDK\7600.16385.1\bin\x86\amd64;C:\Windows\WinDDK\7600.16385.1\bin\x86
4.  以管理员身份打开 cmd.exe 并启动 bash
5.  在 boost 的父目录中，运行
    git clone --recursive [https://github.com/boostorg/boost.git](https://github.com/boostorg/boost.git) boost > clone.log
6.  退出 bash，转到目录 boost 并运行：bootstrap gcc
7.  如果完成没有问题（如果找到 ML64.exe），运行
    b2 -a -d+2 -q --build-type=complete --build-dir=build toolset=gcc link=shared runtime-link=共享线程=多

如果没有明确地将 ML(64) 目录添加到路径中，我仍然会收到有关 ML 的错误。

安装 MASM 与安装 MSVC 不同。我首先尝试使用不同的汇编器，但 boost 与它们的输出不兼容。

# powerpoint - 冲击波和 PowerPoint

> ID：13987024
> 
> 赞同：0
> 
> 时间：2012-12-21T08:59:15.297
> 
> 标签：powerpoint, codec, shockwave

我尝试在网上查找信息，但找不到，所以我想知道是否有人有一些信息：

1.  我们制作了 Flash 动画
2.  我们已将其嵌入到 PowerPoint 幻灯片中
3.  一切都在我们身边

我只是想在将它发送给客户端之前确保如果有人没有安装 Shockwave 插件它会起作用吗？换句话说，PowerPoint 在生成 PowerPoint 文件时是否包含用于查看项目的“编解码器”？

我尝试卸载我的 Shockwave，但由于某种原因我无法卸载，所以我不确定如何测试它。

任何想法将不胜感激。

谢谢！

科布斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:28:49.290

如果播放计算机没有正确的插件，将无法播放 Flash 动画。Flash 播放不像 WMV 和其他电影格式那样使用 CODEC。

# android - 如何更改微调框复选框的大小或颜色？

> ID：13987025
> 
> 赞同：5
> 
> 时间：2012-12-21T08:59:14.957
> 
> 标签：android, android-spinner

我正在开发一个 Android 项目，它允许用户在警报对话框中选择项目列表（见下图）。

![在此处输入图像描述](../Images/ab5a80ea6e45fe7ab5da4f8fd2283d80.png)

我正在使用 android.widget.spinner。但是复选框不太明显。

我正在尝试个性化复选框，因为默认情况下这种类型。

那么是否可以用我自己的复选框替换它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:30:25.893

在您的布局文件中尝试这种方式。

`main.xml`

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
> android:id="@+id/linearlayout"
> android:layout_width="wrap_content"
> android:layout_height="wrap_content"
> android:background="@color/border" <--- android built-in style. You can define your own whichever you like. Check for it.
> android:orientation="horizontal" >
> <CheckBox
>     android:id="@+id/check"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_marginLeft="2dp" />
> <TextView
>     android:id="@+id/Textname"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_marginLeft="7dp"
>     android:textColor="#FAFAFA"
>     android:textSize="14dp"
>     android:textStyle="bold" />
> </LinearLayout> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:30:42.563

我不确定这会对您有所帮助，但我在我的一个项目中完成了自定义微调器，我必须设置自定义背景和字体大小。我有如下代码。

你可以试试看。内`string.xml`写：

```
 <string-array name="spinner_array_environtment">
        <item>Test</item>
        <item>Production</item>
    </string-array> 
```

在您的 MainActivity.java 中：

```
public class MainActivity extends Activity {
Spinner spinner_environment;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                spinner_environment = (Spinner) findViewById(R.id.spinnerview);
adapter =ArrayAdapter.createFromResource(this,              R.array.spinner_array_environtment,R.layout.spinner_phone);
            adapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
            spinner_environment.setAdapter(adapter);
} 
```

在 spinner_phone.xml 里面：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinnerTarget"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="13dp"
    android:textColor="#4C4646" /> 
```

试试这个。希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:09:43.763

你想改变背景的`checkbox`权利吗？然后执行以下操作：

```
 checkBox.setButtonDrawable(<YourClass>.getResources().getDrawable( R.drawable.checkradio));   // where check radio is an xml file as shown below:

 <?xml version="1.0" encoding="utf-8"?>
    <item android:drawable="@drawable/unselected_option" android:state_checked="false"/>
    <item android:drawable="@drawable/selected_option" android:state_checked="true"/> 
```

where`unselected_option`是在`checkbox`未选中时显示`selected_option`的图像，是在选中选项时显示`checkbox`背景的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:30:02.730

您要做的是创建一个自定义微调器....

您必须制作一个包含 textview 和复选框的 xml 文件（根据您需要的大小）

之后，您必须将新的 xml 膨胀到微调器上。

扩展自定义视图的代码：这只是一个示例

```
public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row, parent, false);
            TextView label=(TextView)row.findViewById(R.id.company);
            label.setText(strings[position]);

            TextView sub=(TextView)row.findViewById(R.id.sub);
            sub.setText(subs[position]);

            ImageView icon=(ImageView)row.findViewById(R.id.image);
            icon.setImageResource(arr_images[position]);

            return row;
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T16:36:34.677

为自己创建一个可绘制对象：

my_checkbox.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/my_checkbox_pressed" android:state_selected="true"/>
    <item android:drawable="@drawable/my_checkbox_focused" android:state_focused="true"/>
    <item android:drawable="@drawable/my_checkbox_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/my_checkbox_default"/> <!-- pressed -->

</selector> 
```

这进去`/drawable/`

然后您必须创建四个可绘制对象，这些将是 png 文件，您将希望为每种尺寸的屏幕创建一个，即`/drawable-mdpi`等

您可以从 Android 源代码中获取这些内容，如果更容易，只需对其进行修改。（作为一个例子看这里[http://androiddrawableexplorer.appspot.com/](http://androiddrawableexplorer.appspot.com/)并搜索复选框）

然后只需将其用作行项目布局的复选框

```
<CheckBox
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:button="@drawable/my_checkbox"
/> 
```

* * *

simple_spinner_item 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/text1"
        style="?android:attr/spinnerItemStyle"
   android:singleLine="true"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:ellipsize="marquee" /> 
```

您所要做的就是创建自己的布局文件，名为：

my_simple_spinner item.xml 将其放入`drawable`并添加您的自定义复选框：

```
<LinearLayout />
  <TextView />
  <CheckBox android:button="@drawable/my_checkbox" />
</LinearLayout> 
```

然后将其设置为每一行的布局并自己处理复选框选择......这就是定制的代价。

# ios - iOS - 从代码和情节提要推送 viewController

> ID：13987026
> 
> 赞同：14
> 
> 时间：2012-12-21T08:59:18.227
> 
> 标签：ios, uiview, storyboard, xcode4.5, pushviewcontroller

我有这个代码

```
 PlaceViewController *newView = [self.storyboard instantiateViewControllerWithIdentifier:@"PlaceView"];
 [self presentViewController:newView animated:YES completion:nil]; 
```

而且我可以更改视图，但是当我返回此页面时，我会推送此视图，状态仍然存在。

我试着把这段代码：

```
[self.navigationController pushViewController:newView animated:YES]; 
```

但不做任何事情。

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-05-28T08:59:57.217

**目标-C：**

```
PlaceViewController *newView = [self.storyboard instantiateViewControllerWithIdentifier:@"storyBoardIdentifier"];
[self.navigationController pushViewController:newView animated:YES]; 
```

请注意以下几点，

1.  您的故事板标识符是正确的。

2.  根视图有导航控制器。

**迅速：**

```
let newView = self.storyboard?.instantiateViewController(withIdentifier: "storyBoardIdentifier") as! PlaceViewController
self.navigationController?.pushViewController(newView, animated: true) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T09:01:08.870

对于情节提要，您应该`performSegueWithIdentifier`像这样使用：

```
 [self performSegueWithIdentifier:@"identifier goes here" sender:self]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-07T14:17:07.757

利用：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"STORYBOARD_NAME" bundle:nil];
PlaceViewController *newView = [storyboard instantiateViewControllerWithIdentifier:@"PlaceView"];
[self presentViewController:newView animated:YES completion:nil]; 
```

或者：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"STORYBOARD_NAME" bundle:nil];
PlaceViewController *newView = [storyboard instantiateViewControllerWithIdentifier:@"PlaceView"];
[self.navigationController pushViewController:newView animated:YES]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-24T15:44:22.160

**Swift 3.x**

```
let viewController = storyboard?.instantiateViewController(withIdentifier: "storyboardIdentifier") as! UIViewController
navigationController?.pushViewController(viewController, animated: true) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-08T08:53:38.870

默认情况下，Xcode 创建一个标准的视图控制器。我们首先将视图控制器更改为导航控制器。选择只需在菜单中选择“编辑器”，然后选择“嵌入”，然后选择“导航控制器” 第 1 步。选择主故事板 第 2 步。单击 Xcode 应用程序顶部的“编辑器”。第 3 步。点击“嵌入”

Xcode 自动将 View Controller 与 Navigation Controller 一起嵌入。

# objective-c - 录音时应用程序崩溃（两个动作）一次两个视图

> ID：13987028
> 
> 赞同：0
> 
> 时间：2012-12-21T08:59:20.867
> 
> 标签：objective-c, ios, uitableview, uiviewcontroller

在我的应用程序中，我有一个包含两个子视图的 containerView。一个子视图包含按钮列表，另一个包含基于按钮选择的表格视图，在第一个视图中，表格视图的内容必须更改。

![在此处输入图像描述](../Images/4592ba500095adbfc3204cc3840a6ffc.png)

我的问题是同时点击按钮和内容视图表时应用程序崩溃。请指导我解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:54:39.043

在您点击按钮的情况下，您正在重新加载表格并同时从表格中选择行。这是不一致的。如果您只想执行一项操作，**请为您的 containerView 的所有子视图设置独占触摸**。

对于所有子视图做-

```
[subView setExclusiveTouch:YES]; 
```

# sqlalchemy - 当结果为 NULL 和空 se 时，SQLAlchemy 返回 None

> ID：13987029
> 
> 赞同：0
> 
> 时间：2012-12-21T08:59:22.583
> 
> 标签：sqlalchemy

这是可以预料的吗？

SQLAlchemy 标量方法在没有返回任何行时返回一个 None 值，当返回一个原始值但带有“NULL”时。我现在用我的 SQL 语句排除了 NULL 值，但对这个结果感到惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:21:37.587

您应该改用该[`Query.one`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.one)方法。

`None`在这种情况下，如果查询结果为 NULL ，它将返回，`NoResultFound`如果根本没有结果，它将返回。`MultipleResultsFound`例外情况也是可能的（如 中）`Query.scalar`。

# elasticsearch - 如何为 Elasticsearch 构建父/子映射？

> ID：13987030
> 
> 赞同：2
> 
> 时间：2012-12-21T08:59:24.110
> 
> 标签：elasticsearch

我尝试使用以下映射来索引我的数据：

```
{  
  "mappings": {
   "chow-demo": {
    "properties": {
     "@fields": {
      "dynamic": "true",
      "properties": {
        "asgid": {
          "type": "string",
          "analyzer": "keyword"
        },
        "asid": {
          "type": "long"
        },
        "astid": {
          "type": "long"
        },
        "clfg": {
          "analyzer": "keyword",
          "type": "string"
        },
        "httpcode": {
          "type": "long"
        },
        "oid": {
          "type": "string"
        },
        "onid": {
          "type": "long"
        },
        "ptrnr": {
          "analyzer": "keyword",
          "type": "string"
        },
        "pguid": {
          "analyzer": "keyword",
          "type": "string"
        },
        "ptid": {
          "type": "long"
        },
        "sid": {
          "type": "long"
        },
        "src_url": {
          "analyzer": "keyword",
          "type": "string"
        },
        "title": {
          "analyzer": "keyword",
          "type": "string"
        },
        "ts": {
          "type": "long"
        }
       }
      },
      "@timestamp": {
       "format": "dateOptionalTime",
       "type": "date"
      },
      "@message": {
       "type": "string"
      },
      "@source": {
       "type": "string"
      },
      "@type": {
       "analyzer": "keyword",
       "type": "string"
      },
      "@tags": {
       "type": "string"
      },
      "@source_host": {
       "type": "string"
      },
      "@source_path": {
       "type": "string"
      }
     }
    },
   "chow-clfg": {
    "_parent": {
     "type": "chow-demo"
    },
    "dynamic": "true",
    "properties": {
     "_ttl": {
      "enabled": true,
      "default": "1h"
     },
     "clfg": {
      "analyzer": "keyword",
      "type": "string"
     },
     "@timestamp": {
      "format": "dateOptionalTime",
      "type": "date"
     },
     "count": {
      "type": "long"
     }
    }
   }
  }
} 
```

我试图填充父类型“chow-demo”而不填充子类型“chow-clfg”，并且文档拒绝索引。（没有文档被 Elasticsearach 索引）

当我取出“chow-clfg”的子映射时，它会像往常一样正确索引。因此我有以下问题：

1.  我的映射结构错了吗？
2.  是否必须同时将父子索引一起索引才能成功索引数据？

在这个问题上真的需要帮助才能让我的项目取得进展！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:34:58.827

1.  是的，你的映射是错误的。该`_ttl`元素应该在`chow-clfg`类型中高一级。换句话说`_ttl`，应该与`_parent`. 但是，我不太确定这个问题会如何影响您的索引能力。

2.  父母和孩子不必一起被索引。

# extjs - Extjs Ext.MessageBox.show 不会与 y 垂直对齐：

> ID：13987031
> 
> 赞同：1
> 
> 时间：2012-12-21T08:59:27.263
> 
> 标签：extjs, alignment, vertical-alignment, messagebox

我有一个带有工具栏的网格。此工具栏有一个项目，它是一个用于从网格存储中删除条目的按钮。

我想在距顶部 200 像素处垂直对齐确认消息框。

根据文档（[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.window.MessageBox-cfg-y](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.window.MessageBox-cfg-y)），有一个名为“y”的配置来完成这项工作. 但这对我不起作用。希望大家能帮忙。

我正在使用 Extjs 4.1.1a

这是我的代码：

```
var entryGridToolbar = Ext.create('Ext.toolbar.Toolbar', {
    items: [{
        text: 'Delete',
        id: 'deleteButton',
        icon: '/images/icons/minus.png',
        handler: function() {
            Ext.MessageBox.show({
                title: 'Delete entry',
                width: 300,
                y: 200,
                msg: 'Are you sure?',
                buttons: Ext.MessageBox.YESNO,
                icon: Ext.MessageBox.QUESTION,
                fn: function(btn) {
                    // delete/cancel..
                }
            })
        }
    }]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:53:31.520

```
var msgBox; // declare it global
var entryGridToolbar = Ext.create('Ext.toolbar.Toolbar', {
    items: [{
        text: 'Delete',
        id: 'deleteButton',
        icon: '/images/icons/minus.png',
        handler: function() {
            msgBox = Ext.MessageBox.show({
                title: 'Delete entry',
                width: 300,
                y: 200,
                msg: 'Are you sure?',
                buttons: Ext.MessageBox.YESNO,
                icon: Ext.MessageBox.QUESTION,
                fn: function(btn) {
                    // delete/cancel..
                }
            })
        }
    }]
});

msgBox.getDialog().getPositionEl().setTop(50); // Try this 
msgBox.getPositionEl().setTop(50); // Try this if above dosen't work 
```

另请参阅此链接 [Ext JS Message Box Position](https://stackoverflow.com/questions/4513996/ext-js-message-box-position)

# tomcat - windows XP下如何设置JAVA_home和tomcat_home的环境变量？

> ID：13987038
> 
> 赞同：1
> 
> 时间：2012-12-21T08:59:57.247
> 
> 标签：tomcat, classpath, environment-variables

我首先经历了**JSP 和 servlet**。在某一阶段它说，设置环境变量！我被困住了。

**Qus：**什么是环境变量？为什么我们需要它们？

**问：**什么是类路径？我们为什么要设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:02:37.703

看到这是最好的文章...请看看这个

用于在 windows Xp 中为 JAVA 设置环境变量

[http://www.javux.com/Notes/JavaWeb/Lesson1/Lesson1B.html](http://www.javux.com/Notes/JavaWeb/Lesson1/Lesson1B.html)

用于安装 Tomcat

[https://wiki.jasig.org/display/UPM40/Installing+Tomcat](https://wiki.jasig.org/display/UPM40/Installing+Tomcat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T14:06:56.927

> **问：什么是环境变量？为什么我们需要它们？**

我说什么**老虎**，你知道我在说什么吗？显然，您的答案是**否定的。**但在此之前，如果我对你说**TIGER**的意思是**黄色/橙色，有四条腿，等等**。现在你做对了。操作系统（Windows，Linux等）遇到时的相同方式

> 爪哇

或者

> tomcat_home

**它会将您定向到您在Environment Variables**中指定的路径。例如。C:\Program Files\Java\jdk1.7.0_45\bin。

> **问：什么是类路径？我们为什么要设置它？**

在 Java 中编程时，您可以通过在源文件的顶部放置类似这样的内容来使其他类对您正在编写的类可用：

import org.javaguy.coolframework.MyClass 或者有时你会说“批量导入”东西：

import org.javaguy.coolframework.* 所以稍后在你的程序中当你说：

我的 = MyClass.new(); java虚拟机可以知道加载你编译的类。

让 VM 浏览您机器上的每个文件夹是不切实际的，因此您必须为 VM 提供要查看的位置列表。这是通过将文件夹和 jar 文件放在类路径中来完成的。

在我们讨论如何设置类路径之前，让我们先谈谈 .class 文件、包和 .jar 文件。

首先，假设 MyClass 是您作为项目的一部分构建的，它位于项目中名为“输出”的目录中。.class 文件将位于“output/org/javaguy/coolframework/MyClass.class”（以及该包中的所有其他文件）。为了获取该文件，您的路径只需要包含文件夹“输出”......而不是整个包结构，因为您的导入语句将所有这些信息提供给 VM。

现在假设您将 CoolFramework 捆绑到一个 .jar 文件中，并将该 CoolFramework.jar 放入项目的 lib 目录中。您现在需要将“lib/CoolFramework.jar”放入您的类路径中……VM 将在 jar 文件中查找“org/javaguy/coolpackage”部分，并找到您的类。

因此，类路径包含：

jar 文件，以及包层次结构顶部的路径。你如何设置你的类路径？

每个人似乎学习的第一种方式是使用环境变量。在 unix 机器上，你可以这样说：

export CLASSPATH=/home/myaccount/myproject/lib/CoolFramework.jar:/home/myaccount/myproject/output/ 在Windows机器上，您必须转到您的环境设置并添加或修改已经存在的值。

第二种方式是在启动Java时使用-cp参数，像这样：

java -cp "/home/myaccount/myproject/lib/CoolFramework.jar:/home/myaccount/myproject/output/" MyMainClass 第三种方式的变体通常使用 .sh 或 .bat 文件来计算类路径和通过 -cp 参数将其传递给 java。

那么最好的方法是什么？

通过环境变量全局设置东西是不好的......通常与全局变量不好的原因相同。您更改了 CLASSPATH 环境变量，以便一个程序可以工作，而您最终会破坏另一个程序。

-cp 是要走的路...我通常确保我的 CLASSPATH 环境变量是我开发的空字符串，只要有可能，这样我就可以避免全局类路径问题（当全局类路径为空时，某些工具会不高兴虽然 - 我知道有两种常见的、耗资巨大的许可 J2EE 和 Java 服务器，它们的命令行工具存在这种问题）。

# android - 谷歌加客户端“发生内部错误”

> ID：13987040
> 
> 赞同：7
> 
> 时间：2012-12-21T09:00:21.753
> 
> 标签：android, google-plus

昨天，我在我的应用程序中尝试使用 Google Plus 为用户签名时开始收到“发生内部错误”，我使用得很好并且没有更改。代码很久​​没变了。

`GmsClient`返回

```
connect: bindService returned true for Intent { act=com.google.android.gms.plus.service.START }
service broker connected, binder: android.os.BinderProxy@40fdbd20 
```

紧接着显示吐司消息“发生内部错误”。

我尝试编译 Google SDK+ 示例并在同一设备上运行，但它显示相同的错误。也许 Google API 发生了一些变化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-15T04:41:15.773

我的“发生内部错误”解决方案：

关注[https://developers.google.com/+/mobile/android/getting-started的演示](https://developers.google.com/+/mobile/android/getting-started)

它通过创建 PlusClient

```
mPlusClient = new PlusClient.Builder(this, this, this)
                .setVisibleActivities("XXXX/AddActivity", "XXXX/BuyActivity")
                .setScopes("PLUS_LOGIN")  // Space separated list of scopes
                .build(); 
```

在我自己的应用程序中，当我删除 ".setScopes("PLUS_LOGIN")" 并显示为：

```
mPlusClient = new PlusClient.Builder(this, this, this)
        .setVisibleActivities("XXXX/AddActivity", "XXXX/BuyActivity")
        .build(); 
```

错误解决，连线！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T11:06:27.953

这太愚蠢了，但我没有在谷歌搜索互联网和群组中找到任何信息。但它解决了替换：

```
//static final String[] SCOPES = new String[] { Scopes.PLUS_PROFILE, PLUS_WRITE_MOMENT };
static final String[] SCOPES = new String[] { Scopes.PLUS_PROFILE }; 
```

似乎由于 PLUS_WRITE_MOMENT 而发生错误......我不明白为什么，但没有这个它可以工作。

我喜欢谷歌...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:02:33.707

我也有这个问题，似乎突然出现。不幸的是，奥列格的回答对我没有帮助。

[我的解决方法是在 Google API 控制台 ( https://code.google.com/apis/console](https://code.google.com/apis/console) )中设置 OAuth 。设置非常容易。此处的快速入门说明：[https](https://developers.google.com/+/quickstart/android) ://developers.google.com/+/quickstart/android 。

当我第一次创建项目时，Simple API Access 起作用了。但是，在不更改任何代码的一个月内，这还不够。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-29T07:04:05.933

我的经验/解决方案：

我尝试了上面列出的所有内容（检查客户 ID、同意屏幕、更改范围等）。没有什么能永久解决我的问题。

当我使用这个查看详细的 adb 日志时：

```
adb shell setprop log.tag.GooglePlusPlatform VERBOSE 
```

我得到以下日志：

```
I/GLSUser (  854): GLS error: BAD_REQUEST xxxxx@gmail.com oauth2:profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/contacts.readonly 
```

最后，解决问题的方法是从 PlusClient （已弃用）转向使用[GoogleApiClient](http://developer.android.com/reference/com/google/android/gms/common/api/GoogleApiClient.html)。

迁移非常简单（在这里解释得很好：[http](http://www.riskcompletefailure.com/2014/02/migrating-from-plusclient-to.html) ://www.riskcompletefailure.com/2014/02/migrating-from-plusclient-to.html ）。

移至 GoogleApiClient 后，我​​再也没有收到此错误。

# ruby - 运算符优先级如何用于条件块？

> ID：13987041
> 
> 赞同：0
> 
> 时间：2012-12-21T09:00:21.430
> 
> 标签：ruby

为什么如果我在没有块的情况下调用条件方法，我可以做`if foo? bar.baz`，但我必须做一个块：

```
if foo?; bar.each { |n| n.baz } end 
```

我将如何对多行块做同样的事情？

```
bar.each do |n|
  n.quack
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:05:34.897

您提供的第一个版本会将 bar.each 执行的结果传递给 foo？所以它期望 foo？进行辩论。

`bar.each`只有当`foo?`它是真的时，第二个版本才会这样做。

我建议您使用以下样式：

```
if foo?
   bar.each do |n|
     n.quack
   end 
end 
```

这也回答了你的最后一个问题。

注意：如果您实际上希望将单个参数传递给`foo?`该块的执行结果，则最好使用辅助变量：

```
cond = bar.each do |n|
  n.quack
end 

if foo? cond
   .. do stuff
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:13:39.447

你可以使用这些结构，但是上面提到的它是不可读的。您必须避免编写不可读的代码。

```
if true then [1, 2].map { |n| n * 2 } end
=> [2, 4] 

[1, 2].map do |n|
  n * 2
end if true
=> [2, 4] 

[1, 2].map do |n|
  n * 2
end if false
=> nil 
```

# gridview - Gridview 标题放置

> ID：13987049
> 
> 赞同：2
> 
> 时间：2012-12-21T09:00:38.730
> 
> 标签：gridview, windows-runtime, winrt-xaml

对于分组数据源，HeaderTemplate 位于 GroupStyle.ContainerStyle 下，容器由两行组成，一行用于标题，另一行用于项目。

GridView.HeaderTemplate 似乎并非如此。标题显示在项目的左侧，如下所示：

标题文本 [第 1 项]

有没有办法将标题文本移动到项目列表上方？我假设必须更改似乎无法访问的 GridView 模板本身。

这是 GridView 的 XAML。这非常简单：

```
<GridView x:Name="gridItems" ItemContainerStyle="{StaticResource GridViewListContainerStyle}" ItemsSource="{Binding Items}" SelectionMode="None" AllowDrop="True" CanDragItems="True" VerticalAlignment="Top" HorizontalAlignment="Center"  CanReorderItems="True" Padding="1">
        <GridView.HeaderTemplate>
            <DataTemplate>
                <Grid>
                   <TextBox Text="{Binding Title}" Width="290" MaxLength="20"/>                                                            
                </Grid>
            </DataTemplate>
        </GridView.HeaderTemplate>
        <GridView.ItemTemplate>
            <DataTemplate>
                <local:MyControl DataContext="{Binding}"/>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T16:50:29.570

而不是修改样式（目前这很不方便，因为没有办法只修改部分样式并将默认主题样式应用于控件的其余部分），我之前也使用 StackPanel 完成了此操作。后来我尝试了这种方法，它也有效，我不确定它有多好，但它确实允许您将标题保留在 gridview 控件中。

注意 HeaderTemplate 和 ItemPanelTemplate 的边距：

```
<GridView.HeaderTemplate>
    <DataTemplate>
        <TextBlock
            Text="Header"
            VerticalAlignment="Top"
            Margin="10,10,-200,0"
            />
    </DataTemplate>
    </GridView.HeaderTemplate>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Margin="0,50,0,0"/>
                    </ItemsPanelTemplate>
         </GridView.ItemsPanel>
      ....
    </GridView> 
```

您可以调整 HeaderTemplate 和 ItemsPanelTemplate 的边距，使其适合您的需要。您还可以将 VariableSizedWrapGrid 更改为您想要的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T23:51:41.950

其实，我想通了。它比我想象的要简单得多：只需创建一个用户控件并将标题添加到 Grid 中的不同控件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T17:25:36.353

我处理这种情况的方法是将 GridView 封装在具有垂直方向的 StackPanel 中，并在其顶部添加一个 Grid，该 Grid 具有一个 TextBlock，其 text 属性设置为 Header 文本。示例 XAML 如下所示：

```
<StackPanel Orientation="Vertical">
    <Grid>
        <TextBlock Text="My Header Text"/>
    </Grid>
    <GridView x:Name="GridViewName"
        Grid.Row="1" 
            Height="500" 
            SelectionMode="None" 
            IsItemClickEnabled="True" 
            ItemClick="GVItem_Click" 
            ItemTemplate="{StaticResource ItemTemplate}">
    </GridView>
</StackPanel> 
```

希望这可以帮助并节省我浪费时间敲打头的时间:)

# android - 将值从活动传递到数据源的问题

> ID：13987050
> 
> 赞同：1
> 
> 时间：2012-12-21T09:00:44.767
> 
> 标签：android, sqlite, android-cursoradapter

尝试从数据库中获取文本后，出现此错误：

```
12-21 09:54:10.948: E/AndroidRuntime(25745): FATAL EXCEPTION: main
12-21 09:54:10.948: E/AndroidRuntime(25745): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ggservice.democracy/com.ggservice.democracy.sondaggioActivity}: android.database.sqlite.SQLiteException: near "=": syntax error: , while compiling: SELECT _id, preferita, nome FROM sondaggi WHERE _id= 
```

**这是电话：**

```
Cursor values = datasource.getDomanda(strcategory );
        if (values.moveToFirst()) // data?
               System.out.println(values.getString(values.getColumnIndex("domanda"))); 

               values.close(); 
```

**它称之为：**

```
public Cursor getDomanda(String id) {
            List<sondaggi> domande = new ArrayList<sondaggi>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                    allCategorieColumns, MySQLiteHelper.COLUMN_ID + "=", new String[] { id }, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              sondaggi sondaggio = cursorToSondaggi(cursor);
              domande.add(sondaggio);
              cursor.moveToNext();
            }

            return cursor;
          } 
```

id 接缝是空的，但我知道那里有一个值，我已经测试了变量通道。我的意思是，如果我敬酒 strcategory 它返回正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:05:11.337

改变

```
 Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                    allCategorieColumns,
                    MySQLiteHelper.COLUMN_ID + "=",
                    new String[] { id }, null, null, null); 
```

到

```
 Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                    allCategorieColumns,
                    MySQLiteHelper.COLUMN_ID + "=?",
                    new String[] { id }, null, null, null); 
```

# android - 如何在列表视图上实现过滤器

> ID：13987056
> 
> 赞同：1
> 
> 时间：2012-12-21T09:01:04.377
> 
> 标签：android, filter, android-listview

在这里问问题之前，我看了一下[这个线程。](https://stackoverflow.com/questions/8678163/list-filter-custom-adapter-dont-give-result)但是该线程包含简单字符串数组的示例，而在我的情况下，我正在使用`ArrayList<Map<String, String>>`，所以我现在有点困惑。

我的 android 活动中有多项选择`listview`。我正在使用`listview`来显示联系人列表，以便用户一次可以选择多个电话号码。但现在我想为同样的目的添加搜索功能。我想要做的是`EditText`在顶部放置一个，无论用户在其中输入什么字符`EditText`，我都希望`ListView`根据用户输入填充过滤数据。我有一个`CustomAdapter`which extends`BaseAdapter`和一个名为 POJO 的类`Contact`，我正在使用它`GET`和`SET`联系方式。

**MYCUSTOMADAPTER.JAVA**

```
public class MyCustomAdapter extends BaseAdapter {

Context mContext;
private LayoutInflater mInflater;
SparseBooleanArray mSparseBooleanArray;
private ArrayList<Map<String,String>> mAdapData = new ArrayList<Map<String, String>>();

public MyCustomAdapter(Context mContext) {
    mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mSparseBooleanArray = new SparseBooleanArray();
}

public ArrayList<String> getCheckedItems() {
    ArrayList<String> mTempArry = new ArrayList<String>();
    for (int i = 0; i < mAdapData.size(); i++) {
        if (mSparseBooleanArray.get(i)) {
            Map<String, String> map = (Map<String, String>) mAdapData.get(i);
            final String numbr = map.get("Phone").toString();
            mTempArry.add(numbr);
        }
    }
    return mTempArry;
}

public int getCount() {
    return this.mAdapData.size();
}

public void addItem(String paramString1, String paramString2) {
    Map<String, String> NameNumber = new HashMap<String, String>();
    NameNumber.put("Name", paramString1);
    NameNumber.put("Phone", paramString2);
    this.mAdapData.add(NameNumber);
    notifyDataSetChanged();
}

@SuppressWarnings("unchecked")
public Object getItem(int paramInt) {
    return (ArrayList<Map<String, String>>) this.mAdapData.get(paramInt);
}

public long getItemId(int paramInt) {
    return paramInt;
}

public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {

    if (paramView == null) {
        paramView = mInflater.inflate(R.layout.multiplecontactview, null);
    }

    TextView txtName = (TextView) paramView.findViewById(R.id.txtContactName);
    TextView txtNumber = (TextView) paramView.findViewById(R.id.txtContactNumber);
    CheckBox mCheckBox = (CheckBox) paramView.findViewById(R.id.checkBox1);
    mCheckBox.setTag(paramInt);
    mCheckBox.setChecked(mSparseBooleanArray.get(paramInt));
    mCheckBox.setOnCheckedChangeListener(mCheckedChangeListener);
    txtName.setTextColor(Color.BLACK);
    txtNumber.setTextColor(Color.BLACK);
    for (int i = 0; i < mAdapData.size(); i++) {
        Map<String, String> map = (Map<String, String>) mAdapData.get(paramInt);
        final String name = map.get("Name").toString();
        final String numbr = map.get("Phone").toString();
        txtName.setText(name);
        txtNumber.setText(numbr);
    }
    return paramView;
}

OnCheckedChangeListener mCheckedChangeListener = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        mSparseBooleanArray.put((Integer) buttonView.getTag(), isChecked);
    }
};
} 
```

**联系班**

```
public class Contact {

int _id;
String _name;
String _phone_number;

public Contact() {

}

public Contact(int id, String name, String _phone_number) {
    this._id = id;
    this._name = name;
    this._phone_number = _phone_number;
}

public Contact(int id) {
    this._id = id;
}

public Contact(String name, String _phone_number) {
    this._name = name;
    this._phone_number = _phone_number;
}

public int getID() {
    return this._id;
}

public void setID(int id) {
    this._id = id;
}

public String getName() {
    return this._name;
}

public void setName(String name) {
    this._name = name;
}

public String getPhoneNumber() {
    return this._phone_number;
}

public void setPhoneNumber(String phone_number) {
    this._phone_number = phone_number;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:13:43.003

为了能够做到这一点，您需要实现一个[Textwatcher](http://developer.android.com/reference/android/text/TextWatcher.html)

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

    }

    @Override
    public void afterTextChanged(Editable arg0) {
        /*clear previous contents of list*/
                     adapter.clear();
                    /*add new contents according to the filter*/
                   String filter=arg0.getText().toString();
                   if (filter == null
                            || Pattern
                                    .compile(Pattern.quote(filter),
                                            Pattern.CASE_INSENSITIVE)
                                    .matcher(adapter.getItem(...)).find()
                            || filter.equals("")) {
                        adapter.addItem(...);
                    }
    }

}; 
```

然后将该 filterTextWatcher 设置为您的编辑文本：

```
searchEditText.addTextChangedListener(filterTextWatcher); 
```

希望有帮助！:)

# iphone - 洗牌数组未捕获异常

> ID：13987057
> 
> 赞同：2
> 
> 时间：2012-12-21T09:01:05.813
> 
> 标签：iphone, ios6, nsmutablearray

我使用四个按钮并打乱按钮标签值以在每次点击时查看不同的值，因为我从数组中显示按钮的值，当我试图打乱标签值时，我得到了以下错误。

```
 *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSMutableArray exchangeObjectAtIndex:withObjectAtIndex:]: index 16 beyond bounds [0 .. 3]' 
```

我洗牌标签值数组的代码，

```
words = [[NSMutableArray alloc] initWithObjects:@"1", @"2", @"3",@"4", nil] ;

 NSUInteger count = [questar count];
for (NSUInteger i = 0; i < count; ++i) {
    // Select a random element between i and end of array to swap with.
    NSInteger nElements = count - i;
    NSInteger n = (arc4random() % nElements) + i;
    [words exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

我应该做些什么改变？有谁能帮我解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:26:58.137

您必须首先选择一个图像`quester`。您创建了索引`n`以从`quester`数组中获取对象吗？

```
words = [[NSMutableArray alloc] initWithObjects:@"1", @"2", @"3",@"4", nil] ;

NSUInteger count = [questar count];
for (NSUInteger i = 0; i < count; ++i) 
{
  // Select a random element between i and end of array to swap with.
  NSInteger nElements = count - i;
  NSInteger n = (arc4random() % nElements) + i;

  currentImage = [questar objectAtIndex:n];

  [words replaceObjectAtIndex:i withObject:currentImage];
} 
```

或者，如果您想在数组中进行交换，请更改`count`为：

```
NSUInteger count = [words count]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:31:46.423

以下：

```
NSInteger nElements = count - i;
NSInteger n = (arc4random() % nElements) + i; 
```

应改为：

```
NSInteger nElements = count;
NSInteger n = (arc4random() % nElements); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:14:18.503

```
[words exchangeObjectAtIndex:i withObjectAtIndex:n]; 
```

在上面的语句中，两者`i`的`n`值都应该小于`words`计数（这里是 4）。否则，你会得到例外。

# visual-studio-2012 - 为什么 Encoding.ASCII 类不适用于 Windows 应用商店应用程序？

> ID：13987059
> 
> 赞同：1
> 
> 时间：2012-12-21T09:01:11.643
> 
> 标签：visual-studio-2012, .net-4.5, windows-store-apps, windows-store

我在我的 WinForms 应用程序中使用 Encoding.ASCII 类。现在我需要将其转换为 Windows Store 应用程序。问题是，缺少 ASCII 类！

```
using System.Text; 
```

这是程序集，在其他类型中 System.Text.ASCII 类可用，但在这一类中不可用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:24:53.777

来自[MSDN 论坛帖子 1](http://social.msdn.microsoft.com/Forums/en-TT/winappswithcsharp/thread/8a844a21-39cf-4134-8010-53bea1080852)：

> 建议使用与 ASCII 兼容的 UTF8 编码。

来自[MSDN 论坛帖子 2](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1969d493-552d-4ed3-ac57-84ad318cbe69)：

> 您应该能够在使用 ASCIIEncoding 的地方使用 UTF8 编码。UTF8 是一个超集，应该兼容。

# lisp - 非驻留符号symbol

> ID：13987064
> 
> 赞同：12
> 
> 时间：2012-12-21T09:01:48.137
> 
> 标签：lisp, common-lisp, symbols, gensym

关于Common lisp，我有些不明白。

假设我正在编写一个类似的宏：

```
(defmacro test-macro () 
   (let ((result (gensym))) 
      `(let ((,result 1))
         (print (incf ,result))))) 
```

比我能做的

```
> (test-macro)
2
2 
```

现在我想看看它是如何扩展的

```
> (macroexpand-1 '(test-macro))
(LET ((#:G4315 1)) (PRINT (INCF #:G4315))) ;
T 
```

行。gensym 生成了一些独特的符号，这些符号被打印为 uninterned。

据我所知，uninterned 符号是评估器不会在内部创建符号数据绑定的符号。

因此，如果我们将宏扩展为该表单，则 (incf #:G4315) 上应该会出现错误。为了测试这一点，我们可以在 REPL 中评估该表单：

```
> (LET ((#:G4315 1)) (PRINT (INCF #:G4315)))
*** - SETQ: variable #:G4315 has no value 
```

那么为什么扩展为这个字符串的宏可以完美地工作而表单本身却不能呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-21T09:35:30.877

**符号可以在包中也可以不被实习。**可以查找并找到包含在包中的符号。无法在包中查找 uninterned 符号。一个包中只能有一个特定名称的符号。只有一个符号`CL-USER::FRED`。

**你写**：

> 据我所知，uninterned 符号是评估器不会在内部创建符号数据绑定的符号。

那是错误的。*Uninterned* Symbols 是没有在任何包中的符号。否则他们完全没问题。*interned*表示在包的*注册表*中为其符号*注册。*

 *s-expression*阅读器在**阅读*过程中确实使用符号名称和包来识别符号。如果没有这样的符号，它就会被拘留。如果有一个，则返回这个。

读者确实在当前包中按名称查找符号：

```
 (read-from-string "FOO") -> symbol `FOO` 
```

第二次：

```
 (read-from-string "FOO") -> symbol `FOO` 
```

它始终是同一个符号`FOO`。

```
 (eq (read-from-string "FOO") (read-from-string "FOO"))  -> T 
```

`#:FOO`是名称为 的非内部符号的语法`FOO`。它没有在任何包中实习。如果读者看到这种语法，它会创建一个新的非内部符号。

```
 (read-from-string "#:FOO") -> new symbol `FOO` 
```

第二次：

```
 (read-from-string "#:FOO") -> new symbol `FOO` 
```

两个符号不同。它们具有相同的名称，但它们是不同的数据对象。除了包之外，没有其他符号注册表。

```
 (eq (read-from-string "#:FOO") (read-from-string "#:FOO"))  -> NIL 
```

因此，在您的情况下`(LET ((#:G4315 1)) (PRINT (INCF #:G4315)))`，未执行的符号是不同的对象。第二个是一个不同的变量。

**Common Lisp 有一种打印数据的方法，以便在打印/读取期间保留身份**：

```
CL-USER 59 > (macroexpand-1 '(test-macro))
(LET ((#:G1996 1)) (PRINT (INCF #:G1996)))
T

CL-USER 60 > (setf *print-circle* t)
T

CL-USER 61 > (macroexpand-1 '(test-macro))
(LET ((#1=#:G1998 1)) (PRINT (INCF #1#)))
T 
```

现在您看到打印的 s 表达式具有`#1=`第一个符号的标签。然后它稍后引用相同的变量。这可以被读回并保留符号身份 - 即使*阅读器*无法通过查看包装来识别符号。

因此，宏创建了一个表格，其中只生成了一个符号。当我们打印该表单并想要读回它时，我们需要确保保留未留存符号的身份。`*print-circle*`使用set to打印`T`有助于做到这一点。

**问：为什么我们在宏中通过 using `GENSYM`( *generate symbol* ) 使用 uninterned 生成的符号？**

这样我们就可以拥有独特的新符号，它们不会与代码中的其他符号发生冲突。他们通过函数获得名称`gensym`- 通常在末尾带有计数的数字。由于它们是新的符号，没有在任何包中实习，所以不会有任何命名冲突。

```
CL-USER 66 > (gensym)
#:G1999

CL-USER 67 > (gensym)
#:G2000

CL-USER 68 > (gensym "VAR")
#:VAR2001

CL-USER 69 > (gensym "PERSON")
#:PERSON2002

CL-USER 70 > (gensym)
#:G2003

CL-USER 71 > (describe *)

#:G2003 is a SYMBOL
NAME          "G2003"
VALUE         #<unbound value>
FUNCTION      #<unbound function>
PLIST         NIL
PACKAGE       NIL                      <------- no package 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:35:04.093

`gensym`生成一个符号，当您打印它时，您会得到该符号的“字符串”表示，它与“阅读器”表示不同，即符号的代码表示。*

# emacs - emacs 中的 org 模式文档

> ID：13987065
> 
> 赞同：5
> 
> 时间：2012-12-21T09:01:52.583
> 
> 标签：emacs, org-mode, org-babel

我正在学习如何在 Emacs 中使用 org-mode，我看到了一些提示（特别是在 babel 部分），我可以从 Emacs 中查看这些文档，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T09:13:31.537

按 输入信息，然后按和输入`C-h i`组织模式手册。`m org``return`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:35:12.890

有手册（参见 ExpodingRat 的答案），还有功能和键的自助（例如，Ch k TAB 提供 TAB 键的帮助。）

# php - jPlayer Stream MP3 但防止下载和盗链

> ID：13987067
> 
> 赞同：14
> 
> 时间：2012-12-21T09:02:04.943
> 
> 标签：php, jquery, jquery-ui, jplayer

我正在建立一个类似于 thefuture.fm 的网站。DJ 可以上传 MP3 文件并设置文件是否只能流式传输或流式传输和下载。

该网站的访问者无需登录即可收听音乐。他们应该能够根据用户设置流式传输/下载这些 MP3 歌曲。

我正在使用 jPlayer 播放歌曲。我已经搜索了整个网络，但找不到任何解决方案。jPlayer 是否有阻止下载 MP3 文件之类的功能？或者有什么办法可以防止这种情况发生？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T15:02:04.887

阻止下载实际上是不可能的。你可以让某人更难，但他仍然需要下载所有数据才能听到这首歌。因此，即使您使用某种加密将数据发送到您自己编写的 Flash 播放器，播放器也必须对其进行解密并播放音频。而且由于您可以反编译闪存，因此找出算法并不难。他也可以在播放音乐时重新录制音乐（类似于第一个 DVD 解密工具，只需 30 次/秒的屏幕截图即可通过百万美元的安全测量）

所以目标是让它变得更难，而不是不可能。

就个人而言，我会结合 cookie 寻找临时可用链接，因此我仍然可以使用 jplayer 而不必重新发明轮子。还可以使用一些混淆来使 URL 更难阅读。

当有人请求主 URL（您显示播放器的位置）时，会生成一个唯一密钥并将其保存在 cookie 中。唯一密钥应链接到会话中存储的 IP 地址和请求时间。

现在创建一个指向音乐文件的链接，如 playfile.php?file=music.mp3 或其他。只需确保 PHP 将处理文件请求。如果你混淆了这个链接，找到它会有点困难。

在 playfile.php 中检查 cookie 中的唯一代码，并检查它是否与会话中的 IP 地址匹配，并且请求时间小于 EG 15 秒（再长一点，并且在互联网连接缓慢的情况下无论如何都不会播放音乐）。如果是，则流式传输文件。如果不是，请阻止它。

现在，如果有人会编写程序/脚本来下载音乐，他可以。但如果有人有知识和时间这样做，没有什么能阻止他下载它。

这将阻止任何普通用户下载它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T13:39:23.627

防止盗链更容易一些，因为通常您需要检查一个引荐来源网址字符串。如果存在，那么您将知道不提供内容。[这](http://safalra.com/programming/php/prevent-hotlinking/)是一个代码示例。

另一方面，阻止下载要困难得多——最好的方法是让 Flash 应用程序实时解密数据——如果您使用简单的加密方案，大多数客户端硬件应该足够快。我在网上找不到太多这方面的内容，所以我想知道您是否必须自己进行一些 Flash/Flex 开发：分块下载 MP3 数据，从库中应用解密例程，然后将它们发送到某种 MP3解码缓冲区。我怀疑密码会被硬编码。

附录：我发现在更高版本的 Flash 中，您可以从缓冲区播放动态生成的声音（[请参见此处](http://help.adobe.com/en_US/as3/dev/WSE523B839-C626-4983-B9C0-07CF1A087ED7.html)）。因此，如果您愿意陷入某种 Flash/Flex 开发，那么解决方案就在眼前。我找不到任何访问低级 MP3 例程的东西，但不要忘记文件不必是从服务器传输的 MP3 - 将它们转换为您的应用程序需要的任何内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T09:14:04.033

您正在搜索的内容无法通过 JavaScript 解决方案实现。如果你想让 javascript 播放一些东西，它必须下载它，为了下载它，JavaScript 需要一个 URL。

解决此问题的最常见方法是使用 Adob​​e Flash 并在其中制作播放器。您可以使播放器流式传输内容（在您的情况下为 mp3），而无需向用户*显式*公开实际数据位置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-01T14:25:35.373

将文件放在浏览器无法访问的位置，并使用 PHP 将它们作为一系列块使用`HTTP/1.1 206 Partial Content`. 然后使用这样的方法[来](http://luke.breuer.com/tutorial/javascript-context-menu-tutorial.htm)编辑上下文菜单以添加/删除“另存为”。

使用会话变量来消除直接链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-30T14:40:42.250

实际上，有一个播放器会打乱网址，而且效果很好。我们使用它是因为这个出色的功能。下载/保存音频并非不可能，但至少不是仅仅打开检查器并复制 url 的问题。它还可以防止通过 URL 共享给外部资源。因此，与上述相反，它是可能的并且是可用的:)

在此处查看插件： [https ://wordpress.org/plugins/mp3-jplayer/](https://wordpress.org/plugins/mp3-jplayer/)

# c# - 在 C# 中使用 WinSCP 连接到 SFTP 时出现“没有可用的支持的身份验证方法”

> ID：13987069
> 
> 赞同：5
> 
> 时间：2012-12-21T09:02:15.193
> 
> 标签：c#, .net, winscp, winscp-net

我正在尝试使用 C# 中的 WinSCP 连接到 SFTP 服务器。这是我的代码：

```
SessionOptions sessionOptions = new SessionOptions
{
    Protocol = Protocol.Sftp,
    HostName = "ip",
    PortNumber = portNR,
    UserName = "username",
    Password = "",
    SshHostKeyFingerprint = "fingerPrint", 
    SshPrivateKeyPath = "\\PrivateKey\\PrivateKey.ppk ",
};

using (Session session = new Session())
{
    session.Open(sessionOptions);
} 
```

但是当我运行应用程序时，它会像这样

```
session.Open(sessionOptions); 
```

我得到这个错误：

> 断开连接：不支持可用的身份验证方法（服务器发送：publickey、gssapi-with-mic）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:06:06.883

您应该使用没有密码或选美的私钥，因为 WinSCP C# 类不支持为私钥设置密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T17:39:17.523

最新版本的 WinSCP .NET 程序集确实支持将密码设置为加密的私钥。

使用[`SessionOptions.PrivateKeyPassphrase`](https://winscp.net/eng/docs/library_sessionoptions#privatekeypassphrase).

```
SessionOptions sessionOptions = new SessionOptions
{
    ...
    SshPrivateKeyPath = "\\PrivateKey\\PrivateKey.ppk",
    SshPrivateKeyPassphrase = "passphrase",
}; 
```

另请参阅WinSCP 常见问题解答中的[自动化私钥身份验证](https://winscp.net/eng/docs/faq_passphrase#automating)。

# html - 默认值是多少

> ID：13987088
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:03:10.237
> 
> 标签：html, lang

如果我没有`lang`在标签的属性中指定值`html`，它采用什么默认值？是“恩”吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T09:04:51.917

[http://www.w3.org/TR/html401/struct/dirlang.html](http://www.w3.org/TR/html401/struct/dirlang.html)

此属性的默认值未知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T09:07:55.273

[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/dom.html#attr-lang)比HTML4.01更详细：

> 如果节点和节点的任何祖先（包括根元素）都没有设置任何属性，但有一个 pragma-set 默认语言集，那么这就是节点的语言。如果没有 pragma-set 默认语言集，则必须将来自更高级别协议（例如 HTTP）的语言信息（如果有）用作最终的备用语言。在没有这种语言信息的情况下，上层协议上报多种语言的情况下，节点的语言是未知的，对应的语言标签为空字符串。

总而言之，`lang`节点的 由以下因素决定：

*   节点或祖先的`xml:lang`属性值（在这种情况下，我们谈论的是根节点，因此没有祖先）

*   节点或祖先的`lang`属性值

*   pragma [-set 默认语言](http://www.w3.org/html/wg/drafts/html/master/document-metadata.html#pragma-set-default-language)

*   HTTP 标头（或其他协议的详细信息，如果不是 HTTP）

*   如果以上都不是，那么值是未知的

# java - 使用 directjngine 在 ext-js 中无限滚动

> ID：13987091
> 
> 赞同：2
> 
> 时间：2012-12-21T09:03:22.443
> 
> 标签：java, javascript, json, extjs

首先我请你对我宽容一点：我只是一个可怜的 ext-js 和 javascript 新手......

我正在尝试适应我的需要 ext-js 中的[无限滚动网格示例](http://dev.sencha.com/deploy/ext-4.0.1/examples/grid/infinite-scroll.html)。我在 sencha ext-js 中定义了以下商店：

```
Ext.define('AM.store.M2MResources', {
    extend: 'Ext.data.Store',
    requires: 'Ext.direct.*', //  use ext-direct for binding
    model: 'AM.model.M2MResource',
    autoLoad: true,

    paramsAsHash:false,
    autoSave: false,

    pageSize: 25,
    // allow the grid to interact with the paging scroller by buffering
    buffered: true,

    proxy: {
        type: 'direct',
        api: {
            // create  : undefined,
            read    : M2MResourceServlet.getM2Mresources,
            // update  : undefined,
            // destroy : undefined 
        },      
        extraParams: {
              total: 100
        },
        root: 'data',
        fields: [{name:'label'}, {name:'address_unique'}, {name:'address_network'}, {name:'status'}],
        paramOrder: 'page, start, limit',
        reader: {       
            type: 'json',           
            root: 'data',
            successProperty: 'success',
            totalProperty: 'totalCount'
        },
        writer: new Ext.data.JsonWriter({
            encode: false,
            writeAllFields: true,
            listful: true
        }
        )
    }
}); 
```

与此 directJNgine 服务器对应：

```
public class M2MResourceServlet {
    public static class ResourceData{       
        public String label;
        public String address_unique;
        public String address_network;
        public String status;
    }

    public static class DirectStoreResult{
        ResourceData[] data;
        public int totalCount;
        public boolean success = true;

        public DirectStoreResult(ResourceData[] data, int totalCount) {
            super();
            this.data = data;
            this.totalCount = totalCount;
        }
    }

    static int counter = 0;
    @DirectMethod
    public DirectStoreResult getM2Mresources( Integer page, Integer start, Integer limit ) {
        ArrayList<ResourceData> result = new ArrayList<ResourceData>();

        // fill result list...

        DirectStoreResult r = new DirectStoreResult(result.toArray(new ResourceData []{}),limit);
        return r;
    }
} 
```

然后我指定了以下模型：

```
Ext.define('AM.model.M2MResource', {
    extend: 'Ext.data.Model',
    fields: [
        {name:'label' },
        {name:'address_unique' },
        {name:'address_network' },
        {name:'status' }
     ]
}); 
```

有了这个，我想将数据加载到以下网格中：

```
Ext.define('AM.view.resgrid.M2MResources', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.m2mresources',

    title: 'All Resources Here',    

    verticalScrollerType: 'paginggridscroller',

    store: 'M2MResources',

  initComponent: function() {

      console.log('initComponent function in View has been called...');

      this.columns = [
                      {header: 'friendly name',dataIndex: 'label',flex: 1, sortable: true},
                      {header: 'address unique', dataIndex: 'address_unique',flex: 1},
                      {header: 'address network', dataIndex: 'address_network', flex: 1},
                      {header: 'node status',dataIndex: 'status',flex: 1}
                      ];

      this.callParent(arguments);

      Ext.getStore('M2MResources').guaranteeRange(0, 100);
  }
}); 
```

不幸的是，商店似乎从不加载数据：网格面板显示“正在加载...”符号并且没有显示任何数据项。我怀疑问题出在我的直接方法返回的 json 中。客户端我得到以下 json 数据记录：

![ext-direct java方法返回的数据记录](../Images/76186edf1a0fa9f2465eb2e14fe5f1dd.png)

你能建议如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:29:24.637

响应数据与您的阅读器配置不匹配。您已经为您的阅读器配置了一个**root: 'data'**但我可以在响应中看到它没有数据节点。您显示的扩展节点是：**root: 'result.data'**。我也看不到属性**successProperty**和**totalProperty**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:54:19.170

好的，这个问题的合理答案可以在[这里](http://www.sencha.com/forum/showthread.php?247059-Paged-Grid-Using-a-directjngine-Back-end)找到。基本上，服务器端直接方法必须是形式

```
@DirectMethod
public PartialResult<ResourceData> getM2Mresources(int start, int limit) {
        ResourceData[] m2mResources = ...
    //...
        return new PartialResult<ResourceData>(Arrays.asList(m2mResources), 
    m2mResources.length);
} 
```

其中 PartialResult 类如下：

```
public class PartialResult<T> {

    /** the partial result set */
    private Collection<T> result;

    /** the size of the complete result set */
    private int total;

    public Collection<T> getResult() {
       return this.result;
    }

    public int getTotal() {
       return this.total;
    }

    public void setResult(Collection<T> result) {
       this.result = result;
    }

    public void setTotal(int total) {
       this.total = total;
    }

    public PartialResult(Collection<T> result, int total) {
       super();
       this.result = result;
       this.total = total;
    } 
```

}

我在 ResourceData 类中添加了一些吸气剂，就像在原始示例中一样。

js商店是

```
Ext.define('AM.store.M2MResources', {
    extend: 'Ext.data.DirectStore',
    requires: 'Ext.direct.*', //  use ext-direct for binding
    model: 'AM.model.M2MResource',

    autoLoad: true,
    buffered: true,
    pageSize: 20,
    purgePageCount: 0,
    leadingBufferZone: 60,
    trailingBufferZone: 0,

    constructor : function(config) {
        config = config || {};

        config.proxy = {
            type: 'direct',
            directFn : M2MResourceServlet.getM2Mresources,
            reader: {
                type: 'json',
                root: 'result'
            },
            paramOrder: 'start,limit',
            paramsAsHash: false
        };

        this.callParent([config]);
    },

    toString: function() {
        return 'M2MResources: count = ' + this.getCount() + ', totalCount = ' 
                + this.getTotalCount();
    }
}); 
```

显然，这正是我想做的。所以谢谢亚当戴维斯！无论如何，如果有人能解释为什么`directFn`必须使用该元素而不是`api`......

# android - Android IN App 购买 - 项目已拥有问题

> ID：13987092
> 
> 赞同：1
> 
> 时间：2012-12-21T09:03:25.313
> 
> 标签：android, in-app-purchase, in-app-billing

我的应用程序中有多个项目。我有两个设备。如果我在这些设备中的第一台设备上购买商品，然后尝试在另一台设备上购买相同的商品，我不能。（Google 播放意图显示消息 - 商品已拥有！然后它崩溃....:-( ) 商品在 google play 中被标记为“按用户帐户管理”。而且我对购买物品没有任何问题。

另一个问题是，如果我尝试 RESTORE TRANSACTION ACTION - 我得到了 result_developer_error （这有点奇怪......）：D

这些问题在 Android 2.2,4.1 上测试过

我的问题是：

1.  是否有可能允许多次购买此商品而无需将该商品标记为“非托管”？（我的意思是在不同的设备上多次使用该短语）

2.  如果有可能？可以在没有存储信息的服务器端的情况下完成吗？

我知道最简单的解决方案是更改 product_type - 但是我将失去恢复事务操作的机会....

我按照 google api 实施应用内 [http://developer.android.com/google/play/billing/billing_overview.html](http://developer.android.com/google/play/billing/billing_overview.html)

注意：在 - 应用程序中实现了 v2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:10:24.323

托管项目与您的帐户相关联。因此，如果您使用相同的 Google 帐户在不同的设备上购买，您将收到“已拥有”错误。如果您使用非托管项目，您可以根据需要多次购买该项目。在这种情况下，如果需要，您可能需要在自己的服务器上跟踪项目状态。如果您使用测试帐户对此进行测试，则恢复交易实际上不起作用。不过应该适用于已发布的应用程序。

In-app billing v3 以不同的方式处理这个问题，应该更容易管理。如果这是针对新实现，请考虑切换（或至少评估）v3。不清楚它有多稳定（或不稳定），因为它是相当新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:53:57.350

我终于通过在应用计费中实施新的 v3 解决了这个问题。实现版本 3 非常简单，它支持以非常非常好的方式检查事务。如果可以的话，我会将加一发送给谷歌以获取版本 3。如果您正在寻找此问题的解决方案，请使用此网站[“Google in app billing version 3”](http://developer.android.com/google/play/billing/api.html)

# asp.net - 来自 web.config 的 Asp .Net 自定义成员资格参数

> ID：13987095
> 
> 赞同：6
> 
> 时间：2012-12-21T09:03:43.863
> 
> 标签：asp.net, asp.net-membership

我目前正在为 asp .net 编写自定义成员资格提供程序，我遇到的问题是我不知道如何以与标准 asp.net 成员资格提供程序相同的方式为自定义成员资格提供程序提供参数在 web.config 文件中，例如密码长度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:13:53.870

当您派生自己的类时，`MembershipProvider`您必须重写该`Initialize()`方法，它具有以下签名：

```
public override void Initialize(string name, NameValueCollection config); 
```

这`System.Collections.NameValueCollection`是一个字典，您可以在其中找到写入`web.config`文件中的选项。这些选项的给出方式与您为“标准”提供程序（作为属性）指定选项的方式相同。每个字典条目都有属性名称的键和属性的值作为值（as `string`）。

```
public  class MyMembershipProvider : MembershipProvider
{
    public override void Initialize(string name, NameValueCollection config)
    {
        base.Initialize(name, config);

        _enablePasswordReset = config.GetBoolean("enablePasswordReset", true);
    }
} 
```

在我的示例中，在`GetBoolean()`某处声明的扩展方法如下：

```
public static bool GetBoolean(this NameValueCollection config,
    string valueName, bool? defaultValue)
{
    object obj = config[valueName];
    if (obj == null)
    {
        if (!defaultValue.HasValue)
            throw new WarningException("Required field has not been specified.");

        return defaultValue.Value;
    }

    bool value = defaultValue;
    if (obj is Boolean)
        return (bool)obj;

    IConvertible convertible = obj as IConvertible;
    try
    {
        return convertible.ToBoolean(CultureInfo.InvariantCulture);
    }
    catch (Exception)
    {
        if (!defaultValue.HasValue)
            throw new WarningException("Required field has invalid format.");

        return defaultValue.Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:07:53.260

如果您的提供程序源自`MembershipProvider : ProviderBase`所有配置，则应从 web.config 加载和应用所有配置。

考虑实现自定义`IPrincipal`和/或`IIdentity`- 它有时是一个更好的扩展点，因为不是每个人都知道它通常不被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:15:11.943

以同样的方式定义标准 .net 成员资格：

```
<membership defaultProvider="MyCustomMembershipProvider" userIsOnlineTimeWindow="30">
                <providers>
                    <clear />
                    <add name="MyCustomMembershipProvider" type="Namespace.MyCustomMembershipProvider" connectionStringName="db_ConnectionString" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="true" requiresUniqueEmail="false" passwordFormat="Encrypted" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="8" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="/" />
                    <add name="StandardMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="db_ConnectionString" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Encrypted" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="8" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="/" />
                </providers>
    </membership> 
```

# python - 读取字符串中最长的标识符

> ID：13987097
> 
> 赞同：0
> 
> 时间：2012-12-21T09:03:51.213
> 
> 标签：python, regex, python-2.7

嗨，我正在从文件中读取一行，我需要获取其中最长的标识符，例如在该行中

```
MY_Variable = Some_Variable+New_Variable; 
```

在上面的行中，我需要获取“Some_Variable”。我尝试使用下面的代码，但我得到的结果为

```
Some_Variable+New_Variable 
```

我试过这个

```
 if(re.search('[a-zA-Z]', Line_Read)):       ## To check whether line has identifier or not
    if(len(max(Line_Read.split(), key=len))>32):    ## length of the longest string is greater than 32 or not?
        print max(Line_Read.split(), key=len)       ## printing the identifier 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:05:20.510

Python 标识符可以定义为`[a-zA-Z_]\w*`：

```
max(re.findall(r'[a-zA-Z_]\w*', Line_Read), key=len) 
```

这返回

```
'Some_Variable' 
```

# php - mysql无限主键自动递增

> ID：13987098
> 
> 赞同：11
> 
> 时间：2012-12-21T09:03:55.343
> 
> 标签：php, mysql, primary-key, auto-increment

我有一个问题，我真的不确定。如果必须的话，首先请随意对我投反对票，但我真的很想听听更有经验的开发人员的意见。

我正在建立一个网站，我想在其中建立类似谷歌圈子的功能。

我的逻辑是这样的。每个用户在注册后都会有圈子。

例如，如果用户将注册

表单提交，以下查询将插入数据库

```
**id   | circle_name       | user_id**
------------------------------------
1      | circle one        | 1
------------------------------
2      | circle two        | 1
------------------------------
3      | circle three      | 1 
```

每个圈子都会有一个`primary key`

但这是我不确定的，所以一段时间后我有点害怕桌子会坏，我的意思是如果它会达到一定数量的 id，它实际上会停止生成更多。

当您`int`在数据库中指定默认值为 11 时，是的，我知道我可以增加或将其设置为我想要的值，但仍然给出更高的值是个好主意吗？

或者是否有可能使主键自动增量不受限制？

感谢您的意见和帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T09:05:30.170

> 或者是否有可能使主键自动增量不受限制？

您可以使用[`BIGINT`](http://dev.mysql.com/doc/refman/5.6/en/numeric-types.html).

严格来说它不是无限的，但是范围非常大，即使你非常努力也无法用完所有的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T09:07:00.530

只需运行一些数学运算，您就会自己得到答案。如果一个长度可以存储数十亿个值，并且您不希望每周有 100 万个新注册，那么即使“**理论上**”可能，达到它中断的程度“**实际上”也很困难**

# codeigniter - 主干.js 加载不同的 html

> ID：13987117
> 
> 赞同：0
> 
> 时间：2012-12-21T09:04:48.093
> 
> 标签：codeigniter, backbone.js

由于我最近遇到的问题，我最近在stackoverflow上发布了很多问题，你们真的帮了我很多。

我的问题：

我正在研究backbone.js，并且我在我的项目中研究过codeignitor。现在我的问题是在 ci 中，我可以直接从 ci 视图加载视图，并且可以轻松显示动态 html（对我来说工作正常）。问题是我必须将我的 js 代码和函数以及 ajax 调用转移到主干.js，而我几乎处于这个项目的开始阶段。我不清楚如何在主干中的某些事件上显示全新的页面 html。我的问题不清楚？让我进一步解释一下。

解释：

我的意思是我有一个索引页面，所有的东西都加载到这个页面中（滑块、页脚等）。每当单击任何项​​目以查看详细信息时，ci 都会调用适当的方法并为我提供在全新页面中显示该产品的 html（不加载），其中仅包含该产品的图像和该产品的一些其他选项。使用 ci 很容易，但是我如何使用backbone.js 来显示不同的页面或与索引页面完全不同的html，而不显示索引页面的其他内容。我可以弄清楚如何移动和设计它背后的逻辑，但我不知道如何为不同的事件加载这些不同的 html（比如关于按钮应该显示关于我们的页面，特色类别应该显示所有特色产品那个主索引文件。）

我真的很想得到一些方向。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:01:27.263

我认为您的意思是要制作单页应用程序。是的，骨干最好的主意是这样做。您将需要以下内容：

*   模板（应该在里面`<script type="text/template">`和`</script>`）
*   骨干视图
*   骨干模型
*   骨干路由器

# eclipse - eclipse：将 OSGI 插件作为 OSGI 框架运行

> ID：13987119
> 
> 赞同：0
> 
> 时间：2012-12-21T09:04:52.773
> 
> 标签：eclipse, osgi, equinox

我已经从 hello world 模板在 eclipse 中创建了插件项目，修改了 sysout。现在我正在尝试将项目作为 OSGI 框架运行。但我得到以下错误：

```
Root exception:
java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92) 
```

知道可能是什么原因吗？目前我使用的是 Eclipse Juno 32 位版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:53:39.213

问题是，在其他一些代码尝试创建或访问工作台资源之前，这行代码没有被调用。不确定您修改了什么，但必须首先在您的 Application 类中执行此行。也许在这一行添加一个断点：然后为非法状态执行一个断点，看看调试器首先停止的位置。如果出现异常，则需要在调用 createAndRunWorkbench 之后执行您的代码。在此行之前尝试在我的 Application 类中创建诸如 jface 向导之类的东西之前，我已经看到了此错误。

```
PlatformUI.createAndRunWorkbench(display, new ApplicationWorkbenchAdvisor()); 
```

# sql - SQLbase 数据不是数字的

> ID：13987121
> 
> 赞同：1
> 
> 时间：2012-12-21T09:05:14.223
> 
> 标签：sql, excel, numbers, sqlbase

我有一个在 Excel 中运行的查询，它需要显示来自我只有读取权限的 SQLbase 数据库中的数据。我无法以任何方式修改数据库。我需要能够过滤的列是一`varchar`列，但它的值只是数字。我需要能够`between`在 Excel 中进行过滤，所以我尝试这样做`column + 0`，Excel 将其作为数字拾取。这以前有效，但现在在某些数字上失败了。

该号码`704977990024`有效，但`991098000265`无效。我得到了第二个`Data is not numeric`。

这是查询：

```
SELECT (TABLE1.COLUMN + 0) AS "Artikelnummer"
FROM DB.TABLE TABLE1 
LEFT JOIN DB.OTHERTABLE TABLE2
ON TABLE1.COLUMN = TABLE2.COLUMN 
```

如何确保在 Excel 中将其作为数字获取？如果不在查询中，那么 Excel 本身如何？当我在 excel 中将该列设置`number`为时，它仍然显示为文本并且不会是数字，除非我尝试编辑单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:14:34.650

应该是溢出了吧 获得所需内容的另一种方法是用前导零填充数字。这将避免溢出并让您使用范围。我不知道语法...类似于`where Right('000000000000000' + nu, 17) between ...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:26:29.270

我还没有找到解决方案，但我确实找到了手动解决方法。

您选择整个列，然后剪切和粘贴在其他地方。您将其剪切是因为在放回数据时该列需要为空。之后，您选择新创建的列，然后复制或剪切它。然后选择需要数据所在的列（刚刚清空的那一列），然后按`paste > paste special`。然后选择乘法（或任何其他）并按确定。这样列将是数字的。

这可能是手动操作，但这是我找到的解决此问题的唯一方法。

# c# - Excel Range.Find 越来越慢

> ID：13987130
> 
> 赞同：0
> 
> 时间：2012-12-21T09:05:39.093
> 
> 标签：c#, excel, interop

我有一个包含这样列的文件：

*   ķ
*   ķ
*   ķ
*   SND
*   磷
*   磷
*   SND
*   ķ

...

列的长度例如为 20000。我使用以下 C# 代码沿此列移动：

```
 while (true)
        {
            // Find SND
            dest_cells = ex_cells.Find("SND", dest_cells, Excel.XlFindLookIn.xlValues, Excel.XlLookAt.xlWhole, Excel.XlSearchOrder.xlByColumns,
                                   Excel.XlSearchDirection.xlNext, false, false, false);

            // END?
            if (dest_cells.Row < row)
                return false;

            row = dest_cells.Row;

            // Find K
            dest_cells = ex_cells.Find("K", dest_cells, Excel.XlFindLookIn.xlValues, Excel.XlLookAt.xlWhole, Excel.XlSearchOrder.xlByColumns,
                                   Excel.XlSearchDirection.xlNext, false, false, false);

            // END?
            if (dest_cells.Row < row)
                return false;

            row = dest_cells.Row;

            // Some operations
            /*there were some operations, but I commented them. So they don't influence on performance*/
        } 
```

每次后续搜索的持续时间都在增加。我没有测量时间。但只是为了解释，让它成为：第一个 Find 需要 0.1 秒，第二个 0.2 秒，第十个 1 秒，二十个 2 秒，依此类推。

为什么？我无法理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:58:39.640

最快的方法取决于您要执行的操作：但可能最好的方法是将数据列分配给对象数组并处理它（对 Excel 对象模型的每个互操作调用都有非常高的开销）。有关各种方法的比较，请参阅[http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/](http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:07:28.503

当您循环时，您将`dest_cells`用作查找下一个匹配项的起点。`K`但是这个变量在查找和查找之间共享，并且这些变量`SND`的分布越多（在找到匹配项之后），代码就越需要在增加的区域中循环。使用不同的变量，例如`matchK`和`matchSnd`

# python - 需要帮助：Python 正则表达式

> ID：13987131
> 
> 赞同：0
> 
> 时间：2012-12-21T09:05:47.550
> 
> 标签：python, regex

我正在编写一个正则表达式，它将解析下面的字符串并在 6.0 秒处准确停止。这个数字 6.0s 也可以是一系列数字，如 150 或小数，如 12.35。“s”可以是任何字母。停靠点最重要

这是我的正则表达式：`[\S+\s]+[\d.\d]+[a-z]?`

我的问题是我的正则表达式不断通过 6.0s 并将虚线一直复制到“查看”

```
15+MM  {NXTW FHR 3153   AB  MABXT YT 197-17 <PA>} | APE 6                   6.0s
------------------------------------------------------------
© Copyright 2012 The Boston Series Group, Inc. All rights reserved. See 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:28:17.187

如何**跨换行符拆分字符串并匹配任何不超过数字的内容，可选地后跟小数、数字和字符**：-

```
import re

s = '''15+MM  {NXTW FHR 3153   AB  MABXT YT 197-17 <PA>} | APE 6                   6.0s
------------------------------------------------------------
 Copyright 2012 The Boston Series Group, Inc. All rights reserved. See'''
m = re.match(r'.+\d+(\.\d+)?[a-z]?', s.split('\n')[0])
print m.group(0) 
```

输出 ：-

```
C:\>python st.py
15+MM  {NXTW FHR 3153   AB  MABXT YT 197-17 <PA>} | APE 6                   6.0s 
```

**或者也许使用破折号作为分隔符，只需说：-**

```
import re

m = re.match(r'(.*?)\s+-----', s)
print m.group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:24:48.587

这将匹配以一系列数字、字符或 开头的行`+`，然后是浮点数之前的任何内容，后跟`s`

```
^[0-9A-Z+]+\s+.*\s+[0-9.]+s$ 
```

您还应该确保您的正则表达式不是多行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T16:09:48.323

Does this work for you? I used `re.search()` because it searches the entire string, not by each line. Read more [here](http://docs.python.org/2/library/re.html#re.search).

```
# -*- coding: utf-8 -*-

import re

s = '''
15+MM  {NXTW FHR 3153   AB  MABXT YT 197-17 <PA>} | APE 6                   6.0s
------------------------------------------------------------
© Copyright 2012 The Boston Series Group, Inc. All rights reserved. See
'''

m = re.search('.+\d+(?:\.\d+)?[a-zA-Z]{1}', s)
if m != None: print m.group(0) 
```

Output:

```
15+MM  {NXTW FHR 3153   AB  MABXT YT 197-17 <PA>} | APE 6                   6.0s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:18:07.260

您的主要问题是您用于`[]`对事物进行分组-这是一个字符类（“任何这些字符”构造）。相反，你会想要使用`()`.

但是，请尝试使用类似`^\S+\s.+\d+(?:\.\d+)?[a-z]?$`的东西——and 表示`^`一行`$`的开始和结束，听起来你根本不需要捕获组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T09:28:47.307

您没有为您的`6.0s`组前面的文本指定任何内容，因此没有合理的方法为其创建可靠的正则表达式部分。唯一明确规定的是结束。话虽如此，此示例将打印所有以`6.0s`规范结尾的行：

```
for line in opened_file:
    mat = re.search("^.*\s(-?\d+(?:\.\d+)?[a-zA-Z])$", line)
    if mat is not None:
        print mat.group(1) 
```

唯一的假设是它前面有一些空格，这是我从您尝试过的内容中猜到的。

# typo3 - TYPO3：通过调度程序发布工作区编辑？

> ID：13987132
> 
> 赞同：3
> 
> 时间：2012-12-21T09:05:54.860
> 
> 标签：typo3, scheduler, workspace, typo3-4.5

我设法使用 cron 任务运行调度程序。我设法使用调度程序在发布日期自动发布整个工作区。

但我不希望整个工作区都发布在调度程序任务上，而只发布一次编辑。

我试图给工作区中的编辑一个发布日期，但没有成功。
这甚至可能吗？

TYPO3 版本：4.5.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:54:11.557

您可以为这个单一编辑创建另一个工作区。并发布这个不同的工作区，您只有一个编辑。

如果您提供更多详细信息，也许可以在没有工作区的情况下做到这一点？您可以创建两个具有不同开始和结束日期的内容元素。

# perl - Perl 解析 - 字符、制表符和空格的混合

> ID：13987134
> 
> 赞同：2
> 
> 时间：2012-12-21T09:06:01.957
> 
> 标签：perl, parsing

我的代码中有以下类型的行：

```
MMAPI_CLOCK_OUTPUTS = 1,        /*clock outputs system*/
MMAPI_SYSTEM_MANAGEMENT = 0,    /*sys man system*/ 
```

我想解析它们以获得：

```
'MMAPI_CLOCK_OUTPUTS' 
'1'
'clock outputs system' 
```

所以我尝试了：

```
elsif($TheLine =~ /\s*(.*)s*=s*(.*),s*\/*(.*)*\//) 
```

但这没有得到最后一个字符串“时钟输出系统”解析代码实际上应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:09:09.440

您应该避开斜线、星号和`s`for 空格。而不是写`/`,`*`或`s`在你的正则表达式中写`\/`,`\*`和`\s`：

```
/\s*(.*)\s=\s*(.*),\s\/\*(.*)\*\// 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:18:51.600

```
if($TheLine =~ m%^(\S+)\s+=\s+(\d+),\s+/\*(.*)\*/%) {
    print "$1 $2 $3\n"
} 
```

这`%`用作替代分隔符，以避免在转义字符时出现[倾斜牙签综合症。](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)`/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:32:50.017

试试这个正则表达式：`/^\s*(.*?)\s*=\s*(\d+),\s*\/\*(.*?)\*\/$/`

这是一个可以测试它的示例：

```
#!/usr/bin/perl
use strict;
use warnings;

my $str = "MMAPI_CLOCK_OUTPUTS = 1,        /*clock outputs system*/\n
           MMAPI_SYSTEM_MANAGEMENT = 0,    /*sys man system*/";

while ($str =~ /^\s*(.*?)\s*=\s*(\d+),\s*\/\*(.*?)\*\/$/gm) {
    print "$1 $2 $3 \n";
}

# Output:
# MMAPI_CLOCK_OUTPUTS 1 clock outputs system
# MMAPI_SYSTEM_MANAGEMENT 0 sys man system 
```

# macos - .SH/.COMMAND Bash 文件 Mac OSX 不工作

> ID：13987139
> 
> 赞同：0
> 
> 时间：2012-12-21T09:06:39.250
> 
> 标签：macos, bash, sh

当我尝试运行下面的脚本时，我不断收到此错误

无法执行文件“test.command”，因为您没有适当的访问权限。

尝试将只读更改为读/写。没用

```
for domain in $(pwgen -1A0B 6 10000); do echo -ne "$domain.com "; if [ -z "$(whois    $domain.com | grep -o 'No match for')" ]; then echo -ne "Not "; fi; echo "Available for register"; done >> domains.txt 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:09:06.730

您还需要授予执行权限才能执行它。

```
chmod u+x file 
```

# java - StringBuilder 的“智能”初始容量的现有解决方案

> ID：13987142
> 
> 赞同：5
> 
> 时间：2012-12-21T09:06:42.480
> 
> 标签：java, stringbuilder

我有一段记录和跟踪相关的代码，它经常在整个代码中调用，尤其是在打开跟踪时。StringBuilder 用于构建字符串。字符串具有合理的最大长度，我想大约是数百个字符。

问题：是否有现有的图书馆可以做这样的事情：

```
// in reality, StringBuilder is final,
// would have to create delegated version instead,
// which is quite a big class because of all the append() overloads
public class SmarterBuilder extends StringBuilder {         

    private final AtomicInteger capRef;

    SmarterBuilder(AtomicInteger capRef) {
        int len = capRef.get(); 
        // optionally save memory with expense of worst-case resizes:
        // len = len * 3 / 4;
        super(len);
        this.capRef = capRef;
    }

    public syncCap() {
        // call when string is fully built
        int cap;
        do {
            cap = capRef.get();
            if (cap >= length()) break;
        } while (!capRef.compareAndSet(cap, length());
    }
} 
```

为了利用这一点，我的日志相关类将有一个`capRef`具有合适范围的共享变量。

（奖励问题：我很好奇，是否可以在不循环的情况下执行 syncCap() ？）

动机：我知道 StringBuilder 的默认长度总是太少。我可以（并且目前确实）输入 100 的临时初始容量值，这会导致在某些情况下调整大小，但并非总是如此。但是，我不喜欢源代码中的幻数，而这个特性是“优化一次，在每个项目中使用”的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:40:40.010

确保您进行了性能测量，以确保您确实从额外的工作中获得了一些好处。

作为类似 StringBuilder 的类的替代方案，请考虑使用 StringBuilderFactory。它可以提供两种静态方法，一种用于获取 StringBuilder，另一种用于在您完成构建字符串时调用。您可以将 StringBuilder 作为参数传递给它，它会记录长度。getStringBuilder 方法将使用其他方法记录的统计信息来选择初始大小。

有两种方法可以避免在 syncCap 中循环：

1.  同步。
2.  忽略失败。

在这种情况下忽略故障的理由是您只需要对实际长度进行随机抽样。如果另一个线程同时更新，您无论如何都会获得字符串长度的最新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:28:40.167

您可以将每个字符串的字符串长度存储在统计数组中。运行您的应用程序，并在关闭时获取字符串长度的 90% 四分位数（对所有 str 长度值进行排序，并在数组 pos = sortedStrings.size() * 0,9 处获取长度值

这样，您创建了一个初始字符串生成器大小，其中 90% 的字符串都适合。

**更新**
该值可以是硬编码的（就像 java 对 ArrayList 中的值 10 所做的那样），或者从配置文件中读取，或者在测试阶段自动计算。但是四分位数计算不是免费的，所以最好运行项目一段时间，在 SmartBuilder 中即时测量 90% 的四分位数，不时输出 90% 的四分位数，然后更改属性文件以使用该值.

这样，您将获得每个项目的最佳结果。
或者，如果您更进一步：让您的智能 Builder 不时在配置文件中更新该值。但这一切都不值得付出努力，您只会对具有数百万条目的数据这样做，例如数字路线图等。

# android - Android：如何使用 root 和 shell 设置 GPS 始终开启，以跟踪工作人员

> ID：13987145
> 
> 赞同：1
> 
> 时间：2012-12-21T09:07:02.530
> 
> 标签：android, gps

我正在为我们的工人编写小应用程序，以便在地形中工作，我有一些想法。我们希望跟踪他们的位置，以实现更好的物流和更好的工作控制。

应用程序对我来说不是问题，而是打开/关闭 GPS/位置管理器的按钮。是否有可能将 GPS 设置为始终打开，并且无法关闭，或者可能会检测到关闭，然后每隔几秒将 GPS 重新打开（？bash 脚本？）。

我已经植根了我的设备 (GALAXY GIO)，并且我可以完全访问 CLI。我知道如何禁用/启用几乎所有设备，但 GPS 对我来说仍然是个谜……

是否可以在不更改 ROM 的情况下做类似的事情？当前的 ROM 是 2.3.6 Gingerbread。

*   在此先感谢！，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:27:37.047

使用`services`并将此代码放入`your services.`

```
String provider = Settings.Secure.getString(getContentResolver(),
        Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

if (!provider.contains("gps")) { 
    // if gps is disabled
    final Intent poke = new Intent();
    poke.setClassName("com.android.settings","com.android.settings.widget.SettingsAppWidgetProvider");
    poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
    poke.setData(Uri.parse("3"));
    sendBroadcast(poke);
    /*
     * Toast.makeText(getApplicationContext(), "GPS On Success",
     * Toast.LENGTH_SHORT).show();
     */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:12:28.523

除了漏洞利用（看起来只适用于 2.2 和某些 2.3 版本）和自定义 ROM（如果你能找到这样做的）之外，没有可靠的方法可以满足你的需要。

在 Android 中，用户可以控制大多数功能。Android是针对个人使用的，它不太适合这种东西。您最好切换到另一个允许您执行此操作的平台（例如：黑莓），或者甚至通过蓝牙从始终打开的 GPS 跟踪设备读取数据。他们仍然可以禁用蓝牙，因此您可能需要搜索完全自主的 GPS 跟踪设备（市场上有很多可用的设备，其中一些还有 SIM 卡，因此可以实时发送数据）。

最后一点，我想说，如果需要，大多数工作人员会很乐意启用 GPS，如果他们禁用它，您仍然可以检测到它并向 WS 或日志报告，以便询问他们稍后解释。

# cocoa - NSOpenPanel 破坏了我的 SDL/OpenGL 应用程序

> ID：13987148
> 
> 赞同：2
> 
> 时间：2012-12-21T09:07:24.477
> 
> 标签：cocoa, opengl, sdl

我正在制作一个小型 SDL/OpenGL 游戏，用户可以在其中使用可可打开文件对话框 (NSOpenPanel) 选择地图/关卡。但是，这样做时，每次 glClear 都会收到错误“帧缓冲区操作无效”。当我获得帧缓冲区的状态（使用 glCheckFramebufferStatus）时，它是 GL_FRAMEBUFFER_UNDEFINED (0x8219)。我还注意到我不需要显示打开的面板（使用 runModal），而只需创建它，就会发生错误。可以在 SDL_SetVideoMode 之前创建它，但不能在之后创建。奇怪的是，NSSavePanel 根本不会引起这些问题。有任何想法吗？

**编辑：**添加了一些代码来显示一个精简的 test-init 方法：

```
SDL_Init( SDL_INIT_VIDEO );
m_pScreen = SDL_SetVideoMode( 800, 600, 32, SDL_OPENGL );

// this section causes the problem. Works well if I change the NSOpenPanel to a NSSavePanel
@autoreleasepool {
    NSOpenPanel *openPanel = [[NSOpenPanel openPanel] retain];    
    [openPanel runModal];
    [openPanel release];
}

int number = glCheckFramebufferStatus(GL_FRAMEBUFFER); 
assert(number == GL_FRAMEBUFFER_COMPLETE); // crash here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:21:18.140

这通常是因为没有当前上下文。操作系统提供的代码`NSOpenPanel`有时可以更改当前的 OpenGL 上下文，或将当前上下文保留为未定义。当发生这种情况时，您必须确保将上下文设置回您正在绘制的上下文。我在上周正在处理的一些代码中遇到了同样的问题！:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:45:03.470

经过更多测试（并阅读了以前的答案），我找到了一个适合我的解决方案：

```
@autoreleasepool    {
NSOpenGLContext *foo = [NSOpenGLContext currentContext];
NSOpenPanel *openPanel = [NSOpenPanel openPanel];
[openPanel runModal];
[foo makeCurrentContext];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T16:00:36.467

为了解决这个奇怪的问题，如果帧缓冲区状态！= GL_FRAMEBUFFER_COMPLETE，我必须使用 SDL_SetVideoMode 重置我的视图

# gwt - 如何在GWT的ActionCell中修改按钮的宽高

> ID：13987150
> 
> 赞同：1
> 
> 时间：2012-12-21T09:07:37.757
> 
> 标签：gwt

按钮是由gwt中的ActionCell自动生成的，我想改变生成按钮的宽高，有什么方法吗？
我检查了 ActionCell 没有任何 addStyleName 允许我更改按钮的 css。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:00:07.470

你有几个选择。

如果您在 CellTable 或 DataGrid 中使用此单元格，请在使用 ActionCell 构建的列上设置样式：

```
myColumn.setCellStyleNames("myButtonStyle"); 
```

您还可以在包含 ActionCell 的父元素上设置此样式：

```
.myButtonStyle button {
    background: red;
} 
```

或者，如果需要，甚至更具体：

```
.myButtonStyle td button {
    background: red;
} 
```

# ios - iOS 自定义 UITableView 单元格按钮

> ID：13987151
> 
> 赞同：0
> 
> 时间：2012-12-21T09:07:39.610
> 
> 标签：ios, uitableview, uibutton, swipe

我希望当用户滑动表格视图单元格时，显示多个编辑按钮（他默认是删除按钮）。是否可以在`tableView:tableView editingStyleForRowAtIndexPath:`方法中放置自定义按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T21:10:37.397

我创建了一个新库来实现可滑动按钮，它支持各种转换和可扩展按钮，如 iOS 8 邮件应用程序。

[https://github.com/MortimerGoro/MGSwipeTableCell](https://github.com/MortimerGoro/MGSwipeTableCell)

该库与创建 UITableViewCell 的所有不同方法兼容，并在 iOS 5、iOS 6、iOS 7 和 iOS 8 上进行了测试。

![在此处输入图像描述](../Images/1bfbf26516dd2693ae70d4c5a063ead9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:11:37.360

将手势识别器添加到您的类中，并在其选择器中尝试以下操作。

```
-(void)cellDidSwipeLeft:(UIGestureRecognizer *)_gestureRecognizer
{
     if(_gestureRecognizer.state == UIGestureRecognizerStateEnded)
     {
         CGPoint swipeLocation = [_gestureRecognizer locationInView:self.tableView];

            NSIndexPath *swipedIndexPath = [self.tableView indexPathForRowAtPoint:swipeLocation];

            UITableViewCell* swipedCell = (UITableViewCell *)[self.tableView cellForRowAtIndexPath:swipedIndexPath];
            YourCustomBtn *Btn = (YourCustomBtn *)[swipedCell viewWithTag:999];

            [self performAnimationOnObject:Btn forPoint:swipeLocation];
      }
}

-(void)performAnimationOnObject:(id)view forPoint:(CGPoint)point
    {
     CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
        animation.delegate = self;
        animation.fromValue = [NSValue valueWithCGPoint:CGPointMake(btn.superview.frame.size.width, btn.center.y)];
                animation.toValue = [NSValue
                                     valueWithCGPoint:CGPointMake(mainCleanFrame.origin.x, btn.center.y)];
                animation.fillMode = kCAFillModeForwards;
                btn.center = CGPointMake(btn.frame.origin.x, btn.center.y);
    } 
```

# android - 关于 Android HttpPost 请求

> ID：13987153
> 
> 赞同：1
> 
> 时间：2012-12-21T09:07:53.730
> 
> 标签：android, http-post

我遇到了一个 Android HttpPost 请求问题。像这样的代码：

```
@Override
public void onClick(View v) {

                NameValuePair nameValuePair1 = new BasicNameValuePair("name", "zhangsan");
                NameValuePair nameValuePair2 = new BasicNameValuePair("age", "18");
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(nameValuePair1);
                nameValuePairs.add(nameValuePair2);

                try {
                    HttpEntity requestHttpEntity = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
                    HttpPost httpPost = new HttpPost("http://www.*.cn/test.aspx");
                    httpPost.setEntity(requestHttpEntity);
                    HttpClient httpClient = new DefaultHttpClient();

                    //Using the Http client sends request object
                    try {
                        System.out.println("1111111111111");
                        httpResponse = httpClient.execute(httpPost);
                        System.out.println("2222222222222");
                        httpEntity = httpResponse.getEntity();
                        System.out.println("33333333333333");
                        System.out.println(EntityUtils.toString(httpResponse.getEntity()));
                        System.out.println("44444444444444");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                }

            } 
```

通过测试，程序可以在Android2.3和模拟器上正常运行，最终得到正确的输出。

在Android2.1和模拟器或Android2.2上运行会卡在以下位置。

```
System.out.println (EntityUtils.toString (httpResponse.getEntity ())); 
```

等了半天，偶尔会弹出应用无响应的提示，偶尔会出现`"44444444444444"`. 但是没有`"System.out.println (EntityUtils.toString (httpResponse.getEntity ()));"`正常情况下会得到的函数的输出。

所以我分别对带模拟器的android2.2手机和带模拟器的android2.1手机做了一些测试。

测试一：

我改成`http://www.*.cn/test.aspx`，`http://www.google.com`它运行正常。

测试二：

我注释掉了`"httpPost.setEntity (requestHttpEntity); "`, 然后在代码中请求了没有请求参数的 URL。它运行正确。

请给我一个建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:14:01.127

将代码移动到异步任务可以使用这些链接来执行您的任务。看[这里](http://android10.org/index.php/articlesother/239-android-application-and-asynctask-basics)，[这里](http://saigeethamn.blogspot.in/2010/04/threads-and-handlers-android-developer.html)， [这里](http://thedevelopersinfo.wordpress.com/2009/10/19/using-handler-for-long-time-operations-in-android/)， [这里](http://thedevelopersinfo.wordpress.com/2009/10/19/using-handler-for-long-time-operations-in-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:16:53.803

您需要在单独的线程中编写 HttpPost。如果用户单击，它将冻结 UI。请找到执行 HttpPost 的示例代码。

```
public class ConnectionManager{
    private Context context;

    public ConnectionManager(Context ctx){
        this.context = ctx;
    }

    public boolean networkInfo(){
        ConnectivityManager connMgr = (ConnectivityManager)this.context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null && networkInfo.isConnected()) {
            return true;
        } else {
            return false;
        }
    }

    public void showAlert(String title,String message){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                this.context);

        // set title
        alertDialogBuilder.setTitle(title);

        // set dialog message
        alertDialogBuilder
        .setMessage(message)
        .setCancelable(false)
        .setNegativeButton("OK",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();

    }
    public String execute_get(String url) {
        // TODO Auto-generated method stub
        HttpResponse response  = null;
        String str_response = "";               

        if(networkInfo()){
            DefaultHttpClient httpsClient = getHTTPSClient();

            try {
                HttpGet httpget = new HttpGet(url);
                response = httpsClient.execute(httpget);
                if (response != null) {
                    str_response = EntityUtils.toString(response.getEntity());
                    Log.d("Connection Manager","Response: "+str_response);
                }
            }catch(Exception e){
                e.printStackTrace();
            }
        }else{
            showAlert("Connection Error","Please connect to wifi/3g to continue");
        }

        return str_response;
    }

    public DefaultHttpClient getHTTPSClient() {
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

        HttpParams params = new BasicHttpParams();
        params.setParameter(ConnManagerPNames.MAX_TOTAL_CONNECTIONS, 30);
        params.setParameter(ConnManagerPNames.MAX_CONNECTIONS_PER_ROUTE, new ConnPerRouteBean(30));
        params.setParameter(HttpProtocolParams.USE_EXPECT_CONTINUE, false);
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);

        ClientConnectionManager cm = new SingleClientConnManager(params, schemeRegistry);
        DefaultHttpClient httpsClient= new DefaultHttpClient(cm, params);
        return httpsClient;
    }

    public String execute_post(String url,String request){
        HttpResponse response  = null;
        String str_response = "";               
        if(networkInfo()){
            DefaultHttpClient httpsClient = getHTTPSClient();

            try {
                HttpPost httppost = new HttpPost(url);

                List<BasicNameValuePair> nameValuePairs = new ArrayList<BasicNameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("jsonData", request));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));   
                response = httpsClient.execute(httppost);

                if (response != null) {
                    str_response = EntityUtils.toString(response.getEntity());
                    Log.d("ConnectionManager", "Response: "+str_response);
                }
            }catch(Exception e){
                e.printStackTrace();
            }
        }else{
            showAlert("Connection Error","Please connect to wifi/3g to continue");
        }
        return str_response;
    }   

}

// Use the above like this 

                              new Thread() {
                    @Override
                    public void run() {
                        try {
                            String input = "Your post data"
                            Log.d("POSTDATA",input);
                            String response = execute_post(URLS.LOGIN_AUTH,input);

                            Message responseMsg = new Message();
                            Bundle b = new Bundle();
                            b.putString("response", response);
                            responseMsg.setData(b);

                            handler.sendMessage(responseMsg);
                        }catch(Exception e){

                        }
                    }
                }.start(); 
```

# ios - 在不使用自动布局的情况下自定义 3.5 和 4 英寸 iPhone 屏幕的布局

> ID：13987157
> 
> 赞同：1
> 
> 时间：2012-12-21T09:08:07.397
> 
> 标签：ios, xcode, uiview

由于 iOS 版本不兼容，我无法使用自动布局。但是，如果我想要屏幕底部的一些组件（可能带有一些填充）以及包括标签栏，该怎么办。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:32:57.957

如果您在 IB 中创建界面，那么您可以使用尺寸检查器上提供的自动调整大小的遮罩（也称为“弹簧和支柱”）。

![自动调整大小](../Images/b350d9a3d2f6bd51f4e449e20446359d.png)

它不如 AutoLayout 灵活，因此您的里程可能会有所不同......

# android - 如何在android中使用achart引擎增加条形图的宽度？

> ID：13987158
> 
> 赞同：1
> 
> 时间：2012-12-21T09:08:28.660
> 
> 标签：android, achartengine

我正在使用 achartengine 在我的应用程序中显示单个条形图以供查看。我需要增加栏的宽度。这是我的代码

```
 CategorySeries series = new CategorySeries("Demo Bar Graph");
    series.add(65);

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series.toXYSeries());

    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    mRenderer.setXAxisMin(2);
    mRenderer.setXAxisMax(2);       
    mRenderer.setYAxisMin(0);
    mRenderer.setYAxisMax(50); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:13:36.590

尝试使用下面的代码

**`renderer.setBarSpacing(-0.5);`**

# html - 我如何将画布覆盖在文本上？

> ID：13987162
> 
> 赞同：14
> 
> 时间：2012-12-21T09:08:46.493
> 
> 标签：html, css, overlay, html5-canvas

![我的困境](../Images/2fe76c6ad04b56587efb83c8823ad995.png)

嘿大家！所以上面的图像是我试图用我的代码实现的，但是一个或另一个总是将另一个推到它的下方或上方，而不是仅仅坐在彼此之上。

我一直在阅读 z-index 和 top:0; 但无论我尝试什么，我似乎都无法得到我想要的结果。可能是我在文本上使用了淡入淡出的 javascript 效果，但我不确定。这是我的代码，你会推荐什么？谢谢！

```
 <style type="text/css">

body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    background-color: #FFFFFF;
    background-repeat: repeat;
    font-size: 12px;
    color: #333366;
}

#picOne, #picTwo {
position:relative;
display: none;
float:center;
}

#pics {
}

#my-object {
  position: absolute;
  z-index: 1;
  top: 0px;
}

</style>

<script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('#picOne').delay(1000).fadeIn(2000).delay(2500);
    $('#picTwo').delay(2000).fadeIn(1500).delay(2000);
});
</script>

</head>

<body>

<div id="pics" align="center">
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>

<td valign="middle" align="center">
<table cellpadding="0" cellspacing="0" border="0">

        <tr>
        <td align="center" valign="middle"><font size="200" face="Arial" id="picTwo" color="black">SOME TEXT</font></td>
        </tr>

        <tr><td align="center" valign="middle">     
<script type="text/javascript" src="widgets.js"></script>
<script src="three.js" type="text/javascript"></script>
<script src="trail.js" type="text/css"></script>
<div id="my-object">
<canvas></canvas>
</div></td>
        </tr>

</table>
</td>
</tr>
</table>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T09:51:54.280

我想这就是你要找的东西：http: [//jsfiddle.net/6C55n/](http://jsfiddle.net/6C55n/)

我将绝对位置设置为文本和画布。之后，我只是为画布设置了更大的 z-index。

这里应该注意的是对画布使用透明图像。

**JavaScript**

```
var canvas = document.getElementById('can'),
    context = canvas.getContext('2d');

var img = document.createElement('img');
img.onload = function () {
    context.drawImage(this,0,0);
};
img.src = 'http://www.planet-aye.co.uk/seasonal05/snow.png';
​ 
```

**HTML**

```
<canvas width="640" height="480" id="can"></canvas>
<div id="labelDiv">Some text</div>​ 
```

**CSS**

```
#labelDiv {
    font-size: 70px;
    position: absolute;
    top: 280px;
    left: 100px;
    z-index: 1;
}
#can {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 3;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T09:49:27.087

这对我来说很好：[JSFiddle](http://jsfiddle.net/rAgc3/)

HTML

```
​&lt;p>Some text</p>
<canvas></canvas>​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
body {
   background-color:#5FC0CE;
}

canvas {
  position:absolute;
  top:0;
  left:0;
  z-index:100;

  background-color:#FFAE73;  

  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  -moz-opacity:0.5;
  -khtml-opacity: 0.5;
  opacity: 0.5;    
} 
```

# c# - 当我发布一个 jquery ajax 帖子时，firebug 向服务器显示了三个不同的回调

> ID：13987163
> 
> 赞同：1
> 
> 时间：2012-12-21T09:08:51.360
> 
> 标签：c#, jquery

每当我在当前应用程序中进行 ajax 回调时，firebug 都会向服务器显示三个（总是三个）回调，其中的两个似乎永远不会完成。我什至看不到这两个正在传递什么，因为扩展它们什么都没有显示。

我在各种活动上执行的代码如下：

```
 $.post(Handler, coreParams, function (data) 
            {$(".PLTableTab").html(data); setAfterReload("pl", "perf");}, "html"); 
```

handler 和 coreparames 没有什么不寻常的——一个 handler 位置和要传入的参数。这是我以前在其他地方做过的东西，从来没有遇到过这个问题。

我已经完成了它，并且只有一个调用它，它正在生成三个服务器调用。我只是担心，因为随着时间的推移，这似乎会减慢应用程序的速度。

我已经用谷歌搜索并检查了其他解决方案的堆栈溢出，但没有成功。它不是（不再是！）多个绑定或在错误时间调用的代码。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:42:45.630

您应该提供有关哪些事件/方法调用您 $.post 的更多信息，否则我们只能猜测原因。

我发现在大多数情况下，当 jquery 多次触发时，它与类选择器有关

```
$('.mytriggerclass').click(... 
```

如果您的 html 标记中有错误，这可能会触发多次，例如在带有

*   如果您错过了结束标签，请添加标签。

# java - 使用身份验证令牌的 Java REST 服务

> ID：13987165
> 
> 赞同：16
> 
> 时间：2012-12-21T09:08:59.770
> 
> 标签：java, security, rest, jakarta-ee, authentication

在我使用 Java EE 6 的 Web 应用程序上。我想将我的一些功能公开为 Json Rest 服务。我想使用身份验证令牌进行登录，用户将发送他们的用户名、密码，服务器将发回一个令牌，该令牌将用于授权用户在给定时间内的进一步请求..

到目前为止有几个问题困扰着我；

*   当服务器创建令牌并将其发送给客户端时，服务器应该将其保存在 DB 或 Bean 中，使用诸如哈希表之类的东西作为用户 ID-令牌对？

*   我可以使用任何 Java EE 特定 API 获得一些帮助吗？或者这必须是所有自定义代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T09:13:11.583

这是我的输入：

*   我会将令牌保存在数据库中，以防您需要重新启动服务器而不想丢失所有用户的令牌。您也可以将其保存在内存中以加快请求速度，并且如果在内存中找不到它，则仅在 DB 中查找它。

*   我会接受标头中的令牌。我会将其余服务放在 HTTPS 上，以便对请求进行加密，然后您无需担心在请求中手动加密令牌

*   我可能会看看 JAX-RS，看看它提供了哪些功能

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T17:37:36.323

我最近发表了一篇关于如何在 JAX-RS REST API 中使用简单的会话令牌方法和使用会话令牌作为共享密钥来签署请求的更安全的方法来设置基于角色的授权的[博客。](http://porterhead.blogspot.co.uk/2013/01/writing-rest-services-in-java-part-6.html)

它归结为：

*   从服务器获取会话令牌以及用户的一些标识符
*   使用令牌对请求中的信息进行加密
*   还使用时间戳和 nonce 值来防止 MITM 攻击
*   永远不要来回传递会话令牌，除非最初检索它时
*   对会话令牌有过期策略

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:17:18.877

将令牌保存在 bean 或哈希表中不会持久。数据库将在执行之间持续存在。

如果您要使用 REST，那么您可以将参数中的身份验证传递给方法，或者在请求标头本身中传递。加密是另一回事。我想这取决于系统的规模，以及它的开放程度。如果安全性是重中之重，那么是的，您应该找到某种形式的加密。

我使用[Spring Framework](http://www.springsource.org/spring-framework)和[Spring Security](http://static.springsource.org/spring-security/site/)做过类似的事情。这些东西使用这个比较简单。编写自定义代码就是重新发明轮子。有很多框架可以帮助你。但是，您将拥有该框架的学习曲线。

# c++ - dynamic_cast 的行为方式与 APP_STL := gnustl_static 不同

> ID：13987170
> 
> 赞同：0
> 
> 时间：2012-12-21T09:09:28.037
> 
> 标签：c++, android-ndk, dynamic-cast

我有一个名为 Square 的简单 C++ 类，它继承自 Comparable（具有函数 compareTo 的接口）。

这是 compareTo 方法的 C++ 实现：

```
int Square::compareTo(Comparable* c, char criteria) {

    if (dynamic_cast<Square*>(c) != NULL) {
        return 2;
    }
    else {
        return 4;
    }
} 
```

我用 Android-ndk (r8c) 生成了 libray (.so 文件)。在下面找到 Android.mk 和 Application.mk 的代码

安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := testinterface
LOCAL_SRC_FILES := wrappers.cpp Shape.cpp Square.cpp Circle.cpp
LOCAL_CPP_FEATURES += rtti
//LOCAL_CFLAGS    := -frtti           -> The commented lines were tests
//LOCAL_CPP_FEATURES += exceptions
//LOCAL_CPPFLAGS += -fexceptions

include $(BUILD_SHARED_LIBRARY) 
```

应用程序.mk：

```
//APP_CPPFLAGS += -frtti -> That was for a test but it didn't work either
APP_STL := gnustl_static 
```

这是我用来调用函数 compareTo 的 Java 代码（我使用 SWIG 生成 Java 包装器）：

```
Square s = new Square(10);
Square s3 = new Square(10);
outputText.append("s.compareTo(s3) ? " + s.compareTo(new Comparable(Square.getCPtr(s3), false), 'c') +"\n"); 
```

结果显示 4，关于 c++ 代码，这意味着 s3 不是 Square。问题是，如果我在 Application.mk 文件中更改`APP_STL := gnustl_static`为，结果为 2。`APP_STL := stlport_static`

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:24:35.153

构造函数和`dynmic_cast`in 是不同的共享对象吗？如果是这样，传递给的选项是`dlopen`什么？如果共享对象是用 加载的`RTLD_LOCAL`，那么 g++ 会认为`Square`一个中的类型与另一个中的类型无关`Square`，因此`dynamic_cast`会失败。

如果您没有`dlopen`显式调用，则隐式加载将使用用于加载需要共享对象的共享对象的标志。当 Java 加载共享对象时，它使用`RTLD_LOCAL`，这意味着由该共享对象隐式加载的任何其他共享对象也将使用 `RTLD_LOCAL`。在我们的例子中，我们创建了一个小的前端共享对象，它除了加载我们需要的所有共享对象之外什么都不做，*按照依赖关系确定的顺序*，这样就不会有隐式加载，我们可以完全控制论据`dlopen`。我们通过派生所有调用我们库的 Java 类来做到这一点，这些类从一个公共基类包含如下内容：

```
//  In the Java base class...
private static native void initializeLibrary();

static
{
    System.loadLibrary("WrapperLibrary");
    initializeLibrary();
} 
```

然后该`initializeLibrary()`函数`dlopen`按照依赖关系确定的顺序执行显式的序列。

# selenium-webdriver - 如何克服我的 selenium webdriver-java 脚本的随机失败？

> ID：13987172
> 
> 赞同：0
> 
> 时间：2012-12-21T09:09:38.787
> 
> 标签：selenium-webdriver

目前，我正在运行我的 selenium webdriver - java 脚本，最近出现了一个奇怪的问题。我的脚本运行得非常好，当我重新运行它们时..有时我的脚本通过 sendkeys() 在其他一些字段中输入值，结果我的整个脚本失败了。

我不知道它背后的真正原因，我知道我正在运行的脚本非常简单直接。这是因为我的应用程序响应问题吗？因为我也给出了等待命令来解决同样的问题。但是当我再次重新运行相同的脚本时，它会在一些不相关的字段中输入值..

注意：我在重新运行它时没有更改任何代码......它更令人沮丧当您运行 Selenium webdriver-java 脚本时这是否正常？

请告诉我如何解决这个问题，因为我不知道如何处理这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:43:23.493

您可能需要确定您的元素定位器是否在每次运行时动态更改，然后查看您的代码定位器以更适当地处理更改。除此之外，我看不出为什么与之交互的元素会随机变化。

# c# - 更改画布背景 - Metro 应用程序

> ID：13987180
> 
> 赞同：-2
> 
> 时间：2012-12-21T09:10:23.640
> 
> 标签：c#, xaml, canvas, background, microsoft-metro

注意：我刚刚开始使用 Windows 8，所以请保持温和。我想将背景图像设置为画布：

```
private void InsertImage(object sender, RoutedEventArgs e) {
    var uri = new System.Uri("inkpen:///Assets/01.jpeg");
    var photo_background = new ImageBrush {
        ImageSource = new BitmapImage {
            UriSource = uri
        }
    };
panelcanvas.Background = photo_background;
} 
```

**xml:**

```
<Canvas Name="panelcanvas" Background="White" Margin="47.5,57,327.5,153"/> 
```

背景从白色变为黑色，图像不加载。我怎样才能解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:04:24.213

问题是 Uri

```
ms-appx:///Assets/01.jpeg 
```

修复

[http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)

# java - Android - EditText 字段上的 NullPointerException

> ID：13987186
> 
> 赞同：1
> 
> 时间：2012-12-21T09:11:04.513
> 
> 标签：java, android, nullpointerexception, avd, illegalstateexception

我一直在关注 Android 教程并创建了**MyFirstApp**（请参阅[http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)），我可以在模拟器上启动该应用程序，但是在输入消息和点击“**发送**”我在下面的代码中的这一行得到一个由*NullPointerException*引起的*IllegalStateException ：*

 *```
String message = editText.getText().toString(); 
```

调试后，很明显*此时 editText*为**空**，但我看不出原因，或者我在教程中遗漏的任何内容。

我的**MainActivity**类：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;    
import android.widget.EditText;

/**
 * <p>Main Activity class for the App</p>
 *
 * @author - thebloodguy
 */
public class MainActivity extends Activity {

    //~ ----------------------------------------------------------------------------------------------------------------
    //~ Static fields/initializers 
    //~ ----------------------------------------------------------------------------------------------------------------

    /** Key to the extra message data in the sendMessage intent */
    public static final String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    //~ ----------------------------------------------------------------------------------------------------------------
    //~ Methods 
    //~ ----------------------------------------------------------------------------------------------------------------

    /**
     * {@inheritDoc}
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        /* Inflate the menu; this adds items to the action bar if it is present */
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /**
     * <p>Send a message using the data in the {@link View}</p>
     *
     * @param view - the {@link View} object representing the state of the view when the message is sent
     */
    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) view.findViewById(R.id.edit_message);
        String message = editText.getText().toString(); // This is the guilty line
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

我的**activity_main.xml**：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:orientation="horizontal" >

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />

    <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" 
        android:onClick="sendMessage" />

</LinearLayout> 
```

和**LogCat**输出：

```
12-21 10:02:32.210: E/Trace(621): error opening trace file: No such file or directory (2)
12-21 10:02:32.250: W/ActivityThread(621): Application com.example.myfirstapp is waiting for the debugger on port 8100...
12-21 10:02:32.270: I/System.out(621): Sending WAIT chunk
12-21 10:02:32.280: I/dalvikvm(621): Debugger is active
12-21 10:02:32.480: I/System.out(621): Debugger has connected
12-21 10:02:32.480: I/System.out(621): waiting for debugger to settle...
12-21 10:02:32.680: I/System.out(621): waiting for debugger to settle...
12-21 10:02:32.889: I/System.out(621): waiting for debugger to settle...
12-21 10:02:33.091: I/System.out(621): waiting for debugger to settle...
12-21 10:02:33.290: I/System.out(621): waiting for debugger to settle...
12-21 10:02:33.534: I/System.out(621): waiting for debugger to settle...
12-21 10:02:33.796: I/System.out(621): waiting for debugger to settle...
12-21 10:02:33.990: I/System.out(621): waiting for debugger to settle...
12-21 10:02:34.204: I/System.out(621): debugger has settled (1353)
12-21 10:02:35.429: D/gralloc_goldfish(621): Emulator without GPU emulation detected.
12-21 10:05:11.510: I/Choreographer(621): Skipped 94 frames!  The application may be doing too much work on its main thread.
12-21 10:05:13.850: I/Choreographer(621): Skipped 35 frames!  The application may be doing too much work on its main thread.
12-21 10:05:15.571: I/Choreographer(621): Skipped 38 frames!  The application may be doing too much work on its main thread.
12-21 10:06:53.724: D/AndroidRuntime(621): Shutting down VM
12-21 10:06:53.724: W/dalvikvm(621): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-21 10:06:53.840: E/AndroidRuntime(621): FATAL EXCEPTION: main
12-21 10:06:53.840: E/AndroidRuntime(621): java.lang.IllegalStateException: Could not execute method of the activity
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.view.View$1.onClick(View.java:3591)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.view.View.performClick(View.java:4084)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.view.View$PerformClick.run(View.java:16966)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.os.Handler.handleCallback(Handler.java:615)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.os.Looper.loop(Looper.java:137)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-21 10:06:53.840: E/AndroidRuntime(621):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 10:06:53.840: E/AndroidRuntime(621):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 10:06:53.840: E/AndroidRuntime(621):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-21 10:06:53.840: E/AndroidRuntime(621):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-21 10:06:53.840: E/AndroidRuntime(621):  at dalvik.system.NativeStart.main(Native Method)
12-21 10:06:53.840: E/AndroidRuntime(621): Caused by: java.lang.reflect.InvocationTargetException
12-21 10:06:53.840: E/AndroidRuntime(621):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 10:06:53.840: E/AndroidRuntime(621):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 10:06:53.840: E/AndroidRuntime(621):  at android.view.View$1.onClick(View.java:3586)
12-21 10:06:53.840: E/AndroidRuntime(621):  ... 11 more
12-21 10:06:53.840: E/AndroidRuntime(621): Caused by: java.lang.NullPointerException
12-21 10:06:53.840: E/AndroidRuntime(621):  at com.example.myfirstapp.MainActivity.sendMessage(MainActivity.java:61)
12-21 10:06:53.840: E/AndroidRuntime(621):  ... 14 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:13:00.737

更改此行

```
EditText editText = (EditText) view.findViewById(R.id.edit_message); 
```

至

```
EditText editText = (EditText)findViewById(R.id.edit_message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:15:31.147

这里在 sendMessage 方法中，view 参数是被点击的 Button，EditText 不是这个 view 的子视图，所以需要从 activity 内容视图中调用 findViewById，调用方式是

```
EditText editText = (EditText) findViewById(R.id.edit_message); 
```*

# jquery - jQuery Mobile 中的 Photoswipe 错误？在某些情况下不显示弹出窗口

> ID：13987188
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:30.953
> 
> 标签：jquery, jquery-mobile, photoswipe

我的 photoswipe 画廊工作正常，我只有一个问题：

案例1：在#about 上输入#gallery 后，我可以点击一张照片，查看并关闭它，然后点击返回按钮将我带到#about。#about 包括一个可以查看的弹出图像。这样一切正常

案例2：在#about 上进入#gallery 后，所有可用的照片。但是当我不点击一个而只是点击后退按钮时，虽然浏览器 url 将 &ui-state=dialog 添加到 url

这很奇怪。这是我的photoswipe js代码：

```
(function(window, $, PhotoSwipe){

$(document).ready(function(){

    $('div.gallery-page')
        .live('pageshow', function(e){

            var 
                currentPage = $(e.target),
                options = {},
                photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options,  currentPage.attr('id'));

            return true;

        })

        .live('pagehide', function(e){

            var 
                currentPage = $(e.target),
                photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

            if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                PhotoSwipe.detatch(photoSwipeInstance);
            }

            return true;

        });

});

}(window, window.jQuery, window.Code.PhotoSwipe)); 
```

这

*   以这种方式添加 photoswipe 的元素：

    ```
    $('#galleryContent').append('<li><a href="XXX" rel="external"><img src="XXX" width="150"  /></a></li>'); 
    ```

    这是画廊：

    ```
    <div data-role="page" id="gallery" class="gallery-page" data-add-back-btn="true">

    <div data-role="header" data-theme="b">
        <h1>Images</h1>
    </div>

    <div data-role="content" data-theme="a">    

        <ul class="gallery" id="galleryContent">    
        </ul>

    </div>

    <div data-role="footer" data-theme="b">
        <h4>xxx</h4>
    </div> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:23:38.743

[此问题已在https://github.com/codecomputerlove/PhotoSwipe](https://github.com/codecomputerlove/PhotoSwipe)的 PhotoSwipe 主版本中得到修复。

下载主版本并运行 build.sh 脚本生成 3.0.5.1 版本。

# c# - 为什么我要使用一种方式关闭表单而不是另一种方式？

> ID：13987189
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:31.517
> 
> 标签：c#, winforms

关闭 Windows 窗体时，我可以使用：

*   `this.Close();`
*   `Application.Exit();`
*   `Environment.Exit(0);`
    `Environment.Exit(1);`
    `Environment.Exit(-1);`

这些选项之间有什么区别？为什么我要使用其中一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:26:44.097

以下是直接来自 MSDN 的描述（以及一些额外的评论）：

[this/Form.Close](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx) ()，从`Form`实例的上下文中调用。

> 关闭窗体。

请注意，只有当它是您的应用程序中保持打开的最后一个表单并且没有其他前台线程在运行时，它才会退出应用程序。

[应用程序](http://msdn.microsoft.com/en-us/library/ms157894.aspx).退出（）

> 通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。

一种可以从应用程序中的任何位置调用的方法，它将终止前台线程上的所有消息泵。同样，这不会退出没有运行消息循环的其他前台线程，因此不能保证关闭应用程序。

[Environment.Exit](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx) () 带有可选的退出代码。

> 终止此进程并为底层操作系统提供指定的退出代码。

这会尝试通过结束其中运行的所有线程来终止进程，然后将退出代码返回给操作系统。例如，这可以用于将失败状态返回到最初生成应用程序的批处理文件。这通常仅在需要强制终止进程时使用，并且如果它必须等待线程结束，则可能不会立即关闭应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:26:34.467

当您调用`Application.Run(mainForm)`标准应用程序消息循环开始在当前线程上运行时，将显示指定的形式。此方法还将事件处理程序添加到事件的 mainForm 中`Closed`。事件处理程序调用`ExitThread`以清理应用程序。`ExitThread`退出当前线程上的消息循环并关闭线程上的所有窗口。当您调用[`Close`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)主窗体时会发生这种情况。

[`Application.Exit()`](http://msdn.microsoft.com/en-us/library/ms157894.aspx)只是为该属性`FormClosing`表示的每种形式引发事件。`OpenForms`您可以以任何形式取消此活动。在这种情况下，Exit 返回，无需进一步操作。否则，`FormClosed`每个打开的表单都会引发一个事件，然后关闭所有正在运行的消息循环和表单。

[`Environment.Exit`](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)（残酷地）终止进程并为底层操作系统提供指定的退出代码。如果您传递非零代码，这将表明您的应用程序中发生了错误。这是杀死应用程序的最快方法。

# sql - 如何使我的整数与我在 Oracle 中给出的位数完全一致？

> ID：13987192
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:48.473
> 
> 标签：sql, oracle

我只想接受以我选择的位数给出的数字。我如何在 Oracle 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:17:21.077

```
CREATE TABLE suppliers
(
  supplier_id numeric(4),
  supplier_name varchar2(50),
  CONSTRAINT check_supplier_id
  ***CHECK (supplier_id BETWEEN 100 and 9999)***
); 
```

# performance - 将 GetResponseStream 写入文件需要很长时间

> ID：13987194
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:53.077
> 
> 标签：performance, httpwebrequest, ssrs-2008, httpwebresponse, getresponsestream

我制作了一个 SSRS Bulk 报告器，它使用 HTTPWebRequest 和 HTTPWebResponse 从 SSRS 查询报告，以获取流并将其作为文件保存为 PDF。

但是，客户抱怨说这需要很长时间。我已经测试过了，这个功能需要 +- 15.5 秒。如果我在 GetResponseStream 和文件编写器之间设置一个中断，并且在进入下一部分之前等待大约 3 秒，它会减少 4 秒的总时间吗？

任何人都可以解释这一点/或提供一些建议以使其更快一点吗？

这是功能：

```
 Public Function ExportReport(ByVal QueryStringParameters As String, ByVal FileName As String) As String
    Dim PDFName As String = ReportFolderPath & FileName & ".pdf"
    'Create a http request or connecting to the report server.
    Dim ReportHTTPRequest As HttpWebRequest = Nothing
    'Create a http response to catch the data stream returned from the http request.
    Dim ReportHTTPResponse As HttpWebResponse = Nothing
    'Create a stream to read the binary data from the http reponse.
    Dim ReportStream As Stream = Nothing
    Dim ReportFileStream As FileStream = Nothing
    'Create an array of bytes to get the binary data from the stream.
    Dim ReportBytes As Byte()
    Dim ReportBuffer As Integer = 204800
    Dim ReportBytesRead As Integer = 0

    'Create a webrequest to get the report with all the report parameters included.
    ReportHTTPRequest = WebRequest.Create(ReportServerURL & QueryStringParameters)
    ReportHTTPRequest.Credentials = CredentialCache.DefaultCredentials
    'Get the response from the request.

    ReportHTTPResponse = ReportHTTPRequest.GetResponse()

    'Read the binary stream from the http response.
    ReportStream = ReportHTTPResponse.GetResponseStream()

    ReportBytes = New Byte(ReportBuffer) {}
    ReportBytesRead = ReportStream.Read(ReportBytes, 0, ReportBuffer)
    ReportFileStream = New FileStream(PDFName, FileMode.Create)
    Do While ReportStream.CanRead And ReportBytesRead > 0
        ReportFileStream.Write(ReportBytes, 0, ReportBytesRead)
        ReportBytesRead = ReportStream.Read(ReportBytes, 0, ReportBuffer)
    Loop

    ReportHTTPResponse.Close()
    ReportStream.Close()
    ReportFileStream.Close()

    Return PDFName
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:56:19.700

对我有用的神奇东西，尝试 32768 的缓冲区大小

# php - 日文“Enter”键搜索功能

> ID：13987195
> 
> 赞同：2
> 
> 时间：2012-12-21T09:11:53.343
> 
> 标签：php, html

我遇到了日语问题。我有一个允许用户搜索数据的表单。当用户输入要搜索的字符串并按“Enter”键时，搜索功能将执行。我的代码是：

```
$('#formSearch input').keyup(function(event){
    var key = event.charCode||event.keyCode||0;
    if(key == 13){
         $("#formSearch").submit();
    }
}); 
```

但是当用户在平假名模式下输入日语时，编辑器会显示预测词。他们按“Enter”并执行搜索功能。它不正确。任何人都可以告诉我如何解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T00:39:53.067

这是因为您正在监听`Enter`按键（keyup）。您可能知道，在平假名模式下输入日语时，您输入时会出现一个可能的汉字字符列表。`Enter`是用于确认汉字选择的键之一，因此大多数日本用户`Enter`在搜索某些内容时最终会按两次。您的脚本在第一次按下时执行，因此第二次“提交”按下被忽略。

更好的选择是监听`submit`事件而不是`keyup`事件。在 jQuery 中，您可以使用如下`[.submit()](http://api.jquery.com/submit/)`方法：

```
$("#formSearch").submit(function() {
  // Code to execute here
}); 
```

但是，在您的情况下，您似乎没有任何其他脚本要执行，所以也许您根本不需要 JavaScript。尝试不使用 JavaScript 的表单 - 如果您无法使用`Enter`（英语或日语）提交，您的 HTML 可能有问题，因此请使用表单代码更新您的问题。

# perl - 在 diskstation 上安装 Bugzilla 时需要 gcc

> ID：13987196
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:53.470
> 
> 标签：perl, gcc

我正在尝试安装 Bugzilla，但遇到了 Perl 问题。

安装所需的 Perl 模块时，我收到以下错误消息：

```
ERROR: Using install-module.pl requires that you install a compiler, such as gcc. 
```

gcc 4.2.3 已安装并在路径中。我正在使用 perl v 5.8.6 操作系统：Linux DiskStation 2.6.32.12

Stackoverflow 上的另一个线程是指 PerlGcc，但它似乎只适用于 Solaris。

如何让 Perl 找到 gcc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:28:07.850

我猜你说的是[这个线程](https://stackoverflow.com/questions/9494929/compiler-gcc-required-when-installing-perl-modules-for-bugzilla)。假设谈论 gcc 版本相关的那个人是在某些事情上，你能检查一下你没有旧版本的 gcc 位于路径的更高位置吗？

```
$ which gcc 
```

# git - 为什么在更改分支后更改了我所有的文件日期

> ID：13987198
> 
> 赞同：0
> 
> 时间：2012-12-21T09:11:58.370
> 
> 标签：git

`git checkout my_branch`更改所有文件日期之后。

有*可能*避免吗？
我在windows下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:20:33.467

当您通过您将文件添加到 git 时，`git add`此时您已经拍摄了它们的快照。因此，当您`git checkout`再次提交（或分支）时，您将获得文件的这些快照。它不可能避免它。

# ruby - ruby-savon 与 mono-wcf 通信

> ID：13987201
> 
> 赞同：2
> 
> 时间：2012-12-21T09:12:11.567
> 
> 标签：ruby, wcf, mono, savon

我是 mono wcf 的新手，我遇到了一些关于我的代码的问题。最近，我使用 ruby​​-savon 从单声道上的 wcf 主机获取数据。

这是我的红宝石代码：

```
client = Savon::Client.new do 
wsdl.document="http://localhost:9000/MonoWcf/MonoSevice/wsdl" 
end
puts client.wsdl.soap_actions
response = client.request  :get_data 
```

这就是：

```
ruby -KU -- '/home/charlot/Documents/Aptana Studio 3 Workspace/rubyfun/soap/savon.rb'
W, [2012-12-21T02:45:41.845966 #10527]  WARN -- : HTTPI executes HTTP GET using the httpclient adapter
get_data
get_data_using_data_contract
D, [2012-12-21T02:45:41.856091 #10527] DEBUG -- : SOAP request: http://localhost:9000/MonoWcf/MonoSevice/soap
D, [2012-12-21T02:45:41.856294 #10527] DEBUG -- : SOAPAction: "http://localhost:9000/IMonoService/GetData", Content-Type: text/xml;charset=UTF-8, Content-Length: 293
D, [2012-12-21T02:45:41.856329 #10527] DEBUG -- : <?xml version="1.0" encoding="UTF-8"?>
        <env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema"                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wsdl="http://tempuri.org/"   xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
<env:Body><GetData>
</GetData>
</env:Body>
</env:Envelope>
W, [2012-12-21T02:45:41.856403 #10527]  WARN -- : HTTPI executes HTTP POST using the httpclient adapter
D, [2012-12-21T02:45:41.873963 #10527] DEBUG -- : SOAP response (status 415):
D, [2012-12-21T02:45:41.874057 #10527] DEBUG -- : 
/usr/local/lib/ruby/gems/1.9.1/gems/savon-1.2.0/lib/savon/soap/response.rb:108:in `raise_errors': Savon::HTTP::Error
    from /usr/local/lib/ruby/gems/1.9.1/gems/savon-1.2.0/lib/savon/soap/response.rb:18:in `initialize'
    from /usr/local/lib/ruby/gems/1.9.1/gems/savon-1.2.0/lib/savon/soap/request.rb:35:in `new'
    from /usr/local/lib/ruby/gems/1.9.1/gems/savon-1.2.0/lib/savon/soap/request.rb:35:in `response'
    from /usr/local/lib/ruby/gems/1.9.1/gems/savon-1.2.0/lib/savon/client.rb:86:in `request'
    from /home/charlot/Documents/Aptana Studio 3 Workspace/rubyfun/soap/savon.rb:15:in `dosoap'
    from /home/charlot/Documents/Aptana Studio 3 Workspace/rubyfun/soap/savon.rb:23:in `<main>' 
```

**

## 这是 mono-wcf wsdl ：

**`

```
<import location="http://localhost:9000/MonoWcf/MonoSevice/wsdl?wsdl=wsdl0" namespace="http://localhost:9000"/>
<types/>
<binding name="BasicHttpBinding_IMonoService" type="i0:IMonoService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="GetData">
        <soap:operation soapAction="http://localhost:9000/IMonoService/GetData" style="document"/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
    <operation name="GetDataUsingDataContract">
        <soap:operation soapAction="http://localhost:9000/IMonoService/GetDataUsingDataContract" style="document"/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding>
<service name="service">
    <port name="BasicHttpBinding_IMonoService" binding="tns:BasicHttpBinding_IMonoService">
        <soap:address location="http://localhost:9000/MonoWcf/MonoSevice/soap"/>
    </port>
</service> 
```

` **但是当我在 windows(7) 中托管 wcf 时，它确实获得了数据。

我的操作系统是：ubuntu 12 单声道版本：

```
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
TLS:           __thread
SIGSEGV:       altstack
Notifications: epoll
Architecture:  x86
Disabled:      none
Misc:          softdebug 
LLVM:          supported, not enabled.
GC:            Included Boehm (with typed GC and Parallel Mark) 
```

真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:24:54.707

这是我刚刚在[mono/master commit ea2f2cd](https://github.com/mono/mono/commit/ea2f2cde4286fa7af223e0c6e4950f85e42e8208)中修复的 Mono 的 WCF 代码中的一个错误。

Ruby-savon 发送`Content-Type: text/xml;charset=UTF-8`，但服务器期望`Content-Type: text/xml; charset=utf-8`。这是不正确的，检查应该不区分大小写并忽略空格。

您需要从 github 编译最新的单声道，或者作为临时解决方法，以某种方式制作 ruby​​-savon send `Content-Type: text/xml; charset=utf-8`。

**临时解决方法**

编辑`lib/savon/request.rb`（`/Library/Ruby/Gems/1.8/gems/savon-2.0.2`在我的 Mac 上），在顶部，有

```
CONTENT_TYPE = {
  1 => "text/xml;charset=%s",
  2 => "application/soap+xml;charset=%s"
} 
```

将其更改为

```
CONTENT_TYPE = {
  1 => "text/xml; charset=%s",
  2 => "application/soap+xml; charset=%s"
} 
```

然后将编码设置为“utf-8”，例如：

```
require 'savon'

client = Savon.client(:wsdl => "http://localhost:9999/MyService?wsdl", :encoding => "utf-8")
puts client.operations
response = client.call(:hello) 
```

在我的 Mac 上使用 Ruby 1.8.7 进行了测试。

# c# - C# - 调用不成功

> ID：13987202
> 
> 赞同：0
> 
> 时间：2012-12-21T09:12:13.687
> 
> 标签：c#, casting

我有以下代码

```
 org.pdfclown.objects.PdfDictionary dict = new org.pdfclown.objects.PdfDictionary();
 org.pdfclown.objects.PdfName name;
 name = dict[org.pdfclown.objects.PdfName.AcroForm]; 
```

我想要做的是查看应用程序中加载的文件是否有 AcroFrom 字段我在想是否可以调用

```
 dict[org.pdfclown.objects.PdfName.AcroForm]; 
```

在某种程度上，现在出现的错误是

```
Error   2   Cannot implicitly convert type  
'org.pdfclown.objects.PdfDirectObject' to 'org.pdfclown.objects.PdfName'. 
An explicit conversion exists (are you missing a cast?) 
C:\ImpressionContext (1)\ImpressionContext\ImpressionContext\ContextDialogue.cs 
184 20  ImpressionContext 
```

最初的要求是检测表单是 AcroForm 还是 Xfa Form

是否有可能，以便我可以转到字典中的 PdfName.AcroForm 并获取存储在此处的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:15:50.087

这里的字典返回`PdfDirectObject`-typed 值。您需要做的是将返回的值转换为`PdfName`.

```
name = dict[org.pdfclown.objects.PdfName.AcroForm] 
             as org.pdfclown.objects.PdfName;
if(name != null) 
{
    //work with name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:17:32.823

`PdfDictionary`返回一个对象，`org.pdfclown.objects.PdfDirectObject`但你想要一个`org.pdfclown.objects.PdfName`对象。所以你需要投射它。

您可以使用：

```
name = dict[org.pdfclown.objects.PdfName.AcroForm] 
          as org.pdfclown.objects.PdfName; // Cast it to PdfName 
```

# php - 如何使用 CodeIgniter 阻止某些 URL？

> ID：13987204
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:12:31.990
> 
> 标签：php, .htaccess, codeigniter

目前一切都很好，除了用户可以手动输入一个 URL，这会弄乱我的站点的 CI 设置方式。例如：

`www.somesite.com/folder/`

控制器中的这个文件夹应该无法访问......并且需要重定向到该文件夹​​索引页面，这会给他们一个 404 错误。我尝试在 htaccess 文件中向 all 添加拒绝，但它似乎没有做任何事情。

`www.somesite.com/folder/index.html`

我实际上希望所有文件夹都像这样运行。我在文件夹中有一个 index.html 文件，但它没有被读取。有没有办法在 CI 中解决这个问题？我还遇到了用户能够手动访问控制器功能的问题。我已经尝试按照人们的建议将它们更改为私有，但是我的脚本无法访问它们。例如：

`www.somesite.com/controller_file/some_function`

如何阻止他们访问此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:30:35.267

您可以创建一个白名单解决方案：

1.  打开你的 application/config/routes.php
2.  添加您要允许的路线。
3.  添加一个包罗万象的路线`.*`并将其重定向到错误处理程序

Codeigniters 尝试按照它们在数组中列出的顺序匹配路由模式，因此每当用户输入您未明确允许的路由时，它都会将他重定向到包罗万象的路由

[路由用户指南](http://ellislab.com/codeigniter/user-guide/general/routing.html)

编辑：您可以通过仅重定向与特定模式匹配的请求来创建黑名单逻辑，并为所有其他请求保留默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:19:36.457

就拒绝访问文件系统而言，最好的办法是将您的`Application`和`System`文件夹放在 webroot 之外。然后编辑您的 index.php 以设置每个文件夹的新路径。我的一般设置如下所示：

```
+ Root
| - Application
| - System
| + Webroot
| | - js
| | - css
| | - index.php
| | - ...
+ - ... 
```

至于您的第二个问题，为了防止某些功能直接从 url 访问，您需要在它们前面加上一个下划线。

所以而不是

`public function some_function() {...}`

利用 `public function _some_function() {...}`

然后可以在您的控制器中调用它`$this->_some_function();`

如果您有任何 AJAX 函数，则需要从其名称中删除下划线以使其可访问。您可以通过使用以下条件包装您的函数来阻止用户直接从 URL 访问它们。

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && ($_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest')) {} 
```

以上检查请求是否通过 AJAX。

# c# - 从不同的命名空间转换相同的对象？

> ID：13987205
> 
> 赞同：3
> 
> 时间：2012-12-21T09:12:38.120
> 
> 标签：c#, api, xserver

这些是错误：

```
Error   1   Cannot implicitly convert type 'Plantool.xRoute.Point' to 'Plantool.xMap.Point' 
Error   2   Cannot implicitly convert type 'Plantool.xRoute.Point' to 'Plantool.xMap.Point' 
Error   3   Cannot implicitly convert type 'Plantool.xRoute.LineString' to 'Plantool.xMap.LineString' 
```

我有这个带有命名空间的代码。

```
using Plantool; //Contains xMap, xServer, xLocate 
```

这就是有问题的功能。

```
 /* createMap()
     * Input: WaypointDesc[], Route
     * Output: string mapURL
     * Edited 21/12/12 - Davide Nguyen
     */
    private static string createMap(xRoute.WaypointDesc[] waypointDesc, xRoute.Route route)
    {
        #region boundingBox
        // Set boundingBox fand use corners from the calculated route
        xMap.BoundingBox boundingBox = new xMap.BoundingBox();
        boundingBox.leftTop = route.totalRectangle.rightTop;
        boundingBox.rightBottom = route.totalRectangle.leftBottom;
        #endregion

        #region mapParams
        // Build mapParams
        xMap.MapParams mapParams = new xMap.MapParams();
        mapParams.showScale = true;
        mapParams.useMiles = false;
        #endregion

        #region imageInfo
        // Create imageInfo and set the frame size and image format. NOTE: 1052; 863
        xMap.ImageInfo imageInfo = new xMap.ImageInfo();
        imageInfo.format = xMap.ImageFileFormat.PNG;
        imageInfo.height = 1052;
        imageInfo.width = 863;
        imageInfo.imageParameter = "";
        #endregion

        #region layers
        // Create a line from the calculated route
        xMap.LineString[] lineStrings = new xMap.LineString[] { route.polygon };
        xMap.Lines[] lines = new xMap.Lines[1];
        xMap.LineOptions options = new xMap.LineOptions();
        xMap.LinePartOptions partoptions = new xMap.LinePartOptions();
        partoptions.color = new xMap.Color();
        partoptions.visible = true;
        partoptions.width = -10;
        options.mainLine = partoptions;

        lines[0] = new xMap.Lines();
        lines[0].wrappedLines = lineStrings;
        lines[0].options = options;

        // Define customLayer that contains the object lines and set layers.
        xMap.CustomLayer customLayer = new xMap.CustomLayer();
        customLayer.visible = true;
        customLayer.drawPriority = 100;
        customLayer.wrappedLines = lines;
        customLayer.objectInfos = xMap.ObjectInfoType.NONE;
        customLayer.centerObjects = true;
        xMap.Layer[] layers = new xMap.Layer[] { customLayer };
        #endregion

        #region includeImageInResponse
        // Set argument includeImageInResponse to false (default).
        Boolean includeImageInResponse = false;
        #endregion

        // Return object map using the following method.
        xMap.Map map = xMapClient.renderMapBoundingBox(boundingBox, mapParams, imageInfo, layers, includeImageInResponse, null);

        // Retrieve the image
        string result = "http://" + map.image.url;

        // Return the drawn map
        return result;
    } 
```

问题在于`boundingBox`对象和`lineString`对象。`route.totalRectangle`包含来自名称空间的`Point`对象，该对象与. 反正有复制或转换它吗？`xRoute``xMap`

这个问题似乎不会在 java 示例中发生，但在 C# 中会发生。我相信如果我能解决这个错误，其他的也将得到解决。我已经在 API 上搜索了我的屁股，但它可能会对您有所帮助：

*   xMap：http: [//xserver.ptvgroup.com/fileadmin/files/PTV-COMPONENTS/DeveloperZone/Documents/PTV_xServer/API/xMapAPI/pages/apidoc.html](http://xserver.ptvgroup.com/fileadmin/files/PTV-COMPONENTS/DeveloperZone/Documents/PTV_xServer/API/xMapAPI/pages/apidoc.html)
*   xRoute：http: [//xserver.ptvgroup.com/fileadmin/files/PTV-COMPONENTS/DeveloperZone/Documents/PTV_xServer/API/xRouteAPI/pages/apidoc.html](http://xserver.ptvgroup.com/fileadmin/files/PTV-COMPONENTS/DeveloperZone/Documents/PTV_xServer/API/xRouteAPI/pages/apidoc.html)

还在挖自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:20:43.127

在 C# 中，您不能从一种类型转换为另一种类型，即使它们在所有目的上都是相同的，也不能复制所有属性等，除非存在[隐式](http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx)转换。

因此，您可以编写一个隐式转换操作符，如上面的链接所示，也可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的工具在两个对象之间进行复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:58:43.197

同时，我在随机使用代码和 API 的同时找到了解决此问题的另一个解决方案，这是通过将众所周知的文本值从一个对象复制到另一个对象来解决两个错误的部分解决方案。希望我可以对线串部分做同样的事情。我发布这个只是以防其他人遇到这个并发现它是一个有用的解决方案。下面的新代码区域。

```
 // Set boundingBox fand use corners from the calculated route
        xMap.BoundingBox boundingBox = new xMap.BoundingBox();
        xMap.Point rightTop = new xMap.Point();
        rightTop.wkt = route.totalRectangle.rightTop.wkt;
        xMap.Point leftBottom = new xMap.Point();
        leftBottom.wkt = route.totalRectangle.leftBottom.wkt;
        boundingBox.leftTop = rightTop;
        boundingBox.rightBottom = leftBottom; 
```

编辑：线串的相同解决方案。

```
 // Solution: Cannot implicitly conver ttype xRoute.LineString to xMap.LineString
        xMap.LineString maproute = new xMap.LineString();
        maproute.wkt = route.polygon.wkt;

        // Create a line from the calculated route
        xMap.LineString[] lineStrings = new xMap.LineString[] { maproute }; 
```

感谢您的帮助，我希望有人会发现这个解决方案也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T17:32:32.093

出于您自己的目的查看此内容...但一种选择是使用 JSON Parser 将一个类序列化为 JSON，然后将其反序列化回另一个类。简短而简单的答案，但如果您正在寻找的只是从 Contoso.Project.UrMom 中获取属性，然后将它们直接传输到 Albiet.Project.UrMom，那么它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T13:26:05.513

我发现了[另一种](http://www.henrikbrinch.dk/Blog/2013/03/04/Conversion-Of-Same-Type-Instances---Different-Namespace)基于对象序列化的替代方法。就我而言，它具有访问磁盘的缺点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-10T15:26:22.233

您是如何从 WSDL 中创建客户端类的？我更喜欢通过命令行创建它们：

```
WSDL /sharetypes /out:"XServer.cs" /namespace:"Plantool"
"https://xroute-eu-n-test.cloud.ptvgroup.com/xlocate/ws/XLocate?WSDL"
"https://xroute-eu-n-test.cloud.ptvgroup.com/xroute/ws/XRoute?WSDL"
"https://xroute-eu-n-test.cloud.ptvgroup.com/xtour/ws/XTour?WSDL" 
```

`/sharetypes`确保 Point 等类将合并为一个共享类

这也适用于 xServer2 API 及其 WSDL。

# php - 登录并移动到下一页后，它会自动注销

> ID：13987211
> 
> 赞同：0
> 
> 时间：2012-12-21T09:13:11.300
> 
> 标签：php, jquery, session

我正在开发一个项目，其中有一个包含登录链接的标题。我的项目 header.php 和 header1.php 上有两个标头。header.php 包含在 index.php 中，而 header1.php 位于页面的其余部分。

当我访问包含 header.php 并登录的网站 www.example.com 时，它显示我已登录，但是当我移至该站点的下一页时，它并没有显示我已登录，当我移至主页（index.php）那里我也没有登录。

header.php :- 在 index.php 上

```
 <?php 
        @session_start();
        include_once('functions/config.php');
    ?>

// and some html code 
```

header1.php :- 页面的其余部分

```
 <?php
        //ob_start();
        @session_start();
        include("$_SERVER[DOCUMENT_ROOT]/functions/config.php");
    ?>

// and some html code 
```

vali.js（用于验证）：-

```
$("#login_frm").validate({
   rules: {
       email: {
           required: true,
           email: true
       },
       pass: {
           required: true,
           minlength: 6
       },
   },
   messages: {
       pass: {
           required: "Please provide a password",
           minlength: "Your password must be at least 6 characters long"
       },
       email: "Please enter email adress"
   },
   submitHandler: function(form) {
       $.post('http://www.example.com/logincheck.php', $("#login_frm").serialize(), function(data) {
           if(data == '1') {
            document.location='http://www.example.com/';
           } else {
        $('#login-error').html('Wrong Username or password');
           }
       });              
    }
}); 
```

logincheck.php（会话集）：-

```
<?php
    include("functions/config.php");
    include("functions/encript.php");
    ob_start();
    session_start();

    $email = $_POST['email'];

    $pass= encode5t($_POST['pass']);
    $sql = "SELECT * FROM members where email='$email' AND pass='$pass' AND member_status='1' ";
    //echo $sql;

    $row = mysql_query( $sql );
    $count = mysql_num_rows( $row );
    $result = mysql_fetch_assoc($row);
    if($count == 1) {
        $member_id = $result['member_id'];  
        $first_name = $result['first_name'];                                                                
        $creditamount = $result['credit'];
        $_SESSION['memid'] = $member_id;            
    $_SESSION['ufname'] = $first_name;      
        $_SESSION['uemail'] = $email;
        $_SESSION['creditamount'] = $creditamount;      
        //echo "->".$_SESSION['memid'];

        setcookie ("memid", $member_id, (time()+60*60*24*360)); 
        setcookie ("login2", "true", (time()+60*60*24*360));        
        setcookie ("uname", $first_name, (time()+60*60*24*360));
        setcookie ("uemail", $email, (time()+60*60*24*360));
        echo '1';//header("location:index.php");

    } else {
        echo "Wrong Username Or Password";
    }

?> 
```

我不知道发生了什么，当我第二次登录时第一次出现这个问题，它不会给我任何问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:14:39.743

这个问题可能是由于以下原因

头文件和其他文件中的相同变量名。该变量可以在标题中使用

```
$_SESSION['userid'] 
```

变量 **$userid** 可能用在其他一些文件中。如果你发现这个问题会解决，我想

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:23:35.403

只需`session_start();`在使用它的每个页面的顶部使用。

# c# - C# 获取 RDC/RDP 和“控制台”会话信息

> ID：13987213
> 
> 赞同：8
> 
> 时间：2012-12-21T09:13:14.687
> 
> 标签：c#, wmi, taskmanager

我正在尝试通过 C# 以编程方式检索一些 RDC/RDP 和“控制台”登录信息。

我想开发一个简单的控制台应用程序 (.EXE)，这样我就可以从我们域上任何远程计算机（Windows Server 2003 x86 或 2008R2 x64）的任务管理器 -> 用户选项卡中检索信息。

这显示了一个人是直接登录到服务器（即控制台）还是通过 RDC/RDP（包括客户端，如果它仍然处于活动状态）或如果它“暂停”则断开连接（即他们没有注销但只是关闭了RDC/RDP 窗口暂时）

我对所有服务器都拥有管理员权限，并且可以配置任何需要启用/禁用的 Windows 服务/防火墙规则（如果需要）

我想我可能不得不使用 WMI（使用 System.Management），但我从谷歌找到的示例只检索现有用户。

```
//Method 1
var searcher = new ManagementObjectSearcher(
               "SELECT UserName FROM Win32_ComputerSystem");
var collection = Searcher.Get();
foreach(ManagementObject entry in collection)
{
  Console.WriteLine(entry["UserName"]);
}

//Method 2
string computer = "somecomputername";   
var searcher = new ManagementObjectSearcher(
               computer + @"root\CIMV2", "SELECT * FROM Win32_TerminalService");
var collection = Searcher.Get();
foreach(ManagementObject entry in collection)
{
  //Write them out (although usernames isnt listed from the example I found)
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T09:35:28.257

这将为您提供所需的一切。只需调用`ListSessions`并传入服务器名称即可。要获取其他会话信息，请将`ServerName`and传递`SessionId`给`GetSessionInfo`.

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace TerminalTools
{
    public class TermServicesManager
    {

        [DllImport("wtsapi32.dll")]
        static extern IntPtr WTSOpenServer([MarshalAs(UnmanagedType.LPStr)] String pServerName);

        [DllImport("wtsapi32.dll")]
        static extern void WTSCloseServer(IntPtr hServer);

        [DllImport("Wtsapi32.dll")]
        public static extern bool WTSQuerySessionInformation(IntPtr hServer, int sessionId, WTS_INFO_CLASS wtsInfoClass,
            out System.IntPtr ppBuffer, out uint pBytesReturned);

        [DllImport("wtsapi32.dll")]
        static extern Int32 WTSEnumerateSessions(IntPtr hServer, [MarshalAs(UnmanagedType.U4)] Int32 Reserved,
            [MarshalAs(UnmanagedType.U4)] Int32 Version, ref IntPtr ppSessionInfo, [MarshalAs(UnmanagedType.U4)] ref Int32 pCount);

        [DllImport("wtsapi32.dll")]
        static extern void WTSFreeMemory(IntPtr pMemory);

        [StructLayout(LayoutKind.Sequential)]
        private struct WTS_SESSION_INFO
        {
            public Int32 SessionID;
            [MarshalAs(UnmanagedType.LPStr)]
            public String pWinStationName;
            public WTS_CONNECTSTATE_CLASS State;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct WTS_CLIENT_ADDRESS
        {
            public uint AddressFamily;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 20)]
            public byte[] Address;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct WTS_CLIENT_DISPLAY
        {
            public uint HorizontalResolution;
            public uint VerticalResolution;
            public uint ColorDepth;
        }

        public enum WTS_CONNECTSTATE_CLASS
        {
            Active,
            Connected,
            ConnectQuery,
            Shadow,
            Disconnected,
            Idle,
            Listen,
            Reset,
            Down,
            Init
        }

        public enum WTS_INFO_CLASS
        {
            InitialProgram = 0,
            ApplicationName = 1,
            WorkingDirectory = 2,
            OEMId = 3,
            SessionId = 4,
            UserName = 5,
            WinStationName = 6,
            DomainName = 7,
            ConnectState = 8,
            ClientBuildNumber = 9,
            ClientName = 10,
            ClientDirectory = 11,
            ClientProductId = 12,
            ClientHardwareId = 13,
            ClientAddress = 14,
            ClientDisplay = 15,
            ClientProtocolType = 16
        }

                        private static IntPtr OpenServer(string Name)
    {
        IntPtr server = WTSOpenServer(Name);
        return server;
    }

                    private static void CloseServer(IntPtr ServerHandle)
    {
        WTSCloseServer(ServerHandle);
    }

        public static List<TerminalSessionData> ListSessions(string ServerName)
        {
            IntPtr server = IntPtr.Zero;
            List<TerminalSessionData> ret = new List<TerminalSessionData>();
            server = OpenServer(ServerName);

            try
            {
                IntPtr ppSessionInfo = IntPtr.Zero;

                Int32 count = 0;
                Int32 retval = WTSEnumerateSessions(server, 0, 1, ref ppSessionInfo, ref count);
                Int32 dataSize = Marshal.SizeOf(typeof(WTS_SESSION_INFO));

                Int64 current = (int)ppSessionInfo;

                if (retval != 0)
                {
                    for (int i = 0; i < count; i++)
                    {
                        WTS_SESSION_INFO si = (WTS_SESSION_INFO)Marshal.PtrToStructure((System.IntPtr)current, typeof(WTS_SESSION_INFO));
                        current += dataSize;

                        ret.Add(new TerminalSessionData(si.SessionID, si.State, si.pWinStationName));
                    }

                    WTSFreeMemory(ppSessionInfo);
                }
            }
            finally
            {
                CloseServer(server);
            }

            return ret;
        }

        public static TerminalSessionInfo GetSessionInfo(string ServerName, int SessionId)
        {
            IntPtr server = IntPtr.Zero;
            server = OpenServer(ServerName);
            System.IntPtr buffer = IntPtr.Zero;
            uint bytesReturned;
            TerminalSessionInfo data = new TerminalSessionInfo();

            try
            {
                bool worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ApplicationName, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                string strData = Marshal.PtrToStringAnsi(buffer);
                data.ApplicationName = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientAddress, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                WTS_CLIENT_ADDRESS si = (WTS_CLIENT_ADDRESS)Marshal.PtrToStructure((System.IntPtr)buffer, typeof(WTS_CLIENT_ADDRESS));
                data.ClientAddress = si;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientBuildNumber, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                int lData = Marshal.ReadInt32(buffer);
                data.ClientBuildNumber = lData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientDirectory, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                strData = Marshal.PtrToStringAnsi(buffer);
                data.ClientDirectory = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientDisplay, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                WTS_CLIENT_DISPLAY cd = (WTS_CLIENT_DISPLAY)Marshal.PtrToStructure((System.IntPtr)buffer, typeof(WTS_CLIENT_DISPLAY));
                data.ClientDisplay = cd;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientHardwareId, out buffer, out bytesReturned);

                if (!worked)
                    return data;

                lData = Marshal.ReadInt32(buffer);
                data.ClientHardwareId = lData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientName, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.ClientName = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientProductId, out buffer, out bytesReturned);
                Int16 intData = Marshal.ReadInt16(buffer);
                data.ClientProductId = intData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ClientProtocolType, out buffer, out bytesReturned);
                intData = Marshal.ReadInt16(buffer);
                data.ClientProtocolType = intData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.ConnectState, out buffer, out bytesReturned);
                lData = Marshal.ReadInt32(buffer);
                data.ConnectState = (WTS_CONNECTSTATE_CLASS)Enum.ToObject(typeof(WTS_CONNECTSTATE_CLASS), lData);

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.DomainName, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.DomainName = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.InitialProgram, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.InitialProgram = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.OEMId, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.OEMId = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.SessionId, out buffer, out bytesReturned);
                lData = Marshal.ReadInt32(buffer);
                data.SessionId = lData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.UserName, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.UserName = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.WinStationName, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.WinStationName = strData;

                worked = WTSQuerySessionInformation(server, SessionId,
                    WTS_INFO_CLASS.WorkingDirectory, out buffer, out bytesReturned);
                strData = Marshal.PtrToStringAnsi(buffer);
                data.WorkingDirectory = strData;
            }
            finally
            {
                WTSFreeMemory(buffer);
                buffer = IntPtr.Zero;
                CloseServer(server);
            }

            return data;
        }

    }

    public class TerminalSessionData
    {
        public int SessionId;
        public TermServicesManager.WTS_CONNECTSTATE_CLASS ConnectionState;
        public string StationName;

                            public TerminalSessionData(int sessionId, TermServicesManager.WTS_CONNECTSTATE_CLASS connState, string stationName)
    {
        SessionId = sessionId;
        ConnectionState = connState;
        StationName = stationName;
    }

                    public override string ToString()
    {
        return String.Format("{0} {1} {2}", SessionId, ConnectionState, StationName);
    }
    }

    public class TerminalSessionInfo
    {
        public string InitialProgram;
        public string ApplicationName;
        public string WorkingDirectory;
        public string OEMId;
        public int SessionId;
        public string UserName;
        public string WinStationName;
        public string DomainName;
        public TermServicesManager.WTS_CONNECTSTATE_CLASS ConnectState;
        public int ClientBuildNumber;
        public string ClientName;
        public string ClientDirectory;
        public int ClientProductId;
        public int ClientHardwareId;
        public TermServicesManager.WTS_CLIENT_ADDRESS ClientAddress;
        public TermServicesManager.WTS_CLIENT_DISPLAY ClientDisplay;
        public int ClientProtocolType;
    }
} 
```

# javascript - Arcgis javascript api-获取多边形几何

> ID：13987214
> 
> 赞同：0
> 
> 时间：2012-12-21T09:13:21.390
> 
> 标签：javascript, api, arcgis

我正在使用 ArcGis javascript api 3.2。我有一张地图和一个图层。我将如何获得发生鼠标单击事件的多边形几何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:26:47.500

不仅是多边形 ID，您还可以通过执行此操作从地图服务中获取任何参数...

1) 通过传递 MapService 作为参数创建一个新的 identifyTask()。

```
identifyTask = new esri.tasks.IdentifyTask("<Map Service URL should go here>"); 
```

2)创建一个新的IdentifyParameters()并设置以下属性。

```
identifyParams = new esri.tasks.IdentifyParameters();
identifyParams.tolerance = 2;
identifyParams.returnGeometry = true;  
identifyParams.layers = esri.tasks.IdentifyParameters.LAYER_OPTION_ALL; 
identifyParams.layerIds = [0,1,2,3,4];
identifyParams.sr=map.spatialreference;
identifyParams.width  = map.width; 
identifyParams.height = map.height; 
```

3) 一个方法应该在鼠标点击时被调用。你可以这样做

```
dojo.connect(map, "onClick", uponClick); 
```

4) 当一个多边形被点击时，onClick() 方法将被调用。在 onClick() 方法中，通过传递 identifyParams 作为参数来调用 identifyTask.execute。

```
function uponClick(evt){
  identifyParams.geometry = evt.mapPoint;
  identifyParams.mapExtent = map.extent;
  identifyTask.execute(identifyParams, function(result) { 
     for(var i=0; i<result.length; i++){                         
        polyId=result[i].feature.attributes["UNIQPOLYID"];
     }//end of for
  });//end of execute
}//end of uponClick 
```

UNIQPOLYID 是地图服务将返回的方法之一。

您可以在此链接中找到详细示例

[http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/find_drilldown.html](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/find_drilldown.html)

# android - 在 API 级别 17 从 Android 浏览器启动活动

> ID：13987218
> 
> 赞同：2
> 
> 时间：2012-12-21T09:13:30.753
> 
> 标签：android

我有一个使用自定义 Mime 类型提供配置文件的 Web 服务。当用户单击链接时，我想使用意图过滤器启动我的活动。它适用于所有 Android 版本，但在 4.2（API 级别 17）中不起作用。这是我的 Manifest.xml

```
 <activity android:name="activityName" 
              android:screenOrientation="nosensor"
              android:theme="@style/Theme.Sherlock.NoActionBar"
              android:exported="true">
         <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:mimeType="application/vnd.xxx.yyy"/> 
        </intent-filter>
    </activity> 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:03:06.427

解决，。只需将 android:launchMode="singleTask" 添加到清单中。由于android 4.2中的某些奇怪原因，该标志是强制性的.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:25:04.357

好吧，您的应用程序可以在 4.2 硬件上运行（在 Galaxy Nexus 上测试）。它会短暂地弹出浏览器（我在 4.1 x86 模拟器上没有注意到这一点，尽管它可能太快了）。但是，然后控制权将传递给您的活动。

我的猜测是，在模拟器上实现的浏览器中存在导致问题的错误。

话虽如此，如果这确实是针对某种专有配置文件，我建议您在应用程序中处理下载。`TextView`与其让人们点击-as-hyperlink 或 a ，不如`WebView`在您自己的应用程序中提供配置文件列表并使用`HttpUrlConnection`（或`HttpClient`）您自己下载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:58:18.680

刚刚在装有 OS 4.2.1 的 Galaxy Nexus 上进行了测试。测试应用程序不起作用。

在 code.google.com 上开了一张新票，等待反馈

[https://code.google.com/p/android/issues/detail?id=42409](https://code.google.com/p/android/issues/detail?id=42409)

# django - Heroku dev 上的致命数据库错误

> ID：13987225
> 
> 赞同：1
> 
> 时间：2012-12-21T09:13:45.947
> 
> 标签：django, mongodb, heroku

我有一个 Django 应用程序（音乐流服务）在 Heroku 上的一个免费托管帐户上运行，它带有一个带有一个 web dyno 的 Postgres 数据库。昨天我写了一个脚本，将 mp3 文件上传到 Heroku，提取元数据，然后将文件上传到 Amazon S3。当我完成这个过程时，当我尝试刷新时出现此错误

```
could not fork new process for connection: Cannot allocate memory 
```

或者

```
FATAL:  remaining connection slots are reserved for non-replication superuser connections 
```

当我去 postgres.heroku.com 查看统计数据时，这就是我所拥有的：

```
Plan    Dev
Status  available
Data Size   9.0 MB
Tables  0
PG Version  9.1.6
Created December 05, 2012 17:33 
```

我们还没有用户，事实上，我是目前唯一使用它的用户。我确定我们很快就必须升级，但我不确定从什么开始。我们应该从数据库开始，获得更多的测功机，还是什么？我什至开始考虑切换到 MongoDB，因为读取和写入数据库数据的频率会相对较高（增加每首歌曲的星数和收听次数，每个用户收听的分钟数等）。

有什么建议么？

# c++ - 从哪里获得用于 C++ 序列化的神秘 Microsoft msgtool

> ID：13987230
> 
> 赞同：8
> 
> 时间：2012-12-21T09:13:54.853
> 
> 标签：c++, visual-studio, serialization, casablanca

在
[http://msdn.microsoft.com/en-us/devlabs/hh975426.aspx](http://msdn.microsoft.com/en-us/devlabs/hh975426.aspx)上阅读有关演员的信息时， 我注意到关于序列化的部分：

> 由于序列化对程序的正确功能至关重要，而且很容易出错，因此 C++ Actors 库包含一个简单的消息定义生成工具“msgtool”，给定 XML 文档将创建必要的类型和序列化定义。

我在 VS 命令提示符下或使用 Google 搜索时找不到 msgtool。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:31:42.717

这是卡萨布兰卡项目的一部分，该项目是微软的一个*孵化项目*，由 DevLabs 集团拥有。这是一个非常新鲜的项目，我第一次听说它是在大约 3 个月前。它可能会持续更长时间，不确定。

您不会在标准 VS 发行版中找到任何 Casablanca 工具，该项目距离成为核心收缩包装的 Microsoft 产品还有很长的路要走。孵化项目是探索有前途的技术的工具，*总有一天*会得到回报。微软从不羞于公开他们正在做的事情，从客户那里获得反馈以找出哪些有效，哪些无效。没有“不要将手指放在手机天线上”的惊喜。

他们肯定在逆向云计算的主要趋势，他们使用的是原生 C++。这在 VM 语言领域已经存在很长时间了。反射支持是一项非常重要的资产。但很明显，要使这些工作顺利进行，可靠地序列化 C++ 对象是一项主要要求，这一点非常重要。因此这个“msgtool”。

该项目的登录页面在[这里](http://msdn.microsoft.com/en-us/subscriptions/casablanca.aspx)。他们为 VS2010、VS2012 和最新的 Express 版本提供安装程序。单击右侧的按钮以启动它。我实际上并没有尝试过，但你应该在安装后得到“msgtool.exe”。确保你可以处理一个项目在承诺之后就会破产，这是微软这类项目最典型的结果。

* * *

更新：请注意，DevLabs 站点上不再提供链接的网页。真正的项目[主页](http://msdn.microsoft.com/en-us/devlabs/hh974325)提到：

> DevLabs 网站上不再提供我们的文档，仅在下载的文件中提供

您可以在 Casablanca_Samples.zip\Documents\actors.html 中找到链接页面的副本。导航到“序列化”部分并比较两者。在提到“msgtool”的确切位置，您现在会看到它在谈论`msg_ptr<T>`模板类。所以，是的，看起来这个工具似乎不再支持或包含在当前的 SDK 中，如果它曾经是的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:02:57.487

给你，在 python 中——又快又脏！当然，错了，但你明白我希望的想法！

```
import xml.dom.minidom

s = ''' 
<Namespace name="test">
  <Message name="FooBar">
    <Type name="T"/>
    <Field name="a" type="std::string"/>
    <Field name="b" type="T"/>
    <Field name="d" type="std::string"/>
  </Message>
</Namespace>
'''

dom = xml.dom.minidom.parseString(s)

messages = []

def parseMessage(node):
    print 'class', node.attributes['name'].value, '{'
    for type in node.getElementsByTagName('Type'):
        print 'template<typename', type.attributes['name'].value, '>'
    for field in node.getElementsByTagName('Field'):
        print field.attributes['type'].value, field.attributes['name'].value, ';'
    print '}'
    messages.append(node)

def parseNamespace(node):
    print 'namespace', node.attributes['name'].value, '{'
    for child in node.childNodes:
        if child.nodeType == child.ELEMENT_NODE:
            if 'Message'==child.tagName:
                parseMessage(child)
    print '}'

for child in dom.childNodes:

    if 'Namespace'==child.tagName:
        parseNamespace(child)

for node in messages:
    message_name = node.attributes['name'].value
    type_name = None
    for type in node.getElementsByTagName('Type'):
        type_name = type.attributes['name'].value
    print 'template<typename %s>'%type_name
    print 'size_t calculate_size(const test::%s<%s> &data)'%(message_name, type_name)
    print '{ return'
    print '+'.join(['::calculate_size(data.%s)'%field.attributes['name'].value for field in node.getElementsByTagName('Field')])
    print ';}' 
```

# android - 如何将 Android 示例添加到 ADT 包

> ID：13987231
> 
> 赞同：0
> 
> 时间：2012-12-21T09:13:57.823
> 
> 标签：android, adt

我正在考虑开始 Android 开发。我已经从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了 ADT Bundle 。

我希望查看一些 Android 应用示例。在 Eclipse 中，您可以从预先存在的示例代码中创建一个新的 Android 应用程序，如下所述：[https ://stackoverflow.com/a/4589246/895](https://stackoverflow.com/a/4589246/895)

在 ADT 包中，这三个选项都没有出现；仅出现以下窗口。 ![在此处输入图像描述](../Images/2034924c9f1df9f33d233090ac562835.png)

如何将样本添加到 ADT Bundle？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:18:08.017

转到文件>>新建>>其他。

在 New Dialog 中，转到 Android 并选择 Android Sample Project。

![在此处输入图像描述](../Images/7a7122131011dba7201a54efebc480c2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T07:30:53.653

`File->New->Other->Android->Android` 来自**现有来源的项目**

# gradle - Gradle 任务在外部进程“就绪”时进行处理

> ID：13987235
> 
> 赞同：12
> 
> 时间：2012-12-21T09:14:11.160
> 
> 标签：gradle

我希望我的 gradle 任务：

1.  执行命令（“启动我的服务器”的外部进程）。
2.  等待来自我的外部进程的某个输出在标准输出中显示“服务器已就绪”。
3.  在我的 gradle 任务中做一些事情（基本上是和我的外部任务交谈）。
4.  当我完成我的工作时，通过启动另一个“停止我的服务器”命令来结束外部进程。
5.  当两个命令都完成时，结束任务。

这就像启动一个服务器来运行集成测试，但这不是一个 tomcat/jetty 类型的服务器，所以它需要从命令行启动并通过服务器的标准输出等待服务器“准备好”。

我目前能够使用 exec 任务来运行我的任务并获取输出。所以我想我可以用 Groovy/Java 编写代码来实现我想要的。

但是，对这种看似常见的模式进行编码似乎很乏味。所以我想知道是否有一种更简单的方法可以在没有太多编码的情况下解决这些问题 - 即这是 gradle 具有 DSL 的常见模式吗？

请注意，我是 Gradle 的新手，因此也将不胜感激有关此主题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:20:11.747

据我所知，当前版本的 Gradle (1.4) 没有专门的 DSL 支持来启动/关闭外部进程。你可以在构建脚本中用 groovy 实现它，应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T00:30:14.780

整体模式：可能不会 - 有太多不同的可能性/组合，以至于没有任何类型的标准模板。

但是用一组任务来构建自己的逻辑很简单。最复杂的部分是等待外部进程，Gradle 确实有一个 DSL 来处理（Ant 实际上有核心逻辑/DSL，Gradle 只是包装它）。

这是我等待 Postgres 在本地 docker 容器中出现的任务：

```
task waitForLocalDb(){
  group = 'docker.db'
  mustRunAfter localApiSvcDbRunCleanContainer
  doFirst{
    println "waiting for Postgres to come up"
    ant.waitfor(
      maxwait:"10", maxwaitunit:"second", 
      checkevery:"500", checkeveryunit: "millisecond"
    ){
      socket(server:"192.168.99.100", port:"5544")
    }
  }
} 
```

这通过检查它是否正在侦听指定端口来等待 Postgres。

您可以使用 Ant [waitfor](https://ant.apache.org/manual/Tasks/waitfor.html)任务来执行各种操作 - 例如检查服务器是否在某处的文件中说“服务器已准备好”（“在标准输出中”很大程度上取决于您启动进程的方式）。

或者您可以在特定 URL 中检查“服务器已准备好”或类似内容，请参阅[https://stackoverflow.com/a/2548226/924597](https://stackoverflow.com/a/2548226/924597)

# iphone - Tableview的Plist搜索

> ID：13987238
> 
> 赞同：2
> 
> 时间：2012-12-21T09:14:24.807
> 
> 标签：iphone, ios, uitableview, plist, uisearchbar

我已经`Plist`在表格视图中填充了扩展部分..现在我想搜索表格..在图像下面你可以看到当我搜索任何内容时发生了什么。. 只是因为我正在搜索它，但需要在 cellforrowatindexpath 中进行一些更改以获取搜索结果....

请检查代码，让我知道如何搜索 plist .. 应该对 plist 的搜索进行`cellforrowatindexpath`哪些`noofrowsinsection`更改

.

![第一的](../Images/1edae52ebe5b5ced5ebfba902f9a4fec.png) ![秒](../Images/2237f7cab345178212663cd74c201187.png) .

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

return [self.mySections count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 NSInteger rows = 0;

if ([self tableView:tableView canCollapseSection:section] || !(tableView == self.searchDisplayController.searchResultsTableView) )
{
    if ([expandedSections containsIndex:section] )
    {

        NSString *key = [self.mySections objectAtIndex:section];
        NSArray *dataInSection = [[self.myData objectForKey:key] objectAtIndex:0];

        return [dataInSection count];

    }
    return 1;
 } else if(tableView == self.searchDisplayController.searchResultsTableView) {

     rows = [self.searchResults count];
    return rows;
}

    return 1;

}

 -(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection: (NSInteger)section {
NSString *key = [self.mySections objectAtIndex:section];
return [NSString stringWithFormat:@"%@", key];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

  //some changes required  to display plst
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] ;
}

// Configure the cell...

if ([tableView isEqual:self.searchDisplayController.searchResultsTableView]) {
    cell.textLabel.text = [self.searchResults objectAtIndex:indexPath.row];
}else {

NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];

NSString *key = [self.mySections objectAtIndex:section];

NSDictionary *dataForSection = [[self.myData objectForKey:key] objectAtIndex:0];
NSArray *array=dataForSection.allKeys;

cell.textLabel.text = [[dataForSection allKeys] objectAtIndex:row];    
cell.detailTextLabel.text=[dataForSection valueForKey:[array objectAtIndex:indexPath.row]];
}

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if ([self tableView:tableView canCollapseSection:indexPath.section])
{
    if (!indexPath.row)
    {
        // only first row toggles exapand/collapse
        [tableView deselectRowAtIndexPath:indexPath animated:YES];

        NSInteger section = indexPath.section;
        BOOL currentlyExpanded = [expandedSections containsIndex:section];
        NSInteger rows;

        NSMutableArray *tmpArray = [NSMutableArray array];

        if (currentlyExpanded)
        {
            rows = [self tableView:tableView numberOfRowsInSection:section];
            [expandedSections removeIndex:section];

        }
        else
        {
            [expandedSections addIndex:section];
            rows = [self tableView:tableView numberOfRowsInSection:section];
        }

        for (int i=1; i<rows; i++)
        {
            NSIndexPath *tmpIndexPath = [NSIndexPath indexPathForRow:i 
                                                           inSection:section];
            [tmpArray addObject:tmpIndexPath];
        }

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

        if (currentlyExpanded)
        {
            [tableView deleteRowsAtIndexPaths:tmpArray 
                             withRowAnimation:UITableViewRowAnimationTop];

            cell.accessoryView = [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeDown];

        }
        else
        {
            [tableView insertRowsAtIndexPaths:tmpArray 
                             withRowAnimation:UITableViewRowAnimationTop];
            cell.accessoryView =  [DTCustomColoredAccessory accessoryWithColor:[UIColor grayColor] type:DTCustomColoredAccessoryTypeUp];

        }
    }
}
}

- (void)filterContentForSearchText:(NSString*)searchText 
                         scope:(NSString*)scope
{
NSPredicate *resultPredicate = [NSPredicate 
                                predicateWithFormat:@"SELF contains[cd] %@",
                                searchText];

self.searchResults = [self.mySections filteredArrayUsingPredicate:resultPredicate];

}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
UISearchBar * searchBar = [controller searchBar];
[self filterContentForSearchText:searchString scope:[[searchBar scopeButtonTitles] objectAtIndex:[searchBar selectedScopeButtonIndex]]];
return YES;
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
UISearchBar * searchBar = [controller searchBar];
[self filterContentForSearchText:[searchBar text] scope:[[searchBar scopeButtonTitles] objectAtIndex:searchOption]];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:20:33.177

您在 numberOfRows 中使用的搜索结果应该用于 numberOfSections 因为您过滤的是节标题而不是行。

# android - IntelliJ 如何编译 Android 项目？

> ID：13987241
> 
> 赞同：1
> 
> 时间：2012-12-21T09:14:34.277
> 
> 标签：android, intellij-idea

所以我试图将我团队的项目从使用内置的 IntelliJ android 包生成器转移到 Android Maven。

到目前为止，我注意到的是，如果存在格式错误的 9 个补丁图像，IntelliJ 可以忽略这些问题，并在命令行上使用 Android Maven 时很好地编译和部署应用程序。

所以我的问题是，有人可以解释 IntelliJ 如何将 9 个补丁图像打包到可部署的 Android 应用程序中。它使用aapt吗？有没有更直接的方法来模拟 Intellijs android package builder 到命令行？

谢谢

# php - 用大数字分配数组索引会导致任何问题吗？

> ID：13987243
> 
> 赞同：-3
> 
> 时间：2012-12-21T09:14:45.313
> 
> 标签：php, arrays

如果我们定义一个类似 的数组`$arr[100]="sekar"`，它会创建一个有 100 个索引的数组还是只创建一个索引 id 为 100 的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:15:51.960

它将创建一个只有一个索引的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T09:16:32.020

如果我们定义一个类似 的数组`$arr[100]="sekar"`，它将创建一个带有 的数组`1 index with index id of 100`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:29:32.133

创建 100 个元素的数组，用 "sekar" 初始化，索引从 0 到 99

```
$array = array_fill(0,100,"sekar"); 
```

创建 1 个元素的数组，索引 '100'，值 'sekar'

```
$array[100] = 'sekar'; //Creates an array of size 1, index 0 
```

# php - 如何从表中获取多个结果并在查询中使用它们

> ID：13987251
> 
> 赞同：1
> 
> 时间：2012-12-21T09:15:18.490
> 
> 标签：php

我的代码有问题：

```
<?php 
    echo $s_country;
    $sql2="SELECT prod_id FROM tbl_order_item WHERE order_id='$order_id'";
    $res=mysql_query($sql2) or die(mysql_error());
    $i=0;
    $j="";
    while($rs=mysql_fetch_array($res)){
        $j = $rs['prod_id']; 
        if(trim($s_country)=='US' || trim($s_country=='United States' )){
            $sql3 = "SELECT shipping_us FROM tbl_product WHERE prod_id=".$j;
            $res=mysql_query($sql3) or die(mysql_error());
            $shipping_cost1=mysql_fetch_object($res);  
        }
        $i++;
    }
?> 
```

我真正想做的是从表中获取产品 id，`tbl_order_item`并使用该产品 id 从表中选择这些 id 的运费`tbl_product`。

例如，如果有两个产品 ID，则应为这两个 ID 选择运费。但在这里它只适用于这样的一个产品ID：

```
SELECT shipping_us FROM tbl_product WHERE prod_id=526 
```

但我想做的是：

```
SELECT shipping_us FROM tbl_product WHERE prod_id=526
SELECT shipping_us FROM tbl_product WHERE prod_id=527 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:16:29.960

你可以使用 OR，比如

```
SELECT shipping_us FROM tbl_product WHERE prod_id=526 OR prod_id=527 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:19:08.197

你也可以像这样使用它`IN`

```
SELECT shipping_us FROM tbl_product WHERE prod_id IN (526,527) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:24:47.983

**第一个解决方案：**

改变

```
$res=mysql_query($sql3) or die(mysql_error()); // you have overwritten result set of first query
$shipping_cost1=mysql_fetch_object($res); 
```

到

```
$newres=mysql_query($sql3) or die(mysql_error());
$shipping_cost1=mysql_fetch_object($newres); 
```

**第二种解决方案（好多了）：**

```
$sql2="SELECT GROUP_CONCAT(prod_id SEPARATOR ',') as pid FROM tbl_order_item WHERE order_id='$order_id'";
$res=mysql_query($sql2) or die(mysql_error());

if(mysql_num_rows($res) > 0){
  $rs=mysql_fetch_array($res);
  $sql3 = "SELECT shipping_us FROM tbl_product WHERE prod_id IN (".$rs['pid'].")";
  $res=mysql_query($sql3) or die(mysql_error());
  while ($row = mysql_fetch_array($res)){
     echo $row['shipping_us']
  }
} 
```

建议：

1.学会防止MySQL注入：[好链接](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

2.不推荐使用Mysql扩展来编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。更多阅读：[PHP 手册](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T04:43:46.820

我的 pblm 已经解决了……和特殊的 tnx 到 GBD ..

这是我的最终代码...

```
 <?php

     echo $s_country;

    $sql2="SELECT GROUP_CONCAT(prod_id SEPARATOR ',') as pid FROM tbl_order_item WHERE order_id='$order_id'";
    $res=mysql_query($sql2) or die(mysql_error());
    $shipping_cost1 = 0;

    if(mysql_num_rows($res) > 0){
      $rs=mysql_fetch_array($res);

      if(trim($s_country)=='US' || trim($s_country=='United States' )){
        $sql3 = "SELECT shipping_us FROM tbl_product WHERE prod_id IN (".$rs['pid'].")";
        $res=mysql_query($sql3) or die(mysql_error());
        if(mysql_num_rows($res) > 0){ 
          while ($row = mysql_fetch_array($res)){
           $shipping_cost1 = $shipping_cost1 + $row['shipping_us'];
          }
        }
      } else {
          $sql3 = "SELECT shipping_outside FROM tbl_product WHERE prod_id IN (".$rs['pid'].")";
          $res=mysql_query($sql3) or die(mysql_error());
          while ($row = mysql_fetch_array($res)){
            $shipping_cost1= $shipping_cost1 + $row['shipping_outside'];
          }
        }
    }

?> 
```

# android - 删除不需要的空间

> ID：13987253
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:15:35.157
> 
> 标签：android, textview, android-edittext

我正在尝试使用我的程序动态隐藏不需要的`TextView`字段`EditText`。代码正在运行，但隐藏字段被替换为空格。我希望隐藏字段下方的其他内容必须自动加载到隐藏字段上（这样可以避免不必要的滚动和纯白色字段）

**编辑 1** 请找到示例

```
 http://i.stack.imgur.com/nnXrV.png
     http://i.stack.imgur.com/BDQFm.png
     text3.setVisibility(View.GONE);
     edit3.setVisibility(View.GONE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:17:50.370

将 TextView 和 EditText 的可见性设置为`View.GONE`不`View.INVISIBLE`

```
TextView tv;
EditText et;

tv.setVisibility(View.GONE);
et.setVisibility(View.GONE); 
```

当您想要隐藏视图时，请按上述方式使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:40:41.163

这将隐藏您的 textview 和 edittext

```
 TextView tv = (TextView)findviewbyId(R.id.textview1);
 EditText et = (EditText)findviewbyId(R.id.edittext1);

 tv.setVisibility(View.Gone);
 et.setVisibility(View.Gone); 
```

# google-app-engine - 在应用程序引擎中，我应该在哪里放置代码以访问第三方 api？

> ID：13987265
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:16:17.700
> 
> 标签：google-app-engine, design-patterns

我正在为一所学校开发 App Engine 应用程序。该应用程序需要使用一些 Google API 来创建组、日历、驱动器文件夹等。该应用程序具有诸如类、课程、评估项之类的模型。这些模型需要为它们创建日历、驱动器文件夹和组。

我在哪里放置代码以访问 Google API 并创建这些第三方资源？

我的第一直觉是把代码放在模型中，但我越想越觉得不对，现在我不知道该放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:48:31.300

同意 Paul C。您还可以通过 API 控制台 (https://code.google.com/apis/console) 检查您是否正在调用 API。

# java - 将值从活动传递到android中的下一个活动

> ID：13987269
> 
> 赞同：2
> 
> 时间：2012-12-21T09:16:28.230
> 
> 标签：java, android, android-intent, android-activity, pass-data

我开发了一个安卓应用程序。

这是我的第一个活动：

```
public class ViewCartActivity extends Activity {

String mGrandTotal;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewcartactivity);

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    TextView mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);
    Button mBtnSubmit = (Button) findViewById(R.id.mBtnSubmit);

    ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(
            ViewCartActivity.this);

    mLstView1.setAdapter(mViewCartAdpt);

    if (Constants.mItem_Detail.size() > 0) {
        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0)
                .get(SingleMenuItem.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) {
            mGTotal = mGTotal
                    + Double.parseDouble(Constants.mItem_Detail.get(i).get(
                            SingleMenuItem.KEY_TOTAL));
        }

        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText("$" + mGrandTotal);
    }

    mBtnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            String s= getIntent().getStringExtra(mGrandTotal);
             Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
             i.putExtra("GrandTotal", s);
                startActivity(i);

        }
    }); 
```

这是我的第二个活动：

```
setContentView(R.layout.customer_login);

   Intent in = getIntent();
       String total = in.getStringExtra(mGrandTotal);
    TextView grandtotal = (TextView) findViewById(R.id.grand_total);
     grandtotal.setText("Welcome ,"+getIntent().getExtras().getString(total)); 
```

在这里，我必须运行该应用程序意味着第一次活动获得 45.32 美元。我必须将这些 45.32 美元传递给下一个活动，这意味着我将获得空值。

我怎样才能清除这些错误。请帮助我如何将值从第一个活动传递到下一个活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:18:46.110

更改`getIntent().getExtras().getString(total)` 为：

```
getIntent().getStringExtra("GrandTotal"); 
```

或者

```
String total = in.getStringExtra("GrandTotal");
grandtotal.setText("Welcome ," + total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:07:50.957

```
FirstActivity

public class ViewCartActivity extends Activity {

String mGrandTotal;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewcartactivity);

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);
    TextView mTxtViewGrandTotal = (TextView) findViewById(R.id.mTxtViewGrandTotalValue);
    Button mBtnSubmit = (Button) findViewById(R.id.mBtnSubmit);

    ViewCartAdapter mViewCartAdpt = new ViewCartAdapter(
            ViewCartActivity.this);

    mLstView1.setAdapter(mViewCartAdpt);

    if (Constants.mItem_Detail.size() > 0) {
        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0)
                .get(SingleMenuItem.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) {
            mGTotal = mGTotal
                    + Double.parseDouble(Constants.mItem_Detail.get(i).get(
                            SingleMenuItem.KEY_TOTAL));
        }

        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText("$" + mGrandTotal);
    }

    mBtnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

             Intent i = new Intent(getApplicationContext(), CustomerLogin.class);
             i.putExtra("GrandTotal", mGrandTotal);
                startActivity(i);

        }
    });

SecondActivity

setContentView(R.layout.customer_login);

  Bundle b = getIntent().getExtras();
       String total = b.getString("GrandTotal");
    TextView grandtotal = (TextView) findViewById(R.id.grand_total);
     grandtotal.setText("Welcome ," + total ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:18:24.703

只是改变

```
grandtotal.setText("Welcome ,"+getIntent().getExtras().getString(total)); 
```

到

```
grandtotal.setText("Welcome ,"getIntent().getExtras().getString(GrandTotal)); 
```

在第二个活动中。

并删除

```
String s= getIntent().getStringExtra(mGrandTotal); 
```

它应该是

```
i.putExtra("GrandTotal", mGrandTotal); 
```

从按钮单击事件的第一个活动开始。因为 mGrandTotal 是本地活动变量。所以你不需要从意图中得到它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:19:57.803

要么将值存储在一个活动中的共享偏好中，然后从另一活动中的相同偏好中获取值。

存储在首选项中

```
 SharedPreferences preferences=getSharedPreferences(preferencename, MODE_PRIVATE);
          Editor preferenceEditor=preferences.edit();

          preferenceEditor.putString(key,value);
          preferenceEditor.putInt(key,value);
          preferenceEditor.commit(); 
```

从偏好中获取

```
 preferences=getSharedPreferences(config_prop.getConfigValue("sharedprefs"), MODE_PRIVATE);
         String str=preferences.getString(key, defaultValue); 
```

您也可以使用意图传递值。

# c# - Telerik RadGrid - 从 JavaScript 中的模板字段获取父 GridDataItem

> ID：13987271
> 
> 赞同：0
> 
> 时间：2012-12-21T09:16:30.173
> 
> 标签：c#, javascript, telerik, radgrid

我有一个带有图像列的 RadGrid 和一个 RadNumericTextBox 列。这是我的标记：

```
<Columns>
    <telerik:GridTemplateColumn>
        <ItemTemplate>
            <asp:Image ID="imgStatus" runat="server" ImageUrl="~/Content/Images/cross.png" />
        </ItemTemplate>
    </telerik:GridTemplateColumn>
    <telerik:GridBoundColumn DataField="ID" DataType="System.Int64" FilterControlAltText="Filter ID column" HeaderText="ID" ReadOnly="True" SortExpression="ID" UniqueName="ID">
    </telerik:GridBoundColumn>
    <telerik:GridBoundColumn DataField="PalletNumber" FilterControlAltText="Filter PalletNumber column" HeaderText="PalletNumber" SortExpression="PalletNumber" UniqueName="PalletNumber">
        </telerik:GridBoundColumn>
    <telerik:GridBoundColumn DataField="Available" DataType="System.Int32" FilterControlAltText="Filter Available column" HeaderText="Available" ReadOnly="True" SortExpression="Available" UniqueName="Available">
    </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Quantity" DataType="System.Int32" FilterControlAltText="Filter Quantity column" HeaderText="Quantity Allocated" ReadOnly="True" SortExpression="Quantity" UniqueName="Quantity">
    </telerik:GridBoundColumn>
    <telerik:GridTemplateColumn HeaderText="Booked Off">
        <ItemTemplate>
            <telerik:RadNumericTextBox ID="nmBookedOff" runat="server" MaxValue='<%# Convert.ToDouble(Eval("Quantity")) %>' MinValue="0" ShowSpinButtons="true" Type="Number" NumberFormat-DecimalDigits="0" ClientEvents-OnValueChanged='valueChanged'></telerik:RadNumericTextBox>
        </ItemTemplate>
    </telerik:GridTemplateColumn>
</Columns> 
```

因此，用户将通过每一行更改预订数量，其想法是如果数字列具有值，则图像列将更改为“tick.png”。正如您在 RadNumericTextBox 上看到的，我已经连接了一个客户端事件处理程序，但是如何从那里获取行对象？事件中发件人上的 get.parent() 只是给了我 GridTableView！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:01:08.667

# git - Git 日志：按提交的作者日期过滤

> ID：13987273
> 
> 赞同：40
> 
> 时间：2012-12-21T09:16:37.600
> 
> 标签：git

我有这样的承诺

```
commit 8a183536da1641afa6bd5a27ae391b387b7cd052
Author:     hidden
AuthorDate: Fri Sep 7 10:13:59 2012
Commit:     hidden
CommitDate: Fri Dec 7 17:29:24 2012 
```

我想过滤日志并按**AuthorDate**显示提交。

我尝试了`--since`&`--until`选项，但它实际上过滤了**CommitDate**。

这意味着我只能通过

```
git log --since='2012-12-01' --until='2012-12-10' 
```

如果我想通过 start_date '2012-09-01' 和 end_date '2012-09-10' 获得提交过滤器

有小费吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-16T10:28:37.817

```
git log --format=format:"%ai %aE %s" 
```

然后按 AuthorName 和/或日期 grep！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T12:40:37.017

恐怕您需要编写一些脚本：

```
git log --format="%ad %H" --date=iso | sort | ruby -ane 'date = $F[0] ; hash = $F[3] ; puts hash if ("2013-08-23".."2013-09-26").cover?(date)' 
```

给了我：

```
3eddb854eaea971e9a60147153f0f3c9be4f1a5a
dfeefd4715c4fddef0957c5aff238c525bb1def6
db654badb97f3784286171d4645e9face6a42865
62cdba07e6ae0cd28752491a83f584d3e18a5619
7643a0458a54200f8944583d66c089d63c1bf688
23b720852a36e959d0f45f9d11f05d4aa7ee0cb9
f729ec9c5bf37ee0284a8db47cbc79a0b53145bb
bc2d647ae86fbff1246ba163a5a99d25ed2f3523
a0752b3cbae39698449be953153ddaafe35c054c
8e88fffc75cbdda333c86cb4f5eb9b5b30263c27

```

不幸的是，`git log 3eddb854eaea971e9a60147153f0f3c9be4f1a5a..8e88fffc75cbdda333c86cb4f5eb9b5b30263c27`不能保证工作，因为这些提交可能在不同的分支中。

让我们解释一下我做了什么：

1.  `--format="%ad %H"`– 将日志格式化为`author_date commit_hash`行
2.  `--date=iso`– 日期`YY-mm-dd HH:MM:SS`格式
3.  `sort`- 按字母顺序对行进行排序的 Unix 命令；适合以 ISO 格式对日期进行排序
4.  `ruby -ane`– 执行 ruby​​ 脚本。-n 表示对每一行执行，-a 拆分这些行并将字段放入`$F`数组，-e 精确执行脚本
5.  `("2011-02-23".."2011-02-26").cover?(date)`– 从两个字符串创建范围并检查日期是否包含在内（在字母顺序的含义中，我们没有解析这些日期）

我不知道下一步该做什么（给你更好的日志），但很高兴能把你带到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-03T08:00:37.027

我有时想找到我在某个日期创作的提交。为此，我使用`git log --all --author=jpo --format="%ai %s" |grep -E ^2015-09-01`. 不幸的是，该方法通常不适用于按日期范围过滤，但对于问题中使用的范围，它可以很容易地完成：`git log --all --author=jpo --format="%ai %s" |grep -E ^2012-12-(0.|10)`如果您想要除了作者日期和提交消息之外的有关提交的更多信息，只需在格式字符串中添加更多参数（检查页面的漂亮格式部分`git help log`）。

# asp.net-mvc - 如何更改 simplemembershipprovider 的表名？

> ID：13987276
> 
> 赞同：1
> 
> 时间：2012-12-21T09:17:09.073
> 
> 标签：asp.net-mvc, simplemembership

是否可以在创建时使用其他字段更改默认表（UserProfile、webpages_Membership 等）名称？

如果有可能我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T19:41:12.797

不，不是。表名在 SimpleMembershipProvider 中硬编码。

如果需要，您可以获取源代码、修改名称并使用您自己的版本。来源在这里：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e0115a823029#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e0115a823029#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs)

神秘人[在这里回答](https://stackoverflow.com/questions/12872014/can-i-change-the-webpages-membership-table-name-prefix-in-asp-net-mvc-4)

# maven-2 - 仅使用本地 maven 存储库来获取所需的 jars

> ID：13987286
> 
> 赞同：2
> 
> 时间：2012-12-21T09:17:33.477
> 
> 标签：maven-2

是否可以先下载组织本地 maven 存储库所需的 jar，然后再下载到机器存储库中使用。

我的情况是：

1.我的项目正在使用 abc.jar 并且它不存在于我的本地存储库中，然后我希望它首先从公共存储库下载到组织本地 maven 存储库。

2.然后我的项目将使用来自orgnisation本地maven存储库的这个abc.jar。

是否有可能或者我想手动将每个 jar 部署到组织本地 maven 存储库。

因为现在如果我的项目需要任何 jar，那么它会在本地 maven 存储库中找到它，如果找不到，则直接将其下载到我的本地机器 ~/.m2/repository 文件夹。我想先下载到组织本地存储库，然后再下载到我的本地机器。现在我的 Settings.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <servers>

  <server>
      <id>local.orgnisation.repo</id>
      <username>pallavi</username>
      <password>pallavi</password>
    </server>
    </servers>

<mirrors>
    <mirror>
      <id>local.orgnisation.repo</id>
      <name>Local repository</name>
      <url>http://local.orgnisation.repo/artifactory/repo</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>

<!--<profiles>
    <profile>
      <id>default</id>
      <repositories>
          <repository>
              <id>local.orgnisation.repo</id>
              <url>http://local.orgnisation.repo/artifactory/repo</url>
          </repository>
      </repositories>
        </profile>
  </profiles>-->
    <activeProfiles>
    <activeProfile>default</activeProfile>
  </activeProfiles>

</settings> 
```

我正在使用工件存储库管理器。任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:48:46.790

您需要在 Maven settings.xml 中为中央存储库创建一个镜像条目

[http://maven.apache.org/guides/mini/guide-mirror-settings.html](http://maven.apache.org/guides/mini/guide-mirror-settings.html)

```
<mirror>
  <id>local</id>
  <mirrorOf>central</mirrorOf>
  <url>URL of your artifactory repository</url>
</mirror> 
```

# sql - 为什么在没有 ORDER BY 子句的情况下 SQL Server 2000 的行为与 SQL Server 2008 不同？

> ID：13987287
> 
> 赞同：1
> 
> 时间：2012-12-21T09:17:36.923
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2, sql-server-2000

我们使用的是 SQL Server 2008 R2。我们有一个名为 PD（6 列）的表，它没有主键，并且在任何列上都没有索引。当我们执行查询时

```
select * from PD where ESE='bycad' 
```

如果没有 ORDER BY 子句，每次执行相同的查询时，我们都会以不同的顺序获得结果。直到两个月前，我们才使用 SQL Server 2000，从未遇到过这个问题。

这是 SQL Server 2008 中的错误吗？我知道我们应该使用 ORDER BY 子句，但为什么 SQL Server 2008 对没有 ORDER BY 子句的 SQL 查询有不同的处理方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T09:19:39.330

任何来自 SQL Server 的结果集都是一个集合。集合没有固有的顺序。

除非指定了“ORDER BY”，否则从选择语句返回的行从来没有任何顺序保证。（对于任何 rdbms 都是如此，不仅是 SQL Server）

编辑：要回答您的问题，您在每次执行时看到不同顺序的原因很可能是由表的并行扫描“引起”的。你也买了新的硬件吗？但同样，如果您需要排序结果，则需要指定“ORDER BY”。

# android - SVG 图像在具有相同代码的 android 3.0+ 中不可见

> ID：13987288
> 
> 赞同：10
> 
> 时间：2012-12-21T09:17:44.473
> 
> 标签：android, svg, android-imageview, svg-android

我有一个测试应用程序，其中有一个 ListView，其中包含两个图像。

![Nexus 7 与欲望高清](../Images/b5a6b2926a92683e5602a618ec0d74c2.png)

正如您在 API 17 设备中看到的那样，API 10 设备不显示播放按钮（SVG 图像）。我该如何解决？

我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/background"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:scaleType="centerCrop" />

    <ImageView
        android:id="@+id/forceground"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

这是我设置图像的基本代码：

```
View preview = inflater.inflate(R.layout.list_video_preview, parent, false);
ImageView background = (ImageView)preview.findViewById(R.id.background);
ImageView forceground = (ImageView)preview.findViewById(R.id.forceground);
PictureDrawable play = SVGParser.getSVGFromResource(parent.getResources(), R.raw.play_blue).createPictureDrawable();
forceground.setImageDrawable(play); 
```

SVG paser 来自[svg-android](http://code.google.com/p/svg-android/)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T14:34:30.037

问题是硬件加速。解决方案是使用位图而不是可绘制对象。为了解决这个问题，我将此函数添加到`SVG.java`返回一个`BitmapDrawable`：

```
public BitmapDrawable createBitmapDrawable(Context context) {
    Bitmap bitmap = Bitmap.createBitmap(picture.getWidth(), picture.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    PictureDrawable drawable = new PictureDrawable(picture);
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);
    return new BitmapDrawable(context.getResources(), bitmap);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-27T12:11:07.747

您的解决方案的问题是，在将其转换为`Bitmap`. 在您的情况下，它不适用，但如果您需要支持`Zooming`and `Panning`，您将缩放和调整 a 的大小`Bitmap`并获得像素化图形。`Picture`此外，将 a 绘制到 a中效率要低得多`Bitmap`，然后将由`View`包含它的 the 绘制。

我遇到了同样的问题，并通过仅在将绘制的视图上关闭硬件加速来解决它`Picture`：

```
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

但是[setLayerType](http://developer.android.com/reference/android/view/View.html#setLayerType%28int,%20android.graphics.Paint%29)自 API 11 起才受支持。因此请改用此方法：

```
public static void setHardwareAccelerated(View view, boolean enabled){
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        if(enabled)
            view.setLayerType(View.LAYER_TYPE_HARDWARE, null);
        else view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    }
} 
```

# xml - 删除某些 XML 文件条目

> ID：13987291
> 
> 赞同：0
> 
> 时间：2012-12-21T09:17:56.320
> 
> 标签：xml, notepad++

目前我正在处理包含数十万个 xml 条目的大文件，在更改它们之后，我必须将它们作为新数据库上传到特定系统中，文件内容如下所示：

```
 <Row ss:AutoFitHeight="0">
    <Cell><Data ss:Type="String">Product</Data></Cell>
    <Cell><Data ss:Type="String">Home &gt; Connectors &gt; Power Entry</Data></Cell>
    <Cell><Data ss:Type="Number">10430</Data></Cell>
    <Cell><Data ss:Type="String">CAMDEN-BOSS CONTACT, 6AWG, 75A CBCAG14</Data></Cell>
    <Cell><Data ss:Type="String">CONTACT, 6AWG, 75A; Connector Mounting:Cable; Contact Termination:Crimp; Current Rating:75A; SVHC:No SVHC (18-Jun-2012); Series:CBC; Voltage Rating:600V; Flammability Rating:UL94 V0; Wire Area Size Max:11mm; Wire Size AWG Max:6AWG; Wire Size AWG Min:6AWG&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;Price for pack of: 1&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;strong&gt;Country Of Origin: CN&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;&lt;a href=&quot;http://LALA.co.uk/datasheets/1508502.pdf&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/ekmps/shops/LALA/resources/Design/icon-pdf.gif&quot; style=&quot;width: 16px; height: 16px;&quot; /&gt;&amp;nbsp;Technical Data Sheet&lt;/a&gt;&lt;br /&gt;</Data></Cell>
   </Row> 
```

我的工作是删除所有包含 .pdf 文件链接的条目，上面的例子有它，所以会留下，但如果没有“http://LALA.co.uk/datasheets/1508502.pdf”在描述中它应该被删除（所有行），我可以使用不同的东西，从 C# 到.. 所以解决方案类型并不重要，任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:26:09.537

在记事本++中查找（Ctrl+F）

```
<Row[^>]*>((?!\.pdf).)*?</Row> 
```

用。。。来代替

```
(leave blank) 
```

必须选中“正则表达式”和“.matches newline”框

# asp.net-mvc - 如何使用 StructureMap 在另一个程序集中使用绑定？

> ID：13987297
> 
> 赞同：3
> 
> 时间：2012-12-21T09:18:17.973
> 
> 标签：asp.net-mvc, inversion-of-control, structuremap

我有一个 MVC (4) 应用程序，并且在我的 global.asax 中（在 Application_Start() 中）中，AI 有这个：

```
ObjectFactory.Configure(x =>
{
    x.For<IPerson>().Use<Person>();
    x.For<IObjectCreator>().Use<StructureMapObjectCreator>();
    x.For<IPersonRepository>().Use<PersonRepository>();
}); 
```

这在程序集 A 中有效。

现在，我有程序集 B。程序集 B 也是一个 Web 应用程序，并且具有对程序集 A 的引用。程序集 A 中定义的绑定必须可以从程序集 B 访问。所以，当我在程序集 BI 中使用 IPerson 时，我想使用来自大会 A。

我在程序集 B 中尝试了几件事，但我无法弄清楚。这是我最后一次尝试：

程序集 B 中的 Global.asax（在 Application_Start() 中）：

```
var mainAssembly = Assembly.GetAssembly(typeof(IObjectCreator));

ObjectFactory.Configure(x => 
{
    x.For<IProduct>().Use<Product>();
    x.Scan(assembly =>
    {
        assembly.Assembly(mainAssembly);
    });
}); 
```

我必须做什么才能在程序集 B 中使用程序集 A 的绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:35:41.203

您可以在程序集 A 中创建一个注册表，其中包含您在程序集 A 中所需的所有映射。然后您可以将该注册表注册到 Global.asax 中的程序集 A 和其 Global.asax 中的程序集 B。[StructureMap 注册表 DSL](http://docs.structuremap.net/RegistryDSL.htm)

然后，在程序集 B 中，您可以像这样注册您的注册表：

```
var container = new Container(x =>
        {
            x.AddRegistry<AssemblyARegistry>();
        }); 
```

# javascript - 如何捕获 Enter 按键？

> ID：13987300
> 
> 赞同：62
> 
> 时间：2012-12-21T09:18:33.837
> 
> 标签：javascript, textbox, keypress, dom-events, onkeypress

在我的 HTML 页面中，我有一个文本框供用户输入关键字进行搜索。当他们单击搜索按钮时，JavaScript 函数将生成一个 URL 并在新窗口中运行。

当用户用鼠标点击搜索按钮时，JavaScript 函数正常工作，但当用户按下 ENTER 键时没有响应。

```
function searching(){
    var keywordsStr = document.getElementById('keywords').value;
    var cmd ="http://XXX/advancedsearch_result.asp?language=ENG&+"+ encodeURI(keywordsStr) + "&x=11&y=4";
    window.location = cmd;
} 
```

```
<form name="form1" method="get">
    <input name="keywords" type="text" id="keywords" size="50" >
    <input type="submit" name="btn_search" id="btn_search" value="Search" 
        onClick="javascript:searching(); return false;" onKeyPress="javascript:searching(); return false;">
    <input type="reset" name="btn_reset" id="btn_reset" value="Reset">
</form> 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-21T09:42:19.280

## 形式方法

正如 scoota269 所说，您应该`onSubmit`改用，因为在文本框上按 enter 很可能会触发表单提交（如果在表单内）

```
<form action="#" onsubmit="handle">
    <input type="text" name="txt" />
</form>

<script>
    function handle(e){
        e.preventDefault(); // Otherwise the form will be submitted

        alert("FORM WAS SUBMITTED");
    }
</script> 
```

## 文本框方法

如果您想在输入字段上有一个事件，那么您需要确保您`handle()`将返回 false，否则表单将被提交。

```
<form action="#">
    <input type="text" name="txt" onkeypress="handle(event)" />
</form>

<script>
    function handle(e){
        if(e.keyCode === 13){
            e.preventDefault(); // Ensure it is only this code that runs

            alert("Enter was pressed was presses");
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-21T09:22:48.087

使用`onkeypress`. 检查按下的键是否输入（keyCode = 13）。如果是，则调用该`searching()`函数。

**HTML**

```
<input name="keywords" type="text" id="keywords" size="50"  onkeypress="handleKeyPress(event)"> 
```

**JAVASCRIPT**

```
function handleKeyPress(e){
 var key=e.keyCode || e.which;
  if (key==13){
     searching();
  }
} 
```

这是一个显示它的片段：

```
document.getElementById("msg1").innerHTML = "Default";
function handle(e){
 document.getElementById("msg1").innerHTML = "Trigger";
 var key=e.keyCode || e.which;
  if (key==13){
     document.getElementById("msg1").innerHTML = "HELLO!";
  }
}
```

```
<input type="text" name="box22" value="please" onkeypress="handle(event)"/>
<div id="msg1"></div>
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-25T07:10:50.430

尝试这个....

HTML 内联

```
onKeydown="Javascript: if (event.keyCode==13) fnsearch();"
or
onkeypress="Javascript: if (event.keyCode==13) fnsearch();" 
```

JavaScript

```
<script>
function fnsearch()
{
   alert('you press enter');
}
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-06T10:14:29.460

你可以使用 javascript

```
ctl.attachEvent('onkeydown', function(event) {

        try {
            if (event.keyCode == 13) {
                FieldValueChanged(ctl.id, ctl.value);
            }
            false;
        } catch (e) { };
        return true
    }) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-12T14:28:16.777

一小部分通用 jQuery 给你..

```
$('div.search-box input[type=text]').on('keydown', function (e) {
    if (e.which == 13) {
        $(this).parent().find('input[type=submit]').trigger('click');
        return false;
     }
}); 
```

这适用于假设文本框和提交按钮包装在同一个 div 上。在页面上使用多个搜索框进行处理

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-05T21:34:53.337

使用`event.key`代替`event.keyCode`！

```
function onEvent(event) {
    if (event.key === "Enter") {
        // Submit form
    }
}; 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-21T09:21:31.390

在表单标签上使用 onsubmit 属性，而不是在提交时使用 onclick。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-21T09:25:34.730

您需要为该`onkeypress`操作创建一个处理程序。

**HTML**

```
<input name="keywords" type="text" id="keywords" size="50" onkeypress="handleEnter(this, event)" /> 
```

**JS**

```
function handleEnter(inField, e)
{
    var charCode;

    //Get key code (support for all browsers)
    if(e && e.which)
    {
        charCode = e.which;
    }
    else if(window.event)
    {
        e = window.event;
        charCode = e.keyCode;
    }

    if(charCode == 13)
    {
       //Call your submit function
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-24T07:53:32.213

```
 // jquery press check by Abdelhamed Mohamed

    $(document).ready(function(){
    $("textarea").keydown(function(event){
        if (event.keyCode == 13) {
         // do something here
         alert("You Pres Enter");
        }
       });
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <textarea></textarea>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-07T11:33:32.863

```
<form action="#">
    <input type="text" id="txtBox" name="txt" onkeypress="handle" />
</form>

<script>
    $("#txtBox").keypress(function (e) {
            if (e.keyCode === 13) {
                alert("Enter was pressed was presses");
            }

            return false;
        });

    </script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-09T14:18:15.407

这是简单的 ES-6 风格答案。用于捕获“输入”按键并执行某些功能

```
<input
    onPressEnter={e => (e.keyCode === 13) && someFunc()}
/> 
```

# c# - Asmx WebService 静态构造函数被多次调用

> ID：13987301
> 
> 赞同：2
> 
> 时间：2012-12-21T09:18:35.680
> 
> 标签：c#, web-services, static, constructor, asmx

调用第一个方法时，应调用一次静态构造函数。每次调用方法时都会调用我的构造函数。任何想法为什么会这样？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace SimpleWS
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class WebService1 : System.Web.Services.WebService
    {
        static WebService1()
        {
            //initialize
            //write to log file
        }

        [WebMethod]
        public string test()
        {
            return "0";
        }
    }
} 
```

# algorithm - 通过语音查询进行语音检索

> ID：13987302
> 
> 赞同：0
> 
> 时间：2012-12-21T09:18:40.530
> 
> 标签：algorithm, open-source, speech-recognition

我的主要问题如下：给定一组参考语音文件（从语音短语中提取的特征列表）和一个查询语音输入，我需要从我的参考文献中找出最适合数学的那个。关键是不要搜索所有这些，而是​​尽可能地修剪掉。有人可以向我指出解决此问题的有效算法或处理此类问题的任何开源代码吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T20:51:16.470

一种常用且有效的方法是将参考语音文件的索引构建为有限状态传感器。请参阅 Cyril Allauzen、Mehryar Mohri 和 Murat Saraclar 的论文“加权自动机的一般索引：应用于口语检索”（HLT-NAACL 2004） [http://acl-arc.comp.nus.edu.sg/archives/ acl-arc-090501d4/data/pdf/anthology-PDF/W/W04/W04-2907.pdf](http://acl-arc.comp.nus.edu.sg/archives/acl-arc-090501d4/data/pdf/anthology-PDF/W/W04/W04-2907.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:37:23.170

我假设参考文件中的文本与查询文件中的文本相同。执行此操作的常用方法是简单地将每个参考文件与查询文件进行比较。通常你会使用[动态时间扭曲](http://en.wikipedia.org/wiki/Dynamic_time_warping)算法——维基百科文章有几个实现的链接，你自己实现并不难。基本思想是尝试对齐这两个文件，然后选择最符合查询的参考。

我知道你说过你不想比较每个例子。在这种情况下，我的第一个想法是对参考文件进行聚类。离线时，您可以将参考文件相互比较，并将相似的文件组合在一起。当需要查询时，您只需比较每个集群中的一个示例。然后，您可以根据结果与最近的一个或多个集群中的所有文件进行比较。

这只是一个想法，我相信还有其他想法。

# jquery - Onclick 展开的 div 行为怪异

> ID：13987303
> 
> 赞同：0
> 
> 时间：2012-12-21T09:18:41.817
> 
> 标签：jquery, css

我想做一个像这样的投资组合[页面](http://creamyorange.com/)。
我正在使用砌体 Jquery 插件。
因此，当我单击一个框时，它应该展开并推动其他框，而不是位于它们下方。
所以基本上，在点击时，我会在我点击的框中添加一个新的宽度和高度，并`div`在框中显示另一个。

如果我添加`height`和`width`内联，`div`它会像它应该的那样推动其他框，但是当我使用 jQuery 时，它只是在它们下面展开。[这是一个小提琴。](http://jsfiddle.net/WA347/43/)

**html:**

```
<div class="container">
    <div class="box" id="1" onmouseover="$(this).addClass('hover');" onmouseout="$(this).removeClass('hover');">
        <div class="close-btn" id="cb_1"></div>
        <div class="box-content" id="bc_1">
            <img src="image.png" />
            <span class="title">Titlul clipului aici 1</span>
        </div>
        <div class="big-box-content" id="bbc_1">
            <h1 class="title">Titlul clipului aici 1</h1>

            <img src="image.png" />
            <p>Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese.</p>
        </div>
    </div>

    <div class="box" id="2" onmouseover="$(this).addClass('hover');" onmouseout="$(this).removeClass('hover');">
        <div class="close-btn" id="cb_2"></div>
        <div class="box-content" id="bc_2">
            <img src="image.png" />
            <span class="title">Titlul clipului aici 2</span>
        </div>
        <div class="big-box-content" id="bbc_2">
            <h1 class="title">Titlul clipului aici 2</h1>

            <img src="image.png" />
            <p>Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese. Descrierea clipului aici in cateva randuri bune sa vedem cum iese.</p>
        </div>

    </div>
     .....
     .....
</div> 
```

**jQuery：**

```
$('.box').click(function () {
    id = this.id;
    //if there is any box opened, close it
    $('.close-btn').css('display', 'none');
    $('.box-content').css('display', 'block');
    $('.big-box-content').css('display', 'none');
    $('.box').css('width', '200px').css('height', 'auto').css('padding', '10px');
    // open the clicked one
    $('#' + id).css('width', '650px').css('height', 'auto').css('padding', '15px');
    $('#bc_' + id).css('display', 'none');
    $('#bbc_' + id).css('display', 'block');
    $('#cb_' + id).css('display', 'block');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:32:52.683

使用砌体的重载功能。

```
 $(function(){

    $('.container').masonry('reload');

}); 
```

jsfiddle：http: [//jsfiddle.net/WA347/45/](http://jsfiddle.net/WA347/45/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:25:43.010

我对砖石不是很熟悉，但它似乎增加`position:absolute;`了元素。我建议你尝试`position:relative;`改用。

即，改变这一行：

```
$('.container').masonry({ columnWidth:230 }); 
```

到这一行：

```
$('.container').masonry({ columnWidth:230, position:relative }); 
```

查看他们文档的这一部分：[masonry: containerStyle](http://masonry.desandro.com/docs/options.html#containerstyle)

# ruby - 从数组中删除所有偶数（Ruby）？

> ID：13987307
> 
> 赞同：1
> 
> 时间：2012-12-21T09:18:48.217
> 
> 标签：ruby

我正在做 Ruby Monk 教程以进一步学习一些 Ruby，但我对什么应该是一个更简单的问题感到困惑。我知道答案就在我面前，但我似乎无法弄清楚：

从下面给出的数组中删除所有偶数： [1, 2, 3, 4, 5, 6, 7, 8, 9]

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T09:22:11.747

这里是。

```
a = [1, 2, 3, 4, 5, 6]
a.delete_if &:even? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-19T04:16:25.533

这是一种更简单的方法

```
[1, 2, 3, 4, 5, 6].delete_if {|n| n%2 == 0 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-02T23:20:32.517

尽量让大家放松。我的名字是 Ron，我也在上 RubyMonk 课程。问题是我们过度分析了一个简单的问题。我们被要求从数组 [1,2,3,4,5,6,7,8,9] 中删除所有偶数。在阅读了您的精彩答案后，我回去并像这样重新设计它：[1,2,3,4,5,6,7,8,9]-[2,4,6,8]，我通过了它与绿灯继续前进。非常感谢您的宝贵时间..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:25:29.467

我认为 Gull 的建议对您最有帮助。但是，如果您想要另一个仅包含奇数的数组，还有另一种选择：

```
a = [1, 2, 3, 4, 5, 6]
b = a.select {|x| x.odd? } 
```

同样在他的回答中，您可以使用`even?`而不是`x % 2 == 0`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T22:58:50.160

```
[1,2,3,4,5,6,7,8,9].delete_if {|n| n %2 == 0 } 
```

应该是您的答案，具体取决于您之前的课程。

# windows - 删除所有包含字符串的文件

> ID：13987309
> 
> 赞同：1
> 
> 时间：2012-12-21T09:18:52.513
> 
> 标签：windows, file, cmd, grep, delete-file

我有大约 40,000 个文件和一个标识符列表。

例如：AB000001、AB000002、AB000004、AB000005、AB000006、AB000007

每个文件都应该包含一个标识符（不在文件名中），我需要找到不在我的列表中的所有文件。

我相信最好的办法是运行一个小程序或命令来删除包含我的任何标识符列表的所有文件。

所以在我运行命令/程序后，我会留下一个包含 AB000003 的文件。

有谁知道已经存在的技术或免费软件可以帮助我实现这一目标，而不是从头开始编写一些东西。

编辑：忘记添加文件是 .xml 并且我有很多标识符（35,000）所以不能真正手动执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:31:35.423

假设您的标识符在文本中，每个 Id 在一个新行中，然后执行以下操作：

```
for /F "tokens=* delims=*" %E in (identifiers.txt) DO (grep -l "%E" *.xml) 
```

您可以将输出重定向到，`>> %E.txt`以便获得每个标识符的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:55:10.170

您可以创建一个`list.txt`文件，其中包含您需要匹配的所有标识符。然后，不使用第三方软件而是使用[FINDSTR](http://ss64.com/nt/findstr.html)，您可以获得所有不包含匹配项的文件的名称：

```
findstr /L /V /G:list.txt *.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:30:32.943

[用于 Windows 的 Grep](http://www.wingrep.com/)看起来像是这项工作的野兽。理所当然地，您可以使用类似 *nix 的 grep 命令来完成工作。

评估版功能齐全。

你大概可以...

```
grep -l "AB000003" * 
```

列出您要识别的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:58:04.750

准备一个包含 ID 列表的文本文件，每行一个 ID。称它为 ID.LIST

```
AB000001
AB000002
AB000004
AB000005
AB000006
AB000007
etc. 
```

[使用适用于 Windows](http://gnuwin32.sourceforge.net/packages/grep.htm)的免费gnu grep ，以下命令将列出所有不包含任何 ID 字符串的 xml 文件。我添加了 -w 选项（匹配整个单词）以防止“AB000001”匹配“AB0000011”之类的内容。

```
grep -L -w -f ID.LIST *.xml 
```

# spring - 在理解 Spring/Hibernate 数据源和事务管理器方面寻求帮助

> ID：13987324
> 
> 赞同：2
> 
> 时间：2012-12-21T09:19:58.563
> 
> 标签：spring, hibernate, transactions, c3p0

我的项目使用 Spring 和 Hibernate 来管理数据库及其事务。我使用 HibernateTransactionManager 与 Hibernate 的 SessionFactory 一起管理事务。一切都很好。

我想尝试使用其他事务管理器，例如 Spring 的 DataSourceTransactionManager。实验失败了。然后我将 Spring 的 TransactionAwareDataSource 分层放在 C3P0 数据源之上，一切都恢复正常了。

正如我在 Spring Tx 文档中所读到的，简短的回答是让数据源 tx 感知。为什么我们需要让数据源事务感知，然后只有 tx 管理器可以管理它们，而 Hibernates SessionFactory 和 HibernateTransactionManager 不是这种情况？

谢谢

# javascript - Jquery Mobile 动态生成列表

> ID：13987325
> 
> 赞同：1
> 
> 时间：2012-12-21T09:19:59.483
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 JQuery Mobile 在可折叠页面中动态生成列表。

但是，如果我在带有项目列表的可折叠页面之前设置一个页面，那么 CSS 就会搞砸。

生成列表项的代码：

```
var li = domCreationService.createListItem({"data-corners":"false", "data-shadow":"false", 
    "data-iconshadow":"true", "data-wrapperels":"div", "data-icon":"arrow-r", "data-iconpos":"right", 
    "data-theme":"c", "class":"ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-li-last ui-btn-up-c"});

  var outherDiv = domCreationService.createDiv({"class": "ui-btn-inner ui-li"});
  li.appendChild(outherDiv);
  var innerDiv = domCreationService.createDiv({"class": "ui-btn-text"});
  outherDiv.appendChild(innerDiv);
  var link = domCreationService.createLinkItem({href: "#dialog.html",id: "dialog", "class": "ui-link-inherit", "data-rel": "dialog"});
  innerDiv.appendChild(link);
  link.appendChild(domCreationService.createImg({src: ("images/" + key + ".jpg"), "class": "ui-li-thumb"}));
  var obj = domCreationService.createHTag(3, {"class": "ui-li-heading"});
  obj.innerHTML = name;
  link.appendChild(obj);
  obj = domCreationService.createPTag({"class": "ui-li-desc"});
  obj.innerHTML = beskrivning;
  outherDiv.appendChild(domCreationService.createSpan({"class": "ui-icon ui-icon-arrow-r ui-icon-shadow"}));
  link.appendChild(obj); 
```

这是它在第一页时的样子：

```
<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-li-last ui-btn-hover-c">
<div class="ui-btn-inner ui-li">
    <div class="ui-btn-text">
        <a href="#dialog.html" id="dialog" class="ui-link-inherit" data-rel="dialog">
            <img src="images/picture.jpg" class="ui-li-thumb">
            <h3 class="ui-li-heading">Test</h3>
            <p class="ui-li-desc">Lorem Ipsum</p>
        </a>
    </div>
    <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
</div>
</li> 
```

但是当它不是首页时，我得到了这个：

```
<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-thumb ui-li-static ui-btn-up-c">
<div class="ui-btn-inner ui-li ui-corner-top ui-corner-bottom ui-li-static ui-btn-up-c">
    <div class="ui-btn-text">
        <a href="#dialog.html" id="dialog" class="ui-link-inherit" data-rel="dialog">
            <img src="images/picture.jpg" class="ui-li-thumb">
            <h3 class="ui-li-heading">Test</h3>
            <p class="ui-li-desc">Lorem Ipsum</p>
        </a>
    </div>
    <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
</div>
</li> 
```

请注意附加的第二个 div 类中的更改。

以前有人经历过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:23:01.213

您需要执行的动态添加内容到 jQM 列表视图的位置：

```
$('#listID').listview('refresh'); 
```

在列表生成结束时。此方法将重新设置所有新列表元素的样式。

# silverlight - 强制 iframe 中的 Silverlight Web 部件链接在父窗口中打开

> ID：13987326
> 
> 赞同：1
> 
> 时间：2012-12-21T09:20:08.033
> 
> 标签：silverlight, iframe

在 iframe 中，我将其设置`src`为包含 Silverlight Web 部件的页面，它不会生成任何锚元素，但在 silverlight Web 部件上有我们可以单击的文本，它们会将页面重定向到新的 url。

问题是 url 总是在 iframe 而不是父窗口中打开。我尝试了以下事情：

```
<base target="_search" />
<base target="_top" />
<base target="_parent" /> 
```

在`<head></head>`我的 iframe 页面内部，没有`""`and the`/`但没有工作。

Silverlight 是一个 Sharepoint 组件，因此我无法更改它或查看代码以了解它如何打开链接，因此我对此无能为力。

我非常想知道是否还有其他暴力方法可以强制在父窗口中打开链接？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:28:54.670

如果这是我一直在处理的同一问题（在 iFrame 内的 sharepoint 中添加组织浏览器），这可能会有所帮助。在包含 silverlight Web 部件并通过不同页面上的 iFrame 查看的页面上，我覆盖了 silverlight 用于更改 url 的 window.open 函数。下面我更改了父窗口的 URL，以便后续导航发生在主窗口中，并且 iframe 对用户完全透明。

这可能对您有用，尚未尝试过，但我假设您到达顶部框架后将能够找到其他 iframe。在我的情况下，这也是跨域。

```
<script>
//Window.open override - catches HTMLWindow.Navigate from silverlight hyperlink
window.open = function (open) {
    return function (url, name, features) {
        window.top.location = url;
        return false;
   };
}(window.open);
</script> 
```

# textbox - 从文本框发送输入

> ID：13987332
> 
> 赞同：0
> 
> 时间：2012-12-21T09:20:42.757
> 
> 标签：textbox, user-input

我的 C# WPF 项目中有一个文本框，我希望它在按下回车后将输入到文本框中的值发送到以下函数中的变量。

我的文本框中的用户输入是否必须在一个单独的函数中，或者我可以将它放在我想要将值发送到的同一个函数中？

```
 private void UserInput(object sender, KeyEventArgs e)
    {
        Point p1 = new Point();
        TextBox textBoxX = new TextBox();
        if (e.Key == Key.Enter)
        {
            double inputAsNumberX = 0.0000;
            if (double.TryParse(textBoxX.Text, out inputAsNumberX))
            {
                p1.X = inputAsNumberX;
            }
            else
            {
                MessageBox.Show("This is not a number.");
            }

        }
        else
        {
        }

        double inputAsNumberY = 0;
        TextBox textBoxY = sender as TextBox;
        while (textBoxY.Text == null)
        {
            //textBoxY = sender as TextBox;
        }
        if (double.TryParse(textBoxY.Text, out inputAsNumberY) == true)
        {
            p1.X = inputAsNumberY;
        }
        else
        {
            MessageBox.Show("This is not a number.");
        }

    } 
```

xml代码

```
<TextBox Name="TextBoxX" TextWrapping="Wrap" MaxLength="32" KeyDown="UserInput" /> 
```

更新：我有一个奇怪的问题是，当我尝试输入任何内容（调试时）时，它会阻止我输入任何内容。运行完代码并尝试再次输入后，它允许我输入一个字符（如数字），然后阻止我输入更多。

它似乎也只显示代码运行后在文本框中键入的新字符。

我怎样才能修复我的代码以我想要的方式运行，即输入一个值，按回车键，值被发送到函数，它将它设置为双变量：inputAsNumberX???

更新 2：我已经更新了我正在使用的代码。我试图获得两个输入，所以我设置了两个文本框。两者都应该按照我上面的要求做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:14:35.900

据我了解，您已将 UserInput 函数设置为`KeyDown`文本框上事件处理程序的处理程序。这意味着每次您在选中文本框的情况下按下一个键，都会调用 UserInput 函数。如果您只想在按下“Enter”时解析文本框的内容，您可以将代码更改为以下内容：

```
private void UserInput(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        var textBox = sender as TextBox;
        if (textBox != null)
        {
            double inputAsNumberX = 0;

            if (double.TryParse(textBox.Text, out inputAsNumberX))
            {
                // Do something with inputAsNumberX here.
            }
            else
            {
                MessageBox.Show("This is not a number.");
            }
        }
    }
} 
```

请注意，我首先检查是否按下了“Enter”。

**更新：**

我更改了上面的代码，以便它适用于任何`UserInput`用作事件的事件处理程序的文本框`KeyDown`。为您的两个文本框使用以下 XAML：

```
<TextBox Name="TextBoxX" TextWrapping="Wrap" MaxLength="32" KeyDown="UserInput" />
<TextBox Name="TextBoxY" TextWrapping="Wrap" MaxLength="32" KeyDown="UserInput" /> 
```

# c# - 多行正则表达式不匹配

> ID：13987334
> 
> 赞同：2
> 
> 时间：2012-12-21T09:20:51.363
> 
> 标签：c#, .net, regex

我正在尝试让多行正则表达式与 .NET 一起使用，但运气不佳。我相信我认为这将匹配多行是正确的，但总是省略第三个匹配。我需要捕获收件人和原因字段。我知道我可以用一个循环和两个正则表达式来做到这一点，但我更喜欢更简洁的解决方案。

我正在使用的正则表达式是：

```
(.*?)Destination: mobile (\(SMS\))?(\d{10,})(?:.*?)Reason: (.*) 
```

它应该与此文本匹配：

```
NON-DELIVERY NOTE

The following message was not delivered:

Addressed to: 01234567890@sms.local
Destination: mobile (SMS)01234567890
Reference number: 155618127W

Reason: Rejected by network operator 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:15:09.970

在这种情况下，您需要使用[`RegexOptions.Singleline`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)而不是`RegexOptions.Multiline`.

# android - 从我的应用程序启动 Android APK 文件

> ID：13987335
> 
> 赞同：-5
> 
> 时间：2012-12-21T09:20:58.593
> 
> 标签：android

我有一个要求，我必须从我的资产或我的应用程序的设备 SDCARD 启动另一个 apk 文件。这可行吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:39:42.603

我假设您想从您的 android 应用程序中启动一个应用程序。这个线程可能会有所帮助：[这里](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)

为了便于参考，这里是最佳答案（由 andep 提供）：

如果您不知道主要活动，可以使用包名来启动应用程序。

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

# java - 有限制地随机查询多个表

> ID：13987337
> 
> 赞同：2
> 
> 时间：2012-12-21T09:21:05.043
> 
> 标签：java, android, sqlite

我正在使用具有多个表的 SQL 数据库创建一个 android 应用程序。我需要从部分或所有表中随机选择行（大约有 8 个）。

我尝试了以下查询，但它在 Java 中给了我一个“IndexOutOfBoundsException”，该查询仅从“核心”表中选择数据并忽略“停车”表。我哪里出错了？我已经阅读了 JOIN 函数，它适用于这里吗？

```
 c = myDataBase.rawQuery(
    "SELECT * FROM core, parking" + " ORDER BY RANDOM() LIMIT " + rounds, null); 
```

所有表都使用相同的列结构，但每个表的列 ID 重叠（例如，对于 8 个表，有 8 个“1”列 ID）。在应用程序中不使用列 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:27:04.547

两个表中都必须存在一个列，即 ID .. 然后写为

```
SELECT * FROM core as c, parking as p where c.ID=p.ID " + " ORDER BY RANDOM() LIMIT 
```

# pdf - iText - 如何将页面添加到使用 PdfCopy 创建的文档中

> ID：13987341
> 
> 赞同：8
> 
> 时间：2012-12-21T09:21:11.707
> 
> 标签：pdf, itextsharp, itext

我正在使用 iText（特别是 iTextSharp 4.1.6），我想通过组合现有 PDF 中的页面来创建 PDF，同时插入从图像创建的新页面。

我分别使用 PdfCopy 和 PdfWriter 让这两个部分分别工作。从图像创建页面的代码如下所示：

```
PdfWriter pw = PdfWriter.GetInstance(doc, outputStream);
Image img = Image.GetInstance(inputStream);
doc.Add(img);
doc.NewPage(); 
```

现在，由于 PdfCopy 继承自 PdfWriter，我想我可以使用相同的技术将这样的“图像页面”添加到我的 PdfCopy 对象中，但它不起作用（如果在上面的示例中实例化 PdfCopy 而不是 PdfWriter ，页面上什么也没有出现）。

通过快速浏览源代码，我注意到当 PdfCopy 的构造函数调用超类构造函数时，它使用一个新的 Document 对象，而不是传入的对象，所以我想这就是原因。

有没有更好的方法来解决这个问题？目前我最好的猜测是使用 PdfWriter 从图像中创建单页 Pdf，然后使用 PdfCopy 将其添加到文档中，但这似乎是一种解决方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-30T02:08:49.770

我最近遇到了这个问题，这里的答案实际上并没有那么有用。我的用例基本上是“获取一堆 PDF 和图像（.jpg、.png 等）并将它们全部组合成一个 PDF”。我不得不使用 PdfCopy，因为它保留了诸如表单字段和标签之类的东西，而 PdfWriter 没有。

基本上，因为 PdfCopy 不允许您使用 addPage() 创建新页面，所以您必须在内存中使用页面上的图像创建一个新的 PDF，然后使用 PdfCopy 从该 PDF 中复制页面。

例如：

```
 Document pdfDocument = new Document();
    ByteArrayOutputStream pdfOutputStream = new ByteArrayOutputStream();
    PdfCopy copy = new PdfCopy(pdfDocument, pdfOutputStream);

    pdfDocument.open();

    for (File file : allFiles) {
       if (/* file is PDF */) {
           /* Copy all the pages in the PDF file into the new PDF */
           PdfReader reader = new PdfReader(file.getAllBytes());
           for (int i = 1; i <= reader.getNumberOfPages(); i++) {
              copy.addPage(copy.getImportedPage(reader, i);
           }
       } else {
           /* File is image. Create a new PDF in memory, write the image to its first page, and then use PdfCopy to copy that first page back into the main PDF */
           Document imageDocument = new Document();
           ByteArrayOutputStream imageDocumentOutputStream = new ByteArrayOutputStream();
           PdfWriter imageDocumentWriter = PdfWriter.getInstance(imageDocument, imageDocumentOutputStream);

            imageDocument.open();

            if (imageDocument.newPage()) {

                image = Image.getInstance(file.getAllBytes());

                if (!imageDocument.add(image)) {
                   throw new Exception("Unable to add image to page!");
                }

                imageDocument.close();
                imageDocumentWriter.close();

                PdfReader imageDocumentReader = new PdfReader(imageDocumentOutputStream.toByteArray());

                copy.addPage(copy.getImportedPage(imageDocumentReader, 1));

                imageDocumentReader.close();
         }

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-22T18:56:53.237

您可以使用以下语法将页面添加到使用 PdfCopy 创建的文档（在您的示例中命名为副本）：

```
Rectangle rec = new Rectangle(10, 10, 10, 10);
copy.AddPage(rec, 1); 
```

# asp.net-mvc - 如何使用禁用的 JavaScript 更新带有验证错误消息的 UI？

> ID：13987349
> 
> 赞同：1
> 
> 时间：2012-12-21T09:21:41.723
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, asp.net-mvc-validation

我有一个表格：

```
using (Html.BeginForm())
{
  @Html.TextBoxFor(x => x.Name, new { @class = "span8" })
} 
```

模型：

```
[Required]
[RegularExpressionAttribute("regex")]
public string Name { get; set; } 
```

控制器：

```
[HttpPost]
public ActionResult Index(MyModel model)
{
    return View(model);
} 
```

如果禁用 javascript，如何显示错误消息并更改名称文本框的 css 样式？

据我了解：

```
@Html.ValidationMessageFor(x => x.Name, "error text", new { style = "backgroundcolor: red;"}) 
```

不行吗？

在输出 HTML 中，我可以看到生成的 span，`ValidatorMessageFor`但它有一个`btn-group`隐藏此标签的 css 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:39:13.663

You should add modelstate validation errors from controller and then redisplay the form. It's possible without using javascript

```
ModelState.AddModelError("elementName", "Error definition"); 
```

# node.js - 是否可以使用 gruntjs 和/或 lesscss 将所有 css 放在一行中？

> ID：13987351
> 
> 赞同：1
> 
> 时间：2012-12-21T09:21:53.783
> 
> 标签：node.js, less, gruntjs

所有 .js 和 .less 文件都使用 gruntjs（内置 .js 支持）和用于 .less 文件任务的 grunt-less-contrib 插件在我的项目中构建。

片刻，lesscss 以每行一个定义的方式压缩 css，例如以下 .less 文件：

```
div,span,textarea,input {
  margin:0;
} 
```

它将输出：

```
div,
span,
textarea,
input {
  margin:0;
} 
```

我想将所有 css 压缩成一行，对于这个例子，它应该看起来像：

```
div,span,textarea,input{margin:0;}...other styles... 
```

是否可以？任何建议都会有所帮助，我不确定这是一个关于 lesscss 或 grunt 的问题。

也许可以在 build.css 构建后添加一个任务，然后执行连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T15:26:54.127

grunt-contrib-less 插件也足以缩小编译后的 CSS。你不需要另一个插件来缩小你的代码。

它有两个特定于此用例的选项：

*   压缩（将删除一些空格）：

    ```
    less: {
        compile: {
            options: {
                paths: ["foo/bar/css"],
                compress: true
            },
            files: {
                "path/to/result.css": "path/to/source.less"
            }
        }
    } 
    ```

    [https://github.com/gruntjs/grunt-contrib-less/#compress](https://github.com/gruntjs/grunt-contrib-less/#compress)

*   yuicompress（将在内部通过 css-min 运行你的 CSS）：

    ```
    less: {
        compile: {
            options: {
                paths: ["foo/bar/css"],
                yuicompress: true
            },
            files: {
                "path/to/result.css": "path/to/source.less"
            }
        }
    } 
    ```

    [https://github.com/gruntjs/grunt-contrib-less/#yuicompress](https://github.com/gruntjs/grunt-contrib-less/#yuicompress)

因此，在您的情况下，“yuicompress”将是添加到您的 gruntfile 中的正确内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:44:13.373

`grunt.js`您可以使用该模块缩小 CSS 文件`grunt-css`

*   安装模块`npm install grunt-css --save-dev`
*   使用 grunt.loadNpmTasks('grunt-css');在你的`grunt.js`或`Gruntfile.js`（取决于使用的 grunt 版本）中加载模块；

*   `Gruntfile.js`在as中配置任务，

    ```
    grunt.initConfig({
      less: {
        //YOUR LESS CONFIG
      },
      cssmin: {
        YOUR_TARGET: {
          src: 'SRC_PATH/input.css',
          dest: 'DEST_PATH/output.min.css'
        }
      }
    }); 
    ```

*   您可以使用以下配置组合和缩小多个 css 文件，

    ```
    grunt.initConfig({
      less: {
        //YOUR LESS CONFIG
      },
      cssmin: {
        YOUR_TARGET: {
          src: 'SRC_PATH/**/*.css',
          dest: 'DEST_PATH/output.min.css'
        }
      }
    }); 
    ```

*   用 grunt build task 注册你的任务，在 less 任务之后运行，

    ```
    grunt.registerTask('default', ['less', 'cssmin']) 
    ```

*   现在您可以运行`grunt build`或`grunt cssmin`生成缩小的 CSS 文件。

这些`grunt-css`模块是`csslint`内置的，因此您还可以添加一个任务来检查您的 css 文件。

更多配置/选项可以在[https://github.com/jzaefferer/grunt-css找到](https://github.com/jzaefferer/grunt-css)

# python - （Python）ValueError：在路径中找不到程序点

> ID：13987353
> 
> 赞同：20
> 
> 时间：2012-12-21T09:22:26.807
> 
> 标签：python, graphviz, networkx, xubuntu, pygraphviz

我有以下问题：我在 xUbuntu OS 上，我正在尝试在 Flask 应用程序中使用 networkx，并且我有以下代码：

```
.....
import networkx as nx
......
# Creating and initializing graph object which is networkx object
hosts_graph = get_networkx_graph_object()

# Variable 'coord' where the coordinates for each node will be stored
coord = nx.pygraphviz_layout(hosts_graph, prog = 'dot') 
```

最后一行是第 411 行。我收到以下错误：

```
File "/home/kiril/Documents/workfolder/omeganoc-sprint/onoc/omeganoc/grapher.py", line 411, in grouping_method
    coord = nx.pygraphviz_layout(hosts_graph, prog = 'dot')
  File "/usr/local/lib/python2.7/dist-packages/networkx-1.7-py2.7.egg/networkx/drawing/nx_agraph.py", line 264, in pygraphviz_layout
    A.layout(prog=prog,args=args)
  File "/usr/local/lib/python2.7/dist-packages/pygraphviz-1.1-py2.7-linux-x86_64.egg/pygraphviz/agraph.py", line 1301, in layout
    data=self._run_prog(prog,' '.join([args,"-T",fmt]))
  File "/usr/local/lib/python2.7/dist-packages/pygraphviz-1.1-py2.7-linux-x86_64.egg/pygraphviz/agraph.py", line 1248, in _run_prog
    runprog=self._get_prog(prog)
  File "/usr/local/lib/python2.7/dist-packages/pygraphviz-1.1-py2.7-linux-x86_64.egg/pygraphviz/agraph.py", line 1236, in _get_prog
    raise ValueError("Program %s not found in path."%prog)
ValueError: Program dot not found in path. 
```

什么可能导致这个问题？我已经安装了 networkx 和 pygraphviz，但我仍然得到这个错误。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-21T09:24:52.547

没有 Graphviz，PyGraphviz 就无法工作。也安装那个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-10T19:40:07.327

如果您安装了 Anaconda，最简单的方法是从 CMD 运行以下命令：

```
conda install pydot-ng 
```

和：

```
conda install graphviz 
```

这负责在路径中添加点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-06T05:21:31.677

确保通过 Windows 安装程序安装了 Graphviz（可以从[http://www.graphviz.org/Download_windows.php](http://www.graphviz.org/Download_windows.php)下载）。

然后将 bin 折叠的路径添加到系统变量“Path”中。pygraphviz 查找的是 bin 折叠中的“dot.exe”。

如果您 p​​ip install graphviz，它将不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-14T14:41:44.270

在 SUSE linux 中：

```
sudo zypper install graphviz 
```

可能有帮助。

# objective-c - 将一部电影分成两部分，然后将其中一部电影与另一部电影连接起来

> ID：13987357
> 
> 赞同：0
> 
> 时间：2012-12-21T09:22:39.797
> 
> 标签：objective-c, video, ios6

我正在开发一个 ios6 应用程序，在该应用程序中，我必须将一部电影分成两部分，取其中一部分，然后将其与其他影片剪辑连接。我尝试了ffmpeg但无法编译ffmpeg，有没有其他方法可以做到这一点？

如果您对此问题有任何解决方案，任何人都可以帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:37:35.547

您使用 AVMutableComposition 类。

看到这个：[如何使用 AVFoundation 组合具有不同方向的视频剪辑](https://stackoverflow.com/questions/6575128/how-to-combine-video-clips-with-different-orientation-using-avfoundation)

以及这里的多个其他答案，显示如何使用该类

# javascript - JQuery.Validate 干净的方法来检查 ul 是否至少有一个 li 项目

> ID：13987360
> 
> 赞同：2
> 
> 时间：2012-12-21T09:22:44.130
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-validate

在我的网页中，我有一个“AddProduct”表单。它具有产品属性（名称、价格等）字段，我使用 FineUploader 来添加图像。上传的图像作为隐藏字段添加到表单列表的 li 元素中。基本上我的html看起来像：

```
<form>
<input type="text" value="name" id="name> 
....

<ul>
</ul>

<div id="ulpoader"></div> -> this will add files as <li> elements
<button type="submit">Submit</button>
</form> 
```

我想在提交表单之前检查 ul 是否至少有一个 li 元素（至少添加了一个图像）。我使用 ASP MVC3。我可以在客户端添加一些 javascript 以向表单添加新规则吗？

已编辑：我知道如何进行 jquery 选择...我不知道的是将其与 jquery validate 插件集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:24:30.787

尝试这个，

```
if($('ul li').length > 0)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:28:41.357

```
if ($('ul').children('li').length > 0) {
    // your logic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:29:35.380

你也可以试试

```
 if($('ul li').size())
     {

     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T18:41:09.383

jQuery 验证库**仅验证表单字段**（输入、选择、文本区域等）。您无法通过 jQuery 验证检查 ul 是否包含 li。您可以使用其他方式，如用户建议的其他方式，

```
$("form").validate({
    submitHandler: function (form) {
        if($('ul li').length === 0){
            alert("No li elements!");
            return false;
        }
    }
}); 
```

# android - onActivityResult 错误

> ID：13987362
> 
> 赞同：1
> 
> 时间：2012-12-21T09:22:51.310
> 
> 标签：android, android-activity, start-activity

我有一个使用 startActivityForResult 启动另一个活动的活动。这一步没问题。然后第二个活动有一个地图，当单击一个按钮时，地理点坐标被传递到一个包，该包在第一个活动上使用以填充 EditText。函数 onActivityResult 一直运行到最后，然后程序崩溃并在屏幕上显示一条消息“未找到源”。

这是mapActivity上的函数：

```
public void ConfirmLoc(View v){
    double lat = loc.getLatitudeE6()/1E6;
    double lng = loc.getLongitudeE6()/1E6;
    Intent ievloc = new Intent();
    Bundle bevloc = new Bundle();
    bevloc.putDouble("latitude",lat);
    bevloc.putDouble("longitude",lng);
    ievloc.putExtras(bevloc);
    setResult(RESULT_OK,ievloc);
    finish();
} 
```

这是第一个活动的 onActivityResult：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if(requestCode==1){
        if(resultCode==RESULT_OK){
            EditText loc= (EditText) findViewById(R.id.LocalizacaoEvento);
            bevloc = data.getExtras();
            if(bevloc!=null){
                String latitud = String.valueOf(bevloc.getDouble("latitude"));
                String longitud = String.valueOf(bevloc.getDouble("longitude"));
                loc.setText(latitud+" , "+longitud,TextView.BufferType.EDITABLE);

            }
        }
        else if(resultCode==RESULT_CANCELED){

        }
    }
} 
```

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:35:34.933

您需要在 onActivityResult 方法的顶部添加 @Override 行。执行此操作时，您还将添加以下行作为方法的第一行：

```
super.onActivityResult(requestCode, resultCode, data); 
```

还要确保您的编译器设置是 1.6 而不是 Eclipse 中默认的 1.5。

# mongodb - 如何将元素插入 MongoDB 内部列表？

> ID：13987365
> 
> 赞同：56
> 
> 时间：2012-12-21T09:22:55.887
> 
> 标签：mongodb, mongodb-query

我在 MongoDB 中存储了以下文档：

```
{
    name: 'myDoc',
    list: [
        {
            id:1
            items:[
                {id:1, name:'item1'},
                {id:2, name:'item2'}
            ]
        },
        {
            id:2
            items:[
                {id:1, name:'item1'},
                {id:3, name:'item3'}
            ]
        }
    ]
} 
```

我找到了一种将元素添加到“列表”的方法`$addToSet`，但我找不到将项目添加到特定“项目”列表的方法。

例如，我得到以下信息：

```
{id:5, name:'item5'} 
```

我想将它添加到 id:2 列表中的元素项中。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-21T09:30:00.640

一种方法是使用`$push`：

```
db.col.update(
    { name: 'doc', 'list.id': 2 }, 
    {$push: {'list.$.items': {id: 5, name: 'item5'}}}
) 
```

[http://docs.mongodb.org/manual/reference/operator/push/](http://docs.mongodb.org/manual/reference/operator/push/)

您还可以替换`$push`为其他运算符，例如（可能）`$addToSet`以获得您正在寻找的确切结果。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-21T09:30:39.407

你可以使用这个： -

```
> var toInsert = {id: 5, name: 'item6'}
> db.abc.update(
            { name: 'myDoc', list: { $elemMatch: { id: 2 } } },
            { $addToSet: { 'list.$.items': toInsert } }
  ) 
```

该部件将使用 . 从数组中`query`找到文档。然后我们使用位置元素在该数组索引处添加一个新元素。`list``id = 2``$`

看[`positional $ operator`](http://docs.mongodb.org/manual/reference/operators/#_S_)

* * *

您也可以替换`list: {$elemMatch: {id: 2}}`为 just `'list.id': 2`。

但是[`$elemMatch`](http://docs.mongodb.org/manual/reference/operator/elemMatch/)，当您想根据数组的多个元素进行更新时，使用会更好。例如，当您的匹配条件是`id`数组中的另一个字段时说`length`：-

```
list: {$elemMatch: {id: 2, length: 5}} 
```

# c++ - 在线程退出时重生线程

> ID：13987373
> 
> 赞同：1
> 
> 时间：2012-12-21T09:23:49.420
> 
> 标签：c++, multithreading, pthreads

我有这个线程化的 fcgi 应用程序，它产生 N 个线程并在退出之前等待它们完成

```
#include "vips/vips.h"
#include "vips/vips"
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include "tiff.h"
#include "tiffio.h"
#include "fastcgi.h"
#include "fcgio.h"
#include "Tokenizer.h"
#include "string.h"
#include <sstream>
#include <pthread.h>
#include <sys/types.h>

using namespace std;
using namespace vips;

#define THREAD_COUNT 2
static int counts[THREAD_COUNT];

static void *handleFcgi(void *a)
{
    int rc, i, thread_id = (intptr_t)a;
    pid_t pid = getpid();
    FCGX_Request request;
    char *server_name;

    FCGX_InitRequest(&request, 0, 0);
    for (;;)
    {
        static pthread_mutex_t accept_mutex = PTHREAD_MUTEX_INITIALIZER;
        static pthread_mutex_t counts_mutex = PTHREAD_MUTEX_INITIALIZER;

        /* Some platforms require accept() serialization, some don't.. */
        pthread_mutex_lock(&accept_mutex);
        rc = FCGX_Accept_r(&request);
        pthread_mutex_unlock(&accept_mutex);

        if (rc < 0 || counts[thread_id] > 5)
            break;

        server_name = FCGX_GetParam("SERVER_NAME", request.envp);

        FCGX_FPrintF(request.out,
                     "Content-type: text/html\r\n"
                     "\r\n"
                     "<title>FastCGI Hello! (multi-threaded C, fcgiapp library)</title>"
                     "<h1>FastCGI Hello! (multi-threaded C, fcgiapp library)</h1>"
                     "Thread %d, Process %ld<p>"
                     "Request counts for %d threads running on host <i>%s</i><p><code>",
                     thread_id, pid, THREAD_COUNT, server_name ? server_name : "?");

        pthread_mutex_lock(&counts_mutex);
        ++counts[thread_id];
        for (i = 0; i < THREAD_COUNT; i++)
            FCGX_FPrintF(request.out, "%5d " , counts[i]);
        pthread_mutex_unlock(&counts_mutex);

        FCGX_Finish_r(&request);
    }

    return NULL;
}

int main (int argc, char **argv)
{
    int i;
    pthread_t id[THREAD_COUNT];
    FCGX_Init();

    for (i = 0; i < THREAD_COUNT; i++)
        pthread_create(&id[i], NULL, handleFcgi, (void*) i);

    pthread_join(id[0], NULL);
    pthread_join(id[1], NULL);

    return(0);
} 
```

我现在已经将线程设置为在 5 个请求后完成，因为稍后我将添加一些自定义逻辑，并且我想在一些请求后完全重新启动线程。

我想每次存在一个线程时都产生一个线程，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:32:53.640

简短的回答是，如果您让线程退出，则必须生成一个新线程。一旦线程退出，您将无法重新启动线程，此时系统已拆除该线程。您只需要创建一个新线程或保持原始线程处于活动状态，直到您不需要它。

好的，根据您刚才所说的，您为什么不考虑使用线程池，例如 boost::threadpool。这将为您节省以疯狂的速度生成新线程的开销，因为这是一项相当昂贵的操作。

线程池基本上是操作系统所在的线程池，可用于提供工作。这样，您永远不需要创建新线程，您不必担心管理线程，您只需将它们交给工作并获得结果。

# jquery - 单击时更改 select2 选项

> ID：13987379
> 
> 赞同：7
> 
> 时间：2012-12-21T09:24:23.823
> 
> 标签：jquery, jquery-select2

我在我的表单中使用 select2 插件，我`services_dd`在页面上有一个带有 class 的链接`.js-autoselect`。单击此按钮时，我想获取该链接标签的 ID，并根据他们单击的按钮更改 select2 选项。

`<option>`value 属性与链接上 id 的属性相匹配。下面的代码成功更改了值，但 select2 没有更新，它仍然显示第一个选择。

```
$('.js-autoselect').click(function(e){
    e.preventDefault();
    var option = $(e.target).attr('id').trim().toLowerCase(); // option =link1

    $('#services_dd option:selected').val(option);
    alert($('#services_dd option:selected').val()); // this alerts link1 which is correct

}); 
```

有谁知道如何更新select2

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T09:27:31.413

`$("#services_dd").select2("val", option);`

请参阅文档的编程访问部分：http: [//ivaynberg.github.com/select2/#documentation](http://ivaynberg.github.com/select2/#documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-06T04:37:54.017

## 工作示例

根据@scoota269 的回答，我编写了以下 JS Fiddle 来显示此功能：[https ://jsfiddle.net/robertmassaioli/ro2279ts/5/](https://jsfiddle.net/robertmassaioli/ro2279ts/5/)

那应该能够帮助您了解如何进行这项工作。

## 代码

以防万一 JS Fiddle 被关闭：

```
$(function() {
    var select = $("#the-select");
    select.select2();

    $("#update").click(function() {
        // How to remove a value
        select.find("option[value=1]").remove();
        // How to add a value
        select.append("<option value='5'>Five</option>");
        select.select2();
    });

    $("#select").click(function() {
        // How to select a value
        var current = select.select2("val");
        current = current || [];
        current.push(2);
        select.select2("val", current);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-13T13:16:48.867

```
$('#mySelect2').val('US'); // Change the value or make some change to the internal state
$('#mySelect2').trigger('change.select2'); // Notify only Select2 of changes 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-21T09:28:37.550

我认为你应该简单地做

```
$('#services_dd').val(option);
alert($('#services_dd').val()); 
```

否则，在您的代码中，您只会更改所选选项的 value 属性（而不是 select 元素的值）。

# javascript - 如何在 Chrome 扩展程序中使用给定的字符/键码初始化键盘事件？

> ID：13987380
> 
> 赞同：10
> 
> 时间：2012-12-21T09:24:22.873
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script, dom-events

我正在开发一个在网页上模拟键盘事件的 Google Chrome 扩展。

我发现由于[这个 webkit 错误](https://bugs.webkit.org/show_bug.cgi?id=16735)`event.initKeyboardEvent()`而无法正常工作， 并且我还找到了一些解决方法，例如[SO Question](https://stackoverflow.com/questions/1897333/firing-a-keyboard-event-on-chrome)

但是，在事件对象上定义属性不起作用，因为扩展的内容脚本有自己的“平行世界”，因此内容脚本中定义的属性对网页脚本不可见。

我唯一也是最后的希望 DOM 4 事件构造函数在 Google Chrome 中工作，并且可以通过构造函数正确初始化键盘事件

```
var event = new KeyboardEvent("keypress", {key: 'U+0041', char: 'a', ... }) 
```

不幸的是，它失败了：

```
TypeError: illegal constructor 
```

我无法在 Chrome 中找到有关支持的事件构造函数的任何文档。谁能指出我一些文档/源代码？

在 Google Chrome 扩展程序中模拟键盘事件的任何其他方式？

（注意，TextEvent 无济于事，因为许多现实世界的控件都听`keydown`/`keyup`专门听）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-01-11T13:39:29.080

以防有人遇到我在使用特定键码触发键时遇到的问题。这是一种方式。

首先，我在上面尝试**了@RobW**的答案，但没有运气。未通过任何键码，始终未定义。

然后我查看了**@disya2**的答案，它确实有效。

所以这里有一些代码： -

**显现**

```
"permissions": [
    "debugger"
  ], 
```

**内容脚本.js**

```
chrome.runtime.sendMessage({ pressEnter: true }); 
```

**背景.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
    if(message.pressEnter){
        chrome.tabs.query({active: true}, function(tabs) {
            chrome.debugger.attach({ tabId: tabs[0].id }, "1.0");
            chrome.debugger.sendCommand({ tabId: tabs[0].id }, 'Input.dispatchKeyEvent', { type: 'keyUp', windowsVirtualKeyCode:13, nativeVirtualKeyCode : 13, macCharCode: 13  });
            chrome.debugger.sendCommand({ tabId: tabs[0].id }, 'Input.dispatchKeyEvent', { type: 'keyDown', windowsVirtualKeyCode:13, nativeVirtualKeyCode : 13, macCharCode: 13  });
            chrome.debugger.detach({ tabId: tabs[0].id });
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-22T17:29:33.513

因为当您从内容脚本向页面发起事件（反之亦然）时，Chrome 不会保留自定义属性，所以在页面中注入一个脚本来接管这项工作。这是一个显示这个想法的基本示例。它是可用的，尽管`key`和`keyCode`属性没有正确处理（无论如何都不应该使用）。

```
// Example: Say, you've got a reference to a DOM element...    
var elem = document.body;
// And you want to "type" "A"
var charCode = 65;

// Now, you want to generate a key event...
triggerKeyEvent(elem, charCode);

// triggerKeyEvent is implemented as follows:
function triggerKeyEvent(element, charCode) {
    // We cannot pass object references, so generate an unique selector
    var attribute = 'robw_' + Date.now();
    element.setAttribute(attribute, '');
    var selector = element.tagName + '[' + attribute + ']';

    var s = document.createElement('script');
    s.textContent = '(' + function(charCode, attribute, selector) {
        // Get reference to element...
        var element = document.querySelector(selector);
        element.removeAttribute(attribute);

        // Create KeyboardEvent instance
        var event = document.createEvent('KeyboardEvents');
        event.initKeyboardEvent(
            /* type         */ 'keypress',
            /* bubbles      */ true,
            /* cancelable   */ false,
            /* view         */ window,
            /* keyIdentifier*/ '',
            /* keyLocation  */ 0,
            /* ctrlKey      */ false,
            /* altKey       */ false,
            /* shiftKey     */ false,
            /* metaKey      */ false,
            /* altGraphKey  */ false
        );
        // Define custom values
        // This part requires the script to be run in the page's context
        var getterCode = {get: function() {return charCode}};
        var getterChar = {get: function() {return String.fromCharCode(charCode)}};
        Object.defineProperties(event, {
            charCode: getterCode,
            which: getterCode,
            keyCode: getterCode, // Not fully correct
            key: getterChar,     // Not fully correct
            char: getterChar
        });

        element.dispatchEvent(event);
    } + ')(' + charCode + ', "' + attribute + '", "' + selector + '")';
    (document.head||document.documentElement).appendChild(s);
    s.parentNode.removeChild(s);
    // The script should have removed the attribute already.
    // Remove the attribute in case the script fails to run.
    s.removeAttribute(attribute);
} 
```

这是一个触发`keypress`字符“A”事件的简单示例。如果要触发更多相关的关键事件，不要使用`triggerKeyEvent`3次（因为它有轻微的开销）。相反，修改`triggerKeyEvent`函数，使其使用正确的参数触发所有事件（ `keydown`、`keypress`和`keyup`/或）。`input`

如果您需要能够更改`altKey`,`shiftKey`等，只需修改功能即可。
底线：我展示的示例非常基本，可以根据您的需要进行调整。

## 阅读更多

如果您想更改实现以匹配规范，请阅读以下来源：

*   W3C：[DOM 3 级事件规范，键盘事件类型部分](http://www.w3.org/TR/DOM-Level-3-Events/#events-keyboardevents)
*   W3C：[DOM 3 级事件规范，附录 B：遗留键属性：keyCode、charCode 和 which](http://www.w3.org/TR/DOM-Level-3-Events/#legacy-key-attributes)

如果您想了解更多关于内容脚本中脚本注入的概念，请参阅：

*   Stack Overflow：[构建 Chrome 扩展 - 使用内容脚本在页面中注入代码](https://stackoverflow.com/a/9517879/938089)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T08:21:27.253

我发现 chrome 调试器协议 v1.1 是从 Google Chrome 扩展程序模拟键和鼠标事件的明确答案。部分协议可通过[chrome.debugger API](https://developer.chrome.com/extensions/debugger)访问。

# sqlyog - SQLyog 中删除的存储过程

> ID：13987385
> 
> 赞同：-3
> 
> 时间：2012-12-21T09:24:30.427
> 
> 标签：sqlyog

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `payroll`.`usp_DeleteDesignation`$$

CREATE PROCEDURE `payroll`.`usp_DeleteDesignation`
(
IN DesgID int(11)
)
    /*LANGUAGE SQL
    | [NOT] DETERMINISTIC
    | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
    | SQL SECURITY { DEFINER | INVOKER }
    | COMMENT 'string'*/
    BEGIN
DELETE from info_designation 
(
Desg_ID,
Designation,
Desg_Description,
CreatedBy,
CreatedOn,
UpdatedBy,
UpdatedOn,
DeletedFlag
)
where
Desg_ID = DesgID;

    END$$

DELIMITER ; 
```

错误：（0 行受影响）（0 毫秒）

错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 12 行的“（Desg_ID，Designation，Desg_Description，CreatedBy，CreatedOn，UpdatedBy，”附近使用正确的语法（0 ms）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:33:30.993

代替

```
BEGIN DELETE from info_designation 
( Desg_ID, Designation, Desg_Description, CreatedBy, 
CreatedOn, UpdatedBy, UpdatedOn, DeletedFlag ) 
where Desg_ID = DesgID; 
```

它应该是

```
BEGIN DELETE from info_designation where Desg_ID = DesgID; 
```

# spring - Jboss Cluster-方法中的调度程序两次调用

> ID：13987386
> 
> 赞同：0
> 
> 时间：2012-12-21T09:24:34.137
> 
> 标签：spring, jboss

我们正在使用：JBoss AS 7.1.1、Spring 3.1.0、Hibernate、..

我们有以下内容：

applicationContext.xml 片段：

```
 <task:scheduler id="taskScheduler" />
    <task:executor id="taskExecutor" pool-size="10" />
    <task:annotation-driven executor="taskExecutor"
            scheduler="taskScheduler" /> 
```

方法：

```
 import org.springframework.scheduling.annotation.Scheduled;
    ...
      @Scheduled(cron = "0 0 0 1 * *")
    public void reportMonthly() {
      // do database stuff.
    } 
```

我们的问题是我们的 Web 应用程序运行在一个集群（2-4 个节点）中，每个节点都调用这个方法。我们怎样才能避免这种情况？

或者它更像是春天的虫子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:05:06.273

Spring 应该如何知道您在集群中运行？不，这不是 Spring 的错误。

无论如何，你想要的行为是什么？你想让你的调度器只在一个节点上运行吗？或者除了一个任务之外的所有任务都应该只执行一次？

如果是第一个，那么您需要通过某种配置方式在除一个节点之外的所有节点上禁用调度程序（或单个任务）。

出于故障安全的原因，我们更喜欢在每个节点上运行调度程序。我们使用（单个）数据库来同步任务。您需要一些巧妙的锁定机制，但基本上在任务运行之前，它会查询数据库以查明其兄弟姐妹之一是否已经在运行。如果没有，它会将状态“运行”写入数据库，并在完成后将其清除。

# jax-ws - @inject WebServiceContext

> ID：13987388
> 
> 赞同：0
> 
> 时间：2012-12-21T09:24:43.933
> 
> 标签：jax-ws, java-ee-6, cdi

由于 WebServiceContext 是一种资源，因此我尝试`SLSB`通过编写生产者字段然后使用`@inject`. 那没有用。似乎与`WebServiceContext`相关，`ThreadLocal`但是包含生产者字段的实例将无法访问它。

有人试过吗？

请注意，使用`@Resource`（没有 CDI）一切正常。此外，通过将生产者字段放在我的网络服务中，@`inject`工作（当然这不可能是解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:42:13.903

曾有人谈论在 EE7 中统一这一点，但它不会发生。现在你必须用旧的方式来做。

# c++ - C++ 字符串实现

> ID：13987397
> 
> 赞同：5
> 
> 时间：2012-12-21T09:25:00.190
> 
> 标签：c++, string, memory-management

我在我的代码中使用了所有 std::string 对象，其中大多数是堆栈分配的。我替换了默认的 new/delete 运算符来检查平均内存分配大小，我惊讶地发现大多数分配来自 std::string，这非常重要，它们在 12 到 32 字节之间！为了优化这一点（从免费存储中分配的大量小字符串），我提出了一个简单的解决方案：

*   实现自定义字符串类
*   在其中添加具有固定大小的预定义缓冲区，例如 64 字节（我可以在分析后调整此大小）
*   当字符串的长度小于 64 字节时使用预定义的缓冲区，或者从空闲存储中为更大的字符串分配新的缓冲区。

通过这个实现，我将为长度大于 64 的所有字符串添加 64 字节的内存开销，并向短于 64 字节的字符串添加（64-lenth）开销，但我将阻止所有小字符串的分配。

你试过这样的方法吗？增加这种内存开销是否合理，大部分时间都在堆栈上以节省分配时间/内存碎片？

这种方法比自定义 str::string 分配器更好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T09:29:00.587

合理吗？这取决于。`std::string`除非您通过使用或发现持续分配和解除分配的*实际*（与感知相反的）性能问题而发现自己实际上耗尽了内存，否则您就是在浪费时间这样做。

不要误会我的意思，您可以（而且我已经）通过使用标准分配器无法获得的额外信息获得了巨大的收益。但是，除非有真正的问题需要解决，否则最好使用标准方法并将时间花在其他地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T09:28:11.087

我认为它之前已经按照您提到的方式在[愚蠢](https://github.com/facebook/folly)中做过：“fbstring 是 std::string 的替代品。fbstring 的主要好处是显着提高了几乎所有重要原语的性能。”

[https://github.com/facebook/folly/blob/master/folly/docs/FBString.md](https://github.com/facebook/folly/blob/master/folly/docs/FBString.md)

这应该得到很好的优化：

> 存储策略
> 
> 小字符串（<= 23 个字符）原位存储，无需内存分配。
> 
> 中等字符串（24 - 255 个字符）存储在 malloc 分配的内存中并急切地复制。
> 
> 大字符串（> 255 个字符）存储在 malloc 分配的内存中并延迟复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T10:36:21.320

> 你试过这样的方法吗？

不，但我确实编写了自己的分配器。这是我更喜欢的替代方案。

> 增加这种内存开销是否合理，大部分时间都在堆栈上以节省分配时间/内存碎片？

什么是“合理”的定义因您的情况而异。你需要防止内存碎片吗？您是否需要最小化分配数量？以每个字符串的额外内存为代价来最大化速度？

您只是想优化 std:: 实现作为练习吗？

您是否有具有性能（或内存）限制的目标平台？

这些问题中的每一个都会改变答案（关于内存开销是否合理）。

> 这种方法比自定义 str::string 分配器更好吗？

取决于你的情况。

# php - 如何在 PHP 中获取当周、当月结果数据？

> ID：13987398
> 
> 赞同：1
> 
> 时间：2012-12-21T09:25:05.763
> 
> 标签：php, mysql, phpmyadmin

如何使用 PHP 获取当周、当月结果数据。

这是我的表数据：

```
 Uname    Type        subscribed_on
    Xxx     Free        1355835358
    Yyy     paid        1355555358
    Zzz     premium     1423835358 
```

我正在将数据存储到正在使用的数据库中`time()`。

现在如何从 PHP 中的当前周和月获取 uname？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:44:08.813

从 PHP 5.3 开始，您可以将 DateTime 类用于日期时间数据。 [http://php.net/manual/en/datetime.settimestamp.php](http://php.net/manual/en/datetime.settimestamp.php)

```
<?php
$date = new DateTime();

$date->setTimestamp($yourTimestamp);
echo $date->format('W') . "\n"; // week number of the year
echo $date->format('m') . "\n"; // month
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:28:31.387

使用函数日期：[http ://es2.php.net/manual/en/function.date.php](http://es2.php.net/manual/en/function.date.php)

例如：

```
<?php
$current_week = date('W', $your_timestamp);
$current_month = date('m', $your_timestamp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:30:49.163

像下面这样的查询应该可以完成工作：

```
SELECT uname FROM $tablename WHERE subscribed_on = $current_week_month_timestamp; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:40:25.340

像本月这样：

```
$start=  mktime (0,0,0, date("n"), 1, date("Y"));
$end= mktime (0,0,0, date("n")+1, 1, date("Y"))-1; 
```

在 sql 中：

```
SELECT uname FROM $tablename WHERE subscribed_on BETWEEN $start AND $end; 
```

对于本周它有点棘手，使用 date("N") 和 strftime，可能是这样的：

```
$start=  strftime("-".date("N")." day");
$end= strftime("+7 day", $start)-1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T09:43:31.217

对于当月的数据，您可以使用以下内容：

```
// month
$month = date('m', time());
$year = date('Y', time());

$curr_month = mktime(0, 0, 0, $month, 1, $year);
SELECT * FROM `table` WHERE `subscribed_on` > $curr_month;

// + week
$curr_day = date('d', time());
$start_day = date('N', time());
$day = $day-$start_day+1; // last monday day

$curr_week = mktime(0, 0, 0, $month, $day, $year);
SELECT * FROM `table` WHERE `subscribed_on` > $curr_week; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T09:45:45.060

我假设您想要本周的用户名。
此外，我从周日开始一周。如果你愿意，你可以使用不同的。
首先，从数据库中获取所有行

```
$handle = mysql_query("select * from tablename");

while($row = mysql_fetch_array($handle)) {
    if(date("W", $row['subscribed_on']) == date("W")) {
        $newResult[] = $row;
    }
} 
```

`$newResult`会有你想要的记录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T09:57:11.637

你可以这样做：

```
$sql="SELECT * FROM table_name ORDER BY subscribed_on DESC";
$res=mysql_query($sql);
$by_current_week=array();
$by_current_date=array();
$by_current_month=array();

define('CUR_MON','12');
define('CUR_DATE',21);
define('CUR_WEEk',3);

while($obj=mysql_fetch_obj($res)){

   $week_of_subscribed=getWeek($obj->subscribed_on);    
   $month_of_subscription=date('m',$obj->subscribed_on);
   $date_of_subscription=date('d',$obj->subscribed_on);

   if(CUR_MON==$month_of_subscription){
      array_push($by_current_month,$obj);
   }

   if(CUR_DATE==$date_of_subscription){
      array_push($by_current_date,$obj);
   }

  //....

 } 
```

你的`getWeek`功能

```
 function getWeek($timestamp) {
            $week_year = date('W',$timestamp);
            $week = 0;//date('d',$timestamp)/7;
            $year = date('Y',$timestamp);
            $month = date('m',$timestamp);
            $day = date('d',$timestamp);
            $prev_month = date('m',$timestamp) -1;
            if($month != 1 ){
                $last_day_prev = $year."-".$prev_month."-1";
                $last_day_prev = date('t',strtotime($last_day_prev));
                $week_year_last_mon = date('W',strtotime($year."-".$prev_month."-".$last_day_prev));
                $week_year_first_this = date('W',strtotime($year."-".$month."-1"));
                if($week_year_first_this == $week_year_last_mon){
                    $week_diff = 0;
                }
                else{
                    $week_diff = 1;

                }
                if($week_year ==1 && $month == 12 ){
                // to handle December's last two days coming in first week of January 
                    $week_year = 53;
                }

                $week = $week_year-$week_year_last_mon + 1 +$week_diff;

            }

            else{
             // to handle first three days January coming in last week of December.
                $week_year_first_this = date('W',strtotime($year."-01-1"));
                if($week_year_first_this ==52 || $week_year_first_this ==53){
                    if($week_year == 52 || $week_year == 53){
                        $week =1;
                    }
                    else{
                        $week = $week_year + 1;
                    }
                }
                else{
                    $week = $week_year;
                }
            }
            return $week;
        } 
```

现在你有你的清单..

```
 foreach($by_current_month as $records){
    // Your Specified Month's Records
  }

  foreach($by_current_date as $records){
    // Your Specified date's Records
  } 
```

# c# - 如何延迟 WCF 服务中的进程？

> ID：13987405
> 
> 赞同：0
> 
> 时间：2012-12-21T09:25:25.317
> 
> 标签：c#, wcf

如何延迟 WCF 服务中的进程？

我在 WCF 应用程序中添加了一个额外的新服务。在 WCF 服务中调用方法时，会打开数据库并执行 LINQ 查询。但现在有了额外的服务。LINQ 查询不再起作用。我已经调试出了什么问题。我看到当我在方法中**退后一步（通过调试）**时，我两次调用 LINQ 查询，然后**第二次查询就正确了**。在打开数据库和执行查询之间的过程中必须**添加延迟。**但是怎么做？

谁能告诉我该怎么做？

谢谢...

在服务中：

```
namespace MHcService
{
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class ArtiestService : IArtiestService
    {
...
        public ArtiestRecord[] GetArtiestlijst(out ResultClass AResult, int AID_Genre, string AFilter)
        {
            Databeheer FDatabeheer = Databeheer.GetInstance();
            return ArtiestlijstToArray(ArtiestDataManager.Artiestlijst(out AResult, AID_Genre, AFilter));
        }

namespace MHcService.Database
{
    public static class DatabaseControl
    {
        private static Databeheer FDatabeheer = Databeheer.GetInstance();
        public static Databeheer GetDatabeheer { get { return FDatabeheer; } }
    }

    public class Databeheer
    {
...
        public DatamodelDataContext DataContext { get { return FDataContext; } }
        private static Databeheer FUniqueInstance;
        private static object FLockObject = new object();
        public static Databeheer GetInstance()
        {
            if (FUniqueInstance == null)
            {
                lock (FLockObject)
                {
                    if (FUniqueInstance == null)
                    {
                        FUniqueInstance = new Databeheer();
                    }
                }
            }

            return FUniqueInstance;
        }

        private Databeheer()
        {
            Initialize();
        }

        private void Initialize()
        {
            FApplicatieDefinities = ApplicatieDefinities.GetInstance();
            FApplicatieDefinities.Read();

            FDatabasenaam = FApplicatieDefinities.ParamsApplicatie.Databasenaam;
            FPadnaam = FApplicatieDefinities.ParamsApplicatie.Directories[DirectoryIndex.iDIR_DATABASE];
            FServernaam = FApplicatieDefinities.ParamsApplicatie.Servernaam;
            FDbBestandsnaam = FDatabasenaam + ConstAlgemeen.sEXT_MDF;
            FLogBestandsnaam = FDatabasenaam + "_LOG" + ConstAlgemeen.sEXT_LDF;
            FConnectionToSql = new SqlConnection(SqlServerConnectieString);
            FDataContext = new DatamodelDataContext(GetSqlServerConnectie());
        } 
```

[方法的链接](https://stackoverflow.com/questions/13952943/the-null-value-cannot-be-assigned-to-a-member-with-type-system-int32-which-is-a)<= 这是方法的来源（LINQ 查询） 通过这个问题，我没有得到想要阅读的答案。所以我不想展示这个问题的来源。

# c# - 将 RenderTargetBitmap 转换为 BitmapImage

> ID：13987408
> 
> 赞同：12
> 
> 时间：2012-12-21T09:25:42.523
> 
> 标签：c#, wpf, bitmapimage, rendertargetbitmap

我有一个`RenderTargetBitmap`，我需要将其转换为`BitmapImage`. 请检查下面的代码。

```
 RenderTargetBitmap bitMap = getRenderTargetBitmap();
 Image image = new Image();// This is a Image
 image.Source = bitMap; 
```

在上面的代码中，我使用了 Image。现在我需要使用 BitmapImage。我怎样才能做到这一点？

```
 RenderTargetBitmap bitMap = getRenderTargetBitmap();
 BitmapImage image = new BitmapImage();// This is a BitmapImage
 // how to set bitMap as source of BitmapImage ? 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-21T10:59:34.300

尽管似乎没有必要将 a 转换`RenderTargetBitmap`为 a `BitmapImage`，但您可以轻松地将 a 编码`RenderTargetBitmap`为 a并从该流中`MemoryStream`解码 the 。`BitmapImage`

WPF中有几个[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)，下面的示例代码使用`PngBitmapEncoder`.

```
var renderTargetBitmap = getRenderTargetBitmap();
var bitmapImage = new BitmapImage();
var bitmapEncoder = new PngBitmapEncoder();
bitmapEncoder.Frames.Add(BitmapFrame.Create(renderTargetBitmap));

using (var stream = new MemoryStream())
{
    bitmapEncoder.Save(stream);
    stream.Seek(0, SeekOrigin.Begin);

    bitmapImage.BeginInit();
    bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
    bitmapImage.StreamSource = stream;
    bitmapImage.EndInit();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-10T22:42:56.220

```
private async void Button_Click(object sender, RoutedEventArgs e)
{
    RenderTargetBitmap bitMap = new RenderTargetBitmap();
    await bitMap.RenderAsync(grid);
    Image image = new Image();// This is a Image
    image.Source = bitMap;
    image.Height = 150;
    image.Width = 100;

    grid.Children.Add(image);
} 
```

这看起来是一个更简单的解决方案。

# asp.net - 在 asp .net MVC 中查看数据-未设置对象引用

> ID：13987410
> 
> 赞同：2
> 
> 时间：2012-12-21T09:25:44.170
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

我正在使用**Visual Studio 2010**和**mvc 2.0。**

在我的控制器中，我有一个 ViewResult 从视图页面**customerDataAdd**中挑选数据。有 8 个字段（文本框）。我有一个模型，只有这 8 个字段的 get{ } 和 set{ }。

问题是，在提交按钮的操作中，它转到 ViewResult，创建 model.Customer 的对象，尝试将数据从视图插入到模型属性并失败。

错误是：**对象引用未设置为对象的实例。**

下面是我的一些代码：

**Customer.cs-模型类**

```
 private string _FirstName;
    public string FirstName
    {
      get { return _FirstName; }
      set { _FirstName = value; }
    }

    private string _LastName;
    public string LastName
    {......}

    private string _Street;
    public string Street
    {......}

    private string _Village;
    public string Village
    {......}

    private string _Thana;
    public string Thana
    {......}

    private string _District;
    public string District
    {......}

    private string _Division;
    public string Division
    {......}

    private string _Country;
    public string Country
    {......} 
```

**CustomerController.cs -> ViewResul DisplayCustomer() -> 错误显示在第二行。**

```
[HttpPost]
    public ViewResult DisplayCustomer()
    {
        Models.Customer customerView = new Models.Customer();   //all customerview properties are null??
        **customerView.FirstName = Request.Form["atxtFirstName"].ToString();** //firstname gets null??
        customerView.LastName = Request.Form["atxtLastName"].ToString();
        customerView.Street = Request.Form["atxtStreet"].ToString();
        customerView.Village = Request.Form["atxtVillage"].ToString();
        customerView.Thana = Request.Form["atxtThana"].ToString();
        customerView.District = Request.Form["atxtDistrict"].ToString();
        customerView.Division = Request.Form["atxtDivision"].ToString();
        customerView.Country = Request.Form["atxtCountry"].ToString();

        return View();
    } 
```

我的表单的 [edit-1] 值**["atxtFirstName"].ToString()** = **null**显示。如前所述，我已使用**FormCollection**对其进行了编辑。

[编辑-2]

这是我的**DisplayCustomer.aspx**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SimpleExample.Models.Customer>" %> 
```

显示客户

```
<h2>DisplayCustomer</h2>
<div>
    <table runat="server" width="30%">
        <tr>
            <td width="30%">Customer Name: </td>
            <td><%= Model.FirstName + " " + Model.LastName %></td>
        </tr>
        <tr>
            <td>Customer Address: </td>
            <td><%= Model.Street + ", " + Model.Village + ", " + Model.Thana + ", <br/>" + Model.District + ", " + Model.Division + ", " + Model.Country %></td>
        </tr>
    </table>
</div> 
```

我的**CustomerDataAdd.aspx** - 这里只给出了**表格**。

```
<form id="afrmCustomer" runat="server" action="DisplayCustomer" method="post">
    <table width="30%">
        <tr>
            <td width="30%">
                <asp:Label ID="Label8" Text="First Name:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtFirstName" runat="server" />
            </td>
            <td width="30%">
                <asp:Label ID="Label1" Text="Last Name:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtLastName" runat="server" />
            </td>
        </tr>
        <tr>
            <td width="30%">
                <asp:Label ID="Label2" Text="Street:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtStreet" runat="server" />
            </td>
            <td width="30%">
                <asp:Label ID="Label7" Text="Village:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtVillage" runat="server" />
            </td>
        </tr>
        <tr>
            <td width="30%">
                <asp:Label ID="Label3" Text="Thana / Upazilla:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtThana" runat="server" />
            </td>
            <td width="30%">
                <asp:Label ID="Label6" Text="District:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtDistrict" runat="server" />
            </td>
        </tr>
        <tr>
            <td width="30%">
                <asp:Label ID="Label4" Text="Division:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtDivision" runat="server" />
            </td>
            <td width="30%">
                <asp:Label ID="Label5" Text="Country:" runat="server" />
            </td>
            <td>
                <asp:TextBox name="atxtCountry" runat="server" />
            </td>
        </tr>
        <tr>
            <td width="30%">
            </td>
            <td>
                <asp:Button name="abtnSubmit" Text="Submit" runat="server" />
            </td>
            <td width="30%">
            </td>
            <td>
            </td>
        </tr>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:32:10.870

您可以使用 html 帮助程序，而不是使用服务器控件：

```
 <% Html.EditorFor(m=>m.FirstName) %>
  <% Html.EditorFor(m=>m.LastName) %> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:29:32.383

看来该值不在您发布的表单中

```
Request.Form["atxtFirstName"] 
```

您应该检查发布到该操作的内容。例如，在动作中放置一个断点，然后在您的浏览器或 Visual Studio 中查看帖子对象，您可以选择。

您有什么理由不使用视图模型作为该操作的参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:29:40.270

尝试这个：-

```
 [HttpPost]

        public ViewResult DisplayCustomer(FormCollection form)
        {
            Models.Customer customerView = new Models.Customer();  

            customerView.FirstName = form["atxtFirstName"].ToString();

            return View();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:22:33.107

我明白了。因为我正在使用**服务器控件**，所以这个过程不是从服务器控件传递值的正确过程。**我只需要使用 html**。但我不知道这是为什么。如果有人可以回答，我将不胜感激。

我用了：

```
<input type="text" name="atxtFirstName" /> 
```

这适用于所有人！

# django - 我如何检查一个字段是否是一个文本区域

> ID：13987413
> 
> 赞同：0
> 
> 时间：2012-12-21T09:25:52.610
> 
> 标签：django, templates, textarea, form-fields

我知道`is_checkbox`用于检查给定 django 表单的字段是否为复选框的表单字段方法。有什么方法可以检查该字段是否为文本区域？

我试过这样做：

```
{% if field.is_textarea %} 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-08T14:43:56.297

编辑：说明 - 过滤器采用字段对象并返回 Django 使用的小部件的名称，可用于与字符串进行比较。

使用定义模板过滤器`templatetags.py`：

```
from django import template
register = template.Library()

@register.filter('input_type')
def input_type(input):
return input.field.widget.__class__.__name__ 
```

并在模板中使用它，例如：

```
{% if field|input_type == 'Textarea' %}
<div class="col-xl-9">{{ field }}</div>
{% else %}
<div class="col-xl-3">{{ field }}</div>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:28:52.020

您应该执行以下操作：

```
{% if field.widget...... %} 
```

小部件负责渲染，而不是它自己的字段。

在 shell 中检查它的示例：

```
from django import forms
from django.forms import widgets

class ContactForm(forms.Form):
    text = forms.CharField(max_length=100, widget=widgets.Textarea)

f = ContactForm()
f.fields['text'].widget

<django.forms.widgets.Textarea object at 0x218ccd0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-04T11:12:31.990

我有同样的意图，唯一的解决方案是在你的`views.py`.
我的意思是，首先你在 html 代码中为你的文本区域命名，然后`views.py.`
像这样获取名称，假设你的文本区域名称是 views.py 中的“文本”，编写此代码`text = request.GET ['text']`，然后创建 if 语句，如

```
if text == '':
    return render(request, 'html page you want render')
else:
    return render(request, ' the exact page you want render if the textarea is filled ') 
```

# java - 负载平衡在两个战争上运行的 tomcat 应用程序

> ID：13987422
> 
> 赞同：0
> 
> 时间：2012-12-21T09:26:32.223
> 
> 标签：java, apache, tomcat, load-balancing

我的应用程序（部署在 tomcat 中）发生了两场战争，一个客户端（比如 A）和一个服务器（比如 B）。它们都部署在同一个 jvm 中，并通过 Web 服务进行通信。现在，为了使应用程序具有可扩展性，我希望将其集群化并部署在多个节点中。以下是 apache 服务器中的负载均衡器配置。

```
<Proxy balancer://mycluster stickysession=JSESSIONID>
BalancerMember ajp://127.0.0.1:8009 min=10 max=100 route=jvm1 loadfactor=1
BalancerMember ajp://127.0.0.1:8019 min=20 max=200 route=jvm2 loadfactor=1
</Proxy>

ProxyPass /A balancer://mycluster/A
ProxyPass /B balancer://mycluster/B 
```

在我的客户端应用程序中，提供了服务器 url，如下所示

```
server.url=http://localhost/B/myservice/ 
```

我的意图是任何到达节点上的网络应用程序 A 的请求都应该在同一节点上的网络应用程序 B 中处理。但是对于当前的配置，它没有给出预期的结果。在 jvm1 上的 Web 应用 A 中处理的请求转到 jvm2 上的 Web 应用 B，反之亦然。请让我知道我在这里缺少什么以及如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:44:51.517

您观察到的行为似乎是合理的：您向 Apache 负载均衡器发送了一个请求，该请求被路由到其中一个节点。如果我正确理解您的方案，您希望强制将请求（由您的 Web 应用程序启动）路由到正确的节点。我可以想到两种方法来实现这一点：

1.  我想到达网络应用程序 A 的初始请求来自拥有会话的用户。如果您在 Tomcat 中配置了粘性会话，您可能会重用用户的会话 cookie 并将其与您的 Web 服务请求一起发送。这样，负载均衡器将决定将请求路由到与为您带来 cookie 的原始请求相同的节点。然而，从您调用 Web 服务的位置访问 cookie 可能不可行。
2.  处理您的内部请求并不是负载均衡器的工作。那么为什么要使用它呢？您可以将常规 HTTP 连接器添加到您的 Tomcat 配置中，并将它们用于 Web 服务请求。因此，您可以规避负载平衡，在这种情况下，这只会给您的通信增加不必要的延迟和开销。缺点是：您可能需要对要调用的 IP 进行硬编码。

顺便说一句：您的配置看起来好像两个节点*和*负载均衡器都在一台机器上运行。确定吗？

# actionscript-3 - flash as3 jpgencoder 不工作

> ID：13987424
> 
> 赞同：0
> 
> 时间：2012-12-21T09:26:33.863
> 
> 标签：actionscript-3, flash

我想在 Flash 中截取整个舞台的截图。在本地它运行良好，但在 html 预览中它没有做任何事情。

```
var bitmapData:BitmapData = new BitmapData(product.width,product.height);
bitmapData.draw(this.stage);
var jpgEncoder:JPGEncoder = new JPGEncoder(100);
var byteArray:ByteArray = jpgEncoder.encode(bitmapData);

var fileReference:FileReference=new FileReference();
fileReference.save(byteArray, ".jpg"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:52:52.783

以及 BitmapData.draw 具有安全限制。确保所有运行时加载的图像在您的域的 crossdomain.xml 中都具有权限。

# jquery - 可排序获取元素索引

> ID：13987426
> 
> 赞同：0
> 
> 时间：2012-12-21T09:26:36.250
> 
> 标签：jquery, jquery-ui-sortable

我得到了这个html代码：

```
<div id="pages">
    <div id="page1"></div>
    <div id="page2"></div>
    <div id="page3"></div>
    <div id="page4"></div>
</div> 
```

只是为了测试，我想在排序网格时显示元素索引：

```
$( "#pages" ).sortable({

    sort: function(event,ui){
        console.log($('#pages').index(ui.item));
    }
}); 
```

返回的索引是被拖动元素在开始拖动时所在的索引。如果我在停止/更新事件中移动代码，我会收到正确的索引。我的问题是，拖动视觉通知（在其他 div 之间翻转）是索引返回的另一个，我需要更改元素的 css 边距。

拖动元素时如何获得正确的顺序？

TIA frgtv10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:50:47.043

要访问拖动项目的当前索引，您需要使用`ui.placeholder`item.

```
$( "#pages" ).sortable({
    helper: "clone",
    sort: function(event, ui) {
        console.log($(ui.placeholder).index());
    }
}); 
```

[jsFiddle 这里 (jQuery 1.8.2, jQueryUI 1.9.2)](http://jsfiddle.net/h33v3/)

# javascript - 基于类的jQuery Button处理

> ID：13987427
> 
> 赞同：0
> 
> 时间：2012-12-21T09:26:41.113
> 
> 标签：javascript, jquery, html

所以我想编写一个函数来处理具有特定类的所有按钮。
每个按钮应该有一个不同的动作，由函数调用。如何将特定按钮提交给我的函数，而不必通过 onclick 在我的 html 标记中直接调用该函数？

到目前为止，这是我的代码：

```
<div id="menu" class="center">
   <ul class="menu-list center">
       <li><input type="button" value="Gruppe A" class="menu-button"></li>
       <li><input type="button" value="Gruppe B" class="menu-button"></li>
       <li><input type="button" value="Gruppe C" class="menu-button"></li>
   </ul>
</div>

$('.menu-button').click(function() {
    // here i want to check which button was clicked, for example by an ID.
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:28:15.637

您可以使用`this`获取`DOM`对象或`$(this)`获取 jQuery 对象，也可以使用`event.target`获取`DOM`对象作为事件源。

**[现场演示](http://jsfiddle.net/5dJ6K/1/)**

```
$('.menu-button').click(function(event){
   alert(event.target.value); 
   alert(this.value);
   alert($(this).val());
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:28:50.233

在事件处理程序内部，`this`将引用已单击的元素。您可以像处理任何元素一样与之交互。如果它有一个 ID，你可以访问它的`id`属性：

```
$('.menu-button').click(function(){
    var id = this.id;
}); 
```

请注意，它`this`指的是 DOM 节点，*而不是*jQuery 对象。

**边注**

将事件处理程序委托给 DOM 树的更高层会更有效率。您可以使用该`.on()`方法来做到这一点：

```
$("#menu").on("click", ".menu-button", function () {
    // Do stuff
}); 
```

通过这样做，您在内存中只有一个事件处理函数的副本。通过使用 class 将它绑定到每个元素`.menu-button`，您可以为每个元素创建一个副本。

委派事件处理程序是可行的，因为大多数 DOM 事件从它们起源的元素向上冒泡。当事件到达`#menu`时，jQuery 检查它是否源自与作为第二个参数传入的选择器匹配的元素。如果是，则执行处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:28:29.357

您可以像这样简单地获取按钮的值：

```
$('.menu-button').click(function(){
    var value = this.value; // "Gruppe A" (Or B / C)
}); 
```

由于`this`指的是事件被激活的 DOM 元素，因此您可以像访问任何其他 DOM 元素一样访问该元素。

然后，您可以使用 a`switch`选择正确的按钮：

```
$('.menu-button').click(function () {
    switch (this.value) {
        case 'Gruppe A':
            // Do something for button 1
            break;
        case 'Gruppe B':
            // Do something for button 2
            break;
        default:
            console.error('This button has not yet been implemented:', this);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:29:51.623

1/ 您可以使用 访问点击的项目`$(this)`。并做很多“if/else”来查找点击了哪个项目。（不是最好的解决方案）

2 /您可以添加`.click`更好的选择器，`$('#your-id.menu-button').click()` 这样您将避免执行大量 if/else 语句来查找已单击的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T09:29:28.593

```
var currentId = $(this).attr('id'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T09:40:27.820

这将`if you have stactic buttons`在您的 dom 中执行：

```
$('.menu-button').click(function() {
    console.log($(this).val());
}); 
```

这将起作用`if you have dynamically generated button list`：

```
$(document).on('click', '.menu-button', function(){
    console.log($(this).val());
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-21T09:29:38.850

尝试检查按钮类，将 ID 替换为：

```
if(button.attr('id) == 'something') 
```

或按钮的当前值：

```
if(button.val() == 'something') 
```

..

```
$('.menu-button').click(function(ev) {

  var button = $(this);

  if(button.hasClass('someclassA')) {

  }
  else if(button.hasClass('someclassB')) {

  }
  else {

  }

  ev.preventDefault();
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-21T09:35:50.883

尝试使用这个：

```
$('.menu-button').click(function(){
    alert($(this).attr('id')) ;
});​ 
```

# tfs - TFS 2010 访问，仅限 INTERNET 特定用户

> ID：13987430
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:26:47.853
> 
> 标签：tfs, tfs-web-access

我怎样才能实现这个目标？我公司在公司外有开发人员。他们想通过互联网访问 TFS 我怎样才能实现这个目标？

1 - 如我所愿（tfs 2010）将向他们展示。或 2 - 为我们的特定用户显示到互联网。与 (TFS WEB ACCESS) 相同，但仅适用于 Intranet 或本地。

对不起我的英语，新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:41:57.373

您需要与您公司的网络管理员交谈，并根据他们的安全要求询问他们可接受的解决方案是什么。

1.  使用 VPN，如果您的基础设施已经支持使用 VPN，则非常简单
2.  配置您的网络以允许将外部请求路由到您的 TFS 服务器

在与网络管理员交谈之前，请阅读[此链接](http://msdn.microsoft.com/en-us/library/bb668967.aspx)，因为它解释了许多连接方案。

# java - 获取 Hibernate 的 TypeRegistry

> ID：13987432
> 
> 赞同：0
> 
> 时间：2012-12-21T09:26:54.943
> 
> 标签：java, hibernate, jpa

我编写了一个 Hibernate `UserType`，它在我的 Java 类和 JDBC 之间进行类型转换`VARCHAR`。我将我的 bean 注释如下：

```
@TypeDef...
class MyClass {
    @Column(name = "...")
    @Type(type = "MyPropertyType")
    private MyProperty myProperty;

    @Column(name = "...")
    private Date date;
} 
```

现在，用户可以通过命令行为该属性和其他属性指定条件。我想使用 JPA 将这些条件添加到查询中`CriteriaBuilder`，例如：

```
criteriaBuilder.equal(column, operand); 
```

这样做，Hibernate 会抱怨`operand`（作为一个字符串）不对应于`MyProperty.class`. Hibernate 不会尝试自动转换类型（它可以这样做，因为它知道目标类型并且它有我的注释，它指向实现的类型`StringRepresentableType`。所以我将不得不手动进行类型转换。

*   是否可以明确告诉 Hibernate 尝试将字符串转换为目标类型？或者我可以从 Hibernate 获取特定 bean 属性的 Type 实例吗？
*   我在哪里可以得到 Hibernate 的`TypeRegistry`注册`MyPropertyType`地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:22:19.773

一种解决方案是创建第二个转换服务，将字符串转换为目标类型。我正在使用[Spring 的转换工具](http://static.springsource.org/spring/docs/3.2.0.RELEASE/spring-framework-reference/html/validation.html#core-convert)：

```
@Resource
ConversionService conversionService;

// ...

Object castedOperand = conversionService.convert(operand, column.getJavaType()); 
```

Hibernate 现在接受以下`castedOperand`条件

```
criteriaBuilder.equal(column, operand); 
```

这通常是有道理的，因为第一个转换工具（Hibernate）将在 JDBC（例如`VARCHAR`）和 Java 类型之间进行转换，而第二个转换工具（Spring）执行用户输入（来自命令行或 HTTP 请求的字符串）和 Java 类型之间的转换。

如果有办法将 Hibernate 中已经存在的转换器`TypeRegistry`注入 Spring 中`ConversionService`，包括那些实现[`StringRepresentableType`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/type/StringRepresentableType.html).

# java - 我应该如何渲染 2D 手电筒效果？

> ID：13987435
> 
> 赞同：3
> 
> 时间：2012-12-21T09:27:04.550
> 
> 标签：java, libgdx

我正在尝试在我的 2D 游戏中制作手电筒效果。我的手电筒表示为从实体以特定角度延伸的线段。手电筒可以指向任何方向。手电筒的强度（手电筒光束的长度）也不同。

我在试图找出渲染手电筒效果的最佳（最简单？）和最灵活的方法时遇到了问题。特别是平铺地图。

我可以想到两种方法。但我不知道要实现它们：

1.  仅绘制平铺地图的锥形/圆形部分
2.  用黑色纹理覆盖屏幕，并用代码在黑色纹理上打孔。这样我可以改变洞的属性。

我不知道从哪里开始/这些被称为/如果 libGDX 可以做到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T18:50:08.307

**第一个**称为模板缓冲区。但是你会发现很难达到柔和的效果。 - 简单的。

**第二：**你只需要一个有光的纹理。可以绘制完全黑色的区域，在灯光精灵周围重复一个黑色精灵（左、右、上、下）。或者您可以将它与模板缓冲区混合。或者您可以仔细计算纹理坐标并使用 GL.clamp_to_edge 传播所有黑色像素。根据渲染场景的方式，您可以先使用 alpha 信息渲染灯光，然后混合场景（根据 dst_alpha 变暗）。——实施起来并不难。

**第三**是对着色器的研究（GLES 2.0）。您可以渲染网格以填充孔屏幕并通过一些着色器计算使其变暗。——这是最灵活的选择，也是最困难的（反正远非火箭科学）。

有些选项听起来比其他选项更好，但提供您提供的信息，我无法告诉您更多信息。你有一个很好的起点，可以从哪里开始研究。

**如果您选择使用纹理，请考虑根据电池使用几种不同的纹理。您可以稍微缩放它们或给它们着色，但是使用不同的纹理更加灵活。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T05:18:36.840

如果图形元素是一个`BufferedImage`或`Graphics2D`实例，你可以这样处理它。

![使用白炽灯（黄色）光束的手电筒](../Images/3d088ccbc1f2c400ac3d6bf1f9aab244.png)

![使用卤素（蓝色）光束的手电筒](../Images/9fffd0f2ce0560ac17925782eee45424.png)

```
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class FlashLight {

    public static void main(String[] args) throws Exception {
        Robot robot = new Robot();
        int w = 500, h = 200;
        Rectangle rect = new Rectangle(0, 0, w, h);
        final BufferedImage bi = robot.createScreenCapture(rect);
        final BufferedImage bi2 = FlashLight.draw(
                bi, 10, 180, 420, 90, .3,
                new Color(255, 255, 120, 15), new Color(0, 0, 0, 220));
        final BufferedImage bi3 = FlashLight.draw(
                bi, 10, 180, 420, 90, .3,
                new Color(180, 250, 255, 15), new Color(0, 0, 0, 220));

        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(3,0,2,2));
                gui.add(new JLabel(new ImageIcon(bi2)));
                gui.add(new JLabel(new ImageIcon(bi)));
                gui.add(new JLabel(new ImageIcon(bi3)));

                JOptionPane.showMessageDialog(null,gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }

    public static BufferedImage draw(
            BufferedImage source,
            double x1, double y1, double x2, double y2,
            double beamWidth,
            Color beamColor, Color darknessColor) {
        RenderingHints hints = new RenderingHints(
              RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        BufferedImage bi = new BufferedImage(
                source.getWidth(), source.getHeight(),
                BufferedImage.TYPE_INT_ARGB);

        Graphics2D g = bi.createGraphics();
        g.setRenderingHints(hints);

        g.drawImage(source, 0, 0, null);

        // Create a conical shape to constrain the beam
        double distance = Math.sqrt(Math.pow(x1 - x2, 2d) + Math.pow(y1 - y2, 2d));
        double tangent = (y2 - y1) / (x2 - x1);
        double theta = Math.atan(tangent);
        System.out.println(
                "distance: " + distance
                + "  tangent: " + tangent
                + "  theta: " + theta);
        double minTheta = theta + beamWidth / 2;
        double maxTheta = theta - beamWidth / 2;
        double xMin = x1 + distance * Math.cos(minTheta);
        double yMin = y1 + distance * Math.sin(minTheta);

        double xMax = x1 + distance * Math.cos(maxTheta);
        double yMax = y1 + distance * Math.sin(maxTheta);

        Polygon beam = new Polygon();
        beam.addPoint((int) x1, (int) y1);
        beam.addPoint((int) xMax, (int) yMax);
        beam.addPoint((int) xMin, (int) yMin);

        g.setColor(beamColor);
        GradientPaint gp = new GradientPaint(
                (int)x1,(int)y1, beamColor,
                (int)x2,(int)y2, darknessColor);
        g.setClip(beam);
        g.setPaint(gp);
        g.fillRect(0, 0, bi.getWidth(), bi.getHeight());

        // create an area the size of the image, but lacking the beam area
        Area darknessArea = new Area(new Rectangle(0, 0, bi.getWidth(), bi.getHeight()));
        darknessArea.subtract(new Area(beam));
        g.setColor(darknessColor);
        g.setClip(darknessArea);
        g.fillRect(0, 0, bi.getWidth(), bi.getHeight());

        // fill in the beam edges with black (mostly to smooth lines)
        g.setClip(null);
        g.setColor(Color.BLACK);
        g.setStroke(new BasicStroke(2));
        g.draw(new Line2D.Double(x1,y1,xMin,yMin));
        g.draw(new Line2D.Double(x1,y1,xMax,yMax));

        g.dispose();

        return bi;
    }
} 
```

# google-maps-markers - 如何清理以前的标记（googleMaps.marker）

> ID：13987439
> 
> 赞同：2
> 
> 时间：2012-12-21T09:27:31.597
> 
> 标签：google-maps-markers, marker

我正在使用 jquerymobile 开发一个小型 Google Maps 项目。

首先，我调用 un 方法来显示关于我的位置的地图

```
navigator.geolocation.getCurrentPosition(function(position){
        showMap(position.coords.latitude, position.coords.longitude);
    }, 
    function onFalid(){
        alert('Error occur on getCurrentPositionError' + error.code + ':: ' + error.message);
    }, 
    {
        enableHighAccuracy  : true,
        maximumAge          : 10000
    }); 
```

这是 showMap() 的代码

```
function showMap(lat,long){

    //var latLng = new google.maps.LatLng(data[0].coords.latitude, data[0].coords.longitude);
    var latLng = new google.maps.LatLng(lat,long);

    // Google Map options
    var myOptions = {
      zoom: 15,
      zoomControl   : 1,
      center: latLng,
      mapTypeId: google.maps.MapTypeId.HYBRID////ROADMAP, SATELLITE, HYBRID and TERRAIN
    };

    // Create the Google Map, set options
    Tracking.mapy = new google.maps.Map(document.getElementById("mapHome"), myOptions);
    addMarker(lat, long, map);

} 
```

这很好用！

如您所见，最后，它调用了另一个方法来显示标记

```
function addMarker(lat, long){

    //Tracking.mapy.removeOverlay(Tracking.marker);;
    var mapBounds = new google.maps.LatLngBounds();

    var latitudeAndLongitude = new google.maps.LatLng(lat, long);
    var image = Markers.info()[0][1]+Markers.info()[0][2];

    marker = new google.maps.Marker({
        title   : Markers.info()[0][0],
        //animation: google.maps.Animation.DROP, //BOUNCE
        position: latitudeAndLongitude,
        map     : Tracking.mapy,
        icon : image
    });

    Tracking.markers.push(marker);

    // Clean previous markers THIS IS NOT WORKING!!!!!!!
    //google.maps.Map.prototype.clearOverlays = function() {
      for (var i = 0; i < Tracking.markers.length; i++ ) {

        Tracking.markers[i].setMap(null);
        console.log(Tracking.markers[i]);
      }
    //}

    mapBounds.extend(latitudeAndLongitude);
    Tracking.mapy.fitBounds(mapBounds);
    //trackPath();
} 
```

这也可以正常工作，除了用于清洁标记的循环。

为了让事情变得更复杂，当我在街上工作时，我希望看到我的标记移动，立即或频繁地移动（例如）

我在第一个代码下方添加了该调用，我为您提供了：

```
var track_id = Markers.info()[0][0];
    Tracking.watch_id = navigator.geolocation.watchPosition(
    // Success
    function(position){
        var lat = position.coords.latitude;
        var long = position.coords.longitude;

        Tracking.data.push(lat, long);
        addMarker(lat, long);

    },
    // Error
    function(error){
        alert('Error occur on watchPositionError' + error.code + ':: ' + error.message);
    },
    // Settings
    { 
        frequency: 3000, 
        enableHighAccuracy: true 
    }); 
```

然后每次，我在电影中数组 Tracking.markers 都会增加

```
Tracking = {
    mapy : null,
    watch_id : null,    
    data : new Array(),
    markers : new Array()
} 
```

**我的问题就在这里** 当我在街上移动时，我可以看到我的标记。我移动得越多，我就越有标记。当然，我只想拥有最后一个标记，而不是双胞胎和新双胞胎。

如何清理以前的标记？如您所见，在上面，我尝试了一个循环

```
// Clean previous markers
    //google.maps.Map.prototype.clearOverlays = function() {
      for (var i = 0; i < Tracking.markers.length; i++ ) {

        Tracking.markers[i].setMap(null);
        console.log(Tracking.markers[i]);
      }
    //} 
```

但它没有用。如果我取消注释以 google.maps... 开头的行，则没有任何效果。如果我留下评论，则所有标记都已删除。所以我可以看到任何标记...

你能帮我让我的标记显示在我移动后的位置吗？

# java - 如何让android应用程序在每次打开时都停止重新启动？

> ID：13987445
> 
> 赞同：4
> 
> 时间：2012-12-21T09:28:00.447
> 
> 标签：java, android, android-activity

我开发了一个小型 android 应用程序，最近发现了一个奇怪的行为。

当我在使用 USB 和 Eclipse 安装此应用程序后导航到任意 Activity 时，我可以离开该应用程序，转到 android 主屏幕或其他应用程序，然后通过再次“启动”应用程序直接返回到提到的任意 Activity。

但是当我通过下载apk文件直接在手机上安装应用程序时，当我切换到另一个应用程序或android主屏幕后，当我返回这个应用程序时，我总是会返回应用程序的根Activity。

有谁知道这种行为来自哪里或我如何解决这个问题？

*更新：*在这两种情况下，我都在真实硬件上运行应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T14:06:26.207

将以下代码放入根 Activity 最终解决了这个问题。

```
@Override 
protected void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) { 
        // Activity was brought to front and not created, 
        // Thus finishing this will get us to the last viewed activity 
        finish(); 
        return; 
    } 

} 
```

*来源：* [应用程序总是从根活动开始，而不是恢复后台状态（已知错误）](https://stackoverflow.com/questions/2280361/app-always-starts-fresh-from-root-activity-instead-of-resuming-background-state)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T09:32:25.563

将您只想显示一次的特定内容放入您的`manifest`文件中。`android:launchMode="standard"``activity`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:35:20.270

这是因为系统处理应用程序的方式。

根据其他应用程序的需要销毁您的应用程序完全取决于系统。

当您在模拟器上运行它时，它不会破坏您的应用程序，因此您可以从`Activity`您离开的地方恢复。

但是当你在你的设备上运行它时，设备可能会觉得应用程序占用的内存需要被释放，从而破坏了应用程序。下次你开始时，它会从头开始。

# c# - 如何从数据库中的私钥中检索公钥

> ID：13987454
> 
> 赞同：1
> 
> 时间：2012-12-21T09:28:21.773
> 
> 标签：c#, aes, rsa

我正在创建一对 RSA 密钥。我将公钥存储在数据库中，将私钥存储在文件中（加密）。我使用公钥来加密工作密钥。工作密钥反过来加密数据库中的列数据。在数据库中，我有一个存储工作密钥列表及其相应公钥的表。当用户想要查看表中的某些信息时，他必须提供应用程序用来解密相应公钥的私钥，从而解密信息。但是，我怎样才能从私钥中找到对应的公钥呢？我一直在论坛中搜索，但找不到我需要的信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:33:50.067

如果您可以访问公钥和私钥的模数，那么您可以简单地对两个（大）整数进行比较。两个密钥都需要模数，并且公钥和私钥的模数始终相同。

在加密设备和密钥数据库中，ID 通常与密钥一起存储。该密钥通常是（部分）模数上的加密散列。

# c# - 如何使用 C# 获取文档高度？

> ID：13987455
> 
> 赞同：0
> 
> 时间：2012-12-21T09:28:22.350
> 
> 标签：c#, asp.net

我正在使用 ASP.NET 和 C#。我可以使用 javascript 来获取文档高度。

```
var h = document.documentElement.offsetHeight; 
```

现在我在页面加载期间需要这个值。但是 javascript 将在页面加载后开始执行。所以现在我需要使用服务器端代码（C#）来获取它。

可能吗？

编辑：

在页面加载中，我计划根据文档高度设置所有标签的高度。这样页面将适合所有分辨率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:29:20.580

您无法使用服务器端代码获取此值，因为根据定义，它是服务器端的。

但是，您可以使用 JavaScript 通过 AJAX 将值传递回 ASP.NET 脚本，并在此时执行您需要采取的任何操作。当然，这意味着您将无法为不同的屏幕尺寸提供不同的内容加载，但这完全取决于您的意图。

由于您在页面加载时需要它，因此一种非常非常巧妙的方法是检测浏览器高度然后重定向，例如将其作为查询字符串值传递，您可以直接在 PageLoad 中使用。我的具体意思是，使用 JavaScript 来检测这个 QS 值（例如`?ph=768`），如果它不存在，则将页面重定向到自身，附加在`?ph=768`. 这样您就可以使用它来获取文档加载时的页面高度。

不过，正如@J.Steen 在评论中提到的那样，定义您的意图可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:32:08.963

实际上，虽然可以做到这一点，但方法是错误的。这种功能在客户端会更好地实现。

您应该研究的一件事是[响应式 Web 设计](http://en.wikipedia.org/wiki/Responsive_web_design)，它旨在使用正确的语义标记、CSS 和 JavaScript 来解决此类问题。

您是说要在页面加载时根据文档大小（假设您的意思是窗口大小......因为文档将首先缩放到元素的大小）使元素适合页面加载，但是当用户重新调整屏幕大小？然后一切都再次陷入困境！

我最近不得不使用 jQuery 解决类似的问题，因此您可能需要考虑以下代码片段，因为它可能会帮助您实现所需的结果。

```
$(document).ready(function() {
    // Will run when the document is ready.
    resizeElements();
});

$(window).resize(function() {
    // Will run when the window is resized.
    resizeElements();
});

function resizeElements() {
    // Write your code here to adjust the position, height and width of the desired elements
} 
```

# android - 如何使用 Universal Image Loader Android 强制清除缓存？

> ID：13987479
> 
> 赞同：18
> 
> 时间：2012-12-21T09:29:53.627
> 
> 标签：android, universal-image-loader

我正在使用 UIL 在列表视图中加载图像。

当我长按列表视图中的图像时，我会显示一个对话框来修改该图片，并使用相机将其替换为新图片。

如果我拍一张新照片，当对话框被关闭时，我的列表视图仍会显示旧图像（因为它已被缓存）。如果我在转到列表视图时关闭并重新启动我的应用程序，那么新图像就在那里。

这就是我设置 UIL 的方式：

```
// Get singletone instance of ImageLoader
    imageLoader = ImageLoader.getInstance();

    //set display options for image loader
    DisplayImageOptions displayOptions = new DisplayImageOptions.Builder()
    .cacheInMemory()
    .displayer(new FadeInBitmapDisplayer(500)) //fade in images
    .resetViewBeforeLoading()
    .build();

    //set image loader options
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(this).defaultDisplayImageOptions(displayOptions).build();

    // Initialize ImageLoader with configuration.
    imageLoader.init(config); 
```

如果我删除`.cacheInMemory()`一切正常。我只是想知道仅在打开对话框时是否可以清除缓存。我试图`myImageView.invalidate()`在打开对话框时选择并调用 ImageView，但没有成功。

图像从文件加载：

```
// Load and display image asynchronously
imageLoader.displayImage(file_prefix + image_path, image); 
```

有什么建议么？

编辑：长按图像时创建上下文菜单的代码，我试图清除那里的缓存：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    //get info about item selected
    AdapterView.AdapterContextMenuInfo info;
    try {
        // Casts the incoming data object into the type for AdapterView objects.
        info = (AdapterView.AdapterContextMenuInfo) menuInfo;
    } catch (ClassCastException e) {
        // If the menu object can't be cast, logs an error.
        Log.e("no info", "bad menuInfo", e);
        return;
    }
    Cursor cursor = (Cursor) getListAdapter().getItem(info.position);
    if (cursor == null) {
        // For some reason the requested item isn't available, do nothing
        return;
    }

    //remove selected image from cache (if it is an image)
    imageUrl = cursor.getString(cursor.getColumnIndex("image_path"));
    if (!imageUrl.equalsIgnoreCase("")) {
        MemoryCacheUtil.removeFromCache(imageUrl, imageLoader.getMemoryCache());
    }

    Log.i("imageUrl", imageUrl);

    //get defect row ID and text content to pass it to defect activity
    defect_row_id = cursor.getLong(cursor.getColumnIndex("_id"));
    defect_txt = cursor.getString(cursor.getColumnIndex("defect"));

    MenuInflater inflater = getMenuInflater();

    Log.i("cursor", DatabaseUtils.dumpCursorToString(cursor));

    //set project identifier in context menu header, mapping cursor sequence of values
    menu.setHeaderTitle(getString(R.string.select_an_option));
    inflater.inflate(R.menu.menu_defect_row, menu);

} 
```

选择菜单项（编辑或删除）时

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    //AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {

    case R.id.edit:

        //open defect activity with the specified image and defect pre-loaded
        Intent editDefectIntent = new Intent(this, DefectActivity.class);

        editDefectIntent.putExtra("defect_row_id", defect_row_id);
        editDefectIntent.putExtra("imageUrl", imageUrl);

        startActivity(editDefectIntent);

        return true;
    case R.id.delete:

        askDeleteConfirm();

        return true;

    default:
        return false;
    }

}//onContextItemSelected 
```

编辑：显示图像列表的代码

```
@Override
public void onResume() {
    super.onResume();

    //open connection to db
    db = new DBAdapter(this);
    db.open();

    Log.i("DefectListActivity -> onResume", "called");

    // get all defects for this unit
    defectList = db.getAllDefectsByUnit(unit_id);
    // create an array adapter and let it to display our row
    defects = new SimpleCursorAdapter(this, R.layout.defect_row, defectList, new String[] { "defect", "image_path" }, new int[] { R.id.defect, R.id.image }, 0);

    //set custom view using ViewBinder
    SimpleCursorAdapter.ViewBinder binder = new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

            int placeholder_id = getResources().getIdentifier("placeholder", "drawable", getPackageName());

            //get column name
            String name = cursor.getColumnName(columnIndex);

            //for the thumbnail column,if we have an image replace the placeholder
            if ("image_path".equals(name)) {

                ImageView image = (ImageView) view.findViewById(R.id.image);
                //Bitmap thumbnail;
                String image_path = cursor.getString(columnIndex);

                Log.i("image_path ->", image_path);

                if (!image_path.equalsIgnoreCase("")) {

                // Load and display image asynchronously
                imageLoader.displayImage(file_prefix + image_path, image);

                } else {

                    image.setImageResource(placeholder_id);

                    }

                return true;

            }

            //for the defect column, just add the text to the view
            if ("defect".equals(name)) {

                String defect_text = cursor.getString(columnIndex);

                TextView defect_holder = (TextView) view.findViewById(R.id.defect);
                defect_holder.setText(defect_text);

                return true;
            }

            return false;
        }
    };

    defects.setViewBinder(binder);

    setListAdapter(defects);

}//onResume 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-22T08:39:46.313

如果您同时将其缓存在内存和磁盘中，例如：

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())         
        .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) 
        .discCache(new UnlimitedDiscCache(cacheDir)) 
......... 
```

确保从它们中删除它，然后重新加载图像视图。

```
MemoryCacheUtils.removeFromCache(url, ImageLoader.getInstance().getMemoryCache());
DiscCacheUtils.removeFromCache(url, ImageLoader.getInstance().getDiscCache()); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-01T09:03:27.803

这应该有效：

```
imageLoader.clearMemoryCache(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-21T09:38:25.190

I think you should delete cached image in memory cache when opening dialog. Use `MemoryCacheUtil` for that:

```
MemoryCacheUtils.removeFromCache(imageUrl, imageLoader.getMemoryCache()); 
```

# android - 使用移动手势绘制矩形

> ID：13987480
> 
> 赞同：7
> 
> 时间：2012-12-21T09:29:56.753
> 
> 标签：android, graphics, android-canvas, ondraw, rect

我正在尝试创建一个矩形，但是当我从起始坐标移动到结束坐标时会发生这种情况

![会发生什么](../Images/3b3fa55e5457a541e3c0fc013eb8ce6f.png)

，实际上我想在用户从一个点移动到另一个点时显示进度。这就是我想要的。![我想拥有](../Images/93a5742e03bc0ee5a9b7aea6f24a009b.png).

代码：-

```
public boolean onTouch(View v, MotionEvent event) {

    int action = event.getAction();
    switch (action) {
    case MotionEvent.ACTION_DOWN:
        downx = event.getX();
        downy = event.getY();

    //v.invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        upx = event.getX();
        upy = event.getY();

         canvas.drawRect(downx, downy, upx, upy, paint);

         }
        choosenImageView.invalidate();
        break;
    case MotionEvent.ACTION_UP:
        upx = event.getX();
        upy = event.getY();
            canvas.drawRect(downx, downy, upx, upy, paint);
            }
        } 

        // v.invalidate();
        break;
    }
    return true;
} 
```

**编辑**我想做的是显示进度，即当用户移动他的手指时，应该绘制形状。

任何建议/样品/链接将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T09:48:19.257

您将直接更新`onTouch()`事件中的画布，而无需先将其清除。这不是在视图中绘制某些东西的假定方式（假设这是您想要的）。

相反，您应该存储矩形的开始坐标和当前坐标，并在`onDraw()`事件中使用它们来绘制实际的矩形（在 Adnroid 为您清除 Canvas 的无效部分之后）。如果画布需要重绘，Android 会发出此事件，因此您需要在`onTouch()`事件中告知这是必需的，使用`invalidate()`方法：

```
class myView extends View { // or some other View-based class
   boolean drawRectangle = false;
   PointF beginCoordinate;
   PointF endCoordinate;

   public boolean onTouch(View v, MotionEvent event) {
      switch(event.getAction()) {
         case MotionEvent.ACTION_DOWN:
            drawRectangle = true; // Start drawing the rectangle
            beginCoordinate.x = event.getX();
            beginCoordinate.y = event.getY();
            endCoordinate.x = event.getX();
            endCoordinate.y = event.getY();
            invalidate(); // Tell View that the canvas needs to be redrawn
            break;
         case MotionEvent.ACTION_MOVE:
            endCoordinate.x = event.getX();
            endCoordinate.y = event.getY();
            invalidate(); // Tell View that the canvas needs to be redrawn
            break;
         case MotionEvent.ACTION_UP:
            // Do something with the beginCoordinate and endCoordinate, like creating the 'final' object
            drawRectangle = false; // Stop drawing the rectangle
            invalidate(); // Tell View that the canvas needs to be redrawn
            break;
      }
      return true;
   }

   protected void onDraw(Canvas canvas) {
      if(drawRectangle) {
         // Note: I assume you have the paint object defined in your class
         canvas.drawRect(beginCoordinate.x, beginCoordinate.y, endCoordinate.x, endCoordinate.y, paint);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T15:08:13.457

你清洁两个矩形之间的画布吗？添加这样的功能：

```
 void clearCanvas()
  {
     canvas.drawRect(0,0, width, height, paint);

  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T09:48:00.557

```
case MotionEvent.ACTION_MOVE:
   upx = event.getX();
   upy = event.getY();

   canvas.drawRect(downx, downy, upx, upy, paint);

   }
   choosenImageView.invalidate();
break; 
```

这段代码导致了它。因为您在这里创建了许多矩形。相反，`onDraw(Canvas canvas)`有 drawRect 方法并在所有事件上使用 invalidate 。希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T04:29:11.723

抱歉，亲爱的，我给你整个活动女巫我使用并在画布上绘制矩形。

```
public class CanvasExample extends Activity 
    {
        /** Called when the activity is first created. */

        RelativeLayout relMainOperationLayout;
        RelativeLayout relTabHeader;
        //RelativeLayout relMidalLayout;
        RelativeLayout relBelowLayout;
        Context myContext;
        DrawCanvas drawCanvas;
        static boolean loadFlage=true;
        BibleHelper bibleHelper;

         Bitmap mainBitmap;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            myContext=CanvasExample.this;
            bibleHelper=new BibleHelper(CanvasExample.this,myContext);
            bibleHelper.setFullScreen();

            LayoutInflater layoutInflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);   

            int layoutId = myContext.getResources().getIdentifier("main","layout",getPackageName());

            relMainOperationLayout = (RelativeLayout) layoutInflater.inflate(layoutId,null);

            relTabHeader=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relHeadLayout);

            //relMidalLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relmidalLayout);

            relBelowLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relBelowLayout);

            mainBitmap=getIconDrawable(R.drawable.splash);

            drawCanvas=new DrawCanvas(CanvasExample.this,myContext);

            //drawCanvas.setBackgroundColor(Color.YELLOW);

            //drawCanvas.setBackgroundDrawable(CanvasExample.this.getResources().getDrawable(R.drawable.splash));

            drawCanvas.setBackgroundDrawable(new BitmapDrawable(mainBitmap));

            RelativeLayout.LayoutParams drawParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

            drawParams.addRule(RelativeLayout.BELOW, relTabHeader.getId());

            //relMidalLayout.addView(drawCanvas,drawParams);

            relMainOperationLayout.addView(drawCanvas,drawParams);

//          mainImageView=new ImageView(CanvasExample.this);
//          
//          RelativeLayout.LayoutParams mainParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,200);
//          relMainOperationLayout.addView(mainImageView,mainParams);
//          mainImageView.setBackgroundDrawable(CanvasExample.this.getResources().getDrawable(R.drawable.ic_launcher));

            setContentView(relMainOperationLayout);

        }

        class DrawCanvas extends View
        {

            Context drawContext;
            Activity drawActivity;
            ImageView image;
            Paint mPaint;
            int left=0,right=0,top=0,bottom=0;
            Canvas passCanvas;

            //Bitmap bitmapOrg;
            // bitmapOrg;

            public DrawCanvas(Activity activity,Context context)
            {
                super(activity);

                this.drawActivity=activity;

                this.drawContext=context;

                //bitmapOrg = BitmapFactory.decodeResource(getResources(),R.drawable.splash);

                    mPaint = new Paint();

                    mPaint.setDither(true);

                    mPaint.setColor(Color.RED);

                    mPaint.setStyle(Paint.Style.STROKE);

                    mPaint.setStrokeJoin(Paint.Join.ROUND);

                    mPaint.setStrokeCap(Paint.Cap.ROUND);

                    mPaint.setStrokeWidth(3);

                    mPaint.setFilterBitmap(true);

                this.setOnTouchListener(new View.OnTouchListener() {

                    //@Override
                    public boolean onTouch(View v, MotionEvent event)
                    {

                        switch (event.getActionMasked()) 
                        {
                        case MotionEvent.ACTION_DOWN:

                            invalidate();

                            left=(int) event.getX();
                            right=left+1;
                            top=(int) event.getY();
                            bottom=top+1;               
                            mPaint.setColor(Color.BLACK);
                            onDraw(passCanvas=new Canvas());
                        break;

                        case MotionEvent.ACTION_MOVE:                   
                            invalidate();
                            int tempX=(int) event.getX();

                            //System.err.println("Get X->"+event.getX());
                            if(tempX>right)
                            {
                                right=right+1;
                            }
                            else
                            {
                                right=right-1;

                            }
                            //System.err.println("Get Y->"+event.getY());
                            int tempY=(int) event.getY();

                            if(tempY>bottom)
                            {
                                bottom=bottom+1;                

                            }else
                            {
                                bottom=bottom-1;                

                            }

                            mPaint.setColor(Color.GREEN);
                            onDraw(passCanvas=new Canvas());
                        break;

                        case MotionEvent.ACTION_UP:
                            invalidate();
                            mPaint.setColor(Color.RED);
                            onDraw(passCanvas=new Canvas());
                            System.err.println("After Touch Up");
                            CanvasExample.loadFlage=false;
                            onDraw(passCanvas=new Canvas());

                            /*
                            bibleHelper.showErrorLog("Start X -->"+left);

                            bibleHelper.showErrorLog("Real  X -->"+event.getX());

                            bibleHelper.showErrorLog("End X-->"+right);

                            bibleHelper.showErrorLog("Start Y-->"+top);

                            bibleHelper.showErrorLog("Real Y-->"+top);

                            bibleHelper.showErrorLog("End Y-->"+bottom);
                            */

                            Bitmap croppedBmp = Bitmap.createBitmap(mainBitmap,left,top,right,bottom);

                            final Dialog dialog = new Dialog(CanvasExample.this);

                            dialog.setContentView(R.layout.custom_dialog);
                            dialog.setTitle("Title...");
                            dialog.setCancelable(true);

                            ImageView image = (ImageView) dialog.findViewById(R.id.main);
                            image.setImageBitmap(croppedBmp);
                            Button btnClose=(Button) dialog.findViewById(R.id.btnClose);

                            btnClose.setOnClickListener(new View.OnClickListener() 
                            {

                                public void onClick(View v) 
                                {
                                    dialog.dismiss();
                                }
                            });

                            dialog.show();

                        break;

                        default:

                            break;
                        }
                        return true;
                    }
                });     

            }

            @Override
            protected void onDraw(Canvas canvas) 
            {

                canvas.drawRect(left, top, right, bottom, mPaint);
            }

        }
        private Bitmap getIconDrawable(int imageId)
        {
            //Drawable rtnDrawable = null;
            Bitmap imageBitmap=null;
            try 
            {
                int getImageWH[];
                imageBitmap = BitmapFactory.decodeResource(getResources(),imageId);
                int IW = imageBitmap.getWidth();
                int IH = imageBitmap.getHeight();

                bibleHelper.showErrorLog("Icon Width->" + IW);
                bibleHelper.showErrorLog("Icon Height->" + IH);

                WindowManager winManager = (WindowManager) CanvasExample.this.getSystemService(Context.WINDOW_SERVICE);
                int screenwidth = winManager.getDefaultDisplay().getWidth();
                int screenheight = winManager.getDefaultDisplay().getHeight();  

                getImageWH = bibleHelper.getObjectWidthHeight(screenwidth,screenheight, IW, IH);

                bibleHelper.showErrorLog("Get Icon Width->" + getImageWH[0]);
                 bibleHelper.showErrorLog("Get Icon Height->" + getImageWH[1]);

                imageBitmap = Bitmap.createScaledBitmap(imageBitmap, getImageWH[0],getImageWH[1], false);

                bibleHelper.showErrorLog("New Width-->"+imageBitmap.getWidth());
                bibleHelper.showErrorLog("New Height-->"+imageBitmap.getHeight());

                //rtnDrawable = (Drawable) new BitmapDrawable(imageBitmap);
            } catch (Exception ex) {
                bibleHelper.showErrorLog("Convert Icon Exception-->"+ ex.toString());
            }
            //return rtnDrawable;
            return imageBitmap;
        }

} 
```

在这个 BibleHelper 是 Helper 类女巫用于显示一些消息和日志。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-03T18:18:39.473

如果我理解你是正确的，你希望用户在屏幕上绘制矩形，然后你会在显示器上绘制它。

我想你可以画一个用户按下的点，只是为了给用户一个反馈，当他画完你用矩形代替

或者画矩形的线，所以用户开始画，你从开始到他的手指有一条线，当用户改变方向时，你从用户改变方向和手指的地方开始一条新线，然后当用户返回开始你有一个矩形绘制为 4 行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-08T13:26:52.413

这是转换为**Kotlin**的 Vegers 答案。

```
override fun onDraw(canvas: Canvas) {
    super.onDraw(canvas)
    if (startedDrawing) {
        canvas.drawRect(startPoint.x, startPoint.y, currentPoint.x, currentPoint.y, mPaint)
    }

}

override fun onTouchEvent(event: MotionEvent): Boolean {
    when (event.action) {
        MotionEvent.ACTION_DOWN -> {
            startedDrawing = true
            startPoint.x = event.x
            startPoint.y = event.y
            currentPoint.x = event.x
            currentPoint.y = event.y
            invalidate()
        }
        MotionEvent.ACTION_MOVE -> {
            currentPoint.x = event.x
            currentPoint.y = event.y
            invalidate()
        }
        MotionEvent.ACTION_UP -> {
            startedDrawing = false
            invalidate()
        }
    }
    return true
} 
```

# java - 使用struts显示标签在页面之间导航时出错

> ID：13987486
> 
> 赞同：1
> 
> 时间：2012-12-21T09:30:18.013
> 
> 标签：java, struts, displaytag

在显示标签的页面之间移动时出现以下错误：

> 请求 [/seatreportsubmit] 不包含名为“方法”的处理程序参数。这可能是由标签文本中的空格引起的。

但是，当我两次单击搜索按钮时，它正在移动到下一页。

在过去的几天里，我一直在努力解决这个问题。任何帮助，将不胜感激。

这是我的一些代码：

```
<table width="100%" align="center">
    <tr>
        <td align="Center">
           <input type="button" class="buttonstyle" value="<bean:message key="button.search" />" onclick="searchsubmit();" styleClass="buttonstylebig">&nbsp;
           <input type="button" class="buttonstyle" value="<bean:message key="button.reset" />" onclick="clearValues();">
        </td>
    </tr>
</table> 
```

支柱配置：

```
<action path="/seatreportsubmit"
        type="com.ford.ape.seatreport.actionobject.SeatRprtAction"
        name="SeatReportForm" scope="request" input="seatreport.details"
        validate="true" parameter="method">
        <forward name="openSeatDetails" path="seatreport.details" />
        <forward name="showSeatDetails" path="seatreport.detailsreport" />          
</action> 
```

瓷砖定义：

```
<definition name="seatreport.details" extends="base.definition">
    <put name="body" value="/jsp/SeatReport/SeatVacReport.jsp" />
</definition>
<definition name="seatreport.detailsreport" extends="base.definition">
    <put name="body" value="/jsp/SeatReport/SeatVacReportDetailed.jsp" />
</definition> 
```

js：

```
function searchsubmit()
{
if(search()==true)
{
    if(document.forms[0].seatReportType.value=='Summary Report')
     {
        document.forms[0].seatLocation.value='';
        document.forms[0].seatBuilding.value='';
        document.forms[0].seatFloor.value='';
        document.forms[0].seatType.value='';
        document.forms[0].seatStatus.value='';
        document.forms[0].seatCompany.value='';
        document.forms[0].seatDepartment.value='';
        document.forms[0].seatSubDepartment.value='';
        document.forms[0].seatLL5.value='';
        document.forms[0].seatLL6.value='';

        document.forms[0].method.value="loadPage";
        document.forms[0].submit();
    }

    else if(document.forms[0].seatReportType.value=='Detailed Report')
     {
        document.forms[0].method.value="showSeatRprt";
        document.forms[0].submit();
     }   
}
} 
```

下面是使用的显示标签。

```
<display:table name="requestScope.SeatReportForm.rprtData" id="table" export="true" sort="list" requestURI="/seatreportsubmit.do"   pagesize="20" align="center"  class="table_main" width="100%">

<display:column width="5%"  align="center" class="hidden" media="Excel" title="Request No" headerClass="table_header" >
<%=((SeatRprtVO)table).getSeatNo()%>
</display:column>
<display:column  class="label_text" property="seatLocation" title="Location" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="seatBuilding" title="Building" headerClass="table_header" width="3%" align="center"/>
<display:column  class="label_text" property="seatFloor" title="Floor" headerClass="table_header" width="4%" align="center"/>
<display:column  class="label_text" property="seatNo" title="Seat No" headerClass="table_header" width="4%" align="center"/>
<display:column  class="label_text" property="seatType" title="Seat Type" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="seatStatus" title="Seat Status" headerClass="table_header" width="7%" align="center"/>   

<%--    <display:column  class="label_text" property="seatCategory" title="Seat Category" 
headerClass="table_header" width="7%" align="center"/> --%>

<display:column  class="label_text" property="cdsID" title="CDSID" headerClass="table_header" width="4%" align="center"/>
<display:column  class="label_text" property="firstName" title="First Name" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="lastName" title="Last Name" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="ll6CdsId" title="LL6 CDSID" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="ll5CdsId" title="LL5 CDSID" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="ll4CdsId" title="LL4 CDSID" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="employeeType" title="Employee Type" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="company" title="Company" headerClass="table_header" width="7%" align="center"/>

<display:column  class="label_text" property="department" title="Department" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="subDepartment" title="Sub-Department" headerClass="table_header" width="7%" align="center"/>
<display:column  class="label_text" property="region" title="Region" headerClass="table_header" width="7%" align="center"/>

<display:setProperty name="export.xls.filename" value="rprtData.xls"/>
<display:setProperty name="css.tr.even" value="row1" />
<display:setProperty name="css.tr.odd" value="row2" />
<display:setProperty name="paging.banner.placement" value="bottom" />
<display:setProperty name="basic.msg.empty_list"  value="No Records Found" />

 </display:table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:11:03.090

您收到的错误消息是不言自明的：您缺少`method`参数。

从您的代码看来，您正在使用[DispatchAction](http://struts.apache.org/1.x/struts-extras/apidocs/org/apache/struts/actions/DispatchAction.html)。这种类型的 Struts Action 包含一堆“个性化的`execute`方法”，并使用一个请求参数来确定调用哪一个。`method`在您的情况下调用请求参数：

```
<action path="/seatreportsubmit" .... parameter="method"> 
```

这必须出现在对您的操作的所有请求中，否则 Struts 将不知道要调用什么方法。

我看到你已经有两个方法叫做`loadPage`and `showSeatRprt`。你有其他人吗？你有一个接收寻呼请求的吗？

当您在页面之间导航时，显示标签会从其`requestURI`参数开始创建正确的请求 URL，在您的情况下是`requestURI="/seatreportsubmit.do"`. 我认为这是您缺少`method`参数的地方。

尝试`handlePaging`在您的 Action 类中添加一个方法，然后将显示标记的 requestURI 更改为如下所示：`requestURI="/seatreportsubmit.do?method=handlePaging"`并查看当您浏览页面时它是否获得控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:36:22.550

感谢您的回复..我想我的问题得到了解决...问题是来自请求页面的查询字符串中传递了很多数据...由于查询字符串超出了获取请求的允许长度， method='showSeatRprt' 稍后在查询字符串中追加分页无法找到参数方法，并且由于查询字符串被截断。

因此它显示了相应的消息......现在它工作正常......

# swi-prolog - 如何在 xpce/prolog 中创建一个按钮来执行某些功能

> ID：13987487
> 
> 赞同：1
> 
> 时间：2012-12-21T09:30:17.093
> 
> 标签：swi-prolog, xpce

```
?- new(B, button(hello,
                 message(@pce, write_ln, hello))). 
```

在 xpce/prolog 中，这种创建按钮来打印句子的方法有没有什么方法可以让我在单击按钮时执行一些功能，请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:07:35.073

从`Help > XPCE manual > Browsers > Examples > Obtainers`+右键+`Select`可以看到一个实际的例子。

```
create_person_dialog :-
    new(D, dialog('Enter new person')),
    send(D, append, new(label)),    % for reports
    send(D, append, new(Name, text_item(name))),
    send(D, append, new(Age, text_item(age))),
    send(D, append, new(Sex, menu(sex, marked))),

    send(Sex, append, female),
    send(Sex, append, male),
    send(Age, type, int),

    send(D, append,
         button(create, message(@prolog, create_person,
                                Name?selection,
                                Age?selection,
                                Sex?selection))),

    send(D, default_button, create),
    send(D, open).

create_person(Name, Age, Sex) :-
    format('Creating ~w person ~w of ~d years old~n',
           [Sex, Name, Age]). 
```

打开高亮后`create_person_dialog`，右键单击`Consult`应该得到（我填写了一些值）

![在此处输入图像描述](../Images/43ff2384dc19e5590d8e51eb022c0cbd.png)

`Create`并在控制台中单击输出

```
Creating male person goofy of 99 years old 
```

通常，您需要将`attach`按钮连接到某些 GUI 才能获得它们的功能。

高温高压

**在此处编辑**我在 Windows 上获得的布局

![在此处输入图像描述](../Images/f3ecac60291017cf59639813397691f2.png)

这两个图像的获取*方式*有所不同：在 Windows 中`Consult`，打开帮助主题后，上下文菜单处于活动状态。

# import - 使用脚本导入时产品不更新

> ID：13987488
> 
> 赞同：0
> 
> 时间：2012-12-21T09:30:22.037
> 
> 标签：import, magento-1.7

我正在使用脚本导入产品。当没有产品时它工作得很好，但是当我们尝试更新产品或导入更多产品时它就不起作用了。基本上它不保存产品。

在下面的代码 $row_option['iStockLevel'] 检查产品数量。

脚本代码是：-

```
 $product=Mage::getModel('catalog/product');  
        $proId=Mage::getModel('catalog/product')->getIdBySku($sku);

        if($proId){

                if($row_option['iStockLevel'])  {   

                $product->load($proId);

                $productStockData= $product->getStockData();

                   if(!$row_option['iStockLevel'])
                   {
                     $productStockData['qty']=0;
                   }
                   else{
                       $productStockData['qty']=$row_option['iStockLevel'];
                   }

                  $productStockData['is_in_stock']=1;
                  $productStockData['manage_stock'] = 1;
                  $productStockData['use_config_manage_stock'] = 0;

                    $product->setStockData($productStockData);

              try {
                   $product->save();
               }
                catch (Exception $ex) {
                    echo $ex->getMessage();
                }

  } 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:23:24.900

由于在您发布的位中，您只是试图修改产品的库存。因此，您不需要保存产品，只需保存该产品的库存。

**试试这个：**

```
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);

if ($product) {
    if ($row_option['iStockLevel']) {  

        $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product->getId()); 

        if (!$row_option['iStockLevel']) {
            $stock->setData('is_in_stock', 0)
            $stock->setData('qty', 0);
        } else {
            $stock->setData('is_in_stock', 1)
            $stock->setData('qty', (int)$row_option['iStockLevel']);
        }

        // Save
        $stock->save(); 
    }
} 
```

# javascript - appJS和tideSDK中没有播放声音

> ID：13987490
> 
> 赞同：0
> 
> 时间：2012-12-21T09:30:34.243
> 
> 标签：javascript, frameworks, tidesdk, appjs

我开发了一个 Web 应用程序，我想使用框架将其打包为桌面应用程序。我尝试在 appJS 和潮汐SDK 中这样做。除了一个播放声音的功能外，一切都运行良好。

这是音频元素和播放声音的按钮。

```
<audio id="audioElem" src="clap.mp3"></audio>
<input type="submit" value="Play" onclick="playSound();" /> 
```

这是播放声音的功能

```
function playSound(){
    document.getElementById('audioElem').play();
    return false;
} 
```

当我在浏览器中测试内容时一切正常，但是当我使用这些框架发布应用程序时没有播放声音。音频文件是 MP3 格式，我认为框架支持这种格式，因为它们是基于 webkit 的。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:14:42.493

您正在使用 html5 播放声音，但这不是 appjs 使用的铬的自动部分。

快速修复是使用 soundmanager2 来播放您的音频，这会检测可用的内容并使用各种后备，因此使用 appjs 它将选择一个闪存后备。

更长的解决方法是使用启用音频的 appjs 分发一个额外的二进制文件，我不记得它现在到底叫什么了。在未来的某个时候，html5 标准将得到开箱即用的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:57:57.243

你想在 Windows 上使用 TideSDK 吗？如果是，则当前不支持音频和视频标签，因为底层 webkit 实现（wincairo）不支持相同的。

在其他操作系统中，上述代码应该可以正常工作。当前版本的 TideSDK 包含稍旧的 webkit 版本，因此 HTML5 CSS3 分数会少一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:37:40.903

我发现，tideSDK 和 appJS 都在其上工作的 chromium 浏览器不支持 MP3，这与 chrome 浏览器不同。

> 两个浏览器中的视频和音频标签。
> 
> ```
> chrome : AAC, MP3, Vorbis and Theora
> 
> chromium : Vorbis and Theora by default 
> ```

由于格式支持问题，音频无法播放。

# mysql - 如何按两个 id 对 linq 查询进行分组

> ID：13987497
> 
> 赞同：3
> 
> 时间：2012-12-21T09:30:49.060
> 
> 标签：mysql, sql, sql-server, linq, linq-to-sql

我如何使用两个 id 的分组；我有类似的数据

```
empid: 1, usrid: 1, profid: 1
empid: 1, usrid: 1, profid: 2
empid: 2, usrid: 1, profid: 5 
```

我写过类似的查询

```
var query = (from i in data
         group i by new { i.empid, i.usrid} into g
         select new {                         
         profileid = g.Select(z=>z.profileid).ToArray()                         
         }).ToArray(); 
```

现在对于`empid:1`and`usrid:1`我想获取配置文件 ID 作为 and 的数组并且`1,2` 我`empid:2`想`usrid:1`获取`prof id``5`

但我得到了每条记录中的所有三个值，比如`1,2,5`

我怎样才能使用 linq

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:06:04.243

当我分步执行时，我发现更容易看到正在发生的事情。

首先对数据进行分组

```
var grouped = data.GroupBy(d => new { d.empid, d.userid }); 
```

然后选择结果

```
var results = grouped.Select(g => g.Select(d => d.profid).ToArray()); 
```

每个`g`都是由一对`empid`和键控的组`userid`。该组是您的类的实例集合。`profid`所以上面的语句说要从每个组（每`empid` `userid`对）中创建一个 s 数组。结果是

```
[1, 2]
[5] 
```

这会让你得到你想要的数组，但是你会这样丢失密钥。我不知道你想对结果做什么，所以这可能没问题，但可能不是。无论哪种方式，组都包含您想要的键和值。

解决该问题的另一种方法是使用不同的重载`GroupBy`来获取`profid`值。

```
var grouped2 = data.GroupBy(d => new { d.empid, d.userid }, d => d.profid); 
```

这将为您提供一个组，其键是`empid`and`userid`和集合只是`profid`s。这更有可能更接近您想要的。

# c - 如何解决以下警告：格式不是字符串文字并且没有格式参数？

> ID：13987501
> 
> 赞同：1
> 
> 时间：2012-12-21T09:31:00.340
> 
> 标签：c

我有以下代码：

```
#include<stdio.h>
#include<stdlib.h>

#define MACRO_TEST(MESSAGE,args...) { \
  const char *A[] = {MESSAGE}; \
  printf("this is a test\n");\
  if(sizeof(A) > 0) \
    printf(*A,##args); \
}
int main () {
    MACRO_TEST();
    MACRO_TEST("hello %d\n",5);
    return 0;
} 
```

当我编译它时，它会提供一条警告消息：

```
test.c:78:5: warning: format not a string literal and no format arguments 
```

警告的原因是什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:33:37.893

它在抱怨这条线

```
printf(*A,##args); 
```

将其更改为

```
printf(""MESSAGE, ##args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:38:07.557

您确实意识到 printf 的第一个参数是指向 char 的指针数组，对吗？

我倾向于在原始 printf 中添加“这是一个测试”，并附加（使用##）MESSAGE，然后是 args（可能没有##，但不确定）。

# imagej - 从 ImageJ 中的蒙版中选择一个连接的对象

> ID：13987503
> 
> 赞同：1
> 
> 时间：2012-12-21T09:31:05.260
> 
> 标签：imagej, morphological-analysis

我想使用 Fiji (ImageJ) 进行一些简单的预处理操作并创建一个二进制掩码。我只是在使用 GUI，我对自动程序不感兴趣。我得到了以下蒙版：（这只是一个切片，实际蒙版是 3D，298 MB）

![原始面具](../Images/27254ad6f73599413b40b54c6d8f0c91.png)

我需要提取一个 3D 连接对象，这样结果将是：

![对象蒙版](../Images/6ed155ce74b94cfc9bc4aaa053051f0f.png)

理想情况下，我想使用相当于魔杖工具的 3D 工具单击对象内部的一个点，选择对象，反转选择，乘以 0。首先，我尝试使用命令分析 - 3D 对象计数器，但是我猜图像太大太复杂（操作在第 2 步冻结。连接对象）。有什么我可以遵循的程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:58:50.133

在斐济，您可以执行以下操作：

1.  用 反转图像`Edit > Invert`。
2.  从斐济工具栏中选择点选择工具。
3.  单击要从中提取连接的白色像素的区域，以在此处放置点选择。
4.  运行`Plugins > Process > Find Connected Regions`。
5.  选择`Start from point selection?`并更改`Stop after this number of regions are found`为`1`。
6.  单击`OK`。

该插件有[一些文档](http://www.longair.net/edinburgh/imagej/find-connected-regions/)（我很久以前写的）。它使用一种非常简单的算法来查找连接区域，但对于许多目的来说已经足够了。

# jquery - 如何使用 jQuery 缩放整个内容

> ID：13987505
> 
> 赞同：1
> 
> 时间：2012-12-21T09:31:15.043
> 
> 标签：jquery, scale

我正在用 html5 和 jQuery 制作一些小游戏。它们可以在不同的平台上播放，例如 pc 或 iOS 或 Android。我想以不同的分辨率显示具有固定纵横比的完整内容。

我可以使用 .width() 和 .height() 缩放特定对象，但我不确定是否有更好的方法来自动缩放整个内容，而不是访问每个组件并一一更改它们的比例和位置.

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:35:33.083

你可以试试 css [transform:scale()](http://www.w3schools.com/css3/css3_2dtransforms.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:51:41.833

要使用 JS 和 CSS 动态缩放页面内容，您可以`transform: scale`在 CSS 中设置属性。这是将应用跨浏览器缩放的示例代码：

**HTML：**

```
<html>
<body>
    This is normal body text. <br />
    <img src="https://lh6.googleusercontent.com/-IV-xOecyuK0/UFGqw_mpjTI/AAAAAAAAATI/_gEx7d4wKqw/w300-h83-p-k/webspeaks.png" />
    <br />
    <br />
    <div id="zoom">
        <a href="#" title="Normal" class="default">Default</a>
        <a href="#" title="Medium" class="large">Large</a>
        <a href="#" title="Large" class="larger">Larger</a>
    </div>
</body>
</html> 
```

**jQuery：**

```
$("#zoom a").click(function(e) {
        var $body = $("body");
        var newClass = $(this).attr('class');
        $body.removeClass("default large larger").addClass(newClass);
       e.preventDefault();
    }
); 
```

**CSS：**

```
body.default {
    transform: scale(1);
    -webkit-transform: scale(1);
    -webkit-transform-origin: 0 0;
    -moz-transform: scale(1);
    -moz-transform-origin: 0 0;
    -o-transform: scale(1);
    -o-transform-origin: 0 0;
    -ms-transform: scale(1);
    -ms-transform-origin: 0 0;
}
body.large {
    transform: scale(1.5);
    -webkit-transform: scale(1.5);
    -webkit-transform-origin: 0 0;
    -moz-transform: scale(1.5);
    -moz-transform-origin: 0 0;
    -o-transform: scale(1.5);
    -o-transform-origin: 0 0;
    -ms-transform: scale(1.5);
    -ms-transform-origin: 0 0;
}
body.larger {
    transform: scale(2);
    -webkit-transform: scale(2);
    -webkit-transform-origin: 0 0;
    -moz-transform: scale(2);
    -moz-transform-origin: 0 0;
    -o-transform: scale(2);
    -o-transform-origin: 0 0;
    -ms-transform: scale(2);
    -ms-transform-origin: 0 0;
} 
```

**[现场演示](http://jsfiddle.net/arvind07/Twntk/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:34:14.283

IMO 以百分比（通过 CSS）给出高度和宽度将比每次都更改它更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-22T02:36:26.297

太棒了@Arvind Bhardwaj！

顺便说一句，在 JQuery 上：

```
 var nIndexZoom = 1;
    if($someDiv.css('transform') == 'none' || $someDiv.css('transform') == 'matrix(1, 0, 0, 1, 0, 0)')
        nIndexZoom = 0.5
    //Go for it!
    $someDiv.css({
        'transform'                   : 'scale('+nIndexZoom+')',
        '-webkit-transform'           : 'scale('+nIndexZoom+')',
        '-webkit-transform-origin'    : '0 0',
        '-moz-transform'              : 'scale('+nIndexZoom+')',
        '-moz-transform-origin'       : '0 0',
        '-o-transform'                : 'scale('+nIndexZoom+')',
        '-o-transform-origin'         : '0 0',
        '-ms-transform'               : 'scale('+nIndexZoom+')',
        '-ms-transform-origin'        : '0 0',
    }); 
```

发送！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T09:39:11.227

You could have all your elements using `rm` (or `rem`, I guess) instead of pixels for their heights and widths.

Then you could use javascript to change the font-size for the html-tag (standard is 62.5% for rem), and everything should scale up or down.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-02T16:21:08.513

也许使用通用选择器“查找” * 会起作用？如果 * 太重，请尝试根据需要选择单个元素。

```
var scaling = .5;
$('#someElement').find('*').each(function () {
    var fSize = Number($(this).css('fontSize').replace(/[^0-9\.]+/g, ""));
    $(this).outerWidth($(this).outerWidth() * scaling);
    $(this).css('fontSize', fSize * scaling));
}); 
```

# android - java.lang.SecurityException：权限拒绝：启动 Intent com.android.calendar/.DayActivity

> ID：13987506
> 
> 赞同：0
> 
> 时间：2012-12-21T09:31:21.420
> 
> 标签：android, android-intent, calendar, securityexception

在我的应用程序中，我使用以下代码在 DayView 上打开标准 android 日历：

```
Intent intent2 = new Intent();
intent2.setComponent(new ComponentName("com.android.calendar", "com.android.calendar.DayActivity"));
intent2.setAction("android.intent.action.MAIN");
intent2.addCategory("android.intent.category.LAUNCHER");
intent2.setFlags(0x10200000);
intent2.putExtra("beginTime", (new Time()).setJulianDay(reqDay));
intent2.putExtra("DETAIL_VIEW", true);
intent2.putExtra("DETAIL_VIEW_MODE", 2);
context.startActivity(intent2); 
```

这曾经可以很好地工作 - 在大多数手机上仍然可以正常工作。但是，昨天在一部手机（Android 2.3 - CM7）上，我开始收到此错误（为便于阅读而添加了换行符）：

```
Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER]
flg=0x10200000 cmp=com.android.calendar/.DayActivity (has extras) }
from ProcessRecord{407719a0 3244:com.lge.android.calendarwidget/10077}
(pid=3244, uid=10077) requires null 
```

日志猫的完整错误如下：

```
I/ActivityManager(  245): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.calendar/.DayActivity (has extras) } from pid 3244
W/ActivityManager(  245): Permission denied: checkComponentPermission() reqUid=10004
W/ActivityManager(  245): Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.calendar/.DayActivity (has extras) } from ProcessRecord{407719a0 3244:com.lge.android.calendarwidget/10077} (pid=3244, uid=10077) requires null
W/calw3   ( 3244): com.android.calendar not found, trying com.google.android.calendar
W/calw3   ( 3244): java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.calendar/.DayActivity (has extras) } from ProcessRecord{407719a0 3244:com.lge.android.calendarwidget/10077} (pid=3244, uid=10077) requires null 
```

我有两个问题：（1）它为什么突然坏了？它之前肯定在这款手机上工作过（这是我的主要手机）；(2) 我该如何解决？

**编辑**只是补充一点，相同的代码在我拥有的另一部手机（HTC Desire X）上仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:03:19.377

> (1) Why did it break all of a sudden? It definitely worked on this phone before (this is my main phone)

That application was upgraded, perhaps as part of a firmware upgrade, and that activity is no longer exported.

> (2) how can I fix it?

Delete the code. You cannot start a private (non-exported) activity. Perhaps consider using `CalendarContract` to roll your own version of this activity, if that API supports whatever that activity did.

You shouldn't have been invoking undocumented activities in this app in the first place, as there was no guarantee that the app would exist on all devices, or support that activity on all devices. Your current state of affairs is just another, concrete manifestation of this problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:45:07.083

It's quite strange that everything was fine before, I have to ask, do you have this line in android manifest?:

```
 <uses-permission android:name="android.permission.READ_CALENDAR"/> 
```

# android - 计时码表以字符计数

> ID：13987508
> 
> 赞同：3
> 
> 时间：2012-12-21T09:31:33.433
> 
> 标签：android

我刚刚在我的应用程序中添加了一个计时器，它的行为很奇怪。它不是用数字来计算，而是用 CHARS 来计算！例子：

```
00:00:00
00:00:0(
00:00:0)
00:00:0/
00:00:0*
00:00:0+
... LOOPS AFTER 10
00:00:00
00:00:0(
00:00:0)
00:00:0/
00:00:0*
00:00:0+ 
```

xml

```
 <Chronometer
            android:id="@+id/tracking_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@id/record_indicator"
            android:textColor="@color/tracking_time"
            android:textSize="14dip"
            android:textStyle="bold" /> 
```

创建

```
 mTrackingTime = (Chronometer)this.findViewById(R.id.tracking_time);
        mTrackingTime.setOnChronometerTickListener(this); 
```

开始

```
 mTrackingTime.setBase(System.currentTimeMillis());
    mTrackingTime.start(); 
```

打回来

```
 @Override
    public void onChronometerTick(final Chronometer chronometer) {
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-26T20:24:55.223

这些字符出现在基数大于 时`SystemClock.elapsedRealtime()`，即自启动以来的毫秒数。

它显示此参数的结果：

```
SystemClock.elapsedRealtime() - base 
```

默认值，或者如果您调用：

```
chronometer.setBase(SystemClock.elapsedRealtime()); 
```

然后计时器将从`00:00`

如果你打电话：

```
chronometer.setBase(SystemClock.elapsedRealtime() - 10000); 
```

然后计时器将从`00:10`

如果你打电话：

```
chronometer.setBase(SystemClock.elapsedRealtime() + 10000); 
```

然后计时器会画垃圾 10 秒，然后从`00:00`

所以如果你打电话：

```
chronometer.setBase(System.currentTimeMillis()); 
```

您应该期望看到垃圾大约 44 年，然后就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:20:31.513

根据我的理解，需要`Chronometer.setBase()`基于[elapsedRealTime](http://developer.android.com/reference/android/os/SystemClock.html#elapsedRealtime%28%29)的毫秒数。这意味着纪元毫秒不起作用。为了能够使用纪元毫秒，您必须调用`Chronometer.setBase()`如下：

```
chronometer.setBase(SystemClock.elapsedRealtime()); 
```

数学有效地将纪元毫秒转换为经过的实时毫秒。

试试这个，看看能不能解决你的问题......

根据@Ef Es 评论更新..

# c - scanf 格式字符串

> ID：13987509
> 
> 赞同：1
> 
> 时间：2012-12-21T09:31:45.327
> 
> 标签：c, regex, scanf

我正在尝试学习 scanf 格式字符串，但无法使其正常工作。我正在尝试读取以下格式的字符串：

"someKey"="someValue"

这是我正在使用的代码：

```
void test()
{
    char buffer[2][128];
    int amountRead;
    char* input = "\"test\"=\"hello\"";
    int result = sscanf(input, "\"%128[a-zA-Z0-9]s\"=\"%128[a-zA-Z0-9]s\"%n", buffer[0], buffer[1], &amountRead);
    printf("input = %s\nresult = %d\nstr1 = %s\nstr2 = %s\namountread = %d\n", input, result, buffer[0], buffer[1], amountRead);
} 
```

由于某种原因，它只设法扫描第一个值：

```
input = "test"="hello"
result = 1
str1 = test
str2 = 
amountread = 0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T09:43:08.460

玩了一下你的代码，然后转到联机帮助页。

> s 匹配一系列非空白字符；

...

> [ 匹配指定的可接受字符集中的非空字符序列；

显然在使用时`[`您不需要`s`，因此以下操作按预期工作：

```
int result = sscanf(input, "\"%128[a-zA-Z0-9]\"=\"%128[a-zA-Z0-9]\"%n", buffer[0], buffer[1], &amountRead); 
```

# c++ - 如何在运行时插入必须更新到 Mysql 数据库的数据

> ID：13987511
> 
> 赞同：0
> 
> 时间：2012-12-21T09:31:47.943
> 
> 标签：c++, mysql

现在，我正在使用此代码将值插入表中。

**mysql_query(connect, "插入用户值 (5, 'John', 'Mathew', True)");**

此行将值插入 MySQL 数据库。

假设是否必须通过用户从控制台给出的值来更新表。我需要如何在我的 c++ 程序中编写查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:35:36.577

你的问题不清楚..但我得到的是

您想在表中插入一些值，如果值已经存在，那么您需要更新它，否则插入。比你可以使用mysql可用的“插入..更新”语句

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# ruby-on-rails - 如何在控制器中获取 f.submit 的名称参数？

> ID：13987512
> 
> 赞同：7
> 
> 时间：2012-12-21T09:31:58.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了 _form.html.erb，它的编码如下

```
<%= form_for @book, :html => { :class => 'form-horizontal' } do |f| %>
....
    <%= f.submit nil, :class => 'btn btn-primary', :name => 'update' %>
    <%= f.submit 'Destroy', :class => 'btn btn-danger', :name => 'destroy' %>
....
<% end %> 
```

是的，我确实有 2 份提交以相同的形式提交，并且它们都具有诸如“更新”和“销毁”之类的名称。

当用户按下销毁按钮时，将调用 books_controller 中的更新操作。
并判断是“更新”还是“销毁”请求。
为此，如何在控制器中获取其名称参数？

更新操作将是这样的

```
def update

 if params[:books][:name] == 'destroy'
  destroy transaction
 else
  update transaction
 end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:05:06.760

尝试这个，

```
<%= f.submit 'Update', :class => 'btn btn-primary', :name => 'submit' %>
<%= f.submit 'Destroy', :class => 'btn btn-danger', :name => 'submit' %> 
```

现在，当您**更新**时，您将获得`params[:submit]`“更新”，而当您**销毁**时，您将在控制器中获得`params[:submit]`“销毁”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:45:57.837

销毁时，是否需要表单的其他输入值？

有两种形式会更容易（也更简洁），一种是针对更新操作的输入，另一种是针对destoy操作的仅销毁按钮？

如果您*需要*访问其他输入，我仍然建议您使用两种不同的操作和两种不同的表单，我还建议您在提交时使用 JS / jQuery 从第一个表单中获取您需要的字段的值第二种形式

# wordpress - Wordpress Widget jquery live() 或 on()，管理端

> ID：13987518
> 
> 赞同：1
> 
> 时间：2012-12-21T09:32:31.887
> 
> 标签：wordpress, widget

有一段时间让我感到不安，jQuery API 说：

```
As of jQuery 1.7, the .live() method is deprecated. Use .on() to attach event handlers. 
```

当我尝试在我的小部件管理端（*小部件类的 form() 操作）*中添加一些 jquery 内容时，我很惊讶不能使用 on()，而是使用 live() 来完成这项工作。

所以这是我的问题：**为什么以及我误解了什么？**

问候，当然，谢谢你的时间。

ps 我不喜欢使用 >= 1.7 版本。

编辑：

```
<?php
    class Test_Slider_Widget extends WP_Widget 
        { 
            public function form( $instance ) { 
                ?>
             <span id="test">Test</span>
             <script> 
             jQuery(document).ready(function($) {
                 /* $('#test').on('click', function { //doesn't work
                     alert('test'); 
                 }); */
                 $('#test').live('click', function { //work
                     alert('test');
                 });

             });
             </script>

 <?php } 
```

编辑 2：好的，总是使用 $this->get_field_id('id-text') 来拥有一个唯一的 ID，否则 id 将在 wordpress 管理中由于小部件重复代码而重复。感谢**Xec**给我指路 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:02:42.467

不推荐使用的`.live()`方法绑定到`document`，并且在每次单击时都会`#test`在调用处理程序之前检查选择器是否匹配。如果您想要这种行为，`.on()`您可以使用*委托语法*。

查看[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)了解更多详细信息。

对于快速修复，您可以使用以下内容模仿您的`.live()`代码：

```
$(document).on('click', '#test', function () {
    alert('test');
}); 
```

要获得更高效的代码，您将替换`document`为匹配的静态祖先的选择器`#test`

希望这可以帮助！

**编辑：**

从您的“编辑 2”中，我意识到您的问题是重复的 ID，但我会将这个答案留在这里以供后代使用。

# sqlalchemy - 通过 sqlalchemy 将日期字段保存到 oracle

> ID：13987522
> 
> 赞同：0
> 
> 时间：2012-12-21T09:32:51.973
> 
> 标签：sqlalchemy

我这样定义我的映射器：

```
col = Column(Date). 
```

当我将数据保存到 oracle 时，我使用 datetime.datetime.now() 作为 col 的值，它会提高

```
NotSupportedError: (NotSupportedError) Variable_TypeByValue(): unhandled data
type time.struct_time 
```

我只需要将日期信息存储到此字段中，但我不知道该怎么做。我也很好奇如何将日期时间存储到字段中。

evn：python 2.7.3、sqlalchemy0.8.0b2、cx_Oracle 5.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-05T07:20:56.277

对于不同的数据类型，我也面临同样的问题，并找到这个解决方案它也可以帮助你。

[https://groups.google.com/forum/#!topic/modwsgi/SdgEyyAPwvE](https://groups.google.com/forum/#!topic/modwsgi/SdgEyyAPwvE)

示例： **Apache 配置**

```
<VirtualHost *:80>
    ServerName testenv-test.my.fq.dn
    ServerAlias testenv-test

    WSGIDaemonProcess testenv user=michel threads=5
    WSGIScriptAlias / /var/www/michel/testenv/wsgi/app.wsgi
    SetEnv MYAPP_PATH /var/www/michel/testenv/config

    <Directory /var/www/michel/testenv/wsgi>
        WSGIProcessGroup testenv
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    ErrorLog /var/www/michel/testenv/logs/error.log
    LogLevel warn

    CustomLog /var/www/michel/testenv/logs/access.log combined

</VirtualHost> 
```

# ios - 模态视图控制器旋转时iOS旋转视图控制器

> ID：13987528
> 
> 赞同：4
> 
> 时间：2012-12-21T09:33:27.137
> 
> 标签：ios, rotation, modalviewcontroller

我有一个 UIViewController A，它在 UIButton 操作上打开另一个模态 UIViewController B。

我的问题是：当当前模式 UIViewController B 打开并旋转时 - 以前的 UIViewController A 根本不旋转。这意味着当我关闭 UIViewController B - UIViewController A 仍处于旧状态（仍然具有旧界面方向）。目前，我通过在 B 旋转时调用 A 中的方法来强制 A 旋转。

是否有另一种常见的方法来通知其他视图控制器旋转？或者什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:51:15.297

如果您使用的是 iOS 6，那么您拥有 `(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`. 然后，您只需要返回超级视图的设备方向。

**编辑：**如果你覆盖 iOS 5，你也可以检查[这个](https://stackoverflow.com/questions/13988146/change-the-orientation-for-uiview-that-is-removed-from-the-superview/13989131#13989131)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:31:02.693

我自己在轮换方面遇到了很多问题。已经为除根视图之外的所有视图找到了第一个视图的解决方案。

请参阅：[从第一个视图（飞溅）到第一个 viewController 的旋转问题](https://stackoverflow.com/questions/14235494/rotation-issue-from-the-first-view-splash-to-first-viewcontroller)

这实际上只是设备方向更改的通知。“libraryTableBorder”特定于我的应用程序。将“if”和“else”中的代码替换为适合您的应用程序的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T16:21:23.403

如果您的模态视图的演示样式设置为当前上下文，它应该旋转视图控制器 A。我遇到了问题但无法弄清楚为什么，界面生成器中的设置似乎覆盖了代码中设置的设置。

试试看，你可以明显改变过渡风格

![IB 模态视图控制器设置](../Images/aee649e75818b65788ea8ed5faa39d1c.png)

# vb.net - gridview 列项样式不起作用

> ID：13987530
> 
> 赞同：1
> 
> 时间：2012-12-21T09:33:32.830
> 
> 标签：vb.net, gridview

我正在使用 vb.net 从 DB 填充网格视图，问题是绑定 gridview 后我更改了项目 stlye 但它给出了这个错误

`Index was out of range. Must be non-negative and less than the size of the collection`

这是我的代码

```
Public Sub loadnews()
        Try
            con.Open()
            Dim da As New OdbcDataAdapter("SELECT A.LABEL ""Highest"",A.VALUE||' '||A.DATED ""SML I (Jhang)"",b.VALUE||' '||b.DATED ""SML II (Bhone)"" FROM (SELECT * FROM CMS20122013.DNEWS_HIGHEST_J@CMS) A, (SELECT * FROM CMS20122013.DNEWS_HIGHEST_B@CMS) B WHERE A.SRLNUM=B.SRLNUM", con)
            Dim ds As New DataSet
            da.Fill(ds)
            GridView11.DataSource = ds
            GridView11.DataBind()
            GridView11.Columns(1).ItemStyle.Font.Bold = True
            con.Close()

        Catch ex As Exception
            Response.Write(ex.ToString())
        Finally
            con.Close()
        End Try
    End Sub 
```

请任何人帮助我如何使`0`列加粗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:39:52.960

用这个：

```
Dim i As Integer = 0
      For i = 0 To GridView11.Rows.Count - 1
    GridView11.Rows(i).Cells(0).Font.Bold = True
      Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:49:45.433

**使用 RowDataBound 事件：**

```
Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
      e.Row.Cells(0).Font.Bold = True
    End If
End Sub 
```

# c# - 响应中的“Set-Cookie”标题项是否损坏？

> ID：13987534
> 
> 赞同：0
> 
> 时间：2012-12-21T09:33:45.337
> 
> 标签：c#, windows, windows-phone-7

我无法为我解决大问题：

Web 服务器在 WP7 上向客户端发送“Set-Cookie”标头，如下所示：

`.AUTOINDEXAUTH=; expires=Mon, 11-Oct-1999 22:00:00 GMT; path=/; HttpOnly .AUTOINDEXAUTH=EAD9393175E92DDD04C88DDE022A56048FD816971197E1A448C16E80EE551DE1B4ECD91658D72BD6092841C58161D25B56FB81D373D85DB113D8F961DE649ABBAA35753958A210106206C9A172977CA0993FCECCB70D28DAA9928DAD349577BACC119432C8164C68EF9F96B59472651F01CE36357A8CA09213FB37BA16724820C1EF4719E9F7592F8F2F21107C6013C9; path=/; HttpOnly`

`HttpWebResponse.Hedaders`但是在“Set-Cookie”中客户端（）的响应标头中只有这个字符串：

```
.AUTOINDEXAUTH=; expires=Mon, 11-Oct-1999 22:00:00 GMT; path=/; HttpOnly 
```

有没有人知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:37:02.697

具有相同域、名称和路径的两个 cookie 被认为是相等的，并且只使用其中一个值。

见[http://www.ietf.org/rfc/rfc2109.txt](http://www.ietf.org/rfc/rfc2109.txt)（第 4.3.3 章）

# java - Java中的动态数组列表

> ID：13987535
> 
> 赞同：1
> 
> 时间：2012-12-21T09:33:48.507
> 
> 标签：java

我有几行java代码

```
class FileManager
{
    File f = new File("SD.DAT");

    public void wsv(ArrayList<Student> list) throws IOException
    {
        try
        {
            FileOutputStream fos = new FileOutputStream(f);
            ObjectOutputStream oos = new ObjectOutputStream(fos);
            oos.writeObject(list);
            fos.close();
            oos.close();
        }
        catch (FileNotFoundException ex)
        {
            Logger.getLogger(FileManager.class.getName()).log(L evel.SEVERE, null, ex);
        }
    }

    public ArrayList<Student> rsv() throws ClassNotFoundException, IOException
    {
        if (!f.exists())
        {
            return new ArrayList<SinhVien>();
        }

        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(f));
        return (ArrayList<Student>) ois.readObject();
    }
} 
```

我想问：在下面的代码中，什么是：

```
public void wsv(ArrayList<Student> list) 

public ArrayList<Student> rsv() 
```

意思是？

为什么它必须返回`(ArrayList<Student>) ois.readObject();`

我不了解数组，所以我希望你能告诉我。

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:39:25.720

```
public void wsv(ArrayList<Student> list) 
```

This is a method accepting an arrayList as a parameter. The arrayList is a collection of Student objects. So it can be invoked with...

```
List<Student> myList = new ArrayList<Student>();
wsv(myList); 
```

It also has no return value (it's void), consider the method below.

```
public ArrayList<Student> rsv() 
```

This does need to return a value (an ArrayList of type Student), but is invoked with no method parameters. The return is cast from an Object to an ArrayList with...

```
return (ArrayList<Student>) ois.readObject(); 
```

Consider having a quick read of [casting](http://www.java-samples.com/showtutorial.php?tutorialid=1170)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:39:55.917

I assume, the Student class implements the [Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html) interface.

This code is an example for serialization/deserialization. In the method wsv() an [ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html) of Student instances is serialized and written to a file using a FileOutputStream. In the other method rsv() the same file is read , the same file is read (if the file exists), the content is deserialized using an ObjectInputStream, the result is casted to an ArrayList and returned.

See the Javadoc of [Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html) as an introduction to serialization and deserialization of objects.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:40:24.740

第一种方法是::

```
public void wsv(ArrayList list) 
```

从我的角度来看，这里 wsv 表示 Write 。

它将Student的arrayList写入文件

和：：

```
public ArrayList rsv() 
```

表示阅读

它从文件中读取学生的arrayList，如果没有找到返回新的

这是一个对象序列化和反序列化的例子

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:40:34.130

为什么它必须返回`(ArrayList<Student>) ois.readObject();`
因为方法签名是

```
 public ArrayList<Student> rsv() throws ClassNotFoundException, IOException 
```

它期望返回一个 Student 类型的 ArrayList。

```
(ArrayList<Student>) ois.readObject(); 
```

读取一个序列化对象并转换为 Student 类型的 ArrayList，然后从该方法返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T09:52:39.973

它们都是方法签名。第一个表示不返回值的方法，由 表示`void`，并接受并`ArrayList`包含`Student`对象作为它的唯一参数：

```
public void wsv(ArrayList<Student> list) 
```

具有`void`返回类型的方法不需要`return`在方法体中出现语句。

第二个，返回一个`ArrayList`包含`Student`对象并且不接受任何参数的：

```
public ArrayList<Student> rsv() 
```

`public`是一个访问修饰符，它控制方法的可见性，即可以从哪里调用方法。

如果我们分解代码，我们可以看到您为什么需要`(ArrayList<Student>) ois.readObject()`.

`readObject()`返回一个`Object`，这不能从方法中返回，只能`ArrayList<Student>`接受：

```
final Object object = ois.readObject(); 
```

因此我们需要转换对象，例如让它显示为另一种类型：

```
final ArrayList<Student> students = (ArrayList<Student>) object; 
```

现在可以从该方法返回：

```
return students; 
```

在这种情况下，如果我们可以确定读取的对象确实是 type ，我们可以稍微安全地转换`Object`to 。否则，强制转换可能是一种危险的情况，并且在尝试强制转换为不可能的类型时可能会抛出 a，例如：`ArrayList<Student>``ArrayList<Student>``ClassCastException`

```
final String string = (String) ois.readObject(); 
```

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T09:52:40.893

所有剩余的答案都几乎澄清了这个问题。我只是想根据您的陈述添加此内容：

> 我不了解数组，所以我希望你能告诉我。

`array`是相似数据类型的集合。例如： `int num = new int[2];` 创建一个长度为 2 且数据类型为 的数组`int`。

`int`现在您可以用数据填充它。

说：`num[0] = 1, num[1] = 5`

但是数组有固定的长度。

所以我们使用集合来代替。在你的情况下`ArrayList`。

`ArrayList<Student>`意味着它是`Object`s 类型的集合`Student`。

# java - Java 内存：jstat 与 Runtime.getRuntime().freeMemory();

> ID：13987537
> 
> 赞同：3
> 
> 时间：2012-12-21T09:34:08.367
> 
> 标签：java, jakarta-ee, memory, memory-management

我正在运行一个 java 应用程序，我在下面观察到：

通过代码我正在计算内存利用率：

```
long freeMemory = Runtime.getRuntime().freeMemory();
this.memUsage = 100f - (freeMemory*100)/this.maxMemory;
where
instance.maxMemory = Runtime.getRuntime().maxMemory(); 
```

时间戳 S0 S1 E **O** P YGC YGCT FGC FGCT GCT

2849.6 0.00 84.80 93.14 **16.95** 60.00 483 140.140 8 3.649 143.789

首先，我的代码将显示哪个内存。Old、Eden 或 Survivor。我认为 Old..mi rgt ??

在特定时间，我观察到与 jstat 旧内存利用率相比，我的代码给了我不同的输出。像这里 jstat old 显示大约 17% 而我的代码显示 20%。这有什么原因吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:29:33.597

据我所知，运行时内存方法仅报告有关 HEAP 的总数（因此所有值都是 old、eden、survivor 和 Permanent 的总数）。这就是为什么您的值会关闭的原因，因为没有 jstat 输出告诉您总体堆利用率。

需要注意的一件事`Runtime.freeMemory()`是它可能并不完全准确。从方法的javadoc：

*返回当前可用于未来分配对象的内存总量**的近似值，以字节为单位。***

我倾向于不相信从 Runtime 类返回的任何关于内存的值。要么使用 jconsole 或 jstat 之类的外部命令来获取内存统计信息，要么`-Xloggc`在启动 java 程序时使用。这些方法比我见过的任何 API 方法都更可靠地监视内存使用情况。

# iphone - 如何将 SMS.txt 文件导入 iphone ios 6 上的 SMS.db 文件

> ID：13987539
> 
> 赞同：1
> 
> 时间：2012-12-21T09:34:13.873
> 
> 标签：iphone, merge, ios6, sms, extract

我正在尝试将 2 个 sms.db 文件合并到由运行 ios 6.0.1 的 iphone 4S 制成的 2 个单独备份中。

我使用**iBackupBot for iTunes r24 for XP**将旧备份的 sms.db 文件导出到 sms.txt（文本文件）中。现在我需要导入这个文本文件，并附加到新的 sms.db 文件中。我看到的每个帖子都直接从iphone中取出短信或从备份文件中提取，但我没有看到，导入回来（**文本**文件）以与现有的sms.db文件**合并......**

任何连接 2 个 sms.db 文件的解决方案也将不胜感激......

附言。将 sms.db 文件（使用 iBackup）导出到计算机后，我尝试在 WinXP 上使用“ **SQLite Database Browser v.13** ”查看 *.db 文件，但我根本看不到任何数据库项目.. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:42:11.483

尝试做同样的操作，这并不容易。DB格式（iOS5和iOS6）之间有太多差异，请参阅详细信息 - [http://linuxsleuthing.blogspot.ru/2012/10/whos-texting-ios6-smsdb.html](http://linuxsleuthing.blogspot.ru/2012/10/whos-texting-ios6-smsdb.html)

要查看任何数据库，您可以使用这个免费的 Firefox 插件 - [https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:40:25.827

尝试一个名为 Backuptrans iPhone SMS 备份和恢复的程序。

# iphone - 如何在第二个 Tableview 中显示选定的 plist 数据？

> ID：13987544
> 
> 赞同：1
> 
> 时间：2012-12-21T09:34:51.567
> 
> 标签：iphone, xcode, plist, nsuserdefaults

在我的应用程序中，我有两个 Tableview，一个是我的主 Tableview，第二个是我的 Favourit tableview。首先，当我单击 MainTableview 的任何行时，我会在 mainView 中显示我的所有 plist 数据，它会在我的屏幕截图中显示为 Next Class以下
![在此处输入图像描述](../Images/338d5672e3710e35a725fdb7baa8cf18.png)

现在在这个视图中，我有一个 UILabel，它显示了我从主 Tableview 中选择的文本，最重要的是我有 UIButton 添加到收藏夹。我希望当我单击它时保存当前 UIlabel 值，当我转到 favourit tableview 时，我想在那里显示这个值。我尝试使用 NSUserdefualt 保存值，但它对我不起作用，因为它保存最后一个值不保留前一个值的记录。这是我尝试过的代码。

```
 -(IBAction)AddToF
 {
    NSString *str=lblText.text;
[[NSUserDefaults standardUserDefaults] setObject:str forKey:@"preferenceName"];
 } 
```

然后在 Favurit tableview 我得到这些值

```
- (void)viewWillAppear:(BOOL)animated 
 {
     NSString *savedValue = [[NSUserDefaults standardUserDefaults]
                        stringForKey:@"preferenceName"];
[super viewWillAppear:animated];
} 
```

有人可以指导我如何解决它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:41:25.297

将数组存储在 userDefault 中，而不是像下面这样的字符串。

在`AppDelegate.h`文件中只声明变量...

```
NSUserDefaults  *userDefaults;
NSMutableArray *yourArray;
after... 
```

`AppDelegate.m`填入`applicationDidFinishLonching:`法_

```
userDefaults = [NSUserDefaults standardUserDefaults];
NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"yourArray"];
if (dataRepresentingtblArrayForSearch != nil) {
    NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingtblArrayForSearch];
    if (oldSavedArray != nil)
        yourArray = [[NSMutableArray alloc] initWithArray:oldSavedArray];
    else
        yourArray = [[NSMutableArray alloc] init];
} else {
    yourArray = [[NSMutableArray alloc] init];
}
[yourArray retain]; 
```

当您想在此 UserDefaults 中插入数据后使用波纹管代码...

```
[appDelegate.yourArray addObject:yourDataString];///set your value or anything which you want to store here...
NSData *data=[NSKeyedArchiver archivedDataWithRootObject:appDelegate.yourArray];
[appDelegate.userDefaults setObject:data forKey:@"yourArray"];
[appDelegate.userDefaults synchronize]; 
```

当您想创建`AppDelegate`对象时，请使用以下代码..

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

我希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:21:26.297

只需告诉您简单的 3 个步骤。

1 - 从保存的 Plist 文件中读取旧数据

```
NSString *filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSMutableArray *array = [NSArray arrayWithContentsOfFile:filePath];

NSLog(@"fav List = %@", array); 
```

2 - 现在在添加新项目中使用

```
 [array addObject:someItem]; 
```

3 - 将数据保存在 plist 中

```
 [array writeToFile:filePath atomically:YES]; 
```

# java - 如何在java中获取启动文件夹？

> ID：13987545
> 
> 赞同：-3
> 
> 时间：2012-12-21T09:34:52.080
> 
> 标签：java

*嗨..我正在寻找一个可以在java中返回启动文件夹路径的函数希望在windows xp/7/vista上工作*

Windows 中的启动文件夹是其中所有应用程序在登录时启动的文件夹。它应该看起来像这样：

> `C:\Users\USR_NAME\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:36:35.153

这应该这样做：

```
File f = new File(".");
String startupFolder = f.getCanonicalPath(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:39:14.440

You can do this:

```
File file = new File("");
String path = file.getAbsolutePath()); 
```

If you define no path in the `File` constructor, it assumes the current directory.

Did you mean this?

Edit: I guess not. Sorry, if you don't post a clear question, i can't help. You should read [Stackoverflow FAQ](https://stackoverflow.com/faq) and [SSCCE](http://sscce.org/)

# hadoop - 如何将键值数据加载到 hbase 表中？

> ID：13987550
> 
> 赞同：0
> 
> 时间：2012-12-21T09:35:03.327
> 
> 标签：hadoop, hbase, apache-pig, key-value-store, hadoop-partitioning

感谢您对我的问题感兴趣。在开始之前，我想让您知道我对 Hadoop 和 HBase 非常陌生。到目前为止，我发现 Hadoop 非常有趣，并希望在未来做出更多贡献。

我主要对提高 HBase 的性能感兴趣。为此，我创建了一个 hbase 表，并编写了用于将 5000 行数据（*仅由 '!' 分隔的值*）加载到 hbase 表中的 pig 脚本，后来我将这个 h 基表映射到 Hive 表。到目前为止，一切都运行良好......但问题来了，我想加载同时具有键和值的数据（**例如 key1 =12 ！key2= 13**），所以我可以进行什么样的解析选择相应地将键值对数据加载到 h 基表中，还请告诉我行键在 h 基表中的重要性。

我写的猪脚本如下

**A = LOAD '/BULK_ARK_DATA/' 使用 PigStorage('!' ) AS(id: chararray,a: chararray,b: chararray,c: chararray); 使用 org.apache.pig.backend.hadoop.hbase.HBaseStorage ('AF:a AF:b AF:c') 将 A 存储到 'hbase://bulk_ark' 中；**

那么如何在hbase表中加载键值数据？？？？？？请尽快回复我.... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:44:13.863

Hbase 实际上是一个键值对数据存储（其核心是一个映射）。您不必做任何特别的事情，但要好好考虑您的表模式。对于您的特定情况，如何将数据的第一部分作为键，将第二部分作为值。类似“cf:key1=>12”的东西

# iphone - 在 iOS 上使用 box2d 实现台球模拟

> ID：13987551
> 
> 赞同：0
> 
> 时间：2012-12-21T09:35:07.087
> 
> 标签：iphone, ios, box2d

使用此属性：

```
b2FixtureDef ballShapeDef;
    ballShapeDef.shape = &circle;
    ballShapeDef.density = 1.0f;
    ballBodyDef.linearDamping = 1.0f;
    ballBodyDef.bullet = YES;
    ballShapeDef.friction = 1.0f;
    ballShapeDef.restitution = 0.7f;
    ballBodyDef.angularDamping = 3; 
```

我试图在设置为重力（0,0）的世界中模拟一个台球并像这样击球：

```
- (void) applyShot:(float) ang {

    float vx = 10 * cosf(ang);
    float vy = 10 * sinf(ang);

    b2Vec2 velVec = _whiteBall->GetLinearVelocity();
    velVec.x += (vx * 10);
    velVec.y += (vy * 10);

    _whiteBall->SetLinearVelocity(velVec);

} 
```

球的表现确实有点不切实际，因为它在击球后在台面上“滑”得太慢了，没有停下来。

我的桌子边框是静态墙，够了吗？

问候米尔扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:49:30.503

通过直接设置线速度，台球不参与物理模拟。相反，您将要使用

```
_whiteBall->ApplyForce(velVec, _whiteBall->GetWorldCenter()); 
```

或者

```
_whiteBall->ApplyLinearImpulse(velVec, _whiteBall->GetWorldCenter()); 
```

我强烈推荐 iforce2d 关于[线性运动](http://www.iforce2d.net/b2dtut/forces)和[恒速](http://www.iforce2d.net/b2dtut/constant-speed)的教程，以真正了解与 Box2D 物体交互的*正确*方式。

# asp.net-4.0 - ViewStateMode ="disabled" 不禁用所有元素的视图

> ID：13987552
> 
> 赞同：0
> 
> 时间：2012-12-21T09:35:08.787
> 
> 标签：asp.net-4.0, viewstate

我的 Web 应用程序中有一个页面，为了减小 ViewState 大小，我做`ViewStateMode = "false"`了`@Page Directive`

我有Repeater控件并在其中绑定输入复选框，如下所示

```
<asp:Repeater ID="rptChkList" runat="server">
      <ItemTemplate>
            <div class="clear">
                <input type="checkbox" id="chkbox" runat="server" value='<%# Eval("Value")' />
                 <%# Eval("Name")%>
            </div>
      </ItemTemplate>
</asp:Repeater> 
```

虽然我已经在 ViewState中设置`ViewStateMode ="false"`了，但我得到了`DataBoundLiteralControl``HtmlInputCheckBox`

任何人都可以知道如何使其`ViewState`虚假？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:43:45.757

要在页面级别设置禁用 ViewState：

```
EnableViewState="false" 
```

**注意：**页面或控件的 ViewStateMode 属性只有在 EnableViewState 属性设置为 true 时才有效。如果 EnableViewState 属性设置为 false，即使 ViewStateMode 属性设置为 Enabled，视图状态也会关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:40:00.853

您可以设置转发器控件本身的 ViewState 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T16:16:30.463

在页面指令中，您需要具有以下内容：

```
ViewStateMode="Disabled" 
```

要启用特定控件，您需要将其包含在控件中，如下所示：

```
<asp:DropDownList ID="ddlStateList" runat="server" ViewStateMode="Enabled" /> 
```

# android - android中带有中心图像放大的画廊

> ID：13987554
> 
> 赞同：0
> 
> 时间：2012-12-21T09:35:13.280
> 
> 标签：android

我正在使用画廊通过滚动来显示图像。我已经使用`getChildStaticTransformation(View child,Transformation t)`方法将转换应用于每个图像的每个孩子。

但现在我想使用按钮滚动图像。所以我`getChildStaticTransformation`从`onTouch`按钮的事件中调用该方法。但图像并没有移动。

代码如下：-

在我使用过的类的构造函数中，

```
 this.setStaticTransformationsEnabled(true); 
```

所以当我滚动屏幕时，下面的方法会自行触发。但我现在想在按钮单击时使用该方法。我尝试在按钮单击中显式调用此方法，但它不起作用。

```
protected boolean getChildStaticTransformation(View child, Transformation t) {

    final int childCenter = getCenterOfView(child);
    final int childWidth = child.getWidth();
    int rotationAngle = 0;

    t.clear();
    t.setTransformationType(Transformation.TYPE_MATRIX);

    if (childCenter == mCoveflowCenter) {
        transformImageBitmap((ImageView) child, t, 0);
    } else {
        rotationAngle = (int) (((float) (mCoveflowCenter - childCenter) /                           childWidth) * mMaxRotationAngle);
        if (Math.abs(rotationAngle) > mMaxRotationAngle) {
            rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle
                    : mMaxRotationAngle;
        }
        transformImageBitmap((ImageView) child, t, rotationAngle);
    }

    return true;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T09:53:51.697

您是否尝试在类似的方法中调用**invalidate**？每次你想更新一个孩子的静态变换时，你需要在各自的孩子上调用 invalidate() 。如果您在单击按钮时仍然无法通过图像移动，您可以按照这个很好的[示例](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)，这样您就可以基本了解如何通过单击按钮来浏览图像。如果您可以在实际出错的地方发布您的代码片段，那么我的答案可能会被编辑。希望这可以帮助。`getChildStaticTransformation()``child.invalidate();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:06:13.557

我找到了解决方案。我使用了 OnFling Method()。

# search - 如何仅使用标签搜索 liferay 中的内容（而不是在内容中提供关键字时）？

> ID：13987565
> 
> 赞同：1
> 
> 时间：2012-12-21T09:35:39.317
> 
> 标签：search, tags, liferay

我正在使用 Liferay 6.1.1。如何仅使用标签在 Liferay 中搜索内容（当关键字在内容中可用时除外）。当我搜索关键字时，搜索会在标题、内容以及标签中查找关键字所有资产类型。我只想在所有资产类型的标签内搜索关键字。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:49:08.973

最简单的方法是创建一个您自己的搜索 portlet，它从关键字中获取标签 ID 列表，如果您想要完全匹配，则使用 AssetTagLocalServiceUtil.getTags 或带有“like”限制的 dynamicQuery。然后：

```
AssetEntryQuery query = new AssetEntryQuery(); 
long[] tagIds = {array of tag ids obtained};  
query.setAnyTagIds(tagIds);
//OR: query.setAllTagIds(atagIds);
List<AssetEntry> results = AssetEntryLocalServiceUtil.getEntries(query); 
```

否则，您可以尝试使用此处描述的分面搜索： [http ://www.liferay.com/web/raymond.auge/blog/-/blogs/12917352#h.itt7gsmb81v4](http://www.liferay.com/web/raymond.auge/blog/-/blogs/12917352#h.itt7gsmb81v4)

# android - 将数据插入数据库时 出现 SQLiteException

> ID：13987570
> 
> 赞同：0
> 
> 时间：2012-12-21T09:35:57.840
> 
> 标签：android

安卓 2.3.3

```
static String name = "Database";
static int version = 1;

SQLiteDatabase sqlDB;
Cursor c;

public Database(Context context) {
    super(context, name, null, version);
    // TODO Auto-generated constructor stub

    sqlDB = getWritableDatabase();

    }

    @Override
    public void onCreate(SQLiteDatabase sqlDB) {
        // TODO Auto-generated method stub

    sqlDB.execSQL("create table if not exists Operations(Command Text, Pos1 Text, " +
                "Pos2 Text, Pos3 Text, Pos4 Text, Pos5 Text, Pos6 Text, Pos7 Text, Pos8 Text, Pos9 Text, Pos10 Text)");

    }

public void insertData() {
        // TODO Auto-generated method stub

        String addQuery ="ADD, add, and, had, ad, anddd, anndd, null, null, null, null";

                sqlDB.execSQL("insert into Operations values("+ addQuery +")"); 
                     //Exception at the above line
} 
```

共有 11 列。

我可以在数据库中插入 NULL 吗？如果是，我尝试将数据插入数据库的方式有什么问题吗？

这是我得到的错误:::

```
12-21 14:53:29.629: E/AndroidRuntime(11894): Caused by: android.database.sqlite.SQLiteException: near "ADD": syntax error: insert into Operations values(ADD, add, and, had, ad, anddd, anndd, null, null, null, null)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1765)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at com.x.x.Database.insertData(Database.java:71)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at com.x.x.xxx.onCreate(xxx.java:109)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-21 14:53:29.629: E/AndroidRuntime(11894):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
12-21 14:53:29.629: E/AndroidRuntime(11894):    ... 11 more 
```

有人可以帮助我为什么我在语法上遇到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:38:25.537

Strings should be inclused in `''` so change `String addQuery ="ADD, add, and, had, ad, anddd, anndd, null, null, null, null";`

to:

```
String addQuery ="'ADD', 'add', 'and', 'had', 'ad', 'anddd', 'anndd', null, null, null, null"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:59:27.967

```
 //  Possible to Get Error 
    public void insertData() {
            // TODO Auto-generated method stub

            String addQuery ="ADD, add, and, had, ad, anddd, anndd, null, null, null, null";

                    sqlDB.execSQL("insert into Operations values("+ addQuery +")"); 
                         //Exception at the above line
    }

    use Like Below 

    public void insertData() {

    ContentValues cv=new ContentValues();
    cv.put("column1,value);
    cv.put("column2,value);
    cv.put("column3,value);
    cv.put("column4,value);
    cv.put("column5,value);
    cv.put("column7,value);
     database.insert(tabName, SINGLE_colName, cv);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:43:56.350

根据我的说法，您已经定义了一个具有 11 个值的字符串（addQuery），但它将其计为一个。我确定存在问题，这就是您遇到运行时错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:37:59.043

SQL 语法错误，请使用`insert into test(aa,bb) values('ADD','BB')` which aa 是您的字段名，'ADD' 是字符串

# android - Android TableLayout 中的 IllegalStateException

> ID：13987579
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:36:44.907
> 
> 标签：android, web-services

我编写了一个代码来动态创建表格布局和表格行，并从 Web 服务中添加值。它给了我`TargetInvocation`例外。这可能是什么原因？

```
protected void onPostExecute(final ArrayList<DeleteuserDetails>deleteuserDetails) {

        for(int i=0;i<=deleteuserDetails.size();i++){

                TableRow deleteUserRow=new TableRow(Deleteuser.this);
                deleteUserRow.setId(i);
                deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                CheckBox select_id = new CheckBox(Deleteuser.this);
                select_id.setId(i);
                deleteUserRow.addView(select_id);
                deleteuserList[i]=new TextView(Deleteuser.this);
                deleteuserList[i].setId(i);
                deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                deleteUserRow.addView(deleteuserList[i]);
                uName=new TextView(Deleteuser.this);
                uName.setId(i);
                uName.setText(deleteuserDetails.get(i).getUserName());
                deleteUserRow.addView(uName);
                Userrole=new TextView(Deleteuser.this);
                Userrole.setId(i);
                Userrole.setText(deleteuserDetails.get(i).getUserRole());
                deleteUserRow.addView(Userrole);
                CreatedDate=new TextView(Deleteuser.this);
                CreatedDate.setId(i);
                CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                deleteUserRow.addView(CreatedDate);
                CreatedBy=new TextView(Deleteuser.this);
                CreatedBy.setId(i);
                CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                deleteUserRow.addView(CreatedBy);
                userdetailTable.addView(deleteUserRow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                select_id.setTag(i);
                select_id.setOnClickListener(listener);
            }
        TableRow deleteUserRow1=new TableRow(Deleteuser.this);
        deleteUserRow1.setId(100);
        deleteUserRow1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        Button btn_user_delete=new Button(Deleteuser.this);
        btn_user_delete.setText("Delete");
        deleteUserRow1.addView(btn_user_delete);
        btn_user_delete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new DeleteUserid().execute(checkedValue);
            }
        });

    } 
```

`IllegalStateException`在线上升

```
 userdetailTable.addView(deleteUserRow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

**LOGCAT**

```
12-21 15:05:44.630: E/AndroidRuntime(644): java.lang.NullPointerException
12-21 15:05:44.630: E/AndroidRuntime(644):  at com.mvss.admin.Deleteuser$deteUserIdLoad.onPostExecute(Deleteuser.java:123)
12-21 15:05:44.630: E/AndroidRuntime(644):  at com.mvss.admin.Deleteuser$deteUserIdLoad.onPostExecute(Deleteuser.java:1)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.os.AsyncTask.finish(AsyncTask.java:417)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.os.Looper.loop(Looper.java:123)
12-21 15:05:44.630: E/AndroidRuntime(644):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-21 15:05:44.630: E/AndroidRuntime(644):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 15:05:44.630: E/AndroidRuntime(644):  at java.lang.reflect.Method.invoke(Method.java:521)
12-21 15:05:44.630: E/AndroidRuntime(644):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-21 15:05:44.630: E/AndroidRuntime(644):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-21 15:05:44.630: E/AndroidRuntime(644):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:40:52.190

您是否在代码中初始化数组`deleteuserList`....

`for`您需要在循环之前调用以下行...

```
deleteuserList = new TextView[deleteuserDetails.size()]; 
```

# javascript - 使用 jquery 和 javascript 水平滑动 div

> ID：13987580
> 
> 赞同：5
> 
> 时间：2012-12-21T09:36:45.390
> 
> 标签：javascript, jquery, html, css

我试图在我的关于我们页面中显示我的推荐。在那里，我使用 3`divs`和水平样式来一次显示 3 个推荐。

在这里，我想要做的是我想添加一些带有查询的滑动效果以消失 1st 3 `divs`，然后需要加载 2nd 3`divs`和不同的推荐。等等..我做了HTML和CSS ..但不知道如何用查询来做......任何人都可以帮助我做到这一点..???

```
<div class="testimonials">
    <div class="cols">
        contents...1st time                    
    </div>
    <div class="cols">
        contents...1st time       
    </div>
    <div class="cols">
        contents...1st time       
    </div>

    <div class="cols">
        contents...2st time                    
    </div>
    <div class="cols">
        contents...2st time       
    </div>
    <div class="cols">
        contents...2st time       
    </div>

</div>

.testimonials {
    width: 640px; 
    height: 300px;
    //background: red; 
}

.cols {
    width: 150px;
    height: 200px;
    margin: 0 20px 0 0;
    background: gray;
    float: left;
} 
```

任何意见，任何想法都非常感谢...

谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:39:58.313

这是一个很棒的 jQuery carousel 插件

[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)

**Github：** [https ://github.com/jsor/jcarousel](https://github.com/jsor/jcarousel)

或者

**Github：** [https ://github.com/SSilence/simple.carousel](https://github.com/SSilence/simple.carousel)

在此处查看**jsFiddle**演示：http: [//jsfiddle.net/enve/GWhaz/](http://jsfiddle.net/enve/GWhaz/)

前三个`<li>`首先显示，其他三个在 2000 秒后显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:55:48.157

试试这个，轻量级的 javascript jQuery 库： [http ://baijs.nl/tinycarousel/](http://baijs.nl/tinycarousel/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:51:16.603

像这样的东西？[http://jsfiddle.net/gZkUV/1/](http://jsfiddle.net/gZkUV/1/)

```
$('#id').show('slide', {direction: 'right'}, 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:52:44.170

如果您确实想使用 jquery，请使用已经在社区中构建并存在的东西。这将比您从头开始创建的任何东西更安全和灵活。使用类似 `coin slider`or的东西`jquery cycle plugin`。他们有一些关于你应用插件的 html 标记的细节。遵循它，你就完成了。

# javascript - 1个悬停有2种不同的效果？

> ID：13987584
> 
> 赞同：0
> 
> 时间：2012-12-21T09:36:53.807
> 
> 标签：javascript, html

我正在尝试调整以下代码，以便当我将鼠标悬停在现有图像上时，不仅该图像会更改，而且还会更改站点上不同位置的图像。

这就是我正在使用的（带有一些相应的javascript）......

```
<figcaption class="content"><a class="typeB" href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image1','','../graphics/life2.jpg',1)"><img src="../graphics/life1.jpg" width="300" height="25" id="Image1"/></a>
</figcaption> 
```

所以，上面的代码说当悬停在“life2.jpg”上时要改变，将它改为“life1.jpg”......但我也想添加，这样悬停在“life2.jpg”上也会改变“life4.jpg” ”到“life3.jpg”。

非常感谢你！:)

C*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:58:16.430

使用以下所有操作调用 javascript：

```
<!DOCTYPE html>
<html>
<head>

<script>
function MM_swapImage(){ 
    document.getElementById("Image1").src = Image1.src.replace("http://bit.ly/12DYRi4", "http://bit.ly/T4xkFG");
    document.getElementById("Image2").src = Image2.src.replace("http://bit.ly/12DYRi4", "http://bit.ly/T4xkFG");   
}

function MM_swapImgRestore(){  
    document.getElementById("Image1").src = Image1.src.replace("http://bit.ly/T4xkFG", "http://bit.ly/12DYRi4");
    document.getElementById("Image2").src = Image2.src.replace("http://bit.ly/T4xkFG", "http://bit.ly/12DYRi4"); 
}
</script>

<head>  
<body>

<figcaption class="content">
       <a class="typeB" href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage()">
           <img src="http://bit.ly/12DYRi4" width="50" height="50" id="Image1"/>
       </a>
       <br><br>
       <img src="http://bit.ly/12DYRi4" width="50" height="50" id="Image2"/>
</figcaption>

</body>
</html> 
```

您可以在 jsfiddle 上看到它的实际效果：http: [//jsfiddle.net/EW4ZZ/2/](http://jsfiddle.net/EW4ZZ/2/)

这应该让你开始。

# jquery - jQuery defaultDate

> ID：13987586
> 
> 赞同：0
> 
> 时间：2012-12-21T09:37:01.787
> 
> 标签：jquery

我阅读了有关所有 defaultDate 的先前帖子，但由于某种原因，有些东西不起作用。

```
 $(function(){     
        $('#datepicker').datepicker({  
            inline: true,  
            showOtherMonths: true,  
            dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],  
            dateFormat: 'dd/mm/yy',
            defaultDate: new Date(2000,01,01) 
        });
    }); 
```

即使它会做一些事情，它也不会在输入中放入任何东西，它是默认值而不是现在。

当我尝试时：

```
$(function(){ 
var currentDate = new Date();  

    $('#datepicker').datepicker({  
        inline: true,  
        showOtherMonths: true,  
        dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],  
        dateFormat: 'dd/mm/yy',

    });
    $("#datepicker").datepicker("setDate",currentDate); 
}); 
```

该页面加载日期选择器已经打开（好像我点击它），甚至没有在正确的位置。

更新及解决方案：谢谢大家，在阅读了所有版本的ui的所有实现之后，我在css中找到了一个解决方法： `.ui-datepicker { width: 17em; padding: .2em .2em 0; display: none; }`

# c# - 将 ListControl 与 DataTable 绑定的常用方法

> ID：13987587
> 
> 赞同：0
> 
> 时间：2012-12-21T09:37:03.920
> 
> 标签：c#

嗨，今天的问候。我想编写一个通用方法来将数据绑定到任何带有 DataTable 的 ListControl，我编写了以下代码。但是当我将代码放在 app_code 文件夹中的一个类中以在所有页面中访问时，我无法执行。

请让我知道编码的优化方式以及在 app_code 类或 BAL（类库）中编写这些方法的位置。

```
public void BindListControlWithDatatable(ListControl objListControl, DataTable dtDataTable, string dataTextField, string dataValueField, int displaySelect)
    {
        try
        {
            if (dtDataTable.Rows.Count > 0)
            {
                objListControl.Items.Clear();
                objListControl.DataSource = dtDataTable;
                objListControl.DataTextField = dataTextField;
                objListControl.DataValueField = dataValueField;
                objListControl.DataBind();
                if (displaySelect == 1)
                {
                    objListControl.Items.Insert(0, new ListItem("Select", "0"));
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:03:44.603

在 VS 2010 中，每当创建**App_Code**文件夹时，都会发生以下更改：

```
1\. myClass will have the namespace as "myNamespace.App_Code"
2\. myClass properties --> Build Action --> Content (which will disable intellisense) 
```

不知道为什么会这样，但我曾经通过执行以下操作来解决它们：

```
1\. Renaming "myNamespace.App_Code" to "myNamespace"
2\. myClass properties --> Build Action --> Compile 
```

除了以上几点，

尝试将您的方法的访问说明符设置为`public`访问您的公共代码。（假设你没有这样做）

# email - 使用 VBS 发送带有嵌入图像的 Outlook 电子邮件

> ID：13987588
> 
> 赞同：4
> 
> 时间：2012-12-21T09:37:10.560
> 
> 标签：email, vbscript, outlook, html-email, outlook-2007

我目前正在使用以下 VBS 脚本发送电子邮件，它工作正常，但是图像作为附件发送。相反，我想将图像嵌入到电子邮件中。我知道我必须在电子邮件的 HTML 正文中引用附件，但我很难做到这一点。

有什么建议么？

```
Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
MyTime = Now

ToAddress = "email@address.com"
MessageSubject = "Auto Stats " & MyTime
MessageBody = "Stats Attached" & vbCrLf & "Produced at " & MyTime
MessageAttachment = "P:\stats.png"
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T09:45:54.813

使用下面的代码

```
Const PR_ATTACH_MIME_TAG = "http://schemas.microsoft.com/mapi/proptag/0x370E001E"
Const PR_ATTACH_CONTENT_ID = "http://schemas.microsoft.com/mapi/proptag/0x3712001E"
Const PR_ATTACHMENT_HIDDEN = "http://schemas.microsoft.com/mapi/proptag/0x7FFE000B"

Sub testing2()
Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
Dim realAttachment
MyTime = Now

ToAddress = "testing@address.com"
MessageSubject = "Auto Stats " & MyTime
MessageBody = "Stats Attached" & vbCrLf & "Produced at " & MyTime
MessageAttachment = "C:\Users\Public\Pictures\Sample Pictures\Penguins.jpg"
Set ns = Outlook.GetNamespace("MAPI")
Set newMail = Outlook.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody
newMail.Recipients.Add (ToAddress)
Set realAttachment = newMail.Attachments.Add(MessageAttachment)
Set oPA = realAttachment.PropertyAccessor
oPA.SetProperty PR_ATTACH_MIME_TAG, "image/jpeg"
oPA.SetProperty PR_ATTACH_CONTENT_ID, "myident" 'change myident for another other image
newMail.HTMLBody = newMail.HTMLBody & "<IMG align=baseline border=0 hspace=0 src=cid:myident>" 'need to match the "myident" above
newMail.Send
End Sub 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-14T23:14:43.410

我在 Outlook 2003 和 2016 中对此进行了测试

```
 'I do have a solution, and that is to convert the Body to HTML
Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
MyTime = Now

ToAddress = "email@address.com"
MessageSubject = "Auto Stats " & MyTime
' The trick is to convert all the message body into HTML
' Don't mix script text and HTML. Then simply add an HTML image reference.
' Remember if the recipient can't get to the image
' it won't appear in the email body, and will be blank. So don't use a local image. 
' Use an recipient reachable image.
MessageBody = "<html>Stats Attached" & "<p>Produced at  " & MyTime & _
      "<p><img src=""http://somedomain.com/.../stats.png""></html><br>"
'MessageAttachment = "P:\stats.png" ! Now Uneccessary 
Set ol = CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.htmlBody = MessageBody 'Changed the newmMail.Body to newMail.htmlBody
newMail.RecipIents.Add(ToAddress)
'newMail.Attachments.Add(MessageAttachment) !This was removed because it would just appear as email attachment
newMail.Display 
```

# php - PHP过滤被禁词的文本

> ID：13987590
> 
> 赞同：6
> 
> 时间：2012-12-21T09:37:19.547
> 
> 标签：php, regex, preg-replace

我们有一个 C2C 网站，我们不鼓励在我们的网站上销售品牌产品。**我们已经建立了一个包含Nike**和**D&G**等品牌词的数据库，并制作了一种算法，可以过滤这些词的产品信息，如果包含这些词，则禁用产品。

我们当前的算法从提供的文本中删除所有空格和特殊字符，并将文本与数据库中的单词匹配。这些情况需要被算法捕获并被有效捕获：

*   我是耐克世界
*   我有耐克鞋
*   我有耐克鞋
*   我卖手机壳
*   我卖 iphone 外壳
*   你可以有iphone

现在的问题是它还捕获了以下问题：

*   rapid服装厂（D&G）
*   rosNIK Electronics（耐克）

可以做些什么来防止这种错误匹配，同时保持捕捉真实案例的效率？

**编辑**

下面是那些更了解代码的人的代码：

```
$orignal_txt = preg_replace('/&.{0,}?;/', '', (strip_tags($orignal_txt)));
$orignal_txt_nospace = preg_replace('/\W/', '', $orignal_txt);
{
    $qry_kws = array("nike", "iphone", "d&g");
    foreach($qry_kws as $rs_kw)
    {       
        $no_space_db_kw = preg_replace('/\W/', '', $rs_kw);
        if(stristr($orignal_txt_nospace, $rs_kw))
        {
            $ipr_banned_keywords[] = strtolower($rs_kw);
        }
        else if(stristr($orignal_txt_nospace, $no_space_db_kw))
        {
                $ipr_banned_keywords[] = strtolower($rs_kw);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:03:05.503

只是在玩......（不要在生产中使用）

```
$data = array(
        "i am nike world",
        "i have n ikee shoes",
        "i have nikeeshoes",
        "i sell i-phone casings",
        "i sell iphone-casings",
        "you can have iphone",
        "rapiD Garment factor",
        "rosNIK Electronics",
        "Buy you self N I K E",
        "B*U*Y I*P*H*O*N*E BABY",
        "My Phone Is not available");

$ban = array("nike","d&g","iphone"); 
```

**示例 1：**

```
$filter = new BrandFilterIterator($data);
$filter->parseBan($ban);
foreach ( $filter as $word ) {
    echo $word, PHP_EOL;
} 
```

**输出 1**

```
rapiD Garment factor
rosNIK Electronics
My Phone Is not available 
```

**示例 2**

```
$filter = new BrandFilterIterator($data,true); //reverse filter
$filter->parseBan($ban);
foreach ( $filter as $word ) {
    echo $word, " " , json_encode($word->getBan()) ,  PHP_EOL;
} 
```

**输出 2**

```
i am nike world ["nike"]
i have n ikee shoes ["nike"]
i have nikeeshoes ["nike"]
i sell i-phone casings ["iphone"]
i sell iphone-casings ["iphone"]
you can have iphone ["iphone"]
Buy you self N I K E ["nike"]
B*U*Y I*P*H*O*N*E BABY ["iphone"] 
```

使用的类

```
class BrandFilterIterator extends FilterIterator {
    private $words = array();
    private $reverse = false;

    function __construct(array $words, $reverse = false) {
        $this->reverse = $reverse;
        foreach ( $words as $word ) {
            $this->words[] = new Word($word);
        }
        parent::__construct(new ArrayIterator($this->words));
    }

    function parseBan(array $ban) {
        foreach ( $ban as $item ) {
            foreach ( $this->words as $word ) {
                $word->checkMetrix($item);
            }
        }
    }

    public function accept() {
        if ($this->reverse) {
            return $this->getInnerIterator()->current()->accept() ? false : true;
        }
        return $this->getInnerIterator()->current()->accept();
    }
}

class Word {
    private $ban = array();
    private $word;
    private $parts;
    private $accept = true;

    function __construct($word) {
        $this->word = $word;
        $this->parts = explode(" ", $word);
    }

    function __toString() {
        return $this->word;
    }

    function getTrim() {
        return preg_replace('/\W/', '', $this->word);
    }

    function accept() {
        return $this->accept;
    }

    function getBan() {
        return array_unique($this->ban);
    }

    function reject($ban = null) {
        $ban === null or $this->ban[] = $ban;
        $this->accept = false;
        return $this->accept;
    }

    function checkMetrix($ban) {
        foreach ( $this->parts as $part ) {
            $part = strtolower($part);
            $ban = strtolower($ban);
            $t = ceil(strlen(strtolower($ban)) / strlen($part) * 100);
            $s = similar_text($part, $ban, $p);
            $l = levenshtein($part, $part);
            if (ceil($p) >= $t || ($t == 100 && $p >= 75 && $l == 0)) {
                $this->reject($ban);
            }
        }
        // Detect Bad Use of space
        if (ceil(strlen($this->getTrim()) / strlen($this->word) * 100) < 75) {
            if (stripos($this->getTrim(), $ban) !== false) {
                $this->reject($ban);
            }
        }
        return $this->accept;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T09:39:28.433

Simple, do the brand match before you remove spaces/special characters. Then it won't match these weird edge cases.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T10:09:08.387

您已经知道这一点，但值得明确指出：您当前的算法完全不适合这项任务。它甚至无法处理简单的情况，更不用说人们故意试图通过您的过滤器的情况。你只能用你当前的过滤器做一件事，那就是把它完全扔掉——它不能工作。

虽然我们在这里不讨论猥亵过滤器，但它几乎是同一类概念，因此建议您阅读一些由猥亵过滤器犯下的最严重错误。

*   [http://www.telegraph.co.uk/news/newstopics/howaboutthat/2667634/The-Clbuttic-Mistake-When-obscenity-filters-go-wrong.html](http://www.telegraph.co.uk/news/newstopics/howaboutthat/2667634/The-Clbuttic-Mistake-When-obscenity-filters-go-wrong.html)

*   [http://en.wikipedia.org/wiki/Scunthorpe_problem](http://en.wikipedia.org/wiki/Scunthorpe_problem)

这些文章主要处理误报——即过滤器对不应该匹配的内容进行匹配，从而阻止合法条目。这种事情可能会非常具有破坏性，因为它会使您的客户感到不安，并且如果这种情况经常发生，它将使人们远离您的网站。自然语言的复杂性使其几乎不可避免。

您还需要注意假阴性。这些是您的过滤器无法拾取它应该拾取的东西的地方。您的问题是垃圾邮件发送者拥有大量通过过滤器的技术。您当前的过滤器很容易通过，但即使是最先进的过滤器也可以被击败 - 检查您的收件箱中有多少垃圾邮件以证明这一点。而且他们一直在改变他们的技术，所以从长远来看，静态算法根本行不通。

贝叶斯过滤器似乎是您的最佳解决方案。这些过滤器可以随时学习。您需要密切关注它们并训练它们识别需要过滤的内容，因此设置起来会有些工作，但我怀疑您是否会以任何其他方式获得可行的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:46:11.577

这里只是一个想法。

你为什么不先进行匹配，如果它击中“品牌”过滤器，它会被放入审查队列中供你接受/拒绝，突出显示匹配以便于发现。

人类将能够几乎立即准确地发现品牌是否被使用。你甚至可以把它变成机器学习，谁知道呢:)

话虽如此，这**不是正则表达式**问题，也不能用漂亮的表达式来解决；系统需要训练，记住命中（增加信心）并从失误中学习。

# javascript - 从表格单元格中添加值

> ID：13987593
> 
> 赞同：1
> 
> 时间：2012-12-21T09:37:26.123
> 
> 标签：javascript, jquery

我有一个带有数字值的表格，它是它的单元格。

我的目标是通过单击表格单元格并获取它们的值，但在我随意单击时将它们相加。它应该跟踪总和并将其显示在单独的`div`.

我编写了处理单击的代码`td`并添加了一个类，除其他外，更改背景颜色是必要的，以便用户可以看到他到目前为止所单击的内容。因为类是动态添加的，所以我使用`live()`.

然后我想即时检查`td`具有新类（称为`selecting`）并将它们加起来。

这是我到目前为止的代码，但是，首先它不会将它们相加，而是一个接一个地附加，而且顺序也很奇怪：

```
$(document).ready(function() {
    total = '';

    $('td').click(function() {
        $(this).toggleClass('selecting');
        $('.selecting').live( {
            click: function() {
                if ($('td').hasClass('selecting')) {
                    total += $(this).html();
                }
            }
        })
        $('#feedback').text(total);
    });
}) 
```

随后的步骤是，再次`td`单击被单击的单元格时，总和将减去再次单击的单元格的值。因此，如果新单击，则添加，如果再次单击，则减去，但这就像第二步，对我来说太难了，无法先完成所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:43:35.897

```
total += +$(this).text(); 
```

将一个字符串添加到另一个字符串时，您正在*连接*. 如果要*添加*，则需要使用数字。将`+`字符串更改为数字。

此外，更改`total = '';`为`total = 0;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:49:53.877

试试这个：

```
$('td').click(function() {
    var $td = $(this);
    var total = 0;
    $td.toggleClass('selecting');

    $(".selecting").each(function() {
       total += parseInt($(this).text(), 10);
    });

    $('#feedback span').text(total);
}); 
```

[**示例小提琴**](http://jsfiddle.net/QE3sE/)

您将在代码中看到，对于每次点击，它都会完全重新计算总数，这消除了在两次点击之间存储总数的需要，以便您可以减去点击的值。它使逻辑更简单。

另外我`live()`首先删除了，因为`live()`现在已弃用且不应使用，其次是因为您不需要使用它。

# java - 如何删除 NetBeans 中自动生成的注释？(// NOI18N)

> ID：13987597
> 
> 赞同：2
> 
> 时间：2012-12-21T09:37:38.667
> 
> 标签：java, swing, netbeans

我有一个用 Java Swing 编写的应用程序，我使用的是 NetBeans 7.2.1。在生成的代码中有很多自动生成的注释 //NOI18N。

不幸的是，我在定义这个人的模板中找不到。

有人知道如何从生成的代码中删除此注释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:23:13.440

**这种控制机制是 NetbeansIDE 国际化的一部分**，而不是任何模板给定的。

您可以按照以下步骤自定义这些自动注释：

*   查看属性表：

![查看属性表](../Images/7d7db0a61b3c4adc06b3abd6c5a4265d.png)

*   取消选择自动国际化

![取消选择自动国际化](../Images/529f918e5d3bbdfda90f91d0763a3d30.png)

*   重新加载表格

![重新加载表格](../Images/7a89fae61a998a2e762c67e156f10587.png)

*您还可以通过打开内部 netbeans 帮助并搜索关键字“自动国际化”来获取更多信息*

# iphone - UIView 的弹性拖动，就像从 UITableView 顶部拖动一样

> ID：13987598
> 
> 赞同：1
> 
> 时间：2012-12-21T09:37:42.100
> 
> 标签：iphone, ios, uigesturerecognizer

我试图找出拖动视图的逻辑，然后在拖动到某个点时以指数方式减慢速度。我有点让它工作了，虽然有车而且有点hacky。我想知道是否有更好的公式可以代替`newPosition = (-kDeleteViewWidth + (point.x * 0.2));`

完整的手势代码如下。

```
// kDeleteViewWidth is defined as 80.0f
UIPanGestureRecognizer *gesture = (UIPanGestureRecognizer *)sender;
CGPoint point = [gesture translationInView:self];

if ([gesture state] == UIGestureRecognizerStateBegan)
    _initialPosition = _topView.frame.origin;

if ([gesture state] == UIGestureRecognizerStateChanged)
{

    // Hacky Elastic method
    float newPosition = _initialPosition.x + point.x;
    if (point.x < -kDeleteViewWidth)
        newPosition = (-kDeleteViewWidth + (point.x * 0.2));
    [_topView setFrame:CGRectMake(newPosition, 0, self.contentView.frame.size.width, self.contentView.frame.size.height)];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:23:02.410

为了完整起见，这是我使用的代码：

```
- (void)swipeCell:(id)sender
{
    UIPanGestureRecognizer *gesture = (UIPanGestureRecognizer *)sender;
    CGPoint point = [gesture translationInView:self];

    if ([gesture state] == UIGestureRecognizerStateBegan)
    {
        // CGPoint initialPosition
        _initialPosition = _topView.frame.origin;
    }

    if ([gesture state] == UIGestureRecognizerStateChanged)
    {

        // Hacky Elastic method
        float newPosition = _initialPosition.x + point.x;

        // Starting point
        if (_initialPosition.x == 0)
        {
            // Once we get to our pre-defined kDeleteViewWidth, start dividing by 5
            if (_topView.frame.origin.x < -kDeleteViewWidth) {
                float distance = (point.x - -kDeleteViewWidth);
                float newDistance = distance / 5;
                newPosition = (-kDeleteViewWidth + newDistance);
            }

            else if (_topView.frame.origin.x > 0)
            {
                float distance = point.x;
                float newDistance = distance / 5;
                newPosition = newDistance;
            }
        }

        else if (_topView.frame.origin.x < -kDeleteViewWidth)
        {
            float distance = point.x;
            float newDistance = distance / 5;
            newPosition = (-kDeleteViewWidth + newDistance);
        }

        else if (_topView.frame.origin.x > 0)
        {
            float distance = point.x + _initialPosition.x;
            float newDistance = distance / 5;
            newPosition = newDistance;
        }

        [_topView setFrame:CGRectMake(newPosition, 0, self.contentView.frame.size.width, self.contentView.frame.size.height)];
    }

    if ([gesture state] == UIGestureRecognizerStateEnded || [gesture state] == UIGestureRecognizerStateCancelled) {

        // If we have scrolled over a 1/3 of the way to kDeleteViewWidth, move to kDeleteViewWidth
        if (point.x < -(kDeleteViewWidth / 3)) {
            [UIView animateWithDuration:kAnimationDuration animations:^{
                [_topView setFrame:CGRectMake(-kDeleteViewWidth, 0, self.contentView.frame.size.width, self.contentView.frame.size.height)];
            }];
            _isSwiped = YES;
        }

        // Otherwise animation back to 0
        else  {
            [UIView animateWithDuration:kAnimationDuration animations:^{
                [_topView setFrame:CGRectMake(0, 0, self.contentView.frame.size.width, self.contentView.frame.size.height)];
            } completion:^(BOOL finished) {
                [self removeShadow];
            }];
            _isSwiped = NO;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:51:50.337

这是一个[不错的示例项目](https://github.com/crocodella/PullableView)可用。

链接：[https ://github.com/crocodella/PullableView](https://github.com/crocodella/PullableView)

快乐编码！

# android - 在 Android 上：如何从（我的文件）或 /mnt/sdcard 中选择一个 xml 文件

> ID：13987599
> 
> 赞同：0
> 
> 时间：2012-12-21T09:37:42.740
> 
> 标签：android, xml

> **可能重复：**
> [从 sdcard 读取 .xml 文件](https://stackoverflow.com/questions/9260454/reading-an-xml-file-from-sdcard)

我正在开发一个 Android 应用程序，并希望允许用户从本地设备上传 XML 文件。我想让用户浏览从 /sdcard 开始的设备文件。你能帮我这样做吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:07:30.003

我猜你正在寻找文件选择器。[这是android](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/)
中一个简单的文件选择器的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:52:06.853

```
 private File path = new File(Environment.getExternalStorageDirectory() + "");

    private void loadFileList() {
            try {

                path.mkdirs();
            } catch (SecurityException e) {
                Log.e(TAG, "unable to write on the sd card ");
            }
            if (path.exists()) {
                FilenameFilter filter = new FilenameFilter() {
                    @Override
                    public boolean accept(File dir, String fn) {
                        File sel = new File(dir, fn);
                        if (sel.isDirectory() && !sel.isHidden()) {
                            int jjj = sel.list().length;
                            if (jjj >= 1)
                                return true;
                            else
                                return false;
                        } else if (sel.isFile() && !sel.isHidden()) {
                            boolean b = fn.endsWith(".xml");
                            return b;

                        } else {
                            return false;
                        }

                    }
                };

                String[] fList = path.list(filter);
                fileList = new Item[fList.length];
                for (int i = 0; i < fList.length; i++) {

                    fileList[i] = new Item(fList[i], R.drawable.file_icon);

                    File sel = new File(path, fList[i]);

                    if (sel.isDirectory()) {
                        fileList[i].icon = R.drawable.directory_icon;
                        Log.d("DIRECTORY", fileList[i].file);
                    } else {
                        Log.d("FILE", fileList[i].file);

                    }
                }

                if (!firstLvl) {
                    Item temp[] = new Item[fileList.length + 1];
                    for (int i = 0; i < fileList.length; i++) {
                        temp[i + 1] = fileList[i];
                    }
                    temp[0] = new Item("Up", R.drawable.directory_up);
                    fileList = temp;
                }
            } else {
                Log.e(TAG, "path does not exist");
            }

            adapter = new ArrayAdapter<Item>(this,
                    android.R.layout.select_dialog_item, android.R.id.text1,
                    fileList) {
                @Override
                public View getView(int position, View convertView, ViewGroup parent) {

                    // creates view
                    View view = super.getView(position, convertView, parent);

                    TextView textView = (TextView) view
                            .findViewById(android.R.id.text1);

                    // put the image on the text view

                    textView.setCompoundDrawablesWithIntrinsicBounds(
                            fileList[position].icon, 0, 0, 0);

                    // add margin between image and text (support various screen
                    // densities)
                    int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
                    textView.setCompoundDrawablePadding(dp5);

                    return view;
                }
            };

        }

// Don't Forget To Add Permission for SD Card 
```

# php - birthday remainder program in php

> ID：13987606
> 
> 赞同：-2
> 
> 时间：2012-12-21T09:38:08.323
> 
> 标签：php

Birthday alert before 1 week. How to check current date with birthday date? My database is MySQL

```
<?php

$birthday_query = $link->query("SELECT u.u_username, u.u_birthday
FROM ".TBL_PREFIX."users u
WHERE u.u_banned = '0'
AND u_confirmed = '1'
AND u_birthday LIKE '" . $link->asf_escape(sprintf('%2d-%2d-', $now['mday'], $now['mon'])) . "%'
ORDER BY u_username ASC");

?> 
```

Its not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:47:28.117

使用 mysql `NOW`&`+ INTERVAL 7 DAY`获取从现在起 1 周后的日期，`DATE_FORMAT`用于指定 u_birthday 的格式

尝试这个...

```
$birthday_query = $link->query("SELECT u.u_username, u.u_birthday
                                FROM ".TBL_PREFIX."users u
                                WHERE u.u_banned = '0'
                                        AND u_confirmed = '1'
                                        AND u_birthday = DATE_FORMAT(NOW(), '%Y-%m-%d') + INTERVAL 7 DAY
                                      ORDER BY u_username ASC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:52:10.210

尝试这个：

```
"SELECT * 
FROM your_tbl 
WHERE (DATE_ADD(YOUR_DATE, INTERVAL -7 DAY)) = " DATE(); //Your php current date 
```

# c++ - Qt in separate thread gives :First-chance exception at 0x74f2c41f infoo .exe: 0x000006A6: The binding handle is invalid

> ID：13987610
> 
> 赞同：2
> 
> 时间：2012-12-21T09:38:40.277
> 
> 标签：c++, qt, runtime-error

i try to run QObject inhereted class called "Dispatcher" that is using QtWebKit functions in separate thread.
then the main GUI thread , but when i init the object im getting :

```
First-chance exception at 0x74f2c41f infoo .exe: 0x000006A6: The binding handle is invalid 
```

and the Signal and Slots in the object doesn't work , they do return true but never invoked. i guess it related some how to the error i see . according to the internet i need to start the new thread like this :

```
CollectorWorker* pCollectorWorker = new CollectorWorker(pUrlStack,m_pSettings);
pCollectorWorker->moveToThread( QApplication::instance()->thread());
QCoreApplication::postEvent(pCollectorWorker, new QEvent( QEvent::User ) ); 
```

where CollectorWorker is the separate thread object that init the Dispatcher class. when i init the Dispatcher class im getting this error.

## CollectorWorker.cpp

```
bool CollectorWorker::event( QEvent *ev )
{   
    if( ev->type() == QEvent::User )
    {
      Dispatcher dispatcher; // here im getting the error.
      return true;
    }
return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:30:19.530

`0x000006A6`代表`RPC_S_INVALID_BINDING`

来自[http://blogs.msdn.com/b/greggm/archive/2006/01/04/509243.aspx](http://blogs.msdn.com/b/greggm/archive/2006/01/04/509243.aspx)

> 解释“绑定句柄无效”
> 
> 今天，我想尝试更深入地了解一些人使用 VS 2005 调试器报告的“绑定句柄无效”问题。
> 
> 首先，如果您只关心如何解决问题：启用“终端服务”服务并重新启动。如果您想了解更多，请继续阅读。
> 
> 终端服务服务
> 
> 我看到许多用户说“我不想启用终端服务服务，因为它存在安全风险”。虽然我当然理解这种恐惧，但这源于对终端服务服务提供的内容的误解。
> 
> 启用终端服务服务不会自动启用远程桌面。如果要禁用远程桌面，请取消选中“我的电脑”属性对话框的“远程”选项卡上的远程桌面复选框。默认情况下，远程桌面在 Window XP 上被禁用，因此除非您已经启用它，否则它应该已经在您的计算机上被禁用。
> 
> 那么，为什么默认启用此服务？终端服务服务默认启用，因为除了远程桌面功能外，它还提供远程协助、快速用户切换、进程列表、DCOM 支持，以及许多其他我不知道的东西，因为我不知道不要在 TS 团队工作。如果您在禁用终端服务服务的情况下运行，那么您正在运行一个奇怪且不推荐的配置。您还有一个损坏的任务管理器，可能还有很多其他直接或间接依赖此服务的东西。
> 
> 因此，无论您想用 Visual Studio 做什么，都请不要禁用此服务。

# javascript - Don't seen jspTrack div on jsscrollpane

> ID：13987611
> 
> 赞同：1
> 
> 时间：2012-12-21T09:38:44.800
> 
> 标签：javascript, jquery, jquery-jscrollpane

I'm using `jscrollPane` jQuery plugin. When I add:

```
$(function () {
    $('#myDiv-1').jScrollPane();
}); 
```

The code works, but when I do this:

```
$(function () {
    $('#myDiv-1 ').jScrollPane();
    $('#myDiv-2 ').jScrollPane();
}); 
```

`myDiv-1` is OK, but I can not get `jspTrack` div on `myDiv-2`. So, don't working. What's my problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:32:22.880

空格或您的代码似乎没有任何问题。你可以试试：

```
$(function () {
    $('#myDiv-1, #myDiv-2').jScrollPane();
}); 
```

或者您可以尝试将两个 div 添加一个名为*scroll-pane*的类并匹配多个元素，例如；

[http://jscrollpane.kelvinluck.com/less_basic.html](http://jscrollpane.kelvinluck.com/less_basic.html)

```
$('.scroll-pane').jScrollPane(); 
```

但我怀疑这些例子是否会起作用/改变任何东西。你能发布一些你的代码吗？

# javascript - Can't reproduce XSS on my website?

> ID：13987612
> 
> 赞同：1
> 
> 时间：2012-12-21T09:38:45.283
> 
> 标签：javascript, html, xss

I'm trying to test for vulnerabilities in my website. There is a textbox in which I enter the value as follows:

`Dummy" /><script>document.alert('XSS Vulnerable');</script><input title="DummyAgain`

so that the HTML formed after submitting the form would be

`<input name="customerName" size="16" value="Dummy" /><script>document.alert('XSS Vulnerable');</script><input title="DummyAgain" type="text">`

But even though, the HTML formed is correct, the javascript does not execute and inspecting the element in firefox/chrome shows the value of the textbox to be exactly the same as I entered!

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:06:13.603

如果你运行这个：

```
document.alert('XSS Vulnerable'); 
```

...您收到此错误消息：

> TypeError：document.alert 不是函数

发生这种情况是因为[`alert()`是`window`对象](https://developer.mozilla.org/en-US/docs/DOM/window.alert)的方法，而不是`document`对象。

您也可以省略该对象，它将默认为`window`：

```
alert('XSS Vulnerable'); 
```

**更新：**重现代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title></title>
</head>
<body>

<input name="customerName" size="16" value="Dummy" /><script>window.alert('XSS Vulnerable');</script><input title="DummyAgain" type="text">

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:41:45.723

为了使该代码能够导致 XSS 问题，`"`无法替换`&quot;`为您的示例输出中的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:46:02.397

好的，伙计们..我只是在检查 Firefox 和 Chrome 中的 Inspect 元素功能，假设这个和查看源是相同的......当我查看源时，我看到的值为`Dummy&quot; /&gt;&lt;script&gt;alert(&#39;XSS Vulnerable&#39;);&lt;/script&gt;&lt;input type=&quot;text`.

抱歉没查源就打扰各位了！谢谢@昆汀...

# javascript - 在 textareas / WYSIHTML5 编辑器上放置事件

> ID：13987613
> 
> 赞同：0
> 
> 时间：2012-12-21T09:38:52.693
> 
> 标签：javascript, html, wysihtml5

知道如何收听/挂钩 WYSIHTML5 编辑器的拖放事件吗？

我想要的是......我有 wysihtml5 和用户上传的图像（如附件中所示），当我将其中一个图像拖放到 wysihtml5 时，它会插入它（我想这只是一个浏览器的默认功能，就像您将任何链接拖动到任何文本区域/文本输入时一样），但与源图像具有相同的 src，这就是缩略图分辨率，我宁愿想要更大的东西。所以我想我会连接一个放置事件并从缩略图的 data-big-src 属性中获取图像源。

我试过

```
editor.on("drop", function() {
  console.log("fsdf"); 
}); 
```

其中编辑器是 wysihtml5 的实例，也尝试将侦听器添加到原始文本区域，但都没有工作/触发，有什么提示吗？

![在此处输入图像描述](../Images/427deb74102a70170ab83fd5a60db79d.png)

// 编辑粘贴/粘贴：作曲家

可能是我正在寻找的，但它不会返回丢弃的对象....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:54:53.790

因此，即使有粘贴事件，我也无能为力，所以我不得不绕开，这意味着改变 dom.observe(element, pasteEvents, function()) 函数的内部，特别是我必须做的是

改变

```
if (dataTransfer && browser.supportsDataTransfer()) 
```

到

```
if (dataTransfer && browser.supportsDataTransfer() || dataTransfer && $(dataTransfer.getData("text/html")).is("img")) 
```

因为显然 firefox 向 browser.supportsDataTransfer() 函数返回 false

然后将 if(data) 内部更改为

```
 if (data) {
    if ($(data).is("img")) {
        event.preventDefault();
        var _myImgElement = $(data);

        that.commands.exec("insertImage", _myImgElement.data("src"));
    } else {

        element.focus();
        that.commands.exec("insertHTML", data);
        that.parent.fire("paste").fire("paste:composer");
        event.stopPropagation();
        event.preventDefault();
    }
  } else {
    setTimeout(function() {
      that.parent.fire("paste").fire("paste:composer");
    }, 0);
  }

}); 
```

在其中我测试插入的元素是否实际上是图像，然后获取它的 data-src 属性，其中包含我的全尺寸图像的 url，然后执行 insertImage 命令。

虽然它非常笨重，当我将 wysihtml5 更新到最新版本等时它会中断，我们可以为此提供某种 api 吗？或者已经存在了，我没弄明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T07:02:17.200

试试这个

```
$($('.wysihtml5-sandbox').contents().find('body')).on("drop", function(event) {
              event.preventDefault();  
              event.stopPropagation();
               var dt = event.originalEvent.dataTransfer;
                        var files = dt.files;

              var reader = new FileReader();
              reader.onload = function (e) {
                    debugger;
                  var data = this.result;
                  vm.composer.commands.exec('insertImage',e.target.result);
              }
              reader.readAsDataURL( files[0] );
          }); 
```

[https://jsfiddle.net/surajmahajan007/2yu456nw/](https://jsfiddle.net/surajmahajan007/2yu456nw/)

# r - ezANOVA: 1) how to omit na data? 2) still getting error message after omitting na data?

> ID：13987615
> 
> 赞同：2
> 
> 时间：2012-12-21T01:47:33.827
> 
> 标签：r, dataset, missing-data, na

For my repeated measures analysis using `lme` function I could omit not-available (`na`) data with the command: `na.action=na.omit`.

```
anova_lme_loc<-lme(data=rm1, fixed=Nmin~location*date, random=~1|subject,
                   na.action=na.omit) 
```

However, when I try to do the same using the ezANOVA function I got the following notification:

```
anova_ez_loc=ezANOVA(data=rm1, dv=Nmin, wid=subject, within=date, 
                     between=location, na.action=na.omit) 
```

> Error in ezANOVA(data = rm1, dv = Nmin, wid = subject, within = date, : unused argument(s) (na.action = na.omit)

how can I omit my na data in `ezANOVA`? - solved using:

```
rm1_na <- na.omit(rm1) 
```

but now I get the following error:

> anova_ez_loc=ezANOVA(data=rm1_na, dv=Nmin, wid=subject, within=date, between=location)
> 
> Warning: Converting "subject" to factor for ANOVA.
> 
> Warning: Data is unbalanced (unequal N per group). Make sure you specified a well-considered value for the type argument to ezANOVA().
> 
> Error in ezANOVA_main(data = data, dv = dv, wid = wid, within = within, : One or more cells is missing data. Try using ezDesign() to check your data.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:12:19.500

`ezANOVA` doesn't handle missing data, as the author outlines in [this reponse](https://groups.google.com/d/msg/ez4r/YcDXZiyXRJ0/vuZLMeXL50sJ) to a similar question. You have two options:

1.  Remove the missing data manually. The function `complete.cases` may be of help here.
2.  Mike Lawrence alternatively suggests checking out `ezMixed` from the same package, which is more complicated but can handle missing data.

To remove the data manually, you would do something like this:

```
rm1.complete <- rm1[complete.cases(rm1),] 
```

Then use `rm1.complete` in your analysis.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T10:15:48.753

补充@Jonathan Christensen 的回答：

使用主体内因素时，`complete.cases`它不起作用，因为它按行考虑案例，而您需要删除包含不完整案例 ID 的所有行。

这是一个小脚本，它扩展`complete.cases`到一个名为的自定义函数`complete.cases.within`，它为您完成所有工作：

```
if(!require(tidyverse)) install.packages("tidyverse"); library(tidyverse) #useful package for clean code

#helper function that returns ALL indices of matches of x in table instead of just the first one
#we need this to get all rows containing the ID of incomplete cases.
matchAll = function(x, table, nomatch=NA_integer_, incomparables=NULL) {
  which(!is.na(match(table, x, nomatch, incomparables)))
}

complete.cases.within = function(data, dv, wid) {
  incomplete = data %>% select(dv) %>% complete.cases() %>% !. #boolean vector containing incomplete rows
  toRemove = data %>% select(wid) %>% filter(incomplete) %>% .[,1] %>% unique() #all IDs containing incomplete rows
  positions = matchAll(toRemove, data[,wid])
  return(if (length(positions)==0) data else data[-positions,]) #drop all rows matching toRemove IDs
} 
```

# python - Web Crawler HTTP Error 403:Forbidden

> ID：13987624
> 
> 赞同：3
> 
> 时间：2012-12-21T09:39:26.237
> 
> 标签：python, web-crawler, http-error

I am a newbie trying to write a script of a web spider. I want to go to a page, enter a data in a textbox, go to the next page by clicking the submit button and retrieve all data on the new page, *iteratively*.

The following is the code I am trying:

```
import urllib
import urllib2
import string
import sys
from BeautifulSoup import BeautifulSoup

hdr = {'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11','Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3','Accept-Encoding': 'none','Accept-Language': 'en-US,en;q=0.8','Connection': 'keep-alive'}
values = {'query' : '5ed10c844ed4266a18d34e2ba06b381a' }
data = urllib.urlencode(values)
request = urllib2.Request("https://www.virustotal.com/#search", data, headers=hdr)
response = urllib2.urlopen(request)
the_page = response.read()
pool = BeautifulSoup(the_page)

print pool 
```

The following is the error:

```
Traceback (most recent call last):
File "C:\Users\Dipanshu\Desktop\webscraping_demo.py", line 19, in <module>
response = urllib2.urlopen(request)
File "C:\Python27\lib\urllib2.py", line 126, in urlopen
return _opener.open(url, data, timeout)
File "C:\Python27\lib\urllib2.py", line 406, in open
response = meth(req, response)
File "C:\Python27\lib\urllib2.py", line 519, in http_response
'http', request, response, code, msg, hdrs)
File "C:\Python27\lib\urllib2.py", line 444, in error
return self._call_chain(*args)
File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
result = func(*args)
File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 403: Forbidden 
```

How can I solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-21T23:07:07.890

```
from bs4 import BeautifulSoup
import urllib.request

user_agent = 'Mozilla/5.0'
headers = {'User-Agent': user_agent }
target_url = 'https://www.google.co.kr/search?q=cat&source=lnms&tbm=isch&sa=X&ved=0ahUKEwjtrZCg7uXbAhVaUd4KHc2HDgIQ_AUICygC&biw=1375&bih=842'

request = urllib.request.Request( url=target_url, headers=headers )
req = urllib.request.urlopen(request)
soup = BeautifulSoup(req.read(), 'html.parser') 
```

target_url ：谷歌搜索网页“猫”

“标题”将帮助您完成 Forbidden 错误。这段代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:42:14.927

据我了解，您的`request`参数设置不正确，并且（可能）将您的蜘蛛驱动到您不应该查看的页面。

[该用户遇到了类似的问题，但通过修改标题修复了它](https://stackoverflow.com/questions/13303449/urllib2-httperror-http-error-403-forbidden)。

# c - strcmp：行内的字段

> ID：13987627
> 
> 赞同：0
> 
> 时间：2012-12-21T09:39:30.837
> 
> 标签：c, pointers, kernighan-and-ritchie

我正在编写一个 strcmp 版本，它可以选择仅根据空格和字母数字字符（目录顺序）比较字符串，也可以选择不区分大小写（Kernighan 和 Ritchie 第 121 页 5-16）。所以我想出了以下内容：

```
int strcmpdf (char* s, char* t)
{
    char a[100];
    char b[100];
    int i;
    int j;
    i = j = 0;
    if (directory){ /*compares strings solely on the basis of alphanumeric/space characters*/
        for (   ; *s != '\0'; s++)
            if (isalnum(*s) || isspace (*s) || *s == '\t' || *s == '\n')
                a[i++] = (fold && islower(*s))? toupper(*s) : *s;
        a[i] = '\0';
        for (   ; *t != '\0'; t++)
            if (isalnum(*t) || isspace (*t) || *t == '\t' || *t == '\n')
                b[j++] = (fold && islower(*t))? toupper(*t) : *t;
        b[j] = '\0';
        return strcmp(a,b);
    }else if (fold && !directory){/*folds upper and lower cases together*/
        for (   ; toupper(*s) == toupper(*t); s++,t++)
            if (*s == '\0')
                return 0;
        return toupper(*s) - toupper(*t);
    }else
        return strcmp(s,t);
} 
```

这很好用并回答了问题，但是当我开始使用 char 指针而不是数组时问题就开始了。当我初始化 char* a 和 char* b，而不是数组 a 和 b，并在第 11 和 12 行将 a[i++] 替换为 *a++ 并在第 15 和 16 行将 b[j++] 替换为 *b++ 时，我得到分段错误。当 a+i 是 a[i] 的地址时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:58:48.850

当你声明一个数组如'char a[100]'时，它会在栈上分配100个字符（字节），'a'指向第一个字符。

当你声明一个像'char *a'这样的指针时，它最初并不指向任何有效的东西。在它引用有效的东西之前，您不能将任何东西分配给 '*a'。

你可以做的是这样的：

```
char aa[100];
char *a = aa;

*a = '\0'; 
```

（当我开始学习 C 时，我自己也犯了类似的错误，并且也出现了段错误）。

# javascript - Ext JS 4.1.3：使用 Ext.Ajax.request 返回值

> ID：13987628
> 
> 赞同：1
> 
> 时间：2012-12-21T09:39:35.747
> 
> 标签：javascript, ajax, extjs, extjs4.1

这可能是一个愚蠢的问题，但我一直在努力处理我的 Ext JS 4.1.3 应用程序中的以下代码：

```
getInvestmentFee_Percentage : function() {
    var rVal = 0;

    Ext.Ajax.request({ 
        url : 'index.php/ajax/getcountryinvestmentfeepercentage/', 
        success : function(transport, json) {
             try {
                  var JSONResponse = Ext.JSON.decode(transport.responseText);
             } catch (e) {
                  return false;
             }

             if(JSONResponse.success == true || JSONResponse.success == "true") {
                  var investTax = 1+parseFloat(JSONResponse.results[0].constantValue);
                  console.log(investTax);
                  // TODO Return investTax
                  return investTax;
             } else {
                  return false;
             }
        },
        failure : function(transport, json) {
            return false;
        }
   });

    return rVal;
} 
```

我正在尝试写入`rVal`变量，但由于`Ext.Ajax.request`是不同的对象，它不会这样做。如何返回值以在 AJAX 请求之外使用？我当然可以写入全局变量，但我怀疑这是正确的方法。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:01:16.977

您根本不能这样做，因为在调用or回调方法`getInvestmentFee_Percentage`之前遗嘱（可能）已经退出，但无论如何它们都在不同的范围内。`success``failure`

所以只有（a）回调方法能够返回一个值，但这将（最常见）在回调方法的范围内完成。当然，您可以在当前函数中定义回调方法，但都是一样的，您的方法将退出。

我想你应该在这里重新考虑你的实现。

*   `getInvestmentFee_Percentage`一种方法可能是使用订阅者调用的自定义事件
*   或者调用者`getInvestmentFee_Percentage`发送一个回调（如果需要一个范围）作为参数，然后您可以使用

两者都会起作用。

# node.js - 温斯顿：如何更改时间戳格式

> ID：13987631
> 
> 赞同：31
> 
> 时间：2012-12-21T09:39:50.213
> 
> 标签：node.js, winston

我正在使用 winston 在 node.js 中添加日志详细信息，我使用以下过程添加日志

```
 var winston = require('winston');         
 winston.remove(winston.transports.Console);
 winston.add(winston.transports.Console, {'timestamp':true,'colorize':true);
 winston.log('info','jjjj'); 
```

我得到的输出是

```
2012-12-21T09:32:05.428Z - info: jjjj 
```

我需要为 mytimestamp 指定格式，winston 中是否有任何规定，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-21T12:21:42.990

时间戳选项可以是一个函数，它返回您希望将其保存为...

第 4 行：

```
winston.add(winston.transports.Console, {'timestamp':function() {return '111111111'; },'colorize':true}); 
```

来源：[https ://github.com/flatiron/winston/pull/120](https://github.com/flatiron/winston/pull/120)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-07-27T08:11:40.680

温斯顿@3 版本

```
winston.createLogger({
  format: winston.format.combine(
    winston.format.timestamp({format: 'YYYY-MM-DD HH:mm:ss'}),
    winston.format.prettyPrint()
  ),
  transports: [
    new winston.transports.Console()
  ]
}) 
```

要支持时区，您需要更改`format`为 winston 将调用的函数。

```
const timezoned = () => {
  return new Date().toLocaleString('en-US', {
    timeZone: 'Asia/Shanghai'
  });
};

const logger = createLogger({
  format: combine(
    timestamp({
      format: timezonedTime
    })
  ),
  transport: [
    new transports.Console(),
  ]
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-29T07:49:44.857

为了获得好的结果，您可以使用[`momentjs`](https://www.npmjs.com/package/moment)：

```
const moment = require('moment');
...
...
timestamp: () => moment().format('YYYY-MM-DD hh:mm:ss') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-19T02:39:45.843

要更改 winston 日志格式中的**时间戳格式**，我们可以将*字符串或返回字符串*作为参数的`winston.format.timestamp(format)`函数传递给带格式参数的函数。此外，我们可以使用 combine 函数自定义日志格式

```
 const LOG_FORMAT = WINSTON.format.combine(
    WINSTON.format.align(),
    WINSTON.format.timestamp({format:'DD-MM-YYYY T hh:mm:ss.sss A'}),

    WINSTON.format.printf(({ level, message, timestamp, label }) => {
        return `[ ${level.toUpperCase()} | ${timestamp} | LOG:${message} ]`;
    })
)
    const APP_LOGGER = WINSTON.createLogger({
    format: LOG_FORMAT,
    transports: [
        new WINSTON.transports.Console(),
        new WINSTON.transports.File({
            filename: './logs/app.log'
        })
    ]
}) 
```

# android - 我无法从 Java Mail Api 发送 Yahoo Mail

> ID：13987638
> 
> 赞同：8
> 
> 时间：2012-12-21T09:40:04.690
> 
> 标签：android, email, jakarta-mail, yahoo

我正在使用以下代码在 Yahoo 上发送电子邮件：-

```
 Properties   props1 = new Properties();
    EmailAuthenticator authenticator = new EmailAuthenticator(account);

        props1.setProperty("mail.transport.protocol", "smtps");
        props1.setProperty("mail.host", "smtp.mail.yahoo.com");
        props1.put("mail.smtp.auth", "true");
        props1.put("mail.smtp.port", "587");
           props1.put("mail.smtp.starttls.enable", "true");
        smtpSession = Session.getInstance(props1, authenticator);
              smtpSession.setDebug(true); 
```

但是我`javax.mail.MessagingException [EOF]` 从过去 5 天开始就面临这个问题我的 LogCat 是：---

```
 Message-ID:<1082699080.2.1356082481793.JavaMail.javamailuser@localhost>
Subject: Hello
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
554 Transaction failed : Cannot send message due to possible abuse; please visit http://postmaster.yahoo.com/abuse_smtp.html for more information
 DEBUG SMTP: got response code 554, with response: 554 Transaction failed : Cannot send message due to possible abuse; please visit http://postmaster.yahoo.com/abuse_smtp.html for more information
RSET
DEBUG SMTP: EOF: [EOF]
javax.mail.MessagingException: [EOF]
com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:1481)
 com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1512)
 com.sun.mail.smtp.SMTPTransport.finishData(SMTPTransport.java:1321)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:637)
   javax.mail.Transport.send0(Transport.java:189)
    javax.mail.Transport.send(Transport.java:118)
   com.privymo.javamail.EmailManager.sendMail(EmailManager.java:203) 
```

请帮忙谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:50:38.357

错误回溯显示您收到 SMTP 错误消息：

> 554 交易失败：由于可能滥用而无法发送消息；请访问[http://postmaster.yahoo.com/abuse_smtp.html](http://postmaster.yahoo.com/abuse_smtp.html)了解更多信息

虽然那个特定的雅虎！页面无法访问，从消息中可以清楚地看出 Yahoo! 怀疑您的邮件可能是垃圾邮件并拒绝发送。雅虎中的一个[线程！邮件帮助社区](http://help.yahoo.com/communities/index?page=forums&topic=3962b963f8074e0c8e9817753735d2f6)建议联系[Yahoo! 邮寄客户服务](http://io.help.yahoo.com/contact/index?locale=en_US&y=PROD_MAIL&page=contact)以获取更多信息和帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:49:59.990

你有雅虎！邮件加号帐户？

来自 JavaMail[常见问题解答](http://www.oracle.com/technetwork/java/faq-135477.html#yahoomail)：

`"Note that free Yahoo! Mail accounts do not allow POP3 or SMTP access. You must purchase a Yahoo! Mail Plus account to get POP3 and SMTP access."`

# php - 即使在系统关闭后，这是否可以保持登录我的网站

> ID：13987652
> 
> 赞同：1
> 
> 时间：2012-12-21T09:40:58.797
> 
> 标签：php, cookies

我对记住我的功能有疑问。

系统关闭后用户打开网站时是否可以保持登录状态。

例如，现在我在登录后在我的网站上工作，突然系统关闭了。再次打开我的系统，系统是否使用我的用户名保持登录状态。

我搜索自己以存储记住我的功能，以便在我的系统中存储 cookie。但我没有得到任何明确的解决方案。任何人都知道如何为此功能编写代码。你能帮我解决这个记住我的功能问题吗

```
<?php 
include("classes.php");
$jeob = new EF_Sql();

    $email= $_POST['userid'];

    $password= $_POST['password1'];

    $papas=base64_encode($password);

    $check = $_POST['rememberme'];

        $tablename="user_record";

    $select_qry = $jeob->SqlQuery("SELECT * FROM ".$jeob->dbprefix.$tablename." WHERE email ='$email' AND password ='$papas' AND active_link='1' ");

        if($jeob->SqlRows($select_qry) == "0"){                 

         echo "Invalid Username and Password";

        } else {

        if($check) {

setcookie("username", $email, time() + 3600);       // Sets the cookie username

        }

        $getuser = $jeob->SqlFetch($select_qry);

        $_SESSION['userid'] = $getuser['user_id'];  

        $_SESSION['oauth_provider'] = "normal";

        $_SESSION['email'] = $getuser['email'];     

        }
?> 
```

上面的编码用于我的网站。但即使在浏览器关闭并再次打开该站点后，它仍保持登录状态。但是在系统关闭后它会被销毁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:45:53.680

Cookies 不关心您的系统是否关闭。

有几件事：

1.  您的系统关闭时间超过一个小时。您的 cookie 设置为一小时后过期`setcookie("username", $email, time() + 3600);`。如果您希望它“持久”，您当然可以将其延长至数周（或更长）。
2.  您正在使用 Internet Explorer 并在没有“干净”关闭浏览器的情况下关闭。Internet Explorer 在“粗略”关闭后倾向于忘记事情。

但是，您的代码存在一个安全问题，即仅存储自动登录的用户名有点不安全。任何人都可以简单地创建一个包含管理电子邮件地址的“用户名”cookie，并以他们的身份登录。有时处理 remember_me 的方式是生成一个“自动登录令牌”，这将是一个随机散列，分配给数据库中的该用户，然后存储在 cookie 中。这个哈希可以每隔几天失效一次，以便能够阻止严重旧登录的发生或劫持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:46:05.607

好吧，我通常会看到人们设置了加密的身份验证 cookie。如果该 cookie 在 10 天内仍然有效，您可以使用它来验证用户身份，即使会话已过期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:43:13.557

**session / cookie**
确保，您实际上正在使用 cookie。您的代码段显示了一些`$_SESSION`内容，但没有提示使用了存储的 cookie。

**cookie 过期**
cookie 仅存储一小时，请参阅`time() + 3600`。3600 代表秒数，即您的 cookie 的有效期。也许这就是问题所在。您可以将此时间段延长到某些天或几周，这很常见。

**浏览器设置**
此外，您的浏览器可能有一个奇怪的 cookie 设置，因此它会在关闭时删除所有 cookie。也许用另一个浏览器检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:47:56.667

Cookie 是保存在浏览器中的用户会话的最佳解决方案。每次用户发送 HTTP 请求时，cookie 都会随请求一起发送。您的应用程序可以通过读取 cookie 中的信息来识别用户。

您可以根据需要选择 cookie 的年龄。

# solr - solr 3.6.1 嵌套查询

> ID：13987654
> 
> 赞同：0
> 
> 时间：2012-12-21T09:41:12.050
> 
> 标签：solr

我有一种情况，我需要查找搜索确切短语 + 其他单词的查询结果，例如，如果我有一个关键字，例如：

*明天早上“怎么样”*

应获取的结果应符合以下条件：

*   包含确切的短语*how about*。
*   含*明天*字。
*   含字*早上*。

谁能向我解释如何做到这一点？我试过了：

```
q=exactText:"how+about" AND content:tomorrow+morning
q=exactText:"how+about" AND _query_:"{!dismax qf=content pf=content v=$qq}"&qq=tomorrow+morning 
```

但我得到的结果：

1.  文件总是包含短语*how about* plus *tomorrow*。
2.  文档总是包含短语*how about* plus *morning*。
3.  文档总是包含短语*how about* plus *tomorrow*和*morning*。

正确的结果应该只是数字 3。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:56:14.477

尝试查询：

```
exactText:"how+about" AND content:tomorrow AND content:morning 
```

# c++ - 将 boost::bind 与包含 boost::mutex 的类一起使用

> ID：13987655
> 
> 赞同：0
> 
> 时间：2012-12-21T09:41:17.203
> 
> 标签：c++, boost-thread, boost-bind, boost-mutex

我正在使用 watchdir 将项目添加到内部集合的服务器上工作。watchdir 由这样创建的线程定期浏览：

```
this->watchDirThread = new boost::thread(boost::bind(&Filesystem::watchDirThreadLoop,
                                                      this,
                                                      this->watchDir,
                                                      fileFoundCallback)); 
```

该`fileFoundCallback`参数也通过以下方式创建`boost::bind`：

```
boost::bind(&Collection::addFile, this->collection, _1) 
```

我想使用互斥锁保护我的集合免受并发访问，但我的问题是`boost::mutex`该类是不可复制的，因此我的类中不能有互斥锁，`Collection`因为`boost::bind`需要可复制的参数。

我不喜欢静态互斥锁的想法，因为它在语义上是错误的，因为这里互斥锁的作用是防止我的集合在被修改时被读取。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:49:57.560

在互斥体周围使用[std::ref 或 std::cref 。](http://en.cppreference.com/w/cpp/utility/functional/ref)也就是说，而不是：

```
boost::mutex yourmutex;
boost::bind(..., yourmutex, ...); 
```

写：

```
boost::mutex yourmutex;
boost::bind(..., std::ref(yourmutex), ...); 
```

# c# - WCF Rest 服务在通过 https 访问链接时抛出 http 错误 404，但使用 http 工作得很好

> ID：13987656
> 
> 赞同：1
> 
> 时间：2012-12-21T09:41:23.507
> 
> 标签：c#, .net, wcf, iis-6

我有一个托管在 IIS 6.0（.NET 框架 4）中的 WCF REST 服务。JAVA 服务正在调用此服务。现在，当 Java 服务通过 http 访问此服务时，它可以正常工作，但是使用 https 调用的时间则返回错误 404

*“描述：HTTP 404。您正在寻找的资源（或其依赖项之一）可能已被删除”*

我已验证 SSL 证书已安装，并且在 IIS 中托管的其他两个服务似乎不受影响。

现在我检查了我是否能够通过 https 域访问 .svc 文件。HTTPS:.......服务别名/service.svc <-- 这很好用

当在服务内部调用方法时会发生此问题。HTTPS:.......服务别名/service.svc/服务方法名 <-- 抛出错误

现在我在另一台服务器上检查它使用 https 可以正常工作。所以我的猜测是代码没有太大问题。那么你们能告诉我是否有我遗漏的东西吗？我也需要此服务在此服务器上的 https 上运行。

该服务通过 POST 进行通信，而其他两个似乎不受影响的服务使用 GET。不确定这是否有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:51:15.113

听起来您的 web.config 中缺少某些内容。您将需要更改默认端点以支持加密或创建一个新端点。

```
<system.serviceModel>
    <bindings>
        <webHttpBinding>
            <binding>
                <security mode="Transport" />
            </binding>
        </webHttpBinding>
    </bindings>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T05:07:35.073

如果您收到 404，则它与证书或 https 无关。只需检查该方法是否配置正确，即`[WebInvoke]`在您的服务合同中是否正确提及了方法名称。

# java - ClassNotFoundException: org.hibernate.hql.internal.ast.HqlToken 即使在添加了 classic.ClassicQueryTranslatorFactory

> ID：13987662
> 
> 赞同：2
> 
> 时间：2012-12-21T09:41:46.977
> 
> 标签：java, spring, hibernate, jpa, weblogic11g

> **可能重复：**
> [org.hibernate.HibernateException：无法实例化 QueryTranslatorFactory：org.hibernate.hql.classic.ClassicQueryTransactionFactory](https://stackoverflow.com/questions/5582478/org-hibernate-hibernateexception-could-not-instantiate-querytranslatorfactory)

我正在使用 Hibernate 4、Spring 3 和 JSF 2.0。在运行 jsf 页面时，我得到了

```
org.hibernate.QueryException: ClassNotFoundException: 
org.hibernate.hql.internal.ast.HqlToken [select generatedAlias0 from 
net.test.model.Request as generatedAlias0] 
```

我在 applicationContext.xml 的休眠属性下已经有了以下内容

```
<prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.
ClassicQueryTranslatorFactory
                </prop> 
```

请注意，我添加了`org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean`and `org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter`，我怀疑添加后我又得到了`org.hibernate.QueryException: ClassNotFoundException`

我的问题是什么相当于`ClassicQueryTranslatorFactory`弹簧属性？如果没有这样的属性，我怎么能解决这个问题？

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <!-- Spring view scope customized -->

    <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
        <property name="scopes">
            <map>
                <entry key="view">
                    <bean class="org.primefaces.spring.scope.ViewScope" />
                </entry>
            </map>
        </property>
    </bean>
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->
    <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="oracle.jdbc" />
        <property name="jdbcUrl"
            value="jdbc:oracle:thin:@server:1521:orcl" />
        <property name="user" value="scott" />
        <property name="password" value="tiger" />
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" />
    </bean>
      <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>
    <!-- JPA Entity Manager Factory -->
    <bean id="entityManagerFactory" 
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"> 
         <property name="dataSource" ref="DataSource" />
         <property name="packagesToScan" value="net.test.model" />

         <property name="jpaVendorAdapter">      
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">  
      <property name="showSql" value="false" />
         <property name="generateDdl" value="false" />
         <property name="databasePlatform" value="${jdbc.dialectClass}" />            
       </bean>
   </property>         
      </bean> 
      <bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" />        
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.model.Request</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory
                </prop>
            </props>
        </property>
    </bean>
    <!-- Enable the configuration of transactional behavior based on annotations 
    <tx:annotation-driven transaction-manager="txManager" />-->
    <!-- Transaction Manager is defined 
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>-->

     <!-- Transaction Config -->
    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager">
          <property name="entityManagerFactory" ref="entityManagerFactory" />
          </bean>   

          <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>         

    <tx:annotation-driven transaction-manager="transactionManager"/>  
    <tx:annotation-driven transaction-manager="txManager"/>             

     <context:annotation-config/>

    <bean id="hibernateStatisticsMBean" class="org.hibernate.jmx.StatisticsService">
        <property name="statisticsEnabled" value="true" />
        <property name="sessionFactory" value="#{entityManagerFactory.sessionFactory}" />
    </bean>
    <bean name="ehCacheManagerMBean"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />

    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean>

    <bean id="jmxExporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="server" ref="mbeanServer" />
        <property name="registrationBehaviorName" value="REGISTRATION_REPLACE_EXISTING"/>
        <property name="beans">
            <map>               
                <entry key="SpringBeans:name=hibernateStatisticsMBean" value-ref="hibernateStatisticsMBean" />
                <entry key="SpringBeans:name=ehCacheManagerMBean" value-ref="ehCacheManagerMBean" />
            </map>
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T03:58:24.820

通过执行以下操作已解决此问题

使用`antlr 2.7.6`与 Hibernate 兼容的版本，在`setDomainEnv.cmd`

```
set CLASSPATH=\maven\repo\antlr\antlr\2.7.6\antlr-2.7.6.jar;%CLASSPATH% 
```

更多信息[在这里](http://devwebcl.blogspot.in/2011/10/orghibernatequeryexception.html)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:25:16.683

通过在部分内添加行来编辑**modules/org/antlr/main/module.xml**。这个问题必须解决。`<module name="org.hibernate" optional="true"/>``<dependencies>`

谢谢你。

# c++ - 使用移动语义对源函数和接收函数进行签名

> ID：13987663
> 
> 赞同：3
> 
> 时间：2012-12-21T09:42:02.150
> 
> 标签：c++, c++11, move-semantics

在编写源函数和接收函数时，我应该使用哪些签名来从移动语义中受益，为什么？

```
T source();
sink(T);

// or

T&& source();
sink(T&&); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:15:03.457

好吧，`T&& source()`考虑到源创建并返回一个新对象，这绝对是垃圾。不要从函数返回对局部变量的引用，此规则适用于右值引用，因为它始终适用于左值引用。

使用`sink(T&&)`是一个品味问题。*它看起来*并不那么干净和流线型，但另一方面，它更明确地强调了函数的接收器性质，并使移动成为强制性，即使对于也可能被复制的类型也是如此。但是，如果无论如何`T`都应该是不可复制的类型（如`std::unique_ptr`），我更喜欢`sink(T)`，因为它看起来更干净，并且无论如何移动都由类型的不可复制性质明确说明。

但无论如何，您将在所有情况下受益于移动语义，这是它们的优势之一，它们可以很好地集成到现有代码中。So `T t = source();`will move, as will `sink(std::move(t));`, 无论哪个签名`sink`都有。只是这`sink(T)`并不能阻止您使用`sink(t);`而不是`sink(std::move(t));`可复制类型来调用它，这反过来又不会使用移动语义。但这是一个完全不同的问题，因为`std::move`在适当的时候使用应该是一个尽快学会的习语，无论如何。

**编辑：**确实，对于`sink(T)`不能有效移动的类型（使用基于值的实现的类型，即 ie `std::array`），这并不能很好地发挥作用，因为它需要一个（右值）引用可能会做的副本。甚至对于完全不移动的可移动类型仍然比移动更快（尽管这应该可以忽略不计）。但话又说回来，我认为，源和汇首先不能很好地与值实现类型配合使用。无论如何，在这种情况下`T source()`，在性能方面并不是一个好主意（但也不能`T&& source()`像上面描述的那样被替换）。

# android - 我的平板电脑因为我的申请而死机或等待太久？

> ID：13987664
> 
> 赞同：0
> 
> 时间：2012-12-21T09:42:04.063
> 
> 标签：android, android-asynctask

我写了一个项目。它包括 web 服务、sqlite 和后台服务。在我以前的版本中它是好的。然后我做一些 asycn 任务和线程。然后我的客户说当我运行你的项目时它几乎冻结或等待太很长。程序问它没有响应等待或强制关闭。我不知道为什么，但有人可以给我一些建议吗？我不知道我必须在哪里寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:49:00.113

它可以是 - `SocketTimeOutException`，当你发送请求并等待太多响应时。包装你的请求`try{...}catch(...)`

之后放置断点，启动应用程序，关闭您的互联网连接并打开，然后快速恢复您的应用程序并执行请求。

Android 操作系统在网络之间切换的速度不是很快，这需要一些时间，在这段时间你可能会在你的应用程序中冻结，因为你等待响应。

# xaml - 为 DataGrid 元素赋予特定样式（隐式）

> ID：13987665
> 
> 赞同：0
> 
> 时间：2012-12-21T09:42:10.223
> 
> 标签：xaml, silverlight-4.0, silverlight-5.0

我正在尝试为 DataGrid 和 TextBlocks 隐式应用样式。

对于 TextBlock 的前景，我需要**白色**。

对于 DataGrid 的行，我需要**黑色**。

除此之外，对于 DataGrid 的标题列，我再次需要**White 。**

![在此处输入图像描述](../Images/d5dfb6491958c8bb2c24399b120e8460.png)

当我在 MainPage 上全局应用隐式样式时

```
<UserControl>
 <UserControl.Resorces>
    <Style targetType="TextBlock">
        <Setter Property="Foreground" Value="White"/>
    </Style>
 </UserControl.Resorces>
</UserControl> 
```

制作TextBlock的Foreground White操作就完成了！但除此之外，DataGrid 中的所有元素（我认为默认内容元素是文本块）都变成了白色。

正如你猜想的那样，它看起来不太好 White on white :) 那么我怎样才能特别指定 DataGrid 的元素 Foreground 为黑色呢？

我可以通过使用下面显示的相同技术来做到这一点，但这对于每个 DataGrid 来说都是一项昂贵的操作。作为一个骗局，我希望 DataGrid 的 HeaderColumns 再次变白。此操作使它们全部变黑。

有没有像我们在 css 样式中那样的明确方式？

这是我试图通过控制模板实现这一目标的方法。但没有机会因为是DataGrid 的ContentControl 是动态的。

```
<DataGrid>
<DataGrid.Resources>
    <Style targetType="TextBlock">
        <Setter Property="Foreground" Value="Black"/>
    </Style>
<DataGrid.Resources> 
```

事实上，我们使用 Telerik 的 RadGridView，但我给出了一个 sdk 的 DataGrid 示例，以使问题更加全球化。

```
<Style TargetType="sdk:DataGrid">
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="RowDetailsTemplate" Value="{StaticResource DataTemplate1}"/>
    <Setter Property="Template" Value="{StaticResource ControlTemplate1}"/>
</Style>

<ControlTemplate x:Key="ControlTemplate1" TargetType="sdk:DataGrid">
    <Grid/>
</ControlTemplate>

<DataTemplate x:Key="DataTemplate1">
    <Grid/>
</DataTemplate> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:55:19.280

如果是我，我会拉出完整的控制模板并相应地设置它们的样式，而不是尝试仅进行临时设置器更改以覆盖原始模板的位。在 Expression Blend 中右键单击，选择“编辑模板-> 编辑副本”并为您的行等拆分模板，然后使用 StaticResource 隐式应用这些模板。

# c - R 外部接口

> ID：13987667
> 
> 赞同：8
> 
> 时间：2012-12-21T01:38:08.747
> 
> 标签：c, r

我想实现一些用 C 代码编写的 R 包。

C 代码必须：

*   将一个数组（任何类型）作为输入。
*   产生数组作为输出（不可预测的大小）。

实现数组传递的最佳实践是什么？

目前 C 代码使用`.C()`. 它通过指针直接从 R 访问数组。不幸的是，不能对输出做同样的事情，因为需要提前知道输出尺寸，这在我的情况下是不正确的。

通过文件将数组从 C 传递到 R 是否有意义？例如，在 ramfs 中，如果使用 linux？

**更新 1：** [这里](https://stat.ethz.ch/pipermail/r-help/2009-November/218194.html)讨论了完全相同的问题。在那里，提到了返回未知维度数组的可能选项：

在计算数组之前但在维度已知之后将外部函数一分为二。第一部分将返回维度，然后准备空数组，然后第二部分将运行并填充 R 中的数组。
在我的情况下，只有在执行整个代码时才知道完整维度，因此这种方法意味着运行 C 代码两次。猜测最大数组大小也不是可选的。

**更新 2：**似乎唯一的方法是使用`.Call()`，如电源所建议的那样。这里有几个很好的例子：[http](http://www.sfu.ca/~sblay/R-C-interface.ppt) ://www.sfu.ca/~sblay/RC-interface.ppt 。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T04:25:20.757

> 实现数组传递的最佳实践是什么？

包是否已经用 ANSI C 编写？.C() 会变得又快又容易。

如果您是从头开始编写，我建议使用 .Call() 和 Rcpp。通过这种方式，您可以将 R 对象传递给您的 C/C++ 代码。

> 通过文件传递数组是否有意义？

不

阅读“编写 R 扩展”。

# macos - launchd.plist 每 10 秒运行一次，而不是只运行一次

> ID：13987671
> 
> 赞同：8
> 
> 时间：2012-12-21T09:42:25.910
> 
> 标签：macos, usb, launchd

我一直在设置`launchd.plist`每次安装特定 USB 设备时运行的 XML。我按照[xpc_events(3) 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/xpc_set_event_stream_handler.3.html)上的说明进行操作，只要安装了设备，它就会运行应用程序。

我遇到的问题是只要设备仍然安装，应用程序就会每 10 秒一次又一次地运行。我如何设置它，使其仅在设备插入 USB 端口时运行一次？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.myapp.agent</string>
    <key>Program</key>
    <string>/Applications/MyApp.app/Contents/MacOS/MyAgent</string>
    <key>LaunchEvents</key>
    <dict>
        <key>com.apple.iokit.matching</key>
        <dict>
            <key>com.apple.device-attach</key>
            <dict>
                <key>idVendor</key>
                <integer>2316</integer>
                <key>idProduct</key>
                <integer>4096</integer>
                <key>IOProviderClass</key>
                <string>IOUSBDevice</string>
                <key>IOMatchLaunchStream</key>
                <true/>
            </dict>
        </dict>
        <key>com.apple.notifyd.matching</key>
        <dict>
            <key>com.apple.interesting-notification</key>
            <dict>
                <key>Notification</key>
                <string>com.apple.interesting-notification</string>
            </dict>
        </dict>
    </dict>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-04-18T14:47:24.887

我为此编写了一个[教程，](https://github.com/himbeles/mac-device-connect-daemon)其中包含详细说明和示例文件，用于通过将外部设备（usb/thunderbolt）连接到 Mac 计算机来触发任意可执行文件或 shell 脚本，而不会出现重生问题。

与作者的方法一样，它依赖于 Apple 的`IOKit`设备检测库和运行所需可执行文件的守护进程。为了在连接设备后不会重复触发守护程序，使用特殊的流处理程序 ( `xpc_set_event_stream_handler`) 来“使用”`com.apple.iokit.matching`事件，正如 @ford 的帖子和他的[github repo](https://github.com/snosrap/xpc_set_event_stream_handler)中所解释的那样。

特别是，本教程描述了如何编译 xpc 流处理程序，以及如何将它与守护进程 plist 文件中的可执行文件一起引用，以及在何处放置具有正确权限的所有相关文件。

对于文件，请到[这里](https://github.com/himbeles/mac-device-connect-daemon)。为了完整起见，我还在下面粘贴了他们的内容。

# 在 Mac 上运行由设备检测触发的 shell 脚本或可执行文件

这里我使用连接到 Mac 时欺骗以太网适配器的 MAC 地址的示例。这可以推广到任意可执行文件和设备。

## 将您的 shell 脚本或可执行文件放置到位

适配shell脚本`spoof-mac.sh`

```
#!/bin/bash
ifconfig en12 ether 12:34:56:78:9A:BC 
```

根据您的需要并使其可执行：

```
sudo chmod 755 spoof-mac.sh 
```

然后将其移至`/usr/local/bin`或其他目录：

```
cp spoof-mac.sh /usr/local/bin/ 
```

## 构建流处理程序

流处理程序`xpc_set_event_stream_handler.m`

```
//  Created by Ford Parsons on 10/23/17.
//  Copyright © 2017 Ford Parsons. All rights reserved.
//

#import <Foundation/Foundation.h>
#include <xpc/xpc.h>

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);
        xpc_set_event_stream_handler("com.apple.iokit.matching", NULL, ^(xpc_object_t _Nonnull object) {
            const char *event = xpc_dictionary_get_string(object, XPC_EVENT_KEY_NAME);
            NSLog(@"%s", event);
            dispatch_semaphore_signal(semaphore);
        });
        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
        if(argc >= 2) {
            execv(argv[1], (char **)argv+1);
        }
    }
} 
```

是通用的（无需适应），可以在 mac 命令行上构建（安装了 xcode）：

```
gcc -framework Foundation -o xpc_set_event_stream_handler xpc_set_event_stream_handler.m 
```

让我们把它放到`/usr/local/bin`中，就像守护进程的主要可执行文件一样。

```
cp xpc_set_event_stream_handler /usr/local/bin/ 
```

## 设置守护进程

plist 文件`com.spoofmac.plist`包含将在设备连接触发器上运行可执行文件的守护程序的属性。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>UserName</key>
    <string>root</string>
    <key>StandardErrorPath</key>
    <string>/tmp/spoofmac.stderr</string>
    <key>StandardOutPath</key>
    <string>/tmp/spoofmac.stdout</string>
    <key>Label</key>
    <string>com.spoofmac.program</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/local/bin/xpc_set_event_stream_handler</string>
        <string>/usr/local/bin/spoofmac.sh</string>
    </array>
    <key>LaunchEvents</key>
    <dict>
        <key>com.apple.iokit.matching</key>
        <dict>
            <key>com.apple.device-attach</key>
            <dict>
                <key>idVendor</key>
                <integer>32902</integer>
                <key>idProduct</key>
                <integer>5427</integer>
                <key>IOProviderClass</key>
                <string>IOPCIDevice</string>
                <key>IOMatchLaunchStream</key>
                <true/>
                <key>IOMatchStream</key>
                <true/>
            </dict>
        </dict>
    </dict>
</dict>
</plist> 
```

它包含用于识别您想要触发的设备的信息，例如`idVendor`、`idProduct`、`IOProviderClass`。这些可以在`System Information`Mac 上的应用程序中计算出来。

[![截图系统信息](../Images/7df1d388015c03e4d0d159ca3c2f6793.png)](https://i.stack.imgur.com/gpIMY.png)

在插入 plist 文件之前将十六进制标识符转换为整数（例如`int(0x8086)`在 python 中使用）。

`IOProviderClass`应该是`IOPCIDevice`(Thunderbolt) 或`IOUSBDevice`(USB)。

plist 文件中的另一个相关条目是`xpc_set_event_stream_handler`可执行文件的位置。

其他条目包括标准输出（日志）文件的位置和执行用户。

由于 MAC 欺骗需要 root 权限，我们`com.spoofmac.plist`输入`/Library/LaunchDaemons`：

```
cp com.spoofmac.plist /Library/LaunchDaemons/ 
```

不进入`LaunchAgents`文件夹。启动代理忽略该`UserName`参数。

确保文件的所有者是`root`：

```
sudo chown root:wheel /Library/LaunchDaemons/com.spoofmac.plist 
```

## 启动守护进程

激活守护进程：

```
launchctl load /Library/LaunchDaemons/com.spoofmac.plist 
```

你很高兴。

卸载是使用`launchctl unload`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T12:23:09.793

AIUI 您的应用程序必须调用 xpc_set_event_stream_handler 以从队列中删除事件。您可能还必须添加`<key>KeepAlive</key><false/>`到 .plist，但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T11:21:08.260

我正在尝试使用这样的东西：

```
#include <xpc/xpc.h>
#include <unistd.h>
#include <asl.h>

int main(int argc, char *argv[]) {
    if (argc < 2) {
        return 1;
    }

    asl_log(NULL, NULL, ASL_LEVEL_DEBUG, "event_stream_handler: starting");

    xpc_set_event_stream_handler("com.apple.iokit.matching", dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(xpc_object_t event) {
        const char *name = xpc_dictionary_get_string(event, XPC_EVENT_KEY_NAME);
        uint64_t id = xpc_dictionary_get_uint64(event, "IOMatchLaunchServiceID");
        asl_log(NULL, NULL, ASL_LEVEL_DEBUG, "event_stream_handler: received event: %s: %llu", name, id);

        execv(argv[1], argv + 1);
    });

    dispatch_main();

    return 0;
} 
```

因此，一个使用事件并运行作为参数传递的脚本的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-20T23:34:07.623

这对我有用：

```
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);
        xpc_set_event_stream_handler("com.apple.iokit.matching", NULL, ^(xpc_object_t _Nonnull object) {
            const char *event = xpc_dictionary_get_string(object, XPC_EVENT_KEY_NAME);
            dispatch_semaphore_signal(semaphore);
        });
        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
        if(argc >= 2) {
            execv(argv[1], (char **)argv+1);
        }
    }
} 
```

[完整的源代码在这里](https://github.com/snosrap/xpc_set_event_stream_handler)

# php - 在 php 中共享对象

> ID：13987673
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:42:31.470
> 
> 标签：php

比问一个有明确正确/错误答案的问题更要征求你的意见。

我对 OOPHP 还很陌生，我过去做过一些 OO 编程。我无法理解的是在页面之间共享对象（或更多它们的状态）的最佳方式。

我试图避免将大量数据塞进 $_SESSION 中，而且我也不喜欢在每页更改的表单中发布所有数据的想法。

任何见解将不胜感激。

谢谢 TT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:50:24.750

将“大量数据”保存在`$_SESSION`. 通过这样做，您根本不会增加传输大小或任何东西，因此您不会像`$_SESSION`纯粹的服务器端那样影响客户端。

> 我试图避免将大量数据塞进 $_SESSION 中，而且我也不喜欢在每页更改的表单中发布所有数据的想法。

如上所述，这不是问题，您不是“在每个页面更改的表单中发布所有数据”，它存储在服务器端的平面文件中，当您重新打开会话时该文件会自动反序列化，并放入`$_SESSION`.

如果它`$_SESSION`的寿命对你来说足够了，你应该使用它。

如果您需要比 a 更持久的东西`$_SESSION`，例如，您需要在用户登录的整个过程中针对用户存储一个对象，您可以考虑在数据库中序列化对象并在页面加载时将它们拉出，或者只是重新创建来自您针对用户存储的值的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:47:16.947

如您所知，对象仅存在于页面上的两个 http 请求或单击之间，因此您可以将所需的数据保存在 $_SESSION/$_COOKIE 中，将其发送到 $_POST/$_GET，序列化对象并将其保存在 DB、文本文件中或其他...AFAIK 这些是您使用 PHP 的唯一选择

# sql - 谁能为此写我的sql查询？

> ID：13987674
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:42:35.543
> 
> 标签：sql, sql-server, sql-server-2008

我不是专家查询作者。为这个挠头。谁能帮我解决这个问题？

表 tbF

```
 RecordId      MarketId

    101            1  
    102            1
    201            2
    301            3 
```

表 tbSB

```
 MarketId          BMId

    1            3
    1            5
    2            1       
    2            2
    2            3
    2            4
    2            5
    3            1 
```

表 tbFM

```
RecordId    BMId

101            3
102            3
102            5
201            1
201            3
201            4 
```

现在我想要一个输出为

```
 Record Id   MarketId BMId     Active 
     101        1       3          true
     101        1       5          false
     102        1       3          true
     102        1       5          true
     201        2       1          true
     201        2       2          false
     201        2       3          true
     201        2       4          true
     201        2       5          false
     301        3       1          false 
```

活动列 -->

如果存在的记录 id 映射到特定的 BMId，则其 true else false RecordId 属于市场。--> Table tbF
每个市场都有一定数量的 BMId 映射给它 -->tbSB 每个 Recordid 都有一定数量的 BMId 映射给它 -->tbFM

对于每条记录，如果 BMid 存在于 tbFM 中，则 active 为真，否则如果 BMId 映射到记录市场而不是记录，则该记录的 Active 为假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:48:38.450

```
SELECT
  f.RecordId
  , f.MId
  , s.BMId
  , Active = CASE 
    WHEN m.RecordID is null THEN 'false'
    ELSE 'true'
    END
FROM tbF f
INNER JOIN tbSB s ON f.MId = S.MId
LEFT JOIN tbFM m ON m.RecordId = f.RecordID AND m.BMId = s.BMId 
```

我已经采取 Active 由 tbFM 表中的存在来确定 - 因为问题中显示的预期输出与该逻辑相匹配。

# alfresco - Alfresco Web 服务认证 API/字典

> ID：13987675
> 
> 赞同：0
> 
> 时间：2012-12-21T09:42:57.460
> 
> 标签：alfresco

我有两个单独的服务器供露天和共享。我可以成功地从共享登录到露天。我也可以更改我的密码。但是当打开存储库浏览器页面时，我收到了这个错误消息。

```
11210005 Failed to execute script 'classpath*:alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js': 11210004 11210008 Failed to run action evaluator: 11210007 Failed processing dictionary information from Alfresco: 11210006 Unable to retrieve dictionary information from Alfresco: 500 
```

完整的堆栈跟踪是

```
Caused by: org.alfresco.error.AlfrescoRuntimeException: 11210008 Failed to run action evaluator: 11210007 Failed processing dictionary information from Alfresco: 11210006 Unable to retrieve dictionary information from Alfresco: 500
    at org.alfresco.web.evaluator.NodeTypeEvaluator.evaluate(NodeTypeEvaluator.java:98)
    at org.alfresco.web.evaluator.BaseEvaluator.evaluate(BaseEvaluator.java:131)
    at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155)
    at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243)
    at org.mozilla.javascript.optimizer.OptRuntime.callN(OptRuntime.java:86)
    at org.mozilla.javascript.gen.c12._c4(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js:260)
    at org.mozilla.javascript.gen.c12.call(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)
    at org.mozilla.javascript.gen.c12._c2(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js:318)
    at org.mozilla.javascript.gen.c12.call(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.mozilla.javascript.optimizer.OptRuntime.call2(OptRuntime.java:76)
    at org.mozilla.javascript.gen.c12._c20(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js:838)
    at org.mozilla.javascript.gen.c12.call(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.mozilla.javascript.optimizer.OptRuntime.callName0(OptRuntime.java:108)
    at org.mozilla.javascript.gen.c12._c0(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js:854)
    at org.mozilla.javascript.gen.c12.call(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834)
    at org.mozilla.javascript.gen.c12.call(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.mozilla.javascript.gen.c12.exec(file:/D:/alfrescoplatform/development/apache-tomcat-share_ref/webapps/share_ref1/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components/documentlibrary/data/surf-doclist.get.js)
    at org.springframework.extensions.webscripts.processor.JSScriptProcessor.executeScriptImpl(JSScriptProcessor.java:318)
    ... 39 more 
```

所以我在深处跟踪NodeTypeEvaluator和DictionaryQuery类。我发现`/api/dictionary`从alfresco调用。

我试试[这个](http://stuffandnothing.com/index.php/2009/04/08/accessing-remote-alfresco-web-services/)。添加

```
webserviceclient.properties
repository.location=http://hostname:8080/alfresco/api 
```

共享，但没有成功。

在调用**[http://hostname:8080/alfresco/api/](http://hostname:8080/alfresco/api/)**显示

```
Axis HTTP Servlet
Hi, you have reached the AXIS HTTP Servlet. Normally you would be hitting this URL with a SOAP client rather than a browser.

In case you are interested, my AXIS transport name appears to be 'http 
```

如果您有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:32:57.560

正如评论中所接受的那样，这个问题的答案：我几乎总是在不同的应用程序服务器上运行 Alfresco 和 Share，您只需为其更改 share-config-custom.xml 和 alfresco-global.properties。Alfresco 论坛上有一个[操作方法。](https://forums.alfresco.com/en/viewtopic.php?f=47&t=34725)你跟了吗？

# php - 如何在php中将二维数组转换为一维数组？

> ID：13987684
> 
> 赞同：4
> 
> 时间：2012-12-21T09:43:38.707
> 
> 标签：php, arrays, multidimensional-array

我有一个多维数组得到如下所示的结果

```
Array
(
    [0] => Array
        (
            [0] => 70
        )

    [1] => Array
        (
            [0] => 67
        )

    [2] => Array
        (
            [0] => 75
            [1] => 73
            [2] => 68
        )

    [3] => Array
        (
            [0] => 68
        )

    [4] => Array
        (
            [0] => 76
        )

) 
```

但我需要将其转换为单个数组

我想转换为一维数组

```
Array
(
[0] => 70
[1] => 67
[2] => 75
[3] => 73
[4] => 68
[5] => 68
[6] => 76
) 
```

如何使用php函数转换它？

或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T09:56:20.200

你可以试试

```
$it =  new RecursiveIteratorIterator(new RecursiveArrayIterator($data));
$l = iterator_to_array($it, false);

var_dump($l); // one Dimensional 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:45:41.233

尝试：

```
$input  = array(/* your array*/);
$output = array();

foreach ( $input as $data ) {
  $output = array_merge($output, $data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:18:18.780

您可以将`array_walk_recursive()`其与闭包结合使用：

```
$res = array(); // initialize result

// apply closure to all items in $data
array_walk_recursive($data, function($item) use (&$res) {
    // flatten the array
    $res[] = $item;
});

print_r($res); // print one-dimensional array 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:46:03.750

这应该可以解决问题

```
$final = array();
foreach ($outer as $inner) {
  $final = array_merge($final, $inner);
}
var_dump($final); 
```

或者你可以使用[`array_reduce()`](http://php.net/manual/en/function.array-reduce.php)，如果你有`PHP >= 5.3`

```
$final = array_reduce($outer, function($_, $inner){
  return $_ = array_merge((array)$_, $inner);
});
var_dump($final); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T10:42:28.147

对于可以处理多维数组的更通用的函数，检查这个函数，

```
function  arrayFlattener($input = array(), &$output = array()) {
  foreach($input as $value) {
    if(is_array($value)) {
        arrayFlattener($value, $output);
    } else {
        $output[] = $value;
    }
  }
} 
```

[你可以在这里](http://codepad.viper-7.com/NSOiqi)找到一个例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-27T15:33:01.377

通过使用此函数，您可以将任何维度数组转换为单个维度数组。

```
$result = array();
$data = mearchIntoarray($result,$array);
function mearchIntoarray($result,$now)
{
    global $result;
    foreach($now as $key=>$val)
    {
        if(is_array($val))
        {
            mearchIntoarray($result,$val);
        }
        else
        {
            $result[] = $val;
        }
    }
    return $result;
} 
```

其中 $array 是您给定的数组值。

# android - 如何在主要活动中调用默认浏览器？

> ID：13987687
> 
> 赞同：0
> 
> 时间：2012-12-21T09:43:45.870
> 
> 标签：android, browser

> **可能重复：**
> [如何从我的应用程序在 Android 的网络浏览器中打开 URL？](https://stackoverflow.com/questions/2201917/how-can-i-open-a-url-in-androids-web-browser-from-my-application)
> [启动安卓浏览器](https://stackoverflow.com/questions/2643385/start-the-android-browser)

我检查了一些参考，我使用下面的代码在主要活动中调用默认浏览器。

```
 Intent intent= new Intent();        
        intent.setAction("android.intent.action.VIEW");    
        Uri content_url = Uri.parse("www.baidu.com");   
        intent.setData(content_url);           
        intent.setClassName("com.android.browser","com.android.browser.FMSActivity");   
        startActivity(intent); 
```

然后修改xml：

```
 <intent-filter>
　　                <action android:name="android.intent.action.VIEW" />
　　                <category android:name="android.intent.category.DEFAULT" />
　　                <category android:name="android.intent.category.BROWSABLE" />
　　                <data android:scheme="file" />
　　            </intent-filter> 
```

但我收到日志错误：

```
12-21 05:54:56.367: E/AndroidRuntime(277): at sz.zd.SzActivity.onCreate(SzActivity.java:19) 
```

如何在主要活动中调用默认浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:47:47.337

你默认是什么意思？用户声明为默认的那个？如果是，那么这是代码：

```
Intent i = new Intent();
i.setAction(Intent.ACTION_VIEW);
i.addCategory(Intent.CATEGORY_BROWSABLE);
i.setData(Uri.parse(THE_URL));
startActivity(i); 
```

您实际上不需要向应用程序 XML 添加意图，这意味着另一件事。您可能想通读文档以了解意图过滤器的用途。

# jsf-2 - 根据 SelectItem 信息更改 HtmlSelectOneMenu 显示值

> ID：13987689
> 
> 赞同：0
> 
> 时间：2012-12-21T09:43:51.253
> 
> 标签：jsf-2

您好我有一个关于动态显示 HtmlSelectOneMenu 值的问题。下面是一个描述我的问题的小应用程序。

`List<Car> carList = new ArrayList<Car>()`我的支持 bean 中有一个汽车清单。

Car 是一个抽象类，`Toyota`并且可以`Ford`扩展`Car`。

现在我需要根据类类型在 selectonemenu 中显示不同的消息。如果是丰田，那么我会展示其他东西。也许代码更清楚地讲述了这个故事。

支持豆：

```
@ManagedBean(name="myBean")
@SessionScoped
public class MyCarBackingBean implements PhaseListener {

    private List<Car> carList = new ArrayList<Car>();
    private HtmlSelectOneMenu hsom;
    Car myCar;

    @PostConstruct
    public void init() {
        carList.add(new Ford());
        carList.add(new Toyota());
    }

    @Override
    public void beforePhase(PhaseEvent event) {
    //hsom becomes null here. Im pretty sure the setHsom was called before and the variable was set.
    if(hsom != null) {
        switch((Integer)hsom.getValue()){
            case 1: hsom.setValue("This is a Ford car"); break;
            case 2: hsom.setValue("This is a Toyota car"); 
        }
    }

    //The rest of the world...
} 
```

我将 selectonemenu 绑定到我页面中的组件：

```
<h:form>
    <h:selectOneMenu binding="#{myBean.hsom}">
       <f:selectItems value="#{myBean.carList}" var="car" itemValue="#{car.id}" itemLabel="#{car.id}" />
       </h:selectOneMenu>
    <h:commandButton value="Submit" action="#{myBean.mySubmit()}"/>
</h:form> 
```

最后是模型类：

```
public abstract class Car {

    protected int id;
    //Getters and Setters

}

public class Toyota extends Car {

    public Toyota(){
        this.id = 2; //in case of ford car, id is 1.
    }

} 
```

而且我正在考虑使用阶段侦听器来更改显示，因为我读了一些帖子说更改 getter 和 setter 并将业务逻辑放入其中是不好的。我也不想将这些汽车包裹在其他物体中并使用`itemLabel`and `itemValue`。

但是当我调试它时，我发现这`hsom`是`null`执行到达的时候，`beforePhase`但在代码的其余部分它不为空。

所以我的问题是：为此使用相位监听器是一种好方法吗？为什么组件对象在中为空`beforePhase`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:49:11.813

`description`向您的班级添加不同的属性（例如）。随心所欲地实现它，并在`selectItems`标签中引用它。Vg

```
<f:selectItems value="#{myBean.carList}" var="car" itemValue="#{car.id}" itemLabel="#{car.description}" /> 
```

或者，替换`myBean.carList`为返回 a 的方法`List<SelectItem>`，并`selectItems`根据需要创建 。

根据经验，尽量保持 .xhtml 为“无逻辑”。

# c# - 动态事件处理 - 不触发

> ID：13987693
> 
> 赞同：0
> 
> 时间：2012-12-21T09:44:02.047
> 
> 标签：c#, wpf, dynamic, event-handling, mouseevent

我在动态处理`MouseUp`事件时遇到问题。有问题的测试代码：

WPF：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>

        <Button x:Name="Button1" Content="Button1" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>
        <Button x:Name="Button2" Content="Button2" HorizontalAlignment="Left" Margin="10,37,0,0" VerticalAlignment="Top" Width="75"/>

    </Grid>
</Window> 
```

C# 后面：

```
using System.Windows;
using System.Windows.Input;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            Button2.MouseLeftButtonUp += something;
        }

        private void something(object sender, MouseEventArgs e)
        {
            MessageBox.Show("TEST");
            Button2.MouseLeftButtonUp -= something;
        }
    }
} 
```

现在，我希望在我点击后`MessageBox`第一次显示带有文本“TEST”的。它没有出现。相同的代码适用于事件，但我需要获取鼠标位置。我已经确认第一个函数会触发，但无论我尝试什么，第二个函数都不会触发。帮助？`Button2``Button1``Click``MouseUp`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:49:05.620

[请参阅ButtonBase.Click](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click.aspx)中的备注部分：

> ButtonBase 将 MouseLeftButtonDown 事件标记为在 OnMouseLeftButtonDown 方法中处理，并引发 Click 事件。因此，从 ButtonBase 继承的控件永远不会发生 OnMouseLeftButtonDown 事件。相反，将事件处理程序附加到 PreviewMouseLeftButtonDown 事件，或调用 AddHandler(RoutedEvent, Delegate, Boolean) 并将handledEventsToo 设置为true。

由于`MouseLeftButtonDown`是在内部处理的，因此您也不会收到任何 `MouseLeftButtonUp`事件。但是，您可以改用[PreviewMouseLeftButtonUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseleftbuttonup.aspx)事件。

# jquery - IE 从 textarea 复制 xml 后忽略换行符

> ID：13987694
> 
> 赞同：0
> 
> 时间：2012-12-21T09:44:01.267
> 
> 标签：jquery, internet-explorer

我有一个文本区域，里面有一些 xml。我想将此 xml 复制到另一个地方的 div 中。

例如xml

```
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

我正在尝试以下：

```
$('#divId').text($('#area').val()); 
```

它在 Firefox 和 chrome 中运行良好。IE 似乎失去了换行符。

导致 IE

```
<note> <to>Tove</to> <from>Jani</from> <heading>Reminder</heading> <body>Don't forget me this weekend!</body> </note> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:57:02.843

尝试使用`text()`而不是`val()`获取 textarea 的内容，如下所示：

```
$('#divId').text($('#area').text()); 
```

似乎在 IE 中为我工作，这是一个例子 - [http://jsfiddle.net/7UBxg/1/](http://jsfiddle.net/7UBxg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:47:42.080

您可以尝试使用`<pre>`标签来保留格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:56:06.697

您可以将 '\n' 字符替换为`<br />`：

```
$('#divId').text($('#area').val().replace(/\n/g, '<br />'); 
```

这样做是因为在 HTML 中，'\n' 字符只是一个字符，它不被视为换行符。

# ruby-on-rails-3 - 在 Rails 中为多个环境编译资产

> ID：13987695
> 
> 赞同：2
> 
> 时间：2012-12-21T09:44:03.403
> 
> 标签：ruby-on-rails-3, asset-pipeline

在我的应用程序中，我创建了除开发之外的不同环境，如登台、qa_test 和生产。（都像生产，但有不同的设置/配置）

现在我的问题是我想编译用于暂存、qa_test 和生产的资产，以便每个环境（Rails.env）都能赶上他们的资产。

PS 我在资产文件中有动态（取决于环境）代码。

# c++ - QtCreator 调试器不显示 std::string 的值

> ID：13987699
> 
> 赞同：9
> 
> 时间：2012-12-21T09:44:11.563
> 
> 标签：c++, gdb, qt-creator

我试图调试我的小型词法分析器并遇到了这个问题：QtCreator-Debugger 不显示我的 std::string-variable 的任何内容。我尝试在控制台中对其进行调试，得到了相同的结果，只是简单的结构信息。

我几天前使用的QtCreator版本确实显示了字符串的内容。所有其他 STL 元素（如 std::vector、std::map、std::multimap 等）都显示正确的数据，只是 std::string 类不正确。

经过几个小时的谷歌搜索，我发现了很多描述漂亮打印机创建的网页，但我解决这个问题的非常愚蠢的方法并没有帮助。有什么想法可以摆脱这个错误吗？

注意：字符串变量的“内容”将始终显示为“不可访问”。我将 QtCreator 2.6 (QT5) 用于 64 位 Linux 操作系统。

编辑（1）：我重新安装了从操作系统到编译器和 IDE 的所有东西......奇怪的是，当我使用优化级别 3（-O3）构建我的项目时，QT 可以显示 std::strings。

命令行如下：clang++ -std=c++11 -O3 -g -c foo.cpp

当我删除 -O3 时，std::strings <不可访问>。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-07-24T16:22:43.030

您可以尝试修复“/usr/share/qtcreator/debugger/stdtypes.py”。由于他们使用“成员位置的硬编码假设”，因此似乎并非在任何地方都有效。就我而言 - Linux x64, gcc 9.1 它的工作方式与您描述的完全一样： [字符串不可访问](https://i.stack.imgur.com/IlJTp.png)

所以找函数`def qdumpHelper_std__string(d, value, charType, format):`

并更改 `(size, alloc, refcount) = d.split("ppp", data - 3 * d.ptrSize())` 为 `(size, alloc, refcount) = d.split("ppp", value.address() + d.ptrSize())`

还可以评论`d.check(0 <= size and size <= alloc and alloc <= 100*1000*1000)`或将其更改为类似

```
if size > 1000:
   size = 1000 
```

在我的系统上 std::string 有下一个结构

```
pointer 8 byte
size    8 byte
union   16 byte 
```

并且这个`union`字段可以改变它的含义取决于字符串的大小。所以我们需要评论那张`size < alloc`支票。 `value.address()`- 字符串对象的地址，所以会不时`value.address() + d.ptrSize()`指向大小，并`value.address() + 2 * d.ptrSize()`指向包含值的那个联合。`alloc size`

只需查看您的`std::string`类声明，您就会了解系统的结构。修复后： [修复了调试器视图](https://i.stack.imgur.com/ezPw4.png)

两者都适用 - 当“系统 GDB 漂亮打印机”检查并清除时

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-15T18:15:49.817

试试这个，它对我有用。
在 Qt Creator 菜单栏中：

```
Tools -> Options -> Debugger
Uncheck the option (Load system GDB pretty printers) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-31T18:11:40.430

To clarify and sum up AstoBasto post: In file: /usr/share/qtcreator/debugger/stdtypes.py replace this function:

```
def qdumpHelper_std__string(d, value, charType, format):
[...] 
```

With this:

```
def qdumpHelper_std__string(d, value, charType, format):
if d.isQnxTarget():
    qdumpHelper__std__string__QNX(d, value, charType, format)
    return
if d.isMsvcTarget():
    qdumpHelper__std__string__MSVC(d, value, charType, format)
    return

data = value.extractPointer()
# We can't lookup the std::string::_Rep type without crashing LLDB,
# so hard-code assumption on member position
# struct { size_type _M_length, size_type _M_capacity, int _M_refcount; }

(size, alloc, refcount) = d.split("ppp", value.address() + d.ptrSize())
refcount = refcount & 0xffffffff
d.check(refcount >= -1) # Can be -1 according to docs.

if size > 4002:
    size = 4002
d.putCharArrayHelper(data, size, charType, format) 
```

And this works (at least on Kubuntu 19.10).

# iphone - 我可以在我的 iPhone 应用程序中使用 zbar sdk 吗？

> ID：13987702
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:44:31.560
> 
> 标签：iphone, objective-c, ios, xcode, zbar-sdk

我已将 zbarsdk 集成到我的 iPhone 应用程序中。运作良好。现在请告诉我我可以使用 zbarsdk 无需任何付款或需要付款吗？苹果会批准吗？. 我已经搜索但没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:57:19.967

您可以[在此处查看他们的许可页面](http://zbar.sourceforge.net/iphone/sdkdoc/licensing.html)。您无需支付任何费用即可使用它。只需遵循那里提到的任何内容。

# html - joomla 1.5 15 上的 tinymce 过滤 html 选项

> ID：13987704
> 
> 赞同：0
> 
> 时间：2012-12-21T09:44:40.533
> 
> 标签：html, editor, tinymce, joomla1.5

我写是因为我在 joomla 1.5.15 上的编辑器 TINY mcem 2.0 有问题 基本上我找不到允许我选择文本的设置允许编辑器。具体来说，每次添加一个文章代码：自动被删除。有人可以帮助我吗？先感谢您

斯特凡尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:03:18.043

查看 tinymce 配置设置 valid_elements 和 valid_children。您需要定义哪些元素被视为有效元素。无效元素将从编辑器内容中删除。

# android - Android中的SQLite查询和更新错误

> ID：13987705
> 
> 赞同：0
> 
> 时间：2012-12-21T09:44:48.803
> 
> 标签：android, sqlite, insert-update

我是安卓新手。我正在尝试使用 SQLite 在我的第一个应用程序中更新表。但是当我从 SQLite 管理器查看表格时，我发现表格没有更新。我找不到问题出在哪里？

```
public void EntryHesapla(int yilsql, String aysql,int digerTaksitlersql,
            int digersql,int maasSelosql,int maasHilalsql,int digerGelirlersql,
            int toplamHarcamasql,int toplamGelirsql,int eldeKalansql) {
        ContentValues cv = new ContentValues();
        cv.put(C_YIL, yilsql);
        cv.put(C_AY, aysql);
        cv.put(C_DIGERTAKSITLER, digerTaksitlersql);
        cv.put(C_DIGER, digersql);
        cv.put(C_MAASSELO, maasSelosql);
        cv.put(C_MAASHILAL, maasHilalsql);
        cv.put(C_DIGERGELIRLER, digerGelirlersql);
        cv.put(C_TOPLAMHARCAMA, toplamHarcamasql);
        cv.put(C_TOPLAMGELIR, toplamGelirsql);
        cv.put(C_ELDEKALAN, eldeKalansql);

        String[] selectionArgs=new String[]{yilsql+"", aysql};
        String entryHesaplaSQL="SELECT c_id FROM harcamalar WHERE "+C_YIL+"= ? AND "+C_AY+"= ?";
        Cursor cursor=ourDatabase.rawQuery(entryHesaplaSQL, selectionArgs);
        cursor.moveToFirst();
        cursor.moveToPosition(cursor.getCount() - 1);
        int index=cursor.getInt(cursor.getColumnIndex(C_ID));
        if(index>=0)
                ourDatabase.update(DB_TABLE, cv, C_ID+"="+index, null);
        else ourDatabase.insert(DB_TABLE, null, cv);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:55:17.813

```
cursor.getColumnIndex(C_ID); 
```

返回查询中 C_ID 列的列索引。它是 0，因为您的查询中只有 1 列。

如果您想要此列的值，则需要调用`getInt(index)`（有关详细信息，请参阅[getColumnIndex](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)。）

# java - 将 XML 文件转换为具有 List 的 XML 对象

> ID：13987708
> 
> 赞同：2
> 
> 时间：2012-12-21T09:45:07.180
> 
> 标签：java, xml, xml-parsing, jaxb, unmarshalling

> **可能重复：**
> [Java 的最佳 XML 解析器](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)
> [如何将此 xml 文件转换为 XML 对象？](https://stackoverflow.com/questions/13987046/how-i-can-convert-this-xml-file-into-an-xml-object)

我有一个这样的 XML。我想把它转换成 JAVA 对象。

```
<P1>
    <CTS>
        Hello
    </CTS>
    <CTS>
        World
    </CTS>
<P1> 
```

所以我用它们的属性创建了以下java类。

`P1 class`

```
@XmlRootElement
public class P1 {
    @XmlElement(name = "CTS")
    List<CTS> cts;
} 
```

`CTS class`

```
public class CTS {
    String ct;
} 
```

`Test Class`

```
File file = new File("D:\\ContentTemp.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(P1.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            P1 p = (P1) jaxbUnmarshaller.unmarshal(file); 
```

但我收到以下错误 -

> ```
> com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 
> 2 counts of IllegalAnnotationExceptions
> Class has two properties of the same name "cts" 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:28:19.420

**更新**

> com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 计数 IllegalAnnotationExceptions 类有两个同名属性“cts”

默认情况下，[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现基于属性和带注释的字段创建映射。当您注释一个还有一个属性的字段时，它将导致此错误。

**选项 #1 - 使用 @XmlAccessorType(XmlAccessType.FIELD)**

您可以注释您需要`@XmlAccessorType(XmlAccessType.FIELD)`在类上指定的字段。

```
@XmlRootElement(name="P1)
@XmlAccessorType(XmlAccessType.FIELD)
public class P1 {

    @XmlElement(name = "CTS")
    List<CTS> cts;

} 
```

**选项 #2 - 注释属性（get 方法）**

或者，您可以注释该`get`方法。

```
@XmlRootElement(name="P1)
public class P1 {

    List<CTS> cts;

    @XmlElement(name = "CTS")
    public List<CTS> getCts() {
        return cts;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

**完整示例**

**中旅**

您可以使用`@XmlValue`注解将 Java 类映射到具有简单内容的复杂类型。

```
@XmlAccessorType(XmlAccessType.FIELD)
public class CTS {

    @XmlValue
    String ct;

} 
```

**P1**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="P1")
@XmlAccessorType(XmlAccessType.FIELD)
public class P1 {

    @XmlElement(name = "CTS")
    List<CTS> cts;

} 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(P1.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13987708/input.xml");
        P1 p1 = (P1) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(p1, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<P1>
    <CTS>
        Hello
    </CTS>
    <CTS>
        World
    </CTS>
</P1> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:55:37.913

我可以看到两个问题：

1）您需要`P1.class`在您的`JAXBContext`. 你还没有说`Presentation`类是什么，但如果你的根元素是`P1`，这就是你在上下文中需要的：

```
JAXBContext jaxbContext = JAXBContext.newInstance(P1.class); 
```

2）您需要指定根xml元素的名称：

```
@XmlRootElement(name="P1")
public class P1 {
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:11:40.740

您的 XML 如下所示：

```
<P1>
  <CTS>
    Hello
  </CTS>
  <CTS>
    World
  </CTS>
</P1> 
```

但考虑到您的映射，它应该如下所示：

```
<p1>
  <CTS>
    <CT>
    Hello
    </CT>
  </CTS>
  <CTS>
    <CT>
    World
    </CT>
  </CTS>
</p1> 
```

为了将根元素从 p1 更改为 P1，请`name`使用`@XmlRootElement`.

如果您想解析您发布的第一个 XML 版本，请像这样更改您的 P1 类：

```
@XmlRootElement(name="P1")
public class P1 {
    @XmlElement(name = "CTS")
    List<String> cts;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:33:22.603

您可以尝试以下方法，

如果可以，请将 xml 设置为以下结构。

```
<P1>
    <CTSList>
       <CTS value="Hello"/>
       <CTS value="World"/>
    </CTSList>
<P1> 
```

并使用，

```
@XMLRootElement(name="P1")
public class P1 {
  List CTSList;

  @XMLElementWrapper(name="CTSList")
  @XMLELement(name="CTS")
  public void setCTSList(List<CTS> ctsList) {
     this.CTSList = ctsList;
  }

  public List<CTS> getCTSList() {
    return this.CTSList;
  }
}

@XMLRootElement(name="CTS")
public class CTS {
   String cts;

   @XMLAttribute(name = "value")
   public String getCts() {
     return this.cts;
   }

   public void set setCts(String cts) {
     this.cts = cts;
   }
} 
```

# php - 条件正则表达式和 PHP

> ID：13987709
> 
> 赞同：0
> 
> 时间：2012-12-21T09:45:25.997
> 
> 标签：php, regex

我需要一些正则表达式帮助，拜托。

我在 PHP 中使用了以下正则表达式：

`$module_pattern = "/\[\[mod:(.*?):(.*?):(.*?):(.*?):(.*?)\]\]/i";`

它应该用一个模块 (mod:) 替换这个正则表达式，这个特定的模块 first`:(.*?)`和特定的函数 second `:(.*?)`。我尝试添加第三个、第四个和第五个`:(.*?)`以允许将参数传递给函数，但上面的正则表达式假设我们实际上将传递 3 个参数，但在某些情况下我可能只传递一个或两个。

我该如何解决？

谢谢，

科布斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:50:45.107

您可以使用创建新的可选组`(...)?`。参数将是`(:(.*?))?`. 我使用嵌套组的原因是因为您不想捕获内容，因此我们可以将 a 添加`?:`到外部组中，使其忽略它：`(?::(.*?))?`.

你的模式看起来像： `/\[\[mod:(.*?):(.*?)(?::(.*?))?(?::(.*?))?(?::(.*?))?\]\]/i`

# java - Hibernate Sessionfactory 重启 | 春天

> ID：13987720
> 
> 赞同：4
> 
> 时间：2012-12-21T09:45:56.243
> 
> 标签：java, spring, hibernate, sessionfactory

我的要求如下：

我需要使用从外部获取的新 HBM 文件频繁地在我的 Spring Web 应用程序中重新启动（或重建）休眠会话工厂。

目前我的 Sessionfactory 类如下，带有一个 SessionFactory 代理来拦截“OpenSession”调用。

在那里，我正在检查重新启动和重建 sessionFactory 的条件。

我的问题是，在并发环境中，处于其他事务中间的其他用户在重新启动期间受到影响。

无论如何通过检查所有事务和打开会话并在所有其他完成后执行重建会话工厂来执行重新启动？

或存在任何其他解决方案。

代码：

```
public class DataStoreSessionFactory extends LocalSessionFactoryBean
{

   private boolean restartFactory = false;

   @Override
   protected void postProcessConfiguration(Configuration config) throws HibernateException
   {
      super.postProcessConfiguration(config);
      updateHBMList(config);
   }

   private void updateHBMList(final Configuration config)
   {

      config.addXML(modelRegistry.generateMapping());
   }

   @Override
   public SessionFactory getObject()
   {

      Object obj = super.getObject();

      /*
       * Invocation handler for the proxy
       */
      SessionFactoryProxy proxy = new SessionFactoryProxy(this, (SessionFactory) obj);

      /**
       * All the methods invoked on the returned session factory object will pass through this proxy's invocation
       * handler
       */
      SessionFactory sessionFactory = (SessionFactory) Proxy.newProxyInstance(getClass().getClassLoader(),
                                                                              new Class[] { SessionFactory.class },
                                                                              proxy);
      return sessionFactory;
   }

   static class SessionFactoryProxy implements InvocationHandler
   {

      private SessionFactory sessionFactory;

      private LocalSessionFactoryBean factoryBean;

      public SessionFactoryProxy(LocalSessionFactoryBean factoryBean, SessionFactory sessionFactory)
      {
         this.factoryBean = factoryBean;
         this.sessionFactory = sessionFactory;
      }

      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable
      {
         /**
          * Only if the method invoked is openSession - check if the session factory should be restarted, and only then
          * invoke the requested method
          */
         if (method.getName().equals("openSession"))
         {
            restartSessionFactoryIfNecessary();
         }
         return method.invoke(sessionFactory, args);
      }

      private void restartSessionFactoryIfNecessary()
      {
         restartSessionFactory();
         /*if (((DataStoreSessionFactory) factoryBean).isRestartFactory())
         {
            restartSessionFactory();
         }*/
      }

      private synchronized void restartSessionFactory()
      {
         log.info("Restarting session...");
         factoryBean.destroy();
         try
         {
            factoryBean.afterPropertiesSet();
            sessionFactory = factoryBean.getObject();
         }
         catch (Exception e)
         {
            log.error("Error while restarting session: " + e.getMessage());
            throw new RuntimeException(e);
         }
      }
   } 
```

谢谢，阿帕萨米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:00:25.800

您可以按照 SessionFactoryUtils 来确定会话工厂中是否正在发生事务，然后决定是否重新启动会话工厂：您需要在文件中导入--> org.springframework.orm.hibernate.SessionFactoryUtils，并使用以下 API。

```
 static boolean  hasTransactionalSession(SessionFactory sessionFactory); 
```

上面的API返回当前线程是否有事务的Hibernate Session，即Spring的事务设施绑定到当前线程的Session。还有另外一个API，以防万一你需要在session中检查一个session是否是事务性的目前工厂：

```
static boolean isSessionTransactional(Session session,SessionFactory sessionFactory); 
```

上面的 API 返回给定的特定 Hibernate Session 是否是事务性的，即通过 Spring 的事务设施绑定到当前线程。

# php - Php 购物车 - 每种产品数量的尺寸和长度

> ID：13987724
> 
> 赞同：-4
> 
> 时间：2012-12-21T09:46:01.327
> 
> 标签：php, tcpdf

我一直在网上商店工作。项目的目的是将产品添加到购物车中。客户应该能够更改产品每个数量的尺寸和长度。例子 ：

*   我出售名为 A 的产品
*   客户订购5件产品A
*   所以他应该能够为产品 A 设置 5 个尺寸和长度，因为数量是 5。

然后 TCPDF 也可以通过电子邮件发送创建的发票。

我只需要一些帮助来设置每个数量的大小和长度。请帮助..

如果可能的话，请协助我将这些长度和大小添加到在功能 sendmail 下创建的 pdf

以下是我到目前为止编写的代码...

```
<?php
include("include/session.php");
require_once('config/lang/eng.php');
require_once('tcpdf.php');

//Start the session
session_start();

//Create 'cart' if it doesn't already exist
if (!isset($_SESSION['SHOPPING_CART'])){ $_SESSION['SHOPPING_CART'] = array(); }

//Add an item only if we have the threee required pices of information: name, price, qty
if (isset($_GET['add']) && isset($_GET['price']) 
        && isset($_GET['qty']) && isset($_GET['size'])
        && isset($_GET['length'])&& isset($_GET['code']) ){
    //Adding an Item
    //Store it in a Array
    $ITEM = array(
        //Item name
        'name' => $_GET['add'],
        //Item Price
        'price' => $_GET['price'],
        //Qty wanted of item
        'qty' => $_GET['qty'],

        'size' => $_GET['size'],

        'length' => $_GET['length'],

        'code' => $_GET['code']
    );

    //Add this item to the shopping cart
    $_SESSION['SHOPPING_CART'][] =  $ITEM;
    //Clear the URL variables
    header('Location: ' . $_SERVER['PHP_SELF']);
}
//Allowing the modification of individual items no longer keeps this a simple shopping cart.
//We only support emptying and removing
else if (isset($_GET['remove'])){
    //Remove the item from the cart
    unset($_SESSION['SHOPPING_CART'][$_GET['remove']]);
    //Re-organize the cart
    //array_unshift ($_SESSION['SHOPPING_CART'], array_shift ($_SESSION['SHOPPING_CART']));
    //Clear the URL variables
    header('Location: ' . $_SERVER['PHP_SELF']);
}
else if (isset($_GET['empty'])){
    //Clear Cart by destroying all the data in the session
    session_destroy();
    //Clear the URL variables
    header('Location: ' . $_SERVER['PHP_SELF']);
}
else if (isset($_POST['update'])) {
    //Updates Qty for all items
    foreach ($_POST['items_qty'] as $itemID => $qty) {
        //If the Qty is "0" remove it from the cart
        if ($qty == 0) {
            //Remove it from the cart
            unset($_SESSION['SHOPPING_CART'][$itemID]);
        }
        else if($qty >= 1) {
            //Update to the new Qty
            $_SESSION['SHOPPING_CART'][$itemID]['qty'] = $qty;
        }
        foreach ($_POST['items_size'] as $itemID => $size) {
            //If the Qty is "0" remove it from the cart
            if($size >= 1) {
                //Update to the new Qty
                $_SESSION['SHOPPING_CART'][$itemID]['size'] = $size;
        }
    }
    foreach ($_POST['items_length'] as $itemID => $length) {
        //If the Qty is "0" remove it from the cart

        //Update to the new Qty
        $_SESSION['SHOPPING_CART'][$itemID]['length'] = $length;
    }
}
//Clear the POST variables
header('Location: ' . $_SERVER['PHP_SELF']);
}
$req_user = $session->username;
$req_user_info = $database->getUserInfo($req_user);
$need= $req_user;
/* Username */
$username=$req_user;

$q = "SELECT name, address, city, country, postal, email, number, account, counter "
."FROM ".TBL_USERS." WHERE username = '$username'";
$result = $database->query($q);
$num_rows = mysql_numrows($result);

for($i=0; $i<$num_rows; $i++){
$storename  = mysql_result($result,$i,"name");
$address  = mysql_result($result,$i,"address");
$city  = mysql_result($result,$i,"city");
$country  = mysql_result($result,$i,"country");
$postal  = mysql_result($result,$i,"postal");
$email  = mysql_result($result,$i,"email");
$number  = mysql_result($result,$i,"number");
$account  = mysql_result($result,$i,"account");
$counter  = mysql_result($result,$i,"counter");
}

?>
function sendmail($storename,$address,$city,$country,$postal,$number, $email, $account, $counter){
class MYP extends TCPDF {

// Load table data from file
public function LoadData($file) {
// Read file lines
$lines = file($file);
$data = array();
foreach($lines as $line) {
$data[] = explode(';', chop($line));
}
return $data;
}

// Colored table
public function ColoredTable($header, $account, $counter) {
// Colors, line width and bold font
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetDrawColor(0, 0, 0);
$this->SetLineWidth(0.3);
$this->SetFont('', 'B');

// Header
$w = array(35, 40);
$num_headers = count($header);
for($i = 0; $i < $num_headers; ++$i) {
$this->Cell($w[$i], 7, $header[$i], 1, 0, 'C', 1);
}
$this->Ln();
// Color and font restoration
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetFont('');
// Data
$fill = 0;

$ref = $account.$counter;
$today = date("m.d.y");

$this->Cell($w[0], 6, $today, 'LR', 0, 'C', $fill);
$this->Cell($w[1], 6, $ref, 'LR', 0, 'C', $fill);
$this->Ln();

$fill=!$fill;

$this->Cell(array_sum($w), 0, '', 'T');
}
public function ColoredTable2($header) {
// Colors, line width and bold font
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetDrawColor(0, 0, 0);
$this->SetLineWidth(0.3);
$this->SetFont('', 'B');

// Header
$w = array(30, 40, 20,20,20,20);
$num_headers = count($header);
for($i = 0; $i < $num_headers; ++$i) {
$this->Cell($w[$i], 7, $header[$i], 1, 0, 'C', 1);
}
$this->Ln();

// Color and font restoration
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetFont('');
// Data
$fill = 0;
$totalamount=0;
foreach ($_SESSION['SHOPPING_CART'] as $itemNumber => $item) {
$tot=$item['qty'] * $item['price'];
$this->Cell($w[0], 6, $item['name'], 'LR', 0, 'C', $fill);
$this->Cell($w[1], 6, $item['size'], 'LR', 0, 'C', $fill);
$this->Cell($w[2], 6, $item['qty'], 'LR', 0, 'C', $fill);
$this->Cell($w[3], 6, $item['length'], 'LR', 0, 'C', $fill);
$this->Cell($w[4], 6, $item['price'], 'LR', 0, 'C', $fill);
$this->Cell($w[5], 6, $tot, 'LR', 0, 'C', $fill);
$this->Ln();
$totalamount=$totalamount+$tot;
$fill=!$fill;
}

$this->Cell(array_sum($w), 0, '', 'T');
}
public function ColoredTable1($header,$txt2,$txt3,$txt4,$txt5) {
// Colors, line width and bold font
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetDrawColor(0, 0, 0);
$this->SetLineWidth(0.3);
$this->SetFont('', 'B');

// Header
$w = array(70);
$num_headers = count($header);
for($i = 0; $i < $num_headers; ++$i) {
$this->Cell($w[$i], 7, $header[$i], 1, 0, 'C', 1);
}
$this->Ln();

// Color and font restoration
$this->SetFillColor(255, 255, 255);
$this->SetTextColor(0);
$this->SetFont('');
// Data
$fill = 0;

$this->Cell($w[0], 6, $txt2, 'LR', 0, 'L', $fill);
$this->Ln();
$this->Cell($w[0], 6, $txt3, 'LR', 0, 'L', $fill);
$this->Ln();
$this->Cell($w[0], 6, $txt4, 'LR', 0, 'L', $fill);
$this->Ln();
$this->Cell($w[0], 6, $txt5, 'LR', 0, 'L', $fill);

$this->Ln();
$fill=!$fill;

$this->Cell(array_sum($w), 0, '', 'T');
}
}
function curPageName2() {
return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}

$url= curPageName2();
$len=strlen($url);
$furl=substr($url,0,($len-4));
$furl1=$furl.';1;2;3;4;5;6'."\n";

$fp = fopen('cache/table_data_demo1.txt', 'w');
fwrite($fp, $furl1);
fclose($fp);

// create new PDF document
$pdf = new MYP(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Nicola Asuni');
$pdf->SetTitle('TCPDF Example INVOICE');
$pdf->SetSubject('TCPDF Tutorial');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

//Print all the items in the shopping cart
// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE.'                                   INVOICE', PDF_HEADER_STRING);

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// set font
$pdf->SetFont('times', '', 10);

// add a page
$pdf->AddPage();

// set color for background
$pdf->SetFillColor(255, 255, 127);

// MultiCell($w, $h, $txt, $border=0, $align='J', $fill=0, $ln=1, $x='', $y='', $reseth=true, $stretch=0, $ishtml=false, $autopadding=true, $maxh=0)

// set some text for example
$txt = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.';
$header = array('Tax Date', 'Invoice No.');

$html = <<<EOD
<p>Suite-10<br/>3-11 Imperial Road<br/>London<br/>Greater London SW6 2AG<br/><br/></p>
EOD;

$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='L', $autopadding=true);

$pdf->ColoredTable($header, $account, $counter);
$html = <<<EOD
<br />
EOD;

$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

$html = <<<EOD
<br />
EOD;
// Print text using writeHTMLCell()
$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);
$txt2=$storename;
$txt3=$address;
$txt4=$city.",".$country.",".$postal;
$txt5=$number;
$header=array('Invoice To');
$pdf->ColoredTable1($header,$txt2,$txt3,$txt4,$txt5);
$html = <<<EOD
<br />
EOD;

$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

$html = <<<EOD
<br />
EOD;
$totamt = 0;
foreach ($_SESSION['SHOPPING_CART'] as $itemNumber => $item) {
$item['name'];
$item['price'];
$item['qty'];
$tot=$item['qty'] * $item['price'];
$item['size'];
$item['length'];
$totamt=$totamt+$tot;
}

// Print text using writeHTMLCell()
$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

$header = array('Item', 'Size', 'Quantity','Length','Rate','Amount');
;
$data = $pdf->LoadData('cache/table_data_demo1.txt');
$pdf->ColoredTable2($header);

$html = <<<EOD
<br />
EOD;

$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

$pdf->Ln(4);

// set color for background
$pdf->SetFillColor(220, 255, 220);
$vat=(($totamt*20)/100);
$final=$totamt+$vat;
$vat1='   RATE     VAT     NET   ';
$vat2='E@20%     '.$vat.'    '.$totamt;
$vat3='Terms of Payment: Invoice to be paid immediately. All goods remain the property of Intuzuri UK Ltd until full payment has been received. Copyright in the designs listed above remain the property of Intuzuri UK Ltd. Intuzuri UK Ltd Registered in England Company No. 07880714\. Company VAT Number : GB 134 9206 21';

if(strtolower($country) == "usa" || strtolower($country) =="united states of america" || strtolower($country) == "america")
{
$tot1='SUBTOTAL : '.'$'.$totamt;
$tot2='VAT Total : '.'$'.$vat;
$tot5='TOTAL : '.'$'.$final;
$tot3='Payments/Credits : $0.00';
$tot4='Balance Due : '.'$'.$final;
}
else
{
$tot1='SUBTOTAL : '.'GBP '.$totamt;
$tot2='VAT Total : '."GBP ".$vat;
$tot5='TOTAL : '."GBP ".$final;
$tot3="Payments/Credits : GBP 0.00";
$tot4='Balance Due : '."GBP ".$final;
}
$pdf->MultiCell(105, 50, $vat1."\n".$vat2."\n\n".$vat3, 1, 'C', 0, 0, '', '', true, 0, false, true, 40, 'T');
$pdf->MultiCell(65, 50,"\n\n".$tot1."\n\n".$tot2."\n\n".$tot3."\n\n".$tot4."\n\n".$tot5, 1, 'C', 0, 0, '', '', true, 0, false, true, 40, 'M');

// move pointer to last page
$pdf->lastPage();

// ---------------------------------------------------------

//Close and output PDF document
$pdf->Output('example_005.pdf', 'F');

$date = $_POST["datepick"];
$info = $_POST["TextArea1"];

$fileatt = "example_005.pdf"; // Path to the file
$fileatt_type = "application/pdf"; // File Type
$fileatt_name = "Sales_Confirmation.pdf"; // Filename that will be used for the file as the attachment
$email_from = ""; // Who the email is from
$email_subject = "Sales Confirmation"; // The Subject of the email
$email_message = "  ";
$email_message .= "Retailer ".$storename.", has just placed an order. The Order Form is there in the attachment.<br>"
."Please Note Below are the additional details requested by the retailer. <br>"
."Expected Delivery Date : ".$date.".<br>"
."Additional Information : ".$info.".<br>"
."If you would like to Contact the seller, you can contact here : ".$email;
$email_to = ""; // Who the email is to
$headers = "From: ".$email_from;
$file = fopen($fileatt,'rb');
$data = fread($file,filesize($fileatt));
fclose($file);
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";
$email_message .= "This is a multi-part message in MIME format.\n\n" .
"--{$mime_boundary}\n" .
"Content-Type:text/html; charset=\"iso-8859-1\"\n" .
"Content-Transfer-Encoding: 7bit\n\n" .
$email_message .= "\n\n";
$data = chunk_split(base64_encode($data));
$email_message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatt_type};\n" .
" name=\"{$fileatt_name}\"\n" .
//"Content-Disposition: attachment;\n" .
//" filename=\"{$fileatt_name}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .
$data .= "\n\n" .
"--{$mime_boundary}--\n";
$sent = @mail($email_to, $email_subject, $email_message, $headers);

}

if (isset($_POST['submit']))
{
$counter++;
$field = "counter";
$value= $counter;
$database->updatecounter($username,$field,$value );
//Everything is good, proceed
sendmail($storename,$address,$city,$country,$postal,$number, $email, $account, $counter);

$result_message = "Thank You, You order have been successfully placed, You will recieve an email shortly., ";
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Intuzuri Retail Online Order Form</title>
<script type="text/javascript" src="datepickr.js"></script>

<style type="text/css">

.calendar {
font-family: 'Trebuchet MS', Tahoma, Verdana, Arial, sans-serif;
font-size: 0.9em;
background-color: #EEE;
color: #333;
border: 1px solid #DDD;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
padding: 0.2em;
width: 14em;
}

.calendar a {
outline: none;
}

.calendar .months {
background-color: #F6AF3A;
border: 1px solid #E78F08;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
color: #FFF;
padding: 0.2em;
text-align: center;
}

.calendar .prev-month,
.calendar .next-month {
padding: 0;
}

.calendar .prev-month {
float: left;
}

.calendar .next-month {
float: right;
}

.calendar .current-month {
margin: 0 auto;
}

.calendar .months a {
color: #FFF;
text-decoration: none;
padding: 0 0.4em;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
}

.calendar .months a:hover {
background-color: #FDF5CE;
color: #C77405;
}

.calendar table {
border-collapse: collapse;
padding: 0;
font-size: 0.8em;
width: 100%;
}

.calendar th {
text-align: center;
}

.calendar td {
text-align: right;
padding: 1px;
width: 14.3%;
}

.calendar td a {
display: block;
color: #1C94C4;
background-color: #F6F6F6;
border: 1px solid #CCC;
text-decoration: none;
padding: 0.2em;
}

.calendar td a:hover {
color: #C77405;
background-color: #FDF5CE;
border: 1px solid #FBCB09;
}

.calendar td.today a {
background-color: #FFF0A5;
border: 1px solid #FED22F;
color: #363636;
}

</style>
<style type="text/css">
<!--
#formArea #orderForm #formColumns {
width:800px;
margin:auto;
}
#formArea #orderForm #formColumns #leftColumn {
float:left;
width:400px;
}
#orderForm {
height:500px;
}
#formArea #orderForm #formColumns #rightColumn {
float:right;
width:400px;
}
#formArea #orderForm #formColumns th {
text-align: left;
}
.copyright {
font-size: 9pt;
}
-->
</style>
</head>
<?
/**
* User has already logged in, so display relavent links, including
* a link to the admin center if the user is an administrator.
*/
if($session->logged_in){
?>
<body>
<div align="center">
<?
echo "<b>$session->username</b>, you are logged in. <br><br>"
."[<a href=\"userinfo.php?user=$session->username\">My Account</a>] &nbsp;&nbsp;"
."[<a href=\"useredit.php\">Edit Account</a>] &nbsp;&nbsp;"
."[<a href=\"process.php\">Logout</a>] &nbsp;&nbsp;"
."[<a href=\"index.php\">View Other Products</a>]";
?>
</div>
<div id="pageHeader">
<h1 align="center">View Your Order here</h1>
</div>
<div id="shoppingCartDisplay">
<form action="" method="post" name="shoppingcart">
<?php
//We want to include the shopping cart in the email
ob_start();
?>
<table align="center" width="800" border="1">
<tr align="center">
<th scope="col">&nbsp;</th>
<th scope="col">Item Name</th>
<td scope="col">Unit Price ( <?php if(strtolower($country) == "usa" || strtolower($country) =="united states of america" || strtolower($country) == "america")
{
echo "$";
}
else
{

echo '&#163;';
}
?> )</td>
<th scope="col">Qty</th>
<td scope="col">Cost ( <?php if(strtolower($country) == "usa" || strtolower($country) =="united states of america" || strtolower($country) == "america")
{
echo "$";
}
else
{

echo "&#163;";
}
?> )</td>
<th scope="col">Change Size</th>
<th scope="col">Change Length</th>

</tr>

<?php
//Print all the items in the shopping cart
foreach ($_SESSION['SHOPPING_CART'] as $itemNumber => $item) {
?>
<tr align="center" id="item<?php echo $itemNumber; ?>">
<td><a href="?remove=<?php echo $itemNumber; ?>">remove</a></td>
<td><?php echo $item['name']; ?></td>
<td><?php echo $item['price']; ?></td>
<td><input name="items_qty[<?php echo $itemNumber; ?>]" type="text" id="item<?php echo $itemNumber; ?>_qty" value="<?php echo $item['qty']; ?>" size="2" maxlength="3" /></td>
<td><?php echo $item['qty'] * $item['price']; ?></td>

<td><select name="items_size[<?php echo $itemNumber; ?>]" value="<?php echo $item['size']; ?>" type="text" id="item<?php echo $itemNumber; ?>_size" >
<option selected="selected" value="<?php echo $item['size']; ?>"><?php echo $item['size']; ?></option>
<option value="2">2</option>
<option value="4">4</option>
<option value="6">6</option>
<option value="8">8</option>
<option value="10">10</option>
<option value="12">12</option>
<option value="14">14</option>
<option value="16">16</option>
<option value="18">18</option>
<option value="20">20</option>
<option value="22">22</option>
<option value="24">24</option>
<option value="26">26</option>
<option value="28">28</option>
<option value="30">30</option>

</select>
<?php
$order=strtotime("now");

if($cntry == "USA" || $cntry =="United States Of America" || $cntry == "America")
{
$price=100;
}
else
{
$price=200;
}

?>
<td><select name="items_length[<?php echo $itemNumber; ?>]" type="text" select="<?php echo $item['length']; ?>" id="item<?php echo $itemNumber; ?>_length" >
<option selected="selected" value="<?php echo $item['length']; ?>"><?php echo $item['length']; ?></option>
<option value="46">46</option>
<option value="48">48</option>
<option value="50">50</option>

</select>

</tr>
<?php
}
?>
</table>
<?php $_SESSION['SHOPPING_CART_HTML'] = ob_get_flush(); ?>
<p>
<div align="center">
Please Make all you selections first (Quantity, Size, Length) and then update.<br /><br /><input type="submit" name="update" id="update" value="Update Cart" />&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.php">Keep Shopping</a>

</div>
</p>
</form>
</div>

<div id="formArea">
<?php if (isset($result_message)) {?>
<div align="center"><h3><?php echo $result_message; ?></h3></div>
<?
}
else {
?>
<p align="center">Once selected all your dresses, please submit your order after reviewing your account details.</p>
<div id="orderForm">
<form action="" method="post" name="orderform">
<div id="formColumns">
<div id="leftColumn">

<table width="100%"  border="0" cellpadding="5" cellspacing="0">

<p align="center"><b>Your Account Information</b></p>
<tr height="21">
<td height="21"><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><b>Store Name </b></font></td>
<td height="21"><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><?php echo $storename; ?></font></td>
</tr>
<tr>
<td><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><b>Email Address </b></font></td>
<td><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><? echo $email; ?>
</font></td>
</tr>
<tr>
<td><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><b>Phone Number </b></font></td>
<td><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><? echo $number; ?>
</font></td>
</tr>
<tr>
<td><font size="2" face="Verdana, Arial, Helvetica, sans-serif"><b>Billing Address</b></font></td>
<td><? echo $address.',&nbsp<br>'
."$city, $country, $postal"; ?>
</td>
</tr>

<tr>
<td>
</tr>
<tr>
</tr>
</table>
</div>

<div id="rightColumn">
<table width="100%" height="50%"  border="0" cellpadding="3" cellspacing="0">
<p align="center"><b>Additional Information</b></p>

<tr>
<td align="left">
<div align="left">
<font size="2" face="Verdana, Arial, Helvetica, sans-serif">Expected Delivery Date:&nbsp;&nbsp;</font></div>                                                </td>

<td>
<input required="required" id="datepick" name="datepick" class="date-pick" />

<script type="text/javascript">
new datepickr('datepick', { dateFormat: 'm-d-Y' });
</script>
</td>
</tr>
<tr>
<td>
<div align="left">
<font size="2" face="Verdana, Arial, Helvetica, sans-serif">Additional Details:&nbsp;&nbsp;</font></div>                                                </td>
<td>
<textarea  id="TextArea1" name="TextArea1" cols="20" rows="8"></textarea>
</td>
</tr>
<tr>
<td>
<div align="left">
<input name="submit" type="submit" id="submit" value="Submit"></div>                                                </td>
<td style="color: red;">
*Before submitting please verify that all details are correct.
</td>

</tr>

<tr>
<td>
<div align="left">                                                      </div>                                              </td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</form>
</div>
<?php } ?>
</div>
<?
}
else
{
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=main.php">';

}
?>
</body>
</html> 
```

我试图通过创建另一个会话来做到这一点，但我自己似乎无法完成。

我想让它像...当您将数量更改为 5...所以应该出现 5 个尺寸下拉菜单和 5 个长度下拉菜单。我可以制作下拉菜单，但无法在会话中存储选定的值。

任何帮助表示赞赏。

为了帮助解释这一点，有一个名为 Shopping Cart 的会话。现在有数组项目，如价格大小数量等。现在有一个功能：-

```
else if (isset($_POST['update'])) {
//Updates Qty for all items
foreach ($_POST['items_qty'] as $itemID => $qty) {
//If the Qty is "0" remove it from the cart
if ($qty == 0) {
//Remove it from the cart
unset($_SESSION['SHOPPING_CART'][$itemID]);
}
else if($qty >= 1) {
//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['qty'] = $qty;

}
foreach ($_POST['items_size'] as $itemID => $size) {
//If the Qty is "0" remove it from the cart
if($size >= 1) {
//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['size'] = $size;

}
}
foreach ($_POST['items_length'] as $itemID => $length) {
//If the Qty is "0" remove it from the cart

//Update to the new Qty
$_SESSION['SHOPPING_CART'][$itemID]['length'] = $length;

}
} 
```

在这里更新每个产品的尺寸和长度。我想要每个数量。例如，如果您选择 5 个数量，客户应该能够选择 5 个尺寸和 5 个长度，无论数量有多大，当前只能选择 1 个。也许这会帮助您理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:32:11.977

首先，您需要通过它们的 id 将项目存储在会话中，而不是通过它们的名称或自动生成的索引。如果名称更改，您将无法在数据库中找到它们。您想直接在 中使用该 id `$_SESSION['SHOPPING_CART'][ 'item_id' ] = array()`，因为这将允许您快速找到该项目并使用它。

由于同一项目有多个实体，因此需要使用更复杂的数组来存储它们。简单的解决方案可能如下：

```
$ITEM = array(
    'name' => $_GET['add'],
    'qty' => $_GET['qty'],
    'price' => $_GET['price'] * $_GET['qty'],
    'size' => array_fill(0, $_GET['qty'], $_GET['size']),
    'length' => array_fill(0, $_GET['qty'], $_GET['length']),
    'code' => $_GET['code']
);
$_SESSION['SHOPPING_CART'][ $_GET['item_id'] ] =  $ITEM; 
```

当用户想要更改数据时，您可以为大小和长度数组中的每一行创建下拉列表，然后相应地保存它们。

但是，我建议使用某种`user_id`. 在当前的设计中，如果用户不小心关闭了他的浏览器，或者只是在会话到期时回来，他的整个订单都将丢失。

**编辑：**使用尺寸和长度。

```
foreach ($_SESSION['SHOPPING_CART'] as $item_id => $item)
{
    echo '<p>Name: ' . $item['name'] . ' for ' . $item['price'] . '$</p>';
    foreach($item['size'] as $j => $size)
    {
        echo '<p>#' . $j . ': size ' . $size . ', length ' . $item['length'][$j] . '</p>';
    }
} 
```

将 echo 替换为用于编辑的输入并将它们放入表单中。

# php - 将 curl_exec() 输出保存到 xml 文件时如何去除或转义 html 标签

> ID：13987729
> 
> 赞同：0
> 
> 时间：2012-12-21T09:46:11.797
> 
> 标签：php, html, curl, joomla, google-calendar-api

我正在从我的 Google 日历中导入一些事件，我正在这样做：

```
$ch = curl_init("my_google_calendar_url");
$fp = fopen("cal.xml", "w");
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch)
fclose($fp);
curl_close($ch); 
```

我正在将所有数据转储到 XML 文件中，但所有 html 标签也与数据一起转储到输出中，这反过来又拆分输出，例如

新放假时间：2012年12月21日周五13:00-14:00  IST<br>

```
&lt;br&gt;Where: Aus
&lt;br&gt;Event Status: confirmed</summary><content type='html'>When: Fri 21 Dec 2012 13:00 to 14:00 
IST&lt;br /&gt;

&lt;br /&gt;Where: Aus
&lt;br /&gt;Event Status: confirmed
&lt;br /&gt;Event Description: It&amp;#39;s going to be awesome.</content> 
```

这是我在 xml 文件中得到的一小部分内容。我想剥离所有 html 标签，如“<”等，以便轻松提取 xml 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:56:03.133

HTML 被视为 XML 中的数据，因此：

1.  使用 XML 解析器解析 XML
2.  从生成的 DOM 中获取 HTML
3.  使用 HTML 解析器[解析HTML](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)
4.  从中提取您需要的任何数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:56:31.870

删除 CURLOPT_FILE 选项并使用`$output = curl_exec($ch);` You can then `$output = strip_tags(html_entity_decode($output));`and`fwrite($fp, $output);`

# java - 实现 goto 语句

> ID：13987731
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:46:24.123
> 
> 标签：java, coding-style, goto

实际上我正在尝试研究一个被 GOTO 语句混淆的代码说..

```
private void fun()
{
if(somecondition)
    goto LABEL3;

...
...

LABEL3:
    return;
    Exception e;
    e;
    if(true) goto LABEL3; else LABEL7;

...
...

LABEL7:
    //some statements
} 
```

并且在通过 IF 语句调用 LABEL3 时，
函数会停止吗？LABEL7会被调用吗？
**程序将如何进行？**

**这是一个反编译的 java 类文件**
*反编译的类文件，其中一些语句被 goto 替换（例如，带有 goto 和 IF 组合的 WHILE），使它们难以阅读。*

**编辑**

因为我认为反编译的类文件将完全不符合 java 语法，所以我发布了这个问题，但反编译器通常用于生成伪代码，但保留了很少的本机语法。是的，没有 goto，但它只是虚拟关键字，是的 LABEL3 可能会返回而其他人无法访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:52:03.300

这段代码在无法完全反编译 .class 时看起来像 jad 的输出

如果是这种情况，请检查错误（在类文件末尾的 java 注释中）。它可能会有一些关于您发布的代码块的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:50:37.447

如果条件`if(somecondition)`成立，函数将退出。因此，`LABEL7`不会被调用。 `return`应该表示“从函数返回”而不是从 goto 块返回。至少如果 Java（或其他语言，从注释看来不是 Java）没有改变`goto`and的通常定义`return`。

实际上，我想知道所有这些东西`return;`是为了什么。`return`它永远不应该被调用，因为(label)之后没有其他入口点。

# jquery - HTML5 地理位置保存到数据库

> ID：13987735
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:46:36.777
> 
> 标签：jquery, html, geolocation

我有一个简单的 HTML5 GeoLocation 脚本。

```
<script>
var x=document.getElementById("demo");
function getLocation()
{
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition);
    }
    else
    {
        x.innerHTML="Geolocation is not supported by this browser.";
    }
}

function showPosition(position)
{
    x.innerHTML="Latitude: " + position.coords.latitude + 
        "<br>Longitude: " + position.coords.longitude;  
}
</script> 
```

问题是如何获取`position.coords.latitude`&`position.coords.longitude`并将其放入我的数据库中？

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:50:17.737

你可以像这样写一个 ajax 帖子：

```
$.post('recv.php', position.coords) 
```

然后将php放入数据库中。

# playframework-2.0 - Play Framework 2.1 - 模板参数类型参数

> ID：13987736
> 
> 赞同：6
> 
> 时间：2012-12-21T09:46:44.060
> 
> 标签：playframework-2.0, template-engine, type-parameter, playframework-2.1

在我的模板中，我想使用有界类型参数而不是精确类型：

```
@(myForm: Form[T]) 
```

哪里`T`像`T <: MyType`

以使其在使用中更加通用。但是，我找不到指定这种行为的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T10:21:18.320

您可以使用

```
Form[_ <: MyType] 
```

这样你就可以传入任何`Form`带有扩展 MyType 的类型参数。

# javascript - Javascript 毫秒记法在 Firefox 中不起作用

> ID：13987739
> 
> 赞同：0
> 
> 时间：2012-12-21T09:46:57.367
> 
> 标签：javascript

谁能帮我这个 ？

```
var current_date=new Date('2012/12/21 22:59:59.997');
var result=current_date.getTime(); 
```

我在 Firefox 中没有得到结果，但它确实显示在 chrome 中，在 FF 中显示无效日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:57:26.550

您应该能够执行以下操作（使用[`date.setMilliseconds`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMilliseconds)）：

```
var dateString = '2012/12/21 22:59:59.997';
var dateStringSplit = dateString.split('.');
var myDate = new Date(dateStringSplit[0]);
myDate.setMilliseconds(dateStringSplit[1]);
console.log(myDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:50:48.960

Firefox 和其他一些浏览器（即 Safari 或 Opera）不喜欢毫秒。

```
// Split off the part after the dot
var current_date = new Date('2012/12/21 22:59:59.997'.split('.')[0]);

// Works everywhere!
var result = current_date.getTime(); 
```

如果您真的想使用毫秒，则必须将日期分成多个部分并与它们一起使用`new Date()`。从 MDN 文档中，以下是选项：

```
new Date(year, month, day [, hour, minute, second, millisecond]) 
```

或者，正如[h2ooooooo](https://stackoverflow.com/a/13987917/851498)所说，您可以使用拆分日期的第二部分并使用`setMilliseconds`.

总的来说，你有很多解决方案。选择最不惹恼你的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:51:48.293

您使用的格式不是[Date.parse的标准格式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)

您可能想要拆分字符串并单独设置各个部分。另外，请正确管理时区，因为日期字符串在哪个时区并不明显。

# vb6 - VB6 反编译问题

> ID：13987741
> 
> 赞同：1
> 
> 时间：2012-12-21T09:47:11.097
> 
> 标签：vb6, decompiling

我必须反编译一个 VB6 dll，得到一个反编译器（实际上尝试了其中的 4 个），甚至支付了专业许可证，但我当然遇到了一个问题：检索到的代码甚至看起来不像以前的代码，它看起来像一个很多信息丢失了。我确实明白这是一条单向之路，但也许有人可以从技术上向我解释为什么 VB6 编译的 dll 会丢失机器代码中的一些信息，而这些信息在以后的反编译过程中无法检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:42:31.777

除非使用编译为 P-Code 的选项编译代码，否则这是不可能的。例如，如果您查看[http://www.vb-decompiler.org/](http://www.vb-decompiler.org/)，它清楚地表明它仅适用于 P 代码。

问题是默认情况下 VB6 将编译为机器代码，而不会转换为 VB6。您可能能够恢复 UI，因为这不是代码，但除此之外，您很不走运。

# java - AbstractFacesServlet，如何在 Java 中实现 AbstractFacesServlet.java？

> ID：13987744
> 
> 赞同：0
> 
> 时间：2012-12-21T09:47:19.270
> 
> 标签：java, jakarta-ee, facescontext

我创建了网络服务，在那里我得到了 url params，我将它设置为 Object。在它之后，当我想设置为 facesContext 时，它给了我 NULL。我得到了在项目中实现 AbstractFacesServlet.java 类的建议，但知道怎么做吗？这就是我正在使用的代码_

```
public class ReserRes extends ServerResource {

@Post("xml")
public void $post() throws Throwable {

...........
 .....
     FacesHelper.setValueBindingObject("SelectedOtaReservationBean",
             reservationBean);
    ......
    } 
```

而*setValueBindingObject(,,)*是

```
public static final void setValueBindingObject(String expression,
        final Object value) {

    FacesContext facesContext = FacesContext.getCurrentInstance();

    if (facesContext == null)    // Always throwing NULL
        throw new NullPointerException(
                "Could not get a reference to the current Faces context");

    Application application = facesContext.getApplication();
    ValueBinding vb = application.createValueBinding(expression);
    vb.setValue(facesContext, value);

} 
```

在此我不与任何 .jsp 或任何类型的 UI 交互。我正在获取参数并与对象绑定。这是错误的还是为 ws 实现 FacesContext 的任何方式？

我有一个建议[http://cwiki.apache.org/MYFACES/access-facescontext-from-servlet.html](http://cwiki.apache.org/MYFACES/access-facescontext-from-servlet.html)使用这个类。有朋友知道我如何使用这个实现或设置对象到 FacesContext 吗？

谢谢

# ruby-on-rails - ROR 如何链接到正确的链接

> ID：13987748
> 
> 赞同：0
> 
> 时间：2012-12-21T09:47:36.180
> 
> 标签：ruby-on-rails

我正在尝试在 Rails 上创建一个新项目，并且我有课程提供者。我制作了一个新的 erb 表单文件（称为 edit_info.erb）来编辑一些提供者信息。

我无法发送指向此页面的链接。我试过 -

```
<%= link_to 'Edit Information', edit_info_provider_path(@provider) %> 
```

还有一些，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:52:52.157

```
$ rake routes 
```

运行此命令以查看路由名称。

如果您的页面未列出，您可能需要在`config/routes.rb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:56:46.273

如果您使用 Rails 脚手架，它将为您创建 RESTful 路由和所有其他内容。如果这是您的第一个 Rails 项目，最好使用脚手架，这会让您站稳脚跟。

我建议您在学习使用 Rails 时将[Rails 指南作为您的第一站。](http://guides.rubyonrails.org/)

# c# - linq 到实体和存储表达式

> ID：13987757
> 
> 赞同：1
> 
> 时间：2012-12-21T09:48:05.480
> 
> 标签：c#, linq, linq-to-entities, linq-expressions, predicatebuilder

我从事对实体使用一些动态 linq 查询的项目。我有大量的案例，为了避免代码重复，我重构了一个方法。但是使用不在 store 表达式中的方法会导致抛出异常。一种解决方案是将方法结果封装成一个表达式，该表达式可由 linq 解释为实体查询。

考虑该代码：

```
parentExpression = x => x.child.Any(y=>IsGoodChild(y,childType, childSize));

private bool IsGoodChild(child c, int childType, int childSize){
     return c.type == childType && c.size == childSize;
} 
```

“parentExpression”是我的 EF 的“Parent”类型的谓词。此代码抛出异常，“IsGoodChild”方法返回一个布尔值并且不能被 linq 解释为实体。

所以，我想要这样的东西：

```
parentExpression = x => x.child.AsQueryable().Any(IsGoodChild(childType, childSize));

private System.Linq.Expression.Expression<Func<child, bool>> IsGoodChild(int childType, int childSize){
     return  ????
} 
```

那么，即使不采用 x.child 属性，“IsGoodChild(...)”如何才能工作？谢谢提前

* * *

回覆，

我尝试了一些东西，当我直接在这样的表达式中编写 lambda 时：

```
parentExpression = x => x.child.Any(y=>y.type == childType && y.size == childSize); 
```

我使用了 resharper 的提取方法并生成它：

```
private Expression<Func<child,Boolean>> IsGoodChildFunctional(Int32 childType, Int32 childSize)
{
    return c => c.type == childType && c.size == childSize; 
} 
```

但我也有 .NET Framework 数据提供程序错误 1025' 错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:34:20.120

在这种情况下，编译器很聪明，给定一个匿名方法，它会根据声明的类型在表达式树或编译的 lambda 之间切换。以下应该有效：

```
private Expression<Func<child,Boolean>> 
IsGoodChildFunctional(Int32 childType, Int32 childSize)
{
    return c => c.type == childType && c.size == childSize; 
} 
```

这将像这样使用：

```
parentExpression = x => x.child
                         .AsQueryable()
                         .Any(IsGoodChildFunctional(childType,childSize)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:25:24.260

创建一个静态泛型方法，该方法将返回一个`Expression`. `Expression`是使用工厂方法构建的。

```
public static Expression<Func<TTargetObject,Boolean>> IsGoodChildFunctional<TTargetObject>(Int32 childType, Int32 childSize)
{
            var e = Expression.Parameter(typeof(TTargetObject), "e");
            var childTypeMember = Expression.MakeMemberAccess(e, typeof(TTargetObject).GetProperty("childType"));
            var childSizeMember = Expression.MakeMemberAccess(e, typeof(TTargetObject).GetProperty("childSize"));
            var  childTypeConstant = Expression.Constant(childType, childType.GetType());
            var  childSizeConstant = Expression.Constant(childSize, childSize.GetType());
            BinaryExpression b;
            BinaryExpression bBis;
            Expression<Func<TTargetObject, bool>> returnedExpression;
            b = Expression.Equal(childTypeMember , childTypeConstant );
            bBis2 = Expression.Equal(childSizeMember, c2);
            var resultExpression = Expression.AndAlso(b, bBis);
            returnedExpression = Expression.Lambda<Func<TTargetObject, bool>>(resultExpression , e);
            return returnedExpression;
} 
```

它是这样调用的：

```
var predicat = IsGoodChildFunctional<child>(childType, childSize);
parentExpression = x => x.child.Any(predicat); 
```

# android - GCM：来自 GCMIntentService 的 onMessage() 被多次调用？

> ID：13987759
> 
> 赞同：7
> 
> 时间：2012-12-21T09:48:18.100
> 
> 标签：android, google-cloud-messaging

我正在我的应用程序中实现 GCM。我已按照 developer.android.com 的 GCM 教程中给出的所有步骤进行操作

我能够从 GCM 成功获取注册 ID，并将此 ID 传递给我的应用程序服务器。这样注册步骤就成功执行了。

现在，当我的应用服务器向我的设备发送 PUSH 消息时，服务器收到消息为**SUCCESS=8** FAILURE=0 等，即服务器发送消息成功，但 OnMessage 被调用 8 次取决于成功值。

我连接的设备在没有任何代理设置的情况下抛出我的组织 wifi。

**所以我的问题是：为什么我收到来自 GCM 的 PUSH 消息与 Success 值一样多。为什么谷歌提供了这么多时间？可能是什么原因？**

我的 GCMBaseIntentService 看起来像

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super(GCMActivity.SENDER_ID);
    }

    @Override
    protected void onError(Context arg0, String arg1) {

        Log.d("GCM", "RECIEVED A ERROR MESSAGE");
        // TODO Auto-generated method stub

    }

    @Override
    protected void onRegistered(Context arg0, String registrationId) {

//Send the registration id to my app server to store the reg id list
        GCMActivity.sendRegIdtoApplicationServer(registrationId);

    }

    @Override
    protected void onUnregistered(Context arg0, String registrationId) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.d("GCM", "RECIEVED A MESSAGE");

        // Get the data from intent and send to notificaion bar

        String data = intent.getStringExtra("data");
         String action = intent.getAction();

        if((action.equals("com.google.android.c2dm.intent.RECEIVE"))) {
            try {
                JSONObject jsonObject = new JSONObject(data);
                boolean updateStatus = jsonObject.getBoolean("update");

                if (updateStatus) {
                    //Showing Notification to user

                }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    } 
```

我的活动看起来像

```
public class GCMActivity extends Activity {

    public final static String SENDER_ID =  "872355133485";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gcm);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);

        } else {

//          sendRegIdtoApplicationServer(regId);
          Log.v("gh", "Already registered");
          System.out.println("RegisterID:"+ regId);
            }
        }

And Manifest file will be 

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.aspire.gcmsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

  <permission android:name="com.aspire.gcmsample.permission.C2D_MESSAGE" android:protectionLevel="signature" />

    <uses-permission android:name="com.aspire.gcmsample.permission.C2D_MESSAGE" />
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true">

        <activity
            android:name=".GCMActivity"
            android:label="@string/title_activity_gcm" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

       <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
                 android:permission="com.google.android.c2dm.permission.SEND" >
                <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.RECEIVE" />

                    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                    <category android:name="com.aspire.gcmsample" />

                </intent-filter>
        </receiver>

       <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

这是我的服务器端代码

```
 Properties apHeaders = new Properties();

        // Use your own credentials for the below three lines
        apHeaders.put("Content-Type", "application/json");
        apHeaders.put("Authorization","key="+apiKey);

        /*String data = "{\"registration_ids\":"+ devicesList +", \"data\":" +
                "{\"data\":{\"score\" : \"1-0\", \"scorer\" : \"Ronaldo\", \"time\" : \"44\"}}}";*/

        // get all registration Device ID from database
        ArrayList<String> deviceId = DBRegistration.getInstance().fetchRegId();

        String data = "{\"registration_ids\":"+ deviceId +", \"data\":" +
            "{\"data\":{\"update\" : \"true\", " +
            "\"file\": \"http://192.168.4.210:8080/FileDownload/DownloadFile?path=GCMSample.apk\"}}}";

        String result = DBRegistration.getInstance().sendRequest(url, data, apHeaders);**

        System.out.println("responseC"+ result);
        out.println(result);
        out.flush(); 
```

字符串 apServerUrl = "https://android.googleapis.com/gcm/send";

```
public String sendRequest(String apServerUrl, String payload, Properties headers) {

        // Setup Http URL connection

        HttpURLConnection connection = null;

        // Enable proxy if it needed.
        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(PROXY_URL, PROXY_PORT));

        try {
            URL url = new URL(apServerUrl);
            // Enable proxy if needed.
            connection = (HttpURLConnection) url.openConnection(proxy);
            //connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setDoOutput(true);
            Object[] keys = headers.keySet().toArray();
            for (int i = 0; i < keys.length; i++) {
                connection.setRequestProperty((String) keys[i],
                        (String) headers.get(keys[i]));
            }
            //connection.setRequestProperty("Content-Length", ""+ payload.length());
        } catch (Exception e) {
            System.out.println("Failed setting up HTTP Connection\n" + e);
        }

        // Send the Request
        String line = "";
        String returnedResponse = "";
        BufferedReader reader = null;

        System.out.println("Request: " + payload);

        try {
            OutputStream os = connection.getOutputStream();
            os.write(payload.toString().getBytes("UTF-8"));
            os.close();
            int status = connection.getResponseCode();            
            if (status != 200) {
                System.out.println("HTTP Error code " + status
                        + " received, transaction not submitted");
                reader = new BufferedReader(new InputStreamReader(connection
                        .getErrorStream()));
            } else {
                reader = new BufferedReader(new InputStreamReader(connection
                        .getInputStream()));
            }

            while ((line = reader.readLine()) != null) {
                returnedResponse += line;
            }
        } catch (Exception e) {
            returnedResponse = e.getMessage();
            System.out.println(e);
        } finally {
            try {
                if (reader != null)
                    reader.close();
                if (connection != null)
                    connection.disconnect();
            } catch (Exception e) {
                returnedResponse = e.getMessage();
                System.out.println(e);
            }
        }
        System.out.println(returnedResponse);
        return returnedResponse;
    } 
```

GCM 服务器对我的应用服务器的响应。

```
{"multicast_id":6552291927399218343,"success":13,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1356332586480671%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586480674%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481759%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586480807%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481944%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586480996%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481939%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586482000%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481997%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481942%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586482003%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586481948%79fa3a68f9fd7ecd"},{"message_id":"0:1356332586480995%79fa3a68f9fd7ecd"}]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:46:18.717

您从 GCM 发送到服务器的响应是什么样的？您可能使用不同的 ID 分别注册了 8 次相同的设备，这对我来说似乎是最有可能的原因。

您还应该查看发送到 GCM 服务器的代码，以确保您不会发送八次相同的注册 ID。

此处记录了响应格式：[https ://developer.android.com/google/gcm/gcm.html#response](https://developer.android.com/google/gcm/gcm.html#response)

基于此，我会查看您是否收到任何规范的 ID，这将有助于向您展示您已多次注册相同的设备。您可以在此处阅读有关如何处理规范 ID 的更多信息：[android GCM get original id of canonical id](https://stackoverflow.com/questions/13958079/android-gcm-get-original-id-of-canonical-id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:14:12.987

在文档[http://developer.android.com/google/gcm/gcm.html#response](http://developer.android.com/google/gcm/gcm.html#response)上，`success`是已处理且没有错误的消息数。也许在这种情况下，GCM 会向相同的 ID 发送 8 次消息。

# iphone - UITableView 重用导致破碎的单元格

> ID：13987760
> 
> 赞同：0
> 
> 时间：2012-12-21T09:48:22.627
> 
> 标签：iphone, objective-c, uitableview

当滚动我的 UITableView 时（往往是当我快速滚动它时），我的单元格的数据会混淆，因此标签可能会重复等。

我知道重复使用单元格可能会导致这种情况，但是如果用户真的快速向下滚动列表并且所有单元格都混淆了，我应该如何避免这种情况？

谢谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"VideoListCell";
    VideoListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[VideoListCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    if (isPlaylistView)
    {
        //Fill cell with data
    }
    else if (isPlaylistDetailView || isSearchResultsView)
    {
        //Fill cell with data
    }
    else
    {
        //Playlist button and uploads
        if (indexPath.section == 0)
        {
            //Fill cell with data
        }
        else
        {
            //Fill cell with data
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:51:51.957

您通常使用这种代码：

```
cell = dequeReusableCell;
if (cell == nil) { 
    create cell;
    initialize cell;
}

fill cell with actual data from current row
return cell; 
```

如果你将代码“用当前行的实际数据填充单元格”移动到“if”中——你会得到你现在得到的那种行为。

所以答案将是“在初始化后用数据填充单元格，在“if（cell == nil）”块之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:24:09.210

在您的自定义单元类覆盖`prepareForReuse`方法中。在此方法中，将标签的文本设置为 nil，并将 imageview 的图像也设置为 nil。每次重用单元格时都会调用此函数，因此您的问题将由此解决。可能是这样的

```
- (void)prepareForReuse{
    [super prepareForReuse];
    self.titleLabel.text = nil;
    self.unitImageView.image = nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:53:41.563

设置`dequeueReusableCellWithIdentifier`为`nil`例如..

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil]; 
```

**更新：**

请参阅此示例...我还使用自定义 Gridview 在单元格中加载了许多数据...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString* cellIdentifier = @"gridCell";

    UITableViewCell *gridCell = [tableView dequeueReusableCellWithIdentifier:nil];

    if(gridCell == nil)        
    {
        gridCell =  [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

    }
    return gridCell;
} 
```

希望这对你有帮助....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T09:51:41.847

`UITableView`如果单元格所在的位置当前不在屏幕上，则只会将单元格出列以供重复使用。因此，您不必担心“混淆”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T09:53:13.487

```
static NSString *cellIdentifier=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell==nil)
    {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
    } 
```

我想这会对你有所帮助。

# xcode - 在另一个类的 nsmuttable 数组中添加一个类对象

> ID：13987761
> 
> 赞同：0
> 
> 时间：2012-12-21T09:48:22.360
> 
> 标签：xcode

我有两个班级的*成绩*和*航段*

```
Result
{
    // Here some properties declared and
    // Nsmuttable array also to store flight segment class object 
} 
```

我创建两个类的对象并以这种方式添加

```
[objresult.flightsegmentarray addobject: objflightsegment] 
```

但这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:58:46.990

您应该确保您已在“objresult”对象上正确声明了“flightsegmentarray”属性，并在尝试添加对象之前对其进行了初始化。

要声明属性 - 假设您的 objresult 是 ObjResult 类型 - 您应该在 ObjResult .h 文件中写入：

```
@property (nonatomic, strong) NSMutableArray *flightsegmentarray; 
```

然后，您必须初始化它，通常在您的 .m 文件中：

```
- (id)init {
   if ((self=[super init])) {
      _flightsegmentarray = [NSMutableArray new];
   }
   return self;
} 
```

现在，一旦你的 objresult 对象被初始化，你将有一个空的可变数组可用，你可以开始添加对象：

```
objresult = [[ObjResult alloc] init];
objflightsegment = [[ObjFlightSegment alloc] init];
[objresult.flightsegmentarray addobject: objflightsegment]; 
```

# resharper - Resharper 打破 Edit.FindAllReferences （不仅仅是快捷方式）

> ID：13987765
> 
> 赞同：0
> 
> 时间：2012-12-21T09:48:42.283
> 
> 标签：resharper, keyboard-shortcuts

我安装了 ReSharperSetup.7.1.1000.900.msi。这破坏了 Visual Studio 2008 中的 Edit.FindAllReferences。

我并不是说它破坏了 Shift-F12，它是 Edit.FindAllReferences 的常用 VS2008 快捷方式，我的意思是它破坏了 Edit.FindAllReferences 本身。

我知道这一点是因为 Edit.FindAllReferences 绑定到 Ctrl+K,R 并且按下它会导致工具提示显示“未找到'[whatever]'的用法”。

我卸载了 Resharper，然后 Edit.FindAllReferences 再次工作。

我用谷歌搜索了大约一个小时试图解决这个问题，但没有解决方案有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:39:12.893

由 JetBrains 修复：

> 感谢您与我们联系。
> 
> 有一个已知问题 - [http://youtrack.jetbrains.com/issue/RSRP-336714](http://youtrack.jetbrains.com/issue/RSRP-336714)
> 
> 似乎问题在这里得到了解决 - [http://download-ln.jetbrains.com/resharper/ReSharperSetup.7.1.1000.1094.msi](http://download-ln.jetbrains.com/resharper/ReSharperSetup.7.1.1000.1094.msi)。
> 
> 请让我知道结果。
> 
> 对此造成的不便，我们表示歉意。
> 
> 谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:17:54.957

'[whatever]' 的用法是 R# 的“查找用法”功能 - 默认情况下映射到 Ctrl+K,R 以提供更好的查找引用。如果您不想要 R# 的版本，则将键映射更改回 Visual Studio 的默认 Edit.FindAll...

# mysql - SQL Server 等效于 MySQL DATE_FORMAT()

> ID：13987772
> 
> 赞同：3
> 
> 时间：2012-12-21T09:49:12.300
> 
> 标签：mysql, sql, sql-server

希望我们今天过得愉快，一切都准备好迎接圣诞节了。

有一个快速的问题。我正在将 MySQL 函数转换为 SQL Server，我已经转换了大部分函数，​​除了一个具有以下内容的部分：

```
@description = CONCAT(@description, date_format(@INLastUpdated, '%H:%i %d %b %Y')) 
```

我要做的是基本上重新创建[date_format 函数](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-format)以指定的相同方式格式化日期，但我不知道该怎么做。从我在 MySQL 文档中看到的，选择的格式将给出小时：分钟日/短月份名称/年份。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:59:59.960

你可以试试这个：

```
DECLARE @description VARCHAR(1000) = 'test'
DECLARE @INLastUpdated DATETIME = '2012-12-21 14:32:22'
SET @description = @description + ' ' 
    + LEFT(CONVERT(VARCHAR(8), @INLastUpdated, 8), 5) + ' ' 
    + CONVERT(VARCHAR(20), @INLastUpdated, 106)

SELECT @description 
```

但要小心，因为格式 106 取决于本地语言设置。**[在MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)**上阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:55:23.893

等效功能是[CONVERT](http://msdn.microsoft.com/es-es/library/ms187928.aspx)。但你基本上不走运。SQL Server 不允许挑选日期标记。您需要浏览可用的完整日期内置格式并选择一种，或者尝试通过字符串连接组合输出，如下所示：

```
CONVERT(VARCHAR, CURRENT_TIMESTAMP, 103) + ' ' + CONVERT(VARCHAR(8), CURRENT_TIMESTAMP, 114) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:21:18.447

哪个版本的 SQL Server？在 SQL Server 2012 中，我们现在有了 FORMAT 函数。

这个，在 MySQL

```
date_format(@INLastUpdated, '%H:%i %d %b %Y') 
```

使用 FORMAT 函数为 SQL Server 2012 转换为如下内容：

```
DECLARE @d DATETIME = GETDATE();
SELECT  FORMAT(@d, 'HH:mm d MMM yyyy', 'en-US') AS 'DateTime Result'; 
```

[BOL SQL Server 2012 > 格式 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/hh213505%28v=sql.110%29.aspx)

# javascript - 如何使动画的最终状态持续存在？

> ID：13987774
> 
> 赞同：0
> 
> 时间：2012-12-21T09:49:19.207
> 
> 标签：javascript, html, css, animation

我将 div 的宽度设置为从 0 到 100% 的动画，动画完成后我希望最终结果保持不变。这是我到目前为止所拥有的：

```
 <style>
    #element {
        background: yellow; 
        bottom:0; 
        height:70px;
        animation:myfirst 5s;
        -moz-animation:myfirst 5s; /* Firefox */
        -webkit-animation:myfirst 5s; /* Safari and Chrome */
        -o-animation:myfirst 5s;}
    @keyframes myfirst {
        from {width:0px;}
        to {width:100%;}
    }

    @-moz-keyframes myfirst /* Firefox */ {
        from {width:0px;}
        to {width:100%;}
    }

    @-webkit-keyframes myfirst /* Safari and Chrome */ {
        from {width:0px;}
        to {width:100%;}
    }

    @-o-keyframes myfirst /* Opera */ {
        from {width:0px;}
        to {width:100%;}
    } 
```

有没有 CSS 方式或 JS 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:52:31.583

使用`forwards`or`both`属性：

```
-webkit-animation:myfirst 5s forwards; 
```

然后动画将在 100% 处停止并持续存在。

# javascript - 需要在单个名称下对 gridview 中的链接按钮进行分组。

> ID：13987777
> 
> 赞同：1
> 
> 时间：2012-12-21T09:49:36.580
> 
> 标签：javascript, jquery, asp.net, c#-4.0

我有一个 Gridview，其中一个列下有 4 个链接按钮。直接在 gridview 中拥有这 4 个链接按钮会增加 gridview 的宽度。因此，我打算将所有这些链接按钮放在一个*名称*下，当用户将鼠标指针悬停在*单个名称*上时，四个链接应该出现在用户单击以获取所需数据的模式弹出窗口中。

示例：我在网格中有.. ABCD 之类的链接...我想将这些链接放在一个名称下

请帮助我..我知道这可以用 Jquery 来实现..任何人都可以告诉我正确的路径吗？

提前致谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:11:20.737

这就是你需要的：

**[测试](http://jsfiddle.net/GKfZM/564/)**

您可以将鼠标悬停在`letters`“菜单”上，然后会出现一个弹出窗口。一探究竟！！

然后你必须把`html`代码放到你的网格中。

```
// HTML CODE
<div id="your-dialog-id">
<table>
   <tr> 
       // THE LINKS
       <td><h3>A</h3></td>
       <td><h3>B</h3></td>
       <td><h3>C</h3></td> 
       <td><h3>D</h3></td>
    </tr>
</table>
</div>
<p><a href="#" id="open">LETTERS</a></p>​

// JQUERY CODE
$("#open").mouseover(function(){
   $("#your-dialog-id").dialog("open");
});

// This is fired when hover over LETTERS MENU
$("#your-dialog-id").dialog({autoOpen:false,modal: true, title:'letters'});

// This is fired when clic over a single letter
$('h3').click(function(){
  alert($(this).text() + " clicked");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:59:12.533

您可以将所有链接按钮放在同一个 TemplateField 下，如下所示

```
 <asp:TemplateField HeaderText="LETTERS">   
            <ItemTemplate>   
                <asp:LinkButton runat="server" ID="A" Text="A" OnClick="A_OnClick"></asp:LinkButton>   
                <asp:LinkButton runat="server" ID="B" Text="B" OnClick="B_OnClick"></asp:LinkButton>    
                <asp:LinkButton runat="server" ID="C" Text="C" OnClick="C_OnClick"></asp:LinkButton>   
                <asp:LinkButton runat="server" ID="D" Text="D" OnClick="D_OnClick"></asp:LinkButton>   
            </ItemTemplate>   
        </asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:51:35.450

您可以将通用 css 分配`class`给链接按钮并使用 jquery 类`selector`来访问它们。

```
linkbuttons = $('.className'); 
```

# iphone - 在 iPhone 中，从 iOS 应用程序下载的文件保存在哪里

> ID：13987788
> 
> 赞同：6
> 
> 时间：2012-12-21T09:50:15.950
> 
> 标签：iphone, ios

从我的应用程序中，我可以通过 NSURLConnection 从服务器下载一个 zip 文件。在下载时，我正在将其写入文件，以便将其保存到文档目录中。

```
paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
documentsDirectory = [paths objectAtIndex:0];
currentDownload = [documentsDirectory stringByAppendingString:@"/Zipfile"];
NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:currentDownload];
[fileHandle seekToEndOfFile];
[fileHandle writeData:data];
[fileHandle closeFile]; 
```

这是我用于下载及其工作的代码。如果我在模拟器中运行应用程序，我可以在 /Users/TECSOLiMac02/Library/Application Support/iPhone Simulator/6.0/Applications/9DECB1F4-C88D-4B62-BA1F-B9D5D4E421B9/Documents/Zipfile 文件夹中的 MAC 中看到下载的文件

我在哪里可以在 iPhone/iPad 中看到这个下载的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:55:30.480

每个应用程序都在 iPhone 中进行沙盒处理。每个应用程序都位于设备的目录结构中（如模拟器中）。

移动端文档目录的路径是这样的：

**/var/mobile/Applications/AAAAAAA-BBBB-CCCC-DDDD-EEEEEEFFFFFF/Documents/**

该目录中的文件不能被任何其他应用程序访问。它可以由所有者应用程序本身访问。并且可以通过代码访问。

如果要查看文档目录中的文件，需要`UIFileSharingEnabled` 在 info.plist 中设置密钥

![信息列表](../Images/71020c8efe45c2c37a18b356e250738d.png)

应用程序文档目录中的文件将在 iTunes 上显示如下：

![文件共享](../Images/e259bd1145c6a4cf36b4d4d9ca15216d.png) 详情请查看**[教程](http://www.alterplay.com/ios-dev-tips/category/uifilesharingenabled)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:54:04.363

如果您想在 iPhone/iPad 中查看此文件，您必须在项目信息中允许（设置为 YES）“应用程序支持 iTunes 文件共享”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T11:47:36.070

很简单，下载文件后，进入同一应用程序的设置并启用文件共享。然后点击文件，点击`save to camera roll`，就这样了。

# javascript - ExtJS 3.4 vbox 布局未正确呈现

> ID：13987793
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:50:23.747
> 
> 标签：javascript, extjs, vbox

我正在尝试在 vbox 布局中呈现 GridPanel 和两个常规面板（稍后将根据用户操作更新面板）。

[http://jsfiddle.net/auVez/](http://jsfiddle.net/auVez/)

我的商店工作正常

```
var store = new Ext.data.ArrayStore({
    autoDestroy: true,
    storeId: 'myStore',
    fields: [
       {name: 'categoryId', type: 'int'},
       {name: 'categoryName', type: 'string'}
    ]
}); 
```

在我开始使用 vbox 之前，GridPanel 工作正常......

```
var grid = new Ext.grid.GridPanel({
    store: store,
    columns: [
        {header:'Category ID', width: 40, sortable: true, dataIndex: 'categoryId', hidden: true},
        {header:'Cat. Name', width: 80, sortable: true, dataIndex: 'categoryName'}
    ],
    flex: 10,
    loadMask: true,
    stripeRows: true,
    viewConfig: { autoFill: true }, //This makes the columns span the screen onLoad
    sm: new Ext.grid.RowSelectionModel({
        singleSelect: true
    })
}); 
```

我给 vbox 添加了一个高度，因为我读到它必须有一个......

```
var mainPanel = new Ext.Panel({
    renderTo: 'myDiv',
    frame: true,
    layout: 'vbox',
    layoutConfig: {
        align: 'stretch'
    },
    height: '200px',
    items: [
        grid,
        {
            flex: 5,
            title: 'Take Action',
            id: 'SelectedItemPanel',
            bodyStyle: {
                background: '#ffffff',
                padding: '6px 15px 0px 15px'
            },
            html: 'Please select item above to take action upon.'
        },
        {
            flex: 5,
            title: 'Preview',
            id: 'SelectedItemPanel2',
            bodyStyle: {
                background: '#ffffff',
                padding: '6px 15px 0px 15px'
            },
            html: 'Magic!'
        }
    ]
}); 
```

但它仍然呈现为大约 10 像素高度的灰色边框，并且不会按要求占用 300 像素。

我猜我错过了一些溢出声明或其他东西，但这令人沮丧，因为我已经花了大约 4 个小时来尝试获得如此简单的工作:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:14:16.557

嗨，问题出在高度配置中

give `height:300`(去掉单引号)

在这里看到[jsfiddle 链接](http://jsfiddle.net/auVez/1/)

# android - 在android中同步的return语句呢？

> ID：13987803
> 
> 赞同：2
> 
> 时间：2012-12-21T09:51:08.443
> 
> 标签：android, synchronization, synchronized

```
void fun() {
    // some code
    synchronized (this) {
        if(condition) {
            return;
        }
        // some code
    }
    // some code
} 
```

这个`return`调用是从方法返回`fun`还是从`synchronized`块中返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:02:35.620

`return`块内`synchronized`将首先释放所持有的监视器（`this`在您的示例中），然后退出该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T09:59:21.477

return 将退出您的函数。调用 return 总是退出一个函数。除了 try finally 在退出函数之前将执行 finally 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:00:33.690

1.  它只从函数 fun() 返回，任何块都没有任何 return 语句。for 循环块你可以有 break 但不能返回。
2.  该块也没有返回类型，所以你怎么能从那里返回，所以只有你可以从函数返回值，因为它有返回类型。

# android - Android 应用程序在设备启动时崩溃

> ID：13987808
> 
> 赞同：2
> 
> 时间：2012-12-21T09:51:23.673
> 
> 标签：android

我正在开发一个需要`BackgroundService`在 Android Boot 上启动的应用程序

这是我用来启动`BroadcastReceiver`Android Boot的代码

```
public class StartOnBootService extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try
        {
        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            Intent serviceIntent = new Intent();
            serviceIntent.setAction("com.package.myApplicationPackage.BackgroundService");
            context.startService(serviceIntent);
        }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这是我的`BackgroundService.class`

```
public class BackgroundService extends Service {

   @Override
   public IBinder onBind(Intent intent) {
      return null;
   }

   @Override
   public void onCreate() {
      //code to execute when the service is first created
       Toast.makeText(getBaseContext(), "BACKGROUND SERVICE STARTED", Toast.LENGTH_LONG).show();
   }

   @Override
   public void onDestroy() {
      //code to execute when the service is shutting down
   }

   @Override
   public void onStart(Intent intent, int startid) {
      //code to execute when the service is starting up
   }
} 
```

这是我在 Android 启动时设法从 CatLog 中窥探的错误日志。

```
12-21 10:28:01.279: E/EmbeddedLogger(1710): App crashed! Process: com.package.myApplicationPackage
12-21 10:28:01.289: E/EmbeddedLogger(1710): App crashed! Package: com.package.myApplicationPackage v1 (1.0)
12-21 10:28:01.289: E/EmbeddedLogger(1710): Application Label: myApp Label 
```

我的`AndroidManifest.xml`档案

```
 </service>
        <service android:name=".BackgroundService">

            <intent-filter>
                <action android:name="com.package.myApplicationPackage.BackgroundService" />
            </intent-filter>
        </service>
        <receiver
            android:name=".receiver.StartOnBootService"
            android:enabled="true"
            android:exported="true"
            android:label="StartOnBootService">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:59:05.423

您广播接收器名称和 android 清单接收器名称完全不同。

`StartOnBootService`或者在清单上是`StartMyServiceAtBootReceiver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T21:48:13.937

也许在冲过stackoverflow之前查看清单文件是一个好习惯。我也遇到了类似的问题，“启动后崩溃”，并注意到我的包名称错误，这是由于我的一个接收器的匆忙复制粘贴操作造成的。

```
<receiver android:name="com.somepackage.broadcast.ConnectionChangeReceiver" /> 
```

确实有一个错字

```
<receiver android:name="com.somepackage.broadcast.broadcast.ConnectionChangeReceiver" /> 
```

纠正它显然解决了我的问题。

# java - 具有 2 个工厂方法的抽象工厂模式

> ID：13987811
> 
> 赞同：0
> 
> 时间：2012-12-21T09:51:37.790
> 
> 标签：java, spring, factory-pattern

在带有（控制器 - 服务 - dao - 实体层）的spring hibernate java项目中，我有抽象工厂模式（抽象类有2个抽象方法）。在抽象工厂模式的实现类中，我有 dao 方法（运行命名查询）。现在，当请求来自另一个服务类的服务 impl dao 时，它会给出空指针异常，我已经在服务 impl 中自动装配了 dao 类

```
AbstractFruitService - [addToBasket() and removeFromBasket()] 
|
|- SeasonalFruitsServicsImpl - SeasonalFruitsDAO
| 
|- BerryFruitsServiceImpl - BerryFruitsDAO 
```

我无法将 @Service("abstractFruitService") 添加到 SeasonalFruitsServicsImpl 和 BerryFruitsServiceImpl 它给出错误 - 与同名和类的现有不兼容 bean 定义冲突

不确定弹簧静态/实例工厂方法在这种情况下是否有用，我也尝试过，但没有用

有什么办法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:59:29.070

您正在做的事情看起来像服务定位器模式，服务定位器是依赖注入的*替代方案。*因此，如果您已经在使用 IoC Spring Container，则没有理由实施一个。

可以将您的`SeasonalFruitsServiceImpl`和声明`BerryFruitsServiceImpl`为单独的bean，并使用它们各自的接口 `SeasonalFruitsDAO`和从容器中请求它们的实例`BerryFruitsDAO`，或者通过为它们提供单独的名称（如果您需要替换实现，那么您只需在容器中注册另一个实现）。

见[Martin J. Fowler 文章](http://martinfowler.com/articles/injection.html)

如果服务定位器是由某个第 3 方提供的，那么您应该创建一个服务定位器实例

```
<bean id="someServiceLocator" class="com.some3rdparty.ServiceLocator"/>
<bean id="seasonalFruitsDao" factory-bean="someServiceLocator" factory-method="createSeasonalFruitDao"/>
<bean id="berryFruitsDao" factory-bean="someServiceLocator" factory-method="createBerryFruitsDao"/> 
```

或者用java代码配置

```
@Configuration
public class someServiceLocatorConfiguration{
  @Bean
  public ServiceLocator locator(){
    return new com.some3rdparty.ServiceLocator();
  }
  @Bean()
  public SeasonalFruitsDao  seasonalFruitsDao(){
    return locator().createSeasonalFruitDao();
  }
  @Bean()
  public SeasonalFruitsDao  seasonalFruitsDao(){
    return locator().createSeasonalFruitDao();
  }
} 
```

但当然你永远不应该这样做来实例化你开发的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:42:28.730

使用注释`@Transactional(propagation = Propagation.REQUIRES_NEW)`非常适合我的代码，在服务方法上我添加了这个功能并且效果很好

# c - 代码问题或我的 IDE/comp 有问题？

> ID：13987812
> 
> 赞同：-4
> 
> 时间：2012-12-21T09:51:37.977
> 
> 标签：c, debugging, variables, compiler-construction

我尝试更新我今天在 C 语言中掌握的一些有限知识，但我在非常简单的代码上遇到了一些小故障，我无法定义它们的性质......

要么我犯了一个非常愚蠢的错误，要么有什么东西被窃听了......

我使用了 codeblocks v12.11 IDE 并将其设置为用 C 编写项目（这是下载二进制文件的链接：http: [//www.codeblocks.org/downloads/binaries](http://www.codeblocks.org/downloads/binaries)）我使用了它的 ~90MB 版本附带 GCC 编译器....

我在 windows xp 和 windows 7 机器上使用了这个 IDE（和 dev-C++ [http://www.bloodshed.net/download.html](http://www.bloodshed.net/download.html) - 它使用不同的编译器）......

对于 2 段代码（单独构建和编译不起作用）

第一个代码是一个非常简单的代码，它只是将 2 个值相加并将它们赋予一个“a”变量......

这里是：

```
#include <stdio.h>

int main()
{
    int a,b,c,f;
    b=10;
    scanf("%d",&c);
    a=b+c;
    printf("%40s, %d",a);

return(0);
} 
```

由于它在上面，它根本不起作用！（**我的意图是在行输出右侧显示 var "a" 40 个空格的值**）它返回空消息或窗口弹出一个致命错误窗口...（取决于我昨天电脑的心情只有控制台今天返回了一条空消息，它决定告诉 Windows 控制台窗口没有响应...）

如果我像这样编辑代码：

```
int main()
{
int a,b,c,f;
b=10;
scanf("%d",&c);
a=b+c;
printf("%40s"); 
printf("%d",a);

return(0);
} 
```

它可以工作，但在任何 intreusult 的前面显示一个 ascII 字符.. 像这样：

![](../Images/a9da7c6d8edf89f0446673239d963274.png)

（奇怪的是，当我输入数字 7 时，它不显示字符，而是我的电脑发出哔哔声……如果我输入非数字字符，它会像这样无休止地循环：

![](../Images/16fc335f988513cfd0d217a700f2cbc3.png)

如果我将变量的类型更改为 FLOAT 一切正常.. 但正如您所猜测的那样，结果不是整数....

![](../Images/2fb9fa56411dfd9a90c0b0519178054d.png)

有趣的是，如果一切都变成 FLOAT 但在 scanf 属性上，输入设置为 int [scanf("%d",&c);] 程序仍然可以工作并将结果显示为浮点数，但前面又是一个 ascii 字符其中...

另一个奇怪的事情是，当我输入像 99999 这样的大数字时，它会显示多个 ascii 字符，我希望它只返回没有 ascii char 的结果，因为 ascii char 代码是从 1 到 255 或类似的东西......

所以

*   **问题 A**：我的编译器或 IDE 是否有问题（全新安装）？

*   **问题B**：如果是我该怎么办？重新安装它？一样的东西

    发生...

*   **问题 C**：如果不是软件问题（IDE/COMP 等），那么为什么会出现这些 ascii 字符？

PS为了将结果全部投影并获取上面的打印屏幕帧，我使用了“while”循环它不会改变任何相同的结果，当我在没有while循环的情况下**构建和编译**代码时会出现相同的结果..但要确保我粘贴了使用我使用的“while”命令修改了代码，以便在一个控制台中显示所有结果，以便我可以打印它们。

```
int main()
{
int a,b,c,f;
b=10;
while(b=10){
scanf("%d",&c);
a=b+c;
printf("%40s"); 
printf("%d",a);
}        
return(0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:57:13.430

```
printf("%40s, %d",a); 
```

您已经告诉 printf() 打印一个字符串，但没有给它一个。

尝试：

```
printf("%40s, %d","",a); 
```

至于为什么当你这样做时会发生随机的事情，这是因为一个字符串作为一个指针传递，而不是那个指针你传递了一些其他数据（或者如果你什么都不传递，它会发生任何其他事情是参数应该在的地方），这将被解释为一个指针，并且可能导致几乎任何事情发生。随机 ascii 打印，您的程序崩溃等。

但是，如果随机指针恰好指向具有零终止符的东西，它会将其打印为字符串，然后用空格填充。当您使用两个 printfs() 时，这可能会发生 - 只有一点点随机垃圾，然后是零终止符。你甚至可能会非常幸运，指针直接指向零，看起来像一个空字符串。但这只是运气，你绝对不应该依赖它的发生。正如您已经观察到的那样，再次运行它，或者在不同的时间，或者在不同的机器上运行它，行为会有所不同。

# objective-c - 如果仅使用断点，则方法在 ios6 中正确执行

> ID：13987819
> 
> 赞同：1
> 
> 时间：2012-12-21T09:51:56.903
> 
> 标签：objective-c, ios6, ios5

我有一个应用程序，我需要在其中制作带帧的电影，将该电影写入文档目录，将文件路径传递给下一个视图控制器，然后在那里播放电影。

它在 ios5 iphone 中运行良好。但是当我使用***ios6 iPad***时，电影写得很好，并很好地保存到了文档目录中。但在下一个视图播放器视图显示空白屏幕。

我有一个在后台线程中调用的方法，在这个方法中调用了 write movie 方法。是线程问题还是其他问题。爱收到任何解决方案

谢谢

# java - Java int 强制转换返回 0

> ID：13987830
> 
> 赞同：5
> 
> 时间：2012-12-21T09:52:29.987
> 
> 标签：java

我有以下代码：

```
int i = (int) 0.72;
System.out.println(i); 
```

产生以下输出：

```
0 
```

我会想象变量`i`应该具有`1` *(since 0.72 > 0.5 => 1)*的值，为什么不是这样？

*（我想当转换为 int 时，它只是在逗号后面去掉十进制数字，不考虑四舍五入；所以我可能不得不自己处理这个问题？）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T09:54:56.370

正确，转换为 int 只会截断数字。您可以执行以下操作来获得您想要的结果：

```
int i = (int)Math.round(0.72);
System.out.println(i); 
```

例如，这将为 0.72 打印 1，为 0.28 打印 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T09:53:53.567

因为当您将 double 转换为 int 时，小数部分会被截断

UPDATE`Math.round`将提供您想要的输出，而不是`Math.ceil`：

```
 System.out.println(Math.round(0.72));
// will output 1

 System.out.println(Math.round(0.20));
// will output 0 
```

您可以使用`Math.ceil`：

```
System.out.println(Math.ceil(0.72));
// will output 1
 System.out.println(Math.ceil(0.20));
// will output 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:54:17.910

隐式转换为 int 会丢弃小数部分。这就是你得到 0 的原因，因为 0 之后的任何内容都被删除（在你的情况下是 72）。如果您想四舍五入，请查看[Math.round(...)](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:55:31.993

显式转换将浮点/双精度值转换为 int 变量（丢弃小数部分）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T09:55:33.193

Java 不会像我们那样对数字进行四舍五入。它只是截断小数部分。如果要对数字进行四舍五入，请使用 java.lang.Math

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T09:55:45.643

强制转换`double`为`int`截断数字的非整数部分。

要按照您的描述舍入数字，请使用[`Math.round()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T00:45:01.773

作为一个完整的 Java 初学者，以防我的经验对某人有用，我只是犯了以下错误：

`int x = (int) Math.random() * 10;`

...这将始终将 x 设置为 0。相反，我应该完成`int x = (int) (Math.random() * 10);`.

没有太多 Java 知识的具体错误，但我会抛出这个，以防任何对此感到困惑的人偶然发现这个问题。

# c# - 如何以其他形式删除datagridview和数据库中的数据？

> ID：13987838
> 
> 赞同：0
> 
> 时间：2012-12-21T09:52:56.650
> 
> 标签：c#, windows, winforms

我有一个基于服务的数据库客户。我在 Form1 datagridview 中查看它的内容。

我做了一个新的表格。Form2 删除 Form1 的 datagridview 内容。

Costumers 表具有以下列：

```
CustomerID, CustomerName, Address, ContactNumber 
```

这是我正在使用的代码，它不工作有什么问题？

```
private void button1_Click(object sender, EventArgs e)
    {
        Database1Entities db1Entities = new Database1Entities();
        var customerToDelete = (from i in db1Entities.Customers
                                where i.CustomerID == 1201
                                select i).FirstOrDefault();
        if (customerToDelete != null) 
        {
            db1Entities.Customers.DeleteObject(customerToDelete);
            db1Entities.SaveChanges();
        }
    } 
```

# java - 交换器：JVM 永不停止

> ID：13987840
> 
> 赞同：0
> 
> 时间：2012-12-21T09:52:58.757
> 
> 标签：java, multithreading, synchronize

```
public static void main(String[] args) throws Exception {
    final Exchanger<String> exchanger = new Exchanger<String>();
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println(Thread.currentThread().getName() + exchanger.exchange("this came from subthread"));
            } catch (InterruptedException ex) {
                System.out.println("interrupted while waiting for message");
            }
        }
    }).start();

    System.out.println(Thread.currentThread().getName() + exchanger.exchange("this came from main thread"));
    String s = exchanger.exchange("this came from main thread");
} 
```

**输出**

```
mainthis came from subthread
Thread-0this came from main thread 
```

为什么JVM永远不会在这里退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:58:33.340

您的线程中有 1 个交换点，但您的主线程中有 2 个交换点。所以第二次交换：`String s = exchanger.exchange("this came from main thread");`永远等待并阻止JVM退出。如果您在该行之后添加一个打印语句，您将看到它没有被执行。

如果您在线程中添加第二个交换，程序将退出：

```
public void run() {
    try {
        System.out.println(Thread.currentThread().getName() + exchanger.exchange("this came from subthread"));
        exchanger.exchange("allow JVM to exit here");
    } catch (InterruptedException ex) {
        System.out.println("interrupted while waiting for message");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:01:20.370

最后一行：

```
String s = exchanger.exchange("this came from main thread"); 
```

提议`"this came from main thread"`与其他线程交换，但没有其他线程可以还价。

# android - ACRA：配置为发送邮件报告但未收到任何邮件

> ID：13987844
> 
> 赞同：5
> 
> 时间：2012-12-21T09:53:09.917
> 
> 标签：android, acra

我正在尝试第一次配置 ACRA。我遵循了基本设置指南：

1.将acra jar文件集成到我的应用程序中

2.创建了一个扩展应用程序类的新类，并在其中添加了以下代码：

```
 @ReportsCrashes(formKey = "", // will not be used
     mailTo = "mymailId@gmail.com")
     public class MyApplication extends Application
     {
         @Override
        public void onCreate() 
        {
            super.onCreate();
            ACRA.init(this);
        }
     } 
```

3.对清单文件进行所有必要的更改

似乎一切都正确完成了，我可以在 logcat 中得到以下内容：

```
12-21 14:59:10.994: D/ACRA(28728): ACRA is enabled for com.android.demo.notepad1, intializing...
12-21 14:59:11.064: D/ACRA(28728): Using default Mail Report Fields
12-21 14:59:11.064: D/ACRA(28728): Looking for error files in /data/data/com.android.demo.notepad1/files
12-21 14:59:11.074: W/ACRA(28728): **com.android.demo.notepad1 reports will be sent by email (if accepted by user).** 
```

但我无法收到任何邮件:(！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T11:32:52.537

据我所知，mailTo 选项需要用户才能发送电子邮件。当发生错误时，必须打开另一个邮件客户端（例如 Gmail.apk）来处理崩溃报告并发送电子邮件。所以错误会打开一个邮件客户端，我们需要用户点击发送按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:00:52.703

虽然有点晚了，但无论如何有人可能会发现它很有用......

我确实在 ACRA 4.5.0 上遇到了至少一个类似的问题，一旦实际设置了所有其他配置选项，我就能够解决这个问题。这意味着——尽管部分标记为可选——我必须为以下选项赋值（在`@ReportsCrashes`注释中）

*   `resDialogText = R.string.crash_dialog_text, // Text to display upon crash`
*   `resDialogIcon = android.R.drawable.ic_dialog_info, //optional (apparently not). default is a warning sign`
*   `resDialogTitle = R.string.crash_dialog_title, // optional (apparently not). default is your application name`
*   `resDialogCommentPrompt = R.string.crash_dialog_comment_prompt, // optional (apparently not). when defined, adds a user text field input with this text resource as a label`
*   `resDialogOkToast = R.string.crash_dialog_ok_toast // optional (apparently not). displays a Toast message when the user accepts to send a report.`

虽然我已经`mode = ReportingInteractionMode.DIALOG,`设置了至少可能是我的问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:37:49.413

没有使用“mailTo”字段，只使用过`@ReportsCrashes(formKey = "formkey")`
确保您从谷歌驱动器正确获取表单密钥并且在崩溃时您将获得关于谷歌驱动器excel文件的报告并确保您添加了互联网权限并添加了“MyApplication”在主宴

```
<manifest ...>
  <application ... android:name="MyApplication">
    ...
  </application>
  <uses-permission android:name="android.permission.INTERNET">
  </uses-permission>
</manifest> 
```

此处提供了详细说明[http://acra.ch/](http://acra.ch/)

# oracle - 生成数

> ID：13987847
> 
> 赞同：3
> 
> 时间：2012-12-21T09:53:22.670
> 
> 标签：oracle, plsql, oracle10g, oracle11g

朋友我写过这段代码。它将生成 srlnum ,lotsrl。srlnum 将是记录总数，lotsrl 是从 1 到 5000 的记录，在 5000 之后它将再次从 1 开始。

```
 /* Formatted on 2012/12/21 15:00 (Formatter Plus v4.8.8) */
            SELECT ROW_NUMBER () OVER (ORDER BY a.co_series, a.CATEGORY,
                    a.dnr_from) srlnum,
                   CASE
                      WHEN MOD (ROW_NUMBER () OVER (ORDER BY a.co_series, a.CATEGORY,
                                 a.dnr_from),
                                5000
                               ) = 0
                         THEN 5000
                      ELSE MOD (ROW_NUMBER () OVER (ORDER BY a.co_series, a.CATEGORY,
                                 a.dnr_from),
                                5000
                               )
                   END lotsrl
              FROM iq_dnrfl a, iq_cocat b
             WHERE a.co_series = 'S1'
               --SYS_CONTEXT ('TFR_CTX', 'p$_csrcod')
               AND a.CATEGORY = 9
               --SYS_CONTEXT ('TFR_CTX', 'p$_category')
               AND a.co_series = b.co_series
               AND a.CATEGORY = b.CATEGORY
               AND NVL (olf_flag, 'N') = 'Y'; 
```

像这样的东西

```
srlnum ,lotsrl
1         1
2         2
3         3 
4         4 
5         5 
.         . 
.         .
.         .
5000     5000
5001      1 
.
.
.
10000    5000
10001    1
.
.
. 
```

但现在我想要另一列，它应该为 1 到 5000 之间的数字生成数字 1，从 1 到 5000 之间的另一个数字生成 2。

像这样的东西

```
srlnum ,lotsrl ,num
1         1      1
2         2      1  
3         3      1
4         4      1
5         5      1
.         .      1
.         .      1
.         .      1
5000     5000    1
5001     1       2  
.        2       2
.        3       2  
.            2  
10000    5000    2
10001    1       3
.                3
.
. 
```

请朋友帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:10:07.493

我认为您可以尝试这种方式，但由于我没有您的完整数据，因此我使用了我的设置

```
select a,b,
rank() over (partition by b order by a) c 
from tbl
order by a; 
```

[http://www.sqlfiddle.com/#!4/2f63a/11](http://www.sqlfiddle.com/#!4/2f63a/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:03:28.827

尝试将其选为`num`：

```
TRUNC( ROW_NUMBER () OVER (ORDER BY a.co_series, a.CATEGORY, a.dnr_from) / 5001 ) + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:03:56.573

也许：

```
trunc((ROW_NUMBER () OVER (ORDER BY a.co_series, a.CATEGORY, a.dnr_from) / 5000) 
```

# android - 加载应用程序后使数据库可用而不重新创建它

> ID：13987849
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:53:31.477
> 
> 标签：android, database, sqlite

我使用扩展 SQLiteOpenHelper 和覆盖的默认方式以编程方式创建了一个 SQL 数据库`onCreate`。数据库在设备上成功创建，我可以从中插入和检索数据。

现在我需要向商店提交申请。问题是我需要将数据库移动到资产，以便可以将其加载到包含应用程序的每个设备。我尝试使用 avd pull 从设备中检索数据库并将其放置在资产中，但检索到的数据文件夹为空。每次加载应用程序时我都无法重新创建数据库，因为它需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:08:43.280

请按照以下步骤操作，

1）在您的数据库上触发以下查询，

```
Select * from my table; 
```

2）通过上述查询检索行结果。

3) 使用 Gson 将检索到的数据转换为 Json。

4）创建简单的文本文件并将您的json保存到该文件中。

5）将此文件放入资产文件夹。

6）现在清除您的数据库，删除Gson库，删除上面的查询。

7）下次，当您启动应用程序时，从资产中加载文本文件（包含 json 响应），使用 json 库对其进行解析，并将行一一插入到您的数据库表中。

8）仅在用户启动应用程序时第一次执行步骤 7。

这不是完美的答案，但你可以试试这个。

# php - 在我的项目的服务器上创建一个临时文件

> ID：13987854
> 
> 赞同：0
> 
> 时间：2012-12-21T09:53:54.800
> 
> 标签：php

有没有办法在我的项目的服务器上创建一个临时文件。它应该永久保存我不需要的图片。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:55:30.030

我想你正在寻找[`tmpfile()`](http://php.net/tmpfile)

手册页中的代码：

```
<?php
$temp = tmpfile();
fwrite($temp, "writing to tempfile");
fseek($temp, 0);
echo fread($temp, 1024);
fclose($temp); // this removes the file
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:57:15.493

您需要[tempnam](http://php.net/manual/en/function.tempnam.php)或[tmpfile](http://php.net/manual/en/function.tmpfile.php) - 您的选择。

# oracle - Oracle关于集合和订单的表表达式

> ID：13987855
> 
> 赞同：4
> 
> 时间：2012-12-21T09:54:00.527
> 
> 标签：oracle, plsql

我正在分析一些现有的 PL\SQL 代码，并且可以看到 Oracle 集合在使用表表达式的查询中未嵌套的情况。

没有 order 子句，代码显然假定项目将按存储在集合中的顺序返回。我知道如果没有“order by”，您不能假设 select 返回的项目的顺序，但在这种情况下它似乎有效。

示例代码：

```
create type s_table as table of varchar2(100);

select rownum, t.* from table(s_table('TERM1', 'TERM2', 'TERM3')) t 
```

我应该担心并更改代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:49:24.580

No ORDER BY = 无订单保证

这里有一个例子证明了一个事实，集合中元素的顺序不一定是元素在基于给定集合对象的其他查询中出现的顺序。

```
 SQL> CREATE TYPE str_nestab_ty AS TABLE OF VARCHAR2(20);
 2  /

 Type created.

 SQL> SELECT COLUMN_VALUE
 2  FROM TABLE(
 3                CAST
 4                (
 5                    MULTISET
 6                    (
 7                        SELECT 'e10' AS strval FROM DUAL UNION
 8                        SELECT 'e07' AS strval FROM DUAL UNION
 9                        SELECT 'e04' AS strval FROM DUAL UNION
10                        SELECT 'e20' AS strval FROM DUAL UNION
11                        SELECT 'e14' AS strval FROM DUAL
12                    )
13                    AS str_nestab_ty
14                )
15             );

   COLUMN_VALUE
--------------------
e04
e07
e10
e14
e20

SQL> 
```

# fonts - TCPDF 自定义字体和 UTF-8

> ID：13987856
> 
> 赞同：0
> 
> 时间：2012-12-21T09:54:01.710
> 
> 标签：fonts, tcpdf, truetype

我对使用自定义字体的 UTF-8 编码有疑问。

我正在尝试使用 TTF 导入字体生成文档。我使用的字体是 Mac .dfont。我已经将它转换为 ttf 使用`fondu`. 然后我使用 addTTFfont 将字体添加到我的文档中。

```
$pdf->addTTFfont("../fonts/OptimaRegular.ttf", "", "UTF-8", 32, "", 1, 0); 
```

ASCII 字符一切正常，但非 ASCII 字符显示不正确。

相反，如果我使用 dejavusans 字体，一切都会正确显示。

我究竟做错了什么？

# ruby-on-rails - 是否可以将分页与acts_as_follower一起使用？

> ID：13987858
> 
> 赞同：0
> 
> 时间：2012-12-21T09:54:06.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination

这个计算不起作用:(
我想使用分页和排序排序`acts_as_follower`。
如果有人知道如何处理它，请告诉我如何处理。

我现在正在使用`kaminari`分页。如果我需要添加其他内容，请告诉我。

## 在我的`Controller`

```
@users = User.find_by_username(params[:username]).all_following.order("created_at DESC").paginate(page: params[:page]) 
```

## 看法

```
<%= paginate @users, :window => 4, :outer_window => 5, :left => 2, :right => 2 %> 
```

# entity-framework - 实体框架代码优先 - 逆向工程师

> ID：13987860
> 
> 赞同：3
> 
> 时间：2012-12-21T09:54:17.873
> 
> 标签：entity-framework, reverse-engineering, entity-framework-5

我即将开始使用 Entity Framework Code First 开发 ASP.Net MVC 4 Web 应用程序。因为数据库已经存在，所以我使用 Code First 执行逆向工程的能力来生成我的域类。

然后，我希望将这些域类放入我的解决方案中它们自己的单独项目中，以保持它们对持久性的无知。但是，当我运行该工具对我的数据库进行逆向工程（使用 Entity Framework Power Tools）时，我发现域类已创建，但还创建了一个名为 Mapping 的文件夹，其中包含每个域类的映射类，然后使用 Fluent API映射表属性。这一切都很好。

但是，我还发现，映射类依赖于对实体框架的引用，我只是想知道这是否被认为是不好的做法？通常当我创建 POCO 类时，它们完全不了解持久性，即在该项目中根本没有对实体框架的引用。

你的意见？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:58:31.933

您可以将 POCO 类保留在一个项目中，而映射保留在另一个项目中。只需添加对 POCO 类所在项目的引用即可。另一种方法是创建一个数据访问层并将映射移到那里。这样你就有了三个项目。您的主 MVC 项目、模型项目和包含映射和对 EntityFramework 的引用的数据访问层。

例如，您的解决方案可能是这样的：

```
1\. Web User Interface (MVC)
2\. Business layer
3\. Unit of Work/Repository
4\. Data access layer (Mapping from EF Reverse Engineering) 
```

所有四个项目都可以访问第五个项目，域模型（来自 EF 逆向工程的模型）。您的 1 与 2 通信，2 与 3 通信，3 与 4 通信。所有这四个都引用了域模型，因此您不必在层之间执行任何类型的域模型转换。

顺便说一句，我忽略了服务层，但如果你有 web 服务或 REST，你可以将它放在另一个项目中，但我们不要过多的细节。

# php - 如何使用 Yii Foundation 扩展 FounActiveForm 实现错误状态

> ID：13987862
> 
> 赞同：0
> 
> 时间：2012-12-21T09:54:19.107
> 
> 标签：php, yii, yii-extensions

我正在为我的 Yii 项目使用[Foundation 2 的 Yii 扩展。](http://www.yiiframework.com/extension/foundation/)安装和使用基本的 UI 功能轻而易举。但是，当我尝试实现 FounActiveForm 小部件时，我无法弄清楚如何实现错误状态。这是扩展文档[网站](http://foundation.oakwebdev.com/index.php?r=site/forms)的部分解释：

**Yii Foundation 中的错误状态使用 wrapper 方法，您无需做任何事情来获取样式，扩展会为您处理。**

什么是包装方法？如何在默认的 yii 登录页面中实现它？这是我正在使用的代码：

```
<div class="form">
<?php $form=$this->beginWidget('foundation.widgets.FounActiveForm', array(
    'id'=>'form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->textFieldRow($model,'username'); ?>
    <?php echo $form->textFieldRow($model,'password'); ?>
    <?php echo $form->checkBoxRow($model,'rememberMe'); ?>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Login',array('class'=>'blue nice button')); ?>
    </div>

<?php $this->endWidget(); ?>
</div><!-- form --> 
```

使用此代码，表单错误可以正常工作，但错误类不存在：

![示例登录页面](../Images/0590ced3b69aea7e69b989d2d7e7bad1.png)

这就是它应该如何显示错误（来自 yii 基金会网站的示例）：

![样本错误状态](../Images/d6d55d5e62d506912da03ebc4efdc66f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:38:46.100

这是旧的胎面，但如果你仍然没有找到答案......

*   [从http://foundation.zurb.com/download.php](http://foundation.zurb.com/download.php)下载 Foundation 3 包 。
*   提取文件foundation.css
    (/foundation/stylesheets/foundation.css)。
*   将您的应用程序扩展目录
    (/protected/extensions/foundation/lib/foundation3/stylesheets/foundation.css) 中的文件替换为提取的文件。

# sip - 如何检测 sip 呼叫转发到服务器的语音邮件？

> ID：13987863
> 
> 赞同：2
> 
> 时间：2012-12-21T09:54:19.700
> 
> 标签：sip, pjsip

我正在使用 Pjsip 库进行 SIP 实现。使用 Pjsip lib 我可以完美地进行 IP 调用。我的问题是，当我拨打电话时，如果其他最终用户拒绝/无法接通或无人接听，我的电话将连接到语音邮件并从 sip 服务器获得 200k（呼叫连接状态），就像其他最终用户接听电话一样。
无法到达的情况下，我可以通过缺少 183 会话进度消息来区分 200 ok。但是没有应答和拒绝的情况下我无法得到实际的通话状态。
有什么方法可以找到呼叫连接状态和语音邮件连接状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:41:09.277

没有任何一种方式可以让用户代理知道它已经到达语音邮件服务器而不是一个人回答。

通常会发生的情况是，您的用户代理将向 From URI 发送 INVITE，并且负责该 URI 的某些代理会将 INVITE 分叉到远程方使用的各种用户代理：她的电话、她的语音邮件服务等。第一个返回 2xx 响应的用户代理建立调用。

`Contact`但是，您将始终在 200 OK 的标题中知道您已连接到哪个用户代理。

据推测，语音邮件服务器将在其 SDP 提供/回答中表明，当它接受某些传入的媒体流时，它不会发送任何内容，通过使用`a=recvonly`属性标记流（参见[RFC 3264](https://www.rfc-editor.org/rfc/rfc3264)）。

# c - 使用 set_current_state 在内核中休眠

> ID：13987867
> 
> 赞同：3
> 
> 时间：2012-12-21T09:54:52.103
> 
> 标签：c, linux, multithreading, kernel, preemption

我一直在阅读[http://www.linuxjournal.com/article/8144](http://www.linuxjournal.com/article/8144)并考虑以下情况：

```
4253  /* Wait for kthread_stop */
4254  set_current_state(TASK_INTERRUPTIBLE);
4255  while (!kthread_should_stop()) {
4256          schedule();
4257          set_current_state(TASK_INTERRUPTIBLE);
4258  }
4259  set_current_state(TASK_RUNNING);
4260 return 0; 
```

现在，如果在我们将进程设置为睡眠的第 4254 行之前调用了 kthread_stop，并且在该行之后我们实际上被抢占/调度并且进程也真的被发送到睡眠状态，会发生什么？

在这种情况下，唤醒呼叫是在更改状态之前收到的（因此它不会影响我们），并且操作系统的正常运行会在我们实际检查任何内容之前让我们进入睡眠状态。

我想我错过了一些东西，可能是以下两个选项之一：（1）状态的实际变化只发生在我们调用 schedule() 时，或者（2）我们没有办法被安排出来（要么在 set_current_state 调用之后和 schedule() 调用之前，通过抢占、中断等。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:33:23.860

如果`kthread_stop`在第 4254 行之前被调用，`kthread_should_stop()`将返回 true，并且`schedule()`不会被调用。在这种特定情况下，使用[策略（没有时间片）](http://lxr.linux.no/linux-bk+v2.6.11/kernel/sched.c#L4438)[`migration_thread`以高优先级调度`SCHED_FIFO`](http://lxr.linux.no/linux-bk+v2.6.11/kernel/sched.c#L4438)，并且只能被`SCHED_FIFO`具有更高优先级的另一个任务抢占（参见[sched_setscheduler](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:03:24.730

schedule() 是 Linux 内核在线程之间更改上下文的唯一方法。

正如代码注释的那样，这是为了在处理器之间迁移，所以大概不会经常运行（相对而言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T04:29:23.387

这是一个类似的问题和答案

[http://fixunix.com/linux/7425-schedule_timeout-doubt-possible-infinite-sleep.html](http://fixunix.com/linux/7425-schedule_timeout-doubt-possible-infinite-sleep.html)

从链接引用，

[引用-]

如果我理解正确，当发生抢占时，PREEMPT_ACTIVE 位被添加到线程的 preempt_count；这发生在 preempt_schedule / preempt_schedule_irq 中。然后它们调用 schedule()，它检查计数中是否设置了 PREEMPT_ACTIVE，如果设置了，它*不会*调用 deactivate_task()，这会将线程留在活动列表中。[-引用]

所以如果发生中断或抢占，线程不会被移出运行队列。

# c# - 无法从命令行或调试器启动服务

> ID：13987870
> 
> 赞同：29
> 
> 时间：2012-12-21T09:55:03.000
> 
> 标签：c#, windows, service

我创建了一个 Windows 服务并将其安装在服务器上。它似乎工作正常，即做它应该做的事情。但是当我通过远程桌面登录到服务器时，我收到以下消息：

> 无法从命令行或调试器启动服务。必须首先安装 Windows 服务（使用 installutil.exe），然后使用 ServerExplorer、Windows 服务管理工具或 NET START 命令启动。

我单击然后转到服务资源管理器以检查服务，它启动正常。没有报告错误。

我已经安装了它，所以它使用本地系统作为“登录身份”。

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T10:10:21.423

更改类中的`Main`方法`Program`如下：

```
 /// <summary>
    ///   The main entry point for the application.
    /// </summary>
    private static void Main()
    {
        var myService = new MyService();
        if (Environment.UserInteractive)
        {
            Console.WriteLine("Starting service...");
            myService.Start();
            Console.WriteLine("Service is running.");
            Console.WriteLine("Press any key to stop...");
            Console.ReadKey(true);
            Console.WriteLine("Stopping service...");
            myService.Stop();
            Console.WriteLine("Service stopped.");
        }
        else
        {
            var servicesToRun = new ServiceBase[] { myService };
            ServiceBase.Run(servicesToRun);
        }
    } 
```

您必须向您的服务类添加一个`Start`方法：

```
 public void Start()
    {
        OnStart(new string[0]);
    } 
```

在项目属性的“应用程序”选项卡中，将项目的输出类型更改为“控制台应用程序”而不是“Windows 应用程序”。现在您只需按 F5 即可开始调试，但您仍然可以将可执行文件作为 Windows 服务运行。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-12-26T04:07:17.863

转到 App.config

寻找

```
<setting name="RunAsWindowsService" serializeAs="String">
<value>True</value> 
```

设置为假

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-06-17T07:56:18.320

按 CTRL-ALT-CANC (*)，然后转到“服务”选项卡。有一个服务列表，搜索您需要启动的服务，选择它并单击“启动”。如果它不存在，则可能它已被卸载，没有（正确？）安装，或者由于某些其他原因，Windows 不知道您的服务。

(*) 或 CTRL-ALT-DEL(ete) 或其他，取决于键盘语言。

# iphone - 如何避免 SIG_PIPE 在 IOS 中崩溃

> ID：13987871
> 
> 赞同：2
> 
> 时间：2012-12-21T09:55:08.720
> 
> 标签：iphone, ios, xcode, cocoa-touch, sigpipe

我一直面临着 SIGPIPE 经常崩溃，我知道这是因为连接问题，我的一个套接字在失去连接后试图写入，但问题是我在这里无法控制套接字描述符（将 tcp 类作为 .a )，设置 signal() 像 IGNORE 或 NO_SIGPIPE。所以任何方式都可以使用 Xcode。任何建议都对我很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:39:41.787

即使我没有尝试使用 Signals 的套接字描述符，它似乎也可以工作。

# delphi - Delphi Fast(er) Lanczos 重采样

> ID：13987880
> 
> 赞同：2
> 
> 时间：2012-12-21T09:55:32.153
> 
> 标签：delphi, lanczos

我想找到一些代码，用于使用[Lanczos](http://en.wikipedia.org/wiki/Lanczos_resampling)过滤器进行非常快速的位图重采样。目前使用这个： http: [//pastebin.com/JxuqLXB9](http://pastebin.com/JxuqLXB9)

我一直在寻找更快的实现，但无济于事。尝试了 GraphicsEx、Graphics32、madGraphics、JEDI 的一些实现，它们都比这慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:40:38.880

这个答案应该可以改善缩放过程的时间 - [在 Delphi 中很好地缩放图像？](https://stackoverflow.com/questions/1976116/scale-an-image-nicely-in-delphi/1976171#1976171).

我对更快地实现 Lanczos 重采样没有任何其他知识。

# rest - 使用带有 WSO2 ESB 的 SOAP 代理 RESTful 服务

> ID：13987882
> 
> 赞同：5
> 
> 时间：2012-12-21T09:55:34.357
> 
> 标签：rest, wso2, wso2esb

我们想用 SOAP 代理一个 RESTful Web 服务。

REST 服务使用 GET 方法并通过查询参数接受输入。它生成类型为 application/csv 的资源。

WSO2 ESB/Synapse 是否支持这样的场景，是否有可用的示例？

**示例请求**

SOAP 代理请求：

```
<request>
  <fromDate>2012-01-01</fromDate>
  <toDate>2012-12-31</toDate>
</request> 
```

REST 端点请求：

```
http://localhost/person?fromDate=2012-01-01&toDate=2012-12-31 
```

**示例响应**

REST 端点响应

```
"Name","Age","Sex"
"Geoff","22","Male" 
```

SOAP 代理响应

```
<person>
  <name>Geoff</name>
  <age>22</age>
  <sex>Male</sex>
<person> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:38:44.340

如果我理解正确，您希望将 REST 服务公开为 SOAP 服务，以便 SOAP 客户端可以通过 ESB 访问您的 REST 服务？

如果是这种情况，它是可能的 :) 你应该从这些检查样本 152：http: [//docs.wso2.org/wiki/display/ESB451/Proxy+Service+Samples](http://docs.wso2.org/wiki/display/ESB451/Proxy+Service+Samples)

它将解释如何获取 SOAP 请求并将其传递到 REST 后端，然后将 REST 响应转换为 SOAP 响应。

编辑：这是有关如何执行您在评论中提出的问题的示例配置，希望它能帮助您入门:)

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="RESTProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>

         <!-- We set the HTTP Method we want to use to make the REST request here -->
         <property name="HTTP_METHOD" value="GET" scope="axis2"/>

         <!-- This is where the magic happens, for what you want i.e. mapping SOAP "params" to REST query param's --> 
         <property name="messageType" value="application/x-www-form-urlencoded" scope="axis2"/>

         <send>
            <endpoint>
               <!-- This is the RESTful URL we are going to query, like the one in the ESB example 152 -->
               <address uri="http://localhost/person" />
            </endpoint>
         </send>

      </inSequence>

      <outSequence>
         <log level="full"/>
         <property name="messageType" value="text/xml" scope="axis2"/>
         <send/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

那么您向 ESB 发出的 SOAP 请求应该类似于：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
    <person>
        <fromDate>2012-01-01</fromDate>
        <toDate>2012-12-31</toDate>
    </person>
   </soapenv:Body>
</soapenv:Envelope> 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T03:36:57.347

希望这对您理解 SOAP Client 和 REST Service 通信很有帮助

[http://docs.wso2.org/display/ESB460/Using+REST+with+a+Proxy+Service#UsingRESTwithaProxyService-SOAPClientandRESTService](http://docs.wso2.org/display/ESB460/Using+REST+with+a+Proxy+Service#UsingRESTwithaProxyService-SOAPClientandRESTService)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T19:58:16.437

您可以使用类中介器通过 XPATH 提取 SOAP 参数。然后构建 REST URL 并将其发送回 IN 序列流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T11:59:18.353

**1.**你需要从SOAP PROXY中获取值

**2.**你需要将它存储在一个局部变量中

**3.**您需要使用查询参数将值传递给 REST SERVICE

**4.**您需要将来自 REST 服务的响应格式化为 SOAP 格式

SOAP 请求将是，

`<request> <fromDate>2012-01-01</fromDate> <toDate>2012-12-31</toDate> </request>`

您可以将 SOAP PROXY 请求中的值存储为，

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="RESTProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true><target>
  <inSequence>
      <property name="fromDate" expression="//fromDate" scope="default" type="STRING"/>
      <property name="toDate" expression="//toDate" scope="default" type="STRING"/> 
```

然后您可以通过以下方式将值传递给 REST 服务，

```
<send>
     <endpoint>  
           <http method="GET" uri-template="http://localhost/person?fromDate=={get-property('fromDate')}&amp;toDate={get-property('toDate')}"/>  
    </endpoint>
</send>  
</inSequence> 
```

然后您可以使用**PayloadFactory**调解器格式化响应，

```
<outSequence>  
<payloadFactory media-type="xml">     
      <format>
               <person>
                      <Name>$1</Name>
                      <Age>$2</Age>
                      <Sex>$3</Sex>
                </person>
        </format>
                <args>
                    <arg evaluator="json" expression="$.Name"/>
                    <arg evaluator="json" expression="$.Age"/>
                    <arg evaluator="json" expression="$.Sex"/>
                </args>
 </payloadFactory>
     <send/>
  </outSequence>
   </target>
   <description/>
  </proxy> 
```

所以代理的响应将是，

```
<person>
  <name>Geoff</name>
  <age>22</age>
  <sex>Male</sex>
<person> 
```

# parsing - 运营商问题 ANTLR

> ID：13987884
> 
> 赞同：1
> 
> 时间：2012-12-21T09:55:42.073
> 
> 标签：parsing, operators, expression, antlr, grammar

看来这是我今天的第 1000 个问题 :) 我已经接近完成我的语法了，如果前缀和中缀运算符共享相同的符号，我就会遇到问题。我正在解析一种称为 MathML 的标记语言...

```
grammar MathMLOperators;

options 
{
  output = AST;
  backtrack = true;
  memoize = true;
}

tokens
{
  DOCUMENT; // The root of the parsed document.
  GROUP;

  OP; // any operator
  PREFIX_OP; // a prefix operator.
  INFIX_OP; // an infix operator.
  POSTFIX_OP; // a postfix operator.
  NON_INFIX_OP; // a non-infix operator
}

// Start rule.
public document :  math+ -> ^(DOCUMENT math+);

inFixTag : TAG_START_OPEN MO  TAG_CLOSE ('-' | '+' | '=') TAG_END_OPEN MO TAG_CLOSE -> ^(INFIX_OP);

preFixTag : TAG_START_OPEN MO TAG_CLOSE ('+' | '-') TAG_END_OPEN MO TAG_CLOSE -> ^(PREFIX_OP);

// Use semantic predicate to only allow postfix expressions when at the end of an mrow.
postFixTag : TAG_START_OPEN MO TAG_CLOSE ('!' | '^') TAG_END_OPEN MO {input.LT(1).getType() == TAG_CLOSE && input.LT(2).getType() == TAG_END_OPEN && input.LT(3).getType() == MROW && input.LT(4).getType() == TAG_CLOSE}? TAG_CLOSE -> ^(POSTFIX_OP);

nonInfixTag : TAG_START_OPEN MO TAG_CLOSE ('!' | '^') TAG_END_OPEN MO TAG_CLOSE {$expressionList::count++;} -> ^(OP);

opTag: TAG_START_OPEN MO TAG_CLOSE  ('-' | '+' | '^' |'=')  TAG_END_OPEN MO TAG_CLOSE -> ^(NON_INFIX_OP);

//Expressions

infixExpression:  grouping (inFixTag^ grouping)*;
grouping : nestedExpression+ -> ^(GROUP nestedExpression+);

prefixExpression : /* check that it's the first in the mrow*/ {$expressionList::count == 0}? (preFixTag^ (primaryExpression | nonInfixTag)) {$expressionList::count++;};

postfixExpression : (primaryExpression | prefixExpression| nonInfixTag) (postFixTag^)? ;

expressionList scope {int count} @init{$expressionList::count = 0;} :  (infixExpression | opTag)+;

nestedExpression :  postfixExpression;

primaryExpression : mrow | mn;

math : TAG_START_OPEN root=MATH TAG_CLOSE expressionList TAG_END_OPEN MATH TAG_CLOSE -> ^($root expressionList);

mrow : TAG_START_OPEN root=MROW TAG_CLOSE expressionList? TAG_END_OPEN MROW TAG_CLOSE -> ^($root expressionList?);

mn: TAG_START_OPEN root=MN TAG_CLOSE INT TAG_END_OPEN MN TAG_CLOSE -> ^($root INT);

MATH : 'math'; // root tag
MROW : 'mrow'; // row
MO   : 'mo'; // operator
MN   : 'mn'; // number

TAG_START_OPEN : '<';
TAG_END_OPEN : '</' ;
TAG_CLOSE : '>';
TAG_EMPTY_CLOSE : '/>';

INT :   '0'..'9'+;

WS  :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

这将工作正常...

```
<math>
<mrow>
<mo>-</mo>
<mn>7</mn>
<mo>=</mo>
<mn>8</mn>
</mrow>
</math> 
```

但这会失败...

```
<math>
<mrow>
<mo>-</mo>
<mn>7</mn>
<mo>-</mo>
<mn>8</mn>
</mrow>
</math> 
```

第一个“-”应该是“前缀”，第二个应该是“中缀”。从调试器看来，该规则`grouping`正在循环并且没有返回到父规则`infixExpression`，即使它无法匹配。

我确定我在某个地方有一个错误的 EBNF 运算符，但我不知道是哪一个。我尝试遵循 C 等语言中的标准表达式嵌套模式，但这是一种不常见的解析语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:14:12.087

> 你介意把语法发给我吗...

这是我清理后的语法。

**警告：**我无法解释问题中的解析器的行为方式（因此我对其进行了清理），所以我不知道我无意中破坏/修复了原始内容 - 告诉我 AST 或解析器现在是错误的对我来说没有任何意义，因为对我来说，一开始它看起来就错了。;)

```
grammar MathMLOperators;

options 
{
  output = AST;
  backtrack = true;
  memoize = true;
}

tokens
{
  DOCUMENT; // The root of the parsed document.
  GROUP;
  OP; // any operator
  PREFIX_OP; // a prefix operator.
  INFIX_OP; // an infix operator.
  POSTFIX_OP; // a postfix operator.
  NON_INFIX_OP; // a non-infix operator
}

// Start rule.
public document :  math+ EOF -> ^(DOCUMENT math+);

inFixTag        : (op=MINUS | op=PLUS | op=EQ)  -> INFIX_OP[$op.text];
preFixTag       : (op=MINUS | op=PLUS)          -> PREFIX_OP[$op.text]; 

// Use semantic predicate to only allow postfix expressions when at the end of an mrow.
postFixTag      : (op=BANG | op=CARET) {input.LA(1) == CMROW}?      -> POSTFIX_OP[$op.text];
nonInfixTag     : (op=BANG | op=CARET) {$expressionList::count++;}  -> NON_INFIX_OP[$op.text];
opTag           : (op=MINUS | op=PLUS | op=CARET | op=EQ)           -> OP[$op.text];

//Expressions

infixExpression     : grouping (inFixTag^ grouping)*;
grouping            : nestedExpression+     -> ^(GROUP nestedExpression+);

prefixExpression    : /* check that it's the first in the mrow*/ 
                    {$expressionList::count == 0}? 
                        (preFixTag^ (primaryExpression | nonInfixTag)) 
                        {$expressionList::count++;}
                    ;

postfixExpression   : (primaryExpression | prefixExpression| nonInfixTag) (postFixTag^)? ;

expressionList scope {int count} @init{$expressionList::count = 0;} :  (infixExpression | opTag)+;

nestedExpression    :  postfixExpression;

primaryExpression   : mrow | NUM;

math    : MATH expressionList CMATH -> ^(MATH expressionList);

mrow    : MROW expressionList? CMROW -> ^(MROW expressionList?);

///////   LEXER   ///////

MATH    : TAG_START_OPEN WS* 'math' WS* TAG_CLOSE; // root tag
CMATH   : TAG_END_OPEN WS* 'math' WS* TAG_CLOSE;

MROW    : TAG_START_OPEN WS* 'mrow' WS* TAG_CLOSE; // row
CMROW   : TAG_END_OPEN WS* 'mrow' WS* TAG_CLOSE;

fragment OMO    : TAG_START_OPEN WS* 'mo' WS* TAG_CLOSE; // operator
fragment CMO    : TAG_END_OPEN WS* 'mo' WS* TAG_CLOSE; 

MINUS   : OMO '-' CMO {setText("-");};
PLUS    : OMO '+' CMO {setText("+");};
EQ      : OMO '=' CMO {setText("=");};
BANG    : OMO '!' CMO {setText("!");};
CARET   : OMO '^' CMO {setText("^");};

NUM     : TAG_START_OPEN WS* 'mn' WS* TAG_CLOSE 
            INT 
          TAG_END_OPEN WS* 'mn' WS* TAG_CLOSE 
          {setText($INT.text);}
        ;

fragment TAG_START_OPEN : '<';
fragment TAG_END_OPEN   : '</' ;
fragment TAG_CLOSE      : '>';
fragment TAG_EMPTY_CLOSE: '/>';

INT     :   '0'..'9'+;

WS      :  (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;}; 
```

### 测试用例 1：用 MROW 中缀 '='

输入：

```
 <math>
    <mrow>
    <mo>-</mo>
    <mn>7</mn>
    <mo>=</mo>
    <mn>8</mn>
    </mrow>
    </math> 
```

输出：

![中缀 = 带 mrow](../Images/d5f906e8985db89e330aad5052a7aa4f.png)

### 测试用例 2：用 MROW 中缀“-”

输入：

```
 <math>
    <mrow>
    <mo>-</mo>
    <mn>7</mn>
    <mo>-</mo>
    <mn>8</mn>
    </mrow>
    </math> 
```

输出：

![中缀 - 带 mrow](../Images/7d898f8a5f1a3d61bcb717d21d6ea7a5.png)

### 测试用例 3：不带 MROW 的中缀“-”

输入：

```
 <math>
    <mo>-</mo>
    <mn>7</mn>
    <mo>-</mo>
    <mn>8</mn>
    </math> 
```

输出：

![中缀 - 没有 mrow](../Images/e44ca9dd3cdf63d1559fa85bf5155642.png)

# android - 如何以编程方式检查用户是否与他们的 Android 手机进行了交互？

> ID：13987886
> 
> 赞同：3
> 
> 时间：2012-12-21T09:55:46.000
> 
> 标签：android, android-service, android-sensors

如何以编程方式检查用户是否与 Android 手机的触摸屏或键盘进行了交互？交互可以是触摸或按键事件。为此创建服务对我有帮助吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:08:46.883

如果您正在谈论在`Activity`.. 中执行此操作，那么您可以覆盖 ..的[onUserInteraction()](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction%28%29) 方法`Activity`。以下是该方法的java doc：

> 每当将键、触摸或轨迹球事件分派到活动时调用。如果您希望知道用户在您的活动运行时以某种方式与设备进行了交互，请实施此方法。这个回调和 onUserLeaveHint() 旨在帮助活动智能地管理状态栏通知；具体来说，用于帮助活动确定取消通知的适当时间。
> 
> 对活动的 onUserLeaveHint() 回调的所有调用都将伴随对 onUserInteraction() 的调用。这可以确保您的活动将被告知相关的用户活动，例如下拉通知窗格并触摸那里的项目。
> 
> 请注意，此回调将为开始触摸手势的触摸动作调用，但可能不会为随后的触摸移动和触摸动作调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T10:08:13.917

有很多方法可以完成这个目的。您可以覆盖 View 实例上的触摸事件、onclick 事件。

# ios - 从 iOS NSDictionary 的 json 记录中消除最后一个逗号

> ID：13987889
> 
> 赞同：0
> 
> 时间：2012-12-21T09:55:51.237
> 
> 标签：ios, json, nsdictionary

这是我在 app.js 中的代码

```
app.get('/all_question', function(req, res){

    var listQuestion = function(err, collection) {
        collection.find().toArray(function(err, results) {
                console.log(results);
            res.render('all_question.html', { layout : false , 'title' : 'Question Bank', 'results' : results });
        });
    }

    var Client = new Db('questionbank', new Server('127.0.0.1', 27017, {}));
    Client.open(function(err, pClient) {
        Client.collection('questions', listQuestion);
        //Client.close();
    });

}) 
```

这就是我所说的 all_questions.html：

```
{"questions":[{{#each results}}{"id":"{{this._id}}","subject":"{{this.subject}}","qType":"{{this.qType}}","score":"{{this.score}}","question":{"name":"{{this.question.name}}","choice":["{{this.question.choice}}"],"answer":["{{this.question.answer}}"]}}{{/each}},]}` 
```

这是结果：

```
{"questions":[{"id":"50d2de8879f86d9663000002","subject":"General","qType":"1","score":"1","question":{"name":"Earth is the center of the Universe","choice":["False,True"],"answer":["1"]}}{"id":"50d2e29e79f86d9663000003","subject":"General","qType":"2","score":"1","question":{"name":"Which is the biggest continent","choice":["Australia,Asia,Africa"],"answer":["2"]}},]} 
```

由于需要用逗号分隔每条记录，因此我在每条记录的末尾输出一个逗号。但它也适用于最后一条记录。但是，当我在 iOS 中将其用作 Web 服务调用来输入 NSDictionary 时，由于最后一条记录中的逗号，我收到了一个错误。我该如何消除这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:01:20.033

```
NSString *newString = [oldString stringByReplacingOccurrencesOfString:@"," withString:"" options:0 range:NSMakeRange(source.length - 3, 3)]; 
```

# javascript - Javascript Z 索引

> ID：13987890
> 
> 赞同：0
> 
> 时间：2012-12-21T09:55:51.897
> 
> 标签：javascript, z-index

我遇到了 jquery 降雪效果和 nivo 滑块的问题。问题似乎是雪落在滑块图像后面，所以我猜它与降雪效果的 z-index 有关。

我对 Javascript 不太了解，所以不确定如何更改它的 z-index。

有人能帮忙吗？这是一个[链接](http://www.clickstream.ie/index-test.php)，如果需要，我可以发布代码。

谢谢。铝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:00:42.990

您将使用以下方法解决该问题（当然，每次创建新雪花时都应应用它...）：

```
$("div:contains('❄')").css('z-index', 200); 
```

无论如何，这不是一个好的解决方案。我使用它是因为屏幕上的每一片雪花都带有 id `flake`。我建议您设置类名而不是 id（或至少设置唯一 id）。

# javascript - 原型转换 ajax.updater

> ID：13987897
> 
> 赞同：1
> 
> 时间：2012-12-21T09:56:10.280
> 
> 标签：javascript, jquery, ajax

我有一个网站，目前使用我试图摆脱的原型。这些是唯一使用它的 3 个函数。

我整个早上都在尝试转换这些，但由于我对 jquery 的理解不是很好，所以我很挣扎。

```
function GetCountries() {    
  new Ajax.Updater('country_list','site_countries.php', {parameters: '&onchange=1', onComplete: GetRegions});
}

function GetRegions() {    
  new Ajax.Updater('region_list','site_regions.php', {parameters: '&regionID='+$('regionID').value+'&countryID='+$('countryID').value+'&onchange=1', onComplete: GetTowns});
}

function GetTowns() {
  new Ajax.Updater('town_list','site_towns.php', {parameters: '&regionID='+$('regionID').value+'&countryID='+$('countryID').value});
} 
```

这是我想出的，但它不起作用：

```
function GetCountries() { 
    $.ajax({
    type: "POST",
    url: "site_countries.php",
    data: '&onchange=1',
    success: function( transport ){
        $('#country_list').html(transport.responseText)
        GetRegions
    }
});
} 
```

被调用的页面仅返回一个选择下拉列表，该列表替换页面上名为 country_list 的跨度中的一个，然后调用 GetRegions 执行相同操作。

任何帮助都将受到极大的欢迎！

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:11:06.860

您提供`data`字段的方式可能是这里的问题。尝试以下操作：

```
$.ajax({
    type: "POST",
    url: "site_countries.php",
    data: {onchange: 1},
    success: function( transport ){
        $('#country_list').html(transport.responseText)
        GetRegions
    }
}); 
```

或者

```
function GetCountries() { 
    $("#country_list").load("site_countries.php", {onchange: 1}, function(){
        // call your GetRegions() here
    });  
} 
```

# sftp - sublime text 2 对文件的并发访问

> ID：13987905
> 
> 赞同：-1
> 
> 时间：2012-12-21T09:56:42.200
> 
> 标签：sftp, sublimetext2, swapfile

我使用带有插件 SFTP 的 Sublime text 2 来编辑服务器上的文件。

当我试图编辑的文件已经被其他人打开时，是否有一个选项可以引发某种标志？（使用交换文件或其他东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:54:59.447

我不确定，但我猜您必须询问 SFTP 插件的开发人员。他们的支持在这里：[http ://wbond.net/sublime_packages/sftp](http://wbond.net/sublime_packages/sftp)

# android - 无法在 TwoWay 模式下绑定 MvxBindableListView

> ID：13987906
> 
> 赞同：2
> 
> 时间：2012-12-21T09:56:43.807
> 
> 标签：android, mvvm, xamarin.android, mvvmcross, inotifycollectionchanged

我正在尝试在*TwoWay*模式下绑定*MvxBindableListView ，以便当我在**ViewModel*中设置它的值（通过按钮的单击命令）时它在*视图中更新。*目前，它仅在开始/tabchange 完全加载布局时更新...

 ****视图模型*是：

```
public List<MyType> TestList
        {
            get { return _testList; }
            set
            {
                _testList = value;
                FirePropertyChanged("TestList");
            }
        } 
```

*视图*中的 .axml是：

```
<Mvx.MvxBindableListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        local:MvxBind="{'ItemsSource':{'Path':'TestList','Mode':'TwoWay'}}"
        local:MvxItemTemplate="@layout/my_item_layout" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:16:51.403

数据绑定的工作方式是通过一个名为`INotifyPropertyChanged`

在这个接口中发生的事情是，每当属性更改时，ViewModel 都会向 View 发送消息 - 例如

```
 FirePropertyChanged("TestList"); 
```

对于列表，如果列表本身的内容发生变化，这将无济于事——例如，当列表添加或删除了一个项目时。

* * *

为了解决这个问题，.Net Mvvm 实现包括另一个接口`INotifyCollectionChanged`。

可以实现一个集合——例如一个列表——`INotifyCollectionChanged`以便让视图知道集合的内容何时发生变化。

例如，该集合可能会触发包含以下提示的事件：

*   一切都变了——NotifyCollectionChangedAction.Reset
*   添加了一个项目 - NotifyCollectionChangedAction.Add
*   一个项目已被删除 - NotifyCollectionChangedAction.Remove
*   ...

大约 12:30 进入 MvvmCross Xaminar [http://www.youtube.com/watch?v=jdiu_dH3z5k](http://www.youtube.com/watch?v=jdiu_dH3z5k)

![研讨会](../Images/2324efb72605eaff2763fd56cd6703d9.png)

* * *

要将这个接口用于一个小的内存列表 - 例如少于 1000 个“小”对象 - 你所要做的就是改变你`List<T>`的`ObservableCollection<T>`- ObservableCollection 是核心 .Net 库中的一个类（来自 Microsoft 或 Mono）当您添加/删除列表项时，它将触发正确的事件。

您可以在以下位置查看 Mono ObservableCollection 实现的源代码：[https](https://github.com/mosa/Mono-Class-Libraries/blob/master/mcs/class/System/System.Collections.ObjectModel/ObservableCollection.cs) ://github.com/mosa/Mono-Class-Libraries/blob/master/mcs/class/System/System.Collections.ObjectModel/ObservableCollection.cs - 它是值得花一些时间来看看这个实现，这样你就可以更多地了解 Mvvm 如何与 INotifyCollectionChanged 一起工作。

如果您使用 ObservableCollection 类，那么您的代码将变为：

```
 private ObservableCollection<MyType> _testList;
    public ObservableCollection<MyType> TestList
    {
        get { return _testList; }
        set
        {
            _testList = value;
            FirePropertyChanged("TestList");
            // in vNext use RaisePropertyChanged(() => TestList);
        }
    } 
```

和：

```
 <Mvx.MvxBindableListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="{'ItemsSource':{'Path':'TestList'}}"
    local:MvxItemTemplate="@layout/my_item_layout" /> 
```

笔记：

*   绑定是`OneWay`- 这意味着绑定仍然只是从 ViewModel 到 View -从 View 到 ViewModel**没有更新。**
*   ObservableCollection 被设计为单线程的——因此请确保对集合的所有更改都在 UI 线程上完成——而不是在工作线程上。`InvokeOnMainThread(() => { /* do work here */ })`如果需要，您可以使用ViewModel将工作编组回 UI 线程。
*   在 Android 中，列表的工作方式（通过基本 AdapterView）意味着每次您调用 ObservableCollection 上的任何更新时，UI 列表都会忽略操作提示（添加、删除等）——它将每次更改都视为重置这将导致整个列表重绘。

* * *

对于较大的集合 - 您不希望所有项目同时在内存中 - 您可能需要自己实现一些数据存储支持列表。

[在https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20SimpleDialogBinding/SimpleDroidSql.Core/DatabaseBackedObservableCollection.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20SimpleDialogBinding/SimpleDroidSql.Core/DatabaseBackedObservableCollection.cs)中有一个简单的 sqlite 数据支持存储的简短示例

这种收集数据的虚拟化在 WP 和 WPF 应用程序中很常见 - 例如，请参阅问题和答案，例如[WP7 Mango 中的列表框是否默认虚拟化？](https://stackoverflow.com/questions/12608628/is-listbox-virtualized-by-default-in-wp7-mango/12608781#12608781)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T18:16:19.700

我们刚刚找到了一个适合我们的解决方法！！

注意：从列表中添加和删除会使用新/删除的项目更新视图。但是，对现有项目状态的任何更改都没有反映出来。

解决方案：我们清除了列表并将项目重新添加到具有更新状态的 ViewModel 属性中。然后调用 raisepropertychanged 模拟双向绑定行为。从本质上讲，它是删除所有值并重新添加所有值。***

# java - 为什么我尝试通过批处理文件生成报告时无法生成报告？

> ID：13987914
> 
> 赞同：0
> 
> 时间：2012-12-21T09:57:12.427
> 
> 标签：java, batch-file, jasper-reports

我面临一个非常奇怪的问题。当我从我的 java 类调用 .jrxml 文件时，一切正常。但是当我从批处理文件中调用相同的 java 类时，我无法生成报告。控制台显示一些这样的错误。这个你能帮我吗。

堆栈跟踪：

```
2012-12-21 16:15:13,466 net.sf.jasperreports.engine.fill.JRFillSubreport : prepare - Fill 31497899: exception java.lang.NullPointerException 
  at net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:1034??)  
  at net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java:1004)
  at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementCo??ntainer.java:258)
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillPageHeader(JRVerticalFille??r.java:403) 
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFill??er.java:264) 
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.ja??va:128)  
net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:499) 
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillBandNoOverflow(JRVerticalF??iller.java:439) 
  at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:946) 
  at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:845) 
  at net.sf.jasperreports.engine.fill.JRFillSubreport.fillSubreport(JRFillSubreport.j??ava:609) 
  at net.sf.jasperreports.engine.fill.JRSubreportRunnable.run(JRSubreportRunnable.jav??a:59) 
  at net.sf.jasperreports.engine.fill.JRThreadSubreportRunner.run(JRThreadSubreportRu??nner.java:205) 
  at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:08:21.820

我的猜测是它找不到图像。尝试将绝对路径放入图像文件，只是为了调试并查看会发生什么。我的猜测是，当您从命令行运行它时，它正在错误的位置寻找图像。

# ajax - 防止在 Struts 2 中重新加载页面

> ID：13987918
> 
> 赞同：4
> 
> 时间：2012-12-21T09:57:26.400
> 
> 标签：ajax, struts2, struts2-jquery

我目前正在开发一个小型网络应用程序，这是我第一次使用 Struts2。这是我想要实现的目标。

表单发布上的 Struts2 JSP 页面调用 struts 动作。一旦此操作完成它的任务，我需要返回到调用 JSP 而不重新加载任何页面（避免回发）。我怎样才能实现。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:29:27.503

它被称为**[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)**（不开玩笑）。

在 Struts2 中，您可以使用**[Struts2-jQuery Plugin](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)**轻松实现这一目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:23:44.450

正如 AndreaLigios 所说，您可以使用 struts-j 查询插件来实现这一点。

1.  创建一个远程页面以显示您的结果。
2.  `<sj:sbmit targets="[div_id]" />` 在您的主页上使用 以提交表单
3.  将 div 添加到您的主页以显示远程页面。 `<div id="[div_id]" />`

4.  在您的 struts.xml 中，只需返回远程页面作为您的操作的结果。

# solr - Solr 将 CommonsHttpSolrServer 更改为 HttpSolrServer

> ID：13987920
> 
> 赞同：5
> 
> 时间：2012-12-21T09:57:30.167
> 
> 标签：solr, solrj

对于 solr 3.5 中的基本身份验证，我使用以下代码，

```
String url = "http://192.168.192.11:8080/solr/FormResponses";
CommonsHttpSolrServer server = new CommonsHttpSolrServer( url );
String username = "user";
String password = "user123";
Credentials defaultcreds = new UsernamePasswordCredentials(username, password);
server.getHttpClient().getState().setCredentials(AuthScope.ANY, defaultcreds);
server.getHttpClient().getParams().setAuthenticationPreemptive(true); 
```

在 solr 4.0`CommonsHttpSolrServer`中不可用，所以我想用 `HttpSolrServer`. 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T11:47:35.990

更改代码如下：

```
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.solr.client.solrj.impl.HttpSolrServer;

String url = "http://192.168.192.11:8080/solr/FormResponses";
HttpSolrServer server = new HttpSolrServer( url );
DefaultHttpClient client = (DefaultHttpClient) server.getHttpClient();

UsernamePasswordCredentials defaultcreds = new UsernamePasswordCredentials("user", "user123");
client.getCredentialsProvider().setCredentials(AuthScope.ANY, defaultcreds); 
```

在`server.getHttpClient().getParams().setAuthenticationPreemptive(true)`HttpClient 4 中，您可以使用[此处](https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4)描述的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:52:08.413

终于我自己找到了答案，

```
String url = "http://192.168.192.11:8080/solr/FormResponses";
DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getCredentialsProvider().setCredentials(
    AuthScope.ANY, new UsernamePasswordCredentials("user", "user123"));
SolrServer solrServer = new HttpSolrServer(url, httpclient); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T10:26:06.327

您需要为 HttpClientUtil 添加 JAR [solr-solrj-4.0.0.jar](http://www.java2s.com/Code/Jar/s/Downloadsolrsolrj400jar.htm)。

然后使用下面的代码：

```
HttpSolrServer solrServer = new HttpSolrServer("http://localhost:8080/solr/"+url);     
HttpClientUtil.setBasicAuth((DefaultHttpClient) solrServer.getHttpClient(),
                            "USERNAME", "PASSWORD"); 
```

这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-09T15:44:28.393

这是对我有用的唯一方法：

```
String url = "192.168.192.11:8080/solr/FormResponses";
String username = "user";
String password = "user123";
HttpSolrServer server = new HttpSolrServer("http://" + username + ":" + password + "@" + url); 
```

# database - SQLAlchemy - 将一个类映射到多个表，其中一个是只读的

> ID：13987921
> 
> 赞同：2
> 
> 时间：2012-12-21T09:57:30.060
> 
> 标签：database, database-design, sqlalchemy

我有一个由“foobar”和“foobar_data_cache”表表示的 foobar 概念是数据库，而“Foobar”类是 python。“foobar”表表示有关概念的一些数据，而“foobar_data_cache”表表示有关概念的一些其他数据，这些数据源自数据库中的许多其他信息并由数据库触发器计算。为了保持一致性，从 'foobar_data_cache' 表中撤销了 INSERT、UPDATE 和 DELETE 权限。

使用 SQLAlchemy，我想通过连接将 'Foobar' 类映射到两个表 'foobar' 和 'foobar_data_cache'。没有理由使用另一个类来表示“foobar_data_cache”表中的数据并在这两个类之间建立关系，因为这两个表中的数据是强相关的。实际上，从数据库的角度来看，两个表之间存在一对一的关系，由以下方式保证：
- 'foobar_data_cache' 的主键也是引用 'foobar' 主键的外键
- 和触发器检查“foobar”中的每一行在“foobar_data_cache”中是否有相应的行

我的问题是，当我尝试使用 SQLAlchemy ORM 持久化一个新的 Foobar 对象时，它会尝试为 'foobar_data_cache' 表插入一些行，我想阻止它。

那么，是否有可能以将“foobar_data_cache”表视为只读的方式配置 SQLAlchemy？如果是，如何？

这是解释我的问题的代码：

```
from sqlalchemy import (
    Table,
    Column,
    Integer,
    String,
    ForeignKeyConstraint,
    join,
    create_engine,
    )
from sqlalchemy.orm import (
    column_property,
    sessionmaker,
    )
from sqlalchemy.schema import (
    FetchedValue,
    )
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

_foobar_table = Table('foobar', Base.metadata,
        Column('id', Integer, primary_key=True),
        Column('some_data', String),
    )

_foobar_data_cache_table = Table('foobar_data_cache', Base.metadata,
        Column('foobar_id', Integer, primary_key=True),
        Column('computed_data', String, server_default=FetchedValue()),
        ForeignKeyConstraint(['foobar_id'], ['foobar.id']),
    )

class Foobar(Base):
    __table__ = _foobar_table.join(_foobar_data_cache_table)
    _id = column_property(_foobar_table.c.id, _foobar_data_cache_table.c.foobar_id)

    def __init__(self, some_data):
        self.some_data = some_data

if __name__ == '__main__':
    engine = create_engine('postgresql://tester@localhost:5432/mytestdb')
    Session = sessionmaker(bind=engine)
    session = Session()

    my_foobar = Foobar('Dummy data')
    session.add(my_foobar)
    session.commit() 
```

下面是创建这两个表的 SQL 命令：

```
CREATE TABLE foobar (
  id int NOT NULL DEFAULT -2147483648,
  some_data varchar NOT NULL,
  CONSTRAINT pk_foobar PRIMARY KEY (id)
);

CREATE TABLE foobar_data_cache (
  foobar_id int NOT NULL,
  computed_data varchar NOT NULL,
  CONSTRAINT pk_foobar_data_cache PRIMARY KEY (foobar_id),
  CONSTRAINT fk_foobar_data_cache_foobar_1 FOREIGN KEY (foobar_id)
    REFERENCES foobar (id) MATCH FULL
    ON UPDATE CASCADE ON DELETE CASCADE
); 
```

**注意：**
考虑到它们之间是一对一的关系，有些人可能想知道为什么我将数据拆分到两个不同的表中。通过在计算列上使用单个表和 FetchedValue 构造（请参阅[如何在 SQLAlchemy 上仅保留映射列的子集？ ），可以轻松解决该问题。](https://stackoverflow.com/questions/13977154/how-to-persist-only-a-subset-of-the-mapped-columns-on-sqlalchemy)嗯，这有点复杂，但我会试着解释一下。首先，上面没有解释的其他事情是：
- 我使用 PostgreSQL 8.4，其中不能有可延迟的 UNIQUE 约束
- 我的列都不接受 NULL 值
- 'foobar_data_cache' 中的某些列具有唯一约束（不可延迟）
- 计算“foobar_data_cache”中数据的触发器被推迟到事务结束。实际上，这是因为由于外键约束，它从其他表中获取只能在插入 'foobar' 之后插入的信息。

也就是说，在使用单个表的情况下，这意味着由于 NOT-NULL 约束，我必须为我的计算列使用临时虚拟值。我的触发器最终会在事务结束时覆盖它。问题在于并发性。实际上，新事务 Tx 在另一个事务 T1 正在执行时尝试插入新的 'foobar' 会失败，因为唯一列的默认虚拟值已经存在于与正在执行的事务 T1 对应的行中。我可以为具有唯一约束的列生成随机虚拟值，但我不喜欢这种做事风格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:02:24.220

如果 ORM 没有可用的表的主键，它将跳过任何 INSERT/UPDATE/DELETE。在这种情况下`exclude_properties`将实现这一点，还要注意复合“PK”列消失了，因为我们不关心“ `foobar_id`”的值：

```
from sqlalchemy import (
    Table,
    Column,
    Integer,
    String,
    ForeignKeyConstraint,
    join,
    create_engine,
    )
from sqlalchemy.orm import (
    column_property,
    sessionmaker,
    )
from sqlalchemy.schema import (
    FetchedValue,
    )
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

_foobar_table = Table('foobar', Base.metadata,
        Column('id', Integer, primary_key=True),
        Column('some_data', String),
    )

_foobar_data_cache_table = Table('foobar_data_cache', Base.metadata,
        Column('foobar_id', Integer, primary_key=True),
        Column('computed_data', String, server_default=FetchedValue()),
        ForeignKeyConstraint(['foobar_id'], ['foobar.id']),
    )

class Foobar(Base):
    __table__ = _foobar_table.join(_foobar_data_cache_table)
    _id = _foobar_table.c.id

    def __init__(self, some_data):
        self.some_data = some_data

    __mapper_args__ = {"exclude_properties": [_foobar_data_cache_table.c.foobar_id]}

if __name__ == '__main__':
    engine = create_engine('postgresql://scott:tiger@localhost/test', echo=True)

    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine)

    Session = sessionmaker(bind=engine)
    session = Session()

    my_foobar = Foobar('Dummy data')
    session.add(my_foobar)

    # simulate your trigger...
    session.flush()
    assert session.scalar(_foobar_data_cache_table.count()) == 0
    session.execute(
        _foobar_data_cache_table.insert(),
        params=dict(
                foobar_id=my_foobar._id,
                computed_data="some computed data"
                )
    )

    session.commit()

    obj = session.query(Foobar).first()
    assert obj.computed_data == "some computed data" 
```

也就是说，如果你使用传统的和之间的链接，而不是组合成一个映射的，那么整个映射会更*简单*。`relationship()``_foobar``_foobar_data_cache_table``join()`

# c# - 当文件位于应用程序文件夹之外时，在 HTML 中嵌入 PDF

> ID：13987924
> 
> 赞同：3
> 
> 时间：2012-12-21T09:57:53.130
> 
> 标签：c#, asp.net, pdf, stream, google-docs

我将 PDF 文件保存在 Web 应用程序外部服务器的文件夹中（出于安全原因），我需要使用 google 文档预览文件。

```
<iframe src="http://docs.google.com/gview?url=????&embedded=true" 
        style="width:718px; height:700px;" frameborder="0"></iframe> 
```

到现在为止，我通过以文件路径作为参数的形式重定向以使它们可供下载：

```
string path = Request.QueryString["src"];
int index = Request.QueryString["src"].ToString().LastIndexOf("\\");
string filename = Request.QueryString["src"].ToString().Substring(index + 1);
FileStream fileStream = new FileStream(path, FileMode.Open);
int fileSize = (int)fileStream.Length;
byte[] Buffer = new byte[fileSize];
fileStream.Read(Buffer, 0, fileSize);
fileStream.Close();
Response.ContentType = ContType(path);
Response.AddHeader("content-disposition", "attachment;filename=\"" + filename);
Response.BinaryWrite(Buffer);
Response.End(); 
```

我尝试将 url 添加`file.aspx?src=C:\...`为 google doc iframe 的 url 的参数，比如

```
http://docs.google.com/gview?url=file.aspx?src=C:\... 
```

但它不起作用。

有没有其他方法可以将 URL 分配给流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:33:50.063

你可以尝试这样的事情：

```
<iframe src="http://docs.google.com/gview?url='file.aspx?src='C:\storage\test.pdf''&embedded=true" 
        style="width:718px; height:700px;" frameborder="0"></iframe> 
```

根据需要将 ' 与 " 交替使用。

作为旁注，我建议您不要将完整的文件路径从服务器发送到客户端的浏览器。这听起来像是将 50 英寸电视、蓝光播放器、电脑和其他贵重物品放在您家中的位置草稿，供任何潜在的小偷考虑。

作为替代方案，您可以使用带有 ID 的数据库或 XML 文件来识别每个文件，并从那里读取文件路径。

# mysql - MySQL - 删除 INNODB 表上被拒绝的行

> ID：13987925
> 
> 赞同：0
> 
> 时间：2012-12-21T09:57:58.550
> 
> 标签：mysql, foreign-keys, innodb

我有两个表 - 一个用户表和一个用户日志表。

```
CREATE TABLE `client_user` (
  `id_client_user` int(11) NOT NULL auto_increment,
  `Nom` varchar(45) NOT NULL,
  `Prenom` varchar(45) NOT NULL,
  `email` varchar(255) NOT NULL,
  `userid` varchar(45) NOT NULL,
  `password` varchar(45) NOT NULL,
  `active` tinyint(1) NOT NULL default '0',
  `lastaccess` timestamp NULL default NULL,
  `user_must_change_pwd` tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (`id_client_user`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `user_log` (
  `id_user_log` int(11) NOT NULL auto_increment,
  `access` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `zone_updated` varchar(255) NOT NULL,
  `id_client_user` int(11) NOT NULL,
  PRIMARY KEY  (`id_user_log`),
  KEY `fk_user_log_client_user1` (`id_client_user`),
  CONSTRAINT `fk_user_log_client_user1`
  FOREIGN KEY (`id_client_user`)
      REFERENCES `client_user` (`id_client_user`)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我在 client_user 表中创建了一个用户，然后他的活动记录在 user_log 表中。我现在需要删除 user_log 表中的行。由于外键约束，这被拒绝了——我已经明白了。

查看文档后，我还没有看到如何更改外键以允许我删除 user_log 记录。我需要的是一个外键 (1:n)，client_user (1) 到 user_log (n)，其中 user_log 记录可以被删除而不影响关联的 client_user 记录。

我确信这对于 innodb 是可能的，但我看不出如何。帮助 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:05:53.420

从[规范](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

InnoDB 支持使用 ALTER TABLE 来删除外键：

```
ALTER TABLE tbl_name DROP FOREIGN KEY fk_symbol; 
```

# google-maps - 如何在android中知道地图是否完全以编程方式加载？

> ID：13987926
> 
> 赞同：0
> 
> 时间：2012-12-21T09:57:57.700
> 
> 标签：google-maps

我正在地图视图中加载地图，我正在从视图中捕获地图并通过电子邮件在我的应用程序中发送图像。但是，我只想在图像完全加载到我的视图中时才捕获图像。android中是否有一种机制可以知道状态。

提前致谢

# eclipse - 如果方法中的参数未声明为最终参数，如何显示 javadoc 警告？

> ID：13987928
> 
> 赞同：0
> 
> 时间：2012-12-21T09:58:00.353
> 
> 标签：eclipse, javadoc

我已经创建了一个项目特定的代码格式和代码模板 xml。

**如果方法中的参数未声明为最终参数，**我想向用户显示 javadoc 警告。

 **请让我知道我需要在属性窗口中修改哪个属性？**

# jquery - 带有 jQ uery 的图像标题

> ID：13987929
> 
> 赞同：1
> 
> 时间：2012-12-21T09:58:03.663
> 
> 标签：jquery, html, css

我有一个上面有边框的图像，我想要一个在悬停图像时在它们之间“滑动”的标题。我只是无法让它按我想要的方式工作，我所拥有的是：

```
<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link href="style.css" rel="stylesheet" type="text/css" />

        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js " type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                $('.boxGrid').hover(function(){
                    $('.boxCaption', this).stop().animate({bottom:'0px'},{queue:false,duration:300});
                }, function() {
                    $('.boxCaption', this).stop().animate({bottom:'-121px'},{queue:false,duration:300});
                });
            });
        </script>
    </head>
    <body>
        <div class="wrapper">
            <div class="boxGrid"></div>
            <div class="buttonBack blogImg">
                <div class="boxCaption">
                    <h3>Top-Blog</h3>
                </div>
            </div>
        </div>
    </body>
</html> 
```

*css*

```
.wrapper
{
    position: relative;
    width: 226px;
    height: 246px;
}

.boxGrid
{
    width: 226px;
    height: 246px;
    background-image: url(http://s10.postimage.org/z2cp1i70p/button_Border.png);
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 100;
}

.buttonBack
{
    position: absolute;
    top: 12px;
    left: 13px;
    border: 0px;
    width: 200px;
    height: 223px;
    z-index: 50;
    overflow: hidden;
}

.blogImg
{
    background-image: url(http://s10.postimage.org/jflfo4t8p/blog_Button.png);
}

.boxCaption
{
    position: absolute;  
    background: url(http://s10.postimage.org/c2an2wykp/caption.png);
    height: 121px;
    width: 100%;
    bottom: -121px;
    text-align: center;
}

.boxCaption h3
{
    font-size: 30px;
    color: #fff;
} 
```

但是当我像这样编辑 html 和 jQuery 时，它可以工作：

```
<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link href="style.css" rel="stylesheet" type="text/css" />

        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js " type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                $('.buttonBack').hover(function(){
                    $('.boxCaption', this).stop().animate({bottom:'0px'},{queue:false,duration:300});
                }, function() {
                    $('.boxCaption', this).stop().animate({bottom:'-121px'},{queue:false,duration:300});
                });
            });
        </script>
    </head>
    <body>
        <div class="wrapper">
            <!--<div class="boxGrid"></div>-->
            <div class="buttonBack blogImg">
                <div class="boxCaption">
                    <h3>Top-Blog</h3>
                </div>
            </div>
        </div>
    </body>
</html> 
```

我所做的是注释`div.boxGrid`out 并让 jQuery 函数在悬停`div.buttonBack`在`div.boxGrid`. 只是这不是我想要的，我希望`div.boxGrid`它高于一切，所以我在悬停时得到[了这种效果。](http://s13.postimage.org/6g2taf7s7/blogknop_mouseover_2_large.png)

我做了一个jsFiddle，[在这里](http://jsfiddle.net/wBjT3/2/)它不起作用，但是[像这样](http://jsfiddle.net/wBjT3/3/)它起作用了......

任何帮助将不胜感激，我正在把头发拉出来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:08:02.643

你的`boxGrid`班级高于`z-index`班级`buttonBack`。修复它然后尝试...

见链接：http: [//jsfiddle.net/wBjT3/5/](http://jsfiddle.net/wBjT3/5/)

# gwt - 在 Eclipse 中构建 GWT UI

> ID：13987930
> 
> 赞同：2
> 
> 时间：2012-12-21T09:58:03.910
> 
> 标签：gwt, google-plugin-eclipse, gui-designer, gwt-designer

我想尝试使用我读到的这个 GWT 设计器工具来构建一个 UI。我安装了 GWT 工具，创建了一个“Google -> Web 应用程序项目”，但除了通过代码之外，我没有看到任何构建 UI 的方法。我尝试安装插件 [http://dl.google.com/eclipse/inst/d2gwt/latest/3.7](http://dl.google.com/eclipse/inst/d2gwt/latest/3.7) 但它失败了（不确定我是否需要这个）

这是我正在看的教程.....我如何获得这个 UI 设计视图？ [https://developers.google.com/web-toolkit/tools/gwtdesigner/quick_start](https://developers.google.com/web-toolkit/tools/gwtdesigner/quick_start)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:51:16.317

如果您不想使用 UiBinder，另一种使用 GWT 设计器的方法是

1.  在 Eclipse 中，右键单击 Package Explorer 中的视图类
2.  打开用
3.  GWT 设计师
4.  选择类窗口底部的设计器选项卡。

![在此处输入图像描述](../Images/beaf108feedcf4fec5e25b2f8d43da74.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:44:06.483

首先从新文件对话框（`Ctrl`+ `N`）创建一个 UiBinder 文件（xxx.ui.xml）：

![在此处输入图像描述](../Images/dfe4c7075b2ccc3a4b2c84bba4566ab1.png)

然后从eclipse中打开文件的左下方选择“设计”。

![在此处输入图像描述](../Images/6a75a296f6b3232b91ffe15d07251df9.png)

# drupal - 在 Solr-Drupal Recruiter 中需要帮助

> ID：13987933
> 
> 赞同：0
> 
> 时间：2012-12-21T09:58:21.000
> 
> 标签：drupal, solr

朋友们，首先我是 Solr 的 Drupal 新手。我已经安装了 Drupal Recruiter 模块，甚至安装/配置了 Solr。Solr 正在工作`http://localhost:8983/solr/`意味着它正在响应。我遵循了有关在 Drupal Recruiter 中启用 solr 模块的所有步骤。

但是每当我在drupal中访问搜索时，我都会反复收到以下错误：

```
"An error occurred while trying to search with Solr: '400' Status: Bad Request." 
```

stackoverflow 中给出了几个解决方案，但我没有得到它，因为我对两者都很陌生。

请帮我找出哪里出错了。

在此先感谢 Dushyant Joshi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:28:20.433

在评论中，您指出您正在使用 Search API 不支持的 solr (4.0) 版本。最新的非 4.x 版本是 3.6.1，可从[http://www.apache.org/dyn/closer.cgi/lucene/solr/3.6.1](http://www.apache.org/dyn/closer.cgi/lucene/solr/3.6.1)下载。

更新：对于任何回到这个答案的人。问题是 OP 没有使用 Search API Solr 模块附带的 solr 配置文件。

# java - 从jsp上传文件

> ID：13987939
> 
> 赞同：0
> 
> 时间：2012-12-21T09:58:45.540
> 
> 标签：java, jsp, servlets, file-upload

我正在尝试使用以下代码从 jsp 上传多个文件：

当我从本地机器执行它时，我可以在本地系统文件夹中上传。但是当我从远程机器访问相同的文件时，我希望文件应该上传到我的 tomcat 所在的同一台机器上，但是我收到错误 C:\Files\`找不到文件夹/文件`。请指导。如何将其上传到远程机器或tomcat所在的位置

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
     if (!isMultipart) {
     } else {
               FileItemFactory factory = new DiskFileItemFactory();
               ServletFileUpload upload = new ServletFileUpload(factory);
               List items = null;
               try {
                       items = upload.parseRequest(request);
               } catch (FileUploadException e) {
                       e.printStackTrace();
               }
               Iterator itr = items.iterator();
               while (itr.hasNext()) {
               FileItem item = (FileItem) itr.next();
               if (item.isFormField()) {
               } else {
                       try {
                               String itemName = item.getName();
                               File savedFile = new File("C:\\Files\\a.tiff");
                               item.write(savedFile);  

                       } catch (Exception e) {
                               e.printStackTrace();
                       }
               }
               }
       } 
```

这是我要上传`C:\\Files\\`tomcat所在机器的所有文件的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:03:51.047

将文件保存路径更改为`new File("C:\\Files\\");`. 甚至，您仍然有任何问题，然后`Files`在另一个驱动器中创建一个具有名称的文件夹`E`或`F`其他任何内容，并更改您的代码，例如`new File("E:\\Files\\");`如果您想将文件保存到`E`驱动器。

**注意：**由于`C`驱动器是 Windows 操作系统中的主驱动器，因此由于缺乏权限，它不允许在该驱动器中创建新文件/文件夹。所以，请尝试替代解决方案。我的意思是尝试更改您的文件位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:00:00.750

您需要将其更改`new File("C:\\Files\\");`为我的远程服务器上的文件夹名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:09:06.400

请看一下这篇文章

[http://www.avajava.com/tutorials/lessons/how-do-i-monitor-the-progress-of-a-file-upload-to-a-servlet.html?page=2](http://www.avajava.com/tutorials/lessons/how-do-i-monitor-the-progress-of-a-file-upload-to-a-servlet.html?page=2)

[http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm](http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm)

[http://www.caucho.com/resin-3.0/jsp/tutorial/multipart.xtp](http://www.caucho.com/resin-3.0/jsp/tutorial/multipart.xtp)

[http://www.c-sharpcorner.com/UploadFile/0d4935/how-to-upload-files-in-jsp/](http://www.c-sharpcorner.com/UploadFile/0d4935/how-to-upload-files-in-jsp/)

# math - matplotlib mathtext 不起作用

> ID：13987942
> 
> 赞同：1
> 
> 时间：2012-12-21T09:59:06.367
> 
> 标签：math, matplotlib

我正在做一个历史图，我想在图中显示一些数字，所以我在一个使用 mathtext 的文本框中输入了文本，但我不工作，我不明白为什么。

```
a = [2086., 360.5, 1000.]

b = [977., 37., 498.]

c = [4512., 690., 378.]

textstr = r'$\per50=%.2f$\n$\per16=%.2f$\n$\per84=%.2f$'%(a[0],b[0],c[0])

    # these are matplotlib.patch.Patch properties
    props = dict(boxstyle='round', facecolor='wheat', alpha=0.75)

    # place a text box in upper left in axes coords
    ax.text(0.05, 0.95, textstr, transform=ax.transAxes, fontsize=14,
            verticalalignment='top', bbox=props) 
```

在我的图结束时，我收到了这个错误：

```
matplotlib.pyparsing.ParseFatalException: Expected end of math '$'
$\per50=2086.00$\n$\per16=977.00$\n$\per84=4512.00$ (at char 0), (line:1, col:1) 
```

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:42:21.280

您收到该错误是因为该命令`$\per$`不存在。那是您定义的乳胶命令吗？如果您设置 matplotlib 参数`text.usetex=True`，则可以设置乳胶前导码并在那里定义命令，例如：

```
rc('text', usetex=True)
rc('text.latex', preamble='something') 
```

但我认为这不能用于定义新命令（并且不鼓励使用前导码）。所以你最好的选择是在 matplotlib 中明确地写出任何`\per`代表什么。

# javascript - 如何通过javascript更改href地址端口

> ID：13987943
> 
> 赞同：0
> 
> 时间：2012-12-21T09:59:16.313
> 
> 标签：javascript, html

我正在尝试创建一个简单的href，但指向另一个端口，即应该替换一组按钮href地址中的一个并对其进行操作以指向一个有效的地址：

```
<div id="btnLSR" class="btn" > <a href="extern.rms:8080"> </a> </div> 
```

应该指向'http://hostname:8080/extern.rms'

我从另一个像这样的解决方案中稍微操纵了javascript

```
<script language="JavaScript">  
  document.addEventListener('click', function(event) {
       var target = event.target;
             if (target.tagName.toLowerCase() == 'a')
             {        
                 var port = target.getAttribute('href').match(/:(\d+)$/);    
                 if (port)
                 { 
                     target.port = port[1];
                     window.alert(target.port + " " + target.href);
                     target.href = target.href.replace("/:"+target.port, "");
                 } 
             }
    }, false);

</script> 
```

但是没有办法指向正确的地址。目前这个链接指向'http://extern.rms:8080'，即没有变化。

你有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:05:37.257

这应该可以解决问题：

```
document.addEventListener('click', function (event) {
    var target = event.target;
    if (target.tagName.toLowerCase() == 'a') {
        // Split 'extern.rms:8080' up into a array: ['extern.rms','8080'];
        var h = target.getAttribute('href').split(':');
        // Set the href to: The current `origin` + ':' + '8080' + '/' + 'extern.rms';
        target.href = 'http://' + window.location.hostname + ':' + h[1] + '/' + h[0];
    }
}, false); 
```

# c++ - 将 inode 位图打印为无符号字符

> ID：13987945
> 
> 赞同：1
> 
> 时间：2012-12-21T09:59:23.577
> 
> 标签：c++, c, inode, unsigned-char

如何打印作为无符号字符获取的 inode 位图的位？这是我用于获取位图的代码。我想做的是以二进制格式打印位图。

```
#include <cstdlib>
#include <ext2fs/ext2fs.h>
#include <linux/fs.h>
#include <iostream>
#include <stdio.h>
#include <fstream>
#include <fcntl.h>

using namespace std;

int main() {
    int fd, block_size;
    char boot[1024];
    struct ext2_super_block super_block;
    fd = open("/dev/sda6", O_RDONLY);
    printf("Error: %s\n", strerror(errno));

    /* Reads the boot section and the superblock */
    read(fd, boot, 1024);
    read(fd, &super_block, sizeof (struct ext2_super_block));

    if (super_block.s_magic != EXT2_SUPER_MAGIC) {
        fprintf(stderr, "Not an Ext2 filesystem!\n");
        getchar();
        exit(1);
    }

    /* Prints the Magic Number */
    //    printf("%x\n", super_block.s_magic);

    printf("%x\n", super_block.s_log_block_size);
    block_size = 4096 << super_block.s_log_block_size;

    /* calculate number of block groups on the disk */
    unsigned int group_count =
            1 + (super_block.s_blocks_count - 1) / super_block.s_blocks_per_group;
    /* calculate size of the group descriptor list in bytes */
    unsigned int descr_list_size =
            group_count * sizeof (struct ext2_group_desc);
    struct ext2_group_desc group_descr;

    /* position head above the group descriptor block */
    lseek(fd, 1024 + block_size, SEEK_SET);
    read(fd, &group_descr, sizeof (group_descr));
    /* location of the super-block in the first group */
#define BASE_OFFSET 1024
#define BLOCK_OFFSET(block) (BASE_OFFSET + (block-1)*block_size)

    struct ext2_super_block super;
    struct ext2_group_desc group;
    unsigned char *bitmap, bits[8];
    /* the super block */
    /* the group descritopr */
    /* ... [read superblock and group descriptor] ... */
    bitmap = (unsigned char*) malloc(block_size);
    /* allocate memory for the bitmap */
    lseek(fd, BLOCK_OFFSET(group.bg_block_bitmap), SEEK_SET);
    read(fd, bitmap, block_size);
    /* read bitmap from disk */
    unsigned char* bla = (unsigned char*) bitmap;
    printf("bitmap: ");
    for (int i = 0; i < block_size; i++) {
        printf("%x", &bitmap[i]);
    }
    free(bitmap);

    printf("%x\n", block_size);

    close(fd);

    return 0;
} 
```

我对这段代码有点怀疑。我如何确定结果。我在 ubuntu 12.4 ex4 文件系统上运行它。

编辑：我制作了一个原始磁盘映像并尝试读取它，但得到它不是 EXtended2 文件系统的错误？这是我使用的地址：

```
fd = open("/dev/zero", O_RDONLY); 
```

# algorithm - 在文件中查找 k 个最常用的单词 - 内存使用情况

> ID：13987948
> 
> 赞同：13
> 
> 时间：2012-12-21T09:59:36.717
> 
> 标签：algorithm, data-structures

假设你有一个大文件，比如 1GB。该文件的每一行都包含一个单词（总共 n 个单词），并且您要查找文件中最常用的 k 个术语。

现在，假设您有足够的内存来存储这些单词，那么在减少内存使用和 Big-O 复杂性中的持续开销方面，解决这个问题的更好方法是什么？我相信可以使用两种基本算法：

1.  使用哈希表和最小堆来存储出现次数和看到的前 K 个单词。这是 O(n + nlogk) ~ O(N)
2.  使用 trie 存储单词和出现次数，然后遍历 trie 计算最频繁出现的单词。这是 O(n*p) ~ O(N)，其中 p 是最长单词的长度。

哪种方法更好？

另外：如果您没有足够的内存用于哈希表/trie（即 10MB 左右的有限内存），那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:18:28.893

关于常数哪个更有效是**非常依赖**的。一方面，trie`O(N)`为插入所有元素提供了严格的时间复杂度，而**哈希表**在最坏的情况下可能会衰减到二次时间。
另一方面，在**[缓存](http://en.wikipedia.org/wiki/CPU_cache)****方面尝试效率不是很高**——每次查找都需要`O(|S|)` *随机访问*内存请求，这可能会导致性能显着下降。

这两种方法都是有效的，我认为在选择其中一种时应该考虑多种因素，例如最大[延迟](http://en.wikipedia.org/wiki/Latency_%28engineering%29)（如果是实时系统）、吞吐量和开发时间。

如果平均案例性能很重要，我建议生成一堆文件并运行**[统计分析](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)**哪种方法更好。[Wilcoxon](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)签名检验是实际使用的最先进的假设检验。

* * *

关于嵌入式系统：这两种方法仍然有效，但在这里：trie 中的每个“节点”（或一堆节点）都将在磁盘上而不是在 RAM 上。请注意，这意味着**对于 trie O(|S|)*随机访问*磁盘查找**每个条目，这可能会很慢。

对于散列解决方案，您有 10MB，假设他们可以将其中的 5MB 用于磁盘指针的散列表。我们还假设你可以在这 5MB 上存储 500 个不同的磁盘地址（这里悲观分析），这意味着在每次哈希查找后你还有 5MB 可以加载一个桶，如果你有 500 个桶，加载因子为 0.5，这意味着您可以存储 500 * 5MB * 0.5 ~= 1.25GB > 1GB 的数据，因此使用散列表解决方案，因此**使用散列 - 每次查找只需要`O(1)` *随机*磁盘查找**即可找到包含相关字符串的存储桶。

请注意，如果仍然不够，我们可以重新散列指针表，非常类似于在虚拟内存机制中的[分页表中所做的。](http://en.wikipedia.org/wiki/Page_table)

由此我们可以得出结论，对于嵌入式系统，**散列解决方案在大多数情况下更好**（请注意，在最坏的情况下它可能仍会遭受高延迟，这里没有灵丹妙药）。

* * *

PS，**[基数树](http://en.wikipedia.org/wiki/Radix_tree)**通常比 trie 更快，更紧凑，但与哈希表相比，它具有 trie 的相同副作用（当然，虽然不那么重要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:05:08.177

对于有限的内存选项，您可以先快速对列表进行排序，然后简单地填充一个包含 k 个项目的哈希表。然后，您将需要一个计数器来知道您正在检查的当前单词中有多少项目 - 如果它更高，那么您将哈希表中的最低项目替换为当前项目。

这可能对初始列表有效，但比仅扫描完整列表并使用计数填充哈希表要慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:26:18.760

你开车去存储中间结果吗？如果真实：

你可能有一些元结构。和一组哈希表。您读取了一部分数据（当您的哈希大小 < 3 mb）并填充哈希表。当 size > 3mb 你保存在磁盘上。如果您限制为 10 mb，则哈希表的大小为 3 mb（例如）。

meta 描述你的哈希表。在元中，您可以存储此哈希中唯一单词的数量和所有单词的数量以及一个世界的最大数量！！！一世

在这之后。您可以从磁盘加载哈希表并合并。

例如，您可以按唯一单词的升序或哈希中一个世界的最大计数加载哈希表。在这一步中，您可能会使用一些启发式方法。

# javascript - 影响父函数的函数

> ID：13987954
> 
> 赞同：1
> 
> 时间：2012-12-21T10:00:10.407
> 
> 标签：javascript, jquery

我有一个功能：

```
function validateForm() {
    var result = ''
    $.get(
        '/auth_validate_username/', 
        { 'result': result }, 
        function(data) {
            if (data!=='') {
                // make function validateForm return false
            }
        }
    );
}; 
```

我想知道是否有办法在我的条件下做一些适用于`get`请求上方功能的事情。

我真正想做的是，如果我的 get 请求满足我的条件，则该函数`validateForm()`返回 false。

有没有办法做到这一点？

编辑：这是我尝试过的

js：

```
 var validateResult;    

   $('#but_id').click(function(event){

    validateForm().done(function(){       

     if(!validateResult)
         event.preventDefault();
   });
   })

  function validateForm() {
    var result = ''

   return $.get(
     '/auth_validate_username/', 
     { 'result': result }, 
     function(data) {
        if(data!==''){

      validateResult = false;
     }
     }
     );    
    }; 
```

html:

```
 <form  method="post" onsubmit="return validateForm();">

    <input id='username' type="text" name="username"/>

<button type="submit" id='but_id'>Submit</button>

     </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:09:55.570

我假设你正在尝试做这样的事情：

```
if (validateForm()) {
    doSomething();
}
else {
    displayError();
} 
```

相反，只需这样做：

```
function validateForm(){
  //...
  $.get(
    '/auth_validate_username/', 
    { 'result': result }, 
    success: function(data) {
      doSomething();
    },
    error: function(data) {
      displayError();
    }
  );
} 
```

您只需要确保您的服务器做出相应的响应。即，您的服务器不应`200`为对`/auth_validate_username`.

`$.get`只是 的简写[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)。在文档中阅读有关回调的更多信息。

* * *

### 根据您的评论！

```
function doSomething(data, textStatus, jqXHR) {
  $('form').submit();
}
function displayError(jqXHR, textStatus, errorThrown){ ... }
function validateForm(event){
  $.ajax(
    url: '/auth_validate_username/',
    data: {"result": result},
    success: doSomething,
    error: displayError
  );
  return false; // prevent default form submit
}
$('form').submit(validateForm); 
```

很高兴知道这是您从一开始的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:03:59.440

尝试在函数调用中使用 done。

*在 html 中*

```
<input type ="button" id="yourButtonId" value="submit" /> 
```

*在 JavaScript 中*

```
var validateResult;    

$('#yourButtonId').click(function(event){

   validateForm().done(function(){       
         //your code      
         if(!validateResult)
             event.preventDefault();
    });
})

function validateForm() {
  var result = ''

  return $.get(
    '/auth_validate_username/', 
    { 'result': result }, 
    function(data) {
        if(data!==''){
    // make function validateForm return false
          validateResult = false;
    }
    }
  );    
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:07:38.933

ajax 将在函数完成后完成。所以没有办法做你正在寻找的东西。重新安排您的设计或从 get 中的成功功能提交表单。

这是我在解决方法中的~~疯狂~~方法

```
var validating = false;
var safeSubmit = false;
function validateForm()
{
 validating = true;
 $("#formElementId").ajaxStop(function () {
  if( !validating ) return;
  if( safeSubmit ) $(this).submit();
  validating = false;
  $(this).unbind("ajaxStop");
 });
 var result = ''
 $.get(
    '/auth_validate_username/', 
    { 'result': result }, 
    function(data) {
        if (data!=='') {
            // make function validateForm return false
        }else{
          safeSubmit = true;
          //this could also simply be
          //$("#formElementId").submit();
        }
    }
 );
 return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:10:15.103

启动 ajax 调用时，使用同步调用可以实现你想要的 'async: false'。在 Chrome 控制台中尝试过并且可以正常工作。

```
function validateForm() {
  var result = ''
  var retval=true;

  $.ajax(
    '/auth_validate_username/', 
    {
      async: false,
      data: { 'result': result }
    }
  ).done(function ( data ){
    if(data !== ''){
      retval = false;
    }
  });
  return retval;
}; 
```

# slf4j - slf4j 的 CommonsLogger 等效项

> ID：13987956
> 
> 赞同：1
> 
> 时间：2012-12-21T10:00:26.210
> 
> 标签：slf4j, apache-commons-logging

我们正在从 commons-logging 迁移到 slf4j。

我们正在使用 org.apache.fop.apps.Driver 类来生成 PDF 文件。现在，Driver 类的 setLogger() 方法将 org.apache.avalon.framework.logger.Logger 作为参数。

CommonsLogger 方法在 org.apache.avalon.framework.logger 包中提供，将 commons-logging logger 转换为 org.apache.avalon.framework.logger.Logger。

请在下面找到示例代码：

```
org.apache.fop.apps.Driver driver = new Driver();
driver.setLogger(new CommonsLogger(logger, getClass().getName())); 
```

现在，什么是 slf4j 记录器的替代品？

最好的，我猜是使用 NullLogger() 而不是 CommonsLogger()。请告诉我是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:08:09.457

我建议您创建一个 org.apache.avalon.framework.logger.Logger 的实现，它将采用 SLF4J 记录器。与此处类似 - [https://svn.ametys.org/trunk/runtime/trunk/main/kernel/src/org/ametys/runtime/util/SLF4JLogger.java](https://svn.ametys.org/trunk/runtime/trunk/main/kernel/src/org/ametys/runtime/util/SLF4JLogger.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-17T13:20:03.300

不确定如何将`fatal`日志消息类型映射到 SL4J，但这里是有效的代码片段：

```
import lombok.extern.slf4j.Slf4j;
import org.apache.avalon.framework.logger.Logger;

@Slf4j
public class SL4JLoggerAdapter implements Logger {
    public static final int LEVEL_DEBUG = 0;
    public static final int LEVEL_INFO = 1;
    public static final int LEVEL_WARN = 2;
    public static final int LEVEL_ERROR = 3;
    public static final int LEVEL_FATAL = 4;
    public static final int LEVEL_DISABLED = 5;

    private final int m_logLevel;

    public SL4JLoggerAdapter( final int logLevel )
    {
        m_logLevel = logLevel;
    }

    @Override
    public void debug(String message) {
        log.debug(message);
    }

    @Override
    public void debug(String message, Throwable throwable) {
        log.debug(message, throwable);
    }

    @Override
    public boolean isDebugEnabled() {
        return m_logLevel == LEVEL_DEBUG;
    }

    @Override
    public void info(String message) {
        log.info(message);
    }

    @Override
    public void info(String message, Throwable throwable) {
        log.info(message, throwable);
    }

    @Override
    public boolean isInfoEnabled() {
        return m_logLevel == LEVEL_INFO;
    }

    @Override
    public void warn(String message) {
        log.warn(message);
    }

    @Override
    public void warn(String message, Throwable throwable) {
        log.warn(message, throwable);
    }

    @Override
    public boolean isWarnEnabled() {
        return m_logLevel == LEVEL_WARN;

    }

    @Override
    public void error(String message) {
        log.error(message);
    }

    @Override
    public void error(String message, Throwable throwable) {
        log.error(message, throwable);
    }

    @Override
    public boolean isErrorEnabled() {
        return m_logLevel == LEVEL_ERROR;
    }

    @Override
    public void fatalError(String message) {
        log.trace(message);
    }

    @Override
    public void fatalError(String message, Throwable throwable) {
        log.trace(message, throwable);
    }

    @Override
    public boolean isFatalErrorEnabled() {
        return m_logLevel == LEVEL_FATAL;

    }

    @Override
    public Logger getChildLogger(String name) {
        return this;
    }
} 
```

# javascript - GeoExt2 - 弹出错误？

> ID：13987957
> 
> 赞同：1
> 
> 时间：2012-12-21T10:00:26.867
> 
> 标签：javascript, popup, openlayers

我现在使用 GeoExt2 (alpha) + Extjs 4.1 来实现地图应用程序。有时当我在地图上选择一个要素时，会显示两个弹出窗口。一个在屏幕底部有正确的信息，一个在正确的位置是空的。即使我关闭它也不行。我想知道这是否是一个错误？

```
myLayer.events.on({
 featureselected: function(e) {
 createPopup(e.feature);
 },
  featureunselected: function(){
  popup.destroy();
 }
});

function createPopup(feature) {

    popup = Ext.create('GeoExt.Popup', {
    id: 'popup',
        title: title,
        location: feature,
        });

         popup.on({
            close: function() {
                if(OpenLayers.Util.indexOf(myLayer.selectedFeatures,
                                           this.feature) > -1) {
                    selectControl.unselect(this.feature);
                }
            }
        });

    PopupTab = Ext.create('Ext.tab.Panel', {
    id: 'PopupTabs',
        activeTab:2,

    items: [
        { 
            title: 'Supervisor',
            itemId: 'tab1',
        },
        { 
            title: 'student',
            itemId: 'tab2',

            items: [
                { 
                xtype: 'label',
                id: 't',
                html: content,
                layout: 'fit',
                                cls:'tabStyle'
                }
            ]
        },

    ],
    listeners: {
        tabchange: function(panel, tab) {
            if (tab.popup !== undefined) { // show window after tab change
                tab.popup.show();
            }
        }
    }
});

        popup.add(PopupTabs);

        popup.show();

    } 
```

# c# - 在 C# 中强制转换受约束的泛型类

> ID：13987961
> 
> 赞同：7
> 
> 时间：2012-12-21T10:00:50.470
> 
> 标签：c#, generics, casting

很简单，为什么这段代码编译失败？

```
public interface IWorld { }
public class Foo<T> where T : IWorld { }
public void Hello<T>(T t) where T : IWorld
{
    Foo<IWorld> bar1 = new Foo<T>(); //fails implicit cast
    Foo<IWorld> bar2 = (Foo<IWorld>)new Foo<T>(); //fails explicit cast
} 
```

由于每个`T`工具`IWorld`，每个实例都`Foo<T>`应该匹配`Foo<IWorld>`。为什么不？有没有办法解决？我真的不想诉诸泛型来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:08:03.763

```
T : IWorld 
```

表示 T 已经实现了 IWorld，并不意味着它只实现了 IWorld 并且完全是 IWorld。它也可能已经实现了其他接口。

但是，C# 在其更高版本中支持这种转换。请参阅[http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)（泛型中的协变和逆变）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:10:11.977

您可以先转换为对象

```
Foo<IWorld> bar2 = (Foo<IWorld>)(object)new Foo<T>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:44:06.403

一个更简单的反对意见 - 想象一下，而不是`Foo`，例如`List`。

将您转换`List<T>`为 a`List<IWorld>`后，我现在可以将*其他* `IWorld`一些实现对象（例如 type `T2`）添加到一个限制为仅包含 type 对象的列表中`T`。那不应该是有效的。

所以回到你的`Foo`对象——如果它包含任何期望用 type 的对象调用的方法`T`，我现在可以用*任何*实现的对象调用它们`IWorld`——即使（想象一个额外的类型约束`Foo`）该对象不是合格的类型为`Foo`.

* * *

我在评论中的观点是：值类型。同样，如果我们从以下方面进行讨论，这可能会更容易`List<T>`-`List<T>`值类型包含没有装箱的值类型。如果您想要其中一个`List<IWorld>`相同的值，则必须先将每个值*装箱*，然后再将其添加到列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:13:10.367

以下有什么问题

```
 Foo<IWorld> bar1 = new Foo<IWorld>(); 
```

你想达到什么目的？

如果您需要传递`IWorld`实例，您可以安全地传递`T`，但您的代码中并非如此。

**编辑**（基于评论）

要投射到`Foo<Array of something>`您可以使用[Cast](http://www.google.co.in/url?sa=t&rct=j&q=enumerable.cast&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://msdn.microsoft.com/en-us/library/bb341406.aspx&ei=oELUUOSzHsjXrQePsYCQCg&usg=AFQjCNHdLSSfL8xHvhDg9zmcnYkQd5WpvQ&bvm=bv.1355534169,d.bmk)或[OfType](http://www.google.co.in/url?sa=t&rct=j&q=enumerable.oftype&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://msdn.microsoft.com/en-us/library/bb360913.aspx&ei=pULUULzxKsirrAfg2IDQCQ&usg=AFQjCNGD8--Eva8yMkiFrxITkg_Pes56oA&bvm=bv.1355534169,d.bmk)根据您的要求（是否要抛出或忽略不兼容的匹配）。

如果是 .NET 4，由于[CoVariance](http://msdn.microsoft.com/en-us/library/ee207183.aspx)功能，它应该会自动工作。

# search - 在查询时将类别 ID 映射到 Apache Solr 中的名称的正确方法

> ID：13987962
> 
> 赞同：1
> 
> 时间：2012-12-21T10:00:54.730
> 
> 标签：search, solr, mapping, categories, websolr

我正在尝试将我的类别 ID 映射到他们在 Solr 中的名称，以允许使用该类别名称进行文本搜索

我的计划是使用自定义 fieldType 规范，它使用 MappingCharFilterFactory 将我的 id 映射到它们的类别，使用 synonyms.txt 文件。映射之后，剩下的只是一个标准的分词器和小写过滤器

虽然这对于索引（即搜索工作）按预期工作，但我的结果仍然包含 id，而不是它们的名称。

有谁知道我做错了什么？或者是否有更好的方法来实现相同的结果？

感谢任何帮助

* * *

字段定义

```
<field name="q_category_id" type="string" indexed="true" stored="true" multiValued="true" />
<field name="q_category_name" type="text_category" indexed="true" stored="true" multiValued="true" />
<copyField source="q_category_id" dest="q_category_name" /> 
```

字段类型定义

```
<fieldType name="text_category" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter class="solr.MappingCharFilterFactory" mapping="synonyms.txt"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <charFilter class="solr.MappingCharFilterFactory" mapping="synonyms.txt"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

同义词.txt

```
...
"14" => "Music"
"16" => "Science"
"17" => "Sports & Games"
"18" => "Technology & Manufacturing"
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:03:44.250

Solr 不会更改随响应返回的实际存储值。它只会更新索引值。
这就是为什么您的搜索将对索引值起作用的原因。但是，Solr 返回的响应将始终具有存储的值。
您需要在客户端处理更改，以便 Solr 将其与响应一起返回。

# javascript - 拖放时的 TinyMCE 内容处理

> ID：13987965
> 
> 赞同：1
> 
> 时间：2012-12-21T10:01:05.773
> 
> 标签：javascript, jquery, tinymce

如果您使用鼠标选择随机网页上的许多元素，那么您想将这些内容插入到 tinymce 编辑器中（通过按住鼠标并将内容拖动到编辑器中），您如何捕获事件“drop”和在插入编辑器之前处理放置内容？

# java - 使用 Jackson 序列化为 JSON 时如何包含字符串、整数类型信息

> ID：13987968
> 
> 赞同：2
> 
> 时间：2012-12-21T10:01:14.360
> 
> 标签：java, json, jackson

我在我的对象映射器上启用了 defaultTyping，如下所示：

```
ObjectMapper mapper = new ObjectMapper();
mapper.enableDefaultTyping();
mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); 
```

序列化后，我的 JSON 字符串不包含类型的类型信息`java.lang.*`（例如`java.lang.String`）。我猜这是设计使然。

我遇到的问题是，在反序列化期间，有两种方法匹配：一种接受 Enum，另一种接受 String。当然，杰克逊无法决定使用哪种方法。我希望如果类型信息包含在序列化步骤中，这应该不是问题。

我已经走上了`@JsonIgnore`和 Mixins 的道路，不幸的是这是不可行的。

知道如何让杰克逊成功反序列化吗？

# python - 配置 Apache Tomcat 6.0 以在 linux 系统上的 cgi-bin 中运行 python 脚本？

> ID：13987972
> 
> 赞同：0
> 
> 时间：2012-12-21T10:01:24.410
> 
> 标签：python, tomcat, cgi

我有一个带有 Ubuntu10.04 操作系统的系统。
我的 Apache tomcat(6.0.29) 安装在 /usr/local/tomcat/
我有一个 python 脚本 hello.py
我想在 cgi-bin 中运行这个 python 脚本。
Python 位于 /usr/bin/python
我正在运行的应用程序是 eegis，它运行良好。
`http://localhost:8080/eegis/index.html`

我已经在网上搜索了很多它说您必须使用以下配置配置 web.xml。

```
<servlet> 
<servlet-name>cgi</servlet-name> 
<servlet-class>org.apache.catalina.servlets.CGIServlet</servlet-class> 
<init-param> 
<param-name>debug</param-name> 
<param-value>0</param-value> 
</init-param> 
<init-param> 
<param-name>cgiPathPrefix</param-name> 
<param-value>WEB-INF/cgi</param-value> 
</init-param> 
<init-param> 
<param-name>executable</param-name> 
<param-value>/usr/bin/python</param-value> 
</init-param> 
<init-param> 
<param-name>passShellEnvironment</param-name> 
<param-value>true</param-value> 
</init-param>
<load-on-startup>5</load-on-startup> 
</servlet> 
```

我也取消了评论

```
<servlet-mapping> 
<servlet-name>cgi</servlet-name> 
<url-pattern>/cgi-bin/*</url-pattern> 
</servlet-mapping> 
```

我已经这样做了，但我仍然无法运行 python 脚本。
在尝试的同时`http://localhost:8080/eegis/cgi-bin/hello.py`

我收到此错误

**HTTP 状态 404 - /eegis/cgi-bin/
类型状态报告
消息 /eegis/cgi-bin/
描述 请求的资源 (/eegis/cgi-bin/) 不可用。
Apache Tomcat/6.0.29** 

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-20T19:49:26.787

> 现在问题已经解决了。我还是会分享我的经验。第一个问题是我的 python 脚本我忘了插入 "\n\n" (print "Content-type: text/html\n\n") [mid it \n\n 紧随其后的标题没有任何空格（打印"Content-type: text/html \n\n") 这将不起作用]在内容描述标题的末尾。其次，我将文件保存为 .py 但它应该是 .cgi 其他一切都很好。我的脚本现在正在执行。谢谢

# java - 如何在android中的图像视图上添加图钉标记

> ID：13987975
> 
> 赞同：9
> 
> 时间：2012-12-21T10:01:42.217
> 
> 标签：java, android, android-imageview, android-view, viewgroup

我正在做一个项目，我需要在图像视图上添加图钉，如下图所示。我们怎么能这样做。

![示例图像](../Images/697307c778550d58d3ae84db434c3ee5.png)

我使用成功创建了一个可缩放的图像视图

**TouchImageview.java**

```
 class TouchImageView extends ImageView {

Matrix matrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;

float redundantXSpace, redundantYSpace;

float width, height;
static final int CLICK = 3;
float saveScale = 1f;
float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

ScaleGestureDetector mScaleDetector;

Context context;

@Override
protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);       

}

public TouchImageView(Context context) {
    super(context);
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    matrix.setTranslate(1f, 1f);
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);

    setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mScaleDetector.onTouchEvent(event);

            Log.e("Deepak", "X" + event.getRawX());

            Log.e("Deepak", "Y" + event.getRawY());

            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            PointF curr = new PointF(event.getX(), event.getY());

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(event.getX(), event.getY());
                    start.set(last);
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        float deltaX = curr.x - last.x;
                        float deltaY = curr.y - last.y;
                        float scaleWidth = Math.round(origWidth * saveScale);
                        float scaleHeight = Math.round(origHeight * saveScale);
                        if (scaleWidth < width) {
                            deltaX = 0;
                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom); 
                        } else if (scaleHeight < height) {
                            deltaY = 0;
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);
                        } else {
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);

                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom);
                        }
                        matrix.postTranslate(deltaX, deltaY);
                        last.set(curr.x, curr.y);
                    }
                    break;

                case MotionEvent.ACTION_UP:
                    mode = NONE;
                    int xDiff = (int) Math.abs(curr.x - start.x);
                    int yDiff = (int) Math.abs(curr.y - start.y);
                    if (xDiff < CLICK && yDiff < CLICK)
                        performClick();
                    break;

                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
            }
            setImageMatrix(matrix);
            invalidate();
            return true; // indicate event was handled
        }

    });
}

@Override
public void setImageBitmap(Bitmap bm) { 
    super.setImageBitmap(bm);
    bmWidth = bm.getWidth();
    bmHeight = bm.getHeight();
}

public void setMaxZoom(float x)
{

    maxScale = x;
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScaleBegin(ScaleGestureDetector detector) {
        mode = ZOOM;
        return true;
    }

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float mScaleFactor = (float)Math.min(Math.max(.95f, detector.getScaleFactor()), 1.05);
        float origScale = saveScale;
        saveScale *= mScaleFactor;
        if (saveScale > maxScale) {
            saveScale = maxScale;
            mScaleFactor = maxScale / origScale;
        } else if (saveScale < minScale) {
            saveScale = minScale;
            mScaleFactor = minScale / origScale;
        }
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        if (origWidth * saveScale <= width || origHeight * saveScale <= height) {
            matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
            if (mScaleFactor < 1) {
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (Math.round(origWidth * saveScale) < width) {
                        if (y < -bottom)
                            matrix.postTranslate(0, -(y + bottom));
                        else if (y > 0)
                            matrix.postTranslate(0, -y);
                    } else {
                        if (x < -right) 
                            matrix.postTranslate(-(x + right), 0);
                        else if (x > 0) 
                            matrix.postTranslate(-x, 0);
                    }
                }
            }
        } else {
            matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            if (mScaleFactor < 1) {
                if (x < -right) 
                    matrix.postTranslate(-(x + right), 0);
                else if (x > 0) 
                    matrix.postTranslate(-x, 0);
                if (y < -bottom)
                    matrix.postTranslate(0, -(y + bottom));
                else if (y > 0)
                    matrix.postTranslate(0, -y);
            }
        }
        return true;

    }
}

@Override
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
{
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    width = MeasureSpec.getSize(widthMeasureSpec);
    height = MeasureSpec.getSize(heightMeasureSpec);
    //Fit to screen.
    float scale;
    float scaleX =  (float)width / (float)bmWidth;
    float scaleY = (float)height / (float)bmHeight;
    scale = Math.min(scaleX, scaleY);
    matrix.setScale(scale, scale);
    setImageMatrix(matrix);
    saveScale = 1f;

    // Center the image
    redundantYSpace = (float)height - (scale * (float)bmHeight) ;
    redundantXSpace = (float)width - (scale * (float)bmWidth);
    redundantYSpace /= (float)2;
    redundantXSpace /= (float)2;

    matrix.postTranslate(redundantXSpace, redundantYSpace);

    origWidth = width - 2 * redundantXSpace;
    origHeight = height - 2 * redundantYSpace;
    right = width * saveScale - width - (2 * redundantXSpace * saveScale);
    bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
    setImageMatrix(matrix);
}

} 
```

现在我需要在上面添加标记。任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:01:11.600

我在这里找到了答案[https://github.com/catchthecows/AndroidImageMap](https://github.com/catchthecows/AndroidImageMap)

在 Android 视图中实现类似 HTML 地图的元素：

*   支持图像作为可绘制或布局中的位图
*   允许在 xml 中列出区域标签
*   允许对资源 xml 使用剪切和粘贴 HTML 区域标签（即，能够获取 HTML 地图 - 和图像并在最少编辑的情况下使用它）
*   如果图像大于设备屏幕，则支持平移
*   支持捏缩放
*   支持点击区域时的回调。
*   支持将注释显示为气泡文本并在点击气泡时提供回调

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T12:07:08.373

我使用过 AndroidImageMap 但我不喜欢它缩放图像的方式，而且您没有将自定义视图添加为可点击区域的功能。

查看此示例项目[https://github.com/jzafrilla/AndroidImageHostpot](https://github.com/jzafrilla/AndroidImageHostpot)我使用[https://github.com/chrisbanes/PhotoView/](https://github.com/chrisbanes/PhotoView/)来获得缩放和平移功能。

希望这会有所帮助......（对我来说，绝对是的）

# c# - 两个当任何一个对象错误

> ID：13987976
> 
> 赞同：0
> 
> 时间：2012-12-21T10:01:44.840
> 
> 标签：c#, wpf, reactiveui

我使用reactiveUI来查看DP的属性代码是

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        RxApp.DeferredScheduler = DispatcherScheduler.Current;
        InitializeComponent();
        this.WhenAny(i => i.Width, i => i.Value).Subscribe(_ => SomeMethod("Width"));
        this.WhenAny(i => i.Height, i => i.Value).Subscribe(_ => SomeMethod("Height"));
    }

    void SomeMethod(string hello)
    {
        MessageBox.Show(hello);
    }

} 
```

当我按高度调整窗口大小时，没有消息框但是当我按宽度调整窗口大小时，有两个消息框当我评论其中任何一个时，它工作得很好，但有两个时任何工作不正常

我知道我可以通过一个 whenany 观察两个属性，但我需要通过两个 WhenAny 观察两个不同类型的依赖属性

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:40:54.297

嗯。您可以在[http://github.com/reactiveui/reactiveui/issues](http://github.com/reactiveui/reactiveui/issues)提交此错误吗？同时，您可能必须使用垫片，例如：

```
var changedObservable = new Subject<Unit>();
this.SizeChanged += (o,e) => changedObservable.OnNext(Unit.Default); 
```

# javascript - 如何在 css/js 属性选择器 [attr=value] 中正确转义属性值？

> ID：13987979
> 
> 赞同：16
> 
> 时间：2012-12-21T10:01:56.290
> 
> 标签：javascript, css, css-selectors, selectors-api

我应该如何转义 css/js 属性选择器中的属性`[attr=value]`？

具体来说，这是正确的吗？

```
document.querySelector('input[name="test[33]"]') 
```

我正在寻找执行此操作的“标准方式”（如果有），因为我不希望 Sizzle 使用执行繁重的后备功能

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T10:04:58.547

是的，这是一种正确的方法。[Selectors Level 3 规范](http://www.w3.org/TR/selectors/#attribute-selectors)规定如下：

> 属性值必须是 CSS 标识符或字符串。

您问题中的示例使用字符串作为属性值。“标识符”定义如下：

> 在 CSS 中，标识符...只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 (_)；它们不能以数字、两个连字符或一个连字符后跟一个数字开头。标识符还可以包含转义字符和任何 ISO 10646 字符作为数字代码...

因此，在此之后，转义特殊字符并省略引号也是合法的：

```
document.querySelector('input[name=test\\[33\\]]') 
```

# mysql - 关于 django 中的数据库查询的问题

> ID：13987981
> 
> 赞同：0
> 
> 时间：2012-12-21T10:02:08.040
> 
> 标签：mysql, django, models

我想从数据库中获取当前用户的最后插入 id。我知道我可以从此查询中获取表中最后插入的行 **last_inserted_id = User.objects.order_by('-id')[0]**

但是，如果有多个用户同时登录到站点，那么我如何才能获得当前用户最后插入的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:16:53.323

要获取当前用户的最后插入数据，您应该在每个模型中存储对用户的引用：

```
class Album(models.Model):
    artist = models.ForeignKey(Musician)
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField()
    inserted_by = models.ForeignKey(User, ...)   #here 
```

然后，您应该记住在创建新模型时填充此属性。

要检索此用户最后插入的数据：

```
Album.objects.filter( inserted_by = request.user ).order_by('-id')[0] 
```

也许您可以通过某种方式使审计自动化。有关想法，请参阅[完整的模型历史片段](http://djangosnippets.org/snippets/1234/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:22:40.517

我不确定我是否完全理解*“当前用户的最后插入 id”的*意思。但这里有一个例子：

```
user = User.objects.get(pk=1)

user.save()

print user.id # prints 10 if userid is 10 
```

# iphone - IOS UIScrollView：无法滚动直到内容结束

> ID：13987987
> 
> 赞同：2
> 
> 时间：2012-12-21T10:02:52.703
> 
> 标签：iphone, objective-c, ios, uiscrollview

我正在尝试在带有 UIScrollView 类的窗口中生成一个滚动控制器，该类将包含许多垂直放置的 UIButton。我将滚动视图的大小设置为等于当前视图控制器的根视图，以便滚动视图覆盖整个可见窗口。然后我生成要添加到滚动视图的 UIButton：我将每个 UIButton 添加到前一个 UIButton 的下方，并将当前 UIButton 的高度添加到名为“totalContentHeight”的变量中。最后，我将滚动视图的 contentSize 的高度设置为这个值，在下面的代码行中：

```
self.scrollViewForNewsButtons.contentSize = CGSizeMake(self.view.frame.size.width, totalContentHeight); 
```

将所有按钮添加到滚动视图后，totalContentHeight 等于 numOfButtons*eachButtonsHeight。

问题是，在模拟器中，当我运行应用程序并滚动到最后一个按钮的末尾并释放鼠标时，最后两个按钮会弹回，使它们位于可见窗口之外。很难用文字来表达，所以这里是图片：

1）这是我滚动到内容末尾并将内容保持在可以推送的最后可能位置时得到的结果：

[![滚动图片](../Images/6110c729bde6c7052ae0120e2697553d.png)](https://i.stack.imgur.com/TYDsC.png)

2）这是我释放鼠标并且滚动视图弹回其最终位置后得到的：

[![不滚动图片](../Images/7fe7b5d0eef70834f8ee065e5eb0291e.png)](https://i.stack.imgur.com/KmDDn.png)

如您所见，最后两个按钮绘制在可见区域之外。这就像滚动视图的区域覆盖了整个窗口加上 iPhone 的按钮区域。我找不到对此的合理解释。我是否设置了错误的区域大小或者我错过了其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:15:00.923

只需使用您的总按钮及其高度计算来设置内容大小......例如......

```
float yheight = totalButton * yourButtonHeight;
[yourScrollView setContentSize:CGSizeMake(320, yheight + 44)]; 
```

试试这个代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:11:51.717

如果您将滚动视图框架大小设置为

```
self.view.bounds 
```

# android - Android spinner item id 相关问题

> ID：13987989
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:02:59.973
> 
> 标签：android, arraylist, spinner, android-arrayadapter

我有一个`ArrayList`自定义对象。这个自定义对象包含 zoneCode(Integer) 和 zoneName(String)，我想在 Spinner 中设置这些数据，以便 zoneName 出现在列表中`onItemSelected`，我可以获得相应选择的 zoneCode。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:02:19.880

覆盖`toString`自定义对象类中的方法并使其返回 zoneName

```
class CustomObject{

public String zoneName;
public int zoneCode;

public String toString(){
return zoneName;
} 
```

}

设置微调器

```
CustomObject[] objects = new CustomObject[10];

//initialize each object

ArrayAdapter<CustomObject> adapter = new ArrayAdapter<CustomObject>(this,android.R.layout.simple_spinner_item, objects);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:09:51.643

尝试 zoneCod.get(position)

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int   
    position, long id) {
            zoneCod.get(position);
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:14:26.593

由于 zoneName 和 zoneCode 的数据都在数组列表中，并且您知道如何获取所选项目的位置。如果是，那么您可以获得如下区域代码：

```
zoneCode[position]; 
```

# c# - WinForm TextBox 中字体缩放的性能

> ID：13987991
> 
> 赞同：1
> 
> 时间：2012-12-21T10:03:01.580
> 
> 标签：c#, winforms, performance, font-size

我的 winform`Form`有一个`TextBox`控件，我已经实现了 Ctrl + MouseWheel 缩放，它就像一个魅力。

但是，我注意到，从某个字体大小开始，字体缩放会占用越来越多的时间来完成/渲染。

谁能告诉我为什么会发生这种情况以及是否有任何方法可以避免这种情况（除了限制最大缩放系数）？

我怀疑它是否相关，但如果我造成这种情况，我会包含我的代码。

```
void xmlForm_MouseWheel(object sender, MouseEventArgs e)
{
    if (Control.ModifierKeys == Keys.Control)
    {
        if (((Form)sender).Controls[0].Font.Size + (e.Delta / 120) > 1 && ((Form)sender).Controls[0].Font.Size + (e.Delta / 120) < Single.MaxValue)
        {
            Font newFont = new Font(((Form)sender).Controls[0].Font.FontFamily, ((Form)sender).Controls[0].Font.Size + (e.Delta / 120));
            ((Form)sender).Controls[0].Font = newFont;
        }
    }
} 
```

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:02:17.490

将猜测变成答案：您已将 WordWrap 属性设置为 True。自动换行通常是一项非常昂贵的操作，控件需要开始测量字符串以查看需要换行的文本行。当 WordWrap 为假时，它不必做的事情。

字体越大，窗口中的文本越少，因此需要进行的测量越多。这会减慢它的速度，当控件中有很多文本时，它会变得很明显。弄清楚从哪里开始绘画以及如何初始化垂直滚动条等简单的事情变得复杂。在记事本中也非常明显，使用 Format + Word Wrap。启用该功能后，当您加载一个大的 .txt 文件时，该程序会停止运行一段时间。

# iphone - cllocationmanger 类位置更新

> ID：13987993
> 
> 赞同：0
> 
> 时间：2012-12-21T10:03:24.120
> 
> 标签：iphone

我正在做一个应用程序。我正在使用`CLLOcationmanager`下面的类似内容。

```
[self performSelectorOnMainThread:@selector(findlocation:) withObject:nil waitUntilDone:NO];

-(void)findlocation:(id)sender
{
//NSAutoreleasePool *pool=[[NSAutoreleasePool alloc]init];
locationManager=[[CLLocationManager alloc]init];
locationManager.delegate=self;
locationManager.distanceFilter=0.3f;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
[locationManager startUpdatingLocation];

}

   - (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
    NSLog@"%@",newlocation.timestamp];
} 
```

我想每 0.3 米更新一次位置。但是这个委托方法不会针对那个距离触发。在`[self performSelectorOnMainThread:@selector(findlocation:) withObject:nil waitUntilDone:NO];`我剩下的过程开始工作之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:50:42.850

我想这可能会对你有所帮助。您需要使用经度和纬度调整距离

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation {
    MKCoordinateRegion region = { { 0.0f, 0.0f }, { 0.0f, 0.0f } };
    region.center = newLocation.coordinate;
    region.span.longitudeDelta = 0.15f; 
    region.span.latitudeDelta = 0.15f;
    [self.mapView setRegion:region animated:YES];
} 
```

以上代码使用 0.15 度（0.15*111 公里）。

或者尝试使用你的 distanceFilter"。使用 distanceFilter 可以过滤掉那种无关的运动。

# c# - TryParseExact - 在文本行中间查找日期

> ID：13987997
> 
> 赞同：-1
> 
> 时间：2012-12-21T10:03:46.367
> 
> 标签：c#, date, tryparse

大家早上好，世界末日快乐，我有一个与日期无关的问题，与世界末日无关

我正在尝试在文本文档中查找日期。带有日期的行前面和后面都有文本，但是当我使用**TryParseExact**时，我似乎只能在文本行的开头找到日期。

我将如何更改以下代码以搜索文本行中大约 20 个字符的日期？

```
DateTime d = DateTime.Now;
            var format1 = "dd/MM/yyyy";
            var fileDates1 = System.IO.File.ReadAllLines(z)
                            .Where(l => l.Length >= format1.Length
                                        && DateTime.TryParseExact(l.Substring(0, format1.Length) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:12:06.380

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)在文本中查找您的日期；

```
String text = File.ReadAllLines(z);
String pattern = @"\d{2}/\d{2}/\d{4}";
String dateString = Regex.Match(text, pattern).Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:20:19.687

您的代码确实只在行首进行检查。

您可以结合正则表达式来查找*看起来*像日期的内容，然后正确解析以检查“日期”是否有效：

```
DateTime d;
var format1 = "dd/MM/yyyy";
Regex r = new Regex("[0-3][0-9]/[0-1][0-9]/[0-9]{4}");
var linesWithDates = System.IO.File.ReadAllLines(z)
    .Where(l => r.Matches(l).Cast<Match>()
         .Any(DateTime.TryParseExact(m.Value, format1, ...))); 
```

# ember.js - 无法从 Ember 的容器视图中的视图控制器获取值

> ID：13987999
> 
> 赞同：1
> 
> 时间：2012-12-21T10:03:48.110
> 
> 标签：ember.js

您好 Ember 绝地大师，

我正在学习 Ember 的框架，并在将其与车把助手一起使用时感到有些困惑。

首先，我在我的 js 和 html 中创建了一些视图模板，并使用 containerView 对这些模板进行分组。

但是我遇到了一个问题，我无法显示我在这些模板视图的控制器中描述的值。

我的 HTML 部分是这样的：

```
 <script type="text/x-handlebars" data-template-name="main">
        <p>this is main template</p>
        {{outlet nav}}
    </script>
    <script type="text/x-handlebars" data-template-name="nav">
    </script>
    <script type="text/x-handlebars" data-template-name="child">
        <p>this is the child in nav, value is {{value}}</p>
    </script> 
```

这是我在 jsfiddle 上的示例代码（包括 JS 部分）：http: [//jsfiddle.net/9K7D4/](http://jsfiddle.net/9K7D4/)

我的问题是：

1.  虽然子视图是从容器视图呈现的，但我无法获得在子视图的控制器中定义的值。我一定错过了文档中的某些内容..只是想不通..

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:22:41.763

在您的示例中，虽然子控制器在应用程序初始化期间实例化，但它没有作为子视图的控制器连接（我认为框架中缺少一些东西）。

无论如何，如果你想在子视图中引用它，你必须通过路由器查找`valueBinding: 'App.router.cController.content.value'`。注意我使用的是小写字母，按照惯例，ember 将创建一个 XxxController 的实例为`xxxController`.

然后在模板中，当您想使用视图本身的属性时，您必须使用`view`关键字才能做到这一点。

见[http://jsfiddle.net/9K7D4/14/](http://jsfiddle.net/9K7D4/14/)