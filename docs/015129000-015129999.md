# StackOverflow 问答 15129000-15129999

# android - Android-谷歌地图v2画圈

> ID：15129012
> 
> 赞同：7
> 
> 时间：2013-02-28T06:34:50.143
> 
> 标签：android, google-maps

谷歌于 2 月 26 日`Circle`作为覆盖类型发布：

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle)

但是如何更新到 Google Map V2 的新版本？什么时候可以在 Android SDK Manager 中使用？我在“Google Play Services”（Rev. 5）中有以前的 Google Map V2 库，它不包括`Circle`类

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-28T07:12:37.587

要**更新**Google MAP V2：

打开 Android SDK Manager -> 转到 Extras -> 检查**Google Play Service**的更新。如果它没有显示*可用的更新*，请转到*Packages->Reload*。将 google play 服务更新到**Revision 5**。

之后从 Eclipse Workspace 中删除旧的 Google Play Service Library 项目。再次导入。在您当前的项目中添加这个库项目。现在您将在*com.google.android.gms.maps.model*包下获得**Circle**类。您可以使用它在地图中添加圆圈。

 ***添加圈子**：

```
mMap.addCircle(new CircleOptions()
        .center(new LatLng(location.getLatitude(), location.getLongitude()))
        .radius(100)
        .strokeColor(Color.RED)
        .fillColor(Color.BLUE)); 
```

供您参考，这是[2013 年 2 月更改的发行说明](https://developers.google.com/maps/documentation/android/releases#february_2013)。

**编辑：**这是[2016 年 6 月的发行说明。](https://developers.google.com/maps/documentation/android-api/releases#june_27_2016)您现在可以使圆圈可点击，如果您想对圆圈进行一些操作，这可能会有所帮助。*

# iphone - 使用 UIWebView 显示 html 文件

> ID：15129013
> 
> 赞同：1
> 
> 时间：2013-02-28T06:34:53.190
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiwebview

我创建了`UIWebView`一个 HTML 文件并使用它来显示一些内容。但是当我运行它而不是显示内容时，只有整个 HTML 文件编码出现在 WebView 中。请帮助并告诉我出了什么问题。

```
UIWebView *ingradients= [[UIWebView alloc]init];
    [ingradients setFrame:CGRectMake(10, 170, 300, 300)];
    [ingradients loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"htmlfile" ofType:@"html"]isDirectory:NO]]];
    ingradients.delegate=self;
    [self.view addSubview:ingradients]; 
```

我的**htmlfile.html**包含

```
<html>
<body>
<p><strong>Ingredients</strong></p>
</body>
</html> 
```

而不是以粗体显示“成分”，而是显示**htmlfile.html的整个编码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:52:44.213

这很奇怪，我有类似的代码，html 被呈现为富文本而不是纯文本（就像你一样），我唯一的区别是使用`fileURLWithPath:`但不是`fileURLWithPath:isDirectory:`. 这是我的代码：

```
NSString *localFilePath = [[NSBundle mainBundle] pathForResource:@"about" ofType:@"html"];
NSURLRequest *localRequest = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:localFilePath]];
[_aboutWebView loadRequest:localRequest]; 
```

也许您对文件编码有一些问题，但据我猜测，情况并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:45:55.863

在您的代码中，您始终包含 HTML 代码，因为您的请求始终返回`htmlfile`带有扩展的文件`.html`

如果您想从内容中获取特定价值，**您**`HTML`需要使用. 这也是 用于解析内容[的示例文档。](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios) **`HTML`[`Hpple`](https://github.com/topfunky/hpple)`HTML`**

 ****在您的情况下，您使用：（***通过使用`Hpple`*****)****

 **```
TFHpple *dataParser = [TFHpple hppleWithHTMLData:placesData];

    // name of place
NSString *XpathQueryString = @"//p/strong";
NSArray *listOfdata= [dataParser searchWithXPathQuery: XpathQueryString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:03:11.433

试试这个代码：

```
- (NSString *) rootPath{
    return [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES) lastObject];
}

- (NSString *) pathFoResourse : (NSString *) resourseName ofType: (NSString *)type{
    NSString *path = [[MMSupport rootPath] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", resourseName, type]];
    if (![[NSFileManager defaultManager] fileExistsAtPath:path]) {
        path = [[NSBundle mainBundle] pathForResource:resourseName ofType:type];
    }
    NSLog(@"**path:%@**", path);
    return path;
}

- (void) loadDataToWebView : (CGRect) frame{
    NSString *htmlString =  [NSstring stringWithContentsOfFile:[MMSupport pathFoResourse:@"filename" ofType:@"html"] encoding:NSUTF8StringEncoding) error:nil];
    UIWebView *webView = [[UIWebView alloc] initWithFrame:frame];
    [webView loadHTMLString:htmlString baseURL:nil];
} 
```****

# java - Java：在其他类中使用迭代器

> ID：15129015
> 
> 赞同：1
> 
> 时间：2013-02-28T06:35:00.807
> 
> 标签：java

我在尝试将公共迭代器放入类中以读取类中的 Map 并在其他类中实现此迭代器时遇到问题。或者换句话说，

我有 A 类。A 类包含一个私有 HashMap，我想通过一个迭代此映射的公共迭代器来访问它。

我也有 B 类。我试图在 B 类中运行这个迭代器来读取 A 类的内容。

这可能看起来有点迂回（或者更确切地说，很多迂回），但我的任务指定类 A 中的数据系统对其他类隐藏，并建议使用公共迭代器来访问数据。有一个示例说明 B 类中的方法可能是什么样子，我已尽我所能遵循。

但是，无法让它工作。

这是我拥有的代码的模型。我尝试编译它，它与我的真实代码完全一样。

```
// this is class A

public class Giant {

private Map<Item, Integer> myMap = new HashMap<Item, Integer>();

// add a bunch of items to the map, check if they worked fine

public Iterator<Map.Entry<Item, Integer>> giantIterator = myMap.entrySet().iterator();

}

// and this is in class B

public void receive(Giant mouse){
    System.out.println("I've started!");
        Iterator<Map.Entry<Item, Integer>> foo = mouse.giantIterator;

        while (foo.hasNext()) {
            Map.Entry<Item, Integer> entry = foo.next();
            System.out.println("I'm working!");
        }
} 
```

我还有一个测试类，它创建任一类的对象，然后运行该`receive`方法。

我收到消息“我已经开始了！” 但不是“我在工作！”

同时，如果我在任一类中都有两个迭代器 print a `toString`，则 toStrings 是相同的。

我也不能简单地将我应该在 B 类中执行的操作移动到 A 类，因为迭代器有几种不同的方法，并且在每种方法中用于稍有不同的事情。

我有点难过。我在语法中遗漏了什么吗？我进口的东西有错吗？我是否完全搞砸了这应该如何工作？这完全不可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:45:34.723

尝试通过这样的函数公开迭代器：

```
public class Giant {
    private Map<Item, Integer> myMap = new HashMap<Item, Integer>();
    public Iterator<Map.Entry<Item, Integer>> getGiantIterator() {
         return myMap.entrySet().iterator();
    }
} 
```

在 B 类更改中：

```
 Iterator<Map.Entry<Item, Integer>> foo = mouse.giantIterator; 
```

至

```
Iterator<Map.Entry<Item, Integer>> foo = mouse.getGiantIterator(); 
```

这样迭代器在需要之前不会被创建。

按照您的编码方式，迭代器是在地图仍然为空时创建的。我怀疑这可能是您问题的根源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:47:21.027

您的迭代器是在构造 A 时构造的，当时 Map 为空。

创建一个返回最新版本的方法 getIterator()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:49:30.400

如果您有一个迭代器，并且希望各种类访问它，则将该变量设置为“静态”。

# javascript - gridview 中的 Gridview 使用 jquery 具有固定的标题和寻呼机

> ID：15129018
> 
> 赞同：0
> 
> 时间：2013-02-28T06:35:12.703
> 
> 标签：javascript, jquery, asp.net, gridview, cross-browser

我已经构建了一个 GridView，其中每一行都有一个 GridView。因此，对于最上面的 GridView，我想修复标题和寻呼机，以便只能使用 jquery 滚动其内容。我尝试过 Google 的各种脚本。有些工作，有些不工作。那些工作的有浏览器不兼容。所以我需要跨浏览器解决方案。请给我一个工作示例。

```
<asp:GridView ID="gvMasterGrid" runat="server" AllowSorting="True" AutoGenerateColumns="False"
            DataSourceID="odsMasterGrid" OnRowDataBound="gvMasterGrid_RowDataBound" PageSize="3"
            AllowPaging="True" OnPageIndexChanging="gvMasterGrid_PageIndexChanging" OnPreRender="gvMasterGrid_PreRender">
  <Columns>
    <asp:TemplateField>
      <ItemTemplate>
        <img alt="" id="plus" style="cursor: pointer" src="Images/plus.jpg" width="20px"
            height="20px" />
        <asp:Panel ID="pnlChildGrid" runat="server" Style="display: none">
          <asp:GridView ID="gvChildGrid" runat="server" AutoGenerateColumns="true" CssClass="subgridview">
          </asp:GridView>
        </asp:Panel>
      </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" SortExpression="CustomerID" />
  </Columns>
  <PagerStyle HorizontalAlign="Center" />
</asp:GridView> 
```

我希望 gvMasterGrid 有固定的页眉和页脚。gvMasterGrid 的行应该是可滚动的。

# java - 减小 ITextPDF 中的图像大小（字节）

> ID：15129025
> 
> 赞同：3
> 
> 时间：2013-02-28T06:35:25.003
> 
> 标签：java, itext

我正在使用 itext PDF 库在 Java 中构建一个非常图像密集的 PDF 文档。每页都有十几张图片。原始源图像的分辨率非常高，我正在使用`scaleToFit`将图像渲染为我需要的大小。

我遇到的问题是 PDF 文档仍然很大。我的理解是包含整个原始高分辨率图像，并且我使用的缩放仅影响实际渲染，而不影响文件中包含的图像的大小。

我已经通过移除缩放来验证这一点——页面是用彼此重叠的高分辨率图像和页面边缘呈现的，并且 PDF 的大小与缩放到位时的大小相同。

那么，问题来了——如何通过缩小每个图像来减小 PDF 文件的大小？如果我失去一点图像质量，那没关系。手动重新缩放源图像将很困难。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T07:55:17.133

所以我找到了一种方法。我现在将图像加载到 a`BufferedImage`中，然后使用此处找到的提示对其进行缩放：[如何缩放 BufferedImage](https://stackoverflow.com/questions/11367324/how-do-i-scale-a-bufferedimage?lq=1)。

这给了我一个`BufferedImage`- 然后我将其转换为 iText 图像使用

```
 Image returnedImage = Image.getInstance ( pcb, bufferedImage, quality ); 
```

`quality`目前在哪里0.6。这对我正在做的工作来说是可以接受的。

# sql-server-2008-r2 - mdx 脚本中的 Uniquename 函数

> ID：15129027
> 
> 赞同：1
> 
> 时间：2013-02-28T06:35:35.433
> 
> 标签：sql-server-2008-r2, reporting-services, mdx

我真的需要你的帮助。

对于 SSRS 报告，我有这个 mdx 脚本：

```
select 
 {[Geographie].[Commune].[AHUY], [Geographie].[Commune].[BRETENIERE]} on columns
,{[Activite].[Branche].&[B], [Activite].[Branche].&[C]} on rows
from [ACSEL2]
where ([Measures].[CATTC], [Perimetre].[Perimetre].&[2], [Temps].[Annee].&[2006]) 
```

拜托，我需要为我在列中拥有的成员提供唯一名称

```
({[Geographie].[Commune].[AHUY], [Geographie].[Commune].[BRETENIERE]}) 
```

请你能帮我写这个 mdx 脚本吗？

梨豆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:24:15.970

使用语句声明一个成员`With`，如下所示：

```
WITH MEMBER [Measures].[UniqueName] as [Geographie].[Commune].CurrentMember.UniqueName
Select
--Your select here 
```

[有关CurrentMember](http://msdn.microsoft.com/library/ms144948.aspx)的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:41:21.427

```
 WITH 
-- Geography metadata
MEMBER [Measures].[Geographie]
AS StrToValue ( @SelectionGeographie + ".Hierarchy.Currentmember.Uniquename" )
MEMBER [Measures].[Geographie_Label]
AS StrToValue( @SelectionGeographie + ".Hierarchy.CurrentMember.Member_Caption" )

SELECT NON EMPTY {
[Measures].[Geographie],
[Measures].[Geographie_Label],
[Measures].[11 VA]

} ON COLUMNS, 

( STRTOSET ( "{" + @SelectionGeographie + "}") ,

    STRTOSET   ("{" + @SelectionActivite + "}" ))

ON ROWS

 FROM [MyCube]

WHERE STRTOTUPLE ( "(" +@Annee + "," + @Perimetre + ")" ) 
```

# c++ - 错误 C2955 和错误 C2244 使用 C++ 模板

> ID：15129038
> 
> 赞同：0
> 
> 时间：2013-02-28T06:36:42.533
> 
> 标签：c++, templates

我开始学习 C++ 模板。现在，我正在尝试编译 C++ 模板的简单示例。

```
#include <iostream.h>
template <class T> class pair1 {
     T value1, value2;
public:
    pair1 (T first, T second) {
        value1=first;
        value2=second;
    }
    T getmax ();
};

template <class T> 
T pair1::getmax (){
     T retval;
    retval = value1>value2? value1 : value2;
    return retval;
}
int main(){
     pair1<int> myobject (100, 75);
    cout << myobject.getmax()<<endl;
system("pause");
return 0;
} 
```

我发生了以下2个错误：

*   (1) 错误 C2955: 'pair1': 使用模板需要模板参数列表
*   (2) error C2244:'pair1::getmax':unable to match function definition to an existing declaration

我正在使用 Visual Studio 2010。

当使用如下内联函数时，它工作得很好：

```
#include <iostream.h>
template <class T> class pair1 {
     T value1, value2;
public:
    pair1 (T first, T second) {
        value1=first;
        value2=second;
    }
   **T getmax (){ T retval;
retval = value1>value2? value1 : value2;
return retval;};**
};

int main(){
     pair1<int> myobject (100, 75);
    cout << myobject.getmax()<<endl;
system("pause");
return 0;
} 
```

但是，我不喜欢在这种情况下使用内联函数，希望任何人都可以告诉 C++ 模板代码的第一块有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:39:50.180

您应该为类使用模板参数。

```
template <class T> 
T pair1<T>::getmax (){
     T retval;
    retval = value1>value2? value1 : value2;
    return retval;
} 
```

# java - 使用while循环在java中项目Euler 12

> ID：15129039
> 
> 赞同：1
> 
> 时间：2013-02-28T06:36:47.823
> 
> 标签：java

我想通过这种方式解决 Project Euler[问题 12](http://projecteuler.net/problem=12)，但是遇到了一些问题，谁能告诉我我在哪里犯了错误。

**问题 -

三角形数的序列是通过添加自然数生成的。所以第 7 个三角形数是 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28。前十项是：

1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...

让我们列出前七个三角形数的因数：

```
 1: 1
 3: 1,3
 6: 1,2,3,6
10: 1,2,5,10
15: 1,3,5,15
21: 1,3,7,21
28: 1,2,4,7,14,28 
```

我们可以看到 28 是第一个有五个以上除数的三角形数。

第一个有超过 500 个除数的三角形数的值是多少？

```
import java.util.ArrayList;
import java.util.List;

public class Problem12 {
int j=1;
static int num; 
List<Integer> ls = new ArrayList<Integer>();
public void trangule(int i){
 num= i*(i+1)/2;    
while(j>0);
{
   for(j =1; j<num/2; j++){
   if(num%j==0)
    {int temp= num/j;

    ls.add(temp);
    }
   if(ls.size()==500)
   {
    System.out.println(ls.get(ls.size()-1));   
   }   
   }

}

}
public static void main(String[] args) {
Problem12 ob =new Problem12();
 for(int i =1; i<=500; i++) 
 { ob.trangule(i);}

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:42:45.693

你有一个空语句`while`循环：

```
while(j>0); 
```

The `;` ends the loop, so it is constantly cycling on the condition `j>0` which is always true, so the code will never get past that point.

I'm not sure what that `while` loop is for in the first place, even if you remove `;` it's still never going to leave that loop. In fact I don't think you need it.

Some other things to note:

*   The question asked in the problem is "What is the value of the first triangle number to have **over** five hundred divisors?" The first one to be over five hundred won't necessarily have exactly 500 divisors, which is your current check.
*   `ls`您没有在迭代之间清除，因此`ArrayList`将继续从所有组合的三角形数字中累​​积因子（您可以使用[ArrayList#clear](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#clear%28%29)来执行此操作）

# opencv - How to get a line as a structuring element in openCv?

> ID：15129044
> 
> 赞同：1
> 
> 时间：2013-02-28T06:37:05.720
> 
> 标签：opencv, image-processing

I have a binary image and I want to perform **closing** on that image with the **line** as structuring element. The openCv api has a function **getStructuringElement** that takes the following parameters

*   Shape
*   Size
*   Anchor Point

I can pass **CV_SHAPE_CUSTOM** in the first parameter to create a new shape but where do I pass the **size** and the **values** of my structuring element.

My line will be 10 pixels wide and 1 pixels in length basically {1,1,1,1,1,1,1,1,1,1}.

There is an old function **createStructringElementEx** but I don't want to use that as it involves a lot of conversion of datatype.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:09:17.373

Is this what you want?

Size = Size(10,1)

Anchor Point = Point(-1,-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:27:10.690

Got it . Thanks to the comment from Niko.

Create a matrix as

```
Mat line = Mat::ones(1,10,CV_8UC1);
//now apply the morphology close operation
morphologyEx(img, img, MORPH_CLOSE, line,Point(-1,-1)); 
```

This solved my problem.

# python - 如何使用 python 加密文件但可以使用 shell 解密？

> ID：15129045
> 
> 赞同：1
> 
> 时间：2013-02-28T06:37:08.013
> 
> 标签：python, encryption, cryptography, openssl

我需要加密一个文件，将其发送给另一个人，然后他只能使用 shell 解密它。

`openssl`我通常使用命令：加密文件`openssl enc -aes-256-cbc -salt -in [filename] -out [file out name] -pass file:[direct path to key file]`，然后发送文件。

然后另一个人将使用以下`openssl`命令再次解密该文件：`openssl enc -d -aes-256-cbc -in [encrypted file] -out [file out name] -pass file:[direct path to key file]`

我`os.system`会这样做，但我觉得必须有另一种方法来用 python 加密文件，然后可以在 shell 端解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:33:11.270

你需要使用`openssl`吗？

我使用命令行 GnuPG，并且有一个非常好的 Python 库：[python-gnupg](http://pythonhosted.org/python-gnupg/)。它是命令行的包装器，`gpg`因此它们的工作原理相同。

Instead of key file (I think it contains password) you can use asymmetric cryptography. Create private/public pairs of keys for each part and then encrypt message using recipient public key and sigg it using sender private key. Recipient will check signature of sender using sender public key and recipient will decrypt message using her private key. Private keys can be protected by password but if you are sure your environments are safe you can use empty passwords.

# pca - 用于人脸识别的 PCA

> ID：15129046
> 
> 赞同：0
> 
> 时间：2013-02-28T06:37:09.210
> 
> 标签：pca, reduction, dimensional

令 x1 为 image1 的向量（灰色），x2 为 image2 的向量（灰色），以此类推 xn 为 imagen 的向量（灰色）。比如说，所有的图像大小由 r 行和 c 列 (r*c) 表示

所以，X = [x1, x2, x3, .... xn]。

正如许多文献表明的那样，要减少 n。其他文献也倾向于减少 r*c。

更喜欢哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:08:27.327

我认为它将帮助您了解它的工作原理以及更喜欢哪种方法 [http://fivedots.coe.psu.ac.th/~ad/jg/nui08/faceRecog.pdf](http://fivedots.coe.psu.ac.th/~ad/jg/nui08/faceRecog.pdf)

# windows-phone-7 - 如何在Windows Phone中合并两个图像并将其保存到独立存储

> ID：15129048
> 
> 赞同：0
> 
> 时间：2013-02-28T06:37:13.280
> 
> 标签：windows-phone-7, windows-phone

我想合并两个图像，一个图像是 300x300，另一个是 100x100，首先我创建了一个画布，然后我创建了两个图像，我将它们添加到画布的图像中，并将画布添加到内容面板中，然后我创建了一个`writeablebitmap`并渲染画布并创建了一个`savejpeg`将图像保存到的方法`isolated stoarage`，但是隔离存储没有显示整个图像，它保存了一个黑屏。

首先，我通过代码创建了一个画布，设置了它的高度宽度和背景颜色，然后我以编程方式创建了两个图像，我已将它们添加到画布中，然后将画布添加到`contentpanel`

**我的代码是：**

```
 public void CreateImage()
    {

        Canvas canvas = new Canvas();
        canvas.Height = 400;
        canvas.Width = 400;
        canvas.Background = new SolidColorBrush(Colors.Red);

        Image img1 = new Image();
        img1.Source = (ImageSource)new ImageSourceConverter().ConvertFromString("Image/Desert.jpg");
        img1.Height = 300;
        img1.Width = 300;
        img1.Margin = new Thickness(0, 10, 0, 0);

        Image img2 = new Image();
        img2.Source = (ImageSource)new ImageSourceConverter().ConvertFromString("Image/Jellyfish.jpg");
        img2.Height = 50;
        img2.Width = 50;
        img2.Margin=new Thickness(0,10,300,0);

        canvas.Children.Add(img1);
        canvas.Children.Add(img2);
        ContentPanel.Children.Add(canvas);

        WriteableBitmap wb = new WriteableBitmap(400, 400);
        wb.Render(canvas, new MatrixTransform());
        MemoryStream ms = new MemoryStream();

        wb.SaveJpeg(ms,400,400,0,100);

        using (var isoFileStream = new IsolatedStorageFileStream("myPicture.jpg", FileMode.OpenOrCreate, IsolatedStorageFile.GetUserStoreForApplication()))
        {
            wb.SaveJpeg(isoFileStream, 400, 400, 0, 100);
        }

    } 
```

当我保存图像时，我在隔离存储中出现黑屏。 **如何将两个图像保存在画布上？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:57:25.183

就像斯蒂芬说的那样，我认为您没有将图像获取到您的来源。无论如何，我为您创建了一个示例应用程序。在那里你可以找到两个分区，你可以通过双击容器来添加图像。之后尝试保存并检查您保存的图像。我测试了应用程序，一切都对我有用。您仍然面临任何问题，请发表评论。

[https://www.dropbox.com/s/1vjbbou96w0r15r/SaveImageApp.zip](https://www.dropbox.com/s/1vjbbou96w0r15r/SaveImageApp.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:37:17.360

请检查您正在获取图像的天气或不获取图像源。如果您正在获取图像；尝试这种方法从控件中获取快照并将其保存到 Iso 存储。

```
 http://stackoverflow.com/questions/13837148/how-can-i-take-a-screenshot-full/13990649#13990649 
```

# c++ - 容器和迭代器（多选）

> ID：15129050
> 
> 赞同：0
> 
> 时间：2013-02-28T06:37:19.040
> 
> 标签：c++, iterator, containers

STL 迭代器与容器类一起使用，在概念上类似于指向存储在容器中的特定元素的指针。

以下陈述之一是正确的。哪一个？

1.  迭代器通常保存一个地址（指针），并且应用于迭代器的 operator++ 总是增加该地址。
2.  当迭代器`it`超出程序的范围时，`it`会被破坏，它会自动调用`delete it`;。
3.  对于有效的 STL 容器 myC，当表达式 myC.end()-myC.begin() 定义良好时，它返回与 myC.size() 相同的值。
4.  当容器超出范围时，指向它的所有迭代器都会自动修改。
5.  对于有效的 STL 容器 myC，myC.end() 返回的迭代器引用 myC 中的最后一个有效元素。

显然解决方案是3。但我不明白为什么。有人可以详细说明为什么会这样，并可能说明为什么其他人也是错误的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:17:20.577

1.  想一想链表 ( `list`) 中项目地址的要求。它们不需要在内存中是连续的。

2.  `delete`是在指针上手动完成的事情，它不会自动发生（即使指针超出范围）（除非在某些 API 中完成）。迭代器（通常）是类，因此`delete`甚至不适用。迭代器会被破坏。

    您也可以将指针分类为迭代器。但`delete`仍然不会被自动调用。

3.  请注意，[这仅适用于随机访问迭代器](http://www.cplusplus.com/reference/iterator/)。您可以按如下方式计算容器中的项目数：

    ```
    int count = 0;
    for (iterator it = begin(); it != end(); ++it, ++count) { } 
    ```

    所以你增加`begin()` `count`到达`end()`,
    so `begin() + count = end()`,
    so`end() - begin() = count`和`count = size()`,
    so的时间`end() - begin() = size()`

4.  这不是 C++ 的工作方式。尽管有一些设计模式可以实现这种行为，但通常在修改类时，您有责任确保任何依赖类在无效时得到更新。当您尝试使用超出范围的容器的迭代器时，这将导致未定义的行为。

5.  `end()`超过了最后一个元素，可能是出于这样的考虑：（我敢肯定还有其他原因）

    ```
    for (iterator it = begin(); it != end(); ++it) 
    ```

# c++ - 混合 Objective-C 和 boost/C++

> ID：15129063
> 
> 赞同：2
> 
> 时间：2013-02-28T06:37:54.997
> 
> 标签：c++, objective-c, optimization, boost, objective-c++

我终于有了一个**非常**基本的图形搜索器版本，通过 CLI 工作，但我发现自己处于需要重构所有代码的位置。由于我在 Mac 上进行此编程，因此我正在考虑将 Cocoa 用于 GUI，然后将我的 C++ 函数作为主力。这只是一个临时修复，因为最终我希望能够在 linux 机器/集群上运行我的所有代码。 [这](https://stackoverflow.com/questions/15032773/correlation-network-implementation "这里")是我关于实现的最后一个问题，我确实得到了这个在 boost 中的工作，滚动我自己的图形函数（现在）。

所以这是我的想法：为图形本身构建 C++ 类，并为我想要计算的数量构建单独的函数或方法。 [这](http://robnapier.net/blog/wrapping-cppfinal-edition-759)是我能找到的关于混合 Objective-C 和 C++ 的最新描述。但我想知道：

在 Xcode 中编译我的 C++ 代码会得到优化吗？重点是我希望 C++ 代码针对快速内存访问、多线程以及对 boost 库的访问进行全面优化。然后，我可以将 C++ 类封装在一个包装的 ObjectiveC 类中。要做到这一点，我基本上会有 2 个课程，对吗？带有 .h 和 .cpp 文件并包含 boost 库的 C++ 类，然后是带有 .h 和 .mm 文件的 ObjC 类包装器，其中 .h 不包含对 C++ 类的任何引用，我使用 include in .mm 文件。然后我可以为 Objective C 使用我正常的 MVC 设计和 GUI 实现。只要我让 dealloc 命令能够核对 C++ 类，我就不必担心内存管理？ARC 是否也适用于 C++，

我怀疑如果我想要线程，我会使用 boost 线程，因为为 GCD 编码会使其特定于平台（尽管目前，这就是它运行的全部）。我认为现在，我将远离核心数据，因为我通过简单地解析文本文件来创建我的图表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T06:43:01.237

> 在 Xcode 中编译我的 C++ 代码会得到优化吗？

编译您的代码的不是 Xcode，而是编译器（GCC 或 clang），如果您使用适当的编译器标志请求它来优化您的代码，它会优化您的代码。我看不出混合 C++ 和 Objective-C 会如何使编译器无法优化......

> 只要我赋予dealloc命令核对C++类的能力，我就不用担心内存管理了？

具体来说？您仍然**必须**照常管理 C++ 和 Objective-C 对象的内存。

> ARC 是否也适用于 C++？

不，它没有，它是一个 Objective-C 的特性。C++ 甚至没有引用计数（我希望它有......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:51:38.047

我同意 H2CO3 所说的一切（除了关于引用计数的挑剔）。

还想指出 Daniel Sefton 写[了一篇关于如何](http://www.danielsefton.com/2012/03/building-boost-1-49-with-clang-ios-5-1-and-xcode-4-3/)为 OSX 和 iOS 编译 Boost 的好文章：

另外，是的，-dealloc 是删除 C++ 对象的好地方。

**穿线：**

*   如果您只想针对 OSX 和 iOS，C++11 具有原生线程支持，Android 尚不支持。

线程的其他选项是：

*   Posix 线程（又名 pthreads）
*   提升线程
*   Poco 线程

我个人使用 Poco。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T09:12:36.600

> 在 Xcode 中编译我的 C++ 代码会得到优化吗？

是的。

> 要做到这一点，我基本上会有 2 个课程，对吗？带有 .h 和 .cpp 文件并包含 boost 库的 C++ 类，然后是带有 .h 和 .mm 文件的 ObjC 类包装器，其中 .h 不包含对 C++ 类的任何引用，我使用 include in .mm 文件。

正确的。

> 只要我赋予dealloc命令核对C++类的能力，我就不用担心内存管理了？

是的，当您声明 C++ ivar 时，您的 C++ 对象的默认构造函数和析构函数将在 ObjC 对象生命周期的适当时间点被调用。

与普通的 C++ 一样，您只需对 C++ 变量使用值或智能指针而不是原始指针，并且对对象的生命周期进行很少的额外干预。如果启用了 ARC，编译器不会对您的 C++ 类型应用 ObjC 引用计数（毕竟，C++ 对象不是严格引用计数的）。

> ARC 是否也适用于 C++，它是否让 OSX 能够管理和清理我的 C++ 代码？

ARC 仅适用于 ObjC 类型。它对 C++ 甚至 C 类型/分配没有任何作用。只需`std::vector`为您的 C++ 和 C 分配/类型使用智能指针或一些适当的 C++ 替代品（即）。如果您发现自己需要在 C++ 中编写`delete`、`delete[]`或`free`，则说明您没有正确使用智能指针——它们几乎和 ARC 一样简单，只是提供了更大的灵活性。

您可能还想查看`CLANG_WARN_OBJCPP_ARC_ABI`.

ARC 的不同之处还在于，当程序编译为 ObjC++ 时，本地强 ObjC 引用将`-release`在从抛出的异常展开期间被 d（编译为 ObjC+ARC 时不是这种情况）。

# ios - 更改iphone sdk中pdf页面上文本的背景颜色

> ID：15129064
> 
> 赞同：3
> 
> 时间：2013-02-28T06:37:55.777
> 
> 标签：ios, pdf

iOS 是否提供对 PDF 上文本属性的任何控制，即我们可以更改 pdf 上文本的背景颜色，例如音频同步何时进行？我猜 CGPDF 并没有提供太多来控制或提取 PDF 页面的内容信息。还有其他图书馆可以提供帮助吗？谢谢 ！

# regex - 将重写规则更改为子文件夹

> ID：15129065
> 
> 赞同：0
> 
> 时间：2013-02-28T06:37:57.477
> 
> 标签：regex, .htaccess, mod-rewrite

如何让此代码指向子文件夹。

```
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

以前是 www.sitename.com，但现在是 www.mysite.com/sitename.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:25:16.393

不太清楚你是什么意思。

如果 index.php 被移动，您可以像这样更改规则：

`RewriteRule ^(.*)$ /sitename.com/index.php?/$1 [L]`

或者您可以将 .htaccess 文件移动到子文件夹（或者您可以在那里创建一个新的 .htaccess 文件）。

更多关于 htaccess：[http ://www.javascriptkit.com/howto/htaccess.shtml](http://www.javascriptkit.com/howto/htaccess.shtml)

# javascript - 如何获得点击形状的位置（KineticJS）

> ID：15129067
> 
> 赞同：0
> 
> 时间：2013-02-28T06:38:06.750
> 
> 标签：javascript, html5-canvas, kineticjs

我在这个层中有一个可拖动的层和一个大的透明背景。我想在用户点击的位置添加一个文本。当我没有拖动图层时，一切都很好，但是当我拖动它时，文本将添加到我不想要的地方。因为 event.x 和 event.y 不是形状点击区域的 x 和 y。坐标必须转换。但我不知道如何获得转换向量。

```
 plot = {};
    plot.stage = new Kinetic.Stage({width: 500, height:500,
      container: 'abc',
      'draggable': true});
    plot.layer = new Kinetic.Layer();
    plot.stage.add(plot.layer);
    plot.background = new Kinetic.Rect({
          x: -1000,
          y: -1000,
          width: 2000,
          height: 2000,
          fill: "#000000",
          opacity: 0.05,
          type: 'blank'
    });
    plot.layer.add(plot.background);

    plot.background.on('click', function(e) {
       e.x;
       e.y;
       // e.x and e.y are not true after dragging stage
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:12:05.333

使用 KineticJS 时，您希望避免使用 event.x 和 event.y，因为 KineticJS 已经有获取位置的方法。

```
 var position = stage.getUserPosition();  // this returns an object like {x: 100, y: 140} 
```

此外，检查您将文本添加到哪个图层的位置。另外，请显示一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:07:41.210

您需要绝对设置元素的位置。用这个：

plot.setAbsolutePosition(stage.getUserPosition());

# yii - 如何限制CJuiAutoComplete中的内容

> ID：15129074
> 
> 赞同：0
> 
> 时间：2013-02-28T06:38:32.593
> 
> 标签：yii

Hai 我正在 yii 中开发 CJuiAutoComplete。好吧，我必须限制内容或导致自动完成。我怎样才能做到这一点。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:35:22.967

如果您要从数据库中获取自动完成结果，那么您应该在您的数据库请求中设置限制。如果它来自一个数组，那么你应该将你的数组切片为只有 x 值。

这`CJUIAutoComplete`只是显示您给他的选项以自动完成，您可以提供更多或更少的选项！

目前我们不知道您是如何填充您的`CJuiAutoComplete`，所以我们无法为您提供更多帮助！

# iphone - 'Appdelegate' 没有可见的@interface 声明选择器'setupTabBarController'

> ID：15129076
> 
> 赞同：2
> 
> 时间：2013-02-28T06:38:34.653
> 
> 标签：iphone, ios, objective-c, cocoa-touch, appdelegate

我已经创建了一个方法`Appdelegate.m`

```
-(void)setupTabBarController {
         // details goes here
} 
```

现在`ABC.m`我想访问`setupTabBarController`

我已经包括了应用程序委托：

```
#import "AppDelegate.h" 
```

接着：

```
AppDelegate *maindelegate = [[AppDelegate alloc] init];
[maindelegate setupTabBarController]; 
```

但它显示错误，

> 'Appdelegate' 没有可见的@interface 声明选择器'setupTabBarController'

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T06:41:34.807

正如错误消息所述，您需要在其中声明它，`AppDelegate.h`然后您应该将其称为：

```
AppDelegate *maindelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[maindelegate setupTabBarController]; 
```

在 AppDelegate.h 中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

- (void)setupTabBarController;

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:41:59.200

你必须在 Appdelegate.h 文件中声明这个方法才能在另一个视图控制器中使用它，像这样

```
-(void)setupTabBarController; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:42:03.420

利用 ：

```
AppDelegate *appDelegate =(AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate setupTabBarController]; 
```

# android - android中systemutil有什么用？

> ID：15129082
> 
> 赞同：0
> 
> 时间：2013-02-28T06:38:56.217
> 
> 标签：android

我想知道systemutil在android中的使用。

像这样：

```
String ringFile = sp.getString(SystemUtil.KEY_RING_TONE, null);
if(ringFile==null){
//No value, is null, do not play the bell
ringTone=null; 
```

android中systemutil有什么用？

# regex - 为什么球拍不服从我在字符串替换中的“全部”设置？

> ID：15129084
> 
> 赞同：1
> 
> 时间：2013-02-28T06:39:09.083
> 
> 标签：regex, scheme, racket

我发现字符串替换功能的球拍文档与球拍读取-评估-打印循环的实际工作方式大不相同。[文档](http://docs.racket-lang.org/reference/strings.html#%28def._%28%28lib._racket/string..rkt%29._string-replace%29%29)说您可以在String-replace 之后放置一个关键字来指定您只想替换第一个实例，就像这样（但他们没有这样的示例）：

```
(string-replace "My Dog is a Dog" "Dog" "Cat" #:all #f) 
```

所以，根据文档，这应该输出：“我的猫是狗”（我知道这没有意义，但这只是一个例子）。

相反，我的不同球拍安装以不同的方式抱怨，例如“过程不期望具有给定关键字的参数”或关于使用关键字作为过程的东西。

我想我仍然可以用 string->list 做我想做的事，但我最大的抱怨是这违反了机器人第二定律！如果某事是一个有效的命令（直接来自文档），那就去做吧，别再抱怨了！

编辑：如果我将 #:all 更改为 #:all?，然后它会抱怨参数的数量应该是 3 个带有可选关键字，但给出了 5 个（换句话说，它会将 #:all?#f 视为两个单独的参数，而不是关键字组）。

EDIT2：顺便说一句，我在 Linux 中使用 drracket。如果我在终端只使用命令“racket”，则更正的语法有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:53:01.400

是的，这是一个错误——关键字名称应该是`#:all?`，而不是`#:all`：

```
-> (string-replace "My Dog is a Dog" "Dog" "Cat" #:all? #f)
"My Cat is a Dog" 
```

它现在已在源中[修复。](http://git.racket-lang.org/plt/b84a7bce66)

# python - 如何从从 python 文件执行的 vbscript 返回字符串

> ID：15129085
> 
> 赞同：2
> 
> 时间：2013-02-28T06:39:14.747
> 
> 标签：python, vbscript

我是 VBScript 的新手，正在从 python 文件执行一个 vbs 文件。现在在 vbs 文件中有一个`String value`我需要返回到 python 文件。我试过了`WScript.Quit()/ WScript.StdOut()`。但似乎他们不支持字符串。'因为存在类型不匹配错误。

有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:41:56.970

如果您在控制台中运行 .vbs，即使用`CScript.exe`，您可以使用 ">" 重定向输出：

```
CScript example.vbs //NoLogo > output.txt 
```

在你的 .vbs 中使用`WScript.StdOut`带有`.Write`or`.WriteLine`方法的对象。例如：

```
' example.vbs
Main

Sub Main()
    Dim result
    result = 1 / Cos(25)
    WScript.StdOut.Write result
End Sub 
```

但是，如果您使用`WScript.exe`...运行脚本

```
WScript example2.vbs 
```

...您需要使用`FileSystemObject`.

```
' example2.vbs
Main

Sub Main()
    Dim result, fso, fs
    result = 1 / Cos(25)
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set fs  = fso.CreateTextFile("output.txt", True)
    fs.Write result
    fs.Close
End Sub 
```

# c++ - 有没有办法从 Linux 发行版二进制文件中转储带有行号的堆栈跟踪？

> ID：15129089
> 
> 赞同：13
> 
> 时间：2013-02-28T06:39:28.303
> 
> 标签：c++, linux, backtrace

当我的 c++ Linux 应用程序崩溃时，我需要转储堆栈跟踪。`backtrace()`我使用and成功地做到了这一点`backtrace_symbols()`。现在，另外我想获取崩溃的行号。它是怎么做到的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-28T07:39:51.793

我从

[http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/063/6391/6391l2.html](http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/063/6391/6391l2.html) 和[http://www.linuxjournal.com/article/6391?page=0,0](http://www.linuxjournal.com/article/6391?page=0,0)来示例代码显示了如何实现这一点。

基本上，它是将堆栈回溯放在信号处理程序中，并让后者捕获您的程序可以接收的所有“坏”信号（SIGSEGV、SIGBUS、SIGILL、SIGFPE 等）。这样，如果您的程序不幸崩溃并且您没有使用调试器运行它，您可以获得堆栈跟踪并知道故障发生在哪里。这种技术也可以用来了解你的程序在哪里循环，以防它停止响应......

下面的代码为跟踪中的每个地址运行外部程序[addr2line](http://www.linuxcommand.org/man_pages/addr2line1.html)以将其转换为文件名和行号。

下面的源代码打印所有本地函数的行号。如果调用另一个库中的函数，您可能会看到几个 ??:0 而不是文件名。

```
#include <stdio.h>
#include <signal.h>
#include <execinfo.h>

void bt_sighandler(int sig, struct sigcontext ctx) {

  void *trace[16];
  char **messages = (char **)NULL;
  int i, trace_size = 0;

  if (sig == SIGSEGV)
    printf("Got signal %d, faulty address is %p, "
           "from %p\n", sig, ctx.cr2, ctx.eip);
  else
    printf("Got signal %d\n", sig);

  trace_size = backtrace(trace, 16);
  /* overwrite sigaction with caller's address */
  trace[1] = (void *)ctx.eip;
  messages = backtrace_symbols(trace, trace_size);
  /* skip first stack frame (points here) */
  printf("[bt] Execution path:\n");
  for (i=1; i<trace_size; ++i)
  {
    printf("[bt] #%d %s\n", i, messages[i]);

    char syscom[256];
    sprintf(syscom,"addr2line %p -e sighandler", trace[i]); //last parameter is the name of this app
    system(syscom);
  }

  exit(0);
}

int func_a(int a, char b) {

  char *p = (char *)0xdeadbeef;

  a = a + b;
  *p = 10;  /* CRASH here!! */

  return 2*a;
}

int func_b() {

  int res, a = 5;

  res = 5 + func_a(a, 't');

  return res;
}

int main() {

  /* Install our signal handler */
  struct sigaction sa;

  sa.sa_handler = (void *)bt_sighandler;
  sigemptyset(&sa.sa_mask);
  sa.sa_flags = SA_RESTART;

  sigaction(SIGSEGV, &sa, NULL);
  sigaction(SIGUSR1, &sa, NULL);
  /* ... add any other signal here */

  /* Do something */
  printf("%d\n", func_b());
} 
```

此代码应编译为：gcc sighandler.c -o sighandler -rdynamic

程序输出：

```
Got signal 11, faulty address is 0xdeadbeef, from 0x8048975
[bt] Execution path:
[bt] #1 ./sighandler(func_a+0x1d) [0x8048975]
/home/karl/workspace/stacktrace/sighandler.c:44
[bt] #2 ./sighandler(func_b+0x20) [0x804899f]
/home/karl/workspace/stacktrace/sighandler.c:54
[bt] #3 ./sighandler(main+0x6c) [0x8048a16]
/home/karl/workspace/stacktrace/sighandler.c:74
[bt] #4 /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6) [0x3fdbd6]
??:0
[bt] #5 ./sighandler() [0x8048781]
??:0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T06:43:16.483

`gcc -Wall -g`只有使用调试信息（即 with或 with ）编译程序时才有可能`g++ -Wall -g`。没有`-g`可执行文件不包含任何源代码行信息。如果使用`gcc`，您可以使用优化和调试信息（例如`g++ -Wall -g -O2`）进行编译，但有时行位置会“令人惊讶”。

^(该`-Wall`标志要求 GCC 显示所有警告。它非常有用（因此我建议使用它）但与`-g`调试信息无关。)

至于如何提取行号，最简单的方法是fork一个`gdb`进程。或者，您可以获取调试信息（[DWARF](http://www.dwarfstd.org/)格式）并对其进行解析，可能使用`libdwarf`ELF[工具链](http://sourceforge.net/apps/trac/elftoolchain/)。我不确定这是否值得麻烦...

要获得回溯，您可以简单地运行您的程序，`gdb`也许是`gdb --args yourprogram itsarguments`...

* * *

### 附加物

您还可以使用最近的 GCC 内部的[libbacktrace](https://gcc.gnu.org/viewcvs/gcc/trunk/libbacktrace/)（实际上是[Ian Taylor 的 libbacktrace](https://github.com/ianlancetaylor/libbacktrace)），它旨在解决您的问题（它“解释”当前可执行文件的 DWARF 格式，您将使用它进行编译`g++ -O -g`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T19:24:55.067

正如 Saqlain 指出的，addr2line 可用于获取行号。

如果首选库，请查看[LPT 套件](https://freeshell.de/~amelinte/software.html)。有关如何安装的说明在[此处](https://en.wikibooks.org/wiki/Linux_Applications_Debugging_Techniques/Building_the_toolkit)。LPT 依赖于 bfd 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-27T23:38:29.860

`system()`需要`#include <stdlib.h>`

似乎缺少其他一些东西。

```
$ g++-8 -g -o dump dump.cpp
dump.cpp: In function ‘void bt_sighandler(int, sigcontext)’:
dump.cpp:15:43: error: ‘struct sigcontext’ has no member named
‘eip’; did > you mean ‘rip’?
         "from %p\n", sig, ctx.cr2, ctx.eip);
                                        ^~~
                                        rip
dump.cpp:21:26: error: ‘struct sigcontext’ has no member
named ‘eip’;
did you mean ‘rip’?
  trace[1] = (void *)ctx.eip;
                         ^~~
                         rip
dump.cpp: In function ‘int main()’:
dump.cpp:64:19: error: invalid conversion from ‘void*’ to
   ‘__sighandler_t’ > {aka ‘void (*)(int)’} [-fpermissive]
   sa.sa_handler = (void *)bt_sighandler;
                   ^~~~~~~~~~~~~~~~~~~~~ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-06T17:41:35.530

好的，所以当我被这个漂亮的笔记绊倒时，我面前打开了一个 Xavier（NVIDIA Jetpack 4.4 Ubuntu 18.04.5）。我很懊恼地发现这段代码在 Xavier 上不起作用，它基本上是一个 aarch64 架构，其中一些信号结构是不同的。

所以我设法拼凑出一个适用于 X86_64 和 aarch64 的反例。

```
#include <stdio.h>
#include <signal.h>
#include <execinfo.h>
#include <stdlib.h>

#include <ucontext.h>
#include <string.h>

#ifdef __aarch64__
#define _PC pc
#define _SP sp
#elif defined(__x86_64__)
#define _PC gregs[REG_RSP]
#define _SP gregs[REG_RIP]
#else
#error architecture not supported
#endif

static void addr2line(void *traceP, void *messageP) {
  char syscom[256];
#ifdef __aarch64__
  char message[4096];
  strcpy(message, (char *) messageP);
  char *saveP = NULL, *token = strtok_r(message, "(", &saveP);
  if(token) {
    token = strtok_r(NULL, "+", &saveP);
    if(token) {
      char *term = strchr(token,')');
      if(term)
        *term = 0;
    }
  }
  if(token==NULL) {
    token = message;
  }
  sprintf(syscom,"addr2line %s -e sighandler", token);
#elif defined(__x86_64__)
  sprintf(syscom,"addr2line %p -e sighandler", traceP); //last parameter is the name of this app
#endif
  system(syscom);
}

void bt_sighandler(int sig, siginfo_t *psi, void *ctxarg) {

  void *trace[16];
  char **messages = (char **)NULL;
  int i, trace_size = 0;
  mcontext_t *ctxP = &((ucontext_t *) ctxarg)->uc_mcontext;

  if (sig == SIGSEGV)
    printf("Got signal %d, faulty address is %p, "
           "from %p\n", sig, (void *) ctxP->_PC, (void *) ctxP->_SP);
  else
    printf("Got signal %d\n", sig);

  trace_size = backtrace(trace, 16);
  /* overwrite sigaction with caller's address */
  trace[1] = (void *)ctxP->_SP;

  messages = backtrace_symbols(trace, trace_size);
  /* skip first stack frame (points here) */
  printf("[bt] Execution path:\n");
  for (i=1; i<trace_size; ++i)
  {
    printf("[bt] #%d %s\n", i, messages[i]);

    addr2line(trace[i], messages[i]);
  }

  exit(0);
}

int func_a(int a, char b) {

  char *p = (char *)0xdeadbeef;

  a = a + b;
  *p = 10;  /* CRASH here!! */

  return 2*a;
}

int func_b() {

  int res, a = 5;

  res = 5 + func_a(a, 't');

  return res;
}

int main() {

  /* Install our signal handler */
  struct sigaction sa;

  sa.sa_sigaction = bt_sighandler;
  sigemptyset(&sa.sa_mask);
  sa.sa_flags = SA_RESTART|SA_SIGINFO;

  sigaction(SIGSEGV, &sa, NULL);
  sigaction(SIGUSR1, &sa, NULL);
  /* ... add any other signal here */

  /* Do something */
  printf("%d\n", func_b());
} 
```

基本上：

*   信号处理程序包括 SA_INFO，它的结构不同，但看起来在两种架构中都受支持。请注意，信号处理程序必须填充 sa_sigaction 而不是 sa_handler。
*   信号处理程序“void *ctxarg”的第三个参数被转换为一个 ucontext_t，其中包括一个 mcontext_t，其中包括 PC 和 SP 字段。这些在 x86_64 和 aarch64 架构中的结构不同，因此代码必须是特定于架构的。
*   add2line 不适用于 trace[i] 中提供的地址。我还没有找到原因——这些地址以 0x55 为前缀——如果你去掉这个偏移量，它们就可以工作，但它的来源目前对我来说是个谜。但是，message[i] 包含一个可以在其位置使用的偏移量，只需要一些字符串操作即可获取它。
*   回溯中有一个额外的条目（没有去寻找解释原因）

该代码现在在 x86_64 上运行并提供类似的可用结果。

```
xavier $ ./sighandler 3
Got signal 11, faulty address is 0x5563baadf4, from 0x7fd4439350
[bt] Execution path:
[bt] #1 [0x7fd4439350]
??:0
[bt] #2 ./sighandler(+0xdf4) [0x5563baadf4]
/home/jsaari/project/radar_ars/alfalfa/cuda/debug/sighandler.cpp:79
[bt] #3 ./sighandler(+0xe24) [0x5563baae24]
/home/jsaari/project/radar_ars/alfalfa/cuda/debug/sighandler.cpp:89
[bt] #4 ./sighandler(+0xea4) [0x5563baaea4]
/home/jsaari/project/radar_ars/alfalfa/cuda/debug/sighandler.cpp:109
[bt] #5 /lib/aarch64-linux-gnu/libc.so.6(__libc_start_main+0xe0) [0x7f9ae316e0]
??:0
[bt] #6 ./sighandler(+0xa94) [0x5563baaa94]
:?

x86_64 $ ./sighandler 3
Got signal 11, faulty address is 0x7ffe291d27d0, from 0x40095a
[bt] Execution path:
[bt] #1 ./sighandler() [0x40095a]
/home/jsaari/common/experiment/backtrace/sighandler.cpp:79
[bt] #2 ./sighandler() [0x40095a]
/home/jsaari/common/experiment/backtrace/sighandler.cpp:79
[bt] #3 ./sighandler() [0x400982]
/home/jsaari/common/experiment/backtrace/sighandler.cpp:89
[bt] #4 ./sighandler() [0x4009f4]
/home/jsaari/common/experiment/backtrace/sighandler.cpp:109
[bt] #5 /lib64/libc.so.6(__libc_start_main+0xf5) [0x7f294a36d495]
??:0
[bt] #6 ./sighandler() [0x4006d9]
??:? 
```

**恕我直言 - 现在 NVIDIA 已经收购了 ARM，ARM 将接管物联网（如果还没有的话），英特尔可能会开始苦苦挣扎。**

* * *

显然，这里记录了一个地址加扰：

[https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860394](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=860394)

显然，这是由 gcc 仅构建与位置无关的代码引起的。如果您使用“-no-pie”构建应用程序，那么 trace[i] 条目将与 addr2line 一起使用。

除了我编码的过程之外，我还没有找到如何管理它。

* * *

从这个帖子：

[如何找到 PIE 二进制文件的负载重定位？](https://stackoverflow.com/questions/55066749/how-to-find-load-relocation-for-a-pie-binary)

重定位值可以从

```
#include <link.h>

. . .

uintptr_t relocation = _r_dump.r_map->l_addr; 
```

可以从 trace[i] 中减去重定位值以获得 addr2line 可以使用的地址（我正在使用的 xavier aarch64 框的结果）。

对于非重定位二进制文​​件，重定位的值为“0”（我正在使用的 x86_64 框上的结果）。

# iphone - 如何重复调用 UITableView？

> ID：15129093
> 
> 赞同：2
> 
> 时间：2013-02-28T06:39:39.897
> 
> 标签：iphone, ios, objective-c, uitableview

我正在显示以下 tableView ：

![在此处输入图像描述](../Images/bf977cb59bf125bb36f7425e67a556eb.png)

我想要：当我单击下一个（或上一个）按钮时，它应该显示具有不同图像的相同表格（下一个/上一个 10 个图像）..

由于图像数量是动态的，我无法使用详细视图 ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T06:42:14.803

`array`1）首先从（传递给的数组）中删除所有元素`table`。

2）将新元素添加到您想要在下一次和上一次`button`单击的数组中。

3 )之后`reload`使用`table data`.`[tbl reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:46:22.610

使用不同的数据重新加载表格视图，并且对于重新加载表格视图，请使用此代码

```
[yourTable reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:05:43.800

```
 This block of code will help you

    - (IBAction)previous:(id)sender
{
      self.selectedindex--;
    if (self.selectedindex==0) {
        prev.enabled=NO;
    }
    else{
        prev.enabled=YES;
        next.enabled=YES;

    }
   //get the selected indexed data from the array    

//reload the table 
[Tableviewname reloaddata];       

}
- (IBAction)next:(id)sender
{
    self.selectedindex++;
    if (self.selectedindex>0) {
        prev.enabled=YES;
    }
      if (self.selectedindex==49) {
        next.enabled=NO;
    }
 //get the selected indexed data from the array    

//reload the table 
[Tableviewname reloaddata];       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:14:14.887

此代码将帮助：

```
- (void) loadDataToWebView {
    [yourDataSourceArray removeAllObjects];
    yourDataSourceArray = [self getNewdataToPopulate];
    [yourTableView reloadData];
}

- (NSMutableArray *) getNewdataToPopulate{
    //write code to get new data to popualate in  your table
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:37:39.673

以下代码未在 Xcode 中测试，因此可能会出现一些错误，但这将有助于我猜测 #define RecordPerPage 10 int pageNo, totalPage; NSMutableArray * totalRecord, * arrShow;

```
- (void)viewDidLoad
{
     [super viewDidLoad];

     totalPage = [totalRecord count]/RecordPerPage;
     if([totalRecord count]%RecordPerPage==0){
         totalPage++;
     }
}
-(void)buttonClicked:(id)sender{
     UIBarButtonItem * btn = (UIBarButtonItem*)sender;
     //Next Button tag = 1
     if(btn.tag==1)
     {
        if(pageNo<totalPage)
           pageNo++;
        else{
              //Your code Here
            } 
     }
     else
     {
       if(pageNo>0)
           pageNo--;
        else{
              //Your code Here
            }
     }

     [arrShow removeAllObjects];

     int startVal, endVal;
     startVal = pageNo * RecordPerPage;
     endVal = startVal + RecordPerPage;
     startVal++;

     for(int i=startVal; i<endVal; i++)
     {
         if([totalRecord count]>i)
             break;

         [arrShow addObject:[totalRecord objectAtIndex:i]];
     }
} 
```

# c# - 未调用 Jquery Ajax 的成功函数

> ID：15129097
> 
> 赞同：4
> 
> 时间：2013-02-28T06:39:52.273
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我正在从 Jquery ajax 调用 MVC 控制器方法。

```
$(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "/Customer/GetDetails",
            contentType: "application/json; charset=utf-8",
            async: false,
            cache: false,
            success: function (data) {
                $.each(data, function (index, value) {
                    alert(value);
                });
            }
        });
    }); 
```

我有一个名为**Customer**的实体。

控制器方法从数据库中获取记录并存储为客户列表，并以 JsonResult 类型返回该列表。

```
public JsonResult GetDetails()
{
    CustomerDAL customer = new CustomerDAL();
    IList<Customer> custList = customer.GetDetail();
    return Json(custList);
} 
```

但是这里根本没有调用我的ajax的成功函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T06:41:42.933

您不必指定，`content-type`因为它设置了服务器期望数据的类型，您没有发送任何内容，因此无需显式设置，其次设置`dataType`客户`json`端期望数据的格式从服务器。但我真的怀疑这可能是任何错误的原因。

添加错误回调以确保在返回的途中出现问题，例如

尝试

```
$.ajax({
            type: "POST",
            url: "/Customer/GetDetails",
            dataType:'json',
            async: false,//WHY??
            cache: false,
            success: function (data) {
                 alert("success");                
            },
            error:function(){
              alert("something went wrong");
            }
        }); 
```

利用

1.  Firebug 或 chrome 工具来检查 ajax 请求并设置返回的状态代码是什么。

2.  在 Controller 中放置一个断点，以查看`ActionResult`调用时是否命中。

编辑

`HttpPost`用注释标记你的 JsonResult

```
[HttpPost]
public JsonResult GetDetails()
        {
            CustomerDAL customer = new CustomerDAL();
            IList<Customer> custList = customer.GetDetail();
            return Json(custList);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:53:14.890

今天进入了那个。问题是，“成功”事件没有被触发，从 jQuery 的角度来看实际上没有“成功”：服务器返回的 json 代码格式错误！所以：仔细检查您的 json 格式，即使用[http://zaach.github.com/jsonlint/](http://zaach.github.com/jsonlint/)上的 JSON Lint或其他内容。ajax 函数对任何错误/错误的设置都非常“宽容”，但格式错误的 json 代码绝对是一个错误。只要错误事件被触发，就会出现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:45:41.937

更换你的线路

```
 contentType: "application/json; charset=utf-8", 
```

有了这个

```
contentType: "application/json", 
```

并添加数据类型

```
datatype: 'json' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:34:38.930

您在 ajax-success 函数中有一个对象列表作为列表。

解析它试试这个

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "/Customer/GetDetails", // or better way '@Url.Action("GetDetails", "Customer")'
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            $.each(data, function (index, customer) {
                alert(customer.id, customer.name, customer.surname);
            });
        }
    });
}); 
```

控制器

```
public JsonResult GetDetails()
{
    CustomerDAL customer = new CustomerDAL();
    IList<Customer> custList = customer.GetDetail();

    return Json(custList);
} 
```

例如假设您的 CustomerDAL 模型

```
class CustomerDAL
{ 
    public int id { get; set; }
    public string name { get; set; }
    public string surname { get; set; }
} 
```

修改 CustomerDAL 模型的警报消息。我不知道你的模型中有什么属性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-31T06:51:42.113

你的代码：

```
return Json(custList); 
```

将其更改为：

```
return Json(new SelectList(custList)); 
```

# java - 在 jInternalFrame 中加载单独的 jFrame

> ID：15129102
> 
> 赞同：0
> 
> 时间：2013-02-28T06:40:14.123
> 
> 标签：java, swing, jframe, jinternalframe, jdesktop

我是 Java 桌面应用程序的新手。我已经建立`JDesktopPane`了两个按钮。

在该按钮中单击它将加载两个单独`JInternalFrames`的 .

我已经开发了两个单独的`JFrame`类（表示两个模块）。所以我想知道，我可以加载`JFrame`那些`JInternalFrames`吗？

# python - 如何在 Python 中找到客户端和服务器之间的通信速度？

> ID：15129105
> 
> 赞同：0
> 
> 时间：2013-02-28T06:40:38.327
> 
> 标签：python, network-programming, ping

我有一个本地主机，我想在其中测试客户端和服务器之间的通信速度。我想 ping`69.43.202.97`并以字节/秒或 kb/秒为单位查找连接速度？我想每5分钟测试一次速度并返回。我怎样才能做到这一点？

我使用子进程 ping 服务器：

```
subprocess.Popen(['ping', '69.43.202.97']) 
```

它不断返回数据。但我只想在 5 分钟的间隔内找到每秒的数据传输量。

# java - 执行 .bat 文件时启用按钮

> ID：15129107
> 
> 赞同：0
> 
> 时间：2013-02-28T06:40:46.663
> 
> 标签：java, swing, jbutton

我有一个带有打开和后退按钮的表单。我通过打开按钮打开我的批处理文件，而批处理文件正在执行，其他按钮被禁用。我想启用这些按钮。请帮我。

运行批处理文件代码：

```
private void openActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    // back.setEnabled(true);
    String filename = "C:\\JMeter Project\\jakarta-jmeter-2.5.1\\bin\\jmeter.bat";
    String command = filename;
    Runtime runtime = Runtime.getRuntime();
    try {
        Process process = runtime.exec(command);
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line = reader.readLine();
        while (line != null) {
            System.out.println(line);
            line = reader.readLine();
            System.out.println(line);
        }
        back.setEnabled(true);
        JOptionPane.showMessageDialog(null, "Batch file executed successfully.....!!!!");
    } catch (IOException e) {

        JOptionPane.showMessageDialog(null, "Batch file execution failed.");
    }
    // Form f=new Form();
    // back.action(f.setVisible(true),null);   

} 
```

**返回按钮代码：**

```
private void backActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    close();
    sms_sound s = new sms_sound();
    //s.setVisible(true);
    Form f = new Form();
    f.setVisible(true);
    //  back.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:47:45.067

您正在阻止事件调度线程，这会阻止它处理任何重绘请求。

您应该将“批处理”代码移动到后台线程，类似 a 的东西[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)非常适合这个问题。

**添加示例**

```
public class BatchRunner extends SwingWorker<Integer, String> {

    @Override
    protected Integer doInBackground() throws Exception {
        String filename = "C:\\JMeter Project\\jakarta-jmeter-2.5.1\\bin\\jmeter.bat";
        String command = filename;
        Runtime runtime = Runtime.getRuntime();
        Process process = runtime.exec(command);
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
            publish(line);
        }
        return process.exitValue();
    }

    @Override
    protected void process(List<String> chunks) {
        // You can process the output produced
        // the doBackgroundMethod here within the context of the EDT
    }

    @Override
    protected void done() {
        try {
            Integer result = get();
            if (result == 0) {
                JOptionPane.showMessageDialog(null, "Batch file executed successfully.....!!!!");
            } else {
                JOptionPane.showMessageDialog(null, "Batch file returned an exit value of " + result);
            }
        } catch (InterruptedException | ExecutionException | HeadlessException interruptedException) {
            JOptionPane.showMessageDialog(null, "Batch file execution failed.");
        }
        back.setEnabled(true);
    }
} 
```

当您准备好执行批处理程序时，只需执行类似...

```
back.setEnabled(false);
new BatchRunner().execute(); 
```

# php - 如果 ID 退出则更新表，否则插入新记录？

> ID：15129108
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:40:51.673
> 
> 标签：php

我在更新表时遇到问题 我的表包含两个 ID，一个是主键，我正在使用第二个 ID 插入记录。如果第二个 id 退出，我也想更新表格。任何帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:49:04.643

使用第二个 ID 选择。如果返回任何行，则运行更新语句，否则运行插入语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:42:47.680

您可以在 MySQL 中使用 INSERT ... ON DUPLICATE KEY UPDATE 语法。[阅读更多](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

如果您正在寻找 PHP 解决方案，请首先执行 SELECT 查询并检查特定行是否存在。如果存在更新值，否则插入数据。

另请阅读

[如果记录存在，则更新否则插入](https://stackoverflow.com/questions/1630332/if-record-exists-update-else-insert)

[如果存在则更新记录，否则插入 MySQL](https://stackoverflow.com/questions/11404243/update-record-if-exist-else-insert-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:50:59.063

```
 $query = mysql_query('select * from my_table where second_id = '.$second_id);
 if(mysql_num_rows($query) > 0){
     mysql_query('update my_table set field = '.$value .' where second_id = '.$second_id);
 }
 else{
      mysql_query("insert into my_table (field1, field2...) values ('".$value1."', '".$value2."')");
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:47:00.883

```
mysql_query("select second_id from table where second_id=".$the_second_id);
if(mysql_num_rows >0) { 
mysql_query("update table set column1=value1,column2=value2,... where second_id=".$the_second_id);
}
else{
mysql_query("insert into table(column1,column2,...) values(value,value2,...) ");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:42:42.753

首先在表中执行“SELECT”子句，如果数据存在则执行“UPDATE”，否则执行“INSERT”。

# .net - 我的 ftp 上传后，俄语字符被破坏

> ID：15129110
> 
> 赞同：2
> 
> 时间：2013-02-28T06:40:56.463
> 
> 标签：.net, encoding, character-encoding, ftpwebrequest

上下文如下：我接收带有俄语文本的 xml 文件，我的 FileSystemWacher on Create 事件将它们传输到内部 ftp 服务器，如下所示：

公共静态 FtpWebResponse UploadFile（字符串 localFile，字符串 ftpFile，NetworkCredential 凭据）{

```
 //Thread.Sleep(2000);
        // Get the object used to communicate with the server.

        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpFile);
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.UseBinary = true;
        request.Proxy = null;

        request.Credentials = credentials;

        using (FileStream sourceStream = new FileStream(localFile,FileMode.Open))
        using (Stream requestStream = request.GetRequestStream())
        {
            CopyStream(sourceStream, requestStream);
        }

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        return response;

    } 
```

private static void CopyStream(Stream input, Stream output) { byte[] buffer = new byte[32768]; while (true) { int read = input.Read(buffer, 0, buffer.Length); 如果（读取 <= 0）返回；output.Write(buffer, 0, read); } }

传输后，在 ftp 端，文件如下所示：

```
<OTPR consignment_number="33504655" weight_of_load="57160" forwarding_railway="22" forwarding_station="330206" consignor="3590" name_of_consignor="пїЅпїЅпїЅ "пїЅпїЅпїЅпїЅпїЅпїЅIпїЅ-пїЅпїЅпїЅпїЅIпїЅпїЅпїЅпїЅпїЅ". 18011\. пїЅ. пїЅпїЅпїЅпїЅпїЅпїЅпїЅ. пїЅпїЅпїЅ.пїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅ, пїЅпїЅпїЅ.1 пїЅпїЅIпїЅ 225\. 0472719922." destination_railway="53" destination_station="517508" consignee="9999" name_of_consignee="пїЅпїЅпїЅпїЅпїЅ пїЅпїЅпїЅпїЅпїЅпїЅпїЅ пїЅпїЅпїЅ." packing="2" nhm="12019000" name_of_load="пїЅпїЅпїЅпїЅ пїЅпїЅпїЅпїЅпїЅпїЅ" dt="24012013" /> 
```

不像原来的：

```
<OTPR consignment_number="33504671" weight_of_load="58740" forwarding_railway="22" forwarding_station="330206" consignor="3590" name_of_consignor="ТОВ "КОМПАНIЯ-АГРОIНВЕСТ". 18011\. М. ЧЕРКАСИ. ВУЛ.ДОБРОВОЛЬСЬКОГО, БУД.1 ОФIС 225\. 0472719922." destination_railway="53" destination_station="517508" consignee="9999" name_of_consignee="БУНГЕ РОМАНИЯ СРЛ." packing="2" nhm="12019000" name_of_load="БОБЫ СОЕВЫЕ" dt="24012013" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T18:15:02.507

这是一个老问题，但我在处理一些字符编码问题时遇到了它。这是我发现的。

我认为您需要指定字符编码。

我读到 1251 是俄语的编码，但我以前从未用俄语做过任何事情，所以你的里程可能会有所不同。

```
string url = getUrl();

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(url);
request.Method = WebRequestMethods.Ftp.UploadFile;            
request.Credentials = new NetworkCredential(destination.UserName, destination.Password);
request.UseBinary = true;                        

byte[] bytesToSend = Encoding.GetEncoding(1251).GetBytes(stringToSendToFtp.ToCharArray());

Stream requestStream = request.GetRequestStream();
requestStream.Write(bytesToSend, 0, bytesToSend.Length);
requestStream.Close();            

FtpWebResponse response = (FtpWebResponse)request.GetResponse(); 
```

# php - cURL 连接时间给出重复值

> ID：15129111
> 
> 赞同：0
> 
> 时间：2013-02-28T06:40:56.983
> 
> 标签：php, curl

我正在尝试获取使用 cURL 连接到特定 url 需要多长时间的值。在这段代码中，我有一个数组（$imoniusarasas）中的 url 列表，并使用 cURL 我试图获取每个 url 的连接时间：

```
foreach($imoniusarasas as $url1) {
$curl1 = curl_init();
curl_setopt($curl1, CURLOPT_URL, $url1); 
curl_setopt($curl1, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($curl1, CURLOPT_CONNECTTIMEOUT_MS , 400);
curl_setopt($curl1, CURLOPT_TIMEOUT_MS , 400); 
curl_exec($curl1);

$contime1 = curl_getinfo($curl1, CURLINFO_CONNECT_TIME);

 $imones[$url1] = array( 
                        'conn_time' => $contime1
                       ); 
```

}

然后我将结果放入表中：

```
<?php foreach ($imones as $url => $times) { ?> 
                <tr>
                  <td align=center><?php echo $times['conn_time']; ?></td>
                </tr>
<?php $i++; } ?> 
```

我的问题 - 它为多个 url 显示相同的值（如果我在数组中放置 10 个 url，它将只显示 3 或 4 个唯一结果，其余的将具有相同的值）这应该是这样还是我做错了什么这里？

# iphone - 设置对象的层会导致内存问题吗？

> ID：15129112
> 
> 赞同：0
> 
> 时间：2013-02-28T06:40:57.390
> 
> 标签：iphone, ios, objective-c, quartz-core

我的 cellForRowAtIndexPath 中有以下代码：

```
cell.appImageLogo.layer.cornerRadius = 10.0;  
cell.appImageLogo.layer.masksToBounds = YES;
cell.appImageLogo.layer.borderColor = [UIColor clearColor].CGColor;
cell.appImageLogo.layer.borderWidth = 2.0; 
```

我的问题是：它会导致内存问题吗？如果是，如何释放它消耗的内存？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:15:01.687

如果您的单元格没有被重复使用并且单元格数量不多，或者您的单元格被重复使用，则不会导致内存问题。

如果您的单元格被重用，并且如果`cornerRadius`等`borderColor`属性相同，您可以在该单元格时的语句中编写代码`nil`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"YOURSTRING";
    YourCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){

        cell = [[YourCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        cell.appImageLogo.layer.cornerRadius = 10.0;  
        cell.appImageLogo.layer.masksToBounds = YES;
        cell.appImageLogo.layer.borderColor = [UIColor clearColor].CGColor;
        cell.appImageLogo.layer.borderWidth = 2.0;

        }
        // other different settings for different cells
        return cell;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:37:20.803

它在内存方面没有区别。无论如何，单元都有一个层，并且更改该层上的属性不会影响内存消耗。

顺便说一句，您将边框设置为清晰的颜色是为了什么？当然，这与根本不设置它没有区别吗？

# c# - 递归算法

> ID：15129115
> 
> 赞同：1
> 
> 时间：2013-02-28T06:41:13.353
> 
> 标签：c#, asp.net, file, recursion

嘿，我试图创建目录中所有文件的名称（带扩展名）列表，以及所有文件中的所有文件，但我需要使用递归算法。我不确定我是否走在正确的轨道上！！！对 C# 很陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:49:23.740

我通常用队列做这种事情：

```
// Make sure rootDir exists first...

var files = new List<string>();
var dirs = new Queue<string>();
dirs.Enqueue(rootDir);

while(dirs.Count > 0 ) {

  var dir = dirs.Dequeue();

  foreach( var fileName in Directory.GetFiles(dir) ) {
    files.Add(fileName);
  }

  foreach( var subDir in Directory.GetDirectories(dir) ) {
    dirs.Enqueue(subDir);
  }
}

// Now populate your list with the files collection. 
```

# indexing - 有什么方法可以决定文件夹在elasticsearch中按名称存储索引吗？

> ID：15129121
> 
> 赞同：0
> 
> 时间：2013-02-28T06:41:42.557
> 
> 标签：indexing, elasticsearch

例如。我有两个文件夹，文件夹 1 和文件夹 2，用于存储索引。我想指定 index1（索引名称）存储在文件夹 1 中，并指定文件夹 2 存储索引 2。有什么方法可以支持吗？？？：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:07:09.570

索引已经存储在不同的目录中。默认情况下，`index1`存储在`ES_HOME/elasticsearch/nodes/0/indices/index1`并`index2`存储在`ES_HOME/elasticsearch/nodes/0/indices/index2`. 因此，您可以创建`ES_HOME/elasticsearch/nodes/0/indices/index1`指向 的符号链接和指向的`folder1`符号链接。`ES_HOME/elasticsearch/nodes/0/indices/index2``folder2`

从版本 0.90.0.Beta1 开始，Elasticsearch 使用[存储分发](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/store/distributor/Distributor.java)器来决定文件应该分配到哪个目录。分配器可以基于每个索引进行配置，因此可以创建一个带有分配器的插件，该分配器将始终在特定目录中分配索引。

# java - 将 uiautomator 测试用例与 Android 中的应用程序代码集成

> ID：15129125
> 
> 赞同：3
> 
> 时间：2013-02-28T06:41:54.020
> 
> 标签：java, android, android-ui, android-testing, android-uiautomator

我正在使用 Eclipse IDE。这是我的 uiautomator 测试用例代码：

```
public class caltest extends UiAutomatorTestCase {

    public void testDemo() throws UiObjectNotFoundException, IOException {

    //mytesstcode

    }
} 
```

要运行此测试，我必须从命令行发出以下命令：

1.  /tools/android 创建 uitest-project -n -t 1 -p

2.  转到 build.xml 文件所在的项目目录并构建测试 JAR。---> 蚂蚁构建

3.  使用 adb push 命令将生成的测试 JAR 文件部署到测试设备：---> adb push /data/local/tmp/

4.  ---> adb shell uiautomator runtest jarname.jar -c caltest

有什么方法可以在不使用命令行的情况下运行我的测试，即从 eclipse ide 或从 android 应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:25:51.187

不是现在。我为简化该过程所做的是编写一个 bash 脚本。

例子：

```
#!/bin/bash -xe
ant clean build

adb push bin/AutomatedTests.jar /data/local/tmp/

adb shell uiautomator runtest /data/local/tmp/AutomatedTests.jar -c com.example.tests.SimpleTest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T05:46:53.677

您可以检查[Uiautomator-bot](http://sourceforge.net/projects/uiautomator/)，它可以满足您的需求。您不必使用任何命令行。它还可以同时在多个设备上运行测试用例。有关更多信息，请查看此[链接](http://uiautomator-bot.blogspot.in/)。

# windows-phone-7 - Listbox 和 ObservableCollection，重新填充

> ID：15129126
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:41:54.487
> 
> 标签：windows-phone-7, listbox, observablecollection

我有两个列表框，两个列表框的项目源都是“元素”类型的 ObservableCollections，具体取决于列表框 1 中的选定元素，我想在列表框 2 中显示它的子元素

这是代码的一部分：

```
ObservableCollection< Element> source1 = new ObservableCollection< Element>();
ObservableCollection< Element> source2 = new ObservableCollection< Element>();

Listbox2.ItemsSource = source2; 

public class Element 
 {
     public string Name { get; set; }
     public ObservableCollection< Element> subElements { get; set; }
 }

private void Listbox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
 {
     var items = ((Element)sender).subElements;
     source2 = items;
     // i tried many variants, it never works to (re)populate Listbox2
 } 
```

即使我在尝试用新元素填充它之前清除了 source2 中的所有元素，它也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:47:30.183

您不能`source2`用 的另一个实例替换`ObservableCollection`，因为绑定引用丢失了。您应该使用属性而不是字段，或者只是将所有元素添加到集合中而不是替换引用：

```
private void Listbox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
 {
     var items = ((Element)sender).subElements;
     source.Clear();
     foreach(var i in items)
          source2.Add(i);
 } 
```

# vb.net - 获取上次应用程序启动时间 VB.NET 2010

> ID：15129129
> 
> 赞同：0
> 
> 时间：2013-02-28T06:42:00.650
> 
> 标签：vb.net

我需要我的应用程序显示上次启动和现在之间的时间。我尝试在 My.Settings 中使用属性，但那是只读的，并且无法在每次启动时设置，并且用户范围不是一个选项。

# java - Java NullPointerException 排序数组

> ID：15129130
> 
> 赞同：0
> 
> 时间：2013-02-28T06:42:02.937
> 
> 标签：java, arrays, nullpointerexception

我应该能够`students`按姓氏对数组进行排序，然后是名字。我的`compareTo`方法适用于它，直到最后一次迭代。然后它抛出一个`NullPointerException`，我不知道为什么。我已经在我的书和互联网上搜索了将近 12 个小时。我已经尝试了我找到的所有东西，但仍然没有骰子。

这是程序的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ch11pr112;

import java.io.*;
import java.util.Arrays;
/**
 *
 * @author Tytus
 */
public class CH11PR112{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {
        // TODO code application logic here
        BufferedReader in = new BufferedReader(new FileReader("src//ch11pr112//Students.txt"));
        Student[] students = new Student[100];
        int i = 0;
        double sum = 0;
        String line = in.readLine();
        while (line != null)
        {
            String[] studentParts = line.split(" ");
            String firstName = studentParts[1];
            String lastName = studentParts[0];
            Double score = Double.parseDouble(studentParts[2]);
            students[i] = new Student(firstName, lastName, score);
            sum += score;
            i++;
            line = in.readLine();
        }
        double average = sum / i;
        double x = i;
        Arrays.sort(students);
        for (i = 0; i < x; i++)
        {
            String studentList = students[i].getLastName() + " " + students[i].getFirstName() + " " + students[i].getScore();
            if (students[i].getScore() < (average - 10))
            {
                System.out.println(studentList + " BELOW AVERAGE");
            }
            else
            {
                System.out.println(studentList);
            }
        }
        System.out.println();
        System.out.println("Average:\t" + average);
    }
} 
```

这是我的 Students.txt 文件中的数据：

```
Gator Ali 85
Vator Ella 75
Beam John 60
Beam James 95
Class Lastin 55
Steelman Andrea 95
Murach Joel 92
Lowe Doug 82
Murach Mike 93 
```

这是我的 Student.java 文件中的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ch11pr112;

/**
 *
 * @author Tytus
 */
public class Student implements Comparable<Student>{
    private String firstName;
    private String lastName;
    private double score;

    public Student(String firstName, String lastName, double score)
    {
        this.firstName = firstName;
        this.lastName = lastName;
        this.score = score;
    }

    public String getFirstName()
    {
        return firstName;
    }

    public void setFirstName(String firstName)
    {
        this.firstName = firstName;
    }

    public String getLastName()
    {
        return lastName;
    }

    public void setLastName(String lastName)
    {
        this.lastName = lastName;
    }

    public double getScore()
    {
        return score;
    }

    public void setScore(double score)
    {
        this.score = score;
    }

    @Override
    public int compareTo(Student x) {
        int lastNameCompare = this.lastName.compareToIgnoreCase(x.getLastName()); 
        if (this.lastName != null && x.lastName != null)
        {
            if (lastNameCompare == 0)
            {
                int firstNameCompare =     this.firstName.compareToIgnoreCase(x.getFirstName()); 
                if (this.firstName != null && x.firstName != null)
                { 
                    if (firstNameCompare == 0)
                        {
                        return 0;
                    }
                    else if (firstNameCompare > 0)
                    {
                        return 1;
                    }
                    else if (firstNameCompare < 0)
                    {
                        return - 1;
                    }
                }
            }
            else if (lastNameCompare > 0)
            {
                return 1;
            }
            else if (lastNameCompare < 0)
            {
                return - 1;
            }
        }
        return 0;
    }
} 
```

出于某种原因，它在文件`NullPointerException`的第 232 行（`if (pivot.compareTo(a[mid]) < 0)`）的最后一次迭代期间创建了一个`ComparableTimSort.java`。

问题是`NullPointerException`如果`lastName`或`firstName`变量是`null`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:51:50.630

我不相信您可以使用 Arrays.sort 对包含空值的数组进行排序，因为最终它会遇到您所拥有的情况`pivot == null`，因此您尝试进行比较

```
null.compareTo(Object) < 0 
```

[请参阅Arrays API](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5b%5d%29)顶部的警告

> 如果指定的数组引用为空，则此类中的方法都会抛出 NullPointerException，除非另有说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:42:13.990

```
public static void main(String[] args) throws Exception {
     BufferedReader in = new BufferedReader(new FileReader("src//ch11pr112//Students.txt"));
     String strLine;
     int count = 0;
     while ((strLine = in.readLine()) != null)   {
       count++;
     }
      Student[] students = new Student[count];
     int i = 0;
     double sum = 0;
     in = new BufferedReader(new FileReader("src//ch11pr112//Students.txt"));
     String line = in.readLine();
     System.out.println(line);
     while (line != null)
     {
         String[] studentParts = line.split(" ");
         String firstName = studentParts[1];
         String lastName = studentParts[0];
         Double score = Double.parseDouble(studentParts[2]);
         students[i] = new Student(firstName, lastName, score);
         sum += score;
         i++;
         line = in.readLine();
     }
     double average = sum / i;
     double x = i;
     for(int w=0;w<students.length;w++)
     System.out.println(students[w]);
     Arrays.sort(students);
     for (i = 0; i < x; i++)
     {
         String studentList = students[i].getLastName() + " " + students[i].getFirstName() + " " + students[i].getScore();
         if (students[i].getScore() < (average - 10))
         {
             System.out.println(studentList + " BELOW AVERAGE");
         }
         else
         {
             System.out.println(studentList);
         }
     }
     System.out.println();
     System.out.println("Average:\t" + average);
 } 
```

# javascript - = +_ 在 JavaScript 中是什么意思

> ID：15129137
> 
> 赞同：257
> 
> 时间：2013-02-28T06:42:28.093
> 
> 标签：javascript, operators

我想知道**= +_**运算符在 JavaScript 中的含义。它看起来像是在做作业。

例子：

```
hexbin.radius = function(_) {
   if (!arguments.length)
       return r;
   r = +_;
   dx = r * 2 * Math.sin(Math.PI / 3);
   dy = r * 1.5;
   return hexbin;
}; 
```

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2013-02-28T06:44:08.977

```
r = +_; 
```

*   `+`尝试将任何`_`内容转换为数字。
*   `_`只是一个变量名（不是运算符），它可以是`a`等`foo`。

**例子：**

```
+"1" 
```

将“1”转换为纯数字 1。

```
var _ = "1";
var r = +_; 
```

`r`是现在`1`，不是`"1"`。

此外，根据[算术运算符的 MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)：

> 一元加运算符在其操作数之前并计算其操作数**，但如果它还不是，则尝试将其转换为数字**。*[...]*它可以转换整数和浮点数的字符串表示形式，以及非字符串值`true`、`false`和`null`. 支持十进制和十六进制 ( `"0x"`-prefixed) 格式的整数。支持负数（虽然不支持十六进制）。如果它无法解析特定值，它将评估为`NaN`.

还注意到，

> 一元加法是将某物转换为数字的最快和首选方法

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-02-28T06:45:11.187

它不是赋值运算符。

*   `_`只是传递给函数的参数。

    ```
    hexbin.radius = function(_) {
                    //       ^ It is passed here
        // ...
    }; 
    ```

*   在下一行`r = +_;` `+`中，infront 将该变量 ( `_`) 转换为数字或整数值并将其分配给变量`r`

**不要将其与`+=`操作员混淆**

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-02-28T06:44:41.013

`=+`实际上是**两个**运算符`=`是赋值`+`和 `_`是变量名。

像：

```
i = + 5;
or 
j = + i;
or 
i = + _; 
```

我的以下代码将帮助您展示`=+`将*字符串* 转换为*int*的用法。
例子：

```
y = +'5'
x = y +5
alert(x); 
```

输出**10**

**使用：**所以这里`y`是 int`5`因为`=+`
**否则：**

```
y = '5'
x = y +5
alert(x); 
```

输出**55**

as`_`是一个变量。

```
_ = + '5'
x = _ + 5
alert(x) 
```

输出**10**

**此外，** 知道您也可以使用`~`(if string is *int* string *(float will be round of to int) 来*实现 同样的事情会很有趣

```
y = ~~'5'  // notice used two time ~
x = y  + 5
alert(x); 
```

也输出**10**

`~`is bitwise NOT ：反转其操作数的位。我做了两次，幅度没有变化。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-28T06:44:38.903

不是`=+`。在 JavaScript 中，`+`表示将其更改为数字。

`+'32'`返回 32。

`+'a'`返回 NaN。

所以你可以用`isNaN()`它来检查它是否可以变成数字。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-02-28T12:59:26.270

这是一个偷偷摸摸的。

要理解的重要一点是，这里的下划线字符**实际上是一个变量名**，而不是一个运算符。

前面的加号是下划线的正数值——即有效地将下划线变量转换为int。您可以使用 实现相同的效果`parseInt()`，但这里可能使用加号转换，因为它更简洁。

这只是将等号作为标准变量赋值。

它可能不是*故意*写来混淆的，因为有经验的 Javascript 程序员通常会将下划线识别为变量。但是如果你不知道那肯定是很混乱的。我当然不会那样写。在最好的情况下，我不喜欢短的无意义的变量名——如果你想在 JS 代码中使用短的变量名来节省空间，请使用缩小器；不要以短变量开头。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-02-28T06:50:49.807

= +_ 将 _ 转换为数字。

所以

```
var _ = "1",
   r = +_;
console.log(typeof r) 
```

会输出数字。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-02-28T06:45:50.787

我想你的意思是`r = +_;`？在这种情况下，它是将参数转换为 a `Number`。说`_`是'12.3'，然后`+'12.3'`返回`12.3`。所以在引用的语句`+_`中赋值给`r`.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-03-01T07:41:56.613

`_`只是一个变量名，作为函数的参数传递`hexbin.radius`，并将`+`其转换为数字

让我做一个和你的函数一样的例子。

```
var hexbin = {},r  ;

hexbin.radius = function(_) {
   if (!arguments.length)
      return r;
   console.log( _ , typeof _ )    
   r = +_;
   console.log( r , typeof r , isNaN(r) );   
} 
```

并运行此示例函数 .. 输出

**hexbin.radius("1");**

```
1 string
1 number false 
```

**hexbin.radius(1);**

```
1 number
1 number false 
```

**hexbin.radius([]);**

```
[] object
0 number false 
```

**hexbin.radius('a');**

```
a string
NaN number true 
```

**hexbin.radius({});**

```
Object {} object
NaN number true 
```

**hexbin.radius（真）；**

```
true boolean
1 number false 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-02-28T06:45:48.313

它将为左侧变量分配一个新值。

```
var a=10;
var b="asg";
var c=+a;//return 10
var d=-a;//return -10
var f="10";

var e=+b;
var g=-f;

console.log(e);//NAN
console.log(g);//-10 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-03-27T17:31:01.077

简单地说，`+_` ***相当于***使用[Number()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)构造函数。

事实上，它甚至适用于日期：

```
var d = new Date('03/27/2014');
console.log(Number(d)) // returns 1395903600000
console.log(+d) // returns 1395903600000 
```

演示：http: [//jsfiddle.net/dirtyd77/GCLjd/](http://jsfiddle.net/dirtyd77/GCLjd/)

* * *

更多信息也可以[在 MDN - 一元加号 (+) 部分](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_plus_(.2B))找到：

> 一元加号运算符在其操作数之前并计算其操作数，但如果尚未转换为数字，则尝试将其转换为数字。虽然一元否定 (-) 也可以转换非数字，但一元加号是将某物转换为数字的最快和首选方法，因为它不对数字执行任何其他操作。它可以转换整数和浮点数的字符串表示形式，以及非字符串值 true、false 和 null。支持十进制和十六进制（“0x”前缀）格式的整数。支持负数（虽然不支持十六进制）。如果它无法解析特定值，它将评估为 NaN。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-07-17T03:42:01.613

`+_`几乎**等同**于`parseFloat(_)`。请注意，`parseInt`它将停在非数字字符（例如点）处，而`parshFloat`不会。

经验：

```
 parseFloat(2.4) = 2.4 
vs 
    parseInt(2.4) = 2 
vs 
    +"2.4" = 2.4 
```

经验：

```
var _ = "3";
    _ = +_;

console.log(_); // will show an integer 3 
```

很少有区别：

*   空字符串`""`计算为 a `0`，而 parseInt() 计算为`NaN`
*   更多信息请看这里：**[parseInt vs unary plus - when to use which](https://stackoverflow.com/questions/17106681/parseint-vs-unary-plus-when-to-use-which)**

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-05-15T15:16:49.150

在这个表达式中：

```
r = +_; 
```

*   '+' 在这里充当一元运算符，尝试***转换***右操作数的值。它不转换操作数，而是转换评估值。`_`如果原来是这样，那么将保持“1”，但`r`将成为纯数字。

考虑这些情况是否要应用 + 进行数字转换

```
+"-0" // 0, not -0
+"1" //1
+"-1" // -1
+"" // 0, in JS "" is converted to 0
+null // 0, in JS null is converted to 0
+undefined // NaN
+"yack!" // NaN
+"NaN" //NaN
+"3.14" // 3.14

var _ = "1"; +_;_ // "1"
var _ = "1"; +_;!!_ //true
var _ = "0"; +_;!!_ //true
var _ = null; +_;!!_ //false 
```

不过，它是最快的数字转换器，如果使用的话，我几乎不建议过度使用它。`parseInt/parseFloat`是更好的可读性替代方案。

# vb.net - 如何以编程方式处理网络浏览器对话框

> ID：15129139
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:42:34.120
> 
> 标签：vb.net, webbrowser-control

我需要以编程方式单击对话框的“确定”按钮，当我单击 vb.net 的 webbrowser 控件中的网站按钮时，会出现该对话框。但是当那个盒子出现时，一切都超出了我的控制，我什么也做不了。

![在此处输入图像描述](../Images/c0a19827753e9af5932c54fb066e2966.png)

```
<input type="submit" name="ctl00$ContentPlaceHolder1$FormView1$btnApprove" value="Onayla" onclick="return confirm('Bu kişi sisteme kayıt edilecektir. Devam etmek istiyor musunuz?');" id="ctl00_ContentPlaceHolder1_FormView1_btnApprove" style="width:100%;" /> 
```

您知道如何单击这些按钮中的任何一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:44:20.563

我最近遇到了同样的问题。

我找到了关于这个问题的教程，这是链接：

[http://stateofidleness.com/2011/08/vbnet-webbrowser-dialog-popup-automatic-handling/](http://stateofidleness.com/2011/08/vbnet-webbrowser-dialog-popup-automatic-handling/)

# batch-file - 在文件中找到一个字符？

> ID：15129142
> 
> 赞同：0
> 
> 时间：2013-02-28T06:42:44.573
> 
> 标签：batch-file

我正在尝试使用 find 或 findstr 在文件中查找某些字符？例如文件内容，如：

> "/test/abctest/abci.txt = c:\abctest\tst\work\workt.txt; **abc** _test1"
> "/test/abctest/abci.txt = c:\abctest\tst\work\workt.txt; **abc** .test2"
> "/test/abctest/abci.txt = c:\abctest\tst\work\workt.txt; **(abc)** test3"
> "/test/abctest/abci.txt = c:\abctest\tst\work\ workt.txt; **abc** _test4"

...等等...我想在文件中找到最后一个 abc（粗体部分）。这个文件非常大，所以我不想使用任何 for 循环来查找字符。你能建议我任何解决方案吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:45:32.447

不确定这是否是您想要的正则表达式，但如果您只想在正则表达式匹配时退出，那么

```
findstr /i ";[^a-z]*[a-z][a-z][a-z][^a-z]" datafile.txt >NUL && exit /b 
```

`/;\W?\w{3}\W/`这会以更明智的正则表达式表示法执行不区分大小写的搜索。如果找到，`exit /b`，否则什么都不做。

# c++ - 未正确初始化的布尔向量

> ID：15129145
> 
> 赞同：-2
> 
> 时间：2013-02-28T06:42:51.757
> 
> 标签：c++

我已经初始化了一个`vector`，`bools`但由于某种原因，一切都设置为`false`。为什么我不能设置 a `vector`of `bool`to `true`？

```
#include <iostream>
#include <vector>

int main()
{
  std::vector<bool> d_WFlag;
  int d_numGrids = 4;
  d_WFlag.resize(d_numGrids);

  d_WFlag[0] = false;
  std::cout << std::noboolalpha << d_WFlag[0] << " == " << std::boolalpha << d_WFlag[0] << std::endl;
  for(int i = 1; i < (d_numGrids - 1); ++i)
  {
    d_WFlag.push_back(true);
    std::cout << std::noboolalpha << d_WFlag[i] << " == " << std::boolalpha << d_WFlag[i] << std::endl;
  }
  d_WFlag[d_numGrids - 1] = false;
  std::cout << std::noboolalpha << d_WFlag[d_numGrids - 1] << " == " << std::boolalpha << d_WFlag[d_numGrids - 1] << std::endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T06:47:22.760

`d_WFlag.push_back(true);` **向向量添加**一个*新条目*，它不会*更改*任何旧条目！也就是说，如果向量最初具有`N`元素，则`d_WFlag.push_back(true);`将使向量具有`N+1`元素。

如果要修改 index 处的现有元素`i`，请执行以下操作：

```
d_WFlag[i] = true; //it modifies! 
```

where`i`必须是一个有效的索引，否则上面的代码会调用未定义的行为。

如果您怀疑这`i` 可能是无效索引，则可以使用`at()`：

```
d_WFlag.at(i) = true; 
```

无效时抛出`std::out_of_range`异常。`i`

要知道什么时候`[]`比什么时候好`at()`，什么时候比`at()`好`[]`，看这个：

*   [为什么在 C++ 中使用“vector.at(x)”比使用“vector[x]”更好？](https://stackoverflow.com/questions/11172144/why-is-using-vector-atx-better-than-vectorx-in-c)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:48:15.427

您可以，但是您正在做的是从 0 循环到 < 3 (2)。

在行上`d_WFlag.resize(d_numGrids)`，您创建一个看起来像这样的向量： `[0] = false, [1] = false, [2] = false, [3] = false`。

稍后您从`0 to < 3`. 您将使用这些值进入循环`[0,1,2]`，所有这些值都已初始化为**false**。

[在您调用 ( push_back](http://www.cplusplus.com/reference/vector/vector/push_back/) )的循环中，它将元素附加到向量的末尾。第一个将在**d_WFlag[4]**中，该元素永远不会打印。

尝试设置它`d_WFlag[i] = true;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T06:48:42.437

仅当您阅读`std::vector::push_back()`...的文档时，它才会将一个元素**附加**到向量的末尾。所以你要做的是“添加 true 作为第 5 项，然后打印第一项；添加 true 作为第六项，然后打印第二项......” etv.

要更改已经存在的元素，请使用`operator[]`：

```
d_WFlag[i] = true; 
```

而且，顺便说一句，`for`循环中的结束条件必须是`i < dNumGrids`，否则你不设置最后一项。

# ruby-on-rails - Omniauth 不工作

> ID：15129147
> 
> 赞同：1
> 
> 时间：2013-02-28T06:43:03.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, omniauth

所以我已经安装了 Omniauth gem，它目前是用 Devise 实现的。

Devise 运行良好，但是设置 Omniauth 是一场战斗，我仍在努力解决这个问题。我正在使用 Omniauth 和 Twitter 身份验证。

***问题：***当我单击“使用 twitter 登录”图标时，它会将我重新定向到 twitter，然后提示我输入我的 twitter 凭据..一切都很好，直到它开始重定向（回调）。

当它尝试重定向到我的应用程序时，我收到以下错误：

### AuthenticationsController#create 中的 NoMethodError

```
undefined method `[]' for nil:NilClass

app/models/user.rb:14:in `apply_omniauth'
app/controllers/authentications_controller.rb:14:in `create' 
```

***注册控制器：***

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  private

  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

***身份验证控制器：***

```
class AuthenticationsController < ApplicationController
  def create
    omniauth = request.env["omniauth.auth"]
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    elsif current_user
      current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
      flash[:notice] = "Authentication successful."
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save
        flash[:notice] = "Signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
      end
    end
  end
end 
```

***User.rb（用户控制器）***

```
class User < ActiveRecord::Base
  has_many :authentications

  # Include default devise modules. Others available are:
  # :token_authenticatable, :lockable, :timeoutable and :activatable
  devise :database_authenticatable, :registerable, 
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation
  # attr_accessible :title, :body

  def apply_omniauth(omniauth)
    self.email = omniauth['user_info']['email'] if email.blank?
    authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid'])

  end

  def password_required?
    (authentications.empty? || !password.blank?) && super
  end
end 
```

# 请阅读更新：

> 我刚刚在 RailsCast 之后遇到了这个问题。
> 
> 该教程说要运行：
> 
> rails g nifty:scaffold authentication user_id:integer \ provider:string uid:string index create destroy
> 
> 但是我的机器上没有漂亮的脚手架东西，我只是跑了
> 
> rails g 脚手架身份验证 user_id:integer \ provider:string uid:string index create destroy
> 
> 其行为不同。它没有创建存根“index”、“create”和“destroy”控制器方法，而是在数据库中创建了字段。
> 
> ## 如何删除字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:53:01.150

尝试更换

```
omniauth['user_info']['email'] 
```

经过

```
omniauth['email'] 
```

你可以使用这样的包装方法

更新：omniauth 的包装器

```
def omni_conversion(omniauth)
    {
      # Required For Social Network Creation
      access_token: omniauth.credentials.token,
      link: omniauth.extra.raw_info.link,
      provider: omniauth.provider,
      providerid: omniauth.uid,

      # Required For User Creation
      birthday: omniauth.extra.raw_info.birthday,
      email: omniauth.info.email,
      first_name: omniauth.info.first_name,
      gender: omniauth.extra.raw_info.gender,
      last_name: omniauth.info.last_name,
      middle_name: omniauth.info.middle_name,
      picture: omniauth.info.image,
      timezone: omniauth.info.timezone,
      username: omniauth.extra.raw_info.username
     }
  end

omniauth = omni_conversion(omniauth) 
```

优点是您可以直接使用符号。您可以将它们直接传递给模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:59:10.067

在你的`User.rb`第 14 行

而不是`omniauth['user_info']['email']`应该`omniauth['info']['email']`

对于[漂亮的发电机](https://github.com/ryanb/nifty-generators)，你应该有

`gem "nifty-generators", group: :development`

在你 Gemfile

尝试`rails g scaffold --help`查看脚手架生成器的可用选项

你也可以看看这个惊人的 rails-cast [generators-in-rails-3](http://railscasts.com/episodes/216-generators-in-rails-3?view=asciicast)

# android - 用于 android 的印地语文本到语音引擎

> ID：15129148
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:43:05.040
> 
> 标签：android, text-to-speech

我一直在尝试在我的应用程序中实现文本到语音功能......它适用于一些 8 种基本语言，如英语、法语、德语......但没有如何获得其他语言，如印地语。我想用印地语实现文本到语音的功能。我找不到任何印地语文本到语音的引擎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:47:41.910

这是一个支持印地语的文本到语音引擎

[http://www.blissit.org/](http://www.blissit.org/)

eSpeak TTS 引擎支持印地语，但质量不是很好。

[https://play.google.com/store/apps/details?id=com.googlecode.eyesfree.espeak](https://play.google.com/store/apps/details?id=com.googlecode.eyesfree.espeak)

# javascript - Function.prototype.call() 和 Function.prototype.bind() 有什么区别？

> ID：15129149
> 
> 赞同：1
> 
> 时间：2013-02-28T06:43:09.750
> 
> 标签：javascript

我浏览了 MDN 文档，但我并没有真正理解 call() 和 bind() 之间的区别。他们似乎都在做同样的事情——改变`this`函数内部的上下文。那么它们之间究竟有什么区别呢？什么时候应该使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:45:56.177

`call`实际上调用具有指定上下文的函数，同时`bind`返回一个新函数，该函数在调用时将使用指定的上下文。一个使用的例子`bind`是设置一个事件监听器，通常上下文会被设置为触发事件的对象。您可以使用 bind 创建一个使用您自己的上下文的函数并将其作为侦听器函数传递。

# objective-c - 我们应该在 UIView 的 dealloc 中删除观察者吗？

> ID：15129151
> 
> 赞同：1
> 
> 时间：2013-02-28T06:43:10.363
> 
> 标签：objective-c

```
-(void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:USERBOOKMARKANDLIKEOBTAINED object:nil];
} 
```

我的意思是，当对象即将被释放时，观察者不会删除它吗？我听说他们使用 nil 指向观察者的指针或其他东西。或者通知保持对对象的强引用，这意味着无论如何都不会调用dealloc（内存泄漏）。

那我做的对吗？

顺便说一下，该类继承自 UIView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:44:48.537

> 我的意思是，当对象即将被销毁时，观察者不会自行删除它吗？

如果您使用您提供的代码，它确实如此。否则它不会。（通知中心如何知道对象已被释放？）

# java - 当我将此查询发送到 postgres 数据库时，WSO2 DSS 无法正常工作，它显示错误

> ID：15129153
> 
> 赞同：1
> 
> 时间：2013-02-28T06:43:15.877
> 
> 标签：java, types, wso2, wso2esb, wso2dss

这是 WSO2DSS 的错误，或者它没有未来我正在将时代值从 WSO2 ESB 发送到 WSO2 DSS 并触发这个自定义查询

```
INSERT INTO public.emp2(e_device,e_amount,e_no,jointime) VALUES(?,?,?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + 15555565225/1000 * INTERVAL '1 second')) 
```

但它显示错误我的 DSS 配置是这样的

```
<query id="insert_emp2_query" useConfig="default">
      <sql>INSERT INTO public.emp2(e_device,e_amount,e_no,jointime) VALUES(?,?,?,(SELECT TIMESTAMP  'epoch' + ?/1000 * INTERVAL '1 second'))</sql>
      <param name="e_device" ordinal="1" sqlType="STRING"/>
      <param name="e_amount" ordinal="2" sqlType="STRING"/>
      <param name="e_no" ordinal="3" sqlType="INTEGER"/>
      <param name="jointime" ordinal="4" sqlType="TIMESTAMP"/>
   </query 
```

WSO2 DSS端的错误是这样的

```
Nested Exception:-
java.lang.NumberFormatException: date string can not be less than 19 characters

<soapenv:Reason>
      <soapenv:Text xml:lang="en-US" xmlns:xml="http://www.w3.org/XML/1998/namespace">DS Fault Message: Error in DS non result invoke.
DS Code: DATABASE_ERROR
Nested Exception:-
javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'SQLQuery.processNormalQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: emp2_DataService
Location: /emp2_DataService.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: insert_emp2_operation
Current Params: {jointime=1361855692325, e_amount=5, e_no=5, e_device=5}
Nested Exception:-
java.lang.NumberFormatException: date string can not be less than 19 characters

</soapenv:Text>
   </soapenv:Reaso 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T02:16:19.397

由于您已将加入时间作为时间戳，因此在为加入时间提供值时，您需要按以下方式提供输入。

```
1990-01-01T00:00:00 
```

然后你可以避免这个错误

# jquery - 用于选择 XML 节点的 jQuery 语法

> ID：15129157
> 
> 赞同：2
> 
> 时间：2013-02-28T06:43:35.217
> 
> 标签：jquery, dynamics-crm-2011

我们目前正在准备使用 UR 12 升级 CRM 2011，升级后有一些 javascript 可能会中断。

XML 相关函数是一些突出显示为潜在代码的函数。所以我想用等效的 JQuery 替换这些函数，但对 jQuery 不太了解

假设“结果”是来自 xmlhttprequest 的 XML 响应，我们如何将以下代码转换为使用 jquery

```
result.selectNodes("//EntityMetadata/DisplayName/LocLabels/LocLabel/Label"); 
```

会像

```
$(result).find(("//EntityMetadata/DisplayName/LocLabels/LocLabel/Label"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:50:55.810

似乎 jQuery[曾经有过基本的 XPath 支持](http://docs.jquery.com/API/1.1.2/DOM/Traversing/Selectors#XPath_Selectors)。然而，这似乎不再是这样了。您可能会发现[*JavaScript 中的跨浏览器 XPath 实现*](https://stackoverflow.com/questions/183369/cross-browser-xpath-implementation-in-javascript)很有趣。

此外，不*要求*结果`XMLHttpRequest`是 XML。它可以是文本、JSON、二进制数据等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:03:04.457

*尽管这没有考虑到您关于 jQuery 的问题，但它显示了 CRM SDK 中描述的一种方式。*

查看[JavaScript 最佳实践文章](http://msdn.microsoft.com/en-us/library/b7840a25-f25e-409b-8b6a-0ef04c7ed9c4#BKMK_JavaScriptBestPractices)。本文链接到[一个示例，其中](http://msdn.microsoft.com/en-us/library/gg594428)显示了 selectNode 的兼容实现

```
function _selectNodes(node, XPathExpression) {
  if (typeof (node.selectNodes) != "undefined") {
   return node.selectNodes(XPathExpression);
  }
  else {
   var output = [];
   var XPathResults = node.evaluate(XPathExpression, node, _NSResolver, XPathResult.ANY_TYPE, null);
   var result = XPathResults.iterateNext();
   while (result) {
    output.push(result);
    result = XPathResults.iterateNext();
   }
   return output;
  }
 }; 
```

# javascript - HTML 画布图像

> ID：15129163
> 
> 赞同：4
> 
> 时间：2013-02-28T06:43:46.227
> 
> 标签：javascript, html5-canvas, canvg

我正在使用 AMcharts 绘制图表。我需要以 pdf 格式显示图表。因此，我已将图形转换为 png 图像并以 pdf 格式显示。此过程在除 IE9 之外的现代浏览器中成功运行。

我的问题仅在 IE9 中。

我在 div 容器中有两个 svg 标签。正如我所料，第二个 svg 标签被完美解析。但是第一个 svg 标签显示为空白图像。

我将 canvg.js 用于 html 画布。

```
<script src="http://canvg.googlecode.com/svn/trunk/canvg.js" type="text/javascript"></script>
<script src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js" type="text/javascript"></script>
<script src="http://www.amcharts.com/lib/amcharts.js" type="text/javascript"></script>
<script type="text/javascript">

        var chart;
        var chartData = [];

        AmCharts.ready(function () {
        // generate some random data first
        generateChartData();

        // SERIAL CHART    
        chart = new AmCharts.AmSerialChart();
        chart.pathToImages = "http://amcharts.com/lib/samples/stock/images/";
        chart.zoomOutButton = {
            backgroundColor: '#000000',
            backgroundAlpha: 0.15
        };
        chart.dataProvider = chartData;
        chart.categoryField = "date";

        // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
        chart.addListener("dataUpdated", zoomChart);

        // AXES
        // category                
        var categoryAxis = chart.categoryAxis;
        categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
        categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
        categoryAxis.dashLength = 2;
        categoryAxis.gridAlpha = 0.15;
        categoryAxis.axisColor = "#DADADA";

        // first value axis (on the left)
        var valueAxis1 = new AmCharts.ValueAxis();
        valueAxis1.axisColor = "#FF6600";
        valueAxis1.axisThickness = 2;
        valueAxis1.gridAlpha = 0;
        chart.addValueAxis(valueAxis1);

        // second value axis (on the right) 
        var valueAxis2 = new AmCharts.ValueAxis();
        valueAxis2.position = "right"; // this line makes the axis to appear on the right
        valueAxis2.axisColor = "#FCD202";
        valueAxis2.gridAlpha = 0;
        valueAxis2.axisThickness = 2;
        chart.addValueAxis(valueAxis2);

        // third value axis (on the left, detached)
        valueAxis3 = new AmCharts.ValueAxis();
        valueAxis3.offset = 50; // this line makes the axis to appear detached from plot area
        valueAxis3.gridAlpha = 0;
        valueAxis3.axisColor = "#B0DE09";
        valueAxis3.axisThickness = 2;
        chart.addValueAxis(valueAxis3);

        // GRAPHS
        // first graph
        var graph1 = new AmCharts.AmGraph();
        graph1.valueAxis = valueAxis1; // we have to indicate which value axis should be used
        graph1.title = "red line";
        graph1.valueField = "visits";
        graph1.bullet = "round";
        graph1.hideBulletsCount = 30;
        chart.addGraph(graph1);

        // second graph                
        var graph2 = new AmCharts.AmGraph();
        graph2.valueAxis = valueAxis2; // we have to indicate which value axis should be used
        graph2.title = "yellow line";
        graph2.valueField = "hits";
        graph2.bullet = "square";
        graph2.hideBulletsCount = 30;
        chart.addGraph(graph2);

        // third graph
        var graph3 = new AmCharts.AmGraph();
        graph3.valueAxis = valueAxis3; // we have to indicate which value axis should be used
        graph3.valueField = "views";
        graph3.title = "green line";
        graph3.bullet = "triangleUp";
        graph3.hideBulletsCount = 30;
        chart.addGraph(graph3);

        // CURSOR
        var chartCursor = new AmCharts.ChartCursor();
        chartCursor.cursorPosition = "mouse";
        chart.addChartCursor(chartCursor);

        // SCROLLBAR
        var chartScrollbar = new AmCharts.ChartScrollbar();
        chart.addChartScrollbar(chartScrollbar);

        // LEGEND
        var legend = new AmCharts.AmLegend();
        legend.marginLeft = 110;
        chart.addLegend(legend);

        // WRITE
        chart.write("chartdiv");
        });

        // generate some random data, quite different range
        function generateChartData() {
        var firstDate = new Date();
        firstDate.setDate(firstDate.getDate() - 50);

        for (var i = 0; i < 50; i++) {
            var newDate = new Date(firstDate);
            newDate.setDate(newDate.getDate() + i);

            var visits = Math.round(Math.random() * 40) + 100;
            var hits = Math.round(Math.random() * 80) + 500;
            var views = Math.round(Math.random() * 6000);

            chartData.push({
            date: newDate,
            visits: visits,
            hits: hits,
            views: views
            });
        }
        }

        // this method is called when chart is first inited as we listen for "dataUpdated" event
        function zoomChart() {
        // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
        chart.zoomToIndexes(10, 20);
        }

/*
 * Export.js - AmCharts to PNG
 * Benjamin Maertz (tetra1337@gmail.com)
 *
 * Requires:    rgbcolor.js - http://www.phpied.com/rgb-color-parser-in-javascript/
 *                 canvg.js - http://code.google.com/p/canvg/
 *                amcharts.js - http://www.amcharts.com/download
 */

// Lookup for required libs
if ( typeof(AmCharts) === 'undefined' || typeof(canvg) === 'undefined' || typeof(RGBColor) === 'undefined' ) {
    throw('Woup smth is wrong you might review that http://www.amcharts.com/forum/viewtopic.php?id=11001');
}

// Define custom util
AmCharts.getExport = function(anything) {
    /*
    ** PRIVATE FUNCTIONS
    */

    // Word around until somebody found out how to cover that
    function removeImages(svg) {
    var startStr    = '<image';
    var stopStr        = '</image>';
    var start        = svg.indexOf(startStr);
    var stop        = svg.indexOf(stopStr);
    var match        = '';

    // Recursion
    if ( start != -1 && stop != -1 ) {
        svg = removeImages(svg.slice(0,start) + svg.slice(stop + stopStr.length,svg.length));
    }
    return svg;
    };

    // Senseless function to handle any input
    function gatherAnything(anything,inside) {
    switch(String(anything)) {
        case '[object String]':
        if ( document.getElementById(anything) ) {
            anything = inside?document.getElementById(anything):new Array(document.getElementById(anything));
        }
        break;
        case '[object Array]':
        for ( var i=0;i<anything.length;i++) {
            anything[i] = gatherAnything(anything[i],true);
        }
        break;

        case '[object XULElement]':
        anything = inside?anything:new Array(anything);
        break;

        case '[object HTMLDivElement]':
        anything = inside?anything:new Array(anything);
        break;

        default:
        anything = new Array();
        for ( var i=0;i<AmCharts.charts.length;i++) {
            anything.push(AmCharts.charts[i].div);
        }
        break;
    }
    return anything;
    }

    /*
    ** varibales VARIABLES!!!
    */
    var chartContainer    = gatherAnything(anything);
    var chartImages        = [];
    var canvgOptions    = {
    ignoreAnimation    :    true,
    ignoreMouse        :    true,
    ignoreClear        :    true,
    ignoreDimensions:    true,
    offsetX            :    0,
    offsetY            :    0
    };

    /*
    ** Loop, generate, offer
    */

    // Loop through given container
    for(var i1=0;i1<chartContainer.length;i1++) {
    var canvas        = document.createElement('canvas');
    var context        = canvas.getContext('2d');
    var svgs        = chartContainer[i1].getElementsByTagName('svg');
    var image        = new Image();
    var heightCounter = 0;

    // Set dimensions, background color to the canvas
    canvas.width    = chartContainer[i1].offsetWidth;
    canvas.height    = chartContainer[i1].offsetHeight;
    context.fillStyle = '#FFFFFF';
    context.fillRect(0,0,canvas.width,canvas.height);

    // Loop through all svgs within the container
    for(var i2=0;i2<svgs.length;i2++) {

        var wrapper        = svgs[i2].parentNode;
        var clone        = svgs[i2].cloneNode(true);
        var cloneDiv    = document.createElement('div');
        var offsets        = {
        x:    wrapper.style.left.slice(0,-2) || 0,
        y:    wrapper.style.top.slice(0,-2) || 0,
        height:    wrapper.offsetHeight,
        width:    wrapper.offsetWidth
        };

        // Remove the style and append the clone to the div to receive the full SVG data
        clone.setAttribute('style','');
        cloneDiv.appendChild(clone);
        innerHTML = removeImages(cloneDiv.innerHTML); // without imagery

        // Apply parent offset
        if ( offsets.y == 0 ) {
        offsets.y = heightCounter;
        heightCounter += offsets.height;
        }

        canvgOptions.offsetX = offsets.x;
        canvgOptions.offsetY = offsets.y;

        // Some magic beyond the scenes...
        canvg(canvas,innerHTML,canvgOptions);
    }
        //console.log(canvas);return false;
    // Get the final data URL and throw that image to the array

    image.src = canvas.toDataURL();
    chartImages.push(image);
    }
    // Return DAT IMAGESS!!!!
    return chartImages
}

// Function to show the export in the document
function exportThis(opt) {
    var items = AmCharts.getExport('chartdiv');
    document.getElementById('button').innerHTML = 'Update Export';
    document.getElementById('not_button').innerHTML = '';
    for ( index in items ) {
    document.getElementById('not_button').appendChild(items[index]);        
    }
}

</script>

<div id="chartdiv" style="width:100%; height:400px; margin-bottom:10px;"></div>
<button id="button" onclick="exportThis();">Export</button>
<div id="not_button"></div> 
```

请帮我解决这个问题。这是我的第一篇文章。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:55:57.350

更新您的 removeimages 功能。它会起作用的。

```
function removeImages(svg) {
    var startStr    = '<image';
    var stopStr        = '</image>';
    if(navigator.userAgent.toLowerCase().match('msie')) {
        var stopStr        = 'gif" />';
    }
    var start        = svg.indexOf(startStr);
    var stop        = svg.indexOf(stopStr);
    var match        = '';

    // Recursion
        if ( start != -1 && stop != -1 ) {
            svg = removeImages(svg.slice(0,start) + svg.slice(stop + stopStr.length,svg.length));
    }
    console.log(svg);
        return svg;
}; 
```

Amcharts 在 IE9 中自己创建结束标记。所以就是这样。如果 svg 标记中存在图像标记，则 todataURL 将不起作用。

# r - 根据R中的条件计算列之间的比率

> ID：15129169
> 
> 赞同：5
> 
> 时间：2013-02-28T06:44:08.447
> 
> 标签：r

嗨，我在这里做一件非常简单的事情。

我有 3 列数据；a、b 和 c。当b的值仅大于5时，我想计算b和c的比率。

我使用的代码如下：

```
a <- c(1,2,3,4,5,6,7,8)
b <- c(2,4,5,8,10,12,15,18)
c <- c (10,9,8,15,31,12,13,12)

df <- data.frame(a,b,c)
 ## Calculate the ratio 
df$d <- with(df,b/c) 
```

我计算了比率，但无法使用那里的条件。我知道它微不足道，但这需要很多时间。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T06:47:23.247

您可以使用`ifelse`. 在 b 小于 5 的情况下，你不会说你想要的结果是什么，所以我假设你想要`NA`那里。：

```
> df$d <- with(df, ifelse(b > 5, b/c, NA))
> df
  a  b  c         d
1 1  2 10        NA
2 2  4  9        NA
3 3  5  8        NA
4 4  8 15 0.5333333
5 5 10 31 0.3225806
6 6 12 12 1.0000000
7 7 15 13 1.1538462
8 8 18 12 1.5000000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:03:21.450

我认为`transform`这里更优雅:)（与@Ananda 解决方案略有不同）

```
 transform(df, d= ifelse(b > 5, b/c, NA))
  a  b  c         d
1 1  2 10        NA
2 2  4  9        NA
3 3  5  8        NA
4 4  8 15 0.5333333
5 5 10 31 0.3225806
6 6 12 12 1.0000000
7 7 15 13 1.1538462
8 8 18 12 1.5000000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T06:47:52.673

您可以对函数`df$d`和函数内部的值进行子集`with()`化。

```
df$d[df$b>5] <- with(df[df$b>5,],b/c)
df
  a  b  c         d
1 1  2 10        NA
2 2  4  9        NA
3 3  5  8        NA
4 4  8 15 0.5333333
5 5 10 31 0.3225806
6 6 12 12 1.0000000
7 7 15 13 1.1538462
8 8 18 12 1.5000000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:48:01.723

我首先计算比率，然后分配`NA`给其中的值`b < 5`：

```
df = within(df, { d = b / c })
df$d[df$b <= 5] <- NA

> df
  a  b  c         d
1 1  2 10        NA
2 2  4  9        NA
3 3  5  8        NA
4 4  8 15 0.5333333
5 5 10 31 0.3225806
6 6 12 12 1.0000000
7 7 15 13 1.1538462
8 8 18 12 1.5000000 
```

# php - 使用 PHP 进行 Xpath 日期比较

> ID：15129186
> 
> 赞同：0
> 
> 时间：2013-02-28T06:45:18.443
> 
> 标签：php, xml, xpath

我有xml文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="test1.xsl"?>
<products>
    <node>
        <node>
            <dist_value>
            <node> 55 </node>
            <node> 59 </node>
            <node> 72 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-08-03 17:29:00 </node>
            </reg_str_dt>
            <product_id> 1 </product_id>
        </node>
    </node>
    <node>
        <node>
            <dist_value>
            <node> 72 </node>
            <node> 19 </node>
            <node> 49 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-10-25 17:29:00 </node>
            </reg_str_dt>
            <product_id> 2 </product_id>
        </node>
    </node> 
    <node>
        <node>
            <dist_value>
            <node> 12 </node>
            <node> 548 </node>
            <node> 112 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-08-12 17:29:00 </node>
            </reg_str_dt>
            <name> test </name>
            <product_id> 3 </product_id>
        </node>
    </node>
</products> 
```

我写了这段 PHP 代码来比较日期

```
$my_date = '2013-09-01';
$xml = new DOMDocument();
$xml->load('product.xml');
$xpd = new DOMXPath($xml);
false&&$result_data = new DOMElement();
$result = $xpd->query("//node[reg_str_dt[(translate(node,'-','') > translate($my_date, '-', '') ]/*");
foreach($result as $result_data){
    echo $result_data->nodeName ." => ". $result_data->nodeValue ."<br/>";
} 
```

但这段代码不起作用

在输出中它将返回产品 2 的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:56:16.507

试试这个它的工作： -

```
<?php
$my_date = '2013-09-01';
$xml = new DOMDocument();
$xml->load('product.xml');
$xpd = new DOMXPath($xml);
false&&$result_data = new DOMElement();
$result = $xpd->query('//node[translate(translate(translate("2013-09-01 17:20:19", "-", "")," ",""),":","") > translate(translate(translate(node/reg_str_dt/node,"-","")," ",""),":","")]/*');
foreach($result as $result_data){
    echo $result_data->nodeName." => ". $result_data->nodeValue ."<br/>";;
}
?> 
```

# php - Facebook API集成错误通过php

> ID：15129191
> 
> 赞同：1
> 
> 时间：2013-02-28T06:45:34.230
> 
> 标签：php, facebook, facebook-graph-api

我最近通过一些试验和错误了解到，使用 JavaScript SDK 对 Facebook 图形 API 的请求有时会返回以下错误

```
 {
       "error":{
"message":"An active access token must be used to query information about the current user.",
"type":"OAuthException","code":2500
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:47:02.937

快速但有点脏的解决方案是将您的 access_token 作为参数添加到每个请求中，而不是依赖 JavaScript SDK 为您执行此操作：

```
//request to get profile information for the current user
FB.api("me", {
access_token: "<access-token-for-user>"
}, function(response){
//handle response here
}); 
```

更多细节

通常，您将通过使用用户的 access_token 作为参数调用 FB.init 来启动客户端应用程序。这是为了确保任何 FB.api 请求都将通过将您的 access_token 附加到 Facebook 图的 GET 请求来进行身份验证。但是，在某些情况下，您的令牌可能会突然从应用程序会话中消失，并且由于对 Facebook 图表的 GET 请求中不存在令牌，对图表的所有请求都将失败。

一种可重现的场景是发送 FB.api 请求以评论已删除的 facebook 帖子。这样做会返回 OAuth Exception 错误并错误地从当前会话中删除令牌。

```
By adding the token manually to all of your FB.api requests, you can ensure the token is always included. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:54:39.930

请检查此代码，访问令牌在 url 中发送：

```
<?php

$facebook_appid         = "facebook_appid";                                 // Facebook appplication id
$facebook_secret        = "facebook_secret";                // Facebook secret id
$facebook_pageid        = "facebook_pageid";                                // Facebook secret id
$redirect_uri           = "https://localhost/facebook_page/events.php";   // return url to our application after facebook login ## should be SAME as in facebook application
//$redirect_uri         = "https://localhost/facebook_page/fb_login.php";   // return url to our application after facebook login ## should be SAME as in facebook application
$scope                  = "user_photos,email,user_birthday,user_online_presence,offline_access,manage_pages,publish_stream,user_events,friends_events"; // User permission for facebook

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {
    $_SESSION['state']  = time(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    $account_url        = "https://graph.facebook.com/".$facebook_pageid."?fields=access_token&access_token=".$params['access_token'];
    $resp               = @file_get_contents($account_url);

    $dt                 =   json_decode($resp);

    echo $dt->access_token;
    echo "<br>";
    echo $dt->id;

    $offer_url        = "https://graph.facebook.com/".$dt->id."/feed?access_token=".$dt->access_token;
    $off                = @file_get_contents($offer_url);
    $dto                = json_decode($off);

    echo "<pre>";
    print_r($dto);

}

?> 
```

# asp.net-mvc - 更改剑道数字过滤器格式

> ID：15129199
> 
> 赞同：7
> 
> 时间：2013-02-28T06:45:51.043
> 
> 标签：asp.net-mvc, kendo-grid

我在剑道网格中应用自定义分页和排序。对于我的专栏之一，我得到了一个数字文本框。当我在数字文本框中插入值时，它是整数，但是当焦点从过滤器数字文本框中移除时，它会转换为十进制。例如：如果我输入 32，它仍然是 32，但随着焦点的移除，该值变为 32.00。但我希望该值保持 32。

所以任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-21T08:41:37.000

你可以像下面这样设置

```
columns.Bound(x => x.Property).Filterable(x => x.UI("NumericFilter"));

<script type="text/javascript">
function NumericFilter(control) {
    $(control).kendoNumericTextBox({ "format": "n0", "decimals": 0 });

}
</script> 
```

**或者使用扩展方法**

```
columns.NumericColumn(x => x.Property);

public static GridBoundColumnBuilder<TModel> NumericColumn<TModel, TValue>(this GridColumnFactory<TModel> Column, Expression<Func<TModel, TValue>> Expression) where TModel : class
{
    return Column.Bound(Expression).Filterable(x => x.UI("NumericFilter"));

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-30T15:02:30.027

我遇到了同样的问题和 columns.Bound(x => x.Property).Filterable(x => x.UI("numericFilter")); 不适合我。小猪支持 Xavier John 的回答我使用 columns.filterable.cell.template 来解决我的问题，因为 Telerik 的文档指出：

> columns.filterable.ui 字符串 |函数
> 
> 过滤器菜单中使用的小部件的角色数据属性或初始化该小部件的 JavaScript 函数。
> 
> > 设置了值选项的列不支持此功能。如果 filterable.mode 设置为 'row'，则应使用 columns.filterable.cell.template 来自定义输入。

[http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#configuration-columns.filterable.ui](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#configuration-columns.filterable.ui)

这是我的代码

```
 @(Html.Kendo().Grid<UnsoldStockBO.USS_STOCK>()
        .Name("searchGrid")
        .Columns(columns =>
        {
            columns.Bound(c => c.CyAbbrev);
            columns.Bound(c => c.UssCrop).Filterable(filter => filter.Cell(c => c.Template("IntegerFilter")));
            columns.Bound(c => c.TtAbbrev);
            columns.Bound(c => c.PtAbbrev);
            columns.Bound(c => c.UssInternalGrade);
            columns.Bound(c => c.SuggestedPrice).Format("{0:c2}").Filterable(filter => filter.Cell(c => c.Template("NumericFilter")));
            columns.Bound(c => c.UssCtPricePerKilo).ClientTemplate("#:kendo.toString(UssCtPricePerKilo, 'c', Culture)#").Filterable(filter => filter.Cell(c => c.Template("NumericFilter")));
            columns.Bound(c => c.UssNetKilos).Format("{0:n}").Filterable(filter => filter.Cell(c => c.Template("NumericFilter")));
            columns.Bound(c => c.UssWriteDownCount).Format("{0:n0}").Filterable(filter => filter.Cell(c => c.Template("IntegerFilter")));
            columns.Command(command =>
            {
                command.Edit().HtmlAttributes(new { @title = "Quick Edit" });
                command.Custom("EditStock").HtmlAttributes(new { @title = "Edit" });
                command.Destroy().HtmlAttributes(new { @title = "Delete" });
            }).HtmlAttributes(new { @nowrap = "nowrap" });
        })
        .Mobile()
        .ToolBar(toolbar => toolbar.Custom().Text("Add Stock").Action("Create", "Stock").Name("AddStock"))
            .Editable(editable => editable.Mode(GridEditMode.InLine).DisplayDeleteConfirmation("This record will be permanently deleted and cannot be recovered. Are you sure?"))
            .Filterable(ftb => ftb.Mode(GridFilterMode.Row))
            .Sortable()
            .Pageable()
            .Events(e => e.DataBound("onDataBound").Cancel("onCancel"))
        .NoRecords("No records found.")
        .Resizable(resize => resize.Columns(true))
        .DataSource(dataSource => dataSource
            .WebApi()
            .ServerOperation(true)
            .PageSize(30)
                        .Events(events => events.Error("error_handler").Sync("sync_handler"))
                    .Model(model =>
                    {
                        model.Id(p => p.UssId);
                        model.Field(c => c.CyAbbrev).Editable(false);
                        model.Field(c => c.UssCrop).Editable(false);
                        model.Field(c => c.TtAbbrev).Editable(false);
                        model.Field(c => c.PtAbbrev).Editable(false);
                        model.Field(c => c.UssInternalGrade).Editable(false);
                        model.Field(c => c.SuggestedPrice).Editable(false);
                    })
                    .Read(read => read.Url(Url.HttpRouteUrl("DefaultApi", new { controller = "webapi", action = "UnsoldStock_Get", userId = ((UnsoldStockBO.PSI_USER)Session["USS_User"]).UUid })))
                                .Update(update => update.Url(Url.HttpRouteUrl("DefaultApi", new { controller = "webapi", action = "UnsoldStock_Update", userName = ((UnsoldStockBO.PSI_USER)Session["USS_User"]).UUserName })).Type(HttpVerbs.Post))
                                    .Destroy(destroy => destroy.Url(Url.HttpRouteUrl("DefaultApi", new { controller = "webapi", action = "UnsoldStock_Delete", id = "{0}", userName = ((UnsoldStockBO.PSI_USER)Session["USS_User"]).UUserName })).Type(HttpVerbs.Delete))

                )
    )

<script type="text/javascript">

    function IntegerFilter(args) {
        args.element.kendoNumericTextBox({ format: "#", decimals: 0, spinners: false });
    }

    function NumericFilter(args) {
        args.element.kendoNumericTextBox({ spinners: false });
    }

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-31T05:01:28.297

将过滤列设置为

```
column.filterable = {
    ui: numberFilter,
    cell: {
        template: numberFilter,
    }
};

function numberFilter(args) {
    var element = args instanceof jQuery ? args : args.element;
    element.kendoNumericTextBox({
        format: "n0"
    });
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-26T06:00:46.253

Palani *Kumar*所说的仍然插入分隔符，即将 12345 转换为 12,345；因此，如果您想要没有任何格式的纯数字（无分隔符、无小数点等），我建议您使用以下编辑过的代码。

```
columns.Bound(x => x.Property).Filterable(x => x.UI("numericFilter"));

<script type="text/javascript">
    function numericFilter(control) {
        $(control).kendoNumericTextBox({ format: "#", decimals: 0 });

    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T10:09:17.800

您可以在列上的可过滤对象上设置格式，如下所示：

```
 field: "TaskId",
            title: "TaskId",
            width: 80,
            filterable: {
                ui: function (element) {
                    element.kendoNumericTextBox({
                        format: "n0"
                    });
                }
            } 
```

**更新** 这是 javascript 版本。这是我完整的网格定义：

```
 $("#uxRunningTasksGrid").kendoGrid({
        dataSource: runningTasksDataSource,
        height: $(document).height() - 280,
        autoBind: true,
        filterable: true,
        sortable: true,
        pageable: false,
        reorderable: true,
        resizable: true,
        columns: [{
            command: { text: "Details", click: openDetails }, title: " ", width: 80
        },
            {
                field: "TaskId",
                title: "TaskId",
                width: 80,
                filterable: {
                    ui: function (element) {
                        element.kendoNumericTextBox({
                            format: "n0"
                        });
                    }
                }
            }
        ]
     }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-19T19:10:37.057

对于 asp.net 核心网格： `columns.Bound(c => c.Expenditure).Format("{0:#,###.00}").Width(75);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-22T08:43:59.233

我在 Kendo UI Filter 中遇到了同样的问题，它对我不起作用。IE：

```
columns.Bound(x => x.ColumnName).Filterable(x => x.UI("numericFilter")); 
```

但是你可以试试这个：

```
.DataSource(dataSource => dataSource
.Ajax()
.Model(model =>
{
    model.Id(p => p.ColumnID);       
    model.Field("ColumnName", typeof(string));

})
.PageSize(20)
) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-07T16:30:54.130

只需设置列格式：

```
c.Bound(x => x.ColumnName).Format("{0:#}"); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-11-20T14:03:01.450

在 Kendo NumericTextBox 上，Format 用于在输入内容未获得焦点时对其进行格式化。当输入焦点集中时，您必须使用小数对输入进行格式化。例如，这里是一个始终显示整数的 NumericTextbox (asp.net)：

```
@(Html.Kendo().NumericTextBox<decimal>()
        .Name("Total")
        .Format("n0")
        .Decimals(0)
    ) 
```

希望它会帮助某人。

# iphone - 如何在后台应用程序时发送活动数据包 - IOS？

> ID：15129208
> 
> 赞同：0
> 
> 时间：2013-02-28T06:46:03.800
> 
> 标签：iphone, ios, cocoa-touch, nsthread, uiapplicationdelegate

我正在开发一个 voip 应用程序，即使应用程序进入后台，我也需要始终保持与服务器的连接，苹果正在提供使用通信套接字的支持，我的问题是我有一个单独的服务器（即考虑登录服务器）我想发送每 1 分钟确认一次该服务器，我想我不能在后台为应用程序运行两个通信套接字。在那种情况下，我该如何发送 ack？

我已经从 applicationDidEnterBackground 分离了一个线程，它也将暂停，我的问题的解决方案是什么？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:07:34.677

您提出的建议将非常耗电（收音机永远不会空闲）。这在 App Store 应用程序中是不允许的。

您需要通过推送通知从服务器获取信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:13:04.847

你的应用程序永远不会一直在 ios 中运行。你需要从推送通知中获得帮助。即使您使用一个套接字，我认为您的运行时间也不会超过预定义的时间。所有 voip 应用程序都遵循其中的推送通知。

[参考这个链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

```
 Declaring Your App’s Supported Background Tasks

    Support for some types of background execution must be declared in advance by the app that uses them. An app declares support for a service using its Info.plist file. Add the UIBackgroundModes key to your Info.plist file and set its value to an array containing one or more of the following strings:
 - audio—The app plays audible content to the user while in the
   background. (This content includes streaming audio or video content
   using AirPlay.)
 - location—The app keeps users informed of their location, even while
   it is running in the background.
 - voip—The app provides the ability for the user to make phone calls
   using an Internet connection.
 - newsstand-content—The app is a Newsstand app that downloads and
   processes magazine or newspaper content in the background.
 - external-accessory—The app works with a hardware accessory that needs
   to deliver updates on a regular schedule through the External
   Accessory framework.
 - bluetooth-central—The app works with a Bluetooth accessory that needs
   to deliver updates on a regular schedule through the Core Bluetooth
   framework.
 - bluetooth-peripheral—The app supports Bluetooth communication in
   peripheral mode through the Core Bluetooth framework.

    Each of the preceding values lets the system know that your app should be woken up at appropriate times to respond to relevant events. For example, an app that begins playing music and then moves to the background still needs execution time to fill the audio output buffers. Including the audio key tells the system frameworks that they should continue playing and make the necessary callbacks to the app at appropriate intervals. If the app does not include this key, any audio being played by the app stops when the app moves to the background. 
```

**注意：**大多数无效应用程序的工作方式就像用户发送一条消息，服务器向接收者发送推送通知，如果接收者响应推送通知，则处理消息。当用户不响应推送通知时，就会出现扭曲。这是在启动应用程序时处理的，用户应用程序查询其服务器以获取任何味精，然后该味精会显示在应用程序界面中。希望这个逻辑对你有所帮助。

# php - 使用 PHPMailer 发送带有 css 代码的正文消息不起作用

> ID：15129217
> 
> 赞同：2
> 
> 时间：2013-02-28T06:46:51.300
> 
> 标签：php, phpmailer

我正在使用 PHPMailer 发送邮件，我的代码如下：

```
<form method="post" action="" id="myform">
        <label for="name">Objet:</label>
        <input type="text" name="subject" id="subject" class="input validate[required] TextInput" />

        <label for="email">Destinataire:</label>
        <input type="text" name="email" id="email" class="input validate[required,custom[email]] text-input" />

        <label for="about">Message:</label>
        <textarea name="about" id="about" rows="4" cols="40" class="validate[required] text-input">
            <?php
                while($data = mysql_fetch_array($result)){
                    echo $data['valeur'];
                }
            ?>
        </textarea>

        <p><input type="submit" name="submit" value="Envoyer"  class="btnValider"/></p>
    </form>
<?php

    // copy file pdf from  http://archi-graphi.com/arcancianev/pdf.php to new file sejour.pdf
    $ourFileName = "Collaborateur.pdf";
    $ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");        
    $htmlFile = file_get_contents('http://www.archi-graphi.com/activite/v1/pdfCola.php?projet_id='.$_REQUEST['id']);
    //$pdfHtml = ('sejour.pdf');
    file_put_contents($ourFileName,$htmlFile);
    fclose($ourFileHandle);
    // end copy
if(isset($_POST['submit'])){
    require_once('class.phpmailer.php');        
    $mail  = new PHPMailer(); // defaults to using php "mail()" 

    $body = $_POST['about'];
    $mail->CharSet="windows-1251";
    $mail->CharSet="utf-8";     
    $mail->AddReplyTo("maly.nu_cute@ymail.com","Maly");     
    $mail->SetFrom('maly.nu_cute@ymail.com', 'Maly');       
    $mail->AddReplyTo("maly.nu_cute@ymail.com","Maly");

    $address = $_POST['email'];
    $mail->AddAddress($address, $address);      
    $mail->Subject  = $_POST['subject'];

    $mail->AltBody  = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test     
    $mail->MsgHTML($body);      
    $mail->AddAttachment("Collaborateur.pdf");      // attachment       
    if(!$mail->Send()) {
      echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
      echo "Message envoy&eacute;!";
    }
}

?> 
```

在消息中，我使用 textarea 它的值是我从包含 CSS 代码的数据库中获取的。当我发送邮件时它可以工作，但是样式 css 它不像字体颜色那样工作，它不显示，我不知道如何修复这个？请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:51:42.933

默认情况下，PHP`mail()`函数是`text/plain`. 在您的`mail()`标题中，将内容类型更改为`text/html`并尝试。为此，请添加以下代码。

```
$mail->IsHTML(true); 
```

***此外***，您不应该在电子邮件中使用外部 CSS 文件。尝试内联 CSS

```
<p style="color:sienna;margin-left:20px">This is a paragraph.</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:51:54.050

```
$mail->IsHTML(true); 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:50:53.597

我认为您应该添加您的电子邮件是 html。在调用发送之前尝试添加以下内容：

```
$mail->IsHTML(true); 
```

# c# - 从另一个进程显示系统菜单（使用 WinForms，c#）

> ID：15129218
> 
> 赞同：3
> 
> 时间：2013-02-28T06:46:52.640
> 
> 标签：c#, winforms, interop

我试图在我的 WinForms UI 中显示来自不同进程的系统菜单（包含最小化、还原等）。我知道我需要像 GetSystemMenu 和 TrackPopupMenuEx 这样的互操作调用，但我没有让它工作。有人可以提供示例代码怎么做吗？

我找到了这个代码片段（用于 WPF）： [打开另一个应用程序的系统菜单](https://stackoverflow.com/questions/1122231/open-another-applications-system-menu)

我把它修改成这样：

```
 const uint TPM_LEFTBUTTON = 0x0000;
    const uint TPM_RETURNCMD = 0x0100;
    const uint WM_SYSCOMMAND = 0x0112;

    [DllImport("user32.dll")]
    static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);

    [DllImport("user32.dll")]
    static extern uint TrackPopupMenuEx(IntPtr hmenu, uint fuFlags, int x, int y, IntPtr hwnd, IntPtr lptpm);

    [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public void ShowContextMenu()
    {
        IntPtr wMenu = GetSystemMenu(ExternalWindowHandle, false);
        // Display the menu
        uint command = TrackPopupMenuEx(wMenu, TPM_LEFTBUTTON | TPM_RETURNCMD, 10, 10, ExternalWindowHandle, IntPtr.Zero);
        if (command == 0)
            return;
        PostMessage(ExternalWindowHandle, WM_SYSCOMMAND, new IntPtr(command), IntPtr.Zero);
    } 
```

如问题标题中所述，我不想最小化系统托盘的窗口，我想在我选择的位置显示来自另一个进程（窗口）的系统菜单。几乎和windows任务栏一样。当您在任务栏上右键单击它时，任务栏（资源管理器）似乎能够显示系统菜单。

谢谢，斯特凡

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:21:00.540

我有一个工作版本的代码，我也检查了 MSDN 库，我发现为了让 TrackPopupMenuEx 方法工作你传递的“ExternalWindowHandle”变量，即句柄代表的窗口需要在前台桌面。

MSDN 库说明如下：

*“要显示通知图标的上下文菜单，**当前窗口必须是应用程序调用 TrackPopupMenu 或 TrackPopupMenuEx 之前的前台窗口**。否则，当用户在菜单外或创建菜单的窗口之外单击时，菜单不会消失（如果它是可见的）。如果当前窗口是子窗口，则必须将（顶级）父窗口设置为前景窗口。*, [http://msdn.microsoft.com/en-us/library/windows/desktop/ms648003(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648003(v=vs.85).aspx)

所以这意味着它只会在你的窗口是活动窗口时工作，如果你在 Visual Studio 中调试它不会工作，因为窗口不是前台窗口，即 Visual Studio 不是你的应用程序。

请参阅随附的工作代码示例，请记住，它仅在应用程序窗口处于焦点/前景时才有效。即，当您在调试或使用另一个窗口时，TrackPopupMenuEx 将始终返回 0。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        const uint TPM_LEFTBUTTON = 0x0000;
        const uint TPM_RETURNCMD = 0x0100;
        const uint WM_SYSCOMMAND = 0x0112;

        [DllImport("user32.dll")]
        static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);

        [DllImport("user32.dll")]
        static extern uint TrackPopupMenuEx(IntPtr hmenu, uint fuFlags, int x, int y, IntPtr hwnd, IntPtr lptpm);

        [return: MarshalAs(UnmanagedType.Bool)]
        [DllImport("user32.dll", SetLastError = true)]
        static extern bool PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

        public static void ShowContextMenu(IntPtr appWindow, IntPtr myWindow, Point point)
        {
            IntPtr wMenu = GetSystemMenu(appWindow, false);
            // Display the menu
            uint command = TrackPopupMenuEx(wMenu,
                TPM_LEFTBUTTON | TPM_RETURNCMD, (int)point.X, (int)point.Y, myWindow, IntPtr.Zero);
            if (command == 0)
                return;

            PostMessage(appWindow, WM_SYSCOMMAND, new IntPtr(command), IntPtr.Zero);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ShowContextMenu(new IntPtr(<<put your target window handle here>>), this.Handle, new Point(0, 0));
        }
    }
} 
```

# asp.net-mvc-3 - 将本地化字符串存储在 resx 文件中？

> ID：15129224
> 
> 赞同：0
> 
> 时间：2013-02-28T06:47:01.407
> 
> 标签：asp.net-mvc-3, resx

我正在使用 Visual Studio 2010，我创建了两个 resx 文件，并通过在 Visual Studio 中打开它来在 resx 文件中输入本地化字符串。在这里，我想动态输入本地化的字符串名称及其来自 Html 表单的值，这样如果我必须添加新的本地化字符串，我就不会经常重新发布应用程序。我们可以像在数据库中那样通过从表单用户输入中输入它的名称和值来将本地化的字符串存储到 resx 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:54:42.593

不，你不能。resx 文件被编译到生成的程序集中，并且不能在运行时修改。未预编译应用程序的旧 ASP.NET 模型通过发布 resx 文件来实现这一点。ASP.NET MVC 使用预编译的 Web 应用程序模型。您将不得不考虑为此使用不同的存储。例如，您可以编写一个自定义资源提供程序，该提供程序将从数据库中读取值。该过程[`following article`](http://msdn.microsoft.com/en-us/library/aa905797.aspx)在 MSDN 上有详细描述。

# lotus-notes - Lotusnotes 中的@DbLookup

> ID：15129228
> 
> 赞同：0
> 
> 时间：2013-02-28T06:47:15.363
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

有人可以帮助我了解它是什么吗，我并没有真正了解它是什么，

尝试了很多，但无法得出结论，

```
@DbLookup ( "" : "NoCache" ; "" ;  "IT-MTBP Info" ; Prt1_ProjNo ; 15 ) 
```

非常感谢和最好的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T07:04:54.443

从 Lotus Notes 帮助：

> @DbLookup（类：缓存；服务器：数据库；视图；键；字段名；关键字）或
> 
> @DbLookup（类：缓存；服务器：数据库；视图；键；列号；关键字）

这意味着你有：

1.  "" : "NoCache" - 你现在不关心这个

2.  第二个参数为空，所以你正在搜索**当前数据库**

3.  **“IT-MTBP Info”**是您正在搜索的视图的名称（或别名）

4.  您正在搜索与名为**Prt1_ProjNo**的字段（或变量？）的**内容匹配的所有值**

***   此调用将从视图“IT-MTBP Info”返回所有匹配文档的**第 15 列的内容**** 

 **这是 Lotus Notes Designer 帮助中的示例页面：[LINK](http://www-12.lotus.com/ldd/doc/domino_notes/rnext/help6_designer.nsf/f4b82fbb75e942a6852566ac0037f284/d359a1c44b37b0a385256c54004bfb7f?OpenDocument)

希望这可以帮助。如果您仍有问题，您必须更具体地提出问题。

编辑：固定编辑**

# java - 排除测试方法“A”并包括依赖于“A”的测试方法“B”

> ID：15129229
> 
> 赞同：0
> 
> 时间：2013-02-28T06:47:19.187
> 
> 标签：java, xml, maven, testng

我有单独的 testng xml 文件来运行不同的测试类。现在我有一个名为“class1”的测试类，里面有 3 个方法（A、B 和 C）。在“Class1”中，B 方法依赖于“A”，总是 run=false，方法 C 依赖于 B，总是 run=false。

现在“Class2”扩展了“Class1”。我只想运行方法A和C，跳过B。所以，我写了class2XML

```
 {<classes>
        <class name="class2">
            <methods>
                <include name="A" />
                <exclude name="B" />
                <include name="C" />
            </methods>
        </class>

    </classes>} 
```

我正在使用 maven 运行我的测试，testng 不允许我运行这样的测试方法。我一直收到 org.testng.DependencyMap.getMethodDependingOn 错误。想知道，有什么办法可以排除方法 B。任何建议都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:24:22.697

1.  alwaysrun 默认为 false。所以你不需要明确设置它
2.  如果您希望测试用例即使它们的依赖项不存在也能运行，那么您需要将 ignoreMissingDependencies = true 添加到您的 @Test

但是，该功能直到很晚才起作用，直到最近（在 6.9-SNAPSHOT 中）才得到修复。所以，如果你需要它，你需要下载最新的代码，构建它并使用那个 jar。

# java - 使用 .length 方法时获得不兼容的类型

> ID：15129241
> 
> 赞同：1
> 
> 时间：2013-02-28T06:47:50.877
> 
> 标签：java

我正在使用 java 进行 Objects 的练习以进行自我审查。我遇到问题的练习部分是它要求我找到 refNumber 字符串的长度。如果字符串的长度为零，则打印出一行“zzz”。我尝试通过创建一个局部变量并使其等于 refNumber.length() 来做到这一点。但是，在我的条件语句中，bluejay 表明我的类型不兼容。呃，请帮忙。提前致谢。

```
class Book
{
// The fields.
private String author;
private String title;
private int pages;
private String refNumber;

/**
 * Set the author and title fields when this object
 * is constructed.
 */
public Book(String bookAuthor, String bookTitle, int numberOfPages)
{
    author = bookAuthor;
    title = bookTitle;
    numberOfPages = pages;
    refNumber = "";
}

public String getAuthor()
{
    return author;
}

public String getTitle()
{
    return title;
}

public int getPages()
{
    return pages;
}

public String getRefNumber()
{
    return refNumber;
}

public void setRefNumber(String ref){
    ref = refNumber;
}

public void printTitle() {
    System.out.println("Book desciption: " + title);

}

public void printAuthor() {
    System.out.print(" by " + author);

}

public void printPages(){
    System.out.println("Pages: " + pages);
}

public void printRef(){
    int count = refNumber.length();
    if (count = 0){                        //incompatible type wtf?
    System.out.println("zzz");
    }
    else {
        System.out.println("Reference Number: " + referenceNumber);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:51:31.540

大多数编程语言使用单个等号`=`作为赋值运算符。您要做的是比较两个数字，它使用双等号`==`。

因此，实际上，您的代码正在尝试使用 value 分配 count `0`，然后检查 value 是否为`true`or `false`。并且由于赋值操作的结果既不是`true`也不是`false`，它会抛出错误。

正如其他人所说，使用`count == 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:50:59.730

试试看..出去

```
 if (refNumber.length() == 0){                        
    System.out.println("zzz");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:50:24.417

用这个：

```
if (count == 0){ 
    ....
} 
```

'=' 是赋值运算符，'==' 是比较运算符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:50:36.600

它应该是

```
if(count == 0) 
```

在您的代码中，就像您将 0 分配给 count ，这在 if 子句中不会发生，因为它需要一个基于条件的布尔值。所以在这里你应该检查 count 是否相等（使用相等运算符 == ），如果它们相等则返回 true，否则返回 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:06:59.620

`count=0`代表分配，而`count==0`代表比较。

# django - Django模型：动态生成模型字段

> ID：15129244
> 
> 赞同：0
> 
> 时间：2013-02-28T06:47:57.043
> 
> 标签：django, django-models

我有以下文件说 prof.xml

```
<include>
  <param name="xxx" value="yyy"/>
  <param name="mmm" value="nnn"/>
</include> 
```

现在我想创建模型应该像这样的 django 模型

```
class prof:
   xxx= models.CharField(verbose_name="XXX",max_length=45)
   mmm = models.CharField(verbose_name="YYY",max_length=100) 
```

即模型字段的名称应该是 xml 文件中的参数名称，并且 xml 文件中的值应该插入到数据库中。如何才能做到这一点？

我已经做了类似的事情来从 xml 中获取参数名称，但我不知道如何从中创建模型字段名称。

```
 import os
 files = [file for file in os.listdir(os.path.join(path,'prof.xml')) if                    os.path.isfile(file)]
 for file in files:
    f = open((os.path.join(path,'prof.xml')),'r')
    for line in f.readlines():
        pos1 = line.find("param name")
        pos2 = line.find("value")
        if pos1>=0 and pos2>=0:
            field_name=line[pos1+12:pos2-2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:55:18.990

我不确定你是否可以动态地做到这一点，因为在创建模型之后，你需要 syncdb 来创建适当的表等。

也许你可以稍微改变你的设计并拥有一个带有`key`和`value`字段的模型。

```
class DataContainer(models.Model):
   key = models.CharField(verbose_name="key",max_length=45)
   value = models.CharField(verbose_name="value",max_length=100) 
```

并与您的模型有`ManyToMany`或有关系，例如：`ForeignKey`

```
class SomeModel(models.Model):
    data = models.ManyToManyField(DataContainer) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:45:44.147

首先，您不应该手动解析 XML。这是灾难的秘诀。使用图书馆。

此外，我将支持 Rohan 关于不要尝试动态创建模型的建议，但这是可能的。我在库测试中这样做，[如此处所示](https://stackoverflow.com/questions/14675872/how-to-write-unit-tests-for-a-new-third-party-django-library/14717060#14717060)，但我从未尝试过它来制作永久表格。我还没有测试过这个，但这样的事情可能会奏效：

```
from django.core.management import call_command
from django.db import models

def create_new_model(name, fields):
    new_model = type(name, models.Model, fields)
    models.register_models('myapp', new_model)
    call_command('syncdb') 
```

如果有人足够疯狂地尝试这个，请发表评论并让我知道它是如何进行的。

# c++ - 模糊的天空盒纹理

> ID：15129258
> 
> 赞同：1
> 
> 时间：2013-02-28T06:48:44.963
> 
> 标签：c++, graphics, directx, textures, skybox

渲染天空盒时出现问题。我正在使用带有 c++ 的 DirectX 11。图片太模糊了。我想我可能使用了太低分辨率的纹理。目前对于天空盒的每个面，分辨率都是 1024x1024。我的屏幕分辨率是 1920x1080。平均而言，我会一直盯着天空盒的一张脸，这意味着 1024x1024 的图片将被拉伸以填满我的屏幕，这就是它模糊的原因。我正在考虑使用 2048x2048 纹理。我创建了一个简单的天空盒纹理，它不再模糊了。但我的问题是它需要太多的内存！几乎 100MB 仅用于后台加载到 GPU。

我的问题是有没有更好的方法来渲染天空盒？我在互联网上环顾四周，没有太多运气。有人说标准是每张脸 512x512。那么模糊是不可接受的。我想知道商业游戏是如何制作天空盒的？他们是否使用了巨大的纹理尺寸？尤其是看过的人，我特别喜欢《死亡空间3》的空间环境。我想创造类似的东西。那么他们是怎么做到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:21:21.797

首先，像素密度不仅取决于纹理和屏幕的分辨率，还取决于视野。狭窄的视野将导致更少的天空盒填充屏幕，因此将更多地放大纹理，需要更高的分辨率。您没有确切说明您使用的是什么 FOV，但我有点惊讶 1k 纹理特别模糊，所以它可能有点窄？

哦，在我忘记之前 - 你应该使用压缩纹理...... 2k 纹理不应该*那么*可怕。

然而，除了改变分辨率（这显然会很快消耗内存）之外，我通常总是将天空盒与一些简单的远处物体结合起来。

例如，在太空场景中，我可能会渲染一个相当简单的天空盒，它只包含诸如星云之类的东西，而分辨率并不重要。我可能会将至少一些星星渲染为精灵，其中纹理密度可以局部更高。行星可以是纹理几何。

如果我要渲染更传​​统的户外场景，我可以在天空盒上渲染天空和云彩，但将遥远的地平线渲染为几何图形。天空中的月亮可能是一个覆盖物。

没有一个标准答案——可以根据情况采用多种技术。

# ios - 如何从 AppDelegate.m 设置 tabBarItem 的徽章（tabBarView 不是根视图）

> ID：15129260
> 
> 赞同：3
> 
> 时间：2013-02-28T06:48:45.190
> 
> 标签：ios, uitabbarcontroller, storyboard

我可以通过以下代码更改 AppDelegate.m 中的徽章值：

```
UITabBarController *tabController = (UITabBarController *)self.window.rootViewController;
[[tabController.viewControllers objectAtIndex:0] tabBarItem].badgeValue = @"Badge"; 
```

仅当 tabBarViewController 是窗口的根视图控制器时。

但是，在我的新程序中，tabBarController 不是根视图。

我试过以下代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UITabBarController *tabController = (UITabBarController *)[storyboard instantiateViewControllerWithIdentifier:@"tabBarController"] ;
[[tabController.viewControllers objectAtIndex:0] tabBarItem].badgeValue = @"Badge"; 
```

它只是行不通。tabBarItem 不显示任何徽章。

**编辑-**

我添加了以下代码来检查是否创建了 tabController，答案是肯定的。

```
if (tabController) {
     NSLog(@"tabController has been created ");
}else {
     NSLog(@"You have a null reference - The Object hasn't been created yet");
} 
```

答案是肯定的。

> 2013-03-01 11:57:00.600 报告 [14854:907] 选项卡控制器已创建

**但是，预期的徽章仍然没有出现。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:58:22.297

你能试试这个代码吗？罗伯特先生

```
 [[[[[self tabBarController] tabBar] items] objectAtIndex:0] setBadgeValue:[NSString stringWithFormat:@"%d", notificationCount ]]; 
```

# c++ - 是否有 std::shared_ptr 的非原子等价物？为什么没有一个 ?

> ID：15129263
> 
> 赞同：104
> 
> 时间：2013-02-28T06:49:03.350
> 
> 标签：c++, c++11, smart-pointers

这是一个由两部分组成的问题，所有关于 的原子性`std::shared_ptr`：

**1.** 据我所知，`std::shared_ptr`它是唯一的智能指针，`<memory>`它是原子的。我想知道是否有可用的非原子版本`std::shared_ptr`（我在 中看不到任何东西`<memory>`，所以我也愿意接受标准之外的建议，比如 Boost 中的建议）。我知道`boost::shared_ptr`也是原子的（如果`BOOST_SP_DISABLE_THREADS`没有定义），但也许还有另一种选择？我正在寻找与 具有相同语义`std::shared_ptr`但没有原子性的东西。

**2.**我明白为什么`std::shared_ptr`是原子的；这有点好。然而，它并不适用于所有情况，C++ 历来有“只为你使用的东西付费”的口头禅。如果我没有使用多个线程，或者如果我使用多个线程但没有跨线程共享指针所有权，那么原子智能指针就过分了。我的第二个问题是为什么*C++11**中没有提供非原子版本`std::shared_ptr`*？（假设有一个*原因*）（如果答案只是“根本没有考虑过非原子版本”或“从来没有人要求过非原子版本”，那很好！）。

对于问题 #2，我想知道是否有人曾经提出过`shared_ptr`（对于 Boost 或标准委员会）的非原子版本（不是要替换 的原子版本`shared_ptr`，而是与之共存）并且它被否决了具体原因。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-28T16:10:02.003

> 1\. 我想知道是否有非原子版本的 std::shared_ptr 可用

标准未提供。“第 3 方”库很可能提供了一个。事实上，在 C++11 和 Boost 之前，似乎每个人都编写了自己的引用计数智能指针（包括我自己）。

> 2.我的第二个问题是为什么C++11中没有提供std::shared_ptr的非原子版本？

这个问题在 2010 年的 Rapperswil 会议上进行了讨论。该主题是由瑞士的国家机构评论 #20 提出的。辩论的双方都有强烈的论据，包括你在问题中提供的论据。然而，在讨论结束时，以压倒性多数（但不是一致）反对添加不同步（非原子）版本的`shared_ptr`.

反对的论据包括：

*   使用不同步的 shared_ptr 编写的代码最终可能会在以后的线程代码中使用，最终导致难以调试的问题而没有警告。

*   拥有一个“通用”shared_ptr，它是引用计数流量的“一种方式”，它有好处：来自[原始提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1431.htm)：

    > 无论使用何种功能，都具有相同的对象类型，极大地促进了库之间的互操作性，包括第三方库。

*   原子的成本虽然不是零，但并不是压倒性的。通过使用不需要使用原子操作的移动构造和移动分配来减轻成本。此类操作常用于`vector<shared_ptr<T>>`擦除和插入。

*   没有什么能阻止人们编写自己的非原子引用计数智能指针，如果这确实是他们想要做的。

那天在拉珀斯维尔的 LWG 的最后一句话是：

> 拒绝 CH 20。目前没有共识做出改变。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-02-28T17:26:55.400

Howard 已经很好地回答了这个问题，Nicol 提出了一些关于使用单一标准共享指针类型而不是许多不兼容的共享指针类型的好处。

虽然我完全同意委员会的决定，但我确实认为*在特殊情况下*`shared_ptr`使用类非同步类型有一些好处，所以我已经研究了几次这个话题。

 *> 如果我没有使用多个线程，或者如果我使用多个线程但没有跨线程共享指针所有权，那么原子智能指针就过分了。

当您的程序不使用多个线程时，使用 GCC shared_ptr 不使用原子操作作为引用计数。这是通过检测程序是否为多线程的包装函数更新引用计数来完成的（在 GNU/Linux 上，这是通过检查 Glibc 中的一个特殊变量来完成的，该变量表示程序是否为单线程^([1])）并分派给 atomic或相应的非原子操作。

多年前我意识到，由于 GCC`shared_ptr<T>`是根据[`__shared_ptr<T, _LockPolicy>`基类](https://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#std.util.memory.shared_ptr)实现的，因此即使在多线程代码中，也可以通过显式使用`__shared_ptr<T, __gnu_cxx::_S_single>`. 您可以使用这样的别名模板来定义不是线程安全的共享指针类型，但速度稍快^([2])：

```
template<typename T>
  using shared_ptr_unsynchronized = std::__shared_ptr<T, __gnu_cxx::_S_single>; 
```

这种类型不能互操作，`std::shared_ptr<T>`并且只有在保证`shared_ptr_unsynchronized`对象永远不会在没有用户提供的额外同步的情况下在线程之间共享时才能安全使用。

这当然是完全不可移植的，但有时没关系。`shared_ptr_unsynchronized<T>`使用正确的预处理器 hack，如果是 的别名，您的代码仍然可以在其他实现中正常工作`shared_ptr<T>`，使用 GCC 会快一点。

* * *

[[1] 在 Glibc 2.33 添加该变量之前，包装函数将检测程序是否链接到`libpthread.so`，作为检查单线程与多线程的不完美方法。]

[[2] 不幸的是，因为这不是一个预期的用例，它在 GCC 4.9 之前并没有以最佳方式工作，即使您明确请求了 `_S_single` 策略，一些操作仍然使用包装函数，因此被分派给原子操作. [请参阅http://gcc.gnu.org/ml/libstdc++/2007-10/msg00180.html](http://gcc.gnu.org/ml/libstdc++/2007-10/msg00180.html)上的第 (2) 点，了解更多详细信息和 GCC 补丁，以允许即使在多线程应用程序中也可以使用非原子实现。我在那个补丁上坐了很多年，但我最终为 GCC 4.9 提交了它。]

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-28T07:14:38.263

> 我的第二个问题是为什么 C++11 中没有提供 std::shared_ptr 的非原子版本？（假设有一个原因）。

人们可以很容易地问为什么没有侵入式指针，或者共享指针的任何其他可能变体。

从 Boost 传下来的 设计`shared_ptr`一直是创建智能指针的最低标准通用语言。一般来说，你可以把它从墙上拉下来并使用它。它可以在各种应用程序中普遍使用。你可以把它放在一个界面中，很可能好人会愿意使用它。

线程只会在未来变得*更加*普遍。事实上，随着时间的推移，线程通常将成为实现性能的主要手段之一。要求基本智能指针完成支持线程所需的最低限度的工作有助于实现这一现实。

将六个具有微小差异的智能指针转储到标准中，或者更糟糕的是基于策略的智能指针，将会很糟糕。每个人都会选择他们最喜欢的指针并放弃所有其他指针。没有人能够与其他人交流。这就像 C++ 字符串的当前情况，每个人都有自己的类型。更糟糕的是，因为与字符串的互操作比智能指针类之间的互操作要容易得多。

Boost，以及委员会的扩展，选择了一个特定的智能指针来使用。它提供了良好的功能平衡，并在实践中被广泛和普遍使用。

`std::vector`在某些极端情况下，与裸数组相比也有一些低效率。它有一些限制；有些用途真的想对 a 的大小有一个硬限制`vector`，而不使用抛出分配器。然而，委员会并没有设计`vector`成适合所有人的一切。它被设计为大多数应用程序的良好默认设置。那些无法使用它的人可以编写一个适合他们需要的替代方案。

`shared_ptr`如果' 的原子性是一种负担，就像智能​​指针一样。再说一次，人们也可能会考虑不要过多地复制它们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-02T11:25:19.940

Boost 提供了一个`shared_ptr`非原子的。它叫做[`local_shared_ptr`](https://www.boost.org/doc/libs/1_65_0/libs/smart_ptr/doc/html/smart_ptr.html#local_shared_ptr)，可以在 boost 的智能指针库中找到。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-30T04:44:51.137

我正在准备工作中关于 shared_ptr 的演讲。我一直在使用修改后的 boost shared_ptr，避免使用单独的 malloc（就像 make_shared 可以做的那样）和用于锁定策略的模板参数，比如上面提到的 shared_ptr_unsynchronized。我正在使用该程序

[http://flyingfrogblog.blogspot.hk/2011/01/boosts-sharedptr-up-to-10-slower-than.html](http://flyingfrogblog.blogspot.hk/2011/01/boosts-sharedptr-up-to-10-slower-than.html)

作为测试，在清理了不必要的 shared_ptr 副本之后。该程序仅使用主线程并显示测试参数。测试环境是一个运行 linuxmint 14 的笔记本。这里是以秒为单位的时间：

```
测试运行设置 boost(1.49) 标准与 make_shared 修改提升
mt-unsafe(11) 11.9 9/11.5(-pthread on) 8.4  
原子(11) 13.6 12.4 13.0  
mt-unsafe(12) 113.5 85.8/108.9(-pthread on) 81.5  
原子(12) 126.0 109.1 123.6  

```

只有 'std' 版本使用 -std=cxx11，并且 -pthread 可能会在 g++ __shared_ptr 类中切换 lock_policy。

从这些数字中，我看到了原子指令对代码优化的影响。测试用例不使用任何 C++ 容器，但`vector<shared_ptr<some_small_POD>>`如果对象不需要线程保护，则可能会受到影响。Boost 受到的影响较小，因为额外的 malloc 限制了内联和代码优化的数量。

我还没有找到一台具有足够内核来对原子指令的可扩展性进行压力测试的机器，但仅在必要时使用 std::shared_ptr 可能会更好。*

# php - SQL 更新命令更新列中的所有值

> ID：15129267
> 
> 赞同：0
> 
> 时间：2013-02-28T06:49:19.010
> 
> 标签：php, sql, command, set

因此，在我的网站中，我正在尝试创建一个页面，人们可以在其中编辑某个 mySQL 表中的哪个 URL，这是我的代码，然后再继续（至少其中一部分）

```
 while($row=mysql_fetch_array($result))
    {
    $title = $row['title'];
    $url=$row['url'];
    $id = $row['inid'];
    echo "<input type='button' id='delete' value='X' onclick='return Deleteqry($id)' />";
    echo "<form action='admin.php' method='POST'><input type='text' name='urledit' /><input type='submit' name='redit' /></form>";
    echo $title . '</br>';
    echo $url . '</br></br>';
            if(isset($_POST['redit']))
            {
                $newd = $_POST['urledit'];

                mysql_query("UPDATE `insects` SET url = '$newd' WHERE inid = $id ");
                header("location: admin.php");
            }
    } 
```

除了唯一的问题是在他们提交他们的值之后，它会更新表中的所有“url”行。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:53:09.620

尝试将表名周围的单引号更改为反引号并从 2 中删除单引号，因为它是一个整数。

还要检查您的数据库，以确保您在测试早期查询时没有无意中将该列中的所有值更改为 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:53:11.010

如果 inid 的行类型是 int，请从表名中删除单引号，以及从末尾的 2 中删除，因为它是一个整数。

```
mysql_query("UPDATE insects SET url = '$newd' WHERE inid = 2 "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:54:30.597

```
mysql_query("UPDATE 'insects' SET url = '$newd' WHERE inid = '2' "); 
```

您总是在更新 inid=2 的行，所以我猜您数据库中的所有 url 的 inid 值为 '2'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:00:53.663

兄弟，你敲桌子了吗？你在使用自动增量吗`inid`？请检查您的表格是否`inid`具有相同的值。

我没有看到您的查询有任何错误。

# c# - 在gridview asp.net c#中冻结标题标题

> ID：15129268
> 
> 赞同：0
> 
> 时间：2013-02-28T06:49:21.450
> 
> 标签：c#, asp.net, gridview, freeze

我的网页中有一个标题、一些文本、一个文本框和一个按钮。我有一个需要垂直和水平滚动的大网格视图。我想要的是，即使我滚动网格视图、网页中的标题、一些文本、文本框和按钮仍将处于相同位置或冻结。

这是我的html代码

```
 <div>
Data Warehouse Calendar Maintenance

    <br />
    <br />

</div>
<p>
    <asp:Label ID="Label1" runat="server" Text="Enter Date:"></asp:Label>

    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
</p>
<p>
    <asp:Button ID="btn_View" runat="server" onclick="btn_View_Click" Text="View" />
</p>
<p>
    <asp:GridView ID="GridView1" runat="server" BackColor="LightGoldenrodYellow" 
        BorderColor="Tan" BorderWidth="1px" CellPadding="5" Font-Names="Calibri" 
        Font-Size="Medium" Font-Underline="False" ForeColor="Black" 
        onrowdatabound="GridView1_RowDataBound" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" Width="271px">
        <RowStyle Wrap="False" />
        <EmptyDataRowStyle Wrap="False" />
        <FooterStyle BackColor="Tan" BorderColor="Black" BorderStyle="Solid" 
            Wrap="False" />
        <PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" 
            HorizontalAlign="Center" Wrap="False" />
        <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" 
            Wrap="False"/>
        <HeaderStyle BackColor="Tan" BorderStyle="Solid" Font-Bold="True" 
            Wrap="False" />
        <EditRowStyle Wrap="False" />

        <AlternatingRowStyle BackColor="PaleGoldenrod" Wrap="False" />

    </asp:GridView>

</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:57:08.440

请参阅此示例[http://www.aspsnippets.com/Articles/Scrollable-GridView-with-Fixed-Headers-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Scrollable-GridView-with-Fixed-Headers-in-ASP.Net.aspx) 这将对您的问题有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:10:54.683

是的，您可以使用 css 轻松完成。css 具有位置属性。所以像这样固定你的位置。

```
.Title
{
Position:Fixed;
Top:120px; // Set as per your requirement
Left:120px; // Set as per your requirement
} 
```

将标题类应用于该标题 div。

可以为文本、文本框和按钮编写相同的内容。

# ruby-on-rails - 如何在 Rails 中使用与 find_by_sql 的关联？

> ID：15129270
> 
> 赞同：1
> 
> 时间：2013-02-28T06:49:27.990
> 
> 标签：ruby-on-rails, associations, find-by-sql

我有一个很长的 SQL 查询，我在 rails Model.find_by_sql 中使用它，我必须在该查询中添加几个条件，就像我想获取 parent.is_allowed 为真的所有记录一样。

这意味着我正在获取所有子元素，并且我想使用子元素和父元素之间的关联。在子表中，我们有 parent_id。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:16:06.743

你可以尝试这样的事情：

```
Model.find_by_sql("select * from models where parent_id in (select id from parents where is_allowed='true') and ... ") 
```

只需将 替换为`...`您的原始 SQL 查询。

## 编辑

根据您的评论，我认为这条线更适合您：

```
Model.find_by_sql("select * from models where parent_id in (select id from users where is_allowed='true')") 
```

# jquery-ui - 在带有一些数字的 IE 动态属性 jquery 中并添加了它的值，为什么？

> ID：15129275
> 
> 赞同：0
> 
> 时间：2013-02-28T06:49:46.113
> 
> 标签：jquery-ui, jquery

```
<DIV id=3949 class=tempClass channel-name="Brand" sizcache="50" nodeIndex="1" jQuery1362033550328="46"></div> 
```

什么是 [jQuery1362033550328="46"]？它仅在 IE 中显示，而不是在 firefox 中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:53:41.040

`1362033550328`是unix时间戳，相当于`Thu, 28 Feb 2013 06:52:00 GMT`

大多数情况下，它与 ajax 请求一起附加，以避免 ajax 缓存问题

# php - Laravel 框架：语法错误，意外的“函数”（T_FUNCTION）

> ID：15129279
> 
> 赞同：0
> 
> 时间：2013-02-28T06:50:27.617
> 
> 标签：php, laravel, laravel-4, laravel-3

我正在尝试在新的 Laravel3 框架安装中包含一个宏，我有 PHP 5.4（phpinfo 证实了这一点）。我最初怀疑这是 5.3.17 不支持闭包的问题，​​所以我升级到 5.4，但仍然出现此错误。

未处理的异常

信息：

语法错误，意外的“函数”（T_FUNCTION）位置：

C:\wamp\www\script-manager\application\libraries\macros\nav_link.php 在第 3 行

导航链接文件具有以下宏：

```
<?php

HTML::macro('nav_link' function($route, $text) {
$class = ( URI::is($route) or URI::is($route.'/*') ) ? 'class="active"' : '';
$href  = URL::to($route);

$action = Request::route();
$action = $action->action;

if ( isset($action['as']) ) {
    $class = ( ($action['as'] == $route) or ($action['as'] == $route.'/*') ) ? 'class="active"' : '';
    $href  = URL::to_route($route);
}

return '<li ' . $class . '><a href="' . $href . '">' . $text . '</a></li>';
});

?> 
```

并且在 start.php 的底部需要：

```
require path('app') . 'libraries\macros\nav_link.php'; 
```

在我的情况下，我真的找不到其他人遇到这个问题，所以我迷路了。在 Windows 7 上使用 WAMP 5.4。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:51:20.590

```
HTML::macro('nav_link' function($route, $text) { 
```

应该

```
HTML::macro('nav_link', function($route, $text) {
                      ^ // You miss this comma 
```

# java - 赋值运算符重载 Java

> ID：15129284
> 
> 赞同：1
> 
> 时间：2013-02-28T06:50:47.753
> 
> 标签：java, clone, overloading, variable-assignment, operator-keyword

我无法弄清楚如何实现将 C++ 中的赋值运算符重载到 Java 的等价物。我知道没有这样的东西，但我需要模拟它。我试过重写 Clone() 函数，但没有运气。有任何想法吗？

下面是我的主要

```
 Queue p = new Queue();
 Queue q = new Queue();

    p.enqueue('a');
    p.enqueue(9);
    p.enqueue(10);
    p.enqueue(310);
    p.enqueue(8);

    q = p;
    System.out.print(p); 
```

这是克隆功能

```
public void Clone(Queue other) throws Throwable
{
    System.out.println("test\n");

    if(this == other)
    {

    }
    else
    {            
while(!isEmpty())
  dequeue();

Node tmp = other.head;
while(tmp != null){
    this.enqueue((T)tmp.element);
    tmp = tmp.next;

}   
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:52:40.553

Java 不支持运算符重载。

运算符重载违反了 Java 语言设计的核心原则之一：透明性。试图重载运算符是违反语言哲学的，应该避免......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:54:04.270

运算符重载不能在 Java 中完成。它需要编译器的支持才能做到这一点。但是，您可以创建一个理解 java 语法并在构建之前运行它的预处理器，它将您的运算符的调用转换为适当的函数，但这只是矫枉过正。

`clone`与运算符重载无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T06:56:27.103

您将需要编写一个显式的复制构造函数。在 Java 中，一切都是一个指针（或者他们称之为“引用”），所以当你将 p 分配给 q 时，你只是说 p 和 q 指向同一个对象。

```
q = new Queue(p) 
```

是你想要的，假设你已经实现了适当的构造函数。

编辑：使用语法“q = p”是不可能的。如果你想“模拟”赋值运算符，那么你将需要在 Queue 中编写一个新方法。例如，Java 程序员如何“模拟”重载加法运算符：

```
a.add(b); 
```

因此，在您的情况下，您需要编写一个“分配”方法，该方法接受一个队列，复制其数据，并将这些副本分配给另一个对象的内部数据。

```
q.assign(p);

public void assign(Queue other) {
  this.primitive = other.primitive;
  this.someObject = new SomeObject(other.someObject);
} 
```

这与您将要获得的差不多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-05T22:34:35.553

没有“等价物”，因为您不能在 Java 中重载赋值运算符。您正在尝试使用 clone() 方法来模仿该行为，但您已经把它倒退了。如果没有运算符重载，您有三种选择：

1.  编写一个函数，将调用对象变为传入对象的副本。
2.  编写一个函数，制作调用对象的副本并将其返回给将存储它的其他东西。
3.  使用复制构造函数。

## 1\. 编写一个函数，将调用对象变为传入对象的副本。

请注意，这与赋值运算符重载相同，只是它被命名为“copy”而不是“operator=”。

如果你想这样做：

```
foo A;
foo B;
A.copy(B);  // A is now a copy of B. 
```

在 C++ 中：

```
foo& copy(const foo& rhs)
{
    if(&rhs != this)
    {
        this->m_someInt = rhs.m_someInt;
        this->m_someBar = rhs.m_someBar;
    }
    return *this;
} 
```

在 Java 中：

```
foo copy(foo rhs)
{
    this.m_someInt = rhs.m_someInt;
    this.m_someBar.copy(rhs.m_someBar);
    return this;
} 
```

请注意，在 C++ 中，按值分配`this->m_someBar`给`rhs.m_someBar`副本`rhs.m_someBar`，但在 Java 中，这样的分配将导致两个 foo 对象共享同一个 Bar 对象。因此，如果您不打算共享子主题，也必须在子主题上使用类似的复制机制。

## 2\. 编写一个函数，复制调用对象并将其返回给将存储它的其他东西。

如果你想这样做：

```
foo A;
foo B;
A = B.clone();  // A is now a copy of B. 
```

在 C++ 中：

```
foo clone() const  // Ignoring the fact that this is unnecessary in C++ where assignments (and returns) are by-value anyway.
{
    foo theCopy;
    theCopy.m_someInt = this->m_someInt;
    theCopy.m_someBar = this->m_someBar;
    return theCopy;
} 
```

在 Java 中：

```
foo clone()
{
    foo theCopy = new foo();
    theCopy.m_someInt = this.m_someInt;
    theCopy.m_someBar = this.m_someBar.clone();
    return theCopy;
} 
```

## 3\. 使用复制构造函数。

如果你想这样做：

```
foo B;
foo A = new foo(B);  // Java version
foo A(B); // C++ version 
```

在 C++ 中：

```
foo(const foo& rhs)
  :m_someInt(rhs.m_someInt), m_someBar(rhs.m_someBar)
{
}

// Or optionally:
foo(const foo& rhs) = default; 
```

在 Java 中：

```
foo(foo rhs)
{
    m_someInt = rhs.m_someInt;
    m_someBar = new Bar(rhs.m_someBar);
} 
```

总之，您的问题是您正在尝试以与上面使用 copy() 相同的方式使用 clone() 。最接近等价物的是我的`copy`方法。我个人的建议是只使用一个复制构造函数并称之为一天。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:52:50.447

如果您尝试覆盖[`clone`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)Object 上的方法，它需要具有相同的签名（和大写）。您的方法签名是`Clone(Queue)`.

目前尚不清楚这与尝试模拟运算符重载有什么关系，或者您要重载什么运算符...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-21T14:29:19.190

我来自 C++ 背景，所以我知道你来自哪里。我认为这是您所追求的克隆方法。不要忘记实现 Cloneable 接口来告诉 'Object' 这个对象是一个可克隆对象。有关详细说明，请参阅 Effective Java (2nd Ed) item 11。

# extjs - Ext JS 4 内联数组存储配置

> ID：15129290
> 
> 赞同：3
> 
> 时间：2013-02-28T06:51:00.347
> 
> 标签：extjs, extjs4, store

B) 不是 A) 的内联等效项吗？

```
// A) Create store with Ext.create
var storeInstance = Ext.create('Ext.data.ArrayStore', {
    fields: ['company', 'price'],
    data: [
        ['3m Co',71.72],
        ['Alcoa Inc',29.01],
        ['Boeing Co.',75.43]
    ]
});

// B) Inline config object for store instanced in A)
var storeConfig = {
    xtype: 'store:array',  
    fields: [ 'company', 'price' ],
    data: [
        ['3m Co',71.72],
        ['Alcoa Inc',29.01],
        ['Boeing Co.',75.43]
    ]
}; 
```

这是沙箱中的代码：http: [//jsfiddle.net/cFD9W/1/](http://jsfiddle.net/cFD9W/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:36:46.707

在商店内联配置中，您只需指定商店的类型。'xtype' 仅适用于小部件（前缀为 'widget' 的别名）

```
var storeConfig = {
    type: 'array',
    fields: [ 'company', 'price' ],
    data: [
        ['3m Co',71.72],
        ['Alcoa Inc',29.01],
        ['Boeing Co.',75.43]
    ]
}; 
```

尝试在控制台中打印 Ext.ClassManager.maps.aliasToName 以了解别名。

# c# - params 具有默认参数值的参数

> ID：15129296
> 
> 赞同：9
> 
> 时间：2013-02-28T06:51:23.977
> 
> 标签：c#, params

我看到这个`params`参数的次数比我能说的要多，并且总是在不考虑它的含义的情况下删除它。现在我知道了它的用途。我刚刚学到的是`params`参数必须是参数列表中的最后一个。但这是我对指定默认值的参数的了解。例子：

```
MyMethod(string Name, int blah=0). 
```

所以问题是如果我需要在需要使用的同时指定上面的默认值`params`，可以这样做吗？如果是这样，哪个必须最后声明？例子：

```
MyMethod(int blah=0, params string[] variableData). 
```

再次感谢您的帮助。詹姆士

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:54:29.757

你的例子是正确的：

```
public void TestMethod(string name = "asdasd", params int[] items)
{
} 
```

`params`必须是最后一个，无论在此之前使用什么参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T06:59:39.063

是的，`params`这是一种特殊情况——它们是唯一*没有*默认值的参数可以出现在有默认值*的*参数之后的情况。

但是，您不能在不指定可选参数的情况下调用该方法并利用`params`事物的另一面（对于非空数组）：

```
MyMethod(5, "x", "y");                            // Fine, no defaulting
MyMethod(variableData: new string[] { "x", "y"}); // Default for blah
MyMethod();                                       // Default for blah, empty variableData
MyMethod(new string[] { "x, "y" });               // Invalid   
MyMethod("x", "y");                               // Invalid 
```

# python - 从 PGP 按键中获取用户熵的最佳 Python 方法？

> ID：15129304
> 
> 赞同：0
> 
> 时间：2013-02-28T06:51:44.730
> 
> 标签：python, pgp, entropy

有没有人记得[PGP](http://en.wikipedia.org/wiki/Pretty_Good_Privacy)提示用户通过敲击随机键来“生成一些熵”？

PGP 将在收集熵时测量熵，用一个很酷的小进度条向用户指示，并在内部对击键进行计时，进行一些处理并将其用作某事或其他事情的种子。

我想制作一个快速例程（控制台应用程序），在 python 中执行*类似*的“熵收集”步骤，但我对一些问题不知所措：

1.  最佳计时方法
2.  收集单个击键的最佳方法
3.  向用户显示酷进度条的最佳方法
4.  关于处理步骤的想法，或 PGP 步骤的实际细节。

最好的上述手段：

*   最严格最干净的代码
*   最准确的（如以皮秒或其他方式计时）
*   大多数pythonic/功能和使用标准库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:02:17.703

是的 ：

```
def gen_user_random():
    from Fourganizical import pack8
    import time,sys
    print 'Hey there user, start a-bashing that keyboard to make some randomness.'
    keystimes = []
    lasttime = None
    while len(keystimes) < 20:
            key = getch()
            timenow = (time.time() + time.clock())
            if lasttime:
                    timesince = timenow-lasttime
                    keystimes.append(int(timesince*100000000000000000))
            lasttime = timenow
    print 'Check out this *nasty* random number you made!'
    rnum = int(''.join([str(x) for x in keystimes]))
    print rnum
    print 'And OMG here is that *nasty* set of bytes it made!'
    rbytes = pack8(rnum)
    print
    sys.stdout.write(''.join(rbytes))
    print
    print
    return keystimes 
```

这会产生一些**[非常讨厌的](http://www.youtube.com/watch?v=4r7wHMg5Yjg)**随机性。

**pack8**只取一个任意长度的整数，并以 256 为基数将其作为字节序列输出。

# file-io - 如何读取不同文件格式的数据并将其用于压缩

> ID：15129311
> 
> 赞同：0
> 
> 时间：2013-02-28T06:52:03.310
> 
> 标签：file-io, python-2.7

```
fob = open('this.txt','rb')
fob1 = open('that.txt','wb')
content = ''
for i in fob:
    content += i
fob1.write(content)
fob.close()
fob1.close() 
```

这是一个用于读取 txt 文件并将其存储在 txt 文件中的代码。我如何读取任何类型的文件？？？tht 可能是 jpeg 文件、pdf 文件或其他文件.. 请帮帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:13:47.493

您的代码逐行读取 *.txt 文件（并复制它）。

如果你想逐字节读取不同类型的文件，并打印它的位，你可以这样做：

```
f = open('test.gnu','rb')
flag=1;
while flag:
    byte = f.read(1)
    flag = (byte != "")
    if flag:
        # do something with the byte, eg:
        # print its bits:
        print '{0:08b}'.format(ord(byte))
f.close() 
```

或者如果你想压缩和解压缩文件，你可以使用包“zipfile” [http://docs.python.org/2/library/zipfile](http://docs.python.org/2/library/zipfile)；有关具有各种压缩格式示例的代码，请参见： http: [//pymotw.com/2/compression.html](http://pymotw.com/2/compression.html)

# tablelayout - 在表格布局中设置背景图像

> ID：15129314
> 
> 赞同：1
> 
> 时间：2013-02-28T06:52:11.557
> 
> 标签：tablelayout

我为我的一个 xml 使用了表格布局

我正在尝试添加一个背景图像，如下所示：

```
 android:background="@drawable/myimg" 
```

den 我收到了类似的错误

```
02-28 11:58:57.713: E/AndroidRuntime(850): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.Scan}: android.view.InflateException: Binary XML file line #3: Error inflating class android.widget.TableLayout 
```

我什至试过如下：

```
 <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bkg1">

 <TableLayout
            android:id="@+id/linearLayout1_tblLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/linearLayout1_tblLayout1_tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center" >

                ......

               </TableRow>

            </TableLayout>
           </LinearLayout> 
```

然后我也遇到了同样的错误。

请有人帮助我。！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:14:15.427

对不起，伙计，这是我的错

我使用的是 jpeg 格式的文件。

当我使用 .png 文件时。

我设法解决了我的问题..

***您只能将 .PNG 格式的文件设置为布局***

# css - 代码点火器：CSS 文件中的 base_url() 不起作用

> ID：15129319
> 
> 赞同：4
> 
> 时间：2013-02-28T06:52:36.593
> 
> 标签：css, codeigniter, image, base-url

base_url() 不适用于 CSS 文件...

这是我的 php：

```
<link rel="stylesheet" type="text/css" href="<?=base_url()?>css/style.css"/>
<body>
</body> 
```

这是我的 css/style.css ：

```
body {
  background:#356aa0 url(<?=base_url()?>img/background.png) repeat-x;
  color:#fff;
} 
```

文本颜色变为白色，但图像不显示...如果我使用 url(../img/background.png)，它会显示...但是当我打开 url localhost/project/index. php/control/function/var1/var2，它不显示...

已经解决了，谢谢大家... :]

我在视图文件夹中创建 php 文件，如下所示：

```
<?php header("content-type: text/css"); ?>

body {
    background:url(<?=base_url()?>img/background.png);
} 
```

我加载了我刚刚在控制器上使用函数制作的 php 文件，然后我链接它：

```
<link type="text/css" rel="stylesheet" href="<?=base_url()?>control/style.php"/> 
```

辛苦了，谢谢各位...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T07:00:39.143

你应该这样做

文件结构

```
myapp/
    application/
    system/ 
    css/
    img/ 
```

在css中写这个

```
body {
  background:#356aa0 url(../img/background.png) repeat-x;
  color:#fff;
} 
```

现在叫它

```
<link rel="stylesheet" type="text/css" href="<?=base_url()?>css/style.css"/> 
```

这是标准的做法。此外，您的 css 不是动态的，因此您不必担心其中使用 php 代码。我在答案中提出的结构肯定会正确使用样式并加载图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:57:42.647

CSS 文件不会被解析为 PHP 文件。如果您真的想做这样的事情，请将您的文件重命名为`styles.php`

打开页面并添加

```
header("content-type: text/css"); 
```

这告诉页面被视为基于文本的 CSS 文件。然后你可以简单地回显你剩余的 CSS，比如

```
echo "
body {
....
....
"; 
```

* * *

要修复`base_url()`无法通过`styles.php`设置会话变量来保持它。您可以将其保存在您`index.php`的 codeignitor 上。

```
$_SESSION['base_url'] = base_url(); 
```

现在，在里面使用这个`styles.php`。

```
background: url("<?php echo $_SESSION['base_url']; ?>"/../../some.jpg"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T06:58:07.240

将您的 base_url() 从 CSS 文件中取出。那将解决问题。您不能将 PHP 代码放在 CSS 文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-29T15:32:42.403

您不需要将 php 文件制作为 css。只需将您的图像文件放在“应用程序”文件夹之外，例如在 assets/img 上。然后编辑你的css文件

```
.error {
  color: #D8000C;
  background-color: #FFBABA;
  background-image: url('../img/error.png');
  background-size: 20px 20px;
} 
```

使用调用css文件

```
 <link rel="stylesheet" href="<?php echo base_url(); ?>assets/css/style.css" media="all"> 
```

它绝对会起作用，伙计！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:33:32.250

如果您的文件夹结构是：

```
YourAppFolder/
    application/
           public/
               css/
               img/
         system/ 
```

然后在您的视图中使用它：

```
<link rel="stylesheet" type="text/css" href="<?=base_url()?>public/css/style.css"/> 
```

并在 css 中将此用于图像：

```
background:#356aa0 url(../img/background.png) repeat-x; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-08T03:07:29.073

试试这个..

替换这个：

```
<link rel="stylesheet" type="text/css" href="<?=base_url()?>css/style.css"/>
<body>
</body> 
```

有了这个：

```
<link rel="stylesheet" type="text/css" href="<?php base_url(CSS/style.css)?>"/>
<body>
</body> 
```

还要替换 css/style.css 中的以下内容：

```
body {
  background:#356aa0 url(<?=base_url()?>img/background.png) repeat-x;
  color:#fff;
} 
```

有了这个：

```
body {
  background:#356aa0 url(../img/background.png) repeat-x;
  color:#fff;
} 
```

注意：如果它不起作用，请尝试使用一个点（.）-> **./img/background.png**

假设你的文件结构是这样的：

```
-ci
--application
--CSS
---file.css
--img
---background.png
--system
.
.
. 
```

和你的`base_url() : " http://localhost/sitename/ "`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-06T17:21:02.847

或者你可以写...

```
 <link rel="stylesheet" type="text/css" href="<? echo base_url('your css file from base url') ?>/> 
```

这是你的外部 css 文件

```
 body {
  background:url(<? echo base_url('your image path from base url')?>) repeat-x;
  color:#fff;
} 
```

# c - 每次上下文切换后立即运行一个函数，在 windows-XP 下的 C 中

> ID：15129323
> 
> 赞同：0
> 
> 时间：2013-02-28T06:52:51.047
> 
> 标签：c, multithreading, windows-xp, context-switch

我在 windows-XP 下用 C 语言编写一个多线程应用程序。我正在寻找一种方法来运行一个函数，就在应用程序线程之间的每次上下文切换之后（并且就在新线程开始之前）。更准确地说，我想在某个内存地址中分配一个不同的值，具体取决于我进入的线程。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:27:49.800

> 在每次上下文切换后立即运行一个函数

这从一开始就注定了：你无法控制上下文切换。如果刚刚调用您的函数时操作系统切换会发生什么？然后转回来？又一次处决？

如果您想要的只是为每个线程提供具有特定内容的变量，请按照其他建议查看线程本地存储。

如果您需要对子流程计算和调度进行细粒度和绝对控制，请使用[fiber](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682661%28v=vs.85%29.aspx)。但这不是你轻松做的事情......

# typesafe-stack - 类型安全：超过 API 速率限制

> ID：15129328
> 
> 赞同：0
> 
> 时间：2013-02-28T06:53:06.993
> 
> 标签：typesafe-stack

从入门指南尝试 Typesafe 堆栈模板

[http://typesafe.com/resources/typesafe-stack/downloading-installing.html](http://typesafe.com/resources/typesafe-stack/downloading-installing.html)

对于以下命令，我收到错误“my_ipaddress 超出 API 速率限制”？

```
$ g8 typesafehub/play-scala
This template generates a Scala play 2.0.X project (verbatim means exclude files from parsing) 
verbatim [*.html *.js]:
application_secret [CHANGEME12345678]:
application_name [my_app]: tutorial_play
play_version [2.0.2]: 
dispatch.StatusCode: Unexpected response code: 403
{"message":"API Rate Limit Exceeded for <my_ip_address>"}
    at dispatch.HttpExecutor$$anonfun$when$1.apply(executor.scala:53)
    at dispatch.HttpExecutor$$anonfun$when$1.apply(executor.scala:50)
    at dispatch.HttpExecutor$$anonfun$x$2.apply(executor.scala:41)
    at dispatch.HttpExecutor$$anonfun$x$2.apply(executor.scala:36)
    at dispatch.BlockingHttp$$anonfun$execute$1.apply(Http.scala:54)
    at dispatch.Http.pack(Http.scala:25)
    at dispatch.BlockingHttp$class.execute(Http.scala:53)
    at dispatch.Http.execute(Http.scala:21)
    at dispatch.HttpExecutor$class.x(executor.scala:36)
    at dispatch.Http.x(Http.scala:21)
    at dispatch.HttpExecutor$class.when(executor.scala:50)
    at dispatch.Http.when(Http.scala:21)
    at dispatch.HttpExecutor$class.apply(executor.scala:60)
    at dispatch.Http.apply(Http.scala:21)
    at giter8.Apply$$anonfun$write$1$$anonfun$apply$23.apply(apply.scala:123)
    at giter8.Apply$$anonfun$write$1$$anonfun$apply$23.apply(apply.scala:123)
    at scala.util.control.Exception$Catch$$anonfun$opt$1.apply(Exception.scala:104)
    at scala.util.control.Exception$Catch$$anonfun$opt$1.apply(Exception.scala:104)
    at scala.util.control.Exception$Catch.apply(Exception.scala:88)
    at scala.util.control.Exception$Catch.opt(Exception.scala:104)
    at giter8.Apply$$anonfun$write$1.apply(apply.scala:122)
    at giter8.Apply$$anonfun$write$1.apply(apply.scala:115)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:45)
    at giter8.Apply$class.write(apply.scala:115)
    at giter8.Giter8.write(giter8.scala:3)
    at giter8.Apply$$anonfun$inspect$1.apply(apply.scala:35)
    at giter8.Apply$$anonfun$inspect$1.apply(apply.scala:21)
    at scala.Either$RightProjection.flatMap(Either.scala:277)
    at giter8.Apply$class.inspect(apply.scala:21)
    at giter8.Giter8.inspect(giter8.scala:3)
    at giter8.Giter8.run(giter8.scala:22)
    at giter8.Giter8.run(giter8.scala:16)
    at giter8.Giter8.run(giter8.scala:3)
    at xsbt.boot.Launch$.run(Launch.scala:54)
    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:43)
    at xsbt.boot.Launch$.launch(Launch.scala:68)
    at xsbt.boot.Launch$.apply(Launch.scala:14)
    at xsbt.boot.Boot$.runImpl(Boot.scala:25)
    at xsbt.boot.Boot$.main(Boot.scala:15)
    at xsbt.boot.Boot.main(Boot.scala)
Error during sbt execution: dispatch.StatusCode: Unexpected response code: 403 {"message":"API Rate Limit Exceeded for <my_ipaddress>"} 
```

这个错误是什么意思&如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:31:16.587

Try again later. Maybe you downloaded too many projects!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:30:15.097

它来自 Github API。你已经通过 g8超过了他们的[API 速率限制：](http://developer.github.com/changes/2012-10-14-rate-limit-changes/)

> 未经身份验证的请求将限制为每小时 60 个

g8 内部使用了 Github API，你可能在一小时内使用 g8 超过 60 次。

# android - 适配器和 DialogView - 不确定如何构建适配器

> ID：15129332
> 
> 赞同：0
> 
> 时间：2013-02-28T06:53:11.633
> 
> 标签：android, android-adapter, android-adapterview

因此，我尝试使用从 API 获得的文件夹列表填充对话框，一旦用户单击文件夹，我将再次使用其子文件夹等填充对话框。但我不太确定所有内容如何组合在一起。至此对话框已显示，现在我需要添加实际内容。

```
 @Override
 protected View onCreateDialogView() {

    LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
    View vw = inflater.inflate(R.layout.channel_content_view, null);
    ListView lv = (ListView) vw.findViewById(android.R.id.list);
    File[] files = ChannelHandler.getChannels();
    HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(ctx, files);
    lv.setAdapter(adapter);
    return vw;
 } 
```

我不确定*HiddenChannelsListAdapter*类的外观。

这就是我到目前为止所拥有的：

```
package com.example.tvrplayer;

import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class HiddenChannelsListAdapter extends BaseAdapter {
    public HiddenChannelsListAdapter(Context ctx, File[] files) {
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        View view = null;
        Log.i("ADAPTER", "Hello");
        return view;
    }

} 
```

当我现在尝试打开对话框时，它得到一个 NullPointerException，我认为这是因为适配器除了返回 null 之外没有做任何事情。

适配器返回什么？它在哪里返回它？我现在很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:56:26.587

试试这样

```
public class ContactListCursorAdapter extends BaseAdapter {

/** Remember our context so we can use it when constructing views. */
private Context mContext;

/**
* Hold onto a copy of the entire Contact List.
*/
private List<ContactEntry> mItems = new ArrayList<ContactEntry>();

public ContactListCursorAdapter(Context context, ArrayList<ContactEntry> items) {
     mContext = context;
     mItems = items;
}

public int getCount() {
     return mItems .size();
}

public Object getItem(int position) {
     return mItems .get(position);
}

 /** Use the array index as a unique id. */
public long getItemId(int position) {
     return position;
}

/**
* @param convertView
*            The old view to overwrite, if one is passed
* @returns a ContactEntryView that holds wraps around an ContactEntry
*/
public View getView(int position, View convertView, ViewGroup parent) {
    ContactEntryView btv;
    if (convertView == null) {
         btv = new ContactEntryView(mContext, mShow.get(position));
    } else {
         btv = (ContactEntryView) convertView;
         String name = mShow.get(position).getName();
         btv.setNameText(name);
         String number = mShow.get(position).getNumber();
         if (number != null) {
              btv.setNumberText("Mobile: " + mShow.get(position).getNumber());
         }
    }
        return btv;
}
} 
```

# c# - 更新 elmah 日志条目

> ID：15129333
> 
> 赞同：0
> 
> 时间：2013-02-28T06:53:13.970
> 
> 标签：c#, asp.net-mvc, elmah

我正在使用 ELMAH 记录在我的 ASP.NET MVC 项目中引发的异常。日志记录就像一个魅力，但我想存储有关错误的其他信息。为此，用户在友好的错误页面上有一个文本区域，因此他可以输入例如他在错误发生之前采取了哪些步骤……计划是将附加数据添加到异常中，然后更新条目。

```
Model.Exception.Data.Add("userData", stuff); 
```

我的问题是，ELMAH 在重定向到友好的错误页面之前写入了 db-entry。有没有办法告诉 elmah 使用自定义信息“更新”日志条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:35:01.440

我通过删除条目解决了这个问题，然后使用用户文本的服务器变量重新插入它。

# css - 将鼠标悬停在 div 内的 span 上，显示其他元素

> ID：15129334
> 
> 赞同：2
> 
> 时间：2013-02-28T06:53:13.873
> 
> 标签：css, hover

我希望当鼠标悬停在 span id='requestSent' 时显示 div id='cancelReq'

我已经尝试过这段代码，但它不起作用。

```
<style> 
    #cancelReq {
         display: none;
    }

    #requestSent:hover + #cancelReq { 
         display: block;
    }   
</style>

<div id='addUser'>
     <span id='requestSent'>Add Friend</span>
</div>
<div id='cancelReq' >hello there</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:02:35.227

您可以为此使用javascript。这是您的问题的代码：

```
<script type="text/javascript">
     function fun(){
         document.getElementById("cancelReq").style.display = "block";
     }

     function fun1(){
         document.getElementById("cancelReq").style.display = "none";
     }
</script> 
```

并使您的 HTML 代码如下所示：

```
<div id='addUser'><span id='requestSent' onmouseover="fun();" onmouseout="fun1();" >Add Friend</span></div>
<div id='cancelReq' >hello there</div> 
```

# c# - 使用jquery在按钮单击时填充下拉列表

> ID：15129336
> 
> 赞同：0
> 
> 时间：2013-02-28T06:53:35.727
> 
> 标签：c#, asp.net

在我的应用程序中，我有一个下拉列表，将在单击按钮时填充。我尝试了一些在 document.ready 上运行良好但在单击按钮时不起作用的代码。

```
 $(document).ready(function () {
        $("#<%=btn.ClientID %>").bind('click',function () {
            //
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "gridpaging.aspx/binddropdown",
                data: "{}",
                dataType: "json",
                success: function (data) {
                    $.each(data.d, function (key, value) {
                        $("#ddl").append($("<option> </option>").val(value.UserId).html(value.UserName));
                    });
                    //

                },
                error: function (result) {

                    alert("Error occured");
                }
            });
        });
    }); 
```

请让我知道我哪里出错了..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:58:44.777

看起来你在这里混合了两种技术。一个是 ejs: <%=btn.ClientID %>，它是一个提供动态内容的模板引擎。另一个是你的jQuery。可以解决您的问题的方法是向该按钮添加一个类，而不是依赖您的 btn.ClientID，然后使用 $(".myClass").bind('click', function() ...

看看能不能解决你的问题。如果没有，我需要更多信息。ejs 是在服务器端还是在客户端编译？您使用的是骨干网还是某种编译 ejs 的前端框架？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:05:51.740

yourdeveloperfriend 几乎是对的，除了`<%=btn.ClientID %>`不是 ejs，而是 asp.net 片段，它很可能在错误的地方使用。我只能想象一个可行的场景，那就是当这个 JS 代码位于你的 aspx 文件中时，但很可能你将它放在一个单独的 js 文件中。所以按照你的开发者朋友说的做，在按钮上放一个类，然后在你的 JS 中使用它作为选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T12:54:32.363

我也遇到了同样的问题，并通过更改 id 设置解决了这个问题

`$("#ddl")`

至

`$('#<%=ddl.ClientID%>')`

# unit-testing - CoreDispatcher 在带有响应式扩展的单元测试中

> ID：15129337
> 
> 赞同：0
> 
> 时间：2013-02-28T06:53:35.233
> 
> 标签：unit-testing, mstest, windows-store-apps, system.reactive

我的 Windows 8 应用商店应用中有以下代码：

```
 public static void ConvertUpdateStreamToCollection<T>(this IObservable<UpdateInfo<T>> input, ObservableCollection<T> list)
    {
        input
            .ObserveOnDispatcher()
            .Subscribe(upInfo => UpdateList(upInfo, list));
    } 
```

那个 ObserveOnDispatcher 在那里，这通常会在后台线程上调用，当它更新可观察列表时，我需要它在 UI 调度程序上。首先，当我运行应用程序时，它看起来运行良好。

但我希望用单元测试来测试它。我正在使用内置的 MSTest。然而，ObserveOnDispatcher 抛出，抱怨没有可以从中获取 CoreDispatcher 的有效窗口。

我在堆栈溢出的其他地方看到了[WPF](https://stackoverflow.com/questions/1106881/using-the-wpf-dispatcher-in-unit-tests)的变通方法。但这看起来只是让调度程序运行的东西。这个错误似乎更根本。有已知的解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:06:18.793

（编辑：更好的格式，因为我有一个键盘而不是电话）

还有另一种实现相同功能的方法：

```
.ObserveOnDispatcher() 
```

相当相当于：

```
.ObserveOn(new DispatcherScheduler(Dispatcher.CurrentDispatcher)) 
```

现在，而不是那个 DispatcherScheduler，有一个像这样的类：

```
public static class Schedulers
{
    public static IScheduler Dispatcher {get; internal set;}    
} 
```

并将用法更改为：

```
.ObserveOn(Schedulers.Dispatcher) 
```

例子：

```
void Main()
{
    // For normal usage, we'll set this to the proper DispatcherScheduler
    Schedulers.Dispatcher = new DispatcherScheduler(Dispatcher.CurrentDispatcher);

    // Do stuff
    new Thingy().DoStuff();

    // for testing usage, we'll set this to be the immediate scheduler
    Schedulers.Dispatcher = Scheduler.Immediate;

    // Do stuff 
    new Thingy().DoStuff();
}

public class Thingy
{
    public void DoStuff()
    {
        var query = Observable.Range(0, 10).ObserveOn(Schedulers.Dispatcher);
        query.Subscribe(Console.WriteLine);
    }
} 
```

# ruby-on-rails - Rails 命名空间 - 从第二个控制器调用模型

> ID：15129342
> 
> 赞同：0
> 
> 时间：2013-02-28T06:54:05.187
> 
> 标签：ruby-on-rails, ruby, namespaces

我目前正在使用 Devise 进行用户身份验证，我想实现一个后端管理员来控制在管理面板中创建用户。

我已经生成了一个管理控制器，并为我的路由添加了一个命名空间。

```
-> routes.rb

namespace :admin do
  resources :users
end 
```

当我耙路线时，我得到以下信息

```
 admin_users GET    /admin/users(.:format)            admin/users#index
                     POST   /admin/users(.:format)            admin/users#create
      new_admin_user GET    /admin/users/new(.:format)        admin/users#new
     edit_admin_user GET    /admin/users/:id/edit(.:format)   admin/users#edit
          admin_user GET    /admin/users/:id(.:format)        admin/users#show
                     PUT    /admin/users/:id(.:format)        admin/users#update
                     DELETE /admin/users/:id(.:format)        admin/users#destroy 
```

哪一个是我们想要的？现在我的问题是，管理控制器中功能的命名约定是什么？

如何命名我的函数以便它们对应于以下路径？我将功能放在用户控制器或管理员中？

我收到路由错误

```
uninitialized constant Admin 
```

我认为我还没有掌握路由的窍门。任何额外的资源也将不胜感激。

我一直在查看[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)但没有取得多大成功。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:09:08.533

这是命名空间控制器的典型设置（注意继承）：

```
# app/controllers/admin/base_controller.rb:
class Admin::BaseController < ApplicationController
end

# app/controllers/admin/users_controller.rb:
class Admin::UsersController < Admin::BaseController
  # here, you can define all of the methods shown by 'rake routes':
  def index
    # ...
  end

  def show
    # ...
  end

  # etc...
end 
```

为 admin 命名空间提供了一个很好的`Admin::BaseController`顶级类，类似于 与`ApplicationController`其余控制器的关系。您可以在这里抛出一个`before_filter`仅授权管理员用户，它将在从基本控制器继承的类的任何方法之前调用。

# ios - 在 Monotouch.Dialog 中录制麦克风的声音

> ID：15129344
> 
> 赞同：0
> 
> 时间：2013-02-28T06:54:09.103
> 
> 标签：ios, microphone, monotouch.dialog, xamarin

Xamarin 示例在这里找到：http: [//docs.xamarin.com/samples/Sound](http://docs.xamarin.com/samples/Sound)工作，但 GUI 不是 Monotouch.Dialog，它与我的 MD APP 的其余部分一起看起来很差。

如何添加 Monotouch.Dialog 控制器，开始和停止录制，并在录制时显示经过的时间。

Apple 制作了这个[http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)，其中包含 VU 表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:18:55.750

查看 Xamarin 示例中的此类[https://github.com/xamarin/monotouch-samples/blob/master/Sound/Sound/SoundViewController.cs](https://github.com/xamarin/monotouch-samples/blob/master/Sound/Sound/SoundViewController.cs)

基本上，您会想要创建自己的`DialogViewController`：您将需要`using`示例中的语句。

```
using MonoTouch.AVFoundation;
using System.Diagnostics;
using System.IO;
using MonoTouch.AudioToolbox;

public class SoundRecorder : DialogViewController {
    this.Title = "Record Sound";
    root = new RootElement() {
        new section () {
            new StringElement ("Record", delegate {
                // sound recording code from sample for the first button
            }
        }
    }
} 
```

这应该给你一个开始。

您可能希望分离元素并分别声明它们，如下所示：

```
StringElement myElement = new StyledStringElement("record something"); 
```

然后，您可以使用委托订阅 tapped 事件，并以这种方式处理按下按钮的时间。这样你就可以多做一点。对于更多样式选择，您需要一个`StyledStringElement`

希望这可以帮助

# objective-c - nsstring 中的范围是什么以及我们如何在其中传递值？

> ID：15129346
> 
> 赞同：-4
> 
> 时间：2013-02-28T06:54:20.300
> 
> 标签：objective-c, xcode4

什么是范围`NSString`？例如，当我们使用以下功能时-

```
replaceOccurrencesOfString:withString:options:range: 
```

应该传入什么参数？

场景 - 在字符串的前半部分找到“aaa”并将其替换为“bbb”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:02:42.547

range 参数是`NSRange`由`location`和组成的类型`length`。顾名思义，它指定了方法中应该使用的字符串中的字符范围。

警告：这个意义上的“字符”实际上是一个 Unicode UTF-16“代码片段”——这不是人们通常期望的字符。因此，将字符串分成两半可能会在代理对中间分裂，这会使子字符串无效。要在适当的位置拆分，请使用`rangeOfComposedCharacterSequencesForRange:`.

这是一个适当的例子：

```
NSMutableString *myString = [@"有人给我们树立了炸弹" mutableCopy];
NSRange range = {0, [myString length] / 2};
range = [myString rangeOfComposedCharacterSequencesForRange:range];
[myString replaceOccurrencesOfString:@"炸弹"
                          withString:@""
                             options:0
                               range:range]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:19:31.960

```
NSString *foo = @"ABCD 1234 ABCD TEST";
NSLog(@"Actual string: %@",foo);
int location = [foo rangeOfString:@"1234"].location; //location of 1234
NSRange range = NSMakeRange(location, (foo.length)-location); //create range
foo = [foo stringByReplacingOccurrencesOfString:@"ABCD" withString:@"foo" options:NSLiteralSearch range:range]; //replacing ABCD with foo
NSLog(@"Updated string: %@",foo); 
```

> 实际字符串：ABCD 1234 ABCD TEST
> 
> 更新字符串：ABCD 1234 foo TEST

**在这里，我在 foo 中搜索 1234，然后使用 NSRange 替换 1234 string 之后出现的 ABCD**。

# sql - 如何从两个选择语句 a.AMT_HOSP 和 b.AMT_DEBTR 中找到不同的值

> ID：15129347
> 
> 赞同：0
> 
> 时间：2013-02-28T06:54:24.573
> 
> 标签：sql

```
select
  a.ACCOUNT_HOSPITAL, a.AMT_HOSP, b.ACCOUNT_DEBTOR , b.AMT_DEBTR     
from     
  (SELECT
     GTN.boepisodeaccount_ID as ACCOUNT_HOSPITAL, txn.TXN_AMT as AMT_HOSP
   FROM BOEPISODEACCOUNTTXN GTN, boepisodedebtortxn txn 
   WHERE GTN.BOEPISODEACCOUNTTXN_id = txn.BOEPISODEACCOUNTTXN_id AND
     gtn.boepisodeaccount_id =
      ( select boepisodeaccount_id from boepisodeaccount 
        where  episode_no ='A101200046'
      )
  ) a
  INNER JOIN
    ( select bd.boepisodeaccount_ID as ACCOUNT_DEBTOR, bdt.TXN_AMT AS AMT_DEBTR
      from boepisodedebtor bd, boepisodedebtortxn bdt 
      where bd.boepisodedebtor_id = bdt.boepisodedebtor_id 
      and bd.BOEPISODEACCOUNT_ID =
      ( select boepisodeaccount_id from boepisodeaccount 
        where  episode_no ='A101200046'
      )
    ) b
  ON a.ACCOUNT_HOSPITAL = b.ACCOUNT_DEBTOR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:50:15.713

在 WHERE 子句中添加这个表达式`a.AMT_HOSP <> b.AMT_DEBTR`））

# ruby-on-rails - ruby 2.0 rails gem 安装错误“无法加载此类文件--openssl”

> ID：15129355
> 
> 赞同：60
> 
> 时间：2013-02-28T06:54:42.653
> 
> 标签：ruby-on-rails, ruby

我正在使用**osx 10.8.2**安装的**ruby​​ 2.0**并且....在尝试运行**“sudo gem install rails”时得到了这个**

```
$ sudo gem install rails
ERROR:  Loading command: install (LoadError)
    cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
    undefined method `invoke_with_build_args' for nil:NilClass 
```

我之前有 ruby​​ 1.9.x 和 rails 3.2.x 工作正常

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-28T10:42:03.243

您必须先安装 OpenSSL 并再次重新编译 ruby​​：

RVM：

```
rvm pkg install openssl
rvm reinstall ruby-2.0.0-p0 --with-gcc=gcc-4.7 --with-openssl-dir=$rvm_path/usr 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-05T08:58:32.690

如果您使用的是 RVM，请遵循：

```
$ brew install automake
$ rvm pkg install openssl
$ rvm requirements run
$ rvm reinstall all --force
$ gem install rails 
```

它对我有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-07T18:12:03.910

我在这个错误上度过了非常糟糕的时光。最后我完成了。只有使用 RVM 或没有 RVM 的解决方案只有一次。

**确保在安装 ruby​​ 之前先安装了 OpenSSL。**

**虚拟机**

1.  卸载 rvm

    rvm 内爆

或者

```
rm -rf ~/.rvm 
```

不要忘记删除 .bashrc 和/或 .bash_profile（或您正在使用的任何 shell）中的脚本调用。sudo apt-get install zlib1g zlib1g-dev build-essential openssl libssl-dev libmysqlclient18 libmysqlclient-dev libyaml-dev curl git-core python-software-properties libpq-dev nodejs

然后安装 RVM，发布 ruby​​。

或者

```
rvm pkg install openssl
rvm reinstall ruby-2.0.0-p0 --with-gcc=gcc-4.7 --with-openssl-dir=$rvm_path/usr 
```

**没有 RVM**

首先你应该找到 Ruby 在哪里：

```
whereis ruby 
```

将列出它在您的系统上存在的所有位置，然后您可以显式删除它们。或者你可以使用这样的东西：

```
rm -rf /usr/local/lib/ruby
rm -rf /usr/lib/ruby
rm -f /usr/local/bin/ruby
rm -f /usr/bin/ruby
rm -f /usr/local/bin/irb
rm -f /usr/bin/irb
rm -f /usr/local/bin/gem
rm -f /usr/bin/gem 
```

然后

```
sudo apt-get install zlib1g zlib1g-dev build-essential openssl libssl-dev libmysqlclient18 libmysqlclient-dev libyaml-dev curl git-core python-software-properties libpq-dev nodejs

apt-get -y update
apt-get -y install build-essential zlib1g-dev libssl-dev libreadline6-dev libyaml-dev
cd /tmp
wget http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz
tar -xvzf ruby-2.0.0-p247.tar.gz
cd ruby-2.0.0-p247/
./configure --prefix=/usr/local
make
make install 
```

我希望这对你有帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-03-26T18:44:36.530

我为 ruby​​ 2.1.2 修复了这个错误，如下所示。

```
rvm pkg install openssl
rvm reinstall ruby-2.1.2 --with-openssl-dir=$rvm_path/usr 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-06T21:26:36.810

在 OSX 上，使用 rbenv 和 homebrew，以下对我有用：

```
brew install openssl
CONFIGURE_OPTS=--with-openssl-dir=$(brew --prefix openssl) rbenv install whatever-ruby-version 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-17T01:35:54.413

这对我有用，类似于已经发布的其他一些答案。

```
rvm pkg install openssl
rvm reinstall all --force 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T18:40:49.010

安装 ruby​​ 2.0 时，可能 ruby​​gems 2.0 安装没有完成，因为 openssl。确保提供 openssl 配置文件的有效路径；你可以：

```
find . -type f -name "openssl.cnf" 
```

路径通常是 $HOME/.rvm/usr 或 $HOME/.rvm/usr/ssl

然后

```
[sudo] rvm reinstall ruby-2.0.0-p0 --with-openssl-dir=[openssl.cnf path] --verify-downloads 1 
```

确保 ruby​​gems 安装成功完成。可能是在不重新安装的情况下修复该路径的更好方法，但这应该可以。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-02T14:12:43.787

请务必在 rvm 网站上查看此页面： [https ://rvm.io/packages/openssl/](https://rvm.io/packages/openssl/)

跑步

`rvm requirements run`

给我：

`Missing required packages: autoconf, automake, libtool, pkg-config, apple-gcc42, readline, libxml2, libxslt, libksba, openssl, sqlite`

后`brew install autoconf automake ...`

我能够`rvm reinstall 2.0.0`没有openssl错误

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-06T22:32:10.023

我在相同的操作系统版本上遇到了同样的问题。我使用 rvm 并按照此命令中的步骤操作：

```
$ rvm requirements 
```

按照这些说明，我跑了：

```
$ brew update
$ brew tap homebrew/dupes
$ brew install bash curl git
$ brew install autoconf automake apple-gcc42 libtool pkg-config openssl readline libyaml sqlite libxml2 libxslt libksba 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-09-07T19:37:23.060

我之前遇到过同样的问题，尝试了所有的片段，但都没有成功。环顾四周后，以下内容对我有用：

```
$ rvm remove 2.0.0 # get rid of unsuccessful installation
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm install ruby-2.0.0
$ rvm --default use ruby-2.0.0 
```

具体做什么`rvm get head --autolibs=3`？我猜它会自动下载依赖项，但我希望有一个明确的答案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-14T01:14:50.803

我在 Fedora 上尝试使用时遇到了同样的 openssl 错误`gem install <package>`。看来您需要使用 yum/dnf 安装其他软件包

```
sudo dnf install rubygems rubygem-bundler ruby-devel mariadb-devel 
```

运行上述命令后，`gem install <package>`现在应该可以工作了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-12T09:09:55.517

刚刚经历了同样的问题。需要一点时间，但是，升级 openssl

```
brew upgrade openssl@1.1 
```

为我工作。以后版本可能会有所不同，输入 brew install openssl 查看可以升级到哪个版本。我希望它有所帮助。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-21T02:16:41.223

如果您有 libssl **1.1**，您的问题可能是这些旧版本的 ruby​​（2.4 是截止）仅与 libssl1.0 兼容。

对于 debian/ubuntu，请确保`apt-get install libssl1.0-dev`成功。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-02-20T17:36:36.090

如果您使用`ruby-install`，它将采用与 rvm 相同的 openssl 参数：

```
ruby-install ruby-2.0.0-p247 -- --with-openssl-dir=/usr/local/opt/openssl 
```

# android - 将方向横向更改为纵向时，onConfigurationChanged() 调用两次

> ID：15129357
> 
> 赞同：7
> 
> 时间：2013-02-28T06:55:03.270
> 
> 标签：android, configuration, tabs

我在我的应用程序中遇到了奇怪的问题。我在[这里](https://stackoverflow.com/questions/14561693/tab-widget-issue-when-use-androidconfigchanges-orientationkeyboardhidden-in)问的主要问题。问题是`android:configChanges="keyboardHidden|orientation"` 在我的代码中不起作用。

所以我找到了通过`@Override onConfigurationChanged()`我的代码中的方法管理它的解决方案来管理方向。但问题并没有得到妥善解决。

当前的问题是`onConfigurationChanged()`当我们将方向横向更改为纵向时调用两次。

如果我们将手机纵向更改为横向，它的变化和工作但现在当用户将手机横向移动到纵向 时，`onConfigurationChanged()`将调用并返回相同的方向状态，并且在第二次调用中它将返回纵向。

**代码 ：**

```
@Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        super.onConfigurationChanged(newConfig);

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
        {
             Log.e("On Config Change", "LANDSCAPE");

            Toast.makeText(getApplicationContext(), "L", Toast.LENGTH_LONG)
                    .show();
        } else 
        {
            Log.e("On Config Change", "PORTRAIT");
            Toast.makeText(getApplicationContext(), "P", Toast.LENGTH_LONG)
                    .show();
        }
    } 
```

**日志**

```
first mode its port mode , so change in land mode 

02-28 12:10:06.274: E/On Config Change(540): LANDSCAPE 
02-28 12:10:14.154: E/On Config Change(540): LANDSCAPE
// here after changed the land mode try to chage in port mode then its calling two times as you can see as per the log 
02-28 12:10:14.593: E/On Config Change(540): PORTRAIT
02-28 12:11:39.524: E/On Config Change(540): LANDSCAPE 
```

**同一个问题的另一个查询>>**

当我们改变方向时（调用时），它将终止当前活动`onConfigurationChanged`。所以根据我之前的问题，我在不同的文件夹中有两个布局。因此，当我更改屏幕活动时，将删除所有数据。因此，无论如何，当用户更改手机方向时，我如何保存该数据以向用户显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-06T10:31:19.787

我不确定如何调用两次，但为了避免在您的应用程序中出现错误行为， 如果现在收到的方向与之前的方向相同，`onConfigurationChanged()`您可以取消执行。`onConfigurationChanged()`为我工作，希望它也适合你:)

# java - 如何从浏览器获取当前 URL

> ID：15129358
> 
> 赞同：1
> 
> 时间：2013-02-28T06:55:05.200
> 
> 标签：java, android

我正在编写一个系统应用程序。我需要知道当前在浏览器中打开了哪些 URL。我的应用程序包含`Service`确定哪个应用程序在前面处于活动状态。此外，我的应用程序包含`IME`（SoftKeyboard），它可以访问浏览器活动的可编辑视图（如果我的 IME 已打开且处于活动状态）。是否可以在浏览器（本机浏览器、Opera、Chrome 等）中打开当前 URL？我可以从`Service`或从获取此 URL`IME`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:21:19.200

我用`inputEditor.fieldName`在`IME`. 在 SDK 2.3.XI 中获得该属性等价物`field_name\http://domain.com?blablabla`。我可以解析这个字符串并获取当前 URL `http://domain.com?blablabla`。

但这仅适用于 SDK 2.3.X，不适用于其他 SDK。这个属性返回`null`。可能在另一个 SDK 中有一个类似的属性吗？

关于如何从自己的浏览器获取当前 URL 的任何想法`IME`？

# javascript - 在某些情况下不要退回 poshytip

> ID：15129359
> 
> 赞同：0
> 
> 时间：2013-02-28T06:55:06.230
> 
> 标签：javascript, jquery, tooltip, jquery-tooltip

当我将鼠标悬停在类中的元素上时，我想显示 poshytips，但前提是它们满足内容函数中指定的条件。如果没有，我不希望出现一个空气泡。

```
$('[class~="label"]').poshytip({
            slide: false, 
            followCursor: true, 
            alignTo: 'cursor', 
            showTimeout: 0, 
            hideTimeout: 0, 
            alignX: 'center', 
            alignY: 'inner-bottom', 
            className: 'tip-ihme',
            offsetY: 10,
            content: function() {
                if(this.id.length>25 & sbar.settings.stackBy == 'region') {
                    return this.id
                }   
            },
            liveEvents: true
        });
    } 
```

但是，当我将鼠标悬停在不符合此规范的元素上时（即 this.id.length<25），仍然会显示一个小（空）气泡。有没有办法过滤掉 jquery 调用中的选择？我尝试了数组样式过滤：

```
 $('[class~="label"]').filter(function(d) { return d.id.length>25}).poshytip(.... 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:28:23.817

试试这个：

```
$('[class~="label"]').each(function(){
    if($(this).attr('id').length>25)
    {
        $(this).poshytip({
           // your code
        });
    }
}); 
```

# php - 无法使用 exec 命令运行 PHP

> ID：15129366
> 
> 赞同：0
> 
> 时间：2013-02-28T06:55:47.133
> 
> 标签：php, apache, exec

我在运行一个连续的后台进程时遇到问题，其中父进程启动 2 或 3 个子进程然后自行结束，子进程的计算量很大，因此它们将花费大量时间。

我正在使用 exec 命令启动进程，但不知道它不会启动，也不会产生任何错误（错误报告已打开，E_ALL 和 display_errors）

这是我试图做到这一点的方法

```
error_reporting(E_ALL);
ini_set('display_errors',1);
$output = '';
$dir = dirname(__FILE__).'/';
//$cmd = "nohup php {$dir}/background-service.php > /dev/null & echo $!";
$cmd = "nohup php background-service.php >/dev/null 2>&1 &";
exec($cmd ); 
```

后台服务.php

```
<?php
ini_set('max_execution_time', 0);
ini_set('display_errors',1);

file_put_contents('a'.time().'.txt',"this is the test code");

?> 
```

当我直接点击文件时，它会生成一个文件，但不是使用 exec，我已经测试了 exec 已启用（ubuntu 服务器）

```
if ( $safe_mode = ini_get( 'safe_mode' ) && strtolower( $safe_mode ) != 'off' )
{
    echo 'Safe Mode is Disabled';
}
else
    echo 'Safe Mode is Enabled<br/>';

if ( in_array( 'exec', array_map( 'trim', explode( ',', ini_get( 'disable_functions' ) ) ) ) )
{
    echo 'exec is Disabled';
}
else
echo 'exec is Enabled<br/>'; 
```

有人请告诉我哪里错了，我如何检测它是否被服务器禁用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:03:54.663

这只是一个猜测，但请尝试使用您正在执行的任何内容的完整路径。从 shell 运行命令可能适用于您的用户帐户，但请记住该进程是以 apache 用户身份运行的。

此外，使用带有附加参数的 exec() 可能对您有用。第三个参数可以指定将命令的返回状态存储在哪里（可能会帮助您弄清楚这一点）。（由[PHP 手册](http://php.net/manual/en/function.exec.php)提供）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:06:20.493

检查此[安全模式执行目录](http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir)，默认情况下，您不需要为命令行脚本设置最大执行时间，它们没有限制。

# python - 在给定步骤数的情况下生成所有可能的字典组合？

> ID：15129368
> 
> 赞同：0
> 
> 时间：2013-02-28T06:55:57.400
> 
> 标签：python

认为：

仅使用 4 个字母（a、b、c、d）

假设我有一本包含 4 个字母的出现次数（>=0）的字典

```
d = {"a":1, "b":2, "c":1, "d":3} 
```

我得到了一个“步数”。

我想找到给定“步数”出现减法的所有可能的字典。

例如

```
# given the above dictionary and a steps of 2
moo = {"a":1, "b":1, "c":1, "d":2}
# moo is a possibility because I simply took away 1 b and 1 d
# how do I find all the possibilities? (note: occurrences cannot be negative) 
```

编辑：步骤正好是 2 个步骤

注意：我想找到所有“moo”，或者在给定参考字典和许多步骤的情况下可能的所有字典。我不在乎测试两个字典是否满足步骤要求。

我想我想出了一些递归代码来解决这个问题：

```
def genDict(d, steps):
    if steps == 0:
        return [d]
    dList = []
    for key, value in d.items():
        if value > 0:
            temp = dict(d)
            temp[key] = value -1
            dList += genDict(temp, steps-1)
    return dList 
```

任何人都有一个不会占用内存的非递归解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:24:32.373

它不使用很多内存，因为它在递归中更改了相同的列表，但是如果您想收集结果而不是仅仅打印它，您需要将 d 的深层副本附加到结果列表中。

```
d = map(list, {"a":1, "b":2, "c":1, "d":3}.items())
step = 2
def choose(d, pos, step):
    if step == 0:
        print d
        return
    if d[pos][1] > 0:
        d[pos][1] -= 1
        choose(d, pos, step-1)
        d[pos][1] += 1
    if pos < len(d)-1:
        choose(d, pos+1, step)
choose(d, 0, 2) 
```

这个输出：

```
[['a', 0], ['c', 0], ['b', 2], ['d', 3]]
[['a', 0], ['c', 1], ['b', 1], ['d', 3]]
[['a', 0], ['c', 1], ['b', 2], ['d', 2]]
[['a', 1], ['c', 0], ['b', 1], ['d', 3]]
[['a', 1], ['c', 0], ['b', 2], ['d', 2]]
[['a', 1], ['c', 1], ['b', 0], ['d', 3]]
[['a', 1], ['c', 1], ['b', 1], ['d', 2]]
[['a', 1], ['c', 1], ['b', 2], ['d', 1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:10:05.150

如果我正确理解你的问题...

1.  从字典中获取完整的字符串。

    ```
    d = {"a":1, "b":2, "c":1, "d":3}
    my_string = ""
    for key, value in d.iteritems():
        my_string += key * value
    # my_string now contains 1 a, 2 b's, 1 c, and 3 d's. 
    ```

2.  用于[`itertools.permutations`](http://docs.python.org/2/library/itertools.html#itertools.permutations)获取字符串的所有可能排列。

    ```
    from itertools import permutations
    for i in permutations(my_string):
        print i # Do something meaningful with the output 
    ```

# javascript - 将字符串对象转换为 Json 对象

> ID：15129369
> 
> 赞同：0
> 
> 时间：2013-02-28T06:56:01.053
> 
> 标签：javascript, jquery, backbone.js, underscore.js

`" {"error":"ApplicationException","reason":"Data types of key columns do not match. 'USERS.lastmodifiedtime' is of 'TIMESTAMP', 'state_list.name' is of 'VARCHAR'."} "`

以字符串格式存储，我需要json格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:59:30.593

现代浏览器内置了 parser [`JSON.parse(string)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。

如果您必须支持旧版浏览器，您可以添加[json2](https://github.com/douglascrockford/JSON-js) / [json3](http://bestiejs.github.com/json3/)库。如果浏览器中不存在本机支持，这些将添加 JSON.parse 支持。

如果字符串无效，则会引发解析错误，在您的情况下，您可能必须转义`'`s.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T06:58:25.603

采用

> jQuery.parseJSON( json )

例子

```
var obj = jQuery.parseJSON('{"error":"ApplicationException"}'); 
```

有关更多信息，[请参阅详细信息](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T07:01:18.563

要将 JSON-*字符串*^(**1**)转换为`Object`,`parse`它。您应该注意在这里转义撇号：

```
JSON.parse('{"error":"ApplicationException","reason":"Data types of key columns do not match. \'USERS.lastmodifiedtime\' is of \'TIMESTAMP\', \'state_list.name\' is of \'VARCHAR\'."}') 
```

^(**1**) JSON*：***Java**脚本***对象***注解**_** **_** _

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T06:58:22.390

你可以使用这样的东西

```
var obj = jQuery.parseJSON('{"error":"ApplicationException"}'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:58:46.397

你可以使用（jQuery）

```
$.parseJSON(STRING); 
```**

# algorithm - 同步：生产者/消费者未锁定计数

> ID：15129378
> 
> 赞同：0
> 
> 时间：2013-02-28T06:56:35.980
> 
> 标签：algorithm, synchronization

以下代码取自维基百科：

```
semaphore mutex = 1;
semaphore fillCount = 0;
semaphore emptyCount = BUFFER_SIZE;

procedure producer() {
    while (true) {
        item = produceItem();
        down(emptyCount);
            down(mutex);
                putItemIntoBuffer(item);
            up(mutex);
        up(fillCount);
    }
}

procedure consumer() {
    while (true) {
        down(fillCount);
            down(mutex);
                item = removeItemFromBuffer();
            up(mutex);
        up(emptyCount);
        consumeItem(item);
    }
} 
```

我感到困惑的是为什么消费者和生产者中的 down/up(fillCount) 不在互斥锁之外。这是否意味着它们会同时被多个线程修改？

# java - 使用 HSSFRegionUtil (Apache POI) 为合并单元格添加边框

> ID：15129385
> 
> 赞同：1
> 
> 时间：2013-02-28T06:57:10.113
> 
> 标签：java, excel, apache-poi

我正在使用 Apache POI，发现当我使用 HSSFRegionUtil 为合并的单元格添加边框时，只出现一个单元格的边框。

以下是代码

```
 Region region = new Region((short)0,(short)0,(short)1,(short)0);
    sheet.addMergedRegion(region);
    HSSFRegionUtil.setBorderRight(HSSFCellStyle.BORDER_MEDIUM,region, sheet, workbook); 
```

它只显示一个单元格的单元格边界，而不是区域边界。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:18:17.320

就个人而言，我不使用 HSSFRegionUtil 为合并区域添加边框。我的解决方案是：

假设您要合并从第 1 行第 1 列到第 5 行第 5 列的区域

1）将cellStyle设置为单元格1,1

2）编写一个将单元格样式复制到所有其他单元格的方法。

3）合并区域

这里有一个例子：

```
 CellStyle style = defaultBorderStyle;
    Row tempRow = currentSheet.getRow(startRow);
    Cell cell = tempRow.getCell(startColumn);

    for (int i = startRow; i <= endRow; i++) {
        tempRow = currentSheet.getRow(i);

        for (int j = startColumn; j <= endColumn  ; j++) {
            tempRow.getCell(j).setCellStyle(style);
        }

    }
    sheet.addMergedRegion(new CellRangeAddress(startRow, endRow, startColumn, endColumn)); 
```

# objective-c - 如何在 Objective-C xcode 中以编程方式创建 .sqlitedb 和 .db 文件（呼叫、短信、便笺、电子邮件、日历）的备份？

> ID：15129387
> 
> 赞同：0
> 
> 时间：2013-02-28T06:57:19.113
> 
> 标签：objective-c, sqlite, ios5, xcode4

由于 Calls、SMS、Emails 和 Calender 等所有 Db 文件都存在于其中，

```
SMS:         /Var/Mobile/Library/SMS

Contacts /User/Library/AddressBook

Mail:         /Var/Mobile/Library/Mail

Calendar:     /Var/Mobile/Library/Calendar

Call History:     /Var/Mobile/Library/CallHistory

Notes:         /Var/Mobile/Library/Notes

Safari:         /Var/Mobile/Library/Safari 
```

如何以编程方式创建最重要的备份文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:11:10.350

如果您想将该数据库备份到您的设备，您可以尝试此操作。苹果可能不允许您访问呼叫列表的数据库文件。

```
if (![[NSFileManager defaultManager] fileExistsAtPath:@"YOUR DB FILE PATH"]) 
    {
        if ([[NSFileManager defaultManager] copyItemAtPath:"YOUR DB FILE PATH" toPath:@"PATH WHERE YOU WANT TO BACKUP" error:nil]) 
        {
            NSLog(@"Backuped");
        } 
        else 
        {
            NSLog(@"Error in backuping the database");
        }
    } 
```

# ruby-on-rails - 3000 个场景的多个黄瓜实例

> ID：15129397
> 
> 赞同：1
> 
> 时间：2013-02-28T06:58:14.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, selenium, cucumber

我有一个包含 3000 多个场景的测试包。现在的问题是，当我一次性运行场景时..大约需要 10 个小时才能完成，我想将场景分成 4 个块，每个块大约 750 个场景并想在不同的窗口/终端（VMware）中并行运行它们。有解决方法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:02:29.293

这个问题有一个 selenium 标签，所以（假设这是准确的）[Selenium-Grid](http://docs.seleniumhq.org/docs/07_selenium_grid.jsp#selenium-grid-2-0)将是设置分布式并行测试环境的一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:34:56.743

orde 提到了 Selenium Grid，这就是其中的一部分。您从中获得的主要好处是，您只需在创建新的 selenium 实例时在代码中标识您的服务器集线器。

接下来是一次实际执行 4 个 750 个场景的块。我建议使用像 Jenkins 这样的 CI 工具来完成这项工作，您将在 Jenkins 的 web gui 上获得结果。

# sql - SQL 查询的奇怪行为

> ID：15129398
> 
> 赞同：3
> 
> 时间：2013-02-28T06:58:18.597
> 
> 标签：sql, sql-server, sql-server-2012

我写了一个查询（这是该查询的最简单形式）

```
declare @tbl1 table(name varchar(50))
declare @tbl2 table(name varchar(50))
declare @query varchar(600)
set @query = ''

insert into @tbl1
select 'a' union select 'b'  union select 'c'  union select 'd'  union select 'e'

insert into @tbl2
select '1' union select '2'  union select '3'  union select '4'  union select '5'

select 
 @query = 
 ' Go ' + 
 @query +
 tbl1.name + ' (' +
 substring(
 (
    select ', ' + tbl2.name
    from @tbl2 as tbl2
    for xml path('')
 ), 3, 5000) + ') '
from @tbl1 as tbl1

print @query 
```

我期待这样的结果

```
 GO a (1, 2, 3, 4, 5) GO  b (1, 2, 3, 4, 5)  GO c (1, 2, 3, 4, 5)  GO d (1, 2, 3, 4, 5)  GO e (1, 2, 3, 4, 5) 
```

但是这个平均查询返回给我

```
 Go  Go  Go  Go  Go a (1, 2, 3, 4, 5) b (1, 2, 3, 4, 5) c (1, 2, 3, 4, 5) d (1, 2, 3, 4, 5) e (1, 2, 3, 4, 5) 
```

有人可以向我解释这个结果吗？我不明白这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:07:13.910

您需要将其更改为

```
select 
 @query = 
 @query +
 ' Go ' +    
 tbl1.name + ' (' +
 substring(
 (
    select ', ' + tbl2.name
    from @tbl2 as tbl2
    for xml path('')
 ), 3, 5000) + ') '
from @tbl1 as tbl1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T07:16:32.633

如果您忽略字符串查询部分中的详细信息，您将执行以下操作：

```
@query = ' Go ' + @query + 't(...) ' 
```

从一开始就为`@query`空，第一次迭代是：

```
@query = ' Go ' + '' + 't(...) ' 
```

这是`' Go t(...) '`。下一次迭代变为：

```
@query = ' Go ' + ' Go t(...) ' + 't(...)' 
```

最终为`' Go Go t(...) t(...) '`.

如您所见，`Go`首先在字符串中添加 ，最后添加查询，因此您最终`Go`会在字符串的开头添加 all 。

# netbeans - 使用 Netbeans 的 FTP、Checkout 存储库

> ID：15129399
> 
> 赞同：1
> 
> 时间：2013-02-28T06:58:19.990
> 
> 标签：netbeans, ftp, vcs-checkout

我是一个新手，在某些情况下我想知道，因为当我尝试通过 FTP 连接服务器时，我正在寻找的文件已经显示，但是当我使用 NetBeans 签出该特定文件时没有数据已被取回。怎么来的？我用的是windows7

# java - Spring 集成基准测试

> ID：15129405
> 
> 赞同：-3
> 
> 时间：2013-02-28T06:58:30.517
> 
> 标签：java, spring, jakarta-ee, jms, spring-integration

我想知道是否有人对作为消息传递提供者的 Spring Integration 框架有任何经验？

我找不到任何基准或细节。

想知道有关延迟、吞吐量、性能的详细信息。

有人有经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:54:07.890

与任何框架一样，都会有一些最小的运行时开销，但这远远超过了由此产生的松散耦合、敏捷、健壮的架构和（通常）减少的开发时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:37:18.293

我无法提供任何基于基准的官方数字，但我们一直在使用 Spring Integration（中间有 JMS 代理）作为我们的两个产品的底层框架，这些产品服务于 HTTP 流量，其中延迟和吞吐量也是最重要的因素. 两者都证明了它们在非常重的负载下的可靠性 - 在一些欧洲顶级电子商务网站的基础设施中处于第一线（仅次于负载均衡器） - 没有滞后，没有意外失败，可扩展性很好。当然一切都取决于你如何设计渠道中的流程，但根据我以前的经验，如果我必须再次开发类似的解决方案，我肯定会去 Spring Integration。

# java - 读取java变量值的Javascript代码

> ID：15129408
> 
> 赞同：5
> 
> 时间：2013-02-28T06:58:44.310
> 
> 标签：java, javascript

*   我在 java 文件中有一个会话变量。(TestConnection.java)

> session.setAttribute("CONNECTION_DBNAME", dbName);

*   如何将 CONNECTION_DBNAME 值读入 javascript 文件。(utility.js)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T07:04:29.567

```
 First access the variable in scriptlet.

 <% 
    String param= (String)session.getAttribute("CONNECTION_DBNAME");
 %>

Then use like this.

  <script>
  var X = '<%=param%>';
  </script> 
```

然后您可以使用 x 访问该名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T07:05:55.147

```
 <script>
<%
    String dbname=(String)session.getAttribute("CONNECTION_DBNAME");
%>  
  </script> 
```

这段代码对你有用..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:12:26.810

您可以使用 JSP 中的隐藏元素从会话中获取值，例如：- `<textarea id="txtData" style.display='none'><%=session.getAttribute("CONNECTION_DBNAME") %></textarea>`

之后，您可以通过`var dbConnName=document.getElementById("txtData").value;`

你就完成了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-21T12:09:16.597

十多年前，Scriptlet 已被取缔！

更好的方法...在 jsp 中，将值包含在隐藏的 div 中：

```
<div id="javaValues" style="display: none;">
    <div id="employee">${employee}</div>
    <div id="dept">${dept}</div>
</div> 
```

使用`<div>`'s 而不是`<input type="hidden">`，因为它们不会干扰您的表单发布。

在 javascript（假设为 jQuery）中，您可以访问这些值，例如：

```
 var employee = $("#employee").html().trim();
    var dept = $("#dept").html().trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:03:49.017

您无法从客户端访问会话中的变量。您可以为客户端提供 Ajax 调用以动态检索值，或将值设置保留在脚本块中。

JSF：

```
<script>var dbName = "#{myBean.value}";</script> 
```

（从字面上看，如果是字符串，关键是引号需要在那里）：

```
<script>var dbName = "#{session.getAttribute('CONNECTION_DBNAME')}";</script> 
```

但是，在朝着这个方向前进之前，您应该重新考虑，因为通过这种机制让 JavaScript 访问您的数据库几乎没有意义。除非您的数据库是公开的，否则您似乎走在了公开数据库连接详细信息的道路上，而客户端不应该需要或拥有这些详细信息。您的服务器/页面应充当获取此信息的中继。

现在，如果这是一个管理控制台，那么您可能仍然不希望在 JavaScript 中使用它，但显示设置是可以接受的。无论如何，除非连接详细信息是用户特定的，否则您可能在 Session 中不需要它们。

# node.js - 无法通过网络浏览器访问我的 nodejs 服务器

> ID：15129410
> 
> 赞同：0
> 
> 时间：2013-02-28T06:58:46.070
> 
> 标签：node.js, nginx, amazon-web-services

好的，所以我不久前在 AWS EC2 微服务器上设置了一个 node.js 服务器。我对它完全陌生，并按照各种教程来启动和运行它。它使用 nginx 作为反向代理（我相信）并且服务器正在侦听端口 8124。

现在，实例重新启动，我无法在我的生命中重新访问我的服务器。我可以通过 ssh 访问它。我可以启动服务器。我可以通过本地命令行向它发送 POST/PUT 请求，但我的网络浏览器给了我 404 nginx 页面。

这把我逼到了墙边——浏览器/nginx/nodejs 链中的什么地方出了问题？

请帮助-我对此非常陌生，它一定是某处损坏的单行。我只是不知道找到它。

我的 /etc/nginx/sites-enables/default 文件只包含

```
location / {
    proxy_pass      http://127.0.0.1:8124/;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:37:31.920

好吧，我想通了。我必须直接进入 /etc/nginx/nginx.conf 和那里的服务器

```
location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    } 
```

我添加了行

```
 proxy_pass http://127.0.0.1:8124/; 
```

哦，感谢上帝。那会杀了我。

# android - 安卓多屏支持

> ID：15129413
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:58:49.300
> 
> 标签：android, android-layout

我正在寻找修复我在 android 上的多个屏幕尺寸的布局的最佳途径。我有一个很棒的应用程序，几乎可以发布了。但是我的一个合作伙伴在三星平板电脑上尝试了它，图标和一些功能太小了

所以我在想我是在屏幕尺寸上改变分辨率还是有更简单的方法？

这是我的布局代码任何建议会有帮助吗？

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
<merge xmlns:tools="http://schemas.android.com/tools"
xmlns:pj="http://schemas.android.com/apk/res/com.example.waysecure"
xmlns:bm="com.example.waysecure"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"     xmlns:android="http://schemas.android.com/apk/res/android">
<Button
    android:id="@+id/button_pannic"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/pannic"
    android:visibility="visible" />
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="bottom"
    android:layout_marginTop="50dp" >
    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <FrameLayout
        android:id="@+id/Fofo"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>
    </RelativeLayout>
 <SlidingDrawer
 android:id="@+id/sg_below"
 android:layout_width="match_parent"
 android:layout_height="275dp"
 android:layout_gravity="bottom"
 android:layout_marginTop="200dp"
 android:content="@+id/content"
 android:handle="@+id/handle" >
<Button android:layout_width="match_parent" android:layout_height="60dp" android:id="@+id/handle" android:background="@drawable/tray_handle_normal" />
<RelativeLayout
    android:id="@+id/content2"
    android:layout_width="wrap_content"
    android:layout_height="282dp"
    android:background="#aa000000" >
        </RelativeLayout><TabHost  android:id="@+id/content" android:layout_width="match_parent" android:layout_height="match_parent">
   <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="bottom"
            android:background="#aa000000" >
 <LinearLayout android:id="@+id/tab1" android:layout_width="match_parent" android:layout_height="match_parent">

            </LinearLayout>
              <GridView
                  android:id="@+id/tab2"
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:layout_gravity="bottom"
                  android:columnWidth="90dp"
                  android:gravity="center"
                  android:horizontalSpacing="1dp"
                  android:numColumns="auto_fit"
                  android:stretchMode="columnWidth"
                  android:verticalSpacing="1dp" > 
            </GridView>  <LinearLayout android:id="@+id/tab3" android:layout_width="match_parent" android:layout_height="match_parent">
                  <com.carouseldemo.controls.Carousel android:id="@+id/carousel2" android:layout_width="match_parent" android:layout_height="match_parent" android:animationDuration="200" pj:Items="@array/entries" pj:Names="@array/names" pj:SelectedItem="0" pj:UseReflection="true">
                </com.carouseldemo.controls.Carousel>  
            </LinearLayout>
        </FrameLayout>
    <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top" >
        </TabWidget>
    </TabHost>
</SlidingDrawer>
</merge> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:07:11.913

您需要在 res 文件夹中为不同的屏幕放置额外的布局。

如果您想`7 inch`以 res 名称创建布局文件夹为`layout-sw720dp`

对于`10 inch`创建`layout-xlarge`

从文件夹中复制所有文件`layout`并粘贴文件并调整大小。

使用所有屏幕进行转换和测试。

请参阅链接以获取更多屏幕

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:04:55.957

您唯一需要做的就是`<support-screens>` 在您的`manifest`和下面 添加`<support-screens>`：

```
 <supports-screens android:resizeable=["true"| "false"]
              android:smallScreens=["true" | "false"]
              android:normalScreens=["true" | "false"]
              android:largeScreens=["true" | "false"]
              android:xlargeScreens=["true" | "false"]
              android:anyDensity=["true" | "false"]
              android:compatibleWidthLimitDp="integer"
              android:largestWidthLimitDp="integer"/> 
```

创建一致布局的提示：

1.  不要硬编码任何`layout`参数，例如`width`，`height`等。
2.  不要使用“ `px`” 。使用“ `sp`”作为文本大小，使用“ `dp`”作为`layout-width`等`layout-height`。
3.  使用`RelativeLayout`和`LinearLayout`不使用`AbsoluteLayout`，因为它已被弃用。
4.  `ScrollView`在需要的地方使用，因为`layouts`它支持单视图。

有关更多信息，请查看[Support Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)的 Android 开发人员文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T07:20:09.623

我为此配置了一种方法。对我来说，这是一种打击和尝试的方法。当我开发我的[第一个 android 应用程序](https://play.google.com/store/apps/details?id=com.recipe.pack)时，同样的问题也发生在我身上，但最后，我成功了。为了完美支持每一个屏幕分辨率，在全屏图像的情况下，制作4张不同分辨率的图像：

```
hdpi: 480*800
ldpi: 320*460
mdpi:720*960
xhdpi: 800*1280 
```

如果您的应用支持两种方向，则为横向模式制作不同的布局，并将其放置在 layout-land 中具有相同的名称，相关信息可以在此[链接](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC4QFjAA&url=http://developer.android.com/guide/practices/screens_support.html&ei=8wQvUYCyJcrRrQf-pIGoBw&usg=AFQjCNHemvlQ2sNEATp3v6KONvL52P-N7A&bvm=bv.42965579,d.bmk)上找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:24:35.730

您必须在 res 文件夹中创建 layout_size 文件夹

> 为不同尺寸的屏幕创建不同的 xml 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-04T12:48:10.580

请参考这个..它可能对你有帮助..fend![设备屏幕和分辨率](../Images/f8b45b5fe8adeab3bd58798244516185.png)

# c# - 为什么在文本更改组合框选择更改

> ID：15129416
> 
> 赞同：2
> 
> 时间：2013-02-28T06:59:02.000
> 
> 标签：c#, winforms, combobox, textbox

对不起，我想可能不清楚这个问题：

问题是我有一个 Windows 窗体，我`ComboBox`从我的代码中填写 a 并将其设置`SelectedIndex`为**1**。我的问题是，当我写东西时 all`ComboBox`会`SelectedIndex`自动变为**0**。

第一张图片显示我还没有填写任何值。第二个，是当我在`TextBox`.

![不变](../Images/ae1899e40c57e60793fe06fbb7293fed.png) ![在此处输入图像描述](../Images/62894cf4355e06a27cb06db218f7ac5c.png)

我没有`TextChanged`活动。我还要明确表示我正在使用`BindingSource`此表格。

我的代码`ComboBox`是这样的：

```
 private void FillNationality()
    {   

        var items = new BindingList<KeyValuePair<string, string>>();

        items.Add(new KeyValuePair<string, string>("E", "Expatriate"));
        items.Add(new KeyValuePair<string, string>("R", "Resident"));
        items.Add(new KeyValuePair<string, string>("Z", "Zambian"));

        nationalityComboBox.DataSource = items;
        nationalityComboBox.ValueMember = "Key";
        nationalityComboBox.DisplayMember = "Value";
        nationalityComboBox.SelectedIndex = 0;
    } 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T20:28:45.990

**ComboBox**被重置，因为它绑定**到 TextBox**，并且随着 TextBox 中的 Text 更改，有界控件被更新。我不确定我的回答是否会阻止这个问题，但试一试。在**TextBox的****TextChanged**事件中添加以下代码；

 **```
int value=1;//Set this value equal to index that you want to select.

private void Textbox_TextChangedEvent(object sender,EventArgs e)
{
   Combobox.SelectedIndex=value;//Change Combobox to you control's name.
} 
```

我知道这看起来很疯狂，'每次在 TextBox 中输入字符时都在组合框中选择一个值'。但是尝试的损失是什么？**

# smarty - 如何使用 php 代码清除 smarty templates_c 文件夹

> ID：15129417
> 
> 赞同：1
> 
> 时间：2013-02-28T06:59:03.000
> 
> 标签：smarty

我在 smarty 缓存中有问题。当从管理网站更新内容时，我可以立即查看新内容，但是当我检查主站点中的同一页面时，我看到的是旧内容而不是新内容。当我清除服务器中的 templates_c 目录并刷新主站点时，我在第一次尝试时看到了新内容。我相信它在某个地方存在缓存问题。请尽快给我一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:15:04.147

这样的事情应该做（我自己没有测试过）：

```
<?php
$path = 'path/to/templates_c';
$dir = new DirectoryIterator($path);
foreach ($dir as $fileinfo) {
    if ($fileinfo->isFile()) {
        unlink($fileinfo->getPath());
    }
}
?> 
```

顺便说一句，在处理 unlink() 时要**非常小心，您可能会不小心删除您不打算删除的文件**

# c - 查找 read() 返回的错误

> ID：15129421
> 
> 赞同：2
> 
> 时间：2013-02-28T06:59:10.500
> 
> 标签：c, ipc, pipe

我正在使用管道读取父进程发送的数据。父进程关闭读取端并在管道的写入端写入数据。同样，child 关闭写端并从读端读取数据。

但在我的情况下，读取返回的`"-1"`是错误值。我应该如何发现`EAGAIN, EBADF, EIO`读取调用中发生了哪个错误（如）？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:00:37.037

> 我应该如何发现读取调用中发生了哪个错误（如 EAGAIN、EBADF、EIO）？

打印`errno`。更好的选择是`perror`在通话后立即执行 , 。

```
if (read(...) < 0)
    perror("read"); 
```

或者`strerror`，如果您需要自己获取消息，请使用：

```
printf("%s\n", strerror(errno)); 
```

`#include <errno.h>`请注意，如果您直接使用，则需`errno`要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:01:33.010

如果您使用 linux，则以下代码将打印相关的错误消息作为字符串：

```
printf("%s", strerror(errno)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T19:03:18.180

一个不可移植的 glibc 扩展，简单地尝试： printf( "%m" );

# java - 用小数分隔符格式化数字/字符串

> ID：15129422
> 
> 赞同：-1
> 
> 时间：2013-02-28T06:59:21.297
> 
> 标签：java, string-formatting, number-formatting, decimalformat

我正在尝试使用`DecimalFormat`. 但我希望它格式化一个数字，就像

```
input: 1234\.  -->  should be formatted to: 1,234. 
```

但我得到`1,234.0`或`1,234.00`取决于我的十进制格式规则我必须做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:02:53.647

应该帮助您的方法是[setMinimumFractionDigits](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setMinimumFractionDigits%28int%29)和[setMaximumFractionDigits](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setMaximumFractionDigits%28int%29)。

```
format.setMinimumFractionDigits(0); 
```

猜测一下，可能就是您要寻找的东西。

* * *

要确保始终显示小数分隔符，请使用：[DecimalFormat.setDecimalSeparatorAlwaysShown(true)](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setDecimalSeparatorAlwaysShown%28boolean%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:06:15.410

您可以通过使用格式化数字，无论它是否是小数

```
DecimalFormat f = new DecimalFormat("#,###"); 
f.format(whatever)... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:02:08.610

如果您不想显示任何小数位，请不要格式化浮点值:) 如果您使用`BigInteger`,`int`或`long`, 应该没问题：

```
import java.math.*;
import java.text.*;

public class Test {

    private static final char p = 'p';

    public static void main(String[] args) {
        NumberFormat format = new DecimalFormat();
        BigInteger value = BigInteger.valueOf(1234);
        System.out.println(format.format(value));
        System.out.println(format.format(1234));
        System.out.println(format.format(1234L));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:08:32.363

试试这个：

```
DecimalFormat df = new DecimalFormat("#,###.", DecimalFormatSymbols.getInstance(Locale.ENGLISH));
System.out.println(df.format(1234)); 
```

# javascript - 在同一 div 中显示帖子和图像

> ID：15129426
> 
> 赞同：0
> 
> 时间：2013-02-28T06:59:44.183
> 
> 标签：javascript, wordpress

我在特定 div 的页面中为同一类别的不同帖子显示了精选图像。我需要在另一个 div 的同一页面中显示与此图像相关的整个帖子。我知道我必须在此使用 JavaScript。但我需要一些可以用于此的参考。谁能帮我这个？我正在使用以下代码来显示图像

```
<?php
/*
Template Name: Meet The Team Template
*/
?>
<?php get_header(); ?>
<div id = "meet_posts" class = "narrowcolumn">
<?php 
     $recent = new WP_Query("cat=6&orderby=title&order=ASC"); 
     while( $recent->have_posts() ) : $recent->the_post();
     $desc_values = get_post_custom_values("description");

?>
<div id="meetteam_featured_image">
     <a href="<?php the_permalink() ?>" rel="title">
     <?php
          if ( has_post_thumbnail() ) {
              the_post_thumbnail();
          }
     ?>
     </a>
</div>
<?php endwhile; ?>
</div>
<?php get_footer(); ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:24:14.553

用以下代码替换上面的代码：

```
<?php /*
Template Name: Meet The Team Template
*/
?>
<?php get_header(); ?>
<div id="meet_posts" class="narrowcolumn">
<?php 
$recent = new WP_Query("cat=6&orderby=title&order=ASC"); 
while($recent->have_posts()):$recent->the_post();
$desc_values = get_post_custom_values("description");

?>
<div id="meetteam_featured_image" class="<?php the_ID(); ?>">
<a href="<?php the_permalink() ?>" rel="title">
 <?php
if ( has_post_thumbnail() )  { 
        the_post_thumbnail();
    }
?>
</a>
</div>
<?php endwhile ?>
<div id="image-post-info"></div>
</div>

<?php get_footer(); ?> 
```

在 functions.php 文件中添加以下代码：

```
add_action( 'wp_ajax_ajaxified_function', 'ajaxified_function' );
add_action( 'wp_ajax_nopriv_ajaxified_function', 'ajaxified_function' );
function ajaxified_function() {   
$temp = get_post($_POST['post_id']);
echo $temp->post_title.'<br/><br/>'.$temp->post_content;   
die();
} 
```

在您的自定义 js 文件中添加以下代码：

```
jQuery(document).ready(function (){       

 jQuery('#meetteam_featured_image a').on('click',function(event){         
 event.preventDefault();

 var post_id = jQuery(this).parent().attr('class');            
 jQuery.ajax({  
   type: "POST",                  
   url:  'http://www.yoursitename.com/wp-admin/admin-ajax.php',  
   data: 'action=ajaxified_function&post_id='+post_id,    
   success: function (msg) {                                        
      jQuery('#image-post-info').html(msg);
  },
  error: function () {                  
    alert('Error');                    
   }  
    });           
  });       
}); 
```

通过在 functions.php 文件中包含以下代码来添加自定义 js 文件：

```
function add_custom_scripts() {
wp_enqueue_script( 'custom-scripts',  get_stylesheet_directory_uri() .'/js/custom-     scripts.js' );
}
add_action( 'wp_enqueue_scripts', 'add_custom_scripts' ); 
```

希望这会有所帮助....!!!!!!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T07:57:36.947

```
<div id = "meet_posts" class = "narrowcolumn">
<?php 
     $recent = new WP_Query("cat=6&orderby=title&order=ASC"); 
     while( $recent->have_posts() ) : $recent->the_post();
     $desc_values = get_post_custom_values("description");

?>  
</div><!--close first div-->

<div id="meetteam_featured_image">
     <a href="<?php the_permalink() ?>" rel="title">
     <?php
          if ( has_post_thumbnail() ) {
              the_post_thumbnail();
          }
     ?>
     </a>
</div><!--close second div-->
<?php endwhile; ?> 
```

# asp.net - 将 .apsx 字段与 SAP 表字段连接

> ID：15129430
> 
> 赞同：1
> 
> 时间：2013-02-28T07:00:12.093
> 
> 标签：asp.net, sap-dotnet-connector

我有一个带有 requestDetails.cs,SAPconnect.cs,login.aspx.cs,request.aspx.cs 的 .net 应用程序。request.aspx 页面包含员工 ID、姓名等字段。我想将 request.aspx 文件的员工 ID 字段连接到 SAP 表字段。我使用 SAP .NET 连接器。我对每个文件的编码如下。

SAPconnect.cs

```
public class SAPsystemconnect: IDestinationConfiguration {
  public RfcConfigParameters GetParameters(string destinationName) {
    RfcConfigParameters parms = new RfcConfigParameters();
    if ("DEV".Equals(destinationName)) {

      parms.Add(RfcConfigParameters.AppServerHost, "ECC6");
      parms.Add(RfcConfigParameters.SystemNumber, "04");
      parms.Add(RfcConfigParameters.User, "sapuser");
      parms.Add(RfcConfigParameters.Password, "newmaars1");
      parms.Add(RfcConfigParameters.Client, "800");
      parms.Add(RfcConfigParameters.Language, "EN");
      parms.Add(RfcConfigParameters.PoolSize, "5");
      parms.Add(RfcConfigParameters.MaxPoolSize, "10");
      parms.Add(RfcConfigParameters.IdleTimeout, "600");

    }
    return parms;
  }

  public bool ChangeEventsSupported() {
    // Throw new NotImplementedException();
    return false;
  }

  public event RfcDestinationManager.ConfigurationChangeHandler ConfigurationChanged;

} 
```

登录.aspx.cs

```
protected void logon_Click(object sender, EventArgs e) {

  SAPsystemconnect sapconn = new SAPsystemconnect();
  RfcDestinationManager.RegisterDestinationConfiguration(sapconn);
  RfcDestination rfcDest = null;
  rfcDest = RfcDestinationManager.GetDestination("DEV");

  RequestDetails reqobj = new RequestDetails();
  reqobj.GetRequestDetails(rfcDest);

  //  RfcDestinationManager.UnregisterDestinationConfiguration(sapconn);
  Response.Redirect("request.aspx");

  System.Environment.Exit(0);
} 
```

请求详细信息.cs

```
public class RequestDetails {
    public string empid; //personnel numner
    public string name; //name of the employee
    public string department; //department of employee
    public string descr; //description of help
    public string problem; //problem 
    public string solution; //solution for the problem
    public string status; //status of help
    public string findings; //proble found during verification ;
    public string resolution; //resolutions for problem detected ;
    public string recommend; //recommended action
    public string remarks; //remarks for work done;
    public string feedback; //user feedback for work done;
    public int dococde; //description of document code
    public int auth1; //personnel number;
    public int auth2; //personnel numnber;
    public string sapcheck; //checkbox
    public string othercheck; //checkbox
    public string priority; //priority of request(HIGH,MED,LOW)
    public string saptrans; //transaction drop down
    public string tranreq; //request/task
    public string followtrans; //follow transaction type
    public string followdoc; //follow transaction doc number

    public void GetRequestDetails(RfcDestination destination) {
        try {

            RfcRepository repo = destination.Repository;
            IRfcFunction createRequest = repo.CreateFunction("ZSAVE");
            createRequest.Invoke(destination);
            IRfcTable helpreqtab = createRequest.GetTable("ZHELP_REQTAB");
            RequestDetails reqobj = new RequestDetails();

            reqobj.empid = helpreqtab.GetString("ZREQ_EMPID");

        }
        catch(RfcCommunicationException e) {

        }
        catch(RfcLogonException e) {
            // user could not logon...
        }
        catch(RfcAbapRuntimeException e) {
            // serious problem on ABAP system side...
        }
        catch(RfcAbapBaseException e) {
            // The function module returned an ABAP exception, an ABAP message
            // or an ABAP class-based exception...
        }
    }
} 
```

但是我收到这样的错误：

> 容器元数据 ZSAVE 的元素 ZHELP_REQTAB 未知

我想将数据保存到 SAP 表中`zhelp_reqtab`。谁能告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T15:40:35.290

我意识到这是一个非常古老的帖子，但我在搜索我自己的一些东西时登陆了它。SAP .Net Connector 3.0 有时很难找到相关信息，因此当我找到分享知识的机会时，我会尝试这样做。基本上，您的错误消息是说它找不到名为 ZHELP_REQTAB 的表，您确定这是返回的表的确切名称。有可能它是一个结构而不是一个表吗？我将转到 SAP 中的事务 SE37 并显示该 BAPI，从那里您可以看到导出的表和结构并获取这些对象的真实名称。一旦你把它摆平来访问那些它实际上非常简单。请记住，IRfcTable 基本上是 IrfcStructures 的列表，IRfcTables 还实现了 IEnumerable，因此您可以使用 LINQ 进行操作，或者如果您愿意，可以使用 Foreach 语句进行迭代。还要确定 BAPI 是否为您首先查看的错误消息生成标准返回表，以确保没有发生错误。如果 bapi 生成该表，则在 SAP 内部发生的 ABAP 异常范围之外的错误将在那里报告，并且不会在您这边引发异常。下面是访问表数据的示例。

```
 foreach (IRfcStructure str in helpreqtab)
 {
    //You can use get string if thefield type is string, you would use the proper Getmethod based on type of the field.
    empid = str["empid field name in table"].GetString()
 } 
```

或者，如果结果证明它是一个简单的结构，则不需要循环

```
empid = helpreqStruct["empid field name in table"].GetString() 
```

# c# - 如何实现一个已经有其他接口的接口？

> ID：15129433
> 
> 赞同：1
> 
> 时间：2013-02-28T07:00:22.293
> 
> 标签：c#, interface

该示例如下所示：

```
interface IA
{
    ICollection<IB> Bs {get;set;}
}

interface IB
{
}

public class BBase : IB
{

}

public class ABase : IA
{
    public ICollection<BBase> Bs { get; set; }
} 
```

问题是，当我想用​​ 实现接口`IA`时`BBase`，就像我在 中所做的那样`ABase`，发生了错误。那是说我只能使用`IB`而不是`BBase`实现`IA`in`ABase`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T07:03:22.267

你需要做的是`IA`通用的：

```
interface IA<T> where T : IB
{
    ICollection<T> Bs { get; set; }
}

interface IB
{
}

public class BBase : IB
{

}

public class ABase : IA<BBase>
{
    public ICollection<BBase> Bs { get; set; }
} 
```

接口的实现应该与它的定义完全匹配，因此在非泛型情况下，您应该完全符合`ICollection<IB> Bs {get;set;}`，`ABase`即它可以接受任何`IB`实现。

而当接口是通用的（`interface IA<T> where T : IB`）时，它的实现应该提供任何`T`满足给定约束的东西（即这里的一些精确实现`IB`）。因此`ABase`类也变得通用。

欲了解更多信息，请阅读：

1.  [通用接口（C# 编程指南）](http://msdn.microsoft.com/en-us/library/kwtft8ak.aspx)
2.  [where（泛型类型约束）（C# 参考）](http://msdn.microsoft.com/en-us/library/bb384067.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:27:13.113

您不能通过为其指定不同的类型来实现属性 - 请参阅[接口（C# 编程指南）](http://msdn.microsoft.com/en-US/library/vstudio/ms173156.aspx)：

> 要实现接口成员，实现类的对应成员必须是公共的、非静态的，并且与接口成员具有相同的名称和签名

在您的特定情况下，您要么需要将`ICollection<IB>`其用作属性的类型，`ABase`要么按照 Konstantin Vasilcov 的建议使用 generic `IA<T>`。

如果您不能采用通用路线，请考虑在“get”界面中设置属性 - 仅限。这样，您将能够不在类中提供 setter，并通过使用自定义方法将项目添加到集合来验证所有“添加到集合”操作。

# php - 如何优化 mysql 查询？

> ID：15129436
> 
> 赞同：1
> 
> 时间：2013-02-28T07:00:32.807
> 
> 标签：php, mysql

我使用此查询从数据库中获取数据

我如何优化和使用此连接的最佳代码？

```
connect();
$games_sql = mysql_query("SELECT gameid,mizbanid,mihmanid,score1,score2,gamedavar,gamestadium,now FROM games WHERE gameweek='$site_week' ORDER BY now ASC LIMIT 9");
for( $i = 0; $i < mysql_num_rows( $games_sql ); $i++ ) {
    $gameid = @mysql_result( $games_sql, $i, 0);
    $mizbanid = @mysql_result( $games_sql, $i, 1 );
    $mihmanid = @mysql_result( $games_sql, $i, 2);
    $score1 = @mysql_result( $games_sql, $i, 3);
    $score2 = @mysql_result( $games_sql, $i, 4);
    $gamedavar = @mysql_result( $games_sql, $i, 5);
    $gamestadium = @mysql_result( $games_sql, $i, 6);
    $now = @mysql_result( $games_sql, $i, 7);
    $gametimeanddate = jdate("l d M y ساعت G:i", $now);
    $gamedate = jdate("l d M y", $now);
    $gametime = jdate("G:i", $now);

`connect()` function include `mysql_connect` & `mysql_select_db` 
```

我如何优化此代码以实现低`user_connection`到数据库和高速？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:11:51.317

您始终可以使用缓存和内存缓存作为优化解决方案。您可以缓存您的查询，其余的请求可以从缓存中弹出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:13:56.570

为什么不查询一次数据库以获取所有信息？看看这个：

```
connect();
$sql = 'SELECT 
    gameid,
    mizbanid,
    mihmanid,
    score1,
    score2,
    gamedavar,
    gamestadium,
    now
FROM games
WHERE gameweek = ' . $site_week . '
ORDER BY now ASC
    LIMIT 9';
$query = mysql_query($sql);

if(mysql_num_rows($query)) {
    while($Result = mysql_fetch_object($query)) { //loop trough results

        print_r($Result); //prints the results.
        echo $Result->gameid; //this is how you echo the data
}
} 
```

请注意，不推荐使用 mysql_query 函数，需要将其替换为 mysqli :)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:22:06.847

好吧，总有一段路要走。您可以通过多种方式进行优化，使用 php 代码以及使用查询，但是您不应该使用即将灭绝的东西

```
Warning 
```

此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

```
mysqli_stmt_num_rows()
PDOStatement::rowCount() 
```

如果您只想计算行数，则最好使用：-

`SELECT COUNT(*) FROM SomeTable`

而且你不应该使用单引号这[比双引号有好处](https://stackoverflow.com/questions/482202/is-there-a-performance-benefit-single-quote-vs-double-quote-in-php)

and As mentioned by NullPointer, you should not [use @ to suppress error message](http://php.net/manual/en/language.operators.errorcontrol.php). Currently the "@" error-control operator prefix will even disable error reporting for critical errors that will terminate script execution. Among other things, this means that if you use "@" to suppress errors from a certain function and either it isn't available or has been mistyped, the script will die right there with no indication as to why.

# android - 通过 USB 将文件从 pc 传输到 android 设备

> ID：15129437
> 
> 赞同：5
> 
> 时间：2013-02-28T07:00:36.803
> 
> 标签：android, sockets, usb, httpurlconnection

我想以编程方式通过 USB 将文件从我的 pc 的特定端口传输到 android 设备。以下哪种技术最适合这种传输模式：

1.  插座
2.  HttpUrl 连接。

如果可以通过`HttpUrlConnection`手段如何实现呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T07:07:07.803

通过 USB **Socket 通信**将文件从 pc 传输到 android 设备是最好的方法。

您必须执行一些额外的端口转发步骤，在这些步骤上建立 Socket 通信。

看教程[https://github.com/user370305/Android-USB-Communication](https://github.com/user370305/Android-USB-Communication)。

# mysql - Erlang 和 SQL 注入攻击

> ID：15129443
> 
> 赞同：3
> 
> 时间：2013-02-28T07:00:59.467
> 
> 标签：mysql, sql-server, oracle, erlang

我每天都使用 erlang 应用程序中间件处理 Oracle 和 MySQL 数据库。在这些中间件应用程序中，我正在运行`Nitrogen Web Framework`并`Yaws Web Server`加上几个 erlang 应用程序，例如`RabbitMQ`. 尽管应用程序容易受到`SQL injection`.

诸如此处记录的攻击：[http://sqlzoo.net/hack/](http://sqlzoo.net/hack/)非常能够使这些应用程序无用。是否有库（Erlang）或我可以防止这些攻击的技术？我知道在其他语言中，例如，通过转义用户或攻击者可能插入的任何`PHP`参数来确保所有参数。 说到字符串参数，我想出了一个函数，但它似乎不能解决我的需求，因为我想我会找到一种方法来用.`stringified``single-quotes`

`escaping all single-quotes``replace_all``single-quotes (')``escaped version of themselves (\')`

```
替换（字符，带，字符串）-> 替换（字符，带，字符串，[]）。

替换（_，_，[]，完成）-> 列表：反向（完成）；
替换(Char,With,[Char|Rest],Buffer)->
    替换（字符，带，休息，[带|缓冲区]）；
替换(Char,With,[Any|Rest],Buffer)->
    替换（字符，With，Rest，[Any|Buffer]）。

```

在几个例子上测试它：

```
3> sql_protect:replace($m,$k,"muzaaya")。
“库扎亚”
4> sql_protect:replace($a,$u,"muzaaya")。
“沐足”
5>

```

但是我如何使用这个函数来转义所有的单引号。不得不说`String = "' OR 1=1'"`，改为：`String = "\' OR 1=1\'"`。

非常感谢您的帮助。

**编辑**

* * *

您对此有何看法：如果我有一个列表，其中包含所有`ORACLE SQL KEYWORDS`和`SQL SERVER KEYWORDS`和`MYSQL KEYWORDS`在一个列表中，并且对于每个查询参数，我将其拆分为单词（即如果它包含空格），然后我检查以确保这些都不包含words 是保留字，我会防止许多 sql 注入攻击。

似乎有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:04:14.893

我不了解 erlang 库，但我假设您可以创建[准备好的语句](https://en.wikipedia.org/wiki/Prepared_statement)，这些语句在执行时会自动“清理”您的字符串。这甚至是 php 领域的首选方法，带有 PDO 和 mysqli。不推荐使用 escape_strings 和 mysql 驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:26:42.030

您不仅需要转义，还需要转义`'`特殊符号，例如`\`,`\0`等等。所以引用函数看起来像（从我们的 mysql 驱动程序中获取）：

```
quote(String) when is_list(String) ->
    [39 | lists:reverse([39 | quote(String, [])])]; %% 39 is $'
quote(Bin) when is_binary(Bin) ->
    list_to_binary(quote(binary_to_list(Bin))).

quote([], Acc) ->
    Acc;
quote([0 | Rest], Acc) ->
    quote(Rest, [$0, $\\ | Acc]);
quote([10 | Rest], Acc) ->
    quote(Rest, [$n, $\\ | Acc]);
quote([13 | Rest], Acc) ->
    quote(Rest, [$r, $\\ | Acc]);
quote([$\\ | Rest], Acc) ->
    quote(Rest, [$\\ , $\\ | Acc]);
quote([39 | Rest], Acc) ->        %% 39 is $'
    quote(Rest, [39, $\\ | Acc]); %% 39 is $'
quote([34 | Rest], Acc) ->        %% 34 is $"
    quote(Rest, [34, $\\ | Acc]); %% 34 is $"
quote([26 | Rest], Acc) ->
    quote(Rest, [$Z, $\\ | Acc]);
quote([C | Rest], Acc) ->
    quote(Rest, [C | Acc]). 
```

# css - 将 div 放在另一个动态大小的 div 旁边

> ID：15129444
> 
> 赞同：1
> 
> 时间：2013-02-28T07:01:00.220
> 
> 标签：css, image, html

我需要将 id 为“divThumbnail”、“bannerImageProgress”和“divRemoveBanner”的三个 div 放置在 id 为“wrapper”的 div 中，如图所示。加载到“divThumbnail” div 中的是一个图像，它可以改变大小。我需要“bannerImageProgress”在“divThumbnail”的左侧，“divRemoveBanner”在它的正下方。由于 divThumbnail 的大小可以动态更改，因此定义绝对位置（如代码所示）不会产生所需的行为。

这就是我需要它的方式：[在图像旁边带有进度条的 div 和在图像正下方带有删除字的 div]

![在此处输入图像描述](../Images/97ee12b63cf52691f640306429b8a700.png)

对于方形图像，“bannerImageProgress” div 不会显示在图像旁边：

![在此处输入图像描述](../Images/5c47f3aba30fc98ef6fcc6a8d9e9b2be.png)

到目前为止我的 HTML 代码：

```
 <div id="wrapper" class="image-area-container">
       <div id="divThumbnail" class="image_outer_div" style="width: 200px; height: 60px; ">
           @if ( Model.HasBanner ) {
           <img id = "bannerThumbnail" src = "@Model.BannerLink" />
           }
       </div>
       <div id = "bannerImageProgress" class = "progress progress-success" style="display: inline-block; float: left; left: 566px;">
           <div id = "bannerImage" class = "bar" style = "float: left; width: 0%;" data-percentage="0">
           </div>
       </div>

       <div id="divRemoveBanner" style="display:none;">
        <a id="removeBanner">Remove</a>
       </div>
    </div>

CSS:

<!-- language: lang-css -->

    .image-area-container {
        float: left;
        width: 65px;
        margin-left: 10px;
    }

    .image_outer_div { 
        height: 60px; 
        overflow: hidden;
        width: 200px; 
        vertical-align: top;
        margin-bottom: 5px;
    }

    .image_area .progress {
        left: 346px;
        position: absolute;
        top: 4px;
        width: 200px;
     } 
```

提前致谢！:)

应用阿里建议的更改后：

它并不顺利。现在“divThumbnail” div 和“bannerImageProgress” div 重叠了 :( 像这样：-

![在此处输入图像描述](../Images/69264a7ab70578488b91345c2c437b07.png)

更改后的代码：-

```
<div class="image-area-container" style="position:relative; width: 400px;">

                        <div id="divThumbnail" class="image_outer_div" style="width: 200px; height: 60px; float: left; ">
                            @if (Model.HasBanner)
                            {
                                <img id="bannerThumbnail" src="@Model.BannerLink" />
                            }

                        </div>

                        <div id="bannerImageProgress" class="progress progress-success" style="display: inline-block; clear:both; position:absolute; left:0; right:0;">
                            <div id="bannerImage" class="bar" style="float: left; width: 0%;" data-percentage="0">
                            </div>
                        </div>

                    <div id="divRemoveBanner" style="display:none; clear:both; float: left;">
                        <a id="removeBanner">Remove</a>
                    </div>

                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:13:34.307

为什么不让进度条向右浮动，另外两个向左浮动？或给图像另一个具有固定宽度的 div 包装器？

# javascript - 从nodejs中的url读取图像

> ID：15129449
> 
> 赞同：0
> 
> 时间：2013-02-28T07:01:23.167
> 
> 标签：javascript, node.js

我想从 url 读取图像并将其存储在 mongo db 中。我基本上已经读取了字符串值并完成了上述过程。但是我被困在如何读取图像上。任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:11:15.897

使用节点 0.8.8 和[mongojs](https://github.com/gett/mongojs)进行测试。

```
var http = require("http");
var mjs = require("mongojs");

// url of the image to save to mongo
var image_url = "http://i.imgur.com/5ToTZky.jpg";

var save_to_db = function(type, image) {

   // connect to database and use the "test" collection
   var db = mjs.connect("mongodb://localhost:27017/database", ["test"]);

   // insert object into collection 
   db.test.insert({ type: type, image: image }, function() {
      db.close();
   });

};

http.get(image_url, function(res) {

   var buffers = [];
   var length = 0;

   res.on("data", function(chunk) {

      // store each block of data
      length += chunk.length;
      buffers.push(chunk);

   });

   res.on("end", function() {

      // combine the binary data into single buffer
      var image = Buffer.concat(buffers);

      // determine the type of the image
      // with image/jpeg being the default
      var type = 'image/jpeg';
      if (res.headers['content-type'] !== undefined)
         type = res.headers['content-type'];

      save_to_db(type, image);

   });

}); 
```

# apache - LDAP 身份验证不适用于 websvn

> ID：15129450
> 
> 赞同：1
> 
> 时间：2013-02-28T07:01:31.123
> 
> 标签：apache, ldap, websvn

我的设置如下：Win7（32 位）桌面上的 Apache 2.2.21，带有 SVN 1.5.6 和 WebSVN 2.3.3。

当我使用 websvn.conf 文件中的这些设置浏览到我的 websvn 页面时，LDAP 身份验证不会启动，

```
Alias /websvn/ "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/websvn/"

<Directory /websvn/>
Options FollowSymLinks
CheckCaseOnly on

#Redirect any requests to this page to the page u want
FallbackResource  listing.php

Order allow,deny
Allow from all

<IfModule mod_php4.c>
    php_flag magic_quotes_gpc Off
    php_flag track_vars On
</IfModule>

#Valid NIE account to access nie ldap. Recommended to have only read-only rights
AuthLDAPBindDN "user001@somewhere.com"
AuthLDAPBindPassword "password"

#The LDAP query URL
AuthLDAPURL "ldap://xxx:389/DC=x,DC=x,DC=x,DC=x,DC=x?sAMAccountName?sub?(objectClass=user)" NONE

AuthType Basic
AuthName "Websvn DIR"
AuthBasicProvider ldap
AuthzLDAPAuthoritative off  

Require ldap-user user
</Directory> 
```

但是，如果将 websvn.conf 文件更改为此，LDAP 身份验证就会启动，

```
<Location /websvn/> 
Options FollowSymLinks
CheckCaseOnly on

FallbackResource listing.php

Order allow,deny
Allow from all

<IfModule mod_php4.c>
    php_flag magic_quotes_gpc Off
    php_flag track_vars On
</IfModule>

AuthLDAPBindDN "user001@somewhere.com"
AuthLDAPBindPassword "password"

#The LDAP query URL
AuthLDAPURL "ldap://xxx:389/DC=x,DC=x,DC=x,DC=x,DC=x?sAMAccountName?sub?(objectClass=user)" NONE

AuthType Basic
AuthName "Websvn Loc"
AuthBasicProvider ldap
AuthzLDAPAuthoritative off  

Require ldap-user user
</Location> 
```

所以，我的问题是为什么会发生这种情况？为什么 LDAP auth 仅在 websvn 配置文件使用而不是时才启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:33:32.143

Directory 指令必须与文件系统上的目录的完整路径相匹配：

[http://httpd.apache.org/docs/2.2/mod/core.html#directory](http://httpd.apache.org/docs/2.2/mod/core.html#directory)

因此，因为您的 C: 驱动器的根目录中没有 /websvn 目录，所以该指令不匹配并且不配置 LDAP 身份验证。

# linux - 可以强迫 Doxygen 创建像样的手册页吗？

> ID：15129452
> 
> 赞同：10
> 
> 时间：2013-02-28T07:01:36.163
> 
> 标签：linux, doxygen, manpage

我开始寻找一种从源代码生成手册页的方法。我现在安装了 Doxygen，它会生成很棒的 HTML 页面，这些页面有条理、很有帮助等。

但是......似乎 Doxygen 在创建体面或可用的手册页方面很糟糕。从更多的谷歌搜索来看，似乎这可能是使用 Doxygen 生成手册页的普遍共识。真的是这样吗，还是有一个页面/提示解释了如何让 Doxygen 更好地处理手册页？

我在 GitHub 上找到了一个项目——doxy2man——似乎专门设计用于将 Doxygen xml 输出文件重新按摩到手册页中，但我很想知道是否可以强制 Doxygen 本身做得更好。

我为手册页使用的 Doxygen 选项（没有很多）是：

```
$ grep MAN Doxyfile | grep -v "#"
GENERATE_MAN           = YES
MAN_OUTPUT             = man
MAN_EXTENSION          = .3
MAN_LINKS              = YES 
```

# ruby-on-rails - nil:NilClass 的未定义方法“收集”

> ID：15129455
> 
> 赞同：4
> 
> 时间：2013-02-28T07:02:00.313
> 
> 标签：ruby-on-rails, class, methods, null

**有人可以帮我解决这个错误吗？**

> 帖子中的 NoMethodError#create
> 
> 显示 C:/Users/User/Documents/website/app/views/posts/_form.html.erb 其中第 24 行提出：
> 
> nil:NilClass 的未定义方法“收集”
> 
> 提取的源代码（第 24 行附近）：
> 
> 23: <%= f.label :categoria %>
> 24: <%= f.select :categoria_id, @categoria.collect { |c| [ c.name, c.id ] } %>
> 
> 模板包含的痕迹：app/views/posts/new.html.erb

我的 _form.html.erb

```
<%= form_for(@post, :html => { :multipart => true }) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :titulo %><br />
    <%= f.text_field :titulo %>
  </div>
  <div class="field">
    <%= f.label :conteudo %><br />
    <%= f.text_area :conteudo %>
  </div>
  <div class="field">
    <%= f.label :categoria %><br />
     <%= f.select :categoria_id, @categoria.collect { |c| [ c.name, c.id ] } %>
  </div>
  <br />
  <div class="field">
  <%= f.file_field :avatar %>
  </div>
  <br />
  <div class="actions">
    <%= f.submit %>
  </div>
  <br />
<% end %> 
```

我的控制器：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new
    @categoria = Categorium.all
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
    @categoria = Categorium.all
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T07:53:08.237

您的`new`操作正在定义`@categoria`，然后在您的视图中使用。

如果您的`create`操作创建了一个无效对象，它将重新渲染`new`仍期望`@categoria`定义的视图，但事实并非如此。

您将需要在您的`new`和`create`操作中定义实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:58:53.913

```
<%= f.select :categoria_id, options_for_select(@categoria, :name, :id), :required => true %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:10:55.633

您的创建操作在哪里？您已在控制器中定义了一个新操作，但没有创建操作。创建操作将保存您的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T10:18:19.583

您必须在控制器中的新建、创建、编辑、更新操作中定义**@categoria = Categoria.all实例变量。**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T07:39:44.630

你创建过`categoria`吗？这将是我能想到的唯一原因，为什么`@categoria`会在您看来返回 nil。

# algorithm - 方形地形递归推导

> ID：15129474
> 
> 赞同：0
> 
> 时间：2013-02-28T07:03:04.600
> 
> 标签：algorithm, recursion

您有一个面积为 A > 0 的方形地形。您想将信息添加到地形中。您想将地形细分为 4 个象限，分别处理它们并组合结果。要进行处理，您需要进一步划分一个象限，直到子象限的面积 <= A0，然后您可以在其中向地形添加信息 - 对于 i > 0，总共需要 i*A 时间。每个细分步骤都会导致每个四个象限包含 1/3 的面积。如果 T(A) 是标记区域 A 的地形的时间，它的循环是多少？

我的答案是 4T((A/A0)/3)+iA，但我不明白它是如何得出的。有人可以解释问题的每个组成部分如何与最终结果中的添加相关吗？我了解 4 个递归调用，但在那之后就不多说了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:08:34.513

如果`T(A`) 是标记区域地形的时间，`A`那么让我们`T(A)`递归计算：

*   当分析的面积`A`小于或等于`A0`( `A <= A0`) 时，我们将`T(A) = c`得到某个常数`c`，因为我们不再细分。根据您的陈述，我认为我们可以假设`T(A) = i*A (if A <= A0)`

*   当面积`A`大于时，`A0`我们首先将每个`A`区域划分为四个子象限，对`A/3`它们进行处理，最后收集地形的所有信息，从而`T(A) = 4*T(A/3) + i*A (if A > A0)`

因此最终的递归可以写成：

```
T(A) = i*A               (A <= A0)
T(A) = 4*T(A/3) + i*A    (A >  A0) 
```

**注意：**我认为您给出的公式`T(A) = 4*T((A/A0)/3) + i*A`并不完全正确，因为您将除以`A`可以`3*A0`比 大得多`3`。`A0`仅用于处理子象限面积小于 的情况`A0`。

# css - 在 Zencart CSS 中增加产品宽度

> ID：15129477
> 
> 赞同：0
> 
> 时间：2013-02-28T07:03:11.573
> 
> 标签：css, zen-cart

我是 zencart 和学习基础知识的新手。我安装了一个名为“pre_green”的主题。主题工作正常，但产品尺寸非常小。我检查了持有产品的 div，但找不到与宽度相关的任何内容。当我检查 时`source-code`，我看到一个`style="width:33%;`被自动添加到 div 中。我想因此我的产品尺寸很小。

```
 <div class="centerBoxWrapper" id="featuredProducts">
    <h2 class="centerBoxHeading">Our Products</h2>
        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=7">
<img src="images/chili.gif" alt="Chilli" title=" Chilli " width="100" height="67" /></a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=7">Chilli</a><br />Rs.0</div>
        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=3">
<img src="images/melon.jpg" alt="Melon" title=" Melon " width="100" height="70" />
</a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=3">Melon</a>
<br />Rs.0</div>
        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=4">
<img src="images/orange.jpg" alt="Orange" title=" Orange " width="100" height="70" />
</a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=4">Orange</a>
<br />Rs.0</div>
    <br class="clearBoth" />

        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=9">
<img src="images/potato.jpg" alt="Potato" title=" Potato " width="80" height="80" /></a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=9">Potato</a>
<br />Rs.50</div>
        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=11">
<img src="images/tomato.jpg" alt="Tomato" title=" Tomato " width="80" height="80" />
</a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_3&amp;products_id=11">Tomato</a>
<br />Rs.60</div>
        <div class="centerBoxContentsFeatured centeredContent back" style="width:33%;">
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=2">
<img src="images/banana.jpg" alt="Banana" title=" Banana " width="100" height="70" />
</a>
<br />
<a href="http://localhost/zencart/index.php?main_page=product_info&amp;cPath=1_2&amp;products_id=2">Banana</a><br />Rs.30</div>
    <br class="clearBoth" /> 
```

所以我想知道如何增加大小或修改百分比。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:05:24.910

您提到的 33% 是根据您在管理员中选择的设置来计算您希望这些内容框如何显示的。您显然已将其设置为显示 3 列。您发布的代码用于 id="featuredProducts"，这表明您指的是您的特色产品内容框，因此控制列数的设置位于 Admin->Configuration->Index Listing->每行的特色产品列。

但是您开始询问如何更改图像的大小，并且似乎将 33% 归咎于它们太小。但 33% 并不是原因。

图像的大小根据您在 Admin->Configuration->Images 中指定的尺寸。例如“图片 - 特色产品宽度”设置。默认情况下设置为 100。更改该值和相应的高度设置以满足您的愿望。请记住，此数字仅影响 HTML 告诉浏览器显示图像的内容。如果您上传较小的图像，它们将被拉伸到这些尺寸。如果您上传非常大的图像，它们将被缩小以显示，但仍必须下载整个图像，因此请勿上传大于您打算使用的图像，否则会降低访问者的体验。如果您还想支持客户可以按需请求的更大图像，只需根据适当的命名方案上传附加图像，它们将在适当的地方自动使用。Zen Cart 支持网站 www.zen-cart.com 上的常见问题解答库解决了所有这些主题，以帮助您持续学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:26:34.307

我认为应该有一个选项来选择您必须在一行中显示多少产品

它会自动增加宽度

如果不是，您必须在某些 css 或 php 文件中更改它，如果您不知道某些编码，那将是危险的

在做这个实验之前先做一个

# javascript - 如何在nodejs中正确使用域

> ID：15129480
> 
> 赞同：1
> 
> 时间：2013-02-28T07:03:25.320
> 
> 标签：javascript, node.js, node.js-domains

我尝试使用`domains`核心模块而不是`process.on('uncaughtException')`, 来捕获错误

```
function setupDomains(req, res, next) {
    var reqd = domain.create();

    reqd.add(req);
    reqd.add(res);
    reqd.on('error', function(err) {
      console.log(err);
      req.next(err);
    });
    res.on('end', function() {
      console.log('disposing domain for url ' + req.url);
      reqd.dispose();
    });
    reqd.run(next);
} 
```

并在 express 中用作中间件，但似乎

```
 res.on('end', function() {
      console.log('disposing domain for url ' + req.url);
      reqd.dispose();
    }); 
```

不叫

我想在响应结束时处理域

如何正确地做到这一点，或者我不必这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T02:54:27.687

我发现如何做到这一点的最佳示例来自 node.js 文档。

[http://nodejs.org/api/domain.html#domain_warning_don_t_ignore_errors](http://nodejs.org/api/domain.html#domain_warning_don_t_ignore_errors)

正如在本页开头附近所确定的那样，捕获异常、登录并继续前进是个坏主意。相反，您应该记录它并重新启动该过程。

文档中包含的示例将关闭发生异常的节点进程并重新启动一个新进程。这是调用`dispose`并继续下一个请求的首选选项。

如果您确定要使用`dispose`该域的成员，则只需将调用 dispose 放在`domain.on('error')`处理程序的开头，如本文[所述](http://www.lighthouselogic.com/use-domain-dispose/)。

如果确实如此，请不要忘记将其标记为正确答案。

# image - 在 XSL 中为外部图形指定 Src

> ID：15129481
> 
> 赞同：2
> 
> 时间：2013-02-28T07:03:28.050
> 
> 标签：image, xslt, pdf, relative-path

我正在使用 JSF1.2 框架并使用 FOP 引擎和 XSL 样式表将 XML 转换为 PDF。就字符串数据而言，它工作得很好，但现在我想在我的输出 PDF 中嵌入图像。目录结构如下

项目目录

-src

- 资源

---P2O.xsl

-网页内容

- 图片

---image1.jpg

如果我将 image1.jpg 文件放在 d 中，以下工作正常： drive
fo:external-graphic src='url("file:///d:/image1.jpg")'> /fo:external-graphic>

因为我必须在生产服务器上部署这个应用程序，所以我不能在那里设置这个路径。我的问题是我应该在“src”中指定什么来从 WebContent/images 路径中选择该图像文件

在这种情况下的任何示例/帮助将不胜感激。带着敬意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:58:55.807

经过短暂的搜索，我发现了问题所在。主要考虑的是`FOUserAgent`哪个充当应用程序和 FOP 处理器之间的中介。除非明确定义，否则 FOP 处理器不知道应用程序的根路径或基本路径。要为图像使用相对路径，您需要创建一个`FOUserAgent`对象并指定该`FOUserAgent`实例的基本 URL。就我而言，我添加了以下行（如下所述）：

```
FopFactory fopFactory = FopFactory.newInstance();

FOUserAgent foUserAgent = fopFactory.newFOUserAgent();

// This is the important line
foUserAgent.setBaseURL("file:///" + FacesUtils.getHttpServletRequest().getRealPath("/"));

Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, outputStream); 
```

我在我的项目中`FacesUtils`保存的只是一个定制的 utils 文件。如果您没有任何 utils 文件，则只需`FacesContext`使用`realPath()`.

现在 basePath 将引用您的 WebContent 文件夹，并且可以从那里相对访问任何图像。我现在在 .xsl 中像这样访问我的图像：

```
src='url("images/image1.jpg")' 
```

images 文件夹位于 WebContent 文件夹中。

# ios - Xcode NSURLConnection NSMutableData appdendData 有时只工作

> ID：15129483
> 
> 赞同：0
> 
> 时间：2013-02-28T07:03:37.783
> 
> 标签：ios, objective-c, nsurlconnection, nsmutabledata

我在读取来自 api 的响应时遇到了一个奇怪的问题。在 connectionDidFinishLoading 中，当将响应记录为字符串`[NSString stringWithUTF8String:[self.response bytes]]`时，字符串有时会正确记录，有时为空，有时是正确的响应，并在末尾附加随机字符。

在didReceiveData中，响应很好，但是使用appendData后出现问题。在 didReceiveData 我可以这样说明问题：

```
// This is always 0
NSLog(@"data length is %i", [data length]);
// This is always the correct response string sent from the api
NSLog(@"data string is %@", [NSString stringWithUTF8String:[data bytes]]);

NSMutableData *foo = [[NSMutableData alloc] init];
[foo appendData:data];

// This is always 8
NSLog(@"foo length is %i", [foo length]);
// This is only sometimes the correct response string!
NSLog(@"foo string is %@", [NSString stringWithUTF8String:[foo bytes]]);

[foo release];
foo = nil; 
```

我在 SO 上看到了其他几个关于 appendData 类似疯狂问题的问题，但它们似乎是因为附加到的变量为零。这表明我已经清楚地声明了我的 NSMutableData foo，但它仍然没有正确设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:10:22.093

请发布整个代码，而不仅仅是这个简短的摘录。

我假设您`NSMutableData`每次`-connection:didReceiveData:`调用时都会重新分配一个新实例。您需要为此使用属性或 iVar，以便在`-connection:didReceiveData:`后续调用时将数据附加到已经存在的数据中。

```
- (void)startConnection
{
    self.receivedData = [[NSMutableData alloc] init];
    // Start connection...
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)
{
    NSString *receivedString = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];
    self.receivedData = nil;

    NSLog(@"Response: %@", receivedString);
} 
```

# android - 如何在 API 14+ 中将所有通知合并为一个可扩展的通知？

> ID：15129487
> 
> 赞同：3
> 
> 时间：2013-02-28T07:03:48.000
> 
> 标签：android, android-notifications, android-notification-bar

我的应用程序可能有针对不同事件的多个通知，而不是显示 4 个通知，我想像 GMail 那样将它们组合起来。我该怎么做呢？这可能在 API 14 中还是在 JellyBean 中添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:13:25.520

您正在考虑的大型通知（特别是[InboxStyle](https://developer.android.com/reference/android/app/Notification.InboxStyle.html)）已添加到 Jelly Bean 中，但是没有什么能阻止您在早期版本的 Android 上的单个通知中聚合多条信息（您将无法适应那么多在）。使用 NotificationCompat 创建一个通知，该通知`bigContentView`对 JB+ 设备具有很好的作用，在旧设备上具有更简洁的摘要版本。

# sharepoint-2010 - 在共享点列表上两次添加相同项目的事件接收器

> ID：15129491
> 
> 赞同：0
> 
> 时间：2013-02-28T07:03:56.500
> 
> 标签：sharepoint-2010

我有一个共享点自定义列表“**联系人**”，其中创建了项目。我想编写一个事件接收器来阻止此处的重复项目条目，例如名称（列表的列）。

谁能解释一下我怎样才能做到这一点？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:57:22.473

感谢您在 StackOverflow 上发帖。您可以在专门针对 SP的[https://sharepoint.stackexchange.com/上发布您的 SharePoint 问题。](https://sharepoint.stackexchange.com/)

关于您的问题 - 您不需要创建事件接收器来实现您的目标。如果您只有一列具有唯一值，为了避免列表中出现重复值，您可以使用 OOTB SharePoint 列属性，该属性可以使用 UI“强制唯一值”进行设置。此方法仅对要检查的一列有价值。

有关更多信息，请参阅[此](http://salnikan.wordpress.com/2011/07/26/prevention-of-duplicate-entries-based-on-two-or-more-columns-in-a-sharepoint-list/)帖子。

希望能帮助到你，

安德鲁

# osgi - 在 CQ5 中实现自定义 AuthenticationHandler

> ID：15129492
> 
> 赞同：1
> 
> 时间：2013-02-28T07:03:57.153
> 
> 标签：osgi, aem

我想要一个远程系统来为我们的 CQ5 进行用户身份验证。我猜测路径上的 AuthenticationHandler 是前进的方向。如果是这样， AuthenticationHandler 一般如何工作。而且，在 CQ5 中，我如何实现自定义 AuthenticationHandler？如何将其制作为 OSGi 包（或片段包）并将其安装到 CQ5 中？

如果可能，欢迎使用一些带有 OSGi 清单的代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:30:05.030

[您可以在此处](http://sling.apache.org/site/form-based-authenticationhandler.html)找到 Sling AuthenticationHandler 如何工作的说明。您还可以查看 Sling [FormAuthenticationHandler](https://github.com/apache/sling/blob/trunk/bundles/auth/form/src/main/java/org/apache/sling/auth/form/impl/FormAuthenticationHandler.java)源作为示例。[您可以在项目的POM 文件](https://github.com/apache/sling/blob/trunk/bundles/auth/form/pom.xml#L57-L93)中查看OSGi 配置的详细信息，在 maven-bundle-plugin 的配置下。

如果您只需要检查密码或同步用户帐户，您可以使用[自定义 CQ5 LoginModule](http://www.wemblog.com/2012/06/how-to-add-custom-login-module-in-cq55.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:42:37.680

我将首先查看jackrabbit AbstractLoginModule [http://jackrabbit.apache.org/api/2.4/org/apache/jackrabbit/core/security/authentication/AbstractLoginModule.html](http://jackrabbit.apache.org/api/2.4/org/apache/jackrabbit/core/security/authentication/AbstractLoginModule.html)

我有一个编写的自定义解决方案/片段包的示例，但它有很多部分。我们正在实施来自 Gigya（社交网络登录）的东西。

我们还有其他一些实现 MyAbstractLoginModule 的类。如果您需要，我可以进一步挖掘并为您提供更多示例。希望这可以让你开始走上正确的道路。

```
public abstract class MyAbstractLoginModule extends AbstractLoginModule {
    static private final Logger logger = LoggerFactory.getLogger(MyAbstractLoginModule.class);
    protected Session session;
    protected UserManager userManager;
    protected ValueFactory valueFactory;
    protected long tokenExpiration = 7200000L;

    @Override
    public void initialize(Subject subject, CallbackHandler callbackHandler, Map<String, ?> sharedState, Map<String, ?> options) {
        if (options.containsKey("tokenExpiration")) {
            try {
                this.tokenExpiration = Long.parseLong(options.get("tokenExpiration").toString());
                logger.debug("- Token expiration -> '" + this.tokenExpiration + "'");
            } catch (NumberFormatException e) {
                logger.warn("Unabled to parse token expiration: ", e);
            }
        }
        super.initialize(subject, callbackHandler, sharedState, options);
    }

    /**
    * Initiates the login module
    *
    * @param ch
    * @param ses
    * @param map
    * @throws LoginException
    */
    @Override
    protected void doInit(CallbackHandler ch, Session ses, Map map) throws LoginException {
        logger.trace("doInit");

        SessionImpl session = (SessionImpl) ses;

        try {
            this.session = session;
            this.userManager = session.getUserManager();
            this.valueFactory = session.getValueFactory();
        } catch (RepositoryException e) {
            throw new LoginException("Unable to retrieve principal editor: " + e.toString());
        }
    }

    /**
    * Impersonates users
    *
    * @param prncpl
    * @param c
    * @return
    * @throws RepositoryException
    * @throws LoginException
    */
    @Override
    protected boolean impersonate(Principal prncpl, Credentials c) throws RepositoryException, LoginException {
        Authorizable authrz = this.userManager.getAuthorizable(principal);
        if ((authrz == null) || (authrz.isGroup())) {
            return false;
        }
        Subject impersSubject = getImpersonatorSubject(credentials);
        User user = (User) authrz;
        if (user.getImpersonation().allows(impersSubject)) {
            return true;
        }
        throw new FailedLoginException("attempt to impersonate denied for " + principal.getName());
    }

    @Override
    protected boolean isPreAuthenticated(Credentials creds) {
        return false;
    }
} 
```

# types - 将 Silverlight 4 迁移到 5 - 生成引用而不是重用类型 - 二进制文件上的 svcutil 要求某些 SL4 二进制文件

> ID：15129494
> 
> 赞同：2
> 
> 时间：2013-02-28T07:04:03.540
> 
> 标签：types, reference, silverlight-5.0, ria, reusability

我已经浏览了很多关于 stackoverflow 的帖子，但无法解决这个问题。我最近从 SL4 迁移到 SL5，后者又将 wcf ria 升级到 v1sp2。

注意：现在引用的所有二进制文件都是 v5.0.5.0，但 System.ServiceModel.DomainServices.Client(web).dll 仍然是 2.0.5.0 版本（通过 RIA 获得）。

在为我的 wcf 服务生成服务引用之后，无法重用引用程序集中的类型 - 它的重新生成类型导致引用不明确。

使用 svcutil 命令测试包含这些类型的二进制文件是要求 SL4 版本的 System.Windows 不可用，因此失败。

```
svcutil /t:code http://localhost:9357/Service1.svc /r:binarywithtypes.dll 
```

错误：无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：无法加载文件或程序集“System.Windows，版本=2.0.5.0，文化=中性， PublicKeyToken=7cec85d7bea7798e' 或其依赖项之一。该系统找不到指定的文件。

这么几个问题：

1.  我假设它要求 SL4 二进制文件的原因是因为某些依赖程序集仍然是 SL4。从上面的参考资料来看，它可能是 System.ServiceModel.DomainServices.Client.dll。那么我在哪里可以找到这个二进制文件的 v5.0.5.0 呢？（ria sp2 仍然提供 v2.0.5.0）

2.  还是有其他原因导致在迁移到 Silverlight 5 后生成引用无法识别被引用程序集中的类型？

3.  任何其他方式我可以生成引用重用已经引用的类型？

注意：过去在 SL4 中一切正常！

[更新]：命令行工具 slsvcUtils 工作正常（VS2010Sp1 损坏）并且能够重用引用类型。供其他人参考，slsvcutils 用法：

```
"%PROGRAMFILES(X86)%\Microsoft SDKs\Silverlight\v5.0\Tools\SlSvcUtil.exe" /language:cs /ct:System.Collections.ObjectModel.ObservableCollection`1 /n:*,<namespace> http://localhost:9357/Service1.svc /r:bin\debug\<slDllWithTypes.dll> /r:"%PROGRAMFILES(X86)%\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\system.windows.dll" /out:"Service References\Reference.cs" /enableDataBinding /config:temp.ClientConfig 
```

# tfs - TFS Nugetter 和构建定义的问题

> ID：15129498
> 
> 赞同：3
> 
> 时间：2013-02-28T07:04:30.973
> 
> 标签：tfs, nuget, nugetter

我在 TFS NuGetter 中遇到了一个有趣的小问题。我已经设置了构建定义以使用 NuGetter 版本控制模板，从 CodePlex 下载了 TFS 版本控制，并且（我相信）我已经正确设置了所有内容。我在启动测试构建时遇到的问题如下：

> ***在匹配指定绑定约束的类型“TfsBuild.NuGetter.Activities.NuGetterProcess”上调用构造函数引发了异常。***

我进行了搜索，有一些关于 CodePlex 的信息指向需要在 GAC 中安装的 PowerShell v1 程序集（我这样做了），但不幸的是我仍然遇到同样的问题。

你们中有人见过类似的吗？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:01:41.237

尝试从此处更新 Windows 管理框架

[http://www.microsoft.com/en-us/download/details.aspx?id=34595](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

它对我有用。

# javascript - 为什么匿名函数表达式和命名函数表达式的初始化如此不同？

> ID：15129504
> 
> 赞同：5
> 
> 时间：2013-02-28T07:04:48.197
> 
> 标签：javascript, function, anonymous-function, ecmascript-5, ecma262

我正在查看[第 13 节](http://www.ecma-international.org/ecma-262/5.1/#sec-13)或 ECMAScript 规范 (v. 5)。匿名函数表达式初始化如下：

> 返回创建一个新的函数对象的结果，如 13.2 中指定的，参数由 FormalParameterListopt 指定，主体由 FunctionBody 指定。传入正在运行的执行上下文的 LexicalEnvironment 作为 Scope。如果 FunctionExpression 包含在严格代码中或其 FunctionBody 是严格代码，则传入 true 作为 Strict 标志。

这个逻辑与函数声明的初始化方式*非常*相似。但是，请注意命名函数表达式的初始化有多么不同。

> 1.  让 funcEnv 成为调用 NewDeclarativeEnvironment 的结果，传递运行执行上下文的词法环境作为参数
> 2.  设 envRec 为 funcEnv 的环境记录。
> 3.  调用 envRec 的 CreateImmutableBinding 具体方法，传入 Identifier 的 String 值作为参数。
> 4.  让闭包是创建一个新的函数对象的结果，如 13.2 中指定的，其参数由 FormalParameterListopt 指定，主体由 FunctionBody 指定。传入 funcEnv 作为 Scope。如果 FunctionExpression 包含在严格代码中或其 FunctionBody 是严格代码，则传入 true 作为 Strict 标志。
> 5.  调用 envRec 的 InitializeImmutableBinding 具体方法，传递 Identifier 的 String 值和闭包作为参数。
> 6.  返回关闭。

我知道命名/匿名函数表达式之间的一大区别是命名函数表达式可以从函数内部递归调用，但这就是我能想到的。为什么设置如此不同，为什么需要执行这些额外步骤？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T03:26:22.307

所有“跳舞”的原因很简单。

命名函数表达式的标识符需要**在函数范围内而不是在外部**可用。

```
typeof f; // undefined

(function f() {
  typeof f; // function
})(); 
```

您如何`f`在功能范围内提供服务？

您不能在外部词法环境中创建绑定，因为`f`不应该在外部可用。而且你不能在内部变量环境中创建绑定，因为......它还没有创建；该函数在实例化时尚未执行，因此 10.4.3（输入函数代码）步骤及其 NewDeclarativeEnvironment 从未发生过。

所以这样做的方法是创建一个**中间词法环境**，它直接从当前环境“继承”，然后作为 [[Scope]] 传递给新创建的函数。

如果我们将 13 中的步骤分解为伪代码，您可以清楚地看到这一点：

```
// create new binding layer
funcEnv = NewDeclarativeEnvironment(current Lexical Environment)

envRec = funcEnv
// give it function's identifier
envRec.CreateImmutableBinding(Identifier)

// create function with this intermediate binding layer
closure = CreateNewFunction(funcEnv)

// assign newly created function to an identifier within this intermediate binding layer
envRec.InitializeImmutableBinding(Identifier, closure) 
```

因此（例如，在解析标识符时）内部的词法环境`f`现在看起来像这样：

```
(function f(){

  [global environment] <- [f: function(){}] <- [Current Variable Environment]

})(); 
```

使用匿名函数，它看起来像这样：

```
(function() {

  [global environment] <- [Current Variable Environment]

})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:42:44.550

两者之间的核心区别在于范围界定（虽然，如果没有别的，很想知道这样做实际上涉及了多少;） - 你已经正确指出命名/匿名函数表达式之间的主要区别是递归调用命名的*容易*。

为什么我说*轻松*？好吧，实际上没有什么可以阻止您[递归调用匿名函数](https://stackoverflow.com/q/12477115/1081234)，但这很简单：

```
//silly factorial, 5!
(function(n) {
  if (n<=1) return 1;
  return (n*arguments.callee(n-1)); //arguments.callee is so 1990s!
})(5); 
```

事实上，这[正是 MDN 在描述命名函数表达式时所说的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/function#Named_function_expression)！

> 如果要在函数体内引用当前函数，则需要创建一个命名函数表达式。该名称仅对函数体（作用域）是本地的。这也避免了使用非标准 arguments.callee 属性。

# php - preg_match_all 返回错误未定义的偏移量

> ID：15129505
> 
> 赞同：0
> 
> 时间：2013-02-28T07:04:47.487
> 
> 标签：php, regex, preg-match-all

我正在使用 preg_match_all 并返回此错误：

```
Notice: Undefined offset: 0 in B:\xampp\htdocs\fogsy\link_searcher.php on line 98 
```

这是第 98 行：

```
$server_name=$matches[0][1]."/"; 
```

这是我的功能：它用于从 html 正文中检索链接。

```
 function GetLinks($body_str,$parent_url)
        {           
            $url_list=array();

            preg_match_all('/http:\/\/(.*)\//iU', $parent_url, $matches, PREG_SET_ORDER);
            $server_name=$matches[0][1]."/";

            preg_match_all('/< *a.*href *= *[\'"](.*)[\'"].*>(.*)< *\/a *>/iU', $body_str, $matches, PREG_SET_ORDER);

            for($count=0;$count<count($matches);$count++)
                {
                    $text=$matches[$count][2];

                    if(strpos(strtolower($matches[$count][1]),"http://")===false&&strpos(strtolower($matches[$count][1]),"www")===false)
                    $href="http://".$server_name.trim($matches[$count][1],"/");                         
                    else $href=$matches[$count][1];                             

                    $url_list[$text."_".$count]=$href;  
                }   
            return $url_list;
        } 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:07:00.150

这是因为您在这里没有索引 0 ：`$server_name=$matches[0][1]."/";`

print_r($matches); 看看。

这是因为没有匹配的模式 `$parent_url`

像这样改变它：

```
if(count($matches) > 0){
    $server_name=$matches[0][1]."/";
}
else{
    $server_name="";
} 
```

但这会影响您的其他功能，最好向`$parent_url`此功能发送格式良好的文件。

# visual-c++ - Windows phone 8 RunTimeComponent 中的错误“公共成员的签名包含本机类型”

> ID：15129507
> 
> 赞同：3
> 
> 时间：2013-02-28T07:04:51.993
> 
> 标签：visual-c++, windows-phone-8, windows-phone, winprt

我正在尝试创建一个支持 windows phone 8 的运行时组件。程序的简要说明如下：

1.  应用程序 (C#) 将在 ref struct A 中填充一些数据
2.  它将使用 ref struct A 的对象调用 ref 类 VVoiP 的 init API。
3.  Ref 类 VVoip 需要有一个 B 类的对象数组，这样它就可以有多个实例。

C#代码：

```
using TestWRC;
namespace TestPrj
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            VVoIP v1 = new VVoIP();
            A a1 = new A();
            a1.a = 10;
            v1.init(a1);
        }
    }
} 
```

C++ 代码：

```
 namespace TestWRC
    {
    public ref struct A sealed
        {
    public:
        property int a;
    };

    struct B {
        A^ A_obj;
    };

    public ref class VVoIP sealed
    {
    private:
        B array[3];   /* Array of object to have multiple instance */

    public:
        void init(A a1);
    };
    }

using namespace TestWRC;
    void VVoIP::init(A a1)
    {
    array[0].A_obj->a = a1.a;  /* Filling local array with initialized data*/
    } 
```

来自上述代码的以下错误：

> 错误 C3992：“init”：公共成员的签名包含无效类型“TestWRC::A”

我是 Windows phone 8 的新手，请有人告诉我这个错误是什么，以及如何纠正这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:27:30.010

您的公共签名需要指定这是一个 Windows 运行时引用计数对象，因此您需要使用帽子 (^) 语法进行声明。

```
void init(A^ a1); 
```

# c++ - stderr 的奇怪行为

> ID：15129510
> 
> 赞同：0
> 
> 时间：2013-02-28T07:04:55.223
> 
> 标签：c++, c, stdout, stderr

我的程序中有这段代码

```
while(1){
  // some code here

 fprintf(stdout,"Output Log");
 fprintf(stderr,"Error Log");

 //some code here
      } 
```

它只打印“错误日志”。看起来我错过了在两个 fprintf 之间刷新。因此，我将“\n”附加到字符串“输出日志”。工作得很好。但是当我交换两个 fprintf 时无法理解这种奇怪的行为

```
while(1){
  // some code here
 fprintf(stderr,"Error Log\n");
 fprintf(stdout,"Output Log");    

 //some code here
      } 
```

尽管使用了“\n”，但它只打印“错误日志”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:08:04.657

您的错误是假设两条消息“之间”的换行符是导致两者出现的原因。它实际上是输出*末尾*的换行符`stdout`导致消息`stdout`出现（消息`stderr`始终可见，因为`stderr`没有缓冲）。

在任何情况下，依靠换行符来刷新缓冲区是不可靠的，除非您手动设置行缓冲模式 on `stdout`; line-buffered 仅当`stdout`是终端时才默认。如果您不想强制行缓冲或非缓冲模式，则**必须**使用`fflush` 来获得可靠的输出交错到`stdout`和`stderr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:07:29.903

`stderr`很特别。它在应用程序启动时永远不会像`stdout`可能那样完全缓冲。它是否是行缓冲的取决于实现，并且它可能根本没有缓冲（如此处所示）。

如果它们被拴在同一个输出设备上，那没有什么区别。仔细想想，这是有道理的。您可能希望尽可能快地清除错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:07:39.347

它似乎`stdout`是缓冲的，`stderr`但不是。由于程序永远不会结束，缓冲区永远不会被刷新。

# c# - 将字符串模板传递给函数c#

> ID：15129511
> 
> 赞同：0
> 
> 时间：2013-02-28T07:05:01.543
> 
> 标签：c#, string

如何将字符串模板传递给函数？

我正在创建通用使用库。

此时主应用程序需要为电子邮件提供模板，并且库必须在电子邮件的特定位置添加特定值。

```
void SomeFunction(string Template)
{
   string OtherString = "This text is inserted";

   string result - how to set the value of this string - Some text This text is inserted aa?
}

string Template = "Some text {need insert here} aa";

SomeFunction(Template); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:07:41.853

尝试这样的事情：

```
string otherString = "inserted value";
string template = string.Format("Some text {0} aa", otherString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:13:03.007

您是否在寻找：

```
void SomeFunction(string templateString)
{
   string otherString = "This text is inserted";

   string result = string.Format(templateString, otherString);
}

string template = "Some text {0} aa";

SomeFunction(template); 
```

但是，您为什么要这样做，而不是[Jens Kloster](https://stackoverflow.com/a/15129554/219516)提供的更简单和直接的选项？

如果您将不正确的模板字符串传递给 SomeFunction，例如通过“我的测试：{0}，{1}”而 SomeFunction 只需要“我的测试：{0}”怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:08:48.370

```
string Template = "Some Text {need insert here} aa";

string InYourfunction = Template.Replace("{need insert here}", "whatever you want to replace here with"); 
```

# trigger.io - 使用 Trigger.io 捕获“x”秒的视频

> ID：15129514
> 
> 赞同：2
> 
> 时间：2013-02-28T07:05:03.597
> 
> 标签：trigger.io

我正在使用它来触发捕获视频：

```
forge.file.getVideo({source:'camera'}, ...) 
```

我的问题是：一旦用户开始录制，我如何设置“以秒为单位的最大录制长度”？

我只想允许用户录制 1 秒的视频。这是否可以使用 Trigger.io，或者我必须为此构建一个本机组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:55:02.803

目前这不是一个可配置的参数`getVideo`——如果你想创建一个原生插件来支持它，请查看[`videoMaximumDuration`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)iOS 和[`EXTRA_DURATION_LIMIT`](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_DURATION_LIMIT)Android 意图。

或者，如果您希望在我们的文件模块中等待此功能可用，请通过 support@trigger.io 联系以讨论时间安排！

# vim - BufRead 和 BufEnter 有什么区别？

> ID：15129517
> 
> 赞同：11
> 
> 时间：2013-02-28T07:05:15.010
> 
> 标签：vim

我对这两个事件`BufRead`和`BufEnter`. 它们之间有什么区别？

一些我会选择其中一个的示例场景将非常有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T08:22:39.803

*缓冲区*是文件的内存表示；要编辑一个，它必须显示在一个*窗口*中。

`BufRead`在 Vim 将文件读入内存后触发该事件。除非您通过 重新加载`:edit!`，否则这只发生一次。

每当您激活某个缓冲区时，即当它成为光标所在的`BufEnter`缓冲区时，就会触发 。例如，当您有显示不同缓冲区的拆分窗口时，您会在此之间移动。同样在单个窗口中，当您使用类似的命令`<C-^>`来`:bnext`更改当前正在编辑的缓冲区时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T08:26:47.277

`BufRead`在缓冲区被文件内容填充后触发。

`BufEnter`在您输入缓冲区进行编辑后触发。

您可以使用`BufNew`，`BufRead`或者`BufAdd`如果您想在创建缓冲区时做一些事情：设置一些全局变量，填充您自己的缓冲区列表以在脚本中使用。

`BufEnter`当您想根据文件类型或其他内容设置特定选项时，您可以使用。

# magento - 如何在magento中显示垂直导航

> ID：15129520
> 
> 赞同：0
> 
> 时间：2013-02-28T07:05:22.140
> 
> 标签：magento

我是萨米丁。几天前我开始学习magento。我用示例数据安装了 magento。我想在左侧垂直导航中显示类别。

所以我从 magento connect 安装了一个垂直导航扩展，但它没有显示在前端。

请指导我。

谢谢并恭祝安康

医学博士萨米丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:32:20.667

首先将您的布局更改为 2 列左栏

然后检查该扩展名的xml文件找到这个

```
<block type="vertnav/navigation" name="catalog.vertnav" template="vertnav/left.phtml" before="-"/> 
```

在那个文件和

把这个放在

```
<reference name="left"><block type="vertnav/navigation" name="catalog.vertnav" template="vertnav/left.phtml" before="-"/></reference> 
```

希望这可以帮助你。如果没有我们可以再讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:07:15.677

要在 magento 中显示垂直导航，您需要安装类似[http://www.magentocommerce.com/magento-connect/vertical-navigation-with-css-classes.html](http://www.magentocommerce.com/magento-connect/vertical-navigation-with-css-classes.html)的扩展程序，或者您也可以在 magento connect 上尝试许多其他可用的扩展程序。

# java - 线程类的start方法如何调用子类的run方法

> ID：15129521
> 
> 赞同：1
> 
> 时间：2013-02-28T07:05:29.603
> 
> 标签：java

请帮助我了解如何通过调用线程类的 start 方法来调用 run 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:09:03.643

该`start()`方法启动一个新的执行线程，并安排事情以便新的执行线程调用该`run()`方法。确切的机制是特定于操作系统的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:13:55.670

我建议查看`java.lang.Thread.start()`方法的源代码。它是一个同步方法，依次调用私有**本机方法**，然后操作系统特定的线程机制接管（*最终调用当前对象的 run() 方法*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:10:58.647

来自[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#start())

> 公共无效开始（）
> 
> 使该线程开始执行；Java 虚拟机调用该线程的 run 方法。
> 
> 结果是两个线程同时运行：当前线程（从对 start 方法的调用返回）和另一个线程（执行其 run 方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:34:17.723

线程`start()`调用`run()`是一个内部进程，而线程是平台相关的。

以下是 Java 开发人员所说的

```
java.​lang.​Thread
public synchronized void start()
Causes this thread to begin execution; the Java Virtual Machine calls the run method of this thread.
The result is that two threads are running concurrently: the current thread (which returns from the call to the start method) and the other thread (which executes its run method).
It is never legal to start a thread more than once. In particular, a thread may not be restarted once it has completed execution.
Throws:
IllegalThreadStateException - if the thread was already started. 
See Also:
Thread.run(), Thread.stop() 
```

你当然不必担心这个。如果您正在寻找一个线程示例，这里是一个

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class ThreadEx extends JFrame
{
    private JLabel numTxt;
    private JButton click;
    private Thread t = new Thread(new Thread1());

    public ThreadEx()
    {
        numTxt = new JLabel();
        click = new JButton("Start");
        click.addActionListener(new ButtonAction());

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new FlowLayout());
        centerPanel.add(numTxt);
        centerPanel.add(click);

        this.add(centerPanel,"Center");

        this.pack();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private class Thread1 implements Runnable
    {

        @Override
        public void run() 
        {
            try
            {
                for(int i=0;i<100;i++)
                {
                    numTxt.setText(String.valueOf(i));
                    Thread.sleep(1000);
                }
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }

    }

    private class ButtonAction implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e)
        {
            t.start();
        }

    }

    public static void main(String[]args)
    {
        new ThreadEx();
    }
} 
```

# excel-formula - excel中带有动态变量的公式

> ID：15129522
> 
> 赞同：1
> 
> 时间：2013-02-28T07:05:34.110
> 
> 标签：excel-formula

我有一个包含两列（总计和使用）的 excel 表的盒子清单。右边的列（总计）有一个值，它显示了盒子的初始数量。在左列（使用情况）中，我给出了我在某个日期从库存中移除的盒子数量。我希望自动更新右侧列（总计）。这意味着如果开始时的总值是 50 并且我使用 4 个框，那么我希望该行的总计列中的单元格显示新的总计

示例 我的总值最初是 50（B2），我使用 4 个盒子（A3）。我希望 B3 显示新的总计...当我不断在 A 列中添加使用值时，我希望将 B 列更新为（以前的总计 - 新的使用） 如何在 excel 中执行此操作？我不想在每个单元格中输入公式，我不知道是否可以为单元格分配变量。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:37:33.753

我假设您想使用后续行来记录某些盒子的每次取款？您需要在总计列的每个单元格中输入适当的公式。所以在 B3 中，放 =B2-A3。然后将其复制粘贴到 col B 下面的所有单元格中，Excel 将粘贴一个公式，其单元格引用相对于公式粘贴到的单元格。或者，使用鼠标拖动手势可以更快地用公式填充列。

# php - 使用 PHP 下载大文件

> ID：15129523
> 
> 赞同：0
> 
> 时间：2013-02-28T07:05:39.027
> 
> 标签：php, download, large-files

我正在使用以下代码使用 php 从某个远程服务器下载文件

```
//some php page parsing code
$url  = 'http://www.domain.com/'.$fn;
$path = 'myfolder/'.$fn;
$fp = fopen($path, 'w');
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_FILE, $fp);
$data = curl_exec($ch);
curl_close($ch);
fclose($fp);
// some more code 
```

但不是下载文件并将其保存在目录中，而是直接在浏览器上显示文件内容（垃圾字符，因为文件是 zip）。

我想这可能是标题内容的问题，但不知道确切......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:00:55.007

如[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)所述：

**CURLOPT_RETURNTRANSFER: TRUE**将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

所以你可以简单地在你的 curl_exec 行之前添加这一行：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
```

您将拥有 $data 变量中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:18:26.743

我相信你需要：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
```

使 curl_exec() 返回数据，并且：

```
$data = curl_exec($ch);
fwrite($fp, $data); 
```

获取实际写入的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T01:33:52.907

使用以下包含错误处理的函数。

```
// Download and save a file with curl
function curl_dl_file($url, $dest, $opts = array())
{
    // Open the local file to save. Suppress warning
    // upon failure.
    $fp = @fopen($dest, 'w+');

    if (!$fp)
    {
        $err_arr = error_get_last();
        $error = $err_arr['message'];
        return $error;
    }

    // Set up curl for the download
    $ch = curl_init($url);

    if (!$ch)
    {
        $error = curl_error($ch);
        fclose($fp);
        return $error;
    }

    $opts[CURLOPT_FILE] = $fp;

    // Set up curl options
    $failed = !curl_setopt_array($ch, $opts);

    if ($failed)
    {
        $error = curl_error($ch);
        curl_close($ch);
        fclose($fp);
        return $error;
    }

    // Download the file
    $failed = !curl_exec($ch);

    if ($failed)
    {
        $error = curl_error($ch);
        curl_close($ch);
        fclose($fp);
        return $error;
    }

    // Close the curl handle.
    curl_close($ch);

    // Flush buffered data to the file
    $failed = !fflush($fp);

    if ($failed)
    {
        $err_arr = error_get_last();
        $error = $err_arr['message'];
        fclose($fp);
        return $error;
    }

    // The file has been written successfully at this point. 
    // Close the file pointer
    $failed = !fclose($fp);

    if (!$fp)
    {
        $err_arr = error_get_last();
        $error = $err_arr['message'];
        return $error;
    }
} 
```

# datagridviewcolumn - Asp.Net GridView 在运行时添加模板字段列

> ID：15129528
> 
> 赞同：0
> 
> 时间：2013-02-28T07:05:57.397
> 
> 标签：datagridviewcolumn

我在带有 C# 的 ASP.NET 中使用 GridView。我在运行时将 Templete 字段列添加到 GridView，成功添加了列，并在行中添加了所需的文本。但是在填充 GridView 后，从行删除中执行任何按钮单击事件控件，在行中，我在 Templete 字段中有文字和文本框控件作为 ItemTempete .....

任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:51:39.767

```
<asp:GridView runat="server" ID="gridView">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton runat="server" ID="lnkTest"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

然后在您的 rowdatabound 事件中，您可以找到它并做任何您想做的事情

```
void gridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Entity entity = e.Row.DataItem as Entity;

        LinkButton lnkTest = e.Row.FindControl("lnkTest") as LinkButton;
        lnkTest.CommandArgument = entity.ID.ToString();
        lnkTest.Text = entity.Name;
    }
} 
```

# image - KineticJS-saveImagedata() ，更新到新的 kineticjs 库时出现问题

> ID：15129529
> 
> 赞同：0
> 
> 时间：2013-02-28T07:05:59.687
> 
> 标签：image, html5-canvas, detection, kineticjs

我几乎所有的工作都使用了 kinetic-v3.10.4.js。

现在需求发生了变化，我需要添加更多新版本中可用的功能。

所以我开始使用 kinetic-v4.0.1.js。

我制作了一个示例文件，它工作正常，但像 saveImageData();,DetectionType.etc 这样的功能很少。在 4.0.1 中不工作，因为它们已经更新，而不是 saveImageData()，createBufferImage() 是新函数。

我现在正在用动力学 v4.0.1 重做所有事情。

我在网站中找不到使用 createBufferImage() 进行图像事件检测的旧示例，因为它已更新到 4.3.3

因此，任何有任何旧示例的人都可以帮助使用 4.0.1 进行像素检测/图像检测

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:58:44.477

从存档的互联网内容中搜索怎么样，archive.org

[http://web.archive.org/web/](http://web.archive.org/web/) */ [http://html5canvastutorials.com](http://html5canvastutorials.com)

# c# - 警告消息后的 Javascript 重定向

> ID：15129534
> 
> 赞同：0
> 
> 时间：2013-02-28T07:06:21.943
> 
> 标签：c#, javascript, asp.net, modalpopups

我有一个 asp.net 页面，它由一些控件和一个关闭按钮组成。如果用户点击关闭按钮，它将打开 ModaldialogBox，其中包含一个用于输入关闭原因的文本框。一旦用户输入原因并单击保存按钮，模式弹出窗口会显示警报消息并关闭模式弹出窗口。现有代码如下所示。

```
this.Page.ClientScript.RegisterStartupScript(GetType(), "close", "alert('" + Message + "');var xWin=window.dialogArguments;xWin.location.replace(xWin.location);window.close();", true); 
```

我的要求是，一旦用户单击提交按钮，我必须在关闭模式弹出窗口后导航到仪表板页面。

我在 window.close() 之后尝试过 window.location.href，它会打开另一个窗口并显示页面。但它应该从现有的 asp 父页面导航。请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:10:55.697

使用以下代码重定向父窗口

```
window.opener.parent.location.href = 'dashboardurl'; 
```

# c# - 如何在 C# Windows 窗体中单击按钮时停止 SoundPlayer 中的 PlaySync()

> ID：15129538
> 
> 赞同：2
> 
> 时间：2013-02-28T07:07:00.187
> 
> 标签：c#, window, soundplayer

我有一个窗口应用程序，可让您根据单击的字母播放声音。您可以根据您在 TextBox 中输入的数字重复声音，并且可以按顺序播放 1 到 3。这一切都与下面的代码一起工作。但我希望能够在播放和暂停时停止声音，但不能。停止按钮事件在完成后触发。

我试过让你使用 WMPLib.WindowsMediaPlayer，这里的停止和暂停正在工作，但是声音同时播放，我创建了一个线程在声音之间休眠，但挑战是声音的持续时间不一样所以如果时间太长，它可以在其他人仍在播放时开始。

```
private SoundPlayer myPlayer;

myPlayer = new SoundPlayer();

    public void PlaySound()
    {

        int PageNo = Convert.ToInt16(cboPage.SelectedItem);
        int lineNumber = 0;
        int fromLetter = 0;
        int toLetter = 0;
        int numberOfLoop = 0;
        int numberOfRepeat = 0;

        try
        {
            numberOfRepeat = Convert.ToInt32(nudRepeat.Value);
            while (numberOfRepeat > 0)
            {

                if (cboLine.InvokeRequired)
                {
                    cboLine.Invoke(new MethodInvoker(delegate { lineNumber = Convert.ToInt32(cboLine.SelectedItem); }));
                }
                if (cboLetterFrom.InvokeRequired)
                {
                    cboLetterFrom.Invoke(new MethodInvoker(delegate { fromLetter = Convert.ToInt32(cboLetterFrom.SelectedItem); }));
                }
                if (cboLetterTo.InvokeRequired)
                {
                    cboLetterTo.Invoke(new MethodInvoker(delegate { toLetter = Convert.ToInt32(cboLetterTo.SelectedItem); }));
                }

                numberOfLoop = toLetter - fromLetter + 1;

                while (numberOfLoop > 0)
                {
                    myPlayer.SoundLocation = @"C:\Sound\Page " + PageNo.ToString() + "\\Line " + lineNumber.ToString() + "\\Lesson " + fromLetter + ".wav";
                    myPlayer.PlaySync();

                    fromLetter += 1;
                    numberOfLoop -= 1;
                }
                numberOfRepeat -= 1;

            }
        }
        catch (FileNotFoundException fnfe)
        {
            MessageBox.Show(fnfe.Message.ToString(), "Audio file not found");
        }
        catch (InvalidOperationException ioe)
        {
            MessageBox.Show(ioe.Message.ToString(), "Invalid wav format");
        }       

    private void btnStop_Click(object sender, EventArgs e)
    {
        myPlayer.Stop();                      
    } 
```

# ios - XCode 缺少一些 iOS 调试符号

> ID：15129540
> 
> 赞同：3
> 
> 时间：2013-02-28T07:07:04.310
> 
> 标签：ios, debug-symbols, xcode4.6

我正在为我的应用程序收集崩溃日志，但有时我会遇到无法解码 CoreFoundation 和其他 SDK 相关符号的问题。我可以阅读来自我的应用程序的行，所以我在那里没有问题，但似乎我无法阅读 Apple 符号，除非它们来自我曾经在手机上安装的 iOS 版本。这是一个问题，因为对于 iOS 6，似乎有一些不同的构建取决于您拥有的设备，我跳过了 6.0.x 更新并直接进入 6.1.2。

如何在不追踪使用不同 iOS 版本的朋友并在 XCode 运行时插入手机以便提取符号的情况下获取所有这些符号？一定有更简单的方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:50:46.773

唯一的另一种方法，不适用于所有 iOS 版本，尤其是最后一个错误修复版本，在这里得到回答：[Xcode software image for user iOS in order to symbolicate iOS calls](https://stackoverflow.com/questions/14941773/xcode-software-image-for-user-ios-in-order-to-symbolicate-ios-calls/14947156#14947156)

# c# - 将文件连接到 SSIS 上的变量

> ID：15129541
> 
> 赞同：1
> 
> 时间：2013-02-28T07:07:04.287
> 
> 标签：c#, ssis, extract, 7zip

我想使用执行过程任务在 SSIS 2008 上提取 zip 文件。我很困惑，因为 Arguments 只能执行 1 个文件进程和 1 个工作目录。但我想要一个参数和一个工作目录根据 SQL 表动态更改，该表给出参数和工作目录上的路径值。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:07:21.797

如果您想动态传递这些值，则通过变量传递这些值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:07:24.247

文件系统任务提供的操作针对单个文件系统对象。要对多个对象使用它，您应该使用 Foreach 循环容器。只是谷歌的例子，你应该找到几个

# c++ - 在 C++ 类中使用位域的未对齐属性

> ID：15129544
> 
> 赞同：6
> 
> 时间：2013-02-28T07:07:13.130
> 
> 标签：c++, bit-fields

我正在尝试使用 C++ 中的位域来实现特定的类大小，但由于某种原因，它比我预期的要大。

问题是，一个 32 位（4 个字节）的类报告（当作为参数传递给`sizeof`5 个字节时）。示例类如下：

```
typedef unsigned char u8;
typedef unsigned int u32;

class Test {
    u8 four_bit_field : 4;
    u8 eight_bit_field;
    u32 twenty_bit_field : 20;
}__attribute__((packed)); 
```

如果`four_bit_field`和`eight_bit_field`位置被切换，则`sizeof`返回正确的大小，4 字节。我相信这可能是内存对齐问题。

那么，有人知道这种行为背后的原因吗？而且，最重要的是，如何在不切换任何位置的情况下解决此问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T07:11:03.247

没有位计数的`u8`字段与下一个字节边界对齐，而不是与其他位字段打包。因此，您的前 4 位占用一个字节，后 8 位占用一个字节，最后 20 位占用 3 个字节，总共 5 个。

如果您向 8 位字段添加位字段大小，它将起作用，请参阅[http://ideone.com/Bexw6l](http://ideone.com/Bexw6l)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:13:21.047

这确实是一个对齐问题。`u8 eight_bit_field`不是位域，它是普通的`unsigned char`（从名称中），并且 a `char`, `signed char`or`unsigned char`自然地在字节边界上对齐。

因此，您最终会在和`4`之间得到一些填充，在;之后得到一些填充。后者可能被派生类重用，前者永远丢失。`four_bit_field``eight_bit_field``4``twenty_bit_field`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T07:54:56.997

尝试强制对齐到 1 个字节：

```
#pragma pack(1)
class Test {
    u8 four_bit_field : 4;
    u8 eight_bit_field : 8;
    u32 twenty_bit_field : 20;
};
#pragma pack() 
```

# excel - 使用公式格式化 Excel 单元格中的文本子集

> ID：15129549
> 
> 赞同：7
> 
> 时间：2013-02-28T07:07:29.940
> 
> 标签：excel, string-formatting, vba

我已经使用 excel 中的公式构建了一个字符串。举个例子

> 单元格 C3 包含文本“语言”
> 单元格 C4 = “英语、西班牙语、德语、法语”
> My Forumla = C3 & “:” & CHAR(10) & C4

所需的文本将是：

> 语言：
> **英语、西班牙语、德语、法语**

（粗体文本实际上是某种颜色，如红色）

有没有办法在 Excel 中执行此操作（更改部分文本格式）。

我已经尝试过一个公式...（不工作）

```
Function formatText(InText As Range)

'Set font color
  InText.Characters(1.5).Font.Color = Red
   'InText.Characters((InStr(1, ":", InText) + 1), (Len(InText) - InStr(1, ":", InText))).Font.ColorIndex = 3
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:52:22.300

*当且仅当*您发布的功能与工作

 **   它是从 a 调用的`Sub`（即，正如其他人提到的那样，不是作为 UDF）

和

*   range 中包含的值`InText`是字符串常量。（这是我回答的重点）

它*不适*`InText`用于包含公式的范围内的任何单元格。AFAIK，您无法格式化公式返回的字符串的*一部分。*

顺便说一句，我很想被证明是错误的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T00:12:13.183

关于 Hightower 的问题，“您如何将公式输出转换为字符串，以便您可以应用文本格式？”

要“转换”公式的输出以便您可以应用文本格式，您必须将公式返回的值写入电子表格，然后将格式应用于您写入的值。您可以将值写入包含公式的单元格（这将删除公式），或者您可以将值写入电子表格中的不同位置（这将保留公式，但随后您将看到双倍）。

```
Sub Cell_Format(InText as Range)
  InText.formula = cstr(InText.value)  ' converts result of formula into a string literal   
    'or: InText.offset(0,1).formula = cstr(InText.value) -- writes the value in the cell next to InText
  InText.characters(1, 5).font.color = vbRed
End Sub 
```

然后`Cell_Format range("$A$1")`将单元格 $A$1 中的公式替换为字符串常量，并将前五个字符的颜色更改为红色。

如果要对大于一个单元格的范围执行此操作，请将此代码添加到上面：

```
Sub Range_Format(InText as Range)
  For each c in InText
    Cell_Format(c)
  Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:11:31.397

您不能在 Excel 界面中直接调用下面的 UDF。为此，您将使用事件，因为 UDF 无法更改单元的物理特性。有关更多详细信息，您可以阅读此链接。[http://support.microsoft.com/kb/170787](http://support.microsoft.com/kb/170787)

```
Function formatText(InText As Range)

'Set font color
  InText.Interior.Color = vbRed
   'InText.Characters((InStr(1, ":", InText) + 1), (Len(InText) - InStr(1, ":", InText))).Font.ColorIndex = 3
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:14:37.060

您需要使用以下代码：

```
InText.Characters(1,5).Font.Color = RGB(255, 0, 0) 
```

如果您想让它变得灵活，以便只有（完全）第二行是红色的，请使用以下代码：

```
InText.Characters(Instr(InText, vbCr)+1, Len(InText)-Instr(InText, vbCr)).Font.Color = RGB(255, 0, 0) 
```

请注意，您的函数需要从 VBA 调用，即您不能将其用作用户定义的函数！UDF 只能返回结果，但不能修改单元格！*

# sql - 静态文本的数据类型性能

> ID：15129550
> 
> 赞同：0
> 
> 时间：2013-02-28T07:07:30.743
> 
> 标签：sql, ruby-on-rails, activerecord, rails-migrations

我目前正在使用布尔数据类型（Rails、ActiveRecord）查询我的数据库以检查午餐和晚餐的交易。我将添加更多的膳食选项，并且不想将静态文本存储在数据库中，因为我担心它会影响性能。

将静态字符串存储在要查询的数据库中的最佳方法是什么？我正在考虑保存它有一个整数并设置一个键（1 = 午餐，2 = 晚餐）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:06:48.893

听起来你想要的是一个枚举。 [这个问题](https://stackoverflow.com/questions/4282710/how-do-i-describe-an-enumeration-column-in-a-rails-3-migration)有很多关于你可以用来在 Rails 3 中获得枚举支持的不同 gem 的建议。特别是，如果你使用 MySQL，[这个 gem](https://github.com/electronick/enum_column)应该可以解决问题。

# javascript - 如何使用 JavaScript/jQuery 定期自动更改网页标题？

> ID：15129558
> 
> 赞同：2
> 
> 时间：2013-02-28T07:07:50.870
> 
> 标签：javascript, jquery, for-loop, page-title

我试过这个：

```
for (i = 0; i < i+1; i++) {
    if (i%2 == 0) {
        document.title = "title1";
    } else {
        document.title = "title2";
    }
} 
```

但是由于连续/永无止境的for循环，浏览器（谷歌浏览器）挂断了。我是 JavaScript/jQuery 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:10:31.250

```
window.setInterval(function(){
    changetitle()
}, 10000); // Every 10 seconds

function changetitle(){
    // Change title here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:10:12.730

您需要[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数。

```
var isOdd = true;
setInterval(function(){
    document.title= isOdd ? "title1" : "title2";
    isOdd = !isOdd;
}, 100); 
```

像这样......传递给 setInterval 的函数将每 100 毫秒异步调用一次。所以你的浏览器不会挂断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T07:10:26.560

您想使用 JavaScript 计时事件：[http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

```
var i = 0;
setInterval(function() {
   document.title = i++ % 2 == 0 ? "title1" : "title2";
}, 1000); 
```

每 1 秒（1000 毫秒）它会调用这个函数并更新标题。

# arrays - 在 MATLAB 中查找数组中的最大索引时出错

> ID：15129562
> 
> 赞同：0
> 
> 时间：2013-02-28T07:08:16.657
> 
> 标签：arrays, matlab

我想制作一个 15*15 的数组并用这些代码填充它们，我想找到其中一行的最大值。我在 MATLAB 中编写了这段代码来创建一个数组：

```
a = zeros (15) - inf;

for i=1:15 
    k2=4;
    l2=1;

    k=floor((i-1)/3);
    l=mod((i-1),3);
    f=false;
    if (k==k2 && abs(l2-l)==1)
        f=true;
    end
    if(l==l2 && k2-k==1)
        f=true;
    end
    if(k2-k==1 && abs(l2-l)==1)
        f=true;
    end

    if (f)
        a(i,14)=100;
    end
end
max=200;
for i=1:15
    if(find(2,i) < max)
        max=i;
    end
end

max=0 
```

当我编写这些代码以在数组的第二行中查找最大索引时，显示此错误：

> > b=a(2,:)

```
b =

     1  -Inf     1     1     1     1  -Inf  -Inf  -Inf  -Inf  -Inf  -Inf  -Inf  -Inf  -Inf

>> [~,index]=max(b)
??? Indexing cannot yield multiple results. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:16:25.137

您有变量 max 并尝试使用函数 max。

`exist var_name`使用or`which var_name`命令检查现有名称是一个很好的做法。

重命名代码中的变量`max`并将其从工作区中删除`clear max`。

# android - 相机在 android jelly bean 中崩溃

> ID：15129564
> 
> 赞同：0
> 
> 时间：2013-02-28T07:08:22.040
> 
> 标签：android, android-camera

我在 Android 2.2(Froyo) 中做了一个相机应用程序。

我在 Android 4.1 (jelly bean) 中安装了相同的应用程序，它在 Android 2.2(Froyo) 中运行良好，但在 Android 4.1 (Jelly Bean) 中崩溃。请你帮帮我。

这些是我的 logcat 错误：

```
02-28 12:52:01.434: E/AndroidRuntime(436): FATAL EXCEPTION: GLThread 11
02-28 12:52:01.434: E/AndroidRuntime(436): java.lang.IllegalArgumentException: No configs match configSpec
02-28 12:52:01.434: E/AndroidRuntime(436):  at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:760)
02-28 12:52:01.434: E/AndroidRuntime(436):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:916)
02-28 12:52:01.434: E/AndroidRuntime(436):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1246)
02-28 12:52:01.434: E/AndroidRuntime(436):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:37:37.800

Android 模拟器不支持相机，所以不用担心。这种类型的错误出现在 Android 模拟器 2.2 中，我也检查了 Android 模拟器 1.6 但没有收到错误。

我还检查了 Android 设备中的上述代码三星 Galaxy Ace 工作正常。

# python - csv.writer 在单独的列/单元格中写入单词的每个字符

> ID：15129567
> 
> 赞同：55
> 
> 时间：2013-02-28T07:08:25.410
> 
> 标签：python, csv, web-scraping

目标：从所有行中的锚标记中提取文本`models`并将其放入 csv 中。

我正在尝试这段代码：

```
with open('Sprint_data.csv', 'ab') as csvfile:
  spamwriter = csv.writer(csvfile)
  models = soup.find_all('li' , {"class" : "phoneListing"})

  for model in models:

      model_name = unicode(u' '.join(model.a.stripped_strings)).encode('utf8').strip()
      spamwriter.writerow(unicode(u' '.join(model.a.stripped_strings)).encode('utf8').strip()) 
```

它工作正常，除了 csv 中的每个单元格只包含一个字符。

像这样：

```
|  S  |  A  |   M  |   S  |   U   |  N  |   G   | 
```

代替：

```
|SAMSUNG| 
```

当然，我错过了一些东西。但是什么？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-11-21T16:18:16.107

`.writerow()`需要一个序列 ( `''`, `()`, `[]`) 并将每个索引按顺序放置在它自己的行列中。如果您想要的字符串不是序列中的一个项目，`writerow()`将遍历字符串中的每个字母，并且每个字母都将写入您的 CSV 中的单独单元格。

您先请`import csv`

如果这是您的清单：

```
myList = ['Diamond', 'Sierra', 'Crystal', 'Bridget', 'Chastity', 'Jasmyn', 'Misty', 'Angel', 'Dakota', 'Asia', 'Desiree', 'Monique', 'Tatiana']

listFile = open('Names.csv', 'wb')
writer = csv.writer(listFile)
for item in myList:
    writer.writerow(item) 
```

上述脚本将生成以下 CSV：Names.csv

```
D,i,a,m,o,n,d
S,i,e,r,r,a
C,r,y,s,t,a,l
B,r,i,d,g,e,t
C,h,a,s,t,i,t,y
J,a,s,m,y,n
M,i,s,t,y
A,n,g,e,l
D,a,k,o,t,a
A,s,i,a
D,e,s,i,r,e,e
M,o,n,i,q,u,e
T,a,t,i,a,n,a 
```

如果您希望每个名称都在它自己的单元格中，解决方案是简单地将您的字符串 ( `item`) 放在一个序列中。这里我使用方括号`[]`。：

```
listFile2 = open('Names2.csv', 'wb')
writer2 = csv.writer(listFile2)
for item in myList:
    writer2.writerow([item]) 
```

`.writerow([item])`产生所需结果的脚本：Names2.csv

```
Diamond
Sierra
Crystal
Bridget
Chastity
Jasmyn
Misty
Angel
Dakota
Asia
Desiree
Monique
Tatiana 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-28T07:13:18.943

`writerow`接受一个序列。你给它一个字符串，所以它把它当作一个序列，字符串就像字符序列一样。

在这一行你还想要什么？没有？如果是这样，请将其列为一项：

```
spamwriter.writerow([u' '.join(model.a.stripped_strings).encode('utf8').strip()]) 
```

（顺便说一句，`unicode()`调用是完全没有必要的，因为您已经加入了 unicode 分隔符。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-17T15:27:41.560

这通常是我使用的解决方案：

```
import csv
    with open("output.csv", 'w', newline= '') as output:
        wr = csv.writer(output, dialect='excel')
        for element in list_of_things:
            wr.writerow([element])
        output.close() 
```

这应该在单列而不是单行中为您提供所有列表元素的输出。

这里的关键点是遍历列表并使用 '[list]' 来避免 csvwriter 排序问题。

希望这是有用的！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-22T19:30:50.520

只需用列表符号将其包围（即**[]**）

```
writer.writerow([str(one_column_value)]) 
```

# python - 如何重新排列此文件中的行并打印它们？

> ID：15129569
> 
> 赞同：0
> 
> 时间：2013-02-28T07:08:28.510
> 
> 标签：python, python-3.x

这是我的名为“words.txt”的文本文件

```
7 dog
3 moose
6 apple
2 dinosaur 
```

这是我到目前为止所拥有的：

```
file = open('words.txt','r')
for lines in file:
    number, word = lines.split()
    numbers = int(number) 
```

所以基本上我已经将数字从单词中拆分出来并将数字变成整数，我不确定这是否可能，但是有没有办法将这些单词按最低数字重新排列到最高数字？我现在一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:11:54.763

```
>>> lines = [l.rstrip('\n') for l in open('words.txt')]
>>> print('\n'.join(sorted(lines, key=lambda l:int(l.split()[0]))))
2 dinosaur
3 moose
6 apple
7 dog 
```

# android - 无法添加 Google Admob

> ID：15129572
> 
> 赞同：0
> 
> 时间：2013-02-28T07:08:33.720
> 
> 标签：android, admob

我为 Admob 编写了代码。这是我的 layout.xml 文件代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:id="@+id/relativeLayoutHomeParent"
tools:context=".Home" xmlns:app="http://schemas.android.com/apk/lib/com.google.ads">

<RelativeLayout
    android:id="@+id/relativeLayoutHomeTopBar"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <TextView
        android:id="@+id/textView1"
        android:text="Home"
        style="@style/screen_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/imageViewHomeSettings"
        android:layout_width="22dp"
        android:layout_height="22dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/set_settings"
        android:layout_marginRight="10dp" />

</RelativeLayout>

<View
    android:id="@+id/view1"
    android:layout_width="match_parent"
    android:layout_height="5dp"
    android:layout_below="@+id/relativeLayoutHomeTopBar"
    android:background="@drawable/shadow" />

<ListView
    android:id="@+id/listViewHome"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#BDBDBD"
    android:dividerHeight="1dp"
    android:layout_below="@+id/view1" >
</ListView>

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    app:adSize="BANNER"
    app:adUnitId="a1512f50d8c3692"
    app:loadAdOnCreate="true"
    app:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" >
</com.google.ads.AdView> 
```

输出：

![截屏](../Images/9b994a49d11406a85b99008e9bc29da9.png)

我想要屏幕底部的顶部栏（是的那个黑条）。我也为它写过，但它显示输出如上图。

另外我不明白哪一个是admob横幅，顶部的还是底部的？？谁能解释一下这两个酒吧的区别。其实我是新手。这是我第一次为 admob 编写代码。请帮助我学习这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:12:43.560

可能 ADK 更新与您项目的构建路径混淆了。尝试删除 admob JAR 并将其再次添加到您的`libs`文件夹中，将其添加到您的`Build Path`并执行一个 Clean Project。

编辑以下海报关于没有 libs 文件夹的评论：

你应该试试这个：

1.  删除项目中对 AdMob JAR 的所有引用 -> 您的代码不应再无错误地构建
2.  `libs`在项目的根目录下创建一个文件夹。
3.  将 AdMob JAR 复制到 libs 文件夹中
4.  确保此 AdMob JAR 在您的构建路径中（这将允许您的代码在没有错误的情况下构建）（如果仍然没有运行确定）右键单击您的项目 > Android 工具 > 修复项目属性

# python - 使用多处理模块在进程之间传递消息

> ID：15129574
> 
> 赞同：3
> 
> 时间：2013-02-28T07:08:39.650
> 
> 标签：python, parallel-processing, ipc, multiprocessing, communication

将消息从工作进程发送到另一个随机选择的（工作或主）进程的推荐方式是什么？我能想到的一种方法是使用[Pipes](http://docs.python.org/2/library/multiprocessing.html#pipes-and-queues)，但由于它只能在两个选定进程之间创建管道，因此我需要为每个进程对创建一个管道。这似乎不太实用。我想要的是在进程之间创建一个完整的图表并随机选择一个管道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T14:39:13.500

您可以通过在队列中维护一些约定来使用队列来在进程之间进行通信。您可以在[此处](http://docs.python.org/dev/library/queue.html#queue.Queue)找到有关使用队列的详细信息。

PS :-如此[处](http://docs.python.org/dev/library/multiprocessing.html)所述队列是线程和进程安全的。

# ms-access - 如何在 Microsoft Access 表中选择唯一记录？

> ID：15129578
> 
> 赞同：0
> 
> 时间：2013-02-28T07:09:02.210
> 
> 标签：ms-access, select

我有一个 Access 表，其中包含如下几条记录（ID、颜色）：

```
1 red
1 blue
2 blue
3 white
3 yellow
3 red 
```

如何创建查询以便只返回 ID 为 2 的记录？我不想选择 ID 1 和 3，因为它们在此表中都有多个记录。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:16:37.180

```
SELECT * 
FROM  tbl 
GROUP BY ID
HAVING COUNT(*) = 1 
```

# maven-2 - 为我的 JIRA 插件生成 OBR 文件

> ID：15129581
> 
> 赞同：0
> 
> 时间：2013-02-28T07:09:17.473
> 
> 标签：maven-2, jira, jira-plugin, obr

我开发了一个 JIRA 插件，我需要知道如何生成 .obr 文件而不是 JAR 文件。有人可以帮我解决这个问题吗，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:52:27.653

要开始使用，请查看[如何开始使用 OSGi](http://www.osgi.org/Technology/HowOSGi)，并继续阅读以下教程：

> *   [EclipseCon Tutorials](http://www.eclipsecon.org/2006/Sub.do?id=176) - Thomas Watson 和 Peter Kriens 在 EclipseCon 2006 上提供的教程。[注意：教程内容已移至[Subversion]](http://www.osgi.org/svn/public/trunk/eclipsecon/2006)
> *   [The Server Side](http://www.theserverside.com/tt/articles/article.tss?l=OSGiforBeginners) : OSGi for Beginners - 一个hello worldtutorial。
> *   [Javaworld: OSGi 教程](http://www.javaworld.com/javaworld/jw-03-2008/jw-03-osgi1.html)- 初学者教程。
> *   [Glyn Normington 的 Hello World](http://underlap.blogspot.com/2007/01/creating-osgi-bundle.html) - 可能是 OSGi 上最小（但完整）的 Hello World。
> *   [Neil Bartlett 的入门](http://njbartlett.name/bndtools_intro.html)Neil Bartlett 在使用 Equinox 的 EclipseZone 上编写了入门系列。
> *   [OSGi development with Eclipse Equinox - 教程](http://www.vogella.de/articles/OSGi/article.html)Lars Vogel 关于在 Equinox 中使用 OSGi 的教程。
> *   [OSGi 和 Equinox Jumpstart](http://eclipsesource.com/en/downloads/presentations/osgi-and-equinox-jumpstart/) Jeff McAffer 和 Chris Aniszczyk 的 6 部分网络研讨会。

您可以在[Altasian 的 OSGi 和 Spring 参考文档中找到更多信息和操作方法](https://developer.atlassian.com/display/PLUGINFRAMEWORK/OSGi+and+Spring+Reference+Documents)

另请查看[此帖子](http://njbartlett.name/2011/09/12/why-obr.html)以获取有关 OBR 的信息

# html5-canvas - 如何在使用 paper.js 进行鼠标拖动时仅更改路径的宽度（矩形、圆形）

> ID：15129584
> 
> 赞同：2
> 
> 时间：2013-02-28T07:09:25.980
> 
> 标签：html5-canvas, paperjs

我一直坚持使用 paper.js 仅调整画布中项目的宽度，我已经按照以下方式调整大小，但这会导致从矩形/圆形的中心调整左右两侧的大小。

```
function onMouseDrag(event){

(selectedItem.bounds.contains(event.point)) ?
selectedItem.scale(0.9871668311944719,1) : selectedItem.scale(1.013, 1);
} 
```

上面的代码在两个 x 方向上调整大小。

帮助我仅在一个方向上调整宽度。

谢谢，

苏里巴布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:41:09.280

您可以使用以下表格将缩放操作居中：

```
scale(hor, ver, point) 
```

因此，在您的情况下，如果您想从所选项目的左中心进行缩放，您可以使用：

```
function onMouseDrag(event){

(selectedItem.bounds.contains(event.point)) ?
selectedItem.scale(0.9871668311944719, 1, selectedItem.bounds.left) : selectedItem.scale(1.013, 1, selectedItem.bounds.left);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:32:35.127

我不确定您仅缩放宽度是什么意思。如果您想拥有比更改更粗的路径，`strokeWidth`则可能会做您想做的事情。

如果您想知道为什么缩放路径会在 x 轴上的两个方向上扩展，那么您可能会检查路径本地中心的位置。如果路径的某些节点相对于该局部中心具有负坐标，则用正值缩放它们会进一步降低它们的坐标。

也许您应该对所有顶点进行归一化，即直接移动它们，使所有顶点的最小 x 和 y 值为 0。

问候和好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T12:39:30.363

尝试这个：

```
function onMouseDown(e) {
    var cx = e.point.x;
    var cy = e.point.y;
    var rectangle = new Rectangle(e.point, new Size(1,1));
    path = new Path.Ellipse(rectangle);
    path.strokeColor = 'red';       
}

function onMouseDrag(e) {
    path.remove();
    var x = Math.min(e.point.x, cx),
        y = Math.min(e.point.y, cy),
        w = Math.abs(e.point.x -cx),
        h = Math.abs(e.point.y -cy);
    var rectangle = new Rectangle(x,y,w,h);
    path = new Path.Ellipse(rectangle);
    path.strokeColor = 'red'
} 
```

# python - 从文本中提取变量并使用 python 写入 csv

> ID：15129587
> 
> 赞同：0
> 
> 时间：2013-02-28T07:09:34.307
> 
> 标签：python, text, csv

我需要帮助来解析一个如下所示的文本文件：

```
 WKU  03487472
 WKU 3487472
      Filed Apr. 30, 1968, Ser.  No. 725,329  
      Int.  Cl.  A42b 1122  
 AISD 19700106
 WKU  D2487471
 AISD 19700308
 WKU  03487471
      Filed J   16, 1969  
      [51] Int.  Cl.  A41d 25104  
 AISD 19700106 
```

我想得到一些 csv 格式的输出：

```
 WKU           Filed               Int.          AISD
 03487472    Apr. 30, 1968      A42b 1122      19700106
 D2487471          .                 .         19700308
 03487471      J   16, 1969      A41d 25104    19700106 
```

我不是程序员并开始使用python。我尝试了如下脚本：

```
 import csv
        import itertools

        def is_end_of_record(line):
           return line.startswith('WKU')

        class FieldClassifier(object):
           def __init__(self):
               self.field=''
           def __call__(self,row):
              if not row[0].isspace():
                  self.field=row.split(' ',1)[0]
              return self.field

        fields = 'WKU Filed Int. AISD'.split()
        with open('C:\Users\Na\Desktop\example.txt', 'r') as infile:
          with open('example.csv', 'wb') as oufile:
            writer = csv.DictWriter(oufile, fiels=fields) 
            writer.writerow(dict((h, h) for h in fields))
            for end_of_record, lines in itertools.groupby(infile,is_end_of_record):
               if not end_of_record:
                   classifier=FieldClassifier()
                   record={}
                   for fieldname, row in itertools.groupby(lines,classifier):
                        record[fieldname]='; '.join(r.strip() for r in row) 
```

它似乎无法正常工作。如果有人愿意提供帮助或提供任何建议，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:00:23.563

输入文件的格式不是很严格。对于这样的格式，我认为`re`模块非常有用。我为每条记录创建了正则表达式，第一个元素是一个键，第二个是一个值。我也辞职了`itertools`：

```
import csv
import re

re_AISD = re.compile(r'(AISD)\s+(\S+)')
re_WKU = re.compile(r'(WKU)\s+(\S+)')
re_Filed = re.compile(r'(Filed)\s+(.*?\d{4})')
re_Int = re.compile(r'(Int.)  Cl.\s+(\w+ \d+)')

FLD_REGEXPES = (re_AISD, re_WKU, re_Filed, re_Int)

def get_field(line):
    for ree in FLD_REGEXPES:
        rx = ree.search(line)
        if rx:
            return (rx.group(1), rx.group(2))
    return (None, None)

def convert_file(fname):
    fields = 'WKU Filed Int. AISD'.split()
    f = open(fname, 'r')
    lines = f.readlines()
    f.close()
    with open(fname + '.csv', 'wb') as oufile:
        writer = csv.DictWriter(oufile, fieldnames=fields, restval = '?', dialect='excel-tab')
        writer.writerow(dict((h, h) for h in fields))
        rec = {}
        for line in lines:
            k, v = get_field(line)
            if k:
                print('[%s]=[%s]' % (k, v))
                if k == 'WKU': # start of new record
                    if rec:
                        writer.writerow(rec)
                    rec = {}
                rec[k] = v
        if rec:
            writer.writerow(rec) 
```

另请注意`C:/Users/Na/Desktop/example.txt`- 在 Python`\`中，字符串中的字符是用于换行符的“转义”字符：`\n`、制表符：`\t`等。在完整路径文件名中，您可以使用`\\`或更好地使用`/`在 Windows 和 Unix 环境中都可以使用的文件名。您还可以使用以 为前缀的“原始”字符串，我在其他正则表达式定义`r`中使用了此类原始字符串。`re_AISD`

# asp.net - 我正在尝试对数据表 dt 进行排序，但它不起作用。Time Elapsed 是我在 dt 中的列名。想按 DESC 排序

> ID：15129589
> 
> 赞同：0
> 
> 时间：2013-02-28T07:09:50.917
> 
> 标签：asp.net

```
public static DataTable resort(DataTable dt)       
{

    string sortByColumnsStr = "Time Elapsed  DESC";
    DataView dtview = new DataView(dt);
    dtview.Sort = sortByColumnsStr;
    DataTable dtsorted = dtview.ToTable();        
    return dtsorted;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:37:02.043

用方括号嵌入列名，如下所示：

```
string sortByColumnsStr = "[Time Elapsed] DESC"; 
```

你最终可以看看这个：[http ://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/1f37f760-b479-4b4a-a2db-0e828812ac0e/](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/1f37f760-b479-4b4a-a2db-0e828812ac0e/)

# c++ - 可以锁定 std::map 中键的值吗？

> ID：15129593
> 
> 赞同：1
> 
> 时间：2013-02-28T07:10:20.600
> 
> 标签：c++, stl

我有一个简单的 std::map 具有键值。我希望这张地图是线程安全的。我不想锁定整个地图。由于我的线程只能在地图中特定键的值上工作（更新、删除），因此我不希望锁定整个地图。我希望其他线程能够在地图上工作，当然不是锁定值。

仅锁定特定键的值是可取的还是逻辑上正确的？或者我应该考虑另一种数据结构？

更新：我刚刚尝试了一个示例示例，其中我有并行线程更新和插入到同一个地图中。

```
#include "stdafx.h"
#include "stdafx.h"
#include <iostream>
#include <map>
#include <process.h>
#include <windows.h>
using namespace std;
CRITICAL_SECTION CriticalSection; 

struct newEntry
{
    int key;
    char value;
};

std::map<int,char> mapIntChar;

unsigned __stdcall UpdateThreadFunc( void* pArguments )
{

    char *ptr =  (char *) pArguments;
    EnterCriticalSection(&CriticalSection); 
    *ptr = 'Z';
    LeaveCriticalSection(&CriticalSection);
    _endthreadex( 0 );
    return 0;
 } 

unsigned __stdcall InsertThreadFunc( void* pArguments )
{
struct newEntry *ptr =  (struct newEntry *) pArguments;
mapIntChar[ptr->key] = ptr->value;
    _endthreadex( 0 );
    return 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::map<int,char>::iterator it1;
    unsigned threadID;
    if (!InitializeCriticalSectionAndSpinCount(&CriticalSection, 
    0x00000400) ) 
    return 0;
    mapIntChar[0] = 'A';
    mapIntChar[1] = 'B';
    mapIntChar[2] = 'C';
    mapIntChar[3] = 'D';

    HANDLE   hThread;
    int nCount = 0;
    struct newEntry *newIns;
    while ( nCount < 1004)
{
         it1 = mapIntChar.begin();
    char *ptr = &(it1->second);
         hThread = (HANDLE)_beginthreadex( NULL, 0, &UpdateThreadFunc, ptr, 0, &threadID );

         newIns = new newEntry;
         newIns->key = rand() % 1000;
         newIns->value = 'K';
    hThread = (HANDLE)_beginthreadex( NULL, 0, &InsertThreadFunc, newIns, 0, &threadID );
    nCount++;
         delete newIns;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:17:10.550

您可以创建一个包装器`std::map`（或者将容器类型作为模板参数，因此您可以使用类似的容器，如`std::unordered_map`or `std::set`），它具有锁定特定条目的功能。

包装类必须镜像实际`std::map`类中的方法，它们的实现包含对锁的检查，否则只需调用底层容器类型中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:18:25.803

如果映射已经为您要修改的每个键提供了一个条目，那么您应该能够在不同线程上修改这些键的值，只要每个线程使用不同的键集且没有重叠，*并且*只要没有修改映射本身的结构（即不修改映射中的键集，或以其他方式调整它的大小）。

也就是说，从技术上讲，这仅适用于 C++11。在此之前，C++ 会假装线程不存在，并且在多个线程运行时根本不保证内存模型。

# git - 为什么不提交遵循合并基础错误？

> ID：15129600
> 
> 赞同：11
> 
> 时间：2013-02-28T07:10:43.167
> 
> 标签：git, git-merge, git-submodules

我们的 git 流程是定期合并到我们的主分支，以便可以将更改合并回我们最新的功能分支。由于最近几轮从一个分支合并到另一个分支，我们遇到了一个解决方案不明确的问题。

我们有一个包含 19 个子模块的存储库。在合并所有子模块时，我们看到了我们认为的预期输出，告诉我们文件被修改、冲突等。然后当我们到达“根”存储库的合并时，一切都变南了，我们看到了一些以下输出（编辑以仅指出问题）。

```
warning: Failed to merge submodule projects/foo1 (commits don't follow merge-base)
warning: Failed to merge submodule projects/foo2 (commits don't follow merge-base)
warning: Failed to merge submodule projects/foo3 (not fast-forward)

Found a possible merge resolution for the submodule:
 931a61165f3b2079523a122477fa5f44c123406d: Comment of last merge

If this is correct simply add it to the index for example by using:

 git update-index --cacheinfo 160000 931a61165f3b2079523a122477fa5f44c123406d "projects/foo3"

which will accept this suggestion. 
```

现在，我们可以运行建议的`git update-index`命令。它会让 git 为那个子模块感到高兴，但我们以前从未运行过它。在查看没有显示帮助的 foo1 和 foo2 子模块时，这个问题非常糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T03:22:30.673

如果 OP 在他的问题下方的评论消失了：

> 对于那些浏览这篇文章的人，虽然我不是 100% 确定发生了什么，但我相信这是由于用户手动从其根存储库中删除了 GIT_MERGE 文件并推送。通过手动合并每个子模块，推送更改，然后在根子模块中运行
> 
> ```
> git commit -i -m "blah" . 
> ```
> 
> 我们似乎解决了这个问题。Git 从未声称我们需要在根子模块中提交，但似乎我们确实需要。到目前为止，后续合并似乎工作正常。

# linq - 在 linq to sql 中左外连接 3 个表

> ID：15129601
> 
> 赞同：0
> 
> 时间：2013-02-28T07:10:44.920
> 
> 标签：linq, join

我试图在 linq 中编写一个查询，在其中加入 3 个表格并用字符串“ANY”填充空值，但这没有发生，需要一些帮助，请我是新手。

我试着做这样的事情......

```
var results = from user in allusers
              join building in allbuildings where building.buildingid equals user.buildingid
              into BuildingAndUsers.FirstorDefault(new allbuildings{BuildingName="ANY" BuildingID=0})
              from blah in BuildingAndUsers
              join Site in AllSites where .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:41:36.727

就像是：

```
var results = 
      from user in allusers
      join building in allbuildings on building.buildingid equals user.buildingid
          into BuildingAndUsers 
      from buildingAndUser in BuildingAndUsers.DefaultIfEmpty(new allbuildings { BuildingName="ANY", BuildingID=0 })
      join Site in AllSites on ....
          into BuildingAndUsersAndSites
      from buildingAndUsersAndSite in BuildingAndUsersAndSites.DefaultIfEmpty()
      select ... 
```

# llvm - LLVM pass 创建相关

> ID：15129607
> 
> 赞同：0
> 
> 时间：2013-02-28T07:10:58.503
> 
> 标签：llvm

我想创建一个将在每个加载指令之后插入一个函数（即在某个 c 文件中）的传递。我知道如何插入一个没有参数的函数。但是一个也有参数的函数。我无法插入那个。我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:31:15.453

使用`CallInst::Create`静态方法。它需要一个`ArrayRef`参数。通过在 LLVM 和 Clang 的源代码中查找此方法调用，您可以找到许多使用它的示例。

# mongodb - MongoDB 聚合将 NumberInt32 转换为 ISODate

> ID：15129614
> 
> 赞同：1
> 
> 时间：2013-02-28T07:11:33.467
> 
> 标签：mongodb, aggregation-framework

MongoDB 中的聚合

集合块

```
{
    "_id": ObjectId("512eef329d5d0c9415000025"),
        "tx": {
         "0": "A1",
         "1": "A2",
         "2": "A3"
        },
    "time": NumberInt(1304200205)
} 

{
    "_id": ObjectId("512eef329d5d0c9415000026"),
        "tx": {
         "0": "A4",
         "1": "A5",
         "2": "A6"
        },
    "time": NumberInt(1304200395)
} 

{
    "_id": ObjectId("512eef329d5d0c9415000027"),
        "tx": {
         "0": "A7",
         "1": "A8",
         "2": "A9"
        },
    "time": NumberInt(1304202305)
} 

db.blocks.aggregate(
    {'$unwind':'$tx'},
    {'$group' : { '_id' : {
        'year': {'$year':'$time'},
        'month': {'$year':'$time'},
        },
        'count' : {'$sum':1}            
    }
});

{
    "errmsg" : "exception: can't convert from BSON type NumberInt32 to Date",
    "code" : 16006,
    "ok" : 0
} 
```

这意味着时间字段不是 Mongo Date 格式，而是 NumberInt32。

如何使用聚合函数将其转换为 MongoDate。我不想更改数据，因为它来自不同的来源，我每小时都会导入一次。目前数据库中大约有 2,000,000 条记录，并且正在增加......

提出了这个问题[Aggregation Framework - Converting Unix Timestamp to ISODate](https://stackoverflow.com/questions/14266667/aggregation-framework-converting-unix-timestamp-to-isodate)大约 1 个月前。如果有人有答案，也请在这里发布...

# wpf - TextBox 如何在 WPF 中接受正负十进制值

> ID：15129618
> 
> 赞同：1
> 
> 时间：2013-02-28T07:11:52.037
> 
> 标签：wpf, textbox

在我的 projcet(WPF) 文本框中只允许正负十进制数。我使用正则表达式然后它接受 -.values。但它采用这样的值

-123.-2 这是不正确的。我的要求是它接受这样

233334 -233333 -2.3444

我使用了这段代码。

```
 private void NumericOnly(System.Object sender, System.Windows.Input.TextCompositionEventArgs e)
    {
        e.Handled = IsTextNumeric(e.Text);

    }

    private static bool IsTextNumeric(string str)
    {
        System.Text.RegularExpressions.Regex reg = new System.Text.RegularExpressions.Regex("[^0-9.-]");
        return reg.IsMatch(str);

    } 
```

有人请帮助我。该文本框如何接受正负十进制数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:24:58.997

我认为最好的选择是绑定到双精度，因为这会在输入错误时突出显示文本框，这很方便给用户反馈他们输入的内容。

或者您可以使用 double.TryParse 检查数字是否有效

```
private static bool IsTextNumeric(string str)
{
    double value;
    return double.TryParse(str, out value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:21:15.730

您只希望负号作为第一个可选字符。所以：

```
"-?[\.0-9]+" 
```

如果您真的想为此使用 RegEx。但也许像[Double.TryParse()](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)这样的东西会更好？

# ios - 如何判断应用用户是升级还是新购买者？

> ID：15129619
> 
> 赞同：1
> 
> 时间：2013-02-28T07:11:54.163
> 
> 标签：ios, in-app-purchase

我想通过应用内购买将我的应用从付费切换为免费，但我不想让我当前的用户支付两次费用。有没有办法知道用户是升级还是新用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:26:18.920

您无法判断用户是应用程序的新用户还是以前的所有者。假设该应用程序的前任所有者购买了一台新设备并安装了最新 (IAP) 版本；没有什么可以让您知道用户是新用户还是现有用户。

如果您想维护两个单独的 App ID，您可以发布您的应用程序的两个版本：一个没有 IAP 但要花钱（对于您现有的客户），另一个是免费的并且有 IAP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:15:50.113

*更新*
如果您的 IAP 产品类型**为非消耗品**，用户将无法再次购买。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:30:46.263

您可以做的是升级您的付费版本，允许用户在新的“免费”应用程序中生成他们可以使用的特殊代码（一次！一些服务器连接将有助于注册这些代码）以升级到完整版。

# php - Magento 控制器显示表中的所有行

> ID：15129626
> 
> 赞同：0
> 
> 时间：2013-02-28T07:12:43.210
> 
> 标签：php, magento, magento-1.7, magento-1.4, magento-1.6

由于我需要以 JSON 格式对产品进行评分，因此我在模型文件夹中制作了一个带有控制器和 rating.php 文件的模块。我们运行控制器，它显示该表中的所有数据，但我只需要一行。所以通过 url 我传递了一个参数，但它不会工作。我在这里附上我的 indexcontroller.php。建议我。

```
<?php 
class Modulename_CustomRating_IndexController extends Mage_Core_Controller_Front_Action
{

  public function indexAction ()
   { 

$arrParams = $this->getRequest()->getParams();

  var_dump($arrParams);

$collection = Mage::getModel('Modulename_CustomRating_Model_CustomRating')->getCollection();
}
print_r (json_encode($collection ->getData()));

 }

}

?> 
```

当我将 url 传递为：localhost/magento/customrating?vote_id=1 时，它会将参数传递给它，但会返回整个表的数据。我知道这是由于 getData(); 但是如何获得所需的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:10:59.707

你必须使用`setEntityPkFilter`方法。检查`Mage_Rating_Model_Resource_Rating_Option_Vote_Collection`类以获取其他方法。

```
$product_id = $this->getRequest()->getParam('product_id'); // or 'vote_id'

$collection = Mage::getModel('Modulename_CustomRating_Model_CustomRating')
              ->getResourceCollection()
              ->setEntityPkFilter($product_id); 
```

* * *

如果你只想要 1 列，你可以尝试一些 Zend 的东西，因为你不能使用`addAttributeToSelect`. `getSelect()`返回 Zend 之类的查询：

```
$adapter = $this->getConnection(); // $this->getConnection();

$collection->getSelect()
           ->reset(Zend_Db_Select::COLUMNS) // remove all columns
           ->columns('attribute_name'); // add only needed one

$result = $adapter->fetchAll($select); 
```

不确定这是否可行。它没有经过测试，只是一个想法。

# visual-studio-2012 - 如何从 w 8 Visual Studio 2012 中的 vista 分区添加到 sql 2008 mdf 文件的连接

> ID：15129630
> 
> 赞同：0
> 
> 时间：2013-02-28T07:12:49.933
> 
> 标签：visual-studio-2012, sql-server-2008-express

vista 分区中的原始应用程序正在使用连接字符串，例如

```
Data Source=.\SQLEXPRESS;
AttachDbFilename=c:\MDF\StringTmp.mdf;Integrated Security=True;
Connect Timeout=30;User Instance=True 
```

我已将该应用程序的项目迁移到 Visual Studio 2012 Pro 仍然以 .net 3.5 为目标

但我无法使用“myw8pcName\username”登录

我还尝试在带有 Windows 身份验证的 Visual Studio 中使用添加连接向导。那失败了。

我还尝试了在 vista 中为 mdf 文件使用的 sql server 应用程序 ID 和密码，在“使用 sql server 身份验证”的添加连接向导中也失败了

我什么时候可以做？

# php - 调用另一个类中的一个类

> ID：15129631
> 
> 赞同：0
> 
> 时间：2013-02-28T07:12:52.037
> 
> 标签：php

嗨，我在另一个类中调用一个类时遇到一些问题，下面的代码 1 可以显示结果，但是在 2 中使用相同的代码添加到另一个类，我不知道为什么它不起作用。
谢谢。

1

```
require 'database.php';
$database = new Database();

$database->query('SELECT user_id, user_email FROM tb WHERE user_id = :user_id');
$database->bind(':user_id', '1');
$rows = $database->resultset(); // fetchall

echo "<pre>";
print_r($rows);
echo "</pre>"; 
```

2

```
require 'database.php';
$database = new Database();

class test{
    public function testf(){
        print"log";
        $database->query('SELECT user_id, user_email FROM tb WHERE user_id = :user_id');
        $database->bind(':user_id', '1');
        $rows = $database->resultset(); // fetchall

        echo "<pre>";
        print_r($rows);
        echo "</pre>";
        print"log";
    }
}
$foo = new test();
$foo -> testf(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:14:45.263

请注意，`$database`仅在全局范围内可用 - 在`test`. 将其更改为：

```
require 'database.php';
$database = new Database();

class test{
    public function testf($database){
        print"log";
        $database->query('SELECT user_id, user_email FROM tb WHERE user_id = :user_id');
        $database->bind(':user_id', '1');
        $rows = $database->resultset(); // fetchall

        echo "<pre>";
        print_r($rows);
        echo "</pre>";
        print"log";
    }
}

$foo = new test();
$foo -> testf($database); 
```

* * *

另一种选择是将 $database 作为类变量（听起来更好）。然后这样做：

```
class test {

    protected $database; 

    public function __construct() {
        $this->database = new Database();
    }

    public function testf(){
        print"log";
        $this->database->query('SELECT user_id, user_email FROM tb WHERE user_id = :user_id');
        $this->database->bind(':user_id', '1');
        $rows = $this->database->resultset(); // fetchall

        echo "<pre>";
        print_r($rows);
        echo "</pre>";
        print"log";
    }   

}

$foo = new test();
$foo -> testf(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:17:19.063

试试这个：

```
 require 'database.php';

    class test{
var $database;
public function test(){
$database = new Database();
}
        public function testf(){
            print"log";
            $this->database->query('SELECT user_id, user_email FROM tb WHERE user_id = :user_id');
            $this->database->bind(':user_id', '1');
            $rows = $database->resultset(); // fetchall

            echo "<pre>";
            print_r($rows);
            echo "</pre>";
            print"log";
        }
    }
    $foo = new test();
    $foo -> testf(); 
```

# c++ - c ++：将指针传递给向量时函数不明确

> ID：15129633
> 
> 赞同：3
> 
> 时间：2013-02-28T07:13:03.343
> 
> 标签：c++, stdvector

在我的程序中，我有一个可以处理两个向量的函数（实际上，程序必须将两个具有大量数字的数字相加，但我认为这与此无关）。这是代码

```
#include <iostream>
#include <vector>

using namespace std;

void plus (vector <int> *n1, vector <int> *n2)
{
    // my code here
}

int main()
{
    unsigned int i;
    vector <int> n1, n2;
    for (i = 1; i < 5; ++i)
    {
        n1.push_back (i);
    }
    for (i = 9; i > 5; --i)
    {
        n2.push_back (i);
    }
    plus (&n1, &n2);
    return 0;
} 
```

当我尝试编译它时，它说“对'加号'的引用是模棱两可的”。问题是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:19:08.893

虽然这里给出的所有答案在技术上都是正确的，但我认为只有一个可持续的解决方案：

删除`using namespace std;`. 不幸的是，很多教程和书籍都教授了它，但它带来了很多问题，其中一个你刚刚目睹过。要更好地了解`using`命名空间，请阅读 Herb Sutter 关于此问题的文章：[http ://www.gotw.ca/publications/migrating_to_namespaces.htm](http://www.gotw.ca/publications/migrating_to_namespaces.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:15:31.770

有一个功能`std::plus`使编译器感到困惑。

重命名您的函数或说`::plus`调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:16:30.340

[http://www.cplusplus.com/reference/functional/plus/](http://www.cplusplus.com/reference/functional/plus/)

`plus`是标准 C++ 库中的一个函数。

避免它`::plus`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:17:51.517

当一个函数是“模糊的”时，它意味着已经存在一个同名和结构的函数。因此，正如其他人提到的， std::plus 与您的定义冲突，编译器不知道使用哪个。

重命名方法，或调用`::plus`.

# java - 在java中执行多选语句

> ID：15129635
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:13:03.797
> 
> 标签：java, jdbc

我必须确认我们可以一次执行多个 select 语句并获得多个结果集。请给我一些想法。

我必须在一个语句中执行两个选择查询：-

```
String sql="select * form test;  
select * from test where empid=1;" 
```

我期待像这样运行：-

```
statement.execute(sql); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:08:44.597

在我看来，JDBC 不允许一次执行多个语句。JDBC 规范和 API 文档中使用的语言表明预期是一次`Statement`执行是一条语句，而不是多条语句（例如，它使用*“一条 SQL 语句”*，在阅读 SQL 规范时意味着单个 SELECT、INSERT 等） . 然而，它从未明确声明它是不允许的。

一些驱动程序确实支持在一次执行中执行多个语句，但这通常必须使用连接属性显式启用。此外，一些数据库支持在不显式定义存储过程的情况下执行存储过程代码块（在这种情况下，该块被视为语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:18:24.953

我不*相信*标准 JDBC 支持这一点。当然，该[`ResultSet`](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)界面面向“多行，一次一行” - 但不是“多组结果”。

但是，这并不意味着它对您的特定数据库不可行 - 您的数据库可能有一个驱动程序扩展了 JDBC 以允许它。如果您指定您正在使用的数据库和驱动程序，我们可以更轻松地进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:19:29.990

使用这些选择语句集创建一个存储过程并使用[Statement.getMoreResults()](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getMoreResults%28%29)检查您是否有更多 ResultSet 并使用 [Statement.getResultSet()](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getResultSet%28%29)获取下一个 ResultSet

[这里](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/tjvjdmlt.htm)给出一个例子

# java - 解析 JSONObject 和 JSONArray 并在列表视图中修复它们

> ID：15129638
> 
> 赞同：0
> 
> 时间：2013-02-28T07:13:12.173
> 
> 标签：java, android, json, android-listview, arrays

如何解析`JSONArray`里面`JSONObject`？这是`JSON`我从服务器得到的响应。

```
{
"searchdata": {
    "titles": [
        "<b>Laptop</b> - Wikipedia, the free encyclopedia",
        "<b>laptop</b> - definition of <b>laptop</b> by the Free Online Dictionary ..."
    ],
    "desc": [
        "A <b>laptop</b> computer is a personal computer for mobile use. A <b>laptop</b> has most of the same components as a desktop computer, including a display, a keyboard, a ...",
        "lap·top (l p t p) n. A portable computer small enough to use on one&apos;s lap. <b>laptop</b> [ˈlæpˌtɒp], <b>laptop</b> computer. n (Electronics &amp; Computer Science / Computer ..."
    ],
    "links": [
        "http://en.wikipedia.org/wiki/Laptop",
        "http://www.thefreedictionary.com/laptop"
    ],
    "nextpage": ""
}
} 
```

我可以得到`JSONObject`但是如何一个一个地得到 JSONArray，这样我就可以在`listview`.

我想在单行中显示每个数组的值，`listview`依此类推....

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:23:21.943

好简单..

你需要修复这样的代码：

```
//jsonString is your whole JSONString which you have shown above

JSONObject jObj = new JSONObject(jsonString);
JSONObject jSearchData = jObj.getJSONObject("searchdata");
JSONArray jTitles = jSearchData.getJSONArray("titles");
JSONArray jDesc= jSearchData.getJSONArray("desc");
JSONArray jLinks= jSearchData.getJSONArray("links");
String nextPage = jSearchData.getString("nextpage");
//and so on and so forth 
```

获取数组项并将其显示到列表视图中：

```
//you can iterate over each item and add it to an ArrayList like this:

//i am showing you a single one,follow the same process for other arrays:

ArrayList titlesArray = new ArrayList();

for (int i = 0; i < jTitles.length(); i++) {
String item = jTitles.getString(i);
titlesArray.add(item);

} 
```

接下来，您将这个数组列表作为列表视图的源，如下所示：

```
 // Get a handle to the list view
    ListView lv = (ListView) findViewById(R.id.ListView01);
 lv.setAdapter(new ArrayAdapter<string>((Your activity class).this,
            android.R.layout.simple_list_item_1, titlesArray)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:23:51.387

考虑到您的顶级 JSON 将被解析为，并且随后您可以通过方法和`JSONObject`请求从它接收任何子级别对象和/或数组。您感兴趣的数组在 JSON 层次结构中有两个层次，因此您需要这样的东西：`getJSONObject(name)``getJSONArray(name)`

```
String json = ...;
JSONObject rootObj = new JSONObject(json);
JSONObject searchObj = rootObj.getJSONObject("searchdata");
JSONArray titlesObj = searchObj.getJSONArray("titles");
JSONArray descsObj = searchObj.getJSONArray("desc");
JSONArray linksObj = searchObj.getJSONArray("links"); 
```

您可以像这样迭代任何数组（`titles`用作示例）：

```
for(int i = 0; i < titlesObj.length(); i++) {
    String title = titlesObj.getString(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:23:15.877

这会有所帮助：

```
JSONArray  titles = new jSONObject(jsonstring).getJSONObject("searchdata").getJSONArray("titles");

JSONArray  desc  = new jSONObject(jsonstring).getJSONObject("searchdata").getJSONArray("desc");

JSONArray  links = new jSONObject(jsonstring).getJSONObject("searchdata").getJSONArray("links"); 
```

# ios - AVAudioPlayer setVolume - 如何？

> ID：15129639
> 
> 赞同：2
> 
> 时间：2013-02-28T07:13:13.157
> 
> 标签：ios, objective-c, avaudioplayer

有谁知道在我的应用程序上静音游戏声音的最佳方法。

我目前正在使用 SystemSoundID，我知道它无法调整音量，需要移至 AVAudioPlayer。

理想情况下，我需要一个设置页面，可以在其中更改音量并保存音量级别，以便在回来或离开并重新打开应用程序时记住音量级别？

我已经使用 AVAudioPlayer 尝试了各种方法，但目前没有成功，并且我的应用程序收到了一些不好的评论，因为人们说他们讨厌他们无法控制游戏音量......帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T07:18:28.410

对于 AVAudioPlayer，您可以使用此代码静音

在 .h 文件中

```
@interface ViewController : UIViewController
{
    BOOL muted;
} 
```

并在 .m 文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    muted = NO;
}

- (IBAction)speakerOnOff:(id)sender
{

    if (muted) {
        muted = NO;
        [player setVolume:1.0];
    } else {
        muted = YES;
        [player setVolume:0.0];
    }
} 
```

这段代码来自[这个](https://stackoverflow.com/questions/13880443/how-to-mute-audio-in-avaudioplayer)很好的答案。

# .net - Openexisting 全局互斥体上的 UnauthorizedAccessException

> ID：15129643
> 
> 赞同：1
> 
> 时间：2013-02-28T07:13:22.753
> 
> 标签：.net, windows-7

我正在使用互斥锁来同步两个进程。互斥锁是由服务进程创建的。但是当客户端尝试访问该互斥体时，他会得到 Unauthorizedaccessexception。用户帐户具有创建全局对象权限 这发生在少数运行 Windows 7 的机器上，但在其他 Windows 7 机器上无法重现。可能是什么原因。感谢您的帮助

以下是创建全局互斥体 bool gCreated 的代码；Mutex syncMutex = new Mutex(true, "Global\SWDBOject", out gCreated); var allowEveryoneRule = new MutexAccessRule(new SecurityIdentifier (WellKnownSidType.WorldSid, null), MutexRights.FullControl, AccessControlType.Allow); var securitySettings = new MutexSecurity(); securitySettings.AddAccessRule(allowEveryoneRule); syncMutex.SetAccessControl(securitySettings);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:16:42.967

您需要为您的事件添加权限，否则即使它是全局的，其他应用程序也无法访问它。

```
Private Shared Function CreateEvent(name As String) As _ 
                                              System.Threading.EventWaitHandle
    Dim created As Boolean
    Dim users As New SecurityIdentifier(WellKnownSidType.WorldSid, Nothing)
    Dim rule As New EventWaitHandleAccessRule(users, _ 
                                              EventWaitHandleRights.FullControl, _ 
                                              AccessControlType.Allow)

    Dim security As New EventWaitHandleSecurity()
    security.AddAccessRule(rule)

    Try
        Dim theHandle As New System.Threading.EventWaitHandle(False, _ 
                            Threading.EventResetMode.AutoReset, name, _ 
                            created, security)

        If created Then
            Return theHandle
        Else

        End If
    Catch ex As UnauthorizedAccessException
        'there was another instance created in this very small window. 
        'therefore just attach to the existing.
    Catch ex As Exception
        'do something with this.
    End Try
    Return Nothing
End Function 
```

在您的用户代码中，您正在使用 `System.Threading.Mutex.OpenExisting`而不是尝试创建一个新的。

我能想到的唯一另一件事是您看到的全局对象，因为该名称相当通用，它不是您创建的对象？

当我创建 Mutex 和同名的 Event 时，我只是做了一些测试。

> System.Threading.WaitHandleCannotBeOpenedException = {"无法创建系统范围名称为 'Global\AE66918ED73040bbB59F2BE9405FDCA2-5501' 的 WaitHandle。不同类型的 WaitHandle 可能具有相同的名称。"}

我想这不是问题，也许你的服务正在悄悄地得到这个异常？

# javascript - 向其中添加项目后将数组重置为未定义

> ID：15129644
> 
> 赞同：1
> 
> 时间：2013-02-28T07:13:22.520
> 
> 标签：javascript, data-structures, recursion, tree

我正在尝试使用 JavaScript 构建层次结构（树结构）。为此，我编写了一个`Node`代表树中节点的类。当我从数据库中检索数据时，所有数据都被正确检索（即：根节点具有`ParentId`as null，它有 3 个子节点指向它作为父节点，并且后代节点也已正确设置...... ）。但是当我尝试将它们映射到我的 JavaScript 模型时，`Children`根节点的属性最终变为`undefined`. 我不知道这怎么可能，即使在运行时，当我`Children`在控制台中输出属性的内容时，我可以看到子节点被添加到其中。这是我的代码：

```
var Node = function (obj) {
    var self = this;
    var isDefined = obj != undefined;

    self.hasChildren = function () {
        return self.Children.length > 0;
    };

    self.hasParent = function () {
        var p = self.ParentId;
        return !(p == null || p == undefined || p == 0);
    };

    self.addChildren = function (objArray) {
        if (!$.isArray(self.Children)) {
            self.Children = [];
        }
        for (var i = 0; i < objArray.length; i++) {
            self.addChild(objArray[i]);
        }
    };

    self.addChild = function (obj) {
        if (obj instanceof Node) {
            self.Children.push(obj);
        } else {
            var n = new Node(obj);
            self.Children.push(n);
        }
    };

    self.removeChild = function (n) {
        var index = self.Children.indexOf(n);
        if (index > -1) {
            self.Children.splice(index, 1);
        }
    };

    self.Id = isDefined ? obj.Id : null;
    self.ParentId = isDefined ? obj.ParentId : null;
    self.Name = isDefined ? obj.Name : '';
    self.Children = isDefined ? self.addChildren(obj.Children) : [];
    self.TypeId = isDefined ? obj.TypeId : null;
}; 
```

我考虑该`addChildren`方法的方式是，我会将来自服务器的原始 JSON 对象传递给对象的构造函数`Node`，然后如果它有任何子对象（本质上与父对象具有相同的属性），`addChildren`将被调用这反过来`Node`将为每个元素创建一个新元素。最终，树将​​递归构建。

那么我哪里做错了？为什么`Children`财产最终是`undefined`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:37:47.767

```
self.Children = isDefined ? self.addChildren(obj.Children) : []; 
```

您正在设置 self.Children 等于`self.addChildren()`. 该功能没有回报。

这是我推荐的几件事

```
function Node(obj) {
    // clean constructor moving function definitions to prototype
    var self = this;

    // ensure that we at least have an object passed in
    obj = obj || {};

    // default values at the top
    self.Id = null;
    self.ParentId = null;
    self.Name = '';
    self.Children = [];
    self.TypeId = null;

    // fold in data with $.extend, no need to specify each key manually
    // third object is to overwrite any added Children as those need to be handled seperately
    $.extend(self, obj, { Children : [] });

    // if we have children, add them using the addChildren method
    if (typeof obj.Children !== undefined && $.isArray(obj.Children)) {
        self.addChildren(obj.Children);
    }
}

// using prototype to reduce memory footprint
Node.prototype.hasChildren = function () {
    return this.Children.length > 0;
};

Node.prototype.hasParent = function () {
    var p = this.ParentId;
    return !(p == null || p == undefined || p == 0);
};

Node.prototype.addChildren = function (objArray) {
    for (var i = 0; i < objArray.length; i++) {
        this.addChild(objArray[i]);
    }
};

Node.prototype.addChild = function (obj) {
    if (obj instanceof Node) {
        this.Children.push(obj);
    } else {
        var n = new Node(obj);
        this.Children.push(n);
    }
};

Node.prototype.removeChild = function (n) {
    var index = this.Children.indexOf(n);
    if (index > -1) {
        this.Children.splice(index, 1);
    }
}; 
```

然后我可以像这样使用它：

```
test = new Node({ Id : "Something", Children : [{ Id : "Interior", Children : [] }] }) 
```

使用原型可以减少内存占用，并且不会为您创建的每个内部函数创建函数引用`Node`。每个人仍然会通过一个变量`Node`引用它的内部数据。`this`

# android - 从谷歌测试帐户中删除应用内结算记录以再次测试

> ID：15129651
> 
> 赞同：5
> 
> 时间：2013-02-28T07:14:00.377
> 
> 标签：android, in-app-billing

我已经创建了用于测试应用内计费的 google play 测试帐户，但问题是当我购买该项目然后卸载应用程序然后在该设备上再次安装并测试应用内计费时，它会响应应用程序是已购买。那么如何从 Google Developer Console 上的测试帐户中删除旧的购买记录。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-10T08:08:55.080

由于您的产品是由 Google 管理的产品，因此您购买的商品已经连接到您的 Google 帐户。最好的解决方法是使用另一个 gmail 帐户或创建一个新的 gmail 以再次测试。

其次，最好在您的产品 ID 字段中使用静态响应（即**“android.test.purchased” ）来测试您的购买。**如果这里一切正常，请在开发人员控制台中以 Alpha/Beta 模式尝试。

# ios - 使用 CATransform3D 和 GPUImage 将矩形转换为四边形

> ID：15129654
> 
> 赞同：1
> 
> 时间：2013-02-28T07:14:17.270
> 
> 标签：ios, opengl-es, gpuimage, catransform3d, projection-matrix

我正在尝试将矩形转换为四边形并创建一个`CATransform3D`投影矩阵，如 hfossli [here](https://stackoverflow.com/questions/9470493/transforming-a-rectangle-image-into-a-quadrilateral-using-a-catransform3d)所述。
矩阵与 a`CALayer`一起使用没有问题，但我想/必须将它与`GPUImage`and一起使用`GPUImageTransformFilter`，它需要 a `CATransform3D`。

它真的不起作用。缩放不合适，这意味着我的转换图像被剪切或点没有“拉伸”到它们应该在的位置。有一些线程描述了从`OpenGL`投影到正确`CATransform3D`投影矩阵的转换，如[这里](https://stackoverflow.com/questions/6045502/how-to-get-catransform3d-from-projection-and-modelview-matrices)。
它涉及一些缩放和 y 翻转。

因此，我尝试以相反的顺序缩放和翻转，希望能够将此`CATransform3D`矩阵与 一起使用`GPUImageTransformFilter`，但无法真正使其工作。

也许有人解决了这个问题？

# mysql - SQL 查询：哪些组是给定成员而不是成员？

> ID：15129655
> 
> 赞同：1
> 
> 时间：2013-02-28T07:14:24.200
> 
> 标签：mysql, sql

我在 MySQL 中有三个表，

1.  组（键`group_id`：）
2.  成员（键`member_id`：）
3.  group_member_relations 键：`group_id, member_id`

最后一个表具有`members`和`groups`（已加入该组的成员）的组合。

我一直在努力寻找一种执行单个查询的方法，该查询为我提供了不在表中的成员和组的`group_member_relations`列表。（基本上我想最终问一个问题“哪些组是给定成员而不是成员”）。我可以在代码中以艰难的方式做到这一点，但想知道是否可以进行单个查询。

根本不是 SQL 专家，但在过去的 20 年中使用了很多，主要是基本的东西。这显然超出了我的想象。在过去的几天里做了很多尝试，但令人尴尬的是似乎没有接近。

来自那里的 sql 向导的任何指针..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:21:07.003

成员不在的组：

```
select *
from group
where id not in (
  select group_id 
  from group_member_relations
  where member_id = ?) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:16:39.753

以下查询将列出所有可用的组以及每个组中不存在的成员。该查询还将给出每个表的所有列。

```
SELECT  a.*, b.*
FROM    members a
        CROSS JOIN groups b
        LEFT JOIN group_member_table c
            ON a.memberID = c.memberID AND
                b.groupID = c.groupID
WHERE   c.memberID IS NULL OR     -- actually this condition is already enough
        c.groupID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b2d42/2)

# antlr - “跳过”改变解析器的行为

> ID：15129658
> 
> 赞同：4
> 
> 时间：2013-02-28T07:14:43.027
> 
> 标签：antlr, antlr4

添加`skip`到规则并没有达到我的预期。这是一对用逗号和空格分隔的标记的语法。我制作了一个带有逗号标记的版本`skip`，以及一个没有逗号的版本：

```
grammar Commas;

COMMA:          ', ';
COMMASKIP:      ', ' -> skip;
DATA:           ~[, \n]+;

withoutSkip:    data COMMA data '\n';
withSkip:       data COMMASKIP data '\n';
data:           DATA; 
```

`skip`在没有按预期工作的情况下测试规则：

```
$ echo 'a, b' | grun Commas withoutSkip -tree
(withoutSkip (data a) ,  (data b) \n) 
```

With`skip`给了我一个错误：

```
$ echo 'a, b' | grun Commas withSkip -tree
line 1:1 mismatched input ', ' expecting COMMASKIP
(withSkip (data a) ,  b \n) 
```

如果我注释掉`COMMA`and`withoutSkip`规则，我会得到：

```
$ echo 'a, b' | grun Commas withSkip -tree
line 1:3 missing ', ' at 'b'
(withSkip (data a) <missing ', '> (data b) \n) 
```

我正在尝试获取仅包含不带逗号的数据标记的输出，如下所示：

```
(withSkip (data a) (data b) \n) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T08:00:37.627

`skip`导致词法分析器丢弃令牌。因此，`skip`不能在解析器规则中使用 ped 词法分析器规则。

另一件事，如果两个或多个规则匹配相同的输入，则首先定义的规则将“赢得”语法后面定义的规则，无论解析器是否尝试匹配语法后面定义的规则，第一条规则将永远“获胜”。在您的情况下，`COMMASKIP`将永远不会创建规则，因为`COMMA`匹配相同的输入。

尝试这样的事情：

语法逗号；

```
COMMA : ',' -> skip;
SPACE : (' '|'\n') -> skip;
DATA  : ~[, \n]+;

data  : DATA+; 
```

## 编辑

> 那么如何在不将逗号包含在解析树中的情况下指定逗号的位置？您的代码将匹配 a, , b。

你没有，所以如果逗号很重要（即。`a,,b`）是无效的，它不能从词法分析器中跳过。

> 我认为在 antlr3 中你应该使用感叹号。

在 ANTLR 4 中，您无法从解析中创建 AST。在新版本中，所有终端/规则都在一个解析树中。您可以使用自定义访问者和/或侦听器迭代此树。可以在此问答中找到如何执行此操作的演示：[一旦语法完成，遍历 ANTLR v4 树的最佳方法是什么？](https://stackoverflow.com/questions/15050137/once-grammar-is-complete-whats-the-best-way-to-walk-an-antlr-v4-tree)

在您的情况下，语法如下所示：

```
grammar X;

COMMA : ',';
SPACE : (' '|'\n') -> skip;
DATA  : ~[, \n]+;

data  : DATA (COMMA DATA)*; 
```

然后像这样创建一个监听器：

```
public class MyListener extends XBaseListener {

    @Override
    public void enterData(XParser.DataContext ctx) {

        List dataList = ctx.DATA(); // not sure what type of list it returns...
        // do something with `dataList`
    }
} 
```

如您所见，`COMMA`没有删除，但在`enterData(...)`您内部只使用`DATA`令牌。

# php - 在 Codeigniter 中使用 html 表单打开视图

> ID：15129660
> 
> 赞同：0
> 
> 时间：2013-02-28T07:14:46.077
> 
> 标签：php, html, css, codeigniter

我对codeigniter相当陌生，或者你可以说是MVC框架的新手，我只想加载视图“登陆”，当用户点击HTML表单提交按钮时，目前当我使用时，我必须在动作中输入什么属性使其转到“着陆”视图。我有这样的东西

```
<form class="navbar-form pull-right" action="<?php $this->load->view('landing')" ?> style="margin-right:20px; margin-top:4px;"> 
```

它要么说找不到对象，要么你没有权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:17:31.537

您必须在将加载新表单的控制器方法上提交表单

```
<form action="<?php echo site_url('controllername/methodname');?>" method = "POST"> 
```

现在控制器方法

```
function methodname(){

      $this->load->view('landing');

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T07:28:50.303

你这样做是不对的。Raheel Shan解释的方式是正确的。您不能在表单操作属性中包含模板。

```
$this->load->view 
```

包含（加载）模板文件，它不提供模板的 url。把它想象成 php include 、 include_one 或 required 和 required_once 语句。

请阅读 codeigniter 文档，因为它非常简单。 [http://ellislab.com/codeigniter/user-guide/](http://ellislab.com/codeigniter/user-guide/)

谢谢

# c# - 无法解释的 OverflowException 将表示屏幕坐标的 IntPtr 转换为 Int32

> ID：15129664
> 
> 赞同：5
> 
> 时间：2013-02-28T07:14:59.227
> 
> 标签：c#, .net, winforms, winapi, wndproc

我们有一个 WinForms AnyCPU 应用程序，其中供应商库控件偶尔会在运行多个监视器的 64 位用户框上引发以下异常：

```
System.OverflowException: Arithmetic operation resulted in an overflow.
   at VendorLibraryName.VendorControl.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

我查看了供应商库控件的 WndProc 处理程序，唯一看起来可能会产生溢出的代码是这个（我的评论 - 这是反编译的）：

```
switch (msg)
{
    case 132: // NCHITTEST 
    case 672: // NCMOUSEHOVER 

    // Technically dangerous: convert IntPtr to Int32 in a 64-bit process.
    // However, note that for these message codes, 
    // LParam represents a "packed" x and y screen-coordinate. 
    // Given my understanding of how this packing occurs, I can't think
    // of how to construct an LParam such that it would overflow an Int32.
    SomeMethod(x: (int)m.LParam & 65535, y: (int)m.LParam >> 16);

    // More code... 
```

这是转换和位旋转的实际 IL：

```
IL_0092: ldarg.1
IL_0093: call instance native int [System.Windows.Forms]System.Windows.Forms.Message::get_LParam()

// As far as I can tell, this is the only instruction on which overflow could occur
IL_0098: call int32 [mscorlib]System.IntPtr::op_Explicit(native int)

IL_009d: ldc.i4 65535
IL_00a2: and
IL_00a3: ldarg.1

// Same thing here...
IL_00a4: call instance native int [System.Windows.Forms]System.Windows.Forms.Message::get_LParam()
IL_00a9: call int32 [mscorlib]System.IntPtr::op_Explicit(native int)

IL_00ae: ldc.i4.s 16
IL_00b0: shr 
```

显然，这个例程看起来很容易出现溢出问题，因为在 64 位进程中将 Message.LParam（一个 IntPtr）转换为 Int32。事实上，这个例程是*错误*的，因为它没有正确处理负坐标 - 它看起来像是 Windows GET_X_LPARAM 和 GET_Y_PARAM 宏到 C# 的不正确端口。

*但是*，我无法看到如何为 NCHITTEST / NCMOUSEHOVER 构建 LParam，这实际上会超出 Int32 的范围。（我*认为*低 16 位由带*符号*的16 位 X 坐标组成，其余位由符号扩展的 16 位 Y 坐标组成。如果我错了，请纠正我，因为这可能是一个严重的误解）。

我无法在具有许多不同监视器配置和窗口位置的开发盒上重现异常。

**什么屏幕坐标实际上会导致溢出？或者有没有其他方式这个块可能导致溢出？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:16:12.913

我认为您的问题的关键在于“多显​​示器”。[多个监视器可能导致负坐标](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616%28v=vs.85%29.aspx)

来自 MSDN：

> 重要 不要使用 LOWORD 或 HIWORD 宏来提取光标位置的 x 和 y 坐标，因为这些宏在具有多个监视器的系统上返回不正确的结果。具有多个监视器的系统可以具有负的 x 和 y 坐标，并且 LOWORD 和 HIWORD 将坐标视为无符号量。

由于在 CLR 上，有符号数使用[2 补码表示法表示](http://en.wikipedia.org/wiki/Two%27s_complement)，负数表示为“大”无符号数（最高有效位为 '1' 的数）；例如，-1 是 1111....1。因此，转换为（有符号的）32 位整数时会发生溢出。

编辑：（免责声明：我没有多个显示器，所以有些猜测适用）简而言之：我的猜测是你必须生成一个负 y 坐标。

假设坐标为 (x: -1, y: -1)

作为短数字：x：0xFFFF，y：0xFFFF

打包成 32 位数字：0xFFFF FFFF

现在，这就是涉及猜测的地方：IntPtr 没有符号扩展（你可以用调试器试试吗？你需要一个 neg y 坐标）。因此它变成：

```
0x0000 0000 FFFF FFFF 
```

或者 4294967295 这是一个太大而无法将其转换为 Int32 的数字。

通常，任何负 Y 坐标都将采用以下形式

```
000.(32 Zeros)..001 ...(other 31 digits) .. 0 
```

并且应该提出问题（您是否尝试过将显示器堆叠在一起？）

# c# - 如何获取 GridView 的 DataSource 中的记录数

> ID：15129665
> 
> 赞同：4
> 
> 时间：2013-02-28T07:15:00.583
> 
> 标签：c#, asp.net, .net

我有一个`grid view`已经与模型绑定的模型，现在我想获取其中的行数`GridView's Datatable`？不在页数上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T07:18:15.900

您可以将数据源转换为集合，然后按如下方式计算

```
var count = ((ICollection<T>)GridView.DataSource).Count; 
```

或者，如果您有数据表作为源，那么

```
DataTable dt = gridView.DataSource as DataTable; 
 int count = dt.Rows.Count; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:18:57.710

您可以将 GridView 的 DataSource 转换为 DataTable 或 DataView，然后计算行数。

```
DataTable dt = (DataTable) gridView.DataSource; 
int count = dt.Rows.Count; 
```

但这仅在绑定时可用，而不是在回发时可用。

要在回发时获取行数，您可以在将`DataTable`其绑定到 GridView 之前将其或其行数存储在会话中。

```
DataTable dt = GetDataSourceTable();
Session["RowsCount"] = dt.Rows.Count;
Session["DataTable"] = dt; //Should be avoided since session are per user. 
gridView.DataSource = dt;
gridView.DataBind(); 
```

稍后您可以`Count`从会话中访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T07:18:35.010

您是否尝试过类似以下的方法？

```
yourDataTable.Rows.Count(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T18:34:05.670

你可以试试这个：

```
textBox1.Text = gridView1.RowCount.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T16:20:05.807

您可以使用以下代码：

```
DataView MyDV = (DataView)SqldatasourceName.Select(DataSourceSelectArguments.Empty);
MyDV.RowFilter = SqldatasourceName.FilterExpression;
int RecordCount = MyDV.Count; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-27T19:43:54.053

我做了以下。

使用以下内容在 Gridview Databound 上创建了一个事件。每次绑定 gridview 时，都会使用 Record 计数更新标签。

```
protected void GridView1_DataBound(object sender, EventArgs e)
    {
        RecordCountLbl.Text = "Record Count: "+ GridView1.Rows.Count.ToString();
    } 
```

# java - 从 build.xml 调用时 linux 中的 jaxb schemagen 问题。找不到源文件？

> ID：15129666
> 
> 赞同：1
> 
> 时间：2013-02-28T07:15:00.810
> 
> 标签：java, ant, jaxb, schemagen

以下是详细信息：这在 Windows 上运行良好，但在 Linux 上无法运行，我需要它才能在 Linux 机器上运行。

schemagen -version 在 Windows 和 Linux 上给出相同的结果。

> schemagen 版本“JDK 6 中的 JAXB 2.1.10”用于 XML 绑定 (JAXB) 参考实现的 JavaTM 架构，（在 JDK 6 中构建 JAXB 2.1.10）

这是有问题的蚂蚁代码：
`<target name="genSchema" description="Generate Schema from Java source files">
<exec executable="schemagen">
<arg line="-d ../target/schema ../path/to/source/*.java" />
</exec>
</target>`

首先，这一切在 Windows 中都可以正常工作。在 Linux 中，如果我从命令行运行以下命令，生成模式没有问题：

> schemagen -d ../target/schema ../path/to/source/*.java
> 
> 注意：写../target/schema/schema1.xsd

但是，如果我在 Linux 中从上面的 build.xml 运行 ant 目标，则会收到以下错误：

> [exec] 错误：无法读取：../path/to/source/*.java [exec] 1 错误 [exec] 结果：1

在 Windows 中，完全相同的 ant 目标可以正常工作。请帮忙！把我的头发拉出来。如果您需要更多详细信息，请告诉我。

对于它的价值，我还尝试使用绝对路径而不是备份目录来访问我的 ant 任务中的源文件......尝试使用 ant 执行此操作时仍然遇到相同的错误。

> `Ex. <arg line="-d ../target/schema /home/path/to/source/*.java" />
> [exec] error: cannot read: /home/path/to/source/*.java`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:48:20.473

试试这个：

```
<exec executable="bash">
    <arg line='-c "schemagen -d ../target/schema ../path/to/source/*.java"' />
</exec> 
```

正如我们上面讨论的，问题似乎是在某些 Unix 系统上， exec 任务没有扩展通配符。因此，这是尝试将命令传递给将为您进行扩展的 shell。

是的，我意识到这个解决方案使 build.xml 文件特定于 unix。如果这行得通，有办法解决这个问题。

# haskell - 比 Reactive 更简单的替代库？（哈斯克尔）

> ID：15129677
> 
> 赞同：8
> 
> 时间：2013-02-28T07:15:58.167
> 
> 标签：haskell, architecture, frp

我正在学习 Haskell，并尝试编写一些事件驱动的程序。

以下代码来自教程：[http ://www.haskell.org/haskellwiki/OpenGLTutorial2](http://www.haskell.org/haskellwiki/OpenGLTutorial2)

```
main = do
  (progname,_) <- getArgsAndInitialize
  initialDisplayMode $= [DoubleBuffered]
  createWindow "Hello World"
  reshapeCallback $= Just reshape
  angle <- newIORef (0.0::GLfloat)          -- 1
  delta <- newIORef (0.1::GLfloat)          -- 2
  position <- newIORef (0.0::GLfloat, 0.0)  -- 3
  keyboardMouseCallback $= Just (keyboardMouse delta position)
  idleCallback $= Just (idle angle delta)
  displayCallback $= (display angle position)
  mainLoop 
```

状态存储在`IORef`s 中，这使它看起来就像命令式语言。

我听说除此之外还有其他 API `Graphics.UI.GLUT`（例如`Reactive`），但它看起来非常复杂。

我的方法是 lib 提供一个函数`runEventHandler`，用户编写一个`handler`接受`Event`s 列表并将它们转换为`IO ()`.

```
handler :: [Event] -> IO ()
runEventHandler :: ( [Event] -> IO () ) -> IO () 
```

该`main`函数应如下所示：

```
main = runEventHandler handler 
```

有这样的库吗？

我目前正在使用多线程实现一个，但我担心它的性能可能很差......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-30T03:02:13.747

[reactive-banana是一个成熟的库，与](http://hackage.haskell.org/package/reactive-banana)[reactive](http://hackage.haskell.org/package/reactive)非常相似。我们不会尝试重新发明一个 frp 库；相反，我们将探索如何将响应式香蕉集成到我们自己的项目中。

### 大图

为了在 OpenGL 中使用像响应式香蕉这样的函数式响应式编程库，我们将工作分为 4 部分，其中 2 部分已经存在。我们将使用现有的 GLUT 库与 OpenGL 进行交互，并使用现有的响应式香蕉库来实现函数式响应式编程。我们将提供我们自己的 2 个部分。我们将提供的第一部分是将 GLUT 连接到响应式香蕉的框架。我们将提供的第二部分是根据 frp 实现（reactive-banana）和框架和 GLUT 类型编写的程序。

我们提供的两个部分都将根据 reactive-banana frp 库编写。图书馆有两个大想法，`Event t a`和`Behavior t a`. `Event t a`表示携带`a`在不同时间点发生的类型数据的事件。表示在所有时间点定义`Behavior t a`的类型的时变值. 类型系统要求我们保留但忽略`a`的类型参数。`t`

大多数接口`Event`都`Behavior`隐藏在它们的实例中。`Event`是一个`Functor`- 我们可以`fmap`或`<$>`任何值的函数`Event`。

```
fmap :: (a -> b) -> Event t a -> Event t b 
```

`Behavior`既是`Applicative`又是`Functor`。我们可以对 a 的所有值`fmap`或`<$>`一个函数`Behavior`，可以用 提供新的不变的值`pure`，并用 计算新`Behavior`的 s `<*>`。

```
fmap :: (a -> b) -> Behavior t a -> Behavior t b
pure :: a -> Behavior t a
<*> :: Behavior t (a -> b) -> Behavior t a -> Behavior t b 
```

[reactive-banana 还提供](http://hackage.haskell.org/package/reactive-banana-0.8.0.2/docs/Reactive-Banana-Combinators.html)了一些其他功能，这些功能提供了无法用基本类型类表示的功能。这些引入了有状态，将`Event`s 组合在一起，并在`Event`s 和`Behavior`s 之间进行转换。

状态被引入，`accumE`它接受一个初始值和一个`Event`从先前值到新值的变化，并产生一个`Event`新值。而是`accumB`产生一个`Behavior`

```
accumE :: a -> Event t (a -> a) -> Event t a
accumB :: a -> Event t (a -> a) -> Behavior t a 
```

`union`将两个事件流组合在一起

```
union :: Event t a -> Event t a -> Event t a 
```

`stepper`如果我们提供一个初始值，以便在所有时间点都定义它，则可以将 an 转换`Event`为`Behavior`持有最新值。`apply`或者，如果我们提供`<@>`一系列轮询.`Behavior``Event``Events``Behavior`

```
stepper :: a -> Event t a -> Behavior t a
<@> :: Behavior t (a -> b) -> Event t a -> Event t b 
```

[Reactive.Banana.Combinators](http://hackage.haskell.org/package/reactive-banana-0.8.0.2/docs/Reactive-Banana-Combinators.html)`Event`中的and`Behavior`和 19 个函数的实例构成了函数式响应式编程的整个接口。

总的来说，我们将需要 GLUT 库和我们正在实现的 OpenGL 示例所使用的库、reactive-banana 库、用于制作框架的 reactive-banana 导出和 RankNTypes 扩展、一些用于线程间通信的机制以及读取能力系统时钟。

```
{-# LANGUAGE RankNTypes #-}

import Graphics.UI.GLUT
import Control.Monad

import Reactive.Banana
import Reactive.Banana.Frameworks

import Data.IORef
import Control.Concurrent.MVar

import Data.Time 
```

### 框架接口

我们的框架会将`IO`事件从 GLUT 映射到 reactive-banana`Event`和`Behavior`s。该示例使用了四个 GLUT 事件 - `reshapeCallback`、`keyboardMouseCallback`、`idleCallback`和`displayCallback`。我们将这些映射到`Event`s 和`Behavior`s。

`reshapeCallback`当用户调整窗口大小时运行。作为回调，它需要 type 的东西`type ReshapeCallback = Size -> IO ()`。我们将其表示为`Event t Size`.

`keyboardMouseCallback`当用户提供键盘输入、移动鼠标​​或单击鼠标按钮时运行。作为回调，它需要 type 的东西`type KeyboardMouseCallback = Key -> KeyState -> Modifiers -> Position -> IO ()`。我们将其表示为 type 的输入`Event t KeyboardMouse`，其中`KeyboardMouse`将传递给回调的所有参数捆绑在一起。

```
data KeyboardMouse = KeyboardMouse {
    key :: Key,
    keyState :: KeyState,
    modifiers :: Modifiers,
    pos :: Position
} 
```

`idleCallback`时间流逝时运行。我们将把它表示为一种跟踪已经过去的时间量的行为，`Behavior t DiffTime`。因为它是 a`Behavior`而不是 a `Event`，所以我们的程序将无法直接观察到时间的流逝。如果这不是我们所希望的，我们可以使用 an`Event`来代替。

将所有输入捆绑在一起，我们得到

```
data Inputs t = Inputs {
    keyboardMouse :: Event t KeyboardMouse,    
    time :: Behavior t DiffTime,
    reshape :: Event t Size
} 
```

`displayCallback`与其他回调不同；它不是用于程序的输入，而是用于输出需要显示的内容。由于 GLUT 可以随时运行它以尝试在屏幕上显示某些内容，因此在所有时间点定义它是有意义的。我们将用 表示这个输出`Behavior t DisplayCallback`。

我们还需要一个输出 - 为了响应事件，示例程序偶尔会产生其他 IO 操作。我们将允许程序引发事件以使用`Event t (IO ())`.

将两个输出捆绑在一起，我们得到

```
data Outputs t = Outputs {
    display :: Behavior t DisplayCallback,
    whenIdle :: Event t (IO ())
} 
```

我们的框架将通过传递一个类型为 的程序来调用`forall t. Inputs t -> Outputs t`。我们将在接下来的两节中定义`program`和。`reactiveGLUT`

```
main :: IO ()
main = do
  (progname,_) <- getArgsAndInitialize
  initialDisplayMode $= [DoubleBuffered]
  createWindow "Hello World"
  reactiveGLUT program 
```

### 该程序

该程序将使用 reactive-banana 将 映射`Inputs`到`Outputs`. 为了开始移植教程代码，我们将从中删除`IORef`s`cubes`并重命名`reshape`为，`onReshape`因为它与我们框架接口中的名称冲突。

```
cubes :: GLfloat -> (GLfloat, GLfloat) -> DisplayCallback
cubes a (x',y') = do 
  clear [ColorBuffer]
  loadIdentity
  translate $ Vector3 x' y' 0
  preservingMatrix $ do
    rotate a $ Vector3 0 0 1
    scale 0.7 0.7 (0.7::GLfloat)
    forM_ (points 7) $ \(x,y,z) -> preservingMatrix $ do
      color $ Color3 ((x+1)/2) ((y+1)/2) ((z+1)/2)
      translate $ Vector3 x y z
      cube 0.1
  swapBuffers

onReshape :: ReshapeCallback
onReshape size = do 
  viewport $= (Position 0 0, size) 
```

`keyboardMouse`将被`positionChange`和完全取代`angleSpeedChange`。这些将`KeyboardMouse`事件转换为对立方体旋转的位置或速度进行的更改。当事件不需要更改时，它们会返回`Nothing`.

```
positionChange :: Fractional a => KeyboardMouse -> Maybe ((a, a) -> (a, a))
positionChange (KeyboardMouse (SpecialKey k) Down _ _) = case k of
  KeyLeft  -> Just $ \(x,y) -> (x-0.1,y)
  KeyRight -> Just $ \(x,y) -> (x+0.1,y)
  KeyUp    -> Just $ \(x,y) -> (x,y+0.1)
  KeyDown  -> Just $ \(x,y) -> (x,y-0.1)
  _        -> Nothing
positionChange _ = Nothing

angleSpeedChange :: Num a => KeyboardMouse -> Maybe (a -> a)
angleSpeedChange (KeyboardMouse (Char c) Down _ _) = case c of
  ' ' -> Just negate
  '+' -> Just (+1)
  '-' -> Just (subtract 1)
  _   -> Nothing
angleSpeedChange _ = Nothing 
```

计算位置相当容易，我们累积键盘输入的变化。`filterJust :: Event t (Maybe a) -> Event t a`抛出我们不感兴趣的事件。

```
positionB :: Fractional a => Inputs t -> Behavior t (a, a)
positionB = accumB (0.0, 0.0) . filterJust . fmap positionChange . keyboardMouse 
```

我们将稍微不同地计算旋转立方体的角度。我们将记住速度变化时的时间和角度，将计算角度差的函数应用于时间差，并将其添加到初始角度。

```
angleCalculation :: (Num a, Num b) => a -> b -> (a -> b) -> a -> b
angleCalculation a0 b0 f a1 = f (a1 - a0) + b0 
```

计算`angle`起来有点困难。首先我们计算一个事件 ，它`angleF :: Event t (DiffTime -> GLfloat)`持有一个从时间差到角度差的函数。我们将我们提升并应用`angleCalculation`到当前的`time`and`angle`中，并在每次事件发生时对其进行轮询`angleF`。我们将轮询函数转换为`Behavior`with`stepper`并将其应用于 current `time`。

```
angleB :: Fractional a => Inputs t -> Behavior t a
angleB inputs = angle
    where
        initialSpeed = 2
        angleSpeed = accumE initialSpeed . filterJust . fmap angleSpeedChange . keyboardMouse $ inputs
        scaleSpeed x y = 10 * x * realToFrac y
        angleF = scaleSpeed <$> angleSpeed
        angleSteps = (angleCalculation <$> time inputs <*> angle) <@> angleF
        angle = stepper (scaleSpeed initialSpeed) angleSteps <*> time inputs 
```

整个`program`映射`Inputs`到`Outputs`. 它表示要提升什么的行为`display`并将`cubes`其应用于角度和位置。其他副作用是`Event`每次事件发生时。`IO``onReshape``reshape`

```
program :: Inputs t -> Outputs t
program inputs = outputs
    where
        outputs = Outputs {
            display = cubes <$> angleB inputs <*> positionB inputs,
            whenIdle = onReshape <$> reshape inputs
        } 
```

### 框架

我们的框架接受具有该类型的程序`forall t. Inputs t -> Outputs t`并运行它。为了实现该框架，我们使用`Reactive.Banana.Frameworks`. 这些函数允许我们从 s 中引发`Event`s`IO`并运行`IO`响应`Event`s 的操作。当s 出现时，我们可以使用函数 from 生成`Behavior`s`Event`和 poll s 。`Behavior``Event``Reactive.Banana.Combinators`

```
reactiveGLUT :: (forall t. Inputs t -> Outputs t) -> IO ()
reactiveGLUT program = do
    -- Initial values    
    initialTime <- getCurrentTime
    -- Events
    (addKeyboardMouse, raiseKeyboardMouse) <- newAddHandler
    (addTime, raiseTime) <- newAddHandler
    (addReshape, raiseReshape) <- newAddHandler
    (addDisplay, raiseDisplay) <- newAddHandler 
```

`newAddHandler`创建一个用于讨论 的句柄`Event t a`，以及一个引发类型事件的函数`a -> IO ()`。我们为键盘和鼠标输入、空闲时间的流逝和窗口形状的变化制作了明显的事件。我们还创建了一个事件，`display` `Behavior`当我们需要在`displayCallback`.

我们有一个棘手的问题需要克服 - OpenGL 要求所有 UI 交互都发生在一个特定的线程中，但是我们不确定我们绑定到响应式香蕉事件的动作会发生在哪个线程中。我们将使用几个变量跨线程共享以确保`Output` `IO`在 OpenGL 线程中运行。对于`display`输出，我们将使用 an`MVar`来存储轮询`display`操作。对于`IO`排队的操作，`whenIdle`我们会将它们累积在一个`IORef`,

```
 -- output variables and how to write to them
    displayVar <- newEmptyMVar
    whenIdleRef <- newIORef (return ())
    let
        setDisplay = putMVar displayVar
        runDisplay = takeMVar displayVar >>= id
        addWhenIdle y = atomicModifyIORef' whenIdleRef (\x -> (x >> y, ()))
        runWhenIdle = atomicModifyIORef' whenIdleRef (\x -> (return (), x)) >>= id 
```

我们的整个网络由以下部分组成。首先，我们为每个 the和 an创建`Event`s (using `fromAddHandler`) 或`Behavior`s (using )来轮询 output 。我们执行少量处理以简化时钟。我们将 应用到我们准备获取程序的. 使用，我们在显示事件发生时轮询。最后，告诉 reactive-banana 运行或无论何时发生相应的事件。一旦我们描述了我们和它的网络。`fromChanges``Inputs``Event``display``program``inputs``Outputs``<@``display``reactimate``setDisplay``addWhenIdle``Event``compile``actuate`

```
 -- Reactive network for GLUT programs
    let networkDescription  :: forall t. Frameworks t => Moment t ()
        networkDescription  = do
            keyboardMouseEvent <- fromAddHandler addKeyboardMouse
            clock              <- fromChanges initialTime addTime
            reshapeEvent       <- fromAddHandler addReshape
            displayEvent       <- fromAddHandler addDisplay
            let
                diffTime = realToFrac . (flip diffUTCTime) initialTime <$> clock
                inputs = Inputs keyboardMouseEvent diffTime reshapeEvent
                outputs = program inputs
                displayPoll = display outputs <@ displayEvent
            reactimate $ fmap setDisplay displayPoll
            reactimate $ fmap addWhenIdle (whenIdle outputs)
    network <- compile networkDescription
    actuate network 
```

对于我们感兴趣的每个 GLUT 回调，我们都会提出相应的 reactive-banana `Event`。对于空闲回调，我们还运行任何排队的事件。对于显示回调，我们运行 polled `DisplayCallback`。

```
 -- Handle GLUT events
    keyboardMouseCallback $= Just (\k ks m p -> raiseKeyboardMouse (KeyboardMouse k ks m p))
    idleCallback $= Just (do
        getCurrentTime >>= raiseTime
        runWhenIdle
        postRedisplay Nothing)
    reshapeCallback $= Just raiseReshape
    displayCallback $= do
        raiseDisplay ()
        runDisplay
    mainLoop 
```

### 示例的其余部分

教程代码的其余部分可以逐字重复

```
vertex3f :: (GLfloat, GLfloat, GLfloat) -> IO ()
vertex3f (x, y, z) = vertex $ Vertex3 x y z    

points :: Int -> [(GLfloat,GLfloat,GLfloat)]
points n = [ (sin (2*pi*k/n'), cos (2*pi*k/n'), 0) | k <- [1..n'] ]
   where n' = fromIntegral n

cube :: GLfloat -> IO ()
cube w = renderPrimitive Quads $ mapM_ vertex3f
  [ ( w, w, w), ( w, w,-w), ( w,-w,-w), ( w,-w, w),
    ( w, w, w), ( w, w,-w), (-w, w,-w), (-w, w, w),
    ( w, w, w), ( w,-w, w), (-w,-w, w), (-w, w, w),
    (-w, w, w), (-w, w,-w), (-w,-w,-w), (-w,-w, w),
    ( w,-w, w), ( w,-w,-w), (-w,-w,-w), (-w,-w, w),
    ( w, w,-w), ( w,-w,-w), (-w,-w,-w), (-w, w,-w) ] 
```

# c++ - 正则表达式与从 C++ 中的文件加载的长字符串不匹配

> ID：15129680
> 
> 赞同：0
> 
> 时间：2013-02-28T07:16:07.117
> 
> 标签：c++, regex, visual-c++, c++11

我有一个带有 ascii 编码的纯 html 文件。我将它加载到 Visual C++ 2012 中的 c++ 子程序中，并尝试从中提取一些模式。但我发现无论正则表达式是什么，都找不到匹配项。

我尝试了使用 cmatch 和 smatch 的程序，但它不适用于从文件加载的字符串。

该文件仅包含 ascii 字符，我需要多行正则表达式支持，但该程序仅适用于分配的字符串，而不适用于从文件加载的字符串。我检查了文件中加载的文本。它已正确加载。问题出在正则表达式上。

```
void findFrasi(string filename){
    fstream f;
    f.open(filename, fstream::in);
    char* ls;
    ls = (char*)malloc(1000 * 10); 
    f.get(ls, fileSize, char(255));
    std::string s(ls);

    try {
        //s= "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">";
        std::smatch cm;
        std::regex e ("([\\s|\\S]*)(http)([\\s|\\S]*)", std::regex::ECMAScript  | std::regex::icase );

        std::regex_match( s, cm, e, regex_constants::match_any );

        std::cout << "matches:" << cm.size() << std::endl;

        for (std::smatch::iterator it = cm.begin(); it!=cm.end(); ++it) {
            std::cout << *it << std::endl;
        }
    } catch (std::regex_error& e) {
        if (e.code() == std::regex_constants::error_badrepeat)
            std::cerr << "Repeat was not preceded by a valid regular expression.\n";
        else std::cerr << "Some other regex exception happened.\n";
    }

    free(ls);
    f.close();
} 
```

永远不会发生异常！我总是得到输出：`matches0`

顺便说一句，我还尝试了其他正则表达式脚本，例如 std::regex::ECMAScript，它们并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:28:02.883

您可以使用`sregex_iterator`获取所有匹配项。

像这样的东西（应该在带有 Nov2012CTP 的 Visual C++ 2012 上运行）：

```
#include <regex>
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
    std::string filepath = "jonny_regex_text.txt"; // the file you provided
    std::ifstream ifs(filepath.c_str(), std::ios_base::in | std::ios_base::binary);

    ifs.seekg(0, std::ios_base::end);
    size_t length = static_cast<size_t>(ifs.tellg());
    ifs.seekg(0, std::ios_base::beg);

    std::string text;
    text.resize(length);

    ifs.read(&text[0], length);
    ifs.close();

    std::string pattern(R"((http|https|ftp)\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?/?([a-zA-Z0-9\-\._\?\,\'/\\\+&amp;%\$#\=~])*)");
    std::regex r(pattern, regex::icase);
    for (std::sregex_iterator it(text.begin(), text.end(), r), end_it; it != end_it; ++it)
    {
        std::cout << it->str() << std::endl;
    }

    return 0;
} 
```

该代码会打印您在文本文件中拥有的所有 URL。

# c - 无法从客户端连接到套接字

> ID：15129684
> 
> 赞同：0
> 
> 时间：2013-02-28T07:16:15.207
> 
> 标签：c, sockets, networking, network-programming

我正在尝试使用 C 中的套接字编写一个简单的客户端和服务器。客户端和服务器都在运行 Ubuntu。服务器正在广播一个 ad-hoc 网络，但是尽管能够从终端 ping 它，但我似乎无法让客户端连接到服务器。

我用于服务器和客户端的代码改编自在线资源，如下所示：

```
#include<stdio.h>
#include<string.h>  //strlen
#include<sys/socket.h>
#include<arpa/inet.h>   //inet_addr
#include<unistd.h>  //write

int main(int argc , char *argv[])
{
int socket_desc , new_socket , c;
struct sockaddr_in server , client;
char *message;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1)
{
    printf("Could not create socket");
}

//Prepare the sockaddr_in structure
server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8888 );

//Bind
if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
{
    puts("bind failed");
    return 1;
}
puts("bind done");

//Listen
listen(socket_desc , 3);

//Accept and incoming connection
puts("Waiting for incoming connections...");
c = sizeof(struct sockaddr_in);
new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);
if (new_socket<0)
{
    perror("accept failed");
    return 1;
}

puts("Connection accepted");

//Reply to the client
message = "Hello Client , I have received your connection. But I have to go now, bye\n";
write(new_socket , message , strlen(message));

return 0;
} 
```

客户

```
 #include <stdio.h>
 #include <string.h>    
 #include <sys/socket.h>
 #include <arpa/inet.h> 

int main(int argc , char *argv[])
{
int socket_desc;
struct sockaddr_in server;
char *message;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1)
{
    printf("Could not create socket");
}

server.sin_addr.s_addr = inet_addr("192.168.0.1");
server.sin_family = AF_INET;
server.sin_port = htons( 80 );

//Connect to remote server
if (connect(socket_desc , (struct sockaddr *)&server , sizeof(server)) < 0)
{
    puts("connect error");
    return 1;
}

puts("Connected\n");

//Send some data
message = "GET / HTTP/1.1\r\n\r\n";
if( send(socket_desc , message , strlen(message) , 0) < 0)
{
    puts("Send failed");
    return 1;
}
puts("Data Send\n");

return 0;
} 
```

IP 地址是通过在服务器终端上运行 ifconfig 并查看其 inet addr 值获得的。

此外，我还通过在终端中运行 sudo ufw disable 来禁用客户端和服务器上的防火墙。Errno 也输出连接被拒绝。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:19:29.773

您的服务器侦听端口 8888 并且客户端尝试连接到端口 80，两者`server.sin_port = htons( x );`必须使用相同的端口号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:37:45.950

而不是直接使用`inet_addr("192.168.0.1")`;

利用

```
struct sockaddr_in6 ser_address;
inet_pton(AF_INET,"192.168.0.1",&ser_address.sin.addr); 
```

注意：当将地址传递给套接字函数时，我们不能在代码中使用表示样式的地址

# java - 将 jaudiotagger 导入到 Eclipse

> ID：15129685
> 
> 赞同：0
> 
> 时间：2013-02-28T07:16:17.943
> 
> 标签：java

我正在开发一个加载 mp3 文件的歌曲数据的程序。我正在尝试导入 JAudioTagger 来帮助加载歌曲信息。JAudioTagger 是一个 .jar 文件。我不确定这些选项是否正确。

有谁知道如何将jar文件导入eclipse？我正在为 Web 开发人员使用 Eclipse Java EE IDE。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:22:53.073

写点击你的项目选择`buildpath -->select the libraries-->add external jars-->select jar from your system`...

# html - IE8 在使用 http-equiv="X-UA-Compatible" 时不会显示框架

> ID：15129691
> 
> 赞同：0
> 
> 时间：2013-02-28T07:16:38.863
> 
> 标签：html, internet-explorer-8, base, x-ua-compatible

我有以下 html 代码在 IE8 中没有 http-equiv="X-UA-Compatible" 的情况下工作，但是当它有它时会失败。我认为顺序是正确的（[http://blogs.msdn.com/b/ieinternals/archive/2011/07/18/optimal-html-head-ordering-to-avoid-parser-restarts-redownloads-and-improve -performance.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/07/18/optimal-html-head-ordering-to-avoid-parser-restarts-redownloads-and-improve-performance.aspx)），并且代码是有效的，所以我看不出它这样做的原因。

请问，有什么解释吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8, IE=edge" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<base href="file:///D:/LocalPath/ToFrameElements/">
<title>IE8 stuff</title>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:40:57.110

您的`X-UA-Compatible`http-equiv 字符串无效。

它有 2 个值：

1.  IE=8（IE 8标准渲染模式）
2.  IE=edge（最新引擎）

但是，语法不正确。正确的语法是：

```
<meta http-equiv="X-UA-Compatible" content="IE=8; IE=edge" /> 
```

当指定多个值时，将使用最高值。那是，

*   In IE9 , the page will be rendered in IE 9 standards rendering mode.

*   In IE8 , the page will be rendered in IE 8 standards rendering mode.

**Solution: Fix the syntax and retry.**

Reference:

1.  [https://developer.mozilla.org/en-US/docs/Persona/Browser_compatibility](https://developer.mozilla.org/en-US/docs/Persona/Browser_compatibility)
2.  [Define Document Compatibility](http://msdn.microsoft.com/library/cc288325%28v=vs.85%29.aspx)
3.  [Understanding Compatibility Modes in IE8](https://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx?Redirected=true)

*Sidenote:* IE supports this meta tag starting from IE 8.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:24:43.807

The [`base` element](http://www.w3.org/TR/html4/struct/links.html#edef-BASE) is defined so that its value must be an absolute URL. Besides, any effect of a `file:` URL is by definition system-dependent. So you should organize your local files and references to them so that a `base` tag is not needed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:04:24.347

The frames wouldn't appear because of the standard document mode that the

```
<meta http-equiv="X-UA-Compatible" content="IE=8, IE=edge" /> 
```

or not relaying on the browser's error tolerance, the syntactically correct way

```
<meta http-equiv="X-UA-Compatible" content="IE=8; IE=edge" /> 
```

implies.

This is because in the standard document rendering mode IE does not allow the use of base href with links to the filesystem for security's sake. To have the base href working it can only be achieved by removing the the meta http-equiv="X-UA-Compatible" so that page will run in quirks rendering mode.

# php - php + populate 选择另一个下拉菜单

> ID：15129695
> 
> 赞同：1
> 
> 时间：2013-02-28T07:16:50.867
> 
> 标签：php, mysql, drop-down-menu, dreamweaver

我正在创建三个**下拉菜单** ，它工作得很好，但我希望第二个下拉列表出现在第一个的选择上，第三个出现在第二个的选择上如果有人可以指导我或给我怎么做我是一个例子，我会很感激

PS：第二个下拉列表或表有一个来自第一个的外键，所以在这里我想根据第一个的选择来填充第二个。

# 有趣的.inc.php

```
<?php
 require_once('db.inc.php'); 

function connect(){
   mysql_connect(DB_Host, DB_User ,DB_Pass )or die("could not connect to the database" .mysql_error());

   mysql_select_db(DB_Name)or die("could not select database");

}
  function close(){

  mysql_close();

  }

  function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializationQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization_name'] .  '">' . $recordJob['specialization_name'] . '</option>';

  }

}

function governorateQuery(){

$goverData = mysql_query("SELECT * FROM governorate");

  while($recordGover = mysql_fetch_array($goverData)){

     echo'<option value="' . $recordGover['governorate_name'] .  '">' . $recordGover['governorate_name'] . '</option>';

  }

}

?> 
```

# 索引.php

```
<?php
  require_once('func.inc.php'); 
  connect(); 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>testDroplistdown</title>
</head>

<body>
<p align="center">
<select name="dropdown">
  <?php countryQuery(); ?>
</select>
</p>
<br />
<br />

<p align="center">
<select name="dropdown2">
  <?php governorateQuery(); ?>
</select>
</p>

<p align="left">
<select name="dropdown3">
  <?php specializationQuery(); ?>
</select>
  <?php close(); ?>
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T07:45:40.167

确保你永远不会在你的 php 结束标签和你的 html 标题的乞求之后留下 a，它可能会引发一些讨厌的错误

这个脚本应该可以工作

```
 <?php
   require_once('func.inc.php');
   connect();
    ?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>testDroplistdown</title>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  </head>

  <body>
  <p align="center">
  <div id="dropdown1div"><select id="dropdown1" name="dropdown">
  <?php countryQuery(); ?>
  </select></div>
  </p>
  <br />
  <br />

  <p align="center">
  <div id="dropdown2div"></div>
  </p>

  <p align="left">
  <div id="dropdown3div"></div>

    <script type="text/javascript">
    $("#dropdown").change(function() {
    val = $(this).val();
    var html = $.ajax({
    url: "dropdown_select.php?dropdown=2&val="+val+"",
    async: true,
    success: function(data) {
    $('#dropdown2div').html(data);
    }////////////function html////////
    })/////////function ajax//////////
     });
    </script>

   <?php close(); ?>
   </p>

   </body>
   </html> 
```

dropdown_select.php

```
 <?php
   require_once('func.inc.php');
   connect();
    if(isset($_GET['val'])){   
    $val = $_GET['val'];
    $dropdown = $_GET['dropdown'];
    }

    if($dropdown == '2'){
    echo '<select id="dropdown2" name="dropdown2">';
    governorateQuery();
    echo '</select>';
    ?>
     <script type="text/javascript">
     $("#dropdown2").change(function() {
     val = $(this).val();
     var html = $.ajax({
     url: "dropdown_select.php?dropdown=3&val="+val+"",
     async: true,
     success: function(data) {
     $('#dropdown3div').html(data);
     }////////////function html////////
     })/////////function ajax//////////
     });
    </script>

      } // end if statement

    if($dropdown == '3'){
     echo '<select id="dropdown3" name="dropdown3">';
     specializationQuery();       
     echo '</select>';

      } // end if statement
      close();
      ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:43:43.117

你不能只用 PHP 做到这一点，你需要使用 AJAX。

Ajax 是一种使用 javascript 和 PHP 根据用户输入加载新结果的技术。假设您选择了一个国家，然后您会得到一个新的选择框，其中包含该国家的所有城市。

您必须为第一个选择框创建一个事件处理程序：

```
 <select name="dropdown" onchange="loadNewSelectBox(this.value)">
              // values
     </select> 
```

loadNewSelectBox 将是一个函数，它将使用您的选择框的值将新的 xmlhttp 请求发布到服务器上的 php 文件。然后，您将响应来自该 PHP 文件（json、xml、html..）的数据。您的响应（对于初学者）可能是包含新选择框的 html。然后，您将该响应附加到 div 或段落。

这是一个类似于您的任务的示例：http: [//www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

这是一个很好的学习资源。 [https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)

# android - TiledScrollView 的双指缩放功能

> ID：15129703
> 
> 赞同：0
> 
> 时间：2013-02-28T07:17:39.897
> 
> 标签：android, scroll, catiledlayer, pinchzoom, deepzoom

我使用[https://github.com/ened/Android-Tiling-ScrollView](https://github.com/ened/Android-Tiling-ScrollView)库来显示大的平铺图像。一切正常。唯一的问题是，我只想缩放我触摸的特定部分（如谷歌地图中的捏拉缩放）。现在，无论我触摸到哪里，它总是从头开始显示所有缩放级别的图块。有时，它会把我带到我想要缩放的地方，但它并不完美，因为有时它会把我带到不同的部分。以下代码执行移动逻辑

```
mScroller.startScroll(getScrollX(), getScrollY(), newOffsetX, newOffsetY); 
```

前 2 个参数表示开始滚动偏移量，后 2 个参数表示滚动结束的目标点。我为最后 2 个参数尝试了不同的组合，但运气不好。

如果它是一个`ImageView`，我会做

```
canvas.translate(x, y); 
```

缩放特定部分，但不幸的是它不是`ImageView`。即使我应用了[https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)`ImageView`中的缩放逻辑来平铺缩放，但没有运气。

非常感谢您的建议或线索。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T14:02:06.263

有一个非常不错的自定义 mapView 库，几乎具有谷歌地图的所有功能。它[在这里](https://github.com/moagrius/TileView)。

# delphi - Delphi for QA 的免费内存检测工具

> ID：15129709
> 
> 赞同：2
> 
> 时间：2013-02-28T07:18:01.707
> 
> 标签：delphi, memory-leaks

我找到了一些可以帮助开发人员找出内存泄漏的工具，例如 FastMM4。但是，在我们进行构建之后，QA 人员可以使用它来确定内存泄漏吗？或者是否有任何可用的工具可以帮助 QA 人员找出内存泄漏，那么它会很棒。

目前我们遵循的就像运行应用程序注释记录内存使用情况并执行一些任务，然后检查内存使用情况，如果我们发现存在巨大差异，那么我们就缩小范围。是否有任何工具可以自动完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:31:55.443

根据系统中是否存在 FastMM_FullDebugMode.dll，可以启用或禁用 FastMM4 中的许多功能。这样你就可以只有一个构建，通过将 FastMM_FullDebugMode.dll 复制到程序文件夹来启用泄漏检测。您可以通过将 ShareMem 单元与不同版本的 BorlndMM.dll 一起使用来实现类似的功能。在这种情况下，您可以使用任何您想要的选项将 FastMM4 编译为 BorlndMM.dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:29:24.727

您的 QA 测试人员同样可以使用 FastMM 来检测内存泄漏。您只需要为他们提供一个启用内存泄漏检测的构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:58:10.837

SouceGuard 是 Delphi 中一个精简且有效的防泄漏和错误报告工具。它以前称为 UMLD。

# json - bindingResult.getAllErrors() 与 bindingResult.getFieldErrors()

> ID：15129710
> 
> 赞同：2
> 
> 时间：2013-02-28T07:18:10.687
> 
> 标签：json, jsp, jquery, spring-mvc

我正在使用 Spring MVC 3.0 框架开发应用程序，我有以下要求，

一个jsp页面中有多种形式。我正在使用 ajax 提交每个表单。但是提交后，每个表单都会转到不同的控制器。在控制器中，如果有任何错误我需要将验证结果发送回 jsp 页面，我将验证输入数据。现在我将错误存储到一个单独的列表中，并通过 json 响应发送回 jsp。我不确定是使用`bindingResult.getAllErrors()`还是`bindingResult.getFieldErrors()`获取控制器中的错误列表。两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:49:16.893

**获取所有错误（）**

> 通过使用 bindingResult.getAllErrors，您将获得所有错误，包括全局错误和字段错误。

**获取字段错误（）**

> 通过使用 bindingResult.getFieldErrors()，您将获得与给定字段相关的所有错误。

这是一个有用的[链接](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/validation/BindException.html)，可以帮助您更好地理解两者之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:06:47.810

getAllErrors() 返回所有错误，包括全局错误和字段错误。getFieldErrors() 仅返回与绑定字段值相关的错误。我不确定是由什么产生的“全局”错误，因为我从未见过。

# c# - 在运行时构造 where 子句

> ID：15129711
> 
> 赞同：2
> 
> 时间：2013-02-28T07:18:11.133
> 
> 标签：c#, linq

我想使用一个完全动态的 where 子句，`linq`其中列、运算符以及匹配所有的值都是在运行时决定的。如果可能的话，请建议我如何使用它。我想做类似的事情：

```
ObjDataTable.AsEnumerable().Where(whereClause); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:22:00.450

这里有两个可能的选项（可能还有更多）：

## LINQ 动态查询库

[动态 Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)允许您在运行时动态生成 LINQ 查询。

> 您可以针对任何 LINQ 数据提供程序（包括 LINQ to SQL、LINQ to Objects、LINQ to XML、LINQ to Entities、LINQ to SharePoint、LINQ to TerraServer 等）使用 DynamicQuery 库。动态查询库不使用语言运算符或类型安全的 lambda 扩展方法来构造您的 LINQ 查询，而是为您提供了**基于字符串的扩展方法**，您可以将任何字符串表达式传递到这些方法中。

```
using System.Linq.Dynamic; //Make sure you reference Dynamic.dll

string whereClause = "CategoryID=2 AND UnitPrice>2";
ObjDataTable.AsEnumerable().AsQueryable().Where(whereClause); 
```

*注意：下载动态 LINQ 库时，您需要引用的 .dll 位于以下路径下：* `.\LinqSamples\DynamicQuery\DynamicQuery\bin\Debug`

## LinqKit.PredicateBuilder

[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)是[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)库中的一个类。它是类型安全的，并允许您动态创建表达式。也许比[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)更高的学习曲线，但值得一试。

> 在驱使您手动构建表达式树的所有事情中，对**动态谓词**的需求在典型的业务应用程序中是最常见的。幸运的是，可以编写一组简单且可重用的扩展方法，从根本上简化此任务。这就是我们 PredicateBuilder 类的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:20:08.943

您可以在运行时使用方法语法添加过滤：

```
var query = ObjDataTable.AsEnumerable();
if (condition)
    query = query.Where(whereClause); 
```

在这种情况下，您将拥有很好的强类型 whereClause（而不是字符串）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:21:20.593

您是否为此检查过 Dynamic Expression API（[在 NuGet 上可用](http://nuget.org/packages/DynamicQuery/)）。它看起来非常简单且易于使用？

如果这不起作用，您必须`Expression`在运行时创建 's，这在我的经验中可能会很痛苦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:21:28.003

利用[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)`whereClause` ，因此您可以作为字符串传递

# regex - 如何为字符串模式的所有实例打印下 N 行？

> ID：15129713
> 
> 赞同：2
> 
> 时间：2013-02-28T07:18:13.057
> 
> 标签：regex, arrays, perl, parsing

我有一个如下所示的文件：

**文件**

```
variableStep chrom=chr1 span=25
10076   0.84
10101   1
10126   1
10151   1
10176   1
10201   1
10226   1.72
variableStep chrom=chr1 span=25
10251   2
10276   1.16
10301   1
10326   1
10351   1
10376   1
10401   1
10426   0.28
11451   0.04
variableStep chrom=chr2 span=25
9781451     2
19781476    2
19781501    2
19781526    2
19781551    1
19781576    1
19781601    0.48
variableStep chrom=chr2 span=25
19781826    0.28
19781851    1
19781876    1
19781901    1
19781926    1
19781951    1.48
19781976    3.68
19782001    4.56
19782026    4
variableStep chrom=chr3 span=25
4813476 1
24813501    1
24813526    1
24813551    1
24813576    1.88
24813601    2
variableStep chrom=chr3 span=25
24813626    1.4
24813651    1.48
24813676    2
24813701    2
24813726    2
24813751    2
variableStep chrom=chr4 span=25
24815401    2.24
24815426    3
24815451    3
24815476    3
24815501    3
24815526    2.04
variableStep chrom=chr4 span=25
24815551    2
24815576    1.76
24815601    0.76
24815951    0.48
24815976    1
24816001    1
24816026    1
24816051    1
variableStep chrom=chr5 span=25
24817226    0.92
24817251    1.48
24817276    3
24817301    3
variableStep chrom=chr5 span=25
24817326    3
24817351    3
24817376    3
24817401    3.04
24817426    3.08 
```

**需要什么**

我需要做的是，对于 say 的所有实例，`variableStep chrom=chr1 span=25`将后续行打印`n`到输出文件中。`n`我必须提到，是高度可变的。在实际文件中，它可以从 300,000 到 500,000+ 不等。

**期望的输出**

1.Output_file_1_for_variableStep chrom=chr1 span=25

```
10076   0.84
10101   1
10126   1
10151   1
10176   1
10201   1
10226   1.72
10251   2
10276   1.16
10301   1
10326   1
10351   1
10376   1
10401   1
10426   0.28
11451   0.04 
```

2._Output_file_2_for_variableStep chrom=chr2 span=25

```
9781451     2
19781476    2
19781501    2
19781526    2
19781551    1
19781576    1
19781601    0.48
19781826    0.28
19781851    1
19781876    1
19781901    1
19781926    1
19781951    1.48
19781976    3.68
19782001    4.56
19782026    4 
```

3._Output_file_3_for_variableStep chrom=chr3 span=25

```
4813476     1
24813501    1
24813526    1
24813551    1
24813576    1.88
24813601    2
24813626    1.4
24813651    1.48
24813676    2
24813701    2
24813726    2
24813751    2 
```

4._Output_file_4_for_variableStep chrom=chr4 span=25

```
24815401    2.24
24815426    3
24815451    3
24815476    3
24815501    3
24815526    2.04
24815551    2
24815576    1.76
24815601    0.76
24815951    0.48
24815976    1
24816001    1
24816026    1
24816051    1 
```

5._Output_file_5_for_variableStep chrom=chr5 span=25

```
24817226    0.92
24817251    1.48
24817276    3
24817301    3
24817326    3
24817351    3
24817376    3
24817401    3.04
24817426    3.08 
```

**背景**
我仍然认为自己是 Perl 新手，所以我编写的代码并不能完全完成任务。

事实上，下面的代码描述了我试图让它工作的 3 种方式。对于带有模式的代码，`variableStep chrom=chr1 span=25`我尝试手动打印正则表达式匹配后的后续行。

据我所知，我需要一个循环来遍历所有后续行，这就是我用 pattern 编写的`variableStep chrom=chr1 span=25`。但是后来，我意识到我需要一个退出机制，否则所有后续行都会被打印出来。

它是这样`this exit pattern`写的`last if /^v.*$/`，我需要弄清楚。因为我目前只打印`first`特定模式的实例。也没有我可以退出的空白行。如果我有一个空行，那么这段代码工作得很好（修改为`last if /^$/`）。我什至尝试使用非十进制字符作为`/^\D.*$/`，但它不起作用。`What exit pattern should I use?`

代码的其余部分是我的宝宝试图让程序工作，它只在模式匹配后打印单个后续行。

**代码**

```
#Trial code to parse main file
use 5.014;
use warnings;

#Assign filename
my $file = 'trial.txt';

#Open filename
open my $fh, '<' , $file || die $!;

#Open output
open OUT1, ">Trial_chr1.out" || die $!;
open OUT2, ">Trial_chr2.out" || die $!;
open OUT3, ">Trial_chr3.out" || die $!;
open OUT4, ">Trial_chr4.out" || die $!;
open out5, ">Trial_chr5.out" || die $!;

#Read in file
while(<$fh>){
    chomp;
    if (/^variableStep chrom=chr1 span=25/){

        my $nextline1 = <$fh>;#means next line after pattern match
        my $nextline2 = <$fh>;
        my $nextline3 = <$fh>;
        my $nextline4 = <$fh>;
        my $nextline5 = <$fh>;
        my $nextline6 = <$fh>;
        my $nextline7 = <$fh>;
        print OUT1 $nextline1;
        print OUT1 $nextline2;
        print OUT1 $nextline3;
        print OUT1 $nextline4;
        print OUT1 $nextline5;
        print OUT1 $nextline6;
        print OUT1 $nextline7;

    }elsif(/^variableStep chrom=chr2 span=25/){

        my @grabbed_lines; #Initialize array to store lines after pattern match
        while (<$fh>){ #Read subsequent lines while in a loop

        last if /^v.*$/; #Break out of the loop if line encountered begins with v
        push @grabbed_lines, $_;# As long as the above condition is false, push the lines into the array

        }print OUT2 @grabbed_lines; # Print the grabbed lines

    }elsif(/^variableStep chrom=chr3 span=25/){
        my $nextline = <$fh>;
        print OUT3 $nextline;

    }elsif(/^variableStep chrom=chr4 span=25/){
        my $nextline = <$fh>;
        print OUT4 $nextline;
    }elsif(/^variableStep chrom=chr5 span=25/){
        my $nextline = <$fh>;
        print out5 $nextline;
    }
}

#Exit
exit; 
```

感谢您花时间回答我的问题。我将不胜感激任何提示和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:29:59.907

好的，我误解了这`n`部分，每场比赛都不同，这是经过测试和工作的：

```
my $found = 0;

while (<$fh>) {
    if ( $found && /^\d/ ) {
        print $_;
    }
    else {
        $found = 0;
    }

    if (/^variableStep chrom=chr2 span=25/) {
        $found = 1;
    }
} 
```

这样，它会打印以数字开头的所有后续行。

**解释：**

这里的问题是，每次调用`<$fh>`它时都会读取下一行，因此如果您测试行内容并且测试失败，则不应执行下一个循环，因为随后读取下一行并且您丢失了所在行测试失败。

所以我来到了这个解决方案：

1.  我使用标志来知道我处于哪种模式，我是否正在搜索要打印的行？

2.  第一个`if`只输入

    1.  如果我在第二个 if if if in a loop before and the flag has been set to "1"

    2.  AND 行以数字开头。

3.  当此测试失败时，即开头没有数字的行，我重置标志，然后有机会再次查看以“variableStep ...”开头的同一行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:08:10.027

下面的 Oneliner 应该可以解决问题（假设输出文件尚不存在）：

```
perl -lne '/variableStep/ && open($fh, ">>", $_) && next; print $fh $_;' input.txt 
```

--

顺便说一句：`||`运算符具有高优先级（`man perlop`），所以命令：

```
open OUT1, ">Trial_chr1.out" || die $!; 
```

perl 将其理解为

```
open OUT1, (">Trial_chr1.out" || die $!); 
```

要进行错误检查，您应该改用`and`运算符或使用括号来强制执行所需的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:47:02.083

我喜欢[perl](/questions/tagged/perl "显示标记为“perl”的问题")，但[awk](/questions/tagged/awk "显示标记为“awk”的问题")更适合这种情况，请参阅：

```
$ awk '
    {if ($0 ~ /^variableStep/) {file="output_file_"++c"_"$1"_"$2"_"$3}
    else{print $0 > file}}
' file.txt

$ ls -l output_file_* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T08:05:13.270

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")和`File::Slurp`有用的模块：

```
use strict; use warnings;
use File::Slurp;

my ($c, $file);

while (<>) {
    if (/^variableStep\s+chrom=\w+\s+span=\d+/) {
        $c++;
        $file = $&;
        $file =~ s/\s/_/g;
        $file = "output_file_${c}_" . $file;
    }
    else {
        append_file $file, $_;
    }
} 
```

用法 ：

```
$ perl ./script.pl file.txt
$ ls -l output_file_* 
```

# php - 通过 cake-php 从 db 获得不同的值

> ID：15129733
> 
> 赞同：0
> 
> 时间：2013-02-28T07:19:29.977
> 
> 标签：php, mysql, cakephp

嗨，我想从 cakephp 的特定列中获取不同的值。

这是我尝试过的：-

```
 $new_data =$this->Event->findAll(null, 'DISTINCT events.source');

Event- is the name of my model.
events- is my table name in db.
Source:- is the column name from which i want to fetch values. 
```

我不知道查询中有什么问题，谁能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:23:26.847

`findAll`实际上不是 cakephp 方法。你想做的是：

```
$this->Event->find('all', array('fields' => 'DISTINCT Event.source')); 
```

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-all](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-all)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:48:39.590

```
$this->Event->find('all', array('group' => 'Event.source')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:37:52.340

```
$this->Event->find('all', array('group' => 'Event.source')); 
```

# opencv - 为 windows 8 和 windows phone 8 打开 CV 图像编辑库

> ID：15129738
> 
> 赞同：2
> 
> 时间：2013-02-28T07:19:44.917
> 
> 标签：opencv, windows-8, windows-phone-8

是否有适用于 Windows Phone 8 和 Windows 8 的 OpenCV 图形库的支持。我在 Google 上进行了搜索，但没有找到任何与 OpenCV 相关的资源来连接 Windows Phone 8 / Windows 8。如果你们中的任何人知道更多关于这个请帮助我，并提供一些链接到图书馆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T06:28:15.493

这是我从 OpenCV 团队获得的最新信息。

OpenCV 开发团队正在为 Windows RT 开发端口。这是 WinRT 的当前开发分支（[https://github.com/asmorkalov/opencv/tree/winrt](https://github.com/asmorkalov/opencv/tree/winrt)）。您可以使用 Visual Studio Express for Windows 8 和 Platform SDK 为 ARM 构建它。

```
 Open Visual Studio development console.
      Setup environment for cross compilation by command "C:\Program Files(x86)\Microsoft
      Visual Studio 11.0\VC\bin\x86_arm\vcvarsx86_arm.bat"
      cd <opencv_source_dir>/platforms/winrt/
      run scripts/cmake_winrt.cmd
      run ninja 
```

或者，您可以使用 nmake 代替 ninja。您需要编辑 cmake_winrt.cmd 并将项目生成器从 -GNinja 更改为 -G "NMake Makefiles"。现在只支持库的算法部分，没有 tbb，没有 UI，没有视频 IO。

请从以下给出的 URL 中查看更多详细信息。 [http://answers.opencv.org/question/9847/opencv-for-windows-8-tablet/?answer=9851#post-id-9851](http://answers.opencv.org/question/9847/opencv-for-windows-8-tablet/?answer=9851#post-id-9851)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T10:42:11.277

通过 windows-8，我猜你的意思是 winRT ？AFAIK，winRT 没有官方端口。例如，您需要将其编译为 Win8 Store DLL，以便您可以从 Win8 Store Application 中引用它。

直接从opencv-core开始，然后一一添加你需要的lib，因为所有组件都无法编译（比如opencv-highgui高度依赖Windows API，不完全兼容Win8 Store Apps ）。

您还需要自己编写一些 OpenCV 使用的 Win32 方法，这些方法不能从 Win8 应用程序访问，例如 GetSystemInfo()、GetTempPathA()、GetTempFileNameA() 以及与线程本地存储 (TLS) 相关的所有方法。

通过将 opencv_core、opencv_imgproc 和 zlib 编译为 3 个单独的静态库，我已经能够在 WinRT 中使用一小部分 OpenCV。我已经添加了另一个，称为 opencv_winrt，它只包含以下两个文件：

**opencv_winrt.h**

```
#pragma once

#include "combaseapi.h"

void WINAPI GetSystemInfo(
    _Out_  LPSYSTEM_INFO lpSystemInfo
);

DWORD WINAPI GetTempPathA(
  _In_   DWORD nBufferLength,
  _Out_  char* lpBuffer
);
UINT WINAPI GetTempFileNameA(
  _In_   const char* lpPathName,
  _In_   const char* lpPrefixString,
  _In_   UINT uUnique,
  _Out_  char* lpTempFileName
);

DWORD WINAPI TlsAlloc();
BOOL WINAPI TlsFree(
    _In_ DWORD dwTlsIndex
);
LPVOID WINAPI TlsGetValue(
    _In_ DWORD dwTlsIndex
);
BOOL WINAPI TlsSetValue(
    _In_ DWORD dwTlsIndex, 
    _In_opt_ LPVOID lpTlsValue
);

void WINAPI TlsShutdown();

# define TLS_OUT_OF_INDEXES ((DWORD)0xFFFFFFFF) 
```

**opencv_winrt.cpp**

```
#include "opencv_winrt.h"
#include <vector>
#include <set>
#include <mutex>
#include "assert.h"

void WINAPI GetSystemInfo(LPSYSTEM_INFO lpSystemInfo)
{
    GetNativeSystemInfo(lpSystemInfo);
}

DWORD WINAPI GetTempPathA(DWORD nBufferLength, char* lpBuffer)
{
    return 0;
}

UINT WINAPI GetTempFileNameA(const char* lpPathName, const char* lpPrefixString, UINT uUnique, char* lpTempFileName)
{
    return 0;
}

// Thread local storage.
typedef std::vector<void*> ThreadLocalData;

static __declspec(thread) ThreadLocalData* currentThreadData = nullptr;
static std::set<ThreadLocalData*> allThreadData;
static DWORD nextTlsIndex = 0;
static std::vector<DWORD> freeTlsIndices;
static std::mutex tlsAllocationLock;

DWORD WINAPI TlsAlloc()
{
    std::lock_guard<std::mutex> lock(tlsAllocationLock);

    // Can we reuse a previously freed TLS slot?
    if (!freeTlsIndices.empty())
    {
        DWORD result = freeTlsIndices.back();
        freeTlsIndices.pop_back();
        return result;
    }

    // Allocate a new TLS slot.
    return nextTlsIndex++;
}

_Use_decl_annotations_ BOOL WINAPI TlsFree(DWORD dwTlsIndex)
{
    std::lock_guard<std::mutex> lock(tlsAllocationLock);

    assert(dwTlsIndex < nextTlsIndex);
    assert(find(freeTlsIndices.begin(), freeTlsIndices.end(), dwTlsIndex) == freeTlsIndices.end());

    // Store this slot for reuse by TlsAlloc.
    try
    {
        freeTlsIndices.push_back(dwTlsIndex);
    }
    catch (...)
    {
        return false;
    }

    // Zero the value for all threads that might be using this now freed slot.
    for each (auto threadData in allThreadData)
    {
        if (threadData->size() > dwTlsIndex)
        {
            threadData->at(dwTlsIndex) = nullptr;
        }
    }

    return true;
}

_Use_decl_annotations_ LPVOID WINAPI TlsGetValue(DWORD dwTlsIndex)
{
    ThreadLocalData* threadData = currentThreadData;

    if (threadData && threadData->size() > dwTlsIndex)
    {
        // Return the value of an allocated TLS slot.
        return threadData->at(dwTlsIndex);
    }
    else
    {
        // Default value for unallocated slots.
        return nullptr;
    }
}

_Use_decl_annotations_ BOOL WINAPI TlsSetValue(DWORD dwTlsIndex, LPVOID lpTlsValue)
{
    ThreadLocalData* threadData = currentThreadData;

    if (!threadData)
    {
        // First time allocation of TLS data for this thread.
        try
        {
            threadData = new ThreadLocalData(dwTlsIndex + 1, nullptr);

            std::lock_guard<std::mutex> lock(tlsAllocationLock);

            allThreadData.insert(threadData);

            currentThreadData = threadData;
        }
        catch (...)
        {
            if (threadData)
                delete threadData;

            return false;
        }
    }
    else if (threadData->size() <= dwTlsIndex)
    {
        // This thread already has a TLS data block, but it must be expanded to fit the specified slot.
        try
        {
            std::lock_guard<std::mutex> lock(tlsAllocationLock);

            threadData->resize(dwTlsIndex + 1, nullptr);
        }
        catch (...)
        {
            return false;
        }
    }

    // Store the new value for this slot.
    threadData->at(dwTlsIndex) = lpTlsValue;

    return true;
}

// Called at thread exit to clean up TLS allocations.
void WINAPI TlsShutdown()
{
    ThreadLocalData* threadData = currentThreadData;

    if (threadData)
    {
        {
            std::lock_guard<std::mutex> lock(tlsAllocationLock);

            allThreadData.erase(threadData);
        }

        currentThreadData = nullptr;

        delete threadData;
    }
} 
```

我修改了文件 cvconfig.h：我已经注释掉了每个#define，除了 PACKAGE* 和 VERSION，我在最后添加了#include "opencv_winrt.h"。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T07:32:52.893

只是一个提示 - OpenCV 有一个名为`EmguCV`( [http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page) ) 的 C# 包装器，通过查看论坛帖子，我发现有一些活动可以在 Windows 上使用它8 但很难说它现在是否有效，因为声称问题的帖子已经很老了。我建议你试一试，看看这个 C# 包装器是否能够在 Windows Phone 8 上运行，我认为它绝对应该在 Windows 8 上运行。

# c# - 多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有工作

> ID：15129744
> 
> 赞同：7
> 
> 时间：2013-02-28T07:20:15.913
> 
> 标签：c#, .net, oledb

我正在运行以下代码

```
/*Fetchinch Last CustID from custMaster*/
int ID = 0;
try
{
     con.Open();
     da = new OleDbDataAdapter("select max(Id) from custMaster",con);
     DataSet ds = new DataSet();
     da.Fill(ds);
     for(int i=0;i<ds.Tables[0].Rows.Count;i++)
        ID=int.Parse(ds.Tables[0].Rows[i][0].ToString());
     con.Close();
}
catch (Exception ex) {}
finally 
{
     con.Close();
} 
```

我从 try 块的第一条语句中放入调试器，并在尝试打开连接时发现错误即将到来。错误文本：

> 多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。

连接字符串是：

> “提供者=Microsoft.Jet.OLEDB.4.0；数据源=E:\NewSoft\Database\TestApp.accdb；集成安全=SSPI”

我正在使用 oledb 连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T20:06:39.843

打开具有以下连接字符串的连接时，我遇到了类似的问题：

```
Data Source=.\SQLEXPRESS;Initial Catalog=master;Integrated Security=True 
```

在连接字符串中更改`Integrated Security=True`为解决了问题。`Integrated Security=SSPI`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T07:39:39.513

这可能是连接字符串中的错误的结果。你应该尝试添加

```
Persist Security Info=True; 
```

或者，您的 OLE DB 提供程序的注册表中可能存在问题，该提供程序必须具有 OLEDB_SERVICES 记录。在 HKEY_CLASSES_ROOT\CLSID 下的注册表中，找到 OLE DB 提供程序的 CLSID 并添加以下注册表值：

```
Value Name: OLEDB_SERVICES
Data Type: REG_DWORD
Value: 0xFFFFFFFF 
```

有关详细信息，请参阅[http://support.microsoft.com/kb/269495](http://support.microsoft.com/kb/269495)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T06:34:02.540

**对于连接到 MS Access 数据库的类似问题，由于在Jet OLEDB**的连接属性中设置了错误的密码而生成了这个确切的错误：Database Password=

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-31T13:44:17.977

我遇到了同样的问题，但发现是密码中使用的特殊字符。

因此，我更改了 Access 文件密码并将**Jet OLEDB:Database Password=**替换为更新后的密码，它解决了问题。**

# opengl - 构建人脸图像的线框模型

> ID：15129745
> 
> 赞同：4
> 
> 时间：2013-02-28T07:20:15.983
> 
> 标签：opengl, opencv, wireframe

我想编写一个程序来构建面部图像的线框模型并将其显示为 3d。任何机构都可以帮助我如何做到这一点？

**我对opencv**和**opengl**有一些了解

# asp.net - 当页面视图状态关闭时启用下拉视图状态

> ID：15129746
> 
> 赞同：0
> 
> 时间：2013-02-28T07:20:17.413
> 
> 标签：asp.net

我有一个 .Net 3.5 Web 应用程序，它在页面级别禁用了视图状态，但在下拉控件上启用了。在下拉列表的回发期间，我收到以下异常

> 你调用的对象是空的。

此异常发生在以下行：

```
string selectedVal = ddlStatus.SelectedItem.Value; 
```

[Control.ViewStateMode 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstatemode.aspx)是从`.Net 4.0`以后的。如果我使用它就可以达到目的`4.0`

> 要禁用页面的视图状态并为页面上的特定控件启用它，请将页面和控件的 EnableViewState 属性设置为 true，将页面的 ViewStateMode 属性设置为 Disabled，并将控件的 ViewStateMode 属性设置为启用。

当我使用 .Net 3.5 框架时，我们如何解决这个问题？

**代码**

```
public partial class FormattingTest : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        Status status1 = new Status() { StatusCode = 1, StatusDescription = "Inctive" };
        Status status2 = new Status() { StatusCode = 2, StatusDescription = "Active" };
        List<Status> statucCollection = new List<Status>();
        statucCollection.Add(status1);
        statucCollection.Add(status2);

        ddlStatus.DataTextField = "StatusDescription";
        ddlStatus.DataValueField = "StatusCode";
        ddlStatus.DataSource = statucCollection;
        ddlStatus.DataBind();

        //Assembly Version - 3.5.0.0 
        string version = System.Reflection.Assembly
                .GetExecutingAssembly()
                .GetReferencedAssemblies()
                .Where(x => x.Name == "System.Core").First().Version.ToString();

        Response.Write(version);

    }

    string selectedVal = ddlStatus.SelectedItem.Value;
    int y = 0;
}
}

public class Status
{
public int StatusCode { get; set; }
public string StatusDescription { get; set; }
} 
```

**标记**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="FormattingTest.aspx.cs" Inherits="FormattingTest"
EnableViewState="false"  %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<asp:DropDownList ID="ddlStatus" runat="server" AutoPostBack="true" EnableViewState="true" >
</asp:DropDownList>
</form>
</body>
</html> 
```

**参考**：

1.  [当 EnableViewState 设置为 False 时，服务器控件保持其状态](http://support.microsoft.com/kb/316813)
2.  [最小化视图状态-在 asp.net 4.0 中被 `EnableViewState` 和 `ViewStateMode` 混淆](https://stackoverflow.com/questions/5485850/minimizing-viewstate-confused-by-enableviewstate-and-viewstatemode-in-asp-n)
3.  [EnableViewState 在 DropDownList 中不起作用](https://stackoverflow.com/questions/11786981/enableviewstate-not-working-in-dropdownlist)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:05:22.270

当您**将整个页面的视图状态设置为关闭时，您无法为某些控件启用它。**！

另一种方法可以完成，启用页面，然后在每个分开的控件上关闭它，除了您希望保留的那个。

# android - isItemChecked 总是返回与在 onItemClickListener 中时应该返回的相反的结果？

> ID：15129747
> 
> 赞同：8
> 
> 时间：2013-02-28T07:20:27.773
> 
> 标签：android, android-listview, android-adapterview

我目前有一个`ListView`，它会激活's`ActionBar`中的 Contextual 。`ListView``OnItemLongClickListener`

我正在尝试通过单击它们来选择项目，但只有在上下文`ActionBar`启动时才能选择它们。

问题是，当我检查 时`isItemChecked()`，为了切换项目的选择状态，它总是返回与预期相反的结果。

这是我实现的方式`OnItemClickListener`：

```
list.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        if (mActionMode != null){
            list.setItemChecked(position, !list.isItemChecked(position));
        }
        else{
            list.setItemChecked(position, false);
        }

    }

}); 
```

**编辑：**这很奇怪..此代码*切换*选择状态：

```
list.setItemChecked(position, list.isItemChecked(position)); 
```

到底是怎么回事！？

**编辑2：**啊，看起来android会自动检查和取消选中每个项目......有没有办法改变这种行为并自己处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-22T07:12:49.533

这是`setItemChecked`方法的文档：设置指定位置的选中状态

在行中

```
list.setItemChecked(position, !list.isItemChecked(position)); 
```

您`isItemChecked`通过否定语句中的第二个争论明确地将其设置为与返回的相反

# php - LiveValidation - 有没有人使用多项选择？

> ID：15129750
> 
> 赞同：1
> 
> 时间：2013-02-28T07:20:45.427
> 
> 标签：php, html, client-side-validation, livevalidation

我正在使用服务器端 (PHP) 和客户端 (LiveValidation - [http://www.livevalidation.com/](http://www.livevalidation.com/) ) 验证的网站上工作。*除了*多个选择框外，我已经让 LiveValidation 与每个输入字段一起工作。这是代码的大致概念（我用通用名称替换了变量名称）：

```
<select name="array[]" id="array" multiple>
<option value="Val1" <?php if( @in_array( 'Val1', @$_POST['array'] ) ) { echo 'selected="selected"'; } ?>>Val1</option>
<option value="Val2" <?php if( @in_array( 'Val2', @$_POST['array'] ) ) { echo 'selected="selected"'; } ?>>Val2</option>
</select>
<script type="text/javascript">
var arr = new LiveValidation('array', { validMessage: ' ', wait: 500});
arr.add( Validate.Presence, { failureMessage: ' ' } );
arr.add( Validate.Exclusion, { within: [ "" ], failureMessage: ' ' } );
</script> 
```

现在，我已经尝试过使用`var arr = new LiveValidation('array'`并且`var arr = new LiveValidation('array[]'`没有改变功能（无论如何，我很确定 LiveValidation 使用的是 id 而不是名称）。任何人都知道为什么它不起作用？

另外，如果代码中的任何内容看起来真的不对，请随时告诉我，因为我对 Web 开发还很陌生。我很好地接受建设性的批评。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:24:31.313

什么是`value"Val1"`？？？

它应该是

```
<option value="Val1" <?php if( @in_array( 'Val1', @$_POST['array'] ) ) { echo 'selected="selected"'; } ?>>Val1</option> 
```

# ruby-on-rails - withings api认证

> ID：15129751
> 
> 赞同：2
> 
> 时间：2013-02-28T07:20:48.330
> 
> 标签：ruby-on-rails, api, authentication, oauth

我正在尝试使用 withings api 进行身份验证。我已经正确获取了消费者密钥和秘密，并且能够访问应用程序页面，并且我还可以使用 api 进行身份验证。

问题是它没有回来，而是显示 404 错误：找不到页面。我已经多次交叉检查回调 url。

这是[网址](http://oauth.withings.com/account/authorize?oauth_callback=http%3A%2F%2F127.0.0.1%3A3000%2Fauth%2Fwithings%2Fcallback&oauth_token=3659f7e3c3eccbfc6990fe5f194d4c947783b1544755c6147f380813231)。

这是我要验证的代码：[Documentation](http://www.withings.com/en/api/oauthguide#registration)，[Gem1](https://github.com/simplificator/simplificator-withings)，[Gem2](https://github.com/webmonarch/withings-api)。

我想让用户回到我的应用程序。

```
@callback_url = 'http://127.0.0.1:3000/auth/withings/callback'
    @consumer = OAuth::Consumer.new(WITHINGS_KEY, WITHINGS_SECRET, {
        :site => 'https://oauth.withings.com',
        :request_token_path => '/account/request_token',
        :access_token_path => '/account/access_token',
        :authorize_path => '/account/authorize'
    })
    @request_token = @consumer.get_request_token(:oauth_callback => @callback_url)
    session[:request_token] = @request_token
    redirect_to @request_token.authorize_url(:oauth_callback => @callback_url) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:04:03.987

好。我认为，您不应该使用第三方库，因为

```
@request_token.authorize_url(:oauth_callback => @callback_url) 
```

返回不正确的网址。

尝试自己实现 OAuth。

1) 对字符串使用 HMAC-SHA1 算法：

```
GET&https%3A%2F%2Foauth.withings.com%2Faccount%2Frequest_token&oauth_callback%3Dhttp%3A%2F%2F127.0.0.1%3A3000%2Fauth%2Fwithings%2Fcallback%26oauth_consumer_key%3D{WITHINGS KEY}%26oauth_nonce%3D{RANDOM STRING}%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D{CURRENT TIME}%26oauth_version%3D1.0 
```

该字符串包含 3 个部分：{METHOD} + "&" + {ENCODED REQUEST URL} + "&" + {ENCODED REQUEST QUERY PART}

签名密钥：{WITHINGS SECRET}+"&"

结果编码这个符号。

2) 向 URL 发送请求：

```
https://oauth.withings.com/account/request_token?oauth_callback=http%3A%2F%2F127.0.0.1%3A3000%2Fauth%2Fwithings%2Fcallback&oauth_consumer_key={WITHINGS KEY}&oauth_nonce={NONCE FROM STEP 1}&oauth_signature={RESULT OF STEP 1}&oauth_signature_method=HMAC-SHA1&oauth_timestamp={TIMESTAMP FROM STEP 1}&oauth_version=1.0 
```

3) 解析响应体。获取 OAUTH TOKEN 和 OAUTH SECRET。

4) 对字符串使用 HMAC-SHA1 算法：

```
GET&https%3A%2F%2Foauth.withings.com%2Faccount%2Fauthorize&oauth_callback%3Dhttp%3A%2F%2F127.0.0.1%3A3000%2Fauth%2Fwithings%2Fcallback%26oauth_consumer_key%3D{SECRET KEY}%26oauth_nonce%3D{RANDOM STRING}%26oauth_signature_method%3DHMAC-SHA1%26oauth_token%3D{OAUTH TOKEN}%26oauth_timestamp%3D{CURRENT TIME}%26oauth_version%3D1.0 
```

签名密钥：{WITHINGS SECRET}+"&" + {OAUTH SECRET}

结果编码这个符号。

5) 将用户重定向到 URL：

```
https://oauth.withings.com/account/rauthorize?oauth_callback=http%3A%2F%2F127.0.0.1%3A3000%2Fauth%2Fwithings%2Fcallback&oauth_consumer_key={WITHINGS KEY}&oauth_nonce={NONCE FROM STEP 4}&oauth_signature={RESULT OF STEP 4}&oauth_signature_method=HMAC-SHA1&oauth_token={OAUTH TOKEN}&oauth_timestamp={TIMESTAMP FROM STEP 4}&oauth_version=1.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:04:44.477

示例链接中缺少 oauth_consumer_key、oauth_signature 和其他 oauth 字段。

# javascript - 检查 javascript 对象是否包含属性，同时忽略属性的大小写

> ID：15129753
> 
> 赞同：1
> 
> 时间：2013-02-28T07:20:54.787
> 
> 标签：javascript, extjs4.1

我正在使用以下代码从查询字符串形成一个对象

```
var parameters = Ext.urlDecode(urlParts[1]); 
```

我知道参数包含一个名为“OneTwo”的属性，但我不确定这种情况。我想在忽略大小写的同时检查“参数”的属性。

因此 parameters.hasOwnProperty('oneTwo') 或如此 parameters.hasOwnProperty('OneTwo') 或如此 parameters.hasOwnProperty('ONETWO') 或如此 parameters.hasOwnProperty('oNeTwo') 应返回 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:25:16.407

尝试使用 for in 循环

```
for (var prop in parameters){
    if (prop.toLowerCase() == 'onetwo'){
        alert('yay');
        break;
    }
} 
```

# kendo-ui - 如何在工具提示中显示带有秒和分钟的日期

> ID：15129754
> 
> 赞同：0
> 
> 时间：2013-02-28T07:20:56.380
> 
> 标签：kendo-ui

```
I have a doubt in Kendo chart tool tip .That is how to display the date  with time format .I have a field    time: `2013-02-13 16:58:07`, 
```

像这样的东西，所以当我在工具提示模板中阅读时，我将该字段称为

> 工具提示：{可见：true，模板：' **#= category #**
> ，字体：'11px Trebuchet MS'}

在工具提示中，它显示为**fri feb 01 2013 00:00:00 gmt+0530（印度标准时间）****

如何更改它并仅 `2013-02-13 16:58:07`使用远程数据显示

```
I used dataitem in local data it was working fine but with remote data i am getting as undefined.
tooltip: {
                            visible: true,
                            format: "{0}",
                            template: 'DATE:#= dataItem.time<br/>'

                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:44:06.967

问题是时间格式，这是来自 ww3c：

```
var d=new Date();
var n=d.toISOString(); 
```

这是结果：

```
2013-02-28T07:41:04.188Z 
```

也尝试阅读：http: [//blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

# clojure - 在clojure中将字符串转换为日期

> ID：15129760
> 
> 赞同：5
> 
> 时间：2013-02-28T07:21:20.573
> 
> 标签：clojure

我有以下格式的字符串`"2013-02-20T17:24:33Z"`和`"Mon Feb 25 02:42:27 +0000 2013"`.

有没有一种快速的方法可以将它们转换为日期时间格式，以便可以测试它们的相等性和/或排序。

clj-time 确实允许我使用这种格式 `(date-time 1986 10 14 4 3 27 456)`。然而，为了实现这一点，我将不得不解析上面的两个字符串。上述字符串是标准格式，有没有办法直接将它们转换为日期时间对象？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T11:42:58.693

clj-time 定义了标准格式化程序，请参阅`clj-time.format/show-formatters`，但就 clj-time 而言，您的第二种格式不是“标准”格式（尽管它看起来确实接近 rfc822）。您可以创建自定义格式化程序...

```
(use 'clj-time.format)

(parse (formatters :date-time-no-ms) "2013-02-20T17:24:33Z")
#<DateTime 2013-02-20T17:24:33.000Z>

(parse (formatter "E MMM dd hh:mm:ss Z YYYY") "Mon Feb 25 02:42:27 +0000 2013" )
#<DateTime 2013-02-25T02:42:27.000Z>

(show-formatters)
:basic-date                             20130228
:basic-date-time                        20130228T114047.213Z
:basic-date-time-no-ms                  20130228T114047Z
:basic-ordinal-date                     2013059
:basic-ordinal-date-time                2013059T114047.213Z
:basic-ordinal-date-time-no-ms          2013059T114047Z
:basic-t-time                           T114047.213Z
:basic-t-time-no-ms                     T114047Z
:basic-time                             114047.213Z
:basic-time-no-ms                       114047Z
:basic-week-date                        2013W094
:basic-week-date-time                   2013W094T114047.213Z
:basic-week-date-time-no-ms             2013W094T114047Z
:date                                   2013-02-28
:date-hour                              2013-02-28T11
:date-hour-minute                       2013-02-28T11:40
:date-hour-minute-second                2013-02-28T11:40:47
:date-hour-minute-second-fraction       2013-02-28T11:40:47.213
:date-hour-minute-second-ms             2013-02-28T11:40:47.213
:date-time                              2013-02-28T11:40:47.213Z
:date-time-no-ms                        2013-02-28T11:40:47Z
:hour                                   11
:hour-minute                            11:40
:hour-minute-second                     11:40:47
:hour-minute-second-fraction            11:40:47.213
:hour-minute-second-ms                  11:40:47.213
:ordinal-date                           2013-059
:ordinal-date-time                      2013-059T11:40:47.213Z
:ordinal-date-time-no-ms                2013-059T11:40:47Z
:rfc822                                 Thu, 28 Feb 2013 11:40:47 +0000
:t-time                                 T11:40:47.213Z
:t-time-no-ms                           T11:40:47Z
:time                                   11:40:47.213Z
:time-no-ms                             11:40:47Z
:week-date                              2013-W09-4
:week-date-time                         2013-W09-4T11:40:47.213Z
:week-date-time-no-ms                   2013-W09-4T11:40:47Z
:weekyear                               2013
:weekyear-week                          2013-W09
:weekyear-week-day                      2013-W09-4
:year                                   2013
:year-month                             2013-02
:year-month-day                         2013-02-28 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:18:19.063

使用[SimpleDateFormat](https://stackoverflow.com/questions/999172/how-to-parse-date-in-java)。

```
(let [input "Mon Feb 25 02:42:27 +0000 2013"
      fmt (java.text.SimpleDateFormat. "EEE MMM dd HH:mm:ss zzz yyyy")]
  (.parse fmt input)) 
```

请记住，解析月份和工作日的名称需要适当设置语言环境。

作为旁注，您问题中的第一个日期格式是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)。

# sql - 使用 SSIS ExecuteSQLTask 控件将数据从 OLEDB 导出到 Excel

> ID：15129765
> 
> 赞同：0
> 
> 时间：2013-02-28T07:21:37.563
> 
> 标签：sql, sql-server-2005, ssis

我想使用 EXEcute SQL Task 将 OLEDB（SQL Server）导出到 Excel，我给出了一个带有 where 子句的选择查询......

我想输出查询将转到 Excel 表

我在其中使用了 EXecuteSQL Task，连接、ConnectionType、SqlStatement..

我不知道下一个级别以及将使用什么控制和转换..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:36:08.083

你不想在你的控制流中做这些事情。需要的是`Data Flow Task`，将其中一个拖到您的控制流上并双击它以转到数据流。

在数据流上，您可以使用`OLE DB Source`并查询整个表/视图或输入您的选择查询。然后也使用 an`Excel Destination`来写入 OLE DB Source 的输出。

# java - 修改密码的函数

> ID：15129766
> 
> 赞同：1
> 
> 时间：2013-02-28T07:21:44.950
> 
> 标签：java, algorithm, backbone.js, architecture

我是网络编程的初学者，我需要像在社交网络中一样创建更改密码的功能。我是第一次做，不知道怎么做。我不知道如何创建架构。我在用户端使用**backbone.js**，我将创建 *userModel*（这是主干模型）。在服务器端我使用**Java**。我有一个想法：向 UserClass（这是 java 类）添加名为的新字段

```
@JsonIgnore
String oldPassword;

@JsonIgnore
String newPassword; 
```

*JsonIgnore*使字段在用户端不可见。我将从用户端发送带有*userModel*的字段，所以我检查服务器端。我想，这个想法并不好。如果您知道任何方法，请告诉我！

**编辑**

我知道如何制作html-form。我不知道如何将文件发送到服务器。如果我这样做：

```
var val1 // old_pass
var val2 // new_pass
this.model.save({password: val1,new_password: val2}); 
```

然后model密码改成val1，不正确，用户侧不要设置密码，因为用户侧没有model密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:54:25.503

我不知道您的服务器身份验证过程是如何工作的，但也许您可以尝试这样的事情。创建一个带有`user model`内部的新视图以编辑用户属性。在该视图内呈现一个显示用户属性（包括密码）的表单。在表单上，​​用户将能够更改他的信息。有一个名为“保存”或类似的按钮来存储更改。单击按钮时，创建一个从表单中获取值并使用模型`save`方法的函数。此方法使 Backbone 将 PUT 命令运行回服务器。在服务器上，您应该能够处理此请求并更改密码。您可以编写一个非常简单的函数来保存视图中的更改，如下所示：

```
changePassword = function() {
 var attributes;
 attributes = {
  password: $('#password').val(),
  confirm_password: $('#confirm_password').val()
 };
 this.model.save(attributes);
}; 
```

此函数将创建一个填充密码字段的属性对象，然后将其发送回服务器。如果您想进一步了解该`save`方法的工作原理，您应该查看[Backbone 文档](http://backbonejs.org/#Model-save)。希望这可以帮助！

# c# - 一个要列出的列数据表

> ID：15129770
> 
> 赞同：34
> 
> 时间：2013-02-28T07:21:56.370
> 
> 标签：c#, linq

我有一个`datatable`只包含一列，所有项目都是字符串。例如，如何将其转换为`List<string>`使用 LINQ？

我试过：

```
DataRow[] rows = dtusers.Select();
var qq = from RowCollection in rows
         select new { UserCode = LibStatic.ToStr(RowCollection["UserCode"]) };

List<string> users = new List<string>();
users = qq.Cast<string>().ToList(); 
```

有一条总是有效的捷径：

```
foreach (DataRow dr in dtusers.Rows)
{
    users.Add(dr[0].ToString());
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-28T07:23:41.300

您可以使用[LINQ 查询](http://msdn.microsoft.com/en-us/library/bb552415.aspx)来做到这一点。

```
List<string> list = dtusers.AsEnumerable()
                           .Select(r=> r.Field<string>("UserCode"))
                           .ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-24T08:25:27.830

你可以试试这段代码

```
List<string> list = dt.Rows.OfType<DataRow>().Select(dr => (string)dr["ColumnName"]).ToList(); 
```

# jakarta-mail - JavaMail：FolderClosedException 频繁出现

> ID：15129772
> 
> 赞同：2
> 
> 时间：2013-02-28T07:22:03.743
> 
> 标签：jakarta-mail

我正在使用 java 邮件与 gmail 连接，并且我正在为所有操作保留一个商店。（存储设置为静态。）。并且 IMAPFolder 实例附加了 imap 侦听器。因此文件夹始终保持打开状态。（任何时候都不会调用文件夹关闭）但是在几分钟后运行时，我得到了 FolderClosedException。出现异常后，虽然可以重新打开文件夹，但无法再次发出 idle() 命令，这将导致 NullPointerException。

保持文件夹始终打开有什么问题吗？

提前致谢。

==================================================== ==================

[编辑] 在这里我粘贴我正在做 POC 的实际代码。NullPointerException 在我重新连接商店后检查 .isConnected() 时出现。下面是 Thread 的 run 方法，它向 store 发送 idle() 命令。

```
public void run() {
        while (true) {
            try {
                System.out.println("Checking connectivity...");

                if (store.isConnected()) {
                    store.idle();
                    System.out.println("IDLE send...");
                } else {
                    Thread.sleep(5000);
                    System.out.println("Tring to connect...");

                    //Trying to reconnect to the store.
                    store.connect();
                    System.out.println("Previous store connected again");
                }
            } catch (InterruptedException ex) {
                System.out.println("InterruptedException...");
            } catch (StoreClosedException ex) {
                System.out.println("StoreClosedException...");
            } catch (MessagingException ex) {
                System.out.println("MessagingException...");
            }
        }
    } 
```

这是堆栈跟踪：

```
Exception in thread "Thread-1" java.lang.NullPointerException
at com.sun.mail.imap.IMAPStore.waitIfIdle(IMAPStore.java:1881)
at com.sun.mail.imap.IMAPStore.getStoreProtocol(IMAPStore.java:946)
at com.sun.mail.imap.IMAPStore.isConnected(IMAPStore.java:1347)
at pocworks.POCWorks1$IDLEThread.run(POCWorks1.java:125) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:58:44.423

通常，邮件服务器不希望您在不使用它们时保持连接打开。典型的 IMAP 服务器会在未使用的连接超时前给您 30 分钟；Gmail 可能更具侵略性。

# c - 共享内存：从 VB6 向第三方 DLL 发送消息，从传递的结构中检索数据？

> ID：15129775
> 
> 赞同：0
> 
> 时间：2013-02-28T07:22:07.447
> 
> 标签：c, api, sdk, shared-memory, sendmessage

SDK 告诉我，要检索某些数据，我的应用程序需要使用 SendMessage 将指针传递给 C 结构，然后从结构中检索数据。我的应用程序是一个完全独立的过程。据我所知，唯一的方法是使用内存映射文件。

这是正确的还是有更好的方法？

如果它是正确的，我应该传递什么作为指针？我已经浏览了[http://support.microsoft.com/kb/165942](http://support.microsoft.com/kb/165942)上的代码，只是看不到我应该通过什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:31:10.780

您可以在 SDK 中发布信息或检查示例。

但我认为您需要使用您所说的 WM_COPYDATA 消息

有关详细信息，请参见此处[http://msdn.microsoft.com/en-us/library/windows/desktop/ms649011%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649011%28v=vs.85%29.aspx)

# javascript - Knockout JS 中的模型

> ID：15129777
> 
> 赞同：1
> 
> 时间：2013-02-28T07:22:18.507
> 
> 标签：javascript, jquery, knockout.js, javascript-framework

在 Knockout.js MVVM 框架中，模型是与 ViewModel 分开还是没有单独的模型，ViewModel 完成表示域数据（模型）的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:08:21.017

KO 为您提供 ViewModel 并由您决定使用什么作为模型。KO 还能够在视图和视图模型之间创建双向绑定。它不做任何其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:03:47.970

KO 中的模型是 json 数据对象（就像 f0x 指出没有 JSON 对象这样的东西，但我想你明白了）这可以直接与敲除一起使用，将数据与 DOM 粘合在一起。但在大多数情况下，需要 ViewModel 来向模型添加额外的功能（与 GUI 更紧密耦合的功能，例如使用 observables 的双向绑定）。

# javascript - 如何更新本地数组中的单个值

> ID：15129778
> 
> 赞同：0
> 
> 时间：2013-02-28T07:22:33.420
> 
> 标签：javascript, arrays, local

我一直听说全局数组和变量不好。如何将值保存在本地数组中并在以后访问它们，因为当调用包含本地数组的函数时，数组会被覆盖。

# php - $_POST[$variable] 不起作用

> ID：15129780
> 
> 赞同：0
> 
> 时间：2013-02-28T07:22:52.673
> 
> 标签：php, post

对于输入表单，我需要随机输入名称和 ID

我创建了随机值 $token_hash = random

然后输入字段

```
 <input type="hidden" name="' .$token_hash .'" id="' .$token_hash .'" value="some_value"> 
```

上面的下一个输入表单是用于检查从表单中获取什么值的 php 代码

```
 echo $_POST[$token_hash] .' $_POST[$token_hash]<br>'; 
```

问题是`$_POST[$token_hash]`回显空白值（无值）....

我也试过`$_POST[' .$token_hash .']`但不工作。

其他`$_POST`作品，但它们就像`$_POST['some_value']`

* * *

似乎终于得到解决方案。不明白为什么它以前不起作用。如果对别人有用。这是解决方案。

创建随机值 $token_hash = sha1(uniqid($time_when_form_submitted .'token' .$_SERVER["REMOTE_ADDR"]));

然后创建会话 $_SESSION['token_hash'] = $token_hash;

然后将会话传递给输入

```
echo '<input type="hidden" name="' .$_SESSION['token_hash'] .'" id="' .$_SESSION['token_hash'] .'" value="' .$_SESSION['token'] .'">' 
```

然后从输入中获取会话值。**此代码必须高于所有** previos $token_hash_from_input = $_SESSION['token_hash'];

然后用 $_POST[$token_hash_from_input]) 获取输入值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:28:24.393

您希望输入的名称为“token_hash”，值是您的随机值。

```
<input name="token_hash" value="<?php echo $token_hash; %>" type="hidden" /> 
```

现在您可以在表单提交时访问令牌哈希：

```
$token_hash = $_POST['token_hash']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:30:50.130

您需要像会话这样的东西来跨请求保留值，例如

```
session_start();
$_SESSION['token_hash'] = $token_hash; 
```

然后在下一页检索它

```
session_start();
$token_hash = $_SESSION['token_hash']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:32:38.570

@All 我假设提问者想要一个随机的帖子字段名称和值

* * *

请注意，`$token_hash`每个请求的值都会发生变化。除非您将该值保存在会话或数据库中，否则没有持久性。我不知道你到底想做什么，所以很难给出建议。

但是这个代码示例可能会展示如何访问随机`$_POST`索引：

```
<input type="hidden" name="token_<?php echo uniqid();?>" value="<?php uniqid()?>" /> 
```

然后使用 foreach 获取值：

```
foreach($_POST as $key => $value) {
    if(strpos($key, 'token_') !== FALSE) {
        echo 'the token is ' . $value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:30:27.177

由于您正在生成一个随机值，因此您不能指望 $_POST[$token_hash] 起作用。

当您发布表单时，您的 PHP 会再次随机生成您的 $token_hash 值。因此，您应该将随机生成的值放入“值”属性中。

```
 <input name="token_hash" value="<?php echo $token_hash; ?>" type="hidden" /> 
```

您可以在发布表单时使用 $_POST['token_hash'] 获取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:24:30.107

你需要这样做，

```
$_POST["token_hash"] 
```

如果`token_hash`真的发布了，你会得到一个

# ruby-on-rails - 从嵌套的哈希对象中检索数据

> ID：15129784
> 
> 赞同：2
> 
> 时间：2013-02-28T07:23:03.997
> 
> 标签：ruby-on-rails

我创建一个这样的表格

```
 @question = Question.new 
    3.times {@question.answers.build} 
```

如果它不验证，我将重新显示填充数据的表单。填充问题数据并不难

```
 @question = @user.questions.new(session[:question]) 
```

但是，我无法从答案模型（具有内容和链接字段）的会话哈希中获取嵌套值。这是行不通的。

```
 3.times {@question.answers.build(:content => session[:question][:answers_attributes][:content], :correctanswer => session[:question][:answers_attributes][:correctanswer]) } 
```

我认为这是因为哈希对象中的 0、1 和 2 迭代。例如，这是哈希对象的一个​​片段（如下所示）

```
"answers_attributes"=>{"0"=>{"content"=>"", 
```

但我不知道在构建问题答案时我会如何表示

```
 3.times {@question.answers.build(:content => session[:question][:answers_attributes][:content].... 
```

当我尝试构建时，我在尝试从哈希对象中提取数据时并不代表迭代。你能解释一下我将如何修改这一行以将参数传递给`question.answers.build`

这是哈希对象。

```
>    Parameters: {"utf8"=>"✓", "question"=>{"content"=>"Lick me",
> "link"=>"bab", "answers_attributes"=>{"0"=>{"content"=>"",
> "correctanswer"=>"0", "_destroy"=>"false"}, "1"=>{"content"=>"",
> "correctanswer"=>"1", "_destroy"=>"false"}, "2"=>{"content"=>"",
> "correctanswer"=>"0", "_destroy"=>"false"}}}, "commit"=>"Create
> Question"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:53:54.427

由于参数中有三组键/值，因此最好循环遍历参数并在每次迭代时构建 questions.answers，就像这样。这样，您可以通过传入键来表示嵌套哈希中的迭代。

```
@question = @user.questions.new(session[:question])
session[:question][:answers_attributes].each do |k,v|
        @question.answers.build(:content => session[:question][:answers_attributes][k][:content], :correctanswer => session[:question][:answers_attributes][k][:correctanswer])

       end 
```

# c# - 尝试使用 System.Net.Http.Post 时出现 C# 错误消息

> ID：15129787
> 
> 赞同：0
> 
> 时间：2013-02-28T07:23:09.693
> 
> 标签：c#

我正在开发 Windows 8 应用程序。当我尝试执行代码时，Visual Studio 2012 中出现错误消息“命名空间 'System.Net.Http' 中不存在类型或命名空间名称 'Post'（您是否缺少程序集引用？）”

```
byte[] response = System.Net.Http.Post
  (
      url: "someurl",
      contentType: "application/json",
      contentLength: 32,
      content: "pqpUserName=admin&password=test@123"
  ); 
```

代码来自 URL [.NET：Simplest way to send POST with data and read response](https://stackoverflow.com/questions/4088625/net-simplest-way-to-send-post-with-data-and-read-response/15129678#15129678)

. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:30:27.260

将命名空间添加`System.Net.Http.HttpMethod`到您的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:57:08.690

使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)：

```
var client = new HttpClient();

var pairs = new List<KeyValuePair<string, string>>
                {
                    new KeyValuePair<string, string>("pqpUserName", "admin"),
                    new KeyValuePair<string, string>("password", "test@123")
                };

var content = new FormUrlEncodedContent(pairs);

var response = client.PostAsync("yourURI", content).Result;

if (response.IsSuccessStatusCode)
{} 
```

# iphone - 在 ios 6 上仅在一个视图中启用横向

> ID：15129788
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:23:10.023
> 
> 标签：iphone, ios, ios5, ios6

```
-(NSUInteger)supportedInterfaceOrientations
{           
    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotate
{
    return NO;
} 
```

我只想在我的应用程序的一个视图中启用横向。其他视图必须仅支持纵向模式。但是对于 iOS 6，即使我使用的是 iOS 6 的最新方法，它也会自动旋转。期待正确的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:58:25.067

对于**仅纵向方向** ，请尝试以下方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotate {
    return FALSE;
} 
```

# android - 如何在android编程中定位附近的医院

> ID：15129789
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:23:12.673
> 
> 标签：android, google-maps, kml

正在创建一个显示附近医院的应用程序，所以如果你知道怎么做，我不能编程吗？我在那里搜索了我的问题，我得到了一个新概念“KML”。对此我无法理解..请给我回复..感谢您的回答，我正在寻找这个大约 1 周..请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:27:33.737

试试这个教程：[using-googles-places-api](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)和任何你遇到问题的地方都可以在评论中提问。

需要记住的几点：

*   为了使用 Google 的 Places API，您需要注册并获取 Google Map 的 API 密钥。
*   在教程中的 UrlSigner 类中，变量描述是：`keyString`=> 它是您的谷歌地图 api 密钥。`urlString`=> 它是您要使用 api 密钥签名的 url。
*   在代码中你会发现`inputKey`和`inputUrl`。这 2 个变量仅用于测试目的，您可以根据需要省略它们。可以直接写代码如下：

    `URL url = new URL(urlString);`

    `UrlSigner signer = new UrlSigner(keyString);`

    `String request = signer.signRequest(url.getPath(),url.getQuery());`

    `System.out.println("Signed URL :" + url.getProtocol() + "://" + url.getHost() + request);`

在 UrlSigner 类的主要方法中。

# uri - 使用 Uri 从文件加载歌曲 - XNA 4.0

> ID：15129790
> 
> 赞同：1
> 
> 时间：2013-02-28T07:23:14.457
> 
> 标签：uri, xna-4.0

我正在尝试从 Uri 加载一首歌曲以在我的游戏中使用。代码如下：

```
Uri uriStreaming = new Uri("file://E:/MySong.mp3");

Song song = Song.FromUri("Song Name", uriStreaming);

MediaPlayer.IsMuted = false;

MediaPlayer.Volume = 0.5f;

MediaPlayer.Play(song); 
```

当我进入游戏时，根本没有播放音频，尽管我完全没有错误。我也尝试过使用 mp3 的**http:/ 链接**，它工作正常，所以我不太确定这个问题。

任何修复的想法？

编辑：在进一步调查这个问题后，我发现是 ID3 标签导致了这个问题，**特别是如果它是 ID3v2.4**并且如果我使用工具删除它们，它可以正常工作。但是，我不能指望我的用户对他们所有的音频都这样做，那么有解决方法吗？

# java - 从 crontab 运行的 java 程序的日志结果 [权限被拒绝]

> ID：15129793
> 
> 赞同：0
> 
> 时间：2013-02-28T07:23:20.190
> 
> 标签：java, logging, crontab

我想运行从 crontab 调用的简单 java 程序。因为我想知道 crontab 是否正常运行，所以我想将结果打印为日志文件。

目前，我不知道 crontab 是否正确运行了我的 java 程序。

示例 Java 程序：

```
public static void main(String[] args) {
    Calendar c = Calendar.getInstance();
    System.out.println("hello" + c.getTime());
} 
```

样本 sh：

```
#!/bin/bash
JAVA_HOME=/usr/java/jre1.6.0_31/
export JAVA_HOME;

for file in /home/vas/servers/tomcat/myTest.jar
do
       CLASSPATH=$file:$CLASSPATH
done
export CLASSPATH

$JAVA_HOME/bin/java myTest 
```

crontab：

```
* * * * * /home/vas/servers/tomcat/myTest.sh > /home/vas/servers/tomcat/myTest.log 2>&1 
```

PS：myTest.java、myTest.sh都位于/home/vas/servers/tomcat/下

编辑：包括/在家里。

==================================================== =======

现在我可以看到日志文件，但上面写着 [ /bin/sh: /home/vas/servers/tomcat/myTest.sh: Permission denied ]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:27:21.283

以下是*覆盖*日志文件的方法：

```
* * * * * /home/vas/servers/tomcat/myTest.sh > home/vas/servers/tomcat/myTest.log 
```

vs 如何*附加*到日志文件：

```
* * * * * /home/vas/servers/tomcat/myTest.sh >> /home/vas/servers/tomcat/myTest.log 
```

（编辑，根据您的评论）

你可以尝试这样的事情：

```
chmod 771 /home/vas/servers/tomcat/myTest.sh 
```

然后`ls -al /home/vas/servers/tomcat/myTest.sh`确保您已正确设置权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:27:04.947

在 crontab 中更改并使用绝对路径`>`来记录文件，如下所示：`>>`

```
* * * * * /home/vas/servers/tomcat/myTest.sh >> /home/vas/servers/tomcat/myTest.log 2>&1 
```

`exec`在从 shell 脚本运行 Java 时，您也可以更好地使用：

```
exec $JAVA_HOME/bin/java myTest 
```

# objective-c - Objective-C 中的 _variable 和 self.variable 有什么区别？

> ID：15129795
> 
> 赞同：6
> 
> 时间：2013-02-28T07:23:22.780
> 
> 标签：objective-c, variables, ios6

我对 Objective C 和 iOS 很陌生，目前正在尝试使用 iOS 6 SDK 学习应用程序开发。我真的无法理解的一个概念是在 .m 文件中访问时“_variable”和“self.variable”之间的区别。他们是一样的吗？还是不一样？

以下是一个简单的示例

我的类.h

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject
@property (strong, nonatomic) NSString *myName;
@end 
```

我的班级.m

```
#import "MyClass.h"

@interface MyClass ()
@property (nonatomic, strong) NSString *anotherName; 
@end

@implementation MyClass
- (void) myFunction {
    _myName = @"Ares";
    self.myName = @"Ares";

    _anotherName = @"Michael";
    self.anotherName = @"Michael";
}
@end 
```

那么上述设置变量的实现有区别吗？变量“myName”是公共的，而“anotherName”是私有的。

将不胜感激任何投入。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T07:30:40.750

不同之处在于：

变量名`_`是实例变量。

`self.variable`在您的对象上调用 getter 方法。

在您的示例中，实例变量是自动生成的，您也不需要综合属性。

如果您不使用 ARC-，您的示例中真正重要的区别就会发挥作用-

`self.variable``retain`如果您使用或`strong` `_variable`根本不使用内存管理标记属性，将为您保留一个对象

# html - 随机改变颜色

> ID：15129796
> 
> 赞同：0
> 
> 时间：2013-02-28T07:23:26.000
> 
> 标签：html, css

我有一个段落或 div。

HTML

```
<p style="color:red;">Change color randomly</p> 
```

此代码将显示

![在此处输入图像描述](../Images/0f03f1c90e8db2c98dfd1293987b7ea6.png)

但我想要这种类型的输出使用 CSS 任何想法

![在此处输入图像描述](../Images/040b445a7e38afdc826e4e9f89daba0a.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:37:02.443

你不能用纯 CSS 来做到这一点，因为它真的很随机​​，你需要一些 JavaScript。我创建了一个小演示，它也使用 jQuery，每次重新加载页面时它都会生成不同的颜色。

**HTML**

```
<p>Change color randomly</p> 
```

**JavaScript**

```
// Define some colours
var colours = [
    "red",
    "orange",
    "yellow",
    "green",
    "blue",
    "purple"    
];

// Retrieve the words
var text = $("p").html().split(" ");

// Empty the elment
$("p").empty();

// Iterate over the words
$.each(text, function(i, word) {
    if(i != text.length) {
        word += " "; // Add space after word 
    }

     // Get random color
    var colourIndex = Math.floor(Math.random() * colours.length);

    $("<span>")
        .html(word)
        .css("color", colours[colourIndex])
        .appendTo($("p"));
}); 
```

[JSF](http://jsfiddle.net/mmHpt/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:27:30.070

有直接的伪类来设置样式`first-letter`但不是第一个单词，因此您需要添加任何内联元素来设置样式。

`nth-child`与`span`标签一起使用

```
<p style="color:red;"><span>Change</span> color <span>randomly</span></p>

span:nth-child(1){
    color:green
}
span:nth-child(2){
    color:violet
} 
```

**[演示](http://jsfiddle.net/EVKJ2/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:27:53.850

纯 CSS 是不可能的。您必须使用 Javascript 来编写此功能。这是一个可能可以帮助您入门的链接：http: [//paulirish.com/2009/random-hex-color-code-snippets/](http://paulirish.com/2009/random-hex-color-code-snippets/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:27:08.353

下面的css会做到这一点。

```
<p style="color:red;"><span style="color:#909">Change</span> color <span style="color:blue">randomly</span></p> 
```

# logging - 闭包编译器

> ID：15129798
> 
> 赞同：1
> 
> 时间：2013-02-28T07:23:27.673
> 
> 标签：logging, compiler-construction, closures

我想将命令提示符中的错误复制到 txt 文件中。要将编译后的代码输出到文件中，我们使用 --js_output_file abc.js 。如何为记录错误做同样的事情。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:32:27.563

您可以使用 closrecomplier.exe --js_output_file abc.js >errors.log

# java - 使用java阅读pdf

> ID：15129806
> 
> 赞同：0
> 
> 时间：2013-02-28T07:23:58.467
> 
> 标签：java, heap-memory, itextpdf

我在使用**itextpdf.jar**读取 Java 中的 PDF 文件内容时遇到问题，

如果我阅读一个**小尺寸（5-15MB）的 PDF 文件**意味着它运行良好，则可以阅读它的内容

但是当我阅读**大尺寸（200MB）PDF文件**时意味着它显示**运行时异常**，如下所示

```
enter code hereException in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2786)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
at com.itextpdf.text.pdf.RandomAccessFileOrArray.InputStreamToArray(RandomAccessFileOrArray.java:213)
at com.itextpdf.text.pdf.RandomAccessFileOrArray.<init>(RandomAccessFileOrArray.java:203)
at com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:235)
at com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:246)
at general.FileStreamClose.main(FileStreamClose.java:28) 
```

Java 结果：1`enter code here`

任何解决方案，如何增加tomcat中的堆大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:40:23.270

您可以调整 Java 应用程序运行时设置：

将堆大小最大化为高值，`-Xmx`例如 500M

调整`-XX:MaxHeapFreeRatio`并`-XX:MinHeapFreeRatio`确保在堆减少时消耗大量内存时应用程序不会变得无响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:50:20.450

要增加 tomcat 的堆大小，您必须设置 evnirenment 变量`JAVA_OPTS`并让它包含`-Xmx`例如选项`-Xmx512m`

这是一个示例脚本，您可以如何运行 tomcat

```
@echo off
set JAVA_HOME=C:\Program Files\Java\jdk1.6.0_33
set CATALINA_HOME=C:\Program Files\apache-tomcat-7.0
set JAVA_OPTS=-XX:MaxPermSize=128m -Xmx512m -server
call %CATALINA_HOME%\bin\catalina.bat run 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:59:36.207

有关其他信息，据我所知，如果您的机器是 32 位，则增加 xmx 和 xms 堆大小将限制在 1k++ 左右。如果您需要更多，则需要安装 java 64 位（当然在 64 机器和 64 操作系统中）。

# regex - 用于从字符串中提取日期的正则表达式

> ID：15129807
> 
> 赞同：8
> 
> 时间：2013-02-28T07:24:08.387
> 
> 标签：regex

我有以下日期字符串 -`"2013-02-20T17:24:33Z"`

我想写一个正则表达式来提取日期部分`"2013-02-20"`。我怎么做？任何帮助将不胜感激。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T07:30:21.200

您可以为此使用捕获组。

```
/(\d{4}-\d{2}-\d{1,2}).*/ 
```

使用`$1`，您可以获得您想要的部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T07:26:38.117

好直接的方法是`\d\d\d\d-\d\d-\d\d`，但你也可以使用量词使它看起来更好`\d{4}-\d{2}-\d{2}`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T07:28:11.557

只需搜索第一个`T`并使用子字符串。我假设你总是得到一个格式良好的日期字符串。

如果不能保证日期字符串有效，您可以使用任何日期相关的库来解析和验证输入（验证包括日历逻辑，正则表达式无法实现），并重新格式化输出。

没有示例代码，因为你没有提到语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:37:34.700

使用子串

```
 string date = "2013-02-20T17:24:33Z";
        string h = date.Substring(0, 10); 
```

# android - 在android中使用Button onclick查找数组位置

> ID：15129808
> 
> 赞同：1
> 
> 时间：2013-02-28T07:24:09.700
> 
> 标签：android

我的阵列

```
String array1[] = menuname.toArray(new String[menuname.size()]);
array2 = menuid.toArray(new String[menuid.size()]); 
```

我的动态按钮编码

```
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.l);
        List<Button> list = new ArrayList<Button>();
        for (int i = 1; i < array1.length; i++) {
            LinearLayout l = new LinearLayout(this);
            l.setOrientation(LinearLayout.HORIZONTAL);

            button.setText(String.valueOf(i));
            button.setText(" " + array1[i]);
            button.setId(i);
            button.setWidth(180);
            button.setHeight(60);

            button.setTextColor(Color.BLUE);
            button.setTypeface(Typeface.SERIF, Typeface.BOLD);
            l.addView(button);
            linearLayout.addView(l);// if you want you can layout params
                                    // linearlayout
            list.add(button);

        } 
```

`array1[]`包含`button`...的名称并`array2[]`包含按钮的 id ....我想为动态按钮设置 id 和名称..如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:35:54.153

也许使用`button.setText(array2[i] + " " + array1[i]);`？是你想要的其他东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:43:31.113

你可以`id`在运行时设置你的按钮并设置`onClickListener`它，当你点击按钮时你会得到它`id`。

```
if(nameArray.length()==idArray.length())
    {
    LinearLayout linearLayout = (LinearLayout) findViewById(R.id.menuLayout);
    List<Button> buttonList = new ArrayList<Button>();
    for (int i = 1; i < nameArray.length; i++) {

        btnMenu.setText(String.valueOf(i));
        btnMenu.setText(" " + nameArray[i]);
        btnMenu.setId(idArray[i]);
        btnMenu.setWidth(180);
        btnMenu.setHeight(60);

        btnMenu.setTextColor(Color.BLUE);
        btnMenu.setTypeface(Typeface.SERIF, Typeface.BOLD);

        btnMenu.setOnClickListener(this);

        linearLayout.addView(btnMenu);
        list.add(button);
    }
 }

    public void onClick(View view) {
        super.onClick(view);
        switch (view.getId()) {
        case idArray[0]:
            // button with id "idArray[0]" is clicked
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:55:57.717

您可以使用在代码中为按钮设置 id

```
 button.setId(array2[i]); 
```

# .net - .NET 的硬件 AES 支持

> ID：15129820
> 
> 赞同：5
> 
> 时间：2013-02-28T07:25:12.120
> 
> 标签：.net, aes, hardware-acceleration

这是一个简单的。AES 的 .NET 实现是否支持硬件加密/解密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T11:48:48.653

我找不到太多信息，但这个[问题](https://stackoverflow.com/q/8140221/6124)的[答案](https://stackoverflow.com/a/8155774/6124)意味着[AesCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider%28v=vs.110%29.aspx)将在可用时使用[AES-NI](http://en.wikipedia.org/wiki/AES_instruction_set)。

# regex - 如何为此网址编写正则表达式？

> ID：15129826
> 
> 赞同：0
> 
> 时间：2013-02-28T07:25:27.830
> 
> 标签：regex

初始网址为：
[http ://www.site.com/ad/a32-de21-ghi-30/99-134565.html](http://www.site.com/ad/a32-de21-ghi-30/99-134565.html)
[http://www.site.com/ad/a10-b20-c99/99- 143.html](http://www.site.com/ad/a10-b20-c99/99-143.html)
[http://www.site.com/ad/1tb-bed-h442/99-6425.html](http://www.site.com/ad/1tb-bed-h442/99-6425.html)

我想保留域名、“广告”和“99-”
我想不通, 我想出了这个 Reg

```
http://www.site.com/ad/\w+/50-\d+\.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:34:18.617

`http://www\.site\.com/ad/[\w-]+/99-[0-9]+\.html`会工作。

我发现[Rubular](http://www.rubular.com)是一个很好的正则表达式测试页面。

# meteor - Meteor：如何判断数据库何时准备就绪？

> ID：15129827
> 
> 赞同：14
> 
> 时间：2013-02-28T07:25:29.103
> 
> 标签：meteor

我想在页面加载后尽快执行 Meteor 集合查询。我尝试的第一件事是这样的：

```
Games = new Meteor.Collection("games");
if (Meteor.isClient) {
  Meteor.startup(function() {
    console.log(Games.findOne({}));
  }); 
} 
```

但是，这不起作用（它打印“未定义”）。当从 JavaScript 控制台调用时，相同的查询会在几秒钟后工作。我假设在数据库准备好之前存在某种滞后。那么我怎么知道这个查询什么时候会成功呢？

OSX 10.8 和 Chrome 25 下的 Meteor 版本 0.5.7 (7b1bf062b9)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T09:31:36.537

您应该首先`publish`从服务器获取数据。

```
if(Meteor.isServer) {
    Meteor.publish('default_db_data', function(){
        return Games.find({});
    });
} 
```

在客户端，仅在从服务器加载数据后执行集合查询。这可以通过在`subscribe`调用中使用响应式会话来完成。

```
if (Meteor.isClient) {
  Meteor.startup(function() {
     Session.set('data_loaded', false); 
  }); 

  Meteor.subscribe('default_db_data', function(){
     //Set the reactive session as true to indicate that the data have been loaded
     Session.set('data_loaded', true); 
  });
} 
```

现在，当您执行集合查询时，您可以检查数据是否已加载：

```
if(Session.get('data_loaded')){
     Games.find({});
} 
```

**注意：**删除`autopublish`包，默认情况下它会将您的所有数据发布到客户端并且是不好的做法。

要删除它，`$ meteor remove autopublish`请从根项目目录对每个项目执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-27T15:29:13.543

使用`DDP._allSubscriptionsReady()`（流星 0.7）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-05T19:50:56.943

从 Meteor 1.0.4 开始，有一个助手可以准确地告诉您特定订阅何时准备就绪：`Template.instance().subscriptionsReady()`.

由于这个问题是重复的，请检查我在原始问题中的回答，[Displaying loader while meteor collection loading](https://stackoverflow.com/questions/12879762/displaying-loader-while-meteor-collection-loads/12880255#12880255)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-21T03:04:20.077

您还可以进行模板级订阅：

```
Template.name.onCreated(function(){
var self = this;

this.autorun(function(){

const db = this.subscribe('publicationname', [,args]);

if(db.isReady()){
 "You'll know it's ready here" .. do what you need.
 }
 });
}) 
```

这也使得在模板内部更容易了解。您可以调用 **{{#if Template.subscriptionsReady}} {{else}} 加载屏幕可能是
{{/if}}**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:39:42.710

如果您知道您的 Games 集合永远不会为空，您可以检查最终返回结果的时间：

```
Meteor.autorun(function() {
    if(Games.findOne() && !Session.get("loaded")) {
        Session.set("loaded",true);

        //Its ready..
        console.log(Games.findOne({}));
    }
}); 
```

**您也可以在模板中使用它：**

客户端js：

```
Template.home.isReady = function() { return Session.get("loaded") }; 
```

html

```
<template name="home">
    {{#if isReady}}
        Yay! We're loaded!!
    {{else}}
        Hold an a second
    {{/if}}
</template> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-21T00:57:39.397

对于那些可能正在使用用户 ID 或存储在 Meteor.users 数据库中的用户信息的某些部分的人来说，这是另一个信息。当页面第一次加载 Meteor 订阅时，在后台继续进行，它本身可能不完整。因此，当您尝试连接到另一个数据库进行查询时，它不会提取信息。这是因为`Meteor.user()`仍然是 null 本身；

原因，如上所述，是因为实际的 Meteor 用户集合尚未通过拉取数据。

处理这种情况的简单方法。

`Meteor.status().connected`

这将返回 true 或 false，让您知道`Meteor.user`集合何时准备就绪。然后你就可以继续你的业务了。

我希望这对某人有所帮助，我正要拔出头发试图弄清楚如何检查状态。那是在弄清楚 Meteor 用户集合本身尚未加载之后。

# c# - 详细信息部分中没有数据时禁止页眉

> ID：15129833
> 
> 赞同：0
> 
> 时间：2013-02-28T07:26:04.170
> 
> 标签：c#, winforms, crystal-reports, crystal-reports-2008

我正在使用数据表来加载水晶报表的数据。根据用户在 DataGridview 中过滤的数据，单击 Print 将在 Report 中显示过滤后的数据。

一切都很好。我已经这样做了。当详细信息部分中没有数据时，我将使用抑制中的以下公式来抑制它。

```
Shared NumberVar PageofLastField;

If OnLastRecord then PageofLastField = PageNumber; 
```

在详细信息部分中没有数据的页眉部分中，抑制页眉。下面是使用的公式。

（参考[Crystal Reports - 如果页面有 0 条记录，则不显示页眉](https://stackoverflow.com/questions/3294027/crystal-reports-suppress-a-page-header-if-the-page-has-0-records)）

```
Shared NumberVar PageofLastField;

PageofLastField := PageofLastField;

if pageofLastfield <> 0 and PageNumber > PageofLastField
  THEN TRUE
ELSE FALSE 
```

下面是水晶报表的图片。![在此处输入图像描述](../Images/6eb7e9e49de1b829749ed3b0b8af76b8.png)

当我单击前端的打印按钮时。当详细信息部分中没有数据时，将显示页面标题。

下图是报告的第二页，其中没有记录并显示摘要。

![在此处输入图像描述](../Images/0de06be18c71bafd82522e05337ba234.png)

如果在标题部分，如果我使用以下公式

```
OnLastRecord AND Count({PaymentReportTable.InvID}) <> 1 
```

在第二页中，即使显示了记录，也不会显示页眉。我理解它，因为公式说明了一切。

![在此处输入图像描述](../Images/cd7476d2ab4054ab3e49cc297579f885.png)

我已经创建了大约 12 个 Crystal 报表，并且我在所有这些报表中都面临着同样的问题。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:06:09.423

我读了你的问题。告诉我当你不压制时会发生什么。

我认为您的页脚评估是因为它具有价值。

您是否尝试`OnLastRecord or {GROUP FIELD NAME} <> Next({GROUP FIELD NAME})`将此条件作为参考链接。

# asp.net-mvc - asp.net MVC ajax 方法未按正确顺序调用

> ID：15129836
> 
> 赞同：0
> 
> 时间：2013-02-28T07:26:31.063
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-2

我有一个 asp.net 应用程序，如果用户未通过身份验证，我想显示登录弹出窗口，如果用户已通过身份验证，则在同一页面上弹出成员区域。

我有这个控制器动作方法

```
 [ActionName("151LoginAPI")]
        public ActionResult NewCallRecording(string ID, string PSSWD, string ACCID, string PASSWDINT)
        {
....
....
...

return view();
} 
```

在 151API 视图中，我在 document.ready 函数中完成了此操作

```
 $.ajax({
                type: "POST",
                dataType: "json",
                url: "/recording/verifyUser",
                data: {
                    ID: $("#ID").val(),
                    PSSWD: $("#PSSWD").val(),
                    ACCID: $("#ACCID").val(),
                    PASSWDINT: $("#PASSWDINT").val()
                },
                success: function (data) {
                    if (data == "success") {

                        jQuery('#dialog-AddCallRecording').dialog({ closeOnEscape: false });

                        $(".ui-dialog-titlebar").hide();
                        $("#dialog-AddCallRecording").dialog({ dialogClass: 'transparent', modal: true });
                        $("#dialog-AddCallRecording").dialog("open");                     

                    }
                    else {
                        jQuery("#dialog-user-login").dialog('option', 'position', 'center');
                        jQuery("#dialog-user-login").dialog("open");
                    }
                }
            }); 
```

我已经定义了 verifyuser 并且它正在验证并显示正确的弹出窗口。

它工作正常，但问题是当我设置断点时。我看到 NewCallRecording 总是被击中。然后验证用户被击中。我想让它先检查 verifyuser ，然后在用户打开 /NewCallRecording 页面时点击 NewCallRecording actionmethod

请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:34:54.230

VerifyUser 调用是 ajax，NewCallRecording 是控制器动作。如果直接调用动作，它将在 Ajax 调用之前执行，因为 DOM 是由 actionresult 加载的，在这种情况下是 NewCallRedording..

在这种情况下，我认为您还需要进行服务器端验证，如果用户未通过验证，则将用户重定向到登录页面。

# actionscript-3 - AS3 鼠标事件

> ID：15129841
> 
> 赞同：0
> 
> 时间：2013-02-28T07:26:43.380
> 
> 标签：actionscript-3, flash, mouseevent

我正在做一个自上而下的视图游戏。实际上是一个非常简单的。当玩家在屏幕上点击时，角色会移动。但是，我也有一个开火按钮。我想知道当玩家按下按钮时如何禁用鼠标点击。因为当这种情况发生时，角色会移动到按钮位置。

这是我的代码：

```
var walk = false;
var goX = player.x;
var goY = player.y;
var speed = 10;
var dir = "down";

stage.addEventListener(Event.ENTER_FRAME, loop);

btn.addEventListener(MouseEvent.MOUSE_DOWN, btn1);

function btn1(event:MouseEvent):void
{

fireBullet();

}

function fireBullet():void {
var playerDirection:String;
if(player.scaleX < 0){
    playerDirection = "left";
} else if(player.scaleX > 0){
    playerDirection = "right";

} 
if(char.scaleY < 0){
    playerDirection = "up";
} else if(char.scaleY > 0){
    playerDirection = "down";
}

var bullet:Bullet = new Bullet(player.x, player.y, playerDirection);
stage.addChild(bullet);
}

function loop(Event)
{

if (walk == true)
{
player.w.play();
}
else
{
player.w.gotoAndStop(1);
}

player.gotoAndStop(dir);

if ((goY-speed)>player.y)
{
player.y +=  speed;
dir = "down";
}
else if ((goY+speed)<player.y)
{
player.y -=  speed;
dir = "up";
}
if ((goX-speed)>player.x)
{
player.x +=  speed;
dir = "right";
}
else if ((goX+speed)<player.x)
{
player.x -=  speed;
dir = "left";
}

if ((goY-speed)>player.y || (goY+speed)<player.y || (goX-speed)>player.x || (goX+speed)                  <player.x){
walk = true;
} else {  
 walk =false
}
}

 stage.addEventListener(MouseEvent.CLICK, set);

function set(MouseEvent){
goX=mouseX
goY=mouseY} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:35:34.450

由于鼠标事件在显示列表中冒泡，并且您在舞台上添加了一个侦听器，因此当用户按下按钮时，您需要阻止事件传播。

为了实现这一点，在按钮处理程序中，您需要调用`stopImmediatPropagation`方法。因此，您的 btn1 方法将如下所示：

```
function btn1(event:MouseEvent):void
{
    fireBullet();
    event.stopImmediatePropagation();
} 
```

这样，您可以防止单击事件一直冒泡到舞台，进而导致调用舞台的单击处理程序。

希望这可以帮助。祝你有美好的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:58:11.200

简单来说，使用的概念`target`可以如下处理。

试试这个：

```
function set(e:MouseEvent):void
{
      var target = e.target;

      //ex) if(target is MovieClip) return;
      if(target is <#your fire button type#>) return;

      goX=mouseX;
      goY=mouseY;
} 
```

“目标”与“当前目标”有什么不同？

> *   **target** : 触发事件的对象。
> *   **currentTarget**：您将侦听器应用到的对象。

# css - 如何固定子div标签的宽度

> ID：15129855
> 
> 赞同：2
> 
> 时间：2013-02-28T07:27:32.440
> 
> 标签：css

我有两个 div 标签`parent`和`child`. `child`标签的位置固定，宽度为 100%。父级有 10px 的填充，如此[jsfiddle](http://jsfiddle.net/q4ffs/)代码所示。问题是，当我为子标签提供 100% 的宽度时，它的右侧会移出父 div 标签。我知道那是因为它有填充。解决此问题的一种方法是为子标签提供 90% 的宽度。`But is there a better way than this so that child tag appears exactly inside parent tag?`

**更新**

我想保持位置：固定为子标签

```
.parent {
    height: 300px;
    padding: 10px;
    border: 1px solid red;
}

.child {
    position: fixed;
    height: 100px; width: 100%;
    border: 1px solid black; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:14:27.333

[**jsfiddle.net/q4ffs/3/ 演示**](http://jsfiddle.net/q4ffs/3/)

如果您对少量使用 jQuery 感到满意，那么这应该可以解决您的问题。CSS 仍然有一些限制，但这一小行 javascript 可能会很好地为您服务。

```
 $(function (){
      $('.child').each(function (){
          $(this).css('width', $(this).parent('div').width());
      })
  }); 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:31:39.107

将`absolute`div 放置在另一个 div 中，该 div 放置在父 div 中。

```
<div class="parent">
    <div class="newDiv">
    <div class="child">

        </div>
    </div>
</div> 
```

另一个 div 将获得`position:relative;`.

```
.newDiv
{
    position:relative;
    height:100%;
}
.child {
    position: absolute;
    height: 100px; left:0; right:0;
    border: 1px solid black;
} 
```

[**演示**](http://jsfiddle.net/mZTFq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:33:56.217

将位置设为相对查看输出

```
.parent {
    height: 300px;
    padding: 10px;   
    border: 1px solid red;

}

.child {
    position: relative;
    height: 100px; width: 100%;
    border: 1px solid black;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:46:52.347

如果填充是问题，您还可以调整其填充

给孩子上课填充

并附加代码

```
.padding /*for box padding ie padding inside the box*/
{
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */

    } 
```

它不会让孩子用填充来最大化她的宽度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-23T12:07:16.370

嘿，您可以使用 width is 100vw 并设置 margin-left:-10px ；在孩子身上。

干杯

# php - 用正则表达式爆炸

> ID：15129868
> 
> 赞同：2
> 
> 时间：2013-02-28T07:28:32.127
> 
> 标签：php, regex

我有一个类似的字符串`{ASK(Value, Value, 'Sentence', Some_Char)}`，我需要在`()`. 我做错了什么？

```
preg_match_all('/\{ASK\((.*?),\)\}/', '{ASK(Value, Value, \'Sentence\', X)}', $matches);
print_r($matches); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:34:16.150

从正则表达式中取出逗号，它匹配。

```
preg_match_all('/\{ASK\((.*?)\)\}/', '{ASK(Value, Value, \'Sentence\', X)}', $matches);
print_r($matches);

//Explode the matched group
$exploded = explode(',',$matches[1]); 
print_r($exploded);

/*
 * Note that we used $matches[1] instead of $matches[0], 
 * since the first element contains the entire matched 
 * expression, and each subsequent element contains the matching groups.
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:36:42.903

```
$s = "{ASK(Value, Value, 'Sentence', Some_Char)}";
$p = '#\{ASK\((.*?)\)\}#';
preg_match_all($p, $s, $matches);
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:36:48.390

简单的分裂和爆炸

```
$Myval = "{ASK(Value, Value, 'Sentence', Some_Char)}";

$splitedVal = split('[()]', $Myval);

$explodedVal = explode(",", $splitedVal[1]);

print_r($explodedVal); 
```

// 输出

```
Array ( [0] => Value [1] => Value [2] => 'Sentence' [3] => Some_Char ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T07:39:39.873

一个简单的方法（虽然不完全包含在正则表达式中）可能是：

```
preg_match_all('/\{ASK\([^)]*\)\}/', '{ASK(Value, Value, \'Sentence\', X)}', $matches);
$values = explode($matches[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T03:41:26.433

只要您的`Values`,`Sentences`和`Chars`不包含`,`or `)`，那么这个单一的正则表达式模式将在没有额外`explode()`调用的情况下交付。

图案：（`~(?:\G, |ASK\()\K[^,)]+~` 图案[演示](https://regex101.com/r/PorzXY/1)）

代码：（[演示](http://sandbox.onlinephpfunctions.com/code/8bb759cab851526a8e982986e049d6a07fcdf72e)）

```
$string="{ASK(Value, Value, 'Sentence', Some_Char)}";

print_r(preg_match_all('~(?:\G, |ASK\()\K[^,)]+~',$string,$out)?$out[0]:[]); 
```

输出：

```
Array
(
    [0] => Value
    [1] => Value
    [2] => 'Sentence'
    [3] => Some_Char
) 
```

“魔法”在`\G`. 这告诉正则表达式在字符串的开头或在前一个匹配之后继续匹配。这是我发布的类似答案：[https ://stackoverflow.com/a/48373347/2943403](https://stackoverflow.com/a/48373347/2943403)

# vb.net - 代码总是搜索最后一条记录而不是我输入的数字

> ID：15129874
> 
> 赞同：0
> 
> 时间：2013-02-28T07:29:03.300
> 
> 标签：vb.net

为什么我的代码总是搜索最后一条记录而不是我搜索的记录，就像这样`8850338005909`。

这是文本文件中的代码示例数据：

```
8501045891528,2271,"亚当斯·CNDY大厅
HNYLMN100S/36",57.25,36.00,4822,1,100,101,465
8850338001604,2271,"亚当斯·CNDY大厅
HNYLMN100S/36",57.25,36.00,4822,1,100,101,465
8850338005909,2271,"亚当斯·CNDY大厅
HNYLMN100S/36",57.25,36.00,4822,1,100,101,465
8850338002519,2312,"CLRTS CNDY COOL MINT
40S/60",27.75,60.00,7049,1,100,101,465 8850338001000,2313,"ADAMS GUM
CLRETSTWIN PK14GX2/1",66.50,1.00,4822,1,100,101,470
4804880224138,2315,"BGUIO OIL CKNG
16KG/1",978.00,1.00,6135,1,192,193,639

```

我的代码：

```
Private Sub Data2()
    Dim text As String = IO.File.ReadAllText("C:\ITEMRTV.txt")
    Dim index As Integer = text.IndexOf(TextBox1.Text)
    Dim Values() As String = Split(text, ",")
    If index >= 0 Then
        ' String is in file, starting at character "index"
        Label1.Text = Values(0) ' now contains first column value,
        Label2.Text = Values(1) ' contains second column, etc.
        Label3.Text = Values(2)
        Label4.Text = Values(3)
        Label5.Text = Values(4)
        Label6.Text = Values(5)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:57:10.900

尝试这个：

```
Dim text As String = IO.File.ReadAllText("C:\ITEMRTV.txt")
Dim Values() As String = text.Split(New String() {",", Environment.NewLine}, StringSplitOptions.None)
Dim index As Integer = Array.IndexOf(Values, TextBox1.Text)

If index >= 0 Then
    Label1.Text = Values(index)
    Label2.Text = Values(index + 1)
    Label3.Text = Values(index + 2)
    Label4.Text = Values(index + 3)
    Label5.Text = Values(index + 4)
    Label6.Text = Values(index + 5)
End If 
```

但是你应该分成行和列：

```
Dim text() As String = IO.File.ReadAllLines("C:\ITEMRTV.txt")
Dim s() As String

For Each line As String In text
    s = line.Split(","c)
    If s(0).Equals(TextBox1.Text, StringComparison.CurrentCultureIgnoreCase) _
    AndAlso s.Length > 5 Then
        Label1.Text = s(0)
        Label2.Text = s(1)
        Label3.Text = s(2)
        Label4.Text = s(3)
        Label5.Text = s(4)
        Label6.Text = s(5)
        Exit For
    End If
Next 
```

您甚至可以创建自己的结构来保存数据，这是更好的选择。例如，`Dictionary(Of Integer, List(Of String))`为每个文件声明一个，因为第一个字段看起来像一个 ID，或者声明您自己的类来适当地保存每个字段。

# java - 如何根据市场中的 mime 类型搜索 android 应用程序

> ID：15129876
> 
> 赞同：3
> 
> 时间：2013-02-28T07:29:07.237
> 
> 标签：java, android, google-play

市场中的大多数应用程序都带有意图过滤器。如何根据 MIME 类型搜索 Google play 中的应用

即示例：我如何搜索喜欢`market://search?q=type:text/pdf`或其他东西..

我在 android 开发者网站上没有找到适合我要求的东西，我在谷歌搜索了很多我没有找到任何东西。提前致谢

# java - Android BluetoothSocket::connect() 抛出异常

> ID：15129877
> 
> 赞同：2
> 
> 时间：2013-02-28T07:29:12.127
> 
> 标签：java, android, sockets, exception, bluetooth

我无法启动 Java 服务器（使用`bluecove 2.1.1 on Windows 7 x64, external bluetooth dongle`）和`Android`客户端（操作系统版本 2.3.6）之间的蓝牙连接。

设备发现工作正常，但我无法连接到 PC( `BluetoothSocket::connect() throw an exception`) 上运行的服务。下面是一个非常原始的服务器和客户端版本（我用它`MAC address`来`bluetooth dongle`减少代码长度）：

Java 服务器

```
import java.io.*;
import javax.microedition.io.*;
import javax.bluetooth.*;

public class RFCOMMServer {

public static void main(String args[]) {
    try {

        StreamConnectionNotifier service = (StreamConnectionNotifier) Connector
                .open("btspp://localhost:"
                        + new UUID("0000110100001000800000805F9B34FB",
                                false).toString() + ";name=helloService");

        StreamConnection conn = (StreamConnection) service.acceptAndOpen();
        System.out.println("Connected");

        DataInputStream in = new DataInputStream(conn.openInputStream());
        DataOutputStream out = new DataOutputStream(conn.openOutputStream());

        String received = in.readUTF();         // Read from client
        System.out.println("received: " + received);

        out.writeUTF("Echo: " + received);      // Send Echo to client

        conn.close();
        service.close();
    } catch (IOException e) {
        System.err.print(e.toString());
    }
}
} 
```

安卓客户端

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.util.UUID;
import android.app.ListActivity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.os.Bundle;
import android.os.Handler;
import android.widget.LinearLayout;
import android.widget.ArrayAdapter;

public class AndroidBluetoothEchoClientActivity extends ListActivity {
LinearLayout layout;

private ArrayAdapter<String> mArrayAdapter;

final Handler handler = new Handler();

final Runnable updateUI = new Runnable() {
    public void run() {
        mArrayAdapter.add(bluetoothClient.getBluetoothClientData());
    }
};

BluetoothClient bluetoothClient;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mArrayAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1);
    this.setListAdapter(mArrayAdapter);
    bluetoothClient = new BluetoothClient(handler, updateUI);
    bluetoothClient.start();
}
}

class BluetoothClient extends Thread {

BluetoothAdapter mBluetoothAdapter;
private String data = null;

final Handler handler;
final Runnable updateUI;

public BluetoothClient(Handler handler, Runnable updateUI) {
    this.handler = handler;
    this.updateUI = updateUI;

    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
}

public String getBluetoothClientData() {
    return data;
}

public void run() {
    BluetoothSocket clientSocket = null;
                                        // Client knows the MAC address of server
    BluetoothDevice mmDevice = mBluetoothAdapter
            .getRemoteDevice("00:15:83:07:CE:27");

    try {

        clientSocket = mmDevice.createRfcommSocketToServiceRecord(UUID
                .fromString("00001101-0000-1000-8000-00805F9B34FB"));

        mBluetoothAdapter.cancelDiscovery();

        clientSocket.connect();
        DataInputStream in = new DataInputStream(clientSocket.getInputStream());
        DataOutputStream out = new DataOutputStream(clientSocket.getOutputStream());

        out.writeUTF("Hello");          // Send to server

        data = in.readUTF();            // Read from server
        handler.post(updateUI);
    } catch (Exception e) {
    }
}
} 
```

这是问题的核心（我猜）：

```
BluetoothDevice mmDevice = mBluetoothAdapter
            .getRemoteDevice("00:15:83:07:CE:27");//normally get device

    try {

        clientSocket = mmDevice.createRfcommSocketToServiceRecord(UUID
                .fromString("00001101-0000-1000-8000-00805F9B34FB"));//here also no problem

        mBluetoothAdapter.cancelDiscovery();

        clientSocket.connect();//here throw an exception 
```

我尝试使用反射：

```
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
clientSocket  = (BluetoothSocket) m.invoke(device, 1); 
```

但它也行不通。

一个多星期以来我都无法解决这个问题，如果你能帮助我做出决定，我将不胜感激。

这是日志文件：

```
02-27 08:32:33.656: W/ActivityThread(10335): Application edu.ius.rwisman.AndroidBluetoothEchoClient is waiting for the debugger on port 8100...
02-27 08:32:33.687: I/System.out(10335): Sending WAIT chunk
02-27 08:32:33.882: I/System.out(10335): Debugger has connected
02-27 08:32:33.882: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:34.085: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:34.289: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:34.492: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:34.687: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:34.890: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:35.093: I/System.out(10335): waiting for debugger to settle...
02-27 08:32:35.296: I/System.out(10335): debugger has settled (1493)
02-27 08:32:35.390: I/ApplicationPackageManager(10335): cscCountry is not German : SER
02-27 08:32:35.875: D/dalvikvm(10335): threadid=9: still suspended after undo (sc=1 dc=1)
02-27 08:32:45.351: D/BluetoothSocket(10335): create BluetoothSocket: type = 1, fd = -1, uuid = [00001101-0000-1000-8000-00805f9b34fb], port = -1
02-27 08:32:45.351: D/BLZ20_WRAPPER(10335): blz20_init: initializing...
02-27 08:32:45.351: D/BTL_IFC_WRP(10335): wsactive_init: init active list
02-27 08:32:45.460: D/BLZ20_WRAPPER(10335): blz20_init: success
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_sock_create: CTRL
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_alloc_new_sock: wrp_alloc_new_sock sub 1
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_sock_create: 43
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_sock_connect: wrp_sock_connect brcm.bt.btlif:9000 (43)
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_sock_connect: BTLIF_MAKE_LOCAL_SERVER_NAME return name: brcm.bt.btlif.9000
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_sock_connect: wrp_sock_connect ret:-1 server name:brcm.bt.btlif.9000
02-27 08:32:45.460: E/BTL_IFC_WRP(10335): ##### ERROR : wrp_sock_connect: connect failed (Connection refused)#####
02-27 08:32:45.460: E/BTL_IFC(10335): ##### ERROR : btl_ifc_ctrl_connect: control channel failed Connection refused#####
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wrp_close_full: wrp_close (43:-1) [brcm.bt.btlif]
02-27 08:32:45.460: D/BTL_IFC_WRP(10335): wsactive_del: delete wsock 43 from active list [ad3bc380] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:48:02.557

问题已解决，只是我的设备和 PC 上的验证码不同，但 Windows 在配对设备列表中显示设备。我修理设备，它工作。

# c# - ASP.net MVC 4 从一个视图获取用户 ID 并在另一个视图中使用它

> ID：15129886
> 
> 赞同：1
> 
> 时间：2013-02-28T07:29:36.950
> 
> 标签：c#, asp.net-mvc-4

我有两个视图和两个控制器。一个给客户，另一个给他们的地址。客户可以有一个地址。在我的客户端模型定义中，我允许客户端的 addressID 可以为空。当我想为客户创建地址时，根据 addressId 是否为空，我将重定向到地址的“创建”或“详细信息”视图。现在我只想在到达 Create 视图时显示客户名称（“为 John Doe 创建地址”）。我该怎么做呢？我正在尝试慢慢学习 MVC，但在处理关注点分离和将数据传递到哪里时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:47:11.807

由于您是手动重定向，因此您肯定知道下一个请求。在这种情况下，TempData 可能最适合您的需求。如果您需要的数据多于下一个请求，您可能应该使用已经建议的 Session 或 Cookies。

使用它来存储下一个请求的数据：

```
TempData["ClientName"] = "John Doe"; 
```

这是为了在下一个请求中获取数据：

```
var clientName = TempData["ClientName"]; 
```

请注意，TempData 仅为下一个请求存储其数据。有关 TempData MSDN 的更多信息是您的朋友：http: [//msdn.microsoft.com/en-us/library/dd394711%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd394711%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:35:34.567

尝试为其他人提供一些代码以更好地帮助您，但现在我可以告诉您的是您希望跨请求保持状态，因此您有很多选择。您可以保持会话状态，可以将查询字符串附加到以下请求中，可以使用 cookie 传输 id 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:19:28.623

我建议您为此使用会话..存储用户名`session("username")`并在视图或您想要的任何控制器中使用它..

# vim - 命令-t 找不到文件

> ID：15129887
> 
> 赞同：6
> 
> 时间：2013-02-28T07:29:38.150
> 
> 标签：vim, vim-plugin

我最近`command-t`在 vim 上安装了插件并开始使用它。

但现在我觉得它找不到一些文件。

例如：我有一个文件夹，当我点击时（并在该文件夹中键入 inc 或任何文件名）`inc`，它的内容都没有列出。`<leader> t`主文件夹中的其他文件也未列出。

我试过冲洗使用`CommandTFlush`但没有成功。

我的配置中是否缺少任何内容？我可以尝试什么让它工作？

编辑：如果我进入`inc`文件夹（使用`:cd`），则会列出文件。然后，如果我返回父文件夹 ( `:cd ..`)，则不再列出相同的文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T13:33:54.450

我已经安装`let g:CommandTMaxFiles=50000`了`.vimrc`，现在它正在工作。

看起来最大索引文件限制有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:52:24.597

使用 :pwd 检查哪个是您当前的工作目录。Command-T 仅适用于当前目录。
我的猜测是您在主树的子目录中启动了 vim，这就是为什么您没有看到所有内容的原因。

# r - R CMD安装错误：test_load_package（）函数中的意外符号

> ID：15129888
> 
> 赞同：1
> 
> 时间：2013-02-28T07:29:39.107
> 
> 标签：r

## 问题：

我只是想从源代码构建一些包并遇到错误

> 错误：“tools:::.test_load_package('rbenchmark', '\per-homedrive1.corp.something.org/homedrive$/Tommy.O'Dell”中出现意外符号

下面的完整输出：

```
C:\ROracle>R CMD INSTALL --build --merge-multiarch rbenchmark_1.0.0.tar.gz

install for i386

* installing to library '\\per-homedrive1.corp.something.org/homedrive$/Tommy.O'Dell/R/win-library/2.15'
* installing *source* package 'rbenchmark' ...
** package 'rbenchmark' successfully unpacked and MD5 sums checked
** R
** demo
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
Error: unexpected symbol in "tools:::.test_load_package('rbenchmark', '\\per-homedrive1.corp.something.org/homedrive$/Tommy.O'Dell"
Execution halted
ERROR: loading failed
* removing '\\per-homedrive1.corp.something.org/homedrive$/Tommy.O'Dell/R/win-library/2.15/rbenchmark' 
```

## 问题：

*   错误是否来自路径中的撇号 ( `'`) ？`O'Dell`
*   如果是，这是一个错误，因为它没有转义目录中的撇号吗？
*   它是否试图安装到我的默认库中？
*   如果是，我可以将库更改为参数`R CMD INSTALL`吗？
*   如果我不能指定库，我应该完全删除该库吗？

## 额外信息：

这是输出`.libPaths()`

```
[1] "\\\\per-homedrive1.corp.something.org/homedrive$/Tommy.O'Dell/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.2/library"                                            
[3] "C:/Program Files/RStudio/R/library" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:15:29.320

正如我所看到的，错误来自撇号 - R 不知道这不会结束路径，而是它的一部分。在没有它的情况下尝试它，我猜它应该可以工作。一种解决方案也可能是使用这种引用`" "`，也许这也行得通，因为撇号不再结束它......

编辑：为了`foo`通过命令行将软件包安装到特定的库文件夹中，您可以使用

```
R CMD build foo
R CMD INSTALL -l /home/daniel/myPkg/ foo_1.0.tar.gz 
```

这意味着在您的情况下这应该有效：

`R CMD INSTALL --build --merge-multiarch -l C:/Program Files/RStudio/R/library rbenchmark_1.0.0.tar.gz`

# html - blogspot 内的网络浏览器？（浏览器内的浏览器）

> ID：15129893
> 
> 赞同：0
> 
> 时间：2013-02-28T07:29:50.660
> 
> 标签：html, browser, webpage, blogspot

我很好奇我是否可以在博客文章（网页中）中放置一个网络浏览器（最基本的浏览器）？澄清：具有浏览器的网页会导致另一个网页，某种意义上的子浏览器。

请保存所有愚蠢的评论和/或笑话。我只是好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:56:29.790

您可能正在搜索的是使用 iframe 标记。快速搜索会显示一些可以帮助您的教程。

[http://www.ehow.com/how_12109858_add-iframe-code-blogspot.html](http://www.ehow.com/how_12109858_add-iframe-code-blogspot.html)

[http://www.bloggerhacking.com/2010/04/iframe-to-add-another-blog-into-your.html](http://www.bloggerhacking.com/2010/04/iframe-to-add-another-blog-into-your.html)

有关 iframe 的更多详细信息

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

请注意，它不会为您的 SEO 创造奇迹

# linux - 如何grep，然后从分隔的列文件中剪切？

> ID：15129896
> 
> 赞同：4
> 
> 时间：2013-02-28T07:29:56.377
> 
> 标签：linux, bash, grep, cut

我有一个包含多行的文件，每行分隔`|`成多列。我可以 grep 某一行，我可以剪切某一列，但我不知道如何做到这两点。

```
grep '^1001' customer 
```

从名为 customer 的文件中抓取以 1001 开头的行

```
cut -d "|" -f 3 customer 
```

从客户文件的所有行中删除第 3 列。

所以....

```
grep '^1001' customer | cut -d "|" -f 3 customer 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T07:32:00.690

调用时只需省略文件名`cut`，它将使用的输出`grep`作为输入：

```
grep 1001 customer | cut -d "|" -f 3 
```

还值得注意的是，`grep 1001`不抓取以 1001 开头的行；它抓取*包含*1001 的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:41:06.140

更好地使用这样的任务，**并避免使用管道执行多个命令**：

```
awk -F "|" '$1==1001{print $3}' customer 
```

# android - 在android手机中链接外部页面时如何只显示页面的一部分？

> ID：15129897
> 
> 赞同：0
> 
> 时间：2013-02-28T07:29:58.603
> 
> 标签：android

我可以在 Android 中链接页面使用意图：

```
Intent it = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com")); 
```

我只是想显示链接页面的一部分或顶部区域，在一个核心区域的中间，在手机页面底部的脚。

你有什么好的过滤方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:43:38.810

[您可以使用jsoup](http://jsoup.org/)抓取网页中的数据。

将 JAR 放入您的项目中，创建一个名为“libs”的文件夹。右键单击它并添加到构建路径。

然后试试这个，他们主页上的例子：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

（注意：不要刮维基百科......他们禁止快速）

您只需要检查要从中获取数据的页面的 DOM 并确定什么是好的选择器。那里是一个 CSS 选择器。另一种方法是使用 xpath：[https ://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/](https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/)

# android - 反向地理编码停止适用于 android 地图版本 v1

> ID：15129900
> 
> 赞同：1
> 
> 时间：2013-02-28T07:30:07.760
> 
> 标签：android, google-maps, reverse-geocoding

我正在使用 Android 中的反向地理编码。我的代码直到昨天才成功运行，但现在它停止在我的 Android 设备（三星 S2）上运行。但它适用于模拟器。当我在设备上编译时，它在 logcat 中显示以下错误：

```
02-28 12:56:22.800: W/System.err(9048): java.io.IOException: Service not Available
02-28 12:56:22.815: W/System.err(9048):     at android.location.Geocoder.getFromLocation(Geocoder.java:136)
02-28 12:56:22.815: W/System.err(9048):     at in.wptrafficanalyzer.locationreversegeocoding.MainActivity$ReverseGeocodingTask.doInBackground(MainActivity.java:154)
02-28 12:56:22.830: W/System.err(9048):     at in.wptrafficanalyzer.locationreversegeocoding.MainActivity$ReverseGeocodingTask.doInBackground(MainActivity.java:1)
02-28 12:56:22.830: W/System.err(9048):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-28 12:56:22.830: W/System.err(9048):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-28 12:56:22.835: W/System.err(9048):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-28 12:56:22.835: W/System.err(9048):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
02-28 12:56:22.835: W/System.err(9048):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-28 12:56:22.845: W/System.err(9048):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-28 12:56:22.845: W/System.err(9048):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:34:12.207

这是一个已知的问题。一种可能的解决方法是您必须重新启动设备。有人告诉我，我又工作了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T07:41:26.813

它的发生是由多种原因引起的。我有一些设备总是这样做，而相同的代码在其他设备上运行良好。

一个不错的解决方法是捕获 IOException 并改为触发 google maps web api；

```
public static JSONObject getLocationInfo(String address) {

    HttpGet httpGet = new HttpGet("http://maps.google.com/maps/api/geocode/json?address="
            + address + "&ka&sensor=false");
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonObject;
} 
```

您可以像这样提取的返回值；

```
 lon = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location").getDouble("lng");

            lat = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location").getDouble("lat"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:37:44.340

它现在正在工作............使用这个技巧。

只需编辑 project.properties

```
# Project target
target=Google Inc.:Google APIs:16 
```

原因是 Geocoder 类存在于核心 Android 框架中，但依赖于 Google API 贡献的代码才能正常运行。即使您的 AVD 包含 Google API，您的项目仍然需要针对该特定构建目标进行构建。

# javascript - 树视图在右侧打开它的相应Div

> ID：15129901
> 
> 赞同：0
> 
> 时间：2013-02-28T07:30:10.000
> 
> 标签：javascript, jquery, css

我已经下载了一个树视图代码，它工作正常。代码是这样的：

```
d = new dTree('d');

        d.add(0,-1,'StratApps');
        d.add(1,0,'First Folder','example.html');

        d.add(2,1,'Packages','example1.html');
        d.add(3,2,'Pkg_Load_Dim','example2.html');
        d.add(4,2,'Pkg_Write_to_File','#');

        d.add(5,1,'Interfaces','#');
        d.add(6,5,'Int_Load_Order_Dim','#');
        d.add(7,5,'Int_Load_Channel_Dim','#');

        d.add(8,1,'Procedures','#');
        d.add(9,8,'Proc_Update_Order','#');
        d.add(10,8,'Proc_Process_Errors','#');

        document.write(d); 
```

现在我想给出在右侧打开各个 Div 的链接。任何人都可以在这方面帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:23:08.220

您可以尝试以下方法：

```
$('.dtree a.node').prop('onclick', '').click(function(e) {
    var href = $(this).prop('href');
    $('#divOnRightSide').load(href);
    e.preventDefault();
}); 
```

基本上，您所说的是：对于页面上每个 dtree 中的每个节点（即链接），直接从 HTML 中删除 onClick 事件并添加一个单击事件处理程序。在这个处理程序中，获取 href-attr，然后将该链接的内容加载到 id="divOnRightSide" 的 div 中。然后，因此不会触发页面导航，请使用 e.preventDefault()。

希望这可以帮助。

**编辑：**

这是一个 jsFiddle 来演示目的：[jsFiddle](http://jsfiddle.net/v7nAN/1/)。

# arrays - 帕斯卡字符串和记录

> ID：15129902
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:30:11.853
> 
> 标签：arrays, string, record, pascal

到目前为止，这是我的代码，以防你无法告诉我正在尝试编写字典，可能每个字母都有 1 个，可能只有 15 个左右的随机条目。这是我到目前为止所拥有的

```
program Dictionary;

uses crt;

Type
 Asdf = String[26];
 Definition = Record
                    First, Full, NorV, Class : Asdf;
                    End;
Var
 A, B, C, D, E, F, g, h, i, j, k, l, m, n, o, p, q, r,
 s, t, u, v, w, x, y, z : Definition;

BEGIN
 a.First := 'a';
 a.Full := 'apple';
 a.NorV := 'noun';
 a.Class := 'fruit';

 b.First := 'b';
 b.full := 'bee';
 b.NorV := 'noun';
 b.Class := 'insect';

 c.first := 'c';
 c.full := 'cat';
 c.NorV := 'noun';
 c.class := 'animal';

 d.first := 'd';
 d.full := 'dunk';
 d.Norv := 'verb';
 d.class := 'action';

 e.first := 'e';
 e.full := 'egg';
 e.norv := 'noun';
 e.class := 'food';

 f.first := 'f';
 f.full := 'forget';
 f.norv := 'verb';
 f.class := 'action';

 g.First := 'g';
 g.Full := 'grape';
 g.NorV := 'noun';
 g.Class := 'fruit';

 h.First := 'h';
 h.Full := 'horse';
 h.NorV := 'noun';
 h.class := 'animal';

 i.First := 'i';
 i.Full := 'invent';
 i.NorV := 'verb';
 i.class := 'action';

 j.First := 'j';
 j.Full := 'jump';
 j.NorV := 'noun';
j.class := 'action';

 k.First := 'k';
 k.Full := 'kangaroo';
 k.NorV := 'noun';
 k.class := 'animal';

 l.First := 'l';
 l.Full := 'look';
 l.NorV := 'verb';
 l.class := 'action';

 m.First := 'm';
 m.Full := 'mango';
 m.NorV := 'noun';
 m.Class := 'fruit';

 n.First := 'n';
 n.Full := 'noose';
 n.NorV := 'noun';
 n.class := 'object';

 o.First := 'o';
 o.Full := 'orangutan';
 o.NorV := 'noun';
 o.class := 'animal';

 p.First := 'p';
 p.Full := 'prod';
 p.NorV := 'verb';
 p.class := 'action';

 q.First := 'q';
 q.Full := 'queen';
 q.NorV := 'noun';
 q.class := 'royalty';

 r.First := 'r';
 r.Full := 'run';
 r.NorV := 'verb';
 r.class := 'action';

 s.First := 's';
 s.Full := 'shoot';
 s.NorV := 'verb';
 s.class := 'action';

 t.First := 't';
 t.Full := 'train';
 t.NorV := 'noun';
 t.class := 'transport';

 u.First := 'u';
 u.Full := 'umbrella';
 u.NorV := 'noun';
 u.class := 'object';

 v.First := 'v';
 v.Full := 'vegetable';
 v.NorV := 'noun';
 v.class := 'vegetable';

 w.First := 'w';
 w.Full := 'walk';
 w.NorV := 'verb';
 w.class := 'action';

 x.First := 'x';
 x.Full := 'xylophone';
 x.NorV := 'noun';
 x.class := 'object';

 y.First := 'y';
 y.Full := 'yank';
 y.NorV := 'verb';
 y.class := 'action';

 z.First := 'z';
 z.Full := 'zoo';
 z.NorV := 'noun';
 z.class := 'area';

 Writeln ('Type the first letter of the word you want to view');
 Readln ( 
```

结尾。

我应该在最后放什么，以便在输入时可以搜索？如果需要，我可以添加更多变量。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:06:49.810

正如您发现的那样，很难枚举多个变量。

标准解决方案是将它们放在一个数组中

```
var 
  myarray: array['A'..'Z'] of Definition; 
```

然后枚举

```
var
  myloopvar: Char;

for myloopvar := 'A' to 'Z' do
  if myarray[myloopvar].firstletter = 'X' then
    DoSomething; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:59:10.127

您尝试将字符设置在字符串的位置 1。第一个有效的原因是因为编译器可以将“a”字符串类型转换为字符。其他字符串不能进行类型转换。删除索引，事情应该可以工作（未经测试）。

```
BEGIN  
Def.FirstLetter := 'a';  
Def.FullName := 'apple';  
Def.NounorVerb := 'noun'  
END. 
```

# android - Gmail API 限制

> ID：15129904
> 
> 赞同：3
> 
> 时间：2013-02-28T07:30:14.093
> 
> 标签：android, gmail

当用户授予应用程序访问其 Gmail 帐户的权限并且该应用程序进行调用（例如发送电子邮件）时，该应用程序可以进行的 API 调用数量是否存在限制，或者该限制是基于通过用户帐户访问 API 的次数？

例如，如果我的应用程序由 100 万用户运行，并且 API 调用的数量被 Google 限制为 100,000，这是否意味着只要达到 100,000 次 API 调用，无论是哪个设备发出这些调用，也不管是谁的帐户与令牌相关联，我的应用程序将无法在当天剩余时间内进行任何进一步的 API 调用？

或者这是否意味着可以从我在该设备上运行的应用程序从单个设备进行 100,000 次 API 调用，但将其限制为授予使用 Gmail 服务权限的帐户？

我需要避免的是，当来自不同设备和帐户的 1,000,000 次 API 调用被发送到 Gmail 服务时，Google 会突然限制我的应用程序。如果 Google 以这种方式限制我的应用程序，我最好不要使用 Gmail API，而只是恢复使用用户必须输入其用户名/密码的典型 SMTP 和 POP 服务。

谷歌记录了以下内容：

> 上传速率是每个用户每秒一个 API 请求，无论有多少线程发出上传请求。

取自[Google Apps 电子邮件设置 API 限制和配额](https://developers.google.com/google-apps/email-settings/limits)

但是“每个用户”的含义没有明确的定义。帐户？IP地址？客户编号？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T21:53:04.887

您写了*当用户授予应用程序访问其 Gmail 帐户的权限时*，然后询问*user*的定义。我认为他们是一样的。用户是最终*用户*，发送电子邮件并由其电子邮件地址标识。

# ajax - 从 AJAX 页面下载文件时，该文件与下载它的 ajax 页面具有相同的名称

> ID：15129906
> 
> 赞同：1
> 
> 时间：2013-02-28T07:30:20.427
> 
> 标签：ajax, jakarta-ee

*****嗨，我正在尝试编写一个 Ajax 页面，该页面解密服务器上的加密文件并下载它。现在我的代码解密并下载文件。但问题是下载的文件与Ajax Page的文件名相同。下面是将文件下载到本地机器的代码。为了避免混淆，我没有包含解密代码。*******

 **String fileName="/home/maclean/NetBeansProjects/SecureCloud/build/web/SecureCloud/"+Data.txt;

此行声明服务器上的文件位置

```
 response.setContentType("APPLICATION/DOWNLOAD");
        response.setContentLength(in.available());
        int length;
        byte[] buffer = new byte[4096];

           while ((length = in.read(buffer)) > 0){
                 data=new String(buffer);
              buffer =decryptCaesar.Decrypt(data,shiftKey).getBytes();
os.write(buffer, 0, buffer.length);
System.out.println(buffer);
 } 
 response.setHeader("Content-Disposition","attachment; filename="+FileName); 
```

这一行下载文件。但是下载的文件的名称是 AjaxRead.jsp，它是 Ajax 页面的名称，其中文件的原始名称是 Data.txt

请让我知道我做错了什么以及如何获得相同的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:12:27.193

由于您没有为下载指定文件名，因此浏览器会选择一个（基于当前 URL）。您可以通过将 HTTP 标头设置`Content-Disposition`为：

`response.setHeader("Content-Disposition","attachment; filename=Data.txt")`.**

# sencha-touch-2 - 使用 seista 对 sencha touch 应用进行跨设备测试

> ID：15129912
> 
> 赞同：0
> 
> 时间：2013-02-28T07:30:41.457
> 
> 标签：sencha-touch-2, cross-platform, siesta

siesta 测试框架是否支持跨设备测试？我们有任何关于它的文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T14:36:28.140

是的，Siesta 测试套件可以在任何设备上运行。您只需在目标设备上打开一个网页并将其指向您的线束文件。目前虽然我们不支持移动设备的自动化，但您始终可以在 Chrome 中运行测试。

# c - 如果服务中的套接字创建失败怎么办？

> ID：15129913
> 
> 赞同：0
> 
> 时间：2013-02-28T07:30:44.833
> 
> 标签：c, linux, sockets, error-handling

我正在编写一个 linux 服务，它将使用套接字与客户端进行通信。

此服务将在启动时启动，并将永远运行，直到设备处于活动状态。在这种情况下，在服务器上，如果套接字创建失败，我该如何处理这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:34:26.557

你能做的不多：

*   如果无法创建监听套接字，则打印错误消息并退出，希望有人看到。如果服务器不能在某种套接字上监听，它就无能为力

*   如果无法创建新的套接字（使用`accept`）记录警告消息并希望有人看到它，但不要退出。错误情况（打开的描述符过多、内存不足等）可能是暂时的

# extjs - getRootNode() 不是函数

> ID：15129915
> 
> 赞同：0
> 
> 时间：2013-02-28T07:30:57.640
> 
> 标签：extjs

我尝试使用 MVC 架构开发应用程序。我有以下控制器代码：

```
Ext.define('PM.controller.Projects', {
    extend: 'Ext.app.Controller',

    models: ['Project'],
    stores: ['Projects'],

    views: [
        'projects.Tree',
        'Toolbar',
    ],

    init: function(config) {
        var tree = this.getProjectsTreeView();
        var rootNode = tree.getRootNode();
        console.log(rootNode);
        this.callParent(config);
    }
}); 
```

而这个视图代码：

```
Ext.define('PM.view.projects.Tree', {
    extend: 'Ext.tree.Panel',
    xtype: 'projectsTree',

    title: 'Projects',
    hideHeaders: true,
    root: {
        text: "Projekte"
    }

}); 
```

它尝试从控制器中的树视图中获取根节点，但我得到 getRootNode() 在控制器中不是有效函数的错误。谁能告诉我为什么会出现这个错误？我的目标是从 ajax 请求向这个根节点添加新的子节点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:35:18.247

Ext 为视图数组中的每个字符串生成的方法返回构造函数，这些构造函数可用于创建相应的视图。这看起来很奇怪，但事实就是如此。

如果你想访问实际的视图组件，你需要`ref`为它创建一个。您的`init`方法不应假定视图已存在。很可能不会，因为控制器的`init`方法是在应用程序的`launch`方法之前调用的，这可能是所有视图都添加到页面的地方。

您希望将您的逻辑放在控制器的`onLaunch`模板方法中，该方法在应用程序启动并添加您的视图后调用。

```
Ext.define('PM.controller.Projects', {
    extend: 'Ext.app.Controller',

    refs: [{
        ref: 'projectsTreeView',
        selector: 'projectsTree'
    }],

    init: function() {
        // It's safe to add selectors for views that don't exist yet.
        this.control(/*...*/)
    },

    onLaunch: function(config) {
        var tree = this.getProjectsTreeView();
        var rootNode = tree.getRootNode();
        console.log(rootNode);
    }
}); 
```

如果这不起作用，那意味着您实际上并没有在任何地方添加您的视图。您可以在应用程序的启动方法中添加它。必须添加树视图。

```
Ext.application({
    // ...

    views: ['projects.Tree']

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [new this.getProjectsTreeView()]
        });
    }
}); 
```

所以事件的年表是这样的：

```
Application#constructor 
Controller#constructor
Controller#init (can't assume the view exists)
Application#onBeforeLaunch
Application#launch (view is now added)
Controller#onLaunch (do something with the view that is now available) 
```

此外，您的视图别名可能需要`'widget.projectsTree'`不仅仅是`'projectsTree'`.

# jquery - 如果使用jquery在一个页面中存在多个表单，如何提交特定表单

> ID：15129916
> 
> 赞同：11
> 
> 时间：2013-02-28T07:31:05.403
> 
> 标签：jquery, forms

我有两种形式。

```
<form name="frm1" action="someurl" method="post">
  <input type="submit" name="btn1" class="buttons" value="Submit"/>
</form> 
```

和

```
<form name="frm2">
  <input type="submit" name="btn2" value="Submit"/>
</form> 
```

我需要在点击表单“frm2”的“btn2”时提交表单“frm1”。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-03-21T13:29:40.467

```
<button type="submit" form="form1" value="Submit">Submit</button> 
```

该`form`属性指定`id`按钮将提交的表单的类型。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-28T07:34:48.817

你会说

`<input type="submit" name="btn1" id="btn1" value="Submit"/>`

```
 $("#btn1").click(function(){  
  $("#frm1").submit();
} 
```

和

`<input type="submit" name="btn2" id="btn2" value="Submit"/>`

```
 $("#btn2").click(function(){  
  $("#frm1").submit();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T08:19:17.170

**HTML**

```
<form name="frm1" action="someurl" method="post" id="frm1">
<input type="submit" name="btn1" class="buttons" value="Submit"/>
</form>

<input type="submit" name="btn2" onclick="formSubmit()" value="Submit"/> 
```

**Javascript**

```
<script>
function formSubmit()
{
document.getElementById("frm1").submit();
}
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T07:55:11.140

考虑 HTML：

```
 <form id="target" action="destination.html">
    <input type="text" value="Hello there" />
    <input type="submit" value="Go" />
    </form>
    <div id="other">
    ....
    </div> 
```

事件处理程序可以绑定到表单：

```
 $('#target').submit(function() {
    alert('Handler for .submit() called.');
    return false;
    }); 
```

点击功能：

```
 $('#other').click(function() {
    $('#target').submit();
    }); 
```

这里是链接看看： [如何在使用 preventDefault() 时在按钮单击时提交表单？](https://stackoverflow.com/questions/11581462/how-can-i-submit-form-on-button-click-when-using-preventdefault)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T07:36:19.190

您可以使用 ajax 在第二个表单之前提交第一个表单：

```
$('form[name=frm2]').submit(function() {
    var form1 = $('form[name=frm1]');
    $.ajax({
        type: "POST",
        url: form1.attr('action'),
        data: form1.serialize(),
        async: false;
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T07:45:29.613

我通常避免使用 .submit() 函数，因为我几乎总是需要对 .submit() 允许我做的响应做更多的事情。

因此，必须将提交按钮的非 .submit 选项更改为普通按钮。

```
$('.btn2').bind('click', function(){

    var form1Data = $('#frm1').serialize();
    $.ajax({
        url : 'someurl',
        type : 'post',
        datatype : 'json',
        data : form1Data,
        success : function(json) {
            sumbitForm2();
        }
    });
});

function submitForm2() {

    var form2Data = $('#frm2').serialize(); 
    $.ajax({
        url : 'urlToSumbitForm1',
        type : 'post',
        datatype : 'json',
        data : form2Data,
        success : function(json) {
            //do something if you need to
        }
    });
} 
```

# java - Java excel分组数据

> ID：15129920
> 
> 赞同：1
> 
> 时间：2013-02-28T07:31:33.973
> 
> 标签：java, netbeans, apache-poi

如何将我在 excel 中的数据分组并将分组数据的每个部分输出到单独的 excel 工作表？

我下面的代码执行以下操作： 1) 从 Excel 表 (.xlsx) 获取所有数据，并显示它。2) 将相同的数据输出到另一个有名字的路径。

任何帮助/建议将不胜感激

```
package javaapplication8;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class JavaApplication8 {
private static String path = "";

public static void main(String[] args) throws IOException {

    JFrame frame = new JFrame();
    JFileChooser chooser = new JFileChooser();
    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
    int option = chooser.showOpenDialog(frame); // parentComponent must a component like JFrame, JDialog...
    if (option == JFileChooser.APPROVE_OPTION) {
    File selectedFile = chooser.getSelectedFile();
    path = selectedFile.getAbsolutePath();

    }

    try {

FileInputStream file = new FileInputStream(new File(path));

//Get the workbook instance for XLS file
XSSFWorkbook workbook = new XSSFWorkbook(file);

//Get first sheet from the workbook
XSSFSheet sheet = workbook.getSheetAt(0);

//Iterate through each rows from first sheet
Iterator<Row> rowIterator = sheet.iterator();
while(rowIterator.hasNext()) {
    Row row = rowIterator.next();

    //For each row, iterate through each columns
    Iterator<Cell> cellIterator = row.cellIterator();
    while(cellIterator.hasNext()) {

        Cell cell = cellIterator.next();

        switch(cell.getCellType()) {
            case Cell.CELL_TYPE_BOOLEAN:
                System.out.print(cell.getBooleanCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_NUMERIC:
                System.out.print(cell.getNumericCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_STRING:
                System.out.print(cell.getStringCellValue() + "\t\t");
                break;
        }
    }
    System.out.println("");
}
file.close();
FileOutputStream out =
    new FileOutputStream(new File("C:\\test.xlsx"));
workbook.write(out);
out.close();

} 
catch (FileNotFoundException e) {
e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
} 
```

如果复制上述代码应该适用于任何 .xlsx 文件

我试图分组的数据样本是：

```
EPPACC      Cname       AbarDate    CTermDat    MDiscDat
A4041222    Sihlaba     2011/09/16  2013/09/15  2012/11/20
A4041231    Gwavu       2011/09/26  2013/09/26  2012/11/22
A4041260    Lin         2011/11/21  2013/11/20  2012/11/29
A4041260    Lin         2011/09/16  2013/09/15  2012/11/29
A4041281    Sharma      2011/09/16  2013/09/15  2013/01/21
A4041336    Nkwankwana  2011/09/16  2013/09/15  2013/01/21
A4041336    Nkwankwana  2011/09/16  2013/09/15  2013/01/21
A4041420    Gqozo       2011/09/22  2013/09/21  2012/07/18
A4041420    Gqozo       2011/09/22  2013/09/21  2012/07/20
A4041494    Henneberry  2011/09/21  2013/09/20  2013/01/21
A4041522    Monepya     2011/09/16  2013/09/15  2013/01/21
A4041600    Vezi        2011/09/16  2013/09/15  2012/12/13
A4041640    Cupido      2011/09/27  2013/09/26  2012/09/25
A4041640    Cupido      2011/09/26  2013/09/25  2012/11/27
A4041644    Mfingwana   2011/09/27  2013/09/26  2013/01/21
A4041644    Mfingwana   2011/09/27  2013/09/27  2013/01/21
A4041665    Mafura      2011/09/29  2013/09/28  2012/12/13
A4041770    Mlangeni    2011/09/17  2013/09/16  2012/10/12
A4041965    Vukeya      2011/09/17  2013/09/17  2012/11/22
A4042005    Tayerera    2011/09/17  2013/09/16  2012/11/27
A4042005    Tayerera    2011/11/11  2013/11/10  2012/11/27
A4042005    Tayerera    2011/11/11  2013/11/10  2012/11/27
A4042005    Tayerera    2011/09/17  2013/09/16  2012/11/27
A4042029    Wallace     2011/09/17  2013/09/16  2013/01/21
A4042188    Khoza       2011/10/04  2013/10/04  2012/04/04
A4042212    Gocini      2011/09/30  2013/09/29  2012/10/29 
```

我想按 EPPACC 分组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T09:41:01.540

这是一个有效的解决方案。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class Test {

    static ArrayList<XSSFWorkbook> grouplist = new ArrayList();

    public static void main(String[] args) throws IOException {

        JFrame frame = new JFrame();
        JFileChooser chooser = new JFileChooser();
        chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int option = chooser.showOpenDialog(frame); // parentComponent must a component like JFrame, JDialog...
        File file = option == JFileChooser.APPROVE_OPTION ? chooser.getSelectedFile() : null;

        try {
            if (file != null) {
                FileInputStream fis = new FileInputStream(file);

//Get the workbook instance for XLS file
                XSSFWorkbook workbook = new XSSFWorkbook(fis);

//Get first sheet from the workbook
                XSSFSheet sheet = workbook.getSheetAt(0);

//Iterate through each rows from first sheet
                Iterator<Row> rowIterator = sheet.iterator();
                Row header = rowIterator.next();//skiping columns header
                while (rowIterator.hasNext()) {
                    Row row = rowIterator.next();
                    Cell cell = row.getCell(0);
                    String EPPACC = cell.getStringCellValue();
                    int i = validateGroup(header, cell.getStringCellValue());
                    XSSFWorkbook group = grouplist.get(i);
                    XSSFSheet sh = group.getSheet(EPPACC);
                    int rc = sh.getLastRowNum() + 1;
                    //creating a row
                    XSSFRow rowx = sh.createRow(rc);
                    for (Cell c : row) {
               //Creating cells
                        int cellType = c.getCellType();
                        XSSFCell cc = rowx.createCell(c.getColumnIndex(), cellType);
                        switch (cellType) {
                            case Cell.CELL_TYPE_BOOLEAN:
                                cc.setCellValue(c.getBooleanCellValue());
                                break;
                            case Cell.CELL_TYPE_NUMERIC:
                                cc.setCellValue(c.getNumericCellValue());
                                break;
                            case Cell.CELL_TYPE_STRING:
                                cc.setCellValue(c.getStringCellValue());
                                break;
                        }

                    }
                }
                fis.close();

                for (XSSFWorkbook book : grouplist) {
                    int lastRowNum = book.getSheetAt(0).getLastRowNum();
                    String name = book.getSheetAt(0).getSheetName();
                    FileOutputStream out = new FileOutputStream(new File(file.getParentFile() + "/" + name + ".xlsx"));
                    book.write(out);
                    out.close();
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static int validateGroup(Row header, String value) throws FileNotFoundException, IOException {
        for (int i = 0; i < grouplist.size(); i++) {
            XSSFWorkbook group = grouplist.get(i);
            XSSFSheet sheet = group.getSheet(value);
            if (sheet != null) {
                //group exist.
                return i;
            }
        }
        //create a new book
        XSSFWorkbook group = new XSSFWorkbook();
        //create a new sheet
        XSSFSheet sheet = group.createSheet(value);
        XSSFRow row = sheet.createRow(0);
        Iterator<Cell> iterator = header.iterator();
        while (iterator.hasNext()) {
            Cell cell = iterator.next();
            XSSFCell c = row.createCell(cell.getColumnIndex(), cell.getCellType());
            c.setCellValue(cell.getStringCellValue());
        }
        grouplist.add(group);
        return grouplist.size() - 1;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:44:10.077

每个组都有一个单独的数据集合，假设这里基于`CELL_TYPE`

```
List<Boolean> myboolData;
List<Integer> myIntData;
List<String> myStrings; 
```

然后根据读取的数据中的组选择，分配到特定的集合（即组）

```
switch(cell.getCellType()) {
            case Cell.CELL_TYPE_BOOLEAN:
                myboolData.add(cell.getBooleanCellValue());
                break;
            case Cell.CELL_TYPE_NUMERIC:
                 myIntData.add(cell.getNumericCellValue());
                break;
            case Cell.CELL_TYPE_STRING:
                 myStrings.add(cell.getStringCellValue());
                break;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:42:54.163

我还没有研究分组问题，但想在此声明中引起您的注意。

```
file.close(); 
```

从此方法的文档中[`java.io.FileInputStream.close()`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#close%28%29)：

> 关闭此文件输入流并释放与该流关联的任何系统资源。如果此流具有关联的通道，则该通道也将关闭。

这可能会关闭`XSSFWorkbook`实例`workbook`并使其无法使用。

# ios - Phonegap CordovaLib 语义错误

> ID：15129924
> 
> 赞同：0
> 
> 时间：2013-02-28T07:31:47.463
> 
> 标签：ios, cordova, mobile, ios4

我正在为 iOS 使用 Phonegap 2.4.0。当我创建一个科尔多瓦项目并在 iPad5.1 模拟器中运行它时，我收到了这个错误

> 语义问题预期读取字典元素的方法在“Nsdictionary *”类型的对象上找不到

我按照本教程指南 [_getting-started_ios](http://docs.phonegap.com/en/2.4.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

而且我不知道我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:04:52.243

检查您的 xcode 版本 - 它需要是 4.5 或更高版本。升级 xcode 后重建您的 cordova / phonegap 项目，错误应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T21:06:14.580

如果您有 Xcode 的更新版本，请确保您的 project/platforms/ios/build 目录没有以某种方式被删除。

# html - 使用 Rails 3 的两列 HTML 表格

> ID：15129925
> 
> 赞同：2
> 
> 时间：2013-02-28T07:31:50.643
> 
> 标签：html, ruby-on-rails, ruby, html-table

我在这个主题上认真搜索了 3 天，但我找不到任何可以帮助我解决问题的东西。

我有一张为我工作的工厂打印看板卡的表格，但我需要打印它们的 Avery 表是 2 col x 3 行，而我的表格显示 3 col X 2 行。

## 卡 1|卡 2|卡 3

## 卡 4|卡 5|卡 6

我需要这个布局是 X 行的 2 列。

## 卡 1|卡 2

## 卡 3|卡 4

## 卡 5|卡 6

这是我的 Rails 视图：

```
 <% count = @card.start%>
<% @card.finish.times do %>
<table border="0" cellspacing="5" cellpadding="5" class="table">
    <tr>
    <tr>
        <td id="part_no_card_no" class="all">
            <%= @card.part_no %>
            &nbsp
            &nbsp
            <%= count %> /
            <%= @card.finish %>
        </td>
    </tr>   
    <tr>
        <td>
            <%= image_tag "#{@card.part_no}" + "-" + "#{count}" + "-" + "#{@card.finish}" + ".png" %>
        </td>
    </tr>
    <tr>
        <td>
            <%= @card.description %>
        </td>
    </tr>
    <tr>
        <td>
            <%= @card.from_loc %>
            -
            <%= @card.to_loc %>
        </td>
    </tr>
    <tr>
        <td>
            Cantidad en Bin: <%= @card.bin_qty %>  EA
        </td>
    </tr>

        </td>
    </tr>

    </tr>
</table>
<% count += 1 %>
<% end %> 
```

我希望有人可以为这项任务提供一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:38:40.843

首先，我不太了解你的卡片系统和它的属性，因为你只是展示了一些简单的布局，但你`view`看起来更高级。所以我给你一个关于我的代码的例子，我会在需要的时候编辑它。

我有一个名为的表`user_menus`，我想将其显示为：（`[]`意思是`checkbox`）

```
[] Products     [] Suppliers
[] Categories   [] Units 
```

我用[`.in_groups_of()`](http://apidock.com/rails/Array/in_groups_of)它。

```
<table class="table table-condensed">
    <% @user_menus.in_groups_of(2, false) do |user_menu_array| %>
      <tr>
        <% for user_menu in user_menu_array %>
        <td>
          <label class="checkbox">
          <%= check_box_tag "user_group[user_menu_ids][]", user_menu.id, @user_group.user_menus.include?(user_menu), :checked => true %>
          <%= user_menu.name %>
          </label>
        </td>
        <% end %>
      </tr>
    <% end %>
  </table> 
```

使用此代码，我可以轻松生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:02:06.773

这更像是一个 HTML 的东西。要连续有两列，请在标签内保留两个 '，例如。

例如 2 列

```
<tr>
 <td>col-1</td>
 <td>col-2</td>
</tr> 
```

4列

```
<tr>
 <td>col-1</td>
 <td>col-2</td>
 <td>col-3</td>
 <td>col-4</td>
</tr> 
```

# c - 在 C 中返回值

> ID：15129932
> 
> 赞同：-2
> 
> 时间：2013-02-28T07:32:15.637
> 
> 标签：c, function, return

好的，我只是完全专注于我的家庭作业，我的大脑现在无法正常工作。我仍然不是一个好的程序员，所以我需要帮助来想知道代码中发生了什么，我该如何修复它们。

我无法理解使用指针。

我不确定我是否正确地尝试返回值。将有另一个程序，我必须编写代码才能实际使用这些功能，但我首先得到了这个程序。

对于添加函数，我试图使项目指向每个参数以获取数据。

对于 AddItem 函数，我试图让一个新项目从 Add Function 指向项目并获取该数据。

包含函数（仍在工作）：我必须从 AddItem 函数中获取一个参数。如果 item 存在则返回 true，如果不存在则返回 false。

获取函数（仍在进行中）：与包含函数的参数相同。返回找到的项目的指针，如果未找到项目，则返回 NULL。

数据.h

```
 #ifndef DATA_H_
  #define DATA_H_

  /*
   * Database Struct
   */
    typedef struct
    {
       /*char *array[10];*/
        Iteminfo *itemdata;
        int counter;
    }databaseinfo;

    /*
     * Item Struct
     */
     typedef struct
     {
     int IDnum;
      double price;
     char * Name;
     }Iteminfo;

    /*
     * Prototypes
      */
         char DatabaseManage();
         int Add();
         char AddItem();
         int Contains();
         int Get();

         #endif /* DATA_H_ */ 
```

数据库管理.c

```
#include <stdio.h>
#include "Data.h"

   /*
    * Constructor Function
    * @Parameters databaseinfo, count
    * Creates and returns the database
    */
     databaseinfo constructor(Iteminfo *itemdata, int counter)
     {
       databaseinfo *newdb = malloc(sizeof(databaseinfo));
       return constructor;

     }
     /*
    * Add Function
    * @Parameters Iteminfo, IDnum, price, Name
    *  Adds an item to the database
    */
       int Add(Iteminfo *item, int IDnum, double price, char * Name)
       {
      item->IDnum = IDnum;
      item->price = price;
      item->Name = Name;

      return item;
   }

   /*
    * AddItem Function
    * @Parameters Iteminfo
    * Copies item to database
    */
    char AddItem(Iteminfo *item, char * newItem)
     {
     newitem->item = item;
      return copyitem;

     }

    /*
     * Contains Function
     * @Parameter
     * Returns if the item exists or not in the database
     */
    int Contains(void)
    {

    }

    /*
     * Get Function
     * @Parameters
     * Returns the pointer of the item from the database
     */
     int get(void)
     {

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:40:25.050

首先：

```
 databaseinfo constructor(Iteminfo *itemdata, int counter)
 {
   databaseinfo *newdb = malloc(sizeof(databaseinfo));
   return constructor;
 } 
```

当您在函数中编写 return 时，如果它不是函数，则应该返回该值`void`。

所以应该是：

```
 databaseinfo* constructor(Iteminfo *itemdata, int counter)
 {
   databaseinfo *newdb = (databaseinfo*)malloc(sizeof(databaseinfo));
   // your code here for data initialization
   return newdb; 
 } 
```

在这种情况下，该函数将返回一个指向已分配内存的指针。

以此类推。

# android - 如何处理传入的短信？

> ID：15129933
> 
> 赞同：-1
> 
> 时间：2013-02-28T07:32:16.723
> 
> 标签：android, sms

我的应用程序应该可以处理传入的短信。它应该类似于将短信发送者添加到黑名单。并且此操作对用户来说应该非常简单（例如 gmail 应用程序中的“报告垃圾邮件”）。但看起来我无法为传入的短信添加上下文菜单项，因为用户可以使用任何应用程序来阅读短信。我还可以做些什么？我正在考虑将短信重新发送（转发）到另一个号码，将其作为外发短信捕获。但这并不是那么简单......而且，我认为在这种情况下我不会得到发件人的号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:35:54.027

你为什么要费尽心思重新发送它？

您需要做的[就是](http://developer.android.com/reference/android/content/BroadcastReceiver.html)为`android.provider.Telephony.SMS_RECEIVED`. 在`onReceive()`您的接收器中，您可以检查 SMS 的内容，以及它是从哪个号码发送的。然后，您可以启动一个活动（不推荐），或显示通知（推荐）以询问用户是否要将其标记为垃圾邮件。如果他确实将其标记为垃圾邮件，只需拨打电话`abortBroadcast()`以防止 SMS 到达用户的收件箱。

# putty - SCP，从网站下载文件到本地电脑

> ID：15129940
> 
> 赞同：0
> 
> 时间：2013-02-28T07:32:50.680
> 
> 标签：putty, scp

我正在使用腻子连接到网站。我知道如何使用 PC 中的普通终端将文件从网站复制到我的计算机，但我的问题是，如果我已经登录网站并且想将文件复制到本地 PC，是否需要将我的电脑IP地址？？

这里更容易描述问题：

```
scp kk.txt [my local pc] 
```

现在我应该用什么代替[我的本地电脑]？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:41:08.997

如果你有静态 IP - **scp kk.txt username@STATIC_IP:directory_to_copy_file**

例如 scp kk.txt user@1.2.3.4:~ （将其复制到您的主文件夹）

如果你有动态 ip，你不能从网站 scp 到你的本地电脑，但你可以反过来做，比如

**scp username@webiste_address:file_path ur_local_directory** 例如 scp me@somesite.com:~/kk.txt 。（这会将文件 kk.txt 复制到您的当前目录）

始终推荐第二种方法，因为您不必担心您的 ip 地址，您只需要知道要从中复制数据的远程站点的地址。

# cascading - 级联：如何读取或写入多字符字？

> ID：15129946
> 
> 赞同：0
> 
> 时间：2013-02-28T07:33:18.510
> 
> 标签：cascading

如果“每个”从文件中读取 GBK 字符串并将 GBK 字符串写入文件，我该怎么办？如何定义它？

```
Fields namesFields = new Fields("zid", "vid", "title", "number");
sourcePipe = new Each(sourcePipe, new Fields("line"), new Parse(namesFields), Fields.ALL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:30:06.807

2013年2月27日晚上11点24分，陈东写道：

> 如果我想读取字符串（格式：GBK）和写入字符串（格式：GBK）。我能怎么做？

[http://docs.cascading.org/cascading/2.1/javadoc/cascading/scheme/hadoop/TextLine.html](http://docs.cascading.org/cascading/2.1/javadoc/cascading/scheme/hadoop/TextLine.html)

使用带有 charsetName 参数的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:34:47.930

每个都用于对输入数据执行[功能](http://docs.cascading.org/cascading/1.2/userguide/html/ch05s02.html)或[过滤。](http://docs.cascading.org/cascading/1.2/userguide/html/ch05s03.html)

如果您在像这样的列中有数据`"zid", "vid", "title", "number"`，

您可以对其中一列执行过滤。如果列标题没有 jdk 字符串，您可以过滤数据。

这样带有 jdk 字符串的元组将被打印为输出。

为此，您必须通过实现接口和扩展类来编写[用户定义的过滤器。](http://docs.cascading.org/cascading/1.2/userguide/html/ch05s03.html)`filter``baseoperation`

# jquery - 在 jQuery UI 向左滑动动画期间使 UL 内联

> ID：15129952
> 
> 赞同：2
> 
> 时间：2013-02-28T07:33:40.827
> 
> 标签：jquery, css, jquery-ui

我做了一个快速的 jsFiddle 来展示我遇到的问题：

[jsFiddle](http://jsfiddle.net/x2MgQ/10/)

JavaScript（主要来自[Multipart Form - jQuery](https://stackoverflow.com/questions/3052120/multipart-form-jquery)）

```
$('.step1').siblings('ul').hide(); // hide all except step 1

$('.continue').click(function(){
    $(this).closest('.step').hide("slide", direction:"left"},1500).parent().next('.step').show("slide",{direction:"right"},1500);
    return false;
});

$('.back').click(function(){
    $(this).closest('.step').slideUp().prev('.step').slideDown();
    return false;   
}); 
```

HTML

```
Non-Floater
<form class="a">
   <ul class="step step1">
      <li>item</li>
      <li>item</li>
      <li>
         <button class="continue">Continue</button>
      </li>
   </ul>

   <ul class="step step2">
      <li>item</li>
      <li>item</li>
      <li>
        <button class="back">Back</button>
        <button class="continue">Continue</button>
      </li>
   </ul>
</form>

Floater
<form class="floater">
   <ul class="step step1">
      <li>item</li>
      <li>item</li>
      <li>
         <button class="continue">Continue</button>
      </li>
   </ul>

   <ul class="step step2">
      <li>item</li>
      <li>item</li>
      <li>
         <button class="back">Back</button>
         <button class="continue">Continue</button>
      </li>
   </ul>
</form> 
```

CSS

```
ul {
   margin: 0;
   padding: 0;
   list-style-type: none;
}
.floater ul {
   width: 30%;
   float: left;
} 
```

当您单击“继续”时，第二个 UL 进入，但它偏移低于当前 UL。理想情况下，这将直接进入第一个 UL 的右侧。

添加“float:left;width:30%”会有所帮助，但它仍然会跳来跳去。（jsFiddle上的第二个）

显示：内联似乎也会引起怪异......

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:45:04.320

一种可能的解决方案...

我决定尝试其他方法，现在在滑出动画完成后运行动画

更新[了 jsFiddle](http://jsfiddle.net/CFusz/)

更改了 JavaScript

```
$('.step1').siblings('ul').hide(); // hide all except step 1

$('.continue').click(function(){
    $(this).closest('.step').hide('slide',{direction:"left"},300, function() {
        $(this).next('.step').show("slide",{direction:"right"},200);
    });
    return false;
});
$('.back').click(function(){
    $(this).closest('.step').hide('slide',{direction:"right"},300, function() {
        $(this).prev('.step').show("slide",{direction:"left"},200);
    });
   return false;
}); 
```

它“似乎”按照我的意愿工作，但这只是因为动画时间短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:03:40.530

尝试将其添加到 css：

```
.step2 {
    position: absolute;
    top: 10px;
} 
```

# html - 什么是 bootstrap/less/html5？

> ID：15129957
> 
> 赞同：2
> 
> 时间：2013-02-28T07:34:02.673
> 
> 标签：html, twitter-bootstrap, less

有人让我使用 bootstrap/less/html5 剪切设计布局，我不太确定它们的意思。我从 twitter 上发现了一些与 bootstrap 相关的东西，但没有与 less 相关。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T07:51:32.713

Bootstrap 是来自 twitter 的 CSS 框架。非常适合前端原型设计和构建强大的跨浏览器和移动友好型网站。

HTML5 它是 html 的改进版本，并且正在持续开发中以提高健壮性和可用性。

Less 是一个 CSS 预处理器。它允许您更动态地编写 css，提供可重用性并缩短编写和管理大型 css 文件的时间。

链接阅读更多关于它们的信息：

引导：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

HTML5：[http ://www.w3schools.com/html/html5_intro.asp](http://www.w3schools.com/html/html5_intro.asp)

减： http: [//lesscss.org](http://lesscss.org)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:53:21.583

Less 是一种动态样式表语言。你可以在这里找到它，[Less](http://lesscss.org/)。

Bootstrap 是一个定义网页的框架。这对设计师来说很常见，因为他们可以生成跨浏览器的 HTML/Javascript，非常简单，也可以在移动设备上使用。[引导程序](http://twitter.github.com/bootstrap/)。

HTML5 是定义网页的最新标准。它比以前的版本更强大。如果您想了解更多信息，请尝试搜索 HTML5。

这个工具有很多在这里无法描述的功能。检查链接，您将毫无困难地学习。

# javascript - 使用 onclick 调用函数还是使用 .click 绑定事件更好？

> ID：15129968
> 
> 赞同：8
> 
> 时间：2013-02-28T07:34:58.150
> 
> 标签：javascript, jquery, events, onclick, onclicklistener

假设我有一个 div，并且我想让某个代码在用户单击该 div 时运行。我可以通过 2 种方式做到这一点。

HTML

```
<div id="clickme">Click Me</div> 
```

Javascript

```
$(document).ready(function(){
    $('#clickme').click(function(){
        //Other code here doing abc.
    });
}); 
```

第二种方法是调用一个函数，该函数正是这样做的，但它是由一个函数调用的

```
<div id="clickme" onclick="clickme()">Click Me</div> 
```

Javascript

```
function clickme(){
    //Other code doing abc.
} 
```

我的问题是这两个代码都在做同样的事情吗？哪个更有效和推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:39:56.080

这取决于。通常，如果它很简单，我更喜欢使用 onlick=""。

另一方面，如果它更复杂并且你想要执行大量代码，我更喜欢使用绑定事件以提高可读性。

老实说，我相信 onclick="" 在性能/内存使用等方面更好。您使用的绑定事件在 jquery 层中，并且使用 onclick 事件直接从您的元素调用。

这是一个选择的问题，真的。

我喜欢绑定事件的一点是，您可以无限可能地绑定和捕获点击或击键。还有 jquery 插件来增强绑定事件，例如延迟绑定等（延迟绑定是当您按下一个键并且代码在您按下它后执行 x 秒数时，这在您键入时进行搜索时很棒通过ajax，因为它阻止了每次按键的请求）

如果您需要更多信息，请告诉我。

希望我给了你一个很好的见解:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:47:56.107

这取决于您是否喜欢：

1) 一个匿名函数绑定在 JQuery 的文档就绪事件上

这意味着您的命名空间不会被您不关心的另一个函数名称弄乱。这也意味着代码与其余的初始化例程一起。它还允许您绑定多个事件。

2) 一种绑定命名函数的声明方式。

这意味着您的函数需要相应地命名，您必须搜索文档以查看它是否/在哪里绑定。它也少了一个选择器调用，所以当然它在速度方面更有效。

为了编码清晰，大多数时候我会建议您将 javascript 初始化代码与 HTML 声明分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:44:26.743

使用 .click(function(){ } 更好，因为它遵循标准事件注册模型。

在这里你可以分配多个回调，

前任：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#clickme").click(function() {
        alert("clicked!");
    });
    $("#clickme").click(function() {
        alert("I concur, clicked!");
    });
});
</script> 
```

在这里，如果您使用 bind() 绑定您的点击功能，那么您可以根据需求取消绑定该特定功能。

# ns2 - 在 ns2 中寻找 Goodput

> ID：15129972
> 
> 赞同：0
> 
> 时间：2013-02-28T07:35:12.737
> 
> 标签：ns2

我试图在 ns2 的哑铃形拓扑中找到 Goodput，以便比较 TCP Reno、NewReno、Tahoe 的 goodput 值。有人可以帮忙吗？我能够创建拓扑、运行协议并获取 .nam 文件。但是如何分析它以找到好的输入是问题所在。Goodput是每单位时间传输的原始数据。但是如何从数据包中删除标头等以获得每单位时间发送的有效数据量（也忽略重传）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T17:31:56.083

```
 hdr_size = pkt_size % $x
   # where $x is the packet's data part size

   pkt_size -= hdr_size
   # Store received packet's size
   recvdSize += pkt_size 
```

然后使用公式 (recvdSize/(stopTime-startTime))*(8/1000)

找到好的放..

# ruby-on-rails - rails mongoid中的多键索引

> ID：15129976
> 
> 赞同：3
> 
> 时间：2013-02-28T07:35:29.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, multikey

我想以这种格式存储数据。

```
{
 "_id": ObjectId(...)
 "title": "Grocery Quality"
 "comments": [
    { author_id: ObjectId(...)
      date: Date(...)
      text: "Please expand the cheddar selection." },
    { author_id: ObjectId(...)
      date: Date(...)
      text: "Please expand the mustard selection." },
    { author_id: ObjectId(...)
      date: Date(...)
      text: "Please expand the olive selection." }
 ]
} 
```

我对如何为我的数据实现这种格式感到困惑。

我正在使用 mongoid；Mongoid 支持多键索引吗？

如何使用 mongoid 来实现我想要的格式和行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:01:01.230

I'm not sure if I got your doubt correctly but as I can't comment I'm answering right away. If it isnt this what you asked, please explain a little bit more =)

You have your model with those fields you wrote before, I will call it Post model. For the comments on it, I would suggest you create another model callend Comment and embed it on the Post model:

```
class Post
  field: title
  embeds_many :comments
end

class Comment
  field :date
  field :text
  has_one :author
  embedded_in :post
end 
```

And to index the comments on the Post model you could do:

```
index({ :"comments.updated_at" => 1 }) 
```

# java - 如何从纯数字字符串中获取 11 个字母数字的唯一 ID？

> ID：15129983
> 
> 赞同：1
> 
> 时间：2013-02-28T07:35:53.617
> 
> 标签：java, algorithm, uniqueidentifier

*   我有一个原始字符串，它可以是 12 位字符串，也可以是 19 位客户 ID，它也只包含数字。这两种情况都是独一无二的。
*   为了这个问题，让我们假设我们正在处理一个 12 位的字符串，如果您提出解决方案，那么它也必须适合 19 位的情况。
*   我们的客户希望我们创建一个长度必须为 11 个字符的 SECOND 唯一字符串（无论原始字符串是 12 位还是 19 位）；此唯一字符串/ID 应包含字母数字字符，其中“alpha”表示所有字母都可以是其中的一部分；即“参与”字符仅是数字+从“a”到“e”的小写字母的解决方案是不够的，因为它给我们提供的选项比使用所有小写和大写字母时更少。
*   请注意，我不需要加密，但需要 UNIQUE 功能。
*   我将不胜感激任何帮助，首选示例或示例链接。
*   如果有人知道解决这种情况的第三方包，那么请留下一个链接。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:51:17.430

您可以尝试一种方法。

将您的 12 位数字转换为二进制表示，应该可以用 5 个字节表示。使用base64编码，应该可以用9个字母数字字符表示。（好的...... base64 确实包含几个非字母数字字符......：P）

（如果您难以将其设为 5 字节表示，则将 12 位数字分解为 3 组 4 位数字，每组 2 字节表示也应该可以）

搜索base64并了解一下，然后你可以用类似的方式实现自己的编码方法。

* * *

添加一些代码：（未经测试，只是给你一个想法）

```
String originalId= "123456789012";

String resultString = new String(Base64.encodeBase64(new BigInteger(originalId).toByteArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:31:45.040

最初的答案建议使用基数为 36 的 BigInteger，但这对于 19 位数字来说是不够的。

我不知道是否有库可以转换为 base 62，但下面的人为示例让您了解如何做到这一点。输出是：

> originalId = 999999999999999999
> newId = bUI6zOLZTrh
> retrieveOriginalId = 999999999999999999

使用 base 62 的基本原理如下：

*   如果原始编号是唯一的，那么新编号也将是唯一的，因为它们实际上是相同的编号（即存在一对一的关系）
*   您可以`N ^ 11`以 N 为底表示 11 个字符的数字（例如，以 10 为底，一个 11 位数字可以介于 0 和 10 ^ 11 或 1000 亿之间）
*   最大的 19 位数字（以 10 为底）是 10 ^ 19 - 1
*   当 N = 62 时，您有 62 ^ 11 = 5 * 10 ^ 19 种可能性，它大于 10 ^ 19，因此可以表示任何 19 位数字。实际上使用基数 54 就足够了。

示例代码（受 BigInteger 和 Long 类启发的算法 - 将添加异常处理）：

```
class Base62 {

    private static final BigInteger RADIX = BigInteger.valueOf(62);
    private static final char[] DIGITS = {
        '0', '1', '2', '3', '4', '5',
        '6', '7', '8', '9', 'a', 'b',
        'c', 'd', 'e', 'f', 'g', 'h',
        'i', 'j', 'k', 'l', 'm', 'n',
        'o', 'p', 'q', 'r', 's', 't',
        'u', 'v', 'w', 'x', 'y', 'z',
        'A', 'B', 'C', 'D', 'E', 'F',
        'G', 'H', 'I', 'J', 'K', 'L',
        'M', 'N', 'O', 'P', 'Q', 'R',
        'S', 'T', 'U', 'V', 'W', 'X',
        'Y', 'Z'
    };

    public static void main(String[] args) throws IOException {
        String originalId = "999999999999999999";
        System.out.println("originalId = " + originalId);

        String newId = getBase62From10(originalId);
        System.out.println("newId = " + newId);

        String retrieveOriginalId = getBase10From62(newId);
        System.out.println("retrieveOriginalId = " + retrieveOriginalId);
    }

    /**
     *
     * @param number a positive number in base 10
     *
     * @return the same number, in base 62
     */
    public static String getBase62From10(String number) {
        char[] buf = new char[number.length()];
        int charPos = number.length() - 1;

        BigInteger i = new BigInteger(number);
        BigInteger radix = BigInteger.valueOf(62);

        while (i.compareTo(radix) >= 0) {
            buf[charPos--] = DIGITS[i.mod(radix).intValue()];
            i = i.divide(radix);
        }
        buf[charPos] = DIGITS[i.intValue()];

        return new String(buf, charPos, (number.length() - charPos));
    }

    /**
     *
     * @param number a positive number in base 62
     *
     * @return the same number, in base 10
     */
    public static String getBase10From62(String number) {
        BigInteger value = BigInteger.ZERO;
        for (char c : number.toCharArray()) {
            value = value.multiply(RADIX);
            if ('0' <= c && c <= '9') {
                value = value.add(BigInteger.valueOf(c - '0'));
            }
            if ('a' <= c && c <= 'z') {
                value = value.add(BigInteger.valueOf(c - 'a' + 10));
            }
            if ('A' <= c && c <= 'Z') {
                value = value.add(BigInteger.valueOf(c - 'A' + 36));
            }
        }
        return value.toString();
    }
} 
```

# android - android中的ActionBar和滑出菜单

> ID：15129985
> 
> 赞同：4
> 
> 时间：2013-02-28T07:35:55.573
> 
> 标签：android, android-actionbar, android-sliding

我只想创建一个作为foursquare 应用程序的操作栏。![在此处输入图像描述](../Images/ed89ab4853120fa61f38ebc1a82b6b54.png)

我想在按下主页按钮时显示一个滑出菜单，就像显示的图像一样。 ![在此处输入图像描述](../Images/a1d2541303ef0b5001bf68461dfb347d.png)

我能够创建自定义操作栏，但不像第一个图像。请提供任何有助于创建操作栏的教程

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-19T19:01:36.860

您可以使用 Google Android SDK 中包含的版本（而不是 3rd 方库。）

阅读有关[导航抽屉](http://developer.android.com/training/implementing-navigation/nav-drawer.html)的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:37:21.373

[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)是一个很棒且易于使用的库。

编辑：对不起，以为问题只是关于滑入式菜单。对于 actionbar，你最好的库是[ActionbarSherlock](http://actionbarsherlock.com/)

# python - 如何使用 regexp + Python 从 XML 中获取指定标签属性的值？

> ID：15129986
> 
> 赞同：-3
> 
> 时间：2013-02-28T07:36:05.460
> 
> 标签：python, regex, python-2.7, xml-parsing

我有一个解析一些 xml 的脚本。XML 包含：

```
<SD TITLE="A" FLAGS="" HOST="9511.com">
<TITLE TEXT="9511 domain"/>
<ADDR STREET="Pmb#400, San Pablo Ave" CITY="Berkeley" STATE="CA" COUNTRY="US"/>
<CREATED DATE="13-Oct-1990" DAY="13" MONTH="10" YEAR="1990"/>
<OWNER NAME="9511.Org Domain Name Proxy Agents"/>
<EMAIL ADDR="proxy@9511.org"/><LANG LEX="en" CODE="us-ascii"/>
<LINKSIN NUM="75"/><SPEED TEXT="3158" PCT="17"/>
<CHILD SRATING="0"/>
</SD>
<SD>
<POPULARITY URL="9511.com/" TEXT="1417678" SOURCE="panel"/>
</SD> 
```

如何获取标签的'TEXT'属性值（在我的情况下为1417678）？我正在使用正则表达式+Python。正则表达式字符串：

```
my_value = re.findall("POPULARITY[^\d]*(\d+)", xml) 
```

它给我'9511'，但我需要'1417678'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:48:09.770

您可以使用`BeautifulSoup`

```
import BeautifulSoup

xml = '''<SD TITLE="A" FLAGS="" HOST="9511.com">
<TITLE TEXT="9511 domain"/>
<ADDR STREET="Pmb#400, San Pablo Ave" CITY="Berkeley" STATE="CA" COUNTRY="US"/>
<CREATED DATE="13-Oct-1990" DAY="13" MONTH="10" YEAR="1990"/>
<OWNER NAME="9511.Org Domain Name Proxy Agents"/>
<EMAIL ADDR="proxy@9511.org"/><LANG LEX="en" CODE="us-ascii"/>
<LINKSIN NUM="75"/><SPEED TEXT="3158" PCT="17"/>
<CHILD SRATING="0"/>
</SD>
<SD>
<POPULARITY URL="9511.com/" TEXT="1417678" SOURCE="panel"/>
</SD>'''

soup = BeautifulSoup.BeautifulSoup(xml)

print(soup.find('popularity')['text']) 
```

输出

```
u'1417678' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T08:26:38.617

您只是匹配元素名称之后出现的第一个十进制数字序列。`'(\d+)'`在任意数量的非数字之后的第一个数字序列`'[^\d]*'`是`9511`.

为了属性的`findall`值`@TEXT`，这样的事情会起作用：

```
my_values = re.findall("<POPULARITY(?:\D+=\"\S*\")*\s+TEXT=\"(\d*)\"", xml) # returning a list btw 
```

或者，如果没有其他属性将只有数字值，除了`@TEXT`：

```
 re.findall("<POPULARITY\s+(?:\S+\s+)*\w+=\"(\d+)\"", xml) 
```

Where`(?:...)`匹配包含的表达式，但不充当可寻址组，例如`(...)`. 特殊序列`\S`和`\D`是它们的小写对应物的反转，分别扩展到（除了）空白和数字。

然而，正如已经提到的，正则表达式并不意味着在 XML 上使用，因为 XML 不是常规语言。

# javascript - 回调中的javascript变量范围

> ID：15129987
> 
> 赞同：0
> 
> 时间：2013-02-28T07:36:08.753
> 
> 标签：javascript, jquery

我很好奇这怎么写得更好：

```
function Klass(variable) {
    this.variable = variable;

    this.callAjax = function() {
        $.get('/url', { }, function(json) {
            console.log(variable); //! <-- shows undefined
        }, "json");
    }
} 
```

所以我创建了一个局部变量：_variable

```
function Klass(variable) {
    this.variable = variable;

    this.callAjax = function() {
        var _variable = this.variable;
        $.get('/url', { }, function(json) {
            console.log(_variable); //! <-- its ok
        }, "json");
    }
} 
```

它很好，但我真的没有这个解决方案，

你们中有人有更好的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:46:02.370

就是这样。

```
function(json){console.log(_variable);} 
```

与“_variable”形成一个闭包。"_variable" 永远保持原始值。

如果您的“变量”应该稍后更新，并且您想要更新的“变量”您定义

```
var self = this; 
```

并调用 self.variable 来获取它。

通过这种方式，您将在每次执行回调时获得更新的“变量”。

完整代码：

```
function Klass(variable) {
    var self = this;
    this.variable = variable;
    this.callAjax = function() {
        $.get('/url', { }, function(json) {
            console.log(self.variable);
        }, "json");
    }
} 
```

# c++ - 在“if”块中分配字符文字

> ID：15129990
> 
> 赞同：0
> 
> 时间：2013-02-28T07:36:12.453
> 
> 标签：c++, memory

我现在对这段代码感到困惑。

```
int flag = 1;
struct {
    char * data;
}
neco;
if(flag) {
    neco.data = "index.html";
}
// insert code here...
std::cout << neco.data;
} 
```

在“if”块之后打印 neco.data 是否安全，或者在“if”块结束后如果块被“清理”，则在内部分配的内存是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:37:26.397

> 在“if”块之后打印 neco.data 是否安全，或者在“if”块结束后如果块被“清理”，则内存分配在内部？

字符串文字永远不会超出范围。该计划本身就是他们的范围。

正如评论中提到的 us2012，**您需要确保 neco.data 已初始化**，或者如果未采用该分支，则永远不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:37:53.650

> 在“if”块之后打印 neco.data 是否安全，或者在“if”块结束后如果块被“清理”，则内存分配在内部？

有问题的字符串文字`"index.html"`, 将继续存在于`if`块的末尾，因此在这方面代码很好。

# jquery - 是否可以通过 jquery 获取嵌入标签属性？

> ID：15129994
> 
> 赞同：-3
> 
> 时间：2013-02-28T07:36:24.030
> 
> 标签：jquery

我试过

```
$('#w001').attr('width'); // return undefined 
```

对于标签：

```
<embed type="application/x-vlc-plugin" class="w001" pluginspage="http://www.videolan.org" 
version="VideoLAN.VLCPlugin.2"  
autoplay="yes" 
id="w001"  
width="512" 
height="384" 
rtsp-caching="80" 
</embed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:38:31.980

尝试使用类选择器获取 DOM。

```
$('embed.w001').attr('width'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:40:03.790

它会起作用的。[Jsfiddle](http://jsfiddle.net/xUbw9/) 这样使用

```
$('#w001').attr('width'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:40:49.873

为我工作：http: [//jsfiddle.net/nmV9X/](http://jsfiddle.net/nmV9X/)

```
console.log($('#w001'))
console.log($('#w001').attr('width')) 
```

输出：

```
jQuery(embed#w001.w001)
512 
```

# amazon-ec2 - 实例仍可通过公共 DNS 访问，但在我的仪表板中处于“停止”状态

> ID：15129995
> 
> 赞同：3
> 
> 时间：2013-02-28T07:36:24.663
> 
> 标签：amazon-ec2

一周前，我创建了几个微型 Amazon Linux 实例用于学习和测试目的。通过 WinSCP 和 PUtty 登录。终止除一个之外的所有测试实例并“停止”我创建的一个测试实例。

我今天再次开始使用 EC2 实例，并将我笔记中的公共 DNS (ec2-50-17-13-137.compute-1.amazonaws.com) 插入浏览器并得到以下信息：

> “恭喜！您的 AWS Elastic Beanstalk PHP 应用程序现在正在您自己的 AWS 云专用环境中运行”

但是，当我转到我的 AWS 仪表板时，我的测试实例处于“停止”状态，并且我的仪表板中没有运行任何 Beanstalk 应用程序。

当我“启动”我剩下的一个测试 EC2 实例时，那里显示的公共 DNS 有所不同。

关于如何回溯以找出为什么此实例仍在运行的任何建议？我的使用情况报告没问题，但我对这个不应该运行的实例感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:48:58.397

当 Amazon Web Services (AWS) 弹性计算 (EC2) 实例停止时，Amazon 通常会重新分配分配给该实例的公有 DNS 名称。在这种特殊情况下，新实例/DNS 用户未更改默认登录页面，这导致相同的 DNS 名称 (ec2-50-17-13-137.compute-1.amazonaws.com) 似乎来自原始这个问题中引用的实例。

因此，当用户在 AWS EC2 控制面板中“停止”然后“启动”一个实例时，除非已为该实例分配了弹性 IP，否则用户必须使用新分配的 Amazon 公共 DNS 来访问重新启动的实例。