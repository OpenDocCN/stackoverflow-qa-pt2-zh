# StackOverflow 问答 12596000-12596999

# python - 使用 yelp api 学习 python

> ID：12596000
> 
> 赞同：0
> 
> 时间：2012-09-26T06:44:37.010
> 
> 标签：python, django, api, python-2.7, django-views

我刚刚开始学习 python/django。我一直在自学 PHP，现在我想学习 python。我在集成 yelp 的 API 时遇到问题。我收到错误：

`Values instance has no attribute 'q'`

我有这个代码：

```
def search(request):
    parser = optparse.OptionParser()
    parser.add_option('-c', '--consumer_key', dest='my_consumer_key_goes_here', help='OAuth consumer key (REQUIRED)')
    parser.add_option('-s', '--consumer_secret', dest='my_consumer_secret_goes_here', help='OAuth consumer secret (REQUIRED)')
    parser.add_option('-t', '--token', dest='my_token_goes_here', help='OAuth token (REQUIRED)')
    parser.add_option('-e', '--token_secret', dest='my_token_secret_goes_here', help='OAuth token secret (REQUIRED)')
    parser.add_option('-a', '--host', dest='host', help='Host', default='api.yelp.com')
    options, args = parser.parse_args()

  # search stuff?
    if 'q' in request.GET and request.GET['q']:
        q = request.GET['q']
        parser.add_option('-q', '--term', dest=q, help='Search term')
        url_params = {}
        if options.q:
            url_params['term'] = options.q
  # Sign the URL
        consumer = oauth2.Consumer(consumer_key, consumer_secret)
        oauth_request = oauth2.Request('GET', url, {})
        oauth_request.update({'oauth_nonce': oauth2.generate_nonce(),
                        'oauth_timestamp': oauth2.generate_timestamp(),
                        'oauth_token': token,
                        'oauth_consumer_key': consumer_key})

        token = oauth2.Token(token, token_secret)
        oauth_request.sign_request(oauth2.SignatureMethod_HMAC_SHA1(), consumer, token)
        signed_url = oauth_request.to_url()
    else:
        message = 'You submitted an empty form.'
    #return HttpResponse(message)
    print 'Signed URL: %s\n' % (signed_url,)

  # Connect
    try:
        conn = urllib2.urlopen(signed_url, None)
        try:
            response = json.loads(conn.read())
        finally:
            conn.close()
    except urllib2.HTTPError, error:
        response = json.loads(error.read())

    return response

    response = request(options.host, '/v2/search', url_params, options.consumer_key, options.consumer_secret, options.token, options.token_secret)
    print json.dumps(response, sort_keys=True, indent=2) 
```

现在，由于我对这整个 python 语言还是新手，我想知道我是否还在正确的地方添加了 API consumer_key、secret 等……？我是否正确设置了此代码？其中大部分来自原始的 yelp api 脚本。我想问题出在该`if options.q:`地区...不确定我是否正确执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:53:50.280

我想说，`parser.parse_args()`在你宣布你的`q`选择之前打电话可能是你的直接问题。

但是，除非我遗漏了您正在尝试做的事情，否则 Django 设置 [1] 是您需要用于前 5 个选项的（根本不要使用 optparse）。然后我不知道您要对其余功能做什么。

[1] [https://docs.djangoproject.com/en/1.4/topics/settings/](https://docs.djangoproject.com/en/1.4/topics/settings/)

# c# - DotNetZip 如何在不创建文件夹的情况下添加所选文件

> ID：12596003
> 
> 赞同：0
> 
> 时间：2012-09-26T06:44:41.570
> 
> 标签：c#, asp.net, dotnetzip

我想从 zip 文件中添加`"test"`所有 pdf 文件`path`

```
using (var zip = new ZipFile())
                {
                    zip.AddSelectedFiles("*.pdf",path);
                    zip.Save(path+"/test.zip"); 
                } 
```

创建 test.zip 文件时有这个目录：

```
**test.zip**\Users\administrator\Documents\vs2010\Projects\my project\**pdf files** 
```

如何使所有pdf文档直接在test.zip中

```
 test.zip\pdf files 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:01:18.990

请尝试以下方法，

```
 using (ZipFile zip = new ZipFile())
  {
    string[] files = Directory.GetFiles(path);
    // filter the files for *.pdf
    zip.AddFiles(files, "Test"); //Test Folder 
    zip.Save(path+"/test.zip"); 
  } 
```

# ios - 在不使用 Xcode 的情况下运行 iOS 应用程序

> ID：12596007
> 
> 赞同：1
> 
> 时间：2012-09-26T06:45:00.317
> 
> 标签：ios, xcode

我正在尝试找到一种方法来自动化在 iOS 上运行一些测试。

有什么方法可以在不使用 Xcode 的情况下在设备上启动应用程序（例如，通过使用脚本）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:43:12.463

我发现下面的工具正是我需要的： [https ://github.com/ghughes/fruitstrap](https://github.com/ghughes/fruitstrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:33:13.117

这个答案不能马上解决你的问题：但你可能想看看 RubyMotion 如何解决这个问题。它从命令行编译文件，将它们安装在模拟器中，并在设备上安装应用程序。我不知道它是如何工作的，但也许你可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T08:35:44.093

看看我的[博客](http://mobiledevtest.blogspot.co.il/2014/02/ios-how-to-run-application-from-command.html)...

Fruitstrap 基于 gdb-arm-apple-darwin（在 xcode 5 上不再使用）。

安装：xcode 5 使用 debugserver 所以你需要使用：[ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller)。

运行应用程序：[idevice-app-runner](https://github.com/crackleware/idevice-app-runner)

# linux - telnet 自动化脚本有时会失败

> ID：12596014
> 
> 赞同：0
> 
> 时间：2012-09-26T06:45:23.343
> 
> 标签：linux, perl, sockets, telnet, tcpdump

我正在运行以下简单的 telnet 脚本，它只是登录到机器并退出。

相同的脚本在一台 Linux 服务器上运行良好（经过 1000 次迭代），但在另一台 Linux 服务器上（持续）失败（在 200 次尝试后失败）。

在失败的情况下，失败所需的迭代次数会有所不同，但失败是持久的。

```
#!/usr/bin/perl
use Net::Telnet;

my $loop = 0;
my $dumpfile = "dump.log";
my $inputfile = "input.log";

for ($loop =1; $loop <=1000; $loop++) {
        print "===============Loop: $loop =====================\n";
        $telnet = new Net::Telnet ( Timeout=>20, Errmode=>'die');
        print "$telnet\n";
        $telnet->open('sys-007');
        $telnet->dump_log($dumpfile);
        $telnet->input_log($inputfile);
        $telnet->waitfor('/login: $/i');
        $telnet->print('root');
        $telnet->waitfor('/Password:$/i');
        $telnet->print('007');
        sleep 2;
        $telnet->print('exit');
        print "=================================================\n";
} 
```

# 脚本退出：

```
pattern match read eof at ./telnettest.pl line 15 (i.e, waitfor('/login: $/i'); Line) 
```

我尝试了以下方法，看看出了什么问题：

1.  在客户端机器中：（sys-007）

    ```
    tcpdump -nvvv -w test.txt host <Server IP> 
    ```

字符串 test.txt 有：

# 成功尝试日志：

```
sys-007 (ttyp0)
^Fl$4
^!^Fl$
login: 
^Fl$4
^Fl$4
root
^(^Fl*
root
bP"u
^Fl*4
bP5u
^.^Fl*
Password:
^Fl*4
^Fl*4
007
^7^Fl6
^Fl64
^9^Fl6
Terminal type? [xterm] 
^Fl64
^Fl64
exit
^Fl<4
^Fl<
exit
^Fl< 
```

# 失败的尝试：

```
sys-007 (ttyp0)
*^hn
+^hn 
```

没有登录：提示！

1.  在服务器机器中：（Linux 服务器）

    ```
    [telnet@server]~% netstat --inet -a | grep telnet | grep sys-007

    There are no TIME_WAIT or CLOSE_WAIT sockets. 
    ```

请告诉我应该寻找什么来找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:58:36.737

我怀疑是 telnet 程序正在等待提示。我通常使用下面的格式来定义提示，以便脚本通常能够从下面给定的选项中找到提示。

```
test  = new Net::Telnet (Timeout => 3000 , Prompt => '/[%#\$>?:] $/' );
$test->open($IPAddress1);
$test->login($Login,$Password1);
my @input=$test->cmd("uname -a\n");
print "Connected to : @input";
@input=$cmd->cmd("pwd\n"); 
```

如果您仍然遇到问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:47:54.253

之后可以正常登录吗？我猜这台服务器正在切断你的连接，因为你建立了太多的连接。

# servlets - 选择复选框时将文本字段值发送到 servlet

> ID：12596017
> 
> 赞同：0
> 
> 时间：2012-09-26T06:45:27.697
> 
> 标签：servlets, checkbox

我正在开发一个 jsp/serlvet 应用程序。我有一个包含复选框和文本字段列表的页面。我想将对应文本框值的选定复选框的值发送到 servlet 。在 servlet 中，我想提取这些值并使用它们。

# iphone - 应用程序在按钮单击方法上播放声音时崩溃

> ID：12596018
> 
> 赞同：0
> 
> 时间：2012-09-26T06:45:36.743
> 
> 标签：iphone

我使用 uibuttons 创建了一个网格视图，现在需要在单击时选择和取消选择按钮。一切正常，但是当我尝试在单击按钮时播放声音时，应用程序通过在控制台中打印以下消息而崩溃：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIButton prepareToPlay]: unrecognized selector sent to instance 0x7526a20'`

为了播放声音，我在 .h 文件中获取了 AVAudioPlayer claas 的对象并在视图中初始化它确实加载方法并在按钮单击时播放它，这是我的代码 .h 文件

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVAudioPlayer.h>
#import <AudioUnit/AudioUnit.h>

@interface PlayViewController : UIViewController<AVAudioPlayerDelegate>
{
    IBOutlet UIButton *resetBtn;
    UIButton *btn[25];
    AVAudioPlayer *tapSound;

}
-(IBAction)reserBtnClkd;
@property(nonatomic,retain) AVAudioPlayer *tapSound;

@end
in .m file
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]];
     NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSString *path=[[NSBundle mainBundle] pathForResource:@"button-3" ofType:@"wav"];
    AVAudioPlayer *Tapsound=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    self.tapSound=Tapsound;
    [Tapsound release];
    [pool release];
    [self setTheIcons];
    resetBtn.layer.cornerRadius=6.0;
    resetBtn.backgroundColor=[UIColor colorWithRed:90/255.00 green:33.00/255.00 blue:179.00/255.00 alpha:1];
    resetBtn.titleLabel.font=[UIFont fontWithName:@"Helvetica" size:22];
    [resetBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
}

#pragma mark
#pragma mark<Creating The Grid View Of Icons>
#pragma mark

-(void) setTheIcons
{
    int x=11;
    int y=55;

    for(int i=1;i<=25;i++)
    {
        btn[i]=[UIButton buttonWithType:UIButtonTypeCustom];
        btn[i].frame=CGRectMake(x, y, 58,58);
        [btn[i] addTarget:self action:@selector(btnClkd:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:btn[i]];

        if(i%5==0)
        {
            x=11;
            y=y+60;
        }
        else
        {
            x=x+60;
        }
    }
    [self reserBtnClkd];
}

-(void)btnClkd:(UIButton*)sender
{
    sender.selected=!sender.selected;

    if(sender.selected)
    {
       // UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(12, 12, 34, 34)];
        UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 58, 58)];
        tempView.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"hover-effectNew.png"]];
        tempView.userInteractionEnabled=NO;
        [sender addSubview:tempView];
        [tempView release];
    }
    else
    {
        NSArray *subviewToRemove=[sender subviews];
        int i=1;
        for(UIView *view in subviewToRemove)
        {
            if(i==2)
            {
            [view removeFromSuperview];
            }
            i++;
        }
    }
    [self.tapSound prepareToPlay];
    [self.tapSound setDelegate:self];
    [self.tapSound play];

} 
```

奇怪的是，只有当我在按钮单击方法上播放声音时，应用程序才会崩溃，否则如果我在视图中播放它确实加载了它就可以正常工作，抓了两天但找不到任何解决方案，请帮忙我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:54:44.550

I think that the problem is that your `self.tapSound` is an `UIButton`(you can see it in the crash log: `'-[UIButton prepareToPlay]: unrecognized selector sent to instance 0x7526a20'`.

Try debugging it step by step and see what happens

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:35:55.460

我认为因为`self.tapSound`是引用`Tapsound`，所以当你调用`[Tapsound release]`它时也会释放属性。我建议直接实例化该属性，如下所示：

```
/*note that you have declared tapSound in your .h 
as a class variable in addition to being a property.
This means you can access it as both.
Wherever you would type self.tapSound, instead use simply tapSound
*/

tapSound = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL]; 
```

# grails - 动作返回值后的 Grails 过滤器

> ID：12596019
> 
> 赞同：4
> 
> 时间：2012-09-26T06:45:41.947
> 
> 标签：grails, filter

我应该从 grails 过滤器的**“之后”操作返回布尔值吗？**我觉得没用，需要确认

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:59:11.180

根据我的经验，我也不需要。“after”过滤器在控制器逻辑之后和模板渲染之前运行。无论您从 after 过滤器返回什么，都会发生渲染阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T10:58:05.540

在 before 闭包中返回 boolean false 将阻止所有未来的过滤器和操作执行。

[http://grails.org/doc/2.3.7/guide/single.html#filterTypes](http://grails.org/doc/2.3.7/guide/single.html#filterTypes)

正如 Tri 指出的， after 闭包的返回值没有效果。

# pdf - 启用 PDF 中文本内容的选择和复制

> ID：12596020
> 
> 赞同：1
> 
> 时间：2012-09-26T06:45:44.953
> 
> 标签：pdf, pdf-generation

什么可以阻止 PDF-1.4 文档的内容被选择和复制？

我正在使用成功嵌入其中的 TTF 字体生成 PDF-1.4 文档（请参见下面的屏幕截图）。

![我的 PDF 中嵌入的字体](../Images/75a2a01be3c720837a51b3a477a076c8.png)

但是我无法从文档中选择和复制文本。我研究了[PDF-1.4 规范](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)，发现只有一次提到对文档进行复制保护，这是首先加密它的先决条件。而且我不加密文件。

因此，理想情况下，我想找出一个详尽的原因列表，这些原因可以防止 PDF 文本被复制，以及控制它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:06:55.180

只有一个原因，您正在部分嵌入字体。您存储在那里的信息是绘制字形所需的最低要求，但不足以允许文本提取。例如，在 Acrobat Professional 中，优化文件以减小文件大小会产生这种效果，因为*呈现*内容并非严格要求的所有内容都将被丢弃。

# ruby - 为 pik 安装的红宝石安装 devkit

> ID：12596022
> 
> 赞同：5
> 
> 时间：2012-09-26T06:45:59.677
> 
> 标签：ruby, windows, devkit, pik

我已经使用 pik 安装了两个 rubies，但我没有在 pik 之外安装任何 rubies。

当我使用 pik 选择 Ruby，然后尝试设置 devkit 时，没有二进制文件添加到生成的 config.yml 文件中：

```
# This configuration file contains the absolute path locations of all
# installed Rubies to be enhanced to work with the DevKit. This config
# file is generated by the 'ruby dk.rb init' step and may be modified
# before running the 'ruby dk.rb install' step. To include any installed
# Rubies that were not automagically discovered, simply add a line below
# the triple hyphens with the absolute path to the Ruby root directory.
#
# Example:
#
# ---
# - C:/ruby19trunk
# - C:/ruby192dev
#
--- 
```

我尝试将 pik 中的二进制文件添加到路径中，以便 config.yml 具有

```
- C:/pik/rubies/ruby-1.9.2-p136
- C:/Users/agrimm/.pik/rubies/JRuby-170preview1 
```

但我明白了

```
bash-3.1$ ruby dk.rb install
[INFO] Updating convenience notice gem override for 'C:/pik/rubies/ruby-1.9.2-p136'
[INFO] Installing 'C:/pik/rubies/ruby-1.9.2-p136/lib/ruby/site_ruby/devkit.rb'
[ERROR] Unable to find RubyGems in site_ruby or core Ruby. Please
install RubyGems and rerun 'ruby dk.rb install'.

C:\DevKit>ruby dk.rb install
[INFO] Skipping existing gem override for 'C:/pik/rubies/ruby-1.9.2-p136'
[WARN] Skipping existing DevKit helper library for 'C:/pik/rubies/ruby-1.9.2-p136'
[ERROR] Unable to find RubyGems in site_ruby or core Ruby. Please
install RubyGems and rerun 'ruby dk.rb install'.

C:\DevKit>gem --version
1.3.7

C:\DevKit>echo %PATH%
C:\pik\rubies\ruby-1.9.2-p136\bin;C:\Program Files (x86)\Parallels\Parallels Tools\Applications;C:\pik\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Git\cmd;C:\DevKit\bin

C:\DevKit>PATH=%PATH%;C:\Users\agrimm\.pik\rubies\JRuby-170preview1\bin

C:\DevKit>echo %PATH%
C:\pik\rubies\ruby-1.9.2-p136\bin;C:\Program Files (x86)\Parallels\Parallels Tools\Applications;C:\pik\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Git\cmd;C:\DevKit\bin;C
:\Users\agrimm\.pik\rubies\JRuby-170preview1\bin

C:\DevKit>ruby dk.rb install
[INFO] Skipping existing gem override for 'C:/pik/rubies/ruby-1.9.2-p136'
[WARN] Skipping existing DevKit helper library for 'C:/pik/rubies/ruby-1.9.2-p136'
[ERROR] Unable to find RubyGems in site_ruby or core Ruby. Please
install RubyGems and rerun 'ruby dk.rb install'. 
```

我是否需要在 pik 之外安装 ruby​​ 才能让 devkit 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T20:33:19.823

我看到这个问题很老，但仍然没有答案。您的帖子提到您使用 pik 安装了 ruby​​ 版本。我不知道 pik 在安装 ruby​​ 时做了什么，但我一直直接使用 Rubyinstallers。他们在 pik 上工作得很好，我已经安装了 DevKit 没有问题。请注意[DevKit 文档](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)中的这一点：

> *ruby dk.rb init*生成 config.yml 文件，稍后在此步骤中使用。您已安装的 Ruby 将在此处列出（目前仅检测到由 RubyInstaller 包安装的那些）。

# sql - 在启动时导入 PostgreSQL 触发器。休眠

> ID：12596023
> 
> 赞同：1
> 
> 时间：2012-09-26T06:46:07.290
> 
> 标签：sql, hibernate, postgresql

我的 PostgreSQL 中有一些存储函数和触发器。例如：

```
CREATE OR REPLACE FUNCTION log_function() RETURNS TRIGGER AS $logger$
BEGIN
    IF (TG_OP = 'DELETE') THEN
        INSERT INTO logger SELECT 'D', now(), user, OLD.*;
        RETURN OLD;
    END IF;
    RETURN NULL; 
END;
$logger$ LANGUAGE plpgsql; 
```

并触发：

```
CREATE TRIGGER logging_trigger
AFTER INSERT OR UPDATE OR DELETE ON some_entity
    FOR EACH ROW EXECUTE PROCEDURE log_function(); 
```

我想在每次部署后导入此代码。（我有`<property name="hibernate.hbm2ddl.auto" value="create-drop"/>`）

我认为函数是不可能的，因为它的 plpgsql，但对于触发器来说它会很棒。我一直在尝试向 import.sql 添加触发器，但我得到了`org.postgresql.util.PSQLException: ERROR: syntax error at end of input`

而且我不想将此代码移动到 Java 级别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:01:24.547

[创建一个`@Startup @Singleton`EJB](https://stackoverflow.com/a/2708427/398670)，并让它在调用其`@PostConstruct`方法时调用所需的过程。您不能直接从 SQL 调用它，因为它是一个触发器过程，但是您可以：

*   `INSERT`,`UPDATE`或`DELETE`连续`some_entity`触发触发器；或更明智地

*   定义一个名为类似`log_startup`返回的单独过程，`void`以便可以从 SQL 调用它`SELECT log_startup()`，并具有：

    ```
     INSERT INTO logger SELECT 'S', now(), user, NULL; 
    ```

    管他呢。

您可以`log_startup`使用本机查询进行调用`SELECT log_startup()`，也应该可以使用 JDBC 或 HQL 存储过程调用语法`{call log_startup()}`（未经测试）。

您根本无法直接调用触发器过程，因此*无法*在部署时运行*该确切功能。*

# php - 通过 PHP 从 iframe 下载文件时显示“另存为”对话框

> ID：12596024
> 
> 赞同：1
> 
> 时间：2012-09-26T06:46:07.227
> 
> 标签：php, jquery, cross-domain, download

我知道以前有人问过类似类型的问题，但我相信这个问题有一些差异。

我的网页有一个`Iframe`. 此 iframe 从其他域加载页面（跨域脚本正在运行）。现在，当我单击此 iframe 中的按钮时，它会发出`AJAX`请求并在服务器`jQuery`上创建一个文本文件。`PHP`现在我希望出现一个正常的“另存为”对话框，以便用户可以从服务器下载该文件。

我已经在 PHP 端尝试了所有的`Content-Disposition`and函数，但是虽然文件在服务器上成功创建，**但没有出现“另存为”对话框。**我认为，问题是我想从 iframe 触发文件下载，该 iframe 正在从其他域加载内容。`header()`

 **有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:21:51.297

我自己找到了解决方案。而不是`AJAX`使用`Iframe`技术。以下`jQuery`代码应写在 iframe 中。它通过 iframe 触发下载，而不是`AJAX`向服务器发出请求。

```
$(document).ready(function(){
    $('#download').click(function(){
        var ifr = $('<iframe id="secretIFrame" src="" style="display:none; visibility:hidden;"></iframe>');
        $('body').append(ifr);
        var iframeURL = 'http://you_domain.com/download.php?str='+encodeURIComponent(data_to_be_posted);
        ifr.attr('src', iframeURL);
        return false;
    });
}); 
```

这是代码`download.php`：

```
<?php
$str = html_entity_decode($_REQUEST['str']);

$file_name = 'export_data.txt';

header("Cache-Control: ");// leave blank to avoid IE errors
header("Pragma: ");// leave blank to avoid IE errors
header("Content-Disposition: attachment; filename=\"".$file_name."\"");
header("Content-length:".(string)(filesize($str)));
header("Content-Type: application/force-download");
header("Content-Type: application/download");
header('Content-Type: application/octet-stream');
header('Content-Type: application/txt');
header("Content-Transfer-Encoding: binary ");
echo $str;
exit;
?> 
```**

# android - 如何按字母顺序在列表视图中搜索好友列表？

> ID：12596032
> 
> 赞同：0
> 
> 时间：2012-09-26T06:46:27.570
> 
> 标签：android, facebook

我有一个列表，其中包含我的应用用户的 Facebook 好友列表。上面`Listview`我有一个`EditText`按字母顺序搜索这个朋友列表。`EditText`当.I中的文本更改为列表时，我无法重新生成`BaseAdapter`列表。这是我的代码：

```
public class FriendListActivity extends Activity implements OnItemClickListener 
```

在这里面：

```
editTextFriendSearch.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
          // here  i use filter in listAdapter.
        friendListAdapter.getFilter().filter(s);

        }
        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

    }); 
```

**这是使用过滤器更新的我的适配器**

```
public class FriendListAdapter extends BaseAdapter implements Filterable {

    private LayoutInflater mInflater;
    FriendListActivity friendsList;

    public FriendListAdapter(FriendListActivity friendsList) {

        this.friendsList = friendsList;
        if (Utility.model == null) {
            Utility.model = new FriendsGetProfilePics();
        }

        Utility.model.setListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());
    }

    @Override
    public int getCount() {

        return jsonArray.length();
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int arg0) {

        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        JSONObject jsonObject = null;
        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        View hView = convertView;
        if (convertView == null) {
            hView = mInflater.inflate(R.layout.row_view, null);
            ViewHolder holder = new ViewHolder();
            holder.profile_pic = (ImageView) hView
                    .findViewById(R.id.profile_pic);
            holder.name = (TextView) hView.findViewById(R.id.name);
            hView.setTag(holder);
        }
        ViewHolder holder = (ViewHolder) hView.getTag();
        try {

            if (graph_or_fql.equals("graph")) {
                holder.profile_pic.setImageBitmap(Utility.model.getImage(
                        jsonObject.getString("id"),
                        jsonObject.getString("picture")));
            } else {
                holder.profile_pic.setImageBitmap(Utility.model.getImage(
                        jsonObject.getString("uid"),
                        jsonObject.getString("pic_square")));
            }
            holder.name.setText(jsonObject.getString("name"));

        } catch (Exception e) {

        }

        return hView;
    }   
// update : Now i use filter here..
    @Override
    public Filter getFilter() {
        if (newfilter == null) {
            newfilter = new Filter() {

                @Override
                protected void publishResults(CharSequence constraint,
                        FilterResults results) {
                    Log.d("----Filter----", "publishResults");
                    notifyDataSetChanged();
                }

                @Override
                protected FilterResults performFiltering(
                        CharSequence constraint) {

                    constraint = constraint.toString().toLowerCase();
                    Log.d("Filter constraints", "constraint : "
                            + constraint);

                    // here i create json array object but 
                    // not sure am i walking right way ??
                    ArrayList<JSONObject> jsonObjects = new ArrayList<JSONObject>();

                    if (constraint != null && constraint.length() > 0) {
                        for (int i = 0; i < jsonArray.length(); i++) {
                            try {
                                JSONObject o = (JSONObject) jsonArray
                                        .get(i);
                                if (o.getString("name").toLowerCase()
                                        .contains(constraint)) {
                                    Log.d("----Results-----", "equals : "
                                            + o.getString("name"));

                                    jsonObjects.add(o);
                                }

                            } catch (JSONException e) {

                                e.printStackTrace();
                            }

                        }

                    }

                    FilterResults newFilterResults = new FilterResults();
                    newFilterResults.count = jsonObjects.size();
                    newFilterResults.values = jsonObjects;
                    Log.d("----Count----", " " + newFilterResults.count
                            + " " + newFilterResults.values);
                    return newFilterResults;

                }
            };

        }
        return newfilter;

    }

}

class ViewHolder {
    ImageView profile_pic;
    TextView name;

} 
```

**现在我可以在 Log cat 中获取搜索列表，但未填充 Listview。?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:19:39.087

由于我从未以任何不同的方式实现我的 Search 方法，我想，按字母顺序排列的列表完全取决于您的初始列表的排序。就类似的集成（与 Facebook 朋友）而言，我的过滤列表（`GridView`实际上是一个）按字母顺序列出了它们。

在这里再次复制有点太大了，所以我将简单地链接到我几天前发布的答案。`ListView`与我的`GridView`. 但是由于可以推断出逻辑（并且它对该帖子中的 OP 有效），我猜它也可能对您有所帮助。它也使用`BaseAdpter`了

试一试：[https ://stackoverflow.com/a/12363961/450534](https://stackoverflow.com/a/12363961/450534)

注意：因为代码实际上是我的朋友列表的整个实现，带有`activity`和`adapter`，它已成为一个非常冗长的帖子，因此建议您耐心等待。;-)

# java - 如何在很短的时间内检查数千个节点的 url 是否有效？

> ID：12596044
> 
> 赞同：1
> 
> 时间：2012-09-26T06:47:15.970
> 
> 标签：java

我需要检查一个特定的 url`"http://16.100.106.4/xmldata?item=all"`是否有效？现在的事情是，如果 url 不起作用，我使用下面的代码，然后连接超时等待大约 20 秒，然后给出异常。现在，我必须检查大约 20000 个 IP 的 URL，我不能等待那么长时间。线程可以是一种选择，但我也不确定我应该去多少线程。我希望在几秒钟内完成整个操作。

```
public static boolean exists(String URLName){
     boolean available = false;

          try{
                final  URLConnection connection = (URLConnection) new URL(URLName).openConnection();
                connection.connect();

                System.out.println("Service " + URLName + " available, yeah!");
                available = true;
            } catch(final MalformedURLException e){
                throw new IllegalStateException("Bad URL: " + available, e);
            } catch(final Exception e){
                // System.out.print("Service " + available + " unavailable, oh no!", e);
                available = false;
            }
            return available;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:56:07.493

您可以将[URLConnection#setConnectTimeout](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)设置为您希望发生连接的最小值。

**更新**尝试如下：

```
 final HttpURLConnection connection = (HttpURLConnection) new URL(URLName)
                .openConnection();
        connection.setReadTimeout(2000);
        connection.setConnectTimeout(2000);
        connection.setRequestMethod("HEAD");
        int responseCode = connection.getResponseCode();
        connection.getInputStream().read();
        if (responseCode != HttpURLConnection.HTTP_OK) {
            return false;
        }
        return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:34:15.867

我会像这样作为生产者/消费者问题来解决它：

```
public class URLValidator {

  private final CompletionService<URLValidationResult> service;

  public URLValidator(ExecutorService exec) {
    this.service = new CompletionService<URLValidationResult>(exec);
  }

  // submits a url for validation
  public void submit(String url) {
     service.submit(new Callable<URLValidationResult>() {
         public URLValidationResult call() {
           return validate(url);
         }          
     });
  }

  // retrieves next available result. this method blocks
  // if no results are available and is responsive to interruption.
  public Future<URLValidationResult> next() {
     try {
       return service.take();
     } catch (InterruptedException e) {
       Thread.currentThread().interrupt();
     }
  }

  private URLValidationResult validate(String url) {
      // Apply your url validation logic here (i.e open a timed connection
      // to the url using setConnectTimeout(millis)) and return a 
      // URLValidationResult instance encapsulating the url and
      // validation status
  } 
```

}

需要提交 url 进行验证的线程将使用该`submit(String url)`方法。此方法将依次向完成服务提交异步执行的任务。处理验证结果的线程将使用该`next()`方法。此方法返回一个代表提交任务的 Future。您可以这样处理返回的未来：

```
URLValidator validator = // the validator instance....

// retrieve the next available result
Future<URLValidationResult> future = validator.next();

URLValidationResult result = null;
try {
  result = future.get();
} catch (ExecutionException e) {
  // you submitted validation task has thrown an error,
  // handle it here.
}

// do something useful with the result
process(result); 
```

# database - 大型数据集上“标签”或基于关键字的查询的算法和数据结构？

> ID：12596045
> 
> 赞同：4
> 
> 时间：2012-09-26T06:47:28.963
> 
> 标签：database, algorithm, search, storage

我正在尝试实现一个存储系统来支持数据标记。这个系统的一个非常简单的应用就像 Stackoverflow 上的问题，它被标记了多个标签。一个查询可能包含多个标签。这看起来也像在谷歌上搜索多个关键词。

这个系统维护的数据集会非常大，比如几十TB、几十亿的条目。

那么在这个系统中我应该使用哪些数据结构和算法来维护和查询数据呢？并且数据可以存储在一组机器上。

是否有任何指南或论文来描述此类问题和解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:52:14.470

您可能想阅读以下两本书：

1.  **集体智慧在行动**

    Satnam Alag (ISBN: 1933988312)
    [http://www.manning.com/alag/](http://www.manning.com/alag/)

    “第 3 章。从标签中提取情报”涵盖：

    *   标记的三种形式和标记的使用
    *   如何从标签中提取情报的工作示例
    *   用于标记的数据库架构
    *   开发标签云

2.  **编程集体智能**

    托比·塞加兰 (ISBN: 978-0-596-52932-1)
    [http://shop.oreilly.com/product/9780596529321.do](http://shop.oreilly.com/product/9780596529321.do)

    　“第 4 章。搜索和排名”涵盖：

    *   搜索引擎索引算法的基本概念
    *   点击跟踪神经网络的设计

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:19:26.993

您的问题非常困难，但是有很多相关的论文和书籍。[Amazon Dynamo 论文](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf)、[yahoo PNUTS](http://www.mpi-sws.org/~druschel/courses/ds/papers/cooper-pnuts.pdf)和这个[hadoop 论文](http://hadoop.apache.org/common/docs/r0.18.0/hdfs_design.pdf)就是一个很好的例子。因此，首先，您必须决定如何跨集群分布数据。数据必须在网络上均匀分布，没有热点。一致的散列将是解决这个问题的好方法。此外，数据必须是冗余的，任何条目都需要存储在多个位置以容忍单个节点的故障。

接下来，您必须决定如何在您的系统中进行写入。每次写入都必须跨包含更新数据条目的节点进行复制。您可能想了解 CAP 定理和最终一致性概念（维基百科有一篇关于这两者的好文章）。此外，还有一个一致性 - 延迟权衡。您可以使用不同的机制进行写入复制：某种 gossip 协议或[状态机复制](http://research.microsoft.com/en-us/um/people/lamport/pubs/implementation.pdf)。

我不知道你的意思是哪种标签，这个标签是手动分配给条目还是从数据中学习的。无论如何，这是一个信息检索（IR）领域。您可能会使用某种倒排索引来有效地按标签或关键字搜索条目。此外，您必须使用一些查询结果排名算法。

# php - 获取 Facebook 上的最后三个状态和帖子

> ID：12596047
> 
> 赞同：-1
> 
> 时间：2012-09-26T06:47:42.873
> 
> 标签：php, facebook-graph-api

我正在尝试获取最后三个帖子和状态，因为我知道状态表仅包含我放在 Facebook 页面上的状态。帖子表包含一个共享链接，由我或其他用户发布的帖子，所以我想：将最后三个状态与最后三个帖子进行比较，并且只从它们中获取最多 3 个新的（创建日期），所以我需要检查双方的创建日期或更新日期，输出应为三个。

**我努力了：**

取最后三个帖子和最后三个状态，将更新日期与最近更新的三个进行比较，将它们放入一个数组中。这需要大量的[PHP](http://en.wikipedia.org/wiki/PHP)代码。我可以用[FQL](http://en.wikipedia.org/wiki/Facebook_Query_Language)做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:58:47.540

[您可以通过Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)获取最后三个帖子和状态。利用：

```
https://graph.facebook.com/fb_id?fields=id,name,statuses.limit(3).fields(message),posts.fields(message,caption,description) 
```

如需更多帮助，[请访问 https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

### FQL

用于获取状态

```
SELECT status_id, message FROM status WHERE uid=fb_id 
```

用于获取帖子

```
SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0 
```

但是对于所有这些，您应该具有访问它们的权限。请参阅 [http://developers.facebook.com/docs/reference/fql/stream/](http://developers.facebook.com/docs/reference/fql/stream/)。

# python - python中的sed替换subexpress系统调用

> ID：12596053
> 
> 赞同：1
> 
> 时间：2012-09-26T06:47:58.803
> 
> 标签：python, replace, sed, system-calls

我不知道它是python bug还是其他什么。

我有一个 bash 命令来获取 br0 IP 地址。它在 bash shell 中运行良好

```
$ip -o -4 address show br0 |  sed "s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"
$192.168.10.1  #output this 
```

但是一旦我将它与 python 结合起来，它给了我一个奇怪的结果：

```
>>>import commands as c 
>>>c.getstatusoutput('ip -o -4 address show br0 |  sed "s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"')

>>>(0, '\x01')  #output 
```

我已经尝试过使用 PHP，`system()`它工作正常。我也试过python中的子进程，结果是一样的。

这可能是python中的管道处理问题吗？

我想知道 python 中发生了什么，或者是否还有其他我错过的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:59:14.870

Python 正在解释字符串中的反斜杠，尝试使用原始字符串，即。`r'ip -o -4 address show br0 | sed "s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"'`

```
>>> import commands as c 
>>> c.getstatusoutput(r'ip -o -4 address show br0 |  sed "s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"') 
```

如果你很好奇，试试这个并注意区别：

```
>>> print "s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"
s/^.*inet *\(.*\)\/[0-9]* brd.*$//g
>>> print r"s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g"
s/^.*inet *\(.*\)\/[0-9]* brd.*$/\1/g 
```

[问题是python把“\1”当成字符串'\x01']

# php - PDO lastInsertId(); 问题 php

> ID：12596058
> 
> 赞同：6
> 
> 时间：2012-09-26T06:48:28.100
> 
> 标签：php, pdo

我有一个具有父子关系的数据库。我需要先插入父表然后获取 ID，然后我将使用该 ID 将数据插入子表。

以下是我用来插入数据库的代码片段。这是我第一次使用 PDO 类。我得到的错误；未定义的属性：**和**调用非对象数据库上的成员函数 lastInsertId()::$db。我必须承认我对 PHP 相当陌生。谢谢

* * *

```
{

    public function __construct($DB_TYPE, $DB_HOST, $DB_NAME, $DB_USER, $DB_PASS)
    {
        parent::__construct($DB_TYPE.':host='.$DB_HOST.';dbname='.$DB_NAME, $DB_USER, $DB_PASS);
} 
```

* * *

```
$this->db = new database(DB_TYPE, DB_HOST, DB_NAME, DB_USER, DB_PASS); 
```

* * *

```
 $this->db->insert('images', array(
        'image_userID' => $data['image_userID'],
        'image_date' => $data['image_date']
    )); 
```

* * *

```
/**
 * insert
 * @param string $table A name of table to insert into
 * @param string $data An associative array
 */
public function insert($table, $data)
{
    $fieldNames = implode('`, `', array_keys($data));
    $fieldValues = ':' . implode(', :', array_keys($data));

    $sth = $this->prepare("INSERT INTO $table (`$fieldNames`) VALUES ($fieldValues)");

    foreach ($data as $key => $value) {
        $sth->bindValue(":$key", $value);
    }

    $sth->execute();

$result= $this->db->lastInsertId();
 return $result;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T06:51:19.857

最后一个插入 ID 来自*活动语句*，而不是来自数据库句柄。因此，将代码的最后一行更改为：

```
$return = $sth->lastInsertId(); 
```

# perl - 使用 tcl 在 GUI 中显示内容

> ID：12596059
> 
> 赞同：0
> 
> 时间：2012-09-26T06:48:31.927
> 
> 标签：perl, user-interface, tcl

我是 GUI 新手，我试图在 tcl 中创建一个简单的 GUI。它有一个按钮，按下时会运行代码并在目录中生成输出“.l”文件。但我希望在 GUI 本身中打印输出。那么我应该如何更改此代码来完成任务。

```
proc makeTop { } {
    toplevel .top ;#Make the window
    #Put things in it
    label .top.lab -text "This is output Window" -font "ansi 12 bold"
    text .top.txt 
    .top.txt insert end "XXX.l"
    #An option to close the window.
    button .top.but -text "Close" -command { destroy .top }
    #Pack everything
    pack .top.lab .top.txt .top.but
}

label .lab -text "This is perl" -font "ansi 12 bold"
button .but -text "run perl" -command { exec perl run_me }
pack .lab .but 
```

谁能帮我在 GUI 中显示输出文件 XXX.l 的内容？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:16:20.620

对于仅将结果打印到标准输出的简单程序，这很简单：`exec`返回程序的所有标准输出。因此，您只需要读取`exec`调用的返回值：

```
proc exec_and_print {args} {
    .top.txt insert end [exec {*}$args]
} 
```

但请记住，exec 仅在程序退出后返回。对于您希望输出立即出现在文本框中的长时间运行的程序，您可以使用`open`. 如果传递给的文件名的第一个字符`open`是，`|`则`open`假定该字符串是要执行的命令行。有了`open`一个 i/o 通道，您可以连续读取：

```
proc long_running_exec {args} {
    set chan [open "| $args"]

    # disable blocking to prevent read from freezing our UI:
    fconfigure $chan -blocking 0

    # use fileevent to read $chan only when data is available:
    fileevent $chan readable {
        .top.text insert end [read $chan]

        # remember to clean up after ourselves if the program exits:
        if {[eoc $chan]} {
            close $chan
        }
    }
} 
```

上面的`long_running_exec`函数立即返回并使用事件来读取输出。这允许您的 GUI 在外部程序运行时继续运行而不是冻结。要使用它，只需执行以下操作：

```
button .but -text "run perl" -command { long_running_exec perl run_me } 
```

* * *

## 补充回答：

如果程序生成一个文件作为输出并且您只想显示文件的内容，那么只需读取该文件：

```
proc exec_and_print {args} {
    exec {*}$args

    set f [open output_file]
    .top.txt insert end [read $f]
    close $f
} 
```

如果您知道文件的生成位置但不知道确切的文件名，请阅读手册以`glob`了解如何获取目录内容列表。

# iphone - 如何开发 Xcode 4.3 和 Xcode 4.5 的标签和文本字段帧大小

> ID：12596066
> 
> 赞同：1
> 
> 时间：2012-09-26T06:49:13.160
> 
> 标签：iphone, ios6

我在 Xcode 4.5 中开发了表单 ..

当我使用 iPhone 模拟器 6.0 运行程序时，标签和文本字段（超过 5 个标签和文本字段）未正确对齐，并且模拟器中未显示按钮...

我运行相同的程序，但更改了模拟器硬件设备 Xcode 4 英寸视网膜显示器，现在它工作正常..

**什么是问题，我需要解决方案。** 提前致谢。

# java - 如何模拟 FileInputStream 和其他 *Streams

> ID：12596075
> 
> 赞同：4
> 
> 时间：2012-09-26T06:50:03.980
> 
> 标签：java, junit, inputstream, mockito

我有一个获取 GenericFile 作为输入参数的类，它读取数据并进行一些额外的处理。我需要测试它：

```
public class RealCardParser {

    public static final Logger l = LoggerFactory.getLogger(RealCardParser.class);

    @Handler
    public ArrayList<String> handle(GenericFile genericFile) throws IOException {
        ArrayList<String> strings = new ArrayList<String>();
        FileInputStream fstream = new FileInputStream((File) genericFile.getFile());
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br =  new BufferedReader(new InputStreamReader(in));
        String strLine = br.readLine();//skip header
        while ((strLine = br.readLine()) != null) {
            l.info("handling in parser: {}", strLine);
            strings.add(strLine);
        }
        br.close();
        return strings;
    }
} 
```

问题在于新的 FileInputStream。我可以模拟 GenericFile 但它没有用，因为 FileInputStream 检查文件是否存在。我改变了我的班级：

```
public class RealCardParser {

    public static final Logger l = LoggerFactory.getLogger(RealCardParser.class);

    protected BufferedReader getBufferedReader(GenericFile genericFile) throws FileNotFoundException {
        FileInputStream fstream = new FileInputStream((File) genericFile.getFile());
        DataInputStream in = new DataInputStream(fstream);
        return new BufferedReader(new InputStreamReader(in));
    }

    @Handler
    public ArrayList<String> handle(GenericFile genericFile) throws IOException {
        ArrayList<String> strings = new ArrayList<String>();
        BufferedReader br = getBufferedReader(genericFile);
        String strLine = br.readLine();//skip header
        while ((strLine = br.readLine()) != null) {
            l.info("handling in parser: {}", strLine);
            strings.add(strLine);
        }
        br.close();
        return strings;
    }
} 
```

所以现在我可以覆盖方法 getBufferedReader 和测试方法处理程序：

```
@RunWith(MockitoJUnitRunner.class)
public class RealCardParserTest {

    RealCardParser parser;

    @Mock
    GenericFile genericFile;

    @Mock
    BufferedReader bufferedReader;

    @Mock
    File file;

    @Before
    public void setUp() throws Exception {
        parser = new RealCardParser() {
            @Override
            public BufferedReader getBufferedReader(GenericFile genericFile) throws FileNotFoundException {
                return bufferedReader;
            }
        };

        when(genericFile.getFile()).thenReturn(file);
        when(bufferedReader.readLine()).thenReturn("header").thenReturn("1,2,3").thenReturn(null);
    }

    @Test
    public void testParser() throws Exception {
        parser.handle(genericFile);
        //do some asserts
    }
} 
```

Handler 方法现在已经覆盖了测试，但我仍然发现了导致 cobertura 问题的方法 getBufferedReader。如何测试方法 getBufferedReader 或者问题的另一种解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T10:48:12.337

You can mock FileInputStream by using PowerMockRunner and PowerMockito. See the below code for mocking-

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({
        FileInputStream.class
})
public class A{

 @Test
        public void testFileInputStream ()
                    throws Exception
       {
           final FileInputStream fileInputStreamMock = PowerMockito.mock(FileInputStream.class);
           PowerMockito.whenNew(FileInputStream.class).withArguments(Matchers.anyString())
                               .thenReturn(fileInputStreamMock);
    //Call the actual method containing the new constructor of FileInputStream 

        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:54:08.477

Maybe this is a bad idea, but my first approach would have been creating an actual test-file rather than mocking the stream object.

One could argue that this would test the `GenericFile` class rather than the `getBufferedReader` method.

Maybe an acceptable way would be to return an actually existing test-file through the mocked `GenericFile` for testing the `getBufferedReader`?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:31:10.540

我知道这不是你想要的答案。

单元测试的想法是确保你的逻辑是正确的。单元测试会捕获编写了不正确逻辑的错误。如果一个方法不包含逻辑（即没有分支、循环或异常处理），那么对它进行单元测试是不经济的。我的意思是，单元测试需要花钱——编写它的时间，以及维护它的时间。大多数单元测试通过发现错误或再次向我们保证正在测试的领域中没有错误来回报我们的投资。

但是对您的方法进行单元测试`getBufferedReader`不会回报您的投资。它的成本有限，但收益为零，因为没有可能出错的实际逻辑。因此，您不应该编写这样的单元测试。如果您的 Cobertura 设置或组织标准要求存在这样的单元测试，那么这些设置或标准是错误的，应该更改。否则，您雇主的钱会花在成本效益比无限大的事情上。

我强烈建议您更改标准，以便只为包含分支、循环或异常处理的方法编写单元测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T07:06:35.977

我首先将 Stream 的创建提取到依赖项中。因此，您的 RealCardParser 将 StreamSource 作为依赖项。

现在你可以解决你的问题：

1.  为您当前的测试提供一个模拟（或者在这种情况下我更喜欢一个假的）实现，返回一个从字符串构造的流。

2.  使用真实文件测试实际的 StreamSource，确保它返回正确的内容以及不返回的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-10T02:33:43.607

当你有这个问题时。您可能没有正确遵循[依赖倒置原则](https://en.wikipedia.org/wiki/Dependency_inversion_principle)。您应该尽可能使用 InputStream。如果您像这样编写 FileInputStream 适配器方法：

```
class FileReader {
    public InputStream readAsStream() {
        return new FileInputStream("path/to/File.txt");
    }
} 
```

然后，您可以模拟该方法以交替返回 ByteArrayInputStream。这更容易处理，因为您只需将字符串传递给流，而不是处理特定的 FileInputStream 实现。

如果你使用 mockito 来模拟，示例如下：

```
FileReader fd = mock(FileReader());
String fileContent = ...;
ByteArrayInputStream bais = new ByteArrayInputStream(fileContent);
when(fd.readAsStream()).thenReturn(bais); 
```

# windows - Windows XP 32 位中断处理程序的硬件 IO 访问

> ID：12596081
> 
> 赞同：2
> 
> 时间：2012-09-26T06:50:35.360
> 
> 标签：windows, hardware, interrupt

我有一个 Windows XP 应用程序，它使用一个名为 TVicHW32 的驱动程序，它允许我为操作系统中断创建一个中断处理程序。目前，我在带有 IRQ 5 的工业机箱中使用自定义 ISA 卡

中断处理程序代码正在工作，我可以看到一个变量正在递增，因此设置和处理中断的代码正在工作。

我遇到的问题是 IO 访问调用无法在 ISA 总线上生成任何 IO 活动。我在 0x308 处有一个地址，用于触发 ISA 总线接口板上的启动脉冲。

如果我从主代码（例如，从计时器）触发此脉冲，则会在 ISA 总线上检测到该脉冲，并且卡会做出响应。

如果我调用完全相同的函数调用从中断处理程序中访问该 IO 地址，则 ISA 总线上不会出现任何内容。逻辑分析仪证实了这一点。

我已通过电子邮件向驱动程序的供应商发送电子邮件，但这无济于事，所以我想知道这里是否有人遇到过这种情况并可以提供解决方案。这对于使该项目正常运行至关重要，我能想到的唯一解决方案是使用 DDK 开发自定义驱动程序，但由于这需要陡峭的学习曲线，我希望找到一个替代解决方案。

谢谢戴夫...

# java - Android：如何在显示软键盘的同时显示活动的上下文菜单

> ID：12596083
> 
> 赞同：1
> 
> 时间：2012-09-26T06:50:41.260
> 
> 标签：java, android, keyboard, android-edittext, contextmenu

我想显示我的活动的上下文菜单，同时保持显示软键盘。这是我为我的主要活动创建菜单的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    boolean result = super.onCreateOptionsMenu(menu);

    MenuItem m = menu.add(0, LOGIN_MENU_ITEM, 0, "Login");
    m.setIcon(android.R.drawable.ic_menu_preferences); 
    m = menu.add(0, CONFIGURE_MENU_ITEM, 0, R.string.menu_settings);
    m.setIcon(android.R.drawable.ic_menu_preferences);
    m = menu.add(0, EXIT_MENU_ITEM, 0, R.string.menu_exit);
    m.setIcon(android.R.drawable.ic_menu_close_clear_cancel);
    m = menu.add(0, ABOUT_MENU_ITEM, 0, R.string.menu_about);
    m.setIcon(android.R.drawable.ic_menu_info_details);

    return result;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    boolean result = super.onOptionsItemSelected(item);
    Intent intent = null;

    switch (item.getItemId()) {
    case ABOUT_MENU_ITEM:
        if (m_AlertDlg != null) 
        {
            m_AlertDlg.cancel();
        }

        final SpannableString s = new SpannableString(getString(R.string.about).replace("\\n","\n").replace("${VERSION}", getVersion(this)));
        Linkify.addLinks(s, Linkify.WEB_URLS);

        m_AlertDlg = new AlertDialog.Builder(this)
        //          .setMessage(getString(R.string.about).replace("\\n","\n").replace("${VERSION}", getVersion(this)))
        .setMessage(s)
        .setTitle(getString(R.string.menu_about))
        .setIcon(R.drawable.icon22_click)
        .setCancelable(true)
        .show();

        ((TextView)m_AlertDlg.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance());

        break;

    case EXIT_MENU_ITEM: 
        on(this,false);
        //          final Boolean exit_rem = PreferenceManager.getDefaultSharedPreferences(this).getBoolean(Settings.PREF_REMEMBER, false);
        //          if (!exit_rem){
        //              Editor edit = PreferenceManager.getDefaultSharedPreferences(this).edit();
        //              edit.putString(Settings.PREF_USERNAME, "");
        //              edit.putString(Settings.PREF_PASSWORD, "");
        //              edit.commit();
        //          }
        Receiver.pos(true);
        Receiver.engine(this).halt();
        Receiver.mSipdroidEngine = null;
        Receiver.reRegister(0);
        stopService(new Intent(this,RegisterService.class));
        finish();
        break;

    case CONFIGURE_MENU_ITEM: 
        try {
            intent = new Intent(this, org.sparksoftsip.sipua.ui.Settings.class);
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
        }
        break;

    case LOGIN_MENU_ITEM: 
        LoginScreen();
        break;
    }

    return result;
} 
```

在我的主要活动中，我构建了一个自定义 AutoCompleteTextView，其中它接收焦点在开始。我在这里听按键，并计划通过听菜单按钮打开上下文菜单。但是，我当前的代码没有任何反应：

```
public class InstantAutoCompleteTextView extends AutoCompleteTextView {
public InstantAutoCompleteTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public void onWindowFocusChanged(boolean hasWindowFocus) {
    super.onWindowFocusChanged(hasWindowFocus);
}
private Activity getActivity() {
    Context context = getContext();
    if (context instanceof Activity) {
        return (Activity) context;
    } else {
        return null;
    }
}
@Override
public boolean enoughToFilter() {
    return true;
}

@Override
public boolean dispatchKeyEventPreIme(KeyEvent event)
{
    Activity activity = getActivity();
    if (KeyEvent.KEYCODE_BACK == event.getKeyCode() && event.getAction () == KeyEvent.ACTION_DOWN)
    {
        Log.v("", "Back Pressed");
        activity.onBackPressed();

        //Want to call this method which will append text
        //init();
    }

    if (KeyEvent.KEYCODE_MENU == event.getKeyCode() && event.getAction () == KeyEvent.ACTION_DOWN)
    {
        Log.e("hello", event.toString());
        activity.openContextMenu(activity.getWindow().getDecorView().findViewById(android.R.id.content));
    }
    return true;
    //return super.dispatchKeyEventPreIme(event);
}
} 
```

我试过使用

```
openContextMenu(activity.getWindow().getDecorView().findViewById(android.R.id.content)) 
```

但是，什么都没有发生。我也试过`(activity.findViewById(android.R.id.content))`and `(activity.findViewById(android.R.id.content).getViewRoot())`，但没有任何结果。我该如何补救？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:48:20.507

看来我犯了一个愚蠢的错误。我没有使用上下文菜单，而是使用选项菜单。所以，我的按键代码应该是

```
openOptionsMenu() 
```

而不是使用

```
openContextMenu(View) 
```

# ios - Facebook 身份验证错误：authorize#error_code=210&error_msg=User%20not%20visible

> ID：12596085
> 
> 赞同：1
> 
> 时间：2012-09-26T06:50:42.520
> 
> 标签：ios, facebook, authentication

> **可能重复：**
> [错误 201：用户在 facebook api 中不可见](https://stackoverflow.com/questions/4703365/error-201-user-not-visible-in-facebook-api)

我正在尝试使用 Facebook SDK 对我的应用程序进行身份验证。它适用于大多数用户，但对于某些用户，它会显示以下用户

授权#error_code=210&error_msg=User%20not%20visible

如果您有任何建议，您能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:28:05.670

那是因为特定用户已禁用在他的墙上发帖或您要执行的操作。

例如，我尝试从我的应用程序在用户的墙上发帖，但由于用户在他的时间轴上禁用了墙上的帖子，我得到了同样的错误。

不幸的是，它只有一个解决方案，要求用户在他的时间线上允许墙贴！

# javascript - CKEditor：如何确保输入的一致性

> ID：12596089
> 
> 赞同：0
> 
> 时间：2012-09-26T06:50:46.463
> 
> 标签：javascript, ckeditor

我在我的网站中使用 CKeditor 来获取用户输入。我正在使用 CKEditor，因为我希望用户能够进行某种格式设置，例如使文本变为粗体、斜体、复制粘贴内容等。我得到的输入也用于制作一些报告。

现在我面临的问题是一些用户使用不同的字体 [一些使用 Arial、一些 Calibiri 等] 并且还使用他们偏好的字体大小。

在制作报告时，我想确保通过网站输入的文本至少在两件事上保持一致 - 字体和字体大小 [说我希望它限制为 Arial 和大小 10]。

我正在考虑禁用 CKEditor 功能以选择字体和字体大小。但是如果用户复制粘贴内容，那么我仍然会遇到字体和大小的问题。我正在寻找可以尝试的选项。

我想到的一个选项是 - 在粘贴内容之后，如果我可以运行 CKEditor 并使用一些选项来根据我的字体和大小规范替换内容。如果是这样，我该怎么做？

我正在考虑的另一个选项是 - 在表单中有另一个字段，它将从用户输入的字段中获取输入，并根据我的规范使用 CKEditor 设置值。

在这两种情况下，我都需要知道用户何时完成了他在字段上的操作，以便我更新相同或不同的字段。有什么建议么？

谢谢 pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:42:55.307

第一种方法是简单地在事件上调用`selectAll`和`removeFormat`命令：`getData`

```
CKEDITOR.replace( 'editor1', {
    on: {
        getData: function() {
            // Save the old selection
            var ranges = this.getSelection().getRanges();

            this.execCommand( 'selectAll' );
            this.execCommand( 'removeFormat' );

            // Restore the selection
            this.getSelection().selectRanges( ranges );
        }
    }
}); 
```

如果您愿意，您也可以在`paste`活动中执行此操作。请注意，这`removeFormat`可能会破坏您的选择，编辑器将无法恢复它。

这是一种肮脏的方式，但您可以轻松更改要删除的[标签](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.removeFormatTags)和[属性。](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.removeFormatAttributes)你也可以使用这个：`config.forcePasteAsPlainText = true;`“dehtmllize”粘贴的内容。

但是，要温和地执行此操作，您应该阅读一些有关[数据处理器的信息](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Data_Processor)。

* * *

温和的方法是：

```
CKEDITOR.replace( 'editor1', {
    on: {
        instanceReady: function() {
            this.dataProcessor.htmlFilter.addRules({
                attributes: {
                    style: function( attribute ) {
                        return false;
                    },
                    width: function( attribute ) {
                        return false;
                    },
                    height: function( attribute ) {
                        return false;
                    },
                    // ...
                    // You can modify (remove) any attribute you want
                }
            });
        }
    }
}); 
```

最终，您甚至可以`style`使用正则表达式过滤属性并删除一些您不喜欢的位。

# iphone - 单击 Utableview 行时的不同图像

> ID：12596091
> 
> 赞同：0
> 
> 时间：2012-09-26T06:50:57.357
> 
> 标签：iphone, ios, sqlite, uiimageview, uiimage

我的应用程序中有tableview，因为当我单击该行时，视图打开，包含两个图像查看器，其中两个图像从数据库中形成两个不同的表，一个显示图像的图像查看器取决于单击的行，其中第二个为所有行显示相同的图像。这是我的代码，

来自数据库的第一张图片，

```
 -(void)Readthesqlitefileforname:(NSString *)brandname
 {  
    sqlite3 *database;//database object
NSString *docpath=[self doccumentspath];
const char *ch=[docpath UTF8String];//string to constant char UTF8string  main part to connect DB

if (sqlite3_open(ch, &database)==SQLITE_OK) 
   {

   NSString *strstmt=[NSString stringWithFormat:@"select name,nik,dob,study,phone,mail,fsong,dp from scrap where name = '%@'",brandname];

    const char *chstmt=[strstmt UTF8String];

    sqlite3_stmt *sqlstmt;//to execute the above statement
    if (sqlite3_prepare_v2(database, chstmt, -1, &sqlstmt, NULL)==SQLITE_OK)
    {
        while (sqlite3_step(sqlstmt)==SQLITE_ROW) {

            const char *ch=(char *)sqlite3_column_text(sqlstmt, 0);
            bnnam=[NSString stringWithFormat:@"%s",ch];
            const char *ch1=(char *)sqlite3_column_text(sqlstmt, 1);
            urladdr=[NSString stringWithFormat:@"%s",ch1];
            const char *ch2=(char *)sqlite3_column_text(sqlstmt, 2);
            ydob=[NSString stringWithFormat:@"%s",ch2];
            const char *ch3=(char *)sqlite3_column_text(sqlstmt, 3);
            ystud=[NSString stringWithFormat:@"%s",ch3];
            const char *ch4=(char *)sqlite3_column_text(sqlstmt, 4);
            yphon=[NSString stringWithFormat:@"%s",ch4];
            const char *ch5=(char *)sqlite3_column_text(sqlstmt, 5);
            ymail=[NSString stringWithFormat:@"%s",ch5];
            const char *ch6=(char *)sqlite3_column_text(sqlstmt,6);
            yface=[NSString stringWithFormat:@"%s",ch6];                //NSLog(@"%@",urladdr);
            //const char *ch5=(char *)sqlite3_column_text(sqlstmt, 4);
            NSUInteger legnth=sqlite3_column_bytes(sqlstmt, 7);

            if (legnth>0) 
            {

                NSData *dt=[NSData dataWithBytes:sqlite3_column_blob(sqlstmt, 7) length:legnth];
                clsimg=[UIImage imageWithData:dt];//converting data to image
                NSLog(@"image 1 %@",clsimg);
            }
            else 
            {
                clsimg=nil;
            }

        }
    }
    sqlite3_finalize(sqlstmt);
}
sqlite3_close(database);
 } 
```

来自数据库的第二张图片，

```
 -(void)Readsqlitefile
 {
sqlite3 *database;//database object
NSString *docpath=[self doccumentspath];//get sqlite path
const char *ch=[docpath UTF8String];
if (sqlite3_open(ch, &database)==SQLITE_OK) 
    {
const char *chstmt="select * from scrapsign";
sqlite3_stmt *sqlstmt;
    if (sqlite3_prepare_v2(database, chstmt, -1, &sqlstmt, NULL)==SQLITE_OK)
    {
        while (sqlite3_step(sqlstmt)==SQLITE_ROW)
        {

            NSUInteger legnt=sqlite3_column_bytes(sqlstmt, 0);

            if (legnt>0) {

                NSData *dt=[NSData dataWithBytes:sqlite3_column_blob(sqlstmt, 0) length:legnt];
                mysign=[UIImage imageWithData:dt];
            }
            else 
                            {
                mysign=nil;
            }

        }
    }
    sqlite3_finalize(sqlstmt);
}
sqlite3_close(database);
 } 
```

行点击的图像设置

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

 scrapview *detailViewController = [[scrapview alloc] initWithNibName:@"scrapview" bundle:nil];
 [self Readthesqlitefileforname:[ar objectAtIndex:indexPath.row]];
 [self.navigationController pushViewController:detailViewController animated:YES];
 if (clsimg !=nil)
 {
    detailViewController.imgv.image=clsimg;

 }
 [self Readsqlitefile];

if (mysign !=nil) 
{
    detailViewController.imgv2.image=mysign;//second image viewer
    NSLog(@"%@",mysign);

}

detailViewController.txt1.text=urladdr;
detailViewController.txt2.text=ydob;
detailViewController.txt3.text=ystud;
detailViewController.txt4.text=yphon;
detailViewController.txt5.text=ymail;
detailViewController.txt.text=yface;
detailViewController.txt7.text=bnnam;

} 
```

单击该行时，视图应在两个图像查看器上显示不同的图像，但只有一个图像视图仅在单击时更改，第二个图像视图为所有行单击显示相同的图像。请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:08:20.423

add your data before pushing view controller:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

 scrapview *detailViewController = [[scrapview alloc] initWithNibName:@"scrapview" bundle:nil];
 [self Readthesqlitefileforname:[ar objectAtIndex:indexPath.row]];

 if (clsimg !=nil)
 {
    detailViewController.imgv.image=clsimg;

 }

 if (mysign !=nil) 
 {
    detailViewController.imgv2.image=mysign;//second image viewer
    NSLog(@"%@",mysign);    
 }

 detailViewController.txt1.text=urladdr;
 detailViewController.txt2.text=ydob;
 detailViewController.txt3.text=ystud;
 detailViewController.txt4.text=yphon;
 detailViewController.txt5.text=ymail;
 detailViewController.txt.text=yface;
 detailViewController.txt7.text=bnnam;

 //now push view controller
 [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:23:56.453

您应该将`detailViewController`设置后的数据推送到其对象。因为`detailViewController`会在获得任何东西之前导航，所以所有对象都将保持原样。

并调用它将更新您`[self Readsqlitefile];`的.`didSelectRowAtIndexPath:``mysign`

但是请记住，如果您只是在练习中进行`sqlite`其他明智的保存`UIImage`，`sqlite`这不是一个好习惯，您的应用程序可能会被拒绝。永远不要保存`UIImage`在数据库中。

# ios - 如何访问某些值中的一个值

> ID：12596095
> 
> 赞同：0
> 
> 时间：2012-09-26T06:51:17.457
> 
> 标签：ios, nspredicate

```
{
"id"=12
"genres_en" = "thriller,movies,action";
}
{
"id"=13
"genres_en" = "thriller,horror";
} 
```

大家好，我有一个这样的json..我的意思是我有一个内容，所有电影都有自己的类型..我需要做一个分类..例如，我需要检查哪种类型的电影是恐怖片..或者哪个一个是惊悚片..我得到了这样的所有价值：

-->“恐怖，电影”但是我如何控制这部电影的类型是否包括恐怖……？？你的建议是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:54:54.020

你可以使用`componentsSeparatedByString`

```
NSDictionary *dic = PARSE The JSON;

NSString *values = [dic objectForKey:"genres_en"];
NSString *firstValue = [[values componentsSeparatedByString:","] objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:59:25.363

我附近没有 Xcode，所以下面的代码可能包含一个错误（或两个:)）。

试试这样：

```
NSDictionary *yourDict = //your parsed json
NSString *genres = [yourDict objectForKey:@"genres_en"];
if ([genres rangeOfString:@"horror"].location != NSNotFound) {
  return YES;
} else {
  return NO;
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:29:47.183

```
 for(int j=0;j< GenresArray.count; j++)
                {  
                    NSString *value=[[genre componentsSeparatedByString: @","]objectAtIndex:j];

                    if([value isEqualToString:@"movies"])
                    {
                        [genreMovies addObject:value];
                    }
                } 
```

谢谢你们的帮助..现在我有我的结果了:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T07:26:26.073

您可以尝试检查字符串是否包含您想要的子字符串。像这样：

```
NSString *typesString = [dic objectForKey:"genres_en"];
NSRange range = [typesString rangeOfString:@"horror"];
if(range.location != NSNotFound)
{
    //it contains the substring "horror"
} 
```

或者，更好的方法是获取类型数组。

```
NSArray *types = [[typesString componentsSeparatedByString:","]; 
```

现在您可以为每个条目存储这个数组，并且每当您想检查它是否属于某个性别时，只需遍历类型数组（每个条目的）并比较字符串。

希望这可以帮助。

干杯!

# firefox - 如何在 Selenium Webdriver 中设置特定的 Firefox 版本？

> ID：12596097
> 
> 赞同：3
> 
> 时间：2012-09-26T06:51:21.970
> 
> 标签：firefox, selenium, webdriver

我有正在测试的网络应用程序。而且我只需要使用 Firefox 5 从 Lunix 和 Windows 测试它。那么，如何在 New FirefoxDriver() 中设置仅 Firefox 5 运行的特定 Firefox 版本，而不是 Firefox 6 或 9？我不想设置 Firefox 的路径，因为当我们有多个操作系统时，这不是有用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:04:01.920

创建一个 Firefox 5 配置文件并在下面给出该配置文件的名称。它将启动给定的配置文件浏览器。

```
FirefoxProfile profile = new ProfilesIni().getProfile(profileName);
DesiredCapabilities dc = DesiredCapabilities.firefox(); 
dc.setCapability(FirefoxDriver.PROFILE, profile); 
driver = new FirefoxDriver(dc); 
```

请参阅此[链接](http://kb.mozillazine.org/Creating_a_new_Firefox_profile_on_Windows)以了解如何创建 Firefox 配置文件。

# mysql - 合并 MySQL 列排除重复项

> ID：12596098
> 
> 赞同：1
> 
> 时间：2012-09-26T06:51:24.190
> 
> 标签：mysql, merge, move

我有这两张表：

```
desc students
+-----------------------+---------+------+-----+---------+----------------+
| Field                 | Type    | Null | Key | Default | Extra          |
+-----------------------+---------+------+-----+---------+----------------+
| student_id            | int(11) | NO   | PRI | NULL    | auto_increment |
| student_ticket_number | int(11) | YES  |     | 0       |                |
+-----------------------+---------+------+-----+---------+----------------+

desc studentdates
+-----------------------+---------+------+-----+---------+----------------+
| Field                 | Type    | Null | Key | Default | Extra          |
+-----------------------+---------+------+-----+---------+----------------+
| student_date_id       | int(11) | NO   | PRI | NULL    | auto_increment |
| student_id            | int(11) | YES  |     | NULL    |                |
| student_ticket_number | int(11) | YES  |     | 0       |                |
+-----------------------+---------+------+-----+---------+----------------+ 
```

我想将列移动`students.student_ticket_number`到`studentdates.student_ticket_number`字段`student_id`匹配的位置。

因此，如果用户 John has `student_id`= 1 将他的票号（例如 1234）从 移动`students.student_ticket_number`到`studentdates.student_ticket_number WHERE student_id = '1'`。

在表`studentdates.student_id`中可以有多个相同的记录，然后我想使用最低的`studentdates.student_date_id`并跳过其他的。告诉我这是否不清楚。

我想我需要以某种方式进行子查询，但是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:55:01.393

```
Update studentdates sd,students s,(select student_id,min(student_date_id) as minstudDateId from studentdates group by student_id) sm
SET sd.student_ticket_number = s.student_ticket_number 
where sd.student_id=s.student_id
and sd.student_id=sm.student_id
and sd.student_date_id=sm.minstudDateId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T06:55:38.227

您需要`student_date_ID`在子查询中获取最小值，然后将其与其他表连接。试试这个，

 ~~~~```
UPDATE  students a
        INNER JOIN studentdates b
            ON a.student_ID = b.student_ID
        INNER JOIN
        (
            SELECT  student_ID, MIN(student_date_ID) minID
            FROM    studentDates
            GROUP BY student_ID
        ) c ON b.student_ID = c.student_ID AND
               b.student_date_id = c.minID
SET     a.student_ticket_number = b.student_ticket_number
WHERE   a.student_id = '1' 
```~~  ~~```
UPDATE  students a
        INNER JOIN studentdates b
            ON a.student_ID = b.student_ID
        INNER JOIN
        (
            SELECT  student_ID, MIN(student_date_ID) minID
            FROM    studentDates
            GROUP BY student_ID
        ) c ON b.student_ID = c.student_ID AND
               b.student_date_id = c.minID
SET     b.student_ticket_number = a.student_ticket_number
WHERE   a.student_id = '1' 
```~~~~

# ruby - 匹配正则表达式适用于一次搜索，但扫描不起作用

> ID：12596099
> 
> 赞同：0
> 
> 时间：2012-09-26T06:51:30.573
> 
> 标签：ruby, regex

以下为我提供了一场比赛：

```
query = http://0.0.0.0:9393/review?first_name=aoeu&last_name=rar
find = /(?<=(\?|\&)).*?(?=(\&|\z))/.match(query) 
```

当我检查“发现”时，我得到：

```
first_name=aoeu 
```

我想匹配“？”之间的所有内容 和一个'&'，所以我尝试了

```
find = query.scan(/(?<=(\?|\&)).*?(?=(\&|\z))/) 
```

但是，当我检查“发现”时，我现在得到：

```
[["?", "&"], ["&", ""]] 
```

我需要做什么才能获得：

```
[first_name=aoeu][last_name=rar] 
```

或者

```
["first_name=aoeu","last_name=rar"] 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:00:35.773

使用`String#split`.

```
query.split(/[&?]/).drop(1) 
```

或者

```
query[/(?<=\?).*/].split("&") 
```

但是，如果您的真正目的是从 url 中提取参数，那么[question 和它的 answer](https://stackoverflow.com/questions/2500462)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T07:14:17.613

使用 ruby​​ 或 rails 提供的其他模块将使您的代码更具可维护性和可读性。

```
require 'uri'
uri = 'http://0.0.0.0:9393/review?first_name=aoeu&last_name=rar'

require 'rack'
require 'rack/utils'
Rack::Utils.parse_query(URI.parse(uri).query)
# => {"first_name"=>"aoeu", "last_name"=>"rar"}

# or CGI
require 'cgi'
CGI::parse(URI.parse(uri).query)
# => {"first_name"=>["aoeu"], "last_name"=>["rar"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:12:22.077

如果您需要从 URI 中提取查询参数，请查看线程[“如何使用 Ruby 或 Rails 从 URL 中提取 URL 参数？”](https://stackoverflow.com/questions/2500462/how-to-extract-url-parameters-from-a-url-with-ruby-or-rails) . 它包含很多不使用正则表达式的解决方案。

# android - 安卓画布为空

> ID：12596103
> 
> 赞同：0
> 
> 时间：2012-09-26T06:52:03.033
> 
> 标签：android, canvas, locking

这两个表达式可以同时为真吗？holder.getSurface().isValid() == true; 和 canvas = holder.lockCanvas() canvas == null;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:02:12.483

从参考资料：

> isValid() - 这个对象是否拥有一个有效的表面？如果它拥有一个物理表面，则返回 true，因此 lockCanvas() 将成功。

因此，如果 lockCanvas() 成功，它将返回一个非空画布。

但是你不应该直接访问 Surface （你需要同步），`surfaceChanged`你只能在 canvas 不为空时调用`canvas = holder.lockCanvas()`和绘制。

# php - libcurl 陷入 POLLIN 超时

> ID：12596109
> 
> 赞同：6
> 
> 时间：2012-09-26T06:52:20.333
> 
> 标签：php, curl

我的 php 代码中的 libcurl 似乎无限期地卡在`poll`调用中。当我对进程 ID 进行 strace 时，

```
[user@server ~]$ sudo strace -p 19559
Process 19559 attached - interrupt to quit
poll([{fd=7, events=POLLIN}], 1, 1000)  = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 0)     = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 1000)  = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 0)     = 0 (Timeout) 
poll([{fd=7, events=POLLIN}], 1, 1000)  = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 0)     = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 1000)  = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 0)     = 0 (Timeout)
poll([{fd=7, events=POLLIN}], 1, 1000)  = 0 (Timeout) 
```

这种情况无限期地进行。fd 7 在 /proc/19559/fd 中显示为

```
lrwx------ 1 root root 64 Sep 19 19:44 7 -> socket:[335178801] 
```

有人可以告诉我为什么会这样。超时时我该怎么做才能使 libcurl 退出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T06:58:54.513

[`curl_setopt`](http://php.net/manual/en/function.curl-setopt.php)如果设置为非零值，则选项`CURLOPT_CONNECTTIMEOUT`将使 curl 在超时时失败。

# php - Conditional setting of cookies using php

> ID：12596110
> 
> 赞同：1
> 
> 时间：2012-09-26T06:52:23.037
> 
> 标签：php, jquery, cookies

I have like and dislike buttons for multiple posts on my view.

But I want to restrict the voting and hence use cookies which lasts for 7 days.

And I use the `$("a.btn-success").click(function()` function to calculate the success rate of the respective post and to set a cookie. But the php script that I use is setting the cookie even without the button being clicked.

```
<?php
   $expire=time()+60*60*24*30;
   setcookie("coupcookie", calledbyid, $expire);
?> 
```

So if I just refresh the page, I can see that the cookie is set.

Could anyone please tell me what am I doing wrong here?

Thanks in advance.

*edit*

Here is my click function.

```
$("a.btn-success").click(function(){
        var calledby = $(this);
        var calledbyid=calledby.attr("id");
        <?php
             $expire=time()+60*60*24*30;
             setcookie("coupcookie", calledbyid, $expire);
        ?>
        var url = $(location).attr('href');
        var sub = window.location.pathname.split('/');
        alert("Hey button clicked "+calledbyid);
        $.post(url.replace(sub[2]+'/'+sub[3],'')+"home/vote",{ "id" : calledbyid, "vote" : 1 },  function(data){
            //alert("Hey post request completed");
            $.get(url.replace(sub[2]+'/'+sub[3],'')+"home/getsuccess", {"id": calledbyid}, function(result){
                $("#successrate"+calledbyid).html(result.concat('%'));
            }, "text").error(function(xhr, ajaxOptions, thrownError){
                alert(xhr.status);
                alert(thrownError);});

        }, "text").error(function(xhr, ajaxOptions, thrownError){
            alert(xhr.status);
            alert(thrownError);});
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:56:15.650

当您生成 Javascript 代码时，您正在设置 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:56:06.607

PHP 是一种服务器端技术，所以当您看到页面时 PHP**已经完成了他的工作**。因此，没有办法响应 php 中的客户端按钮点击（除了重新加载页面，但在您的情况下并非如此）。因此，您需要`setcookie`从 php 中删除并使用 jQuery 设置您的 cookie。

请参阅[如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:01:38.563

我建议您不要使用 PHP 来设置 cookie，而是使用`jQuery`它自己。因此，它将首先[使用 this](https://github.com/carhartl/jquery-cookie)。

该功能`$("a.btn-success").click`还将包括：

```
$.cookie("coupcookie", calledbyid, { expires : 7 }); 
```

# asp.net-mvc - Entity Framework code-first not generating database in SQL Server

> ID：12596115
> 
> 赞同：0
> 
> 时间：2012-09-26T06:52:32.750
> 
> 标签：asp.net-mvc, entity-framework

I am new to EF code first approach, what I am trying to do is just inserting a record but somehow the database fails to generate in my SQL Server when my SubmitResult method is executed. I placed a breakpoint at `unitOfWork.Save();` and it went through without catching any errors, I assume that if my connection string is invalid it would have thrown an exception. What could possibly be causing this?

Thanks.

```
[HttpPost]
public JsonResult SubmitResult(String signedRequest, String facebookName, String email, int score, String title)
{
    DateTime now = ConstantHelper.GetCurrentTime();
    try
    {
        FacebookSignedRequestUtility fbSignedRequestUtility = new FacebookSignedRequestUtility();
        fbData = fbSignedRequestUtility.Parse(FacebookUtility.AppSecret, signedRequest);

        Entry entry = new Entry();
        entry.Fbuid = fbData.FBUID;
        entry.FacebookName = facebookName;
        entry.Email = email;
        entry.Score = score;
        entry.Title = title;
        entry.CreatedDateTime = now;
        entry.ModifiedDateTime = now;

        unitOfWork.EntryRepository.Insert(entry);
        unitOfWork.Save();
    }
    catch (Exception ex)
    {
        return Json(new { status = "false" });
    }

    return Json(new { status = "true" });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:05:10.360

好的，发现我的 unitOfWork 类有一些问题，如果实例化我的数据库并保存它就可以工作。

```
 AmexContext amc = new AmexContext() ;
        amc.SaveChanges(); 
```

# hadoop - 我应该使用哪个版本的 Hadoop？

> ID：12596116
> 
> 赞同：2
> 
> 时间：2012-09-26T06:52:35.610
> 
> 标签：hadoop

Hadoop 目前有 3 个分支：0.2x、1.x 和 2.x。有什么论据支持使用一种而不是另一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:08:05.633

Hadoop 最近更改了它的 Map/Reduce 实现（现在称为 Yarn）。这可能是选择相对较新版本的原因之一。

如果您想将 Hadoop 与其他相关项目（如 HBase）结合使用，那么版本向量并不是很简单。

您可能想查看 Cloudera 的产品（我不隶属于 Cloudera）。它们提供发行版，您可以从中选择适合彼此的工具子集。当然，他们还提供专业服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:10:32.700

处理太多可用的 hadoop 版本的一种方法是使用 Cloudera 产品。像这样的产品让您更轻松，您不必太担心配置。

# android - 更好地在运行时加载资源或将它们预加载到内存中？

> ID：12596117
> 
> 赞同：0
> 
> 时间：2012-09-26T06:52:38.150
> 
> 标签：android, memory-management, android-resources

我正在开发一个跨多个类的应用程序，因此，我必须将应用程序的上下文传递给所有使用全局字符串或整数的类，以便从 strings.xml 或 dimens 中提取它们。 xml 文件，而不是对它们进行硬编码。到目前为止，我一直在加载曾经需要的资源，但我想知道在构造函数的类上加载我需要的所有资源是否会更有效，请记住它们只是字符串和整数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:29:38.583

对于小对象（字符串、数字），您可以预加载它们，因为它不会占用太多内存。

对于大对象（图像、媒体），最好根据需要加载。

我个人对小对象的偏好是延迟加载它们（根据需要加载，但加载后保留在内存中以备后用），例如：

```
public class Values{
     private static Object pref1;

    public static Object getPreference1(){
         if(pref1 == null){
             pref1 = heavyLoadingOfPref1();
         }
         return pref1;
    }
} 
```

正如，注意到我将它用于各种小对象，对于字符串（尤其是本地资源），像这样加载它们更麻烦，只需在开始时加载一次（如果你已经定义了它们，那么它们更有可能会使用）。

# java - 在哪里可以找到 Java EL 3.0 的实现

> ID：12596118
> 
> 赞同：12
> 
> 时间：2012-09-26T06:52:41.007
> 
> 标签：java, collections, lambda, el, spring-el

目前正在设计表达式语言 3.0 版。它添加了各种很酷的功能，例如通过 lambda 表达式映射和过滤集合。Spring EL 有一个类似的特性，但它不使用 lambdas。

尽管谷歌搜索 EL3 的（参考）实现，但我找不到任何东西，是否有可用的（参考）实现或至少正在进行中？

否则我想我现在可能需要使用 Spring EL。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:32:46.420

如果它在任何地方，它就会在 JSR 341 主页上。他们的源代码库在这里[http://java.net/projects/el-spec/sources/source-code/show](http://java.net/projects/el-spec/sources/source-code/show)但看起来他们还没有参考实现（主干 POM 有`3.0-b02-SNAPSHOT`） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T23:40:40.373

Glassfish 中使用的 Expression Language 3.0 (JSR 341) 的实现可在 Maven Central 中获得：[http ://search.maven.org/#search%7Cgav%7C1%7Cg:%22org.glassfish%22%20AND%20a:% 22javax.el%22](http://search.maven.org/#search%7Cgav%7C1%7Cg:%22org.glassfish%22%20AND%20a:%22javax.el%22)

正如 artbristol 所提到的，参考实现的源代码可以在规范的站点上找到。3.0 版本的确切 URL 是： [https ://java.net/projects/el-spec/sources/source-code/show/tags/javax.el-3.0.0/impl?rev=285](https://java.net/projects/el-spec/sources/source-code/show/tags/javax.el-3.0.0/impl?rev=285)

# javascript - 获取touchend下的元素

> ID：12596121
> 
> 赞同：14
> 
> 时间：2012-09-26T06:52:47.710
> 
> 标签：javascript, touch-event

由于`touchend`事件绑定到`touchstart`触发的元素，当它在事件绑定到的元素之外时，如何在手指离开的位置获取元素。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T06:59:26.680

您可以使用该`document.elementFromPoint`方法，将事件的坐标传递给它：

```
$('#element').on("touchend",function(event){
    var endTarget = document.elementFromPoint(
        event.originalEvent.touches[0].pageX,
        event.originalEvent.touches[0].pageY
    );
}); 
```

**编辑：** 找到一些关于在特定坐标处获取元素的好文章。 [http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/](http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/)

# css - Anchor with span insite - in IE9 doesn't working

> ID：12596122
> 
> 赞同：0
> 
> 时间：2012-09-26T06:52:48.353
> 
> 标签：css, internet-explorer-9, anchor, html

> **Possible Duplicate:**
> [:active css selector not working for IE8 and IE9](https://stackoverflow.com/questions/5594102/active-css-selector-not-working-for-ie8-and-ie9)

I have following problem. I have my stylised linkbutton with span inside (asp.net)

```
 <asp:LinkButton ID="btnSubmit" runat="server" OnClick="btnSubmit_Click" CssClass="button"><span><%# Resources.Resource.BUTTON_SEND %></span></asp:LinkButton> <br /> 
```

And in CSS:

```
.button 
{
background: transparent url(../Images/button/button_right.png) no-repeat scroll top right;
color: #444;
display: block;
float: left;
font: normal 12px arial, sans-serif;
height: 34px;
margin-right: 6px;
padding-right: 11px; /* sliding doors padding */
text-decoration: none;  
}

.button  span
{  
background: transparent url(../Images/button/button_left.png) no-repeat;
display: block;
line-height: 14px;
padding: 10px 0 10px 12px;
color: #BFD7FF;
}

.button:active 
{
background-position: bottom right;
color: #000;
outline: none; /* hide dotted outline in Firefox */
}

.button:active  span
{   
background-position: bottom left;
padding: 11px 0 9px 12px; /* push text down 1px */
color: White;
} 
```

there are my images: ![image1](../Images/1638ca81e21a4d3360782199fdfc2884.png) ![image2](../Images/22d3e4badb391022b441139ca288f0db.png)

In firefox, chrome work fine, but in IE9 :active not trigger. Is any trick to make it work correctly?

Best regards, Dagna

# performance - Temporary tables in Packages - Oracle

> ID：12596126
> 
> 赞同：2
> 
> 时间：2012-09-26T06:53:15.437
> 
> 标签：performance, oracle, packages

I am kind of new in Oracle. I am trying to create a package that has several functions. This is the pseudocode of what I want to do

```
function FunctionA(UserID, startdate, enddate)
  /* Select TransactionDate, Amount
     from TableA
     where TransactionDate between startdate and enddate
     and TableA.UserID = UserID */
  Return TransactionDate, Amount
end FunctionA

function FunctionB(UserID, startdate, enddate)
  /* Select TransactionDate, Amount
     from TableB
     where TransactionDate between startdate and enddate
     and TableB.UserID = UserID */
  Return TransactionDate, Amount
end FunctionA

TYPE TRANSACTION_REC IS RECORD(
          TransactionDate    DATE,
          TransactionAmt     NUMBER);

function MainFunction(startdate, enddate)
  return TBL
  is
  vTrans TRANSACTION_REC;
begin
  FOR rec IN
    ( Select UserID, UserName, UserStatus
      from UserTable
      where EntryDate between startdate and enddate )
  LOOP
    vTrans := FunctionA(rec.UserID, startdate, enddate)

    if vTrans.TransactionDate is null then
       vTrans := FunctionB(rec.UserID, startdate, enddate)

       if vTrans.TransactionDate is null then
           rec.UserStatus := 'Inactive'
       endif;
    endif;
  END Loop;

  PIPE ROW(USER_OBJ_TYPE(rec.UserID,
                       rec.UserName,
                       rec.UserStatus,
                       vTrans.TransactionDate,
                       vTtans.TransactionAmt));
end MainFunction 
```

Running this kind of code takes a long time because TableA and TableB is a very large table, and I am only getting 1 entry per record from the tables.

I would want to create a temporary table (TempTableA, TempTableB) within the package that will temporarily store all records based on the startdate and enddate, so that when I try to retrieve the TransactionDate and Amount for each rec, I will only refer to the TempTables (which is smaller than TableA and TableB).

I also want to take into consideration if the UserID is not found in TableA and TableB. So basically, when there are no records found in TableA and TableB, I also want the entry in the output, but it is indicated that the user is inactive.

Thank you for all your help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:47:19.247

SQL 是一种基于集合的语言。执行一条返回所有需要的行的语句比执行许多语句每条返回一行的效率要高得多。

这是一次获取所有行的一种方法。它使用公共表表达式，因为您阅读了整个 UserTable 并且您应该只执行一次。

```
with cte as 
  (select UserID
         , UserStatus
   from UserTable )
select cte.UserID
       , cte.UserStatus
       , TableA.TransactionDate 
       , TableA.Amount  
from cte join TableA   
     on (cte.UserID = TableA.UserID)
where cte.UserStatus = 'A'
and TableA.TransactionDate between startdate and enddate
union
select cte.UserID
       , cte.UserStatus
       , TableB.TransactionDate 
       , TableB.Amount  
from cte join TableB  
     on (cte.UserID = TableB.UserID)
where cte.UserStatus != 'A'
and TableB.TransactionDate between startdate and enddate 
```

* * *

顺便说一句，要小心临时表。它们不像 T-SQL 中的临时表。它们是永久堆表，只是它们的数据是临时的。这意味着填充临时表是一个昂贵的过程，因为数据库将所有这些行写入磁盘。因此，我们需要确定从临时表中读取数据集所获得的性能提升值得所有这些写入的开销。

您的代码肯定不是这种情况。事实上，性能问题的答案是“使用全局临时表”的情况非常罕见，至少在 Oracle 中不是这样。更好的查询是要走的路，尤其是拥抱集合的喜悦！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:04:24.447

在一个查询中可能会更好，例如：

```
Select UserTable.UserID, UserTable.UserName, UserTable.UserStatus
      ,TableA.TransactionDate AS ATransactionDate
      ,TableA.Amount          AS AAmount
      ,TableB.TransactionDate AS BTransactionDate
      ,TableB.Amount          AS BAmount
from UserTable
left join TableA
  on (UserTable.UserID = TableA.UserID)
left join TableB
  on (UserTable.UserID = TableB.UserID)
where UserTable.EntryDate between startdate and enddate 
```

# java - How can i customize a dialog box in GMF?

> ID：12596131
> 
> 赞同：0
> 
> 时间：2012-09-26T06:53:28.663
> 
> 标签：java, eclipse-plugin, eclipse-gmf

![enter image description here](../Images/bd69b5a87e7cea650d9dbcd5302381fa.png)

Hi,

I am doing a project in GMF. I want to customize a dialog box with a set of default values under the "Choices" column. This is a dialog box which contains a set of values on the left side (Choices), that can be selected to the right side (Feature), and can be moved up or down. Kindly help me..

Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:05:44.013

创建一个扩展至 jface Dialog 的类，实现配置 shell 的方法并创建控件，您可以在其中创建包含两列的组合，其中第一列将具有您的默认值列“Choices”，您可以根据使用树查看器或表格查看器你的要求。在树查看器中选择内容时，激活第二列复合。您甚至可以使用 pagebook，pagebook 是一个复合控件，一次只能看到一个控件。

# annotations - Can I inject spring bean from JAR file?

> ID：12596137
> 
> 赞同：3
> 
> 时间：2012-09-26T06:54:13.720
> 
> 标签：annotations, spring-3

I use Spring 3 in my project.Then I face a problem when I inject spring bean from JAR file. In JAR file, there is class like;

```
package test;

@Service("CommonService")
public class CommonService {
} 
```

And i already used it like this;

```
package com.java.test.app;

@Service(value = "OtherService")
public class OtherService {
    @Resource(name = "CommonService")
    private CommonService service;
} 
```

In my spring-beans.xml;

```
<context:component-scan base-package="com.java.test.app, test">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
</context:component-scan> 
```

But `@Resource` annotation doesn't work.Can I inject spring bean from JAR file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:53:47.017

如果在运行时您的 CommonService 类位于类路径上，并且位于您使用组件扫描指定的基本包中，那么您应该很高兴。尝试使用@Autowired 而不是@Resource。

# sql - Basic SQL statement , select staff name from staff table

> ID：12596139
> 
> 赞同：2
> 
> 时间：2012-09-26T06:54:21.290
> 
> 标签：sql

Here is the requirement

I have two tables like below, OrderList is a data table which include 3 fields stored StaffId which is a foreign key from staff table. Noted that some records may not have a value in this table.

**OrderList**

```
OrderId Marketing_Staff_ID Finance_Staff_Id ManagerId
1       STAFF001           STAFF002         STAFF003
2                          STAFF005         STAFF003
3       STAFF004           STAFF004         STAFF003
4       STAFF001           STAFF002         STAFF003
5       STAFF001                            STAFF007 
```

**Staff**

```
Staff_Id Staff_Name
STAFF001 Jack C.K.
STAFF002 William. C
STAFF005 Someone 
```

I want to write a SQL statement can also select staff name for each record form OrderList, (For these records without staff ID, leave N/A in the name field)

```
OrderId Mkt StaffID Name       Finance StaffId  Name      ManagerId, Name
1       STAFF001    Jack C.K.  STAFF002         William.  STAFF003   Chan.Chi 
```

So how can I write the SQL? Left join or sth?

Thank you very much as I am really a beginner in SQL.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:00:15.740

你需要多个`LEFT JOIN`s：

```
select ol.orderid,
       ol.marketing_staff_id,
       coalesce(ms.staff_name, 'n/a') as marketing_name,
       ol.finance_staff_id,
       coalesce(fi.staff_name, 'n/a') as finance_name
from orderlist as ol
  left join staff as ms on ms.staff_id = ol.marketing_staff_id
  left join staff as fi on fi.staff_id = ol.finance_staff_id 
```

我将由您来为经理添加加入。

以上是 ANSI SQL，应该适用于每个 DBMS。您的 DBMS 可能不支持`coalesce`简单地将`NULL`值替换为不同值的功能。在这种情况下，您需要查看 DBMS 的手册。

# php - How to change links in joomla

> ID：12596147
> 
> 赞同：1
> 
> 时间：2012-09-26T06:54:59.263
> 
> 标签：php, html, joomla1.5

I am starter in Joomla and trying to understand this CMS , i just copied 1 Joomla website from one web hosting to another . This is the domain [http://tinyurl.com/cmrz9yc](http://tinyurl.com/cmrz9yc) on the top right , it shows images of flags , they're for switching the website language, it works fine but the problem is , when i click on the flags , it goes to actual domain , from where i copied this website . I just want to change the language links to my domain [http://jsgarments.net/](http://jsgarments.net/) . Also when i clicked on the logo , it redirects to actual domain /. I want to change these links to my domain , please help me in this. Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:01:53.543

```
 Hi user1124187

    Use ?tp=1 to see the position of the module/component.

    You can use it as mentioned below

    http://jsgarments.net/?tp=1

Login to your admin panel

1\. Go to module 
2\. Select position top.

you can made changes from there.This part is assigned to position "Top".
or may be you have to do something from template. 
```

希望这会帮助你。

# opencv - OpenCV：未解析的外部符号 cv::Algorithm

> ID：12596149
> 
> 赞同：0
> 
> 时间：2012-09-26T06:55:02.047
> 
> 标签：opencv, linker, linker-errors

我知道我的链接器选项中只是缺少一个 .lib 。但是哪一个？cv::Algorithm 包含在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:38:08.087

解决了，就是 opencv_core24x.lib :-)

# mysql - 如何让 Magento 更快地保存产品？

> ID：12596151
> 
> 赞同：4
> 
> 时间：2012-09-26T06:55:32.500
> 
> 标签：mysql, sql, performance, magento

**这条线以下的所有内容都已过时。Magento 只是很慢，仅此而已。**

* * *

Magento 非常慢，如[https://stackoverflow.com/questions/12580828/magento-saving-product-is-extremly-slow-but-profiler-shows-it-only-takes-1sec/12583078#12583078中所述](https://stackoverflow.com/questions/12580828/magento-saving-product-is-extremly-slow-but-profiler-shows-it-only-takes-1sec/12583078#12583078)

由于在 HostGator 上缺乏 root 权限而苦苦挣扎后，我最终分析了 Magento 调用自己。

这是其中一个结果：

`Blue: timing 1982878436 Mage_Sales_Model_Mysql4_Quote begin`<- 这是在输入`Mage_Sales_Model_Mysql4_Quote`'`save`方法时记录的。

`Blue: timing 1982878436 Mage_Sales_Model_Mysql4_Quote 46`<- 退出时会记录下来。

该数字`1982878436`是作为呼叫的 id 生成的随机数。number`46`是以秒为单位的时间。

```
2012-09-26T06:36:16+00:00 DEBUG (7): Blue: timing 1982878436 Mage_Sales_Model_Mysql4_Quote begin
2012-09-26T06:36:18+00:00 DEBUG (7): Blue: timing 645597828 Mage_Log_Model_Mysql4_Visitor begin
2012-09-26T06:36:18+00:00 DEBUG (7): Blue: 645597828 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:36:18+00:00 DEBUG (7): Blue: timing 645597828 Mage_Log_Model_Mysql4_Visitor 0
2012-09-26T06:36:18+00:00 DEBUG (7): Blue: timing 1712949075 Mage_Sales_Model_Mysql4_Quote begin
2012-09-26T06:36:24+00:00 DEBUG (7): Blue: timing 2103820838 Mage_Sales_Model_Mysql4_Quote begin
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: timing 1999314779 Mage_Log_Model_Mysql4_Visitor begin
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: 1999314779 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: timing 1999314779 Mage_Log_Model_Mysql4_Visitor 0
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: timing 504509596 Mage_Sales_Model_Mysql4_Quote begin
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: timing 1887845167 Mage_Log_Model_Mysql4_Visitor begin
2012-09-26T06:36:56+00:00 DEBUG (7): Blue: timing 1887845167 Mage_Log_Model_Mysql4_Visitor 0
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 1887308594 Mage_GoogleOptimizer_Model_Mysql4_Code begin
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 1887308594 Mage_GoogleOptimizer_Model_Mysql4_Code 0
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: 504509596 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 504509596 Mage_Sales_Model_Mysql4_Quote 6
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: 1982878436 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 1982878436 Mage_Sales_Model_Mysql4_Quote 46
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: 1712949075 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 1712949075 Mage_Sales_Model_Mysql4_Quote 44
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: 2103820838 Varien_Db_Adapter_Pdo_Mysql
2012-09-26T06:37:02+00:00 DEBUG (7): Blue: timing 2103820838 Mage_Sales_Model_Mysql4_Quote 38 
```

正如我们所见`1982878436`，`1712949075`,`2103820838`被并行调用，每个都需要几十秒才能完成。我怀疑这三个调用之间存在一些锁定问题，使它们相互等待。有时当我保存产品时，Magento 甚至会报告操作失败，因为 MySQL 由于死锁而失败。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:48:51.020

当运行 inloving 查询时`IN`，`MySQL`总是让最外层的表领先。

这意味着这个查询：

```
 UPDATE {$this->getTable('sales/quote')} SET trigger_recollect = 1
    WHERE entity_id IN (
        SELECT DISTINCT quote_id
        FROM {$this->getTable('sales/quote_item')}
        WHERE product_id IN (SELECT DISTINCT product_id FROM {$this->getTable('catalogrule/rule_product_price')}) 
```

将不得不扫描每条记录`sales/quote`并检查它，`sales/quote_item`而它又必须检查每个匹配的记录`catalogrule/rule_product_price`。

如果有`sales/quote`比子查询返回的记录多得多的记录，这将很慢。

您可能希望将其重写为连接：

```
UPDATE  {$this->getTable('catalogrule/rule_product_price')} crpp
JOIN    {$this->getTable('sales/quote_item')} sqi
ON      sqi.product_id = crpp.product_id
JOIN    {$this->getTable('sales/quote')} sq
ON      sq.entity_id = sqi.quote_id
SET     sq.trigger_recollect = 1 
```

这样，优化器可以选择哪个表作为前导（当每个连接字段都被索引时，它应该是最小的表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T01:48:33.550

它最终只是其他查询阻止了这些查询。在这个问题上有两个主要的放缓。

一个在 Mage/Sales/Model/Mysql4/Quote.php 中，有两个嵌套查询。我既不知道 MySQL 的缓存是如何工作的，也不知道如何在 HostGator 上配置 MySQL，所以我最终自己缓存了查询结果：

```
public function markQuotesRecollectOnCatalogRules()
{
    /*
    $this->_getWriteAdapter()->query("
        UPDATE {$this->getTable('sales/quote')} SET trigger_recollect = 1
        WHERE entity_id IN (
            SELECT DISTINCT quote_id
            FROM {$this->getTable('sales/quote_item')}
            WHERE product_id IN (SELECT DISTINCT product_id FROM {$this->getTable('catalogrule/rule_product_price')})
        )"
    );
    */

    $products = $this->_getReadAdapter()->fetchCol("SELECT DISTINCT product_id FROM {$this->getTable('catalogrule/rule_product_price')}");

    $ids = $this->_getReadAdapter()->fetchCol("
        SELECT DISTINCT quote_id
            FROM {$this->getTable('sales/quote_item')}
            WHERE product_id IN (?)", implode(',', $products)
    );

    if (count($ids) > 0)
    {
        $this->_getWriteAdapter()->query("
            UPDATE {$this->getTable('sales/quote')} SET trigger_recollect = 1
                WHERE entity_id IN (?)", implode(',', $ids)
        );
    }
} 
```

和

```
public function markQuotesRecollect($productIds)
{
    /*
    $this->_getWriteAdapter()->query("
        UPDATE `{$this->getTable('sales/quote')}` SET `trigger_recollect` = 1
        WHERE `entity_id` IN (
            SELECT DISTINCT `quote_id`
            FROM `{$this->getTable('sales/quote_item')}`
            WHERE `product_id` IN (?)
        )", $productIds
    );
    */

    $ids = $this->_getReadAdapter()->fetchCol("
        SELECT DISTINCT quote_id
            FROM {$this->getTable('sales/quote_item')}
            WHERE product_id IN (?)", $productIds
    );

    if (count($ids) > 0)
    {
        $this->_getWriteAdapter()->query("
            UPDATE {$this->getTable('sales/quote')} SET trigger_recollect = 1
                WHERE entity_id IN (?)", implode(',', $ids)
        );
    }

    return $this;
} 
```

还有 Mage/CatalogRule/Model/Rule.php。在内部，这似乎是一个众所周知的重新索引问题。

```
public function applyAllRulesToProduct($product)
{
    $this->_getResource()->applyAllRulesForDateRange(NULL, NULL, $product);
    $this->_invalidateCache();

    /*
    $indexProcess = Mage::getSingleton('index/indexer')->getProcessByCode('catalog_product_price');
    if ($indexProcess) {
        $indexProcess->reindexAll();
    }
    */

    if ($product instanceof Mage_Catalog_Model_Product)
    {
        $id = $product->getId();
    }
    else
    {
        $id = $product;
    }

    if ($id)
    {
        $indexer = Mage::getResourceSingleton('catalog/product_indexer_price');

        if ($indexer)
        {
            $indexer->reindexProductIds(array($id));
        }
    }
} 
```

我认为让它响应全球环境应该是一个更好的方法。但是我没有时间，所以我复制了这个解决方案。

# svn - Subversion: how to synchronize $Id$ in various branches of the repository?

> ID：12596154
> 
> 赞同：0
> 
> 时间：2012-09-26T06:55:36.360
> 
> 标签：svn

I have repository with many branches and all source files have `$Id$`. When I change one file on trunk I have to change it also on specific branch from the same repository. If I simply copy modified file to specific branch and commit it then `$Id$` will have new value. From this time the only difference between source file in trunk and source file in branch is value in `$Id$` and file compare utilities will show it as difference.

Is there any way to have the same `$Id` in both trunk and branch?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:57:59.753

如果您在同一个提交中同时提交主干和分支，那可能会这样做。可以通过使用 svn 比较实用程序来缓解比较实用程序看到差异的问题，它应该理解没有差异。

# visual-studio-2010 - 自动制表符/插入空格作为制表符设置开关

> ID：12596155
> 
> 赞同：1
> 
> 时间：2012-09-26T06:55:37.413
> 
> 标签：visual-studio-2010, visual-studio-2012

有时会使用不同的缩进策略在代码库之间切换，即使用纯制表符或空格而不是制表符。由于每个代码库都合理地希望保留编码风格，因此开发人员必须记住在每次更改他正在处理的项目时切换到正确的设置。有没有办法自动执行此操作，或者将设置保存为项目/解决方案的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:08:05.423

开箱即用的 VS 仅支持每用户每机器设置，包括代码格式化。

有启用每个项目设置的第三方加载项。[此示例加载项](http://www.claassen.net/geek/blog/2010/08/loading-per-solution-settings-with-visual-studio-2008.html)提供对 VS2008 的支持。

另一种选择是在外部执行格式化，一个选项是“Uncrustify”，在[此处](http://web.archive.org/web/20100905214224/http://scientificninja.com/blog/per-project-code-formatting-in-visual-studio)发表博客。

# c++ - Value initialization for non aggregate class with user defined constructor

> ID：12596158
> 
> 赞同：1
> 
> 时间：2012-09-26T06:55:59.410
> 
> 标签：c++

I am going through this question:[Aggregates and pods](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821) When an object of class in C++ with user defined default constructor, has only some of it's data members initialized,will the rest of data members be value initialized? Following is the program I tried resulting in compilation error:

```
#include <iostream>
using namespace std;

class A {
public:
    A() {
        i=10;
        f = 10.0f;
        c = 45;
        d = 10.0;
    }

    void show() {
        cout << i << "\t" << f << "\t" << c << "\t" << d<<"\n";
    }

private:
    int i;
    float f;
    char c;
    double d;
};

int main() {
    A a={20,20.0f};
    a.show();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:06:51.327

Your class does not qualify as an Aggregate because it has `private` non-static data members.

> An aggregate is an array or a class (Clause 9) with no user-provided constructors (12.1), no brace-or-equal-initializers for non-static data members (9.2), **no private or protected non-static data members (Clause 11)**, no base classes (Clause 10), and no virtual functions (10.3).

**EDIT:**

> For objects of non aggregate classes if only some of the data members are initialized, will the rest be value initialized(assigned with 0)?

The rules are specified in:

**C++11 8.5.4 List-initialization [dcl.init.list] Para 3:**

> List-initialization of an object or reference of type T is defined as follows:
> — If the initializer list has no elements and T is a class type with a default constructor, the object is value-initialized.
> — Otherwise, if T is an aggregate, aggregate initialization is performed (8.5.1).
> — Otherwise, if T is a specialization of std::initializer_list, an initializer_list object is constructed as described below and used to initialize the object according to the rules for initialization of an object from a class of the same type (8.5).
> — Otherwise, if T is a class type, constructors are considered. The applicable constructors are enumerated and the best one is chosen through overload resolution (13.3, 13.3.1.7). If a narrowing conversion (see below) is required to convert any of the arguments, the program is ill-formed.
> — Otherwise, if T is a reference type, a prvalue temporary of the type referenced by T is list-initialized, and the reference is bound to that temporary. [ Note: As usual, the binding will fail and the program is ill-formed if the reference type is an lvalue reference to a non-const type. —end note ]
> — Otherwise, if the initializer list has a single element, the object or reference is initialized from that element; if a narrowing conversion (see below) is required to convert the element to T, the program is ill-formed.
> — Otherwise, if the initializer list has no elements, the object is value-initialized.
> — Otherwise, the program is ill-formed.

Your program falls in none of the scenarios mentioned and hence falls under the the ill formed case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:06:09.877

您必须使用 4 个参数声明构造函数，例如

```
A(int i = 10, float f = 10.0f, int c = 45, float d = 10.0f):
i(i), f(f), c(c), d(d)
{

} 
```

现在你可以用大括号初始化你的变量

# android - 在Android中关闭应用后是否可以接收短信

> ID：12596164
> 
> 赞同：0
> 
> 时间：2012-09-26T06:56:10.673
> 
> 标签：android, android-intent, sms, broadcastreceiver

我正在开发一个短信应用程序，即使在应用程序关闭后，我也需要将短信数据上传到应用程序的列表中。我该怎么做？

# ios - 是否可以在 iOS 中重置隐私设置？

> ID：12596165
> 
> 赞同：91
> 
> 时间：2012-09-26T06:56:12.467
> 
> 标签：ios, objective-c, iphone, calabash, ekeventkit

为了测试对 iOS 日历的访问权限，我需要在我的测试设备上重置隐私设置。

但是，每次我在设备上安装它时，它都会记住旧的隐私设置，并且不会显示警报视图来询问我是否授予访问权限。删除应用程序并重新安装它不会改变这一事实。

有没有办法让 iOS 忘记它知道我的应用程序并再次问我？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-09-26T07:07:44.283

Start the "Settings.app", go to General > Reset > Reset Location & Privacy.

This resets the privacy settings for all apps, but as far as I know, there is no way to reset it for a single app. Even removing the app and installing it again does not help.

# asp.net - SqlDataAdapter 在 SQL Server 2012 中返回意外的行

> ID：12596168
> 
> 赞同：1
> 
> 时间：2012-09-26T06:56:29.723
> 
> 标签：asp.net, c#-4.0, sql-server-2012

情况的简短描述。

一个 Web 应用程序，用户可以在其中选择一些搜索条件，点击搜索按钮，然后查看显示在网格中的结果。

此应用程序在我们的开发服务器上按预期工作。但是，当部署在客户的服务器上时，网格的分页被破坏了：第一页是正确的，但下一页没有返回正确的行。我只能用一个例子来解释会发生什么：

假设第 1 页应显示结果 1-10，第 2 页应显示结果 11-20，等等。

发生的情况是这样的：第 1 页显示 1-10，第 2页显示**1、2、3、4、6、8、9、28、29、30第****3**页显示 1、2、3、28、29、36 ,37,..

所以行被弄乱了，很多结果都没有显示（替换为上一页的结果）。另请注意，这些行不只是偏离了某个数字。

经过数小时的搜索和调试，我只能得出结论，正在使用的 SqlDataAdapter 的 Fill() 方法返回了错误的结果！适配器使用 SqlCommand，将 SQL 查询作为纯文本。我可以在 SQL Server Management Studio 中运行这个查询，它会返回正确的结果，所以它在 .NET 框架本身内部肯定会出错。

我尝试启用 .NET 源代码调试以进入 Fill 方法，但我无法让它工作，所以基本上我现在没有选择了..

非常感谢任何提示/建议！

<问题已解决，请看下面的答案>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:39:43.077

我找到了问题的原因。SQL查询手动实现分页（不要问我为什么，代码不是我写的，我只需要维护它;-)）。使用了以下语句：

```
("DELETE FROM #tmp WHERE AccountId IN (SELECT TOP {0} AccountId FROM #tmp);", request.PageStart)
("SELECT DISTINCT TOP {0} ", request.NumRecords); 
```

#tmp 表是在前面的语句中创建的，带有一个特定的 ORDER BY 子句。由于#tmp 表已经排序，您希望删除语句会删除正确的顶部记录。但显然，当将 SqlDataAdapter 与 SQL Server 2012 数据库结合使用时，该顺序不再正确应用。在添加与创建#tmp 表的查询相同的order by 子句后，问题就解决了。还有一个问题：这是错误还是功能？

# asp.net - Gridview 的 Oracle 连接问题

> ID：12596169
> 
> 赞同：0
> 
> 时间：2012-09-26T06:56:37.970
> 
> 标签：asp.net, oracle, gridview, connection

我尝试在 asp.net 中连接一个 oracle 数据库。我想处理与 SqlDataSource 的连接。当我使用下面的代码时，我收到以下错误：

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

> 异常详细信息：System.ComponentModel.Win32Exception：系统找不到指定的文件。
> 
> 源错误：
> 
> [Win32Exception (0x80004005): 系统找不到指定的文件。]
> 
> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）]

这是.aspx文件：

* * *

```
<%@ Page Language="C#" AutoEventWireup="true" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:SqlDataSource
        id="SqlDataSource1"
        runat="server"
        DataSourceMode="DataReader"            
        SelectCommand="SELECT * FROM PERSON "
        ConnectionString="<%$ ConnectionStrings:OracleConnectionString %>">
    </asp:SqlDataSource>

    <asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" BackColor="WindowFrame" AllowSorting="true" AllowPaging="true">

        <Columns>
            <asp:BoundField HeaderText="Numarası" DataField="ID" />
            <asp:BoundField HeaderText="Adı" DataField="NAME" />
            <asp:BoundField HeaderText="Soyadı" DataField="SURNAME" />

        </Columns>

    </asp:GridView>

    <br />

</div>       
</form> 
```

* * *

但是我可以直接连接数据库，除了我可以用另一个代码文件连接它，过程如下：

```
 private void ReadOracleTypesExample(string connectionString)
    {
        OracleConnection connection = new OracleConnection(connectionString);
        connection.Open();
        OracleCommand command = connection.CreateCommand();
        try
        {
            command.CommandText = "SELECT * FROM PERSON";
            OracleDataReader reader = command.ExecuteReader();

        if (reader.HasRows)
        {
            while (reader.Read())
            {

                OracleString oraclesring2 = reader.GetOracleString(1);
                Label2.Text += ("<br />" + oraclesring2.ToString());

                OracleString oraclestring3 = reader.GetOracleString(2);
                Label3.Text += ("<br /> " + oraclestring3.ToString());
            }
        }
        else
        {
            Console.WriteLine("No rows found.");
        }
        reader.Close();

    }
    catch (Exception e)
    {
        Label1.Text = e.Message;
    }
    finally
    {
        connection.Close();
    }
} 
```

* * *

* * *

可以通过 c# 之外的工具访问 oracle 数据库。我无法想象为什么我不能连接到数据库，我会跑题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:30:48.527

> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）]

您的连接字符串似乎有问题。您的页面无法连接到数据库。

我使用以下连接字符串：

> add name="ConnectionString" connectionString="Data Source=localhost;Password=123456;User ID=TAHA";Unicode=True" providerName="System.Data.OracleClient" />

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:42:59.377

为了使用 SqlDataSource 控件连接到 Oracle 数据库，您必须配置 SqlDataSource。

1 从工具箱的数据选项卡中，将 SqlDataSource 控件拖到您的页面上。

2 如果没有出现 SqlDataSource Tasks 智能标记，右键单击控件并单击显示智能标记。

3 在 SqlDataSource 任务列表中，单击配置数据源。

4 在“配置数据源”对话框中，单击“新建连接”。

5 显示选择数据源对话框。

6 在数据源列表中，单击 Oracle 数据库，然后单击继续。

7 显示添加连接对话框。

8 在“服务器名称”框中，键入 Oracle 服务器的名称。

9 键入用户名和密码以连接数据库。

10 确保选中是，保存此连接复选框，根据需要更改连接字符串的名称，然后单击下一步将连接字符串信息保存在应用程序的 Web.config 文件中。

11 出现配置选择语句窗格。

12 单击下一步。

13 单击测试查询按钮以针对数据库测试您的查询，然后单击完成。

# html - 如何从 iOS6 中的网页链接打开带有位置的计划应用程序？

> ID：12596171
> 
> 赞同：0
> 
> 时间：2012-09-26T06:56:37.490
> 
> 标签：html, ios6, maps, geocoding

在 iOS <= 5 上，我只使用：

```
<a href="http://maps.google.com/maps?q=48.853873,2.336883">See Paris on "Plan"</a> 
```

和 safari 打开计划中的链接

在 iOS6 上，此链接在 googlemaps 网站中打开。我看到他们是“地图：”协议，但我不知道语法。

例如：

```
<a href="maps:48.853873,2.336883">See Paris on "Plan"</a> 
```

将在 iOS6 上打开“计划”应用程序，但不显示任何坐标。

iOS 上“maps:”protocole 的最小语法是什么？它们是“地图：”协议的 API，用于详细的语法（地址、缩放级别、...）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:08:36.310

好吧，我自己回答……

你现在可以使用

```
<a href="http://maps.apple.com/maps?q=Paris,france"> 
```

在非 iOS 浏览器上，它将重定向到谷歌地图。

[https://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](https://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

# xmlhttprequest - 当它返回错误消息时，无法从 flex 中的 xml 服务获取正确的数据

> ID：12596175
> 
> 赞同：0
> 
> 时间：2012-09-26T06:56:56.027
> 
> 标签：xmlhttprequest, flex4.5, httpservice

我正在尝试从 free.worldweatheronline.com 的 xml Web 服务获取数据，如果在 Web 服务中找到城市，我会给出城市名称，它会返回如下数据：

```
<data><request><type>City</type><query>Hyderabad, india</query></request><current_condition><observation_time>06:04 AM</observation_time><temp_C>34</temp_C><temp_F>92</temp_F><weatherCode>113</weatherCode><weatherIconUrl>http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png</weatherIconUrl><weatherDesc>Sunny</weatherDesc><windspeedMiles>14</windspeedMiles><windspeedKmph>22</windspeedKmph><winddirDegree>230</winddirDegree><winddir16Point>SW</winddir16Point><precipMM>0.0</precipMM><humidity>50</humidity><visibility>10</visibility><pressure>1011</pressure><cloudcover>0</cloudcover></current_condition> 
```

我的 http 服务弹性代码是这样的：

```
<s:HTTPService id="weatherService"
                   url="{BASE_URL}"
                   resultFormat="object"
                   result="weatherService_resultHandler(event)"
                   fault="weatherService_faultHandler(event)"
                   showBusyCursor="true">
        <s:request xmlns="">
            <q>{cityName.text.toString()}</q>
            <format>{FORMAT}</format>
            <num_of_days>{NUMBER_OF_DAYS}</num_of_days>
            <key>{API_KEY}</key>
        </s:request>
    </s:HTTPService> 
```

这是处理代码：

```
private static const BASE_URL:String="http://free.worldweatheronline.com/feed/weather.ashx";
private static const API_KEY:String="MY_API_KEY";
private static const NUMBER_OF_DAYS:uint=2;
private static const FORMAT:String="xml";

protected function weatherService_resultHandler(event:ResultEvent):void
{
    // TODO Auto-generated method stub
    var result_weather_data:Object = event.result;
    cityNameData.text=result_weather_data.data.request.query;
}

protected function weatherService_faultHandler(event:FaultEvent):void
{
    // TODO Auto-generated method stub          

} 
```

如果未找到该城市，则返回如下 xml 数据：

```
<data><error><msg>Unable to find any matching weather location to the query submitted!</msg></error></data> 
```

我正在尝试这样做

```
var error_msg:String = result_weather_data.data.error.msg; 
```

在上面代码中的 cityNameData.text 之前，但它给出了未定义属性或类似内容的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:06:08.053

如果 xml 中不存在属性，则会引发错误

//还要注意根名不需要指定访问这个子节点

//您需要像这样检查XML中的属性是否可用

```
 if(event.result is XML)
    {           
        var errorXML:XML = event.result as XML; 

        if(errorXML && errorXML.hasOwnPerperty("error") )
        {
            if(errorXML.error && errorXML.error.hasOwnProperty("msg"))
            {
                var yourErrorMsg:String = errorXML.error.msg; 
            }
        }
    }           
    else if(event.result is Object)
    {
        var result_weather_data:Object = event.result;

        if(result_weather_data && result_weather_data.hasOwnProperty('data'))
        {
            if(result_weather_data.data && result_weather_data.data.hasOwnProperty("request"))
            {
                if(result_weather_data.data.request && result_weather_data.data.request.hasOwnProperty("query"))
                {
                    cityNameData.text = result_weather_data.data.request.query;
                }
                else
                {
                    trace("query property not exists in result_weather_data.data.request Object");
                }
            }
            else
            {
                trace("request property not exists in result_weather_data.data Object");
            }
        }
        else
        {
            trace("result_weather_data is NULL or data property not exists in result_weather_data Object");
        }
    } 
```

# asp.net - 如何在时间限制内过期 Asp.net 会话

> ID：12596177
> 
> 赞同：0
> 
> 时间：2012-09-26T06:57:01.597
> 
> 标签：asp.net

嗨，我的问题是在我的应用程序中，当用户处于 idel 5 分钟时，我想使会话过期，然后页面要重定向到登录页面，当用户登录时，我想直接重定向到会话过期页面，请给我发送解决方案

我正在使用以下代码使会话过期我的页面在用户登录后也重定向到登录我想重定向到会话过期页面

```
<sessionState mode="InProc" cookieless="false" timeout="2"></sessionState> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:09:02.077

```
<system.web>
<sessionState timeout="60" /> 
```

.........

and this is in seconds 60 means 1 minute ...

u can use also Session.Abandon();

if u want in 5 min u should put 300

and if u want to direct to any page after session is expire u can do it by `if(session["session_name"]==null) {response.redirect("page_name");}`

# iphone - iOS 的图像上传，ASIHttpRequest 以外的第三方 api

> ID：12596179
> 
> 赞同：0
> 
> 时间：2012-09-26T06:57:13.233
> 
> 标签：iphone, ios, asihttprequest

我正在寻找除 ASIHttpRequest 之外的有效图片上传第三方框架。

还有比 ASIHttpRequest 更高效的第三方 api 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:59:32.277

您可以使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

下面是上传文件：

```
NSURL *url = [NSURL URLWithString:@"http://api-base-url.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"avatar.jpg"], 0.5);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

# java - 有没有办法在对象名称中使用变量？

> ID：12596180
> 
> 赞同：2
> 
> 时间：2012-09-26T06:57:12.873
> 
> 标签：java, syntax

假设我们有一个复选框：

`JCheckBox lang_1 = new JCheckBox("English");`

此外，我们有一个绑定到 ActionListener 的变量，因此当 ActionEvent 发生时它会发生变化。这是 ActionEvent 中的变量：

`(String) abbr = JComboBox<ComboItem> comboBox.getSelectedIndex().toString();`

现在，我有*abbr*等于*1*所以我想`lang_1.setEnabled(true);`

**有什么方法可以将 "lang_" 与*abbr*混合使用，就像我使用 lang_1 一样？**

（在 jQuery 中你可以这样做`$("lang_"+abbr).doSomethingFunction();`：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:04:03.697

最简单的方法是将您的 JCheckBoxes 放在一个数组列表中并使用它们的索引调用它们：

```
List<JCheckBox> boxes = new ArrayList<JCheckBox> ();
boxes.add(new JCheckBox("English"));
// populate the list with the other check boxes

String abbr = JComboBox<ComboItem> comboBox.getSelectedIndex().toString();
int index = Integer.parseInt(abbr);
boxes.get(index).setEnabled(true); 
```

您需要在边界、数字解析等方面添加相关的错误处理代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:04:13.163

是的，您可以使用反射来做到这一点。

以下示例假定您的代码与将组合框作为字段的代码在同一类中。

```
 this.getClass().getField("lang_" + yourIndex).
     getMethod("setEnabled", new Class<?>[]{ boolean.class}).
     invoke(
         this.getClass().getField("lang_" + yourIndex).get(this), 
         new Object[] { true }
     ); 
```

我必须承认它看起来很丑:)。

assylias 的解决方案更简洁、自我解释和“句法”，后者始终是在静态类型语言中处理事物的好方法。

# mysql - mysql中两行的区别

> ID：12596181
> 
> 赞同：0
> 
> 时间：2012-09-26T06:57:16.377
> 
> 标签：mysql

我需要两行的差异

```
SELECT ( b.l2framessent - a.l2framessent ), 
       CONVERT((Min(a.datetime) DIV 500)*500, datetime) 
       + INTERVAL 5 minute AS endOfInterval 
FROM   databasename.tablename a, 
       databasename.tablename b 
WHERE  a.ipaddress = 'moteid6' 
       AND b.ipaddress = 'moteid6' 
       AND a.datetime BETWEEN '2012-09-25 15:45:00' AND '2012-09-25 18:45:00' 
GROUP  BY a.datetime DIV 500; 
```

这两行都来自同一个表、数据库和同一列

我得到消极和不相关的价值观

如何获得正确的值

```
select datetime, l2framessent 
from 6panview.Statistics3 
where ipaddress = 'moteid6' 
    AND datetime BETWEEN '2012-09-25 15:45:00' AND '2012-09-25 18:50:00';

+---------------------+--------------+
| datetime            | l2framessent |
+---------------------+--------------+
| 2012-09-25 17:45:56 |  25 |
| 2012-09-25 17:50:35 |  56 |
| 2012-09-25 17:55:15 |  87 |
| 2012-09-25 17:59:54 | 117 |
| 2012-09-25 18:04:33 | 148 |
| 2012-09-25 18:09:13 | 178 |
| 2012-09-25 18:13:52 | 208 |
| 2012-09-25 18:18:31 | 238 |
| 2012-09-25 18:23:10 | 269 |
| 2012-09-25 18:39:43 | 372 |
| 2012-09-25 18:44:23 | 402 |
| 2012-09-25 18:49:02 | 432 |
+---------------------+-----+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:03:14.073

尝试这个。不确定，但如果可行的话，祝你好运：

```
AND a.datetime BETWEEN TO_SECONDS('2012-09-25 15:45:00') AND TO_SECONDS('2012-09-25 18:45:00') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:17:39.477

这是一个有效的查询。你一开始是对的，除以 500，我没有意识到 MySQL 如何将日期时间转换为数字。

```
SELECT ( b.l2framessent - a.l2framessent ), 
       CONVERT(endOfInterval*500, DATETIME) endOfInterval
FROM   (SELECT datetime DIV 500 startOfInterval,
               l2framessent
        FROM tablename,
             (SELECT MIN(datetime) mindate
              FROM tablename
              WHERE ipaddress = 'moteid6'
                    AND datetime BETWEEN '2012-09-25 15:45:00' AND '2012-09-25 18:45:00'
              GROUP BY datetime DIV 500) b
        WHERE ipaddress = 'moteid6'
              AND datetime = mindate
       ) a, 
       (SELECT datetime DIV 500 endOfInterval,
               l2framessent
        FROM tablename,
             (SELECT MIN(datetime) mindate
              FROM tablename
              WHERE ipaddress = 'moteid6'
                    AND datetime BETWEEN '2012-09-25 15:45:00' AND '2012-09-25 18:45:00'
              GROUP BY datetime DIV 500) b
        WHERE ipaddress = 'moteid6'
              AND datetime = mindate
       ) b
WHERE endOfInterval = startOfInterval + 1 
```

[小提琴](http://www.sqlfiddle.com/#!2/96eb5/10)

# c - 如何动态分配 16B 对齐的二维数组

> ID：12596183
> 
> 赞同：1
> 
> 时间：2012-09-26T06:57:29.567
> 
> 标签：c, arrays, allocation, memory-alignment

我想使用`memalign`16B 而不是仅使用`malloc`.

我有

```
A =(float **) malloc( (*dim) * sizeof(float*));
for ( i = 0 ; i < (*dim) ; i++) {

    A[i] = (float*) malloc(sizeof(float)*(*dim));
} 
```

如何更改上面的代码`memalign`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:13:53.947

`malloc()`您需要请求 15 个额外字节，然后将返回的指针舍入到最接近的 16 倍数，例如：

```
void* p = malloc(size + 15);
void* paligned;
if (!p) { /* handle errors */ }
paligned = (void*)(((size_t)p + 15) / 16 * 16);
/* use paligned */
free(p); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:14:05.057

你在这里拥有的并不是一个真正的二维矩阵，只是一个指向更多一维数组的一维数组。

你想要这样的东西吗？

```
A = (float*) memalign(16, (*dim) * (*dim) * sizeof(float)); 
```

这将为您生成一个长度为 dim^2 个元素的一维数组。这就是 C/C++ 中通常使用 2D 数组的方式（除非您有特定原因使用指向其他数组的指针数组）。

我假设您希望将此数组输入到某个 DSP 函数中 - 如果不知道您尝试使用的函数，很难了解更多信息。

如果您必须以 A[x][y] 的身份访问数组，您可以这样做：

```
float *aMemory = (float*) memalign(16, (*dim) * (*dim));
float **A = (float**) malloc(*dim * sizeof(float));
for (i = 0; i < *dim; i++)
{
    A[i] = &aMemory[*dim * i];
} 
```

现在您可以通过指针数组 A 访问数组 aMemory，如

```
// A[row][column]
A[0][0] = 0.0f;
A[1][1] = 1.0f; 
```

等等

# apache-flex - 数据库作为数据源以在 flex 中创建树

> ID：12596185
> 
> 赞同：0
> 
> 时间：2012-09-26T06:57:38.833
> 
> 标签：apache-flex, tree

我想在 Flex 应用程序中使用数据库表作为树的数据源。我尝试从数据库表创建 XML 文件并将其提供给树。但没有成功。请给我一些解决方案。

xml:

```
<node>
    <node labe="Some Data"/>
    <node labe="Some Data"/>
</node> 
```

xml:

```
<mx:Tree id="tree2"
    width="567"
    height="527"
    labelField="@label"
    showRoot="true"
    useHandCursor="true"
    buttonMode="true"
    change="treeChangeEvent(event)">
    <mx:dataProvider>
        <s:XMLListCollection id="xmlListColl2"/>
    </mx:dataProvider>
</mx:Tree> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:37:15.023

在您的 Xml 中，标签字段拼写为**labe**，但在您的代码中，您正在绑定**label**。是错字吗？

# r - R使用行和列的公式创建矩阵

> ID：12596186
> 
> 赞同：7
> 
> 时间：2012-09-26T06:57:41.047
> 
> 标签：r, matrix, apply

我将如何创建一个矩阵（正常意义，而不是 R 意义），其中 (i,j) 条目是 i 和 j 的函数？我认为它涉及`apply()`但我似乎无法弄清楚如何使用它。

假设我有列 x1、x2、... 和行 y1、y2，其中 x1 和 y1 是 R 对象，并且我想构建一个表/矩阵，其中条目是每个 i 和 j 的 xi 和 yj 的函数。

抱歉，如果这已在其他地方得到回答。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T07:12:58.577

我不确定我是否理解整个问题。我只回答第一句话中的问题：

```
fun <- function(i,j) i*j

rows <- 1:5
cols <- 1:3

outer(rows,cols,FUN=fun)

     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    4    6
[3,]    3    6    9
[4,]    4    8   12
[5,]    5   10   15 
```

# java - 在 Hibernate 中声明 POJO 的最佳实践

> ID：12596189
> 
> 赞同：1
> 
> 时间：2012-09-26T06:58:04.200
> 
> 标签：java, hibernate, orm, collections

在浏览 Hibernate Mapping 示例时，我发现，

当一个类包含 Collection 时，它在某处被声明为，

```
class Role{
  String roleName;
  Set<Permission> permissionName;
}

class Permission{
  String permissionName;
} 
```

或者

```
class Role{
  String roleName;
}

class Permission{
  String permissionName;
}

class RolePermission{
  String roleName;
  String permissionName;
} 
```

hbm.xml 文件在两种风格上都不同。

## 两者通用的数据库表

```
Role
-----
role_id(PK) role_name

Permission  
-----------
permission_id(PK) permission_name

Role_Permission
-----------------
role_permission_id   role_id(FK)    permission_id(FK) 
```

应该使用哪种最佳方式，以及在生成的查询中考虑休眠模式会有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:08:56.397

Go with the first in this case. Having a Role with a set of Permissions is the more natural way here. Because that's what your business problem is: You want roles with several permissions for each role. If it weren't for a relational database behind the application, you wouldn't even consider going with the second solution, it's a decomposition of the first class structure.

Generally this IS why you use ORMs (Hibernate here) so that you can have a more convenient class structure without having to worry how to decompose it to a relational database. So definitely go with the first one.

(What you'll lose: can't write querys easily for rolePermissions(but it's not a problem as it's just a "helper" class it doesn't model any real world thing))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:09:00.313

I would use 1st way, because you will find difficulty with `permissionName` in both classes `Permission` and `RolePermission` as it is redundant in 2nd way :

```
class Role{
  private Integer id;
  private String roleName;
  private Set<Permission> permissionName;
  // getter setters and necessary methods
}

// use one to many relationship from Role to Permission 
class Permission{
  private Integer id;
  private String permissionName;
  // getter setters and necessary methods
} 
```

# java - 如何在应用程序中设置刷新间隔

> ID：12596190
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:03.950
> 
> 标签：java, android

嗨，我是 android 新手。我创建了一个应用程序，并使用首选项进行设置。我已使用设置为 1、10、60 分钟的列表首选项。现在我想应用一个函数，以便在每个时间间隔内刷新另一个活动。

```
beerPref2
                .setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {

                    public boolean onPreferenceChange(Preference preference,
                            Object newValue) {
                        // TODO Auto-generated method stub

                        final ListPreference listrefresh = (ListPreference) preference;
                        final int idx = listrefresh
                                .findIndexOfValue((String) newValue);

                        if (idx == 0) {

                        } else if (idx == 1) {
                            // System.out.println("2");

                        } else if (idx == 2) {
                            System.out.println("3");
                        } else {
                            System.out.println("4");
                        }

                        return true;
                    } 
```

这是首选项屏幕的代码。现在我有另一个名为 DetailPage 的类。这个类我们必须重新加载。您能否完成此代码。我已经尝试了很多但无法做到。我是 android 新手，想实现这个。请帮助我并完成此代码。我将如何在特定时间间隔内加载另一个类？我的意思是说，如果我们选择 1 分钟，那么活动应该每 1 分钟重新加载一次。如果我们选择 10 分钟，那么应用程序应该每 10 分钟重新加载一次，然后......帮我实现这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:12:29.140

也许这会对你有所帮助：[Handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)

使用`Handler`s 您可以发布`Runnable`s 以在将来的某个时间执行。

也有可能在android的警报服务上注册，但这不是你想要的，我猜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:32:02.463

在活动中，您可以使用来自 android 的 ScheduledFuture 类使用 scheduleAtFixedRate 函数以固定间隔执行可运行对象，请参阅[http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html) 了解更多信息

```
public class DetailPage extends Activity { 
    private final ScheduledExecutorService checkCurrentTime=Executors.newScheduledThreadPool(1);  
    private ScheduledFuture scheduledTimeChecker ;

    private final Runnable timeChecker = new Runnable() {       
        @Override
        public void run() {             
            doInBackground(str); 
        }
    };

    @Override 
    protected void onCreate(Bundle savedInstanceState) { 
        // TODO Auto-generated method stub 
        super.onCreate(savedInstanceState); 
        startTimeSchecker();
    } 

    protected Void doInBackground(String Url) { 
        detailed_news = dh.get_detail_news(id[i],catagoryid); 
        allData.add(detailed_news); 
    } 

    private void startTimeSchecker(){        
        if(scheduledTimeChecker==null ||scheduledTimeChecker.isCancelled()){        
            scheduledTimeChecker =checkCurrentTime.scheduleAtFixedRate(timeChecker, 10, 60,java.util.concurrent.TimeUnit.SECONDS );
        }
    }
} 
```

# c++ - 隐藏 mfc 水平滚动条

> ID：12596192
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:13.857
> 
> 标签：c++, mfc

我想隐藏一个水平滚动条。我已经可以使用以下方法隐藏垂直：

```
ShowScrollBar(false); 
```

如果我在水平滚动条上使用它，那么我会得到无法正确绘制的残留窗口。我的目标是让滚动条永久消失，所以如果有办法摧毁它，那就没问题了。

滚动条被手动添加到一个继承 CWnd 的名为 CFolderFrame 的类中，我要更改的类继承自 CFolderFrame 和 CRichEditView。我无法更改 CFolderFrame，因为我正在使用旧代码并且 CFolderFrame 被其他东西继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:52:53.427

非常简单，只需使用[http://www.codeproject.com/Articles/4410/Hide-scrollbars-from-a-CListCtrl](http://www.codeproject.com/Articles/4410/Hide-scrollbars-from-a-CListCtrl) 它会调用 m_list1.HideScrollBars(LCSB_CLIENTDATA, SB_VERT); 你在飞:)

# c# - Wp7中自定义网格视图中的边框问题

> ID：12596193
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:24.233
> 
> 标签：c#, windows-phone-7

我目前正在创建 customGrid 表，我目前面临的问题是每个单元格的边框，我得到了这个从背景反射的点状结构，我现在可以如何解决它。

![在此处输入图像描述](../Images/a6abcc0c4e8849da61afa3dbebf50f84.png)

我使用的代码是

```
 GridLength len2 = new GridLength(value);
                    Column.Width = len2;
                    tableGrid.ColumnDefinitions.Add(Column);
                    TextBlock textBlock = new TextBlock();

                    if (i == 0)
                    {
                        textBlock.Text = headers[j];
                        textBlock.FontSize = 35;
                        border = new Border();
                        border.Background = new SolidColorBrush(Colors.LightGray);
                        border.BorderBrush = new SolidColorBrush(Colors.White);

                        textBlock.HorizontalAlignment = HorizontalAlignment.Center;
                        textBlock.VerticalAlignment = VerticalAlignment.Center;
                        textBlock.Foreground = new SolidColorBrush(Colors.Black);
                    }
                    else
                    {
                        Debug.WriteLine("Data Value j is"+dataValues[j]);
                        textBlock.Text = "Content" + i + "/" + j;
                        //textBlock.Text = dataValues[j];
                        textBlock.FontSize = 25;
                        border = new Border();

                        textBlock.HorizontalAlignment = HorizontalAlignment.Center;
                        SolidColorBrush brush = GetColorFromHexa("0FFB0C4DE");/*0FFB0C4DE*/
                        border.Background = brush;

                        border.BorderBrush = new SolidColorBrush(Colors.White);

                    }

                    Grid.SetRow(border, i);
                    Grid.SetColumn(border, j);
                    tableGrid.Children.Add(border);
                    Grid.SetRow(textBlock, i);
                    Grid.SetColumn(textBlock, j);                            
                    tableGrid.Children.Add(textBlock); 
```

任何需要更改的属性以避免每个单元格末尾的点边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:45:41.590

您应该将[Grid.ShowGridLines](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.showgridlines%28v=vs.95%29.aspx)设置为 false：

tableGrid.ShowGridLines = false;

# c# - 在现有窗口中打开新表单

> ID：12596197
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:39.047
> 
> 标签：c#, windows, forms

我想在现有窗口中打开一个新表单。我有 2 个表格，菜单和客户。

```
private void CustomersView_Click(object sender, EventArgs e)
{
        Customers form_customers = new Customers();
        form_customers.ShowDialog(this);
} 
```

如果我使用此代码打开新表单，是否可以在现有窗口中打开新表单？

问候，Henk-Jan Leusink

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:03:46.337

默认情况下，没有。每个`Form`子类实例都代表一个实际的 Win32 顶级窗口。

如果要将另一组控件加载到现有窗口中，则应使用 UserControls。`customers`在 VS 中创建一个新的 UserControl，然后将控件从表单类复制或移动到新的 UserControl 中。将 UserControl 添加到主窗体的设计器中，但将其可见性设置为隐藏。当您想显示它时，只需更改可见性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:46:49.813

您可能需要一个**`MDI`**表单，将[`IsMdiContainer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.ismdicontainer.aspx)主窗口的属性设置为`true`并尝试像以下代码一样使用它：

```
// This is a method on the MDI parent (IsMdiContainer = true)
private void Button1_Click(object sender, EventArgs e)
{
    var myForm = new MyForm();
    myForm.MdiParent = this;
    myForm.Show();
} 
```

# c# - 使用别名的 XML 反序列化

> ID：12596198
> 
> 赞同：1
> 
> 时间：2012-09-26T06:58:42.907
> 
> 标签：c#, deserialization

我有一个像这样返回 xml 的方法

```
<firstname>Jullian</firstname> 
```

这被反序列化为一个类

```
[XmlRoot(ElementName = "firstname")]
public class Firstname
{

    [XmlText]
    public string Name { get; set; }
} 
```

这是方法签名

```
public Firstname GetFirstName(); 
```

还有另一种方法返回此 xml

```
<first_name>Jullian</first_name> 
```

现在我的问题是我可以使用同一个类 Firstname 来反序列化第二个 xml 吗？是否可以提供别名来执行此操作？

问候。

# android - Android：如何在 ListView 的列表项中为 Button 设置 onClick 事件

> ID：12596199
> 
> 赞同：81
> 
> 时间：2012-09-26T06:58:42.780
> 
> 标签：android, listview

我想为`onClick`项目中使用的按钮添加事件`Listview`。如何`onClick`为列表项中的按钮提供事件。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-26T07:10:59.420

## 在适配器类中

```
public View getView(final int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = getLayoutInflater();
    View row = inflater.inflate(R.layout.vehicals_details_row, parent, false);
    Button deleteImageView = (Button) row.findViewById(R.id.DeleteImageView);
    deleteImageView.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //...
        }
    });
} 
```

但是您可能会遇到问题 - *listView 行不可点击*。解决方案：

*   使 ListView 可聚焦`android:focusable="true"`
*   按钮无法聚焦 `android:focusable="false"`

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-09-26T07:00:15.160

您可以`onClick`在自定义适配器的`getView`方法中设置事件..
检查链接[http://androidforbeginners.blogspot.it/2010/03/clicking-buttons-in-listview-row.html](http://androidforbeginners.blogspot.it/2010/03/clicking-buttons-in-listview-row.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-26T07:51:04.647

试试这个，

```
public View getView(final int position, View convertView,ViewGroup parent) 
{
   if(convertView == null)
   {
        LayoutInflater inflater = getLayoutInflater();
        convertView  = (LinearLayout)inflater.inflate(R.layout.YOUR_LAYOUT, null);
   }

   Button Button1= (Button)  convertView  .findViewById(R.id.BUTTON1_ID);

   Button1.setOnClickListener(new OnClickListener() 
   { 
       @Override
       public void onClick(View v) 
       {
           // Your code that you want to execute on this button click
       }

   });

   return convertView ;
} 
```

它可能会帮助你......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T07:04:26.973

在 getView 方法内的自定义适配器中：

```
button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // Do things Here 
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-22T06:46:06.773

这已在许多帖子中讨论过，但我仍然无法找到解决方案：

```
android:focusable="false"
android:focusableInTouchMode="false"
android:focusableInTouchMode="false" 
```

以下解决方案适用于任何 ui 组件：Button、ImageButtons、ImageView、Textview。LinearLayout、RelativeLayout 在 listview 单元格内点击，也会响应 onItemClick：

适配器类 - getview()：

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;
            if (view == null) {
                view = lInflater.inflate(R.layout.my_ref_row, parent, false);
            }
            final Organization currentOrg = organizationlist.get(position).getOrganization();

            TextView name = (TextView) view.findViewById(R.id.name);
            Button btn = (Button) view.findViewById(R.id.btn_check);
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    context.doSelection(currentOrg);

                }
            });

       if(currentOrg.isSelected()){
            btn.setBackgroundResource(R.drawable.sub_search_tick);
        }else{
            btn.setBackgroundResource(R.drawable.sub_search_tick_box);
        }

    } 
```

在这种情况下，您可以将按钮单击的对象传递给活动。（特别是当您希望按钮充当具有选中和未选中状态的复选框时）：

```
 public void doSelection(Organization currentOrg) {
        Log.e("Btn clicked ", currentOrg.getOrgName());
        if (currentOrg.isSelected() == false) {
            currentOrg.setSelected(true);
        } else {
            currentOrg.setSelected(false);
        }
        adapter.notifyDataSetChanged();

    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T07:01:31.387

我假设您已经为您的 ListView 定义了自定义适配器。

如果是这种情况，那么您可以`onClickListener`在自定义适配器的`getView()`方法中为您的按钮分配。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-13T05:56:10.833

ArrayList 和 ArrayAdapter 的类

```
class RequestClass {
    private String Id;
    private String BookingTime;
    private String UserName;
    private String Rating;

    public RequestClass(String Id,String bookingTime,String userName,String rating){
        this.Id=Id;
        this.BookingTime=bookingTime;
        this.UserName=userName;
        this.Rating=rating;
    }

    public String getId(){return Id; }
    public String getBookingTime(){return BookingTime; }
    public String getUserName(){return UserName; }
    public String getRating(){return Rating; }

} 
```

主要活动：

```
 ArrayList<RequestClass> _requestList;
    _requestList=new ArrayList<>();
                    try {
                        JSONObject jsonobject = new JSONObject(result);
                        JSONArray JO = jsonobject.getJSONArray("Record");
                        JSONObject object;
                        for (int i = 0; i < JO.length(); i++) {
                            object = (JSONObject) JO.get(i);

                            _requestList.add(new RequestClass( object.optString("playerID"),object.optString("booking_time"),
                                    object.optString("username"),object.optString("rate") ));
                        }//end of for loop

                        RequestCustomAdapter adapter = new RequestCustomAdapter(context, R.layout.requestlayout, _requestList);
                        listView.setAdapter(adapter); 
```

自定义适配器类

```
import android.content.Context;
import android.support.annotation.NonNull;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;

/**
 * Created by wajid on 1/12/2018.
 */

class RequestCustomAdapter extends ArrayAdapter<RequestClass> {
    Context mContext;
    int mResource;
    public RequestCustomAdapter(Context context, int resource,ArrayList<RequestClass> objects) {
        super(context, resource, objects);
        mContext=context;
        mResource=resource;
    }
    public static class ViewHolder{
        RelativeLayout _layout;
        TextView _bookingTime;
        TextView _ratingTextView;
        TextView _userNameTextView;
        Button acceptButton;
        Button _rejectButton;
    }

    @NonNull
    @Override
    public View getView(final int position, View convertView, ViewGroup parent){
       final ViewHolder holder;
        if(convertView == null) {
            LayoutInflater inflater=LayoutInflater.from(mContext);
            convertView=inflater.inflate(mResource,parent,false);
            holder=new ViewHolder();
            holder._layout = convertView.findViewById(R.id.requestLayout);
            holder._bookingTime = convertView.findViewById(R.id.bookingTime);
            holder._userNameTextView = convertView.findViewById(R.id.userName);
            holder._ratingTextView = convertView.findViewById(R.id.rating);
            holder.acceptButton = convertView.findViewById(R.id.AcceptRequestButton);
            holder._rejectButton = convertView.findViewById(R.id.RejectRequestButton);

            holder._rejectButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    Toast.makeText(mContext, holder._rejectButton.getText().toString(), Toast.LENGTH_SHORT).show();
                }
            });

            holder.acceptButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    Toast.makeText(mContext, holder.acceptButton.getText().toString(), Toast.LENGTH_SHORT).show();
                }
            });

            convertView.setTag(holder);

        }
        else{
            holder=(ViewHolder)convertView.getTag();

        }
        holder._bookingTime.setText(getItem(position).getBookingTime());
        if(!getItem(position).getUserName().equals("")){

            holder._userNameTextView.setText(getItem(position).getUserName());
        }
        if(!getItem(position).getRating().equals("")){
            holder._ratingTextView.setText(getItem(position).getRating());
        }
        return  convertView;
    }

} 
```

主 xml 中的 ListView：

```
<ListView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:focusable="true"
        android:id="@+id/AllRequestListView">

    </ListView> 
```

列表视图 requestlayout.xml 的资源布局：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/requestLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/bookingTime"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/bookingTime"
        android:text="Temp Name"
        android:id="@+id/userName"/>
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/userName"
        android:text="No Rating"
        android:id="@+id/rating"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/AcceptRequestButton"
        android:focusable="false"
        android:layout_below="@+id/rating"
        android:text="Accept"/>
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/RejectRequestButton"
        android:layout_below="@+id/AcceptRequestButton"
        android:focusable="false"
        android:text="Reject"
        />

</RelativeLayout> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-28T07:56:54.767

在 getview 方法中，将侦听器放在检查视图之外..尝试遵循这个..它在我的情况下有效..[如何增加或减少 listview 每一行中edittext的值？](https://stackoverflow.com/questions/32264186/how-to-increase-or-decrease-value-of-edittext-in-listviews-each-row)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-29T12:13:24.200

我发现

```
final Button yourButton = (Button)view.findViewById(R.id.your_button);
yourButton.setFocusable(false);
yourButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
        ...///); 
```

可以解决问题。如果您想在单击按钮时获取一些数据，使用标签很有帮助。这里按钮被声明为final，因为它将在内部类中使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-06T22:10:26.940

**对于科特林用户**

如果您尝试通过按钮 onClickListener 启动活动，请在 getView(...) 方法中：

```
 myButton.setOnClickListener{
        val intent = Intent(this@CurrentActivity, SecondActivity::class.java)
        startActivity(intent)
   } 
```

为“this”传递正确的指针

# javascript - 当对带有 setTimeout 的变量调用 clearTimeout 时会发生什么？

> ID：12596202
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:51.033
> 
> 标签：javascript

所以，我主要想知道的是，是否`clearTimeout(t);`与`t = undefined`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:05:00.900

自己测试很容易。这是一个小提琴，您可以在其中看到 Axel 是正确的：http: [//jsfiddle.net/s3sUU/](http://jsfiddle.net/s3sUU/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:02:25.833

不，setTimeout 返回的值只是一个数字，一个原始类型，在 clearTimeout 中使用时，它就像“索引”或“标识符”一样使用。但它不是指向函数的指针。

# blackberry - 在黑莓上使用 3g 时出现连接问题

> ID：12596205
> 
> 赞同：0
> 
> 时间：2012-09-26T06:58:57.993
> 
> 标签：blackberry, connection

我正在创建一个从 web 服务下载数据的黑莓应用程序，我正在使用以下代码来获取连接

```
public static String getConnectionString()
{
    String connectionString = null;

    if(DeviceInfo.isSimulator())
    {
        connectionString = ";deviceside=true";
    }
    else if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
    {
        connectionString = ";interface=wifi";
    }
    else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT)
    {
        //logMessage("Carrier coverage.");

        String carrierUid = getCarrierBIBSUid();
        if(carrierUid == null)
        {
            // Has carrier coverage, but not BIBS.  So use the carrier's TCP network
            //  logMessage("No Uid");
            connectionString = ";deviceside=true";
        }
        else
        {
            // otherwise, use the Uid to construct a valid carrier BIBS request
            //logMessage("uid is: " + carrierUid);
            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }
    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS)
    {
        //  logMessage("MDS coverage found");
        connectionString = ";deviceside=false";
    }        
    // If there is no connection available abort to avoid bugging the user unnecssarily.
    else if(CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE)
    {
        //logMessage("There is no available connection.");
    }        
    // In theory, all bases are covered so this shouldn't be reachable.
    else
    {
        //logMessage("no other options found, assuming device.");
        connectionString = ";deviceside=true";
    }

    return connectionString;
} 
```

但是它可以在 Wifi 上运行，但是当我使用 3G 时它无法正常工作，请问我还应该使用什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:35:16.440

我没有看到运营商 UID 获取代码。但实际上 BIS-B 连接不需要它。“ **deviceside=false;ConnectionType=mds-public”**应该足够了。

与 BIS-B 相关的代码也在 Direct TCP 部分中。你应该使用`CoverageInfo.COVERAGE_BIS_B`而不是`CoverageInfo.COVERAGE_DIRECT`

# ember.js - emberjs 部分的 rails 类似物

> ID：12596209
> 
> 赞同：1
> 
> 时间：2012-09-26T06:59:16.040
> 
> 标签：ember.js

我正在将我的 Rails 视图移植到 emberjs。似乎有模板分离的视图和出口助手。由于出口是为了改变状态，我打算使用视图助手来部分模拟rails。我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T04:06:38.270

声明视图只是为了将它们用作局部视图可能是矫枉过正的。最适合您的是`{{template}}`车把中的助手。如果您的 Ember.TEMPLATES 哈希中有一个预编译的模板，您可以`{{template "sometemplate"}}`注入该模板，类似于 rails 部分。

在 vanilla Handlebars 中还有一种特别适用于局部的语法，但我认为 Emberland 并没有很好地支持它，而且我从未见过有人使用它，并且模板做同样的事情 afaik。

## 2013 年 1 月 19 日更新

现在有一个[{{partial}} 助手](https://github.com/emberjs/ember.js/commit/015138ea569725811b43e0fd851dfd0c08446890#packages/ember-handlebars/lib/helpers/template.js)可用于插入插入模板部分，其文件名（以及`Ember.TEMPLATES`名称）必须以下划线开头。感谢@brg 的提醒。

# c# - 将文件上传到 FTP 服务器

> ID：12596226
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:01.377
> 
> 标签：c#, c#-4.0, ftp, c#-3.0, ftpwebrequest

我的应用程序的目的是，它必须将文件上传到 FTP 服务器，然后将本地文件移动到存档文件夹。这是我的代码：

```
public void UploadLocalFiles(string folderName)
        {
            try
            {

                string localPath = @"\\Mobileconnect\filedrop_to_ssis\" + folderName;
                string[] files = Directory.GetFiles(localPath);

                foreach (string filepath in files)
                {
                    string fileName = Path.GetFileName(filepath);
                    localFileNames = files;
                    reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp:...../inbox/" + fileName));
                    reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
                    reqFTP.UsePassive = true;
                    reqFTP.UseBinary = true;
                    reqFTP.ServicePoint.ConnectionLimit = files.Length;
                    reqFTP.Credentials = new NetworkCredential("username", "password");
                    reqFTP.EnableSsl = true;
                    ServicePointManager.ServerCertificateValidationCallback = Certificate;

                    FileInfo fileInfo = new FileInfo(localPath + @"\" + fileName);
                    byte[] fileContents = new byte[fileInfo.Length];

                    FileStream fileStream = fileInfo.OpenRead();

                    fileStream.Read(fileContents, 0, Convert.ToInt32(fileInfo.Length));

                    Stream writer = reqFTP.GetRequestStream();

                    writer.Write(fileContents, 0, fileContents.Length);
                }

                reqFTP.Abort();
            }
            catch (Exception e)
            {
                Console.WriteLine("Error in GetLocalFileList method!!!!!" + e.Message);
            }

        } 
```

运行此方法后，我无法移动文件，我收到此异常消息：“无法访问文件，该文件正在被另一个进程使用”。是我的 Filestream 或 Stream 锁定了我的文件。当我包围 Filestream 和 Stream 时，`using`它不会像没有将文件上传到 FTP 那样`using`。我不明白为什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:02:54.403

问题出在文件流中，您正在使用它来读取文件。

你需要关闭它。

`fileStream.Close()`只需在foreach 循环**结束之前**添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:03:04.637

完成后尝试使用[FileStream.Dispose](http://msdn.microsoft.com/en-us/library/system.io.filestream.dispose.aspx)。这应该与“使用”具有相同的效果。

# c# - 获取从编码创建的字节量的最有效方法是什么？

> ID：12596229
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:05.813
> 
> 标签：c#, .net, encoding

我需要一个通过 TCP 发送的字节缓冲区。我需要一种有效地确定通过对字符串等内容进行编码而创建的字节数的方法。

如果我只是使用此代码，则无需这样做。

```
byte[] buffer = encoder.GetBytes("Hello Client!");
clientStream.Write(buffer, 0 , buffer.Length); 
```

但问题是，我将一个接一个地发送多条消息，并且每次我想发送消息时，这段代码都会为字节缓冲区分配内存。我的理解是他的效率低/慢，因为它每次都分配内存。

我想要做的只是创建一个大字节缓冲区，并将我所有的消息写入其中，并仅发送包含消息的数组的一部分。但我找不到有效地做到这一点的方法。ASCII.Encoding.Getbytes(string) 只会返回字节数组并将其放入我的大字节缓冲区，从位置 0 开始。我需要将消息字节的长度放入字节缓冲区，而无需调用 getbytes (string).Length，因为这又对其进行了编码，效率低下。

可能有一些我找不到的明显解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:28:51.343

我同意 Joachim 的观点，因为您似乎试图在没有任何证据（例如分析数据）表明您首先需要这样做的情况下过早地优化您的程序。伟大的 Donald Knuth 说过“过早的优化是万恶之源”——牢记在心。

除此之外，第二个问题是分配不是一项昂贵的操作。一般来说，分配在 O(1) 时间内完成。实际的编码操作要贵很多倍。

第三，是的，您的问题有解决方案；但我不明白这一点，因为给定编码的字符串所需的字节数是不可预测的，这就是为什么（默认情况下）`Encoding`子类可以自由分配和返回它们自己的缓冲区，因为这意味着你永远不需要如果您的初始调用提供的缓冲区大小不足，请再次使用更大的缓冲区调用该方法。

另一个问题是，.NET 字符串与 C 中以空字符结尾的字符串不同，它具有固定长度并且缺少终止符（.NET 字符串中可以包含空字符，而 C 字符串则不能）。因此，您可能需要在每次使用缓冲区时清除它，这会进一步减慢您的程序：

您需要使用两种方法：`Encoding.GetBytesCount(String)`或`Encoding.GetBytes(String, Int32, Int32, Byte[], Int32 )`，如下所示：

```
Encoding encoder = ...
Byte[] buffer = new Byte[1024]; // allocating a 1KB-sized buffer which it is hoped is large enough for every possible string

foreach(String str in stringsToEncode) {
    buffer.Initialize(); // reset every byte to zero (your program may need this, or it may not; I don't know enough about it).

    Int32 bytesWritten;
    do {
        try {
            bytesWritten = encoder.GetBytes( str, 0, str.Length, buffer, 0 );
        } catch(ArgumentException) {
            bytesWritten = Int32.MaxValue;
            buffer = new Byte[ buffer.Length * 2 ];
        }
    }
    while( bytesWritten == Int32.MaxValue )
} 
```

Of course this code is going to have problems of its own. But you should get the idea.

# java - 需要帮助以更好地理解 RMI

> ID：12596230
> 
> 赞同：3
> 
> 时间：2012-09-26T07:00:07.007
> 
> 标签：java, rmi

我正在学习 RMI，我做过类似的事情：

`Interface`

```
import java.rmi.*;

public interface IRemote extends Remote {
    public void say() throws RemoteException;
} 
```

`Server`

```
 import java.rmi.*;
 import java.rmi.server.*;

 public class Server extends UnicastRemoteObject implements IRemote{

     public Server() throws RemoteException{}

        public void say() throws RemoteException{
            System.out.println("I am saying Hello World...");
        } 

        public static void main (String[] argv) {
           try {
                          Naming.rebind ("myserver", new Server());
                          System.out.println ("Server is ready.");
            } catch (Exception e) {
                System.out.println ("Hello Server failed: " + e);
                  }
         }
     } 
```

`Client`

```
 import java.rmi.*;

   class Client{
      public static void main(String args[]){
            try{
                  IRemote obj = (IRemote) Naming.lookup ("rmi://MYPCNAME/myserver");
                        obj.say();
                }catch(Exception e){
                System.out.println("Exception : "+e);
            }
       }
 } 
```

为了运行，我首先启动 RMI 注册表。

`start rmiregistry`然后`java Server`然后`java Client`

当我将这三样东西都放在同一个包中时，这东西工作正常。但这不是 RMI 的全部意义所在。我应该能够将客户端放在其他机器或其他位置，然后从那里调用服务器方法。

但是当我更改 Client.java 的包并尝试编译它时，我得到了错误：

`Client.java:6: error: cannot find symbol` `IRemote obj = (IRemote) Naming.lookup ("rmi://MYPCNAME/myserver");` `symbol: class IRemote` `location: class Client`

它说它找不到服务器包中的 IRemote。我想知道，我怎样才能让这个东西正常工作？客户端和服务器都在不同的包或机器上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:19:46.163

我怀疑问题是缺少`import`声明。

当`Client`与 同一个包中时`IRemote`，您可以引用它而无需导入它。一旦你移动了界面，你的`Client`班级就不再知道如何找到它。

# jquery - jQuery 选择器可以与 DOM 变异观察者一起使用吗？

> ID：12596231
> 
> 赞同：49
> 
> 时间：2012-09-26T07:00:07.430
> 
> 标签：jquery, html, jquery-selectors, greasemonkey, mutation-observers

HTML5 包含一个[“突变观察者”](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)的概念来监控浏览器 DOM 的变化。

您的观察者回调将传递看起来很像 DOM 树片段的数据。我不知道它们是否正是这样，或者它们是如何工作的。

但是，当您编写代码以与您无法控制的第 3 方站点交互时，例如使用 Greasemonkey 脚本或 Google Chrome 用户脚本，您必须检查传入的元素树以查找与您相关的信息。

这对于选择器来说要简单得多，就像使用任何 DOM 一样，比手动遍历树要简单得多，尤其是对于跨浏览器代码。

**有没有办法将 jQuery 选择器与传递给 HTML5 突变观察者回调的数据一起使用？**

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-26T08:02:39.080

是的，您可以在返回到突变观察者回调的数据上使用 jQuery 选择器。

[**看到这个 jsFiddle。**](http://jsfiddle.net/XfxJu/2/)

假设你有这样的 HTML：

```
<span class="myclass">
    <span class="myclass2">My <span class="boldly">vastly</span> improved</span>
    text.
</span> 
```

你设置了一个观察者，像这样：

```
var targetNodes         = $(".myclass");
var MutationObserver    = window.MutationObserver || window.WebKitMutationObserver;
var myObserver          = new MutationObserver (mutationHandler);
var obsConfig           = { childList: true, characterData: true, attributes: true, subtree: true };

//--- Add a target node to the observer. Can only add one node at a time.
targetNodes.each ( function () {
    myObserver.observe (this, obsConfig);
} );

function mutationHandler (mutationRecords) {
    console.info ("mutationHandler:");

    mutationRecords.forEach ( function (mutation) {
        console.log (mutation.type);

        if (typeof mutation.removedNodes == "object") {
            var jq = $(mutation.removedNodes);
            console.log (jq);
            console.log (jq.is("span.myclass2"));
            console.log (jq.find("span") );
        }
    } );
} 
```

你会注意到我们可以在`mutation.removedNodes`.

* * *

**如果您随后`$(".myclass").html ("[censored!]");`从控制台**运行，您将从 Chrome 和 Firefox 获得此信息：

```
mutationHandler:
childList
jQuery(<TextNode textContent="\n ">, span.myclass2, <TextNode textContent="\n text.\n ">)
true
jQuery(span.boldly) 
```

这表明您可以在返回的节点集上使用普通的 jQuery 选择方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T07:11:56.207

我没有任何个人代码片段，但我有三个资源可能会有所帮助：

*   [Mutabor Github 存储库](https://github.com/eskat0n/mutabor)
*   [文章 + 用于 Mutators 的 JQuery 实用程序](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)
*   [“jquery-mutation-summary” - 突变摘要的扩展](https://github.com/joelpurra/jquery-mutation-summary)（可能是这三个中最好的）

来自链接 #3 'jquery-mutation-summary' 库的示例：

```
// Use document to listen to all events on the page (you might want to be more specific)
var $observerSummaryRoot = $(document);

// Simplest callback, just logging to the console
function callback(summaries){
    console.log(summaries);
}

// Connect mutation-summary
$observerSummaryRoot.mutationSummary("connect", callback, [{ all: true }]);

// Do something to trigger mutationSummary
$("<a />", { href: "http://joelpurra.github.com/jquery-mutation-summary"}).text("Go to the jquery-mutation-summary website").appendTo("body");

// Disconnect when done listening
$observerSummaryRoot.mutationSummary("disconnect"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T07:07:05.540

I was working on a very similar problem for a Stack Exchange script I'm working on, and I needed to be able to monitor the DOM for changes. The jQuery docs didn't have anything helpful, but I did discover that the DOMNodeInserted event works in Chrome:

```
document.addEventListener("DOMNodeInserted", function(event){
    var element = event.target;

    if (element.tagName == 'DIV') {
        if (element.id == 'seContainerInbox') {
            //alert($('#seContainerInbox').parent().get(0).tagName);
            trimStoredItems();
            $('#seTabInbox').click();
            //   var newCount = getNewCount();
            // if there are new inbox items, store them for later
            storeNewInboxItems();
            applyNewStyleToItems();
        }
    }
}); 
```

I'm not 100% sure if this works in Firefox as I haven't got that far yet in the development process. Hope this helps!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-03T03:37:15.970

我知道这是一个老问题，但也许这可以帮助其他人寻找替代解决方案。我最近了解了 Mutation Observers 并想尝试将它们与 jQuery 一起使用。我想出了两种可能的方法并将它们变成插件。代码可[在此处](https://github.com/bjedrocha/jquery.observe)获得。

第一种方法 ( `jquery.observeWithEvents.js`) 使用 jQuery 的`trigger()`函数来触发可以通过 jQuery 的函数绑定到的事件`insertNode`或事件。第二种方法 ( ) 使用传统的回调参数。请查看自述文件以获取示例和用法。`removeNode``on()``jquery.observeWithCallbacks.js`

# java - 如何在 jUnit 测试用例中闯入调试器？

> ID：12596235
> 
> 赞同：2
> 
> 时间：2012-09-26T07:00:19.997
> 
> 标签：java, debugging, junit, jdb

我正在调试一个大型 java 项目中的单元测试。我需要运行 'ant test ...' 来启动测试套件。所以我很难从 IDE 启动它。如果它附加到任何调试器，是否可以在 C# 中调用诸如 Debugger.Break() 之类的函数来闯入调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:13:09.980

如果我正确理解您的问题，您可以通过设置以下 2 个 jvm 参数来使用 java 的远程调试：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=1044 
```

为了调试你的 ant 任务，你可以在你的 ant 任务中添加这些参数`<java>`。有关详细信息，您可以关注ant链接[中的 java 调试选项。](http://javahowto.blogspot.in/2010/07/java-debug-options-in-ant-buildxml.html)

# c - 来自 Matlab 的单步 VC++ 2010 调试器

> ID：12596237
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:27.947
> 
> 标签：c, matlab, visual-c++

我有一个移植到 Matlab 的 C 函数

然而，C 版本比我的 Matlab 版本产生更好的输出，所以我希望 Matlab 版本产生所需的数据代码，然后加载到 C 中的变量中，让 C 对数据点进行处理，反之亦然，这样我可以比较两个程序在同一组数据上的不同工作方式和方式问题是一个数据集至少有 256 个浮点数，并且有数百个这样的数据集

如果我可以在 Matlab 中计算数据集，将它们存储在一个文件中并向 C 调试器发送一个确认信号，这样会更方便，这样当它从 Matlab 获得信号时，它会继续单步执行它的代码，加载数据从磁盘上的文件中提供了我的 matlab

甚至有可能做到这一点吗？如果可能的话，我也希望能够反向执行此操作，即 C 程序生成数据点并将其存储在文件中，然后向 Matlab 发出信号以继续单步执行其代码

编辑：

我觉得虽然 VC++ 2010 调试器非常易于使用，但它们很难与任何其他程序一起使用。因此，如果可以在 gcc 的调试器中执行此操作（使用 Codeblocks 或其他任何东西），我想要一些有关如何执行此操作的建议（不必是 VC++ 的调试器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:42:55.907

如果将 C 代码打包为[MEX](http://www.mathworks.co.uk/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html)文件，则可以将数据直接从 MATLAB 发送到 C 代码中。然后，您可以将 VS 调试器附加到 MATLAB 进程，并像往常一样在 MEX 文件中设置断点。这将允许您单步执行 MATLAB 代码，然后执行 C 代码。（请注意，当您单步执行 C 代码时，MATLAB 将无响应）。

实际上，我总是忘记但在这里也可能有用的一件事是 MATLAB 的[LOADLIBRARY](http://www.mathworks.co.uk/help/matlab/ref/loadlibrary.html)接口。这消除了将 C 代码封装在 MEX 胶合板中的需要。我从未尝试过，但我假设您可以在这里做同样的技巧 - 将 VS 调试器附加到正在运行的 MATLAB 进程并设置断点等。

# apache - 如何在 LimitRequestBody 上重定向 Apache？

> ID：12596239
> 
> 赞同：1
> 
> 时间：2012-09-26T07:00:36.800
> 
> 标签：apache, mod-rewrite

我的 .htaccess 文件中有这一行，它工作得很好（将 POST 限制为 1mb）：

```
LimitRequestBody 2048000 
```

但我的问题是 - 如果 POST 超过 2mb，Apache 会抛出一个错误，我希望它显示**自定义错误消息**或**重定向**到某个页面。

我相信这可以通过**重写引擎**以某种方式实现，但不知道如何。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:36:10.507

您不需要 mod_rewrite，您只需要使用`ErrorDocument`413 (Request Entity Too Large) 并将其指向您的自定义错误消息：

就像是：

```
ErrorDocument 413 /custom-message.php 
```

# security - 如何在不硬编码密码的情况下从智能手机连接到 LDAP？

> ID：12596240
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:37.580
> 
> 标签：security, ldap, client-server, hard-coding

我们的 Android 应用程序连接到 LDAP 数据库以进行身份​​验证和用户数据（电子邮件地址、电话号码等）。到目前为止，该应用程序已连接到一个中间件，该中间件打开与 LDAP 的连接并为该应用程序执行操作。该应用程序只发送一个基本请求（例如“验证用户，如果他们没有角色，则授予他们角色”），并且中间件设置为仅处理那些可能的请求。

现在，我们被要求跳过中间件，直接从应用程序连接到 LDAP。问题是，据我所知，没有办法*不对*应用程序中的主 LDAP 用户的密码进行硬编码，而且我知道 .apk 文件很容易反编译。

有没有什么方法可以在不使用中间件的情况下从属于公众的手机上的客户端应用程序安全地直接连接到 LDAP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:35:35.573

基本思想是您匿名搜索用户，没有密码，然后使用您要求他提供的*用户*密码（重新）连接（=LDAP 绑定） ，而不是任何硬编码到应用程序中的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:52:08.503

我假设您也在使用 SSL/TLS 进行通信？如果没有请做。

# asp.net - 操纵谷歌分析数据

> ID：12596241
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:40.377
> 
> 标签：asp.net, api, google-analytics

我能够从谷歌分析 api 中获取数据。如何获得国家/地区页面访问等数据组合。我尝试：

```
 var query1 = asv.Data.Ga.Get("ga:xxxxxxxx", startDate, endDate, "ga:pageviews,ga:country");
  query1.Metrics = "ga:country";//Gives error(can not be assigned to -- it is read only.)
  query1.Dimensions = "ga:country";
  query1.Sort = "ga:country,ga:pageviews";
  query1.StartIndex = 1;
  var report1 = query1.Fetch(); 
```

我想获取记录并在网格中绑定。我的错误在哪里。如果我评论该行
`query1.Fetch();`给出错误意味着无法获取记录。当我使用

`var request = asv.Data.Ga.Get("ga:xxxxxxxx", startDate, endDate, "ga:visits,ga:pageviews,ga:bounces");`

它成功获得记录。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:26:52.270

我得到了一个解决方案，因此我将其发布以供将来参考。

```
 var query1 = asv.Data.Ga.Get("ga:63104444", startDate, endDate, "ga:visits");

  query1.Dimensions = "ga:country";
  query1.Sort = "-ga:visits";

  var report1 = query1.Fetch();

  List<KeyValuePair<string, object>> CountryWiseVisitList = new List<KeyValuePair<string, object>>();
  foreach (IList<string> lstRow in report1.Rows)
  {
    CountryWiseVisitList.Add(new KeyValuePair<string, object>(lstRow[0].ToString(), lstRow[1].ToString()));            
   }
   gdvCountryWiseVisit.DataSource = CountryWiseVisitList; //Bind on grid
   gdvCountryWiseVisit.DataBind(); 
```

# c# - 异常没有被捕获块捕获

> ID：12596242
> 
> 赞同：6
> 
> 时间：2012-09-26T07:00:41.827
> 
> 标签：c#, .net, winforms, exception, try-catch

我有一个 try、catch 和 finally 块的功能。如果捕获到异常，则捕获该异常的某些参数，例如其错误代码、错误详细消息和消息，并将其打印到 Excel 文件中。我在下面发布相关代码：

```
 public void UpdateGroup(String strSiteID, String strGroup,  int row)
        {
            try
            {
                Console.WriteLine("UpdateGroup");
                Excel1.MWMClient.MWMServiceProxy.Group group = new Excel1.MWMClient.MWMServiceProxy.Group();
                group.name = "plumber";
                group.description = "he is a plumber";  
                Console.WriteLine(groupClient.UpdateGroup(strSiteID,group));
                ExcelRecorder(0, null, null, row);
            }
            catch (System.ServiceModel.FaultException<DefaultFaultContract> ex)
            {
                ExcelRecorder(ex.Detail.ErrorCode, ex.Detail.Message, ex.Message, row);
            }
            finally
            {
                System.GC.Collect();
            }
        }

public void ExcelRecorder(int error, string detailmessage, string message, int row)
        {  
            Excel.Application xlApp = new Excel.Application();               
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/WebServiceTestCases_Output.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;           
                if (!string.IsNullOrEmpty(message))
                {
                    ((Range)xlWorksheet.Cells[row, "M"]).Value2 = "FAIL";
                    ((Range)xlWorksheet.Cells[row, "N"]).Value2 = error;
                    ((Range)xlWorksheet.Cells[row, "O"]).Value2 = detailmessage;
                    ((Range)xlWorksheet.Cells[row, "P"]).Value2 = message;
                }
                else
                {
                    ((Range)xlWorksheet.Cells[row, "M"]).Value2 = "PASS";
                    ((Range)xlWorksheet.Cells[row, "N"]).Value2 = "";
                    ((Range)xlWorksheet.Cells[row, "O"]).Value2 = "";
                    ((Range)xlWorksheet.Cells[row, "P"]).Value2 = "";
                }
            xlWorkbook.Save();
            xlWorkbook.Close(0,0,0);
            xlApp.Quit();
        } 
```

问题是，早些时候我有一段代码，比如

```
catch(Exception ex)
{
ExcelRecorder(ex.Message);
} 
```

那时，所有异常都被捕获。但是，后来需求发生了变化，因为我还需要捕获错误详细代码和错误详细消息。因此，我用 catch (System.ServiceModel.FaultException ex) 更改了我的 catch 块，因为它允许我获取这些参数。但是现在，某些异常并没有被 catch 块捕获。如何更改我的 catch 块以便我可以捕获所有异常？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T07:05:07.063

基本上有两种方式：

1：两个`catch`块（最具体的**第一个**）：

```
catch (System.ServiceModel.FaultException<DefaultFaultContract> ex)
{
    ExcelRecorder(ex.Detail.ErrorCode, ex.Detail.Message, ex.Message, row);
}
catch (Exception ex)
{
    // TODO: simpler error handler
} 
```

2：`catch`一块带测试：

```
catch (Exception ex)
{
    var fault = ex as System.ServiceModel.FaultException<DefaultFaultContract>;
    if(fault != null)
    {
        ExcelRecorder(fault.Detail.ErrorCode, fault.Detail.Message,
            fault.Message, row);
    }
    // TODO: common error handling steps
} 
```

任何一个都可以工作。第一个可能更干净，但如果你想在里面做很多常见的事情`catch`，第二个可能有优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T07:04:18.287

添加另一个捕获区域..您可以有多个

```
try
{
  // stuff
}
catch (Exception1 ex}
{
  // 1 type of exception
}
catch (Exception e)
  // catch whats left
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T07:06:00.547

*   `System.Exception`是所有异常类型之母。因此，当您拥有它时，将捕获任何类型的异常。
*   但是，当您知道代码中可能存在特定异常并且有一个带有该异常类型作为参数的 catch 块时，该块将获得更高的优先级`System.Exception`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T07:06:49.993

So from what you mentioned it seems like you have

```
try{}
catch(FaultException ex){ExcelRecorder(ex.Message,[other params]);} 
```

Now you can have one more catch block for all other exceptions like

```
catch(Exception all){// you may log} 
```

so when a different exception arises it would not be handled by the `FaultException` catch but instead move into the generic exception block and you can choose to process it as you need

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T07:04:27.660

您可以执行以下操作之一：

*   `catch`为您感兴趣的每个异常提供单独的块
*   用于`catch Exception ex`捕获所有并仅选择您感兴趣的那些
*   捕获您感兴趣的异常系列的基异常类，如果有这样的基类（但通常没有）

通常，您要么捕获所有异常（选项 2），要么只捕获那些您真正知道如何处理的异常（选项 1）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T07:16:03.397

对于每个预期的异常，有尽可能多的 catch 块。不要忘记抓住最具体的。最后捕获`Exception`该类以捕获任何剩余的异常。

如果您抓住`Exception`顶部，对于任何异常，此块将触发并且所有其他块将无法访问。

```
try
{
     // your code here
}
catch (FirstSpecificException ex)
{

}
catch (SecondSpecificException ex)
{

}
catch (NthSpecificExceptoin ex)
{

}
catch (Exception ex)
{
    // in case you might have missed anything specifc.
} 
```

# c# - 连接到基于 ruby 的服务器

> ID：12596247
> 
> 赞同：0
> 
> 时间：2012-09-26T07:00:56.633
> 
> 标签：c#, ruby, tcpclient

我正在 C# Net framework 2.0 中开发一个应用程序。它基本上是一个带有 tcp 客户端类的应用程序。该应用程序连接到我的服务器，这是一个基本的 ruby​​ tcp 服务器，它会停留 4 小时然后断开连接

```
class TelnetConnection
{
TcpClient tcpSocket;
int TimeOutMs = 400;
static string host = null;
static int prt = 0;
static int timetorec = 10; //sec

public TelnetConnection(string Hostname, int Port)
{
    host = Hostname;
    prt = Port;
    try
    {
        tcpSocket = new TcpClient(Hostname, Port);
    }
    catch (Exception x)
    {
        Console.WriteLine(x.Message)
    }
}

public void reconnect(int sec)
{
    try
    {
        System.Threading.Thread.Sleep(sec * 1000); //10sec then retry
        tcpSocket = new TcpClient(host, prt);
    }
    catch (Exception x)
    {
        Console.WriteLine(x.Message)
    }
}

public string Login(string Username, string Password, int LoginTimeOutMs)
{
    int oldTimeOutMs = TimeOutMs;
    TimeOutMs = LoginTimeOutMs;
    string s = Read();
    if (!s.TrimEnd().EndsWith(":"))
        throw new Exception("Failed to connect : no login prompt");
    WriteLine(Username);

    s += Read();
    if (!s.TrimEnd().EndsWith(":"))
        throw new Exception("Failed to connect : no password prompt");
    WriteLine(Password);

    s += Read();
    TimeOutMs = oldTimeOutMs;
    return s;
}

public string Read()
{
    try
    {
        if (!tcpSocket.Connected) return null;
        StringBuilder sb = new StringBuilder();
        do
        {
            Parse(sb);
            System.Threading.Thread.Sleep(TimeOutMs);
        } while (tcpSocket.Available > 0);
        return sb.ToString();

    }
    catch (Exception) { return null; }
}

protected override void OnStart(string[] args)
{
    System.Runtime.Remoting.Lifetime.LifetimeServices.LeaseTime = TimeSpan.MaxValue;
    while (tc.IsConnected)
    {
        Thread.Sleep(120);
        what(tc.Read());
    }
}

static void what(string w)
{
    if (w == "Example")
    {
        //DO
    }
}
} 
```

请帮助我已经尝试过 tcp 客户端，但同样的应用程序应该始终保持连接 RUBYCODE

```
require 'socket'      # Sockets are in standard library

hostname = 'localhost'
port = 2000

s = TCPSocket.open(host, port)

while line = s.gets   # Read lines from the socket
  puts line.chop      # And print with platform line terminator
end 
```

并重复红宝石，它只是正在使用的套接字的一个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:08:43.787

您需要定期发送一些数据，以防止防火墙和 NAT 设备超时连接条目。

# c# - 如何在数据表中应用表达式？

> ID：12596256
> 
> 赞同：0
> 
> 时间：2012-09-26T07:02:03.170
> 
> 标签：c#, asp.net, visual-studio-2010

```
System.IO.StreamReader rdr = new StreamReader(csvPath.Text);

            DataTable dt = new DataTable("Table");
            dt.Columns.Add(new DataColumn("Date"));              
            dt.Columns.Add(new DataColumn("A.TEMP090835"));
            dt.Columns.Add(new DataColumn("Difference"));

            while ((rowValue = rdr.ReadLine()) != null)
            {
                string[] arr;
                arr = rowValue.Split(',');
                DataRow row = dt.NewRow();
                row["Date"] = arr[0];
                row["A.TEMP090835"] = arr[4];
                row["Difference"] = //here is the problem
                dt.Rows.Add(row);

            }
            dt.Rows.RemoveAt(0);
            dataGridView2.DataSource = dt;
            rdr.Close(); 
```

这段代码创建了一个包含 3 列的数据表......日期、A.TEMP...... 和差异。我从中导入数据的 csv 文件没有第三列，即“差异”。我需要为该列写一个表达式.....其逻辑可以通过以下csv文件理解：

日期，A.TEMP090835，差异

2011 年 10 月 28 日，25.56，0

10/28/2011, 26.65, 26.65 - 25.56

10/28/2011, 27.11, 27.11 - 25.56

10/28/2011, 29.43, 29.43 - 25.56

10/28/2011, 30.29, 30.29 - 25.56

10/28/2011, 31.57, 31.57 - 25.56

10/28/2011, 32.82, 32.82 - 25.56

10/28/2011, 34.07, 34.07 - 25.56

如何填写“差异”列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:14:28.840

使用临时变量，您可以实现

```
 System.IO.StreamReader rdr = new StreamReader(csvPath.Text);

        DataTable dt = new DataTable("Table");
        dt.Columns.Add(new DataColumn("Date"));              
        dt.Columns.Add(new DataColumn("A.TEMP090835"));
        dt.Columns.Add(new DataColumn("Difference"));
    double d=0;
        while ((rowValue = rdr.ReadLine()) != null)
        {
            string[] arr;
            arr = rowValue.Split(',');
            DataRow row = dt.NewRow();
            row["Date"] = arr[0];
            row["A.TEMP090835"] = arr[4];
            row["Difference"] = Convert.ToDouble(arr[4])-d;
            dt.Rows.Add(row);
    d=Convert.ToDouble(arr[4]);

        }
        dt.Rows.RemoveAt(0);
        dataGridView2.DataSource = dt;
        rdr.Close(); 
```

不确定您是否可以通过获取上一行来使用表达式来执行此操作。

从 o'reilly [http://ondotnet.com/pub/a/dotnet/2003/05/26/datacolumn_expressions.html检查这个](http://ondotnet.com/pub/a/dotnet/2003/05/26/datacolumn_expressions.html)

# javascript - 检测 Internet Explorer 中的所有插件

> ID：12596257
> 
> 赞同：1
> 
> 时间：2012-09-26T07:02:05.503
> 
> 标签：javascript

我想在所有浏览器中显示所有插件的信息，但 IE`navigator.plugins`为空。我向谷歌寻求帮助，但它说你只能检测到你想要检测的插件。那么还有其他方法可以做到这一点吗？

# jquery - jquery：点击事件

> ID：12596258
> 
> 赞同：0
> 
> 时间：2012-09-26T07:02:06.173
> 
> 标签：jquery

我需要根据角色动态绑定菜单，因此我将字符串与 ul & li 标签连接起来。我需要在标签中显示选定的文本，因此我添加了一个点击事件但没有触发

**html代码**

```
<div id='jqxWidget' style='height: 30px; display: none;background-color:#e8e8e8'>
    <div id='jqxMenu' style='margin-left: 20px;'></div>
</div> 
```

**jqxmenu中绑定的字符串**

```
 <ul id='mainid'>
     <li><a href=#>Operations</a>
       <ul style='width: 150px;'>
         <li><a href=default.aspx?src=1010>Booking</a></li>
         <li><a href=default.aspx?src=1009>Manifest </a></li>
         <li><a href=default.aspx?src=1002>RunSheet</a></li>
         <li><a href=default.aspx?src=1004>Delivery Updation</a></li>
         <li><a href=default.aspx?src=1007>Recovery</a></li>
         <li><a href=default.aspx?src=100>Local Manifest Branch</a></li>
         <li><a href=default.aspx?src=5501>Extras</a></li>
         <li><a href=default.aspx?src=2300>Bulk Import</a></li>
       </ul>
     </li>
    </ul> 
```

例如，如果选择清单，我需要显示点击事件上方标签中的文本不会触发任何建议

**提前致谢**

我为点击事件尝试了以下代码

```
$('#jqxMenu li').click(function (e) {
            e.preventDefault();     // Check if the li has a parent .. To prevent double firing of li     
            if ($(this).parents('li').length) {
                e.stopPropagation();
            }
            alert($(this).html());
        }); 
```

点击事件没有被触发，但是当我在小提琴中测试它时它工作正常

jquery总代码如下

```
$(document).ready(function () {
        var theme = getTheme();
        $('#jqxMenu li').click(function (e) {
            e.preventDefault();     // Check if the li has a parent .. To prevent double firing of li     
            if ($(this).parents('li').length) {
                e.stopPropagation();
            }
            alert($(this).html());
        });
        $("#jqxMenu").css('visibility', 'visible');
        $("#jqxMenu").jqxMenu({ width: '600', height: '30px', theme: theme });
        $("#open").bind('change', function (event) {
            $("#jqxMenu").jqxMenu({ autoOpen: true });
        });        
        $('#jqxMenu').bind('itemclick', function ()
        { $('#selid').val($(event.args).text()); });        
    }); 
```

任何关于点击事件未在网站中触发的建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:36:08.003

试试 jqxMenu 的 'itemclick' 事件。

# c# - 有没有办法在TextBox的OnKeyDown事件中找到“#”键是否被按下？

> ID：12596272
> 
> 赞同：-2
> 
> 时间：2012-09-26T07:03:03.793
> 
> 标签：c#, windows-phone-7, xaml, windows-phone

我正在 Windows Phone 中开发应用程序。我需要TextBox的KeyDown事件中的要求是，我需要知道“#”或“。” 在文本框中按下键。谁能帮我摆脱这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:48:01.000

```
 private void TextBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.xxxx || e.PlatformKeyCode == xxxx) //xxxx is the keycode for your desired keys
        {
           //do work here
        }
    } 
```

我认为它应该工作

# wcf - WSHttpBinding 和 HTTP 和 Windows 身份验证

> ID：12596274
> 
> 赞同：2
> 
> 时间：2012-09-26T07:03:09.377
> 
> 标签：wcf, http, authentication, wshttpbinding

我尝试使用`WSHttpBinding`Windows 身份验证和 HTTP 协议设置 WCF 服务，而不是 HTTPS。是否可以？我正在使用 IIS 7。当前我的配置文件如下。

使用此配置应用程序会引发异常：

> 找不到与绑定 WSHttpBinding 的端点的方案 http 匹配的基地址。注册的基地址方案是 []。

我的代码是：

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WsBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>
      <service behaviorConfiguration="WsBehavior" name="LoginService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="WsBinding" contract="ILoginService">
          <identity>
            <dns value="http://localhost:50001/Ws/" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" minFreeMemoryPercentageToActivateService="1">
      <baseAddressPrefixFilters>
        <add prefix="http://localhost:50001/Ws/" />
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>

    <bindings>
      <wsHttpBinding>
        <binding name="WsBinding" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="64" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:35:10.683

我得到了下一个错误

> 主机上配置的身份验证方案（“IntegratedWindowsAuthentication”）不允许在绑定“WSHttpBinding”（“匿名”）上配置的身份验证方案。请确保将 SecurityMode 设置为 Transport 或 TransportCredentialOnly。此外，可以通过 IIS 管理工具、通过 ServiceHost.Authentication.AuthenticationSchemes 属性、在元素的应用程序配置文件中更改此应用程序的身份验证方案、通过更新绑定上的 ClientCredentialType 属性或通过调整来解决此问题HttpTransportBindingElement 上的 AuthenticationScheme 属性。

所以回答我的问题。不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:55:19.490

您需要在 host/baseAddresses 配置节点中注册一个基地址。此外，您的 DNS 身份应该是主机名而不是端点地址：

```
<services> 
  <service behaviorConfiguration="WsBehavior" name="LoginService">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:50001/Ws"/>
      </baseAddresses>
    </host> 
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="WsBinding" contract="ILoginService"> 
      <identity> 
        <dns value="localhost" /> 
      </identity> 
    </endpoint> 
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" /> 
  </service> 
</services> 
```

# php - Git状态未显示

> ID：12596275
> 
> 赞同：0
> 
> 时间：2012-09-26T07:03:12.057
> 
> 标签：php, git

以下代码创建 shell.sh、gitstatus.txt 但 gitstatus.txt 为空。如果我执行注释部分，则创建目录。为什么这些值没有进入 gitstatus.txt 文件？任何线索？

```
<?php

$command = "echo '#!/bin/sh'>shell.sh";
exec($command);
$cmnd = "echo 'git status >gitstatus.txt'>>shell.sh";

//$cmnd = "echo 'mkdir rr1'>>shell.sh";

exec($cmnd);

$cmd1 = "sh shell.sh";
exec($cmd1);
?> 
```

# php - 2 包含在 javascript .show() 中的 PHP 冲突中

> ID：12596277
> 
> 赞同：2
> 
> 时间：2012-09-26T07:03:19.200
> 
> 标签：php, javascript, include, conflict

我在 php 的“包含”中遇到了关于 javascript .hide() 和 .show() 的问题。
这有点难以解释，但我会展示代码。

这是我的`toogle_div.js`

```
function toggleWalkin() {
    $('#walk_in').show(500);
    $('#reservation').hide(500);
}

function toggleReservation() {
    $('#reservation').show(500);
    $('#walk_in').hide(500);
} 
```

这是我的 ToggleMenu()

```
function toggleMenu(){
var overlay = document.getElementById('overlay');
var specialBox = document.getElementById('contentbox');
overlay.style.opacity = .8;
if(overlay.style.display == "block"){
    overlay.style.display = "none";
    specialBox.style.display = "none";
} else {
    overlay.style.display = "block";
    specialBox.style.display = "block";
} 
```

}

这是我的 html 代码：//触发显示和隐藏 div 的按钮

```
<a href="#" onclick="toggleMenu();">Walk-in</a>
<a href="#" onclick="toggleMenu();">Reservation</a> 
```

//信息将显示的内容

```
 <div id="button-header">
                        <ul>
                            <li onmousedown="toggleWalkin();">Walk-in</li>
                            <li onmousedown="toggleReservation();">Reservation</li>
                            <li>Seminar Conference Schedule</li>
                            <li>Guest Ledger</li>
                            <li>Guest Database</li>
                            <li>Unavailable Rooms</li>
                            <li>Report Generation</li>
                        </ul>
                    </div>
<div id="content">
<div id="walk_in">
 Walk in
 <?php include "includes/navigation/walkin.php"; ?>
 </div>
<div id="reservation">
 <?php include "includes/navigation/reservation.php"; ?>
  </div>
</div> 
```

所以基本上，每当我点击`Walk-in`该`.show()`功能时。但是，如果我单击 `Reservation`，`.show()`功能将不起作用。当我删除 php 的 include walkin 时，我意识到该`.show()`函数的保留有效。

简而言之，这两个包含基本上与`.show()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:23:57.373

可能在包含 php 文件之后，可能有一些`echo`语句没有以正确的格式回显 html 并导致 html 垃圾。

检查源代码或在浏览器中检查页面（`F12`在 Chrome 中按/在 firefox 中按`Ctrl`+ ）。`U`检查相关的 div 是否符合预期。

此外，检查`js`您遇到的任何其他错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:28:37.083

对于初学者来说，您似乎需要添加 return false; 到onclick的末尾如下：

```
<?php
<a href="#" onclick="toggleMenu(); return false;">Walk-in</a> 
```

如果没有看到这两个包含，我最好的猜测是您在两个包含文件之一中有 HTML 错误；缺少结束标签等

问候，凯文

# objective-c - iOS5和iOS6的CCCrypt区别

> ID：12596280
> 
> 赞同：13
> 
> 时间：2012-09-26T07:03:25.053
> 
> 标签：objective-c, ios, ios5, encryption, ios6

我有一个解密/加密方法，`CCCrypt()`它在 iOS5 上运行得非常好。现在我正在使用 iOS6 SDK 并且从未更改过我的代码，但似乎有些东西坏了。我仍然可以用一个密钥加密一个字符串并解密它，但是如果我使用另一个密钥来解密同一个字符串，那么`CCCryptStatus`返回的结果`CCCrypt()`仍然是`0(kCCSuccess)`- 即使解密失败，因为在那之后我的 NSData 没有被填充。在 iOS5 上，我收到了我可以处理的错误消息 -4303。有什么想法现在有什么问题吗？

我的代码：

```
char keyPtr[kCCKeySizeAES256+1]; 
bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

if (encryptOrDecrypt == kCCDecrypt)
{
    data = [GTMBase64 decodeData:data];
}

NSUInteger dataLength = [data length];

size_t bufferSize = dataLength + kCCBlockSizeAES128;

void *buffer = malloc(bufferSize);

size_t numBytesDecrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(encryptOrDecrypt,
                                      kCCAlgorithmAES128,
                                      kCCOptionPKCS7Padding,
                                      keyPtr,
                                      kCCKeySizeAES256,
                                      NULL ,
                                      [data bytes], dataLength, 
                                      buffer,       bufferSize, 
                                      &numBytesDecrypted);

if (cryptStatus != kCCSuccess){
    // do something, but cryptStatus is always 0!
} 
```

编辑：在 iPad Simulator 5 上对其进行了测试。当我使用另一个密钥进行解密时，我收到的状态是 -4303。仅在 ios6 中返回的状态为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:35:03.467

我不是加密专家，但我遇到了同样的问题并想出了一个解决方法，也许在某些人找到真正的解决方案之前会很好。

我所做的只是确定哪个 iOS 正在运行，对于 6+，我将 CCCrypt 调用更改为无填充（0 表示无填充，1 是 kCCOptionPKCS7Padding 的枚举）

```
float version = [[UIDevice currentDevice].systemVersion floatValue];
if (version >= 6)
{
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, 0,
                                          keyPtr, kCCKeySizeAES128,
                                          ivPtr,
                                          [self bytes], dataLength,
                                          buffer, bufferSize, 
                                          &numBytesDecrypted );

    if( cryptStatus == kCCSuccess )
    {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free( buffer ); 
    return nil;
}
else
{
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, 1,
                                          keyPtr, kCCKeySizeAES128,
                                          ivPtr,
                                          [self bytes], dataLength,
                                          buffer, bufferSize, 
                                          &numBytesDecrypted );
    if( cryptStatus == kCCSuccess )
    {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free( buffer );
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:06:51.890

有一个苹果[开发者论坛帖子](https://devforums.apple.com/thread/157474?tstart=0)讨论了这个问题，它有很多关于这个话题的信息。似乎填充选项对许多人来说是一个问题。注释 #11 是开始讨论解决方案的地方。

# jquery - 麻烦 - 在 jQuery 验证插件中输入有效然后错误数据时成功类不会消失

> ID：12596285
> 
> 赞同：1
> 
> 时间：2012-09-26T07:04:03.590
> 
> 标签：jquery, html, css, jquery-validate

我在输入有效数据时遇到了这样的麻烦，没关系

![](../Images/f7f9ee657dfc80ce03585496229d144b.png)

但在那之后，当我输入错误数据时出现这种情况：

![](../Images/02382a119bd9eb104954e32d51d2fda9.png)

这是我的 js 代码，它与错误/有效类有关：

```
 errorElement: "div",
    wrapper: "div",  // a wrapper around the error message
    errorPlacement: function(error, element) {
    element.before(error);
    offset = element.offset();
    error.css('right', offset.right);
    },
    success: "valid" 
```

和CSS代码：

```
 label.error{
color:#b76b6f;
width: 200px;
height: 60px;
text-align: right;
position: absolute;
margin-left: 280px;
margin-top: -20px;
margin-bottom: 0;
background: url('../images/not_valid.png') no-repeat;
background-position:100% 80%;
 }

 div.error{
 color:#b76b6f;
 width: 200px;
 height: 60px;
 position: absolute;
 margin-left: 180px;
 margin-top: -25px;
  display: block;
  background-color:#F3E6E6;
  background: url('../images/not_valid.png') no-repeat;
 background-position:100% 100%;
 text-align: right;
  } 
```

在这种情况下生成的 HTML：

```
 <div class="field2"><label for="user_password">Password</label>
  <div class="valid"></div>
   <div><div for="passworrd" generated="true" class="error" style="display: block;">Please enter at least 6 characters.</div></div>
  <input type="password" size="30" name="user[password]" id="passworrd" class="passwords error"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:07:08.613

我认为这就是`focusCleanup`选项的用途。

编辑：

尝试使用`validClass: "valid"`而不是`success: "valid"`.

# javascript - jquery mobile window.location.href 页面跳转错误

> ID：12596286
> 
> 赞同：0
> 
> 时间：2012-09-26T07:04:08.113
> 
> 标签：javascript, jquery-mobile, cordova

帮我！我使用`window.location.href`跳转页面，但代码错误：

jQuery

```
function  onclick(){
     window.location.href="#main"
} 
```

```
<div data-role="page" id="login" class="ui-body-e">
<div data-role="content">   
        <input type="button" onClick="onclick()" value="ok"/>       
</div>
<div data-role="page" id="main" class="ui-body-e">
<div data-role="content">   
        <li><a href="#login">Login</a>      
</div>
</div> 
```

> 错误：E:\Dockmate_hbx10\Dockmate\assets\www\ 包含无效路径。有时可以跳，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:15:28.697

如果您只想使用按钮作为链接，您可以考虑以下解决方案：

利用：

```
<a data-role="button" href="#main"></a> 
```

代替：

```
<input type="button" value="ok"/> 
```

因此，您的代码将如下所示：

**jQuery:**无

**HTML：**

```
<div data-role="page" id="login" class="ui-body-e">
    <div data-role="content">   
        <a data-role="button" href="#main"></a>
    </div>
</div>

<div data-role="page" id="main" class="ui-body-e">
    <div data-role="content">   
        <li><a href="#login">Login</a></li>   
    </div>
</div> 
```

* * *

另一种选择是尝试以下方法`$.mobile.changePage()`：

**jQuery：**

```
$(function() {
    $("#my_button").click(function() {
        $.mobile.changePage("#main", { transition: "slideup"});
    });
}); 
```

**HTML：**

```
<div data-role="page" id="login" class="ui-body-e">
    <div data-role="content">   
        <input type="button" id="my_button" value="ok"/>       
    </div>
</div>

<div data-role="page" id="main" class="ui-body-e">
    <div data-role="content">   
        <li><a href="#login">Login</a></li>   
    </div>
</div> 
```

有关该方法的更多信息`$.mobile.changePage()`，请在线查看文档：http: [//jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

希望这可以帮助。

# .net - 如何在 webapi 中手动优化文件夹中的多个图像（减小文件大小）？

> ID：12596287
> 
> 赞同：2
> 
> 时间：2012-09-26T07:04:08.593
> 
> 标签：.net, image-processing, .net-4.0, asp.net-mvc-4, asp.net-web-api

大家好，我正在研究 webapi，我需要优化文件夹中的图像， `Uploaded images into one folder`然后再上传到`destination folder`我需要减少`image size in KB`总图像的数量，我正在优化一个`single image in to 3 different sizes' (large, thumbnail,medium)' but image sizes are increased`并保存在一个文件夹中，现在我需要优化这些图像，你可以请帮助我，我该怎么做。实际上我是 webapi 的新手。任何人都可能有任何想法，请帮助我，但我需要做一件事，`this manually` 谢谢你

这是我的控制器

```
public Task<HttpResponseMessage> Post()
        {
            if (!Request.Content.IsMimeMultipartContent("form-data"))
            {
                throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
            }

            var uploadFolder = HostingEnvironment.MapPath("~/App_Sprites/UploadFolder");
            uploadFolder = Path.Combine(uploadFolder, DateTime.Now.ToString("yyyyMMddhhmmssfff"));
            Directory.CreateDirectory(uploadFolder);
            var streamProvider = new PreserveFilenameMultipartFileStreamProvider(uploadFolder);

            return Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(t =>
            {
                foreach (var uploadedFile in Directory.GetFiles(uploadFolder))
                {
                    var thumbnail = Path.Combine(uploadFolder, "thumb-" + Path.GetFileName(uploadedFile));
                    var medium = Path.Combine(uploadFolder, "medium-" + Path.GetFileName(uploadedFile));
                    var large = Path.Combine(uploadFolder, "large-" + Path.GetFileName(uploadedFile));
                    ImageTools.Resize(uploadedFile, thumbnail, 80, 80);
                    ImageTools.Resize(uploadedFile, medium, 48, 48);
                    ImageTools.Resize(uploadedFile, large, 128, 128);
                }
                return Request.CreateResponse(HttpStatusCode.Accepted);
            });
        }
    } 
```

abd 这是我的课程文件

```
 public class ImageTools
    {
        public static void Resize(string original, string output, int width, int height)
        {
            using (var image = Image.FromFile(original))
            using (var thumbnail = new Bitmap(width, height))
            using (var graphics = Graphics.FromImage(thumbnail))
            {
                graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
                graphics.SmoothingMode = SmoothingMode.HighQuality;
                graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
                graphics.CompositingQuality = CompositingQuality.HighQuality;

                graphics.DrawImage(image, 0, 0, width, height);

                ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
                EncoderParameters encoderParameters;
                encoderParameters = new EncoderParameters(1);
                encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
                thumbnail.Save(output, info[1], encoderParameters);
            }
        }
    } 
```

类文件

```
 public class PreserveFilenameMultipartFileStreamProvider : MultipartFileStreamProvider
        {
            public PreserveFilenameMultipartFileStreamProvider(string rootPath)
                : base(rootPath)
            {
            }

            public override string GetLocalFileName(HttpContentHeaders headers)
            {
                return headers.ContentDisposition.FileName.Replace("\"", "");
            }
        } 
```

这是我的布局页面

```
@using (Html.BeginRouteForm("DefaultApi", new { httproute = "", controller = "Upload" }, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="image" multiple="multiple" accept="image/*" />
    <button type="submit">Upload</button>
} 
```

我创建了一个文件夹，现在图像保存在文件夹中，但文件大小以 kb 为单位增加，但我们需要减少，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:00:54.820

您应该为 QualityLevel 的**Resize**方法添加一个参数，并使用此参数更改不同的渲染。

您正在调整质量设置为完整的图像大小，这不是很有效。

您应该尝试指定另一种文件格式，我不知道您使用的是哪种文件格式，但**.PNG**用于小图像，**.JPG**用于更大的图像应该会有所帮助。（*如果你真的需要那个额外的字节，也可以使用****.GIF***）

 *在使用图像之前应该进行一些图像处理，但我想你在这里没有选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:20:06.643

如上所述，您的问题需要做一些小改动，试试这个，只需在您的控制器中调用此文件，我希望它对您有所帮助

```
 public class ImageDecrease
        {
            public static void Resize(Stream original, string output, int width, int height)
            {
                using (var image = Image.FromStream(original))
                using (var thumbnail = new Bitmap(width, height))
                using (var graphics = Graphics.FromImage(thumbnail))
                {
                    graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
                    graphics.SmoothingMode = SmoothingMode.HighQuality;
                    graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
                    graphics.CompositingQuality = CompositingQuality.HighQuality;

                    graphics.DrawImage(image, 0, 0, width, height);

                    ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();
                    EncoderParameters encoderParameters;
                    encoderParameters = new EncoderParameters(1);
                    encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
                    thumbnail.Save(output, info[1], encoderParameters);
                }
            }
        } 
```*

# python - 使用终端在 python 中查找图像像素？

> ID：12596297
> 
> 赞同：0
> 
> 时间：2012-09-26T07:04:28.753
> 
> 标签：python, macos, terminal

考虑我`image.png`在文件夹中有一张图片`XYZ`。我需要一个 Python 脚本，它要求用户输入图像名称，输出应该是图像像素和大小。

我在终端上尝试使用`sips`以下命令：

```
sips -g pixelWidth -g pixelHeight image.png 
```

我需要在 Python 上加入相同的内容。我试过这段代码

```
import os
for rootpath,dir,file in os.walk("/Volumes/Macintosh HD/users/username/myfolder"):
    for files in file:      
        def test(name):
            return (os.system(sips -g pixelWidth -g pixelHeight name)) 
```

但这没有帮助。我是 Python 新手，正在做一些实验。所以任何帮助/想法将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:24:41.817

你的逻辑应该是：

1.  检查图像文件是否存在，如果不存在，则退出并显示相应的消息。
2.  *使用图像的完整路径*调用您的函数
**   将结果显示给用户。*

 *以下是如何做到这一点：

```
import os
from subprocess import Popen, PIPE

def run_command(user_input):
    image_path = '/home/user/images/'
    command_to_run = '/usr/bin/sips'

    if not user_input:
        return "You didn't enter anything!"

    if not os.path.exists(image_page+user_input):
        return "I cannot find that image!"
    else:
        output = Popen([command_to_run,
                        "-g", "PixelWidth",
                        "-g", "PixelHeight",
                        image_path+user_input], stdout=PIPE).communicate()[0]
        return "The result is: ",output

 user_input = raw_input("Please enter the image name: ")
 print run_command(user_input) 
```*

# javascript - 调整窗口大小后如何获取高度和宽度

> ID：12596299
> 
> 赞同：4
> 
> 时间：2012-09-26T07:04:37.447
> 
> 标签：javascript, asp.net-mvc-3

我有一个 scorm 模块，它在我的 js 文件中的 window.open 中 resizable = 1 的新窗口中启动：

```
function OpenScormModuleWindow(scormModuleId, scormModuleUrl, title, width, height) 
{
  _scormModuleId = scormModuleId;
  InitializeUserScormModule();
  scormModuleWindow = window.open(scormModuleUrl, "title", "width=" + width + ", height=" + height + ", resizable = 1");
  scormModuleWindow.focus();
} 
```

在我看来，我有：

```
 var myWidth = 0, myHeight = 0;
  if (typeof (window.innerWidth) == 'number')
  {
      myWidth = window.innerWidth;
      myHeight = window.innerHeight;
  }
  else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight))
  {
      myWidth = document.documentElement.clientWidth; myHeight = document.documentElement.clientHeight;
  }
  else if (document.body && (document.body.clientWidth || document.body.clientHeight))
  {
      myWidth = document.body.clientWidth; myHeight = document.body.clientHeight;
  } 
```

我得到高度和宽度但不正确

用户现在可以调整大小，当窗口大小正确时，我怎样才能得到高度和宽度？

我需要获取这些值以便保存它，下次打开窗口时它的大小是正确的。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T07:07:26.957

使用监听调整大小的事件监听器，然后你可以重置你的值：

```
window.addEventListener('resize', setWindowSize);

function setWindowSize() {
  if (typeof (window.innerWidth) == 'number') {
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;
  } else {
    if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
      myWidth = document.documentElement.clientWidth;
      myHeight = document.documentElement.clientHeight;
    } else {
      if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
        myWidth = document.body.clientWidth;
        myHeight = document.body.clientHeight;
      }
    }
  }
} 
```

如果您需要跨浏览器解决方案，请使用[jQuery](http://jquery.com) ( `$.on('resize', func)`) 或查看[JavaScript 窗口调整大小事件](https://stackoverflow.com/questions/641857/javascript-window-resize-event)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-31T08:44:02.613

希望这个例子能帮助你...

**HTML 代码：**

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Window Size : height and width</title>
</head>
<!-- Resize the window (here output panel) and see the result !-->
<body onload="getSize()" onresize="getSize()">
<div id="wh"> 
<!-- Place height and width size here! --> 
</div>
<body>
</body>
</html> 
```

**JavaScript 代码：**

```
function getSize()
{
var w = document.documentElement.clientWidth;
var h = document.documentElement.clientHeight;

// put the result into a h1 tag
 document.getElementById('wh').innerHTML = "<h1>Width: " + w + " Height: " + h + "</h1>";
} 
```

或者您也可以使用 Jquery 代码调整大小：

```
var height = $(window).height();
var width = $(window).width();

$(window).resize(function() {

var height = $(window).height();
var width = $(window).width();
console.log("height"+height);
console.log("width"+width);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-31T15:51:42.503

据我所知，这是最好的方法；

```
function resizeCanvas() {
    canvas.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    canvas.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;

    WIDTH = canvas.width;
    HEIGHT = canvas.height;
} 
```

# itunes-store - iTunes 搜索 API 速率限制

> ID：12596300
> 
> 赞同：18
> 
> 时间：2012-09-26T07:04:43.077
> 
> 标签：itunes-store, rate-limiting, itunes-search-api

我打算使用 iTunes Search API 来获取应用相关信息 - [http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

想知道 API 使用是否有任何预定义的速率/油门限制。在他们的文档/堆栈/谷歌中找不到任何与此相关的信息。

有人有这方面的信息吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-29T10:20:42.230

回答原来的问题：

> iTunes 搜索 API 当前限制为每分钟大约 20 次调用（可能会发生变化）。

这是来自[企业合作伙伴提要页面](https://affiliate.itunes.apple.com/resources/documentation/itunes-enterprise-partner-feed/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-04T10:45:39.300

我不知道确切的速率限制是什么，**也无法**从 Apple 那里找到任何相关信息。但**我可以向您保证，一定有一个速率限制**，因为我在服务器上的大多数请求都没有成功，它们导致 HTTP 状态 403。完全相同的请求在其他计算机上工作，并且稍后（重试）同一台服务器。

我**试图**通过在我的开发计算机上同时发出大量请求来找到限制，但**没有请求导致与我的服务器上相同的错误**。我的服务器目前每天发出几十万个请求（我一次获取所有链接以缓存这些链接），这导致超过 90% 的请求失败 - 但有些成功。

因此，我按照**Ted Hosman**的建议进行了操作，并联系了 Apple 以**访问 EPF 文件**。**如果您每天**不超过一万个请求，我想**速率限制对您来说应该不是问题**。这是我在计算机上同时尝试的请求数，没有任何问题。如果您需要**更多**，您也应该使用**iTunes Enterprise Partner Feed**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T09:07:29.950

如果您正在查找大量记录，则首先下载 EPF 文件可能更容易 - 然后使用查找 API 补充您的更新：

[https://affiliate.itunes.apple.com/resources/documentation/itunes-enterprise-partner-feed/](https://affiliate.itunes.apple.com/resources/documentation/itunes-enterprise-partner-feed/)

如果您积极地使用 Search 或 Lookup API，您可能会开始遇到更长的响应时间、超过 30 秒或响应失败。

# ios - 生成pdf文件时如何更改编码？

> ID：12596301
> 
> 赞同：1
> 
> 时间：2012-09-26T07:04:43.920
> 
> 标签：ios, pdf-generation

我试着：

```
-(void)drawText:(NSString*)textToDraw inFrame:(CGRect)frameRect
{
    CFStringRef stringRef = (__bridge CFStringRef)textToDraw;   

    // Prepare the text using a Core Text Framesetter    
    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL);
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Get the graphics context.
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

    // Put the text matrix into a known state. This ensures
    // that no old scaling factors are left in place.
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

    // Core Text draws from the bottom-left corner up, so flip
    // the current transform prior to drawing.
    CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2);

    CFRelease(frameRef);
    CFRelease(stringRef);
    CFRelease(framesetter); 
```

}

结果：Windows操作系统不显示俄语字符，而在Mac上全部完美显示。

**如果您从 pdf 文件中复制文本并将其粘贴到记事本中，则会显示该文本。** 请帮帮我！

**我找到了解决方案：haru pdf lib。** [http://libharu.sourceforge.net/fonts.html](http://libharu.sourceforge.net/fonts.html)

# php - 用于 Codeigniter、grocercrud 或 carbogrid 的 CRUD？

> ID：12596304
> 
> 赞同：8
> 
> 时间：2012-09-26T07:04:55.400
> 
> 标签：php, codeigniter, codeigniter-2, grocery-crud

我正在为我的网站使用 CodeIgniter。我目前正在尝试实现一个管理部分，我必须在其中启用 CRUD 功能。

我在网上搜索并发现了两个不同的 CI 扩展。

1.  杂货店[http://www.grocerycrud.com](http://www.grocerycrud.com)
2.  碳网格[http://carbogrid.com](http://carbogrid.com)

谁能建议哪个更好？

编辑：我正在使用 PostgreSQL 数据库。

# tridion - 如何通过文件扩展名获取多媒体类型的TCM URI

> ID：12596309
> 
> 赞同：3
> 
> 时间：2012-09-26T07:05:01.437
> 
> 标签：tridion, tridion-2011

我想通过将文件扩展名作为参数传递给方法来获取多媒体类型的 TCM URI。以下是我正在使用的代码，但出现了一些异常：-

```
private static string GetMultimediaTypeTCMURI(FileExtensionsList lFileExtensions)
{
    string lTCMURI = "";
    try
    {
        SessionAwareCoreService2010Client client 
                                          = new SessionAwareCoreService2010Client();
        client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName";
        client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";
        client.Open();
        FileExtensionsList list = new FileExtensionsList();
        var mmType = client.GetSystemWideList(new MultimediaTypesFilterData())
              .Single(mt => ((MultimediaTypeData)mt).FileExtensions == lFileExtensions);
        lTCMURI = mmType.Id;
    }
    catch (Exception e)
    {
        throw new Exception("Please check either Mimetype" 
              + lFileExtensions + "is wrong or Mimetype does not exist in SDL Tridion.");
    }
    return lTCMURI;

} 
```

调用上述方法：-

```
FileExtensionsList list = new FileExtensionsList();
list.Add("js");

GetMultimediaTypeTCMURI(list); 
```

我在上面的代码中收到“序列不包含匹配元素”异常，请任何人建议如何执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T07:16:39.607

`Sequence contains no matching element`如果与您的 Linq 表达式不匹配，则抛出。我看到的是您正在尝试匹配扩展名列表：

```
mt => ((MultimediaTypeData)mt).FileExtensions == lFileExtensions 
```

这意味着多媒体类型的文件扩展名应该与您的完全匹配`lFileExtensions`，甚至应该具有相同的顺序。相反，请尝试仅搜索您需要的 1 个文件扩展名：

```
mt => ((MultimediaTypeData)mt).FileExtensions.Contains(myFileExtension) 
```

还可以考虑使用`SingleOrDefault`method 而不是`Single`. 它不会抛出异常，但`null`如果没有匹配则返回。您可以稍后检查多媒体类型`null`

# javascript - 如何验证一个字段或另一个 - 两个文本输入？

> ID：12596311
> 
> 赞同：0
> 
> 时间：2012-09-26T07:05:05.347
> 
> 标签：javascript, jquery-plugins, jquery-validate

使用 jQuery Validate 来验证表单。问题是我需要在表格中记录至少一个电话号码 - PDf 或 url

是否有任何内置的方法来设置规则来执行此操作并为此设置消息？

这是我的代码：

```
$('#myform').validate({
          rules: {
              news_pdf: {
                      required: function(element) {
                            return $('#url_upload').val() == '';
                      }
                }
                news_url: {
                      required: function(element) {
                            return $('#file_upload').val() == '';
                      }
                },

          },

    }); 
```

# express - 编辑 EJS 模板（express.js、underscore.js、can.js）

> ID：12596316
> 
> 赞同：4
> 
> 时间：2012-09-26T07:05:43.527
> 
> 标签：express, underscore.js, backbone-views, ejs

您使用什么 IDE 来编辑标准模板语言的 EJS 模板，例如 can.js、express.js、underscore.js

我正在等待在 JetBrains WebStorm IDE 中支持 EJS（顺便说一句，有兴趣的可以投票[http://youtrack.jetbrains.com/issue/WI-6800](http://youtrack.jetbrains.com/issue/WI-6800)）

我想知道是否有其他 IDE 支持语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:55:42.157

作为一种解决方法，您可以让 Jetbrains 使用设置菜单将 .ejs 文件与 html 相关联。

File->Settings->File Types->Recognized File Types { 查找 HTML 并在注册模式部分添加 *.ejs}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T08:24:28.187

它不是集成的而是在线的，但是有 Architect [http://rowno.github.io/architect/](http://rowno.github.io/architect/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-16T08:07:23.370

该插件已经存在：

[https://youtrack.jetbrains.com/issue/WEB-679#comment=27-1516987](https://youtrack.jetbrains.com/issue/WEB-679#comment=27-1516987)

> Martin Möhwald 2016 年 7 月 14 日，03:30 我解决了 Underscore.js 模板被标记为错误并且没有正确语法突出显示以下方式的问题：安装的 EJS 插件（[https://plugins.jetbrains.com/plugin/7296? pr=](https://plugins.jetbrains.com/plugin/7296?pr=) ) 配置设置 -> 编辑器 -> 文件类型 -> EJS -> 添加注册文件模式：*.tmpl （我猜你的可能不同）Tada！漂亮的语法突出显示没有错误:)
> 
> 注意：我在 Backbone.js 环境中使用 Underscore.js (lodash) 模板。模板始终是 *.tmpl 类型的单独文件

# android - Android : 克服 System.loadlibrary(); 关于 java.lang.UnsatisfiedLinkerror 的问题

> ID：12596317
> 
> 赞同：0
> 
> 时间：2012-09-26T07:05:58.597
> 
> 标签：android, pdf, android-ndk, apvpdf

我正在研究 APV pdf 阅读器。我面临`System.loadLibrary("pdfview2");`错误。它在给`java.lang.UnsatisfiedLinkerror`。
如何解决这个问题？我也安装了 Android-NDK，但不知道如何加载本机库。完全混乱。请建议我解决此问题的方法。

```
09-26 12:51:44.243: E/AndroidRuntime(2537): FATAL EXCEPTION: main
09-26 12:51:44.243: E/AndroidRuntime(2537): java.lang.ExceptionInInitializerError
09-26 12:51:44.243: E/AndroidRuntime(2537):     at cx.hell.android.pdfview.OpenFileActivity.getPDF(OpenFileActivity.java:541)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at cx.hell.android.pdfview.OpenFileActivity.startPDF(OpenFileActivity.java:502)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at cx.hell.android.pdfview.OpenFileActivity.onCreate(OpenFileActivity.java:219)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.os.Looper.loop(Looper.java:123)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at java.lang.reflect.Method.invoke(Method.java:507)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at dalvik.system.NativeStart.main(Native Method)
09-26 12:51:44.243: E/AndroidRuntime(2537): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load pdfview2: findLibrary returned null
09-26 12:51:44.243: E/AndroidRuntime(2537):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at java.lang.System.loadLibrary(System.java:554)
09-26 12:51:44.243: E/AndroidRuntime(2537):     at cx.hell.android.lib.pdf.PDF.<clinit>(PDF.java:25)
09-26 12:51:44.243: E/AndroidRuntime(2537):     ... 16 more 
```

嗨，我附上了日志报告。它给出了：- 引起：java.lang.UnsatisfiedLinkError：无法加载 pdfview2：findLibrary 返回 null

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:03:44.090

构建项目后，在 libs/ 文件夹中查找生成的 .so。如果您正在为 ARM 构建，是否有一个带有 .so 的 armeabi 或 armeabi-v7a 文件夹？**您可以使用APP_ABI**变量在 jni/Application.mk 中设置要支持的架构。

```
APP_ABI := armeabi armeabi-v7a x86 mips 
```

将为所有可能支持的架构构建您的库。

不要忘记 Android 的动态链接器是愚蠢的，不会自动加载库依赖项。例如，如果您使用带有 gnustl_shared 的 C++ 代码，则需要在链接到它的任何库之前加载它。

```
static {
    System.loadLibrary("gnustl_shared");
    System.loadLibrary("a_cplusplus_library");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:35:59.807

确保您的 libs 文件夹中有 libpdfview2.so。

[http://code.google.com/p/apv/issues/detail?id=42](http://code.google.com/p/apv/issues/detail?id=42)
[Android - '无法加载 Foo：findLibrary 返回 null'](https://stackoverflow.com/questions/11760284/android-couldnt-load-foo-findlibrary-returned-null)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T16:03:50.737

根据我的经验，此失败的另一个原因是存在 libs/armeabi 而不是 libs/armeabi-v7a。将 libs/armeabi 的内容复制到名为 libs/armeabi-v7a 的新文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T14:52:02.420

1-确保本机函数 Java_package_className_methodName 的名称

2- APP_ABI := all64 //在 jni/Application.mk 中定义

# c# - 如何使 lambda 在列表中的位置？

> ID：12596321
> 
> 赞同：1
> 
> 时间：2012-09-26T07:06:09.283
> 
> 标签：c#, linq, list, lambda

我有两节课：

```
public class firstClass
{
    public int Id { get; set; }
    public List<secondClass> Elements { get; set; }
}

public class secondClass
{
    public int Id { get; set; }
    public bool Is{ get; set; }
} 
```

并使用它们：

```
List<firstClass> list = allFirstClassFromDB.Include("Elements"); 
```

然后我的列表包含例如：

```
list[0] - {Id : 1, Elements : [0] { Id: 1, Is: true }, [1] { Id: 2, Is: true }, [2] { Id: 3, Is: false }
list[1] - {Id : 2, Elements : [0] { Id:4, Is: false }, [1] { Id: 5, Is: true }, [2] { Id: 6, Is: false }
list[2] - {Id : 3, Elements : [0] { Id:7, Is: false } } 
```

所以我需要的结果只是这个位置，它包含`Elements`了`Is`prop 设置为 true 的位置，像这样：

```
list[0] - {Id : 1, Elements : [0] { Id: 1, Is: true }, [1] { Id: 2, Is: true } }
list[1] - {Id : 2, Elements : [0] { Id: 5, Is: true } } 
```

在linq中可以吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:17:42.403

以下是使用 LINQ 的方法：

```
var filteredList = list
  .Select(
    x => new firstClass {
      Id = x.Id,
      Elements = x.Elements.Where(y => y.Is).ToList()
    }
  )
  .Where(x => x.Elements.Count > 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:21:23.750

首先去掉`firstClass`哪个没有`secondClass.Is` `true`by`Where`子句，然后重新构建`firstClass`只是为了过滤所有`secondClass.Is`true

```
list.Where(f => f.Elements.Any(s => s.Is))
    .Select(f => new firstClass() {
                                      Id = f.Id,
                                      Elements = f.Elements.Where(s => s.Is)
                                                           .ToList()
    }).ToList(); 
```

# javascript - 使用 javascript 的第一个和最后一个日期

> ID：12596322
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:06:19.113
> 
> 标签：javascript, date

1.  如何使用javascript获取上个月的第一个日期和最后一个日期？
2.  如何使用javascript获取当前月份的第一个日期和最后一个日期？
3.  如何获取上一季度的第一个和最后一个日期？
4.  如何获取当前季度的第一个和最后一个日期？
5.  如何获取上一年的第一个和最后一个日期？
6.  如何获取当前年份的第一个和最后一个日期？请就上述任何/所有问题向我提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:08:25.353

Have a look at this library it should help you with those questions.

[Moment.js](http://momentjs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:31:13.493

```
var x = new Date();
var year= x.getYear();
var month = x.getMonth();
var day = x.getDate();
var prevMonthFirstDay = new Date(year - (month == 1 ? 1 : 0), (month == 12 ? 1 : month - 1), 1);
var prevMonthLastDay = new Date(year, month, 0);
var thisMonthFirstDay = new Date(year, month, 1);
var thisMonthLastDay = new Date(year + (month == 12 ? 1 : 0), (month == 1 ? 12 : month + 1), 0); 
```

为他人使用相同的东西。即季度使用 4 而不是一个月的 1...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:10:24.680

您可以从这里获得所有问题的答案 [http://www.stackoverflow.com/questions/605113/find-first-day-of-previous-month-in-javascript](http://www.stackoverflow.com/questions/605113/find-first-day-of-previous-month-in-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T07:13:15.753

1.  如何使用javascript获取上个月的第一个日期和最后一个日期？

    ```
    firstDate = new Date().setDate(1).setMonth(new Date().getMonth() - 1); 
    ```

2.  如何使用javascript获取当前月份的第一个日期和最后一个日期？

3.  如何获取上一季度的第一个和最后一个日期？
4.  如何获取当前季度的第一个和最后一个日期？
5.  如何获取上一年的第一个和最后一个日期？
6.  如何获取当前年份的第一个和最后一个日期？

# java - hadoop中的矩阵乘法

> ID：12596323
> 
> 赞同：6
> 
> 时间：2012-09-26T07:06:20.347
> 
> 标签：java, algorithm, hadoop, matrix, matrix-multiplication

我尝试为页面排名算法构建代码，其中主要的复杂性是有效地解决矩阵乘法，但我不明白这个任务是如何执行的，我阅读了一些关于它的论文，但这超出了我的范围. 我不明白他应用的概念。那么，你能给我一个关于矩阵乘法的映射器和归约器函数的概念吗？提前致谢。

我读了这个[链接](http://www.norstad.org/matrix-multiply/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:10:23.223

[像Apache Hama](http://hama.apache.org/)这样的几个框架已经[实现](http://wiki.apache.org/hama/PageRank)了 PageRank。[Apache Giraph](http://incubator.apache.org/giraph/)还支持[Pagerank](http://giraph.apache.org/apidocs/org/apache/giraph/examples/SimplePageRankVertex.html%5C)。

MapReduce 不太适合 PageRank，因此 Google 发表了[Pregel 论文](http://googleresearch.blogspot.com/2009/06/large-scale-graph-computing-at-google.html)，用于大规模图计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:16:03.583

这个想法是，您可以使用[Strassen 算法](http://en.wikipedia.org/wiki/Strassen_algorithm)将矩阵乘法分解为子问题，然后将这些子问题发送到一堆不同的计算机。完成这些子问题后，也可以处理将不同子问题汇总到矩阵中的方法。使用 Mapreduce 的关键是所有子问题基本上都可以并行计算，这就是...... Mapreduce 的用途。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-26T07:22:03.237

您提供的链接解释了这一点（加上它包括源代码）。如果您仍在为操作的概念而苦苦挣扎，那么您可能应该先阅读更多有关矩阵/线性代数的内容，以便了解基础数学。

# windows-mobile - 如何在 windows mobile 6.5 上创建弹出屏幕

> ID：12596324
> 
> 赞同：0
> 
> 时间：2012-09-26T07:06:20.750
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6

我对创建 Windows Mobile 应用程序非常陌生。我在表单上有一个提交按钮，在按钮上单击我想打开一个小弹出窗口，该弹出窗口与当前窗口重叠，带有复选框和按钮。单击弹出表单上的按钮后将提交。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:03:36.703

您可以像往常一样通过创建新的 Form 类来创建“弹出”屏幕，但手动设置大小和位置，使其不占据整个屏幕。在调用屏幕中，使用 .ShowDialog() 函数来显示您的“弹出”表单。请注意，如果您的应用程序被最大化以隐藏窗口标题栏，则此弹出窗体将再次显示标题栏，因为它不会占据整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T13:39:55.863

如果它可以帮助任何人，至少我，不能仅仅因为 formborderStyle 属性而改变 location 属性。将其设置为无，您将能够更改表单的位置！

# shared-hosting - how to point to a folder in shared hosted server control panel

> ID：12596329
> 
> 赞同：0
> 
> 时间：2012-09-26T07:06:45.240
> 
> 标签：shared-hosting

I wanted to deploy my project in shared hosting server.While deploying i found the below issues 1.I am not able to find how to point to my project folder. 2.how to set default document or startup page for the site. Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-09T07:07:24.890

大多数共享托管公司在谈论 PHP 时，都会有一个名为`public_html`或的文件夹`root`，它是您网站的主要容器。

根据主机和语言，这可能会发生变化，您应该查看服务提供商的文档。

编辑：哦……刚刚看到帖子上的日期。

# jquery - 是否可以停止从元素开始的所有事件？

> ID：12596331
> 
> 赞同：0
> 
> 时间：2012-09-26T07:06:47.137
> 
> 标签：jquery

这是我想要做的：我有这个处理链接点击的处理程序：

```
$('body').on('click', 'a.ajax.get', function(e){
    e.preventDefault();
    $.get($(this).attr('href'), function(){alert('Success!');});
}); 
```

后来我创建了这个处理程序，所以我可以在操作发生之前要求用户确认：

```
$('body').on('click', 'a[data-confirmation]', function(){
   return confirm($(this).data('confirmation'));
}); 
```

这个处理程序放在我脚本的顶部

导致我出现问题的标记是这样的：

```
<a href="do/something/there" class="ajax get" data-confirmation="Are you sure you want to do that?">
    Click me!
</a> 
```

我认为它会做的是，当用户在确认框中单击“取消”时，回调将返回`false`，事件链将停止。这不会发生，无论用户在确认框中选择什么，链接都会被“点击”。

我做错了什么，或者这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:14:04.370

试试这个

```
$('body').on('click', 'a[data-confirmation]', function(e) {
    var check = confirm($(this).data('confirmation'))
    if (!check) {
        e.preventDefault();
    }
    else {
        $.get($(this).attr('href'), function() {
            alert('Success!');
        });
    }
});​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/VHk6h/)

单击取消按钮时未发送请求

[更新的小提琴](http://jsfiddle.net/sushanth009/VHk6h/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:37:39.673

您可能最好将所有内容压缩为一个函数，只需检查当前单击的元素是否具有该`data-confirmation`属性，如果是，则显示确认（并处理它！）

```
$(document).ready(function() {

  $('body').on('click', 'a.ajax.get', function(e) {     
    if($(this).data('confirmation') !== undefined) { 
      if(!confirm($(this).data('confirmation'))) {
        e.preventDefault(); return false;
      }
    }

    $.get($(this).attr('href'), function(){
      alert('Success!');
    }); 
  });

}); 
```

[这是一个小提琴](http://jsfiddle.net/deifwud/P9PsP/4/)

# java - Setting ENLARGE_PAGE_SIZE for pdf in birt report

> ID：12596335
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:06:59.683
> 
> 标签：java, dynamic, report, birt

I am generating BIRT report dynamically using DE. While rendering the pdf I would like to set the ENLARGE_PAGE_SIZE and orientation to Landscape. Can any one help me plzzzzzz.......

Thanks in advance !!! :) :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:38:18.807

在进行渲染时，将渲染选项设置为：

renderOption.setOption（PDFRenderOption.PAGE_OVERFLOW，新整数（PDFRenderOption.ENLARGE_PAGE_SIZE））；

如果您使用 de api 创建报表，请将母版页设置为横向：designHandle.getMasterPages().get(0).setProperty("orientation", "landscape");

杰森

# python - 返回一个类的所有实例

> ID：12596340
> 
> 赞同：0
> 
> 时间：2012-09-26T07:07:06.317
> 
> 标签：python, python-2.5

> **可能重复：**
> [打印一个类的所有实例](https://stackoverflow.com/questions/328851/printing-all-instances-of-a-class)

有没有办法返回一个特殊类的每个实例？我想获取每个对象的一些属性，然后删除该对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:33:21.060

是你自己写的那一门课吗？

*   是的：设计它来跟踪它的实例——然后你可以查询那个缓存
*   不：没有好办法。

下面是一个跟踪实例的简短示例：

```
class Tracker(object):
    instances = list()
    def __init__(self):
        self.__class__.instances.append(self)
    @classmethod
    def projeny(cls):
        print "There are currently %d instances of Tracker" % len(cls.instances)
        for instance in cls.instances:
            print instance

t1 = Tracker()
t2 = Tracker()
Tracker.projeny()
t3 = Tracker()
Tracker.projeny() 
```

这给了我们：

```
There are currently 2 instances of Tracker
<__main__.Tracker object at 0x02237A30>
<__main__.Tracker object at 0x02237AD0>
There are currently 3 instances of Tracker
<__main__.Tracker object at 0x02237A30>
<__main__.Tracker object at 0x02237AD0>
<__main__.Tracker object at 0x02237AF0> 
```

请参阅[此答案](https://stackoverflow.com/a/328882/208880)以获得强大的实施。

# jquery - Displaying an array of events in full calendar

> ID：12596344
> 
> 赞同：0
> 
> 时间：2012-09-26T07:07:27.677
> 
> 标签：jquery, ruby-on-rails-3.1, fullcalendar

I am trying to integrate the arshaw's jQuery fullcalendar into my rails application. When I click on the calendar tab it should display the calendar with the list of tasks in the database on the corresponding date.

In calendar controller

```
 def index

    @task=Task.find_all_by_pm_id(params[:u])
      @task.each do |t|
        @task_name=t.task_name
        @end_date=t.due_date
      end
    end

In the Calenders/index.html.erb

    <script>
     $(document).ready(function() {
        var date = new Date();
        var d = <%=@end_date.day%>;
        var m = <%=@end_date.month%>-1;
        var y = <%=@end_date.year%>;
        var calendar = $('#calender').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            selectable: true,
            selectHelper: true,
            events: [
                {
                    title: '<%=@task_name%>',
                    start: new Date(y, m, d)
                },

            ],
            editable: true

        });

    });

</script> 
```

Now it is displaying only the last task name. I need to display all the task name on particular dates. Any inputs on this will be appreciated. Please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:17:09.077

```
events: [
{
title: '<%=@task_name%>',
start: new Date(y, m, d)
}
], 
```

should contain an array of events, in your code you are filling it with the only one with the @task_name, try to change in something like events : <%=task%> but check the input respects the JSON array format

# ruby-on-rails - unicorn timeout handling

> ID：12596345
> 
> 赞同：7
> 
> 时间：2012-09-26T07:07:31.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nginx, unicorn

I'm wondering what is the best way to track unicorn timeouts from my app.

There are some bits of the app which are slow and they currently timeout quietly. I could increase the timeout but that is shoving the problem under the carpet. Ideally, I would like to get an airbrake notification or something of that effect. I'm not looking for a performance guide, just a way to efficiently and reliably get informed about timeouts.

How have other people handled timeouts from their rails app using unicorn? scan the nginx error log? plug in a handler in unicorn config? handler in nginx config?

[Ubuntu 12.04+nginx+unicorn+rails 3.2+ruby 1.9.3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:53:25.050

请参阅 Unicorn 手册网站的[“配置器”部分](http://unicorn.bogomips.org/Unicorn/Configurator.html)。有一系列关于积压和超时的项目应该可以为您提供所需的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:40:47.033

我倾向于在[New Relic](http://newrelic.com)上创建一个帐户，使用他们的`newrelic_rpm`gem 并在他们的 Web 应用程序中收集与此问题相关的性能数据。NR 提供对这种情况有用的免费帐户级别。

使用这种有点懒惰的检测方法的好处是双重的：在您的应用程序中不需要自定义检测实现；并且无需检查您的下游网络服务器日志中是否存在 503 服务器错误。

# javascript - 服务器端处理还是客户端处理？

> ID：12596347
> 
> 赞同：4
> 
> 时间：2012-09-26T07:07:41.660
> 
> 标签：javascript, ajax, performance, client-side, server-side

我开发了一个比较网站，用于比较在印度在线销售的任何产品。目前，该网站完全是客户端：-

> 1.  接受用户输入。
> 2.  发出 20-30 个 AJAX 请求并从所有主要在线商店获取结果。
> 3.  使用一些客户端脚本对结果进行排序并以最合适的方式显示。

缺点：-

> 1.  我的客户端代码可供所有人使用。它的JavaScript。
> 2.  更容易出现浏览器错误。
> 3.  不健壮。

使其成为服务器端后的缺点：-

> 1.  考虑到我网站的流量，服务器负载会增加，因为它将与客户端接触更长时间。
> 2.  从各种网站获取值可能需要多达 10 秒（最多）。当时使用的服务器。如果我在高峰时间有 500 名访客/分钟，请考虑负载。

好处：-

> 1.  我的代码安全可靠
> 2.  客户端的处理将是最少的。甚至可以在手机和其他设备上轻松工作。

我想在实际实施之前分析这些问题。谁能建议我应该为我的网站选择什么？哪种方法对我更好？

如果我的问题模棱两可，请发表评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:23:59.180

Well first of all thats a very nice question.

it completely depends on the volume and transactions your site handles and if you really want your application to scale, i wish you do it right! and do it right from the beginning.

Stop putting your business logic on the client side ** dont expect to eat end user network bandwidth when he makes a comparison call :) and dont expect he has the best bandwidth.

**Load balance your server farm** make sure your server farm is properly load balanced and the comparison is done using multi threads instead in a single thread

**cache results** ** if you are doing this on the server side, if user a and user b asks for the same comparison you can actually pull it from the cache for user b instead doing these requests again.

**Usability** show the progress of comparison to user instead showing a loading spinning image :)

hope it helps

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:19:37.693

我不明白您为什么选择“更容易出现浏览器错误”。如果您向浏览器发送正确的库/代码，Javascript 将完全按照您想要的方式运行。

您可以查看*哪个*浏览器正在执行请求并向其发送正确的代码（读作：如果您有一些代码可以在 FF 和 Opera 但不能在 IE 中运行，请编写该代码的两个版本，一个用于每组浏览器.) 有一些库可以帮助您这样做。

Also, a comparison is not anything that should be done on the server side. SO, if you have a lot of traffic on your website, client-side work should be fine for that kind of stuff.

About the code-protection, you're right. Server-side won't let anybody read your code. So you must decide if server load is more important than people reading your code.

Also keep in mind that you can obfuscate your code. I know that's not the best solution, but it will keep away a lot of people not reading it.

EDIT:

Making it server side will make things work as expected on all devices (as your already said). But there are some things you need to do in order to preserve your server's load from going to 100%.

`Chandra Sekhar Walajap` already told you about the benefit of using some kind of cache for the results. I'd personally go a little bit further as you're just **scraping** all those pages.

I'd create a **scraper** that will run, let's say, every 24 hours and fetch/**scrape** each product. Then I'd save all those products *somewhere* (read as in a database or whatever you want). This way, when a user makes a request for a comparison between products A and B you won't need to fetch/**scrape** all the sites, instead of that you'll just have to look for those products in the place where you saved them and show them to the user.

Note that this will preserve a lot of bandwidth only if you have a lot of users comparing a lot of products.

On the other side, if you have a few users searching only for a few products, making that kind of solution won't benefit you at all, because you know, fetching everything from all the sites every 24 hours is a lot of usage, both in CPU and bandwidth.

About the server load: I can't say. It depends on so much things that it's nearly impossible to say. You need to consider how big are the website that you're **scraping** , how many products are there on each website? What's the hardware you're using? You'd be better by making some simple example using cURL and fetching everything from one of the sites. Then see how that impacts on the performance and decide.

# java - java.rmi.ServerException：服务器线程发生RemoteException；嵌套异常是：

> ID：12596351
> 
> 赞同：4
> 
> 时间：2012-09-26T07:07:47.097
> 
> 标签：java, rmi

运行 Server 类（使用 java server 命令）时出现异常，如下所示（我已经启动 rmiregistry，使用 start rmiregistry 命令）。可能是什么问题呢？

```
C:\Users\william\Desktop\HelloWorld\Server>java Server
java.rmi.ServerException: RemoteException occurred in server thread; nested exce
ption is:
        java.rmi.UnmarshalException: error unmarshalling arguments; nested excep
tion is:
        java.lang.ClassNotFoundException: Hello
        at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:419
)
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
        at sun.rmi.transport.Transport$1.run(Transport.java:177)
        at sun.rmi.transport.Transport$1.run(Transport.java:174)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:5
53)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTranspor
t.java:808)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport
.java:667)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.
java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:603)
        at java.lang.Thread.run(Thread.java:722)
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknow
n Source)
        at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
        at sun.rmi.server.UnicastRef.invoke(Unknown Source)
        at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
        at Server.main(Server.java:61)
Caused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested ex
ception is:
        java.lang.ClassNotFoundException: Hello
        at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
        at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:409
)
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
        at sun.rmi.transport.Transport$1.run(Transport.java:177)
        at sun.rmi.transport.Transport$1.run(Transport.java:174)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:5
53)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTranspor
t.java:808)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport
.java:667)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.
java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: Hello
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at sun.rmi.server.LoaderHandler.loadProxyInterfaces(LoaderHandler.java:7
30)
        at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:674)
        at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:611)
        at java.rmi.server.RMIClassLoader$2.loadProxyClass(RMIClassLoader.java:6
46)
        at java.rmi.server.RMIClassLoader.loadProxyClass(RMIClassLoader.java:311
)
        at sun.rmi.server.MarshalInputStream.resolveProxyClass(MarshalInputStrea
m.java:257)
        at java.io.ObjectInputStream.readProxyDesc(ObjectInputStream.java:1549)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1511)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1
750)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
        ... 13 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:10:29.210

尝试在命令行中使用与运行 javac 和 java 相同的路径启动 rmiregistry。

# triggers - i am not able to resolve the error nullobject reference salesforce trigger

> ID：12596357
> 
> 赞同：0
> 
> 时间：2012-09-26T07:07:57.697
> 
> 标签：triggers, salesforce

hi i have designed a trigger that provides rollup summary max date value to accounts from its child objects(deals/offers)(they have a lookup relationship with the parent)...but whenever i try to delete a child object i am being thrown an validation error can please help as i am new to salesforce and not able to resolve it.

here is the trigger code:

```
trigger accountupdate on Deal_Offer__c (after delete, after insert, after update) {
Set<id> accountIds = new Set<id>();
Date maxdate;
Date maxdate1;
Date maxdate2;    
List<Account> accountsToUpdate = new List<Account>();

for (Deal_Offer__c item : Trigger.new)
    accountIds.add(item.Account__c);

if (Trigger.isUpdate || Trigger.isDelete) {
    for (Deal_Offer__c item : Trigger.old)
        accountIds.add(item.Account__c);
}

// get a map of the Accounts and the related fields that need to be updated
Map<id,Account> accountMap = new Map<id,Account>([select id,Most_Recent_Live_Date_Homerun__c,Most_Recent_Live_Date_Chase__c,Most_Recent_Live_Date_Serve__c from Account where id IN :accountIds]);

// query the account and the related deals_offers and update the max_run_date fiels in the account
for (Account acc : [select id,Name,Most_Recent_Live_Date_Homerun__c,Most_Recent_Live_Date_Chase__c,Most_Recent_Live_Date_Serve__c,(select id,Most_Recent_Live_Date_Homerun__c,Most_Recent_Live_Date_Chase__c,Most_Recent_Live_Date_Serve__c from Deals_Offers__r) from Account where id IN :accountIds]) {
   maxdate = acc.Deals_offers__r[0].Most_Recent_Live_Date_Homerun__c;
   maxdate1 = acc.Deals_offers__r[0].Most_Recent_Live_Date_Chase__c;
   maxdate2 = acc.Deals_offers__r[0].Most_Recent_Live_Date_Serve__c;
   for (Integer i = 0;i < acc.Deals_Offers__r.size(); i++){
       if(acc.Deals_Offers__r[i].Most_Recent_Live_Date_Homerun__c > maxdate){
           maxdate = acc.Deals_Offers__r[i].Most_Recent_Live_Date_Homerun__c;
       }
       if(acc.Deals_Offers__r[i].Most_Recent_Live_Date_Chase__c > maxdate){
           maxdate1 = acc.Deals_Offers__r[i].Most_Recent_Live_Date_Chase__c;
       }
       if(acc.Deals_Offers__r[i].Most_Recent_Live_Date_Serve__c > maxdate){
           maxdate2 = acc.Deals_Offers__r[i].Most_Recent_Live_Date_Serve__c;
       }                                     
   }
  accountMap.get(acc.Id).Most_Recent_Live_Date_Homerun__c = maxdate;
  accountMap.get(acc.Id).Most_Recent_Live_Date_Chase__c = maxdate1;
  accountMap.get(acc.Id).Most_Recent_Live_Date_Serve__c = maxdate2;
  //add the account to update list          
  accountsToUpdate.add(accountMap.get(acc.Id));  

}

update accountsToUpdate; 
```

}

this is the error i am getting when i delete an deal/offer from the account

There were custom validation error(s) encountered while saving the affected record(s). The first validation error encountered was "Apex trigger accountupdate caused an unexpected exception, contact your administrator: accountupdate: execution of AfterDelete caused by: System.NullPointerException: Attempt to de-reference a null object: Trigger.accountupdate: line 8, column 1".

can please tell me where i am getting it wrong and what should it do to remedy it.

thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:16:22.063

**Trigger.New**和**Trigger.old**都是触发器上下文变量。New 为您提供更新的值，而 Old 为您提供记录的先前值。

**Trigger.new**在插入前、插入后、更新前、更新后可用

**Trigger.old**可用于更新前、更新后、删除前、删除后。

您的代码尝试在删除记录被删除的位置后使用 Trigger.New，并且很明显，删除后 Trigger.New 将具有空值。

请尝试
在您的代码中使用 if (Trigger.isDelete) 来为特定操作（插入、删除、更新）执行代码块。 [单击此处](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_context_variables.htm)查看所有 Apex 触发器上下文变量。

# c++ - CUDA gridDim, blockDim 总是用户定义的？

> ID：12596365
> 
> 赞同：1
> 
> 时间：2012-09-26T07:08:35.650
> 
> 标签：c++, c, cuda

当我在内核调用中传递网格大小和线程数时，这些值是否会始终完全按照我传递的方式放置在 gridDim 和 blockDim 中？

而且，blockIdx 和 threadIdx 会始终遵守这些限制吗？

换句话说，调用

```
kernel<<<5, 7>>>() 
```

总是导致在内核中，

```
gridDim.x == 5 && blockIdx.x < gridDim.x
blockDim.x == 7 && threadIdx.x < blockDim.x 
```

满足以上条件？（同样具有 2D 和 3D 尺寸和索引？）

我知道这听起来可能很愚蠢，但我想知道是否允许 CUDA 忽略资源分配的限制，因此程序员总是需要检查。

希望清楚，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:38:36.100

是的，如果您在维度 <<<5,7>>> 中启动内核，它将有 5 个块和每个块 7 个线程。请注意，如果您在 GPU 的范围内操作，您的效率最高。您应该使用从设备属性中读取的 warpsize 来获得卡的最大速度。根据需要使用大量线程，但块应该是你的经纱大小的倍数。

CUDA 本身不会将您的线程/块更改为其他大小，因此您应该对寻址没问题。

# excel-dna - 如何在 Excel-DNA 中将用户输入转换为字符串

> ID：12596368
> 
> 赞同：0
> 
> 时间：2012-09-26T07:08:52.090
> 
> 标签：excel-dna

是否可以在 Excel-DNA 中的字符串参数的参数中不包含“”的情况下调用函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:08:28.727

[不会。Excel 在调用Excel-DNA](http://exceldna.codeplex.com)加载项之前解释公式，如果您没有引号，Excel 将尝试将参数解释为名称（名称包括范围、在名称管理器中添加的名称等）。

为什么这对您来说是个问题 - 它与 Excel 的其他工作方式一致？

# api - 用于测试应用的完整 LinkedIn 个人资料

> ID：12596369
> 
> 赞同：12
> 
> 时间：2012-09-26T07:08:55.633
> 
> 标签：api, linkedin

我想知道 LinkedIn 上是否有完整的个人资料，我可以在上面测试我的应用程序。完整是指包含所有字段并且可以公开访问的个人资料（使用LinkedIn API）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T16:39:12.427

我不知道任何可公开访问的测试配置文件，如果有的话我会感到惊讶。

[LinkedIn API TOS](https://developer.linkedin.com/documents/linkedin-apis-terms-use)的第 II A 节对测试帐户有这样的说法：

> 仅出于测试目的，您最多可以创建五个 LinkedIn 帐户。必须手动创建帐户，而不是通过任何自动化方式（包括脚本）创建。这些测试帐户不得与非测试帐户交互（例如，它们不得用于在群组中发布消息），或用于规避用户限制。这些帐户必须具有清楚地将其标识为测试帐户的个人资料，除了您自己的公司之外没有任何真实公司的个人资料职位，并且在您的开发人员帐户中列为开发人员。

您可能还会发现[此讨论](http://developer.linkedin.com/forum/test-accounts)很有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-08T14:25:05.660

Linkedin 的工作人员在[这个帖子](https://developer.linkedin.com/forum/test-accounts)中说，测试他们的 API 的唯一方法是手动创建自己的测试帐户。

# vb.net - How to group and sum datatable

> ID：12596374
> 
> 赞同：1
> 
> 时间：2012-09-26T07:09:09.640
> 
> 标签：vb.net, group-by, sum

I have datatable with two columns; line and duration. I want the sum of the duration, based on the line group. For example:

```
LINE  DURATION 
A1    00:05:20 
A1    00:07:00 
A1    00:02:10 
A1    00:01:50 
A2    00:02:01 
A2    00:03:45 
```

I want the output to be like this:

```
LINE  DURATION 
A1    00:14:30 
A2    00:05:46 
```

I can't do this straight from Oracle query because the column duration is stored as a Char in the database. So I have to convert the column to timespan and store in another column in the datatable. Here is the code:

```
Imports System.Data
Imports Oracle.DataAccess.Client ' ODP.NET Oracle managed provider
Imports Oracle.DataAccess.Types

Partial Public Class WebForm3

Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
Dim li As ListItem

For Each li In DDL1.Items()
If li.Selected = True Then
If Len(Trim(strLine)) <> 0 Then
strLine = strLine & "','" & li.Text
Else
strLine = li.Text
End If
End If
Next

End Sub

Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
Dim oradb As String = "Data Source=XXXXX;User Id=XXXXX;Password=XXXXX;"
Dim conn As New OracleConnection(oradb)
Dim cmd As New OracleCommand
Dim myDataAdapter As New OracleDataAdapter
Dim mySelect As String

    Try

        conn.Open()

        mySelect = "SELECT REFLINKTBL.LINENAME, JSFACTOR.EVENTTM  "
        mySelect = mySelect & " FROM (SELECT JSLINE.LINENAME, JSMC.RECID, JSMC.MCNAME, JSMC.GOH "
        mySelect = mySelect & " FROM JSLINE RIGHT OUTER JOIN  "
        mySelect = mySelect & " JSMC ON JSLINE.RECID = JSMC.ID_JSLINE) REFLINKTBL INNER JOIN  "
        mySelect = mySelect & " JSFACTOR ON JSFACTOR.ID_JSMC = REFLINKTBL.RECID  "
        mySelect = mySelect & " WHERE JSFACTOR.YOUIN LIKE '%CSTTRB%'  "
        mySelect = mySelect & " AND (JSFACTOR.EVENTST BETWEEN '2012/08/06 00:00:00' AND '2012/08/12 00:00:00') "
        mySelect = mySelect & " AND LINENAME IN ('" & strLine & "')  "
        mySelect = mySelect & " ORDER BY LINENAME, JSFACTOR.EVENTST "

        myDataAdapter = New OracleDataAdapter(mySelect, conn)

        Dim Ds As New DataSet()
        GridView1.DataSource = Ds
        myDataAdapter.Fill(Ds)

        Dim dc As DataColumn

        dc = New DataColumn("DURATION", GetType(TimeSpan))

        Ds.Tables(0).Columns.Add(dc)

        Dim linename As DataColumn = Ds.Tables(0).Columns(0)
        Dim duration As DataColumn = Ds.Tables(0).Columns(2)

        For i As Integer = 0 To Ds.Tables(0).Rows.Count - 1
            Ds.Tables(0).Rows(i).Item(duration) = TimeSpan.Parse(Ds.Tables(0).Rows(i).Item("EVENTTM"))
        Next

        Ds.Tables(0).Columns.Remove("EVENTTM")

        GridView1.DataSource = Ds
        GridView1.DataBind()

    Catch ex As OracleException

        MsgBox("Error: " & ex.ToString())

    End Try

End Sub 
```

Can anyone help me group the line and get the sum of duration for each line?

# magento - Magento CMS Variables not rendering

> ID：12596376
> 
> 赞同：1
> 
> 时间：2012-09-26T07:09:15.100
> 
> 标签：magento, variables, rendering, magento-1.7

I have been searching and experimenting for days now on a solution for getting custom product attribute data into a static block. I decided to go ahead and use a call to a template file that defines the call to the products attribute.

The problem however, is that my Magento Community 1.7 installation doesnt render any variables, either within CMS pages, product attributes, or static blocks. I have seen everwhere that this is the way to do it. I put in something such as the following:

```
{{block type="core/template" template="/catalog/product/compatibility.phtml"}} 
```

After saving, and making sure that HTML on the frontend is set to yes, I check to see if it worked. What I see is the exact code of the variable and not that it even tried to access the template file. I have even tried inserting stock variables (such as a widget or even just the store name) into a page/static block to see if they render but they dont NONE do.

Am I missing something? Is there something that needs to be enabled for variables to work at all on my site? Spent 4 solid days ripping my hair out already

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:17:33.113

如果这太简单了，请原谅我，但是您是否确保在将代码粘贴到块中之前单击以隐藏/禁用 WYSIWYG 编辑器？

如果您将代码直接粘贴到 WYSIWYG editpr 中，它将对标签进行编码并停止对其进行正确解析。

此外，您不需要在模板路径中使用斜杠：

```
{{block type="core/template" template="catalog/product/compatibility.phtml"}} 
```

# asp.net-mvc-3 - 使用 Linq 从 ModelState 获取错误消息列表

> ID：12596379
> 
> 赞同：2
> 
> 时间：2012-09-26T07:09:20.783
> 
> 标签：asp.net-mvc-3, linq

是否可以创建一个链接的 linq 语句来创建来自 ViewData.ModelState 的错误消息的 IEnumerable(Of String)？

我试过了：

```
Dim errorlist = ViewData.ModelState.Select(
    Function(m) m.Value.Errors.Select(
        Function(e) e.ErrorMessage)) 
```

但是那个 linq 会产生 IEnumerable(Of IEnumerable(Of String))。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:09:34.277

```
Dim errorlist = ViewData.ModelState.SelectMany(
Function(m) m.Value.Errors.Select(
    Function(e) e.ErrorMessage)) 
```

# sql-server - SQL Server 多选执行速度太慢

> ID：12596385
> 
> 赞同：1
> 
> 时间：2012-09-26T07:09:37.907
> 
> 标签：sql-server

```
SELECT 
   CountryCode, CountryName, CountryEName, FirstShow, iseTicketFirstShow 
FROM 
   Tristar.dbo.COMCountry 
WHERE 
  ContinentName = 'Continent Name' AND iseTicket = 1 
  and CountryCode in 
    (select Distinct CountryCode 
     from eTicketSubAirport 
     where AirportCode in 
         (select DISTINCT eTDestinationAirport 
          from eTicketMain 
          where eTChecked=1 and eTDepartAirport='TPE')
    ) 
ORDER BY 
   iseTicketFirstShow DESC, FirstShow,CountryEName 
```

上面的代码花了 3 秒....这是不可接受的。2个内部选择自己执行得非常快。

如果我拿走了一个内部选择，例如....

```
SELECT 
   CountryCode, CountryName, CountryEName, FirstShow, iseTicketFirstShow 
FROM 
   Tristar.dbo.COMCountry 
WHERE 
   ContinentName = 'continent name' AND iseTicket = 1 
   and CountryCode in 
     (select Distinct CountryCode 
      from eTicketSubAirport) 
ORDER BY 
   iseTicketFirstShow DESC, FirstShow,CountryEName 
```

这也执行得非常快。

哈希匹配太 79% 的处理。[eTicketSubAirport]

我不能删除选择的任何部分，因为它们都是必需的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:23:04.733

尝试加入，它看起来像这样：

```
SELECT DISTINCT
   Country.CountryCode, 
   Country.CountryName, 
   Country.CountryEName, 
   Country.FirstShow, 
   Country.iseTicketFirstShow 
FROM 
   Tristar.dbo.COMCountry AS Country
   INNER JOIN eTicketSubAirport ON Country.CountryCode = eTicketSubAirport.CountryCode
   INNER JOIN eTicketMain       ON eTicketSubAirport.AirportCode = eTicketMain.eTDestinationAirport
WHERE 
  Country.ContinentName = 'Continent Name' 
  AND Country.iseTicket = 1 
  AND eTicketMain.eTChecked = 1 
  AND eTicketMain.eTDepartAirport = 'TPE'
ORDER BY 
   Country.iseTicketFirstShow DESC, 
   Country.FirstShow,
   Country.CountryEName 
```

# symfony - 在 Symfony 中将带有控制器的路由定义为服务？

> ID：12596386
> 
> 赞同：0
> 
> 时间：2012-09-26T07:09:44.603
> 
> 标签：symfony, routing, controller

根据文档：

> 除了使用逻辑名或完全限定的类名之外，Symfony 还支持第三种引用控制器的方式。此方法仅使用一个冒号分隔符（例如 service_name:indexAction）并将控制器称为服务（请参阅如何将控制器定义为服务）。

将此控制器作为服务（id 为`gremo_skebby.controller.report`）：

```
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services
                        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="gremo_skebby.controller.report.class">
            Gremo\SkebbyBundle\Controller\ReportController
        </parameter>
        <parameter key="gremo_skebby.request.param_converter.report_event.class">
            Gremo\SkebbyBundle\Request\ParamConverter\ReportEventParamConverter
        </parameter>
    </parameters>

    <services>
        <service id="gremo_skebby.request.param_converter.report_event"
            class="%gremo_skebby.request.param_converter.report_event.class%">
            <tag name="request.param_coverter" />
        </service>
        <service id="gremo_skebby.controller.report" 
            class="%gremo_skebby.controller.report.class%">
            <argument id="dispatcher" type="service" />
        </service>
    </services>
</container> 
```

如何`/skebby/notify`在`routing.xml`文件中定义路线？

```
<?xml version="1.0" encoding="UTF-8" ?>
<routes xmlns="http://symfony.com/schema/routing"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/routing
                        http://symfony.com/schema/routing/routing-1.0.xsd">

    <route id="gremo_skebby_report_notify" pattern="/skebby/notify">
        <default key="_controller">???</default>
        <requirement key="_method">GET</requirement>
    </route>
</routes> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:34:59.500

如果调用了action方法`notifyAction`，那么`gremo_skebby.controller.report:notifyAction`。

# java - Java：可以访问从字符串连接创建的临时对象吗？

> ID：12596387
> 
> 赞同：0
> 
> 时间：2012-09-26T07:09:54.073
> 
> 标签：java, string, object, concatenation, temporary

在 Java 中创建 String 对象时，然后通过将其他内容连接到它

```
someString.concat("I am being concatenated to someString"); 
```

或者类似的，因为字符串是不可变的，所以会创建一个包含结果字符串的临时对象，对吗？通常，完成此操作后，会立即创建一个新的 String 对象来包含它，例如

```
String newString = oldString.concat("I am being concatenated"); 
```

但假设它不是。在那种情况下，是否有另一种方法来访问连接的字符串？（在最后一种情况下，oldString 和“我正在连接”的总和。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:14:53.537

我会说不，因为您在堆空间中创建了一个新对象但没有引用它。所以它将被垃圾收集。在 Java 中，没有办法直接访问堆空间地址......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:12:16.443

`concat`确实创建了一个新`String`对象（不确定您所说的临时对象是什么意思），如果您不将该新对象的引用存储`String`在变量中，则以后无法访问它。

在实践中：

```
someString.concat("I am being concatenated to someString"); 
```

在某个阶段（当/如果代码被 JIT 编译器编译时）可能会作为死代码被淘汰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:24:53.110

请参阅已接受的答案以获得正确答案，但疯狂的回复可能是......

```
someString.concat("I am being concatenated to someString").intern();
// later on later on in the code...
String s = new String("I am being concatenated to someString").intern(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T07:12:45.067

Java 中非原始类型的变量是**引用**，它们不是对象本身（如在 C++ 中）。在这样的一行中：

```
String newString = oldString.concat("I am being concatenated"); 
```

没有创建一个新对象**，**`String`其中复制了想象的临时字符串的内容。其实`newString`就是指你认为的临时对象。（实际上并没有临时对象）。

# iphone - 适用于 iOS 的 Retina PDF 图像渲染

> ID：12596391
> 
> 赞同：0
> 
> 时间：2012-09-26T07:10:05.650
> 
> 标签：iphone, objective-c, ios, pdf, retina-display

我有以下代码，它在页面中心呈现带有图像的 PDF。然而，图像（实际上也是文本）看起来非常像素化，显然不是为视网膜显示器设计的。

我在下面的代码中没有做什么？

```
-(void)drawText
{
    NSString* fileName = @"Workbook.PDF";

    NSArray *arrayPaths =
    NSSearchPathForDirectoriesInDomains(
                                    NSDocumentDirectory,
                                    NSUserDomainMask,
                                    YES);
    NSString *path = [arrayPaths objectAtIndex:0];
    NSString* pdfFileName = [path stringByAppendingPathComponent:fileName];

    // Create the PDF context using the default page size of 612 x 792.
    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
    CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), YES);

    for(UIImage *image in _pages)
    {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSString* textToDraw = [NSString stringWithFormat:@"Page %i of %@", [_pages indexOfObject:image] + 1, [defaults objectForKey:@"OpenBookKey"]];
    CFStringRef stringRef = (__bridge CFStringRef)textToDraw;

    // Prepare the text using a Core Text Framesetter.
    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL);
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

    CGRect frameRect = CGRectMake(230, 0, 612, 50);
    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Mark the beginning of a new page.
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil);

    // Get the graphics context.
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    CGRect frame = CGRectMake(20, 50, 550, 550);
    [image drawInRect:frame];

    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

    CGContextTranslateCTM(currentContext, 0, 100);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    CFRelease(frameRef);
    CFRelease(stringRef);
    CFRelease(framesetter);

    }

    // Close the PDF context and write the contents out.
    UIGraphicsEndPDFContext();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:18:57.107

PDF 上下文与 Retina 显示无关。图像可能会出现像素化，因为它是以小分辨率绘制的，而文本出现像素化是因为它被绘制到中间位图，然后位图被绘制在 PDF 页面上（这似乎是它内部的工作方式，SO 上的其他用户抱怨像素化文本）。
图像问题可以通过使用高分辨率图像来解决，文本问题我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:35:06.787

与 Retina 显示屏无关，您只需调整图像大小以适应宽高比以减少像素化。您可以参考我的代码，您需要添加代码来管理您的图像大小，以调整它的大小

```
UIGraphicsBeginPDFContextToFile(pdfPath, CGRectZero, nil);
for (UIImage *img in FileArr ) {
    CGRect imageFrame = CGRectMake(0,0, img.size.width, img.size.height);
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, img.size.width, img.size.height), nil);
    [img drawInRect:imageFrame];
    NSString *pageString = [NSString stringWithFormat:@"Page 122"];
    UIFont *theFont = [UIFont systemFontOfSize:12];
    CGSize maxSize = CGSizeMake(612, 72);
    CGSize pageStringSize = [pageString sizeWithFont:theFont
                                   constrainedToSize:maxSize
                                       lineBreakMode:UILineBreakModeClip];
    CGRect stringRect = CGRectMake(((612.0 - pageStringSize.width) / 2.0),
                                   720.0 + ((72.0 - pageStringSize.height) / 2.0),
                                   pageStringSize.width,
                                   pageStringSize.height);
    [pageString drawInRect:stringRect withFont:theFont];
}
UIGraphicsEndPDFContext(); 
```

# c# - 如何使用 C#、ASP.NET、SQL Server 端处理实现 jQuery DataTables 插件？

> ID：12596400
> 
> 赞同：10
> 
> 时间：2012-09-26T07:10:53.123
> 
> 标签：c#, jquery, asp.net, sql-server, jquery-datatables

如何使用 C#、ASP.NET、带有 ajax 和 web 服务的 SQL Server 端处理来实现 jQuery DataTables 插件？

想使用 c# 和 ASP.NET 实现一个 Datatables 网格，但很难找到一个工作示例。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T07:10:53.123

在 C#、ASP.NET、使用 ajax 和 web 服务的 SQL Server 端处理中的 JQuery DataTables 的工作示例。

[http://jquerydatatablessamp.codeplex.com/](http://jquerydatatablessamp.codeplex.com/)

[https://github.com/benni12/jquerydatatablesExample](https://github.com/benni12/jquerydatatablesExample)

（发了两次，方便大家找）

从链接到 DataTables.Net 开始，Allan 用这个插件做了一个了不起的工作。

我已经使用这个插件大约一年了。当我第一次尝试在 C# 和 .NET 中使用服务器端处理、ajax 和 web 服务来实现它时，文档很少，也没有工作示例，所以我决定将它们放在一起。

提供的源代码是 Visual Studio 2012（在 Ultimate 2012 和 Pro 2012 中测试）网站项目。我把它作为一个简单的工作示例放在一起，希望能帮助其他人尝试把这样的东西放在一起。这是我希望一年前拥有的东西。

数据库 mdf 包含在 App_Data 文件夹中。我目前正在运行 MS SQL Server Express 2012 的实例。

需要安装 SQL Server Express 2012 或其他标准或更好的 MS SQL Server 完整版安装。在标准 2008 R2 和 2012 Express 上测试。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-08T06:25:39.827

此版本适用于较旧的 SqlServer，对于较新版本，请尝试其他版本。

该技术使用存储过程，您可以使用#temp 以外的其他方法来提高性能主要特点是

*   存储过程
*   注入免费且易于适应的sql结构
*   阿贾克斯

功能强大且非常有用

第 1 步：（HTML）

```
 <link href="../Content/css/datatables.min.css" rel="stylesheet" />
 <script src="../Scripts/datatables.min.js"></script>
 <script src="../Scripts/jQuery-2.1.4.min.js"></script>

 <script>
 $(document).ready(function () {
      if ($.fn.dataTable.isDataTable('#tbl_category')) {
        t.destroy();
    }
    t = $("#tbl_category").DataTable({
        processing: true,
        serverSide: true,
        info: true,
        ajax: {
            url: '../Ajax/Category?option=GetAllAdminCategory&user_srno='+user_srno,
            data: function (data) {
                delete data.columns;
            }
        },
        columns: [
                    { "data": "abc" },
                    { "data": "name" },
                    { "data": "baseDiscount" },
                    { "data": "additionalDiscount" },
                    { "data": "specialDiscount" },
                    {
                        "render": function (data, type, full, meta) {
                            return '<a class="btn btn-warning" onClick="editdata(' + full.srno + ',\'' + full.name + '\',\'' + full.baseDiscount + '\',\'' + full.additionalDiscount + '\',\'' + full.specialDiscount + '\',\'' + full.specialDiscount + '\')" href="javascript://">Edit</a>&nbsp;&nbsp;<a class="btn btn-danger" onClick="deletePhantom(' + full.srno + ',\'DELETE\')" href="javascript://">Remove</a>';
                        }
                    }
        ],
        order: [[0, 'desc']],
        select: true,
        dom: 'lfrtip',
        responsive: true,
        buttons: true
    });
    t.on('order.dt search.dt', function () {
        t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
            cell.innerHTML = i + 1;
        });
    }).draw();

});
 </script>

 <table id="tbl_category" class="display" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Base Discount</th>
                                <th>Additional Discount</th>
                                <th>Special Discount</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Base Discount</th>
                                <th>Additional Discount</th>
                                <th>Special Discount</th>
                                <th>Action</th>
                            </tr>
                        </tfoot>
                    </table> 
```

步骤：2（存储过程）

```
Create procedure [dbo].[category_post]
 @srno int=null, -- from here 
 @user_srno int=null,
 @catSrno int=null,
 @name varchar(200)=null,
 @baseDiscount numeric(18,2)=null,
 @additionalDiscount numeric(18,2)=null,
 @specialDiscount numeric(18,2)=null,
 @status int null,
 @Action_by int null,
 @option varchar(20) = null, -- to here personnel parameters
 @orderColumn  int =null, 
 @orderDir  varchar(20)=null,
 @start  int =null,
 @limit  int =null,
 @searchKey varchar(20) -- personnel parameter
  as 
  BEGIN

    select IDENTITY(int,1,1) as SnoID, null as abc,specialDiscount, additionalDiscount, baseDiscount, name,cast(srno as varchar(20)) as srno
            --this method is userful for all sql server version (it can be made better by using fetch)
    into #tempCategory
     from categoryStd where [status] not in(4,14) and categoryStd.name like '%'+@searchKey+'%'

    declare @to as int = @start+@limit  

     select * from #tempCategory where SnoID>@start and SnoID<=@to

        order by
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'desc' THEN #tempCategory.[name] END DESC,
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'asc' THEN #tempCategory.[name] END ASC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'desc' THEN #tempCategory.[name] END DESC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'asc' THEN #tempCategory.[name] END ASC

        select count(*) from #tempCategory

END 
```

STEP:3 (AJAX 页面) C# 表单

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Configuration;
using AppBlock;
using System.Data.SqlClient;
using Newtonsoft.Json;

namespace alfest.Ajax
{
  public partial class Category : System.Web.UI.Page
  {
    string mode, option, user, limit, start, searchKey, orderByColumn, orderByDir, estMstSrno, pnlsrno, draw, jsonString;
    CommonClass cmnCls = new CommonClass();
    protected void Page_Load(object sender, EventArgs e)
    {
      mode = Request.QueryString["mode"] == null ? "" : Request.QueryString["mode"].ToString();
      option = Request.QueryString["option"] == null ? "" : Request.QueryString["option"].ToString();
      limit = Request.QueryString["length"] == null ? "" : Request.QueryString["length"].ToString();
      start = Request.QueryString["start"] == null ? "" : Request.QueryString["start"].ToString();
      user = Request.QueryString["user"] == null ? "" : Request.QueryString["user"].ToString();
      searchKey = Request.QueryString["search[value]"] == null ? "" : Request.QueryString["search[value]"].ToString();
      orderByColumn = Request.QueryString["order[0][column]"] == null ? "" : Request.QueryString["order[0][column]"].ToString();
      orderByDir = Request.QueryString["order[0][dir]"] == null ? "" : Request.QueryString["order[0][dir]"].ToString();
      estMstSrno = Request.QueryString["estMstSrno"] == null ? "" : Request.QueryString["estMstSrno"].ToString();
      pnlsrno = Request.QueryString["pnlsrno"] == null ? "" : Request.QueryString["pnlsrno"].ToString();
      draw = Request.QueryString["draw"] == null ? "" : Request.QueryString["draw"].ToString();

       // Cls_Category CatgObj = new Cls_Category();
       // CatgObj.orderColumn = Convert.ToInt32(orderByColumn);
       // CatgObj.limit = Convert.ToInt32(limit);
       // CatgObj.orderDir = orderByDir;
       // CatgObj.start = Convert.ToInt32(start);
       // CatgObj.searchKey = searchKey;
       // CatgObj.option = "GetAllAdminCategory";

      // or user your own method to get data (just fill the dataset)

      //  DataSet ds = cmnCls.PRC_category(CatgObj);

        dynamic newtonresult = new
          {
            status = "success",
            draw = Convert.ToInt32(draw == "" ? "0" : draw),
            recordsTotal = ds.Tables[1].Rows[0][0],
            recordsFiltered = ds.Tables[1].Rows[0][0],
            data = ds.Tables[0]
          };
        jsonString = JsonConvert.SerializeObject(newtonresult);

        Response.Clear();
        Response.ContentType = "application/json";
        Response.Write(jsonString);

    }
  }
} 
```

最后结果 ： [![在此处输入图像描述](../Images/39e4a90a583a8b58a0247e18e2f29cd0.png)](https://i.stack.imgur.com/SzbU3.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-22T06:21:34.210

在 MVC、实体框架、具有最新获取偏移分页的存储过程中的实现

第 1 步 - HTML

```
<table id="tbl_category" class="display" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Base Discount</th>
            <th>Additional Discount</th>
            <th>Special Discount</th>
            <th>Action</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Base Discount</th>
            <th>Additional Discount</th>
            <th>Special Discount</th>
            <th>Action</th>
        </tr>
    </tfoot>
</table>

@*<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.10.13/r-2.1.1/sc-1.4.2/datatables.min.css" />

<script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.10.13/r-2.1.1/sc-1.4.2/datatables.min.js"></script>*@
<link href="~/Scripts/JqueryDatatable/Datatable.css" rel="stylesheet" />
<script src="~/Scripts/JqueryDatatable/DataTable.js"></script>

<script>
$(document).ready(function() {

    if ($.fn.dataTable.isDataTable('#tbl_category')) {
        t.destroy();
    }
    t = $("#tbl_category").DataTable({
        processing: true,
        serverSide: true,
        info: true,
        ajax: {
            url: '../Client/SearchMis',
            data: function (data) {
                delete data.columns;
            }
        },
        scrollY:        300,
        deferRender:    true,
        scroller:       true,
        columns: [
                    { "data": "abc" },
                    { "data": "name" },
                    { "data": "Address" },
                    { "data": "name" },
                    { "data": "name" },
                    {
                        "render": function (data, type, full, meta) {
                            return '<a class="btn btn-warning" onClick="editdata(' + full.name + ',\'' + full.name + '\',\'' + full.name + '\',\'' + full.name + '\',\'' + full.name + '\',\'' + full.name + '\')" href="javascript://">Edit</a>&nbsp;&nbsp;<a class="btn btn-danger" onClick="deletePhantom(' + full.name + ',\'DELETE\')" href="javascript://">Remove</a>';
                        }
                    }
        ],
        order: [[0, 'desc']],
        select: true,
        dom: 'lfrtip',
        responsive: true,
        buttons: true
    });
    t.on('order.dt search.dt', function () {
        t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
            cell.innerHTML = i + 1;
        });
    }).draw();

});
</script> 
```

第 2 步 - C#

```
using EmployeeTrackingSystemAndMIS.Models;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Web.Mvc;

namespace EmployeeTrackingSystemAndMIS.Controllers
{
    public class ClientController : Controller
    {
        private EmployeeTrackingSystemAndMISEntities db = new EmployeeTrackingSystemAndMISEntities();

        public string SearchMis()
        {
            string limit, start, searchKey, orderColumn, orderDir, draw, jsonString;
            limit = Request.QueryString["length"] == null ? "" : Request.QueryString["length"].ToString();
            start = Request.QueryString["start"] == null ? "" : Request.QueryString["start"].ToString();
            searchKey = Request.QueryString["search[value]"] == null ? "" : Request.QueryString["search[value]"].ToString();
            orderColumn = Request.QueryString["order[0][column]"] == null ? "" : Request.QueryString["order[0][column]"].ToString();
            orderDir = Request.QueryString["order[0][dir]"] == null ? "" : Request.QueryString["order[0][dir]"].ToString();
            draw = Request.QueryString["draw"] == null ? "" : Request.QueryString["draw"].ToString();

            var parameter = new List<object>();
            var param = new SqlParameter("@orderColumn", orderColumn);
            parameter.Add(param);
            param = new SqlParameter("@limit", limit);
            parameter.Add(param);
            param = new SqlParameter("@orderDir", orderDir);
            parameter.Add(param);
            param = new SqlParameter("@start", start);
            parameter.Add(param);
            param = new SqlParameter("@searchKey", searchKey);
            parameter.Add(param);

            var CompanySearchList = db.Database.SqlQuery<CompanySearch>("EXEC SearchCompany @orderColumn,@limit,@orderDir,@start,@searchKey ", parameter.ToArray()).ToList();

            dynamic newtonresult = new
            {
                status = "success",
                draw = Convert.ToInt32(draw == "" ? "0" : draw),
                recordsTotal = CompanySearchList.FirstOrDefault().TotalCount,
                recordsFiltered = CompanySearchList.FirstOrDefault().TotalCount,
                data = CompanySearchList
            };
            jsonString = JsonConvert.SerializeObject(newtonresult);

            return jsonString;
        }

        private class CompanySearch
        {
            public int TotalCount { get; set; }
            public string abc { get; set; }
            public string Address { get; set; }
            public int? ClientID { get; set; }
            public int? EmployeeID { get; set; }
            public string name { get; set; }
            public int CompanyID { get; set; }
        }
    }
} 
```

第 3 步 - 存储过程

```
USE [EmployeeTrackingSystemAndMIS]
GO
/****** Object:  StoredProcedure [dbo].[category_post]    Script Date: 22-02-2017 10:57:48 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
alter  procedure [dbo].SearchCompany

@orderColumn  int ,
@limit  int,
@orderDir  varchar(20),
@start  int,
@searchKey varchar(20)
  as 
  BEGIN

     declare @to as int = @start+@limit  

    select TotalCount = COUNT(c.CompanyID) OVER(), null as abc,c.Address,c.ClientID ,c.EmployeeID  , name,
    c.CompanyID 

     from CompanyTbl c  where c.Name like '%'+@searchKey+'%'

        order by
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'desc' THEN c.[name] END DESC,
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'asc' THEN c.[name] END ASC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'desc' THEN c.[name] END DESC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'asc' THEN c.[name] END ASC

                    OFFSET @start ROWS
                              FETCH NEXT @to ROWS ONLY

  End 
```

# qt - Qt 和 Digia 许可

> ID：12596401
> 
> 赞同：1
> 
> 时间：2012-09-26T07:10:55.507
> 
> 标签：qt, sdk, licensing

今天想下载Qt sdk，发现nokia 站点现在不能用了。我被重定向到 digia[网站](http://qt.digia.com/Product/):. 我创立了，现在我不能只下载开放许可的 sdk。他们需要我的名字和其他信息。在他们发给我的电子邮件中，我创建了商业版 SDK 和我的许可证密钥的链接。

他们为什么这么做？将来可以免费使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:22:50.327

正如网站所说，如果你想要 Qt Open Source 版本，你必须去[Qt Project website](http://qt-project.org/)。

版权所有者可以随意更改许可。当所有版权都由一个实体持有时，这通常更容易。您可以使用免费/开源版本并继续使用它。

据我所知，Qt 自打开以来就拥有双重许可证。Digia 似乎正在做的是分发具有专有许可证的许可证，让项目来分发开放许可证。

# mysql - 在 MySql 中按组计算唯一记录

> ID：12596411
> 
> 赞同：0
> 
> 时间：2012-09-26T07:11:41.017
> 
> 标签：mysql, phpmyadmin

![这是我的数据库表，我想计算用户的唯一访问次数，例如很多 5 人访问 5 次，20 人访问 7 次等](../Images/d8a2315de9e675551f8153c1b63d7503.png)

这是我的查询

```
SELECT count(*) as count 
FROM `tbl_track` 
GROUP BY `user_id` 
```

其结果是（1人访问2次+1人访问2次+1人访问1次）

```
Count
2
2
1 
```

我想要一个结果（2 人访问 2 次 + 1 人访问 1 次）

```
Count
2
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:18:08.317

```
SELECT count(*) as `count`, `visit_times` 
FROM (
  SELECT count(*) as `visit_times` 
  FROM `tbl_track` 
  GROUP BY `user_id`
) AS t GROUP BY `visit_times` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:18:44.503

尝试这个：

```
select cnt as user_count,COUNT(*) as count
from
(
SELECT   COUNT(*) as cnt 
FROM tbl_track 
GROUP BY userid)a
group by cnt 
```

# [SQL Fiddle 演示](http://sqlfiddle.com/#!2/2745d/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:17:09.887

尝试这个：

```
SELECT DISTINCT VisitsCount
FROM
(
    SELECT COUNT(*) AS VisitsCount
    FROM TableName
    GROUP BY UserId
) T 
```

# c# - 释放 COM 对象

> ID：12596412
> 
> 赞同：5
> 
> 时间：2012-09-26T07:11:44.243
> 
> 标签：c#, com

我在 Visual Studio 项目中添加了对某个 COM 库的引用。现在当我在一个方法中创建和对象时，当程序离开该方法时，这个COM对象会自动释放吗？还是我应该总是手动释放这些对象？（ReleaseComObject 还是 FinalReleaseComObject？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:19:32.523

这当然不是自动完成的，在某些情况下这样做（通过调用`Marshal.ReleaseComObject`）可能很危险，[如本博文中所述](http://blogs.msdn.com/b/cbrumme/archive/2003/04/16/51355.aspx)。

对于 In-Proc COM 对象，通常根本不需要释放 COM 对象。

对于 Out-Proc COM 对象，释放它们可能很重要，以防止诸如[Office 应用程序在从 .NET 客户端自动化后无法关闭](http://support.microsoft.com/kb/317109)等问题。

在这种情况下，我会遵循上面链接的博客文章中的建议：

> 如果您以范围内的单线程方式使用 COM 对象，那么您可以在使用完该对象后安全地调用该对象上的 ReleaseComObject。
> 
> 但是，如果您在应用程序中的多个位置或多个线程（或来自同一进程中的其他应用程序）使用 COM 对象，则不应调用 ReleaseComObject

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:14:50.343

您可以使用 Marshal.ReleaseComObject：http: [//msdn.microsoft.com/de-de/library/system.runtime.interopservices.marshal.releasecomobject.aspx](http://msdn.microsoft.com/de-de/library/system.runtime.interopservices.marshal.releasecomobject.aspx)

# php - 通过 js 框架组织 JQuery 片段

> ID：12596413
> 
> 赞同：4
> 
> 时间：2012-09-26T07:11:48.313
> 
> 标签：php, javascript, jquery, zend-framework

我有一个带有几个视图脚本和分布式 jquery 代码的 zend 框架应用程序，看起来很糟糕并且难以维护（没有结构，松散的片段等）

现在我想通过集中所有与应用程序相关的 javascript 内容来进行清理。

是否有一个 js 框架可以帮助我将 jquery 的东西组织到一个中央和结构化的 javascript 层？也许像 angular.js，backbone.js 相关的东西？我不知道这些框架是否足以解决我的问题，或者只是额外的开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T02:22:57.837

我建议使用 requirejs 来帮助管理您网站上的 js。它旨在为您的 js 提供严格的结构。 [http://www.requirejs.org/](http://www.requirejs.org/)

使用 require.js 的最大原因之一是它为 javascript 添加了面向对象的编程风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:04:17.343

我会推荐你​​主干.js，因为它没有内置的数据绑定，所以它对 html 代码没有特定的要求。我可以强烈推荐[peepcode 教程](https://peepcode.com/screencasts/javascript)，你会通过它在你的学习曲线中获得巨大的奖励。有了主干，您将拥有强大的能力将客户端层解耦为模型和视图，而不是经典的 jquery 事件 spagetti，并且您将在您想要保留它的地方保持使用 jquery 的可用性。我确信您也可以将它与其他客户端 MVC 一起使用，但请考虑需要 html 内联数据绑定属性来指定 UI 行为的“双向数据绑定”框架（Angular、knout、...）。

# java - Hibernate all-delete-orphan 用于有序集合

> ID：12596415
> 
> 赞同：0
> 
> 时间：2012-09-26T07:11:55.383
> 
> 标签：java, hibernate, linkedhashset, all-delete-orphan

我有这样的关系

```
<set name="someBeans" table="sometable" cascade="all, delete-orphan" inverse="true" lazy="true">
        <key column="some_id" />
        <one-to-many class="someBean" />
    </set> 
```

在我的 Java 代码中，对此执行了一组操作，就像

```
myClass.setSomeBeans(SomeBeans); 
```

现在这个 SomeBeans 是一个linkedHashmap，所以订单得到了维护，但是由于在级联中使用了所有 Delete Orphan，我在特定场景中遇到了异常：

```
HibernateException – A collection with cascade=”all-delete-orphan” was no longer referenced by the owning entity instance 
```

所以我把上面的java实现改成

```
myClass.getSomeBeans().clear();
myClass.getSomeBeans().addAll(SomeBeans) 
```

但是这样做我无法维持来自linkedHashMap SomeBeans 的订单。

有没有人也遇到过这样的问题，在这方面的任何帮助都将不胜感激

问候，

瓦布哈夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:01:37.437

只是为了完成我想要的，我创建了一个虚拟对象，复制了休眠对象的属性并对其应用了排序，它得到了保留，并且所有与删除孤儿相关的问题也得到了处理。

# jquery - 验证 jQueryMobile 中的字段

> ID：12596418
> 
> 赞同：0
> 
> 时间：2012-09-26T07:12:11.373
> 
> 标签：jquery, jquery-ui, jquery-mobile

我正在使用 jQuery Mobile 最新版本和 jQuery。

我需要验证一个可以接受用户输入的字段。

如果输入不是数字，我希望在该字段附近有一个错误验证消息。

我想知道如何在 jQuery Mobile 中制作它。

另外我想知道是否可以强制用户只为字段添加数字值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:23:21.313

您可以使用`http://docs.jquery.com/Plugins/Validation`

如果您需要自定义验证，请查看`addMethod( name, method, message )`此插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:24:21.627

您可以在 jquery mobile 中使用相同的`jquery.validate.js`插件。`formField`否则，您可以向所有需要验证的表单字段添加一个类，并在提交时获取包含字段的元素并进行自定义验证。如果您为每个页面使用哈希，我会写一些类似的东西：

```
<form class='myFormElem display-none'>
  <div class="errorField"
  <input type="text" data-regexp="^\+?[0-9]{10,15}$" class="formField">
  <input type="submit" class="submitForm">
</form 
```

示例代码片段：

```
$(location.hash + ' .submitForm').off('click');
$(location.hash + ' .submitForm').on('click', function (e) {
    $(location.hash + ' .formField').each(function () {
        var elem = $(this), p, regexp;
        try {
            //validate fields
            p = elem.data('regexp');
            if (p !== "" && p !== null && typeof p !== "undefined") {
                regexp = new RegExp(p, ["g"]);
                if (!val.match(regexp)) {
                    throw "Error..(your error message here)";
                }
             }
        } catch (ex) {
            $(errField).removeClass('display-none').addClass('display-block');
            $(errField).html(ex);
        }
    }
}); 
```

# volusion - 如何使用 VSMTP Volusion

> ID：12596420
> 
> 赞同：0
> 
> 时间：2012-09-26T07:12:15.927
> 
> 标签：volusion

有朋友可以告诉我如何使用 VSMTP 批量发送电子邮件吗？

他们为此提供了文章[http://support.volusion.com/article/vsmtp-key](http://support.volusion.com/article/vsmtp-key) ，但我无法使其工作。

实际上，我想使用Form。一旦用户/访客填写表格并单击发送按钮。电子邮件将使用 VSMTP 连同详细信息一起发送。

Volusion 已经提供了自定义表单选项，但为此我们必须要求使用 CAPTCHA。我们不想使用的。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T19:26:06.363

它只是一个网络服务。他们提供了在 ASP 中使用它的参考实现。只需下载该 ASP 文件并在 ASP 文件中使用它即可从您的表单发送电子邮件。

# .net - 使用 threading.Task 运行 WCF 方法

> ID：12596421
> 
> 赞同：0
> 
> 时间：2012-09-26T07:12:19.377
> 
> 标签：.net, multithreading, wcf, task-parallel-library

我正在使用通用函数来执行 wcf 服务调用 - 请参见下文。我只是想确保我在做正确的事情：

*   最重要的要求是服务调用应该在**单独的线程**中执行。最初我想到了Backgroundworker，然后决定使用`Threading.Task`它，那么简单
    `Task.Factory.StartNew(Function() functionToCall.Invoke(serv))`吗？
    并得到结果`result = t.Result`

*   如果我这样做有什么区别：

    > 将 t1 作为新任务（对象）（Function（）functionToCall.Invoke（serv））
    > t1.Start（）
    > 结果= t1.Result

*   我应该考虑`Parallel`吗？

*   我错过了什么重要的事情吗？

> **编辑：此功能在客户端解决方案的 ServiceProxy 项目中**

```
Private Function ServiceCall(ByVal functionToCall As ServiceDelegate(Of IEmpService)) As Object
    Dim channel As New ChannelFactory(Of IEmpService)(_endPoint)
    Dim serv As IEmpService
    Dim result As Object = Nothing

    serv = channel.CreateChannel()

    Try
        Dim t As Task(Of Object) = Task.Factory.StartNew(Function() functionToCall.Invoke(serv))
        result = t.Result

    Catch exp As Exception 
        CustomLog.Detail(exp)

    Finally
        If channel.State = CommunicationState.Faulted Then
            channel.Abort()
        Else
            channel.Close()
        End If
    End Try

    Return result
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:10:30.220

通常，是的，当您想在没有其他机制可以利用的情况下进行异步调用时，您概述的模式通常是可以接受的。

但是，在 WCF 的情况下，您可以生成符合[异步设计模式](http://msdn.microsoft.com/en-us/library/aa719595%28v=vs.71%29.aspx)的合同。生成服务引用时，单击“高级”按钮，然后选择“生成异步操作”：

![服务参考高级选项对话框](../Images/86b2e2faa7b1ceea89145604b846a2ac.png)

当您这样做时，将生成您的服务合同以返回[`IAsyncResult`接口](http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx)实现 ( `Begin`/ `End`) 而不是您的同步操作。

这些优先于同步操作，因为它允许您释放在等待 IO 完成时将被阻塞的线程（这是一个硬件信号，而不是需要您保持线程的东西）。

然后，您可以从那里调用[类](http://msdn.microsoft.com/en-us/library/dd321401.aspx)上的[`FromAsync`方法](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)以返回一个（也不会阻塞线程），该方法可用于异步等待/继续调用。[`TaskFactory`](http://msdn.microsoft.com/en-us/library/dd321401.aspx)[`Task<TResult>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:08:43.200

您想在称为同步的方法中进行异步调用，这没有意义。

建议你让这个方法同步（去掉Task相关的代码），改用Task/Backgroundworker调用ServiceCall方法。

使用带有公共方法的新对象来封装对同步 ServiceCall 方法的异步调用，并使用 Event 来在收到数据时返回数据。

并让它像这样使用：

```
var caller = new Caller();
caller.Done += { // Your data handling here };
caller.Call(Method1); 
```

在这里，您可以稍微玩一下这个对象，在构造函数中传递返回方法逻辑，甚至将 lambda 作为另一个参数传递给 Call 方法。

一种实现[基于事件的异步模式（EAP）](http://www.c-sharpcorner.com/UploadFile/nityaprakash/event-based-asynchronous-patterneap/)的简单方法。

# c# - 如何从 decimal.GetBits() 的结果中取回十进制值

> ID：12596426
> 
> 赞同：0
> 
> 时间：2012-09-26T07:12:28.467
> 
> 标签：c#, .net

> **可能重复：**
> [如何在 C# 中将 System.Decimal 位转换为字符串？](https://stackoverflow.com/questions/5469505/how-to-convert-system-decimal-bits-to-string-in-c)

我从 decimal.GetBits() 得到 int[]。如何从 int[] 取回十进制值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:14:42.477

使用`Decimal(Int32[] bits)`构造函数。像这样：

```
Decimal d = new Decimal( 123 );
Int32[] bits = d.GetBits();
Decimal e = new Decimal( bits );
Debug.Assert( d == e ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:15:42.227

它可以像这样转换回来：

```
var decimal = new Decimal(decimalBitArray) 
```

请参阅[MSDN 十进制](http://msdn.microsoft.com/en-us/library/t1de0ya1.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:16:09.013

```
decimal dec = new decimal(decimalArray); 
```

# javascript - xhr.onerror 和 xhr.upload.onerror 之间的 xmlhttprequest(xhr) 对象区别

> ID：12596432
> 
> 赞同：3
> 
> 时间：2012-09-26T07:13:03.243
> 
> 标签：javascript, html, file-upload, xmlhttprequest

`xhr`这可能是一个非常明显的问题，但请解释和之间有什么区别`xhr.upload`？

我的用例是我正在将文件上传到服务器，但假设服务器出现故障。在这种情况下，我应该处理`xhr.onerror`还是`xhr.upload.onerror`

基本上，正如问题中提到的，何时使用 xhr 以及何时使用`xhr.upload`where`xhr = new XMLHttpRequest();`

另一个同样的新手问题，它与如何处理 GET 与 POST/PUT 有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:29:43.217

`xhr.onerror`当网络级别出现故障时触发。如果错误只存在于应用程序级别，例如，发送了一个 HTTP 错误代码，那么 onload 仍然会触发。您需要在 onreadystatuschange 处理程序中显式测试返回的状态代码。

当`xhr.upload.onerror`您尝试上传时发生火灾，这基本上是应用程序级功能，就像`xhr.upload.Onprogress`.

此上传始终取决于 ajax post 方法。

# rest - REST Web 服务 API：上传/更新报告模板

> ID：12596435
> 
> 赞同：3
> 
> 时间：2012-09-26T07:13:07.753
> 
> 标签：rest, jasper-reports, jasperserver

我想用我的代码存储和部署报告模板。

考虑到这一点，运行报告是一个两步过程：

*   上传或更新现有报告模板*jrxml*（它没有指向其他资源的链接，如图像）
*   用我的数据运行它（这个已经[完成](https://stackoverflow.com/questions/9538038/jasper-rest-api-run-a-report)）

官方文档不包含更新报告模板的最小示例

通过*JasperReports Server REST API*上传/更新报告模板*xml*的原始请求是什么？

 *我试过这种方式

这是我的[原始请求](http://pastebin.com/YxeGW2bA)

这是[回应](http://pastebin.com/UBXXhem3)

这是我在[/var/lib/tomcat6/webapps/jasperserver/WEB-INF/logs/jasperserver.log中看到的](http://pastebin.com/HcNqDK0X)

我究竟做错了什么？是什么`400 error: could not find the binary content for resource: /Reports/product_structures_workshops`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-12T14:20:30.367

这适用于 Jasper 5.5+（**但不适用于 5.1-**，只返回`404 Not Found`“未找到指定页面”）。

### 上传

```
POST http://your-host:port/jasperserver/rest_v2/resources/path/to/resource/

Content-Type: application.repository.reportUnit+json

{
    "label": "Sample",
    "jrxml": {
        "jrxmlFile": {
            "label": "MyJRXML",
            "type":"jrxml",
            // encode your file in Base64 and put here
            "content": "PD94bWwg..."
        }
    }
} 
```

### 更新

```
PUT http://your-host:port/jasperserver/rest_v2/resources/path/to/resource/myReport/

Content-Type: application.repository.reportUnit+json

{
    "label": "Sample",
    "jrxml": {
        "jrxmlFile": {
            "label": "MyJRXML",
            "type":"jrxml",
            // encode your file in Base64 and put here
            "content": "PD94bWwg..."
        }
    }
} 
```

参考：

*   [https://community.jaspersoft.com/questions/822949/example-creating-report-resource-rest-v2](https://community.jaspersoft.com/questions/822949/example-creating-report-resource-rest-v2)
*   [http://community.jaspersoft.com/sites/default/files/docs/jasperreports-server-web-services-guide.pdf](http://community.jaspersoft.com/sites/default/files/docs/jasperreports-server-web-services-guide.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T10:44:39.947

我们最终用 jasper 库编写了专有的本地 JAVA 应用程序，它做同样的事情

看起来这在较旧的 jasper 版本（> 5.2）中是可行的：

他们显着简化了 REST API（寻找 API v2）

[https://community.jaspersoft.com/wiki/getting-started-rest-web-service-api](https://community.jaspersoft.com/wiki/getting-started-rest-web-service-api)

> 随着 v2 REST API 的完成，Jaspersoft 宣布弃用原始 REST API 并终止 SOAP 服务*

# solr - 像 scop 一样的子字符串搜索能够找到范围

> ID：12596439
> 
> 赞同：1
> 
> 时间：2012-09-26T07:13:26.210
> 
> 标签：solr, sunspot-rails

我有这样的架构：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer type ="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="15" side="front"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

在我的模型中，我有以下内容：

```
searchable do   
    text :content
    text :title
    time :created_at
  end 
```

现在我正在尝试搜索可以是记录中的子字符串的单词。如果我将范围放在搜索字段中，我可以找到范围。

# ruby-on-rails - 通知 ala Facebook（数据库实现）

> ID：12596440
> 
> 赞同：4
> 
> 时间：2012-09-26T07:13:31.373
> 
> 标签：ruby-on-rails, database, facebook, database-design, notifications

我想知道 Facebook 如何实现他们的通知系统，因为我想做类似的事情。

*   FooBar 评论了您的状态
*   Red1、Green2 和 Blue3 对您的照片发表了评论
*   MegaMan 和其他 5 人评论了你的活动

我不能将多个通知写入单个记录，因为最终我将有与每个通知相关联的操作。此外，在视图中，当单个主题存在一定数量的通知时，我希望将通知呈现为可扩展列表。

*   FooBar 评论了您的状态（操作）
*   Red1、Green2 和 Pink5 对您的照片发表了评论 [+]
*   MegaMan 和其他 3 人评论了您的活动 [-]
    *   洛克人评论了你的活动（动作）
    *   ProtoMan 评论了您的活动（动作）
    *   巴斯评论了你的活动（行动）
    *   DrWilly 评论了您的活动（行动）

干杯!

**PS**我正在使用postgres和rails BTW。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T06:26:26.367

有很多方法可以实现这一点。这实际上取决于您要涵盖哪些类型的通知，以及您需要收集哪些有关通知的信息以将其显示给正确的用户。如果您正在寻找一个仅涵盖有关已发布评论的通知的简单设计，则可以使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)和[观察者回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#observers)的组合：

```
class Photo < ActiveRecord::Base
# or Status or Event
    has_many :comments, :as => :commentable
end

class Comment < ActiveRecord::Base
    belongs_to :commenter
    belongs_to :commentable, :polymorphic => true # the photo, status or event
end

class CommentNotification < ActiveRecord::Base
    belongs_to :comment
    belongs_to :target_user
end

class CommentObserver < ActiveRecord::Observer
    observe :comment

    def after_create(comment)
        ...
        CommentNotification.create!(comment_id: comment.id,
          target_user_id: comment.commentable.owner.id)
        ...
    end
end 
```

这里发生的是每张照片、状态、事件等都有很多评论。A`Comment`显然属于 a ，`:commenter`但也属于 a `:commentable`，它可以是照片、状态、事件或您希望允许评论的任何其他模型。然后，您将拥有一个`CommentObserver`可以观察您的模型并在表格`Comment`发生任何事情时执行某些操作。`Comment`在这种情况下，在`Comment`创建 a 之后，观察者将`CommentNotification`使用评论的 id 和拥有评论所涉及的事物的用户的 id 创建一个 ( `comment.commentable.owner.id`)。这将要求您`:owner`为要为其添加评论的每个模型实现一个简单的方法。因此，例如，如果评论是一张照片，那么所有者就是发布照片的用户。

这个基本设计应该足以让您入门，但请注意，如果您想为评论以外的内容创建通知，您可以通过在更通用的`Notification`模型中使用多态关联来扩展此设计。

```
class Notification < ActiveRecord::Base
    belongs_to :notifiable, :polymorphic => true
    belongs_to :target_user
end 
```

通过这种设计，您将“观察”所有`notifiables`（您想要为其创建通知的模型）并在`after_create`回调中执行以下操作：

```
class GenericObserver < ActiveRecord::Observer
    observe :comment, :like, :wall_post

    def after_create(notifiable)
        ...
        Notification.create!(notifiable_id: notifiable.id, 
                           notifiable_type: notifiable.class.name,
                            target_user_id: notifiable.user_to_notify.id)
        ...
    end
end 
```

这里唯一棘手的部分是`user_to_notify`方法。所有模型都`notifiable`必须以某种方式实现它，具体取决于模型是什么。例如，`wall_post.user_to_notify`只是墙的所有者，或者`like.user_to_notify`是“喜欢”的东西的所有者。您甚至可能要通知多个人，例如当有人评论照片时通知照片中所有标记的人。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:10:53.573

我决定将此作为另一个答案发布，因为第一个答案太长了。

要将评论通知呈现为您在示例中提到的可扩展列表，您首先收集具有某些目标用户通知的评论（不要忘记添加`has_one :notification`到`Comment`模型中）。

```
comments = Comment.joins(:notification).where(:notifications => { :target_user_id => current_user.id }) 
```

请注意，`joins`此处的使用会生成一个`INNER JOIN`，因此您可以正确排除任何没有通知的评论（因为某些通知可能已被用户删除）。

接下来，您希望按评论对这些评论进行分组，以便您可以为每个评论创建一个可展开的列表。

```
@comment_groups = comments.group_by { |c| "#{c.commentable_type}#{c.commentable_id}"} 
```

这将生成一个像

```
`{ 'Photo8' => [comment1, comment2, ...], 'Event3' => [comment1, ...], ... }` 
```

您现在可以在视图中使用它。

在`some_page_showing_comment_notifications.html.erb`

```
...
<ul>
  <% @comment_groups.each do |group, comments| %>
    <li>
      <%= render 'comment_group', :comments => comments, :group => group %>
    </li>
  <% end %>
</ul>
... 
```

在`_comment_group.html.erb`

```
<div>
  <% case comments.length %>
    <% when 1 %>
      <%= comments[0].commenter.name %> commented on your <%= comment[0].commentable_type.downcase %>.
    <% when 2 %>
      <%= comments[0].commenter.name %> and <%= comments[1].commenter.name %> commented on your <%= comment[0].commentable_type.downcase %>.
    <% when 3 %>
      <%= comments[0].commenter.name %>, <%= comments[1].commenter.name %> and <%= comments[2].commenter.name %> commented on your <%= comment[0].commentable_type.downcase %>
    <% else %>
      <%= render 'long_list_comments', :comments => comments, :group => group %>
  <% end %>
</div> 
```

在`_long_list_comments.html.erb`

```
<div>
  <%= comments[0].commenter.name %> and <%= comments.length-1 %> others commented on your <%= comments[0].commentable_type %>.
  <%= button_tag "+", class: "expand-comments-button", id: "#{group}-button" %>
</div>
<%= content_tag :ul, class: "expand-comments-list", id: "#{group}-list" do %>
  <li>
    <% comments.each do |comment| %>
      # render each comment in the same way as before
    <% end %>
  </li>
<% end %> 
```

最后，添加一些 javascript来`button.expand-comments-button`切换`display`. `ul.expand-comments-list`每个按钮和列表都有一个基于评论组键的唯一 ID，因此您可以让每个按钮展开正确的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:42:19.090

因此，在发布第二个答案之前，我做了一些事情，但有点太忙了，无法撰写并将其放在这里。而且我仍在研究我是否在这里做了正确的事情，它是否会扩展或整体表现如何。我想听听您对我实施此方法的所有想法、建议和评论。开始：

所以我首先将这些表创建为典型的多态表。

```
# migration
create_table :activities do |t|
  t.references :receiver
  t.references :user
  t.references :notifiable
  t.string :notifiable_type  # 
  t.string :type             # Type of notification like 'comment' or 'another type'
  ...
end

# user.rb
class User < ActiveRecord::Base
  has_many :notifications, :foreign_key => :receiver_id, :dependent => :destroy
end

# notification.rb
class Notification < ActiveRecord::Base
  belongs_to :receiver, :class_name => 'User'
  belongs_to :user
  belongs_to :notifiable, :polymorphic => true

  COMMENT = 'Comment'
  ANOTHER_TYPE = 'Another Type'
end 
```

所以就是这样。然后插入非常典型，就像用户执行某种类型的通知时一样。因此，我为 psql 发现的新功能是[ARRAY_AGG](http://www.postgresql.org/docs/8.4/static/functions-aggregate.html)，它是一个聚合函数，可将某个字段分组为一个新字段作为数组（但当它到达 rails 时为字符串）。所以我现在如何获取记录是这样的：

```
# notification.rb

scope :aggregated,
  select('type, notifiable_id, notifiable_type,
    DATE(notifications.created_at),
    COUNT(notifications.id) AS count,
    ARRAY_AGG(users.name) AS user_names,
    ARRAY_AGG(users.image) as user_images,
    ARRAY_AGG(id) as ids').
  group('type, notifiable_id, notifiable_type, DATE(notifications.created_at)').
  order('DATE(notifications.created_at) DESC').
  joins(:user) 
```

这会输出如下内容：

```
type     | notifiable_id | notifiable_type | date | count | user_names                     | user_images                  | id
"Comment"| 3             | "Status"        |[date]| 3     | "['first', 'second', 'third']" |"['path1', 'path2', 'path3']" |"[1, 2, 3]" 
```

然后在我的通知模型中，我有这个方法基本上只是将它们放回数组并删除非唯一的（这样一个名称就不会在某个聚合通知中显示两次）：

```
# notification.rb

def array_of_aggregated_users
  self.user_names[1..-2].split(',').uniq
end

def array_of_aggregated_user_images
  self.user_images[1..-2].split(',').uniq
end 
```

然后在我看来我有这样的事情

```
# index.html.erb
<% @aggregated_notifications.each do |agg_notif| %>
  <% 
    all_names = agg_notif.array_of_aggregated_users
    all_images = agg_notif.array_of_aggregated_user_images
  %>

  <img src="<%= all_images[0] %>" />

  <% if all_names.length == 1 %>
    <%= all_names[0] %>
  <% elsif all_names.length == 2 %>
    <%= all_names[0] %> and <%= all_names[1] %>
  <% elsif all_names.length == 3 %>
    <%= all_names[0] %>, <%= all_names[1] %> and <%= all_names[2] %>
  <% else %>
    <%= all_names[0] %> and <%= all_names.length - 1 %> others
  <% end %>

  <%= agg_notif.type %> on your <%= agg_notif.notifiable_type %>

  <% if agg_notif.count > 1 %>
    <%= set_collapsible_link # [-/+] %>
  <% else %>
    <%= set_actions(ids[0]) %>
  <% end %>
<% end %> 
```

# java-me - 如何检查 LWUITList 是否包含值？

> ID：12596441
> 
> 赞同：1
> 
> 时间：2012-09-26T07:13:36.647
> 
> 标签：java-me, lwuit

我已经创建了 LWUIT 选项卡，当用户单击任何选项卡时，我想执行一些逻辑，逻辑**输出将是一些项目列表**，但问题是当用户再次单击选项卡时。我的标签相关逻辑正在持续执行。我想停止这种情况，因为我想放置 if 条件，这应该检查我的列表是否包含值，任何人都可以使用我需要使用的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:30:58.963

```
myList.getModel().getSize() > 0 
```

# java - 如何更新 HashMap 中键的值？

> ID：12596453
> 
> 赞同：1
> 
> 时间：2012-09-26T07:14:07.267
> 
> 标签：java, collections, hashmap

我有这样的HashMap，

```
HashMap<String,Set<String>> map = new HashMap<String,Set<String>>(); 
```

我正在尝试在添加元素之前`map`做

1.  想检查是否`key`存在，我可以使用`map.containsKey()`.
2.  如果密钥存在，我想检查`Set`相应密钥的大小。
3.  如果`size <= 1` 我想在该集合中添加一个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:17:41.587

听起来像这样：

```
HashMap<String,Set<String>> map = new HashMap<String,Set<String>>();

Set<String> value = map.get("key");
if(value != null) {        
    if(value.size() <= 1) {
        value.add("some value");
    }
} else {
    map.put("key", new HashSet<String>());
} 
```

现在，要么最后一点措辞不当（即你想更新与键关联的集合），要么你真的想更新键本身，在这种情况下你可能只需要删除它并添加一个新条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T07:24:46.997

我不会使用 containsKey 和 get ，因为这意味着当您只需要一个时会进行两次查找。

```
private final Map<String,Set<String>> map = new HashMap<String,Set<String>>();

Set<String> set = map.get(key);
if(set != null && set.size() <= 1) 
    set.add(some$value); 
```

唯一的问题是`null`除非您将其设置在某处，否则该值将始终为，因此您可能想要的是

```
private final Map<String,Set<String>> map = new HashMap<String,Set<String>>();

Set<String> set = map.get(key);
if(value != null)
    map.put(key, set = new HashSet<String>());
if (set.size() <= 1) 
    set.add(some$value); 
```

最大大小为 2 的集合是不寻常的。这有什么原因吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:19:15.783

您可以使用 map.get(String key) 从地图中获取集合。

然后测试Set的大小。如果需要，添加您的元素。

现在您可以简单地使用 map.remove(String key) 从地图中删除旧集，然后使用 put(String, Set); 重新插入它。

# gwt - 在 Google Web Toolkit (GWT) 中实现页眉、页脚和菜单栏

> ID：12596454
> 
> 赞同：0
> 
> 时间：2012-09-26T07:14:10.373
> 
> 标签：gwt

我刚开始学习 Google Web Toolkit (GWT)。如何在我的 GWT 应用程序中实现页眉、左侧导航栏和页脚？

如何将页眉和页脚放在一个页面中并在所有其他页面中重复使用？

请帮助我如何实现上述要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:26:56.340

我喜欢使用[SplitLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/SplitLayoutPanel.html)。在这里，您基本上只会更改中心面板，而不要理会西北等。[你可以在这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)找到一个很好的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:24:12.780

您可以使用基本布局在 Ui:Binder 中创建模板，并将此模板用于所有新页面。

另一种选择是为您的菜单、页眉和页脚创建自定义小部件。然后您再次可以为新页面使用模板，但您只需包含自定义 headerWidget、footerWidget 和 menuWidget，而不是包含每个按钮、标签等。

正如其他人已经建议的那样，您使用其中一个 LayoutPanel 来组织您的页面。我最喜欢的是布局面板。您将 headerWidget、footerWidget 和 menuWidget 添加到此 LayoutPanel 并指定它们的位置。

我建议您为此使用 Ui:Binder：这是一种更方便的布局方式，非常直观（有助于减少错误数量），并且更易于维护。

# c# - 具有预定偏移/旋转的分层精灵

> ID：12596458
> 
> 赞同：3
> 
> 时间：2012-09-26T07:14:18.267
> 
> 标签：c#, xna, sprite, xna-4.0

可能不是一个描述性很强的标题，但我正在尽力而为。这是我第一次在 StackOverflow 上发帖，而且我对 C# 编程还比较陌生（大约一年前开始使用 Unity，几天前决定升级到 XNA）。话虽如此，请对我好一点。

我正在计划我正在设计的 2D 游戏的机制，虽然在 XNA 中玩过之后大部分看起来都很简单，但我一直在回想一个问题，我还没有想出一个令人满意的答案为了。该问题涉及将精灵分层为复合/复杂精灵。例如，游戏中的角色可能使用任意数量的武器中的一种或两种。我确实对该主题进行了一些研究，发现有些人建议使用 RenderTarget 类将一系列精灵绘制为一个，而有些人建议在 Draw() 期间简单地将精灵绘制在彼此之上。然而，这些主题主要集中在游戏中具有单个角色的相对简单的案例上。

就我而言，游戏将有许多基于精灵的角色，他们具有完全不同的姿势/动画。现在大约有 10 个，以后可能会在开发中添加更多。同样会有大量的武器（可能开始时大约 20 个）将被合成到角色身上。这让我很舒服。然而，问题在于每个角色都需要在角色动画的每一帧期间将武器精灵绘制在不同的位置并使用不同的旋转。

我已经考虑了几种方法来解决这个问题，但它们都有相当大的缺点。
第一个是简单地为每个角色绘制每个武器的 spritesheet，与相应角色的大小相同。这种方法的好处是只需添加调用即可在基本角色之上绘制额外的精灵，而无需进行任何计算。不利的一面是会产生过多的额外精灵表（10 个字符 x 20 个武器需要 200 个额外的表）。

第二个是创建一个类来处理武器精灵。WeaponSprite 类将附加到每个武器的单个纹理上，然后根据附加到的角色存储有关绘制时要使用的偏移/旋转的信息。这样做的问题是，在每帧的基础上组织偏移/旋转将非常乏味，而且我想不出任何简单的方法来根据所需的帧提取信息。（我的想法是制作一个 AnimationFrame 类来跟踪每个角色的动画名称、朝向和帧数，然后使用武器类中的字典根据当前帧的名称加载适当的数据，但这个想法的某些方面似乎真的很糟糕）。这种方法还有一个缺点是需要相对大量的内存来完成（假设 Vector2 是 8 字节，浮点数是 4，考虑到当前使用的帧数，有 10 个字符和 20 个武器将需要 192KB 的内存，随着更多武器的加入，它只会变得更大）。我有这个想法的一个分支（我从关于同一主题的另一篇文章中偷来的）使用保留的 alpha 值像素来链接每个武器的偏移量和“原点”，在运行时计算位置，然后只需将旋转浮点数存储在上述字典中。随着更多武器的加入，它只会变得更大）。我有这个想法的一个分支（我从关于同一主题的另一篇文章中偷来的）使用保留的 alpha 值像素来链接每个武器的偏移量和“原点”，在运行时计算位置，然后只需将旋转浮点数存储在上述字典中。随着更多武器的加入，它只会变得更大）。我有这个想法的一个分支（我从关于同一主题的另一篇文章中偷来的）使用保留的 alpha 值像素来链接每个武器的偏移量和“原点”，在运行时计算位置，然后只需将旋转浮点数存储在上述字典中。

由于我是 XNA 的新手（并且在 C# 上仍然很年轻），我想我会发布并让专家参与进来。我的方法是否走在正确的轨道上，还是我错过了一些非常简单的东西？非常感谢您的帮助，如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:30:20.833

哇，大问题。我不能真正告诉你如何实现这一点。但我可以给你一些有用的建议：

**建议#0：**每当出现任何类型的合成问题时，人们都会从木制品中脱颖而出，推荐“渲染目标”作为某种合成灵丹妙药。他们通常是错误的。如果可以，请避免使用渲染目标。只有在对最终的合成图像（混合、模糊等）进行效果处理时才需要它们。否则，只需将您的精灵直接绘制到后台缓冲区。

**建议 #1：**如果可能，您希望将***所有***精灵打包到单个精灵表中。如果超出纹理大小限制，则必须巧妙地在工作表之间划分精灵。原因是性能 - 您想限制纹理交换的数量 -[有关详细信息，请参阅此答案](https://gamedev.stackexchange.com/a/9289/288)。

您也许可以为 XNA 使用现有的 sprite-packer。如果你能找到合适的，我建议你使用它。一个好的将允许您像在调用时处理纹理一样处理打包的精灵`SpriteBatch.Draw`。

**建议 #2：**不要担心定位数据在运行时占用多少空间。192kb 几乎没有 - 一个小纹理的大小。

这样做的结果和 #1 是尽可能多地存储在您的定位元数据中，并避免重复的纹理。

*您如何*存储元数据几乎无关紧要。

**建议 3：**您可以将存储需求和内容创建故事从**n × m**问题更改为**n + m**问题（n 个字符和 m 个武器）。只需存储仅具有“起源”的武器，并存储具有“起源”和“手位置和旋转”的角色。简单地渲染，使武器的起源与角色的手对齐（数学很简单）。

然后你可以添加角色而不用担心存在什么武器，添加武器而不用担心存在什么角色。

这是需要多少空间的示例：10 个字符 × 20 个字节 + 20 个武器 × 8 个字节 = 360 个字节。又好又小！（虽然你可能需要更多的附着点——不同类型的武器、帽子等等。编辑：哎呀我没有包括动画帧——但它仍然是相对少量的数据。）

**建议#4：**正如您在帖子中暗示的那样，最棘手的部分是内容创建。

正如您所暗示的，理想情况下，您希望能够直接在图像编辑器中编辑附件点。这是一个令人信服的想法。仅当您的精灵没有抗锯齿时，特殊的 alpha 值才适用。从理论上讲，您可以使用图层和不同的颜色来做一些事情。最难的部分是弄清楚如何编码旋转。

您可以使用 XNA 内容管道处理器在构建时从图像中提取数据。**然而**，这实现起来非常昂贵（特别是如果您以前没有这样做过 - 内容管道的文档严重不足）。除非您的艺术需求确实非常巨大，否则几乎可以肯定不值得花费额外的开发时间来扩展内容管道。完成后，您可能已经多次手动编码定位数据。

因此，我的建议是将额外数据存储在易于编辑的 XML 文件中。我推荐使用 XNA 的 XML Content Importer。[一开始掌握格式](https://gamedev.stackexchange.com/a/11241/288)可能会很棘手，您必须记住包含适当的[程序集引用](https://stackoverflow.com/a/12257534/165500)。但是一旦您知道如何使用它，这是将结构化数据快速导入 XNA 的最简单方法。

# android - 默认设置启动器图标

> ID：12596462
> 
> 赞同：8
> 
> 时间：2012-09-26T07:14:34.307
> 
> 标签：android

我试图在**\android-sdk\platforms\android-10\data\res\drawable-mdpi** \下找到用于设置应用程序启动器的默认图标时不知所措

这个图标有什么名字？我可以在我的应用程序中使用它吗？这里是：

*   2.2：

![2.2](../Images/4649e09608656e0c38882abda54a635b.png)

*   4.0：

![4.0](../Images/d9e0c31fd2865ca9c1a3329da406b3a6.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T08:12:27.130

如果您正在为您的应用寻找“设置”按钮，您可以使用 .xml 在 xml 中包含系统图标`@android:drawable/ic_menu_preferences`。它不会为您提供上面包含的漂亮的彩色版本，但会在您的菜单或 ActionBar 中创建一个完美的设置图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T10:14:15.203

我描述了您可以在此处检索手机/平板电脑上安装的每个应用程序的全分辨率图标的方法：[在 Android 中获取应用程序图标](https://stackoverflow.com/questions/4600740/getting-app-icon-in-android/16279240#16279240)。

所以你只需要找到这个应用程序的包名。

它不像从android资源中检索标准的android图标那么简单，但是它可以帮助你。

# vb.net - 如何在 vb.net 中读取 excel 文件后释放它

> ID：12596464
> 
> 赞同：2
> 
> 时间：2012-09-26T07:14:39.207
> 
> 标签：vb.net, excel, file, dispose

以下代码是打开 excel 文件并从中读取，我想处理 excel 文件以便能够删除它：

```
 Dim strNewPath As String = Server.MapPath("~/UploadedExcel/" & strFileName & strFileType)

        'Connection String to Excel Workbook
        If strFileType.Trim = ".xls" Then
            connString2 = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strNewPath & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=2"""
        ElseIf strFileType.Trim = ".xlsx" Then
            connString2 = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strNewPath & ";Extended Properties=""Excel 12.0;HDR=Yes;IMEX=2"""
        End If
        query = "SELECT * FROM [Sheet1$]"

        'Create the connection object 
        conn2 = New OleDbConnection(connString2)
        'Open connection
        If conn2.State = ConnectionState.Closed Then conn2.Open()
        'Create the command object
        cmd = New OleDbCommand(query, conn2)
        da = New OleDbDataAdapter(cmd)
        ds = New DataSet()
        da.Fill(ds, "Staff")

        '    up.insertExcel(ds)

        da.Dispose() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:38:28.143

您应该使用[`Using-Statement`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)实现的所有内容`IDisposable`：

```
Using conn2 = New OleDbConnection(connString2)
    conn2.Open()
    Using  cmd = New OleDbCommand(query, conn2)
        Using da = New OleDbDataAdapter(cmd)
            ds = New DataSet()
            da.Fill(ds, "Staff")
        End Using
    End Using
End Using 
```

这确保了对象被释放（即使在异常的情况下）。`Dispose`也隐式地关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:21:35.803

请注意，Command 和 Connection 类也实现 IDisposable 接口。您应该使用“使用”块或 try/finally 语句。在 finally 块中，您必须处理您的对象，即使在出现一些异常的情况下也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:22:49.730

您拨打电话失败：

```
conn2.Close(); 
```

（或等价物`conn2.Dispose()`）

您应该通过包装一个[`Using`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)语句来执行此操作，以便即使引发异常也将其关闭：

```
Using conn2 = New OleDbConnection(...)

    ...

End Using ' conn2 is automatically disposed / closed here 
```

# bash - 为什么这个模式匹配 `ab`，而不匹配 `ba`？

> ID：12596468
> 
> 赞同：8
> 
> 时间：2012-09-26T07:15:01.557
> 
> 标签：bash, pattern-matching

我在 bash 中摆弄了[扩展的 globbing](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)，但是 inverse matcher 有一些奇怪的地方`!(PATTERN)`。考虑以下示例

```
$ touch ab ba
$ shopt -s extglob

$ echo *a*
ab ba
$ echo !(a)*a*
ab ba
$ echo *a*!(a)
ab 
```

现在它看起来像`!()`匹配空字符串，但为什么不`*a*!(a)`匹配`ba`？

我假设在第二个例子`ab`中是这样匹配的

```
!(a) ->  ""
*    ->  ""
a    ->  "a"
*    ->  "b" 
```

这反过来会建议`ba`在第三种情况下匹配

```
*    ->  "b"
a    ->  "a"
*    ->  ""
!(a) ->  "" 
```

但看起来这不起作用。

即使考虑到贪婪，这对我来说也没有任何意义。我错过了什么？

编辑：
我在`GNU bash, Version 4.1.7(2)-release (i386-apple-darwin10.4.0)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:50:22.023

这确实很奇怪。我可以重现你的行为。奇怪的是角色的`*`背后`a`。当我执行您的代码时：

```
$ echo *a*!(a)
ab 
```

……和你描述的一样。但是如果我跳过那一秒`*`，它会匹配两个文件

```
$ echo *a!(a)
ab ba 
```

这意味着您的匹配元素应该是正确的。问题是，为什么第二个星号与第一个示例中的空字符串不匹配。正如文档所说，它应该匹配空字符串，但似乎这不能正常工作。

也许我们的 bash 版本与文档不匹配？

```
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:22:39.010

这有效：（）添加以消除歧义

```
echo @(*a*)!(a)
echo !(a)@(*a*) 
```

奇怪 : `*a*!(a)c`，匹配`abc`和`bac`（这是正常行为）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:23:37.467

这是[Bash 中的一个错误](https://groups.google.com/d/topic/gnu.bash.bug/KkQNOi8F7q4/discussion)

> *Chet Ramey 写了*
> [...] 并将在下一个版本中修复。

# sql-server - 更新语法

> ID：12596475
> 
> 赞同：1
> 
> 时间：2012-09-26T07:15:43.397
> 
> 标签：sql-server

我有以下情况：

表是`_etblpricelistprices`

列如下：

```
iPriceListNameID    iPricelistNameID   iStockID   fExclPrice

1                   1                  1           10
2                   2                  1           20
3                   3                  1           30
4                   4                  1           40
5                   5                  1           100
6                   6                  1           200
7                   7                  1           300
8                   8                  1           400
9                   1                  2           1000
10                  2                  2           2000
11                  3                  2           3000
12                  4                  2           4000
13                  5                  2           50
14                  6                  2           40
15                  7                  2           30
16                  8                  2           20 
```

这里只有两个库存项目，但在数据库中更多。第一列是自动递增的 PK。第二列是`Pricelist`. `pricelist`拆分如下。(1-4) 是当前定价，(5-8) 是未来定价。第三列是库存商品的 ID，第四列是商品的定价。

我需要一个脚本来更新此表，以交换每件商品的未来和当前定价。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:49:09.937

观察，如果你愿意，交换`iPricelistNameID`值将实现与交换值*相同*的整体效果`fExclPrice`，并且可以使用公式执行：

```
UPDATE _etblpricelistprices
SET
    iPricelistNameID = CASE
                WHEN iPricelistNameID > 4 THEN iPricelistNameID - 4
                ELSE iPricelistNameID + 4
    END 
```

# iphone - 我的应用程序的更新是否应该与 iPhone 5 屏幕兼容？

> ID：12596476
> 
> 赞同：1
> 
> 时间：2012-09-26T07:15:49.067
> 
> 标签：iphone, app-store, ios6, appstore-approval

我对我的旧应用程序进行了一些小改动。现在，我将在 App Store 上更新一个较新的版本。但它不支持 iOS 6 或 iPhone 5 屏幕。

我明白了，我必须支持 iOS 6。但我是否也应该更新 iPhone 5 屏幕的应用程序？我现在不考虑支持 iPhone 5 屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:04:50.690

应用程序不需要支持 iOS6 的新未来，如 iPhone5 的所谓“GiraffeMode”。

# regex - 在 perl 中编写正则表达式来比较 java 中的方法定义

> ID：12596478
> 
> 赞同：0
> 
> 时间：2012-09-26T07:15:55.817
> 
> 标签：regex, perl, regex-negation

我想比较方法定义，如：

```
1\. static void main(String[] args){

2\. static void main(String[] args)
{
3\. int sum()
4\. int abc(int a,int b){ 
```

我只有方法的名称，并且一次读取一行文件。

正则表达式不应比较方法调用，例如：

```
sum();
OBJ.abc(1,2); 
```

我写了一个不工作的正则表达式：

```
$srcLine =~ m/$methodName[\([A-Z]*[a-z]*[0-9]*\s*[,]*\(*\)*\)]*/) 
```

我在这一行遇到编译错误。

**编辑**

```
$srcLine =~ m/$methodName\((?!~)+\)/ 
```

这是另一个正则表达式，我将它与“methodName('除了 ~') 进行比较

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:46:02.027

我不确定您的模式应该有多严格，但我可以向您解释正则表达式中的问题。

1.  `$srcLine =~ m/$methodName[\([A-Z]*[a-z]*[0-9]*\s*[,]*\(*\)*\)]*/)`

    使用方括号，您正在创建一个字符类，并且您不能混合使用它们。所以我假设你想要一个小组，所以

    ```
    $srcLine =~ m/$methodName(?:\([A-Z]*[a-z]*[0-9]*\s*[,]*\(*\)*\))*/) 
    ```

    会更接近您的要求。我不确定这`[,]*`部分，这意味着匹配文字“，”0次或更多次，这可能不是你想要的。

2.  `$srcLine =~ m/$methodName\((?!~)+\)/`

    您不能重复零宽度断言（`(?!~)+`部分）。如果您想说匹配某个字符以外的任何内容，请使用否定字符类。

    ```
    $srcLine =~ m/$methodName\([^~]+\)/ 
    ```

    请注意，这将匹配到最后找到的右括号。

# ruby-on-rails - 来自 Ruby on Rails 控制器的 Watir

> ID：12596479
> 
> 赞同：1
> 
> 时间：2012-09-26T07:15:59.233
> 
> 标签：ruby-on-rails, watir, watir-webdriver

我需要从 Ruby on Rails 框架运行 Watir 测试代码。我的 ruby​​ on rails hello world 运行良好，我的 Watir 测试也是如此（当我从 irb 运行并作为单独的 ruby​​ 脚本运行时），但我的要求是从 rails 控制器中调用 watir 代码，这给出了一个无法加载 Watir 错误。

这个要求很紧急，我不知道错误是什么。

注意：rails 应用程序在 netbeans 6.9 IDE 上运行，并使用系统中的原生 ruby​​ 解释器（不是默认的 jruby）

我有以下版本： ruby​​：1.9.3 watir：3.0.0 Rails：3.2.8

```
LoadError (cannot load such file -- Watir):
  app/controllers/watir_controller.rb:4:in `<class:WatirController>'
  app/controllers/watir_controller.rb:1:in `<top (required)>' 
```

这是我调用 watir 脚本的控制器类：

```
class WatirController < ApplicationController

## the Watir controller
require 'rubygems'
require 'watir'
# set a variable
test_site = "http://www.google.com"
# open the IE browser
ie = Watir::IE.new
# print some comments
puts "Beginning of test: Google search."
puts " Step 1: go to the test site: " + test_site
ie.goto test_site
puts " Step 2: enter 'pickaxe' in the search text field."
ie.text_field(:name, "q").set "pickaxe" # "q" is the name of the search field
#puts " Step 3: click the 'Google Search' button."
ie.button(:name, "btnG").click # "btnG" is the name of the Search button
puts " Expected Result:"
puts "  A Google page with results should be shown. 'Programming Ruby' should be high on the list."
puts " Actual Result:"
if ie.text.include? "Programming Ruby"
  puts "  Test Passed. Found the test string: 'Programming Ruby'. Actual Results match Expected Results."
else
  puts "  Test Failed! Could not find: 'Programming Ruby'."
end
puts "End of test: Google search."
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:05:39.627

我不明白为什么需要在 Rails 控制器中使用 Watir？

Watir 用于浏览器自动化测试，这意味着您应该将其放入您的 test/spec 目录，并将 watir 放入 Gemfile 到开发和测试组中，如下所示：

```
group :development, :test do
  gem "watir"
end 
```

由于您使用的是 Rails，并且您可能会测试用 Rails 编写的应用程序，所以我也建议使用[watir-rails](https://github.com/watir/watir-rails)。此外，如果您使用的是[RSpec](https://github.com/rspec/rspec)，请使用[watir-rspec](https://github.com/watir/watir-rspec)。这意味着您的 Gemfile 应如下所示：

```
group :development, :test do
  gem "watir-rails"
  gem "watir-rspec"
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-20T01:56:18.167

您必须将其包含在您的 gem 文件中。

宝石文件

```
gem 'watir' 
```

控制器

```
class MyApp::WebCrawlerController
    require "watir"
    require "nokogiri"

    def index
      browser = Watir::Browser.new
      browser.goto 'http://www.google.com'
      doc = Nokogiri::HTML.parse(browser.html)
    end
end 
```

# android - 通过Android中的通知栏复制粘贴

> ID：12596482
> 
> 赞同：1
> 
> 时间：2012-09-26T07:16:06.523
> 
> 标签：android, notifications, copy-paste, android-notification-bar

你见过像 Lastpass 这样的密码管理器吗？它们允许您通过 Android 中的通知栏复制粘贴。通常，顺序是这样的..

1.  Lastpass 中的用户按下一个按钮，在通知栏中放置两个通知。
2.  用户切换到任何其他应用程序，比如浏览器，以及当他必须插入用户名和密码时
3.  他打开通知栏，从 Lastpass 中选择通知，将用户名或密码粘贴到浏览器的文本字段中。

任何人都可以将其分解为步骤并指导我如何实现这种结构......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:30:41.913

第 1 步：提出 a `Notification`，用 a`getBroadcast()` `PendingIntent`指向`BroadcastReceiver`你的 a 。

第 2 步：在其中`BroadcastReceiver`，使用 .将数据复制到剪贴板`ClipboardManager`。

# android - 在android中设置OnClickListener时出错

> ID：12596488
> 
> 赞同：0
> 
> 时间：2012-09-26T07:16:29.730
> 
> 标签：android

我是 android 的初学者，我编写了以下简单的程序，它只显示了我在 TextView 上按下的按钮的文本（我总是遇到运行时错误）：

```
package com.hmz.secondapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class AppPageActivity extends Activity {

    Button btnPlus;
    Button btnMinus;
    Button btnMul;
    Button btnDiv;

    TextView resultTextView;

    View.OnClickListener operations = new View.OnClickListener() {
        public void onClick(View v) {

            Button pressedButton = (Button) v;

            String buttonLabel = pressedButton.getText().toString();

            resultTextView.setText(buttonLabel);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.app_page);

        btnPlus.setOnClickListener(operations);
        btnMinus.setOnClickListener(operations);
        btnMul.setOnClickListener(operations);
        btnDiv.setOnClickListener(operations);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.app_page, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:19:18.933

您的 btnPlus 对象为空。您需要在 onCreate 方法中实例化它，例如

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.app_page);

    btnPlus  = (Button)findViewById(R.id.YOUR_BUTTON_ID);
    btnMinus = (Button)findViewById(R.id.YOUR_BUTTON_ID);
    btnMul   = (Button)findViewById(R.id.YOUR_BUTTON_ID);
    btnDiv   = (Button)findViewById(R.id.YOUR_BUTTON_ID);

    btnPlus.setOnClickListener(operations);
    btnMinus.setOnClickListener(operations);
    btnMul.setOnClickListener(operations);
    btnDiv.setOnClickListener(operations);
} 
```

在使用 setText 方法之前还要实例化 resultTextView 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:24:27.477

从您的代码来看，问题似乎是您没有初始化按钮（btnPlus、btnMinus、btnMul、btnDiv）和 TextView resultTextView。

```
btnPlus        = (Button)findViewById(Button Id);
btnMinus       = (Button)findViewById(Button Id);
btnMul         = (Button)findViewById(Button Id);
btnDiv         = (Button)findViewById(Button Id);
resultTextView = (Button)findViewById(TextView Id); 
```

首先初始化这些视图，然后您可以对这些视图应用任何操作，例如单击事件和设置文本。

# android - 如何在 Adob e Flash Builder 中为该计算标签的答案返回 1 位小数

> ID：12596489
> 
> 赞同：0
> 
> 时间：2012-09-26T07:16:35.753
> 
> 标签：android, adobe, flash-builder, decimal

我正在为 Android 应用程序在 Adob​​e Flash Builder 中编写代码。我已经编写了代码来做一些数学运算并将答案返回到标签字段。我想知道如何返回此答案以仅显示小数点后的 1 个位置。这是代码

```
lblAnswer.text = String(Number ((sldrABSL.value) + 46.7)/28.7); 
```

如果有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:58:38.263

如果我理解正确，您有一个代表数字的字符串，您希望只显示一位小数。

首先，您必须将字符串的数值转换为双精度：

```
String stringOfNumber = "100.1233123";
Double number = Double.valueOf(stringOfNumber); 
```

其次，您必须确定表示双精度（小数位数）的格式：

```
DecimalFormat oneDigit = new DecimalFormat("#,##0.0"); 
```

将数字设置为（即）TextView：

```
myTextView.setText("" + oneDigit.format(number)); 
```

我认为这应该有效。你问的是这种吗？

编辑：对于如何将其设置为 textview 并不确定，但在 java 中，将其打印到屏幕上的工作方式如下：

```
System.out.println(oneDigit.format(number)); 
```

Edit2：哦，你需要这个导入：

```
import java.text.DecimalFormat; 
```

编辑3：

```
TextView.setText("" + oneDigit.format(number)); 
```

对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:38:40.540

小数位使用 tofixed 属性。它必须添加在需要包含小数位的指定数字的末尾。

```
 'lblAnswer.text = String(Number ((sldrABSL.value) + 46.7)/28.7).toFixed(1); 
```

一个指定使用的小数位数。

# silverlight - 如何在 Silverlight 中为控件设置设计时大小和位置

> ID：12596496
> 
> 赞同：0
> 
> 时间：2012-09-26T07:16:58.343
> 
> 标签：silverlight, binding, design-time

我想知道是否有一种简单的方法可以为 Silverlight 中的控件设置设计时大小和位置。

例如，`TextBlock`画布上有一个`LayoutRoot`. 我想设置`TextBlock`的设计时间`Width`, `Height`, `Canvas.Left`, 和`Canvas.Top`. （注意：运行时`Width`、`Height`、`Canvas.Left`和`Canvas.Top`将与 XAML 中的动态属性绑定（不在代码中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:29:20.457

您可以指定 DesignHeight 和 DesignWidth 属性。但据我所知，其他的都不可能。

要获取宽度和高度，请确保引入了设计属性的 xmlns

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
```

然后，您可以像这样使用它。

```
<TextBox d:DesignWidth="250" d:DesignHeight="75" /> 
```

希望有帮助！

# javascript - 下一个功能第一次不起作用

> ID：12596497
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:17:04.107
> 
> 标签：javascript, html, function

这是我面临问题的[代码。](http://studio.html5rocks.com/#Deck)

让我简单地解释一下这个问题。html 代码包含许多幻灯片，因此当按下箭头键和鼠标滚动时，幻灯片会前后移动。

问题是第一次按下箭头键时，其中的下一个功能不起作用。

但是当我使用滚动时，下一个功能开始执行，然后当我单击左箭头时它可以工作。

但它不是第一次工作。什么问题。？我该如何解决？

这是下一个功能：

```
next: function() {
            if (!this._slides[this.current-1].buildNext()) {
              this.current = Math.min(this.current + 1, this._slides.length);
              this._update();
            } 
```

这是调用它的代码：

```
handleWheel: function(e) {
            var delta = 0;
            if (e.wheelDelta) {
              delta = e.wheelDelta/120;
              if (isOpera) {
                delta = -delta;
              }
            } else if (e.detail) {
              delta = -e.detail/3;
            }

            if (delta > 0 ) {
              this.prev();
              return;
            }
            if (delta < 0 ) {
              this.next();
              return;
            }
          },
          handleKeys: function(e) {
            if (/^(input|textarea)$/i.test(e.target.nodeName) ||
                e.target.isContentEditable) {
              return;
            }
            switch (e.keyCode) {
              //case 37: // left arrow
                //this.prev(); break;
              case 39: // right arrow
              case 32: // space
                this.next(); break;
              case 50: // 2
                this.showNotes(); break;
              case 51: // 3
                this.switch3D(); break;
            }
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:02:45.010

这是如果条件是问题的代码

```
 next: function() {
                if (!this._slides[this.current-1].buildNext()) {
                  this.current = Math.min(this.current + 1, this._slides.length);
                  this._update();
                }
} 
```

这是编辑后的代码，效果很好

```
next: function() {

              this.current = Math.min(this.current + 1, this._slides.length);
              this._update();
            } 
```

# c# - 在列表视图中选择一行

> ID：12596500
> 
> 赞同：6
> 
> 时间：2012-09-26T07:17:12.740
> 
> 标签：c#, .net, listview

我是 Web 开发人员，从事我在 WinForms 中开发的项目的一部分。所以我的问题可能是一个基本的问题。试着忍受它。

我的页面上有两个列表视图和一个适用于两者的删除按钮。

问题。

1.  当我运行我的程序时，我无法在两个列表视图中选择一行，可能需要一些属性吗？
2.  如果我能够选择我想要检测选择了哪个列表视图项的行，那么我该怎么做呢？
3.  我有三列，并使用下面的代码绑定了数据。

    ```
     listView1.Columns.Add("ID",20);
        listView1.Columns.Add("Name",40);
        listView1.Columns.Add("Mobile",40);

        foreach (var item in dataList)
        {
            newItem = new ListViewItem();
            newItem.SubItems.Add(item.ID.ToString());
            newItem.SubItems.Add(item.Name);
            newItem.SubItems.Add(item.Mobile.ToString());
            listView1.Items.Add(newItem);   
        } 
    ```

但该`ID`列留空，数据开始在这些意义上绑定。

```
ID Name Mobile
   1    abc
   2    xyz 
```

那么如何正确显示数据呢？

4.  最后我想用我的`ID`专栏来删除数据。因此，如果我给出`width=0`，这是隐藏列的最佳方式吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T07:33:15.557

1.  请参阅[ListView.FullRowSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.fullrowselect.aspx)属性。
2.  请参阅[ListView.SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems.aspx)属性。请注意，默认情况下`ListView`允许多选。
3.  通过 constructor: 设置项目文本`newItem = new ListViewItem(item.ID.ToString());`，然后添加其余的子项目（除了`item.ID`）。
4.  如果要删除列，只需将其从列集合中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T00:07:54.140

设置 listView1.Items[index].Selected=true;

# ms-access - 如何锁定设计视图？

> ID：12596501
> 
> 赞同：3
> 
> 时间：2012-09-26T07:17:16.753
> 
> 标签：ms-access, ms-access-2007

如何在 Microsoft Access 数据库中锁定表单等的设计视图，以便我提供此信息的人无法编辑项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:17:16.753

您可以锁定您的 Access 表单，使设计视图不再可见，并且可选地，数据表视图等也不再可见。

锁定您的数据库还有一个好处，它可以编译（例如加密）任何 VBA 以防窥探......很有用！

首先，您需要决定是*只*锁定设计视图，还是锁定所有其他视图。*如果*您只想锁定设计视图，请直接跳到第 6 步。

*如果您的项目与以前版本的 Access 不向后兼容，则对 MDB 文件的任何引用都将显示为 ACCDB 文件。对 MDE 文件的任何引用都将显示为 ACCDE。*

* * *

**1.**如果您的项目保存为Access 97/2000 兼容，您必须先将其转换为2002 格式。您可以通过转到 Orb > 另存为 > Access 2002-2003 数据库来执行此操作：

![另存为 Access 2002](../Images/a98ca724daee8d2205c10e282b86b942.png)

**2.**打开任何表格

**3.**打开设计视图

**4.**从打开的默认选项卡（表单设计工具 > 设计）中，选择属性表：

![属性表](../Images/8a571ed8d6b43a429ba7724f7f7f8989.png)

**5.**从属性表中，将要锁定的视图更改为否：

![锁定非设计视图](../Images/9f93cfad9890983aa20915fcbcbe5de0.png)

**6.**最后，要创建锁定的数据库文件，选择 Database Tools > Make MDE：

![制作 MDE](../Images/adfc70bd7b8efe71fec76689cfa0a847.png)

**7.**系统将询问您要将新的 MDE 文件保存到哪里。您的旧 MDB 文件将被保留。

***重要提示：***保留您的旧 MDB 文件！！如果您需要对项目进行任何更改，您*只能*在原始 MDB 文件中执行此操作。

# c# - Visual Studio 2012 C#的内存诊断工具

> ID：12596502
> 
> 赞同：3
> 
> 时间：2012-09-26T07:17:18.280
> 
> 标签：c#, visual-studio

我有一个在关闭时不会释放资源的表单。用什么工具我可以检查发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:28:44.073

VS2012 中有一个内置的分析器（可能取决于 VS2012 的哪个版本）。Microsoft 还[为 .NET 4 提供免费的 CLR Profiler](http://www.microsoft.com/en-us/download/details.aspx?id=16273)

Red Gate 是一款出色的[内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)，我发现它比上述替代品更易于使用，但它不是免费的。有一个功能齐全的免费试用版，您可以使用它来解决您的问题。

关于您的问题：表单的常见泄漏问题是事件处理程序。确保表单中没有任何事件处理程序耦合到未处置的中心类。

框架中还有一些令人讨厌的错误，它们将中央窗口事件（例如“ui 主题已更改”）附加到框架类中的静态字段。例如，这可能导致托管 Windows 窗体工具栏的类永远不会被垃圾收集。事件处理程序泄漏很难找到，以至于它们显然仍然存在于框架代码中。

# android - 在coverflowlayout中滚动时图像消失

> ID：12596505
> 
> 赞同：1
> 
> 时间：2012-09-26T07:17:31.827
> 
> 标签：android, apache-flex

我正在使用以下代码使用 Flash Builder 4.6 在 Android 上创建水平图像列表。

```
<s:layout>
<layouts:CoverflowLayout id="coverflow" selectedIndex="{list.selectedIndex}"
                         horizontalDistance="130" selectedItemProximity="50" 
                                 depthDistance="1" elementRotation="-75" focalLength="300"
                                 perspectiveProjectionX="-1" perspectiveProjectionY="-1"/>

</s:layout> 
```

它显示图像的水平列表。当我单击它们时，我可以选择它们，但是当我在列表上滑动时，所有图像都会消失。是否可以防止它们消失或添加这种滑动效果？

# java - 在导入语句中出现错误

> ID：12596512
> 
> 赞同：0
> 
> 时间：2012-09-26T07:17:44.283
> 
> 标签：java

好的，首先我正在处理的项目有两个包，第一个是包含 invoiceCalculations.java 的 murach.business 第二个是包含 InvoiceForm.java(JFrame) 和 SwingValidator.java 的 murach.forms

因此，我应该为我从头开始创建的 Invoiceformjava 中的 murach.business.InvoiceCalculations 和 java.text.NumberFormat 类添加添加导入语句。

但是，我在编写代码时遇到了错误。netbeans 说以下代码的未使用代码：

我写错了代码吗？怎么了？请按正确的方向。

```
 import murach.business.InvoiceCalculations;
 import java.text.NumberFormat; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:20:52.107

“未使用的代码”并不意味着您有语法错误。这只是意味着不需要导入，因为类的当前代码还没有使用导入的类。如果您在使用导入类的类中添加代码，警告将消失。

请注意，使用当前的 IDE，您通常不需要手动添加导入语句。您使用该类而不导入它，并使用键盘快捷键（或自动完成）自动添加必要的导入（并删除未使用的导入）。在 Netbeans 中，命令是“修复导入 (Ctrl-Shift-I)”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:21:13.067

这些不是错误，而是 Netbeans 给您的警告。代码应该仍然可以正常编译

# yql - 雅虎财务 api 返回空响应

> ID：12596514
> 
> 赞同：3
> 
> 时间：2012-09-26T07:17:47.523
> 
> 标签：yql, yahoo-finance

我的应用程序显示股市数据。我正在使用 YQL 来获取股票数据。

[http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22SBIN.NS%22)&env=store： //datatables.org/alltableswithkeys&diagnostics=true&format=xml](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22SBIN.NS%22%29&env=store://datatables.org/alltableswithkeys&diagnostics=true&format=xml)

两天后，当我早上或之前（印度时间下午 1 点）取货时，yql 查询返回空响应。但现在它显示出确切的问题

查询结果为“yahoo.finance.quotes”已被屏蔽。

回应是

```
 <query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng" yahoo:count="0" yahoo:created="2012-09-26T11:24:22Z" yahoo:lang="en-US">
    <diagnostics>
    <publiclyCallable>true</publiclyCallable>
    <url execution-start-time="20" execution-stop-time="23" execution-time="3" proxy="DEFAULT">
    <![CDATA[
    http://www.datatables.org/yahoo/finance/yahoo.finance.quotes.xml
    ]]>
    </url>
    <cache execution-start-time="25" execution-stop-time="26" execution-time="1" method="GET" type="MEMCACHED">
    <![CDATA[ 13c4f8eac77ad886bade5a711c8c1ef5 ]]>
    </cache>
    <javascript name="yahoo.finance.quotes" verb="select">
    <![CDATA[
    com.yahoo.platforms.pipes.model.ModuleException: Error Codes: js.blocked.execute.request Message: "The current table 'yahoo.finance.quotes' has been blocked. It exceeded the allotted quotas of either time or instructions"
    ]]>
    </javascript>
    <user-time>26</user-time>
    <service-time>4</service-time>
    <build-version>30549</build-version>
    </diagnostics>
    <results/>
    </query> 
```

我没有超过请求限制 1000\小时。只需在一天内尝试 50 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:46:53.933

“这是一个社区贡献的表格，被多人使用。如果一张表格似乎占用了我们的资源，或者持续花费超过 30 秒的时间来执行（这也可能是由于下游来源缓慢），我们将其标记为滥用表格。这特定表似乎比其他表被标记为滥用的次数更多。我们也会在一段时间后删除我们的块，因此表的零星工作。如果您的应用程序需要更稳定的应用程序，我建议您等待 Yahoo! Finance 的官方表数据源。”

[http://developer.yahoo.com/forum/YQL/YQL-The-current-table-39-yahoo-finance-quotes-39-has/1332611837865-68d31e89-80e4-4691-91e6-86f687302ff4](http://developer.yahoo.com/forum/YQL/YQL-The-current-table-39-yahoo-finance-quotes-39-has/1332611837865-68d31e89-80e4-4691-91e6-86f687302ff4)

# algorithm - 如何从 Preorder 和 Children charsequence 形成二叉树

> ID：12596515
> 
> 赞同：1
> 
> 时间：2012-09-26T07:17:54.237
> 
> 标签：algorithm, recursion, binary-tree, preorder

问题是从预排序列表和每个节点具有的子节点数量的序列构建二叉树。例如：“BAC”和“200”可能是一个输入，导致“ABC”的有序列表。

我目前的方法是检查'2'的第二个字符序列（带有数字的那个），它有两个孩子，'0'，它没有孩子，'L'，它有一个左孩子，和'R'，它有一个正确的孩子。为此，我使用以下方法：

```
public static BinaryTree preOrderBuild(CharSequence charElements,
        CharSequence childCodes) {
    // TODO Auto-generated method stub.
    BinaryTree build = new BinaryTree();
    char first;
    if (childCodes.length() == 0) {
        return new BinaryTree();
    } else {
        first = childCodes.charAt(0);
    }
    if (first == '2') {
        int sum = 1;
        for (int i = 1; i < childCodes.length(); i++) {
            if (childCodes.charAt(i) == 'R' || childCodes.charAt(i) == 'L')
                sum += 0;
            else if (childCodes.charAt(i) == '2')
                sum += 1;
            else if (childCodes.charAt(i) == '0')
                sum--;
            if (sum == 0) {
                BinaryTree Left = preOrderBuild(
                        charElements.subSequence(1, i + 1),
                        childCodes.subSequence(1, i + 1));
                BinaryTree Right = preOrderBuild(
                        charElements.subSequence(i + 1,
                                charElements.length()),
                        childCodes.subSequence(i + 1, childCodes.length()));
                build.merge(charElements.charAt(0), Left, Right);
            }
        }
    } else if (first == 'R' || first == 'r') {
        BinaryTree right = preOrderBuild(
                charElements.subSequence(1, charElements.length()),
                childCodes.subSequence(1, childCodes.length()));
        build.merge(charElements.charAt(0), new BinaryTree(), right);
    } else if (first == 'L' || first == 'l') {
        BinaryTree left = preOrderBuild(
                charElements.subSequence(1, charElements.length()),
                childCodes.subSequence(1, childCodes.length()));
        build.merge(charElements.charAt(0), left, new BinaryTree());
    } else {
        build.merge(charElements.charAt(0), new BinaryTree(),
                new BinaryTree());
    }
    return build;
} 
```

它基本上处理 childCodes 序列以确定树的每个分支在哪里中断。问题是对于较大的树，它只处理前几个项目，然后折叠。（较大树的示例是：“ABCDEFGHIJKLMNOPQRSTU”，子代码为“220022002200LRR20RLL0”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:47:47.653

如果你从右到左，你不需要做任何递归。

```
Stack<BinaryTree> stack = new Stack<BinaryTree>();

for (int i = childCodes.length() - 1; i >= 0; i--) {
    char code = childCodes.charAt(i);
    char name = charElements.charAt(i);
    if (code == '0') {
        stack.push(new BinaryTree(name, null, null));
    }
    else if (code == 'L') {
        stack.push(new BinaryTree(name, stack.pop(), null));
    }
    else if (code == 'R') {
        stack.push(new BinaryTree(name, null, stack.pop()));
    }
    else if (code == '2') {
        stack.push(new BinaryTree(name, stack.pop(), stack.pop()));
    }
}

return stack.pop(); 
```

使用您的数据，它会生成以下树：

```
A
+-B
| +-C
| '-D
'-E
  +-F
  | +-G
  | '-H
  '-I
    +-J
    | +-K
    | '-L
    '-M
      +-N
      | +-(null)
      | '-O
      |   +-(null)
      |   '-P
      |     +-Q
      |     '-R
      |       +-(null)
      |       '-S
      |         +-T
      |         | +-U
      |         | '-(null)
      |         '-(null)
      '-(null) 
```

# sql - 当值> 1时如何获得多行

> ID：12596522
> 
> 赞同：2
> 
> 时间：2012-09-26T07:18:31.617
> 
> 标签：sql, sql-server, sql-server-2008, tsql

> **可能重复：**
> [从表中多次选择记录](https://stackoverflow.com/questions/8679067/select-records-multiple-times-from-table)

我想让我的查询为 TABLE_B.QTY 的值返回（多个）行。

```
TABLE A
SALESNR  ITEMNR LINENR
100      B2001  1
101      B2002  2
102      A1021  3 

TABLE B 
LINENR   COLOR QTY
1        WHITE  3  
2        BLACK  1
3        BROWN  8 
```

例如，使用以下查询：

```
SELECT    TABLE_A.SALESNR, TABLE_A.ITEMNR, TABLE_B.COLOR, TABLE_B.QTY
FROM       TABLE_A  INNER JOIN TABLE_B ON TABLE_B.LINENR = TABLE_A.LINENR 
```

我得到：

```
100    B2001   White   3 
```

我需要的是：

```
100    B2001   White   3
100    B2001   White   3
100    B2001   White   3 
```

有没有办法做到这一点？想不出合适的关键词来谷歌这个......

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:33:06.537

只要数量小于 2047，这将起作用

```
SELECT TABLE_A.SALESNR, TABLE_A.ITEMNR, TABLE_B.COLOR, TABLE_B.QTY 
FROM TABLE_A
INNER JOIN TABLE_B ON TABLE_B.LINENR = TABLE_A.LINENR 
INNER JOIN master..spt_values ON type = 'P' AND number < TABLE_B.QTY 
```

如果数量超过 2047，请使用此：

```
;WITH a AS
(
SELECT TABLE_A.SALESNR, TABLE_A.ITEMNR, TABLE_B.COLOR, TABLE_B.QTY, 1 row
FROM TABLE_A
INNER JOIN TABLE_B ON TABLE_B.LINENR = TABLE_A.LINENR 
WHERE QTY > 0
union all
SELECT SALESNR, ITEMNR, COLOR, QTY, row+1 
FROM a
WHERE QTY > row 
)
SELECT SALESNR, ITEMNR, COLOR, QTY from a
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:34:07.100

如果每个表中有一行，我将其解释为，交叉连接将不会执行此操作。如果可能的话，我建议重新设计你的数据模型来解决这个问题——或者在你使用这些数据的代码中循环。

如果绝对需要，您可以在 T-SQL 中循环。

问候， Olle

似乎无法评论其他人的帖子，只想对 t-clausen.dk 说，不错的解决方案！

# javascript - 如何通过 getComputedStyle 获取 flexbox 的确切宽度？

> ID：12596523
> 
> 赞同：1
> 
> 时间：2012-09-26T07:18:40.190
> 
> 标签：javascript, microsoft-metro, internet-explorer-10, flexbox

渲染内容后，我在获取 flexbox 的确切宽度时遇到了问题。我正在开发一个 Windows 8 应用程序（`ie10`具体的意思）。

这是代码：
[HTML]

```
<html>
<head>
    <title>flexbox test</title>
</head>
<body>
    <div class='container'>
        <div class='viewport'>
            <div class='canvas'>
                <div class="item"> A </div>
                <div class="item"> B </div>
                <div class="item"> C </div>
                <div class="item"> D </div>
                <div class="item"> E </div>
                <div class="item"> F </div>
                <div class="item"> G </div>
                <div class="item"> H </div>
                <div class="item"> I </div>
                <div class="item"> J </div>
            </div>
        </div>
    </div>
    <hr style="width: 600px; text-align: left;">
    <div class="outbox"></div>
    <script>tester();</script>
</body>
</html>​ 
```

[CSS]

```
.container {
    width: 400px;
    height: 200px;
    border: 1px solid black;
}

.container .viewport {
    width: inherit;
    height: inherit;
    position: absolute;
    overflow: auto;
}

.container .viewport .canvas{
    display: -ms-flexbox;
    -ms-flex: 0 0 auto;
    -ms-flex-pack: start;
    -ms-flex-flow: row none;
    -ms-flex-align: start;
    -ms-flex-item-align: start;
    -ms-flex-line-pack: start;
    position: relative;
}

.container .viewport .canvas .item {
    width: 100px; height: 100px;color: #fff; 
    background-color: black;
    margin: 10px;
} 
```

[JAVASCRIPT]

```
(function tester(){
    var canvas = document.querySelector('.canvas');
    var style = document.defaultView.getComputedStyle(canvas, null);
    function addToOutbox(str){
        var outbox = document.querySelector('.outbox');
        outbox.innerText = 'Width: ' + str;
    }
    addToOutbox(style.width);
})(); 
```

我期待宽度是别的东西，因为有一个滚动条。外层容器宽度为`400px`，中层为继承`width`和`height`with `overflow: auto`，最内层是可扩展的。flexbox 中有八个项目，`100px`每个项目都有宽度和高度。所以我期待 flexbox 宽度 abot`900px (i.e. 100px*8 + margin-left and margin-right for each item)`但仍然`400px`只得到父尺寸。我错过了什么吗？

这是 JS Fiddle 的链接：http: [//jsfiddle.net/pdMSR/](http://jsfiddle.net/pdMSR/) [仅使用 ie10 打开]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:41:52.383

该元素实际上是 400px。超过 400px 的弹性项目实际上是溢出的。

听起来您真正想要的是scrollWidth。如果你传入`canvas.scrollWidth`你的`addToOutbox`函数，你会得到你正在寻找的东西。

# java - 如果导入语句无法解析会怎样？

> ID：12596527
> 
> 赞同：4
> 
> 时间：2012-09-26T07:19:08.307
> 
> 标签：java, class, jvm, classloader

我不清楚以下几点：
JVM在需要时加载一个类，比如延迟初始化，对吧？
现在，如果类做`A`了一个实际上不在文件系统中的类（例如`import`被删除或未交付或任何原因） ， 那么**如果**没有调用类的方法，类会被加载并运行吗？*或者*由于导入无法解决，类根本无法运行？*或者*类被加载并运行到某个点？ `B``B``B.class`
`A`**`B`
*`A`
*`A`****

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:21:35.703

`import`语句只对编译器重要。在字节码中，所有对其他类的引用都是完全限定的。这就是为什么多余的导入在运行时并不重要。

在您的情况下，JVM 将尝试加载所有需要加载和验证的类`A`~~，所以它会尝试`B`立即加载~~，但依赖类仅在需要时才延迟加载。查看以下示例：

```
public class A {

    public static void bar() {
        new B().foo();
    }

    public static void main(String[] args) {
        //bar();
    }

} 
```

编译`A.java`和删除`B.class`. 如果不调用`bar()`方法，您的程序将运行得很好。但是一旦你取消注释一段实际使用`B`类的代码，你会变得讨厌：

```
Exception in thread "main" java.lang.NoClassDefFoundError: B
    at A.bar(A.java:4)
    at A.main(A.java:8)
Caused by: java.lang.ClassNotFoundException: B
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 2 more 
```

如果`B`不可用，你会得到`NoClassDefFound`或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:41:26.120

如果 A.class 需要缺少 B.class。A.class 无法加载。

加载类是一个`recursion operation`.

当 A.class 需要 B.class 时，JVM 在 .class 中搜索 B.class `PermGen`。如果 B.class 被加载并存储在 中`PermGen`，JVM 将`not reload`B.class 但`PermGen`直接从中获取，否则 JVM 将递归加载 B.class。

当 JVM 找不到 B.class 时，它会抛出`NoClassDefFoundError`.

[在 [Java 规范]：第 319 页中查看有关 NoClassDefFoundError 的更多信息](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)。****

# php - 如何将多维数组插入 MySQL 表？

> ID：12596528
> 
> 赞同：3
> 
> 时间：2012-09-26T07:19:09.727
> 
> 标签：php, mysql

在此表中，我有字段“标题”“网址”“关键字”和我希望输入数据的描述。顺便说一句，我拥有的所有字段都是“id”、“title”、“description”、“keywords”url”和“rank”。我基本上想将多维数组中的数据输入到 mysql 表中，并为每个数组输入 [title] 和 [url] 等。我希望它是一行。我的代码如下：

```
 $data = array();
  foreach ($links as $link) {
$output = array(
  "title"       => Titles($link), 
  "link"        => $link,
  "description" => getMetas($link),
  "keywords" => getKeywords($link) 
    );
   if (empty($output["description"])) 
  {$output["description"] = getWord($link);
  }
  $data[] = $output;
  }
 print_r($data);  

 mysql_query("INSERT INTO scan (title, url, description, keywords) VALUES ('".implode("'),('",$data)."')");

if (!mysql_query()) {
echo "woops";
 }

  mysql_close($connect); 
```

为了清楚起见，我想在我的 MYSQL 表中进行排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:22:59.433

这取决于，因为您必须在数据库中创建一个包含 time、date、competition、first_team、second_team 列的表

这真的取决于你现在知道多少，如果你只想记录一个普通数组，你可以将它序列化到数据库中并在代码中反序列化它

例如 php 代码：

```
$array = array ('one','two','three'); 
$array = serialize ($array);
var_dump ($array);
$unseralize = unserialize ($array);
var_dump ($unserialize); 
```

有些东西告诉我你可能只想把它放在数据库上并查询服务器然后执行循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:26:32.890

您应该序列化并将其发送到数据库
[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

# javascript - Css 不应用按钮驻留在母版页的用户控件中

> ID：12596529
> 
> 赞同：0
> 
> 时间：2012-09-26T07:19:14.463
> 
> 标签：javascript, jquery

考虑一个场景：我有一个母版页，母版页有 .aspx 页面，而 .aspx 页面有一些用户控制。用户控件（.ascx）包含我想在驻留在该用户控件中的按钮上应用 css 但未应用 css 的按钮

这是母版页中的 ContentPlaceHolder

```
 <div id="content">
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </div> 
```

这是我正在应用 css Ok 和 btnClose 的按钮的 id

```
 $(document).ready(function () {
                  $("#Ok").addClass("buttonSmall");
                 $("#btnClose").addClass("buttonSmall");      
             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:47:42.243

您是否检查过生成的 HTML（在 Web 浏览器中：右键单击页面，查看源代码）？

按钮的 id 是否完好无损？

如果您使用按钮 webcontrol asp.net 通常会更改按钮的 ID，以便能够跟踪它们及其事件。Asp.net 需要这样做，因为您可能会将同一用户控件的两个实例添加到您的页面，然后您的按钮 ID 将无法正常工作。

要使用 jquery 的 id 访问 asp.buttons，我一直在使用这里的解决方案：[http ://www.west-wind.com/weblog/posts/2009/Oct/15/A-generic-way-to-find -ASPNET-ClientIDs-with-jQuery](http://www.west-wind.com/weblog/posts/2009/Oct/15/A-generic-way-to-find-ASPNET-ClientIDs-with-jQuery)

# jquery - 将复选框添加到 jquery 数据表

> ID：12596533
> 
> 赞同：5
> 
> 时间：2012-09-26T07:19:29.857
> 
> 标签：jquery, datatables

我是 JQuery 的新手。谁能告诉我如何将复选框添加到 jquery 数据表？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T08:36:00.583

我猜你在这里使用 jQuery 数据表[插件](http://datatables.net/)：

您可以使用该[`aoColumnDefs`](http://www.datatables.net/usage/columns)参数来自定义列，例如-

```
aoColumnDefs  : [
{
    aTargets: [0],    // Column number which needs to be modified
    fnRender: function (o, v) {   // o, v contains the object and value for the column
        return '<input type="checkbox" id="someCheckbox" name="someCheckbox" />';
    },
    sClass: 'tableCell'    // Optional - class to be applied to this table cell
}] 
```

# android - 如何让闹钟工作？

> ID：12596534
> 
> 赞同：1
> 
> 时间：2012-09-26T07:19:30.213
> 
> 标签：android, media-player, alarm

我已经编写了这段代码，但我不知道如何将媒体播放器添加到其中。这里的任何人都可以指导我吗？

```
public class AndroidTimeActivity extends Activity {

    TimePicker myTimePicker;
    Button buttonstartSetDialog;
    TextView textAlarmPrompt;

    TimePickerDialog timePickerDialog;

    final static int RQS_1 = 1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textAlarmPrompt = (TextView)findViewById(R.id.alarmprompt);

        buttonstartSetDialog = (Button)findViewById(R.id.startSetDialog);
        buttonstartSetDialog.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                textAlarmPrompt.setText("");
                openTimePickerDialog(false);

            }});

    }

    private void openTimePickerDialog(boolean is24r){
        Calendar calendar = Calendar.getInstance();

        timePickerDialog = new TimePickerDialog(
                AndroidTimeActivity.this, 
                onTimeSetListener, 
                calendar.get(Calendar.HOUR_OF_DAY), 
                calendar.get(Calendar.MINUTE), 
                is24r);
        timePickerDialog.setTitle("Set Alarm Time");  

        timePickerDialog.show();

    }

    OnTimeSetListener onTimeSetListener
    = new OnTimeSetListener(){

        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

            Calendar calNow = Calendar.getInstance();
            Calendar calSet = (Calendar) calNow.clone();

            calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
            calSet.set(Calendar.MINUTE, minute);
            calSet.set(Calendar.SECOND, 0);
            calSet.set(Calendar.MILLISECOND, 0);

            if(calSet.compareTo(calNow) <= 0){
                //Today Set time passed, count to tomorrow
                calSet.add(Calendar.DATE, 1);
            }

            setAlarm(calSet);
        }};

    private void setAlarm(Calendar targetCal){

        textAlarmPrompt.setText(
                "\n\n***\n"
                + "Alarm is set@ " + targetCal.getTime() + "\n"
                + "***\n");

        Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, 0);
        AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent);

    }
} 
```

# java - 亚马逊现货价格历史 - Java 代码

> ID：12596538
> 
> 赞同：4
> 
> 时间：2012-09-26T07:19:35.760
> 
> 标签：java, sdk, amazon-ec2

应该可以获取过去 90 天的 AWS Spot 价格历史记录。使用 Java SDK 时，可以创建一个查询来获取一些历史记录，但由于这个列表太长，他们将其拆分。使用令牌，您应该能够获得列表的下一部分，直到您收到整个列表。

问题是使用给定的令牌我还无法检索到列表的第一部分。在搜索互联网时，很明显我对这个令牌的理解是正确的。

```
 // Create the AmazonEC2Client object so we can call various APIs.
    AmazonEC2 ec2 = new AmazonEC2Client(credentials);

    // Get the spot price history
    DescribeSpotPriceHistoryResult result = ec2.describeSpotPriceHistory();

    // Print first part of list
    for (int i = 0; i < result.getSpotPriceHistory().size(); i++) {
        System.out.println(result.getSpotPriceHistory().get(i));
    }

    result = result.withNextToken(result.getNextToken());

    // Print second part of list
    for (int i = 0; i < result.getSpotPriceHistory().size(); i++) {
            System.out.println(result.getSpotPriceHistory().get(i));
    } 
```

结果的“nextToken”没有改变。任何想法我做错了什么？SDK中是否存在错误？我通过 Eclipse 安装了它。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:53:24.163

您确实没有按预期使用 API - 您需要使用从[DescribeSpotPriceHistoryResult](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/DescribeSpotPriceHistoryRequest.html)`nextToken`检索到的内容重新提交[DescribeSpotPriceHistoryRequest](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/DescribeSpotPriceHistoryResult.html)（诚然，您也可以设置`nextToken`后者有点令人困惑，猜测理想情况下它应该只是一个内部方法），例如：

```
// Create the AmazonEC2Client object so we can call various APIs.
AmazonEC2 ec2 = new AmazonEC2Client(credentials);

// Get the spot price history
String nextToken = "";
do {
    // Prepare request (include nextToken if available from previous result)
    DescribeSpotPriceHistoryRequest request = new DescribeSpotPriceHistoryRequest()
            .withNextToken(nextToken);

    // Perform request
    DescribeSpotPriceHistoryResult result = ec2
            .describeSpotPriceHistory(request);
    for (int i = 0; i < result.getSpotPriceHistory().size(); i++) {
        System.out.println(result.getSpotPriceHistory().get(i));
    }

    // 'nextToken' is the string marking the next set of results returned (if any), 
    // it will be empty if there are no more results to be returned.            
    nextToken = result.getNextToken();

} while (!nextToken.isEmpty()); 
```

# java - 在 xws-security for Spring-WS 中支持 X509PKIPathv1

> ID：12596543
> 
> 赞同：48
> 
> 时间：2012-09-26T07:19:45.913
> 
> 标签：java, spring, spring-ws, x509

我正在尝试向现有网络服务发送请求。该网络服务不受我管辖。此 Web 服务的安全策略要求我在 SOAP 请求中发送完整的证书链。我的证书链包含 3 个证书。证书链的设置没有问题，因为我能够测试它的有效性（并且已经这样做了）。

此设置的安全配置（= 在请求中发送完整的证书链）是：

```
<xwss:Sign id="signature">
   <xwss:X509Token 
        certificateAlias="alias" 
        keyReferenceType="Direct"
        valueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509PKIPathv1" />
</xwss:Sign> 
```

我正在尝试通过[Spring-WS](http://static.springsource.org/spring-ws/sites/2.0/)来实现这一目标。Spring-WS 使用 spring-ws-security 来保证安全性。Spring-ws-security 委托给 xws-security。

```
 <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-ws-security</artifactId>
        <version>2.1.0.RELEASE</version>
        <exclusions>
            <exclusion>
                <groupId>org.apache.ws.security</groupId>
                <artifactId>wss4j</artifactId>
            </exclusion>            
            <exclusion>
                <groupId>com.sun.xml.wsit</groupId>
                <artifactId>xws-security</artifactId>
            </exclusion>            
        </exclusions>
     </dependency> 
```

Xws-security 有两种风格：

```
 <dependency>
        <groupId>com.sun.xml.wsit</groupId>
        <artifactId>xws-security</artifactId>
        <version>1.3.1</version>
    </dependency> 
```

和

```
 <dependency>
        <groupId>com.sun.xml.wss</groupId>
        <artifactId>xws-security</artifactId>
        <version>3.0</version>
    </dependency> 
```

第一个由 Spring WS Security 使用。二是传承。

在 xws-security 中应用我的 XWSS 配置是在一个名为 BinarySecurityToken 的类中完成的。BinarySecurityToken 有一个名为

```
valueType 
```

valueType 的 JavaDoc 说它支持 X509PKIPathv1（等等）。但是，正如此 setter 所述，它不是：

```
 protected void setValueType(String valueType) {
    if (!(MessageConstants.X509v3_NS.equals(valueType)||MessageConstants.X509v1_NS.equals(valueType))) { 
        log.log(Level.SEVERE,"WSS0342.valtype.invalid");
        throw new RuntimeException("Unsupported value type: " + valueType);
    }
    this.valueType = valueType;
} 
```

MessageConstants 类（甚至）没有 X509PKIPathv1 的静态数据。当我运行我的代码时，我得到了预期的结果：

```
Unsupported value type: http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509PKIPathv1 
```

我能够查看 legacy 的源代码`com.sun.xml.wss.xws-security:3.0`。尽管我努力了，我还是没有找到`com.sun.xml.wsit.xws-security-1.3.1`. 但是我相信代码是一样的。我尝试了两个库，都给了我同样的例外。我试过了，使用默认的 spring-ws-security 并使用对两个库的显式依赖声明（一次一个）。

我的问题：

1.  有没有人能够使用 xws-security 生成具有 X509PKIPathv1 的 valueType 和直接的 keyReferenceType 的 X509 签名？
2.  是否存在其他提供此功能的 xws-security 实现？或者我应该看看像 Wss4j 这样的完全不同的方法？

我考虑过重写 BinarySecurityToken，但这可能也意味着在 DSIG 中重写 SignatureProcessor 的 X509 签名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-05T07:50:06.743

你到那里的有趣问题。

据我的 Google-fu 所知，在某些项目中存在对 #X509PKIPathv1 的支持（例如，[Oracle 的 XMLSec](http://docs.oracle.com/html/E10678_05/oracle/security/xmlsec/wss/x509/X509BinarySecurityToken.html)或[Open SAML](https://github.com/korteke/java-opensaml/blob/master/opensaml-soap-api/src/main/java/org/opensaml/soap/wssecurity/WSSecurityConstants.java)），但是它并不普遍，甚至像 Soap UI[这样的应用程序也不支持](https://community.smartbear.com/t5/SoapUI-Open-Source/Changing-the-SoapUI-4-5-BinarySecurityToken-ValueType/td-p/34467)SOAP- WS。

不仅如此，其他语言/框架也同样缺乏支持，例如[Delphi](https://www.eldos.com/forum/read.php?FID=7&TID=5702)和[.NET](https://social.msdn.microsoft.com/Forums/vstudio/en-US/1d5aed7a-0fda-4b52-a36c-49278fc49f67/pkipathv1-binarysecuritytoken?forum=wcf)、[IBM JRE](https://stackoverflow.com/questions/8401372/x509-ws-security-using-spring-ws-xws-interceptor-in-websphere)。

基于[这个 SO](https://stackoverflow.com/questions/37520365/how-to-send-and-receive-certificates-in-spring-ws-with-a-third-party-such-as-ban)，尤其是[这个 SO](https://stackoverflow.com/questions/19854636/how-to-add-chain-of-certificate-in-spring-ws-client-request) ，你可以做的是实现你自己的 WebServiceTemplate / WebServiceMessageSender。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T05:55:48.927

> valueType 可以是#X509v3、#X509PKIPathv1

可以在这里找到 [XWS-SecurityIntro4](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/XWS-SecurityIntro4.html) 您是否专门尝试过这些值而不是 URL？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T08:02:36.567

此[拉取请求](https://github.com/spring-projects/spring-ws/pull/153)将启用使用 X509PKIPathv1 的能力。

# ajax - JSF 1.0 中对 JSF 后备 bean 方法的 Ajaxical 调用

> ID：12596545
> 
> 赞同：1
> 
> 时间：2012-09-26T07:19:53.030
> 
> 标签：ajax, jsf, dojo, backing-beans

是否可以在 JSF 1.0 应用程序中使用 Ajax 调用支持 bean 方法并更新服务器中的服务器端控件（下拉列表）并将更改推送到客户端？

我不知道我们怎么能做到这一点。任何帮助将不胜感激。

# ruby-on-rails - 在 Rspec 测试中处理非 ascii 字符

> ID：12596546
> 
> 赞同：1
> 
> 时间：2012-09-26T07:20:00.367
> 
> 标签：ruby-on-rails, ruby, rspec, rspec2

我正在使用 Ruby 1.9.3 的 DocSplit gem 来创建 Unicode UTF-8 版本的 word 文档。今天令我惊讶的是，当我对其中一个文档的特定部分进行测试时，我开始遇到字符编码不一致的问题。

我尝试了多种不同的方法来解决我将在下面列出的问题，但到目前为止我取得的最大成功是删除所有非 ASCII 字符。这远非理想，因为我不认为角色在数据库中真的会有那么大的问题。

```
gsub(/[^[:ascii:]]/, "") 
```

这是我的输出与我的期望的示例：

```
My CODES'S APOSTROPHE

My CODES’S APOSTROPHE 
```

第二个撇号应该看起来是波浪状的。如果将其粘贴到 irb 中，则会得到以下内容：\U+FFE2

我专门为这个角色尝试了正则表达式，它似乎在 Rubular 中工作。但是，一旦我将其放入模型中，就会出现语法错误。

```
syntax error, unexpected $end, expecting ')'
raw_title = raw_title.gsub(/’/, "") 
```

我也尝试将编码强制为 UTF-8，但一切都已经在 UTF-8 中，这似乎没有效果。我尝试将输出强制为 US-ASCII，但出现字节序列错误。

我还尝试了 Ruby 库中的一些编码选项。这些基本上和正则表达式做同样的事情。

这一切都归结为我正在尝试匹配输出以进行测试。我什至应该关心这些特殊字符吗？有没有更好的方法来匹配这些字符而不盲目删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:36:04.633

尝试添加：

```
# encoding: utf-8 
```

在失败的 rspec 文件的顶部。这应该确保以下内容：

```
raw_title = raw_title.gsub(/’/, "") 
```

在您的规范工作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T05:37:37.537

我尝试使用上面的示例。但即使在那之后它仍然失败。所以我用 iconv 来转换那个特定的字符。这是我用的

```
Iconv.conv('ASCII//IGNORE', 'UTF8', text_to_be_converted) 
```

我尝试了以下链接中给出的内容 - [How to get rid of non-ascii characters in ruby](https://stackoverflow.com/questions/1268289/how-to-get-rid-of-non-ascii-characters-in-ruby)

# jquery - Wordpress TIny 编辑器和上传选项冲突

> ID：12596551
> 
> 赞同：2
> 
> 时间：2012-09-26T07:20:22.960
> 
> 标签：jquery, wordpress, tinymce, media

我在我的主题选项中使用上传媒体选项和 Tiny 编辑器。现在当我使用下面的 javascript

```
jQuery(document).ready(function() {
    jQuery('.st_upload_button').click(function() {
         targetfield = jQuery(this).prev('.upload-url');
         tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
         return false;
    });
    window.send_to_editor = function(html) {
         imgurl = jQuery('img',html).attr('src');
         jQuery(targetfield).val(imgurl);
         tb_remove();
    }
}); 
```

它允许上传图片并从上传按钮插入网址（参见带有输入和黑色上传按钮的图片）

![在此处输入图像描述](../Images/add4bd65a4e00725a9edd9b3c26a60de.png)

但使用上面的 javascript Tiny 编辑器允许上传但停止将图像插入编辑器。

![在此处输入图像描述](../Images/4c752c41378c2232a17df8ea973639d4.png)

我通过禁用 javascript 进行了交叉检查，并且 Tiny 编辑器工作正常。所以我相信javascript有问题，但不明白什么是错的以及如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:03:55.707

jquery没有问题，注册脚本时只需要做一些这里是示例代码

```
 function st_add_init() 

    {

   $screen = get_current_screen();
   $file_dir = get_template_directory_uri();
   wp_enqueue_style("stCss", $file_dir."/font/theme-options.css", false, "1.0",    "all"); 
   wp_enqueue_script("stScript", $file_dir."/js/theme-options.js", false, "1.0");                             wp_register_script('my-upload', get_bloginfo( 'stylesheet_directory' ) .'/js/my-script.js', array('jquery','media-upload','thickbox'));    
   if ($screen->id =='appearance_page_st-settings')   
        {
          wp_enqueue_script('thickbox');
          wp_enqueue_script('media-upload');
          wp_enqueue_script('my-upload');
          wp_enqueue_style('thickbox');

        }
   }
   add_action('admin_enqueue_scripts', 'st_add_init'); 
```

**get_current_screen()** ; 函数检索您的主题选项页面的 id

**'appearance_page_st-settings'**是我的选项页面的 id，你的会有所不同

**if ($screen->id =='appearance_page_st-settings')**匹配id来识别页面是否为主题选项页面，如果为true，则注册脚本，避免与管理脚本冲突

# xamarin.android - 来自 MvxBindingAttributes 的属性不与 MvvmCross 一起添加

> ID：12596553
> 
> 赞同：8
> 
> 时间：2012-09-26T07:20:34.813
> 
> 标签：xamarin.android, mvvmcross

我的 UI.Droid/Resources/Values 中有 MvxBindingAttributes.xml 但每次我尝试在布局中使用绑定时都会得到

> 未声明警告属性。
> 
> 在包“DroidUI”中找不到属性“MvxBind”的资源标识符

所以由于某种原因它找不到这些属性。我试图关闭/重新打开/清理/重建但没有运气，尝试删除布局然后构建（希望它会在构建时添加它们）然后尝试再次添加它们，但似乎没有任何效果

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T07:48:01.277

您是否检查过该`MvxBindingAttributes.xml`文件在属性中标记为 AndroidResource？

VisualStudio 喜欢将 xml 文件标记为内容或无内容 - 特别是如果您已将`MvxBindingAttributes.xml`文件添加为链接。

* * *

作为对此的**更新**，您现在还可以使用特殊的“自动”xml 方案：

```
 xmlns:local="http://schemas.android.com/apk/res-auto" 
```

* * *

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-27T07:46:16.167

在项目属性中，添加一个 Android Manifest 文件，并添加一个至少包含两个句点的包名，例如：

```
com.DroidUI 
```

在 axml 文件中，键入包名称而不是命名空间：

```
xmlns:local="http://schemas.android.com/apk/res/com.DroidUI 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-08T04:55:12.453

xmlns:local="http://schemas.android.com/apk/res-auto 为我修复了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-13T02:10:06.440

首先，感谢您的回答。我有同样的问题。

但就我而言，尝试使用上述建议失败了。或者至少我是这么想的。

当我`local:MvxItemTemplate=@layout/My_Manifest`将 My_Manifest.axml 文件正确放置在 Layout 文件夹中并正确放置 xml 模式时，它仍然存在问题。

但是，当我将 My_Manifest 更改为 my_manifest 而将实际文件名保留为 My_Manifest.axml 时，一切正常。

只是想分享

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T16:06:58.267

在我的情况下，由于某种原因，MvxBindingAttributes.xml 文件存在，但未包含在项目中。右键单击 MvxBindingAttributes.xml 并选择“包含在项目中”为我解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-31T16:23:50.860

以防万一：您的某些 XML 中可能还有垃圾（在我的情况下是点）。但是错误指出“也许自动生成的 XML 有问题”，所以我花了半个小时才注意到它……唉！

# java - 如何确定我是否在 super.equals 调用链中到达了 Object？

> ID：12596554
> 
> 赞同：4
> 
> 时间：2012-09-26T07:20:37.743
> 
> 标签：java, equals, superclass

我对 Class.getSuperclass() 有疑问。我想生成一个类层次结构，其中每个孩子在将其属性与另一个类进行比较后，将 equals 请求传递给父级。使用这种方法，当我达到 Object 之上的级别时，我需要停止调用 super.equals，因为 Object 进行 isSame 比较，这不是我想要的。

假设我有这个层次结构：

```
class Child extends Parent {
    ...
    public boolean equals(Object other) {
        ... compare my attributes to other, if everything matches:
        if (myImmediateSuperIsObject()) {
           return true;
        } else {
           return super.equals(other)
        }
    }
}

class Parent extends Object {
    public boolean equals(Object other) {
        ... compare my attributes to other, if everything matches:
        if (myImmediateSuperIsObject()) {
           return true;
        } else {
           return super.equals(other)
        }
    }
} 
```

问题是 myImmediateSuperIsObject 伪调用。怎么写？当从 Child.equals 调用 Parent.equals 时，然后在 Parent 内部，this.getClass().getSuperclass() 不是 Object，而是 Parent。那是因为在调用 getSuperclass() 时，我们总是从实例的类开始，即 Child。所以我可以通过递归调用getSuperclass直到我得到null来构建整个层次结构，但是我如何确定我是否在我的equals调用链中的Object之上？

重申一下，这只是一个问题，因为我需要生成类层次结构。如果我要手动编写它，我当然会知道我正在扩展对象并停止调用 super.equals()。

任何的想法？

最好的问候，迪特里希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:28:59.490

您可以使用 getClass().getSuperClass() 然后测试它的 Object.class

例子：

```
class Animal {
    boolean myImmediateSuperIsObject() {
        System.out.println("I am " + getClass() + " and my parent is " + getClass().getSuperclass());

        return this.getClass().getSuperclass() == Object.class;
    }
}
class Horse extends Animal {
    boolean myImmediateSuperIsObject() {
        System.out.println("I am " + getClass() + " and my parent is " + getClass().getSuperclass());

        return this.getClass().getSuperclass() == Object.class;
    }
}
new Horse().myImmediateSuperIsObject();
new Animal().myImmediateSuperIsObject(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:05:16.773

由于您正在比较对象层次结构中的属性，您是否考虑过使用Commons [Lang的](http://commons.apache.org/lang/)[EqualsBuilder.reflectionEquals](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/EqualsBuilder.html#reflectionEquals%28java.lang.Object,%20java.lang.Object%29)？

# python - 在 Python 中支持/反对“引发异常（消息）”的参数

> ID：12596557
> 
> 赞同：2
> 
> 时间：2012-09-26T07:20:42.223
> 
> 标签：python, coding-style

我正在使用一个框架，并且源代码`Exception`在一些地方使用类（而不是子类，无论是特定于框架还是来自 stdlib）引发异常，这在我看来不是一个好主意。

反对这个习惯用法的主要论点是它强制调用者使用`except Exception:`可以捕获的比意思更多的东西，因此在较低的堆栈级别隐藏问题。

然而，在 Python 文档中的快速搜索并没有提出反对这种做法的论据，甚至在教程中也有这样的例子（尽管在 Python 脚本中可以的事情在我的 Python 框架中可能根本就不行观点）。

那么被`raise Exception`认为是pythonic吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:27:37.380

从[PEP 8](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)开始：

> 模块或包应定义自己的特定于域的基本异常类，该类应从内置 Exception 类继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:28:30.670

不它不是。框架至少应该提供自己的异常类，并且可能应该有几个（取决于可能出错的各种事情）。

正如你所说，`except Exception`会捕捉太多，不是好的做法。

# entity-framework - 第一次在应用程序中使用 DbContext 实例进行 SELECT 查询时的响应时间不可接受？

> ID：12596562
> 
> 赞同：0
> 
> 时间：2012-09-26T07:20:54.543
> 
> 标签：entity-framework, entity-framework-4, code-first, dbcontext

我正在使用 CodeFirst，我在使用 DbContext 加载数据时遇到问题，问题是第一次在应用程序中使用 DbContext 的实例进行 SELECT 类型的查询时，我得到的响应非常慢（不可接受）在大型模型上，但第二次会变得更好，有什么办法可以减少这个时间？

# ios - 如何在 iphone 中播放 H264 mpegts

> ID：12596563
> 
> 赞同：1
> 
> 时间：2012-09-26T07:20:56.483
> 
> 标签：ios, ffmpeg, h.264

我的服务器通过 ffmpeg 对视频文件（h264/acc，基于 mpegts 的格式）进行编码，并通过 iPhonse 发送到客户端。ios sdk 的默认媒体播放器无法播放这些视频。如何在 iOS 中播放 H264/mp​​egts？是否有任何可以播放 h264/mp​​eg-ts 文件的 ios 开源播放器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:37:25.247

iOS 支持称为 HLS ( [http://en.wikipedia.org/wiki/HTTP_Live_Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming) ) 的播放方法。

要将 mpeg-ts 转换为 HLS，您需要对 mpeg-ts 进行分段。ffmpeg 能够转换为 HLS。请参阅 [HTTP Live Streaming、FFMPEG & FFSERVER 和 iPhone OS 3](https://stackoverflow.com/questions/1093667/http-live-streaming-ffmpeg-ffserver-and-iphone-os-3)

# iphone - 如何将 UIImageview 对象转换为 UIImage 对象

> ID：12596564
> 
> 赞同：0
> 
> 时间：2012-09-26T07:20:58.120
> 
> 标签：iphone, uiimageview, uiimage

我创建了一个 UIImageView 对象，并为其添加了一些子视图，例如 textview，imageview，label 等。现在我想获取 UIImageView 及其所有子视图的图像。

帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:27:15.700

不确定我的问题是否正确。
UIImageView 有属性 image 来分配 UIImage 给它。
UIImage 是 UIView 的子类，因此您绝对可以像在任何其他视图中一样在其中插入子视图。但我认为，这很不寻常。在这种情况下我该怎么办？以 UIView 作为 holder，在其中插入 UIImageView 和其他子视图。

如果你需要完全相反，从 UIView 在屏幕上制作 UIImage，看看`UIGraphicsGetImageFromCurrentImageContext()`功能，[在这里](https://stackoverflow.com/questions/4334233/how-to-capture-uiview-to-uiimage-without-loss-of-quality-on-retina-display)你可以找到一些进一步的解释。

# git - 如何在 GIT 中同步特定文件

> ID：12596565
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:01.440
> 
> 标签：git, github, git-branch

我是 git 新手，所以这可能是一个菜鸟问题。

我在 git 中使用 2 个不同的分支（我们称它们为 A 和 B），这两个分支都在项目的不同部分工作，除了一种类型的文件。

我希望这些文件在两个分支中都是最新的：如果有人在分支 A 上修改这些文件，提交并推送他的修改，那么在分支 B 中工作的人将在分支 B 中拥有修改后的文件。

实现这一目标的 GIT 工作流程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:59:34.617

好的，让我解释一下：

Git 的基本工作流程是使用分支。所以，假设你在分支 A 上工作，而我在分支 B 上工作。

如果您更改分支（A）中的文件，那么您提交并推送您的更改。我必须获取并拉取远程存储库以将远程存储库中的更改抓取到本地存储库。但是，在那之后我必须将您的分支（A）与我的分支（B）合并，以便在我的分支中获取您的更改。

基本流程是：

```
User 1 on branch(A)-some modified files
User 1 on branch(A)-commit those changes to local repo
User 1 on branch(A)-push the commited changes to remote repo

User 2 on branch(B)-fetch and pull the remote repo to grab any new commit that was pushed.
User 2 on branch(B)-merge the branch(A) into my branch(B). Now i have your changes. 
```

# sql - 不为空的 SQL 案例

> ID：12596566
> 
> 赞同：1
> 
> 时间：2012-09-26T07:21:02.267
> 
> 标签：sql, null, case

当我运行此查询时：

```
select
    '1992' = CASE WHEN Year(HireDate) = 1992 THEN count(*) END,
    '1993' = CASE WHEN Year(HireDate) = 1993 THEN count(*) END,
    '1994' = CASE WHEN Year(HireDate) = 1994 THEN count(*) END
  from employees
 group by Year(HireDate) 
```

我得到：

```
1992     1993      1994
3        NULL      NULL
NULL      3        NULL
NULL     NULL       3 
```

如何更改查询以获取：

```
1992    1993    1994
3           3      3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:24:23.903

使用此查询，您只会得到一行：

```
select 
'1992'=
count( CASE WHEN Year(HireDate) = 1992 THEN 1 END ),
'1993' =
count( CASE WHEN Year(HireDate) = 1993 THEN 1 END ),
'1994' = 
count( CASE WHEN Year(HireDate) = 1994 THEN 1 END )
from employees 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:24:25.267

```
select 
  '1992' = sum (case when year(HireDate) = 1992 THEN 1 else 0 END),
  '1993' = sum (case when year(HireDate) = 1993 THEN 1 else 0 END),
  '1994' = sum (case when year(HireDate) = 1994 THEN 1 else 0 END),
from employees 
```

# android - 谷歌地图意图没有动画到Android应用程序中的当前位置......？

> ID：12596567
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:09.850
> 
> 标签：android, android-intent, navigation, maps

我有一个 android 应用程序，我想在其中一个地方调用 maps.google.com 意图并显示从源到目的地的方向。

但是当我使用它时，我希望地图自动动画到方向路径。

我在下面使用来调用地图意图

`String saddr = "current location"; String daddr = "other location";`

`Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr="+ saddr+ "&daddr="+ daddr)); intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); startActivity(intent);`

意图正确调用并向我显示地图，并绘制路径但不动画到那个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:32:49.367

检查此链接：

[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

在你的：

```
Uri.parse("http://maps.google.com/maps?saddr="+ saddr+ "&daddr="+ daddr) 
```

尝试：

```
Uri.parse("http://maps.google.com/maps?saddr="+ saddr+ "&daddr="+ daddr+"&z=10") 
```

# java - 在java中的回发之间将数据保存在数据表中（我在spring框架中工作）

> ID：12596571
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:17.910
> 
> 标签：java

当我在数据表中显示搜索到的数据并单击数据表中的链接转到另一个页面时，当我单击浏览器后退按钮时，它要求重新提交。（即重新发送）。我需要留在我单击链接的数据表页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:35:33.933

在提交表单时遵循 Redirect-after-POST 模式被认为是一种很好的做法，这样您就可以在用户按下返回按钮时避免“确认表单重新提交”的情况。

我不熟悉 Spring MVC 的工作原理，但基本思想是，在用户提交表单并处理它之后，将用户重定向到下一个 url，例如，这可能是一个成功页面。

以下是一些 SO 问题，可能会为您提供专门针对 Spring MVC 的示例：

*   [Spring - POST 后重定向（即使有验证错误）](https://stackoverflow.com/questions/2543797/spring-redirect-after-post-even-with-validation-errors)
*   [Spring 3.1 MVC - 表单处理工作流最佳实践](https://stackoverflow.com/questions/9313919/spring-3-1-mvc-form-handling-workflow-best-practice?lq=1)

# c - 变量 'tireshine' 被使用而不被启动。C语言

> ID：12596572
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:18.617
> 
> 标签：c

我不知道为什么它说它没有初始化，我显然是用那条`char typeOfWash, tireShine;`线做的，对吧？只要输入不是“g”、“G”、“p”或“P”，我的代码就可以正常工作。如果 typeOfWash == 其他任何内容然后打印“无效选择”，我还没有放入最后一种情况，但这很容易，我稍后会删除它。

```
#include <stdio.h>

int main()
{
//variable declarations 
char typeOfWash, tireShine;

//Menu
printf("R ---> Regular ($5.00)\n");
printf("B ---> Bronze ($7.50)\n");
printf("G ---> Gold ($10.25)\n");
printf("P ---> Platinum ($15.00)\n");
printf("Tire Shine can be added to the Gold or Platinum ONLY,");
printf("for an additional$2.50\n\n");

printf("Enter your selection: ");
scanf("%c",&typeOfWash);

switch (typeOfWash)
{
    case 'R': case 'r':
        printf("Your bill total is: $5.00\n");
        break;
    case 'B': case 'b':
        printf("Your bill total is: $7.50\n");
        break;
    case 'G': case 'g':
        printf("Would you Like a Tire Shine? (Y/N): ");
        scanf("%c",tireShine);
        if (tireShine == 'Y' || tireShine == 'y')
            printf("Your bill total is: $12.75");
        else
            printf("Your bill total is: $10.25");
        break;
    case 'P': case 'p':
        printf("Would you Like a Tire Shine? (Y/N): ");
        scanf("%c",tireShine);
        if (tireShine == 'Y' || tireShine == 'y')
            printf("Your bill total is: $17.50");
        else
            printf("Your bill total is: $15.00");
        break;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:23:24.530

你需要改变：

```
 scanf("%c",tireShine); 
```

到：

```
 scanf("%c", &tireShine); 
```

（在两个地方）。原因：（`scanf`和一般的 C 函数）需要一个指向要修改的任何变量的指针。

显式初始化变量也是一种很好的做法（防御性编程），例如更改：

```
char typeOfWash, tireShine; 
```

到：

```
char typeOfWash = 'R';
char tireShine = 'N'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:23:43.703

> 我显然是用“char typeOfWash，tireShine”线做的，对吧？

不，除非有明确的初始化程序，否则局部定义不会初始化变量。

但这不是你真正的问题。你真正的问题是你调用scanf，你打算设置tireShine，不正确。采用

```
scanf("%c", &tireShine); 
```

读进去。此外，如果您使用 gcc，请使用 -Wall 标志，它会警告此类误用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:23:59.003

这是不正确的：

```
scanf("%c",tireShine); 
```

您需要传递的地址`tireShine`（您已经完成了`typeOfWash`）：

```
scanf("%c", &tireShine); 
```

请注意：

```
char typeOfWash, tireShine; 
```

是一个~~声明~~定义，它不为任何一个变量提供初始值，因此不是初始化。

# html - 包含 style="display:none;" 元素的表格单元格的宽度

> ID：12596574
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:25.820
> 
> 标签：html, jquery-ui, styles

我有一个表，其中有一列包含我用 jQuery 切换的图像。

```
<table>
  <tr>
    <td>
      <img class="tp" widht="24" height="23" src="1.png" />
      <img class="tp" widht="24" height="23" src="2.png" style="display:none;" />
    </td>
  </tr>
</table> 
```

呈现页面时，表格单元格宽度加倍。

我认为当`display:none`计算表格单元格的宽度时，当一个元素没有计算在内时。

有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:34:01.170

style="display: none" 不依赖于添加元素的高度或宽度。

宽度拼写不匹配。这可能会导致您的问题：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:36:35.030

它是**宽度**，而不是**您**输入的宽度。

# r - 绘制两个时间序列：轴问题

> ID：12596576
> 
> 赞同：3
> 
> 时间：2012-09-26T07:21:32.237
> 
> 标签：r, plot, time-series, zoo

我试图在同一个 x 轴（但不同的 y 轴）上绘制两个时间序列。但是，我遇到了 y 轴标签重叠的问题。

生成问题的代码如下。

```
set.seed(123)
library(zoo) 
plot(as.zoo(cbind(rnorm(1000,.1,50),runif(1000,0,100)))) 
```

您应该看到第一个图的最低 y-tick 值与第二个图上的顶部 y-tick 值重叠。你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:16:07.850

使用`las=1`,`cex.axis=.7`和一些`ylim`修改怎么样？有关做什么和做`?par`什么的详细说明，请参阅`las``cex.axis`

```
set.seed(123)
library(zoo) 
plot(as.zoo(cbind(rnorm(1000,.1,50),runif(1000,0,100))), 
 cex.axis=.7, las=1, ylim=list(c(-160,160), c(0,100))) 
```

产生：

![在此处输入图像描述](../Images/359a1120c1ca0d5484566e71eea70a29.png)

另一种解决方案是使用`yax.flip=1`

```
set.seed(123)
library(zoo) 
plot(as.zoo(cbind(rnorm(1000,.1,50),runif(1000,0,100))),  yax.flip=1) 
```

![在此处输入图像描述](../Images/5efd01f8481da668cd6e3804817f0ecc.png)

# javascript - 本地 DB API - 已弃用 什么是替代方案？

> ID：12596579
> 
> 赞同：2
> 
> 时间：2012-09-26T07:21:39.380
> 
> 标签：javascript, html, cordova, sqlite, indexeddb

基于 SQLite 的本地 DB api 正在下降。根据 w3c，它必须被替换为 indexedDB。但是 IndexedDB API 仍在进行中，所以还没有实现。对于需要大量数据库存储的应用程序......暂时；什么是替代方案？最未来的证据是什么？

本地存储不是选项，因为我需要存储结构化（关系）数据以及很多数据。基于云的替代方案也超出了范围。我需要一些本地的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:28:29.060

我会说 indexeddb 是要走的路。IE、FF 和 chrome 都已经支持它，但对于移动设备它仍然是一个地狱。我建议你现在继续使用 websql，我认为 phonegap 会继续支持它一段时间。

规范的问题是，没有标准的查询方式。每个供应商都使用 SQLite，但不能在一个产品上构建规范，那将非常危险。同样在大多数情况下，不同的数据库供应商意味着不同的 SQL 方言。这也与标准的工作方式相矛盾。这意味着您必须检查您正在使用哪个数据库，然后使用不同的方言。这就是为什么他们决定使用称为 indexeddb 的统一 API。

所有使用 SQL lite 之类的数据库将数据存储在仅用于查询的接口中的浏览器都是 indexeddb API，因此 indexeddb 类似于 odbc。只有它非常简单和苗条。如果您想了解有关 indexeddb 的更多信息，请查看我的[博客](http://www.kristofdegrave.be)，我有几篇关于它的博文。[这](http://www.kristofdegrave.be/2011/09/indexed-db-basics.html)是一个很好的开始。它解释了 indexeddb 的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:21:25.343

> 本地存储不是选项，因为我需要存储结构化（关系）数据，而且很多

我过去曾问过类似的问题，在某些时候我放弃了尝试寻找本地解决方案。我最终使用了[这个插件](https://github.com/chbrody/Cordova-SQLitePlugin)。

优点是：

1.  使用 WebSQL 时，您将不受 iOS 平台上的配额限制 (~5Mb) 的限制。
2.  您可以分发预填充的数据库。（我知道 WebSQL 也有一种解决方法，但它并不总是有效。）
3.  您可以加密您的数据库。（我不知道你是否需要这个）
4.  没有[这里](https://issues.apache.org/jira/browse/CB-330)提到的持久性问题。

缺点是：

1.  还没有适用于 Windows 的实现。您可能会考虑为 Windows 编写自己的插件。
2.  随着 Phonegap 2.1，他们开始在 iOS 平台上支持 ARC。据我测试，该插件目前不支持 ARC。你需要调整它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:58:45.917

为什么不试试我自己的开源库的[IndexedDB 包装器呢？](https://bitbucket.org/ytkyaw/ydn-db)它适用于 IndexedDB API 的旧标准和新标准，也适用于 WebSQL。包装 API 非常以 IndexedDB API 为中心，并计划支持每一个功能。

# android - 旋转大图像会导致 OutOfMemoryError

> ID：12596580
> 
> 赞同：1
> 
> 时间：2012-09-26T07:21:41.133
> 
> 标签：android, image-processing

我正在尝试旋转从相机拍摄的图像并保存它而不缩小而不显示在视图中，但是当我尝试像这样加载它时

```
Bitmap bmp = BitmapFactory.decodeFile(tmpImageFilePath); 
```

我得到 OutOfMemoryError。旋转图像对我来说没有问题，但是如何加载并以原始大小保存？我已经用谷歌搜索了一些技术来解决这个问题，但没有一个适合我。

当我尝试这个变体时：

```
 File f = new File(tmpImageFilePath);
                long filesize = f.length();
                ExifInterface exif = new ExifInterface(f.getPath());
                int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

                int angle = 0;

                if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                    angle = 90;
                }
                else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
                    angle = 180;
                }
                else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                    angle = 270;
                }

                Matrix mat = new Matrix();
                mat.postRotate(angle);
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 8;
                Bitmap bmp = BitmapFactory.decodeFile(tmpImageFilePath, options);    
                Bitmap correctBmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), mat, true);
                bmp.recycle();
                try {
                    FileOutputStream out = new FileOutputStream(f);
                    correctBmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
                } catch (Exception e) {
                    e.printStackTrace();
                } 
```

我得到较小的图像。

# objective-c - 关于父/子交互的 OOP 设计偏好

> ID：12596585
> 
> 赞同：0
> 
> 时间：2012-09-26T07:21:57.150
> 
> 标签：objective-c, cocos2d-iphone

我正在开发一个音乐符号应用程序，它有一个音乐人员类（CCNode）和一个音符类（CCSprite）。

音符被添加到音乐人员中，例如：

```
// MusicStaff.m
[self addChild:note]; 
```

笔记有一个粒子发射器，这需要添加到父级。我认为做类似的事情：

```
// Note.m
[self.musicStaff addChild:self.emitter]; 
```

不是很酷，因为我不喜欢用笔记控制五线谱的想法——我喜欢把五线谱看作是控制它所拥有的孩子的人。

老实说，我觉得这个粒子发射器应该是 Note 的子代，因为从技术上讲，它是音符的一部分，而不是乐谱的一部分——所以将它添加到乐谱本身就感觉不对。但是，根据我对 cocos2d 的了解，虽然您可以将子元素添加到 CCSprite，但精灵不管理其子元素的绘制，因此该粒子发射器将不可见。

也就是说，据我所知，唯一的方法是将发射器添加到工作人员中，我更愿意这样做：

```
// MusicStaff.m
[self addChild:note];
[self addChild:note.emitter]; 
```

但是，我项目中的一个团队成员认为这是“倒退”和“愚蠢”，并且注释应该将发射器直接添加到其父级。我只是寻求一些反馈，看看我对此的想法是否确实“落后”和“愚蠢”，或者我是否有一个有效的观点......</p>

我也很好奇是否有另一种方法来解决这个问题，比如将发射器直接添加到音符并让它以某种方式绘制它的孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:11:31.650

您可以将粒子添加为精灵的子对象，然后它们将被绘制。任何资源让您认为未绘制子节点都是错误的。

我认为您可能误解了精灵批处理的问题。在这种情况下，当您使用 CCSpriteBatchNode 时，您只能将 CCSprite 对象添加到批处理节点和批处理节点的子节点。因此，在这种情况下，尝试添加粒子效果或任何其他节点作为 sprite-batched sprite 的子节点将导致 cocos2d 中的断言告诉您这是非法的。

至于“愚蠢的问题”：这两个选项都不是真的愚蠢，但是将发射器添加到父级有一个小好处，因为音符可以控制音符固有的责任：管理音符的粒子效果的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:33:05.277

在面向对象的设计方面，如果 Emitter 是由其父 Note 创建的，我认为它不应该将自己添加到 Staff 中。如果有人必须与工作人员交谈，那就让它成为它的直接孩子，即笔记。更好的是，让 Note 回应员工提出的问题，这样最终员工就能控制它想要显示的内容。

# grails - 从 grails Web 控制台插件运行 grails test-app 命令

> ID：12596591
> 
> 赞同：1
> 
> 时间：2012-09-26T07:22:20.517
> 
> 标签：grails, grails-plugin

我已经安装了[grails web 插件](http://grails.org/plugin/console)。我现在可以浏览到：

```
localhost:8080/myappname/console 
```

我可以看到那里显示的控制台。我有一堆为应用程序编写的测试用例。我希望我可以从这个 Web 控制台*测试我的应用程序。*

有可能这样做吗？我对grails很陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:29:02.930

简短的回答没有。grails 控制台旨在编写与正在运行的应用程序交互的 groovy 代码。默认情况下，您正在运行的应用程序不包括您的测试用例或 grails 命令行。

长答案之类的。如果您在运行应用程序的文件系统中的某个位置拥有所有项目源代码，则可以调用外部进程来运行 test-app 并将结果返回给用户。以下是一些关于在 groovy 中运行外部进程的文档：http: [//groovy.codehaus.org/Executing+External+Processes+From+Groovy](http://groovy.codehaus.org/Executing+External+Processes+From+Groovy)。我想你也可以以某种方式打包你的应用程序来完成这项工作，但我认为这样做会相当复杂。

我不确定这对于控制台插件来说是一个很好的用例。希望这可以帮助

# php - 使用 php 以用户格式显示日期

> ID：12596593
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:22:28.027
> 
> 标签：php, mysql

我注意到 Facebook、Twitter 和许多其他网站都在对用户帖子和评论使用相对日期和时间字符串描述。

例如，“评论写于大约 3 个月前”而不是“评论写于 2012 年 9 月 20 日”。我决定在我的网站上做同样的事情。在我的网站中，我需要显示 1 天前，2 天前，3 天前，...... 1 周前，2 周前，.... 1 个月前，2 个月前，...... . 1 年前，2 年前... 等等。

我已经有了用户注册日期，需要用当前日期和时间检查它，并且需要在我的主页上以上述样式显示它。

在我的数据库中，用户注册的日期格式是这样的 .. '2012-09-23 09:11:02'

任何人都可以帮助我在 php 中构建这个脚本......它会非常受欢迎。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:36:51.810

试试这个

```
function time_ago($time) {

   $periods = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
   $lengths = array("60","60","24","7","4.35","12","10");

   $now = time();

   $difference = $now - $time;
   $tense = "ago";

   for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
   }

   $difference = round($difference);

   if($difference != 1) {
        $periods[$j].= "s";
   }

   return "$difference $periods[$j] 'ago' ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:27:15.077

试试下面的代码，

```
function time_elapsed_since ($postedDateTime){

    $time = time() - $postedDateTime; // to get the time since that moment

         $tokens = array (
                      31536000 => 'year',
                      2592000 => 'month',
                      604800 => 'week',
                      86400 => 'day',
                      3600 => 'hour',
                      60 => 'minute',
                      1 => 'second'
                  );

                  foreach ($tokens as $unit => $text) {
                      if ($time < $unit) continue;
                      $numberOfUnits = floor($time / $unit);
                      return $numberOfUnits.' '.$text.(($numberOfUnits>1)?'s':'');
                  }

    } 
```

用法：

```
time_elapsed_since($postedDateTime).' ago'; // 2012-09-23 09:11:02 format 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:41:21.767

我猜他们正在使用 unixtime 即自 1970 年以来的秒数（这是标准的）。我建议您的日期也应该保持这种格式。如果他们使用的是 unix 时间，您可以在 PHP 中使用以下日期函数将其转换为上述格式：

```
<?php
date('Y-m-t H:i:s', $facebookTime); 
```

问候，凯文

# android - 适用于 Android 的 Mono，带有 abs 的 TabHost 在同一 Activity 中交换视图

> ID：12596594
> 
> 赞同：0
> 
> 时间：2012-09-26T07:22:32.877
> 
> 标签：android, mono, android-tabhost

我是 Mono for Android 的新手，我正在尝试移植一个旧应用程序，但我在使用 TabHost 时遇到了困难......

在教程页面中，Xamarin 写道：“您可以通过以下两种方式之一实现您的选项卡内容：使用选项卡在同一活动中交换视图，或使用选项卡在完全独立的活动之间进行更改。在本教程中，您将创建一个选项卡式 UI，它为每个选项卡使用单独的 Activity。”

有人可以帮助开发“使用选项卡在同一活动中交换视图”的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:08:54.107

现在您在 ActionBar 上有了选项卡，您的“内容”区域将由片段组成。

请点击此链接以获取有关如何将选项卡添加到您的应用程序的进一步说明和教程： [//docs.xamarin.com/Android/Guides/Platform_Features/Introduction_to_Ice_Cream_Sandwich#Action_Bar_Tabs](http://docs.xamarin.com/Android/Guides/Platform_Features/Introduction_to_Ice_Cream_Sandwich#Action_Bar_Tabs)

# java - Java替换链接中的内容

> ID：12596596
> 
> 赞同：0
> 
> 时间：2012-09-26T07:22:46.463
> 
> 标签：java, regex

我需要阅读网页的html，然后找到链接和图像，然后重命名链接和图像，我做了什么

```
reader = new BufferedReader(new InputStreamReader(socket.getInputStream(), 'UTF-8'));  
String line;  
while ((line = reader.readLine()) != null) { 
    regex = "<a[^>]*href=(\"([^\"]*)\"|\'([^\']*)\'|([^\\s>]*))[^>]*>(.*?)</a>";  
    final Pattern pa = Pattern.compile(regex, Pattern.DOTALL);  
    final Matcher ma = pa.matcher(s);  
    if(ma.find()){  
        string newlink=path+"1-2.html";
        //replace the link in href with newlink, how can i do this?
    }  
    html.append(line).append("/r/n");  
} 
```

我该怎么做评论部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T10:12:04.103

尽管如此，还是提到了替代方案：

*   Matcher 支持使用 StringBuffer 进行“全部替换”。
*   匹配的文本必须部分读取为替换文本，因此所有内容都必须在`ma.group(1)`(2, 3, ...) 中。
*   DOTALL 将允许`.`匹配换行符，而不需要使用`readLine`which 剥离行尾。
*   每行可能有多个链接。
*   您在示例代码中有一个`matcher(s)`而不是。`matcher(line)`

所以代码使用[Matcher.appendReplacement 和 appendTail](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

```
StringBuffer html = new StringBuffer();
reader = new BufferedReader(new InputStreamReader(socket.getInputStream(), 'UTF-8'));  
String line;  
regex = "(<a[^>]*href=)(\"([^\"]*)\"|\'([^\']*)\'|([^\\s>]*))[^>]*>(.*?)(</a>)";  
final Pattern pa = Pattern.compile(regex);
while ((line = reader.readLine()) != null) {
    final Matcher ma = pa.matcher(line);
    while (ma.find()) {
        string newlink=path+"1-2.html";
        ma.appendReplacement(html, m.group(1) /* a href */ + ...);
    }
    ma.appendTail(html);
    html.append(line).append("/r/n");  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:37:21.033

使用正则表达式解析 HTML 可能很困难且不可靠。最好使用 XPath 和 DOM 操作来处理类似的事情。

# c++ - 使用 sokcet 编程回写期间的数据丢失

> ID：12596599
> 
> 赞同：0
> 
> 时间：2012-09-26T07:22:50.003
> 
> 标签：c++, http, sockets

目前，我正在学习如何在 C++ 中构建一个透明的 HTTP 代理。代理客户端有两个问题，我很长时间无法解决。希望有人可以根据以下情况指出根本原因。非常感谢。:D

我现在构建的 HTTP 代理在某种程度上只能部分工作。例如，我可以通过代理访问谷歌的主页，而我在输入关键字后无法获得任何搜索结果（谷歌即时也根本不起作用）。另一方面，youtube 运行良好，包括搜索、加载视频和评论。更重要的是，还有一些像yahoo这样的网站在我输入它的URL后甚至无法显示主页。

我一开始说问题出在代理客户端的原因是因为我跟踪了我的程序的数据流。我发现套接字编程函数 write() 返回的写入大小小于我传递给回写函数的数据大小。对我来说最奇怪的观察是数据丢失问题与数据大小无关。socket write() 函数对于将近 2MB 的 youtube 视频数据可以正常工作，而对于只有 20KB 的 google 搜索请求，它会丢失数据。

此外，还有另一种情况，当我传递给我的回写函数的数据大小和套接字写入函数（）返回的写入大小相同时，浏览器显示空白。我使用wireshark跟踪通信流，并将我的与不涉及代理的纯IP通信进行比较。我发现浏览器在收到某些 HTTP 响应后并没有持续发送 HTTP 请求，与纯 IP 通信流相比。我不知道为什么浏览器没有发送其余的 HTTP 请求。

以下是我的回写功能代码：

```
void Proxy::get_data(char* buffer, size_t length)
{
    cout<<"Length:"<<length<<endl;

    int connfd;
    size_t ret;

    // get connfd from buffer
    memset(&connfd, 0, sizeof(int));
    memcpy(&connfd, buffer, sizeof(int));
    cout<<"Get Connection FD:"<<connfd<<endl; 

    // get receive data size
    size_t rData_length = length-sizeof(int);
    cout<<"Data Size:"<<rData_length<<endl;
    // create receive buffer
    char* rBuf = new char[rData_length];
    // allocate memory to receive buffer
    memset(rBuf, 0, rData_length);
    // copy data to buffer
    memcpy(rBuf, buffer+sizeof(int), rData_length);

    ret = write(connfd, rBuf, rData_length);

    if(ret < 0)
    {
        cout<< "received data failed"<< endl;
        close(connfd);
        delete[] rBuf;
        exit(1);
    }
    else
    {
        printf("Write Data[%d] to Socket\n", ret); 
    }

    close(connfd);
    delete[] rBuf;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:33:57.707

也许你可以试试这个

```
int curr = 0;
while( curr < rData_length ) {
    ret = write( connfd, rBuf + curr, rData_length - curr );
    if( ret == -1 ) { /* ERROR */ }
    else
        curr += ret;
} 
```

代替

```
ret = write(connfd, rBuf, rData_length); 
```

通常，写入的字节数`write()`可能与您要求写入的字节数不同。你最好阅读一些手册。说， http: [//linux.die.net/man/2/write](http://linux.die.net/man/2/write)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:57:18.750

在输入套接字和输出套接字之间复制字节要比这简单得多。您不需要根据上次读取的数据量来动态分配缓冲区。您只需要读入一个 char[] 数组并从该数组写入目标，同时适当考虑读取返回的长度值。

# html - html:有没有办法为html代码包含滚动条

> ID：12596604
> 
> 赞同：0
> 
> 时间：2012-09-26T07:23:09.600
> 
> 标签：html, css, scrollbar

我必须在下面为我的 html 代码包含一个滚动条。代码如下-->

```
 <html>
   <head></head>
      <body>
<div style="overflow:scroll;height:100px;scrollbar-shadow-color: #2D2C4D;scrollbar-highlight-color:#7D7E94;scrollbar-face-color: #000000;scrollbar-3dlight-color:#7D7E94;">
         <table width="100%" style="border-collapse:collapse;overflow:scroll;height:10px">
    <tr>
         <% dim CountFlg
                CountFlg = 0
                for i=0 to XmlNodes.length-1
                    if CountFlg <= 2 then %>
                        <td>
                            <b><%=XmlNodes.item(i).getAttribute("xx")%></b>                                
                        </td>
                        <TD>
                            <input class="TextArea" name="<% xx % >" id="<% xx %>" style="height:35px;overflow:auto;padding-left:80px;" rows="5"cols="10"> </input>
                        </TD>
                        <% CountFlg=CountFlg+1
                    end if
                next%>
            </tr>
           </table>
          </div>
         </body>
        </html> 
```

由于我在这里有一个 for 循环，我不知道我会得到多少个标签。所以我想为我的标签放置一个滚动条。如何做到这一点？有没有办法可以在这里放置 div 标签的 if conition，就像如果 XmlNodes.length>8 然后包含 div 标签，否则不需要 div 标签。如何做到这一点。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:36:03.933

您必须将您的表格包含在 a 中`div`，并制作该 div `overflow:scroll`，如下所示：

```
<div style="overflow:scroll; height:300px">
   <table>  // your table
   </table> // goes here
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:26:09.740

使用 CSS：

```
<table style="overflow:scroll, height:200px"> 
```

如果我没记错我的 CSS，如果你有超过 200 像素的内容，那应该会导致滚动条出现在表格元素上。请注意，您必须固定高度，否则元素将继续增长（因此没有溢出滚动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T13:25:24.937

如果我只想按高度滚动，那该怎么办？目前我正在逐行和逐列滚动。如果知道该怎么做，请告诉我。

非常感谢您提前。

--- 这里我得到了解决方案

溢出-x：隐藏；溢出-y：滚动；工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T13:29:26.820

您可以使用 css 的溢出属性

```
overflow-x
overflow-y
overflow 
```

# asp.net - 在 web.config 中以 .NET 2.0 和 4.0 为目标

> ID：12596605
> 
> 赞同：1
> 
> 时间：2012-09-26T07:23:11.330
> 
> 标签：asp.net, .net-4.0, web-config, .net-2.0

我有一个通常使用 .NET 2.0 AppPool 帐户运行的 Web 应用程序。但是因为 AJAX 调用将字符串序列化的 XML 发送到服务器，所以当使用 .NET 4.0 运行相同的 AppPool 帐户时，我需要将“requestValidationMode”选项添加到 httpRuntime 设置。

但是，切换回 .NET 2.0 时，应用程序会以关于“requestValidationMode”选项的错误响应。

有没有一种方法可以让 web.config 带有一些条件标记，这样就不需要在每次为 AppPool 更改 .NET 版本时编辑 web.config？

任何帮助将不胜感激。

# android - viewflipper 不适用于 4.0

> ID：12596606
> 
> 赞同：0
> 
> 时间：2012-09-26T07:23:15.500
> 
> 标签：android, android-layout

我开发了一个在 android 2.1 版本上运行良好的应用程序，但是当我在 android 4.0 版本上启动它时，它不会运行并抛出这样的堆栈跟踪：

```
 09-26 19:45:10.961: E/AndroidRuntime(785): FATAL EXCEPTION: main
09-26 19:45:10.961: E/AndroidRuntime(785): java.lang.OutOfMemoryError
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.Bitmap.nativeCreate(Native Method)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.content.res.Resources.loadDrawable(Resources.java:1937)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.content.res.Resources.getDrawable(Resources.java:664)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.widget.ImageView.resolveUri(ImageView.java:542)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.widget.ImageView.setImageResource(ImageView.java:315)
09-26 19:45:10.961: E/AndroidRuntime(785):  at com.deedatech.AnimalsNameForKids.AnimalsNameForKidsActivity.onCreate(AnimalsNameForKidsActivity.java:85)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.Activity.performCreate(Activity.java:4465)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.os.Looper.loop(Looper.java:137)
09-26 19:45:10.961: E/AndroidRuntime(785):  at android.app.ActivityThread.main(ActivityThread.java:4340)
09-26 19:45:10.961: E/AndroidRuntime(785):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 19:45:10.961: E/AndroidRuntime(785):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 19:45:10.961: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-26 19:45:10.961: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-26 19:45:10.961: E/AndroidRuntime(785):  at dalvik.system.NativeStart.main(Native   Method) 
```

我只是不明白为什么会发生这种情况，因为相同的程序在 android 2.1 版本上运行完美，但`outOfMemoryError`在 4.0 版本上运行。如果你有什么想法请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:03:30.220

与 Anis 所说的相反，在不同的线程上解码您的位图不会帮助您避免内存不足 (OOM) 错误，您仍然将完全相同数量的数据加载到您的应用程序中。

您需要减小正在加载的图像的大小或对其进行下采样，这样您就不会加载所有数据，有关这方面的更多信息，请查看[有效地加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:49:44.807

如果您正在从 UI 线程解码位图，则存在发生 outOfMemoryError 的风险。尝试将您的解码流更改为 asynTask。

# c# - 如何取消任务使其停止

> ID：12596607
> 
> 赞同：2
> 
> 时间：2012-09-26T07:23:19.157
> 
> 标签：c#, .net-4.0, task-parallel-library

我正在使用任务从数据库等中读取一些数据。假设我无法更改 Dataaccess-API/-Layer。

这种数据访问有时可能需要一些时间（网络流量等）。每次用户更改所选项目或更改显示可用数据子集的过滤器时，都会加载它。

最后，我有一个任务启动方法的小例子。

**我的问题是：**如果用户在任务仍在运行时更改了过滤器/选择，我该如何阻止它运行？使用取消令牌时，它将完成（因为我没有在任务中使用“大”循环，所以我不能只检查每次迭代的`.IsCancelled`.

我的想法是在分配新值之前使用任务的返回类型来填充`SelectableVolts`并检查返回的任务。`IsCancelled`但是如何为异步任务执行此操作？

```
// added code at the bottom of this question 
```

**更新：**在收到诸如“我不完全确定您的问题要问什么，但这应该可以帮助您了解一些可用选项”之类的评论后。我会尽量澄清我的问题。至少我希望如此；）

1.  用户在数据网格中选择对象
2.  ViewModel 需要数据并向方法/类/foo 请求数据。
3.  任务（A）开始
4.  任务（A）仍在工作。用户选择不同的对象/行。
5.  重复步骤 1、2 和 3。所以任务（A）应该被取消/停止，一个新的任务（B）开始。
6.  Task(B) 完成后，应显示其数据。绝不应提供 Task(A) 的数据。

所以问题是：如何以正确的方式实现步骤 5 和 6。

**完整代码：**

```
 private CancellationToken cancelTokenOfFilterTask;
    private CancellationTokenSource cancelTokenSourceOfFilterTask;

private void FilterVolts()
{
    if (IsApplicationWorking)
    {
        cancelTokenSourceOfFilterTask.Cancel();
    }

    // Prepare CancelToken
    cancelTokenSourceOfFilterTask = new CancellationTokenSource();
    cancelTokenOfFilterTask = cancelTokenSourceOfFilterTask.Token;

    IsApplicationWorking = true;
    if (SelectableVolts != null && SelectableVolts.Count >= 0)
    {
        VoltThatIsSelected = null;
        SelectableVolts.Clear();
    }

    Task voltLoadTask = null;
    voltLoadTask = Task.Factory.StartNew<List<SelectableVoltModel>>(() => {
       VoltsLoader loader = new VoltsLoader();
       Thread.Sleep(2000);
       var listOfVolts = loader.LoadVoltsOnFilter(_sourceOfCachableData, ChosenFilter);
            return listOfVehicles;
        }, cancelTokenOfFilterTask).ContinueWith(listSwitcher =>
        {
            switch (listSwitcher.Status)
            {
                case TaskStatus.RanToCompletion:
                    SelectableVolts = new ObservableCollection<SelectableVoltsModel>(listSwitcher.Result);
                    IsApplicationWorking = false;
                    break;
                case TaskStatus.Canceled:
                    Console.WriteLine("Cancellation seen"); // Gets never called
                    break;           
                default:
                    break;
            }
        });
    } 
```

不知何故，当我不止一次调用此方法时，一切都会运行，`TaskStatus.RanTocompletion`这怎么可能？我对取消令牌做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:59:31.270

我不确定为什么不能在循环中包含所需的取消支持。为此，您只需将 传递给`cancelTokenOfFilterTask`您在“StartNew”委托中调用的方法。然后在那个方法里面你可以做

```
token.ThrowIfCancellationRequested(); 
```

要检查是否`Task`成功完成并处理相关结果，请使用延续

```
cancelTokenSourceOfFilterTask = new CancellationTokenSource();
cancelTokenOfFilterTask = cancelTokenSourceOfFilterTask.Token;

Task task = null;
task = Task.Factory.StartNew(() =>
{
    VoltLoader vl = new VoltLoader();
    var listOfVolts = vl.LoadVoltsOnFilter(_sourceOfCachableData, ChosenFilter);
    SelectableVolts = new ObservableCollection<SelectableVoltsModel>(listOfVolts);
}, cancelTokenOfFilterTask);

task.ContinueWith(ant => 
{
    switch (ant.Status)
    {
        // Handle any exceptions to prevent UnobservedTaskException.             
        case TaskStatus.RanToCompletion:
            if (asyncTask.Result)
            {
                // Do stuff...
            }
            else
            {
                // Do stuff...
            }
            break;
        case TaskStatus.Canceled:
            // If Cancelled you can start the task again reading the new settings.
            break;
        case TaskStatus.Faulted:
            break;
    }
}, CancellationToken.None, 
   TaskContinuationOptions.None, 
   TaskScheduler.FromCurrentSynchronizationContext()); 
```

我不完全确定您的问题是什么，但这应该可以帮助您了解一些可用的选项。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:00:56.177

**答：**我想我找到了解决方案，我必须在每次取消请求后重置 CancellationTokenSource。

这是我根据接受的答案更新的代码。如果有什么问题，我对任何信息都很高兴:)

```
 private CancellationToken cancelTokenOfFilterTask;
    private CancellationTokenSource cancelTokenSourceOfFilterTask = new CancellationTokenSource();

    private void FilterVolts()
    {
        if (IsApplicationWorking)
        {
            cancelTokenSourceOfFilterTask.Cancel();
        }

        // Prepare CancelToken
        cancelTokenOfFilterTask = cancelTokenSourceOfFilterTask.Token;

        IsApplicationWorking = true;
        if (SelectableVolts != null && SelectableVolts.Count >= 0)
        {
            VoltThatIsSelected = null;
            SelectableVolts.Clear();
        }

        Task voltsLoadTask = null;
        voltsLoadTask = Task.Factory.StartNew<List<SelectableVoltsModel>>(() => {
            VehicleLoader loader = new VehicleLoader();
            Thread.Sleep(2000); // just for testing, so the task runs a "long" time
            var listOfVolts = loader.LoadVoltsOnFilter(_sourceOfCachableData, ChosenFilter);
            return listOfVolts;
        }, cancelTokenOfFilterTask).ContinueWith(listSwitcher =>
        {
            switch (listSwitcher.Status)
            {
                case TaskStatus.RanToCompletion:
                    SelectableVolts = new ObservableCollection<SelectableVoltModel>(listSwitcher.Result);
                    IsApplicationWorking = false;
                    break;
                case TaskStatus.Canceled:
                    cancelTokenSourceOfFilterTask = new CancellationTokenSource(); // reset Source
                    break;
                default:
                    break;
            }
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:42:09.110

一种方法是使用[`CancellationToken.ThrowIfCancellationRequested Method`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.throwifcancellationrequested.aspx)which 当被调用时会抛出一个[`OperationCanceledException`](http://msdn.microsoft.com/en-us/library/system.operationcanceledexception.aspx)如果令牌有一个取消请求

你可以像这样使用它

```
 var cancelTokenSourceOfFilterTask = new CancellationTokenSource();
    var cancelTokenOfFilterTask = cancelTokenSourceOfFilterTask.Token;

    Task.Factory.StartNew(() =>
    {
        VoltLoader vl = new VoltLoader();

        //if a request is raised for cancellation then an exception will be thrown
        cancelTokenOfFilterTask.ThrowIfCancellationRequested();

        var listOfVolts = vl.LoadVoltsOnFilter(_sourceOfCachableData, ChosenFilter);

        SelectableVolts = new ObservableCollection<SelectableVoltsModel>(listOfVolts);
    }, cancelTokenOfFilterTask); 
```

上面的代码与下面的代码片段相同

```
 var cancelTokenSourceOfFilterTask = new CancellationTokenSource();
    var cancelTokenOfFilterTask = cancelTokenSourceOfFilterTask.Token;

    Task.Factory.StartNew(() =>
    {
        VoltLoader vl = new VoltLoader();

        //if a request is raised for cancellation then an exception will be thrown
        if (cancelTokenOfFilterTask.IsCancellationRequested) 
           throw new OperationCanceledException(cancelTokenOfFilterTask);

        var listOfVolts = vl.LoadVoltsOnFilter(_sourceOfCachableData, ChosenFilter);

        SelectableVolts = new ObservableCollection<SelectableVoltsModel>(listOfVolts);
    }, cancelTokenOfFilterTask); 
```

以上只是如何使用它的一个示例，有关更多信息，您可以阅读此 SO question about [why Cancellation token is required in Task constructor](https://stackoverflow.com/questions/3712939/cancellation-token-in-task-constructor-why)

# javascript - 避免隐藏元素占用空间/不可能使可见性：true 最初是 display:none 在 css 样式中

> ID：12596610
> 
> 赞同：0
> 
> 时间：2012-09-26T07:23:28.960
> 
> 标签：javascript, html, javascript-events

```
<style type="text/css">
#second{
 display:none;
}
</style> 
```

**在鼠标事件上，我想传递 div 的 id，它与我调用函数的当前元素无关。**

```
<div id="first">
     ....
     ....
</div>
<div id="second">
     ....
     ....
</div>

<input type="image" src="..." id="notrelated"
 onClick="f('first','second')"
 /> 
```

**javascript**

```
<script type="text/javascript" language="javascript">
function f(first,second){
document.getElementById(first).style.display='none';
document.getElementById(second).style.visibility='visible';
}
</script> 
```

因此，上述功能有助于隐藏和使基于图像上的鼠标事件的 div 可见。. . 我遵循了上述这些步骤，在使可见性“可见”之后它不会显示因为我已经使 div 第二次显示没有并且我尝试进行以下更改，这导致第二个 div 占据了我不喜欢的空间

```
<style type="text/css">
#second{
visibility:hidden;
}
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:30:48.460

如果我正确理解您的问题，您想传递其他 DOM 元素的 id，本例为 div。要选择其他 DIVS，您需要向这些 DIVS 添加类。

```
<div class = 'someclass1' id ='one'></div> 
```

并在您的 onclick 事件通行证上

```
$('.someclass1').attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:45:30.277

如果我有你的问题，你只想在函数中传递你的 div id。因此，您可以轻松地将它传递给任何函数。

喜欢

```
<input type="image" src="..." id="notrelated" onClick="Toggle('first','second')" /> 
```

并且您的 js 函数将起作用

```
function Toggle(first,second){
   document.getElementById(first).style.visibility='hidden'
   document.getElementById(second).style.visibility='visible'
} 
```

但是如果你只想通过这些 id 来切换这些，那么你应该将你的函数更改为 like

```
function Toggle(first,second){
   var firstDiv = document.getElementById(first);
   var secondDiv = document.getElementById(second);
   firstDiv.style.visibility= firstDiv.style.visibility == 'hidden'?'visible':'hidden';
   secondDiv.style.visibility= firstDiv.style.visibility == 'hidden'?'visible':'hidden';
} 
```

你可以查看这个**[DEMO](http://jsfiddle.net/meUuK/)**

# php - 来自网络服务器的 android 交易通知

> ID：12596612
> 
> 赞同：2
> 
> 时间：2012-09-26T07:23:35.297
> 
> 标签：php, android

我做了一个关于在线购物的网站，我希望每个交易订单都向我的 android 应用程序提供警报通知。做这个需要什么以及如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:38:16.793

你在谈论推送通知吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:44:29.853

关键字是“android 推送通知”。

如果只在 GooglePlay 上发布，那么您需要他们的官方 API。

否则，请考虑替代方案，例如： [Push Notifications in Android Platform](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)

# android - Android：将位图调整为更大的像素宽度和高度

> ID：12596616
> 
> 赞同：0
> 
> 时间：2012-09-26T07:23:52.470
> 
> 标签：android, image, android-camera

当我从相机拍照时，我得到一张大小为 300-500 KB（1800 X 1700 像素）的图像。

但是当我从我的应用程序中拍照时，我会得到一个大小为 30-50 KB（150 X 200 像素）的图像。

如何将 150 x 200 像素调整为 300 x 400 像素？

因为我将此图像发送到的服务器不会接受小于 280 x 360 像素尺寸的图像。

我现在使用的代码是：

```
Bitmap bit = (Bitmap) data.getExtras().get("data");
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bit.compress(Bitmap.CompressFormat.JPEG, 100, bao);
byte[] ba = bao.toByteArray();
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "My - Images");
File f = new File(imagesFolder, "test.jpg");
f.createNewFile();
FileOutputStream fo = new FileOutputStream(f);
fo.write(ba);
fo.flush();
fo.close(); 
```

我没有压缩图像，但与使用相机从主屏幕拍摄的图像相比，我得到的图像尺寸仍然小 10 倍。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:41:46.537

您需要创建新的位图对象并使用它`Bitmap.createScaledBitmap()`

```
Bitmap bit = (Bitmap) data.getExtras().get("data");
Bitmap bitmap =Bitmap.createScaledBitmap(bit, newWidth, newHeight, filter);
// use bitmap instead of bit object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:41:53.543

要获得全尺寸的相机图像，您应该指向相机以将图片保存在一些临时文件中。那么只有您可以获得实际尺寸的图像。

```
intent = new Intent("android.media.action.IMAGE_CAPTURE");
File photo;
try
{
    // place where to store camera taken picture
    photo = this.createTemporaryFile("picture", ".jpg");
    photo.delete();
}
catch(Exception e)
{
    Log.v(TAG, "Can't create file to take picture!");
    Toast.makeText(activity, "Please check SD card! Image shot is impossible!", 10000);
    return false;
}
mImageUri = Uri.fromFile(photo);
intent.putExtra(MediaStore.EXTRA_OUTPUT, mImageUri);
//start camera intent
activity.startActivityForResult(this, intent, MenuShootImage);

private File createTemporaryFile(String part, String ext) throws Exception
{
File tempDir= Environment.getExternalStorageDirectory();
tempDir=new File(tempDir.getAbsolutePath()+"/.temp/";
if(!tempDir.exists())
{
    tempDir.mkdir();
}
return File.createTempFile(part, ext, tempDir);
} 
```

然后在图像捕获意图完成工作后 - 只需使用以下代码从 imageUri 中获取您的图片：

```
public void grabImage(ImageView imageView)
{
this.getContentResolver().notifyChange(mImageUri, null);
ContentResolver cr = this.getContentResolver();
Bitmap bitmap;
try
{
    bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, mImageUri);
    imageView.setImageBitmap(bitmap);
}
catch (Exception e)
{
    Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT).show();
    Log.d(TAG, "Failed to load", e);
}
}

//called after camera intent finished
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent)
{
if(requestCode==MenuShootImage && resultCode==RESULT_OK)
{
   ImageView imageView;
   //... some code to inflate/create/find appropriate ImageView to place grabbed image
   this.grabImage(imageView);
}
super.onActivityResult(requestCode, resultCode, intent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:52:04.377

在拍照之前，您应该配置相机。

第一的

```
 camera.open(); 
```

检查支持的图片尺寸：

```
 Camera.Parameters p = camera.getParameters();
   List<Size> ss = p.getSupportedPictureSizes();
   Iterator<Size> it = ss.iterator();
   Size sizeIWant = null;
   while(it.hasNext()){
   Size s = it.next();
       <compute sizeIWant based on various sizes provided>
   }
   p.setPictureSize(sizeIWant.width, sizeIWant.height);
   camera.setParameters(p); 
```

然后拍照（你的代码），别忘了打电话`camera.release()`。

# ember.js - 对象控制器和数组控制器

> ID：12596619
> 
> 赞同：8
> 
> 时间：2012-09-26T07:23:58.423
> 
> 标签：ember.js

我正在从[trek.github.com学习](http://trek.github.com)[*emberjs*](http://emberjs.com/)。该教程同时使用了和。而且还有。`Em.ObjectController``Em.ArrayController``Em.Controller`

我很困惑何时使用它们，我猜`Em.ObjectController`是针对单个对象，`Em.ArrayController`针对数组并且`Em.Controller`仅针对 ApplicationController。

什么时候使用哪个有什么祝福的规则吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T10:09:53.777

通常，如果您的 Controller 表示项目列表，您将使用`Ember.ArrayController`，如果控制器表示单个项目，您将使用`Ember.ObjectController`. 类似于以下内容：

```
MyApp.ContactsController = Ember.ArrayController.extend({
    content: [],
    selectedContact: null
});

MyApp.SelectedContactController = Ember.ObjectController.extend({
    contentBinding: 'contactsController.selectedContact',
    contactsController: null
}); 
```

然后在您的`Ember.Router`（如果您使用它们）中，您将在`connectOutlets`函数内部连接两者：

```
connectOutlets: function(router) {
    router.get('selectedContactController').connectControllers('contacts');
} 
```

编辑：我从未使用过`Ember.Controller`. 查看源代码，如果您正在构建一个不适合其他两个控制器的自定义控制器，您似乎可能想要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T21:29:40.497

一般规则是它取决于路线的模型。

**如果模型是一个数组，那么你应该使用 ArrayController。**它将允许您在将来以简单的方式实现排序或过滤。ArrayController 通常连接 ObjectControllers。

**当您的模型是 Ember 对象的实例时，您应该使用 ObjectController。**它发生在您使用例如 ember 数据时。使用 Objectcontroller，您可以直接访问模型属性。你不必`model.property`每次都写。

```
App.ApplicationRoute = Ember.Route.extend({
    model: function() {
        return Ember.Object.create({name: 'Mathew'});
    }
});

My name is {{name}} 
```

**最后，当一个人没有模型时，有一个理想的情况可以使用 just`Ember.Controller`**。它不允许像 ObjectController 一样直接访问模型属性。

# c++ - 动态分配数组

> ID：12596623
> 
> 赞同：1
> 
> 时间：2012-09-26T07:24:11.427
> 
> 标签：c++

我正在开发一个 OpenGL/C++ 程序，当我在窗口中绘制坐标时，我需要在其中存储坐标。但由于绘制的点数未定义，我无法确定数组的大小。是否可以为数组动态分配空间？我可以使用任何其他数据结构来完成相同的任务吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:25:00.473

是的，使用 a`std::vector`代替。

结合`push_back`你可以动态增加元素的数量。

```
std::vector<Coordinate> coordinates;
coordinates.push_back(Coordinate(0,0));
coordinates.push_back(Coordinate(1,1)); 
```

您可以像访问数组一样访问元素：

```
coordinates[0], coordinates[1]... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:28:20.647

如建议的那样， an`std::vector`是一个不错的选择，并且此容器可确保连续内存，这对于将其作为坐标缓冲区传递很有用：

```
std::vector<Coordinate> coordinates;
coordinates.push_back(Coordinate(0,0));
coordinates.push_back(Coordinate(1,1));
// ... add more coordinates...

RenderBuffer(coordinates.data()); 
```

当然，只要内存适合缓冲区格式。

但是，由于使用连续内存，插入方法可能会由于内存块的重新分配而代价高昂；如果这可能是一个问题，如果您知道内存的最大/最小要求，您可以摆脱它保留一个大小：

```
// Create 100 instances of Coordinate and fill all instances with Coordinate(0, 0)
std::vector<Coordinate> coordinates(100, Coordinate(0, 0));

coordinates[0] = Coordinate(0,0);
coordinates[1] = Coordinate(1,1);
// ... add more coordinates...

RenderBuffer(coordinates.data()); 
```

但如果你这样做，使用数组没有区别：

```
// Create 100 instances of Coordinate and fill all instances with Coordinate(0, 0)
Coordinate[100];

coordinates[0] = Coordinate(0,0);
coordinates[1] = Coordinate(1,1);
// ... add more coordinates...

RenderBuffer(coordinates); 
```

除了一个例外，如果需要，数组无法更改其大小，但`std::vector`可以调整大小：

```
// Create 100 instances of Coordinate and fill all instances with Coordinate(0, 0)
std::vector<Coordinate> coordinates(100, Coordinate(0, 0));

coordinates[0] = Coordinate(0,0);
coordinates[1] = Coordinate(1,1);
// ... add lots of lots of lots of coordinates...

// Damn! We need more Coordinates, let's add more without worrying about resizing:
coordinates.push_back(Coordinate(0,0));
coordinates.push_back(Coordinate(1,1));    

RenderBuffer(coordinates.data()); 
```

如果不需要连续内存，则必须考虑使用其他容器，如`std::list`，插入方法相同`std::list<>::push_back`，但这种容器的插入一点也不贵（至少不像vector那么贵）。

您也可以使用`std::vector<>::resize`一次调整大小的方法，而不是调整某些`std::vector<>::push_back`调用的大小。

# css - 链接悬停css样式问题

> ID：12596629
> 
> 赞同：0
> 
> 时间：2012-09-26T07:24:24.680
> 
> 标签：css

我想知道图像中的链接悬停样式是否可以使用纯 css 或者我们需要使用背景图像、js 或 jquery 等来实现这一点！

![在此处输入图像描述](../Images/ba1a007f5c9a435dcf87e17b48c6a818.png)

任何例子将不胜感激:)谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:48:17.960

最好的方法（例如，如果您需要支持 Internet Explorer 或想要自定义箭头）是在`50% 100%`

HTML：

```
<ul>
<li><a href="#">Link</a></li>
<li><a href="#">Another link</a></li>
</ul> 
```

​ CSS：

```
li { float: left; padding-bottom: 16px; }
li:hover { background: 50% 100% no-repeat url(http://www.staypoland.com/images/arrow-city-up.gif); }
a { float: left; }
a:hover { background: blue; }​ 
```

[http://fiddle.jshell.net/Mcz3P/](http://fiddle.jshell.net/Mcz3P/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:01:29.100

您可以使用 css 伪类 :after 来创建箭头。这可以减少无意义的 HTML 代码。

HTML：

```
<div class="div">
      About Us
</div>​ 
```

CSS：

```
.div {
    color: #fff;
    background-color: #09f;
    border: 2px solid #09f;
    font-size: 16px;
    padding: 10px;
    position: relative;
    text-align: center;
    width: 100px;
}
.div:after {
    display: block;
    content: "";
    overflow: hidden;
    position: absolute;
    left: 50px;
    bottom: -10px;
    border-style: solid;
    border-width: 10px;
    border-color:  transparent transparent #09f transparent;
    height: 0;
    width: 0;
}

​ 
```

你可以在这里看到演示：http: [//jsfiddle.net/JMaV8/](http://jsfiddle.net/JMaV8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:54:58.327

是的，使用纯 CSS 是可能的，没有任何图像。[您可以在CSSdeck](http://cssdeck.com/search/?q=menu)上找到您可能感兴趣的非常酷的东西。@afshin 的演示也是一个很好的例子，说明你可以从哪里开始做。所以继续...

# joomla3.0 - 使用 new JParameter($plugin->params) 时出错；在 joomla 3.0 中

> ID：12596630
> 
> 赞同：3
> 
> 时间：2012-09-26T07:24:24.323
> 
> 标签：joomla3.0

我在 joomla 3.0 中使用了以下代码来获取插件参数。

```
new JParameter($plugin->params); 
```

但我收到错误。

请任何人都可以帮助我。

问候，杰拉尼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:05:30.897

删除的类

*   JParameter（使用 JForm 代替，或者在大多数情况下使用 JRegistry - 例如在组件中检索插件参数）。

[资源](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T21:21:32.013

有点晚了，但对于其他偶然发现这一点的人：

利用：

```
json_decode($plugin->params); 
```

我在这里找到了这个以及许多其他关于 Joomla 3.0 变化的有用信息：[techjoomla.com](http://techjoomla.com/joomla-development/joomla-30-conversion-changes-needed-when-converting-a-common-installable-package-for-joomla-15x-a-25x-to-joomla-30.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-26T06:53:36.093

由于 JParameter 使用的是 JRegistry，这里有一个变通方法：

```
$params = new JRegistry();
$params->loadString($module->params);

$params->get('param_name'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T12:53:57.233

尝试以下代替 JParameter（J3 中已弃用的类）：

```
jimport('joomla.html.parameter');
$params = new JInput();
$params->get('params'); 
```

这可能会回答您的问题并解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-29T13:34:34.163

JParameter 不推荐使用注册表。

```
use Joomla\CMS\Plugin\PluginHelper;
use Joomla\Registry\Registry;

$plugin    = PluginHelper::getPlugin('plg_Type', 'plg_Name');
$plgParams = new Registry($plugin->params);

$param     = $plgParams->get('your_param_name', 'default_value') 
```

# selenium - 从 Selenium 转换/执行 QTP 脚本

> ID：12596632
> 
> 赞同：0
> 
> 时间：2012-09-26T07:24:30.127
> 
> 标签：selenium, qtp

我们目前正在将一个项目从 QTP 迁移到 Selenium。我们在项目中有一些用于回归测试的 QTP 脚本，我们希望避免重写它们的工作。有没有办法在没有 QTP 的情况下从任何 Selenium 框架或 IntelliJ IDEA 或 Eclipse 等执行旧的 QTP 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:30:46.383

不，在正常情况下不会。QTP 是一种昂贵的商业工具，如果有一种方法可以轻松地在 QTP*之外*运行脚本，那么 HP 的商业案例就会很糟糕。

您必须将代码重写为 Java 代码。也许有一些 VB 到 Java 的转换器（注意：QTP 脚本语言是 VBScript，而不是 VB）可以使*一些*工作更容易，但我不会把钱押在它们身上。Java 是一种非常强类型的面向对象的语言，而 VBScript 是一种非常弱类型的功能性更强的语言。即使你有一个转换器，你的 Java 代码也会很残缺。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:02:18.890

我会说，在任何情况下都不会。可以从外部执行 QTP 脚本，但不能没有 QTP 许可证。

也没有从 QTP 到 Selenium 的自动转换器。

虽然您不想丢失现有的 QTP 脚本是可以理解的，但最好现在而不是以后开始编写 Selenium 测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T12:07:36.970

我认为如果脚本是用 Jscripts 制作的，在某种程度上会很容易，我们可以在 Selenium 上执行它们，这些行不包含应用程序对象（浏览器、页面、字段）。Excel 的东西、文件系统对象等几乎没有问题，因为 Selenium(Java) 我们在处理某些对象时导入了一些包概念。我认为我们在转换它们并在 Selenium 中执行 QTP 脚本时会遇到更多困难。相反，如果我们从头开始编写 Selenium 编码会更好。

# android - 在可以输入所有数据之前，Secondary Activity 进入 Main Activity

> ID：12596639
> 
> 赞同：0
> 
> 时间：2012-09-26T07:24:55.307
> 
> 标签：android, android-intent, android-emulator

我写了一个来查看、编辑和创建联系人。当我在模拟器中运行代码时，它允许我输入名称，但我无法切换到其他编辑文本并且模拟器冻结。即使我切换，我唯一能做的就是按下后退按钮。这是我的代码，你能帮我调试一下吗？我是android编程的新手，欢迎所有建议。

```
public class AddNewContact extends Activity implements OnClickListener {
    Button Save;
    EditText Newname, NewPersonalPhone, NewHomePhone, NewOfficePhone;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newcontact);
        initialize();
    }

    private void initialize() {
        // TODO Auto-generated method stub
        Save = (Button) findViewById(R.id.bSaveContact);
        Save.setOnClickListener(this);
        Newname = (EditText) findViewById(R.id.newname);
        Newname.setOnClickListener(this);
        NewPersonalPhone = (EditText) findViewById(R.id.newpersonalphone);
        NewPersonalPhone.setOnClickListener(this);
        NewHomePhone = (EditText) findViewById(R.id.newhomephone);
        NewHomePhone.setOnClickListener(this);
        NewOfficePhone = (EditText) findViewById(R.id.newofficephone);
        NewOfficePhone.setOnClickListener(this);

    }

    public void onClick(View v) {
        boolean didItWork = true;
        // TODO Auto-generated method stub
        try {
            String nname = Newname.getText().toString();
            String npphone = NewPersonalPhone.getText().toString();
            String nhphone = NewHomePhone.getText().toString();
            String nophone = NewOfficePhone.getText().toString();

            DBContact newentry = new DBContact(AddNewContact.this);
            newentry.open();
            newentry.newRow(nname, npphone, nhphone, nophone);
            newentry.close();

        } catch (Exception e) {
            didItWork = false;
            String error = e.toString();
            Dialog display = new Dialog(this);
            display.setTitle("ERROR");
            TextView text = new TextView(this);
            text.setText(error);
            display.setContentView(text);
            display.show();
        } finally {
            if (didItWork) {
                Dialog display = new Dialog(this);
                display.setTitle("CONTACT SAVED!");
                TextView text = new TextView(this);
                text.setText("Sucess");
                display.setContentView(text);
                display.show();
            //  startActivity(new Intent("CONTACTS.class"));
            }
        }
    }

} 
```

LOGCAT

```
09-26 02:58:35.518: E/WindowManager(1913): Activity com.example.contactlist.AddNewContact has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41236e28 that was originally added here
09-26 02:58:35.518: E/WindowManager(1913): android.view.WindowLeaked: Activity com.example.contactlist.AddNewContact has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41236e28 that was originally added here
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.Window$LocalWindowManager.addView(Window.java:547)
09-26 02:58:35.518: E/WindowManager(1913):  at android.app.Dialog.show(Dialog.java:277)
09-26 02:58:35.518: E/WindowManager(1913):  at com.example.contactlist.AddNewContact.onClick(AddNewContact.java:56)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.View.performClick(View.java:4084)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.View.onKeyUp(View.java:7669)
09-26 02:58:35.518: E/WindowManager(1913):  at android.widget.TextView.onKeyUp(TextView.java:5382)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.View.dispatchKeyEvent(View.java:7086)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
09-26 02:58:35.518: E/WindowManager(1913):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1892)
09-26 02:58:35.518: E/WindowManager(1913):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1369)
09-26 02:58:35.518: E/WindowManager(1913):  at android.app.Activity.dispatchKeyEvent(Activity.java:2356)
09-26 02:58:35.518: E/WindowManager(1913):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3575)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.deliverKeyEvent(ViewRootImpl.java:3531)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3113)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
09-26 02:58:35.518: E/WindowManager(1913):  at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2930)
09-26 02:58:35.518: E/WindowManager(1913):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 02:58:35.518: E/WindowManager(1913):  at android.os.Looper.loop(Looper.java:137)
09-26 02:58:35.518: E/WindowManager(1913):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 02:58:35.518: E/WindowManager(1913):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 02:58:35.518: E/WindowManager(1913):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 02:58:35.518: E/WindowManager(1913):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 02:58:35.518: E/WindowManager(1913):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 02:58:35.518: E/WindowManager(1913):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:15:04.403

你需要 `setOnClickListener()`

甚至编辑文本？

你为什么要`setOnClickListener()`在edittexts上使用。这有什么特别的原因吗？

一旦尝试删除它们并仅使用`setOnClickListener()`按钮并运行逻辑。如果您有任何特殊原因使用`setOnClickListener()`for edittext 说明一次

# android - java.lang.OutOfMemoryError 在 android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)

> ID：12596640
> 
> 赞同：4
> 
> 时间：2012-09-26T07:24:56.350
> 
> 标签：android, bitmapfactory

我在`OutOfMemoryError`向gridview添加可变背景时得到...

`final Bitmap shelfBackground = BitmapFactory.decodeResource(resources, background);`

这是我的代码。

```
public class ShelvesView extends GridView {
    private Bitmap mShelfBackground;
    private int mShelfWidth;
    private int mShelfHeight;
    public ShelvesView(Context context) {
        super(context);
    }
    public ShelvesView(Context context, AttributeSet attrs) {
        super(context, attrs);
        load(context, attrs, 0);
    }
    public ShelvesView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        load(context, attrs, defStyle);
    }

    private void load(Context context, AttributeSet attrs, int defStyle) {
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ShelvesView,   defStyle, 0);
        int imageWidth = options.outWidth;
        final Resources resources = getResources();
        final int background = a.getResourceId(R.styleable.ShelvesView_shelfBackground, 0);
        final Bitmap shelfBackground = BitmapFactory.decodeResource(resources, background);
        if (shelfBackground != null) {
            mShelfWidth = shelfBackground.getWidth();
            mShelfHeight = shelfBackground.getHeight();
            mShelfBackground = shelfBackground;
        }

        a.recycle();
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        final int count = getChildCount();
        final int top = count > 0 ? getChildAt(0).getTop() : 0;
        final int shelfWidth = mShelfWidth;
        final int shelfHeight = mShelfHeight;
        final int width = getWidth();
        final int height = getHeight();
        int bottom = (count > 0) ? getChildAt(count - 5).getBottom() + shelfHeight : 0;
        final Bitmap background = mShelfBackground;
        for (int x = 0; x < width; x += shelfWidth) {
            for (int y = top; y < height; y += shelfHeight) {
                canvas.drawBitmap(background, x, y, null);
            }
        }

        //drawDecorations(canvas, top, shelfHeight, width);

        // canvas.drawBitmap(mShelfLeftLayer,0,bottom, null);

        super.dispatchDraw(canvas);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:35:17.820

向其添加位图选项 -

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 8;
shelfBackground = BitmapFactory.decodeResource(resources, background, options); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:38:11.867

使用 Android SDK 中的示例从 UI 线程处理图像：

```
class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
private final WeakReference<ImageView> imageViewReference;
private int data = 0;

public BitmapWorkerTask(ImageView imageView) {
    // Use a WeakReference to ensure the ImageView can be garbage collected
    imageViewReference = new WeakReference<ImageView>(imageView);
}

// Decode image in background.
@Override
protected Bitmap doInBackground(Integer... params) {
    data = params[0];
    return decodeSampledBitmapFromResource(getResources(), data, 100, 100));
}

// Once complete, see if ImageView is still around and set bitmap.
@Override
protected void onPostExecute(Bitmap bitmap) {
    if (imageViewReference != null && bitmap != null) {
        final ImageView imageView = imageViewReference.get();
        if (imageView != null) {
            imageView.setImageBitmap(bitmap);
        }
    }
} 
```

}

在这里您可以找到更多使用`sampleSize` [decodeResource](http://developer.android.com/training/displaying-bitmaps/index.html)进行解码的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:46:36.110

您可以使用 BitmapFactory.Options 类将图像裁剪为任意大小。

您可以使用以下内容：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
options.inSampleSize = 8; // 1/8th of actual image.
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

有关更多信息，请参阅[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

在这里，当您使用 a 时`Bitmap`，请始终调用其`bmp.recycle()`方法，因为`GC`无法清除 持有的内存`Bitmap`，如果您的位图没有被垃圾收集，那么您也会得到`OME`.

我也给出了通用的解决方案，请看[这个](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)。

# java - Itext 多个签名

> ID：12596643
> 
> 赞同：6
> 
> 时间：2012-09-26T07:25:13.577
> 
> 标签：java, pdf, itext, digital-signature

我必须签署具有多个签名的 pdf。这不是同时进行的。所以A签署了文件，2天后，B签署了文件，依此类推......

正如 Manning iText in Action 和网上找到的以下代码示例中所述，要在已包含签名的文档上添加签名，我只需在创建签名时添加两个参数：

```
stamper = PdfStamper.createSignature(this.pdfReader,
                    workingBaos, PdfWriter.VERSION_1_7, null, true); 
```

null 因为我不想使用临时文件和 true，以使用附加模式并创建新修订。

问题是当我打开 pdf 时，Acrobat Reader 说只有最后一个签名有效。之前的签名都是无效的。当我用 iText 验证 pdf 时，没有问题。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:31:57.637

我是你指的那本书的作者。IMO 书中关于数字签名的部分太短了，但出版商希望将页数保持在 500 以下（我设法说服他再增加大约 100 页）。

如果您想添加多个签名，请阅读此白皮书：http: [//itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures) 此白皮书仍在构建中，但您已经可以在“签署文件”部分找到您需要的代码工作流程”。

为了完整起见：如果您添加一个额外的签名，您应该创建一个`PdfStamper`in *append mode*的实例。

更新：当您说 iText 验证 PDF 时，您可能是指 iText 告诉您第二个签名有效。我认为 iText 看不到初始签名。如果有，请告诉我，我会调查的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T17:18:04.777

查看认证等级：

*   NOT_CERTIFIED——创建一个普通签名，即批准或收件人签名。一个文件可以由一个或多个收件人签署以供批准。

*   CERTIFIED_NO_CHANGES_ALLOWED——创建一个认证签名，也就是作者签名。应用签名后，将不允许对文档进行任何更改。

*   CERTIFIED_FORM_FILLING——为文档的作者创建一个认证签名。其他人仍然可以填写表单字段或添加批准签名，而不会使签名无效。

*   CERTIFIED_FORM_FILLING_AND_ANNOTATIONS——创建一个认证签名。其他人仍然可以填写表单字段或添加批准签名以及注释，而不会使签名无效。

请参阅[PDF 的数字签名](http://developers.itextpdf.com/books#digsig)

尝试：

```
PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
...
appearance.setCertificationLevel(PdfSignatureAppearance.NOT_CERTIFIED);
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-16T09:19:42.460

要为已经有签名的文档签名，您需要使用：

```
PdfSigner signer = new PdfSigner(reader, new FileStream(dest, FileMode.Create), tmp,
                new StampingProperties().UseAppendMode()); 
```

设置：UseAppendMode

# php - 自定义 SEO 友好链接

> ID：12596644
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:25:15.663
> 
> 标签：php, url, joomla, seo, components

我有一个链接自定义链接：

[http://www.snopedia.com/index.php?option=com_mtree&task=listcats&cat_id=116&Itemid=&rsid=39](http://www.snopedia.com/index.php?option=com_mtree&task=listcats&cat_id=116&Itemid=&rsid=39)

它显示一个国家/地区的度假村列表。rsid 是国家的ID。我想查看只显示国家名称的网址。喜欢：[http ://www.snopedia.com/BritishColumbia](http://www.snopedia.com/BritishColumbia)

这就是我必须应用的 Htaccess 规则，请告诉我。我还必须在其他页面上发送这些参数，例如：task=listcats, cat_id=116, Itemid=, rsid=39

谢谢，等待您的回复：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:43:09.077

嗨，您已从 Joomla 管理员更改它。

1.  登录到 Joomla 管理员
2.  转到站点 => 全局配置 => 站点
3.  您可以 `SEO Settings`从页面右侧看到。
4.  在该设置中，您必须将`Search Engine Friendly URLs`选项更改为是。

![在此处输入图像描述](../Images/24579503967776420ba587e03173e6f8.png)

# grails - grails 日志消息未显示在 STS 3.0 控制台上

> ID：12596645
> 
> 赞同：0
> 
> 时间：2012-09-26T07:25:16.000
> 
> 标签：grails, logging, console, springsource

我正在使用与 SpringSource 的 Groovy/Grails Tool Suite 3.0 捆绑在一起的 Grails 2.1，但未能成功获取日志消息以在控制台窗口中显示。我在 config.groovy 中设置了以下内容
`log4j = {`
`info 'grails.app.controller'`
`}`

但是，当我在控制器中使用以下行时，它不会显示在控制台中

`log.info " Hello World!"`

任何评论都是提示将受到欢迎。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:26:54.990

我相信这是因为您还没有调用**`appender`**控制台。

你可以这样做：

```
log4j = {
    appenders {
        console name: "stdout", threshold: org.apache.log4j.Level.INFO
    }
} 
```

您还可以使用***布局***设置指定自定义模式：

```
log4j = {
    appenders {
        console name: "stdout",
                layout: pattern(conversionPattern: "%c{2} %m%n")
    }
} 
```

参考：[Grails 日志记录](http://grails.org/doc/2.1.0/guide/single.html#logging)

# java - 将 Eclipse 中的“查找引用”限制为仅来自我的代码的引用

> ID：12596647
> 
> 赞同：15
> 
> 时间：2012-09-26T07:25:36.950
> 
> 标签：java, eclipse

我正在为具有 100 多个导入的大型软件应用程序编写插件。Find References 效果很好，但有时会返回几千个结果，尽管通常我只对在我自己的代码中查找引用感兴趣。我可以轻松地从搜索结果中删除我不感兴趣的参考文献，但有没有办法主动限制结果？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T08:49:23.487

如果您点击`Ctrl`+`H`打开“搜索”对话框，则`Java Search`可以在选项卡中选择所需的参考类型以及搜索位置。您可以将搜索限制在“Sources”，而忽略“Required projects”、“JRE Libraries”或“Application Libraries”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:45:16.477

默认情况下，参考查找器 (Ctrl+Shift+G) 会搜索整个工作区。如果您右键单击某个方法，则“参考”下有一个“工作集...”选项。我想这就是你要找的。在那里，您可以精确定义要考虑的资源。

您可以为此设置自定义快捷方式：

首选项 -> 常规 -> 键 -> 搜索“工作集中的引用”。现在设置您的自定义快捷方式并将“时间”设置为“在 Windows 中”

# ruby-on-rails-3 - 在没有区域的 Rails 中选择 time_zone

> ID：12596651
> 
> 赞同：4
> 
> 时间：2012-09-26T07:25:53.620
> 
> 标签：ruby-on-rails-3, timezone

我正在尝试将`time_zone_select`助手与 Rails 一起使用，它输出选择

```
 <%= f.time_zone_select(:time_zone) %> 
```

HTML 输出为：

```
<option value="Belgrade">(GMT+01:00) Belgrade</option> 
```

我的所有时区都是使用单独的`rake`任务计算的，该任务将时区作为字符串存储在我的数据库中，格式如下：

**欧洲/贝尔格莱德**

这会导致编辑记录出现问题，因为该`time_zone_select`区域不存储值。我做错了什么或者我能做些什么来解决这个问题？

* * *

******更多信息* *** ******

 **我创建的这个 rake 任务使用[ActiveSupport::TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)创建和存储时区。

当我创建一个时区对象时，**名称**属性返回一个字符串**“欧洲/贝尔格莱德”**，但时区助手希望这个值是**“贝尔格莱德”****

# opengl - 如何在opengl中渲染从一侧到另一侧的颜色渐变？

> ID：12596652
> 
> 赞同：1
> 
> 时间：2012-09-26T07:25:53.987
> 
> 标签：opengl, opengl-es, rendering, texture-mapping, opengl-3

我想渲染从一侧到另一侧的颜色渐变。如图所示，颜色渐变从最小边界框开始到最大边界框。代码如下。

```
Point c = (VERTICES[i] - min) / (max - min);
p_COLOR[i].setRGB(c.red, c.green, c.blue); 
```

![在此处输入图像描述](../Images/ed196de08b66a29849ef55e5662a2818.png)

这里的问题是，颜色渐变不遵循任何方向（例如从下到上：下侧有红色和蓝紫色两种颜色）。但我需要应用从 -x 到 x 或 -y 到 y 或 -z 到 z 的渐变，这意味着如果红色从 -y 开始，那么只有红色覆盖 -y 侧区域，然后通过将渐变从 -y 移动到 y , 以红后蓝后绿后黄等递增颜色。下侧不应有红色和蓝紫色，必须只有红色然后向上移动到蓝色然后绿色等。

我怎样才能做到这一点 ？等式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:37:01.480

您的解决方案非常简单，但非常有限。`VERTICES[i]`如果您希望渐变仅应用于一个轴，则应仅使用 VERTICES 结构的一个组件（我假设保持当前顶点的位置）。将您的代码分成两部分：

**梯度函数**

```
vec3 Gradient (float param) 
{
    param = clamp(param, 0, 1);

    // we are treating these colors as HSL now:
    vec3 ColorA (0, 0.5, 0.5);
    vec3 ColorB (1, 0.5, 0.5);

    // so now we need to convert them to plain old RGB
    // note how the blending equation remains the same
    return HSL2RGB(param * ColorA + (1-param) * ColorB); // simple blending equation
} 
```

**着色功能**

```
float c = ((VERTICES[i] - min) / (max - min)).x; // or y,z
p_COLOR[i].setRGB(Gradient(c)); 
```

着色器在普通的 GLSL 中，所以请原谅我对 ES 的无知。

# ios5 - 错误：""_OBJC_METACLASS_$_CDVViewController"，引用自："在 Xcode4.3

> ID：12596654
> 
> 赞同：6
> 
> 时间：2012-09-26T07:25:55.733
> 
> 标签：ios5, cordova, xcode4.3, cordova-2.0.0

我也是 iphone 开发和 phonegap 的新手。现在我想使用 phonegap 创建简单的 iphone 应用程序。现在我在lion mac 中使用phonegap2.0。我的 Xcode 版本是 4.3。现在我的问题是在我的 Simulator 5.0 中运行 Xcode 时在 xcode 中安装 phonegap2.0 之后。我得到了以下错误。

```
"Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CDVViewController", referenced from:
      _OBJC_CLASS_$_ViewController in ViewController.o
      objc-class-ref in AppDelegate.o
  "_OBJC_METACLASS_$_CDVViewController", referenced from:
      _OBJC_METACLASS_$_ViewController in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)" 
```

请帮我解决这个问题。提前致谢。我附上了错误页面的屏幕截图供您参考。 ![在此处输入图像描述](../Images/52f0c9294fe0c7303c615e2e355e4488.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T16:46:03.963

检查您的项目是否链接`libCordova.a`（在我的情况下，Xcode 在将 CordovaLib.xcodeproj 移动到另一个位置时忘记了引用）。

*   **在Project Navigator**中选择您的项目
***   转到**摘要**选项卡*   拖动`CordovaLib.xcodeproj > Products > libCordova.a`到**链接框架和库****

 **![在此处输入图像描述](../Images/df95b8dac5460acc93c5ac82ffe773d3.png)

清洁和建造。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T07:58:18.950

请检查您的 ViewController.m 文件并转到 1\. 在 xcode 中构建阶段 2\. 选择编译源 3\. 按 + 按钮添加 .m/.mm 文件

我认为它现在会成功运行

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T23:59:21.377

从您的项目和引用的子项目 Cordova 的构建设置中删除 armv7s。将目标设置为 4.3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T19:56:05.353

我有一个类似的问题。不知何故，我的核心数据实体的 NSManagedObject 子类在 Compile Sources 表中出现了两次。当编译器遇到这些重复项中的第一个时，它会窒息。

我刚刚进入 Compile Sources 表并删除了每个 .m 列表的第二次出现。**

# php - Yii 在两个日期显示验证错误

> ID：12596658
> 
> 赞同：2
> 
> 时间：2012-09-26T07:26:09.737
> 
> 标签：php, yii, validation

在 Yii 中，我正在编写一个名为 Invoice Application 的小应用程序。在这我有两个领域称为`Invoice Issue Date`和`Due Date`。我想要验证两个输入日期字段，因此它`Due Date`必须大于`Invoice Issue Date`. 所以我在模型中制定了以下规则：

```
public function rules (){
    array('due_date','compare','compareAttribute'=>'invoice_issue_date',
          'operator'=>'>',
          'allowEmpty'=>false,'message'=>'Due Date must be greater then Invoice Issue Date.'),
} 
```

它工作正常，但是当一个字段中有一个两位数的日期（10 到 31）而另一个有一个位的日期（1 到 9）时，这个验证根本不起作用。有人可以告诉我这里有什么问题吗？欢迎任何帮助和建议。

**更新**

对于我`CJuiDatePicker`用来输入日期字段的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:40:31.827

我认为，这是许多 PHP 开发人员常犯的错误。

```
if( '2012-07-23' > '2012-08-17' ) 
// this is equivalent to comparing two strings , not dates 
```

正确的方法是...

```
if( strtotime('2012-07-23') > strtotime('2012-08-17') ) 
// I prefer to use "mktime" than "strtotime" for performance reasons 
```

您可能想编写自己的验证方法或在验证之前将这些日期转换为整数。

**编辑**

将此添加到您的模型类

```
public function rules () {
    array('due_date', 'isDueDateGreater'),
}

public function isDueDateGreater($attribute, $params) {
    if( strtotime($this->due_date) < strtotime($this->invoice_issue_date) ) 
        $this->addError('due_date', 'Due Date must be greater then Invoice Issue Date.');
} 
```

# google-maps-api-3 - 带有按钮的信息窗口

> ID：12596659
> 
> 赞同：2
> 
> 时间：2012-09-26T07:26:10.047
> 
> 标签：google-maps-api-3, infowindow

嗨，我正在尝试将按钮放在信息窗口中，当我单击按钮时，应该至少会发生一些动作。下面是我的代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    function initialize() {

        var mapOptions = {
            zoom: 7,
            center: new google.maps.LatLng(12.98,77.59),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

        var infoWindow = new google.maps.InfoWindow();

        (function() {
            var marker = new google.maps.Marker({
                map: map,
                draggable: false,
                position: new google.maps.LatLng(12.98,77.59)
            });
            var content =   "<div id='tabs'>"+
                            "<form id='button'>"+
                            "<div>"+
                            "<input type='button' onclick='alert(infoWindow)'>"+
                            "</div>"+
                            "</form>"+
                            "</div>";  
   google.maps.event.addListener(marker, 'click', function(event) {
                infoWindow.setContent(content);
                infoWindow.open(map, marker);
            });
        })();

    };
  </script>
  </head>
  <body onload="initialize()">
    <div id="map" style="width:400px; height:300px"></div>
  </body>
  </html> 
```

在这里我可以添加按钮但无法使其工作..任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:35:00.830

您将 alert() 中的值作为变量而不是字符串传递。您需要在单引号或双引号内传递

```
var content =   "<div id='tabs'>"+
                "<form id='button'>"+
                "<div>"+
                "<input type='button' onclick='alert(\"infoWindow\")'>"+ // here
                "</div>"+
                "</form>"+
                "</div>"; 
```

现在试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:16:49.473

如果您想从 InfoWindows 中获得更多信息并将 HTML 内容放入其中，我建议您尝试[InfoBox](https://github.com/googlemaps/v3-utility-library/tree/master/infobox)。[在这里](http://htmlpreview.github.io/?https://github.com/googlemaps/v3-utility-library/blob/master/infobox/docs/reference.html)查看参考

它有一些额外的东西，比如关闭窗口。

# c# - C#中的GDAL pct2rgb.py返回单色数据集

> ID：12596660
> 
> 赞同：0
> 
> 时间：2012-09-26T07:26:14.837
> 
> 标签：c#, python, tiff, gdal

我尝试将`pct2rgb.py`脚本重写为`C#`（此脚本获取 8 位`TIFF`图像并将其位深度更改为`24-bit`）。当其输出存储在 HDD 上时，它可以工作。我想稍微改变一下脚本。它应该`Dataset`在不将其存储在磁盘上的情况下即时返回。它工作......几乎......问题是返回`Dataset`包含单色数据......我真的不知道为什么。可能是驱动程序从`GTiff`变为`MEM`（`Driver gTiffDriver = Gdal.GetDriverByName("MEM");`）引起的。但我不知道如何使用`GTiff`驱动程序而不是将数据存储在硬盘上......

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Linq;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using OSGeo.GDAL;
using OSGeo.OGR;
using OSGeo.OSR;
using Driver = OSGeo.GDAL.Driver;
using Encoder = System.Drawing.Imaging.Encoder;
using PixelFormat = System.Drawing.Imaging.PixelFormat;

namespace RasterLoader
{
    public class TiffConverter
    {
        private string _format = "GTiff";
        private string _srcFileName = null;
        private int _outBands = 3;
        private int _bandNumber = 1;
        private string[] _args;

        public TiffConverter(string[] args)
        {
            _args = args;
        }

        public Dataset Convert8To24Bit()
        {
            Gdal.AllRegister();

            string[] argv = Gdal.GeneralCmdLineProcessor(_args, 0);

            int i = 1;
            while (i < argv.Count())
            {
                string arg = argv.ElementAt(i);
                switch (arg)
                {
                    case "-of":
                        i++;
                        _format = argv[i];
                        break;
                    case "-b":
                        i++;
                        _bandNumber = int.Parse(argv[i]);
                        break;
                    case "-rgba":
                        _outBands = 4;
                        break;
                    default:
                        if (string.IsNullOrEmpty(_srcFileName))
                        {
                            _srcFileName = argv[i];
                        }
                        else
                        {
                            Usage();
                        }
                        break;
                }
                i++;
            }

            string tmpFileName = _srcFileName + ".bak";

            // open source file
            Dataset srcDS = Gdal.Open(_srcFileName, Access.GA_ReadOnly);
            if (srcDS == null)
            {
                throw new Exception("Unable to open " + _srcFileName + ".");
            }

            Band srcBand = srcDS.GetRasterBand(_bandNumber);

            // ensure we recognise the driver
            Driver dstDriver = Gdal.GetDriverByName(_format);
            if (dstDriver == null)
            {
                throw new Exception("\"" + _format + "\" not registered.");
            }

            // build color table
            int[][] lookup = new int[4][];
            lookup[0] = Enumerable.Range(0, 256).ToArray();
            lookup[1] = Enumerable.Range(0, 256).ToArray();
            lookup[2] = Enumerable.Range(0, 256).ToArray();
            lookup[3] = new int[256];

            for (i = 0; i < 256; i++)
            {
                lookup[3][i] = 255;
            }

            ColorTable ct = srcBand.GetRasterColorTable();

            if (ct != null)
            {
                for (i = 0; i < Math.Min(256, ct.GetCount()); i++)
                {
                    ColorEntry entry = ct.GetColorEntry(i);
                    for (int j = 0; j < 4; j++)
                    {
                        switch (j)
                        {
                            case 0:
                                lookup[j][i] = entry.c1;
                                break;
                            case 1:
                                lookup[j][i] = entry.c2;
                                break;
                            case 2:
                                lookup[j][i] = entry.c3;
                                break;
                            case 3:
                                lookup[j][i] = entry.c4;
                                break;
                        }
                    }
                }
            }

            // create the working file
            string tifFileName = string.Empty;
            if (_format.Equals("GTiff", StringComparison.OrdinalIgnoreCase))
            {
                tifFileName = tmpFileName;
            }
            else
            {
                tifFileName = Path.Combine(Directory.GetParent(tmpFileName).Name, "temp.gif");
            }

//            Driver gTiffDriver = Gdal.GetDriverByName("GTiff");
            Driver gTiffDriver = Gdal.GetDriverByName("MEM");

            Dataset tifDS = gTiffDriver.Create(tifFileName, srcDS.RasterXSize, srcDS.RasterYSize, _outBands, DataType.GDT_Byte,
                                               new string[] {});

            // we should copy projection information and so forth at this point
            tifDS.SetProjection(srcDS.GetProjection());
            double[] geotransform = new double[6];
            srcDS.GetGeoTransform(geotransform);
            tifDS.SetGeoTransform(geotransform);

            if (srcDS.GetGCPCount() > 0)
            {
                tifDS.SetGCPs(srcDS.GetGCPs(), srcDS.GetGCPProjection());
            }

            // do the processing one scanline at a time
            for (int iY = 0; iY < srcDS.RasterYSize; iY++)
            {
                byte[] srcData = new byte[srcDS.RasterXSize*1];
                srcBand.ReadRaster(0, iY, srcDS.RasterXSize, 1, srcData, srcDS.RasterXSize, 1, 0, 0);

                for (int iBand = 0; iBand < _outBands; iBand++)
                {
                    int[] bandLookup = lookup[iBand];

                    int[] dstData = new int[srcData.Count()];
                    for (int index = 0; index < srcData.Count(); index++)
                    {
                        byte b = srcData[index];
                        dstData[index] = bandLookup[b];
                    }

                    tifDS.GetRasterBand(iBand + 1).WriteRaster(0, iY, srcDS.RasterXSize, 1, dstData,
                                                               srcDS.RasterXSize, 1, 0, 0);
                }
            }

            return tifDS;
        }

        private void Usage()
        {
            Console.WriteLine("Usage: pct2rgb.py [-of format] [-b <band>] [-rgba] source_file dest_file");
            throw new Exception("Bad arguments.");
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:26:55.527

好的。我找到了解决方案。我的问题是我试图转换所有文件（即使格式很好）。那么`ct`变量 ( `ColorTable`) 是`null`。

解决方案：

```
if (ct != null)
{
// same code here
}
else
{
   return srcDS;
} 
```

# forum - 论坛软件 - 将所有图像存储在数据库中

> ID：12596661
> 
> 赞同：0
> 
> 时间：2012-09-26T07:26:14.883
> 
> 标签：forum, user-forums

我正在寻找基于 PHP 的论坛软件，它将**所有上传**的图像存储到数据库而不是文件系统中。

我正忙着浏览这个列表[http://en.wikipedia.org/wiki/Comparison_of_Internet_forum_software_%28PHP%29](http://en.wikipedia.org/wiki/Comparison_of_Internet_forum_software_%28PHP%29)，但我希望这里有人已经知道了一些事情。

免责声明：是的，我完全意识到将图像存储在数据库中是愚蠢的，但这是客户“必须满足”的要求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:29:17.043

在浏览了所有论坛系统之后，除非您重写系统的某些部分，否则这几乎是不可能的。

# ios - 未使用 LDFLAGS

> ID：12596663
> 
> 赞同：0
> 
> 时间：2012-09-26T07:26:20.833
> 
> 标签：ios, gcc, arm

我已经像这样设置了 LDFLAGS ：

```
export LDFLAGS="-L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib" 
```

但它似乎仍然只在 /usr/lib/system

```
configure:2859: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2   -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib conftest.c  >&5
ld: in /usr/lib/system/libcache.dylib, missing required architecture armv7 in file /usr/lib/system/libcache.dylib (2 slices) for architecture armv7
collect2: ld returned 1 exit status 
```

我该如何设置正确的方法？？？

# php - smarty如何从多维数组中获取元素

> ID：12596670
> 
> 赞同：1
> 
> 时间：2012-09-26T07:27:00.857
> 
> 标签：php, arrays, foreach, smarty, smarty2

我有多维数组...

```
Array (2)
1 => Array (1)
  Body => Array (4)
    1 => "Color"
    3 => "Metal-Parts"
    4 => "Accessories"
    5 => "Materials"
2 => Array (1)
  Interieur => Array (1)
    2 => "Inner-Bags" 
```

我想得到这样的结果

```
> Body
    > Color
    > Metal-Parts
    > Accessories
    > Materials
> Interieur 
    >Inner-Bags 
```

但我没有找到结果，我正在使用这段代码..

```
[{assign var="labelarr" value=$myParam}]

[{foreach from=$labelarr key=key item=item}]

[{foreach from=$item[1] key=key1 item=item1}] 

     <h2>[{$key1}]</h2>   

[{/foreach}]

[{/foreach}] 
```

但是，我得到这样的结果..只打印

> 身体

所以请帮助我..谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:41:34.337

怎么样

```
{foreach from=$labelarr key='label_key' item='label'}
   > {$label_key}
   {foreach from=$label item='label_child'}
     > {$label_child}
   {/foreach}
{/foreach} 
```

# ruby-on-rails-3 - 我可以使用passenger+apache在同一个vps上部署两个不同的rails应用程序和两个不同的ruby版本吗？

> ID：12596674
> 
> 赞同：1
> 
> 时间：2012-09-26T07:27:32.140
> 
> 标签：ruby-on-rails-3, rvm, passenger, httpd.conf

我有一个在 cent os 上运行的服务器，我已经在上面安装了 apache2 和乘客。在 httpd.conf 我有以下配置来加载乘客

```
LoadModule passenger_module /usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.17
PassengerRuby /usr/local/bin/ruby 
```

所以根据这个配置，我可以在这台使用 ruby​​ 1.8 运行的服务器上部署应用程序。但是现在我的问题是，如果我想部署一个使用 ruby​​ 1.9.2 的应用程序呢？我应该怎么办？可能吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:11:17.963

您可以按照此链接查看在两个 ruby​​ 版本上运行的 apche/nginx

[http://robaldred.co.uk/2011/06/running-passenger-with-multiple-different-ruby-versions-apache-nginx-rvm/](http://robaldred.co.uk/2011/06/running-passenger-with-multiple-different-ruby-versions-apache-nginx-rvm/)

# android - 带有 JSON 的 Android Asynctask

> ID：12596676
> 
> 赞同：0
> 
> 时间：2012-09-26T07:27:36.577
> 
> 标签：android, json, android-asynctask

我是 android 的新手，我正在尝试用 Json 做一些异步任务，我想从 tke Json 文件中获取数据。我的代码是：

```
package com.example.httpsample;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.example.httpsample.HttpExample.Read;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    TextView httpsetup;
    HttpClient client;
    JSONObject json;

    //url tanımlama:
    final static String URL = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.httpex);
        httpsetup = (TextView) findViewById(R.id.tvHttp);
        //client açıyoruz.
        client = new DefaultHttpClient();
        //hangi datayı almak istiyorsak onun keyini alıyoruz
        new Read().execute("text");
    }

    public JSONObject lastTweet(String username) throws ClientProtocolException, IOException, JSONException{

        //call url
        StringBuilder url = new StringBuilder(URL);

        url.append(username);

        //url ye request gönderme
        HttpGet get = new HttpGet(url.toString());
        //response from url
        HttpResponse r = client.execute(get);

        int status = r.getStatusLine().getStatusCode();
        if (status == 200){

            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray timeline = new JSONArray(data);
            JSONObject last = timeline.getJSONObject(0);
            return last;
        }else{
            Toast.makeText(MainActivity.this, "error", Toast.LENGTH_SHORT).show();
            return null;
        }
    }

    public class Read extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {

            // TODO Auto-generated method stub
        try {
            json = lastTweet("mybringback");
            return json.getString(params[0]);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {

            // TODO Auto-generated method stub
            httpsetup.setText(result);
        }
    }

} 
```

但是当我运行该项目时，我遇到了 Force close 问题，我的 eclipse 说：

```
- 09-26 07:17:17.964: E/AndroidRuntime(275): FATAL EXCEPTION: AsyncTask
   #1 09-26 07:17:17.964: E/AndroidRuntime(275): java.lang.RuntimeException: An error occured while executing
   doInBackground() 09-26 07:17:17.964: E/AndroidRuntime(275):  at
   android.os.AsyncTask$3.done(AsyncTask.java:200) 09-26 07:17:17.964:
   E/AndroidRuntime(275):   at
   java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   java.util.concurrent.FutureTask.setException(FutureTask.java:124)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   java.util.concurrent.FutureTask.run(FutureTask.java:137) 09-26
   07:17:17.964: E/AndroidRuntime(275):     at
   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   java.lang.Thread.run(Thread.java:1096) 09-26 07:17:17.964:
   E/AndroidRuntime(275): Caused by: java.lang.RuntimeException: Can't
   create handler inside thread that has not called Looper.prepare()
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   android.os.Handler.<init>(Handler.java:121) 09-26 07:17:17.964:
   E/AndroidRuntime(275):   at android.widget.Toast.<init>(Toast.java:68)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   android.widget.Toast.makeText(Toast.java:231) 09-26 07:17:17.964:
   E/AndroidRuntime(275):   at
   com.example.httpsample.MainActivity.lastTweet(MainActivity.java:67)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   com.example.httpsample.MainActivity$Read.doInBackground(MainActivity.java:79)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   com.example.httpsample.MainActivity$Read.doInBackground(MainActivity.java:1)
   09-26 07:17:17.964: E/AndroidRuntime(275):   at
   android.os.AsyncTask$2.call(AsyncTask.java:185) 09-26 07:17:17.964:
   E/AndroidRuntime(275):   at
   java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
   09-26 07:17:17.964: E/AndroidRuntime(275):   ... 4 more 09-26
   07:17:18.184: D/dalvikvm(275): GC_FOR_MALLOC freed 2898 objects /
   203488 bytes in 211ms 09-26 07:22:18.404: I/Process(275): Sending
   signal. PID: 275 SIG: 9 
```

错误。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:30:08.787

删除线

```
 Toast.makeText(MainActivity.this, "error", Toast.LENGTH_SHORT).show(); 
```

不允许从 trhead 访问 gui 元素。`onPreExecute`您可以通过覆盖or来在 asynctask 类中显示 Toast `onPostExecute`，但不能在您的 Web 服务`doInBackground`

也有问题，因为状态代码不是 200 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:30:24.943

错误是这一行：

```
Toast.makeText(MainActivity.this, "error", Toast.LENGTH_SHORT).show(); 
```

您应该将其从方法中删除，`lastTweet`因为您无法从`doInBackground`..调用 UI 方法，`onPostExecute`而是将其添加到 ..

```
protected void onPostExecute(String result) {

        if(result == null)
            Toast.makeText(MainActivity.this, "error", Toast.LENGTH_SHORT).show();
        else
            httpsetup.setText(result);
    } 
```

# regex - 正则表达式：删除画廊

> ID：12596679
> 
> 赞同：0
> 
> 时间：2012-09-26T07:27:59.337
> 
> 标签：regex, string, wordpress

我确实有这样的字符串，我不想`[gallery columns="7"]`被包括在内。我如何使用正则表达式来做到这一点。新线没问题。

```
[gallery columns="7"]

For sale house and lot in Cabancalan Mandaue

lot area 300 sqm
floor area 220 sqm
4 bedrooms 4 toilet and bath

with big lawn and open space

inside subdivision

for more info please contact 0932-219-4469 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:48:10.017

这个正则表达式应该适合你：

```
$newContent = preg_replace('/\[gallery [a-z0-9\_\-\s=\’"]+\]\s*/i', '', $oldContent); 
```

它会删除任何出现的这样的片段（包括任何以下空格）：

```
[gallery columns="7"]
[gallery height="250" width='auto' ]
[gallery rows="2" columns="4" auto-adjust="false" ] 
```

`preg_replace`文档： http: [//php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

希望，这可以解决您的问题。

编辑：这个还删除了方括号内的链接和任何其他内容：

```
$newContent = preg_replace('/\[gallery [^\]]+\]\s*/i', '', $oldContent); 
```

# javascript - 如何在 Javascript 文件中添加事件侦听器并设置路径，如 Twig 中的

> ID：12596681
> 
> 赞同：0
> 
> 时间：2012-09-26T07:28:06.963
> 
> 标签：javascript, symfony, twig

此代码工作正常：

```
<a href="#" onClick="MyWindow=window.open('{{ path('metadata', {'id': q.id}) }}',
'MyWindow', 'toolbar=yes, location=no, directories=yes, status=yes, 
 menubar=yes, scrollbars=yes, resizable=no, width=600, height=800'); 
 return false;">Quotes Metadata</a> 
```

但我不想在我的 html 中有 js。

我试图将其分开，但遇到了一些问题。

这就是我所做的：

我将此添加到我的模板中：

```
{% block javascripts %}

     <script src="{{ asset('bundles/acmequotes/js/popup.js') }}" type="text/javascript"></script>

{% endblock %} 
```

并将上面给出的代码更改为：

```
<a href="#" id="popup">Quotes Metadata</a> 
```

我的**popup.js**：

```
var popupObj = document.getElementById("popup");

popupObj.addEventListener('click', function () {

    window.open( "link", "myWindow", 
    "status = 1, height = 300, width = 300, resizable = 0" )

},false); 
```

第一个问题是 popupObj 为空，因为 Firebug 说我不能调用 addEventListener 到空对象...

第二个 - 因为这是一个 .js 文件，如何`"link"`设置
`{{ path('metadata', {'id': q.id}) }}`？

我对js一无所知，所以请帮助我使它工作！非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:33:39.957

只需在 domready 事件（或 window.onload）处执行代码，例如

```
window.addEventListener('load', function() {

   var popupObj = document.getElementById("popup");    
   popupObj.addEventListener('click', function () {

         var url = this.getAttribute('href'); // see snippet below
         window.open(url, "myWindow", 
                     "status = 1, height = 300, width = 300, resizable = 0" );

         return false;

   },false);
}); 
```

并将您的链接更改为

```
<a href="{{ path('metadata', {'id': q.id}) }}" id="popup">...</a> 
```

这样做，即使用户设备上的 javascript 不可用，您的链接也能正常工作

# c# - 将网页中的数据保存在 xml 文档中

> ID：12596685
> 
> 赞同：0
> 
> 时间：2012-09-26T07:28:27.003
> 
> 标签：c#, asp.net, xml, save, webpage

我使用 c# asp.net 制作了一个网页。它有各种文本字段和下拉列表以及一个单选按钮。现在我想将数据保存到一个 xml 文件中。而且我真的无法理解如何去做。

我页面中的各种属性是 TEXTBOX: GInfo; 否；组织；姓名；S型；版本；补充；最大用户；最大马赫；机器IP；马赫麦克；UqID

下拉列表：LType

单选按钮：MeapSupp

我是 XML 和 asp.net 和 c# 的新手。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:33:22.610

您可以使用此代码 - 基于`XmlTextWriter class`

```
 XmlTextWriter textWriter = new XmlTextWriter("yourpath", null);
                // Opens the document
                textWriter.WriteStartDocument();

textWriter.WriteStartElement("root");
textWriter.WriteAttributeString("xmlns", "x", null, "urn:1");

                // Write comments
                textWriter.WriteComment("First Comment XmlTextWriter Sample Example");

textWriter.WriteEndElement();

                // Ends the document.
                textWriter.WriteEndDocument();
                // close writer
                textWriter.Close(); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.xml.xmltextwriter.aspx](http://msdn.microsoft.com/fr-fr/library/system.xml.xmltextwriter.aspx)

您还可以使用 LINQ To XML

```
 XDocument doc = new XDocument(
        new XDeclaration("1.0", "utf-8", "yes"),
        new XComment("This is a test"),
        new XElement("root")
    );

    var root = doc.CreateElement("Test");
    .... 
```

链接：http: [//msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

# ios - 将动画添加到 UINavigationController 导致 UINavigationController 的视图（层）显示在最顶层

> ID：12596688
> 
> 赞同：0
> 
> 时间：2012-09-26T07:28:36.583
> 
> 标签：ios, uinavigationcontroller, core-animation

我正在尝试向 UINavigationController 添加一个很酷的动画效果，但是我发现一旦我这样做，它会弄乱显示在其他视图之上的其他视图，这些视图应该在它之上。

例如navivc 是一个UINavigationController overlayview 是navivc 的superview 的子视图，并且放置在navivc 之上。

```
 ...
  CATransform3D t1 = CATransform3DIdentity;
  t1.m34 = 1.0/-900;
  t1 = CATransform3DScale(t1, 0.7, 0.7, 0.3);
  t1 = CATransform3DRotate(t1, 15.0f*M_PI/180.0f, 1, 0, 0);

  CABasicAnimation *move = [CABasicAnimation animationWithKeyPath:@"transform" ];
  //[move setFromValue:[NSNumber numberWithFloat:0.0f]];
  [move setToValue:[NSNumber valueWithCATransform3D:t1]];
  [move setDuration:0.3f];
  move.removedOnCompletion = NO;
  move.fillMode = kCAFillModeForwards;
  [move setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
  CAAnimationGroup *group = [CAAnimationGroup animation];
  group.fillMode = kCAFillModeForwards;
  group.removedOnCompletion = NO;
  [group setDuration:0.3f];
  [group setAnimations:[NSArray arrayWithObjects:move, nil]];

  [navivc.view.layer addAnimation:move forKey:@"coolanimation"];

  ... 
```

动画是正常且正确的，但是现在 navivc 的视图显示在覆盖视图的顶部。

似乎问题只发生在“变换”路径上，我尝试了其他关键路径，例如位置、比例、平移等，所有这些似乎都是正确的。但是 3D 变换弄乱了顶部的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:04:29.623

我建议不要为视图控制器的内容视图设置动画。相反，在视图控制器的内容视图中创建一个容器视图并为其设置动画。

从您的帖子中不清楚 overlayView 在您的视图层次结构中的位置，因此很难为您提供有关如何防止动画覆盖覆盖视图的具体说明。您可以尝试更改 overlayView 图层的 zPosition 以使其显示在您正在制作动画的图层上方。

# c# - 为什么浮点变量在 C# 中在 16777216 处停止递增？

> ID：12596695
> 
> 赞同：61
> 
> 时间：2012-09-26T07:29:12.637
> 
> 标签：c#, floating-point

```
float a = 0;
while (true)
{
    a++;
    if (a > 16777216)
        break; // Will never break... a stops at 16777216
} 
```

谁能向我解释为什么在这段代码中浮点值在 16777216 处停止增加？

**编辑：**

或者更简单：

```
float a = 16777217; // a becomes 16777216 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-26T09:15:01.640

IEEE-754 浮点数（32 位）的简短总结：

*   1 位符号（0 表示正数，1 表示负数）
*   8 位指数（有 -127 偏差，这里不重要）
*   23 位“尾数”
*   除了指数值 0 和 255 之外，您可以将值计算为：`(sign ? -1 : +1) * 2^exponent * (1.0 + mantissa)`
    *   尾数位表示小数分隔符*后的**二进制*数字，例如，小数分隔符前面的值不存储，但隐式假定为 1（如果指数为 255，则假定为 0，但这并不重要），因此对于30，例如，这个尾数示例表示值*`1001 0000 0000 0000 0000 000 = 2^-1 + 2^-4 = .5 + .0625 = .5625``1.5625`*

 *现在以您的示例为例：

16777216 正好是 2 ^(24)，并且将表示为 32 位浮点数，如下所示：

*   符号 = 0（正数）
*   指数 = 24（存储为 24+127=151= `10010111`）
*   尾数 = .0
*   作为 32 位浮点表示：`0 10010111 00000000000000000000000`
*   因此：价值=`(+1) * 2^24 * (1.0 + .0) = 2^24 = 16777216`

现在让我们看看数字 16777217，或者正好是 2 ^(24) +1：

*   符号和指数相同
*   尾数必须正好是 2 ^(-24)，这样`(+1) * 2^24 * (1.0 + 2^-24) = 2^24 + 1 = 16777217`
*   **这就是问题所在。**尾数不能有值 2 ^(-24)因为它只有 23 位，所以数字 16777217 不能用 32 位浮点数的精度来表示！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-26T07:33:41.493

16777217 不能用浮点数精确表示。浮点数可以精确表示的下一个最大数字是 16777218。

因此，您尝试将浮点值 16777216 增加到 16777217，这无法以浮点数表示。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-26T07:34:05.527

当您以二进制表示形式查看该值时，您会看到它是一个和多个零，即`1 0000 0000 0000 0000 0000 0000`，或正好是 2^24。这意味着，在 16777216，这个数字刚刚增长了一位数。

由于它是一个浮点数，这可能意味着其末尾仍存储的最后一个数字（即在其精度范围内）也向左移动。

可能，您所看到的是精度的最后一位刚刚转移到大于 1 的值，因此添加一个不再有任何区别。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-03T02:13:06.550

想象一下十进制形式。假设你有号码：

```
1.000000 * 10^6 
```

或 1,000,000。如果你只有六位数的准确度，那么在这个数字上加上 0.5 就会得到

```
1.0000005 * 10^6 
```

但是，当前使用 fp 舍入模式的想法是使用“舍入到偶数”而不是“舍入到最近”。在这种情况下，每次增加此值时，它都会以浮点单位向下舍入回 16,777,216 或 2^24。IEE 754 中的单曲表示为：

```
+/- exponent (1.) fraction 
```

“1”在哪里。是隐含的，在这种情况下，分数是另外 23 位，全为零。额外的二进制 1 将溢出到保护位，向下执行舍入步骤，并且每次都被删除，无论您增加多少次。最后一个位置的`ulp`或*单位*将始终为零。最后一次成功的增量来自：

```
+2^23 * (+1.) 11111111111111111111111 -> +2^24 * (1.) 00000000000000000000000 
```*

# javascript - 如何使文本区域中的某些字符不可编辑

> ID：12596698
> 
> 赞同：0
> 
> 时间：2012-09-26T07:29:31.240
> 
> 标签：javascript, html

我需要使某些字符在文本区域内不可编辑...即

我有一个文本区域名称`TxtMsg`和 ID `TxtMsg`，值是

```
Dear User, Thank you for your contact................... We will contact you soon ...Thanks again 
```

在这里，用户可以在`...................`IS 中输入任何内容，这可能吗？

有人知道吗？请回复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T07:31:01.457

您只需要制作`..............`一个文本区域。其余的文本应该是 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:32:33.633

不是纯 HTML，不是（除非您遵循@alexandernst 的建议，即仅将可编辑部分设为`<input type="text" />`元素）。

使用 Javascript，您可以挂钩插入符号（请参阅[文本区域中的插入符号位置，从开头开始的字符](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)）并撤消对不在“。”范围内的文本所做的任何更改。字符，但这会过于复杂，并且不适用于禁用脚本的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:34:53.470

[jquery-keyfilter](http://code.google.com/p/jquery-keyfilter/)，这个插件通过指定的正则表达式过滤键盘输入。

例如

```
$("#input").keyfilter(/[^#\*@0-9]/); 
```

**或者**

```
$("#input").bind("keypress", function(evt) 
{ 
        var charCode = (evt.which) ? evt.which : window.event.keyCode;  

        if (charCode <= 13) { 
            return true; 
        } 
        else { 
            var keyChar = String.fromCharCode(charCode); 
            var re = /[a-zA-Z]/ 
            return re.test(keyChar);
        } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T07:40:33.557

使用 HTML5`contenteditable="true"`属性，你可以尝试这样的事情，

演示：http: [//jsfiddle.net/muthkum/ZSNpQ/](http://jsfiddle.net/muthkum/ZSNpQ/)

# php - 需要刷新页面内容

> ID：12596707
> 
> 赞同：3
> 
> 时间：2012-09-26T07:30:26.837
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在使用 codeigniter 框架，目前正在研究社交网络之类的东西。我的问题是，当用户单击提要链接时，我需要通知用户他们的朋友活动而不重新加载页面。我尝试了以下脚本，

```
<script>
setInterval(function() {
$('#reload').fadeOut("slow").load('user_feeds').fadeIn("slow");
}, 10000);
</script> 
```

它增加了我的服务器的负载。实现此目的的任何其他想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:32:54.757

然后尝试减少时间间隔

```
<script>
 setInterval(function() {
 $('#reload').fadeOut("slow").load('user_feeds').fadeIn("slow");
 }, 1000);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:03:15.777

这实际上是一个非常有趣的问题，您需要的是[COMET](http://en.wikipedia.org/wiki/Comet_%28programming%29#Ajax_with_long_polling)的实现。有一个使用 Comet 的事件路由总线，称为 COMETD。COMETD 也有 javascript 实现和 Jquery 的绑定。[http://cometd.org/documentation/2.x/cometd-javascript](http://cometd.org/documentation/2.x/cometd-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:48:47.080

Manoj 您在这里尝试实现的是通知和驻留在服务器上的数据源，因此您无法从浏览器通过从服务器拉取或推送来做到这一点。

拉你可以通过持续轮询/频繁轮询来实现 - 通常通过设置超时并获取通知。

推送 - 理想情况下不是真正推送，您可以通过结合 AJAX+Comet 来实现这一点，这也可以通过长轮询来实现，在这种情况下，您与服务器保持恒定连接以获取任何新更新，并在有更新时将数据返回到服务器。

让我知道这是否有帮助或您需要更多信息

# java - 如何使用 UnboundID 获取 DN 和密码

> ID：12596708
> 
> 赞同：2
> 
> 时间：2012-09-26T07:30:28.423
> 
> 标签：java, ldap, openldap, unboundid-ldap-sdk

我需要一些关于 UnboundID 的帮助。我听说这是一个不错的选择，但我不太习惯。

所以我需要做一个 LDAP 监听器。在这个监听器上，我应该能够捕获绑定请求（例如来自 ldap 浏览器）。我想知道如何获取 DN 和密码。这是我的 LDAP 侦听器代码：

```
 public ResultCode CreateLdapServer () throws LDAPException {
       CannedResponseRequestHandler requestHandler = new CannedResponseRequestHandler();
    LDAPListenerConfig config =
             new LDAPListenerConfig(4243, requestHandler);
      try
      {
        config.setListenAddress(
             InetAddress.getByName("localhost"));
      }
      catch (final Exception e)
      {
        System.err.println("Unable to create the listen server.");
        return ResultCode.PARAM_ERROR;
      }

    listener = new LDAPListener(config);

    try
    {
      listener.startListening();
      System.out.println("Serveur is listening ...");
    }
    catch (final Exception e)
    {
        System.err.println("Unable to start listening.");
      return ResultCode.LOCAL_ERROR;
    }
    return ResultCode.SUCCESS;
}

public static void main(String[] args) throws LDAPException {
    MyConnection connect = new MyConnection();
    connect.CreateLdapServer();
} 
```

我阅读了很多 UnboundID 文档，但找不到任何我需要的简单示例。

另外，我不太确定 CannedResponseRequestHandler 的实用性。对于我所需要的，够了吗？

另一个问题：我不确定，但我感觉我的服务器没有在听或者我什么都没有（当我连接到 ldap 浏览器时，什么也没发生）。任何想法/建议？

感谢，并有一个愉快的一天 ！

**编辑：**多亏了 xhochy，我才能够捕捉到密码和用户名。正如他所说，我将 LDAPListenerRequestyHandler 子类化为覆盖，首先是 newInstance，然后是 ProcessBindRequest。这是代码（它绝对不完美，它仍然是一个开始）。

公共类 MyConnection {

```
private LDAPListener listener;

public MyConnection(){
}

public ResultCode CreateLdapServer() throws LDAPException {
    MyLDAPListenerRequestHandler requestHandler = new MyLDAPListenerRequestHandler();
    LDAPListenerConfig config =
             new LDAPListenerConfig(4243, requestHandler);
      try
      {
        config.setListenAddress(
             InetAddress.getByName("localhost"));
      }
      catch (final Exception e)
      {
        System.err.println("Unable to create the listen server.");
        return ResultCode.PARAM_ERROR;
      }

    listener = new LDAPListener(config);

    try
    {
      listener.startListening();
      System.out.println("Serveur is listening ...");
    }
    catch (IOException e)
    {
        System.err.println("Unable to start listening.");
      return ResultCode.LOCAL_ERROR;
    }

    return ResultCode.SUCCESS;
}

public static void main(String[] args) throws LDAPException {
    MyConnection connect = new MyConnection();
    connect.CreateLdapServer();
} 
```

}

然后是LDAPListenerRequestHandler的子类：

```
public class MyLDAPListenerRequestHandler extends LDAPListenerRequestHandler {

@Override
public LDAPListenerRequestHandler newInstance(
        LDAPListenerClientConnection arg0) throws LDAPException {
        System.out.println("New Instance.");
        LDAPConnectionOptions option = new LDAPConnectionOptions();
        LDAPConnection connection = new LDAPConnection(option, "yourIPadress", yourport);
        System.out.println("Connected to : " + connection.getConnectedAddress()+ " " + connection.getConnectedPort());

    return this;
}

@Override
public LDAPMessage processBindRequest(int arg0, BindRequestProtocolOp arg1,
        List<Control> arg2) {
    System.out.println(arg1.getBindDN());
    System.out.println(arg1.getSimplePassword());
    return null;
} 
```

}

再次感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:53:41.693

许多 LDAP 服务器实现不会返回密码，并且许多不会返回您可以使用的密码。（即它可能是一个哈希）。

我会很好奇为什么有理由返回密码。

-吉姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:08:13.500

您应该继承`LDAPListenerRequestHandler`并实现`processBindRequest`. 您要查找的所有信息都包含在`BindRequestProtocolOp`（的第二个参数`processBindRequest`）中。为所有其他抽象方法添加一个空实现。

如果`request`是您的`BindRequestProtocolOp`实例，那么您可以通过以下方式获取信息：

```
String username = request.getBindDN();
ByteString password = request.getSimplePassword(); 
```

# python - Django：在模板中识别应用程序

> ID：12596722
> 
> 赞同：0
> 
> 时间：2012-09-26T07:31:52.620
> 
> 标签：python, django, django-templates

我的 Django 项目中有三个应用程序对应于网站的不同部分。所有这三个部分都可以从导航菜单访问，在 common base.html 模板中定义。

我希望能够识别调用模板以将“活动”css 类添加到与网站活动部分相对应的菜单选项的应用程序。

除了修改每个视图以将附加变量传递给模板之外，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:10:57.927

最非侵入性的方法是：

1.  编写一个模板标签来生成你的菜单。
2.  使用应用程序名称更新您的上下文。
3.  将此传递给模板标签并相应地修改 css。

我将解释第二点，因为django 文档中详细介绍了编写[自定义模板标签。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

更新上下文；我们需要一些中间件。这*应该*做你需要的：

```
class SetApplicationName(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
        request.current_app = view_func.__module__.split('.')[0] 
```

将它放在 django 可以找到的地方（在 中的任何目录中`PYTHONPATH`），并将其添加到您的中间件类中。此外，请确保您`django.core.context_processors.request`的模板上下文处理器中有。

在您的模板中，现在您有了`{{ request.current_app }}`应该指向应用程序名称的那个。

您的模板标签应该类似于`{% navigation_menu request.current_app %}`，然后您可以相应地修改您的菜单 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:41:23.737

我会尝试“覆盖” {%block%} 标签。

在您的 base.html 模板中放置如下内容：

```
{%block navigation_bar%}
 <div class="regular">First app</div>
 <div class="regular">Second app</div>
 <div class="regular">Third app</div>
{%endblock%} 
```

在您的后代模板中，将 navitation_bar 块更改为其他块。first_app_base.html 看起来像：

```
{%extends "base.html"%}

{%block navigation_bar%}
 <div class="active">First app</div>
 <div class="regular">Second app</div>
 <div class="regular">Third app</div>
{%endblock%} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:00:56.660

如果您在单独的模板中定义导航菜单，则可以[将](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)其包含在附加上下文中。

**base.html：**

```
{% block navigation %}Here will be navigation{% endblock %} 
```

**template_from_some_app.html：**

```
{% extends "base.html" %}

{% block navigation %}
    {% include "navigation.html" with active_app='second_app' %}
{% endblock %} 
```

**导航.html：**

```
<ul class="nav">
    <li {% if active_app == 'first_app' %} class="active">{% endif %}>
        First app
    </li>
    <li {% if active_app == 'second_app' %} class="active">{% endif %}>
        Second app
    </li>
    <li {% if active_app == 'third_app' %} class="active">{% endif %}>
        Third app
    </li>
</ul> 
```

# licensing - “免费用于学术用途”许可证

> ID：12596732
> 
> 赞同：4
> 
> 时间：2012-09-26T07:32:42.483
> 
> 标签：licensing

我是一所大学的数学研究员，我发布了一个代码工具箱，主要用于研究用途，但可以在工程和工业中应用。

我想要一个许可证，基本上说“如果你在大学里，你可以自由使用此代码，并将其用于出版、学习教学，但如果你在行业中，则不能——在这种情况下，请*联系*钱包”。

CC-NC-BY-SA 在我看来是完美的，但我认为有充分的理由不鼓励将其用于代码。其他开源许可证似乎都没有做我想做的事。编写我自己的许可证看起来像一个法律混乱，我宁愿避免它。

你会如何解决这个问题？

相关问题（但不完全相同）：[https](https://stackoverflow.com/questions/1232666/proper-open-source-license-to-release-academic-code) ://stackoverflow.com/questions/1232666/proper-open-source-license-to-release-academic-code，https : [//stackoverflow.com/questions/6443110 /practicalities-of-licensing-academic-software](https://stackoverflow.com/questions/6443110/practicalities-of-licensing-academic-software)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:55:31.870

我假设该工具箱是您自己编写的，并且您想与其他学者分享。如果某个行业的人赚了数百万，你想要你的份额（好吧，晴天的例子）。

我不知道任何与此相近的许可证。

不鼓励 CC-NC-BY-SA 主要有两个原因：

*   *CC 许可证不适用于软件*。他们对两种最突出的软件形式一无所知：目标代码（二进制，编译）和源代码（作者版本）。
*   *非商业*。这个术语的含义是不确定的，尤其是在法律上。

因此，您使用道德和主观的日常术语，地球上的每个人都非常接近理解您的意思，但是将其放入与版权相关的软件许可证中是有问题的。

我不是律师，但可能某种被动许可会满足您的需求。只是没有许可证，你把你的条款：

> “如果你在大学，你可以自由使用这个代码，将它用于出版，学习教学，但如果你在行业中，则不能——在这种情况下，请伸手去拿钱包

然后说这是你自己的话，你自己决定意思，以防现在或将来不清楚。（如果您与您的律师交谈，会提出您应该放弃保证的建议，而这通常是建议的。）

我敢打赌，大多数学术用户都对此感到满意。商业用户面临更多澄清的压力，因此您可以运行合同。任务完成。

另一条路线是您在 AGPL 等强大的 copyleft 许可下发布。这将涉及用户权限（因此您付出了很多），但这将是典型的以物换物，因为他们需要根据 AGPL 向所有用户提供软件，包括他们的更改和附加组件.

此外，只要您是版权所有者，您就可以提供“商业”许可（AGPL 不禁止商业使用，但它需要维护软件的自由）。

可能是有点可疑的“我没有许可”政策，或者您可以提供的东西（强版权左）+ X 可能会这样做。这两条路径中的任何一条都有利有弊，所以仔细研究一下，也许你会得到第三个想法，它正在为你做这件事。

但是，我不知道有任何现有许可证涵盖您的案例。您可能会通过研究找到一些，因为我通常对仅适用于某些用户组（例如仅学术，仅非商业）的许可证不感兴趣，因为边界不明确。

# c# - 如何在变量工具条菜单项C#上创建事件

> ID：12596745
> 
> 赞同：0
> 
> 时间：2012-09-26T07:33:29.227
> 
> 标签：c#, events, toolstrip

我已经制作了一些代码来在菜单项中显示每台已安装和在线的打印机。但是我不知道如何在单击菜单项时引发事件。我删除了获取打印机名称的代码，因为那现在不相关了。

```
string printerName; // contains the first printer name, later contains 2nd printername. This is variable.

selectprinterNameMenuItem.DropDownItems.Add(printerName); // here do I add the new printer to the menu item. 
```

通常您应该能够向菜单项添加事件；但我是通过代码创建的，我不知道确切的名称。如何检测何时单击菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:56:01.673

的`Add(String)`方法`ToolStripItemCollection`返回创建的`ToolStripItem`. 您可以将事件处理程序添加到此对象：

```
string printerName; // contains the first printer name, later contains 2nd printername. This is variable.

ToolStripItem addedItem = selectprinterNameMenuItem.DropDownItems.Add(printerName); // here do I add the new printer to the menu item.
addedItem.Click += new EventHandler(printerName_Click); // here you register to the click event 
```

编辑（根据您的评论）：

您可以使用传递给事件处理程序的 sender 参数来告知已单击的打印机名称，即：

```
 void printerName_Click(object sender, EventArgs e)
    {
        ToolStripItem item = (ToolStripItem)sender;
        string printerClicked = item.Text;

        // whatever you want based on the printerName
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:08:19.257

比挂钩您的 selectprinterNameMenuItem 的 ItemClicked。

```
selectprinterNameMenuItem.DropDownItemClicked += new ToolStripItemClickedEventHandler(xyz); 
```

找出导致事件触发的项目。

# android - 如何在 android 的 Google Maps mapview 中标记点击的位置？

> ID：12596746
> 
> 赞同：0
> 
> 时间：2012-09-26T07:33:29.513
> 
> 标签：android, google-maps

我的应用程序中有 MapActivity 和工作地图视图。我面临的问题是我想点击地图上的任何位置，显示带有文本示例的对话框：

```
do you want to mark this location? 
```

如果是，它将提取坐标并将其保存在某个地方（现在在哪里都无所谓），

我怎样才能做到这一点？我尝试使用 dispatchTouchEvent 方法，但失败了。

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) 
{   
if (event.getAction() == 1) {                
    GeoPoint p = mapView.getProjection().fromPixels(
        (int) event.getX(),
        (int) event.getY());
        // send the intent from here to your next activity with the GeoPoint coords.
        Toast.makeText(getBaseContext(), 
            p.getLatitudeE6() / 1E6 + "," + 
            p.getLongitudeE6() /1E6 , 
            Toast.LENGTH_SHORT).show();
}                      
return false;
} 
```

它向我显示了我的坐标 - 但每次我触摸地图时它都会这样做 - 我什至无法移动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:14:31.983

javadoc for[`dispatchTouchEvent(MotionEvent event)`](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)声明如下：

> 您可以覆盖它以在将所有触摸屏事件分派到窗口之前拦截它们。确保为应该正常处理的触摸屏事件调用此实现。

因此，您应该使用原始方法处理所有其他事件：

```
public boolean dispatchTouchEvent(MotionEvent event) {   
  if (event.getAction() == 1) {
    // do your stuff
    return true;
  }                      
  return super.dispatchTouchEvent(event);
} 
```

# persistence - GWT RequestFactory 与 GWTP 操作

> ID：12596749
> 
> 赞同：1
> 
> 时间：2012-09-26T07:33:40.880
> 
> 标签：persistence, action, requestfactory, gwt-platform, gwtp

我正在使用部署到 GAE 的 GWTP (Model-View-Presenter) 开发 GWT 应用程序。持久性将使用 Google Cloud SQL 完成。

我不确定使用什么将数据发送到数据库（持久性）和请求数据：GWT RequestFactory 或 GWTP Actions。它们是等价的吗？在这种情况下，每个人都有什么好处？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:25:28.237

我不会像现在这样使用 Request 工厂。即使对于 CRUD，它对我们来说也比 GWTP Actions 复杂得多。

RF 是一个伟大而强大的工具，但它有点过度设计，处理复杂数据可能真的很困难，因为你最终会遇到所有“冻结”状态问题。真正的问题出现在使用具有嵌套结构的编辑器时。您将无法保存第二级代理，甚至更多第三级。使用具有嵌套结构的编辑器使用 SimpleBeanEditorDriver 会容易得多，因为您不必为每一级嵌套对象处理令人讨厌的冻结状态。

对于具有简单 CRUD 支持的简单对象图，RF 是完美的，但是一旦您进入更复杂的结构，请振作起来，处理起来并不容易。一旦您成为 RF 专家，它就会成为一个非常强大的工具，但它仍然需要比 GWTP Actions 更多的工作来完成同样的事情。

对于使用 RF 的服务器端安全性，我使用了 AoP。另一方面，您可以使用操作处理程序，但即使使用操作处理程序，在某些情况下服务调用上的 AoP 更合适。

对于客户端批处理和缓存......这是用 RF 很难实现的。文档不清楚，处理缓存中的冻结状态是一场噩梦。有了 GWTP-Action，您已经可以使用一个简单的缓存实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:04:20.643

对于面向数据的应用程序 (CRUD)，您绝对应该使用 RF，因为它就是为此目的而设计的。现在，如果您的应用程序更加面向操作并且这些操作不涉及太多数据，那么最好使用命令模式。但是没有什么能阻止你在你的应用程序中同时使用这两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:53:19.593

仅限请求工厂。

你需要的一切都在那里。如果您只想发送一条基本消息，您只需使用您想要的任何参数调用一个方法。

Actions 的问题在于它们比 RF 语义更冗长......

RF 唯一没有的就是使用 ClientHandlers 的能力......

# c# - 如何在 txt 输出期间仅选择现金并删除检查选项

> ID：12596751
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:33:45.287
> 
> 标签：c#, sql, sql-server, visual-studio-2010, sql-server-2008

我可以得到一些帮助吗？我有一个查询，如下所示。现在它显示支票和现金。但我希望它只显示现金查询。是的，我相信我可以编辑它（现在它容易受到 SQL 注入的影响）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace MyTestData
{
public partial class frmCollection : Form
{
    public frmCollection()
    {
        InitializeComponent();
    }

    private void dtpFrom_ValueChanged(object sender, EventArgs e)
    {

    }

    private void btnExtract_Click(object sender, EventArgs e)
    {

        SqlConnection objConn = new SqlConnection("MYCONNECTION STRING ETCETC");

        SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(10),PaidDate,3)
 AS PaidDate,InvoiceNo,PayerCode,CollectedFee,
( CASE ReceiptTypeID WHEN 'Cash' THEN 'CASH' WHEN 'Check' THEN 'CHEQUE' END ) 
AS ReceiptTypeID FROM InvoicePayment 
WHERE (PaidDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105)) AND (PaidDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105))", objConn);

        SqlDataReader objReader;
        objReader = objCmd.ExecuteReader();

        System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Collection-" + DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
        System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

        int count = 0;
        while (objReader.Read())
        {

            for (int i = 0; i < 5; i++)
            {
                if (!objReader.IsDBNull(i))
                {
                    string s;
                    s = objReader.GetDataTypeName(i);
                    //MessageBox.Show(s);
                    if (objReader.GetDataTypeName(i) == "char")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                    else if (objReader.GetDataTypeName(i) == "money")

                    {
                        sw.Write(objReader.GetSqlMoney(i).ToString());
                    }
                    else if (objReader.GetDataTypeName(i) == "nvarchar")
                    {
                        sw.Write(objReader.GetString(i));
                    }
                    else if (objReader.GetDataTypeName(i) == "varchar")
                    {
                        sw.Write(objReader.GetString(i));
                    }

                }
                if (i < 4)
                {
                    sw.Write("\t");
                }

            }
            count = count + 1;
            sw.WriteLine();

        }
        sw.Flush();
        fs.Close();
        objReader.Close();
        objConn.Close();
        MessageBox.Show(count + " records exported successfully.");
        this.Close();

    }

    private void frmCollection_Load(object sender, EventArgs e)
    {

    }

    private void dtpFrom_ValueChanged_1(object sender, EventArgs e)
    {

    }
} 
```

}

**编辑：**这是表结构：

![在此处输入图像描述](../Images/47b64b66d234be213817c1c1113242ac.png)

以下是一些示例数据：

![在此处输入图像描述](../Images/024bfc36b4f76b3fba2c67da17403ca8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:36:55.323

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(10),PaidDate,3) AS PaidDate,InvoiceNo,PayerCode,CollectedFee FROM InvoicePayment WHERE (PaidDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105)) AND (PaidDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105)) AND ReceiptTypeID = 'Cash'", objConn); 
```

请注意我如何删除案例以显示它是哪种类型，并在 WHERE 语句中添加了一个子句。

还要尽量避免在查询中连接字符串，这会使您容易受到 SQL 注入的攻击。尝试使用类似的参数；

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(10),PaidDate,3) AS PaidDate,InvoiceNo,PayerCode,CollectedFee FROM InvoicePayment WHERE (PaidDate >= CONVERT(datetime, @PAIDDATEFROM, 105)) AND (PaidDate <= CONVERT(datetime, @PAIDDATETO, 105)) AND ReceiptTypeID = 'Cash'", objConn);

SqlCommand.Parameters.Add("@PAIDDATEFROM", SqlDbType.DateTime).Value = dtpFrom.Text;
SqlCommand.Parameters.Add("@PAIDDATETO", SqlDbType.DateTime).Value = dtpTo.Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:37:13.607

> 我只希望看到现金

然后像这样`WHEN 'Check' THEN 'CHEQUE'`从`CASE`表达式中删除：

```
SELECT 
  CONVERT(char(10),PaidDate,3) AS PaidDate,InvoiceNo,
  PayerCode, CollectedFee, 
  (CASE ReceiptTypeID 
     WHEN 'Cash'  THEN 'CASH'  
  END ) AS ReceiptTypeID 
... 
```

**更新：**

```
SELECT 
  CONVERT(char(10), PaidDate,3) AS PaidDate,
  InvoiceNo, CollectedFee, upper(ReceiptTypeID) AS ReceiptTypeID 
FROM @Invoices 
WHERE (PaidDate >= CONVERT(datetime, '20010101', 105))
  AND (PaidDate <= CONVERT(datetime, '20120101', 105))
  AND ReceiptTypeID IS NOT NULL
  AND lower(ReceiptTypeID) <> 'cheque' 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/edit/80926)

# javascript - jQuery等待显示（）？获取错误数据

> ID：12596752
> 
> 赞同：0
> 
> 时间：2012-09-26T07:33:46.120
> 
> 标签：javascript, jquery, html, css

如果我总是删除 1px，我正在使用以下代码来计算在 60 秒内减少整个除法的间隔：

```
function startTimer(remainingTime) {
    showProgressBar(true);

    maxWidth = ($('#time').width() - 4);
    progressIntervall = sessionTime / maxWidth * 1000;
    currentProgress = maxWidth * (remainingTime / sessionTime);

    $('#time .progress').width(currentProgress);
    window.setTimeout("decreaseTime()", progressIntervall);

    alert(maxWidth); // = 86
    window.setTimeout("alert($('#time').width());", 100); // = 396
}

function showProgressBar(bol) {
    if (bol) {
        $('#time').show();
        $('#time').removeClass("gray");
    } else 
        $('#time').hide();

} 
```

HTML：

```
<div id="time" class="gray">
    <div class="progress" style="width: 100%;">&nbsp;</div>
</div> 
```

CSS：

```
#time
{
    width: 90%;
    max-width: 400px;
} 
```

问题似乎是在**showProgressBar**之后，页面需要一些时间来重新调整元素的大小。**例如， maxWidth**是 86 而不是 366。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:59:09.390

最好将其余效果作为回调传递给`.hide`and `.show`，可能像这样：

```
function startTimer(remainingTime) {
    function restOfAnimation() {
        maxWidth = ($('#time').width() - 4);
        progressIntervall = sessionTime / maxWidth * 1000;
        currentProgress = maxWidth * (remainingTime / sessionTime);

        $('#time .progress').width(currentProgress);
        window.setTimeout("decreaseTime()", progressIntervall);

        alert(maxWidth); // = 86
        window.setTimeout("alert($('#time').width());", 100); // = 396
    }

    showProgressBar(true, restOfAnimation);
}

function showProgressBar(bol, callback) {
    if (bol) {
        $('#time').show(callback);
        $('#time').removeClass("gray");
    } else 
        $('#time').hide(callback);
} 
```

上面的代码需要一些改进（`var`没有在任何地方使用，这几乎肯定是一个错误；`decreaseTimeout`可以直接传递给`setTimeout`，等等）。

# javascript - 用 indexOf 匹配用户输入

> ID：12596754
> 
> 赞同：1
> 
> 时间：2012-09-26T07:33:49.783
> 
> 标签：javascript, input, indexof

我正在尝试显示与用户输入匹配的文本。它在用户输入第一个字符时显示结果，例如“a”，但当输入第二个字符时没有任何反应，例如“as”。所以我希望当用户输入时显示棒球和快速。

```
// JavaScript Document

s1= new String()
s2= new String()
var myArray = new Array();

myArray[0] = "Football";
myArray[1] = "Baseball";
myArray[2] = "Cricket";
myArray[3] = "Fast";

function test() //  called onkeyup() event
{
 s1 = document.getElementById('filter').value;
 s2 = s2+s1;
 arraysearch();
}

function arraysearch()
{
    for(i=0; i<myArray.length; i++)
    { 
       if (myArray[i].indexOf(s2) != -1) // also tried using match method
       { 
           alert('Matched');           
           document.getElementById('placeholder').innerHTML += myArray[i] + "<br/>";
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:12:12.553

```
 <script type="text/javascript" language="javascript">
            function ShowMe(obj) {

                var lbl = document.getElementById('divContent');

                var myArray = new Array();
                myArray[0] = "Football";
                myArray[1] = "Baseball";
                myArray[2] = "Cricket";
                myArray[3] = "Fast";

                var s2 = obj.value.toLowerCase();

                for (i = 0; i < myArray.length; i++) {
                    if (myArray[i].toLowerCase().indexOf(s2) != -1) 
                    {
                        lbl.innerHTML = myArray[i];
                    }
                }

            }

        </script> 
```

HTML 代码

```
<div>
<h1>JS Test</h1>
    <input id="txtInput" onkeyup="javascript:ShowMe(this)" />
    <div id="divContent">

    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:13:57.413

试过了，我实施了一个解决方案来帮助你。您可以使用正则表达式更好地比较和匹配字符串。它仅使用 jquery 进行 dom 操作，但仅此而已。您可以继续编辑它。希望能帮助到你。

[http://jsfiddle.net/cy4QH/2/](http://jsfiddle.net/cy4QH/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:53:57.420

如果“filter”是一个输入元素，并且您设置了它的“onKeyUp='javascript:arraysearch()'”，那么此代码应该适合您。

```
function arraysearch() 
{ 
  for(var i in myArray) 
  {  
    if (myArray[i].toLowerCase().indexOf(document.getElementById('filter').value) != -1) 
    {  
       alert('Matched');            
       document.getElementById('placeholder').innerHTML += myArray[i] + "<br/>"; 
    } 
  } 
} 
```

# ruby-on-rails - 如何通过将上一个帖子向下移动来使新帖子列在顶部？

> ID：12596758
> 
> 赞同：0
> 
> 时间：2012-09-26T07:34:00.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经关注了[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)并且在那个例子中我们可以添加一个新帖子并显示它但是当已经存在一个帖子但新帖子显示在底部但我想要使新帖子显示在顶部。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:36:40.057

Post.order("created_at desc") 将首先显示最近创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:49:28.780

改变

```
@posts = Post.all 
```

到

```
@posts = Post.order("created_at DESC") 
```

在你的`index`方法`app/controllers/posts_controller.rb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:51:32.807

我会用

```
@posts = Post.order("id desc") 
```

ID 有主键（默认）。最后一篇文章将始终具有最大 ID（除非您更新 created_at 字段）

# android - 如何等待启动画面完成

> ID：12596761
> 
> 赞同：0
> 
> 时间：2012-09-26T07:34:13.857
> 
> 标签：android, android-asynctask, splash-screen

我想等待启动画面完成他的任务，然后继续进行活动。我认为我的错误是因为等待启动画面的时间太多，我的启动画面是为了从服务器获取一些字符串，它有所有需要。创建并需要等待启动画面完成的第一类是：更新：

```
 Thread splashTread = new Thread() {
                @Override
                public void run() {
                    try {
                        splash  splash=(tools.splash) new splash(first.this).execute();
                        int waited = 0;
                        while(splash.running && (waited< getResources().getInteger(R.integer.splashTimeOut)))
                        {
                            sleep(100);
                            if(splash.running) {
                                waited += 100;
                            }
                            // nextActivity=splash.newActivity;
                        }
                    } catch(InterruptedException e) {
                        // do nothing
                    } finally {
                        finish();

                    }
                }
            };
            splashTread.start(); 
```

虽然启动画面还可以

```
 public class splash extends AsyncTask<String, Void, String> 
```

它是错误的，因为它创建了一个新活动然后执行线程....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:45:46.147

```
public void onCreate(Bundle savedInstanceState) {
   protected boolean _active = true;
   protected int _splashTime = 1000;
  super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

    Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();

            }
        }
    };
    splashTread.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:37:57.707

我希望我的代码对你有帮助

```
public void onStart() 
    {
        super.onStart();

        Thread background = new Thread(new Runnable() 
        {
            public void run() 
            {
                try
                {
                    Thread.sleep(3000);
                    Intent langSelect = new Intent(EduApp.this, LanguageActivity.class);
                    startActivity(langSelect);
                    genHelper.goForwardScreen();
                }
                catch (Throwable t) 
                {               
                    System.err.println("Thread Exception IN Splash Screen->" + t.toString());
                }
            }
        });
        background.start();
    } 
```

在这里开始下一个活动..

# git - 为什么我不能签出另一个 git 分支？

> ID：12596767
> 
> 赞同：2
> 
> 时间：2012-09-26T07:35:03.400
> 
> 标签：git, version-control, git-branch, git-diff, git-checkout

```
$ git branch -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/lab_master
  remotes/origin/master

$ git checkout lab_master
error: Your local changes to the following files would be overwritten by checkou                                                                                                                           t:
        **project.properties**
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

为什么我只是未能结帐 lab_master 分支？

另一个问题：为什么我不能将当前文件与另一个分支中的文件进行比较？

```
$ git diff project.properties -b lab_master
fatal: bad flag '-b' used after filename 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T07:38:15.930

Git 可以保护您免于切换到另一个分支，因为这会覆盖您对文件应用的一些更改`project.properties`。您可以通过使用丢弃更改，也可以`git checkout -f lab_master`先通过`git stash`（`git stash pop`在签出另一个分支之后）将它们存储起来。如果您确定要保留更改，您也可以简单地提交它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:37:25.907

您需要提交更改或存储它们，[http ://git-scm.com/book/en/Git-Tools-Stashing](http://git-scm.com/book/en/Git-Tools-Stashing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T00:13:44.087

git diff 已经使用 -b 标志来忽略空格。这与您引用另一个分支的愿望相冲突。为此，您需要使用 'git diff master..anotherbranch'

# java - Webdriver：我无法自动化滑块

> ID：12596771
> 
> 赞同：1
> 
> 时间：2012-09-26T07:35:19.033
> 
> 标签：java, webdriver

我正在尝试通过使用 Action 类来自动化滑块，但出现以下错误。

我试过的：

```
public void slideTheBar() {
    WebElement slider = driver.findElement(By.cssSelector("div.sliderA div#slider_minmax_maxKnobA"));
    Actions move = new Actions(driver);
    Action action = move.dragAndDropBy(slider, 30, 0).build();
    action.perform();
} 
```

错误 ：

> $Proxy22 不能转换为 org.openqa.selenium.internal.Locatable

请让我知道是否有人可以帮助我。

例如：我们在任何媒体播放器中看到的用于增加音量的滑块，单击一个点然后拖放到所需的点。

仅供参考：webdriver 版本是 2.24.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T11:58:46.067

当您键入“Action action = move.dragAndDropBy(slider, 30, 0).build();”时，第二行出现错误

在上面的行中，第一个单词 Action 应该输入为 Actions，然后它会起作用，请看我的代码，

线程.sleep(4000); 尝试{ WebElement slider=GlobalVars.driver.findElement(By.xpath("//a[@class='ui-slider-handle ui-state-default ui-corner-all']")); 动作移动 =new Actions(GlobalVars.driver); 动作 action=move.dragAndDropBy(slider, 60, 0); action.perform();} catch(Exception e){ e.getMessage();

如果您仍有任何疑问，请告诉我。

谢谢

问候

# ios - Unity IOS 集成

> ID：12596772
> 
> 赞同：3
> 
> 时间：2012-09-26T07:35:27.023
> 
> 标签：ios, xcode, unity3d

对于一个项目，我需要将 Unity3d 集成到我知道 Unity 充当 UIApplicationDelegate 的现有应用程序中。我发现了一篇关于这个主题的有趣文章，但我并不清楚如何以这种方式解决我的问题。是否可以从 ViewController 重新启动委派过程？因此，当我从我的委托切换到 viewController 并且我想导航回来然后再次初始化 UIApplicationDelegate 时？

我发现的文章：http: [//alexanderwong.me/post/29949258838/building-a-ios-unity-uiview-uiviewcontroller](http://alexanderwong.me/post/29949258838/building-a-ios-unity-uiview-uiviewcontroller)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:13:44.743

您是否尝试过使用 Unity 构建“标准”Unity iOS 应用程序，然后将现有代码集成到其中？

当你从 Unity 为 iOS 构建时，Unity 会自动在你的 Application Delegate 中添加一个钩子，方法如下：

```
- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions 
```

你可以在那里做其他事情，但在底部你应该看到重要的一行：

```
[self startUnity:application]; 
```

因此，您可以做的就是将该行从 didFinishLaunching 方法中取出并将其放在...任何您想要的地方。您还需要在应用程序委托中保留对 UIWindow* Unity 绘制的引用，以便您可以随意切换进出它。

因此，我并不完全清楚您想要做的事情，但我绝对建议您首先从集成的 Unity 构建开始并从那里开始工作，或者如果您想滚动，至少将其用作地图你自己的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T17:25:41.693

已经有一段时间了，但迟到总比从不好；）

你不能“重启”委托的东西。UnityAppController 是 AppDelegate，而不是 ViewController。但是您可以决定何时开始统一第一次。之后，unity 正在运行，您必须在 UnityAppController 中使用 applicationDidEnterBackground 调用（对于 Unity 5 之前的版本），或者只调用 setPause:true（使用 Unity 5）来停止统一渲染循环。导航回 UnityViewController 后不要忘记重新激活它。

对于“当你想要时如何启动统一”：继承 UnityAppController 并使用空实现覆盖 startUnity:(UIApplication*) 应用程序。然后，一旦您想激活它，就调用 [super startUnity..]。

另一种方法不是子类化，而是创建自己的 UnityAppController 对象并调用所有方法（applicationDidFinsishLaunching 等）。然后你只需等待初始化，直到你第一次需要统一。但我会推荐第一个选项。

您还可以在这里查看更详细的说明我是如何做到的：http: [//www.markuszancolo.at/2014/05/integrating-unity-into-a-native-ios-app](http://www.markuszancolo.at/2014/05/integrating-unity-into-a-native-ios-app)

# r - 根据交易长度的子集规则交易对象

> ID：12596774
> 
> 赞同：0
> 
> 时间：2012-09-26T07:35:38.843
> 
> 标签：r, arules

任何人都知道如何`arules`根据事务长度对对象进行子集化和事务处理？

例如：

```
library(arules)
data(Adult)
summary(Adult) 
```

我想根据每个事务的长度将 Adult 分成不同的事务对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:34:49.130

我建议您首先查看软件包帮助。'help.start()'。导航到包并花点时间查看为包实现了哪些方法。

花了一分钟才发现事务对象有一个 size() 和 subset() 实现。因此，按照您的要求进行操作非常简单。

这是我将如何做到的：

```
#you can get a vector of the sizes of the transactions:
sizes<-size(Adult)
#If you want to automate the sunsetting with a for loop 
#you can save which sizes are.
size.labels<-as.numeric(levels(as.factor(sizes)))
#Now you just need to use subset() function for 
#arules using size as condition. 
#Here few examples
Adult.subset<-subset(Adult,sizes==size.labels[1]) #this for using in a loop maybe?
Adult.subset.10<-subset(Adult,sizes==10)
... 
```

希望对你有帮助！

# c# - 读取时的数据顺序

> ID：12596775
> 
> 赞同：0
> 
> 时间：2012-09-26T07:35:52.417
> 
> 标签：c#, .net, serial-port, microcontroller

我有一个微控制器项目向我的 PC 发送长度为 8 字节的串行数据帧，我使用 PC 串行监视器工具监视来自微控制器的数据帧，所有数据看起来都不错，每个 8 字节帧似乎一直在发送此模式中的数据长度为 8 字节。

我遇到的问题如下：

每次我*读取*串行数据时，结构的 8 字节数据帧中的第一个字节都不存在。

**例子：**

每个循环如下：

微控制器发送 8 字节帧：**01 FF 8E 01 00 00 00 0A**

1.  第一次循环迭代。

    .NET 串行端口接收数据帧：**01 00 00 00 00 00 00 00**

    读取(buff, 0, 8); 读取 1 字节读取

2.  第二次循环迭代。

.NET 串行端口接收数据帧：**FF 8E 01 00 00 00 0A 00** （7 字节读取）

读取(buff, 0, 8); 读取 7 字节读取

我期望 sr.Read(buff, 0, 8) 在每次循环迭代时**总是读取 8 字节**的长度。

这是我用来从串行端口读取的代码

```
 static void Main(string[] args)
    {
        using (SerialPort sr = new SerialPort("COM5"))
        {
            sr.BaudRate = 9600;
            sr.DataBits = 8;
            sr.Parity = Parity.None;
            sr.StopBits = StopBits.One;
            sr.Open();
            StringBuilder sb = new StringBuilder();

            while (true)
            {
                byte[] buff = new byte[8];
                int r =  sr.Read(buff, 0, 8);
                Console.WriteLine("Number of bytes read : " + r);
                for (int i = 0; i < buff.Length; i++)
                {
                    var hex = string.Format("{0:x2}", buff[i]);
                    sb.Append(hex.ToUpper());
                    sb.Append(" ");
                }
                Console.WriteLine(sb);
                sb.Clear();
            }
        } 
```

先感谢您。

* * *

感谢您的反馈，每个人都非常有用。

我为 8 字节帧重构了缓冲逻辑，如下所示：

一切似乎都与我从端口监视器上看到的数据模式同步，最重要的是，来自微控制器的数据模式。

**仍然缺少重要方面：**

1.  帧 CRC。
2.  验证每个字节的顺序。
3.  .......等等

    这是更新的代码

    ```
    static void Main(string[] args)
    {
        using (SerialPort sr = new SerialPort("COM5"))
        {
            sr.BaudRate = 9600;
            sr.DataBits = 8;
            sr.Parity = Parity.None;
            sr.StopBits = StopBits.One;
            sr.Handshake = Handshake.None;
            sr.DtrEnable = false;
            sr.Open();
            sr.ReceivedBytesThreshold = 1;
            StringBuilder sb = new StringBuilder();

            byte[] buff = new byte[8];
            byte[] temp_buffer = new byte[8];

            while (true)
            {
                int r = sr.Read(temp_buffer, 0, 8);
                Console.WriteLine("Number of bytes read : " + r);

                // 1 - byte from the serial frame ?
                if (r == 1)
                {
                    buff[0] = temp_buffer[0];
                }

                // 7 - bytes from the serial frame ?
                if (r == 7)
                {
                    // get the remaining 7 - bytes 
                    for (int i = 0; i <= temp_buffer.Length - 1; i++)
                    {

                        if (i != 0)
                            buff[i] = temp_buffer[i]; // construct a complete frame 
                    }

                    // okay, we ready to display the 8-byte serial frame. 
                    for (int i = 0; i < buff.Length; i++)
                    {
                        var hex = string.Format("{0:x2}", buff[i]);
                        sb.Append(hex.ToUpper());
                        sb.Append(" ");
                    }

                    Console.WriteLine(sb);
                    sb.Clear();
                }
            }

        }
    } 
    ```

* * *

这里还有一个修改版本，读取一个 16 字节的串行帧。

```
 using (SerialPort sr = new SerialPort("COM5"))
        {
            sr.BaudRate = 9600;
            sr.DataBits = 8;
            sr.Parity = Parity.None;
            sr.StopBits = StopBits.One;
            sr.Open();
            sr.ReceivedBytesThreshold = 1;
            StringBuilder sb = new StringBuilder();

            byte[] io_buffer = new byte[16];
            byte[] temp_buffer = new byte[16];

            do
            {
                int data_length = sr.Read( temp_buffer, 0, 16 );

                // 1 - Byte from the serial frame ?
                if ( data_length == 1 && temp_buffer[ 0 ] == 0x28 )
                {
                    io_buffer[ 0 ] = temp_buffer[ 0 ];
                }

                // 15 - Bytes from the serial frame ?
                if (data_length == 15 && temp_buffer[14] == 0x29)
                {

                    // Here we construct the 16- byte frame.(start from 1 as we already have our start frame stored) "x028" => ")"
                    for ( int i = 1; i < temp_buffer.Length; i++ )
                    {
                        io_buffer[ i ] = temp_buffer[ i - 1 ];
                    }

                    // okay, we ready to display the 16-byte serial frame. 
                    for ( int i = 0; i < io_buffer.Length; i++ )
                    {
                        var hex = string.Format( "{0:x2}", io_buffer[ i ] );
                        sb.Append( hex.ToUpper() );
                        sb.Append( " " );
                    }

                    Console.WriteLine(sb);
                    sb.Clear();

                }
            } while (sr.IsOpen); 
```

**这里是16字节的帧输出，第4字节表示从（I/O 4通道模数转换器）的通道0到3**

28 FF FF 00 01 DB 00 00 00 00 00 00 0E 00 00 29

28 FF FF 01 01 02 00 00 00 00 00 00 0E 00 00 29

28 FF FF 02 01 02 00 00 00 00 00 00 0E 00 00 29

28 FF FF 03 01 A8 00 00 00 00 00 00 0E 00 00 29

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:52:52.333

> 我期望 sr.Read(buff, 0, 8) 在每次循环迭代时总是读取 8 字节的长度。

这是一个没有根据的期望。`Read`方法（和底层的 Win32 例程）读取端口输入缓冲区中可用的数据。如果有 1 个字节可用，则可以读取 1 个字节或更少。

数据的可用性取决于多种因素，`Read`方法不能影响它们。您应该自己在接收方构建数据包。

PS 是的，*从通信线路（套接字、串口等）读取*比*写入*该线路要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:21:51.020

当设备“发送帧”时，它仅仅意味着它开始发送字节。您将按发送顺序接收字节，但不能保证时间 - 操作系统将收集字节一段时间，然后（以减少处理延迟）将它们发送给您。它无法知道帧何时“完成” - 因此您可以获得部分数据包，而仍有更多数据排队等待设备发送。您的代码需要解释数据流以将其分解为帧。

在您的示例中，您收到 1 个字节，后跟 7 个字节。由您决定缓冲这些字节，直到您有足够的能力构建一个完整的 8 字节帧，然后您可以对其进行解码。

如果您遇到传输错误，您可能还必须处理不完整的帧（您可能只获得帧的最后 5 个字节 - 您需要丢弃它们并开始读取下一个有效帧）或损坏的数据（帧似乎到达完好无损，但其中的某些字节具有不正确的值 - 在这种情况下，如果帧包含 CRC 或其他一致性检查，您可以对其进行验证并丢弃无效帧，但如果没有信息可以帮助您验证帧，您只需必须希望传输是明确的）。

基本上，串行端口仅提供以零星突发形式到达的字节流 - 由您的代码来实现应用于该数据流的任何数据编码和协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:02:46.943

您无法保证在您`sr.Read()`最初调用时会与发送字节的设备同步。

我原以为您会想要`sr.Read`反复调用缓冲区。然后在缓冲区上滑动一个 8 字节宽的窗口，直到找到与您期望的协议匹配的 8 个字节。现在丢弃窗口之前的所有内容，并从缓冲区的（现在）开始处读取 8 个字节的块。然后，您将与您的协议“同步”。在此基础上实现您的逻辑（可能为收到的每个有效 8 字节组触发一个事件并向上处理一层）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T01:19:33.000

sr.Read(temp_buffer, 0, 8) 将从缓冲区读取最多 8 个字节，这是一个最大数字，因此您不会覆盖您的 temp_buffer。如果要读取 8 个字节，则必须至少等待 8 个字节。这可以通过 BytesToRead 方法和/或 ReceivedBytesThreshold 来完成。

如果将 ReceivedBytesThreshold 设置为 8，则当事件触发时，您知道您将至少有 8 个字节要读取。如果要等待 8 字节，可以轮询 BytesToRead 属性，当它达到 8 时，执行读取。

# .net - 你调用的对象是空的。在 C# 中创建窗口窗体的新实例时

> ID：12596778
> 
> 赞同：0
> 
> 时间：2012-09-26T07:36:00.307
> 
> 标签：.net, winforms, window

我有 MainForm (WinForm) 和名为 capture signature 的按钮。在`Click`这个按钮的情况下，我正在创建实例 CaptureSignatureForm，代码如下。

```
MainForm oSign = new MainForm(this);
oSign.ShowDialog(); 
```

当表单打开时，我捕获签名，捕获后，表单将关闭。
第二次单击 capturesignature 按钮时，它会引发错误：`"Object reference not set to an instance of an object"`

我正在使用第三方 dll 来捕获签名。

我在 if 条件下的斜体粗体文本出现错误。contol 是 signaturecapturedevice 的对象。根据第三方文档（连接到平板电脑时会自动填充功能对象。）

```
 if (control.EnsureConnected() && ***control.capabilities.LCDWidth != 0***)
            {
                this.ClientSize = new Size(tabletWidth, tabletHeight);

                if (model == Model.STU300)
                {
                    btnOk.SetBounds(tabletWidth - 80, 0, 80, tabletHeight / 3);
                    btnClear.SetBounds(tabletWidth - 80, tabletHeight / 3, 80, tabletHeight / 3);
                    btnCancel.SetBounds(tabletWidth - 80, (tabletHeight / 3) * 2, 80, tabletHeight / 3);
                }
                else
                {
                    btnOk.SetBounds(0, tabletHeight - 55, tabletWidth / 3, 55);
                    btnClear.SetBounds(tabletWidth / 3, tabletHeight - 55, tabletWidth / 3, 55);
                    btnCancel.SetBounds((tabletWidth / 3) * 2, tabletHeight - 55, tabletWidth / 3, 55);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:40:56.573

似乎在调用 capabilities.LCDWidth 并且功能没有价值时出现异常，请检查供应商文档以获取功能或尝试探索 control.Reconnect/Close 任何此类，然后尝试运行它

# java - LocaleChangeInterceptor.preHandle 中的对象处理程序有什么用

> ID：12596783
> 
> 赞同：1
> 
> 时间：2012-09-26T07:36:07.180
> 
> 标签：java, spring, locale

我担心传递给 LocaleChangeInterceptor.preHandle() 的参数（对象处理程序）。

当我调用 preHandle() 时，我可以传递当前请求、响应对象。但是我从哪里得到处理程序。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:53:21.540

通常，`handler`Spring 命名法中的 a 指的`@Controller`是处理当前请求的实现实例。

在 的情况下`LocaleChangeInterceptor`，不使用处理程序参数，因此您可以传递任何内容。但是，如果可能，您应该传递控制器实例以遵守约定。

编辑：你为什么首先调用它？它应该使用有一个拦截器，并且只能由 Spring MVC 框架调用。

# android - Android 如何限制用户从应用程序文件夹复制数据..？

> ID：12596785
> 
> 赞同：2
> 
> 时间：2012-09-26T07:36:10.690
> 
> 标签：android

我是 Android 新手，在我的项目中，我要求用户不应该有机会将应用程序文件夹中的图像和视频复制到 PC，以免它们被复制。

只有应用程序应该有机会访问存储在应用程序文件夹中的图像和视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:45:43.203

您可以使用内部存储并将您的数据设为私有。对于 SD 卡的使用，我认为这是不可能的，文档很清楚：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:50:24.850

您应该在私有模式下使用[Context.getDir()](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)但请记住，这将存储在手机的内部存储器中（空间可能有限）。

# json - 解析 flash json 响应 (Delphi/TWebbrowser)

> ID：12596787
> 
> 赞同：2
> 
> 时间：2012-09-26T07:36:28.007
> 
> 标签：json, flash, delphi, delphi-xe2, twebbrowser

我有一个 Flash 游戏并在按下按钮后获取更新。只有 flash 中的一个表被更新，并且更改不会显示在 html 源代码中（好吧，毕竟是它的 flash）。使用 Fiddler 记录显示第一个加密包（包含使用 Fiddler 解码后的表的所有数据），然后是 16x json 包（表的单个条目）。

我想知道的是如何在 Delphi 中获取这些单个包。

我不想更改数据，我只是想阅读它们。我不能对任何东西（网络服务器、闪存等）进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:16:25.407

您可以尝试像 Arioch 建议的那样进行代理。不过，我不太确定它会起作用。

如果我这样做，这将是如何：

*   在 C（或 C++）中创建一个共享库，您可以在其中使用[WinPcap连接各种目标/源地址和端口](http://www.winpcap.org/)
*   当有东西被抓到时让它调用你的应用程序
*   根据需要处理/操作数据包数据
*   传下去

不幸的是，Delphi 没有可用的 WinPcap“头文件”（或组件），所以没有其他方法（除了将所有头文件移植到 Delphi ......）。

[这是有关如何使用 WinPcap 的教程](http://www.winpcap.org/docs/docs_41b5/html/group__wpcap__tut.html)。

# python - 在 virtualenv 中安装 Pip 会引发警告

> ID：12596788
> 
> 赞同：0
> 
> 时间：2012-09-26T07:36:30.257
> 
> 标签：python, django, heroku, virtualenv, pip

```
 pip install Django psycopg2 dj-database-url 
```

我得到这个回应：

```
Downloading/unpacking Django
  Downloading Django-1.4.1.tar.gz (7.7MB): 7.7MB downloaded
  Running setup.py egg_info for package Django

Downloading/unpacking psycopg2
  Downloading psycopg2-2.4.5.tar.gz (719kB): 719kB downloaded
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Downloading/unpacking dj-database-url
  Downloading dj-database-url-0.2.1.tar.gz
  Running setup.py egg_info for package dj-database-url

Installing collected packages: Django, psycopg2, dj-database-url
  Running setup.py install for Django
    changing mode of build/scripts-2.7/django-admin.py from 644 to 755

    changing mode of /Users/kristoffernolgren/web/venv/bin/django-admin.py to 755
  Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.8-intel-2.7/psycopg/psycopgmodule.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/green.c -o build/temp.macosx-10.8-intel-2.7/psycopg/green.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/pqpath.c -o build/temp.macosx-10.8-intel-2.7/psycopg/pqpath.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/utils.c -o build/temp.macosx-10.8-intel-2.7/psycopg/utils.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/bytes_format.c -o build/temp.macosx-10.8-intel-2.7/psycopg/bytes_format.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    In file included from psycopg/bytes_format.c:81:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    In file included from psycopg/bytes_format.c:81:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/connection_int.c -o build/temp.macosx-10.8-intel-2.7/psycopg/connection_int.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/connection_type.c -o build/temp.macosx-10.8-intel-2.7/psycopg/connection_type.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/cursor_int.c -o build/temp.macosx-10.8-intel-2.7/psycopg/cursor_int.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/cursor_type.c -o build/temp.macosx-10.8-intel-2.7/psycopg/cursor_type.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    psycopg/cursor_type.c:435:58: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
        tmp = pq_execute(self, Bytes_AS_STRING(self->query), async);
              ~~~~~~~~~~                                     ^~~~~
    psycopg/cursor_type.c:773:44: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
        res = _psyco_curs_buildrow(self, self->row);
              ~~~~~~~~~~~~~~~~~~~~       ~~~~~~^~~
    psycopg/cursor_type.c:820:44: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
        res = _psyco_curs_buildrow(self, self->row);
              ~~~~~~~~~~~~~~~~~~~~       ~~~~~~^~~
    psycopg/cursor_type.c:899:48: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
            row = _psyco_curs_buildrow(self, self->row);
                  ~~~~~~~~~~~~~~~~~~~~       ~~~~~~^~~
    psycopg/cursor_type.c:959:27: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
        size = self->rowcount - self->row;
             ~ ~~~~~~~~~~~~~~~^~~~~~~~~~~
    psycopg/cursor_type.c:969:48: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
            row = _psyco_curs_buildrow(self, self->row);
                  ~~~~~~~~~~~~~~~~~~~~       ~~~~~~^~~
    psycopg/cursor_type.c:1143:32: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
                newpos = self->row + value;
                       ~ ~~~~~~~~~~^~~~~~~
    7 warnings generated.
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/lobject_int.c -o build/temp.macosx-10.8-intel-2.7/psycopg/lobject_int.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/lobject_type.c -o build/temp.macosx-10.8-intel-2.7/psycopg/lobject_type.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/notify_type.c -o build/temp.macosx-10.8-intel-2.7/psycopg/notify_type.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    In file included from psycopg/notify_type.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    In file included from psycopg/notify_type.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/xid_type.c -o build/temp.macosx-10.8-intel-2.7/psycopg/xid_type.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_asis.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_asis.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_binary.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_binary.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_datetime.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_datetime.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_list.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_list.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_pboolean.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pboolean.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_pdecimal.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pdecimal.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_pint.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pint.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_pfloat.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pfloat.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/adapter_qstring.c -o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_qstring.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/microprotocols.c -o build/temp.macosx-10.8-intel-2.7/psycopg/microprotocols.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/microprotocols_proto.c -o build/temp.macosx-10.8-intel-2.7/psycopg/microprotocols_proto.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    In file included from psycopg/microprotocols_proto.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    In file included from psycopg/microprotocols_proto.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/include -I/usr/include/postgresql/server -c psycopg/typecast.c -o build/temp.macosx-10.8-intel-2.7/psycopg/typecast.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    In file included from psycopg/typecast.c:179:
    ./psycopg/typecast_array.c:227:31: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
                if (--stack_index < 0)
                    ~~~~~~~~~~~~~ ^ ~
    1 warning generated.
    In file included from psycopg/typecast.c:179:
    ./psycopg/typecast_array.c:227:31: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
                if (--stack_index < 0)
                    ~~~~~~~~~~~~~ ^ ~
    1 warning generated.
    clang -bundle -undefined dynamic_lookup -Wl,-F. -arch i386 -arch x86_64 build/temp.macosx-10.8-intel-2.7/psycopg/psycopgmodule.o build/temp.macosx-10.8-intel-2.7/psycopg/green.o build/temp.macosx-10.8-intel-2.7/psycopg/pqpath.o build/temp.macosx-10.8-intel-2.7/psycopg/utils.o build/temp.macosx-10.8-intel-2.7/psycopg/bytes_format.o build/temp.macosx-10.8-intel-2.7/psycopg/connection_int.o build/temp.macosx-10.8-intel-2.7/psycopg/connection_type.o build/temp.macosx-10.8-intel-2.7/psycopg/cursor_int.o build/temp.macosx-10.8-intel-2.7/psycopg/cursor_type.o build/temp.macosx-10.8-intel-2.7/psycopg/lobject_int.o build/temp.macosx-10.8-intel-2.7/psycopg/lobject_type.o build/temp.macosx-10.8-intel-2.7/psycopg/notify_type.o build/temp.macosx-10.8-intel-2.7/psycopg/xid_type.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_asis.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_binary.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_datetime.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_list.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pboolean.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pdecimal.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pint.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_pfloat.o build/temp.macosx-10.8-intel-2.7/psycopg/adapter_qstring.o build/temp.macosx-10.8-intel-2.7/psycopg/microprotocols.o build/temp.macosx-10.8-intel-2.7/psycopg/microprotocols_proto.o build/temp.macosx-10.8-intel-2.7/psycopg/typecast.o -L/usr/lib -lpq -lssl -lcrypto -o build/lib.macosx-10.8-intel-2.7/psycopg2/_psycopg.so
    ld: warning: ignoring file /usr/lib/libpq.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/lib/libpq.dylib

    no previously-included directories found matching 'doc/src/_build'
  Running setup.py install for dj-database-url

Successfully installed Django psycopg2 dj-database-url
Cleaning up...
pip install Django psycopg2 dj-database-url 
```

一切正常，但我不明白发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:45:57.330

它们是警告。我现在对 GCC 选项不太熟悉（我上次使用 c/c++ 是在两年多前），但它们通常依赖于一些标志和样式检查。

例如，在编译时，`-Wunused-function`会向编译器提供选项，以便在找到未使用的函数时打印警告。另一个警告说`-mno-fused-madd flag`没有使用大概是因为编译器不知道如何处理它。

这可能是因为`psycopg library`作者忘记更新构建文件（`Makefile`我假设）并且他们忘记删除未使用的函数。它也可能由于编译器的变化而发生，例如，您的编译器可能使用不同的默认标志集。根据我的经验，这些可能发生在 Mac OS 上，因为与 Linux 相比，它们的做事方式有点不同。

如果一切正常，请不要担心，但如果您收到某种错误，您应该查看它，看看您是否可以以某种方式摆脱警告。

# linux - Carbon 4.0.1 (BAM 2.0) 作为 Linux 守护进程

> ID：12596791
> 
> 赞同：0
> 
> 时间：2012-09-26T07:36:42.593
> 
> 标签：linux, wso2, daemon, startup, wso2bam

我目前正在评估一些 WSO2 服务器，其中之一是 BAM 2.0（在 carbon 4.0.1 上）。
到目前为止，软件包中始终包含一个 daemon.sh 文件，可以使用 chkconfig 作为 Linux 守护程序安装该文件。

遗憾的是，在最新版本的 carbon 中，daemon.sh 丢失了。
启动脚本 wso2server.sh 可用于启动服务，但不能作为 linux 守护进程安装。

chkconfig 返回：

```
[xxx@Server ~]$ sudo chkconfig --add wso2
service wso2 does not support chkconfig 
```

我正在 CentOS 版本 6.2 - 64 位上尝试这个。

试图在文档和论坛中找到有关如何将 carbon 安装为 linux 守护进程的描述 - 但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:53:05.037

我为 BAM 2.0.0 推出了自己的基本初始化脚本。（以下是名为“bam”的文件的部分内容。）

```
#!/bin/sh
#
# chkconfig: 2345 80 80
#
BAM_HOME=/home/bam/current_bam
BAM_DAEMON=bin/wso2server.sh
START_OPTIONS=start
STOP_OPTIONS=stop

start() {
    echo "Starting BAM... (it will take approx 2 mins.)"
    su bam -c "cd $BAM_HOME && $BAM_DAEMON $START_OPTIONS > /dev/null 2>&1"
    return 0
}

stop() {
    echo "Stopping BAM... (it will take approx 10 secs.)"
    su bam -c "cd $BAM_HOME && $BAM_DAEMON $STOP_OPTIONS > /dev/null 2>&1"
    return 0
}

case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    stop
    start
    ;;
  *)
    echo $"Usage: $0 {start|stop|restart}"
    exit 1
esac

exit $? 
```

然后我将它复制到 /etc/init.d/ 并使其可执行。最后，我对它进行了chkconfig。

现在我可以使用以下命令启动服务：

```
sudo service bam start 
```

# firebug - FireBug 和 Firefox 是如何工作的？

> ID：12596795
> 
> 赞同：0
> 
> 时间：2012-09-26T07:37:00.560
> 
> 标签：firebug

我有几个关于 Firefox 和 Firebug 工作机制的问题。我的域中有一个页面：mydomain.com 我想在我的页面中加载一个外部 html 页面：externalhtml.com 我不能使用框架和 iframe。（因为 externalhtml.com 服务器发送额外的 x-option-frame： SAMEORIGIN 标头到请求的文件标头和未在 iframe 或框架中加载的 html 页面。）

我测试了其他一些标签。（我只想获取 html 文件的源代码，并且 x-options-frame 只影响 iframe 和 frame 标签！）
带有标签 mydoman.com 页面的源代码是：

但是当我用萤火虫检查页面时，脚本标签下加载的 html.html 的完整源代码（如树下拉对象）

for 标记具有类似的条件。脚本未加载到页面源中，但已完全加载到 firebug 检查器中。

但是当我使用 iframe 时，萤火虫检查器中什么都没有。（服务器不向 mydomain.com 发送任何内容）

我的问题是萤火虫是如何工作的？它如何抓取脚本的内容并加载到它的窗口中。有什么方法可以通过 jQuery 或 AJAX 做到这一点（我对其进行了测试，但我在 XMLHttpRequest 上实现了相同的域限制......）或......

真的很抱歉英语不好。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:08:17.130

希望您已经解决了您的问题，但万一您还没有……浏览器可能正在阻止跨域资源共享。我有一个类似的问题，我通过更改服务器以允许[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#Preflighted_requests)来解决。您无法从客户端“修复”此问题。服务器必须允许它。

# c - 字符数组初始化

> ID：12596796
> 
> 赞同：2
> 
> 时间：2012-09-26T07:37:11.963
> 
> 标签：c

这是如何运作的：：

```
char Test1[8] = {"abcde"} ; 
```

AFAIK，这应该存储在 Test1 的内存中

```
a b c d e 0 SomeJunkValue SomeJunkValue 
```

相反，它被存储为：

```
a b c d e 0 0 0 
```

初始化只在字符串文字之后添加一个尾随 NULL 字符，但是如何以及为什么将所有其他数组成员初始化为**NULL**？此外，任何关于底层方法或功能的链接或任何概念性想法：`char TEST1[8] = {"abcde"} ;`都会非常有帮助。怎么：

```
char Test1[8] = {"abcde"} ; 
```

不同于

```
char Test1[8] = "abcde" ; 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T07:40:47.200

部分初始化的聚合的未指定成员被初始化为该类型的零。

> ### 6.7.9 初始化
> 
> 21 - 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合应隐式初始化，与具有静态存储持续时间的对象相同。
> 
> 10 - [...] 如果具有静态或线程存储持续时间的对象未显式初始化，则：
> 
> *   如果是指针类型，则初始化为空指针；
> *   如果它具有算术类型，则将其初始化为（正或无符号）零；[...]

对于 array `char Test1[8]`，初始化器`{"abcde"}`和`"abcde"`6.7.9:14 完全等效：

> 字符类型的数组可以由字符串文字或 UTF-8 字符串文字初始化，可选地用大括号括起来。

# image - 在 Coldfusion 中上传和调整大量图像大小时如何避免请求超时？

> ID：12596807
> 
> 赞同：0
> 
> 时间：2012-09-26T07:38:07.380
> 
> 标签：image, coldfusion, amazon-s3, timeout

我正在运行`Coldfusion8`并且有一个 cfc，它循环通过一组数据库记录。

每条记录包含两个字段`image path`和`image file`. 我正在为每个图像构建一个路径，将其上传到临时文件夹，调整大小然后将其存储到`S3`.

根据记录的数量，这可能需要相当长的时间，而且我无法使用更大的图像集成功完成上传周期（最终超时）。

我已经将超时阈值设置为`5000`，但似乎还不够。

我可以从我离开的地方继续，因为在上传到 S3 之前，我会保留一个媒体日志以进行检查。这样我可以完成任务，但是我需要触发这个函数 5x 才能上传 400 个项目。

**问题：**
有没有办法避免超时而不设置（在 S3 情况下）`httptimeout`some `50000000`？`CFTHREAD`如果用户在系统仍在上传时离开导入页面，那么在 a 中运行它是否有意义，或者这是否会成为问题？

感谢您的一些见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:12:45.453

您可以使用 CFthread 执行任务，但请确保锁定范围！否则你可能会多次运行这个内存密集型进程并终止服务器，如果它如此密集，你只希望这个进程一次运行一次。

但是，您还有其他选择，如果这不是您的应用程序用户需要运行的东西，并且它是您做的一次性过程，您可以设置一个具有超长超时时间的计划任务，以便在服务器不是很正常的情况下在一夜之间运行高使用率，这允许您为应用程序独立设置超时，因此应用程序的其余部分不受全局超时更改的影响。

另一种选择是，如果这是用户半定期做的事情，那么通过电子邮件、日志或其他方式（Ajax 或 Websockets）推送通知的线程让用户知道他们的任务已完成。这样做的好处是可以更改超时，根据线程生成时动态处理的数据量来计算。但是，如果您不小心，您的服务器可能会因处理大型数据集的许多线程而过载（加上日志文件读写锁将更难管理）。

不过，我会鼓励你把它拿走，看看什么样的解决方案对你有用，然后发布你的最终解决方案，这样其他人就可以看到结果是什么。

希望这可以帮助。

# visual-studio-2010 - 如何集成SVN，有什么好处

> ID：12596812
> 
> 赞同：-2
> 
> 时间：2012-09-26T07:38:15.413
> 
> 标签：visual-studio-2010, svn

我是点网新手。svn 对开发者真的有帮助吗？如何将 svn 与 Visual Studio 2010 集成？请说明程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:40:49.437

就像一个免费的解决方案会推荐：

[AnkhSVN](http://ankhsvn.open.collab.net/)

从*我的*经验来看，我对 VS 中的此类插件并不感到满意，因为它们通常会使我的 VS 变慢，而且我需要快速的 IDE 才能工作。

所以*我*总是选择简单的 [Tortoise](http://tortoisesvn.tigris.org/)独立解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:44:12.650

是的！将源代码提交到像 SVN 这样的源代码控制系统非常重要。

对于 SVN，您可以使用与 2005、2008、2010 和 2012 兼容的 Visual Studio 插件 ankhsvn。：

[http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)

下面是一个基础教程：

[http://www.codetunnel.com/blog/post/92/ankhsvn-basics-tutorial](http://www.codetunnel.com/blog/post/92/ankhsvn-basics-tutorial)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T07:43:52.730

Visual Studio 有很多可用的插件，您可以利用 Visual Studio 扩展库来探索..

这里有一些

**免费** 的 VsTortoise - Microsoft Visual Studio 的 TortoiseSVN 插件 - [http://vstortoise.codeplex.com/](http://vstortoise.codeplex.com/) AnkHSVN

**付费** 视觉 SVN

# ruby-on-rails - 如何从 github 安装/添加包到 rails？

> ID：12596813
> 
> 赞同：2
> 
> 时间：2012-09-26T07:38:17.310
> 
> 标签：ruby-on-rails

我正在尝试学习如何将软件包（如果这是正确的术语）安装/添加到我的 rails 应用程序中。特别[是 https://github.com/codegram/ember-forms](https://github.com/codegram/ember-forms)。我似乎找不到任何教程或逐步说明如何执行此类操作，并且无法识别 ember-forms 的文件夹/文件结构。

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:57:41.670

这只是一个 Javascript 库 - 使用提供的 rake 任务构建它或从[下载](https://github.com/codegram/ember-forms/downloads)页面下载已发布的版本。

除非您想在库本身上工作，否则您只需要生成的 javascript - 在 vendor/assets/javascripts 中弹出它

# bash - 从文本文件重新排列行的巧妙 bash 解决方案？

> ID：12596814
> 
> 赞同：0
> 
> 时间：2012-09-26T07:38:27.607
> 
> 标签：bash, unix, text, text-files

我有 100 个文件，每个文件有 1000 行：

```
$ cat 1.txt
line1.1
line1.2
...
line1.1000

$ cat 2.txt
line2.1
line2.2
...
line2.1000

...

$ cat 100.txt
line100.1
line100.2
...
line100.1000 
```

交错它们的最简单方法是什么，这样我最终得到 1000 个文件，每个文件有 100 行，这样第一个文件包含 100 个文件中的所有第一行，第二个文件包含 100 个文件中的所有第二行，依此类推：

```
$ cat 1.txt
line1.1
line2.1
...
line100.1

$ cat 2.txt
line1.2
line2.2
...
line100.2

...

$ cat 1000.txt
line1.1000
line2.1000
...
line100.1000 
```

我可以编写 Python 脚本，但我想知道是否有使用 UNIX 工具的巧妙解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:40:32.217

```
awk -F . '{print >> $2 ".new"}' {1..100}.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:29:32.793

以下`paste`和`split`组合应该工作：

```
paste -d '\n' {1..100}.txt | split -l 100 -a 4 -d - out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:40:52.827

```
awk '{if(count==1000){count=0;}count++;print >count".txt"}' *.txt 
```

用两行成功测试：

```
> cat 1.txte
1
2
> cat 2.txte
1
2
> awk '{if(count==2){count=0;}count++;print >count".txt"}' *.txte
> cat 1.txt
1
1
> cat 2.txt
2
2
> 
```

所以你只需要从到更改`count==2`，`count==1000`因为你的文件有 1000 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:03:19.927

假设您的输出文件名与您输入的文件名不冲突，我将使用以下内容。如果您确实有名称冲突，请修改以下内容以使用临时目录来累积输出文件。

```
#!/bin/bash
for infilenum {1..100}
do
  outfilenum=1
  while read line
  do
    echo $line >> $outfilenum.out
    let outfilenum=outfilenum+1
  done < "$infilenum.txt"
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:09:41.533

`paste`用排队怎么样？

```
$ paste 1.txt 2.txt 3.txt 
line1.1 line2.1 line3.1
line1.2 line2.2 line3.2
line1.3 line2.3 line3.3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T08:15:34.193

```
cat *.txt | awk '{x=NR%i?NR%i:i;print > x".txt"}' i=1000 
```

# iphone - 如何迁移 iPhone 5 屏幕分辨率的应用程序？

> ID：12596818
> 
> 赞同：0
> 
> 时间：2012-09-26T07:38:42.417
> 
> 标签：iphone, ios, ipad

我在 iphone 中有一个应用程序，其中我使用背景中的大多数静态图像作为它自身的背景图像中的图像。意味着一个包括所有静态事物的单个背景图像。现在我也想迁移到 iphone 5。现在我使用 640*960 的图像作为背景图像。如果我将其更改为 640*1136，那么当它用于 4 系列 iphone 时，我认为图像会缩小。让我通过检查屏幕来固定帧大小.谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:18:23.173

要知道，您应该使用什么样的图像（对于 iPad 768x1024，对于 iPhone 320x480 等。）您可以检测设备，然后设置相应的图像。

您可以使用这篇 SO 文章区分 iPad/Retina/iPhone：

[在 iPhone SDK 中检测视网膜屏幕/iPhone 4](https://stackoverflow.com/questions/3272752/detect-retina-screen-iphone-4-in-iphone-sdk/7607087#7607087)

您可以使用此 SO 文章中的示例检测 iPhone 5：

[如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

如果您只支持肖像，您可以使用以下简单方法进行检查：

```
if([[UIScreen mainScreen] bounds].size.height == 480)
{
    //iPhone, iPhone retina
}
else if([[UIScreen mainScreen] bounds].size.height == 1024)
{
    //iPad, iPad retina
}
else //568 height
{
    //iPhone 5
} 
```

当然 - 正如**Valeriy Van**所提到的，您需要将 Default-568h@2x.png 图像添加到您的捆绑包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:51:10.650

UIImageView 的图像分辨率和大小之间没有联系。图像将根据 contentMode 属性重新缩放或定位在视图边界内。

您首先需要的是 - 添加 640x1136 的 Default-568h@2x.png 图像作为 Retina 4 英寸的启动图像。如果您的观点的弹簧和支柱设置正确，那么一切都会正常进行。

# asp.net-mvc - 使用 asp.net mvc 3 插件架构的灵活布局

> ID：12596819
> 
> 赞同：1
> 
> 时间：2012-09-26T07:38:44.977
> 
> 标签：asp.net-mvc, layout

我正在使用 asp.net mvc 3 开发一个可插拔架构，您可以将插件 dll 放在 Bin 文件夹中并重新启动应用程序，然后您的插件及其菜单出现在整个站点菜单中，

但我想知道是否可以管理任何插件中任何控制器的每个 ActionResult 应该在站点的哪个部分动态呈现，换句话说，我试图支持灵活的布局，这意味着有时某些插件中某些控制器的 ActionResult 呈现在页面顶部，但有时可能需要在页面底部呈现，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:56:47.070

您可以使用不同的布局，将信息加载到每个区域的不同区域并在它们之间切换。

例如，您可以有一个布局文件，您可以在其中将内容从控制器加载到页面的页眉中，而另一个布局文件可以在页脚中加载相同的内容。

从控制器加载视图文件时，您只需要确定这次应该加载的业务模型的位置，并更改要在视图文件上使用的布局值。

```
@if (whatever condition you decide)
    Layout = "~/Views/Shared/_LayoutHeader.cshtml";
else
    Layout = "~/Views/Shared/_LayoutFooter.cshtml"; 
```

# c++ - 如何将二维数组对象传递给 C++ 中的函数？

> ID：12596821
> 
> 赞同：0
> 
> 时间：2012-09-26T07:38:56.747
> 
> 标签：c++, parameter-passing

我有一个“spot”类的 2D 固定大小对象数组 Spot map[row][col];//row & col 是动态变化的整数我想将它传递给函数 bool isFilled(int row,int col,Spot[ row][col]){} 如何定义函数？如何删除这个数组？请看我的代码。谢谢你的帮助。

```
Spot.h

    #ifndef SPOT_H
#define SPOT_H

class Spot
{
private:
    bool isBunny;
    int nextCycle;
public:
    static const int UP = 0;
    static const int RIGHT = 1;
    static const int DOWN = 2;
    static const int LEFT = 3;
    static const int SLEEP = 4;

    virtual void setSpot(bool newIsBunny);
    Spot();
    ~Spot();
    virtual int getNextCycle();
    virtual void setNextCycle();
    virtual bool getIsBunny();
    virtual void makeBunny();
};

void Spot::setSpot(bool newIsBunny)
{
    isBunny = newIsBunny;
    nextCycle = UP;
}

Spot::Spot()
{
    isBunny = false;
    nextCycle = UP;
}

Spot::~Spot()
{
}

void Spot::setNextCycle()
{
    if (nextCycle != SLEEP)
    {
        nextCycle++;
    }
}

int Spot::getNextCycle()
{
    return nextCycle;
}

bool Spot::getIsBunny()
{
    return isBunny;
}

void Spot::makeBunny()
{
    if (!isBunny)
        nextCycle = UP;
    isBunny = true;
}

#endif  /* SPOT_H */

Bunny.cpp

#include "Spot.h"
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <stdlib.h>
#include <vector>
#include <boost/algorithm/string.hpp>

using namespace std;

static string line;
static ifstream inFile;
static ofstream outFile;
bool isFilled(int x, int y, Spot **myMap);

int main () {
  int numSims = 0;
  inFile.exceptions ( ifstream::failbit | ifstream::badbit );

  try {
    inFile.open ("/home/mike/Desktop/input.txt");
    outFile.open ("/home/mike/Desktop/output.txt");
   // while(!inFile.eof())
      {

         getline (inFile,line);
        numSims= atoi(line.c_str());
       //cout<<"numSims: "<<numSims<<endl;
        for (int i = 0;i < numSims;i++)
            {
                int minPerCycle = 1;
                getline (inFile,line);
                minPerCycle= atoi(line.c_str());

            //cout << "minPerCycle: "<<minPerCycle <<endl;

                int row = 0;
                int col = 0;
                    getline (inFile,line);
                    std::vector<std::string> xy;
                    boost::split(xy, line, boost::is_any_of(" "));
                    row=atoi(xy.at(0).c_str());
                    col=atoi(xy.at(1).c_str());
                    //cout <<"row: "<< row<<endl;
                    //cout << "col: "<<col<<endl;

                    Spot** myMap = new Spot* [col];
                    for(int i = 0; i < col; ++i)
                        myMap[i] = new Spot [row];

                    //std::vector<std::vector<Spot> > myMap(x, std::vector<Spot>(y));
                    for (int i = 0;i < row;i++)
                            {
                                getline (inFile,line);
                                //cout<<line<<endl;
                                for (int j = 0;j < col;j++)
                                {
                                    if (line[j] == 'B')
                                    {
                                        myMap[i][j].setSpot(true);

                                    }
                                    else
                                    {
                                        myMap[i][j].setSpot(false);

                                    }
                                }
                            }
                int numCycles = 1;

                if (isFilled(row,col,myMap))
                {
                    numCycles = 0;
                }

                while (!isFilled(row,col,myMap))
                {
                    numCycles++;

                    for (int j = 0;j < row;j++)
                    {
                        for (int k = 0;k < col;k++)
                        {
                            if (myMap[j][k].getIsBunny())
                            {       //cout<< j<<" "<<k<<" " <<"true"<<endl;
                                    switch (myMap[j][k].getNextCycle())
                                    {
                                        case Spot::UP :
                                            if (j>0)
                                            myMap[j-1][k].makeBunny();
                                            break;
                                        case Spot::RIGHT :
                                            if (k<col-1)
                                            myMap[j][k + 1].makeBunny();
                                            break;
                                        case Spot::DOWN :
                                            if (j<row-1)
                                            myMap[j+ 1][k].makeBunny();
                                            break;
                                        case Spot::LEFT :
                                            if (k>0)
                                            myMap[j][k - 1].makeBunny();
                                            break;
                                    }
                                    myMap[j][k].setNextCycle();
                                }
                            //cout<< j<<" "<<k<<" " <<"outside"<<endl;
                        }
                    }

                }
                int time = numCycles*minPerCycle;
                outFile<<"It took " <<time <<" minutes for the bunnies to take over the world!\n";
                cout<<"It took " <<time <<" minutes for the bunnies to take over the world!\n";
                for(int i=0; i < col; i++) {
                   delete [] myMap[i];
                }
                delete myMap;

            }
      }

       inFile.close();
       outFile.close();

}
  catch (ifstream::failure e) {
    cout << "Exception opening/reading file";
  }

  return 0;
}

bool isFilled(int row, int col,Spot **myMap)
{
    for (int i = 0;i < row;i++)
    {
        for (int j = 0;j < col;j++)
        {
            if (!myMap[i][j].getIsBunny())
            {
                //cout<<"true ";
                return false;

            }
            //else
            //  cout<<"false ";

        }
        //cout<<endl;

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:47:57.970

必须尝试用指针传递吗？

```
static bool isFilled(int row, int col,Spot** yourMap) 
```

我不确定`Spot myMap[row][col]`编译器是否会接受`row`并且`col`似乎在运行时设置。

您可能需要按以下方式分配内存

```
Spot** myMap = new Spot* [col];
for(int i = 0; i < col; ++i)
    myMap[i] = new Spot [row]; 
```

删除内存将需要您使用类似`for loop`但记得调用`delete []`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:48:54.957

我认为您可以将 2D 数组的引用发送到您想要使用 2D 数组的方法中。

```
bool isFilled(int row, int col, Spot &m){  // if you want a fix position in the array
 // Code
} 
```

如果要删除数组，则必须使用删除运算符。

首先，您必须删除指针数组指向的所有数组，即

```
for(int i=0; i < size; i++) {
   delete [] spot[i];  // Depends on what you have called the array
} 
```

然后你必须删除指针数组

```
delete [] spot; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:26:44.360

> 现货 myMap[row][col];

这不是合法的 C++ 代码。您可以在 C99 中执行此操作，但不能在 C++ 中执行此操作。

在 C++ 中有两个基本选择：

1.  使用您将其视为二维数组的一维数组。
2.  使用不规则的 2D 数组而不是连续的 2D 数组。

使用一维数组的主要优点是速度快。如果您需要速度，这是要走的路。图形程序员经常使用这种方法，因为他们需要这种速度。缺点是您必须将 2D 索引转换为单个索引。例如，`map[i][j]`可能变为`map[i*col+j]`（行主要顺序）或`map[i+j*row]`（列主要顺序）。

使用不规则数组的主要优点是索引是自然的。缺点是要管理的内存要多得多，而且访问速度要慢得多。使用扁平数组，访问包括少量整数操作和单个内存查找。参差不齐的数组需要两次内存查找。

这是 C++，所以我的建议是让你的地图成为一个类。提供具有分配内存的行和列大小的非默认构造函数，以及要清理的析构函数（如果需要）。如果你`std::vector`用作底层存储机制，它会为你做分配和清理。提供一个重载的`operator()`作为索引机制到你的地图。现在，您用来表示地图的机制已隐藏。您可以从向量向量开始，如果太慢，请切换到扁平数组方法。

# java - 是否有可能在 Facebook 用户的墙上发帖并且在每种情况下都没有授权？

> ID：12596822
> 
> 赞同：0
> 
> 时间：2012-09-26T07:39:04.153
> 
> 标签：java, android, facebook, facebook-wall

实际上我有一个问题 - 我确实在我的应用程序中登录了 Facebook。我也可以做用户授权的墙贴，但是我每次都需要调用授权 - 这需要一些时间并导致屏幕上（短时间内）有一个带有生成（诱导）Facebook 的白色背景 ( [https://dl.dropbox.com/u/41114685/1.JPG )。](https://dl.dropbox.com/u/41114685/1.JPG)这就是为什么我感兴趣的是，是否有可能在用户的墙上做一个帖子不会导致，每次一个方法进行身份验证（使帖子出方法onComplete（））？我希望能得到你的帮助。

```
package expir.java.file;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;

public class FacebookAuthorizeAndPost implements DialogListener{

FacebookAuthorizeAndPost(Activity activity){
    this.activity = activity;
}

public void facebookAuthorize(){
    facebookClient = new Facebook(APP_ID);
    facebookClient.authorize(activity, new String[]{"publish_stream"}, Facebook.FORCE_DIALOG_AUTH, this);
}

public void onComplete(Bundle values) {
    if (values.isEmpty())
    {
        return;
    }
    if (!values.containsKey("post_id"))
    {
        try
        {
            Bundle cont = new Bundle();
            cont.putString("message", "bla-bla-bla");
            cont.putString("name", "Testing facebook");
            cont.putString("link", "www.????????.com");
            cont.putString("description", "This is a funny real test!!! This is a funny real test!!! This is a funny real test!!! This is a funny real test!!!");
            cont.putString("picture", "http://code.google.com/p/android-developer-scripts/logo?cct=1294556390");
            //facebookClient.dialog(activity, "feed", cont, this);
            facebookClient.request("me/feed", cont, "POST");
        }   
        catch (Exception e)
        {
            System.out.println(e.getMessage());
        }
    } 
}

public void onFacebookError(FacebookError e) {
    //
}

public void onError(DialogError e) {
    // 
}

public void onCancel() {
    // 
}

public Activity activity;   
private final String APP_ID = "??????????????????";
private Facebook facebookClient;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:55:18.167

您可以使用类的`isSessionValid()`方法`Facebook`来检查是否存在有效的未过期会话，如果不存在则调用该`authorize()`方法，否则继续在用户的墙上发布。

也请在这里参考这篇文章：[http ://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:37:56.583

几分钟前，我刚刚在另一个问题上发布了一个示例。

见这里 -[登录 facebook](https://stackoverflow.com/questions/12597094/how-to-log-in-to-facebook-on-android/12597617#12597617)

# php - 如何在文件夹中创建文件后在 php 中运行代码？

> ID：12596825
> 
> 赞同：1
> 
> 时间：2012-09-26T07:39:10.233
> 
> 标签：php, file-get-contents

我想在使用 file_get_contents() 创建文件后运行代码。现在，当我调用代码以使用 simplexml_load_file() 加载 xml 文件时，它什么也不做，因为文件需要时间加载并使用 file_get_contents() 保存在文件夹中。

如果我有任何方法可以在文件夹中创建文件后立即运行代码，那么我认为这项工作将完成。这是我要运行的代码

```
 if(file_exists("cache/cache_file.xml")){
$offerxml = simplexml_load_file("cache/cache_file.xml");
$hotel = $offerxml->offer;

$resultpage = count($hotel) / 10;
?>
<div class="pagination_btn_cont">
<?php for($btn=1;$btn<=$resultpage;$btn++){?>
<div class="pagination_btn"><?php echo $btn;?></div>
<?php } ?>
</div><!--pagination_btn_cont ends--> 
<?php } ?>
</div><!--search_result_cont ends here--> 
```

但是这段代码什么也不做，因为当时的文件没有完全加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:51:03.817

该函数`file_exists()`需要一个绝对路径，您传递一个相对路径，使用 DOCUMENT_ROOT 提供前者。此外，您可以每秒检查一次文件，最长等待时间，如下所示：

```
$wait = 8; //maximum wait set to 8 seconds
while(!file_exists($_SERVER['DOCUMENT_ROOT'] ."cache/cache_file.xml") && $wait){
    sleep(1);
    $wait--;
}

if(file_exists($_SERVER['DOCUMENT_ROOT'] . "cache/cache_file.xml")){
    $offerxml = simplexml_load_file("cache/cache_file.xml");
    $hotel = $offerxml->offer;
    ...
    ... 
```

# android - 非游戏果酱应用的好例子？

> ID：12596827
> 
> 赞同：7
> 
> 时间：2012-09-26T07:39:21.823
> 
> 标签：android, c++, ios, marmalade

有没有人有任何使用 Marmalade 平台制作的 iOS 或 Android 应用程序的好例子，而**不是游戏**？

我们知道已经使用 Marmalade 开发了许多出色的游戏，但我们正在努力寻找非游戏示例的良好列表，尤其是在 iOS 和 Android 上使用本机界面元素的任何示例。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T19:40:06.517

这是我开发的：

iOS [https://itunes.apple.com/us/app/nordic-naturals/id554262658?ls=1&mt=8](https://itunes.apple.com/us/app/nordic-naturals/id554262658?ls=1&mt=8)

安卓： [https ://play.google.com/store/apps/details?id=com.nordicnaturals.app&hl=en](https://play.google.com/store/apps/details?id=com.nordicnaturals.app&hl=en)

Marmalades 对 Native UI 的支持有些有限，这带来了一些困难，并且在使用 Native UI 功能时性能也很差，这也限制了我的能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T21:50:26.910

据我所知，当人们问这个问题时，答案是“不”或没有回应。

果酱论坛： [https ://www.madewithmarmalade.com/devnet/forum/will-marmalade-be-serious-platform-b​​usiness-and-general-purpose-applications](https://www.madewithmarmalade.com/devnet/forum/will-marmalade-be-serious-platform-business-and-general-purpose-applications)

果酱团队没有人回应。只有被许可人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:22:57.533

我也没有看到任何由 marmalade 制作的非游戏应用程序，尽管他们对 Phonegap api 的支持表明 marmalade 人正在认真尝试改变它。在我看来，即使是非游戏应用程序，Marmalade 的使用也相当稳定（我只使用了它的 C++ 版本）。

无论它缺少什么功能，都可以使用 EDK 轻松开发并添加回 marmalade 项目。

# database - 如何在 Redis 中组织汽车的品牌、型号和世代

> ID：12596831
> 
> 赞同：1
> 
> 时间：2012-09-26T07:39:47.957
> 
> 标签：database, data-structures, orm, redis

我需要将其品牌、型号和世代存储在 DB (Redis) 汽车中，并具有以下要求：

*   我需要能够获取所有具有确切品牌、品牌和型号或品牌、型号和世代的汽车（例如所有 BMW - M3 - E30，或只是所有 BMW -M3 等等）

*   我需要存储汽车的评级，以便我可以获取顶级 X 宝马或顶级 X 宝马 E30 ......

我设计了一些结构，但它似乎太大了。我有 4 种对象类型：汽车、品牌、型号、世代。它们按树形结构分组。树（根）的顶部是制造，下一层是模型，下一代，底部是汽车。因此，makes、models 和generations 分别包含了models、generations 和cars，而cars、generations 和models 具有简单的字符串值，分别指向generation、model 和make。

更重要的是，品牌和型号拥有自己的分类汽车。

你怎么看？我想将品牌、模型和生成联合到单个对象，但现在不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:14:02.940

我会将您的基础对象设为汽车，您可以将其建模为包含 Make、Model、Generation、Rating 和您需要的任何其他字段的哈希。然后对于每个品牌，有一个排序集，例如`make:BMW => {car_id, car_id, car_id}`，其中分数等于评级。同样，具有模型和生成排序集，也按等级排序。然后，您可以使用 zunionstore/zinterstore 指定所需的确切属性集，并按评级从结果中提取数据。这使得添加要查询的新方面变得容易 - 您可以创建一个新的 zset 集合，例如颜色并将其扔到同一个联合/相交引擎中。

# java - 如何运行java servlet？

> ID：12596833
> 
> 赞同：8
> 
> 时间：2012-09-26T07:39:58.563
> 
> 标签：java, jsp, jakarta-ee, servlets

我有一个小服务程序。我是java新手。但我需要运行 servlet。它有两种方法：

```
public void doGet (HttpServletRequest request,
                     HttpServletResponse response) {...} 
```

和

```
public void doPost HttpServletRequest request,
                     HttpServletResponse response) {...} 
```

**我需要执行哪些步骤来运行 servlet？**（我安装了tomcat 7，带有tomcat插件的eclipse SE，netBeans）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:08:44.827

1.  创建动态 Web 项目
2.  创建一个扩展`HttpServlet`并覆盖该方法的新类，`doGet`并`doPost`在其中编写您的业务逻辑
3.  配置 `web.xml`，类似于：

    ```
     <servlet>
        <servlet-name>helloworld</servlet-name>
        <servlet-class>test.helloworld</servlet-class>
      </servlet>

      <servlet-mapping>
        <servlet-name>helloworld</servlet-name>
        <url-pattern>/helloworld</url-pattern>
      </servlet-mapping> 
    ```

4.  在 tomcat 中部署你的 web 项目

5.  在浏览器的地址栏中输入`localhost:8080/mywebapp/helloworld.do`，`mywebapp`是你的项目名称

如果你幸运的话，你会看到结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T08:33:42.703

内部调用 doGet 和 doPost 将如下所示，

```
Client ----------------------------> Container  
sends request               |
                            |
                Creates    HttpServletRequest   HttpServletResponse objects 
                            |
                            |                   
                Create Thread for that Servlet and pass above objects to it
                            |
                            |
                Thread Call the Service() method and decision is made to call doGet() or doPost()
                            |
                            |
                    doGet()/doPost() called 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T10:09:35.280

我建议你：

1.  打开 netbeans 并创建一个新的 web 项目
2.  右键项目，添加一个Servlet
3.  右键单击项目并选择运行。它将在 Glassfish 上运行网络应用程序。
4.  它将自动打开您的 Web 浏览器并导航到 servlet 地址，例如：localhost:8080/MyServlet 等。

这是运行 servlet 的最快方法。玩得开心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T07:41:53.483

使用 IDE（Netbeans/eclipse）创建一个 java web 项目，在项目中添加一个 servlet，它会让你的生活更轻松

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T07:47:40.933

看来您对 Java EE 和 Servlet 知之甚少。

基本上，您需要编写一个 web.xml 文件，它将一个 URL 映射到您的 servlet，构建项目，创建一个 Web 存档 (WAR)，将其部署到服务器上。

这是 Oracle 的官方手册：http: [//docs.oracle.com/javaee/6/tutorial/doc/bnadp.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnadp.html)。

尝试谷歌在 tomcat 上使用 servlet，你一定会找到一个很好的教程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T07:48:36.283

这是@BaluC 的一个例子

[http://balusc.blogspot.in/2007/04/imageservlet.html](http://balusc.blogspot.in/2007/04/imageservlet.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T07:52:44.380

这是一个非常基本的问题，伙计！

[您可以通过此教程链接](http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html)了解如何在 Eclipse 上执行此操作。

请尝试从一些好书学习。市场上有许多不错的 Java EE 书籍。

[或者您也可以从oracle 站点](http://docs.oracle.com/javaee/1.4/tutorial/doc/)学习 Java EE 。

# django - Django：DecimalField 接受浮点数，但这应该会引发错误

> ID：12596834
> 
> 赞同：2
> 
> 时间：2012-09-26T07:40:08.213
> 
> 标签：django, decimal

我有一个带有小数字段的 Django 模型：

```
class User(models.Model):
    ...
    balance = models.DecimalField(max_digits=10, decimal_places=2, blank=True, null=True)
    ... 
```

我的应用程序在我的开发机器（Python 2.7.1、Mac OSX、Django 1.4、MySQL InnoDB）和生产服务器（Python 2.6.5、Ubuntu、Django 1.4、MySQL ISAM）上运行

问题出在我的开发机器上。此代码可以正常工作而不会引发错误：

```
>>> u = User.objects.get(pk=1)
>>> u.balance
Decimal('9.00')
>>> u.balance=1.44
>>> u.save()
>>> u.balance
1.44 
```

据我了解， u.save() 应该通过以下错误，它在我的生产实例上发生：

```
>>> u.save()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/base.py", line 529, in save_base
    rows = manager.using(using).filter(pk=pk_val)._update(values)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/query.py", line 557, in _update
    return query.get_compiler(self.db).execute_sql(None)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py", line 986, in execute_sql
    cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py", line 808, in execute_sql
    sql, params = self.as_sql()
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py", line 951, in as_sql
    val = field.get_db_prep_save(val, connection=self.connection)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/fields/__init__.py", line 873, in get_db_prep_save
    return connection.ops.value_to_db_decimal(self.to_python(value),
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/fields/__init__.py", line 847, in to_python
    return decimal.Decimal(value)
  File "/usr/lib/python2.6/decimal.py", line 649, in __new__
    "First convert the float to a string")
TypeError: Cannot convert float to Decimal.  First convert the float to a string 
```

那么为什么我的开发实例没有抛出这个错误呢？出现问题是因为我签入了一些通过单元测试的错误代码。这个错误应该被抛出。我放了我的环境细节，因为它必须是由于这些差异之一。我怀疑 MySQL ISAM 与 InnoDB，但完全不确定。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:04:11.887

运行 Python 2.7 的开发环境不应该抛出该错误，但运行 Python 2.6 的生产环境应该。

[来自关于十进制对象](http://docs.python.org/library/decimal.html#decimal-objects)的 Python 文档：

> 在 2.7 版更改: 现在允许构造函数的参数是浮点实例。

# objective-c - 如何在基于页面的应用程序的视图中禁用页面滑动

> ID：12596835
> 
> 赞同：1
> 
> 时间：2012-09-26T07:40:11.810
> 
> 标签：objective-c, ios, xcode, ipad, uipageviewcontroller

在我的应用程序中，我正在使用基于页面的应用程序，其中页面的滑动将以两种方式发生

1.通过手指滑动

2.通过点击

我已禁用使用代码点击页面。

现在我的要求是我有一个按钮，单击按钮我在它的顶部添加一个视图。在这个视图中，当我用手指滑动时，页面的滑动仍然发生，这不应该发生。所以当我添加时如何禁用页面的滑动一个看法。下面是我有一个视图的代码。在这个视图中我想禁用滑动操作

```
-(IBAction)goTopopUp:(id)sender{
    myView.hidden = NO;
    myView.backgroundColor = [UIColor colorWithWhite:0 alpha:.5];
    [self.pageViewController.view addSubview:myView];
    [self.view addSubview:searchBar];
} 
```

注意：它是一个基于页面的应用程序

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T07:53:12.680

```
-(IBAction)goTopopUp:(id)sender{
    myView.hidden = NO;
    myView.backgroundColor = [UIColor colorWithWhite:0 alpha:.5];
    [self.pageViewController.view addSubview:myView];
    self.pageViewController.view.userInteractionEnabled = NO;
    [self.view addSubview:searchBar];
} 
```

然后，在隐藏视图时将其切换为 YES

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T08:06:07.150

你可以使用`UIPageViewController`'s`dataSource`方法。检查您的视图是否可见，如果是，则`return nil;`在`– pageViewController:viewControllerBeforeViewController:`和 中`– pageViewController:viewControllerAfterViewController:`。希望这可以帮助 ：）。

# html - 输入按钮保持未格式化

> ID：12596838
> 
> 赞同：0
> 
> 时间：2012-09-26T07:40:16.537
> 
> 标签：html, css, button

关于格式化输入按钮，我有一个非常特殊的问题。

在我的第一页上，我创建了一个名为“按钮”的 CSS 规则，用于格式化单独排成一行的按钮。它工作得很好，按钮如下图所示

![在此处输入图像描述](../Images/7a004fcded5da2e4be2823b071137270.png)

这个按钮的css在下面

```
.button {
    width: 100%;
    height: 15mm;
    background-color: #AAA;
    color: #FFFFFF;
    font-size: 20px;
    text-shadow: 0px -2px #888;
    border:none; !important
    -moz-box-shadow:    0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;
    -webkit-box-shadow: 0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;
    box-shadow:         0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;

} 
```

在 html 中，它看起来像这样：

```
<a href="dashboard.html">
  <input class="button" type="button" value="SUBMIT" action="dashboard.html" />
</a> 
```

问题是，我已经复制了这条规则，并在第二页中对平行的按钮稍作了修改，并且它没有格式化按钮。奇怪的是，它出现在dreamweaver中

![在此处输入图像描述](../Images/699235a3d70aff35b0fa6ba02245f451.png)

但在任何浏览器中，它都会丢失它的格式

![在此处输入图像描述](../Images/813491d6eded6f06dc6da451afa1740b.png)

这是并行按钮的CSS

```
.2buttons {
    width: 40%;
    height: 15mm;
    background-color: #AAA;
    color: #FFFFFF;
    font-size: 20px;
    text-shadow: 0px -2px #888;
    border:none; !important
    -moz-box-shadow:    0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;
    -webkit-box-shadow: 0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;
    box-shadow:         0px 2px 0px 0px #888, 0px -2px 0px 0px #DDD;

} 
```

这是html

```
<a href="report.html">
  <input class="2buttons" type="button" value="OK"/>
</a> 
```

奇怪的是，即使您将第一个有效的 css 规则应用于这些按钮，它们仍然保持未格式化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:45:20.743

您的代码中有两件事。

**首先**永远不要以数字 开头**的班级**和**ID名称。**

像这样写**.buttons2**而不是**.2buttons**。

**＆ 第二**

像这样写

```
border:none !important; 
```

而不是这个：

```
border:none; !important 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:43:33.690

`border:none; !important`应该`border:none !important;`

并将类名更改为 .twoButtons （或其他）而不是 .2buttons 因为类名不能以数字开头......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:46:41.887

不要以数字开头的类名！这仅在 Internet Explorer 中受支持。看

[http://www.w3schools.com/css/css_id_class.asp](http://www.w3schools.com/css/css_id_class.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T07:46:54.067

您的问题在于班级名称以数字开头。你应该改变它。

# c - 如何使用正确的参数在 C 中调用 execl()？

> ID：12596839
> 
> 赞同：28
> 
> 时间：2012-09-26T07:40:18.643
> 
> 标签：c, exec, external, quotes, unistd.h

如果我输入 shell，我有 vlc（再现视频的程序）：

/home/vlc "/home/我的电影/我想看的电影.mkv"

它打开了一个复制电影。

但是，当我运行以下程序时：

```
#include <unistd.h>

int main(void) {

  execl("/home/vlc", "/home/my movies/the movie i want to see.mkv",NULL);

  return 0;
} 
```

vlc 打开但不复制任何内容。我该如何解决这个问题？

我尝试过的事情：

我猜的

```
execl("/home/vlc", "/home/my movies/the movie i want to see.mkv",NULL); 
```

相当于在 shell 中输入：

```
/home/vlc /home/my movies/the movie i want to see.mkv 
```

这不起作用，所以我尝试了

```
 execl("/home/vlc", "\"/home/my movies/the movie i want to see.mkv\"",NULL); 
```

并且 vlc 打开但也不会复制。

我没有在最后写 NULL，而是尝试了 0, (char*) 0, 1 .... 没有帮助。帮助！！！！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-26T07:43:13.040

```
execl("/home/vlc", 
  "/home/vlc", "/home/my movies/the movie i want to see.mkv", 
  (char*) NULL); 
```

您需要指定所有参数，包括`argv[0]`不是从可执行文件中获取的。

还要确保 final`NULL`被强制转换为`char*`.

详细信息在这里： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:56:53.970

如果您只需要执行您的 VLC 播放过程，并且只在完成后将控制权交还给您的应用程序进程并且没有更复杂的，那么我想您可以只使用：

`system("The same thing you type into console");`

# java - 如何在android中保存带有相机预览的叠加层？

> ID：12596851
> 
> 赞同：4
> 
> 时间：2012-09-26T07:41:23.300
> 
> 标签：java, android, overlay

我可以在实时相机源上放置一个叠加层，但我还需要使用该叠加层保存相机捕获的图像。

这是我的 MainActivity.class 文件的代码：

```
public class MainActivity extends Activity {

    private Button takePhoto, pickPhoto;
    private FrameLayout preview;
    private CameraSurfaceView cameraSurfaceView;
    private static final int SELECT_PICTURE_ACTIVITY_RESULT_CODE = 1;
    private static final int CAMERA_PIC_REQUEST = 2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        takePhoto = (Button) findViewById(R.id.btn_takephoto);
        pickPhoto = (Button) findViewById(R.id.btn_pickPhoto);
        preview = (FrameLayout) findViewById(R.id.frameLayout1);

        takePhoto.setOnClickListener(clickListener);
        pickPhoto.setOnClickListener(clickListener);
        cameraSurfaceView = new CameraSurfaceView(MainActivity.this);
        preview.addView(cameraSurfaceView);
    }

    View.OnClickListener clickListener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (v.equals(takePhoto)) {
                Camera camera = cameraSurfaceView.getCamera();
                camera.takePicture(null, null, new HandlePictureStorage());
            } else if (v.equals(pickPhoto)) {
                Intent photoPickerIntent = new Intent();
                photoPickerIntent.setType("image/*"); // to pick only images
                photoPickerIntent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(photoPickerIntent,
                        SELECT_PICTURE_ACTIVITY_RESULT_CODE);

            }
        }
    };

    private class HandlePictureStorage implements PictureCallback {

        @Override
        public void onPictureTaken(byte[] picture, Camera camera) {

            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
            String date = dateFormat.format(new Date());
            String photoFile = "CameraTest" + date + ".jpg";

            String filename = Environment.getExternalStorageDirectory()
                    + File.separator + photoFile;

            File pictureFile = new File(filename);

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(picture);
                fos.close();
                Toast.makeText(getApplicationContext(),
                        "New Image saved:" + photoFile, Toast.LENGTH_LONG)
                        .show();
            } catch (Exception error) {
                Log.d("Error",
                        "File" + filename + "not saved: " + error.getMessage());
                Toast.makeText(getApplicationContext(),
                        "Image could not be saved.", Toast.LENGTH_LONG).show();
            }

            Intent newInt = new Intent(MainActivity.this, AddImageOverlay.class);
            newInt.putExtra(Constant.BitmatpByteArray, filename);
            startActivity(newInt);
        }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
            case SELECT_PICTURE_ACTIVITY_RESULT_CODE:
                Uri selectedImageUri = data.getData();
                try {
                    Bitmap bitmap = MediaStore.Images.Media.getBitmap(
                            this.getContentResolver(), selectedImageUri);

                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                Toast.makeText(getApplicationContext(), "Photo Picked",
                        Toast.LENGTH_SHORT).show();
                // deal with it
                break;

            default:
                // deal with it
                break;
            }
        }
    }
} 
```

以及 CameraSurfaceView.java 的代码：

```
public class CameraSurfaceView extends SurfaceView implements
        SurfaceHolder.Callback {
    private SurfaceHolder holder;
    private Camera camera;

    public CameraSurfaceView(Context context) {
        super(context);

        // Initiate the Surface Holder properly
        this.holder = this.getHolder();
        this.holder.addCallback(this);
        this.holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }

    @Override
    public void surfaceChanged(SurfaceHolder h, int format, int width,
            int height) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = camera.getParameters();
        parameters.setPreviewSize(width, height);
        camera.setParameters(parameters);
        camera.startPreview();
        h.getSurface().setLayer(R.drawable.ic_launcher);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            // Open the Camera in preview mode
            this.camera = Camera.open();
            this.camera.setPreviewDisplay(this.holder);
        } catch (IOException ioe) {
            ioe.printStackTrace(System.out);
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when replaced with a new screen
        // Always make sure to release the Camera instance
        camera.stopPreview();
        camera.release();
        camera = null;
    }

    public Camera getCamera() {
        return this.camera;
    }
} 
```

# c - 一个关于随机 ractangles 的 Windows API 程序......我不知道变量如何获得它的值

> ID：12596856
> 
> 赞同：0
> 
> 时间：2012-09-26T07:41:46.427
> 
> 标签：c, windows, multithreading, api, mfc

```
<pre>
#include<Windows.h>
#include<process.h>

LRESULT CALLBACK WndProc(HWND hwnd,UINT message,WPARAM wParam,LPARAM lParam);
HWND hwnd;
int clientx,clienty;
int WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,PSTR szCmdLine,int iCmdShow)
{
    static TCHAR szAppName[]=TEXT("hello");
    MSG msg;
    WNDCLASS wndclass;

    wndclass.style=CS_HREDRAW|CS_VREDRAW;
    wndclass.hInstance=hInstance;
    wndclass.cbClsExtra=0;
    wndclass.cbWndExtra=0;
    wndclass.hbrBackground=(HBRUSH)GetStockObject(WHITE_BRUSH);
    wndclass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wndclass.hIcon=LoadIcon(NULL,IDI_APPLICATION);
    wndclass.lpfnWndProc=WndProc;
    wndclass.lpszClassName=szAppName;
    wndclass.lpszMenuName=NULL;

    if(!RegisterClass(&wndclass))
    {
        MessageBox(NULL,TEXT("this program requires windows NT"),TEXT("wrong"),MB_ICONERROR);
        return 0;
    }
    hwnd=CreateWindow(szAppName,TEXT("random rectangles"),
        WS_OVERLAPPEDWINDOW,
        100,100,800,600,
        NULL,NULL,hInstance,NULL);
    ShowWindow(hwnd,iCmdShow);
    UpdateWindow(hwnd);
    while(GetMessage(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return msg.wParam;
}

VOID Thread(PVOID pvoid)
{
    HBRUSH hbrush;
    HDC hdc;
    int xleft,xright,ytop,ybottom,ired,igreen,iblue;
    while(TRUE)
    {
        if(clientx!=0||clienty!=0)
        {
            xleft=rand()%clientx;
            xright=rand()%clientx;
            ytop=rand()%clienty;
            ybottom=rand()%clienty;
            ired=rand()%255;
            igreen=rand()%255;
            iblue=rand()%255;

            hdc=GetDC(hwnd);
            hbrush=CreateSolidBrush(RGB(ired,igreen,iblue));
            SelectObject(hdc,hbrush);

            Rectangle(hdc,min(xleft,xright),min(ytop,ybottom),max(xleft,xright),max(ytop,ybottom));
            ReleaseDC(hwnd,hdc);
            DeleteObject(hbrush);
        }
    }//while
}

LRESULT CALLBACK WndProc(HWND hwnd,UINT message,WPARAM wParam,LPARAM lParam)
{
    switch(message)
    {
    case WM_CREATE:
        _beginthread(Thread,0,NULL);
        return 0;
    case WM_SIZE:
        clientx=LOWORD(lParam);
        clienty=HIWORD(lParam);
        return 0;
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    }
    return DefWindowProc(hwnd,message,wParam,lParam);
}
<code> 
```

我不知道程序顶部的变量 clientx 和 clienty 在程序运行时如何获得它们的值...因为我在程序中没有看到任何值分配 ....我曾经在我的Visual Studio 2010，当它在 WinMain() 中运行到“ShowWindow(hwnd,iCmdShow);”时，clientx 和 clienty 得到了它们的值（735 和 654 随机......）。但在此之前，clientx 和 clienty 都是“ 0”。我很困惑~~非常感谢~~~ :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:56:11.613

我*想*你在问为什么`clientx`，`clienty`当它们没有明确初始化为零时，它们的值都为零。

全局变量 as`clientx`和`clienty`具有静态存储持续时间。如果具有静态存储持续时间的变量未显式初始化（​​来自C99 标准的第*6.7.8 节初始化）：*

*   如果是指针类型，则初始化为空指针；
*   **如果它具有算术类型，则将其初始化为（正或无符号）零；**
*   如果是聚合，则每个成员都根据这些规则（递归地）初始化；
*   如果是联合，则根据这些规则（递归地）初始化第一个命名成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:03:15.740

客户端 x 和客户端 y 初始化为零（如 hmjd 所述），因为它们是全局的。

当应用程序打开时，Windows 会向窗口过程发送一条 WM_RESIZE 消息，告诉它窗口有多大（如果用户调整窗口大小，则会再次发送此消息）。在底部附近，您可以看到根据 RESIZE 消息的参数设置 clientx 和 clienty 的代码 - 本质上它们是客户端窗口的高度和宽度（以像素为单位）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T10:31:38.263

这些值来自您之前的会话。当您关闭顶层窗口时，Windows 会记住它的大小和位置。

[http://support.microsoft.com/kb/235994](http://support.microsoft.com/kb/235994)

> Windows 将关闭窗口的大小和位置信息保存在以下注册表位置：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Streams
> 
> **Windows 最多可保存 28 个不同窗口的大小和位置信息。**每个窗口的大小和位置参数都存储在 Streams 键的子键中。

# macos - MAMP + 网络共享 osx 10.8

> ID：12596859
> 
> 赞同：2
> 
> 时间：2012-09-26T07:42:01.857
> 
> 标签：macos, web, mamp, sharing

我有一个带有 MAMP 的本地 webdev 环境。现在要在移动设备上测试我的项目，我将项目部署到我的实时服务器并启用网络共享，以便我可以使用 ipad 访问网络。

我已经知道网络共享仅在 MAMP 没有端口 80 时才有效。但现在在移动设备上进行了测试之后。我无法访问我的本地项目，因为网络共享似乎覆盖了 MAMP。尽管我禁用了 Websharing，但它仍然无法正常工作。我是否必须在终端中杀死 Websharing 或其他什么东西才能让 MAMP 再次启动？

谢谢你的任何helot

# deserialization - 首次从 NetworkStream 读取后的 XmlReader 块

> ID：12596862
> 
> 赞同：1
> 
> 时间：2012-09-26T07:42:08.700
> 
> 标签：deserialization, xmlreader, networkstream

我在反序列化网络流中的数据时遇到问题。打开套接字后，第一个读取语句成功，但随后尝试反序列化数据块而没有错误（尽管它最终会超时）。

我已检查是否发送了正确的数据并且格式正确。为了确认这一点，我尝试了相同的代码和相同的数据，但使用了文件流。我没有得到相同的行为 - 反序列化步骤不会阻塞。

我意识到文件流和网络流有一些差异，但我希望行为是相同的。

```
TcpClient client = new TcpClient();
client.Connect(Server, Port);
NetworkStream stream = client.GetStream();

XmlReaderSettings settings = new XmlReaderSettings();
settings.ConformanceLevel = ConformanceLevel.Fragment;

XmlReader reader = XmlReader.Create(stream, settings);

MyData recievedData;
XmlSerializer xmlSerializer = new XmlSerializer(typeof(MyData ));

while (reader.Read())
{
  if (reader.NodeType == XmlNodeType.Element && xmlReader.Name == "MyRoot")
  {
    // The following statement blocks
    recievedData= (MyData)xmlSerializer.Deserialize(reader);
  }
} 
```

经过一些额外的测试后，我注意到如果我强制服务器重新发送相同的消息，反序列化步骤将正确恢复。然而，随后的 read 语句也将起作用（拾取重复的消息），然后在反序列化步骤中再次阻塞。

可能还值得一提的是，消息是单个元素。类似于以下内容：

```
<MyRoot xmlns="http://www.mydomain.com/mydata" someattribute="123" /> 
```

# html - 我还需要添加什么才能在 Spring MVC 中显示德语变音符号

> ID：12596863
> 
> 赞同：1
> 
> 时间：2012-09-26T07:42:21.663
> 
> 标签：html, spring-mvc, special-characters

这是 Spring MVC 应用程序。我把它放到 spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

这到 web.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

这就是顶部的 .jsp 文件

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%> 
```

并且这个到 .jsp 文件里面的 html 开始标签

```
<META  http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

它仍然只显示问号而不是德语变音符号。我还需要添加什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T17:42:17.087

**在属性文件中**，我需要对超出 ISO-8859-1 支持范围的每个字符使用 unicode 转义，如 \uXXXX。

# php - 使用php mysql在单个表中进行多项选择

> ID：12596865
> 
> 赞同：4
> 
> 时间：2012-09-26T07:42:33.823
> 
> 标签：php, mysql, arrays

我正在尝试从单个表中提取多行。我正在尝试以不同的邮政编码拉所有男性或所有女性。

```
<?php
$zipCodes = array("55555", "66666", "77777", etc...);

$fetchUser = mysql_query("select * from users where gender = '$_POST[gender]' ".implode(" or zipCode = ", $zipCodes)." order by id desc");
while($var = mysql_fetch_array($fetchUser)) {
  code...
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:45:49.633

你应该用`IN`这个，

```
SELECT ...
FROM   tableName
WHERE gender = '$_POST[gender]' AND
      zipCode IN (55555, 6666, 77777) 
```

目前您的代码容易受到 SQL 注入的攻击。请阅读**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MySQLI](http://php.net/manual/en/book.mysqli.php)**扩展。

**[阅读这篇文章的更多内容：在 PHP](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)**
[**PHP PDO 中防止 SQL 注入的最佳方法：我可以将数组绑定到 IN() 条件吗？**](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:49:40.260

```
// Prevent SQL injection for user input
$fetchUser = mysql_query("select * from users where gender = '".filter_var($_POST[gender], FILTER_SANITIZE_STRING)."' OR zipCode IN (".implode(",", $zipCodes).") order by id desc");) 
```

# java - 在 Java 中什么是更快和更少的内存：int[] 或 boolean[]？

> ID：12596866
> 
> 赞同：1
> 
> 时间：2012-09-26T07:42:37.717
> 
> 标签：java, arrays, performance

在Java中，什么是更快和更少的内存：`int[n]`或者`boolean[n]`也许`Bitset(n)`？

该问题适用于小（`n`最多`1000`）、中（`n`介于`1000`和之间`100000`）和大（`n`大于`100000`）大小的数组。谢谢你。

我想实现标志（1/0）存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:59:18.180

在大多数 JVM 上；数组或对象有 12-16 字节的开销。一个`int`使用 4 个字节，一个`boolean`使用一个字节（它不是必须的，但它与 OpenJDK/HotSpot 一起使用）BitSet 使用两个对象和更多内存用于小型集合，但每个只有一个位。因此，对于小型集合，an`int[]`可以小于 a `BitSet`，但随着大小的增长，BitSet 将是最小的。

如果数据结构小于你的缓存，那么最快的就是那么`int[]`这是因为在闯入或一点点时存在非​​平凡的开销。`boolean[]``BitSet``int``byte`

但是，一旦您的缓存大小变得重要，与使用较慢缓存或主内存的开销相比，BitSet 的开销可能会逐渐减弱。

简而言之：如果有疑问，请使用 BitSet，因为这更清楚您的意图并且可能更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:53:09.497

实际上，它依赖于JVM。例如 Sun JVM 将`boolean`类型转换为`int`. 这意味着即使是布尔变量也使用 32 位。但是 jvm 优化布尔数组，并为每个布尔数组单元保留 8 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:46:20.083

Java 存储`boolean`在`int`内部。所以`int[]`和`boolean[]`完全一样。

`BitSet`使用更少的内存。更快与否取决于您的使用模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T07:46:44.757

内存使用的降序

```
int[n] > Bitset(n) > boolean[n] 
```

但是，在访问索引时，应该没有任何区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:05:38.490

考虑用枚举替换位标志。然后你可以使用例如 EnumSet 而不是 Bitset。

# forms - 联系页面模板 - 重定向到“感谢页面”不起作用

> ID：12596867
> 
> 赞同：0
> 
> 时间：2012-09-26T07:42:40.997
> 
> 标签：forms, wordpress, email, contact

我正在尝试通过自定义页面模板提交表单，但问题是它仅适用于`form action="<?php the_permalink() ?>"`并且我需要提交表单并将其重定向到类似这样的内容`form action="<?php bloginfo('url')?>/message-sent?id=<?php the_ID() ?>"`

完整代码：

```
<?php 
$emailError = '';
if(isset($_POST['submitted'])) {

            $email = trim($_POST['email']);

                //setup self email address
                $emailTo = $email; 

            $subject = "[reminder] Don't forget to download " . get_the_title();
            $body = "Name: $name \n\nEmail: $email \n\nComments: $comments";
            $headers = 'From: Myemail reminders <no-reply@xyz.com>' . "\r\n";
            wp_mail($emailTo, $subject, $body, $headers);
            $emailSent = true;

} ?>

<section class="box grid_9 list_posts">
<div class="inner">
                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div <?php post_class() ?> id="post-<?php the_ID(); ?>">
<div class="entry-content">
<div class="contact-form clearfix">
                            <?php if(isset($emailSent) && $emailSent == true) { ?>
<div class="thanks">
<?php _e('Thanks, your email was sent successfully.', 'framework') ?>
</div>
                            <?php } else { ?>
                                <?php the_content(); ?>
                                <?php if(isset($hasError) || isset($captchaError)) { ?>
<p class="error"><?php _e('Sorry, an error occured.', 'framework') ?>

                                <?php } ?>

<form action="<?php the_permalink()?>" id="contactForm" method="post">
<ul class="contactform">

<li>
                                            <input type="email" name="email" id="email" value="<?php if(isset($_POST['email']))  echo $_POST['email'];?>" class="required requiredField email" required="required" />
                                        </li>

<li class="buttons">

                                            <input type="hidden" name="submitted" id="submitted" value="true" />
                                            <input type="submit" value="Remind Me!"></input>
                                        </li>
</ul></form>

                            <?php } ?></div>
</div>
</div>
                    <?php endwhile; else: ?>
<div id="post-0" <?php post_class() ?>>
<h1 class="entry-title"><?php _e('Error 404 - Not Found', 'framework') ?></h1>

</div>
                <?php endif; ?></div>
</section> 
```

我在日志中没有 php 错误，页面重定向成功，但没有发送电子邮件。使用 the_permalink 时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:53:22.773

也许你忘了把“ **.php** ”放在你的`/message-sent?id=xxx`文件末尾，即`/message-sent.php?id=xxx`？

另一个想法：过滤用户输入总是一个好主意，因为你会收到很多垃圾邮件，放置某种验证码验证代码并清理/验证整个用户输入文本，即来自输入字段的每个文本你的形式。

对于电子邮件：

```
$email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL); 
```

姓名和评论：

```
$name = filter_var($_POST['name'], FILTER_SANITIZE_STRING);
$comments = filter_var(strip_tags($_POST['comments']), FILTER_SANITIZE_STRING); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:04:17.410

将表单数据提交到不同的脚本时，请确保（验证输入和）发送电子邮件的代码就在该文件中。

否则，您的 URL`/message-sent`可能会重写为完全不同的脚本，并且一旦单击提交按钮，则根本不涉及带有上述代码的脚本。

那有没有抓住你？如果我的措辞难以理解或者我的描述对你来说不是很清楚，请随意询问

# youtube-api - 目前可以使用 Youtube v3 API 来检索与用户无关的频道数据吗？

> ID：12596868
> 
> 赞同：5
> 
> 时间：2012-09-26T07:42:43.623
> 
> 标签：youtube-api

我想知道当请求的频道不是经过身份验证的用户自己的频道时，我们是否可以使用**Youtube V3** API 来检索频道数据、视频等。

v3 youtube api ( [https://developers.google.com/youtube/v3/docs/channels/list#try-it](https://developers.google.com/youtube/v3/docs/channels/list#try-it) ) 的文档说“list 方法返回与请求条件匹配的零个或多个频道资源的集合. 目前，此方法确实需要经过身份验证的用户，并且 API 仅支持检索与当前经过身份验证的用户相关联的频道信息的请求。”

V2 中的示例是[http://gdata.youtube.com/feeds/api/users/](http://gdata.youtube.com/feeds/api/users/) {user_name}，**v3中的****等价物** 是什么？还**可以**吗？

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T22:48:08.930

您可以通过 ID 请求频道，例如 Lady Gaga 频道：

[https://www.googleapis.com/youtube/v3/channels?id=UCNL1ZadSjHpjm4q9j2sVtOA&key=AIzaSyCR5In4DZaTP6IEZQ0r1JceuvluJRzQNLE&part=snippet,contentDetails](https://www.googleapis.com/youtube/v3/channels?id=UCNL1ZadSjHpjm4q9j2sVtOA&key=AIzaSyCR5In4DZaTP6IEZQ0r1JceuvluJRzQNLE&part=snippet,contentDetails)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:13:46.367

该计划是支持检索频道配置文件信息和上传/收藏夹/播放列表/等的 id。v3 中给定频道的提要。它还没有完全得到支持，但应该在公开发布的时候。（其中，我目前不能公开承诺一个日期。）****

# objective-c - 模态 UINavigationController 隐藏但不关闭

> ID：12596882
> 
> 赞同：2
> 
> 时间：2012-09-26T07:43:25.953
> 
> 标签：objective-c, ios, uinavigationcontroller

好的，所以我正在构建一个带有初始登录视图（名为 LoginVC 的视图控制器）的通用 iOS 应用程序，只是一个简单的 UIViewController。如果登录成功，应用程序将转到导航控制器 (MainNavigationVC)。我通过 XCode 的故事板 gui 创建了这个 segue，因此没有完成导航控制器的编程创建。导航控制器以全屏模式呈现，因此应用程序的其余部分在登录视图上运行，此导航控制器是一切的核心。

导航控制器包含一个视图（带有一个名为 UserStartPageVC 的视图控制器），在其导航栏中是一个注销按钮。此按钮向 UserStartPageVC 发送一个目标操作，目的是关闭导航控制器，从而将用户带回登录视图。

到目前为止一切正常。我可以按预期登录并使用该应用程序。但！当我注销然后重新登录时，XCode 告诉我：

> **警告！在演示过程中尝试在 <LoginVC: 0x756fcf0> 上演示 <MainNavigationVC: 0x753110>！**

我想这意味着登录视图正在尝试以模态方式显示 MainNavigationVC 导航控制器，但已经显示了另一个，对吧？但是怎么做？可以不显示就呈现视图吗？

注销时如何摆脱旧的导航控制器？我尝试了几种关闭模式视图的方法，例如：

*   从 UserStartpageVC 中运行

    [x dismissViewControllerAnimated:YES 完成：NULL]

    [xdismissModalViewControllerAnimated:YES]

其中 x 是 self、self.parentViewController 或 self.presentingViewController。

*   将 LoginVC 设置为 UserStartpageVC 中的属性并运行

    [self.loginVCdismissViewControllerAnimated:YES 完成:NULL]

等等。

所有经过测试的调用实际上都让我回到了登录屏幕，所以它*有点*工作。

有任何想法吗？如有必要，可以提供相关的代码示例，我只是无法弄清楚哪些部分是感兴趣的。导航控制器的 seguing 没有代码（performSegueWithIdentifier:sender: 除外），而解除它的代码是我似乎无法理解的部分。

作为旁注。到目前为止，这不是一个真正的问题。该应用程序运行，并且除了 XCode 中的错误消息之外，可以注销并重新登录而不会产生任何其他副作用。但我想如果用户多次注销和登录，这将是内存泄漏，而且我不想被 Apple 不必要地拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:11:36.170

我发现了另一种获取完全相同的错误消息的方法。幸运的我！

如果您在某一时刻创建了一个 segue 并将其绑定到一个按钮（单击按钮 -> 新视图），然后给该 segue 一个名称并使用它直接调用它

```
[self performSegueWithIdentifier:@"identifierName" sender:self]; 
```

那么你会得到这个错误，因为你可以有效地触发 segue 两次。我认为让按钮调用 IBAction 会关闭我一开始设置的 segue，但显然不是。点击按钮触发了 segue 两次，但是在我删除 segue 并将其重新创建为具有相同标识符的视图上的手动 segue 之后，我能够通过上面的代码调用它并且没有收到警告消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:17:54.783

呼啦啦！我的错。

似乎我以一种愚蠢的方式设置了从登录 API 调用观察的通知。每次用户触发登录（或重新登录）时，它都会将自己添加为通知的观察者；结果是每次登录时它都会多执行一次 segue。

同时做多个segues，是......好吧，显然很糟糕。

# visual-studio-2010 - IWizard 界面的可能性

> ID：12596885
> 
> 赞同：1
> 
> 时间：2012-09-26T07:43:38.803
> 
> 标签：visual-studio-2010, code-generation, wizard, project-template

我玩过 Visual Studio 项目模板，发现它们到目前为止很有用。现在我在Wizards 和[IWizard](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.templatewizard.iwizard%28v=vs.100%29.aspx)界面上找到了一些资料。

第[一个基本步骤](http://www.codeproject.com/Articles/15268/How-to-Create-Your-own-Visual-Studio-Wizard)相当容易理解并且看起来非常有用，但现在我想探索 IWizard 界面还提供什么，而不仅仅是文本替换。我可以想象 ShouldAddProjectItem 方法的一些用例，但是，例如，如果我希望用户能够选择数据库表并让向导生成模型、映射和 CRUD-dao 代码（我已经有一个用于那个乏味的任务）？

谁能给我有关界面设施的链接或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:05:34.200

1.  为了制作 CRUD、DAO 等...我建议您检查 T4 模板，如果您想要更多功能。

2.  将 T4 与[Dev Art 的 Entity Developer结合起来](http://www.devart.com/entitydeveloper/)

3.  将其全部放入 IWizard

让我再解释一下……

您需要开发一些与 Entity Developer 集成的 T4 模板（以应用实体框架或 NHibernate 的元数据）或独立开发，以便创建所需的尽可能多的 CRUD-Dao-Service-DTO 类。

然后，使用 T4，您可以创建一个新项目，将其添加为 Entity Developer 空模型，将其导出为项目模板，并制作一个带有自定义对话框的 IWizard，如您引用的示例所示。

在这个 IWizard 中，您要求提供连接字符串，然后用 IWizard 替换进行文本替换，然后……您就完成了！用户制作“从数据库更新模型”并且实体完成。

我希望这些提示足以开始！

# ios - 使 UIImageView 出现的圆形动画

> ID：12596888
> 
> 赞同：4
> 
> 时间：2012-09-26T07:43:52.020
> 
> 标签：ios, animation, uiimageview

我有一个“圆形”图像，类似于饼图。我想要一个漂亮的动画，比如当饼图从 0 填充到值时。

当我想为视图设置动画时，我通常使用这样的东西：

```
[UIView animateWithDuration: 3.0 
                      delay: 0.0 
                    options: UIViewAnimationCurveEaseInOut 
                 animations: ^ {
                             // The animation
                     } 
                 completion: ^(BOOL finished) {
                             // On completion
                     } ]; 
```

是否可以为圆形动画做同样的事情？我真的不知道该怎么做。

感谢任何线索！

注意：iOS 5、故事板、ARC 和所有这些东西 :)

* * *

编辑：为了将来的讨论，图像如下所示：

![在此处输入图像描述](../Images/84b8a2dfbd0ea68d282443acdf8517bc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:52:20.557

好的，就到这里了：）

第一个选项（简单的一个）。您可以使用`UIImageView`'`animationImages`属性。使用动画图像（在`NSArray`您的情况下，圆形图像从 0 填充到整个圆圈）、 set`animationDuration`和调用`[imageView startAnimating]`（我假设您的`UIImageView`is `imageView`），您可以`[imageView stopAnimating]`在处理完成后调用。

第二：查看此链接[http://www.cocoacontrols.com/platforms/ios/controls/jpradialactivityindicator](http://www.cocoacontrols.com/platforms/ios/controls/jpradialactivityindicator)，我认为示例项目与您尝试做的几乎相同:)

祝你好运 ;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T07:56:30.553

1）你可以使用**`CAShapeLayer`**

*   您可以通过设置 strokeStart 和 strokeEnd 属性的动画来实现。您可以为整个圆创建路径，并使用 strokeStart 和 strokeEnd 属性仅描边圆的某个部分。

2）另外，你可以参考这个教程：[Animating Pie Slices Using a Custom CALayer](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)

祝你好运！！！

# java - javac中不明确的构造函数引用，但在Eclipse中没有

> ID：12596890
> 
> 赞同：5
> 
> 时间：2012-09-26T07:44:05.893
> 
> 标签：java, eclipse, compiler-construction, javac

日食 3.4。Java 编译器级别 1.6 JRE IBM 1.6

我们有一个库类，我们无法更改它的形式。

```
import java.util.Hashtable;
public class A extends Hashtable {
  ...
} 
```

我们已经构建了一个实用程序类来提供对 A 的轻松访问。

```
public class B {
  private A a;
  public B() {
    this.a = new A();
  }
  public B(final A props) {
    this.a = props;
  }
  public B(final Map<String, String> props) {
    this();
    for (String key : props.keySet()) {
      add(key, props.get(key));
    }
  }
  @SuppressWarnings("unchecked")
  public B add(final String name, final Object value) {
    a.put(name, value);
    return this;
  }
} 
```

当我们尝试从另一个类调用其中一个构造函数时，就会出现问题。

```
public class C {

  public void stuff() {
    A a = new A();
    B b = new B(a);//Error in javac
  }
} 
```

Eclipse 编译它没有错误，当它通过 ant javac 和 jenkins 编译时，编译器会给出如下错误。

```
reference to B is ambiguous, both method B(com.foo.A) in com.bar.B and method B(java.util.Map<java.lang.String,java.lang.String>) in com.bar.B match
    [javac]         B b = new B(a); 
```

这个错误应该发生在 javac 中吗？在我看来，eclipse 在选择更具体的方法方面是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:24:33.203

问题是一个构造函数接受一个原始的 Hashtable，而另一个接受一个参数化的 Map。两个构造函数都适用，但是在这种情况下，消歧逻辑不起作用，因为根据[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)- 只有当它的参数是另一个参数的（严格）子类型时，一个构造函数才会比另一个更具体。在此阶段不允许未经检查的子类型化，因此存在歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:59:57.383

由于HashTable实现了Map，所以存在歧义。H这个答案包含一些很好的见解：

[在 Java 中调用模糊重载的构造函数](https://stackoverflow.com/questions/5692466/calling-ambiguously-overloaded-constructor-in-java)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T09:18:48.423

由于A类扩展了Hashtable，而Hashtable本身实现了Map接口，所以可以说A类得到了Map的属性，也变成了Map。

当您拥有`public B(final A props)`and时`public B(final Map<String, String> props)` ，就像您在两个构造函数中都有**一个 map 参数一样。**

这就是为什么它给你带来歧义。

# primefaces - 在某些组件上恢复 Primefaces 2.x 外观

> ID：12596896
> 
> 赞同：0
> 
> 时间：2012-09-26T07:44:26.103
> 
> 标签：primefaces

我开发的其中一个 Web 应用程序使用 Primefaces 2.2。我推迟了向 3.X 的迁移，因为我认为用户对某些组件的“旧”外观和感觉更满意。在日历中，我喜欢弹出按钮上的 2.2 图标，我想继续使用它。不幸的是，实现这一目标的简单方法似乎不再支持 popupIcon 属性，尽管它仍然存在于 3.X 指南中

FileUpload 被完全重写，它的外观发生了根本性的变化：现在在自动模式下，浏览（选择文件）按钮位于带有背景图像和颜色集的圆角框中。我更喜欢 2.X 的外观，没有圆框。除了使用 Internet Explorer 9 进行一些测试之外，我注意到 UploadedFile.getFileName() 现在提供了文件的完整路径，而我的功能代码只需要文件名而没有路径。迁移指南没有说明这个完全没有记录的变化。

我相信可以通过一些 css 覆盖来恢复原始的外观，但我已经尝试过阅读也没有成功

[Primefaces：如何更改日历字段按钮上的默认图标？](https://stackoverflow.com/questions/9981076/primefaces-how-to-change-the-default-icon-on-the-button-of-the-calendar-field)

我想收到一些建议。我主要担心的是css修改会影响其他组件，所以必须非常具体。

谢谢菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:00:57.877

我不认为有一个快速的解决方案，事实上我认为这将是很多工作。正如您自己所说，某些元素的外观和感觉发生了很大变化。然而，PrimeFaces 在样式方面是高度可定制的。

我建议您从 PrimeFaces 网站 (PDF) 下载手册，然后开始使用 CSS 作为您的首选武器。也许您可以重新使用 PrimeFaces 2.x 的 CSS 作为参考。

# php - AJAX 调用后，数据为空

> ID：12596900
> 
> 赞同：3
> 
> 时间：2012-09-26T07:44:51.903
> 
> 标签：php, jquery

当我从表单进行 AJAX 调用时，它显示它是成功的，但数据对象为空。代码如下：

```
$.ajax(
  {
    url: 'shipprocess.php',
    dataType: 'json',
    type: 'POST',
    success: function(data)
      {
    alert('Data is: ' + data);
    alert('The AJAX request was a success.');
      },
    'error': function()
      {
    alert('An unexpected error occurred.');
      }
  });
return false; 
```

表格如下所示：

```
<div class="processedDate">
<form action="shipprocess.php" method="POST" id="shipProcess2" name="shipProcess2">
<input type="hidden" name="empID" value="1" />
<input type="hidden" name="thisOrderID" id="thisOrderID2" value="2" />
<label>Date Shipped </label>
<input type="text"  name="shipDate" id="shipDate2" class="shipDate" size="20" value="" />
<input type="submit" name="shipped" id="shipped2" class="shipped" value="Shipped!" />
</form>
</div> 
```

在进行 AJAX 调用后，Firebug 显示状态为 200，内容长度为 0。处理表单的脚本称为 shipprocess.php。返回时会回显以下数据：false；行被注释掉：

```
[ { "sd": "2012-09-17", "eid": "1", "oid": "2", "efn": "Johnathan", "eln": "Smith" } ] 
```

出于某种原因，脚本不断提醒数据为空。一个完整的例子可以在[http://www.yellowcas.com/ship/shipexample.php](http://www.yellowcas.com/ship/shipexample.php)找到。此示例显示当您提交表单时数据对象为空的警报消息。我还有一个 shipprocess.php 脚本在[http://www.yellowcas.com/ship/shipexample1.php](http://www.yellowcas.com/ship/shipexample1.php)返回的数据的完整示例。我以前使用 AJAX 来填充用户输入的邮政编码的城市和州输入字段。jQuery 脚本几乎相同，只是我使用 GET 而不是 POST 作为邮政编码表单。

我曾尝试将 PHP 中的标头声明为 JSON 数据，但这也无济于事。Firebug 似乎也没有给我任何有用的信息。我已经使用另一个名为 testjson.html 的文件测试了脚本。在该文件中，我将有效的 JSON 数据作为文件中唯一没有标题的行，并将数据变量作为对象返回。该示例位于 www.yellowcas.com/ship/shipexample2.php。我不能发布超过 2 个超链接。如果您想查看 shipprocess.php 的代码，我很乐意发布它。我只是不想让这篇文章太长。任何想法将不胜感激。谢谢你。

我决定发布 shipprocess.php 代码，以确保您可以看到我所做的。它如下：

```
<?php
require_once('dblogin.php');
require_once('dbconnect.php');
require_once('funcs.php');
$err = array();
$datePattern = "!^(\\d\\d)[-/](\\d\\d)[-/](\\d\\d(?:\\d\\d)?)$!";
$psErr = "Shipping date is required.";
$emErr = "Employee ID is missing.";
$orErr = "Order ID is missing.";
if(isset($_POST['shipped']))
  {
    $postEID = clean($_POST['empID'],$emErr,$n);
    $postOID = clean($_POST['thisOrderID'],$orErr,$n);
    $postShipDate = clean($_POST['shipDate'],$psErr,$n);
    $now = date("Y-m-d H:i:s");
    if($postEID == $emErr)
      {
    $err[] = $postEID;
      }
    else
      {
    $query = "SELECT FK_UserID,FirstName,LastName FROM employees WHERE EmployeeID = '$postEID'";
    $res = mysql_query($query);
    if(mysql_num_rows($res) < 1)
      {
        $err[] = "Employee does not exist.";
      }
    else
      {
        while($row = mysql_fetch_assoc($res))
          {
        $retUserID = $row['FK_UserID'];
        $retFirstName = $row['FirstName'];
        $retLastName = $row['LastName'];
          }
      }
      }
    if($postOID == $orErr)
      {
    $err[] = $postOID;
      }
    if($postShipDate == $psErr)
      {
    $err[] = $postShipDate;
      }
    else
      {
    if (preg_match($datePattern,$postShipDate,$sMatches))
      {
        $sMonth = $sMatches[1];
        $sDay = $sMatches[2];
        $sYear = $sMatches[3];
        if(checkdate($sMonth,$sDay,$sYear))
          {
        $shipDate = "$sYear-$sMonth-$sDay";
          }
        else
          {
        $err[] = "Invalid shipping date.";
          }
      }
    else
      {
        $err[] = "Invalid Shipping Date";
      }
      }
    if(empty($err))
    //  Keep processing the information if there are no errors.
      {
    $data[] = "$postEID,$shipDate,$postOID,$now,$retFirstName,$retLastName";
      }
    else
    //  Return the errors to the user so corrections can be made.
      {
        $data[] = implode(",",$err);
      }
    for ($i=0;$i<sizeof($data);$i++)
      {
    $info = explode(",",$data[$i]);
    $data[$i] = $info;
      }
    $result = array();
    for ($y=0;$y<sizeof($data);$y++)
      {
    if (($data[$y][0]) !== false)
      {
        array_push($result, array("sd"=>$data[$y][1], "eid"=>$data[$y][0], "oid" => $data[$y][2], "efn"=>$data[$y][4], "eln"=>$data[$y][5]));
      }
    if (count($result) > 2)
      {
        break;
      }
      }
  }
echo array_to_json($result);
?> 
```

请尝试我提供的三个示例页面，看看有什么不同的结果。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:56:12.163

您的代码至少缺少两件事：

1：使用Ajax发帖时，必须发送帖子数据。所以你必须告诉你要发送什么数据。大多数时候它将是*序列化的表单*数据，但它可以是任何东西。

```
var dataString = 'name=Gr G';
$.ajax(
  {
    url: 'shipprocess.php',
    dataType: 'json',
    data: dataString,
    type: 'POST',
    ... 
```

2：您期望返回值，但您没有发送返回值。在`shipprocess.php`处理后，您应该回显如下内容：

```
...    
echo 'data received and processed';
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:11:13.827

您正在滥用 $.ajax() 方法，您必须使用表单内容指定“数据”参数。

所以你应该做类似的事情：

```
$.ajax({
    "url": 'shipprocess.php',
    "dataType": 'json',
    "type": 'POST',
    "data": $("#myform").serialize(),
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T14:51:37.923

这是我用来发送数据的。

```
var jqXHR = $.ajax({
type: 'POST',
url: your url,
data: { var name: 'data here'},
dataType: 'json'
});

jqXHR.done(function (your returned data) { your stuff )}; 
```

# java - 如何构建符合 fips 的 sqlcipher 以调用 FIPS_mode_set(1)

> ID：12596901
> 
> 赞同：3
> 
> 时间：2012-09-26T07:44:52.857
> 
> 标签：java, cryptography, fips, sqlcipher

我构建了符合 fips 的 libcrypto.so.1.0.0，如此[处所述](https://stackoverflow.com/questions/11091905/android-build-openssl-fips-2-0)

我尝试包含 libcrypto.so.1.0.0（通过在 android libs 文件夹中为文件 libcrypto.so 创建符号链接）并尝试在我发现错误的地方调用 FIPS_mode_set(1) - 作为未定义的参考 - FIPS_mode_set(1)。

以下是我详细遵循的步骤：

1.  在 sqlcipher 代码的类 net_sqlcipher_database_SQLiteDatabase.cpp （在 jni 文件夹中）中，我包含了以下头文件：

    ```
    #include <openssl/crypto.h>
    #include <openssl/fips.h>
    #include <openssl/ssl.h> 
    ```

    然后我在上面的类中添加了以下方法

    ```
    /*fips mode enable native native void fips_set_mode(int i) */
    static void fips_set_mode(JNIEnv* env,jobject object,jint i){

    FIPS_mode_set(1); // it should call FIPS_mode_set(1) from fips.c class

    } 
    ```

    我在下表中添加了上述方法声明

    ```
    //methods
    static JNINativeMethod sMethods[] =
    {
        /* name, signature, funcPtr */
        {"dbopen", "(Ljava/lang/String;I)V", (void *)dbopen},
        {"fips_set_mode","(I)V",(void *)fips_set_mode},
        {"dbclose", "()V", (void *)dbclose},
        {"enableSqlTracing", "(Ljava/lang/String;)V", (void *)enableSqlTracing},
        {"enableSqlProfiling", "(Ljava/lang/String;)V", (void *)enableSqlProfiling},
        {"native_execSQL", "(Ljava/lang/String;)V", (void *)native_execSQL},
        {"lastInsertRow", "()J", (void *)lastInsertRow},
        {"lastChangeCount", "()I", (void *)lastChangeCount},
        {"native_setLocale", "(Ljava/lang/String;I)V", (void *)native_setLocale},
        {"native_getDbLookaside", "()I", (void *)native_getDbLookaside},
        {"releaseMemory", "()I", (void *)native_releaseMemory},
        {"setICURoot", "(Ljava/lang/String;)V", (void *)setICURoot},
        {"native_rawExecSQL", "(Ljava/lang/String;)V", (void *)native_rawExecSQL},
        {"native_status", "(IZ)I", (void *)native_status},
    }; 
    ```

2.  然后在 SQLiteDatabase.java （在 src 文件夹中），我添加了以下本地方法声明：

    ```
    //setting
    static public native void fips_set_mode(int i); 
    ```

3.  最后，我在 SQLiteDatabase.java 的 loadLibs 方法中调用了上述方法

    ```
    //loadlibs

    public static void loadLibs (Context context, File workingDir)
        {
            System.loadLibrary("stlport_shared");
            System.loadLibrary("sqlcipher_android");
            System.loadLibrary("database_sqlcipher");   
            fips_set_mode(1);

    } 
    ```

4.  然后我确实编译了sqlcipher代码..但我收到了以下错误

    ```
    jni/net_sqlcipher_database_SQLiteDatabase.cpp:252: undefined reference to `FIPS_mode_set'. 
    ```

请在这方面的任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:43:05.183

您是否验证`fips.h`过头文件存在？`Android.mk`android-database-sqlcipher 项目的根 jni 文件夹中的文件包括构建`external/openssl/include`期间的路径。

# windows-mobile - 如何在windows mobile 6.5中将标签放在顶部

> ID：12596903
> 
> 赞同：0
> 
> 时间：2012-09-26T07:45:07.080
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6

我正在创建一个 Windows 移动应用程序。在应用程序中，我有一个选项卡控件，默认情况下，选项卡页菜单的位置在按钮，但我希​​望它在顶部。

有没有办法做到这一点。

任何帮助表示感谢提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:08:32.050

如果您使用的是常设 System.Windows.Forms.TabControl，那么您不能。该控件的可定制性极为有限。

你有两个选择：

1.  滚动您自己的选项卡控件。
2.  查看其他第三方库。[Rescoe Mobile Forms Toolkit](http://www.resco.net/developer/mobileformstoolkit/)是一种非常流行（和高质量）的 Windows Mobile 控件套件。它有一个非常可定制的选项卡控件。

# objective-c - UIImagepickerController 未在 iPhone 4.2 的全视图中显示相机

> ID：12596908
> 
> 赞同：0
> 
> 时间：2012-09-26T07:45:32.777
> 
> 标签：objective-c, uiimagepickercontroller

当我使用控制器调用相机时，`UIimagepicker`它不会在 iOS 4.2 版本的 iPhone 上以全屏模式显示，但它在 iOS 5 中确实有效。

谁能告诉我需要更改的代码以及现有代码有什么问题？

我正在使用以下代码：

```
 - (IBAction)takePicture:(id)sender 
{

    UIImagePickerController* imagePicker = [[UIImagePickerController alloc] init];

    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.showsCameraControls = YES;
    imagePicker.allowsEditing = NO;
    imagePicker.toolbarHidden = YES;
    imagePicker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    imagePicker.wantsFullScreenLayout = YES;

    if ([UIImagePickerController respondsToSelector:@selector(isCameraDeviceAvailable:)])
    {
        if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront])
        {
            [imagePicker setCameraDevice:UIImagePickerControllerCameraDeviceFront];

        }
    }

    // Show the camera UI and View Finder.

    [self presentModalViewController:imagePicker animated:YES];
    [imagePicker release];
} 
```

请检查附件 [图片在这里](http://i.stack.imgur.com/c9hFq.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:45:53.580

解决方案之一是应用缩放转换 -[在堆栈上](https://stackoverflow.com/questions/2674375/uiimagepickercontroller-doesnt-fill-screen)可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:27:02.450

我不明白你为什么要做这三件事：

```
[self.navigationController setNavigationBarHidden:YES];
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO];
[self.camPicker.view setUserInteractionEnabled:YES]; 
```

或者为什么要缓存 UIImagePickerController 的实例（与在使用之间丢弃图像选择器控制器相比，这可能会导致应用程序的空闲内存使用量显着增加）。如果你不做这些事情会更好吗？

# c# - C# 列表<> 到 xml

> ID：12596909
> 
> 赞同：7
> 
> 时间：2012-09-26T07:45:35.147
> 
> 标签：c#, xml, xmlserializer

打电话

```
List<PC> _PCList = new List<PC>();
...add Pc to PCList.. 
WriteXML<List<PC>>(_PCList, "ss.xml"); 
```

功能

```
public static void WriteXML<T>(T o, string filename)
{

    string filePath= Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Genweb2\\ADSnopper\\" + filename;

    XmlDocument xmlDoc = new XmlDocument();
    XPathNavigator nav = xmlDoc.CreateNavigator();
    using (XmlWriter writer = nav.AppendChild())
    {
        XmlSerializer ser = new XmlSerializer(typeof(List<T>), new XmlRootAttribute("TheRootElementName"));
        ser.Serialize(writer, o); // error
    }
    File.WriteAllText(filePath,xmlDoc.InnerXml);

} 
```

内部异常

> 无法转换类型为“System.Collections.Generic.List `1[PC]' to type 'System.Collections.Generic.List`1[System.Collections.Generic.List`1[PC]]”的对象。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T07:47:35.950

问题出在线路上

```
XmlSerializer ser = new XmlSerializer(typeof(List<T>), ... 
```

您`T`已经是`List<PC>`，并且您正在尝试创建`typeof(List<T>)`，这将转换为`typeof(List<List<PC>>)`。只需制作它`typeof(T)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T07:47:30.623

它应该是

```
typeof(T) 
```

代替

```
List<T> 

XmlSerializer ser = new XmlSerializer(typeof(T), new XmlRootAttribute("TheRootElementName")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:48:08.290

代码中的这一行导致问题

```
XmlSerializer ser = new XmlSerializer(typeof(List<T>), 
```

它创建的列表比不需要

```
XmlSerializer ser = new XmlSerializer(typeof(T), 
```

**你要么做上面的改变，要么做下面的改变**

您的方法有问题，您需要将签名更改为

```
public static void WriteXML<T>(List<T> o, string filename) 
```

并调用方法如下

```
WriteXML<PC>(_PCList, "ss.xml"); 
```

通过进行上述更改可能会解决您的问题。

# tcl - 预期输出不一致

> ID：12596912
> 
> 赞同：0
> 
> 时间：2012-09-26T07:45:43.097
> 
> 标签：tcl, expect

我想使用 Tcl/expect 自动化以下交互

```
[root@mgmt NAS]# ssh -q -p 8022 -l user 10.1.1.1
Password:

HP Network Automation Version 9.10.02

Type "HELP connect" to see how to connect to a device.
Type "HELP" to view a list of available commands.

NA>connect 10.1.1.2
WARNING: You do not have an approved reservation for this device at this time.
Attempting to connect to device bigip1.network.company.net (10.1.1.2).

Last login: Wed Sep 26 08:11:42 2012 from 10.2.1.1
Last login: Wed Sep 26 08:11:42 2012 from 10.2.1.1
[root@bigip1:Standby] config #
[root@bigip1:Standby] config #
[root@bigip1:Standby] config #
[root@bigip1:Standby] config # uname -a
Linux bigip1.network.company.net 2.6.18-164.11.1.el5.1.0.f5app #1 SMP Thu Apr 8 18:26:58 PDT 2010 i686 i686 i386 GNU/Linux
[root@bigip1:Standby] config # exit
logout

Disconnected from device bigip1.network.company.net (10.1.1.2).
NA>quit
Logging out of the NA Proxy Interface.
<Blank Line: couldn't show it with simple formatting> 
```

用户输入本质上是：

```
password
connect 10.1.1.2
uname -a
exit
quit 
```

我写的脚本`connect.exp`如下：

```
#!/usr/local/bin/expect

# Set the input parameters
set nashost [lindex $argv 0]
set port [lindex $argv 1]
set user [lindex $argv 2]
set passw [lindex $argv 3]
set device [lindex $argv 4]
set cmd [lindex $argv 5]

set binpath /usr/bin

log_user 0

# Set timeout to 45 seconds
set timeout 45

#check if all were provided
if { $nashost == "" || $port == "" || $user == "" || $passw == "" || $device == "" || $cmd == "" } {
    puts "Usage: <nashost> <port> <user> <passw> <device> <command>\n"
    exit 1
}

# String Variables
set nasprompt "NA>$"
set prompt "config # $"

# Flag Variables
set running 1
set count 0

# SSH to specified NAS host
if { [catch {spawn $binpath/ssh -q -p $port -o "StrictHostKeyChecking no" -l $user $nashost} error] } {
    puts "Spawn: SSH failed: $error"
    exit
}

expect {
    "assword: " {
        send "$passw\r"
        incr count
        if {$count > 3} {
            puts "SSH failed on authentication after 3 tries"
            set running 0
        } else {
            exp_continue
        }
    }
    -re "$nasprompt" {
        set running 1
    }
    "Connection refused" {
        puts "$expect_out(buffer)"
        set running 0
    }
    "Offending key" {
        puts "Host key verification failed."
        set running 0
    }
    eof {
        puts -nonewline "Connection terminated unexpectedly:\n$expect_out(buffer)"
        set running 0
    }
    timeout {
        puts "ssh: connect to NAS host $host: Connection timed out"
        set running 0
    }
}
if {$running == 1} {
    send "connect $device\r"
    expect {
        -re "$nasprompt" {
            if {$running > 0} {
                puts "connect to Device $device failed:\n$expect_out(buffer)"
            }
            send "quit\r"
        }
        -re "$prompt" {
            if {$running > 0} {
                send "$cmd\r"
                set running 0
                exp_continue
            } else {
                puts "$expect_out(buffer)"
                send "exit\r"
            }
        }
        full_buffer {
            puts "$expect_out(buffer)"
            exp_continue
        }
        eof {
            puts "ssh: Connection terminated unexpectedly during command execution: $host."
        }
        timeout {
            puts "ssh: Connection timed out during command execution: $host."
        }
    }
} 
```

我面临的问题是我与这个脚本的交互得到的输出是不一致的。

我调用脚本如下：`expect connect.exp 10.1.1.1 8022 user 'pwd' 10.1.1.2 'uname -a'`

输出一：

```
[root@bigip1:Standby] config #
[root@bigip1:Standby] config # uname -a
Linux bigip1.network.company.net 2.6.18-164.11.1.el5.1.0.f5app #1 SMP Thu Apr 8 18:26:58 PDT 2010 i686 i686 i386 GNU/Linux
[root@bigip1:Standby] config # 
```

输出二：

```
<blank line>
<blank line>
u[root@bigip1:Standby] config #
[root@bigip1:Standby] config # 
```

第`u`3 行开头的 是输出的一部分，而不是拼写错误。

输出二的其他变体也存在。

我期望的输出是：

```
Linux bigip1.network.company.net 2.6.18-164.11.1.el5.1.0.f5app #1 SMP Thu Apr 8 18:26:58 PDT 2010 i686 i686 i386 GNU/Linux
[root@bigip1:Standby] config # 
```

我在脚本中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:58:54.650

发送密码后，您实际上并没有在发送连接命令之前等待 NA 提示。将您的第一个期望命令更改为：

```
set running false

expect {
    "assword: " {
        incr count
        if {$count > 3} {
            puts "SSH failed on authentication after 3 tries"
        } else {
            send "$passw\r"
            exp_continue
        }
    }
    "Connection refused" {
        puts "$expect_out(buffer)"
    }
    "Offending key" {
        puts "Host key verification failed."
    }
    eof {
        puts -nonewline "Connection terminated unexpectedly:\n$expect_out(buffer)"
    }
    timeout {
        puts "ssh: connect to NAS host $host: Connection timed out"
    }
    -re "$nasprompt" {
        set running true
    }
}
if {$running} {
    send "connect ... 
```

# ajax - 使用 VB.NET WebMethod + JSON + CustomValidator 检查电子邮件可用性

> ID：12596919
> 
> 赞同：0
> 
> 时间：2012-09-26T07:46:12.480
> 
> 标签：ajax, vb.net, json, webmethod, customvalidator

我已经阅读了几篇关于这个问题的帖子（这里和其他网站），但没有人为我工作。我正在尝试在注册过程中检查给定的电子邮件是否已在数据库中注册。

我有一个名为 Register.aspx 的页面，我在其中声明了以下 JavaScript 函数：

```
function check_email_availability(src, args) {
  $.ajax({
    type: "POST",
    async: false,
    timeout: 500,
    contentType: "application/json",
    url: "Register.aspx/CheckEmailAvailability",
    data: "{ 'email' : '" + args.Value + "' }",
    success: function (result) {
      args.IsValid = result.d;
    }
  });
} 
```

另一方面，在 Register.aspx.vb 后面的代码中，我有以下内容`WebMethod`：

```
<System.Web.Services.WebMethod()> _
Public Shared Functiion CheckEmailAvailability(ByVal email As String) As String
  If Membership.GetUser(email) Is Nothing Then
    Return "True"
  Else
    Return "False"
End Function 
```

我正在尝试通过 a 启动 JavaScript 函数，`CustomValidator`但我从 Chrome 的控制台收到以下消息：

```
Uncaught TypeError: Cannot read property 'Value' of undefined 
```

错误出现在该行中

```
data: "{ 'email' : '" + args.Value + "' }", 
```

所以-总是使用 Chrome-，我在该行设置了一个断点，并且从控制台，我写了

```
args.Value 
```

我得到了正确的值，即我输入的电子邮件地址。所以...我有点迷路了。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:08:50.543

好吧，我终于成功了。我在这里分享使用的代码。进入上下文，在用户注册过程中，我想检查电子邮件的可用性。

在头部`Register.aspx`：

```
<script type="text/javascript">
  function check_email_availability(src, args) {
    var isValid;
    $.ajax({
      type: "POST",
      url: "Register.aspx/CheckEmailAvailability",
      timeout: 500,
      data: "{'email' : '" + args.Value + "'}",
      contentType: "application/json; charset=utf-8",
      async: false,
      success: function (result) {
                 isValid = result.d;
               }
    });
    args.IsValid = isValid;
  }
</script> 
```

在体内`Register.aspx`：

```
<asp:TextBox ID="tbEmail" runat="server" CssClass="TextBox" ClientIDMode="Static" TabIndex="1" />
<asp:CustomValidator ID="CValidatorEmail" runat="server" ControlToValidate="tbEmail" ValidateEmptyText="false" ClientValidationFunction="check_email_availability" ErrorMessage="Email already in use" SetFocusOnError="True" /> 
```

在代码隐藏 ( `Register.aspx.vb`) 中：

```
<System.Web.Services.WebMethod()> _
Public Shared Function CheckEmailAvailability(ByVal email As String) As Boolean
    Dim oMU As MembershipUser = Membership.GetUser(email)
    If oMU IsNot Nothing Then Return False Else Return True
End Function 
```

我希望这对某人有用。有一个[使用 C# 几乎相同的问题](https://stackoverflow.com/questions/3982420/asp-net-custom-validator-webmethod-jquery)可以帮助我使其工作。

问候，

# c# - 奇怪的查询。从另一个表中获取 id

> ID：12596920
> 
> 赞同：1
> 
> 时间：2012-09-26T07:46:14.203
> 
> 标签：c#, mysql

我想要什么：我想输入作者 ID，但我只有作者姓名。来自表作者。那么如何在下面的查询中获取作者 ID？

```
INSERT INTO book (title, isbn, author_id) VALUES('" + BookTitle.Text.ToString() + "', '" + BookIsbn.Text.ToString() + "', '(SELECT id FROM author WHERE first_name = '" + BookAuthor.Text.ToString() + "')')"; 
```

错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Marijn')')' at line 1 
```

我希望我清楚我想要什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:51:37.707

您不应该将第二个 SELECT 语句放在单引号中（MySQL 将其解释为字符串）。

```
"INSERT INTO book (title, isbn, author_id) 
VALUES ('" + BookTitle.Text.ToString() + "', '" + BookIsbn.Text.ToString() + "', 
    (SELECT id FROM author WHERE first_name = '" + BookAuthor.Text.ToString() + "'))" 
```

PS 请注意，您将数据插入数据库的方法使其非常容易受到注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:48:48.203

```
Here you have to have function fn_getID(fname) which will return id.

"INSERT INTO book (title, isbn, author_id) 
VALUES('" + BookTitle.Text.ToString() + "', '" + BookIsbn.Text.ToString() + "'"+fn_getID(BookAuthor.Text.ToString())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:57:38.790

您当前的查询**很**容易受到 sql 注入的影响。最好的方法是通过使用参数化查询`SQLCommand and its parameters`。而且我认为最好`INSERT INTO...SELECT`在您的查询中使用

```
(
"
INSERT INTO book (title, isbn, authorID)
SELECT '" + BookTitle.Text.ToString() + "' as title,
       '" + BookIsbn.Text.ToString() + "' AS isbn,
       id  as authorID
FROM author 
WHERE first_name = '" + BookAuthor.Text.ToString() + "'
"
) 
```

使用`ADO.Net`

```
string query =  "INSERT INTO book (title, isbn, authorID)
                SELECT @title as title,
                       @isbn AS isbn,
                       id  as authorID
                FROM author 
                WHERE first_name = @author";

using (MySqlConnection conn = new MySqlConnection("connectionstringHere"))
{
    using (MySqlCommand comm = new MySqlCommand())
    {
        comm.Connection = conn;
        comm.CommandType = CommandType.Text;
        comm.CommandText = query;
        comm.Parameters.AddWithValue("@title", BookTitle.Text.ToString());
        comm.Parameters.AddWithValue("@isbn", BookIsbn.Text.ToString());
        comm.Parameters.AddWithValue("@author", BookAuthor.Text.ToString());
        try
        {
            conn.Open();
            comm.ExecuteNonQuery;
        }
        catch (MySqlException ex)
        {
            // error here
        }
        finally
        {
            conn.Close();
        }
    }
} 
```

# jquery - jquery.base64.js 在 jquery1.8.2 中不起作用

> ID：12596922
> 
> 赞同：1
> 
> 时间：2012-09-26T07:46:27.120
> 
> 标签：jquery, jquery-plugins

我想使用 jquery 插件生成 Base64 编码的令牌。

```
function make_base_auth(username, password) {
    console.log("Generating Base64 token");
    var token = username + ':' + password;  
    var hash = $.base64.encode(token);  
    base_auth = "Basic " + hash;
    return base_auth;
} 
```

我已经从下面的 url 下载了插件。但它不工作。

[https://github.com/yatt/jquery.base64](https://github.com/yatt/jquery.base64)

我收到以下错误

```
TypeError: $.base64 is undefined 
```

我正在使用 jquery1.8.2，jquery-mobile-1.1.1

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:49:33.200

您是否确保在包含 jQuery 脚本后包含该脚本？

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js'></script>
<!-- include extension -->
<script src='jquery.base64.js' type='text/javascript'></script> 
```

# cassandra - Cassandra - 不使用行缓存的 Thrift/CQL 查询

> ID：12596923
> 
> 赞同：0
> 
> 时间：2012-09-26T07:46:28.777
> 
> 标签：cassandra

我的列族已启用行缓存。我有批处理，它遍历所有行以找到那些应该被删除的行。由于正在刷新结果行缓存 - 它不包含“真实数据”，而是我的批处理结果。

我可以执行 Thrift/CQL 查询，它会告诉 Cassandra 避免行缓存，即使它已启用？这对 Map-Reduce 算法很有用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T14:05:31.180

为什么要避免行缓存，因为它被设计为始终具有与磁盘上的数据相同的数据？（即，写入首先写入行缓存，然后磁盘和读取执行相同的操作）。避免具有最新数据的行缓存的用例是什么？

此外，我听说行缓存仅在 5% 的用例中有所帮助，通常应该将其关闭。我认为 PlayOrm 使用行缓存的用例可能是 5% 的用例之一，它可以告诉 cassandra 缓存它使用的 3 个索引列族，以便 Scalable-SQL 查询快速进入它的分区，因此查询会快得多，但大多数用例通过行缓存减慢系统速度。

# c++ - SDL 教程中的 LNK2019 错误，但仅在 Visual Studio 2010 中

> ID：12596926
> 
> 赞同：1
> 
> 时间：2012-09-26T07:46:39.560
> 
> 标签：c++, visual-studio-2010, sdl

我正在为 VS2010 做 LazyFoo 的 SDLTutorial 设置，但我无法让它合作。奇怪的是，我可以让它在 VS2008 上正常工作。

```
#include "SDL.h"

int main(int argc, char* argv[])
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Quit();

    return 0;    
} 
```

这是它给我的错误消息

```
1>MSVCRT.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup
1>Visual Studio 2008\Projects\Test\Debug\Test.exe : fatal error LNK1120: 1 unresolved externals 
```

我已经按照这些步骤一步一步地执行了至少 4 次，并且我继续收到这些错误。如果我不能解决这个问题，我正在考虑回到 2008 年，但我宁愿留在 2010 年。有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T07:52:44.920

这意味着链接器找不到库。仔细检查中的设置

`Project -> Properties -> Configuration Properties -> Linker`

1.  指定目录：**General**，**Additional Library Directories**：`<path>\SDL2-2.0.3\lib\x86`

    和

2.  指定文件：**Input**，**Additional Dependencies**：`SDL2.lib;SDL2main.lib;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-16T19:09:11.413

如果您未能在 main() 中包含可选的命令行参数，则在尝试编译包含 SDL2 的任何内容时都会出错，因此正确的解决方案是始终记住执行[Rafael 所说](https://stackoverflow.com/a/42406392)的操作。

```
int main(int argc,char* argv[]){} 
```

如果您确定正确包含库，这将解决所有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T03:21:40.253

如果你已经这样做了，你仍然得到同样的错误。可能是您没有编写 main 以便它允许命令参数。它应该看起来像这样。

```
int main(int argc,char* argv[]){ // your code here } 
```

# php - 请为未使用 php 帮助登录的用户添加价值

> ID：12596929
> 
> 赞同：1
> 
> 时间：2012-09-26T07:46:44.363
> 
> 标签：php, reference

我正在尝试为在登录用户打开某个页面后引用登录用户的用户增加价值

所以我做了一些更改，我现在收到以下错误

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource 
in C:\xampp\htdocs\test\goingback_t_play_150.php on line 18

Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in  
C:\xampp\htdocs\test\goingback_t_play_150.php on line 20
, 
```

* * *

## 这是我的代码

```
<?php
session_start();
?>
<?php
// Adjust MySQL connection settings...
$mysql_hostname = "localhost";
$mysql_user = "user";
$mysql_password = "";
$mysql_database = "";
$bd = mysql_connect($mysql_hostname,    $mysql_user,$mysql_password) or die("");
mysql_select_db($mysql_database, $bd) or die

$sql="SELECT * FROM users where id={$_SESSION['refcode']}"; 

$val = 2; //#2 : Why do u need the ()?
$result = mysql_query($sql,$bd);
$data=mysql_fetch_assoc($result);
if (mysql_num_rows($result)==1) {
// equate the value to a variable to use outside
// this while loop
 $acc_balance = $data['com_balance'];

$commision = $data['id'];
}
$remainder = $acc_balance + $val;       
$update_query = mysql_query("UPDATE users SET com_balance = '".                 
mysql_real_escape_string($remainder) ."'
WHERE id='refcode'"); 
if ($update_query) {
 print ""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:50:23.650

`mysql_`不鼓励使用，我建议您`mysqli_`改用，[更多信息在这里](https://stackoverflow.com/a/8891836/1025222)。

对于您的问题，您应该检查您的变量`$_SESSION['refcode']`是否定义正确。

如果此变量设置正确，则您的 SQL 语法或数据库中可能存在错误。

尝试更换：

```
$result = mysql_query($sql,$bd); 
```

有了这个 ：

```
$result = mysql_query($sql,$bd) or die(mysql_error($bd)); 
```

如果有任何错误，您的脚本将输出 MySQL 错误，因为您的结果变量似乎未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:52:25.877

看起来数据库查询中有错误。

后 ：

```
 $result = mysql_query($sql,$bd); 
```

添加 ：

```
 if (!$result) {
      die(mysql_error());
    } 
```

应该告诉你查询的问题。

# c - 如果客户端崩溃，服务器会立即使用 100% 的 CPU

> ID：12596936
> 
> 赞同：0
> 
> 时间：2012-09-26T07:47:08.357
> 
> 标签：c, multithreading, sockets, cpu-usage, recv

所以我编写了这个服务器/客户端应用程序，它们通过 send() 和 recv() 相互通信。它是用 C 编写的。服务器可以通过线程处理多个连接。我有一个 Ping 功能，每 90 秒检查一次客户端是否还活着。现在我的问题是，如果其中一个客户端崩溃，服务器端的 CPU 会立即使用 100%。这是我的 do while 循环，它等待客户端的传入命令，如果正在发送字符串 end 则结束。但是，如果客户端崩溃，则没有结束字符串出现，我认为它会在这个循环中不断旋转。

```
 do
    {
            TCP_recv (&client, buffer, BUF-1);
            if (!strcmp(buffer,"mysql"))
            {
                    TCP_recv (&client, buffer, BUF-1);
                    mysql_real_query(my, buffer, strlen(buffer));
                    syslog(LOG_INFO,"%s",buffer);
                    TCP_send (&client, "Server got the MySQL string!", BUF-1);
            }
    }
    while (strcmp(buffer,"end")); 
```

有没有人知道服务器如何立即对此做出反应而不是死循环？

PS：如果我的 kill-all-clients-who-not-respond 函数启动并关闭套接字，CPU 使用率会立即恢复正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:50:04.323

通常，当使用 select() 并且客户端已断开/崩溃并且您没有从被检查的那些中删除套接字 FD 时，会发生这种情况。这个结果是它将不断地迭代 while 循环，而不会阻塞 send()/recv()。通过检查 recv() 和/或 send() 的返回，检查您是否没有尝试从崩溃的客户端接收。

# javascript - Javascript中的图形均衡器具有最大的兼容性

> ID：12596937
> 
> 赞同：2
> 
> 时间：2012-09-26T07:47:10.910
> 
> 标签：javascript, firefox, google-chrome, html5-audio

我需要在通过 html5 播放器播放音乐时进行某种可视化，我一直在查看音频 API，发现某些部分仅适用于 chrome，有些仅适用于 firefox。

我对 Internet Explorer 并不在意，但我需要其他两个解决方案，有人知道我可以开始使用的插件甚至是某种教程吗？理想情况下，这将使用 javascript，尽可能避免使用额外的 flash 小程序，谢谢。

编辑：澄清一下，我有 MP3/OGA 文件，我想在它们播放时获得某种视觉输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:31:58.457

您应该查看这篇文章：[使用 Web Audio API 可视化元素](http://themaninblue.com/writing/perspective/2012/09/18/)（参见：[演示](http://themaninblue.com/experiment/webAudioAPI/)）。

[Web Audio API 规范](http://www.w3.org/TR/webaudio/)目前处于草稿阶段，但最终将成为 W3C 标准。Firefox 目前仅支持不兼容的、Mozilla 特定的[音频数据 API](https://wiki.mozilla.org/Audio_Data_API)，但它被标记为“已弃用”以支持 Web 音频 API。不幸的是，Firefox 中新的 Web 音频 API 的工作还没有开始。创建Bugzilla[错误 779297](https://bugzilla.mozilla.org/show_bug.cgi?id=779297)是为了跟踪实施此标准的进度。

**TL;DR目前，如果**[没有 Flash](http://www.schillmania.com/projects/soundmanager2/demo/360-player/canvas-visualization.html) ，您将无法获得跨浏览器的音频可视化。Web Audio API 是未来。

# c - 在 C 中处理带空格的文件名

> ID：12596939
> 
> 赞同：1
> 
> 时间：2012-09-26T07:47:17.290
> 
> 标签：c, filenames

我正在开发一个简单的 CLI 程序，它允许 2 个或更多用户（在同一个 LAN 中或通过 Internet）共享他们的文件。

这个怎么运作：

1.  打开终端
2.  运行程序
3.  拖放一个或多个文件

我的问题是：如何让程序读取名称中有空格的文件？

因为如果用户拖动一个文件没有问题（strtok until `\n`）但是如果用户拖动到终端超过 1 个文件我有一个**大**`strtok(input, ' ');`问题，因为如果文件名有空格我不能使用。

例子：

```
Files to share: /home/$USER/tryme /home/$USER/try me with space /home/$USER/file_ok 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:54:48.730

您只是不能将文件拖放到终端中，因为它采用“原样”路径，因此您需要在将路径字符串加载到程序中后对其进行修改，或者只是制作一个小界面（例如使用 gtk）它会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:49:26.517

如果文件名有空格，那么它应该`\`在每个空格之前都有一个空格来转义它们，否则预计它们将是多个文件。

# android - 尝试打开活动并在 Spinner 中显示数据库中的数据时强制关闭

> ID：12596940
> 
> 赞同：0
> 
> 时间：2012-09-26T07:47:16.853
> 
> 标签：android, sqlite, spinner

我在使用 SQLite 数据库时遇到问题。当我尝试打开我的活动时，我收到强制关闭消息。它有一个微调器，用于显示数据库表中的数据。我可以打开活动，微调器显示表中的数据，遵循此示例 - [Android：从 SQLite 数据库填充微调器 - SamColes](http://www.samcoles.co.uk/mobile/android-populate-a-spinner-from-your-sqlite-database/)。

这是我的代码和 LogCat。

AnniversaryAdapter - 创建了 5 个表

```
public class AnniversaryDBAdapter
{

    private static final String DATABASE_NAME = "Tables";
    private static final int DATABASE_VERSION = 2;

     private static final String CREATE_TABLE_TITLE = "create table titles(title_id integer primary key autoincrement, title text not null, image text not null);";
    private static final String CREATE_TABLE_BUDDIESLIST = "create table buddiesList(name_id integer primary key autoincrement, name text not null);";
    private static final String CREATE_TABLE_LIKES = "create table likes(likes_id integer primary key autoincrement,like text not null, name_id integer not null);";
    private static final String CREATE_TABLE_DISLIKES = "create table dislikes(dlike_id integer primary key autoincrement, dislike text not null, name_id integer not null);";
    private static final String CREATE_TABLE_EVENTS = "create table event(event_id integer primary key autoincrement, title_id integer not null, location text not null, starttime text not null, endtime text not null, desc text not null, date text not null, name_id integer not null);";

    private final Context context;
    private static final String TAG = "DBAdapter";

    private DatabaseHelper DBHelper;
    protected SQLiteDatabase db;

    private static String DB_PATH = "/data/data/main.page/Tables/";

    public AnniversaryDBAdapter(Context aContext)
    {
        this.context = aContext;
        DBHelper = new DatabaseHelper(context);
    }

private static class DatabaseHelper extends SQLiteOpenHelper
{

    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        /*try
        {
            database.execSQL(CREATE_TABLE_BUDDIESLIST);
            database.execSQL(CREATE_TABLE_LIKES);
            database.execSQL(CREATE_TABLE_EVENTS);
            database.execSQL(CREATE_TABLE_TITLE);
            database.execSQL(CREATE_TABLE_DISLIKES);
        }catch(SQLException e)
        {
            e.printStackTrace();
        }*/

        db.execSQL(CREATE_TABLE_BUDDIESLIST);
        db.execSQL(CREATE_TABLE_LIKES);
        db.execSQL(CREATE_TABLE_EVENTS);
        db.execSQL(CREATE_TABLE_TITLE);
        db.execSQL(CREATE_TABLE_DISLIKES);
/*      database.execSQL("CREATE TRIGGER fk_budevent_nameid" +
                "BEFORE INSERT" +
                "ON events FOR EACH ROW BEGIN" +
                "SELECT CASE WHEN((SELECT name_id FROM buddiesList WHERE name_id = new.name_id) IS NULL)" +
                "THEN RAISE(ABORT, 'Foreign Key Violation')END;" +
                "END;");
        */

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");

        onCreate(db);

    }

}

public AnniversaryDBAdapter open() throws SQLException
{
    db = this.DBHelper.getWritableDatabase();
/*  if(!db.isReadOnly())
    {
        db.execSQL("PRAGMA foreign_keys = ON;");
    }*/
    return this;
}

public void close()
{
    DBHelper.close();
}
/*
public long insertEvent(String title,String location,String starttime,String endtime,String desc,String date, String name)
{
   ContentValues cValues = new ContentValues();

   cValues.put(KEY_TITLE, title);
   cValues.put(KEY_LOCATION, location);
   cValues.put(KEY_START, starttime);
   cValues.put(KEY_END, endtime);
   cValues.put(KEY_DESC, desc);
   cValues.put(KEY_ALARM, alarm);
   cValues.put(KEY_DATE, date);
   cValues.put(KEY_NAME, name);

   return db.insert(CREATE_TABLE_EVENTS, null, cValues);

}

public boolean deleteEvent(long rowId)
{
    return db.delete(CREATE_TABLE_EVENTS, KEY_ROWID + "=" + rowId, null) > 0;
}

public Cursor getAllEvents()
{
    return db.query(CREATE_TABLE_EVENTS, new String[] {KEY_ROWID, KEY_TITLE, KEY_LOCATION, KEY_START, KEY_END, KEY_DESC, KEY_DATE, KEY_NAME}, null, null, null, null, null);

}

public Cursor getEvent(long rowId) throws SQLException
{
    Cursor c = db.query(true,CREATE_TABLE_EVENTS, new String[] {KEY_ROWID, KEY_TITLE, KEY_LOCATION, KEY_START, KEY_END, KEY_DESC, KEY_DATE, KEY_NAME}, KEY_ROWID + "=" + rowId, null, null, null, null, null);
    if(c != null)
    {
        c.moveToFirst();
    }
    return c;
}
*/
} 
```

BuddyDBAdapter - buddiesList 表

```
 public class BuddyDBAdapter extends AnniversaryDBAdapter
{
    public static final String KEY_ROWID = "name_id";
    public static final String KEY_NAME = "name";
    private static final String TAG = "DBAdapter";
    private static final String CREATE_TABLE_BUDDIESLIST = "buddiesList";

    //private SQLiteDatabase db;

    public BuddyDBAdapter(Context aContext)
    {
        super(aContext);
    }

    public long insertNames(String name)
    {
        ContentValues buddyValues = new ContentValues();
        buddyValues.put(KEY_NAME, name);
        return db.insert(CREATE_TABLE_BUDDIESLIST, null, buddyValues);
    }

    public boolean deleteNames(long rowId)
    {
        return db.delete(CREATE_TABLE_BUDDIESLIST, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public Cursor getAllNames()
    {

           return db.query(CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, null, null, null, null, null);

    }

    public Cursor getNames(long rowId) throws SQLException
    {
        Cursor c = db.query(true, CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if(c != null)
        {
            c.moveToFirst();
        }
        return c;
    }
} 
```

个人信息类

用于将数据库表中的数据显示到微调器中并将数据插入到喜欢表和不喜欢表中的代码。

```
BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);
        buddyDB.open();

        sendTo = (Spinner) findViewById(R.id.sendTo);
        Cursor friendsCursor = buddyDB.getAllNames();
        startManagingCursor(friendsCursor);

        String[] from = new String[]{BuddyDBAdapter.KEY_NAME};
        int[] to = new int[]{R.id.to};

        SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, friendsCursor, from, to);
        friendsAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sendTo.setAdapter(friendsAdapter);

        sendTo.setOnItemSelectedListener(new OnItemSelectedListener()
            {

                @Override
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {
                    Cursor c = (Cursor)parent.getItemAtPosition(pos);
                    namesSpinnderId = c.getInt(c.getColumnIndexOrThrow(BuddyDBAdapter.KEY_ROWID));                  
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0)
                {
                    // TODO Auto-generated method stub

                }

            });
        buddyDB.close(); 
```

日志猫

```
09-26 15:43:42.188: I/dalvikvm(658): threadid=3: reacting to signal 3
09-26 15:43:42.198: I/dalvikvm(658): Wrote stack traces to '/data/anr/traces.txt'
09-26 15:43:42.578: D/gralloc_goldfish(658): Emulator without GPU emulation detected.
09-26 15:43:45.288: D/AndroidRuntime(658): Shutting down VM
09-26 15:43:45.288: W/dalvikvm(658): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-26 15:43:45.308: E/AndroidRuntime(658): FATAL EXCEPTION: main
09-26 15:43:45.308: E/AndroidRuntime(658): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.PersonalInformation}: java.lang.NullPointerException
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.os.Looper.loop(Looper.java:137)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-26 15:43:45.308: E/AndroidRuntime(658):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 15:43:45.308: E/AndroidRuntime(658):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 15:43:45.308: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-26 15:43:45.308: E/AndroidRuntime(658):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-26 15:43:45.308: E/AndroidRuntime(658):  at dalvik.system.NativeStart.main(Native Method)
09-26 15:43:45.308: E/AndroidRuntime(658): Caused by: java.lang.NullPointerException
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-26 15:43:45.308: E/AndroidRuntime(658):  at main.page.AnniversaryDBAdapter.open(AnniversaryDBAdapter.java:96)
09-26 15:43:45.308: E/AndroidRuntime(658):  at main.page.PersonalInformation.onCreate(PersonalInformation.java:55)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.Activity.performCreate(Activity.java:4465)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-26 15:43:45.308: E/AndroidRuntime(658):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-26 15:43:45.308: E/AndroidRuntime(658):  ... 11 more 
```

我不想更改任何数据库适配器中的任何代码，因为我修改了

```
return db.delete(CREATE_TABLE_BUDDIESLIST, KEY_ROWID + "=" + rowId, null) > 0; 
```

至

```
if(db != null)
  return db.query(CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, null, null, null, null, null);
return null; 
```

在`getAllNames()`BuddyDBAdapter 中导致了重大问题。另外，我已经尝试过了，它可以打开活动，但微调器中没有显示任何数据，也没有在数据库浏览器中创建任何表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:54:59.543

见 09-26 15:15:22.152: E/AndroidRuntime(574): Caused by: java.lang.IllegalArgumentException: column '_id' does not exist in your logcat ad this to your tables

你 buddydb open 函数给出了 java.lang.NullPointerException 我现在不知道为什么你使用这个函数，因为 SQLiteOpenHelper 不需要它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:55:31.180

光标上`SimpleCursorAdapter`需要一个`attribute _id`，要解决这个问题，只需像这样更改您的数据库：

```
 private static final String CREATE_TABLE_TITLE = "create table titles(_id integer, title_id integer primary key autoincrement, title text not null, image text not null);";
            private static final String CREATE_TABLE_BUDDIESLIST = "create table buddiesList(_id integer, name_id integer primary key autoincrement, name text not null);";
            private static final String CREATE_TABLE_LIKES = "create table likes(_id integer, likes_id integer primary key autoincrement,like text not null, name_id integer not null);";
            private static final String CREATE_TABLE_DISLIKES = "create table dislikes(_id integer, dlike_id integer primary key autoincrement, dislike text not null, name_id integer not null);";
            private static final String CREATE_TABLE_EVENTS = "create table event(_id integer, event_id integer primary key autoincrement, title_id integer not null, location text not null, 
            starttime text not null, endtime text not null, desc text not null,date text not null, name_id integer not null);"; 
```

# php - php将包含一些js的网页包含到div中

> ID：12596953
> 
> 赞同：2
> 
> 时间：2012-09-26T07:47:56.817
> 
> 标签：php, html, include, shadowbox

我想在我的网页中包含另一个网页。我知道该怎么做。

```
<html>
<head>
<br>
<some links to external scripts...><br>
<br>
</head><br>
<body onload='$("#divkat").load("page1.php");'><br>
<div><br>
<br>
<br>
<div class="sidebar"><br>
              <h3>category :</h3><br>
         <a onclick='$("#divkat").load("page1.php");'>page1</a><br>
         <a onclick='$("#divkat").load("page2.php");'>page2</a><br>
         <a onclick='$("#divkat").load("page3.php");'>page3</a><br>
             <a onclick='$("#divkat").load("page2.php");'>page4</a><br>
           </div><br>
<br>
<br>
<div id="divkat"><br>< /div><br>
<  ! - - < ?php include( 'page1.php' ); ?>    - - ><br>
             < /div><br>
            < /div>
<br>
<br>
<br>
</body><br>
</html> 
```

它工作正常。

问题是“page1.php”包含几个shadowbox（灯箱）。像这样 ：

```
 <br>
< /div><br>
< div style="height:180px;width:180px;float:left;margin-top:15px;margin-left:15px;"><br>
< a href="img/panorama-split.jpg" rel="shadowbox; height=500; width=960"><br>< img src="img/tumb-kastel.jpg" alt="Klematis" width="180" height="180" />< /a><br>
< div> 
```

主页不会运行 JS。如果我打开“pag1.php”它可以正常工作。

当我单击一个类别时，我想制作一个网络画廊（包含类别的主页），php 函数包括一个包含在影子框中打开的项目的页面。一种解决方案是将许多页面作为类别，但不是盗版。要添加新类别，您必须编辑所有类别。也许有一天我会编写一个管理界面，以便轻松添加新类别、图片和其他带有链接和缩略图的媒体。Ofcorse 可以删除和备份。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:54:13.593

您在这里遇到的一个问题是您正在使用 HTML 注释：

```
<  ! - - 
```

这意味着当 PHP 在其中包含 HTML 时，`page1.php`它实际上会被注释掉。试试：

```
< ?php include( 'page1.php' ); ?><br/> 
```

反而。

至于其余的，也许我们可以得到一些澄清。`Page1.php`不包含 JS 直接打开 JS 怎么能正常运行呢？也许你可以解释什么不能正常工作？

### 编辑

我有一种感觉，你指的是`onLoad`你问题中的身体。如果是这样，我总是发现 JQuery 在直接放入 HTML 时有点奇怪。相反，您可以尝试在 DOM 本身加载后运行您的 JQuery，方法是将其放入您的`head`标签中：

```
<script type="text/javascript">
    $(function(){
        $("#divkat").load("page1.php");
    });
</script> 
```

并将body标签替换为：

```
<body> 
```

对于超链接，您可能想使用函数查看使用 JQuery 事件：http `on()`: [//api.jquery.com/on/](http://api.jquery.com/on/)

# android - Android：上传视频时找不到文件异常

> ID：12596955
> 
> 赞同：0
> 
> 时间：2012-09-26T07:47:58.393
> 
> 标签：android, filenotfoundexception, android-file

我正在尝试使用 post 方法将视频上传到服务器，但我得到了

> FileNotFoundException

这是我的代码。在路径变量中，我得到“内容：/媒体/外部/视频/媒体/2”

```
public class VideoPlayUploadActivity extends Activity {
private VideoView video_play;
private Button accept_and_go;
private Button reject_and_do;
Uri vid;
String user;
String question;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video_view);

    video_play = (VideoView) findViewById(R.id.videoView1);
    accept_and_go = (Button) findViewById(R.id.button_accept_and_go_over_video);
    reject_and_do = (Button) findViewById(R.id.button_reject_and_do_over_video);

    Intent extras = getIntent();
    vid = Uri.parse(extras.getStringExtra("uri"));

    if (vid == null) {
        Toast.makeText(VideoPlayUploadActivity.this, "No Video",
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(VideoPlayUploadActivity.this,
                "Playback: " + vid.getPath(), Toast.LENGTH_LONG).show();
        MediaController mc = new MediaController(this);
        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        video_play.setMediaController(mc);
        video_play.setVideoURI(vid);
        video_play.start();

    }
    accept_and_go.setOnClickListener(accept_go_listener);
}

private View.OnClickListener accept_go_listener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        // TODO Auto-generated method stub
        String path = vid.getPath();
        File file = new File(path);
        try {
            HttpClient client = new DefaultHttpClient();
            String postURL = "xxxxxxxxxxxxxxxxxxxxxxxxupdateAnswerFile";
            HttpPost post = new HttpPost(postURL);
            FileBody bin = new FileBody(file);
            StringBody user = new StringBody("1");
            StringBody question = new StringBody("25");
            MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            reqEntity.addPart("user", user);
            reqEntity.addPart("question", question);
            reqEntity.addPart("answer", bin);
            post.setEntity(reqEntity);
            HttpResponse response = client.execute(post);
            HttpEntity resEntity = response.getEntity();
            if (resEntity != null) {
                Log.i("RESPONSE", EntityUtils.toString(resEntity));
            }
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), "exception", 0).show();
            e.printStackTrace();
        }
    }
};
private View.OnClickListener reject_do_listenter = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
};
} 
```

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:54:37.107

请点击以下链接

[从 mediastore 的 URI 获取文件名和路径](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)

它显示错误，因为您没有将内容路径转换为真实路径。

这个对我有用。

希望能帮助到你。

# android - 如何在android上找到apk路径？

> ID：12596959
> 
> 赞同：1
> 
> 时间：2012-09-26T07:48:04.353
> 
> 标签：android, directory

当我转到我的文件时，我在手机上安装了我的 android 应用程序（apk 文件）：我在文件夹（/sdcard/Android/data）中找不到我的 com.myappnamefoler.net。有默认路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:51:30.807

您应该在`/system/app`或`/data/app`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:51:31.760

报到`data/data/com.myappnamefoler.net`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-08T14:37:47.610

如果您将文件保存在 提供的文件夹中`getFilesDir()`，它将位于**系统**`/data/data/<your.package.name>/files`根目录中的文件夹中，而不是在您的 sdcard 上。（要查看此内容，您的手机需要root）

 **如果您将文件保存在 提供的文件夹中`getExternalFilesDir()`，它将在文件夹`/sdcard/Android/data`中，`/sdcard0/Android/data`或类似的目录中。**

# android - 如何在线性布局中添加两个背景

> ID：12596963
> 
> 赞同：0
> 
> 时间：2012-09-26T07:48:14.913
> 
> 标签：android

这是我的代码，将按钮大小更改为四舍五入但不更改颜色我该怎么办？在值文件夹中的另一个文件colors.xml中定义颜色我如何在一个代码中将按钮形状更改为矩形也单击时更改颜色？？？

```
 <?xml version="1.0" encoding="utf-8"?>

 <selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
   <shape 
   android:shape="rectangle" android:padding="10dp">
 <!-- you can use any color you want I used here gray color-->
 <solid android:color="#E0E0E0"/> 
 <corners
 android:bottomRightRadius="10dp"
 android:bottomLeftRadius="10dp"
android:topLeftRadius="10dp"
  android:topRightRadius="10dp"/>
 </shape>
 </item>
 <item android:state_focused="true" android:state_pressed="true" 
        android:drawable="@drawable/blue_color" /> 
  <item android:state_focused="false" android:state_pressed="true" 
        android:drawable="@drawable/red_color" /> 
  <item android:drawable="@drawable/green_color" />

 </selector>

  <!-- colors.xml --->
  <?xml version="1.0" encoding="utf-8"?>
 <resources>
<drawable name="red_color">#ff0000</drawable>
 <drawable name="blue_color">#0000ff</drawable>
<drawable name="green_color">#00ff00</drawable>
 </resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-01T22:23:54.460

您可以使用**FrameLayout**。在 FrameLayout 中设置背景，在 LinearLayout 中设置前背景。注意放置在 FrameLayout 背景之上的 LinearLayout 背景。

试试这个代码！

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bgBehind">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/bgFront">

    </LinearLayout>
</FrameLayout> 
```

# java - 一个一个地执行函数

> ID：12596971
> 
> 赞同：0
> 
> 时间：2012-09-26T07:48:50.323
> 
> 标签：java, function

在转到下一个编码语句之前，我想知道如何完全执行任何功能。

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btnBack:
        i = new Intent(SetUpActivity.this, HomeActivity.class);
        finish();
        break;
    case R.id.btnOne:
        showDisclaimerDialog();
        Log.d("agreed value", agreed+"");
        if (agreed) {
            Log.e("Inside", "btnOne");
            appObj.setMaxFeeds(1);
            i = new Intent(SetUpActivity.this, SelectFeedsActivity.class);
            startActivity(i);
        }
        break;
    case R.id.btnTwo:
        showDisclaimerDialog();
        if(agreed) {
            appObj.setMaxFeeds(2);
            i = new Intent(SetUpActivity.this, SelectFeedsActivity.class);
            startActivity(i);
        }
        break;
    case R.id.btnFive:
        showDisclaimerDialog();
        if (agreed) {
            appObj.setMaxFeeds(5);
            i = new Intent(SetUpActivity.this, SelectFeedsActivity.class);
            startActivity(i);
        }
        break;

    default:
        break;
    }

private void showDisclaimerDialog() {
    // TODO Auto-generated method stub
    AlertDialog.Builder builder = new AlertDialog.Builder(
            SetUpActivity.this);
    builder.setTitle("Disclaimer");
    builder.setMessage(Html.fromHtml(getString(R.string.disclaimer)));
    builder.setPositiveButton("I Agree",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    agreed = true;
                    Log.e("Inside I agree",agreed+"");
                }
            });
    builder.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    agreed = false;
                    Log.e("Inside Cancel",agreed+"");
                }
            });

    builder.create().show();
    agreed=false;
    Log.e("Inside dialog",agreed+"");

} 
```

当我点击“btnOne”时，执行的控制应该转到“showDiclaimerDialog()”而不执行进一步的语句，这些语句是

```
 Log.d("agreed value", agreed+"");
    if (agreed) {
        Log.e("Inside", "btnOne");
        appObj.setMaxFeeds(1);
        i = new Intent(SetUpActivity.this, SelectFeedsActivity.class);
        startActivity(i);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:53:01.853

你不能（因为你可以但真的真的不应该）阻止 GUI 线程中的执行。有关详细信息，请参阅此问题。

[Dialogs / AlertDialogs：如何在对话框启动时“阻止执行”（.NET 样式）](https://stackoverflow.com/questions/2028697/dialogs-alertdialogs-how-to-block-execution-while-dialog-is-up-net-style)

# python - 从 mongoengine 检索图像并将其显示在页面上作为 python 中的 http 响应

> ID：12596972
> 
> 赞同：0
> 
> 时间：2012-09-26T07:48:53.880
> 
> 标签：python, cherrypy, gridfs, mongoengine, render-to-response

你好，我是 mongoengine 的新手。我只想从 mongoengine 检索图像并将其显示在页面上作为 python 中的 http 响应。我已将图像添加到数据库并在控制台中打印它，我得到以下结果：

```
 <GridFSProxy: 506038485e160077b3efc592>
 genus:m
 family:n
 <GridFSProxy: 5060384a5e160077b3efc595>
 genus:m
 family:n 
```

这是我在数据库中打印内容时的输出。从这里我了解到图像作为具有 id 的对象保存到数据库中，现在我想要将这些图像显示到网页中。例如，我使用`open(os.path.join(MEDIA_DIR, u"users/clients.html"))`打开客户端页面。如何在客户端页面中显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:01:13.317

以[文档示例为例](http://docs.mongoengine.org/en/latest/guide/gridfs.html?highlight=gridfs#retrieval)，您可以像这样检索文件：

```
marmot = Animal.objects(genus='Marmota').first()
photo = marmot.photo.read()
content_type = marmot.photo.content_type 
```

因此，您可以获得 content_type 并正确设置标题并将照片作为内容

# validation - 带有errorfunc的jqgrid内联编辑

> ID：12596977
> 
> 赞同：2
> 
> 时间：2012-09-26T07:49:13.740
> 
> 标签：validation, spring-mvc, jqgrid, inline-editing, jqgrid-inlinenav

我正在尝试使用 jqgrid 进行内联编辑，我将在其中调用 Spring 控制器，我需要进行额外的服务器端验证。如果有任何服务器验证错误，我需要通过 errorfunc 将其发送回 jqgrid，并通知用户。

```
function saveRow(rowId) {
    saveparameters = {
            "url" : 'editcontroller',
            "successfunc" : function( response ) {

                alert('success');
                return true; 
            },
            "errorfunc": function (reponse) {
                alert('error');
                return true;
            }
        };
    jQuery('#myGrid').jqGrid('saveRow', rowId, saveparameters);
} 
```

有人可以帮助我理解我必须在 spring 控制器中编写什么以将服务器级验证错误发送到 errorfunc。我用谷歌搜索但找不到具体的例子。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:20:41.500

在 PHP 中，我只发送 HTTP 标头函数 500“内部服务器错误”。errorfunc 会自动捕获它。

标头（HTTP/1.0 500 错误消息）

# ios - 缺少 Retina 4 启动图像。如何忽略此错误？

> ID：12596991
> 
> 赞同：27
> 
> 时间：2012-09-26T07:50:25.630
> 
> 标签：ios, ios6, retina-display

尝试编译项目时，使用 SDK 6.0 更新 Xcode 会导致错误。

缺少 Retina 4 启动图像。在 Retina 4 设备上以原始分辨率运行需要名为“Default-568@2x.png”的启动图像。您希望 Xcode 为您添加此图像吗？

单击添加时，它会创建一个大小为 640x1136 的黑色启动图像。我知道我可以轻松地将这张图片替换为合适的图片。但是 XCode 给了我一个错误并强迫我拥有这个文件。如果我不想包括这个，我怎么能跳过这个错误而只使用已经存在的较短的启动图像？

截图：[http ://spacetech.dk/xcode-missing-retina-4-launch-image.html](http://spacetech.dk/xcode-missing-retina-4-launch-image.html)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T10:34:23.977

**更新**：似乎你不能忽视他的错误。当您上传二进制文件时，它最终会失败。只需提供视网膜图像。用户会喜欢它：D

————</p>

**当我添加该文件然后将其删除**时，它似乎只是一个警告。这很奇怪。

仅供参考，通过在您的目标摘要中包含一个 Retina 4 英寸启动图像文件 (Default-568h@2x.png)，它将强制应用程序被拉伸到完整的 4 英寸显示。为了让您的应用程序再次在 3.5 英寸屏幕模式下运行，除了**删除 4 英寸图像**之外，您还必须**清理您的项目并删除应用程序。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-07T04:27:15.803

转到项目设置，选择**常规**选项卡，然后转到下图中提到的部分。在这里，您只需要从 assets 中指定 Launch Image。希望这可以帮助。

![](../Images/d469565d1a8179861f055e4c3af79e83.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-01T20:40:40.890

你不能真正忽略这个错误。如果这样做，无论如何您都将无法通过产品验证。

这是您收到的错误文本：

![在此处输入图像描述](../Images/4f3992f34043a1024f3d95d67a97ecab.png)

所以添加一个 568 启动图像，没有任何办法解决它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-22T16:54:47.367

将 info.plist 文件移动到新组后，我遇到了类似的问题。为了解决这个问题，我通过单击项目文件常规选项卡中身份下的“选择 Info.plist 文件...”按钮重新选择了我的 plist 文件

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-15T14:54:53.700

实际上，您需要为您的案例提供一组启动图像。

首先，转到 Launch Image Attributes Inspector 并勾选所需的设备方向：

iOS 8.0 及更高版本

iOS 7.0 及更高版本

然后为空槽提供适当的图像尺寸。

纵向尺寸为：

768x1024 - iPad 肖像@1x

1536x2048 - iPad 肖像 @2x

640x1136 - 视网膜 4

640x960 - iPhone 肖像 @2x

1242x2208 - 视网膜高清 5.5"

750x1334 - 视网膜高清 4.7"

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-27T17:03:15.717

好吧，对我来说最简单的解决方案是创建`Launch Screen.storyboard`并指定它。这消除了对启动图像的需求（除非你真的想通过那首歌和舞蹈）。

指定以下内容：

[![在此处输入图像描述](../Images/d462121de40da5896499c663e9c83f1c.png)](https://i.stack.imgur.com/ABqK8.png)

那应该可以解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-27T09:18:29.870

我有这个问题。上传新图像 640x1136 后，我清理了我的项目，通知消失了。（产品 -> 清洁）。

# xml - 使用 xslt 向父元素添加一个元素而不复制

> ID：12596993
> 
> 赞同：0
> 
> 时间：2012-09-26T07:50:28.847
> 
> 标签：xml, xslt, xpath

我想向源 xml 添加一个元素。

示例： **来源**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <DataArea>
        <PurchaseOrder>
            <PurchaseOrderLine>
                <DocumentReference type="customersReference1">
                    <DocumentID>
                        <ID>23423</ID>
                    </DocumentID>
                </DocumentReference>
                <Item>
                    <CustomerItemID>
                        <!-- ArtNr -->
                        <ID>444</ID>
                    </CustomerItemID>
                </Item>
                <Quantity unitCode="PCE">17.3</Quantity>
            </PurchaseOrderLine>
        </PurchaseOrder>
    </DataArea> 
```

我想添加元素

```
<LineNumber>10</LineNumber> 
```

到

> 数据区/PurchaseOrder/PurchaseOrderLine/

所以第一个解决方案是从原始 xml 复制所有数据，然后`LineNumber`喜欢

```
<xsl:copy>
    <xsl:apply-templates select="DocumentReference"/>
    <xsl:apply-templates select="Item"/>
    <xsl:apply-templates select="Quantity"/>
        <!-- ADD HERE LINENUMBER -->
</xsl:copy> 
```

如何在`LineNumber`不手动复制所有元素的情况下添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:03:50.740

这很简单，只需向标准 XSLT 身份转换添加一个额外的匹配模板

```
<xsl:template match="PurchaseOrderLine">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
      <LineNumber>10</LineNumber>
   </xsl:copy>
</xsl:template> 
```

这只是复制元素及其所有子元素，但也添加了新的 LineNumber 元素。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="PurchaseOrderLine">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
         <LineNumber>10</LineNumber>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<DataArea>
   <PurchaseOrder>
      <PurchaseOrderLine>
         <DocumentReference type="customersReference1">
            <DocumentID>
               <ID>23423</ID>
            </DocumentID>
         </DocumentReference>
         <Item>
            <CustomerItemID><!-- ArtNr -->
               <ID>444</ID>
            </CustomerItemID>
         </Item>
         <Quantity unitCode="PCE">17.3</Quantity>
         <LineNumber>10</LineNumber>
      </PurchaseOrderLine>
   </PurchaseOrder>
</DataArea> 
```

# c - 嵌套在 Switch 语句中的 if/else

> ID：12596994
> 
> 赞同：3
> 
> 时间：2012-09-26T07:50:34.447
> 
> 标签：c, if-statement, nested, switch-statement

我正在尝试将 if/else 嵌套在 case switch 语句中。当我输入 case 'p' 或 'P' 时，无论输入什么字符，都会打印 $15.00 行。我尝试移动/添加 {}，但输出没有变化。

感谢您花时间帮助菜鸟。

整个代码现在在这里。

```
#include <stdio.h>

int main()
{
//variable declarations 
char typeOfWash, tireShine;

//Menu
printf("R ---> Regular ($5.00)\n");
printf("B ---> Bronze ($7.50)\n");
printf("G ---> Gold ($10.25)\n");
printf("P ---> Platinum ($15.00)\n");
printf("Tire Shine can be added to the Gold or Platinum ONLY,");
printf("for an additional$2.50\n\n");

printf("Enter your selection: ");
scanf("%c",&typeOfWash);

switch (typeOfWash)
{
    case 'R': case 'r':
        printf("Your bill total is: $5.00\n");
        break;
    case 'B': case 'b':
        printf("Your bill total is: $7.50\n");
        break;
    case 'G': case 'g':
        printf("Would you Like a Tire Shine? (Y/N): ");
        scanf("%c ",&tireShine);
        if (tireShine == 'Y' || tireShine == 'y')
            printf("Your bill total is: $12.75\n");
        else
            printf("Your bill total is: $10.25\n");
        break;
    case 'P': case 'p':
        printf("Would you Like a Tire Shine? (Y/N): ");
        scanf("%c ",&tireShine);
        printf("%c",tireShine);
        if (tireShine == 'Y' || tireShine == 'y')
            printf("Your bill total is: $17.50\n");
        else
            printf("Your bill total is: $15.00\n");
        break;
    default:
        printf("Invalid Choice");

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:56:18.527

问题是`scanf`与`%c`格式说明符一起使用会导致空白不被消耗，在您的情况下会导致`\n`输入缓冲区中留下空白。您的讲师似乎建议的是，将初始输入的尾随空格与下一个输入一起吃掉`scanf`；但是，我怀疑他们说要插入前导空格而不是尾随空格，因为这可以解决您的问题：

```
scanf(" %c", &tireShine); 
```

或者，您可以`getchar()`在第二个之前立即使用`scanf`并预先使用换行符：

```
getchar();
scanf("%c", &tireShine); 
```

第二种选择是使用`%s`格式说明符而不是`%c`相应地处理它。

请注意，`getchar()`只会消耗输入缓冲区中的一个字符。例如，如果用户要输入一个长度超过 1 个字符的字符串，则需要`while ((x = getchar()) != '\n') ;`清除缓冲区之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:58:43.593

如果尝试内联。

```
case 'P': case 'p':
    printf("Would you Like a Tire Shine? (Y/N): ");
    scanf("%c",&tireShine);
    printf("Your bill total is: $%s\n", toUpper(tireShine) == 'Y' ? "17.50":"15.00");
    break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:59:49.883

你还有一个空间。

改变

```
scanf("%c ", &tireShine); 
```

到

```
scanf("%c", &tireShine); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:42:37.387

试试这个：：

```
printf("Enter your selection: ");
scanf("%c",&typeOfWash);
fflush(stdin) ; 
```

但避免使用它。 **更新**::

```
printf("Enter your selection: ");
scanf("%c",&typeOfWash);
getchar() ; 
```

由于**fflush(stdin)**将导致**UNDEFINED BEHAVIOR**，您可以使用**getchar()**清除流。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T10:18:47.983

scanf() 的一个问题是它通常会留下未读的“返回”。因此，如果您输入类似“p”然后输入“return”的内容，它会读取并处理“p”而不是“return”。对 scanf() 的第二次调用读取已经存在的“返回”字符，因此它与“y”或“Y”不匹配。您对案例“g”有同样的问题。使用“%c”还是“%c”都没有关系。在有两个字符来标记行尾的 DOS 系统上，这个问题可能更严重。

# wpf - 如何在堆栈面板中并排对齐？

> ID：12596996
> 
> 赞同：19
> 
> 时间：2012-09-26T07:50:36.327
> 
> 标签：wpf, xaml, stackpanel

我怎样才能让按钮在旁边对齐`ComboBox`？我无法将按钮拖到`ComboBox`使用设计器的一侧。

```
<Expander.Content>
    <StackPanel>
        <ComboBox Name="cbProd" Height="30" IsEditable="True" FontSize="15" />
        <Button Name="btnAdd" Content="add" Click="btnAddProduct_Click" /> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T08:08:52.280

只需像这样嵌套多个布局容器：

```
<Expander.Content>
    <StackPanel Orientation="Vertical">
        <StackPanel Orientation="Horizontal">
            <ComboBox Name="cbProd" Height="30" IsEditable="True" FontSize="15" />
            <Button Name="btnAdd" Content="add" Click="btnAddProduct_Click" />
        </StackPanel>
        ... your other controls
    </StackPanel>
</Expander.Content> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T07:53:30.213

将堆栈面板的方向属性设置为水平

# php - WordPress 小部件冲突

> ID：12596997
> 
> 赞同：1
> 
> 时间：2012-09-26T07:50:43.943
> 
> 标签：php, wordpress, plugins

我有一个即将推出的 WordPress 网站，主题开发人员不再响应。购买主题的几个用户也有同样的问题。

日历倒计时插件与主题设计冲突。

这是小部件 PHP 代码（仅限活动日历部分）：

```
<?php if ( ! defined('ABSPATH')) exit('restricted access');

//Feedburner_Widget Class

class FW_Eventcounter extends WP_Widget

{

    /** constructor */

    function __construct()

    {

        parent::__construct( /* Base ID */'eventcounter', /* Name */'Event Countdown', array( 'description' => 'Countdown the upcoming event' ) );

    }

    /** @see WP_Widget::widget */

    function widget($args, $instance)

    {

        global $_reserved_categories;

        $event_data = new wp_Query('showposts=4&meta_key=fw_event_time&meta_value='.time().'&meta_compare=>&order=asc&orderby=meta_value&post_type=events&post_status=publish');

        if( ! $event_data->found_posts) return;

        extract($args);

        $title = apply_filters( 'widget_title', $instance['title'] );

        echo $before_widget;

        $first = true;

        $recent_events = '';

        ?>

        <div class="events">

        <?php

        if($event_data->have_posts())

        while($event_data->have_posts()): $event_data->the_post();

        $eventDATA = get_post_meta(get_the_ID(), 'fw_events', true);

        $event_time = @get_time_difference(time(), $eventDATA['event_time']);

        $estartTime = @date('h:ia', $eventDATA['event_time']);

        $endTime = @date('h:ia', $eventDATA['event_time1']);

        foreach((array)$event_time as $k=>$v)

        {

            if(strlen($v) < 2) $event_time[$k] = (int) '0'.$event_time[$k];

        }

        $startTime = @implode(':', $event_time);

        if($first):

            $first = false;

            $title = ($startTime) ?  $title : 'Next Events';

            echo $before_title . $title . $after_title;?>

            <?php if($startTime): ?>

            <script type="text/javascript">

                $(function () {

                    var austDay = new Date(<?php echo date('Y',$eventDATA['event_time']);?>, <?php echo date('m',$eventDATA['event_time']);?> - 1, <?php echo date('d',$eventDATA['event_time']);?>);

                    $('#defaultCountdown').countdown({until: austDay});

                });

            </script>

                <div class="countersec">

                    <div class="counters">

                        <div id="defaultCountdown"></div>

                    </div>

                    <div class="upcomingevent backcolr">

                        <h6><a href="<?php the_permalink();?>" title="<?php the_title();?>" class="white"><?php the_title();?></a></h6>

                        <p><?php echo date('m/d/Y - h:i a', $eventDATA['event_time']);?>, <?php _e('Location:','heavens_corner');?> <?php echo $eventDATA['event_place'];?></p>

                    </div>

                </div>

            <?php endif;?>

        <?php else:

            $recent_events .= '<li>

                                <div class="datesec">

                                    <span class="date">'.date_i18n( 'd', $eventDATA['event_time'] ).'</span>

                                    <span class="month">'.date_i18n( 'M', $eventDATA['event_time'] ).'</span>

                                </div>

                                <div class="desc">

                                    <a href="'.get_permalink().'" class="txthover bold">'.get_the_title().'</a>

                                    <p>'.$estartTime.', '.__('Location:','heavens_corner').' '.$eventDATA['event_place'].'</p>

                                </div>

                            </li>';

        endif;?>

    <?php endwhile;?>

        <?php if($recent_events):?>

            <h3 class="colr bold widgethead"><?php _e('News and Events','heavens_corner');?></h3>

                <!-- Events Listing Start -->

                <ul><?php echo $recent_events;?></ul>

                <!-- Events Listing End -->

                <?php $terms = wp_get_post_terms(get_the_ID(), 'locations');?>

                <a href="<?php echo get_term_link((int)$terms[0]->term_id,'locations');?>" class="buttonone backcolr"><?php _e('View All','heavens_corner');?></a>

        <?php endif;?>

    </div>

    <?php

        echo $after_widget;

    }

    /** @see WP_Widget::update */

    function update($new_instance, $old_instance)

    {

        $instance = $old_instance;

        $instance['title'] = strip_tags($new_instance['title']);

        return $instance;

    }

    /** @see WP_Widget::form */

    function form($instance)

    {

        $title = ($instance) ? esc_attr($instance['title']) : 'Upcoming Event';

    ?>

        <p>

            <label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:', 'heavens_corner'); ?></label> 

            <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo $title; ?>" />

        </p>

    <?php 

    }

} // class event counter 
```

这是演示站点 www.mbbcintl.com/wp/ 有问题的主页 (mbbcintl.com) 目前已禁用查看，但主题来自运行良好的 mbbcintl.com/wp/ 站点，我没有'没有做任何修改只是复制和粘贴主题。

谢谢

# iphone - iphone 5横向媒体查询

> ID：12596999
> 
> 赞同：4
> 
> 时间：2012-09-26T07:50:47.310
> 
> 标签：iphone, css

我看过很多关于 iphone 5 纵向的媒体查询，但没有针对横向模式的媒体查询，有吗？我问是因为我正在为客户工作的这个网站有纵向和横向模式的单独媒体查询，我将此[iPhone 5 CSS 媒体查询](https://stackoverflow.com/questions/12539697/iphone-5-css-media-query)添加到我的 iPhone 4 纵向媒体查询中，就像建议的那样，但想知道该怎么做与景观部分

```
@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen (min-device-width:640px) and (max-device-width:1136px) and (-webkit-min-device-pixel-ratio:2) {
    body {
        background:#2d2928 url(images/bg960.jpg) no-repeat center top;
        background-size:480px 163px;
        font-size:96%;
        font-weight:300;
        padding:0 1%;
    }
    .logo a {
        display:block;
        margin:0 auto;
        width:260px;
        height:77px;
        background:url(images/logox2.png) no-repeat center center;
        _background:none;
        _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../images/logox2.png',sizingMethod='crop');
        background-size:260px 77px;
    }
    #container {
        width:99%;
        margin:0 auto;
    }
    .frontimagewrapper {
        width:80%;
    }
    h1 {
        font-size:124%;
    }
    h2,h3,h4,h5, {
        font-family:"Trebuchet MS",Arial,Helvetica,sans-serif;
        letter-spacing:0.2em;
        font-size:100%;
    }
    .gallery h2 {
        font-size:96%;
    }
    .block h3 {
        font-size:96%;
    }
    .article h3 {
        font-size:100%;
    }
    .article h2 {
        font-size:106.6%;
    }
    p {
        font-size:0.9em;
    }
    .date {
        font-size:0.8em;
    }
    .copyright {
        font-size: 0.9em;
    }
}
/*/mediaquery*/
@media only screen and (min-device-width:320px) and (max-device-width:480px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio:2) {
    body {
        font-size:96%;
    }
    .frontimagewrapper {
        width:55%;
    }
    .blogleft img {
        max-width:60%;
        height:auto;
    }
    h1 {
        font-size:150%;
    }
    h2,h3,h4,h5, {
        font-family:"Trebuchet MS",Arial,Helvetica,sans-serif;
        letter-spacing:0.2em;
        font-size:100%;
    }
    .article h2 {
        font-size:118%;
    }
    .date {
        front-size:50%;
    }
    p {
        font-size:0.9em;
        line-height:1.825em;
    }
    .date {
        font-size:0.8em;
    }
    .copyright {
        font-size: 0.9em;
    }
}
/*/mediaquery*/ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T20:08:34.547

iPhone 5 纵向和/或横向媒体查询

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 568px) { 
    /* CSS here */
} 
```

仅限横向 iPhone 5 的媒体查询

```
@media only screen 
and (min-device-width : 320px)
and (max-device-width : 568px) 
and (orientation : landscape) {
    /* CSS here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-24T14:55:17.143

不过，您可以根据“orientation”和“-webkit-device-pixel-ratio”为 iPhone 5 和 iPhone SE 指定媒体查询。

```
/* Only iPhone 5 and iPhone SE(portrait mode) */
@media only screen and (min-device-width: 320px) and (max-device-width: 568px)
and (-webkit-device-pixel-ratio: 2) and (orientation:portrait)
{
    body {
        color:blue;
    }
}

/* Only iPhone 5 and iPhone SE(landscape mode) */
@media only screen and (min-device-width: 320px) and (max-device-width: 568px)
and (-webkit-device-pixel-ratio: 2) and (orientation:landscape)
{
    body {
        color:red;
    }
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	Hello based on the device orientation my color will change
</body>
</html>
```