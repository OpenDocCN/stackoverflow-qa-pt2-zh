# StackOverflow 问答 14747000-14747999

# android - HTML5/CSS/Jquery Android 应用 -> 性能不佳

> ID：14747003
> 
> 赞同：1
> 
> 时间：2013-02-07T08:48:33.547
> 
> 标签：android, jquery, performance, html, jquery-mobile

我们使用 HTML5/CSS/Jquery 制作了一个简单的 Android 应用程序（游戏）并使用了 jquery mobile。一切都是最新版本。还使用了一些javascript。最新版本的 Phonegap (Cordova) 用于通过 Eclipse 将其部署到 Android。

我们几乎完成了我们的应用程序，一切正常，我们只需要做一些最后的调整。

我们仍然面临的问题是性能。从按下按钮到显示弹出窗口到屏幕转换。它只是感觉不像自然流畅地运行。我还安装了一个示例基本 jquery 移动应用程序。同样的问题，你所做的一切都会有一点延迟，我认为 HTML5 和 Jquery mobile 还没有准备好。

我们使用了多部手机，所以这不应该是问题。

我不会用 Java 编程，但是在我的手机上安装一个类似的示例 Java 应用程序时，一切都运行得非常顺利。

我的问题是，我们的应用程序是否有任何替代方案可以使其顺利运行？我们应该改用 Java 编程还是有其他选择？

*   在电脑上运行流畅
*   在手机浏览器中打开 index.html 文件时运行更好，但并不完美
*   我们尝试了来自该线程的提示：[PhoneGap - 与 Android 上的浏览​​器相比性能不佳](https://stackoverflow.com/questions/10364868/phonegap-bad-performance-compared-to-browser-on-android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:02:11.520

我认为如果你想要可接受的性能，你将不得不在“本机”代码（Java）中实现该游戏。我还没有看到基于 HTML5 的应用程序，更不用说与原生应用程序相比提供令人满意的用户体验的游戏了。尤其是在安卓上。

它可能会在未来几年发生，它会越来越好，但恕我直言，我们还没有完全做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:42:29.383

如果您的关键因素是性能，那么请务必将您的应用程序开发为原生应用程序。HTML5 和 java 脚本只有在您想针对多个平台、更关注应用程序的外观和感觉同时又想从现场维护所有内容时才能真正派上用场。

# vb.net - 在点击 ultrawingrid 列后立即禁用编辑模式

> ID：14747013
> 
> 赞同：2
> 
> 时间：2013-02-07T08:49:15.773
> 
> 标签：vb.net, infragistics

一旦我单击我在我的 ultrawingrid 列中的复选框，我就试图禁用编辑模式。我设法在其余行上禁用了编辑模式，但是我最后一次单击的项目保持在编辑模式，这改变了我的值。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:19:41.030

通常，要强制退出编辑模式，您可以调用此方法

```
yourGrid.PerformAction(UltraGridAction.ExitEditMode) 
```

然后您可以继续禁用所有行的编辑模式

# css - 从 img 标签 css 中删除间隙

> ID：14747017
> 
> 赞同：0
> 
> 时间：2013-02-07T08:49:40.657
> 
> 标签：css

我有一个问题。

总是当我在我的 HTML 文件中包含一个 img 标签时，我在标签周围有一个间隙。它不是边距，也不是填充。我问我这是什么？

有人可以帮我用 css 删除 gab 吗？

```
<img src="../images/modules/Bildergalerie2.jpg" /> 
```

谢谢

* * *

```
 <img src="../images/modules/Bildergalerie2.jpg" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:52:47.067

你可以试试这个：

```
*{margin:0;padding:0;}
img{border:none 0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:53:52.943

差距是由于 <img> 是一个内联元素导致它们遵循与文本相同的规则。要解决这个问题，您可以添加 display: block; 在图像上或使用垂直对齐播放（将其设置为底部）。有关更多信息，请阅读 Mozilla [https://developer.mozilla.org/en/docs/Images,_Tables,_and_Mysterious_Gaps上的精彩文章](https://developer.mozilla.org/en/docs/Images,_Tables,_and_Mysterious_Gaps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:54:47.777

```
img {display: block;}//removes the gap 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T08:56:13.590

IMG 标签是内联元素，是依赖于空白的方法。IMG 标签周围的空间实际上是基于您为您的网站选择的字体系列，您可以做的是选择元素是 css

```
img
{ 
    display: block;
} 
```

但这将导致打破界限并转移到新的界限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T08:58:16.157

*   确保它不是与周围背景颜色相同的边框？
*   确保它不会从其他地方继承边距或填充
*   确保在您的 css 边距（和填充）中 imgs 显式设置为零（因为某些浏览器的默认样式表具有 img 边距）
*   确保间隙不是图像的一部分（不太可能但可能！）
*   邮政编码在这里...

# matlab - 在 MATLAB 中使用 fminsearch 时如何确定总运行时间

> ID：14747024
> 
> 赞同：2
> 
> 时间：2013-02-07T08:49:55.823
> 
> 标签：matlab, fminsearch

这里有没有人知道我应该在 MATLAB 中使用什么命令来确定使用 FMINSEARCH 运行 Nelder-Mead 算法直到它停止所花费的总计算机时间。TQ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:30:55.190

首先，您可以使用[tic](http://www.mathworks.se/help/matlab/ref/tic.html) / [toc](http://www.mathworks.se/help/matlab/ref/toc.html)指令检查计算时间。例如：

```
tic
x = fminsearch('x^2+x+2',10)
toc 
```

其次，Nelder-Mead 算法是一种无约束非线性优化算法，它以启发式的方式迭代地趋向最小值。从我的角度来看，它可能会更慢并且找不到“好的”最小值。因此，我建议您使用准牛顿方法，例如 BFGS。您只需要使用函数[fminunc](http://www.mathworks.se/help/optim/ug/fminunc.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:29:35.623

如果要对特定代码段计时，可以使用

```
tic
% yourcode
toc 
```

如果您无法编辑代码或想要检查函数的总运行时间，请尝试

```
help profile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:39:00.613

编码：

```
t=cputime; 
your_operation; 
cputime-t 
```

返回您的进程花费的计算 (CPU) 时间。Tic/toc 命令返回经过的运行时间；这可能取决于同时使用 CPU 的其他程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T21:15:07.160

从[这个答案](https://stackoverflow.com/a/18955502/8239061)中，由于MATLAB 细微差别的内部操作，该函数[`timeit`](https://www.mathworks.com/help/matlab/ref/timeit.html)优于使用[`tic`](https://www.mathworks.com/help/matlab/ref/tic.html)& 。[`toc`](https://www.mathworks.com/help/matlab/ref/toc.html)`timeit`

根据[文件](https://www.mathworks.com/help/matlab/ref/timeit.html)，

> `timeit`多次调用指定的函数，并计算测量值的中位数。

考虑取自[`fminsearch`](https://www.mathworks.com/help/matlab/ref/fminsearch.html).

```
% MATLAB R2018b
fun = @(x)100*(x(2) - x(1)^2)^2 + (1 - x(1))^2;
x0 = [-1.2,1];
[x,fval] = fminsearch(fun,x0);

RunTime = timeit(@() fminsearch(fh,x0));      % median runtime in seconds 
```

# jquery - 使用jQuery Tooltip时如何在IE中隐藏本机工具提示？

> ID：14747030
> 
> 赞同：3
> 
> 时间：2013-02-07T08:50:36.050
> 
> 标签：jquery, internet-explorer, tooltip, jquery-tooltip

我的小应用程序又出现了一个小问题。你可以在[这里](http://www.mymobisite.be/victorpeeters)找到它。

在 Chrome、Firefox、... 一切运行良好。在 Internet Explorer 中有一个小问题。

由于我使用的是 jQuery UI 工具提示，因此可能不会显示默认工具提示...在 Internet Explorer 中，它确实会出现。

谁知道如何解决这个小问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:07:52.877

我只能建议不要使用`title`属性。例如，您可以改用`data-title`属性或任何其他以 . 开头的名称`data-`。`items`之后使用插件的选项指定所需的属性：

```
$('area').tooltip( { items: 'area[data-title]' } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:49:53.580

@Alex GP 当我只使用“项目”选项时，它根本没有显示任何内容。我还必须添加一个“内容”选项：

`$("area").tooltip({ track: true, items: "area[data-title]", content: function () { return $(this).attr("data-title")} });`

现在它工作正常:) 还是谢谢你！

# git - Travis-ci：监视并从 Git 远程存储库构建单个分支

> ID：14747031
> 
> 赞同：9
> 
> 时间：2013-02-07T08:50:41.923
> 
> 标签：git, validation, git-branch, travis-ci

我实际上正在讨论 Travis-CI 的一些问题。假设我在 Github 上有一个存储库，有多个分支。我只需要验证和构建**master 分支**，而忽略任何其他分支。查看 Travis 文档，似乎我必须`.travis.yml`在存储库的每个分支中推送一个文件。但是所有这些 yml 文件都应该具有相同的内容吗？换句话说，[我是否必须](http://about.travis-ci.org/docs/user/build-configuration/#Specify-branches-to-build)在每个分支的每个 travis.yml 文件的顶部都有这个：

# 在每个 yml 文件中

```
branches:
  only:
    - master 
```

在我的 yml 文件中，我希望在 master 分支中运行一个运行规范测试的脚本，该脚本使用 travis 验证构建。这些规范测试是写在只存在于主分支中的文件中，而不是其他的，因为我在那里不需要它们。所以，我想我还必须跳过在每个不同于 master 的分支中推送的 yml 文件中的脚本部分？如下：

```
#YAML file (master branch)
branches:
  only:
    - master

# run the script
script: "tsc -f specs/*" 
```

在其他一些分支：

```
#YAML file (any other branch)
branches:
  only:
    - master 
```

感谢阅读。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T08:52:35.947

~~是的，您目前必须在`.travis.yml`每个分支中指定构建分支。~~

不，脚本行不必包含在每个分支的文件中。

~~**编辑**：您可能也有兴趣观察travis-ci 的[此功能请求](https://github.com/travis-ci/travis-ci/issues/902)。~~

**更新**`.travis.yml`：自 2014 年 3 月起，您可以在 travis-ci.org 上的存储库设置中禁用没有文件的分支/提交的构建。该选项（当前）称为“仅使用 .travis.yml 文件构建提交”，另请参阅[此博客文章](http://blog.travis-ci.com/2014-03-05-repository-settings/)

# php - 向填写表格的用户发送确认电子邮件

> ID：14747035
> 
> 赞同：0
> 
> 时间：2013-02-07T08:50:54.110
> 
> 标签：php, html, email

这是我的 HTML 表单

```
 <form method="post" name="myemailform" action="form-to-email.php">
<p>
    <label for='name'>Enter Name: </label><br>
    <input type="text" name="name">
</p>
<p>
    <label for='email'>Enter Email Address:</label><br>
    <input type="text" name="email">
</p>
<p>
    <label for='message'>Enter Message:</label> <br>
    <textarea name="message"></textarea>
</p>
<input type="submit" name='submit' value="submit">
 </form> 
```

这是 PHP 邮件代码，当用户点击提交时获取数据

```
<?php
if(!isset($_POST['submit']))
{

echo "error; you need to submit the form!";
}
$name = $_POST['name'];
$visitor_email = $_POST['email'];
$message = $_POST['message'];

//Validate first
if(empty($name)||empty($visitor_email)) 
{
echo "Name and email are mandatory!";
exit;
}
$email_from = 'tom@amazing-designs.com';//<== update the email address
$email_subject = "New Form submission";
$email_body = "You have received a new message from the user $name.\n".
 "Here is the message:\n $message".

$to = "khan.koder@gmail.com";//<== update the email address
$headers = "From: $email_from \r\n";
$headers .= "Reply-To: $visitor_email \r\n";

mail($to,$email_subject,$email_body,$headers);

//done. redirect to thank-you page.

header('Location: thank-you.html');

?> 
```

它没有显示错误，但只是登陆页面thank-you.html 我检查了我的电子邮件帐户但没有收到邮件

请帮忙看看有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:58:16.673

您可以按如下方式实现：

1）在数据库中创建一个激活的字段（默认为**false**）。
2) 注册后，将发送电子邮件
3) 在电子邮件中填充一个链接，包括...

```
a) user unique identifier 
b) activation to active 
```

所以它可能看起来像这样 [code] Welcome **username_**。感谢您的注册，请点击以下链接激活您的帐户 domain.com/register.php?uid=100&activate=1

4) 您的注册脚本尝试通过 id 获取用户。
5) 将激活的字段更新为**true**。

你有一个新的活跃用户。

愿它能给你一个想法。

# android - Google Map V2如何设置ZoomToSpan？

> ID：14747037
> 
> 赞同：15
> 
> 时间：2013-02-07T08:50:57.417
> 
> 标签：android

作为标题，在地图 v1 中我可以使用

```
mapController.zoomToSpan(..., ..., ...); 
```

包括屏幕上的所有标记。

剂量图V2有同样的方法吗？

* * *

2013/2/22 编辑：

首先，获取您想要在屏幕上涉及的所有 LatLng 点。

假设您有 3 个 LatLng 点，请使用

```
LatLngBounds bounds = new LatLngBounds.Builder().include(point1)
                    .include(point2).include(point3).build();

mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 50)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T05:00:53.427

**尝试这个**

```
 map.addMarker(new MarkerOptions().position(latlng)).setVisible(true);

  // Move the camera instantly to location with a zoom of 15.
  map.moveCamera(CameraUpdateFactory.newLatLngZoom(latlng, 15));

  // Zoom in, animating the camera.
  map.animateCamera(CameraUpdateFactory.zoomTo(14), 2000, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T10:56:00.430

我希望这对你有用。

```
public class GoogleMapActivity extends FragmentActivity {

private GoogleMap map;
Bundle extras;

LatLng latlng;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.google);

    extras = getIntent().getExtras();
    if (extras != null) {
        unit_long = extras.getString("unit_long");
        unit_lat = extras.getString("unit_lat");

    }

    latlng = new LatLng(Double.parseDouble("19.25252"),
            Double.parseDouble("23.25252525"));

    map = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map)).getMap();

    Marker hamburg = map.addMarker(new MarkerOptions().position(latlng)
            .title("Location").snippet("I am here")
            .icon(BitmapDescriptorFactory.fromResource(R.drawable.marker)));

    map.moveCamera(CameraUpdateFactory.newLatLngZoom(latlng, 15));

    // Zoom in, animating the camera.use this line in your code 
    map.animateCamera(CameraUpdateFactory.zoomTo(14), 2000, null);
    // map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T07:18:41.607

地图V2

```
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
 GoogleMap map = ((SupportMapFragment)getSupportFragmentManager()
                                            .findFragmentById(R.id.map)).getMap();
 map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

     if (map != null) {
        // Zoom in, animating the camera.
    map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);
     }
 } 
```

您可以更改 12 的值，即地图加载的缩放级别。玩得开心！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T15:45:11.520

Google map V2 的几个方法可以做同样的事情：

```
static CameraUpdate  newLatLngBounds(LatLngBounds bounds, int padding) 
```

> 返回一个CameraUpdate，它转换相机，使得指定的纬度/经度边界在屏幕上以最大可能的缩放级别居中。

```
static CameraUpdate newLatLngBounds(LatLngBounds bounds, int width, int height, int padding) 
```

> 返回一个 CameraUpdate ，它转换相机，使得指定的纬度/经度边界在屏幕上以最大可能的缩放级别在指定尺寸的边界框内居中。

```
static CameraUpdate  newLatLngZoom(LatLng latLng, float zoom) 
```

> 返回一个 CameraUpdate，它将屏幕中心移动到由 LatLng 对象指定的纬度和经度，并移动到给定的缩放级别。

这是使用其中之一的示例：

```
googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(geoPoint, zoom)); 
```

# erlang - 在 erlang 接收语句中引入“保存队列”的目的是什么

> ID：14747039
> 
> 赞同：4
> 
> 时间：2013-02-07T08:51:07.020
> 
> 标签：erlang

我是 erlang 新手，从 Joe Armstrong 的“Programming Erlang”开始教程。

我对 8.6 中选择性接收中提到的“保存队列”感到困惑。如果消息根本不匹配，为什么不直接丢弃呢？将其放回邮箱以供以后处理的目的是什么？如果这是默认行为，那些垃圾消息（意味着它们无法匹配）可能会导致性能损失，因为它们会在不释放的情况下累积。

我想知道我是否误解了这部分。我试图检查进程邮箱的内容以获得更好的理解，但我无法做到。

请帮忙，我将不胜感激任何证明一点的代码片段，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:07:58.447

这本书的这一段描述了一个接收组所做的事情的细节。不要忘记，一个进程可以顺序处理多个接收块，因此一条与第一个接收块的任何条目都不匹配的消息将被放入保存队列（为了提高效率），因为：

*   它永远不会匹配当前接收块的任何条目，
*   只有当一个输入消息匹配一个条目或超时结束时，才能保证当前接收块完成。

当一个接收块完成时，保存队列按原始接收顺序放回邮箱中，因为下一个接收块有机会获得与“保存队列”消息之一匹配的条目。

一种用法是管理优先级：

```
loop() ->
   ...
   receive
      {high_prio,Msg} -> process_priority_message(Msg)
   after 0
      ok  % no priority message
   end,

   receive
      {low_prio,Msg} -> process_normal_message(Msg);
      Other -> process_unexpected_message(Other)
   end,
   ...
   loop() 
```

此代码允许处理消息 {high_prio,Msg} 即使它不在消息队列中的第一个位置。

你是对的，有意外消息在邮箱中积累的风险，特别是在一个永无止境的循环中，这就是为什么你会经常看到最后一行的东西

> 其他-> process_unexpected_message（其他）

清空邮箱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T20:49:07.560

这在构建并发系统时有很大帮助，因为它允许您只专注于您当时感兴趣**的**那些消息，而忽略其他消息。Erlang 系统通常是非确定性的，因此您很少知道*您*将收到什么以及*何时*收到。如果没有自动保存队列，这意味着您在每次收到消息时都必须能够处理可能到达此过程的每条消息。它很快就变成了状态和消息的组合爆炸。

以简单的服务器为例。在其顶层将有一个接收循环，用于接收服务器处理的请求。然后它将处理第一个请求。在此处理过程中，它很可能会与其他进程通信并接收消息。在处理请求时，新的请求消息可以到达服务器。如果 Erlang 没有保存消息，那么您将不得不在接收消息的服务器代码中的任何地方处理这些请求。现在您可以忽略这些新请求并将它们留给*应该*处理它们的顶部循环。

快速跟踪需要在服务器某处处理的所有消息变得不可行。例如，在`gen_server`您有客户端发送的实际请求（未指定消息格式）、向服务器发送“系统”消息（未指定消息格式）、除所有消息处理您的请求需要。

您最终将实现自己的消息缓冲区并将其传递。

没有消息保存队列将使得编写在处理时发送/接收消息的通用模块实际上是不可能的，例如客户端函数到`gen_server`s。他们必须了解可能到达该流程并需要处理的每条消息。

是的，保存所有消息**可能**是个问题，但当您意识到这一点时，它通常是可以解决的问题类型。例如，在服务器的顶部循环中，您可以合理地确定可以接收和丢弃未知消息。A`gen_server`确实在它知道如何处理它们的顶层接收所有消息，其中一些消息由它自己处理（系统消息），而其他消息则传递给特定的服务器代码。

正如@Pascal 所示，它允许您轻松处理优先级消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T02:04:49.687

+1 到 rvirding，“在构建并发系统时它是一个巨大的帮助”，这正是它的意义所在。让我想起了一些示例代码——一个“吸烟者问题”的解决方案——我不久前就开始了。我认为分享它可能有助于说明这一点：

```
-module(smokers).
-export([smokers/0]).

smokers() ->
    Rounds = 1000000,
    Agent = self(),
    lists:foreach(fun(Material) -> spawn(fun() -> startSmoker(Agent, Material) end) end, materials()),
    done = agent(Rounds),
    io:format("Done ~p rounds~n", [Rounds]).

agent(0) ->
    done;
agent(Rounds) ->
    offer(twoRandomMaterials(), Rounds).

offer(AvailableMaterials, Rounds) ->
    receive
        {take, Smoker, AvailableMaterials} ->
            Smoker ! smoke,
            receive
                doneSmoking ->
                    agent(Rounds - 1)
            end
    end.

startSmoker(Agent, Material) ->
    smoker(Agent, lists:delete(Material, materials())).

smoker(Agent, Missing) ->
    Agent ! {take, self(), Missing},
    receive
        smoke ->
            Agent ! doneSmoking,
            smoker(Agent, Missing)
    end.

twoRandomMaterials() ->
    Materials = materials(),
    deleteAt(random:uniform(length(Materials)) - 1, Materials).

materials() ->
    [paper, tobacco, match].

deleteAt(_, []) -> [];
deleteAt(0, [_ | T]) -> T;
deleteAt(Idx, [H | T]) -> [H | deleteAt(Idx - 1, T)]. 
```

这里有趣的是，当我们尝试`receive {take, Smoker, AvailableMaterials}`. 但是，*现在*只能处理*其中之一*。然后是内部作为握手。因此，对于一个选择正确的消息，允许代码完成一些工作以及在接收握手消息时不丢失其他消息是解决所有并发问题的方法。如果不匹配/不可处理的消息在任何时候丢弃，s 将永远卡住（除非他们会定期重复他们的请求）。*`receive doneSmoking``take``smoker`*

# jquery - 使用可扩展框制作网格

> ID：14747043
> 
> 赞同：0
> 
> 时间：2013-02-07T08:51:10.077
> 
> 标签：jquery, css, grid, expandable

我在 CSS 和 jQuery 中制作的方框网格有点麻烦。

问题是，当您单击它们时，这些框必须展开，它们确实会展开，但是当您单击最右边的一个时，它有足够的空间保持在线并且它会向下移动。

这是我的页面：

[http://nxtstep.dk/test/produkter.html](http://nxtstep.dk/test/produkter.html)

这就是问题所在：

[http://nxtstep.dk/test/problem.png](http://nxtstep.dk/test/problem.png)

这是我的代码（可能不那么漂亮，但它可以完成工作）：

```
 $('ul#products li a').click(function() {

    //Reset
    $('ul#products li').removeClass("marked");
    $('ul#products li .product-text').hide();

    var productID = $(this).attr('name');

    $("#product-"+productID+"").addClass("marked");
    $("#product-text-"+productID+"").show();

    }); 
```

我的问题是：有没有办法让那个盒子与之前的盒子交换位置或任何其他方式来确保它保持在线？也许是插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:09:16.440

一种方法是在一行中仅放置三个项目，以便在展开时不会进入第二行。

另一个问题是，如果只有三个项目，那么它看起来会更好，并且不会放在第二行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:19:53.653

您可以使用[此博客](http://blog.pengoworks.com/index.cfm/2008/9/24/A-quick-and-dirty-swap-method-for-jQuery)中的一个小 .swap() 方法：

```
jQuery.fn.swap = function(b){
    b = jQuery(b)[0];
    var a = this[0];
    var t = a.parentNode.insertBefore(document.createTextNode(''), a);
    b.parentNode.insertBefore(a, b);
    t.parentNode.insertBefore(b, t);
    t.parentNode.removeChild(t);
    return this;
}; 
```

这个代码片段：

```
$('#products').on('click', 'li', function() {
    var $this = $(this);
    if($this.index() % 4 == 0) {
        $this.swap($this.prev());
    }
    $this.addClass('marked').siblings().removeClass('marked');
}); 
```

CSS

```
#product li .product-text { display: none; }
#product li.marked .product-text { display: block; } 
```

如果您还想在元素关闭时换回，则必须扩展代码......

# php - 如何在 php 或 javascript 中禁用文本框回帖

> ID：14747044
> 
> 赞同：0
> 
> 时间：2013-02-07T08:51:15.667
> 
> 标签：php, javascript, html, forms, postback

如何从文本框中禁用或删除页面回帖？

当我在文本框中按回车键时，页面被回发。我有一个通过 ajax 函数保存数据的按钮。

```
<form name="test" class="form panel" id="test" method="post">
  <input type="text" name="user" />
  <input type="button" name="save" value="save" onclick="save()"/>
</form> 
```

保存功能运行良好，问题是文本框，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:55:26.083

如果它是 AJAX 表单，则阻止表单提交：

```
<form ... onsubmit="return false;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:54:41.880

你可以简单地做

# HTML 解决方案

```
<form onsubmit="return false;"> 
```

# JS解决方案

您可以在表单上定义按键处理程序：

```
document.querySelector('form').onkeypress = checkEnter; 

function checkEnter(e){
 e = e || event;
 var txtArea = /textarea/i.test((e.target || e.srcElement).tagName);
 return txtArea || (e.keyCode || e.which || e.charCode || 0) !== 13;
} 
```

# jQuery 解决方案

```
$(document).ready(function() {
  $(window).keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:56:58.003

在文本框中按 Enter 键是表单的正常行为，当用户在文本框中按 Enter 键以发现没有任何反应时，用户可能会感到困惑。

您可以使用以下脚本阻止提交

```
<form onsubmit="return okToSubmit;"...

var okToSubmit=false;
function save(){
// ... your code
  okToSubmit=true;
// form.submit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T08:58:38.173

如果您唯一的想法是阻止文本框的输入事件，这可能会起作用：

```
<form name="test" class="form panel" id="test" method="post">
<input type="text" name="user" onkeydown="if (event.keyCode == 13) event.preventDefault();"/>
<input type="button" name="save" value="save" onclick="save()"/>
</form> 
```

# c# - 如何使用 C# 在 asp.net 中设置 Dropdownlist 值

> ID：14747046
> 
> 赞同：3
> 
> 时间：2013-02-07T08:51:18.990
> 
> 标签：c#, asp.net, dictionary

我有一种使用 C# 在 asp.net 中填充下拉列表的方法

```
public void get_country_box_populated(ref System.Web.UI.WebControls.DropDownList dropDown, bool add_initial_text)
{
    dropDown.Items.Clear();
    //dropDown.Items.Add(0,"Select Any Country");
    var context = new db_vmartEntities();
    var query = from c in context.tbl_countary
                where c.status == true
                select new { c.countary_id, c.countary_name };

    var dictionary = new Dictionary<int, string>();
    if (add_initial_text)
    {
        dictionary.Add(0, "Select Any Country");
    }
    foreach (var item in query)
    {
        dictionary.Add(item.countary_id, item.countary_name);
    }
    dropDown.DataTextField = "Value";
    dropDown.DataValueField = "Key";
    dropDown.DataSource = dictionary;  //Dictionary<int, string>
    dropDown.DataBind();
} 
```

现在我需要在编辑页面上选择一个默认值，就像这样。

```
store_registration my_store = str.get_store_by_id(Session["user"].ToString(), sid);
c.get_country_box_populated(ref countary_box,false);
countary_box.Text = countary_box.Items.FindByValue(my_store.countary).ToString(); 
```

但未设置值，因为模式是这样的

```
Dictionary<key,value>
Dictionary<5,Pakistan>
Dictionary<8,India>
Dictionary<9,Iran>
Dictionary<6,UK> 
```

如果我可以在 mystore.country 值为 6 时在下拉列表中设置 UK 的任何帮助或指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:56:49.973

首先，您不需要`ComboBox`通过引用传递。

要选择`DataBoud`ComboBox 的值，请执行以下操作：

```
countary_box.SelectedValue = my_store.countary_id; //im not 100% sure that this is the key, so change it to equivalent of item.countary_id 
```

它会预先选择赋予价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:59:56.170

我认为问题出在这一行：

```
countary_box.Text = countary_box.Items.FindByValue(my_store.countary).ToString(); 
```

在 ASP.NET 中，您可以`SelectedValue`通过a的[`Text`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.text.aspx)`DropDownList`设置属性（如在 Winforms 中）。请注意区别，您通过 text 属性设置值。但`ListItem.ToString`返回文本而不是 value 属性。

所以你需要这个：

```
countary_box.Text = my_store.countary.ToString(); // if countary is the int which is used as key 
```

或`SelectedValue`直接使用相同的：

```
countary_box.SelectedValue = my_store.countary.ToString(); 
```

# c++ - 如何制作与哈希相似文本/html匹配/比较的哈希键？

> ID：14747053
> 
> 赞同：1
> 
> 时间：2013-02-07T08:51:49.577
> 
> 标签：c++, mysql, c, hash, similarity

我想从一个文本（在我的例子中是html）中制作一种哈希键，它可以匹配/比较其他类似文本的哈希

匹配文本的前：

*   “2012/10/01 这是我的网页 #1”+ 100k_of_same_text + random_words_1 + ..
*   “2012/10/02 这是我的网页 #2”+ 100k_of_same_text + random_words_2 + ..
*   ...
*   “2012/10/02 这是我的网页 #2”+ 100k_of_same_text + random_words_3 + ..

到目前为止，我已经考虑过删除数字和标签，但这仍然会留下随机单词。

有什么东西可以剂量吗？

我对服务器具有 root 访问权限，因此我可以添加任何必要的 UDF，如果需要，我可以用 c 或其他语言进行处理。

理想的情况是一个类似的函数`generateSimilarHash(text)`和一个`compareSimilarHashes(hash1,hash2)`返回匹配文本的概率的函数。

像 compare(text1,text2) 这样的任何函数都不会像我的情况那样工作，因为我有很多页面要比较（目前约 2000 万）

**欢迎任何建议！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:26:40.600

我从来没有做过这样的事情，所以只是根据一般的散列知识扔掉一些东西。

首先，一般来说，我怀疑您是否可以将要比较的整个字符串表示为从中散列的一个值，然后仅使用该值有意义地找到近似匹配。散列函数通常被设计成从输入值的最小变化中产生巨大的伪随机输出值差异 - 所以天真地使用它们并不适合解决这个问题，但是......

可能有用的是使用一些约定将长文本分成小节，例如寻找至少 N 个字符的终止标点符号（句号、感叹号、问号），然后您可以散列这些单独的子字符串并使用匹配散列的计数来近似匹配文本的数量。

您必须计算出合适的粒度级别，以将文本划分为合理数量的不同散列 - 平衡散列的大小和散列比较的速度与匹配的准确性。您可能还需要进行一些先前的转换，例如将字符转换为单个大小写或将一个或多个空白字符的每个区域替换为单个空格，也许将标点符号替换为空格：这样微不足道的差异不会导致散列不匹配 - 调整口味。

在您的示例中：

> “2012/10/01 这是我的网页 #1”+ 100k_of_same_text + random_words_1 + ..

假设你在句号上打断，或者没有句号，我们发现局部最小值按排序的词序排列，这样一个部分中最多出现 5-20 个词......你最终可能会得到如下子字符串：

*   “2012/10/01 这是我的网页#1。”
*   “这是 100k 文本中的第一位。”
*   “这是 100k 文本中的第二位。”
*   “还有 100k 的一点。”
*   《鸡书狗蜡笔抱抱》
    *   *由于“苹果”是本地最小值而中断*
*   “苹果树枝纸手套书挡 ibm”
    *   *由于“激活”是本地最小值而中断*
*   “激活篡位黑社会活动扳手。”
    *   *打断 ”。”*
*   《斑马意大利夸克炖世纪恐龙夹克彩蛋把戏》
    *   *由于“鸡”是本地最小值而中断；“世纪”是 < 5 个单词*
*   “鸡笑话路坏”

然后你在上面的每一个上使用一个普通的字符串散列函数。要将其与其他类似散列的文本进行比较，您需要查找匹配散列值的数量（如果您不重视匹配的文本小节的顺序或连续性，则迭代预先排序的列表非常有效两组哈希，或用哈希值预先填充哈希表，然后依次查找每个哈希表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-26T16:22:09.703

我想我会回答这个问题，因为我正在研究一个类似的问题。这种具有高冲突可能性的相似对象散列的想法的名称是“局部敏感散列”。关于这个主题有很多文献，但这里有一个简单的例子：

假设我们有一个固定长度的二进制向量 {1,0}。我们可以使用内置的 stl 和 boost 算法选择一个随机的索引子集来计算哈希：

```
#include <unordered_map>
#include <unordered_set>
#include <random>
#include <algorithm>
#include <boost/iterator/filter_iterator.hpp>
#include <boost/functional/hash.hpp>

template<class It, class pred>
std::size_t hash_filtered_range(It first, It last, pred f){

    return boost::hash_range(boost::make_filter_iterator(f, first, last),
                             boost::make_filter_iterator(f, last, last));

}

template<class iter>
struct IterableHash{
    IterableHash(const iter indices_begin, const iter indices_end): _inc_indices(indices_begin, indices_end){
    }

    template <class obj_type>
    std::size_t operator()(const obj_type& type)const{
        int _ix = 0;
        return hash_filtered_range(std::begin(type), std::end(type), [this, &_ix](const auto& t){
           return (this->_inc_indices.find(_ix++) != this->_inc_indices.end());
        });
    }

private:
    std::unordered_set<int> _inc_indices;

};

template<class hasher>
struct ApproxEqual{
    ApproxEqual(const hasher& hash):hash(hash) {}

    template<class obj_type>
    bool operator() (const obj_type& o1, const obj_type& o2)const{
        return hash(o1) == hash(o2);

    }
private:
    hasher hash;

}; 
```

然后，如果可迭代对象仅在以下索引处相等，则它们具有相同的哈希值和相等值：

即在我的电脑上

```
std::vector<int> hash_vec{0,2,3};

    using it = std::vector<int>::iterator;
    IterableHash<it> hasher(hash_vec.begin(),
                     hash_vec.end());

    ApproxEqual<IterableHash<it>> cmp(hasher);
    std::unordered_map<std::vector<char>, int, IterableHash<it>, ApproxEqual<IterableHash<it>> > map( 0, hasher,
                                                                                            cmp);
    std::vector<char> vec {1,0,1,0,1};
    map[vec] = 33;

    std::cout << hasher(vec)<< "\n";

    std::vector<char> fuzzy_vec {1,0,1,0,0};

    std::cout << hasher(fuzzy_vec)<< "\n";
    std::cout << (map.find(fuzzy_vec)->second); 
```

生产

> > > 11093822460655
> > > 
> > > 11093822460655
> > > 
> > > 33

即，当我们使用fuzzy_res 查询时，我们恢复了不同向量res 的值；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:11:30.737

您可以尝试对随机词使用 DJB 哈希算法。然后比较哈希键。确实，两个不同的文本给出相同结果的可能性总是很小...但是如果 32 位的哈希值不够，您可以将其扩展为 64 位和/或保留对文本的引用以比较它们何时哈希是相同的。

更多细节在这里：[DJB Hash](https://stackoverflow.com/q/10696223/1987986)

# asp.net - 为什么我的激活方法会工作两次？

> ID：14747055
> 
> 赞同：0
> 
> 时间：2013-02-07T08:51:56.573
> 
> 标签：asp.net, asp.net-mvc-3, jquery, activation

我正在制作帐户激活方法。一切看起来都很好。但我认为我错过了一些东西......我的激活方法工作了两次。我是网络新手。

这是我的方法

```
[HttpPost]
public ActionResult Active(string code)
{            
     return Content("Your account Successfully Activated");
} 
```

这是html&jquery代码

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        Yout Aktivasyon Code:
        <div class="editor-field">
            <input type="text" id="ActivationCode"/>            
        </div>

        <input type="submit" value="Active"/>
    </fieldset>
}

<script type="text/javascript">

    $(function () {

        $('form').submit(function () {

            $.ajax({
                url: "@Url.Action( "Active", "Account")",
                type: "post",
                data: { code: $('#ActivationCode').val() },
                success: function (result) {
                    console.log("successful\n" + result);
                },

                error: function (request, status, error) {
                    console.log("error");
                }
            });
        });
    });
</script> 
```

我在 Active 方法中放置了一个断点并检查“代码”参数。当我提交表单时，Active 方法触发并且代码具有文本框中的值。然后我按 F5 继续，之后 Active 方法再次触发并且代码值为 null

我无法找出我的错误为什么它会工作两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:03:26.180

可能是您正在执行 ajax 请求和之后的普通帖子，因为您没有阻止默认行为。尝试阻止默认行为：

```
$(function () {

    $('form').submit(function (e) { // Add the event parameter -> e

        // Prevent the default behavior.
        e.preventDefault();

        $.ajax({
            url: "@Url.Action( "Active", "Account")",
            type: "post",
            data: { code: $('#ActivationCode').val() },
            success: function (result) {
                console.log("successful\n" + result);
            },

            error: function (request, status, error) {
                console.log("error");
            }
        });

        // Also return false for the default behavior.
        return false;
    });
}); 
```

来自[jQuery 文档](http://api.jquery.com/event.preventDefault/)：

> event.preventDefault()
> 如果调用该方法，则不会触发事件的默认动作。

返回`false`也是一种告诉事件实际上不会触发的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:57:37.907

当您按 F5 时，您正在刷新上次请求收到的窗口内容。在您的情况下，它是 POST 发送到“帐户/活动”操作的。但我怀疑第二次尝试时没有发送数据（文本框的内容）。

打开浏览器的网络控制台（对于 IE9 - 按 F12，转到网络选项卡并按“开始捕获”）并检查发送到服务器的请求正文。如果仅在第一次尝试时发送数据，我不会卷曲。

# coding-style - 为开发人员命名包含支持脚本、配置、文档等的项目目录的常见做法

> ID：14747056
> 
> 赞同：7
> 
> 时间：2013-02-07T08:51:57.020
> 
> 标签：coding-style, naming-conventions

我与一小部分项目合作，因此缺乏关于希望进行项目开发的软件项目文件层次结构中目录的命名约定的知识。

我查看知名项目（如 Firefox、GCC、binutils、Linux、Emacs、VIM 等）并收集一些常用目录（我自己写的评论，所以它们不会假装是真的……）：

*   `examples`或`samples`在小脚本或小程序或小配置中展示项目的实际用法。
*   `scripts`, `support`- 缺少脚本/实用程序的包装器或副本，以提供跨环境构建。
*   `tools`- 额外的实用程序来分析或调试项目。
*   `contrib`- 用户提供的脚本、配置等...
*   `misc`, `etc`- 未分类的文件（如果您不知道放置它的正确位置）。
*   `config`，`extra`-不知道...

虽然`src/`、`test/`、`build/`、`dist/`和`lib/`其他目录命名约定由 prog-langs/platforms/frameworks 等规定，但此目录似乎对所有类型的项目都很常见。

因此，我寻找包含项目支持文件的目录的命名约定指南（官方或非官方）。

与常规项目文件最重要的区别在于，这些文件**不用于**项目发布**build**或在极少数情况下使用。

**附言**。有人可能会争辩说这不是一个问题。但是我有**真正的**任务来提交几个脚本（从数据库中转储菜单的 sql 脚本、为 Web 控制器转储 url 映射的脚本等）并查找应该保存这些文件的目录名称......

**聚苯乙烯**。我收集约定的努力：

*   [http://tips.defun.work/devel-proj-files.html](http://tips.defun.work/devel-proj-files.html)
*   [http://gavenkoa.users.sourceforge.net/tips-html/devel-proj-files.html](http://gavenkoa.users.sourceforge.net/tips-html/devel-proj-files.html)（镜像）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2020-07-13T08:55:51.077

有：

*   [软件包数据交换® (SPDX®)](https://spdx.dev/)
*   [GNU 编码标准](https://www.gnu.org/prep/standards/standards.html)
*   [Maven 标准目录布局](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

# java - 我不知道为什么 FATAL EXCEPTION: AsyncTask #1

> ID：14747057
> 
> 赞同：-2
> 
> 时间：2013-02-07T08:52:01.643
> 
> 标签：java, android

```
>     private class RssFeedTask extends AsyncTask<String, Void, String> {
>       String response = "";
>     
>       @Override
>       protected void onPreExecute() {
>           // TODO: Dialog
>       }
>     
>       @Override
>       protected String doInBackground(String... urls) {
>           try {
>               String feed = "http://google.com";
>               HtmListParser rh = new HtmListParser();
>               rssStr = rh.getLatestArticles(feed);
>           } catch (Exception e) {
>               Log.e("error_connection", "Error in http connection "+e.toString());
>           }
>           return response;
>     
>       }
>     
>       @Override
>       protected void onPostExecute(String result) {
>           // TODO: dismiss Dialog and set adapter
>       }
>     }

>     public class HtmListParser {
>       private RssFeedStructure feedStr = new RssFeedStructure();
>       private List<RssFeedStructure> rssList = new ArrayList<RssFeedStructure>();
>     
>     
>       public List<RssFeedStructure> getLatestArticles(String feedUrl) {
>            try {                                              
>              Document doc = Jsoup.connect(feedUrl).get();
>              
>             } catch (IOException e) {
>                 // TODO Auto-generated catch block
>                 e.printStackTrace();
>             }
>            
>     
>           return null;
>       }
>     
>     }

**and The Exceptions:** 
```

> ```
> 02-07 08:40:47.346: E/AndroidRuntime(1027): FATAL EXCEPTION: AsyncTask #1
> 02-07 08:40:47.346: E/AndroidRuntime(1027): java.lang.RuntimeException: An error occured while executing 
> ```
> 
> doInBackground() 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 android.os.AsyncTask$3.done(AsyncTask.java:299) 02-07 08:40:47.346: E/AndroidRuntime(1027) : 在 java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219 ) 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 java.util.concurrent.FutureTask.run(FutureTask.java:239) 02-07 08:40:47.346: E/AndroidRuntime(1027):在 android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080 ) 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 02-07 08:40:47.346: E/AndroidRuntime(1027): 在 java.lang.Thread.run(Thread.java:856) 02-07 08:40:47.346: E/AndroidRuntime(1027): 引起作者：java.lang.NoClassDefFoundError：org.jsoup.Jsoup 02-07 08:40:47.346：E/AndroidRuntime(1027)：在 com.newsinlevels.helper.HtmListParser.getLatestArticles(HtmListParser.java:20) 02-07 08 :40:47.346: E/AndroidRuntime(1027): at com.newsinlevels.activity.MainActivity$RssFeedTask.doInBackground(MainActivity.java:120) 02-07 08:40:47.346: E/AndroidRuntime(1027): at com. newsinlevels.activity.MainActivity$RssFeedTask.doInBackground(MainActivity.java:1) 02-07 08:40:47.346: E/AndroidRuntime(1027): at android.os.AsyncTask$2.call(AsyncTask.java:287) 02- 07 08:40:47.346: E/AndroidRuntime(1027): 在 java.util.concurrent.FutureTask.run(FutureTask.java:234) 02-07 08:40:47.346: E/AndroidRuntime(1027): ... 4 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:17:42.270

Android运行环境执行时找不到类路径中的JSoup类。您需要确保 JSoup 库包含在部署到 android 的包中。

# mouse - 有人知道包含 cds、tss 和启动子的鼠标 gtf 吗？

> ID：14747059
> 
> 赞同：1
> 
> 时间：2013-02-07T08:52:16.803
> 
> 标签：mouse, bioinformatics, genome

我正在寻找一个鼠标 gtf 与袖扣一起运行，其中包含有关发起人、cds 和 tss 的数据。到目前为止，我只能找到一个带有基因和异构体数据的 gtf。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T13:46:36.953

启动子没有标准区域。对于 tss，您可以只取基因的起始位置，对于启动子，您可以在 tss 周围取 +-1000 nt，但这取决于您。有某种标准可以在 tss 周围取 2000 nt。

虽然如果你想用那个文件运行 cufflink，我看不出 tss. 也许只是在发起人中。或者在 de tss 周围做一个小区域，但它会在启动子区域内。

我认为您可以使用 awk 轻松完成此操作。

希望它能给一些帮助。也许如果你解释你想做什么，其他人知道你分析的其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T06:56:35.937

是的，Ensemble 网站有这样的 gtf。您也可以访问 igenome： http: [//support.illumina.com/sequencing/sequencing_software/igenome.html](http://support.illumina.com/sequencing/sequencing_software/igenome.html) 并选择您想要的版本。如果这不起作用，请告诉我。我可以随时向您发送我用于 mm10 的 gtf 文件

# matlab - 提取图像行（矩阵）

> ID：14747062
> 
> 赞同：2
> 
> 时间：2013-02-07T08:52:24.183
> 
> 标签：matlab, matrix, plot

我在 matlab 中加载图像并将它们作为双矩阵使用。

现在我想从图像的一个点到另一个点的直线上提取数据值。然而，这条线不等于一列或一行（这很容易）。

我怎么能用matlab做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:17:07.903

一条线服从该线的 eq `y=a*x+b`。这里 x 和 y 是图像的坐标。所以如果你想要一条由两点定义的线`(x1,y1) -> (x2,y2)`，斜率`a`是`(y2-y1)/(x2-x1)`和`b=y1-a*x1`。所以接下来，选择矩阵中的点服从线的eq，如下所示：

创建数据和端点：

```
m=peaks(50);
x1=5 ; x2=42;
y1=21; y2=29; 
```

计算线参数的ew：

```
a=(y2-y1)/(x2-x1);
b=y1-a*x1; 
```

定义行：

```
x=x1:x2;
y=round(a*x+b); 
```

使用线性索引选择适当的矩阵元素：

```
ind=sub2ind(size(m),y,x) 
```

阴谋：

```
subplot(2,1,1)
imagesc(m); hold on
colormap(bone)
line([x1 x2],[y1 y2],'Color',[1 0 0]);

subplot(2,1,2)
plot(m(ind)) 
```

![在此处输入图像描述](../Images/deb3a66c77c525bd6c8888bb40f5aed6.png)

# java - 观察者模式适合文件监控吗？

> ID：14747063
> 
> 赞同：3
> 
> 时间：2013-02-07T08:52:25.003
> 
> 标签：java, algorithm, design-patterns

我很想知道观察者模式是否是实现代码以监视日志文件及其更改的正确方法？

我目前正在使用它，但似乎有一个我无法解释的异常情况。基本上，我创建了一个名为 FileMonitor 的类，它有一个触发的计时器，它迭代一个唯一文件列表，以查找更改的“lastmodified date”。

找到它后，将遍历Listeners 列表以找到匹配的文件，并通知它的fileChanged 事件。然后它开始处理文件中添加的行。

所以为了让我的问题更简洁：

1.  观察者模式是否适合我想要做的事情？（目前我每个文件有一个监听器）
2.  鉴于要监控的文件不止一个，是否存在“并发问题”的可能性？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:58:19.293

Java 7 引入了`WatchService`哪些监视注册对象的更改和事件。

> 一个 Watchable 对象通过调用它的 register 方法注册到一个 watch 服务，返回一个 WatchKey 来表示注册。当检测到对象的事件时，会发出键信号，如果当前未发出信号，则将其排队到监视服务，以便调用 poll 或 take 方法以检索键和处理事件的消费者可以检索它。处理完事件后，消费者调用密钥的重置方法来重置密钥，这允许向密钥发出信号并与进一步的事件一起重新排队。
> 
> 文件系统报告事件的速度可能比检索或处理事件的速度更快，并且实现可能对其可能累积的事件数量施加未指定的限制。如果实现故意丢弃事件，那么它会安排键的 pollEvents 方法返回事件类型为 OVERFLOW 的元素。消费者可以使用此事件作为触发器来重新检查对象的状态。

例子 -

```
Path myDir = Paths.get("D:/test");       

    try {
       WatchService watcher = myDir.getFileSystem().newWatchService();
       myDir.register(watcher, StandardWatchEventKind.ENTRY_CREATE, 
       StandardWatchEventKind.ENTRY_DELETE, StandardWatchEventKind.ENTRY_MODIFY);

       WatchKey watckKey = watcher.take();

       List<WatchEvent<?>> events = watckKey.pollEvents();
       for (WatchEvent event : events) {
            if (event.kind() == StandardWatchEventKind.ENTRY_CREATE) {
                System.out.println("Created: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKind.ENTRY_DELETE) {
                System.out.println("Delete: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKind.ENTRY_MODIFY) {
                System.out.println("Modify: " + event.context().toString());
            }
        }

    } catch (Exception e) {
        System.out.println("Error: " + e.toString());
    }
} 
```

参考 -[链接](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T09:09:04.777

如果您不想使用 Java 7，则可以使用[Apache IO](http://commons.apache.org/io/)获得相同的行为。

来自官方文档：

> FileAlterationObserver 表示根目录下文件的状态，检查文件系统并通知侦听器创建、更改或删除事件。

以下是如何添加侦听器以定义在此类事件发生时要执行的操作。

> ```
>  File directory = new File(new File("."), "src");
>   FileAlterationObserver observer = new FileAlterationObserver(directory);
>   observer.addListener(...);
>   observer.addListener(...); 
> ```

您必须使用`FileAlterationMonitor`. 从相同的文档继续：

```
 long interval = ...
  FileAlterationMonitor monitor = new FileAlterationMonitor(interval);
  monitor.addObserver(observer);
  monitor.start();
  ...
  monitor.stop(); 
```

`interval`在文件系统检查之间等待的时间量（以毫秒为单位）在哪里。

查找`org.apache.commons.io.monitor`库中命名的包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T09:00:53.653

> 观察者模式是否适合我想要做的事情？（目前我每个文件有一个监听器）

是的，它确实。

> 鉴于要监控的文件不止一个，是否存在“并发问题”的可能性？

如果您有多个线程将侦听器删除并添加到由 an 备份的列表中，`ArrayList`您将面临`ConcurrentModificationException`. 改用 a `CopyOnWriteArrayList`。

IIRC Effective java 有一篇文章，其中包含一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T08:57:46.507

我建议去[NIO](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/package-summary.html)

和 File Watcher 服务 -[观察文件的变化](http://download.oracle.com/javase/tutorial/essential/io/notification.html)

# view - Ember.js：bindAttr 只需要一个布尔值

> ID：14747065
> 
> 赞同：1
> 
> 时间：2013-02-07T08:52:31.250
> 
> 标签：view, ember.js, templatebinding

这是一个简单的[jsfiddle](http://jsfiddle.net/uB5tX/1/)。我正在尝试添加类名 a 和 b，但我得到的是一个空类。例如，如果我将其更改为

```
{{ bindAttr class="str:a:b}} 
```

我得到**一个** 此外，是否也可以添加一些其他（默认）类名？

```
{{ bindAttr class"str className1 className2"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:05:37.917

当然！你的语法有点错误。添加默认类的语法是 only `:className`。[这](http://jsfiddle.net/Deif/nv7y5/7/)是一个简单的 jsfiddle 向您展示。

您的第一行代码实际说明的是，如果 str 为真，则将类“a”分配给元素，否则将类“b”（这就是为什么您只将“a”作为分配的类）。条件类的一个示例在您的 jsfiddle 的更新版本[中](http://jsfiddle.net/Deif/uB5tX/2/)。

# joomla - 如何在 joomla 前端显示后端列表

> ID：14747072
> 
> 赞同：-1
> 
> 时间：2013-02-07T08:53:18.180
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7, joomla1.6

我在我的 joomla 管理面板中制作了一个自定义表单，现在我想知道如何在前端调用该管理表单。除了使用：-

```
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' ); 
```

请告诉我它的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:43:06.360

您绝对需要构建组件的前端，然后在组件的控制器中您可以根据需要实例化后端模型，因此不会有太多的代码重复。

```
JModel::addIncludePath(JPATH_ADMINISTRATOR.'/components/com_yourcomp/tables');
$model = JModel::getInstance('somemodel'); 
```

# ruby-on-rails - ActiveRecord 查询语法

> ID：14747074
> 
> 赞同：0
> 
> 时间：2013-02-07T08:53:17.943
> 
> 标签：ruby-on-rails, rails-activerecord

```
@past_topics = Topic.includes(:user, :event).where("event_id IS NOT NULL "cached_votes_up DESC").page(params[:page]).per(6) 
```

那是我的代码。

如何`event.date < DateTime.now`在条件下添加到此代码`where`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:56:44.517

只需附加它:)

```
@past_topics = ... # your code
@past_topics = @past_topics.where('events.date < ?', DateTime.now) 
```

# model - 获取异常 java.sql.BatchUpdateException：数据截断：列“XXXX”的数据太长

> ID：14747079
> 
> 赞同：1
> 
> 时间：2013-02-07T08:53:54.850
> 
> 标签：model, liferay, portlet, liferay-6, sqlexception

我在 liferay6 中有我的自定义 portlet，在将长数据插入数据库时​​遇到异常`java.sql.BatchUpdateException: Data truncation: Data too long for column 'XXXX' at row 1`

即使我在`portlet-modal-hints`

```
<field name="advurl" type="String">
    <hint name="max-length">4000</hint>
</field> 
```

这是抛出错误的列中的字符串：`http://www.coderanch.com/t/435635/java/java/Regular-expression-check-specific-special`

谁能告诉我为什么这仍然会引发错误？

### 错误堆栈

```
Caused by: com.liferay.portal.kernel.dao.orm.ORMException: org.hibernate.exception.DataException: Could not execute JDBC batch update
    at com.liferay.portal.dao.orm.hibernate.ExceptionTranslator.translate(ExceptionTranslator.java:30)
    at com.liferay.portal.dao.orm.hibernate.SessionImpl.flush(SessionImpl.java:122)
    at com.liferay.portal.kernel.dao.orm.ClassLoaderSession.flush(ClassLoaderSession.java:218)
    at com.liferay.portal.service.persistence.BatchSessionImpl.update(BatchSessionImpl.java:95)
    at com.liferay.portal.service.persistence.BatchSessionUtil.update(BatchSessionUtil.java:50)
    at emenu.advertise.database.service.persistence.advertisePersistenceImpl.updateImpl(advertisePersistenceImpl.java:505)
    ... 178 more
Caused by: org.hibernate.exception.DataException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:102)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at com.liferay.portal.dao.orm.hibernate.SessionImpl.flush(SessionImpl.java:119)
    ... 182 more
Caused by: java.sql.BatchUpdateException: Data truncation: Data too long for column 'advlink' at row 1
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1257)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:943)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 188 more 
```

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:18:54.677

将我的[评论](https://stackoverflow.com/questions/14747079/getting-exception-java-sql-batchupdateexception-data-truncation-data-too-long#comment20637488_14747079)转换为答案以解决此问题:-)

您应该在`portal-model-hints.xml`文件更改后重建服务。

然后您应该重新部署插件 portlet 以使更改生效。

因此，请在执行上述步骤后检查数据库列是否已更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:04:26.787

当您使用 service.xml 创建的表（字段长度）与您提交的不同时，会出现此错误。

您可以尝试使用属性 maxlength="4000" 限制您的文本框或文本区域，这不会让您发布超过 4000 个字。

# php - 将mysql结果行拆分为列，php

> ID：14747081
> 
> 赞同：2
> 
> 时间：2013-02-07T08:54:00.003
> 
> 标签：php, html, mysql

**mysql表**

```
--work table--                                               --crew table--

date           |   hours                                     date   |    name   
2013-02-03(Sun)     8                                    2013-02-03     john
2013-02-04(Mon)     7                                    2013-02-03     sam 
                                                         2013-02-03     peter
                                                         2013-02-04     john
                                                         2013-02-04     sam 
```

**询问**

```
SELECT hours, name, DAYNAME(work.date) day
FROM work 
LEFT JOIN crew ON work.date = crew.date
WHERE WEEK(work.date) = 5 
```

**结果**

```
hours    name    day
  8      John   Sunday
  8      Sam    Sunday
  8      Peter  Sunday
  7      John   Monday
  7      Sam    Monday 
```

**现在像这样在html中格式化，如何？**

```
Name    Sunday   Monday  Tuesday..(day name can be written in html)
 John      8        7       ...
 Sam       8        7       ...
 Peter     8        -       ... 
```

**伪代码**

```
<?php foreach($result as $r): ?>
     <tr>
         <td>
            <?php echo $r->name; ?>
         </td>
         <td>
            <?php echo $r->hours on Monday; ?>
         </td>
         <td>
            <?php echo $r->hours on Tuesday; ?>
         </td>
         <td>
            <?php echo $r->hours on Wednesday; ?>
         </td>     
         ..
         ..       
     </tr>       
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:12:47.257

您可以这样提出您的查询：

```
SELECT 
    SUM(IF(DATE_FORMAT(work.date, "%w") = 0), hours, 0) as Sunday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 1), hours, 0) as Monday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 2), hours, 0) as Tuesday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 3), hours, 0) as Wednesday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 4), hours, 0) as Thursday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 5), hours, 0) as Friday,
    SUM(IF(DATE_FORMAT(work.date, "%w") = 6), hours, 0) as Saturday,
    name
FROM work 
LEFT JOIN crew 
ON work.date = crew.date
WHERE WEEK(work.date) = 5
GROUP BY name 
```

然后你的 php 看起来像这样：

```
<?php foreach($result as $r): ?>
     <tr>
         <td>
            <?php echo $r->name; ?>
         </td>
         <td>
            <?php echo $r->Monday; ?>
         </td>
         <td>
            <?php echo $r->Tuesday; ?>
         </td>
         <td>
            <?php echo $r->Wednesday; ?>
         </td>     
         ..
         ..       
     </tr>       
<?php endforeach; ?> 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:20:24.283

这提供了预期的结果：

```
SELECT name,
   SUM(if(DAYOFWEEK(w.date)=1,hours,0)) AS 'Sunday',
   SUM(if(DAYOFWEEK(w.date)=2,hours,0)) AS 'Monday',
   SUM(if(DAYOFWEEK(w.date)=3,hours,0)) AS 'Tuesday'
FROM Crew c,
WORK w
WHERE c.date = w.date
GROUP BY Name; 
```

# android - Mono for Android LocationManager 异常关闭通道

> ID：14747084
> 
> 赞同：1
> 
> 时间：2013-02-07T08:54:06.413
> 
> 标签：android, mono, gps

我正在调试一个因 GPS 问题而失败的应用程序。

我已经尝试了标准的 GetLocation 示例，但我收到了同样的错误。

[http://docs.xamarin.com/android/Recipes/OS%2F%2FDevice_Resources/GPS/Get_Current_Device_Location](http://docs.xamarin.com/android/Recipes/OS%2F%2FDevice_Resources/GPS/Get_Current_Device_Location)

应用程序关闭，应用程序输出窗口显示以下内容：

使用全球定位系统。使用 gps 监听位置更新。频道“40745d58 GetLocation.GetLocation/com.xamarin.recipes.getlocation.Activity1（客户端）”~发布者关闭输入频道或发生错误。事件=0x8

我正在模拟器中对此进行测试。我已允许清单中的所有位置权限，FINE、COARSE 和 MOCK。

我通过telnet在模拟器中设置了一个模拟位置，但应用程序在几秒钟后就死了。

模拟器然后挂起显示“ANDROID”屏幕，我需要关闭并重新打开它才能让它再次响应。

模拟器选择了 GPS 硬件，并且运行的是 Android 2.3

有任何想法吗 ？

# xml - 来自 VB.net 中属性的 XML 节点值

> ID：14747094
> 
> 赞同：5
> 
> 时间：2013-02-07T08:54:49.357
> 
> 标签：xml, vb.net, xmlnode, xml-attribute

我有一个类似的 XML

```
<Categories>
    <category name="a">
        <SubCategory>1</SubCategory>
        <SubCategoryName>name1</SubCategoryName>
    </category>
    <category name="b">
        <SubCategory>2</SubCategory>
        <SubCategoryName>name2</SubCategoryName>
    </category>
</Categories> 
```

我如何获得`<SubCategoryName>`from的值`<category name="a">`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:30:40.010

正如 Usman 所推荐的，您可以使用 LINQ，但另一个流行的选项是使用 XPath。您可以使用 XPath 来选择使用`XDocument`类或旧`XmlDocument`类的匹配元素。

以下是通过`XDocument`类使用 XPath 的方法：

```
Dim doc As New XDocument()
doc.Load(filePath)
Dim name As String = doc.XPathSelectElement("/Categories/category[@name='a']/SubCategoryName").Value 
```

以下是通过`XmlDocument`类使用 XPath 的方法：

```
Dim doc As New XmlDocument()
doc.Load(filePath)
Dim name As String = doc.SelectSingleNode("/Categories/category[@name='a']/SubCategoryName").InnerText 
```

以下是 XPath 各部分的含义：

*   `/Categories`- 开头的斜线指示它查看 XML 文档的根。斜线后面是我们在根中查找的子元素的名称。
*   `/category`- 我们在元素中寻找的`/Categories`元素的名称。
*   `[@name='a']`- 方括号表示它是一种条件——类似于和`If`语句。@ 符号表示我们正在指定一个属性名称（而不是元素名称）。
*   `/SubCategoryName``category`- 我们在匹配该条件的元素中查找的子元素的名称。

XPath 非常强大和灵活。XPath 是一种标准查询语言，许多 XML 工具和技术（例如 XSLT）都使用它，因此学习它非常有用。此外，有时，即使在文档中，能够通过简单的字符串专门引用文档中的特定 XML 节点也很方便。LINQ 很棒，但它是一项专有的 Microsoft 技术，如果需要，您不能将 LINQ 路径作为字符串存储在数据库或配置文件中，因此有时 XPath 是一种更可取的方法。

XPath 的另一个变体是`//category[@name='a']/SubCategoryName`. 开头的双斜线指示它在文档中的任何位置查找类别元素，而不是在任何特定的父元素下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:17:14.527

简单点怎么样

```
Dim xml = <Categories> 
                <category name="a"> 
                    <SubCategory>1</SubCategory> 
                    <SubCategoryName>name1</SubCategoryName> 
                </category> 
                <category name="b"> 
                    <SubCategory>2</SubCategory> 
                    <SubCategoryName>name2</SubCategoryName> 
                </category> 
               </Categories>

Dim result = xml.<category> _
                .First(Function(e) e.Attribute("name") = "a") _
                .<SubCategoryName>.Value 
```

`result`现在是`name1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:34:46.540

您可以将其用作

```
 Dim doc As XDocument = XDocument.Load("YourXMLFileName")
 Dim query = From d In doc.Descendants("Categories").Elements("category")
                Where d.Attribute("name").Value = "a"
                Select d.Element("SubCategoryName").Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:40:18.607

你可以这样做：

```
Dim aux As New Xml.XmlDocument()
Dim nodeLst As Xml.XmlNodeList
Dim sResult As String = String.Empty

aux.Load(sXmlFilePath)
nodeLst = aux.GetElementsByTagName("category")

For Each cat As Xml.XmlElement In nodeLst
    If cat.GetAttribute("name") = "a" Then
        sResult = cat("SubCategoryName").Value
        Exit For
    End If
Next 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-04T11:24:56.043

代码很好，而不是

`sResult = cat("SubCategoryName").Value`

采用

`sResult = cat("SubCategoryName").InnerText`

# c# - 创建对象的最佳方法

> ID：14747095
> 
> 赞同：25
> 
> 时间：2013-02-07T08:54:55.187
> 
> 标签：c#, .net, oop, constructor, instance

这似乎是一个非常愚蠢和基本的问题，但我试图用谷歌搜索它，但找不到满意的答案，

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public Person(){}
    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
    //Other properties, methods, events...
} 
```

我的问题是，如果我有这样的课程，创建对象的最佳方法是什么？

```
Person p=new Person("abc",15) 
```

**或者**

```
Person p=new Person();
p.Name="abc";
p.Age=15; 
```

这两种方法有什么区别，创建对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-07T17:24:24.253

决定是否需要*不可变*对象。

如果您将`public`属性放入您的类中，则每个实例的状态都可以在您的代码中随时更改。所以你的班级可能是这样的：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public Person(){}
    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
    //Other properties, methods, events...
} 
```

在这种情况下，拥有一个`Person(string name, int age)`构造函数就没那么有用了。

第二种选择是实现*不可变*类型。例如：

```
public class Person
{
    public string Name { get; private set; }
    public int Age { get; private set; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
    //Other properties, methods, events...
} 
```

现在您有一个构造函数，它在创建时设置实例的状态，*一次*。请注意，现在属性的设置器是`private`，因此您无法在实例化对象后更改状态。

一个最佳实践是尽可能每次都将类定义为不可变的。要了解不可变类的优点，我建议您阅读这篇[文章](http://codebetter.com/patricksmacchia/2008/01/13/immutable-types-understand-them-and-use-them/)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T09:02:53.790

确实取决于您的要求，尽管最近我看到了至少定义了一个裸构造函数的类的趋势。

通过构造函数发布参数的好处是您知道在实例化后可以依赖这些值。不利的一面是，您需要对任何希望能够使用裸构造函数创建对象的库进行更多工作。

我个人的偏好是使用裸构造函数并将任何属性设置为声明的一部分。

```
Person p=new Person()
{
   Name = "Han Solo",
   Age = 39
}; 
```

这解决了“类缺少裸构造函数”的问题，并且减少了维护（我可以在不更改构造函数的情况下设置更多东西）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-07T08:59:29.813

真的没有最好的办法。两者完全相同，除非您想在初始化期间使用传递给构造函数的参数进行一些额外的处理，或者如果您想在调用构造函数后确保状态一致。如果是这种情况，请选择第一个。

但是出于可读性/可维护性的原因，请避免创建具有太多参数的构造函数。

在这种情况下，两者都可以。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-07T11:31:54.110

在我看来，这只是决定参数是否可选的问题。如果没有 Name 和 Age 的 Person 对象不应该（逻辑上）存在，那么它们应该在构造函数中是强制性的。如果它们是可选的（即它们的缺失不会对对象的良好功能造成威胁），请使用设置器。

这是 Symfony 的关于构造函数注入的文档的引用：

> 使用构造函数注入有几个优点：
> 
> *   如果依赖项是必需的，并且没有它类就无法工作，那么通过构造函数注入它可以确保在使用类时它存在，因为没有它就无法构造类。
> *   构造函数只在创建对象时被调用一次，因此您可以确定在对象的生命周期内依赖关系不会改变。
> 
> 这些优点确实意味着构造函数注入不适合处理可选依赖项。与类层次结构结合使用也更加困难：如果一个类使用构造函数注入，那么扩展它并覆盖构造函数就会有问题。

（Symfony 是最流行和最受尊敬的 php 框架之一）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-07T09:04:04.970

如果您认为更少的代码意味着更高的效率，那么使用构造函数会更好。您还可以使用如下代码：

```
Person p=new Person(){
Name='abc',
Age=15
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-08T20:45:33.870

怎么样

```
var obj = new {ID = 1, Price = 2}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-11T11:06:28.043

或者，您可以使用数据文件将许多人员对象放入列表或数组中。您确实需要为此使用 System.IO。并且您需要一个包含有关对象的所有信息的数据文件。

它的方法如下所示：

```
static void ReadFile()
{
    using(StreamWriter writer = new StreamWriter(@"Data.csv"))
    {
        string line = null;
        line = reader.ReadLine();
        while(null!= (line = reader.ReadLine())
                {
                    string[] values = line.Split(',');
                    string name = values[0];
                    int age = int.Parse(values[1]);
                }
        Person person = new Person(name, age);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-06T07:21:51.300

取决于您的要求，但最有效的创建方法是：

```
 Product obj = new Product
            {
                ID = 21,
                Price = 200,
                Category = "XY",
                Name = "SKR",
            }; 
```

# android - 如何动态更改按钮的宽度

> ID：14747097
> 
> 赞同：1
> 
> 时间：2013-02-07T08:55:00.057
> 
> 标签：android

我有一个创建几个按钮的方法

```
public Button[] generaBottoniRisposta(int numeroBottoni, Context context){  
    Button bottoni[]= new Button[numeroBottoni];

    /*genero un tot di bottoni in base a numeroBottoni, è necessario avere il context*/
    for(int i=0; i < bottoni.length;i++){           
            bottoni[i] = new Button(context);
            bottoni[i].setId(i);
            bottoni[i].setText(String.valueOf(i+1));
            LayoutParams param = new LinearLayout.LayoutParams(50, 50);
            bottoni[i].setLayoutParams(param);          
        }

    return  bottoni;
    } 
```

然后是另一种将它们添加到网格布局的方法。

我想设置这些按钮的宽度，但我做不到。

我尝试了很多东西`setWidth()`，，，`setMaxWidth()`等等`invalidate()`。

奇怪的事情发生了。如果我尝试使按钮大于其默认大小，则它可以工作，如果我尝试使按钮小于其默认大小，则它不起作用！

我应该怎么做？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:58:37.077

尝试使用`LayoutParams`，类似..

```
RelativeLayout.LayoutParams rel_bottone = new RelativeLayout.LayoutParams(buttonWidth, buttonHeight);
button.setLayoutParams(rel_bottone); 
```

并且布局取决于包含按钮的父布局..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:00:10.187

我认为 setlayoutparams 应该做你想做的。就像在这个线程中的答案一样。 [以编程方式设置视图宽度](https://stackoverflow.com/questions/12343376/set-view-width-programmatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:01:33.417

试试这个：

```
LinearLayout.LayoutParams params = button.getLayoutParams();
params.width = 100;
button.setLayoutParams(params); 
```

当父级是LinearLayout 时使用LinearLayout.LayoutParams，而父级是RelativeLayout 时使用RelativeLayout.LayoutParams。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:03:04.953

尝试这样的事情：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(width, height);
button.setLayoutParams(params); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:54:39.503

我的按钮在网格布局内。我尝试使用 GridLayout.LayoutParams 给出单元格的宽度，而不是尝试设置按钮的宽度，现在它似乎可以工作了。

这是我用来将按钮添加到 GridLayout 的代码

```
Spec row = GridLayout.spec(numeroRiga, 1); 
            Spec colspan = GridLayout.spec(numeroColonna, 1);
            GridLayout.LayoutParams gridLayoutParam = new GridLayout.LayoutParams(row,colspan);
            gridLayoutParam.width=50;
            gridLayoutParam.height=50;

gridLayout.addView(button,gridLayoutParam); 
```

但我想知道是否可以以类似的方式设置按钮的宽度。

# lucene - 在 Elasticsearch 索引中包含相关实体的列表

> ID：14747099
> 
> 赞同：0
> 
> 时间：2013-02-07T08:55:06.340
> 
> 标签：lucene, playframework, elasticsearch, playframework-1.x

使用 elasticsearch 模块，是否有可能以某种方式索引相关集合的结果，该集合是延迟加载的？

我有一个模型类型 Book，它有很多作者，它们是延迟加载的

如果我将作者列表注释为 @ElasticSearchEmbedded，则会收到以下异常：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: models.Book.authors, no session or session was closed 
```

如果我将其标记为忽略，当然一切都很好。有没有办法至少在图书索引中获取作者的姓名？

# liferay - Liferay 门户的通用网格视图

> ID：14747107
> 
> 赞同：1
> 
> 时间：2013-02-07T08:55:38.860
> 
> 标签：liferay, portlet, composite

希望你一切都好。

这是我的场景。我有多个 (20+) Liferay portlet，它们使用网格/表格来显示数据。

每个 portlet 根据不同的标准检索数据。

但是，网格与一些常用功能相同，例如过滤、分页、数据导出等。

目前，每次我们必须对网格样式进行更改时，我都必须对 20 多个 portlet 中的每一个进行更改。这确实效率低下，并导致大量时间浪费。

因此，我想知道是否可以创建一个通用的“portlet”或“ [composite](http://examples.roughian.com/index.htm#Widgets~Composite) ”，以便它可以显示来自多个 portlet 的数据？详细地说，通用 portlet/composite 将包含网格、过滤、分页、导出等特性。

这个通用的 portlet/composite 将从各种 portlet 接收数据并简单地显示它。

因此，如果我需要对网格样式进行任何更改，只需在一个地方进行更改就足够了。

有没有人经历过这样的场景？

你有什么解决办法吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:33:54.100

如果您只需要按不同标准检索数据，具有导出数据、打印、分页等功能，则不需要 20 多个不同的 portlet，您可以使用一个 portlet 并拥有 20 多个 it 实例，每个实例都将配置为 enable.export , enable.print, data.criteria 等等。在 portlet 内部，您的逻辑将构建您需要的网格和数据。

如果您真的需要通用 Portlet，您可以尝试将所有 20 多个 Portlet 放在一个 .war 中。您只需包含在某些 portlet、扩展控制器等中常见的 jsp。

甚至更多... 如果您需要在 portlet 之间发送数据，您可以创建 javascript 控制器，通过 Ajax 获取数据并填写您的 jsps（在这种情况下，您可以使用一些模板）。请询问是否有不清楚的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T00:55:59.200

最好的解决方案是使用一个 portlet 来检索所有数据，并使用一个接口和不同的实现来概括数据检索——而不是使用不同的 portlet。

您可以尝试使用 Liferay 的 Interportlet Communication 工具将数据从源 portlet 提供给目标 portlet - [http://www.liferay.com/community/wiki/-/wiki/Main/Inter-portlet+communication](http://www.liferay.com/community/wiki/-/wiki/Main/Inter-portlet+communication)

但它有它自己的警告 - 您要么必须使用 AJAX 或 JS 事件在浏览器中提交数据，要么必须使用在服务器端工作的 JSR-286 (Portlets 2.0) 事件，但需要一个触发动作为了使事件发生（即打开带有操作 URL 而不是呈现 URL 的 portlet）。更多信息在这里 - [http://www.liferay.com/community/wiki/-/wiki/Main/Portlet+to+Portlet+Communication](http://www.liferay.com/community/wiki/-/wiki/Main/Portlet+to+Portlet+Communication)

# sorting - 在猫鼬聚合框架中按日期排序

> ID：14747108
> 
> 赞同：12
> 
> 时间：2013-02-07T08:55:41.603
> 
> 标签：sorting, mongoose, aggregation-framework

我正在使用 mongoose 开发 nodejs+mongodb 项目。现在我遇到了一个我不知道答案的问题。我正在使用聚合框架来获得分组结果。分组是在不包括时间数据字段的日期上完成的，例如：“2013 02 06”。代码如下所示：

```
MyModel.aggregate([
            {$match: {$and: [{created_date: {$gte: start_date}}, {created_date: {$lte: end_date}}]}},
            {$group: {
                _id: {
                    year: {$year: "$created_at"},
                    month: {$month: "$created_at"},
                    day: {$dayOfMonth: "$created_at"}
                },
                count: {$sum: 1}
            }},
            {$project: {
                date: {
                        year: "$_id.year",
                        month:"$_id.month",
                        day:"$_id.day"
                },
                count: 1,
                _id: 0
            }}
        ], callback); 
```

分组的结果是完美的，只是它们没有排序。这是一个输出示例：

```
[
    {
        count: 1,
        date: {
            year: 2013,
            month: 2,
            day: 7
        }
    },
    {
        count: 1906,
        date: {
            year: 2013,
            month: 2,
            day: 4
        }
    },
    {
        count: 1580,
        date: {
            year: 2013,
            month: 2,
            day: 5
        }
    },
    {
        count: 640,
        date: {
            year: 2013,
            month: 2,
            day: 6
        }
    }
] 
```

我知道排序是通过添加这个来完成的：`{$sort: val}`. 但是现在我不确定应该是什么，`val`所以结果将按日期排序，因为我的分组键是一个构造日期的 3 个值的对象。有谁知道如何做到这一点？

**编辑** 已经尝试过了，它奏效了:)

`{$sort: {"date.year":1, "date.month":1, "date.day":1}}`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T16:33:46.400

看来这个问题有一个非常简单的答案:) 只需要像这样按多个嵌套列排序：

```
{$sort: {"date.year":1, "date.month":1, "date.day":1}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-29T20:20:09.837

我遇到了同样的问题，谢谢你的回答。但我发现你可以用更少的代码得到相同的结果

```
MyModel.aggregate([
            {$match: {$and: [{created_date: {$gte: start_date}}, {created_date: {$lte: end_date}}]}},
            {$group: {
                _id: {
                    year: {$year: "$created_at"},
                    month: {$month: "$created_at"},
                    day: {$dayOfMonth: "$created_at"}
                },
                count: {$sum: 1}
            }},
            {$project: {
                date: "$_id", // so this is the shorter way
                count: 1,
                _id: 0
            }},
            {$sort: {"date": 1} } // and this will sort based on your date
        ], callback); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-14T19:24:20.153

如果您仅在有其他列要排序的情况下按日期排序，这将起作用。你需要扩展 _id

# angularjs - 如何调试 AngularJS 中的类型转换错误？

> ID：14747115
> 
> 赞同：5
> 
> 时间：2013-02-07T08:56:03.037
> 
> 标签：angularjs

我是一个 JavaScript 菜鸟，正在尝试学习 Angular。

我有一些像这样的简单 angularJS 代码：

```
<div ng-controller="todoController">
    <span> temp = {{tempVal()}} </span>
</div> 
```

**这个错误很简单**，tempVal 是一个字符串，而不是一个方法。

***我的问题（和问题）是，我如何在调试时发现这个事实？***

我正在使用 Chrome 并安装了 Batarang 扩展，但我得到的只是一个神秘的堆栈跟踪：

```
TypeError: string is not a function
at http://localhost:6202/lib/angular-1.0.4/angular.js:6213:13
at Object.$interpolate.fn (http://localhost:6202/lib/angular-1.0.4/angular.js:4829:22)
at Object.watchExpression (http://localhost:6202/AddSomeControl/index.html:416:29)
at Object.Scope.$digest (http://localhost:6202/lib/angular-1.0.4/angular.js:7783:38)
at Object.Scope.$apply (http://localhost:6202/lib/angular-1.0.4/angular.js:7991:24)
at Object.$delegate.__proto__.$apply (http://localhost:6202/AddSomeControl/index.html:500:30)
at http://localhost:6202/lib/angular-1.0.4/angular.js:932:13
at Object.invoke (http://localhost:6202/lib/angular-1.0.4/angular.js:2813:25)
at bootstrap (http://localhost:6202/lib/angular-1.0.4/angular.js:930:12)
at angularInit (http://localhost:6202/lib/angular-1.0.4/angular.js:906:5) angular.js:5601 
```

我一直试图弄清楚如何在复杂的应用程序中使用这些工具，我会发现错误出现在**tempVal()**行附近。

我尝试在记录错误并查找调用堆栈时设置一个断点，并在 $get.Scope.$digest 中看到一个捕获的异常，它可能会告诉我父作用域 id (this.target.$id)，连同什么“观察者”（this.length）一起崩溃了，之前完成的html元素（this.value）....这是最好的方法吗？多么痛苦:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T03:16:05.130

不幸的是，答案是您无法调试此类错误。

好吧，你可以，它被称为“学习角度编译器/虚拟机并调试它”

这些类型的使用错误没有开发用户友好的包装。

# jquery - 上传图片jquery前的图片预览

> ID：14747116
> 
> 赞同：1
> 
> 时间：2013-02-07T08:56:11.253
> 
> 标签：jquery, html

有什么方法可以在 IE 中实现 fileReader()。我搜索了很多，但没有找到任何解决方案。这是我试图实现它的代码。它在 Firefox 和 chrome 中运行良好，但在 IE8 和 IE9 中无法正常工作。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#img_prev')
                        .attr('src', e.target.result)
                        .width(150)
                        .height(200);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
        </script>

        <meta charset=utf-8 />
        <title>JS Bin</title>
        <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <style>
        article, aside, figure, footer, header, hgroup,
        menu, nav, section { display: block; }
        </style>
    </head>
    <body>
        <input type='file' onchange="readURL(this);" />
        <img id="img_prev" src="#" alt="your image" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:57:34.797

是的，我只有一个解决方案。IE 9 不支持文件阅读器，因此我们可以为其他浏览器禁用文件阅读器的图像预览，它将完美运行。

# java - 如何在调用handleMessage之前更正响应XML + java web services

> ID：14747118
> 
> 赞同：0
> 
> 时间：2013-02-07T08:56:13.223
> 
> 标签：java, web-services

我总是收到异常：MessageCreationException：由于异常而无法创建 SOAP 消息：XML 阅读器错误：javax.xml.stream.XMLStreamException：ParseError at [row,col]:[1,1] 消息：内容不允许序言。我猜传入的 xml 包含无效的 xmlchars，所以我想在调用 handleMEssage 方法之前更正它。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:01:42.160

您可以使用[SOAP 消息处理程序](http://docs.oracle.com/javaee/5/api/javax/xml/ws/handler/soap/SOAPHandler.html)

正如[这里](http://www.mkyong.com/webservices/jax-ws/jax-ws-soap-handler-in-client-side/)和[这里所解释的](http://java.dzone.com/articles/creating-soap-message-handlers)

# firefox - 输入类型范围 Firefox (bug)

> ID：14747121
> 
> 赞同：1
> 
> 时间：2013-02-07T08:56:18.140
> 
> 标签：firefox, input, range

Firefox 中是否会有输入类型范围的垂直实现？有人知道这个ussue的状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:06:27.443

输入类型范围的本机实现确实支持旋转滑块。这有望随 Firefox 22（现在在 Nightly 中）一起提供。您可以使用鼠标向上/向下拖动它或使用向上/向下箭头键。

使用 Nightly 构建，看看[http://jsbin.com/ihifev/1/edit](http://jsbin.com/ihifev/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:59:27.847

```
input[type='range']{        
    width:20px;
    height:140px;
    border:2px solid blue;
    display:block;
    -webkit-transform:rotate(90deg); /* Safari and Chrome */        
    -moz-transform:rotate(90deg);
    -o-transform:rotate(90deg);
    -ms-transform:rotate(90deg);
    transform:rotate(90deg);
    z-index: 0; 
} 
```

随心所欲地旋转。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T09:46:58.527

mozilla 不支持范围输入，您可以使用[http://frankyan.com/labs/html5slider/htnl5.js](http://frankyan.com/labs/html5slider/) [。](http://frankyan.com/labs/html5slider/)它适用于所有主要浏览器。

# c# - ConfigurationSection 中的自定义 IEnumerable

> ID：14747123
> 
> 赞同：0
> 
> 时间：2013-02-07T08:56:25.690
> 
> 标签：c#, configuration, app-config

我需要创建一个简单的自定义 ConfigurationSection，其中包含一个 IEnumerable。

我已经阅读了几篇文章和stackoverflow链接，以此为例： [如何在app.config中创建自定义配置部分？](https://stackoverflow.com/questions/1316058/how-to-create-custom-config-section-in-app-config)

所以，我在控制台应用程序中有这个配置文件部分：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="Disk"
             type="ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection"/>
  </configSections>
  <Disk>
    <Paths>
      <Path name="one" permission="1" />
      <Path name="two" permission="2" />
      <Path name="three" permission="3" />
    </Paths>
  </Disk>
</configuration> 
```

接下来我有整个结构来管理配置部分： using System.Configuration;

```
namespace ConsoleApplication1_ConfigurationEnumerable
{
    public class Path: ConfigurationElement
    {
        [ConfigurationProperty("name", IsRequired = true)]
        public string Name
        {
            get
            {
                return (string)this["name"];
            }
        }

        [ConfigurationProperty("permission", IsRequired=true)]
        public string Permission
        {
            get
            {
                return (string)this["permission"];
            }
        }
    }    

    public class Paths: ConfigurationElementCollection 
    {
        public Path this[int index] 
        {
            get
            {
                return base.BaseGet(index) as Path;
            }
            set 
            {
                if (base.BaseGet(index) != null) {
                    base.BaseRemoveAt(index);
                }
                this.BaseAdd(index, value);
            }
        }

        protected override ConfigurationElement CreateNewElement() 
        {
            return new Path();
        }
        protected override object  GetElementKey(ConfigurationElement element)
        {
            return ((Path)element).Name;
        }
    }

    public class PathsConfigSection : ConfigurationSection
    {
        public static PathsConfigSection GetConfig()
        {
            //return (PathsConfigSection)System.Configuration.ConfigurationManager.GetSection("Disk") ?? new PathsConfigSection();
            return (PathsConfigSection)System.Configuration.ConfigurationManager.GetSection("Paths") ?? new PathsConfigSection();
        }

        [ConfigurationProperty("Paths")]
        public Paths Paths
        {
            get 
            {
                object o = this["Paths"];
                return o as Paths;
            }
        }
    }
} 
```

在这里，program.cs 使用了整个东西： using System;

```
namespace ConsoleApplication1_ConfigurationEnumerable
{
    class Program
    {
        static void Main(string[] args)
        {
            var config = PathsConfigSection.GetConfig();
            if (config == null || config.Paths.Count == 0)
            {
                Console.WriteLine("Is null or empty");
            }
            else
            {
                foreach (Path item in config.Paths)
                {
                    Console.WriteLine("Item {0} with valuer {1}", item.Name, item.Permission);
                }
            }
        }
    }
} 
```

这里的问题在于这两行：

```
//return (PathsConfigSection)System.Configuration
//       .ConfigurationManager.GetSection("Disk") ?? new PathsConfigSection();
return (PathsConfigSection)System.Configuration
       .ConfigurationManager.GetSection("Paths") ?? new PathsConfigSection(); 
```

如果我使用第二个（上面未注释），它将返回 null。

如果我使用注释过的，那么它会引发如下异常：

> System.Configuration.ConfigurationErrorsException 未处理
> HResult=-2146232062 消息=为磁盘创建配置节处理程序时出错：无法从程序集“System.Configuration，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”加载类型“ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection”。（C:\Users\blackberry\Desktop\ConsoleApplication1_ConfigurationEnumerable\ConsoleApplication1_ConfigurationEnumerable\bin\Debug\ConsoleApplication1_ConfigurationEnumerable.vshost.exe.config 第 4 行） Source=System.Configuration BareMessage=为磁盘创建配置节处理程序时出错：无法加载类型来自程序集“System.Configuration，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”的“ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection”。
> ThreadStart_Context(Object state) at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System。 System.Threading.ThreadHelper.ThreadStart() InnerException 处的 Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）：System.TypeLoadException HResult=-2146233054 消息=无法从程序集“System.配置，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a'。源=系统。

我的错在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T08:57:59.380

在标签中指定类时，您需要使用[完全限定的程序集名称：](http://msdn.microsoft.com/en-us/library/k8xx4k69.aspx)`configSections`

```
<configSections>
  <section name="Disk"
           type="ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection, ConsoleApplication1"/>
</configSections> 
```

这假定您的程序集的名称是`ConsoleApplication1`. 如果您仍然遇到异常，您可以使用以下代码确定正确的值：

```
typeof(ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection).FullName
                                                                      .ToString() 
```

顺便说一句：您的命名空间很奇怪。命名标准建议您`.`在分隔命名空间层次结构时使用点 ()：

```
namespace ConsoleApplication1.ConfigurationEnumerable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:00:20.057

我认为你应该使用第一行（注释掉的那一行）。问题`<section>`出在配置文件中的元素中。按照丹尼尔的回答，看看应该是什么样子。

# javascript - 是否可以为不同的 Ecma 脚本版本测试 Javascript 代码？

> ID：14747126
> 
> 赞同：1
> 
> 时间：2013-02-07T08:56:39.913
> 
> 标签：javascript, html, ecmascript-5, ecmascript-4

我想要实现的是测试一段 javascript 代码，我必须看看它在不同版本的 Ecmascript 上的行为。

我可以在某种工具中切换版本并测试代码并查看其行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:19:23.997

我无法想象除了[EcmaScript 5](http://es5.github.com)或[EcmaScript 3](http://bclary.com/2004/11/07/)现在或未来几年还有什么相关的。所以这些是你唯一想要测试的。

好吧，也许即将推出[的 EcmaScript 6](http://people.mozilla.org/~jorendorff/es6-draft.html)也会慢慢开始[进入](http://kangax.github.com/es5-compat-table/es6/)尖端浏览器。

在大多数现代引擎中，在这一点上，ES3 也几乎完全被 ES5 取代。ES3 一致性被牺牲为 ES5 一致性，这使得 ES3 一致性几乎无关紧要。

对于 ES5，有谷歌的[sputniktests](https://code.google.com/p/sputniktests/)套件，它（afaik）被官方[test262](http://test262.ecmascript.org/default.html)取代。

据我所知，目前没有 ES6。我维护着[兼容性表](http://kangax.github.com/es5-compat-table/es6/)，但这只是简单的存在测试的集合，无论如何都不是完全一致的。

# javascript - 需要了解 Javascript Array.sort() 函数

> ID：14747130
> 
> 赞同：1
> 
> 时间：2013-02-07T08:56:47.730
> 
> 标签：javascript, arrays, sorting

这可能是一个非常基本的问题，但我无法理解，所以请帮助我了解 Javascript 的 Array.sort() 函数是如何在这里工作的。我需要了解代码的空运行：

```
var x = new Array(5,4,3,78,7,66,5,444,7,8,9,33,4,5,666,1);
console.log("Before = "+ x);
x.sort(
function(a, b){
    var m = a-b;
        console.log(a+" - "+b+" = "+m);
        return m;
    }
);
console.log("After = "+ x); 
```

当我运行上面的代码时，我发现输出如下：（这里是几行输出）

```
5 - 1 = 4 
1 - 7 = -6 
5 - 7 = -2 
3 - 5 = -2 
78 - 5 = 73 
666 - 5 = 661
etc.... 
```

最后它按升序打印排序后的数组：

```
After = 1,3,4,4,5,5,5,7,7,8,9,33,66,78,444,666 
```

请让我知道它是如何获取“a”和“b”的值以及它是如何进行所有操作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:58:51.967

有各种各样的排序算法，但所有（可能只是大多数）都需要一种比较两个元素的方法。

大多数语言中的比较函数都是这样工作的。当返回值为正时，第二个值较小，当返回值为负时，第一个值较小。如果为零，则它们是相同的。

Javascript 使用的实际排序算法可能因实现而异，它可能在一个实现甚至一种排序中使用多种不同的算法。

另请参阅[Javascript Array.sort 实现？](https://stackoverflow.com/questions/234683/javascript-array-sort-implementation)

# outlook - 在电子邮件正文中创建一个按钮以将信息发送回电子邮件的发件人

> ID：14747135
> 
> 赞同：0
> 
> 时间：2013-02-07T08:57:02.867
> 
> 标签：outlook, outlook-addin, outlook-2007

我最近开始使用 MS Outlook 2007，但无法理解如何实现特定的东西。切入正题，这就是我想知道的：
如何创建/存储控件或视觉元素，例如按钮、文本框等？
我怎么能允许收到电子邮件的人在电子邮件内的文本框中输入信息，然后在电子邮件内，本地存储来自文本框控件的数据，以便可以编辑和返回？
当此人单击电子邮件中的某些内容时，我怎么能收到电子邮件？
这样的事情甚至可能吗？谢谢你给我一个机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:37:09.110

Outlook 不会在 HTML 电子邮件中运行脚本。表格也是禁忌。

# c# - WPF 组合框项模板覆盖切换按钮样式

> ID：14747136
> 
> 赞同：0
> 
> 时间：2013-02-07T08:57:06.307
> 
> 标签：c#, wpf, combobox, styles

我对组合框的切换按钮进行样式设置有问题。我的组合框 xaml 代码如下所示：

```
<ComboBox Width="Auto"
      HorizontalContentAlignment="Stretch"
      FontFamily="HelveticaNeue-Bold"
      FontSize="20"
      FontWeight="Bold"
      Foreground="#FFC0C0C0"
      Padding="0,0,0,0"
      Style="{DynamicResource navigationComboBox}"
      ItemsSource="{Binding Tournaments}"
      SelectedValue="{Binding SelectedTournament}">
<ComboBox.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
</ComboBox.Resources>
<ComboBox.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapPanel IsItemsHost="True" 
                    Orientation="Vertical" 
                    Width="auto"
                    Height="{Binding Tournaments, Converter={StaticResource CollectionToHeightConverter}}"/>
    </ItemsPanelTemplate>
</ComboBox.ItemsPanel>
<ComboBox.ItemTemplate>
    <DataTemplate>
        <DockPanel x:Name="comboDock">
            <DockPanel.Background>
                <ImageBrush ImageSource="{Binding Converter={StaticResource ImagePathConverter}, ConverterParameter=comboboxitem-line.png}" />
            </DockPanel.Background>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="41" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <DockPanel x:Name="comboArrow"
                            Grid.Column="0"
                            Visibility="Collapsed">
                    <DockPanel.Background>
                        <ImageBrush ImageSource="{Binding Converter={StaticResource ImagePathConverter}, ConverterParameter=SportsSubMenuActive.png}" />
                    </DockPanel.Background>
                </DockPanel>
                <TextBlock x:Name="comboText"
                            Grid.Column="1"
                            FontFamily="HelveticaNeue-Bold"
                            FontSize="20"
                            FontWeight="Bold"
                            Foreground="#FFC0C0C0"
                            Padding="0,0,10,0"
                            Text="{Binding Path=Name}"
                            TextAlignment="Left"
                            TextWrapping="Wrap" />
            </Grid>
        </DockPanel>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="True">
                <Setter TargetName="comboArrow" Property="Visibility" Value="Visible" />
                <Setter TargetName="comboText" Property="Foreground" Value="#F94B01" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

所以我试图删除设置为切换按钮的背景，但这是不可能的。如果我删除 itemtemplate 上的背景，那么我可以设置切换按钮背景的样式。如果在itemtemplate中设置了togglebutton内容的背景，在此过程中是否有任何特殊命令可以防止我更改它的背景？

在此先感谢大家，克里斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:19:51.140

直接设置属性优先于任何`Setter(s)`. 不要直接设置属性，而是使用 a和使用 a来设置类似于您`Style`在. 这应该允许您在其他地方更改背景属性。`DockPanel``Setter``DataTrigger`

# c# - 我们如何显示组属性及其实体？

> ID：14747137
> 
> 赞同：2
> 
> 时间：2013-02-07T08:57:07.013
> 
> 标签：c#, linq

我有一个标准的学生名单。

```
public class Standard
{
    public int StandardId { get; set; }
    public string Name { get; set; }
    public List<Student> Students { get; set; }
}

public class Student
{
    public string Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }        
} 
```

在 Student 类中没有像**StandardId**这样的成员 。那么，如果我们将学生列表与标准分开，我们
如何在每个学生实体中显示**StandardId呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:01:55.790

试试这个：

```
var standard = GetStandard();
var studWStId = standard.Students
                        .Select(x=> new {
                                           Student = x, 
                                           StandardId = standard.StandardId 
                                })
                        .ToList();
foraech(stud in studWStId)
{
     System.Console.WriteLine(
         string.Format("Name:{0}, Sid:{1}", stud.Student.Name, stud.StandardId));
} 
```

它将创建具有属性`Student`和的匿名对象列表，这是来自持有学生`StandardId`的令牌。`standard`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:04:58.087

最好的方法是向被调用的类添加新`Property`的，但如果你不想这样做，你可以用 LINQ`Student``public int StandardId { get; set; }`

```
Student student = ...;
List<Standard>() standards = ...;
var standardForStudent = standards.Where(x => x.Students.Any(y => y.Id == student.Id)).FirstOrDefault(); 
```

# php - 显示自定义 SQL 结果

> ID：14747138
> 
> 赞同：1
> 
> 时间：2013-02-07T08:57:14.240
> 
> 标签：php, mysql, cakephp

**我想做什么**

我想列出具有特定条件的从数据库中提取的数据。

**我有什么，它有什么作用**

我有一个调用数据的函数。当我`print_r`输入数据时，它会抛出正确的东西，所以查询直接执行。但是，显示不工作。它显示了数据库中的所有数据。

这是我的功能：

```
public function myfunction() {
    $adminExtensions = $this->AdminExtension->find('all',
        array(
            'conditions' => array('location_id'=>'3')
        )
    );
    //print_r($adminExtensions);
    $this->set('adminExtensions', $this->paginate());
} 
```

**问题是什么**

如前所述，问题在于它不只列出带有`location_id == 3`. 它列出了所有内容。

我已将其缩小到函数的最后一行，但我似乎无法在其中获得正确的代码。

我的显示文件 ( `myfunction.ctp`) 是一个基本的 cakePHP 索引文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:34:19.533

您当前拥有的代码调用了两个不同的`find`操作。将返回所有a为 3`$this->AdminExtension->find()`的数组。第二次调用仅返回适合视图中分页的所有可能结果。`AdminExtensions``location_id``$this->paginate()`

如果要过滤分页结果，则必须`$paginate`在 Controller 中配置变量或直接在调用`$this->paginate`.

```
class PostsController extends AppController {
  public $paginate = array(
    'conditions' => array('location_id'=>'3')
  );
} 
```

`$this->paginate`这将调整控制器中所有调用的分页。

只为一个分页调用执行此操作：

```
public function your_view() {
   $this->set('adminExtensions', $this->paginate('AdminExtension', array('location_id' => '3')));
); 
```

# excel - Excel：用公式中的数字替换字符串？

> ID：14747139
> 
> 赞同：0
> 
> 时间：2013-02-07T08:57:14.310
> 
> 标签：excel, excel-2010

我的其中一列中有颜色字符串，如红色、紫色等。我想用相应的数字替换这些颜色。红色变为 1，紫色变为 2，依此类推。

没那么难，我用了替代品，像这样：

```
SUBSTITUTE(E3;"red";"1") 
```

现在的问题是某些列有 2 种或更多颜色，例如“红紫色”，所以我尝试使用：

```
SUBSTITUTE(E3;"red";"1")&SUBSTITUTE(E3;"purple";"2") 
```

这导致我的列中的值看起来像 1red，我添加的每个 &SUBSTITUTE 都有该行的颜色。如果我添加另一种颜色，就像那样

```
SUBSTITUTE(E3;"red";"1")&SUBSTITUTE(E3;"purple";"2")&SUBSTITUTE(E3;"green";"3") 
```

它会变成1redred。

我该如何解决这个问题？我想用相应的数字替换每个颜色字符串。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:05:46.257

试试这个

```
=SUBSTITUTE(SUBSTITUTE(E3,"Purple","2"),"Red","1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:21:49.453

请考虑以下**更紧凑**的解决方案（假设测试单元为`A2`）：

*   使用`MATCH`: 如果您需要返回 1、2、3 之类的序列号 ... - 这个公式可以完成这项工作：

    ```
    =IFERROR(MATCH(A2,{"Red","Green","Blue"},0),"UNKNOWN COLOR") 
    ```

您也可以将乘数/常数添加到返回值。字符串序列中的顺序等于返回的数字。

*   使用`VLOOKUP`：如果您需要一些已定义的返回值集 - 在 2-dim 数组常量中定义它们：

    ```
    =IFERROR(VLOOKUP(A2,{"Red",10;"Green",20;"Blue",30},2,0),"UNKNOWN COLOR") 
    ```

对于此示例，将返回 10、20 和 30。

这两个公式都包括对未指定颜色的错误处理。

共享示例文件：[https ://www.dropbox.com/s/77aj1vl6c5gek5c/ColorsLookup.xlsx](https://www.dropbox.com/s/77aj1vl6c5gek5c/ColorsLookup.xlsx)

PS我不确定正确的数组维度分隔符，因为我的本地设置使用不同的，但在示例文件公式中工作正常。

# amazon-web-services - Amazon S3 条件放置对象

> ID：14747140
> 
> 赞同：7
> 
> 时间：2013-02-07T08:57:14.847
> 
> 标签：amazon-web-services, amazon-s3, conditional

我有一个系统，可以在其中收到很多消息。每条消息都有一个唯一的 ID，但它也可以在其生命周期内接收更新。由于消息发送和处理之间的时间可能很长（几周），因此它们存储在 S3 中。对于每条消息，只需要最后一个版本。我的问题是，有时相同 id 的两条消息一起到达，但它们有两个版本（旧的和新的）。

有没有办法让 S3 有条件的 PutObject 请求，我可以在其中声明“放置这个对象，除非我在 S3 中有更新的版本”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T02:39:24.377

> 我这里需要一个原子操作

这不是 S3 的用例，它是最终一致的。一些想法：

*   您可以尝试对消息进行分区 - 所有以 AL 开头的消息都进入一个盒子，MZ 进入另一个盒子。然后每个盒子在本地检查没有重复。

*   您最好的选择可能是某种数据库。根据您的用例，您可以使用常规 SQL 数据库，也可以使用简单的仅 RAM 数据库，例如 Redis。一次写入多个 Redis 数据库以避免 SPOF。

*   [SWF](http://aws.amazon.com/swf/)可以为每个项目创建一个唯一的处理队列，但这可能意味着更多的 HTTP 请求，而不仅仅是签入 S3。

*   David 关于启用版本控制的想法很有趣。您可以有一个定期修剪旧版本的守护进程。阅读时，您必须执行“阅读修复”，在其中搜索版本以​​查找最新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-05T15:31:47.190

难道这不能通过使用标签来解决，并在使用 PutObject 时使用条件吗？请参阅此处的“示例 3：允许用户添加包含特定标签键和值的对象标签”：[https ://docs.aws.amazon.com/AmazonS3/latest/dev/object-tagging.html#tagging-and -政策](https://docs.aws.amazon.com/AmazonS3/latest/dev/object-tagging.html#tagging-and-policies)

# vba - 是否可以在文件级别上制作 VBA 宏功能？

> ID：14747142
> 
> 赞同：0
> 
> 时间：2013-02-07T08:57:25.293
> 
> 标签：vba, excel

我想知道一些事情。

我有一个 VBA 宏 Excel 代码，用于检查唯一公民号码并返回它是否正确。

但是要启动它，我必须在启动 Excel 时调用宏，按 ALT+F11，而不是 F5，然后输入代码，编译它，然后在 Excel 函数中输入我的函数 Check_JMBG(adr)，我可以调用它在 Excel 工作表中。

但是当我启动其他一些 Excel 文件时，我必须再次为此创建宏。

现在我想知道我可以做一个例子，当我启动其他一些 Excel 文件并像内置一样立即调用它时，如何让我的函数立即出现在那里？

调用函数示例：Check_JMBG(A1)，在A1中输入填充为文本：2003969265121

以下是检查唯一公民号码的代码：

```
' Function for checking JMBG validation
Function Check_JMBG(JMBG As String) As String
    If (Len(JMBG) <> 13) Then
        Check_JMBG = "ERROR: Length of JMBG is not 13!"
    ElseIf Not IsNumeric(JMBG) Then
        Check_JMBG = "ERROR: JMBG contains non-numerical characters"
    ElseIf Not fctBlnCheckDate(JMBG) Then
        Check_JMBG = "ERROR: Wrong date entered!"
    ElseIf fctBlnCheckSum(JMBG) Then
        Check_JMBG = "ERROR: Wrong checksum!"
    Else
        Check_JMBG = "JMBG is correct"
    End If
End Function
' Function to check JMBG day, month, year validation
Private Function fctBlnCheckDate(JMBG As String) As Boolean
    Dim intDay As Integer, intMonth As Integer, intYear As Integer
    Dim datCheck As Date

    intDay = Int(Left(JMBG, 2))
    intMonth = Int(Mid$(JMBG, 3, 2))
    intYear = Int(Mid$(JMBG, 5, 3)) + 1000

    datCheck = DateSerial(intYear, intMonth, intDay)

    fctBlnCheckDate = _
        (Year(datCheck) = intYear) And _
        (Month(datCheck) = intMonth) And _
        (Day(datCheck) = intDay)

End Function
' Function to check JMBG control number and control sum
Private Function fctBlnCheckSum(JMBG As String) As Boolean
    Dim intCheckSum As Integer, i As Integer

    For i = 1 To 13
        intCheckSum = intCheckSum + Int(Mid$(JMBG, i, 1)) * (IIf(i < 7, 8, 14) - i)
    Next
    fctBlnCheckSum = (intCheckSum Mod 11) <> 0
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:14:47.847

是的。

您需要制作一个加载项。

请参阅[http://support.microsoft.com/kb/151490](http://support.microsoft.com/kb/151490)

# php - 为什么 PJAX 停止 Nestable 工作？

> ID：14747145
> 
> 赞同：1
> 
> 时间：2013-02-07T08:57:27.573
> 
> 标签：php, javascript, jquery, pjax

我的应用程序中有 3 列。每列都有一个无序列表。我正在使用[Nestable](http://dbushell.github.com/Nestable/)在列表之间拖放列表项。标记如下：

```
<div class="row-fluid span12">
  <div class="cf nestable-lists">
   <div id="pjax-content">
    <div class="span4">
        <div class="dd" id="nestable1">
            <ul class="dd-list">
                <li class="dd-item dd3-item" data-id="123">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
                <li class="dd-item dd3-item" data-id="456">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="span4">
        <div class="dd" id="nestable2">
            <ul class="dd-list">
                <li class="dd-item dd3-item" data-id="789">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
                <li class="dd-item dd3-item" data-id="1011">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="span4">
        <div class="dd" id="nestable3">
            <ul class="dd-list">
                <li class="dd-item dd3-item" data-id="1213">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
                <li class="dd-item dd3-item" data-id="1415">
                    <div class="dd-handle dd3-handle">Drag</div>
                    <div class="dd3-content">
                        // list content
                    </div>
                </li>
            </ul>
        </div>

    </div>
  </div>
 </div>
</div> 
```

这有效，我可以在每个列表之间拖放列表项。问题是当我实现 PJAX 时。

我有一些使用 PJAX 更改 url 的链接，即每个链接将根据 URL 更新每个列表中的数据或数据顺序。id="pjax-content" 中的数据会相应更新，因此可以正常工作。这是服务器端代码的片段（使用 CI）：

```
if (isset($_SERVER["HTTP_X_PJAX"])) {

        echo $data['contents'];

    } else {

        // construct views when not PJAX    
    } 
```

$data['contents'] 包含 html 作为字符串。

我也有以下 JS 库（我已经尝试删除其中一些，但问题仍然存在）：

```
<script type="text/javascript" src="jquery-1.9.0.js"></script>
<script type="text/javascript" src="bootstrap.js"></script>

<script type="text/javascript" src="nestable.js"></script>
<script type="text/javascript" src="nestable-settings.js"></script>
<script type="text/javascript" src="bootstrap-editable.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript" src='jquery.pjax.js'></script>
<script type="text/javascript">

   $(document).pjax('[data-pjax] a, a[data-pjax]', '#pjax-content');
    $(document).on('pjax:send', function() {
      console.log("before send");
    });
    $(document).on('pjax:complete', function() {
      console.log("done!");
    });

</script> 
```

# 问题

当我单击 PJAX 工作的链接之一时，数据会更新，页面不会重新加载，并且控制台会在发送和完成之前显示 - 所以一切都很好。但是，可嵌套项目不再可选择，因此我无法拖放它们。当我进行整页刷新时，它可以工作，我可以拖放。

我已经比较了之前和之后的标记（因为那是以前的问题），一切都是一样的。

关于我哪里出错的任何建议？或者如何最好地调试这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:01:23.540

在您的 ajax 完成功能后调用可嵌套

```
 $(document).on('pjax:complete', function() {
   $('#nestable1,#nestable2,#nestable3').nestable();
  }); 
```

# mysql - 它是 mysql 中等效的 oracle 游标参数功能吗？

> ID：14747146
> 
> 赞同：0
> 
> 时间：2013-02-07T08:57:30.053
> 
> 标签：mysql, cursor

它是 MySQL 中等效的 ORACLE 游标参数功能吗？

例如 ：-

```
CURSOR cursorname(paramter_name datatype) IS SELECT * FROM TABLE_NAME; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:15:21.610

您可以尝试以下方法：

```
CURSOR select_curs IS SELECT * FROM tbl WHERE id = @id;

set @id = 1;
OPEN  ..
FETCH ..
CLOSE .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:28:46.853

像这样：

该过程使用 var_id_res 参数来指定特定的预留：

此过程参数用于控制光标仅选择对应的项目

```
CREATE PROCEDURE `UpdatePriceAndVatAndDiscountForReservationItems`(
        IN var_id_res INTEGER
    )
...to the reservation passed by the parameter:

-- the line reserve curosr

 DECLARE cur_res CURSOR FOR
        SELECT  id_line
        ,       id_prod
        ,       disc_bool
        ,       no_days
        FROM    line_reserve 
        WHERE   id_res = var_id_res; 
```

# c++ - 将 ActiveX 附加到 win32 应用程序

> ID：14747157
> 
> 赞同：1
> 
> 时间：2013-02-07T08:58:02.130
> 
> 标签：c++, winapi, ocx

我创建了win32应用程序，我想附加一个ActiveX，所以我这样继续

```
#include "stdafx.h"
#include "test.h"
#include <Windows.h>
#include <iostream>
#include <exdisp.h>

#using <System.dll>
using namespace std;
using namespace System;

// Constants

namespace {
   TCHAR * windowClassName = TEXT("win32host");
   TCHAR * windowTitle     = TEXT("Win32 interface");
   int          windowWidth     = 600;
   int          windowHeight    = 600;
}

    HWND container;

LRESULT CALLBACK WindowProc( HWND hWnd, UINT messg, WPARAM wParam, LPARAM lParam )
{
switch(messg)
{
case WM_SIZE:
// Redimensionnement du conteneur quand la taille de la fenêtre change:
MoveWindow(container,0,0,LOWORD(lParam), HIWORD(lParam),1);
break;
case WM_CLOSE:
// Détruire la fenêtre principale:
DestroyWindow(hWnd);
break;
case WM_DESTROY:
// Envoyer le message de sortie du programme:
PostQuitMessage( 0 );
break;
default:
//Retour:
return( DefWindowProc( hWnd, messg, wParam, lParam ) );
}
return 0;
}

int CALLBACK WinMain(
   HINSTANCE hInstance,
   HINSTANCE hPrevInstance,
   LPSTR lpCmdLine,
   int nCmdShow)
{

   // Register our Window class
   WNDCLASS wndclass;
   wndclass.style = CS_VREDRAW | CS_HREDRAW;
   wndclass.lpfnWndProc = &WindowProc;
   wndclass.cbClsExtra = 0;
   wndclass.cbWndExtra = 0;
   wndclass.hInstance = hInstance;
   wndclass.hIcon = NULL;
   wndclass.hCursor = NULL;
   wndclass.hbrBackground = reinterpret_cast <HBRUSH> (COLOR_BTNFACE + 1);
   wndclass.lpszMenuName = NULL;
   wndclass.lpszClassName =windowClassName;
   ::RegisterClass(&wndclass);

   // Create our main, raw win32 API window
   // We create the window invisible (meaning that we do not provide WS_VISIBLE as the window style parameter), because making it visible and then
   // adding a HwndSource will make it flicker.
   HWND mainWindow = ::CreateWindow(
      windowClassName,
      windowTitle,
      0,
      CW_USEDEFAULT,
      CW_USEDEFAULT,
      windowWidth,
      windowHeight,
      NULL,
      NULL,
      hInstance,
      0);
   ::ShowWindow (mainWindow, nCmdShow);
   ::UpdateWindow( mainWindow );

//ocx

    typedef HRESULT (WINAPI *PFonc)(IUnknown*, HWND,IUnknown**);   
    HINSTANCE hDLL2 = ::LoadLibrary(TEXT("atl.dll"));   
    if (!hDLL2) 
      return 1;   
    //PAttachControl AtlAxAttachControl = (PAttachControl) GetProcAddress(hDLL2, (LPCSTR)"AtlAxAttachControl");
    PFonc AtlAxAttachControl = (PFonc) ::GetProcAddress(hDLL2,"AtlAxAttachControl");
    CLSID clsid = GetClsid();
    IID DIID__DLiveX = GetDIID__DLiveX();
    RECT rect;
    ::GetClientRect(mainWindow,&rect);

    container = ::CreateWindowEx(WS_EX_CLIENTEDGE, L"EDIT",L"",WS_CHILD | WS_VISIBLE,100,100,rect.right,rect.bottom,mainWindow,0,hInstance,0);

    HRESULT hr = ::CoInitialize(0);

IWebBrowser2 *pIwb;
IUnknown*       unkn;
hr = ::CoCreateInstance(CLSID_WebBrowser,0,CLSCTX_ALL,IID_IWebBrowser2,(void**)&pIwb);
hr = AtlAxAttachControl(pIwb,container,0);
     if(FAILED(hr)){
         MessageBox(0, L"FAILED(AtlAxAttachControl(pitd, container, NULL))", L"Error", MB_ICONERROR | MB_OK);
    }
     pIwb->GoHome();
     pIwb->Navigate2((VARIANT*)L"www.google.com",0,0,0,0);

   // Start message processing
   ::MSG message;
   while (::GetMessageA(&message, 0, 0, 0)) {
      switch (message.message) {
      case WM_QUIT:
         break;
      default:
         ::TranslateMessage(& message);
         ::DispatchMessage(& message);
         break;
      }
   }
   CoUninitialize();
   FreeLibrary(hDLL2);
   return 0;
} 
```

但是当我执行我的程序时，我得到了两个窗口，一个是我的 originale 空的，另一个是 Activex，

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:17:18.557

我做了一些小的改动，它编译并只显示一个包含 ActiveX 的窗口：

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <comdef.h>
#include <exdisp.h>
#include <oledlg.h>

using namespace std;

// Constants

namespace {
   TCHAR * windowClassName = TEXT("win32host");
   TCHAR * windowTitle     = TEXT("Win32 interface");
   int          windowWidth     = 600;
   int          windowHeight    = 600;
}

    HWND container;

LRESULT CALLBACK WindowProc( HWND hWnd, UINT messg, WPARAM wParam, LPARAM lParam )
{
    switch(messg)
    {
        case WM_SIZE:
        // Redimensionnement du conteneur quand la taille de la fenêtre change:
        MoveWindow(container,0,0,LOWORD(lParam), HIWORD(lParam),1);
        break;
        case WM_CLOSE:
        // Détruire la fenêtre principale:
        DestroyWindow(hWnd);
        break;
        case WM_DESTROY:
        // Envoyer le message de sortie du programme:
        PostQuitMessage( 0 );
        break;
        default:
        //Retour:
        return( DefWindowProc( hWnd, messg, wParam, lParam ) );
    }
    return 0;
}

int CALLBACK WinMain(
   HINSTANCE hInstance,
   HINSTANCE hPrevInstance,
   LPSTR lpCmdLine,
   int nCmdShow)
{

   // Register our Window class
   WNDCLASS wndclass;
   wndclass.style = CS_VREDRAW | CS_HREDRAW;
   wndclass.lpfnWndProc = &WindowProc;
   wndclass.cbClsExtra = 0;
   wndclass.cbWndExtra = 0;
   wndclass.hInstance = hInstance;
   wndclass.hIcon = NULL;
   wndclass.hCursor = NULL;
   wndclass.hbrBackground = reinterpret_cast <HBRUSH> (COLOR_BTNFACE + 1);
   wndclass.lpszMenuName = NULL;
   wndclass.lpszClassName =windowClassName;
   ::RegisterClass(&wndclass);

   // Create our main, raw win32 API window
   // We create the window invisible (meaning that we do not provide WS_VISIBLE as the window style parameter), because making it visible and then
   // adding a HwndSource will make it flicker.
   HWND mainWindow = ::CreateWindow(
      windowClassName,
      windowTitle,
      0,
      CW_USEDEFAULT,
      CW_USEDEFAULT,
      windowWidth,
      windowHeight,
      NULL,
      NULL,
      hInstance,
      0);
   ::ShowWindow (mainWindow, nCmdShow);
   ::UpdateWindow( mainWindow );

    typedef HRESULT (WINAPI *PFonc)(IUnknown*, HWND,IUnknown**);   
    HINSTANCE hDLL2 = ::LoadLibrary(TEXT("atl.dll"));   
    if (!hDLL2) 
      return 1;   

    PFonc AtlAxAttachControl = (PFonc) ::GetProcAddress(hDLL2,"AtlAxAttachControl");

    RECT rect;
    ::GetClientRect(mainWindow,&rect);

    container = ::CreateWindowEx(
        WS_EX_CLIENTEDGE, 
        L"EDIT",
        L"",WS_CHILD | WS_VISIBLE,
        0,
        0,
        rect.right,
        rect.bottom,
        mainWindow,
        0,
        hInstance,
        0);

    HRESULT hr = ::CoInitialize(0);

    IWebBrowser2 *pIwb;
    hr = ::CoCreateInstance(CLSID_WebBrowser,0,CLSCTX_ALL,IID_IWebBrowser2,(void**)&pIwb);
    hr = AtlAxAttachControl(pIwb,container,0);

    if(FAILED(hr))
    {
         MessageBox(0, L"FAILED(AtlAxAttachControl(pitd, container, NULL))", L"Error", MB_ICONERROR | MB_OK);
    }
     pIwb->GoHome();
     pIwb->Navigate2((VARIANT*)L"www.google.com",0,0,0,0);

   // Start message processing
   ::MSG message;
   while (::GetMessageA(&message, 0, 0, 0))
   {
      switch (message.message) {
      case WM_QUIT:
         break;
      default:
         ::TranslateMessage(& message);
         ::DispatchMessage(& message);
         break;
      }
   }

   CoUninitialize();
   FreeLibrary(hDLL2);
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T15:20:03.877

我测试了 duDE 的代码，它可以正常工作，只是它没有浏览到请求的 URL。

我很惊讶 ocx 可以在没有 ATL/MFC 的情况下如此轻松地在 win32 中使用，但它确实有效。

我认为浏览失败是因为：

```
 pIwb->Navigate2((VARIANT*)L"www.google.com",0,0,0,0); 
```

将其更改为：

```
// create variant for url
VARIANT varUrl;
// init variant
VariantInit(&varUrl);
varUrl.vt = VT_BSTR;
varUrl.bstrVal = SysAllocString(L"www.google.com");
// browse to url
hr = pIwb->Navigate2((VARIANT*)&varUrl,0,0,0,0);
// release variant
VariantClear(&varUrl); 
```

# xml - 使用 NamespacePrefixMapper 删除额外的注释 ns2

> ID：14747159
> 
> 赞同：0
> 
> 时间：2013-02-07T08:58:12.960
> 
> 标签：xml, jaxb, marshalling

我想在 marshal 使用 NamespacePrefixMapper 类而不是使用 package-info.java 文件生成的 xml 中删除额外的注释 ns2。

我的代码如下：

请求类：

```
package com.example;
import javax.xml.bind.annotation.*;

@XmlType(propOrder = { "password", "title", "firstName", "lastName", "email"})

@XmlRootElement

public class Req {

  private String password;
  private String title;
  private String firstName;
  private String lastName;
  private String email;

  @XmlElement(name= "Password")
public String getPassword() {
    return password;
}
 public void setPassword(String password) {
    this.password = password;
}

@XmlElement(name= "Title")
public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}
@XmlElement(name= "FirstName")
public String getFirstName() {
    return firstName;
}
public void setFirstName(String firstName) {
    this.firstName = firstName;
}
@XmlElement(name= "LastName")
public String getLastName() {
    return lastName;
}
public void setLastName(String lastName) {
    this.lastName = lastName;
}

@XmlElement(name= "Email")
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}

} 
```

PreferredMapper 类：

```
package com.example;

import javax.xml.namespace.NamespaceContext;
import com.sun.xml.bind.marshaller.NamespacePrefixMapper;

public class PreferredMapper extends NamespacePrefixMapper{

    private static final String URI ="http://schema.bsi.ib.example/service/request/v1";

    @Override
        public String getPreferredPrefix(String namespaceUri, String suggestion, boolean requirePrefix) {

        if(URI.equals(namespaceUri)) {
            return "";
        } 

        return suggestion;
    }
        @Override
        public String[] getPreDeclaredNamespaceUris() {
            return new String[] { URI };
        }

} 
```

测试类：

```
package com.example;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.namespace.QName;
import com.example.Req;
import com.example.PreferredMapper;
import com.sun.xml.bind.marshaller.NamespacePrefixMapper;

public class Test {
    public static void main(String args[]) throws JAXBException
    {

        setRequest("Tiger123", "Miss","Rose","Crocker","hello@world.com");

    }

    public static void setRequest(String passWord, String title, String firstName, String lastName,String email) throws JAXBException
    {
        JAXBContext context = JAXBContext.newInstance(Req.class);

        Req ibw=new Req();

        ibw.setEmail(email);
        ibw.setPassword(passWord);
        ibw.setTitle(title);
        ibw.setFirstName(firstName);
        ibw.setLastName(lastName);

        JAXBElement<Req> element=new JAXBElement<Req> (new QName("http://schema.bsi.ib.example/service/request/v1","CustomerProfile"),Req.class,ibw);
        Marshaller m=context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,true);
        m.setProperty("com.sun.xml.bind.namespacePrefixMapper", new PreferredMapper());

        m.marshal(element, System.out);

    }   
} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:CustomerProfile xmlns:ns2="http://schema.bsi.ib.example/service/request/v1">
    <Password>Tiger123</Password>
    <Title>Miss</Title>
    <FirstName>Rose</FirstName>
    <LastName>Crocker</LastName>
    <Email>hello@world.com</Email>
</ns2:CustomerProfile> 
```

无法使用上述代码删除 ns2 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:13:08.297

如果您想“删除 ns2”但在语义上保持 XML 相同，那么您最终会得到类似

```
<CustomerProfile xmlns="http://schema.bsi.ib.example/service/request/v1">
    <Password xmlns="">Tiger123</Password>
    <Title xmlns="">Miss</Title> 
```

因为目前只有 CustomerProfile 元素在命名空间中，它的子元素不在。请记住，您在映射器中建议的前缀映射只是 - 建议 - 如果编组器认为它们不合适，它可能会忽略它们。

我认为您拒绝修改 ，`package-info`因为您想从现有的`.xsd`. 您是否可以修改此架构并添加`elementFormDefault="qualified"`到`<xs:schema>`元素中？如果你能做到那

```
<CustomerProfile xmlns="http://schema.bsi.ib.example/service/request/v1">
    <Password>Tiger123</Password>
    <Title>Miss</Title> 
```

（没有`xmlns=""`）将变得有效，并且您现有的映射器可能会开始工作。

如果您*无法*修改架构，那么您可能无论如何都不想使用默认命名空间`CustomerProfile`......

# c# - 如何使用实体框架将继承类正确显示或保存到数据库中

> ID：14747163
> 
> 赞同：1
> 
> 时间：2013-02-07T08:58:25.560
> 
> 标签：c#, entity-framework, inheritance

我有两个类，名为`Text`和`Image`，它们都继承自抽象类`Item`。我们已经将它映射到一个`.edmx`文件中，并从那里生成了一个数据库。

现在，每当尝试从数据库中获取`Text`或`Image`从数据库中获取时，我都面临以下异常：

```
There are no EntitySets defined for the specified entity type 'ModelLibrary.Text'.
If 'ModelLibrary.Text' is a derived type, use the base type instead.
Parameter name: TEntity 
```

我无法访问或保存`Item`类，因为它们是抽象类，并且它们从不包含与`Text`或`Image`类关联的信息。

我用来尝试访问数据的代码：

```
ProjectEntities context = new ProjectEntities(); //this inherits from ObjectContext and was generated by EF

var textRepo = new TextRepository(context);
var lstTexts = textRepo.GetAll();
foreach (var i in lstTexts)
{
    Console.WriteLine(i.textTitle);
} 
```

该类`textRepo`用于访问和保存到数据库。`textRepo`我在继承自的类的构造函数上遇到异常`(DataRepository)`：

```
protected DataRepository(ObjectContext context)
{
    Context = context;
    ObjectSet = Context.CreateObjectSet<T>();
} 
```

我已经对异常进行了一些研究，并发现了这个问题：[EF4 - custom ObjectContext and inherit question](https://stackoverflow.com/q/923315)

问题的答案实际上是应该发生的事情（为特定类型制作 ObjectSet）。我似乎只是在应该防止异常的行上得到异常。

现在，我想知道可能出了什么问题或我错过了什么。由于继承，我需要做一些额外的事情吗？请注意，我对 Entity Framework 有点陌生，所以如果我在这里犯了一个非常明显的错误，我深表歉意。如果您需要更多信息或代码，请随时询问。

编辑：为了更具体地说明异常，我将其上`ObjectSet = Context.CreateObjectSet<T>();`线。我不能在测试代码中添加太多内容，因为我已经在类的基`textRepo`类（即类）的构造函数中得到了异常`DataRepository`。

# php - 我的正则表达式中的错误在哪里？

> ID：14747168
> 
> 赞同：0
> 
> 时间：2013-02-07T08:58:38.690
> 
> 标签：php, regex

我正在尝试构建一个正则表达式来提取伪xml标签的值（包含在{}而不是<>中）并且它不起作用。已经用 RegexBuddy 验证了这个东西，我最喜欢的 rx 工具捕获的非常正确，但是在我的 PHP 代码中使用它时，我没有得到结果。所以，不用多说，这就是问题所在：

```
$match=array();
$ret=preg_match('\{lang\s*=\s*[\"\']*?(.*?)[\"\']*?\s*/\}',"{lang='DE'/}xxxxlxlxlxl",$match); 
```

为什么 $match 为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:02:02.123

模式应该是

```
/\{lang\s*=\s*[\"\']*?(.*?)[\"\']*?\s*\/\}/
^                                        ^ 
```

# javascript - Ext JS 无法获取要上传的文件

> ID：14747169
> 
> 赞同：0
> 
> 时间：2013-02-07T08:58:42.643
> 
> 标签：javascript, extjs

我正在使用 Ext JS 3.4 并且在从表单上传文件时遇到问题 PHP 脚本无法接收文件数据（即使尝试使用**print_r($_FILES)**应该显示收到的任何文件或错误）。

这是我的代码

```
var editOrganisationForm = new Ext.FormPanel({
    url: 'appsrv/users_json.php',
    labelWidth: 75,
    border:false,
    width: 350,
    items: {
        xtype:'tabpanel',
        layoutOnTabChange: true,
        deferredRender:true, 
        border: false,
        activeTab: 0,
        defaults: {autoHeight:true, bodyStyle:'padding:10px; border: 0', bodyBorder: false}, 
        items:[{
            title:'Organisation Info',
            layout: 'form',
            fileUpload: true,
            defaults: {width: 230},
            defaultType: 'textfield',
            items: [
                {xtype: 'hidden', name: 'id'},
                {fieldLabel: 'Organisation', name: 'organisation', allowBlank:false},
                {
                    fieldLabel: 'Logo',
                    name: 'org_logo',
                    id: 'org_logo',
                    inputType: 'file',
                    allowBlank:true
                },
                {
                    fieldLabel: 'Theme',
                    name: 'org_theme',
                    id: 'org_theme',
                    store: [['val1', 'First Value'], ['val2', 'Second Value']],
                    xtype: 'combo',
                    allowBlank: false,
                    forceSelection: true,
                    valueField:'id',
                    displayField:'name'
                }
            ]
        }]
    }
}); 
```

和

```
var winOrg = new Ext.Window({
        title: 'Edit Organisation',
        layout:'fit',
        width:400,
        height:215,
        closeAction: 'hide',
        plain: false,
        modal: true,
        shadow: true,
        items: [editOrganisationForm],
        buttons: [{
            text:'Save',
            handler: function() {
                editOrganisationForm.getForm().submit({
                    method: 'POST',
                    waitTitle: 'Please Wait...',
                    waitMsg: 'Saving Changes',
                    url: 'appsrv/users_json.php',
                    params: {cmd: "addOrg"},
                    success: function() {
                        Ext.Msg.alert('Complete','Your changes have been saved');
                        tree.root.reload();
                        winOrg.hide();
                    },
                    failure: function(form, action) {                   
                        if (action.failureType == 'server') {
                            obj = Ext.util.JSON.decode(action.response.responseText);
                            Ext.Msg.alert('Oops!', obj.errors.reason);
                        } else if (action.failureType == 'client') {
                            Ext.Msg.alert('Sorry', 'Please ensure all required fields have been completed');
                        } else {
                            Ext.Msg.alert('Sorry','An error occurred');
                        }
                    }
                });
            },
            disabled: false
        }]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:07:36.323

那是我解决了它 fileUpload: true 是正确的，但我把它放在错误的对象中，它应该在表单配置对象中，而不是在表单>面板>项目对象中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:08:07.230

在表单配置对象中包含 isUpload: true

# javascript - 如何提醒支持的 EcmaScript 版本的浏览器？

> ID：14747171
> 
> 赞同：1
> 
> 时间：2013-02-07T08:58:46.537
> 
> 标签：javascript, ecmascript-5

有没有办法提醒我运行 JavaScript 的当前环境支持的 EcmaScript 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:14:24.430

**简短的回答**：没有。

**长答案**：首先，浏览器不实现 ECMAScript，而是基于该规范的语言（例如，用于 Firefox 的 JavaScript，用于 Microsoft 的 JScript）。通常，他们可以实现部分标准，并在该语言的下一个版本中完成该标准（例如，它发生在关于 ES5 的 JavaScript 1.8 / 1.8.1 / 1.8.5 中，请参阅[JavaScript 中的新](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript)功能）。

另外，他们可以预期标准：查看[for...of](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)或[let](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)，这是 Mozilla 多年来一直在使用的，它们是 ES6 的一部分。

所以，你不能真正说出你的环境支持什么 ES 版本；您可以做的是测试您感兴趣的功能并使用它们。在大多数情况下，我们会在可能的情况下应用 shim 来模拟该功能，例如[ES5](https://github.com/kriskowal/es5-shim)。

# sql - TSQL 获取最小值的 id

> ID：14747186
> 
> 赞同：0
> 
> 时间：2013-02-07T08:59:23.647
> 
> 标签：sql, sql-server, tsql, aggregate-functions

我需要从一个组（MIN 函数）中获取最小值，但也需要它的关联 ID。

```
SELECT
    pv.id,
    MIN(pv.auto)+MIN(a.autonomia) as autonomia,
    -->> a.id as minid
from @autonomie a
join VARDB v on a.id=v.IDARTICO
join RIDIBA r on v.id=r.IDVARDB and r.idartico IS NOT NULL
join @PvTable pv on pv.id=r.IDARTICO
group by pv.id 
```

`autonomia`在这里，我通过计算所选字段`MIN(a.autonomia)`，但我还想选择与获取的最低字段相关联的 id（a.id 字段）`a.autonomia`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:22:19.623

我不完全确定我理解了这些要求，但您可以尝试使用子查询：

```
SELECT
    ,pv.id
    ,(MIN(pv.auto) + autonomie_min.autonomia) as autonomia
    ,autonomie_min.id as autonomia_id
from 
  VARDB v
    JOIN
    (
        SELECT
            a.id
            ,MIN(a.autonomia) as autonomia
        FROM
            @autonomie a
        GROUP BY
            a.id
    ) AS autonomie_min ON
        (autonomie_min.id = v.IDARTICO)
    JOIN
    RIDIBA r ON
        (r.IDVARDB = v.id) AND
        (r.idartico IS NOT NULL)
    JOIN
    @PvTable pv ON
        (pv.id = r.IDARTICO)
GROUP BY
    pv.id 
```

*子查询 * autonomie_min* * 将生成一个表，其中包含与每个 id 关联的所有自治权最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:31:47.053

你可以试试这个：

```
SELECT  pv.id
        , ROW_NUMBER() OVER (PARTITION BY pv.id ORDER BY pv.auto) pv_auto
        , ROW_NUMBER() OVER (PARTITION BY pv.id ORDER BY a.autonomia) a_autonomia
        , a.id a_id
        , pv.auto
        , a.autonomia
INTO    #temp
FROM    @autonomie a
JOIN    VARDB v ON a.id=v.IDARTICO
JOIN    RIDIBA r ON v.id=r.IDVARDB and r.idartico IS NOT NULL
JOIN    @PvTable pv ON pv.id=r.IDARTICO

SELECT  temp_pv_auto.id
        , temp_pv_auto.auto + temp_a_autonomia.autonomia AS autonomia
        , temp_a_autonomia.a_id
FROM    #temp temp_pv_auto
JOIN    #temp temp_a_autonomia ON 
        temp_pv_auto.id = temp_a_autonomia.id
AND     temp_pv_auto.pv_auto = 1 
AND     temp_a_autonomia.a_autonomia = 1 
```

你也可以试试这个查询：

```
SELECT  pv.id
        , MIN(pv.auto) pv_auto_min
        , MIN(a.autonomia) a_autonomia_min
INTO    #temp
FROM    @autonomie a
JOIN    VARDB v ON a.id=v.IDARTICO
JOIN    RIDIBA r ON v.id=r.IDVARDB and r.idartico IS NOT NULL
JOIN    @PvTable pv ON pv.id=r.IDARTICO
GROUP BY
        pv.id

SELECT  pv.id
        , #temp.pv_auto_min + #temp.a_autonomia_min AS autonomia
        , a.id a_id
FROM    @autonomie a
JOIN    VARDB v ON a.id=v.IDARTICO
JOIN    RIDIBA r ON v.id=r.IDVARDB and r.idartico IS NOT NULL
JOIN    @PvTable pv ON pv.id=r.IDARTICO
JOIN    #temp ON 
        #temp.id = pv.id
AND     #temp.a_autonomia_min = a.autonomia 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:14:23.790

```
SELECT  pv.id,
    MIN(pv.auto)+MIN(a.autonomia) as autonomia,
    (
        SELECT a2.id from @autonomie a2
            join VARDB v2 on a2.id=v2.IDARTICO
            join RIDIBA r2 on v2.id=r2.IDVARDB and r2.idartico IS NOT NULL
            join @PvTable pv2 on pv2.id=r2.IDARTICO 
        where a2.autonomia = MIN(a.autonomia)
    )
    -->> a.id as minid
from @autonomie a
join VARDB v on a.id=v.IDARTICO
join RIDIBA r on v.id=r.IDVARDB and r.idartico IS NOT NULL
join @PvTable pv on pv.id=r.IDARTICO
group by pv.id 
```

更新以反映子查询中的所有条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T09:23:28.290

对值进行分组后，您可以对结果集进行排序并从结果集中获得前 1 名。

```
SELECT TOP 1
pv.id,
MIN(pv.auto)+MIN(a.autonomia) as autonomia,
-->> a.id as minid
from @autonomie a
join VARDB v on a.id=v.IDARTICO
join RIDIBA r on v.id=r.IDVARDB and r.idartico IS NOT NULL
join @PvTable pv on pv.id=r.IDARTICO
group by pv.id
ORDER BY autonomia 
```

# html - 从服务器呈现时，html页面宽度不同

> ID：14747187
> 
> 赞同：0
> 
> 时间：2013-02-07T08:59:23.853
> 
> 标签：html, css, zurb-foundation

对于 html 页面，`$(window).width()`当它托管在服务器上时会给出不同的值。我笔记本的分辨率是1920 X 1080。当我在Firefox和Chrome本地打开页面时，宽度显示为1920。我托管在服务器上时的同一页面，打开时显示宽度为1097。这是为什么不同之处？由于这种差异，页面的整体布局是不同的。我该如何解决这个问题？

PS 在 IE 中打开页面时，本地和服务器上的宽度相同。我正在使用 Zurb 的基础框架（3.2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:17:40.600

jS没有运行到服务器**窗口**有一些像这样的宽度属性

```
window.outerWidth
window.innerWidth 
```

通过从窗口获取日志在重新调整浏览器屏幕大小时发生变化，您可以在开发人员工具中看到所有属性

```
console.log(window); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T17:22:33.653

我在谷歌浏览器中遇到了同样的问题。显然，如果页面放大或缩小，媒体查询就会变得混乱。确保两个站点的缩放级别均为 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T22:38:28.210

我确认了这个问题并且实际上什么都不相信（Ubuntu 12.04，Mozilla Firefox 26.0） [http://www.potomek.eu/blog/media/differentscreenwidthissue.jpg](http://www.potomek.eu/blog/media/differentscreenwidthissue.jpg)

# excel - 如何运行/启动 VBA 程序 mac excel 2011

> ID：14747195
> 
> 赞同：0
> 
> 时间：2013-02-07T08:59:49.167
> 
> 标签：excel, macos, vba

我是 VBA 编程的新手，想在我的 mac 上练习。但是，我的 Excel 文档顶部的栏似乎已消失，我通过按播放按钮启动/运行程序。现在我不能再运行我的程序了，因为我之前用来启动程序的栏不见了。非常感谢帮助再次启动该工具栏。或者，在 mac 上运行 vba 程序的命令是什么？在电脑上是F9，F5。有什么类似的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T20:28:59.253

进入宏编辑器：

```
Tools -> Macro -> Visual Basic Editor 
```

从这里开始，当它处于活动状态时：

```
View --> Toolbars --> Standard 
```

# bash - bash脚本查找行并修改下一行

> ID：14747201
> 
> 赞同：1
> 
> 时间：2013-02-07T09:00:09.730
> 
> 标签：bash, scripting

我有一个正在修改文件的 bash 脚本。我有一个 sed 会去寻找一行，并用另一个参数替换它：

```
sed -i 's@.leaflet-right {@/.leaflet-left {@g' "$<Path_to_my_file...>" 
```

但是我想找到包含的行`.leaflet-right {`，然后将下一行从修改`right: 0;`为`left: 0;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:30:45.777

```
#% cat tester
blah
blah
.leaflet-right {
right: 0; CHANGE
right  LEAVE
blah
blah 
```

进而

```
 sed  '/.leaflet-right/{n;s/right/left/;}' < tester 
```

给

```
blah
blah
.leaflet-right {
left: 0; CHANGE
right  LEAVE
blah
blah 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:16:30.480

使用 awk，您可以像这样使用行数：

这将打印发生某些事情的行号（在示例中，它包含 text `something`）

```
awk '/something/ {print NR}' 
```

这将打印上一行的第二个字段

```
awk -v v1=2 {if (FNR==v1-1) print $2}' 
```

您也许可以组合 sed 和 awk 以获得最终结果。

# python - 如何停止无限循环？

> ID：14747210
> 
> 赞同：0
> 
> 时间：2013-02-07T09:00:45.753
> 
> 标签：python

问题：根据用户输入计算两个整数，第一个整数重复加倍，第二个整数除以二。在每一步，如果第二个数字是奇数，则将第一个数字的当前值添加到自身，直到第二个数字为零。

我的代码似乎没有完全运行，我得到一个无限循环我做错了什么？我正在使用 python 2.7.3

```
##
## ALGORITHM:
##     1\. Get two whole numbers from user (numA and numB).
##     2\. If user enters negative number for numB convert to positive.
##     3\. Print numA and numB.
##     4\. Check if numB is odd if True add numA to numA.& divide numB by 2 using int division.
##        Print statement showing new numA and numB values.
##     5\. Repeat steps 3 and 4 until numB is 0 or negative value. enter code here
##     6\. Prompt user to restart or terminate? y = restart n = terminate
##
## ERROR HANDLING:
##     None
##
## OTHER COMMENTS:
##     None
##################################################################

done = False
while not done:

    numA = input("Enter first integer: ") # 1\. Get two whole numbers from user (A and B)
    numB = input("Enter second integer: ") # 1\. Get two whole numbers from user (A and B)
    if numB < 0:
        abs(numB) # 2\. If user enters negative number for B convert to positive
    print'A = ',+ numA,'     ','B = ',+ numB
    def isodd(numB):
        return numB & 1 and True or False
    while numB & 1 == True:
        print'B is odd, add',+numA,'to product to get',+numA,\
        'A = ',+ numA,'     ','B = ',+numB,\
        'A = ',+ numA+numA,'     ','B = ',+ numB//2
    else:
            print'result is positive',\
            'Final product: ', +numA

    input = raw_input("Would you like to Start over? Y/N : ")
    if input == "N":
        done = True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:20:40.413

问题：

*   你不需要写`done = False; while not done:`。只需无限循环（`while True`），然后`break`在完成后使用 退出循环。

*   `input` *执行*用户输入的代码（把它想象成 Python shell 所做的）。你想要`raw_input`，它返回一个字符串，所以你需要将它传递给`int`：

    ```
    numA = int(raw_input("...")) 
    ```

*   `abs(numB)`将计算 的绝对值`numB`，但不会对它做任何事情。您需要将该函数调用的结果存储在`numB`您喜欢的位置`numB = abs(numB)`。

*   `x and True or False`最近的 Python 版本中没有使用该成语；相反，使用`True if x else false`. 但是，返回`True`if `x == True`else`False`与 return 相同`x`，所以这样做。

*   你不需要循环`while x == True`。只是循环`while x`。

*   **您永远不会更改`numB`内部循环内部的值，因此它永远不会终止。**

* * *

我是这样写的：

```
while True:
    A = int(raw_input("Enter first integer: "))
    B = int(raw_input("Enter second integer: "))
    if B < 0: B = abs(B)

    print 'A = {}, B = {}'.format(A, B)

    while B & 1:
        print 'B is odd, add {} to product to get {}'.format(A, A)
        A = # not sure what you're doing here
        B = # not sure what you're doing here
    else:
        print 'Finished: {}'.format(A)

    if raw_input("Would you like to Start over? Y/N : ").lower() == 'n':
        break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:28:00.397

这里的另一个问题是您尝试在 print 语句中添加和除以数字，因此您不会在任何时候更改整数 numA 和 numB 的值（也就是说，整数 numA 和 numB 将在整个程序）。

要更改变量 numA 和 numB，您必须具有：

*   变量名=（一些作用于变量的函数）

例如 `numA = numA + 1`向 numA 加一

# python - 使用 Python 检查页面上是否存在标签

> ID：14747211
> 
> 赞同：0
> 
> 时间：2013-02-07T09:00:49.000
> 
> 标签：python, regex

我有一个带有下一个代码的页面：

```
<HTML>
<HEAD>
<TITLE>smth</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
</HEAD>
<BODY>
<div id="doc" class="searchN">
<div id="hd" style="border-bottom:0;">
    <a id="logo" class="logoN" href="/" alt="logo" title="open project"></a>

</div> 
    <div id="bd-cross">    
        <ol class="site" start=1>

            <li class="">
                <a href="url/">Smth</a>
                <div class="ref">
                <a href="News_and_Media/">Regional: Europe:</a>
          </div>    
            </li>

            <li class="">
                <a href="url2">Descr3</a> 
                <div class="ref">
                <a href="url3">Descr3</a>   
          </div>    
            </li>
....
</BODY>
</HTML> 
```

我需要检查`<li class="">`页面上的标签存在。我使用 Python+RegExp：

```
import re
import urllib2
url = 'url'
#Parse it
MainPage = urllib2.urlopen(url).read()
Li = re.findall("<div id=\"bd-cross\">*<li class=\"\">*</li>", MainPage)
try:
    if Li:
        print "Li tag on " +url+ ": Yes"
    else:
        print "Li tag on " +url+ ": No"
except:
    print "Error" 
```

输出是 No 但它应该是 Yes 因为页面包含它标签。如果我打印 Li 它输出'[]'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:07:35.363

您应该使用`BeautifulSoup`or之类的包`lxml.html.soupparser`，它会让您的生活更轻松。使用后者，您可以执行以下操作：

```
>>> import lxml.html.soupparser
>>> MainPage = urllib2.urlopen(url).read()
>>> HtmlDoc = lxml.html.soupparser.fromstring(MainPage)
>>> Elements = HmtlDoc.xpath('//div[@id="bd-cross"]//li[@class=""]')
>>> if len(Elements) > 0:
>>>     print 'Yes'
>>> else:
>>>     print 'No' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:10:30.543

假设您不想使用像 BeautifulSoup 这样的 HTML 解析器，*并*假设您在 HTML 中的某处有“bd-cross” div 标签，但不在您的摘录中，我敢打赌，您的正则表达式没有看到新的-线边界。

In fact, you are missing the `.` character in your regex, so I would also suggest using a regex tester to verify your regex does what you think it should, such as [this one](http://regexpal.com/).

To fix this, add `flags=re.DOTALL` to the end of the `re.findall` function as another argument.

See the [documentation](http://docs.python.org/2/library/re.html)

> Make the '.' special character match any character at all, including a newline; without this flag, '.' will match anything except a newline.

# azure - OpenLayers 的 CSS 在发布到 Azure 网站后中断

> ID：14747220
> 
> 赞同：0
> 
> 时间：2013-02-07T09:01:14.133
> 
> 标签：azure, openlayers

我创建了一个使用 OpenLayers 2.12 的非常简单的 ASP.NET 4.5 MVC4 网站。它只有一页显示一张地图，上面有一些点和线。如果我在本地运行它，它运行良好，但在发布到我的 Azure 网站后，OpenLayers 的 CSS 文件将无法加载。我现在已经在我的 bundleConfig 中添加了 OpenLayers CSS 硬编码，现在它可以正常工作了。但当然，这不是我想要的，因为 OpenLayers 有针对其他平台和浏览器版本等的特定 CSS 文件。

在本地，我只需要包含 openlayers.js 和 OpenLayers 然后添加正确的 css 文件。有人知道为什么在发布到 Azure 后这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:30:07.337

从 openlayers.js 中的文档：

```
Please remember that when your OpenLayers script is not named
"OpenLayers.js" you will have to make sure that the default theme is
loaded into the page by including an appropriate <link>-tag,
e.g.:

(code)
<link rel="stylesheet" href="/path/to/default/style.css" type="text/css">
(end code) 
```

因为 Azure 更改了包含的文件名，所以我确实应该自己添加对默认样式的引用。另外，我可以只链接到 style.css，例如 IE6 或 Mobile 的其他 css 文件不会被自动使用，这些只是供你自己在适当的时候使用。

# java - Java中的图像透明度或不透明度问题

> ID：14747223
> 
> 赞同：1
> 
> 时间：2013-02-07T09:01:24.633
> 
> 标签：java, image-processing, java-io

我一直在尝试使用 java 进行一些基本的图像处理（经过很长一段时间）。

我对原始图像执行的任何操作并将其另存为新图像 -> o/p 图像总是显得乏味（可能是不透明度或透明度的问题）。

我在下面粘贴我用来完成这项工作的功能：

//返回一个模糊的java缓冲图像

```
public static BufferedImage blurImage(BufferedImage image) 
{
    int w = image.getWidth(); 
    int h = image.getHeight(); 
    int alpha = 0;
    int red, green, blue, newPix;
    int pix[] = null;

    BufferedImage newImage = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

    for(int i=0,j=0; i<w; i++) 
    {
        for(j=0; j<h; j++) 
        {
            pix = getSurroundingPixels(image, i>0?i-1:0, i<w-1?i+1:w-1, j>0?j-1:0, j<h-1?j+1:h-1);
            red = green = blue = 0;
            for(int k=0; k<pix.length; k++) 
            {
                red += (pix[k]>>16) & 0xFF;
                green += (pix[k]>>8) & 0xFF;
                blue += (pix[k]) & 0xFF;
            }
            alpha = (image.getRGB(i,j)>>24) & 0xFF;
            red /= pix.length;
            green /= pix.length;
            blue /= pix.length;
            newPix = ((alpha<<24) | (red<<16) | (green<<8) | blue);
            newImage.setRGB(i,j, newPix);
        }
    }

    return newImage;
} 
```

我很感激有人在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:57:21.640

> 我现在已经替换`BufferedImage.INT_TYPE_ARGB`为`BufferedImage.INT_TYPE_RGB`，在此之后，[已处理] 图像不会显得暗淡，并且 [它] 看起来很正常。你能解释一下为什么会这样吗？

`TYPE_INT_ARGB`有一个`DirectColorModel` *带*alpha 的；`TYPE_INT_RGB`有一个`DirectColorModel` *没有*阿尔法。您的算法缩放`RGB`，但克隆`A`. 猜测一下，您的测试图像是不透明的，可能是`.jpg`图像，需要`BufferedImage.TYPE_INT_RGB`. 您可能希望使用此缩放的[示例](https://stackoverflow.com/a/5864503/230513)`A`或说明由 完成的颜色转换的[示例](https://stackoverflow.com/a/8767162/230513)`setRGB()`来检查您的图像。

# javascript - 使用 jquery 鼠标悬停时动画圆形缩略图大小增加

> ID：14747228
> 
> 赞同：0
> 
> 时间：2013-02-07T09:01:41.583
> 
> 标签：javascript, jquery, css, jquery-animate

我使用 Css3 边框半径生成了图像的圆形缩略图。我想要鼠标悬停动画，其中圆形缩略图尺寸在鼠标悬停时增长并在鼠标移出时返回原始尺寸。并且尺寸从圆圈中心增加，该圆圈的左右缩略图重叠。

CSS：

```
 #baar{position:fixed;width:100%;height:110px;background:black;top:130px;}

    ul#block{ display:inline-block; list-style:none; position:relative;left:0px;}

    ul#block li{float:left; list-style:none;width:110px; height:110px;overflow:visible; position:relative; text-align:center;padding-left:5px}

    ul#block li img {background:grey;width:100px; height:100px;border :5px solid red;border-radius:55px 55px 55px 55px;} 
```

html:

```
<body>
<div id="baar">
    <ul id="block">
        <li><img></li>   
         <li><img></li> 
         <li><img></li> 
         <li><img></li> 
    </ul>    
</div>
</body> 
```

这是我拥有的jquery，它给了我维度增长的动画，但圆圈不会保持在初始中心。宽度向右增加，高度向下增加。

```
$("ul#block li img").mouseover(function() {
$(this).animate({'width':130, 'height':130}, {duration:100});
                    }).mouseout(function(){

$(this).animate({'width':110, 'height':110}, {duration:100});
                    }); 
```

jsfiddle：http: [//jsfiddle.net/k9nQU/15/](http://jsfiddle.net/k9nQU/15/)

因此，请帮助我为动画编写适当的 jquery，其中圆圈长大，保持中心不变，并在动画期间重叠缩略图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:32:56.940

最简单的方法是使用 CSS3 的转换 + 变换。

```
div {
    background: hotpink;
    width: 50px;
    height: 50px;
    -webkit-transition: -webkit-transform 250ms;
    transition: transform 250ms;
}
div:hover {
    -webkit-transform: scale(1.2);
    transform: scale(1.2);
} 
```

如果你真的需要用 jQuery 来做，那么除了它的宽度/高度之外，你还需要使用元素的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:09:37.637

CSS3：

```
ul#block li img {
    background:grey;
    width:100px; 
    height:100px;
    border :5px solid red;
    border-radius: 55px;
    position: relative;
    left: 0;
    top: 0;
    -webkit-transition: all .1s ease;
}
ul#block li img:hover {
    width:120px; 
    height:120px;
    left: -10px;
    top: -10px;
    border-radius: 65px;
    -webkit-transition: all .1s ease;
} 
```

jQuery：

```
$('ul#block li img').on('mouseover', function() {
    $(this).animate({
        width: '120px',
        height: '120px',
        left: '-10px',
        top: '-10px',
        borderRadius: '65px'
    }, 100);
});
$('ul#block li img').on('mouseout', function() {
    $(this).animate({
        width: '100px',
        height: '100px',
        left: '0px',
        top: '0px',
        borderRadius: '55px'
    }, 100);
}); 
```

并记住为这些图像添加“位置：相对”！

# javascript - 没有 jQuery 做 Ajax 有多糟糕？

> ID：14747230
> 
> 赞同：11
> 
> 时间：2013-02-07T09:01:50.383
> 
> 标签：javascript, jquery, ajax, web-applications

我已经到了需要在我的页面上使用 Ajax 的地步，但这只是一小部分 - 查看输入的用户名是否在数据库中。正如[这里](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery)所解释的， Ajax 可以单独使用 JavaScript 完成。这样做的优点/缺点是什么？我倾向于这个，因为我不想要一个大型库，并且认为当其他一切都已经是 JavaScript 时，它会变得不必要地复杂。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:29:22.183

如果你不需要支持老版本的IE，比如IE6，那么很简单，你不需要任何[工厂函数](http://www.quirksmode.org/js/xmlhttp.html)，简单的：

```
var http = new XMLHttpRequest(); 
```

适用于所有浏览器。另外，在最近的浏览器中（我也相信[IE8](http://msdn.microsoft.com/en-us/library/ie/ms536942(v=vs.85).aspx)），您可以使用`onload`事件而不是`onreadystate`：

```
var http = new XMLHttpRequest();

http.open("GET", "somepage.html", true);
http.onload = function () {
    alert("Request complete: " + http.responseText);
}
http.send(); 
```

`success`这与jQuery的处理程序非常相似。

有关详细信息，请参阅：[使用 XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

然而，jQuery 现在将 ajax 调用威胁作为[promises](http://api.jquery.com/jQuery.ajax/)，这使得一些场景（比如在运行一些代码之前等待多个 ajax 调用完成）更容易开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:04:19.917

还不错……只是没有那么小： [Small Ajax JavaScript library](https://stackoverflow.com/questions/3470895/small-ajax-javascript-library) ，正如那里解释的那样，您也可以只获得那些单独处理 ajax 的小型库之一。

编辑：正如 MCL 在他的评论中指出的那样，还有这个片段：[https ://gist.github.com/mythz/1334560](https://gist.github.com/mythz/1334560)

它似乎实现了 jQuery 语法，但仅适用于 ajax 调用，如果您习惯了它，这可能是一个更好的选择！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:04:13.983

这一点都不错，jQuery 只是提供了一个快捷方式来完成它，而手动编写它会变得更大一些。差不多就是这样。

如果您只想要一个“ajax 助手”，请尝试使用来自 quirksmode 的这段代码：[http ://www.quirksmode.org/js/xmlhttp.html](http://www.quirksmode.org/js/xmlhttp.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T09:06:22.823

jQuery 只是一个允许我们更有效地进行 AJAX 调用的框架。较小的代码。是否使用 jQuery 并不重要。这完全由您决定。如果 jQuery 是重量级的，只需使用仅提供 AJAX 功能的库。您也可以使用纯 JS 进行 AJAX 调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T09:06:46.813

我认为最大的优点是 jQuery 解决了处理 AJAX 调用的跨浏览器方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T09:08:20.430

除了在您的页面上加载 80kb 的 Jquery.min.js 之外，没有什么不同......

# java - 构造函数未定义，而构造函数确实已定义

> ID：14747234
> 
> 赞同：0
> 
> 时间：2013-02-07T09:01:57.083
> 
> 标签：java

此行导致错误“构造函数 Vector(double[], double[]) 未定义”：

```
Vector<trainingSet> set = new Vector<trainingSet>({1.0, 1.0}, {0.0, 0.0}); 
```

而“trainingSet”类确实有一个对应的构造函数：

```
public class trainingSet {
    public double [] pattern, result;
    public trainingSet(){}
    public trainingSet(double[] Pattern, double[] Result){
        pattern = Pattern;
        result = Result;
    }
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:04:17.327

因为您不是在初始化`trainingSet`而是在初始化`Vector`类本身。`Vector`只有默认构造函数，具有初始大小的构造函数，您还可以将其他集合传递给它。你应该做类似的事情

```
Vector<trainingSet> vector = new Vector<trainingSet>();
double[] result = {1.0, 1.0};
double[] pattern = {0.0, 0.0};
vector.add(new trainingSet(result, pattern)); 
```

除非您不需要同步，否则还可以考虑使用[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)而不是。收集速度比 a 慢得多。`Vector``Vector``List`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:05:49.797

Java`Vector`没有采用集合类型的单个元素的构造函数。此外，您还试图通过传递两个`Arrays`双精度而不是训练集来构造向量。可能的解决方法是：

```
Vector<trainingSet> set = new Vector<trainingSet>();
set.add(new trainingSet(new double[]{1.0, 1.0}, new double{0.0, 0.0})); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:05:51.250

您正在将参数传递给向量构造函数，而不是在名为**trainingSet的类的 cunstructor 中**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T09:14:53.120

您正在调用不存在的 Vector 类的构造函数，试试这个，

```
 double[] Pattern={1.0, 1.0};
    double[] Result={0.0, 0.0};

    Vector<trainingSet> set = new Vector<trainingSet>();
    set.add(new trainingSet(Pattern, Result)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:03:41.627

因为你的定义`Vector<trainingSet>`

Vector`trainingSet`只需要类型而不是`double`前置

你可以把它改成

```
Vector<trainingSet> set = 

new Vector<trainingSet>().add(new trainingSet({1.0, 1.0},{0.0,0.0}))); 
```

# javascript - 何时加载图像以使用 Javascript 函数 drawImage()？

> ID：14747237
> 
> 赞同：0
> 
> 时间：2013-02-07T09:02:09.603
> 
> 标签：javascript

我想使用 drawImage() 函数在 Javascript 动画中加载图像，但图像没有使用我当前的代码加载。我想我需要特别要求在某个时候加载图像，但我不确定何时或如何加载。这个想法是制作一个穿过画布的云。感谢您的帮助。

```
function draw(x,y){
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    x += 2;
    if(x>1000){
        x=0;
    }

    var cloud = new image();
    cloud.src='small_cloud.png';
    ctx.drawImage(cloud,x,0);

    var loopTimer = setTimeout('draw('+x+','+y+')',20);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:09:59.067

尝试`new Image()`而不是`new image()`

也搬

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');    
var cloud = new image();
cloud.src='small_cloud.png'; 
```

到`draw()`函数之外，因为你只想设置这些东西一次。延迟此设置，直到浏览器有时间解析文档，例如使用

```
window.onload = function(){ ... }; 
```

（尽管实际上您必须确保不要通过使用正确的偶数处理程序注册来覆盖任何现有的 window.onload 侦听器。）还将第一次调用延迟到`draw()`图像加载完毕，例如：

```
cloud.onload = function(){
    draw(cloud, 0, 0);
} 
```

我也会改变

```
var loopTimer = setTimeout('draw('+x+','+y+')',20); 
```

到

```
setTimeout(function(){ draw(x, y); }, 20); 
```

因为您似乎没有使用 loopTimer 变量，并且由于将 setTimeout 传递给匿名函数而不是字符串被认为是更好的做法。

最后，它看起来像这样：

```
window.onload = function() {
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');    
    var cloud = new image();
    cloud.src='small_cloud.png';    
    cloud.onload = function(){
        draw(ctx, cloud, 0, 0);
    };
};

function draw(ctx, cloud, x,y){
    x += 2;
    if(x>1000){
        x=0;
    }

    ctx.drawImage(cloud,x,0);

    setTimeout(function(){ draw(ctx, cloud, x, y); }, 20);
} 
```

请注意，由于 ctx 不再在 draw() 函数内部定义，因为它是匿名 window.onload 函数的本地函数，因此您还必须将 ctx 传递给 draw() 函数。

# tfs - HTML 链接到 TFS 2012 中的工作项

> ID：14747239
> 
> 赞同：2
> 
> 时间：2013-02-07T09:02:17.487
> 
> 标签：tfs, tfs-workitem, tfs-2012

我正在使用 TFS 2012 Warehouse 创建一个自定义报告，其中显示有关工作项的一些信息。我想在报告中的工作项元素上放置一个链接，将用户带到团队门户中的工作项。是否可以直接链接到花哨的新团队门户中的工作项。（不是 sharepoint 团队网络访问）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:32:35.723

是的 - 只需按以下格式创建链接：

```
http://tfsServer:8080/DefaultCollection/TeamProject/_workitems/edit/123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T13:22:26.400

就我而言，我发现语法不同。以下对我有用：

```
http://<TfsServer>:8080/tfs/<Collection>/<ProjectName>/_workitems#_a=edit&id=<TfsID> 
```

只需根据需要修改`<TfsServer>`,`<Collection>`和`<ProjectName>`the `<TfsID>`。

例如：

```
http://myServer:8080/tfs/myCollection/myProject/_workitems#_a=edit&id=123 
```

# android - 无法暂停计时器并在应用程序中恢复它？

> ID：14747240
> 
> 赞同：0
> 
> 时间：2013-02-07T09:02:33.783
> 
> 标签：android, timer

我在一个应用程序中制作了计时器，我已经启动它并停止它并且无法在它暂停的同时暂停和恢复。我使用以下代码来实现应用程序的时间。

```
 String Current_click_btn ; 
```

当单击暂停 btn 时，以毫秒为单位保存的上一个当前时间，在恢复时，我会将以前保存的值增加 100 值，因此当再次启动线程时，它将增加保存的当前时间 100\. 重复

```
@Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
       if(v ==Start)
            {
                Current_clickbtn="Start";
                startTime = System.currentTimeMillis();
                mHandler.removeCallbacks(startTimer);
                mHandler.postDelayed(startTimer, 0);
            } 

            if(v == Pause)
            {
                Current_clickbtn="Pause";
                if(Pause.getText().equals("Pause"))
                {
                    Pause.setText("test");
                    mHandler.removeCallbacks(startTimer);
                }
                else
                {   
                    mHandler.postDelayed(startTimer, 0);
                    Pause.setText(getString(R.string.pause));
                }
            }

            }
   private Runnable startTimer = new Runnable() 
{
       public void run() {

          if(Current_clickbtn.equals("Start"))
          {
             CurrentTime = System.currentTimeMillis();
             elapsedTime = CurrentTime - startTime;
          }
          else
          {   
               elapsedTime = CurrentTime - startTime;
              CurrentTime+=100;
          }
             updateTimer(elapsedTime,ctx);

               mHandler.postDelayed(this,REFRESH_RATE);

       }
};

            public void updateTimer (float time,Context ctx){
                    secs = (long)(time/1000);
                    mins = (long)((time/1000)/60);
                    hrs = (long)(((time/1000)/60)/60);

                    /* Convert the seconds to String 
                     * and format to ensure it has
                     * a leading zero when required
                     */
                    secs = secs % 60;
                    seconds=String.valueOf(secs);
                    if(secs == 0){
                        seconds = "00";
                    }
                    if(secs <10 && secs > 0){
                        seconds = "0"+seconds;
                    }

                    /* Convert the minutes to String and format the String */

                    mins = mins % 60;
                    minutes=String.valueOf(mins);
                    if(mins == 0){
                        minutes = "00";
                    }
                    if(mins <10 && mins > 0){
                        minutes = "0"+minutes;
                    }

                    /* Convert the hours to String and format the String */

                    hours=String.valueOf(hrs);
                    if(hrs == 0){
                        hours = "00";
                    }
                    if(hrs <10 && hrs > 0){
                        hours = "0"+hours;
                    }

                    /* Although we are not using milliseconds on the timer in this example
                     * I included the code in the event that you wanted to include it on your own
                     */

                    System.out.println("***"+hours + ":" + minutes + ":" + seconds);
                    Timetextview=(TextView)((Activity) ctx).findViewById(com.carenet.activity.R.id.textView_time);
                    Timetextview.setText(hours + ":" + minutes + ":" + seconds);

                } 
```

解放军帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:18:57.603

您的代码如下：

```
 CurrentTime = System.currentTimeMillis();
                     elapsedTime = CurrentTime - startTime; 
```

也就是说，你是否暂停它，它显示时间`startTime`

# r - R中的堆积条形图，每天多行

> ID：14747244
> 
> 赞同：5
> 
> 时间：2013-02-07T09:02:40.407
> 
> 标签：r, charts, plot, data-visualization, bar-chart

我想将一天中完成的工作显示为堆积条形图，以便每天查看我在每个类别中完成了多少活动，Y 轴代表时间从 0:00 到 23： 59.

```
#   day             tstart   tend   duration category
1   2012-10-01      13:40    14:16  36       Recreation
2   2012-10-02      10:15    10:57  42       Work
3   2012-10-02      13:23    13:47  24       Chores
4   2012-10-02      13:47    14:48  61       Work
5   2012-10-03      09:09    11:40  151      Work
6   2012-10-03      13:33    14:04  31       Recreation
7   2012-10-03      17:00    19:40  160      Recreation 
```

我知道我必须将“时间开始”转换为数字，但我不知道如何“合并”同一天的多行，以便它们仅构成图中的一个条形。

在（非常原始的）ASCII艺术中，我期待的是：

```
23:00
22:00
21:00
20:00
19:00                C
18:00                C
17:00                C
16:00
15:00
14:00          W     R
13:00    R     C
12:00
11:00                W
10:00          W     W
 9:00                W
 8:00
 7:00
 6:00
 5:00
 4:00
 3:00
 2:00
 1:00
 0:00
        01    02    03 
```

（其中 R、W 和 C 将是用于不同活动的不同颜色的条：娱乐、工作和家务）

事实上，作为 R 图中的新手，我不知道我必须查看的 plot 函数（和 plot 包），而且因为它们将是图中的漏洞——没有记录（例如）之间的活动0:00 和 09:09，然后在 2012-10-03 的 11:40 和 13:33 之间，以此类推……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:41:41.740

这是一个快速的解决方案`ggplot2`：

```
d <- read.table(textConnection("
day             tstart   tend   duration category
2012-10-01      13:40    14:16  36       Recreation
2012-10-02      10:15    10:57  42       Work
2012-10-02      13:23    13:47  24       Chores
2012-10-02      13:47    14:48  61       Work
2012-10-03      09:09    11:40  151      Work
2012-10-03      13:33    14:04  31       Recreation
2012-10-03      17:00    19:40  160      Recreation"), header=TRUE)

d$day <- as.Date(d$day)
d$tstart <- as.POSIXct(d$tstart, format="%H:%M")
d$tend <- as.POSIXct(d$tend, format="%H:%M")

library(ggplot2)
library(scales)
g <- ggplot(data=d, aes()) + geom_segment(aes(x=day,xend=day,y=tstart,yend=tend,color=category),size=20) + scale_x_date(labels = date_format("%d")) 
g + scale_y_datetime(limits=c(as.POSIXct("00:00", format="%H:%M"),as.POSIXct("23:59", format="%H:%M")), labels = date_format("%H:%M")) 
```

这使 ：

![在此处输入图像描述](../Images/4186a9a9c7fad829e9ee2f31999465e3.png)

**已编辑：**最初答案中的 y 轴是错误的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:46:39.207

在我写这篇文章时，juba 使用 ggplot2 发布了出色的解决方案，但我仍将发布我的解决方案作为替代方案。

这是一种非常粗略的做法，但它完成了您可能正在寻找的东西。

`hh:mm`首先是一个将格式时间转换为十进制表示的小实用函数

```
decTime <- function(x) {
    t <- as.numeric(strsplit(x, ":")[[1]])
    t <- t[1] + t[2]/60
    return(t)
}

str <- 'n   day     tstart   tend   duration category
1   2012-10-01      13:40    14:16  36       Recreation
2   2012-10-02      10:15    10:57  42       Work
3   2012-10-02      13:23    13:47  24       Chores
4   2012-10-02      13:47    14:48  61       Work
5   2012-10-03      09:09    11:40  151      Work
6   2012-10-03      13:33    14:04  31       Recreation
7   2012-10-03      17:00    19:40  160      Recreation'

df <- read.table(textConnection(str), header=T) 
```

将日期转换为数字（以便于指定矩形的宽度）和时间转换为十进制

```
df$day  <- gsub('2012-10-', "", df$day)
df$day <- as.numeric(df$day)
df$starttime <- sapply(as.character(df$tstart), decTime, USE.NAMES=F)
df$endtime <- sapply(as.character(df$tend), decTime, USE.NAMES=F) 
```

获取不同矩形的颜色

```
df$color <- ifelse(df$category=='Recreation', 'RED', ifelse(df$category =='Chores', 'BLUE', 'GREEN')) 
```

一次一步绘制图表

```
#Plot empty graph
plot(x=unique(df$day), y=c(0,0,0), axes=F, ylim=c(0,24), xlim=c(0.5,3.5), xlab='date', ylab='time', type='n')
#Label axes properly
axis(side=1, at=c(1,2,3), labels=c('01', '02', '03'))
axis(side=2, at=seq(from=0,to=24,by=1), labels=seq(from=0,to=24,by=1))
#Draw required rectangles
rect(df$day-0.25, df$starttime, df$day+0.25, df$endtime, col=df$color) 
```

结果应该有点你可能想要的。

![在此处输入图像描述](../Images/0adcf1880bed3d0cccd80d27d4261177.png)

# c++ - 如何在 C++ 中获取没有 WMI 的硬件信息？

> ID：14747245
> 
> 赞同：1
> 
> 时间：2013-02-07T09:02:40.823
> 
> 标签：c++, windows

快速掌握场景，

*   该应用程序在定制的 Windows XP 嵌入式盒子上运行。
*   我们必须制作盒子的硬件指纹

原来定制的 windows XP 嵌入式没有功能性的 WMI 服务。有没有办法在没有WMI的情况下查询CPU、芯片组、主板等的标题和序列号等硬件信息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:07:25.640

一般来说，CPUID 提供了很多信息。

但是关于序列号：你很少能得到 cpu 的序列号（更不用说主板的），它必须在 BIOS 中激活。

[https://en.wikipedia.org/wiki/CPUID](https://en.wikipedia.org/wiki/CPUID)

[https://en.wikipedia.org/wiki/CPUID#EAX.3D3:_Processor_Serial_Number](https://en.wikipedia.org/wiki/CPUID#EAX.3D3:_Processor_Serial_Number)

# asp.net - 如何在 C# 中将 MS Access 日期转换为字符串

> ID：14747246
> 
> 赞同：0
> 
> 时间：2013-02-07T09:02:45.603
> 
> 标签：asp.net

我能够将 Access 中的数据收集到我的 texbox 中，但日期不会停止给出错误。有没有办法抓住日期或者那是不可能的？在这个网站上没有任何地方可以找到将日期转换为字符串以显示到文本框中的souluiton。任何帮助都会很棒，否则我必须将数据库日期更改为字符串。

```
//Dates not displaying, only errors in the while loop
//strBirthday = dr["STU_BIRTHDAY"].ToString();  This won't diplay like the other 2 strings. 

protected void btnQuery_Click(object sender, EventArgs e)
    {
        OleDbConnection con = new OleDbConnection("Provider = Microsoft.ACE.OLEDB.12.0; Data Source = C:\\collection\\database.accdb");
        string strQueryString = "SELECT STU_NAME, STU_ADDRESS, STU_BIRTHDATE FROM Students WHERE STU_ID = @SID";
        OleDbCommand com = new OleDbCommand(strQueryString, con);
        com.Parameters.AddWithValue("SID", txtStuID.Text.Trim());
        con.Open();
        OleDbDataReader dr = com.ExecuteReader();

        string strName = "";
        string strAddress = "";
        string strBirthday = "";

        while (dr.Read())
        {
            strName = dr["STU_NAME"].ToString();
            strAddress = dr["STU_ADDRESS"].ToString();
            strBirthday = dr["STU_BIRTHDAY"].ToString();   
        }
        txtStuName.Text = strName;
        txtStuAddress.Text = strAddress;
        txtStuBirthDate.Text = strBirthday;
        dr.Close();
        con.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:07:46.860

使用 DataReader 对象的“Get”方法：

```
DateTime dt = dr.GetDateTime("STU_BIRTHDAY");
txtBirthday = dt.ToString(CultureInfo.CurrentCulture, "yyyy-MM-dd"); 
```

一般来说，避免使用 Object.ToString()。

永远不要将日期作为字符串存储在数据库中，始终使用数据库的内置“日期”或“日期时间”类型。还将日期时间值存储为 UTC，而不是本地的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T14:56:04.120

看着那（这 ：-

方法一：

```
string strQueryString = "SELECT STU_NAME, STU_ADDRESS, 
CONVERT(varchar,STU_BIRTHDATE,103) as STU_BIRTHDATE
FROM Students WHERE STU_ID = @SID"; 
```

方法二：

```
string strQueryString = "SELECT STU_NAME, STU_ADDRESS, 
FORMAT(STU_BIRTHDATE, "dd/mm/yyyy") as STU_BIRTHDATE
FROM Students WHERE STU_ID = @SID"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T17:00:21.997

```
string strNewDate = startDate.ToString("yyyyMMdd"); 
```

你可以使用任何格式。就我而言，我使用过`"yyyyMMdd"`，但有很多格式。

# c# - Visual Studio 2012：属性符号中的符号符号

> ID：14747254
> 
> 赞同：1
> 
> 时间：2013-02-07T09:03:09.253
> 
> 标签：c#, visual-studio, ide

我注意到观察窗口中有一个我以前从未见过的符号。它看起来像这样：

[![无法识别符号的屏幕截图](../Images/25228c6c4340f436467b05872034802b.png)](https://i.stack.imgur.com/EfV0u.png)

这是什么意思？当我无法访问时，为什么我可以看到价值呢？[我已经在MSDN](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/y47ychfe(v=vs.110))上看过，但没有列出。有谁知道这个符号是什么意思？

**注意：**我指的是左侧的图标。^([1](https://stackoverflow.com/questions/14747254/visual-studio-2012-sign-symbol-in-property-symbol#comment20637788_14747254)) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T13:48:13.397

我刚收到，提醒了这个帖子，决定回复一下。

这只是说该属性具有访问修饰符`internal`。

仅此而已，仅此而已。

# google-chrome - 会话变量在 chrome 中不起作用

> ID：14747256
> 
> 赞同：1
> 
> 时间：2013-02-07T09:03:20.053
> 
> 标签：google-chrome, session, payment-gateway

我检查了许多过程，但仍然存在问题。

我正在创建一个会话变量，它在所有页面中都运行良好，但是当我尝试将支付网关传递`session["amt"]`给支付网关时，**它** ***不仅在 chrome***中运行，*而且在 Mozilla 和 IE 中运行良好*。

谁能建议我我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T20:36:09.403

Disable all Chrome Extensions. Close your Chrome browser. (Mac Os X: Stop Chrome with CMD+Q) Then try again. If the problem is solved: turn on your Chrome Extensions one by one to detect the conflicting extension(s).

# c# - 将文件保存在目录文件夹中

> ID：14747258
> 
> 赞同：0
> 
> 时间：2013-02-07T09:03:36.903
> 
> 标签：c#, javascript, asp.net, extjs

我在将浏览文件保存到本地目录文件夹时遇到问题。我使用 extJs 作为客户端，使用 C# .net 作为服务器端。我从 extjs 浏览文件并仅将文件名（不是整个路径）传递给 ashx 处理程序。在 ashx 处理程序中，我想将此文件保存到目录文件夹中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:15:49.883

JavaScipt 中的文件上传： [https ://developer.mozilla.org/en-US/docs/FileGuide/FileUpDown](https://developer.mozilla.org/en-US/docs/FileGuide/FileUpDown)

注意：如果您想在 IE 中执行此操作，请使用 jQuery 插件，因为 IE 不支持 formdata，并且很难自己编写 JavaScript 代码。

在 C# 中处理上传 [http://support.microsoft.com/kb/323246](http://support.microsoft.com/kb/323246)

很抱歉没有发布代码，但是要正确执行它涉及的内容太多了。

# .net - 代码总是生成相同的值

> ID：14747259
> 
> 赞同：0
> 
> 时间：2013-02-07T09:03:39.590
> 
> 标签：.net, sql, vb.net

我正在使用 Btngen 为我的 TextBox 生成一个 ID，我拥有`0001`并将其保存到 SQLSERVER 中的数据库中，问题是在我关闭程序并再次重新打开它之后，再次单击 Btngen 后生成到我的 TextBox 的值还在`0001`。我怎样才能避免这种情况？如何保留已经产生的价值并转移到下一个价值？我使用增量，但它仅在程序仍在运行时才有效，但如果我关闭程序并再次运行它，它会回到`0001`任何人告诉我该怎么做？

这是我的代码：

```
Dim p1num As Integer = 0
 p1num += 1
 txtPNumber.Text = p1num.ToString("D4")

Dim SQLcon As New SqlConnection
        Dim SQLdr As SqlDataReader
        Try
            SQLcon.ConnectionString = "Data Source=####;Initial Catalog=####;Persist Security Info=True;User ID=####;Password=####"
            Dim SQLcmd As New SqlCommand("INSERT INTO dbo.Patients" & _
            "(pIDNo)" & _
            "VALUES(@pIDNo",SqlCon)
            SQLcmd.Parameters.AddWithValue("@pIDNo", txtPNumber.Text)
            SQLcon.Open()
            MsgBox("Patient Added!", MsgBoxStyle.Information)
            SQLdr = SQLcmd.ExecuteReader()
        Catch ex As Exception
            MessageBox.Show("Error Occured, Can't Add Patient!" & ex.Message)
        Finally
            SQLcon.Close()
        End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:13:16.987

你不应该这样做。

如果您需要每条记录都有一个唯一的、生成的整数 id，每次创建记录时都会增加 1，那么请使用数据库中的 Identity 字段。

在列属性的标识规范中，设置：

*   （身份）改为“是”
*   身份增量为“1”
*   身份种子为“1”

您可能还应该将此值设置为表上的主键。

保存记录后，您应该查询数据库以在 UI 中显示生成的 ID 值。

# vba - 在 Word 2010 标题中插入文本和字段而不使用 .Select

> ID：14747261
> 
> 赞同：2
> 
> 时间：2013-02-07T09:03:41.817
> 
> 标签：vba, header, field, word-2010

我正在尝试修复包含文件名、保存日期和页码字段以及每个字段之间的一些文本的 Word 2010 页眉，如下所示：文件名+“”+保存日期+选项卡+页码。但是，我似乎无法将琴弦放在正确的位置。我到目前为止是这样的：

```
Sub CreateHeader()
    Dim myRange As Range
    With ActiveDocument
        Set myRange = .Sections(1).Headers(wdHeaderFooterPrimary).Range
        .Fields.Add Range:=myRange, Type:=wdFieldFileName, PreserveFormatting:=True
        myRange.Collapse wdCollapseEnd
        myRange.InsertAfter (" ")
        myRange.Collapse wdCollapseEnd
        .Fields.Add Range:=myRange, Type:=wdFieldSaveDate, Text:="\@ YYYY-MM-DD", PreserveFormatting:=True
        myRange.InsertAfter (Chr(9))
        myRange.Collapse wdCollapseEnd
        .Fields.Add Range:=myRange, Type:=wdFieldPage, PreserveFormatting:=True
    End With
End Sub 
```

但是，在执行 sub 之后，不同的部分并不是我想要的。相反，它们显示为文件名+“”+选项卡+页码+保存日期。我在这里做错了什么？如果可能的话，我宁愿不诉诸`.Select`.

（请注意，我最近问[了一个类似的问题](https://stackoverflow.com/questions/14710750/insert-two-fields-in-word-2010-page-header-using-vba)。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:41:15.307

我相信您的问题源于您将`myRange`变量设置为标题文本，当它为空时，它只是第一个（空）字符。添加 Savedate 后，它似乎超出了这个原始范围。您需要添加两件事才能使您的代码正常工作。

首先，您希望在每次插入后折叠到最后，但您还需要`myRange`在插入 SaveDate 后将标题范围（变量）重新定义为标题。

这有点难看，但以下代码似乎可以满足您的需求。请注意，如果我不把最后一个`wdCollapseEnd`放在代码中，它就不起作用。

最后，我会在最后更新您的字段，这样您就不必自己手动完成。

```
Sub CreateHeader()
    Dim myRange As Range
    With ActiveDocument
        Set myRange = .Sections(1).Headers(wdHeaderFooterPrimary).Range
        .Fields.Add Range:=myRange, Type:=wdFieldFileName, PreserveFormatting:=True
        myRange.Collapse wdCollapseEnd
        myRange.InsertAfter (" ")
        myRange.Collapse wdCollapseEnd
        .Fields.Add Range:=myRange, Type:=wdFieldSaveDate, Text:="\@ YYYY-MM-DD", PreserveFormatting:=True
       Set myRange = .Sections(1).Headers(wdHeaderFooterPrimary).Range
       myRange.Collapse wdCollapseEnd
       myRange.InsertAfter (Chr(9))
       myRange.Collapse wdCollapseEnd
       .Fields.Add Range:=myRange, Type:=wdFieldPage, PreserveFormatting:=True
       myRange.Fields.Update
End With 
```

结束子

# events - 单选按钮看起来检查悬停事件？

> ID：14747262
> 
> 赞同：2
> 
> 时间：2013-02-07T09:03:52.127
> 
> 标签：events, radiobuttonlist

是否可以通过鼠标悬停事件来控制单选按钮的显示？

目标是当鼠标悬停时它看起来被选中，而当鼠标离开时它看起来未被选中。但它只有在被点击时才会被检查，就像评级一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:24:43.840

你可以使用这样的东西：

```
$("input:radio").hover(function(){
        $(this).prop('checked', true);
}, function(){
        //MouseOut event
        $(this).prop('checked', false);
}).click(function(){
    //Unbind the hover event for all the radio buttons
    $("input:radio").unbind('mouseenter mouseleave')
    //Check clicked radio button
    $(this).prop('checked', true);
}); 
```

我为你做了一个小提琴：http: [//jsfiddle.net/B6qBz/](http://jsfiddle.net/B6qBz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:28:16.433

在摆弄了一下之后，我想出了这个......看看这个[小提琴](http://jsfiddle.net/jasper/n8CdM/1/)，看看是否有诀窍......哦，既然你没有提到任何特定的语言，所以我用 jQuery 实现了这个......希望它帮助

这可能不是完美的解决方案，但绝对符合要求：

HTML：

```
<input type="radio" name="cols" id="col-1" />
<br />
<input type="radio" name="cols" id="col-2" />
<br />
<input type="radio" name="cols" id="col-3" /> 
```

JS：

```
var clicked = false;
var clickedId;

$('input').click(function () {
    clicked = true;
    clickedId = $(this).attr('id');
});
$('input').hover(function () {
    $(this).prop('checked', true);
}, function () {
    if (clicked === true) {
        $('#' + clickedId).prop('checked', true);
    } else {
        $(this).prop('checked', false);
    }

}); 
```

# c# - C# 二进制搜索

> ID：14747263
> 
> 赞同：1
> 
> 时间：2013-02-07T09:03:58.000
> 
> 标签：c#

```
public int BinarySearch(int x)
{
    //if (Attendees.Length == 0)
    //    return -1;
    int mid =  (Count/ 2) -1;
    Student cur = new Student(x);

    while (cur.CompareTo(Attendees[mid]) != 0)
    {
        int sCount = Count;
        if (cur.CompareTo(Attendees[mid]) < 0)
        {
            int NCount = sCount / 2;
            mid = NCount / 2 - 1;    
        }
        if (cur.CompareTo(Attendees[mid]) > 0)
        {
            int Start = mid +1;
            mid = (Start + sCount) / 2;
        }
        else
            break;

        cur = Attendees[mid];                
    }
    if (cur.CompareTo(Attendees[x]) == 0)
        return mid;
    else 
        return -1;
} 
```

谁能帮我找出为什么我的二进制搜索不起作用？我对编程很陌生，所以任何帮助都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:16:14.567

我认为您并没有真正掌握二进制搜索的含义。`x`在您的代码中，您正在搜索数组中的哪个位置元素- 你猜怎么着？就位了`x`！

二分查找的意义在于找出一个元素的索引。Soooo 你需要搜索一个给定的`Student`：

```
public int BinarySearch(Student student)
{
    // Search the entire range
    int min = 0;
    int max = Attendees.Length;
    int mid = 0;

    do
    {
        // Find the pivot element
        mid = min + ((max - min) / 2);

        // Compare
        int comparison = student.CompareTo(Attendees[mid]);
        if (comparison < 0)
        {
            max = mid;
        }
        if (comparison > 0)
        {
            min = mid;
        }
    }
    while (min < max && comparison != 0);

    if (comparison != 0)
        return -1;
    return mid;
} 
```

这段代码可能无法 100% 工作，因为我还没有尝试过并将它写在我的脑海中，但它会为你指明正确的方向。现在，在此代码上使用调试器并单步执行它以查看它是否按预期工作。

# php - 使用 Javascript 验证选择多个复选框

> ID：14747266
> 
> 赞同：0
> 
> 时间：2013-02-07T09:04:11.937
> 
> 标签：php, javascript, forms, checkbox

我正在编写一个表单，可以选择多个复选框并将其保存到 MySQL 数据库中。但是，我现在想限制用户可以使用 javascript 选择的复选框的数量，并且遇到了一些麻烦。

导入功能似乎仍然有效，每个复选框需要彼此具有相同的名称，以便它们可以被识别和内爆，但是要使 Javascript 功能正常工作，每个名称都需要不同，以便可以区分它们。

任何建议将不胜感激！

这是我一直在玩的代码。

Javascript函数：

```
<?php $calc = mysql_query($query) or die(mysql_error()); ?>

<SCRIPT LANGUAGE="javascript">

function KeepCount() 
{
var NewCount = 0

<?php while($count_row = mysql_fetch_array($calc)){
echo "

if (document.import1.checkbox".$count_row['id'].".checked)
{NewCount = NewCount + 1}

";
} ?>

if (NewCount == 6)
{
alert('You can select up to 5 competitors. If you wish to import more you will need to add more judges.')
document.import1; return false;
}
} 
</SCRIPT> 
```

形式：

```
<form action="import_process.php" method="post" name="import1" id="import1">
<input name="import" type="submit" id="import" value="Import">

<table>
<tr>
<td>&nbsp;</td>
<td>Name</td>
<td>Gender</td>
</tr>

<?php $counter = 1;
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
echo "<tr bgcolor=white>";
echo "<td align=\"center\">
<input name=\"checkbox".$row['id']."\" type=\"checkbox\" id=\"checkbox[]\" value=\"".$row['id']."\" onClick=\"return KeepCount()\"></td>";
}
echo "<td>".$row['name']."</td>";
echo "<td>".$row['gender']."</td>";
echo "</tr>";
$counter++;
}
?>
</table>
</form> 
```

import_process.php：

```
if(isset($_POST['checkbox'])){
$checkbox = $_POST['checkbox'];
$id = "('" . implode( "','", $checkbox ) . "');" ; 
$sql="
INSERT INTO..." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:32:15.397

理解您的代码有点困难，但我认为您对名称和 ID 的差异感到困惑。每个复选框中的 ID 必须不同，名称必须相同：

```
<input id=\"checkbox".$row['id']."\" type=\"checkbox\" name=\"checkbox[]\" value=\"".$row['id']."\" onClick=\"return KeepCount()\"></td>"; 
```

name-attribute 是唯一的，它需要 []，因此您可以在 array 中获得结果`$_POST['checkbox']`。

第二个是，你的函数 KeepCount 似乎总是检查相同的复选框（或者我真的不明白它是如何工作的），因为无论如何`$count_row['id']`，它在页面被解析时设置一次，所以 javascript 函数不能真正计算任何东西。

因此，像这样更改复选框创建：

```
<input id=\"checkbox".$row['id']."\" type=\"checkbox\" name=\"checkbox[]\" value=\"".$row['id']."\" onClick=\"return KeepCount(this)\"></td>"; 
```

和这样的javascript

```
var count = 0;    

function KeepCount(it) {
 if (it.checked) {
  count = count + 1;
 } else {
  count = count - 1;
 }
 if (count == 6) {
  alert('You can 
  etc. 
```

那应该行得通。

顺便说一句： value=row['id'] 似乎也是胡说八道。

# java - 使用 PDFBox 从 pdf 中读取文本

> ID：14747267
> 
> 赞同：0
> 
> 时间：2013-02-07T09:04:13.203
> 
> 标签：java, pdf, netbeans, jar, pdfbox

我听说 PDFBox 是从 pdf 中读取文本的最佳 Java 库。所以，我下载了`pdfbox-1.7.1.jar`, `jempbox-1.7.1.jar`and `fontbox-1.7.1.jar`（我不确定最后两个是否必要）。我将它们添加到我在 Netbeans 中的项目中。

当我尝试他们网站上的简单示例时：

`Document luceneDocument = LucenePDFDocument.getDocument(something)`

它不会起作用，因为`org.apache.pdfbox.searchengine.lucene`不存在。我也试过了`pdfbox-1.4.0`，结果是一样的。那么，我在哪里可以找到该类（是否需要任何其他我不知道的 jar？）或从 pdf 读取文本的其他方法？

**编辑：我在这封**[旧邮件](http://mail-archives.apache.org/mod_mbox/lucene-java-user/200408.mbox/%3C002f01c48764%2448520270%248714a8c0@ssl%3)中发现了同样的问题；但是线程很旧，解决方法也不起作用。

# c# - 在 C# 中创建 Excel 文件会在 Office 2003 中出现错误

> ID：14747269
> 
> 赞同：1
> 
> 时间：2013-02-07T09:04:15.500
> 
> 标签：c#, office-2007, office-2003

我正在创建一个应用程序，当单击按钮而不保存它时创建一个 Excel 文件，它在我的本地计算机上运行良好，而有 Microsoft Office 2007。当我将此应用程序放在具有 Microsoft Office 2003 的服务器上时，它给了我的问题关于这样的错误`Microsoft.Office.Interop.Excel, Version=12.0.0.0`

是因为我使用`Microsoft.Office.Interop.Excel`API 吗？我搜索了这个问题，发现一些解决方案没有像下载一样按预期工作`PIA`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:28:25.203

在您的服务器上安装 Office 2007。由于您无法使用您的应用程序重新分发 microsoft dll，因此在这种情况下，机器应该在 GAC 中具有必需的 Dll。

# c# - 如何从 Windows CE 移动设备启用 ActiveSync 连接？

> ID：14747278
> 
> 赞同：1
> 
> 时间：2013-02-07T09:04:37.180
> 
> 标签：c#, windows-ce, activesync

我在计算机上安装了 Windows XP，在导航器上安装了 Windows CE 6.0。它们通过 USB 连接。当我在导航器中输入 USB 电缆时 - 一切正常，它们已连接。但是导航器有“睡眠”选项。当导航器进入睡眠状态时 - activeSync 连接停止。睡眠后连接不建立！导航器的帮助台告诉我，当插入 USB 电缆时，activeSync 连接。我可以通过导航器（或电脑）上的程序手动启用 activeSync 连接吗？

PS 我试过 RAPI：函数 ActiveSync.ConnectNow() 没有影响

# java - 弹性搜索前缀、后缀、EdgeGram

> ID：14747280
> 
> 赞同：0
> 
> 时间：2013-02-07T09:04:41.563
> 
> 标签：java, elasticsearch

如何通过它的中间或最后一个英文字母来搜索一个单词。例如 CORPORATION 是一个单词，我可以使用 EdgeGram 和前缀过滤器搜索 CORPORATION 的首字母，如 COR、CO、C 等。但我无法使用 POR 或 RATI 或 ION 的 CORPORATION 的最后一个字母或中间字母来搜索它。弹性搜索是否支持此功能？如果是，那么我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:53:17.303

nGram[标记器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/ngram-tokenizer.html)会做你想做的事。它就像 Edge-nGram 分词器，只是它在整个单词中移动，而不是锚定到一个边缘。

```
$ curl localhost:9200/test/_analyze?tokenizer=ngram&pretty' -d 'corporation' | grep token

"tokens" : [ {
"token" : "c",
"token" : "o",
"token" : "r",
"token" : "p",
"token" : "o",
"token" : "r",
"token" : "a",
"token" : "t",
"token" : "i",
"token" : "o",
"token" : "n",
"token" : "co",
"token" : "or",
"token" : "rp",
"token" : "po",
"token" : "or",
"token" : "ra",
"token" : "at",
"token" : "ti",
"token" : "io",
"token" : "on", 
```

# python - facebook-graph sdk 无法处理 unicode 字符

> ID：14747283
> 
> 赞同：3
> 
> 时间：2013-02-07T09:05:08.183
> 
> 标签：python, facebook, google-app-engine, facebook-graph-api

facebook-python sdk 可以在发布日语消息时处理。我可以毫无问题地发布英文信息，但是当我尝试发布日文时

```
graph.put_object("me", "feed", message=u'あなたが大好きだよ') 
```

我在下面收到错误。我该怎么办？

```
Traceback (most recent call last):

File "/base/data/home/apps/s~posttofacebook123456/1.365133296513228525/kay/app.py", line 371, in get_response
response = view_func(request, **values)

File "/base/data/home/apps/s~posttofacebook123456/1.365133296513228525/myapp/views.py", line 116, in index
graph.put_object("me", "feed", message=u'あなたが大好きだよ')

File "/base/data/home/apps/s~posttofacebook123456/1.365133296513228525/myapp/facebook.py", line 140, in put_object
post_args=data)

File "/base/data/home/apps/s~posttofacebook123456/1.365133296513228525/myapp/facebook.py", line 291, in request
post_data = None if post_args is None else urllib.urlencode(post_args)

File "/python27_runtime/python27_dist/lib/python2.7/urllib.py", line 1289, in urlencode
v = quote_plus(str(v))

UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-8: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:20:28.963

您需要将其发布为 UTF8。

> graph.put_object("me", "feed", message='あなたが大好きだよ'.encode('utf-8'))

# jquery - jQuery - 创建多个实例

> ID：14747285
> 
> 赞同：1
> 
> 时间：2013-02-07T09:05:24.787
> 
> 标签：jquery, html, file-upload

我正在使用以下 jquery 插件进行文件上传。

[http://www.jscripts.info/mfupload.php](http://www.jscripts.info/mfupload.php)

这适用于单个上传框。我通过将 ID 更改为类来尝试多个上传框，但没有运气。

这就是它初始化函数的方式，

```
$(document).ready(function() {
    //function AjaxUpload($posturl,fieldname,formname){
        var errors="";
        //alert($("div.uploadaction").html());
        $('#upload').mfupload({

            type        : '',   //all types
            maxsize     : 20,
            post_upload : $("div.uploadaction").html(),
            folder      : "./",
            ini_text    : "<div class='halfmargin'></div><span>Click / Drag your logo file here</span>",
            over_text   : "<div class='halfmargin'></div><span class='drop'>Drop Here</span>",
            over_col    : 'white',
            over_bkcol  : 'green',

            init        : function(){       
                $("#uploaded").empty();
            },

            start       : function(result){     
                $("#uploaded").append("<div id='FILE"+result.fileno+"' class='files'>"+result.filename+"<div id='PRO"+result.fileno+"' class='progrez_img'><img src='/images/ajax-loader.gif' /></div></div>"); 
            },

            loaded      : function(result){
                $("#PRO"+result.fileno).remove();
                $("#FILE"+result.fileno).html("<div class='smallpadding'>Uploaded: "+result.filename+" ("+result.size+")<input type='hidden' name='hdnfilename[]' value='"+result.filename+"' /></div>");   
                //$('#'+formname).append('<input type=\"hidden\" name=\"hdnfilename[]\" value=\"' +result.filename+ '\">');     

/*              <input type='hidden' name='hdnfilename[]' value='"+result.filename+"' />    
*/          },

            progress    : function(result){
                $("#PRO"+result.fileno).css("width", result.perc+"%");
            },

            error       : function(error){
                errors += error.filename+": "+error.err_des+"\n";
            },

            completed   : function(){
                if (errors != "") {
                    alert(errors);
                    errors = "";
                }
            }
        });

    }) 
```

请帮我创建多个上传框。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:12:48.663

您可以使用一个类将插件应用于多个元素，但代码使用元素的 id，因此每个元素仍然必须有一个 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:09:45.370

如果该插件允许多个实例

```
$(".upload").each(function(i,e) {

        $("#"+e.id).mfupload({//..
              });

      }); 
```

或尝试更好（imo）/更灵活的插件：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

（在使用提供的 ui/模板选项之前，先练习基本的插件设置）

# java - 如果服务器返回错误的 apache wicket，则显示错误消息

> ID：14747286
> 
> 赞同：-3
> 
> 时间：2013-02-07T09:05:31.137
> 
> 标签：java, html, wicket

我是 Apache wicket 的新手，目前我正在 HTML 页面上验证用户名和密码。服务器根据用户授权返回布尔值 true 或 false。

如果为 TRUE，则该页面正在导航到另一个页面，但如果为 FALSE，我想以任何可行的形式在同一页面上显示错误消息可能会提示。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:42:40.610

看看[`FeedbackPanel`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/panel/FeedbackPanel.html)。

互联网上有很多关于它的内容，您应该轻松实现它。

您首先访问的地方可能是： http: [//www.wicket-library.com/wicket-examples-6.0.x/ajax/form](http://www.wicket-library.com/wicket-examples-6.0.x/ajax/form)

# iphone - 目标 c- 是否可以在不使用 GPU 的情况下制作动画？

> ID：14747288
> 
> 赞同：0
> 
> 时间：2013-02-07T09:05:37.677
> 
> 标签：iphone, ios, object, core-animation

是否可以制作动画并强制它在 CPU 而不是 GPU 中完成？

我将尝试解释我的动机，我的屏幕之一是一个大视图，可以完成大量 GPU 工作，我也有很少的按钮和控制器可以做动画，比如点击时左右滑动。

问题是，在某些较旧的设备（例如 iPod）中，按钮动画非常慢（我想是因为所有 GPU 功率都用于我的主视图）。
所以我虽然，也许有一种方法可以强制动画在 CPU 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:15:49.390

最简洁的答案是不。

在 Mac OS 和 iOS 中，GPU 负责将图形渲染到显示器上。

任何基于 CPU 的动画最终仍将使用 GPU 来将内容渲染到屏幕上。底层图形引擎是 OpenGL。

在 iOS 上，Core Animation 层直接映射到图形硬件中的显示图块。

尝试制作纯基于 CPU 的图形甚至可能适得其反，因为您最终不得不在 CPU 上渲染每一帧，然后仍将这些像素复制到 GPU 内存中。

# python - 熊猫重新采样不加起来

> ID：14747293
> 
> 赞同：0
> 
> 时间：2013-02-07T09:05:51.037
> 
> 标签：python, pandas

我有一个熊猫数据框，其中包含 461 只股票的收盘价。

```
In [43]: pdata
Out[43]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 3418 entries, 2000-01-03 00:00:00 to 2013-02-06 00:00:00
Columns: 461 entries, AKM to ZIM
dtypes: float64(461) 
```

我正在对过去 130 天的股票回报率进行排名，并选择表现最好的 10 名股票

```
In [44]: mom_ret = pdata.shift(1).pct_change(130)

In [45]: rank = mom_ret.rank(axis=1,ascending=False,method='first')

In [46]: rank[rank<=10]=1

In [47]: rank[rank>10]=0 
```

如果我取行的总和，它们都等于我期望的 10。

```
In [48]: x=rank.groupby(rank.sum(axis=1))

In [49]: x.sum()
Out[49]: 
<class 'pandas.core.frame.DataFrame'>
Index: 1 entries, 10.0 to 10.0          # all rows sum to 10 as expected.
Columns: 461 entries, AKM to ZIM
dtypes: float64(461) 
```

然后我重新采样数据框如下

```
In [50]: port = rank.resample('20B', how='first')

In [51]: y=port.groupby(port.sum(axis=1)) 
```

但是现在当我对行求和时，它们的总和不都是 10？

```
In [52]: y.sum()
Out[52]: 
<class 'pandas.core.frame.DataFrame'>
Index: 4 entries, 10.0 to 13.0          # 4 entries ranging between 10 and 13??
Columns: 461 entries, AKM to ZIM
dtypes: float64(461) 
```

我不明白为什么会发生这种情况。我做错了什么还是这是一个错误？

我刚刚意识到，如果我用 0 替换 NaN，我就没有问题。

```
In [67]: rank=rank.fillna(0)

In [68]: x=rank.groupby(rank.sum(axis=1))

In [69]: x.sum()
Out[69]: 
<class 'pandas.core.frame.DataFrame'>
Index: 2 entries, 0.0 to 10.0     # 2 entries, 0 and 10
Columns: 461 entries, AKM to ZIM
dtypes: float64(461)

In [70]: port = rank.resample('20B', how='first')

In [71]: y=port.groupby(port.sum(axis=1))

In [72]: y.sum()
Out[72]: 
<class 'pandas.core.frame.DataFrame'>
Index: 2 entries, 0.0 to 10.0    # 2 entries again, 0 and 10
Columns: 461 entries, AKM to ZIM
dtypes: float64(461) 
```

但我想重新采样而不用 0 填充 NaN。这可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:07:41.453

您看到这种行为的原因是因为`how=first`从每列中获取第一个非 na 值。这就是为什么用 0 填充 NA 会让你得到正确答案的原因。要在不填充 NA 的情况下获得所需的行为，您可以将自定义函数传递给`how`第一个条目，无论它是否为 NA：

```
In [47]: port = rank.resample('20B', how=lambda x: x.ix[0])

In [48]: y=port.groupby(port.sum(axis=1))

In [49]: y.sum()
Out[49]: 
<class 'pandas.core.frame.DataFrame'>
Index: 1 entries, 10.0 to 10.0
Columns: 461 entries, AKM to ZIM
dtypes: float64(461) 
```

# zk - 如何以编程方式在 ZK/Zul 中添加 colspan？

> ID：14747296
> 
> 赞同：1
> 
> 时间：2013-02-07T09:06:09.613
> 
> 标签：zk, zul

如何在 ZUL 框架中设置 colspan 的属性？

例如

```
Tr tr = new Tr();

Td td = new Td();

tr.appendChild(td);

td = new Td();

tr.appendChild(td); 
```

现在，在下一行，我必须通过 composer 在表格行内放置单个 td ，这将覆盖两个 td 的空间。我怎样才能做到这一点？

```
<Table>
    <tr>
      <td>
      </td/>
       <td>
       </td>
    </tr>
    <tr>
      <td colspan="2">
      </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:40:16.380

在 ZUL 中，这不是用`<table>`,`<tr>`和`<td>`标签完成的，而是用`<grid>`,`<row>`和`<cell>`标签完成的。像这样。。

```
<grid>
    <columns>
        <column label="A" />
        <column label="B" />
    </columns>
    <rows>
        <row>
            <cell>
                <label value="item 1" />
            </cell>
            <cell>
                <label value="item 2" />
            </cell>
        </row>
        <row>
            <cell colspan="2">
                <label value="item 3" />
            </cell>
        </row>
    </rows>
</grid> 
```

那么，从 Java 方面来说，这变得很容易..

```
Grid grid = new Grid();
Rows rows = new Rows();
rows.setParent(grid);
Row row1 = new Row();
row1.setParent(rows);
Cell cell1 = new Cell();
cell1.setParent(row1);
cell1.appendChild(new Label("item1"));
Cell cell2 = new Cell();
cell2.setParent(row1);
cell2.appendChild(new Label("item2"));
Row row2 = new Row();
row2.setParent(rows);
Cell cell3 = new Cell();
cell3.setParent(row2);
cell3.appendChild(new Label("item3"));
cell3.setColspan(2); // this is what you're looking for 
```

请参阅（伟大的）[ZK 文档](http://books.zkoss.org/wiki/ZK_Component_Reference/Supplementary/Cell)以获取更多信息。

# javascript - 等待弹出窗口javascript

> ID：14747298
> 
> 赞同：1
> 
> 时间：2013-02-07T09:06:16.897
> 
> 标签：javascript, window, alert, wait

基本上我正在这样做：

```
 window.onload=function wait(){
     alert ("Please, wait until process has finished.");
     window.location="index.jsp";
 }; 
```

我需要的是一个警报窗口或类似的东西，只有在 X 秒过后才会消失/启用弹出窗口中的“确定”按钮。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:06:59.673

也许你需要这样的东西：

```
window.onload = function () {
    var popup = window.open('','pop','width=200px, height=10px'),
        popdoc, msg, script;
    if (popup) {
        popdoc = popup.document;
        msg = popdoc.body.appendChild(popdoc.createElement('p'));
        msg.innerHTML = 'Please, wait until process has finished.';
        script = popdoc.createElement('script');
        script.text = '(function () {setTimeout(function () {self.close();}, 3000);}());';
        popdoc.body.appendChild(script);
    }
} 
```

[jsFiddle](http://jsfiddle.net/nwBCt/)的演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:09:05.530

```
var wait = function() {
    alert ("Please, wait until process has finished.");
}
setTimeout(wait, 3000); 
```

3000 是在调用函数之前要等待的毫秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:09:54.917

只需将函数传递给 settimeout

```
setTimeout(yourfunction,2000); 
```

这将在文档加载 2 秒后运行该函数

# c# - 在 Excel 中设计用户定义函数？

> ID：14747302
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:06:26.943
> 
> 标签：c#, excel, vsto, add-in, user-defined-functions

使用 C# 在 excel 中创建用户定义函数有哪些不同的方法？直到现在我只能找到[`User Defined Functions in C#`](http://blogs.msdn.com/b/eric_carter/archive/2004/12/01/273127.aspx)

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:23:52.723

你可以看看这篇文章：[https ://www.quantnet.com/threads/how-to-create-udf-in-excel-using-c-and-visual-studio-2008.1260/](https://www.quantnet.com/threads/how-to-create-udf-in-excel-using-c-and-visual-studio-2008.1260/)

它解释了如何创建 DLL 并使用 COM 将其插入 Excel，以便它在 Excel 中显示为 UDF。

# c++ - boost::asio 系统无限循环：第一次连接后出现 9 错误

> ID：14747310
> 
> 赞同：1
> 
> 时间：2013-02-07T09:07:19.263
> 
> 标签：c++, boost, boost-asio

我有一个服务器，使用带有以下代码的 asio，100% 从示例中复制。当没有连接时，代码表现良好。但是，一旦第一个客户端连接，句柄接受就开始输出大量的 system:9 错误，我无法连接任何其他客户端。连接的单个客户端可以很好地执行异步读/写。我对自己做错了什么感到茫然。我已经在线程池中尝试了有和没有 io_service 的代码，结果相同。

```
Server::Server(io_service& io_service,
      const std::string address,
      const std::string port)
    : io_service_(io_service),
    //zmq_strand_(io_service),
      acceptor_(io_service) {

    ip::tcp::resolver resolver(io_service_);
    ip::tcp::resolver::query query(address, port);
    ip::tcp::endpoint endpoint = *resolver.resolve(query);
    acceptor_.open(endpoint.protocol());
    acceptor_.set_option(ip::tcp::acceptor::reuse_address(true));
    acceptor_.bind(endpoint);
    acceptor_.listen(); 
    start_accept();
  }

void Server::start_accept() {
    auto session = std::shared_ptr<Session>(new Session(io_service_,session_manager_));

    acceptor_.async_accept(session->socket()
        ,std::bind(&Server::handle_accept,this,session,std::placeholders::_1));
}

void Server::handle_accept(std::shared_ptr<Session> session, const system::error_code& error) {
  if (!error) {
    std::cout << "handle_accept" << std::endl;
    session->start();
  } else {
      std::cout << error << std::endl;
  }
  start_accept();
} 
```

小更新：我没有使用 http3 示例，而是使用了 Denis 提出的示例。它不那么令人费解，并使服务器行为正确。我还没有找到一个合理的解释来解释为什么前一段代码不起作用。这样做：

```
Server::Server(
      io_service &service,
      const uint8_t num_threads,
      const std::string address,
      const uint16_t port)
    : 
      num_threads_(num_threads),
    //zmq_strand_(io_service),
      acceptor_(service,ip::tcp::endpoint(ip::tcp::v4(),port)) {

    //io_service::work work(io_service_);
    start_accept();
  }

void Server::start_accept() {
    auto session = std::shared_ptr<Session>(new Session(acceptor_.get_io_service(),session_manager_));

    acceptor_.async_accept(session->socket()
        ,std::bind(&Server::handle_accept,this,session,std::placeholders::_1));
}

void Server::handle_accept(std::shared_ptr<Session> session, const system::error_code& error) {
  if (!error) {
    std::cout << "handle_accept" << std::endl;
    session->start();
  }
  start_accept();
}

void Server::start() {
    std::set<std::unique_ptr<std::thread>> threads;

    for( unsigned int i = 0; i < num_threads_; ++i ) {
        threads.insert(std::unique_ptr<std::thread>(new std::thread( [&]() {
            acceptor_.get_io_service().run();
            }) 
        ));
    }
    std::cout << threads.size() << " threads started" << std::endl;
    for(auto &t:threads) {
        t->join();
    }
    std::cout << threads.size() << " threads joined" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:46:23.227

仔细查看本教程并将您的代码与教程进行比较：[Boost TCP async server example](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tutdaytime7/src.html)

# highcharts - 无法从 Highcharts 获取 csv

> ID：14747311
> 
> 赞同：3
> 
> 时间：2013-02-07T09:07:21.960
> 
> 标签：highcharts

我想让从我的 Highchart 下载 CSV 文件成为可能......就像在这个例子中一样。

[链接到 JSFiddle](http://jsfiddle.net/highcharts/cqjvD/)

我试图实现它，但它在我的代码中不起作用....可能是什么原因？**我只想提醒 csv！**后来我想实现你可以下载它......

这是我的代码：

```
<script language="javascript" type="text/javascript" src="../js/jquery-1.8.3.js">   </script>
<script language="javascript" type="text/javascript" src="../js/jquery-ui-1.9.2.custom.js"</script>
<script src="../js/highcharts.js "></script>
<script src="../js/exporting.js "></script>
<script src="../js/exporting.src.js "></script>
<link rel="stylesheet" href="../css/jquery-ui-1.9.2.custom.css" type="text/css" />

<script type="text/javascript">

(function (Highcharts) {
var each = Highcharts.each;
Highcharts.Chart.prototype.getCSV = function () {
    var xAxis = this.xAxis[0],
        columns = [],
        line,
        csv = "", 
        row,
        col;

    if (xAxis.categories) {
        columns.push(xAxis.categories);
        columns[0].unshift("");
    }
    each (this.series, function (series) {
        columns.push(series.yData);
        columns[columns.length - 1].unshift(series.name);
    });

    // Transform the columns to CSV
    for (row = 0; row < columns[0].length; row++) {
        line = [];
        for (col = 0; col < columns.length; col++) {
            line.push(columns[col][row]);
        }
        csv += line.join(',') + '\n';
    }
    return csv;
};    
}(Highcharts));

$(function () {

$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: { renderTo: 'container', type: 'pie' ,  },
        title: {   text: 'Top 5 Power consumer overall' },    
        yAxis: {  title: { text: ' ', }            },
        legend: { enabled: false },

       series: [{   name: 'Work',  data:[1,2,3,4,5] }],
    });
});

}); 

$('#getcsv').click(function () {
  alert(chart.getCSV());
});

</script>
</head>
<body>
<div id="container"></div>
<button id="getcsv" > Alert </button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:23:03.540

您的代码已经在运行：

下载为 cvs 添加此代码块：

```
Highcharts.getOptions().exporting.buttons.exportButton.menuItems.push({
    text: 'Download CSV',
    onclick: function () {
        Highcharts.post('http://www.highcharts.com/studies/csv-export/csv.php', {
            csv: this.getCSV()
        });
    }
}); 
```

[您的代码演示](http://jsfiddle.net/gyf9y/1/)

# android - 在 Android 模拟器中安装 Chrome for Android

> ID：14747312
> 
> 赞同：24
> 
> 时间：2013-02-07T09:07:24.433
> 
> 标签：android, google-chrome, windows-7, android-emulator, google-play

我想在 Android 模拟器（运行 Windows 7 64 位）上安装 Chrome for Android。我尝试从模拟器访问 google play 市场，但它不会让我安装。

我尝试[从这里安装 chrome for android APK](http://forum.xda-developers.com/showthread.php?t=1485473)，但是当我启动 chrome 时，它​​说最低支持的操作系统是 ice cream sanwdich 4.0

使用 FireFox 非常简单，我只是从他们的 FTP 服务器上获取 APK 并运行`adb install`命令，有人会认为使用 chrome 应该更容易，但事实并非如此！

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-04-12T09:32:19.760

**安卓 5.1、Chrome 57：**

*   创建模拟器。
*   运行模拟器。
*   等待模拟器启动。
*   将 chrome-android.apk 下载到您的 PC。
*   将 apk 拖放到模拟器屏幕。

应该安装。需要很长的时间。

[![在此处输入图像描述](../Images/147e42592f262f0736a2eb70bf64b07d.png)](https://i.stack.imgur.com/aTSLK.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-06T11:55:16.220

[您可以使用此博客文章](http://paul.kinlan.me/installing-chrome-for-android-on-an-emulator/)中的说明安装 Chromium

它甚至提供了一个用于自动安装最新 apk的[脚本](https://github.com/PaulKinlan/chromium-android-installer)

```
#! /bin/sh

LATEST=`curl -s http://commondatastorage.googleapis.com/chromium-browser-continuous/Android/LAST_CHANGE`

echo Latest Chromium Android at $LATEST

TMP_DL=`mktemp -t chrome-android.XXXX`
TMP_APK=`mktemp -t chrome-android.XXXX`
REMOTE_APK=http://commondatastorage.googleapis.com/chromium-browser-continuous/Android/$LATEST/chrome-android.zip

echo Downlaoding $REMOTE_APK to $TMP_DL
curl $REMOTE_APK -o $TMP_DL

echo Extracting ChromiumTestShell.apk to $TMP_APK
unzip -p $TMP_DL chrome-android/apks/ChromiumTestShell.apk >> $TMP_APK
adb install $TMP_APK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-24T02:34:05.030

Chrome 需要将 Google Play 服务安装为系统应用程序。该解决方案包括设置 Genymotion 模拟器、刷新 Google Play 服务，然后通过 Google Play 安装 Google Chrome。

您需要一个 Google 帐户和一个 Genymotion 帐户（非商业用途免费）。大约需要 30-40 分钟，其中大部分将用于下载/更新。

1.  下载您在此处使用的任何版本的 Google Play 服务更新 zip：[https](https://goo.im/gapps/) ://goo.im/gapps/ 。想用4.4.4，所以选择 [gapps-kk-20140606-signed.zip](https://goo.im/gapps/gapps-kk-20140606-signed.zip)

2.  下载并安装 Genymotion（非商业用途免费）： [https ://www.genymotion.com/?utm_source=dlvr.it&utm_medium=twitter#!/download](https://www.genymotion.com/?utm_source=dlvr.it&utm_medium=twitter#!/download)

3.  打开它，使用您的 Genymotion 帐户登录，设置您想要的任何模拟器。启动模拟器。

4.  当它启动时，将您之前下载的 gapps zip 拖放到模拟器中。它会复制过来，然后询问您是否要刷新它。单击是。完成后，关闭模拟器并重新启动它。

    在剩下的时间里，您可能会经常收到弹出窗口，说 Google Plus 或其他没有正确安装的东西。只要打好，士兵就可以了。

5.  现在您需要登录您的 Google 帐户。转到设置-> 帐户-> 添加帐户-> 谷歌。按照提示进行操作。

6.  打开谷歌播放。打开左侧菜单 -> 设置。点击“构建版本”单元格几次。它会说将下载并安装新版本。

7.  等待（您不必停留在设置页面上）。在所有应用程序都更新后（您可能必须接受新的权限），构建版本将发生变化，再次点击它会显示一个提示，说明它是最新版本。

8.  打开 Google Play 商店并下载并安装 Chrome。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T19:24:32.960

[对我来说最简单的解决方案是根据这个问题](https://stackoverflow.com/questions/38593738/is-google-play-store-supported-in-avd-emulators/43197403#43197403)选择一个已经安装了 chrome 和 play 的不同模拟器图像。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T09:14:03.370

请。检查您的模拟器是否在 android 4.0 或更高版本上。早期版本不支持 chrome 应用程序。此外，要从 Play 商店安装，您需要配置一个帐户。如果你有这两个，那么你应该能够安装。

你可以参考这些：

[http://piotrbuda.eu/2012/05/installing-google-play-on-android-emulator.html](http://piotrbuda.eu/2012/05/installing-google-play-on-android-emulator.html) [如何在模拟器上安装 Android Market App？](https://stackoverflow.com/questions/1387830/how-to-install-android-market-app-on-the-emulator)

# java - ActivePivot 实时推送分析维度

> ID：14747315
> 
> 赞同：1
> 
> 时间：2013-02-07T09:07:38.027
> 
> 标签：java, real-time, olap, activepivot

我们使用 ActivePivot 监控金融交易的实时 PnL（盈亏）。新交易（新记录）在白天实时添加或更新到多维数据集，ActivePivot 还连接到触发我们后处理器刷新的实时市场数据源。

最重要的是，我们实现了一个自定义维度来为我们的用户提供动态时间分桶。这是使用 ActivePivot**分析维度**API 构建的。尽管我们编写了一个自定义**连续处理程序**来将市场数据更改传播到后处理器，但当用户在他们的报告中展开自定义时间维度以查看所有时间段时，似乎**只有默认成员会通过****实时推送**刷新。当用户手动点击刷新按钮时，所有存储桶都会重新加载，但自动推送似乎沿分析维度成员禁用。

这是分析维度的已知限制，您能给我们一些建议以制定解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:28:26.163

是的，这是分析维度的已知限制。枢轴所知道的唯一成员是默认成员。您需要让 AP 了解其他非默认成员。

为此，您需要添加自定义处理程序。该处理程序将向 AP 发送回“隐藏”位置的“增强”影响。此处理程序将侦听事务流。

影响的计算可以分两次完成。- 首先我们需要计算我们需要重新计算的位置。我们克隆位置并将分析维度的坐标替换为空值。通过事件我们计算添加对象的影响。我们放回分析维度坐标，初始成员。- 其次，我们需要计算移除候选点。我们和以前一样，但使用删除的添加对象。我们放回最初的成员​​。如果此初始成员是一个集合或 null，我们需要将此范围位置转换为所有基础点位置。

例如，我们的分析维度是 ANY（默认成员）、1y、2y、5y。我们的位置是 eur|null|DeskA。我们需要重新计算的位置是 eur|null|DeskA。删除的候选点是 eur|ANY|DeskA、eur|1y|DeskA、eur|2y|DeskA、eur|5y|DeskA。另一个示例位置是 eur|{1y, 5y}|DeskA，要重新计算的位置是相同的 eur|{1y, 5y}|DeskA 但删除的候选点是 eur|1y|DeskA, eur|5y|DeskA

# mysql - SQL select Where 子句语句

> ID：14747318
> 
> 赞同：2
> 
> 时间：2013-02-07T09:07:51.770
> 
> 标签：mysql, sql, where-clause

我很确定这是不可能的，但我想问问这里的专家是否可以写一条 SQL 语句来

```
Select * from ... Where [‘sent_to’]['bissness_id']=3516 . 
```

如果是，那么它的语法是什么？（请看下图）

![Select * from ... where sent_to['bissness_id']=3516](../Images/3c5b1b71b34aeb17b0ab5634cc16373d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:14:52.377

像这样的东西会起作用：

```
select * from web_query where sent_to like '%"business_ids":["3516"]%'; 
```

或者，或者：

```
select * from web_query where sent_to like '%"business_ids":[%"3516"%]%'; 
```

但是您真的不应该将 JSON 作为字符串值存储在数据库列中。它在几个层面上都违背了数据库的目的。

编辑：如果您想避免更改表结构但仍想从数据库布局的结构改进中受益，您可以考虑编写一些可以解析`sent_to`为视图列的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:59:06.340

不是很清楚的问题。。

如果您必须满足 sent_to 中非“bissness_id”的内容，那么您需要明确：

```
DECLARE @FilterID Varchar(10) = '"3516"'
Select * from ... Where sent_to LIKE '%'+@FilterID+'%'
                AND sent_to LIKE '%business_ids%' 
```

如果该列只有“bissness_id”，那么它更简单

```
DECLARE @FilterID Varchar(10) = '"3516"'
Select * from ... Where sent_to LIKE '%'+@FilterID+'%' 
```

因为在您的示例中，您在 where 子句中有一个整数。如果这是故意的并且是问题的一部分，那么您可以只使用转换：

```
DECLARE @FilterInt Int = 3516
DECLARE @FilterID Varchar(10) = '"' + CAST(3516 AS Varchar(10)) + '"'
Select * from ... Where sent_to LIKE '%'+@FilterID+'%'
                AND sent_to LIKE '%business_ids%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:25:41.833

如果您的 sent_to 列上只有 businessIds，您可以简单地执行以下操作：

```
Select * from ... Where sent_to LIKE '%"3516"%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:43:55.383

我不认为你的要求可以做到，但你可以用简单的技巧做到这一点

```
select * from yourtable where sent_to like '%5060%' 
```

这将使您获得业务 ID 为 5060 的行

如果您想根据您的要求获得更大的灵活性，您可以选择单独的表格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:22:51.823

这应该工作：

```
select * from web_query where sent_to like '%"business_ids":["3516"]%'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T09:23:40.693

试试下面的代码

```
SELECT * FROM TABLE_NAME t1
WHERE t1.sent_to.business_ids = 3516; 
```

# python - Python 的 URI 库

> ID：14747320
> 
> 赞同：2
> 
> 时间：2013-02-07T09:07:53.080
> 
> 标签：python, uri

我打算在 python 中构建我自己的 URI 模块/类来掌握 URI 和 python。您能否向我推荐博客/站点/等的链接，以获取有关 URI 的完整参考以及从哪里开始、不容错过的 RFC 以及任何其他帮助来源。这不是我的家庭作业的一部分。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:16:25.783

你知道[urlparse](http://docs.python.org/2/library/urlparse.html)存在吗？

它可能会比你打算写的更好。

# java - 在 Java 中运行代码仅 60 秒

> ID：14747321
> 
> 赞同：1
> 
> 时间：2013-02-07T09:07:59.917
> 
> 标签：java, delayed-execution

我只需要运行以下代码 60 秒

该代码延迟 2 秒，每 5 秒重复一次。

但在这里我只需要这样做 60 秒

```
 int delay = 3000; // delay for 3 sec. 
        int period = 5000; // repeat every 5 sec. 
        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {

            public void run() {
                System.out.println("Would it run?"+System.currentTimeMillis());
            }
        }, delay, period); 
```

请让我知道该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:17:45.580

您可以简单地[使用`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)：

*   安排任务
*   检索`ScheduledFuture`
*   60 秒后取消该未来：

```
final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

final Runnable task = new Runnable() {
    public void run() {
        System.out.println("Would it run?"+System.currentTimeMillis());
    }
};
final ScheduledFuture<?> handle =
        scheduler.scheduleAtFixedRate(task, 2, 5, TimeUnit.SECONDS);
scheduler.schedule(new Runnable() {
    public void run() { handle.cancel(true); }
}, 60, SECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:16:17.347

你需要计算你这样做了多少次，然后取消：

```
import java.util.Timer;
import java.util.TimerTask;

public class Waiting {
    public static int times;

    public static void main(String[] args)
    {
        int delay = 3000;  // delay for 3 sec. 
        int period = 5000; // repeat every 5 sec. 
        times = 60000 / ( delay + period );

        Timer timer = new Timer();
        timer.scheduleAtFixedRate( new TimerTask() {

            public void run() {
                System.out.println( "Times remaining: " + Waiting.times );

                --Waiting.times;
                if ( Waiting.times == 0 ) {
                    this.cancel();
                    System.exit( 0 );
                }
            }
        }, delay, period); 
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:11:06.463

```
public class test{
static int delay = 3000; // delay for 3 sec. 
       static int period = 5000; // repeat every 5 sec. 
        static int totaltime = 0;   
public static void main(String ar[]){

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {

            public void run() {
                test.totaltime+= ((test.delay+test.period)/1000);

                if(test.totaltime > 60)System.exit(0);
                System.out.println("Would it run?"+System.currentTimeMillis());

            }
        }, test.delay, test.period);
}
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:02:25.867

老实说，我从未使用过计时器，但如果您想在一段时间内运行您的任务，为什么不使用[`public void schedule(TimerTask task,long delay, long period)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)

如果我理解正确，你想现在运行你的任务，持续 60 秒，所以：

`timer.schedule(myTask,0,60000);`

应该为你做，但正如我所说，我从不使用计时器，所以我不是 100% 肯定它会工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:12:26.540

您可以设置一个计时器，该计时器将达到 60 并设置一个 if 是这样的：

```
int time = 3;

 timer.scheduleAtFixedRate(new TimerTask() {

            public void run() {
     if(time<60){
                System.out.println("Would it run?"+System.currentTimeMillis());
                time = time + 5;
     }
     else{ timer.stop(); }
            }
        }, delay, period); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T09:12:29.130

只需在所需的重复次数后`cancel`从该方法调用。`run`

# android - 在 Android 中启动另一个应用程序，但将旧应用程序保留在队列中

> ID：14747323
> 
> 赞同：2
> 
> 时间：2013-02-07T09:08:07.617
> 
> 标签：android

如果在我的 Android 应用程序中我这样做：

```
Intent intent2 = new Intent();
          intent2.setAction(Intent.ACTION_MAIN);
          intent2.addCategory(Intent.CATEGORY_LAUNCHER);
          intent2.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_NEW_TASK);
          intent2.setClassName("com.andrew.apollo", "com.andrew.apollo.activities.MusicLibrary"); 

          getApplicationContext().startActivity(intent2); 
```

然后Android实际上运行新应用程序，但我想将我的旧应用程序保留在队列中，所以如果我点击“返回”按钮，我会转到旧应用程序，或者当我点击时旧应用程序仍在队列中“主页”按钮。

有什么想法吗？谢谢。

**编辑**：实际上，这是一个我不记得我在代码中写过的finish()。我删除了它，现在它按预期工作。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:25:04.737

相同的代码对我来说效果很好。你必须调用finish(); 启动意图后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:24:28.120

默认情况下，如果您从当前 Activity 启动新的应用程序或 Activity 并且不为当前 Activity 调用**finish()**方法，它将一直保留在堆栈中，直到 Android OS 拼命耗尽内存。

它可能发生在内存不足的设备中被破坏（在你的情况下我猜），否则它会进入**“停止”**状态，当你点击“返回”按钮时，它会自动**重启**。

# sql - 仅将新值或编辑值插入行

> ID：14747324
> 
> 赞同：0
> 
> 时间：2013-02-07T09:08:13.220
> 
> 标签：sql

我有一张出勤表如下。

```
ID         Date        Time
==         ====        ====
1          01/01/2013  17:00:00
1          01/01/2013  22:00:00 
```

然后，这些表将通过存储过程获取处理，该存储过程计算总小时数、扣除额、费率等..等等，这些表将存储在另一个表中，并以以下结果为例。

```
ID         Date          TimeIn         TimeOut       Thours         Salary
==         ====          ======         =======       ======         ======
 1         01/01/2013     17:00         22:00          5             $50 
```

我们现在所做的是运行一个选择（如果存在）。然后删除表。为了更新第一个表中已编辑的条目，即未打孔..

然后第二个表将通过另一个存储过程进行时间舍入，以及根据结果添加标签等。然后存储在一个更大的表中，其中包含激励、加班、提前等字段等。 . 此表将用于通过 windows 窗体最终插入附加数据。

现在，当我们试图只向第三个表添加新行时，我们遇到了这样的情况。因为第二个表总是在更新时被删除并重新创建，并且存在更新等似乎不起作用，并且似乎无法依赖第二个表的唯一键，因为它将在更新时重新创建。

感谢有关我们如何保留第三张表以供用户编辑的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:48:35.293

只需将第一个表中的 id 添加到第二个表中，并将客户或您正在做的任何人添加到第二个表中，以便您在更新时不应该删除第二个表条目

只需检查第二个表中与第一个表的 id 匹配的人的 id

然后第三个也有第二个表ID

# javascript - 带有返回自定义对象的函数的Javascript“新”

> ID：14747325
> 
> 赞同：12
> 
> 时间：2013-02-07T09:08:16.610
> 
> 标签：javascript

假设我有以下功能：

```
var A = function() {
   var label = "hello";
   return {
      getLabel: function() { return label; }
   }
}; 
```

有什么区别：

```
var a = A(); 
```

和

```
var a = new A(); 
```

?

注意：我不是在这里问[什么是 JavaScript 中的 'new' 关键字](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)，而是在这个特定示例中它的行为方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T09:10:11.210

在您的特定情况下，*否*，没有区别。

无论哪种方式，您的函数都将返回一个*自定义的 Object*。通过使用关键字调用函数，`new`ECMAscript 将自动为您创建一个新对象（同时使用`prototype`和属性*做*一些魔术）`constructor`，您可以*通过*.*`this``function (-constructor)`*

 *同样，您`return { }`在该函数中的调用将始终准确返回该对象引用。*

# java - java.security.AccessControlException：访问被拒绝（java.io.FilePermission 阅读）在已签名的小程序中使用 java web start

> ID：14747329
> 
> 赞同：1
> 
> 时间：2013-02-07T09:08:23.903
> 
> 标签：java, io, applet, java-web-start, securityexception

我有一个由 java web start 启动器启动的小程序，它也已签名。我需要用这个小程序在客户端机器上做一些文件操作，这样做会抛出异常。下面是完整的堆栈跟踪

```
java.security.AccessControlException: access denied (java.io.FilePermission C:\FMS\ELSV\JOURNAL\ARBRES\554 read)
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkRead(Unknown Source)
at java.io.File.isDirectory(Unknown Source)
at org.apache.commons.io.FileUtils.validateListFilesParameters(FileUtils.java:544)
at org.apache.commons.io.FileUtils.listFiles(FileUtils.java:521)
at com.newgen.customs.CNU.deleteSelectiveFiles(CNU.java:121)
at com.newgen.customs.CNU.filter(CNU.java:146)
at com.newgen.backend.Operation.call(Operation.java:83)
at filetransfermanager.FileTransferManagerView$1.windowOpened(FileTransferManagerView.java:48)
at java.awt.AWTEventMulticaster.windowOpened(Unknown Source)
at java.awt.Window.processWindowEvent(Unknown Source)
at javax.swing.JFrame.processWindowEvent(Unknown Source)
at java.awt.Window.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

以下是正在使用的导致问题的代码。（但我不认为它的代码）

```
listSaveFile.addAll(Arrays.asList(saveFileArr));
System.out.println("" + listSaveFile);

Collection<File> found = FileUtils.listFiles(new File(sFolderPath),
                         new NotFileFilter(new NameFileFilter(listSaveFile, IOCase.INSENSITIVE)),
                                 TrueFileFilter.INSTANCE);

for (File f : found) {
   try {
           FileUtils.forceDelete(f);
       } catch (Exception e) {
            delFlag = false;
            System.out.println("" + e.getMessage());
       }
 } 
```

请帮忙。提前致谢。

# xml - 在 PostgreSQL 数据库中存储 XML 解释计划

> ID：14747331
> 
> 赞同：2
> 
> 时间：2013-02-07T09:08:26.733
> 
> 标签：xml, plpgsql, postgresql-9.1, explain

如何在 PostgreSQL 数据库中存储 XML 解释计划（或任何其他格式）？

测试数据：`explain (verbose, format xml) select 1`

存储结果的表：`create table tmp.explain_plan_data (expp xml);`

我天真的测试失败了：

```
insert into tmp.explain_plan_data values (explain (verbose, format xml) select 1); 
```

似乎解释不能在任何其他`select`语句中使用，以下语句也不起作用：

```
select * from (explain (verbose, format xml) select 1) a 
```

我们正在使用 PostreSQL 9.1.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:23:49.683

我不是 100% 确定，但我认为这只能使用存储过程。您可以使用 DO 语句：

```
DO
$$
DECLARE
    _result xml;
BEGIN
    EXECUTE 'explain (verbose, format xml) select 1' INTO _result;

    INSERT INTO tmp.explain_plan_data(expp) VALUES(_result);
END;
$$; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T09:29:48.510

无法`EXPLAIN`使用子查询捕获输出，您应该使用 PL/pgSQL 过程：

```
CREATE OR REPLACE FUNCTION explain_v_xml(in_sql text)
RETURNS TABLE(explain_line xml) AS $explain_v_xml$
BEGIN
    RETURN QUERY EXECUTE 'EXPLAIN (VERBOSE, FORMAT xml) '||in_sql;
END;
$explain_v_xml$ LANGUAGE plpgsql; 
```

现在您可以像这样查询它：

```
SELECT explain_line FROM explain_v_xml('SELECT * FROM pg_locks'); 
```

并插入您的目标表：

```
INSERT INTO tmp.explain_plan_data SELECT explain_v_xml('SELECT 1');
SELECT * FROM tmp.explain_plan_data; 
```

也许单独在表中解释输出不是那么方便，我宁愿添加原始查询和`timestamptz`插入。

# c++ - 如何从 Kruskal MST 的捆绑属性中获取权重图？

> ID：14747333
> 
> 赞同：0
> 
> 时间：2013-02-07T09:08:31.937
> 
> 标签：c++, boost, boost-graph

我正在尝试将 Kruskal 的最小生成树应用于我的图，以将其从无向循环图变成真正的树。边权重都是一样的，因为 MST 是否唯一并不重要。

到目前为止，我已按如下方式实现它：

```
typedef boost::adjacency_list<boost::setS, boost::listS, 
            boost::undirectedS, CoordNode, CoordSegment> BGraph; 
```

和

```
class CoordSegment {
public:
    double weight;
[...]
} 
```

我需要向我的图表添加一些功能，因此我的图表对象实际上是一个派生（如果重要的话）：

```
class Graph : public BGraph {
protected:
    unsigned int _idCounter;

[...]
} 
```

我的问题在这里：

```
// compiles ok
boost::property_map<BGraph, double CoordSegment::*>::type weightMap = boost::get(&CoordSegment::weight, _graph);

    std::vector<EdgeDesc> tree;
// doesn't compile 
    boost::kruskal_minimum_spanning_tree(_graph, std::back_inserter(tree), weightMap); 
```

它抱怨如下：

```
\src\PGraphSkel.cpp(376) : error C2784: "void boost::kruskal_minimum_spanning_tree(const Graph &,OutputIterator,const boost::bgl_named_params<P,T,R> &)": template-argument for "const boost::bgl_named_params<P,T,R> &" could not be deduced from "boost::bundle_property_map<Graph,Descriptor,Bundle,T>".
1>        with
1>        [
1>            Graph=BGraph,
1>            Descriptor=boost::detail::edge_desc_impl<boost::undirected_tag,void *>,
1>            Bundle=CoordSegment,
1>            T=double
1>        ]
1>        C:\Libraries\boost_1_46_1\boost/graph/kruskal_min_spanning_tree.hpp(120): See declaration of 'boost::kruskal_minimum_spanning_tree' 
```

为什么它会抱怨呢？

如何使我的 bundled_property_map 成为此 Kruskal MST 函数所需的正确 bgl_named_pa​​rams 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T07:14:04.733

从定义的 adjacency_list 模板类继承根本不是一个好主意。删除这个继承解决了这个问题。使用 boost::graph 作为成员变量并将其他所有内容包装在一个类中会更好。

# iphone - iOS 中“POST”请求时的 MKNetwroking 问题

> ID：14747334
> 
> 赞同：0
> 
> 时间：2013-02-07T09:08:34.183
> 
> 标签：iphone, ios, mknetworkkit

我正在开发一个 iOS 应用程序。在 iOS 中使用[**MKNetwrokingKit**](https://github.com/MugunthKumar/MKNetworkKit)库向 Java 服务器发送“POST”请求时遇到问题。

我得到的服务器端响应是-

```
2013-02-06 15:15:19,527 WARN  [org.apache.tomcat.util.http.Parameters] (http-0.0.0.0-8443-3) Parameters: Invalid chunk ignored.
2013-02-06 15:15:19,527 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/XtrWS].[Authentication]] (http-0.0.0.0-8443-3) Servlet.service() for servlet Authentication threw exception
java.lang.IllegalArgumentException: No enum const class xtremum.health.us.api.generic.StaticVariable$ClientType.Praxify_151/1.0 CFNetwork/609 Darwin/12.2.0
    at java.lang.Enum.valueOf(Enum.java:196)
    at xtremum.health.us.api.generic.StaticVariable$ClientType.valueOf(StaticVariable.java:1)
    at xtremum.health.us.webservice.Authentication.doPost(Authentication.java:169)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662)
2013-02-06 15:15:39,061 WARN  [org.apache.tomcat.util.http.Parameters] (http-0.0.0.0-8443-3) Parameters: Invalid chunk ignored.
2013-02-06 15:15:39,062 INFO  [STDOUT] (http-0.0.0.0-8443-3) method name : login
2013-02-06 15:15:39,062 INFO  [STDOUT] (http-0.0.0.0-8443-3) I am in default case 
2013-02-06 15:15:39,062 INFO  [xtremum.health.us.api.generic.StaticVariable] (http-0.0.0.0-8443-3) msg to client : 1405
2013-02-06 15:15:39,062 DEBUG [xtremum.health.us.api.generic.StaticVariable] (http-0.0.0.0-8443-3) msg : {"msgToClient":1405}
2013-02-06 15:16:41,437 WARN  [org.apache.tomcat.util.http.Parameters] (http-0.0.0.0-8443-3) Parameters: Invalid chunk ignored. 
```

客户端响应是`NSUrlErrorDomain 500`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:18:31.240

错误 500 表示这是服务器的内部错误。

这通常意味着服务器出现异常并且可以正确处理您的请求。当服务器未正确编码时，可能会发生这种情况。

但这并不一定意味着您的请求是“正确的”：让我们想象一个 POST 请求，您应该在其中发送您的登录名和密码。想象一下，您的请求只发送了一个登录信息，而服务器没有正确编码，并且在使用它之前没有检查 2 个变量是否存在，这将导致 NullPointerException（在 java 中）。

无论如何，您应该与负责服务器的人员联系，以便他们可以调试您的请求，查看错误并纠正它以避免错误 500（不应该发生）

同时，看着

> java.lang.IllegalArgumentException：没有枚举常量类 xtremum.health.us.api.generic.StaticVariable$ClientType.Praxify_151/1.0 CFNetwork/609 Darwin/12.2.0

它看起来像一个身份验证错误，也许他们没有为您的请求创建 ClientType（或者您忘记正确填写此客户端类型？？）

您是否将一些身份验证信息传递给服务器？

# windows - 通过下拉列表（设计器）的按钮图像“

> ID：14747336
> 
> 赞同：0
> 
> 时间：2013-02-07T09:08:57.777
> 
> 标签：windows, forms, button, devexpress

我想为继承 (DevExpress.Simple-)Button 的自定义类实现我自己的 Designer-Property。它应该与 ImageIndex-Property 类似，具有图像预览和名称而不是索引号。

我的问题是，我无法选择下拉属性的值。我确定我必须重写 ImgColNamesPropertyGridEditor 类中的一个方法，但我不知道是哪一个。

按钮：

```
public class CButton1 : DevExpress.XtraEditors.SimpleButton
{
    private CImageCollection.Names ICNames = CImageCollection.Names.none;

    [Category("Appearance")]
    [Browsable(true)]
    [DefaultValue(CImageCollection.Names.none)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Editor(typeof(ImgColNamesPropertyGridEditor), typeof(UITypeEditor))]
    public CImageCollection.Names ImageName //Names is an Enum
    {
        get { return ImageNameGetter(); }
        set { ImageNameSetter(value); }
    }

    private CImageCollection.Names ImageNameGetter()
    {
        CImageCollection imgCol = CImageCollection.Instanz;
        if (this.ImageList == imgCol.Imagecollection)//Only if we use our Collection
        {
            return imgCol.GetEnumFromIndex(this.ImageIndex);
        }
        return CImageCollection.Names.none;
    }

    private void ImageNameSetter(CImageCollection.Names value)
    {
        CImageCollection imgCol = CImageCollection.Instanz;
        if (this.ImageList == imgCol.Imagecollection)//Only if we use our Collection
        {
            ICNames = value;
            this.ImageIndex = imgCol.GetIndexFromEnum(value);
        }
    }

    public CButton1()
    {
        CImageCollection imgcol = CImageCollection.Instanz;
        this.ImageList = imgcol.Imagecollection;
    }
} 
```

UITypeEditor：

```
class ImgColNamesPropertyGridEditor : UITypeEditor
{
    public override bool GetPaintValueSupported(ITypeDescriptorContext context)
    {
        //Set to true to implement the PaintValue method
        return true;
    }

    public override void PaintValue(PaintValueEventArgs e)
    {
        CImageCollection col = CImageCollection.Instanz;
        string _SourceName = col.GetEnumFromIndex((int)e.Value).ToString("g");

        //Draw the corresponding image
        Bitmap newImage = (Bitmap)CButtonRes.ResourceManager.GetObject(_SourceName);
        Rectangle destRect = e.Bounds;
        newImage.MakeTransparent();
        e.Graphics.DrawImage(newImage, destRect);
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        return base.EditValue(context, provider, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:21:53.287

为了解决这个问题，我们必须重写 EditValue 方法，但首先我们必须更改 GetEditStyle 方法。

```
public override UITypeEditorEditStyle GetEditStyle(System.ComponentModel.ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.DropDown;
    } 
```

现在让我们覆盖 EditValue 方法。我们有很多可以利用的机会。示例：我想检查我的 Button 是否有 ImageList。

```
public override object EditValue(System.ComponentModel.ITypeDescriptorContext context, IServiceProvider provider, object value)
    {

        // If it is a Button an his ImageList is empty,
        // it doesn't need a Dropdown
        if (context.Instance.GetType() == typeof(CButton))
        {
            CButton button = context.Instance as CButton;
            if (button.ImageList == null)
            {
                return value;
            }
        } 
```

现在我们必须创建自己的面板。在那里我们可以做很多很酷的东西。（稍后更多）我们放下那个面板。(editorService.DropDownControl(inep);) 关闭后，我们应该返回选择的值。(返回 inep.EnumValue;)

```
 //Panel with a ImageListBox and my Enum-Items
        ImageNameEditorPanel inep = new ImageNameEditorPanel(editorService);
        inep.EnumValue = (CImageCollection.Names)value;

        editorService.DropDownControl(inep);

        return inep.EnumValue;
    } 
```

为了制作一个看起来像下拉列表的面板，我使用了一个面板并在其中停靠（填充）了一个 DevExpress-Control (ImageListBoxControl)。但是你可以在没有 DexEx 的情况下做到这一点。有两种方法；一个艰难的和一个简单的方法。困难的是使用 Imagelist 并手动绘制图像和文本。最简单的方法是使用 Treeview 并给它你的 Imagelist。制作父节点并设置正确的ImageIndex。在构造函数中，如果单击了某些内容，则必须设置事件以关闭面板。构造函数：

```
public ImageNameEditorPanel(IWindowsFormsEditorService editorService)
    {
        InitializeComponent();
        this.EditorService = editorService;
        this.Size = new Size(Size.Width, Size.Height + 100);
        BorderStyle = BorderStyle.None;

        [...]
        imageListBoxControl1.MouseUp += new MouseEventHandler(lbMouseUp);//Set Value
        imageListBoxControl1.SelectedIndexChanged += new EventHandler(lbSelectedIndexChanged);//Close
        Controls.Add(imageListBoxControl1);// Don't forget that one! Took me an eternity to figure out...
    } 
```

方法：

```
 void lbMouseUp(object sender, MouseEventArgs e)
    {
        EditorService.CloseDropDown();
    } 
```

现在完成了！如果要实现对话框，请创建一个 From 并使用 ShowDialog(form) 而不是 DropDownControl(panel)。

# c# - 将动态文本与一列中的图像绑定并在wpf的数据网格中选择实体列

> ID：14747342
> 
> 赞同：4
> 
> 时间：2013-02-07T09:09:21.040
> 
> 标签：c#, wpf, data-binding, datagrid, wpfdatagrid

请让我知道如何使用 WPF 执行这种功能`DataGrid`。

并且还让用户知道如何选择`DataGrid`WPF 的整个列。![在此处输入图像描述](../Images/ecc5dc9833461b5cbf02b33a738ddcb5.png)

# vb.net - MurmurHash3 测试向量

> ID：14747343
> 
> 赞同：6
> 
> 时间：2013-02-07T09:09:25.877
> 
> 标签：vb.net, murmurhash

我正在尝试将[MurmurHash3 的 C# 实现](http://blog.kejser.org/murmurhash-in-c/)移植到 VB.Net。

它运行...但是有人可以为我提供一些已知的测试向量来验证正确性吗？

*   已知字符串文本
*   种子价值
*   MurmurHash3 的结果

提前致谢。

**编辑：**我将实现限制为仅 32 位 MurmurHash3，但如果您还可以为 64 位实现提供向量，那也很好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-10T21:31:00.083

我终于开始创建一个 MurMur3 实现，并且我设法翻译了 SMHasher 测试代码。我的实现给出了与 SMHasher 测试相同的结果。这意味着我终于可以给出一些有用的并且假定是正确的测试向量。

这仅适用于 Murmur3_x86_32

```
| Input        | Seed       | Expected   |
|--------------|------------|------------|
| (no bytes)   | 0          | 0          | with zero data and zero seed, everything becomes zero
| (no bytes)   | 1          | 0x514E28B7 | ignores nearly all the math
| (no bytes)   | 0xffffffff | 0x81F16F39 | make sure your seed uses unsigned 32-bit math
| FF FF FF FF  | 0          | 0x76293B50 | make sure 4-byte chunks use unsigned math
| 21 43 65 87  | 0          | 0xF55B516B | Endian order. UInt32 should end up as 0x87654321
| 21 43 65 87  | 0x5082EDEE | 0x2362F9DE | Special seed value eliminates initial key with xor
| 21 43 65     | 0          | 0x7E4A8634 | Only three bytes. Should end up as 0x654321
| 21 43        | 0          | 0xA0F7B07A | Only two bytes. Should end up as 0x4321
| 21           | 0          | 0x72661CF4 | Only one byte. Should end up as 0x21
| 00 00 00 00  | 0          | 0x2362F9DE | Make sure compiler doesn't see zero and convert to null
| 00 00 00     | 0          | 0x85F0B427 | 
| 00 00        | 0          | 0x30F4C306 |
| 00           | 0          | 0x514E28B7 | 
```

对于那些将要移植到没有实际数组的语言的人，我也有一些基于字符串的测试。对于这些测试：

*   所有字符串都假定为 UTF-8 编码
*   并且不包括任何空终止符

我将以代码形式保留这些：

```
TestString("", 0, 0); //empty string with zero seed should give zero
TestString("", 1, 0x514E28B7);
TestString("", 0xffffffff, 0x81F16F39); //make sure seed value is handled unsigned
TestString("\0\0\0\0", 0, 0x2362F9DE); //make sure we handle embedded nulls

TestString("aaaa", 0x9747b28c, 0x5A97808A); //one full chunk
TestString("aaa", 0x9747b28c, 0x283E0130); //three characters
TestString("aa", 0x9747b28c, 0x5D211726); //two characters
TestString("a", 0x9747b28c, 0x7FA09EA6); //one character

//Endian order within the chunks
TestString("abcd", 0x9747b28c, 0xF0478627); //one full chunk
TestString("abc", 0x9747b28c, 0xC84A62DD);
TestString("ab", 0x9747b28c, 0x74875592);
TestString("a", 0x9747b28c, 0x7FA09EA6);

TestString("Hello, world!", 0x9747b28c, 0x24884CBA);

//Make sure you handle UTF-8 high characters. A bcrypt implementation messed this up
TestString("ππππππππ", 0x9747b28c, 0xD58063C1); //U+03C0: Greek Small Letter Pi

//String of 256 characters.
//Make sure you don't store string lengths in a char, and overflow at 255 bytes (as OpenBSD's canonical BCrypt implementation did)
TestString(StringOfChar("a", 256), 0x9747b28c, 0x37405BDC); 
```

我将只发布我转换为 Murmur3 的 11 个 SHA-2 测试向量中的两个。

```
TestString("abc", 0, 0xB3DD93FA);
TestString("abcdbcdecdefdefgefghfghighijhijkijkljklmklmnlmnomnopnopq", 0, 0xEE925B90); 
```

最后，最重要的：

*   **钥匙：** `"The quick brown fox jumps over the lazy dog"`
*   **种子：** 0x9747b28c
*   **哈希**：0x2FA826CD

如果其他人可以从他们的实现中确认任何/所有这些向量。

而且，这些测试向量再次来自通过 SMHasher 256 迭代循环测试的实现[`KeySetTest.cpp - VerificationTest(...)`](https://github.com/rurban/smhasher/blob/9c9619c3beef4241e8e96305fbbee3ec069d3081/KeysetTest.cpp)。

这些测试来自我在 Delphi 中的实现。我还在 Lua 中创建了一个实现（在支持数组方面并不大）。

> **注意**：任何发布到公共领域的代码。无需归属。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T15:39:56.577

SMHasher 使用一个[小例程来检查哈希是否正常工作](https://code.google.com/p/smhasher/source/browse/trunk/KeysetTest.cpp#13)，基本上它计算以下值的哈希，每个值使用递减的种子值（从 256 开始）：

```
' The comment in the SMHasher code is a little wrong -
' it's missing the first case.
{}, {0}, {0, 1}, {0, 1, 2} ... {0, 1, 2, ... 254} 
```

并将其附加到一个`HASHLENGTH * 256`长度数组，换句话说：

```
' Where & is a byte array concatenation.
HashOf({}, 256) &
HashOf({0}, 255) &
HashOf({0, 1}, 254) &
...
HashOf({0, 1, ... 254), 1) 
```

然后它获取那个大数组的哈希值。最终散列的前 4 个字节被解释为无符号 32 位整数，并根据验证码进行检查：

*   **`MurmurHash3 x86 32`** `0xB0F57EE3`
*   **`MurmurHash3 x86 128`** `0xB3ECE62A`
*   **`MurmurHash3 x64 128`** `0x6384BA69`

不幸的是，这是我能找到的唯一公开测试。我想另一种选择是编写一个快速的 C 应用程序并散列一些值。

这是我的验证器的 C# 实现。

```
static void VerificationTest(uint expected)
{
    using (var hash = new Murmur3())
    // Also test that Merkle incremental hashing works.
    using (var cs = new CryptoStream(Stream.Null, hash, CryptoStreamMode.Write))
    {
        var key = new byte[256];

        for (var i = 0; i < 256; i++)
        {
            key[i] = (byte)i;
            using (var m = new Murmur3(256 - i))
            {
                var computed = m.ComputeHash(key, 0, i);
                // Also check that your implementation deals with incomplete
                // blocks.
                cs.Write(computed, 0, 5);
                cs.Write(computed, 5, computed.Length - 5);
            }
        }

        cs.FlushFinalBlock();
        var final = hash.Hash;
        var verification = ((uint)final[0]) | ((uint)final[1] << 8) | ((uint)final[2] << 16) | ((uint)final[3] << 24);
        if (verification == expected)
            Console.WriteLine("Verification passed.");
        else
            Console.WriteLine("Verification failed, got {0:x8}, expected {1:x8}", verification, expected);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T23:04:46.240

我改进了乔纳森的救生代码。您的 Murmur3 必须实现`ICryptoTransform`此方法才能正常工作。你可以在[github](https://github.com/darrenkopp/murmurhash-net/) 上找到一个实现这个接口的。

```
public static  void VerificationTest(uint expected)
{
    using (var hash = new Murmur32ManagedX86())
    {
        using (var cs = new CryptoStream(Stream.Null, hash, CryptoStreamMode.Write))
        {
            var key = new byte[256];

            for (var i = 0; i < 256; i++)
            {
                key[i] = (byte)i;
                using (var mur = new Murmur32ManagedX86((uint)(256 - i)))
                {
                    var computed = mur.ComputeHash(key, 0,i);
                    cs.Write(computed, 0, 4);
                }
            }
            cs.FlushFinalBlock();
            var testBoy = hash.Seed;

            var final = hash.Hash;
            var verification = ((uint)final[0]) | ((uint)final[1] << 8) | ((uint)final[2] << 16) | ((uint)final[3] << 24);
            if (verification == expected)
                Console.WriteLine("Verification passed.");
            else
                Console.WriteLine("Verification failed, got {0:x8}, expected {1:x8}", verification, expected);
        }
    }
} 
```

如果您使用没有`ICryptoTransform`接口但只处理字节并返回的`int`实现（也可以轻松修改以使用`byte[]`）。这是测试功能：

```
public static void VerificationTest(uint expected)
{
    using (var stream = new MemoryStream())
    {
        var key = new byte[256];

        for (var i = 0; i < 256; i++)
        {
            key[i] = (byte)i;
            var hasher = new MurMurHash3((uint)(256 - i));

            int computed = hasher.ComputeBytesFast(key.Take(i).ToArray());
            stream.Write(BitConverter.GetBytes(computed), 0, 4);
        }
        var finalHasher = new MurMurHash3(0); //initial seed = 0
        int result = finalHasher.ComputeBytesFast2(stream.GetBuffer());
        if (result == (int)expected)
            Console.WriteLine("Verification passed.");
        else
            Console.WriteLine("Verification failed, got {0:x8}, expected {1:x8}", verification, expected);
    }
} 
```

# c# - 如何知道谁在处置我的 Bitmap 对象或它已被处置在哪里？

> ID：14747346
> 
> 赞同：2
> 
> 时间：2013-02-07T09:09:32.297
> 
> 标签：c#, .net, visual-studio, bitmap, dispose

我的对象通过一些复杂的管道传递，在它的某些部分，我没有代码，我需要知道`Dispose`在我的`Bitmap`!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:20:11.510

您可以`System.Drawing.Image.Dispose`从断点窗口添加断点。然后调试器将在被调用时停止`Image.Dispose`，您可以从“调用堆栈”窗口查看调用它的位置。

不要忘记关闭 Debugging > General > Enable Just My Code。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T09:24:29.273

您不能对位图类（例如`inherit`它）执行任何操作，然后在处置时引发事件，以便您可以捕获对象被处置的特定点。

但是，如果您正确使用一次性对象，您应该知道在哪里调用 dispose。

```
using(Bitmap b = new Bitmap(""))
{
  //Do some stuff with B
//Dispose is handled on end of using
} 
```

或者你`Dispose()`自称的地方。

```
Bitmap b = new Bitmap("");
//Do some stuff with b
b.Dispose(); 
```

您最好将代码设置在您知道正在处理对象的位置。进入`System.Drawing.Image`对象将帮助您识别它，但除了 dispose 方法中您不能做任何事情。

# ios - CA::Layer::set_position 随机崩溃

> ID：14747356
> 
> 赞同：0
> 
> 时间：2013-02-07T09:10:35.843
> 
> 标签：ios, uiviewanimation, crash-reports, cclayer

我的应用程序中有一个崩溃的错误。

它发生在同一个地方，但并非总是如此。我还没有发现问题。

这是两个崩溃日志：

> ```
>  Incident Identifier: EB73AE61-00FB-4282-8F1D-B8ECEC19E02D
> CrashReporter Key:   6f005b28e796b18f3ab2687bb364b2be1eb137cd
> Hardware Model:      iPhone5,2
> Path:            /var/mobile/Applications/BF2F1016-8C00-40A3-BB75-0933F53741F0/*******.app/******
> Version:         ??? (???)
> Code Type:       ARM (Native)
> Parent Process:  launchd [1]
> 
> Exception Type:  EXC_CRASH (SIGABRT)
> Exception Codes: 0x0000000000000000, 0x0000000000000000
> Crashed Thread:  0
> 
> Last Exception Backtrace:
> 0   CoreFoundation                    0x312d13e2 __exceptionPreprocess + 158
> 1   libobjc.A.dylib                   0x38fc295e objc_exception_throw + 26
> 2   CoreFoundation                    0x312d1302 +[NSException raise:format:] + 102
> 3   QuartzCore                        0x32e8e106 CA::Layer::set_position(CA::Vec2<double> const&, bool) + 206
> 4   QuartzCore                        0x32e8e02e -[CALayer setPosition:] + 46
> 5   QuartzCore                        0x32e8dfc2 -[CALayer setFrame:] + 554
> 6   UIKit                             0x330e1bd2 -[UIView(Geometry) setFrame:] + 230
> 7   UIKit                             0x330e18fc -[UIImageView _setViewGeometry:forMetric:] + 180
> 8   UIKit                             0x330e183a -[UIImageView setFrame:] + 42
> 9   etapes                            0x0006de1c 0x5c000 + 73244
> 10  UIKit                             0x33203136 -[UIScrollView _endPanWithEvent:] + 3694
> 11  UIKit                             0x3321c520 -[UIScrollView handlePan:] + 120
> 12  UIKit                             0x331fdc5c _UIGestureRecognizerSendActions + 124
> 13  UIKit                             0x331c539c -[UIGestureRecognizer _updateGestureWithEvent:] + 388
> 14  UIKit                             0x333b215e ___UIGestureRecognizerUpdate_block_invoke_0543 + 42
> 15  UIKit                             0x330e987e _UIGestureRecognizerRemoveObjectsFromArrayAndApplyBlocks + 214
> 16  UIKit                             0x330e82c8 _UIGestureRecognizerUpdate + 1160
> 17  UIKit                             0x330f31e2 -[UIWindow _sendGesturesForEvent:] + 762
> 18  UIKit                             0x330f2dae -[UIWindow sendEvent:] + 86
> 19  UIKit                             0x330e08dc -[UIApplication sendEvent:] + 376
> 20  UIKit                             0x330e01ea _UIApplicationHandleEvent + 6194
> 21  GraphicsServices                  0x34df75f2 _PurpleEventCallback + 586
> 22  GraphicsServices                  0x34df7222 PurpleEventCallback + 30
> 23  CoreFoundation                    0x312a63e2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
> 24  CoreFoundation                    0x312a6386 __CFRunLoopDoSource1 + 134
> 25  CoreFoundation                    0x312a520a __CFRunLoopRun + 1378
> 26  CoreFoundation                    0x31218238 CFRunLoopRunSpecific + 352
> 27  CoreFoundation                    0x312180c4 CFRunLoopRunInMode + 100
> 28  GraphicsServices                  0x34df6336 GSEventRunModal + 70
> 29  UIKit                             0x331342b4 UIApplicationMain + 1116
> 30  etapes                            0x0005e15e 0x5c000 + 8542
> 31  etapes                            0x0005e114 0x5c000 + 8468 
> ```

/////////////////////////////////////////////////////////////////////////////////// ///////////////

> ```
> Incident Identifier: 4FE03135-D442-4CEA-B230-8322647262EE
> CrashReporter Key:   6f005b28e796b18f3ab2687bb364b2be1eb137cd
> Hardware Model:      iPhone5,2
> Process:         etapes [2916]
> Path:            /var/mobile/Applications/BF2F1016-8C00-40A3-BB75-0933F53741F0/******.app/****
> Version:         ??? (???)
> Code Type:       ARM (Native)
> Parent Process:  launchd [1]
> 
> Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
> Exception Codes: KERN_INVALID_ADDRESS at 0x00000064
> Crashed Thread:  0
> 
> Thread 0 name:  Dispatch queue: com.apple.main-thread
> Thread 0 Crashed:
> 0   UIKit                             0x33df7b06 -[UIView(CALayerDelegate) actionForLayer:forKey:] + 138
> 1   QuartzCore                        0x33ba7786 -[CALayer actionForKey:] + 70
> 2   QuartzCore                        0x33ba7732 _ZL12actionForKeyP7CALayerPN2CA11TransactionEP8NSString + 54
> 3   QuartzCore                        0x33ba7626 CA::Layer::begin_change(CA::Transaction*, unsigned int, objc_object*&) + 126
> 4   QuartzCore                        0x33ba2322 CA::Layer::setter(unsigned int, _CAValueType, void const*) + 178
> 5   QuartzCore                        0x33bce782 -[CALayer setBackgroundColor:] + 30
> 6   UIKit                             0x33e0ef50 -[UIView(Internal) _setBackgroundCGColor:withSystemColorName:] + 1016
> 7   etapes                            0x000fc8d2 0xdd000 + 129234
> 8   etapes                            0x000f8c6a 0xdd000 + 113770
> 9   CoreFoundation                    0x31fe9ad0 __invoking___ + 64
> 10  CoreFoundation                    0x31f4128a -[NSInvocation invoke] + 286
> 11  Foundation                        0x328eaf60 -[NSInvocationOperation main] + 108
> 12  Foundation                        0x32874a84 -[__NSOperationInternal start] + 836
> 13  Foundation                        0x328ecfe2 __block_global_6 + 98
> 14  libdispatch.dylib                 0x3a0f1790 _dispatch_call_block_and_release + 8
> 15  libdispatch.dylib                 0x3a0f15d8 _dispatch_client_callout + 20
> 16  libdispatch.dylib                 0x3a0f4e40 _dispatch_main_queue_callback_4CF + 224
> 17  CoreFoundation                    0x31fba1ac __CFRunLoopRun + 1284
> 18  CoreFoundation                    0x31f2d238 CFRunLoopRunSpecific + 352
> 19  CoreFoundation                    0x31f2d0c4 CFRunLoopRunInMode + 100
> 20  GraphicsServices                  0x35b0b336 GSEventRunModal + 70
> 21  UIKit                             0x33e492b4 UIApplicationMain + 1116
> 22  etapes                            0x000df15e 0xdd000 + 8542
> 23  etapes                            0x000df114 0xdd000 + 8468 
> ```

如果您想了解更多详细信息，我可以！

经过研究，这是问题所在的代码：

```
self.imageviewFondArticle.frame = CGRectMake((-((_imageviewFondArticle.frame.size.height*imageRatio)-320)/2),0, _imageviewFondArticle.frame.size.height*imageRatio, _imageviewFondArticle.frame.size.height); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:55:41.520

首先，根据[Apple 的文档](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/frame)，CALayer 的“框架”是“计算属性” 。您可能想要设置边界、锚点或位置属性。（相比之下，UIView 的框架可以设置和动画。）

其次，我来这个帖子是因为我也遇到了这样的崩溃。它发生在我设置 CALayer 的位置属性时。事实证明，抛出的异常是针对无效位置的 - 其中一个坐标是 NaN。我通过将“layer.position = pos”包装在@try-@catch 块中找到了这一点。修复无效位置的根本原因为我解决了这个问题。基于此，我猜您的“imageRatio”值无效。

# regex - NetBeans 使用正则表达式替换所有常量

> ID：14747357
> 
> 赞同：5
> 
> 时间：2013-02-07T09:10:46.860
> 
> 标签：regex, netbeans, replace

我正在使用 NetBeans，我想知道使用什么正则表达式在每个常量周围添加单引号/双引号。每个常量的定义如下：

```
define(SYSTEM_BASEDIR, '/base/dir'); 
```

Afaik，这不是正确的方法。我需要将所有常量转换为：

```
define('SYSTEM_BASEDIR', '/base/dir'); 
```

在此先感谢所有帮助者！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T09:18:45.223

您是正确的，这`define(SYSTEM_BASEDIR, '/base/dir');`是无效的语法，因为您在定义它之前使用了常量。

现在对于正则表达式：

打开替换对话框（`Ctrl`+ `H`）

找什么：`define\((\w*),`

用。。。来代替：`define("$1",`

这将变成这样：

```
define(BLA,"test"); 
```

进入：

```
define("BLA","test"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-23T09:44:13.757

网豆`Ctrl`+`H`

```
find: (define\()(\w*)(\,)
replace: define("$2", 
```

检查正则表达式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:18:02.567

网豆`Ctrl`+`H`

```
find: define\(([A-Za-z_]+),
replace: define('$1', 
```

检查正则表达式

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T09:15:20.293

```
$result = preg_replace('/\bdefine\((\w+),/', 'define(\'\1\',', $subject); 
```

更改所有实例

```
define(<alphanumeric word>, 
```

进入

```
define('<alphanumeric word>', 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T09:20:11.770

从您的编辑器中找到替换文本

在那里使用这个 reg 表达式：

```
find : define\((.*),

replace : define('\$1', 
```

如果您使用的是记事本++

```
replace : define('\1', 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T09:26:04.307

使用此正则表达式替换

```
(?<constant>(?:[A-Z]+(_[A-Z]+)*)) 
```

# ruby-on-rails - Rails Rspec 错误 - 未定义的局部变量或方法#

> ID：14747361
> 
> 赞同：2
> 
> 时间：2013-02-07T09:10:52.087
> 
> 标签：ruby-on-rails, rspec

我正在阅读 Michael Hartl 的 railstutorial 的第 11 章，并且遇到了一些 rspec 错误。

![rspec 错误](../Images/4a609b6ab55eadd36f4db95152772cbd.png)

我不太确定错误消息的含义。

以防万一，这是我的规范代码。

```
 let(:follower) {FactoryGirl.create(:user)}
  let(:followed) {FactoryGirl.create(:user)}
  let(:relationship) {follower.relationships.build(followed_id: followed_id)}

  subject {relationship}

  it {should be_valid}

  describe "accessible attributes" do
    it "should not allow access to follower_id" do
      expect do
        Relationship.new(follower_id: follower_id)
      end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:15:56.680

更改此行：

> 让（：关系）{follower.relationships.build（followed_id：followed_id）}

至

```
let(:relationship) {follower.relationships.build(followed_id: followed.id)} 
```

# java - Android, java, Xml Parsin 使用 Dom

> ID：14747364
> 
> 赞同：-4
> 
> 时间：2013-02-07T09:11:22.047
> 
> 标签：java, android, xml, xml-parsing

如何使用 DOM 解析这个标签？

`<gd:where startTime="Jan 4 2012" endTime="Jan 5 2012"/>`

我想要这个标签的`startTime`and `endTime`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:16:03.797

尝试使用这个

```
getAttributeValue(null,"startTime") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:05:44.427

编写 xml 解析器非常有指导意义，但如果您在命名空间方面遇到问题。我建议使用现有的 xml 解析库。

如果你想知道，搜索*解析带有命名空间的xml元素*

[simplexml](http://simple.sourceforge.net)和[xpath](http://developer.android.com/reference/javax/xml/xpath/package-summary.html)应该都可以正常工作。

# jquery - jQuery focus() 导致 .load() 在 IE9 中执行两次

> ID：14747365
> 
> 赞同：1
> 
> 时间：2013-02-07T09:11:25.043
> 
> 标签：jquery, jquery-load

jQuery 焦点似乎导致 Internet Explorer 9 执行两次。这个问题在旧版本的 IE 中不会发生，在 Firefox 或 Chrome 中也不会发生。

我让用户在输入字段中输入代码。在输入或提交时，代码通过负载发送到另一个脚本（ajax）。输入字段中的代码被删除，焦点被带回。

该脚本的结果被插入到同一页面上的一个 div 中。

```
 $(document).ready(function(){
        $('#code').keyup(function(e){
            if(e.keyCode == 13){
                console.log('Code submitted through enter');
                sendcode($('#code').val());
            }
        });

        function sendcode(b){
            console.log('function sendcode used');
            $('#Result').load('scan.php?code=' + b);
            $('#code').val('');
            $('#code').focus();
        };

        $('#Submit').click(function(){
            console.log('Code submitted through click');
            sendcode($('#code').val());
        });
    }); 
```

但是， focus() 似乎是问题所在，因为当我删除它时，问题就消失了。我尝试将 focus() 放在代码的任何位置，但没有成功。是否有任何替代 focus() 的方法可以实现相同的效果，或者可以以某种方式修复？

```
NETWORK:

URL: /scan.php?code=stackoverflow
URL: /scan.php?code=

CONSOLE: (when hit enter)
Log: Code submitted through click 
Log: function sendcode used 
Log: Code submitted through enter 
Log: function sendcode used 
```

您可以看到第二个负载也没有携带代码变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:32:55.523

`Submit`将按钮更改为`span`or`div`并设置样式。

```
<span id="Submit">Submit</span> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/hTFqm/2/)

您还可以查看[这个答案](https://stackoverflow.com/questions/12325066/button-click-event-fires-when-pressing-enter-key-in-different-input-no-forms)`type="button"`，其中建议向按钮元素添加属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:33:17.917

```
 function sendcode(b){
        if(b){
            console.log('function sendcode used');
            $('#Result').load('scan.php?code=' + b);
            $('#code').val('');
            $('#code').focus();
        }
    }; 
```

沿着这些思路的东西应该起作用。也许如果`b != undefined`或类似的东西。只要确保B在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:17:54.080

把函数放在外面`doc ready`，试试这个：

```
function sendcode(b){
  $('#Result').load('scan.php?code=' + b);
  $('#code').val('');
  $('#code').focus();
}

$(document).ready(function(){
    $('#code').keyup(function(e){
        if(e.keyCode == 13){
            sendcode($('#code').val());
        }
    });

    $('#Submit').click(function(){
        sendcode($('#code').val());
    });
}); 
```

或试试这个：

`.load()`是 jquery 的`ajax`方法之一，因此您必须停止提交表单，否则页面会刷新。

```
$('#Submit').click(function(e){
    e.preventDefault();
    sendcode($('#code').val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T06:20:19.597

不要拦截击键，除非你真的，真的是认真的。当然不要用 span 模拟按钮！HTML 有标签是`span`有`div`原因的。

您的问题可以说是一个 IE 错误，但这是您使用内置行为解决问题的结果，效果很好。您只需要*一个*在提交*表单*时触发的事件处理程序。

```
$(document).ready(function(){
    function sendcode(b){
        console.log('function sendcode used');
        $('#Result').load('scan.php?code=' + b);
        $('#code').val('');
        $('#code').focus();
    };

    $('#form').submit(function(e) {
        e.preventDefault();
        sendcode($('#code').val());

    });
}); 
```

然后，坦率地说，您可以拥有一个不依赖于 JavaScript 的更易于访问的表单，以及更可重用的代码：

```
$(document).ready(function(){
    $('#form').submit(function(e) {
        e.preventDefault();

        var $form = $(this);
        var data = $form.serialize();
        var action = $form.attr('action');
        $('#result').load(action + '?' + data);

        $('#code').val('').focus();
    });
}); 
```

现在 URL 存在于表单的`action`属性上（这是表单的目标 URL 所在的位置），并且 JS 将像浏览器一样捆绑表单值并为您提交表单。*如果用户禁用了 JS，表单将正常*提交并且他们仍然会得到有用的结果，尽管是在一个新页面中。代码更短，为您处理 URL 转义问题，并且硬编码值更少。

# asp.net-mvc-4 - 使用 specflow 为 Mvc4/WebApi 网站编写验收测试

> ID：14747368
> 
> 赞同：2
> 
> 时间：2013-02-07T09:11:38.610
> 
> 标签：asp.net-mvc-4, automated-tests, specflow, acceptance-testing, web-testing

我一直在阅读一些关于验收测试的内容，我想在我们的 Web 应用程序中添加一些内容。我们最近经历了一些回归，我认为这会对我们有所帮助。

我们使用 MVC4 框架来传递视图，但也使用 knockout.js 和 webapi 通过 json 数据驱动 html 的生成。这是一个相当繁重的 javascript 应用程序。

我一直在阅读一些关于[SpecFlow](http://www.specflow.org/)的文章，我认为它看起来不错。我们的测试人员可以用 gerkin 语法编写他们的测试用例，然后让程序员来实现它们或类似的东西。

我对此有几个问题，也许我的理解在这里有点有限。总的来说，这可能是一个不好的问题，但对此的任何建议将不胜感激。

1.  验收测试是实时产品的端到端测试吗？我读过一些是的，一些不是的。
2.  是否可以使用[Specflow](http://www.specflow.org/)编写操作浏览器的测试？
3.  我应该进行端到端测试还是应该只对 c#、javascript 进行单元测试，并可能在 webapi 路由上进行一些集成测试？
4.  我应该使用[Ranorex](http://www.ranorex.com/)或[Selenium](http://seleniumhq.org/)之类的东西进行端到端吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:37:27.200

SpecFlow 是一个框架，允许开发人员和业务人员以可执行规范的形式协作定义系统的业务功能，这些规范可以重复和一致地运行，并用作定义系统应该如何运行的“活文档”系统在任何给定点。为了有效地做到这一点，需要从外向内编写规范，即点击应用程序的入口点，对于基于 Web 的应用程序来说，入口点可以是网站 URL 或某种服务端点，并为此目的验证业务需求观点。要回答您的问题：

> 验收测试是实时产品的端到端测试吗？我读过一些是的，一些不是的。我应该进行端到端测试还是应该只对 c#、javascript 进行单元测试，并可能在 webapi 路由上进行一些集成测试？

验收测试是其中很大一部分，但不应孤立地进行。如果您正在使用集成测试，或者验证外部系统是否按预期进行通信，您可能还需要实际访问您的数据存储的集成测试。您当然应该对您的各个组件进行单元测试并酌情模拟/排除依赖关系，但这不会告诉您系统的不同层是否作为一个整体相互依赖地运行。这就是 SpecFlow 真正闪耀的地方。我不一定提倡在您的实时站点上运行验收测试，但是专门为验证验收测试设置一个实时镜像将是一项非常值得的努力，最好是作为您的 CI 构建过程的一部分。

> 是否可以使用 Specflow 编写操作浏览器的测试？我应该使用 Ranorex 或 Selenium 之类的东西进行端到端吗？

绝对有可能。您可以使用[Selenium WebDriver](http://seleniumhq.org/docs/03_webdriver.jsp)或类似[Watin](http://watin.org/)（Selenium 的 .NET 包装器）之类的东西。上次我查看时，Watin 只在 IE 中工作。它可以与 Firefox 3.6 一起使用，但是当他们发布 5 时，FF 核心的变化停止了它的工作。很遗憾，因为它是一个非常好的框架。SpecFlow 提供了可用于在每次测试运行期间启动和关闭浏览器的挂钩。下面是一个使用 Selenium WebDriver 的简单示例：

```
[Binding]
public class FeatureHooks
{
    [BeforeFeature]
    public static void StartWebDriver()
    {
        Runner.InitialiseHost(HostTypeOption.Firefox);
    }

    [AfterFeature]
    public static void StopWebDriver()
    {
        Runner.StopHost();
    }

} 
```

Runner 是一个静态类，我将其用作我正在开发的页面框架的一部分，以帮助实现验收测试自动化。这是主机初始化部分：

```
public static class Runner
{
    internal static IWebDriver Host { get; private set; }

    public static void InitialiseHost(HostTypeOption hostType, int windowWidth = 1024, int windowHeight = 768)
    {
        switch (hostType)
        {
            case HostTypeOption.Firefox:
                Host = new FirefoxDriver();
                break;
            case HostTypeOption.InternetExplorer:
                Host = new InternetExplorerDriver();
                break;
            case HostTypeOption.Chrome:
                Host = new ChromeDriver();
                break;
            case HostTypeOption.Safari:
                Host = new SafariDriver();
                break;
            default:
                throw new ArgumentOutOfRangeException("hostType");
        }
        Host.Manage().Window.Size = new System.Drawing.Size(windowWidth, windowHeight);
        Host.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(3));
    }

    public static void StopHost()
    {
        Host.Quit();
        Host = null;
    }
} 
```

如果您想使用 IE 或 Chrome，您需要下载特定的驱动程序并将其添加到验收测试项目的 bin 目录中，但 Firefox 可以正常工作。

# image - Matlab中的Lanread函数

> ID：14747369
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:11:46.267
> 
> 标签：image, matlab

我有一个多光谱图像，我有一个问题。我在互联网上找到了一个可以读取这种图像的功能代码。问题是我收到以下错误：

```
??? function [lan_data] = lanread('montana.lan')
    |
Error: Function definitions are not
permitted in this context. 
```

此外，当我检查“lanread”命令的帮助时，我收到了以下信息：“>> help landread

未找到土地读取。”

这个命令可能不存在吗？我没有找到太多关于它的信息。

提前致谢，

PD) 这是功能代码。

```
function [lan_data] = lanread('montana.lan','C:\formato_lan')
% LANREAD Read Landsat data file type .lan
% Ex: im = lanread('montana.lan')
% size(im) = [m,n,d];
    % (From landsatdemo in the image analysis toolbox.)

% $Id: lanread.m 3325 2007-04-06 15:52:34Z finn $

if (nargin<2), thepath = []; end
if isempty(thepath)
  [p,n,e]=fileparts(which('fms150path'));
  thepath= {fullfile('.',filesep),...
            fullfile(p,filesep,'data',filesep),...
            fullfile(p,filesep,'data',filesep,'protected',filesep),...
            fullfile(p,filesep,'data',filesep,'protected',filesep, ...
                     'lan',filesep),...
            ''};
elseif ischar(thepath)
  thepath = {thepath};
end

fid = -1;
if (fid<0)
  for path_idx=1:length(thepath)
    filename = sprintf('%s%s',thepath{path_idx},lan_filename);
    fid = fopen(filename,'r');
    if (fid>=0), break; end
  end
  if (fid<0) % If not found anywhere
    error(sprintf('Could not open file: %s',filename));
  end
end

% find out how big the image is based on file size,
% assuming square image, 7 bands
nbands = 7;
fseek(fid,0,'eof');
file_bytes = ftell(fid);
nlines = floor(sqrt(file_bytes/nbands));
nsamples = nlines;

% skip header
nbytes_header = 128;
fseek(fid,nbytes_header,'bof');

% prepend * to read data into an array that has the same class as the data
A = fread(fid,[nsamples nlines*nbands],'*uint8'); 

fclose(fid);

% put data into a 3D array
A_3dim = reshape(A,nsamples,nbands,nlines);
lan_data = permute(A_3dim,[3 1 2]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:15:52.140

1.  当调用一个函数（而不是定义一个函数）时，你不需要使用关键字`function`。所以，为了使用你刚才的功能

    > > [lan_data] = lanread('montana.lan');

2.  声明函数时，**必须**使用关键字`function`但带有**参数名称**。所以文件中的第一行`lanread.m`应该是

    ```
    function [lan_data] = lanread(lan_filename, thepath) 
    ```

    而**不是**

    ```
    function [lan_data] = lanread('montana.lan','C:\formato_lan') 
    ```

    只有当您调用函数时，您才使用*值* `'montana.lan'`和`'c:\formato_lan'` 作为参数。

3.  要获得帮助，您需要**准确**输入函数名称

    > > 文档 lanread

并不是`landread`

# javascript - 如何使用 javascript xhr（在 chrome 中）下载大型视频文件

> ID：14747370
> 
> 赞同：3
> 
> 时间：2013-02-07T09:12:01.410
> 
> 标签：javascript, ajax, google-chrome, xmlhttprequest, blob

由于一个不断崩溃 chrome 标签的错误 ( [http://code.google.com/p/chromium/issues/detail?id=138506](http://code.google.com/p/chromium/issues/detail?id=138506) ) 无法通过 ajax 下载大文件 (>50-80 Mb)要求。

不幸的是，我必须使用 Chrome，因为它是目前唯一实现 FileSystem API ( [http://www.w3.org/TR/file-system-api/](http://www.w3.org/TR/file-system-api/) ) 的浏览器。

如何下载大型电影文件以将其显示在`<video>`.

你有一些代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:46:21.327

我设法编写了一个 javascript chunkloader 的工作实现。它依赖于一些返回块计数和块本身的服务器端代码。客户端代码运行良好。

如果您想查看或有任何改进，请随时 fork、复制或分享： [https ://github.com/bux578/chunkload.js](https://github.com/bux578/chunkload.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:20:09.223

根据您链接到的问题，这是达到了内存限制 - 您很可能会在任何内存有限的浏览器中获得该限制。

Chrome 中的问题是 XHR 不会引发异常，因此无法捕获和解决错误 - 因此似乎没有可用的修复程序，除非可能增加可用内存。

File API 在 Firefox、Chrome、Safari 和 Opera 中提供全面支持，在 IE10 中提供部分支持：

[http://caniuse.com/fileapi](http://caniuse.com/fileapi)

# apache - apache 将所有 URL 重写为 HTTPS，除了一个

> ID：14747371
> 
> 赞同：0
> 
> 时间：2013-02-07T09:12:06.133
> 
> 标签：apache, url, mod-rewrite, ssl, https

我有一个网站，我正在引导所有非 SSL 流量使用 https 协议。

我用过

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这很好用，但我需要网址

```
http://www.mywebsite.com/update-db.php 
```

不遵守这条规则。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:33:19.800

Simply just:

```
RewriteCond %{REQUEST_URI} !^/update-db.php$
RewriteCond %{HTTPS} off
RewriteRule ^(.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:46:02.883

这是一个示例，我需要为 IE8 重定向我的下载，因为它在使用 SSL 时存在错误。只需取出**RewriteCond %{HTTP_USER_AGENT} ^(. *)MSIE\ 8.(.* )$ [NC]**并在您的情况下用您的 php 文件替换**viewpdf 。**

```
RewriteEngine On
#Fix for IE8 SSL Bug downloading PDF
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_USER_AGENT} ^(.*)MSIE\ 8\.(.*)$ [NC]
RewriteCond %{REQUEST_URI} ^/(viewpdf.*)$ [NC]
RewriteRule ^/?(viewpdf.*)$ http://%{HTTP_HOST}%{REQUEST_URI} [L,NC]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} !^/(viewpdf.*)$ [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [L] 
```

# sql - 如何在更新查询中编写案例

> ID：14747377
> 
> 赞同：0
> 
> 时间：2013-02-07T09:12:33.357
> 
> 标签：sql, sql-server-2005

我正在尝试在更新查询中使用案例，但它给了我错误

> 找不到存储过程 'update dbo.ARInvoiceItems set Hideshowflag = '当 Hideshowflag 为空时的情况，然后 Hideshowflag='N' e'。

在 sql server 2005.following 中是我使用的查询。

```
update dbo.ARInvoiceItems 
    set Hideshowflag =(
        case 
            when Hideshowflag is null then Hideshowflag='N'
            when Hideshowflag='N' then 'Y'
            when Hideshowflag='Y' then 'N' end`
where SOId=@SOID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:15:18.670

尝试这个。您还可以在as`Or`的逻辑语句中使用`CASE``Hideshowflag is null or Hideshowflag='Y'`

```
Update dbo.ARInvoiceItems 
    Set Hideshowflag =
        Case 
            When Hideshowflag is null or Hideshowflag='Y' Then  'N'
            When Hideshowflag='N' Then 'Y'
        End
Where SOId = @SOID 
```

*或者*它可以用 a 来完成，使用or作为`Simple Case`相同的逻辑；`Isnull``Coalesce`

```
Update dbo.ARInvoiceItems 
    Set Hideshowflag =
        Case Isnull(Hideshowflag,'Y')
            When 'Y' Then  'N'
            When 'N' Then  'Y'
        End
Where SOId = @SOID 
```

> 找不到存储过程 'update dbo.ARInvoiceItems set Hideshowflag = '当 Hideshowflag 为空时的情况，然后 Hideshowflag='N' e'。

我认为您正在尝试将更新查询作为存储过程运行。您需要的是，使用上述查询[创建一个存储过程](http://msdn.microsoft.com/en-us/library/ms190669%28v=sql.105%29.aspx)（如果您还没有这样做），然后使用它的名称执行该存储过程；

```
EXEC 'Your_procedure_name_should_go_here' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:15:00.747

您发布的代码中有语法错误

```
UPDATE dbo.ARInvoiceItems
SET    Hideshowflag =  CASE
                          WHEN Hideshowflag IS NULL THEN  'N'
                          WHEN Hideshowflag = 'N' THEN 'Y'
                          WHEN Hideshowflag = 'Y' THEN 'N'
                        END 
WHERE  SOId = @SOID 
```

但是你说你得到的错误信息

> 找不到存储过程 'update dbo.ARInvoiceItems set Hideshowflag = ...

如果你这样做，通常会`EXEC @Foo`发生`EXEC (@Foo)`

此语句是否在您正在使用的字符串变量中`EXEC`？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T09:19:36.027

这就是你想要的

```
 DECLARE @TEMP table
    (
        jobid int IDENTITY (1,1),
        statusCode int
    )

    INSERT INTO @TEMP
    SELECT 15 UNION 
    SELECT 114 UNION 
    SELECT 14 UNION 
    SELECT 152 UNION 
    SELECT 41 

    SELECT * FROM @TEMP

    DECLARE @jobid int  = 3, @statusCode int = 40

    UPDATE @TEMP
    SET statusCode = (CASE WHEN @statusCode = 40 THEN 15 ELSE 14 END)
    WHERE jobid = @jobid

    SELECT * FROM @TEMP 
```

# ios - y轴的iOS CorePlot数字格式

> ID：14747383
> 
> 赞同：0
> 
> 时间：2013-02-07T09:12:49.380
> 
> 标签：ios, objective-c, core-plot, nsnumberformatter

我正在使用 Core Plot 1.1 在 iOS6 中绘制一个简单的散点图。我正在使用以下代码正确格式化我的 y 轴，然后动态缩放到绘图数据。

```
CPTXYAxis *y = axisSet.yAxis;
y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
y.minorTicksPerInterval       = 3;
y.preferredNumberOfMajorTicks = 6;
y.majorGridLineStyle          = majorGridLineStyle;
y.minorGridLineStyle          = minorGridLineStyle;

...

NSNumberFormatter * yformatter =  [[NSNumberFormatter alloc] init];
[yformatter setUsesSignificantDigits:YES];
[yformatter setMaximumSignificantDigits:4];
[yformatter setMaximumFractionDigits:1];
[yformatter setRoundingMode:NSNumberFormatterRoundCeiling];
y.labelFormatter = yformatter; 
```

然后我根据要使用 maxPlotValue 绘制的数据动态更改范围，但将其绑定到最小值。

```
plotSpace.xRange = [CPTPlotRange
                    plotRangeWithLocation:CPTDecimalFromFloat(0)
                    length:CPTDecimalFromFloat(5)];
plotSpace.yRange = [CPTPlotRange
                    plotRangeWithLocation:CPTDecimalFromFloat(0)
                    length:CPTDecimalFromFloat(maxPlotValue)]; 
```

这在大多数情况下都很好用，但有时我会收到一个奇怪的格式错误，如下图 1 所示，其中显示的是 0.6001 而不是 0.6。如果我手动将最小范围更改为 2，错误就会消失。

我使用 4 位有效数字的原因是我可以有高达 8000 的数字，然后它们不带小数显示。如果我将 setMaximumSignificantDigits 更改为 3，我会得到 0.601，我猜这表明问题出在 CPTAxisLabelingPolicyAutomatic 上。

对此的任何帮助将不胜感激。

图 1，格式错误： [https ://dl.dropbox.com/u/8083213/fig_1.png](https://dl.dropbox.com/u/8083213/fig_1.png)

图 2，格式没有错误： [https ://dl.dropbox.com/u/8083213/fig_2.png](https://dl.dropbox.com/u/8083213/fig_2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:03:32.990

这听起来像是标签计算中的舍入误差。请在 Core Plot[问题跟踪器](http://code.google.com/p/core-plot/issues/list)上报告。

# class - 如何在 UITableViewCell 类中添加一些属性？

> ID：14747385
> 
> 赞同：1
> 
> 时间：2013-02-07T09:12:57.303
> 
> 标签：class, properties

我正在使用 UITableViewController 和 UINavigationController。我想保存一些关于 tableViewCell 的信息。

UITableViewCell_extensionOf.h 文件

```
#import <UIKit/UIKit.h> 
```

@interface UITableViewCell ()

@property（强，非原子）NSDate *onDate;

@结尾

MasterViewController.m 文件

#import "UITableViewCell_extensionOf.h"

……

-（无效）viewDidLoad {

..... UITableViewCell *cell = [[UITableViewCell alloc] init];

**cell.onDate = [NSDate 日期];** //碰撞

}

错误日志：-[UIAccessibilityBundle setOnDate:]：无法识别的选择器发送到实例 0x7381b90

如何在 UITableViewCell 中添加一些额外的属性？我的最后一张卡是子类，这是获得这项工作的唯一方法吗？（其实我还没试过子类）

# html - divs布局类似于网格

> ID：14747388
> 
> 赞同：0
> 
> 时间：2013-02-07T09:13:03.927
> 
> 标签：html, css

所以我有 html 布局作为这个：

```
<h1>Title</h1>
<div class="info">Extra info</div>
<img src="image.jpg" />
<div class="summary">Short summary</div> 
```

如何显示为：

```
<img src="image.jpg" /> <h1>Title</h1>
                        <div class="info">Extra info</div>
                        <div class="summary">Short summary</div> 
```

我尝试使用浮点数，但它显示为：

```
 <h1>Title</h1>
<img src="image.jpg" /> <div class="info">Extra info</div>
                        <div class="summary">Short summary</div> 
```

我尝试了位置（相对和绝对），我得到了我想要的，不幸的是它在 IE 中效果不佳，如果简短的摘要文本很短，那么图像会隐藏在其他元素后面。我不知道图片高度（动态高度），所以 height: xxx px; 不适合这里。

任何帮助都会很棒。

**编辑：** 在这种情况下，我不能 div 包装所有（右侧）元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:15:47.600

```
<img src="image.jpg" class="left-image" />
<div class="right-col">
    <h1>Title</h1>
    <div class="info">Extra info</div>
    <div class="summary">Short summary</div>
</div> 
```

CSS

```
.left-image {
    float: left;
}
.right-col {
    margin-left: <width-of-image> px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:19:37.227

要在不向代码添加额外 div 的情况下完成它，请添加以下 CSS

```
img{float:left}
div{display:table-row} 
```

**[演示 2](http://jsfiddle.net/EJ4Zq/3/)**

* * *

采用`position:absolute`

```
<h1>Title</h1>
  <div class="info">Extra info</div>
 <img src="image.jpg" width="40" />
   <div class="summary">Short summary</div> 
```

**CSS**

```
img{float:left; top:0; position:absolute; left:0}
div, h1{display:block; margin-left:40px /*Add image width value as margin-left*/ } 
```

**[演示 3](http://jsfiddle.net/EJ4Zq/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:25:33.720

这个怎么样：http: [//jsfiddle.net/xpq2m/](http://jsfiddle.net/xpq2m/)

CSS

```
body {
    padding-left: 100px;
}
img#s { 
    position: absolute;
    top: 0;
    left: 0;
} 
```

# wordpress - 通过 wordpress 文件夹到根文件夹

> ID：14747390
> 
> 赞同：1
> 
> 时间：2013-02-07T09:13:14.153
> 
> 标签：wordpress, .htaccess

我在网站上安装了 wordpress。它被放置在 ~/wp 中。

我昨天把它移到了根文件夹~/. 但是，许多主题参考和图像仍然指向 ~/wp。

我不想找到所有这些地方（可能有数百个），而是想通过 ~/wp 到根文件夹。这意味着，当用户访问[http://www.site.com/wp/thing.php](http://www.site.com/wp/thing.php)时，他实际上会在 ~/thing.php 中，而不会更改 url。

.htaccess 更改可以实现这一点吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:39:47.670

这是一个配置设置 - 在设置 -> 常规中，您有两个选项，WordPress 地址 (URL) 和站点地址 (URL)。

前者指向安装了 Wordpress 的目录，后者指向站点的根目录。

这是有关它的 Codex 信息；

[http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install)

顺便说一句，修改所有文件路径当然是另一种选择 - 您将使用与将 Wordpress 站点从 localhost 传输到 live 或从开发服务器传输到 live 时使用的相同技术。您可以在此线程中查看我的答案的第二部分；

[如何将 wordpress 从 mamp 推送到 hostgator](https://stackoverflow.com/questions/12069548/how-to-push-wordpress-from-mamp-into-hostgator/12070827#12070827)

在移动 WP 站点时，interconnectit 脚本可以节省大量时间。

# go - html/template 中 ParseFiles 函数的不同行为

> ID：14747391
> 
> 赞同：3
> 
> 时间：2013-02-07T09:13:17.727
> 
> 标签：go, go-templates

我不明白为什么 的行为`func (t *Template) Parsefiles(...`不同于`func ParseFiles(...`. 这两个函数都来自“html/template”包。

```
package example

import (
    "html/template"
    "io/ioutil"
    "testing"
)

func MakeTemplate1(path string) *template.Template {
    return template.Must(template.ParseFiles(path))
}

func MakeTemplate2(path string) *template.Template {
    return template.Must(template.New("test").ParseFiles(path))
}

func TestExecute1(t *testing.T) {
    tmpl := MakeTemplate1("template.html")

    err := tmpl.Execute(ioutil.Discard, "content")
    if err != nil {
        t.Error(err)
    }
}

func TestExecute2(t *testing.T) {
    tmpl := MakeTemplate2("template.html")

    err := tmpl.Execute(ioutil.Discard, "content")
    if err != nil {
        t.Error(err)
    }
} 
```

这退出并出现错误：

```
--- FAIL: TestExecute2 (0.00 seconds)
    parse_test.go:34: html/template:test: "test" is an incomplete or empty template
FAIL
exit status 1 
```

请注意，`TestExecute1`通过很好，所以这不是问题`template.html`。

这里发生了什么？
我错过了`MakeTemplate2`什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:39:41.547

这是因为模板名称。`Template`对象可以容纳多个模板，每个模板都有一个名称。当使用`template.New("test")`, 然后执行它时，它会尝试执行一个`"test"`在该模板中调用的模板。但是，`tmpl.ParseFiles`将模板存储到文件名中。这解释了错误消息。

如何修复它：

a) 为模板提供正确的名称：使用

```
return template.Must(template.New("template.html").ParseFiles(path)) 
```

代替

```
return template.Must(template.New("test").ParseFiles(path)) 
```

b）指定要在`Template`对象中执行的模板：使用

```
err := tmpl.ExecuteTemplate(ioutil.Discard, "template.html", "content") 
```

代替

```
err := tmpl.Execute(ioutil.Discard, "content") 
```

[在http://golang.org/pkg/text/template/](http://golang.org/pkg/text/template/)中阅读更多相关信息

# matlab - 使用 MATLAB 提取关键帧

> ID：14747397
> 
> 赞同：0
> 
> 时间：2013-02-07T09:13:58.567
> 
> 标签：matlab, video, keyframe

我正在尝试在 MATLAB 中设置一个视频框架，我需要知道给定视频的关键帧。我尝试了 ffmpeg 并且能够提取关键帧。我知道我可以从 MATLAB 调用 ffmpeg 并继续我的生活。我想知道关键帧索引以及我对 MATLAB 解决方案的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:18:51.183

尝试使用[VideoReader 类](http://www.mathworks.se/help/matlab/ref/videoreaderclass.html)在 Matlab 中加载视频。

# javascript - 渐进式增强和“未隐藏内容的闪现”？

> ID：14747398
> 
> 赞同：1
> 
> 时间：2013-02-07T09:14:01.133
> 
> 标签：javascript, css, progressive-enhancement

我正在尝试构建一个适用于 JS 和非 JS 用户的逐步增强的页面。我想最初为 JS 用户隐藏一些表单控件，但总是为非 JS 用户显示它们。

我的问题是如何在不为 JS 用户创建分散注意力的“可见，然后立即隐藏”的内容闪存的情况下做到这一点。

例如，在 JS 版本中，我想折叠部分搜索表单，而是显示“单击此处获取额外选项”按钮。我这样做如下：

```
$(document).ready(function() { 
  $("#extra-options").hide();
  ...
  $("#show-extra-options").click(function() { 
     $("#extra-options").slideToggle();
  });
}); 
```

这可行，但这意味着对于 JS 用户，当页面加载时，额外的选项可见 500 毫秒左右，然后它们就消失了。它比较分散注意力。

有什么明智的方法可以解决这个问题吗？

StackOverflow[刚刚提出了这个答案](https://stackoverflow.com/questions/9995791/how-to-hide-an-element-to-be-toggled-with-jquery-while-maintaining-progressive-e)：这明智吗？抱歉，如果现在这是一个重复的问题，但我认为用我自己的语言写这个问题仍然值得，因为我在搜索过程中没有找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:25:39.873

将此添加到头部的脚本标记中：

```
$('html').addClass('js'); 
```

然后你可以用它来显示和隐藏元素：

```
.hasJs { display: none; }
.js .hasJs { display: block; }
.js .noJs { display: none; } 
```

您可以为使用或不使用 Javascript 的用户隐藏内容：

```
<div class="hasJs">Some content only visible for JS users.</div>
<div class="noJs">Some content only visible for non-JS users.</div> 
```

由于 class 和 CSS 在 head 中，因此在解析 body 时，元素在它们存在时就已经被样式化了。

演示：http: [//jsfiddle.net/Guffa/YuAyr/](http://jsfiddle.net/Guffa/YuAyr/)

这与您链接到的问题的第一个答案中的方法类似，但这更简洁，因为您不必向`html`标记中的元素添加类，代码只是添加类删除它。

# jquery - 全选复选框只能工作两次

> ID：14747408
> 
> 赞同：4
> 
> 时间：2013-02-07T09:14:40.810
> 
> 标签：jquery, checkbox

我从 stackoverflow 得到这段代码，它看起来像一个很好的“全选”复选框解决方案，任何想法为什么它在第二次点击后失败？

[http://jsfiddle.net/R9zjk/2/](http://jsfiddle.net/R9zjk/2/)

```
<table>
    <tr>
        <td>
            <input type='checkbox' value='0' class=''>
        </td>
        <td>
            <input type='checkbox' value='0' class=''>
        </td>
        <td>
            <input type='checkbox' value='0' class=''>
        </td>
        <td width="100" align="right">
            select all <input type='checkbox' value='0' class='selectall2'>
        </td>
    </tr>
</table>

$(document).ready(function () {

    $(document).on("click", ".selectall2", function () {

        $(this).closest('tr').find('input[type=checkbox]').attr('checked', this.checked);

    });

}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T09:17:12.960

使用`.prop()`而不是`.attr()`上面的 jQuery 1.6

如果使用 jQuery 1.6，代码`if ( $(elem).attr("checked") )`将检索实际的 content*属性*，它不会随着复选框被选中和取消选中而改变。它仅用于存储选中属性的默认值或初始值。为了保持向后兼容性，`.attr()`jQuery 1.6.1+ 中的方法将为您检索和更新属性，因此不需要将布尔属性的代码更改为`.prop()`. 尽管如此，检索检查值的首选方法是使用上面列出的选项之一。要查看它在最新的 jQuery 中是如何工作的，请选中/取消选中下面示例中的复选框。

看[`.prop()`](http://api.jquery.com/prop/)

**演示 - [http://jsfiddle.net/f9QYx/](http://jsfiddle.net/f9QYx/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:24:00.353

您的代码在 jQuery 1.9 上不起作用，因为您拥有的 jQuery 版本的框架，选择 1.8.3 并且它会起作用。

**[现场演示](http://jsfiddle.net/rajaadil/R9zjk/5/)**

```
$(document).ready(function () {
    $(document).on("click", ".selectall2", function () {
        $(this).closest('tr').find('input[type=checkbox]').attr('checked', this.checked);
    });
}); 
```

**[对于jQuery 1.6 及更高](http://api.jquery.com/attr/)版本，您应该使用 prop 而不是 attr**

**[现场演示](http://jsfiddle.net/rajaadil/R9zjk/7/)**

```
$(document).ready(function () {
    $(document).on("click", ".selectall2", function () {
        $(this).closest('tr').find('input[type=checkbox]').prop('checked', this.checked);
    });
}); 
```

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法，[jQuery doc](http://api.jquery.com/attr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:33:42.710

尝试使用`.attr('checked', 'checked')`

```
$(document).ready(function () {
    $(document).on("click", ".selectall2", function () {
        $(this).closest('tr').find('input[type=checkbox]').attr('checked', 'checked');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:56:58.657

解决了一些问题，请参见[此处的现场演示](http://jsfiddle.net/2rRbB/2/)

HTML代码是：

```
<table>
    <tr>
        <td>
            <input type='checkbox' value='0' class='abc'>
        </td>
        <td>
            <input type='checkbox' value='0' class='abc'>
        </td>
        <td>
            <input type='checkbox' value='0' class='abc'>
        </td>
        <td width="100" align="right">
            select all <input type='checkbox' value='0' class='selectall2'>
        </td>
    </tr>
</table> 
```

和Javascript是：

```
$(document).ready(function () {
    $(document).on("click", ".selectall2", function () {
        $(this).closest('tr').find('input[type=checkbox]').attr('checked', this.checked);
    });
    $(document).on("click",".abc",function(){
        var temp=0;
        if(!$(".abc").attr('checked'))
        {
            temp=1;
        }
        if(temp==0)
        {
                    $(".selectall2").attr('checked',true);
        }
        else
        {
                    $(".selectall2").attr('checked',false);
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-10T09:43:03.447

这将有效，简短且方便的代码

```
<script>
    $('#select_all').click(function () {
    $( this ).closest('table').find(':checkbox').prop( 'checked' , this.checked ? true : false );
})
</script> 
```

# c++ - const 指针成员和 operator=

> ID：14747409
> 
> 赞同：0
> 
> 时间：2013-02-07T09:14:41.540
> 
> 标签：c++

```
class Point {
public:
    Point(int x, int y) : { x = new int(x); y = new int(y) }
    ...
    ...
    Point& operator=(const Point& other) {
        if(this!=&other){
            delete x;
            delete y;
            x = new int(*other.x);
            y = new int(*other.y);
        }
        return *this;
    }
private:
    const int* x;
    const int* y;
} 
```

即使其中的 x 和 y 已经初始化，这个 operator= 的实现会起作用吗？删除 const 指针是否允许我们重新分配它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:15:48.370

那不是`const`指针，而是指向`const`. 所以你可以修改指针，你不能修改它指向的那个。

一个`const`指针是

```
int* const x; 
```

然后您的代码将无法编译。

# bison - Flex 2.5.35 yy_scan_buffer 未初始化行号和列号

> ID：14747410
> 
> 赞同：4
> 
> 时间：2013-02-07T09:14:42.827
> 
> 标签：bison, flex-lexer

我正在使用 flex 2.5.35 和 bison 2.7（尽管我相信这是一个 flex 问题，所以我省略了 parser.y）

我的 Flex 语法很简单：

词法分析器

```
%{
#define YY_NO_INPUT
#include "parser.h"

#define YY_USER_ACTION yylloc->first_line = yylloc->last_line = yylineno; \
    yylloc->first_column = yycolumn; yylloc->last_column = yycolumn + (int)yyleng - 1; \
    yycolumn += (int)yyleng;

%}

%option yylineno
%option outfile="lexer.c" header-file="lexer.h"
%option warn
%option reentrant noyywrap never-interactive nounistd
%option nounput
%option bison-bridge
%option bison-locations

%%

[ \n\r\t]*               { /* Skip blanks. */ }
[A-Za-z0-9_\-@]+       { yylval->value = strdup(yytext); return TOKEN_VAR; }
"&&"                   { return TOKEN_AND; }
"||"                   { return TOKEN_OR; }
"!"                    { return TOKEN_NOT; }
"("                    { return TOKEN_LPAREN; }
")"                    { return TOKEN_RPAREN; }

%% 
```

扫描字符串时，行号和列号的值是未初始化的垃圾。我跟踪代码并将以下行添加到生成的 lexer.c 中的 yy_scan_buffer 中：

```
b->yy_bs_lineno = 1;
b->yy_bs_column = 1; 
```

现在这些值符合预期。

这是一个错误吗？`yy_create_buffer`正确初始化这些字段，但`yy_scan_buffer`没有。

`%option yylineno`解析字符串时不能使用吗？

有解决办法，还是我真的需要修改生成的 lexer.c？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-30T20:15:32.740

是的，我可以确认，这是野牛的问题。它发生在我身上，我已经通过在我的“编译器函数”中初始化它们来修复它

```
void myParseFunction(const char* code, ...){
    yyscan_t myscanner;
    yylex_init(&myscanner);
    struct yyguts_t * yyg = (struct yyguts_t*)myscanner;

    yy_delete_buffer(YY_CURRENT_BUFFER,myscanner);
    yy_scan_string(code, myscanner);

    // [HACK] Those are not properly initialized for non file parsers
    // and becuase of that we get garbage in yyerror...
    yylineno = 1;
    yycolumn = 0;

    bool nasi = yyparse(myscanner, <your_args>);
        yylex_destroy(myscanner);
        return nasi;
} 
```

请注意，yyl​​ineno 和 yycolumn 与可重入解析器一起工作得很好，因为它们被定义为引用“yyg”的 marcos。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T14:15:25.117

[您从oreilly book](http://oreilly.com/linux/excerpts/9780596155971/error-reporting-recovery.html)的“Adding Locations to the Lexer”部分复制了您的 YY_USER_ACTION 代码

我相信您忘记`int yycolumn = 1;`在定义 YY_USER_ACTION 之前添加，因为它是在链接中的代码示例中完成的。

# openrefine - 在 OpenRefine 正则表达式中使用组

> ID：14747411
> 
> 赞同：0
> 
> 时间：2013-02-07T09:14:46.137
> 
> 标签：openrefine

我想知道是否可以[在 Open Refine](http://code.google.com/p/google-refine/wiki/UnderstandingRegularExpressions) GREL 语法中使用的 ReGeX 中使用“组”。我的意思是，我想用相同的字符和点替换后面和前面的所有点，但后面是空格，然后是字符。

就像是：

```
s.replace(/(.{1})\..({1})/,/(1).\s(2)/) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:29:31.987

它应该，但你的最后一个参数需要是一个字符串，而不是一个正则表达式。在内部 Refine 使用 Java 的[Matcher#replaceAll](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)方法，该方法接受字符串参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:21:08.383

我想我发现了如何处理这个问题。您需要将 $X 放入您的字符串值中以寻址第 X 个捕获组。

它应该是这样的：

> s.replace(/. *?(#capcure group 1).* ?(#capcure group 2).*?/), "some text $1 some text $2 some text")

# gwt - 在 SuperDev 模式下运行 GWT 2.5 时看不到 java 代码

> ID：14747418
> 
> 赞同：0
> 
> 时间：2013-02-07T09:15:08.907
> 
> 标签：gwt, gwt-maven-plugin

我有一个遵循[Thomas Broyer 的 maven archetypes](https://github.com/tbroyer)的 GWT 2.5 应用程序。我遵循了[SO 问题](https://stackoverflow.com/questions/11356714/getting-started-with-the-superdevmode/13278009#13278009)中解释的指导方针，一切似乎都很好。

代码服务器运行正常。我浏览我的应用程序，然后从复制到工具栏的书签开始开发模式。启动开发模式后，我可以看到带有编译按钮的对话框。单击按钮后，我可以看到编译器在 Eclipse 控制台中工作。但是，当我尝试在 Chrome 浏览器上查看 java 代码时，我只能看到 javascript 代码。

我不知道它是否相关，但我正在使用 gwt-maven-plugin 的[gwt:run-codeserver](http://mojo.codehaus.org/gwt-maven-plugin/run-codeserver-mojo.html)目标从 maven 启动代码服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:36:56.413

这是一个[已知问题](https://code.google.com/p/google-web-toolkit/issues/detail?id=7725)：Chrome 改变了它处理 Source Maps 的方式，这导致与 GWT 生成它们的方式不兼容。

这已在刚刚发布到 Central 的 2.5.1-rc1 中得到修复（几天前，尚未正式宣布）。请参阅[http://mojo.codehaus.org/gwt-maven-plugin/user-guide/using-different-gwt-sdk-version.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/using-different-gwt-sdk-version.html)以将其用于您的构建。我将发布一个新版本的 gwt-maven-plugin “链接”到这个版本，然后更新原型。

# lisp - 从列表中创建对的列表

> ID：14747421
> 
> 赞同：1
> 
> 时间：2013-02-07T09:15:16.127
> 
> 标签：lisp, common-lisp

我是 Lisp 新手，不知道如何写这个......

```
You give: ("Test" "TEST" "third" "the last")
You get:  (("A" . "Test") ("B" . "TEST") ("C" . "third") ("D" . "the last"))
Function: (defun choices (&rest choices)) 
```

在 C 中，我可以`for`为此编写一个，但 Lisp 不能 +1 字符串和循环也没有计数器......有人可以给我一个示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:26:59.893

我会写这样的东西：

```
(defun  choices (&rest choices)
  (loop for i from 1 to 26
        and item in choices
        collect (cons (string (digit-char (+ 9 i) 36))
                      item))) 
```

上面的代码对超过 26 个选项没有错误检查（如果不是错误，您没有指定如何处理它们）。

您可以使用[`CHAR-CODE`](http://www.lispworks.com/reference/HyperSpec/Body/f_char_c.htm)and[`CODE-CHAR`](http://www.lispworks.com/reference/HyperSpec/Body/f_code_c.htm)来“增加一个字符”，但它们提供的编码不是标准化的（仅保证它的某些属性）。在[`DIGIT-CHAR`](http://www.lispworks.com/reference/HyperSpec/Body/f_digit_.htm)基数 36 中，我们保证获得权重 10 到 35 的英文字母（大写）。

当然，[`LOOP`](http://www.lispworks.com/reference/HyperSpec/Body/m_loop.htm)还有很多东西，包括你想要的任何计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:34:21.797

您可以通过简单地执行 mapcar+cons 以您描述的方式连接两个列表：

```
(mapcar #'cons '("A" "B" "C" "D") '("Test" "TEST" "third" "the last"))
; => (("A" . "Test") ("B" . "TEST") ("C" . "third") ("D" . "the last")) 
```

由于给出了第二个列表，现在问题仅在于生成 ABCD 列表。这可以通过循环和代码字符来实现：

```
(loop for i from 65 to 68 collect (string (code-char i)))
; => ("A" "B" "C" "D") 
```

将这两者结合成一个答案并针对您的特定问题进行定制现在应该很容易。

# c# - 带有 C# 的 64 位解决方案 ASP.NET 和一个 C++ 中的 32 位项目

> ID：14747426
> 
> 赞同：2
> 
> 时间：2013-02-07T09:15:32.610
> 
> 标签：c#, c++, asp.net, 64-bit, 32-bit

我正在尝试使用 IIS (Windows Server 2012 x64) 项目，该项目有一个 ASP.NET Web 应用程序 x64，其中一个项目是 C++ 的 32 位和 64 位。我试图替换 C++ 项目 DLL 的 32 位和 64 位。我也尝试了很多配置：在 Visual Studio 中打开和关闭“首选 32 位”，将 AnyCPU（适用于所有项目）更改为 64 位，在 IIS 中打开和关闭“启用 32 位应用程序”。问题是 IIS 看不到 C++ 项目 DLL（应该可以看到，它在同一个文件夹中）或者由于格式不正确而无法加载。我想在最终的 32 位 C++ 项目中以 64 位运行整个解决方案，因此将所有内容更改为 32 位将不是正确的解决方案。有没有办法把所有东西都放在 IIS 上来运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:02:22.157

您必须将平台对齐到相同的[*位数*](http://en.wiktionary.org/wiki/bitness)。也就是说，您要么：

1.  将 Web 应用程序和 C++ 引用项目编译为 32 位，并将IIS 应用程序池的*启用 32 位应用程序*设置为。`True`
2.  将 Web 应用程序和 C++ 引用的项目编译为 64 位，并将IIS 应用程序池的*启用 32 位应用程序*设置为。`False`

如果 C++ 项目对没有 64 位版本的 32 位 DLL 有其他依赖关系，那将是一个问题。在这种情况下，您别无选择，只能将所有内容与 32 位对齐。

# android - 创建日志是否会以任何方式影响系统内存？

> ID：14747427
> 
> 赞同：3
> 
> 时间：2013-02-07T09:15:32.733
> 
> 标签：android, android-logcat

我们通常会放置日志来检查某些代码块是否执行。但我们通常不会在发布应用程序之前将其删除。我不知道其他但我喜欢该功能并在我的应用程序中流畅地使用它。谁能告诉我对系统内存的影响编写任何 Log.x() （其中 X=v,e,w,i,d）形式。有人帮我理清一些概念吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:20:58.090

肯定会对内存使用、APK 文件大小和性能产生很大影响。

此外，您必须在发布应用程序之前删除所有日志。

当然，一旦您删除所有日志并发布它，重写它们会很痛苦。

因此使用[Proguard](http://proguard.sourceforge.net/) 从字节码中删除所有日志，但不影响源代码。

除了删除日志之外，Proguard 通过混淆代码、删除未使用的方法、变量等来帮助提高性能。这一切都取决于你如何配置它。

[在 Eclipse for Android 中启用 ProGuard](https://stackoverflow.com/questions/4732656/enabling-proguard-in-eclipse-for-android)

[如何避免对 APK 文件进行逆向工程？](https://stackoverflow.com/questions/13854425/how-to-avoid-reverse-engineering-of-apk-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:23:42.053

日志保存在内存中。从而消耗内存空间。我们应该在发布之前删除调试日志，只有错误日志应该在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:30:03.580

是 肯定的。为了使日志高效，请始终尝试使用布尔标志，例如：

```
boolean debug = true or false; 
```

以及在哪里使用 log.d("ClassName","message"); 把它写成

```
if(debug) log.d("ClassName","message"); 
```

因此您可以使用单个布尔标志管理日志记录（日志）。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:26:40.443

这取决于您使用多少日志。当然它会影响应用程序。所以在发布应用程序之前，使用它。

android:debuggable="假"

# ruby-on-rails - Carrierwave 生产失败：无法将 nil 转换为字符串

> ID：14747429
> 
> 赞同：0
> 
> 时间：2013-02-07T09:15:39.043
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在使用 Fog 并上传到 S3。上传在开发中工作正常，但在生产中，它给了我这个错误：

```
TypeError (can't convert nil into String):
  app/controllers/pictures_controller.rb:29:in `create' 
```

（该行是保存图片的位置）。这是堆栈跟踪的结尾。

当我进入控制台并执行以下操作时：

```
p = Picture.new(image: "~/rails_apps/my_app/current/app/assets/images/rails.png") 
```

它在生产中为我提供了以下信息：

```
CarrierWave::FormNotMultipart: CarrierWave::FormNotMultipart 
```

...但对发展没有任何抗议。也许这是一个线索。

任何想法为什么上传在生产中不起作用？

这是我的 carrierwave.rb 初始化程序：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                                         # required
    :aws_access_key_id      => ENV['AWS_ACCESS_KEY_ID'],                        # required
    :aws_secret_access_key  => ENV['AWS_SECRET_ACCESS_KEY']#,    # required
  }
  if Rails.env.production?
    config.fog_directory  = 'mydir'                     # required
  else
    config.fog_directory  = 'mydir-development'                     # required
  end
  config.fog_public     = true                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:27:37.627

我遇到了类似的问题，原来我的carrierwave 和fog gem 已经过时了（在我升级到Rails 4 之前它们工作得很好）。也许你可以试一试。

```
gem 'carrierwave', '0.9.0'
gem 'fog', '~> 1.3.1' 
```

# asp.net-mvc-3 - 带有日期限制的jQuery中的日期选择器

> ID：14747437
> 
> 赞同：0
> 
> 时间：2013-02-07T09:15:54.403
> 
> 标签：asp.net-mvc-3, jquery-ui

我有一个在加载页面时初始化的函数

```
function initializeDateTimePickerWithDateRestriction(minimumDate, maximumDate) {
if (minimumDate == null) {
    minimumDate = "1/1/1991";
}

if (maximumDate == null) {
    maximumDate = "12/31/2099";
}
alert(minimumDate);
alert(maximumDate);
$('.DatePickerWithTime').datetimepicker({
    ampm: true,
    timeFormat: 'h:mm TT',
    stepMinute: 15,
    minDate: minimumDate,
    maxDate: maximumDate
});

$('.DatePickerWithTime').val('');
} 
```

在文档准备好的部分我称之为

```
initializeDateTimePickerWithDateRestriction(null, new Date()); 
```

但是在单击事件上，我再次想在不刷新页面的情况下为此文本框初始化一些新值。

我怎样才能做到这一点？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:16:07.717

```
$('.DatePickerWithTime').datetimepicker({
    ampm: true,
    timeFormat: 'h:mm TT',
    stepMinute: 15,
    minDate: minimumDate,
    maxDate: maximumDate,
    minDateTime: minimumDate,
    maxDateTime: maximumDate,
}); 
```

这是问题的解决方案。

# c++ - string::find_first_of 和 string::find_last_of 不对称

> ID：14747439
> 
> 赞同：3
> 
> 时间：2013-02-07T09:15:59.060
> 
> 标签：c++

使用 C++ 标准库中的成员函数 string::find_first_of，您可以在空子字符串中进行搜索：

```
 s.find_first_of(c, s.size()) 
```

或者

```
s.find_first_of(c, string::npos) 
```

但是您不能使用`string::find_last_of`;在空子字符串中搜索 下一次调用将搜索包含（仅）第一个字符的子字符串：

```
 s.find_last_of(c, 0) 
```

我认为这是 C++ 标准库的一个缺陷，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:22:30.920

我在这里看不到任何不对称。事实上恰恰相反，它看起来是完全对称的。只需将其`find_first_of`视为从某个起始位置*向右搜索，而从某个起始位置**向左*`find_last_of`搜索。

 *这个名字`find_last_of`有一种误导性：它暗示了一种自然的*前向*搜索，除了我们返回最后一次出现而不是第一次出现。然而，对于双向序列，人们可以忽略名称的“前向”性质，并将其视为*后向*搜索。向后搜索也返回第一次出现，它只是从起点*向左前进。*从这个角度来看，函数与 对称`find_first_of`。

**编辑：**阅读您的评论后，我终于明白了您的观点。因此，问题在于参数的当前语义*使得*`pos`无法为. 是的，这是有道理的。我同意，这确实可以看作是设计上的不一致。*`find_last_of``find_last_of`*

 *出于一致性目的，我实际上希望在价值`find_last_of`方面不具有包容性`pos`。`xpos`在这种情况下，返回的目标位置的规范`find_last_of`将是

> xpos < pos 和 xpos < size();

在这种情况下，`s.find_last_of(c, 0)`将搜索一个空前缀，而`s.find_last_of(c, s.size())`将搜索整个字符串。

但是标准说

> xpos <= pos 和 xpos < size();

我真的不知道他们为什么决定给`pos`参数赋予如此包容的意义。可能他们认为这样会更容易理解。**

# oracle - Oracle - where 子句中的日期减法

> ID：14747440
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:01.377
> 
> 标签：oracle, date, date-arithmetic, operation

我试图弄清楚如何比较 where 子句中日期减法的结果。

客户订阅了一项服务，因此链接到具有结束日期的订阅。我想显示将在未来 2 周内结束的订阅列表。我没有设计数据库，但注意到 End_Date 列类型是 varchar 而不是日期。我无法更改。

我的问题如下：如果我尝试使用此请求选择减法的结果：

```
SELECT(TO_DATE(s.end_date,'YYYY-MM-DD') - TRUNC(SYSDATE)) , s.name  
from SUBSCRIPTION s WHERE s.id_acces = 15 
```

这将起作用，并给我订阅结束和当前日期之间的天数。

但是现在，如果我尝试在比较的子句中包含完全相同的请求：

```
SELECT s.name 
from SUBSCRIPTION S 
WHERE (TO_DATE(s.end_date,'YYYY-MM-DD') - TRUNC(SYSDATE))  between 0 and 16 
```

我会收到一个错误：“ORA-01839：指定月份的日期无效”。任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:18:46.783

在表格中的某处，您的日期格式与`YYYY-MM-DD`. 在您的第一个查询中，您检查了某一行（或一组行`s.id_acces = 15`），这可能没问题，但在第二个查询中，您扫描了所有表。

尝试用类似的东西找到这些行，

```
select end_date from subscription 
 where not regexp_like(end_date, '[0-9]{4}-[0-9]{2}-[0-9]{2}') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:23:55.100

检查您的 DD 值（即：一个月中的某天）。此值必须介于 1 和该月的天数之间。

```
January - 1 to 31
February - 1 to 28 (1 to 29, if a leap year)
March - 1 to 31
April - 1 to 30
May - 1 to 31
June - 1 to 30
July - 1 to 31
August - 1 to 31
September - 1 to 30
October - 1 to 31
November - 1 to 30
December - 1 to 31 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:24:08.307

> “ End_Date 列类型是 varchar 而不是日期。我无法更改它。”

如果您无法更改日期，则必须更改数据。您可以使用此函数识别流氓值：

```
create or replace check_date_format (p_str in varchar2) return varchar2
is
   d date;
begin
   d := to_date(p_str,'YYYY-MM-DD');
   return 'VALID';
exception
   when others then
     return 'INVALID';
end; 
```

您可以在查询中使用此函数：

```
select sid, end_date
from SUBSCRIPTION 
where check_date_format(end_date) != 'VALID'; 
```

您的选择是：

1.  修复数据，使所有日期都采用相同的格式
2.  修复数据并应用检查约束来强制执行未来的有效性
3.  编写一个定制的 MY_TO_DATE() 函数，该函数接受一个字符串并对其应用许多不同的日期格式掩码，以期获得成功的转换。

# python - 比较 Python 中不同数量的列表

> ID：14747448
> 
> 赞同：1
> 
> 时间：2013-02-07T09:16:23.107
> 
> 标签：python, list, compare

我正在编写一个我将经常使用的脚本，其中包含不同大小的数据集，并且我必须进行一些我无法直接在 Python 中进行的比较。

将有多个列表（大约 20 个或更多，但出于测试目的，我将它们减少到三个），所有列表都以特定顺序具有相同数量的整数项。我想比较每个列表中相同位置的项目以找出差异。对于定义数量的列表，这很容易：

```
a = [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
b = [0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 4, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
c = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

for x,y,z in zip(a,b,c):
    if x != y != z:
        print x, y, z 
```

*我已经尝试将该循环包装在一个函数中，因此参数的数量可能会有所不同，但我被卡住了。*

```
def compare(*args):
    for x in zip(args):
        ??? 
```

在最终脚本中，我不会有多个单个列表，而是一个列表中的所有列表。那会有帮助吗？如果我遍历列表列表，我不会一次得到每个列表......

**忘记 function**吧，它无论如何都不是很有用，因为它将成为更大脚本的一部分，并且定义不同的参数太困难了。我现在一次比较两个列表，保存相同的列表。这样，我以后可以轻松地从我的整个列表中删除所有这些，只保留唯一的。

```
l_o_l = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 4, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

for i in range(0, (len(l_o_l)-1)):
    for j in range((i+1), len(l_o_l)):
        if l_o_l[i] == l_o_l[j]:
            duplicates.append(key_list[i])
            duplicates.append(key_list[j])
dup = list(set(duplicates))
uniques = [x for x in key_list if x not in dup] 
```

其中 key_list 包含字典中我的列表的标识符。

有什么改进的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:18:15.227

也许是这样的

```
def compare(*args):
    for things in zip(*args):
        yield all(x == things[0] for x in things) 
```

然后你可以像这样使用它

```
a = range(10)
b = range(10)
c = range(10)
d = range(11, 20)

for match in compare(a,b,c):
    print match

for match in compare(a,b,c,d):
    print match 
```

这是一个使用您的示例的演示（它是一个生成器，因此您必须对其进行迭代或使用它耗尽它`list`）

```
a = [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
b = [0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 4, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]
c = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

print list(compare(a,b,c)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:21:12.790

```
def compare(*args):
    for x in zip(args):
        values_list = list(x[0]) # x[0] because x is a tuple
        different_values = set(values_list) # a set does not contain identical values
        if len(different_values) != 1: # if you have more than 1 value you have different values in your list
            print 'different values', values_list 
```

给你

```
a = [0, 0, 1]
b = [0, 1, 1]
c = [1, 1, 1]
compare(a, b, c)
>>> different values [0, 0, 1]
>>> different values [0, 1, 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:19:25.400

假设列表与示例中的列表相似，我将使用：

```
def compare(*args):
    for x in zip(args):
        if min(x) != max(x):
             print x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:12:31.183

```
def compare(elements):
    return len(set(elements)) == bool(elements) 
```

如果您想知道所有列表是否相同，您可以简单地执行以下操作：

```
all(compare(elements) for elements in zip(the_lists)) 
```

另一种方法是将`list`s 转换为`tuple`s 并`set`在那里使用：

```
len(set(tuple(the_list) for the_list in the_lists) == bool(the_lists) 
```

如果您只是想删除重复项，这应该更快：

```
the_lists = [list(elem) for elem in set(tuple(the_list) for the_list in the_lists)] 
```

示例用法：

```
>>> a = range(100)
>>> b = range(100, 200)
>>> c = range(200, 300)
>>> d = a[:]
>>> e = b[:]
>>> the_lists = [a,b,c,d,e]
>>> the_lists2 = [list(elem) for elem in set(tuple(the_list) for the_list in the_lists)]
>>> [a,b,c] == sorted(the_lists2)  #order is not maintained by set
True 
```

它似乎非常快：

```
>>> timeit.timeit('[list(elem) for elem in set(tuple(the_list) for the_list in the_lists)]', 'from __main__ import the_lists', number=1000000)
7.949447154998779 
```

执行 100 万次不到 8 秒。（哪里`the_lists`和以前用的一样。）

**编辑：** 如果您只想删除重复`list`的，那么我能想到的最简单的算法是对列表列表进行排序并使用`itertools.groupby`：

```
>>> a = range(100)
>>> b = range(100,200)
>>> c = range(200,300)
>>> d = a[:]
>>> e = b[:]
>>> the_lists = [a,b,c,d,e]
>>> the_lists.sort()
>>> import itertools as it
>>> for key, group in it.groupby(the_lists):
...     if len(list(group)) == 1:
...             print key
... 
[200, 201, 202, ..., 297, 298, 299] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T10:22:25.867

我认为尝试使用 *args 和 zip 变得聪明只会使问题变得混乱。我会这样写：

```
def compare(list_of_lists):
    # assuming not an empty data set
    inner_len = len(list_of_lists[0])
    for index in range(inner_len):
        expected = list_of_lists[0][index]
        for inner_list in list_of_lists:
            if inner_list[index] != expected:
                # report difference at this index 
```

# python - Excel与python的差异

> ID：14747452
> 
> 赞同：1
> 
> 时间：2013-02-07T09:16:30.587
> 
> 标签：python, excel, diff

我正在寻找一种算法来在 Python 中根据它们的列名来比较两个 excel 表。

我不知道这些列是什么，所以一张表可能有一个额外的列，或者两张表都可以有几个同名的列。

最简单的情况是第一个工作表中的一列仅对应第二个 Excel 工作表中的一列。然后我可以使用`xlrd`. 如果列名不是唯一的，我可以验证列是否具有相同的位置。

有谁知道已经存在的算法或在这个领域有任何经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:03:04.730

快速肮脏：

```
# Since order of the names doesn't matter, we can use the set() option
matching_names = set(sheet_one_names) & set(sheet_one_names)
...
# Here, order does matter since we're comparing rowdata..
# not just if they match at some point.
matching_rowdata = [i for i, j in zip(columndata_one, columndata_two) if i != j] 
```

注意：这假设你已经做了一些事情，

1.  通过获取表 1 的列名，`xlrd`并与第二张表相同，
2.  获取两个不同变量中两个工作表的行数据。

这是给你一个想法。

另请注意，执行 [...] 选项（第二个）很重要，行的长度相同，否则将被跳过。这是一个**MISS-MATCH**场景，反向获取数据流中的匹配项。

这是一个较慢但功能强大的解决方案：

```
column_a_name = ['Location', 'Building', 'Location']
column_a_data = [['Floor 1', 'Main', 'Sweden'],
                ['Floor 2', 'Main', 'Sweden'],
                ['Floor 3', 'Main', 'Sweden']]

column_b_name = ['Location', 'Building']
column_b_data = [['Sweden', 'Main', 'Floor 1'],
                ['Norway', 'Main', 'Floor 2'],
                ['Sweden', 'Main', 'Floor 3']]

matching_names = []
for pos in range(0, len(column_a_name)):
    try:
        if column_a_name[pos] == column_b_name[pos]:
            matching_names.append((column_a_name[pos], pos))
    except:
        pass # Index out of range, column length are not the same

mismatching_data = []
for row in range(0, len(column_a_data)):
    rowa = column_a_data[row]
    rowb = column_b_data[row]

    for name, _id in matching_names:
        if rowa[_id] != rowb[_id] and (rowa[_id] not in rowb or rowb[_id] not in rowa):
            mismatching_data.append((row, rowa[_id], rowb[_id]))

print mismatching_data 
```

# c# - 如果在编译时不知道所涉及的成员，我如何创建谓词表达式树？

> ID：14747454
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:34.043
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个需要为谓词编写的表达式：

```
.Where(e => SqlFunctions.StringConvert((double?) e.Number).Contains("6"))) 
```

但是，我要测试的成员（`.Number`在示例中）在编译时是未知的（它将是一个`string`参数）。

我试过了：

```
.Where(string.Format(
      "SqlFunctions.StringConvert((double?){0}).Contains(@0)", field), value); 
```

但这没有用。在这种情况下如何创建谓词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:49:02.040

如果成员名称（`Number`在此示例中）在编译时未知，则必须手动构建表达式树，例如：

```
static Expression<Func<T, bool>> BuildPredicate<T>(
    string fieldName, string containsValue)
{
    var arg = Expression.Parameter(typeof(T), "e");
    var str = Expression.Call(typeof(SqlFunctions), "StringConvert", null,
        Expression.PropertyOrField(arg, fieldName));
    var contains = Expression.Call(str, "Contains", null,
        Expression.Constant(containsValue, typeof(string)));
    return Expression.Lambda<Func<T, bool>>(contains, arg);
} 
```

用法：

```
var predicate = BuildPredicate<Foo>("Number", "6");
var filtered = data.Where(predicate); 
```

# svn - 如何将本地副本与 SVN 中的特定标签进行比较

> ID：14747455
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:37.093
> 
> 标签：svn, tortoisesvn

我正在使用tortise svn。我在 svn 'firstTag' 中有标签，我在本地站点中有一些文件已更改（删除/添加/修改）。现在我想比较一下本地副本和svn中标签的变化。这个怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:07:38.590

TortoiseSVN 在 WC 根目录的扩展上下文菜单 (Shift+RClick) - 最顶部的菜单条目“Diff with URL”。选择 repo 的所需部分并比较 TortoiseDiff 中更改的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:17:59.993

（至少）还有另一种方法可以做到这一点，这通常更容易：

1.  打开文件或文件夹的修订图 ( `context menu >> Revision Graph`)。
2.  选择您当前的版本（紫色圆点表示已选中）
3.  控制+选择您的比较版本（获得第二个紫点）。
4.  打开任一节点上的上下文菜单并选择`Compare revisions`。

如果您从文件开始，您的差异查看器将打开文件上的视觉差异；如果是文件夹，您将有一个文件列表，您可以在差异查看器中单独调用它们。

这种技术实际上比“Diff with URL”方法更灵活，因为您可以在第 2 步和第 3 步中选择任意两个节点。

![修订图中的上下文菜单](../Images/0103eed7b22de01405f82daa3afbf86e.png)

# php - curl 发布远程表单并在 var 中获取结果

> ID：14747456
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:16:43.447
> 
> 标签：php, curl

下面的代码是发布一个远程表单。

```
<?php
$post_data['mail'] = 'parcel';
$post_data['destination'] = '1';
$post_data['weight'] = '300';

foreach ( $post_data as $key => $value) 
{
    $post_items[] = $key . '=' . $value;
}
$post_string = implode ('&', $post_items);

$curl_connection = curl_init('http://app1.hongkongpost.com/calc/eng/overseas/step2.php');

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

$result = curl_exec($curl_connection);
//curl_close($curl_connection);
var_dump($reuslt);

print_r(curl_getinfo($curl_connection));

?> 
```

结果为 NULL，但如果我注释 curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);

页面返回会返回 [http://app1.hongkongpost.com/calc/eng/overseas/step2.php](http://app1.hongkongpost.com/calc/eng/overseas/step2.php) 并显示结果（表示发帖成功），但我只想获取该表，不返回结果页面。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:43:37.067

1.  不正确的变量名 $reuslt。替换：“var_dump($reuslt);” 到“var_dump($result);”
2.  添加 curl_setopt($curl_connection, CURLOPT_POST, 1);

# php - 使用 beforeShow 防止 JQuery Timepicker 显示

> ID：14747457
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:44.063
> 
> 标签：php, jquery, timepicker

我试图找出这个解决方案，但我还没有找到任何东西。timepicker 有 beforeShow 属性。我想要实现的是，在显示时间选择器之前，我想做一些验证。如果验证通过，则时间选择器会出现，但如果验证失败，则时间选择器不会弹出。我怎样才能做到这一点？我试着把

```
beforeShow: function(){return false}, 
```

但什么也没发生

编辑：

我遇到了一个解决方案，说删除该字段并替换为新字段。Tt 有效，时间选择器不再出现。但是，如果验证通过，则必须可以再次使用该字段。现在我不能。似乎文本字段没有被正确的替换。因为当我提醒 parentNode 时，它​​正在获取`<td>`节点，而不是`<form>`节点。我把那个表格放在桌子上。我的 JS 代码：

```
$('input[id^=timepicker]').timepicker({beforeShow: function(instant){

        if(!validation){ //validation fail
            var element = document.getElementById(instant.id);
            var clonedElement = element.cloneNode(true);
            var parentElement = element.parentNode;
            parentElement.replaceChild(clonedElement, element);
        else{
            $("#"+instant.id).timepicker();
        }
    }

}); 
```

我的 HTML 就像

```
<form>
<table>
    <tr><td><input type="text" id="timepicker1" name="tp" readonly="true"/></td></tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:33:49.133

这个 ;

```
$('.timepicker').timepicker({
    beforeShow: function(){
                    var validation = true;
                    if(validation){
                        $.timepicker.hide();
                       //this one should not be display since there is an error
                    }

                }
}); 
```

# windows - 使用端口终止进程 (Windows/C)

> ID：14747458
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:47.080
> 
> 标签：windows, port

我怎样才能杀死（或只是找到 pid。杀死很容易）在 Windows 上从 c/c++ 侦听某个端口的进程？

# python - 从 django 中的字符串中删除特殊字符

> ID：14747459
> 
> 赞同：1
> 
> 时间：2013-02-07T09:16:53.343
> 
> 标签：python, django

我想从电子邮件中删除所有特殊字符，例如“@”、“。” **并用'下划线'替换它们，在 python ' unidecode** '中有一些功能，但它不能完全满足我的要求。谁能给我一些建议，以便我可以在字符串中找到上述字符并将它们替换为“下划线”。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:24:11.257

为什么不使用`.replace()`？

例如。

```
a='testemail@email.com'
a.replace('@','_')
'testemail_email.com' 
```

并编辑多个你可能会做这样的事情

```
a='testemail@email.com'
replace=['@','.']
for i in replace:
  a=a.replace(i,'_') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:22:37.610

以此为指导：

```
import re
a = re.sub(u'[@]', '"', a) 
```

**句法：**

```
re.sub(pattern, repl, string, max=0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:00:41.453

Python Cookbook 2nd edition 的好例子

```
import string
def translator(frm='', to='', delete='', keep=None):
    if len(to) == 1:
        to = to * len(frm)
    trans = string.maketrans(frm, to)
    if keep is not None:
        allchars = string.maketrans('', '')
        delete = allchars.translate(allchars, keep.translate(allchars, delete))
    def translate(s):
        return s.translate(trans, delete)
    return translate

remove_cruft = translator(frm="@-._", to="~")
print remove_cruft("me-and_you@gmail.com") 
```

输出：

```
me~and~you~gmail~com 
```

一个很棒的字符串工具，可以放入您的工具包中。

[这本书的](http://shop.oreilly.com/product/9780596007973.do)所有功劳

# php - PHP if 语句不起作用

> ID：14747460
> 
> 赞同：0
> 
> 时间：2013-02-07T09:16:54.427
> 
> 标签：php

我编写了一个代码，其中一个值是从 mysql 获取的，如果它是 1，那么行应该是红色，如果它是 0，那么行应该是绿色。当我执行代码时，它总是转到 else 语句。

代码如下：

```
while ($row = mysqli_fetch_array($result))
{
    $bprofit=$row['profit_loss'];
    if ($bprofit == "1") {
        $colour='#FF0000';
    } else  {
        $colour='#31B404';
    }
    echo "<tr bgcolor=$colour>";
    echo "<td>" . $bprofit . "</td>";
} 
```

输出是：

1
0 0 全部为绿色。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:18:40.160

您在 $bpprofit 中有一个额外的 p：

```
if ($bprofit == "1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:24:49.193

在这种情况下，使用[var_dump()](http://php.net/manual/en/function.var-dump.php)函数并查看变量实际包含的内容以及您需要如何访问它永远不会受到伤害。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:18:18.290

更改`if ($bpprofit == "1")`为`if ($bprofit == "1")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T09:20:47.257

除了其他答案中提到的拼写错误外，我认为您需要像这样引用数组的第一个索引：

`if ($bprofit[0] == "1") ...`

编辑

根据您的新代码，您确定返回的值是字符串而不是数字吗？如果它是数字，你会希望你的`if`语句看起来像这样：

`if ($bprofit == 1) ...`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:58:53.517

遇到上述问题时，请尝试在 PHP 中激活错误报告。一种方法是更新 php.ini，但由于这可能会影响您不想报告错误的其他项目，因此在需要时激活它可能会更好。

重要的是您启用通知报告，因为当您使用尚未设置的变量时它们会出现。

下面的代码是一个简单的例子：

```
<?php error_reporting(E_ALL);

if ($undefined == 1) {
    // do stuff
} 
```

显示此页面时，将显示一条通知：

> 注意：未定义变量：第 3 行 /var/www/test/undefined_example.php 中未定义

当然，这可能不是解决所有问题的合适解决方案，但它可能会帮助您弄清楚在哪里寻找。

它也可能使您成为更好的程序员；通过“提醒”您使用标准值声明变量，如果它们在以后使用之前并不总是被分配。

# jquery - jQuery Mobile - 计算和 onClick 出现问题

> ID：14747461
> 
> 赞同：1
> 
> 时间：2013-02-07T09:17:01.900
> 
> 标签：jquery, jquery-mobile

我是 jQuery mobile 的初学者，我正在尝试制作一个简单的功能，通过使用一个滑块作为区域、今天用于 glastype 的单选按钮组和一种名为 moniflex 的材料来代替 glas 来帮助人们进行能量计算并将导致节能。

我遇到的问题是： - onclick 事件在 safari mac/iPhone 上不起作用。- 我得到不同的值，但做出了相同的选择。

编码：

```
 <script type="text/javascript">

    function displayVals() {

      var area = $("#slider1").val();
      var glas = $("input[name='Ftyp']:checked").val();
      var moniflex = $("input[name='Mflex']:checked").val();
      var summary = parseFloat(area * (glas - moniflex) * 107.28);
      $("#Resultat").html(parseInt(summary) + " kWh");

    }

   </script> 

    <div data-role="page" class="gridContainer clearfix">
    <div id="LayoutDiv1">
    <div data-role="header" id="Header"><img src="img/top.jpg"></div>
    <div data-role="content" id="Content">
    <div data-role="fieldcontain">
    <div id="Resultat" class="Sum">0 kWh</div>
    <div id="Yta">
    <label for="slider">Value:</label>
    <input type="range" name="slider1" id="slider1" value="0" min="0" max="1000" step="1" onChange="displayVals();" data-highlight="true" />

      </div>
      <div id="Glas">
        <div data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal" onClick="displayVals();" >
            <legend>Option</legend>
            <input type="radio" name="Ftyp" id="Ftyp_0" value="5.5" />
            <label for="Ftyp_0">Enkelglas</label>
            <input type="radio" name="Ftyp" id="Ftyp_1" value="3" />
            <label for="Ftyp_1">Dubbelglas</label>
          </fieldset>
        </div>

      </div>
      <div id="Material">
      <div data-role="fieldcontain">
          <fieldset data-role="controlgroup" data-type="horizontal" onClick="displayVals();" >
            <legend>MONIFLEX</legend>
            <input type="radio" name="Mflex" id="Mflex_0" value="3" />
            <label for="Mflex_0">10mm</label>
            <input type="radio" name="Mflex" id="Mflex_1" value="1.9" />
            <label for="Mflex_1">20mm</label>
            <input type="radio" name="Mflex" id="Mflex_2" value="1.4" />
            <label for="Mflex_2">30mm</label>
          </fieldset>
          </div>

    </div>  
      </div>

    </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:45:50.457

我发现了你的问题。单击控制组是不够的，因为您将在实际选择单选框之前尝试查找单选值。您将需要创建一个轻微的超时。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/yRbUT/](http://jsfiddle.net/Gajotres/yRbUT/)

```
$(document).on('pagebeforeshow', '#test-page', function(){       
    $(document).on('click', '[data-role="controlgroup"]', function(){       
        setTimeout(function () { displayVals(); }, 100);
    });
    $( "#slider1" ).on('slidestop', function(event, ui) {
      displayVals();
    });    
});

function displayVals() {
    var area = $("#slider1").val();
    var glas = $("input[name='Ftyp']:checked").val();
    var moniflex = $("input[name='Mflex']:checked").val();
    var summary = parseFloat(area * (glas - moniflex) * 107.28);
    $("#Resultat").html(parseInt(summary) + " kWh");
    alert(area + ' - ' + glas + ' - ' +  moniflex);    
} 
```

此外，如果可能，不要将 onclick 与 jQuery Mobile 一起使用。而是自己绑定事件，就像我的例子一样。

# xslt - 如何调用没有名称的 xslt 模板？

> ID：14747471
> 
> 赞同：0
> 
> 时间：2013-02-07T09:17:25.987
> 
> 标签：xslt

我的 xslt 模板如下所示：

```
<xsl:template match="text()">
        <xsl:param name="precedingPStyle" select="preceding-sibling::aic:pstyle[position()=1]/@name"/>

</xsl:template> 
```

以上是有效的 xslt 模板吗？如何/何时可以调用此模板？它没有名称，只有一个匹配项，并且匹配项有一个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:21:08.777

`xsl:apply-templates`当它是最适合所选节点的模板时，它将被调用。在没有任何其他更具体的模板（例如`match="text()[normalize-space(.)]"`此模板）的情况下，将适用于所有文本节点。

对于参数，`apply-templates`支持方式与支持`with-param`方式完全相同`call-template`。

```
<xsl:apply-templates select="*/text()">
  <xsl:with-param name="precedingPStyle" select="'normal'"/>
</xsl:apply-templates> 
```

`with-param`选择表达式是在调用的上下文中计算的，而不是模板应用到的目标节点。与 一样`call-template`，任何未使用显式设置的参数都将采用模板中元素上的表达式`with-param`指定的默认值（在目标的上下文中评估，而不是调用）`select``xsl:param`

# java - 使用同一个 ServerSocket 服务器的 Java、HTML 和 Android 应用程序

> ID：14747475
> 
> 赞同：1
> 
> 时间：2013-02-07T09:17:33.247
> 
> 标签：java, android, html

Web html 站点、android 或 iOS 和桌面客户端是否可以使用 Java 套接字（服务器使用 ServerSocket）一起通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:34:38.427

您应该在服务器中使用 websockets 的实现，而不是纯 serversockets，例如：http://jwebsocket.org/，[对于](http://jwebsocket.org/)web 客户端使用[http://socket.io/](http://socket.io/)，这是一个非常成熟的 websockets 实现。

像这样，您可以使用与使用 websockets 的服务器进行通信的相同 html，用于页面以及嵌入在 phonegap 中的 android runnning。

希望能帮助到你。

# c# - C# Generic Class Type 参数（不能隐式转换）

> ID：14747476
> 
> 赞同：2
> 
> 时间：2013-02-07T09:17:38.903
> 
> 标签：c#, generics, types, parameters, implicit-conversion

**设想：**

```
class A { }

class B : A { }

class C<T> where T: A { } 
```

**问题**

为什么`C<A> = C<B>`当 B 是 A 的子类时不能？它抛出“无法隐式转换”错误

谢谢

**--UPDATE--**`C<A>`我可以创建一个可以识别 的隐式方法`C<B>`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:24:50.367

如果您需要这样做，请使用[co-variant ，并且因为](http://msdn.microsoft.com/en-us/library/dd799517.aspx)*co-variant*仅适用于*interface 和 delegate*，因此使用魔术词[`out`](http://msdn.microsoft.com/en-us/library/dd469487.aspx)而不是 class 定义接口：

```
interface IC<out T> where T : A
{
} 
```

因此，您可以随意分配：

```
class CA : IC<A>
{}

class CB : IC<B>
{ }

IC<A> x = new CA();
IC<B> y = new CB();

x = y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:22:03.693

您要求的是泛型中的协变和逆变，它仅适用于接口和委托。你可以检查[这个](https://stackoverflow.com/questions/14402641/compile-time-error-when-adding-generic-object-to-collection-of-generics/14402975)

您可以在 Framework >= 4 中执行以下操作：

```
interface IC<out T> where T : A

class C<T> : IC<T>  where T : A

IC<A> ica = new C<B>(); 
```

对于您的情况，您应该提取一个接口`class C`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:22:20.813

`Why cant C<A> = C<B> when B is a subclass of A?` `B`是 的子类`A`，但`C<B>`不是 的子类`C<A>`。`C<B>`和之间没有赋值兼容性 `C<A>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:24:14.020

因为`C<A>`不是`C<B>`

事情是; 如果你能做到

```
C<A> myA = new C<B>();
myA.Add(new A()); 
```

你会遇到问题，因为`B is A`，但不是`A is B`

# node.js - 启动时节点socket.io服务器崩溃

> ID：14747483
> 
> 赞同：0
> 
> 时间：2013-02-07T09:18:00.603
> 
> 标签：node.js, client, socket.io

我有一个 socket.io 服务器和一个正确运行的客户端。每次服务器关闭时，客户端每 5 秒尝试重新连接一次。当服务器再次启动时，它们可以毫无问题地连接。

但是当我再次启动服务器之前等待很长时间时，问题就出现了，当服务器启动时，它崩溃显示：

```
info  - socket.io started
debug - client authorized
info  - handshake authorized DqN4t2YVP7NiqQi8zer9
debug - setting request GET /socket.io/1/websocket/DqN4t2YVP7NiqQi8zer9
debug - set heartbeat interval for client DqN4t2YVP7NiqQi8zer9
debug - client authorized for
debug - websocket writing 1::

buffer.js:287
  pool = new SlowBuffer(Buffer.poolSize);
         ^
RangeError: Maximum call stack size exceeded 
```

客户端重新连接（未连接时每 5 秒执行一次）：

```
function socket_connect() {
    if (!socket) {
        socket = io.connect('http://192.168.1.25:8088', { 'reconnect':false, 'connect timeout': 5000 });
    } else {
        socket.socket.connect();
    }
    socket.on("connect", function () {
        clearInterval(connect_interval);
        connect_interval = 0;
        socket.emit('player', { refresh_data:true });
    });
} 
```

在服务器端，仅使用套接字实例，它会崩溃：

```
var io = require('socket.io').listen(8088); 
```

我认为问题在于：

当服务器启动时，它每 5 秒接收客户端发出的所有连接，（15 小时断开 * 60 m * 60 s / 5 秒重新连接）并崩溃。

我能做些什么来关闭服务器尝试做的连接？

PS：如果我重新加载客户端，然后启动服务器，它可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:31:27.960

socket.io.js 的主要思想是重用现有的连接。您应该只连接一次，然后使用 socket.emit() 交换消息

我不确定您为什么每 5 秒在客户端和服务器之间创建一个新连接。服务器可以创建的连接数是有限制的，但这应该绰绰有余。如果你把它放在一个循环中，那么最终服务器将用完套接字。

io.connect 必须在客户端执行一次，然后您可以每 5 秒执行一次 socket.emit() 。删除 { 'reconnect':false, 'connect timeout': 5000 } 你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:18:38.273

我发现问题...

每次调用 socket_connect() 函数时，都会创建一个 "socket.on("connect" ..." 函数​​。因此，当服务器启动时，会创建一个新连接，但事件 "socket.on("连接”被触发多次......

解决方案是：

```
function socket_connect() {
    if (!socket) {
        socket = io.connect('http://192.168.1.25:8088', { 'reconnect':false, 'connect timeout': 5000 });
    } else {
        socket.socket.connect();
    }
}

socket.on("connect", function () {
        clearInterval(connect_interval);
        connect_interval = 0;
        socket.emit('player', { refresh_data:true });
    }); 
```

# android - Android：处理多个屏幕的图像大小

> ID：14747489
> 
> 赞同：7
> 
> 时间：2013-02-07T09:18:23.630
> 
> 标签：android, image, screen, image-size

我发现用 Android 处理图像真的很困难，我认为这是 Android 开发中最难的部分......

1）我有一张图片，我希望它成为我的应用程序的背景，所以我这样做了

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity" 
    android:background="@drawable/accueil">
</RelativeLayout> 
```

背景应该填满整个屏幕，但不是 cas。在某些（小）屏幕上仅显示部分背景。我怎么说：我希望图像填满整个屏幕，即使图像比屏幕大，图像应该缩小以便我看到所有背景？

也许我应该把我的背景而不是用它作为背景

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity">

       <ImageView
           android:id="@+id/imageView1"
           android:layout_width="500dp"
           android:layout_height="500dp"
           android:adjustViewBounds="false"
           android:src="@drawable/accueil" />

</RelativeLayout> 
```

然而在某些设备中，图像有点被裁剪。

2）我必须在另一个布局中放置一个布局，但我希望它的位置准确，它的宽度相对于父布局。然而，如果我这样做

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/fond">

 <LinearLayout
     android:layout_width="300dp"
     android:layout_height="350dp"
     android:layout_marginTop="20dp"
     android:background="@drawable/fondshare"
     android:orientation="vertical" > 
```

你可以看到结果不是我所期望的（线性布局是带有笑脸和所有按钮的矩形） ![在此处输入图像描述](../Images/0e3c3fcc2a68d8909fb29582edfd261d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:49:42.760

Android 使用两个通用属性对设备屏幕进行分类：尺寸和密度。您应该期望您的应用程序将安装在具有大小和密度范围的屏幕的设备上。因此，您应该包含一些替代资源，以针对不同的屏幕尺寸和密度优化您的应用外观。有四种广义尺寸：small、normal、large、xlarge和四种广义密度：low (ldpi)、medium (mdpi)、high (hdpi)、extra high (xhdpi)

要声明您希望用于不同屏幕的不同布局和位图，您必须将这些替代资源放在单独的目录中，类似于您对不同语言字符串所做的操作。

另请注意，屏幕方向（横向或纵向）被视为屏幕尺寸的变化，因此许多应用程序应修改布局以优化每个方向的用户体验。

有关详细信息，请参阅[android.com 的“支持不同屏幕”一](http://developer.android.com/training/basics/supporting-devices/screens.html)文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:20:57.923

完成这项任务的最佳技术是使用线性布局并使用

```
 <LinearLayout
 android:layout_width="300dp"
 android:layout_height="350dp"
 android:layout_marginTop="20dp"
 android:weightSum="3"
 android:background="@drawable/fondshare"
 android:orientation="vertical" >

  <View
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    />

  </LinearLayout> 
```

在上述情况下

**android:weightSum="要划分布局的部分数"**

**安卓：layout_weight="1"**

您的视图占据的总部分。假设线性布局的 weightsum 为 3 那么视图覆盖的部分将是

**视野宽度**：

(layout_width / WeightSum) * 重量

**视野高度**：

(layout_height / WeightSum) * 重量

在您的情况下，您的视图最终高度为= 119dp

最终宽度为= 100dp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:11:36.763

尝试这个：

我在布局设计中遇到了很多时间。最后我得到了一个解决方案，就像

我已经为大小不同的屏幕创建了布局文件夹。原始布局文件夹 xml 文件仅适用于 HVGA 的普通布局因此为小型布局创建**名称=layout-small**的文件夹并将 xml 文件放在这里。然后，您为大型布局创建文件夹**名称=layout-long**的文件夹，并在此处为该布局创建 xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:29:26.690

我想如果你想使用 Bitmap 作为你的背景，有一些解决方法：

1.  为不同的设备设计几种尺寸的图像。（drawable-hdpi，drawable-xhdpi...）
2.  使用不同的布局并将它们放入使用限定符的不同资源包中。(layout-sw600dp...)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:29:49.183

我建议您调整每个布局文件夹和可绘制文件夹的布局。

布局 layout-800x480 layout-land 等参考这里[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

或参考此链接。

[为不同的屏幕分辨率设计 UI](https://stackoverflow.com/questions/14575884/designing-ui-for-different-screen-resolutions/14575954#14575954)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-04T10:09:44.497

我最近不得不做类似的事情。所以这里有一些技巧。

如果要保留图像的纵横比，请在相对布局中使用它。注意：相对布局的布局宽度和高度应为match_parent或fill_parent。

```
<ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:id="@+id/bgloginpage"

        android:scaleType="centerCrop" /> 
```

这将从中心裁剪图像。还有其他可用的选项。使用**fitXY**而不是**centerCrop**来拟合，它适合设备而不考虑纵横比。为了获得最佳效果，请使用相当大的图像。

另一种选择是为您的图像充分添加纯色背景颜色并增加其大小。将其加载到您的 drawables 文件夹并使用此类。

```
public class ReturnBackGroundImage {

//To avoid java.lang.OutOfMemory exceptions, check the dimensions of a    bitmap before decoding it,
// unless you absolutely trust the source to provide you with predictably sized image data that
// comfortably fits within the available memory.

public static Bitmap decodeSampledBitmapFromResource(Resources resources,    int resId, int reqWidth, int reqHeight, boolean UseDeviceHeight, Activity  activity) {

    if(UseDeviceHeight){
        DisplayMetrics metrics = new DisplayMetrics();

        activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);
        reqHeight = metrics.heightPixels;
        reqWidth = metrics.widthPixels;
    }

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(resources, resId, options);
    return ResizeImage(resources,options,resId,reqWidth,reqHeight);
}

public static Bitmap ResizeImage(Resources resources,BitmapFactory.Options options, int resId, int reqWidth, int reqHeight) {

    double imageHeight = options.outHeight;
    double imageWidth = options.outWidth;
    double ratio = reqHeight / imageHeight;
    int newImageWidth = (int) (imageWidth * ratio);
    Bitmap bMap = BitmapFactory.decodeResource(resources, resId);
    return  getResizedBitmap(bMap, reqHeight, newImageWidth);
   }
} 
```

如下使用它

```
ImageView v = (ImageView)findViewById(R.id.bgloginpagew);
  v.setImageBitmap(ReturnBackGroundImage.decodeSampledBitmapFromResource(getResources(),R.drawable.mainbgforapp,0,0,true,walkThroughActivity.this)); 
```

这是来自 android 网站的示例的修改版本。

如果有人需要保存不同尺寸图像的比例，那就是

1.  xxxhdpi/xxhdpi = 4/3
2.  xxxhdpi/xhdpi = 2/1
3.  xxhdpi/hdpi = 2/1
4.  xhdpi/mdpi = 2/1

afaik 这些比率仅对方形图像有效。我想我会把它放在那里给需要它们的人，就像我一样。

# matlab - 输入解析器和函数句柄

> ID：14747490
> 
> 赞同：1
> 
> 时间：2013-02-07T09:18:28.733
> 
> 标签：matlab, parsing, handle

我正在使用 Matlab 输入解析器，并希望使用以下代码解析函数句柄：

```
p = inputParser;
p.addOptional('progresscallback', 0, @(x) isa(x,'function_handle') );
p.parse(varargin{:}); 
```

这适用于给定的函数句柄，但对于没有句柄的

> 参数 'progresscallback' 验证失败 @(x)isa(x,'function_handle')。

现在我想知道如何构造测试功能或默认值以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:09:47.593

如果您只想接受空输入或函数句柄输入，您可以像这样修改测试函数：

```
@(x) isempty(x) || isa(x,'function_handle') 
```

如果第一个已经为真，短路 OR ( `||`) 将不会评估测试的后半部分。顺便说一句，您可能还想将默认值设置为`[]`.

# ruby-on-rails - 内联样式不适用于 ActionMailer

> ID：14747491
> 
> 赞同：3
> 
> 时间：2013-02-07T09:18:29.977
> 
> 标签：ruby-on-rails, sass, actionmailer, slim-lang

我在我的 Rails 应用程序中使用 SLIM 和 SASS 作为模板和样式电子邮件。

当我在应用程序环境设置为开发的浏览器中查看电子邮件时，电子邮件看起来很好，但在生产环境中，邮件视图的显示方式不同，样式不准确。从生产发送的电子邮件中的图像和标题中缺少内联样式标签，但在开发时看起来很好。

可能导致 Rails 应用程序生产和开发环境中不同的电子邮件样式的原因是什么？

PS：我没有为内联 css 使用任何 gem。

# javascript - 如何在 keydown 上使用 Javascript 模拟悬停？

> ID：14747493
> 
> 赞同：7
> 
> 时间：2013-02-07T09:18:35.210
> 
> 标签：javascript, hover, onkeydown

首先，我想只使用原生 JavaScript 来完成这项任务。

假设我要制作一个自定义下拉菜单，HTML 代码看起来像这样。

```
<div class="dropdown">
  <span class="dropdown-label" style="display:block">Select a thing</span>
  <ul class="dropdownItemContainer">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
  </ul>
</div> 
```

在 CSS 文件中，我有一些接近于此的内容：

```
ul.dropdownItemContainer li:hover {
  background-color: #FF0000;
} 
```

是的，确实没有下拉行为，但这实际上不是讨论的重点。问题是我想不出一种体面的方法来为此下拉菜单启用键盘控制。期望的结果如下：我按下向下键，第一个选项被突出显示；我再次按下它，第二个选项被突出显示，依此类推。

我在这一点上看到的唯一选择（刚开始学习 JS）是获取所有的`ul`孩子，将它们粘贴到一个数组中，并通过 JS 方法以适当的方式为标签分配背景颜色，只要按下键按下。

另一方面，我仍然有鼠标控制的 CSS 中描述的 :hover 行为。有模拟悬停的聪明方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T09:41:15.160

我会在你的 li 元素上简单地分配一个类，并使用 keydown 处理程序来引导它。以下代码并不完整，而是为您提供了一些可以使用的东西。

```
var active = document.querySelector(".hover") || document.querySelector(".dropdownItemContainer li");

document.addEventListener("keydown",handler);
document.addEventListener("mouseover",handler);

function handler(e){
    console.log(e.which);
        active.classList.remove("hover");
    if (e.which == 40){
        active = active.nextElementSibling || active;
    }else if (e.which == 38){      
        active = active.previousElementSibling || active;
    }else{
        active = e.target;
    }
        active.classList.add("hover");
} 
```

你可以在这里看到一个**[工作示例](http://jsfiddle.net/GSNgf/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:22:11.213

您可能想要使用库而不是从头开始编写代码。

[http://vebersol.net/demos/jquery-custom-forms/](http://vebersol.net/demos/jquery-custom-forms/)

[http://www.dreamcss.com/2009/05/15-jquery-plugins-to-enhance-your-html.html](http://www.dreamcss.com/2009/05/15-jquery-plugins-to-enhance-your-html.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:34:02.750

现实你不需要任何 js 来进行下拉，但你可以使用 JavaScript 事件来模拟它。你可以使用像**hover** , **focus** , **onclick这样的事件**

在 JS 中，您可以将其用于设置事件

```
 document.getElementById('id').addEventListener('focus',function(e){
    //place code that want ran at event happened
  } 
```

在 JQuery 中，您可以使用**bind**、**click**、...

```
 $('#id')bind('focus',function(e){
    //place code that want ran at event happened
  } 
```

活动一览

[http://www.quirksmode.org/dom/events/index.html](http://www.quirksmode.org/dom/events/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:31:32.673

我建议从 css 中删除悬停属性。并且只添加一个在按键和鼠标悬停时应用的悬停类

这在代码中可能看起来像这样

```
var dropDown = document.getElementsByClassName("dropdownItemContainer")[0]

document.addEventListener("keydown",function (e) {
    if(e.keyCode == 38 || e.keyCode == 40 ) {
        var key = e.keyCode
        var hovered = dropDown.getElementsByClassName("hovered")
        if(hovered.length != 0 ) {
            cur = hovered[0]
            cur.className = ""
            cur = cur[(key==38?"previous":"next")+"ElementSibling"] || dropDown.children[key==38?dropDown.children.length-1:0] 
        } else {
            cur = dropDown.children[key==38?dropDown.children.length-1:0]
        }
        cur.className="hovered"
    }
});

dropDown.addEventListener("mouseover",function (e) {
    for( var i = 0,j; j = dropDown.getElementsByClassName("hovered")[i];i++)
        j.className = "";
    e.srcElement.className = "hovered";
}); 
```

这是一个关于[JSFiddle的例子](http://jsfiddle.net/rTjbU/)

# haskell - haskell中的递归函数？

> ID：14747494
> 
> 赞同：0
> 
> 时间：2013-02-07T09:18:39.200
> 
> 标签：haskell, recursion

我正在尝试学习 Haskell，并且正在研究关于递归函数的书籍问题。

```
> If   X_1 = 1 then X_2 = 1 + X_1 = 2, X_3 = 1 + X_1 + X_2
      or when it is 5,  X_5 = 1 + X_4 + X_3 + X_2 + X_1 = 16, and so forth. 
```

我试过在haskell上这样做：

```
test :: Int -> Int
test 1 = 1
test n = sum[test n .. test (n-1)] 
```

但输出始终为 1。我想我必须先做一个函数保护然后对其求和，但我不知道如何用递归行为来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:26:20.227

一个好的起点是列表推导：

```
[ test i | i <- [1..5] ] 
```

方法

```
[ test 1, test 2, test 3, test 4, test 5 ] 
```

看看你现在能不能解决。

别忘了加1！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T14:09:36.153

这部分代码是 Haskell 范围

```
[test n .. test (n-1)] 
```

范围通过计算左数和右数，然后构造一个包含从左数到右数的所有步骤的列表来工作。所以：

```
[1 .. 6] --> [1,2,3,4,5,6]
[5 .. 9] --> [5,6,7,8,9] 
```

如您所见，默认步长为 1，因此如果您的左数高于右数，您将得到一个空列表：

```
[4 .. 3] --> [] 
```

顺便说一句，您可以通过提供另一个数字来覆盖默认步骤：

```
[1, 3 .. 6] --> [1,3,5] -- step is 2
[8, 6 .. 3] --> [8,6,4] -- step is -2 
```

如您所见，当您的步长大于 1 时，您必须小心结果列表中包含的内容。这尤其适用于负步骤，如果您有非整数步骤（如`[1, 1.25, .. 2.1]`. 您几乎不应该使用范围生成非整数列表。

在您的解决方案中，您有这条线

```
test n = sum[test n .. test (n-1)] 
```

根据范围的规则，这肯定会出错。当程序试图从范围中创建列表时，它会尝试计算`test n`，因为这是范围的左数​​。但这让我们无处可去，因为`test n`这就是整条线首先试图计算的东西。所以我们有一个无限循环，程序挂起。

你可以尝试做

```
test n = sum[1 .. test (n-1)] 
```

这看起来更接近你给出的例子。它以`1`( 即`test 1`) 开头，以 . 结尾`test (n-1)`。但问题是介于两者之间的那些值。因为范围有一步，所以你最终得到的是：

```
[1 .. test (n-1)] --> [1,2,3, ......., test (n-1)] 
```

这与

```
[test 1, test 2, test 3, .... , test (n-1)] 
```

而且由于范围只能有一个恒定的步长，因此即使您覆盖了默认步长，也无法使用简单的范围来获取最后一行。如何解决这个问题的一个提示是注意列表中的元素数量。

```
length [1 .. test (n-1)] --> test (n-1), 
  -- because [1,2,3] has 3 elements, [1,2,3,4] has 4 and so on

length [test 1, test 2, test 3, ....... , test (n-1)] --> n-1
  -- this is not quite Haskell syntax 
```

这里的 Haskell 方法是创建一个具有正确数量元素的列表，然后对其进行转换，使每个元素都是正确的。如何制作`(n-1)`元素列表？简单的：

```
[1..(n-1)] 
```

从这里你可以走几种方式。有来自 luqui 的列表理解：

```
[test x | x <- [1..(n-1)]] 
```

您可以将其视为将每个数字超出范围，将其分配给`x`，然后将`test`函数应用于`x`，因此您得到`[test 1, test 2, test 3, ....... , test (n-1)]`. 另一种方法是使用该`map`功能：

```
map test [1..(n-1)] 
```

我认为这同时适用`test`于列表的每个元素，但它与列表推导完全一样，只是两种看待它的方式。请注意，两种方式都使用`[1..(n-1)]`范围。

如果您使用其中任何一个而不是`[test n .. test (n-1)]`原始代码中的范围，那么您非常接近解决方案。正如 luqui 所提醒的那样，唯一缺少的是记住添加 1。

# c# - 如何检查在datagridview中单击了哪个单元格

> ID：14747495
> 
> 赞同：1
> 
> 时间：2013-02-07T09:18:39.427
> 
> 标签：c#, datagridview, cell

在我的 datagridview 的第一列中，我有复选框，并且我想在每次更改复选框的状态时触发一个事件。我想过使用 cellcontentclick 事件，将 sender 对象转换为 datagridviewcell 并通过其列索引进行检查。但是我发现 sender 对象是一个 datagridview 对象。那么，如何执行所需的操作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:26:45.753

要处理`CheckBoxCell`更改的值，您必须使用此事件`CellValueChanged`。事件中的发送者将始终是引发事件的控件。要获得有关发生的事情的更多信息，您需要查看`EventArgs`.

回到处理`CheckBoxCell`这样做：

```
private void dgv_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
     var dgv = sender as DataGridView;
     var check = dgv[e.ColumnIndex, e.RowIndex].Value as bool?;

     if (check.HasValue)
     {
         if (check) 
         {
             //checked
         }
         else
         {
             //unchecked
         }
     }
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:23:48.633

有很多方法

一种方法是：
您可以使用一个`hidden field`或`viewstate`在页面上，当点击由 javascript 发生时，您可以在其中存储行 ID，然后在后面的代码中获取该隐藏字段值。

另一种：
你可以 在代码后面使用`CommandName` & 和`CommandArgument``datagridview_ItemCommand`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:48:00.300

```
private void dgvStandingOrder_CellContentClick(object sender, DataGridViewCellEventArgs e)
            {
                if (dgvStandingOrder.Columns[e.ColumnIndex].Name == "IsSelected" && dgvStandingOrder.CurrentCell is DataGridViewCheckBoxCell)
                {
                    bool isChecked = (bool)dgvStandingOrder[e.ColumnIndex, e.RowIndex].EditedFormattedValue;
                    if (isChecked == false)
                    {
                        dgvStandingOrder.Rows[e.RowIndex].Cells["Status"].Value = "";
                    }
                    dgvStandingOrder.EndEdit();
                }
            }

            private void dgvStandingOrder_CellEndEdit(object sender, DataGridViewCellEventArgs e)
            {

                dgvStandingOrder.CommitEdit(DataGridViewDataErrorContexts.Commit);
            }

            private void dgvStandingOrder_CurrentCellDirtyStateChanged(object sender, EventArgs e)
            {
                if (dgvStandingOrder.CurrentCell is DataGridViewCheckBoxCell)
                {
                    dgvStandingOrder.CommitEdit(DataGridViewDataErrorContexts.Commit);
                }   
            } 
```

# mysql - 在 MySQL SET 列中存储数字

> ID：14747502
> 
> 赞同：0
> 
> 时间：2013-02-07T09:18:54.740
> 
> 标签：mysql, insert

我应该如何在 SET 列中插入数字？我知道对于 ENUM，建议不要在 ENUM 列中存储数字，并且数字应该用 '' 插入。SET 列是否相同？应该用''插入数字吗？像 '1','2' 或者可以像这样插入它： 1, 2 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:22:53.757

您使用 SET 值名称插入并将它们括在单引号中并用逗号分隔它们。

[来自这里](http://dev.mysql.com/doc/refman/5.0/en/set.html)的简约示例：

```
CREATE TABLE myset (col SET('a', 'b', 'c', 'd'));
INSERT INTO myset (col) VALUES ('a,d,d,s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:23:45.950

首先，不要使用 MySQL 的 SET 和 ENUM 列类型。

其次，您的集合定义确实不应该包含数字。'一' 是可以的，'1' 会非常混乱。

第三，如果你插入像`1`,`2`等这样的数字，那么它实际上会插入集合的第 n 个成员而不是那个数字，而如果你插入`'1'`它将插入那个成员。当您有一个按该顺序包含以下成员的集合时，差异就会出现：`'foo', 'bar', '1', '2'`- 如果您插入`'1'`它将与插入 a 相同`3`，但如果您插入 a`1`它将与`'foo'`.

底线：不要使用 SET 和 ENUM 列类型。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T09:24:27.057

数字应该像 1 ,2 ,3 这样插入。如果您放入像“1”，“2”这样的单引号，这被认为是字符。

# wpf - 显示不同视图的 WPF 独立应用程序

> ID：14747503
> 
> 赞同：0
> 
> 时间：2013-02-07T09:18:56.950
> 
> 标签：wpf, mvvm

我正在构建一个 WPF 独立应用程序。It consists of a menu on the left of the window and when a menu option is selected I want a page showing content related to the option selected shown on the right hand side of the window.

如果用户选择不同的菜单选项，则将加载新视图。

如果用户选择了先前选择的菜单选项，则将显示该视图，但它将保持其状态。因此，如果有一个以“bob”作为名字的客户的结果集，那么当我再次查看它时，结果集仍将显示。

我的问题是实现这一点的最佳方法是什么。

页面不适合，因为该应用程序不会在浏览器中查看。

我看不到母版页 -> 内容布局方法。

那么这是加载自定义控件的情况吗？

我正在使用 MVVM 模式。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:52:13.470

您可以使用 TabControl 并将 TabStripPlacement 值设置为“Left”——这就是您要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:56:49.570

我设法使用“工作区”在此处实现了类似的详细信息。[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# php - codeigniter中的路由

> ID：14747506
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:19:05.323
> 
> 标签：php, codeigniter, routes

我对 codeigniter 路由感到困惑。我正在通过在 codeigniter 中使用路由器在我的项目中实现 URL 屏蔽。

由此，我对下面给出的 routing.routes 感到困惑。

```
$route['project/shareToFacebook/(:any)']="project/shareToFacebook/$1";
$route['project/shareToFacebook/(:any)']="project/profile/$1"; 
```

我的问题是当我打电话给控制器时`shareToFacebook`，路由会做什么？

`profile`是调用控制器还是调用控制器`shareToFacebook`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:26:20.780

> 注意：路由将按照定义的顺序运行。较高的路线总是优先于较低的路线。

[CodeIgniter 用户指南：路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)

您将始终被发送到`shareToFacebook`，但只有当您传递一些参数时，您才会被发送到这些路由中的任何一个，因此当您调用控制器时，无论您不传递任何参数，它都会打开它的 index 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:24:23.090

**当我调用控制器 shareToFacebook 时，路由会做什么？**

方法“shareToFacebook”将接受 1 个参数 ex。

如果你打电话给前。localhost/yourproject/profile/shareToFacebook/1 <- 将通过 shareToFacebook 方法传递 `public function shareToFacebbok($value)`

你可以用这个价值做任何你想做的事。

**是调用控制器配置文件还是调用控制器 shareToFacebook？**

不。

profile 仍然会调用它的 index 方法

# php - 同时调用xajax/javascript函数

> ID：14747508
> 
> 赞同：0
> 
> 时间：2013-02-07T09:19:20.067
> 
> 标签：php, javascript, function, xajax

我想问是否有任何方法可以同时执行相同的功能..看到这个..

```
function convert_points()
{
    show_loading();
    xajax_ConvertPoints();
    xajax_GetRegularGamingCards();  
} 
```

当调用 xajax_ConvertPoints 时。调用 xajax_GetRegularGamingCards 后的 MILISECOND 延迟。我证明了因为我在每个函数中都放了日志..就像这样..

```
2013-02-07 17:13:53 || LAUNCHPAD42 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 ||
2013-02-07 17:13:53 || LAUNCHPAD43 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 ||
2013-02-07 17:13:53 || LAUNCHPAD44 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 ||
2013-02-07 17:13:53 || LAUNCHPAD45 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 ||
2013-02-07 17:13:54 || LAUNCHPAD46 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 ||
2013-02-07 17:13:54 || LAUNCHPAD47 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 || 
2013-02-07 17:13:54 || LAUNCHPAD48 || TRANSACTION TYPE: CONVERT POINTS || SWCQAZ1 || 
```

2013-02-07 .54 和 .53 (2013-02-07 17:13:53) MILISECONDS 之间存在差异。有什么方法可以在确切的时间调用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:58:17.010

Javascript 在单个线程中运行，因此在任何情况下它们都将按顺序运行。

是什么让你要求他们同时执行？为什么不通过将两个脚本连接在一起来将它们连接到一个 ajax 请求中呢？

`sleep`另一种选择是通过在其中放置 a 或其他东西来延迟您正在调用的脚本的执行。但我真的不推荐这个。我建议的最好的方法是让一个脚本做你需要的，而不是两者兼而有之。

如果是需要数据同时性的数据库操作，您可以使用事务式命令来确保没有纳秒的数据差异。这更好，因为无论出于何种原因，您需要同时调用它们，从最终用户的角度来看，可以很容易地在客户端更改 javascript。这就是为什么最好在服务器上执行此操作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:27:20.687

当您的 Javascript 代码执行时，它一次只能从一个线程发生，因此不可能同时执行这两个函数，因为它们是按顺序执行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:29:36.650

在任何一种语言中，都不可能保证在同一毫秒内执行同一行代码。在 JavaScript 中，您可以在不等待结果的情况下执行函数，并使用 setTimeout 继续执行另一行

```
function convert_points(){
    setTimeout(show_loading,0);
    setTimeout(xajax_ConvertPoints,0);
    setTimeout(xajax_GetRegularGamingCards,0);  
} 
```

# input - 输入和比对蛋白质序列

> ID：14747518
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:19:57.043
> 
> 标签：input, python-2.7, alignment, pandas, biopython

我有一个用于在蛋白质序列中查找突变位置的脚本。以下脚本将执行此操作。

```
import pandas as pd #data analysis python module
data =     'MTAQDDSYSDGKGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYLGAVFQLN,MTSQEDSYSDGKGNYNTIMPGAVFQLN,MTAQDDSYSDGRGDYNTIMPGAVFQLN,MKAQDDSYSDGRGNYNTIYLGAVFQLQ,MKSQEDSYSDGRGDYNTIYLGAVFQLN,MTAQDDSYSDGRGDYNTIYPGAVFQLN,MTAQEDSYSDGRGEYNTIYLGAVFQLQ,MTAQDDSYSDGKGDYNTIMLGAVFQLN,MTAQDDSYSDGRGEYNTIYLGAVFQLN' #protein sequences

df = pd.DataFrame(map(list,data.split(',')))

I = df.columns[(df.ix[0] != df).any()] 

J = [pd.get_dummies(df[i], prefix=df[i].name+1, prefix_sep='') for i in I] 

print df[[]].join(J) 
```

在这里，我给出了数据（硬编码），即输入蛋白质序列。通常在应用程序中，用户必须给出输入序列，即，我的意思是软编码。这里的对齐也没有完成。我阅读了 biopython 教程，我得到了以下脚本，但我不知道如何将这些脚本添加到上面的脚本中。

```
from Bio import AlignIO
alignment = AlignIO.read("c:\python27\proj\data1.fasta", "fasta")
print alignment 
```

我怎么能做这些我试过的：

```
>>> import sys

>>> import pandas as pd

>>> from Bio import AlignIO

>>> data=sys.stdin.read()
    MTAQDDSYSDGKGDYNTIYLGAVFQLN
    MTAQDDSYSDGRGDYNTIYLGAVFQLN
    MTSQEDSYSDGKGNYNTIMPGAVFQLN
    MTAQDDSYSDGRGDYNTIMPGAVFQLN
    MKAQDDSYSDGRGNYNTIYLGAVFQLQ
    MKSQEDSYSDGRGDYNTIYLGAVFQLN
    MTAQDDSYSDGRGDYNTIYPGAVFQLN
    MTAQEDSYSDGRGEYNTIYLGAVFQLQ
    MTAQDDSYSDGKGDYNTIMLGAVFQLN
    MTAQDDSYSDGRGEYNTIYLGAVFQLN
    ^Z
>>> df=pd.DataFrame(map(list,data.split(',')))
>>> I=df.columns[(df.ix[0]!=df).any()]
>>> J=[pd.get_dummies(df[i],prefix=df[i].name+1,prefix_sep='')for i in I]
>>> print df[[]].join(J) 
```

但它给出了空的 DataFrame 作为输出。

我也尝试过，但我不知道如何将这些序列加载到我的脚本中

```
while 1:
 var=raw_input("Enter your sequence here:")
 print "you entered ",var 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:12:31.833

当您通过以下方式读取数据时：

```
sys.stdin.read() 
```

序列使用`'\n'`而不是分隔`','`（打印`data`将确认是否是这种情况，它*可能*取决于系统），因此您应该使用以下方法进行拆分：

```
df = pd.DataFrame(map(list,data.split('\n'))) 
```

*检查这种事情的一个好方法是逐行检查它，您会看到这`df`是一个单行 DataFrame（然后传播为`I`空）。*

顺便说一句：您使用[的代码写得多么好！](https://stackoverflow.com/questions/14639825/protein-sequence-coding/14641252#14641252):)

# android - 如何像在 ios 中一样对 listview 进行弹跳效果

> ID：14747525
> 
> 赞同：0
> 
> 时间：2013-02-07T09:20:23.637
> 
> 标签：android, android-layout, listview, android-listview

我需要在 android.ie 中对我的列表视图进行反弹效果，当我向下滚动时，列表视图必须滚动超出其起点并返回其原始位置请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:49:57.950

因为您没有发布您的代码（我认为根据您的问题也不需要）。所以我给了一个[自定义小部件](https://github.com/johannilsson/android-pulltorefresh)

它是 listview 的自定义小部件（没那么复杂，只是在其中添加了动画）
为您的应用程序使用该库。并且从`PullToRefreshActivity`那里的
`mListItems.addFirst("Added after refresh...");`声明中，如果你愿意，只需将其删除..（不要担心活动名称或类名
，这里的目标是你得到你的结果），即对 Listview 的反弹效果
如果你满意..那么请接受答案..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:57:49.030

从 API 的外观来看，如果您创建扩展 ScrollView 类的自定义视图，[`ScrollView`](http://developer.android.com/reference/android/widget/ScrollView.html)您应该能够覆盖该方法。[`onOverScrolled()`](http://developer.android.com/reference/android/widget/ScrollView.html#onOverScrolled%28int,%20int,%20boolean,%20boolean%29)

# android - 如何在我的 Android 设备上禁用已安装的 Google Play 服务版本？

> ID：14747528
> 
> 赞同：14
> 
> 时间：2013-02-07T09:20:31.553
> 
> 标签：android, android-maps-v2, google-play-services

我的应用程序使用 Google 地图功能，需要在设备上安装和启用 Google Play 服务。我想测试一个案例，如果 Google Play 服务已被用户手动禁用，请用户启用它，以便应用程序可以正常工作。所以我需要针对这种情况测试我的代码，但我不知道如何在手机上禁用（而不是卸载）Google Play 服务并检查我的代码是否正常工作。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T13:36:41.000

转到您的设备`Settings --> Applications --> Tab "All" --> Google Play services`并按下`Disable`按钮。它可能会弹出一个对话框要求确认，在这种情况下，只需回答 OK。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-28T12:11:09.157

转到设置然后安全然后设备管理员然后android一个停用那个然后回到设置主页然后应用程序所有你可以停用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T15:11:55.590

如果 Google Play 服务未作为系统应用程序安装，您将无法在系统应用程序设置中禁用它，在这种情况下，如果它作为用户应用程序安装，您可以使用 Titanium back up pro 或 link2SD 等应用程序来禁用/冻结它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T04:31:04.627

（需要 Root）（仅在 CM13 Note 10.1 上测试）

1.  如果打开则关闭 Play 商店
2.  打开 ADB Shell（或根设备上的终端）并输入

    cd /data/app/*自动售货机*

    mv base.apk base.apk.back

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-04T14:54:44.413

## 禁用间隙

要禁用谷歌gapps附带的所有应用程序，您可以使用

`pm disable <PACKAGE_NAME>`（如果已root，请`su`在此之前运行一次）

或者

`pm hide <PACKAGE_NAME>`如果没有扎根。

## 重新启用差距

要重新启用应用程序，请使用

`pm enable <PACKAGE_NAME>`（如果在此之前运行`su`一次）

和

`pm unhide <PACKAGE_NAME>`（如果没有扎根）。

也可以通过**设置**>**应用程序**>**显示所有应用程序**>（点击应用程序名称）>启用来**启用**。

这些命令应该在`adb shell`通过电缆连接时运行，或者从终端直接在设备上运行。

这是一个软件包列表（从[open gapps mini](https://opengapps.org/)中提取）：

```
com.google.android.apps.turbo
com.google.android.apps.wallpaper
com.google.android.apps.nexuslauncher
com.opengapps.wellbeingoverlay
com.google.android.tts
com.google.android.gm.exchange
com.google.android.googlequicksearchbox
com.opengapps.pixellauncheroverlay
com.google.android.syncadapters.calendar
com.google.android.gm
com.google.android.markup
com.google.android.packageinstaller
com.google.android.apps.wellbeing
com.google.android.calendar
com.google.android.soundpicker
com.google.android.ext.shared
com.google.android.setupwizard
com.google.android.apps.restore
com.google.android.onetimeinitializer
com.google.android.carriersetup
com.google.android.backuptransport
com.google.android.setupwizard
com.google.android.gms
com.google.android.apps.pixelmigrate
com.google.android.gsf
com.google.android.gms.policy_sidecar_aps
com.android.vending
com.google.android.ext.services
com.google.android.feedback
com.google.android.syncadapters.contacts
com.google.android.configupdater
com.google.android.partnersetup 
```

> ❗️**使用风险自负！确保在执行此操作之前备份数据**！

* * *

> ^(*该列表可能因 android 版本和 CPU 架构而异。*)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-07-31T05:09:29.977

我从三星手机中删除了 Google Play 服务，因为它占用了大量空间。在论坛上到处阅读严重问题的专家，后来意识到这些只是谷歌本身的复制和粘贴。

我继续前进，只是将其卸载并获得了更好的电池奖励。当我进行同步时，Playstore 仍在更新应用程序。所以我禁用了自动同步来手动执行我想要的操作，因为我真的不想要地图等；Youtube 拒绝启动，所以我现在在我的浏览器中创建了一个书签，并从那里访问，就像我使用我的 comp 进行下载一样。

因此，如果您有足够的空间，只需在“应用程序”中禁用它或将其删除，您的手机就会运行良好 -**忘记不同论坛上的专家评论/观点，这些评论/观点是来自 Google 的复制和粘贴意见**，如果需要，您可以随时重新安装.

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-19T13:15:21.123

我有一部 LG-E400 智能手机，我总是遇到内存不足的问题。我今天卸载了谷歌播放服务，一切正常。地图、Youtube、互联网，一切正常。

# angularjs - proper way to assign and use controller in directives in AngularJS

> ID：14747529
> 
> 赞同：1
> 
> 时间：2013-02-07T09:20:34.307
> 
> 标签：angularjs, angularjs-directive

how to correctly assign a controller to a directive so 2 directives can communicate to each other. When I set the require argument of the second directive to the name of the first directive i get an error in the console:

> Error: No controller: dir at Error () at getControllers ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4132:19](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4132:19)) at nodeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4259:35](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4259:35)) at compositeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3869:15](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3869:15)) at compositeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3872:13](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3872:13)) at nodeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4252:24](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:4252:24)) at compositeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3869:15](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3869:15)) at compositeLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3872:13](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3872:13)) at publicLinkFn ([http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3775:30](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:3775:30)) at [http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:934:25](http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js:934:25) `<div class="btn btn-danger" dir2="">` angular.js:5601
> 
> (anonymous function)angular.js:5601
> 
> (anonymous function)angular.js:4698
> 
> nodeLinkFnangular.js:4261
> 
> compositeLinkFnangular.js:3869
> 
> compositeLinkFnangular.js:3872
> 
> nodeLinkFnangular.js:4252
> 
> compositeLinkFnangular.js:3869
> 
> compositeLinkFnangular.js:3872
> 
> publicLinkFnangular.js:3775
> 
> (anonymous function)angular.js:934
> 
> Scope.$evalangular.js:7905
> 
> Scope.$applyangular.js:7985
> 
> (anonymous function)angular.js:932
> 
> invokeangular.js:2813
> 
> bootstrapangular.js:930
> 
> angularInitangular.js:906
> 
> (anonymous function)angular.js:14600
> 
> cjquery-latest.min.js:3
> 
> p.fireWithjquery-latest.min.js:3
> 
> b.extend.readyjquery-latest.min.js:3
> 
> H

Here's an example in [plnkr](http://plnkr.co/edit/Lq8Gy2V3kkMI7847ChYC).

# Edit :

I'm trying to do something that is present in a lot of websites, change the view template by clicking on a button or link from list view to thumbnails view etc... I thought about making 2 directives one called "switcher" for the button switcher and the other called "switchable-view" for the view. here's a plnkr with an example code. The idea is when i click on the "switcher" directive it switch the template in the switchable directive which will result on switching the view, I hope this is clear enough. what i'm trying to do is something like this [plnkr](http://plnkr.co/edit/OamSSWoODl0M8iGT4QJt)

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:07:11.500

Actually when you would like to share controller between directives you need to have then or on one element or somewhere upper on hierarchy (and add '^' before name on require).

So the answer for your question would be: this error accrues because required directive/controller is not on same or upper level of hierarchy of DOM elements.

I suppose, you would like to have some container to store list of `attributes` and then manipulate this list from directives. My suggestion would be to have another directive for storing them (like ngForm do). So both directiveis (dir, dir2) that are on different leaves of DOM hierarchy require some directive that would contain shared data and would have common hierarchy. Kind of:

```
──── attributesDirective (in controller: this.doSomething())
                     ├ dir1 (requre: '^AttributesDirective')
                     └ dir2 (requre: '^AttributesDirective') 
```

**BUT, actually**, you can achieve what you've described at '**EDIT**' without adding any directive and any JS code: add property `template` that will store name of template file and change this property when user clicks on items. `ngInclude` will pick up new value and reload template.

Here is your changed plunker with this solution: [http://plnkr.co/edit/z7wg1TCIdmQjfT8A2rZe?p=preview](http://plnkr.co/edit/z7wg1TCIdmQjfT8A2rZe?p=preview)

# android - 在 Android 中通过 SIP 进行视频通话

> ID：14747532
> 
> 赞同：4
> 
> 时间：2013-02-07T09:20:40.060
> 
> 标签：android, sip

我是 Android 的初学者，正在开发一个可以使用 SIP 通过 IP 进行视频通话的应用程序。我在 Google 和 StackOverflow 上进行了很多搜索，但我得到的只是我需要一些本地库，对此我知之甚少。

我照顾了 Linphone、Csipsimple 和 IMSdroid，但没有得到任何东西（意味着我不需要工作应用程序，我只想知道它们是如何工作的）。

在 Android 中使用内置 SIP 堆栈，我可以进行音频呼叫，但不知道如何使用视频来执行此操作。

有什么简单的方法可以做到这一点吗？

所以，如果对我有任何建议，请告诉我..

提前致谢。我正在寻找一些积极的回应。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T16:59:56.803

取自我在这里的回答：[Android video calls using android's sip](https://stackoverflow.com/questions/8960312/android-video-calls-using-androids-sip/)

我相信通用的 Android SIP 堆栈支持视频...

取自： [https ://developer.android.com/reference/android/net/sip/package-summary.html](https://developer.android.com/reference/android/net/sip/package-summary.html)

如果要创建通用 SIP 连接（例如用于视频通话或其他），您可以[`SipManager`](https://developer.android.com/reference/android/net/sip/SipManager.html)使用[`open()`](https://developer.android.com/reference/android/net/sip/SipManager.html#open%28android.net.sip.SipProfile%29). 但是，如果您只想创建音频 SIP 呼叫，则应该使用[`SipAudioCall`](https://developer.android.com/reference/android/net/sip/SipAudioCall.html)该类，如上所述。

并且，如果您想要或不介意使用外部库/SIP 堆栈，请查看以下内容：

[http://www.youtube.com/watch?v=g1NHEsXFEns](http://www.youtube.com/watch?v=g1NHEsXFEns)

使用[Jain-SIP](http://java.net/projects/jain-sip/)应该会有所帮助！

**编辑**：最近，这个项目似乎是原生 Android SIP 空间的领导者：

[https://code.google.com/p/csipsimple/](https://code.google.com/p/csipsimple/) .. 开源，它们提供您进行语音和视频通话所需的一切。

# javascript - 使用 javascript 限制 li 标签

> ID：14747533
> 
> 赞同：1
> 
> 时间：2013-02-07T09:20:41.200
> 
> 标签：javascript, jquery, html, jquery-ui

我有一种方法可以将动态添加的 li 标签限制为特定数字。
例如：-
我已经赋予用户添加 li 标签的能力，但不想提供超过 3 个 li 标签......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:22:56.827

为您的“add li”函数添加一个计数器。您可以像这样找到当前 li 元素的数量：

```
var numLis = $('#container li').length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:30:37.133

创建了一个示例小提琴：[这里](http://jsfiddle.net/nishantjani10/VnfhE/)

尝试类似：

```
$('document').ready(function(){
    $('#add').click(function(){
        var li_count = $('#sample li').length;
        if(li_count < 3)
            $('#sample').append('<li>HELOO YOU</li>');
        else
            return false;

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:24:23.670

您可以将所有 li 标签分组到一个 id 为“x-div”的 div 下。然后，您可以在每次添加 li 元素时使用 children count 属性检查计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:28:23.027

这边走：

```
if($('ul.myclass li').length > 3){
    alert('Not allowed to add more li');
} 
```

# linq - Entity Framework 4 Linq 包括不加载集合

> ID：14747536
> 
> 赞同：0
> 
> 时间：2013-02-07T09:20:48.237
> 
> 标签：linq, entity-framework-4, nopcommerce

我在理解和使用 Include 命令时遇到了问题，主要是在处理 nopCommerce 1.9 站点时，但我到处都有同样的问题。我已经在网上搜索过，并且在 stackoverflow 上搜索过，但似乎找不到其他人有同样的问题，所以我想只有我自己弄错了。

我认为问题很简单，但很简单：当我在查询父实体时包含子实体时，EF 会加载所有实体，但不会加载集合，这意味着当我尝试访问集合时，EF 会返回加载集合的数据库。

为了澄清，请考虑以下几点：

```
var products = (from p in _context.Products.Include("NpProductVariants") select p).ToList();

var productvariant = products.ProductVariants[2]; //Loads the NpProductVariants collection 
```

我认为额外的提取是多余的，事实上，如果我创建一个对象来保存导航集合和使用持有者的代码，我可以避免进一步的提取，但这很烦人，即

```
var products = (from p in _context.Products.Include("NpProductVariants") select new productholder() { product = p, variants = p.NpProductVariants }).ToList(); 
```

这证明该集合在查询执行期间可用，因为我可以存储它，但它不会自动显示为附加到 ObjectContext，直到我尝试访问需要额外查询的属性。

我认为问题很清楚，但我做错了什么？

任何帮助将非常感激。

谢谢。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:32:17.543

您正在包括`"NpProductVariants"`，但您正在访问`ProductVariants`。

您可以做两件事，具体取决于您的实际 EF 模型：

1.  更改`Include`为`"ProductVariants"`：

    ```
    var products = _context.Products.Include("ProductVariants"); 
    ```

2.  更改您访问的属性`NpProductVariants`：

    ```
    var productvariant = products.NpProductVariants[2]; 
    ```

# browser - 在数学编辑器中实现撤消重做

> ID：14747537
> 
> 赞同：1
> 
> 时间：2013-02-07T09:20:52.870
> 
> 标签：browser, cursor, wysiwyg, text-editor, undo-redo

我需要在使用 MathQuill JavaScript 库在文本编辑器中定义事件的 Web 应用程序中实现撤消/重做系统。虽然我可以使用一组保持状态和推送/弹出调用等的对象自己实现自定义解决方案，但是在处理所有状态和光标位置时存在很多故障。无论如何我可以在 Mathquill 库中实现它，或者以某种方式在我的编辑器中启用浏览器的内置撤消重做功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-17T21:42:35.493

我也需要这个功能，并且需要在不修改原始 MathQuill 库的情况下拥有它。

我是这样做的：

```
/* * * * * * * * * * * * * * * 
 * File: UndoRedoManager.js  *
 * * * * * * * * * * * * * * */

const TAB_KEYCODE = 9;
const ENTER_KEYCODE = 13;
const SHIFT_KEYCODE = 16;
const CTRL_KEYCODE = 17;
const ALT_KEYCODE = 18;
const CAPSLOCK_KEYCODE = 20;
const ESCAPE_KEYCODE = 27;
const PAGEUP_KEYCODE = 33;
const PAGEDOWN_KEYCODE = 34;
const END_KEYCODE = 35;
const HOME_KEYCODE = 36;
const LEFTARROW_KEYCODE = 37;
const UPARROW_KEYCODE = 38;
const RIGHTARROW_KEYCODE = 39;
const DOWNARROW_KEYCODE = 40;
const V_KEYCODE = 86;
const Y_KEYCODE = 89;
const Z_KEYCODE = 90;
const ALTGR_KEYCODE = 225;

const unaffectingKeys = [TAB_KEYCODE,
                        ENTER_KEYCODE,
                        SHIFT_KEYCODE,
                        CTRL_KEYCODE,
                        ALT_KEYCODE,
                        CAPSLOCK_KEYCODE,
                        ESCAPE_KEYCODE,
                        LEFTARROW_KEYCODE,
                        PAGEUP_KEYCODE,
                        PAGEDOWN_KEYCODE,
                        END_KEYCODE,
                        HOME_KEYCODE,
                        LEFTARROW_KEYCODE,
                        UPARROW_KEYCODE,
                        RIGHTARROW_KEYCODE,
                        DOWNARROW_KEYCODE,
                        ALTGR_KEYCODE];

function UndoRedoManager(pMathField, pElement) {
    this.mathField = pMathField;
    this.contentEl = pElement;
    this.typedHistory = [this.mathField.latex()];
    this.ctrlIsDown = false;
    this.YIsDown = false;
    this.ZIsDown = false;
    this.currentState = 0;
    this.buffSize = 50;

    this.rearrangeTypedArray = () => {
        if (this.typedHistory.length > this.buffSize) {
            let sizeOverflow = this.typedHistory.length - this.buffSize;
            this.currentState = this.currentState - sizeOverflow;
            this.typedHistory = this.typedHistory.slice(this.buffSize * (-1));
        }
    };

    this.isKeyIsUnaffecting = (pKey) => {
        return unaffectingKeys.includes(pKey);
    };

    this.checkIfSpecialKeysAreUpAndSetStates = (pUppedKey) => {
        switch (pUppedKey) {
            case CTRL_KEYCODE:
                this.ctrlIsDown = false;
                break;

            case Y_KEYCODE:
                this.YIsDown = false;
                break;

            case Z_KEYCODE:
                this.ZIsDown = false;
                break;
        }
    }

    this.checkIfSpecialKeysAreDownAndSetStates = (pDownedKey) => {
        switch (pDownedKey) {
            case CTRL_KEYCODE:
                this.ctrlIsDown = true;
                break;

            case Y_KEYCODE:
                this.YIsDown = true;
                break;

            case Z_KEYCODE:
                this.ZIsDown = true;
                break;
        }
    }

    this.saveState = () => {
        if (this.currentState !== (this.typedHistory.length - 1)) {
            this.typedHistory = this.typedHistory.slice(0, (this.currentState + 1));
        }   

        this.typedHistory.push(this.mathField.latex());
        this.rearrangeTypedArray();
        this.currentState++;
    };

    this.undo = () => {
        if (this.currentState !== 0) {
            this.currentState--;
            this.mathField.latex(this.typedHistory[this.currentState]);
        }  else {
            //console.log('do nothing');
        }
    };

    this.redo = () => {
        if (this.currentState < (this.typedHistory.length - 1)) {
            this.currentState++;
            this.mathField.latex(this.typedHistory[this.currentState]);
        } else {
            //console.log('do nothing');
        }
    };

    this.contentEl.on('keyup', (e) => {
        this.checkIfSpecialKeysAreUpAndSetStates(e.which);

        //log in typedHistory
        if ((this.isKeyIsUnaffecting(e.which) === false)
            && (this.ctrlIsDown === false || (this.ctrlIsDown && e.which === V_KEYCODE))) {
            this.saveState();
        }
    });

    this.contentEl.on('keydown', (e) => {
        this.checkIfSpecialKeysAreDownAndSetStates(e.which);

        //ctrl+z
        if (this.ctrlIsDown && this.ZIsDown) {
            this.undo();
        }

        //ctrl + y
        if (this.ctrlIsDown && this.YIsDown) {
            this.redo();
        }
    });
} 
```

然后我们这样使用它：

```
/* * * * * * * * * *  
 * File: index.js  *
 * * * * * * * * * */

/* we consider that there is a DOM element we want to write Math in, with the id "math_content", like <div id="mathContent"></div> */

// Here nothing special, we use the lib as usual
const MQ = MathQuill.getInterface(2);
const mathContentEl = $('#mathContent');
const mathField = MQ.MathField(mathContentEl, {
    handlers: {
        edit: () => {

        },

        enter: () => {

        }
    }
});

// And we add the undo/redo feature like this
const undoManager = new UndoRedoManager(mathField, mathContentEl); 
```

对我来说效果很好

# c# - 重叠控件，Windows 商店应用程序 C#

> ID：14747542
> 
> 赞同：1
> 
> 时间：2013-02-07T09:21:09.283
> 
> 标签：c#, windows-store-apps

我有 2 个矩形，它们相互重叠。可以选择前面显示的吗？

现在我使用不透明度来测试一切。是否有 BringToFront 功能或者我可以更改 z-index 吗？

# c - 如何为#include 创建别名 在 vim 中

> ID：14747547
> 
> 赞同：2
> 
> 时间：2013-02-07T09:21:21.033
> 
> 标签：c, unix, vim, alias

每次我们编写程序时，我们都需要类似#include 或任何其他#include 的东西......

无论如何要为此创建别名，以便当我在 vim 中键入 inc 并按某个键时， inc 更改为#include

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:28:21.723

阅读`:h abbreviations`或尝试[许多可用的片段扩展插件之一](http://www.vim.org/scripts/script_search_results.php?keywords=snippet&script_type=&order_by=creation_date&direction=descending&search=search)。

我使用原始的[SnipMate](https://github.com/msanders/snipmate.vim)，但有[一个现代叉子和一个称为](https://github.com/garbas/vim-snipmate)[UltiSnips](http://www.vim.org/scripts/script.php?script_id=2715)的现代替代品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T09:25:37.997

你可以在 .vimrc 中使用它：

```
iabbrev _istd #include <stdio.h><CR> 
```

现在，如果您键入`_istd`，您将获得包含粘贴。你可以有几个像这样的包含：

```
iabbrev _istd #include <stdio.h><CR>#include <stdlib.h><CR>#include <string.h><CR> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:32:17.627

把它放在你的 .vimrc 文件中

```
map ù :s/inc/#include \<stdio.h\>/<CR> 
```

选择文本，按ù 和inc 更改为#include

# jquery - jquery new div fadIn 效果通过重新加载一个 div

> ID：14747549
> 
> 赞同：3
> 
> 时间：2013-02-07T09:21:24.680
> 
> 标签：jquery, html, fadein, reload

我有一个 div “内容”，在这个 div 中我有几个 div “评论”，我每 5 秒重新加载一次 div “内容”，我想淡入每个新评论。为此，每条评论都有一个整数，所以基本上我正在做的是：我将最后一条评论的 id 保存在变量“lastComment”中，当我重新加载 div“内容” ，我正在使用 if($(".comment").attr(id) > lastComment) { alert('ok') }

但它不起作用，首先它重新加载 div，而不是直接说“好的”，我需要再等 5 秒钟，这里是我的代码：

```
var lastComment = $('.comment:last').attr('id');
setInterval(function()
{
    $('#content').load('fullscreen.php?image='+$('.imageBig').attr('id')+' #content');
    if($('.comment').attr('id') > lastComment){
        alert('ok');
    }
}, 5000); 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:40:46.067

我认为有你的`jQuery selector`问题，在 if 条件下你应该指定 last`div.comment`因为`var lastComment = $('.comment:last').attr('id');`语句将在此工作后分配最后一个元素，`setInterval`并且新的最后一个 div 注释将更改，因此警报不起作用。

```
var lastComment = $('.comment:last').attr('id');
setInterval(function()
{
    $('#content').load('fullscreen.php?image='+$('.imageBig').attr('id'),function(){
        if($('.comment:last').attr('id') > lastComment){
            alert('ok');
        }
    });

}, 5000); 
```

# c# - 将文本文件复制到新位置并编码为 ASCII

> ID：14747551
> 
> 赞同：0
> 
> 时间：2013-02-07T09:21:30.197
> 
> 标签：c#, .net

我正在使用以下 powershell 脚本将文本文件从一个位置复制到另一个位置，然后对其进行编码，以便可以使用 SQL 批量复制将其导入。源文件编码为 UCS-2 Little Endian。

```
gc "\\SourceServer\Share\Person.txt" | Out-File -encoding ASCII \\dbserver\share\DataFlag\Person.txt 
```

是否可以在不使用 powershell 脚本的情况下在 C# 中完成相同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:16:47.890

正如[这里](https://stackoverflow.com/questions/6971593/c-sharp-big-endian-ucs-2)所解释的，在 C# 中没有直接支持`UCS-2`但是应该可以使用`StreamReader`with读取文件`UTF-16`并通过一些额外的字节调整来补偿差异。不过需要一些研究。

# c# - 连接外部键盘时阻止横向模式 WinRT 应用程序

> ID：14747554
> 
> 赞同：2
> 
> 时间：2013-02-07T09:21:54.577
> 
> 标签：c#, windows-runtime, orientation, windows-rt

我们的应用程序仅支持纵向模式，并且运行良好。

但是当我为 Microsoft Surface 平板电脑连接外部键盘时，我的应用程序被转换为横向模式。

即使连接了外部键盘，我是否可以防止这种行为不旋转到横向？

我知道这不会是很好的用户体验，但是我的应用程序是专为纵向设计的，所以当它旋转到横向时，UI 看起来很糟糕。

谢谢。

# c# - 使用Epplus获取excel单元格的样式

> ID：14747565
> 
> 赞同：0
> 
> 时间：2013-02-07T09:22:28.197
> 
> 标签：c#, excel, openxml-sdk, epplus

有什么方法可以通过 open xml sdk 和 epplus 获取特定单元格的样式？

目前我通过以下方式获得价值：

```
currentWorksheet.Cells[nRowId, 3].Text.Trim(); 
```

除此之外，如果有背景颜色和边框，我想要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T13:36:26.563

尝试

```
currentWorksheet.Cells[nRowId, 3].Style; 
```

还：

```
currentWorksheet.Cells[nRowId, 3].Style.Fill.BackgroundColor;
currentWorksheet.Cells[nRowId, 3].Style.Border; 
```

# windows - 更新活动目录中的用户字段

> ID：14747569
> 
> 赞同：2
> 
> 时间：2013-02-07T09:22:37.590
> 
> 标签：windows, active-directory

在我的 windows 服务器中，大约有 1500 个用户，我有一个问题想解决，请指教。

我想批量更新所有的e-mail字段（用户a/c），例如当前email字段是tom.chan@email.com，我想把所有email地址改成他们对应的用户名“用户名+@email.com”，所有这些用户详细信息都在活动目录中，可以告诉我该怎么办？

例如。tom.chan@email.com ==> user1@email.com ;amy.yuen@email.com ==> user2@email.com ; jacky.hung@email.com ==> user3@email.com

# eclipse - 无法在 Subclipse 中复制和粘贴旧版本的代码？

> ID：14747570
> 
> 赞同：3
> 
> 时间：2013-02-07T09:22:43.627
> 
> 标签：eclipse, svn, subclipse

在 Eclipse 中使用 SVN 插件 Subclipse。当我右键单击一个文件然后去

```
Team --> Show History 
```

然后我选择我要查看的文件的版本。全选 (Ctrl-A) 、复制 (Ctrl-C) 和粘贴 (Ctrl+V) 等所有命令都不起作用。

这是阻止人们使用旧版本代码的某种保护功能吗？

我的最新版本代码严重损坏，我想用旧文件版本的内容替换它？

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:29:17.460

右键单击该文件并选择“替换为-> 修订版或 URL”，然后选择一个工作版本，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:40:27.587

在历史视图中，您希望在方案中使用的选项是获取内容。这将获取所选修订版中文件的内容，并用它替换工作副本中的文件内容。然后，该文件可能会在本地显示为已修改，您可以根据需要编辑/提交以使用这些更改更新 HEAD 修订。

# python - 方法和属性

> ID：14747572
> 
> 赞同：2
> 
> 时间：2013-02-07T09:22:44.807
> 
> 标签：python, class, methods

我想知道，如果一个方法和一个属性在一个类中具有相同的名称会发生​​什么。程序是否会首先搜索对象中的属性，如果类中的方法具有相同的名称，程序是否会跳过它而只关注对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:37:28.410

Jakob 的回答大多准确但不完整。如果`x`类中的定义遵循描述符协议并且定义了`__get__`和`__set__`方法，那么它将继续优先于实例字典中的任何“x”。看到这一点的最简单方法是使用`property`：

```
>>> class Example(object):
    def __init__(self):
        self.x = 44

    @property
    def x(self):
        return "hi"
    @x.setter
    def x(self, value):
        self.__dict__['x'] = value

>>> Example().x
'hi'
>>> Example().__dict__['x']
44 
```

所以实际的规则是 Python 在类（及其基类）中查找，如果它找到一个匹配的对象并且该对象有一个`__get__`方法（或者`__set__`如果设置），那么它会调用该`__get__`方法，否则它会查找一个实例属性并使用它如果有，或者如果没有，则回退到使用类属性（即方法）。

`__getattribute__`如果定义了或，则查找可能会更加复杂`__getattr__`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:24:11.070

这取决于先分配哪个。

如果首先分配方法，则属性将是您将访问的属性，

例如

```
class Example(object):
    def __init__(self):
        self.x = 44

    def x(self):
        return "hi"

print Example().x 
```

处理类时“分配”方法，其中 x 在初始化时分配。这意味着 x 会覆盖该方法。

这对于类级别的属性当然是不同的，因为它们是与方法同时分配的

```
class Example(object):
    x = 43

    def x(self):
        return "hi"

print Example().x 
```

表明该方法覆盖了属性。

# emacs - org-mode 在 emacs 中设置捕获位置

> ID：14747577
> 
> 赞同：0
> 
> 时间：2013-02-07T09:22:59.107
> 
> 标签：emacs, org-mode

我把它放在我的 .emacs 文件中：

```
(setq org-default-notes-file (concat org-directory "/notes.org"))
(define-key global-map "\C-cc" 'org-capture) 
```

但是当我打开emacs时，会发生这种情况：

> Symbol 作为变量的值是 void:org-directory

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:25:24.470

您首先需要设置`org-directory`类似的东西，`(setq org-directory "folder")`否则它将是未定义的并产生错误

# php - 编写 PDO 更新语句的正确方法

> ID：14747584
> 
> 赞同：2
> 
> 时间：2013-02-07T09:23:15.330
> 
> 标签：php, mysql, pdo

这是编写 PDO 更新语句的正确方法吗？我基于我在网上看到的一个教程，但是当它被 AJAX 触发时，它似乎根本没有做任何事情（即使 AJAX 请求在控制台中被记录为成功，也没有对数据库进行更新）：

```
$duedate = $_POST["duedate"];
$status = $_POST["status"];
$id = $_POST["id"];

$sql = "UPDATE pm_schedule SET duedate=?, status=? WHERE id=?";
$q = $pdo->prepare($sql);
$q->execute(array($duedate,$status,$id)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:44:04.337

是的，它是正确的，但是您需要告诉 PDO 在错误时引发错误。
所以，让你的连接代码是这样的：

```
$dsn = "mysql:host=$host;dbname=$db;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn, $user, $pass, $opt); 
```

并确保您可以看到 PHP 错误。所以，你会知道出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:35:45.137

```
$duedate = $_POST["duedate"];
$status = $_POST["status"];
$id = $_POST["id"];

try {
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = $pdo->prepare('UPDATE `pm_schedule` SET `duedate` = ?, `status` = ? WHERE `id` = ?');
    $sql->execute(array($duedate, $status, $id));
} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

`PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION`这可以帮助您找到错误

使用`try`and`catch`您可以获得`echo`一条错误消息，说明它在哪里以及为什么会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:01:28.847

这是了解PDO的非常好的[教程](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

正确的方法是：

```
// Named Placeholders
$sSql  = "UPDATE mytable SET FName = :FName, LName = :LName, Age = :Age, Gender = :Gender WHERE ID = :ID;";

// PDO prepared statement
$oSth = $oDbh->prepare($sSql);

// Bind Named Placeholders
$oSth->bindParam(":FName", $FName, PDO::PARAM_STR);
$oSth->bindParam(":LName", $LName, PDO::PARAM_STR);
$oSth->bindParam(":Age", $Age, PDO::PARAM_INT);
$oSth->bindParam(":Gender", $Gender, PDO::PARAM_STR);
$oSth->bindParam(":ID", $ID, PDO::PARAM_INT);

// Execute PDO with condition
if ($oSth->execute()) {
    // Get Affected row
    $iAffectedRows = $oSth->rowCount();
    $oSth->closeCursor();
    return $iAffectedRows;
} else {
    // PDO error, could also be caught in a try/catch statement
    $errorMsg = $oSth->errorInfo();
    error_log(json_encode($errorMsg));
} 
```

# php - FormHelper Html 模板定制

> ID：14747586
> 
> 赞同：0
> 
> 时间：2013-02-07T09:23:21.293
> 
> 标签：php, cakephp

我是 CakePHP 编程的新手，我对 FormHelper 的使用有疑问 -

如果我们在 View 中使用 FormHelper，它会输出一些 HTML 代码，所有这些代码都是在 CakePHP 中定义的（我认为）。问题是，所有这些代码都与我已经拥有的 HTML 模板不同，所以我需要更改 HTML 模板，包括 html 和 css 以符合 FormHelper 约定。对我来说，这是很多工作。

我在想，当我开始做网站的时候，通常我会从设计师那里得到所有的模板，但是设计师自己制作所有的html，他们根本不知道CakePHP的约定，所以我怎样才能让所有的模板更容易应用于蛋糕PHP？

自定义 FormHelper html 模板？还是干脆放弃他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:34:12.947

CakePHP 的表单助手的输出是非常可定制的，开箱即用。字段的基本格式如下所示：

```
<div class='input extra classes'>
<label for='control_id'>Label</label>
<input id='control_id' name='control_name'/>
<div class='error'>Validation error message</div>
</div> 
```

这几乎是您可以用来设计任何表单元素的最小标记。

您可以使用 Form::input() 的 'before'、'between'、'after' 等选项注入额外的标记；

当然，您不必使用表单助手（尽管制作表单需要花费大量精力）。您可以将表单的原始 HTML 传递到视图中。

这样做的问题是您不会看到验证失败时生成的错误消息，并且您还需要确保使用输入名称属性的确切命名约定，以确保您的表单适用于 Cake 的验证。

一个简单的方法是在你的页面中添加一个常规的 echo $this->Form->input() 并将生成中的 name 属性复制到你的 html 标记中。

话虽如此，我并不总是自己做标记，还没有收到来自第三方的标记，这些标记无法用 Cake 的 Form helper 和一些 CSS 来模仿。

如果您发布您尝试重新创建的表单的示例，我们可以更好地更详细地回答这个问题。

# c# - ConfigurationSection II 中的自定义 IEnumerable

> ID：14747589
> 
> 赞同：0
> 
> 时间：2013-02-07T09:23:26.283
> 
> 标签：c#, configuration, app-config

**原始问题和代码**：[ConfigurationSection 中的自定义 IEnumerable](https://stackoverflow.com/questions/14747123/c-sharp-customized-ienumerable-in-configurationsection)

推进解决方案和@Daniel Hilgarth的回答我已经改变了（app.config）这个：

```
<section name="Disk"
         type="ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection"/> 
```

对此：

```
 <section name="Disk"
             type="ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection,
             ConsoleApplication1_ConfigurationEnumerable"/> 
```

现在，我有另一个例外：

```
System.Configuration.ConfigurationErrorsException was unhandled
  HResult=-2146232062
  Message=Unrecognized element 'Path'. (C:\Users\blackberry\Desktop\ConsoleApplication1_ConfigurationEnumerable\ConsoleApplication1_ConfigurationEnumerable\bin\Debug\ConsoleApplication1_ConfigurationEnumerable.vshost.exe.config line 9)
  Source=System.Configuration
  BareMessage=Unrecognized element 'Path'.
  Filename=C:\Users\blackberry\Desktop\ConsoleApplication1_ConfigurationEnumerable\ConsoleApplication1_ConfigurationEnumerable\bin\Debug\ConsoleApplication1_ConfigurationEnumerable.vshost.exe.config
  Line=9
  StackTrace:
       at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
       at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
       at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
       at System.Configuration.ConfigurationManager.GetSection(String sectionName)
       at ConsoleApplication1_ConfigurationEnumerable.PathsConfigSection.GetConfig() in C:\Users\blackberry\Desktop\ConsoleApplication1_ConfigurationEnumerable\ConsoleApplication1_ConfigurationEnumerable\Disk.cs:line 63
       at ConsoleApplication1_ConfigurationEnumerable.Program.Main(String[] args) in C:\Users\blackberry\Desktop\ConsoleApplication1_ConfigurationEnumerable\ConsoleApplication1_ConfigurationEnumerable\Program.cs:line 9
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:45:30.763

尝试将以下属性添加到您的`PathsConfigSection.Paths`属性：

```
 [ConfigurationCollection(typeof(Paths), AddItemName = "Path")] 
```

它现在应该是这样的：

```
 [ConfigurationProperty("Paths")]
    [ConfigurationCollection(typeof(Paths), AddItemName = "Path")]
    public Paths Paths
    {
        get
        {
            var o = this["Paths"];
            return o as Paths;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:51:04.307

您的配置现在应该如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="Disk" type="ConsoleApplication1.DiskConfigSection, ConsoleApplication1"/>
  </configSections>
  <Disk>
    <Paths>
      <Path name="one" permission="1" />
      <Path name="two" permission="2" />
      <Path name="three" permission="3" />
    </Paths>
  </Disk>
</configuration> 
```

您的类现在应该如下所示：

```
using System.Configuration;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
        var t = DiskConfigSection.GetConfig();
        // Put a breakpoint on the line after this and put a watch on t
    }
}

public class Path : ConfigurationElement
{
    [ConfigurationProperty("name", IsRequired = true)]
    public string Name
    {
        get
        {
            return (string)this["name"];
        }
    }

    [ConfigurationProperty("permission", IsRequired = true)]
    public string Permission
    {
        get
        {
            return (string)this["permission"];
        }
    }
}

public class Paths : ConfigurationElementCollection
{
    public Path this[int index]
    {
        get
        {
            return BaseGet(index) as Path;
        }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new Path();
    }
    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((Path)element).Name;
    }
}

public class DiskConfigSection : ConfigurationSection
{
    public static DiskConfigSection GetConfig()
    {
        var b = ConfigurationManager.GetSection("Disk") != null;
        return b ? (DiskConfigSection)ConfigurationManager.GetSection("Disk") : new DiskConfigSection();
    }

    [ConfigurationProperty("Paths")]
    [ConfigurationCollection(typeof(Paths), AddItemName = "Path")]
    public Paths Paths
    {
        get
        {
            var o = this["Paths"];
            return o as Paths;
        }
    }
}
} 
```

我已经在控制台应用程序中进行了测试，并且配置已完全加载。

# php - 通过邮件 mime php 来自附件的文件名

> ID：14747591
> 
> 赞同：0
> 
> 时间：2013-02-07T09:23:28.907
> 
> 标签：php, email, mime

我在通过 mime 邮件发送的附件中使用长文件名时遇到问题。

当我使用短名称时，例如：`rapport.pdf`它工作正常。

但是当我开始使用长文件名时：`rapport_2013_rapport_2013_rapport_2013_rapport_2013_rapport_2013_.pdf`文件在将文件发送到电子邮件时获得一个新名称（无标题附件`xxxxx.pdf`）。

有没有办法来解决这个问题？我已经尝试将编码更改为内联或附件。这是我使用的代码：

```
 $mime = new Mail_Mime();
 $mime->setHtmlBody($htmlMessage);
 $mime->addAttachment($pdfcontent, 'application/pdf', 'factuur_QW'.$fcnr.'.pdf', false, 'base64');
 $body = $mime->get();
 $hdrs = $mime->headers($headers);
 $mail = &Mail::factory('mail');
 $mail->send($to, $hdrs, $body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-08T12:11:27.987

我偶然发现了这篇文章：[发送附件时文件名的最大长度是否有限制？](https://community.oracle.com/thread/3773901)

这表明如果对它们进行适当编码，您可以拥有更长的文件名。尝试：

```
$mime->addAttachment($pdfcontent, 'application/pdf', 'factuur_QW'.$fcnr.'.pdf', false, 'base64', 'attachment', '', '', '', 'encoded-word', null, '=?utf-8?B' . base64_encode('factuur_QW'.$fcnr') . '?=', null); 
```

根据指定的 mime 类型，“.pdf”将添加到附件文件名中。如果字符在 Ascii 字符集中，也不需要使用 base64 对附件名称进行编码。在这种情况下，替换 '=utf-8?B?' 用'=utf-8？Q？'。

# java - 获取路径/文件名的路径，但文件没有扩展名

> ID：14747594
> 
> 赞同：1
> 
> 时间：2013-02-07T09:23:36.760
> 
> 标签：java, path

我可以有以下带有路径的文件名：

/somepath/文件

该文件没有扩展名，因此在 Java 中 getPath 最终返回整个路径和文件名。假设路径/文件名中的最后一件事始终是文件名，我该如何提取路径？最简单的解决方案就是寻找最后一个正斜杠。但是有一个内置的 API 可以得到它吗？

**编辑：**错误。我的意思是如何提取路径（而不是文件名）。对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:38:29.190

使用 Java SE 7：

```
Path path = Paths.get("/somepath/file");
String fileName = path.getFileName().toString();

Path parentPath = path.getParent(); 
```

**编辑：**

注意：根据您的操作，请考虑不要对根目录（此处：“/”）和分隔符（此处：“/”）进行硬编码，并确保代码与平台无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:28:43.187

```
 File file = new File("/somepath/file");
     file.getName(); 
```

编辑：如果你想要路径试试这个

```
 file.getCanonicalPath(); 
```

您也可以使用文件对象的属性来提取各种类型的文件相关数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:38:15.750

使用 getParent()

`File file = new File("/somepath/file"); file.getParent();`

这会给你“/somepath”回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:28:46.163

使用`lastIndexOf()`和`substring()`

```
System.out.println(fileObj.getPath().substring(0, f.getPath().lastIndexOf("/")); 
```

编辑：刚刚发现存在，`getParent()`它将直接为您提供该文件的目录。

```
System.out.println(fileObj.getParent()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:29:03.733

在课堂上尝试`getName()`方法`File`。

# three.js - three.js - 立方体的背面纹理垂直翻转

> ID：14747601
> 
> 赞同：0
> 
> 时间：2013-02-07T09:23:46.860
> 
> 标签：three.js

我目前正在尝试制作带有纹理的旋转立方体。我还希望立方体通过使用控件（在鼠标悬停时旋转立方体的箭头图像）在它的 x 轴和 y 轴（来回）上旋转。当它在 x 轴上旋转时，立方体的背面是倒置的。

我知道这与 UV 映射的工作方式有关。所以我试图在多维数据集初始化时纠正这个问题，效果很好。但是当我尝试在它的 y 轴上旋转立方体时，纹理又是颠倒的。所以我了解到我必须根据旋转请求动态更改纹理方向。

但这对我不起作用。在多维数据集初始化后，我发现无法更改“faceVertexUvs [0] [5]”。尝试在初始化时为立方体几何体设置“needsUpdate”没有帮助。

希望我说清楚了。有什么办法可以解决这个问题吗？

在此先感谢迈克尔

为了更好地说明我的问题：我在这里发布我的源代码。

它不能在 JsFiddle 中演示，因为不允许使用来自另一个域的纹理图像（并且 CORS 不起作用）。只需复制粘贴以下代码并将其保存为本地“test.html”。纹理图像可在此处获得：http: [//www.mikelmade.de/cors/t.png](http://www.mikelmade.de/cors/t.png)。它应该与“test.html”在同一目录中。在支持 WebGL 的浏览器中打开“test.html”，然后将鼠标移到“up”上，您应该会明白我的意思。

```
<html><head><script src="jquery.js"></script></head><body>
<script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script>
<script src="https://raw.github.com/mrdoob/three.js/master/examples/js/libs/stats.min.js"> </script>

<script>
        var cubeGeo;
        var materials = [];
        var container, stats;
        var camera, scene, renderer;
        var cube, plane;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();
        function init() {
            container = document.createElement( 'div' );
            document.body.appendChild( container );

            var info = document.createElement( 'div' );
            info.style.position = 'absolute';
            info.style.top = '10px';
            info.style.width = '100%';
            info.style.textAlign = 'center';
            info.innerHTML = 'Drag to spin the cube';
            container.appendChild( info );

            camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.y = 150;
            camera.position.z = 500;

            scene = new THREE.Scene();

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    // add directional light source
    var directionalLight = new THREE.DirectionalLight(0xEEEEEE);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

            // Cube
            for ( var i = 0; i < 6; i ++ ) {
                var img = new Image();
                img.src = 't.png';
                var tex = new THREE.Texture(img);
                img.tex = tex;
                img.onload = function() { this.tex.needsUpdate = true; };
                var mat = new THREE.MeshLambertMaterial({map: tex});
                materials.push(mat);
            }

            cubeGeo = new THREE.CubeGeometry(200,200,200,1,1,1);
            cubeGeo.uvsNeedUpdate = true;
            cubeGeo.dynamic = true;

            cube = new THREE.Mesh( cubeGeo, new THREE.MeshFaceMaterial( materials ) );

            cube.position.y = 150;
            scene.add( cube );

            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize( window.innerWidth, window.innerHeight );

            // enable shadows on the renderer
            renderer.shadowMapEnabled = true;
            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );
        }

        function onDocumentMouseDown( event ) {
            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );

            mouseXOnMouseDown = event.clientX - windowHalfX;
            targetRotationOnMouseDown = targetRotation;
        }

        function onDocumentMouseMove( event ) {
            mouseX = event.clientX - windowHalfX;
            targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;
        }

        function onDocumentMouseUp( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentMouseOut( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentTouchStart( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;
            }
        }

        function onDocumentTouchMove( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
            }
        }

        function animatex(dir) {
            cubeGeo.faceVertexUvs[0][5] = [new THREE.UV(1, 0), new THREE.UV(1, 1), new THREE.UV(0, 1), new THREE.UV(0, 0)];
            animate2(dir);
        }

        var anim = 0;
        function animate2(dir) {
                requestAnimationFrame(function() {
                    cubeGeo.faceVertexUvs[0][5] = [new THREE.UV(1, 0), new THREE.UV(1, 1), new THREE.UV(0, 1), new THREE.UV(0, 0)];
                    if(anim == 1) {
                        animate2(dir);
                    }
                });
                render2();
                stats.update();
        }

        function render2() {
            cube.rotation.x = cube.rotation.x+0.06;
            renderer.render( scene, camera );
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
            stats.update();

        }

        function render() {
            cube.rotation.y += ( targetRotation - cube.rotation.y ) * 0.05;
            $('#test').html(cube.rotation.y);
            renderer.render( scene, camera );
        }

    </script>
    <div id="up" style="position:absolute;z-index:500000;left:100px;top:20px;" class="nav">up</div>
    <div id="down" style="position:absolute;z-index:500000;left:100px;top:40px;" class="nav">down</div>
    <div id="left" style="position:absolute;z-index:500000;left:100px;top:60px;" class="nav">left</div>
    <div id="right" style="position:absolute;z-index:500000;left:100px;top:80px;" class="nav">right</div>
    <div id="test" style="position:absolute;z-index:500000;left:100px;top:100px;"> </div>
    <script>
        var _interval = 0;
        $(document).ready(function(){
        $('.nav').mouseover(function() {
            switch($(this).prop('id')) {
                case 'up':
                    anim = 1;
                    animatex('up');
                break;
            }
        });

        $('.nav').mouseout(
            function () {
                anim = 0;
            }
        );
        });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:34:14.133

cubeGeo 是一个几何体，而不是一个网格，所以设置是。

```
cubeGeo.uvsNeedUpdate = true; 
```

和一把小提琴

[http://jsfiddle.net/crossphire/JebXL/2/](http://jsfiddle.net/crossphire/JebXL/2/)

这是修改后的示例

```
<html><head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>  
</head><body>
<script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script>
<script src="https://raw.github.com/mrdoob/three.js/master/examples/js/libs/stats.min.js"> </script>

<script>
        var cubeGeo;
        var materials = [];
        var container, stats;
        var camera, scene, renderer;
        var cube, plane;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();
        function init() {
            container = document.createElement( 'div' );
            document.body.appendChild( container );

            var info = document.createElement( 'div' );
            info.style.position = 'absolute';
            info.style.top = '10px';
            info.style.width = '100%';
            info.style.textAlign = 'center';
            info.innerHTML = 'Drag to spin the cube';
            container.appendChild( info );

            camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.y = 150;
            camera.position.z = 500;

            scene = new THREE.Scene();

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    // add directional light source
    var directionalLight = new THREE.DirectionalLight(0xEEEEEE);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

            // Cube
            for ( var i = 0; i < 6; i ++ ) {
                var img = new Image();
                img.src = 'test.png';
                var tex = new THREE.Texture(img);
                img.tex = tex;
                img.onload = function() { this.tex.needsUpdate = true; };
                var mat = new THREE.MeshLambertMaterial({map: tex});
                materials.push(mat);
            }

            cubeGeo = new THREE.CubeGeometry(200,200,200,1,1,1);
            cubeGeo.uvsNeedUpdate = true;
            cubeGeo.dynamic = true;

            cube = new THREE.Mesh( cubeGeo, new THREE.MeshFaceMaterial( materials ) );

            cube.position.y = 150;
            scene.add( cube );

            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize( window.innerWidth, window.innerHeight );

            // enable shadows on the renderer
            renderer.shadowMapEnabled = true;
            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );
        }

        function onDocumentMouseDown( event ) {
            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );

            mouseXOnMouseDown = event.clientX - windowHalfX;
            targetRotationOnMouseDown = targetRotation;
        }

        function onDocumentMouseMove( event ) {
            mouseX = event.clientX - windowHalfX;
            targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;
        }

        function onDocumentMouseUp( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentMouseOut( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentTouchStart( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;
            }
        }

        function onDocumentTouchMove( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
            }
        }

        function animatex(dir) {
            cubeGeo.faceVertexUvs[0][5] = [new THREE.UV(1, 0), new THREE.UV(1, 1), new THREE.UV(0, 1), new THREE.UV(0, 0)];
            cubeGeo.uvsNeedUpdate = true;
            animate2(dir);
        }

        var anim = 0;
        function animate2(dir) {
                requestAnimationFrame(function() {
                    cubeGeo.faceVertexUvs[0][5] = [new THREE.UV(1, 0), new THREE.UV(1, 1), new THREE.UV(0, 1), new THREE.UV(0, 0)];
                    cubeGeo.uvsNeedUpdate = true;
                    if(anim == 1) {
                        animate2(dir);
                    }
                });
                render2();
                stats.update();
        }

        function render2() {
            cube.rotation.x = cube.rotation.x+0.06;
            renderer.render( scene, camera );
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
            stats.update();

        }

        function render() {
            cube.rotation.y += ( targetRotation - cube.rotation.y ) * 0.05;
            $('#test').html(cube.rotation.y);
            renderer.render( scene, camera );
        }

    </script>
    <div id="up" style="position:absolute;z-index:500000;left:100px;top:20px;" class="nav">up</div>
    <div id="down" style="position:absolute;z-index:500000;left:100px;top:40px;" class="nav">down</div>
    <div id="left" style="position:absolute;z-index:500000;left:100px;top:60px;" class="nav">left</div>
    <div id="right" style="position:absolute;z-index:500000;left:100px;top:80px;" class="nav">right</div>
    <div id="test" style="position:absolute;z-index:500000;left:100px;top:100px;"> </div>
    <script>
        var _interval = 0;
        $(document).ready(function(){
        $('.nav').mouseover(function() {
            switch($(this).prop('id')) {
                case 'up':
                    anim = 1;
                    animatex('up');
                break;
            }
        });

        $('.nav').mouseout(
            function () {
                anim = 0;
            }
        );
        });
        </script>
    </body>
</html>

mesh.geometry.uvsNeedUpdate = true; 
```

此链接可能会有所帮助。 [https://github.com/mrdoob/three.js/issues/667](https://github.com/mrdoob/three.js/issues/667)

# c# - 需要编辑 xsd 以获得特定格式

> ID：14747616
> 
> 赞同：1
> 
> 时间：2013-02-07T09:24:21.750
> 
> 标签：c#, .net, serialization, xsd, xsd2code

我正在使用 xsd2code 而我的 xsd 有这个

```
<xs:element name="TransactionRequest">  
<xs:complexType>
  <xs:sequence>
    <xs:element name="Records">
      <xs:complexType>
        <xs:sequence>

          <xs:element name="RequestRecord" minOccurs="1" maxOccurs="5">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="Program" type="xs:string" minOccurs="1" maxOccurs="1"/>
                <xs:element name="Key" type="xs:string" minOccurs="1" maxOccurs="1"/>
                <xs:element name="Data" type="xs:string" minOccurs="1" maxOccurs="1"/>
              </xs:sequence>
            </xs:complexType>              
          </xs:element>

        </xs:sequence>
      </xs:complexType>
    </xs:element>

  </xs:sequence>
</xs:complexType>
</xs:element> 
```

我想要实现的是这个

```
[DataContractAttribute(Name = "TransactionRequest")]
public partial class TransactionRequest
{
    [DataMember(IsRequired = true, EmitDefaultValue = false)]
    public RecordsType Records { get; set; }

    [CollectionDataContractAttribute(Name = "TransactionRequest.RecordsType", ItemName = "RequestRecord")]
    public class RecordsType : List<RequestRecord> { }
}

[DataContractAttribute(Name = "RequestRecord")]
public partial class RequestRecord
{
    [DataMemberAttribute()]
    public string Program { get; set; }
    [DataMemberAttribute()]
    public string Key { get; set; }
    [DataMemberAttribute()]
    public string Data { get; set; }
} 
```

但我得到的是这个

```
[DataContractAttribute(Name = "TransactionRequest")]
public partial class TransactionRequest
{
    [XmlArrayItemAttribute("RequestRecord", IsNullable = false)]
    [DataMemberAttribute()]
    public List<TransactionRequestRequestRecord> Records { get; set; }

    public TransactionRequest()
    {
        this.Records = new List<TransactionRequestRequestRecord>();
    }
}

[DataContractAttribute(Name = "TransactionRequestRequestRecord")]
public partial class TransactionRequestRequestRecord
{
    [DataMemberAttribute()]
    public string Program { get; set; }
    [DataMemberAttribute()]
    public string Key { get; set; }
    [DataMemberAttribute()]
    public string Data { get; set; }
} 
```

我需要对 xsd 进行哪些更改才能获得我想要的东西？

# java - 停止调用 JNI 函数的 Java 线程

> ID：14747624
> 
> 赞同：5
> 
> 时间：2013-02-07T09:24:36.247
> 
> 标签：java, android, multithreading, java-native-interface, native

在这里，我想*停止我的线程或杀死我*在 Java 层上创建的线程，并且该线程正在调用 JNI 函数。有时根据我的应用程序要求，我必须在某些条件下停止这个*JNI 函数的执行*，否则不会。

```
new Thread(new Runnable() {
    @Override
    public void run() {
         // My jni function call, It calls my JNI layer C function.
         }
   } 
```

现在，当这个线程执行开始并且它在 JNI 级别工作时，我不必担心，但是在某些情况下，我想从其他类或方法中停止这个 JNI 工作，那么我该如何停止这个线程。

**注意：**这里我的线程也没有while循环，所以我也不能检查一些全局标志变量。

那么有没有人知道如何在没有while循环的情况下调用任何JNI函数时杀死一个线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T14:44:48.370

如果线程正在执行本机代码，则无法**安全地中断线程。**即使您的线程有一个事件循环，您也需要等到它完成本机调用。对您的代码一无所知，我猜您有一个长时间运行的本机调用，您不希望它阻塞主线程，因此您为该调用创建了一个单独的线程。您无法**安全地**中断单个本地调用。这里没有灵丹妙药。无论如何，您都需要更改代码，我的建议是：

*   将您的单个长本机调用分解为一系列短调用并在 Java 端运行事件循环
*   在本机端内部分解本机调用并在本机端运行事件循环。您的本机界面将需要另一种方法来设置中断标志。

[`Thread.interrupt()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#interrupt%28%29)不会帮助您，因为“调用本机函数”不属于 Javadoc 中指定的任何可中断操作。Java 线程将继续运行，只会*设置它的中断状态*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:29:53.393

最好不要突然杀死一个线程。C 函数分配的资源可能不会被释放。

如果 C 函数正在等待某事，您可以触发条件返回并检查错误代码。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-07T09:59:11.973

代码是原生的“通过 JNI 调用”或纯 Java 并没有什么特别之处，所有 IO 代码都使用 JNI 代码，您可以使用普通的 Java 线程方法停止它。

只需使用`Thread.Stop() or Thread.Inturrupt()`

# php - php头：关于双链接

> ID：14747627
> 
> 赞同：1
> 
> 时间：2013-02-07T09:24:43.020
> 
> 标签：php

我有一个指向 pageA 的链接。我希望用户通过 pageA 在唯一链接中转到 pageB。这怎么可能？要通过单击链接转到 pageA，我执行以下操作：

```
<?php header('Location: http://www.pageA.com/'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:31:13.883

我认为您需要`<?php header('Location: http://www.pageB.com/'); ?>`在 A 页内写

# c# - 使用 LINQ 自动转换

> ID：14747633
> 
> 赞同：1
> 
> 时间：2013-02-07T09:24:52.820
> 
> 标签：c#, linq

我的 VS2010 使用 ReSharper 提示转换`foreach`为 LINQ。它从

```
foreach (var item in quotePrice.ExtraServiceBreakdown)
{
    hazmatRate = (quoteRequest.IsHazMat && item.Id == VitranHazmatCode) ?   
                                                 item.Cost : hazmatRate;
} 
```

到

```
hazmatRate = quotePrice.ExtraServiceBreakdown.Aggregate(
                 hazmatRate, (current, item) => 
                     (quoteRequest.IsHazMat && item.Id == VitranHazmatCode) ? 
                         item.Cost : current); 
```

我这里有两个问题，

1.  是什么`current`意思？那是指向变量`hazmatRate`吗？
2.  `Aggregate`实际上做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:30:16.113

1.  当前确实指向您的危险品
2.  [LINQ 聚合算法解释](https://stackoverflow.com/questions/7105505/linq-aggregate-algorithm-explained)

而且我认为您需要按照蒂姆的评论中所述进行操作：

```
 hazmatRate += (quoteRequest.IsHazMat && item.Id == VitranHazmatCode) ?   item.Cost : hazmatRate; 
```

但在这种情况下，我会通过在您的函数之前声明的基本费率来更改“hazmatRate”。否则，您将使用它所包含的价值来增加您的价值，然后使其呈指数增长

# java - 如何在不使用复选框或单选按钮的情况下将表格中选择的数据发送到 Struts2 中？

> ID：14747638
> 
> 赞同：5
> 
> 时间：2013-02-07T09:25:20.080
> 
> 标签：java, javascript, jsp, struts2

我有一个使用 struts:iterator 标签显示的表格。表值包含在`ArrayList`. 我在列表的每一行上都有一个编辑按钮。当用户单击编辑按钮时，该行的内容应发送到操作和相应的结果页面。我不允许使用复选框和单选按钮。

是否有一些`param`标签我可以使用将该行设置为参数并将其取回结果页面。或者有没有办法在会话中设置该行并从会话中取回？我如何在 Struts2 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:45:26.970

您不应该将整行设置为参数，您只需设置`id`行的参数即可。然后，您可以在需要保存时再次检索该记录。要设置参数，您可以使用这样的链接

```
<s:a action="edit" value="Edit"><s:param name="id" value="%{#row[ID]}"/></s:a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:23:55.133

使用以下代码，您可以将每行的值设置为 bean，例如，当您单击删除链接时，我们可以使用`<s:bean/>`实例化 bean 类的对象，`<s:param/>`并可用于将值设置为 bean

```
<s:iterator value="contactList" var="contactBean">   
<s:url id="deleteUrl" action="deleteLink">
        <s:bean name="net.viralpatel.contact.model.Contact"></s:bean>
        <s:param name="id" value="#contactBean.id"></s:param>
        <s:param name="firstName" value="#contactBean.firstName"></s:param>
    </s:url>
        <s:a href="%{deleteUrl}">
             Delete
        </s:a>
</s:iterator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:49:13.587

您可以使用锚标记在此行上尝试一些东西

```
<s:iterator value="list">
<s:url action="companyedit" var="listUrl" >
    <s:param name="id"><s:property value="id" /></s:param>
    <s:param name="operation">Edit</s:param>
</s:url>

    <s:a href="%{listUrl}"><s:property value="companyName"/></s:a>
    <s:property value="companyType" />
    .
    .
    .
</s:iterator> 
```

希望这可以帮助

# c# - 如何从单独的 C# 类库更新 WebControls

> ID：14747640
> 
> 赞同：0
> 
> 时间：2013-02-07T09:25:23.120
> 
> 标签：c#

需要从单独的 c# 类库更新 Web 控件。例如网格数据源必须从类库中更新。

在 WebForm1.aspx 我有以下代码

```
<body>
<form id="form1" runat="server">
<div>
    <table>
    <tr>
        <td>
            <div>
              <table width="100%" cellpadding="0" cellspacing="0">
                <tr>
                    <td>
                        <table>
                            <tr>
                                <td>Search</td>
                                        <td>
                                           <span>
                                           <asp:TextBox ID="txtSearchBox" EnableTheming="false" AutoPostBack="True"  
                                                runat="server" ontextchanged="txtSearchBox_TextChanged" ></asp:TextBox>
                                           </span>
                                           <span>
                                           <asp:Button ID="btnPre" runat="server" Text="<" CssClass="btnPrevious" 
                                                EnableTheming="false" onclick="btnPre_Click" />
                                           </span>  
                                           <span>
                                               <asp:TextBox ID="txtPage_Index" EnableTheming="false" CssClass="textboxTiny" AutoPostBack="True"  
                                                runat="server" ontextchanged="txtPage_Index_TextChanged" ></asp:TextBox></span>
                                               <span>
                                            <asp:Button ID="btnNext" runat="server" Text=">" CssClass="btnNext" 
                                                EnableTheming="false" onclick="btnNext_Click" />
                                         </span>
                                        </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                   <td colspan="3" style="margin-left: 40px">  
                     <asp:GridView ID="grdSource" runat="server" class="grid" Width="100%" 
                    AutoGenerateColumns="False" AllowPaging="true">
                    <Columns>
                        <asp:TemplateField>
                            <ItemStyle Width="20px" />
                            <ItemStyle />
                            <ItemTemplate>
                                   <asp:CheckBox ID="chkSelectFeesType" runat="server" />
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="name" HeaderText="Name"/>
                   </Columns>
                    <HeaderStyle CssClass="gridheader" />
                    <RowStyle CssClass="gridrow" />
               </asp:GridView>
                   </td>
               </tr>

             </table>
            </div>
        </td>
    </tr>

</table>
</div>
</form> 
```

在后面的代码中

```
public partial class WebForm1 : System.Web.UI.Page
{
    BO.Search search = new Search();
    List<Employee> employees = new List<Employee>();
    System.Web.UI.Page page = System.Web.HttpContext.Current.Handler as   
                                                                System.Web.UI.Page;

    protected void Page_Load(object sender, EventArgs e)
    {

        System.Web.UI.Page page = System.Web.HttpContext.Current.Handler as System.Web.UI.Page;

        employees.Add(new BO.Employee("AAA", 01));
        employees.Add(new BO.Employee("BBB", 02));
        employees.Add(new BO.Employee("CCC", 03));
        employees.Add(new BO.Employee("DDD", 04));
        employees.Add(new BO.Employee("EEE", 05));

    }

    protected void btnPre_Click(object sender, EventArgs e)
    {
       search.PageSearch(ref grdSource, employees, ref page);
    }
    protected void txtPageIndex_TextChanged(object sender, EventArgs e)
    {
        search.PageSearch(ref grdSource, employees, ref page);
    }
    protected void btnNext_Click(object sender, EventArgs e)
    {
        search.PageSearch(ref grdSource, employees, ref page);
    }
    } 
```

在类库类 Search.cs

```
public class Search
{

    public void PageSearch<T>(ref GridView grdSource, List<T> list, ref Page page)
    {
        TextBox txtSearchBox = (TextBox)page.FindControl("txtSearchBox");
        TextBox txtPage_Index = (TextBox)page.FindControl("txtPage_Index");

        if (grdSource.PageIndex > 0)
        {
            if (txtSearchBox.Text.Length > 0)
            {
                grdSource.DataSource = list.FindAll(i => i.Equals(txtSearchBox.Text.ToUpper()));
            }
            else
            {
                grdSource.DataSource = list;
            }
            grdSource.PageIndex = grdSource.PageIndex - 1;
        }
        grdSource.DataSource = list;
        grdSource.DataBind();

        txtPage_Index.Text = grdSource.PageIndex.ToString();
    }
} 
```

我有不止一种形式的相同搜索和分页功能。所以我创建了 PageSearch() 函数来处理所有页面。但问题是我无法从 search.cs 类中绑定网格视图或文本框值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:55:29.753

通过以下链接了解如何将控件公开给其他类，这可能是您想要的：

[ASP.NET 向其他类公开控件](https://stackoverflow.com/questions/13801106/asp-net-expose-controls-to-other-class)

# javascript - Phantom.js 是否捕获所有 AJAX？

> ID：14747643
> 
> 赞同：26
> 
> 时间：2013-02-07T09:25:29.370
> 
> 标签：javascript, backbone.js, phantomjs

我有一个拥有大量 AJAX 的骨干应用程序。（每个页面加载会导致 5-6 次 ajax 调用）因为我在这些视图中有很多视图和内部视图，

如果我运行 Phantom.js，我能得到最终的 html 结果吗？

最终结果是用户在我的所有 ajax 调用运行后看到的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-10T15:27:57.637

PhamtonJs 是一个带有 JavaScript API 的无头 WebKit。在爬取页面时，PhatomJs 会下载图片、js、css 等所有依赖请求……它还会执行 JS 和 ajax 调用。然而，当页面完成加载时调用 onLoaded 回调，而不是在没有挂起请求时调用。所以，你必须为此使用一个技巧。

有两种方法可以解决这个问题：

*   等到你的页面（一个元素）中的“某些东西”有效地改变了。最好的例子是[waitFor.js](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)
*   等待几秒钟，直到没有收到任何请求。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-10T15:07:30.183

Phantom.js 能够在您的页面中运行 javascript，所以这应该可以工作。有[一篇文章](http://backbonetutorials.com/seo-for-single-page-apps/)描述了如何使用 Phantom.js 为爬虫提供漂亮的 javascript 网站版本。

一定要给 Phantom.js 足够的时间来完成 ajax 调用，正如这个[线程所描述](https://groups.google.com/forum/?fromgroups=#!topic/phantomjs/aac6OVGxG-w)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-26T18:22:43.153

您可以将 $.active 与 waitFor.js 脚本一起使用，该脚本返回与服务器的活动连接数，我们需要等待它为 0 才能完成所有请求。

更多信息：[jQuery.active 函数](https://stackoverflow.com/questions/3148225/jquery-active-function)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-13T04:21:05.113

如果您可以访问网站的 javascript 代码，除此之外`waitFor()`，我认为您可以使您的 ajax 请求同步。它有时更简单，更准确。

# sql - 通过分组限制选择

> ID：14747645
> 
> 赞同：0
> 
> 时间：2013-02-07T09:25:36.317
> 
> 标签：sql, postgresql

假设，我有一张名为`events`：

```
CREATE TABLE events (
  id      integer,
  dtstart timestamptz);

INSERT INTO events VALUES 
(4,'2010-06-29 04:00:00'),
(5,'2010-06-29 13:00:00'),
(6,'2011-07-01 20:00:00'),
(7,'2012-07-03 14:30:00'); 
```

有两个输入参数`dtfrom`，`days`我需要从`events`表事件中选择`dtstart >= dtfrom`，其中`groupby(date(dtstart)) <= days`。

例如，使用上表`dtfrom='2010-06-29'`和`days=2`我应该得​​到这些事件：

```
(4,'2010-06-29 04:00:00'),
(5,'2010-06-29 13:00:00'),
(6,'2011-07-01 20:00:00'), 
```

我现在明白了：

```
SELECT DATE(dtstart) AS _dtstart
FROM events
WHERE dtstart > '2010-06-29 00:00:00'
GROUP BY _dtstart
ORDER BY _dtstart
LIMIT 2; 
```

但我想避免分组。

`days`我需要获取未来几天存在的事件。天数不应包括没有事件的天数。

换句话说：获取在 '2010-06-29 00:00:00' 之后开始的事件，但它们开始的不同日期的数量不应超过 2（或 10，或...）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:41:18.580

我假设，那`dtfrom`是`timestamptz`类型并且`days`是整数。

如果我正确理解您的问题，这就是您所需要的（也在[SQL Fiddle](http://sqlfiddle.com/#!12/baa11/6)上）：

```
WITH r AS (
  SELECT '2010-06-29 00:00:00'::timestamptz dtfrom,
         2 days)
SELECT *
  FROM events e, r
 WHERE e.dtstart >= r.dtfrom
   AND date(e.dtstart) < date(r.dtfrom + ((r.days+1)||' days')::interval); 
```

1.  我使用`WITH`查询来指定输入参数；
2.  使用`timestamptz`比较来开始范围，因为可能会指定`08:00`Jun/29 并且记录 #4 没有进入范围；
3.  使用`date`比较结束范围，在指定数字上增加 1 天，因为`date()`转换将中断小时。

* * *

[此查询](http://sqlfiddle.com/#!12/4214e/2)是否产生所需的输出？

```
SELECT *
  FROM events e
 WHERE e.dtstart >= '2010-06-29 00:00:00'
 ORDER BY e.dtstart
 LIMIT 3; 
```

# javascript - 限制货币长度和模式的正则表达式

> ID：14747650
> 
> 赞同：0
> 
> 时间：2013-02-07T09:25:52.173
> 
> 标签：javascript, primefaces

我想限制用户在 primefaces 输入文本中输入无效数量。最大整数和小数位数长度在运行时是已知的。我正在尝试使用 JavaScript 正则表达式来实现这一点。

```
 var pattern =/^\d{0,3}?[\.]?\d{1,3}$/;
    if (pattern.test(amount)) {
        return true;
    }else {
        console.log('rgx Failed');
        return false;
    } 
```

对于此示例，我将 3 视为最大整数和小数长度。
整数部分的长度可以是 0 到 3，小数部分应至少为一位数，最大为 3。但上面提到的 javascript 不起作用，整数部分允许 7 位数字。

我正在使用 inputText onKeyDown 事件调用此脚本，以便我可以检查每个按键并限制仅输入有效数量。

有效金额 : 123.123, 12.1, 1.12, .123, 1.3, .1234 等 无效金额 : 123\. , 1234 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:28:14.343

一个快速的解决方案是：

```
/^\d{0,3}\.\d{1,3}$/ 
```

要匹配更新的要求：

```
pattern.replace(/^(\d{0,3})\.?(\d{0,3})$/, function(m, g1,g2) {
    return (g1 || 0) + '.' + (g2 || 0);
}) 
```

只要输入限制为 6 位数字和可选的小数位，就可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:47:29.530

关于什么：

`/^(\d{1,3}\.\d{1,3})|(\.\d{1,3})|(\d{1,3})$/`

它不干净，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:48:27.897

试试这个....(^\d{1,3}([.]\d{1,3})?)$|(^\d{0,3}$)

更好的方法是使用前瞻？= 或负前瞻？！

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:00:12.717

我使用了 primefaces-extensions inputNumber 组件，它满足了我所有的要求和条件。

最大值=9999.999"/>

Inputnumber 接受，整数部分为 4 位，小数部分为 3 位。格式化和附加零由组件本身处理。

# c# - 如果在 gridview 中选中复选框，则验证下拉列表

> ID：14747653
> 
> 赞同：0
> 
> 时间：2013-02-07T09:26:07.583
> 
> 标签：c#, asp.net

```
<asp:GridView ID="gvAttributes" runat="server" 
              AutoGenerateColumns="false" EnableModelValidation="True" 
              CssClass="GridViewStyle" onrowdatabound="gvAttributes_RowDataBound">
  <Columns>
    <asp:TemplateField HeaderText="Select">
      <ItemTemplate>
        <asp:CheckBox ID="cbxAttributescheck" runat="server" Text=''
        <%# Eval("AttributeName") %> AutoPostBack="true" OnCheckedChanged="cbxAttributescheck_CheckedChanged"/>
        <asp:HiddenField ID="hdnAttributeValue" runat="server" Value=''
        <%# Eval("AttributeID") %>' />
        <asp:Label ID="lblDelete" runat="server" Text=''
          <%# Eval("AttributeID") %>'   Visible="false"></asp:Label>
      </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Data Type" >
      <ItemTemplate>
        <asp:DropDownList ID="ddlAttributesDataType" runat="server">
        </asp:DropDownList>
        <asp:RequiredFieldValidator ID="rfvAttributeType" runat="server" 
                                    ErrorMessage="*"  Enabled="false" 
                                    ControlToValidate="ddlAttributesDataType" InitialValue="0">
        </asp:RequiredFieldValidator>
      </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Allow Nulls" >
      <ItemTemplate>
        <asp:CheckBox ID="cbxAttributesisnull" runat="server" />
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView>

protected void cbxAttributescheck_CheckedChanged(object sender, EventArgs e)
{
    CheckBox cbx = (CheckBox)sender;
    string CurrentCbxId = ((CheckBox)sender).ClientID;
    foreach (GridViewRow Row in gvAttributes.Rows)
    {
        if (((CheckBox)Row.FindControl("cbxAttributescheck")).ClientID.Equals(CurrentCbxId) && cbx.Checked)
        {
            RequiredFieldValidator rfvAttributeType = (RequiredFieldValidator)Row.FindControl("rfvAttributeType");
            rfvAttributeType.Enabled = true;
        }
    }
} 
```

我已经采用了上面的网格视图，我想在选中复选框时启用下拉所需的字段验证器。我想不通过 JavaScript 来做这个服务器端。我试过但无法解决。我尝试在选中复选框时启用验证器，否则它将被禁用。我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:49:52.847

刚刚修改了复选框更改事件并将验证组分配给复选框和下拉列表。

```
protected void cbxAttributescheck_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox cbx = (CheckBox)sender;
        string CurrentCbxId = ((CheckBox)sender).ClientID;
        foreach (GridViewRow Row in gvAttributes.Rows)
        {
            RequiredFieldValidator rfvAttributeType = (RequiredFieldValidator)Row.FindControl("rfvAttributeType");
            if (((CheckBox)Row.FindControl("cbxAttributescheck")).ClientID.Equals(CurrentCbxId))
            {
                rfvAttributeType.Enabled = cbx.Checked;
            }            
        }
    } 
```

# c# - 关闭 Excel 文件时，外部表不是预期格式

> ID：14747655
> 
> 赞同：2
> 
> 时间：2013-02-07T09:26:16.133
> 
> 标签：c#, oledb, import-from-excel

我的导入适用于 .xls 文件，但不适用于我在 Excel 2010 中创建的 .xlsx，除非它已打开。

我的代码如下所示：

```
public static DataSet Sheets(string filePath, bool header)
        {
            DataSet dsResults = new DataSet();
            string hasHeader = header ? "YES" : "NO";

            OleDbConnectionStringBuilder sbConnection = new OleDbConnectionStringBuilder();
            String strExtendedProperties = String.Empty;
            sbConnection.DataSource = filePath;
            if (Path.GetExtension(filePath).ToLower().Equals(".xls"))//Excel 97-03
            {
                sbConnection.Provider = "Microsoft.Jet.OLEDB.4.0";
                strExtendedProperties = String.Format("Excel 8.0;HDR={0};IMEX=1", header);
            }
            else if (Path.GetExtension(filePath).ToLower().Equals(".xlsx"))  // Excel 2007
            {
                sbConnection.Provider = "Microsoft.ACE.OLEDB.12.0";
                strExtendedProperties = String.Format("Excel 12.0;HDR={0};IMEX=1", header);
            }
            sbConnection.Add("Extended Properties", strExtendedProperties);

            using (OleDbConnection conn = new OleDbConnection(sbConnection.ToString()))
            {
                conn.Open();
                DataTable dtSheet = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

                foreach (DataRow drSheet in dtSheet.Rows)
                {
                    if (drSheet["TABLE_NAME"].ToString().Contains("$") && !drSheet["TABLE_NAME"].ToString().EndsWith("_"))
                    { ....... 
```

我收到的错误`conn.Open();`

我还看到解决方案说要更改其中的内容并以其他方式再次保存它。事情是我必须在不这样做的情况下让它工作，因为它会进入一个 DLL，该 DLL 会发送给其他开发人员，这些开发人员将在网站上上传文件时使用它。所以用户（客户端）将上传一个文件，当验证表明它是一个有效的 excel 文件时，它将进入我的代码。

# hash - 加密密码并将其保存到数据库

> ID：14747664
> 
> 赞同：0
> 
> 时间：2013-02-07T09:26:35.373
> 
> 标签：hash, password-protection, password-encryption

我最近在我的网站中实现了散列。我有个问题。早些时候我将密码保存为简单的纯文本。现在开始我将密码保存为散列条目。我应该如何处理那个旧的纯文本条目。由于是大型数据库，无法将旧数据一一转换为散列数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:56:31.260

可以有2种方法

1.  登录后将密码保存为哈希，因此当任何用户登录时，他的密码将自动保存到数据库中。如果您没有在数据库中清除密码的压力，这种方法是可以的。

2.  创建一个程序，它将升级数据库中的清除密码。这是一种冒险的方法，因为您需要使用 ID 并确保不会再次对散列密码进行散列处理。

# ios - 如何创建像 BestBuy App 这样的自定义导航栏？

> ID：14747665
> 
> 赞同：6
> 
> 时间：2013-02-07T09:26:37.570
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar

我想制作一个自定义导航栏，就像在 BestBuy 应用程序中一样，或者像下面给出的屏幕截图所示。

![在此处输入图像描述](../Images/ee55d8e50bd41f22f8785067f64946ab.png)

我希望这种导航始终位于每个 viewController 的顶部。

如果有人能告诉我程序或任何形式的帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T09:32:54.243

编写 UINavigationBar 的子类，您可以在其中进行自定义绘图并根据需要添加子视图。

然后告诉你的navigationController通过使用初始化它来使用那个类`initWithNavigationBarClass:toolBarClass:`

例如

```
@interface MyBar : UINavigationBar
@end

@implementation MyBar 
.... //like any UIView
@end 
```

* * *

```
UINavigationController *navi = [[UINavigationController alloc] initWithNavigationBarClass:[MyBar class] toolbarClass:nil]; 
```

代替`initWithRootViewController`

* * *

样本

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.mainViewController = [[FDMainViewController alloc] initWithNibName:@"FDMainViewController_iPhone" bundle:nil];
} else {
    self.mainViewController = [[FDMainViewController alloc] initWithNibName:@"FDMainViewController_iPad" bundle:nil];
}

UINavigationController *navi = [[UINavigationController alloc] initWithNavigationBarClass:[UINavigationBar class] toolbarClass:nil];
navi.viewControllers = @[self.mainViewController];
self.window.rootViewController = navi;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T09:36:30.853

navigationBar 可以取三个视图，左右各有两个按钮，也可以为标题添加一个视图，，

```
//this will set a background image to your navigation bar.
[[self.navigationController navigationBar] setBackgroundImage:[UIImage imageNamed:@"top-bar.png"] forBarMetrics:UIBarMetricsDefault];

UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeCustom];
[leftButton setBackgroundImage:[UIImage imageNamed:@"backBtn.png"] forState:UIControlStateNormal];
leftButton.frame = CGRectMake(0, 0, 66, 30);
[leftButton addTarget:self action:@selector(navBack) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:leftButton];

UIImage *image=[UIImage imageNamed:@"add-btn.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.bounds = CGRectMake( 0, 0, image.size.width, image.size.height);
[button setBackgroundImage:image forState:UIControlStateNormal];
[button addTarget:self action:@selector(doneAct) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

并添加搜索栏

```
self.navigationItem.titleView = mySearchbarView; 
```

# c# - 使用java在MS office excel中创建加载项功能区

> ID：14747674
> 
> 赞同：2
> 
> 时间：2013-02-07T09:27:17.003
> 
> 标签：c#, java, swing, excel, ms-office

我是一名自由职业者，对 C# 非常陌生（在 Java 中很舒服）。在我的新项目中，我需要在 excel 表中创建一个功能区并解决它。

由于我对 C# 不满意，我可以使用 Java 在 excel 中创建功能区吗？我用谷歌搜索并没有找到关于它的答案。

提前致谢。

# ios - iOS：SecRSAPublicKeyCopyPublicSerialization？

> ID：14747678
> 
> 赞同：5
> 
> 时间：2013-02-07T09:27:37.390
> 
> 标签：ios, objective-c, security

我正在尝试固定公钥。我有一个`SecKeyRef`，我想用`SecRSAPublicKeyCopyPublicSerialization`. `SecRSAPublicKeyCopyPublicSerialization`将在 PKCS#1（即`SubjectPublicKeyInfo`）中序列化，该函数记录在[http://www.opensource.apple.com/source/Security/Security-55163.44/sec/Security/SecRSAKey.c](http://www.opensource.apple.com/source/Security/Security-55163.44/sec/Security/SecRSAKey.c)中。

PKCS#1 是公钥（即`SubjectPublicKeyInfo`）的 ASN.1 编码。这种格式适合固定。对于那些不熟悉的人，固定是主机的预期证书或公钥的白名单。在识别主机时，它们通常可以互换，但在某些情况下它们不是。例如，Google 的公钥是静态的（固定的），但 Google 会轮换“外部”X509 证书。在这种情况下，您将固定公钥，而不是证书。

什么是正确的标题和框架`SecRSAPublicKeyCopyPublicSerialization`？我已经包含`Security.framework`了，但是`SecRSAPublicKeyCopyPublicSerialization`缺少声明，并且在链接过程中缺少该函数。我确实尝试包括`SecRSAKey.h`.

对不起那些糟糕的标签。

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:41:52.867

```
static OSStatus SecRSAPublicKeyCopyPublicSerialization(SecKeyRef key, CFDataRef* serialized) 
```

是安全框架内部使用的静态函数，不能从框架外部调用该函数。

看看[SecItemExport](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898-CH1g-SW48)。此函数可以将 a 转换`SecKeyRef`为不同的外部表示。

***更新：***我错过了[问题中的ios](/questions/tagged/ios "显示标记为“ios”的问题")标签。`SecItemExport`仅适用于 OSX 10.7 及更高版本，但不适用于 iOS。

在 iOS 上，（我认为）您必须将密钥添加到 KeyChain（`SecItemAdd`），然后使用`SecItemCopyMatching()`（`kSecReturnData`设置为`YES`）来检索原始数据。

“CryptoExercise”示例项目的[SecKeyWrapper.m](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html%23//apple_ref/doc/uid/DTS40008019-Classes_SecKeyWrapper_m-DontLinkElementID_17)中的`getPublicKeyRef`方法可能会有所帮助。

# wcf - WCF 配置编辑器（无服务）

> ID：14747679
> 
> 赞同：3
> 
> 时间：2013-02-07T09:27:37.763
> 
> 标签：wcf

我正在尝试遵循本教程

[教程](http://msdn.microsoft.com/en-us/library/ff648360.aspx)

但我从一开始就遇到了问题。

我创建了新网站并提供了地址。我可以在我的 inepub 文件夹中看到这些文件。我可以使用“localhost//WCFService//Service.svc”浏览到该服务。

所以一切都很好。

当我右键单击 webconfig 文件并选择编辑 WCF 配置时，窗口打开但没有注册服务。

![在此处输入图像描述](../Images/6cb1ed748043b97a0928dd2693eefab1.png)

因此，我尝试使用“创建新服务”向导创建新服务，并要求提供服务类型。

![在此处输入图像描述](../Images/cb9d6595557d2f45c7c4517299ea7d53.png)

我的服务没有作为类型出现...实际上没有服务类型。

因此，如果我按照向导直到最后只输入名称，它会警告我类型可能无效，并且配置和我的服务之间似乎没有任何联系。

我在这里做错了什么？

# c# - 由一列不同，最大与另一列不同 linq

> ID：14747680
> 
> 赞同：-2
> 
> 时间：2013-02-07T09:27:46.897
> 
> 标签：c#, linq, distinct

我需要从 DataCop 日期时间字段中按名称字段和最大值选择不同，此代码不起作用，谢谢

```
List<Data> l = new List<Data>();
l.Add(new Data { Id = 0, Name = "A", DataCop = new DateTime(2012, 1, 4) });
l.Add(new Data { Id = 1, Name = "A", DataCop = new DateTime(2012, 1, 5) });
l.Add(new Data { Id = 2, Name = "A", DataCop = new DateTime(2012, 5, 4) });
l.Add(new Data { Id = 3, Name = "B", DataCop = new DateTime(2012, 3, 1) });
l.Add(new Data { Id = 4, Name = "B", DataCop = new DateTime(2012, 3, 5) });
l.Add(new Data { Id = 5, Name = "C", DataCop = new DateTime(2012, 2, 1) });
l.Add(new Data { Id = 6, Name = "D", DataCop = new DateTime(2012, 2, 1) });

DateTime start = new DateTime(2012,1,2);
DateTime end = new DateTime(2012,4,1);

var res = (from Data d in l
           let max = l.Where(x => x.Id == d.Id).Max(x => x.DataCop)
           let maxId = l.Where(x => x.Id == d.Id && x.DataCop == max)
                        .Select(x => x.Id).FirstOrDefault()
           where d.DataCop >= start && d.DataCop <= end &&
               d.Id == maxId && d.DataCop == max
           select d).ToList();

foreach (var item in res)
{
    Console.WriteLine(item.Id.ToString() + "\t" + item.Name + "\t" + item.DataCop.ToShortDateString());
}
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:35:38.613

使用 linq 方法语法

按名称分组并选择按 DataCop 降序排序的每个组的第一项（数据实例）（这会将最大日期放在首位）

```
var res = l.GroupBy(m => m.Name)
            .Select(g => g.OrderByDescending(x => x.DataCop)
                        .First())
            .ToList(); 
```

带查询语法（混合）

```
var result = (from r in l
              group r by r.Name into g
              select g.OrderByDescending(x => x.DataCop)
                      .First())
             .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:30:52.473

按名称对数据进行分组，然后从每个组中选择最后一个数据：

```
 var res = from d in l
           group d by d.Name into g
           let lastData = g.OrderByDescending(x => x.DataCop).First()
           select new Data()
           {
               Name = g.Key,
               Id = lastData.Id,
               DataCop = lastData.DataCop
           }; 
```

# node.js - 使用 mongoose 在 mongodb 中查询

> ID：14747682
> 
> 赞同：0
> 
> 时间：2013-02-07T09:27:49.017
> 
> 标签：node.js, mongodb, mongoose

我有以下格式的架构：

```
var ServiceSchema = new Schema({ createdAt:Date,name:String,ExpiryDate:Date}); 
```

我需要查询数据库比较 createdAt 和 expiryDate 并获得结果。

假设我需要查询 where 的值`createdDate>ExpiryDate`。

任何关于如何使用 mongoose 编写查询的想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:37:40.467

以下代码片段应该可以工作。

```
ServiceSchema.find( {$where: 'this.createdDate > this.ExpiryDate'}, 
   function(err, results) { 
     ///
}); 
```

# asp.net - 用于 ASP.NET 集成测试的 Ninject 和 MOQ

> ID：14747686
> 
> 赞同：1
> 
> 时间：2013-02-07T09:27:59.750
> 
> 标签：asp.net, ninject, moq, integration-testing

我有一个项目，我使用 MOQ 实现了许多单元测试，它按预期工作。

现在我已经运行了一些 selenium 集成测试来检查整个应用程序。集成测试在测试类的单元测试项目中运行。当应用程序涉及使用外部 Web 服务的部分时，它会失败，因为该服务不可用。为该服务创建 Mock 的最佳选择是什么？

*   我可以在运行时（通过单元测试过程）从 ASP.NET 更改 Ninject-Injections 吗？我不这么认为。- 设置细节：集成测试（这是测试项目中的单个单元测试），启动网络服务器，然后启动 selenium 以连接服务器并执行一些输入。我现在想用单元测试中的 mockump 更改 IMyInterface，而在真正的 ASP.net 代码中没有任何 if then else。

*   测试运行时是否应该在 ASP.NET 注入设置中进行条件绑定？但这意味着，那时应该已经添加了所有 MOQ，所以我不能将它从一个测试添加/更改到另一个测试。

*   或者这个测试的最佳方法是什么？

谢谢

# excel - 计算当前月份的日期值 - MS Excel

> ID：14747689
> 
> 赞同：1
> 
> 时间：2013-02-07T09:28:14.237
> 
> 标签：excel, excel-formula, formula, formulas

我在 A 列中有以下日期值（带时间）。

```
1/1/2012 8:50  
1/1/2012 8:45  
1/1/2012 8:55  
1/1/2012 8:59  
1/1/2012 8:12  
3/1/2012 8:30  
1/1/2012 9:50  
2/1/2012 10:00 
```

现在，我想从 A 列中获取具有当前月份日期值的单元格计数。

我曾想过以下公式，但我怀疑它仅适用于将 mm-dd-yyyy 作为 System-Date-Format 的机器。

```
=COUNTIFS(A:A,">="&DATEVALUE(MONTH(TODAY())&"-1"&"-"&YEAR(TODAY())),A:A,"<"&DATEVALUE(MONTH(TODAY())+1&"-1"&"-"&YEAR(TODAY()))) 
```

有什么解决方法/技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:50:21.867

试试这个：`=SUM(IF(MONTH(TODAY())=MONTH(A:A),1,0))`，但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式，并会在`{}`它周围产生括号（但不要手动输入它们！）。

将公式放入您喜欢的任何单元格中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:58:17.320

您可以像这样在当前月份使用 COUNTIFS

`=COUNTIFS(A:A,">="&EOMONTH(TODAY(),-1)+1,A:A,"<"&EOMONTH(TODAY(),0)+1)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:03:37.473

数组公式的替代方法是使用`SUMPRODUCT()`：

```
=SUMPRODUCT(--(MONTH(A:A)=MONTH(TODAY()))) 
```

该`--`部分是必要的：它将一组 TRUE/FALSE 值转换为数字。需要双重否定才能获得正值：`=VALUE(TRUE)`给出错误，`=VALUE(-TRUE)`给出`-1`，所以`=VALUE(--TRUE)`给出`+1`。

# android - 使用 jar 文件在 android 代码中找不到 Class Def 错误

> ID：14747693
> 
> 赞同：0
> 
> 时间：2013-02-07T09:28:22.410
> 
> 标签：android, jar, noclassdeffounderror

我在 Eclispe ADT for android 中使用一个简单的 android 代码来反转输入字符串。反转字符串函数是单独编写的，我已将其导出为 jar 文件。然后我将 jar 添加到我的 android 项目的 libs 文件夹中。在构建时eclipse项目没有显示amy错误，但是在运行时给用户输入字符串并单击字符串按钮后，模拟器显示消息“不幸的是'我的第一个项目'已停止”

这是我的主要 android 活动类

```
package com.example.myfirstproject;

import Reverse.ReverseSentence;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.Menu;
import android.widget.Toast;
import android.widget.EditText;
import android.widget.RadioButton;

public class MainActivity extends Activity {
private EditText text1,text2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text1=(EditText)findViewById(R.id.editText1);
    text2=(EditText)findViewById(R.id.editText2);

}

public void onClick(View view) {
    switch (view.getId()) {
    case R.id.button1:
      RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
      RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
      if (text1.getText().length() == 0) {
        Toast.makeText(this, "Please enter a valid number",
            Toast.LENGTH_LONG).show();
        return;
      }

      float inputValue = Float.parseFloat(text1.getText().toString());
      if (celsiusButton.isChecked()) {
        text1.setText(String
            .valueOf(convertFahrenheitToCelsius(inputValue)));
        celsiusButton.setChecked(false);
        fahrenheitButton.setChecked(true);
      } else {
        text1.setText(String
            .valueOf(convertCelsiusToFahrenheit(inputValue)));
        fahrenheitButton.setChecked(false);
        celsiusButton.setChecked(true);
      }
      break;
    case R.id.button2:
        String inputString=text2.getText().toString();
        if(text2.getText().length()==0){
        Toast.makeText(this, "You have enetered blank ", Toast.LENGTH_LONG).show();
        return;
        }

        try{
        //Reverse.ReverseSentence rObj=new Reverse.ReverseSentence();
        ReverseSentence rObj=new ReverseSentence();

        String outputString=new String();
        outputString=rObj.reverseString(inputString);
        text2.setText(outputString);
        }
        catch(Exception e){
            e.printStackTrace();
        }
        break;
    }
  }
// Converts to celsius
  private float convertFahrenheitToCelsius(float fahrenheit) {
    return ((fahrenheit - 32) * 5 / 9);
  }

  // Converts to fahrenheit
  private float convertCelsiusToFahrenheit(float celsius) {
    return ((celsius * 9) / 5) + 32;
  }

  //Reverses a string

  /*public String reverseString(String input){
        String original,reverse="";
        //Scanner scanner=new Scanner(System.in);

        original=input;
        System.out.println("The input string is "+ original);

        int length=original.length();

        for(int i=length-1;i>=0;i--){
            reverse=reverse+original.charAt(i);

            }

        return reverse;     

    }*/

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

我正在使用的 jar 文件具有以下组件。
1 META-INF 文件夹，2 .classpath 文件，3 .properties 文件 4 包含两个类文件 Palindrome.class 和ReverseSentence.class的 Reeverse 文件夹

这两个类的源代码如下：-

## 回文类

```
package Reverse;

import java.util.*;

public class Palindrome {

public static void main(String args[]){
    System.out.println("Type a string to give input");
    Scanner scanner=new Scanner(System.in);
    String inputString=new String();
    String outputString=new String();
    inputString=scanner.nextLine();
    scanner.close();
    System.out.println("The input String is "+inputString);

    ReverseSentence r=new ReverseSentence();

    outputString=r.reverseString(inputString);

    System.out.println("The output String is "+outputString);
    if(inputString.equalsIgnoreCase(outputString)){
        System.out.println("The string is a palindrome");
    }
    else{
        System.out.println("The string is not a palindrome");
    }
        System.out.println("The program is working fine");

}

/**
 * @param args
 */

} 
```

## ReverseSentence 类：-

```
package Reverse;

public class ReverseSentence {

String original,reverse="";
public ReverseSentence(){

}
public ReverseSentence(String input){
    this.original=input;

}
public String reverseString(String input){

    //Scanner scanner=new Scanner(System.in);

    original=input;
    System.out.println("The input string is "+ original);

    int length=original.length();

    for(int i=length-1;i>=0;i--){
        reverse=reverse+original.charAt(i);

        }

    return reverse;     

}

} 
```

我没有得到解决问题的解决方案。我已尝试将 Android 首选项 -> 编译器 -> JDK 合规性修复为 1.7，因为我的 java 代码是使用 JDK 1.7 构建的。但我仍然遇到应用程序崩溃。

我使用 Eclipse Juno EE 作为 java 开发 IDE，使用 Eclipse java ADT 作为 Android IDE。

这是一个简单的程序，用于检查 jar 文件在 android 中的可用性，但我收到 noClassDefFound 错误。可能我遗漏了一些东西，这是一个愚蠢的问题，但我仍然被困在这个问题上。

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:30:22.867

试试这个方法...

```
1.Right click on your project and go to Properties.
2.go to java build path..//which is on the 5th position on left side
3.go to Order and Export tab.
4.check(Tick Mark) on your selected jar file. and click ok.
5.Now, clean your project and Run. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T11:07:07.203

我认为你有两个选择：

1- 将 jar 库的编译器设置为 1.6。

2-或者，使您的 jar 库实际上是一个 android 项目，并在 Eclipse 中将其标记为“库”。

如果您的 jar 库根本不使用任何 android 代码，我会选择 1。

# ios - 在矩形框内移动按钮（左/右），如开关

> ID：14747699
> 
> 赞同：1
> 
> 时间：2013-02-07T09:28:33.327
> 
> 标签：ios, objective-c, ios5

我正在尝试创建一个控件，用户可以在其中触摸和移动框架内的按钮。这是我的代码。

```
- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{

   UITouch *touch = [[event touchesForView:button] anyObject];

    // get delta
    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,
                                button.center.y + delta_y);   

} 
```

我可以移动按钮（通过触摸和拖动），但是如何限制按钮，使其只能在矩形框架内向左/向右移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:38:10.540

也许这种方法会对你有所帮助。我在不久前制作的一个简单的乒乓球游戏中使用了它。它适用于作为乒乓球游戏弹跳垫的 UIView。我已将反弹垫的移动限制在 x 方向，而不是在屏幕边界之外。

如果有不清楚的地方写评论，我会尽力解释。

```
// Method for movement of the bouncing pad. Restricted movement to x-axis inside of bounds.
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *aTouch = [touches anyObject];
    CGPoint loc = [aTouch locationInView:self];
    CGPoint prevloc = [aTouch previousLocationInView:self];

    CGRect myFrame = self.frame;

    // Checking how far we have moved from the previous location
    float deltaX = loc.x - prevloc.x;

    // Note that we only update the x-position of the pad to prevent it from moving in the y-direction.
    myFrame.origin.x += deltaX;

    // Making sure that the bouncePad cannot move outside of the screen
    if(myFrame.origin.x < 0){
        myFrame.origin.x = 0;
    } else if (myFrame.origin.x + myFrame.size.width > [UIScreen main Screen].bounds.size.width) {
        myFrame.origin.x = [UIScreen mainScreen].bounds.size.width - myFrame.size.width;
    }

    // Setting the bouncing pad frame to the one with the updated position from the touches moved event.
    [self setFrame:myFrame];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:51:04.353

如果你想左右移动，你应该只更改**X而不是 Y 只需更改如下代码**

```
// move button YOUR CODE
button.center = CGPointMake(button.center.x + delta_x,
                            button.center.y + delta_y);

// move button REMOVED + delta_y
button.center = CGPointMake(button.center.x + delta_x,
                            button.center.y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:46:03.130

硬编码坐标的极端值或使其在视图中（你的矩形）并使用剪辑来限制您的按钮

# java - 在标准布局上重叠“教程视图”

> ID：14747700
> 
> 赞同：0
> 
> 时间：2013-02-07T09:28:39.860
> 
> 标签：java, android, layout

我想重叠一些视图来解释这个图像中的屏幕布局上的界面![在此处输入图像描述](../Images/51d7bc9796aea93aec1970b40e0453d7.png)

因此将布局更改为：

```
RootLayout
    AppLayout
    TutorialLayout (FrameLayout) 
```

我想根据 AppLayout 中的视图将视图定位在 TutorialLayout 中，更改其边距。

如何在 AppLayout 中获取视图的全局边距？我测试了`View.getLocationOnScreen`，但它们都返回包含状态栏`View.getGlobalVisibleRect`和`View.getLocationInWindow`应用程序标题的值。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:26:29.027

您可以尝试将您的教程分成不同的视图，这些视图的布局与背景中的视图完全相同。

您将在每个视图中使用一个图像，并且必须将图像拆分为多个图像，但是这样您就可以将坐标计算委托给布局管理器，而不必自己计算它们。

编辑：

使用这种方法的一个缺点是，如果你想让你的教程覆盖菜单栏，你实际上必须通过在菜单栏下显示教程图像来解决它，箭头向上指向菜单条目而不是它们的顶部.

# c++ - 将迂腐的 GCC 密钥应用于 Qt 中的项目时出现很多警告

> ID：14747703
> 
> 赞同：2
> 
> 时间：2013-02-07T09:28:45.060
> 
> 标签：c++, qt, gcc, mingw, compiler-warnings

**介绍**

前段时间我发现，迂腐的 GCC 密钥很有用，可以建议我编写更简洁的代码。当我编写简单的控制台 C++ 应用程序并使用参数编译它时：

```
-Wall -Wextra -pedantic -Weffc++ -Wold-style-cast
-Wconversion -Winit-self -Wunreachable-code 
```

*（这里是关于它们的完整文档信息：[请求或抑制警告](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)的[选项，控制 C++ 方言](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html)的选项）*

* * *

**问题**

现在，我使用带有 MinGW 编译器的 Qt 4.8.4 来构建应用程序。问题是当我添加到我的`.pro`-file 下一行时：

```
QMAKE_CXXFLAGS += -Wall -Wextra -pedantic -Weffc++ -Wold-style-cast
QMAKE_CXXFLAGS += -Wconversion -Winit-self 
```

我收到了**很多**来自 Qt 来源的警告，但不是来自我的来源。

* * *

**例子**

上面在 -file 中写入参数的简单 Qt GUI 项目`.pro`会给出 517 个警告，例如：

> D:\Qt\4.8.4\src\corelib\global\qglobal.h:981：警告：基类 'struct QIntegerForSize<4>' 具有非虚拟析构函数 [-Weffc++]
> 
> D:\Qt\4.8.4\src\corelib\tools\qpoint.h:174：警告：从“int”转换为“float”可能会改变其值 [-Wconversion]
> 
> ...

等等。

* * *

**问题**

如何避免将迂腐参数应用于 Qt 的源代码，并且仅在我的代码中使用该参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:28:45.237

如果您使用 GCC 的[`-isystem`](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)标志将它们标记为系统标头，您将不会看到警告。（另见[http://gcc.gnu.org/onlinedocs/cpp/System-Headers.html](http://gcc.gnu.org/onlinedocs/cpp/System-Headers.html)）。

# firebug - 使用 firebug 时如何摆脱大 xpath 覆盖

> ID：14747711
> 
> 赞同：0
> 
> 时间：2013-02-07T09:29:07.397
> 
> 标签：firebug

我在 firefox ubuntu 上使用 firebug 1.11.1。它是我几乎每天都在使用的出色工具。但最近我有时会遇到一个大的黑色覆盖物让我烦恼。

当我像往常一样将光标移到 firebug 中的 html 代码上时，会突出显示各种元素。但是，如果我让光标在其中一个元素上静止大约半秒钟，则会有一个黑色的大覆盖层显示元素的 xpath。前任：

```
/html/body/div[4]/div[2] (http://www.w3.org/1999/xhtml) 
```

这可能是有趣的信息，但由于它实际上覆盖了整个页面，因此非常烦人！

这个叠加层怎么能关掉？

# ios - iOS 6.1 中的闪烁屏幕问题

> ID：14747713
> 
> 赞同：5
> 
> 时间：2013-02-07T09:29:10.033
> 
> 标签：ios, objective-c, cocoa-touch, ios6

我正在开发针对 iOS 5.0 的项目。一切正常，直到我升级我的

设备版本到 iOS 6.1。在这个新版本中，我面临一些闪烁的问题

特定的屏幕。我在做什么如下

```
dispatch_async(dispatch_get_main_queue(), ^{            

    [APPINSTANCE performSelector:@selector(loadFadingScreenFromController:)      
    withObject:self afterDelay:0.2];//Method in AppDelegate to for db sync
    [APPINSTANCE setSyncFrom: @"ORDERS"];
});

//pushing a view
OrderList *orderListObj = [[OrderList alloc] initWithNibName:@"OrderList" bundle:nil];
[self.navigationController pushViewController:orderListObj animated:YES];
self.navigationController.navigationBarHidden = NO; 
```

这样做之后，我的 iPhone 屏幕上出现了一个非常奇怪的闪烁。闪烁只发生

与 iOS 6.1 相比，版本低于完美。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T09:55:00.260

我在我的应用程序中遇到了同样的问题。

原因是我使用线程显示警报视图，这就是屏幕闪烁的问题。

我评论了该线程以显示警报视图，之后我的应用程序运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:15:49.890

我不太了解您的代码。您在主线程上使用 GCD 在延迟后实际在另一个线程上执行选择器。为什么不使用 dispatch_after() 函数？

请记住，由于并发性，在调用选择器之后不会立即调用您的“推送视图”代码。

你不知道你的 OrderList 视图控制器将在什么时候相对于 loadFadingScreenFromController 被推送：

# python - Django代码中的语法错误？

> ID：14747714
> 
> 赞同：0
> 
> 时间：2013-02-07T09:29:13.573
> 
> 标签：python, django

我是 python 和 Django 的新手，如果只是有些愚蠢，请宽恕。这是我在views.py 中的代码。它显示页面未找到 404 错误。有没有语法错误。

在这里，根据 b 的不同值，我正在查询我正在渲染的不同数据。

# 视图.py

```
@csrf_exempt
def active_user_table(request, b):
  if request.method != "GET":
    raise Http404
  print(b)//Just cheking the correct value coming to the function.This is getting printed in the shell.

  if (b==4):
         print("Hello World!")
         cursor = connection.cursor() 
         cursor.execute("SELECT core_user.id, name,mobile_number,COUNT(*) as count, created FROM core_user,core_useractivity WHERE core_user.id = core_useractivity.user_id GROUP BY user_id ORDER BY count DESC")    
         response_data = dictfetchall(cursor)  
         return render_to_response("siteadmin/active_user_table.tmpl",{'response_data':response_data})      
  elif (b==3):
          print("Hello World!")
          cursor = connection.cursor()
          cursor.execute("SELECT core_user.id, name, mobile_number, COUNT(*) as count, created FROM core_user, core_useractivity WHERE core_user.id = core_useractivity.user_id AND MONTH(CAST(created as date)) = MONTH(NOW()) AND YEAR(cast(created as date)) = YEAR(NOW()) GROUP BY user_id ORDER BY count DESC")
          response_data = dictfetchall(cursor)
          return render_to_response("siteadmin/active_user_table.tmpl",{'response_data': response_data})
  elif (b==2):
          cursor = connection.cursor()
          cursor.execute("SELECT core_user.id, name, mobile_number, COUNT(*) as count, created FROM core_user, core_useractivity WHERE core_user.id = core_useractivity.user_id AND DATEDIFF(NOW(), created) <= 7 GROUP BY user_id ORDER BY count DESC")
          response_data = dictfetchall(cursor)
          return render_to_response("siteadmin/active_user_table.tmpl",{'response_data': response_data})
  elif (b==1):
          cursor = connection.cursor()
          cursor.execute("SELECT core_user.id, name, mobile_number, COUNT(*) as count, created FROM core_user, core_useractivity WHERE core_user.id = core_useractivity.user_id AND DATE(created) = DATE(NOW())")
          response_data = dictfetchall(cursor)
          return render_to_response("siteadmin/active_user_table.tmpl",{'response_data': response_data})
  else:
          raise Http404 
```

如果我要删除 else: 部分它显示没有发送 HttpResponse。我不知道有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:39:17.357

arg b 将是一个字符串，您假设它是一个数字。将数字转换为字符串，然后与 b 进行比较。如 b == '1'。

你显然缺乏调试技能。正如你所说，你是新手，请通过 pdb 模块。该模块在您的代码中放置了一个断点。

有很多有用的帖子，例如 - [Python Debugger pdb 入门](https://stackoverflow.com/questions/4228637/getting-started-with-the-python-debugger-pdb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:39:31.963

请注意，在这种情况下，'b' 将是一个字符串，因为它是 URL 的一部分，而不是整数。如果您将测试更改为例如。`b=='1'`，并确保在它们都失败时引发 Http404，那么事情应该会按您的预期进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:39:38.030

看起来你的 b 不是这些值，这可能是没有传递给视图的事实（你可以在你的 urls.py 中检查）或者你应该把它放到 int(b) 如果可能的话不明白它是什么。

试试 "print b" 和 "print type(b)" # 没有你原来的括号，看看你返回了什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:49:38.913

正如 Burhan Khalid 首先建议我们从 url 映射器获得的值是一个字符串。因此，唯一需要更改的是在比较字符串中生成所有整数。

# c# - 不同的 WinForms DataGridView 数据源，无需持续管道

> ID：14747723
> 
> 赞同：0
> 
> 时间：2013-02-07T09:29:40.797
> 
> 标签：c#, datagridview

在我的应用程序中，我有具有不同属性的不同数据源，在大多数情况下，这些数据源从基础对象继承并添加一些元数据。我可以编写一些方法来为我的所有数据对象以通用方式处理验证和保存，并且我可以做类似的事情来获取数据。通过使用属性，我还可以使数据对象描述它们想要在`DataGridView`. 现在我似乎不能做的是告诉`DataGridView`这些对象有一个存储库，并且它应该使用它来获取数据对象。我一直在研究`DataObjectAttribute`and `DataObjectMethodAttribute`，但我找不到任何方法将它与 a 联系起来`DataGridView`。

有没有一种可行的方法来提供一个`DataGridView`知道`DataSource`获取`DataGridView`、保存和删除我的数据对象的方法？

# widget - 搜索 gtk 小部件

> ID：14747730
> 
> 赞同：0
> 
> 时间：2013-02-07T09:30:15.100
> 
> 标签：widget, gtk

gtk+ 中是否有任何特殊的小部件在菜单栏下方显示一组选项卡并具有默认的“X”关闭按钮（如在 gedit 中）。如果没有，如何创建或在哪里可以找到它（在其他什么窗口库中？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:32:23.550

使用 a`GtkNotebook`并在每个选项卡标签中包含一个小的关闭按钮。

如有疑问，如果您想创建“类似 Gedit”的内容，请查看 Gedit 源代码：[http ://git.gnome.org/browse/gedit/tree](http://git.gnome.org/browse/gedit/tree)

# app-store - 申请获批后 iAd 不出现

> ID：14747731
> 
> 赞同：2
> 
> 时间：2013-02-07T09:30:15.770
> 
> 标签：app-store, iad, adbannerview, revenue

Apple 刚刚批准了我的应用程序，但问题是应用程序没有显示横幅。

我已经实现了 ADBannerView 的这 3 种委托方法：

```
-(void)bannerViewDidLoadAd:(ADBannerView *)banner

-(BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

在我的 iPhone 中，横幅测试完美运行并且可见。

![在此处输入图像描述](../Images/41f5520cdab3edbc15f70bdf5a82d73e.png)

你知道有什么问题吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T15:52:54.043

广告需要时间来加载。我的游戏中的广告是在应用程序在应用商店上架一天之后出现的。稍等一下。如果他们在一周左右后仍然没有来，那么你应该联系苹果。

# php - 记录所有 mysql 查询而不篡改代码

> ID：14747736
> 
> 赞同：0
> 
> 时间：2013-02-07T09:30:26.363
> 
> 标签：php, debugging

有没有办法记录所有 mysql 查询，就像 xhprof 对函数调用所做的那样 - 而不会篡改代码？这项工作是否有任何 PHP 扩展？

我想要一个基于页面执行的查询日志，而不是 MySQL 的日志记录工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:49:01.450

您似乎对您要在这里实现的目标有些困惑 - 或者没有很好地解释它。

你试过什么？

打算如何处理这些信息？

是什么`I want a page execution based log of queries, not MySQL's logging facility`意思？

至少有 3 种方法我能想到实现它。

*   使用[runkit](http://php.net/manual/en/book.runkit.php)将相关功能/方法与日志记录层包装起来

*   使用 mysql 日志记录（慢查询/通用/复制）

*   通过[mysqlproxy](http://www.oreillynet.com/pub/a/databases/2007/07/12/getting-started-with-mysql-proxy.html)路由连接并在那里记录请求。

# c# - 并行处理一组 url 并返回一个 IEnumerable

> ID：14747737
> 
> 赞同：2
> 
> 时间：2013-02-07T09:30:28.187
> 
> 标签：c#, parallel-processing, web-scraping, system.reactive

我有一组用于抓取的 url，我想并行下载资源，同时返回一组强类型结果。

有一个`WebClient.DownloadString()` 和一个“ `MyTypedResult Process(string s)`”

我如何将其包装起来以进行`string[] urls => IEnumerable<MyTypedResult>`转换？

```
string[] urls = {"url1","url2","url3"};
List<MyTypedResult> ResultCollection = new List<MyTypedResult>();
foreach (var u in urls)
{
    WebClient wc = new WebClient();
    var content = wc.DownloadString(u);
    MyTypedResult r = Process(content);
    ResultCollection.Add(r);
} 
```

我希望 Web 请求并行运行，但我需要一个 List 中的结果集合；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:40:16.950

您可以使用`HttpClient`.NET 4.5 中的新玩具并行获得结果：

```
var httpClient = new HttpClient();

var tasks = urls.Select(url => httpClient.GetStringAsync(url)
                        .ContinueWith(task =>
                        {
                            string response = task.Result;
                            return ConvertToStrongType(response);
                        }));

 Task.WaitAll(tasks.ToArray());
 var results = tasks.Select(t => t.Result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:28:26.930

这是 Rx 版本`HttpClient`：

```
var urls = new[] { "url1", "url2", "url3" };
var client = new HttpClient();
var results = from url in urls.ToObservable()
              from content in client.GetStringAsync(url).ToObservable()
              select Process(content);
var enumerable = results.ToEnumerable(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:37:14.697

以下是代码，它使用 Parallel.ForEach 从 url 并行下载内容。您需要使用 ConcurrentList 来确保应该并行填充集合，而不会出现线程锁定问题。

```
void YourTask()
{
    string[] urls = {"url1","url2","url3"};
    ConcurrentList<MyTypedResult> ResultCollection = new ConcurrentList<MyTypedResult>();

    Parallel.ForEach(urls, url => 
    {
        GetData(url);
        ResultCollection.TryAdd(myTypedResult);
    );

    //on this line all parallel task will be completed and ResultCollection will be filled with the results

}

MyTypedResult GetData(string url)
{
   WebClient wc = new WebClient();
    var content = wc.DownloadString(url);
    MyTypedResult r = Process(content);
    return r;
} 
```

# jquery - 当使用 jquery 在 html 中附加 javascript

> ID：14747738
> 
> 赞同：1
> 
> 时间：2013-02-07T09:30:28.857
> 
> 标签：jquery

```
$.ajax({   
                 url: "sub_template5_js.php?content_id="+content_id,  
                 dataType: 'html',
                 success: function(data){  
                    data = data.replace( new RegExp("block1", 'g'), block_id_replace );
                     data = data.replace( new RegExp("<//script>", 'g'), '' );
                    data = data.replace( new RegExp("<script>", 'g'), '' );
                    alert(data);
                    $("#template_ipad script").empty;
                    $("#template_ipad script").append(data);
                }    
         }); 
```

当我提醒数据时，上面的脚本显示了类似这样的内容

```
imagePath=$prev.find('img').map(function(){
                                    return this.src.replace(/^.*[\\\/]/, '');
                                    }).get();
        imagePath = "images/"+imagePath; 
```

追加后

```
imagePath=$prev.find('img').map(function(){
                                    return this.src.replace(/^.*[\\\/]/, '');
                                    }).get();
        imagePath = "images/" imagePath; 
```

您可以在缺少附加**“+”后看到上面的代码请帮助我**

**之前 **

imagePath = "图片/"+imagePath;

**之后 **

imagePath = "图像/" imagePath;

谢谢你

# javascript - lastIndexOf 在 Internet Explorer 中不起作用

> ID：14747739
> 
> 赞同：3
> 
> 时间：2013-02-07T09:30:36.003
> 
> 标签：javascript

我有以下代码：

```
 var currentServerlist = [];
        var newServerIp = document.getElementById('add_server').value; 
        if( CurrentServerIP != newServerIp )
        {
            $('#failoverServers td.row_selector').each(function() {
            var row = $(this).closest('tr');
            var serverIp = row.find('td[rel=ip]').text();
            currentServerlist.push(serverIp);   
            });

            if(currentServerlist.lastIndexOf(newServerIp) != -1)
            {
                return true;
            }
            return false;
         } 
```

但我发现 lastIndexOf 在 InternetExplorer 中不起作用（它在 Chrome 中起作用）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:33:37.053

根据[ES5 兼容性表](http://kangax.github.com/es5-compat-table/)，`Array.prototype.lastIndexOf`除 IE8 及以下所有浏览器均支持。

如果您需要支持此类浏览器，您可以使用可用的各种[polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf)之一（或[更完整的 ES5 polyfill 解决方案](https://github.com/kriskowal/es5-shim)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:33:40.410

一些浏览器 (IE) 不支持很多 JavaScript 属性。我通常会在 mdn 上找到解决方案：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf)

那里的代码：

```
if (!Array.prototype.lastIndexOf)
{
  Array.prototype.lastIndexOf = function(searchElement /*, fromIndex*/)
  {
    "use strict";

    if (this == null)
      throw new TypeError();

    var t = Object(this);
    var len = t.length >>> 0;
    if (len === 0)
      return -1;

    var n = len;
    if (arguments.length > 1)
    {
      n = Number(arguments[1]);
      if (n != n)
        n = 0;
      else if (n != 0 && n != (1 / 0) && n != -(1 / 0))
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }

    var k = n >= 0
          ? Math.min(n, len - 1)
          : len - Math.abs(n);

    for (; k >= 0; k--)
    {
      if (k in t && t[k] === searchElement)
        return k;
    }
    return -1;
  };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:34:13.500

[lastIndexOf](http://msdn.microsoft.com/en-us/library/ie/ff679972%28v=vs.94%29.aspx)似乎只在 IE9/10 中实现。您需要使用垫片来支撑它。请参阅：[ES5-shim](https://github.com/kriskowal/es5-shim)，特别是第[509-535](https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js#L509-L535)行。

# c# - 同时执行 Javascript 和控制器 ActionResult

> ID：14747746
> 
> 赞同：2
> 
> 时间：2013-02-07T09:30:55.750
> 
> 标签：c#, javascript, asp.net-mvc

继[这个问题之后，我之前问过](https://stackoverflow.com/questions/14741625/download-file-from-controller-redirecttoaction)我想知道 - 在我的控制器的操作返回文件并写入响应后，是否也可以显示 JavaScript 警报？

请注意，这个项目是`MVC 1.0`

这是我想在文件下载之前执行一些 Javascipt 的 ActionReult：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult SomeImporter(HttpPostedFileBase attachment, FormCollection formCollection, string submitButton, string fileName)
{
    if (submitButton.Equals("Import"))
    {
        byte[] fileBytes = ImportClaimData(fileName, new CompanyExcelColumnData());
        if (fileBytes != null)
        {
            //This method stores the string in a message queue which is stored in the 
            //session and rendered from within a UserControl. The Javascript alert
            //is then shown subsequently.
            UserMessageUtil.Info("Data imported successfully.", Session);

            //The file downloads but no Javascript alert is shown from the line above.
            return File(
                fileBytes,
                "application/ms-excel",
                string.Format("Import {0}.xls", DateTime.Now.ToString("yyyyMMdd HHmm")));
        }
        return View();
    }
    throw new ArgumentException("Value not valid", "submitButton");
} 
```

用于处理用户控件内部队列的 HTML Helper 方法：

```
public static string UserMessage(this HtmlHelper helper, HttpSessionStateBase session)
{
    MessageQueue queue = UserMessageUtil.GetMessageQueue(session);
    Message message = queue.Next;
    String script = null;

    if (message != null)
    {
        do
        {
            string messageStr = message.Text;
            ....
            script += @"alert('" + messageStr + "');";
        } 
        while ((message = queue.Next) != null);

        return script;
    }

    return null;
} 
```

基本上，文件会下载，但不会显示 Javascript 警报。用于项目的`UserMessageUtil.Info()`其他部分并按预期工作，在执行时显示警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:39:41.340

如果我理解正确，您希望在文件准备好下载后执行一些客户端 javascript 吗？

我有类似的需求，尽管在 Java EE 中技术问题仍然相同。在此答案中查看此出色的 hack [http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)[检测时间浏览器接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)

基本上，您想从您的操作中设置一个 cookie，该 cookie 将与服务器响应一起返回，并有一些 javascript 轮询客户端是否存在该 cookie。一旦服务器响应并向客户端显示文件下载对话框，就会检测到 cookie 并执行您的脚本。脚本执行后，您可以销毁 cookie。

# r - 如何按日期和顺序对表进行子集化？

> ID：14747747
> 
> 赞同：1
> 
> 时间：2013-02-07T09:31:03.163
> 
> 标签：r, dataframe, subset

我需要按几个条件对表进行子集化。

```
df <- data.frame(id=c("A","A","B","B","B","C"), seq=c(1,2,1,2,3,1), date=as.Date(c("2005-10-01", "2008-12-01","2001-03-05","2004-05-09","2008-10-15","2010-02-27")), value=c(20,12,80,55,77,57))

  id  | seq  |     date    | value
 --------------------------------
  A   |  1   | 2005-10-01  |  20
  A   |  2   | 2008-12-01  |  12
  B   |  1   | 2001-03-05  |  80
  B   |  2   | 2004-05-09  |  55
  B   |  3   | 2008-10-15  |  77
  C   |  1   | 2010-02-27  |  57 
```

我需要一种方法来为每个 id 返回一个值。具体来说，具有**最高序列**且**日期小于或等于给定日期的值**。鉴于 say `2004-07-01`，它应该返回：

```
id  |  value
--------------
A   |   20
B   |   55
C   |   57 
```

（注意，在日期小于第一个日期的特殊情况下，它应该返回 seq=1，而不是什么都没有）

这可能吗？一气呵成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:50:34.880

像这样的东西？

```
with(df[df$date >= as.Date("2004-07-01"),], do.call("rbind", lapply(split(data.frame(id, value,seq), id), function(x) x[which.max(x$value), c("id", "value")])))
  id value
A  A    20
B  B    77
C  C    57 
```

# http - HTTP 状态 404 - 请求的资源不可用

> ID：14747749
> 
> 赞同：1
> 
> 时间：2013-02-07T09:31:25.303
> 
> 标签：http, servlets, web, http-status-code-404

我正在为我的项目使用 tomcat7 服务器。今天我将一些 html 页面合并到一个名为 sp 的目录中以进行管理。当我输入*http://localhost:8080/skypark/sp/upload* .html地址时，将显示sp目录中的上传页面。但是当我尝试提交它显示的内容时

**HTTP 状态 404 - /skypark/sp/FileUploadServlet**

**描述：请求的资源不可用。**

我的目录结构是：

![在此处输入图像描述](../Images/febf2cc5a09cce5a6a79008139f51424.png)

我不知道为什么它显示这个错误

FileUploadServlet 的 servlet 映射为：

```
<servlet id="spU">
<display-name>FileUploadServlet</display-name>
<servlet-name>FileUploadServlet</servlet-name>
<servlet-class>skypark.FileUploadServlet</servlet-class>
</servlet>
<servlet-mapping id="spUm">
<servlet-name>FileUploadServlet</servlet-name>
<url-pattern>/FileUploadServlet</url-pattern>
</servlet-mapping> 
```

在添加到**sp**目录之前，upload.html 运行良好，文件上传正常。请任何人告诉我为什么它会显示此错误......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:33:47.193

采用

```
<url-pattern>/sp/FileUploadServlet</url-pattern> 
```

该模式必须是绝对的，开始**您的 webapp**上下文路径。所以，如果你的 webapp 是`skypark`，它必须从那里开始。

# optimization - cpu缓存如何处理大内存对象？

> ID：14747752
> 
> 赞同：3
> 
> 时间：2013-02-07T09:31:27.597
> 
> 标签：optimization, cpu-cache

**场景**：

*   缓存 (L1) 大小 ( `CS`): 32kB
*   线号（`LS`）：64B
*   关联性 ( `A`): 8
*   套装尺寸 ( `SS`): 512B ( `A`* `LS`)
*   套数 ( `S`): 64 ( `C`/ `SS`)
*   读/写对象 ( `O`) 的大小大于`LS`

**假设**（如果无效，请纠正我）：

*   虚拟内存块（大小为 4kB ( `SS`* `A`) 表示为`B`）以类似模的方式映射到集合。换句话说，地址`0x0 : 0xFFFF`（块索引（`BI`）0）映射到集合0，`0x1000 : 0x1FFF`（`BI`1）映射到1，等等。
*   读取/写入请求（不使用非临时写入/读取）给定地址`A`需要找到它`BI`，然后将其移动到分配的集合。例如，`A`= 0x4600A 将有`BI`= 70。这`BI`映射到集合 6 ( `BI`% `S`)。
*   为了正确（没有错位）读/写`O`要缓存的对象（ ），需要对齐`LS`。

**问题**：

1.  是否会`O`在缓存中串行对齐，或者它可以占用（例如）空闲插槽 0 & 4 & 5，而不是 0 & 1 & 2？
2.  `O`从缓存中检索分区的成本（惩罚）是多少？假设`O`没有划分为多​​个`B`.
3.  与上面相同的问题，但如果将 when`O`放在两个中`B`，则使用两组。
4.  如果`O`尺寸大于`SS`（512B）会怎样？会不会把数据移到L2，一步步把数据移到L1？它会使用其他套装吗？
5.  如果 L2（和 L3 就此而言）对于所有数据来说都太小了怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:01:46.173

> 虚拟内存块（大小为 4kB (SS * A)，表示为 B）以类似模的方式映射到集合。换句话说，地址 0x0 : 0xFFFF (块索引 (BI) 0) 映射到集合 0，0x1000 : 0x1FFF (BI 1) 映射到 1，依此类推。

**L1 高速缓存和内存层次结构之间的传输：L1 高速缓存和内存层次结构** 的下一级之间的传输单元是行大小 (LS) 字节的块。也就是说，对于您的 L1 缓存，内存以 64 字节块（LS 字节）的形式构成。

**内存块和缓存条目之间的对应关系：** 连续的内存块被映射到连续集合的缓存行。因此，块 0（地址`0x0000 : 0x003F`）映射到集合 0 的高速缓存行，块 1（地址`0x0040 : 0x007F`）映射到集合 1 的高速缓存行，依此类推。

* * *

> 读取/写入请求（不使用非临时写入/读取）给定地址 A 需要找到其 BI，然后将其移动到分配的集合。例如，A = 0x4600A 将具有 BI = 70。此 BI 映射到集合 6 (BI % S)。

找到块标识符（或索引）和集合索引（SI）的正确过程如下：

```
 BI = A >> LS = 0x4600A >> 6 = 0x1180
 SI = BI & (S-1) = 0x1180 & 0x3F = 0x0000
 (when S is a power of two, BI & (S-1) = BI  mod S) 
```

* * *

> 为了正确（没有错位）读/写要缓存的对象（O），需要对 LS 进行对齐。

那是没有必要的。O 不需要块对齐。

* * *

> Q1。O 是否会在缓存中串行对齐，或者它可以占用（例如）空闲插槽 0 & 4 & 5，而不是 0 & 1 & 2？

`O`块将存储在具有高速缓存行粒度的连续集合中（集合 k、k+1、...、S-1、0、1、...）。

> Q2。从缓存中检索分区 O 的成本（惩罚）是多少？假设 O 没有跨多个 B 分区。 Q3。与上述相同的问题，但如果将 O 放在两个 B 中，则使用两组。

`O`我假设您对 CPU从缓存中读取单词的成本感兴趣。假设`O`被顺序引用，缓存访问的次数将等于被引用的字数。我认为成本不取决于相同或不同集合中的块（至少在多端口缓存中）。

> Q4。如果 O 尺寸大于 SS (512B) 会怎样？会不会把数据移到L2，一步步把数据移到L1？它会使用其他套装吗？
> 
> Q5。如果 L2（和 L3 就此而言）对于所有数据来说都太小了怎么办？

如果必须将一个块分配给没有空闲高速缓存行的集合，则必须选择一个块才能被驱逐（受害块）。替换策略根据[**算法**](http://en.wikipedia.org/wiki/Cache_algorithms)（LRU、pLRU、随机）选择牺牲块。

# c++ - c++ - map - 获取这个值的键

> ID：14747757
> 
> 赞同：-3
> 
> 时间：2013-02-07T09:31:54.597
> 
> 标签：c++, winapi, map

我有一个 std::map 的窗口，例如：

```
class MyWindow
{
public:
    MyWindow()
    {
        CreateWindow(...);
    }
    ... // rest of code
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        // code
    }
}

std::map<string, MyWindow> windows; 
```

而在 WndProc 函数内部我想知道函数中现在是哪个窗口，我怎样才能得到这个窗口的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:40:57.797

如果`MyWindow`包含 Windows 句柄 ( `HWND`)，那么您可以使用 eg[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)来查找实例。

就像是：

```
HWND hWnd;  // The window handle to look for

auto windowIterator = std::find_if(std::begin(windows), std::end(windows),
    [hWnd](const std::map<std::string, MyWindow>::value_type& p) -> bool {
        return (p.first.getNativeWindowHandle() == hWnd);
    });
if (windowIterator != std::end(windows))
{
    // `windowIterator` now "points" to the window
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:42:11.080

您可以使用[`SetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx)为`this`给定的`HWND`. `GWLP_USERDATA`用作论据`nIndex`。

这样，您根本不需要地图：当您有一个窗口句柄时，`GetWindowLongPtr`就足以获取一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:42:40.900

您可以对地图进行蛮力搜索：

```
auto it = std::find_if(windows.begin(), windows.end(),
                       [this](std::pair<std::string const, MyWindow> const & p) -> bool
                       { return p.second == *this; } );

if (it == windows.end()) { /* not found */ }
else                     { /* window key is it->first */ } 
```

如果对象是唯一的，您也可以`&p.second == this`在比较中说。

# xml - 将 xml 转换为键值对表示法

> ID：14747762
> 
> 赞同：8
> 
> 时间：2013-02-07T09:32:14.000
> 
> 标签：xml, key-value, xmlstarlet

我`xmlstarlet el -v`用来显示一个xml文件的结构，包括所有的属性和值。我想将其输出转换为某种键值对，即每个属性的值在单独的行上（包括 XPath）；每行必须是唯一的。

当前结果：

```
topRoot/topSystem/commSvcEp/commSyslog[@descr='Syslog Service' and @name='syslog' and @policyOwner='local' and @severity='critical']
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[@adminState='disabled' and @forwardingFacility='local7' and @hostname='none' and @name='secondary' and @severity='critical']
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[@adminState='disabled' and @forwardingFacility='local7' and @hostname='none' and @name='tertiary' and @severity='critical']
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[@adminState='disabled' and @forwardingFacility='local7' and @hostname='none' and @name='primary' and @severity='critical'] 
```

期望的结果（可以是任何类似的东西；索引只是一个想法）：

```
topRoot/topSystem/commSvcEp/commSyslog@descr='Syslog Service'
topRoot/topSystem/commSvcEp/commSyslog@name='syslog'
topRoot/topSystem/commSvcEp/commSyslog@policyOwner='local'
topRoot/topSystem/commSvcEp/commSyslog@severity='critical'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[0]@adminState='disabled'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[0]@forwardingFacility='local7'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[0]@hostname='none'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[0]@name='secondary'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[0]@severity='critical'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[1]@adminState='disabled'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[1]@forwardingFacility='local7'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[1]@hostname='none'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[1]@name='tertiary'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[1]@severity='critical'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[2]@adminState='disabled'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[2]@forwardingFacility='local7'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[2]@hostname='none'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[2]@name='primary'
topRoot/topSystem/commSvcEp/commSyslog/commSyslogClient[2]@severity='critical' 
```

我想要完成的是能够运行`diff`两个这样的文件或`grep`用于过滤匹配模式。我确信有一种方法可以创建这样的输出，而无需使用`sed`，`awk`或除`xmlstarlet`自身之外的任何其他东西。

关于 xmlstarlet 和整个 xml 世界，我几乎是一个新手（不仅因为我不喜欢 xml，因为它的复杂性和解析开销等），所以我非常感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T08:00:38.330

由于您已经在使用`xmlstarlet`，因此您也可以使用 XSLT。

**XSLT 1.0**（可以使用 xmlstarlet`tr`命令运行）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="sep" select="'.'"/>

    <xsl:template match="text()"/>

    <xsl:template match="*">
        <xsl:variable name="path">
            <xsl:for-each select="ancestor-or-self::*">
                <xsl:variable name="predicate">
                    <xsl:call-template name="genPredicate"/>
                </xsl:variable>
                <xsl:if test="ancestor::*">
                    <xsl:value-of select="$sep"/>
                </xsl:if>
                <xsl:value-of select="concat(local-name(),$predicate)"/>
            </xsl:for-each>
        </xsl:variable>
        <xsl:for-each select="@*">
            <xsl:value-of select="concat($path,$sep,name(),'=',.)"/>
            <xsl:text>&#xA;</xsl:text>
        </xsl:for-each>
        <xsl:if test="not(@*)">
            <xsl:text>&#xA;</xsl:text>          
        </xsl:if>
        <xsl:apply-templates select="node()"/>
    </xsl:template>

    <xsl:template name="genPredicate">
        <xsl:if test="preceding-sibling::*[local-name()=local-name(current())] or following-sibling::*[local-name()=local-name(current())]">
            <xsl:value-of select="concat('[',count(preceding-sibling::*[local-name()=local-name(current())])+1,']')"/>          
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

注意：有一个名为的参数`sep`，因此您可以从命令行更改分隔符（使用`-p sep="/"`或任何您想要的分隔符）。它当前设置为您首选的“.”。

**输出**

```
commSyslog.descr=Syslog Service
commSyslog.name=syslog
commSyslog.policyOwner=local
commSyslog.severity=critical
commSyslog.commSyslogClient[1].adminState=disabled
commSyslog.commSyslogClient[1].forwardingFacility=local7
commSyslog.commSyslogClient[1].hostname=none
commSyslog.commSyslogClient[1].name=secondary
commSyslog.commSyslogClient[1].severity=critical
commSyslog.commSyslogClient[2].adminState=disabled
commSyslog.commSyslogClient[2].forwardingFacility=local7
commSyslog.commSyslogClient[2].hostname=none
commSyslog.commSyslogClient[2].name=tertiary
commSyslog.commSyslogClient[2].severity=critical
commSyslog.commSyslogClient[3].adminState=disabled
commSyslog.commSyslogClient[3].forwardingFacility=local7
commSyslog.commSyslogClient[3].hostname=none
commSyslog.commSyslogClient[3].name=primary
commSyslog.commSyslogClient[3].severity=critical
commSyslog.commSyslogMonitor.adminState=disabled
commSyslog.commSyslogMonitor.descr=
commSyslog.commSyslogMonitor.name=
commSyslog.commSyslogMonitor.severity=critical
commSyslog.commSyslogConsole.adminState=disabled
commSyslog.commSyslogConsole.descr=
commSyslog.commSyslogConsole.name=
commSyslog.commSyslogConsole.severity=critical
commSyslog.commSyslogSource.audits=disabled
commSyslog.commSyslogSource.descr=
commSyslog.commSyslogSource.events=disabled
commSyslog.commSyslogSource.faults=enabled
commSyslog.commSyslogSource.name=
commSyslog.commSyslogFile.adminState=enabled
commSyslog.commSyslogFile.descr=
commSyslog.commSyslogFile.name=messages
commSyslog.commSyslogFile.severity=critical
commSyslog.commSyslogFile.size=4194304 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:22:44.480

我决定使用 libxml2 编写一个小程序，它解析 XML 并以所需的格式递归输出。

可以使用以下命令或类似的命令编译代码（我决定将其命名为 xmlkv，*kv*代表键值）：

```
cc -o xmlkv xmlkv.c -s -Os -Wall -Wextra `xml2-config --cflags --libs` 
```

编码：

```
#include <stdlib.h>
#include <stdio.h>
#include <libxml/parser.h>
#include <libxml/tree.h>

static void print_elements(xmlNode *);

static void
print_elements(xmlNode *node)
{
    xmlNode *n;
    xmlAttrPtr a;
    xmlChar *v, *p, *q;

    for (n = node; n; n = n->next) {
        if (n->type == XML_ELEMENT_NODE) {
            if ((p = xmlGetNodePath(n)) == NULL)
                return;

            for (q = p; *q; q++)
                if (*q == '/')
                    *q = '.';

            for (a = n->properties; a; a = a->next) {
                if ((v = xmlGetProp(n, a->name)) == NULL)
                    return;

                printf("%s.%s=%s\n", p + 1, a->name, v);
                xmlFree(v);
            }

            xmlFree(p);
        }

        print_elements(n->children);
    }
}

int
main(int argc, char **argv)
{
    xmlDoc *doc = NULL;
    xmlNode *root = NULL;

    LIBXML_TEST_VERSION

    if (argc != 2) {
        fprintf(stderr, "usage: %s <file>\n", *argv);
        return EXIT_FAILURE;
    }

    if ((doc = xmlReadFile(argv[1], NULL, 0)) == NULL)
        return EXIT_FAILURE;

    if ((root = xmlDocGetRootElement(doc)) == NULL)
        return EXIT_FAILURE;

    print_elements(root);

    xmlFreeDoc(doc);
    xmlCleanupParser();

    return EXIT_SUCCESS;
} 
```

一个测试：

```
$ cat test.xml
<commSyslog descr="Syslog Service" name="syslog" policyOwner="local" severity="critical">
<commSyslogClient adminState="disabled" forwardingFacility="local7" hostname="none" name="secondary" severity="critical"/>
<commSyslogClient adminState="disabled" forwardingFacility="local7" hostname="none" name="tertiary" severity="critical"/>
<commSyslogClient adminState="disabled" forwardingFacility="local7" hostname="none" name="primary" severity="critical"/>
<commSyslogMonitor adminState="disabled" descr="" name="" severity="critical"/>
<commSyslogConsole adminState="disabled" descr="" name="" severity="critical"/>
<commSyslogSource audits="disabled" descr="" events="disabled" faults="enabled" name=""/>
<commSyslogFile adminState="enabled" descr="" name="messages" severity="critical" size="4194304"/>
</commSyslog>

$ ./xmlkv test.xml
commSyslog.descr=Syslog Service
commSyslog.name=syslog
commSyslog.policyOwner=local
commSyslog.severity=critical
commSyslog.commSyslogClient[1].adminState=disabled
commSyslog.commSyslogClient[1].forwardingFacility=local7
commSyslog.commSyslogClient[1].hostname=none
commSyslog.commSyslogClient[1].name=secondary
commSyslog.commSyslogClient[1].severity=critical
commSyslog.commSyslogClient[2].adminState=disabled
commSyslog.commSyslogClient[2].forwardingFacility=local7
commSyslog.commSyslogClient[2].hostname=none
commSyslog.commSyslogClient[2].name=tertiary
commSyslog.commSyslogClient[2].severity=critical
commSyslog.commSyslogClient[3].adminState=disabled
commSyslog.commSyslogClient[3].forwardingFacility=local7
commSyslog.commSyslogClient[3].hostname=none
commSyslog.commSyslogClient[3].name=primary
commSyslog.commSyslogClient[3].severity=critical
commSyslog.commSyslogMonitor.adminState=disabled
commSyslog.commSyslogMonitor.descr=
commSyslog.commSyslogMonitor.name=
commSyslog.commSyslogMonitor.severity=critical
commSyslog.commSyslogConsole.adminState=disabled
commSyslog.commSyslogConsole.descr=
commSyslog.commSyslogConsole.name=
commSyslog.commSyslogConsole.severity=critical
commSyslog.commSyslogSource.audits=disabled
commSyslog.commSyslogSource.descr=
commSyslog.commSyslogSource.events=disabled
commSyslog.commSyslogSource.faults=enabled
commSyslog.commSyslogSource.name=
commSyslog.commSyslogFile.adminState=enabled
commSyslog.commSyslogFile.descr=
commSyslog.commSyslogFile.name=messages
commSyslog.commSyslogFile.severity=critical
commSyslog.commSyslogFile.size=4194304 
```

看起来不错，正是我想要的。当然，替换`/`为`.`几乎没有用，但我更喜欢这种表示法，因为它对眼睛更好。

# php - 即使未选中，复选框值也总是被发布

> ID：14747763
> 
> 赞同：0
> 
> 时间：2013-02-07T09:32:14.943
> 
> 标签：php, magento, magento-1.7

我正在使用以下方法向我的表单添加一个复选框：

```
$fieldset->addField($value, 'checkbox', array(
                    'label'     => $label,
                    'name'      => $value,
                    'checked' => false,
                    'onclick' => "",
                    'onchange' => "",
                    'value'  => $value,
                    'disabled' => false,
                    'tabindex' => 1
                )); 
```

然后在我的控制器中我正在做：

```
if (isset($this->post[$value]))
                {
                    $webCategory = $this->post[$value];
                    if ($webCategory != '') {
                        Mage::log("Syncing: " . $webCategory);
                    }
                } 
```

`$this->post`是`Mage::app()->getRequest()->getPost()`从页面。`$value`包含复选框的 id（所有数据都是动态的，所以我发布了片段）。

我遇到的问题是，即使我没有勾选复选框值，它们也总是被记录下来。我一直认为除非勾选复选框，否则不会发布复选框。我是在丢失它还是 Magento 做了什么奇怪的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:37:02.467

首先检查您的浏览器：发布了哪些数据？浏览器调试器的网络选项卡（例如 Firefox 的 Firebug）会告诉您。那里有复选框数据吗？

其次，检查 HTML：复选框名称是否定义了多次？这可能是它们出现在您的 POST 数据中的原因。

# c# - “参数无效。在 System.Drawing.Bitmap..Ctor（流流）。”

> ID：14747777
> 
> 赞同：1
> 
> 时间：2013-02-07T09:33:00.097
> 
> 标签：c#, asp.net, image, stream, argumentexception

我的代码中出现“参数无效。在 System.Drawing.Bitmap..ctor(Stream stream)”。

我在我的代码中使用以下几行，

```
System.Drawing.Bitmap image = new System.Drawing.Bitmap(fileUpload1.PostedFile.InputStream); 
```

我在这段代码中没有发现任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:40:07.653

在某些情况下，`Bitmap`需要可***搜索***的流。尝试：

```
Bitmap image;
using(var ms = new MemoryStream()) {
    fileUpload1.PostedFile.InputStream.CopyTo(ms);
    ms.Position = 0;
    image = new System.Drawing.Bitmap(ms);
} 
```

然而。我还必须注意，这看起来像 ASP.NET；在 ASP.NET`System.Drawing` *中不受支持：*[请参见此处](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)

> 不支持在 Windows 或 ASP.NET 服务中使用 System.Drawing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T20:49:35.220

这解决了我的问题。

```
 byte[] fileData = null;
using (var binaryReader = new BinaryReader(Request.Files[0].InputStream))
{
    fileData = binaryReader.ReadBytes(Request.Files[0].ContentLength);
}
ImageConverter imageConverter = new System.Drawing.ImageConverter();
System.Drawing.Image image = imageConverter.ConvertFrom(fileData) as System.Drawing.Image;
image.Save(imageFullPath, System.Drawing.Imaging.ImageFormat.Jpeg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T20:21:06.810

此外，有时您会在文件存在但不在该位置时获得该无效参数。我在使用相对路径时遇到了类似的问题，但是我忘记将图像文件设置为复制到 bin 目录，所以我得到了同样的错误。仅供参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T14:34:58.827

就我而言，文件所在的文件夹没有授予应用程序访问该文件的权限。通过尝试直接将文件作为流读取，报告了访问被拒绝的异常。然后我检查了文件和文件夹的安全性，发现它们都没有足够的权限允许应用程序被其他用户读取。最初的“参数无效”错误没有提供足够的信息来诊断实际问题。

# extjs - 分机、应用和数组

> ID：14747778
> 
> 赞同：1
> 
> 时间：2013-02-07T09:33:14.217
> 
> 标签：extjs

我想将两个项目数组合并为一个。我为此使用 Exp.apply 方法。但结果仅包含第二个数组中的项目。

样本

[http://jsfiddle.net/L3HHY/](http://jsfiddle.net/L3HHY/)

预期的结果应该是

```
{ items:[{ name:'xxx' }, { name2:'yyy'}]}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:37:16.147

您可以使用[`array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)功能：

```
var items = [{name: 'a'}];

items.push({name: 'b'}); //  items = [{name: 'a'}, {name: 'b'}] 
```

或者[`Ext.Array.merge()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array-method-merge)：

```
items = Ext.Array.merge([{name: 'a'}], [{name: 'b'}]) 
```

# android - Android进程经常产生logcat“已死亡”消息。

> ID：14747780
> 
> 赞同：14
> 
> 时间：2013-02-07T09:33:17.817
> 
> 标签：android

我正在开发一个作为服务运行并等待消息的应用程序。检查日志后，我发现Android经常杀死并重新启动许多进程！这不仅发生在我的应用程序上，许多其他服务也是如此。

我看不出有任何原因，而且我的设备有足够的内存。我使用运行 Android 4.0.4 的 Sony Xperia S 进行测试。这是正常的还是错误的？

这是日志的一部分，向您展示我的意思：

02-04 15:02:38.791 320 332 I ActivityManager:**进程 com.android.email (pid 32763) 已经死亡。** 02-04 15:02:38.791 320 332 W ActivityManager：计划在 5000 毫秒内重新启动崩溃的服务 com.android.email/.service.MailService

.... 13 分钟后：

02-04 15:15:32.601 320 694 I ActivityManager:**进程 com.android.email (pid 1453) 已经死亡。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T09:52:52.077

这很正常，操作系统会定期执行此操作。

*为什么？每个应用程序或服务在不活动或在后台时都保留在内存中，直到 Android 内存管理器决定它要么无缘无故地占用太多内存，或者当另一个活动的应用程序/服务需要它时。例如，当`home`您在电子邮件应用程序中点击按钮时。它将返回到您重新打开应用程序时所在的确切位置。因为这个应用程序只是暂停并在内存中处于某种休眠模式。除非 Android 需要为其他任何东西分配该内存，否则它将保留在那里。*

确保操作系统不会杀死您的服务的一种方法是创建持久服务。

如果您正在开发系统应用程序，您只能使您的服务持久化。这些服务基本上是不可杀死的，并且在“adb shell dumpsys activity”命令的输出中被标记为“PERS”。

[http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)

但：

请使用`AlarmManager`和`IntentService`，因此您的服务不需要在内存中，除非它正在做有意义的工作。这也意味着 Android 不太可能在您在内存中时终止您的服务，并且用户不太可能因为认为您在浪费内存而终止您的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-16T15:24:16.307

另一个可能的原因是为主线程定制了 Thread.UncaughtExceptionHandler。

默认情况下，如果进程由于某些未捕获的异常而被终止，Android OS 将显示一个错误对话框。但是您可以设置自定义 Thread.UncaughtExceptionHandler 并且不要将异常传播到默认的 Thread.UncaughtExceptionHandler，而是您可以直接终止该进程。然后您将不会在日志中看到任何错误消息，除了

02-04 15:02:38.791 320 332 I ActivityManager: 进程 com.your.app (pid 32763) 已经死亡。

你的进程将无声无息地死去。

如果您只想存储 Exception 并且不显示某些后台进程可能出现的错误对话框，这是一种方便的方法。

# python-2.7 - 为什么在 Windows Vista 64 中的 Python 2.7 中安装 psycopg2-2.4.6 的最后一行出现错误？

> ID：14747781
> 
> 赞同：0
> 
> 时间：2013-02-07T09:33:19.723
> 
> 标签：python-2.7

为什么在 Windows Vista 64 中的 Python 2.7 中安装 psycopg2-2.4.6 的最后一行出现错误？像这样 raise ValueError(str(list(result.keys()))) ValueError: [u'path']

在此安装之前，我已经安装了 msdn。

因为在安装 msdn 之前它显示 bat 文件丢失的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:55:32.643

从源代码构建 python 模块在 Windows 上可能会很痛苦。尝试安装visual studio epxress edition 2008，它将安装缺少的编译器并调整配置。如果您仍然有错误，请从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#psycopg](http://www.lfd.uci.edu/~gohlke/pythonlibs/#psycopg)安装二进制文件（我建议您将此页面添加为书签，它对 Windows 上的 Python 开发人员非常有用）

# asp.net-mvc - 构建源代码时，Visual Studio Express 太挂了

> ID：14747782
> 
> 赞同：1
> 
> 时间：2013-02-07T09:33:26.527
> 
> 标签：asp.net-mvc, sql-server-2008, ssms, sql-server-2008-express, visual-web-developer-2010

我在我的 PC 中使用**Visual Web Developer 2010 Express**来构建 MVC 3 应用程序。在我昨天安装**Sql Server 2008 Management Studio**之前它工作正常。

安装 SSMS 后，当我构建 MVC 3 Web 应用程序时，我的 Visual Web Developer 挂起。

当我打开项目时，OutPut 窗口中会显示一条消息。

```
Some of the properties associated with the solution could not be read. 
```

我不知道我的电脑发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T06:37:59.103

你需要修复你的vs 2010。然后重新启动PC。

请检查这个链接你可以看到一步一步的例子

[http://msdn.microsoft.com/en-us/library/aa983433(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/aa983433(v=vs.90).aspx)

希望它会有所帮助。

# machine-translation - 语言翻译库

> ID：14747783
> 
> 赞同：0
> 
> 时间：2013-02-07T09:33:33.010
> 
> 标签：machine-translation

我想将英语翻译成法语，所以我需要使用一些离线翻译机制而不是在线翻译。那么任何人都可以为开源的语言翻译库提供有价值的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:07:22.100

检查以下网址，看看它是否对您有帮助 [http://digitalforces.blogspot.in/2012/04/offline-google-translator-by-c.html](http://digitalforces.blogspot.in/2012/04/offline-google-translator-by-c.html)

# python - Py2app 为旧的 mac 版本编译应用程序

> ID：14747788
> 
> 赞同：0
> 
> 时间：2013-02-07T09:33:42.350
> 
> 标签：python

嗨，我正在为 mac 开发一个 python 程序，当我尝试在旧版本的 Mac 上使用该应用程序时出现错误。例如，我在 mac 10.8.2 上开发，应用程序未在 10.7 上运行。*

有什么方法可以编译程序（使用 py2app），使其与旧的 mac 版本兼容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:36:57.667

[http://packages.python.org/py2app/tweaking.html](http://packages.python.org/py2app/tweaking.html)

这可能会有所启发。您需要指定应用程序将在哪些平台上运行，否则它将默认为您当前 OSX 版本的运行时库（例如，可能是 64 位，32 位的旧 Mac 无法运行它（作为一个粗略的例子） )

Py2exe 的原理相同，但它对 Windows 二进制文件执行相同的操作。如果你在 Win7 上编译它，并尝试在 XP 机器上运行二进制文件，你会丢失运行时 dll 库。然后你必须选择，要么在 app/exe 中编译它，要么将运行时与应用程序一起提供二进制文件。

您在 Py2app 中主要寻找的是 --resource 参数。 [http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#option-reference](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#option-reference)

`--resource <comma separated list of resources>`这将不包括源代码，而是库、图像以及您需要运送到旧平台的任何内容。

# jquery - 如何切换手风琴 (+,-) 的图像 使用 jQuery 在 asp.net 中的类同名？

> ID：14747793
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:33:53.970
> 
> 标签：jquery, asp.net, accordion, slidetoggle

我是 jquery 的新手，请帮我解决这个问题我有一个带有 5Headers 的手风琴，使用 JQuery 点击即可打开。我添加了图像以在单击标题时显示 + 和 - 图像。这很好用，但我也一样

类名相同，它将所有图像设置为 + 或 -

```
<script type="text/javascript">
        jQuery(document).ready(function () {
            jQuery(".content1").hide();

            jQuery("#head1").click(function () {

                jQuery(this).next(".content1").slideToggle(600);

                if ($("#img1").attr('src') == "Images/minus.png") {
                    jQuery("#img1").attr('src', "Images/plus.gif");
                }
                else {
                    jQuery("#img1").attr('src', "Images/minus.png");
                }

                jQuery("#head2").click(function () {

                    jQuery(this).next(".content1").slideToggle(600);

                    if ($("#img2").attr('src') == "Images/minus.png") {
                        jQuery("#img2").attr('src', "Images/plus.gif");
                    }
                    else {
                        jQuery("#img2").attr('src', "Images/minus.png");
                    }

                if ($("#img2").attr('src') == "Images/minus.png") {
                    jQuery("#img2").attr('src', "Images/plus.gif");
                }
                else {
                    jQuery("#img2").attr('src', "Images/minus.png");
                }

                if ($("#img3").attr('src') == "Images/minus.png") {
                    jQuery("#img3").attr('src', "Images/plus.gif");
                }
                else {
                    jQuery("#img3").attr('src', "Images/minus.png");
                }

                if ($("#img4").attr('src') == "Images/minus.png") {
                    jQuery("#img4").attr('src', "Images/plus.gif");
                }
                else {
                    jQuery("#img4").attr('src', "Images/minus.png");
                }

            });
        });
    </script>

 .heading1
        {
            margin: 1px;
            color: #fff;
            padding: 3px 10px;
            cursor: pointer;
            position: inherit;
            background-color: rgba(25, 130, 209, 0.7);
            background-color: rgb(25, 130, 209);
            padding-left: 10px;
            color: #F4F4F4;
            font-size: 1.3em;
            font-weight: 400;
            padding: 1%;

        }

.content1
        {
            padding: 5px 10px;
            background-color: #fafafa;
            z-index:3;
        }

 <p class="heading1" id="head1">
            <img class="imageToggle" id="img1" src="Images/plus.gif" height="20px" width="20px" /> Evidence-Based Practices.</p>
        <div class="content1">
            A wide variety of interventions are available for addressing behavioral
<div>

<p class="heading1" id="head2"><img class="imageToggle" id="img2" src="Images/plus.gif" height="20px" width="20px" />Improving Lives, Not Just Behavior.</p>
        <div class="content1">
            Although reducing behavioral 
<div> 
```

请给我一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:42:32.447

您的标记无效，您有未关闭的 div 元素，也 `p`用作按钮不是语义的，您可以用`a`元素替换它们。

```
$(document).ready(function () {
    $(".content1").hide();
    $(".heading1").click(function (e) {
        // e.preventDefault // in case that you are using `a` element
        $(this).next(".content1").slideToggle(600);
        $('img', this).prop('src', function(i, src){
            return src === 'Images/minus.png' ? 'Images/plus.gif' : 'Images/minus.png';
        });
    });
}); 
```

# javascript - JavaScript | JSON 对象按值合并和排序

> ID：14747795
> 
> 赞同：1
> 
> 时间：2013-02-07T09:34:01.917
> 
> 标签：javascript, json

我有以下 json 对象，我喜欢将它们合并为一个对象，并根据“分钟”值缩短子对象。这对 JavaScript 可行吗？

```
[Object, Object, Object]
    0: Object
        Live: "188585"
        Minute: "17"
        Player: "Player A"
        Team: "188564"
        __proto__: Object
    1: Object
        Live: "188585"
        Minute: "26"
        Player: "Player B"
        Team: "188564"
        __proto__: Object
    2: Object
        Live: "188585"
        Minute: "77"
        Player: "Player A"
        Team: "188564"
        __proto__: Object
[Object, Object]
    0: Object
        Live: "188585"
        Minute: "31"
        Player: "Player C"
        Team: "188558"
        __proto__: Object
    1: Object
        Live: "188585"
        Minute: "41"
        Player: "Player D"
        Team: "188558"
        __proto__: Object 
```

我喜欢这样的结果：

```
[Object, Object, Object, Object, Object]
    0: Object
        Live: "188585"
        Minute: "17"
        Player: "Player A"
        Team: "188564"
        __proto__: Object
    1: Object
        Live: "188585"
        Minute: "26"
        Player: "Player B"
        Team: "188564"
        __proto__: Object
    2: Object
        Live: "188585"
        Minute: "31"
        Player: "Player C"
        Team: "188558"
        __proto__: Object
    3: Object
        Live: "188585"
        Minute: "41"
        Player: "Player D"
        Team: "188558"
        __proto__: Object
    4: Object
        Live: "188585"
        Minute: "77"
        Player: "Player A"
        Team: "188564"
        __proto__: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:40:36.063

如果您的两个数组已经按分钟排序，您可以使用“经典”合并算法。如果没有，您可以连接您的数组并使用 Array.sort 对结果进行排序（具有特定的比较功能）。

编辑：这是一个例子：

1.  如果数组未排序：

    ```
    var result = array1.concat(array2);
    result.sort(function(item1, item2) {
        return item1.Minute - item2.Minute;
    }); 
    ```

2.  如果数组是排序的，这里有一个简单的合并函数：

    ```
    function merge(array1, array2) {
        var results = [];
        var i = 0, j = 0;
        while (i < array1.length && j < array2.length) {
            if (array1[i].Minute <= array2[j].Minute) {
                results.push(array1[i];
                i++;
            }
            else {
                results.push(array2[j];
                j++;
            }
        }
        while (i < array1.length) {
            results.push(array1[i];
            i++;
        }
        while (j < array2.length) {
            results.push(array2[j];
            j++;
        }
        return results;
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:49:08.680

更多的对象，它们似乎是对象的数组。如果是这种情况，您可以使用[Array.concat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)进行连接，并使用[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)进行排序。

就像是：

```
// assuming `aba` is the first array, `cd` the second
var result = aba.concat(cd);

result.sort(function(a, b) {
    return a.Minute - b.Minute // implicit conversion in number
});

console.log(result); 
```

# iphone - 默认应用图标形状在我的图标后面可见

> ID：14747798
> 
> 赞同：0
> 
> 时间：2013-02-07T09:34:03.320
> 
> 标签：iphone, ios, ipad

我面临一个非常奇怪的问题。在我的应用程序完成后，我为我的 iPad 应用程序添加了一个图标。工作正常。但由于我的图标设计有些不同，iPad 默认图标背景的某些部分是可见的。

![检查这里的屏幕截图](../Images/75504be28b8fcc34384a112aa7c179f6.png)

如果你看，后面的黑色部分是可见的，看起来很丑。我想以某种方式删除它。如何克服这一点？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:53:10.157

来自[苹果指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)：

> 确保您的图标符合 iOS 提供的视觉增强功能。您应该提供一张图片：
> 
> *   有 90° 角（避免裁剪图标的角很重要——iOS 在应用圆角遮罩时会为您做到这一点）
> *   不包括阴影
> *   没有任何光泽或光泽（除非您选择防止添加反光光泽）
> *   不使用 alpha 透明度

所以..不要使用透明度！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:47:35.430

你不能。但是，您将图标的背景从透明更改为黑色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:49:23.067

应用程序图标不能使用透明度。它们必须具有纯色背景。您可以做的是将图标的背景设置为黑色，但这仍会显示在彩色背景上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:46:48.393

您是否尝试在 xcode 摘要屏幕中设置“图标已包含光泽效果”？这可能是因为光泽效果与黑色融为一体，让您看起来如此

希望这可以帮助

干杯

# c# - 我如何将格式为“1.123”和“1,123”的字符串值转换为单双精度.TryParse？

> ID：14747799
> 
> 赞同：1
> 
> 时间：2013-02-07T09:34:07.020
> 
> 标签：c#, .net, string, double, typeconverter

我有一个字符串值的传入源，它用“。”表示双值。和“，”分隔符和我的程序将在具有不同分隔符设置（“，”或“，”）的PC上运行
我可以用单行转换它而不尝试先转换“。”，然后如果失败，请尝试“， “？
我尝试了一些这样的组合：

```
 string dot_val = "1.12";
    string non_dot_val = "1,12";

    double dot_double = 0, non_dot_double = 0;

    bool dot_res = double.TryParse(dot_val, NumberStyles.Any, CultureInfo.CurrentCulture, out dot_double);
    bool non_dot_res = double.TryParse(non_dot_val, NumberStyles.Number | NumberStyles.AllowCurrencySymbol, CultureInfo.CurrentCulture, out non_dot_double); 
```

但是转换的尝试之一总是失败。
如果很快告诉它，我需要一个通用函数来转换“。” 或 "," 将双精度值分隔为双精度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:38:29.963

好吧，当前的文化告诉您是否`.`是`,`小数分隔符。如果您希望您的函数解析这两种格式，则需要传入具有相应分隔符的区域性。在您的示例中：

```
public double UniveralParse(string value)
{
    double result;

    // If we can not parse the "." format...
    if (!double.TryParse(value, NumberStyles.Any, CultureInfo.GetCultureInfo("en-US"), out result))
        // And also can not parse the "," format...
        if (!double.TryParse(value, NumberStyles.Any, CultureInfo.GetCultureInfo("de-DE"), out result))
            // we throw an exception
            throw new ArgumentException("value is not in expected format!");

    // Otherwise we can return the value
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:39:39.400

最简单的方法是将 ',' 替换为 '.' 并使用不变的文化设置解析结果：

```
double.TryParse(
          dot_val.Replace(',','.'), 
          NumberStyles.Any, 
          CultureInfo.InvariantCulture, 
          out dot_double); 
```

唯一的限制是你不应该在你的号码中分组（比如 123,000.45）

# css - 如何将 div 对齐到顶部

> ID：14747800
> 
> 赞同：0
> 
> 时间：2013-02-07T09:34:11.683
> 
> 标签：css, css-float

好的，所以我将我的 wordpress 内容设置为全部浮动。所以它将是3列。

现在，当一个 div 的标题更长时，盒子到处都是。这就是我的意思（见下图）

![在此处输入图像描述](../Images/0c91aebc1fb74997a03511d6dce659c3.png)

请注意，james brown 标题较长，而其他两个框则向下倾斜。

无论标题有多长，我怎样才能让它们浮起来。

我已经尝试过`vertical-align:top;`，但这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:48:19.920

你可以通过两种方式得到它。

**如果您希望您的框在每一行上对齐：只需使用 .clear 元素。**

```
h2 {
    font-weight: bold;
    clear: left;    
}
.box { 
    width: 50px;
    min-height: 50px;
    background: #ccc;
    margin: 3px;
    padding: 3px;
    float: left;
}
.clear {
    clear: both;
    height: 0px;
}
```

```
<h2>Without columns</h2>
<div class="box">1 Lorem Ipsum</div>
<div class="box">2 Lorem Ipsum Lorem Ipsum</div>
<div class="box">3 Lorem Ipsum</div>
<p class="clear">&nbsp;</p>
<div class="box">4 Lorem Ipsum Lorem</div>
<div class="box">5 Lorem Ipsum</div>
<div class="box">6 Lorem Ipsum</div>
<p class="clear">&nbsp;</p>
<div class="box">7 Lorem Ipsum</div>
<div class="box">8 Lorem Ipsum</div>
```

**如果您希望您的盒子粘在上面的盒子上，请使用列（您需要修改一些 PHP 代码）**

```
h2 {
    font-weight: bold;
    clear: left;    
}
.box { 
    width: 50px;
    min-height: 50px;
    background: #ccc;
    margin: 3px;
    padding: 3px;
    float: left;
}
.column {
    width:60px;
    float: left;
}
```

```
<h2>With columns</h2>
<div class="column">
    <div class="box">1 Lorem Ipsum</div>
    <div class="box">4 Lorem Ipsum Lorem</div>
    <div class="box">7 Lorem Ipsum</div>
</div>
<div class="column">
    <div class="box">2 Lorem Ipsum Lorem Ipsum</div>
    <div class="box">5 Lorem Ipsum</div>
    <div class="box">8 Lorem Ipsum</div>
</div>
<div class="column">
    <div class="box">3 Lorem Ipsum</div>
    <div class="box">6 Lorem Ipsum</div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:55:09.630

使用新的`nth-child()`选择器，您可以这样做：

```
div:nth-child(3n+1) {
  clear:left;
} 
```

这样，第 1 个、第 4 个、第 7 个等，孩子将移动框的左侧“清除”所有其他元素。

使用这种方法的好处是可以响应式地调整布局。例如，在手机上，每行可以有两个，在大型台式机上，每行可以有 4 个。也没有非语义标记。

缺点是它在 IE 9 之前的版本中不起作用，但您可以使用 JavaScript 解决这个问题。例如 jQuery：

```
// polyfill for browsers that don't support nth-child() CSS selectors
$('.box:nth-child(3n+1)').style('clear', 'left'); 
```

见：http: [//jsfiddle.net/rVHgR/](http://jsfiddle.net/rVHgR/)

![在此处输入图像描述](../Images/662476579f7ab04c477ec41708301593.png)

# php - 如何从 PHP 中的单选按钮发送值属性

> ID：14747803
> 
> 赞同：19
> 
> 时间：2013-02-07T09:34:14.123
> 
> 标签：php, radio-button, send

我正在努力将单选按钮的值发送到电子邮件。

我编写了 2 个单选按钮，我将第一个设置为默认检查。

表单和值有效，但未提交单选按钮值。

有什么妙语吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-23T09:50:43.577

当您选择单选按钮并单击提交按钮时，您需要使用`$_POST[]` 例如：如果您的单选按钮是：

```
<input type="radio" name="rdb" value="male"/> 
```

然后在你的 php 代码中你需要使用：

```
$rdb_value = $_POST['rdb']; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T10:02:30.183

检查您是否将 name="your_radio" 放置在您插入无线电标签的位置

如果你已经这样做了，那么检查你的 php 代码。使用 isset()

例如

```
 if(isset($_POST['submit']))
   {
    /*other variables*/
    $radio_value = $_POST["your_radio"];
   } 
```

如果您也这样做了，那么我们需要查看您的代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:45:58.683

当您选择单选按钮并单击提交按钮时，您需要使用 $_POST[] 处理 php 代码中任何选定值的提交
例如：
如果您的单选按钮是：

```
<input type="radio" name="rdb" value="male"/> 
```

然后在你的 php 代码中你需要使用：

```
$rdb_value = $_POST['rdb']; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T09:38:32.820

单选按钮仅在选中时在表单提交时发送...

如果为真则使用`isset()`它，否则它不是

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T09:43:56.973

应该 ：

HTML：

```
<form method="post" action="">
    <input id="name" name="name" type="text" size="40"/>
    <input type="radio" name="radio" value="test"/>Test
    <input type="submit" name="submit" value="submit"/>
</form> 
```

PHP代码：

```
if(isset($_POST['submit']))
{

    echo $radio_value = $_POST["radio"];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T09:47:32.223

单选按钮有另一个属性 - 选中或未选中。您需要设置用户选择了哪个按钮，因此您必须使用这些值在 HTML 中编写 PHP 代码 - 选中或未选中。这是一种方法：

**PHP代码：**

```
<?PHP
    $male_status = 'unchecked';
    $female_status = 'unchecked';

    if (isset($_POST['Submit1'])) {
         $selected_radio = $_POST['gender'];

         if ($selected_radio == 'male') {
                $male_status = 'checked';
          }else if ($selected_radio == 'female') {
                $female_status = 'checked';
          }
    }
?> 
```

**HTML 表单代码：**

```
<FORM name ="form1" method ="post" action ="radioButton.php">
   <Input type = 'Radio' Name ='gender' value= 'male'
   <?PHP print $male_status; ?>
   >Male
   <Input type = 'Radio' Name ='gender' value= 'female' 
   <?PHP print $female_status; ?>
   >Female
   <P>
   <Input type = "Submit" Name = "Submit1" VALUE = "Select a Radio Button">
</FORM> 
```

# javascript - 如何在Jquery中使用选择器遍历来自文档等后功能的回调数据

> ID：14747804
> 
> 赞同：0
> 
> 时间：2013-02-07T09:34:18.087
> 
> 标签：javascript, jquery, function, callback, traversal

如何使用 JQuery 遍历来自像文档这样的后 ajax 的回调数据：

```
$.post(URL,function(data){
    alert($(data+'> div#xy').html(););
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:46:03.270

您需要通过执行从“数据”创建 jQuery 对象

```
var myData = $(data); 
```

那么你可以简单地使用

```
var whatIWantToSelect = myData.find('enter selector here'); 
```

找到你需要的任何东西

# sql-server-2008 - 来自多个 Web 服务的城市详细信息的数据库设计

> ID：14747809
> 
> 赞同：1
> 
> 时间：2013-02-07T09:34:25.450
> 
> 标签：sql-server-2008, database-design

我正在开发旅行应用程序，所以我们必须处理不同的网络服务，如 GTA、Gallileo、Kuoni 等。获取有关酒店详细信息的信息。每个 Web 服务都有自己的城市代码和城市名称列表。我想设计一个表格来存储来自不同网络服务的城市详细信息，经过一些研究，我来到了这两种方法

第一种方法

```
CREATE TABLE [dbo].[City](
[CityID] [int] NOT NULL,
[CountryCode] [varchar](5) NOT NULL,
[AppCityCode] [varchar](10) NOT NULL,
[AppCityName] [varchar](200) NOT NULL,
[GTACityCode] [varchar](10) NULL,
[GTACityName] [varchar](200) NULL,
[GWSCityCode] [varchar](10) NULL,
[GWSCityName] [varchar](200) NULL,
[KuoniCityCode] [varchar](10) NULL,
....
....
....
....
....
....
) 
```

在这种方法中，当添加新的 Web 服务时，会添加与 Web 服务相对应的两列（城市代码和城市名称），由于这种修改，存储过程和前端应用程序代码将会发生变化。在文本框中加载城市时不会重复

第二种方法 WSSupplier 表用于存储 Web 服务详细信息，例如 GTA、Gallileo..

```
CREATE TABLE [dbo].[WSSupplier](
[SupplierID] [smallint] NOT NULL,
[SupplierName] [varchar](100) NOT NULL
)

CREATE TABLE [dbo].[City](
[CityID] [int] IDENTITY(1,1) NOT NULL,
[AppCityCode] [varchar](20) NULL,
[AppCityName] [varchar](150) NULL,
[CountryCode] [varchar](10) NULL,
[WSSupplierID] [smallint] NULL,
[WSCityCode] [varchar](20) NULL,
[WSCityName] [varchar](150) NULL
) 
```

在第二种方法中，城市将使用相应的 Web 服务供应商 ID 逐行添加如果有新的 Web 服务出现，那么我不必修改表结构或在前端应用程序中。在加载城市时，我必须使用 DISTINCT 在文本框或前端下拉列表中加载唯一城市

在这两种方法中，我都使用 Appcitycode 和 Appcityname 这将在应用程序中加载城市文本框或下拉菜单。在选择 Appcityname 时，它​​将获取相应的 Web 服务城市代码并将其作为请求发送到 Web 服务以搜索特定城市的酒店。

我想知道哪个是最好的方法，或者是否有其他好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:21:38.027

第三种方法是在您的城市表和供应商表之间创建一个交叉表，其中列出了供应商的城市代码版本。

您的城市表将只有您自己系统的城市标识符。这座城市只会出现一次。每次添加供应商时，您都会在交叉表中插入新记录，其中包含供应商关心的城市的城市代码。供应商城市代码到您的内部城市代码的转换是交叉表中的简单查找。

考虑这样的事情：

```
CREATE TABLE [dbo].[WSSupplier](
[SupplierID] [smallint] NOT NULL,
[SupplierName] [varchar](100) NOT NULL
)

CREATE TABLE [dbo].[City](
[CityID] [int] IDENTITY(1,1) NOT NULL,
[CityCode] [varchar](20) NULL,
[CityName] [varchar](150) NULL,
[CountryCode] [varchar](10) NULL
)

CREATE TABLE [dbo].[SupplierCityCode](
[CityID] [int] NOT NULL,
[WSSupplierID] [smallint] NULL,
[WSCityCode] [varchar](20) NULL,
[WSCityName] [varchar](150) NULL,
FOREIGN KEY [fk_city] [CityID] REFERENCES [dbo].[City],
FOREIGN KEY [fk_supplier] [WSSupplierID] REFERENCES [dbo].[WSSupplier]
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:47.427

您的问题是关于应用程序和数据库设计的。从应用程序设计的角度尝试从数据库设计中抽象出来，并将其视为您的业务对象的一些存储。从数据库设计的角度来看，您的问题是关于数据库规范化 - 从[Wikipedia 上的这篇文章](http://en.wikipedia.org/wiki/Database_normalization)开始，作为通往数据库设计大世界的大门。至于我：

```
CREATE TABLE [dbo].[Supplier](
[SupplierID] [smallint] NOT NULL,
[SupplierName] [varchar](100) NOT NULL
)

CREATE TABLE [dbo].[AppCity](
[CityID] [int] IDENTITY(1,1) NOT NULL,
[CityCode] [varchar](20) NULL,
[CityName] [varchar](150) NULL,
[CountryCode] [varchar](10) NULL,
)

CREATE TABLE [dbo].[SupplierCity](
[CityID] [int] IDENTITY(1,1) NOT NULL,
[SupplierID] [smallint] NOT NULL,
[CityCode] [varchar](20) NULL,
[CityName] [varchar](150) NULL
) 
```

# javascript - 无法在 gridview 内单击按钮时触发 jQuery 函数

> ID：14747810
> 
> 赞同：0
> 
> 时间：2013-02-07T09:34:26.973
> 
> 标签：javascript, jquery, asp.net, button, click

我有gridview，里面有一个按钮，我想在点击时调用一个jQuery函数。

这是我的提示：

```
<asp:GridView ID="gvContactUs" runat="server" AllowSorting="True" AutoGenerateColumns="False"
     DataKeyNames="ContactID" Width="100%" CellPadding="3" CellSpacing="1" 
     OnPageIndexChanging="gvContactUs_PageIndexChanging"
     OnRowCommand="gvContactUs_RowCommand" 
     OnRowDataBound="gvContactUs_RowDataBound"
     OnRowDeleting="gvContactUs_RowDeleting" 
     OnSorting="gvContactUs_Sorting" AllowPaging="True"
     BackColor="White" BorderColor="White" BorderStyle="Ridge" 
     BorderWidth="2px" GridLines="None">
     <Columns>
         <asp:TemplateField HeaderText="Edit" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="3%">
             <ItemTemplate>
                 <asp:Button Text="text" ID="hello" runat="server" />
             </ItemTemplate>
             <HeaderStyle Width="7%" />
             <ItemStyle HorizontalAlign="Center" />
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Name" ItemStyle-HorizontalAlign="Left">
             <ItemTemplate>
                 <%#Eval("Name")%>
             </ItemTemplate>
             <ItemStyle HorizontalAlign="Left" />
             <HeaderStyle Width="11%" />
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Email" ItemStyle-HorizontalAlign="Left" HeaderStyle-Width="13%">
             <ItemTemplate>
                 <a href="mailto:<%#Eval("Email")%>" class="EmailLink">
                 <%#Eval("Email")%></a>
             </ItemTemplate>
             <HeaderStyle Width="13%" />
             <ItemStyle HorizontalAlign="Center" />
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Phone" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
             <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
             <ItemStyle HorizontalAlign="Center" Width="40px" />
             <ItemTemplate>
                 <%#Eval("Phone")%>
             </ItemTemplate>
             <HeaderStyle Width="8%" />
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Status" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
             <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
             <ItemStyle HorizontalAlign="Center" Width="40px" />
             <ItemTemplate>
                  <%#Eval("Subject")%>
             </ItemTemplate>
             <HeaderStyle Width="13%" />
         </asp:TemplateField>
         <asp:TemplateField HeaderText="Delete" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="7%">
             <ItemTemplate>
                 <asp:LinkButton CommandName="Delete" CommandArgument='<%#Eval("ContactID") %>' runat="server" ID="lnkbtnDelete">
                     <img src="Images/delete.gif" border="0" alt='Click to Delete this Entry' title='Click to Delete this Entry' />
                 </asp:LinkButton>
             </ItemTemplate>
             <HeaderStyle Width="7%" />
             <ItemStyle HorizontalAlign="Center" />
         </asp:TemplateField>
     </Columns>
     <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
     <HeaderStyle Height="30px" BackColor="#3E3050" Font-Bold="True" ForeColor="#ffffff" />
     <PagerStyle ForeColor="Black" BackColor="#C6C3C6" HorizontalAlign="Right" />
     <RowStyle Height="25px" BackColor="#DEDFDE" ForeColor="Black" />
     <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
     <SortedAscendingCellStyle BackColor="#F1F1F1" />
     <SortedAscendingHeaderStyle BackColor="#594B9C" />
     <SortedDescendingCellStyle BackColor="#CAC9C9" />
     <SortedDescendingHeaderStyle BackColor="#33276A" />
 </asp:GridView> 
```

jQuery代码是：

```
 $('[id$=hello]').live('click', function (e) {
        alert('hi8');

    });

    $(function () {

        $('input[id$=hello]').click(function () {

            alert('hikkk');
            return false;
        });
    }); 
```

这两件事我已经尝试过，但仍然无法调用 jQuery 函数。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:36:14.633

使用[属性包含](http://api.jquery.com/attribute-contains-selector/)选择器`*`而不是[属性以 . 结尾](http://api.jquery.com/attribute-ends-with-selector/) `$`。还要确保您已成功包含所需的 jQuery 库。

```
$(function () {    
      $('input[id*=hello]').click(function () {    
            alert('hikkk');
            return false;
      });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:37:26.123

试试这个

```
$(document).ready(function() {
    $('input[id$=hello]').click(function() {
        //Your logic goes here
        alert('Im clicked');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:46:33.070

你为什么不在你`OnClientClick`的按钮上使用

```
 <asp:Button Text="text" ID="hello" runat="server" OnClientClick="return check();" />

<script type="text/javascript">
      function check()
      {
              alert("hi")
              return false;
      }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:47:05.690

试试这个：

```
$(document).on('click', '[id*="hello"]', function(){
   alert('clicked.');
}); 
```

# apache-flex - 每次都重新加载 Flex 选项卡式视图

> ID：14747814
> 
> 赞同：1
> 
> 时间：2013-02-07T09:34:42.390
> 
> 标签：apache-flex, air, flex4.5

我有一个非常简单的手机 Flex 应用程序，它使用 3 个选项卡（带有`TabbedViewNavigatorApplication`）。

似乎每次我切换选项卡时，都会重新加载所选视图。

我已经设置了一个 creationComplete 命令来执行某些操作，并且每次单击选项卡时它都会执行该功能。

视图是否有可能加载 1 次，仅此而已？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:12:10.170

在我看来，这种行为正是移动设备上的重点，因为您希望尽可能降低内存/cpu 使用率。

这实际上意味着销毁所有非活动视图和所有相关视图组件/对象。

`destructionPolicy`但是，您可以通过将每个视图上的 设置为 来覆盖此默认行为`destructionPolicy="never"`。

[这篇博](http://corlan.org/2011/01/12/understanding-flex-mobile-views-and-viewnavigator/)文将解释您需要获得的基本理解。

干杯

# javascript - onclick 定义的文本变量在日志中返回空字符串

> ID：14747818
> 
> 赞同：0
> 
> 时间：2013-02-07T09:34:53.127
> 
> 标签：javascript, jquery, extjs, ext.net

```
var listname=$(this).parents(".x-grid3-row-table").children(".x-grid3-cell-inner.x-grid3-col-1").text();
console.log(listname); 
```

console.log 返回以下内容：

```
(an empty string) 
```

你能帮我解释一下为什么 listname 是空的吗？你能告诉我如何将listname 作为参数传递给Ext.Ajax.request 中的服务器端方法吗？

这是来自我生成的页面的 html 代码：

```
<table class="x-grid3-row-table>
  <tr>
   <td class="x-grid3-col x-grid3-cell x-grid3-td-1 " tabindex="0" style="text-align: left;width: 265px;">
     <div class="x-grid3-cell-inner x-grid3-col-1" unselectable="on">foo_bar@domain.de</div>
   </td>
   <td class="x-grid3-col x-grid3-cell x-grid3-td-2 x-grid3-cell-last " tabindex="0" style="width: 59px;">
      <div class="x-grid3-cell-inner x-grid3-col-2" unselectable="on">
        <span class="free">free</span>
       </div>
   </td>
  </tr>
  <tr class="x-grid3-row-body">
  <!-- 7 Elements Markup down, who all act wrapping for the following -->
    <div class="details">
      <!-- some other markup elements, who also contain data, but are not further interesting-->
      <td class="data"> foo bar detail data </td><!-- not of interest-->
      <td class="edit"><input value="edit" onclick="see function on top" type="button" /> </td>
    </div>
  </tr>
</table> 
```

目标是提取：**foo_bar@domain.de**并将其作为参数传递给服务器方法。该方法应该制作一个窗口，但这是另一回事。

onclick 调用来自扩展的网格面板主体，它`table('.x-grid3-row-table')`使用给定的 html 代码包装在 a 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:41:43.210

您的子选择器中的类名之间有一个空格，但是您的标记表明两个类名都是相同的元素。

要选择具有多个类名的元素，选择器不应在类名之间有空格，如`.classname1.className2`.

```
var listname=$(this).parents(".x-grid3-row-table").children(".x-grid3-cell-inner.x-grid3-col-1").text();
console.log(listname);
```

应该管用。

**进一步说明：** 如果您在类名之间有问题，这意味着您正在尝试选择一个`.x-grid3-col-1`在类中具有类的元素`.x-grid3-cell-inner`。这就是父子关系。

**编辑：**

如果您的按钮在下一行，您可以使用JQuery 的[.prev()](http://api.jquery.com/prev/)选择器，并结合使用`tr`作为父选择器而不是表。

`listname=$(this).parents("tr").prev().children(".x-grid3-cell-inner.x-grid3-col-1").text();`

或者如果它在同一行，那么简单

`listname=$(this).parents("tr").children(".x-grid3-cell-inner.x-grid3-col-1").text();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:05:20.427

可能有一种更简洁的方法，但我想出了这个作为您的按钮单击处理程序，它假定您要查找的 text() 是按钮上方的一个表格行。

```
 var $rows,button=this,i;
    $rows=$(".x-grid3-row-table tr");
    for(i=0;i<$rows.length;i++){
        // get the button of that row
        // not sure how to as your button is not
        // in a table row with the code you posted
        if($rows[i].getElementsByTagName("input")[0]===
          button){
            break;
        }
    }
    // I assume the button is in a row before the button
    console.log($($rows[i-1])
        .find(".x-grid3-cell-inner.x-grid3-col-1")
        .text() 
```

# xml - 将 xml 数据保存到 AS3 变量/onComplete

> ID：14747820
> 
> 赞同：0
> 
> 时间：2013-02-07T09:35:11.203
> 
> 标签：xml, variables, actionscript-3, actionscript

我是 AS3 的新手。希望将我从 xml 文件加载的数据保存到变量中。然后稍后调用该变量。

这是我的代码：

```
package {

import flash.display.MovieClip;
import flash.events.*;
import flash.display.Stage;
import flash.text.TextField;
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;
import flash.net.URLLoaderDataFormat;
import flash.net.URLVariables;

public class myClass extends MovieClip {
        public static var objectOneTotal:int = 1;
        public static var objectOneCurrent:int = 1;

    public function myClass() {

        var myXML:XML;
        var myLoader:URLLoader = new URLLoader();
        myLoader.load(new URLRequest("beers.xml"));
        myLoader.addEventListener(Event.COMPLETE, processXML);

            function processXML(event:Event):void {
            myXML = new XML(event.target.data);

            myClass.objectOneCurrent = int(myXML.current);
            myClass.objectOneTotal = int(myXML.total);

            trace(myClass.objectOneCurrent);
            trace(myClass.objectOneTotal);

            }

        trace(myClass.objectOneCurrent);
        trace(myClass.objectOneTotal);
        var objectOneStart:int = objectOne.x;
        objectOne.x = (objectOneCurrent / objectOneTotal)  * (finish.x - objectOneStart);

    }

}

} 
```

它在做什么：当我运行它时，查看跟踪，它在跟踪从 xml 加载的值之前跟踪“1”的对象初始值。所以我相信它正在加载数据，但程序只在其余代码之后运行 processXML 函数。或者其他的东西。

我不太确定。但我需要最后两个跟踪来读取 xml 数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:45:04.847

`MyClass`因为 AS3 是异步的，所以它会在加载 XML 之前执行整个方法。当 XML 确实加载时，将`processXML`执行中定义的代码来处理它。

解决方案是`processXML`设置句柄`object1.x`：

```
package {

    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.Stage;
    import flash.text.TextField;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.net.URLRequestMethod;
    import flash.net.URLLoaderDataFormat;
    import flash.net.URLVariables;

    public class myClass extends MovieClip {
            public static var objectOneTotal:int = 1;
            public static var objectOneCurrent:int = 1;

        public function myClass() {
            var myXML:XML;
            var myLoader:URLLoader = new URLLoader();
            myLoader.load(new URLRequest("beers.xml"));
            myLoader.addEventListener(Event.COMPLETE, processXML);

            // these will fire before the XML is loaded
            trace(myClass.objectOneCurrent);
            trace(myClass.objectOneTotal);

        }

        public function processXML(event:Event):void {
            myXML = new XML(event.target.data);

            myClass.objectOneCurrent = int(myXML.current);
            myClass.objectOneTotal = int(myXML.total);

            // these fire after the XML is loaded
            trace(myClass.objectOneCurrent);
            trace(myClass.objectOneTotal);

            var objectOneStart:int = objectOne.x;
            objectOne.x = (objectOneCurrent / objectOneTotal)  * (finish.x - objectOneStart);

        }
    }
} 
```

# ruby-on-rails - Capybara点击后没有检测到类

> ID：14747823
> 
> 赞同：0
> 
> 时间：2013-02-07T09:35:20.310
> 
> 标签：ruby-on-rails, rspec, capybara

我有一个规格如下。如果我手动进行测试，它会正常工作，但如果我运行规范，我会收到以下错误。

```
 before(:each) do 
      @user_having_unread_message = FactoryGirl.create(:user_having_unread_message)
      login_as(@user_having_unread_message, scope: :user)
      visit conversations_path
      within("section.items-group") do
        first(:link, "Test message").click
      end
    end

    it "list all messages", touch: true do 
      within(".messages-group") do
        page.should have_content "Test message"
      end
    end 
```

这是我得到的错误

```
 1) Messages GET /:username/messages when signed in and active list all messages
     Failure/Error: within(".messages-group") do
     Capybara::ElementNotFound:
       Unable to find css ".messages-group"
     # ./spec/features/messages_spec.rb:84:in `block (5 levels) in <top (required)>' 
```

我不知道为什么我会得到这个`ElementNotFound`，`.messages-group`因为如果我手动点击“测试消息”链接，我可以在下一页看到它。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:01:00.383

> > page.should have_css('.messages-group', :text => 'Textmessage')

它会帮助你。

# java - 导入 javax.persistence.EntityManager 错误

> ID：14747825
> 
> 赞同：1
> 
> 时间：2013-02-07T09:35:34.807
> 
> 标签：java, eclipse, jpa, eclipselink

我已将我的项目从 pc 复制到其他，我得到了错误

1.  导入 javax.persistence.EntityManager；导入javax.persistence.EntityManagerFactory；导入 javax.persistence.Persistence；导入 javax.persistence.Query；

编译器不知道它们，在 lib 文件夹中，我从本地 pc derby.jar eclipselink.jar 和 javax.persistence_2.0.4.v201112161009.jar 添加了 3 个 jar

可能是什么原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:40:23.210

添加另外两个罐子是

```
toplink-essentials.jar
toplink-essentials-agent.jar 
```

将此外部 jar 添加到您的项目中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:42:15.940

如果您使用操作系统复制，首先刷新您的项目。

那么也许你必须将它们添加到你的构建路径中。

1`right click`在你的项目上 -> `build path`-> `configure build path`-> `libraries`->`add JARs...`

2 选择项目/lib 文件夹并选择要添加它们的罐子。

3 点击`OK`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:44:49.807

您只需要在**classpath**上添加这些 jar 。如果你在eclipse中运行项目，只需选择项目属性=>构建路径=>添加jar

# sql-server - SQL Server 中的视图存储在哪里

> ID：14747826
> 
> 赞同：10
> 
> 时间：2013-02-07T09:35:35.903
> 
> 标签：sql-server, sql-server-2008-r2

我是 SQL Server 新手。我已经尝试在网上四处寻找一段时间，但无法回答我的问题。谁能告诉我 SQL Server 2008 数据库中存储的视图到底在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T10:41:41.170

对您的问题的迂腐回答是……只有 Microsoft 确切知道视图元数据的物理存储位置。在从 SQL 2000 迁移到 SQL 2005（2008 所基于）的过程中，MS 摆脱了对过去存储视图（dbo.sysviews 和 dbo.syscomments）的系统表的直接访问，并添加了一个抽象层（通过隐藏资源数据库），这意味着您只能通过目录视图访问有关视图的元数据。INFORMATION_SCHEMA 是一组符合 ANSI 的目录视图。虽然对它们在版本之间的相对可移植性有点用处，但通常可以从 sql 2008 目录视图中获得更多信息 - 在本例中**为 sys.views**和**sys.sql_modules**

请注意，可以使用 ENCRYPTION 选项集创建视图，该选项集加密包含视图的 SQL 定义的 sys.comments 记录。但如果没有加密，那么 sp_helptext [MyView] 会让您快速查看定义。

根据下面的第一条评论进行编辑，将“sys.comments”替换为“sys.sql_modules”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:31:57.920

**注意**：基于这篇文章 [http://improve.dk/archive/2012/08/27/where-does-sql-server-store-the-source-for-stored-procedures.aspx](http://improve.dk/archive/2012/08/27/where-does-sql-server-store-the-source-for-stored-procedures.aspx)，很可能是定义视图存储（也）在`sys.sysobjvalues`系统表中。

`T-SQL`可以使用`sys.sql_modules`系统视图（[链接](http://msdn.microsoft.com/en-us/library/ms175081.aspx)）查询所有用户模块的列表（在 SQL Server 2008 中）。在这里，您可以找到用户视图的定义（列 `definition`）：

```
SELECT  QUOTENAME(s.name)+'.'+QUOTENAME(o.name) AS full_object_name, 
        m.*
FROM    sys.sql_modules m
JOIN    sys.objects o ON m.object_id=o.object_id
JOIN    sys.schemas s ON o.schema_id=s.schema_id
WHERE   o.type='V' -- only view objects
ORDER BY full_object_name 
```

如果你运行`EXEC sp_helptext 'sys.sql_modules'`你会得到这个系统视图的源代码：

```
CREATE VIEW sys.sql_modules AS
    SELECT object_id = o.id,
        definition = object_definition(o.id),
        uses_ansi_nulls = sysconv(bit, o.status & 0x40000),             -- OBJMOD_ANSINULLS
        uses_quoted_identifier = sysconv(bit, o.status & 0x80000),      -- OBJMOD_QUOTEDIDENT
        is_schema_bound = sysconv(bit, o.status & 0x20000),             -- OBJMOD_SCHEMABOUND
        uses_database_collation = sysconv(bit, o.status & 0x100000),    -- OBJMOD_USESDBCOLL
        is_recompiled = sysconv(bit, o.status & 0x400000),              -- OBJMOD_NOCACHE
        null_on_null_input = sysconv(bit, o.status & 0x200000),         -- OBJMOD_NULLONNULL
        execute_as_principal_id = x.indepid
    FROM sys.sysschobjs o
    LEFT JOIN sys.syssingleobjrefs x ON x.depid = o.id AND x.class = 22 AND x.depsubid = 0 -- SRC_OBJEXECASOWNER
    WHERE o.pclass <> 100
        AND ((o.type = 'TR' AND has_access('TR', o.id, o.pid, o.nsclass) = 1)
            OR (type IN ('P','V','FN','IF','TF','RF','IS') AND has_access('CO', o.id) = 1)
            OR (type IN ('R','D') AND o.pid = 0)) 
```

你可以看到这个视图查询了另一个系统对象`sys.sysschobjs` ~~，我认为它是用于存储视图定义的系统表~~。

注意 1：使用`INFORMATION_SCHEMA.VIEWS`来查找视图的定义不是一种可靠的方法，因为`INFORMATION_SCHEMA.VIEWS.VIEW_DEFINITION`列定义是`convert(nvarchar(4000), object_definition(object_id))`（最多 4000 个字符）。

注意 2：相反，您应该使用`sys.sql_modules.definition`column: `definition = object_definition(o.id)`。如果您查看`object_definition`函数（[链接](http://msdn.microsoft.com/en-us/library/ms176090.aspx)），您会看到返回类型是`nvarchar(max)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:39:57.283

在系统表中。

以下查询将检索它们...

SELECT TABLE_NAME 作为 ViewName，VIEW_DEFINITION 作为 ViewDefinition FROM INFORMATION_SCHEMA.Views

要正常查看编辑它们，您将在工作室管理器的表格下查看视图文件夹。

您可以使用设计器或编写脚本从此文件夹创建/编辑它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T09:40:04.580

如果您的意思是视图生成的表，那么答案是它们根本没有存储。视图只是一个查询，这就是它所存储的全部内容。当您查询视图时，数据库引擎只会获取您的视图查询的结果，然后查询这些结果。

数据库引擎可以存储“物化”视图，但这是一个不同的主题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T10:13:57.783

View 是一个简单的 SQL 语句，存储在数据库模式 (INFORMATION_SCHEMA.Views) 中。因此，每当我们调用视图时，SQL 语句都会被执行并从主物理表返回行。

您还可以将视图视为存储定义（sql 语句）但不存储结果的逻辑表。

您可以使用以下语句查看定义，正如上面 Dan 所说，仅当视图定义未加密时：SELECT TABLE_NAME 作为 ViewName，VIEW_DEFINITION 作为 ViewDefinition FROM INFORMATION_SCHEMA.Views

有关查看[@MSDN](http://msdn.microsoft.com/en-in/library/ms187956.aspx)的更多详细信息。

# java - addPreferencesFromResources，想不通

> ID：14747835
> 
> 赞同：0
> 
> 时间：2013-02-07T09:36:13.993
> 
> 标签：java, android, android-layout, android-intent

首先，对不起，我发了这篇文章，我知道还有其他类似的，我尝试使用它们，但我无法让它工作。

我正在使用第三版“Hello，Android”一书，我偶然发现了该`addPreferencesFromResources()`方法的弃用。所以我试图修复它，但由于某种原因我无法让它正常工作。我有几个我相信在这里使用的类：

首选项 java 类

```
package com.example.sudoku; 

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity
{
    @Override
    protected void onCreate(final Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getFragmentManager().beginTransaction().replace(android.R.id.content, new                 MyPreferenceFragment()).commit();
    }
} 
```

```
public static class MyPreferenceFragment extends PreferenceFragment
{
    @Override
    public void onCreate(final Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);
    }
} 
```

这个是从其他帖子之一复制的，但正如我所说，我无法让它工作，我不知道为什么。

此外，我有 settings.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" > 
<CheckBoxPreference
    android:key="music" 
    android:title="@string/music_title" 
    android:summary="@string/music_summary" 
    android:defaultValue="true" />
<CheckBoxPreference
    android:key="hints" 
    android:title="@string/hints_title" 
    android:summary="@string/hints_summary" 
    android:defaultValue="true" />
</PreferenceScreen> 
```

还有我的 Sudoku java 类的一小部分，它调用 Prefs.class 的活动：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) { 
        case R.id.settings:
            startActivity(new Intent(this, Prefs.class));
            return true;
        // More items go here (if any) ... 
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:38:13.297

我已经修复了它，我所要做的就是将 settings.xml 文件中的视图实现为 Prefs 类的内容，虽然我不能使用 CheckBoxPreference 并且必须使用 CheckBox，但我仍然很高兴关于它。

# c# - 使用 C# 在 Web 服务器上捕获视频流

> ID：14747836
> 
> 赞同：1
> 
> 时间：2013-02-07T09:36:14.307
> 
> 标签：c#, video-streaming, webcam

我构建了 ASP.NET MVC 应用程序，它应该在浏览器中访问客户端的网络摄像头并将视频流发送到我的网络服务器，并且必须在特定时刻从该流中截取一些屏幕截图。我审查了很多技术，但我无法弄清楚哪些匹配。

Flash 不适合，因为我不需要单独的 Flash 媒体服务器。WebRTC 似乎在省略 web srver 的客户端之间建立对等连接（我看不到如何在 web 服务器上捕获 WebRTC 视频流）。IIS 媒体服务需要一些流式编码器，而不是直接使用客户端的网络摄像头。

对于 Silverlight，我只找到了如何将其用作视频播放器和屏幕截图制作器的示例，而不是广播公司。但我必须在服务器上截屏，而不是在客户端。

所以我迷路了。

有人可以提示我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:54:04.737

简短回答：您可以在服务器上捕获 WebRTC 视频/音频。只需提供一个与其他 WebRTC 客户端通信的 WebRTC 客户端（在服务器上运行）。您可能想查看 Google 的开源 C 客户端 ( [https://code.google.com/p/webrtc/](https://code.google.com/p/webrtc/) )。但是，这意味着您根本不需要 ASP.NET。您可以调整上述客户端并将它们复制到特定目录并从那里使用 ASP.NET 处理它们。

# database - 有没有办法在单元测试期间连接到 hsqldb 数据库（通过工具）？

> ID：14747838
> 
> 赞同：0
> 
> 时间：2013-02-07T09:36:24.827
> 
> 标签：database, oracle, hsqldb, dbunit

我的问题很简单，我使用 DBUnit 来测试我的 DAO。

我有一个相当复杂的查询要测试。我创建了一个使用 flatxml 格式的数据集进行测试。

我的查询没有返回任何结果，但我希望有一个。我的想法是我忘记了数据集中的一些数据。

我想查询 hsql 数据库以查看其数据并执行一些简单的查询以查看缺少的内容。

有没有办法在测试期间（上面有断点）通过 oracle sql developer 之类的工具连接到 hsql 数据库来查看数据库状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:52:08.943

是的。使用 HSQLDB 进行开发的最佳方式是运行 HSQLDB 服务器。您可以使用 HSQLDB DatabaseManager 应用程序或任何其他数据库访问工具连接到此服务器以查看内容。

请参阅指南：

[http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_app_dev_testing](http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_app_dev_testing)

# camera - 如何调整相机位置，以便可以使用 three.js 以足够大小查看对象？

> ID：14747840
> 
> 赞同：1
> 
> 时间：2013-02-07T09:36:31.427
> 
> 标签：camera, three.js

我制作了一个应用程序，它从外部文件中获取值来创建几何图形。我在这方面非常成功。默认情况下，我的对象以非常小的尺寸查看。但是当我尝试使用鼠标滚球时，我可以看到场景中的实际对象，因为它放大了场景。但是，当我的场景被实例化时，我怎么能获得这种大小的对象。

工作应用程序的链接：http: [//studenter.miun.se/~sagh0900/TrackBallAlt.Html](http://studenter.miun.se/~sagh0900/TrackBallAlt.Html)

这是场景及其对象的缩放版本视图

![在此处输入图像描述](../Images/3d9868587ff9a8bb159c49079a846006.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:07:05.547

您可以使用其中任何一个来获取网格的边界框或球体的大小。

```
// This computes it.
mesh.geometry.computeBoundingSphere();

// This gets it
var radius = mesh.geometry.boundingSphere.radius;

// Compute the bounding box
mesh.geometry.computeBoundingBox();

// This now has a min and max structure with x and y values of the box
mesh.geometry.boundingBox 
```

一旦你有了这些信息，你就可以设置你的相机，让物体在视野中​​。

# php - 循环几分钟 PHP

> ID：14747849
> 
> 赞同：1
> 
> 时间：2013-02-07T09:37:15.833
> 
> 标签：php, loops, foreach

我试图用`foreach loop`, 每分钟设置一个变量。我有这个代码：

```
$dhit = 2013-02-07 04:21:01;
$dnow= 2013-02-07 10:21:01;

$begin = new DateTime( $dhit );
$end = new DateTime( $dnow );

$interval = DateInterval::createFromDateString( '1 minute' );
$period = new DatePeriod($begin, $interval, $end);
$a = 0;
foreach ( $period as $dt ) {
  $a+=1;
  echo $a; 
} 
```

如果`$dhit`至少 24 小时（2013-02-06 04:21:01），但如果`$dhit`具有相同的日期（同一天，即 2013-02-07），则效果很好`$dnow`。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:51:59.780

这对我有用，我怀疑你的系统时间可能没有正确设置。

你得到什么错误？

这是我做的测试，它按预期打印了 1-360

```
<?php

$dhit = '2013-02-07 04:21:01';
$dnow= '2013-02-07 10:21:01';

$begin = new DateTime( $dhit );
$end = new DateTime( $dnow );

$interval = DateInterval::createFromDateString( '1 minute' );
$period = new DatePeriod($begin, $interval, $end);
$a = 0;
foreach ( $period as $dt ) {
  $a+=1;
  print "$a\n"; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:44:21.197

这对我来说很好，打印 123456。你忘了在你的日期周围加上引号。

```
$dhit = '2013-02-07 10:15:01';
$dnow= '2013-02-07 10:21:01';

$begin = new DateTime( $dhit );
$end = new DateTime( $dnow );

$interval = DateInterval::createFromDateString( '1 minute' );
$period = new DatePeriod($begin, $interval, $end);
$a = 0;
foreach ( $period as $dt ) {
  $a+=1;
  echo $a; //output 123456
} 
```

# qt - ts（翻译源）文件中的缩进在 Qt 中不起作用

> ID：14747850
> 
> 赞同：0
> 
> 时间：2013-02-07T09:37:17.990
> 
> 标签：qt, internationalization, translation, language-translation

空格不适用于 ts 文件中的缩进。是否有任何标签可用于缩进，例如 br 用于换行

我想显示如下文本：

```
 1\. Please press telecom handler
        button. 
```

虽然它显示为

```
 1\. Please press telecom handler
 button. 
```

如何缩进第一行和第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:53:28.617

谢谢您的帮助！！我使用 <blockquote >
html 标记进行缩进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:00:29.057

如果您的文本小部件成功解析`<br/>`来自翻译器的标签，您可能希望使用`&nbsp;`或`&#160;`用于不可破坏的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:50:46.057

如果这是在 a 中`QLabel`，您可以在标签中使用富文本，然后使用 HTML 有序列表标签，如下所示：

```
<ol>
<li>Coffee</li>
<li>Milk</li>
</ol> 
```

有关 HTML 列表的更多信息，请参见[此处](http://www.w3schools.com/html/html_lists.asp)。

# regex - xml中的正则表达式

> ID：14747854
> 
> 赞同：1
> 
> 时间：2013-02-07T09:37:30.233
> 
> 标签：regex, eclipse

Eclipse 软件具有搜索正则表达式的功能。我想搜索`<version>0.0.1-SNAPSHOT</version>`其 xml 父节点不是的所有字符串`<parent>`。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:44:27.277

**编辑：**完全重写。

只要`<parent>`标签不能嵌套，这是可能的，但只有这样（并且所有关于不尝试将 XML 与正则表达式匹配的常见警告都适用。一旦您的 XML 中有评论或 CDATA 部分，所有的赌注都没有了）。

```
(?s)<version>0\.0\.1-SNAPSHOT</version>(?!(?:(?!</?parent>).)*</parent>) 
```

**解释：**

```
(?s)              # Turn on singleline matching mode
<version>0\.0\.1-SNAPSHOT</version> # Match this string
(?!               # but only do this if it's impossible to match this regex here:
 (?:              # Try to match...
  (?!</?parent)   #  (as long as there is no <parent> or </parent> tag ahead)
  .               #  any character
 )*               # any number of times
 </parent>        # Then match </parent>
)                 # End of lookahead 
```

# scala - 播放框架 NoSuchMethodError

> ID：14747856
> 
> 赞同：1
> 
> 时间：2013-02-07T09:37:37.550
> 
> 标签：scala, nosuchmethoderror, playframework-2.1, slick

我在尝试使用 Slick 时遇到了问题……我一开始就完全按照[这篇](http://java.dzone.com/articles/getting-started-play-21-scala)文章进行操作。一切都很好，直到我在 Global.scala 中添加 Bars.ddl.create。此时它会启动下面的异常。

```
NoSuchMethodError: scala.Predef$ArrowAssoc$.extension$$minus$greater(Ljava/lang/Object;Ljava/lang/Object;)Lscala/Tuple2; 
```

我想这是由于方法“def * = ...”，但我无法改变任何东西。

正如我在论坛上看到的那样，我已经尝试了 sbt-reboot ，但它不会改变。

我有 Scala-2.10.0，Play-2.1.0

你知道有什么问题吗？（以及最终如何解决它=D）

谢谢

# php - PHP Mailer 异常“你必须提供电子邮件地址..”

> ID：14747861
> 
> 赞同：0
> 
> 时间：2013-02-07T09:37:57.673
> 
> 标签：php, email, phpmailer

使用 phpmailer v5.1 时出现有线异常

> 未捕获的异常“phpmailerException”和消息“您必须提供至少一个收件人电子邮件地址。

我检查了那里是否有正确的电子邮件

```
 $oMail->AddReplyTo = FROM;
    $oMail->AddAddress = "testmail@web.de";
    $oMail->SetFrom = FROM; 
```

但仍然是同样的例外。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:42:21.027

`AddAddress`是一种方法，而不是一种属性。所以，它应该像

`$oMail->AddAddress("testmail@web.de");`

这适用于您尝试应用的所有三个设置。

# jquery - 动态附加 JavaScript 函数

> ID：14747862
> 
> 赞同：0
> 
> 时间：2013-02-07T09:38:00.267
> 
> 标签：jquery, widget

我已经阅读了其他一些类似的帖子，但找不到我的（简单？）问题的解决方案。

我正在构建一个 JQuery 小部件。我想让用户指定必须使用哪种 JQuery 动画类型来显示某些内容。

基本上，我想更改必须即时运行的功能。

例如：

```
var animation = this.options.animationType;
$("#myDiv").animation(); 
```

（我知道代码不正确，我只是想展示这个概念）

然后必须运行选定的动画类型

任何想法，这甚至可能吗？

谢谢你，米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:43:39.600

你只能通过创建自己的[jQuery 插件](http://plugins.jquery.com/)来做这样的事情。如果正确完成，用户可以编写如下内容：

```
var options = { animationType: "bounce" };
$("#myDiv").animation(options); 
```

要轻松创建 jQuery 插件，您可以使用[Starter](http://starter.pixelgraphics.us/)或 jQuery [Boilerplate](http://jqueryboilerplate.com/)快速启动它们。不要忘记阅读有关如何创建插件的文档（可以在 Google 或 SO 上找到大量相关内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:51:21.703

看看你是否想要这样的东西：

您在这里创建了一个 jquery 函数：

```
$.fn.center = function(){
   this.css('top',($(window).height()/2-$(this).height()/2)+'px');
   this.css('left',($(window).width()/2-$(this).width()/2)+'px');
   return this;
}; 
```

并这样称呼它：

```
$('myElem').center(); 
```

`$.fn.center`将使调用它的元素居中。

# rss - Instagram 公共 RSS 提要

> ID：14747870
> 
> 赞同：17
> 
> 时间：2013-02-07T09:38:27.857
> 
> 标签：rss, instagram

我想知道 ink361 是如何从用户名创建 Instagram RSS 提要的。

示例提要：http: [//ink361.com/feed/user/snoopdogg](http://ink361.com/feed/user/snoopdogg)

博文：http: [//blog.ink361.com/post/23664609916/new-rss-instagram-feed-feature-on-ink361-com](http://blog.ink361.com/post/23664609916/new-rss-instagram-feed-feature-on-ink361-com)

任何见解将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T11:18:44.113

Instagram 有一个可公开访问的 RSS API，很难找到有关它的任何信息，但它适用于标签（我们确实使用它）。

对于标签，语法如下：

```
http://instagr.am/tags/some-tag-you-want-to-follow/feed/recent.rss 
```

我不确定他们是否对用户的提要有类似的东西，因为我已经说过很难找到关于它的信息，而且它可能会从一天到另一天消失，有利于官方 API，但现在它适用于标签。

这是一篇关于它的官方博客文章（尽管它只涵盖标签）：[http ://blog.instagram.com/post/8755963247/introducing-hashtags-on-instagram](http://blog.instagram.com/post/8755963247/introducing-hashtags-on-instagram)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-28T23:17:20.313

@user2543857 's answer was good. Unfortunately, the structure of the Instagram data has changed. As of the date of posting this, this will work. Copy/paste into a file on your PHP server and use like: yoursite.com/instarss.php?user=name_of_instagram_user This will return valid XML/RSS feed.

**EDIT!! Naturally, the output of the page/JSON has changed with instagram's new look/feel. Here is updated code (June, 2015):**

```
<?php

if (!isset($_GET['user'])) {
    exit('Not a valid RSS feed. You didn\'nt provide an Instagram user. Send one via a GET variable. Example .../instarss.php?user=snoopdogg');
}

header('Content-Type: text/xml; charset=utf-8');

$html = file_get_contents('http://instagram.com/'.$_GET['user'].'/');
$html = strstr($html, '{"static_root');
$html = strstr($html, '</script>', true);
//$html = substr($html,0,-6);
$html = substr($html, 0, -1);

$data = json_decode($html);

// print_r($data->entry_data->ProfilePage[0]->user->media->nodes);

$rss_feed = '<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel>';
$rss_feed .= '<title>'.$_GET['user'].'\'s Instagram Feed</title><atom:link href="http://'.$_SERVER['HTTP_HOST'].$_SERVER["REQUEST_URI"].'" rel="self" type="application/rss+xml" /><link>http://instagram.com/'.$_GET['user'].'</link><description>'.$_GET['user'].'\'s Instagram Feed</description>';

foreach($data->entry_data->ProfilePage[0]->user->media->nodes as $node) {

    $rss_feed .= '<item><title>';

    if(isset($node->caption) && $node->caption != '') {
        $rss_feed .= htmlspecialchars($node->caption, ENT_QUOTES, ENT_HTML5);
    } else {
        $rss_feed .= 'photo';
    }

    // pubdate format could also be: "D, d M Y H:i:s T"
    $rss_feed .= '</title><link>https://instagram.com/p/'.$node->code.'/</link><pubDate>'.date("r", $node->date).'</pubDate><dc:creator><![CDATA['.$_GET['user'].']]></dc:creator><description><![CDATA[<img src="'.$node->display_src.'" />]]></description><guid>https://instagram.com/p/'.$node->code.'/</guid></item>';

} // foreach "node" (photo)

$rss_feed .= '</channel></rss>';

echo $rss_feed;
?> 
```

Actually, don't use the above code. ~~I'll try to maintain [this Gist](https://gist.github.com/jonathanbell/48c46d9fc2913fba3292) in the future.~~

**EDIT December 2016:** I'm tired of chasing the every-changing Instagram output only to screen scrape it and have it change a few months later. I'd say just use the API.. If you are still interested in making an RSS feed from a user's page, [this Gist](https://gist.github.com/jonathanbell/48c46d9fc2913fba3292) should give you an idea of how to do it.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-02T18:23:07.170

感谢**托文**的小费。

**以下是如何在不使用 API 的情况下在您的网站上获取 Instagram 图片的方法。**

从 url 和用户名创建 json 文件（将其设置为 cron 作业，每天 X 次）

```
<?
$html = file_get_contents('http://instagram.com/username/');
$html = strstr($html, '["lib');
$html = strstr($html, '</script>', true);
$html = substr($html,0,-6);
file_put_contents("username.json",$html);
?> 
```

显示来自 json feed 的一些图像

```
<?
$json = file_get_contents('username.json');
$data = json_decode($json);

$img1 = $data[2][0]->props->userMedia[0]->images->standard_resolution->url;
$img2 = $data[2][0]->props->userMedia[1]->images->standard_resolution->url;
$img3 = $data[2][0]->props->userMedia[2]->images->standard_resolution->url;

print '<img src="'.$img1.'" />';
print '<img src="'.$img2.'" />';
print '<img src="'.$img3.'" />';
?> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-10T12:44:22.350

您可以使用[`/users/user-id/media/recent`](http://instagram.com/developer/endpoints/users/#get_users_media_recent)API 端点访问任何 Instagram 用户的提要。此端点需要一个`access_token`，您可以通过使用 Instagram 授权*某些用户*（不一定是您为其请求提要的用户）来获取该端点。[此处](http://instagram.com/developer/authentication/)`access_token`描述了接收过程。

因此，ink361 可能正在做的是`access_token`为自己（他们在 Instagram 上的用户）获取一个并使用它来`/users/user-id/media/recent`请求任何其他用户的提要。就那么简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-30T08:58:36.443

如果我是 ink361，我只会爬取 Instagram 页面，解析 HTML 并将其转换为 RSS。没有API，没有授权，没有问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-23T02:50:30.550

不幸的是，上面 user2543857 的解决方案不再起作用。这是一个适用于当前个人资料页面源的版本。

从 URL 和用户名创建 JSON 文件（将其设置为 cron 作业，每天 X 次）

```
<?php
    $json = file_get_contents('http://instagram.com/username');
    $json = strstr($json, '{"entry_data"');
    $json = strstr($json, '</script>', true);
    $json = rtrim($json,';');

    file_put_contents("username.json",$json);
?> 
```

显示来自 JSON 提要的一些图像

```
<?php
    $json = file_get_contents('username.json');
    $data = json_decode($json,true);

    $img1 = $data['entry_data']['UserProfile'][0]['userMedia'][0]['images']['thumbnail']['url'];
    $img2 = $data['entry_data']['UserProfile'][0]['userMedia'][1]['images']['thumbnail']['url'];
    $img3 = $data['entry_data']['UserProfile'][0]['userMedia'][2]['images']['thumbnail']['url'];

    print '<img src="'.$img1.'" />';
    print '<img src="'.$img2.'" />';
    print '<img src="'.$img3.'" />';
?> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-07T12:36:28.037

您可以使用他们的 API 访问您的 instagram RSS 提要。他们的 API 使用 oAuth2 进行身份验证。我在我的个人博客上使用这种方法在主页上拉入 instagram 图片。我怀疑这就是ink361 网站的工作方式。Ink361 将连接到 instagram api 并通过 instagram 框提示用户登录，他们使用该框允许ink361 访问他们的 instagram 帐户。一旦身份验证成功，ink361 站点将缓存 instagram 收到的令牌，以便他们可以使用相同的令牌定期重复返回 instagram api 进行身份验证。宾果游戏您可以访问用户数据，并且可以从中创建 rss 提要。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-09-28T21:03:29.443

答案很简单。
要访问用户数据，您只需拥有有效的访问令牌。
ink361 在社交网络[http://vk.com/app3225087](http://vk.com/app3225087)中有一个应用程序，它将经过身份验证的用户访问令牌存储在 db 中。
它只剩下在 db 中找到一个有效的并获取您想要的任何用户数据

# c# - 如果当前用户已对其进行评级和审查，如何签入 c# Windows 8 应用程序

> ID：14747878
> 
> 赞同：0
> 
> 时间：2013-02-07T09:38:42.333
> 
> 标签：c#, windows-8, runtime, windows-store-apps

我的目标是显示请求当前用户在 Windows 应用商店中评价和审查我的免费软件 Windows 8 应用程序的消息。如果应用程序已经过评级和审查，我不想显示该消息。

所以我的问题是：如何在运行时检查我的 Windows 8 应用程序是否已被当前用户评级和审查？

我已经知道通过 Windows 应用商店安装的应用程序在设置中有“评分和审查”，但用户在根本不需要更改应用程序设置时很少使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:03:48.613

另一种方法是要求您审查和评价您的应用（如果您尚未这样做），并在商店中提供指向您的应用的链接。请参阅下面的示例代码。

var storeURI = new Uri("ms-windows-store:PDP?PFN="); 等待 Windows.System.Launcher.LaunchUriAsync(storeURI);

有关“Windows 8 C# 商店应用程序 - 商店和评论的链接”的更多信息，请参阅 Windows 8 C# 商店应用程序 - [商店和评论的链接](https://stackoverflow.com/questions/12532034/windows-8-c-sharp-store-app-link-to-store-and-reviews)

# vbscript - 修改 QTP 导入的环境变量

> ID：14747882
> 
> 赞同：0
> 
> 时间：2013-02-07T09:38:53.827
> 
> 标签：vbscript, environment-variables, qtp

使用 QTP，我需要从 XML 表导入环境变量，但是导入的环境变量是导入的环境变量处于只读模式，无法编辑。

我需要知道是否有任何方法可以导入环境变量并对其进行编辑，并且我需要知道，不知何故，是否有任何方法可以从代码中创建环境变量（以编程方式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:15:51.100

要从代码创建环境变量，请使用以下 loc：

```
Environment("variablename")="Variablevalue" ' Create and intialise environment variable

Print Environment("variablename") 'To retrieve value of variable 
```

# ajax - 如何使用ajax绑定下拉列表

> ID：14747883
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:03.180
> 
> 标签：ajax, asp.net-mvc-3, drop-down-menu

我需要使用 ajax 和 mvc3 绑定来自另一个下拉列表（ddl）结果的 ddl 值

相关：[如何从 ajax json 中的控制器获取结果](https://stackoverflow.com/questions/14744753/how-to-get-the-result-from-controller-in-ajax-json/14745087#comment20636572_14745087)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:10:11.763

最好尝试以下方法来级联下拉列表。

[脚本]

```
function SetdropDownData(sender, args) {           

        $('#ShipCountry').live('change', function () {
            $.ajax({
                type: 'POST',
                url: 'Home/GetCities',
                data: { Country: $('#ShipCountry').val() },
                dataType: 'json',
                success: function (data) {
                    $('#ShipCity option').remove();
                    $.each(data, function (index, val) {                           
                            var optionTag = $('<option></option>');
                            $(optionTag).val(val.Value).text(val.Text);
                            $('#ShipCity').append(optionTag);

                    });
                }
            });
        });

  } 
```

[控制器]

```
 public IEnumerable<SelectListItem> Cities(string Country)  // ShipCity is filtered based on the ShipCountry value  
    {
        var Cities = new NorthwindDataContext().Orders.Where(c=>c.ShipCountry == Country).Select(s => s.ShipCity).Distinct().ToList();
        List<SelectListItem> type = new List<SelectListItem>();
        foreach (var city in Cities)
        {
            if (city != null)
            {
                SelectListItem item = new SelectListItem() { Text = city.ToString(), Value = city.ToString() };
                type.Add(item);
            }
        }
        return type;
    }
    public ActionResult GetCities(string Country)  
    {
        return Json(Cities(Country), JsonRequestBehavior.AllowGet);

    } 
```

# java - 无法将对象字符串字段从一个 ArrayList 添加到另一个 ArrayList

> ID：14747885
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:09.793
> 
> 标签：java, arraylist

我的代码中看不到错误。代码非常简单。我必须将对象字段（字符串）从 ArrayList/Product/ 添加到 ArrayList/String/ 。这是我的代码：

```
 public class Controller extends JFrame{

public Controller(){

   ArrayList<String> list=new ArrayList<String>();
    for (int i=0;i<TestPanels.manu.size();i++){

        list.add(TestPanels.manu.get(i).getName());
         } 
```

如果我尝试`list.add("some String") IT IS WORKING` ，但`list.add(TestPanels.manu.get(i).getName());` 没有添加任何内容。

你能看出有什么问题吗？

`TestPanels.manu`没问题

```
 static ArrayList<Product> manu = new ArrayList<Product>();

Product nam=new Product("kafa", 90);
Product k = new Product("kafa sa mlekom", 100 );
Product ks = new Product("kafa sa slagom", 120 );
Product kap = new Product("kapucino", 120 );
Product kisela = new Product("kisela voda", 80 );

   .................  some code........

    manu.add(nam);   
manu.add(ks);
manu.add(kap);
manu.add(kisela);
manu.add(k); 
```

公共类产品{

```
private String name = "noname";
private Double price=new Double(100);

public Product(){
    };

public Product(String name,double price)
{
    this.name=name;
    this.price=price;
};

public double getPrice(){
return price;}

public void setPrice(Double p){
    price=p;}

public String getName(){
    return name;}

public void setName(String n){
    name=n;} 
```

}

`I DID IT. THANK YOU ALL.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:02:01.573

不`list.add(TestPanels.manu.get(i));`工作？

那么你的清单很可能没有填满。

# bluetooth - 芯片组的组合

> ID：14747887
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:12.387
> 
> 标签：bluetooth, microcontroller, microchip

我有一个关于不同芯片组合能力的问题。

我们有一个 PIC16F1824 微芯片控制器，是否可以将其与来自[http://www.microchip.com/pagehandler/en-us/technology/bluetooth](http://www.microchip.com/pagehandler/en-us/technology/bluetooth)的蓝牙模块连接，并从与此微芯片连接的芯片读取数据控制器 ？

先谢谢了！

亲切的问候，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:26:05.150

是的，PIC 和蓝牙模块都有 UART 接口。您唯一需要注意的是它们是否使用相同的电源电压。如果不是，请查看数据表以确保两个设备上的 I/O 引脚都能承受 I/O 电压不匹配。最常见的情况是 3.3V 器件，其输入不支持 5V 逻辑。

# android - Droid Naksh 阿拉伯语和数字

> ID：14747890
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:26.557
> 
> 标签：android, fonts, arabic

我想在我的应用程序中使用[Droid Naskh](http://code.google.com/p/googlefontdirectory/source/browse/#hg/apache/droidarabicnaskh%253Fstate%253Dclosed)字体。阿拉伯字母显示精美，但数字显示为 12345 而不是 ١٢٣٤٥。

如何让数字显示为١٢٣٤٥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:13:32.457

大概您需要用等效的阿拉伯数字替换您显示的 12345 位数字，如 Unicode 标准[http://www.unicode.org/charts/PDF/U0600.pdf中所列](http://www.unicode.org/charts/PDF/U0600.pdf)

例如

```
U+0660 ARABIC-INDIC DIGIT ZERO
....
U+0669 ARABIC-INDIC DIGIT NINE 
```

# sql - 如何通过标准 SQL 脚本插入列注释？

> ID：14747897
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:43.660
> 
> 标签：sql, standards-compliance, ansi-sql

我想要一个插入表格注释和列注释的脚本。所述脚本必须是唯一的并且在 Oracle 和 MySQL 上都能令人满意地运行。此外，我更喜欢用标准 SQL 编写它。

这就是我现在的做法。但它不适用于 MySQL。

```
comment on table F_Transaction 
    is 'Fact table for system transactions';

comment on column F_Transaction.Transaction_Date
    is 'Date in which the transaction took place'; 
```

我应该使用什么 SQL 构造来实现我的目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:35:52.253

这些[标准](http://savage.net.au/SQL/)似乎没有定义任何方式来定义表或列注释（看起来他们甚至没有提到它们）。因此，表/列上的注释语法可能因一个 DBMS 而异。

似乎许多 DBMS 都同意[Oracle 的`COMMENT ON`语法](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4009.htm)（请参阅[Oracle create table with column comments](https://stackoverflow.com/q/10516284/851811)）。

对于 MySQL，有必要指定注释以及表/列定义（在`CREATE TABLE`或`ALTER TABLE`句子中）。请参阅此相关问题：[Alter MYSQL Table To Add Comments on Columns](https://stackoverflow.com/q/2162420/851811)。

# iphone - 以编程方式根据 ios 中的公司标识符对联系人姓名进行排序

> ID：14747898
> 
> 赞同：0
> 
> 时间：2013-02-07T09:39:45.293
> 
> 标签：iphone, ios, contacts, import-contacts

我想显示联系人姓名以及公司标识符。假设名字是 john，公司是 ABC，则联系人应显示为 john ABC。是否可以以编程方式使用地址簿或 ios 中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:30:37.573

您需要获取您想要使用的记录`ABAddressBookCopyArrayOfAllPeople()`，它返回一个`CFArrayRef`或过滤其中一些子集，`NSPredicate` 然后获取名称：

```
NSString *name = (__bridge_transfer NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty)); 
```

和公司

```
NSString *company = (__bridge_transfer NSString*)ABRecordCopyValue(record,kABPersonOrganizationProperty)); 
```

然后根据需要使用这些值。有关更多详细信息，请查看[文档](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html#//apple_ref/doc/uid/TP40007744-CH6-SW1)

# testing - SpecFlow - 如何使用 NUnits TestCaseSource 属性等数据驱动测试？

> ID：14747901
> 
> 赞同：1
> 
> 时间：2013-02-07T09:39:51.007
> 
> 标签：testing, dynamic, specflow, data-driven, testcasesource

我是一名 QA，经过一番考虑后决定使用[SpecFlow](http://www.specflow.org/specflownew/)进行测试自动化。我认为它很棒，但是缺少一个我经常与其他测试运行程序（例如 NUnit）一起使用的功能 - 类似于 NUnit 中的[TestCaseSource](http://nunit.org/index.php?p=testCaseSource&r=2.5)属性，用于为要在运行时运行的测试指定一组潜在的动态数据。

在测试应该运行的每个环境中，我经常会有不同的数据，因此无法为测试参数指定硬编码值。一个简单的例子是检查每种类型的用户帐户是否能够登录，可以使用 DB 查询检索用户帐户凭据以在 NUnit 中动态填充每个测试用例：

```
public List<User> GetTestData()
{
    List<User> testData = new List<User>();
    testData = MyDatabase.GetAllUsersInfo().ToList();

    return testData;
}

[Test, TestCaseSource("GetTestData")]
public void CallLoginService(User user)
{
    var response = LoginController.TryLogin(User.UserName, User.Password);

    if (response.Error != null)
    {
        Assert.Fail("Failed to Login: {0}", response.Error);
    }

    Assert.AreEqual("Logged in ok", response.Message, "Login message not as expected");
} 
```

显然，这是该功能的一个简单示例，但我认为它描述得足够好。我知道我们有能力在 SpecFlow 中使用场景大纲和测试运行输入数据表，但这仍然是静态的，因此不符合要求。

我已经找了一段时间了，还没有在 SpecFlow 中找到像这样的任何东西，有没有人知道可以使用与上述类似的任何东西（或者如果从事该项目的任何人读到这个，则计划使用）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:48:54.273

我不知道是否有这样的计划，但现在的问题是，当您通过 Visual Studio 编辑功能文件时，会有一个后台代码生成步骤。

当它保存在 Visual Studio 中时，它会被解析并转换为 feature.cs 文件，该文件被编译并用于测试。

所以你的过程会变成

*   编辑您的数据源
*   导出到特征文件
*   获取 specflow 的 VS 插件以转换为 feature.cs
*   运行 msbuild
*   通过 Nunit 或类似工具运行测试

我不会这样做的。相反，我会专注于让我的测试成为更好的例子。听起来您要尝试详尽地涵盖所有可能性。不要提出示例来涵盖所有可能的情况，而是用更少的测试涵盖尽可能多的逻辑。

# r - 我如何在 R 中读取 MTL 文件

> ID：14747902
> 
> 赞同：3
> 
> 时间：2013-02-07T09:39:51.927
> 
> 标签：r

我对 R 编程非常陌生，有人告诉我如何读取与 landsat 卫星数据一起存档的 MTL 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:15:30.110

对于从[EarthExplorer](http://earthexplorer.usgs.gov/)或[Glovis](http://glovis.usgs.gov/)服务获得的 Landsat 场景提供的标准 MTL 文件，您可以简单地执行以下操作：

```
mtl <- read.delim('L71181068_06820100518_MTL.txt', sep = '=', stringsAsFactors = F) 
```

所以，对于这样开始的事情：

```
GROUP = L1_METADATA_FILE  GROUP = METADATA_FILE_INFO... 
```

你可以使用这个：

```
> mtl[grep("LMAX",mtl$GROUP),]
                  GROUP L1_METADATA_FILE
64          LMAX_BAND1           293.700
66          LMAX_BAND2           300.900
68          LMAX_BAND3           234.400
70          LMAX_BAND4           241.100
72          LMAX_BAND5            47.570
74         LMAX_BAND61            17.040
76         LMAX_BAND62            12.650
78          LMAX_BAND7            16.540
80          LMAX_BAND8           243.100
84       QCALMAX_BAND1             255.0
86       QCALMAX_BAND2             255.0
88       QCALMAX_BAND3             255.0
90       QCALMAX_BAND4             255.0
92       QCALMAX_BAND5             255.0
94      QCALMAX_BAND61             255.0
96      QCALMAX_BAND62             255.0
98       QCALMAX_BAND7             255.0
100      QCALMAX_BAND8             255.0 
```

每个服务都提供字典，可在[此处](https://lta.cr.usgs.gov/landsat_dictionary.html)和[此处](http://glovis.usgs.gov/ImgViewer/landsat_dictionary.html)找到。

来自 MTL 的信息可能对应用大气和辐射校正至关重要。顺便说一句，[landsat](http://cran.r-project.org/web/packages/landsat/index.html)包允许您使用`DOS()`和`radiocorr()`功能运行一些更典型的校正。

您还需要[Chander 等人提供的标准校准值。（2009 年）](http://landsathandbook.gsfc.nasa.gov/pdfs/Landsat_Calibration_Summary_RSE.pdf)。

对于更复杂的方法[，这](http://www.fs.fed.us/pnw/pubs/journals/pnw_2006_schroeder001.pdf)可能是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:37:53.773

MTL 文件仅包含元数据（我希望您知道 :-)）并且是纯文本文件，因此您可以将其读入并根据需要进行解析。如果你相当熟悉 Matlab，你可以移植这个工具 [http://www.mathworks.com/matlabcentral/fileexchange/39073](http://www.mathworks.com/matlabcentral/fileexchange/39073) ，把它转换成`R`代码。

编辑：我无法从您的评论中看出您真正需要什么。这是我从网上下载的一个示例 MTL.txt 文件：http: [//landsat.usgs.gov/images/squares/processing_level_of_the_Landsat_scene_I_have_downloaded1.jpg](http://landsat.usgs.gov/images/squares/processing_level_of_the_Landsat_scene_I_have_downloaded1.jpg)

如果您查看它，您可以看到数据项的名称和值。如果这些是你想要的，也许最简单的方法是运行命令

```
mtl.values <- read.table('filename.txt' , sep='=') 
```

这将为您提供一个 2 列数据框，第一列中包含名称，第二列中包含值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-12T15:42:07.307

要读取 Mtl 文件以及图像（堆栈图像），您可以执行以下操作：

1.  给你 Mtl 文件的目录。例如

    ```
    mtlFile<- "\\LE07_L1TP_165035_20090803_20161220_01_T1_MTL.txt" 
    ```

2.  读取元数据

    ```
     metaData <- readMeta(mtlFile)
      metaData 
    ```

3.  根据元数据文件加载栅格

    ```
     lsat <- (stackMeta(mtlFile, quantity = "all", category = "image", 
     + allResolutions = FALSE))
     lsat
     plot(lsat) 
    ```

# c# - 将 Datagridview 行从一个网格添加到另一个网格

> ID：14747909
> 
> 赞同：0
> 
> 时间：2013-02-07T09:40:17.417
> 
> 标签：c#, datagridview

我有两个表单 Form1(DGV1) 和 Form2(DGV2)，两个表单上都有 Datagridview 控件。

在 Form1 上有一个指向 Form2 的按钮链接，用户可以在其中向 Form1 datagridview(DGV1) 添加行。在 Form2 Datagridview 的第一列中有一个复选框，用户一次只能选择一行。所以有两个按钮在 Form2 上 1) 完成 2) 添加项目

当用户通过依次选择行来单击“添加项目”时，必须将行添加到 Form1 上的 datagridview 中，当单击“完成”按钮时，表单 1 应该显示所有添加的行。

```
int index = objQM.gvItemDetails.Rows.Add();
int Sno = index + 1;
string Desc = gvInventory.Rows[RowIndex].Cells[6].Value.ToString();
int Sellqty = LoadSellQty();
 decimal UnitCost = Convert.ToDecimal(gvInventory.Rows[RowIndex].Cells[8].Value.ToString());
 decimal Amount = LoadSellQty() * UnitCost;
 objQM.gvItemDetails.Rows.Insert(index,false, Sno, Desc, Sellqty, UnitCost, Amount); 
```

我可以在 Form1 datagridview 中添加一行，但是当添加第二行时，之前添加的行会丢失。

您能否提出解决此问题的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:22:20.707

您正在`gvInventory`为父网格中两行中选择的每一行添加（这是想要的工作方式吗？），如果没有尝试这个：

```
int index = objQM.gvItemDetails.Rows.Add();
DataGridViewRow row = objQM.gvItemDetails.Rows[index]; //here you get a reference to added row
row.Cells[0] = false;
row.Cells[1] = index + 1; //old Sno
row.Cells[2] = gvInventory.Rows[RowIndex].Cells[6].Value.ToString();
row.Cells[3] = LoadSellQty();
row.Cells[4] = Convert.ToDecimal(gvInventory.Rows[RowIndex].Cells[8].Value.ToString());
row.Cells[5] = LoadSellQty() * UnitCost; 
```

这样您就可以添加新行并用值填充它。从您给出的代码中不清楚为什么第一行丢失了，所以也许我需要更多信息。

# python - 在其他人中添加字符串

> ID：14747913
> 
> 赞同：0
> 
> 时间：2013-02-07T09:40:31.617
> 
> 标签：python

我有一个像`script = "C:\Users\dell\byteyears.py"`. 我想把字符串放在字符串`"Python27\"`之间，比如`script = "C:\Users\dell\Python27\byteyears.py`. 为什么我需要是因为 build_scripts 没有在 Windows 上正确运行。无论如何，我怎样才能以高效的方式实现这个愿望？

编辑：我不会打印任何东西。字符串存储在 build_scripts 中的脚本变量中

```
 script = convert_path(script) 
```

我应该放一些东西来转换它，比如

```
 script = convert_path(script.something("Python27/")) 
```

问题是`something`应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:48:44.833

`os.path`最适合处理路径，也可以在 Python 中使用正斜杠。

```
In [714]: script = r"C:/Users/dell/byteyears.py"
In [715]: head, tail = os.path.split(script)
In [716]: os.path.join(head, 'Python27', tail)
Out[716]: 'C:/Users/dell/Python27/byteyears.py' 
```

在一个模块中。

```
import os
script = r"C:/Users/dell/byteyears.py"
head, tail = os.path.split(script)
newpath = os.path.join(head, 'Python27', tail)
print newpath 
```

给

```
'C:/Users/dell/Python27/byteyears.py' 
```

在内部 Python 通常不知道斜线，所以使用正斜线“/”，因为它们看起来更好，并且不必转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:47:28.067

```
import os
os.path.join(script[:script.rfind('\\')],'Python27',script[script.rfind('\\'):]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:42:09.043

尝试：

```
from os.path import abspath
script = "C:\\Users\\dell\\byteyears.py"
script = abspath(script.replace('dell\\', 'dell\\Python27\\')) 
```

## **注意：**在使用字符串时，永远不要忘记转义 \！

如果你正在混合 / 和 \ 那么你最好使用 abspath() 将其更正到你的平台！

* * *

其他方法：

```
print "C:\\Users\\dell\\%s\\byteyears.py" % "Python27" 
```

或者，如果您希望路径更加动态，则可以通过这种方式传递一个空字符串：

```
print "C:\\Users\\dell%s\\byeyears.py" % "\\Python27" 
```

也可以：

```
x = "C:\\Users\\dell%s\\byeyears.py"
print x
x = x % "\\Python27"
print x 
```

# php - 将错误消息更改为弹出消息

> ID：14747916
> 
> 赞同：0
> 
> 时间：2013-02-07T09:40:36.860
> 
> 标签：php

我在这里解决我的代码时遇到问题.. 我已经看到此代码并自行编辑它，但我想更改错误消息以弹出警报，客户端在提交弹出消息后输入现有值将出现并说示例代码已在使用中

```
if($scode != '') {
    $qry = "SELECT * FROM toxintablemonitoring WHERE sampleCode='$scode'";
    $result = mysql_query($qry);
    if($result) {
        if(mysql_num_rows($result) > 0) {
            $errmsg_arr[] = 'Sample Code already in use';
            $errflag = true;
        }
        @mysql_free_result($result);
    }
    else {
        die("Query failed");
    }
}

if($errflag) {
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    header("location: sample_input_monitoring_toxin.php");
    exit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:00:15.597

我不确定，但您可以替换您的代码并尝试。

代替`$errmsg_arr[] = 'Sample Code already in use';`

至`echo $errmsg_arr[] = '<script>alert("Sample Code already in use")</script>';`

# asp.net - 导航菜单控制

> ID：14747918
> 
> 赞同：1
> 
> 时间：2013-02-07T09:40:45.453
> 
> 标签：asp.net, menu, navigation, controls

当我使用“菜单”控件时，它会从“站点地图”文件中获取有关菜单项的信息，我认为服务器会自动为这个“菜单”控件构建“javascript”。我可以为此控件更改此自动构建的 javascript 吗？如果我想拥有更好看的导航栏，那么首选的方法是什么：

用 javascript 和 css 构建我自己的导航菜单？

或者

想办法改变“菜单”控件中的“javascript”？

我什么时候应该使用这个“菜单”控件？如果我使用它，如何定制自己喜欢的风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:02:27.280

## 问题 1 - 为 ASP.NET 菜单赋予独特的外观：

ASP.NET 菜单控件，当呈现在 HTML 中时，只不过是一个`ul`（无序列表）。只需应用一些 CSS 样式规则即可为其赋予独特的外观：

**ASPX：**

```
<asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" CssClass="menu">
    <Items>
        <asp:MenuItem Text="Home" NavigateUrl="Home.aspx" />
        <asp:MenuItem Text="Contact us" NavigateUrl="ContactUs.aspx" />
        <asp:MenuItem Text="About us" NavigateUrl="AboutUs.aspx" />
    </Items>
</asp:Menu> 
```

**CSS：**

```
<style type="text/css">
    .menu ul
    {
        border-bottom: 1px solid gray;
    }

    .menu ul li
    {
        border: 1px solid white;
        background-color: gray;
        text-decoration: none;
        padding: 3px;
        margin: 3px;
    }

    .menu ul li a
    {
        color: White;
    }

    .menu ul li a:hover
    {
        font-weight:bold;
    }
</style> 
```

**结果：**

![在此处输入图像描述](../Images/730cd3b4825c0a1ae7088dba2895bdbd.png)

## 问题 2：ASP.NET 菜单或 CSS+Javascript 菜单：

这一切都取决于您所需的功能。

如果您只是出于导航目的使用菜单，那么确保一个简单的 CSS 和 javascript 菜单就足够了，但是如果您计划从数据库动态生成菜单项和/或根据用户角色显示隐藏某些菜单项，那么您会需要使用更强大的东西，比如 ASP.NET 菜单控件。从我对 Question1 的回答中可以看出，您可以轻松地将 CSS 和 javascript 添加到 Menu 控件，因此在这方面非常灵活。

* * *

# java - weblogic服务器中的连接泄漏

> ID：14747922
> 
> 赞同：2
> 
> 时间：2013-02-07T09:40:59.730
> 
> 标签：java, jakarta-ee, weblogic, connection-pooling

![在此处输入图像描述](../Images/a7c0c449c7d756597a3e147ff807dea4.png)

大家好需要知道这个泄露的连接数代表什么？
我已经关闭了代码中 finally 块中的所有语句和连接对象。
**这是空闲时间超过最大空闲超时时间的连接，还是 Weblogic 服务器恢复的泄漏连接数**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:34:41.403

从管理控制台上的 WebLogic 帮助页面：

> 泄漏的连接计数
> 
> 泄漏的连接数。泄漏的连接是从数据源保留但未通过调用 close() 返回到数据源的连接。

有些事情可能会导致这些泄漏。值得一提的可能对您有所帮助（过去发生在我身上）是：检查服务器上线程的状态（`Environment/Servers/[Your Server]/Monitoring/Threads`）。有时，卡住的线程（等待 I/O 或其他）可能会导致连接在您的代码命中 close() 之前达到 WebLogic 超时，从而将连接标记为泄漏。无论如何，如果是这种情况，通常是代码问题。打开连接和关闭连接之间的时间应该是最短的。您在这些调用之间运行的代码也应该尽可能少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:51:25.670

通常，您的连接获取/使用代码位于 try-catch 块中。这个问题最常用的解决方案是添加一个“finally”子句并关闭连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T09:40:08.393

Leaked Connection 意味着 WebLogic 能够在超过空闲超时后恢复未使用的连接。这通常发生在前端用户会话未正确关闭时。

[*可在此处*](http://blog.sysco.no/db/locking/jdbc-leak/)进一步阅读[](http://blog.sysco.no/db/locking/jdbc-leak/)

# excel - 如何根据另一张纸中的数字取消隐藏一张纸中的数字单元格？

> ID：14747925
> 
> 赞同：1
> 
> 时间：2013-02-07T09:41:11.243
> 
> 标签：excel, vba

您好，我想根据在工作表 1 的单元格中输入的数字隐藏工作表 2 中的单元格

我试过的：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Application.ScreenUpdating = False

    'This is were im stuck? 
    If Target.Address = "Sheet1!$D$387" Then
        Rows("28:46").Hidden = True
        Rows("28:" & 28 + Val(Target.Value)).Hidden = False
        Application.ScreenUpdating = True
    End If

End Sub 
```

访问表 1 中 D387 值的宏是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:56:18.890

在拉里的帮助下，这是我自己的解决方案（对问题的第一条评论）

此代码将进入 Sheet1 的模块（由拉里建议）：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Address = "$D$387" Then
        Sheet2.Rows("27:46").Hidden = True
        Sheet2.Rows("27:" & 27 + Val(Target.Value)).Hidden = False
        Application.ScreenUpdating = True
End If

End Sub 
```

我最初把它放在 Sheet2 的模块中

# java - 从 JSON 深处获取值

> ID：14747932
> 
> 赞同：2
> 
> 时间：2013-02-07T09:41:41.177
> 
> 标签：java, json, gson

我正在连接到第三方 API 并取回一个长 JSON 字符串。我只需要它的一个值，但它位于层次结构的深处。有没有一种简单的方法来获得它，而无需经历整个事情？我看了一遍，但似乎没有什么容易的。

这是我的例子：

```
"response":{"status":1,"httpStatus":200,"data":{"myDesiredInfo":"someInfo"},"errors":[],"errorMessage":null}} 
```

我一直在尝试使用 Gson，所以我可以将这个 blob 作为 JsonObject。我确信有一些简单的东西，就像这样：

```
jsonObject.get("myDesiredInfo") 
```

或者至少是这样的：

```
jsonObject.get("response.data.myDesiredInfo") 
```

但它似乎不存在。

那么是否有任何解析器可以让我这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:31:57.227

这是我的 json 字符串

```
String s="{"age":0,"name":"name","email":"emailk","address":{"housename":"villa"}}"; 
```

我使用以下代码来获取户名

```
 JsonElement je = new JsonParser().parse(s);
    JsonObject asJsonObject = je.getAsJsonObject();
    JsonElement get = asJsonObject.get("address");
    System.out.println(s + "\n" + get);
    JsonObject asJsonObject1 = get.getAsJsonObject();
    JsonElement get1 = asJsonObject1.get("housename");
    System.out.println(get1); 
```

以下是我的输出：

```
{"age":0,"name":"name","email":"emailk","address":{"housename":"villa"}}
{"housename":"villa"}
"villa" 
```

我认为没有其他方法可以做到这一点。我也尝试过其他方式，但我没有得到任何输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T12:56:54.797

您可以通过以下方式从 jsonObject 中检索。

```
JSONObject jObject = new JSONObject(yourresponse);
Log.i("Desired Info is ",jObject.getJSONObject("response").getJSONObject("data").getString("myDesiredInfo")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:38:27.100

我编写了一个小实用程序方法，它使用 Gson 的 API 从 JSON 对象中获取值作为字符串，基于值的 java.util.List。所以对于我最初的问题，列表对象将是“response”、“data”、“myDesiredInfo”。

当然，这可以改进，但这是一个开始。

```
/*
 * Takes a JsonObject and parses it for a primitive value, going level by level
 * according to the values in @infos
 */
public static String parseJson(JsonObject json, List<String> infos) {

    try {
        if(infos.size() == 0) {
            return json.toString();
        }

        JsonElement je = json.get((String)infos.get(0));
        infos.remove(0);

        if(je instanceof JsonObject) {
            return parseJson(je.getAsJsonObject(), infos);          
        } else {
            return je.getAsString();
        }           
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:36:41.493

大多数语言都有 JSON 解码库，其中很多是原生的。不知道您使用的是什么语言，所以这里以 PHP 为例：

```
$jsonObj = json_decode($json);
$json->response->data->myDesiredInfo; 
```

Ruby、Python、Java——所有这些语言都有很好的库。

# c# - 一个方法有两个几乎相同的 if 条件；是否可以优化代码

> ID：14747934
> 
> 赞同：0
> 
> 时间：2013-02-07T09:41:48.553
> 
> 标签：c#, winforms, visual-studio-2010, optimization

我有一个`Windows Form`使用`MDI`. 我有一个方法负责保存任何打开的可编辑表单中的数据，并且为不同的事件调用此方法。但我也在父表单`before close`事件中使用它，我需要检查所有打开的 MDIchilds，如果其中有可编辑的表单，如果有，请求保存。除此之外，我只关心它`ActiveMdiChild`是否可编辑并且只要求保存它。

这是完成这项工作的方法：

```
protected void AskForSaveBeforeClose(object sender)
{
    //Get the active child
    BaseForm activeChild = this.ActiveMdiChild as BaseForm;
    //Casting to MainForm return null if the sender is child form
    Form mainForm =  sender as MainForm;
    //If the before close event comes from the parent loop all forms 
    if (mainForm != null)
           {
        foreach (BaseForm f in MdiChildren)
        {
            if (f.isEditable == true)
            {
                if (MessageBox.Show("To Do Do You Want To Save from MainForm " + f.Text, "Status",
                         MessageBoxButtons.YesNo,
                         MessageBoxIcon.Information) == DialogResult.Yes)
                {
                    f.Save();
                }
            }
        }

           }
    //if the event is not from the parent's before close just ask for the active child 
    else if (mainForm == null && activeChild != null)
    {
        if (activeChild.isEditable == true)
        {
            if (MessageBox.Show("To Do Do You Want To Save from AC ", "Status",
                      MessageBoxButtons.YesNo,
                      MessageBoxIcon.Information) == DialogResult.Yes)
            {
                activeChild.Save();
            }
        }
    }
} 
```

`BaseForm`是每个人都继承甚至父窗体的窗体。现在我已经完成了将代码放在一个方法中，所以现在我只调用这个方法，但困扰我的是这两个部分几乎相同，但我仍然不知道如何优化逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:45:27.657

通过使用函数。将这些代码放入一个函数中，根据需要进行参数化。

方案：

```
void askToSave (Baseform f) {
    if (f.isEditable == true)
    {
        if (MessageBox.Show("To Do Do You Want To Save from MainForm " + f.Text, "Status",
                 MessageBoxButtons.YesNo,
                 MessageBoxIcon.Information) == DialogResult.Yes)
        {
            f.Save();
        }
    }
} 
```

你可以摆脱 if 语句的嵌套：

```
 if (f.isEditable == true && 
        MessageBox.Show("To Do Do You Want To Save from MainForm " + f.Text, .... 
```

这是有效的，因为`&&`(like `||`) 是短路运算符，这意味着一旦条件被证伪，从左到右，其余的操作数都不会被计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:50:45.507

您还可以创建循环遍历的集合。

```
protected void AskForSaveBeforeClose(object sender) {   
    //Get the active child
    BaseForm activeChild = this.ActiveMdiChild as BaseForm;
    //Casting to MainForm return null if the sender is child form
    Form mainForm =  sender as MainForm;

    //Create collection to loop through
    List<BaseForm> formsToCheck = new List<BaseForm>();
    if (mainForm != null && MdiChildren != null && MdiChildren.Any())
        formsToCheck.AddRange(MdiChildren);
    if (mainForm == null && activeChild != null)
        formsToCheck.Add(activeChild);

    // Only check editable forms
    formsToCheck = formsToCheck.Where(f => f.IsEditable).ToList();

    // Loop through forms
    foreach (BaseForm f in formsToCheck) {
        var fromText = "MainForm " + f.Text;
        if (f == activeChild)
            fromText = "AC";
        if (MessageBox.Show("To Do Do You Want To Save from " + fromText, "Status",
                 MessageBoxButtons.YesNo,
                 MessageBoxIcon.Information) == DialogResult.Yes) {
            f.Save();
        }       
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:51:26.507

您可以将有效表单收集到 List 中，其中 T 可以是实现业务逻辑所需的所有内容的接口（也许 List 本身就足够了）。元素（表单）应添加到此列表中，然后在随后的循环中您可以遍历此列表，显示消息框并在需要时保存。据我所知，在最坏的情况下，您的列表将只包含主要形式。

# javascript - jquery mobile + interval：无法停止在后台运行

> ID：14747935
> 
> 赞同：2
> 
> 时间：2013-02-07T09:41:51.743
> 
> 标签：javascript, jquery-mobile, setinterval, clearinterval

我正在使用 jQuery mobile，我只想有一个计数器来指示在页面上花费的时间。**问题是当用户没有**看到页面时，我无法停止在后台递增的计数器。这是我的代码：

**第 1 页**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page 1</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
    <script>
        $(document).bind("mobileinit", function(){
            $.mobile.hashListeningEnabled = false; 
        });

        var interval_id;

        function checkEverySecond() {
            $("#counter").html(parseInt($("#counter").html()) + 1);
        };

        $(document).bind("pageshow", function(){
            interval_id = setInterval(function() {checkEverySecond()}, 1000);
        });

        $(document).bind("pagehide", function(){
            clearInterval(interval_id);
        });
    </script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Page 1</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p id="counter">0</p>
        <a href="page2.html">Go to page 2</a>
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

**第2页**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page 2</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Page 2</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <a href="page1.html">Go to page 1</a>   
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:29:50.787

您将需要更改代码，jQm 页面事件的工作方式略有不同。您将页面事件绑定到每个页面，这是一个问题。您需要将它们绑定到单个页面。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/DU493/](http://jsfiddle.net/Gajotres/DU493/)

```
 var timerObject = {
        interval_id : null
    }

    function checkEverySecond() {
        $("#counter").html(parseInt($("#counter").html()) + 1);
    };        

    $(document).on('pagebeforeshow', '#page1', function(){   
            timerObject.interval_id = setInterval(function() {checkEverySecond()}, 1000);    
    }); 

    $(document).on('pagehide', '#page1', function(){   
            clearInterval(timerObject.interval_id);  
    }); 
```

我的示例是 1 个 html 多页模板，但对于多个 html 文件，同样的事情也一样。

**编辑 ：**

它在您的多 html 示例中不起作用的原因是因为使用了**bind**而不是**on**。还应该在加载 jQuery Mobile 之前声明 mobileinit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:54:39.623

当窗口具有焦点时，您可以增加：

```
var window_focus;

$(window).focus(function() {
    window_focus = true;
})

while (window_focus) {
    checkEverySecond()
} 
```

[JavaScript / jQuery：测试窗口是否有焦点](https://stackoverflow.com/questions/3479734/javascript-jquery-test-if-window-has-focus)

# android - 我想使用 jmrtd android 客户端

> ID：14747937
> 
> 赞同：1
> 
> 时间：2013-02-07T09:41:53.033
> 
> 标签：android, open-source, nfc

我按照这个页面的方向 [http://sourceforge.net/p/jmrtd/code/1490/tree/trunk/androidclient/](http://sourceforge.net/p/jmrtd/code/1490/tree/trunk/androidclient/) 执行最后一个命令 ant -f build_jar_deps.xml 我遇到了以下错误，

[exec] svn: E170000: URL ' [https://scuba.svn.sourceforge.net/svnroot/scuba/s](https://scuba.svn.sourceforge.net/svnroot/scuba/s) cuba_sc_indep' 不存在

我访问了上面的链接，我看到页面未找到错误是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-08T02:20:18.837

我知道我回复有点晚了，但是如果有人仍然对 JMRTD Android 应用程序感兴趣，我已经从头开始开发了一个新项目：

[https://github.com/tananaev/passport-reader](https://github.com/tananaev/passport-reader)

它是一个标准的 Gradle 项目，因此很容易从命令行或 Android Studio 构建。所有第三方库，包括 JMRTD，都是从 Maven 自动下载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T09:30:08.147

您必须下载 jarjar1.3.jar 并更改路径。

# ide - OCaml 语言的 IDE

> ID：14747939
> 
> 赞同：32
> 
> 时间：2013-02-07T09:42:03.373
> 
> 标签：ide, ocaml

除了 Camelia 之外，还有其他值得信赖的 OCaml IDE 吗？

如果存在的话，我更喜欢基于 Eclipse 的 IDE。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-08T07:28:59.387

编辑

• Emacs

◦ 来自标准分布的 ocaml-mode

◦ 替代 tuareg 模式[https://forge.ocamlcore.org/projects/tuareg/](https://forge.ocamlcore.org/projects/tuareg/)

− 备忘单：[http](http://www.ocamlpro.com) : //www.ocamlpro.com /files/tuareg-mode.pdf

◦ camldebug 与调试器的集成

◦ 使用 Cc Ct 快捷键键入反馈，需要 .annot 文件

• 维姆

◦ OMLet 插件 [http://www.lix.polytechnique.fr/~dbaelde/productions/omlet.html](http://www.lix.polytechnique.fr/~dbaelde/productions/omlet.html)

◦ 对于类型查找：[https ://github.com/avsm/ocaml-annot](https://github.com/avsm/ocaml-annot)

- 或[http://www.vim.org/scripts/script.php?script_id=2025](http://www.vim.org/scripts/script.php?script_id=2025)

- 也？[http://www.vim.org/scripts/script.php?script_id=1197](http://www.vim.org/scripts/script.php?script_id=1197)

• 日食

◦ OCaml 开发工具[http://ocamldt.free.fr/](http://ocamldt.free.fr/)

◦ 旧插件 OcaIDE [http://www.algo-prog.info/ocaide/](http://www.algo-prog.info/ocaide/)

• TypeRex [http://www.typerex.org/](http://www.typerex.org/)

◦ 目前主要作为 Emacs 的 typerex 模式，但与其他编辑器的集成将变得更好

◦ 标识符的自动完成（实验性）

◦ 标识符浏览：显示类型和评论，转到定义

◦ 本地和整个程序重构：重命名标识符和编译单元，开放消除

• 一些专门的编辑

◦ OCamlEditor [http://ocamleditor.forge.ocamlcore.org/](http://ocamleditor.forge.ocamlcore.org/)

◦ ocamlbrowser 检查库和程序

− 浏览模块内容

- 按名称和类型搜索

− 基本编辑，语法高亮

◦ Cameleon [http://home.gna.org/cameleon/](http://home.gna.org/cameleon/)（较旧）

◦ Camelia [http://camelia.sourceforge.net/](http://camelia.sourceforge.net/)（甚至更老）

新：编辑器[OCaml-top](http://www.typerex.org/ocaml-top.html)，具有语法高亮、缩进、类型显示，适用于所有系统。

新：[Merlin](https://github.com/def-lkb/merlin)与 TypeRex 类似，但更适用于正在进行的文件，目前具有 Vim 和 Emacs 的前端。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-01-06T00:28:48.740

**带有 ReasonML / OCaml 插件的 VSCode：**

`[![enter image description here](../Images/80adeb9e167c08c69720ad6dbf4c652c.png)](https://i.stack.imgur.com/US4Yv.png)`

*使用以下命令安装 VSCode 插件/扩展：*

`[![enter image description here](../Images/688d1eb6a9968b0f0bdd593a730ddb55.png)](https://i.stack.imgur.com/pBcgv.png)`

**Jetbrains / IntellijIDEA 终极版：**

`[![enter image description here](../Images/6d0dd3a66967d9b1b5d38a0da01e5ee9.png)](https://i.stack.imgur.com/8bDYD.png)`

*使用 Jetbrains，在此处安装插件：*

`[![enter image description here](../Images/cb9f574448fdc22517d78e5013e566ec.png)](https://i.stack.imgur.com/VlVQk.png)`

使用这些插件，您可以使用两个编辑器获得智能感知/自动完成功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T10:01:14.263

也许你可以查看这个主题：[寻找 OCaml IDE](https://stackoverflow.com/questions/7582388/looking-for-ocaml-ide/9414666#comment20622124_9414666)

对于基于 Eclipse 的 IDE，你有[OcaIDE](http://www.algo-prog.info/ocaide/)

# f# - 这个管道元组运算符是否已经存在*某处？

> ID：14747940
> 
> 赞同：6
> 
> 时间：2013-02-07T09:42:05.480
> 
> 标签：f#, operators, tuples, pipe

我知道`(||>)`哪个`(a' * 'b) -> ('a -> b' -> 'c) -> 'c`

但我一直觉得这很有用，并且想知道我是否在重新发明轮子：

```
// ('a * 'a) -> ('a -> 'b) -> ('b * 'b)
let inline (|>>) (a,b) f = (f a, f b) 
```

^(（*有可能，[`ceil`](http://msdn.microsoft.com/en-us/library/ee370402.aspx)半小时前我才发现这个功能！）)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:00:28.430

不，它没有。

但是，如果您使用 FParsec，您会经常遇到它的变体。这是 FParsec 文档中的类型签名：

```
val (|>>): Parser<'a,'u> -> ('a -> 'b) -> Parser<'b,'u> 
```

我认为该库有一组设计精良的运算符，它们也可以泛化用于其他目的。FParsec 运算符列表可在[此处](http://www.quanttec.com/fparsec/reference/primitives.html)找到。

我做了一点挖掘；`|>>`运算符似乎没有[内置的 Haskell 对应物，](https://stackoverflow.com/questions/4812633/making-a-a-a-functor)尽管它很容易使用`Control.Arrow`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:41:48.837

您描述的运算符本质上`map`是二元素元组的函数。该`map`函数通常具有签名（对于F# 库中的某些类型或许多其他类型）`F<'a>`：`seq<'a>`

```
map : ('a -> 'b) -> F<'a> -> F<'b> 
```

因此，如果您定义`F<'a>`为两个元素的元组，那么您的函数实际上就是`map`（如果您翻转参数）：

```
type F<'a> = 'a * 'a
let map f (a, b) = (f a, f b) 
```

该操作在 F# 库中的任何地方都没有内置，但意识到它实际上匹配在其他地方的 F# 库（列表、序列、数组等）中非常常见的模式是很有用的。

查看@pad 引用的 Haskell 答案 - 原则上，Haskell 可以使用*类型类*为支持此类操作的所有类型定义相同的函数（因此您可以编写`fmap`代替`Seq.map`或代替 your `TwoElementTuple.map`，但实际上并没有出于各种技术原因工作 - 所以 Haskellers 需要以不同的方式称呼它）。

在 F# 中，为不同类型定义单个`map`函数并不容易，但是您仍然可以将您的函数视为`map`用于二元素元组的函数（即使您发现给它一个符号运算符名称而不是名字`map`。）

# multithreading - 在链表中插入节点

> ID：14747941
> 
> 赞同：2
> 
> 时间：2013-02-07T09:42:05.707
> 
> 标签：multithreading, linked-list

有两个正在运行的线程，每个线程都有一个节点，我需要将它们插入到单链表列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:45:11.540

最快的方法是不锁定列表，而是准备一个列表节点，然后使用比较和交换发布它。这种“发布”语义意味着如果 CAS 失败，您首先使用新的“下一个”指针更新列表节点，然后重试 CAS；你这样做直到 CAS 成功。

# java - JAVA- PriorityQueue 实现

> ID：14747947
> 
> 赞同：2
> 
> 时间：2013-02-07T09:42:18.523
> 
> 标签：java, heap, priority-queue

Java 在 PriorityQueue 对象的实现中使用了 Heap。实现（通过 Java）是否在 poll() 操作（例如，通过另一个线程）之后并行“heapify”操作？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:47:46.670

heapify 操作一次只考虑一个元素，将其下沉或筛选。我不知道可以并行化的方式。

仍然，如果您想确定为什么不看一下代码？

编辑：我现在确定至少对于[openjdk 的实施](http://www.docjar.com/html/api/java/util/PriorityQueue.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:53:13.067

不，它不会并行化它。该算法不是那样设计的。

此外，请考虑到，由于您必须等待整个操作完成，因此只有在计算机必须等待的重要代码块（例如检索网页）的情况下，您才能从多线程中获得优势. 由于堆显然不是这种情况，因此没有任何好处。

还有一件事：每当包含多线程时，也需要付出代价：维护变得更加复杂，线程实例化和锁管理花费了 CPU 时间等等......

在这种情况下，它无济于事。另一个问题是，如果您想要一个需要在多台计算机上分布式工作的数据结构，在这种情况下，必须开发一个分布式变体，但前提是并行化的好处超过了分发数据所涉及的开销。

# android - 使用 YouTube API 和片段扩展

> ID：14747948
> 
> 赞同：0
> 
> 时间：2013-02-07T09:42:19.750
> 
> 标签：android, android-fragments, youtube-api

我想在我的项目中使用新的 YouTube API。使用文档的示例，它可以正常工作：

```
public class Test extends  YouTubeBaseActivity implements YouTubePlayer.OnInitializedListener {

    String urlVideo;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        urlVideo="5lbVNYAeFiQ";

        YouTubePlayerView youTubeView = (YouTubePlayerView) findViewById(R.id.youtube_view);
        youTubeView.initialize("MY_API_KEY", this);

    }

    public void onInitializationFailure(Provider arg0,YouTubeInitializationResult arg1) {
        Toast.makeText(this, "Error ", Toast.LENGTH_LONG).show();  
    }

    public void onInitializationSuccess(Provider arg0, YouTubePlayer arg1,boolean wasRestored) {
        if (!wasRestored) {
            arg1.loadVideo(urlVideo);
        }

    }
} 
```

好吧，问题是当我需要将 youtube 视频显示在从片段扩展的活动中时

```
public class fragUno extends Fragment { 
... 
```

我不能使用从片段扩展的活动，同时还使用：

```
extends YouTubeBaseActivity implements YouTubePlayer.OnInitializedListener { ... 
```

有没有人有同样的问题？

我搜索了信息，我发现类似的问题但没有解决方案

我衷心感谢您的帮助

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:20:20.640

通常，活动将包括而不是扩展片段。有关如何完成此操作的示例，请参见： [http](http://code.google.com/p/youtube-api-samples/source/browse/android-player/src/com/examples/youtubeapidemo/FragmentDemoActivity.java) ://code.google.com/p/youtube-api-samples/source/browse/android-player/src/com/examples/youtubeapidemo/FragmentDemoActivity.java 。请注意，在示例中“扩展 YouTubeFailureRecoveryActivity”只是因为常见的错误处理而需要，您不需要扩展 YouTubeBaseActivity 以使用 YouTubePlayerFragment(s)。

# antlr4 - LL_EXACT_AMBIG_DETECTION - 插话

> ID：14747952
> 
> 赞同：2
> 
> 时间：2013-02-07T09:42:23.537
> 
> 标签：antlr4

使用 PredictionMode::LL_EXACT_AMBIG_DETECTION 时，我收到以下错误消息：

```
line 186:7 reportAttemptingFullContext d=30, input='ON REPORT HEAD 
```

我该如何解释 d 属性。它是否引用了我的语法中的规则，我如何找出哪个规则？

根据代码：

```
@Override
public void reportAttemptingFullContext(@NotNull Parser recognizer,
    @NotNull DFA dfa,
    int startIndex, int stopIndex,
    @NotNull ATNConfigSet configs)
{
        recognizer.notifyErrorListeners("reportAttemptingFullContext d=" +
            dfa.decision + ", input='" +
            recognizer.getTokenStream().getText(Interval.of(startIndex, stopIndex)) + "'");
} 
```

属性 d 是 DFA 中的一个决策。但是我还没有弄清楚如何使用这些信息回到语法中的规则。感谢您的帮助。亲切的问候，沃尔夫冈·哈默

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:09:39.053

以下帮助方法可以将决策编号转换为规则名称。您可以基于这些方法创建自己的错误侦听器实现，`DiagnosticErrorListener`并使用这些方法在每条消息中包含规则的名称。

如果一条规则有多个决定，那么您可以在`-atn`为您的语法生成代码时将该标志传递给 ANTLR。获得规则名称后，查看由`ruleName.dot`（规则在哪里）生成的图表，您会在图表中看到一个标记为（您当前看到的数字在哪里）`ruleName`的节点。这将指向您发生问题的*确切*位置。`d=decisionNumber``decisionNumber`

 *请记住，当您更改语法时，规则和决策编号会发生变化，因此当您打开时，`ruleName.dot`您需要验证实际的决策编号，每次您为您的语法重新生成代码。

```
public static int getDecisionRule(Recognizer<?, ?> recognizer, int decision) {
    if (recognizer == null || decision < 0) {
        return -1;
    }

    if (decision >= recognizer.getATN().decisionToState.size()) {
        return -1;
    }

    return recognizer.getATN().decisionToState.get(decision).ruleIndex;
}

public static String getRuleDisplayName(Recognizer<?, ?> recognizer, int ruleIndex) {
    if (recognizer == null || ruleIndex < 0) {
        return Integer.toString(ruleIndex);
    }

    String[] ruleNames = recognizer.getRuleNames();
    if (ruleIndex < 0 || ruleIndex >= ruleNames.length) {
        return Integer.toString(ruleIndex);
    }

    return ruleNames[ruleIndex];
} 
```*

# plot - QWT zoomer plus panner 连续重绘

> ID：14747959
> 
> 赞同：3
> 
> 时间：2013-02-07T09:42:58.693
> 
> 标签：plot, zooming, pan, qwt

我有一些 QWT 做一些小测试程序的经验，但现在我需要做一些专业的东西。

我有一个需要进行缩放和平移的情节。我安装了一个效果很好的缩放器并添加了一个平移器，但是当我平移缩放区域时，重新绘制在平移结束时工作正常，但在移动过程中，我只有最后一次重新绘制的图像，它在周围和两侧移动我有空白图像。无论如何我可以让它在移动时显示一个持续更新的图像（比如护目镜地图）？我意识到谷歌地图只是一个 jpg 图像，所以它不一样，但如果我能做到这一点，它看起来会更干净。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-20T16:44:53.260

这可能有效...

```
class CustomPanner: public QwtPlotPanner
{

public:
    explicit CustomPanner(QWidget* parent) : QwtPlotPanner(parent){}

virtual bool eventFilter( QObject * object, QEvent * event)
{
    if ( object == NULL || object != parentWidget() )
            return false;

    switch ( event->type() )
    {
        case QEvent::MouseButtonPress:
        {
            widgetMousePressEvent( static_cast<QMouseEvent *>( event ) );
            break;
        }
        case QEvent::MouseMove:
        {
            QMouseEvent * evr = static_cast<QMouseEvent *>( event );
            widgetMouseMoveEvent( evr );
            widgetMouseReleaseEvent( evr  );
            setMouseButton(evr->button(), evr->modifiers());
            widgetMousePressEvent( evr);
            break;
        }
        case QEvent::MouseButtonRelease:
        {
            QMouseEvent * evr = static_cast<QMouseEvent *>( event );
            widgetMouseReleaseEvent( static_cast<QMouseEvent *>( event ) );
            break;
            grab();
        }
        case QEvent::KeyPress:
        {
            widgetKeyPressEvent( static_cast<QKeyEvent *>( event ) );
            break;
        }
        case QEvent::KeyRelease:
        {
            widgetKeyReleaseEvent( static_cast<QKeyEvent *>( event ) );
            break;
        }
        case QEvent::Paint:
        {
            if ( isVisible() )
                return true;
            break;
        }
        default:;
    }

    return false;
   }
}; 
```

现在使用 tihs 代替 PlotPanner

# windows - Windows批处理：在后台运行一个进程并等待它

> ID：14747963
> 
> 赞同：2
> 
> 时间：2013-02-07T09:43:17.253
> 
> 标签：windows, batch-file, windows-shell

我需要从我的批处理作业中启动 2 个后台进程，然后等待它们。Unix shell 类似物是：

```
myprocess1 -flags1 &
pid1=$!

myprocess2 -flags2 &
pid2=$!

wait ${pid1}
wait ${pid2} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:43:15.323

您可以使用启动包装器来解决它。

包装器启动一个进程，`start /wait`并在该进程完成后删除一个用于发送信号的文件。

您从包装器开始的第一个过程，您可以从`start /wait`.
然后你只需要等待文件。

```
Echo > waiting.tmp 
Start cmd /c wrapper.bat myprocess1 -flags1
start /wait myprocess2 -flags2

:loop
if exist waiting.tmp goto :loop 
```

wrapper.bat 的内容

```
start /wait %*
del waiting.tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:45:53.793

使用`START`命令：

```
START /WAIT myprocess1 -flags1 
```

唯一的问题是 AFAIK 你不能让进程并行运行并等待它们——它们必须按顺序运行。

您可以通过在没有 的情况下启动两个进程来实现并发`START /WAIT`，然后定期解析`TASKLIST`命令的输出以查看它们是否仍在运行。这将变得更加复杂，当然这是一个忙碌的等待，但理论上会允许进程同时运行。

# php - 获取包含文件的函数变量

> ID：14747965
> 
> 赞同：0
> 
> 时间：2013-02-07T09:43:23.690
> 
> 标签：php, function, variables, parameters, include

我有这样的功能：

```
function form($filename){
    $text="";
    if (file_exists(dirname(__FILE__)."/other/".$filename)){
        ob_start();
        include "other/".$filename;
        $text = ob_get_clean();
    }
    return $text;
} 
```

而且，在我的代码中，我有类似的东西：

```
class First {
    public function execute()
        $an_array=array("hi","goodbye");
        return form("my_form.php");
} 
```

现在我想知道如何获得`$an_array`“my_form.php”的值。该函数`form`将与可能需要多个变量的其他文件一起使用。

**编辑**

我希望包含的文件可以读取多个参数。换句话说，在其他课程上，我可以有这样的东西：

```
class Second {
    public function execute()
        $first_array=array("hi","goodbye");
        $second_array=array("other","another");
        return form("another_form.php");
} 
```

在这种情况下，我想同时阅读`$first_array`和阅读`$second_array`我的`another_form.php`文件。

**编辑 2**

有什么办法可以让我`form`的函数像 php 的`array_push`函数一样工作？换句话说，我希望有第二个参数，`form`其作用类似于`array_push`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:55:03.307

**讨厌的一个**

```
<?php

function form($filename){
    $text = '';
    $FILE = dirname(__FILE__)."/other/".$filename;
    $SPECIALVARS = func_get_args();
    $allVars = explode(',', $SPECIALVARS[1]);
    foreach( $allVars as &$AV ) { $AV = trim($AV); }

    foreach( $SPECIALVARS as $k => $v ) {
        if( $k > 1 ) {
            $theKey = $k-2;
            $_tmp = str_replace('$', '', $allVars[$theKey]);
            // var_dump($_tmp);
            $$_tmp = $v;
        }
    }
    // var_dump($first_array); // now we have it
    if (file_exists($FILE)){
        ob_start();
        include $FILE; // here you can use your vars
        $text = ob_get_clean();
    }
    return $text;
}

class Copy {
    public function execute() {
        $an_array = array( "hi", "goodbye" );
        return form("my_form.php", '$an_array', $an_array);
    }
}

class Second {
    public function execute() {
        $first_array = array( "hi", "goodbye" );
        $second_array = array( "other", "another" );
        return form("another_form.php", '$first_array, $second_array', $first_array, $second_array);
    }
}

$s = new Second;    
$s->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:13:29.857

```
function form($filename, $special = array()){
    $text="";
    $FILE = $filename;
    if (file_exists(dirname(__FILE__)."/other/".$filename)){
        ob_start();
        include $FILE; 
        $text = ob_get_clean();
    }
    return $text;
}

class Copy {
    public function execute() {
        $array = array();
        $array['first_array'] = array( "first", "second" );
        $array['second_array'] = array( "third", "fourth" );
        return form("my_form.php", $array);
    }
}

$copy = new Copy();
echo $copy->execute(); 
```

这样您就可以传递多个参数。`$special`将在 my_form.php 中可用，如下所示：

```
Array (
    [first_array] => Array
        (
            [0] => first
            [1] => second
        )

    [second_array] => Array
        (
            [0] => third
            [1] => fourth
        )

) 
```

**更新：**

如果您不想更改变量名，您可以这样做

```
function form($filename, $special = array()){
    $text = '';
    if (file_exists(dirname(__FILE__)."/other/".$filename)){
        extract($special);
        ob_start();
        include $FILE; 
        $text = ob_get_clean();
    }
    return $text;
}

class Copy {
    public function execute() {
        return form("my_form.php", array(
                                'var1' => 'test',
                                'var2' => 'test2'
                                ));
    }
}

$copy = new Copy();
echo $copy->execute(); 
```

在您`my_form.php`的变量中将可用

```
echo $var1; // test
echo $var2; // test2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:59:05.677

文件：test.php

```
include "funcs.php";

class Copy {
    public function execute()
    {
        $an_array=array("hi","goodbye");
        return form("my_form.php",$an_array);
    }
}

$f=new Copy();
echo $f->execute();
?> 
```

文件：funcs.php

```
<?php
function form($filename, $params){
    $text="";
    if (file_exists(dirname(__FILE__)."/other/".$filename)){
        ob_start();
        include "other/".$filename;
        $text = ob_get_clean();
    }
    return $text;
}

?> 
```

文件：其他/my_form.php

```
<?php
print_r($params);
?> 
```

# java - 打破 ArrayList 并在 Struts 1 中显示

> ID：14747967
> 
> 赞同：3
> 
> 时间：2013-02-07T09:43:28.130
> 
> 标签：java, jsp, controller, struts, struts-action

我遇到了显示`ArrayList`2750 行的问题。显示行的struts代码是：

```
<c:forEach items="${customerlist}" var="beneficiaryListval"varStatus="ForIndex" >
<tr id="<c:out value="${beneficiaryListval.customerId}" />">
  <td><c:out value="${beneficiaryListval.fullName}" /></td>
    <td><c:out value="${beneficiaryListval.mobileNo}" /></td>
<td><c:out value="${beneficiaryListval.passportNo}" /></td>
    <td><c:out value="${beneficiaryListval.beneficiaryCount}" /></td>
</tr>
<%rowID++;%>
</c:forEach> 
```

对此的操作方法是：

```
public ActionForward load(ActionMapping actionMapping,ActionForm     actionForm,HttpServletRequest httpServletRequest,
        HttpServletResponse httpServletResponse) {
try {
mtmrsLogger.entering("BeneficiaryAction", "load");
BeneficiaryForm beneficiaryForm = (BeneficiaryForm) actionForm;
ArrayList customerlist = customerManager.getCustomerForBeneficiaryWithCount();
httpServletRequest.setAttribute("customerlist", customerlist);
beneficiaryForm.setPageStatus("CustomerGrid");
return actionMapping.findForward(Constants.getInstance().SUCCESS);
} 
```

现在我需要中断`ArrayList customerlist`并以 50 个块发送到 JSP 并在 JSP 中显示或显示它们，以便在渲染时不会很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:53:43.030

不建议在**List**中存储 2750 条记录。当您从 DB/storage 读取它以及在您的 web/app 服务器上传递它时，请考虑它的含义。此外，您可能不需要一口气全部使用它们。

请考虑一次以 100 个块的形式获取和显示数据。您始终可以通过传递索引来对服务器进行新调用以获取下一组记录。

如果您仍然不使用，您将不得不使用 Ajax；这样，您可以继续将剩余数据附加到页面而无需刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:50:06.223

我建议使用分页机制，以便您在给定时间加载 50 或 100 条记录。看看这个[极限表](http://code.google.com/p/extremetable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:50:21.763

[Struts`<logic:iterate>`](http://struts.apache.org/1.2.x/userGuide/struts-logic.html#iterate)标记具有`offset`可`length`用于显示集合部分的属性。下面将显示`ArrayList`.

```
<logic:iterate name="customerlist" id="customer" indexId="customerNum" offset="0" length="50">
    <tr id="${customer.customerId}">
        <td>${customer.fullName}</td>
        ...
    </tr>
</logic:iterate> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:17:56.813

您不应该打破列表`customerlist` 以“分块发送到 jsp”。相反，您可以中断将返回给定数量记录的方法，即`customerManager.getCustomerForBeneficiaryWithCount(perPage);`或使用 JSP 逻辑标记来限制使用两个参数`firstRow`和`perPage`.

# javascript - 如何在pagechange上的jquerymobile中传递参数

> ID：14747972
> 
> 赞同：1
> 
> 时间：2013-02-07T09:43:54.517
> 
> 标签：javascript, web-services, jquery-mobile

我正在使用 jquerymobile 开发移动应用程序。此移动应用程序与 Web 服务一起使用。我用用户数据调用网络服务来验证自己，然后我想在下一页显示返回的数据。

目前，我在页面上有一个按钮，调用了一个 javascript 方法，该方法向我的网络服务发送了一个发布请求，然后根据网络服务调用的结果将我引导到下一页。一切正常，但我不知道如何在 page2 上显示来自我的 web 服务的数据。

我能找到的只是一些通过 $.mobile.changepage($("#page2")) 传递一些静态参数的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:51:29.960

看看我的**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它，你会发现 4 种在页面转换期间传递数据的方法。搜索章节：**页面转换之间的数据/参数操作**，您还会找到一些示例。

# datagrid - 找不到数据网格的 flex 皮肤

> ID：14747976
> 
> 赞同：0
> 
> 时间：2013-02-07T09:44:00.360
> 
> 标签：datagrid, air, skin

我定义了一个扩展边界容器的组件，并添加了一些显示对象。当我弹出容器时，它会抛出这样的错误，“找不到数据网格的皮肤。”

很奇怪。容器如下：

```
<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer  xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" backgroundAlpha="0" backgroundColor="0xffffff"  
                verticalCenter="0" horizontalCenter="0"
                xmlns:mx="library://ns.adobe.com/flex/mx">

<s:Group left="0" right="0" top="0" bottom="0" width="100%" height="100%">

    <s:Group width="100%" height="100%" horizontalCenter="0" verticalCenter="0">

        <s:VGroup gap="20" verticalAlign="middle" left="0" right="0" width="100%" height="100%" >

            <s:VGroup horizontalAlign="center" 
                      paddingTop="8" id="contVGroup"
                      paddingBottom="8"
                      paddingLeft="8"
                      paddingRight="8"
                      width="100%" height="100%">

                <s:DataGrid id="datagrid" editable="true" width="100%" height="100%"/>

            </s:VGroup>

        </s:VGroup>
    </s:Group>
</s:Group> 
```

# rest - 从 Jenkins API 获取构建信息

> ID：14747988
> 
> 赞同：6
> 
> 时间：2013-02-07T09:44:35.897
> 
> 标签：rest, jenkins

我正在编写一个 Jenkins 插件，我想从 Jenkins api 检索给定作业的最后构建信息（编号、时间戳）。我可以执行以下 REST 调用并获取它。

```
<url_to_jenkins>job/<job name>/api/json?tree=builds[number,status,timestamp,id,result] 
```

由于我的插件也部署在 Jenkins 中，有没有办法通过调用直接 JAVA api 而不是这个 REST 调用来获取这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:39:13.090

Jenkins java 文档可[在此处](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)获得。这些 api 也可以直接与 groovy 脚本一起使用。如果你想使用 Postbuild groovy 脚本插件，你可以使用`manager`. 下面是一个示例代码片段，如果构建不成功，它将禁用构建

```
if (manager.build.result.isWorseThan(hudson.model.Result.SUCCESS)) {
manager.build.project.disabled = true
} 
```

您可以查看[Groovy Postbuild Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)了解更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T00:45:20.963

从 java 代码中它应该看起来像：
1）获取项目：Jenkins.getInstance().getItem("jobName")
2）检查项目是否是某个作业类型的实例（或只是抽象）并转换
3）然后只需调用 .getLastBuild( ) 在这个对象上
4) 这将是一个构建对象 (AbstractBuild)，您可以在其中获取 id、日期、结果等。

# cuda - 多 GPU 上的 cudaMallocHost / cudaHostAlloc

> ID：14747989
> 
> 赞同：4
> 
> 时间：2013-02-07T09:44:41.317
> 
> 标签：cuda

在 CUDA 文档中，特别是在 CUDA Runtime API 的 Device Management about 部分中`cudaSetDevice`，它是这样写的

> 使用 cudaMallocHost() 或 cudaHostAlloc() 或 cudaHostRegister() 从该主机线程分配的任何主机内存都将具有与设备相关联的生命周期

所以我的问题在这里：如果我使用`cudaHostAlloc`当前设备分配主机内存是 dev 0，然后我将该主机内存转移到 dev 1 中的设备内存，是否有任何限制或问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:59:28.400

在“传统的”CUDA 内存模型中，如果要在多个上下文中使用映射的主机内存分配，则必须`cudaHostAlloc()`使用`cudaHostAllocPortable`标志来分配内存。这将使内存在所有上下文中都可移植。

如果您在具有统一寻址支持的平台上运行，那么只要您在该内存上`cudaMemcpyDefault`的任何`cudaMemcpy()`操作中使用，您就不必担心它。

# jquery - 在 JQgrid 中自动调整列宽

> ID：14747990
> 
> 赞同：0
> 
> 时间：2013-02-07T09:44:42.777
> 
> 标签：jquery, jqgrid

我在我的项目中使用 Jqgrid。在一栏中，我们显示了电子邮件地址。如果我们提供一些较长的电子邮件地址，那么该列会自动根据长度重新调整大小，这会破坏整个网格布局。由于电子邮件没有任何空格，因此它也不会变形。我想忽略额外的内容并显示给定宽度可以容纳多少。我已经尝试过给出固定宽度。请让我知道是否有人对此有解决方案。

代码：

```
 jQuery('#userDetail').jqGrid({
    url: endpoint,
    datatype: 'json',
    height: 50,
    colNames:['Names','Email', 'Phone Number', 'Fax Number', 'Country'],
    colModel:[
        {
           name:'names',
           index:'names',
           sortable: false,
           width:200,
           resizable: false

        },     {
           name:'email',
           index:'email',
           sortable: false,
           width:200,
           resizable: false

        },     {
           name:'phone',
           index:'phone',
           sortable: false,
           resizable: false,
           width:200

        },     {
           name:'fax',
           index:'fax' ,
           sortable: false,
            resizable: false,
            width:200
        },     {
           name:'country',
           index:'country',
           sortable: false,
            resizable: false,
            width:200,
        }
     ],
     multiselect: false,
     autowidth: true,
     caption: 'User Details',
     loadComplete: function(response) {
        if(!util.errorHandler(response)){
        }
     },
    jsonReader : { 
           root: "rows",
           page: "page",
          total: "total",
        records: "records",
             id: "_id",
      repeatitems: false 
   },
     }); 
```

谢谢桑迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:03:32.587

我不确定我是否理解您的要求。你写的主要是关于像电子邮件这样没有空格的长文本的翘曲问题。这个问题可以通过使用字符换行来解决。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6915486/315935)。[另一个答案](https://stackoverflow.com/a/7256972/315935)包含有关在不同 Web 浏览器中实现字符级换行的附加信息。如果文本包含空格，大多数 Web 浏览器会进行字级换行，并且仅当文本中不存在空格时才进行字符换行。这不是你需要的吗？

# wpf - 在移动到 xaml 中的另一个窗口之前检查未保存的更改

> ID：14747992
> 
> 赞同：0
> 
> 时间：2013-02-07T09:44:55.350
> 
> 标签：wpf, xaml

假设我必须 xaml 文件。我可以从第一个窗口导航到第二个窗口。在离开未保存更改的第一个窗口之前，我如何警告用户？我知道我可以使用 MessageBox.Show 作为警报，但我不知道如何检查整个窗口的更改。

提前感谢您的帮助乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:26:44.070

您将需要实现 IsDirty 功能。最好的方法是为您的 Window 编写一个 Viewmodel。

看看[那个](https://stackoverflow.com/questions/2248045/isdirty-implementation-for-wpf)SO question 看看应该怎么做。

# java - 无法在hadoop中列出文件

> ID：14747997
> 
> 赞同：3
> 
> 时间：2013-02-07T09:45:07.080
> 
> 标签：java, hadoop, hdfs

我是hadoop的新手。

我正在尝试使用此递归代码列出我的 hdfs 中存在的所有文件。

```
public void list(String path) throws IOException {
    Path dirPath = new Path(path);
    FileStatus[] fileStatus = fileSystem.listStatus(dirPath);
    if(fileStatus != null) {
        for (FileStatus fs : fileStatus) {
            String name = fs.getPath().getName();
            if(fs.isDir()) {
                System.out.println("dir --> " + name);
                list(dirPath.getName() + "/" + name);
            } else {
                System.out.println("file --> " + name);
            }
        }
    }
} 
```

但是我没有得到文件列表。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:15:02.403

如前所述，您必须正确初始化 Filesystem 对象。它应该是这样的：

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(URI.create(uri), conf); 
```

如果您尝试从 HDFS 获取数据，则`uri`应该包含前缀。`hdfs:///`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:52:11.113

尝试以下操作：

`

```
FileSystem fs = FileSystem.get(new Configuration());
RemoteIterator<LocatedFileStatus> rmIterator = fs.listLocatedStatus(new Path(srcPath));
while (rmIterator.hasNext()) {
Path path = rmIterator.next().getPath();
if(fs.isDirectory(path)){
System.out.println("Directory Name: "+path.getName());
}else if(fs.isFile(path)){
System.out.println("File Name: "+path.getName());
} 
```

`

# android - 将动画应用于图表引擎饼图

> ID：14747998
> 
> 赞同：1
> 
> 时间：2013-02-07T09:45:10.903
> 
> 标签：android, achartengine, pie-chart

我可以使用图表引擎显示饼图，但我想要该饼图的一些动画。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:01:46.463

对于旋转动画，只需调用 create a`Thread`并在其中包含一个循环：

```
renderer.setStartAngle(value);
chartView.repaint(); 
```

您将增加循环中每次迭代的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:14:37.277

对于旋转，您可以在图表视图上使用 Android xml 动画框架执行此操作，在此处使用 .. 更多信息：http: [//developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

但是要逐片显示图表会更难，您需要更改图表引擎.... 2 种方式。使其返回分离视图/可绘制中的每个切片并使用 Android xml 对其进行动画处理...或者您可以直接在画布上进行动画处理。但我不太确定具体是怎么做的，这取决于你的聊天引擎。