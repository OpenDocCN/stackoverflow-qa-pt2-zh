# StackOverflow 问答 13342000-13342999

# ios6 - 将旧位置与 iOS6 委托中的新位置进行比较

> ID：13342002
> 
> 赞同：0
> 
> 时间：2012-11-12T10:25:11.123
> 
> 标签：ios6, cllocationmanager

在 ios6 中，CLLocationManager 委托方法：

```
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation 
```

已弃用，现在替换为：

```
- (void)locationManager:(CLLocationManager *)manager 
     didUpdateLocations:(NSArray *)locations 
```

为了获取最后一个位置（最新的），我们获取数组中的最后一个对象：

```
- (void)locationManager:(CLLocationManager *)manager 
     didUpdateLocations:(NSArray *)locations{

   //[locations lastObject]
} 
```

我使用该方法来监控位置的重大变化：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    if ([CLLocationManager significantLocationChangeMonitoringAvailable]) {

        [locationManager startMonitoringSignificantLocationChanges];

    }
}

    - (void)locationManager:(CLLocationManager *)manager 
         didUpdateLocations:(NSArray *)locations{

       //[locations lastObject]
    } 
```

所以当应用程序进入后台时，我开始寻找设备位置的重大变化，但这通常需要一些时间来检测是否检测到位置变化，对吧？如果应用程序进入后台并且没有检测到位置变化，`locationManager:didUpdateLocations:`委托方法将如何表现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:05:28.097

仅当位置发生更改时才会调用此委托方法，否则永远不会调用它。

# dns - NS：得到不安全的响应；父母表示它应该是安全的

> ID：13342003
> 
> 赞同：15
> 
> 时间：2012-11-12T10:25:12.303
> 
> 标签：dns, centos, bind, named

我正在尝试在学校网络上的 Centos 6.3 上运行 Bind，但无法让外部查询正常工作。

我可以挖掘/查询在我的服务器上运行的我自己的区域，但是一旦我挖掘了一个外部域名，我就会在我的日志文件中看到以下内容：

```
NS: got insecure response; parent indicates it should be secure 
```

我禁用了 dnssec 没有结果。我正在使用学校的 DNS 转发器，帮助台目前不知道出了什么问题。

但是，我可以挖掘@SCHOOL-SERVER，它会返回一个正确的答案。它只是与似乎不起作用的货运代理一起工作。

有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-17T16:56:21.543

这与现在默认启用的新 DNSSEC 功能有关。这可能表明您使用的 DNS 解析器/转发器不支持 DNSSEC，因此响应似乎对您的服务器不安全。

您可以使用支持 DNSSEC 的解析器，也可以暂时禁用服务器上的该功能。要禁用它，只需在您的`named.conf`or中使用这些参数`named.conf.options`：

```
dnssec-enable no;
dnssec-validation no; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-05T22:34:00.913

互联网可能是一个非常令人沮丧的地方，人们鹦鹉学舌相同的答案；代替解决方案，您将获得解决方法。

我可以告诉你一个事实，如果 DNS 服务器说它正在提供安全响应，那么它就是在提供安全响应。这里的问题是 DNS 转发器正在剥离 DNSSEC 签名，这似乎很常见，因为我还没有听说这是透明地完成的，所以您可能有一个转发器集。因此，如果您确实想以这种方式使用 DNSSEC，请在 named.conf.options 中禁用您的转发器：

```
options {
        directory "/var/cache/bind";
        //forwarders {
        //      8.8.8.8;
        //};

        dnssec-validation auto;
        dnssec-enable yes;
        dnssec-lookaside auto;
}; 
```

# c# - 如何按给定百分比创建概率？

> ID：13342004
> 
> 赞同：7
> 
> 时间：2012-11-12T10:25:12.507
> 
> 标签：c#, probability, probability-theory

我正在尝试为游戏创建基于百分比的概率。例如，如果一个物品有 45% 的几率造成暴击，那一定意味着它有 100 次命中中有 45 次是暴击。

首先，我尝试使用一个简单的解决方案：

```
R = new Random();
int C = R.Next(1, 101);
if (C <= ProbabilityPercent) DoSomething() 
```

但是在 100 次迭代中，例如 48% 的机会，它给出了 40-52 出 100。同样适用于 49、50、51。因此，这些“百分比”之间没有区别。

**问题是如何设置例如 50 的百分比，并随机获得 100 个中的 50 个？** 对于稀有物品的找到概率来说，增加物品找到的机会是一件非常重要的事情。所以 1% 的增益是明智的，因为现在不是。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T10:32:36.957

您只需要考虑重复滚动的均匀分布。

你不能看超过 100 卷，因为强迫它**正好**产生45*不会是随机*的。通常，这样的卷应该表现出“缺乏记忆”。例如，如果您掷骰子寻找 6，则您有六分之一的机会。如果你掷了 5 次，但没有得到 6 - 那么：下一次得到 6 的机会不是 1。它仍然是 6 分之一。因此，你只能看它的匹配程度摊销到统计上大量的事件时您的期望... 100,000 说。

基本上：您当前的代码很好。如果用户知道（因为他们已经击中 55 次而没有重击）接下来的 45 次击中**必须**是重击，那么它不再是随机的，他们可以游戏系统。

还; 45%的暴击几率似乎有点高；p

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:38:43.503

> 我正在尝试为游戏创建基于百分比的概率。例如，如果一个物品有 45% 的几率造成暴击，那一定意味着它有 100 次命中中有 45 次是暴击。

不，那不是真的。您完全误解了概率的概念。您不想要“基于百分比的概率”，您想要“基于百分比的 100 个样本的随机分布”。

你需要的是一个“事件包”，其中 45 个是“关键的”，其中 55 个是“非关键的”。从包中选择一个事件后，您下次只能选择剩余的事件。

你可以这样建模：

```
Initialize two integer variables Crytical and NonCrytical so that they sum exactly 100 according to the desired percetnages.

Get a random value from 1 to Crytical+NonCrytical

If the random value is less than the value of Crytical, let you hit be crytical and:

   Crytical = Crytical -1

Else, let your hit be non-crytical

   NonCrytical = NonCrytical-1

End If

Repeat until Crytical+NonCrytical = 0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-12T20:48:51.567

由于我不是 C# 方面的专家，因此我将轻松使用 C++ 函数，但仍然适用于任何语言。

rand() - 随机数生成器。

```
//33.34%
double probability = 0.3334;

//divide to get a number between 0 and 1
double result = rand() / RAND_MAX;
if(result < probability)
   //do something 
```

我已经使用这种方法创建了非常大的渗透网格，它对于精度值非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:31:31.810

问题是，`Random`您可能只想初始化这个类一次。

这是因为`Random`使用系统时间作为生成随机数的种子。如果您的循环非常快，则可能会发生多个随机实例使用相同的种子并因此生成相同的数字。

如果您怀疑发生这种情况，请检查生成的数字。

除此之外，随机性的固有特性是它不会给你准确的结果。这意味着即使有 50/50 的机会，100 个“正面”或“反面”的序列也可能出现 100 次“正面”。

您唯一能做的就是创建一次 Random-instance 并接受结果；否则你不应该使用随机。

# css - CSS 布局问题 + 示例图像

> ID：13342005
> 
> 赞同：0
> 
> 时间：2012-11-12T10:25:15.573
> 
> 标签：css, layout

* * *

我正在尝试做类似图像中的事情。容器（包含所有三个灰色矩形）是窗口宽度的 100%。无论我做什么，当容器太长时，标题和描述都会移到容器的左侧。

我希望图像（将是固定宽度）始终位于左上角。标题和描述应保持在如图所示的矩形范围内，并且在调整大小时，它们的宽度应随着窗口的大小而扩大。

这是小提琴[http://jsfiddle.net/hHjeH/](http://jsfiddle.net/hHjeH/)

![所需的 CSS 布局](../Images/d10d8006392150a0afc817c3c78dcdd4.png) HTML

```
<div class="container clearfix">
    <div class="image">
    </div>
    <div class="subcontainer clearfix">
        <div class="title clearfix">
            Title
        </div> 
        <div class="description">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. 
        </div>
    </div>
</div> 
```

CSS

```
.container 
{
  width: 100%;
  margin: 0px;
  padding: 0px;
  background-color:#eee;
}
.image 
{
  width: 100px;
  height: 100px;
  background-color:#888;
  float: left;
}
.subcontainer 
{
  margin: 20px 0px 20px 20px;
  float: left;
}
.title 
{
  font-size:20pt;
  font-weight:bold;
  padding: 0px 0px 10px 0px;
}
.description 
{
  margin-left: 10px;
}
/* For modern browsers to clear floats */
.clearfix:before,
.clearfix:after {
  content:"";
  display:table;
}
.clearfix:after {
   clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
.clearfix {
  zoom:1;
}​ 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:35:54.777

浮动图像，而不是`.subcontainer`. 并垫`.subcontainer`比图像更宽。

像这样：http: [//jsfiddle.net/hHjeH/2/](http://jsfiddle.net/hHjeH/2/)

# php - 如何在数组中搜索？

> ID：13342007
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:25:31.423
> 
> 标签：php, arrays, search

我有一个数组

```
$data = array(
  array(
    "engine" => "Gecko",
    "browser" => "Firefox 1.0",
    "platform" => "2",
    "version" => "1.7",
    "grade" => "A"
  ), 
  array(
    "engine" => "SHmeko",
    "browser" => "Firefox 1.5",
    "platform" => "1",
    "version" => "1.8",
    "grade" => "B"
  )
); 
```

如何按元素搜索？in_array 不适合，因为我需要找到所有匹配项，如果我搜索“k”，我需要在元素内容“k”中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:30:37.353

这应该有助于：

```
$key = array_search('k', $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:31:00.377

你的意思是`array_search`？

```
mixed array_search ( mixed $needle , array $haystack [, bool $strict = false ] ) 
```

[http://de2.php.net/manual/de/function.array-search.php](http://de2.php.net/manual/de/function.array-search.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:36:06.857

你可以试试这个：

```
$friends = array( 'Bob', 'Ann', 'Peter' ); // Two persons named 'Bob'
$find = 'Bob';
$key = array_search( $find, $friends ); // Find key of given value
if ($key != NULL || $key !== FALSE) {
    unset($friends[$key]); // remove key from array
} 
```

你也可以参考这个链接

[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:32:31.997

如果您尝试在此数组中搜索特定术语/键，您可以通过以下方式执行此操作：假设您是否必须`A`在数组中查找`$data`：

```
$key = array_search(‘A’, $data); 
```

在此之后`$key`将包含它对它具有值“A”的位置

如果所需的值不是数组的一部分，它将包含`FALSE`

希望它能解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:32:50.403

也许尝试使用：

```
array array_filter ( array $input [, callable $callback = "" ] ) 
```

带有使用 preg_match() 的回调函数？

更多信息[array_filter](http://www.php.net/manual/en/function.array-filter.php) [preg_match](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T16:37:35.947

```
 if (isset($_GET['sSearch']) && $_GET['sSearch'] != "") {

        foreach ($data as $sort) {
            foreach ($sort as $key => $val) {
                if (preg_match_all('/' . $_GET['sSearch'] . '/i', $val) != 0) {
                    $new[] = $sort;
                    break;
                }
            }
        }
        if(isset($new))$data = $new; else $data=0;
    } 
```

# python - 计算内容的大小

> ID：13342010
> 
> 赞同：1
> 
> 时间：2012-11-12T10:25:53.120
> 
> 标签：python, python-3.x

下面是代码片段。我有一个文件。

```
f = open(self.reportSavePath,'w')
self.test = '';
for file in file_sorted:
    f.write(str(os.path.getmtime(file)) + "|" + file + "\r\n")
    self.test = self.test + str(os.path.getmtime(file)) + "|" + file + "\r\n"
f.close()

print("Size:",os.path.getsize(self.reportSavePath)) #Without opening file
print("Calculated size:",len(self.test.encode()))     #After reading the contents 
```

我的问题是，为什么最后两行给出不同的输出？它们不应该相同吗？

如果有原因，我如何编辑带有注释的行`#Without opening file`以匹配带有注释行的输出`#After reading the contents`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:30:40.500

你在比较苹果和橘子。

`os.path.getsizeof`返回文件大小。`len(some_string)`以字符为单位返回字符串的长度，*而不考虑 encoding*，这会影响原始字节数。

# jpa - 集合查询中集合的所有元素的 JPQL

> ID：13342011
> 
> 赞同：4
> 
> 时间：2012-11-12T10:25:54.007
> 
> 标签：jpa, jpql

我有一个用户类：

```
 @Entity
 public class User implements Serializable {
 //..
 @ElementCollection(fetch = FetchType.EAGER)
 Set<UserPrivs> privs;
 //..
 } 
```

其中 UserPrivs - 枚举。

我想创建方法`List<User> getUsersByPrivs(Set<UserPrivs> privs)`，它将返回包含所有权限的所有用户。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-23T18:23:37.863

像这样使用 CriteriaBuilder？

```
List<User> getUsersByPrivs(Set<UserPrivs> privs) {
    EntityManager em = getEntityManager();
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<User> cq = cb.createQuery(User.class);
    final Root<User> u = cq.from(User.class);
    List<Predicate> predicates = new ArrayList<>();
    for (UserPrivs priv : privs) {
        predicates.add(u.join("privs").in(Arrays.asList(priv)));
    }
    cq.where(cb.and(predicates.toArray(new Predicate[predicates.size()])));
    return em.createQuery(cq).getResultList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:04:08.233

```
Select u from User u join u.privs p where p.name in :privsNames 
```

这是任意的，要获得所有，您需要加入 u.privs n 次并将它们组合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:36:27.770

我希望这有帮助：

```
 String query = "select u from User u where 0=1 ";
    for (UserPrivs p : privs) {
        query += " or '" + p.name() + "' in u.privs";
    } 
```

# mysql - 在 MySQL 中使用 IF （不是函数）

> ID：13342012
> 
> 赞同：1
> 
> 时间：2012-11-12T10:25:54.490
> 
> 标签：mysql, conditional

我有一个感觉很简单的问题，但似乎无法正确回答。我只是想执行一个常规的 IF ... THEN ... 逻辑，但似乎无法正确：

```
set @var:=2;
if @var=1 THEN select 'hello'; 
```

我得到：

> 错误 1064 (42000)：
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'if @var=1 THEN select 'hello'' 附近使用正确的语法

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:29:51.627

您可以改用[CASE](http://dev.mysql.com/doc/refman/5.6/en/case.html)。

```
SET @var:=2; 
SELECT CASE WHEN @var=1 THEN 'hello' ELSE 'no hello' END;
--prints 'no hello'

SET @var:=2; 
SELECT CASE WHEN @var:=1 THEN 'hello' ELSE 'no hello' END;
--prints 'hello' 
```

我希望通过上面的例子可以清楚地了解这个想法。

**编辑：**为了解决 OP 的其他问题，您可以将`select`s 合并到`case`语句中，但您应该用括号括起来。例如。

```
SET @var:=2; 
SELECT CASE WHEN @var:=1 THEN (select 'hello') ELSE (select 'no hello') END; 
```

需要注意的一件事是它应该只返回一个值（来自一行和一列）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:11:38.787

您可以，但只能在函数、过程和触发器内部，如下所示：

```
DELIMITER //
DROP PROCEDURE IF EXISTS anyname//
CREATE PROCEDURE anyname()
BEGIN
    IF @var1 = 1 THEN
        SELECT 'hello';
    END IF;
END//
SET @var1 := 1;
CALL anyname()// 
```

# c++ - 返回副本而不是 const 引用时我会破坏代码吗

> ID：13342016
> 
> 赞同：3
> 
> 时间：2012-11-12T10:26:14.100
> 
> 标签：c++

我需要使用的框架定义了一个简单的互斥锁类，该类可以存储互斥锁所有者的名称以帮助调试：

```
class mutex
{
public:
    explicit mutex(const std::string& mutex_owner = "");

    bool acquire() const;
    bool release() const;

    const std::string& get_name() const {return owner_name_;}

    // ...

private:
    std::string owner_name_;

    // ...
}; 
```

我刚刚更改了一些算法，使互斥锁类型成为模板参数，这样如果不需要锁定，我可以出于性能原因传入这个：

```
class non_mutex
{
public:
    explicit non_mutex(const std::string& mutex_owner = "")     {}

    bool acquire() const               {return true;}
    bool release() const               {return true;}

    std::string get_name() const {return "";}
}; 
```

由于这个不存储名称（无需调试），我将`get_name()`成员函数更改为返回 a `std::string`，而不是 a `const std::string&`。

现在我的问题是：*这*（***默默地***）会*破坏什么吗？*代码编译得很好，似乎也运行得很好，但是这个代码库中的测试很少，而且这个函数主要只在出现问题时使用，而不是经常使用。

在哪些情况下，此更改可能会触发运行时故障？

请注意，这是一个 C++03 环境，但我也会对 C++11 的答案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:33:49.697

按值返回的那个可能会抛出一个错误的分配，引用一个是不抛出的。所以这可能是个问题。

此外，他们有可能调用不同的重载，并且特征会以不同的方式专业化，但我不会担心这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:29:47.927

好吧，你不再返回一个常数。您正在返回一个临时的。

从理论上讲，这可能允许用户滥用返回值？也许？

顺便提一句。我会这样解决这个问题：

```
static std::string empty_string;
const std::string& get_name() const { return empty_string; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:09:13.480

对于无声破坏，一个区别是返回/返回引用的对象的生命周期。例如，考虑以下代码：

```
const string &stupid_user(const string &s) { return s; }

const string &name = stupid_user(mtx.get_name());
mtx.acquire();
std::cout << name; 
```

现在，如果`mtx`有类型，`mutex`那么这会在`acquire`. 如果`mtx`具有类型`non_mutex`，则它具有未定义的行为（在这种情况下， const 引用*不会*延长临时对象的寿命）。未定义的行为显然允许它通过*您*的测试。

对于不那么愚蠢的用户：

```
const string &name = mtx.get_name();
mtx.acquire();
std::cout << name; 
```

现在的行为`mutex`是它打印新所有者，`non_mutex`它打印旧所有者。也许您的测试捕捉到了这一点，也许它们没有捕捉到，但如果调用代码假定一个并且您提供了另一个类型，那么您已经默默地破坏了调用代码。

或者怎么样：

```
auto &&name = mtx.get_name();
mtx.acquire();
std::cout << name; 
```

我认为这与非愚蠢用户的行为相同，但我不确定。

如果您（或此问题的未来访问者）对嘈杂的破损感兴趣，那么这取决于您如何定义允许使用 Mutex 概念的表达式（您希望您提出的两个类都满足）。

例如，如果表达式`&mtx.get_name()`是允许的，`non_mutex`则不满足概念的要求。

如果您不允许该表达式，那么也许`non_mutex`确实满足要求 - 仔细查看允许哪些表达式涉及对`get_name`. 如果您只需要它的返回值是“可转换为`string`”或类似的，那么您就可以了。

如果您没有根据允许的表达式定义对模板参数的要求，而是根据它具有的成员函数签名和返回类型来定义要求，那么（a）您犯了一个错误，这不是基于模板的编译方式-time 多态性应该起作用，并且 (b)`non_mutex`没有相同的成员函数签名和返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:09:27.570

我不觉得你的改变有任何问题。两者都`get_name()`返回不可修改的左值；尝试修改它们会导致 C++03 中的编译器错误。

如果你想学究气，你总是可以根据 SFINAE 做出选择，因为你已经模板化了代码。有了它，您可以完全删除`non_mutex::get_name()`.

# visual-studio - 双asm方言项目intel/AT&T的问题

> ID：13342019
> 
> 赞同：0
> 
> 时间：2012-11-12T10:26:27.923
> 
> 标签：visual-studio, gcc, assembly, intel, inline-assembly

我正在开发一个需要与 QNX-Momentics（基于 Eclipse，g++ 4.6.1 工具链）和 Visual Studio 2010 编译的项目。对于某些例程，我决定进行手动组装实现，因为即使内在函数也不好优化。第一个编译器具有 ATt&T 语法，可以使用 -masm=intel 标志“intelized”，第二个编译器仅是 intel 方言。

使用 intel-flag，我可以通过一个 - 不好但有效 - 定义的技巧来超越符号方面：

```
#ifdef _WIN32
    #define _cmd(...) __VA_ARGS__
    __asm {
#else
    #define _cmd(...) #__VA_ARGS__
    asm volatile (
#endif
  // constants
  // set loop counter
  _cmd( xor       eax, eax; )
        :
        :
#ifdef _WIN32
   }
#else
   );
#endif 
```

现在，一个问题是，我无法使用内联 AT&T 按名称访问函数的局部变量或参数。我在另一个线程中得到的提示，使用类似的东西

```
register __m128i x asm("xmm6"); 
```

没有工作的局部变量，它被分配给xmm0。内部函数未定义的局部变量或参数导致 AT&T 中未定义的引用，因此我决定使用裸堆栈处理，例如

```
_cmd( movupd   xmmword ptr [eax], xmm3; ) 
```

并遇到了一个新问题：

函数参数和局部变量在两种方言中的处理方式完全不同。考虑以下示例：

```
template<typename T>
void linearRegression2DAsm(unsigned int p_oNumPoints, T *p_pXcoords, T *p_pYcoords, 
double *oX, double *oY, double *oXY,
double p_oAvgX, double p_oAvgY)
{
unsigned int p_rLoopsize = p_oNumPoints - (p_oNumPoints % 2);
double oAvgX[2]; 
```

以及上面给出的定义块之后的简单计算：

```
_cmd( xor       eax, eax; )
// p_pXccoords
_cmd( mov       ecx, dword ptr [ebp+12]; )
// p_pYcoords
_cmd( mov       edx, dword ptr [ebp+16]; )
// p_oAvgX
_cmd( movhpd    xmm6, qword ptr [ebp+20]; )
// p_oAvgY
_cmd( movhpd    xmm7, qword ptr [ebp+28]; )
_cmd( movlpd    xmm6, qword ptr [ebp+20]; )
_cmd( movlpd    xmm7, qword ptr [ebp+20]; )
_cmd( addpd     xmm7, xmm6; )
// result into oAvgX
_cmd( mov eax, [ebp-32]; )
_cmd( movupd   xmmword ptr [ebp-32], xmm7; ) 
```

结果应该在 oAvgX 中，它适用于英特尔，但不会导致使用英特尔标记的 AT&T asm 编译器成功。其次，我担心额外的 O2-Flag 可能会优化其他变量，因此不能保证堆栈在不同编译上的构建相同。

我需要内联，但看不到解决双重方言问题的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:44:29.910

您可以在 GCC 的内联程序集中按名称访问局部变量，只是您必须以不同于在 VS2010 中的方式进行操作。在内联汇编结束时，您应该/必须提供输入列表、输出列表和“破坏”列表；其中输入列表和输出列表都可以包含局部变量。另请注意，“clobbered”列表非常重要（编译器假定任何未列为 clobbered 或列为输出的内容都不会改变，包括所有内存内容等）。

依赖意外的事情（例如发生在哪些寄存器中，或者发生在哪些内存位置或堆栈位置中）是一个严重的错误，无论您使用哪种编译器，也不管它是否在某些有限的情况下实际工作测试用例。唯一正确的方法是依赖为此目的提供的工具（例如，GCC 内联汇编中的输入/输出列表）。

对于任何重要的内联汇编；鉴于内联汇编不是任何（C/C++）标准的一部分；我假设让它在多个编译器中可靠地工作的唯一明智的方法是复制内联程序集。

另请注意，不同的操作系统有不同的约定（例如不同的 ABI、不同的内核系统调用等）。本质上，（作为最坏的情况）您可能需要执行以下操作：

```
#ifdef WIN32_VS2010
    /* Inline assembly to suit Visual Studio 2010 for Win32 here */
#elifdef WIN32_ICC
    /* Inline assembly to suit Intel's "ICC" compiler for Win32 here */
#elifdef LINUX_ICC
    /* Inline assembly to suit Intel's "ICC" compiler for Linux here */
#elifdef WIN32_GCC
    /* Inline assembly to suit GCC compiler for Win32 here */
#elifdef LINUX_GCC
    /* Inline assembly to suit GCC compiler for Linux here */
#else
    /* Generate error about unsupported target here */
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:19:56.097

一种方法是将变量包装到一个结构中，使用足够的虚拟变量来强制干净对齐到 4,8 或 16。然后可以使用 offsetof(struct x, member) 计算成员的相对位置，并希望这些数字可以在编译时作为兼容字符串注入。

```
#define LOCAL(a) ((offsetof(struct mystruct,a)==0?"0":offsetof(a)==4?"4":"error"))

asm("   push ebp \n\t"
    "   mov ebp, %0 \n\t"
    "   mov %0, " LOCAL(a) "\n\t"   // this would convert to [ebp + 4]
    "   pop ebp   \n\t"
    :"=0" (&my_struct) :::); 
```

VC版本可以开始：

```
asm("   push ebp ");
asm("   lea ebp, struct.a "); 
```

之后，相同（丑陋）的语法和相同数量的局部变量。

# ruby-on-rails - ruby TypeError 无法将日期转换为字符串

> ID：13342021
> 
> 赞同：1
> 
> 时间：2012-11-12T10:26:30.047
> 
> 标签：ruby-on-rails, ruby, redmine-plugins

我进入`TypeError (can't convert Date into String)`ruby​​，使用`irb`i test & 可以获得所需的值，但在 redmine 的图形插件中，我得到了上述错误。

ruby 版本是 1.9.3p0，但我得到这个错误日志：

```
TypeError (can't convert Date into String):
plugins/redmine_graphs/app/controllers/graphs_controller.rb:130:in `parse'
plugins/redmine_graphs/app/controllers/graphs_controller.rb:130:in `block in issue_growth_graph'
plugins/redmine_graphs/app/controllers/graphs_controller.rb:126:in `each'
plugins/redmine_graphs/app/controllers/graphs_controller.rb:126:in `issue_growth_graph'
vendor/gems/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal
/implicit_render.rb:4:in `send_action' 
```

另一个问题是我的 ruby​​ 版本是 1.9.3p0，但在日志中我得到 1.91，为什么会这样？

redmine 的图形插件中的以下代码导致此问题：

```
# Displays projects by total issues over time
def issue_growth_graph

    # Initialize the graph
    graph = SVG::Graph::TimeSeries.new({
        :area_fill => true,
        :height => 300,
        :min_y_value => 0,
        :no_css => true,
        :show_x_guidelines => true,
        :scale_x_integers => true,
        :scale_y_integers => true,
        :show_data_points => false,
        :show_data_values => false,
        :stagger_x_labels => true,
        :style_sheet => "/plugin_assets/redmine-graphs-plugin/stylesheets/issue_growth.css",
        :width => 720,
        :x_label_format => "%Y-%m-%d"
    })

    # Get the top visible projects by issue count
    sql = "SELECT project_id, COUNT(*) as issue_count"
    sql << " FROM issues"
    sql << " LEFT JOIN #{Project.table_name} ON #{Issue.table_name}.project_id = #{Project.table_name}.id"
    sql << " WHERE (%s)" % Project.allowed_to_condition(User.current, :view_issues)
    unless @project.nil?
        sql << " AND (project_id = #{@project.id}"
        sql << "    OR project_id IN (%s)" % @project.descendants.active.visible.collect { |p| p.id }.join(',') unless @project.descendants.active.visible.empty?
        sql << " )"
    end 
    sql << " GROUP BY project_id"
    sql << " ORDER BY issue_count DESC"
    sql << " LIMIT 6"
    top_projects = ActiveRecord::Base.connection.select_all(sql).collect { |p| p["project_id"] }

    # Get the issues created per project, per day
    sql = "SELECT project_id, date(#{Issue.table_name}.created_on) as date, COUNT(*) as issue_count"
    sql << " FROM #{Issue.table_name}"
    sql << " WHERE project_id IN (%s)" % top_projects.compact.join(',')
    sql << " GROUP BY project_id, date"
    issue_counts = ActiveRecord::Base.connection.select_all(sql).group_by { |c| c["project_id"] }

    # Generate the created_on lines
    top_projects.each do |project_id, total_count|
        counts = issue_counts[project_id].sort { |a,b| a["date"]<=>b["date"] }         
        created_count = 0
        created_on_line = Hash.new
        #the place of error is following error
        created_on_line[(Date.parse(counts.first["date"])-1).to_s] = 0
        counts.each { |count| created_count += count["issue_count"].to_i; created_on_line[count["date"]] = created_count }
        created_on_line[Date.today.to_s] = created_count
        graph.add_data({
            :data => created_on_line.sort.flatten,
            :title => Project.find(project_id).to_s
        })
    end

    # Compile the graph
    headers["Content-Type"] = "image/svg+xml"
    send_data(graph.burn, :type => "image/svg+xml", :disposition => "inline")
end 
```

# iphone - 多张图像的触摸结束

> ID：13342023
> 
> 赞同：1
> 
> 时间：2012-11-12T10:26:39.920
> 
> 标签：iphone, objective-c, ios, xcode, drag-and-drop

我有一个应用程序，我在其中将图像从滚动视图拖放到一个区域，以在将滚动视图中的图像拖放到图像更改的区域时更改该区域的图像。

我的问题是如何将标题中的图像更改为拖到该区域的图像。

目前我在滚动视图中有不同的图像，所有这些图像在拖放到该区域时都会出现我定义的相同图像。

如何为 ScrollView 中的每张图像制作不同的 Drop Touch 事件。

![在此处输入图像描述](../Images/11c010131119cd679e648ce4a8b97abe.png)

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

if ([delegate isInsideRecycleBin:self touching:YES]){

    CGRect myImageRect = CGRectMake(0, 0, 320, 300);
    images = [[UIImageView alloc] initWithFrame:myImageRect];
    [images setImage:[UIImage imageNamed:@"light-cherry.png"]];
    [self.mainView addSubview:images];

    UIImageView * animation = [[UIImageView alloc] init];
    animation.frame = CGRectMake(self.center.x - 32, self.center.y - 32, 40, 40);

    animation.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed: @"iconEliminateItem1.png"],
                                 [UIImage imageNamed: @"iconEliminateItem2.png"],
                                 [UIImage imageNamed: @"iconEliminateItem3.png"],
                                 [UIImage imageNamed: @"iconEliminateItem4.png"]
                                 ,nil];
    [animation setAnimationRepeatCount:1];
    [animation setAnimationDuration:0.35];
    [animation startAnimating];
    [self.mainView addSubview:animation];
    [animation bringSubviewToFront:self.mainView];
    [animation release];
    ;
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

} else{
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

} 
```

上面是图像被丢弃事件的代码。

以下是我如何在 ScrollView Up 中设置按钮

```
- (void) addAttachment:(AttachmentItem *)attachment
{
// SAVE ATTACHMENT
[_attachments addObject:attachment];

// RESIZE CONTENT VIEW FOR INSERTINT NEW ATTACHMENT
_scrollView.contentSize = CGSizeMake([_attachments count]*70, 70);

CGFloat startX = (70.0f * ((float)[_attachments count] - 1.0f) + padding);
CGFloat startY = 370;
CGFloat width = 64;
CGFloat height = 64;

GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height)];
btnAttachment.tag = [_attachments count];
btnAttachment.scrollParent = _scrollView;
btnAttachment.mainView = self.mainView;
btnAttachment.delegate = self;

if (attachment.type == 1){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"canadian-maple.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
    NSLog(@"%d", tag);
    [imageView release];
}else if (attachment.type == 2){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"mozambique-wenge.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
     NSLog(@"%d", tag);
    [imageView release];
} else if (attachment.type == 3){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"canadian-maple.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
    NSLog(@"%d", tag);
    [imageView release];
}
else if (attachment.type == 4){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"mozambique-wenge.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
    NSLog(@"%d", tag);
    [imageView release];
}
else if (attachment.type == 5){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"canadian-maple.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
    NSLog(@"%d", tag);
    [imageView release];
}
else if (attachment.type == 6){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"mozambique-wenge.png"];
    [btnAttachment addSubview:imageView];
    int tag = btnAttachment.tag;
    NSLog(@"%d", tag);
    [imageView release];
} 
```

和

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.gallery.mainView = self.view;

AttachmentItem *item = [[AttachmentItem alloc] initWithData:1 data:nil];
[self.gallery addAttachment:item];
[item release];

AttachmentItem *item2 = [[AttachmentItem alloc] initWithData:2 data:nil];
[self.gallery addAttachment:item2];
[item2 release];

AttachmentItem *item3 = [[AttachmentItem alloc] initWithData:3 data:nil];
[self.gallery addAttachment:item3];
[item3 release];

AttachmentItem *item4 = [[AttachmentItem alloc] initWithData:4 data:nil];
[self.gallery addAttachment:item4];
[item4 release];

AttachmentItem *item5 = [[AttachmentItem alloc] initWithData:5 data:nil];
[self.gallery addAttachment:item5];
[item5 release];

AttachmentItem *item6 = [[AttachmentItem alloc] initWithData:6 data:nil];
[self.gallery addAttachment:item6];
[item6 release];
} 
```

所以现在我尝试为我的图像创建一个数组，这些图像被拖到更改 HeaderImage 的区域，但我又被卡住了。我正在使用我的项目所需的最后一个功能，我要做的就是根据拾取并拖放到标题图像区域的图像更改视图顶部的 HeaderImage .

**代码编辑**

像这样的东西会起作用吗？

```
// Create the UIImage's from the images folder
UIImage *app = [UIImage imageNamed:@"Appstorm.jpg"];
UIImage *creat = [UIImage imageNamed:@"Creattica.jpg"];
UIImage *free = [UIImage imageNamed:@"Freelance.jpg"];
UIImage *net = [UIImage imageNamed:@"Netsetter.jpg"];
UIImage *rock = [UIImage imageNamed:@"Rockable.jpg"];
UIImage *tuts = [UIImage imageNamed:@"Tutsplus.jpg"];
UIImage *work = [UIImage imageNamed:@"Workawesome.jpg"];

/* Create the dummy array and fill with the UIImages. */
NSArray *banners = [[NSArray alloc] initWithObjects:app, creat, free, net, rock, tuts, work, nil];

// Set the main images array equal to the dummy array
self.bannerImages = banners;

// Release the dummy array
[banners release];

// Release the UIImage objects
[app release];
[creat release];
[free release];
[net release];
[rock release];
[tuts release];
[work release];

detailVC.banner = [bannerImages objectAtIndex:indexPath.row];

imageView.image = banner;

} 
```

我还在我的图像中放置了图像标签。我将如何使用这些来做我想做的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:33:06.263

有很多代码要阅读。我可以建议您对屏幕截图上的小图像使用自定义滚动视图。它会为你节省很多时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:22:58.037

行。所以我使用 if else 语句来调用我的标签。:)

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
if ([delegate isInsideRecycleBin:self touching:YES]){

if (self.tag == 1) {

    NSLog(@"View with tag %i was dropped onto trigger area",self.tag);

    CGRect myImageRect = CGRectMake(0, 0, 320, 300);
    headerImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [headerImage setImage:[UIImage imageNamed:@"light-cherry.png"]];
    headerImage.backgroundColor = [UIColor blackColor];
    headerImage.layer.borderWidth = 2;
    headerImage.layer.borderColor = [UIColor blackColor].CGColor;
    headerImage.layer.masksToBounds = YES;
    headerImage.layer.cornerRadius = 5;
    [self.mainView addSubview:headerImage];

}
else if (self.tag == 2)
{

    NSLog(@"View with tag %i was dropped onto trigger area",self.tag);

    CGRect myImageRect = CGRectMake(0, 0, 320, 300);
    headerImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [headerImage setImage:[UIImage imageNamed:@"mozambique-wenge.png"]];
    headerImage.backgroundColor = [UIColor blackColor];
    headerImage.layer.borderWidth = 2;
    headerImage.layer.borderColor = [UIColor blackColor].CGColor;
    headerImage.layer.masksToBounds = YES;
    headerImage.layer.cornerRadius = 5;
    [self.mainView addSubview:headerImage];
} 
```

# java - 使用 SimpleDateFormat 将日期时间值转换为预期值

> ID：13342025
> 
> 赞同：2
> 
> 时间：2012-11-12T10:26:43.830
> 
> 标签：java, simpledateformat, dataformat

我在使用 SimpleDateFormat (java) 将日期时间值转换为预期值时遇到问题，我预期的格式是`MM/yyyy`，我想将 2 个值转换为仅 1 种格式

1.  MM-yyyy 例如 05-2012
2.  yyyy-MM 例如 2012-05

输出为 05/2012。

我实现了如下所示的东西

```
String expiry = "2012-01";
try {
    result = convertDateFormat(expiry, "MM-yyyy", expectedFormat);
} catch (ParseException e) {
    try {
        result = convertDateFormat(expiry, "yyyy-MM", expectedFormat);
    } catch (ParseException e1) {
        e1.printStackTrace();
    }
    e.printStackTrace();
}

private String convertDateFormat(String date, String oPattern, String ePattern) throws ParseException {
    SimpleDateFormat normalFormat = new SimpleDateFormat(oPattern);
    Date d = normalFormat.parse(date);
    SimpleDateFormat cardFormat = new SimpleDateFormat(ePattern);
    return cardFormat.format(d);
} 
```

现在，返回值为`6808`，我不知道为什么。

请任何人帮助我处理这个案子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:58:20.060

添加[`SimpleDateFormat#setLenient()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)到您的`convertDateFormat`方法中：

```
private String convertDateFormat(String date, String oPattern, String ePattern) throws ParseException {
    SimpleDateFormat normalFormat = new SimpleDateFormat(oPattern);
    normalFormat.setLenient(false); /* <-- Add this line -- */
    Date d = normalFormat.parse(date);
    SimpleDateFormat cardFormat = new SimpleDateFormat(ePattern);
    return cardFormat.format(d);
} 
```

`convertDateFormat`如果日期不正确，它将失败。

这在这里详细解释：http: [//eyalsch.wordpress.com/2009/05/29/sdf/](http://eyalsch.wordpress.com/2009/05/29/sdf/)

# regex - Groovy 扩展正则表达式语法

> ID：13342028
> 
> 赞同：3
> 
> 时间：2012-11-12T10:27:01.083
> 
> 标签：regex, groovy, pattern-matching

我正在尝试遵循[在 Groovy 中记录正则表达式](http://groovy.codehaus.org/Documenting+Regular+Expressions+in+Groovy)的示例，但无法让我自己的示例正常工作。这是一个在 regex1 上失败的示例，但适用于压缩的 regex2

```
def line = "some.key=a value # with comment that is ignored"
def regex1 = '''(?x)        # enable extended patterns
               ^\\s*        # ignore starting whitespace
               ([^=#]+)     # capture key
               =            # literal
               ([^#]*)      # capture value'''
def regex2 = '''^\\s*([^=#]+)=([^#]*)'''
def pattern = ~regex1
def matcher = pattern.matcher(line)
for (i=0; i < matcher.getCount(); i++) {
    println matcher[i][0]
    println matcher[i][1]
    println matcher[i][2]
} 
```

我得到的错误是

```
Caught: java.util.regex.PatternSyntaxException: Unclosed character class near index 217` 
```

它指向最后一场比赛的最后一个右括号。

如果我更改 regex2 并添加`(?x)`到字符串的开头，它也会以同样的方式失败。

在这种情况下，添加扩展模式的正确语法是什么？链接站点上的示例工作正常，所以我知道应该是可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:33:22.473

这是因为您`#`的正则表达式中有字符。

这意味着解析器会忽略它们出现的每一行上的文本，因此您的分组选择器和字符选择器没有正确关闭。

尝试：

```
def regex1 = $/(?x)        # enable extended patterns
               ^\s*        # ignore starting whitespace
               ([^=\#]+)   # capture key
               =           # literal
               ([^\#]*)    # capture value/$ 
```

（我将它切换为美元斜杠字符串，因为这样你就不需要转义你的转义字符（所以你得到`\s`and`\#`而不是`\\s`and `\\#`）

# css - $(object).css('background-color','red' 不起作用

> ID：13342033
> 
> 赞同：0
> 
> 时间：2012-11-12T10:27:21.900
> 
> 标签：css

我有一个接受电子邮件地址的模态表单。然后我验证这一点，如果无效，我想突出显示电子邮件框。但是使用 .css('background-color','red') 并没有做任何事情。我试过骆驼案'backgroundColor'，但这没有任何区别。代码正在通过 else 路径，因为我收到了警报。这是代码：

```
$( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Send": function() {

                if (validateEmail($('#email').val()))
                {
                var datastr = 'name=' + $('#name').val() + '&email=' + $('#email').val() + '&enquiry=' + $('#enquiry').val() + '&recip=' + eMail;

                $.ajax({
                type: "POST",
                url: "email.php",
                data: datastr,
                cache: false,
                success: function(html){
                        alert ("Email has been Sent");
                        }
                });

                $( this ).dialog( 'close' );
                }
                else
                {
                $('#email').css('background-color','red');
                alert('Your Email Address is invalid');
                }
             },
            Cancel: function() {
                $( this ).dialog( 'close' );
             }},
        close: function() {
           $( this ).dialog('destroy');
        }
    }); 
```

这里的表格：

```
<div id="dialog-form" title="Contact Computer Rep" style="display: none">
<form>
    <div tal:condition="data/userlevel"><span>Your Name:</span><span tal:content="data/displayname"></span><br />
        <span>Your Email Address:</span><span tal:content="data/mail"></span>
    </div>
<fieldset>
    <span tal:condition="not: data/userlevel">
    <label for="name">Your Name</label>
    <input type="text" name="name" id="name" value="" class="text ui-widget-content ui-corner-all" />
    <label for="email">Your Email Address</label>
    <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
    </span>
    <label for="enquiry">Your Enquiry</label>
    <input type="text" name="enquiry" id="enquiry" value="" class="text ui-widget-content ui-corner-all" />
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:30:10.503

jQuery 理解`background-color`和`backgroundColor`。尝试使用 RGB 值而不是`red`例如：

```
$('#email').css('background-color', '#f00'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:37:21.467

您能否验证该电子邮件是您的邮箱的 ID。你也可以试试把`$('#email').css({'background-color': 'red'});`

# php - 对最佳匹配排序 SQL 查询

> ID：13342035
> 
> 赞同：4
> 
> 时间：2012-11-12T10:27:25.240
> 
> 标签：php, mysql, sql, database

我得到了一个从我的查询返回的结果列表，我想按最佳匹配排序。我会尽量说清楚，但如果有些地方不够清楚，请告诉我，我会尽量让它更清楚。

用户已经输入了一个名为 的设置列表`findsettings`。有了这些`findsettings`，我正在寻找产品。这一切都很顺利，直到他应该去整理出最好的比赛。

有几个字段，例如`min_review, max_price, allows_pets, etc`.

我想订购。例如，他需要先订购带有 的产品`min_review of 40%`，然后`max_price = 10.00`再订购`allows_pets = 0`。您可以使用 来执行此操作`OR`，但我希望仅在列表底部显示不安静匹配的结果。所以基本上他应该首先展示最佳匹配，然后是第二个，第三个等等，直到匹配最少的产品。

我不知道如何处理这个问题，所以我希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:02:54.300

基本原则是为每条记录创建一个相关性分数，然后按此排序。

如果您希望每个标准具有相同的权重，在 MySQL 中，您可以将每个布尔表达式加在一起（注意这是非标准 SQL——在其他 RDBMS 中，您可能必须使用它`CASE`来测试条件并产生一个数字）：

```
ORDER BY (review>=40/100) + (price<=10.00) + (allows_pets=0) DESC 
```

如果条件的权重不同，您可以将每个表达式乘以其权重：

```
ORDER BY 5*(review>=40/100) + 3*(price<=10.00) + 1*(allows_pets=0) DESC 
```

和/或如果在某个子集上匹配的那些应该*总是*首先出现而不管后来的结果如何，你可以划分你的`ORDER BY`子句：

```
ORDER BY 5*(review>=40/100) + 3*(price<=10.00) DESC,
         1*(allows_pets=0) DESC 
```

如果您想在结果中查看相关性分数，您可以类似地将上述任何表达式添加到您的`SELECT`（然后在`ORDER BY`子句中使用结果列以避免重复写入）：

```
SELECT   *,
         (review>=40/100) + (price<=10.00) + (allows_pets=0) AS relevance,
FROM     my_table
ORDER BY relevance DESC 
```

请注意，如果您想获得值最接近某个目标的记录（例如`min_review`接近 40%，而不是精确），您可以获取它与目标值之间的（绝对？）差异：

```
IF(review>=40/100, review-40/100, NULL) 
```

但是，如果/在单个标准中与其他表达式组合时，您必须小心适当地加权您的表达式。

# c# - LinkedIn 访问令牌请求 - 签名无效

> ID：13342038
> 
> 赞同：1
> 
> 时间：2012-11-12T10:27:32.100
> 
> 标签：c#, asp.net-mvc, linkedin

我有以下代码。在第一阶段（获取 OAuth 令牌）一切正常，但在回调中（在获取访问令牌期间）我收到签名无效错误。有谁可以帮助我回答我做错了什么？

```
 public ActionResult LinkedInTest(string text)
    {
        var credentials = new OAuthCredentials
                              {
                                  CallbackUrl = "http://localhost:60739/Calendar/Callback",
                                  ConsumerKey = ApiKey,
                                  ConsumerSecret = ApiSecret,
                                  Verifier = "123456",
                                  Type = OAuthType.RequestToken
                              };

        var client = new RestClient {Authority = "https://api.linkedin.com/uas/oauth", Credentials = credentials};
        var request = new RestRequest {Path = "requestToken"};
        RestResponse response = client.Request(request);

        token = response.Content.Split('&')[0].Split('=')[1];
        textToPost = text;
        Response.Redirect("https://api.linkedin.com/uas/oauth/authorize?oauth_token=" + token);
        return null;
    }

    public ActionResult Callback()
    {
        token = Request["oauth_token"];
        verifier = Request["oauth_verifier"];
        var credentials = new OAuthCredentials
                              {
                                  ConsumerKey = ApiKey,
                                  ConsumerSecret = ApiSecret,
                                  Token = token,
                                  TokenSecret = "",
                                  Verifier = verifier,
                                  Type = OAuthType.AccessToken,
                                  ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
                                  SignatureMethod = OAuthSignatureMethod.HmacSha1,
                                  Version = "1.0"
                              };

        var client = new RestClient
                         {
                             Authority = "https://api.linkedin.com/uas/oauth",
                             Credentials = credentials,
                             Method = WebMethod.Post
                         };
        var request = new RestRequest {Path = "accessToken"};
        RestResponse response = client.Request(request);
        return Content(response.Content);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:52:29.613

使用 LinkedIn REST API 的优秀指南：

[http://www.suddenelfilio.net/2010/08/24/linkedin-oauth-using-hammock-in-csharp-asp-net/](http://www.suddenelfilio.net/2010/08/24/linkedin-oauth-using-hammock-in-csharp-asp-net/)

# makefile - makefile：变量值中的尾随空格

> ID：13342041
> 
> 赞同：4
> 
> 时间：2012-11-12T10:27:48.823
> 
> 标签：makefile, spaces, trailing

我正在阅读 GNU make 手册中的以下内容：

```
if you do not want any whitespace characters at the end of your variable value, 
you must remember not to put a random comment on the end of the line after some whitespace, such as this:

 dir := /foo/bar    # directory to put the frobs in
Here the value of the variable dir is ‘/foo/bar    ’ (with four trailing spaces), 
which was probably not the intention. (Imagine something like ‘$(dir)/file’ with this definition!) 
```

我尝试了一个简单的makefile，如下所示“

```
foo := hi    # four trailing spaces
all:
    @echo $(foo)_ 
```

执行'make'时，输出只是'hi_'，'hi'和下划线之间只有一个空格。为什么没有四个空格？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:49:48.367

执行此脚本时`make`，它不会将变量传递给 echo，而是替换`$(foo)`为`foo`' 值。

所以实际执行的脚本是`echo hi...._`（点是为了澄清）。

解析`echo`.

您可以使用双引号将其作为字符串输出。

```
echo "$(foo)_" 
```

# java - 行号为 Object[][] 的 RecordSet？

> ID：13342047
> 
> 赞同：2
> 
> 时间：2012-11-12T10:28:05.300
> 
> 标签：java, sql, parsing, object, recordset

例如，我在我的数据库中有一个表，如下所示：

```
| id | first_name | last_name   |
+----+------------+-------------+
| 23 | Hans       | Mueller     |
| 42 | John       | Kramer      |
| 23 | Max        | Mustermann  | 
```

如何将我的记录集放入一个`Object[][]`, 但从实际行号的列开始（例如下面）？

```
{
    {1, 23, "Hans", "Mueller"},
    {2, 42, "John", "Kramer"},
    {3, 76, "Max", "Mustermann"}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:40:55.213

> 如何将我的记录集放入 Object[][]，但从实际行号的列开始

如果您正在寻找开箱即用的 JDBC API，我怀疑是否有。如果你愿意使用`ResultSetMetaData`，那么你可以编写一个函数来形成相同的形式，如下所示：

1.  拿一个`ResultSet`
2.  得到`ResultSetMetaData`使用`rsmd = resultSet.getMetaData()`
3.  使用获取列数`rsmd.getColumnCount()`
4.  遍历结果集中的每一行并使用从 1 开始的列索引获取列值（与索引从 0 开始的数组不同）。
5.  使用获取列的数据类型`rsmd.getColumnType(columnIndex)`并根据类型添加适当的实例（可以适当地对 java.sql.Types 进行切换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:38:06.337

看看[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。如果这件事与您的实际知识相去甚远，请尝试创建自己的类 Person ，例如：

```
public class Person {
  int id;
  String firstname;
  String surname;

  public void initByResultSet(ResultSet result) {
    [...]
  }
} 
```

或者，如果您真的想`Object[][]`在数据库中创建一个视图，它会为您提供行号。

# php - 在同一个日历上同时显示工作日和周末

> ID：13342053
> 
> 赞同：-2
> 
> 时间：2012-11-12T10:28:23.547
> 
> 标签：php, javascript, fullcalendar

我想在同一个完整日历上显示一周中的所有日子和工作日。我想在日历上有两个按钮，一个称为“周”，它已经在显示一周中的所有日子的完整日历上，并且另一个称为“工作周”的按钮在单击后只会显示周末。建议我也一样。

这是我的代码

```
<script type='text/javascript'>
$(function() { 
  var date = new Date(); 
  var d = date.getDate(); 
  var m = date.getMonth(); 
  var y = date.getFullYear(); 
  var calendar = $('#calendar').fullCalendar({ 
    header: { 
      left: 'prev,next today', 
      center: 'title', 
       right: 'agendaDay,agendaWeek,month' 
    }, 
    selectable: true, 
    selectHelper: true, 
    weekends:false, 
    defaultView: 'agendaWeek', 
    select: function(start, end, allDay) { //calendar.fullCalendar('unselect'); 
    },
    editable: true 
   }); 
 }); 
</script 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:37:22.447

[FullCalendar 在周末和无周末之间切换](https://stackoverflow.com/questions/11958479/fullcalendar-switch-between-weekends-and-no-weekends)的重复

因此，仅当您从 DOM 中删除日历的先前副本时，此答案才有效

[http://arshaw.com/fullcalendar/docs/usage/](http://arshaw.com/fullcalendar/docs/usage/)

HTML：

```
<input type="button" id="weekends" value="Include weekends" />
<input type="button" id="workweek" value="Exclude weekends" /> 
```

JavaScript

```
$(function() {
  $("#weekends").on("click",function() {
    $('#calendar').fullCalendar({weekends:true});
  });
  $("#workweek").on("click",function() {
    $('#calendar').fullCalendar({weekends:false});
  });
}); 
```

测试我的建议尝试粘贴这个

`javascript:(function() {$('#calendar').fullCalendar({weekends:false})})()`

进入此页面的地址栏并按 Enter（在 Fx 15+ 中使用控制台或创建书签）

[http://arshaw.com/js/fullcalendar-1.5.4/demos/external-dragging.html](http://arshaw.com/js/fullcalendar-1.5.4/demos/external-dragging.html)

# indexing - 用于超集检索的快速集索引数据结构

> ID：13342060
> 
> 赞同：0
> 
> 时间：2012-11-12T10:28:53.407
> 
> 标签：indexing, set

我得到了一组集合：

```
{{a,b}, {a,b,c}, {a,c},{a,c,f}} 
```

我想要一个数据结构来索引这些集合，以便快速执行以下“查找”：查找给定集合的所有超集。

例如，给定集合 {a,c} 结构将返回

```
{{a,b,c},{a,c,f}} 
```

但不是 {a,b}。

有什么建议么？

# amazon-s3 - Cors 政策不允许上传

> ID：13342064
> 
> 赞同：2
> 
> 时间：2012-11-12T10:29:07.730
> 
> 标签：amazon-s3, amazon-web-services, cors

谁能告诉我我是否在这里错过了什么。这已添加到相关存储桶中的 CORS 策略中。

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

但是，当我尝试进行 XHR 上传时，我仍然收到跨域错误。用这个把我的头撞到墙上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:26:15.643

您可以尝试直接指定允许的标题吗？

```
<AllowedHeader>Content-Type</AllowedHeader>
<AllowedHeader>x-amz-acl</AllowedHeader>
<AllowedHeader>origin</AllowedHeader>
<AllowedHeader>accept</AllowedHeader> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T20:32:38.587

试着用这个。它应该工作

```
<CORSRule>
    <AllowedOrigin>*</AllowedOrigin>
    <AllowedMethod>PUT</AllowedMethod>
    <MaxAgeSeconds>3000</MaxAgeSeconds>
    <AllowedHeader>Content-Type</AllowedHeader>
    <AllowedHeader>x-amz-acl</AllowedHeader>
    <AllowedHeader>origin</AllowedHeader>
</CORSRule> 
```

# asp.net-mvc - 自定义类中的 HttpContext 会话始终为空

> ID：13342067
> 
> 赞同：0
> 
> 时间：2012-11-12T10:29:26.993
> 
> 标签：asp.net-mvc, asp.net-mvc-3, httpcontext

我正在尝试访问自定义类中的会话变量，如下所示：

控制器：

```
 public void RemoveMachinesListChanged(object sender, RemovePackageEvent e)
    {
        PackageActionStatus.Current.Machines = e.Machines;
        // Dictionary<int, int> machines =  e.Machines;
    } 
```

* * *

```
public class PackageActionStatus
{
    public static PackageActionStatus Current
    {
        get
        {
            HttpContextWrapper context = new HttpContextWrapper(System.Web.HttpContext.Current);
            var session = (PackageActionStatus)context.Session["PackageActionStatus"];
            if (session == null)
            {
                session = new PackageActionStatus();
                context.Session["PackageActionStatus"] = session;
            }

            return session;
        }
    }

    private Dictionary<int, int> machines;

    public Dictionary<int, int> Machines
    {
        get
        {
            return this.machines;
        }
        set
        {
            if (this.machines == null)
            {
                this.machines = new Dictionary<int, int>();
            }

            this.machines = value;
        }
    }
} 
```

我在这里想要实现的是通过 AJAX 调用从/向会话变量存储和检索值。似乎每当我使用ajax HttpContext 时都是空的。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:33:54.473

HttpContext 在请求生命周期的某些点可用。此外，它仅在请求的线程中可用。

实现一个`IHttpHandler`具有`ProcessRequest`请求实例作为输入参数的方法（在 MSDN [http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx)`HttpContext`上了解更多信息）。

在此处检查`ProcessRequest`示例实现：http: [//msdn.microsoft.com/en-us/library/system.web.ihttphandler.processrequest.aspx](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.processrequest.aspx)

# java - 通过java将查询字符串直接发布到httpHandler

> ID：13342068
> 
> 赞同：1
> 
> 时间：2012-11-12T10:29:33.297
> 
> 标签：java, http-post, httphandler

我有一个 http 处理程序位于：

```
http://localhost:8118/log.srv 
```

当我将此网址粘贴到 IE 上时，它运行良好。

```
http://localhost:8118/log.srv?action=likearticle&noname=989858&ladoi=cutymaraton 
```

http 处理程序获取数据。

但是当我使用java程序发布数据时，没有发生错误，但是，http处理程序没有得到任何数据。我的java程序：

```
public static void main(String[] args) {
        try {
            for(int i=1; i<1000; i++){
                URL url= new URL("http://localhost:8118/log.srv");
                URLConnection conn = url.openConnection();
                conn.setDoOutput(true);
                OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());
                String data = "action=likearticle&noname=989858&ladoi=cutymaraton"+i;
                System.out.println(data);
                writer.write(data);
                writer.flush();
            }

            System.out.println("Done");
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

我使用另一个代码：

```
String urlParameters = "action=likearticle&noname=989858&ladoi=cutymaraton";
            String request = "http://localhost:8118/log.srv";
            URL url = new URL(request); 
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();           
            connection.setDoOutput(true);
            connection.setDoInput(true);
            connection.setInstanceFollowRedirects(false); 
            connection.setRequestMethod("POST"); 
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
            connection.setRequestProperty("charset", "utf-8");
            connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
            connection.setUseCaches (false);

            DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
            wr.writeBytes(urlParameters);
            wr.flush();
            wr.close();
            connection.disconnect(); 
```

没有错误，但没有成功发送数据。告诉我为什么？以及任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:47:08.013

您可以使用[更友好的](http://hc.apache.org/httpclient-3.x/methods/post.html)API，如下所示：

```
PostMethod post = new PostMethod("http://localhost:8118/log.srv");
post.setRequestHeader ("Content-Type", "application/x-www-form-urlencoded");
NameValuePair[] data = {
  new NameValuePair("action", "likearticle"),
  new NameValuePair("noname", "989858"),
  new NameValuePair("ladoi", "cutymaraton")
};
post.setRequestBody(data);    

HttpClient httpclient = new HttpClient();
int result = httpclient.executeMethod(post);

InputStream in = post.getResponseBodyAsStream();
// handle response. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:42:26.903

使用查询参数创建 URL。

```
URL url= new URL("http://localhost:8118/log.srv?action=likearticle&noname=989858&ladoi=cutymaraton"+i); 
```

# javascript - 根据 body id 显示不同的随机图像数组

> ID：13342069
> 
> 赞同：0
> 
> 时间：2012-11-12T10:29:40.723
> 
> 标签：javascript, random

我需要根据 body id 在刷新时生成随机图像，基本上每个 id 都有自己可以使用的单独的图像数组。我将如何编写脚本来执行此操作？

# javascript - VisualSearch.js 获取方面数据

> ID：13342071
> 
> 赞同：0
> 
> 时间：2012-11-12T10:29:45.077
> 
> 标签：javascript, json, cakephp, backbone.js

我正在尝试实现一个 VisualSearch.js 查询框，但使用 REST 接口从存储在数据库中的信息构建其方面。

例如，输入方面可以是“用户电子邮件”，然后当他们键入前几个字母时，用户的电子邮件会被过滤掉，直到找到正确的电子邮件。

我发现的问题是如何实现这一点，以便它仅在“锁定”该方面时才发送对用户名的请求（或者更理想的是，当按下第一个字母时，搜索范围被最小化） . 否则，每次加载页面时，我似乎都会加载所有方面及其值。如果我还包括其他可搜索的对象和值等，这将是发送的大量查询。这几乎就像加载整个数据库的所有可搜索元素，然后可以过滤掉它们。

作为额外的信息，我正在为 REST API 使用 cakePHP 后端。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:42:57.977

看起来该`valueMatches`活动适合您的门票：

[http://documentcloud.github.com/visualsearch/#usage](http://documentcloud.github.com/visualsearch/#usage)

因此，基本上查看`facet == "email" && searchTerm.length == 1`并触发您的 AJAX 查询，然后`callback`使用服务器过滤的数据调用。

# java - 访问 Java 包中的文件 (.wav)

> ID：13342072
> 
> 赞同：1
> 
> 时间：2012-11-12T10:29:46.833
> 
> 标签：java, audio, embedded-resource, javasound

我想访问我的项目中一个包中的 .wav 文件。

例如我有两个包：

*   `program`
*   `sounds`

从里面`program/something.class`我想玩`sounds/asound.wav`。这怎么可能？

```
clip.open(AudioSystem.getAudioInputStream(new File(filename)));
clip.start();
//.... something inbetween
clip.stop(); 
```

这里`filename`是`C:\\projects\\something\\sounds\\`，但是怎么可能只给出`asound.wav`包中的相对路径呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:37:27.943

用于`ClassLoader.getResourceAsStream`通过与类加载相同的基础架构加载资源。根据类加载器，这可以是目录中的文件、本地 JAR 文件的内容或远程资源。

```
getClass().getClassLoader().getResourceAsStream("asound.wav"); 
```

如方法名称所示，您将获得`InputStream`资源的一个，而不是文件。如果您认为资源可能是另一个文件的一部分，例如 JAR 文件，这是有道理的，因为 File 对象总是指向单个文件，而不是它们的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:01:11.017

```
URL url = this.getClass().getResource("/sounds/asound.wav"); 
```

当`/`提供给从类获得的类加载器时，前缀将导致它从包的“根”搜索。

* * *

然后查看[Java Sound 标签 Wiki](https://stackoverflow.com/tags/javasound/info)上显示的代码以加载`Clip`和播放它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:28:03.977

正如[这里](https://stackoverflow.com/questions/5529754/java-io-ioexception-mark-reset-not-supported/5529906#5529906)也提到的：文档[`AudioSystem.getAudioInputStream(InputStream)`](http://download.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.InputStream%29)说：

> 此方法的实现可能需要多个解析器检查流以确定它们是否支持它。这些解析器必须能够标记流，读取足够的数据以确定它们是否支持流，如果不支持，则将流的读取指针重置为其原始位置。如果输入流不支持这些操作，则此方法可能会因 IOException 而失败。

因此解决方案将是

```
clip.open(AudioSystem.getAudioInputStream(
    new BufferedInputStream(getClass().getResourceAsStream("/Sounds/asound.wav")))); 
```

# php - 如何在 Yii 查询生成器中使用 SQL IN()

> ID：13342075
> 
> 赞同：1
> 
> 时间：2012-11-12T10:29:49.100
> 
> 标签：php, yii

我想使用 Yii 查询生成器执行以下查询

$sql = "select * from user where userid in (1,2,3,)"

请帮助..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:35:11.657

所有你需要的如下

```
$data = Yii::app()->db->createCommand()->select('*')->from('user')->where(array('in', 'userid', array(1, 2,3)))->queryAll(); 
```

# django - 函数中的 Django 模型错误

> ID：13342084
> 
> 赞同：1
> 
> 时间：2012-11-12T10:30:14.620
> 
> 标签：django, django-models

我的问题是这个。

例如下面的代码。控制台向我抛出一个关于找不到模型“ModelB”的错误。

```
class modela(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=360)

    def print_name_modelb(self):
        modelb = modelb.objects.get(id=1)
        print modelb.name

class modelb(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=360) 
```

如果识别，有什么方法可以设置所有空模型以在功能中使用？

* * *

使用真实数据进行编辑。

```
class Vip2ProductosPlantilla(models.Model):
    id = models.IntegerField(primary_key=True)
    nombre = models.CharField(max_length=360)
    referencia = models.CharField(max_length=300)
    intro = models.TextField()
    descripcion = models.TextField()
    precio_tienda = models.DecimalField(max_digits=12, decimal_places=2)
    precio_vip = models.DecimalField(max_digits=12, decimal_places=2)
    precio_cesion = models.DecimalField(max_digits=12, decimal_places=2)
    zoom = models.BooleanField()
    id_marca = models.ForeignKey(Vip2Marcas, null=True, db_column='id_marca', blank=True)
    categoria = models.ManyToManyField(Vip2Categorias)
    stock  = models.IntegerField(null=True, blank=True, default=0)
    last_update = models.DateTimeField(auto_now=True)
    gastos_envio = models.DecimalField(max_digits=12, decimal_places=2,blank=True,null=True)

    def get_precio(self):
        try:
            precio = MLPreciosProductos.objects.filter(plantilla=self)[0]
            if (precio != None) & (precio.precio_ml > 0):
                print 'precio ml'
                return precio.precio_ml
            else:
                print 'precio vip'
                return self.precio_vip
        except:
            print 'precio vip error'
            return self.precio_vip

class MLPreciosProductos(models.Model):
    id = models.AutoField(primary_key=True)
    plantilla = models.ForeignKey(Vip2ProductosPlantilla,null=True, db_column='plantilla', blank=True)
    precio_ml = models.DecimalField(max_digits=12, decimal_places=2)
    campana = models.ForeignKey(Vip2Campanas, null=True, db_column='campana', blank=True) 
```

当模板函数调用get_precio时，抛出异常

* * *

```
Traceback:
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/opt/marketland.es/web/marketland/views.py" in outlet_campana
  127\.         context_instance=RequestContext(request))    
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
  188\.         return t.render(context_instance)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  123\.             return self._render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in _render
  117\.         return self.nodelist.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  227\.                 nodelist.append(node.render(context))
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/debug.py" in render
  90\.             output = self.filter_expression.resolve(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in resolve
  510\.                 obj = self.var.resolve(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in resolve
  653\.             value = self._resolve_lookup(context)
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/template/base.py" in _resolve_lookup
  698\.                             current = current()
File "/home/opt/marketland.es/web/marketland/models.py" in get_precio
  201\.         precio = MLPreciosProductos.objects.filter(plantilla=self)[0]
File "/home/opt/ENV-django/local/lib/python2.7/site-packages/django/db/models/query.py" in __getitem__
  190\.             return list(qs)[0]

Exception Type: TemplateSyntaxError at /outlet/atornillador-blackampdecker-pilas-aaa-558/
Exception Value: Caught IndexError while rendering: list index out of range 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T16:54:52.053

解决它的一种方法是在同一个文件中定义`modelb`before 。`modela`Python是一种脚本语言，是逐行执行的，所以当你`modelb`在你的例子中提到它时，它还不存在。
但是，有时您需要两个模型在 中相互引用`ForeignKey`，在这种情况下，您可以将模型的名称作为字符串传递：

```
 campana = models.ForeignKey('Vip2Campanas') 
```

可能导致问题的另一件事是过滤提供对象：

```
MLPreciosProductos.objects.filter(plantilla=self) 
```

因为对象可以动态变化并且实际上是指针，所以最好通过对象的 id 来识别对象，如下所示：

```
MLPreciosProductos.objects.filter(plantilla_id=self.id) 
```

或使用 django 在幕后创建的反向查找：

```
Foo(models.Model):
    pass

Bar(models.Model):
    foo = models.ForeignKey('Foo')

# instance of a Foo model is given 'hidden' field bar_set 
foo.bar_set 
```

`(modelname)_set`自动添加并允许获取通过外键链接到对象的所有条目的列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T11:47:45.827

根据您上次的评论，

“我再次编辑。但现在错误在于尝试制作`precio = MLPreciosProductos.objects.filter(plantilla=self)[0]`或找到一个”

我认为您无法过滤，只需`self`尝试更改它`self.id`或`self.nombre`您想要的任何内容，只要它在类上定义即可。原谅我的英语不好，只是想帮忙

# c# - 获取特定文化的 DateTime.DayOfWeek

> ID：13342085
> 
> 赞同：2
> 
> 时间：2012-11-12T10:30:19.193
> 
> 标签：c#, .net

是否有可能获得特定文化的[DayOfWeek ？](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)

有什么线索吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:36:29.187

尝试以下操作：

```
DateTime.Now.ToString("dddd", new System.Globalization.CultureInfo("ar-EG")) 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:34:15.270

您想`DayOfWeek`在给定的文化中获得今天的日期名称吗？

```
DateTime.Now.ToString("dddd", new System.Globalization.CultureInfo("de-DE")) 
```

（德国的“蒙塔格”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T10:33:49.747

您可以从[DateTimeFormatInfo.DayNames 属性](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.daynames.aspx)中获取天的本地化名称：

```
var cultureInfo = new CultureInfo("de-DE");
var dateTimeInfo = cultureInfo.DateTimeFormat;
var dayNames = dateTimeInfo.DayNames;
var result = dayNames[(int)DayOfWeek.Wednesday];
// result == "Mittwoch" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T10:38:30.530

string myTime = DateTime.Now.ToString("dddd", new System.Globalization.CultureInfo("it-IT"));

该示例使用意大利文化代码，有关可用文化代码的列表，请查看[此](http://sharpertutorials.com/list-of-culture-codes/)

# javascript - 使用 innerHTML 替换元素内容时避免闪烁

> ID：13342089
> 
> 赞同：3
> 
> 时间：2012-11-12T10:30:42.997
> 
> 标签：javascript, html, css

我的网站上有类似的东西，让垃圾邮件收割者的事情变得更加困难。默认情况下，该站点显示“noob (at) me (dot) com”，但随后 JavaScript 会将此文本替换为实际的电子邮件地址。

```
<span id="email">noob (at) me (dot) com</span>

<script type="text/javascript" src="email.js"></script>
<script type="text/javascript">
  document.getElementById('email').innerHTML = emailProducingFunction();
</script> 
```

这行得通。然而，问题是有时，在 JS 转向真正的电子邮件之前，原始文本会显示一瞬间，导致网站加载时出现短暂的“闪烁”效果。

是否有可能以某种方式避免这种情况？

一种“解决方案”是使用 CSS 隐藏 email 元素，然后使用 JS 使其不隐藏。但是，这不是一个好的解决方案，因为该站点还应该与启用 CSS 但禁用 JS 的浏览器兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:36:50.577

除了解决您闪烁的问题之外，我还可以提出其他不受相同现象影响的方法。

## 电子邮件混淆的替代方案

除了减轻闪烁之外，您是否考虑过有价值的替代方案，例如反转电子邮件地址，然后使用 CSS 正确显示它们？这种技术在屏幕阅读器和复制粘贴方面可能不是最好的，但还有其他值得使用的技术与您的工作方式不同。

[在超级用户上检查这个答案](https://superuser.com/a/235965/5375)

这个答案总结了[这项](http://techblog.tilllate.com/2008/07/20/ten-methods-to-obfuscate-e-mail-addresses-compared/)关于不同电子邮件混淆技术的研究。CSS 反转似乎是最有效的一种。

![](../Images/76fe2ff1d526b0c4ef15fae1c18a1d0a.png)

## 使用 CSS 反转和可点击性/选择

因此，您的技术在使用 Javascript 加载时替换了您页面上的所有电子邮件。CSS 解决方案正确显示反向电子邮件，但如果随后单击此类电子邮件或选择它（用于复制），他们将收到一封反向电子邮件。

因此，使用 CSS 和改进这些日常场景可以通过使用 javascript 来完成，这与您的解决方案类似，只是它仅按需执行（并不总是像您的情况那样）。将单击/选择事件附加到元素并在需要时反转其内容很容易。

我想说的是，即使使用 CSS 混淆，也不会降低其网站的可用性。它仍然可以完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:42:57.713

发生这种闪烁是因为显示了原始地址，加载了 email.js 脚本，然后应用了函数。文件加载+函数执行为闪烁的发生留下了足够的时间。

解决方案是在显示原始地址之前放置脚本标签。但是，如果您只是尝试使用 #email 元素，则会收到错误消息，因为它不存在。所以你可以使用`DOMContentLoaded`事件来等待元素存在。（`$(document).ready()`如果你习惯了 jQuery。）

使用这种方式，不会有任何闪烁。

例子：

```
<script src="email.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('email').innerHTML = emailProducingFunction();
}, false);
</script>

<span id="email">noob (at) me (dot) com</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:37:34.713

当页面开始加载时，您可以向元素添加一个`js`类：`body`

```
<body>
  <script>document.body.className += " js";</script>
  <style>body.js #email {display: none;}</style> 
```

从而确保“混淆”地址仅显示给“非 JS”用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:44:52.437

以下是一些关于[Flash of unstyled content (FOUC) 的](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)资源；

[http://paulirish.com/2009/avoiding-the-fouc-v3/](http://paulirish.com/2009/avoiding-the-fouc-v3/)

[http://www.bluerobot.com/web/css/fouc.asp/](http://www.bluerobot.com/web/css/fouc.asp/)

[http://www.learningjquery.com/2008/10/1-way-to-avoid-the-flash-of-unstyled-content](http://www.learningjquery.com/2008/10/1-way-to-avoid-the-flash-of-unstyled-content)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:42:51.240

将`<script>`元素移动到电子邮件元素**之前：**

```
<script type="text/javascript" src="email.js"></script>

<span id="email">noob (at) me (dot) com</span>

<script type="text/javascript">
  document.getElementById('email').innerHTML = emailProducingFunction();
</script> 
```

# c#-4.0 - 从多个 CSV 文件导入数据并动态存储在数据集中 c#

> ID：13342091
> 
> 赞同：1
> 
> 时间：2012-11-12T10:30:46.620
> 
> 标签：c#-4.0

在这里，我仅将此代码用于选择一个文件并创建一个数据表并存储在数据集中..但我想为多个 Csv 文件创建多个数据表并存储在数据集中。最后从数据集中导出为 CSV。但这很难，请帮帮我..

//

```
 private void button1_Click(object sender, EventArgs e)
    {

        int nRows = 0;      //Row Counter
        int icol = 0;       //Index value for Columns -> fArray
        int irow = 0;       //Index value for Row -> fArray
        string[,] fArray;
        string Line;        //Temp string value for storing lines

        #region File Open Parameters
        //file open parameters
        OpenFileDialog fopen = new OpenFileDialog();
        fopen.Title = "Choose file...";
        fopen.Filter = "Comma Seperated Values|*.csv";
        fopen.InitialDirectory = @"C:\";
        #endregion

        if (fopen.ShowDialog() == DialogResult.OK) //Show file open dialog and check if ok has been pressed
        {
            //#region progress bar initialisation
            ////initialize progress bar
            //pb.Location = new Point(60, 209);
            //pb.Width = 516;
            //pb.Height = 23;
            //pb.Style = ProgressBarStyle.Continuous;
            //pnlStep1.Controls.Add(pb);
            //#endregion

            try
            {
                StreamReader fReader = new StreamReader(fopen.FileName);

                #region Array Index Counters
                //Count Columns for fArray index
                string count = fReader.ReadLine();
                string[] tmpCount = count.Split(',');
                fReader.Close();

                //Count Rows for fArray index
                fReader = new StreamReader(fopen.FileName); //begin reading from line 1
                while ((fReader.ReadLine()) != null)
                {
                    nRows++;
                }
                fArray = new string[nRows, tmpCount.Length];
                fReader.Close();
                //End count
                #endregion

                #region Load File Contents
                fReader = new StreamReader(fopen.FileName); //begin reading from line 1
                DataSet ds = new DataSet();
                dt = ds.Tables.Add("ImportData");

                while ((Line = fReader.ReadLine()) != null)
                {
                    string[] row = Line.Split(',');
                    foreach (string column in row)
                    {
                        fArray[irow, icol] = column;
                        icol++;
                    }
                    icol = 0;
                    ////recordCountLabel.Text = irow.ToString(); //NEEDS LOOKING AT
                    ////pb.Value = (irow * 100) / fArray.GetLength(0);
                    irow++;
                }
                //pb.Value = 100;
                fReader.Close();
                #endregion

                #region Add data to dgImport
                for (int i = 0; i < fArray.GetLength(1); i++) //Add Columns to empty DataGridView
                {
                    dt.Columns.Add(fArray[0,i]);
                }

                for (int i = 1; i < fArray.GetLength(0); i++) //Insert data into DataGridView (use fArray.GetLength(0) for entire database or use 5 for sample data)
                {
                    DataRow row = dt.NewRow();
                    for (int j = 0; j < fArray.GetLength(1); j++)
                    {
                        row[j] = fArray[i, j].Trim();
                    }
                    dt.Rows.Add(row);
                    dataGridView1.DataSource = dt;
                }                    
                #endregion

            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk.\r\nOriginal error: " + ex.Message);
            }
        }
    } 
```

# jquery - WP - 当在列表中选择它的标题时，将帖子的内容加载到一个空的 div 中

> ID：13342095
> 
> 赞同：0
> 
> 时间：2012-11-12T10:31:08.693
> 
> 标签：jquery, ajax, wordpress

我正在 wordpress 中构建一个站点，其中在某个部分有一个包含帖子项目列表的容器（将其视为菜单/侧边栏），以及一个我将加载内容的空白空间。当您单击帖子列表中的一个标题时，该单击标题的内容应该加载到空 div 中。单击标题列表中的另一个标题。

所以它看起来像这样，基本上：

```
<div class="container">
  <ul class="cats">
     <?php
       $my_query = new WP_Query('showposts=10&cat=4');
       while ($my_query -> have_posts()) : $my_query->the_post();  $category = get_the_category(); 
     ?>

       <li class="trigger">
         <h5>
           <? the_title(); ?>
         </h5>
       </li>

     <?php 
       endwhile; wp_reset_query(); 
     ?>
  </ul>
  <div class="the-content">
    <? the_content(); ?>
  </div>
</div> 
```

所以，我已经为ajax查找了一些东西，但我没有任何经验。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:39:32.837

当您收到帖子时，您还可以将帖子内容存储在具有特定于帖子的 id 的隐藏 div 中。例如;

```
<?php
       $my_query = new WP_Query('showposts=10&cat=4');
       while ($my_query -> have_posts()) : $my_query->the_post();  $category = get_the_category();
echo '<div id="post_' . $my_query->the_post()->id . '" style="display:none;">' . $my_query->the_post()->content . '</div>'; 
 ?> 
```

并且当您点击特定标题时，您可以从隐藏的div中获取相关的帖子内容；

```
<li class="trigger" onclick="showContent(this)" id="post_id">//This id must be the id of post
         <h5>
           <? the_title(); ?>
         </h5>
</li> 
```

和javascript代码；

```
function showContent(obj) {
    $(".the-content").empty().html($("#" + $(obj).attr('id')).html());
} 
```

希望能帮助到你

# django - 是否可以将 sorl lib 生成的缩略图更改为任何其他路径？

> ID：13342096
> 
> 赞同：1
> 
> 时间：2012-11-12T10:31:21.403
> 
> 标签：django, sorl-thumbnail

默认情况下，sorl 将缩略图保存在图像文件夹中。默认情况下，它会在图像文件夹中创建缓存文件夹。我怎样才能将其更改为任何路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:56:21.423

您无法更改缓存文件夹中的路径，因为它们与键/值存储后端中引用缩略图的方式直接相关。[您可以在 github 源代码中查看这些路径和文件名的生成位置。](https://github.com/sorl/sorl-thumbnail/blob/master/sorl/thumbnail/base.py#L92)

您**可以**通过设置[`THUMBNAIL_PREFIX`设置](https://github.com/sorl/sorl-thumbnail/blob/master/sorl/thumbnail/conf/defaults.py#L48)来更改实际缓存文件夹的位置（将在您的`MEDIA_ROOT`- ie下创建`/media/cache/`）

# php - 以自定义模式打印自定义数组

> ID：13342107
> 
> 赞同：1
> 
> 时间：2012-11-12T10:32:16.240
> 
> 标签：php, arrays, loops

如果我的数组看起来像：

> 数组（[ **date** _type] => 日期 [ **date** _text] => 20/12/2012 [ **place** _type] => Place [ **place** _text] => NY ）

我怎样才能打印结果：

```
<span>Date</span><div>20/12/2012</div>
<span>Place</span><div>NY</div>
so on.... (if more custom array) 
```

我现在走到了这一步

```
$custom_info = array (
  "date_type" => "Date",
  "date_text" => "20/12/2012",
  "place_type"=>"Place",
  "place_text" => "NY" 
) ;
$count = count($custom_info)/2;

for ($i=1; $i<$count; $i++)
{

} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:37:35.200

如果您的数组始终具有您编写的结构，请使用它

```
 $i = 0;
    foreach ($custom_info as $k => $v) {
        if ($i % 2 == 0){
            echo "<span>".$v."</span>";
        } else {
            echo "<div>".$v."</div>";
        }

        $i++;
    } 
```

经过测试

解释：

根据您的数组结构，您应该在span中回显第一个元素的值，在div中回显第二个元素的值，依此类推：`$i % 2 == 0`表明当它是元素编号0、2、4等时，在span中打印，如果为1， 3、5等，在div中打印。`a % b`当你除以时给出余`a`数`b`

```
$i = 0,  $i % 2 --> 0
$i = 1,  $i % 2 --> 1
$i = 2,  $i % 2 --> 0
$i = 3,  $i % 2 --> 1
$i = 4,  $i % 2 --> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:36:26.587

使用[`foreach`](http://php.net/manual/en/control-structures.foreach.php),[`explode()`](http://php.net/manual/en/function.explode.php)和[`ucfirst()`](http://php.net/manual/en/function.ucfirst.php):

```
foreach( $custom_info as $k => $v){
    $parts = explode( '_', $k);
    if( count($parts) != 2){
       throw new Exception( 'Invalid format of key: ' . $k);
    }

    if( $parts[1] != 'text'){
       continue;
    }

    // Build label
    $key = $parts[0] . '_type';
    $label = '';
    if( isset( $custom_info[ $key])){
        $label = $custom_info[ $key];
    } else {
        $label = ucfirst( $parts[0]);
    }

    echo '<span>' . htmlspecialchars( $label) . '</span><div>' 
         . htmlspecialchars( $v) . '</div>';
} 
```

或者你可以用`explode()`这样的函数替换（它也支持`long_key_text`，使用[`strrpos()`](http://www.php.net/manual/en/function.strrpos.php)）：

```
function getParts( $key){
    $pos = strrpos( $key, '_');
    if( $pos === false){
        return false; // or array or so
    }

    return array(
        substr( $key, 0, $pos),
        sbustr( $key, $pos+1)
    );
} 
```

* * *

根据 Elbys 的评论和您的回答，最简单的方法是：

```
$custom_info = array (
  "Date" => "20/12/2012",
  "Place" => "NY" 
) ;

foreach( $custom_info as $k => $v){
    echo '<span>' . htmlspecialchars( $k) . '</span><div>' 
         . htmlspecialchars( $v) . '</div>';
} 
```

# css - 快速字体网络字体在 chrome 或 ie 中不起作用

> ID：13342114
> 
> 赞同：12
> 
> 时间：2012-11-12T10:32:46.017
> 
> 标签：css, webfonts

我正在尝试使用托管在 fast.fonts.com 上的字体。我正在使用以下代码来加载字体：

```
<link type="text/css" rel="stylesheet" href="http://fast.fonts.com/cssapi/3566c147-3f45-41ed-941c-cfe1528c243e.css"/> 
```

在 Firefox 中，字体正确加载，但在 IE 或 Chrome 中不起作用。这些浏览器是否需要额外设置才能工作？

它正在这个网站上使用：

[http://d258eeb2b8434d14a1135347db13e724.cloudapp.net/Home.aspx](http://d258eeb2b8434d14a1135347db13e724.cloudapp.net/Home.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:05:24.970

来自 fonts.com 常见问题解答 - [http://www.fonts.com/support/faq/web-fonts-work-only-in-firefox](http://www.fonts.com/support/faq/web-fonts-work-only-in-firefox)

为什么我的网页字体只在 Firefox 中显示？

如果字体仅在 Firefox 中有效，这可能表明您的 Web 字体项目中列出的域不允许接收 Web 字体。查看项目的域列表以确保每个域都已正确指定。还要确保在进行任何更改后您已经发布了您的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:44:07.977

尝试在 .css 文件声明之前从 fastfonts 嵌入字体。我对谷歌字体有同样的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-21T00:40:27.507

如果您在 https 站点上，Chrome 默认会阻止 http 请求。如果从 href 中删除“http:”，现在样式表将加载到与当前协议匹配的 http 或 https。

```
<link type="text/css" rel="stylesheet" href="//fast.fonts.com/cssapi/3566c147-3f45-41ed-941c-cfe1528c243e.css"/> 
```

# excel - XSLX 无法在 IE 8 上正确下载

> ID：13342117
> 
> 赞同：0
> 
> 时间：2012-11-12T10:33:01.523
> 
> 标签：excel, internet-explorer, symfony-1.4

我目前正在为客户构建一个 Web 应用程序。而且我无法使用原始 IE8 下载 xlsx 文件。而它适用于 IE9 的 IE8 兼容模式。

我正在使用 symfony 1.4，php 5.2.6。xslx 文件有效。

我的代码：

```
$this->getResponse()->clearHttpHeaders();
    $this->getResponse()->setHttpHeader('Pragma: public'); 
    $this->getResponse()->setContentType('application/force-download');
    $this->getResponse()->setHttpHeader('Content-Disposition', 'attachment; filename="Export_Excel.xlsx"');
    $this->getResponse()->setHttpHeader('Content-Transfer-Encoding', 'binary');
    $this->getResponse()->setHttpHeader('Connection', 'close');
    $this->getResponse()->setContent($fileData);
    $this->getResponse()->sendHttpHeaders();
    $this->getResponse()->send(); 
```

IE 8 说不能下载，因为他没有找到该网站或没有响应，稍后再试。这不是 url 问题，因为我可以显示具有相同 ulr 的空白页面。

此外，这段代码

```
 session_write_close();
        $this->getResponse()->clearHttpHeaders();
        $this->getResponse()->setHttpHeader('Pragma: public'); 
        $this->getResponse()->setContentType('application/force-download');
        $this->getResponse()->setHttpHeader('Content-Disposition', 'attachment; filename="Export_Excel.xlsx"');
        $this->getResponse()->setHttpHeader('Content-Transfer-Encoding', 'binary');
        $this->getResponse()->setHttpHeader('Connection', 'close');

      @ob_end_clean();
    flush();

    @readfile(sfConfig::get('sf_web_dir').'/'.$filename.'.xlsx');
  throw new sfStopException(); 
```

然后将 xslx 文件下载为 zip 文件。注意 session_write_close(); 因为没有它，上面的代码就无法工作。

有任何想法吗 ？

我希望能够将我的文件下载为 xslx 文件。（不必重命名）。第一束代码适用于 chrome、firefox、IE 9、IE9 compat IE 8、IE9 compat IE7。但不是IE8。

**更新 2：**

所以问题确实出在下载部分。我的老板告诉我用 csv 临时替换 xlsx，我在下载文件时遇到了同样的问题。

那么有什么想法可以使文件下载适用于 IE8 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:49:11.287

我找到了解决方案。这很容易理解，但很难找到。

我的下载是由带有 window.open 的 javascript 调用的，就像工作中的 pdf 导出一样。但是在新窗口的情况下，IE8会忽略强制下载并尝试显示。所以它适用于pdf。但是由于不可显示的扩展而崩溃。

所以解决方案是使用简单的链接或 window.location.href =，当您需要提供动态参数时，就像我的情况一样。

# iphone - iPhone 拉动刷新移动图标位置

> ID：13342119
> 
> 赞同：2
> 
> 时间：2012-11-12T10:33:05.360
> 
> 标签：iphone, objective-c, ios, uiscrollview, uirefreshcontrol

我的滚动视图跨越了 iPhone 的整个高度。因此，iPhone 的半透明状态栏覆盖在滚动视图的顶部。我已将 iOS6 的 UIRefreshControl 添加到滚动视图中，如下所示：

```
UIRefreshControl *pullToRefresh = [[UIRefreshControl alloc] init];
[pullToRefresh addTarget:self action:@selector(refresh) forControlEvents:UIControlEventValueChanged];
self.refreshControl = pullToRefresh;
[self.scrollView addSubview:refreshControl]; 
```

一切功能都很好。但是，下拉刷新图标并没有拉低到足以清除 iPhone 状态栏。这看起来很垃圾，就像这样：

![拉动刷新](../Images/7adfa763fbb7f1b552981efe72675284.png)

我尝试在 UIRefreshControl 上设置框架/边界以重新定位刷新图标，但没有运气。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:18:55.363

尝试在顶部设置 20 像素的 contentInset。这是 UIScrollView 上的一个属性。

# android - Java 构建路径错误

> ID：13342120
> 
> 赞同：3
> 
> 时间：2012-11-12T10:33:06.907
> 
> 标签：android

如何解决此错误 - 无法读取项目“aproject”中所需库的存档：“C:/Users/Android/Documents/eclpiseproject/codes/android/aproject/libs/._android-support-v4.jar”或不是有效的 ZIP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T09:40:58.660

我刚刚从项目中删除了 android-support-v4.jar 并使用“Android 工具 -> 添加支持库”将其添加回来，它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:36:37.897

Android 开发人员指南对此主题有相当完整的部分。如果您按照这些步骤操作，您应该能够解决此问题。

-> [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:36:57.940

看起来您缺少支持库。

右键单击 Eclipse > Android 工具 > 添加支持库中的项目。

支持库未打包为 Android SDK 的一部分，但提供了更多组件。如果您使用其中的组件，则需要添加它。

明智的做法是在添加后清理您的项目。

# windows-8 - 如何将 Microsoft 帐户集成到 Windows 应用商店应用程序中？

> ID：13342121
> 
> 赞同：0
> 
> 时间：2012-11-12T10:33:19.700
> 
> 标签：windows-8, windows-runtime, microsoft-account

我正在编写一个通过网络访问用户信息的应用程序。我想使用当前用户的 Microsoft 帐户，向我的应用程序以及支持该应用程序的云托管服务识别他们。如果他们没有帐户，我会提示他们创建一个。

简而言之，我想要类似于 Windows 8 的游戏中心的功能，但我还没有找到任何关于用户身份的教程，可以让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:45:54.410

这个[http://msdn.microsoft.com/en-us/library/live/hh826551.aspx](http://msdn.microsoft.com/en-us/library/live/hh826551.aspx)应该是你想做的。这与我用来在我的应用程序中启用使用 Microsoft 帐户登录的教程相同。

# c# - 如何在 Visual Studio 中获取文件的相对路径？

> ID：13342123
> 
> 赞同：96
> 
> 时间：2012-11-12T10:33:32.770
> 
> 标签：c#, visual-studio

我正在尝试获取我在 Visual Studio 的解决方案资源管理器中添加的图像文件的路径，但我无法获得该图像的相对路径。H是我项目的文件结构：

```
/BulutDepo项目
    /文件夹图标
        文件夹.ico
        主文件

```

我可以得到这样的图像：

```
"C:\\Users\\Tolga\\Desktop\\BulutDepo\\BulutDepoProject\\FolderIcon\\Folder.ico" 
```

但我应该能够通过以下方式获得它：

```
"~\\FolderIcon\\Folder.ico" 
```

我想我不知道它的确切语法，所以我无法获取图像。:(

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-10-11T10:57:06.310

当您想使用任何类型的外部文件时，当然有一种方法可以将它们放在项目中的文件夹中，但不如从资源中获取它们有效。在常规的 Visual Studio 项目中，您应该`Resources.resx`在该部分下有一个文件`Properties`，如果没有，您可以轻松添加自己的`Resource.resx`文件。[并在其中添加任何类型的文件，您可以在此处](http://msdn.microsoft.com/en-us/library/3bka19x4%28v=vs.80%29.aspx)访问将资源文件添加到项目的演练。

在项目中有资源文件后，调用它们很容易，如下所示：

```
var myIcon = Resources.MyIconFile; 
```

当然，您应该`using Properties`像这样添加语句：

```
using <namespace>.Properties; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-11-21T21:30:31.520

我有点晚了，我不确定这是否是你要找的，但我想我会添加它以防万一其他人发现它有用。

假设这是您的文件结构：

```
/BulutDepoProject
    /bin
        Main.exe
    /FolderIcon
        Folder.ico
        Main.cs 
```

您需要编写相对于`Main.exe`文件的路径。所以，你想访问`Folder.ico`，`Main.cs`你可以使用：

```
String path = "..\\FolderIcon\\Folder.ico" 
```

这似乎对我有用！

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-11-12T10:40:26.710

省略“~\”：

```
var path = @"FolderIcon\Folder.ico"; 
```

`~\`就文件系统而言，这没有任何意义。我见过正确使用的唯一地方是在 Web 应用程序中，其中 ASP.NET 将波浪号替换为应用程序根目录的绝对路径。

您通常可以假设路径是相对于 EXE 所在的文件夹的。此外，请确保在 Visual Studio 的属性选项卡中将图像指定为“内容”和“如果较新则复制”/“始终复制”。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-08-19T14:42:32.557

我也遇到了同样的问题，我能够解决它。所以让我解释一下我应用的步骤。我将根据您的情况进行解释。

根据我的方法，我们需要使用“Path”类和“Assembly”类来获取相对路径。

所以首先在 using 语句中导入 System.IO 和 System.Reflection。

然后输入下面给定的代码行。

```
 var outPutDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly(). CodeBase); 
```

实际上上面给定的行存储了项目的输出目录的路径。（这里的“输出”目录是指项目的**调试**文件夹）。

现在将您的 FolderIcon 目录复制到 Debug 文件夹中。然后键入以下给定的行。

```
var iconPath = Path.Combine(outPutDirectory, "FolderIcon\\Folder.ico"); 
```

现在这个 'iconPath' 变量包含了 Folder.ico 的整个路径。您所要做的就是将它存储在一个字符串变量中。为此，请使用下面的代码行。

```
string icon_path = new Uri(iconPath ).LocalPath; 
```

现在您可以使用此 icon_path 字符串变量作为图标的相对路径。

谢谢。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-04-28T08:43:01.110

在 Visual Studio 中，请单击解决方案资源管理器窗格中的“Folder.ico”文件。然后您将看到属性窗格。将“复制到输出目录”行为更改为“如果更新则复制”。这将使 Visual Studio 将文件复制到输出 bin 目录。

现在要使用相对路径获取文件路径，只需键入：

```
string pathToIcoFile = AppDomain.CurrentDomain.BaseDirectory + "//FolderIcon//Folder.ico"; 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-06T10:49:55.200

我认为使用这将是最简单的

```
new Uri("pack://application:,,/FolderIcon/" + youImageICO); 
```

或者此代码将在任何机器上工作，如果您的文件夹在您的根项目中，如果您想更改它......只需更改此部分@“..\”

```
public static string bingPathToAppDir(string localPath)
{
    string currentDir = Environment.CurrentDirectory;
    DirectoryInfo directory = new DirectoryInfo(
        Path.GetFullPath(Path.Combine(currentDir, @"..\..\" + localPath)));
    return directory.ToString();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-10T06:33:43.300

我的文件夹位于项目的根目录，我使用了这个：

```
string sCurrentDirectory = AppDomain.CurrentDomain.BaseDirectory;

string sFile = System.IO.Path.Combine(sCurrentDirectory, @"libs\cat");

string sFilePath = Path.GetFullPath(sFile); 
```

# go - 简单的 golang IRC bot 不断超时

> ID：13342128
> 
> 赞同：14
> 
> 时间：2012-11-12T10:33:45.287
> 
> 标签：go

我正在修改 golang，我的第一个代码是一个简单的 IRC 机器人，代码如下：

```
package main

import ("net"
        "log"
        "bufio"
        "fmt"
        "net/textproto"
      )
type Bot struct{
        server string
        port string
        nick string
        user string
        channel string
        pass string
        pread, pwrite chan string
        conn net.Conn
}

func NewBot() *Bot {
        return &Bot{server: "irc.freenode.net",
                    port: "6667",
                    nick: "subsaharan",
                    channel: "#rapidsms", 
                    pass: "",
                    conn: nil,
                    user: "blaze"}
}
func (bot *Bot) Connect() (conn net.Conn, err error){
  conn, err = net.Dial("tcp",bot.server + ":" + bot.port)
  if err != nil{
    log.Fatal("unable to connect to IRC server ", err)
  }
  bot.conn = conn
  log.Printf("Connected to IRC server %s (%s)\n", bot.server, bot.conn.RemoteAddr())
  return bot.conn, nil
}

func main(){
  ircbot := NewBot()
  conn, _ := ircbot.Connect()
  conn.Write([]byte("NICK " + ircbot.nick))
  conn.Write([]byte("JOIN " + ircbot.channel))
  defer conn.Close()

  reader := bufio.NewReader(conn)
  tp := textproto.NewReader( reader )
  for {
        line, err := tp.ReadLine()
        if err != nil {
            break // break loop on errors    
        }
        fmt.Printf("%s\n", line)
    }

} 
```

当我运行此代码时，我在终端上得到以下输出：

```
2012/11/12 13:31:20 Connected to IRC server irc.freenode.net (193.219.128.49:6667)
:sendak.freenode.net NOTICE * :*** Looking up your hostname...
:sendak.freenode.net NOTICE * :*** Checking Ident
:sendak.freenode.net NOTICE * :*** Couldn't look up your hostname
:sendak.freenode.net NOTICE * :*** No Ident response
ERROR :Closing Link: 127.0.0.1 (Connection timed out) 
```

连接不断超时的任何原因？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T12:03:58.937

发送到 IRC 服务器的所有命令最多有~~255~~ 512 个字节，并且必须以回车和换行符结束`\r\n`。

```
conn.Write([]byte("NICK " + ircbot.nick + "\r\n"))
conn.Write([]byte("JOIN " + ircbot.channel + "\r\n")) 
```

此外，freenode 期望该`USER`命令是它从您那里看到的第一件事。

```
conn.Write([]byte("USER "+ircbot.nick+" 8 * :" + ircbot.nick + "\r\n"))
conn.Write([]byte("NICK " + ircbot.nick + "\r\n"))
conn.Write([]byte("JOIN " + ircbot.channel + "\r\n")) 
```

作为旁注，您可以使用`fmt.Fprintf`格式化和发送数据让您的生活更轻松：

```
fmt.Fprintf(conn, "USER %s 8 * :%s\r\n", ircbot.nick, ircbot.nick)
fmt.Fprintf(conn, "NICK %s\r\n", ircbot.nick)
fmt.Fprintf(conn, "JOIN %s\r\n", ircbot.channel) 
```

的第一个参数`fmt.Fprintf`必须是满足`io.Writer`接口的任何类型。`net.Conn`实现都是这样做的。因此，您可以将它们传递给任何期望`io.Writer`（或`io.Reader`就此而言）实现的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T19:38:59.993

此外，有时 IRC 服务器会发送“PING :cookie”消息（例如，如果您的连接空闲时间过长）。您应该回复“PONG :cookie”。

# mysql - 触发器语句中的语法错误

> ID：13342134
> 
> 赞同：0
> 
> 时间：2012-11-12T10:34:02.707
> 
> 标签：mysql, sql

当我的`users_reputation`积分表更新（插入）时，我想对该用户的积分进行新计数（SUM）并更新表`total_rep`中的一列`users`。

这是我想出的，但不断收到语法错误。如果有人能指出我的错误，我将不胜感激。

```
CREATE TRIGGER after_insert_rep_points AFTER INSERT ON users_reputation
FOR EACH ROW
BEGIN
DECLARE new_total INT(10);
SELECT SUM(rep_points) INTO new_total FROM users_reputation
WHERE user_id = NEW.user_id;
UPDATE users SET rep_total = new_total WHERE user_id = NEW.user_id;
END 
```

这些是我的表格示例供参考：

**用户：**

```
 user_id    |  first_name    |  total_rep
-------------+----------------+--------------
  10001      |  Jim           |  17
  10002      |  Bob           |  5 
```

**USERS_REPUTATION：**

```
 user_id  |  rep_task                     |  rep_points  |  rep_date
-----------+-------------------------------+--------------+-----------------------
  10001    |  Commented on article         |  5           |  2012-11-12 08:40:32
  10001    |  Read an article              |  2           |  2012-06-12 12:32:01
  10001    |  Shared an article            |  10          |  2012-06-04 17:39:44
  10001    |  Read an article              |  2           |  2012-05-19 01:04:11
  10002    |  Commented on article         |  5           |  2012-06-17 09:34:21 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:35:56.240

您需要在开头添加分隔符更改。

```
delimiter |

CREATE TRIGGER after_insert_rep_points AFTER INSERT ON users_reputation
...
END

|
delimiter ; 
```

定界符向数据库引擎发出语句结束的信号。通常是`;`. 但这将首先结束存储过程`;`。它的定义是不完整的。

您可以更改分隔符并将其添加到程序的末尾。之后将分隔符改回`;`

# c# - 将 ..mobile 附加到行为异常的视图名称末尾

> ID：13342135
> 
> 赞同：1
> 
> 时间：2012-11-12T10:34:02.727
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio-2010, asp.net-mvc-4

我正在尝试创建一个只为移动网站加载的视图。 [显然](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)，将 .mobile 添加到视图名称以便 _Layout.cshtml 变为 _Layout.Mobile.cshtml 会导致在移动设备上查看设备时加载该视图。我已经为我的 VS 项目使用的第一个视图 - _Layout.cshtml 工作了，但是在它加载的那个文件中`@Html.Partial(MVC.Shared.Views._Header, Model)`，我预计会发生同样的事情，它会知道加载 _Header.Mobile。而是查看 cshtml 视图，但事实并非如此。这是否意味着我必须手动更改对视图的所有引用以在视图的末尾添加 .Mobile？我认为 .Mobile 的重点是它会自动知道使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:45:04.370

我会说你必须按名称加载部分才能工作，你在那里指定一个特定的文件。

你可以使用加载它

```
@Html.Partial("_Header", Model) 
```

# c# - 从视图中填充单词书签

> ID：13342137
> 
> 赞同：0
> 
> 时间：2012-11-12T10:34:11.587
> 
> 标签：c#, ms-word, bookmarks

我的问题的背景是，我必须建立与另一个程序中的单词的连接。用户将模板中所有可见的字段设置为书签，因此用户将动态创建带有书签的模板。如果这是一个没有列表（多行视图）的文档，一切都很好。书签将替换为所需的信息。

我遇到的问题是模板中有列表时。他们只设置了一次书签，所以我必须以某种方式以正确的位置和样式等复制它，因为我必须能够每行打印列表。

这方面的一个例子是： ![在此处输入图像描述](../Images/8bd5b77cb42ceca530775586dd50d269.png)

当我打印一行时，我丢失了书签。有什么方法可以知道书签是否在表格中？是否可以复制具有正确位置的书签等？

我将 C# 与 microsoft.office.interop.word 一起使用。
目前将所有列表项放在一个由输入分隔的单元格中。我应该使用 xml 方案来执行此操作吗？
（应该可以得到当前表的子行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:00:35.007

I've solved the problem with merge fields in Word.

First i load the template in my docx.

Then i copy the paragraphs (with the right level indication) as many times as there are rows for that level.

Then what's left is to fill all the merge fields with the according rows.

# objective-c - For循环更新UILabels组

> ID：13342139
> 
> 赞同：0
> 
> 时间：2012-11-12T10:34:15.030
> 
> 标签：objective-c, ios, for-loop, iteration

我正在尝试通过 For 循环更新八个单独的`UILabel`s ，该循环为每个循环生成一个随机字母。`_letter1Label``_letter8Label`

我不太确定如何告诉 for 循环更新与循环迭代次数相对应的标签。到目前为止，这是我的代码：

```
- (void) generateRandomLetters {

    for (int i = 1; i < 9; i++) {
        NSMutableString *letter = [NSString stringWithFormat: @"%C", [ALPHABET characterAtIndex: arc4random() % [ALPHABET length]]];
        NSMutableString *labelFormat = [NSString stringWithFormat:@"_letter%dLabel", i];
        // Stuck here, need to update _letter(i)Label with letter..
    }
} 
```

只是不太清楚如何在代码中表达它！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:37:26.743

您可以将标签保存在数组中，然后使用数组的索引来更新它们：

```
UILabel *labelToUpdate = [arrayOfLabels objectAtIndex:(i - 1)];
labelToUpdate.text = letter; 
```

# c# - XML解析检查属性是否存在

> ID：13342143
> 
> 赞同：18
> 
> 时间：2012-11-12T10:34:17.183
> 
> 标签：c#, xml, linq, linq-to-xml

我制作了一个方法来检查 XML 文件中是否存在属性。如果它不存在，则返回“False”。它可以工作，但解析文件需要很长时间。它似乎读取每一行的整个文件。我在这里错过了什么吗？我可以以某种方式使其更有效吗？

```
 public static IEnumerable<RowData> getXML(string XMLpath)
    {
        XDocument xmlDoc = XDocument.Load("spec.xml");

        var specs = from spec in xmlDoc.Descendants("spec")
                    select new RowData
                    {
                        number= (string)spec.Attribute("nbr"),
                        name= (string)spec.Attribute("name").Value,
                        code = (string)spec.Attribute("code").Value,
                        descr = (string)spec.Attribute("descr").Value,
                        countObject = checkXMLcount(spec),

        return specs;
    }

    public static string checkXMLcount(XElement x)
    {
        Console.WriteLine(x.Attribute("nbr").Value);
        Console.ReadLine();
        try
        {
            if (x.Attribute("mep_count").Value == null)
            {
                return "False";
            }
            else
            {
                return x.Attribute("mep_count").Value;
            }
        }
        catch
        {
            return "False";
        }
    } 
```

我测试了用只返回和接收字符串的方法替换该方法：

```
public static string checkXMLcount(string x)
{
    Console.WriteLine(x);
    Console.ReadLine();
    return x;

} 
```

我制作了一个只有一行的 XML 文件。控制台打印出该值 15 次。有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-13T12:22:17.573

解决了！不需要额外的方法：

```
countObject = spec.Attribute("mep_count") != null ? spec.Attribute("mep_count").Value : "False", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:18:44.227

你可以试试这个看看有没有改善

```
class xmlAttributes
{
    public string Node;
    public Dictionary<string, string> Attributes;
} 
```

现在有了这个 LINQ，所有属性都存储在字典中（每个节点），并且可以通过属性名称访问。

```
var Result = XElement.Load("somedata.xml").Descendants("spec")
                      .Select(x => new xmlAttributes
                      {
                          Node = x.Name.LocalName,
                          Attributes = x.Attributes()
                                     .ToDictionary(i => i.Name.LocalName,
                                                        j => j.Value)
                      }); 
```

检查所有 XML 节点上是否存在属性

```
var AttributeFound = Result.All(x => x.Attributes.ContainsKey("AttrName")); 
```

检查属性是否至少出现一次

```
var AttributeFound = Result.Any(x => x.Attributes.ContainsKey("AttrName")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T03:12:31.967

只是想指出：

```
countObject = spec.Attribute("mep_count")?.Value; 
```

哪个在链条上一直有效：

```
countObject = spec?.Attribute("mep_count")?.Value 
```

这将产生相同的效果，其中 countObject 将设置为 null 或该值（如果存在）。

# android - Proguard：有 210 个重复的类定义？

> ID：13342146
> 
> 赞同：2
> 
> 时间：2012-11-12T10:34:43.910
> 
> 标签：android, warnings, proguard

Eclipse 在下面显示警告，似乎它有一些与 proguard 相关的东西。但是我的项目可以在其他电脑上签到，而且我之前也签过！怎么了？如何解决？

注意：有 210 个重复的类定义。您应该检查是否需要指定其他程序 jar。警告：无法写入资源 [META-INF/MANIFEST.MF]（重复的 zip 条目 [android-support-v4.jar:META-INF/MANIFEST.MF]）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:51:14.233

解决了。-injar 是必需的。@see：[为什么 Eclipse 不能写资源](https://stackoverflow.com/questions/13356595/why-eclipse-cant-write-resource)

编辑：最后，我发现：它与 Astrill（VPN）不兼容，我强制关闭了 astrill 进程并且问题消失了。

# java - AndEngine - 一般 2D 横向滚动问题

> ID：13342147
> 
> 赞同：1
> 
> 时间：2012-11-12T10:34:44.067
> 
> 标签：java, android, andengine

我刚开始使用 AndEngine，很难找到好的教程/文档。我正在制作一个 2D 横向卷轴游戏，其中平台和墙壁是随机生成的。用户可以控制玩家的移动（跳跃、向前走）。

我有几个一般性问题：

如何让视差背景仅在玩家移动时滚动？

我是否应该将物理世界重力设置为空，并将重力添加到实际需要它的每个单独对象？我不希望重力影响浮动平台/墙壁。

我如何在玩家移动时为其设置动画（动画行走）？

进行碰撞检测（玩家/敌人、玩家/墙/平台等）的最佳方法是什么？

抱歉，这一次可能有很多问题要问。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:09:48.357

这里是关于**碰撞**过滤器：[这里](http://www.aurelienribon.com/blog/2011/07/box2d-tutorial-collision-filtering/)和[这里](http://www.andengine.org/forums/gles2/collision-with-differen-categorybits-and-masks-t6415.html)
如果你询问整体碰撞，你可以用精灵来做：`heroSprite.collidesWith(enemySprite);`
如果碰撞问题得到解决，那么你可以只为你的英雄设置**重力**和身体（物理身体）（用于跳跃） . 或者做必要的过滤器，把墙做成静态体（固定体不受重力影响）。

**动画英雄：**
加载纹理：
`private ITiledTextureRegion hero;`

`BuildableBitmapTextureAtlas heroTextureAtlas = new BuildableBitmapTextureAtlas(gameController.getTextureManager(), 256, 256, TextureOptions.NEAREST);`

`this.hero = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(heroTextureAtlas, gameController.getAssets(), "hero.png", 3, 4);`

`try { heroTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 0, 0)); heroTextureAtlas.load(); } catch (TextureAtlasBuilderException e) { Debug.e(e); }`

并将其用于动画：`heroSprite.animate( );`- 方法参数有很多选择，看看你需要什么。

对不起我的英语，我希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:06:59.880

> 如何让视差背景仅在玩家移动时滚动？

我从未使用过视差背景，但我猜背景会随着相机的移动而移动。如果玩家不移动，相机也不应该移动，因此背景也不会移动。

> 我是否应该将物理世界重力设置为空，并将重力添加到实际需要它的每个单独对象？我不希望重力影响浮动平台/墙壁。

不，使用重力。当创建不受力影响的物体时（因此是不可移动的），您使用该`BodyType.StaticBody`选项。静态物体不能移动（只能通过代码）。

> 我如何在玩家移动时为其设置动画（动画行走）？

看看[AnimatedSpritesExample](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/AnimatedSpritesExample.java)。基本上，要为精灵设置动画，它必须从`AnimatedSprite`类中实例化，并且您需要为它提供一个`TiledTextureRegion`（包含多个区域，每个区域都有不同的图像）。然后，通过调用类的`animate`方法`AnimatedSprite`就可以开始动画了。

> 进行碰撞检测（玩家/敌人、玩家/墙/平台等）的最佳方法是什么？

如果你打算使用 Box2D，你可以实现一个回调`ContactListener`，当你的`PhysicsWorld`.

如果您不打算使用 Box2D，可以使用 AndEngine 的方法进行碰撞检测。这是一个[例子](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/CollisionDetectionExample.java)。

# d3.js - 平移/缩放序数比例？

> ID：13342149
> 
> 赞同：8
> 
> 时间：2012-11-12T10:34:51.147
> 
> 标签：d3.js, zooming, scale, pan

我正在使用 d3 渲染简化的甘特图，并使用 d3.behavior.zoom 进行平移和缩放。

x 刻度是一个时间刻度（稍微修改为在列中居中日历天等）并且工作得很好，但是我在决定如何缩放/平移 y 刻度时遇到问题，它的域是一个任务列表，通常是太多无法放入图表区域，因此需要平移/缩放。

有没有办法告诉默认序数比例以对缩放/平移事件做出反应，或者我应该编写自定义比例？如果我需要编写自定义比例，最好将它基于 d3.scale.ordinal（让它存储整个任务列表，并仅使用可见子集作为其域），还是基于 d3.scale。线性的（然后实现类似于范围带等的序数比例？）。

还是我遗漏了什么（很可能，因为这是我第一个使用 d3 的项目）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-07T12:59:24.910

由于我已私下联系以解释我是如何做到的，因此与我之前的回答略有扩展。

首先，有问题的应用程序的屏幕截图，其主要工作是汇总和显示从各种来源（PowerPoint 文件、公司数据库等）收集的计划数据。

![截屏](../Images/4dd223e27c59763c87eee097a5a3aa45.png)

相关位是带有彩色点的右侧垂直轴，其中每个点代表一个项目的努力和参与的组织。轴上的灰色区域是 d3.js 画笔，可以平移/调整大小以实时更改图表/表格数据。

```
// the axis is a regular ordinal axis, with a brush
y2 = d3.scale.ordinal(),
brush = d3.svg.brush().y(y2).on('brush', brushReact),
// [...]
// brush event handler
function brushReact() {
    if (tasksSlice == null)
        return;
    var yrb = y2.rangeBand(),
        extent = brush.extent(),
        s0 = Math.round(extent[0]/yrb),
        s1 = Math.round(extent[1]/yrb);
    if (s0 == tasksSlice[0] && s1 == tasksSlice[1])
        return;
    tasksSlice = [s0, s1];
    inner.refresh();
} 
```

处理程序内部发生的事情非常简单：

*   获取画笔范围
*   将其转置为我的数据数组中的索引
*   切片我的数据数组并将结果设置为要显示的数据
*   刷新图表和表格

我希望这能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T22:35:54.540

事实证明这并不难，我不得不：

*   编写一个自定义比例，与 d3.scale.ordinal 基本相同，不同之处在于它存储了域值的全范围并实现了一个设置可见域值范围的 slice([min, max]) 方法
*   在缩放事件回调中跟踪 y 平移增量，并将其添加到存储总 y 平移的变量中
*   检查总翻译量是否 >= 大于两个范围值之间的 y 增量，是否检查我们是否已经在（可见或不可见）域边界之一（0 或长度）上，如果我们在不将切片索引递增或递减 1，重置总平移变量，然后重绘轴

# java - 如何在触摸事件上绘制矩形

> ID：13342156
> 
> 赞同：0
> 
> 时间：2012-11-12T10:35:14.470
> 
> 标签：java, android, android-canvas

如何在android中的触摸事件上绘制矩形。当我在画布上触摸时，我有一个画布，它绘制一个矩形，但是当我触摸新位置时，它会删除旧矩形并在新位置上绘制一个新矩形。但是，我想让所有矩形在我触摸的任何地方都可见。

```
public class TouchImageView extends ImageView {

    Matrix matrix = new Matrix();

    // We can be in one of these 3 states

    static final int NONE = 0;

    static final int DRAG = 1;

    static final int ZOOM = 2;

    boolean isCheckLoadImage = false;

    public static boolean isDraw = false;

    int mode = NONE;

    private float mPosX;

    private float mPosY;

    public static int numCell1 = 0;

    public static boolean CorrectTouch;

    float boxHeight, boxWidth;

    // Remember some things for zooming

    PointF last = new PointF();

    PointF start = new PointF();

    float minScale = 1f;

    float maxScale = 6f;

    int lastTouchEvent = -1;

    int selectedCell;

    float[] m;

    float scaleWidth, scaleHeight;

    float redundantXSpace, redundantYSpace;

    float width, height;

    static final int CLICK = 3;

    float saveScale = 1f;

    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;

    Context context;

    boolean flag = false;

    public TouchImageView(Context context) {

        super(context);

        sharedConstructing(context);

    }

    public TouchImageView(Context context, AttributeSet attrs) {

        super(context, attrs);

        sharedConstructing(context);

    }

    @Override
    protected void onDraw(Canvas canvas) {

        super.onDraw(canvas);

        Paint paint = new Paint();

        paint.setColor(Color.RED);

        paint.setStyle(Paint.Style.STROKE);

        paint.setStrokeWidth(4);

        RectF r = new RectF();

        matrix.mapRect(r);

        boxWidth = scaleWidth / 5;

        boxHeight = scaleHeight / 5;

        float widthOfCell = boxWidth;

        float heightOfCell = boxHeight;

        float[] touchPoint = new float[] { mPosX, mPosY };

        float[] newTouch = new float[] { 0, 0 };

        matrix.mapPoints(newTouch, touchPoint);

        RectF canvasRect = new RectF();

        canvas.getMatrix().mapRect(canvasRect);

        Log.i("canvasRect", "canvasRect.left : " + canvasRect.left
                + " canvasRect.top : " + canvasRect.top);

        Log.i("r", "r.left : " + r.left + " r.top : " + r.top);

        Log.i("Pos", "mPosX : " + mPosX + " mPosY : " + mPosY);

        float newX = mPosX - (r.left);

        float newY = mPosY - (r.top);

        Log.i("new XY", "New X" + newX + " NewY " + newY);

        int myX = (int) (newX / boxWidth); /* Columns */

        int myY = (int) (newY / boxHeight);/* Rows */

        Log.i("my XY", "myX " + myX + " myY " + myY);

        //

        Log.e("GuessImageView", "before grid draw");

        try {

            if (true) {

                if (lastTouchEvent == MotionEvent.ACTION_UP) {

                    numCell1 = 0;

                    boolean doBreak = false;

                    for (float row = 0; !doBreak
                            && row <5; row++) {

                        float y = (row * heightOfCell) + r.top;

                        for (float col = 0; col < 5; col++) {

                            float x = (col * widthOfCell) + r.left;

                            if ((int) col == myX && (int) row == myY) {

                                canvas.drawRect(x, y, x + widthOfCell, y
                                        + heightOfCell, paint);

                                Log.d("Touch X : " + x, "Touch Y : " + y);

                                selectedCell = numCell1;

                                numCell1++;

                                flag = true;

                                doBreak = true;

                                break;

                            }

                            numCell1++;

                        }

                    }

                    if (flag) {

                        isCheckLoadImage = true;

//                      guessImage.checkForWin(selectedCell);

                    }

                    Log.i("Touch ", "Number Of Cell>" + numCell1);

                    lastTouchEvent = -1;

                }

            }

        } catch (ArithmeticException e) {

            e.printStackTrace();

        }

        Log.e("GuessImageView", "after grid draw");

    }

    private void sharedConstructing(Context context) {

        super.setClickable(true);

        this.context = context;

        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

        matrix.setTranslate(1f, 1f);

        m = new float[9];

        setImageMatrix(matrix);

        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);

                float x = m[Matrix.MTRANS_X];

                float y = m[Matrix.MTRANS_Y];

                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:

                    last.set(event.getX(), event.getY());

                    start.set(last);

                    mode = DRAG;

                    // isDraw=false;

                    break;

                case MotionEvent.ACTION_MOVE:

                    // Log.i("onTouch", "origWidth : " + origWidth +

                    // " origHeight : " + origHeight);

                    if (mode == DRAG) {

                        // isDraw=false;

                        float deltaX = curr.x - last.x;

                        float deltaY = curr.y - last.y;

                        scaleWidth = Math.round(origWidth * saveScale);

                        scaleHeight = Math.round(origHeight * saveScale);

                        if (scaleWidth < width) {

                            deltaX = 0;

                            if (y + deltaY > 0)

                                deltaY = -y;

                            else if (y + deltaY < -bottom)

                                deltaY = -(y + bottom);

                        } else if (scaleHeight < height) {

                            deltaY = 0;

                            if (x + deltaX > 0)

                                deltaX = -x;

                            else if (x + deltaX < -right)

                                deltaX = -(x + right);

                        } else {

                            if (x + deltaX > 0)

                                deltaX = -x;

                            else if (x + deltaX < -right)

                                deltaX = -(x + right);

                            if (y + deltaY > 0)

                                deltaY = -y;

                            else if (y + deltaY < -bottom)

                                deltaY = -(y + bottom);

                        }

                        matrix.postTranslate(deltaX, deltaY);

                        last.set(curr.x, curr.y);

                    }

                    break;

                case MotionEvent.ACTION_UP: {

                    mode = NONE;

                    int xDiff = (int) Math.abs(curr.x - start.x);

                    int yDiff = (int) Math.abs(curr.y - start.y);

                    if (xDiff < CLICK && yDiff < CLICK) {

                        // isDraw=false;

                        Log.v("ACTION_UP", "ACTION_UP");

                        mPosX = curr.x;

                        mPosY = curr.y;

                        performClick();

//                      if (guessImage.guess_mode) {

                            lastTouchEvent = event.getAction();
                        /*}

                        else {

                            lastTouchEvent = -1;

                        }
*/
                        // invalidate();

                    }

                    break;

                }

                case MotionEvent.ACTION_POINTER_UP:

                    mode = NONE;

                    break;

                }

                setImageMatrix(matrix);

                scaleWidth = Math.round(origWidth * saveScale);

                scaleHeight = Math.round(origHeight * saveScale);

                invalidate();

                return true; // indicate event was handled

            }

        });

    }

    @Override
    public void setImageBitmap(Bitmap bm) {

        super.setImageBitmap(bm);

        if (bm != null) {

            bmWidth = bm.getWidth();

            bmHeight = bm.getHeight();

        }

    }

    public void setMaxZoom(float x) {

        maxScale = x;

    }

    private class ScaleListener extends
            ScaleGestureDetector.SimpleOnScaleGestureListener {

        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {

            mode = ZOOM;

            return true;

        }

        @Override
        public boolean onScale(ScaleGestureDetector detector) {

            float mScaleFactor = detector.getScaleFactor();

            float origScale = saveScale;

            saveScale *= mScaleFactor;

            if (saveScale > maxScale) {

                saveScale = maxScale;

                mScaleFactor = maxScale / origScale;

            } else if (saveScale < minScale) {

                saveScale = minScale;

                mScaleFactor = minScale / origScale;

            }

            right = width * saveScale - width
                    - (2 * redundantXSpace * saveScale);

            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);

            // mPosX = mPosX + right / saveScale;

            // mPosY = mPosY + bottom / saveScale;

            if (origWidth * saveScale <= width
                    || origHeight * saveScale <= height) {

                float xMove = 0, yMove = 0;

                matrix.postScale(mScaleFactor, mScaleFactor, width / 2,
                        height / 2);

                if (mScaleFactor < 1) {

                    matrix.getValues(m);

                    float x = m[Matrix.MTRANS_X];

                    float y = m[Matrix.MTRANS_Y];

                    if (mScaleFactor < 1) {

                        if (Math.round(origWidth * saveScale) < width) {

                            if (y < -bottom) {

                                matrix.postTranslate(0, -(y + bottom));

                                xMove = 0;

                                yMove = -(y + bottom);

                            } else if (y > 0) {

                                matrix.postTranslate(0, -y);

                                xMove = 0;

                                yMove = -y;

                            }

                        } else {

                            if (x < -right) {

                                matrix.postTranslate(-(x + right), 0);

                                xMove = -(x + right);

                                yMove = 0;

                            } else if (x > 0) {

                                matrix.postTranslate(-x, 0);

                                xMove = -(x + right);

                                yMove = 0;

                            }

                        }

                        Log.i("onScale", "mPosX " + mPosX + " mPosX " + mPosX);

                    }

                }

            } else {

                float xMove = 0, yMove = 0;

                matrix.postScale(mScaleFactor, mScaleFactor,
                        detector.getFocusX(), detector.getFocusY());

                matrix.getValues(m);

                float x = m[Matrix.MTRANS_X];

                float y = m[Matrix.MTRANS_Y];

                if (mScaleFactor < 1) {

                    if (x < -right) {

                        matrix.postTranslate(-(x + right), 0);

                        xMove = -(x + right);

                        yMove = 0;

                    } else if (x > 0) {

                        matrix.postTranslate(-x, 0);

                        xMove = -x;

                        yMove = 0;

                    }

                    if (y < -bottom) {

                        matrix.postTranslate(0, -(y + bottom));

                        xMove = 0;

                        yMove = -(y + bottom);

                    } else if (y > 0) {

                        matrix.postTranslate(0, -y);

                        xMove = 0;

                        yMove = -y;

                    }

                }

                Log.i("onScale", "mPosX " + mPosX + " mPosX " + mPosX);

            }

            return true;

        }

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        if (!isCheckLoadImage) {

            width = MeasureSpec.getSize(widthMeasureSpec);

            height = MeasureSpec.getSize(heightMeasureSpec);

            // Fit to screen.

            float scale;

            float scaleX = (float) width / (float) bmWidth;

            float scaleY = (float) height / (float) bmHeight;

            scale = Math.min(scaleX, scaleY);

            matrix.setScale(scale, scale);

            setImageMatrix(matrix);

            saveScale = 1f;

            // Center the image

            redundantYSpace = (float) height - (scale * (float) bmHeight);

            redundantXSpace = (float) width - (scale * (float) bmWidth);

            redundantYSpace /= (float) 2;

            redundantXSpace /= (float) 2;

            matrix.postTranslate(redundantXSpace, redundantYSpace);

            origWidth = width - 2 * redundantXSpace;

            origHeight = height - 2 * redundantYSpace;

            right = width * saveScale - width
                    - (2 * redundantXSpace * saveScale);

            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);

            setImageMatrix(matrix);

        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:37:34.367

您需要将所有触摸位置存储在内存中，并每次都重新绘制它们。

就像在这个示例中一样：[Android 在屏幕上绘制对象并获取几何数据](https://stackoverflow.com/questions/13305706/android-drawing-objects-on-screen-and-obtaining-geometry-data/13308008#13308008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-07T07:41:38.733

> 这是我在卡片上的一段代码，我必须在它上面画一个矩形并监听矩形的点击事件。该卡用于一些计数任务，客户出于某种原因希望将触摸扩展到视图上......

```
 alertCard.setOnTouchListener((v, event) -> {

        Rect outRect = new Rect();
        alertCard.getGlobalVisibleRect(outRect);

        // calculate new bottom, to be used for upper part.
        int bottom = (int) (outRect.bottom * 0.95);

        Rect upperRec = new Rect(outRect.left, outRect.top,outRect.right, bottom);

        int value = part.getMistakes().get(0).getValue();

        if (upperRec.contains( (int) event.getRawX(),(int) event.getRawY()))
        {
           //Implement the touch event...

        }

        return false;
    }); 
```

# android - 小部件 setOnClickPendingIntent 未启动服务

> ID：13342158
> 
> 赞同：4
> 
> 时间：2012-11-12T10:35:18.010
> 
> 标签：android, android-widget, android-service, android-pendingintent

按照[此处](http://developer.android.com/guide/topics/appwidgets/index.html)的示例，我轻松创建了我的小部件。

然后我在我的小部件中添加了一个按钮，这个按钮应该启动一个服务，所以我将以下代码添加到我的 WidgetProvider

```
@Override
public void onEnabled(Context context) {
    Log.e("ERROR", "REMOVE ME"); // TODO remove. This is for eclipse logcat recognition
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

    Intent intent = new Intent(context, RepairService.class);
    PendingIntent pi = PendingIntent.getService(context, 0, intent, 0);
    views.setOnClickPendingIntent(R.id.widget_boost, pi);
} 
```

代码肯定会被调用，但服务没有启动。我确定我可能错过了服务 PendingIntent 的实现，但我看不到什么。还有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:36:00.630

好吧，我已经设法解决了

```
public class WidgetProvider extends AppWidgetProvider {

@Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager,
      int[] appWidgetIds) {

    Log.e("ERROR", "onUpdate method called");

    final int N = appWidgetIds.length;

    // Perform this loop procedure for each App Widget that belongs to this provider
    for (int i=0; i<N; i++) {
        int appWidgetId = appWidgetIds[i];

        // Create an Intent to launch ExampleActivity
        Intent intent = new Intent(context, UpdateService.class);
        PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, 0);
        Log("Pending Intent = " + pendingIntent.toString());

        // Get the layout for the App Widget and attach an on-click listener to the button
        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        views.setOnClickPendingIntent(R.id.widge, pendingIntent);

        // Tell the AppWidgetManager to perform an update on the current App Widget
        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

}

public static class UpdateService extends Service {

    @Override
    public void onCreate() {
              .........
              .........
           }

           // Service stuff here
   }
} 
```

我不完全确定在 onEnable 中这样做有什么问题。也许有人可以解释为什么。

# oracle - 如何用 oracle 创建一个带有小字符的表？

> ID：13342165
> 
> 赞同：10
> 
> 时间：2012-11-12T10:35:41.547
> 
> 标签：oracle, quoted-identifier

如何使用 oracle 创建一个带有小字符的表格，当我创建一个带有小字符的表格时，它会将自动转换为大写字符。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-12T11:08:40.927

ANSI SQL 标准要求将（不带引号的）表名折叠为大写。

您*可以*使用带引号的标识符创建具有小写名称的表（和列）（这再次遵循 SQL 标准）：

```
CREATE TABLE "foo" 
(
   "id"          integer,
   "SomeColumn"  varchar(100)
); 
```

但是，我强烈建议您***不***要这样做。

以这种方式创建表后，您必须***始终***使用双引号，因为任何未加引号的名称（遵循 SQL 标识符的规则）将再次折叠为大写，因此与存储时的名称不匹配在系统目录中。

因此，以下语句将**不起作用**：

```
SELECT id, somecolumn FROM foo; 
```

您必须使用带引号的标识符：

```
SELECT "id", "SomeColumn" FROM "foo"; 
```

有关（引用）标识符的更多详细信息，请阅读手册中的[数据库对象命名规则](https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA)一章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:15:28.223

用引号 ( `"`) 将表名括起来。也像这样创建你的表

```
create table "t" ( a number, b varchar2(10) ); 
```

现在你的表名是`t`小写的。当您访问您的表格时，您必须始终使用引号。例如

```
select * from "t"; 
```

您可以对其他对象（列、索引等）使用相同的构造。

无论如何，SQL 是不区分大小写的，你需要一个很好的理由来使用大小写相关的对象名称。

# objective-c - NSMutableArray 没有响应 removeObjectAtIndex：

> ID：13342169
> 
> 赞同：1
> 
> 时间：2012-11-12T10:35:51.190
> 
> 标签：objective-c, nsmutablearray

我想我已经陷入了一种困惑的状态，我在做一些根本错误的事情，但我无法理解这是什么以及为什么会发生这种情况。

图 1：My 类的属性。一个 NSMutableArray。

![财产](../Images/05c0bb0946ad1919655efea85e9ea018.png)

图2：我要执行的代码块，我要删除第十一个对象。

![代码](../Images/17cfba4f0c1a0d83ecab2a3d7b279863.png)

图 3：调试控制台显示我的数组中有 30 个对象。

![控制台声明](../Images/7666cb47c23451f1b7651d3b6b3c59e6.png)

现在，我在这里，认为这将是一件容易的事。从那以后，我已经在我的源代码中的其他 NSMutableArrays 的索引中删除并替换了对象。图4来了： ![堆栈跟踪](../Images/08cd5b7d00168148bf24592224050940.png)

我相信这告诉我 NSMutableArray 没有响应 removeObjectAtIndex。

有谁知道我做错了什么？我完全糊涂了。

不，这不是家庭作业……即使有人可以相信。我愿意。

* * *

**编辑**：在解析进入 dagArray 的对象时出错。

而不是`[tempPeriod.dagArray addObject:object]`我在做一些完全不同的事情。

我正在使用不同的数组并将对象添加到该数组中，当解析器完成时，我使用`tempPeriod.dagArray = [theOtherArray copy]`了导致此错误的结果。`theOtherArray`仍然是一个`NSMutableArray`仍然让我感到困惑的问题。但我最好的猜测是`copy`NSMutableArray 会导致它无法执行这些选择器。但我可能完全错了。

感谢您对此提出一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:39:58.777

`-mutableCopy`如果您想要数组的可变副本，则需要使用。即使在可变数组上使用`-copy`，也会为您提供不可变数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:43:01.000

实际上它说不`NSArray`响应removeObjectAtIndex。这是真的。会不会是你将它定义为`NSMutableArray`，但是以错误的方式初始化它？你在哪里初始化数组，当前数组是否可能实际上是一个`NSArray`？

因为：

```
NSMutableArray *anArray = [[NSArray alloc] initWithObject:anObject]; 
```

是可能的，但是当您选择错误的选择器时会导致运行时错误。

# c# - 使用 LINQ to XML 更新子树中的 XML 属性

> ID：13342172
> 
> 赞同：2
> 
> 时间：2012-11-12T10:35:57.070
> 
> 标签：c#, xml, linq

我正在尝试一天的时间来完成这项工作。我想使用 LINQ to XML 更新我的 XML 中的货币属性

我的 XML 如下所示：

```
 <Bank>
   <Customer id="0">
     <FName>Adam</FName>
     <LName>Kruz</LName>
     <Accounts>
       <Account id="0" money="1500" />
       <Account id="1" money="6500" />
       <Account id="2" money="0" />
     </Accounts>
   </Customer>
   <Customer id="1">
     <FName>Benny</FName>
     <LName>Thoman</LName>
     <Accounts>
       <Account id="0" money="3200" />
     </Accounts>
   </Customer>
 </Bank> 
```

我一直在尝试使用此代码，但没有成功

```
 XDocument document = XDocument.Load("database.xml");

        XElement root = document.Root;

        root.Elements("Customer")
            .Where(e => e.Attribute("id").Value.Equals(customerID.ToString())).Select(e => e.Descendants("Account")
                .Where(f => f.Attribute("id").Value.Equals(this.id.ToString())).Select(f => f.Attribute("id")).First().SetValue(money.ToString()));

        document.Save("database.xml"); 
```

我收到一个错误：无法从用法中推断方法“System.Linq.Enumerable.Select(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数。

请告诉我如何编辑元素（帐户）的子树（帐户）中的属性，非常感谢:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:49:36.553

尝试这个：

```
var query =
    from c in document.Root.Elements("Customer")
    where c.Attribute("id").Value == customerID.ToString()
    from a in c.Element("Accounts").Elements("Account")
    where a.Attribute("id").Value == this.id.ToString()
    select a;

query
    .First()
    .Attribute("money")
    .SetValue(money.ToString()); 
```

# tsql - TSQL: adding a select to a left outer join

> ID：13342180
> 
> 赞同：0
> 
> 时间：2012-11-12T10:36:34.977
> 
> 标签：tsql, join, left-join

Sorry if the question is too basic, I'm teaching myself TSQL and I don't know how the following is done:

I have this query:

```
SELECT table1.name, table2.city AS city, table2.province
FROM table1 LEFT OUTER JOIN table2
ON table1.id = table2.id
WHERE table1.name NOT LIKE 'test'
ORDER BY city DESC 
```

And I want to add to it this other one:

```
SELECT table3.country 
FROM table3 LEFT JOIN table2 
ON table3.id = table2.id
WHERE table2.city = city 
```

So I can have this result:

name -- city -- province -- country

How can I do so?

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:46:40.000

You could do it as follows:

```
SELECT 
    table1.name, 
    table2.city AS city, 
    table2.province,
    table3.country
FROM 
    table1 
    LEFT OUTER JOIN table2
    ON table1.id = table2.id
    RIGHT JOIN table3
    ON table2.id = table3.id
WHERE 
    table1.name NOT LIKE 'test'
ORDER BY city DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:55:12.327

No question is too basic! I am a SQL expert busy asking very basic Java Script questions. You may as well ask directly rather than get frustrated trying to make sense of what you can find on the web, and as long as you are making an effort then everyone is happy.

What you have asked for is in fact not basic at all and could be interpreted in many ways. A few different SQL's will give you a few different results.

Firstly, this part:

```
WHERE table1.name NOT LIKE 'test' 
```

It's unusual to use LIKE without wildcard characters (%, _). If you want to exclude records that are exactly 'test' then don't use like, use this instead:

```
WHERE table1.name <> 'test' 
```

<> means 'different to'

With regards, to outer joining the next table in, firstly, are you certain you want to outer join it in?

You might be after this code, although this is not exactly what you have asked for:

```
SELECT table1.name, table2.city AS city, table2.province
FROM table1 LEFT OUTER JOIN table2
ON table1.id = table2.id
LEFT OUTER JOIN table3
ON table1.id = table3.id
WHERE table1.name NOT LIKE 'test'
ORDER BY city DESC 
```

This is of course missing this bit:

```
AND table2.city = city 
```

In this case are you trying to match the column city to the literal string 'city' or are you trying to match to the column city? if so, is the column in table1 or table2

There are slightly different ways of intepereting your question which in turn mean writing different SQL, which in turn gives you a different answer.

So have a think about this:

1.  Is there always a matching record in table2 against table1? if so you can use INNER JOIN instead of OUTER JOIN and save some complications
2.  You should draw a diagram of your tables with lines showing how they are connected.

Also if you give a less generic name for the tables it helps us visualise what you are trying to do.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T10:48:29.650

Simply use two joins in one SQL statement:

```
SELECT table1.name, table2.city AS city, table2.province, table3.country
FROM table1
LEFT OUTER JOIN table2 ON table1.id = table2.id
LEFT OUTER JOIN table3 ON table3.id = table2.countryid
WHERE table1.name NOT LIKE 'test' and table2.city = 'Cityname'
ORDER BY city DESC 
```

(Sorry guys, I didn't have time to check it, thanks for the comment. Code is revised.)

# c# - C# Windows 事件日志自定义数据

> ID：13342186
> 
> 赞同：3
> 
> 时间：2012-11-12T10:37:00.317
> 
> 标签：c#, .net, xml, event-log

我想将自定义数据作为格式化文本（XML 字符串）添加到 Windows 事件日志消息中。无论我添加什么，都会作为字符串添加并与 XML 标记一起显示。是否有推荐的方法将自定义数据添加到日志条目？典型的日志条目如下所示：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
        ...
 </System>
 <EventData>
  <Data>3031358440</Data> 
  <Data>5</Data> 
  <Data>WindowsUpdateFailure</Data> 
  <Data>Not available</Data> 
 </EventData>
</Event> 
```

我想添加这样的数据：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
        ...
 </System>
 <EventData>
  <Data>
    <ThreadID/>
    <AssignedPriority/>
  </Data>
 </EventData>
</Event> 
```

# java - Java中的Bean自省

> ID：13342199
> 
> 赞同：3
> 
> 时间：2012-11-12T10:37:30.987
> 
> 标签：java, javabeans, introspection

我正在学习Java的工作面试。他们告诉我学习 Beans 内省的概念，所以我在网上搜索并阅读了几个网站，包括下一篇文章：

*   [Java内省和反射](https://stackoverflow.com/questions/2044446/java-introspection-and-reflection)
*   [使用JavaBeans的地方？](https://stackoverflow.com/questions/1727603/places-where-javabeans-are-used)
*   [究竟什么是 Java Bean？](https://stackoverflow.com/questions/3295496/what-is-a-java-bean-exactly)
*   [Java 文档 - 反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)
*   [Java中的自省](http://www.cs.grinnell.edu/~rebelsky/Courses/CS223/2004F/Handouts/introspection.html)

据我了解： Bean 与 Java 中的任何其他对象类一样，但该类必须具有以下特性：

1.  所有属性都是私有的（使用 getter/setter）
2.  公共无参数构造函数
3.  实现可序列化。

一般事项：

4.  自省让我有可能在运行时“检查”一个对象，这样我就可以获得类属性名称、方法名称构造函数等。
5.  内省使用反射来获取类的信息。

**我还有一些问题：**

1.  为什么我需要这种机制，意思是，在什么情况下我应该使用自省而不是使用其他任何东西？
2.  bean的自省和常规的自省有什么区别吗？
3.  除了我可以使用的方法之外，它是如何工作的？

如果有人能给我他对这个主题的看法，或者给我一些有用信息的链接，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:58:15.303

我不确定他们想知道什么。
您可以使用[apache-bean-utils](http://commons.apache.org/beanutils/)等框架来查询有关 bean 结构的信息。
我手动开发了这样的代码（大错误！:)）-
我使用了基于 java bean 表示法的递归机制（即-setter 必须以“set”
开头，getter 以“is”开头表示布尔值或“get”表示所有类型）
然后您可以使用此代码来自动化某些行为 -
在我的示例中，我编写了一个解析 WSDL 的工具，并通过代码在 WS 调用和我们的应用程序实体之间创建绑定。
我们应用程序的用户提供了一个 XML 来指示如何执行映射 -
即 - 假设 WS 调用返回了一个 Person 对象，
所以 XML 定义了如何执行映射，我使用 apache-bean-utils 之类的代码来执行自省
并了解要调用的 setter 和 getter。
这与通常在 java 应用程序中所做的相反：
1\. 从 WSDL 生成 Java 客户端（即 - 使用 wsdl2java）
2\. 使用客户端代码编译应用程序。

我可以假设可以在分析器代码中使用自省 - 例如，
由于有许多框架使用 getter 和 setter ，因此这些方法的效率非常重要，
因此这是 mabye 分析器应该首先研究的东西。

随意添加更多问题

# php - 如何在php中将字符串转换为utf-8代码

> ID：13342204
> 
> 赞同：3
> 
> 时间：2012-11-12T10:37:49.907
> 
> 标签：php

我需要一个函数或一个简单的算法来帮助我将普通字符串转换为 utf-8 代码

例如：字符串：

```
hello
عربي 
```

UTF-8 代码：

```
68 65 6C 6C 6F 0A 0639 0631 0628 064A 0A 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T10:40:12.780

使用 **utf8_encode ( $data )**

查看其完整文档[http://php.net/manual/en/function.utf8-encode.php](http://php.net/manual/en/function.utf8-encode.php)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T10:42:35.293

使用`iconv`，如图：

```
$text = iconv(mb_detect_encoding($text, mb_detect_order(), true), "UTF-8", $text); 
```

这也是检测字符串当前字符集。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T10:40:00.357

尝试使用`iconv`功能[这里是描述](http://www.php.net/manual/en/function.iconv.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T10:55:55.930

如果您想将其与阿拉伯语一起使用

您可以在以下位置使用阿拉伯语 php 库：[http ://ar-php.org/](http://ar-php.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T10:44:23.310

尝试这个：

```
...
$somStr = 'Hello';
utf8_encode_deep($somStr); // Converting string to utf8
print_r($somStr);
... 
```

有关更多详细信息，`utf8_encode_deep()`请参阅[此](http://php.net/manual/en/function.utf8-encode.php)

希望它能解决这个问题。

# java - 为什么 Avalon-Framework 被关闭了？

> ID：13342205
> 
> 赞同：3
> 
> 时间：2012-11-12T10:38:03.180
> 
> 标签：java, inversion-of-control, separation-of-concerns

我已经说明了新项目的工作。并开始调查所有使用的应用程序。我发现了一个使用 avalon 项目的应用程序（avalon-framework、avalon-excalibur、avalon-repository 等）。当我发现这些项目已经关闭时，我真的很惊讶。

我对这些技术很陌生。不幸的是，我没有找到他们关闭的原因。我知道他们实现了控制反转 (IoC) 和关注点分离 (SoC) 设计模式。

有谁知道他们为什么被关闭？以及创建了哪些替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:40:43.433

我会说，由于缺乏兴趣。有很多像 avalon 这样的 DI 框架——特别是：pico/nanocontainer、guice、spring——而 spring 最终获胜并且现在使用最多。如果您没有用例，您就不会开发框架。

但是尽管如此，这些想法并没有死去，而是进入了主流（即使是 Java EE 现在也有依赖注入）

# android - 闪光灯未打开

> ID：13342210
> 
> 赞同：2
> 
> 时间：2012-11-12T10:38:33.210
> 
> 标签：android, flashlight

这是我再次发布的条形码 snanner 的源代码。我编辑了我的代码。问题是，当我运行应用程序时，闪光灯没有自动打开。我在清单文件中添加了权限，但闪光灯没有打开。请帮我解决问题在哪里？我正在使用 HTC wIldfire 的手机。

```
public final class CameraManager {

 private static final String TAG = CameraManager.class.getSimpleName();

 private static final int MIN_FRAME_WIDTH = 240;
 private static final int MIN_FRAME_HEIGHT = 240;
 private static final int MAX_FRAME_WIDTH = 480;
 private static final int MAX_FRAME_HEIGHT = 360;

 private static CameraManager cameraManager;

 static final int SDK_INT; // Later we can use Build.VERSION.SDK_INT
 static {
  int sdkInt;
  try {
 sdkInt = Integer.parseInt(Build.VERSION.SDK);
 } catch (NumberFormatException nfe) {
 // Just to be safe
 sdkInt = 10000;
 }
 SDK_INT = sdkInt;
  }

 private final Context context;
 private Camera camera;
  private Rect framingRect;
 private Rect framingRectInPreview;
 private boolean initialized;
 private boolean previewing;
  /**
 * Preview frames are delivered here, which we pass on to the registered handler.  
   Make  
 sure to
  * clear the handler so it will only receive one message.
 */
   private final PreviewCallback previewCallback;
  /** Autofocus callbacks arrive here, and are dispatched to the Handler which  
   requested them. */
   private final AutoFocusCallback autoFocusCallback;

   /**
   * Initializes this static object with the Context of the calling Activity.
  *
  * @param context The Activity which wants to use the camera.
  */
   public static void init(Context context) {
  if (cameraManager == null) {
   cameraManager = new CameraManager(context);
   }
  }

      /**
  * Gets the CameraManager singleton instance.
   *
   * @return A reference to the CameraManager singleton.
  */
 public static CameraManager get() {
  return cameraManager;
  }

 private CameraManager(Context context) {

 this.context = context;
 this.configManager = new CameraConfigurationManager(context);

 // Camera.setOneShotPreviewCallback() has a race condition in Cupcake, so we use the  
  older
  // Camera.setPreviewCallback() on 1.5 and earlier. For Donut and later, we need to   
   \     use
  // the more efficient one shot callback, as the older one can swamp the system and  
  cause it
 // to run out of memory. We can't use SDK_INT because it was introduced in the 
  Donut  
  SDK.
 //useOneShotPreviewCallback = Integer.parseInt(Build.VERSION.SDK) >  
 Build.VERSION_CODES.CUPCAKE;
  useOneShotPreviewCallback = Integer.parseInt(Build.VERSION.SDK) > 3; // 3 = Cupcake

 previewCallback = new PreviewCallback(configManager, useOneShotPreviewCallback);
 autoFocusCallback = new AutoFocusCallback();
}

/**
* Opens the camera driver and initializes the hardware parameters.
*
* @param holder The surface object which the camera will draw preview frames into.
* @throws IOException Indicates the camera driver failed to open.
 */
 public void openDriver(SurfaceHolder holder) throws IOException {
 if (camera == null) {
camera = Camera.open();
 if (camera == null) {
 throw new IOException();
 }
 camera.setPreviewDisplay(holder);

  if (!initialized) {
  initialized = true;
  configManager.initFromCameraParameters(camera);
  }
 configManager.setDesiredCameraParameters(camera);

  PreferenceManager.getDefaultSharedPreferences(context);
 //ÊÇ·ñÊ¹ÓÃÇ°µÆ

 //      if (prefs.getBoolean(PreferencesActivity.KEY_FRONT_LIGHT, false)) {
   //        FlashlightManager.enableFlashlight();
  //      }
  FlashlightManager.enableFlashlight();
   }
 }

 /**
 * Closes the camera driver if still in use.
  */
  public void closeDriver() {
  if (camera != null) {
 FlashlightManager.disableFlashlight();
 camera.release();
 camera = null;
 }
 }

  /**
   * Asks the camera hardware to begin drawing preview frames to the screen.
  */
 public void startPreview() {
  if (camera != null && !previewing) {
 camera.startPreview();
 previewing = true;
  }
  }

 /**
  * Tells the camera to stop drawing preview frames.
  */
   public void stopPreview() {
  if (camera != null && previewing) {
 if (!useOneShotPreviewCallback) {
 camera.setPreviewCallback(null);
 }
 camera.stopPreview();
 previewCallback.setHandler(null, 0);
autoFocusCallback.setHandler(null, 0);
previewing = false;
 }
  }

 /**
 * A single preview frame will be returned to the handler supplied. The data will  
 arrive as byte[]
 * in the message.obj field, with width and height encoded as message.arg1 and  
 message.arg2,
 * respectively.
 *
 * @param handler The handler to send the message to.
 * @param message The what field of the message to be sent.
*/
 public void requestPreviewFrame(Handler handler, int message) {
if (camera != null && previewing) {
previewCallback.setHandler(handler, message);
 if (useOneShotPreviewCallback) {
camera.setOneShotPreviewCallback(previewCallback);
 } else {
  camera.setPreviewCallback(previewCallback);
 }
 }
 }

/**
* Asks the camera hardware to perform an autofocus.
*
 * @param handler The Handler to notify when the autofocus completes.
 * @param message The message to deliver.
*/
  public void requestAutoFocus(Handler handler, int message) {
  if (camera != null && previewing) {
 autoFocusCallback.setHandler(handler, message);
  //Log.d(TAG, "Requesting auto-focus callback");
 camera.autoFocus(autoFocusCallback);
 }
}

/**
* Calculates the framing rect which the UI should draw to show the user where to  
  place  the
* barcode. This target helps with alignment as well as forces the user to hold the  
 device
* far enough away to ensure the image will be in focus.
 *
* @return The rectangle to draw on screen in window coordinates.
*/
 public Rect getFramingRect() {
Point screenResolution = configManager.getScreenResolution();
 if (framingRect == null) {
 if (camera == null) {
  return null;
 }
int width = screenResolution.x * 3 / 4;
 if (width < MIN_FRAME_WIDTH) {
width = MIN_FRAME_WIDTH;
} else if (width > MAX_FRAME_WIDTH) {
 width = MAX_FRAME_WIDTH;
}
  int height = screenResolution.y * 3 / 4;
 if (height < MIN_FRAME_HEIGHT) {
 height = MIN_FRAME_HEIGHT;
} else if (height > MAX_FRAME_HEIGHT) {
 height = MAX_FRAME_HEIGHT;
 }
 int leftOffset = (screenResolution.x - width) / 2;
int topOffset = (screenResolution.y - height) / 2;
 framingRect = new Rect(leftOffset, topOffset, leftOffset + width, topOffset +  
 height);
 Log.d(TAG, "Calculated framing rect: " + framingRect);
 }
  return framingRect;
}

  /**
  * Like {@link #getFramingRect} but coordinates are in terms of the preview frame,
 * not UI / screen.
 */
 public Rect getFramingRectInPreview() {
if (framingRectInPreview == null) {
 Rect rect = new Rect(getFramingRect());
Point cameraResolution = configManager.getCameraResolution();
Point screenResolution = configManager.getScreenResolution();
 rect.left = rect.left * cameraResolution.x / screenResolution.x;
 rect.right = rect.right * cameraResolution.x / screenResolution.x;
rect.top = rect.top * cameraResolution.y / screenResolution.y;
rect.bottom = rect.bottom * cameraResolution.y / screenResolution.y;
framingRectInPreview = rect;
}
  return framingRectInPreview;
  }

final class FlashlightManager {

 private static final String TAG = FlashlightManager.class.getSimpleName();

  private static final Object iHardwareService;
 private static final Method setFlashEnabledMethod;
 static {
 iHardwareService = getHardwareService();
  setFlashEnabledMethod = getSetFlashEnabledMethod(iHardwareService);
 if (iHardwareService == null) {
 Log.v(TAG, "This device does supports control of a flashlight");
  } else {
 Log.v(TAG, "This device does not support control of a flashlight");
 }
 }

  private FlashlightManager() {
  }

 private static Object getHardwareService() {
Class<?> serviceManagerClass = maybeForName("android.os.ServiceManager");
  if (serviceManagerClass == null) {
return null;
  }

 Method getServiceMethod = maybeGetMethod(serviceManagerClass, "getService",  
 String.class);
if (getServiceMethod == null) {
return null;
   }

 Object hardwareService = invoke(getServiceMethod, null, "hardware");
if (hardwareService == null) {
 return null;
}

Class<?> iHardwareServiceStubClass = maybeForName("android.os.IHardwareService$Stub");
if (iHardwareServiceStubClass == null) {
 return null;
}

 Method asInterfaceMethod = maybeGetMethod(iHardwareServiceStubClass, "asInterface",  
 IBinder.class);
 if (asInterfaceMethod == null) {
 return null;
 }

 return invoke(asInterfaceMethod, null, hardwareService);
 }

  private static Method getSetFlashEnabledMethod(Object iHardwareService) {
  if (iHardwareService == null) {
 return null;
}
  Class<?> proxyClass = iHardwareService.getClass();
 return maybeGetMethod(proxyClass, "setFlashlightEnabled", boolean.class);
 }

 private static Class<?> maybeForName(String name) {
 try {
 return Class.forName(name);
 } catch (ClassNotFoundException cnfe) {
// OK
return null;
} catch (RuntimeException re) {
 Log.w(TAG, "Unexpected error while finding class " + name, re);
 return null;
 }
 }

private static Method maybeGetMethod(Class<?> clazz, String name, Class<?>...  
argClasses) {
 try {
return clazz.getMethod(name, argClasses);
} catch (NoSuchMethodException nsme) {
// OK
return null;
} catch (RuntimeException re) {
Log.w(TAG, "Unexpected error while finding method " + name, re);
 return null;
  }
  }

 private static Object invoke(Method method, Object instance, Object... args) {
  try {
 return method.invoke(instance, args);
} catch (IllegalAccessException e) {
 Log.w(TAG, "Unexpected error while invoking " + method, e);
return null;
} catch (InvocationTargetException e) {
Log.w(TAG, "Unexpected error while invoking " + method, e.getCause());
 return null;
 } catch (RuntimeException re) {
Log.w(TAG, "Unexpected error while invoking " + method, re);
 return null;
  }
 }

 static void enableFlashlight() {
 setFlashlight(true);
 }

 static void disableFlashlight() {
 setFlashlight(false);
}

 private static void setFlashlight(boolean active) {
   if (iHardwareService != null) {
  invoke(setFlashEnabledMethod, iHardwareService, active);
 }
 }

 } 
```

* * *

```
package com.zijunlin.Zxing.Demo.camera;

 import android.content.Context;
 import android.graphics.Point;
 import android.hardware.Camera;
  import android.os.Build;
 import android.util.Log;
  import android.view.Display;
  import android.view.WindowManager;

 import java.util.regex.Pattern;

  final class CameraConfigurationManager {

  private static final String TAG = CameraConfigurationManager.class.getSimpleName();

 private static final int TEN_DESIRED_ZOOM = 27;
  private static final int DESIRED_SHARPNESS = 30;

 private static final Pattern COMMA_PATTERN = Pattern.compile(",");

 private final Context context;
 private Point screenResolution;
 private Point cameraResolution;
  private int previewFormat;
  private String previewFormatString;

  CameraConfigurationManager(Context context) {
 this.context = context;
 }

 /**
 * Reads, one time, values from the camera that are needed by the app.
 */
 void initFromCameraParameters(Camera camera) {
 Camera.Parameters parameters = camera.getParameters();
 previewFormat = parameters.getPreviewFormat();
  previewFormatString = parameters.get("preview-format");
 Log.d(TAG, "Default preview format: " + previewFormat + '/' + previewFormatString);
 WindowManager manager = (WindowManager)  
 context.getSystemService(Context.WINDOW_SERVICE);
 Display display = manager.getDefaultDisplay();
 screenResolution = new Point(display.getWidth(), display.getHeight());
  Log.d(TAG, "Screen resolution: " + screenResolution);
  cameraResolution = getCameraResolution(parameters, screenResolution);
 Log.d(TAG, "Camera resolution: " + screenResolution);
  }

  /**
 * Sets the camera up to take preview images which are used for both preview and   
 decoding.
  * We detect the preview format here so that buildLuminanceSource() can build an   
  appropriate
 * LuminanceSource subclass. In the future we may want to force YUV420SP as it's the   
    smallest,
    * and the planar Y can be used for barcode scanning without a copy in some cases.
   */
  void setDesiredCameraParameters(Camera camera) {
  Camera.Parameters parameters = camera.getParameters();
  Log.d(TAG, "Setting preview size: " + cameraResolution);
  parameters.setPreviewSize(cameraResolution.x, cameraResolution.y);
  setFlash(parameters);
  setZoom(parameters);
  //setSharpness(parameters);
  camera.setParameters(parameters);
  }

 Point getCameraResolution() {
 return cameraResolution;
  } 

 Point getScreenResolution() {
 return screenResolution;
 }

 int getPreviewFormat() {
 return previewFormat;
  }

String getPreviewFormatString() {
 return previewFormatString;
  }

  private static Point getCameraResolution(Camera.Parameters parameters, Point  
  screenResolution) {

  String previewSizeValueString = parameters.get("preview-size-values");
  // saw this on Xperia
  if (previewSizeValueString == null) {
  previewSizeValueString = parameters.get("preview-size-value");
   }

     Point cameraResolution = null;

   if (previewSizeValueString != null) {
 Log.d(TAG, "preview-size-values parameter: " + previewSizeValueString);
  cameraResolution = findBestPreviewSizeValue(previewSizeValueString,  
 screenResolution);
   }

   if (cameraResolution == null) {
 // Ensure that the camera resolution is a multiple of 8, as the screen may not be.
  cameraResolution = new Point(
   (screenResolution.x >> 3) << 3,
   (screenResolution.y >> 3) << 3);
   }

   return cameraResolution;
  }

  private static Point findBestPreviewSizeValue(CharSequence previewSizeValueString,  
 Point screenResolution) {
 int bestX = 0;
 int bestY = 0;
 int diff = Integer.MAX_VALUE;
  for (String previewSize : COMMA_PATTERN.split(previewSizeValueString)) {

  previewSize = previewSize.trim();
 int dimPosition = previewSize.indexOf('x');
 if (dimPosition < 0) {
   Log.w(TAG, "Bad preview-size: " + previewSize);
   continue;
  }

  int newX;
  int newY;
  try {
    newX = Integer.parseInt(previewSize.substring(0, dimPosition));
 newY = Integer.parseInt(previewSize.substring(dimPosition + 1));
  } catch (NumberFormatException nfe) {
 Log.w(TAG, "Bad preview-size: " + previewSize);
 continue;
   }

   int newDiff = Math.abs(newX - screenResolution.x) + Math.abs(newY -  
  screenResolution.y);
  if (newDiff == 0) {
 bestX = newX;
bestY = newY;
break;
 } else if (newDiff < diff) {
 bestX = newX;
 bestY = newY;
diff = newDiff;
  }

 }

 if (bestX > 0 && bestY > 0) {
  return new Point(bestX, bestY);
 }
  return null;
  }

  private static int findBestMotZoomValue(CharSequence stringValues, int  
   tenDesiredZoom)  {
 int tenBestValue = 0;
 for (String stringValue : COMMA_PATTERN.split(stringValues)) {
 stringValue = stringValue.trim();
  double value;
 try {
 value = Double.parseDouble(stringValue);
 } catch (NumberFormatException nfe) {
 return tenDesiredZoom;
 }
  int tenValue = (int) (10.0 * value);
  if (Math.abs(tenDesiredZoom - value) < Math.abs(tenDesiredZoom - tenBestValue)) {
  tenBestValue = tenValue;
  }
  }
    return tenBestValue;
  }

  private void setFlash(Camera.Parameters parameters) {
 // FIXME: This is a hack to turn the flash off on the Samsung Galaxy.
 // And this is a hack-hack to work around a different value on the Behold II
 // Restrict Behold II check to Cupcake, per Samsung's advice
 //if (Build.MODEL.contains("Behold II") &&
  //    CameraManager.SDK_INT == Build.VERSION_CODES.CUPCAKE) {
 if (Build.MODEL.contains("Behold II") && CameraManager.SDK_INT == 3) { // 3 = Cupcake
 parameters.set("flash-value", 1);
 } else {
 parameters.set("flash-value", 2);
 }
  // This is the standard setting to turn the flash off that all devices should honor.
 parameters.set("flash-mode", "off");
  }

 private void setZoom(Camera.Parameters parameters) {

 String zoomSupportedString = parameters.get("zoom-supported");
  if (zoomSupportedString != null && !Boolean.parseBoolean(zoomSupportedString)) {
  return;
  }

  int tenDesiredZoom = TEN_DESIRED_ZOOM;

 String maxZoomString = parameters.get("max-zoom");
 if (maxZoomString != null) {
 try {
 int tenMaxZoom = (int) (10.0 * Double.parseDouble(maxZoomString));
 if (tenDesiredZoom > tenMaxZoom) {
  tenDesiredZoom = tenMaxZoom;
 }
 } catch (NumberFormatException nfe) {
 Log.w(TAG, "Bad max-zoom: " + maxZoomString);
 }
 }

 String takingPictureZoomMaxString = parameters.get("taking-picture-zoom-max");
  if (takingPictureZoomMaxString != null) {
 try {
 int tenMaxZoom = Integer.parseInt(takingPictureZoomMaxString);
 if (tenDesiredZoom > tenMaxZoom) {
  tenDesiredZoom = tenMaxZoom;
 }
 } catch (NumberFormatException nfe) {
 Log.w(TAG, "Bad taking-picture-zoom-max: " + takingPictureZoomMaxString);
  }
 }

 String motZoomValuesString = parameters.get("mot-zoom-values");
 if (motZoomValuesString != null) {
 tenDesiredZoom = findBestMotZoomValue(motZoomValuesString, tenDesiredZoom);
 }

 String motZoomStepString = parameters.get("mot-zoom-step");
 if (motZoomStepString != null) {
   try {
 double motZoomStep = Double.parseDouble(motZoomStepString.trim());
 int tenZoomStep = (int) (10.0 * motZoomStep);
 if (tenZoomStep > 1) {
  tenDesiredZoom -= tenDesiredZoom % tenZoomStep;
  }
  } catch (NumberFormatException nfe) {
 // continue
  }
 }

 // Set zoom. This helps encourage the user to pull back.
 // Some devices like the Behold have a zoom parameter
  if (maxZoomString != null || motZoomValuesString != null) {
   parameters.set("zoom", String.valueOf(tenDesiredZoom / 10.0));
 }
  // Most devices, like the Hero, appear to expose this zoom parameter.
 // It takes on values like "27" which appears to mean 2.7x zoom
  if (takingPictureZoomMaxString != null) {
 parameters.set("taking-picture-zoom", tenDesiredZoom);
 }
 }

 /*
  private void setSharpness(Camera.Parameters parameters) {

 int desiredSharpness = DESIRED_SHARPNESS;

 String maxSharpnessString = parameters.get("sharpness-max");
 if (maxSharpnessString != null) {
  try {
 int maxSharpness = Integer.parseInt(maxSharpnessString);
  if (desiredSharpness > maxSharpness) {
  desiredSharpness = maxSharpness;
  }
  } catch (NumberFormatException nfe) {
  Log.w(TAG, "Bad sharpness-max: " + maxSharpnessString);
 }
   }

 parameters.set("sharpness", desiredSharpness);
  }
 */
  } 
```

* * *

```
<uses-permission android:name="android.permission.CAMERA"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses- 
  permission>
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
 <uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.FLASHLIGHT"/>
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T06:11:42.383

您可以在此处的示例工作代码中看到简单的手电筒操作： [https](https://bitbucket.org/hqureshi/yafa) ://bitbucket.org/hqureshi/yafa 其简单的 Android 开源手电筒应用程序。

# c++ - C++ 异常是否应该提供除 what() 之外的其他详细信息

> ID：13342211
> 
> 赞同：3
> 
> 时间：2012-11-12T10:38:36.553
> 
> 标签：c++, exception

除了 之外，我的异常类还应该提供公共领域的详细信息`what()`吗？

例如`boost::property_tree::ptree_bad_path`，考虑可能会给出一条消息：

```
"No such node (mynode.value1)" 
```

访问路径 ( `"mynode.value1"`) 的唯一方法是解析字符串。是否有反对添加额外的公共字段来承载此类信息的论点，即：

```
class ptree_bad_path : public ptree_error {
public:
  const std::string path; // <- additional detail by public field
.... 
```

这种方法有缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:44:20.297

您的异常类应包含处理错误所需的所有信息。这通常意味着用出错的地方和任何必要的上下文来标记它。将路径存储在异常类中是个好主意。

> 这种方法有缺点吗？

尽量避免让成员自己抛出，因为他们会调用 std::terminate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:41:15.727

`terminate`从理论上讲，如果您同时有两个未处理的异常，您就有可能拥有您的程序。然而，这是一种相当罕见的情况。

*   在准备异常期间抛出：很好（尽管您不会得到预期的异常）
*   在异常复制期间抛出（通常被忽略，可避免）：*崩溃*
*   放卷时投掷：**crash**
*   处理异常时抛出（`catch`）：很好（毕竟重新抛出不同的异常是很常见的）

因此，这里可避免的风险是，如果您的异常的复制构造函数可能碰巧抛出。通过将状态移到`shared_ptr`异常中包含的状态来逃避问题是微不足道的。它使副本有点“特殊”（因为它们与原件共享它们的状态），但如果它被正确记录，它不应该引起任何悲伤。

更大的风险是在堆栈展开期间。但是，它仅在析构函数抛出时才会发生。

就个人而言，我使用的例外包括：

*   一个错误代码（为了让 API 正确显示/编码，所有错误消息都映射到一个代码，它对中文/韩文/日文有帮助，真的）
*   一条日志消息，带有一些详细信息（导致问题的项目的 ID/名称，翻译另一个异常时的原始错误，有什么帮助！）
*   抛出异常的函数/文件/行
*   抛出异常的时间
*   *附加说明（在堆栈展开期间“即时”附加）*
*   完整的回溯（使用 Linux 特定功能）

这里唯一有争议的一点是*on the fly* bit，因为它可能会有效地崩溃。另一方面，我在服务器上工作，因此很容易（并且紧急）修复崩溃，并且在过去的 5 年中，我非常小心，没有导致崩溃（这种方式;)）。

请注意，此方案显然仅在您很少使用异常时才可用。如果您经常为每个任务抛出十几个异常，那么性能可能会令人无法接受。另一方面，主要编译器使用的零成本模型已经严厉惩罚了异常路径，所以......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:47:12.383

这只是我的意见，但如果您要抛出异常，您可能需要确保它有足够的信息让您知道（a）导致异常的原因，以及（b）抛出异常的位置。

您可能（希望）不会向最终用户显示异常，因此记录异常成为纯粹启用/提高可支持性的东西。因此，从开发的角度来看，您基本上希望处于尽可能多地了解发生的事情的位置。

当然你是对的，你在这里走的是一条细线。您不希望在异常处理中包含如此复杂的代码，以至于它冒着抛出自己的异常的风险！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:46:05.253

您的异常可能会携带尽可能多的信息，因为它们的捕获器已准备好（并愿意）使用。如果您的特定应用程序可以使用这些附加信息，您可以放心地编写自己的异常类。在任何情况下，所有异常类都应该继承自`std::exception`，以确保`catch`不期望自定义异常的子句能够正常工作。

另一个问题是在库中公开这些类以供第三方客户端使用。在这种情况下，您应该仔细考虑这些附加信息的好处是否超过了附加界面带来的麻烦，甚至可能根本不使用它。

编辑：正如[Pubby 所说](https://stackoverflow.com/questions/13342211/should-c-exceptions-provide-additional-details-besides-what/13342298#13342298)，你的异常类不应该抛出以避免不受欢迎的调用`std::terminate()`。一般来说，任何与异常相关的代码都不应该抛出，这包括任何类的析构函数。

# java - 通过应用程序发送短信

> ID：13342213
> 
> 赞同：0
> 
> 时间：2012-11-12T10:38:37.660
> 
> 标签：java, sms

> **可能重复：**
> [Java：是否可以从 Java 应用程序发送 SMS](https://stackoverflow.com/questions/2824694/java-is-it-possible-to-send-sms-from-a-java-application)

我需要开发一个将发送 SMS 的 Java（J2SE/桌面）应用程序。我在谷歌上搜索了很多。但除此之外没有找到任何有用的材料，它需要一些网关。但是那个网关需要购买。

有没有办法使用免费网关发送消息？请参考用于发送 SMS 的 Java API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:46:30.437

> 有没有办法使用免费网关发送消息？

我对此表示怀疑。SMS 相对昂贵，没有人可能会让您自费发送它们。

> 请参考用于发送 SMS 的 Java API。

没有用于发送 SMS 的标准 Java API ......但链接的问题有一些第 3 方解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:56:43.733

在工作中我使用了 Kannel [http://www.kannel.org/](http://www.kannel.org/)

它工作正常，但我认为您不能像 Stephen C 所说的那样免费发送短信。

# android - 从一个日期到另一个日期的 Android 倒计时

> ID：13342217
> 
> 赞同：0
> 
> 时间：2012-11-12T10:39:17.467
> 
> 标签：android

我正在尝试从开始日期倒计时到结束日期。例如，2012 年 10 月 12 日至 2012 年 10 月 14 日。

我想获取当前日期，并从该日期开始倒计时到下一个日期。

你有什么好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:49:57.380

这可能被证明是一个太不灵活的解决方案，但您可以尝试将日期转换为长值，从另一个中减去一个，然后使用 android 倒计时计时器类进行倒计时。

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
    Date a = null, b = null;
    try {
        a = sdf.parse("14-10-2012");
        b = sdf.parse("12-10-2012");
    } catch (ParseException e) {
        e.printStackTrace();
    }

    //      .getTime() does the conversion: Date --> long
    CountDownTimer cdt = new CountDownTimer(a.getTime() - b.getTime(), 1000) {

        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

        }

        public void onFinish() {
            // TODO Auto-generated method stub

        }
    }.start(); 
```

有关该类的更多信息可以在这里找到：http: [//developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

# vb.net - c#linq 到 vb 的翻译 - 使用“selectmany”语句在智能感知中重载解析失败

> ID：13342218
> 
> 赞同：3
> 
> 时间：2012-11-12T10:39:19.637
> 
> 标签：vb.net, entity-framework, linq

我已经尝试了阳光下的所有翻译服务来正确使用这种语法，但我仍然在 select 语句的第一部分（直到句号就在 groupby 关键字之前）

我试图在本地工作的在线示例中的原始 c# 语句：

```
public IEnumerable<TagGroup> GetTagGroups()
{

    var tagGroups = 
        // extract the delimited tags string and session id from all sessions
        DbSet.Select(s => new { s.Tags, s.Id })
            .ToArray() // we'll process them in memory.

            // split the "Tags" string into individual tags 
            // and flatten into {tag, id} pairs
            .SelectMany(
                s =>
                s.Tags.Split(_tagDelimiter, StringSplitOptions.RemoveEmptyEntries)
                    .Select(t => new { Tag = t, s.Id })
            )

            // group {tag, id} by tag into unique {tag, [session-id-array]}
            .GroupBy(g => g.Tag, data => data.Id)

            // project the group into TagGroup instances
            // ensuring that ids array in each array are unique
            .Select(tg => new TagGroup 
                            {
                                Tag = tg.Key, 
                                Ids = tg.Distinct().ToArray(),
                            })
            .OrderBy(tg => tg.Tag);

    return tagGroups;
} 
```

我在VB中最接近它：

```
Public Function GetTagGroups() As IEnumerable(Of TagGroup)

    ' extract the delimited tags string and session id from all sessions
    ' we'll process them in memory.
    ' split the "Tags" string into individual tags 
    ' and flatten into {tag, id} pairs

    ' group {tag, id} by tag into unique {tag, [session-id-array]}

    ' project the group into TagGroup instances
    ' ensuring that ids array in each array are unique

    Dim tagGroups = DbSet.[Select](Function(s) New With { _
        s.Tags, _
        s.Id _
    }).ToArray().SelectMany(Function(s) s.Tags.Split(_tagDelimiter, StringSplitOptions.RemoveEmptyEntries).[Select](Function(t) New With { _
        Key .Tag = t, _
        s.Id _
    })).GroupBy(Function(g) g.Tag, Function(data) data.Id).[Select](Function(tg) New With { _
        Key .Tag = tg.Key, _
        Key .Ids = tg.Distinct().ToArray() _
    }).OrderBy(Function(tg) tg.Tag)

    Return tagGroups
End Function 
```

这导致 Visual Studio 2012 intellisense 将语句的第一部分从第一行的“DbSet”到靠近底部的“.GroupBy”之前的最后一个括号用蓝色下划线。错误是“重载解析失败，因为无法使用这些参数调用可访问的 'SelectMany'”。

由于这是一个代码示例，我正在尝试转换为 vb 以在本地运行并理解并且我对 linq 的经验不足，我完全不知道如何尝试和处理这个问题。这超出了我目前的理解，所以就我所知，可能是一个简单的语法错误或从头到尾的完整哈希！

非常感谢任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:51:41.933

我现在把它放在 VS2k8 中，以及我之前提到的 VB 示例的两个简单问题：

*   前两个`New With`结构必须指定`.<field> =`AFAIK，并且
*   最后一个`New With`不应该是匿名的。

我现在还注意到这些是我需要让代码没有错误的声明。除了添加中间查询变量（顺便说一句，这意味着您可以将 C# 注释重新插入），我不记得实际上进一步更改了代码。请注意`_tagDelimiter`as a `Char()`-- C# 代码将其声明为什么？（看看`String.Split`提到`StringSplitOptions`它必须是的重载，`Char()`或者`String()`C# 隐式地改变了 VB.NET 没有的地方的类型。）

```
Class TagList
    Public Tags As String
    Public Id As String
End Class

Private DbSet As IQueryable(Of TagList)

Class TagGroup
    Public Tag As String
    Public Ids() As String
End Class

Private _tagDelimiter As Char()

Public Function GetTagGroups() As IEnumerable(Of TagGroup)

    Dim theTags = DbSet.[Select](Function(s) New With { _
        .Tags = s.Tags, _
        .Id = s.Id _
    }).ToArray()

    Dim many = theTags.SelectMany(Function(s) s.Tags.Split(_tagDelimiter, StringSplitOptions.RemoveEmptyEntries).[Select](Function(t) New With { _
        Key .Tag = t, _
        .Id = s.Id _
    }))

    Dim grouped = many.GroupBy(Function(g) g.Tag, Function(data) data.Id)

    Dim unordered = grouped.[Select](Function(tg) New TagGroup With { _
        .Tag = tg.Key, _
        .Ids = tg.Distinct().ToArray() _
    })
    Dim tagGroups = unordered.OrderBy(Function(tg) tg.Tag)

    Return tagGroups
End Function 
```

# c - 另一个winapi 文件权限C 令人头疼。为什么我的方法不起作用？

> ID：13342222
> 
> 赞同：1
> 
> 时间：2012-11-12T10:39:25.283
> 
> 标签：c, windows, winapi, file-io, acl

我真的很想知道如何正确使用 Windows api 来确定文件权限。我已经看过很多关于此的帖子，但我似乎无法正确理解。具体来说，我想检查用户是否对给定文件具有读取或写入权限。这些是我的步骤：

(1) 使用 GetUserNameEx 访问调用客户端的完全限定用户名（包括域名）；（返回 0 错误；用户名似乎使用 cout 调试消息正确打印出来）。

(2) 使用 LookupAccountName 访问用户的 SID。（我这样做了两次，第一次设置 SID 和域缓冲区大小——第一次调用返回 122 错误，第二次返回 0 错误（预期））。我假设 SID 缓冲区设置正确。

(3) 用获得的sid构建受托者：

```
 TRUSTEE t;
        PTRUSTEE tptr = &t;
        BuildTrusteeWithSid(tptr,&sid[0]); 
```

(4) 获取DACL：

```
 // following are freed up later using LocalFree (maybe I should use delete?)
 PACL ppDacl = new ACL;
 PSECURITY_DESCRIPTOR ppSecurityDescriptor = new SECURITY_DESCRIPTOR;
 std::vector<TCHAR> v(pathString.begin(), pathString.end());
 GetNamedSecurityInfo(&v[0],
                      SE_FILE_OBJECT,
                      READ_CONTROL,
                      NULL,
                      NULL,
                      &ppDacl,
                      NULL,
                      &ppSecurityDescriptor); 
```

一个简单的调用

```
 std::cout<<"ACE count: "<<ppDacl->AceCount<<std::endl; 
```

然后表示有 58 个 ACE 导致我假设 DACL 结构被正确实例化（我进一步假设有 58 个 ACE，尽管我不确定如何手动验证这一点；我真的不是 Windows 人） . 但是，在调用 GetNamedSecurityInfo 之后打印 GetLastError() 会给我一个 122（即 ERROR_INSUFFICIENT_BUFFER），所以这一步似乎出了点问题。

请注意，初始化 PACL 和 PSECURITY_DESCRIPTOR 如下：

```
 ACL dacl;
 PACL ppDacl = &dacl;
 SECURITY_DESCRIPTOR sd;
 PSECURITY_DESCRIPTO = &sd; 
```

而不是 new-ing 它们似乎没有正确填充 DACL（至少调用

```
 std::cout<<"ACE count: "<<ppDacl->AceCount<<std::endl; 
```

报告 0 而不是 58）。我不确定为什么。

(5) 最后，我尝试在给定创建的受托人和 dacl 的情况下获取文件的访问掩码：

```
 ACCESS_MASK access;
 GetEffectiveRightsFromAcl(ppDacl, tptr, &access); 
```

当我这样做时，这表明没有访问权限：

```
 ((access & GENERIC_WRITE)==GENERIC_WRITE) 
```

或者

```
 ((access & GENERIC_READ)==GENERIC_READ) 
```

我希望你们中的一个人能对此有所了解

干杯，

本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:02:18.297

调用`GetNamedSecurityInfo()`应`DACL_SECURITY_INFORMATION`设置在作为第三个参数传递的标志集中。只有第 6 个参数返回的值所引用的数据在调用返回后才有效。

逐字逐句来自[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446645%28v=vs.85%29.aspx)`GetNamedSecurityInfo()`的文档：

> ppDacl [输出，可选]
> 
> ...返回的指针只有在您设置了 DACL_SECURITY_INFORMATION 标志时才有效。

* * *

另附注：无需初始化`ppDacl`，`ppSecurityDescriptor`因为这是由`GetNamedSecurityInfo()`. 如果您动态地为这些分配内存，则会导致内存泄漏，因为调用`GetNamedSecurityInfo()`您会丢失对您分配的内容的引用。

# c++ - 功能应用程序关联到左侧

> ID：13342225
> 
> 赞同：2
> 
> 时间：2012-11-12T10:39:41.213
> 
> 标签：c++, function, syntax, operators, associativity

根据[该表](http://en.cppreference.com/w/cpp/language/operator_precedence)，功能应用程序关联到左侧。这意味着什么？当二元运算符出现多次时，关联性很重要，例如在`a - b - c`. 这与功能应用程序有什么关系？如果函数应用程序与右侧关联，它会有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:44:24.010

像`X(y)(z)`什么？可能是`(X(y))(z)`或`X((y)(z))`？（其中、和的`X`返回值是可调用的）。`X``y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:54:46.183

您误解了该表，功能应用程序关联到左侧，而不是右侧。

它在处理返回其他函数的函数时发挥作用。

这是一个重要的例子：

```
#include <iostream>

template<typename T>
T id_1(T t) {
    t(1);
    return t;
}

typedef void (*func)(int);

void nothing(int x) {}

func print(int x) {
    std::cout << x << std::endl;
    return nothing;
}

int main() {
    std::cout << "left associative:\n";
    id_1(print)(2);
    std::cout << "right associative:\n";
    id_1((print)(2));
} 
```

输出

```
left associative:
1
2
right associative:
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:58:21.603

函数调用是左关联的。换句话说，后缀运算符的优先级高于一元运算符。

# c# - 我的代码是托管的还是非托管的？

> ID：13342226
> 
> 赞同：3
> 
> 时间：2012-11-12T10:39:42.037
> 
> 标签：c#, .net, .net-assembly

我正在开发一个到目前为止 100% 管理的 .NET 库。现在我需要使用一些 win32 调用。

我只需要知道什么时候称为非托管的.NET 库？当程序集有非托管代码或程序集中的非托管代码被执行时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:45:25.570

只要您的代码在进行这些非托管 win32 调用后正确清理，那么您的库就会被管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:46:10.090

您认为您正在编写 100% 托管代码，但实际上，如果您深入研究 .NET 框架的内部，即使这也称为非托管代码。尝试使用[ILSpy](http://ilspy.net/)或[.NET Reflector](http://www.reflector.net/)来查找 DllImport 或 extern 方法调用。程序集本身是受管理的，因为 .NET 正在执行所有 JITing、安全性、垃圾收集等。到装配体中的对象。在 .NET 调用非托管函数（Win32 等）时，.NET 不再控制代码，因此这是非托管的！

学习如何“管理”非托管代码导入是一种很好的做法。您应该包装可互操作的调用，以便在可互操作的调用完成后 .NET 可以尽可能多地进行清理。

在此处查看有关如何使用平台调用的信息：

[http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)

# java - 运行 servlet 时出现 Eclipse 内部浏览器错误

> ID：13342229
> 
> 赞同：0
> 
> 时间：2012-11-12T10:39:46.653
> 
> 标签：java, eclipse, servlets

我使用在 Ubuntu 12.04 上运行的 Eclipse EE Juno 来测试简单的 servlet。因此，我在 Eclipse 中使用以下命令安装了一个 Web 工具包

```
sudo apt-get install libwebkitgtk-1.0-0 
```

当我运行 servlet 时，内部浏览器会显示我在 servlet 中使用的 html 标记。像这样（这个问题在 Firefox 中不会发生）

```
<h3>Hello from servlet!!!</h3> 
```

这是servlet的代码

```
package org.javaweb;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
* Servlet implementation class SimpleServlet
*/
@WebServlet("/SimpleServlet")
public class SimpleServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter printWriter = response.getWriter();
    printWriter.println("<h3>Hello from servlet!!!</h3>");
}

} 
```

错误在哪里？？如何纠正这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:46:06.690

尝试将内容类型设置为 HTML。

```
response.setContentType("text/html"); 
```

我猜 eclipse 内置浏览器并不总是等待 html 内容，而 firefox 或任何其他常见浏览器总是填充 content-type 如果没有给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:44:17.507

我想你必须提到正确的响应类型为 text/html。如，将其添加到您现有的代码中，它应该适合您：

```
 response.setContentType("text/html;charset=UTF-8"); 
```

与 Eclipse 的内部浏览器相比，Firefox 或 Web 浏览器通常具有足够的智能来猜测它是否是 HTML 内容并正确呈现它。

# applescript - 可以使用 Applescript 以固定顺序创建 Reminders.app 中的新项目吗？

> ID：13342231
> 
> 赞同：0
> 
> 时间：2012-11-12T10:39:47.757
> 
> 标签：applescript, reminders

我希望能够使用 AppleScript 以特定顺序将项目添加到提醒列表中。

但是，使用以下脚本，每次运行时都会以不同的顺序添加项目：

```
set my_reminders to {"item4", "item3", "item2", "item1", "item"}
tell application "Reminders"
    tell list "Reminders"
        repeat with the_name in my_reminders
            set this_reminder to make new reminder with properties {name:the_name as string}
        end repeat
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:34:19.333

似乎在创建提醒后添加一个短暂的延迟可以解决问题：

```
set my_reminders to {"item4", "item", "item2", "item1", "item3"}
tell application "Reminders"
    tell list "Reminders"
        repeat with the_name in my_reminders
            set this_reminder to make new reminder with properties {name:the_name as string}
            delay 1
        end repeat
    end tell
end tell 
```

# c# - Mono For Android MapsAndLocationDemo

> ID：13342235
> 
> 赞同：1
> 
> 时间：2012-11-12T10:40:13.757
> 
> 标签：c#, android, google-maps, xamarin.android, xamarin

我有 Mono for Android 试用版，但在 MapsAndLocation 演示中遇到了一些问题。

我启动了模拟器，但是当我选择“运行-> 不带 Debuggin 启动”时，出现以下错误：

> C:\Users\Simon\Documents\Xamarin\MapsAndLocationDemo\xamarin-monodroid-samples-d76baf3\MapsAndLocationDemo\obj\Debug\android\src\mapsandlocationdemo\MapWithOverlayActivity.java(33,33)：错误：包 com.google.android .maps 不存在

```
extends com.google.android.maps.MapActivity 
```

以及另外 20 个错误。

我需要什么来解决这种情况。我需要安装额外的软件包吗？如果是这样，它是什么，我在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:37:58.047

请确保您正在部署到以 Google API 为目标的模拟器。

为此，请在 Android 虚拟设备管理器中创建一个新模拟器，并将目标从“Android 2.2 - API Level 8”更改为 Google API，例如。“Google API (Google Inc.) - API 级别 16”。

如果您看不到任何 Google API 目标，则需要使用 Android SDK 管理器安装一个。

# google-checkout - Google Checkout 0$ 定期付款

> ID：13342236
> 
> 赞同：0
> 
> 时间：2012-11-12T10:40:16.347
> 
> 标签：google-checkout, android-pay

我们有许多客户通过 Google 处理的 Checkout 定期付款收取 0 美元。基本上，在我们为这些订单发送的 XML 中，项目 > 订阅 > 经常性项目 > 单价设置为 0（即使最大收费值是正确的）。

在客户结帐页面上下沙盒订单时，我们看到订单显示正确的金额，但后来在商家方面发现经常性费用实际上是 0。

有没有办法更新定期订阅项目的价格，以便收取正确的金额？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:48:34.210

您的客户将不得不购买新订阅，无法更新现有订阅。

# function - 如何在mathematica中定义一个抽象的奇函数？

> ID：13342237
> 
> 赞同：4
> 
> 时间：2012-11-12T10:40:16.783
> 
> 标签：function, wolfram-mathematica

我如何定义一个抽象的奇函数，比如 f[x]。

每当 f[x]+f[-x] 出现时，mathematica 将其简化为零。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:55:25.140

这可以使用 upvalues 轻松完成

```
f[x_] + f[y_] /; x == -y ^:= 0 
```

通常 Mathematica 会尝试将上述规则分配给`Plus`，这当然不起作用，因为它是受保护的。通过使用`^:=`代替，`:=`您可以将规则分配给`f`. 快速检查产生：

```
In[2]:=   f[3]+f[-3]
Out[2]:=  0 
```

编辑：但是，这仅适用于`Plus`. 使用更通用的东西可能会更好，例如：

```
f[x_?Negative] := -f[-x] 
```

现在这也适用于类似的东西

```
In[4]:=  -f[3] - f[-3]
Out[4]:= 0 
```

如果您还希望函数象征性地工作，您可以添加如下内容：

```
f[-a_] := -f[a] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:40:30.467

我不擅长这个，但是使用`TransformationFunctions`of怎么样`Simplify`？

例如，假设您有表达式`2 Sin[x] + f[x] + 3 + f[-x] + g[x] + g[-x]`并且想要简化它，假设`f[x]`是奇函数并且`g[x]`是偶函数。然后我们要一个规则说`f[x]+f[-x]->0`和一个规则`g[x]+g[-x]->2 g[x]`。

因此写

```
myRules[e_]:=e/.f[x]+f[-x]->0/.g[x]+g[-x]->2 g[x]

Simplify[2 Sin[x]+ f[x]+ 3 +f[-x]+ g[x] + g[-x],
         TransformationFunctions->{Automatic,myRules}] 
```

这给了

```
3+2 g[x]+2 Sin[x] 
```

顺便说一句，在上面，我使用`f[x]`了它真正应该是一个模式的地方`f[x_]`，所以这样的表达式`f[anything]+f[-anything]`也将变为零。因此，这需要改进以使其`myRules`更通用。现在它只适用于确切的表达式`f[x]`。我现在不确定如何改善这一点。可能需要延迟规则左右。会多想。但你明白我希望的想法。

# app-store - 如何在 Appstore 中修改语言

> ID：13342238
> 
> 赞同：0
> 
> 时间：2012-11-12T10:40:21.713
> 
> 标签：app-store

将我们的应用提交到加拿大的AppStore后，我们发现Language是“Chinese”。事实上，我们的应用程序同时是英文的，它的描述都是英文的。

我认为唯一可能关注的地方是“本地化本地开发区域”info.plist 条目。但我不确定将此条目更改为 en_US 是否有助于在 AppStore 中显示正确的语言。

相关问题：[AppStore 语言描述和“本地化原生开发区域”](https://stackoverflow.com/questions/4979236/appstore-language-description-and-localization-native-development-region)

但我无法得到答案...

# web-applications - SproutCore/Cappuccino/Vaadin：我应该选择哪一个来执行 shell 程序？

> ID：13342240
> 
> 赞同：0
> 
> 时间：2012-11-12T10:40:37.443
> 
> 标签：web-applications, vaadin, sproutcore, cappuccino

我有一个用某种语言编写的命令行工具，我喜欢在它上面构建一个 Web 界面。SproutCore 可以运行这样的程序并获取输出吗？

我也在考虑其他替代品，比如 Vaadin 或 Cappuccino（因为我来自 Mac 开发）。

（我是一名软件开发人员，我从来没有为网络开发过，我在谷歌上发现了这两个名字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:27:55.033

我觉得当您确实来自 Cocoa 编程背景时，您会对 Cappuccino 感到宾至如归。要制作界面，您将使用 Xcode4 中的嵌入式界面生成器。

此外，由于您不想学习任何 HTML/CSS 来做到这一点，而且我假设您也不想做 Java，您可以看看它。

卡布奇诺咖啡的价格为 0.9.6，但它已经准备好生产一段时间了。我认为当它是 0.8 时它已经准备好了。

卡布奇诺有很多框架和类别，谷歌小组真的很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:59:00.420

Vaadin 绝对可以做到这一点。

SproutCore 和 Cappucino 都是用于开发 UI 的浏览器端框架，并且没有用于运行命令的服务器端部分——因此您可能还需要在服务器上使用不同的框架。

**但是**：对于看似简单的任务，所有这些框架似乎都是一个巨大的矫枉过正。您希望开发的用户界面有多复杂？它有多“互动”？它需要多少维护/开发？

# javascript - Javascript - 依赖于其他对象的对象

> ID：13342242
> 
> 赞同：0
> 
> 时间：2012-11-12T10:40:45.967
> 
> 标签：javascript, object

```
var config = {
  xxx : 'foo'
}

var env = {
 foo : {

 },
 bar : {

}
} 
```

如何使用对象值从另一个对象中检索值？

像：

```
env.config.xxx? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:44:57.483

```
var object1 = { value : 'hello' }
var object2 = { o : object1 }

alert(object2.o.value); 
```

​</p>

# javascript - 在 html url 中添加 javascript 日期时间

> ID：13342243
> 
> 赞同：0
> 
> 时间：2012-11-12T10:40:51.630
> 
> 标签：javascript, html

对于缓存问题，我想使用 url 发送当前日期时间，但是使用以下代码，当前时间戳未显示在 url 中。

```
<script>var d=new Date();</script>
<li><a href="/controllername?t="+d.getTime()+"&name=.... // etc 
```

如何在 url 中正确添加 javascript 数据时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:48:16.510

除了使用内联 javascript，更好的方法是在 DOM 中识别您的元素，然后简单地设置它的`href`属性，如下所示：

*html*

```
<ul>
    <li><a id="timeLink" href="#">​​​​​​​​​​​​​​​​​​Time Link</a></li>
</ul>​​​​​​ 
```

*javascript*

```
var d=new Date();
var timeLink = document.getElementById("timeLink");

timeLink.setAttribute("href","/controllername?t="+d.getTime()); 
```

像往常一样，使用`jQuery`可以简化很多：

```
$(document).ready(function(){
    var d = new Date();
    $("#timeLink").attr("href","/controllername?t="+d.getTime());
});​ 
```

这是一个功能[小提琴](http://jsfiddle.net/dU6xH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:48:59.737

使用`new Date().getTime();`并将其附加到链接

```
<a id="link" href="/controllername?t="+d.getTime()+"&name=.... // etc 
```

通过抓取`link`元素并附加时间戳：

```
var link = ​document.getElementById('link');​​
var now = new Date().getTime();
link.setAttribute("href", "/controllername?t=" + now); 
```

由于您想在单击链接时添加**当前**时间戳，因此我会将上述代码附加到 的`onclick`函数中`href`，因此当您单击链接时，实际时间戳将附加到 url。请参阅示例[http://jsfiddle.net/GBBdc/](http://jsfiddle.net/GBBdc/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:50:16.057

尝试这个：

```
<a href="#" onClick="this.href='/controllername?t=' + (new Date().getTime());">click me</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:47:35.440

由于您使用 ASP，您可以这样定义您的脚本。你可以做任何你喜欢的格式 (.ToString("hh:mm:ss") ) 例如

```
<script>        var d = '<%=DateTime.Now.Ticks %>';</script> 
```

通过这种方式，您可以拥有任何格式并以任何您喜欢的方式在后端使用它，始终确保您拥有正确的格式，与可能采用本地化格式的客户端字符串相反

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:48:12.910

如果你不在里面，你不能使用 d 对象`<Script>`

做类似的事情：

```
<script>
var d=new Date();
$("#mylink").attr("href","...." + d.getTime() + "..");

</script>

<a id="mylink"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T11:14:08.087

时间每秒钟、毫秒等都会发生变化，因此您需要使用 url 发送最新的时间值：

```
<a href="javascript:sendRequest('/controllername?t=');">Send Request</a> 
```

*Javascript：*

```
function sendRequest(oldUrl){
    var d = new Date();
    var newUrl = oldUrl + d.getTime();
    window.location = newUrl;
} 
```

这是它的**[DEMO](http://jsfiddle.net/JMhWJ/)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T11:18:39.967

很简单，只需在你的脚本中写这个

var d = '';

# ember.js - 如何使用 ember-data 手动将对象状态设置为清理（保存）

> ID：13342250
> 
> 赞同：24
> 
> 时间：2012-11-12T10:41:16.177
> 
> 标签：ember.js, ember-data

## 解释：

我正在为我的一个项目使用 ember-data，我有一个问题围绕着弄脏对象然后故意将其状态设置为再次清理的可能性 - 而不提交更改。场景是这样的：

假设我通过 获取了一个对象`banana = App.Fruit.find('banana');`，它的描述为“黄色水果！”。使用 XHR 长轮询（或 WebSockets），我可能会收到对象的更新版本，因为另一个用户已将描述更改为“美味的黄色水果！” 在我获取原始对象*后*的任何给定时间点。

然后，我想做的是更新对象以反映新收到的数据。为此，我尝试了不同的方法：

*   我试过打电话`App.Store.load(App.Fruit, new_data);`。首先，这种方法不起作用，其次，这不是我真正想要的。我本可以自己对对象进行未提交的更改，在这种情况下，不希望仅丢弃这些更改（假设`load()`调用会覆盖它们）。

*   我尝试循环遍历新数据，调用`.set()`- 像这样：`banana.set('description', new_data.description);`- 为了用新数据更新对象属性（如果适用=不脏）。这有效，但它使对象处于肮脏状态。

为了使对象再次清洁/更新 - 并且**不让**适配器提交更改！- 我查看了物体经过的状态。这些是（至少）：

*   步骤 1：最初，对象处于`rootState.loaded.saved`状态。
*   第 2 步：调用`.set()`属性将其推送到`rootState.loaded.updated.uncommitted`状态。
*   第 3 步：调用`App.store.commit();`将对象返回到`rootState.loaded.saved`状态。

因此，我尝试`saved`在第 2 步之后手动设置对象状态，如下所示`banana.get('stateManager').goToState('saved');`：

但是，这不起作用。下次存储出于任何其他原因提交时，此操作会产生*inFlightDirtyReasons is undefined*错误。

## 问题：

我的问题是：如何手动将脏对象的状态再次更改为干净（已保存）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-28T14:48:58.333

**Ember Data 1.0.0-beta.7 的**解决方案：

```
// changing to loaded.updated.inFlight, which has "didCommit" 
record.send('willCommit'); 
// clear array of changed (dirty) model attributes
record.set('_attributes', {});
// changing to loaded.saved (hooks didCommit event in "inFlight" state)
record.send('didCommit'); 
```

我搜索了 Ember-data 的源代码，发现loaded.saved 状态有一个设置函数，可以在设置“已保存”状态之前检查模型是否干净。如果它不干净，则它拒绝更改状态的请求并返回到loaded.updated.uncommitted。

所以你必须清理**model._attributes**数组，它保留属性名称，Ember 会让你手动更改状态。

我知道这不是很好的解决方案，因为需要设置模型的私有属性，但我还没有找到任何其他解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T00:11:21.313

查看 ember-data 未提交状态有一个“becameClean”事件，因此将记录设置为loaded.saved。

这应该可以解决问题

```
record.get('stateManager').send('becameClean'); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-22T12:01:58.043

**Ember Data 2.6.1**解决方案

 **```
record.send('pushedData'); 
```

将脏记录设置为已加载并保存

[https://github.com/emberjs/data/blob/fec260a38c3f7227ffe17a3af09973ce2718acca/addon/-private/system/model/states.js#L250](https://github.com/emberjs/data/blob/fec260a38c3f7227ffe17a3af09973ce2718acca/addon/-private/system/model/states.js#L250)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-28T16:02:35.357

这是对@Kamil-j 解决方案的更新。

对于我目前使用的 Ember Data 2.0，我必须执行以下操作：

```
record._internalModel.send('willCommit'); 
record._internalModel._attributes = {};
record._internalModel.send('didCommit'); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-08T16:15:23.863

从 1.0.0.rc6.2 开始......

这会将模型移动到已保存模型的状态。

```
record.get('stateManager').transitionTo('loaded.saved') 
```

这会将模型移动到尚未提交的新模型的状态。想想新的肮脏模型。

```
record.get('stateManager').transitionTo('loaded.created.uncommitted') 
```

这会将模型移动到已更新的旧模型的状态，想想旧的脏模型：

```
record.get('stateManager').transitionTo('loaded.updated') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-15T10:43:48.200

作为`ember-data` `1.0.0-beta.12:`

```
record.transitionTo('loaded.saved'); 
```

似乎**`record.get('stateManager')`**不再需要了。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-10-15T11:59:59.347

这似乎适用于 Ember Data 1.0.0-beta.10：

```
record.set('currentState.stateName', 'root.loaded.saved');
record.adapterWillCommit();
record.adapterDidCommit();
record.set('currentState.isDirty', false); 
```

不确定是否需要所有这些行，但只是遵循其他人在此之前所做的事情。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-12T22:48:25.140

**余烬 2.9.1**

```
record.set('currentState.isDirty', false); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-15T08:33:54.647

**在 Ember Data 2.9 上测试**

pushData 操作是可行的方法，但除此之外，还需要重置“originalValues”。

```
Ember.assign(record.data, record._internalModel._attributes);
Ember.assign(record._internalModel._data, record._internalModel._attributes);
record.send('pushedData'); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-02T17:28:22.650

看起来对于较新的版本，这里提到的所有内容都被破坏了。

这对我使用***ember-data 1.0.0.beta4 有效：***

```
record.adapterWillCommit();
record.adapterDidCommit(); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-21T20:15:06.187

使用 Ember Data 1.0.0-beta.18 时对我有用的另一种方法：

`record.rollback()`

这反转了脏属性并将记录返回到干净状态。

似乎这可能已经被弃用了`record.rollbackAttributes`： http: [//emberjs.com/api/data/classes/DS.Model.html#method_rollbackAttributes](http://emberjs.com/api/data/classes/DS.Model.html#method_rollbackAttributes)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-15T17:46:56.293

我在**Ember 数据 1.13**上工作，所以我使用了以下解决方案（这似乎是@Martin Malinda 提供的一个和@Serge 提供的另一个之间的混合）：

```
// Ensure you have the changes inside the record
Object.assign(record.data, record._internalModel._attributes);
Object.assign(record._internalModel._data,record._internalModel._attributes);

// Using the DS.State you can first simulate the record is going to be saved
record.get('_internalModel').send('willCommit');

// Cleaning the prevous dirty attributes
record.get('_internalModel')._attributes = {};

// Mark the record as saved (root.loaded.created.uncommitted) even if it isn't for real
record.get('_internalModel').send('didCommit'); 
```

这样，如果我们将`rollbackAttributes()`在此记录上进一步调用，如果我们将有一些脏属性，则记录将重置为最后一个状态（而不是具有原始属性），这正是我在使用中寻找的案子。

如果我们没有任何脏属性，则什么都不会改变，我们将使用此代码保留最后设置的属性，而不会将它们回滚到原始属性。希望能帮助到你。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-08-28T18:34:57.850

**在 Ember Data 3.8.0 上测试**

只是对 Martin Malinda 的 [回答](https://stackoverflow.com/a/40605235/5981205)的更新：

```
// Clear changed attributes list 
record._internalModel._recordData._attributes = {};

// Trigger transition to 'loaded.saved' state
record.send('pushedData'); 
```

在我的情况下，我还需要覆盖序列化程序的`normalize`方法。**

# ruby - 具有结构转换的红宝石数组元素总和

> ID：13342251
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:41:26.653
> 
> 标签：ruby, arrays, hash

我有

```
{
  3=>[
    {63=>[5, 0, 1, 0]}, 
    {64=>[0, 0, 0, 0]},
    {65=>[0, 1, 2, 2]}
  ],
  1=>[
     {31=>[2, 0, 0, 0]},
     {32=>[0, 0, 3, 0]}
  ]
} 
```

我需要转换成

```
{ 3 => [5,1,3,2], 1 => [2,0,3,0] } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:55:31.363

```
h= {
  3=>[
    {63=>[5, 0, 1, 0]},
    {64=>[0, 0, 0, 0]},
    {65=>[0, 1, 2, 2]}
  ],
  1=>[
     {31=>[2, 0, 0, 0]},
     {32=>[0, 0, 3, 0]}
  ]
}

p h.map{ |k, v| { k=> v.map(&:values).flatten(1).transpose.map{ |r| r.reduce(:+) } } }

# => [{3=>[5, 1, 3, 2]}, {1=>[2, 0, 3, 0]}] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:49:42.937

这没什么难的，你只需要一点关注。

```
a = {
  3=>[
    {63=>[5, 0, 1, 0]}, 
    {64=>[0, 0, 0, 0]},
    {65=>[0, 1, 2, 2]}
  ],
  1=>[
     {31=>[2, 0, 0, 0]},
     {32=>[0, 0, 3, 0]}
  ]
}

b = a.each_with_object({}) do |(k, v), memo|
  res = []
  v.each do |h|
    h.each do |_, v2|
      v2.each_with_index do |el, idx|
        res[idx] ||= 0
        res[idx] += el
      end
    end
  end

  memo[k] = res
end

b # => {3=>[5, 1, 3, 2], 1=>[2, 0, 3, 0]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T17:47:58.267

这是一些可读的变量名称和基本解释。

```
a = {
  3=>[
    {63=>[5, 0, 1, 0]}, 
    {64=>[0, 0, 0, 0]},
    {65=>[0, 1, 2, 2]}
  ],
  1=>[
     {31=>[2, 0, 0, 0]},
     {32=>[0, 0, 3, 0]}
  ]
}

b = a.each_with_object({}) do |(key, sub_hashes), result|
  # Get the subarray for each nested hash (Ignore keys on the nested hashes)
  # Also flattening while mapping to get appropriate array of arrays
  value = sub_hashes.flat_map(&:values).
  # Transpose each row into a column 
  # e.g. [[5,0,1,0], [0,0,0,0], [0,1,2,2]] becomes [[5,0,0], [0,0,1], [1,0,2], [0,0,2]]
  transpose.
  # Sum each column
  # e.g. [1,0,2] = 1 + 0 + 2 = 3
  map { |column| column.reduce(0, :+) }

  # Update results set (Could also get rid of intermediate variable 'value' if you wish)
  result[key] = value
end

puts b # => {3=>[5, 1, 3, 2], 1=>[2, 0, 3, 0]}
puts b == {3 => [5,1,3,2], 1=>[2,0,3,0]} 
```

**编辑：现在使用 flat_map！**

# hadoop - 停止映射操作并稍后重试

> ID：13342252
> 
> 赞同：0
> 
> 时间：2012-11-12T10:41:28.683
> 
> 标签：hadoop, hdfs

我正在编写一个 Hadoop 应用程序来计算地理数据的切片（如谷歌地图）。当我执行 Map 任务时，我想检查所需的数据是否在 dfs 上可用。如果不是，则应稍后执行该映射。我以为我可以将 Map 任务设置为失败，以便 hadoop 稍后自动重新执行它。但是，我似乎无法找到如何做到这一点。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:25:03.953

只有当 HDFS 中有数据需要处理时，才会启动 Map 任务。无需明确检查映射器代码中数据的可用性。

在 FileInputFormat 的情况下，作业中映射任务的数量等于输入拆分的数量或要处理的块的数量。

建议阅读[Hadoop - The Definitive Guide](http://shop.oreilly.com/product/0636920021773.do)中的相应 MapReduce 章节，以获得更清晰的信息。

# ios - 有没有办法给restkit提供虚拟输入？

> ID：13342253
> 
> 赞同：1
> 
> 时间：2012-11-12T10:41:31.847
> 
> 标签：ios, restkit

我对 Restkit 很陌生。我知道我的反应会是怎样的平静。它还没有准备好从服务器端获取。有没有办法直接给 restkit 虚拟输入？我们可以将`json`文本文件作为输入提供给`NSUrlConnection`，同样在这里如何做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:44:39.153

我已经能够做到这一点

```
- (RKObjectMappingResult*)mapResponseWithMappingProvider:(RKObjectMappingProvider*)mappingProvider toObject:(id)targetObject error:(NSError**)error { 
```

在 RKObjectLoader.m

我可以选择读取一个静态 json 文本文件并替换 bodyAsString。如果你看

```
[self.URL description] 
```

您可以扫描 URL，并可能根据请求 url 读取测试文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:01:41.287

如何运行一个简单的 Web 服务器，它会以 JSON 格式返回您想要的任何输出？例如，当我需要为将使用 RestKit 的应用程序进行原型设计时，我使用 sinatra Web 框架（几行代码）创建一个简单的 ruby​​ 应用程序并在本地启动它，并将基于 RestKit 的应用程序指向 Web 应用程序（http:// www.sinatrarb.com)

# bash - Bash命令删除超过半天的所有内容

> ID：13342260
> 
> 赞同：1
> 
> 时间：2012-11-12T10:42:03.470
> 
> 标签：bash

我有一个简单的 bash 脚本，每天晚上在午夜运行，它会创建一个备份或文件，并将它们作为 .tar.gz 存储在我的 Dropbox 中。然而，在这发生之前，我需要脚本来删除前一天晚上的备份。

为此，我目前正在运行以下命令：

`find ~/Dropbox/Backups/casper/* -mtime +0.5 -exec rm {} \;`

在我看来，应该删除半天以上的任何内容 - 但它似乎不起作用（它保留前几个晚上的备份，但在此之前删除任何内容）

有人可以指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:52:45.873

从手册页`find`：

```
-mtime n
          File's data was last modified n*24 hours ago.  See the comments for -atime to understand how rounding  affects  the
          interpretation of file modification times.

-atime n
          File  was  last  accessed  n*24  hours  ago.   When find figures out how many 24-hour periods ago the file was last
          accessed, any fractional part is ignored, so to match -atime +1, a file has to have been accessed at least two days
          ago. 
```

从这里我们可以看到 0.5 被丢弃了，那么 1 day ago 是必需的。您可能想`-mmin`改用。

例如（来自 babah）：

```
# 720 is 60 times 12
find ~/Dropbox/Backups/casper/* -mmin 720 -print -exec rm {} \; 
```

# c# - 将文本文件写入子文件夹

> ID：13342263
> 
> 赞同：1
> 
> 时间：2012-11-12T10:42:28.090
> 
> 标签：c#, winforms, filepath, streamwriter

我正在尝试将文本文件写入：`C:\Test folder\output\`，但没有放入`C:\`。

IE

这就是我目前拥有的，目前有效，但`C:\`一开始就有。

```
StreamWriter sw = new StreamWriter(@"C:\Test folder\output\test.txt"); 
```

我真的很想将文件写入输出文件夹，但不必`C:\`在前面。

我尝试了以下方法，但我的程序只是挂起（不写出文件）：

```
(@"\\Test folder\output\test.txt");

(@".\Test folder\output\test.txt");

("//Test folder//output//test.txt");

("./Test folder//output//test.txt"); 
```

无论如何我可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:12:02.387

感谢您的帮助。

我的一位同事也参与进来并提供了帮助，但@Kami 也提供了很多帮助。

它现在正在工作，当我有：

```
string path = string.Concat(Environment.CurrentDirectory, @"\Output\test.txt"); 
```

正如他所说：“这`CurrentDirectory`是程序运行的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:53:36.420

我了解您希望将数据写入指定文件夹。第一种方法是在代码中或通过配置指定文件夹。

如果您需要写入特定驱动器或当前驱动器，您可以执行以下操作

```
string driveLetter = Path.GetPathRoot(Environment.CurrentDirectory);
string path = diveLetter + @"Test folder\output\test.txt";
StreamWriter sw = new StreamWriter(path); 
```

如果目录需要相对于当前应用程序目录，则用户`AppDomain.CurrentDomain.BaseDirectory`获取当前目录并使用`../`组合导航到所需的文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T11:02:34.207

一种常见的技术是使目录相对于您的 exe 的运行时目录，例如，一个子目录，如下所示：

```
string exeRuntimeDirectory = 
    System.IO.Path.GetDirectoryName(
        System.Reflection.Assembly.GetExecutingAssembly().Location);

string subDirectory = 
    System.IO.Path.Combine(exeRuntimeDirectory, "Output");
if (!System.IO.Directory.Exists(subDirectory))
{
    // Output directory does not exist, so create it.
    System.IO.Directory.CreateDirectory(subDirectory);
} 
```

这意味着无论将 exe 安装到何处，它都会创建一个“输出”子目录，然后可以将文件写入该子目录。

它还具有将 exe 及其输出文件保存在一个位置的优点，而不是分散在各处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T11:03:58.623

您可以使用`System.IO.Path.GetDirectoryName`来获取正在运行的应用程序的目录，然后您可以将路径的其余部分添加到此目录中。

我没有清楚地从这个问题中得到你想要什么，希望这能得到它..

# c# - 信息oracle版本c#

> ID：13342265
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:42:44.110
> 
> 标签：c#, oracle

我在机器上安装了 oracle（一个或多个）。我想知道如何获取有关 oracle 版本的信息，以及它是客户端还是服务器等。我不能使用 oracle 的名称，因为它可以由用户等更改。我想使用 bin 文件夹中的文件执行它们并使用输出中的信息。有人可以帮助我并指导我吗？多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:47:32.627

select * from v$version where banner like 'Oracle%';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:49:25.483

```
SELECT banner FROM v$version WHERE banner LIKE 'Oracle%'; 
```

这应该给出版本、版本和位数。

来自[http://pentestmonkey.net/cheat-sheet/sql-injection/oracle-sql-injection-cheat-sheet](http://pentestmonkey.net/cheat-sheet/sql-injection/oracle-sql-injection-cheat-sheet)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:17:41.733

如果您引用的是二进制文件而不是数据库（可能不存在），请检查 $ORACLE_home/inventory/response。应该有一个像`oracle.something.rsp`. 某些东西将描述安装，例如：（ `oracle.client_Runtime.rsp`如果您安装了客户端 - 运行时选项）或者`oracle.server_EE.rsp`它是服务器企业构建。在该文件中为版本grep out TOPLEVEL。例如在服务器企业构建上：

```
$ cat oracle.server_EE.rsp | grep TOPLEVEL | grep -v "#"
TOPLEVEL_COMPONENT={"oracle.server","11.2.0.1.0"}
so its a server installation (EE) = 11.2.0.1.0. 
```

# php - html php javascript 表单弹出

> ID：13342266
> 
> 赞同：0
> 
> 时间：2012-11-12T10:42:47.857
> 
> 标签：php, javascript, forms, popup

为这个模棱两可的标题道歉，它只是表明我对这个标题有多么困惑。

```
<a href"page.php?article_id=123&&img_id=img1">change image</a> 
```

上面的链接在表单中，应该允许用户更改文章上的图像。功能的 php 方面是排序的 - 上传图像，更改图像等，但这将需要提交主表单，这对于初始上传来说很好 - 对于编辑来说不是那么多。

当用户单击“更改图像”链接时，理想情况下，我希望以不同的形式单独处理该特定请求，然后更新父页面。我想用一个理想的javascript新窗口弹出窗口来做这件事，除了我不知道如何将`article_id`以及传递`img_id`给新的弹出页面，但最重要的是......这是最有效的方式现在这样做？

如果没有，我该如何执行这项任务？我曾想过 ajax、jquery ......但通过`article_id`and的同样问题`img_id`仍然限制了我。

我希望所有这些都是有道理的，并在此先感谢

ps：一篇文章可以有多张图片，文章id是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:48:53.217

ajax 对我来说听起来不错。可能你尝试这样的事情（jquery）？！

```
$.ajax({
  type: "POST",
  url: "page.php",
  data: { article_id: 123, images: { i1: "img1", i2: "img2" } }
}).done(function( msg ) {
  alert( "done: " + msg );
}); 
```

更多信息和示例：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:52:59.047

为什么你不能收到 article_id 和 img_id？

如果您使用：

```
<a href"#" onclick="window.open('page.php?article_id=123&&img_id=img1', 'window1');">edit</a> 
```

你可以在 $_GET 中获取 article_id 和 img_id

但是，这是完成此任务的老式方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:50:37.880

检查一下： http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/) - jQuery 是先决条件，但插件允许您通过 ajax 发送表单元素，包括使用简单 API 的文件字段，并为您完成所有繁重的工作。

# awk - awk 如何区分参数和输入文件？

> ID：13342276
> 
> 赞同：0
> 
> 时间：2012-11-12T10:43:08.020
> 
> 标签：awk, sh

这是我的 shell 脚本，它从标准输入接收一个字符串作为用户的输入。

```
#!bin/sh
printf "Enter your query\n"

read query
cmd=`echo $query | cut -f 1 -d " "`
input_file=`echo $query | cut -f 2 -d " "`
printf $input_file

if [ $input_file = "" ]
then
    printf "No input file specified\n"
    exit
fi
if [ $cmd = "summary" ]
then
    awk -f summary.awk $input_file $query
fi 
```

假设他进入

```
summary a.txt /o foo.txt 
```

现在`cmd`变量将取值`summary`并将`input_file`取`a.txt`. 不是吗？

我希望 summary.awk`$input_file`根据`$query`.

我的理解如下：

1.  传递的第一个命令行参数被视为输入文件。eg : `awk 'code' file arg1 arg2 arg3` only`file`被视为输入文件

2.  如果输入文件是通过管道传输的，它不会将任何参数视为输入文件。例如：`cat file | awk 'code' arg1 arg2 arg3` `arg1`不被视为输入文件。

我对吗？

**问题是** 我明白`awk: cannot open summary (No such file or directory)` 为什么它试图打开`summary`？它是 之后的下一个词`$input_file`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:02:42.160

如果没有`-f`选项，则将第一个非选项参数视为脚本，其余参数为输入文件。如果有`-f`选项，则脚本来自该文件，其余为输入文件。

当且仅当没有输入文件参数时，它才会从标准输入读取输入。这意味着如果您通过管道连接到 awk 并为其提供文件名参数，它将忽略管道。

这与大多数 Unix 文件处理命令相同。

试试这个：

```
awk -f summary.awk -v query="$query" "$input_file" 
```

这会将 awk 变量设置`query`为查询的内容。

# java - 如何将 thenReturn 用于 Class？

> ID：13342277
> 
> 赞同：2
> 
> 时间：2012-11-12T10:43:14.133
> 
> 标签：java, mockito, stub

这是一个非常新手的问题，但我不知道如何解决这个问题。

我必须模拟一个方法来返回这样的类。

```
public Class<? extends SomeClass> getAClass(); 
```

如果我做这样的事情

```
when(this.someInstance.getAClass())
    .thenReturn(SomeClassThatExtendsSomeClass.class); 
```

我得到编译错误。

```
The method thenReturn(Class<capture#1-of ? extends SomeClass>) in the type OngoingStubbing<Class<capture#1-of ? extends SomeClass>> is not applicable for the arguments (Class<SomeClassThatExtendsSomeClass>) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:48:18.057

如果可以将方法声明更改为上面@Bohemian 建议的内容，

```
public <T extends SomeClass> Class<T> getAClass(); 
```

然后你可以写你的模拟语句如下：

```
when(this.someInstance.<SomeClassThatExtendsSomeClass>getAClass())
     .thenReturn(SomeClassThatExtendsSomeClass.class); 
```

否则，应该使用 doReturn 语义，如下所示：

```
Mockito
    .doReturn(SomeClassThatExtendsSomeClass.class)
    .when(this.someInstance.<SomeClassThatExtendsSomeClass>getAClass()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:14:57.550

如果您不能更改方法声明以便它可以使用，`thenReturn`那么您可以使用`thenAnswer`：

```
when(this.someInstance.getAClass()).thenAnswer(new Answer<Class<? extends SomeClass>>() {
            @Override
            public Class<? extends SomeClass> answer(InvocationOnMock invocation) throws Throwable {
                return SomeClassThatExtendsSomeClass.class;
            }
}); 
```

`Answer`虽然仅执行一个返回固定值的实现并不理想，但这应该适用于您的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:30:41.570

尝试输入方法：

```
public <T extends SomeClass> Class<T> getAClass();

when(this.someInstance.getAClass())
    .thenReturn(SomeClassThatExtendsSomeClass.class); 
```

# objective-c - 另一个自定义 UIView 子类

> ID：13342286
> 
> 赞同：0
> 
> 时间：2012-11-12T10:43:47.527
> 
> 标签：objective-c, ios, uiview, uiimageview, custom-view

我想通过子类化来创建一个自定义类，`UIView`如下所示：
![我的目标](../Images/17e330ee9dc79a5b77b5828d720957d1.png)

哦，文字说body view应该是80px高，它是50px。
但我似乎无法做到这一点。我有这样的类头准备：

```
#import <UIKit/UIKit.h>

@interface MessageView : UIView

@property (strong, nonatomic)UIImage *backgroundImage;
@property (strong, nonatomic)UITextView *messageView;
@property (strong, nonatomic)UILabel *titleLabel;

- (id)initWithBackgroundImage:(NSString*)background;

- (void)setTitle:(NSString*)titleMessage;
- (void)setBody:(NSString*)bodyMessage;

@end 
```

现在我将通过调用`initWithBackgroundImage`传递背景图像文件名的位置来创建这些视图。该示例显示了这些图像之一。如何实现 init 方法，以便 init 将创建一个类似于示例的主体，但文本将为空？

我对 init 方法的徒劳尝试是这样的：

```
- (id)initWithBackgroundImage:(NSString*)background
{
    self = [super init];//[super initWithFrame:CGRectMake(0, 0, 270, 100)];
    if (self)
    {
        backgroundImage = [[UIImage imageNamed:background] retain];
        messageView = [[UITextView alloc] initWithFrame:CGRectMake(10, 40, 250, 50)];
        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 250, 20)];
    }
    return self;
} 
```

但是什么也没发生。完成后，我将通过 setter 方法设置文本。我想通过`setCenter(x, y)`. 我希望班级具有“固定”的宽度和高度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:52:57.500

**编辑：**

```
 - (id)initWithBackgroundImage:(NSString*)background
    {
        self = [super init];//[super initWithFrame:CGRectMake(0, 0, 270, 100)];
        if (self)
        {
            UIImageView *bg  = [[UIImageView alloc] initWithImage:[UIImage imageNamed:background]];      
            messageView = [[UITextView alloc] initWithFrame:CGRectMake(10, 40, 250, 50)];
            titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 250, 20)];
            [self addSubview:bg];
            [bg release];
            [self addSubview:messageView];
            [messageView release];
            [self addSubview:titleLabel];
            [titleLabel release];
        }
        return self;
} 
```

# stored-procedures - Sybase AseCommand 执行 SQL 字符串

> ID：13342289
> 
> 赞同：1
> 
> 时间：2012-11-12T10:43:56.240
> 
> 标签：stored-procedures, ado.net, execute, dynamic-sql, sap-ase

我在 Sybase AdoNet 驱动程序中发现了一个有趣的东西。我无法用它正确执行动态 sql 语句。

我有一个非常小的存储过程：

```
CREATE PROCEDURE
    GetCustomerByName
    @customerFirstName nvarchar(50),
    @customerLastName nvarchar(50),
    @intParameter int AS
    /* Adaptive Server has expanded all '*' elements in the following statement */ 
    SELECT
        Customer.Id,
        Customer.FirstName,
        Customer.LastName
    FROM
        Customer
    WHERE
        FirstName = @customerFirstName
        AND LastName = @customerLastName 
```

我想针对这个存储过程执行动态 sql 语句：

```
using (var aseConnection = new AseConnection(SybaseConnectionString))
using (var aseCommand = aseConnection.CreateCommand())
{
    aseConnection.Open();

    aseCommand.CommandText = @"
        execute GetCustomerByName
            @customerFirstName = ?,
            @customerLastName = ?,
            @intParameter = 1";

    aseCommand.CommandType = CommandType.Text;
    aseCommand.Parameters.Add(0, "John");
    aseCommand.Parameters.Add(1, "Doe");

    using (var dataReader = aseCommand.ExecuteReader())
    {
        while (dataReader.Read())
        {
            Console.WriteLine(
                "Id: {0} - First Name: {1} - Last Name: {2}",
                dataReader.GetInt32(0),
                dataReader.GetString(1),
                dataReader.GetString(2));
        }
    }
} 
```

但不幸的是，我得到了一个例外：

```
Sybase.Data.AseClient.AseException was unhandled
  HResult=-2146233087
  Message=Must declare variable '@dr_ta0'.

  Source=Sybase.AdoNet2.AseClient
  StackTrace:
       at Sybase.Data.AseClient1.AseCommand.CheckResult(Int32 res)
       at Sybase.Data.AseClient1.AseCommand.Execute(CommandBehavior commandBehavior)
       at Sybase.Data.AseClient1.AseCommand._ExecuteReader(CommandBehavior commandBehavior)
       at Sybase.Data.AseClient1.AseCommand.ExecuteReader()
       at Sybase.Data.AseClient.AseCommand.ExecuteReader()
       at AseCommandTest.Program.Main(String[] args) in c:\Users\jkanczler\Documents\Visual Studio 2012\Projects\AseCommandTest\AseCommandTest\Program.cs:line 61
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

正如我所见，Sybase 不能很好地支持传递给 AseCommand 的参数。那么使用 AseCommand 执行动态 sql 语句的最佳实践是什么？

# c - 隐式调用时如何使用 RTLD_DEEPBIND？

> ID：13342295
> 
> 赞同：5
> 
> 时间：2012-11-12T10:44:13.447
> 
> 标签：c, linux, shared-objects, dlopen, shared-libraries

现在我有 3 个共享对象，A.so，B.so，C.so

```
 A.c    
    void libA()  
    {  
        common();  
    }  

    B.c
    void common()  
    {  
        printf("COME HERE B\n");  
    }  

    C.c
    void common()  
    {     
        printf("COME HERE C\n");  
    }  
    (just ingore the .h files)

    test.c
    int main()  
    {  
      libA();    
      return 1;  
    }  

complie:  
gcc -fPIC -shared libB.so libB.c  
gcc -fPIC -shared libA.so libA.c ./libB.so  
gcc -o test test.c libC.so libA.so 
```

我希望结果是“COME HERE B”，我可以`dlopen`与`RTLD_DEEPBIND`标志一起使用，
但是在我的项目中将函数从隐式调用更改为显式调用会花费太多时间。
有没有办法解决这个问题？

`gcc -Wl,-Bsymbolic`在此解决方案中不起作用。

好吧，如果 Ac 包含 common 的实现。它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-11T22:38:29.170

看起来当动态链接器在运行时搜索一个符号时，它会选择它遇到的第一个。搜索顺序取决于`DT_NEEDED`二进制部分中库的顺序，而这又取决于编译期间命令行中库的确切顺序。因此，请确保在编译时位于命令行`libB.so`之前。`libC.so``test.c`

# bash - 读取文件权限并在 shell 中应用到另一个文件

> ID：13342301
> 
> 赞同：2
> 
> 时间：2012-11-12T10:44:25.217
> 
> 标签：bash, shell

我正在编写一个脚本，并且我想将给定文件的权限应用于另一个文件，因为这两个文件的所有者是相同的。文件可能很大，因此使用移动文件内容

```
cp dest tmp
rm dest
cp source dest
echo tmp > dest
rm tmp 
```

不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:50:37.423

你`chmod`支持这个`--reference`选项吗？它完全符合您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:38:50.527

```
FILE1="$HOME/.bashrc"
FILE2="$HOME/.profile"

FPERM=`stat -c "%a" "$FILE1"`
chmod $FPERM "$FILE2" 
```

PS。如果还有所有权：

```
FUID=`stat -c "%U" "$FILE1"`
FGID=`stat -c "%G" "$FILE1"`

chown $FUID:$FGID "$FILE2" 
```

# c# - 将 Lambda 表达式传递到通用存储库

> ID：13342304
> 
> 赞同：0
> 
> 时间：2012-11-12T10:44:47.833
> 
> 标签：c#, linq, generics, lambda, expression

我正在尝试将 Web 网格助手与通用存储库结合使用来添加列排序。带有网格助手的视图的操作结果具有用于排序列（字符串）的参数。在我的通用方法签名中，我需要根据域模型的属性名称传入一个 lambda 表达式（见下文）。

```
public IEnumerable<T>GetAllPagingAndSorting<TKey>(out int totalRecords, 
    int pageSize, int pageIndex, Expression<Func<T, TKey>> orderingKey, 
    SortDirection sortOrder, 
    params Expression<Func<T, object>>[] includes)
{} 
```

例如，我想将属性名称“Name”和“string”类型映射到 m=>m.Name。

我尝试按以下方式使用字典，但是在调用存储库方法时会引发错误，因为类型现在是对象而不是 int、string 等....

```
private IDictionary<string,Expression<Func<MyModel,object>>> _orderings =
            new Dictionary<string, Expression<Func<MyModel,object>>> 
                {
                    {"Id",(m=>m.Id)},
                    {"Name",m=>m.UserName},
                    {"DateRequired",m=>m.DateRequired},
                    {"AssignedTo",m=>m.TeamMember.MemberName},
                    {"RequestedBy",m=>m.RequestedBy},

            }; 
```

我应该改用一种方法吗？在任何一种情况下，我如何使用上述内容来匹配输入属性并返回具有正确类型的 Lambda 表达式？

更新：这是我在控制器中的操作......我想我会尝试在此处获取订购密钥作为 Lambda，因为我使用通用存储库......

定义的通用存储方法： IEnumerable GetAllPagingAndSorting(out int totalRecords, int pageSize, int pageIndex,Expression> orderingKey, SortDirection sortOrder, params Expression>[] 包括);

```
 public ActionResult ServerPagingAndSorting(int page = 1, string sort = "Id", string sortDir = "Ascending")
        {

            int totalRecords;
            var viewModel =new SupportRequestsIndexVM(supportrequestRepository.GetAllPagingAndSorting(out totalRecords, PageSize,page - 1,_orderings[sort] ,GetSortDirection(sortDir),(m=>m.TeamMember)))
                    {PageSize = PageSize, PageNumber = page, TotalRows = totalRecords};

            return View(viewModel);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:05:50.503

问题在于，`(m=>m.Id)`类型为表达式的表达式`Expresion<Func<MyModel, int>>`将自动接收额外的强制转换`object`以匹配`Expresion<Func<MyModel, object>>`。您看不到代码中的演员表，但您可以观察到它分析表达式树。

我的方法是

*   将所有查询参数，例如分页和排序顺序封装到一个类中
*   将查询结果封装在一个类中（总记录、选中记录）

因此我的解决方案看起来像这样

```
public class QueryResult<T> {
  public int TotalRecords;
  public List<T> Records;
}

public QueryResult<T> GetRecords<T>(QueryParams p)
{
    IEnumerable<T> q = BuildQueryWithConditions<T>(p);
    var result = new QueryResult<T> { TotalRecords = q.Count() };
    q = ApplySortOrder(p);
    q = ApplyPaging(p);
    result.Records = q.ToList();
    return result;
} 
```

ApplySortOrder 是一个解释 SortColumn 和 SortOrder 的逐实体函数：

```
switch (p.SortColumn)
{
    case "Column1":
        if (desc)
            queryDef = queryDef.OrderByDescending(record => record.Column1);
        else
            queryDef = queryDef.OrderBy(record => record.Column1);
    break;
    ....
} 
```

要处理每个实体的排序，您需要将 an 传递`IEnumerable<T>`给函数并返回一个`IOrderedEnumerable<T>`. 由于我们不能在涵盖不同实体的字典中拥有泛型类型，因此签名如下所示：

```
Dictionary<Type, Expression<Func<IEnumerable, IEnumerable>>> 
```

另外定义一个方法`Add<T>(Expression<Func<IEnumerable<T>, IOrderedEnumerable<T>>>)`来添加到字典中，并`Get()`检索排序表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:49:51.707

我现在正在使用此代码应用从另一个堆栈溢出 q 中获取的排序。我将字符串传递给通用存储库，然后按如下方式调用此方法：

这是我的存储库方法：

```
public IEnumerable<T> GetAllPagingAndSorting(out int totalRecords, int pageSize, int pageIndex, string orderingKey, string sortDir, params Expression<Func<T, object>>[] includes)
        {
                IQueryable<T> results = Entities;

                totalRecords = results.Count();

                // apply any includes
                if (includes != null)
                {
                    results = includes.Aggregate(results, (current, include) => current.Include(include));
                }

                // apply sorting    
                results = GetSortDirection(sortDir) == SortDirection.Ascending ? ApplyOrder(results, orderingKey, ORDERBY) : ApplyOrder(results, orderingKey, ORDERBYDESC);

                if (pageSize > 0 && pageIndex >= 0)
                {
                    // apply paging
                    results = results.Skip(pageIndex * pageSize).Take(pageSize);
                }

                return results.ToList();
        }

 protected static IOrderedQueryable<T> ApplyOrder(IQueryable<T> source, string property, string methodName)
        {
            string[] props = property.Split('.');
            Type type = typeof(T);
            ParameterExpression arg = Expression.Parameter(type, "m");
            Expression expr = arg;
            foreach (string prop in props)
            {
                // use reflection (not ComponentModel) to mirror LINQ
                PropertyInfo pi = type.GetProperty(prop);
                expr = Expression.Property(expr, pi);
                type = pi.PropertyType;
            }
            Type delegateType = typeof(Func<,>).MakeGenericType(typeof(T), type);
            LambdaExpression lambda = Expression.Lambda(delegateType, expr, arg);

            object result = typeof(Queryable).GetMethods().Single(
                    method => method.Name == methodName
                            && method.IsGenericMethodDefinition
                            && method.GetGenericArguments().Length == 2
                            && method.GetParameters().Length == 2)
                    .MakeGenericMethod(typeof(T), type)
                    .Invoke(null, new object[] { source, lambda });
            return (IOrderedQueryable<T>)result;
        } 
```

# regex - linux命令的正则表达式：不等于

> ID：13342311
> 
> 赞同：0
> 
> 时间：2012-11-12T10:45:10.550
> 
> 标签：regex, linux, command, find

在 Linux 中，我想查找名称与`myName`. 我正在尝试使用正则表达式，但我不工作：

```
find . -type f -name '*(?<!myName)*' 
```

我的错误在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:49:55.997

这对你有用吗？

```
find . -type f ! -name '*myName*' 
```

# python - 如何在 csv 文件中获取非 csv 行

> ID：13342312
> 
> 赞同：0
> 
> 时间：2012-11-12T10:45:14.213
> 
> 标签：python, csv, python-2.7

我有一个像这样的csv：

> ```
> "Equipment","LNKEQP","METAST","METSER","MODSTA","METEOD"
> "HLL_POS_00098",1,1,0,0,0
> "TOY_GAT_00003",0,0,0,3,0
> "NAT_POS_00010",0,3,0,3,0
> "NAT_GAT_00002",0,0,0,0,0
> "NAT_GAT_00001",0,0,0,4,0
> A machine A is unavailable 
> ```

我使用代码将该 csv 文件读取为：

```
reader = csv.DictReader(f)
s=[]
for row in reader: 
```

但该行不包含“A 机器 A 不可用”，如何获取该行并输出如下示例：

```
'METEOD': '0', 'MODSTA': '0', 'METSER': '0', 'LNKEQP': '0', 'METAST': '0', 'Equipmnt': 'NAT_VCF_00001'
'METEOD': '0', 'MODSTA': '0', 'METSER': '0', 'LNKEQP': '1', 'METAST': '1', 'Equipment': 'NAT_TVM_00002'
A machine A is unavailable 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:48:36.123

在解析它们之前删除有问题的行：

```
import csv
from StringIO import StringIO

i = """"Equipment","LNKEQP","METAST","METSER","MODSTA","METEOD"
"HLL_POS_00098",1,1,0,0,0
"TOY_GAT_00003",0,0,0,3,0
"NAT_POS_00010",0,3,0,3,0
"NAT_GAT_00002",0,0,0,0,0
"NAT_GAT_00001",0,0,0,4,0
A machine A is unavailable
"""

# Take only those lines that contain a comma.
j = "".join([line for line in StringIO(i).readlines() if ',' in line])

# Parse the taken lines as CSV.
reader = csv.reader(StringIO(j))
for line in reader:
    print line 
```

输出：

```
['Equipment', 'LNKEQP', 'METAST', 'METSER', 'MODSTA', 'METEOD']
['HLL_POS_00098', '1', '1', '0', '0', '0']
['TOY_GAT_00003', '0', '0', '0', '3', '0']
['NAT_POS_00010', '0', '3', '0', '3', '0']
['NAT_GAT_00002', '0', '0', '0', '0', '0']
['NAT_GAT_00001', '0', '0', '0', '4', '0'] 
```

# eclipse - Eclipse 是否具有“语法感知选择”功能？

> ID：13342315
> 
> 赞同：4
> 
> 时间：2012-11-12T10:45:27.047
> 
> 标签：eclipse, intellij-idea

Eclipse 是否有*语法感知选择*，类似于Intellij IDEA中的`CMD`+ ？`w`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:19:43.643

您所描述的在 Eclipse 中称为“选择封闭元素”，默认键绑定是`Shift`++ 。`Alt``Up`

（您可以在 Window -> Preferences -> General -> Keys 中更改键绑定。）

以前不知道这个，所以谢谢你的提示！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:59:34.097

我不确定，但我认为您正在寻找“内容辅助”功能。

如果它的*Content Assist*，那么您可以使用`Ctrl`+调用它`Space`

# ruby-on-rails - 文件上传不成功，为什么？

> ID：13342317
> 
> 赞同：1
> 
> 时间：2012-11-12T10:45:49.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, yaml

我要疯狂地将文件上传到我的 ruby​​ 3.2.8 应用程序中。我需要你的帮助！我试过这段代码：

[为什么yaml文件上传不起作用？我认为权限问题](https://stackoverflow.com/questions/13286583/why-yaml-file-upload-does-not-work-i-think-permission-problems)

但它不起作用，不会在“公共”中创建文件，而只会创建临时文件。今天我发现了一个新方法：

[Rails 3 - 将文件上传到公共目录](https://stackoverflow.com/questions/5776252/rails-3-upload-files-to-public-directory)

所以，查看：

```
<p style="color: green"><%= flash[:notice] %></p>

<%= form_for :uploadFile, :url => "/upload/uploadfile", :html => { :multipart => true } do |f| %>
  <label for="uploadFile">Select File:</label>
  <%= f.file_field :upload %>
  <%= f.submit "Upload", :disable_with => 'Uploading...' %>
<% end %> 
```

控制器：

```
class UploadController < ApplicationController
  def uploadFile
    require 'fileutils'
    tmp = params[:uploadFile][:upload].tempfile
    file = File.join("public", params[:uploadFile][:upload].original_filename)
    FileUtils.cp tmp.path, file
    flash.now[:notice]="File has been uploaded successfully"
  end
end 
```

但同样的问题。在“公共”中没有文件:(

日志 说：

```
Started POST "/upload/uploadfile" for 127.0.0.1 at 2012-11-12 11:19:04 +0100
Processing by UploadController#uploadfile as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"WI23X2HeanJpQJoRFc8NUJ078yLYpKgRE3VnJDBeccA=", "uploadFile"=>{"upload"=>#<ActionDispatch::Http::UploadedFile:0x47e4238 @original_filename="newCases.yml", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"uploadFile[upload]\"; filename=\"newCases.yml\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Users/Simo/AppData/Local/Temp/RackMultipart20121112-4716-1geiytj>>}, "commit"=>"Upload"}
  [1m[36mSetting Load (0.0ms)[0m  [1mSELECT "settings".* FROM "settings" WHERE "settings"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered upload/uploadfile.html.erb within layouts/upload (0.0ms)
Completed 200 OK in 16ms (Views: 0.0ms | ActiveRecord: 0.0ms) 
```

啊，上传文件是yaml，改什么？

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem "comma", "~> 3.0.3"
gem 'fastercsv', '1.5.4' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:19:12.283

也许将 :url 添加到 form_for 中

```
form_for :uploadFile, :url => "/upload/uploadfile" 
```

会有帮助吗？使用 rails 3.2.8，您的上传工作正常，除了我添加了 :url 参数。

# c# - 反序列化部分二进制文件

> ID：13342318
> 
> 赞同：6
> 
> 时间：2012-11-12T10:45:52.777
> 
> 标签：c#, serialization

是否可以反序列化二进制文件的一部分？

基本上我有一个类似于下面的对象，我将其序列化为二进制文件。

```
public class MyObject
{
    public string Name { get; set; }

    public int Value { get; set; }

    public IList<MyOtherObject> { get; set; } // lots of data in here (order of kB-MB)
} 
```

我想要的是能够仅反序列化`Name`并`Value`通过填充`ListView`用于文件选择的目的，然后在需要时反序列化文件的其余部分（即用户从 中选择该文件`ListView`）。

与往常一样，非常感谢任何帮助，如果建议任何第三方库，它们将需要能够在商业环境中自由使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T11:13:23.333

protobuf-net 可以做到这一点，因为它与特定类型无关；例如：

```
using ProtoBuf;
using System.Collections.Generic;
using System.IO;

[ProtoContract]
public class MyOtherObject { }
[ProtoContract]
public class MyObject
{
    [ProtoMember(1)]
    public string Name { get; set; }
    [ProtoMember(2)]
    public int Value { get; set; }
    [ProtoMember(3)]
    public IList<MyOtherObject> Items { get; set; }
}

[ProtoContract]
public class MyObjectLite
{
    [ProtoMember(1)]
    public string Name { get; set; }
    [ProtoMember(2)]
    public int Value { get; set; }
}

static class Program
{
    static void Main()
    {
        var obj = new MyObject
        {
            Name = "abc",
            Value = 123,
            Items = new List<MyOtherObject>
            {
                new MyOtherObject(),
                new MyOtherObject(),
                new MyOtherObject(),
                new MyOtherObject(),
            }
        };
        using (var file = File.Create("foo.bin"))
        {
            Serializer.Serialize(file, obj);
        }
        MyObjectLite lite;
        using (var file = File.OpenRead("foo.bin"))
        {
            lite= Serializer.Deserialize<MyObjectLite>(file);
        }
    }
} 
```

但是，如果您不想要两种不同的类型，和/或您不想添加属性 - 也可以这样做：

```
using ProtoBuf.Meta;
using System.Collections.Generic;
using System.IO;

public class MyOtherObject { }
public class MyObject
{
    public string Name { get; set; }
    public int Value { get; set; }
    public IList<MyOtherObject> Items { get; set; }
}
static class Program
{
    static readonly RuntimeTypeModel fatModel, liteModel;
    static Program()
    {
        // configure models
        fatModel = TypeModel.Create();
        fatModel.Add(typeof(MyOtherObject), false);
        fatModel.Add(typeof(MyObject), false).Add("Name", "Value", "Items");
        liteModel = TypeModel.Create();
        liteModel.Add(typeof(MyOtherObject), false);
        liteModel.Add(typeof(MyObject), false).Add("Name", "Value");
    }
    static void Main()
    {
        var obj = new MyObject
        {
            Name = "abc",
            Value = 123,
            Items = new List<MyOtherObject>
            {
                new MyOtherObject(),
                new MyOtherObject(),
                new MyOtherObject(),
                new MyOtherObject(),
            }
        };
        using (var file = File.Create("foo.bin"))
        {
            fatModel.Serialize(file, obj);
        }
        MyObject lite;
        using (var file = File.OpenRead("foo.bin"))
        {
            lite = (MyObject)liteModel.Deserialize(
                file, null, typeof(MyObject));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:55:51.703

将`Name`and`Value`放入超类并分别序列化它们怎么样？

或者，您可以维护一个 Dictionary 并将其序列化到一个文件中。

# java - 从 JPEG 中提取 EXIF 方向而不使用任何库

> ID：13342327
> 
> 赞同：0
> 
> 时间：2012-11-12T10:46:49.637
> 
> 标签：java, image, jpeg, exif

我需要从 JPEG 文件中的 EXIF 数据中提取方向，但我不能使用[metadata-extractor](http://www.drewnoakes.com/code/exif/)等外部库。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:51:15.943

你提到的图书馆包括很多工作。如果你不能使用它，那么你将不得不自己做一堆工作。

简短回答：是的，这是可能的，但我建议您使用像您提到的那样的第三方库。

# google-sites - Google 协作平台列表页面模板中所需的调整列大小功能

> ID：13342330
> 
> 赞同：1
> 
> 时间：2012-11-12T10:46:56.767
> 
> 标签：google-sites

我需要基于列表页面模板在 Google 站点页面上调整列大小的功能。除了嵌入看起来非常糟糕的电子表格之外，任何人都可以提出一个可能的解决方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-24T01:59:42.210

据我所知，没有办法改变列的大小。关于 Google 电子表格，如果您插入已发布电子表格的 URL（即作为网页发布），它们看起来会更好。嵌入标签看起来像这样：

```
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQLcI0Y7X4oaW8eBYkt5r4.../pubhtml?widget=true&amp;headers=false"></iframe> 
```

# linux - 自定义 genhtml 的 HTML 输出

> ID：13342333
> 
> 赞同：0
> 
> 时间：2012-11-12T10:47:07.097
> 
> 标签：linux, wxwidgets, lcov

我正在使用 lcov 和 genhtml 进行代码覆盖。genhtml 生成的输出具有 CSS 样式。wxWidgets 2.8.12 中的 HTML 窗口不支持 CSS 样式的 HTML 页面。

是否可以使用 genhtml.html 获得一个普通的 HTML 页面。

问候约翰尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:50:50.773

我不知道你的问题的答案，但是wxWidgets 2.9 中的[wxWebView](http://docs.wxwidgets.org/trunk/classwx_web_view.html)确实支持 CSS，所以也许你应该考虑升级到 2.9 并开始使用它。

# codeigniter - CodeIgniter - 搜索功能（products->category_id 数据库关系）

> ID：13342339
> 
> 赞同：1
> 
> 时间：2012-11-12T10:47:14.987
> 
> 标签：codeigniter

我有这个代码：

```
function search($terms){
    $query      = $this->db->get_where('products',"name LIKE '%$terms%' OR description LIKE '%$terms%'");
    $product    = $query->result_array();

    foreach($product as $p):            
        $query2 = $this->db->get_where('categories', array('cat_id' => $p['prod_category']));
        $category   = $query2->row_array();

        $product['category'] = $category['cat_link'];
    endforeach;

    return $product;
} 
```

在我的搜索功能中。它将返回如下内容：

```
Array(
[0] => Array(
   [prod_id] => 5
   [prod_name] => Product
   [prod_category] => 1
) 
```

但我追求的是：

```
Array(
[0] => Array(
   [prod_id] => 5
   [prod_name] => Product
   [prod_category] => Category1
) 
```

来自我的 id 为 1 的类别的名称。这是在我的“类别”表中。foreach 循环不是完成此任务的正确方法，但它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:00:07.360

您可以使用以下方法：

我假设您已经加载了库

**控制器**

```
function search()
{
$data['query'] = $this->Books_model->get_search();
$this->load->view(‘books’, $data);
} 
```

**模型**

```
function get_search()
{
$match = $this->input->post(‘search’);
$this->db->like(‘bookname’,$match);
$this->db->or_like(‘author’,$match);
$this->db->or_like(‘characters’,$match);
$this->db->or_like(‘synopsis’,$match);
$query = $this->db->get(‘books’);
return $query->result();
} 
```

**意见**

```
<?=form_open(‘books/search’);?>
<?php $search = array(‘name’=>’search’,'id’=>’search’,'value’=>”,);?>
<?=form_input($search);?><input type=submit value=’Search’ /></p>
<?=form_close();?> 
```

可以使用 HTML 表格显示结果

```
<table>
<tr><th>ID</th><th>Book</th><th>Author</th><th>Published</th><th>Price</th></tr>
<?php foreach($query as $item):?>
<tr>
<td><?= $item->id ?></td>
<td><?= $item->bookname ?></td>
<td><?= $item->author ?></td>
<td><?= $item->datepublished ?></td>
<td><?= $item->price ?></td>
</tr>
<?php endforeach;?>
</table> 
```

这就是我正在使用的，我希望它能帮助你在 Code Igniter 上进行搜索功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:58:05.890

您可以通过让数据库处理表的连接来简化搜索逻辑。

```
function search($terms){

    $this->db->select('prod_id, prod_name, cat_name');
    $this->db->from('products');
    $this->db->join('categories', 'cat_id = prod_category', 'inner');
    $this->db->like('name', $terms);
    $this->db->or_like('description', $terms);

    $query = $this->db->get();
    return $query->result_array();
} 
```

这是假设您的类别名称列是命名的`cat_name`。结果如下：

```
Array(
[0] => Array(
   [prod_id] => 5
   [prod_name] => Product
   [cat_name] => Category1
) 
```

希望这可以帮助！

# php - CSqlDataProvider：如何为数据库查询转义字符串 Yii

> ID：13342341
> 
> 赞同：1
> 
> 时间：2012-11-12T10:47:19.030
> 
> 标签：php, yii

我正在使用 CSqlDataProvider 来获取数据。我自己构建查询。

如何在构造 mysql 查询时转义字符串？

我尝试使用`mysql_real_escape_string`但它不起作用

```
$count=Yii::app()->db->createCommand($this->constructCountQuery())->queryScalar();      
        return $dataProvider = new CSqlDataProvider($this->constructDataQuery(), array(
            'totalItemCount'=>$count,
            'sort'=>array(
                'attributes'=>array(
                      'clinic_name', 'doctor_name','country'
                ),
            ),
            'pagination'=>array(
                'pageSize'=>10,
            ),

        )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:06:28.943

使用命名参数并使用[`params`](http://www.yiiframework.com/doc/api/1.1/CSqlDataProvider#params-detail)属性来指定参数。Yii 的 PDO 会自动转义字符串

例如

```
$dataProvider = new CSqlDataProvider('SELECT * FROM posts WHERE `title`=:title', array(
            'totalItemCount'=>$count,
            'params'=>array(
                   ':title'=>$title,
            ),
            'sort'=>array(
                'attributes'=>array(
                      'clinic_name', 'doctor_name','country'
                ),
            ),
            'pagination'=>array(
                'pageSize'=>10,
            ),

        )); 
```

# ruby - 从方法内的块方法返回 true 或 false

> ID：13342342
> 
> 赞同：2
> 
> 时间：2012-11-12T10:47:29.153
> 
> 标签：ruby

一个`Item` `has_many` `Pieces`。我有两种方法，一种是判断 Piece 是否可用，另一种是判断 Item 是否有可用的部分。

```
 # in piece.rb
  def available?(current_user, piece)
    if piece.status == 1
      true
    elsif piece.status == 2
      false
    elsif piece.status == 3
      true if piece.friend_id == current_user.id
    end
  end

  #in item.rb
  def available?(current_user, user, item)
    false
      item.pieces.each do |piece|
        if piece.available?(current_user, piece)
          true
        end
      end
  end 
```

我的`available?`方法`Item`是错误的。`true`如果`Item`有可用`pieces`，我希望它返回，`false`如果没有。我的代码背后的理论是该方法返回`false`，除非有一个返回`true`。当我在控制台中执行此操作时，我得到的只是散列中的片段，而不是真假。

任何人都可以解决我的问题或告诉我更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T12:24:10.547

使用`Enumerable#any?`：

```
def available?(current_user, user, item)
  item.pieces.any? do |piece|
    piece.available?(current_user, piece)
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:56:09.737

如果您需要检查 item 是否至少有一个可用件，该方法可以如下所示：

```
def available?(current_user, user, item)
  item.pieces.each do |piece|
    return true if piece.available?(current_user, piece)
  end
  false
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:10:35.007

从您的代码中推断，我认为`available?`in 方法`Piece.rb`不需要第二个参数，因为它是 Piece 的实例方法。所以我建议你将方法重构为：

```
def available_to?(current_user)
  if status == 1
    true
  elsif status == 2
    false
  elsif status == 3
    true if friend_id == current_user.id
  end
end 
```

它会给你一个更干净的界面。

# ios - SKRecognizer 返回空数组

> ID：13342346
> 
> 赞同：1
> 
> 时间：2012-11-12T10:47:40.943
> 
> 标签：ios, speech-recognition

我正在使用 Dragon 移动 NDEV SDK，但我遇到了识别问题。在根视图中，这里有一个按钮来开始录制。用户可以在我的表格视图中选择带有语音的行，然后我的应用程序推送到相应的视图。但是在这个视图中，当用户再次按下记录按钮时，SKRecognizer 总是返回一个空数组，在第二个视图中，甚至在第一个视图中，如果用户使用后退按钮返回。我必须重新启动应用程序才能再次使用 SKRecognizer。如果我直接进入第二个视图并使用 SKRecognizer，在此视图上工作，但如果我导航识别不起作用。

我有一个专门用于 Dragon 识别器的类，我在每个视图中实例化这个类，每个视图都有一个属性。

```
- (IBAction)recordAction:(id)sender
{
    if (_recognizer) {
        [_recognizer release];
    }
    _recognizer = [[DragonRecognizer alloc] init];

    [_recognizer startRecord];
} 
```

和 SKRecognizer 代表：

```
- (void)recognizer:(SKRecognizer *)recognizer didFinishWithResults:(SKRecognition *)results
{
    long numOfResults = [results.results count];

    transactionState = TS_IDLE;

    if (numOfResults > 0)
        _result = [[results firstResult] lowercaseString];

    [_recognizer release];
    _recognizer = nil;

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc postNotificationName:DragonReconizerFinishWithResults object:nil];
} 
```

我在视图控制器中收到通知：

```
- (void)stopRecordReconizer:(NSNotification *)n
{
    if (![self.navigationController.visibleViewController isKindOfClass:[self class]])
        return;

    NSString *mainResult = [_recognizer result]; // No result
} 
```

你知道为什么 SKRecognizer 在第二次使用后给我发送一个空数组吗？

谢谢你的帮助！

# android - 以 Edittext 作为自定义标题视图的 AlertDialog

> ID：13342347
> 
> 赞同：2
> 
> 时间：2012-11-12T10:47:47.137
> 
> 标签：android, android-alertdialog

我需要一个`EditText`自定义标题视图`AlertDialog`，由`AlertDialog.Builder`. 设置和显示此 EditText 会成功，将文本粘贴到它（通过长按）（包括调用 EditorActionListener 回调）也是如此。

但是没有可见的软输入，因此向其中添加文本非常不方便。我已经尝试过调用`InputMethodManager.showSoftInput()`，但是在创建/显示对话框之前和之后，无论是 in `OnClickListener`，还是在`OnFocusChangeListener`extra中，都没有发生任何事情`Runnable`。

让我绊倒的是，我有许多其他的 AlertDialogs，其中有很多`EditText`s 可以按需要工作。自定义标题视图和内容视图之间是否存在概念差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T07:09:15.373

**解决方案：**

AlertDialog 的 AlertController 设置标志来阻止软输入。因此，请执行以下操作：

```
AlertDialog.Builder builder = .... // initialize, set up
AlertDialog d = builder.show();
d.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE);
d.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);
d.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

现在软输入显示，调整对话框大小，一切正常。（顺便感谢 GrepCode ......）。

# html - HTML5 doctype 在 IE8 中未触发标准模式

> ID：13342348
> 
> 赞同：6
> 
> 时间：2012-11-12T10:47:52.740
> 
> 标签：html, internet-explorer-8, doctype, ie8-compatibility-mode

我在一家公司工作，我们所有的网站目前都使用 XHTML 1.0 过渡文档类型（是的，我知道这是非常古老的学校）。我想将它们全部更改为使用 HTML5 文档类型，因为它是向后兼容的。我想要进行切换的原因之一是因为在 IE8 中，如果有人安装了开发人员工具，那么旧的 XHTML doctype 会将浏览器切换到兼容模式并将页面呈现为 IE7。通过阅读它，我被引导相信 HTML5 doctype 会将任何页面设置为以标准模式呈现，但是当我在我们的登台服务器上测试它时，这并没有发生，它仍然会切换到 IE7 呈现模式。

奇怪的是，如果我在本地保存带有 HTML5 文档类型的页面并打开它，它会以 IE8 标准模式呈现。一定有其他原因导致它陷入兼容 IE7 渲染。任何想法这可能是什么？

以下是我一直在查看的测试页面的标题：

```
 <!DOCTYPE html >

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>

    <title>Burton - Mens Clothing - Mens Fashion - Burton Menswear</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="description" content="Burton is one of the UK's leading men's clothing &amp; fashion retailers, with a range of men's clothing designed to make you look &amp; feel good. Find formal &amp; casual clothes &amp; accessories for men online at Burton menswear"/>
    <meta name="keywords" content="menswear, clothes for men, clothing for men, men clothes, men's fashion, men's wear, men's clothing online, men's clothes online, men's clothes shop, burton men's, burton menswear, burton uk, burton"/>

    <script type="text/javascript">document.getElementsByTagName('html')[0].className = 'js';</script>

    <link rel="stylesheet" type="text/css" href="http://eu.burton-menswear.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color2/v3/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://eu.burton-menswear.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color2/v3/css/print.css" media="print"/>

    <link rel="stylesheet" type="text/css" href="http://eu.burton-menswear.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color2/v3/css/brand.css" />

    <!--[if lt IE 8]>
    <link rel="stylesheet" href="http://eu.burton-menswear.com/wcsstore/ConsumerDirectStorefrontAssetStore/images/colors/color2/v3/css/ie.css" type="text/css" media="screen, projection">
    <![endif]-->

    <meta http-equiv="content-language" content="en-gb" />

    <link rel="shortcut icon" type="image/x-icon" href="http://eu.burton-menswear.com/favicon.ico" />
    <link rel="search" type="application/opensearchdescription+xml" title="burton.co.uk Search"  href="http://eu.burton-menswear.com/burton-search.xml"/>
    <!-- Start Summit Tag -->
    <script type="text/javascript"> 
  var __stormJs = "t1.stormiq.com/dcv4/jslib/3286_D92B7532_4A18_46A8_864A_5FDF1DF25844.js";
</script>
    <script type="text/javascript" src="http://eu.burton-menswear.com/javascript/track.js"></script>
    <!-- End Summit Tag -->
    <!-- Start QuBit Tag -->
    <script src=//d3c3cq33003psk.cloudfront.net/opentag-31935-42109.js async defer></script>
    <!-- End QuBit Tag -->
    <link type="text/css" rel="stylesheet" href="http://reviews.br.wcstage.arcadiagroup.ltd.uk/bvstaging/static/6028-en_gb/bazaarvoice.css" ></link>

</head> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T10:55:50.093

IE 8 中有几个设置可以导致页面以兼容模式呈现，无论页面的 HTML 内容或 HTTP 标头如何：

1.  页面 > 兼容性视图设置

    *   如果勾选“在兼容性视图中显示内网站点”，则 IE 将以兼容性视图呈现本地网络上的所有站点。（这在我开发过程中发生过几次。）

    *   如果选中“包括 Microsoft 更新的网站列表”，则 IE 将从 Microsoft 下载网站列表并将它们全部呈现在兼容性视图中。

    *   如果选中“在兼容性视图中显示所有网站”，那么，你可以猜到会发生什么。

2.  工具 > Internet 选项 > 高级 > 浏览

    *   如果选中“使用兼容性视图自动从页面布局错误中恢复”，那么如果 IE 认为页面布局损坏，有时会切换到兼容性视图。

3.  最后，如果您导航到一个页面，然后单击页面 > 兼容性视图（或单击地址栏中的兼容性视图图标），那么该页面将在兼容性视图中呈现。

因此，尽管值得放在`X-UA-Compatible`那里并使用像 HTML5 这样的文档类型（这样你的意图就很清楚了），但在测试时总是先检查这些设置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T12:53:55.950

我不确定这是否有帮助，但在**IE9**中，您必须使用：

```
<!DOCTYPE html> 
```

和以下元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

在测试了这两者的组合之后，我发现了以下内容：

*   无 Doctype 或 Meta Tag：
    Quirks 模式，IE 引擎 = 5

*   仅文档类型：
    标准模式，IE 引擎 = 7

*   Doctype 和 Meta Tag
    标准模式，IE 引擎 = 9

*   仅元标记
    标准模式，IE 引擎 = 9

如何确定模式类型和引擎：

*   `document.compatMode`: `CSS1Compat`= 标准模式，否则你处于怪癖模式

*   `document.documentMode`: 返回 IE 使用哪个引擎来渲染文档

* * *

笔记：

*   通常 Doctype 必须是文件的第一行。我不确定，但我认为 XML 标记可以在它之前。如果之前有任何其他内容，您可能会破坏您的 doctype 声明：
*   元标签必须放在`<HEAD>`
*   你的帖子已经有 25 天了，所以我假设你有一个解决方案。即便如此，我不确定这些 IE9 设置是否适合您的问题。您必须检查`window.document.compatMode`并`window.document.documentMode`确定它们在 IE8 下是否可行
*   将元标记更改为`<meta http-equiv="X-UA-Compatible" content="IE=8">`
*   虽然可以只使用元标记，但我不建议在没有文档类型的情况下使用它。因为这可能会导致 XML、CSS 和脚本出现问题

我花了几个小时试图弄清楚这一点并发布了这篇文章，所以我希望有人真的能从我的研究中得到一些用处。愿源与你同在...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T11:23:58.053

XHTML 1.0 过渡文档类型（当规范使用时，带有 URL）和`<!doctype html>`触发 IE 中的“标准模式”。如果这没有发生，有很多原因可能与 doctype 更改无关（并且只有在附加信息（例如 URL）可用时才能进行分析）；请参阅*使用 Doctype 激活浏览器模式*中的[IE 8 和 IE 9 复杂性](http://hsivonen.iki.fi/doctype/#ie8)。

 *更改为`<!doctype html>`是没有意义的并且是一个潜在的问题，除非您实际上没有更改标记。在验证中，这是使用 doctype 的另一个原因，它会导致完全不同的分析，并且经常会出现关于在 XHTML 1.0 中有效的构造的错误消息。*

# grails - Grails解释json找到action方法？

> ID：13342351
> 
> 赞同：2
> 
> 时间：2012-11-12T10:48:14.017
> 
> 标签：grails

考虑 Grails 2.1.1 中的以下操作

```
class ActionController {

    static allowedMethods = [submit: 'POST']

    def submit() {            
        render([ok: true, data: request.JSON] as JSON)
    }
} 
```

以下命令：

```
curl -X POST http://localhost:8080/backoffice/action/submit \ 
            -H 'Content-Type: application/json' \
            -d '{"foo":"bar"}' 
```

返回

```
{"ok" : true, "data" : {"foo" : "bar"}} 
```

**但是**如果在 json 中有一个名为 的元素`action`，那么 Grails 将尝试找到一个名称等于该元素值的动作！

例如 ：

```
curl -X POST http://localhost:8080/backoffice/action/submit \ 
            -H 'Content-Type: application/json' \
            -d '{"foo":"bar","action":"bar"}' 
```

结果导致**404 错误**，因为 grails 正在尝试查找 uri `/action/bar.dispatch`！

我怎样才能禁用这个奇怪的功能？

我的`UrlMappings.groovy`：

```
 static mappings = {
    "/$controller/$action?/$id?"(parseRequest: true){
        constraints {
            // apply constraints here
        }
    } 
```

行为是否是由于`parseRequest=true`？我使用此参数能够使用来自 json 的 CommandObject。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:28:22.563

也许你可以尝试特定的映射，这样 Grails 就不会尝试在参数中搜索动作名称。像这样：

```
static mappings = {
    "/action/submit"(controller: 'action', action: 'submit', parseRequest: true)
    "/$controller/$action?/$id?"(parseRequest: true)
} 
```

UrlMappings 工作从特定规则到一般规则，因此第一个规则应该优先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:08:30.677

问题是`parseRequest:true`，它解析发布的 JSON 并将其值添加到`params`. 如果 JSON 包含`action`这将设置`params.action`，这反过来将影响执行哪个控制器操作。

您可能值得向[http://jira.grails.org](http://jira.grails.org)提交 JIRA 报告，以要求某种机制从 parseRequest 中排除某些参数，或者更改优先级以便在 UrlMappings 时从 URL 中提取的参数覆盖那些在 JSON 中提供，反之亦然。

# java - JSF Primefaces Bean：如何从 SelectOneListBox 中删除选定的值？

> ID：13342365
> 
> 赞同：0
> 
> 时间：2012-11-12T10:49:35.367
> 
> 标签：java, jsf, primefaces

我有一个带有一些数据的 selectOneListBox。选择一个值并单击“删除”按钮后，必须删除该值。我需要在我的 Bean 中执行此操作。我认为问题出在 if 语句或`codeValue`

**我的xhtml：**

```
 <p:selectOneListbox id="list" value="#{codelistBean.codeValue2}"                  style="height:300px;overflow:scroll;margin:1px;width:250px"
    autoUpdate="true">
    <f:selectItems value="#{codelistBean.code2Value}" />
    </p:selectOneListbox>` 
```

**我的豆子：**

**变量**

```
String codeValue;

 private static Map<String, Object> codeValue = new LinkedHashMap<String, Object>(); 
```

在这里，我将一些值放入地图：

```
codeValue.put(getLabel(), getValue()); 
```

**删除方法**

```
public void removeCode(ActionEvent e) {

        for (Iterator<Map.Entry<String, Object>> it = codeValue.entrySet()
                .iterator(); it.hasNext();) {

            Entry<String, Object> entry2 = it.next();

            if (entry2.getKey().equals(codeValue.get(codeValue2))) {
                it.remove();

            }
        }

    } 
```

最后，我将地图返回给 JSF 以显示它

```
public Map<String, Object> getCode2Value() {
        return codeValue;
    } 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:16:33.233

您可以定义一个 s 列表，而不是使用静态 HashMap `SelectItem`：

```
String codeValue2;
List<SelectItem> codeValue = new ArrayList<SelectItem>();

//getters & setters 
```

它与您的 HashMap 一样保存键/值对，唯一的区别是值/标签顺序：

```
codeValue.add(new SelectItem(value,label)) 
```

删除函数可以简化：

```
 public void removeCode(ActionEvent e) {

       SelectItem remove = null;
       for (SelectItem item : codeValue) {
           if (item.getValue().equals(codeValue2)) {
               remove = item;
           }
       }
       codeValue.remove(remove);
    } 
```

请注意，您也可以`ActionEvent e`从方法头中删除参数，这不是必需的。

```
<p:selectOneListbox id="list" value="#{codelistBean.codeValue2}"
                    style="height:300px;overflow:scroll;margin:1px;width:250px"
                    autoUpdate="true">
    <f:selectItems value="#{codelistBean.codeValue}" />
</p:selectOneListbox> 
```

在您的 jsf 页面上，`f:selectItems value="#{codelistBean.codeValue}"`指向`List<SelectItem>`while的点`value="#{codelistBean.codeValue2}"`代表实际选择。

最后，不要忘记`list`在执行 REMOVE 按钮后更新您的：

```
<p:commandButton actionListener="#{codeListBean.removeCode}" 
                 value="REMOVE" update="list"/> 
```

# ruby - Ruby 中的 XML 数字签名

> ID：13342366
> 
> 赞同：3
> 
> 时间：2012-11-12T10:49:37.290
> 
> 标签：ruby, xml, digital-signature, xml-signature

```
xml = '<?xml version="1.0" encoding="UTF-8"?>
    <User>
      <Uer id="user_id">
          <Code>1111</Code>
          <ID>0000000111</ID>
      </Uer>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <Reference Type="http://www.w3.org/2000/09/xmldsig#Object" URI="#user_id">
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>mwsSKYG+Q/krE54kcNpEGtXnQ+w=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>???????????????????</SignatureValue>
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <X509Data>
            .........
          </X509Data>
        </KeyInfo>
      </Signature>
    </User>'

@xml = Nokogiri::XML.parse(xml) 
```

我有一个 xml，需要 xml 签名。像`<DigestValue>`这样

```
Base64.encode64(OpenSSL::Digest::SHA1.digest(@xml.search("[id=#{user_id}]").to_html)).chop 
```

结果没问题。

当我计算`<SignatureValue>`价值时，我遇到了麻烦，就像这样

```
p = OpenSSL::PKCS12.new(File.read("/Path/signCert.p12"),"123456")
Base64.encode64(OpenSSL::PKey::RSA.new(p.key).sign(OpenSSL::Digest::SHA1.new, tmpxml.search("SignedInfo").to_html)) 
```

这个值是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:45:28.510

不幸的是，计算 XML 签名的签名值比简单地对 HTML 内容进行签名要复杂得多。例如，您必须确保应用规范化。血淋淋的细节可以在[W3C 规范](http://www.w3.org/TR/xmldsig-core1/)中找到。

我现在不知道 Ruby 中有什么东西可以让你进行适当的 XML 签名创建和验证，你最好的选择可能是基于 Nokogiri 自己创建一个（准备好迎接一个痛苦的世界来实现规范）或切换到 JRuby 并从那里集成默认可用的[Java 库。](http://docs.oracle.com/javase/7/docs/api/javax/xml/crypto/dsig/XMLSignature.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T11:28:29.960

还有一个 xmldsig gem：[https ://rubygems.org/gems/xmldsig](https://rubygems.org/gems/xmldsig)

# objective-c - UITabBar的Icon一定是单色的吗？

> ID：13342371
> 
> 赞同：0
> 
> 时间：2012-11-12T10:49:45.137
> 
> 标签：objective-c, xcode, uitabbar

似乎除了透明度之外的所有颜色都算作一种颜色。如果我使用这张图片，我得到的只是一个大盒子，只画了前两条线。

如果我们想要彩色的标签栏图标怎么办？

![在此处输入图像描述](../Images/2098c31d159d3f11bc975034042324ab.png)

注意：如果我使用上面的图片，我得到的是：

![在此处输入图像描述](../Images/65fadd00d2eedc47ba23aabd842d9710.png)

反正没有制作彩色标签栏图标不是吗？无论如何，这在哪里记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:47:04.140

是的，您用于自定义标签栏图标的图像仅用作创建应用程序运行时将看到的图标的掩码。它应该是具有适当 alpha 透明度的白色。这记录在这里：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

# postgresql - 如何在 PostgreSQL 全文搜索中指定最小字长？

> ID：13342372
> 
> 赞同：9
> 
> 时间：2012-11-12T10:49:44.727
> 
> 标签：postgresql, full-text-search

有没有办法防止短于指定值的单词出现在`tsvector`? MySQL 可以`ft_min_word_len`选择，PostgreSQL 有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:34:11.207

简短的回答是否定的。

tsearch2 使用字典来规范化文本：

> [12.6。字典](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html)
> 
> 字典用于消除不应该在搜索中考虑的单词（停用词），并将单词标准化，以便相同单词的不同派生形式匹配。成功规范化的词称为词素。

以及如何使用字典[解析和词法分析](http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/docs/tsearch2-guide.html#parsing_lexing)

# c# - C# WinRT Type 类缺少函数

> ID：13342374
> 
> 赞同：1
> 
> 时间：2012-11-12T10:49:55.587
> 
> 标签：c#, microsoft-metro, windows-runtime

我正在尝试将一些代码移植到 WinRT/Metro，但遇到了一个我不确定解决方法的问题。似乎 Type 缺少 IsPrimitive 和 IsSubclassOf(myClass) 等的访问功能。有人知道如何在 Windows 8 中获得此功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:55:36.077

这些方法被重新定位；你需要添加一个`using`指令：

```
using System.Reflection; 
```

然后使用`someType.GetTypeInfo().IsSubclassOf(...)`和`someType.GetTypeInfo().IsPrimitive`。

（该`using`指令是必要的，因为`GetTypeInfo()`它是 的扩展方法`System.Reflection.IntrospectionExtensions`）。

# windows - 真的可以将“稀疏零”设置为 (BYTE)0x00 以外的值吗？

> ID：13342376
> 
> 赞同：3
> 
> 时间：2012-11-12T10:50:09.640
> 
> 标签：windows, file, ntfs, sparse-file

如果我正确理解了文本，[Platform SDK](http://msdn.microsoft.com/library/windows/desktop/aa365564)包含了它所能做的影射：

> 稀疏文件的默认数据值为零；但是，它可以设置为其他值。

然而，通过相关文本梳理给我绝对没有相应 s 的迹象，`FSCTL`它允许设置或检索稀疏零值。那么，是不是介绍有误，还是有无证的FS控制代码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:48:52.567

应该是文笔很差吧。是的，默认值为零，您不能将默认值设为除零之外的任何值。

但是，您可以通过 WriteFile 将这些零更改为您想要的任何值。当然，这不是您要的。

# iphone - 重新创建按钮触摸

> ID：13342382
> 
> 赞同：0
> 
> 时间：2012-11-12T10:50:46.460
> 
> 标签：iphone, objective-c, xcode

在 a`UIViewController`中，我有 4 个按钮。用户运行应用程序并触摸四个按钮中的任何一个，就会调用一些方法。我想重新创建用户完成的这些操作作为重播，所以我需要用户点击的按钮和`UIControlEvent`它？

请推荐一个解决方案。

# java - How to return a non-editable PDF as a response?

> ID：13342388
> 
> 赞同：0
> 
> 时间：2012-11-12T10:51:29.373
> 
> 标签：java, pdf

I have a URL:

[http://www.irs.gov/pub/irs-pdf/fw4.pdf](http://www.irs.gov/pub/irs-pdf/fw4.pdf)

It contains an editable PDF. I have make it non-editable. I did so and kept it in the temp directory of a folder. Now i want to send the non-editable PDF as a response, when the user clicks this url, he must get the non-editable pdf. This is what I have done till now:

```
String strDirectoy ="C:\\Temp";
boolean success = (
    new File(strDirectoy)).mkdir();
    if (success) {
        System.out.println("Directory: " 
        + strDirectoy + " created");
    }  
PdfReader reader = new PdfReader("http://www.irs.gov/pub/irs-pdf/fw4.pdf");//C:\\fw4.pdf
PdfStamper stamp2 = new PdfStamper(reader, new FileOutputStream("C:\\Temp\\Flattened.pdf"));
AcroFields form2 = stamp2.getAcroFields();
stamp2.setFormFlattening(true);
stamp2.close(); 
```

Now i need to delete the `temp` folder as if it never existed and return the non-editable PDF as the response for the above specified URL.

How can i do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:46:49.957

*   Write a Servlet.
*   Flatten your pdf in a temporary file (using the `createTempFile()` and `deleteOnExit()` methods of `java.io.File`).
*   Use the `setContentType` of the HttpServletResponse to set the MIME type of the pdf.
*   Write the contents of the temporary pdf file to the outputstream of the http response

# python - 我可以在不止一行的python中编写一个lambda函数，并调用其他函数吗？

> ID：13342391
> 
> 赞同：0
> 
> 时间：2012-11-12T10:51:39.157
> 
> 标签：python

我正在阅读[*计算机程序的结构和解释*](http://mitpress.mit.edu/sicp/)——在计算机科学领域很有名。

受到函数式编程的鼓舞，我尝试用 Python 而不是 Scheme 进行编码，因为我发现它更易于使用。但随之而来的问题是：我多次需要一个 Lambda 函数，但我不知道如何使用它`lambda`来编写一个操作复杂的未命名函数。

在这里，我想编写一个带有字符串变量`exp`作为唯一参数的 lambda 函数并执行`exec(exp)`. 但我得到一个错误：

```
>>> t = lambda exp : exec(exp)
File "<stdin>", line 1
t = lambda exp : exec(exp)
                    ^
SyntaxError: invalid syntax 
```

它是怎么发生的？如何应对？

我阅读了我的 Python 指南并搜索了 Google，但没有找到我想要的答案。这是否意味着`lambda`python中的函数只是被设计成语法糖？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T10:55:48.957

您不能在`lambda`正文中使用语句，这就是您收到该错误的原因，`lambda`只需要表达式。

但是在 Python 3`exec`中是一个函数，并且在那里可以正常工作：

```
>>> t = lambda x: exec(x)
>>> t("print('hello')")
hello 
```

在 Python 2 中，您可以使用`compile()`with `eval()`：

```
>>> t = lambda x: eval(compile(x, 'None','single'))
>>> strs = "print 'hello'"
>>> t(strs)
hello 
```

**帮助`compile()`：**

```
compile(...)
    compile(source, filename, mode[, flags[, dont_inherit]]) -> code object

    Compile the source string (a Python module, statement or expression)
    into a code object that can be executed by the exec statement or eval().
    The filename will be used for run-time error messages.
    The mode must be 'exec' to compile a module, 'single' to compile a
    single (interactive) statement, or 'eval' to compile an expression.
    The flags argument, if present, controls which future statements influence
    the compilation of the code.
    The dont_inherit argument, if non-zero, stops the compilation inheriting
    the effects of any future statements in effect in the code calling
    compile; if absent or zero these statements do influence the compilation,
    in addition to any features explicitly specified. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:59:34.720

`lambda`语句（不是函数）只能是一行，并且只能由一个表达式组成。表达式可以包含函数调用，例如`lambda: my_func()`。 `exec`但是，它是语句，而不是函数，因此不能用作表达式的一部分。

多行 lambdas 的问题在 python 社区中已经讨论过多次，但结论是，如果需要，显式定义函数通常更好，更不容易出错。

# php - 使用 mktime() 函数时如何在数据库表中存储小时和分钟？

> ID：13342392
> 
> 赞同：0
> 
> 时间：2012-11-12T10:51:39.720
> 
> 标签：php

我正在使用表单使用 post 方法获取小时和分钟，然后将其存储到 mysql DB。

如 ：

```
$hour = $_POST['hour'];
$minute = $_POST['minute']; 
```

** 不需要日期、月份和年份。我只需要将小时和分钟存储在表格的列中（例如：exam_time）

列结构：**exam_time time NOT NULL**

现在如何使用 mktime() 函数将这些值存储到数据库中。我试过了，但它存储了 00:00:00，而不是我通过表单发送的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:57:33.490

我认为您混淆了`mktime`- [http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)的目的。

`mktime`返回一个表示 unix 时间戳的整数值。

如果您需要存储时间值，请使用`date`或`getdate`函数将输入格式化为所需值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:08:38.707

`mktime()`, `date()`,`getdate()`都处理 UNIX 时间戳。

在您的情况下，您有两个单独的小时和时间字段。mySQL 中的 TIME 列不处理 UNIX 时间戳，因此您不应使用上述函数。

**范围是“-838:59:59”到“838:59:59”。MySQL 以 'HH:MM:SS' 格式显示 TIME 值，但允许您使用字符串或数字将值分配给 TIME 列**

因此，根据这个，您可以尝试插入一个新的时间值，如下所示：

```
"INSERT INTO mytable ( exam_time ) VALUES ( '" . $hour . ":" . $minute . "' )" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:01:26.047

我猜脚本是正确的，但是您将 MySQL 列设置为`DATE`而不是`DATETIME`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:23:46.867

使用 TIME_ZONE_SET（您的区域），然后使用在您的 MYSQL 中选择的 DATETIME 将（小时，分钟）插入到考试时间 VALUES (" '.date("H").'", "'.date("i").'")数据库。

# c# - FBX 模型在 XNA 4.0 中无法正确显示

> ID：13342400
> 
> 赞同：3
> 
> 时间：2012-11-12T10:52:14.163
> 
> 标签：c#, c#-4.0, xna, xna-4.0, game-engine

最近我发布了同样的问题，即我的 FBX 模型在 XNA 中没有正确显示。我得到了这个问题的答案，模型显示得稍微好一些，但仍然无法正确显示。

它应该是这样的： [https](https://docs.google.com/open?id=0B54ow8GRluDUYTBubTQ4bjBramM) ://docs.google.com/open?id=0B54ow8GRluDUYTBubTQ4bjBramM 但它显示为： [https ://docs.google.com/open?id=0B54ow8GRluDUNXR5bmJUMVJFTUk](https://docs.google.com/open?id=0B54ow8GRluDUNXR5bmJUMVJFTUk)

我的绘图代码是：

```
public void Draw(Matrix projection, Matrix view)
{
   Matrix[] transforms = new Matrix[model.Bones.Count];
   model.CopyAbsoluteBoneTransformsTo(transforms);

   foreach (ModelMesh mesh in model.Meshes)
   {
      foreach (BasicEffect effect in mesh.Effects)
      {
         effect.EnableDefaultLighting();
         effect.View = view;
         effect.Projection = projection;
         effect.World = Matrix.CreateRotationX(-270) *
                        transforms[mesh.ParentBone.Index] *
                        Matrix.CreateTranslation(Position);
      }
   mesh.Draw();
   }
} 
```

有人可以帮忙吗！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:11:40.067

根据您之前的问题，Xna 渲染图像显示您正在渲染 2d 和 3d 项目，重置 2d 和 3d 之间的一些图形状态非常重要。

具体来说，在渲染 2d 内容后，添加以下行：

```
GraphicsDevice.BlendState = BlendState.Opaque;
GraphicsDevice.DepthStencilState = DepthStencilState.Default; 
```

这些设置对于 3d 来说是必需的，但是在调用 SpriteBatch.Begin() 时它们会被更改，因此有必要在 3d 内容之前将它们改回。

这是解释它的博客文章：http: [//blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:56:18.387

这是我的解决方案：

```
protected override void Draw(GameTime gameTime)
{

   GraphicsDevice.Clear(Color.CornflowerBlue);

   #region ResetGraphic

   ResetGraphic();

   #endregion
   #region render 3D
   BeginRender3D();
   //Render 3D here
   #endregion
   #region render 2D

   //Render 2D here
   #endregion

}

public void ResetGraphic()
{              
   GraphicsDevice.BlendState = BlendState.AlphaBlend;
   GraphicsDevice.DepthStencilState = DepthStencilState.None;
   GraphicsDevice.RasterizerState = RasterizerState.CullCounterClockwise;
   GraphicsDevice.SamplerStates[0] = SamplerState.AnisotropicWrap;

}

public void BeginRender3D()
{
   GraphicsDevice.BlendState = BlendState.Opaque;
   GraphicsDevice.DepthStencilState = DepthStencilState.Default;
} 
```

# mongodb - 我不知道如何，但我设法在 mongodb 中创建了一个完全命名为“*”的数据库，但我无法删除它

> ID：13342401
> 
> 赞同：0
> 
> 时间：2012-11-12T10:52:13.853
> 
> 标签：mongodb, database

我真的不知道为什么，但是当我尝试做一些 mongodump 时，我开始看到一张`*`桌子。所以我不能让 mongodump 工作，因为它会尝试保存`*`数据库，这意味着文件名不正确..

无论如何，我无法从 cmd 行删除：

```
 > show dbs
    *       (empty)
    __applicationManager    0.03125GB
    __sessions      0.03125GB
    admin   (empty)
    local   (empty)
    migration       0.03125GB
    > use *
    ... // enter once
    ... // enter again and happens the following
    error2:invalid string position
    > use admin
    switched to db admin
    > use *
    ... db.dropDatabase()
    Mon Nov 12 10:50:45 SyntaxError: unterminated string literal (shellhelp2):1
    > show dbs
    *       (empty)
    __applicationManager    0.03125GB
    __sessions      0.03125GB
    admin   (empty)
    local   (empty)
    migration       0.03125GB 
```

试过评论：

```
> db.getCollection("*").drop()
false
> show dbs
*       (empty)
__applicationManager    0.03125GB
__sessions      0.03125GB
admin   (empty)
local   (empty)
migration       0.03125GB
test    (empty) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:28:58.013

您可以随时从 Windows 资源管理器中删除它：

*   关闭mongodb
*   在磁盘上查找数据库文件 - 会有一堆以 * 开头，然后是 . 然后是一个数字（或“ns”）。删除所有这些 - 确保不要删除您不想删除的内容，除非您当然有备份。
*   再次启动 mongodb。

# sql-server-2008 - 使用默认值表 SQLServer 识别事务

> ID：13342402
> 
> 赞同：0
> 
> 时间：2012-11-12T10:52:17.720
> 
> 标签：sql-server-2008, transactions, default-value, sql-function

我有一张表，我只做 INSERT 操作。

我想通过唯一的默认值唯一地标识这些事务操作（我可以在我想用相同的 id 标识的事务中执行一些顺序插入）。例子：

```
BEGIN 

INSERT INTO Table_Example (Id, Value)
VALUES (1,'TEST'), (2,'TEST 2'), (3,'TEST 3)

INSERT INTO Table_Example (Id, Value)
VALUES (4,'TEST 4'), (5,'TEST 5'), (6,'TEST 6)

END 
```

Table_Example 中的结果（已按照我的意愿设置了 Session_Id）

```
Id |    Value     | Session_Id
1       TEST        sakmfnsakjnfms-jkfhsajfs-1
...
6       TEST 6      sakmfnsakjnfms-jkfhsajfs-1 
```

这可以通过这样的功能来完成，还是有任何最佳做法？

# opengl - OpenGL 顶点数组/缓冲区对象

> ID：13342403
> 
> 赞同：5
> 
> 时间：2012-11-12T10:52:36.037
> 
> 标签：opengl, vbo, vao

**问题 1**

在某个 VAO 下创建的顶点缓冲区对象是否会在该 VAO 被删除后被删除？

一个例子：

```
glGenBuffers(1, &bufferObject);
glGenVertexArrays(1, &VAO);

glBindVertexArray(VAO);
glBindBuffer(GL_ARRAY_BUFFER, bufferObject);
glBufferData(GL_ARRAY_BUFFER, sizeof(someVertices), someVertices, 
             GL_STATIC_DRAW);
glEnableVertexAttribArray(positionAttrib);
glVertexAttribPointer(positionAttrib, 3, GL_FLOAT, GL_FALSE, 0, NULL); 
```

以后调用`glDeleteVertexArrays(1, &VAO);`时，也会`bufferObject`被删除吗？

我问的原因是我在网上看到了一些没有删除那些缓冲区对象的例子。

**问题2**

我可以为缓冲区对象分配的最大内存量是多少？当然，它必须取决于系统，但我似乎无法找到它的估计值。当显存不够大时会发生什么？我怎么会知道？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T11:04:36.490

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T11:03:54.933

**答案 1**

这取决于。如果您之前调用`glDeleteBuffers`过，它会在您删除 VAO 时被删除。如果没有，它不会。VAO 持有对 VBO 的引用，您的应用程序在调用`glGenBuffers`. 在删除 VBO 之前，需要释放这两个引用。

**答案 2**

（afaik）无法查询您可以分配的最大金额。但是，根据[参考文档](http://www.opengl.org/sdk/docs/man/xhtml/glBufferData.xml)，如果无法分配缓冲区，`glBufferData`则会发出。`GL_OUT_OF_MEMORY`

# android - 从通知栏启动应用程序

> ID：13342405
> 
> 赞同：0
> 
> 时间：2012-11-12T10:52:45.240
> 
> 标签：android, cordova, android-notifications, android-notification-bar

我正在使用 phonegap 开发一个 android 应用程序。我想从通知栏启动应用程序。虽然这可能是一个重复的问题，但似乎没有什么对我有用；我尝试过的链接很少。

[http://pilhuhn.blogspot.in/2010/12/pitfall-in-pendingintent-with-solution.html](http://pilhuhn.blogspot.in/2010/12/pitfall-in-pendingintent-with-solution.html)

[从 PUSH 通知中打开 android 应用](https://stackoverflow.com/questions/10194718/open-android-app-from-push-notification)

[通过通知项重新打开后台应用程序](https://stackoverflow.com/questions/2960459/re-open-background-application-via-notification-item)

从此链接开发的独立应用程序正在运行，但是当我与我的真实项目集成时，点击通知栏什么也没做，下面是我的代码

```
NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

Notification notification = new Notification(R.drawable.ic_launcher,"Message received", System.currentTimeMillis());
        notification.flags |= Notification.FLAG_ONLY_ALERT_ONCE | Notification.FLAG_AUTO_CANCEL;

Intent intent = new Intent(context, MyClass.class);

intent.putExtra("message", message);
intent.putExtra("shortMsg", shortMsg);
intent.putExtra("source", source);
intent.putExtra("phone", phone);
intent.putExtra("datetime", datetime);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

context.startActivity(intent);

PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        notification.setLatestEventInfo(context, "Message", "New message received", pendingIntent);

notificationManager.notify(0, notification); 
```

MyClass.class 代码，

```
Bundle extras = getIntent().getExtras();
if (extras != null) 
{
    System.out.println("in extras");            
    //Retrive data from the intent and store them in instance variables
    this.message = extras.getString("message");
    this.shortMsg = extras.getString("shortMsg");
    this.source = extras.getString("source");
    this.phone = extras.getString("phone");
    this.datetime = extras.getString("datetime");
} 
```

提前致谢，

七无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:01:56.373

我使用[`NotificationCompat.Builder`](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)它是因为它更容易实现。

```
Intent intent = new Intent(context, Main.class);
PendingIntent pintent = PendingIntent.getActivity(context, 0, intent, 0);
mNotification = new NotificationCompat.Builder(context)
      .setContentTitle(context.getString(R.string.app_name))
      .setContentText(message)
      .setContentIntent(pintent)
      .setSmallIcon(R.drawable.ic_notification)
      .setWhen(System.currentTimeMillis())
      .setAutoCancel(cancellable ? true : false)
      .setOngoing(cancellable ? false : true)
      .build();
notificationManager.notify(0, mNotification); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T06:53:32.760

使用 setContentIntent 并将挂起的意图作为参数传递。

```
Intent intent = new Intent(context, MyClass.class);
intent.putExtra("message", message);
intent.putExtra("shortMsg", shortMsg);
intent.putExtra("source", source);
intent.putExtra("phone", phone);
intent.putExtra("datetime", datetime);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pintent = PendingIntent.getActivity(context, 0, intent, 0);

mNotification = new NotificationCompat.Builder(context)
      .setContentTitle(context.getString(R.string.app_name))
      .setContentText(message)
      .setContentIntent(pintent)
      .setSmallIcon(R.drawable.ic_notification)
      .setContentIntent(pintent)
      .build();
notificationManager.notify(0, mNotification); 
```

# oauth - 什么是oauth域

> ID：13342412
> 
> 赞同：3
> 
> 时间：2012-11-12T10:53:17.140
> 
> 标签：oauth

什么是`oauth`域？有免费的`oauth`服务吗？我可以将它用于[StackApps 注册](https://stackapps.com/apps/oauth/register)吗？我用谷歌搜索了很多，但找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:26:13.000

它是存在身份验证[`redirect_uri`](https://api.stackexchange.com/docs/authentication)后将用户重定向到的域`OAuth 2.0`。

> 桌面应用程序不能直接参与 OAuth 2.0 流程，但是大多数框架中可用的可嵌入浏览器控件可以解决此限制。
> 
> 桌面应用程序应使用隐式客户端流，将进程托管在浏览器控件中。对于 redirect_uri， 应使用[https://stackexchange.com/oauth/login_success的值。](https://stackexchange.com/oauth/login_success)身份验证成功后，access_token 将与标准隐式身份验证一样放置在 url 哈希中。

那么使用[https://stackexchange.com/oauth/](https://stackexchange.com/oauth/)作为`OAuth`桌面应用程序的域是否安全？任何人都可以确认吗？

# macos - 第一次未调用 Cocoa 自定义 URL 方案选择器

> ID：13342414
> 
> 赞同：0
> 
> 时间：2012-11-12T10:53:34.127
> 
> 标签：macos, cocoa, url-scheme

我正在开发一个注册自定义 URL 方案的 Mac 应用程序。应用程序启动，但没有调用我的选择器方法，因此我无法解析 URL。应用程序启动后，后续的 URL 方案调用会导致调用选择器方法。

我有

```
[NSAppleEventManager sharedAppleEventManager] setEventHandler:self 
        andSelector:@selector(getUrl:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL]; 
```

on `AppDelegate applicationDidFinishLaunching`，现在将其移至该`init`方法而没有任何结果。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:01:49.980

实际上，将事件处理程序注册移动到`init`方法就可以了。在我的例子中，URL 是启动 XCode 归档应用程序而不是新归档的应用程序。

# javascript - 文档就绪在部分视图中无法正常工作

> ID：13342419
> 
> 赞同：0
> 
> 时间：2012-11-12T10:53:51.680
> 
> 标签：javascript, jquery, html, ajax, asp.net-mvc

我的主要观点：

```
@Ajax.ActionLink("append smth", "AddSmth", new AjaxOptions { UpdateTargetId = "smthContainer", InsertionMode.InsertAfter })

<div id="smthContainer"></div> 
```

我的控制器：

```
public ActionResult AddSmth()
{
    return PartialView("Smth");
} 
```

部分观点：

```
<input type="text" id="dateOfSmth" />

<script type="text/javascript">
$(document).ready(function () {
    $('#dateOfSmth').datepicker();
});
</script> 
```

问题是在将部分视图添加到文档之前调用了就绪函数，因此 $('#dateOfSmth') 为空。如果我用 InsertionMode.Replace 替换 InsertionMode.InsertAfter，一切正常。您知道为什么 InsertionMode.InsertAfter 不能正常工作吗？

编辑：使用 jQuery 附加视图时效果很好：

```
<a href="javascript:addSmth();"> Add Smth </a>

<script type="text/javascript">
                function addSmth() {
                    $.get('@Html.Raw(Url.Action("AddSmth"))', null, function (view) {
                        $('#smthContainer').append(view);
                    });
                }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:14:36.803

下面的代码来自 jQuery 代码库：

```
 // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
    if (!document.body) {
        return setTimeout(jQuery.ready, 1);
    } 
```

所以 ready 事件一直等到 body 元素被创建。如果在创建 body 元素之后添加局部视图，那么这就是您的函数执行过早的原因。

理论上，您可以在加载局部视图后执行类似的操作来执行代码。

```
function createDatePicker( ) {

    if ( !document.getElementById("dateOfSmth") ) {

        return setTimeout( createDatePicker, 1);
    }

    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:35:27.143

该`ready`事件被触发一次 - 当 DOM 完成加载时 - 当您插入 AJAX 加载的内容时不会再次触发。如果您在`ready`此之后添加事件处理程序，那么它将自动执行。

`InsertionMode.InsertAfter`该问题可能是由于两种插入模式以及`InsertionMode.Replace`处理`<script>`内容中标签的方式不同造成的。

如果可以，只需致电您的：

```
$('#dateOfSmth').datepicker(); 
```

加载 AJAX 内容后的行。

# mysql - 从外部服务器导出数据库（无 SSH 访问）

> ID：13342420
> 
> 赞同：3
> 
> 时间：2012-11-12T10:53:57.983
> 
> 标签：mysql, phpmyadmin, export, mysqldump

我们目前的网站由最初建立网站的设计机构托管，但是我们将网站的开发带到内部，因此需要从他们的服务器导出数据库并将其导入我们的服务器。

我们有 FTP 和 phpMyAdmin 访问权限，但没有对服务器的 SSH 访问权限。我希望运行一个 PHP 脚本，它将 mysql 转储数据库，压缩它，然后使用 scp 将其复制到我们的服务器：

`$backupFile = $_SERVER['DOCUMENT_ROOT'].'/backup' . date("Y-m-d-H-i-s") . '.gz';`

`system("mysqldump -h DB_HOST -u DB_USER -pDB_PASS DB_NAME | gzip > $backupFile");`

`exec("sshpass -p PASSWORD scp -r -P PORT_NUMBER $backupFile USER@x.xx.xx.xxx:/path/to/directory/");`

我已经从命令行本地运行了它，它运行良好，尽管我必须安装 sshpass（托管服务器可能没有安装它）。另外，我希望从浏览器运行它，因为我在托管服务器上没有命令行访问权限，但是它不起作用，但没有产生错误。

谁能推荐我如何从我没有 SSH 访问权限的服务器导出并导入到我的服务器？

谢谢

# devexpress - 如何在 XtraGrid 中实现类似 excel 的公式编辑器？

> ID：13342429
> 
> 赞同：2
> 
> 时间：2012-11-12T10:54:36.437
> 
> 标签：devexpress, xtragrid

我正在研究复杂的系统，它允许通过公式计算网格中的一些值。现在我在网格上方有文本框控件。它以这种方式工作：当您在就地编辑器中开始编辑并且第一个符号是“=”时 - 焦点移动到上面的那个文本框控件。此时网格是只读的，当用户单击网格单元格时 - 单击的单元格的坐标被传递给公式编辑器，因此它可以添加到公式的链接。当您在文本编辑器中按 Enter 或 Esc 时 - 公式正在写入基础数据集，并且网格可以重新编辑。

目标：

我希望它看起来更像 Excel 网格。不喜欢焦点跳到外面的某个地方。是否可以在保持编辑器打开的同时允许用户单击网格上的任意位置？那么，所有的公式编辑都将在就地编辑器中执行吗？现在，没有禁止关闭编辑器的事件。如果我使用 'ValidateEditor' 事件 - 它甚至不允许使用滚动条。有没有办法让编辑器保持打开状态并让导航正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:59:40.630

* * *

似乎我自己也找到了解决办法。我处理 ValidatingEditorEvent，如果编辑值以 '=' 开头，我在控件中设置布尔标志。另外，我记得光标位置之前和之后的文本，以及单元格坐标（FocusedRowHandle、FocusedColumn）。当我收到 Click 事件时，我会单击单元格坐标，并且如果设置了布尔标志 - 我会关注前一个单元格，激活编辑器并添加我需要的内容到编辑器中。似乎工作正常。

# sql - 根据部门ID切换DataContext

> ID：13342430
> 
> 赞同：0
> 
> 时间：2012-11-12T10:54:45.247
> 
> 标签：sql, datacontext

我公司有 2 个部门向不同类别的客户销售机票。两个部门的工单数据库不同，但里面的表是一样的。

我想根据部门ID插入数据行或操作数据。在过去，我可以使用变量部门ID 来确定哪个部门并连接到正确的数据库。而且由于表结构相同，其余代码可以共享。例如： SQLstr = "....来自 eAirsTable " + departmentID + " where ..."

但现在我是 DataContext，我不知道该怎么做。

```
 public class eAirs_OrderManager : IOrderInterface
    {
        public void Insert_OrderDB( Login _login)
        {

            if (_login.departmentID=="Orange")
            {
                OrderDB_testDataContext OrderDBDC = new OrderDB_testDataContext();                
            }

            if (_login.departmentID=="Tristar")
            {
                OrderDBDataContext OrderDBDC = new OrderDBDataContext();
            }

            OrderDBDC.... **<--cannot be done**
        }

        public void Insert_Member_simple
        {
            ...
        }
} 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:08:46.560

由于两个数据库的基础架构相同，因此仅创建一个具有两组不同连接字符串的数据上下文。

```
if (_login.departmentID=="Orange")
{
  OrderDBDataContext OrderDBDC = new OrderDBDataContext("ConnectionString 1");
}

if (_login.departmentID=="Tristar")
{
  OrderDBDataContext OrderDBDC = new OrderDBDataContext("ConnectionString 2c");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:57:04.980

为每个部门创建不同的连接字符串，并使用它来创建不同的上下文。

```
OrderDBDataContext OrderDBDC = new OrderDBDataContext(New DBConnection("DepartmentConnectionStringName")); 
```

# c++ - llvm::CloneBasicBlock 的示例

> ID：13342441
> 
> 赞同：2
> 
> 时间：2012-11-12T10:55:40.720
> 
> 标签：c++, c, compiler-construction, llvm

我试图找到一个使用的示例代码`llvm::CloneBasicBlock`，但找不到它。我遇到了 PHI 节点问题和指令支配问题。所以我会很感激任何教如何`llvm::CloneBasicBlock`正确使用的好的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:02:02.890

查看 LLVM 源代码本身有什么问题？`CloneBasicBlock`在许多地方使用。最简单的可能是`llvm::CloneFunctionInto`；它可能足以演示如何正确使用该函数（根据要传递的参数等）

一个更有趣的例子是 in `llvm::LoopUnroll`，它还必须处理来自 PHI 节点的引用。

# c# - 用户可能输入 NumericUpDown 负数？

> ID：13342443
> 
> 赞同：0
> 
> 时间：2012-11-12T10:55:44.837
> 
> 标签：c#, input, numericupdown

我有几个 groupBoxes 控件，每个控件都有一个 NumericUpDown 控件。NumericUpDowns 有一个小的修改 - 它们也可以在小数的负范围内递减。这是代码：

```
//Add KeyDown event to the numericUpDown control
numericUpDownGBPC12_angleRange.KeyDown += new KeyEventHandler(numericUpDownNegative); 
```

函数**numericUpDownNegative**的代码如下：

```
void numericUpDownNegative(object sender, KeyEventArgs e)
{
    NumericUpDown temp = (NumericUpDown)sender;
    temp.Value -= temp.Increment;
    sender = (object)temp;
    NumericUpDown temp = (NumericUpDown)sender;
} 
```

非常欢迎改进上述代码的建议，但是如果可以在 NumericUpDown 中启用负输入，我会更感兴趣。上面的代码有效，但是当我尝试输入负数时，我得到了一些奇怪的东西。此行为**不适**用于未修改的 NumericUpDown。

*示例：* 假设 numericUpDownGBPC12_angleRange 的**最小值为 -70.0000000000**，**最大值为 70.0000000000**，我通过控件的最小/最大属性参数设置。控件的起始值为 0.0000000000。如果我按下向下按钮，我会相应地得到 -0.0000000001、-0.0000000002、-0.0000000003 等，直到达到 -70.0000000000。但是，如果我决定输入 -x.xxxxxxxxxx（比如说 -24.2398324119），我会得到 x-0.0000000000（4-0.0000000000）。因此，我不仅无法输入完整的数字 24（在这种情况下，NumericUpDown 似乎采用了最后输入的数字，即 4），而且我在点完全消失之后得到了整个部分，除非它是通过使用以下情况设置的如果问题仅出在该点之前的部分。所以只能更改第一个数字（在数字的最左侧）。：-/

我正在考虑使用 textBox-controls，但是作为界面一部分的数字字段的数量将产生巨大的开销，因为每个 textBox 都会被解析（我们都知道，遗憾的是，许多用户喜欢尝试那些从未打算进行试验；)) 以确保输入了某个数字。尽管有负面影响，但 NumericUpDown 具有非常好的功能，例如 - 只能输入一个数字，您还可以指定精度、值的范围等。

所以问题又是 - NumericUpDown 是否有可能接受用户的否定输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:42:16.857

问题出在 KeyDown 事件中（必须完全删除它）**以及**我试图输入为数字的格式。我有“，”分隔符，而不是“。” 在我的 Visual Studio 中（由于本地化）。所以输入“。” 让 NumericUpDown 发狂。

# android - 一个人如何捕捉到 android 的 onsize 事件（或相等）

> ID：13342453
> 
> 赞同：1
> 
> 时间：2012-11-12T10:56:27.767
> 
> 标签：android, event-handling, resize, on-screen-keyboard

我正在尝试对我的应用程序中的大小变化做出反应。或者更具体地说，我试图弄清楚键盘何时出现。

我已经尝试过主窗口的@Override ... onSizeChanged()（RelativeLayout 视图扩展）它在我改变方向时被调用，但在我显示/隐藏键盘时不会被调用。
我的布局没有滚动，所以屏幕顶部的控件不在视野范围内，唯一让它们回来的方法是隐藏键盘。

我已经阅读了一堆其他网站并用谷歌搜索了这个网站的鼻涕，但这让我感到困惑。

哦..我正在使用 2.1（又名 7）的 android 版本，我希望能够在我自己的手机上运行该应用程序 :)

哦..所以问题。如何在 android 设备上捕获类似于 onSize 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:25:19.170

尝试在 manifest.xml 中添加以下相关活动

```
android:windowSoftInputMode="adjustPan" 

For Example

<activity android:name=".SignUp"
   android:screenOrientation="portrait"
   android:windowSoftInputMode="adjustPan" >
   <intent-filter>
        <action android:name="android.intent.action.ACTIVITY" />
   </intent-filter>
</activity> 
```

# redhat - 如何创建 RPM 以在 Redhat linux 中安装 openJDK JRE、PostgreSQL？

> ID：13342458
> 
> 赞同：0
> 
> 时间：2012-11-12T10:56:38.110
> 
> 标签：redhat, rpm, rpm-spec

我需要创建一个在 Redhat linux 中安装 JRE 和 PostgreSQL 的 rpm。我唯一知道的是我需要创建一个 .spec 文件并且需要提及执行此操作的说明。我可以通过在 linux 机器中安装每个 rpm 来手动完成，但我需要将它们捆绑在一起，以便我安装 rpm，然后安装 JRE 和 PostGreSQL。我是这个 rpm 创建的新手。有关如何执行此操作的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:32:37.797

您似乎想要做的事情称为“元包”。所以你的包实际上什么都不包含，而是从 repos 中拉下 Postgresql 和 JRE。

您需要为 Requires: line `Requires: <package1> <package2>` JRE 和 PostgreSQL 制作一个规范文件（我面前没有 rh 机器，所以我不知道实际名称），然后像这样构建

`rpmbuild -ba SPECS/metatest.spec`

有关详细信息，请参见此处 [http://www.linuxquestions.org/questions/linux-software-2/how-to-make-rpms-with-dependencies-meta-packages-720481/](http://www.linuxquestions.org/questions/linux-software-2/how-to-make-rpms-with-dependencies-meta-packages-720481/)

# javascript - 在元素内滚动会导致麻烦

> ID：13342464
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:57:06.510
> 
> 标签：javascript, html, css, scroll

HTML - Javascript - CSS3

我有一个包含文本的滚动元素。当用户使用滚动的侧栏滚动时，我页面中的所有按钮将忽略第一次单击它们，您需要单击第二次才能工作。

我另有解释：

我所有的按钮都工作正常，第一次点击它们（正常）。但是如果你在页面中滚动一个元素，那么下一次点击任何按钮都将不起作用……只有当你点击第二次时它才会起作用。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:04:59.310

我认为当你滚动时，某些东西会像你的元素一样重新初始化，所以滚动它们会消失，所以你应该重新初始化控件，它将起作用。您可以提供一些您编写的代码，这将使我们更清楚。

# eclipse - 从 Eclipse 插件写入标准输出

> ID：13342465
> 
> 赞同：2
> 
> 时间：2012-11-12T10:57:12.157
> 
> 标签：eclipse, eclipse-plugin

我的目标是扩展 eclipse QuickFix 组件并自动化解决语法错误的过程。基本上，QuickFix 组件提供了一个解决方案列表，我的任务是选择可能的最佳修复并将其应用于错误代码。但是，现在我被要求打印控制台中标记的分辨率。我试图制定一个教程，但我现在有点卡住了。我尝试锻炼的教程是：[http](http://www.informit.com/articles/article.aspx?p=370625&seqNum=21) ://www.informit.com/articles/article.aspx?p=370625&seqNum= 21 我首先在我的 plugin.xml 文件中添加了扩展名

```
<extension point="org.eclipse.ui.ide.markerResolution">
    <markerResolutionGenerator
        markerType="org.eclipse.core.resources.problemmarker"
        class="org.eclipse.escript.quickfix.QuickFixer"/>
</extension> 
```

然后我创建了两个类 QuickFixer 和 QuickFix。

```
package quickfixer;

import org.eclipse.core.resources.IMarker;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.ui.IMarkerResolution;
import org.eclipse.ui.IMarkerResolutionGenerator;

class QuickFixer implements IMarkerResolutionGenerator {

    public IMarkerResolution[] getResolutions(IMarker arg0) {
    try {
            Object problem = arg0.getAttribute("Whatsup");
            return new IMarkerResolution[] {
            new QuickFix("Fix #1 for "+problem),
            new QuickFix("Fix #2 for "+problem),
            };
        } catch(CoreException e) {
            return new IMarkerResolution[0];
        }
    }
} 
```

然后是 QuickFix 类：

```
package quickfixer;

import org.eclipse.core.resources.IMarker;
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.ui.IMarkerResolution;

public class QuickFix implements IMarkerResolution {

       String label;
       QuickFix(String label) {
          this.label = label;
       }
       public String getLabel() {
          return label;
       }

    public void run(IMarker arg0) {
        MessageDialog.openInformation(null, "QuickFix Demo",
                     "This quick-fix is not yet implemented");
        System.out.println("Label: " + label);              
    }
} 
```

我已经设法纠正了我遇到的所有错误，然后我运行了插件。我无法在控制台中打印出标签。有什么建议吗？？？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:02:41.377

使用`System.out`不是一个好主意。查看[相关的常见问题解答](http://wiki.eclipse.org/FAQ_Where_does_System.out_and_System.err_output_go?)，了解原因

> 您应该避免在插件中使用标准输出或标准错误

并使用正确的日志记录（或调试器）。

# javascript - 从客户端发送 post 请求到 node.js

> ID：13342466
> 
> 赞同：3
> 
> 时间：2012-11-12T10:57:12.687
> 
> 标签：javascript, node.js, mongodb, post

为了学习 node.js，我构建了一个非常简单的留言簿应用程序。基本上只有一个评论表格和一个先前评论的列表。目前，该应用程序仅在客户端，并且项目存储在本地存储中。

我想要做的是将项目发送到我将使用 Mongo DB 保存它们的节点。

问题是我还没有找到一种方法来建立连接以使用 POST 请求在客户端和 node.js 之间来回发送数据。

在服务器端，我为请求添加了侦听器并等待数据：

```
request.addListener('data', function(chunk) {
    console.log("Received POST data chunk '"+ chunk + "'.");
}); 
```

在客户端，我使用简单的 AJAX 请求发送数据：

```
$.ajax({
    url: '/',
    type: 'post',
    dataType: 'json',
    data: 'test'
}) 
```

目前这根本行不通。可能是我不知道在 AJAX 请求“url”参数中放置什么 url。或者整个事情可能只是使用错误的方法进行构建。

我也尝试过实现[这里](http://nodejs.org/api/http.html#http_http_request_options_callback)描述的方法，但也没有成功。

如果有人可以分享一些关于如何使这项工作（从客户端发送 POST 请求到节点并返回）的提示或分享任何好的教程，那将真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-22T20:26:01.310

我刚刚创建了你想尝试在客户端和服务器之间建立一个 json 数据连接的skiliton，它可以工作你可以检查下面的代码

服务器端 ：

```
var http = require("http");
var url = require("url");
var path = require("path");
var ServerIP = '127.0.0.1',
    port = '8080';

var Server = http.createServer(function (request , response) {
    console.log("Request Recieved" + request.url);
    var SampleJsonData = JSON.stringify([{"ElementName":"ElementValue"}]);
    response.end('_testcb(' + SampleJsonData + ')'); // this is the postbackmethod
   }); 
Server.listen(port, ServerIP, function () {
    console.log("Listening..." + ServerIP + ":" + port);
});
```

客户端 ：

```
jQuery.ajax({
    type: 'GET',
    url: 'http://127.0.0.1:8080/',
    async: false,
    contentType: "text/plain",  // this is the content type sent from client to server
    dataType: "jsonp",
    jsonpCallback: '_testcb',
    cache: false,
    timeout: 5000,
    success: function (data) {

    },
    error: function (jqXHR, textStatus, errorThrown) {
           alert('error ' + textStatus + " " + errorThrown);
    }
});

 }
 function _testcb(data) {
//write your code here to loop on json data recieved from server
 }
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:03:57.347

我强烈推荐 node.js 的 socket.io-modul ( [http://socket.io/](http://socket.io/) )。它使建立连接和来回传递数据变得非常容易！它是事件驱动和非阻塞的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T14:43:01.223

您可以使用另一个回调。

只需添加这个

```
response.addListener('end', function(){
    console.log('done')
    // Now use post data.
}); 
```

阅读帖子数据后。

我有同样的问题，它的工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-24T18:12:11.890

为此使用 socket.io。对于客户端和服务器之间的通信，使用 emit() 和 on() 方法。例如：如果您想从客户端向服务器发送 post 数据，请在客户端发出带有 post 参数的事件。现在在服务器端创建一个事件监听器，它监听客户端发出的相同事件。在客户端：

```
 socket=io();
    $('form').submit(function(){
    var param1=$('param1').val();
    ...
    socket.emit('mypost',param1);
    }); 
```

在服务器端：

```
 var io=socket(require('http').Server(require('express')()));
    io.on('connection',function(client){
        client.on('mypost',function(param1){
            //...code to update database
        });
    }); 
```

# php - 在 PHP foreach 数组中的项目中从 SQL 中获取多行

> ID：13342467
> 
> 赞同：0
> 
> 时间：2012-11-12T10:57:14.990
> 
> 标签：php, mysqli

我尝试请求一个 ID 数组，返回具有该 ID 的每一行，并将每个行推入一个数组`$finalArray`

但只会输出 Query 的第一个结果，而在第二个结果中`foreach`，它会跳过`while`循环。

我有这个在另一个脚本中工作，所以我不明白哪里出错了。

`$arrayItems`是一个数组，包含：`"home, info"`

```
 $finalArray = array(); 
 foreach ($arrayItems as $UID_get)
 {
     $Query =   "SELECT * 
                FROM items
                WHERE (uid = '" . cleanQuery($UID_get) . "' )
                ORDER BY uid";

  if($Result = $mysqli->query($Query))
  {
        print_r($UID_get);
        echo "<BR><-><BR>";

      while ($Row = $Result->fetch_assoc())
      {
        array_push($finalArray , $Row);
        print_r($finalArray );
        echo "<BR><><BR>";
      }
   } 
   else
   {
    echo '{ "returned" : "FAIL" }'; //. mysqli_connect_errno() . ' ' . mysqli_connect_error() . "<BR>";
   }
 } 
```

（cleanQuery 是转义和stripslashes）

我想要得到的是一个多行数组（在我对其进行 json_encoded 之后，例如：

```
{ "finalArray" : 
    { "home": 
        { "id":"1",
          "created":"0000-00-00 00:00:00",
          "css": "{ \"background-color\" : \"red\" }"
        } 
    }, 
    { "info": 
        { "id":"2",
          "created":"0000-00-00 00:00:00",
          "css":"{ \"background-color\" : \"blue\" }"
        } 
    } 
} 
```

但那是在我从数据库中获得两者或更多结果之后。

`print_r($UID_get);`确实打印了`info`，但是什么也没有。

那么，为什么我没有得到第二行`info`呢？我本质上是在重新查询 foreach $arrayItem 对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:04:28.940

结果...数组中的前导空格，因为第二项必须修剪：

```
trim($UID_get); 
```

谢谢 GBD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:18:27.437

从mysql资源获取数组后，尝试执行以下函数，通过将获取的数组作为参数传递。（在你的while循环内）

```
 function array_remove_indexes(&$arr)
    {
        $new_arr = array();
        foreach($arr as $name => $val)
        {
            if(!is_int($name))$new_arr[$name]=$val;
        }
        $arr = $new_arr;
    } 
```

# agile - 跨多个平台管理共享产品积压项目

> ID：13342472
> 
> 赞同：0
> 
> 时间：2012-11-12T10:57:52.383
> 
> 标签：agile, scrum

我正在使用 TFS 2012 开发一个可用作网站和移动应用程序的应用程序，即 Windows Phone、Android 等。虽然我一直在为这个应用程序建立一个功能列表，但我注意到很多其中一些将在所有平台上可用，我不确定如何在产品积压中管理它们。

例如，将有一个使用 Facebook 帐户登录的选项，用户将能够在网站和移动应用程序上执行此操作。

所以我的想法是我会创建一个产品积压项目“使用 Facebook 帐户登录”并将其分配给一个名为“网站”的区域。然后，我将创建另一个具有相同标题的积压项目，但这次将其分配给一个名为“Windows Phone”的区域。因此，我的积压工作将有两个项目，它们的标题相同，但区域不同。

我的想法是我可以将网站的“登录...”待办事项分配给一个 sprint，然后将 Windows Phone 的“登录...”待办事项分配给另一个 sprint。

看到我是使用敏捷/Scrum 的新手，这会被认为是管理产品积压的可行方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:04:57.110

我认为每个人都应该是一个不同的故事。为什么？您可能会对每个故事有不同的接受标准，并且（希望）为 Web 和移动设备使用不同的布局。

将故事分成小块的一些好处是：

*   您的测试人员将从 sprint 的第二天开始测试故事，而不是在 sprint 的最后一天获得一批。
*   它增加了流量（我知道这更像是看板，但我认为这是一个很好的症状）
*   在 sprint 结束时拥有一个正在进行中的故事变得更加困难。

我发现[这个思维导图](http://rslawrence.wpengine.com/wp-content/uploads/2012/01/Story-Splitting-Flowchart.pdf)非常有用，可以指导我将故事分解成最小的可交付单元。

# android - Android - 编写一个打开相机并拍照的测试

> ID：13342474
> 
> 赞同：0
> 
> 时间：2012-11-12T10:58:08.223
> 
> 标签：android

我不想进行打开相机并拍照的集成测试。可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:03:09.313

这可以通过使用 CAMERA 的内部意图来完成。以下是一些启动链接：

[安卓相机演示](http://www.vogella.com/articles/AndroidCamera/article.html)

[相机示例](https://github.com/josnidhin/Android-Camera-Example)

[Android 相机示例](http://android-helper.blogspot.in/2012/04/android-camera-example.html)

# php - foreach循环中的php echo json

> ID：13342478
> 
> 赞同：2
> 
> 时间：2012-11-12T10:58:31.397
> 
> 标签：php, ajax, json

我有这样的产品ID 1,2,3 in`$product_ids`

```
$product_ids = explode(',', $product_ids);
$product_ids = array_filter($product_ids);

foreach ($product_ids as $key => $product_id) {

      $sth = $this->db->prepare("SELECT * FROM products Where id =:id ");
      $sth->execute(array( ':id' => $product_id ));
      $final_data = $sth->fetchAll();

      echo json_encode($final_data);
} 
```

我如何`json`在for循环回显中使用此代码格式化`json`不工作有没有其他方法请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:03:21.677

```
 $product_ids = explode(',', $product_ids);
    $product_ids = array_filter($product_ids);
    $final_data = array();
    foreach ($product_ids as $key => $product_id) {

          $sth = $this->db->prepare("SELECT * FROM products Where id =:id ");
          $sth->execute(array( ':id' => $product_id ));
          $final_data[$product_id] = $sth->fetchAll();

    }
    echo json_encode($final_data); 
```

# ms-access-2007 - 使用 Where 语句计算相关表中的字段

> ID：13342487
> 
> 赞同：0
> 
> 时间：2012-11-12T10:59:06.933
> 
> 标签：ms-access-2007

我想用 WHERE 语句计算相关表中的字段。

为了计算相关表中的数据，我使用了这个语句。

```
=DCount("ID","Customers","AddressID=" & AddressID) 
```

我必须为客户注册的每个地址计算客户，我将在其中检查每个地址有多少客户被禁止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:06:51.193

您可以像这样构建 where 语句：

```
=DCount("ID","Customers","Banned = False And AddressID=" & AddressID)
=DCount("ID","Customers","Banned = 'No' And AddressID=" & AddressID)
=DCount("ID","Customers","Banned = ""No"" And AddressID=" & AddressID)
=DCount("ID","Customers","DateBanned = #2012/09/21# And AddressID=" & AddressID) 
```

域聚合函数（如[DCount](http://msdn.microsoft.com/en-us/library/office/aa211471%28v=office.11%29.aspx) ）的第三个参数是 where 语句（条件），您可以在该参数中使用您将在查询中使用的大多数表达式。

# windows - 从 R 控制台窗口等效于 wget

> ID：13342488
> 
> 赞同：2
> 
> 时间：2012-11-12T10:59:12.563
> 
> 标签：windows, r, wget

嗨，我想知道 wget 的 windows 等效项是什么

我目前在 R 中有一个具有命令的函数

```
system("wget www.random.url.com/file") 
```

从运行 R 的 mac/unix 机器从 Internet 下载文件...在 Windows 中，R 的等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:18:31.197

查看`download.file`下载文件到您的计算机。这适用于所有操作系统，包括 Linux、Mac 和 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T04:10:09.133

```
powershell -command "iwr -outf abc.zip http://example.com/xyz.zip" 
```

# c# - 在 xaml 行中间添加文本

> ID：13342493
> 
> 赞同：1
> 
> 时间：2012-11-12T10:59:55.910
> 
> 标签：c#, xaml

嗨，我在 C# 中创建了一个带有节点和边的 UML 图。这些节点通过边缘连接到其他节点，但我想在边缘添加文本。

为了绘制边缘，我使用 Bindings 来 startNode 和 endNode（简单）。

```
<Line Stroke="Black" X1="{Binding StartNode.Center_x}" Y1="{Binding StartNode.Center_y}" X2="{Binding EndNode.Center_x}" Y2="{Binding EndNode.Center_y}" StrokeThickness="5"/> 
```

在边缘之前或之后添加文本很简单，但如果我这样做，它会被连接的节点覆盖。

我的问题是，如何在行中间添加标签或文本框？

我是否需要创建两行，一行在文本的开头和之前，第二行在文本之后和结尾？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:16:10.373

我认为解决您的问题的更好方法是拥有一个像面板一样的 UI 容器，然后在容器内绘制线条并根据需要放置文本，这可以帮助您覆盖多个对象的困境。

# jquery - 如何更改数据表的语言

> ID：13342494
> 
> 赞同：39
> 
> 时间：2012-11-12T10:59:55.857
> 
> 标签：jquery, datatables

我将用户想要翻译的语言存储在会话变量中，但我不知道将其传递给 DataTables

我[在数据表网站上找到了这个解释，](http://datatables.net/examples/advanced_init/language_file.html)但这并没有真正帮助，我在哪里设置语言参数？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-12T11:04:41.547

您必须创建一个语言文件，然后使用：

```
"oLanguage": {
  "sUrl": "media/language/your_file.txt"
} 
```

我不确定您使用的是哪种服务器语言，但这样的东西可以在 PHP 中使用：

```
"oLanguage": {
  "sUrl": "media/language/custom_lang_<?php echo $language ?>.txt"
} 
```

Where`language`匹配特定语言的文件名。

或更改个人设置：

```
"oLanguage": {
  "sLengthMenu": "Display _MENU_ records per page",
  "sZeroRecords": "Nothing found - sorry",
  "sInfo": "Showing _START_ to _END_ of _TOTAL_ records",
  "sInfoEmpty": "Showing 0 to 0 of 0 records",
  "sInfoFiltered": "(filtered from _MAX_ total records)"
} 
```

有关更多详细信息，请阅读：[http ://datatables.net/plug-ins/i18n](http://datatables.net/plug-ins/i18n)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-10-04T15:02:40.817

```
//Spanish
$('#TableName').DataTable({
    "language": {
        "sProcessing":    "Procesando...",
        "sLengthMenu":    "Mostrar _MENU_ registros",
        "sZeroRecords":   "No se encontraron resultados",
        "sEmptyTable":    "Ningún dato disponible en esta tabla",
        "sInfo":          "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
        "sInfoEmpty":     "Mostrando registros del 0 al 0 de un total de 0 registros",
        "sInfoFiltered":  "(filtrado de un total de _MAX_ registros)",
        "sInfoPostFix":   "",
        "sSearch":        "Buscar:",
        "sUrl":           "",
        "sInfoThousands":  ",",
        "sLoadingRecords": "Cargando...",
        "oPaginate": {
            "sFirst":    "Primero",
            "sLast":    "Último",
            "sNext":    "Siguiente",
            "sPrevious": "Anterior"
        },
        "oAria": {
            "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
        }
    }
}); 
```

还使用cdn：

```
//cdn.datatables.net/plug-ins/a5734b29083/i18n/Spanish.json 
```

更多选项：[http](http://www.datatables.net/plug-ins/i18n/English) ://www.datatables.net/plug-ins/i18n/English [| 西班牙语 | ETC]

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-12T14:40:55.043

很抱歉恢复这个线程，我知道有解决方案，但很容易用数据表更改语言。在这里，我给你留下我自己的数据表示例。

```
$(document).ready(function ()
// DataTable
        var table = $('#tblUsuarios').DataTable({
            aoColumnDefs: [
                {"aTargets": [0], "bSortable": true},
                {"aTargets": [2], "asSorting": ["asc"], "bSortable": true},
            ],
            "language": {
                "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"
            }

    }); 
```

您从以下链接获得的语言：

[http://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n](http://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n)

只需将语言选项中的 URL 值替换为您喜欢的值即可。请记住始终使用逗号

* * *

为我工作，希望它对任何人都有效。

此致！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-30T21:07:27.003

法语翻译：

```
$('#my_table').DataTable({
  "language": {
    "sProcessing": "Traitement en cours ...",
    "sLengthMenu": "Afficher _MENU_ lignes",
    "sZeroRecords": "Aucun résultat trouvé",
    "sEmptyTable": "Aucune donnée disponible",
    "sInfo": "Lignes _START_ à _END_ sur _TOTAL_",
    "sInfoEmpty": "Aucune ligne affichée",
    "sInfoFiltered": "(Filtrer un maximum de_MAX_)",
    "sInfoPostFix": "",
    "sSearch": "Chercher:",
    "sUrl": "",
    "sInfoThousands": ",",
    "sLoadingRecords": "Chargement...",
    "oPaginate": {
      "sFirst": "Premier", "sLast": "Dernier", "sNext": "Suivant", "sPrevious": "Précédent"
    },
    "oAria": {
      "sSortAscending": ": Trier par ordre croissant", "sSortDescending": ": Trier par ordre décroissant"
    }
  }
}); 
```

});

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-01T21:43:06.277

在 dataTables 网站[https://datatables.net/plug-ins/i18n/](https://datatables.net/plug-ins/i18n/)上的 CDN 中上传了语言文件， 因此您只需将“西班牙语”替换为您在以下示例中使用的任何语言。

[https://datatables.net/plug-ins/i18n/西班牙语](https://datatables.net/plug-ins/i18n/Spanish)

```
$('table.dataTable').DataTable( {
    language: {
        url: '//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json'
    }
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-14T14:56:32.307

阿拉伯语

```
 var table = $('#my_table')
                .DataTable({
                 "columns":{//......}
                 "language": 
                        {
                            "sProcessing": "جارٍ التحميل...",
                            "sLengthMenu": "أظهر _MENU_ مدخلات",
                            "sZeroRecords": "لم يعثر على أية سجلات",
                            "sInfo": "إظهار _START_ إلى _END_ من أصل _TOTAL_ مدخل",
                            "sInfoEmpty": "يعرض 0 إلى 0 من أصل 0 سجل",
                            "sInfoFiltered": "(منتقاة من مجموع _MAX_ مُدخل)",
                            "sInfoPostFix": "",
                            "sSearch": "ابحث:",
                            "sUrl": "",
                            "oPaginate": {
                                "sFirst": "الأول",
                                "sPrevious": "السابق",
                                "sNext": "التالي",
                                "sLast": "الأخير"
                            }
                        }
                }); 
```

参考：[https ://datatables.net/plug-ins/i18n/Arabic](https://datatables.net/plug-ins/i18n/Arabic)

作者：奥萨马·哈亚特

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-10T08:49:32.447

请记住，您必须准确指定您的 language.JSON 路径，如下所示：

```
language: {
    url: '/mywebsite/js/localisation/German.json'
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-28T17:49:37.053

这的确是

```
language: {
 url: '//URL_TO_CDN'
} 
```

问题不是所有的数据表（在撰写本文时）都是有效的 JSON。例如繁体中文文件就是其中之一。

为了解决这个问题，我用 JavaScript 编写了以下代码：

```
 var dataTableLanguages = {
    'es': '//cdn.datatables.net/plug-ins/1.10.21/i18n/Spanish.json',
    'fr': '//cdn.datatables.net/plug-ins/1.10.21/i18n/French.json',
    'ar': '//cdn.datatables.net/plug-ins/1.10.21/i18n/Arabic.json',
    'zh-TW': {
      "processing": "處理中...",
      "loadingRecords": "載入中...",
      "lengthMenu": "顯示 _MENU_ 項結果&quot;,
      "zeroRecords": "沒有符合的結果&quot;,
      "info": "顯示第 _START_ 至 _END_ 項結果，共 _TOTAL_ 項&quot;,
      "infoEmpty": "顯示第 0 至 0 項結果，共 0 項&quot;,
      "infoFiltered": "(從 _MAX_ 項結果中過濾)",
      "infoPostFix": "",
      "search": "搜尋:",
      "paginate": {
        "first": "第一頁&quot;,
        "previous": "上一頁&quot;,
        "next": "下一頁&quot;,
        "last": "最後一頁&quot;
      },
      "aria": {
        "sortAscending": ": 升冪排列",
        "sortDescending": ": 降冪排列"
      }
    }
  };
  var language = dataTableLanguages[$('html').attr('lang')];

  var opts = {...};

  if (language) {
    if (typeof language === 'string') {
       opts.language = {
         url: language
       };
    } else {
       opts.language = language;
    }
  } 
```

现在使用 opts 作为数据表的选项对象，例如

```
$('#list-table').DataTable(opts) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-27T15:02:20.643

Tradução para Português Brasil

```
 $('#table_id').DataTable({
    "language": {
        "sProcessing":    "Procesando...",
        "sLengthMenu":    "Exibir _MENU_ registros por página",
        "sZeroRecords":   "Nenhum resultado encontrado",
        "sEmptyTable":    "Nenhum resultado encontrado",
        "sInfo":          "Exibindo do _START_ até _END_ de um total de _TOTAL_ registros",
        "sInfoEmpty":     "Exibindo do 0 até 0 de um total de 0 registros",
        "sInfoFiltered":  "(Filtrado de um total de _MAX_ registros)",
        "sInfoPostFix":   "",
        "sSearch":        "Buscar:",
        "sUrl":           "",
        "sInfoThousands":  ",",
        "sLoadingRecords": "Cargando...",
        "oPaginate": {
            "sFirst":    "Primero",
            "sLast":    "Último",
            "sNext":    "Próximo",
            "sPrevious": "Anterior"
        },
        "oAria": {
            "sSortAscending":  ": Ativar para ordenar a columna de maneira ascendente",
            "sSortDescending": ": Ativar para ordenar a columna de maneira descendente"
        }
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-08T18:12:05.640

如果你使用 Angular 和 Firebase，你也可以使用 DTOptionsBuilder ：

```
angular.module('your_module', [
'ui.router',
'oc.lazyLoad',
'ui.bootstrap',
'ngSanitize',
'firebase']).controller("your_controller", function ($scope, $firebaseArray, DTOptionsBuilder) {

var ref = firebase.database().ref().child("your_database_table");

// create a synchronized array
$scope.your_database_table = $firebaseArray(ref);

ref.on('value', snap => {

    $scope.dtOptions = DTOptionsBuilder.newOptions()
        .withOption('language',
        {
            "sProcessing": "Traitement en cours...",
            "sSearch": "Rechercher&nbsp;:",
            "sLengthMenu": "Afficher _MENU_ &eacute;l&eacute;ments",
            "sInfo": "Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",
            "sInfoEmpty": "Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",
            "sInfoFiltered": "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
            "sInfoPostFix": "",
            "sLoadingRecords": "Chargement en cours...",
            "sZeroRecords": "Aucun &eacute;l&eacute;ment &agrave; afficher",
            "sEmptyTable": "Aucune donn&eacute;e disponible dans le tableau",
            "oPaginate": {
                "sFirst": "Premier",
                "sPrevious": "Pr&eacute;c&eacute;dent",
                "sNext": "Suivant",
                "sLast": "Dernier"
            },
            "oAria": {
                "sSortAscending": ": activer pour trier la colonne par ordre croissant",
                "sSortDescending": ": activer pour trier la colonne par ordre d&eacute;croissant"
            }
        }
        )

});}) 
```

我希望这将有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-30T14:12:58.050

您好，在 wich 文件中我必须将此代码用于法语翻译，我不太了解翻译过程

```
$('#userList').DataTable({
"language": {
    "sProcessing": "Traitement en cours ...",
    "sLengthMenu": "Afficher _MENU_ lignes",
    "sZeroRecords": "Aucun résultat trouvé",
    "sEmptyTable": "Aucune donnée disponible",
    "sInfo": "Lignes _START_ à _END_ sur _TOTAL_",
    "sInfoEmpty": "Aucune ligne affichée",
    "sInfoFiltered": "(Filtrer un maximum de_MAX_)",
    "sInfoPostFix": "",
    "sSearch": "Chercher:",
    "sUrl": "",
    "sInfoThousands": ",",
    "sLoadingRecords": "Chargement...",
    "oPaginate": {
        "sFirst": "Premier", "sLast": "Dernier", "sNext": "Suivant", "sPrevious": "Précédent"
    },
    "oAria": {
        "sSortAscending": ": Trier par ordre croissant", "sSortDescending": ": Trier par ordre décroissant"
    }
} 
```

});

# sharepoint - 发布 Infopath 表单问题：无效的 URL

> ID：13342495
> 
> 赞同：0
> 
> 时间：2012-11-12T10:59:58.840
> 
> 标签：sharepoint, sharepoint-2010

`http://vikbehal:7/sites/Sneham/`这是我的门户网站的 URL。在发布信息路径表单时，它给出了错误，`"Invalid Location http://vikbehal:7/sites/Sneham/_layouts/viewlsts.aspx"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:38:23.720

`Need to create site collection at toor level, giving virtual path will not accept path`. 所以去`http://mysite/`而不是`http://mysite/sites/xyz`

# wpf - WPF 创建多用途控件

> ID：13342503
> 
> 赞同：1
> 
> 时间：2012-11-12T11:00:41.400
> 
> 标签：wpf, xaml

我正在尝试创建一个显示单个控件和 2 个按钮的 WPF 窗口。控件可以是 TextBox、ComboBox 或 Slider，具体取决于选择用于启动此窗口的对象类型。

是否可以这样做，或者我必须创建一个带有 3 个控件的窗口并在运行时操纵它们的位置？

问候

托尼

**对原始问题的补充**

我的实现如下

```
<Window.Resources>
        <Style TargetType="TextBox" x:Key="TextBoxTemplate">
            <Setter Value="{Binding ElementName=MyWindow, Path=m_csValue}" />
        </Style>
        <Style TargetType="{x:Type ComboBox}" x:Key="ComboBoxTemplate">
            <Setter Value="{Binding ElementName=MyWindow, Path=ItemsForSelection}" />
        </Style>
        <Style TargetType="{x:Type Slider}" x:Key="SliderTemplate">
            <Setter Value="{Binding ElementName=MyWindow, Path=SliderDetail}" />
        </Style>

        <Style TargetType="{x:Type ContentControl}" x:Key="DisplayValues">
            <!-- Default Template -->
            <Setter Property="ContentTemplate" Value="{StaticResource TextBoxTemplate}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=MyWindow, Path=eType}" Value="{x:Static local:eTagDisplay.Text}">
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <ControlTemplate Template="{StaticResource TextBoxTemplate}" />
                        </Setter.Value>
                    </Setter> 
                 </DataTrigger>
                <!-- DataTrigger Binding="{Binding ElementName=MyWindow, Path=eType}" Value="{x:Static local:eTagDisplay.Combo}">
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <ControlTemplate Template="{StaticResource ComboBoxTemplate}" />
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding ElementName=MyWindow, Path=eType}" Value="{x:Static local:eTagDisplay.Slider}">
                <Setter Property="ContentTemplate">
                    <Setter.Value>
                        <ControlTemplate Template="{StaticResource SliderTemplate}" />
                    </Setter.Value>
                </Setter>
                </DataTrigger -->
            </Style.Triggers>
        </Style>
</Window.Resources>

<Grid Width="267">
    <StackPanel Name="TagEditor1">
        <!-- Text="{Binding ElementName=MyWindow, Path=m_csValue}" / -->
        <ContentControl Style="{StaticResource DisplayValues}" />
    </StackPanel>

    <Button Content="OK" Height="23" HorizontalAlignment="Left" Margin="12,154,0,0" Name="btnOK" VerticalAlignment="Top" Width="75" Click="OnClkOK" />
    <Button Content="Cancel" Height="23" HorizontalAlignment="Left" Margin="180,154,0,0" Name="btnCancel" VerticalAlignment="Top" Width="75" Click="OnClkCancel" IsCancel="True" />
</Grid> 
```

我收到错误“System.Windows.Style”不是 setter 上“System.Windows.Controls.ContentControl.ContentTemplate”属性的有效值。我不知道为什么会这样。我相信我的绑定没问题，因为它可以拾取字符串......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:56:56.780

我会根据需要的控件类型`<ContentControl>`使用不同的控件来执行此操作。`<ContentTemplate>`

您没有指定控件类型是如何传递到窗口的，因此您的`DataTrigger`绑定可能看起来与我的有点不同，但这应该给您正确的想法：

```
<DataTemplate TargetType="{x:Type ContentControl}" x:Key="TextBoxTemplate">
    <TextBox ... />
</DataTemplate>
<DataTemplate TargetType="{x:Type ContentControl}" x:Key="ComboBoxTemplate">
    <ComboBox ... />
</DataTemplate>
<DataTemplate TargetType="{x:Type ContentControl}" x:Key="SliderTemplate">
    <Slider ... />
</DataTemplate>

<Style x:Key="MyStyle" TargetType="{x:Type ContentControl}">
    <!-- Default Template -->
    <Setter Property="ContentTemplate" 
            Value="{StaticResource TextBoxTemplate}" />

    <Style.Triggers>
        <DataTrigger Binding="{Binding SomeBoundValue}" Value="ComboBox">
            <Setter Property="ContentTemplate" 
                    Value="{StaticResource ComboBoxTemplate}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding SomeBoundValue}" Value="Slider">
            <Setter Property="ContentTemplate"
                    Value="{StaticResource SliderTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style>

...

<ContentControl Style="{StaticResource MyStyle}" /> 
```

您还可以允许用户`Content`为您的`UserControl`or指定 a `Window`，并使用`ContentPresenter`绑定到`Content`. 像这样的东西：

```
<UserControl.Template>
    <StackPanel>
        <ContentPresenter Content="{TemplateBinding Content}" />
        <Button ... />
        <Button ... />
    </StackPanel>
</UserControl.Template> 
```

那么你可以像这样使用它：

```
<local:MyUserControl>
    <TextBox ... />
</local:MyUserControl>

<local:MyUserControl>
    <ComboBox ... />
</local:MyUserControl>

<local:MyUserControl>
    <Slider ... />
</local:MyUserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:43:57.553

我认为单个窗口是可能的。通过公开一个基于某些条件设置可见性的属性。即文本框可见性设置为visibility.visible 和combobox,slider visibilty 设置为visibility.collpased.similarly，如果你想让combobox 可见，你可以让combobox 可见而其他collapsed.similarly 对于滑块。

例子：

```
 public Visibility TextboxVisibility
    {
        set
        {
            Visibility visible = value;
            Textboxname.Visibility = visible ;
        }
    } 
```

我希望这回答了你的问题

# android - 我想从android中的二维数组中删除一个空列？

> ID：13342504
> 
> 赞同：0
> 
> 时间：2012-11-12T11:00:41.567
> 
> 标签：android

我在可扩展列表视图中的数据绑定有问题。我在这里使用

```
ArrayList<ExpandListGroup> list = new ArrayList<ExpandListGroup>(); 
```

ExpandListGroup 用于数据绑定。但总和二维数组有空值。数据是动态的。

例如：

```
String [] [] array1 = [[one,two,three,null],[seven,six,null]] ; 
```

我想从这个二维数组中删除空列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:18:50.893

您需要获取中间数组列表和结果数组并按照以下步骤操作。

1.  首先将源数组（包含空）复制到arraylist。
2.  然后从 arraylist 中删除 null
3.  然后创建新数组并将数据从数组列表复制到数组。

    私人无效remove_nulls（）{

    ```
     String [] [] array1 = {{"one","two","three",null},{"seven","six",null}} ;
         ArrayList<ArrayList<String>> contact = new ArrayList<ArrayList<String>>();

         for(int i=0;i<array1.length;i++)
         {
             ArrayList<String> con = new ArrayList<String>();
             for(int j=0;j<array1[i].length;j++)
             {

                 if(array1[i][j]!=null)
                 con.add(array1[i][j]);
             }
             if(con.size()>0)
                 contact.add(con);
         }
         String [] [] array2 = new String[array1.length][];
         for(int i=0;i<contact.size();i++)
         {
             array2[i]=new String[contact.get(i).size()];
             for(int j=0;j<contact.get(i).size();j++)
             {
                 array2[i][j]=contact.get(i).get(j);
             }
         }

     } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:33:55.743

除非这个问题有什么技巧......

```
String[][] array1 = {{"one", "two", "three", null}, {"seven", "six", null}};

List<String[]> newList = new ArrayList<>();

for (int i = 0; i < array1.length; ++i) {
    List<String> currentLine = new ArrayList<>();
    for (int j = 0; j < array1[i].length; ++j) {
        if (array1[i][j] != null) {
            currentLine.add(array1[i][j]);
        }
    }
    //create the array in place
    newList.add(currentLine.toArray(new String[currentLine.size()]));
}
//no need to use an intermediate array
String[][] array2 = newList.toArray(new String [newList.size()][]);

//And a test for array2
for (int i = 0; i < array2.length; ++i) {
    for (int j = 0; j < array2[i].length; ++j) {
        System.out.print(array2[i][j] + " ");
    }
    System.out.println();
}

System.out.println("Compared to...");
//Compared to the original array1
for (int i = 0; i < array1.length; ++i) {
    for (int j = 0; j < array1[i].length; ++j) {
        System.out.print(array1[i][j] + " ");
    }
    System.out.println();
} 
```

# matlab - 基本行操作

> ID：13342505
> 
> 赞同：0
> 
> 时间：2012-11-12T11:00:50.557
> 
> 标签：matlab, matrix

```
A=  
  3  4  6  1  
 -1  0  6  5  
  8  1  0  4  
 -1 -2  1  3 
```

如何使用基本行操作将 A 转换为简化的行梯形。我无法解决，因为我无法使用该`rref()`命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:26:26.963

如果您的问题是关于 Matlab 的使用，答案当然是初级的。例如，您可以这样切换行：

```
A([4 2],:) = A([2 4],:) 
```

您可以通过这种方式将一行乘以一个常数

```
A(3,:) = 3*A(3,:) 
```

我会让你弄清楚如何将行添加在一起。

如果您的问题是关于减少`A`到行梯形形式的数学，那将是关于 SO 的题外话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:32:28.113

了解 MATLAB 是很有用的`rrefmovie`，它曾经包含在 MATLAB 中，但后来被删除了。它需要一个矩阵遍历这些步骤，以生成一个简化的行梯形矩阵，识别枢轴/消除并在此过程中显示部分简化的矩阵。[您可以在 Matlab Central 文件交换处](http://www.mathworks.com/matlabcentral/fileexchange/23039-matlab-in-physics-matrices/content/Lecture3/rrefmovie.m)下载该`.m`文件以与较新版本的 MATLAB 一起使用。

# spring-mvc - Spring MVC：在哪种情况下拥有多个 DispatcherServlet - 上下文会很有用？

> ID：13342509
> 
> 赞同：1
> 
> 时间：2012-11-12T11:01:26.323
> 
> 标签：spring-mvc, dispatcher, applicationcontext

Spring MVC 文档说，在一个 Web 应用程序中可以有多个 DispatcherServlet，每个 DispatcherServlet 都有一个单独的上下文。我想知道这在什么情况下会有用？另外，为什么要分离上下文？有人可以对此提供一些见解吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:29:45.307

Please follow this question.

[Can I use Spring MVC and Spring WS in one single application?](https://stackoverflow.com/questions/4078795/can-i-use-spring-mvc-and-spring-ws-in-one-single-application)

This should answer your question.

Please follow another question

[Spring - When should I consider loading another context in same JVM?](https://stackoverflow.com/questions/1428439/spring-when-should-i-consider-loading-another-context-in-same-jvm)

This should answer your second question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:29:59.157

Yea, Its possible to have several Dispatcher Servlet, Say for example in one of my project I m using Json, Ibatis and normal spring configuration. For each one I m using each dispatcher servlet. But the main dispatcher servlet would be one in which other two would be included. Its just for convinient.

# asp.net-mvc - 如何在 EntityFramework Codefirst 中以编程方式更新数据库？

> ID：13342516
> 
> 赞同：11
> 
> 时间：2012-11-12T11:01:54.323
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0

我正在编写一个简单`CMS`的 ASP.NET MVC 框架（用于大学期末项目）。我的问题是模块的数据迁移策略。由于每个模块在安装时都会更新数据库模式，因此必须在模块中实现数据库迁移机制安装 system.ok ，`data-migration`实体框架中已经存在（感谢 MS），但是迁移命令在包管理器控制台中运行。有没有办法以`Data-Migration`编程方式运行代码？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-03T16:42:45.780

如果您在*包管理器控制台*中启用了自动迁移，您可以在应用程序的 init 部分中使用以下代码（例如在*SimpleMembershipInitializer*中）：

```
var migratorConfig = new Migrations.Configuration();
var dbMigrator = new DbMigrator(migratorConfig); 
dbMigrator.Update(); 
```

其中*Migrations.Configuration*是将项目中的迁移配置类放入命名空间 ( *YourProjectNamespace.Migrations* )。

如果您以编程方式使用它，则应首先关闭 EF 初始化程序：

```
Database.SetInitializer<YourDBContext>(null); 
```

问题是程序更新会创建一个数据库，如果它不存在的话。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T11:33:49.927

此类在代码中公开 EF 迁移：

[System.Data.Entity.MigrateDatabaseToLatestVersion](http://msdn.microsoft.com/en-us/library/hh829293(v=vs.103).aspx)

在 EF 中，迁移虽然适用于整个数据库 - 而不是一个模块化部分。

* * *

刚刚也找到了这个类：

[System.Data.Entity.Migrations.DbMigrator](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigrator(v=vs.103).aspx)

# backbone.js - 对 Backbone.marionette 版本中 TodoMVC 应用程序和 todolist 模块之间的区别感到困惑

> ID：13342522
> 
> 赞同：3
> 
> 时间：2012-11-12T11:02:18.440
> 
> 标签：backbone.js, marionette, todomvc

我正在构建我的第一个backbone.marionette 应用程序，有些事情我觉得很困惑。

在 TodoMVC 的主干[.marionette](https://github.com/addyosmani/todomvc/tree/gh-pages/labs/architecture-examples/backbone_marionette)版本中，似乎有两个不同的模块执行应用程序的工作：

首先是 TodoMVC，它是 Backbone.Marionette.Application 的一个实例，然后是 TodoMVC.TodoList，它似乎只不过是一个容纳控制器和路由器的容器。

为什么不简单地将控制器对象添加到 App 对象中？

让我感到困惑的另一件事是：在我在 stackoverflow 上讨论过的其他木偶应用程序中，例如[这个](https://stackoverflow.com/questions/12662712/nesting-marionette-regions-layouts-and-views)，addInitializer() 是在应用程序对象上调用的，但在 TodoMVC 应用程序中 addInitializer() 是在 todolist 对象上调用的。

这是否特定于想要拥有控制器对象的应用程序？

我还发现命名相当混乱，因为 TodoMVC（应用程序）和 Todolist（控制器容器？）都包含暗示它们是*基础*应用程序的名称。Todolist 模块可以在语义上更名为 TodoController 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:57:04.473

> 为什么不简单地将控制器对象添加到 App 对象中？

这是一种模块化设计选择，与[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)相关。TodoMVC 是顶级应用程序，TodoList 是我们应用程序中的一个模块（或子应用程序），它们都倾向于自己的花园。这使我们可以在不增加顶级应用程序代码的情况下制作任意数量的模块。

> 在其他木偶应用程序中... addInitializer() 在应用程序对象上调用，但在 TodoMVC 应用程序中 addInitializer() 在 todolist 对象上调用

我认为这只是[Application.Modules](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.module.md#module-initializers)的约定问题。TodoMVC 应用程序不需要任何初始化代码，因此我们不添加初始化函数。

# jsf - 启用选择时DataModel必须实现org.primefaces.model.SelectableDataModel，但我已经定义了rowKey

> ID：13342524
> 
> 赞同：5
> 
> 时间：2012-11-12T11:02:30.433
> 
> 标签：jsf, primefaces, selectable, row-key

我有一个可选择的 PrimeFaces 3.4.1 数据表：

```
<p:dataTable value="#{projectAdminisrationMB.selectedUserMemberOfGroups}" var="group1" 
    rowKey="#{group1.name}" selectionMode="single" selection="#{projectAdminisrationMB.selectedBelongToGroup}">
    ...
</p:dataTable> 
```

我收到此错误：

> com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback 访问 Grave：javax.faces.FacesException：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel。

但是我已经`rowKey`按照[FacesException 进行了设置：DataModel must implement org.primefaces.model.SelectableDataModel when selection is enabled](https://stackoverflow.com/questions/10526857/facesexception-datamodel-must-implement-org-primefaces-model-selectabledatamode)。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T11:06:41.787

当`rowKey`属性中的 EL 表达式曾经计算过时，就会发生这种情况`null`。

确保您的实例的`name`属性是**never**。否则最好使用表示自动生成的数据库主键的属性，例如- 如果你有一个。`Group` **`null``#{group1.id}`**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-03T19:21:25.413

仅供参考 - 我在使用 Primefaces 列过滤器时遇到了同样的错误。如果我使用过滤器并单击刷新按钮重新加载表，我会遇到错误。如果我不使用列过滤器，那么刷新表格时就不会发生错误。我有几个列过滤器，它们通过提取名字或姓氏对包含全名的同一字段执行过滤器逻辑，所以我怀疑这个问题与这些过滤器有关。我还没有弄清楚这个问题，但我想与你分享这个以防万一。我正在使用rowKey。**

# search - 在网上商店中搜索过滤块

> ID：13342526
> 
> 赞同：1
> 
> 时间：2012-11-12T11:02:30.707
> 
> 标签：search, filtering, web-deployment

我在许多网站上看到了搜索过滤器块。而且我找不到这个插件。请告诉我这里使用的是哪个插件？

区块示例：http: [//www.sotmarket.ru/category/mobiles.html](http://www.sotmarket.ru/category/mobiles.html)

[http://market.yandex.ru/guru.xml?CMD=-RR=9,0,0,0-VIS=70-CAT_ID=432460-EXC=1-PG=10&hid=91013](http://market.yandex.ru/guru.xml?CMD=-RR=9,0,0,0-VIS=70-CAT_ID=432460-EXC=1-PG=10&hid=91013)

# php - 排序和分页

> ID：13342529
> 
> 赞同：-2
> 
> 时间：2012-11-12T11:02:34.700
> 
> 标签：php, ajax

请帮助我进行搜索或过滤我的数据库中有记录我的搜索正在工作。目前有两件事不能相应地发挥作用：

1.  在特定搜索（位置；业务单位；提交日期）后单击分页链接时，结果将更改为包括数据库中的所有空缺，并且不维护搜索条件。

2.  职位空缺视图的排序也不维护搜索标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:12:02.787

假设您在执行排序/分页请求时缺少传递搜索条件。PHP 是有状态的。它不会“记住”先前请求期间发生的事情，您必须使用 session 来记住搜索条件，并在需要时将它们应用于每个请求，或者将其与来自客户端的每个请求一起传递（可能是链接中的参数，`search.php?location=searched_location&business=business_criteria`例如您的情况，当页面更改或排序顺序更改时，您必须通过 ajax 请求的标准）

# java - 如何允许变量被各种函数使用？爪哇

> ID：13342531
> 
> 赞同：1
> 
> 时间：2012-11-12T11:02:40.307
> 
> 标签：java, function, bluej

我已经尝试了网站上已经给出的各种建议。但老实说，我找不到解决问题的方法。

基本上，当我尝试使用在 Accept... 中创建的任何变量时，它不能用于其他函数。有没有简单的解决方案来解决这个问题？（不改主代码）

```
import java.util.Scanner;
class x4Salary
    {
        Scanner input = new Scanner(System.in);
        public void accept()
        {
            System.out.println("Please input the name of the teacher");
            String name = input.next();
            System.out.println("Please input the address ");
            String adress = input.next();
            System.out.println("Please input the phone number");
            long num = input.nextLong();
            System.out.println("Please input the subject specialization");
            String subjectSpecialization = input.next();
            String subS = subjectSpecialization;
            System.out.println("Please input the Monthly Salary");
            long sal = input.nextLong();
            if(sal>175000)
            {
                tax();
            }
            display();
            double tax = 0.0;
        }
        public void tax()
        {
            System.out.println("Your current salary is : " + sal);
            tax = sal + ((5/sal)*100);
            System.out.println("The salary + Tax : " +tax);
            display();
        }
        public void display()
            {
                System.out.println("The name of the teacher : " + name);
                System.out.println("The Address of the teacher :" +adress);
                System.out.println("The Phone number of the Teacher: "+num);
                System.out.println("The Subject Specialization of the Teacher" + subS);
                System.out.println("The Monthly salary of the teacher" +sal + tax);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:06:03.493

您可以将这些变量作为类成员

```
class x4Salary
{
    protected String name, address; //and so on 
```

然后代替 String name = input.next();

```
 name = input.next(); 
```

名称将在 X4Salary 的所有方法中可见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:04:46.343

您需要将这些变量设为`instance`变量。

在方法中创建的变量，仅限于该方法范围。在该方法之外是不可见的。它将在调用方法时创建，然后在方法完成执行时，该变量将符合`Garbage Collection`.

对于您拥有的任何块范围都是如此。在一个块中创建的变量在该块之外将不可见。

例如： -

```
{   // A block
    int num = 10;
}

System.out.println(num);  // Error. num not visible here. 
```

因此，要在所有方法中访问变量，请将其声明为： -

```
public class Demo {
    private int num;  // Instance variable declaration. Outside every method.

    public void setNum(int num) { 
        this.num = num; 
    }

    public int getNum() { 
        return this.num;  
    }
} 
```

因此，如您所见，变量`num`用于以下两种方法： -`setNum`和`getNum`.

* * *

转到本教程以开始使用`classes`、`objects`和`member declarations`：-

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:05:00.627

您不能在该方法之外使用**局部变量（在您的方法中定义的变量） 。****他们只限于那个方法**。您要么必须使其成为**实例变量**，要么返回该**变量**，以便其他方法可以使用它。在你的情况下。如果你想使用**sal**外部方法 accept 。使其成为实例变量。

```
Class classname {
public long sal;

public void accept(){
//can access sal here
 sal = input.nextLong();
} 

public void display(){
//cvan access sal here
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T11:07:10.713

这些变量的范围仅限*于方法本身*。如果您想保留输入的这些值，您的选项是：

1.  在包含类中创建成员变量并填充它们。这些值将在该类的生命周期内可用
2.  从方法中返回值。由于您有多个值，您可能希望返回包含这些值的对象
3.  从该方法中调用另一个对象，并以这种方式传递数据。

对于选项 2，您可以这样定义一个返回对象：

```
class Teacher {
    private String name;
    private String phone;

    // add appropriate constructor
} 
```

我怀疑`Teacher`它是您应用程序中的一个关键对象，您可能希望将该方法添加`display()`到 Teacher 类本身。*请记住，OO 是关于创建对象并让它们为您做事，而不是自己处理离散的相关变量*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T11:16:47.143

将您的变量定义为类中的成员变量，然后可以在所有成员方法中访问它。

```
import java.util.Scanner;
class x4Salary
    {
        private double tax=0.0;
        private string name, adress, subS;
        private long num, sal;
        Scanner input = new Scanner(System.in);
        public void accept()
        {
            System.out.println("Please input the name of the teacher");
            name = input.next();
            System.out.println("Please input the address ");
            adress = input.next();
            System.out.println("Please input the phone number");
            num = input.nextLong();
            System.out.println("Please input the subject specialization");
            subS = input.next();
            System.out.println("Please input the Monthly Salary");
            sal = input.nextLong();
            if(sal>175000)
            {
                tax();
            }
            display();
        }
        public void tax()
        {
            System.out.println("Your current salary is : " + sal);
            tax = sal + ((5/sal)*100);
            System.out.println("The salary + Tax : " +tax);
            display();
        }
        public void display()
        {
             System.out.println("The name of the teacher : " + name);
             System.out.println("The Address of the teacher :" +adress);
             System.out.println("The Phone number of the Teacher: "+num);
             System.out.println("The Subject Specialization of the Teacher" + subS);
             System.out.println("The Monthly salary of the teacher" +sal + tax);
        }
  } 
```

# c++ - 结果得到-858993460 c++

> ID：13342534
> 
> 赞同：2
> 
> 时间：2012-11-12T11:02:44.653
> 
> 标签：c++

程序在 a[ch] 和 b[nech] 上向我发送 -858993460 值，为什么？我无法理解...如果我使用`cout<<m[i]`它代替`cout<<a[ch]<<endl;`它工作正常...向我显示偶数和赔率但是当我尝试将它们发送到另一个数组时值出错（我需要另外两个数组 a[ch]和 b[nech])

```
#include <iostream>
#include <conio.h>
#include <string>
#include <cstdlib>
#include <stdlib.h>
using namespace std;
int main()

 {
int i,n;
int m[3], a[3]={0}, b[3]={0};
int ch=0, nech=0;
for(i=0; i<3; ++i)
{
    cout<<i+1<<". Studenski fark. nomer: ";
    do
    {
        cin>>m[i];
    }
    while(!(m[i]>=1e7 && m[i]<1e8));
    if(m[i]%2==0)
    {
        m[i]==a[ch]; ch++;
        //cout<<m[i]<<endl; "without the down 'fors' it works"
    }
    else 
    {
        m[i]==b[nech]; nech++;
        //cout<<m[i]<<endl; "without the down 'fors' it works"
    }
}
cout<<"\nVsichki fakultetni nomera: "<<endl;
for(i=0; i<3; ++i)
cout<<m[i]<<"\t";
cout<<"Chetni fark nomera: \n";
if(ch!=0)
    for(i=0;i<ch;i++)
        cout<<a[ch]<<"\t"; //"with {0} on 'a' I receive 0 as result"
else 
    cout<<"nqma chetni fak nomera";
if(nech!=0)
    for(i=0;i<nech;i++)
        cout<<b[nech]<<"\t"; //"same here 0 as result with {b}"
else
    cout<<"Nqma nechetni fak nomera";

getch();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:05:06.317

你需要初始化你的数组

```
int m[3] = {0}
int a[3] = {0};
int b[3] = {0}; 
```

在不初始化数组的情况下，该值是堆栈中的随机值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:03:55.793

`m[i]=a[ch]`是未定义的行为，因为`a`它是一个未初始化的数组`int`。

你永远不会读入`a`. 你期望的行为是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:05:26.193

您没有在任何地方初始化元素`a`，`b`因此它们具有几乎随机的初始值（例如，您得到的 -858993460）。

# wpf - WPF *.rdlc 报告部署

> ID：13342535
> 
> 赞同：2
> 
> 时间：2012-11-12T11:02:48.170
> 
> 标签：wpf

早上好，我在 Visual Studio 2010 上制作了 wpf 应用程序，这有 5 个 rdlc 文件报告，当我尝试使用 VisualStudio（win7 和 win8）在机器上启动它时，没有问题，但如果我尝试在机器清洁中启动它我没有看到 rdlc 报告。

我尝试安装 Visual Studio 2010 的 ReportView，但结果相同，我尝试安装 2012 的 ReportView，但它没有 Microsoft® SQL Server® 2012 功能包。但我在 microsoft 下载中找不到它。

有没有办法在清除win8机器上查看报告？

# javascript - 输入 Facebook API 错误代码 191 - 我做错了什么？

> ID：13342538
> 
> 赞同：1
> 
> 时间：2012-11-12T11:03:05.593
> 
> 标签：javascript, facebook, api, error-handling, feed

我刚刚尝试过，阅读了所有内容 - 但不知何故，我仍然无法解决这个问题。有人有线索吗 ？

详情请看这里：http: [//i1145.photobucket.com/albums/o501/King_Coatie/notworking.gif](http://i1145.photobucket.com/albums/o501/King_Coatie/notworking.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:28:46.387

尝试加载和初始化 Javascript SDK，如下所示：

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
  appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true  // parse XFBML tags on this page?
});

// Additional initialization code such as adding Event Listeners goes here

};

  // Load the SDK's source Asynchronously
(function(d, debug){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
 ref.parentNode.insertBefore(js, ref);
 }(document, /*debug*/ false));
</script> 
```

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

您需要向 FB 对象提供 appID 以使其识别正在处理的应用程序。

# php - 解析/执行期间修改的 PHP 脚本

> ID：13342543
> 
> 赞同：0
> 
> 时间：2012-11-12T11:03:21.393
> 
> 标签：php

我有一个在 cron 上运行的 PHP 脚本，它可能需要很长时间才能完全处理（例如 10 分钟）。如果这个脚本在被解析的时候被修改了会发生什么？还是在执行期间？我问的原因是我有许多跨服务器的脚本，我想将它们置于版本控制之下，我担心如果脚本在处理过程中发生更新，可能会发生什么。如果这是一个问题，那么我可以在文件运行时对其进行某种锁定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:05:30.377

正在运行的脚本不会发生任何事情，因为当它开始运行时，PHP 已经解析了它并且操作码已经在内存中，所以没有更多的磁盘访问权限。

# c++ - 以图形方式表示 AVL 树

> ID：13342545
> 
> 赞同：0
> 
> 时间：2012-11-12T11:03:30.503
> 
> 标签：c++, user-interface, avl-tree

我使用 C++ 实现了 AVL 树，目前我将 AVL 树打印到控制台，但我需要使用 GUI 将树表示为用户可以用来与树交互的应用程序的一部分。为了实现这一目标，我应该研究哪些库等？

注意：我使用的是 OS X

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:13:09.837

[graphviz](http://graphviz.org/)可以完成这项工作。

这是[文件](http://www.graphviz.org/doc/libguide/libguide.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:39:45.717

这里的要点似乎是期望某种用户交互。

用户应该能够调用什么样的操作？移动节点，插入，删除？

您可以使用 graphviz 方法，但如果您想进行用户交互，那么对于 graphviz，您应该使用 html 输出。这样，您可以将节点与可点击的链接相关联，您可以在其中放置一些操作逻辑。

如果这还不够，那么您将需要使用通用 GUI 框架，并查看可用的库类型。

对于 C++，Qt 是需要研究的一件事。有一种叫做树视图的东西可能适合您的问题（参见例如：http: [//doc.qt.digia.com/qt/qtreeview.html](http://doc.qt.digia.com/qt/qtreeview.html)）。

但是，请做好准备，您需要一些时间才能进入 Qt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:13:09.523

[graphviz](http://www.graphviz.org/)是一个图形可视化工具包。编写 graphviz 文件非常简单，并且也可以使用其中一个后端来生成图像。然后，您可以使用您喜欢的任何工具包显示这些图像。

# java - 来自返回自定义对象的 Web 服务的 InvocationTargetException

> ID：13342547
> 
> 赞同：0
> 
> 时间：2012-11-12T11:03:42.717
> 
> 标签：java, eclipse, axis2

我正在将 Web 应用程序从 websphere 环境迁移到 tomcat7 和 Axis2。我有许多给我带来问题的网络服务。

Web 服务是使用 Eclipse (Juno) 中的 Web 服务向导从 Java 类创建的。相应的文件夹在 WEB-INF/services 下创建，应用程序可以调用服务。返回简单对象（字符串、整数等）的服务工作正常。返回自定义对象（例如客户、国家/地区）的服务会生成包含以下内容的错误响应：

```
<faultcode>soapenv:Server</faultcode>
<faultstring>java.lang.reflect.InvocationTargetException</faultstring>
<detail/> 
```

自定义对象是可序列化的并且有一个公共的 null 构造函数。就像测试一样，我将返回类型更改为 String 并将 toString() 添加到返回值 - 它有效。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:14:21.440

不确定 Axis2，可能类似，但为了调试此类问题，使用 Axis，我将在 WSDD 文件中添加 LogHandler。这样，您将看到导致此问题的异常。对于 tomcat，请参阅[如何为 Tomcat/Axis Web 服务记录 SOAP 消息](http://blogmines.com/blog/2007/02/09/how-to-log-soap-messages-for-a-tomcataxis-web-service/)

对于 Axis2，您需要编写一个简单的模块，请参阅[编写您自己的 Axis2 模块](http://axis.apache.org/axis2/java/core/docs/modules.html#Step2_%3a_LogHandler)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:14:23.663

为了从 Axis2 获取一些日志记录，我可以将以下内容添加到我的 log4j.xml 中：

```
<category name="org.apache.axis2" additivity="false">
    <priority value="trace"/>
    <appender-ref ref="roller"/>
    <appender-ref ref="console"/>
</category> 
```

然后我可以看到**InvocationTargetException**的根本原因是我的一个类中的 NullPointerException。Axis2 似乎比 Axis1 对这些事情更敏感。

# ruby-on-rails - 检查控制器中动作的宁静功能

> ID：13342552
> 
> 赞同：0
> 
> 时间：2012-11-12T11:03:55.993
> 
> 标签：ruby-on-rails, controller, routes

在您指定的 ruby​​ on rails 中绘制宁静的路线时

1.  如果控制器操作适用于成员或集合，并且
2.  使用什么http动词。[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

如何从控制器实例中检查 1？（可以通过 来检查 HTTP 动词`request.method`）

丑陋的 hack 是检查命名路由是否以单数或复数形式存在，但该路由可以有替代名称。

还有一个是检查用于识别成员的请求参数，但收集路由可以具有相同的（可选）参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:47:00.687

如果路线遵循宁静的约定，那么跑步`rake routes`应该会给你你正在寻找的答案。

您将看到预期的 http 动词（回答 2）并且路径应该回答您的 1）问题。对于成员操作，您需要 ID，因此通常路径包含 id

此路由配置：

```
resources :photos do
  member do
    get 'preview'
  end
end 
```

将为您`photos/:id/preview`提供预览单张照片的路径-> ment

以及路由配置：

```
resources :photos do
  collection do
    get 'preview'
  end
end 
```

将为您提供路径`photos/preview` -> ment 以预览照片列表

如果您需要从操作代码中获取此信息：

*   检查 params[:id] 以区分意图。如果是针对成员的，则该值不会为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:29:28.963

您是否查看过 Journey gem 的这种方法？假设 3.2，如果在任何地方，那将拥有它，而不是请求参数。到那时就太晚了不是吗？

# java - Coldfusion 9 使用 java 对象

> ID：13342555
> 
> 赞同：0
> 
> 时间：2012-11-12T11:04:12.993
> 
> 标签：java, coldfusion, jodatime, coldfusion-9

我目前正在使用 jodatime Java 库，并在尝试在 Coldfusion 中使用它时遇到问题。

我已经下载了最新的 jodatime 2.1 版本，将 jar 文件放入本地驱动器上的一个文件夹中，并让我的 Coldfusion 管理员在**Java 和 JVM**设置页面下的*ColdFusion 类路径中查看该文件夹。*

 **在大多数情况下，它都有效。但有时我会得到这样的东西：

```
local.oTestZone = createObject('java','org.joda.time.DateTimeZone').init('Europe/London'); 
```

哪个应该与此匹配：[构造函数](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html#DateTimeZone%28java.lang.String%29)但是我在coldfusion中得到一个错误说：

> 找不到接受类型 ( java.lang.String ) 参数的类 org.joda.time.DateTimeZone 的构造函数。

当我做这样的事情时它工作得很好：

```
local.oToZone   = createObject('java','org.joda.time.DateTimeZone').forID('Europe/London'); 
```

匹配项：[forID](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html#forID%28java.lang.String%29)

我的java实现是否遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:30:56.830

构造`DateTimeZone(String id)`函数被标记为受保护（我花了 3 次阅读 JavaDoc 才发现它），因此 CF 将无法调用它。

在我看来，JodaTime 希望您使用其中一种静态方法来构造您的实例，因此您的第二个示例可能是正确的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:34:15.137

您正在处理一个抽象类和一个受保护的构造函数。

受保护的构造函数意味着只有同一包中的子类或类才能调用该构造函数。因此，即使您提供了正确的参数，构造函数也不适用于您的代码。

[ColdFusion 文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Java_7.html)有这些花絮：

“虽然 cfobject 标签加载了类，但它并没有创建实例对象。只有静态方法和字段可以在调用 cfobject 后立即访问。”

这就是为什么`forID`有效；这是一种静态方法。

“要持久访问对象，您必须使用 init 函数，因为它返回对对象实例的引用，而 cfobject 不会。”

这和前面的陈述是为什么像这样的方法`getOffset`在这种情况下不起作用的原因。

我对此不够熟悉，不知道是否有一个可以实例化的类可以让你访问构造函数，但希望其他人可以加入。**

# iphone - 如何以编程方式确定 iOS 设备的电池相关信息？

> ID：13342556
> 
> 赞同：6
> 
> 时间：2012-11-12T11:04:18.020
> 
> 标签：iphone, ios

我正在实现 iOS 应用程序，我想在其中检查电池信息，如电池状态、当前电池电量、是否插入充电等。我做了所有这些，但我想要更多关于电池的信息，如电池温度、电池健康状况，电池规模，电池技术。所有这些信息都可以在 android 中获得，但是任何人都可以帮助我在 iOS 中获得所有这些信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:14:53.123

尝试这个

```
 [[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
        float batteryLevel = [[UIDevice currentDevice] batteryLevel];

        //This will give you the battery between 0.0 (empty) and 1.0 (100% charged)
       //If you want it as a percentage, you can do this:

      batteryLevel *= 100; 
```

# android - 无法写入 SD 卡

> ID：13342559
> 
> 赞同：0
> 
> 时间：2012-11-12T11:04:22.903
> 
> 标签：android, android-sdcard, android-2.3-gingerbread

我正在尝试在 Android 2.3 设备上的 SDCard 上创建文件夹：

```
final File downloadFolder = new File(FILES_PATH);
        if (!downloadFolder.exists()) {
            Log.i(TAG, "Creating tmp directory: " + downloadFolder.mkdirs());
        } 
```

mkdirs() 返回 false。FILES_PATH 与 getExternalStorage() 返回的相同 - /mnt/sdcard/.tmp/ SD 卡可从 cli 使用 root 写入。允许：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.venturezlab.tvupdater"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:07:15.597

尝试`mkdir()`代替`mkdirs()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:09:09.083

尝试这个

```
final File downloadFolder = new File(Environment.getExternalStorageDirectory()+"/.tmp"); 
```

# webdriver - 如何在 webdriver 中为以下场景编写代码

> ID：13342561
> 
> 赞同：0
> 
> 时间：2012-11-12T11:04:28.583
> 
> 标签：webdriver

如何在 webdriver 中为以下场景编写代码

在一个页面中有两个文本框。

应该添加文本框中给出的整数。例如给出 23。这应该添加为 2+3。

应在第二个文本框中输入添加的值。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:12:45.393

公共静态无效主要（字符串args []）{

```
int sum = 0;
System.out.println("Enter multi digit number:");
Scanner input = new Scanner(System.in);
int n = input.nextInt();
int t = n;
while (n > 0) {
        int p = n % 10;
        sum = sum + p;
        n = n / 10;
}

System.out.println("sum of the digits in " + t + " is " + sum); 
```

}

# .net - 尽可能快的伪并行 WCF 服务调用

> ID：13342564
> 
> 赞同：0
> 
> 时间：2012-11-12T11:04:35.273
> 
> 标签：.net, wcf

我有以下要求：应该“并行”和“同时”执行 14 个 WCF 调用，以便在 14 个显示器上启动“同步”视频。

请注意引号，因为我完全知道这是不可能的，但我想尽可能接近！

我尝试了后台线程和并行语句，大多数时候结果都很好。但是，有时每个服务调用之间会有较大的延迟。

我的代码如下所示：

```
BackgroundWorker worker = new BackgroundWorker();

worker.DoWork += delegate(object sender, DoWorkEventArgs e)
{
    Parallel.For(0, myChannelControllers.Length, n =>
    {
        try
        {
            IMyService channel = myChannelControllers[n].GetChannel();

            channel.VideoWallPlay(...);

            myChannelControllers[n].CloseChannel(channel);
        }
        catch (...)
        {
        }

    });

};

worker.RunWorkerAsync(); 
```

有什么优化的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:42:10.363

万一这是答案。一次循环获取通道。然后播放并关闭另一个。为什么要使用 GetChannel 的延迟？

# delphi - 如何避免在泛型容器中使用非无参数构造函数出现不兼容类型错误？

> ID：13342572
> 
> 赞同：2
> 
> 时间：2012-11-12T11:04:56.080
> 
> 标签：delphi, delphi-xe2

我得到`E2010 Incompatible types: 'TDerivedFrame' and 'TBaseFrame'`以下代码：

```
type
  TBaseFrame = class(TFrame)
  end;

  TDerivedFrame = class(TBaseFrame)
  end;

  TContainer<T: TBaseFrame> = class
  private
    FFrame: T;
  public
    property Frame: T read FFrame;
    constructor Create;
  end;

constructor TContainer<T>.Create;
begin
  inherited;
  FFrame := TBaseFrame(T).Create(nil);
end;

var
  FTab: TContainer<TDerivedFrame>; 
```

仅使用`T.Create(nil)`原因`E2568 Can't create new instance without CONSTRUCTOR constraint in type parameter declaration`。

据我所知，您只能使用无参数构造函数创建构造函数约束。

这样做的正确方法是什么？

PS：当我删除变量时代码编译，这让我认为这是编译器错误？！

编辑：我了解 E2010 错误，但即使使用`T(TBaseFrame(T).Create(nil))`它也不起作用。这会编译，但会在运行时导致访问冲突：

```
type
  TBaseFrame = class(TFrame)
  public
    constructor Create(AOwner: TComponent); override;
  end;

  TDerivedFrame = class(TBaseFrame)
  public
    constructor Create(AOwner: TComponent); override;
  end;

  TContainer<T: TBaseFrame> = class
  private
    FFrame: T;
  public
    property Frame: T read FFrame;
    constructor Create;
  end;

constructor TBaseFrame.Create(AOwner: TComponent);
begin
  inherited;

end;

constructor TDerivedFrame.Create(AOwner: TComponent);
begin
  inherited;

end;

constructor TContainer<T>.Create;
begin
  inherited;
  FFrame := T(TBaseFrame(T).Create(nil));
end;

var
  FTab: TContainer<TDerivedFrame>;
begin
  FTab := TContainer<TDerivedFrame>.Create;
end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:36:04.117

```
FFrame := T(TBaseFrameClass(T).Create(nil)); 
```

是这样做的正确方法。

你需要

```
type 
  TBaseFrameClass = class of TBaseFrame; 
```

您的编译器错误是因为您正在*实例化*一个类型，`TContainer<TDerivedFrame>`. 当您实例化该类型时，您要求编译器处理

```
FFrame := TBaseFrame(...); 
```

`FFrame`在哪里`TDerivedFrame`。如果您在没有泛型的情况下编写该代码，您就会理解编译器错误。

所以，编译器在这里的行为是正确的，但是实例化的问题让你很困惑。只有在实例化时，编译器错误才会变得明显。没有实例化，如果你已经实例化`TContainer<TBaseFrame>`，就不会有编译器错误。

AV 是因为您要转换`T`为实例而不是类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:45:01.927

尝试使用这个： `TContainer<T:constructor, TBaseFrame> = class`

# c# - 通过 Web 服务/JSON 响应的 jQuery UI 自动完成错误

> ID：13342576
> 
> 赞同：0
> 
> 时间：2012-11-12T11:05:03.847
> 
> 标签：c#, asp.net, jquery, jquery-autocomplete

我一直试图让它工作几个小时，但看不出我哪里出错了。

我一直在检查 Firebug 的服务器响应，它通过 .asmx Web 服务很好地检索 json 数据。我必须解决的唯一错误是在输入 2 个或更多字符时触发的 firebug 错误： **TypeError: c.settings[d].call is not a function**

***jQuery 代码片段：***

```
 $(document).ready(function () {
        $("#<%= txtCustomer.ClientID %>").autocomplete({
            minLength: 2,
            async: true,
            source: function(request, response) {
                $.ajax({
                    url: "../Services/AJAXHandler.asmx/GetCustomers",
                    data: "{'filter':'" + request.term + "'}",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.d, function(item) {
                            return { 
                                label: item.customerName
                            };
                        }));
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        var errorMessage = "Ajax error: " + this.url + " : " + textStatus + " : " + errorThrown + " : " + XMLHttpRequest.statusText + " : " + XMLHttpRequest.status;

                        if (XMLHttpRequest.status != "0" || errorThrown != "abort")
                        {
                            alert(errorMessage);
                        }
                    }
                });
            }
        }); 
```

如果有人能指出我正确的方向，那就太好了。

# actionscript-3 - Actionscript 3 如何在不按按钮的情况下进行 gotoAndPlay

> ID：13342579
> 
> 赞同：0
> 
> 时间：2012-11-12T11:05:26.657
> 
> 标签：actionscript-3, flash, actionscript

所以，我有一个名为 intro 的电影剪辑。当介绍用完帧时，我如何告诉它 gotoandPlay 到主时间线或上部影片剪辑而不需要用户按任何按钮？应该不会那么难吧？在 actionscript 2 中真的超级简单，但在 3 中我什至找不到帮助/教程来做到这一点！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:09:37.947

明确你之后想玩什么？

它可以像在动画的最后一帧中添加一行代码一样简单：

```
gotoAndPlay(3); // will goto a frame within the same move clip 
```

或播放不同的影片剪辑：

```
MovieClip(this.parent as MovieClip).gotoAndPlay(3); //tell your parent to goto a specific frame 
```

或者

```
MovieClip(this.parent as MovieClip).parentObject.gotoAndPlay(3); //tell one of your parents movieclips to start playing 
```

编辑：

更多方法，将此代码放在父时间轴上以检查电影剪辑何时完成：

```
intro.addEventListener(Event.ENTER_FRAME, checkFrame);

function checkFrame(e:Event):void{
    if(intro.currentFrame==intro.totalFrames){
        //do something
        someMovieClip.gotoAndPlay(3);
    }
} 
```

# c# - 通过文化英文名称获取 CultureInfo

> ID：13342581
> 
> 赞同：7
> 
> 时间：2012-11-12T11:05:43.637
> 
> 标签：c#, .net

是否可以`CultureInfo`通过[文化英文名](http://www.csharp-examples.net/culture-names/)获得？

想象一下，我们有：丹麦语、英语、西班牙语等等……

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T11:08:59.443

```
var names = CultureInfo.GetCultures(CultureTypes.AllCultures).ToLookup(x => x.EnglishName);
names["English"].FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-12T11:10:18.583

```
var EnglishCulture = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                .Where(r => r.EnglishName == "English"); 
```

或者如果你需要`FirstOrDefault`

```
var EnglishCulture = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                .FirstOrDefault(r=> r.EnglishName == "English"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T11:13:08.420

没有内置的方法可以通过它的英文名称来获取文化，所以你可以写一个：

```
public static CultureInfo getCultureByEnglishName(String englishName)
{
    // create an array of CultureInfo to hold all the cultures found, 
    // these include the users local culture, and all the
    // cultures installed with the .Net Framework
    CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures);
    // get culture by it's english name 
    var culture = cultures.FirstOrDefault(c => 
        c.EnglishName.Equals(englishName, StringComparison.InvariantCultureIgnoreCase));
    return culture;
} 
```

这是一个**演示**：http: [//ideone.com/KX4U8l](http://ideone.com/KX4U8l)

# c# - 如何在 Winforms Datetimepicker 中设置日期

> ID：13342582
> 
> 赞同：0
> 
> 时间：2012-11-12T11:05:43.637
> 
> 标签：c#, winforms, custom-datetimepicker

我有 Winform，其中有日期时间选择器，所以我需要知道如何在日期时间选择器中将默认日期值设置为 01，并且用户无法更改日期。他/她如何更改月份或年份，但默认日期保持不变，即；01.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:56:55.647

选择一些您将使用的事件。我确实构建了字符串，但您可以重写更好的代码并且更简单。这只是一个示例供您理解。

```
 int year = Convert.ToDateTime(dateTimePicker1.Text).Year;
        int month = Convert.ToDateTime(dateTimePicker1.Text).Month;
        dateTimePicker1.Text = DateTime.ParseExact("01." + month.ToString() + "." + year.ToString(), "dd.mm.yyyy",System.Globalization.CultureInfo.InvariantCulture).ToString(); 
```

希望能帮助到你

# windows-phone-7 - 如何在 WindowsPhone 应用程序中提取 google api 返回的 json 响应？

> ID：13342583
> 
> 赞同：0
> 
> 时间：2012-11-12T11:05:44.360
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7.1.1

我正在尝试提取 google map api 返回的响应。我听说过 Json.NET。但是我试图从该位置添加到 Windows Phone 应用程序的参考`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETCore\v4.5\`不起作用。

我试图从 location 中找到相同的内容`C:\Program Filesx86\ReferenceAssemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71`。但仍然无法在 windows phone .net 中找到 Json.NET 参考

我需要添加哪个参考才能使用 datacontractjsonserializer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:18:41.570

在链接找到答案。谢谢。[http://blogs.msdn.com/b/ronak/archive/2011/07/18/datacontractjsonserializer-and-windows-phone-7.aspx](http://blogs.msdn.com/b/ronak/archive/2011/07/18/datacontractjsonserializer-and-windows-phone-7.aspx)

# java - 如何使用 jpcap 捕获数据包？

> ID：13342584
> 
> 赞同：1
> 
> 时间：2012-11-12T11:05:51.247
> 
> 标签：java, jpcap

我已经安装了 jpcap 并将其添加到库中，但我在这一行有错误：

String[] 设备 = JpcapCaptor.getDeviceList();

我想我加错了，因为它说：找不到 Javadoc。此项目的 Javadoc 文档不存在，或者您没有在 Java 平台管理器或库管理器中添加指定的 Javadoc。

```
public static void main(String[] args) throws UnknownHostException {
    // TODO code application logic here
  String[] devices = JpcapCaptor.getDeviceList();
    if(args.length<1){
        System.out.println("Usage: java SentUDP <device index (e.g., 0, 1..)>");
        for(int i=0;i<devices.length;i++)
            System.out.println(i+":"+devices[i].name+"("+devices[i].description+")");
        System.exit(0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:21:00.653

这是该`deviceList()`方法的 javadoc 的链接：http: [//netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/JpcapCaptor.html#getDeviceList](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/JpcapCaptor.html#getDeviceList) ()

如您所见，它返回一个[`NetworkInterface`](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/NetworkInterface.html)对象数组，而不是字符串数组。

# c++ - 编译器如何知道变量是全局变量还是局部变量（C）

> ID：13342587
> 
> 赞同：2
> 
> 时间：2012-11-12T11:06:02.537
> 
> 标签：c++, c, compiler-construction

我想知道编译器内部发生了什么......比如它是否将全局变量存储在不同的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:09:29.800

符号表上的维基百科页面可以为您提供一个基本的了解。

[http://en.wikipedia.org/wiki/Symbol_table](http://en.wikipedia.org/wiki/Symbol_table)

> 在计算机科学中，符号表是语言翻译器（例如编译器或解释器）使用的数据结构，其中程序源代码中的每个标识符都与与其在源代码中的声明或外观有关的信息相关联，**例如其类型，范围级别，有时还有它的位置。**
> 
> [...]
> 
> 一种常见的实现技术是使用哈希表实现。**编译器可以为所有符号使用一个大符号表，或者为不同的范围使用分离的、分层的符号表。**

强调我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:07:54.860

它知道变量是全局的还是局部的，通过你声明它的方式。

```
//declared at namespace scope - global
extern int x;     

int main()
{
   //declared inside a method - local
   int y;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:13:02.613

通常任何变量都有 4 个作用域。使用`extern`关键字，您正在显式地创建该变量。（默认情况下，全局变量是`extern`）

使用`static`将变量或函数范围限制为当前文件

据此，内存被分配在不同的段中

```
 global: visible in more than one source file
 -- data segement(also differs whether initialised or uninitialized)

        local : visible with in { } it also called function(){} scope
 -- on stack 

        block : {} inside any function another scope of block valiables with in {}

     -- on stack if with in function 

        file : making static variable is limited to it's file scope or 
    current translation unit. -- again data section 
```

# php - 正则表达式在 PHP 中查找不是表情符号的图像

> ID：13342588
> 
> 赞同：0
> 
> 时间：2012-11-12T11:06:03.447
> 
> 标签：php, regex, preg-match

我使用以下 PHP 代码在论坛帖子中搜索图像：

```
if(preg_match("~<img.*src=\"(.*)\".*/>~isU", $htmltext, $imatch))
{
    $imageurl = $imatch[1];
} 
```

这将在 htmltext 中找到第一个图像。但是，我想跳过任何属于笑脸图标的图像。所有的笑脸图标都在文件夹 /forum/smilies/ 中。如何从正则表达式中排除此文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:16:19.350

尝试解析 HTML 时不建议使用正则表达式。你可以看看这个关于这个问题的[答案。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

这可以解决问题：

```
$dom = new DOMDocument();
$dom->loadHTML($htmltext);
$images = $dom->getElementsByTagName('img');
$valid  = array();
foreach ($images as $image) {
    $src = $image->getAttribute('src');
    if ($src !== '' && strpos($src, '/forum/smilies/') !== 0) {
        $valid[] = $src;
    }
}
print_r($valid); 
```

`$valid`是一个数组，包含给定中`img`的所有非拟似物。`src``$htmltext`

# jquery - jQuery Slide Toggle - 打开时更改 HTML

> ID：13342592
> 
> 赞同：2
> 
> 时间：2012-11-12T11:06:25.770
> 
> 标签：jquery, toggle

当单击“阅读更多”链接时，我有这个功能可以打开一个 DIV 以显示内容。展开 DIV 后，我想将“阅读更多”的值更改为“关闭”。

```
<div class="container">
  <p class="expand-text">Read more</p>
  <div class="content">
    <div class="full-text">
      <p>Text content here</p>
    </div>                      
  </div>
</div>                            

<script>
 $(".container").click(function() {
   $(this).find('.content').slideToggle();
 });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:13:39.677

```
$(".container").click(function() {
    $('.expand-text', this).text(function(i, v) {
        return v === 'Close' ? 'Read more' : 'Close'
    })
    $(this).find('.content').slideToggle();
}); 
```

[http://jsfiddle.net/mBFzE/](http://jsfiddle.net/mBFzE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:09:27.353

```
 $(".expand-text").click(function() {
       $('.container .content').slideToggle('slow', function() {
             if ( $('.container .content').css("display") == 'none') {
           $(".container .expand-text").html('Read more');
        } else {
            $(".container .expand-text").html('Close');
        }

       });

      }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:12:09.967

尝试这个

```
$(".container").click(function () 
{
   $(this).find('.content').slideToggle('slow',
           function () { $(".expand-text").text("Close"); });
}); 
```

只需提供一个回调函数，当您的动画完成时将调用该函数。有关这方面的更多信息，[请点击此处](http://api.jquery.com/slideToggle/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T11:12:53.180

您可以将回调函数传递给[slideToggle()](http://api.jquery.com/slideToggle/)。它会在动画结束时被调用，然后你可以根据内容的可见性从那里更新你的元素：

```
$(".container").click(function() {
    $(this).find(".content").slideToggle(400, function() {
        var $this = $(this);
        $this.closest(".container").find(".expand-text").text(
            $this.is(":visible") ? "Close" : "Read more");
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T11:31:49.577

这是一个 JS 摘录，可以做你想做的事情：

```
 $(".container").click(function() {
     var self = this;
     $(this).find('.content').slideToggle(function(){
         var newParagraphValue = undefined;
         var newParagraphValue = $(self).find('.full-text:visible').length > 0 ? "Close" : "Read more";                          
          $(self).find('.expand-text').html(newParagraphValue );    
          self = null;             
     });
 });​ 
```

# model-view-controller - Extjs 使用商店创建动态手风琴

> ID：13342593
> 
> 赞同：6
> 
> 时间：2012-11-12T11:06:35.453
> 
> 标签：model-view-controller, extjs, extjs4, accordion, store

我开始在 extjs 中开发应用程序。我正在使用[extjs 文档](http://www.sencha.com/learn/the-mvc-application-architecture/)中提供的 MVC 方法。

我有一些动态数据需要向用户展示一组手风琴控件。我在商店中有数据，但我不知道如何动态创建手风琴项目（与网格面板不同，似乎没有商店数据方法）。

这是我当前的手风琴视图代码 - 带有静态项目：

```
Ext.define('BP.view.induction.LeftPage', {
extend: 'Ext.Panel',
alias : 'widget.leftpage',

title: "Left Page", 
layout: {
    type: 'accordion',
    align: 'stretch'
},
layoutConfig: {
    // layout-specific configs go here
    titleCollapse: true,
    animate: true,
    activeOnTop: true
},
items: [{
    xtype: 'panel', // fake hidden panel, so all appear collapsed
    hidden: true,
    collapsed: false
},{
    xtype: 'panel',
    title: 'Panel 1',
    html: 'Panel content!'
},{
    xtype: 'panel',
    title: 'Panel 2',
    html: 'Panel content!'
},{
    xtype: 'panel',
    title: 'Panel 3',
    html: 'Panel content!'
}]
}); 
```

任何有关如何实现上述目标的指导将不胜感激，谢谢。

[编辑] 应 sra 的要求，这是我的控制器：

```
Ext.define('BP.controller.Induction', {
extend: 'Ext.app.Controller',

views: [
    'induction.Binder'
],

stores: [
    'Sections',
    'Categories',
    'Tasks'
],

init: function() {
    console.log('Initialized Induction!');
}
}); 
```

我应该在这里注意到这个控制器加载了一个父视图，它又加载了 LeftPage 视图——我不确定这是否会产生任何范围问题。此外，如您所见，加载了多个商店。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:17:32.760

你可以这样做（经过一些调整的未经测试的示例）

```
Ext.define('BP.view.induction.LeftPage', {
    extend: 'Ext.Panel',
    alias : 'widget.leftpage',

    title: "Left Page", 
    layout: null,
    layoutConfig: null,
    store: null,
    attentive: true,
    initComponent: function() {
        var me = this;
        // begin edit
        // only set the store if is is not already defined
        me.store = me.store ? me.store : Ext.StoreMgr.lookup('Sections');  // you may change this to any storename you want
        // end edit
        me.layout = { // don't set objects directly in class definitions
            type: 'accordion',
            align: 'stretch'
        };
        me.layoutConfig = { // dont set objects directly in class definitions
            titleCollapse: true,
            animate: true,
            activeOnTop: true
        };

        me.callParent(arguments);
        if (me.attentive) {
            me.store('load', me.onRebuildContent, me);
            if (me.store.count() == 0)
                me.store.load();
        } else {
            me.buildContent(); 
        }
    },
    buildContent: function() {
        var me = this;
        function addItem(rec) {
            me.add({
                xtype: 'panel',
                title: rec.get('titleProperty'),
                html: rec.get('bodyProprty')
            });
        };

        me.store.each(addItem);
    },
    onRebuildContent: function() {
        var me = this;
        me.removeAll();
        me.buildContent();
    }   
}); 
```

您的商店至少需要两个属性；一个用于标题，一个用于内容。并且在实例化之前需要加载商店。但这可以在您的控制器中轻松完成。

**根据评论和新的 OP 信息进行编辑：**

好吧，您的视图有点不受控制器的控制。所以我建议你简单地使用**[StoreManager](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.StoreManager)**来接收一个有效的实例（我已经编辑了代码，我只是不知道要使用正确的商店）。只要您在控制器中列出 StoreManager，StoreManager 就会知道该商店（StoreManager 的功能要多得多，但目前您只需要知道这些）。对于进一步的版本，您还可以使用 mixin **[bindable](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Bindable)**，它可以更干净地管理 storebinding，并使您能够在 store 收到新数据后更新您的手风琴（获取更新）

**编辑以提高可读性**

我刚刚对其进行了一些清理，并包含了一个 switch 参数`attentive`，它允许您将此组件用作直接绑定到商店、对所有加载事件作出反应或作为一种静态事件，其中商店应该已经加载。总而言之，这应该给你一个开始，而不会使它变得复杂。

# mysql - 根据所有符合条件的孩子选择父母

> ID：13342596
> 
> 赞同：2
> 
> 时间：2012-11-12T11:06:54.160
> 
> 标签：mysql

这是一个如此简单的问题，但由于某种原因，我今天无法理解它。

我有两个实体：-每个实体分别命名为`title`和。每个可以有很多。`product``tbl_title``tbl_product``title``products`

产品表有一个名为的字段，`unwanted`可以是或。`null``0``1`

我希望`title`根据所有`product`s (ALL)`unwanted`设置为的位置来选择所有 s `1`。因此，换句话说，我希望根据满足特定条件的所有孩子来选择父母。因此，如果 a`title`有一个`product`，`unwanted`但另一个不是，我不希望它`title`进入结果集。

当我尝试这个时，我最想不到的是：

```
SELECT * FROM `tbl_title` 
    left join tbl_product on tbl_product.title_id = tbl_title.id 
    where tbl_product.unwanted = 1 
    group by tbl_title.id 
```

这显然是行不通的。

那么如何编写这样的查询呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:14:29.053

```
SELECT t.id 
FROM `tbl_title` t
left join tbl_product p on p.title_id = t.id 
group by t.id
having sum(p.unwanted = 0 or p.unwanted is null) = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:20:14.793

```
select * from tbl_title
where id not in (select title_id from tbl_product where unwanted = 0) 
```

在英语中，此查询会消除所有具有所需产品的标题。

从风格的角度来看，最好叫你的专栏`wanted`，因为`unwanted = 0`它是一个双重否定的`wanted = 1`。了解积极因素总是更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:09:52.013

尝试使用这样的子查询：

```
SELECT * FROM `tbl_title` AS t
WHERE EXISTS (SELECT 1 FROM products WHERE title_id = t.id AND unwanted = 1)
AND NOT EXISTS (SELECT 1 FROM products WHERE title_id = t.id AND (unwanted = 0 OR unwanted IS NULL)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:14:59.643

仅针对`title`表中的字段

```
SELECT   * 
FROM     `tbl_title` AS t
JOIN     tbl_product AS v ON t.id = v.title_id
WHERE    NOT EXISTS(
                    SELECT * 
                    FROM   tbl_product 
                    WHERE  (t.id = title_id) 
                       AND (unwanted = 0 OR unwanted IS NULL)
GROUP BY t.id 
```

# java - 如何在运行时设置窗口大小？

> ID：13342598
> 
> 赞同：1
> 
> 时间：2012-11-12T11:07:06.123
> 
> 标签：java, resize, window, runtime, javafx

我正在开发一个 JavaFX FXML 应用程序。我需要在运行时从控制器类调整窗口大小。

我发现可以通过设置舞台的 maxHeight 和 maxWidth 属性从应用程序类中执行此操作。但是如何在应用程序运行时从控制器类中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:16:37.657

在控制器类中定义一个按钮并设置它的动作

```
btn.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        Stage stage = (Stage) ((Node) event.getSource()).getScene().getWindow();
        // OR, if you define btn as @FXML private Button btn.
        Stage stage = (Stage) btn.getScene().getWindow();
        // these two of them return the same stage
        stage.setWidth(new_val);
        stage.setHeight(new_val);
    }
}); 
```

其中 stage 是您的主要（主要）阶段。

# ios - 弹出框显示不正确

> ID：13342600
> 
> 赞同：1
> 
> 时间：2012-11-12T11:07:14.343
> 
> 标签：ios, ipad, uisplitviewcontroller, popover, uisplitview

我正在关注有关在 iPad 处于纵向时隐藏拆分视图左侧的演示，然后在按下放置在工具栏中的按钮时将其显示为弹出框。我一步一步地跟着一切，它工作（有点）除了当我按下按钮时，而不是在弹出窗口中，视图显示从左到右滑动。我还注意到，我可以通过从左向右滑动手指而不是按下按钮来获得相同的结果。这是我使用的代码（相同的代码在演示中正常工作）。

在应该在 Popover 中显示的视图的视图控制器中：

```
-(BOOL)splitViewController:(UISplitViewController*)svc
  shouldHideViewController:(UIViewController*)vc
             inOrientation:(UIInterfaceOrientation)orientation
{
    return [self splitViewBarButtonItemPresenter] ? UIInterfaceOrientationIsPortrait(orientation) : NO;
}

-(void)splitViewController:(UISplitViewController *)svc
    willHideViewController:(UIViewController *)aViewController
         withBarButtonItem:(UIBarButtonItem *)barButtonItem
      forPopoverController:(UIPopoverController *)pc
{
    barButtonItem.title = self.title;
    [self splitViewBarButtonItemPresenter].splitViewBarButtonItem = barButtonItem;
}

-(void)splitViewController:(UISplitViewController *)svc
    willShowViewController:(UIViewController *)aViewController
 invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    [self splitViewBarButtonItemPresenter].splitViewBarButtonItem = nil;
} 
```

在应该显示弹出框的视图中：

```
-(void)setSplitViewBarButtonItem:(UIBarButtonItem *)splitViewBarButtonItem
{
    if (_splitViewBarButtonItem != splitViewBarButtonItem){
        NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
        if (_splitViewBarButtonItem) [toolbarItems removeObject:_splitViewBarButtonItem];
        if (splitViewBarButtonItem) [toolbarItems insertObject:splitViewBarButtonItem atIndex:0];
        self.toolbar.items = toolbarItems;
        _splitViewBarButtonItem = splitViewBarButtonItem;
    }
} 
```

`SplitViewBarButtonItemPresenter`只是一个协议，用于委托谁应该显示（你猜对了！）弹出框的按钮。

# xaml - Windows 服务的 TFS 持续部署？

> ID：13342603
> 
> 赞同：8
> 
> 时间：2012-11-12T11:07:24.050
> 
> 标签：xaml, windows-services, continuous-deployment

我已经设法使用 TFS Msbuild 为我的 Web 项目进行持续部署。

我已经观察了几个小时，但找不到实现 Windows 服务持续部署的相关链接。

可以使用 TFS 构建定义为 Windows 服务做 CD 吗？即对于应执行以下步骤中的每个检查，我将 TFS2010 与 Windows Server 2008 R2 一起使用

1]停止服务，

2]将相应的项目文件夹从（源）构建服务器复制到（目标服务器）'staging server1'或'staging server2'

3]启动服务（愿意手动执行此步骤）

任何博客，教程参考来实现这一点？我的猜测是需要使用 Power shell 脚本，但不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:34:34.973

应该没问题，您需要在要部署的机器上安装代理。并且您需要能够退出 XAML 模板（您可能希望复制执行构建的现有模板，然后将停止/复制/启动内容添加到它的末尾）。

在您的 CI 构建之后，您需要编辑它（XAML 模板）以启动和停止您可以使用“调用过程”活动的服务（您可能想要做一些事情，比如使它成为通用并传入服务名称作为参数 - 请注意，您可以更改元数据参数中的显示名称等，使其在您的构建定义中显得有意义）。

就复制内容而言，您可以通过访问诸如放置位置之类的属性来轻松完成此操作。

应该相当直截了当——一旦你开始修改模板！

编辑：

抱歉没有尽快回复，我不得不修改我之前的评论，这并不像看起来那么简单，除非你真的知道你想要什么，我一直在考虑这个，就像剥猫皮一样，不止一个实现这一目标的方法......我已经重写了几次，所以我希望编辑有意义:)

归结为以下几点：

1) 将要在其上运行的构建代理/机器传递到您的模板中（这可以作为一个简单的字符串或作为 AgentReservationSpec - 由您决定），因为它不太可能是您运行实际 CI 的机器建立在。如前所述，这是在 XAML 的参数部分完成的，如果要编辑显示名称/描述，可以编辑元数据参数。这台机器当然需要安装 TFS 代理。

2) 在远程机器上运行任务，这是通过将 Agent Scope 活动添加到模板中来完成的，您必须使用步骤 1 中的信息来获取 ReservationSpec（如果将参数添加为 AgentReservationSpec 会更容易或者您需要在模板中解决此问题）

2.1）运行停止/卸载，这是通过放入一个（实际上是两个）Invoke Process活动来完成的，Invoke Process可以接受参数，你需要将它指向你正在执行的可执行文件，所以你会想要使用这个，一个用于 NET 命令（即 NET STOP ），一个用于 InstallUtil.exe。

2.2) 将文件从 CI 复制到远程服务器，您可以使用 Copy Directory 活动，它需要几个参数，主要是源位置，您应该能够放入 GetBuildDetail 活动，给它是一个名称，然后引用 .DropLocation 来获取它，目的地是您想要安装到的任何地方。

2.3) 安装新服务如步骤2.1，您需要使用Invoke Process安装服务，然后您可以使用另一个启动服务。

我还没有涵盖所有内容，但我还没有自己设置，所以我确信有一些陷阱或我没有想到的事情。在我看来这是有道理的，但也许更了解的人可以在其中戳几个洞:)

# javascript - 咕噜服务器无法连接

> ID：13342606
> 
> 赞同：13
> 
> 时间：2012-11-12T11:07:34.330
> 
> 标签：javascript, linux, html, node.js, gruntjs

```
module.exports = function(grunt) {

  // Project configuration.
    grunt.initConfig({
      server: {
        port: 8888,
        base: '.'
      }
    });

};

C:\Program Files\nodejs\test\grunt>
C:\Program Files\nodejs\test\grunt>grunt server
Running "server" task
Starting static web server on port 8888. 
```

完成，没有错误。

但无法通过输入连接`[http://127.0.0.1:8888][1] in browsers ! jiong~`

如何在 windows 或 unix 中解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-03T03:26:29.797

在结合[grunt-contrib-connect 的](https://github.com/gruntjs/grunt-contrib-connect)grunt 0.4 中，您可以使用参数运行长时间运行的服务器`keepalive`：`grunt connect:target:keepalive`或将其定义为配置中的选项：

```
grunt.initConfig({
  connect: {
        target:{
            options: {
                port: 9001,
                keepalive: true
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T02:30:31.217

不要使用 grunt 为您的项目服务。Grunt 是一个构建工具。相反，使用 npm 生命周期脚本。

### `server.js`

```
var express = require("express"),
    app = express();
app.use('/', express.static(__dirname));
app.listen(8888); 
```

### `package.json`

```
{
    "name": "my-project",
    "scripts": {
        "start": "node server.js"
    },
    "dependencies": {
        "express": "3"
    }
} 
```

现在你可以跑步了`npm start`，生活会很棒。Grunt 是一个构建工具，而不是一个服务器。npm 是包生命周期管理器，而不是构建工具。Express 是一个服务器库。在正确的位置使用每个。

## 跟进 (2013-08-15)

此规则的例外情况是当您需要将项目提供给构建堆栈中的其他测试工具时。该`grunt-contrib-connect`插件是专门为这个用例而设计的，并且有一个`keepalive`配置设置，可以在提供静态文件时让 grunt 保持打开状态。这通常与`watch`在测试或代码更改时运行测试套件的任务结合使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T01:51:06.513

该`server`任务仅在需要时运行，但您可以阻止它退出。从小[部件](https://stackoverflow.com/users/421512/widged)对另一个问题[的评论](https://stackoverflow.com/questions/11943212/whats-the-purpose-of-gruntjs-server-task#comment16262159_11943814)中：在您的文件中定义一个名为的任务，它运行任务和.`grunt.js``run``server``watch`

```
grunt.registerTask("run", "server watch"); 
```

任务无限期地运行，因此`watch`它阻止`server`任务结束。只要确保您也有该`watch`任务的配置。这一切都在您的`grunt.js`文件中：

```
module.exports = function (grunt) {
  // …
  grunt.initConfig({
    // …
    watch: {
      files: "<config:lint.files>",
      tasks: "lint qunit",
    },
    // …
  });

  grunt.registerTask("run", "server watch");
}; 
```

从命令行只需键入：

```
$ grunt run 
```

服务器将保持正常运行。

或者，正如@NateBarr 指出的那样，您可以从命令行运行：

```
$ grunt server watch 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:59:22.127

By default Grunt starts up the server just for testing (or any other task asked..) and as soon as it's done it exits....

But fortunately I found a solution which by **adding** this to your `grunt.js` file will let you (optionally) halt the server from exiting.

```
grunt.registerTask('wait', 'Wait for a set amount of time.', function(delay) {
   var d = delay ? delay + ' second' + (delay === '1' ? '' : 's') : 'forever';
   grunt.log.write('Waiting ' + d + '...');
   // Make this task asynchronous. Grunt will not continue processing
   // subsequent tasks until done() is called.
   var done = this.async();
  // If a delay was specified, call done() after that many seconds.
   if (delay) { setTimeout(done, delay * 1000); }
}); 
```

Then in your command line call it: `grunt server wait` then you should be able to see it in the browser..

Make sure you add it inside `module.exports = function(grunt){...}`

# formatting - VIM 格式化程序文件的位置

> ID：13342608
> 
> 赞同：1
> 
> 时间：2012-11-12T11:07:39.787
> 
> 标签：formatting, vim

我在互联网上找到了以下代码片段，并想在自己的`.vimrc`.

```
augroup CodeFormatters
    autocmd!

    autocmd  BufReadPost,FileReadPost   *.py    :silent %!PythonTidy.py
augroup END 
```

但是，我不太确定将`PythonTidy.py`脚本放在哪里，以便从任何地方都可以访问它。此外，我读到 using分别`BufReadPre`优于，这是真的吗？`BufReadPost``FileReadPre`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:18:32.880

就目前而言，`PythonTidy.py`必须可以通过您的`PATH`. 如果你有一个方便的地方已经包含在那里，例如`~/bin`，把它放在那里。

或者，您可以将它放在`.vim`目录中的某个位置，并使用类似的东西`expand('<sfile>:p:h')`来解析 Vimscript 的目录，并从那里构建一个相对路径。

由于要使用`:%!`命令过滤读取缓冲区的内容，因此必须使用`BufReadPost`事件；使用`BufReadPre`，缓冲区尚未被读取，并且不会将任何内容发送到过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:20:42.880

`PythonTidy`是一个命令行可执行文件：把它放在你的`$PATH`.

您也可以将其放在任何地方并在以下位置使用绝对路径`autocmd`：

```
autocmd  BufReadPost,FileReadPost *.py :silent %!/path/to/PythonTidy.py 
```

# c++ - 随机数据测试

> ID：13342614
> 
> 赞同：1
> 
> 时间：2012-11-12T11:08:22.567
> 
> 标签：c++, testing, random

我正在大学做我的学校作业 - 程序需要 2 个二进制数并写出它们的总和。我的大学使用一种特殊的软件来测试家庭作业，其中一个测试是“随机数据测试”，我的程序无法通过，有人可以给我一些提示吗？程序：

```
#include <iostream>
#include <string>
using namespace std;
int B2D(string number)
{
    int result = 0, pow = 1;
    for ( int i = number.length() - 1; i >= 0; --i, pow <<= 1 )
        result += (number[i] - '0') * pow;

    return result;
}
string D2B(int number)
{
    if ( number == 0 ) return "0";
    if ( number == 1 ) return "1";

    if ( number % 2 == 0 )
        return D2B(number / 2) + "0";
    else
        return D2B(number / 2) + "1";
}
int main()
{
    string input_number;
    string input_number2;
    cout << "Write 2 binary numbers" << endl;
    if(!(cin >> input_number >> input_number2))
    {
        cout << "Wrong entry." << endl;
        return 0;
    }
    for(unsigned int i=0;i<input_number.size();i++){
        if((input_number[i] != '1') && (input_number[i] != '0'))
        {
            cout << "Wrong entry." << endl;
            return 0;
        }
    }
    for(unsigned int i=0;i<input_number2.size();i++){
        if((input_number2[i] != '1') && (input_number2[i] != '0'))
        {
            cout << "Wrong entry."<<endl;
            return 0;
        }
    }
    int result = B2D(input_number);
    int result2 = B2D(input_number2);
    int result3 = result + result2;
    string result4 = D2B(result3);
    cout << "Result: " << result4 << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:10:04.773

如果问题出在非常大的数字上，您可以使用可能不允许的 bigdecimal 库，或者使用您在小学学到的字符串手动计算：

1.  取最后两位数并将它们相加
2.  如果结果为 0 或 1，则写入数字
3.  如果结果大于 2（二进制 10 或 11），则写入最低有效位并将溢出转移到下一个位置
4.  在步骤 1 重复，直到处理完所有数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:44:43.387

当二进制数非常高时，问题似乎出在 B2D 函数中。如何解决？由于 pow <<= 1，我不能使用 double

# c# - 仅在使用 Process.Start 时出现应用程序错误

> ID：13342618
> 
> 赞同：0
> 
> 时间：2012-11-12T11:08:38.087
> 
> 标签：c#, .net, process, system.diagnostics

在我们的系统中，我们正在监视一个我们几乎无法控制的第三方可执行文件，我们称之为 TheServer.exe。我相信它是在 C++ Builder 中构建的。有时 TheServer 行为不端，我们需要杀死并重新启动它。我正在编写一些 C# 代码来自动执行此操作，但是当我使用 启动 TheServer.exe 时`Process.Start()`，我从 TheServer 收到一个错误对话框，指出“外部异常 E0434F4D”。

从资源管理器或命令行启动 TheServer 时，没有错误。我还尝试在 Visual Studio 2010 中以调试模式启动该过程，也没有错误。此外`Process.Start`，我尝试了 P/Invoke 调用`ShellExecute`，`CreateProcess`结果相同。还有其他方法可以让我从.Net开始这个过程吗？

我现在使用的代码：

```
const string path = @"C:\Program files\TheServer\TheServer.exe";
ProcessStartInfo psi = new ProcessStartInfo()
{
  FileName = path,
  WorkingDirectory = Path.GetDirectoryName(path),
  UseShellExecute = true, // Tried false as well
};
Process.Start(psi); 
```

* * *

编辑：当 Hans Passant 找到[这个答案](https://stackoverflow.com/a/4648841/306074)时，我创建了一个非常小的 C++ 程序作为中间程序。

```
#include <windows.h>

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
  ShellExecuteA(NULL, "open", lpCmdLine, "", "", SW_NORMAL);
  return 0;
} 
```

从命令行使用 运行它`Run.exe TheServer.exe`，程序启动时没有任何错误。从 .Net 运行相同的命令行会导致与以前相同的错误对话框。

* * *

编辑：[这个问题](https://stackoverflow.com/q/3972965/306074)与我的非常相似，但我不使用 Xenocode Postbuild，我相信这只是问题的一部分。但正如建议的那样，我尝试单步执行我的代码，然后该 exe 启动而没有错误。确实很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:33:33.923

这是我刚刚启动的记事本启动器。它工作正常

```
namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            Process process = new Process();
            process.StartInfo.FileName = "notepad";
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.CreateNoWindow = true;

            process.Start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:59:27.670

Oh, how silly. After a lot of tests and troubleshooting I was able to isolate the problem. It had nothing to do with Process.Start after all. When the we detect that the new process has started, we open a Telnet connection to it to query it's status. When that is done too early, the error message is displayed. Well, thanks for making me following the whole thing through.

# ios - 有问题理解块变量范围

> ID：13342625
> 
> 赞同：1
> 
> 时间：2012-11-12T11:09:02.597
> 
> 标签：ios, objective-c-blocks

```
#import "ViewController.h"

@implementation ViewController

int tnt=1;

-(void)myMethod{

    void(^blk)(void) = ^(void){
        tnt = 3+1;
        NSLog(@"tnt=>%d", tnt);
    };

    blk();
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self myMethod];
} 
```

变量 tnt 在外面，但在里面，它工作得很好。如果我在 myMethod 中声明 tnt 变量，它开始给出 __block required 错误。

在这两种情况下， tnt 变量都在块之外。Apple 文档还说外部变量需要 __block 存储类型。为什么在 myMethod 之外声明 tnt 时它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:54:52.183

我猜这与范围有关。从文档中：

> 使用 __block 存储修饰符声明的封闭词法范围的局部变量由引用提供，因此是可变的。任何更改都反映在封闭词法范围中，包括在同一封闭词法范围内定义的任何其他块。这些在“__block 存储类型”中有更详细的讨论。</p>

当您`int tnt=1;`超出词法范围时，我认为您不必使用`__block`修饰符。你有一个例子，[here](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html)。您还可以阅读以下内容：

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧内声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供以后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。

由于在`int tnt=1;`词法范围之外声明，它将在堆栈的破坏中幸存下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:22:34.230

不需要捕获全局变量。

# vb.net - .NET - 分离层

> ID：13342626
> 
> 赞同：0
> 
> 时间：2012-11-12T11:09:06.867
> 
> 标签：vb.net, design-patterns, n-tier-architecture, 3-tier

我正在尝试为我正在开发的大型 .NET 应用程序创建一个结构。我计划创建三个项目：

```
DataAccessLayer
BusinessLogicLayer
UserInterfaceLayer 
```

我有两个问题。

1.  您将如何处理所有三层共有的功能，例如将错误记录到文本文件中。.NET 中不允许循环依赖。我相信最好的方法是创建一个名为 Utilities 的第四个项目。
2.  您会在所有项目中拥有 .config 文件还是仅在用户界面层中拥有 .config 文件（将所有配置参数作为参数传递给 BLL 和 DLL 中的构造函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:20:27.667

> 您将如何处理所有三层共有的功能，例如将错误记录到文本文件中。.NET 中不允许循环依赖。我相信最好的方法是创建一个名为 Utilities 的第四个项目。

横切关注点通常以第四次组装结束。但在记录器案例中，只需使用开发人员习惯的现有框架之一。例如 nlog 或 log4net。

循环依赖是一种气味（高耦合或低内聚），不应在任何地方允许。

其他人建议使用依赖注入，这是减少耦合并因此提高可维护性的好方法。我在这里写了一篇文章：http: [//www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)

> 您会在所有项目中拥有 .config 文件还是仅在用户界面层中拥有 .config 文件（将所有配置参数作为参数传递给 BLL 和 DLL 中的构造函数）

我宁愿创建一个配置抽象。类似的东西`IConfigurationRepository`。那么配置存储在 web.config 还是其他地方都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:18:46.730

1.  拥有第四个项目是一种解决方案，另一种是将其放置在数据层中，并在业务层中拥有允许 UI 层访问它们的方法。

2.  您应该只将每个设置放在一个地方，因此 UI 层似乎是一个好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:19:27.040

1.  是的，创建另一个用于记录的项目。我建议在那个新项目中使用[Log4Net 。](http://logging.apache.org/log4net/)

2.  我会将配置设置保留在顶层 - UI 层 - 并将任何必要的内容传递给其他层。

你没有提到[DI](http://en.wikipedia.org/wiki/Dependency_Injection)，我肯定会使用 DI - 这应该是一个优先事项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:45:54.427

1.  您可以创建一个日志记录项目并将其添加到所有其他项目中，但在我看来，您应该为每个项目添加一个记录器配置文件，因为您正在建模三层架构意味着首先对逻辑上分离的三层建模，所以您应该能够分别开发和测试它们中的每一个。
2.  如果您有特定的层配置设置（例如，一个或多个层停留在不同的服务器上以获得强大的性能约束），则为每一层使用不同的配置文件。如果您有相同的配置设置，您可以在用户界面中只使用一个配置文件，但请注意，如果您更改用户界面，您将不得不替换所有设置，我认为这可能是一个严重的问题。

# visual-studio-2012 - 将 NuGet ndef 库添加到 windows phone 8 项目

> ID：13342630
> 
> 赞同：4
> 
> 时间：2012-11-12T11:09:25.617
> 
> 标签：visual-studio-2012, nuget, nfc, windows-phone-8, ndef

因此，我尝试在 Visual Studio 2012 中为 Windows Phone 8 应用程序添加邻近应用程序的 NDEF 库。在`Package Manager`我检查`Allow NuGet to download missing packages during build`并在`Solution Explorer`我选择的`Enable NuGet Package Restore`.

到目前为止一切顺利，但是当我尝试安装软件包时，出现以下错误：

> 无法安装软件包“ **NdefLibrary 0.9.0.1** ”。您正在尝试将此包安装到以“ **WindowsPhone,Version=v8.0** ”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。

![在此处输入图像描述](../Images/897efd413d329bb660ff554cf8bd4984.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T23:50:34.923

这在我的开发盒上运行良好。这是我的 NuGet 包管理器在 WP8 项目中的输出：

```
PM> Install-Package NdefLibrary
You are downloading NdefLibrary from Andreas Jakl, the license agreement to which is available at https://ndef.codeplex.com/license. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'NdefLibrary 0.9.0.1'.
Successfully added 'NdefLibrary 0.9.0.1' to Wp8TestApp. 
```

您可能缺少的是将 NuGet 包管理器更新到最新版本。转到 Visual Studio 文件菜单 --> 工具 --> 扩展和更新 --> 更新 --> Visual Studio 库 --> NuGet --> 更新，最后您需要重新启动。需要此更新的原因是 VS2012 RTM 附带的 NuGet 版本不支持 WP8，因为 WP8 在 VS2012 之前没有 RTM。

# java - httpclient (phpmyadmin) 无法在 Android 4.0+ 上运行

> ID：13342638
> 
> 赞同：0
> 
> 时间：2012-11-12T11:09:57.143
> 
> 标签：java, android, http, phpmyadmin, android-asynctask

我在下面使用此代码，它在 Android 2.3.3 中完美运行。但是，在 4.0+ 中，它无法以某种方式连接到数据库。我看到一些关于你需要在异步课程中获得它的帖子。我也试过了，但我似乎无法正常工作。我可能用错了，但我很难理解。

```
 public class connector extends Activity {
    /** Called when the activity is first created. */

       TextView txt;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getServerData(null);
    }
     //i use my real ip here

    public String getServerData(String returnString) {
        System.out.println("going to connector class");
       InputStream is = null;
       final String KEY_121 = "http://10.0.0.128/connector.php";
       String result = "";
        //the year data to send
      //  ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
      //  nameValuePairs.add(new BasicNameValuePair("year","1970"));

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(KEY_121);
               // httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

        //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        //parse json data
        try{
                JSONArray jArray = new JSONArray(result);
                for(int i=0;i<jArray.length();i++){
                        JSONObject json_data = jArray.getJSONObject(i);
                        Log.i("log_tag","ID: "+json_data.getInt("ID")+
                                ", \nActara: "+json_data.getString("Actara")
                        );
                        //Get an output to the screen
                        returnString += "\n\t" + jArray.getJSONObject(i); 
                }
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return returnString; 
    }    

    } 
```

Logcat 错误（在 4.0+ 上）：

```
11-12 12:02:35.658: E/log_tag(14083): Error in http connection android.os.NetworkOnMainThreadException
11-12 12:02:35.658: E/log_tag(14083): Error converting result java.lang.NullPointerException
11-12 12:02:35.663: E/log_tag(14083): Error parsing data org.json.JSONException: End of input at character 0 of 
```

只有第一个错误行很重要，因为它无法连接到数据库，它给出了一个 nullPointer（第二个和第三个错误）。

这是我在异步中尝试过的：

```
 public class connector extends Activity {
    /** Called when the activity is first created. */

       TextView txt;
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new BackgroundAsyncTask().execute();

}

 public class BackgroundAsyncTask extends
    AsyncTask<Void, Integer, Void> {

        InputStream is = null;
        final String KEY_121 = "http://10.0.0.128/connector.php";
        String result = "";
        String returnString = "";

        protected void onPostExecute(Void result) {

        }

        @Override
        protected void onPreExecute() {
        System.out.println("onPreExecute");
        }

        protected Void doInBackground(String... params) {
             try{
                 System.out.println("background in progress");
                 HttpClient httpclient = new DefaultHttpClient();
                 HttpPost httppost = new HttpPost(KEY_121);
                // httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                 HttpResponse response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();
                 is = entity.getContent();

         }catch(Exception e){
                 Log.e("log_tag", "Error in http connection "+e.toString());
         }

         //convert response to string
         try{
                 BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                 StringBuilder sb = new StringBuilder();
                 String line = null;
                 while ((line = reader.readLine()) != null) {
                         sb.append(line + "\n");
                 }
                 is.close();
                 result=sb.toString();
         }catch(Exception e){
                 Log.e("log_tag", "Error converting result "+e.toString());
         }
         //parse json data
         try{
                 JSONArray jArray = new JSONArray(result);
                 for(int i=0;i<jArray.length();i++){
                         JSONObject json_data = jArray.getJSONObject(i);
                         Log.i("log_tag","ID: "+json_data.getInt("ID")+
                                 ", \nActara: "+json_data.getString("Actara")
                         );
                         //Get an output to the screen
                         returnString += "\n\t" + jArray.getJSONObject(i); 
                 }
         }catch(JSONException e){
                 Log.e("log_tag", "Error parsing data "+e.toString());
         }
        return null;
        }

        protected void onProgressUpdate(Integer... values) {

        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            return null;
        }

    }

} 
```

有人可以帮助我吗？我不确定真正的原因是为什么它不适用于 4.0+。
如果您需要更多信息，请说出来，我会发布。
代码可能有点乱，我还没有真正“清理”它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:34:21.893

从 Android 3.0 开始，你不能在主线程上做网络事情。为什么？因为网络问题会导致用户界面变慢。所以你必须在一个新线程中做所有的 http 东西。您走在正确的道路上，但您在 AsyncTask 中犯了一个错误。删除异步任务中的空 doInBackground 方法并在您的方法上写入 @Override。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:26:05.530

好的对...搜索了几个小时后，提出了这个问题，然后10分钟后，您找到了解决方案...

选项 1：
我添加了这一行：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

但我建议不要使用选项 1，这实际上是一个糟糕的解决方案。使用选项 2！
//================================================= ============================
选项2：

使用本教程制作正确的[ASyncTask：http://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html](http://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html)

//================================================= ============================
使用 ASyncTask 作为最终任务（选项 2）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:42:58.457

> android.os.NetworkOnMainThreadException

这个错误来自 HoneyComb（3.0 或更高版本）。如文档所述，您无法在其主线程上执行网络操作。要解决这个问题，您必须使用处理程序或异步任务。AFAIK 没有其他方法可以做到这一点。

您可以查看此内容以了解更多详细信息[为什么 ICS 会导致您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

尝试使用下面的代码片段

```
new Thread(){
    public void run(){
        //do your Code Here    
    }
}.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:14:46.307

为什么你要传递`null`网络连接和网络服务的功能。？

```
getServerData(null); 
```

# ruby-on-rails - 页面选项卡应用内页面上的 Facebook 点赞

> ID：13342640
> 
> 赞同：0
> 
> 时间：2012-11-12T11:10:02.790
> 
> 标签：ruby-on-rails, facebook

我正在 Facebook 上构建一个页面选项卡应用程序，允许用户创建和显示他们自己的条目，并且我希望能够有一个特定于每个条目的共享和一个喜欢的按钮。

我正在使用 app_data 参数将路径传递到应用程序内的页面，并且它与共享按钮完美配合 - 用户可以将他们的条目共享到他们的墙上，并将共享链接返回到相应的页面。

但是，当我尝试对喜欢做同样的事情时，它会显示页面选项卡是其子页面的总点赞数。有没有人有类似的问题，或者可以指出我正确的方向来解决它？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:44:49.547

你不能喜欢特定的页面标签内容——Facebook 将统计 Facebook 页面的所有喜欢，无论 URL 包含什么应用 ID 和可能的 app_data。

但是，您可以喜欢加载在页面选项卡框架内的自己的 URL——如果真正的用户正在访问它们，则可以使用 JavaScript 将它们重定向到嵌入到 iframe 中的自身。

# linux-device-driver - 从内核空间配置串口

> ID：13342644
> 
> 赞同：0
> 
> 时间：2012-11-12T11:10:10.127
> 
> 标签：linux-device-driver

如何在内核模块中配置串口。我在初始化模块函数中这样做。相同的配置在用户空间中工作。我正在使用下面的代码来配置串口。

```
mm_segment_t oldfs;

oldfs = get_fs();
set_fs(KERNEL_DS);
fp = filp_open("/dev/ttyS0",O_RDWR | O_NOCTTY | O_NDELAY);
tty = (struct tty_struct *)fp->private_data;
setting the required configuration(tty->termios)
set_fs(oldfs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:14:51.570

几乎所有串口操作的功能都是由`drivers/tty/serial/serial_core.c`. 如果您想以不同的方式进行操作，请为`uart_ops`from提供您自己的功能`include/linux/serial_core.h`

```
struct uart_ops {
        unsigned int    (*tx_empty)(struct uart_port *);
        void            (*set_mctrl)(struct uart_port *, unsigned int mctrl);
        unsigned int    (*get_mctrl)(struct uart_port *);
        void            (*stop_tx)(struct uart_port *);
        void            (*start_tx)(struct uart_port *);
        void            (*send_xchar)(struct uart_port *, char ch);
        void            (*stop_rx)(struct uart_port *);
        void            (*enable_ms)(struct uart_port *);
        void            (*break_ctl)(struct uart_port *, int ctl);
        int             (*startup)(struct uart_port *);
        void            (*shutdown)(struct uart_port *);
        void            (*flush_buffer)(struct uart_port *);
        void            (*set_termios)(struct uart_port *, struct ktermios *new,
                                       struct ktermios *old);
        void            (*set_ldisc)(struct uart_port *, int new);
        void            (*pm)(struct uart_port *, unsigned int state,
                              unsigned int oldstate);
        int             (*set_wake)(struct uart_port *, unsigned int state);
        const char *    (*type)(struct uart_port *);
        void            (*release_port)(struct uart_port *);
        int             (*request_port)(struct uart_port *);
        void            (*config_port)(struct uart_port *, int);
        int             (*verify_port)(struct uart_port *, struct serial_struct *);
        int             (*ioctl)(struct uart_port *, unsigned int, unsigned long);
#ifdef CONFIG_CONSOLE_POLL
        void    (*poll_put_char)(struct uart_port *, unsigned char);
        int             (*poll_get_char)(struct uart_port *);
#endif
}; 
```

在您的情况下，您需要实现 set_termios 功能。另外，看看`uart_get_divisor()`如何设置波特率。

# php - 左连接不返回左表代码点火器中的所有行

> ID：13342646
> 
> 赞同：2
> 
> 时间：2012-11-12T11:10:22.337
> 
> 标签：php, mysql, codeigniter

实际上在发布之前发现了很多这样的问题，但没有找到与“Codeigniter”相关的问题，所以我不知道如何用 codeigniter 实现这些答案。

我的**meta_key**表

```
key_id | key_name | key_parent
------------------------------
.....1..firstname........1

.....2..lastname.........1 
```

我的**users_meta**表

```
meta_id | meta_user_id | meta_key_id |meta_value |
--------------------------------------------------
1.........1..............1............chuck...... 
```

当我运行这个查询

```
$this->db->select("*");
    $this->db->from("meta_key");
    $this->db->join("users_meta", "users_meta.meta_key_id=meta_key.key_id","left");
    $this->db->where('users_meta.meta_user_id', '1');
    $query=$this->db->get();
    return $query; 
```

它总是返回我单行（即名字行）

我尝试了 codeigniter 参考页面中的每个选项（选项是：左、右、外、内、左外和右外）而不是“左”连接，但它仍然返回单行。

我怎样才能让它也返回“姓氏”行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:43:20.880

正如您评论的那样，以下代码对您有用，所以这里是答案

```
//just guess and try 
$this->db->where('users_meta.meta_user_id = 1 OR users_meta.meta_key_id IS NULL'); 
```

# iphone - 启动设置 iphone5

> ID：13342649
> 
> 赞同：0
> 
> 时间：2012-11-12T11:11:09.153
> 
> 标签：iphone, ios, xcode

好的，我相信我的启动设置不适合 iPhone 5 有问题。这不是飞溅问题，因为状态栏距离顶部大约一英寸。这就是启动画面一出现就会发生的事情。如何优化它以支持 iPhone 5 启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:15:39.080

嘿，您可以按照以下方式进行操作，希望您能得到一些帮助。

为您的应用设置 4 英寸的启动图像。为此，您必须获得 1136px 屏幕高度..否则您将获得黑屏

# c++ - 了解 Matlab 中的 DEL2 函数以便在 C++ 中对其进行编码

> ID：13342651
> 
> 赞同：2
> 
> 时间：2012-11-12T11:11:09.933
> 
> 标签：c++, function, matlab

为了在 C++ 中编写 DEL2 matlab 函数，我需要了解算法。我已经设法为不在边界或边缘上的矩阵元素编写函数。我已经看过几个关于它的主题，并通过键入“edit del2”或“type del2”来阅读 MATLAB 代码，但我不明白为获得边界和边缘而进行的计算。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:36:33.540

您想近似 u'' 只知道一个点右侧（或左侧）的 u 值。为了获得二阶近似值，您需要 3 个方程（基本泰勒展开式）：

u(i+1) = u(i) + h u' + (1/2) h^2 u'' + (1/6) h^3 u''' + O(h^4)

u(i+2) = u(i) + 2 h u' + (4/2) h^2 u'' + (8/6) h^3 u''' + O(h^4)

u(i+3) = u(i) + 3 h u' + (9/2) h^2 u'' + (27/6) h^3 u''' + O(h^4)

求解 u'' 给出**(1)**：

h^2 u'' = -5 u(i+1) + 4 u(i+2) - u(i+3) + 2 u(i) +O(h^4)

要获得拉普拉斯算子，您需要在边界上用这个公式替换传统公式。

例如，如果“i = 0”，您将拥有：

del2(u) (i=0,j) = [-5 u(i+1,j) + 4 u(i+2,j) - u(i+3,j) + 2 u(i,j) + u(i,j+1) + u(i,j-1) - 2u(i,j) ]/h^2

**编辑**说明：

拉普拉斯算子是 x 和 y 方向的二阶导数之和。您可以使用公式**（2）计算二阶导数**

u'' = (u(i+1) + u(i-1) - 2u(i))/h^2

如果你同时拥有 u(i+1) 和 u(i-1)。如果 i=0 或 i=imax，您可以使用我写的第一个公式来计算导数（请注意，由于二阶导数的对称性，如果 i = imax，您可以将“i+k”替换为“ik”） . 这同样适用于 y (j) 方向：

在边缘，您可以混合公式**(1)**和**(2)**：

del2(u) (i=imax,j) = [-5 u(i-1,j) + 4 u(i-2,j) - u(i-3,j) + 2 u(i,j) + u(i,j+1) + u(i,j-1) - 2u(i,j) ]/h^2

del2(u) (i,j=0) = [-5 u(i,j+1) + 4 u(i,j+2) - u(i,j+3) + 2 u(i,j) + u(i+1,j) + u(i-1,j) - 2u(i,j) ]/h^2

del2(u) (i,j=jmax) = [-5 u(i,j-1) + 4 u(i,j-2) - u(i,j-3) + 2 u(i,j) + u(i+1,j) + u(i-1,j) - 2u(i,j) ]/h^2

在拐角处，您只需在两个方向上使用**(1)**两次。

del2(u) (i=0,j=0) = [-5 u(i,j+1) + 4 u(i,j+2) - u(i,j+3) + 2 u(i, j) + -5 u(i,j+1) + 4 u(i+2,j) - u(i+3,j) + 2 u(i,j)]/h^2

Del2 是二阶离散拉普拉斯算子，即它允许在两个相邻节点之间的距离为**h的方形笛卡尔网格 NxN 上给定***实际*连续函数的拉普拉斯算子近似值。

 **h^2 只是一个常数维度因子，您可以通过设置 h^2 = 4 从这些公式中获得 matlab 实现。

例如，如果您想在 (0,L) x (0,L) 正方形上计算 u(x,y) 的*实数*拉普拉斯算子，您所做的就是在 NxN 笛卡尔网格上写下该函数的值，即你计算 u(0,0), u(L/(N-1),0), u(2L/(N-1),0) ... u( (N-1)L/(N- 1) =L,0) ... u(0,L/(N-1)), u(L/(N-1),L/(N-1)) 等等，然后你把这些 N^矩阵 A 中的 2 个值。

然后你会得到 ans = 4*del2(A)/h^2，其中 h = L/(N-1)。

如果您的起始函数是线性或二次函数（x^2+y^2 很好，x^3 + y^3 不好），del2 将返回*连续拉普拉斯算子的确切值。*如果函数不是线性的也不是二次的，使用的点越多，结果就越准确（即在极限 h -> 0 内）

我希望这更清楚，请注意我使用基于 0 的索引来访问矩阵（C/C++ 数组样式），而 matlab 使用基于 1 的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:35:47.940

MatLab 中的 DEL2 代表离散拉普拉斯算子，您可以在[此处](http://matlab.izmiran.ru/help/techdoc/ref/del2.html)找到有关它的一些信息。

边的主要内容是矩阵内部的元素有四个邻居，而边和角上的元素分别有三个或两个邻居。因此，您以相同的方式计算角和边，但使用的元素更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T04:34:22.723

它是如此艰苦！我浪费了几个小时来理解和用 Java 实现它。

这里是：[https ://gist.github.com/emersonmoretto/dec8f7125c032775da0d](https://gist.github.com/emersonmoretto/dec8f7125c032775da0d)

测试并与原始函数 DEL2 (Matlab) 进行比较

我在 sbabbi 回复中发现了一个错字：

```
del2(u) (i=0,j=0) = [-5 u(i,j+1) + 4 u(i,j+2) - u(i,j+3) + 2 u(i,j) + -5 u(i,j+1) + 4 u(i+2,j) - u(i+3,j) + 2 u(i,j)]/h^2 
```

是

```
del2(u) (i=0,j=0) = [-5 u(i,j+1) + 4 u(i,j+2) - u(i,j+3) + 2 u(i,j) + -5 u(i+1,j) + 4 u(i+2,j) - u(i+3,j) + 2 u(i,j)]/h^2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T00:39:29.883

这是我在 Fortran 90 中编写的一个模块，它复制了 MATLAB 中实现上述想法的“del2()”运算符。它仅适用于至少 4x4 或更大的数组。当我运行它时它会成功运行，所以我想我会发布它，这样其他人就不必浪费时间制作自己的了。

```
module del2_mod
implicit none
real, private                       :: pi
integer, private                    :: nr, nc, i, j, k
contains
! nr is number of rows in array, while nc is the number of columns in the array.
!!---------------------------------------------------------- 

subroutine del2(in, out)
real, dimension(:,:)            :: in, out
real, dimension(nr,nc)          :: interior, left, right, top, bottom, ul_corner, br_corner, disp
integer                         :: i, j
real                            :: h, ul, ur, bl, br
! Zero out internal arrays
out = 0.0; interior=0.0; left = 0.0;  right = 0.0;  top = 0.0;  bottom = 0.0;  ul_corner = 0.0; br_corner = 0.0;
h=2.0

! Interior Points
do j=1,nc
    do i=1,nr
    ! Interior Point Calculations
    if( j>1 .and. j<nc .and. i>1 .and. i<nr )then
        interior(i,j) = ((in(i-1,j) + in(i+1,j) + in(i,j-1) + in(i,j+1)) - 4*in(i,j) )/(h**2)
    end if
    ! Boundary Conditions for Left and Right edges
    left(i,1) = (-5.0*in(i,2) + 4.0*in(i,3) - in(i,4) + 2.0*in(i,1) + in(i+1,1) + in(i-1,1) - 2.0*in(i,1) )/(h**2)
    right(i,nc) = (-5.0*in(i,nc-1) + 4.0*in(i,nc-2) - in(i,nc-3) + 2.0*in(i,nc) + in(i+1,nc) + in(i-1,nc) - 2.0*in(i,nc) )/(h**2)
    end do
! Boundary Conditions for Top and Bottom edges
top(1,j) = (-5.0*in(2,j) + 4.0*in(3,j) - in(4,j) + 2.0*in(1,j) + in(1,j+1) + in(1,j-1) - 2.0*in(1,j) )/(h**2)
bottom(nr,j) = (-5.0*in(nr-1,j) + 4.0*in(nr-2,j) - in(nr-3,j) + 2.0*in(nr,j) + in(nr,j+1) + in(nr,j-1) - 2.0*in(nr,j) )/(h**2)
end do
out = interior + left + right + top + bottom 
! Calculate BC for the corners
ul = (-5.0*in(1,2) + 4.0*in(1,3) - in(1,4) + 2.0*in(1,1) - 5.0*in(2,1) + 4.0*in(3,1) - in(4,1) + 2.0*in(1,1))/(h**2)
br = (-5.0*in(nr,nc-1) + 4.0*in(nr,nc-2) - in(nr,nc-3) + 2.0*in(nr,nc) - 5.0*in(nr-1,nc) + 4.0*in(nr-2,nc) - in(nr-3,nc) + 2.0*in(nr,nc))/(h**2)
bl = (-5.0*in(nr,2) + 4.0*in(nr,3) - in(nr,4) + 2.0*in(nr,1) - 5.0*in(nr-1,1) + 4.0*in(nr-2,1) - in(nr-3,1) + 2.0*in(nr,1))/(h**2)
ur = (-5.0*in(1,nc-1) + 4.0*in(1,nc-2) - in(1,nc-3) + 2.0*in(1,nc) - 5.0*in(2,nc) + 4.0*in(3,nc) - in(4,nc) + 2.0*in(1,nc))/(h**2)
! Apply BC for the corners
out(1,1)=ul
out(1,nc)=ur
out(nr,1)=bl
out(nr,nc)=br
end subroutine

end module 
```**

# directx - 禁用 DWM 的窗口模式下的 Direct3D 10 垂直同步问题

> ID：13342653
> 
> 赞同：5
> 
> 时间：2012-11-12T11:11:16.490
> 
> 标签：directx, directx-10, dwm, vsync, direct3d10

在禁用 DWM 的窗口模式下，Direct3D 10 上的 vsync 出现问题。

我们有一个应用程序，它呈现并呈现一些输出。它必须在窗口模式下工作，并且必须至少产生稳定的 60 fps。一个版本的应用程序使用 Direct3D 9 和另一个 Direct3D 10。当我们在窗口模式下工作时，有时我们会降低 fps（它不是​​“稳定”降低。在大多数情况下，我们产生稳定的 60 fps，有时它会突然降低几秒钟，然后恢复到 60 fps）。在这两个版本的应用程序中，fps 降低约为 10-20 fps。这是不可接受的。

在 Windows Vista 和 Windows 7 中，有新的图形系统，称为“桌面合成”，它改变了应用程序在屏幕上显示像素的方式。桌面合成由桌面窗口管理器 (DWM) 执行。您知道，当启用 DWM 时，应用程序会绘制到显存中的屏幕外表面，而不是由 DWM 渲染并在一段时间内呈现在显示器上。因此，我们注意到，当任务管理器中的 dwm.exe 不执行任何操作（处理时间约为 0%）时，我们的 fps 会降低，而当 dwm.exe 占用 1-3% 的处理时间时，会有稳定的 60 fps 并且一切正常好的。

我们无法影响它。因此，我们必须关闭 DWM 才能获得高稳定的 fps。当我们关闭它时，一切正常。两个版本的应用程序都有稳定的 60 fps。但是DWM是在窗口模式下做vsync的，所以当我们关闭它的时候，我们必须自己做vsync。

但是当我们关闭 DWM 时，Direct3D 10 在窗口模式下的 vsync 会出现问题。显示器顶部有图像撕裂。Direc3D 9 一直运行良好。

因此，我们有一台刷新率为 60 Hz 的显示器。

在创建交换链时，我们设置了这样的参数：

```
swapChainDesc.BufferDesc.RefreshRate.Numerator = 60;
swapChainDesc.BufferDesc.RefreshRate.Denominator = 1; 
```

在演示时，我们设置了一个标志来打开 vsync：

```
m_pSwapChain->Present( 1, 0 ); 
```

并有下一个垂直同步问题。有垂直线，从左侧快速移动到右侧。并且显示器顶部有图像撕裂。
[http://bit.ly/POQoFq](http://bit.ly/POQoFq)

起初我们认为，我们做错了什么。所以我用旋转立方体安装了微软的示例“Tutorial 07: Texture Mapping and Constant Buffers”。使立方体更大，将其放置得更高，使其旋转更快并遇到相同的问题（见图）。
[http://bit.ly/SevNqw](http://bit.ly/SevNqw)
[http://bit.ly/RSoEhc](http://bit.ly/RSoEhc)
[http://bit.ly/UjaNPu](http://bit.ly/UjaNPu)

**因此，在全屏模式下的 Direct3D 10 上一切正常。垂直同步完美运行。在 Direct3D 9 上也一切正常，在禁用或启用 DWM 的情况下，vsync 效果很好。在禁用 DWM 的窗口模式下的 Direct3D 10 上存在问题。**

它在不同的计算机、不同的显卡（Nvidia 8600 GT、Nvidia 9500 GT、ATI Radeon HD 5870 Eyefinity 6）和不同版本的驱动程序上进行了测试。问题稳定重现。我们使用的是 Windows 7。

那么，为什么会出现这样的问题呢？如何解决它以及下一步该怎么做？

**UPD1**。如果上面的图像不可用，则有一些镜子。

[https://dl.dropbox.com/u/20468014/DSC_2287.JPG](https://dl.dropbox.com/u/20468014/DSC_2287.JPG)
[https://dl.dropbox.com/u/20468014/DSC_2308.JPG](https://dl.dropbox.com/u/20468014/DSC_2308.JPG)
[https://dl.dropbox.com/u/20468014/DSC_2313。 JPG](https://dl.dropbox.com/u/20468014/DSC_2313.JPG)
[https://dl.dropbox.com/u/20468014/DSC_2319.JPG](https://dl.dropbox.com/u/20468014/DSC_2319.JPG)

**UDP2。**我还想注意，我正在创建带有标志 WS_POPUP 的窗口以隐藏标题栏（它必须被隐藏）。图像撕裂出现在不同的地方。它总是在屏幕的顶部，但它可以是 20 像素，也可以是 50 像素。因此，在创建带有标题栏的窗口时，有时图像的顶部可能根本看不到图像撕裂。

# html - CSS布局强制表单元素水平滚动

> ID：13342654
> 
> 赞同：0
> 
> 时间：2012-11-12T11:11:28.313
> 
> 标签：html, css, layout, horizontal-scrolling

# 问题

我在尝试创建表单输入行时遇到了问题。这可以正常工作，但是，一旦总输入的宽度变得太大，一切都会开始包装。我想要的是水平滚动条出现在字段集中，并且单个**服务项**div 的所有表单元素保持在一行上。

```
<div style="display: inline-block;" class="horizontal-fields service-item">
    <button class="horizontal-fields remove-service-item" style="float: left; margin-right: 5px;">-</button>
    <label for="service_name">Name:</label>
    <input name="service_name[]" id="service_name" value="" type="text">

    <label for="service_description">Description:</label>
    <input id="service_description" name="service_description[]" value="" type="text">

    <!-- Additional form fields are dynamically inserted here. -->
    <div class="service-additional-fields">
        <!-- Additional fields for DSL Tails -->
        <label for="service_dsl_fnn[]">FNN:</label>
        <input id="service_dsl_fnn" name="service_dsl_fnn[]" size="10" value="" type="text">
        <button class="horizontal-fields new-service-item" style="display: inline-block;">+</button>
    </div>
    <br>
 </div> 
```

# 当前结果

这是一个显示当前状态的表单的 JSFiddle，我已经包含了我认为相关的所有基本 CSS/HTML：http: [//jsfiddle.net/FjxqG/3/](http://jsfiddle.net/FjxqG/3/)

你会看到我已经通过在*水平字段*类中指定**width: 300%**来获得我想要的东西。然而，这当然不是最优的，因为宽度基本上是固定的，并且不会自动适应服务项 div 的宽度。

 *当然，这使得宽度比它需要的大得多，但也总是显示水平滚动，即使在不需要时也是如此。

# 我试过的

我试过使用**display: inline-block;** 和**空格：不换行；**. 但是，前者似乎对我没有多大作用，后者仅对前几个表单项有效，对**service-additional-fields** div 内的项无效。

不幸的是，我在 service-additional-fields div 中有后面的项目，因为它们是使用 jQuery 动态插入的，所以虽然可以将它们取出，但我宁愿把它们留在里面，因为它使 JavaScript 更简单。

我尝试调整此处找到的解决方案，但收效甚微：[http ://www.css-lab.com/demos/image-display/side-scroll-gallery.html](http://www.css-lab.com/demos/image-display/side-scroll-gallery.html)

最终出现了类似的情况，其中后一个表单元素仍在包装。

我也考虑过做一些类似于这里找到的 jQuery 解决方案：[Horizo​​ntal scroll in DIV with many small DIV's inside (no text)](https://stackoverflow.com/questions/6431101/horizontal-scroll-in-div-with-many-small-divs-inside-no-text)

我想这对我有用，因为我已经知道在**水平字段**上设置宽度可以正常工作，所以使用 jQuery 来找出应该是什么宽度可能会起作用。但是，感觉我不应该需要 jQuery，这有点像 hack。因此，如果可能的话，我想避免它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:56:34.993

试试这个方法：

**HTML：**

```
<div id="slide-wrap">
    <!-- + First row -->
    <div class="row">
      <!-- All elements here -->
    </div>
    <!-- - First row --> 

    <!-- + Second row -->        
    <div class="row">
      <!-- All elements here -->
    </div>
    <!-- - Second row -->  
</div> 
```

**CSS：**

```
#slide-wrap {
  margin:0 auto;
  overflow: auto; 
  background:#BCC5E1;
  border:1px solid #000;
  width: 400px; /*  for example */
  padding-left:20px;
}

div.row {
  float:left;
  white-space: nowrap;
} 
```

放轻松，我真的对内部样式感到困惑，所以我删除了它们。 **[JsBin](http://jsbin.com/atowiq/1/edit)演示**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:27:40.257

由于某种原因，另一个答案已被删除，我无法将其取回，因此不得不再次回答。

之前的回答是——

如何删除浮动并使用自动宽度的内联块，然后将 .service-additional-fields 也作为内联块？

编辑以获得更完整的答案。

HTML

```
<fieldset>
        <legend>Fourth: Add Services</legend>
        <div id="slide-wrap">
            <div id="inner-wrap">
                <div class="horizontal-fields service-item">
                    <button class="addField">+</button>
                    <label>Text Box:</label>
                    <input type="text">
                    <label>Text Box:</label>
                    <input type="text">
                    <!-- Additional form fields are dynamically inserted here. -->
                    <div class="service-additional-fields">
                        <!-- Additional fields for DSL Tails -->
                        <label>Text Box:</label>
                        <input type="text">
                        <label>Text Box:</label>
                        <input type="text">
                    </div>
                </div>
                <div class="horizontal-fields service-item">
                    <button class="addField">+</button>
                    <label>Text Box:</label>
                    <input type="text">
                    <label>Text Box:</label>
                    <input type="text">
                    <!-- Additional form fields are dynamically inserted here. -->
                    <div class="service-additional-fields">
                        <!-- Additional fields for DSL Tails -->
                        <label>Text Box:</label>
                        <input type="text">
                        <label>Text Box:</label>
                        <input type="text">
                        <label>Text Box:</label>
                        <input type="text">
                    </div>
                </div>
           </div>
        </div>
    </fieldset> 
```

CSS

```
#slide-wrap {
    margin:0 auto;
    overflow: auto; 
    background:#BCC5E1;
    border:1px solid #000;
}
#inner-wrap {
    float:left;
    margin-right:-30000px;/*Be safe with Opera's limited negative margin of 32695px     (-999em could cause problems with large font sizes)*/
    padding-left:20px;        
    width: auto;
}

div.horizontal-fields input,
div.horizontal-fields textarea,
div.horizontal-fields select,
div.horizontal-fields label {
    width: auto;
}

/* Horizontal fields is the class which is not re-sizing it's with correctly */
.horizontal-fields {
    display: block;
}

.service-additional-fields {
    display:inline-block;
}​ 
```

演示

[http://jsfiddle.net/aLKHJ/1/](http://jsfiddle.net/aLKHJ/1/)*

# boost - 多边形的导数

> ID：13342656
> 
> 赞同：0
> 
> 时间：2012-11-12T11:12:00.170
> 
> 标签：boost, polygon, computational-geometry, boost-polygon

我正在研究 boost 多边形库，

但是我无法理解每个顶点是如何生成的，

图片：http: [//imm.io/LlIM](http://imm.io/LlIM)

多边形导数的规则是什么？

原论文是： http: [//www.boost.org/doc/libs/1_52_0/libs/polygon/doc/GTL_boostcon2009.pdf](http://www.boost.org/doc/libs/1_52_0/libs/polygon/doc/GTL_boostcon2009.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:27:50.810

It's a bit easier to follow in the manhattan-polygon example in [the presentation](http://www.boost.org/doc/libs/1_53_0/libs/polygon/doc/GTL_boostcon_draft03.pdf) (page 33). The author later submitted a paper to the CAD journal entitled "Industrial strength polygon clipping: A novel algorithm with applications in VLSI CAD" (I found the PDF using [this google search](https://www.google.com/search?hs=LAW&q=polygon%20sdarticle_012.pdf)) which detailed the derivative process as follows: ![Vertex derivatives](../Images/958bdf68eb741510b9014bd985a5aa91.png) and the accompanying figure: ![enter image description here](../Images/7d6258a392c8eb8a01fe488df74137ed.png)

# javascript - Google Maps API - 为每个缩放级别的动态叠加创建偏移量

> ID：13342660
> 
> 赞同：0
> 
> 时间：2012-11-12T11:12:05.460
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

`balloon`单击`Marker`. _ 有时，气球会超出地图的边界而没有完全显示出来。

我无法将地图以标记的坐标居中，因为气球有时太高并且仍然在边界之外。所以我需要一个`offset`将地图中心稍微向下移动的气球，这样气球总是很好地位于我的地图中间。

问题是 Google 地图不适用于像素，而是使用`LatLng`. 因此，我需要一个动态可扩展的函数来保持每个缩放级别的偏移量相同！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:12:05.460

好吧，我找到了一个算法解决方案！

```
map.setCenter(
 new google.maps.LatLng(
  marker.getPosition().lat()+(X/Math.pow(2,map.getZoom())),
  marker.getPosition().lng()
 )
); 
```

每个缩放级别几乎使地图上显示的 LatLng 翻倍。所以只要找到一个`X`最适合你的偏移量（在我的例子中是 128），一切都很好！

PS：marker的位置和气球一样。

# php - Facebook Open Graph 动态地图布局

> ID：13342664
> 
> 赞同：0
> 
> 时间：2012-11-12T11:12:12.397
> 
> 标签：php, objective-c, facebook, facebook-graph-api, facebook-opengraph

我可以成功地将路线发布到 facebook Open Graph，路线将显示在他们的地图中。但是，这仅在我像这样在我的 php 中硬编码坐标时才有效：

```
<meta property="vaarapp:route:longitude" content="4.948997">
<meta property="vaarapp:route:altitude" content="0.01">
<meta property="vaarapp:route:latitude" content="52.24525">
<meta property="vaarapp:route:longitude" content="4.948997">
<meta property="vaarapp:route:altitude" content="0.01"> 
```

但我想从我的 iphone 动态添加这些坐标。我已经有一个坐标数组，但不知道如何将其作为变量发送到 php 脚本。有人可以帮我吗？

这就是我将信息从我的 iPhone 发送到 PHP 脚本的方式，该脚本最终将在我的 facebook 应用程序中发布操作：

```
NSMutableString *format = [self createFacebookFormat];

NSString *attributes =
@"fb:app_id=421596134540169&og:type=%@&"
@"og:title=%@&og:description=%%22Lorem ipsum test description%%22&"
@"og:image=%@&"
@"vaarapp:distance=%d&"
@"vaarapp:time=%d&"
@"vaarapp:location:latitude=%f&"
@"vaarapp:location:longitude=%f&";
[format appendString:attributes];

// create an FBGraphObject object, but we can treat it as
// an FBRoute with typed properties, etc. See <FacebookSDK/FBGraphObject.h>
// for more details.
id<FBLocation> result = (id<FBLocation>)[FBGraphObject graphObject];

// Give it a URL that will echo back the name of the meal as its title,
// description, and body.
result.url = [NSString stringWithFormat:format, ogObject, title, catagory, 10, 4,     coordinate.latitude, coordinate.longitude]; 
```

php 脚本如下所示：

```
function curPageURL() {
 $pageURL = 'http://';
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
?>

<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# vaarapp: http://ogp.me/ns/fb/vaarapp#">
    <meta property="fb:app_id" content="<?php echo strip_tags($_REQUEST['fb:app_id']);?>">
    <meta property="og:url" content="<?php echo strip_tags(curPageURL());?>">
    <meta property="og:type" content="<?php echo strip_tags($_REQUEST['og:type']);?>">
    <meta property="og:title" content="<?php echo strip_tags($_REQUEST['og:title']);?>">
    <meta property="og:image" content="<?php echo strip_tags($_REQUEST['og:image']);?>">
    <meta property="og:description" content="<?php echo strip_tags($_REQUEST['app:description']);?>">

    <meta property="app:location:latitude"      content="<?php echo strip_tags($_REQUEST['app:location:latitude']);?>">
    <meta property="app:location:longitude"     content="<?php echo strip_tags($_REQUEST['app:location:longitude']);?>">

    <meta property="app:distance" content="<?php echo strip_tags($_REQUEST['app:distance']);?>">
    <meta property="app:time" content="<?php echo strip_tags($_REQUEST['app:time']);?>">

    <!-- <meta property="app:route:latitude" content="52.24525">
    <meta property="app:route:longitude" content="4.948997">
    <meta property="app:route:altitude" content="0.01">
    <meta property="app:route:latitude" content="52.24525">
    <meta property="app:route:longitude" content="4.948997">
    <meta property="app:route:altitude" content="0.01">
    <meta property="app:route:latitude" content="52.239785">
    <meta property="app:route:longitude" content="4.920502">
    <meta property="app:route:altitude" content="0.01">
    <meta property="app:route:latitude" content="52.233162">
    <meta property="app:route:longitude" content="4.978008">
    <meta property="app:route:altitude" content="0.01"> --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:51:45.763

通过在 php.ini 中添加坐标来修复。不需要大网址。

# opengl - OpenGL着色器程序奇怪的结果

> ID：13342665
> 
> 赞同：0
> 
> 时间：2012-11-12T11:12:15.470
> 
> 标签：opengl, glsl, fragment-shader, vertex-shader

我创建了一个基本的着色器程序来复习我的 openGL GLSL。

在 cpu 方面，我已经正确创建了我的着色器程序 .vp 和 .fp 正确链接并检查了错误

我渲染时的结果总是一个黑色三角形

就在我链接我的程序之前，但在我附加两个着色器之后，我这样做了

```
glBindAttribLocation( program, 0, "vVertexPos" );
glBindAttribLocation( program, 1, "vColor" ); 
```

我在着色器中的位置变量和颜色变量

所有这一切只是一个快速运行，所以我不担心除了 openGL 调用和着色器设置之外的丑陋代码

```
struct PosColVertex
{
    float pos[3];
    float color[4];
};

PosColVertex verts[3];
float vPos1[3] = { 0.5f, 0.0f, -1.0f };
float vPos2[3] = { 0.0f, 1.0f, -1.0f };
float vPos3[3] = { -0.5f, 0.0f, -1.0f };
memcpy( verts[0].pos, vPos1, sizeof(float)*3 );
memcpy( verts[1].pos, vPos2, sizeof(float)*3 );
memcpy( verts[2].pos, vPos3, sizeof(float)*3 );

float vColor1[4] = { 1.0f, 0.0f, 0.0f, 1.0f };
float vColor2[4] = { 0.0f, 1.0f, 0.0f, 1.0f };
float vColor3[4] = { 0.0f, 0.0f, 1.0f, 1.0f };
memcpy( verts[0].color, vColor1, sizeof(float)*4 );
memcpy( verts[1].color, vColor2, sizeof(float)*4 );
memcpy( verts[2].color, vColor3, sizeof(float)*4 );

glGenBuffers( 1, &vboHandle );
glBindBuffer( GL_ARRAY_BUFFER, vboHandle );
glBufferData( GL_ARRAY_BUFFER, sizeof(PosColVertex)*3, verts, GL_DYNAMIC_READ ); 
```

对于我的渲染，这就是我所做的

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

//use our shader program
glUseProgram( program );

//set which vertices we will be using
glBindBuffer( GL_ARRAY_BUFFER, vboHandle );

glEnableVertexAttribArray( 0 );
glEnableVertexAttribArray( 1 );

//specify our vertex attribute
glVertexAttribPointer( 0, 3, GL_FLOAT, GL_FALSE, sizeof( PosColVertex ), (void*)(0) );

//specify our texture attribute
glVertexAttribPointer( 1, 4, GL_FLOAT, GL_FALSE, sizeof( PosColVertex ), (void*)(12) );

glPushMatrix();

//draw our rectangle
glDrawArrays( GL_TRIANGLES, 0, 3 );

glPopMatrix();

glDisableVertexAttribArray( 0 );
glDisableVertexAttribArray( 1 ); 
```

我对 glVertexAttribPointer 调用做错了吗？我已经检查了我的着色器它可以工作，并且它确实改变了值，因为我之前在那里硬编码了值来测试它。但我假设我没有在 CPU 端告诉 openGL 如何正确读取我的顶点。有什么帮助吗？

三重奏

```
#version 330

in vec3 vVertexPos;

void main(void) 
{ 
    gl_Position = vec4( vVertexPos.x, vVertexPos.y, vVertexPos.z, 1 );
} 
```

tri.fp

```
#version 330

out vec4 vFragColor;
in vec4 vColor;

void main(void)
{ 
   vFragColor = vColor;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:40:54.917

您不能访问片段着色器内的属性，只能访问顶点着色器内的属性。这是有道理的，因为您正在为每个顶点指定颜色，而不是为每个片段指定颜色。因此，我建议您更改代码以读取顶点着色器中的颜色并将其平滑地输出到您的片段着色器：

顶点着色器：

```
in vec3 vVertexPos;
in vec4 vColor;

smooth out vec4 fColor;

void main(void) 
{ 
    gl_Position = vec4( vVertexPos.x, vVertexPos.y, vVertexPos.z, 1 );
    fColor = vColor;
} 
```

片段着色器：

```
smooth in vec4 fColor;
out vec4 vFragColor;

void main(void)
{ 
   vFragColor = fColor;
} 
```

# youtube-api - android 中用于 youtube TV 配对的 API

> ID：13342669
> 
> 赞同：6
> 
> 时间：2012-11-12T11:12:45.780
> 
> 标签：youtube-api

我想知道是否有用于 Youtube TV 配对的开放 android API。

据我所知，我们可以在电视或浏览器（www.youtube.com/tv）上使用手机上的 Youtube 或 Play 商店中的“Youtube 远程”应用程序来控制 Youtube。但要做到这一点，我们应该首先在电视（或浏览器）和移动设备中配对 Youtube。

我试图找到一些与配对或 youtube 配对应用程序相关的 API，但我找不到。

请让我知道可以使用 Youtube 配对 API for android。ex)用于生成配对代码的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T18:47:19.193

如果您希望构建通用的“配对”功能，可以使用称为“ [OAuth for Devices](https://developers.google.com/accounts/docs/OAuth2ForDevices) ”的东西来完成。您可以将视频添加到正在浏览器中自动循环播放的播放列表。[此处是此功能](http://stb-web-app.appspot.com/static/index.html)的演示，此处包含[Python 示例应用程序的](https://code.google.com/p/gdata-samples/source/browse/trunk/ytplayer/stb-web-app/)源代码。

# excel - 每次打开过滤器时运行宏

> ID：13342673
> 
> 赞同：2
> 
> 时间：2012-11-12T11:12:52.100
> 
> 标签：excel, vba

我有一个在任何单元格更改时运行的宏，我只想对显示的单元格求和，因此如果有人过滤工作表，宏将运行并仅对可见单元格求和。

我找到了这个`SpecialCells(xlCellTypeVisible)`功能，但我无法让它工作。

我对代码的想法是这样的：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim Rcells As Range
    Dim sum as Double
    sum = 0
    For each Rcells In Range("A5:A65536").SpecialCells(xlCellTypeVisible)
    sum = sum + Rcells.Value
    Next Rcells
    Sheets("aSheet").Range("B1").Value = sum
End Sub 
```

我设法只对可见单元格求和，但它不会自动运行。

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:16:41.090

[我的文章Trapping a change to a filter list with VBA](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2773-Trapping-a-change-to-a-filtered-list-with-VBA.html)中的两个关键步骤，其中包括详细说明和示例文件：

1.  第二个*虚拟*工作表添加了一个`SUBTOTAL`公式，`A1`指向主工作表上被过滤的范围（即您要在其上捕获过滤器的范围）。
2.  一个`Worksheet_Calculate()`事件被添加到*虚拟*`SUBTOTAL`工作表中，当您的主工作表上的过滤器更改时公式更新时触发此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:45:12.103

查看小计功能。输入 =subtotal( 然后点击 fx 以了解它是如何工作的。

# javascript - 使用事件“替换”删除文本

> ID：13342675
> 
> 赞同：0
> 
> 时间：2012-11-12T11:12:58.110
> 
> 标签：javascript, jquery, replace

我想删除一些`text`带有此代码的文本：

```
$(".jq-text li a").html(function(i, h){
     return h.replace(/text/, "");
  }); 
```

正如预期的那样，它工作得很好。问题是我想删除文本`http://`，所以我尝试了：

```
$(".jq-text li a").html(function(i, h){
     return h.replace(/http:///, "");
  }); 
```

这在dreamweaver中给了我一个错误......我应该如何写这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:14:41.897

您必须在正则表达式中转义正斜杠：

```
return h.replace(/http:\/\//, ""); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T11:14:42.797

你需要`/`通过使用来逃避`\/`

尝试，

```
$(".jq-text li a").html(function(i, h){
     return h.replace(/http:\/\//, "");
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:15:39.457

尝试像这样使用转义：

```
$(".jq-text li a").html(function(i, h){
     return h.replace(/http:\/\//, "");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:19:07.870

为什么在你的表达式中使用正则表达式。

```
return h.replace( "http://", "" ); 
```

正如所指出的，这只替换了第一次出现的*http://*。如果这是一个问题，请使用：

```
return h.replace( "http://", "", "g" ); 
```

# php - 保留对父主机的跨域引用

> ID：13342678
> 
> 赞同：0
> 
> 时间：2012-11-12T11:13:06.967
> 
> 标签：php, url, iframe, cross-domain

远程 url 上有一个页面，可以通过使用查询字符串发布的登录名访问该页面。`http://www.example.com/exampleURI?user=user&pass=pass`. 让我们从这里开始调用这个 URL 位置`parent url`。

我无权访问该网址（即它不在我的服务器上）。我在我的服务器（不是`parent url`我上面提到的服务器）上创建了一个登录表单，它向我的 php 文件发出 POST`file_get_contents`请求，该文件向上述 url 发出请求。如果登录凭据正确，则它会发回页面的整个正文。

在返回给我的那个页面上有很多关于 ajax 的东西。许多流程要求它们托管在`parent URL`. 它还引用了仅存在于`parent url`. 我希望能够在我的页面上，在我的服务器上容纳该页面的 iframe，但`parent url`由于刚才提到的原因，保留 iframe 对其的引用。

我需要对 iframe 内的 dom 进行跨窗口操作。大多数浏览器的同源策略禁止我这样做。**例如，有没有办法将事件侦听器附加到 iframe 中的 dom 元素？**

如果有的话，这样的事情是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:15:35.413

您想尝试跨域的[JSONP请求。](http://remysharp.com/2007/10/08/what-is-jsonp/)不幸的是，响应必须是充分的并且特别为您准备好，因此如果您控制两个域，则此方法有效。大多数图书馆今天都知道如何处理这种请求。

也看看[彗星](http://www.ibm.com/developerworks/web/library/wa-reverseajax1/index.html)。

# c# - 带有错误显示按钮的远程桌面应用程序

> ID：13342683
> 
> 赞同：0
> 
> 时间：2012-11-12T11:13:15.077
> 
> 标签：c#, winforms, .net-4.0, remote-desktop

我在远程桌面应用程序中有一个 winform，它是使用带有大（常规）按钮的工具栏的容器面板动态构建的。该应用程序是用 C# 和 .NET 4.0 编写的。仅当我不最大化窗口时，应用程序才会被视为应有的状态（这意味着恢复的视图很好）。

现在，在 RDP 登录后 - 在大多数客户端计算机中 - 应用程序看起来很好（即使我们最大化和恢复）。在低分辨率客户端计算机 (800x600) 中，工具栏上的按钮不会显示在正确的位置（例如在 1024x768 客户端中）。

我使用了双缓冲，但它没有帮助......问题可能取决于也可能不取决于屏幕分辨率（可能是内存问题或其他问题）。不是本地化布局的问题。

下图显示了 Fine 和 Bad 状态：http: [//imgur.com/gO4UJ,v7O9K](http://imgur.com/gO4UJ,v7O9K)

我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:38:32.727

好的，所以如果有人遇到这种情况，这就是问题所在：

在表单中，有一个空的重绘覆盖。创建表单的程序员正在用一个空方法覆盖重绘（不知道为什么，我想我会向我的团队询问业务逻辑）。

我是如何在开发环境中重现它的？按照 Albin Sunnanbo 的说明，我在初始化期间以最小化版本运行了 RDP 应用程序，我注意到在这个用例中也出现了大分辨率客户端......所以，我知道在执行窗口调整大小时会发生重绘 - 这让我怀疑方法...

==> 顺便说一句，我想这就是为什么继承如此糟糕，而继续使用 WPF 会更好。我花了 3 天时间才明​​白为什么会出现这个问题。

# ruby-on-rails - 使用 Capybara 选择多个复选框，奇怪的行为

> ID：13342684
> 
> 赞同：1
> 
> 时间：2012-11-12T11:13:18.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara

我正在使用 Capybara 1.1.2 对 Ruby on Rails 3.0.11 进行验收测试，并尝试在表单中选择两个复选框。

这是复选框的视图代码（使用 haml 3.1.3 和 simple_form 2.0.4）：

```
 = f.input :countries,
            :collection => MusicTeaser.teaser_countries,
            :as => :check_boxes 
```

该集合如下所示：

```
[["AT", "at"], ["CH", "ch"], ["DE", "de"], ["ZA", "za"]] 
```

生成的 HTML：

```
<div class="input check_boxes optional">
  <label class="check_boxes optional control-label">Countries</label>
  <label class="checkbox">
    <input class="check_boxes optional" id="music_teaser_countries_at" name="music_teaser[countries][]" type="checkbox" value="at">AT
  </label>
  <label class="checkbox">
    <input class="check_boxes optional" id="music_teaser_countries_ch" name="music_teaser[countries][]" type="checkbox" value="ch">CH
  </label>
  <label class="checkbox">
    <input class="check_boxes optional" id="music_teaser_countries_de" name="music_teaser[countries][]" type="checkbox" value="de" checked="">DE
  </label>
  <label class="checkbox">
    <input class="check_boxes optional" id="music_teaser_countries_za" name="music_teaser[countries][]" type="checkbox" value="za">ZA
  </label>
  <input name="music_teaser[countries][]" type="hidden" value="">
</div> 
```

选择它们的代码如下所示（非常简单）：

```
 check 'music_teaser_countries_de'
  check 'music_teaser_countries_za' 
```

我希望在提交时，`countries`参数看起来像这样：

```
params[:music_teaser][:countries] = ["de", "za"] 
```

但它看起来像这样：

```
params[:music_teaser][:countries] = ["deza"] 
```

因此，在选择多个复选框时，Capybara似乎在做错了什么。想法？

# php - 使用 PHP 读取和编辑 MySQL 数据库中的值

> ID：13342686
> 
> 赞同：-1
> 
> 时间：2012-11-12T11:13:28.960
> 
> 标签：php, mysql, settings

当我尝试在我的网站中设置我的帐户系统时，我遇到了一些麻烦。我已经使用了这些 php 文件（[http://www.html-form-guide.com/php-form/php-registration-form.html](http://www.html-form-guide.com/php-form/php-registration-form.html)），但它们太有限了！我尝试添加一些帐户设置，例如（城市、年龄、性别等）。我正在寻找允许我添加这些功能的 PHP 代码。我尝试了一些 PHP 代码，但它们不起作用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:25:42.317

笔记。这只是您可以采取的方法的一个示例。

您需要将这些列添加到您的用户表中。

```
ALTER TABLE `User` 
ADD `city` VARCHAR( 80 ) NULL DEFAULT NULL ,
ADD `date_of_birth` DATE NULL DEFAULT NULL ,
ADD `sex` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT '0' COMMENT '0 = undefined, 1 = male, 2 = female' 
```

请注意，对于性别：0 = 未定义/未给出。1 = 男性。2 = 女性。

创建新用户时，使用 INSERT SQL 语句：

```
INSERT INTO `User` (`email`, `etc`, `city`, `date_of_birth`, `sex`) 
VALUES ('Test@test.com', 'Random value', 'London', '1987-04-02', 1); 
```

更新当前用户时，请使用 UPDATE 语句。

```
UPDATE `User` SET `city` = 'Dublin', `date_of_birth` = '1987-04-02' 
WHERE `user_id` = 4647 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:49:58.690

听起来你需要一个教程。

这里有几个；

1.  [http://net.tutsplus.com/tutorials/php/user-membership-with-php/](http://net.tutsplus.com/tutorials/php/user-membership-with-php/)

2.  [http://x10hosting.com/forums/tutorials/93408-tutorial-php-mysql-membership-system.html](http://x10hosting.com/forums/tutorials/93408-tutorial-php-mysql-membership-system.html)

3.  [http://www.tutorialized.com/tutorial/Complete-Members-System/9035](http://www.tutorialized.com/tutorial/Complete-Members-System/9035)

我发现教程是完成某事的最佳方式。我猜你正在建立某种会员制度。类似的东西有很多元素，但如果你遵循教程，从长远来看会容易得多。

# windows-phone-7 - 如何在视图模型中声明 MVVM RelayCommand

> ID：13342687
> 
> 赞同：0
> 
> 时间：2012-11-12T11:13:34.817
> 
> 标签：windows-phone-7, mvvm, relaycommand

如何在set中使用relay命令，我使用下面的方式，在set方法上抛出接口bug

```
 public RelayCommand ChartCommand
    {

        set
        {
            ChartCommand = new RelayCommand<string>(e => ExecuteChartCommand(e));

        }
    }
    public void ExecuteChartCommand(string vendor)
    {

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:19:14.473

你真的应该这样做：

```
 private RelayCommand<string> m_ChartCommand;
    public RelayCommand<string> ChartCommand
    {    
        get
        {
            return m_ChartCommand ?? (m_ChartCommand = new RelayCommand<string>(e => ExecuteChartCommand(e));    
        }
    }

    public void ExecuteChartCommand(string vendor)
    {

    } 
```

.

# azure - 在 Azure 网站上的 DotNetNuke 中部署扩展时出现问题

> ID：13342690
> 
> 赞同：1
> 
> 时间：2012-11-12T11:13:46.263
> 
> 标签：azure, dotnetnuke

我刚刚为我的公司创建了一个网站，并选择将 DotNetNuke 框架安装到该网站中。

当我尝试部署扩展时，我的问题就出现了。我刚刚购买了“Advanced Business Directory”和“Live Blog”扩展，它们都不能正确安装。

当我尝试部署“实时博客”扩展时，我收到以下错误：

```
"A critical error has occurred. Could not find a part of the path 'C:\DWASFiles\Sites\coworking-foundation\VirtualDirectory0\site\wwwroot\Install\Module\'." 
```

当我尝试部署“高级业务目录”时，出现以下顶级错误：

```
Error loading files from temporary folder - see below 
```

详细信息是：

```
StartJob    Starting Installation
Info    Starting Installation - AdvancedBusinessDirectory
Info    Starting Installation - Script
Info    Begin Sql execution
Info    Creating backup of previous version - Providers\DataProviders\SqlDataProvider\00.00.01.SqlDataProvider
Info    Created - Providers\DataProviders\SqlDataProvider\00.00.01.SqlDataProvider
Info    Executing 00.00.01.SqlDataProvider
Info    Start Sql execution: 00.00.01.SqlDataProvider file
Failure SQL Execution resulted in following Exceptions: System.Data.SqlClient.SqlException: 'NOT FOR REPLICATION' is not supported in this version of SQL Server. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at DotNetNuke.Data.SqlDataProvider.ExecuteADOScript(String SQL) at DotNetNuke.Data.SqlDataProvider.ExecuteScript(String Script, Boolean UseTransactions) /************************************************************/ /***** SqlDataProvider *****/ /***** *****/ /***** *****/ /***** Note: To manually execute this script you must *****/ /***** perform a search and replace operation *****/ /***** for dbo. and *****/ /***** *****/ /************************************************************/ /*==============================================================*/ /* Table: dbo.ZLDNN_Business */ /*==============================================================*/ if not exists (select * from dbo.sysobjects where id = object_id(N'dbo.[ZLDNN_Business]') and OBJECTPROPERTY(id, N'IsTable') = 1) BEGIN create table dbo.ZLDNN_Business ( BusinessID int not null IDENTITY(1, 1), ModuleID int null, Name nvarchar(200) null, Address nvarchar(200) null, Description nvarchar(4000) null, Website nvarchar(200) null, Email nvarchar(100) null, Phone nvarchar(100) null, Fax nvarchar(100) null, Postal nvarchar(50) null, Logo nvarchar(200) null, Unit nvarchar(100) null, Street nvarchar(200) null, City nvarchar(100) null, Region nvarchar(100) null, Country nvarchar(100) null, Lat nvarchar(100) null, Lng nvarchar(100) null, IsApproved bit null, IsFeatured bit null, OwnerUserID int null, CreatedDate datetime null, UpdatedDate datetime null, ExpiredDate datetime null, ViewCount int null, Keywords nvarchar(200) null, ) ALTER TABLE dbo.[ZLDNN_Business] ADD CONSTRAINT [PK_ZLDNN_Business] PRIMARY KEY CLUSTERED ([BusinessID]) CREATE NONCLUSTERED INDEX [IX_ZLDNN_Business] ON dbo.[ZLDNN_Business] ([ModuleID]) ALTER TABLE dbo.[ZLDNN_Business] WITH NOCHECK ADD CONSTRAINT [FK_ZLDNN_Business_Modules] FOREIGN KEY ([ModuleID]) REFERENCES dbo.[Modules] ([ModuleID]) ON DELETE CASCADE NOT FOR REPLICATION END System.Data.SqlClient.SqlException: 'NOT FOR REPLICATION' is not supported in this version of SQL Server. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at DotNetNuke.Data.SqlDataProvider.ExecuteADOScript(String SQL) at DotNetNuke.Data.SqlDataProvider.ExecuteScript(String Script, Boolean UseTransactions) /*==============================================================*/ /* Table: dbo.ZLDNN_BusinessCategory */ /*==============================================================*/ if not exists (select * from dbo.sysobjects where id = object_id(N'dbo.[ZLDNN_BusinessCategory]') and OBJECTPROPERTY(id, N'IsTable') = 1) BEGIN create table dbo.ZLDNN_BusinessCategory ( CategoryID int not null IDENTITY(1, 1), ModuleID int null, Title nvarchar(200) null, Description nvarchar(1000) null, ImagePath nvarchar(500) null, ParentID int null, Level int null, ViewOrder int null, ) ALTER TABLE dbo.[ZLDNN_BusinessCategory] ADD CONSTRAINT [PK_ZLDNN_BusinessCategory] PRIMARY KEY CLUSTERED ([CategoryID]) CREATE NONCLUSTERED INDEX [IX_ZLDNN_BusinessCategory] ON dbo.[ZLDNN_BusinessCategory] ([ModuleID]) ALTER TABLE dbo.[ZLDNN_BusinessCategory] WITH NOCHECK ADD CONSTRAINT [FK_ZLDNN_BusinessCategory_Modules] FOREIGN KEY ([ModuleID]) REFERENCES dbo.[Modules] ([ModuleID]) ON DELETE CASCADE NOT FOR REPLICATION END System.Data.SqlClient.SqlException: 'NOT FOR REPLICATION' is not supported in this version of SQL Server. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at DotNetNuke.Data.SqlDataProvider.ExecuteADOScript(String SQL) at DotNetNuke.Data.SqlDataProvider.ExecuteScript(String Script, Boolean UseTransactions) /*==============================================================*/ /* Table: dbo.ZLDNN_BusinessAssignedCategory */ /*==============================================================*/ if not exists (select * from dbo.sysobjects where id = object_id(N'dbo.[ZLDNN_BusinessAssignedCategory]') and OBJECTPROPERTY(id, N'IsTable') = 1) BEGIN create table dbo.ZLDNN_BusinessAssignedCategory ( BusinessAssignedCategoryID int not null IDENTITY(1, 1), CategoryID int not null, BusinessID int not null, ) ALTER TABLE dbo.[ZLDNN_BusinessAssignedCategory] ADD CONSTRAINT [PK_ZLDNN_BusinessAssignedCategory] PRIMARY KEY CLUSTERED ([BusinessAssignedCategoryID]) CREATE NONCLUSTERED INDEX [IX_ZLDNN_BusinessAssignedCategory] ON dbo.[ZLDNN_BusinessAssignedCategory] ([BusinessAssignedCategoryID]) ALTER TABLE dbo.[ZLDNN_BusinessAssignedCategory] WITH NOCHECK ADD CONSTRAINT [FK_ZLDNN_BusinessAssignedCategory_ZLDNN_BusinessCategory] FOREIGN KEY ([CategoryID]) REFERENCES dbo.[ZLDNN_BusinessCategory] ([CategoryID]) ON DELETE NO ACTION ALTER TABLE dbo.[ZLDNN_BusinessAssignedCategory] WITH NOCHECK ADD CONSTRAINT [FK_ZLDNN_BusinessAssignedCategory_ZLDNN_Business] FOREIGN KEY ([BusinessID]) REFERENCES dbo.[ZLDNN_Business] ([BusinessID]) ON DELETE CASCADE NOT FOR REPLICATION END System.Data.SqlClient.SqlException: 'NOT FOR REPLICATION' is not supported in this version of SQL Server. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at DotNetNuke.Data.SqlDataProvider.ExecuteADOScript(String SQL) at DotNetNuke.Data.SqlDataProvider.ExecuteScript(String Script, Boolean UseTransactions) 
```

SQL 错误中还有更多内容，但对于同一个包中的大约 10 个不同的模块，它几乎相同。

有没有人有这些扩展工作，或者对我如何继续安装它们有任何想法？

谢谢

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:54:50.503

Live Blog 与 Azure 兼容。确保您安装的是最新版本。[http://www.mandeeps.com/downloads.aspx](http://www.mandeeps.com/downloads.aspx)

# visual-studio-2010 - 用 ReSharper 替换过多的回车

> ID：13342691
> 
> 赞同：0
> 
> 时间：2012-11-12T11:13:47.430
> 
> 标签：visual-studio-2010, resharper

是否可以在 ReSharper 中编写自定义模式以突出显示任何三重回车符？我正在与一个团队合作，他们的键盘上似乎都有粘性 Enter 键。

# iphone - 如何在文档目录中创建 plist 的精确副本

> ID：13342693
> 
> 赞同：1
> 
> 时间：2012-11-12T11:13:56.453
> 
> 标签：iphone, ios, plist

我在资源文件夹中的 plist 如下：

```
{
    Games = (yz, def, uv);
    Entertainment = (rst, opq, lmn);
    Utilities = (ghi, def, abc);
 } 
```

在文档目录中创建此 plist 后，plist 更改为：

```
{
    Entertainment = (rst, opq, lmn); 
    Games = (yz, def, uv); 
    Utilities = (ghi, def, abc);
} 
```

即，plist 字段按字母顺序排序。

你能帮我在文档文件夹中制作 plist 的精确副本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:12:31.883

发生这种情况是因为 plist 以未指定的顺序通过键存储其值。事实上，如果您将一些值`NSDictionary`依次存储在 log`[dictionary allKeys]`中，则不能保证这些值将按照它们在字典中输入的顺序显示，这是因为它们可能会被处理为`NSSet`即使`allKeys`is `NSArray`。因此，您可以做的是将每个值`NSArray`按您想要的顺序存储到 an 中，例如：
索引 0 -> 游戏
索引 1 -> 娱乐
索引 2 -> 实用程序

# c# - 正则表达式不匹配

> ID：13342694
> 
> 赞同：0
> 
> 时间：2012-11-12T11:14:06.077
> 
> 标签：c#, regex, validation, email-validation

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)
> [电子邮件验证 - 正则表达式](https://stackoverflow.com/questions/1903356/email-validation-regular-expression)

我正在使用以下代码在 C# 中验证电子邮件地址，但不确定为什么它总是失败：

```
 var regEx = @"^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})";

        if (Regex.IsMatch(regEx, "abcde@gmail.com", RegexOptions.IgnoreCase))
            return true;
        else
            return false; 
```

请有人指出我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:17:29.263

尝试这个：

```
[Test]
public void EmailTest()
{
    var pattern = @"^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})";
    Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);
    var address = "abcde@gmail.com";
    Assert.IsTrue(Regex.IsMatch(address, pattern,RegexOptions.IgnoreCase));
    Assert.IsTrue(regex.IsMatch(address));
} 
```

您的字符串和模式的顺序错误。

还要检查这个[线程](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:22:40.597

您的[`IsMatch`参数](http://msdn.microsoft.com/en-us/library/ktzf2d23.aspx)设置错误；第一个是输入，第二个是模式。

# c# - C#中编译时源代码的哈希

> ID：13342699
> 
> 赞同：1
> 
> 时间：2012-11-12T11:14:26.183
> 
> 标签：c#, reflection, hash, compilation

拥有其他开发人员使用的服务器，我目前记录他们使用的 dll 版本。我通过让客户端使用反射来检索其版本来做到这一点：

```
Assembly.GetEntryAssembly().GetName().Version.ToString(); 
```

这很好，但由于它来自使用 TFS 并自己构建的开发人员，我看不到他们是否拥有最新版本的源代码。有没有一个技巧，比如编译标签，可以很容易地允许生成源代码的散列？

注意：我尝试发送 dll 的[MD5](https://stackoverflow.com/questions/2150455/how-do-i-create-an-md5-hash-digest-from-a-text-file-with-c)（使用 assembly.Location），但由于哈希值在 2 次编译之间发生变化（我想生成的 dll 内有一些编译时间戳），所以它是无用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:18:59.373

这是大多数协作问题，然后是编码。在您发现版本是旧版本的那一刻，请通知他们。如果*真正的*版本不是旧版本，那就意味着开发者在制作buold之前没有增加版本ID，这是错误的。

换句话说，在人们之间规范它，而不是依赖这些工具（如果有的话）。你试图创造一个复杂的工具，这将帮助你避免错误，但人类会找到一种再次制造它们的方法。

所以最好在你们之间建立稳固的关系结构，imo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T02:28:37.577

在预构建事件上创建一个工具来散列/最后写入您的代码文件。

将结果写入 cs 文件或嵌入的资源文件。

结果文件必须在上述操作中排除。

为了防止跳过构建（最新）功能不起作用，请在写入前比较文件。

如果您在 IDE 中打开文件，构建时会提示“从外部更改”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T07:42:34.283

似乎没有简单的方法可以做到这一点。

# android - Android：通过单击按钮增加和减少textview的int值

> ID：13342707
> 
> 赞同：1
> 
> 时间：2012-11-12T11:14:58.337
> 
> 标签：android, button, onclick

我的类中有一个名为 InvokeService() 的方法，在其中我存储了来自远程服务的 Int 值。

像这样

```
int hvactemp=remoteService.getHvacTemp(); 
```

我将此值存储到文本视图中。

```
drivertmpcount.setText(Integer.toString(hvactemp)); 
```

现在我想在按钮点击时增加和减少这个值。

我的代码中声明了两个按钮，问题是

如果我单击右键，则值正在增加

假设值为 30，它会像 30、31、32、33、34、35 等一样增加。

但问题是当我点击左键时，它并没有从我现在的值减少，正如我在增加值后所说的 35 所以现在如果我按下左键，它应该像这样 34,32,31,32

但它从 30,29,28,27 而不是 35,34,32,31 减少

如何解决这个问题？

这是我的代码。

```
 private void invokeService() {

    if (conn == null) {
        // Toast.makeText(CarHome.this, "Cannot invoke - service not bound",
        // Toast.LENGTH_SHORT).show();
    } else {
        try {
            System.out.println(remoteService);

            int rpm = remoteService.getEnginRPM();
            int temp = remoteService.getTemperature();
            // int battery = remoteService.getBatteryLevel();
            int speed = remoteService.getSpeed();
            final int hvactemp = remoteService.getHvacTemp();
            System.out.println("Raghav hvac" + hvactemp);

            System.out.println("jaydeep speed" + speed);
            // rpm_text.setText(rpm);

        drivertmpcount.setText(Integer.toString(hvactemp));

            driverbtnright.setOnClickListener(new View.OnClickListener() {

                int hvactemp=remoteService.getHvacTemp();

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    hvactemp++;
                    drivertmpcount.setText(Integer.toString(hvactemp));
                     System.out.println("Raghav hvac" + hvactemp);

                }
            });

            driverbtnleft.setOnClickListener(new View.OnClickListener() {
                int hvactemp=remoteService.getHvacTemp();
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    //  drivertmpcount.setText(Integer.toString(hvactemp));
                    hvactemp --;
                    drivertmpcount.setText(Integer.toString(hvactemp));
                     System.out.println("Raghav decrement hvac" + hvactemp);

                }
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:19:26.883

您对代码流有误。

`int hvactemp=remoteService.getHvacTemp();`从两次单击侦听器中删除它并声明`hvactemp`为类变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:24:50.340

试试这个 ：

```
 driverbtnright.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

               int increase = Integer.parseInt((String)driverbtnright.getText())+1;

               driverbtnright.setText(increase);

            }
        });

        driverbtnleft.setOnClickListener(new View.OnClickListener() {
            int hvactemp=remoteService.getHvacTemp();
            public void onClick(View v) {

            int decrease= Integer.parseInt((String)driverbtnright.getText())-1;

               driverbtnright.setText(decrease);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:17:47.903

试试这个。

```
String t = drivertmpcount.getText().toString();

    int a = Integer.parseInt(t);
    a--;

    drivertmpcount.setText(Integer.toString(a));
                         System.out.println("Raghav decrement hvac" + a); 
```

发生这种情况是因为您指的是 hvactemp 而不是 edittext 的当前文本。希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T11:34:31.533

将 hvactemp 声明为全局整数，它将在默认的 oncreate 方法和按钮单击（增量和减量）中设置，稍后将用于在 textviews 中设置文本。

```
 private int hvactemp; //declare it globally
       hvactemp = remoteService.getHvacTemp(); 

    drivertmpcount.setText(Integer.toString(hvactemp));

        driverbtnright.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                hvactemp++;
                drivertmpcount.setText(Integer.toString(hvactemp));
                 System.out.println("Raghav hvac" + hvactemp);

            }
        });

        driverbtnleft.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                hvactemp --;
                drivertmpcount.setText(Integer.toString(hvactemp));
                 System.out.println("Raghav decrement hvac" + hvactemp);

            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-27T13:19:54.963

我试试这个……看我的代码……

```
plus = (Button) findViewById(R.id.btn_plus);
    minus = (Button) findViewById(R.id.btn_minus);

    plus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            txt_number.setText(Integer.toString(textvalue));
            textvalue++;
        }
    });

    minus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textvalue--;
            txt_number.setText(Integer.toString(textvalue));
        }
    }); 
```

# iphone - 关闭状态栏后面的模式视图隐藏视图控制器

> ID：13342711
> 
> 赞同：2
> 
> 时间：2012-11-12T11:15:14.327
> 
> 标签：iphone, modalviewcontroller

我面临一个奇怪的问题，当我呈现任何模式视图时说，mainViewCntroller 上的 someModalViewController 当我关闭模式视图时，我的 mainViewController 的 20px 高度隐藏在状态栏后面。如果我旋转模拟器，则不会出现此问题，但如果我不旋转模拟器这个问题正在发生。一旦我旋转模拟器，无论我启动模式视图并关闭它多少次，mainViewController 都会正确显示。为了检查实际问题首先出现在哪里，我在不支持方向的情况下创建了 maninViewController。那时它工作正常，但是当我在 shouldAutorotateToInterfaceOrientation 中返回 TRUE 时，同样的问题再次发生。

谁能知道为什么会出现这个问题以及如何解决这个问题？

# c++ - Tesseract - 以置信度获得替代结果

> ID：13342718
> 
> 赞同：2
> 
> 时间：2012-11-12T11:15:55.927
> 
> 标签：c++, ocr, tesseract

我正在尝试使用 tesseract 来识别数字。它工作得很好，但有时我会得到错误的结果（8 而不是 9 等）。我知道如何使用一些非 ocr 方法来提高准确性，但我需要其他具有置信度的结果。我发现我为每个 ResultIterator 使用 ChoiceIterator 获得了最佳选择：

```
 tesseract::TessBaseAPI tess;    
    tess.SetPageSegMode(tesseract::PSM_SINGLE_CHAR);    
    tess.SetVariable("save_best_choices", "T");

    [setting input image here] 

    tess.Recognize(NULL);
    tesseract::ResultIterator* ri = tess.GetIterator();
    tesseract::ChoiceIterator* ci; 
    if(ri != 0)
    {
        char* symbol = ri->GetUTF8Text(tesseract::RIL_SYMBOL);

        if(symbol != 0)
        {
            float conf = ri->Confidence(tesseract::RIL_SYMBOL); 
            cout << symbol << "\tconf: " << conf << "\n"; 

            const tesseract::ResultIterator itr = *ri; 
            ci = new tesseract::ChoiceIterator(itr);
            do {
                const char* choice = ci->GetUTF8Text(); 
                if (choice) {
                    std::cout << "\t" << choice << " conf: " << ci->Confidence() << "\n"; 
                }
            } while(ci->Next());                

            //  delete[] symbol;
        }           
    } 
```

但问题是 ci->GetUTF8Text() 总是返回一个空指针。

我使用 tesseract 3.02 作为 DLL，在 MSVC2010 express 下编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:57:16.133

从今天早些时候的有限研究来看，我认为答案可能是设置变量`SaveBlobChoices`与`SaveBestChoices`. 我仍然需要自己测试一下。

# php - 我的 PHP 页面的服务器错误

> ID：13342719
> 
> 赞同：0
> 
> 时间：2012-11-12T11:15:59.860
> 
> 标签：php, internal-server-error, server-error

当我尝试打开 chart.php 文件时出现服务器错误。我现在使用 php 5.3.3。但是，这个问题在 php5.4 中没有发生。我该如何解决这个问题？

在 php 日志文件中，有一个与 chart.php 相关的错误。

[Mon Nov 12 05:04:19 2012] [error] [client 85.108.15.253] PHP Parse error: syntax error, unexpected '[' in /var/www/vhosts/phisto.org/httpdocs/chart.php 在线249、参考：[http ://www.phisto.org/browse.php](http://www.phisto.org/browse.php)

图表.php

```
 include("head.php");
    include("menu.php");
    include("functions.php");

    $deger = "";

    $resultsarray2 = $_SESSION["RESULTSARRAY2"];
    $rowcount = $_SESSION["ROWCOUNT"];
    $deger = $_POST['GRAPH'];

             // ROWCOUNT VE RESULTSARRAY2 GEREKLI !!!!!!!
            class obje {

                private $name;
                private $subset;
                private $degree;
                private $index ;
                public function obje($tempName,$tempDegree)
                {
                    $this->index = 0;
                    $this->subset = array();
                    $this->name = $tempName;
                    $this->degree = $tempDegree;
                }
                /* Nesnenin degree sini artýrýr. */
                public function degreeRaise()
                {
                    $this->degree += 1;
                }

                // getter function
                public function getName() {

                    return $this->name;
                }
                // getter function
                public function getDegree() {

                    return $this->degree;
                }
                // getter function
                public function getSubset() {

                    return $this->subset;
                }

                public function setSubset($sub)
                {           
                    $this->subset[] = $sub;
                    $this->index++;
                }
            }

            function indexOfObje($str,$array)
            {
                $count = 0;
                foreach( $array as $row) { 

                    if(strcmp($row->getName(),$str) == 0)
                        return $count;
                    $count++;
                }
                return -1;
            }

            $pathojens = array();
            $groups = array();
            $types = array();       
            $index;
            // arama sonucundaki satirlara gore islem yapilir.
            for($row = 0; $row < $rowcount; $row++) {

                $pathojen = $resultsarray2[$row][2];
                $group = $resultsarray2[$row][0];
                $type = $resultsarray2[$row][1];
                //echo $type."---".$group."***".$pathojen."????";

                if(($index = indexOfObje($pathojen,$pathojens)) > -1) {

                    $pathojens[$index]->degreeRaise(); /* Onceden sayýlan bir pathojen ise degree si artýtýlýr.
                                                        Bu durum type ve grubunda onceden sayýldýgýný gosterir,
                                                        ve onlarýnda degree si artýrýlýr.*/
                    $groups[indexOfObje($group,$groups)]->degreeRaise();
                    $types[indexOfObje($type,$types)]->degreeRaise();
                }
                else if(($index = indexOfObje($group,$groups)) > -1) {

                    $groups[$index]->degreeRaise(); /* Onceden sayýlan bir grup ise degree si artýtýlýr.
                                                    Bu durum type indaonceden sayýldýgýný gosterir,
                                                    ve onunda degree si artýrýlýr.*/
                    //echo $types[0]->getName();
                    //echo $type.indexOfObje($type,$types);
                    $types[indexOfObje($type,$types)]->degreeRaise();
                    /* Yeni bir pathojen objesi olusturulur.Grubunun alt 
                    kumesine konulur ve pathojen dizisine atýlýr.*/
                    $newObje = new obje($pathojen,1);
                    $pathojens[] = $newObje;

                    $groups[indexOfObje($group,$groups)]->setSubset($pathojen);

                }
                else if(($index = indexOfObje($type,$types)) > -1) {

                    $types[$index]->degreeRaise(); /* Onceden sayýlan bir type ise degree si artýtýlýr.*/

                    /* Yeni bir pathojen objesi olusturulur.Grubunun alt 
                    kumesine konulur ve pathojen dizisine atýlýr.*/
                    $newObje = new obje($pathojen,1);
                    $pathojens[] = $newObje;
                    /* Yeni bir pathojen objesi olusturulur.Grubunun alt 
                    kumesine konulur ve pathojen dizisine atýlýr.*/
                    $newObje2 = new obje($group,1);
                    $groups[] = $newObje2;  

                    $groups[indexOfObje($group,$groups)]->setSubset($pathojen);                     
                    $types[indexOfObje($type,$types)]->setSubset($group);

                }
                else { /* Yeni bir type,group ve pathojenin oldugu durum */

                    /* Yeni bir pathojen objesi olusturulur.Grubunun alt 
                    kumesine konulur ve pathojen dizisine atýlýr.*/
                    $newObje = new obje($pathojen,1);
                    $pathojens[] = $newObje;
                    /* Yeni bir group objesi olusturulur.Type nin alt 
                    kumesine konulur ve groups dizisine atýlýr.*/
                    $newObje2 = new obje($group,1);
                    $groups[] = $newObje2;  
                    /* Yeni bir type objesi olusturulur,type dizisine atýlýr.*/
                    $newObje3 = new obje($type,1);
                    $types[] = $newObje3;           

                    $groups[indexOfObje($group,$groups)]->setSubset($pathojen);                 
                    $types[indexOfObje($type,$types)]->setSubset($group);           

                }

            } 
            /* Datalar flashýn okuyabilmesi icin xmldosyaya yazilacak. */
            $document = new DOMDocument(); 
            $document->formatOutput = true; 
            $root = $document->createElement( "PieChart" ); 
            $document->appendChild( $root ); 
            echo '<?xml version="1.0" encoding="UTF-8"?>';

            /* Tür dizisinin boyutu xml e yazýlýr. */
            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "sizeOfType" ); 
            $size->appendChild( $document->createTextNode( count($types) ) ); 
            $block->appendChild($size); 
            $root->appendChild( $block );

            /* Grup dizisinin boyutu xml e yazýlýr. */
            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "sizeOfGroup" ); 
            $size->appendChild( $document->createTextNode( count($groups) ) ); 
            $block->appendChild($size); 
            $root->appendChild( $block );

            /* Strain dizisinin boyutu xml e yazýlýr. */
            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "sizeOfPathojen" ); 
            $size->appendChild( $document->createTextNode( count($pathojens) ) ); 
            $block->appendChild($size); 
            $root->appendChild( $block );

            foreach($types as $type) {

                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "typeName" ); 
                $size->appendChild( $document->createTextNode( $type->getName() ) ); 
                $block->appendChild($size); 
                $root->appendChild( $block );

                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "typeDegree" ); 
                $size->appendChild( $document->createTextNode( $type->getDegree() ) ); 
                $block->appendChild($size); 
                $root->appendChild( $block );
            }

            /* her tür icin alt kume elemanlarý tek tek yazilir. */     
            $count = 0;
            foreach($types as $type) {

                /* her tür icin alt kume boyutu yazilir. */
                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "sizeOfSubset" ); 
                $size->appendChild( $document->createTextNode( count($type->getSubset()) ) ); 
                $block->appendChild($size); 
                $root->appendChild( $block ); 

                for($count2 = 0; $count2 < count($type->getSubset()); $count2++) {

                    $block = $document->createElement( "datas" ); 
                    $size= $document->createElement( "subsetOfType" ); 
                    $subset = $type->getSubset();
                    $size->appendChild( $document->createTextNode( $subset[$count2] ) ); 
                    $block->appendChild($size); 
                    $root->appendChild( $block ); 
                }
                $count++;

            }

            foreach($groups as $group) {

                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "groupName" ); 
                $size->appendChild( $document->createTextNode( $group->getName() ) ); 
                $block->appendChild($size); 
                $root->appendChild( $block );

                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "groupDegree" ); 
                $size->appendChild( $document->createTextNode( $group->getDegree() ) ); 
                $block->appendChild($size); 
                $root->appendChild( $block );
            }

            /* her grup icin alt kume elemanlarý tek tek yazilir. */        
            $count = 0;
            foreach($groups as $group) {

                /* her grup icin alt kume boyutu yazilir. */
                $block = $document->createElement( "datas" ); 
                $size= $document->createElement( "sizeOfSubset2" ); 
                $size->appendChild( $document->createTextNode( count($group->getSubset()) ) ); 
                $block->appendChild($size);             
                $root->appendChild( $block ); 

                for($count2 = 0; $count2 < count($group->getSubset()); $count2++) {

                    $block = $document->createElement( "datas" ); 
                    $size= $document->createElement( "subsetOfType2" ); 
                    $size->appendChild( $document->createTextNode( $group->getSubset()[$count2] ) ); 
                    $block->appendChild($size);         
                    $root->appendChild( $block ); 

                    $block = $document->createElement( "datas" ); 
                    $size= $document->createElement( "degree" ); 

                    // pathojenin pathojenler arrayindeki indexi bulunur.
                    $in = indexOfObje($group->getSubset()[$count2],$pathojens); 
                    // pathojenin degree si yazilir.
                    $size->appendChild( $document->createTextNode( $pathojens[ $in ]->getDegree()) ); 
                    $block->appendChild($size);         
                    $root->appendChild( $block ); 
                }       
            }

            $document->saveXML(); 
            $document->save("chart.xml"); 

            /* Flashi ekrana bas */
            if($deger == "Pie Chart")
            {
                echo '
                <EMBED ID="Shockwave" SRC="pie_chart.swf" HEIGHT=400 WIDTH=950 PALETTE=BACKGROUND Quality=AutoLow Loop=FALSE Play=TRUE
                Scale=ShowAll SAlign=L ALT="" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer/"></OBJECT></center>';
            }
            else if($deger == "Bar Chart")
            {
                echo'   <EMBED ID="Shockwave2" SRC="bar_chart.swf" HEIGHT=600 WIDTH=950 PALETTE=BACKGROUND Quality=AutoLow Loop=FALSE Play=TRUE
                Scale=ShowAll SAlign=L ALT="" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer/"></OBJECT></center>';
            }

            include("foot.php");
    ?>

        $block = $document->createElement( "datas" ); 
        $size= $document->createElement( "typeDegree" ); 
        $size->appendChild( $document->createTextNode( $type->getDegree() ) ); 
        $block->appendChild($size); 
        $root->appendChild( $block );
    }

    /* her tür icin alt kume elemanlarý tek tek yazilir. */     
    $count = 0;
    foreach($types as $type) {

        /* her tür icin alt kume boyutu yazilir. */
        $block = $document->createElement( "datas" ); 
        $size= $document->createElement( "sizeOfSubset" ); 
        $size->appendChild( $document->createTextNode( count($type->getSubset()) ) ); 
        $block->appendChild($size); 
        $root->appendChild( $block ); 

        for($count2 = 0; $count2 < count($type->getSubset()); $count2++) {

            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "subsetOfType" ); 
            $subset = $type->getSubset();
            $size->appendChild( $document->createTextNode( $subset[$count2] ) ); 
            $block->appendChild($size); 
            $root->appendChild( $block ); 
        }
        $count++;

    }

    foreach($groups as $group) {

        $block = $document->createElement( "datas" ); 
        $size= $document->createElement( "groupName" ); 
        $size->appendChild( $document->createTextNode( $group->getName() ) ); 
        $block->appendChild($size); 
        $root->appendChild( $block );

        $block = $document->createElement( "datas" ); 
        $size= $document->createElement( "groupDegree" ); 
        $size->appendChild( $document->createTextNode( $group->getDegree() ) ); 
        $block->appendChild($size); 
        $root->appendChild( $block );
    }

    /* her grup icin alt kume elemanlarý tek tek yazilir. */        
    $count = 0;
    foreach($groups as $group) {

        /* her grup icin alt kume boyutu yazilir. */
        $block = $document->createElement( "datas" ); 
        $size= $document->createElement( "sizeOfSubset2" ); 
        $size->appendChild( $document->createTextNode( count($group->getSubset()) ) ); 
        $block->appendChild($size);             
        $root->appendChild( $block ); 

        for($count2 = 0; $count2 < count($group->getSubset()); $count2++) {

            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "subsetOfType2" ); 
            /* LINE 249 */
            $size->appendChild( $document->createTextNode( $group->getSubset()[$count2] ) ); 
            $block->appendChild($size);         
            $root->appendChild( $block ); 

            $block = $document->createElement( "datas" ); 
            $size= $document->createElement( "degree" ); 

            // pathojenin pathojenler arrayindeki indexi bulunur.
            $in = indexOfObje($group->getSubset()[$count2],$pathojens); 
            // pathojenin degree si yazilir.
            $size->appendChild( $document->createTextNode( $pathojens[ $in ]->getDegree()) ); 
            $block->appendChild($size);         
            $root->appendChild( $block ); 
        }       
    }

    $document->saveXML(); 
    $document->save("chart.xml"); 

    /* Flashi ekrana bas */
    if($deger == "Pie Chart")
    {
        echo '
        <EMBED ID="Shockwave" SRC="pie_chart.swf" HEIGHT=400 WIDTH=950 PALETTE=BACKGROUND Quality=AutoLow Loop=FALSE Play=TRUE
        Scale=ShowAll SAlign=L ALT="" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer/"></OBJECT></center>';
    }
    else if($deger == "Bar Chart")
    {
        echo'   <EMBED ID="Shockwave2" SRC="bar_chart.swf" HEIGHT=600 WIDTH=950 PALETTE=BACKGROUND Quality=AutoLow Loop=FALSE Play=TRUE
        Scale=ShowAll SAlign=L ALT="" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer/"></OBJECT></center>';
    }

    include("foot.php");
 ?> 
```

截图如下。

谢谢。

![服务器错误](../Images/f865c58758ec041ef100f85cf881faa1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:35:59.457

您已从 PHP 5.4 降级到 5.3？

建议查看**[迁移指南](http://www.php.net/manual/en/migration54.new-features.php)**，您可以在其中查看第 3 点：

> 添加了函数数组解引用，例如**foo()[0]**。

这个功能没有出现在 PHP 5.3 中，所以它抱怨你的第 249 行：

```
$in = indexOfObje($group->getSubset()[$count2],$pathojens); 
```

试试这个（注意：我没有测试！）：

```
$subset = $group->getSubset();
$in = indexOfObje($subset[$count2],$pathojens); 
```

有关更多信息，请参阅此链接：[https ://wiki.php.net/rfc/functionarraydereferencing](https://wiki.php.net/rfc/functionarraydereferencing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:19:14.583

您的错误表明您有语法错误，例如。您的代码无效，这意味着您应该根据第 249 行的错误（意外的“[”）修复代码。但是，`$class->method()[$count]`您正在使用的 PHP 5.3.3 不支持该代码。我建议您升级您的 PHP 版本或稍微更改您的代码。此外，屏幕截图表明您在 PHP.ini 中禁用了错误，您应该为开发服务器启用它们 (E_ALL)。

# netbeans - Netbeans 自定义 bean 问题

> ID：13342720
> 
> 赞同：1
> 
> 时间：2012-11-12T11:16:09.813
> 
> 标签：netbeans, javabeans

我正在尝试将一个简单的 bean 放入 netbeans 中 GUI 构建器的调色板中。它可以在我的 PC 上完美运行，但是当我尝试在笔记本电脑上执行此操作时（从头开始，代码和方法与 PC 完全相同），它不会显示在调色板上。在调色板管理器中，它还添加了扩展名 .palette_item，这在我的 PC 上没有。我最初认为这个问题与我的笔记本电脑上安装了较新版本的 netbeans 有关，但是在降级到相同版本后仍然会出现同样的问题。

这是我目前在两台机器上使用的 netbeans 版本 7.0.1。

# css - 有没有更好的方法将图形元素限制为包含图像的大小

> ID：13342721
> 
> 赞同：2
> 
> 时间：2012-11-12T11:16:12.377
> 
> 标签：css, html, figure

我有带标题的图像，如下所示：

```
<figure class="imageBoxShadow">
    <img alt="Alt-Text" src="http://lorempixel.com/280/375">
    <figcaption>A Caption for this image</figcaption>
</figure> 
```

“imageBoxShadow”类在图像周围放置了一个 boxShadow（谁会猜到？）。我把它放在图上，因为标题应该在边界内。只要标题更小然后图像很宽，它就可以正常工作。

但是，如果我有一个小图像和/或长标题，则标题将尽可能地扩展图形元素，这看起来很愚蠢。

当然，我可以通过添加硬编码样式来设置宽度来限制图形元素：

```
<figure class="imageBoxShadow" style="width: 100px">
    <img alt="Alt-Text" src="http://lorempixel.com/100/150">
    <figcaption>Using a hardcoded style to restrict the figure element works but feels stupid.</figcaption>
</figure> 
```

但这在 CMS 上下文中感觉很愚蠢而且不太方便。

有一个更好的方法吗？

有一个 jsFiddle 链接可以查看：http: [//jsfiddle.net/Sorcy/h5sNB/](http://jsfiddle.net/Sorcy/h5sNB/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:43:28.143

添加

```
figure {
  display: table;
  width: 1px;
} 
```

到您的 css [如[这里](https://stackoverflow.com/a/617455/703717)建议的那样]，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:33:25.967

不要让世界复杂化！简单地说，使标题出现在鼠标悬停上。此外，您可以让标题的一小部分默认显示，然后在鼠标悬停或悬停时将其余部分显示为工具提示。

# android - MVVMCross 从 MvxBindableListView 中获取 SelectedItem

> ID：13342722
> 
> 赞同：4
> 
> 时间：2012-11-12T11:16:16.820
> 
> 标签：android, listview, xamarin.android, viewmodel, mvvmcross

我的 Android 应用程序小问题，我不知道如何使用 MVVM Cross 解决它。

这是我的视图模型：

```
public class AddressesShowViewModel : MvxViewModel
{
    public List<Address> Addresses { get; set; }

    public AddressesShowViewModel(string addressesForListView)
    {
        Addresses = JsonConvert.DeserializeObject<List<Address>>(addressesForListView);
    }

    public IMvxCommand ShowItemCommand
    {
        get
        {
            //return new MvxRelayCommand<Type>((type) => this.RequestNavigate(type));
            return new MvxRelayCommand(DoShowContact);
        }
    }

    private Address selectedItem;
    public Address SelectedItem
    {
        get { return selectedItem; }
        set { selectedItem = value; FirePropertyChanged(() => SelectedItem); }
    }

    private void DoShowContact()
    {
        RequestNavigate<AddressShowViewModel>();
    }
} 
```

我的地址显示.axml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/INMobileCRM4Android.INMobileCRM4Android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<Mvx.MvxBindableListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="{'ItemsSource':{'Path':'Addresses'},'ItemClick':{'Path':'ShowItemCommand'}, 'SelectedItem':{'Path':'SelectedItem'}}"
    local:MvxItemTemplate="@layout/addresslistitem"
  />
</FrameLayout> 
```

我想知道，如何从 ListView 中获取 SelectedItem `AddressesShow.axml`.. 我试图创建一个 Property 'SelectedItem'.. 但它在开始时被调用，当 ViewModel 被创建时（并且显然返回 null），不是在单击项目时..顺便说一句，它是一种地址，而不仅仅是字符串或其他东西..也许有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:38:30.137

`SelectedItem`上周在准备 Daniel 在 Build 上的演讲时，Droid的缺乏被确定为一个问题。

为了解决这个问题，有几个快速的答案：

1`SelectedItemPosition`您可以用于绑定 - 这是一个`int`

2 您可以使用`Click` `ICommand/IMvxCommand`绑定而不是使用`SelectedItem`- 在您的示例中，这将是相同的 axml，但

```
public IMvxCommand ShowItemCommand
{
    get
    {
        return new MvxRelayCommand<Address>(address => DoShowContact(address));
    }
} 
```

**要清楚**上面的这个`Click`选项是我会使用的。

* * *

如果确实需要 SelectedItem...

然后，为了获得完整的答案，丹尼尔和我设计了一个新绑定的原型。此绑定是使用以下方式注册的：

```
 registry.RegisterFactory(new MvxCustomBindingFactory<MvxBindableListView>("SelectedItem", adapterView => new MvxAdapterViewSelectedItemTargetBinding(adapterView))); 
```

并包含逻辑：

```
using System;
using Android.Widget;
using Cirrious.MvvmCross.Binding.Droid.Views;
using Cirrious.MvvmCross.Binding.Interfaces;
using Cirrious.MvvmCross.Interfaces.Platform.Diagnostics;

namespace Cirrious.MvvmCross.Binding.Droid.Target
{
#warning This needs to be redone for all adapterviews not just list view!
#warning The use of ItemClick instead of ItemSelected needs to be reinvestigated here!
    public class MvxAdapterViewSelectedItemTargetBinding : MvxBaseAndroidTargetBinding
    {
        private readonly MvxBindableListView _view;
        private object _currentValue;

        public MvxAdapterViewSelectedItemTargetBinding(MvxBindableListView view)
        {
            _view = view;
            ((ListView)_view).ItemClick += OnItemClick;
        }

        private void OnItemClick(object sender, AdapterView.ItemClickEventArgs itemClickEventArgs)
        {
            var container = (_view.GetItemAtPosition(itemClickEventArgs.Position) as MvxJavaContainer);
            if (container == null)
            {
                MvxBindingTrace.Trace(MvxTraceLevel.Warning, "Missing MvxJavaContainer in MvxAdapterViewSelectedItemTargetBinding");
                return;
            }
            var newValue = container.Object;
            if (!newValue.Equals(_currentValue))
            {
                _currentValue = newValue;
                FireValueChanged(newValue);
            }
        }

        public override void SetValue(object value)
        {
#warning Sort out Equals test here
            if (value != null && value != _currentValue)
            {
                var index = _view.Adapter.GetPosition(value);
                if (index < 0)
                {
                    MvxBindingTrace.Trace(MvxTraceLevel.Warning, "Value not found for spinner {0}", value.ToString());
                    return;
                }
                _currentValue = value;
                _view.SetSelection(index);
            }
        }

        public override MvxBindingMode DefaultMode
        {
            get { return MvxBindingMode.TwoWay; }
        }

        public override Type TargetType
        {
            get { return typeof(object); }
        }

        protected override void Dispose(bool isDisposing)
        {
            if (isDisposing)
            {
                ((ListView)_view).ItemClick -= OnItemClick;
            }
            base.Dispose(isDisposing);
        }
    }
} 
```

* * *

为了测试这个是否有效，我使用了教程 PullToRefresh 代码，该代码使用以下代码改编：

```
<Mvx.MvxBindableListView         android:id="@android:id/list"         android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="{'ItemsSource':{'Path':'Emails'},'ItemClick':{'Path':'ShowItemCommand'},'SelectedItem':{'Path':'TheSelectedEmail'}}"
    local:MvxItemTemplate="@layout/listitem_email"
/> 
```

和：

```
 public class SimpleEmail
    {
        public string From { get; set; }    
        public string Header { get; set; }    
        public string Message { get; set; }    
    }

    private ObservableCollection<SimpleEmail> _emails;
    public ObservableCollection<SimpleEmail> Emails
    {
        get { return _emails; }
        private set { _emails = value; RaisePropertyChanged(() => Emails); }
    }

    private SimpleEmail _email;
    public SimpleEmail TheSelectedEmail
    {
        get { return _email; }
        set
        {
            _email = value;
            MvxTrace.Trace(MvxTraceLevel.Error, "HELLO {0} ", value == null ? "null" : value.From);
        }
    } 
```

* * *

在所有这些工作中需要注意的一件事是，Android 中的列表视图选定项与 Silverlight/wp 中的列表框选定项略有不同 - 例如，很难在 android 中获得一个列表视图来突出显示当前的选择和它让列表视图生成选择更改事件可能非常困难。

* * *

注意：我已将 Droid SelectedItem 上的问题记录到[https://github.com/slodge/MvvmCross/issues/52](https://github.com/slodge/MvvmCross/issues/52) - 我将确保在不久的将来将绑定添加到核心库

# javascript - 调用 Web 服务时使用 JavaScript 发送机密信息

> ID：13342726
> 
> 赞同：1
> 
> 时间：2012-11-12T11:16:22.343
> 
> 标签：javascript, security

我有一个 ERP 系统，我为它构建了一些 Web 服务。出于安全原因，Web 服务的使用者必须发送主登录用户名和密码（在我的 ERP 应用程序中设置）以及其他参数。例如，调用 Web 服务来检索员工的年薪，消费者使用以下 URL 调用 Web 服务：-

```
/jw/web/json/hr/getsalary/byid?master_username=superadmin&password_hash=9449B5ABCFA9AFDA36B801351ED3DF66&employeeid=A200121 
```

现在我已经下载了一个免费且简单的文档管理系统，并且能够从免费软件中调用上述 Web 服务，我只能使用 JavaScript，因为我不是该软件的所有者，但因为我发送的是 master_username和 password_hash 作为调用的一部分，那么使用 javaScrpt 执行此操作是不安全的。

所以我的问题是我可以使用哪些其他方法（除了主登录用户名和密码）使用 javaScript 使 Web 服务调用安全；所以 Web 服务应该使用 javaScript 完成并且应该是安全的？提前感谢您的帮助。BR

**:::Updated:::** javaScript 看起来类似于：-

```
<script type="text/javascript">
$(function() {
$.getJSON("https://MyERPsystem.com/jw/web/json/hr/getsalary/byid?master_username=superadmin&password_hash=9449B5ABCFA9AFDA36B801351ED3DF66&employeeid=A200121",
  {
//code goes here
  },
  function(data) {
    $.each(data.items, function(i,item){
//code goes here
    });
});
}) </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:22:51.007

您可以使用默认加密的 SSL 连接。

ps 我不确定我是否理解为什么你不能正常地对用户进行身份验证，然后只接受对经过身份验证的会话中的用户的查询。

# css - 自定义 Trust Pilot 小部件 CSS

> ID：13342727
> 
> 赞同：0
> 
> 时间：2012-11-12T11:16:28.483
> 
> 标签：css

我已将[TrustPilot 小部件](http://help.dandomain.dk/Webshop6/DK/HTML/7.11_Trustpilot.htm)添加到我的网站。

我想覆盖从 TP 导入的当前样式表。我想我只是在 div 周围添加一个类，然后使用 !important 在css中设置它的样式，但是所有尝试都失败了。

我想知道是否有人对此有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:37:36.067

当他们在元素本身中编写精灵图像时，您必须通过 javascript 来操作它，女巫会覆盖任何其他样式规则。

一个简单的 jQuery

```
$("#tp_widget div").attr("style", ""); 
```

这是一个关于如何自定义顶部标题的现场演示：http: [//jsbin.com/usadit/3/](http://jsbin.com/usadit/3/)

您可以通过 /edit url 将其编辑为：http: [//jsbin.com/usadit/3/edit](http://jsbin.com/usadit/3/edit)

# python - Python消息框

> ID：13342728
> 
> 赞同：0
> 
> 时间：2012-11-12T11:16:35.167
> 
> 标签：python, tkinter

下面是我的代码，如果一个问题得到回答，我不能让它开始另一个问题。

我有一个应用程序提出的问题列表，但在这里发布它们是没有意义的。我只是不知道如何继续提问。

```
from tkinter import *
from random import randint
from tkinter import ttk

def correct():
    vastus = ('correct')
    messagebox.showinfo(message=vastus)   

def first():
    box = Tk()
    box.title('First question')
    box.geometry("300x300")

    silt = ttk.Label(box, text="Question")
    silt.place(x=5, y=5)

    answer = ttk.Button(box, text="Answer 1", command=correct)
    answer.place(x=10, y=30, width=150,)

    answer = ttk.Button(box, text="Answer 2",command=box.destroy)
    answer.place(x=10, y=60, width=150)

    answer = ttk.Button(box, text="Answer 3", command=box.destroy)
    answer.place(x=10, y=90, width=150)

first() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:31:00.243

据我所知，你的问题很模糊。

```
tkMessageBox.showinfo() 
```

是你在找什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:28:47.320

您可以在正确的函数中运行下一个问题，或者如果您将 QA 对话抽象一点，您可能会使其更加灵活。我有点无聊，所以我构建了一些支持动态数量问题的东西（虽然目前只有 3 个答案）：

```
from tkinter import ttk
import tkinter
import tkinter.messagebox

class Question:
    def __init__ (self, question, answers, correctIndex=0):
        self.question = question
        self.answers = answers
        self.correct = correctIndex

class QuestionApplication (tkinter.Frame):
    def __init__ (self, master=None):
        super().__init__(master)
        self.pack()

        self.question = ttk.Label(self)
        self.question.pack(side='top')

        self.answers = []
        for i in range(3):
            answer = ttk.Button(self)
            answer.pack(side='top')
            self.answers.append(answer)

    def askQuestion (self, question, callback=None):
        self.callback = callback
        self.question['text'] = question.question

        for i, a in enumerate(question.answers):
            self.answers[i]['text'] = a
            self.answers[i]['command'] = self.correct if i == question.correct else self.wrong

    def correct (self):
        tkinter.messagebox.showinfo(message="Correct")
        if self.callback:
            self.callback()

    def wrong (self):
        if self.callback:
            self.callback()

# configure questions
questions = []
questions.append(Question('Question 1?', ('Correct answer 1', 'Wrong answer 2', 'Wrong answer 3')))
questions.append(Question('Question 2?', ('Wrong answer 1', 'Correct answer 2', 'Wrong answer 3'), 1))

# initialize and start application loop
app = QuestionApplication(master=tkinter.Tk())
def askNext ():
    if len(questions) > 0:
        q = questions.pop(0)
        app.askQuestion(q, askNext)
    else:
        app.master.destroy()

askNext()
app.mainloop() 
```

# html - websql数据库的最后四项

> ID：13342733
> 
> 赞同：0
> 
> 时间：2012-11-12T11:16:53.553
> 
> 标签：html, database, web-sql

这是我的数据库中所有数据的函数。我只想要数据库中的最后四个数据。

```
function spelerWeergeven()
{
    db.transaction(function(tx)
    {
        tx.executeSql('SELECT * FROM speler', [], function (tx, results)
        {
            var len = results.rows.length, i;
            if(len > 0)
            {
                $('#spelerTabel').replaceWith('<table id="spelerTabel"><tr><th>Spelers</th></tr></table>');
                $('#spelerTabel').hide();
                for(var i = 0; i< len; i++)
                {
                    $('#spelerTabel tr:last').after('<tr><td>'+results.rows.item(i).naam+'</td></tr>');
                }
                $('#spelerTabel').show('slow');
            }
            }, null);
    }
    );
} 
```

有人知道答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:30:02.230

```
SELECT * FROM `speler` ORDER BY `id` DESC LIMIT 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:20:04.640

这应该工作

```
SELECT *
FROM `speler`
ORDER BY `id` DESC
LIMIT 4; 
```

（反引号 (`) 用于防止 SQL 将它们之间的单词作为关键字读取。记住这一点是件好事，因为 SQL 中有很多很多关键字。）

### 编辑：

由于您已经创建了一个名为**speler**的表，其列**id**（这是主键）和**naam**使用 query `CREATE TABLE IF NOT EXISTS speler (id INTEGER PRIMARY KEY, naam)`，我们知道您的主键列是*id*。

PS：按照惯例，让表名以大写字母 ( *Speler* ) 开头是一件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:29:33.110

这将在服务器端完成：

```
SELECT TOP 4 * FROM 
speler
ORDER BY id DESC 
```

使用 Linq 也很干净：

```
//dc would be a linq datacontext
string cmd = @"SELECT TOP 4 * from speler order by id DESC";
IEnumerable<speler> fourItems = dc.ExecuteQuery<speler>(cmd); 
```

# ruby-on-rails - 路由：无法让默认范围（：locale）与 user_path（id）一起工作，总是必须明确提交语言环境

> ID：13342734
> 
> 赞同：1
> 
> 时间：2012-11-12T11:16:57.377
> 
> 标签：ruby-on-rails, internationalization, locale

我已经对这个主题进行了一些研究，但我似乎无法弄清楚。

我已按照[官方指南](http://guides.rubyonrails.org/i18n.html)设置 I18n，但我只是没有正确设置默认语言环境（当没有指定明确的语言环境时）。

```
# routes.rb
require 'sidekiq/web'

Iq::Application.routes.draw do
  scope "(:locale)", locale: /de|en/ do
    # ...
  end
end

# application_controller.rb
class ApplicationController < ActionController::Base
  before_filter :set_language

  def set_language
    I18n.locale = params[:locale] || I18n.default_locale
  end

  def default_url_options(options = {})
    options.merge!({ :locale => I18n.locale })
  end
end 
```

在 OS X 控制台中：

```
$ rake routes | grep user
...
user GET      (/:locale)/users/:id(.:format)   users#show {:locale=>/de|en/}
... 
```

在 Rails 控制台中：

```
$ Rails c
$ app.users_path
=> "/users"
app.users_path locale: :de
=> "/de/users"
$ app.user_path User.first, locale: :de
=> "/de/users/509fc01d77bb1e6a050000a0"
$ app.user_path User.first
ActionController::RoutingError: No route matches {:action=>"show", :controller=>"users", :locale=>#<User _id: 509fc01d77bb1e6a050000a0, _type: nil, created_at: 2012-11-11 15:11:25 UTC, updated_at: 2012-11-11 15:11:25 UTC, deleted_at: nil, group: "administrator", language: "de", active: true, sign_in_count: 0, name: "sysadmin", email: "support@sientia.ch", encrypted_password: "$2a$10$n/b7sTmUjEMoZI/jvq2jPuaNQqo1R1zbAIPpko9HT9PERagXclrPK", reset_password_token: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, confirmation_token: nil, unconfirmed_email: nil, reset_password_sent_at: nil, remember_created_at: nil, confirmed_at: 2012-11-11 15:11:25 UTC, confirmation_sent_at: nil, current_sign_in_at: nil, last_sign_in_at: nil, save_vertical_menu_visibility_state: nil, contact_id: "509fc01d77bb1e6a0500008c", contact_name: "Sientia AG">}
from /Users/josh/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:532:in `raise_routing_error' 
```

为什么这不起作用？我忘记了什么？

非常感谢您的帮助，乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:50:46.687

一位同事 A 调查了它，并决定我不应该放在`(:locale)`括号中。另一位同事 B 提到，他把它放在括号中以便我们的测试工作，我们不想在调用 url 辅助方法时显式指定语言环境。

同事 A 提到，`default_url_options`当在没有语言环境的情况下调用 url 辅助方法时，应用程序本身会退回到上述方法。这很棒，因为除了 之外`root_path`，我们总是想要一个明确的语言集。

但是在测试中，该`default_url_options`方法被忽略（我不确定这是错误还是功能，哈哈）。所以必须做一些解决方法：

```
# Fixes the missing default locale problem in request specs.
# See http://www.ruby-forum.com/topic/3448797
class ActionView::TestCase::TestController
  def default_url_options(options={})
    { :locale => I18n.default_locale }
  end
end

class ActionDispatch::Routing::RouteSet
  def default_url_options(options={})
    { :locale => I18n.default_locale }
  end
end

# Fixes the missing default locale problem in controller specs
# See http://www.ruby-forum.com/topic/3448797#1041659
class ActionController::TestCase
  module Behavior
    def process_with_default_locale(action, parameters = nil, session = nil, flash = nil, http_method = 'GET')
      parameters = { :locale => I18n.default_locale }.merge( parameters || {} )
      process_without_default_locale(action, parameters, session, flash, http_method)
    end
    alias_method_chain :process, :default_locale
  end
end

module ActionDispatch::Assertions::RoutingAssertions
  def assert_recognizes_with_default_locale(expected_options, path, extras = {}, message=nil)
    expected_options = { :locale => I18n.default_locale.to_s }.merge(expected_options || {} )
    assert_recognizes_without_default_locale(expected_options, path, extras, message)
  end
  alias_method_chain :assert_recognizes, :default_locale
end 
```

把它放到你的 spec_helper.rb 文件中，你就可以使用你的控制器并请求规范了！:-)

尽管如此，在控制台中，这似乎并没有解决问题：

```
$ app.user_path User.first
ActionController::RoutingError: No route matches... 
```

# iphone - 自定义登录视图弹出窗口，如警报视图

> ID：13342735
> 
> 赞同：1
> 
> 时间：2012-11-12T11:17:10.013
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uialertview

我正在尝试制作像警报视图一样的自定义登录视图弹出窗口。我正在使用以下函数模拟 alertview 弹出窗口。这个函数在我的 loginViewController.m 的 viewDidload 中找到

```
-(void)initialDelayEnded {
    self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    self.view.alpha = 1.0;
    [UIView animateWithDuration:1.0/1.5 animations:^{
        self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    }completion:^(BOOL complete){
        [UIView animateWithDuration:1.0/2 animations:^{
            self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
        }completion:^(BOOL complete){
            [UIView animateWithDuration:1.0/2 animations:^{
                self.view.transform = CGAffineTransformIdentity;
            }];
        }];
    }];
}
- (void)viewDidLoad
{
    [self initialDelayEnded];
    [super viewDidLoad];
} 
```

我正在通过以下方式在我的 firstViewController 中调用我的 loginViewController。

```
LoginViewController *login = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:NULL];
        [self presentViewController:login animated:YES completion:NULL]; 
```

但它因以下错误而崩溃。

```
'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <UIView: 0x8674bf0; frame = (0 20; 320 460); autoresize = W+H; layer = <CALayer: 0x8670620>> is associated with <LoginViewController: 0x868a7d0>. Clear this association before associating this view with <LoginViewController: 0x8451e70>. 
```

有人可以帮助我吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:29:36.993

Here:

```
[self presentViewController:login animated:YES completion:NULL]; 
```

you are presenting a `viewController` by Self which i guess is a `viewcontroller` itself.

instead you should use:

```
[self presentModalViewController:login animated:YES]; 
```

if you want to present your `viewcontroller` rather pushing it on the navigation stack. In which class you are using this code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:37:43.987

除非您有特殊原因，否则请`[super viewDidLoad];`在您当地的实施范围内尽早致电完成。意思：打电话`[self initialDelayEnded];`之后`[super viewDidLoad];`

请确保您的 .xib 文件在面板`LoginViewController`中只有一个`File's Owner`in`Placeholders`并且没有 ViewController 对象。`Objects`并确保`File's Owner`自定义类是`LoginViewController`. 你能上传你的.xib的截图，具体显示`Document Outline`吗？找出可能出错的地方会容易得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:41:17.430

你检查过你的 LoginViewController xib 吗？您是否有可能将同一个视图与超过 1 个视图控制器进行映射？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T10:16:17.740

我通过以下方式解决了我的应用程序登录问题>

1.  使用 Alert View 在 applicationDidBecomeActive 上的 AppDelegate 中显示
2.  将带有 XIB 的 UIView 控制器添加到名为 LoginSubView 的项目中。保持空白并添加标签说99
3.  在警告框出现之前加载 LoginSubView 控制器。

    ```
    AFLoginViewController *LoginSubView = [[AFLoginViewController alloc] init];
    [_window addSubview:LoginSubView.view];
    [_window makeKeyAndVisible];

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"This is an example alert!" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Login", nil];
    alert.alertViewStyle = UIAlertViewStyleSecureTextInput;
    [alert show]; 
    ```

4.  如果登录成功，我在其他任何内容之前删除了 LoginSubView，并使用以下几行

    ```
    for (UIView *subView in _window.subviews)
    {
        if (subView.tag == 99)
        {
            [subView removeFromSuperview];
        }
    } 
    ```

5.  也可以在 applicationDidEnterBackground 上添加相同的子视图。避免下次回到前台时闪烁敏感的屏幕视图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T12:43:47.927

错误消息暗示有两个“LogInViewController”实例。你在使用故事板吗？如果是这样，您可以将视图控制器添加到主故事板文件（而不是单独的 nib），给它一个标签/标识符（但不要将它连接到其他 VC）。然后，您可以获取故事板创建的实例并呈现它。像这样：

```
//Get the stroyboard
UIStoryBoard *mainStoryBoard = [UIStoryBoard storyboardWithName:<STORYBOARD_NAME> bundle:nil];

//Get the VC
LogInViewController *login = [mainStoryBoard instantiateViewControllerWithIdentifier:<VIEWCONTROLLER_TAG>];

//Present
[self presentModalViewController:login animated:YES]; 
```

此外，您不应该尝试在 中显示其他视图控制器`viewDidLoad:`，它不会起作用。移动代码以显示新控制器`viewDidAppear:`

# excel - 我如何在excel中测试值TRUE

> ID：13342739
> 
> 赞同：0
> 
> 时间：2012-11-12T11:17:21.793
> 
> 标签：excel

快一个（希望如此）

我在 excel 2010 中有一个列，其单元格中的值为 TRUE 或 FALSE

如果值为 TRUE，我想复制另一个单元格的值

这是我所拥有的：

```
A1 some value
B1 TRUE
C1 =IF(B1=TRUE,A1,"") 
```

我尝试了以下方法（均无效）：

```
=IF(B1=TRUE,...
=IF(B1="TRUE",...
=IF(B1,... 
```

我也尝试将 B 列作为 General 和 Text

我注意到，如果我在 B 列中键入单词 TRUE 或 FALSE，它会左对齐而不是居中，这可能会提供一些线索。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:47:31.640

通常，如果您在单元格中键入 TRUE 或 FALSE，它们默认为“布尔值”（不是文本），因此您不使用引号，在这种情况下您的第一个公式应该起作用，即

`=IF(B1=TRUE,A1,"")`

....但是，如果该列被格式化为文本，您将需要引号，例如

`=IF(B1="TRUE",A1,"")`

如果两者都不起作用，那么 B1 中可能有一些前导或尾随空格？

# hibernate - Hibernate/JPA - 如何在不触发延迟加载的情况下获取 @ManyToOne 字段的 id

> ID：13342740
> 
> 赞同：2
> 
> 时间：2012-11-12T11:17:23.807
> 
> 标签：hibernate, jpa

例如，有一个实体“用户”，其`@ManyToOne(fetch=Lazy)`字段为“团队”。我用过`entityManager.find(User.class, userId)`获取用户。此时，如果我调用`user.getTeam()`查询将被发送到数据库以获取团队对象。有没有办法在没有额外查询的情况下获取团队 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:22:01.903

出于这些目的，我确实映射了该列两次。`insert="true"`一次与和进行多对一`update="true"`。

然后我附加一个**TeamId**属性并将其映射为 int`insert="false"`和`update="false"`. 我使用的不是`column`映射`formula`。

TeamId 在第一次选择后可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:37:15.947

If you do not want to use Hibernate, add a @PostLoad method on you User entity, which will set your teamId

1.  Add a @Transient teamId property
2.  Add a @PostLoad method :

Add a @PostLoad method

```
@PostLoad
    public void updateTeamIdInfos() {
        if (getTeam() != null) {
            setTeamId(getTeam().getId());
        }
    } 
```

# erlang - CouchDB 作为 Erlang 版本的一部分

> ID：13342741
> 
> 赞同：7
> 
> 时间：2012-11-12T11:17:28.950
> 
> 标签：erlang, couchdb, release, erlang-otp, mochiweb

我想构建和[部署](https://stackoverflow.com/questions/12759153/introduction-to-elang-otp-production-applications-deployment)一个应用程序，其中 Django 作为前端，YAWS ( [appmods](https://stackoverflow.com/a/11793116/846910) ) 或 Mochiweb/Webmachine 作为后端，CouchDB 作为数据存储。此外，我计划广泛使用 CouchDB 的复制能力，以便为整个应用程序提供高容错能力。

我倾向于认为，为了实现这一点，我必须创建一个单一的 OTP 版本，其中包含 YAWS 和 CouchDB 作为 Erlang/OTP 应用程序。

这种方法似乎正确吗？我如何根据 OTP 应用程序组织 YAWS 和 CouchDB 以创建可靠的生产设置？有没有这样做的最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T01:58:11.160

Erlang 版本是打包软件的好方法，因为它们包含所有依赖库。这样，不同的 erlang 应用程序可以运行不同版本的所需库，而不会相互冲突。

处理 Erlang 复杂的发布过程的一种流行方法是让[Rebar](https://github.com/basho/rebar)为您完成。他们有一个[快速入门指南](https://github.com/basho/rebar/wiki/Release-handling)，可让您走上正确的道路。我不知道您目前是否正在使用 Rebar 来管理您的项目，但它使事情变得容易多了。如果您还没有使用它，那绝对值得研究。

但是，rebar 不会立即包含您的依赖项。为此，您应该修改 reltool.config 文件和所有需要的应用程序。

第一步是添加所有依赖项所在的目录，例如：

```
{sys, [
    ...
    {lib_dirs, ["../deps"]},
    ...
}. 
```

然后，将您的依赖项添加为要包含在发布中的应用程序：

```
{sys, [
    ...
    {app, jiffy, [{incl_cond, include}]},
    {app, cowboy, [{incl_cond, include}]},
    ...
}. 
```

现在，当您运行`rebar generate`命令时，您的应用程序应该位于 lib 下的目标目录中：

```
find brawl_server -type d -maxdepth 2

brawl_server
brawl_server/bin
brawl_server/erts-5.9.1
brawl_server/erts-5.9.1/bin
brawl_server/lib
brawl_server/lib/brawl_server-1.1
brawl_server/lib/cowboy-0.6.0
brawl_server/lib/jiffy-0.6.1
brawl_server/lib/kernel-2.15.1
brawl_server/lib/sasl-2.2.1
brawl_server/lib/stdlib-1.18.1
brawl_server/log
brawl_server/log/sasl
brawl_server/releases
brawl_server/releases/1 
```

您还需要确保您自己的 OTP 应用程序知道它需要启动它所依赖的应用程序。如果您有生成的 Rebar 项目，请修改您的`<appname>.app.src`文件以包含它们：

```
{application, app, [
    ...
    {applications, [
              jiffy,
              cowboy,
              kernel,
              stdlib
             ]},
    ...
}. 
```

您应该能够编译和生成发布并使用包含的脚本运行它，如 Rebar 发布处理文章中所述。

但是，在这一点上，还有一个额外的问题，因为很明显 vanilla CouchDB 不符合 OTP，并且您不能以这种方式包含它。您可以使用另一个发行版，而不是：[rcouch](http://rcouch.org/)。我自己没试过，希望对你有用。

进一步阅读：

*   [向您学习一些 erlang 非常有用：发布](http://learnyousomeerlang.com/release-is-the-word)
*   我以自己的项目[brawl-online](https://github.com/nicolasartman/brawl-online/tree/master/brawl_server)为例

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T14:04:44.157

我建议创建一个或多个 DEB/RPM/you-name-it 包。CheckInstall 是最简单的解决方案。

# scala - Scala 的默认参数应该如何引用先前的位置参数？

> ID：13342749
> 
> 赞同：14
> 
> 时间：2012-11-12T11:17:49.103
> 
> 标签：scala, constructor, operator-precedence, default-parameters, default-arguments

Scala-lang 参考 5.5.1 和 6.6.1 给我的印象是默认参数可以引用之前评估过的参数：

```
class Test(val first: String, val second: String = first) 
```

但从实验看来，这样做的唯一方法是使用以下形式：

```
class Test(val first: String)(val second: String = first) 
```

然后定义一个辅助构造函数或创建伴生类，以避免在创建时指定第二组括号。我真的不明白第二个构造函数是如何工作的，它看起来像一个柯里化函数，所以我可能猜想有必要`first`独立于 评估`second`，这是正确的吗？这种形式是必要的还是有一些语法糖我可以用来调整第一个构造函数来做我想做的事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T11:32:38.183

正如[Travis Brown](https://stackoverflow.com/users/334519/travis-brown)指出的那样，您确实只能在默认表达式中引用来自先前参数列表的先前参数（因此您确实需要进行 currify）。

现在，关于您的特定用例，默认参数和方法重载有时是实现同一目标的两种方法。

我认为您的方案最简单的解决方案是简单地定义`Test`如下：

```
class Test(val first : String, val second : String) {
  def this(f : String) = this(f, f)
} 
```

如果您想让它更复杂，另一种方法是使用伴随对象：

```
class Test(val first : String)(val second : String = first)
object Test {
  def apply(f : String) = new Test(f)
  def apply(f : String, s : String) = new Test(f)(s)
} 
```

（一个小的区别是现在您创建的对象没有`new`.）

您**不能**做的是将其定义为：

```
class Test(val first : String)(val second : String = first) {
  def this(f : String, s : String) = this(f)(s)
} 
```

...因为咖喱版本被翻译成（除其他外）与重载构造函数具有相同签名的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T11:36:57.163

从[规范的](http://www.scala-lang.org/docu/files/ScalaReference.pdf)5.3 开始：

> 形式值参数的范围包括所有后续参数部分和模板*t*。

顺便说一下（从 4.6 开始），常规方法是相同的：

> 形式值参数名称*x*的范围包括所有后续参数子句，以及方法返回类型和函数体（如果已给出）。

即，无论您有构造函数还是普通方法，值参数名称都不在其自己的参数子句的范围内。在您的第二个版本中，构造函数有两个参数子句，并且`first`仅在第二个范围内。有关多参数子句的更多详细信息，请参见 5.3。

# javascript - Facebook 方法：Feed - JavaScript - 正文 OnLoad

> ID：13342750
> 
> 赞同：1
> 
> 时间：2012-11-12T11:17:53.883
> 
> 标签：javascript, facebook, facebook-graph-api

第一：我不是英语而且我的英语不是很好，对不起。我的 FB 应用程序有问题。

这是代码：

```
//My Script
<script src="http://connect.facebook.net/en_US/all.js"></script>
<p><a onload="postToFeed(); return false;"> </a></p>

<p id="msg"></p>

<script>
  FB.init({appId: "********", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: "feed",
      link: "http://apps.facebook.com/bachflower/",
      picture: "http://glacial-hollows-5787.herokuapp.com/images/37p.png",
      name: "Wild Rose - Rosa Canina",
      caption: " ",
      description: "Dona: Decisione, motivazione, accettazione con gioia del quotidiano. Chi ne ha bisogno tende a pensare: Non vale la pena… meglio rinunciare. Non serve a nulla… - App by medicinanaturale.pro"
    };

    function callback(response) {

    }

    FB.ui(obj, callback);
  }

</script>

//This is my body OnLoad
<body text="#000000" onLoad="postToFeed();" > 
```

问题是：有些人可以在他们的墙上正确地看到和分享 postToFeed 通知。有些人看不到有关 postToFeed 的任何信息。为什么？

任何人都可以帮助我吗？

比你，安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:33:32.003

postToFeed() 函数可能在 FB 加载和初始化之前被调用。使用异步加载，如下所示：

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function() {
    // init the FB JS SDK
        FB.init({
           appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
           channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
           status     : true, // check the login status upon init?
           cookie     : true, // set sessions cookies to allow your server to access the session?
           xfbml      : true  // parse XFBML tags on this page?
        });

        postToFeed();

    };

  // Load the SDK's source Asynchronously
    (function(d, debug){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
       ref.parentNode.insertBefore(js, ref);
    }(document, /*debug*/ false));
</script> 
```

见这里：http: [//developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

# php - 如何发送html电子邮件php

> ID：13342751
> 
> 赞同：2
> 
> 时间：2012-11-12T11:17:53.207
> 
> 标签：php, mass-emails

我正在使用以下代码通过 php 发送 html 电子邮件，请检查我做错的以下代码。它发送电子邮件但不是 html 格式，我尝试了很多网上可用的示例，但无法获得 html 格式的电子邮件。请在这方面帮助我。

```
 require_once "Mail.php";
 $name="Me";
 $mail_from="info@domain.com";
 $subject=$mail_from." Emails";

 $message = " 
 <html> 
  <body bgcolor=#DDDDDD> 
   YOUR HTML EMAIL
  </body> 
 </html> 
 "; 

 $From="from: $name <$mail_from>"; 

  $headers  = "From: $From\r\n"; 
  $headers  = 'MIME-Version: 1.0' . "\r\n";
  $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

  $to = "Shop <info@domain.com>";

  $from = "Contact $name <info@domain.co.uk>";

  $host = "mail.exclusivehosting.net";
  $username = "info@domain.co.uk";
  $password = "(hello)";

  $headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);
  $smtp = Mail::factory('smtp',
  array ('host' => $host,
  'auth' => true,
  'username' => $username,
  'password' => $password));

  $mail = $smtp->send($to, $headers, $message);

  if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
  } else {
  //echo("<p>Message successfully sent!</p>");
  echo'<table width="800" border="0" align="center" >
  <td>';
  echo "We've recived your contact information, we will get back soon!";
echo'</td>
</table>';
  } 
```

因为我收到以下电子邮件

```
 <html> 
  <body bgcolor=#DDDDDD> 
  YOUR HTML EMAIL
  </body> 
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:23:06.567

您可以使用以下方法。

```
function sendMail($email, $subject, $message)
{
    $supportEmail = 'info@abc.com';
    $from = 'Abc';
    $msg  = $message;
    $from = str_replace(' ', '-', $from);
    $frm  = $from.' <'.$supportEmail.'>';
    preg_match("<(.*)@(.*\..*)>", $frm, $match);

    ///////////////////Headers/////////////////
    $hdr='';
    $hdr.='MIME-Version: 1.0'."\n";
    $hdr.='content-type: text/html; charset=iso-8859-1'."\n";
    $hdr.="From: {$frm}\n";
    $hdr.="Reply-To: {$frm}\n";
    $hdr.="Message-ID: <".time()."@{$match[2]}>\n";
    $hdr.='X-Mailer: PHP v'.phpversion();
    $x=@mail($email, $subject, $msg, $hdr);
    if($x==0)
    {
        $email=str_replace('@','\@', $email);
        $hdr=str_replace('@','\@',$hdr);
        $x=@mail($email, $subject, $msg, $hdr);
    }
    return $x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:20:27.013

根据我所见，您正在重写脚本底部的标题。

将内容类型标头添加到数组中。

```
$headers = array (
    'From' => $from,
    'To' => $to,
    'Subject' => $subject,
    'Content-Type' => 'text/html; charset=iso-8859-1',
    'MIME-Version' => '1.0', 
```

);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:22:42.173

您可以使用：

$message_new=html_entity_decode($mesage);

并且您可以将 $message_new 变量传递给邮件功能，这样您就可以获得正确的输出。或者参考这个网址：

[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

# android - QuickContactBadge 启动活动后如何获取联系信息（即号码名称等）

> ID：13342753
> 
> 赞同：0
> 
> 时间：2012-11-12T11:18:14.087
> 
> 标签：android, android-intent, android-contacts, android-2.2-froyo

我正在开发 QuickContactBadge。我想要做的是在 QuickContactBadge 中显示我的应用程序图标，如 facebook 或 gmail，当用户按下图标时，它将启动我的应用程序一个选定的活动。当活动启动时，我想获取用户选择的电话号码。

目前我的应用程序正在显示 QuickContactBadge 并且徽章也启动了应用程序中的主要活动，但我无法获得用户启动应用程序的电话号码表单。

我的代码如下：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(getIntent().getData() != null) {
            Cursor cursor = getContentResolver().query(getIntent().getData(), null, null, null, null);
            if(cursor != null) {
                while (cursor.moveToNext()) { 
                    String contactId = cursor.getString(cursor.getColumnIndex( 
                            ContactsContract.Contacts._ID)); 
                    String hasPhone = cursor.getString(cursor.getColumnIndex( 
                            ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
                    if (Integer.parseInt(hasPhone) == 1) { 
                        // You know have the number so now query it like this
                        Cursor phones = getContentResolver().query( 
                                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                null, 
                                ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?" , 
                                new String[]{contactId}, null); 
                        while (phones.moveToNext()) { 
                            String phoneNumber = phones.getString( 
                                    phones.getColumnIndex( 
                                            ContactsContract.CommonDataKinds.Phone.NUMBER));  
                        } 
                        phones.close(); 
                    } else{
                        Toast.makeText(this, "Invalid Contact", Toast.LENGTH_SHORT).show();
                    }
                }   
            }
        }
        setContentView(R.layout.main);
    } 
```

它获取 Intent.getData 但在 hasPhone 号码上出现异常，因为列不存在并且如果我在获取电话号码无法获取它时忽略此异常，也会在代码中下降。请帮助我在哪里做错了。

我已使用此代码在 QuickContactBadge 中显示我的应用程序

```
<activity
    android:name=".SandBoxProjectActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />

        <data android:mimeType="vnd.android.cursor.item/name" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:40:11.403

我没有仔细查看您的代码，但这对我有用：

```
 // check if activity was launched from contacts
    if (getIntent().getData() != null) {
        Cursor cursor = getContentResolver().query(getIntent().getData(), null, null, null, null);
        if (cursor!=null && cursor.moveToNext()) {
            String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.CONTACT_ID));
            cursor.close();

            selectContactNumber(contactId);
        }
    }

}

private void selectContactNumber(String contactId) {
    ArrayList<String> numbersArr = new ArrayList<String>();

    // You know it has a number so now query it like this
    Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + contactId, null, null);
    while (phones.moveToNext()) {
        String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        numbersArr.add(phoneNumber);
    }
    phones.close();

    switch (numbersArr.size()) {
    case 0:
        mNumberSelectorDialog = DialogFactory.getInstance().createNoNumbersMessageDialog(this);
        mNumberSelectorDialog.show();
        break;
    case 1:
        setNumberToCall(numbersArr.get(0));
        break;
    default:
        mNumberSelectorDialog = DialogFactory.getInstance().createNumberSelectorDialog(this, numbersArr.toArray(new String[0]));
        mNumberSelectorDialog.show();
        break;
    }
} 
```

# sitecore - Sitecore 的核心数据库、主数据库和 Web 数据库有什么区别？

> ID：13342755
> 
> 赞同：23
> 
> 时间：2012-11-12T11:18:31.223
> 
> 标签：sitecore, sitecore6

Sitecore 的核心数据库、主数据库和 Web 数据库有什么区别？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T12:36:45.080

*   Master：包含所有项目的所有版本。这是内容作者与之交互的数据库，也是 Sitecore 内容编辑器使用的默认数据库。
*   Web：这仅包含项目的当前版本。这是支持实时网站的数据库。
*   核心：这个数据库有两个目的：
    1.  它包含 Sitecore 用户界面（内容编辑器、页面编辑器等）的定义。例如，您可以在此处向内容编辑器添加新的右键单击选项，或向页面编辑器添加新的功能区按钮。
    2.  它包含驱动身份验证和安全性的 ASP.NET 成员表。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-12T15:31:08.550

我建议您查看[Launch Sitecore 网站](http://www.launchsitecore.net/)以了解有关 CMS 的更多信息。

从[Sitecore Architecture](http://www.launchsitecore.net/Articles/CMS/Fundamental-Articles/Sitecore-Architecture.aspx)的页面：

> **掌握**
> 
> 主数据库是创作数据库 - 它包含任何内容或资产的所有版本。
> 
> **核**
> 
> Core 数据库是所有 Sitecore 设置，以及包含 .Net 成员资格提供程序的表（即 Sitecore 存储库中包含的用户/角色）
> 
> **网络**
> 
> Web 数据库只是最新发布的版本，是驱动实时网站的内容。因此，它是主数据库的子集，针对大小和速度进行了优化。发布内容或完成工作流的发布任务时，会将最新的内容版本从主数据库复制到 Web 数据库。
> 
> 当然，在企业部署中，您可能有多个 Sitecore 实例，它们可能共享（或不共享）数据库

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T22:22:42.073

这里有一些很好的答案，但值得注意的是，Web 数据库是默认的发布目标，并不是一成不变的。您可以将其重命名为您想要的任何名称，也可以有多个类似于“Web”的发布目标。

例如，我们有一个包含两个网站（网站和内部网）的 Sitecore 实例，因此主数据库包含两个网站的所有项目。对于发布，我们有两个目标“网站”和“内联网”，它们由不同的 SQL 服务器托管。

最终，我们的联系包括：核心；掌握; 网站; Intranet（后两个当然是原始“Web”数据库的副本）

# java - AsyncContext Servlet 3.0 客户端断开连接

> ID：13342757
> 
> 赞同：2
> 
> 时间：2012-11-12T11:18:37.590
> 
> 标签：java, servlets, asynchronous

我正在尝试使用 Servlet 3.0 AsyncContext 实现服务器发送事件。

但是当客户端断开连接时，不会调用异常。

PrintWriter writer = ctx.getResponse().getWriter(); writer.println(json); ctx.getResponse().flushBuffer();

这篇文章与这里的问题相同：[AsyncContext and I/O error handling (when peer disconnects)](https://stackoverflow.com/questions/12039939/asynccontext-and-error-handling)

# c# - 如何避免xml c#中的属性重复？

> ID：13342766
> 
> 赞同：2
> 
> 时间：2012-11-12T11:19:00.833
> 
> 标签：c#, xml

我的 XML 的一部分如下所示：

```
<IOConfig>
  <Packet Name="PacketOut" RemoteAddress="10.0.2.223" RemotePort="2020" NetworkInterface="ETH0">
    <Signal Type="float" Name="x_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="y_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="z_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="alpha_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="theta_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="phi_out" Unit="m/s" Routing="" UnityObject="CraneBoom" UnityName="Out" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="x_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="y_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="z_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="alpha_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="theta_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="phi_out1" Unit="m/s" Routing="" UnityObject="CraneSlewing" UnityName="Out1" NetworkConvert="1"></Signal>
  </Packet>
  <Packet Name="PacketIn" LocalPort="2021" NetworkInterface="ETH0">
    <Signal Type="float" Name="x_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="y_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="z_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="alpha_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="theta_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
    <Signal Type="float" Name="phi_in" Unit="m/s" Routing="" UnityObject="CraneBoomCrash" UnityName="collider1" NetworkConvert="1"></Signal>
  </Packet>
</IOConfig> 
```

所需的输出是：Out、Out1、collider1。

也就是说，不应打印 UnityName 的重复值。这可以做到吗？

代码截断了读取 UnityName 的重复值：

```
public class XMLStringReader : MonoBehaviour
{
    public string slectedItem;
    private bool editing = false;

    public string signalsa;
    public XmlReaderSettings settings;

    void OnGUI ()
    {
        if ( GUILayout.Button(slectedItem))
        {
            editing = true;
        }

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.IgnoreWhitespace = true;
        settings.IgnoreComments = true;

        using ( XmlReader reader = XmlReader.Create("D://Docs/Unity3D/cdp/UDPApplication/Components/UDPIOServer.xml", settings) ) 
        {
            while ( reader.Read() ) 
            {
                if ( reader.NodeType == XmlNodeType.Element ) 
                {
                    if ( reader.HasAttributes ) 
                    {
                        if ( reader.GetAttribute("UnityName") != null ) 
                        {
                            signalsa = reader.GetAttribute("UnityName");
                            string [] signalsCDP = {signalsa};

                            if (editing)
                            {
                                for(int i =0; i < signalsCDP.Length; i++) 
                                {
                                    if (GUILayout.Button(signalsCDP[i]))
                                    {
                                        slectedItem = signalsCDP[i];
                                        editing = false;
                                        print(signalsCDP[i].ToString());
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:32:44.833

您可以为您的任务使用[LINQ to XML ：](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

```
XElement x = XElement.Load("File containing your xml");
var list = x.Descendants("Signal")
            .Where(d => d.HasAttributes && d.Attribute("UnityName") != null)
            .Select(d => d.Attribute("UnityName").Value)
            .Distinct();
foreach (string s in list)
    Console.WriteLine(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:27:05.470

遍历所有值并使用包含检查将它们添加到 List/Dictionary/Array/Whatever。之后打印收集的值。

这是解决方案：

```
 internal static void PrintAttributeValues(XDocument scr)
    {
        List<string> values = new List<string>();
        foreach (XElement elem in scr.Descendants("Signal"))
        {
            if (!values.Contains(elem.Attribute("UnityName").Value))
            {
                values.Add(elem.Attribute("UnityName").Value);
            }
        }

        for (int j = 0; j < values.Count; j++)
        {
            Console.WriteLine(values[j]);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:29:06.963

Another way is to define the *XML Schema* for whatever XML you need apart from *Programmatic approach*. *XML Schema* ensures the compliance of the XML.

> An XML Schema describes the structure of an XML document.

Have a look at the following references:

1.  [XML Schema Tutorial](http://www.w3schools.com/schema/default.asp)
2.  [XSD Attributes](http://www.w3schools.com/schema/schema_simple_attributes.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T12:24:46.517

只需创建一个包含不同值的集合。然后检查下一个属性值是否已经在该集合中。如果没有，请将其添加到集合中并执行您需要的任何操作。

```
List<string> values = new List<string>();

using (XmlReader reader = XmlReader.Create("your path", settings)) 
{
    while (reader.Read()) 
    {
        if (reader.NodeType == XmlNodeType.Element) 
        {
            if (reader.HasAttributes) 
            {
                if (reader.GetAttribute("UnityName") != null) 
                {
                    signalsa = reader.GetAttribute("UnityName");
                    if (!values.Contains(signalsa))
                    {
                        values.Add(signalsa);
                        //rest of your code goes here...
                    }
                }
            }
        }
    }
} 
```

# javascript - 在 Javascript 中设置 img 的边距

> ID：13342771
> 
> 赞同：0
> 
> 时间：2012-11-12T11:19:16.080
> 
> 标签：javascript, html, css

下面的代码调整了一个img的边距，所以它在一个宽度为600px的div中居中。它通常可以工作，但有时不能，需要第二次调用。

编辑：忘了提：这个功能是由另一个人触发的，他将图像的来源设置为另一个，因此改变了图像。

有什么帮助吗？

```
function adjustMargin(imageId) {
var image = document.getElementById(imageId);
image.setAttribute("style", "margin: 0 " + (300 - image.clientWidth / 2).toString() + "px");
} 
```

可以在[这里](http://lukasbaumgartner.ch/test/projekte.html)看到不太好的工作示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:23:15.863

使用 CSS：

```
#imgId {
    margin: 0 auto;
    display: block;
    // you are subtracting 300px and dividing by 2 
    // so assume your image is 300px wide
    width: 300px; 
} 
```

img 标签是一个**内联**元素，`margin: 0 auto`它只适用于你必须包含在 img css 中的**块元素。**`display: block`

**中心内联**元素的替代方法是：

```
#imgId {
    text-align: center;
} 
```

两种方法的演示在[这里](http://jsfiddle.net/bruno/SGhUV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:27:17.230

首先 - 设置样式的正确方法是：

```
image.style.margin = "margin: 0 " + (300 - image.clientWidth / 2).toString() + "px"; 
```

（好吧，也许没有区别，但是`.style`propery应该用于用JS改变元素的样式）

第二 - 您确定执行该代码时图像已经加载吗？如果没有 -`image.clientWidth`可能还不可用。`onload`确定加载图像时，您可能需要使用事件来运行该代码。

第三 - 如[布鲁诺的](https://stackoverflow.com/a/13342821/1558311)回答中所述，`margin:0 auto;`将自动将您的图像置于 div 的中心，因此根本不需要 JS。

**编辑：**

但是使用第三种方法会出现问题，因为图像不是块元素。为了使其工作，请执行以下操作：

```
<div style="
    width: 600px;
"><img src="Bilder/re-tabouret/lukas_baumgartner_re_tabouret_1@b.jpg" alt="mainArticleImg" class="projektMainImg" id="01:00" style=""></div> 
```

将图像包装到具有指定宽度的 div 中并像这样更新 css：

```
img.projektMainImg {
margin: 0 auto;
max-width: 600px;
max-height: 400px;
display: block;
} 
```

（见`display:block`添加）或者简单地用指定宽度的 div 包装图像并添加`text-align:center`到它的样式（不需要显示块和边距）：

```
<div style="
    width: 600px;
    text-align: center;
"><img src="Bilder/re-tabouret/lukas_baumgartner_re_tabouret_1@b.jpg" alt="mainArticleImg" class="projektMainImg" id="01:00" style=""></div> 
```

需要 Wraper div 以使图像在左侧 600px 区域居中。否则它将相对于`<div class="projektImages">`

# mysql - 如何将 group_concat 与 group by 一起使用

> ID：13342772
> 
> 赞同：0
> 
> 时间：2012-11-12T11:19:25.567
> 
> 标签：mysql, sql, group-by, group-concat

这是我的查询：

```
 SELECT 
    O.OrderId,
    O.Number,
    (SELECT 
            CONCAT(A.Detail, ' ', C.Name, ' / ', Ci.Name)
        FROM
            kobiakinlar.Address AS A
                INNER JOIN
            County AS C ON C.CountyId = A.CountyId
                INNER JOIN
            City AS Ci ON C.CityId = Ci.CityId
        WHERE
            UserId = O.UserId) AS UserAddress,
    (SELECT 
            CASE
                    WHEN O.Status = 0 THEN 'Onay Bekliyor'
                    WHEN O.Status = 1 THEN 'Onaylandı'
                    WHEN O.Status = 2 THEN 'Reddedildi'
                END
        ) Status,
    O.Creation,
    (SELECT 
            CASE
                    WHEN O.IsDelivered = 0 THEN 'Teslim Edilmedi'
                    ELSE 'Teslim Edildi'
                END
        ) IsDelivered,
    SUM(T.Price) Price,
    GROUP_CONCAT(T.NAME) Products
FROM
    kobiakinlar.order O
        INNER JOIN
    (SELECT  
        P.Name, op.OrderId, op.Price
    FROM
        kobiakinlar.product P
    JOIN kobiakinlar.orderproduct op ON op.ProductId = P.productId
 ) T ON O.orderId = T.orderId
        INNER JOIN
    address A ON A.AddressId = O.AddressId 
```

它返回：

![在此处输入图像描述](../Images/d0a7c6600237eaef19e21b6c44d4d26f.png)

但我想试试这个：

![在此处输入图像描述](../Images/3612ca703afaf14fbea7a872bd4c264a.png)

我应该怎么办？你对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:15:07.193

您想要的语法是：

```
group_concat(distinct t.name separator ',') as Products 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:00:50.343

I changed my quert with this:

```
 SELECT op.OrderId,
    O.Number,    
    SUM(op.Price) Price,
    (SELECT CONCAT(A.Detail, ' ',C.Name, ' / ', Ci.Name) FROM kobiakinlar.Address AS A
                INNER JOIN County AS C ON C.CountyId = A.CountyId
                INNER JOIN City AS Ci ON C.CityId = Ci.CityId
                WHERE UserId = O.UserId) AS UserAddress,
   ( SELECT CASE WHEN O.Status =0 THEN 'Onay Bekliyor'  WHEN O.Status =1 THEN 'Onaylandı' WHEN O.Status = 2 THEN 'Reddedildi' END) Status,
    O.Creation,
    ( SELECT CASE WHEN O.IsDelivered =0 THEN 'Teslim Edilmedi' ELSE 'Teslim Edildi' END) IsDelivered,
    group_concat(P.Name) Product
FROM
    kobiakinlar.product P
        JOIN
    kobiakinlar.orderproduct op ON op.ProductId = P.productId
        JOIN
    kobiakinlar.order O ON O.orderId = op.OrderId
   JOIN 
kobiakinlar.address A ON A.addressId = O.AddressId
GROUP BY op.OrderId 
```

# javascript - Symfony2 Facebook 连接 - 使用 js sdk 登录后重定向

> ID：13342775
> 
> 赞同：0
> 
> 时间：2012-11-12T11:19:35.797
> 
> 标签：javascript, facebook, sdk, symfony-2.1

我正在使用 javascript sdk 在我的 Symfony2.1 公司网站上实现 Facebook 连接。

我正在使用的以下代码可以正常工作：

```
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId  : 'my-app-id', // App ID
            cookie : true,
            xfbml  : true,
            oauth  : true
        });
    };

    function after_click() {
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                window.location = "{{ hwi_oauth_login_url('facebook') }}";
            }
        });
    }

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { window.fbAsyncInit(); return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.onload = window.fbAsyncInit;
        js.src = '//connect.facebook.net/fr_FR/all.js';
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script>

<div class="fb-login-button m_y" scope="email,user_birthday" onlogin="after_click()"></div> 
```

我面临的问题是，我正在拼命寻找一种在用户登录后将用户重定向到当前页面的方法。现在的行为是用户总是被重定向到我网站的主页。

我知道使用 php sdk 时有一个 redirect-uri 参数，我正在寻找与 js sdk 类似的东西，我不得不说我很难找到它。

来自`window.location = "{{ hwi_oauth_login_url('facebook') }}";`Symfony2 OAuth Bundle，用于管理 Facebook 连接。也许我需要告诉 OAuth Bundle 在成功登录后重定向到哪里，但也找不到真正的解决方案。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:37:18.147

好的，这实际上很简单，只需添加`use_referer: true`我的 security.yml 就可以了：

```
security:
    ...
    firewalls:
        portal_area:
            ...
            oauth:
                resource_owners:
                    facebook:      "/login/check-facebook"
                login_path:        /connect
                failure_path:      /connect
                always_use_default_target_path: false
                default_target_path: /
                target_path_parameter: _target_path
                use_referer: true 
```

解决了。

# mysql - 简单的 MySQL 表设计

> ID：13342783
> 
> 赞同：1
> 
> 时间：2012-11-12T11:20:00.003
> 
> 标签：mysql, sql, database-design, entity-attribute-value

我认为我应该算作数据库新手，所以把这个问题当作一个新手问题来阅读。我目前创建了一个表，其中包含许多主机的环境变量，如下所示：

```
create table envs ( 
  host varchar(255), 
  envname varchar(255), 
  envvalue varchar(8192), 
  PRIMARY KEY(host, envname)
); 
```

非常简单，一张表包含我需要的所有数据。常见操作是获取给定主机的所有环境变量，另一个是获取给定主机的给定环境变量，第三个示例操作是获取所有主机的给定环境变量并列出重复项。

性能预计不会成为问题，可能会有数十台主机，每台主机数十个变量，平均每秒最多 1 个查询。

现在我读到拥有复合主键不一定是个好主意。对于上述用例，这是真的吗？如果是真的，我应该如何更改数据库设计？如果不是，上述单表数据库是否适合我上面列出的用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:28:21.317

我在这里没有看到主键有问题。主键的语义是唯一标识键值的非键属性值。正如我假设对于一个主机和一个 envname 最多有一个 envvalue 主键非常有意义。

可能有些人反对复合主键，因为他们害怕性能问题。然而，性能考虑永远不应该影响主键的选择。许多数据库系统会自动为主键创建索引结构；这种索引结构的选择会影响性能。但是，此选择大多可以手动更改，如果您确实遇到性能问题，应该稍后再进行更改。

您的单表设计和主键选择很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:27:16.670

> 现在我读到拥有复合主键不一定是个好主意。对于上述用例，这是真的吗？

否。在 上使用复合主键`(host, envname)`。

> 如果是真的，我应该如何更改数据库设计？

不适用。

> 如果不是，上述单表数据库是否适合我上面列出的用途？

是的：它被称为[实体-属性-值模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:33:39.770

这是一个坏主意，因为您多次存储**唯一****值**（主机、环境名称）。

 **如果您要将主机名从*srv01*更改为 *srv01_new* 会怎样？您必须更改表中 srv01 的**每一次***出现*。如果有一天，您决定需要创建一个新表来保存有关每个主机的附加信息，该怎么办。

现在，如果您更改主机名，您也必须更改这些信息。

回答您的问题：这不是**性能**问题，而是**规范化**问题。

数据库通常应尽可能标准化。如果您足够感兴趣，[请继续阅读](http://en.wikipedia.org/wiki/Database_normalization)。

您应该为您的主机创建一个表，将唯一的**id** (int) 作为主键，并将唯一的（索引）**名称**作为主机名。

然后，您的表应该只引用主机的**id**，而不是**name**。这样，您的主机名仅在整个数据库中存储*一次*，并且可以更改为您想要的任何内容，而不会破坏其他表。

* * *

如果您的环境名称也是唯一的，您应该为它们创建另一个表，其布局与主机表（id、名称）相同。

然后，您的组合表存储*主机*的*id 和 environment*的 id以及值。您当然必须保留组合的主键，因此主机/环境的每个组合都是唯一的并且易于索引。

然后，您将拥有具有附加属性和完美规范化的多对多关系。**

# python - 导入 cv2（Python）时的非法指令（核心转储）

> ID：13342789
> 
> 赞同：1
> 
> 时间：2012-11-12T11:20:37.287
> 
> 标签：python, opencv

我使用这些标志编译了 OpenCV 2.4.3：

```
-D CMAKE_BUILD_TYPE=RELEASE -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_TBB=ON 
```

cmake (2.8.7) 表示它可能在检测 Python lib (2.7.3) 时遇到问题，尽管构建已成功完成。但是，下面是我在 python 中导入 cv2 时的错误

```
Illegal instruction (core dumped) 
```

我对此进行了搜索，但没有找到与 OpenCV 相关的任何内容。如果这很重要，我正在使用 Ubuntu 12.04 Server 32bit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:58:23.353

我在 CMake 配置过程中启用了 AVX 指令，并且所有 OpenCV 浮点代码都有非法指令异常。我现在正在重新编译 OpenCV，并关闭了该选项。只有新的 CPU 支持 AVX，2011 及更高版本，而我的 i7-920 是 2008 年的。

# java - log4j appender：缓冲持有者：仅在错误时写入文件

> ID：13342801
> 
> 赞同：4
> 
> 时间：2012-11-12T11:21:24.277
> 
> 标签：java, log4j, slf4j

我正在研究创建一个新记录器以在内部保存日志语句直到发生错误的想法。

所以在我正在研究的系统中，它是一个序列过程（没有并行工作，具有设定的起点和终点）。我想让我的 info() 行缓冲在内存中，如果发生错误，最后将它们刷新，或者如果它成功则不要费心记录它们。

我不太担心内存使用，一次只有 15 行（跨多个类）。但由于它每秒可以处理 100 条项目（每个项目创建 15 行），因此日志记录可能会变得冗长，包含不需要的数据。

另一个选项是记录到一个可以跟踪的主文件。然后，如果发生错误，将最后一个缓冲区刷新到 ERROR 日志。

在我创建自己的之前，有谁知道 SLF4J-LogWriter 或 LOG4J-Appender 已经这样做了？

我可以看到[http://sling.apache.org](http://sling.apache.org) (org.apache.sling.scripting.core.impl.LogWriter) 已经做了类似的事情，但可能需要我破解代码。

谢谢杰夫波特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:55:38.420

我对 log4j 和 logback 做了同样的事情；AFAIK，没有现成的解决方案。

为了更有用，我的实现缓冲了所有级别的日志消息，您可以配置每个级别保留的消息数量。

当记录错误时，我按顺序转储所有消息。

一些评论：

*   每个级别创建一个缓冲区。这使得在每个级别保留 N 条消息变得非常简单（其中 N 取决于级别；您通常需要比 INFO 消息更多的 DEBUG 消息）。
*   您将需要一个`AtomicInteger`or`AtomicLong`给每条消息一个唯一的 ID。稍后您将需要将它们从不同的缓冲区中排序。
*   您将需要使用 DEBUG 阈值运行根记录器，因为任何附加程序都不会看到低于根记录器级别的消息。
*   您必须在所有其他附加程序中配置一个阈值过滤器。
*   由于大多数操作都是在内存中进行的（几乎没有日志消息会写入磁盘），这实际上并没有听起来那么糟糕。
*   这在[logback](http://logback.qos.ch/)中实现比 log4j 简单得多。

# python - 机械化 submit() 方法的 urllib 代码等效项是什么？

> ID：13342802
> 
> 赞同：3
> 
> 时间：2012-11-12T11:21:24.107
> 
> 标签：python, mechanize, urllib

我不确定标题是否足够清楚，所以这是怎么回事：

大约 3 周前我开始学习 Python，最近我给自己一个任务——登录一个网站，然后阅读特定页面，然后在同一页面上发表评论，所有这些都使用 Python scrypt。我在文档中进行了搜索，发现 urllib、urllib2 和 cookielib 模块正是我想要的。所以我想出了这个代码：

```
import urllib, urllib2, cookielib
import re

url_page = 'http://www.example.net/page/'
url_login = 'http://www.example.net/login.php'
url_post = 'http://www.example.net/post.php'

def main():

    #login data
    username = 'user1'
    password = 'user1'

    cj = cookielib.CookieJar()
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

    login_data = urllib.urlencode({'j_user' : username, 'j_pass' : password})
    opener.open(url_login, login_data)

    opener.open(url_page)    

    #comment is in string
    s = "abcd"

    #post data
    post_data = urllib.urlencode({'com' : s})
    opener.open(url_post, post_data)

if __name__=='__main__':
    main() 
```

第一部分（登录）工作正常，我登录到网站，我可以得到页面。但什么也没发生 - 它无法发表评论。然后，我在这个网站上发现该`mechanize`模块是网页浏览的最佳解决方案。所以，我找到了这个脚本并根据我的目的对其进行了调整：

```
import mechanize
import cookielib
import urllib
import re

#required addresses
url_page = 'http://www.example.net/page/'

def main():
    br = mechanize.Browser() 
    cj = cookielib.LWPCookieJar()
    br.set_cookiejar(cj)

    br.set_handle_equiv(True)
    br.set_handle_gzip(True)
    br.set_handle_redirect(True)
    br.set_handle_referer(True)
    br.set_handle_robots(False)

    br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

    r = br.open(url_page)

    #selecting form
    br.select_form(nr=2)
    #setting inputs 
    br.form['j_user'] = 'user1'
    br.form['j_pass'] = 'user1'

    #login
    r = br.submit()

    r = br.open(url_page)

    s = "abcd"

    #posting
    br.select_form(nr=4)
    br.form['com'] = s
    br.submit()

if __name__ == '__main__':
    main() 
```

脚本运行完美 - 它发布评论。

所以我的问题是 - 第一个脚本的问题在哪里？为什么在第一个脚本中发表评论没有给出结果？它缺少什么吗？

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:46:46.123

快速浏览一下 mechanize 源代码，我发现 mechanize 最终使用 urllib2.Request 实例并调用它的 add_data 成员。文档说 Request 设置了一个用户代理。您的网络服务器是否可能因为缺少或无效的用户代理而拒绝发布？

在旧的 PyMOTW 帖子中有一个关于做你想做的事情的很好的教程。[http://www.doughellmann.com/PyMOTW/urllib2/](http://www.doughellmann.com/PyMOTW/urllib2/) 它链接到有价值的资源，例如 Michael Foord 丢失的手册。[http://www.voidspace.org.uk/python/articles/urllib2.shtml](http://www.voidspace.org.uk/python/articles/urllib2.shtml)

看起来 HttpHandler 在请求中添加了 Content-Type: application/x-www-form-urlencoded 的标头。您可以尝试在第一种情况下添加它。它还设置 Content-Length 标头。

[http://hg.python.org/cpython/file/457c0c9c7893/Lib/urllib2.py#l1112](http://hg.python.org/cpython/file/457c0c9c7893/Lib/urllib2.py#l1112)

```
post_data = urllib.urlencode({'com' : s})
post_headers_and_data = "Content-Type: application/x-www-form-urlencoded\nContent-Length: {0}\n\n{1}".format(len(post_data), post_data)
opener.open(url_post, post_headers_and_data) 
```

# apache-flex - 如何在flex中将字符串转换为日期？

> ID：13342803
> 
> 赞同：1
> 
> 时间：2012-11-12T11:21:28.483
> 
> 标签：apache-flex, date

实际上在我的 Flex Application DataGrid 列中得到一个值，例如`Sat Sep 1 00:00:00 GMT+0530 2012` 如何将此字符串转换为日期之类`2012/09/01`

我正在转换字符串日期，但它给出了`null`价值......听到的是我的示例代码

```
var startDS:String = saveDataGrid.selectedItem.startDate;
var sDate:Date=DateField.stringToDate(startDs,"YYYY/MM/DD");
Alert.show(sDate+"--===--"+startDS);//Alert giving  null--===--Sat Sep 1 00:00:00 GMT+0530 2012 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:39:03.273

```
var startDS:String = "10022008";

var sDate:Date=DateField.stringToDate(startDS,"MMDDYYYY");

Alert.show(sDate+"--===--"+startDS); 
```

您可能还需要浏览一下[http://livedocs.adobe.com/flex/3/html/help.html?content=formatters_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=formatters_4.html)

输出将是，“Thu Oct 2 00:00:00 GMT+0530 2008--===--10022008”

# java - 在 Java 中更改 AD 用户过期密码

> ID：13342808
> 
> 赞同：0
> 
> 时间：2012-11-12T11:22:24.403
> 
> 标签：java, ldap, jndi

我正在使用 JNDI 更改 LDAP 用户的密码。在大多数情况下（当用户密码未过期时），此代码可以正常工作：

```
public InitialLdapContext connect(String url, String securityPrincipal, String password) throws AuthenticationException, NamingException {
        System.setProperty("javax.net.ssl.trustStore", truststore);
        Properties env = new Properties();
        env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.PROVIDER_URL, url);
        env.put(Context.SECURITY_PRINCIPAL, "EE\\" + securityPrincipal);
        env.put(Context.SECURITY_CREDENTIALS, password);
        env.put(Context.SECURITY_PROTOCOL, "ssl");
        env.put("java.naming.ldap.version", "3");
        env.put(Context.REFERRAL, "follow");
        return new InitialLdapContext(env,null);
    } 
```

但是当密码过期的用户尝试更改它时，我的应用程序会抛出：

```
Exception: javax.naming.AuthenticationException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C0903A9, comment: AcceptSecurityContext error, data 773, v1db1 ]
          com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3041)
          com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2987)
          com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2789)
          com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2703)
          com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:293)
          com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:175)
          com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:193)
          com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:136)
          com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(LdapCtxFactory.java:66) 
```

所以我的问题是：是否可以更改 LDAP 过期密码？如果可能的话，然后告诉如何。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:29:09.127

如果您使用密码策略覆盖，则必须使用更改密码扩展请求。JDK 不支持它，但我已在[Oracle Java JNDI 论坛](https://forums.oracle.com/forums/thread.jspa?threadID=1155421&tstart=0)中发布了它的代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-13T10:59:24.187

该问题已通过在 Ad 中创建超级用户解决，该用户有权更改每个 AD 密码。并且当 AD 用户密码过期时，超级用户会更改他的密码。

# java - 在 java swing 的 jeditorpane 中突出显示一些单词

> ID：13342809
> 
> 赞同：2
> 
> 时间：2012-11-12T11:22:38.337
> 
> 标签：java, swing, awt, jeditorpane, swing-highlighter

我正在开发一个 Swing 应用程序，我必须在其中显示**HTML**文件`JEditorPane`。我必须突出显示一些文本，例如对于所有出现的**boy**。我正在使用以下代码，但它突出显示了以下代码的整个文本`JEditorPane`：

```
try
{          
    javax.swing.text.DefaultHighlighter.DefaultHighlightPainter highlightPainter = 
        new javax.swing.text.DefaultHighlighter.DefaultHighlightPainter(Color.YELLOW);
    textPane.getHighlighter().addHighlight(startPos, endPos, 
    highlightPainter);
}
catch(Exception ex)
{
} 
```

但它突出了整个文档。在这种方法中 `startPos` 和的作用是`endPos`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-05T13:06:47.020

您必须先定义关键字，这意味着您需要迭代整个内容，当单词等于关键字时，添加HighLight。除了 JeditorPane 之外，您不会为您识别关键字。

# wcf - 一个地址上的多个 WCF 服务实现？

> ID：13342810
> 
> 赞同：0
> 
> 时间：2012-11-12T11:22:38.347
> 
> 标签：wcf

我目前有几个 C# 服务实现类，每个类都实现了几个服务契约接口。每个服务实现类都在一个单独的地址，但它的所有服务契约接口都在同一个地址。

想要使用来自多个服务的接口的客户端当前需要知道多个地址。

我想知道是否可以让多个实现类共享一个地址。例如，当前，客户端可能连接到 Browse.svc、Data.svc、Report.svc 等。我可以重新配置以便客户端只需要转到 Service.svc 吗？

在我看来，SOAP Action 为 WCF 提供了一种方法来告诉它应该将请求定向到哪个服务实现类，因此这可能是可能的。

我真的不想把我所有的实现都塞进一个大的服务类中。

下面的 Microsoft 文章谈到了这类事情，但似乎没有解决多个服务实现类的问题。

[http://msdn.microsoft.com/en-us/library/aa395210.aspx](http://msdn.microsoft.com/en-us/library/aa395210.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:38:28.460

如果您想要一项服务，它可以响应多个服务请求。看看[http://davybrion.github.com/Agatha/](http://davybrion.github.com/Agatha/)

它是 WCF 的请求/响应模式的实现。

# jquery - 按类名隐藏父 div

> ID：13342814
> 
> 赞同：2
> 
> 时间：2012-11-12T11:22:43.947
> 
> 标签：jquery

我的 HTML 看起来像：

```
<div class="group_box">
  <div>
     <div>
       ... <!-- I don't know haw many div's here -- >
       <a class="mark_as_read" ...>
     </div>
  </div>
<div>

....

<div class="group_box">
  <div>
     <div>
       ... <!-- I don't know haw many div's here -- >
       <a class="mark_as_read" ...>
     </div>
  </div>
<div> 
```

当用户单击“mark_as_read”时，我想隐藏父“group_box”。

像这样的东西：

```
<script type="text/javascript">
  $().ready(function() {
    $('.mark_as_read_link').bind('click', function() {
      alert($(self));
      $(self).parent('.group_box').hide();
      return false;
    });
 });
</script> 
```

但它不起作用。在这种情况下，我不知道 $(this) 是什么......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T11:25:35.490

`.parent()`您可以使用该方法代替，该[`.closest()`](http://api.jquery.com/closest/)方法将遍历 DOM，直到找到与选择器匹配的元素。

```
<script type="text/javascript">
  $().ready(function() {
    $('.mark_as_read_link').on('click', function() {
      $(this).closest('.group_box').hide();
      return false;
    });
 });
</script> 
```

在示例中，我使用[`.on()`](http://api.jquery.com/on/)而不是`.bind()`. 从 jQuery 1.7 开始，`.bind()`已弃用，支持`.on()`附加事件侦听器。

**更新：**

正如 Joonas 在他的评论中指出的那样，可以使用该`.parents()`方法，而不是`.closest()`上面建议的方法。不同之处在于`.parents()`，即使遇到与选择器匹配的元素，它也会继续向上遍历 DOM，而`.closest()`一旦找到匹配项，它将停止遍历。在这种情况下，我认为`.closest()`更适合此目的，但如果您考虑改用，以下[是文档](http://api.jquery.com/closest/)`.parents()`中所述的差异：

**.closest()**

*   从当前元素开始
*   向上移动 DOM 树，直到找到匹配的选择器
*   返回的 jQuery 对象包含原始集合中每个元素的零个或一个元素

**。父母（）**

*   从父元素开始
*   沿着 DOM 树向上移动到文档的根元素，将每个祖先元素添加到临时集合中；然后，如果提供了选择器，它会根据选择器过滤该集合
*   返回的 jQuery 对象包含原始集合中每个元素的零个或多个元素

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T11:24:14.893

你必须使用 jQuery 函数`closest()`。它返回最近的父级：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.mark_as_read_link').click(function(){
      $(this).closest('.group_box').hide();
      return false;
    });
 });
</script> 
```

ps $(self) 毫无意义。对当前元素使用 $(this)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:30:22.040

onYou 是这样的

```
<script type="text/javascript">
   $().ready(function() {
     $("body").on('click','.mark_as_read', function() {
         $(this).closest('.group_box').hide();
        return false;
      });
   }); 
```

而是使用 On ,bind 已弃用

# sql - 实体框架 - 属性 IN 子句用法

> ID：13342817
> 
> 赞同：36
> 
> 时间：2012-11-12T11:23:01.467
> 
> 标签：sql, entity-framework, entity-framework-5

我需要在对我的数据库的查询中使用“普通”WHERE 和 IN 子句通过各种字段过滤一些实体，但我不知道如何使用 EF 来做到这一点。

这是方法：

*数据库表*

```
Licenses
-------------
license INT
number INT
name VARCHAR
... 
```

*EF 中所需的 SQL 查询*

```
SELECT * FROM Licenses WHERE license = 1 AND number IN (1,2,3,45,99) 
```

英孚代码

```
using (DatabaseEntities db = new DatabaseEntities ())
{
    return db.Licenses.Where(
        i => i.license == mylicense 
           // another filter          
        ).ToList();
} 
```

我尝试过使用 ANY 和 CONTAINS，但我不知道如何使用 EF 来做到这一点。

**如何在 EF 中进行此查询？**

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-12T11:29:07.460

```
int[] ids = new int[]{1,2,3,45,99};
using (DatabaseEntities db = new DatabaseEntities ())
{
    return db.Licenses.Where(
        i => i.license == mylicense 
           && ids.Contains(i.number)
        ).ToList();
} 
```

should work

# iphone - 在 AePubReader iPhone SDK 中突出显示和注释文本

> ID：13342818
> 
> 赞同：2
> 
> 时间：2012-11-12T11:23:03.113
> 
> 标签：iphone, ios, epub

有什么方法可以获取标记的文本位置并在 ePub 文件上做笔记？我想在 ePub 文件上突出显示并添加注释功能。

我指的是[https://github.com/fedefrappi/AePubReader](https://github.com/fedefrappi/AePubReader)作为一个基本的开始。此代码已经促进了搜索和字体大小变化功能。

无论如何，请建议我使用这个库来满足我的要求。

提前致谢。

# windows-phone-7 - WP7 滑块奇怪的行为

> ID：13342825
> 
> 赞同：0
> 
> 时间：2012-11-12T11:23:58.910
> 
> 标签：windows-phone-7, slider, drag

我正在开发 Windows Phone 7 应用程序。我在几个页面上有滑块控件。但是，当我转到我的应用程序中的某个页面时，每个页面中的所有滑块控件都表现得很奇怪。

症状是用户只能在很短的范围内拖动滑块上的拇指。

我提到的特定页面的代码和 XAML 没有问题。为什么它会导致所有滑块行为错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:54:28.627

问题是使用工具包 Gesture 会导致 Slider 行为异常。因此，当开始在 Slider 上操作时，您应该禁用 Gesture 监听器，然后在停止在 Slider 上操作时启用它。

```
<Slider Height="84" Name="fixedSlider" ManipulationStarted="disableGestures" ManipulationCompleted="restoreGestures" />

GestureType prevGestureType;
private void disableGestures(object sender, ManipulationStartedEventArgs e) 
{
    prevGestureType = TouchPanel.EnabledGestures;
    TouchPanel.EnabledGestures = GestureType.None;
    fixedSlider.IsHitTestVisible = false;
}

private void restoreGestures(object sender, ManipulationCompletedEventArgs e) 
{
    TouchPanel.EnabledGestures = prevGestureType;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:38:15.553

[Slider](http://msdn.microsoft.com/en-us/library/system.windows.controls.slider%28v=vs.95%29.aspx)类具有[SmallChange](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.rangebase.smallchange%28v=vs.95%29.aspx)属性，如果您查看滑块模板，您会看到，当用户点击滑块时 - 值仅在微小变化时发生变化。如果您想避免这种情况，您需要创建自定义滑块行为。

# c - fscanf() 不想在读取前两个值后读取值

> ID：13342828
> 
> 赞同：0
> 
> 时间：2012-11-12T11:24:05.630
> 
> 标签：c

基本上，我正在从文本文件中读取一堆值，它们的布局如下：

```
4 1 1 2 3 4 
```

但是下面的代码块不想读取前两个 int 类型值之后的 double 类型值：

```
int matrix_read(struct matrep *mat, const char *filename)
{
    FILE *fptr;
    unsigned m, n;
    double *ptr = NULL;
    int i, j;
    double x;
    if ((fptr = fopen(filename, "r")) == NULL)
    {
        fprintf(stderr, "Cannot Open File %s\n", filename);
        return -1;
    }
    if(fscanf(fptr, "%u", &m) != 1)
    {
        fprintf(stderr, "Failed to read number of rows\n");
        return -1;
    }
    if(fscanf(fptr, "%u", &n) != 1)
    {
         fprintf(stderr, "Failed to read number of columns\n");
        return -1;
    }

    mat->matrix = (double *)malloc(sizeof(double) * m * n);
    if (mat->matrix == 0)
    {
        fprintf(stderr, "Failed to allocate %d*%d matrix\n", m, n);
        return -1;
    }
    ptr = mat->matrix;

    for (i = 0; i < m; i++)
    {
        for (j = 0; j < n; j++)
        {
            double x;
            if (fscanf(fptr, "%f", &x) != 1)
            {
                fprintf(stderr, "Failed to read element matrix[%d,%d]\n", i, j);
                free(mat->matrix);
                mat->matrix = 0;
                mat->cols = 0;
                mat->rows = 0;
                return -1;
            }
            *ptr++ = x;//Here it reads nothing, it just gives me: -9.2559604281615349e+061
        }
    }
    fclose(fptr);
    mat->cols = m;
    mat->rows = n;

    return 0;  // Success   
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:28:37.973

```
fscanf(fptr, "%f", &x) 
```

对于扫描`double`s，您需要`%lf`格式。`%f`扫描一个`float`。使用错误的格式会调用未定义的行为，可能发生的情况是扫描的值被转换为 a`float`然后存储在指向的前四个字节中`double`。

# python - 简单扭曲的 SOAP 服务器中返回的 xml 元素的值

> ID：13342832
> 
> 赞同：1
> 
> 时间：2012-11-12T11:24:24.840
> 
> 标签：python, soap, twisted, zsi

我正在尝试更改我的简单扭曲 SOAP 服务器返回的 XML 元素的值。（我用 . 生成了服务器`wsdl2py --twisted --complexType Myservice.wsdl`。）

我的返回元素 XSD 如下所示：

```
<xs:element name="ReplyMessage" type="ReplyTypeEnum">
</xs:element>
<xs:simpleType name="ReplyTypeEnum">
    <xs:restriction base="xs:string">
        <xs:enumeration value="OK" />
        <xs:enumeration value="NOT_VALID" />
        <xs:enumeration value="ERROR" />
    </xs:restriction>
</xs:simpleType>
</xs:simpleType> 
```

我的服务器当前返回这个：

```
<SOAP-ENV:Envelope>
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:ReplyMessage/>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我想返回这个（即值`'OK'`）：

```
<SOAP-ENV:Envelope>
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:ReplyMessage>OK</ns1:ReplyMessage>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我应该更改值的 Python 代码如下所示：

```
def __composeResponse_OK(self, response):
    response._ReplyMessage = 'OK'
    return response 
```

但这显然是行不通的。我尝试了其他一些方法，但它们都不起作用。我根本无法更改返回响应的值！

有没有办法将值`'OK'`（或`'ERROR'`或`'NOT_VALID'`）添加到我的回复中？

# scala - Scala：仿射变换

> ID：13342833
> 
> 赞同：5
> 
> 时间：2012-11-12T11:24:28.217
> 
> 标签：scala, graphics, java-2d

在 Scala 中实现仿射变换的最佳方法是什么？标准库或 Spire 中似乎没有任何内容。AWT AffineTransformation 类非常易变，我绝对不想改变 Graphics2D 类。是自己编写还是将 Java 类包装在值返回函数中更有效，还是已经有合适的 Scala 库？

编辑：我不认为基本方程对编码来说太具有挑战性。复杂性似乎是增加了 90/180/270 旋转的特殊情况并处理 int/double/float 转换以获得全面的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:37:18.467

我同意评论，不要自己投入精力来实施公式。

```
import java.awt.geom.{AffineTransform => JTransform}

object AffineTransform {
   implicit def toJava(at: AffineTransform): JTransform = at.toJava
   implicit def fromJava(j: JTransform): AffineTransform = {
      import j._
      AffineTransform(getScaleX,     getShearY,
                      getShearX,     getScaleY,
                      getTranslateX, getTranslateY)
   }
   val identity: AffineTransform = new JTransform()
}
final case class AffineTransform(scaleX:     Double, shearY:     Double,
                                 shearX:     Double, scaleY:     Double,
                                 translateX: Double, translateY: Double) {

   def toJava: JTransform = new JTransform(scaleX,     shearY,
                                           shearX,     scaleY,
                                           translateX, translateY)

   override def toString = "AffineTransform[[" + 
      scaleX + ", " + shearX + ", " + translateX + "], [" +
      shearY + ", " + scaleY + ", " + translateY + "]]"

   def scale(sx: Double, sy: Double): AffineTransform = {
      val j = toJava; j.scale(sx, sy); j
   }
   // ... etc
} 
```

测试：

```
AffineTransform.identity.scale(0.5, 1.0) 
```

# ehcache - 将 ehcache 与兵马俑一起使用时的 IgnoreSizeOf 注释

> ID：13342843
> 
> 赞同：5
> 
> 时间：2012-11-12T11:24:53.650
> 
> 标签：ehcache, terracotta

我在我的应用程序中使用 ehcache 和兵马俑。当我将 ehcache 与兵马俑一起使用时，我的响应时间增加了 700 倍。我认为兵马俑正在花时间测量物体的大小，因为它给了我警告：

> net.sf.ehcache.pool.sizeof.ObjectGraphWalker checkMaxDepth 警告：尝试计算对象图的大小时已达到配置的 1,000 个对象引用的限制。如果大小调整操作继续进行，可能会出现严重的性能下降。这可以通过将 CacheManger 或 Cache 元素 maxDepthExceededBehavior 设置为“abort”或使用 @IgnoreSizeOf 注释添加停止点来避免。如果在配置的限制下性能下降不是问题，请使用 CacheManager 或 Cache 元素 maxDepth 属性提高限制值。有关详细信息，请参阅 Ehcache 配置文档。

当我在课堂上使用 @IgnoreSizeOf 注释时，响应时间减少了很多。我的问题是使用 @IgnoreSizeOf 注释是否有任何缺点。对于它正在使用什么以及它如何减少我的应用程序的响应时间请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T22:00:02.263

此注释与 Terracotta 聚类无关。我猜你在这个主题上发布了另一个问题。

@IgnoreSizeOf 注释将具有 sizeOfEngine，它测量缓存中条目的内存占用，忽略缓存条目的注释类（或整个包）或子图（注释字段）的实例。

因此，如果您缓存的对象图具有“共享”子图，您将在该图以注释开头的字段进行注释。如果您忽略*所有内容*，则*不会*调整大小，并且 maxBytesLocalHeap 设置没有语义（您最终将遭受 OOME 的影响）。

您需要了解正在缓存的对象图才能正确使用注释。有关更多详细信息，请参阅[http://ehcache.org/documentation/configuration/cache-size#built-in-sizing-computation-and-enforcement](http://ehcache.org/documentation/configuration/cache-size#built-in-sizing-computation-and-enforcement)。

现在，对于您所看到的性能问题，您可能希望在使用和不使用 maxBytesLocalHeap 设置以及使用和不使用集群的情况下进行测试，以试图找出您的问题。但我怀疑你的缓存可能比你预期的要多，导致大人物的足迹，以及对数据进行聚类的开销......

# embedded - USB CDC 设备停止

> ID：13342847
> 
> 赞同：2
> 
> 时间：2012-11-12T11:25:13.850
> 
> 标签：embedded, usb, avr, cdc

我正在编写一个简单的虚拟串口设备来报告旧的串口。至此，我能够枚举设备并发送/接收字符。

在从主机到设备的不同数量的批量输出传输之后，端点似乎放弃并停止传输数据。在 PC 端，我收到一个写入错误，从 USBlyzer 跟踪判断，音乐停止在一个档位 (USBD_STATUS_STALL_PID)。但是，我的代码从未故意在该端点上发出 STALL 条件，并且生成的状态标志永远不会被设置。

鉴于发出请求和 STALL 之间经过的时间很短（<300 µs），这似乎是某种无效响应，而不是超时。在设备端，输出端点已准备就绪，缓冲区中的数据和正确的 DATA0/1 同步，但没有进一步发生。

请注意，即使在我开始发送“大量”数据之前，该设备似乎也可以长时间正常工作。据我所知，设备枚举/配置似乎也成功完成。哦，在此之后，批量输入端点继续正常工作。

作为记录，我使用的是标准的 Windows usbser.sys 驱动程序和 XMega128A4U µP。我还在多台 Windows Vista 和 7 机器上看到了相同的行为。

有什么想法我做错了什么，或者我可能会进行哪些进一步的测试来缩小范围？

[USBlyzer 日志](https://sites.google.com/site/doynax/USB%20Test%20Run.html), [USB CDC 堆栈](https://sites.google.com/site/doynax/USB%20Test.c), [测试项目](https://sites.google.com/site/doynax/USB%20Test.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:31:56.457

为了记录，这最终证明是一个振荡器问题。（显然，即使选择了 1,000 Hz USB 帧，FLL 的参考也始终为 1,024 Hz。轻微的时钟错误意味着如果数据包碰巧连续包含太多的 1 位，则偶尔会被拒绝。）

我想这个故事的寓意是在假设您对更高级别的协议有问题之前检查基础知识。同样回想起来，硬件 USB 分析仪本来是值得投资的，当出现问题时，软件替代品似乎大多会吐出通用错误代码或根本不吐出任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:49:02.847

停止输出端点可能会发生在主机端的输出缓冲区溢出时。您确定设备确实获取了它通过输出端点接收的数据 - 如果是这样，它获取数据的速度至少与发送到设备的数据一样快吗？

> 请注意，即使在我开始发送“大量”数据之前，该设备似乎也可以长时间正常工作。

这似乎是输出缓冲区溢出的提示。

# java - 替代@XmlRootElement？

> ID：13342849
> 
> 赞同：2
> 
> 时间：2012-11-12T11:25:18.277
> 
> 标签：java, rest, cxf

在将现有的有状态服务公开为 RESTfull 服务的过程中。

我不想对任何现有的 java 类进行任何更改。我已经能够配置其他注释，例如 @path、@GET 使用`spring-config.xml`

**弹簧配置.xml**

```
<!-- Inquiry Services -->
    <bean id="retrieveContactHistoryBP" class="com.csc.fs.ws.contact.history.impl.RetrieveContactHistoryBPService"/>        
    <!-- Update Services -->
    <bean id="startContactBP" class="com.csc.fs.ws.contact.impl.StartContactBPService"/>

    <!-- REST services -->
    <bean id="startContactBPRest" class="com.csc.fs.rest.contact.StartContactBP" scope="prototype" />
    <bean id="retrieveContactHistoryBPRest" class="com.csc.fs.rest.contact.RetrieveContactHistoryBP" scope="prototype" />

    <!-- Exposing beans as rest services -->
    <jaxrs:server id="restServer" address="/rest/">
        <jaxrs:model id="restModel">
            <jaxrs:resource name="com.csc.fs.rest.contact.RetrieveContactHistoryBP" path="retrieveContactHistoryBP">
                <jaxrs:operation name="retrieve" path="{partyId}" consumes="application/json" produces="application/json" verb="GET">
                    <jaxrs:param name="req" type="CONTEXT"/>
                    <jaxrs:param name="partyId" type="PATH"/>
                </jaxrs:operation>
            </jaxrs:resource>
            <jaxrs:resource name="com.csc.fs.rest.contact.StartContactBP" path="startContactBP">
                <jaxrs:operation name="startContact" path="/" consumes="application/json" produces="application/json" verb="PUT">
                    <jaxrs:param name="req" type="CONTEXT"/>
                    <jaxrs:param name="startContact" type="REQUEST_BODY"/>
                </jaxrs:operation>
            </jaxrs:resource>
        </jaxrs:model>
        <jaxrs:serviceBeans>
<!--             <ref bean="startContactBPRest"/> --> <!-- Instead configure above -->
<!--             <ref bean="retrieveContactHistoryBPRest"/> -->
        </jaxrs:serviceBeans>
        <jaxrs:extensionMappings>
            <entry key="feed" value="application/atom+xml"/>
            <entry key="json" value="application/json"/>
            <entry key="xml" value="application/xml"/>
            <entry key="html" value="text/html"/>
        </jaxrs:extensionMappings>

        <jaxrs:providers>
            <ref bean="jaxbProvider"/>
            <ref bean="jsonProvider" />
        </jaxrs:providers>
    </jaxrs:server> 
```

我面临的问题是`@XmlRootElement`. 我没有成功通过xml配置它。

尝试访问 REST 服务时出现以下错误

```
org.apache.cxf.interceptor.Fault
    org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:67)
    org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:315)
    org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
    org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:105)
    org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
    org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
    org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:108)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)

root cause 

java.lang.NullPointerException
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleOperation(WadlGenerator.java:310)
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleResource(WadlGenerator.java:253)
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleRequest(WadlGenerator.java:185)
    org.apache.cxf.jaxrs.impl.RequestPreprocessor.checkMetadataRequest(RequestPreprocessor.java:189)
    org.apache.cxf.jaxrs.impl.RequestPreprocessor.preprocess(RequestPreprocessor.java:82)
    org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:112)
    org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:88)
    org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)
    org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
    org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:105)
    org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
    org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
    org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:108)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159) 
```

那么，有没有办法在外部配置 XmlRoot 注解中的信息，这样我们就不用在 Java 代码中添加了呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:02:45.607

[来自关于jaxrs-data-bindings](https://cwiki.apache.org/CXF20DOC/jax-rs-data-bindings.html)的 Apache-cxf 文档：

> 作为使用 @XmlRootElement 和 Collection 包装器的替代方法，可以提供一个对象工厂，它会告诉 JAXB 如何编组给定类型（在 Collections 的情况下 - 它的模板类型）。另一种选择是直接从/在给定方法中返回/接受 JAXBElement。
> 
> 另一种选择是注册一个或多个能够为多种不同类型创建 JAXBContexts 的 JAX-RS ContextResolver 提供程序。默认 JAXBElementProvider 将在尝试自行创建 JAXBContext 之前首先检查这些解析器。

# iphone - 如何在 iPhone 项目中获得 UTC 时间？

> ID：13342850
> 
> 赞同：2
> 
> 时间：2012-11-12T11:25:30.167
> 
> 标签：iphone, objective-c, datetime, timezone, utc

如何在 UTC 中获取我的国家/地区时间以进行 iPhone 开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:28:33.823

这是代码，当您想设置时区和日期格式时，只需调用下面的方法。

```
-(void)setDateFormat
{
     NsDate myDate = [NSDate date];//here it returns current date of device.
    //now set the timeZone and set the Date format to this date as you want.
     NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
     NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
     [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
     [dateFormatter setTimeZone:timeZone];
     NSString *newDate = [dateFormatter stringFromDate:myDate];
    // here you have new Date with desired format and TimeZone.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:29:00.207

```
-(NSString *)UTCFormDate:(NSDate *)myDate
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    [dateFormatter setTimeZone:timeZone];
    NSString *dateString = [dateFormatter stringFromDate:myDate];
    return dateString;
} 
```

Source: [https://stackoverflow.com/a/2615847/857865](https://stackoverflow.com/a/2615847/857865)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:30:23.323

`[NSDate date]` gives you the current point in time, which may be printed in UTC, GMT, EST or any other timezone. (Representation-wise, the current point in time is the number of seconds since a reference date in UTC.)

To get the current point in time in UTC as a string, get an `NSDateFormatter` and configure it to output a timestamp using the UTC timezone.

# hadoop - Hadoop map-Reduce 程序未运行

> ID：13342851
> 
> 赞同：1
> 
> 时间：2012-11-12T11:25:31.963
> 
> 标签：hadoop, mapreduce

我是 Hadoop MapReduce 的新手。当我尝试使用以下命令运行我的 MapReduce 代码时：

```
vishal@XXXX bin/hadoop jar /user/vishal/WordCount com.WordCount.java /user/vishal/file01 /user/vishal/output. 
```

它显示以下输出：

```
 Exception in thread "main" java.io.IOException: Error opening job jar: /user/vishal/WordCount.jar     
    at org.apache.hadoop.util.RunJar.main(RunJar.java:130)          
    Caused by: java.util.zip.ZipException: error in opening zip file    
    at java.util.zip.ZipFile.open(Native Method)     
    at java.util.zip.ZipFile.<init>(ZipFile.java:131)    
    at java.util.jar.JarFile.<init>(JarFile.java:150)    
    at java.util.jar.JarFile.<init>(JarFile.java:87)    
    at org.apache.hadoop.util.RunJar.main(RunJar.java:128) 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:31:30.107

您的命令要求 Hadoop 运行 JAR，但指定的是目录。

您还在类名中添加了“.java”，这不是必需的。（这是假设你`com.WordCount`正确地写了包名 , ）。

首先在其中构建 jar `/user/vishal/WordCount.jar`（确保这是本地目录，而不是 HDFS），然后运行类名末尾不带“.java”的命令。另外，您在问题的命令末尾加了一个点，我希望在真正的命令中不存在。

```
bin/hadoop jar /user/vishal/WordCount.jar com.WordCount /user/vishal/file01 /user/vishal/output 
```

有关更多信息，请参阅[Hadoop 教程的“使用”部分](http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#Usage)。

# design-patterns - 数据库功能分解的模式？

> ID：13342856
> 
> 赞同：1
> 
> 时间：2012-11-12T11:25:41.333
> 
> 标签：design-patterns, database-design, high-load, decomposition

我们有以下问题。我们的企业应用程序在 MySQL 中有一个数据库，它的结构似乎变得过于复杂 - 有 100 多个表（它已经开发了 7 年）。

但是，大多数表与任何其他表根本没有任何关系。有一些人人都使用的通用表（字典）（大约二十个这样的表），但仅此而已。问题出现了如何使这个数据库更快、更可靠。

我读了很多关于数据库分解的文章。也就是说，您将与不同域相关的表放在不同的数据库中。例如，与运单和其他纸质资料相关的任何内容都放在名为 Papers 的数据库中，与客户及其订单相关的任何内容都放在名为 Clients 的数据库中，等等。

这里我们有两个问题：

*   用户应该将企业应用程序视为作用于单个域。开发人员必须以某种方式更改使用数据库的核心，以便它可以处理多个数据库。
*   公用表产生了一个问题。它们必须保存在单个数据库中，并且分解后不能在所有数据库中复制。因此，我们如何进行查询 SELECT * FROM A JOIN B，其中 A 和 B 在不同的数据库中（在不同的服务器上）？

这两个问题实际上解决了同一个问题——是否有任何常见的企业模式（如 GoF）来解决这个问题？我对适合 Java EE 的模式特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:48:36.457

我不一定会首先将表组移动到它们自己的数据库中 - 这会使系统更加复杂，现在您还有其他问题，例如同步多个数据库的备份。IMO 100 桌一点也不笨重。

但是，如果业务驱动需要将系统（和数据库）的功能拆分为多个系统，那么一定要这样做。显然，这将需要同时对系统进行重大更改甚至重写。

Re: 运单、发票等不幸的是，MySQL 没有像 MS SQL Server 那样实现其他 RDMS 的[Schema 。](https://stackoverflow.com/questions/1219711/mysql-create-schema-and-create-database-is-there-any-difference)您可以通过向表（PaperWaybill、PaperInvoice 等）添加前缀来模拟模式固有的命名空间。

但是，鉴于您的系统已经投入生产 7 年，现在更改表名可能是不明智的，并且确定所有依赖项可能很棘手 - 例如，可能有多个应用程序、报告、作业等都在访问这些表。

IMO，您需要深入了解为什么关系如此之少的核心原因。然而，有可能存在的关系`FOREIGN KEYS`被删除，例如出于[性能原因](https://stackoverflow.com/questions/83147/whats-wrong-with-foreign-keys)。如果这妨碍了您绘制系统图的能力，或者阻止诸如 ORM 代码生成器之类的工具创建关系，您可以将 PROD 数据库恢复到 DEV 环境并将外键添加回 DEV。同时，您会了解数据的质量——例如 FK 约束。

# powershell - 排除 get-eventlog (powershell)

> ID：13342860
> 
> 赞同：0
> 
> 时间：2012-11-12T11:26:05.117
> 
> 标签：powershell

我有一个由 powershell 中的脚本生成的报告，它向我报告多个服务器的事件日志。剧本不是我做的，是我以前的同事做的。我是 powershell 新手，刚刚开始了解它。

我想排除`EventID 110`不会造成任何伤害的 Citrix 错误事件 ( )。（与会话可靠性有关）

`get-eventlog-log application-computername`

`$server -EntryType error-after $d |select eventid,machinename,entrytype, message, source, timegenerated | ConvertTo-Html`

`-Head $h -Title "Rapport Server eventlogs" | out-file -append $Report`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:50:39.483

```
get-eventlog -log application -computername $server -EntryType error -after $d |select eventid,machinename,entrytype, message, source, timegenerated| where {$_.eventid -ne 110} | ConvertTo-Html -Head $h -Title "Rapport Server eventlogs" | out-file -append $Report 
```

# jquery - Ruby on Rails UJS

> ID：13342871
> 
> 赞同：-6
> 
> 时间：2012-11-12T11:27:04.470
> 
> 标签：jquery, ruby-on-rails, ujs

我试图将部分内容直接呈现到我的页面中，当用户单击时，将播放器添加到队列中，该播放器将从可用的播放器移动到选定的播放器中。我遇到的问题是用 jquery/ujs 做这个

时间表/_available_players.haml.html

```
.widget-box
  .widget-title
    %span.icon
      %i.icon-list-alt
    %h5 Available Players
  .widget-content.nopadding
    %table.table.table-bordered.table-hover
      %thead
        %tr
          %th Player
          %th Position
          %th Phone
          %th
      %tbody
        - @users.each do |user|
          %tr
            %td= full_name(user)
            %td
            %td= user.mobile
            %td.span1
              .btn-group
                %button.btn.dropdown-toggle{"data-toggle" => "dropdown"}
                  %i.icon-pencil
                  Selection
                  %span.caret
                %ul.dropdown-menu
                  %li{:class=>"nav-header"} User Management
                  %li= link_to "Add to #{full_name(user)} lineup", availabilities_path(:availability => {:team_id => @schedule.team_id, :user_id => user, :schedule_id => @schedule.id, :unique_id => availability_unique_id(user,@schedule) }), :remote => true, :method => :post, :class => 'addRecord'
                  %li= link_to "Put #{full_name(user)} on standby", "#" 
```

时间表/节目

```
-title("#{current_user.team.name} :: Schedule")
/ Begin Modal Form
= render 'schedules/modalform'
= render 'schedules/modaldelete'
/ Begin Notice Alert
- if notice
  #notice.alert.alert-success
    %button.close{"data-dismiss" => "alert"} ×
    %strong Success:
    = notice
.row-fluid
  .span8
    .alert.alert-info.alert-block
      %h4.alert-heading= "#{event_display(@schedule.event)} on #{schedule_time @schedule}"
      %h5.alert-heading= "#{@schedule.location.name} (#{@schedule.location.address})"
      %p.times= "Arrived at #{arrive_time(@schedule)}, Ends at #{end_time(@schedule)}"
      - if can? :manage, @schedule
        -#%h6.alert-heading Total Attending
        -#.progress
        -#  .bar.bar-success.tip-top{:style => "width: #{accepted_players(@schedule)/number_of_selected_players(@schedule)}%;", "data-original-title" => "14 out of 17 teammates (82%) have ACCEPTED notifications for this event. Click to see who they are."}= accepted_players(@schedule)
        -#  .bar.bar-danger.tip-top{:style => "width: 10%;", "data-original-title" => "14 out of 17 teammates (82%) have ACCEPTED notifications for this event. Click to see who they are."}= declined_players(@schedule)
        -#  .bar.bar-info.tip-top{:style => "width: 55%;", "data-original-title" => "14 out of 17 teammates (82%) have ACCEPTED notifications for this event. Click to see who they are."}= na_players(@schedule)
        = link_to "<i class='icon-white icon-book'></i> Close Appointments".html_safe, "#", :class => "btn btn-small btn-primary"
        = link_to "<i class='icon icon-envelope'></i> Email Attendance Report".html_safe, "#", :class => "btn btn-small"
        = link_to "<i class='icon icon-pencil'></i> Edit this #{event_display(@schedule.event)}".html_safe, "#modalEvent", :class => "btn btn-small", :data => {:toggle => "modal"}
      = link_to "<i class='icon-white icon-remove'></i> Delete Event".html_safe, "#modalDelete", :class => "btn btn-small btn-danger", :data => {:toggle => "modal"}
    = render 'schedules/available_players'
    #dynamicLoadingPanel
      = render 'schedules/named_players'
  .span4
    .widget-box
      .widget-title
        %span.icon
          %i.icon-locations
        %h5= "Event Location Map"
      .widget-content.nopadding
        %table.table.table-bordered
          %tbody
            %tr
              %td
                %img{:alt => @schedule.location.address, :src => "http://maps.google.com/maps/api/staticmap?size=300x250&maptype=roadmap&sensor=false&markers=color:blue|label:#{@schedule.location.name}|#{@schedule.location.address}"}
                .clearfix
                %span.help-block= "#{@schedule.location.name} (#{@schedule.location.address})"
    .widget-box
      .widget-title
        %span.icon
          %i.icon-availability
        %h5= "Availability Summary"
      .widget-content.nopadding
        %table.table.table-bordered
          %tbody
            %tr
              %td In
              %td
                %span.label.label-success= accepted_players(@schedule)
            %tr
              %td Out
              %td
                %span.label.label-important= declined_players(@schedule)
            %tr
              %td N/A
              %td
                %span.label= na_players(@schedule)` 
```

和 js 文件
可用性/create.js.erb

```
`$('#dynamicLoadingPanel').html("<%= escape_javascript(render(:partial => 'schedules/named_players')) %>") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:58:09.640

在我看来，问题的相关代码是这样的：

```
#dynamicLoadingPanel
  = render 'schedules/named_players' 
```

并且在某处（未在代码中显示），更新被发布到 Availabilities#create，返回的是一个新版本的 schedules/named_players 并将其动态插入到 #dynamicLoadingPanel 中的页面中。

这是我的看法：

```
# _schedules/available_players.html.haml
#dynamicLoadingPanel
  AVAILABILTY IS UNKNOWN

Choose availability:
#availabilities
  = link_to 'available', '#', :data => 'available'
  = link_to 'busy',      '#', :data => 'busy'

:javascript
  $(function(){
    $('#availabilities a').click(function(){
      $('#dynamicLoadingPanel').load(
        "/availabilities",
        { availability: $(this).attr('data') }
      );
    });
  });

# availabilities/create.html.haml
I will be:
= params[:availability] 
```

当您单击其中一个可用性链接时，它会创建一个 UJS 调用来发布到availabilites#create（需要额外的参数才能使其成为帖子，如果没有它们，load() 将执行获取。

完成availabilities#create 后，它会渲染create.html.haml，它会渲染视图中的任何内容（这是放置`= render :partial => 'schedules/named_players'`您自己的代码的地方）。

jquery 方法 .load() 将选择器的 innerHTML 替换为从您的帖子返回的内容。

# maven - 配置 Maven 以使用带有基本身份验证的 CXF wsdl2java

> ID：13342876
> 
> 赞同：8
> 
> 时间：2012-11-12T11:27:24.737
> 
> 标签：maven, cxf, basic-authentication, pom.xml

我有一个需要与 SharePoint 的 Web 服务之一集成的应用程序。此 Web 服务无法自由访问，需要身份验证。

因此，当执行 generate-sources 阶段时，我的应用程序中的标准 wsdl2java Maven 插件会给出 HTTP 401 错误。

有没有办法设置 Maven/POM 以便我可以提供将生成存根的用户/密码？

我遇到了一些答案说这是不可能的，但所有答案都超过 1 年。我还没有发现 Maven 是否对此发布了更新。一种选择是保存 WSDL 的本地副本（如此处所建议） [，](https://stackoverflow.com/questions/4802919/how-to-define-a-password-to-wsdl-in-cxf-maven-plugin?rq=1)但我想避免拥有本地副本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T18:55:19.907

因为您提到了 CXF，所以我想您的意思是 cxf-codegen-plugin。这有点骇人听闻，但它确实有效。

可以使用 java.net.Authenticator 提供 HTTP 身份验证凭据。只需定义他自己的 Authenticator 类，它会覆盖 getPasswordAuthentication(..) 方法。然后必须将其设置为默认身份验证器。据我所知，它不能以声明方式（例如使用环境属性）仅使用 Authenticator.setDefault(..) 以编程方式完成。

为了调用 Authenticator.setDefault(..) 我会使用 CXF 扩展机制。使用类似的类创建单独的 Maven 项目：

```
public class AuthenticatorReplacer {

    public AuthenticatorReplacer(Bus bus) {
        java.net.Authenticator.setDefault(new java.net.Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("test", "test123"
                        .toCharArray());
            }
        });
    }

} 
```

和文件 src\main\resources\META-INF\cxf\bus-extensions.txt 内容：

```
org.example.AuthenticatorReplacer::false 
```

然后将新创建的项目作为依赖项添加到 cxf-codegen-plugin：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${project.version}</version>
    <dependencies>
        <dependency>
            <groupId>org.example</groupId>
            <artifactId>cxf-authenticator-replacer</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
    </dependencies>
    ...
</plugin> 
```

这样 AuthenticatorReplacer 由 CXF 扩展机制初始化，并用我们的替换默认的 Authenticator。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T12:49:18.490

@Dawid Pytel 解决方案的一个干净替代方案是在 wsdl 类自动生成的生命周期内运行此类：

```
<plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>exec-maven-plugin</artifactId>
      <version>1.4.0</version>
      <executions>
        <execution>
          <phase>generate-sources</phase>
          <goals>
            <goal>java</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <mainClass>path.to.AuthenticatorReplacer</mainClass>
      </configuration>
    </plugin> 
```

重要提示：您`AuthenticatorReplacer`必须是一个`main(String[] args)`类并在其中运行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T15:28:33.937

我验证了 Dawid 的解决方案有效。或者，您可以使用 SoapUI 下拉并缓存 wsdl，然后使用 SoapUi 代码生成支持使用 cxf 生成代码。

[http://java.dzone.com/tips/generating-client-java-code](http://java.dzone.com/tips/generating-client-java-code)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-13T19:04:12.240

Dawid 的解决方案也适用于我。不过这有点棘手。在 Eclipse 中，pom.xml 不断抱怨“wsdl2java 失败：无法加载扩展类 AuthenticatorReplacer”。您必须忽略此错误消息并使用命令行：

> mvn 生成源

然后将成功生成 Java 类。

# c# - 设置 DevEx xtra GridControl 的 DataSource

> ID：13342881
> 
> 赞同：0
> 
> 时间：2012-11-12T11:27:32.140
> 
> 标签：c#, devexpress, xtragrid

最初，我的 DevEx xtra GridControl 的**mainView 有一个**字段 F1 的列。（我曾使用反射向 mainview 添加一列。）

现在在运行时，我想更改数据源。**新的 dataSource 有一个字段 F1**。我如何确保只显示我之前添加的那些文件。我不希望数据源的所有字段都显示在 gridControl 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:07:54.537

打电话`gridView.PopulateColumns()`。

# android - 如何重新发送意图？

> ID：13342882
> 
> 赞同：0
> 
> 时间：2012-11-12T11:27:54.467
> 
> 标签：android, android-intent

我有与我的应用程序相关联的意图。

例如。链接到网页。

有时我的应用程序无法处理意图，应将其重定向到其他应用程序（网络浏览器）。

底线是链接中的查询参数无法与另一个参数区分开来。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:08:48.177

您可以通过简单地调用来获取发送到您的活动的 Intent：

```
Intent i = getIntent(); 
```

然后您可以对其进行任何更改（如果需要）并通过调用再次发送：

```
startActivity(i); 
```

也许：

```
sendBroadcast(i); 
```

取决于你想触发什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:03:45.367

我最终启动了 Intent 选择器。

# android - 如何在 WebView 上加载保存的 WebArchive

> ID：13342890
> 
> 赞同：4
> 
> 时间：2012-11-12T11:28:25.403
> 
> 标签：android, webview, local-storage

几天来，我一直在尝试不同的方法来在本地保存网站，然后将其加载到网络视图中。我看过一些建议使用的帖子，`saveWebArchive`但保存后我无法恢复它。

这是我的代码：

```
 browser.loadUrl(URL);

    browser.saveWebArchive(getFilesDir().getAbsolutePath() + File.separator + "index");

    browser.loadUrl(getFilesDir().getAbsolutePath() + File.separator + "index"); 
```

我从 WebView 收到一个错误，指出该网页不可用。
有什么建议么？

如果您知道将网站保存到本地存储然后恢复它的任何其他方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-18T05:58:23.263

我找到了一个对我有用的非常简单的解决方案。

使用 .mht 扩展名：

```
browser.loadUrl(URL); 
```

您必须在 onPageFinished() 方法中保存 webarchive

```
browser.saveWebArchive(getFilesDir().getAbsolutePath() + File.separator + "index.mht"); 
```

加载很简单

```
browser.loadUrl(getFilesDir().getAbsolutePath() + File.separator + "index.mht"); 
```

在科特林

```
browser.loadUrl(URL);
browser.saveWebArchive("$filesDir/index.mht")
browser.loadUrl("$filesDir/index.mht"); 
```

# .htaccess - 查找网页的扩展名

> ID：13342892
> 
> 赞同：0
> 
> 时间：2012-11-12T11:28:42.580
> 
> 标签：.htaccess

一些网站，包括我自己使用的 .htaccess 文件，以使他们的网址看起来不错。

有没有办法找出“丑陋的网址”是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:32:36.797

不，不猜测 URL 是不可能的。

# asp.net - 函数 renderBody() 不使用 .Mobile.cshtml 视图

> ID：13342894
> 
> 赞同：1
> 
> 时间：2012-11-12T11:28:48.197
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, razor, asp.net-mvc-4

我正在使用新的 MVC4 移动功能，如果您将 .Mobile 添加到视图名称，它会在移动设备上查看它时呈现出移动功能。就这样`_Home.cshtml`变成了`_Home.Mobile.cshtml`。这在我手动调用视图时起作用： `@Html.Partial("_HeaderNavigation",Model)`如果合适，它会加载移动版本。

但是，当我使用`renderBody()`它时，它会加载`_Home.cshtml`而不是`_Home.Mobile.cshtml`. 我正在使用区域，所以`home.cshtml`在一个区域中。

```
EDIT 
```

进一步看，是不是因为`_Home.Mobile.cshtml`在一个叫做 Home 的区域？这难道不知道要获得 .mobile 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:54:06.807

如果 Home 是一个视图，那么在它下面有一个下划线会很奇怪。下划线历来用于不会自行显示的项目，因此不希望被发现。

你能在你的主页下用一个叫做索引的视图测试你的设置，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:38:59.447

我发现问题在于，在主区域的控制器中，我正在返回完整路径，例如，`return PartialView(MVC.Home.Home.Views._Home, this.Page);`而不是`return PartialView("_Home", this.Page);`，正如`Dove`我在[另一个问题](https://stackoverflow.com/questions/13342135/appending-mobile-to-end-of-view-name-behaving-erratically)中告诉我的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:06:26.040

我认为这可能与MVC 4 移动后台缓存的这个[众所周知的公开问题有关 - 您可以尝试应用此补丁：](http://aspnetwebstack.codeplex.com/workitem/280) [FixedDisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)

# asp.net - 如何让 customvalidator 在验证摘要中显示错误？

> ID：13342895
> 
> 赞同：1
> 
> 时间：2012-11-12T11:28:50.050
> 
> 标签：asp.net

如何让我的复选框 cbTermsandcond 的 customvalidator 显示在我的验证摘要中？

目前，错误消息显示在正在验证的复选框旁边。

```
<div class="mainbookingcheckboxleft">
    <asp:CheckBox ID="cbTermsandcond" runat="server" />
    <asp:CustomValidator ID="CustomValidator1" runat="server" 
        ErrorMessage="You must agree with our Terms and Conditions" 
            onservervalidate="CustomValidator1_ServerValidate">
    </asp:CustomValidator>

    <asp:ValidationSummary ID="ValidationSummary1" runat="server" 
        ShowMessageBox="true"  ShowSummary="False" />
</div> 
```

请注意，我网页上的RequiredFieldValidator 控件在验证摘要中正确显示为弹出框。

# vba - How to compare two columns in different sheets

> ID：13342898
> 
> 赞同：0
> 
> 时间：2012-11-12T11:28:56.340
> 
> 标签：vba, excel

I have one excel file with multiple sheets. I need to compare two sheets (1) TotalList and (2) cList with more than 25 columns, in these two sheets columns are same.

On cList the starting row is 3 On TotalList the starting row is 5

Now, I have to compare the E & F columns from cList, with TotalList E & F columns, if it is not found then add the entire row at the end of TotalList sheet and highlight with Yellow.

```
Public Function compare()  
    Dim LoopRang As Range  
    Dim FoundRang As Range  
    Dim ColNam  
    Dim TotRows As Long  

    LeaData = "Shhet2"
    ConsolData = "Sheet1"

    TotRows = Worksheets(LeaData).Range("D65536").End(xlUp).Row  
    TotRows1 = Worksheets(ConsolData).Range("D65536").End(xlUp).Row  
    'TotRows = ThisWorkbook.Sheets(LeaData).UsedRange.Rows.Count  
    ColNam = "$F$3:$F" & TotRows  
    ColNam1 = "$F$5:$F" & TotRows1  
    For Each LoopRang In Sheets(LeaData).Range(ColNam)  
        Set FoundRang = Sheets(ConsolData).Range(ColNam1).Find(LoopRang, lookat:=xlWhole)  
        For Each FoundRang In Sheets(ConsolData).Range(ColNam1)  
            If FoundRang & FoundRang.Offset(0, -1) <> LoopRang & LoopRang.Offset(0, -1) Then    
                TotRows = Worksheets(ConsolData).Range("D65536").End(xlUp).Row  
                ThisWorkbook.Worksheets(LeaData).Rows(LoopRang.Row).Copy ThisWorkbook.Worksheets(ConsolData).Rows(TotRows + 1)  
                ThisWorkbook.Worksheets(ConsolData).Rows(TotRows + 1).Interior.Color = vbYellow  
                GoTo NextLine  
            End If  
        Next FoundRang  
NextLine:  
    Next LoopRang  

End Function 
```

Please help with the VBA code. Thanks in advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:33:01.857

首先，我将给出一些一般性的编码提示：

1.  将选项显式设置为 ON。这是通过 Tools > Options > Editor (tab) > Require Variable Declaration 完成的。现在您必须在使用它们之前声明所有变量。
2.  声明变量类型时总是声明它。如果您不确定要起诉什么，或者它是否可以采取不同的类型（不建议！！），请使用`Variable`.
3.  对所有变量使用标准命名约定。我的是一个以 开头的字符串和一个带有 等范围`str`的双精度数。所以，和。还要给你的变量起有意义的名字！`dbl``r``strTest``dblProfit``rOriginal`
4.  为您的 Excel 电子表格提供有意义的名称或标题（标题是您在 excel 中看到的内容，名称是您可以在 VBA 中直接引用的名称）。避免使用标题，而是参考名称，因为用户可以轻松更改标题，但只有在打开 VBA 窗口时才能更改名称。

* * *

好的，下面是如何以您的代码为起点对两个表进行比较：

```
Option Explicit

Public Function Compare()

        Dim rOriginal As Range          'row records in the lookup sheet (cList = Sheet2)
        Dim rFind As Range              'row record in the target sheet (TotalList = Sheet1)
        Dim rTableOriginal As Range     'row records in the lookup sheet (cList = Sheet2)
        Dim rTableFind As Range         'row record in the target sheet (TotalList = Sheet1)
        Dim shOriginal As Worksheet
        Dim shFind As Worksheet
        Dim booFound As Boolean

        'Initiate all used objects and variables
        Set shOriginal = ThisWorkbook.Sheets("Sheet2")
        Set shFind = ThisWorkbook.Sheets("Sheet1")
        Set rTableOriginal = shOriginal.Range(shOriginal.Rows(3), shOriginal.Rows(shOriginal.Rows.Count).End(xlUp))
        Set rTableFind = shFind.Range(shFind.Rows(5), shFind.Rows(shFind.Rows.Count).End(xlUp))
        booFound = False

        For Each rOriginal In rTableOriginal.Rows
            booFound = False
            For Each rFind In rTableFind.Rows
                'Check if the E and F column contain the same information
                If rOriginal.Cells(1, 5) = rFind.Cells(1, 5) And rOriginal.Cells(1, 6) = rFind.Cells(1, 6) Then
                    'The record is found so we can search for the next one
                    booFound = True
                    GoTo FindNextOriginal 'Alternatively use Exit For
                End If
            Next rFind

            'In case the code is extended I always use a boolean and an If statement to make sure we cannot
            'by accident end up in this copy-paste-apply_yellow part!!
            If Not booFound Then
                'If not found then copy form the Original sheet ...
                rOriginal.Copy
                '... paste on the Find sheet and apply the Yellow interior color
                With rTableFind.Rows(rTableFind.Rows.Count + 1)
                    .PasteSpecial
                    .Interior.Color = vbYellow
                End With
                'Extend the range so we add another record at the bottom again
                Set rTableFind = shFind.Range(rTableFind, rTableFind.Rows(rTableFind.Rows.Count + 1))
            End If

FindNextOriginal:
        Next rOriginal

End Function 
```

# php - How to loop through this complex associative array?

> ID：13342909
> 
> 赞同：0
> 
> 时间：2012-11-12T11:29:36.587
> 
> 标签：php, codeigniter

I have an array named as $reports. Which is in following format. When i tried to see using print_r($reports) in my view file.

```
Array
(
[x] => Array
    (
        [A] => Array
            (
                [0] => Channel1 - 1 Stations
                [1] => n
                [2] => 1
                [3] => 2012-11-02 11:30:00
                [4] => 60
                [5] => 20
                [6] => 0
                [7] => 18
                [8] => 602
                [9] => 540
                [10] => Array
                    (
                        [0] => Array
                            (
                                [1] => Whirlpool Ice Magic 30.sec Tamil
                                [2] => 0
                                [3] => 20
                                [4] => 0
                                [5] => 18
                                [6] => 602
                                [7] => 540
                            )

                    )

            )

       )
) 
```

I just showed here one x array like that i have so many arrays i want to loop through all of them. can please any one give me an idea how to do it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:01:45.213

```
$ary = array
        ("x" => array(
            "A" => array
                (
                0 => "Channel1 - 1 Stations",
                1 => "n",
                2 => 1,
                3 => "2012-11-02 11:30:00",
                4 => 60,
                5 => 20,
                6 => 0,
                7 => 18,
                8 => 602,
                9 => 540,
                10 => array
                    (
                    0 => array
                        (
                        1 => "Whirlpool Ice Magic 30.sec Tamil",
                        2 => 0,
                        3 => 20,
                        4 => 0,
                        5 => 18,
                        6 => 602,
                        7 => 540,
                    )
                )
            ),
            ));

    function fetchArray($ary, $level = 0)
    {
        if (is_array($ary))
        {
            $pad = $level * 25;

            foreach ($ary as $key => $val)
            {
                if (is_array($val))
                {
                    echo "<div style='padding-left:" . $pad . "px'>" . $key . " = Array</div>";

                    $level++;
                    fetchArray($val, $level);
                }
                else
                {
                    echo "<div style='padding-left:" . $pad . "px'>" . $key . " => " . $val . "</div>";
                }
            }
        }
    }

    fetchArray($ary, 0); 
```

尝试这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:46:54.250

我创建了一个 php 函数，它将一个嵌套数组提取到新的基本数组中：

```
 function extractArray($nested_array,&$new_array)
    {
        foreach($nested_array as $key => $val)
        {
            if(is_array($val)) extractArray($val,$new_array);
            else $new_array[$key] = $val;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:43:02.710

类似的东西

```
foreach($reports as $report) {
    foreach($report as $element) {
        //$element[3] would give you 2012-11-02 11:30:00
        if(is_array($element) {
            foreach($element as $x) {
                foreach($x as $y) {
                    //$y[1] would give you Whirlpool Ice Magic 30.sec Tamil
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:37:12.070

```
foreach($reports as $key1=>$val1)
{
    foreach($val1 as $key2=>$val2)
    {
        foreach($val2 as $key3=>$val3)
        {
            echo $val;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T11:37:43.100

```
<?php

$array = ....;

foreach($array as $value)
{
    foreach($value as $valueInner)
    {
        if(is_array($valueInner))
        {
            foreach($valueInner as $valueInner2)
            {
                foreach($valueInner2 as $valueInner3)
                {
                    echo $valueInner3."\n";
                }
            }
        }
        else
        {
            echo $valueInner."\n";
        }
    }
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T11:38:12.417

就像是：

```
array_walk_recursive($reports,
    create_function('$e','if (is_scalar($e)) echo sprintf("%s\n",$e);')); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T11:40:26.087

通用示例。

```
 // your data
 $a = array(
     'a',
     'b',
     array (
         'c',
         'd',
         array ('e','f')
     )
 );

 // your recursive function
 function echo_row($x) {
     if (is_array($x)) {
         // if is an array calls the recursive function over the new array
         foreach ($x as $e) {
             echo_row($e);
         }
     } else {
         // prints a row, change to your table html
         echo $x . "<br>";
     }
 }

// execute the function 
echo_row($a);

// results
a
b
c
d
e
f 
```

# canvas - why mouse event 's position have wrong in kineticjs?

> ID：13342910
> 
> 赞同：0
> 
> 时间：2012-11-12T11:29:39.063
> 
> 标签：canvas, kineticjs

i have a kineticjs, i use tag to get kineticjs canvas's position is center

```
#mycanvas{text-align:center;} 
```

And when run it, event area far from object 200px , at left side of object. I can't understand the reason? Thank for all answer!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:08:28.363

如果您使用的是 jquery，则以下解决方法对我有用；

```
 $("#container canvas:last").css("position", "relative"); 
```

不好，但希望这可以帮助某人。

# javascript - Grab url variable from inside an iframe

> ID：13342920
> 
> 赞同：0
> 
> 时间：2012-11-12T11:30:11.513
> 
> 标签：javascript, jquery, iframe

I have no control over anything apart from the iframe.

my form sits in the iframe and I want to grab a variable that comes from the parent link.

Not sure if its poss as the parent url is a different domain.

I cant give live urls, but for example:

www.theredomain.com?ref=variable is the parent url

I need to grab the variable of 'ref' from my iframe which is on a different domain. I have tried the below but it didnt seem to do anything.

```
<script language="javascript">
function getUrlVars() {
var vars = {};
var parts = window.parent.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
    vars[key] = value;
});
return vars;
}
var first = getUrlVars()["ref"];
alert(first);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:33:07.633

如果它位于另一个域中，则您无法从 iframe 访问父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:39:11.163

感谢您的输入 - 终于解决了。我使用以下函数从引荐来源网址中分离出变量

```
 <script>  
      function getUrlVars() {
    var vars = {};
    var parts = document.referrer.replace(/[?&]+([^=&]+)=([^&]*)/gi, function    (m,key,value)   {
    vars[key] = value;
      });
    return vars;
      }
     </script> 
```

然后把它放到我的表格中

```
 <script>
        $("#submit").click(function() {
       var first = getUrlVars()["ref"];
        $(".referer").val(first);
        }); 
    <script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:38:05.373

在不在同一个域中的两个 iframe 之间发送数据的一种方法是使用[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

这是相当直截了当的。一方面，您实现了一些 js 作为事件侦听器，它可以识别它来自的 url，另一方面，您使用 .postMessage 方法发送到该父 iframe。如果它适用于您，请检查浏览器支持。

# javascript - Windows 8 HTML/JS 应用程序可以作为网站运行吗？

> ID：13342921
> 
> 赞同：2
> 
> 时间：2012-11-12T11:30:11.593
> 
> 标签：javascript, html, windows-8, windows-store-apps

我是一名 Web 开发人员，通过制作 Javascript Windows 8 应用程序进入新的 Windows 8 商店轨道。

我很想知道，如果我用 Javascript 制作一个 Windows 8 商店应用程序，如果这很容易部署为托管网站，可以在浏览器中运行。

即，我可以在不对我的应用程序进行重大更改的情况下，使用 IIS 托管它，当人们浏览它时，它的行为就像原始应用程序一样吗？

我会遵循正常的 HTML5 浏览器指南，不使用 Win8 快捷方式，例如跳过额外的音频/视频轨道。打开生成的 default.htm 似乎是空白的，所以肯定不能开箱即用，但我想知道是否有一个库可以连接和运行大部分内容，考虑到它是一个简单的应用程序。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:41:11.970

Windows 通过 Javascript 公开了一些 Windows 运行时功能。您不能在 WebApp 中使用此类功能。

但是，如果您将应用程序设计为具有不同的层，则在将其部署到其他浏览器时应该很容易排除 Windows 运行时功能。

纯 Javascript 当然会在每个浏览器中运行。

我不是 100% 但我想如果你使用类似的东西

```
var object = WinJS.UI.Animation.createAddToListAnimation(added, affected); 
```

它捆绑到应用程序的*托管环境*中。如果 Chrome 应该呈现页面，它就不能被重用。

一种方法是为 UI 组件创建一个包装器，例如，您有 YourApp.CreateTab，它实现了 WinJS.UI，或者对于另一个浏览器，它将使用 jQuery UI 来创建选项卡。

# xaml - Silverlight Navigation Property not Binding in XAML

> ID：13342927
> 
> 赞同：2
> 
> 时间：2012-11-12T11:30:48.920
> 
> 标签：xaml, data-binding

I am facing a peculiar problem. I have an edmx file loaded with some entities. Some of them has navigation properties. I am using a Domain service class to fetch the data. The linq query is as follows:

```
var result = from res in ObjectContext.Accounts.Include("Branch")
                          where res.FYAccountID == fyAccountID
                          select res;
return result.ToList(); 
```

When I am adding 'watch' to 'result.ToList()', the data is being shown. That is, instead of BranchID, Branch Name is shown.

But, in the XAML, the data is not being shown. The column 'Branch Name' is showing no values. The XAML is as follows,

```
<dxg:AgDataGrid.Columns>
                <dxg:AgDataGridColumn FieldName="Branch.Name" AllowEditing="False"    ReadOnly="True" HeaderContent="Branch Name" GroupIndex="1">
                    <dxg:AgDataGridColumn.DisplayTemplate>
                        <ControlTemplate>
                            <TextBlock Text="{Binding DataContext.Branch.Name}" />
                        </ControlTemplate>
                    </dxg:AgDataGridColumn.DisplayTemplate>
                </dxg:AgDataGridColumn>
</dxg:AgDataGrid.Columns> 
```

I have no idea why this is happening. Any suggestions?

# c# - 在字符串中查找整数值

> ID：13342931
> 
> 赞同：0
> 
> 时间：2012-11-12T11:30:59.407
> 
> 标签：c#

我正在寻找以下字符串中的整数值：

"值="5412304756756756756756792114343986"

如何使用 C# 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:33:32.847

您可以使用正则表达式在字符串中查找数字：

```
var resultString = Regex.Match(subjectString, @"\d+").Value; 
```

对于负值：

```
var resultString = Regex.Match(yourString, @"(|-)\d+").Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:32:45.923

你可以找等号...

```
string yourString = "value=5412304756756756756756792114343986";
string integerPart = yourString.Split('=')[1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T11:35:46.613

您可以使用[char.IsDigi](http://msdn.microsoft.com/en-us/library/7y5kahff.aspx) t 之类的东西。

```
string str = "value=5412304756756756756756792114343986";
List<char> justDigits = new List<char>();
foreach(char c in str)
{
    if (char.IsDigit(c))
        justDigits.Add(c);
}

string intValues = new string(justDigits.ToArray()); 
```

或更短**的版本**

```
string intValues = new string(str.Where(char.IsDigit).ToArray()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T11:37:30.267

您可以使用`Regex`：

```
int IntVal = Int32.Parse(Regex.Match(yourString, @"(|-)\d+").Value); 
```

这也将匹配负数。您还可以遍历字符串中的每个字符并检查 id 它们是数字但不是真正理想的解决方案，因为它可能是一个瓶颈。

**编辑：**在您输入的数字大于长。对于这样的数字，您可以使用[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)，从框架 4.0 开始

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T11:34:50.847

```
 Match match = new Regex("[0-9]+").Match("value=\"5412304756756756756756792114343986\"");
        while(match.Success)
        {
            // Do something
            match = match.NextMatch();
        } 
```

# asp.net-mvc-3 - Partialview 命名约定，长名称不好？

> ID：13342934
> 
> 赞同：1
> 
> 时间：2012-11-12T11:31:38.640
> 
> 标签：asp.net-mvc-3, naming-conventions

名字长不`_Partialviews`好吗？

就像`_Header_detachable_nav`，那个部分已经消失了，还有其他部分`_Header_detachable_nav_cart`，
`_Header_detachable_nav_navigation`

这是不好的做法，有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:18:26.843

部分视图中的下划线有助于区分完整视图和部分视图。

但更重要的是，它可以防止部分视图直接通过其 URL 加载，这可能会提供一些潜在的丑陋结果！（对于初学者来说，就像没有 CSS 一样。）

但是，没有必要使用下划线。

而不是像这样的名字，`_Header_detachable_nav_cart`你可以使用 camelCase 例如`_HeaderDetachableNavCart`

# mysql - MySQL 从一个表中连接多行，同时从其他表中仅选择一行

> ID：13342935
> 
> 赞同：1
> 
> 时间：2012-11-12T11:31:45.317
> 
> 标签：mysql

也许有点奇怪的标题描述，但我基本上想实现该`GROUP_CONCAT()`功能所做的事情，然后才保留双重条目。

我有四个要加入的表`client`，, `doctor`,`physio`和`records`

根据`$client`我想获取客户详细信息的变量，主治医生和治疗师（三个表中的一行）并加入该用户的*所有*记录。

说在这种情况下`$client = 1`。该`records`表有五个记录所在的列`r_client_id = 1`。如果我运行如下查询，我只会从`records`表中获取一条记录，即第一次出现 where `r_client_id = 1`（这当然是有道理的）：

```
 SELECT
    client.c_id, client.c_name
    doctor.d_name, 
    physio.p_name, 
    records.r_record
FROM
    adm_clients AS client

    INNER JOIN 
        norm_client_doctor AS ncd ON ncd.ncd_client_id = client.c_id
    INNER JOIN 
        adm_doctor AS doctor ON doctor.d_id = ncd.ncd_doctor_id
    INNER JOIN 
        norm_client_physio AS ncp ON ncp.ncp_client_id = client.c_id
    INNER JOIN 
        adm_physio AS physio ON physio.p_id = ncp.ncp_physio_id

        LEFT JOIN 
            adm_doctor_records AS records ON records.r_client_id = client.c_id
WHERE
    client.c_id = '".$client."' 
```

现在假设五个记录`r_client_id = 1`是这样的：

```
 +------+-------------+-------------------+----------+
| r_id | r_client_id | r_record          | r_date   |
+------+-------------+-------------------+----------+
| 1    | 1           | regular visit     | 10/10/12 |
+------+-------------+-------------------+----------+
| 3    | 1           | emergency control | 24/10/12 |
+------+-------------+-------------------+----------+
| 7    | 1           | regular visit     | 08/09/12 |
+------+-------------+-------------------+----------+
| 18   | 1           | delivery          | 03/01/12 |
+------+-------------+-------------------+----------+
| 20   | 1           | health checkup    | 10/12/11 |
+------+-------------+-------------------+----------+ 
```

我希望我的输出是这样的数组：

```
 Client 1
 - Name Doctor
 - Name Physio

Records
 - Emergency control, 24/10/12
 - Regular visit, 10/10/12
 - Regular visit, 08/09/12
 - Delivery, 03/01/12
 - Health checkup, 10/12/11 
```

我能想到的最接近的一个是`GROUP_CONCAT()`在记录上添加一个，但是，当然，对“定期访问”进行分组，所以我会得到 4 行而不是 5

```
 GROUP_CONCAT(DISTINCT records.r_record SEPARATOR '|')
[..]
    echo(str_replace("|","<br>",$show->r_record)); 
```

有人知道如何显示*所有*匹配的记录吗？我觉得我很接近了，但我现在别无选择..

**编辑：** 我忘了提到当我删除时`DISTINCT`，它会显示所有记录两次..

**解决了：**

让它像这样工作：

```
 GROUP_CONCAT(DISTINCT 
        CONCAT (records.r_date, '~', records.r_record, '~', records.r_paraph)
    SEPARATOR '|') AS clientDoctorRecords, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:40:42.773

尝试：

```
SELECT
    client.c_id, client.c_name
    doctor.d_name, 
    physio.p_name, 
    GROUP_CONCAT(records.r_record)
FROM
    adm_clients AS client

    INNER JOIN 
        norm_client_doctor AS ncd ON ncd.ncd_client_id = client.c_id
    INNER JOIN 
        adm_doctor AS doctor ON doctor.d_id = ncd.ncd_doctor_id
    INNER JOIN 
        norm_client_physio AS ncp ON ncp.ncp_client_id = client.c_id
    INNER JOIN 
        adm_physio AS physio ON physio.p_id = ncp.ncp_physio_id

        LEFT JOIN 
            adm_doctor_records AS records ON records.r_client_id = client.c_id
WHERE
    client.c_id = '".$client."'
GROUP BY
    client.c_id 
```

如果您想`r_date`在`record`一列中加入，那么您可以`CONCAT`先使用plain，然后`GROUP_CONCAT`对其进行操作。

# c++ - STL 容器要求

> ID：13342936
> 
> 赞同：4
> 
> 时间：2012-11-12T11:31:47.063
> 
> 标签：c++, stl

标准要求`some_container<T>::value_type`是`T`吗？

我之所以问，是因为我正在考虑用不同的方法来实现符合 STL 的二维动态数组。其中之一是拥有`2Darray<T>::value_type`或`2Darray_row<T>`类似的东西，其中数组将作为行的集合进行迭代（有点简化。我的实际实现允许在 3 个方向上进行迭代）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:39:03.033

容器要求有点古怪，因为它们实际上没有被任何通用算法使用。从这个意义上说，这并不重要。

也就是说，要求是在容器的接口上，而不是在容器的实际实例化方式上。即使是非模板类也可以符合各种要求，事实上也可以。要求是`value_type`存在的；它的定义完全取决于容器的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:39:57.477

标准 (c++11) 中第 23.2.1 节中的表 96 需要一个容器类，其中包含要返回的`X`类型对象。`T``T``X::value_type`

因此，如果您`some_container`存储类型为 的对象`T`，则`value_type`必须为`T`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:41:41.733

要么有一个嵌套容器（so `colArray<rowArray<T> >`），要么有一个包装（`2dArray<T>`），但不要试图混合它们。嵌套方法允许您一直使用 STL ( `vector<vector<T> >`)，但可能会造成混淆，并且不允许您使用您似乎想要的列迭代器等。

[这个 SO 答案使用 ublas 解决](https://stackoverflow.com/a/1833146/36537)，另一个建议使用[Boost multi-arrays](http://www.boost.org/doc/libs/1_41_0/libs/multi_array/doc/index.html)。

通常，如果可以，请选择 STL 或 Boost 选项。你不太可能自己写东西。

# android - 在Android上制作全屏动画？我应该使用 OPENGL 吗？

> ID：13342939
> 
> 赞同：4
> 
> 时间：2012-11-12T11:31:51.477
> 
> 标签：android, opengl-es

假设我需要制作几个全屏动画，每个动画大约包含 500 帧。动画应该以合理的速度播放 - 应该不会低于 20fps - 并且图片应该具有合理的质量，而不是过度压缩。

你认为我应该使用什么方法？

到目前为止，我尝试过：

```
1\. storing each frame as a compressed JPEG
2\. before animation starts, loading each frame into a byteArray
3\. as the animation plays, decode corresponding byteArray into a bitmap
and draw it on a surface view. 
```

问题 - 速度太低，通常约为 5-10 FPS。

我想到了另外两个选择。

1.  将所有动画转换为一个电影文件...但我想在开始、暂停和寻找完全正确的帧时可能存在问题...您怎么看？

2.  我想到的另一个选择是使用 OPENGL（虽然我以前从未使用过它），逐帧播放动画。你怎么看，opengl 能够处理它吗？

谢谢！

* * *

编辑，我设法窥视talktom，发现它包含大约20megs压缩良好的JPEG，就像这样。

![在此处输入图像描述](../Images/22d581b813a520e4660459edf517a840.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:37:10.447

你可以用几种不同的方式来处理它。

1.  听起来解码是你的瓶颈。您可以尝试在播放动画之前完成包括解码在内的所有 3 个步骤，因此您只需绘制已经转换的位图。

2.  OpenGL 绝对可以胜任这项任务，因为它可能永远不会成为您的瓶颈。但如上所述，绘图似乎不是问题。

3.  在设备上制作动画。如果您正在为几何对象或像素图制作动画，并且动画具有可以重复使用的共同背景，请将动画分成“演员”并四处移动 - 这将需要更少的数据。

编辑：移动设备上的复杂动画很少是全屏电影或一系列图像 - （冗余）数据量将是压倒性的（正如您已经注意到的那样）。它们是动画 2D 和 3D 模型。对于 3D，建议使用 OpenGL，对于 2D，普通的画布绘图可能就足够了。为了提高效率，您可以将模型拆分为单独的部分并分别为它们设置动画（看起来类似于 SouthPark 动画）。您可以将此与使用 spritesheets（如单独的小电影片段）结合起来为单独的部分设置动画。这将为您提供更大的灵活性，同时仍然使用比压缩电影更少的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:35:15.787

我真的认为你需要把它变成一个电影文件——这会给你一些适当的压缩，android 可以用媒体播放器完成所有的工作。我相信获得正确的帧是相当容易的，但您可能必须在视频流上使用较低的压缩来完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:36:28.443

也许使用[通用补间引擎](http://www.aurelienribon.com/blog/projects/universal-tween-engine/)可以解决您的性能问题。

# javascript - 自动完成点击地理编码

> ID：13342941
> 
> 赞同：0
> 
> 时间：2012-11-12T11:32:15.610
> 
> 标签：javascript, google-maps, google-maps-api-3, google-api, geocode

这是我正在使用的代码：

[http://jsfiddle.net/njDvn/75/](http://jsfiddle.net/njDvn/75/)

```
var GeoCoded = {done: false};

$(document).ready(function(){
    console.log('ready!');
    autosuggest();
    console.log($('#myform input[type="submit"]'));
    $('#myform').on('submit',function(e){

        if(GeoCoded.done)
            return true;

        e.preventDefault();
        console.log('submit stopped');
        var geocoder = new google.maps.Geocoder();
        var address = document.getElementById('location').value;

        $('#myform input[type="submit"]').attr('disabled',true);

        geocoder.geocode({
            'address': address
        }, 
        function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var latLng = results[0].geometry.location;
                $('#lat').val(results[0].geometry.location.lat());
                $('#lng').val(results[0].geometry.location.lng());
                //if you only want to submit in the event of successful geocoding, you can only trigger submission here.
                GeoCoded.done = true;
                $('#myform').submit();
            } else {
                console.log("Geocode was not successful for the following reason: " + status);
                //enable the submit button
                $('#myform input[type="submit"]').attr('disabled',false);
            }

        });        

    });    

}); 
```

这可以按我的意愿工作，但是，当有人单击自动完成时，我想完成地理编码。因此，当他们键入内容并单击自动建议列表中的建议时，它实际上会在单击结果时完成地理编码调用。

如果有人能告诉我这是否可能，我将不胜感激，因为我自己无法弄清楚如何去做。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:38:34.003

自动完成自动合并地理编码。[**这里的例子。**](http://maps.forum.nu/v3/ac.html)

**编辑：**

这是该示例的要点：

创建自动完成控件的关键行是：

```
var input = document.getElementById('searchTextField');
var options = {
    types: [],
    componentRestrictions: {country: 'us'}
};

var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

您还需要加载 Places 库：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script> 
```

并在您的 HTML 中：

```
<input id="searchTextField" type="text" size="50" value=""> 
```

顺便说一句，您不会“将自动完成添加到地理编码器”。 Places Autocomplete 类包括地理编码功能。

# ms-access - ms访问从子表单将数据插入SQL数据库表

> ID：13342946
> 
> 赞同：0
> 
> 时间：2012-11-12T11:32:33.957
> 
> 标签：ms-access, vba

为我的格式道歉。

我在使用 Access 数据库表单时遇到问题。

我有一个表格，可以从参与者表中调用参与者信息。然后我需要一个子表单来包含另一个表的子集，该表根据参与者表的 id 号 (PK) 过滤。子表单（使用访问子表单向导创建）可以完成这项工作。（wtwo 表单通过主表单上的 ID 和子表单上的 GI_ID 链接，但此处不相关）。

现在棘手的部分是，在子表单上我有一个按钮，按下它会打开另一个表单（澄清）并在新表单表中插入一个新行，链接 bY 子表单（Diary.ID）和 clarification.DiaryID。操作员现在可以填写澄清表中的字段，该表将始终链接回日记表。总之

```
Participant table; ID (pk)
healthdiary Table; ID (PK) GI_ID (fk - participant table) form= frm_healthdiary_edit_record.ID
Clarification Table ID (PK), DiaryID (fk) form=tbl_healthdiary_clarif 
```

这是按钮背后的代码，当它不是子表单时（在另一个表单上）起作用。

```
SQL_Txt = "INSERT INTO tbl_healthdiary_clarif (HDR_ID) Values (forms!frm_healthdiary_record.ID)"
DoCmd.RunSQL SQL_Txt
SQL_Txt = ""
DoCmd.OpenForm "frm_healthdiary_clarif", , , "[HDR_ID] = forms!frm_healthdiary_record.ID" 
```

以下 SQL 插入代码在子表单 frm_healthdiary_record 中的按钮上的 onClick 控件上使用时不起作用。无论我尝试什么，它总是要求输入 frm_healthdiary_record.ID。

```
SQL_Txt = "INSERT INTO tbl_healthdiary_clarif (HDR_ID) Values (me.frm_healthdiary_edit_record.form.ID)"
DoCmd.RunSQL SQL_Txt

SQL_Txt = "" 
```

我尝试将代码更改为 me.frm_healthdiary_edit_record.form.ID 和 Forms!frm_healthdiary_record..Form.ID，但总是得到相同的要求输入结果并且找不到控件。

它非常令人沮丧。

让我明确一点，我希望子表单（onclick）上的按钮 1- 将新行插入 tbl_healthdiary_clarif 然后 2 - 根据刚刚插入的记录中的 tbl_healthdiary_clarif 打开另一个表单。

如果有更好的方法请提出。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:58:43.270

您不能在 sql 文本中包含对表单的引用，它必须在外部，因为它是一个变量。例如，如果 ID 在当前表单的子表单上：

```
SQL_Txt = "INSERT INTO tbl_healthdiary_clarif (HDR_ID) Values ( " _
   & me.frm_healthdiary_edit_record.form.ID & ")"
CurrentDB.Execute SQL_Txt, dbFailOnError 
```

要引用当前表单之外的表单上的子表单：

```
SQL_Txt = "INSERT INTO tbl_healthdiary_clarif (HDR_ID) Values ( " _
   & Forms.MyFormName.frm_healthdiary_edit_record.form.ID & ")" 
```

您还可以将 ID 作为 OpenForm 方法的 OpenArg 传递：

```
DoCmd.OpenForm "Clarification", , , , , , Me.ID 
```

然后，您可以参考名为 Clarification 的表单上的 Me.OpenArgs。

# c# - 如果使用数字和 && 的语句不起作用。C＃

> ID：13342958
> 
> 赞同：0
> 
> 时间：2012-11-12T11:33:10.503
> 
> 标签：c#, if-statement

我写了这个但它不起作用，有什么想法我哪里出错了吗？是的，我是编程新手。在此先感谢您的任何建议。

```
if ((int.Parse(Console.ReadLine()) < 10) && (int.Parse(Console.ReadLine()) > 0))
    Console.WriteLine("The right number!!");
else
    Console.WriteLine("The wrong number!!");

Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:39:33.880

它没有像您预期的那样工作，因为 if 语句的编写方式是期望从控制台读取 2 行文本（因为您已经使用了 Console.ReadLine()）两次。

您应该首先将输入值分配给变量

然后可以在 if 语句中使用两次，如下所示：

```
 int inputNumber = int.Parse(Console.ReadLine());

if(inputNumber < 10 && inputNumber > 0)
{
    Console.WriteLine("The right number!!");
}
else
{
    Console.WriteLine("The wrong number!!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T11:37:51.337

如果您只想读取 1 个输入，请尝试以下操作：

```
int number = int.Parse(Console.ReadLine());

if (number > 0 && number < 10) {
    Console.WriteLine("The right number!!");
} else {
    Console.WriteLine("The wrong number!!");
}

Console.ReadLine(); 
```

这是因为在您的示例中`Console.ReadLine()`，您的代码都要求输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T11:34:52.997

你为什么不这样做：

```
var input = Console.ReadLine();
int number;

if (int.TryParse(input, out number))
{
    if (number > 0 && number < 10)
        Console.WriteLine("The right number!!");
    else
        Console.WriteLine("The wrong number!!");
} 
```

`int.TryParse`在语句中使用，`if`以确保在获得正确的整数输入后输入。

# c - C函数strchr - 如何计算字符的位置？

> ID：13342959
> 
> 赞同：2
> 
> 时间：2012-11-12T11:33:11.567
> 
> 标签：c, position, character, strchr

我有这个 C 中 strchr 函数的示例代码。

```
/* strchr example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] = "This is a sample string";
  char * pch;
  printf ("Looking for the 's' character in \"%s\"...\n",str);
  pch=strchr(str,'s');
  while (pch!=NULL)
  {
    printf ("found at %d\n",pch-str+1);
    pch=strchr(pch+1,'s');
  }
  return 0;
} 
```

问题是，我不明白，这个程序如何计算正在寻找的角色的位置。我认为这与“pch”和“str”的指针有关，但是这是如何工作的呢？

如果有人可以更详细地解释这一点，那就太好了。

谢谢，埃尔约索

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T11:34:53.653

`str`它只是从指向找到的结果的指针中减去指向字符串第一个字符的指针。

这便成为字符的位置，从 0 开始索引。这很容易理解，如果在字符串的第一个位置找到字符，则返回的指针将等于`str`，因此`(pstr - str) == 0`为真。添加一个使其从 1 开始，这有时对于演示目的很有用。

# c# - Assembly.GetExecutingAssembly().Location 返回“错误”值

> ID：13342964
> 
> 赞同：1
> 
> 时间：2012-11-12T11:33:32.907
> 
> 标签：c#, xamarin.android

我尝试在 Monodroid 上使用下面的代码，但“路径”始终是一个空字符串。有趣的是它已经起作用了，我不知道发生了什么变化。下面的“writeline”仅用于测试目的，它产生：“：MyDLL.dll：：”。

上周我更新到`mono-android-4.2.7.15330979`，但它也在那里工作。

```
string path = System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
System.Console.WriteLine("{0}: {1}: {2}: {3}", path, Assembly.GetExecutingAssembly().Location, System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), Path.GetDirectoryName(Assembly.GetAssembly(GetType()).Location)); 
```

我犯错了吗？

Mono-android 中的这个 Assembly 函数有什么已知问题吗？

**编辑：**我还在控制台应用程序的 std c# 中尝试了这个命令，它工作了！

如果启用了项目选项“使用快速部署（仅限调试模式）”，我发现该命令有效。当应用程序分发或构建为发布时，这会成为一个问题吗？

# android - Android上快速傅里叶变换（FFT）算法的对比分析？

> ID：13342972
> 
> 赞同：2
> 
> 时间：2012-11-12T11:34:06.967
> 
> 标签：android, fft, dft

有没有人对Android平台上的快速傅里叶变换（FFT）算法做过比较分析？

到目前为止，哪个实现最快？

# ios - iOS：UITableView 重新加载动画

> ID：13342973
> 
> 赞同：1
> 
> 时间：2012-11-12T11:34:11.350
> 
> 标签：ios, uitableview, uiviewanimation, reloaddata

我已经实现了嵌套`UITableViews`，这样，在从父数据列表中选择特定行时，从服务器获取子节点数据并将它们重新加载到相同的`UITableview`. 我已经提供了使用字典返回父节点的规定，并且一切正常。当我将父数据列表移动到子数据列表时，我想要导航样式动画。有人可以帮助我如何做到这一点。

我尝试使用以下代码`UIViewAnimationOptionTransitionFlipFromLeft`和`UIViewAnimationOptionTransitionFlipFromRight`动画来翻转视图-我正在寻找类似但没有翻转的简单导航样式动画，就像我想假装我正在推动另一个 UITableView。

```
[UIView transitionWithView: self.listTableView
                   duration: 0.35f
                   options: UIViewAnimationOptionTransitionFlipFromLeft
                   animations: ^(void) {
                        [self.listTableView reloadData];
                    } completion: ^(BOOL isFinished){
                    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:48:32.080

这是带有代码的逻辑。

您需要导入`QuartzCore framework in`.h` 以使用下面的代码。作为#import

```
// Method to replace a given subview with another using a specified transition type, direction, and duration
-(void)replaceSubview:(UIView *)oldView withSubview:(UIView *)newView transition:(NSString *)transition direction:(NSString *)direction duration:(NSTimeInterval)duration
     {
  // Set up the animation
  CATransition *animation = [CATransition animation];
  // Set the type and if appropriate direction of the transition, 
  if (transition == kCATransitionFade)
       {
        [animation setType:kCATransitionFade];
   } 
  else
     {
  [animation setType:transition];
  [animation setSubtype:direction];
 }
// Set the duration and timing function of the transtion -- duration is passed in as a parameter, use ease in/ease out as the timing function
 [animation setDuration:duration];
 [animation setTimingFunction:[CAMediaTimingFunction   functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
 [[oldView layer] addAnimation:animation forKey:@"transitionViewAnimation"];    
   } 
```

当 TableView 行被点击时调用 Above 方法，如下所示。

```
 [self replaceSubview:thisTableView 
                 withSubview:thisTableView 
                  transition:kCATransitionPush
                   direction:kCATransitionFromLeft
                    duration:0.3];

 //thisTableView is instance of UItableView. 
```

# ruby - 需要在字符串哈希值中格式化转义符号

> ID：13342977
> 
> 赞同：1
> 
> 时间：2012-11-12T11:34:22.097
> 
> 标签：ruby, string, escaping, yaml

我正在使用 YAML 文件，当我将其转换为哈希时，其中一个值是字符串。

这是我正在使用的文档：

```
---
    http_interactions:
    - request:
        method: post
        uri: http://********/client/api
        body:
          encoding: US-ASCII
          string: *******************
        headers: {}

      response:
        status:
          code: 200
          message: OK
        headers:
          Date:
          - Mon, 24 Sep 2012 10:38:01 GMT
          Set-Cookie:
          - ***************; Path=/client
          Content-Type:
          - text/javascript;charset=UTF-8
          Content-Length:
          - "425"
        body:
          encoding: ASCII-8BIT
          string: >
            {
              "loginresponse": {
                "timeout": "43200",
                "lastname": "frgrg",
                "registered": "false",
                "username": "rfrfr",
                "timezone": "America\/New_York",
                "firstname": "Mrfrfronika ",
                "domainid": "3434444444444444444",
                "type": "0",
                "userid": "4444444444444444444444444444444441",
                "sessionkey": "ewrffffffffffffffffffffff",
                "timezoneoffset": "-4.0",
                "account": "dddd"
              }
            }
        http_version:
      recorded_at: Mon, 24 Sep 2012 10:38:01 GMT
    recorded_with: VCR 2.2.5 
```

这就是我处理文件的方式：

```
thing = YAML.load_file('login_as_user.yml')

http = thing['http_interactions']

alldoc = http[0]
response = alldoc['response']
body = response['body']
bodystring = body['string'] 
```

该字符串是`body`键的值，如果我在正文中打印它，它将返回给我：

```
puts body 
```

身体：

```
{"encoding"=>"ASCII-8BIT", "string"=>"{\n  \"loginresponse\": {\n    \"timeout\": \"43200\",\n    \"lastname\": \"sdsd\",\n    \"registered\": \"false\",\n    \"username\": \"sdsdsd\",\n    \"timezone\": \"America\\/New_York\",\n    \"firstname\": \"sdasdas \",\n    \"domainid\": \"ssssssssssss\",\n    \"type\": \"0\",\n    \"userid\": \"ssssssssssss1\",\n    \"sessionkey\": \"sssssssssss",\n    \"timezoneoffset\": \"-4.0\",\n    \"account\": \"sadsadsa\"\n  }\n}\n"} 
```

但是如果我像这样检查这个字符串的值：

```
puts bodystring 
```

它将被很好地格式化：

```
{
  "loginresponse": {
  "timeout": "43200",
  "lastname": "wwd",
  "registered": "false",
  "username": "dddd",
  "timezone": "America\/New_York",
  "firstname": "dddd ",
  "domainid": "dddfdfdf",
  "type": "0",
  "userid": "dfsdfdsf",
  "sessionkey": "dsfdsfdsf",
  "timezoneoffset": "-4.0",
  "account": "dsfdsfdsfd"
 }
} 
```

所以问题出在转义符号中，当我打开文件并再次写入时，在处理数据后，它的格式错误。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:53:18.587

正文只是一个字符串，但该字符串是哈希的 JSON 编码。要将 JSON 编码转换为 Ruby 哈希，请使用[json](http://flori.github.com/json/) gem：

```
require 'json'
body_hash = JSON.parse(bodystring) 
```

如果你在 Rails 中，你可能已经加载了 json gem，不需要`require`.

# google-app-engine - 谷歌数据存储

> ID：13342980
> 
> 赞同：1
> 
> 时间：2012-11-12T11:34:43.670
> 
> 标签：google-app-engine, google-cloud-datastore, google-cloud-sql

首先，我必须承认，就 GAE 而言，我还是个新手，这就是为什么我的问题可能看起来很愚蠢。我想保留三个彼此相关的不同实体。

1.  项目
2.  用户
3.  数据

用户 (M) <-> (N) 项目 (1) <-> (N) 数据

基本上每个项目都可以有很多与之相关的数据实体（例如10 000、100 000）。

但是，我不确定如何在 Datastore 中的实体之间保留这些关系，以便我可以轻松获取以下信息：

*   列出所有用户的项目
*   列出特定项目的所有数据
*   列出用户有权访问的所有数据（属于所有用户项目的数据）

也许整个想法是错误的，我应该改用 Google Cloud SQL。

我将不胜感激任何评论。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:08:22.450

使用哪种环境（Java、Python 或 Go）？

例如 Python

1 <-> N[参考属性](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ReferenceProperty)

M <-> N [ListProperty](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ListProperty)

看看[她](https://developers.google.com/appengine/docs/python/datastore/datamodeling#References)的一些例子。

问候，托马斯

# java - SOAP 消息上的 Xmldsig 签名

> ID：13342984
> 
> 赞同：0
> 
> 时间：2012-11-12T11:35:09.173
> 
> 标签：java, xml, soap, cxf

我的代码如下所示：

```
MyService f = new MyService();
MyPortType type = f.getMyPortType(); 
```

据我所知，我需要使用 x509 证书签署肥皂请求

```
 XmlSigOutInterceptor 
```

但是我得到了无法找到文档的奇怪错误？

# javascript - 多重显示和隐藏和关闭触发器

> ID：13342986
> 
> 赞同：0
> 
> 时间：2012-11-12T11:35:18.117
> 
> 标签：javascript, jquery, css, html

我在我的网站上加入了显示和隐藏功能[单击此处](http://iamnatesmithen.com/thecharles/)-***单击工作选项卡并与我们联系选项卡***一件事我注意到隐藏隐藏的触发器`div`无法按我希望的方式工作。例如，当您单击工作选项卡时，单击联系我们选项卡上的工作隐藏 div 关闭，反之亦然。有谁知道我怎么能做到这一点。

这是我的 HTML：

```
 <ul class="nav-bar">
 <li><a class="show_hide" href="#">work</a></li>
 <li><a class="show_hide-2" href="#">contact us</a></li>
 </ul> 
```

这是我的 JS

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();
    $('.show_hide').click(function(){
    $(".slidingDiv-2").hide();
    $(".slidingDiv").slideToggle();
       });

$(".slidingDiv-2").hide();
$(".show_hide-2").show();
$('.show_hide-2').click(function(){
$(".slidingDiv").hide();
$(".slidingDiv-2").slideToggle();
 });
 }); 
```

我还添加了 display:none; 到 show_hide 和 show_hide-2 但是当你加载网站时仍然有一个轻微的动画，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:38:27.263

将其更改为：

```
$('.show_hide').click(function(){
    $(".slidingDiv-2").hide();
    $(".slidingDiv").slideToggle();
}); 
```

和

```
$('.show_hide-2').click(function(){
    $(".slidingDiv").hide();
    $(".slidingDiv-2").slideToggle();
}); 
```

`div`您可以设置s的 CSS（或 HTML 中的内联）以在页面加载时在 Javascript 生效之前`display:none;`隐藏s。`div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:40:32.373

如果你有很多标签，你可以使用正则表达式：

```
$(document).ready(function(){

 $('[class^=slidingDiv]').hide();
 $('[class^=show_hide]').show();

 $('[class^=show_hide]').click(function(){
  $('[class^=slidingDiv]').hide();
  $(this).closest('[class^=slidingDiv]').slideToggle();
 });

}); 
```

# c# - 将嵌入的文本文件读取为字符串数组（C#）

> ID：13342988
> 
> 赞同：1
> 
> 时间：2012-11-12T11:35:22.823
> 
> 标签：c#, arrays, string, file-io, embedded-resource

我正在尝试读取嵌入式文本文件。

文本文件具有以下结构：

```
Word1
Word2
Word3
... 
```

我试图把它变成一个字符串数组，但我无法这样做。

我的意思是，我遇到过这个：[如何读取嵌入式资源文本文件](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)，但这只会将文件作为字符串读取，而我可以读取字符串，然后将其逐行分开，似乎应该有一个更简单的解决方案。

有没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:40:51.577

我使用这种扩展方法来分割线：

```
public static string[] GetLines(this string s)
{
    return s.Split(new[] {Environment.NewLine}, StringSplitOptions.None);
} 
```

然后你可以这样做：

```
string[] strings = Properties.Resources.YourResource.GetLines(); 
```

# c# - 如何在 asp.net 中创建具有类似于 Windows 窗体中的 datagridview 功能的 gridview

> ID：13342990
> 
> 赞同：2
> 
> 时间：2012-11-12T11:35:26.163
> 
> 标签：c#, asp.net, gridview, datagridview

我知道 asp.net 和 windows 窗体的 Gridview 是不同的，但我的要求是我有一个注册表单，用户可以在其中注册他的车辆。

一个用户可以拥有许多车辆，所以我想提供一个带有指定列名的 Gridview，并允许用户在行中输入值。根据车辆的数量，用户不断添加它们。这个任务在 Windows 窗体中实际上很容易，因为网格的方式是默认提供一个空行，我们可以输入单元格。最后，我们可以按每一行读取 DataGridview 并将结果保存到数据库。

我正在使用 Gridview 或任何其他数据控件在 Asp.net 中寻找此功能。这对于 asp.net gridview 来说看起来相当复杂，因为每次都需要使用编辑按钮、更新按钮来执行此操作，并且每次都需要添加新的行按钮。

有没有其他方法可以在不复杂的情况下完成这项任务。我对asp.net 相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:13:42.623

如果要添加新行，那么可以将页脚行添加到gridview。并且每次用户在页脚行中输入信息时，您都可以将其绑定到 gridview 并且当页面重新加载时，您将始终拥有页脚行。通过这种方式，用户可以注册他们想要的任意数量的汽车。

# java - Eclipse 依赖项目的 Web 应用程序库中的 Jar 未导出

> ID：13342991
> 
> 赞同：0
> 
> 时间：2012-11-12T11:35:38.053
> 
> 标签：java, eclipse, tomcat

我在 Eclipse 中创建了一个动态 Web 应用程序。它的 Web App Libraries 文件夹中有 2 个 jar。我在“订购和导出”选项卡中选择了 Web App Libraries 文件夹，所以我希望这会导致这 2 个 jar 被导出到我的运行时类路径。但是，当我单击“在服务器上运行”时，出现 ClassNotFound 错误。我可以通过修改我的运行配置并将 2 个 jars 添加到类路径来解决这个问题。

这是以下错误的另一种表现形式吗？

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=118622](https://bugs.eclipse.org/bugs/show_bug.cgi?id=118622)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:43:21.697

听起来可能。听起来这本身不是错误，而是在部署到/在外部服务器上运行时如何在 Eclipse 中管理运行时类路径的“功能”。请注意运行时类路径（由服务器在运行应用程序时使用）和构建类路径（由 Eclipse 在编译应用程序时使用）之间的区别。

为了在运行时类路径上有 2 个 jar，它们应该被复制到应用程序的展开目录（或 war 文件中）的“WEB-INF/lib”。

# javascript - while循环后的代码不起作用

> ID：13342992
> 
> 赞同：1
> 
> 时间：2012-11-12T11:35:42.450
> 
> 标签：javascript, smarty

```
<script type="text/javascript">
function prepare_values()
{ldelim}
        var flag= true;
        var i=0;
    var total_questions = new Array();
    var total_answer = new Array();
        while(flag)
            {ldelim}
            var questions = document.getElementById("question_div_"+i); 
            if (questions == null)
            {ldelim}
                flag=false;
                alert("Value of flag = "+flag);
            {rdelim}

            var answer = document.getElementById("answer_div_"+i);
            total_questions[i]=questions.firstChild.innerHTML; 
            if(answer.firstChild.attributes['type'].value == 'text')
                {ldelim}
                    total_answer[i]=answer.firstChild.nodeValue;
                {rdelim}

            if(answer.firstChild.attributes['type'].value == 'textarea')
                {ldelim}
                    total_answer[i]=answer.firstChild.nodeValue;
                {rdelim}

            if(answer.firstChild.attributes['type'].value == 'radio_div')
                {ldelim}
                       var radio_button_parent = document.getElementById(answer.firstChild.id);
                       var oRadio = document.getElementsByName(radio_button_parent.firstChild.name);
                       for(var k = 0; k < oRadio.length; k++)
                       {ldelim}
                          if(oRadio[k].checked)
                          {ldelim}
                             var radio_button_value = document.getElementById(oRadio[k].id);
                             alert("From inside of ever = "+radio_button_value.nextSibling.innerHTML);
                             total_answer[i]=radio_button_value.nextSibling.innerHTML;
                           {rdelim}
                       {rdelim}

                {rdelim}

    i=i+1; 
    {rdelim} 

    alert("hello");
{rdelim}
</script> 
```

以上是我的 JS 代码，它`SMARTY`在单击按钮时在模板文件中运行。代码运行良好，只是它没有运行倒数第三行，即 alert("Hello"); 之后的任何事情`{redelim}`都被忽略了。该怎么办 ？

这是萤火虫的代码：

```
<script type="text/javascript">
function prepare_values()
{
var flag= true;
var i=0;
var total_questions = new Array();
var total_answer = new Array();
while(flag)
{
var questions = document.getElementById("question_div_"+i);
if (questions == null)
{
flag=false;
alert("Value of flag = "+flag);
}
var answer = document.getElementById("answer_div_"+i);
total_questions[i]=questions.firstChild.innerHTML;
if(answer.firstChild.attributes['type'].value == 'text')
{
total_answer[i]=answer.firstChild.nodeValue;
}
if(answer.firstChild.attributes['type'].value == 'textarea')
{
total_answer[i]=answer.firstChild.nodeValue;
}
if(answer.firstChild.attributes['type'].value == 'radio_div')
{
var radio_button_parent = document.getElementById(answer.firstChild.id);
var oRadio = document.getElementsByName(radio_button_parent.firstChild.name);
for(var k = 0; k < oRadio.length; k++)
{
if(oRadio[k].checked)
{
var radio_button_value = document.getElementById(oRadio[k].id);
alert("From inside of ever = "+radio_button_value.nextSibling.innerHTML);
total_answer[i]=radio_button_value.nextSibling.innerHTML;
}
}
}
i=i+1;
}
alert("hello");
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:23:28.827

我不知道代码中的问题是什么以及为什么它不能按预期工作，但这就是我如何让我的代码直截了当。
这是新的工作代码：

```
function prepare_values()
{
    var flag= true;
    var i=0;
    var total_questions = new Array();
    var total_answer = new Array();
    while(flag)
    {
        var questions = document.getElementById("question_div_"+i);
        if (questions == null)
            {
                break;
            }
        var answer = document.getElementById("answer_div_"+i);
        total_questions[i]=questions.firstChild.innerHTML;
        if(answer.firstChild.attributes['type'].value == 'text')
            {
                total_answer[i]=answer.firstChild.nodeValue;
            }
        if(answer.firstChild.attributes['type'].value == 'textarea')
            {
                total_answer[i]=answer.firstChild.nodeValue;
            }
        if(answer.firstChild.attributes['type'].value == 'radio_div')
        {
            var radio_button_parent = document.getElementById(answer.firstChild.id);
            var oRadio = document.getElementsByName(radio_button_parent.firstChild.name);
            for(var k = 0; k < oRadio.length; k++)
                {
                    if(oRadio[k].checked)
                    {
                        var radio_button_value = document.getElementById(oRadio[k].id);
                        alert("From inside of ever = "+radio_button_value.nextSibling.innerHTML);
                        total_answer[i]=radio_button_value.nextSibling.innerHTML;
                    }
                }
        }
    i=i+1;
    }

    alert("hello");
} 
```

我所做的只是替换

```
if (questions == null)
{
    flag=false;
    alert("Value of flag = "+flag);
} 
```

和

```
if (questions == null)
{
    break;
} 
```

尽管我的问题已解决，但我仍然想知道为什么我以前的代码无法正常工作，因为它仍然可以正常工作，因为它是正确的。如果有人可以指出问题，请这样做，我将不胜感激。

# java - 组织类 java 的成员

> ID：13342995
> 
> 赞同：0
> 
> 时间：2012-11-12T11:35:52.790
> 
> 标签：java

我想知道，在java中组织类成员的正确方法是什么？我们应该先从公共成员开始，然后是私人成员还是私人成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:42:29.123

`Member is an interface that reflects identifying information about a single member (a field or a method) or a constructor.`（甲骨文官方文档）

因此，我建议每次有可能时，您都应该将自己`fields`设为私有并`setters and getters`为他们制作。至于方法 - 我真的不确定你是否必须根据事实来组织它们，如果它们是`public`或`private`